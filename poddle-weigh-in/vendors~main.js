(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"d",(function(){return o})),i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return h}));var n=i(13),r=i.n(n),s=i(19).a.add(Array,"Array",null,null,!1,r.a.dev);function o(t){for(var e=0;e<(arguments.length<=1?0:arguments.length-1);e++){var i=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];if(i&&i.length)for(var n=0;n<i.length;n++)-1===t.indexOf(i[n])&&t.push(i[n])}return t}function a(t){for(var e=s.setUp(),i=t.length,n=0;n<i;n++)e[n]=t[n];return e}function h(t,e){var i=t[e],n=t.length;if(e<0||e>=n)return null;for(var r=e+1;r<n;r++)t[r-1]=t[r];return n&&(t.length-=1),i}},function(t,e,i){"use strict";i.r(e),i.d(e,"BaseTextureCache",(function(){return B})),i.d(e,"CanvasRenderTarget",(function(){return Y})),i.d(e,"DATA_URI",(function(){return V})),i.d(e,"ProgramCache",(function(){return N})),i.d(e,"TextureCache",(function(){return j})),i.d(e,"clearTextureCache",(function(){return X})),i.d(e,"correctBlendMode",(function(){return w})),i.d(e,"createIndicesForQuads",(function(){return S})),i.d(e,"decomposeDataUri",(function(){return W})),i.d(e,"deprecation",(function(){return F})),i.d(e,"destroyTextureCache",(function(){return z})),i.d(e,"determineCrossOrigin",(function(){return q})),i.d(e,"getBufferType",(function(){return O})),i.d(e,"getResolutionOfUrl",(function(){return K})),i.d(e,"hex2rgb",(function(){return v})),i.d(e,"hex2string",(function(){return y})),i.d(e,"interleaveTypedArrays",(function(){return P})),i.d(e,"isPow2",(function(){return M})),i.d(e,"isWebGLSupported",(function(){return g})),i.d(e,"log2",(function(){return k})),i.d(e,"nextPow2",(function(){return C})),i.d(e,"premultiplyBlendMode",(function(){return _})),i.d(e,"premultiplyRgba",(function(){return x})),i.d(e,"premultiplyTint",(function(){return E})),i.d(e,"premultiplyTintToRgba",(function(){return T})),i.d(e,"removeItems",(function(){return I})),i.d(e,"rgb2hex",(function(){return b})),i.d(e,"sayHello",(function(){return p})),i.d(e,"sign",(function(){return L})),i.d(e,"skipHello",(function(){return d})),i.d(e,"string2hex",(function(){return m})),i.d(e,"trimCanvas",(function(){return H})),i.d(e,"uid",(function(){return R}));var n=i(10);i.d(e,"isMobile",(function(){return n.a}));var r=i(168),s=i.n(r);i.d(e,"EventEmitter",(function(){return s.a}));var o=i(169),a=i.n(o);i.d(e,"earcut",(function(){return a.a}));var h=i(97),u=i.n(h);i.d(e,"url",(function(){return u.a}));var l=i(3);
/*!
 * @pixi/utils - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */n.b.RETINA_PREFIX=/@([0-9\.]+)x/,n.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var c,f=!1;function d(){f=!0}function p(t){var e;if(!f){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["\n %c %c %c PixiJS 5.2.1 - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=window.console).log.apply(e,i)}else window.console&&window.console.log("PixiJS 5.2.1 - "+t+" - http://www.pixijs.com/");f=!0}}function g(){return void 0===c&&(c=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:n.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!i||!i.getContextAttributes().stencil);if(i){var s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,r}catch(t){return!1}}()),c}function v(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function y(t){var e=t.toString(16);return"#"+(e="000000".substr(0,6-e.length)+e)}function m(t){return"string"==typeof t&&"#"===t[0]&&(t=t.substr(1)),parseInt(t,16)}function b(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var _=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[l.b.NORMAL_NPM]=l.b.NORMAL,t[l.b.ADD_NPM]=l.b.ADD,t[l.b.SCREEN_NPM]=l.b.SCREEN,e[l.b.NORMAL]=l.b.NORMAL_NPM,e[l.b.ADD]=l.b.ADD_NPM,e[l.b.SCREEN]=l.b.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n}();function w(t,e){return _[e?1:0][t]}function x(t,e,i,n){return i=i||new Float32Array(4),n||void 0===n?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function E(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,n=t>>8&255,r=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((n=n*e+.5|0)<<8)+(r=r*e+.5|0)}function T(t,e,i,n){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(n||void 0===n)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}function S(t,e){void 0===e&&(e=null);var i=6*t;if((e=e||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+i);for(var n=0,r=0;n<i;n+=6,r+=4)e[n+0]=r+0,e[n+1]=r+1,e[n+2]=r+2,e[n+3]=r+0,e[n+4]=r+2,e[n+5]=r+3;return e}function O(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var A={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function P(t,e){for(var i=0,n=0,r={},s=0;s<t.length;s++)n+=e[s],i+=t[s].length;var o=new ArrayBuffer(4*i),a=null,h=0;for(s=0;s<t.length;s++){var u=e[s],l=t[s],c=O(l);r[c]||(r[c]=new A[c](o)),a=r[c];for(var f=0;f<l.length;f++){a[(f/u|0)*n+h+f%u]=l[f]}h+=u}return new Float32Array(o)}function C(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function M(t){return!(t&t-1||!t)}function k(t){var e=(t>65535?1:0)<<4,i=((t>>>=e)>255?1:0)<<3;return e|=i,e|=i=((t>>>=i)>15?1:0)<<2,(e|=i=((t>>>=i)>3?1:0)<<1)|(t>>>=i)>>1}function I(t,e,i){var n,r=t.length;if(!(e>=r||0===i)){var s=r-(i=e+i>r?r-e:i);for(n=e;n<s;++n)t[n]=t[n+i];t.length=s}}function L(t){return 0===t?0:t<0?-1:1}var D=0;function R(){return++D}var U={};function F(t,e,i){if(void 0===i&&(i=3),!U[e]){var n=(new Error).stack;void 0===n?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(n=n.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(n))),U[e]=!0}}var N={},j=Object.create(null),B=Object.create(null);function z(){var t;for(t in j)j[t].destroy();for(t in B)B[t].destroy()}function X(){var t;for(t in j)delete j[t];for(t in B)delete B[t]}var Y=function(){function t(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||n.b.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!0,configurable:!0}),t}();function H(t){var e,i,n,r=t.width,s=t.height,o=t.getContext("2d"),a=o.getImageData(0,0,r,s).data,h=a.length,u={top:null,left:null,right:null,bottom:null},l=null;for(e=0;e<h;e+=4)0!==a[e+3]&&(i=e/4%r,n=~~(e/4/r),null===u.top&&(u.top=n),null===u.left?u.left=i:i<u.left&&(u.left=i),null===u.right?u.right=i+1:u.right<i&&(u.right=i+1),null===u.bottom?u.bottom=n:u.bottom<n&&(u.bottom=n));return null!==u.top&&(r=u.right-u.left,s=u.bottom-u.top+1,l=o.getImageData(u.left,u.top,r,s)),{height:s,width:r,data:l}}var G,V=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function W(t){var e=V.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function q(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,G||(G=document.createElement("a")),G.href=t;var i=Object(h.parse)(G.href),n=!i.port&&""===e.port||i.port===e.port;return i.hostname===e.hostname&&n&&i.protocol===e.protocol?"":"anonymous"}function K(t,e){var i=n.b.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}},function(t,e,i){"use strict";var n,r,s,o,a=i(0),h=i(98),u=i(13),l=i.n(u);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}e.a=(n=l.a.dev,r=0,s=function(){},o=function(t,e,i){Object.defineProperty(e,t,{get:function(){return i[t]},set:function(e){i[t]=e},enumerable:!0})},function(t){var e,i,u=null,l=null,g=function(e){function i(e,n,s){var a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var h="",u="",l="",p="";if(a=function(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?d(t):e}(this,f(i).call(this,t.id,e)),t.properties)for(h in t.properties)t.properties.hasOwnProperty(h)&&(n&&void 0!==n[h]?a[h]=n[h]:void 0!==a.owner[h]?a[h]=a.owner[h]:a[h]=t.properties[h]);if(t.publicProperties)for(h in t.publicProperties)t.publicProperties.hasOwnProperty(h)&&(o(h,d(a),e),n&&void 0!==n[h]?a[h]=n[h]:void 0!==a.owner[h]?a[h]=a.owner[h]:a[h]=t.publicProperties[h]);if(t.events)for(u in r-=1,t.events)if(t.events.hasOwnProperty(u)&&(a.addEventListener(u,t.events[u],r),n&&n.aliases))for(p in n.aliases)n.aliases.hasOwnProperty(p)&&n.aliases[p]===u&&a.addEventListener(p,t.events[u],r);if(t.publicMethods)for(u in t.publicMethods)if(t.publicMethods.hasOwnProperty(u)){if(l=u,n&&n.aliases)for(p in n.aliases)n.aliases.hasOwnProperty(p)&&n.aliases[p]===u&&(l=p);a.addMethod(l,t.publicMethods[u])}return!a.initialize(n,s)&&s&&s(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(i,e),i}(h.a);if((l=g.prototype).initialize=t.initialize||s,l.toJSON=(e=!1,i=function t(i,n){var r=null,s=!1,o="",h=!1,u=0,l=c(i);if(e||(e=!0,s=!0),"function"===l)h=!0;else if("object"===l&&null!==i)if(i.toJSON)(r=n?Object(a.b)(n):a.a.setUp()).push(i),t(i.toJSON(),r)||(h=!0);else if(Array.isArray(i))for(u=i.length;u--;){if(n&&n.indexOf(i[u])>=0){h=!0;break}if((r=n?Object(a.b)(n):a.a.setUp()).push(i[u]),!t(i[u],r)){h=!0;break}}else for(o in i)if(i.hasOwnProperty(o)){if(n&&n.indexOf(i[o])>=0){h=!0;break}if((r=n?Object(a.b)(n):a.a.setUp()).push(i[o]),!t(i[o],r)){h=!0;break}}return n&&a.a.recycle(n),s&&(e=!1),!h},n?function(n){var r=t.properties,s=t.publicProperties,o={type:this.type},a="";for(a in r)r.hasOwnProperty(a)&&r[a]!==this[a]&&(e||i(this[a])||platypus.debug.warn('Component "'+this.type+'" includes a non-JSON property value for "'+a+'" (type "'+c(this[a])+'"). You may want to create a custom `toJSON` method for this component.',this[a]),o[a]=this[a]);for(a in s)s.hasOwnProperty(a)&&s[a]!==this.owner[a]&&void 0===n[a]&&(e||i(this.owner[a])||platypus.debug.warn('Component "'+this.type+'" includes a non-JSON public property value for "'+a+'" (type "'+c(this.owner[a])+'"). You may want to create a custom `toJSON` method for this component.',this.owner[a]),n[a]=this.owner[a]);return o}:function(e){var i=t.properties,n=t.publicProperties,r={type:this.type},s="";for(s in i)i.hasOwnProperty(s)&&i[s]!==this[s]&&(r[s]=this[s]);for(s in n)n.hasOwnProperty(s)&&n[s]!==this.owner[s]&&(e[s]=this.owner[s]);return r}),t.methods)for(u in t.methods)t.methods.hasOwnProperty(u)&&("destroy"===u?l._destroy=t.methods[u]:l[u]=t.methods[u]);if(t.publicMethods)for(u in t.publicMethods)t.publicMethods.hasOwnProperty(u)&&(l[u]=t.publicMethods[u]);return t.getAssetList&&(g.getAssetList=t.getAssetList),g})},function(t,e,i){"use strict";
/*!
 * @pixi/constants - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var n,r,s,o,a,h,u,l,c,f,d,p,g,v;i.d(e,"a",(function(){return d})),i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"d",(function(){return n})),i.d(e,"e",(function(){return a})),i.d(e,"f",(function(){return p})),i.d(e,"g",(function(){return v})),i.d(e,"h",(function(){return f})),i.d(e,"i",(function(){return g})),i.d(e,"j",(function(){return r})),i.d(e,"k",(function(){return l})),i.d(e,"l",(function(){return h})),i.d(e,"m",(function(){return u})),i.d(e,"n",(function(){return c})),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(n||(n={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(r||(r={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(s||(s={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(o||(o={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(a||(a={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(h||(h={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(u||(u={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(l||(l={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(c||(c={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON"}(f||(f={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(d||(d={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(p||(p={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(g||(g={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(v||(v={}))},function(t,e,i){"use strict";i.d(e,"a",(function(){return _})),i.d(e,"b",(function(){return h})),i.d(e,"c",(function(){return w})),i.d(e,"d",(function(){return u})),i.d(e,"e",(function(){return s})),i.d(e,"f",(function(){return o})),i.d(e,"g",(function(){return r})),i.d(e,"h",(function(){return x})),i.d(e,"i",(function(){return a})),i.d(e,"j",(function(){return b})),i.d(e,"k",(function(){return E})),i.d(e,"l",(function(){return n})),i.d(e,"m",(function(){return m})),i.d(e,"n",(function(){return y}));
/*!
 * @pixi/math - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var n,r=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t}(),s=function(){function t(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return t.prototype.clone=function(e,i){return void 0===e&&(e=this.cb),void 0===i&&(i=this.scope),new t(e,i,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),t}(),o=2*Math.PI,a=180/Math.PI,h=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(n||(n={}));var u=function(){function t(t,e,i,n,r,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,n,r,s){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new r;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new r;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,s=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,e,i,n,r,s,o,a,h){return this.a=Math.cos(o+h)*r,this.b=Math.sin(o+h)*r,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,s=-Math.atan2(-n,r),a=Math.atan2(i,e),h=Math.abs(s+a);return h<1e-5||Math.abs(o-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=a),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!0,configurable:!0}),t}(),l=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],c=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],f=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],d=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],p=[],g=[],v=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];p.push(e);for(var i=0;i<16;i++)for(var n=v(l[t]*l[i]+f[t]*c[i]),r=v(c[t]*l[i]+d[t]*c[i]),s=v(l[t]*f[i]+f[t]*d[i]),o=v(c[t]*f[i]+d[t]*d[i]),a=0;a<16;a++)if(l[a]===n&&c[a]===r&&f[a]===s&&d[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new u;h.set(l[t],c[t],f[t],d[t],0,0),g.push(h)}}();var y={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return l[t]},uY:function(t){return c[t]},vX:function(t){return f[t]},vY:function(t){return d[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return p[t][e]},sub:function(t,e){return p[t][y.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?y.S:y.N:2*Math.abs(e)<=Math.abs(t)?t>0?y.E:y.W:e>0?t>0?y.SE:y.SW:t>0?y.NE:y.NW},matrixAppendRotationInv:function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var r=g[y.inv(e)];r.tx=i,r.ty=n,t.append(r)}},m=function(){function t(){this.worldTransform=new u,this.localTransform=new u,this.position=new s(this.onChange,this,0,0),this.scale=new s(this.onChange,this,1,1),this.pivot=new s(this.onChange,this,0,0),this.skew=new s(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!0,configurable:!0}),t.IDENTITY=new t,t}(),b=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r),this.type=n.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(r-n,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=r-n,this},t}(),_=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=n.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,r=this.y-e;return(n*=n)+(r*=r)<=i},t.prototype.getBounds=function(){return new b(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}(),w=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t,this.y=e,this.width=i,this.height=r,this.type=n.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return(i*=i)+(n*=n)<=1},t.prototype.getBounds=function(){return new b(this.x-this.width,this.y-this.height,this.width,this.height)},t}(),x=function(){function t(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(Array.isArray(e[0])&&(e=e[0]),e[0]instanceof r){for(var s=[],o=0,a=(e=e).length;o<a;o++)s.push(e[o].x,e[o].y);e=s}this.points=e,this.type=n.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,s=n-1;r<n;s=r++){var o=this.points[2*r],a=this.points[2*r+1],h=this.points[2*s],u=this.points[2*s+1];a>e!=u>e&&t<(e-a)/(u-a)*(h-o)+o&&(i=!i)}return i},t}(),E=function(){function t(t,e,i,r,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===s&&(s=20),this.x=t,this.y=e,this.width=i,this.height=r,this.radius=s,this.type=n.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),r=this.radius*this.radius;if(i*i+n*n<=r)return!0;if((i=t-(this.x+this.width-this.radius))*i+n*n<=r)return!0;if(i*i+(n=e-(this.y+this.height-this.radius))*n<=r)return!0;if((i=t-(this.x+this.radius))*i+n*n<=r)return!0}return!1},t}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return m})),i.d(e,"b",(function(){return re})),i.d(e,"c",(function(){return le})),i.d(e,"d",(function(){return ge})),i.d(e,"e",(function(){return se})),i.d(e,"f",(function(){return N})),i.d(e,"g",(function(){return Lt})),i.d(e,"h",(function(){return H})),i.d(e,"i",(function(){return J})),i.d(e,"j",(function(){return At})),i.d(e,"k",(function(){return V})),i.d(e,"l",(function(){return D})),i.d(e,"m",(function(){return te})),i.d(e,"n",(function(){return Ct})),i.d(e,"o",(function(){return kt})),i.d(e,"p",(function(){return I})),i.d(e,"q",(function(){return Rt})),i.d(e,"r",(function(){return q})),i.d(e,"s",(function(){return ee})),i.d(e,"t",(function(){return ne})),i.d(e,"u",(function(){return ie}));var n=i(31),r=i(1),s=i(3),o=i(10),a=i(14),h=i(4),u=i(12),l=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new n.a("setRealSize",2),this.onUpdate=new n.a("update"),this.onError=new n.a("onError",1)},c={valid:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};l.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.run(this._width,this._height)},l.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},l.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.run(t,e))},c.valid.get=function(){return!!this._width&&!!this._height},l.prototype.update=function(){this.destroyed||this.onUpdate.run()},l.prototype.load=function(){return Promise.resolve()},c.width.get=function(){return this._width},c.height.get=function(){return this._height},l.prototype.upload=function(t,e,i){return!1},l.prototype.style=function(t,e,i){return!1},l.prototype.dispose=function(){},l.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Object.defineProperties(l.prototype,c);var f=function(t){function e(e){var i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;t.call(this,i,n),this.source=e,this.noSubImage=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=Object(r.determineCrossOrigin)(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},e.prototype.upload=function(t,e,i,n){var r=t.gl,o=e.realWidth,a=e.realHeight;return n=n||this.source,r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===s.a.UNPACK),this.noSubImage||e.target!==r.TEXTURE_2D||i.width!==o||i.height!==a?(i.width=o,i.height=a,r.texImage2D(e.target,0,e.format,e.format,e.type,n)):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e.format,e.type,n),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source.naturalWidth||this.source.videoWidth||this.source.width,i=this.source.naturalHeight||this.source.videoHeight||this.source.height;this.resize(e,i),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(l),d=function(t){function e(e,i){if(i=i||{},!(e instanceof HTMLImageElement)){var n=new Image;t.crossOrigin(n,e,i.crossorigin),n.src=e,e=n}t.call(this,e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(void 0!==i.createBitmap?i.createBitmap:o.b.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,this.alphaMode="number"==typeof i.alphaMode?i.alphaMode:null,void 0!==i.premultiplyAlpha&&(this.premultiplyAlpha=i.premultiplyAlpha),this.bitmap=null,this._load=null,!1!==i.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(t){var e=this;return void 0!==t&&(this.createBitmap=t),this._load?this._load:(this._load=new Promise((function(t){e.url=e.source.src;var i=e.source,n=function(){e.destroyed||(i.onload=null,i.onerror=null,e.resize(i.width,i.height),e._load=null,e.createBitmap?t(e.process()):t(e))};i.complete&&i.src?n():(i.onload=n,i.onerror=function(t){return e.onError.run(t)})})),this._load)},e.prototype.process=function(){var t=this;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(this.source,0,0,this.source.width,this.source.height,{premultiplyAlpha:this.premultiplyAlpha===s.a.UNPACK?"premultiply":"none"}).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process):Promise.resolve(this)},e.prototype.upload=function(e,i,n){if("number"==typeof this.alphaMode&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var r=!0;for(var s in i._glTextures){var o=i._glTextures[s];if(o!==n&&o.dirtyId!==i.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e}(f),p=[];function g(t,e){if(!t)return null;var i="";if("string"==typeof t){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(i=n[1].toLowerCase())}for(var r=p.length-1;r>=0;--r){var s=p[r];if(s.test&&s.test(t,i))return new s(t,e)}return new d(t,e)}var v=function(t){function e(e,i){var n=i||{},r=n.width,s=n.height;if(!r||!s)throw new Error("BufferResource width or height invalid");t.call(this,r,s),this.data=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.upload=function(t,e,i){var n=t.gl;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===s.a.UNPACK),i.width===e.width&&i.height===e.height?n.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,n.texImage2D(e.target,0,i.internalFormat,e.width,e.height,0,e.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(l),y={scaleMode:s.k.NEAREST,format:s.e.RGBA,alphaMode:s.a.NPM},m=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null),t.call(this);var n=(i=i||{}).alphaMode,a=i.mipmap,h=i.anisotropicLevel,u=i.scaleMode,c=i.width,f=i.height,d=i.wrapMode,p=i.format,v=i.type,y=i.target,m=i.resolution,b=i.resourceOptions;!e||e instanceof l||((e=g(e,b)).internal=!0),this.width=c||0,this.height=f||0,this.resolution=m||o.b.RESOLUTION,this.mipmap=void 0!==a?a:o.b.MIPMAP_TEXTURES,this.anisotropicLevel=void 0!==h?h:o.b.ANISOTROPIC_LEVEL,this.wrapMode=d||o.b.WRAP_MODE,this.scaleMode=void 0!==u?u:o.b.SCALE_MODE,this.format=p||s.e.RGBA,this.type=v||s.m.UNSIGNED_BYTE,this.target=y||s.l.TEXTURE_2D,this.alphaMode=void 0!==n?n:s.a.UNPACK,void 0!==i.premultiplyAlpha&&(this.premultiplyAlpha=i.premultiplyAlpha),this.uid=Object(r.uid)(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=c>0&&f>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.setResource(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={realWidth:{configurable:!0},realHeight:{configurable:!0}};return i.realWidth.get=function(){return Math.ceil(this.width*this.resolution-1e-4)},i.realHeight.get=function(){return Math.ceil(this.height*this.resolution-1e-4)},e.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},e.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Object(r.isPow2)(this.realWidth)&&Object(r.isPow2)(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete r.BaseTextureCache[this.cacheId],delete r.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.from=function(t,i,n){void 0===n&&(n=o.b.STRICT_TEXTURE_CACHE);var s="string"==typeof t,a=null;s?a=t:(t._pixiId||(t._pixiId="pixiid_"+Object(r.uid)()),a=t._pixiId);var h=r.BaseTextureCache[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||((h=new e(t,i)).cacheId=a,e.addToCache(h,a)),h},e.fromBuffer=function(t,i,n,r){t=t||new Float32Array(i*n*4);var o=new v(t,{width:i,height:n}),a=t instanceof Float32Array?s.m.FLOAT:s.m.UNSIGNED_BYTE;return new e(o,Object.assign(y,r||{width:i,height:n,type:a}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),r.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),r.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=r.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete r.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete r.BaseTextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},Object.defineProperties(e.prototype,i),e}(r.EventEmitter);m._globalBatch=0;var b=function(t){function e(e,i){var n;i=i||{};var r=e;Array.isArray(e)&&(n=e,r=e.length),t.call(this,i.width,i.height),this.items=[],this.itemDirtyIds=[];for(var s=0;s<r;s++){var o=new m;this.items.push(o),this.itemDirtyIds.push(-1)}if(this.length=r,this._load=null,n)for(var a=0;a<r;a++)this.addResourceAt(g(n[a],i),a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=s.l.TEXTURE_2D_ARRAY;for(var i=0;i<this.length;i++)this.items[i].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})),i=e.map((function(t){return t.load()}));return this._load=Promise.all(i).then((function(){var i=e[0],n=i.width,r=i.height;return t.resize(n,r),Promise.resolve(t)})),this._load},e.prototype.upload=function(t,e,i){var n=this.length,r=this.itemDirtyIds,s=this.items,o=t.gl;i.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,n,0,e.format,e.type,null);for(var a=0;a<n;a++){var h=s[a];r[a]<h.dirtyId&&(r[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},e}(l),_=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},e}(f),w=function(t){function e(i,n){if(n=n||{},t.call(this,i,n),this.length!==e.SIDES)throw new Error("Invalid length. Got "+this.length+", expected 6");for(var r=0;r<e.SIDES;r++)this.items[r].target=s.l.TEXTURE_CUBE_MAP_POSITIVE_X+r;!1!==n.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=s.l.TEXTURE_CUBE_MAP},e.prototype.upload=function(t,i,n){for(var r=this.itemDirtyIds,s=0;s<e.SIDES;s++){var o=this.items[s];r[s]<o.dirtyId&&(r[s]=o.dirtyId,o.valid&&o.resource.upload(t,o,n))}return!0},e}(b);w.SIDES=6;var x=function(t){function e(e,i){i=i||{},t.call(this,document.createElement("canvas")),this._width=0,this._height=0,this.svg=e,this.scale=i.scale||1,this._overrideWidth=i.width,this._overrideHeight=i.height,this._resolve=null,this._crossorigin=i.crossorigin,this._load=null,!1!==i.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;return this._load?this._load:(this._load=new Promise((function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()})),this._load)},e.prototype._loadSvg=function(){var e=this,i=new Image;t.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(t){i.onerror=null,e.onError.run(t)},i.onload=function(){var t=i.width,n=i.height;if(!t||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var s=t*e.scale,o=n*e.scale;(e._overrideWidth||e._overrideHeight)&&(s=e._overrideWidth||e._overrideHeight/n*t,o=e._overrideHeight||e._overrideWidth/t*n),s=Math.round(s),o=Math.round(o);var a=e.source;a.width=s,a.height=o,a._pixiId="canvas_"+Object(r.uid)(),a.getContext("2d").drawImage(i,0,0,t,n,0,0,s,o),e._resolve(),e._resolve=null}},e.getSize=function(t){var i=e.SVG_SIZE.exec(t),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,e){return"svg"===e||"string"==typeof t&&0===t.indexOf("data:image/svg+xml;base64")||"string"==typeof t&&0===t.indexOf("<svg")},e}(f);x.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var E=function(t){function e(e,i){if(i=i||{},!(e instanceof HTMLVideoElement)){var n=document.createElement("video");n.setAttribute("preload","auto"),n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),"string"==typeof e&&(e=[e]),t.crossOrigin(n,e[0].src||e[0],i.crossorigin);for(var r=0;r<e.length;++r){var s=document.createElement("source"),o=e[r],a=o.src,h=o.mime,u=(a=a||e[r]).split("?").shift().toLowerCase(),l=u.substr(u.lastIndexOf(".")+1);h=h||"video/"+l,s.src=a,s.type=h,n.appendChild(s)}e=n}t.call(this,e),this.noSubImage=!0,this._autoUpdate=!0,this._isAutoUpdating=!1,this._updateFPS=i.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==i.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==i.autoLoad&&this.load()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={autoUpdate:{configurable:!0},updateFPS:{configurable:!0}};return e.prototype.update=function(e){if(void 0===e&&(e=0),!this.destroyed){var i=a.a.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this,e),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(i){t.valid?i(t):(t._resolve=i,e.load())})),this._load},e.prototype._onError=function(){this.source.removeEventListener("error",this._onError,!0),this.onError.run(event)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(a.a.shared.add(this.update,this),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(a.a.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isAutoUpdating&&a.a.shared.remove(this.update,this),this.source&&(this.source.removeEventListener("error",this._onError,!0),this.source.pause(),this.source.src="",this.source.load()),t.prototype.dispose.call(this)},i.autoUpdate.get=function(){return this._autoUpdate},i.autoUpdate.set=function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(a.a.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(a.a.shared.add(this.update,this),this._isAutoUpdating=!0))},i.updateFPS.get=function(){return this._updateFPS},i.updateFPS.set=function(t){t!==this._updateFPS&&(this._updateFPS=t)},e.test=function(t,i){return t instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},Object.defineProperties(e.prototype,i),e}(f);E.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];var T=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},e}(f);p.push(d,T,_,E,x,v,w,b);var S=function(t){this.renderer=t};S.prototype.destroy=function(){this.renderer=null};var O=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.upload=function(t,e,i){var n=t.gl;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===s.a.UNPACK),i.width===e.width&&i.height===e.height?n.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,n.texImage2D(e.target,0,n.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},e}(v),A=function(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new n.a("disposeFramebuffer",2)},P={colorTexture:{configurable:!0}};P.colorTexture.get=function(){return this.colorTextures[0]},A.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new m(null,{scaleMode:0,resolution:1,mipmap:!1,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},A.prototype.addDepthTexture=function(t){return this.depthTexture=t||new m(new O(null,{width:this.width,height:this.height}),{scaleMode:0,resolution:1,width:this.width,height:this.height,mipmap:!1,format:s.e.DEPTH_COMPONENT,type:s.m.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},A.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},A.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},A.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],r=n.resolution;n.setSize(t/r,e/r)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}},A.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Object.defineProperties(A.prototype,P);var C=function(t){function e(e){if("number"==typeof e){var i=arguments[0],n=arguments[1],r=arguments[2],s=arguments[3];e={width:i,height:n,scaleMode:r,resolution:s}}t.call(this,null,e);var o=e||{},a=o.width,h=o.height;this.mipmap=!1,this.width=Math.ceil(a)||100,this.height=Math.ceil(h)||100,this.valid=!0,this._canvasRenderTarget=null,this.clearColor=[0,0,0,0],this.framebuffer=new A(this.width*this.resolution,this.height*this.resolution).addColorTexture(0,this),this.maskStack=[],this.filterStack=[{}]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.framebuffer=null},e}(m),M=function(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)};M.prototype.set=function(t,e,i){var n=e.width,r=e.height;if(i){var s=t.width/2/n,o=t.height/2/r,a=t.x/n+s,u=t.y/r+o;i=h.n.add(i,h.n.NW),this.x0=a+s*h.n.uX(i),this.y0=u+o*h.n.uY(i),i=h.n.add(i,2),this.x1=a+s*h.n.uX(i),this.y1=u+o*h.n.uY(i),i=h.n.add(i,2),this.x2=a+s*h.n.uX(i),this.y2=u+o*h.n.uY(i),i=h.n.add(i,2),this.x3=a+s*h.n.uX(i),this.y3=u+o*h.n.uY(i)}else this.x0=t.x/n,this.y0=t.y/r,this.x1=(t.x+t.width)/n,this.y1=t.y/r,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/r,this.x3=t.x/n,this.y3=(t.y+t.height)/r;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3};var k=new M,I=function(t){function e(i,n,r,s,o,a){if(t.call(this),this.noFrame=!1,n||(this.noFrame=!0,n=new h.j(0,0,1,1)),i instanceof e&&(i=i.baseTexture),this.baseTexture=i,this._frame=n,this.trim=s,this.valid=!1,this.requiresUpdate=!1,this._uvs=k,this.uvMatrix=null,this.orig=r||n,this._rotate=Number(o||0),!0===o)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=a?new h.g(a.x,a.y):new h.g(0,0),this._updateID=0,this.textureCacheIds=[],i.valid?this.noFrame?i.valid&&this.onBaseTextureUpdated(i):this.frame=n:i.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&i.on("update",this.onBaseTextureUpdated,this)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={resolution:{configurable:!0},frame:{configurable:!0},rotate:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var i=this.baseTexture.resource;i&&r.TextureCache[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},e.prototype.updateUvs=function(){this._uvs===k&&(this._uvs=new M),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,i,n){void 0===i&&(i={}),void 0===n&&(n=o.b.STRICT_TEXTURE_CACHE);var s="string"==typeof t,a=null;s?a=t:(t._pixiId||(t._pixiId="pixiid_"+Object(r.uid)()),a=t._pixiId);var h=r.TextureCache[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=Object(r.getResolutionOfUrl)(t)),(h=new e(new m(t,i))).baseTexture.cacheId=a,m.addToCache(h.baseTexture,a),e.addToCache(h,a)),h},e.fromBuffer=function(t,i,n,r){return new e(m.fromBuffer(t,i,n,r))},e.fromLoader=function(t,i,n){var s=new d(t);s.url=i;var a=new e(new m(s,{scaleMode:o.b.SCALE_MODE,resolution:Object(r.getResolutionOfUrl)(i)}));return n||(n=i),m.addToCache(a.baseTexture,n),e.addToCache(a,n),n!==i&&(m.addToCache(a.baseTexture,i),e.addToCache(a,i)),a},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),r.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),r.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=r.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete r.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)r.TextureCache[t.textureCacheIds[n]]===t&&delete r.TextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},i.resolution.get=function(){return this.baseTexture.resolution},i.frame.get=function(){return this._frame},i.frame.set=function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,n=t.width,r=t.height,s=e+n>this.baseTexture.width,o=i+r>this.baseTexture.height;if(s||o){var a=s&&o?"and":"or",h="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,u="Y: "+i+" + "+r+" = "+(i+r)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+a+" "+u)}this.valid=n&&r&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},i.rotate.get=function(){return this._rotate},i.rotate.set=function(t){this._rotate=t,this.valid&&this.updateUvs()},i.width.get=function(){return this.orig.width},i.height.get=function(){return this.orig.height},Object.defineProperties(e.prototype,i),e}(r.EventEmitter);function L(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}I.EMPTY=new I(new m),L(I.EMPTY),L(I.EMPTY.baseTexture),I.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new I(new m(new _(t)))}(),L(I.WHITE),L(I.WHITE.baseTexture);var D=function(t){function e(e,i){var n=null;if(!(e instanceof C)){var r=arguments[1],s=arguments[2],o=arguments[3],a=arguments[4];console.warn("Please use RenderTexture.create("+r+", "+s+") instead of the ctor directly."),n=arguments[0],i=null,e=new C({width:r,height:s,scaleMode:o,resolution:a})}t.call(this,e,i),this.legacyRenderer=n,this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.resize=function(t,e,i){void 0===i&&(i=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i&&this.baseTexture.resize(t,e),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){return"number"==typeof t&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new e(new C(t))},e}(I),R=function(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0};R.prototype.createTexture=function(t,e){var i=new C(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new D(i)},R.prototype.getOptimalTexture=function(t,e,i){void 0===i&&(i=1);var n=R.SCREEN_KEY;t*=i,e*=i,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(n=(65535&(t=Object(r.nextPow2)(t)))<<16|65535&(e=Object(r.nextPow2)(e))),this.texturePool[n]||(this.texturePool[n]=[]);var s=this.texturePool[n].pop();return s||(s=this.createTexture(t,e)),s.filterPoolKey=n,s.setResolution(i),s},R.prototype.getFilterTexture=function(t,e){var i=this.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},R.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},R.prototype.returnFilterTexture=function(t){this.returnTexture(t)},R.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},R.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=R.SCREEN_KEY,i=this.texturePool[e];if(this.enableFullScreen=t.width>0&&t.height>0,i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},R.SCREEN_KEY="screen";var U=function(t,e,i,n,r,s,o){void 0===i&&(i=!1),void 0===n&&(n=5126),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=r,this.start=s,this.instance=o};U.prototype.destroy=function(){this.buffer=null},U.from=function(t,e,i,n,r){return new U(t,e,i,n,r)};var F=0,N=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=F++,this.disposeRunner=new n.a("disposeBuffer",2)};function j(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}N.prototype.update=function(t){this.data=t||this.data,this._updateID++},N.prototype.dispose=function(){this.disposeRunner.run(this,!1)},N.prototype.destroy=function(){this.dispose(),this.data=null},N.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new N(t)};var B={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var z={5126:4,5123:2,5121:1},X=0,Y={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},H=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=X++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new n.a("disposeGeometry",2),this.refCount=0};H.prototype.addAttribute=function(t,e,i,n,r,s,o,a){if(void 0===n&&(n=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e.data||(e instanceof Array&&(e=new Float32Array(e)),e=new N(e));var h=t.split("|");if(h.length>1){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,i,n,r);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new U(l,i,n,r,s,o,a),this.instanced=this.instanced||a,this},H.prototype.getAttribute=function(t){return this.attributes[t]},H.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},H.prototype.addIndex=function(t){return t.data||(t instanceof Array&&(t=new Uint16Array(t)),t=new N(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},H.prototype.getIndex=function(){return this.indexBuffer},H.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],i=[],n=new N;for(t in this.attributes){var r=this.attributes[t],s=this.buffers[r.buffer];e.push(s.data),i.push(r.size*z[r.type]/4),r.buffer=0}for(n.data=function(t,e){for(var i=0,n=0,r={},s=0;s<t.length;s++)n+=e[s],i+=t[s].length;for(var o=new ArrayBuffer(4*i),a=null,h=0,u=0;u<t.length;u++){var l=e[u],c=t[u],f=j(c);r[f]||(r[f]=new B[f](o)),a=r[f];for(var d=0;d<c.length;d++){a[(d/l|0)*n+h+d%l]=c[d]}h+=l}return new Float32Array(o)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},H.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},H.prototype.dispose=function(){this.disposeRunner.run(this,!1)},H.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},H.prototype.clone=function(){for(var t=new H,e=0;e<this.buffers.length;e++)t.buffers[e]=new N(this.buffers[e].data.slice());for(var i in this.attributes){var n=this.attributes[i];t.attributes[i]=new U(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},H.merge=function(t){for(var e,i=new H,n=[],r=[],s=[],o=0;o<t.length;o++){e=t[o];for(var a=0;a<e.buffers.length;a++)r[a]=r[a]||0,r[a]+=e.buffers[a].data.length,s[a]=0}for(var h=0;h<e.buffers.length;h++)n[h]=new(Y[j(e.buffers[h].data)])(r[h]),i.buffers[h]=new N(n[h]);for(var u=0;u<t.length;u++){e=t[u];for(var l=0;l<e.buffers.length;l++)n[l].set(e.buffers[l].data,s[l]),s[l]+=e.buffers[l].data.length}if(i.attributes=e.attributes,e.indexBuffer){i.indexBuffer=i.buffers[e.buffers.indexOf(e.indexBuffer)],i.indexBuffer.index=!0;for(var c=0,f=0,d=0,p=0,g=0;g<e.buffers.length;g++)if(e.buffers[g]!==e.indexBuffer){p=g;break}for(var v in e.attributes){var y=e.attributes[v];(0|y.buffer)===p&&(f+=y.size*z[y.type]/4)}for(var m=0;m<t.length;m++){for(var b=t[m].indexBuffer.data,_=0;_<b.length;_++)i.indexBuffer.data[_+d]+=c;c+=e.buffers[p].data.length/f,d+=b.length}}return i};var G=function(t){function e(){t.call(this),this.addAttribute("aVertexPosition",[0,0,1,0,1,1,0,1]).addIndex([0,1,3,2])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(H),V=function(t){function e(){t.call(this),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new N(this.vertices),this.uvBuffer=new N(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,e){var i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(H),W=0,q=function(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=W++,this.static=!!e};q.prototype.update=function(){this.dirtyId++},q.prototype.add=function(t,e,i){this.uniforms[t]=new q(e,i)},q.from=function(t,e){return new q(t,e)};var K=function(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new h.j,this.destinationFrame=new h.j,this.filters=[]};K.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null};var Z=function(t){function e(e){t.call(this,e),this.defaultFilterStack=[{}],this.texturePool=new R,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new G,this.quadUv=new V,this.tempRect=new h.j,this.activeState={},this.globalUniforms=new q({outputFrame:this.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this._pixelsWidth=e.view.width,this._pixelsHeight=e.view.height}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,r=this.statePool.pop()||new K,s=e[0].resolution,o=e[0].padding,a=e[0].autoFit,h=e[0].legacy,u=1;u<e.length;u++){var l=e[u];s=Math.min(s,l.resolution),o=Math.max(o,l.padding),a=a||l.autoFit,h=h||l.legacy}1===n.length&&(this.defaultFilterStack[0].renderTexture=i.renderTexture.current),n.push(r),r.resolution=s,r.legacy=h,r.target=t,r.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),r.sourceFrame.pad(o),a&&r.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),r.sourceFrame.ceil(s),r.renderTexture=this.getOptimalFilterTexture(r.sourceFrame.width,r.sourceFrame.height,s),r.filters=e,r.destinationFrame.width=r.renderTexture.width,r.destinationFrame.height=r.renderTexture.height,r.renderTexture.filterFrame=r.sourceFrame,i.renderTexture.bind(r.renderTexture,r.sourceFrame),i.renderTexture.clear()},e.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var r=n.inputSize,s=n.inputPixel,o=n.inputClamp;if(r[0]=e.destinationFrame.width,r[1]=e.destinationFrame.height,r[2]=1/r[0],r[3]=1/r[1],s[0]=r[0]*e.resolution,s[1]=r[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*r[2]-.5*s[2],o[3]=e.sourceFrame.height*r[3]-.5*s[3],e.legacy){var a=n.filterArea;a[0]=e.destinationFrame.width,a[1]=e.destinationFrame.height,a[2]=e.sourceFrame.x,a[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var h=t[t.length-1];if(1===i.length)i[0].apply(this,e.renderTexture,h.renderTexture,!1,e),this.returnFilterTexture(e.renderTexture);else{var u=e.renderTexture,l=this.getOptimalFilterTexture(u.width,u.height,e.resolution);l.filterFrame=u.filterFrame;var c=0;for(c=0;c<i.length-1;++c){i[c].apply(this,u,l,!0,e);var f=u;u=l,l=f}i[c].apply(this,u,h.renderTexture,!1,e),this.returnFilterTexture(u),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},e.prototype.applyFilter=function(t,e,i,n){var r=this.renderer;r.renderTexture.bind(i,i?i.filterFrame:null),n&&r.renderTexture.clear(),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,r.state.set(t.state),r.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),r.geometry.bind(this.quadUv),r.geometry.draw(s.c.TRIANGLES)):(r.geometry.bind(this.quad),r.geometry.draw(s.c.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,r=i.destinationFrame,s=e._texture.orig,o=t.set(r.width,0,0,r.height,n.x,n.y),a=e.worldTransform.copyTo(h.d.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(e.anchor.x,e.anchor.y),o},e.prototype.destroy=function(){this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,e,i){return void 0===i&&(i=1),this.texturePool.getOptimalTexture(t,e,i)},e.prototype.getFilterTexture=function(t,e){if("number"==typeof t){var i=t;t=e,e=i}t=t||this.activeState.renderTexture;var n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return n.filterFrame=t.filterFrame,n},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e}(S),J=function(t){this.renderer=t};J.prototype.flush=function(){},J.prototype.destroy=function(){this.renderer=null},J.prototype.start=function(){},J.prototype.stop=function(){this.flush()},J.prototype.render=function(t){};var Q=function(t){function e(e){t.call(this,e),this.emptyRenderer=new J(e),this.currentRenderer=this.emptyRenderer}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},e.prototype.boundArray=function(t,e,i,n){for(var r=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=r[h],l=u._batchLocation;if(l>=0&&l<n&&e[l]===u)s[h]=l;else for(;a<n;){var c=e[a];if(!c||c._batchEnabled!==i||c._batchLocation!==a){s[h]=a,u._batchLocation=a,e[a]=u;break}a++}}},e}(S);o.b.PREFER_ENV=r.isMobile.any?s.d.WEBGL:s.d.WEBGL2,o.b.STRICT_TEXTURE_CACHE=!1;var $=0,tt=function(t){function e(e){t.call(this,e),this.webGLVersion=1,this.extensions={},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={isLost:{configurable:!0}};return i.isLost.get=function(){return!this.gl||this.gl.isContextLost()},e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=$++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=$++,this.renderer.runners.contextChange.run(t)},e.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},e.prototype.createContext=function(t,e){var i;if(o.b.PREFER_ENV>=s.d.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),i},e.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBKIT_WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.run(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")},Object.defineProperties(e.prototype,i),e}(S),et=function(t){function e(e){t.call(this,e),this.managedFramebuffers=[],this.unknownFramebuffer=new A(10,10)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={size:{configurable:!0}};return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new h.j,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;o.b.PREFER_ENV===s.d.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}},e.prototype.bind=function(t,e){var i=this.gl;if(t){var n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer)),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var r=0;r<t.colorTextures.length;r++)t.colorTextures[r].texturePart?this.renderer.texture.unbind(t.colorTextures[r].texture):this.renderer.texture.unbind(t.colorTextures[r]);t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,e,i,n){var r=this.viewport;r.width===i&&r.height===n&&r.x===t&&r.y===e||(r.x=t,r.y=e,r.width=i,r.height=n,this.gl.viewport(t,e,i,n))},i.size.get=function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},e.prototype.clear=function(t,e,i,n){var r=this.gl;r.clearColor(t,e,i,n),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},e.prototype.initFramebuffer=function(t){var e={framebuffer:this.gl.createFramebuffer(),stencil:null,dirtyId:0,dirtyFormat:0,dirtySize:0};return t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},e.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var n=t.colorTextures,r=0;r<n.length;r++)this.renderer.texture.bind(n[r],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures.length;e.drawBuffers||(n=Math.min(n,1));for(var r=[],s=0;s<n;s++){var o=t.colorTextures[s];o.texturePart?(this.renderer.texture.bind(o.texture,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+s,e.TEXTURE_CUBE_MAP_NEGATIVE_X+o.side,o.texture._glTextures[this.CONTEXT_UID].texture,0)):(this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+s,e.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,0)),r.push(e.COLOR_ATTACHMENT0+s)}if((r.length>1&&e.drawBuffers(r),t.depthTexture)&&this.writeDepthTexture){var a=t.depthTexture;this.renderer.texture.bind(a,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a._glTextures[this.CONTEXT_UID].texture,0)}i.stencil||!t.stencil&&!t.depth||(i.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i.stencil))},e.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var r=this.managedFramebuffers.indexOf(t);r>=0&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},e.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var i=t.width,n=t.height,r=this.gl,s=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,s),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,i,n),e.stencil=s,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,s)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new h.j},Object.defineProperties(e.prototype,i),e}(S),it=function(t){this.buffer=t,this.updateID=-1,this.byteLength=-1,this.refCount=0},nt={5126:4,5123:2,5121:1},rt=function(t){function e(e){t.call(this,e),this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.boundBuffers={},this.managedGeometries={},this.managedBuffers={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!t.createVertexArray){var i=this.renderer.context.extensions.vertexArrayObject;o.b.PREFER_ENV===s.d.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(t){return i.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return i.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){},t.bindVertexArray=function(){},t.deleteVertexArray=function(){})}if(!t.vertexAttribDivisor){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(t,e){return n.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,i,r,s){return n.drawElementsInstancedANGLE(t,e,i,r,s)},t.drawArraysInstanced=function(t,e,i,r){return n.drawArraysInstancedANGLE(t,e,i,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},e.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID];n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={});var r=n[e.program.id]||this.initGeometryVao(t,e.program);this._activeGeometry=t,this._activeVao!==r&&(this._activeVao=r,this.hasVao?i.bindVertexArray(r):this.activateVao(t,e.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,i=0;i<t.buffers.length;i++){var n=t.buffers[i],r=n._glBuffers[this.CONTEXT_UID];if(n._updateID!==r.updateID){r.updateID=n._updateID;var s=n.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(s,r.buffer),this._boundBuffer=r,r.byteLength>=n.data.byteLength)e.bufferSubData(s,0,n.data);else{var o=n.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=n.data.byteLength,e.bufferData(s,n.data,o)}}}},e.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var r in n)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},e.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,r=["g",t.id];for(var s in i)n[s]&&r.push(s);return r.join("-")},e.prototype.initGeometryVao=function(t,e){this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,r=this.getSignature(t,e),s=t.glVertexArrayObjects[this.CONTEXT_UID],o=s[r];if(o)return s[e.id]=o,o;var a=t.buffers,h=t.attributes,u={},l={};for(var c in a)u[c]=0,l[c]=0;for(var f in h)!h[f].size&&e.attributeData[f]?h[f].size=e.attributeData[f].size:h[f].size||console.warn("PIXI Geometry attribute '"+f+"' size cannot be determined (likely the bound shader does not have the attribute)"),u[h[f].buffer]+=h[f].size*nt[h[f].type];for(var d in h){var p=h[d],g=p.size;void 0===p.stride&&(u[p.buffer]===g*nt[p.type]?p.stride=0:p.stride=u[p.buffer]),void 0===p.start&&(p.start=l[p.buffer],l[p.buffer]+=g*nt[p.type])}o=i.createVertexArray(),i.bindVertexArray(o);for(var v=0;v<a.length;v++){var y=a[v];y._glBuffers[n]||(y._glBuffers[n]=new it(i.createBuffer()),this.managedBuffers[y.id]=y,y.disposeRunner.add(this)),y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=o,s[e.id]=o,s[r]=o,o},e.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,r=t.buffers;if(t.disposeRunner.remove(this),i){for(var s=0;s<r.length;s++){var o=r[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(r[s],e)}if(!e)for(var a in i)if("g"===a[0]){var h=i[a];this._activeVao===h&&this.unbind(),n.deleteVertexArray(h)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t);e=Object.keys(this.managedBuffers);for(var n=0;n<e.length;n++)this.disposeBuffer(this.managedBuffers[e[n]],t)},e.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,r=t.buffers,s=t.attributes;t.indexBuffer&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[n].buffer);var o=null;for(var a in s){var h=s[a],u=r[h.buffer]._glBuffers[n];if(e.attributeData[a]){o!==u&&(i.bindBuffer(i.ARRAY_BUFFER,u.buffer),o=u);var l=e.attributeData[a].location;if(i.enableVertexAttribArray(l),i.vertexAttribPointer(l,h.size,h.type||i.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(l,1)}}}},e.prototype.draw=function(t,e,i,n){var r=this.gl,s=this._activeGeometry;if(s.indexBuffer){var o=s.indexBuffer.data.BYTES_PER_ELEMENT,a=2===o?r.UNSIGNED_SHORT:r.UNSIGNED_INT;2===o||4===o&&this.canUseUInt32ElementIndex?s.instanced?r.drawElementsInstanced(t,e||s.indexBuffer.data.length,a,(i||0)*o,n||1):r.drawElements(t,e||s.indexBuffer.data.length,a,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else s.instanced?r.drawArraysInstanced(t,i,e||s.getSize(),n||1):r.drawArrays(t,i,e||s.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e}(S),st=function(t){this.type=s.g.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null};function ot(t,e,i,n){var r=at(t,t.VERTEX_SHADER,e),s=at(t,t.FRAGMENT_SHADER,i),o=t.createProgram();if(t.attachShader(o,r),t.attachShader(o,s),n)for(var a in n)t.bindAttribLocation(o,n[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(r))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(i),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(r),t.deleteShader(s),o}function at(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),n}function ht(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return ut(2*e);case"bvec3":return ut(3*e);case"bvec4":return ut(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function ut(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}st.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=s.g.NONE,this.autoDetect=!0),this._target=null},st.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)};var lt,ct={},ft=ct;function dt(){if(ft===ct||ft&&ft.isContextLost()){var t,e=document.createElement("canvas");o.b.PREFER_ENV>=s.d.WEBGL2&&(t=e.getContext("webgl2",{})),t||((t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),ft=t}return ft}function pt(t,e,i){if("precision"!==t.substring(0,9)){var n=e;return e===s.i.HIGH&&i!==s.i.HIGH&&(n=s.i.MEDIUM),"precision "+n+" float;\n"+t}return i!==s.i.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var gt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function vt(t){return gt[t]}var yt=null,mt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray"};function bt(t,e){if(!yt){var i=Object.keys(mt);yt={};for(var n=0;n<i.length;++n){var r=i[n];yt[t[r]]=mt[r]}}return yt[e]}var _t={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},wt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var xt,Et=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Tt(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}var St=0,Ot={},At=function t(e,i,n){void 0===n&&(n="pixi-shader"),this.id=St++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(n=n.replace(/\s+/g,"-"),Ot[n]?(Ot[n]++,n+="-"+Ot[n]):Ot[n]=1,this.vertexSrc="#define SHADER_NAME "+n+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+"\n"+this.fragmentSrc,this.vertexSrc=pt(this.vertexSrc,o.b.PRECISION_VERTEX,s.i.HIGH),this.fragmentSrc=pt(this.fragmentSrc,o.b.PRECISION_FRAGMENT,function(){if(!lt){lt=s.i.MEDIUM;var t=dt();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);lt=e.precision?s.i.HIGH:s.i.MEDIUM}}return lt}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null},Pt={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};At.prototype.extractData=function(t,e){var i=dt();if(i){var n=ot(i,t,e);this.attributeData=this.getAttributeData(n,i),this.uniformData=this.getUniformData(n,i),i.deleteProgram(n)}else this.uniformData={},this.attributeData={}},At.prototype.getAttributeData=function(t,e){for(var i={},n=[],r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<r;s++){var o=e.getActiveAttrib(t,s),a=bt(e,o.type),h={type:a,name:o.name,size:vt(a),location:0};i[o.name]=h,n.push(h)}n.sort((function(t,e){return t.name>e.name?1:-1}));for(var u=0;u<n.length;u++)n[u].location=u;return i},At.prototype.getUniformData=function(t,e){for(var i={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<n;r++){var s=e.getActiveUniform(t,r),o=s.name.replace(/\[.*?\]/,""),a=s.name.match(/\[.*?\]/,""),h=bt(e,s.type);i[o]={type:h,size:s.size,isArray:a,value:ht(h,s.size)}}return i},Pt.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},Pt.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},At.from=function(t,e,i){var n=t+e,s=r.ProgramCache[n];return s||(r.ProgramCache[n]=s=new At(t,e,i)),s},Object.defineProperties(At,Pt);var Ct=function(t,e){for(var i in this.program=t,this.uniformGroup=e?e instanceof q?e:new q(e):new q({}),t.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))},Mt={uniforms:{configurable:!0}};Ct.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},Ct.prototype.destroy=function(){this.uniformGroup=null},Mt.uniforms.get=function(){return this.uniformGroup.uniforms},Ct.from=function(t,e,i){var n=At.from(t,e);return new Ct(n,i)},Object.defineProperties(Ct.prototype,Mt);var kt=function(){this.data=0,this.blendMode=s.b.NORMAL,this.polygonOffset=0,this.blend=!0},It={blend:{configurable:!0},offsets:{configurable:!0},culling:{configurable:!0},depthTest:{configurable:!0},clockwiseFrontFace:{configurable:!0},blendMode:{configurable:!0},polygonOffset:{configurable:!0}};It.blend.get=function(){return!!(1&this.data)},It.blend.set=function(t){!!(1&this.data)!==t&&(this.data^=1)},It.offsets.get=function(){return!!(2&this.data)},It.offsets.set=function(t){!!(2&this.data)!==t&&(this.data^=2)},It.culling.get=function(){return!!(4&this.data)},It.culling.set=function(t){!!(4&this.data)!==t&&(this.data^=4)},It.depthTest.get=function(){return!!(8&this.data)},It.depthTest.set=function(t){!!(8&this.data)!==t&&(this.data^=8)},It.clockwiseFrontFace.get=function(){return!!(16&this.data)},It.clockwiseFrontFace.set=function(t){!!(16&this.data)!==t&&(this.data^=16)},It.blendMode.get=function(){return this._blendMode},It.blendMode.set=function(t){this.blend=t!==s.b.NONE,this._blendMode=t},It.polygonOffset.get=function(){return this._polygonOffset},It.polygonOffset.set=function(t){this.offsets=!!t,this._polygonOffset=t},kt.for2d=function(){var t=new kt;return t.depthTest=!1,t.blend=!0,t},Object.defineProperties(kt.prototype,It);var Lt=function(t){function e(i,n,r){var s=At.from(i||e.defaultVertexSrc,n||e.defaultFragmentSrc);t.call(this,s,r),this.padding=0,this.resolution=o.b.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0,this.legacy=!!this.program.attributeData.aTextureCoord,this.state=new kt}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blendMode:{configurable:!0}},n={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};return e.prototype.apply=function(t,e,i,n,r){t.applyFilter(this,e,i,n,r)},i.blendMode.get=function(){return this.state.blendMode},i.blendMode.set=function(t){this.state.blendMode=t},n.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},n.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},Object.defineProperties(e.prototype,i),Object.defineProperties(e,n),e}(Ct);Lt.SOURCE_KEY_MAP={};var Dt=new h.d,Rt=function(t,e){this._texture=t,this.mapCoord=new h.d,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._updateID=-1,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1},Ut={texture:{configurable:!0}};Ut.texture.get=function(){return this._texture},Ut.texture.set=function(t){this._texture=t,this._updateID=-1},Rt.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var r=t[n],s=t[n+1];e[n]=r*i.a+s*i.c+i.tx,e[n+1]=r*i.b+s*i.d+i.ty}return e},Rt.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._updateID===e._updateID)return!1;this._updateID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,r=e.trim;r&&(Dt.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Dt));var s=e.baseTexture,o=this.uClampFrame,a=this.clampMargin/s.resolution,h=this.clampOffset;return o[0]=(e._frame.x+a+h)/s.width,o[1]=(e._frame.y+a+h)/s.height,o[2]=(e._frame.x+e._frame.width-a+h)/s.width,o[3]=(e._frame.y+e._frame.height-a+h)/s.height,this.uClampOffset[0]=h/s.realWidth,this.uClampOffset[1]=h/s.realHeight,this.isSimple=e._frame.width===s.width&&e._frame.height===s.height&&0===e.rotate,!0},Object.defineProperties(Rt.prototype,Ut);var Ft=function(t){function e(e){var i=new h.d;t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n"),e.renderable=!1,this.maskSprite=e,this.maskMatrix=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t,e,i,n){var r=this.maskSprite,s=this.maskSprite.texture;s.valid&&(s.transform||(s.transform=new Rt(s,0)),s.transform.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(s.transform.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=s.transform.uClampFrame,t.applyFilter(this,e,i,n))},e}(Lt),Nt=function(t){function e(e){t.call(this,e),this.scissorRenderTarget=null,this.enableScissor=!1,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,e){if(!e.isMaskData){var i=this.maskDataPool.pop()||new st;i.pooled=!0,i.maskObject=e,e=i}switch(e.autoDetect&&this.detect(e),e.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),e._target=t,e.type){case s.g.SCISSOR:this.maskStack.push(e),this.renderer.scissor.push(e);break;case s.g.STENCIL:this.maskStack.push(e),this.renderer.stencil.push(e);break;case s.g.SPRITE:e.copyCountersOrReset(null),this.pushSpriteMask(e),this.maskStack.push(e)}},e.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case s.g.SCISSOR:this.renderer.scissor.pop();break;case s.g.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case s.g.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},e.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite)t.type=s.g.SPRITE;else if(t.type=s.g.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),r=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),r=((r=Math.round(r*(180/Math.PI)*100)-n)%18e3+18e3)%18e3,0===(n=(n%9e3+9e3)%9e3)&&9e3===r&&(t.type=s.g.SCISSOR)}},e.prototype.pushSpriteMask=function(t){var e=t.maskObject,i=t._target,n=this.alphaMaskPool[this.alphaMaskIndex];n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new Ft(e)]),n[0].resolution=this.renderer.resolution,n[0].maskSprite=e;var r=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,n),i.filterArea=r,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e}(S),jt=function(t){function e(e){t.call(this,e),this.maskStack=[],this.glConst=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(0===n?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this,this),this.maskStack=null},e}(S),Bt=function(t){function e(e){t.call(this,e),this.glConst=WebGLRenderingContext.SCISSOR_TEST}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var i=t._scissorRect,n=e.getBounds(!0),r=this.renderer.gl;e.renderable=!1,i?n.fit(i):r.enable(r.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=n,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,i=this.renderer.projection,n=i.transform,r=i.sourceFrame,s=i.destinationFrame,o=e?e.resolution:this.renderer.resolution,a=(t.x-r.x)*o+s.x,h=(t.y-r.y)*o+s.y,u=t.width*o,l=t.height*o;n&&(a+=n.tx*o,h+=n.ty*o),e||(h=this.renderer.height-l-h),this.renderer.gl.scissor(a,h,u,l)},e}(jt),zt=function(t){function e(e){t.call(this,e),this.glConst=WebGLRenderingContext.STENCIL_TEST}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,n=t._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,n,this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e}(jt),Xt=function(t){function e(e){t.call(this,e),this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new h.d,this.transform=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var r=this.renderer;r.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,r.globalUniforms.update(),r.shader.shader&&r.shader.syncUniformGroup(r.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,e,i,n){var r=this.projectionMatrix;n?(r.a=1/t.width*2*i,r.d=-1/t.height*2*i,r.tx=-1-e.x*r.a,r.ty=1-e.y*r.d):(r.a=1/t.width*2*i,r.d=1/t.height*2*i,r.tx=-1-e.x*r.a,r.ty=-1-e.y*r.d)},e.prototype.setTransform=function(){},e}(S),Yt=new h.j,Ht=function(t){function e(e){t.call(this,e),this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new h.j,this.destinationFrame=new h.j}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(t,e,i){void 0===t&&(t=null),this.current=t;var n,r=this.renderer;if(t){var s=t.baseTexture;n=s.resolution,i||(Yt.width=s.realWidth,Yt.height=s.realHeight,i=Yt),e||(e=i),this.renderer.framebuffer.bind(s.framebuffer,i),this.renderer.projection.update(i,e,n,!1),this.renderer.mask.setMaskStack(s.maskStack)}else n=this.renderer.resolution,i||(Yt.width=r.width,Yt.height=r.height,i=Yt),e||(e=i),r.framebuffer.bind(null,i),this.renderer.projection.update(i,e,n,!0),this.renderer.mask.setMaskStack(this.defaultMaskStack);this.sourceFrame.copyFrom(e),this.destinationFrame.x=i.x/n,this.destinationFrame.y=i.y/n,this.destinationFrame.width=i.width/n,this.destinationFrame.height=i.height/n,e===i&&this.sourceFrame.copyFrom(this.destinationFrame)},e.prototype.clear=function(t){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3])},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e}(S),Gt=function(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}};Gt.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null};var Vt=0,Wt={textureCount:0},qt=function(t){function e(e){t.call(this,e),this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this.id=Vt++}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof xt)return xt;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");xt=!0===t({a:"b"},"a","b")}catch(t){xt=!1}return xt}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(Wt.textureCount=0,this.syncUniformGroup(t.uniformGroup,Wt)),n},e.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,e){var i=this.getglProgram();t.static&&t.dirtyId===i.uniformGroups[t.id]||(i.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},e.prototype.syncUniforms=function(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)},e.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var i="var v = null;\n    var cv = null\n    var t = 0;\n    var gl = renderer.gl\n    ";for(var n in t.uniforms){var r=e[n];if(r)if("float"===r.type&&1===r.size)i+="\n            if(uv."+n+" !== ud."+n+".value)\n            {\n                ud."+n+".value = uv."+n+"\n                gl.uniform1f(ud."+n+".location, uv."+n+")\n            }\n";else if("sampler2D"!==r.type&&"samplerCube"!==r.type&&"sampler2DArray"!==r.type||1!==r.size||r.isArray)if("mat3"===r.type&&1===r.size)void 0!==t.uniforms[n].a?i+="\n                gl.uniformMatrix3fv(ud."+n+".location, false, uv."+n+".toArray(true));\n                \n":i+="\n                gl.uniformMatrix3fv(ud."+n+".location, false, uv."+n+");\n                \n";else if("vec2"===r.type&&1===r.size)void 0!==t.uniforms[n].x?i+="\n                cv = ud."+n+".value;\n                v = uv."+n+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud."+n+".location, v.x, v.y);\n                }\n":i+="\n                cv = ud."+n+".value;\n                v = uv."+n+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud."+n+".location, v[0], v[1]);\n                }\n                \n";else if("vec4"===r.type&&1===r.size)void 0!==t.uniforms[n].width?i+="\n                cv = ud."+n+".value;\n                v = uv."+n+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud."+n+".location, v.x, v.y, v.width, v.height)\n                }\n":i+="\n                cv = ud."+n+".value;\n                v = uv."+n+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud."+n+".location, v[0], v[1], v[2], v[3])\n                }\n                \n";else{i+="\n            cv = ud."+n+".value;\n            v = uv."+n+";\n            "+(1===r.size?_t:wt)[r.type].replace("location","ud."+n+".location")+";\n"}else i+="\n\n            t = syncData.textureCount++;\n\n            renderer.texture.bind(uv."+n+", t);\n            \n            if(ud."+n+".value !== t)\n            {\n                ud."+n+".value = t;\n                gl.uniform1i(ud."+n+".location, t);\n; // eslint-disable-line max-len\n            }\n";else t.uniforms[n].group&&(i+="\n                    renderer.shader.syncUniformGroup(uv."+n+", syncData);\n                ")}return new Function("ud","uv","renderer","syncData",i)}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(t,e){var i=t.uniforms,n=[];for(var r in i)n.push(r),e[r]&&n.push(e[r].type);return n.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var e=this.gl,i=t.program,n={};for(var r in i.attributeData)n[r]=i.attributeData[r].location;var s=ot(e,i.vertexSrc,i.fragmentSrc,n),o={};for(var a in i.uniformData){var h=i.uniformData[a];o[a]={location:e.getUniformLocation(s,a),value:ht(h.type,h.size)}}var u=new Gt(s,o);return i.glPrograms[this.renderer.CONTEXT_UID]=u,u},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e}(S);var Kt=function(t){function e(e){t.call(this,e),this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=s.b.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.checks=[],this.defaultState=new kt,this.defaultState.blend=!0,this.defaultState.depth=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[s.b.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.ADD]=[t.ONE,t.ONE],e[s.b.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.NONE]=[0,0],e[s.b.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[s.b.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.b.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[s.b.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[s.b.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[s.b.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[s.b.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[s.b.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[s.b.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[s.b.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[s.b.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var i=0;i<this.checks.length;i++)this.checks[i](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(0),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},e.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},e.checkPolygonOffset=function(t,e){t.setPolygonOffset(e.polygonOffset,0)},e}(S),Zt=function(t){function e(e){t.call(this,e),this.count=0,this.checkCount=0,this.maxIdle=o.b.GC_MAX_IDLE,this.checkCountMax=o.b.GC_MAX_CHECK_COUNT,this.mode=o.b.GC_MODE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==s.f.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var r=e[n];!r.framebuffer&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),e[n]=null,i=!0)}if(i){for(var s=0,o=0;o<e.length;o++)null!==e[o]&&(e[s++]=e[o]);e.length=s}},e.prototype.unload=function(t){var e=this.renderer.textureSystem;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},e}(S),Jt=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},Qt=function(t){function e(e){t.call(this,e),this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new m}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new Jt(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Jt(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var s=0;s<this.boundTextures.length;s++)this.bind(null,s)},e.prototype.bind=function(t,e){void 0===e&&(e=0);var i=this.gl;if(t){if((t=t.baseTexture||t).valid){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var n=0;n<i.length;n++)i[n]===this.unknownTexture&&this.bind(null,n)}for(var r=0;r<i.length;r++)i[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[t.target].texture),i[r]=null)},e.prototype.initTexture=function(t){var e=new Jt(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},e.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion){var i=this.renderer.gl;t.type===i.FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA32F),t.type===s.m.HALF_FLOAT&&(e.type=i.HALF_FLOAT),e.type===i.HALF_FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA16F)}},e.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e));else{var n=t.realWidth,r=t.realHeight,s=i.gl;(e.width!==n||e.height!==r||e.dirtyId<0)&&(e.width=n,e.height=r,s.texImage2D(t.target,0,e.internalFormat,n,r,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,e){var i=this.gl;if((t=t.baseTexture||t)._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);-1!==n&&Object(r.removeItems)(this.managedTextures,n,1)}},e.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==s.h.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=0,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=s.n.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===s.k.LINEAR){var r=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,r)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode?i.LINEAR:i.NEAREST)},e}(S),$t=new h.d,te=function(t){function e(i){void 0===i&&(i={}),t.call(this,"WebGL",i),i=this.options,this.type=s.j.WEBGL,this.gl=null,this.CONTEXT_UID=0,this.runners={destroy:new n.a("destroy"),contextChange:new n.a("contextChange",1),reset:new n.a("reset"),update:new n.a("update"),postrender:new n.a("postrender"),prerender:new n.a("prerender"),resize:new n.a("resize",2)},this.globalUniforms=new q({projectionMatrix:new h.d},!0),this.addSystem(Nt,"mask").addSystem(tt,"context").addSystem(Kt,"state").addSystem(qt,"shader").addSystem(Qt,"texture").addSystem(rt,"geometry").addSystem(et,"framebuffer").addSystem(Bt,"scissor").addSystem(zt,"stencil").addSystem(Xt,"projection").addSystem(Zt,"textureGC").addSystem(Z,"filter").addSystem(Ht,"renderTexture").addSystem(Q,"batch"),this.initPlugins(e.__plugins),i.context?this.context.initFromContext(i.context):this.context.initFromOptions({alpha:this.transparent,antialias:i.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,powerPreference:this.options.powerPreference}),this.renderingToScreen=!0,Object(r.sayHello)(2===this.context.webGLVersion?"WebGL 2":"WebGL 1"),this.resize(this.options.width,this.options.height)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t){if(Object(r.isWebGLSupported)())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.addSystem=function(t,e){e||(e=t.name);var i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var n in this[e]=i,this.runners)this.runners[n].add(i);return this},e.prototype.render=function(t,e,i,n,r){if(this.renderingToScreen=!e,this.runners.prerender.run(),this.emit("prerender"),this.projection.transform=n,!this.context.isLost){if(e||(this._lastObjectRendered=t),!r){var s=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=s}this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.run(),this.projection.transform=null,this.emit("postrender")}},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.runners.resize.run(e,i)},e.prototype.reset=function(){return this.runners.reset.run(),this},e.prototype.clear=function(){this.framebuffer.bind(),this.framebuffer.clear()},e.prototype.destroy=function(e){for(var i in this.runners.destroy.run(),this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,e),this.gl=null},e.registerPlugin=function(t,i){e.__plugins=e.__plugins||{},e.__plugins[t]=i},e}(function(t){function e(e,i){t.call(this),(i=Object.assign({},o.b.RENDER_OPTIONS,i)).roundPixels&&(o.b.ROUND_PIXELS=i.roundPixels,Object(r.deprecation)("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),this.options=i,this.type=s.j.UNKNOWN,this.screen=new h.j(0,0,i.width,i.height),this.view=i.view||document.createElement("canvas"),this.resolution=i.resolution||o.b.RESOLUTION,this.transparent=i.transparent,this.autoDensity=i.autoDensity||i.autoResize||!1,this.preserveDrawingBuffer=i.preserveDrawingBuffer,this.clearBeforeRender=i.clearBeforeRender,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,0],this._backgroundColorString="#000000",this.backgroundColor=i.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent=new u.b,this._lastObjectRendered=this._tempDisplayObjectParent,this.plugins={}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={width:{configurable:!0},height:{configurable:!0},backgroundColor:{configurable:!0}};return e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},i.width.get=function(){return this.view.width},i.height.get=function(){return this.view.height},e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,i,n){0===(n=n||t.getLocalBounds()).width&&(n.width=1),0===n.height&&(n.height=1);var r=D.create(0|n.width,0|n.height,e,i);return $t.tx=-n.x,$t.ty=-n.y,this.render(t,r,!1,$t,!!t.parent),r},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=s.j.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoDensity=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},i.backgroundColor.get=function(){return this._backgroundColor},i.backgroundColor.set=function(t){this._backgroundColor=t,this._backgroundColorString=Object(r.hex2string)(t),Object(r.hex2rgb)(t,this._backgroundColorRgba)},Object.defineProperties(e.prototype,i),e}(r.EventEmitter));function ee(t){return te.create(t)}var ie="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",ne="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",re=function(){this.texArray=null,this.blend=0,this.type=s.c.TRIANGLES,this.start=0,this.size=0,this.data=null},se=function(){this.elements=[],this.ids=[],this.count=0};se.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0};var oe=function(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)},ae={int8View:{configurable:!0},uint8View:{configurable:!0},int16View:{configurable:!0},uint16View:{configurable:!0},int32View:{configurable:!0}};ae.int8View.get=function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},ae.uint8View.get=function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},ae.int16View.get=function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},ae.uint16View.get=function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},ae.int32View.get=function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},oe.prototype.view=function(t){return this[t+"View"]},oe.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},oe.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},Object.defineProperties(oe.prototype,ae);var he=function(t){function e(e){t.call(this,e),this.shaderGenerator=null,this.geometryClass=null,this.vertexSize=null,this.state=kt.for2d(),this.size=4*o.b.SPRITE_BATCH_SIZE,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){var t=this.renderer.gl;o.b.PREFER_ENV===s.d.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),o.b.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var n=Et.replace(/%forloop%/gi,Tt(t));if(e.shaderSource(i,n),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,i=e._textureArrayPool,n=this.size/4,r=Math.floor(n/this.MAX_TEXTURES)+1;t.length<n;)t.push(new re);for(;i.length<r;)i.push(new se);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,i=this.MAX_TEXTURES,n=e._textureArrayPool,r=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count,a=++m._globalBatch,h=0,u=n[0],l=0;r.copyBoundTextures(s,i);for(var c=0;c<this._bufferSize;++c){var f=t[c];t[c]=null,f._batchEnabled!==a&&(u.count>=i&&(r.boundArray(u,s,a,i),this.buildDrawCalls(u,l,c),l=c,u=n[++h],++a),f._batchEnabled=a,f.touched=o,u.elements[u.count++]=f)}u.count>0&&(r.boundArray(u,s,a,i),this.buildDrawCalls(u,l,this._bufferSize),++h,++a);for(var d=0;d<s.length;d++)s[d]=null;m._globalBatch=a},e.prototype.buildDrawCalls=function(t,i,n){var s=this._bufferedElements,o=this._attributeBuffer,a=this._indexBuffer,h=this.vertexSize,u=e._drawCallPool,l=this._dcIndex,c=this._aIndex,f=this._iIndex,d=u[l];d.start=this._iIndex,d.texArray=t;for(var p=i;p<n;++p){var g=s[p],v=g._texture.baseTexture,y=r.premultiplyBlendMode[v.alphaMode?1:0][g.blendMode];s[p]=null,i<p&&d.blend!==y&&(d.size=f-d.start,i=p,(d=u[++l]).texArray=t,d.start=f),this.packInterleavedGeometry(g,o,a,c,f),c+=g.vertexData.length/2*h,f+=g.indices.length,d.blend=y}i<n&&(d.size=f-d.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=f},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,i=this._indexBuffer;o.b.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,i=this.renderer,n=i.gl,r=i.state,s=e._drawCallPool,o=null,a=0;a<t;a++){var h=s[a],u=h.texArray,l=h.type,c=h.size,f=h.start,d=h.blend;o!==u&&(o=u,this.bindAndClearTexArray(u)),this.state.blendMode=d,r.set(this.state),n.drawElements(l,c,n.UNSIGNED_SHORT,2*f)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),o.b.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=Object(r.nextPow2)(Math.ceil(t/8)),i=Object(r.log2)(e),n=8*e;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var s=this._aBuffers[n];return s||(this._aBuffers[n]=s=new oe(n*this.vertexSize*4)),s},e.prototype.getIndexBuffer=function(t){var e=Object(r.nextPow2)(Math.ceil(t/12)),i=Object(r.log2)(e),n=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var s=this._iBuffers[i];return s||(this._iBuffers[i]=s=new Uint16Array(n)),s},e.prototype.packInterleavedGeometry=function(t,e,i,n,s){for(var o=e.uint32View,a=e.float32View,h=n/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,f=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),p=d<1&&t._texture.baseTexture.alphaMode?Object(r.premultiplyTint)(t._tintRGB,d):t._tintRGB+(255*d<<24),g=0;g<c.length;g+=2)a[n++]=c[g],a[n++]=c[g+1],a[n++]=u[g],a[n++]=u[g+1],o[n++]=p,a[n++]=f;for(var v=0;v<l.length;v++)i[s++]=h+l[v]},e}(J);he._drawCallPool=[],he._textureArrayPool=[];var ue=function(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')};ue.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=q.from({uSamplers:e},!0);var n=this.fragTemplate;n=(n=n.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new At(this.vertexSrc,n)}var r={tint:new Float32Array([1,1,1,1]),translationMatrix:new h.d,default:this.defaultGroupCache[t]};return new Ct(this.programCache[t],r)},ue.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"};var le=function(t){function e(e){void 0===e&&(e=!1),t.call(this),this._buffer=new N(null,e,!1),this._indexBuffer=new N(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,s.m.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,s.m.FLOAT).addAttribute("aColor",this._buffer,4,!0,s.m.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,s.m.FLOAT).addIndex(this._indexBuffer)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(H),ce="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",fe="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",de=function(){},pe={defaultVertexSrc:{configurable:!0},defaultFragmentTemplate:{configurable:!0}};de.create=function(t){var e=Object.assign({vertex:ce,fragment:fe,geometryClass:le,vertexSize:6},t),i=e.vertex,n=e.fragment,r=e.vertexSize,s=e.geometryClass;return function(t){function e(e){t.call(this,e),this.shaderGenerator=new ue(i,n),this.geometryClass=s,this.vertexSize=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(he)},pe.defaultVertexSrc.get=function(){return ce},pe.defaultFragmentTemplate.get=function(){return fe},Object.defineProperties(de,pe);var ge=de.create()},function(t,e,i){var n=i(15),r=i(26),s=i(37),o=i(33),a=i(44),h=function(t,e,i){var u,l,c,f,d=t&h.F,p=t&h.G,g=t&h.S,v=t&h.P,y=t&h.B,m=p?n:g?n[e]||(n[e]={}):(n[e]||{}).prototype,b=p?r:r[e]||(r[e]={}),_=b.prototype||(b.prototype={});for(u in p&&(i=e),i)c=((l=!d&&m&&void 0!==m[u])?m:i)[u],f=y&&l?a(c,n):v&&"function"==typeof c?a(Function.call,c):c,m&&o(m,u,c,t&h.U),b[u]!=c&&s(b,u,f),v&&_[u]!=c&&(_[u]=c)};n.core=r,h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,t.exports=h},function(t,e,i){"use strict";var n,r=i(13),s=i.n(r),o=i(19);e.a=(n=function(t){var e=arguments.length,i="";if(t)if("string"==typeof t)for(e%2&&(this[e]=null,e-=1);e;)this[arguments[e-2]]=arguments[e-1],e-=2;else for(i in t)t.hasOwnProperty(i)&&(this[i]=t[i])},o.a.add(n,"Data",n,(function(){var t="";for(t in this)this.hasOwnProperty(t)&&delete this[t]}),!0,s.a.dev),n)},function(t,e,i){"use strict";i(433);var n=i(1),r=i(12);r.c.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0});var s=function(t){this._hookDiv=null,(n.isMobile.tablet||n.isMobile.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessibility=!1,window.addEventListener("keydown",this._onKeyDown,!1)};s.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",(function(){t.isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},s.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},s.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},s.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessibility&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},s.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},s.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,r=this.div;r.style.left=t.left+"px",r.style.top=t.top+"px",r.style.width=this.renderer.width+"px",r.style.height=this.renderer.height+"px";for(var s=0;s<this.children.length;s++){var o=this.children[s];if(o.renderId!==this.renderId)o._accessibleActive=!1,Object(n.removeItems)(this.children,s,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,s--,0===this.children.length&&this.deactivate();else{r=o._accessibleDiv;var a=o.hitArea,h=o.worldTransform;o.hitArea?(r.style.left=(h.tx+a.x*h.a)*e+"px",r.style.top=(h.ty+a.y*h.d)*i+"px",r.style.width=a.width*h.a*e+"px",r.style.height=a.height*h.d*i+"px"):(a=o.getBounds(),this.capHitArea(a),r.style.left=a.x*e+"px",r.style.top=a.y*i+"px",r.style.width=a.width*e+"px",r.style.height=a.height*i+"px",r.title!==o.accessibleTitle&&null!==o.accessibleTitle&&(r.title=o.accessibleTitle),r.getAttribute("aria-label")!==o.accessibleHint&&null!==o.accessibleHint&&r.setAttribute("aria-label",o.accessibleHint)),o.accessibleTitle===r.title&&o.tabIndex===r.tabIndex||(r.title=o.accessibleTitle,r.tabIndex=o.tabIndex,this.debug&&this.updateDebugHTML(r))}}this.renderId++}},s.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},s.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},s.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},s.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData),e.dispatchEvent(t.target.displayObject,"pointertap",e.eventData),e.dispatchEvent(t.target.displayObject,"tap",e.eventData)},s.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},s.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},s.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},s.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},s.prototype.destroy=function(){this.destroyTouchHook(),this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null};var o=i(5),a=i(4),h=new a.j,u=function(t){this.renderer=t,t.extract=this};u.prototype.image=function(t,e,i){var n=new Image;return n.src=this.base64(t,e,i),n},u.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},u.prototype.canvas=function(t){var e,i,r,s=this.renderer,a=!1,l=!1;t&&(t instanceof o.l?r=t:(r=this.renderer.generateTexture(t),l=!0)),r?(e=r.baseTexture.resolution,i=r.frame,a=!1,s.renderTexture.bind(r)):(e=this.renderer.resolution,a=!0,(i=h).width=this.renderer.width,i.height=this.renderer.height,s.renderTexture.bind(null));var c=Math.floor(i.width*e+1e-4),f=Math.floor(i.height*e+1e-4),d=new n.CanvasRenderTarget(c,f,1),p=new Uint8Array(4*c*f),g=s.gl;g.readPixels(i.x*e,i.y*e,c,f,g.RGBA,g.UNSIGNED_BYTE,p);var v=d.context.getImageData(0,0,c,f);return u.arrayPostDivide(p,v.data),d.context.putImageData(v,0,0),a&&(d.context.scale(1,-1),d.context.drawImage(d.canvas,0,-f)),l&&r.destroy(!0),d.canvas},u.prototype.pixels=function(t){var e,i,n,r=this.renderer,s=!1;t&&(t instanceof o.l?n=t:(n=this.renderer.generateTexture(t),s=!0)),n?(e=n.baseTexture.resolution,i=n.frame,r.renderTexture.bind(n)):(e=r.resolution,(i=h).width=r.width,i.height=r.height,r.renderTexture.bind(null));var a=i.width*e,l=i.height*e,c=new Uint8Array(4*a*l),f=r.gl;return f.readPixels(i.x*e,i.y*e,a,l,f.RGBA,f.UNSIGNED_BYTE,c),s&&n.destroy(!0),u.arrayPostDivide(c,c),c},u.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},u.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var n=e[i+3]=t[i+3];0!==n?(e[i]=Math.round(Math.min(255*t[i]/n,255)),e[i+1]=Math.round(Math.min(255*t[i+1]/n,255)),e[i+2]=Math.round(Math.min(255*t[i+2]/n,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}};var l=i(14),c=function(){this.global=new a.g,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0},f={pointerId:{configurable:!0}};
/*!
 * @pixi/interaction - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */f.pointerId.get=function(){return this.identifier},c.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},c.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},c.prototype.reset=function(){this.isPrimary=!1},Object.defineProperties(c.prototype,f);var d=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null};d.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},d.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null};var p=function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE},g={pointerId:{configurable:!0},flags:{configurable:!0},none:{configurable:!0},over:{configurable:!0},rightDown:{configurable:!0},leftDown:{configurable:!0}};p.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},g.pointerId.get=function(){return this._pointerId},g.flags.get=function(){return this._flags},g.flags.set=function(t){this._flags=t},g.none.get=function(){return this._flags===this.constructor.FLAGS.NONE},g.over.get=function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},g.over.set=function(t){this._doSet(this.constructor.FLAGS.OVER,t)},g.rightDown.get=function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},g.rightDown.set=function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)},g.leftDown.get=function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},g.leftDown.set=function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)},Object.defineProperties(p.prototype,g),p.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4});var v=function(){this._tempPoint=new a.g};v.prototype.recursiveFindHit=function(t,e,i,n,r){if(!e||!e.visible)return!1;var s=t.data.global,o=!1,a=r=e.interactive||r,h=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(n=!1,h=!1)),a=!1):e._mask&&n&&(e._mask.containsPoint&&e._mask.containsPoint(s)||(n=!1)),h&&e.interactiveChildren&&e.children)for(var u=e.children,l=u.length-1;l>=0;l--){var c=u[l],f=this.recursiveFindHit(t,c,i,n,a);if(f){if(!c.parent)continue;a=!1,f&&(t.target&&(n=!1),o=!0)}}return r&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(o=!0),e.interactive&&(o&&!t.target&&(t.target=e),i&&i(t,e,!!o))),o},v.prototype.findHit=function(t,e,i,n){this.recursiveFindHit(t,e,i,n,!1)};var y={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};r.c.mixin(y);var m={target:null,data:{global:null}},b=function(t){function e(e,i){t.call(this),i=i||{},this.renderer=e,this.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,this.interactionFrequency=i.interactionFrequency||10,this.mouse=new c,this.mouse.identifier=1,this.mouse.global.set(-999999),this.activeInteractionData={},this.activeInteractionData[1]=this.mouse,this.interactionDataPool=[],this.eventData=new d,this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.tickerAdded=!1,this.mouseOverRenderer=!1,this.supportsTouchEvents="ontouchstart"in window,this.supportsPointerEvents=!!window.PointerEvent,this.onPointerUp=this.onPointerUp.bind(this),this.processPointerUp=this.processPointerUp.bind(this),this.onPointerCancel=this.onPointerCancel.bind(this),this.processPointerCancel=this.processPointerCancel.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.processPointerDown=this.processPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.processPointerMove=this.processPointerMove.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.processPointerOverOut=this.processPointerOverOut.bind(this),this.onPointerOver=this.onPointerOver.bind(this),this.cursorStyles={default:"inherit",pointer:"pointer"},this.currentCursorMode=null,this.cursor=null,this.resolution=1,this.delayedEvents=[],this.search=new v,this._useSystemTicker=void 0===i.useSystemTicker||i.useSystemTicker,this.setTargetElement(this.renderer.view,this.renderer.resolution)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={useSystemTicker:{configurable:!0}};return i.useSystemTicker.get=function(){return this._useSystemTicker},i.useSystemTicker.set=function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},e.prototype.hitTest=function(t,e){return m.target=null,m.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(m,e,null,!0),m.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(l.a.system.add(this.tickerUpdate,this,l.c.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(l.a.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){!this.eventsAdded&&this.interactionDOMElement&&(window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.eventsAdded&&this.interactionDOMElement&&(window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this.didMove)this.didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(typeof e){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopPropagationHint&&t!==i.stopsPropagatingAt||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.delayDispatchEvent=function(t,e,i){this.delayedEvents.push({displayObject:t,eventString:e,eventData:i})},e.prototype.mapPositionToPoint=function(t,e,i){var n;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*r,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*r},e.prototype.processInteractive=function(t,e,i,n){var r=this.search.findHit(t,e,i,n),s=this.delayedEvents;if(!s.length)return r;t.stopPropagationHint=!1;var o=s.length;this.delayedEvents=[];for(var a=0;a<o;a++){var h=s[a],u=h.displayObject,l=h.eventString,c=h.eventData;c.stopsPropagatingAt===u&&(c.stopPropagationHint=!0),this.dispatchEvent(u,l,c)}return r},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var i=e.length,n=0;n<i;n++){var r=e[n],s=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,s);if(o.data.originalEvent=t,this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===r.pointerType)this.emit("touchstart",o);else if("mouse"===r.pointerType||"pen"===r.pointerType){var a=2===r.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var n=t.data,r=t.data.identifier;if(i)if(e.trackedPointers[r]||(e.trackedPointers[r]=new p(r)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var s=2===n.button;s?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,s?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var n=this.normalizeToPointerData(t),r=n.length,s=t.target!==this.interactionDOMElement?"outside":"",o=0;o<r;o++){var a=n[o],h=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,h);if(u.data.originalEvent=t,this.processInteractive(u,this.renderer._lastObjectRendered,i,e||!s),this.emit(e?"pointercancel":"pointerup"+s,u),"mouse"===a.pointerType||"pen"===a.pointerType){var l=2===a.button;this.emit(l?"rightup"+s:"mouseup"+s,u)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+s,u),this.releaseInteractionDataForPointerId(a.pointerId,h))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var n=t.data,r=t.data.identifier,s=e.trackedPointers[r],o="touch"===n.pointerType,a="mouse"===n.pointerType||"pen"===n.pointerType,h=!1;if(a){var u=2===n.button,l=p.FLAGS,c=u?l.RIGHT_DOWN:l.LEFT_DOWN,f=void 0!==s&&s.flags&c;i?(this.dispatchEvent(e,u?"rightup":"mouseup",t),f&&(this.dispatchEvent(e,u?"rightclick":"click",t),h=!0)):f&&this.dispatchEvent(e,u?"rightupoutside":"mouseupoutside",t),s&&(u?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),o&&this.dispatchEvent(e,"touchend",t),s&&(a&&!h||this.dispatchEvent(e,"pointertap",t),o&&(this.dispatchEvent(e,"tap",t),s.over=!1))):s&&(this.dispatchEvent(e,"pointerupoutside",t),o&&this.dispatchEvent(e,"touchendoutside",t)),s&&s.none&&delete e.trackedPointers[r]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var i=e.length,n=0;n<i;n++){var r=e[n],s=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,s);o.data.originalEvent=t,this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",o),"touch"===r.pointerType&&this.emit("touchmove",o),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",o)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var n=t.data,r="touch"===n.pointerType,s="mouse"===n.pointerType||"pen"===n.pointerType;s&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),r&&this.dispatchEvent(e,"touchmove",t),s&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var n=t.data,r=t.data.identifier,s="mouse"===n.pointerType||"pen"===n.pointerType,o=e.trackedPointers[r];i&&!o&&(o=e.trackedPointers[r]=new p(r)),void 0!==o&&(i&&this.mouseOverRenderer?(o.over||(o.over=!0,this.delayDispatchEvent(e,"pointerover",t),s&&this.delayDispatchEvent(e,"mouseover",t)),s&&null===this.cursor&&(this.cursor=e.cursor)):o.over&&(o.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),s&&this.dispatchEvent(e,"mouseout",t),o.none&&delete e.trackedPointers[r]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",n)},e.prototype.getInteractionDataForPointerId=function(t){var e,i=t.pointerId;return 1===i||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[i]?e=this.activeInteractionData[i]:((e=this.interactionDataPool.pop()||new c).identifier=i,this.activeInteractionData[i]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,n=t.changedTouches.length;i<n;i++){var r=t.changedTouches[i];void 0===r.button&&(r.button=t.touches.length?1:0),void 0===r.buttons&&(r.buttons=t.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=1),void 0===t.pressure&&(t.pressure=.5),void 0===t.twist&&(t.twist=0),void 0===t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},Object.defineProperties(e.prototype,i),e}(n.EventEmitter),_=i(10),w=i(3),x={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||Number.isNaN(t))return e;var i=Math.ceil(t/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},E=function(){this.reset()};E.prototype.clone=function(){var t=new E;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},E.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=o.p.WHITE,this.matrix=null,this.visible=!1},E.prototype.destroy=function(){this.texture=null,this.matrix=null};var T={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var i=t.points,r=t.holes,s=e.points,o=e.indices;if(i.length>=6){for(var a=[],h=0;h<r.length;h++){var u=r[h];a.push(i.length/2),i=i.concat(u.points)}var l=Object(n.earcut)(i,a,2);if(!l)return;for(var c=s.length/2,f=0;f<l.length;f+=3)o.push(l[f]+c),o.push(l[f+1]+c),o.push(l[f+2]+c);for(var d=0;d<i.length;d++)s.push(i[d])}}},S={build:function(t){var e,i,n=t.shape,r=t.points,s=n.x,o=n.y;if(r.length=0,t.type===a.l.CIRC?(e=n.radius,i=n.radius):(e=n.width,i=n.height),0!==e&&0!==i){var h=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height));h/=2.3;for(var u=2*Math.PI/h,l=0;l<h-.5;l++)r.push(s+Math.sin(-u*l)*e,o+Math.cos(-u*l)*i);r.push(r[0],r[1])}},triangulate:function(t,e){var i=t.points,n=e.points,r=e.indices,s=n.length/2,o=s;n.push(t.shape.x,t.shape.y);for(var a=0;a<i.length;a+=2)n.push(i[a],i[a+1]),r.push(s++,o,s)}},O={build:function(t){var e=t.shape,i=e.x,n=e.y,r=e.width,s=e.height,o=t.points;o.length=0,o.push(i,n,i+r,n,i+r,n+s,i,n+s)},triangulate:function(t,e){var i=t.points,n=e.points,r=n.length/2;n.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),e.indices.push(r,r+1,r+2,r+1,r+2,r+3)}},A={build:function(t){var e=t.shape,i=t.points,n=e.x,r=e.y,s=e.width,o=e.height,a=e.radius;i.length=0,C(n,r+a,n,r,n+a,r,i),C(n+s-a,r,n+s,r,n+s,r+a,i),C(n+s,r+o-a,n+s,r+o,n+s-a,r+o,i),C(n+a,r+o,n,r+o,n,r+o-a,i)},triangulate:function(t,e){for(var i=t.points,r=e.points,s=e.indices,o=r.length/2,a=Object(n.earcut)(i,null,2),h=0,u=a.length;h<u;h+=3)s.push(a[h]+o),s.push(a[h+1]+o),s.push(a[h+2]+o);for(var l=0,c=i.length;l<c;l++)r.push(i[l],i[++l])}};function P(t,e,i){return t+(e-t)*i}function C(t,e,i,n,r,s,o){void 0===o&&(o=[]);for(var a=o,h=0,u=0,l=0,c=0,f=0,d=0,p=0,g=0;p<=20;++p)h=P(t,i,g=p/20),u=P(e,n,g),l=P(i,r,g),c=P(n,s,g),f=P(h,l,g),d=P(u,c,g),a.push(f,d);return a}function M(t,e){t.lineStyle.native?function(t,e){var i=0,n=t.shape,r=t.points||n.points,s=n.type!==a.l.POLY||n.closeStroke;if(0===r.length)return;var o=e.points,h=e.indices,u=r.length/2,l=o.length/2,c=l;for(o.push(r[0],r[1]),i=1;i<u;i++)o.push(r[2*i],r[2*i+1]),h.push(c,c+1),c++;s&&h.push(c,l)}(t,e):function(t,e){var i=t.shape,n=t.points||i.points.slice(),r=e.closePointEps;if(0===n.length)return;var s=t.lineStyle,o=new a.g(n[0],n[1]),h=new a.g(n[n.length-2],n[n.length-1]),u=i.type!==a.l.POLY||i.closeStroke,l=Math.abs(o.x-h.x)<r&&Math.abs(o.y-h.y)<r;if(u){n=n.slice(),l&&(n.pop(),n.pop(),h.set(n[n.length-2],n[n.length-1]));var c=h.x+.5*(o.x-h.x),f=h.y+.5*(o.y-h.y);n.unshift(c,f),n.push(c,f)}var d=e.points,p=n.length/2,g=n.length,v=d.length/2,y=s.width/2,m=n[0],b=n[1],_=n[2],w=n[3],x=0,E=0,T=-(b-w),S=m-_,O=0,A=0,P=0,C=0,M=Math.sqrt(T*T+S*S);T/=M,S/=M,T*=y,S*=y;var k=s.alignment,I=2*(1-k),L=2*k;d.push(m-T*I,b-S*I),d.push(m+T*L,b+S*L);for(var D=1;D<p-1;++D){m=n[2*(D-1)],b=n[2*(D-1)+1],_=n[2*D],w=n[2*D+1],x=n[2*(D+1)],E=n[2*(D+1)+1],T=-(b-w),S=m-_,M=Math.sqrt(T*T+S*S),T/=M,S/=M,T*=y,S*=y,O=-(w-E),A=_-x,M=Math.sqrt(O*O+A*A),O/=M,A/=M;var R=-S+b-(-S+w),U=-T+_-(-T+m),F=(-T+m)*(-S+w)-(-T+_)*(-S+b),N=-(A*=y)+E-(-A+w),j=-(O*=y)+_-(-O+x),B=(-O+x)*(-A+w)-(-O+_)*(-A+E),z=R*j-N*U;if(Math.abs(z)<.1)z+=10.1,d.push(_-T*I,w-S*I),d.push(_+T*L,w+S*L);else{var X=(U*B-j*F)/z,Y=(N*F-R*B)/z;(X-_)*(X-_)+(Y-w)*(Y-w)>196*y*y?(P=T-O,C=S-A,M=Math.sqrt(P*P+C*C),P/=M,C/=M,P*=y,C*=y,d.push(_-P*I,w-C*I),d.push(_+P*L,w+C*L),d.push(_-P*L*I,w-C*I),g++):(d.push(_+(X-_)*I,w+(Y-w)*I),d.push(_-(X-_)*L,w-(Y-w)*L))}}m=n[2*(p-2)],b=n[2*(p-2)+1],_=n[2*(p-1)],w=n[2*(p-1)+1],T=-(b-w),S=m-_,M=Math.sqrt(T*T+S*S),T/=M,S/=M,T*=y,S*=y,d.push(_-T*I,w-S*I),d.push(_+T*L,w+S*L);for(var H=e.indices,G=0;G<g-2;++G)H.push(v,v+1,v+2),v++}(t,e)}var k=function(t){function e(e,i,n,r,s,o){s=s||r/2;for(var h=-1*Math.PI/2+o,u=2*n,l=a.f/u,c=[],f=0;f<u;f++){var d=f%2?s:r,p=f*l+h;c.push(e+d*Math.cos(p),i+d*Math.sin(p))}t.call(this,c)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.h),I=function(){};I.curveTo=function(t,e,i,n,r,s){var o=s[s.length-2],a=s[s.length-1]-e,h=o-t,u=n-e,l=i-t,c=Math.abs(a*l-h*u);if(c<1e-8||0===r)return s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e),null;var f=a*a+h*h,d=u*u+l*l,p=a*u+h*l,g=r*Math.sqrt(f)/c,v=r*Math.sqrt(d)/c,y=g*p/f,m=v*p/d,b=g*l+v*h,_=g*u+v*a,w=h*(v+y),x=a*(v+y),E=l*(g+m),T=u*(g+m);return{cx:b+t,cy:_+e,radius:r,startAngle:Math.atan2(x-_,w-b),endAngle:Math.atan2(T-_,E-b),anticlockwise:h*u>l*a}},I.arc=function(t,e,i,n,r,s,o,h,u){for(var l=o-s,c=x._segmentsCount(Math.abs(l)*r,40*Math.ceil(Math.abs(l)/a.f)),f=l/(2*c),d=2*f,p=Math.cos(f),g=Math.sin(f),v=c-1,y=v%1/v,m=0;m<=v;++m){var b=f+s+d*(m+y*m),_=Math.cos(b),w=-Math.sin(b);u.push((p*_+g*w)*r+i,(p*-w+g*_)*r+n)}};var L=function(){};L.curveLength=function(t,e,i,n,r,s,o,a){for(var h=0,u=0,l=0,c=0,f=0,d=0,p=0,g=0,v=0,y=0,m=0,b=t,_=e,w=1;w<=10;++w)y=b-(g=(p=(d=(f=1-(u=w/10))*f)*f)*t+3*d*u*i+3*f*(l=u*u)*r+(c=l*u)*o),m=_-(v=p*e+3*d*u*n+3*f*l*s+c*a),b=g,_=v,h+=Math.sqrt(y*y+m*m);return h},L.curveTo=function(t,e,i,n,r,s,o){var a=o[o.length-2],h=o[o.length-1];o.length-=2;var u=x._segmentsCount(L.curveLength(a,h,t,e,i,n,r,s)),l=0,c=0,f=0,d=0,p=0;o.push(a,h);for(var g=1,v=0;g<=u;++g)f=(c=(l=1-(v=g/u))*l)*l,p=(d=v*v)*v,o.push(f*a+3*c*v*t+3*l*d*i+p*r,f*h+3*c*v*e+3*l*d*n+p*s)};var D=function(){};D.curveLength=function(t,e,i,n,r,s){var o=t-2*i+r,a=e-2*n+s,h=2*i-2*t,u=2*n-2*e,l=4*(o*o+a*a),c=4*(o*h+a*u),f=h*h+u*u,d=2*Math.sqrt(l+c+f),p=Math.sqrt(l),g=2*l*p,v=2*Math.sqrt(f),y=c/p;return(g*d+p*c*(d-v)+(4*f*l-c*c)*Math.log((2*p+y+d)/(y+v)))/(4*g)},D.curveTo=function(t,e,i,n,r){for(var s=r[r.length-2],o=r[r.length-1],a=x._segmentsCount(D.curveLength(s,o,t,e,i,n)),h=0,u=0,l=1;l<=a;++l){var c=l/a;h=s+(t-s)*c,u=o+(e-o)*c,r.push(h+(t+(i-t)*c-h)*c,u+(e+(n-e)*c-u)*c)}};var R=function(){this.reset()};R.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},R.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},R.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0};var U={};U[a.l.POLY]=T,U[a.l.CIRC]=S,U[a.l.ELIP]=S,U[a.l.RECT]=O,U[a.l.RREC]=A;var F=[],N=[],j=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=n,this.type=t.type,this.points=[],this.holes=[]};j.prototype.clone=function(){return new j(this.shape,this.fillStyle,this.lineStyle,this.matrix)},j.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null};var B=new a.g,z=new r.a,X=function(t){function e(){t.call(this),this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.dirty=0,this.batchDirty=-1,this.cacheDirty=-1,this.clearDirty=0,this.drawCalls=[],this.batches=[],this.shapeIndex=0,this._bounds=new r.a,this.boundsDirty=-1,this.boundsPadding=0,this.batchable=!1,this.indicesUint16=null,this.uvsFloat32=null,this.closePointEps=1e-4}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={bounds:{configurable:!0}};return i.bounds.get=function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].textures.length=0,N.push(this.drawCalls[t]);this.drawCalls.length=0;for(var e=0;e<this.batches.length;e++){var i=this.batches[e];i.reset(),F.push(i)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,i,n){var r=new j(t,e,i,n);return this.graphicsData.push(r),this.dirty++,this},e.prototype.drawHole=function(t,e){if(!this.graphicsData.length)return null;var i=new j(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=n.lineStyle,n.holes.push(i),this.dirty++,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,i=0;i<e.length;++i){var n=e[i];if(n.fillStyle.visible&&(n.shape&&(n.matrix?n.matrix.applyInverse(t,B):B.copyFrom(t),n.shape.contains(B.x,B.y)))){var r=!1;if(n.holes)for(var s=0;s<n.holes.length;s++){if(n.holes[s].shape.contains(B.x,B.y)){r=!0;break}}if(!r)return!0}}return!1},e.prototype.updateBatches=function(){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,e=this.graphicsData,i=null,n=null;this.batches.length>0&&(n=(i=this.batches[this.batches.length-1]).style);for(var r=this.shapeIndex;r<e.length;r++){this.shapeIndex++;var s=e[r],o=s.fillStyle,a=s.lineStyle;U[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix);for(var h=0;h<2;h++){var u=0===h?o:a;if(u.visible){var l=u.texture.baseTexture,c=this.indices.length,f=this.points.length/2;l.wrapMode=w.n.REPEAT,0===h?this.processFill(s):this.processLine(s);var d=this.points.length/2-f;0!==d&&(i&&!this._compareStyles(n,u)&&(i.end(c,f),i=null),i||((i=F.pop()||new R).begin(u,c,f),this.batches.push(i),n=u),this.addUvs(this.points,t,u.texture,f,d,u.matrix))}}}if(i){var p=this.indices.length,g=this.points.length/2;i.end(p,g)}0!==this.batches.length?(this.indicesUint16=new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()):this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var i=this.graphicsData[t],n=i.fillStyle,r=i.lineStyle;if(n&&!n.texture.baseTexture.valid)return!1;if(r&&!r.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,i=t.length;e<i;e++)for(var n=t[e],r=0;r<n.size;r++){var s=n.start+r;this.indicesUint16[s]=this.indicesUint16[s]-n.attribStart}},e.prototype.isBatchable=function(){for(var t=this.batches,i=0;i<t.length;i++)if(t[i].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++o.a._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].textures.length=0,N.push(this.drawCalls[e]);this.drawCalls.length=0;var i=this.colors,n=this.textureIds,r=N.pop();r||((r=new o.b).textures=new o.e),r.textures.count=0,r.start=0,r.size=0,r.type=w.c.TRIANGLES;var s=0,a=null,h=0,u=!1,l=w.c.TRIANGLES,c=0;this.drawCalls.push(r);for(var f=0;f<this.batches.length;f++){var d=this.batches[f],p=d.style,g=p.texture.baseTexture;u!==!!p.native&&(l=(u=!!p.native)?w.c.LINES:w.c.TRIANGLES,a=null,s=8,t++),a!==g&&(a=g,g._batchEnabled!==t&&(8===s&&(t++,s=0,r.size>0&&((r=N.pop())||((r=new o.b).textures=new o.e),this.drawCalls.push(r)),r.start=c,r.size=0,r.textures.count=0,r.type=l),g.touched=1,g._batchEnabled=t,g._batchLocation=s,g.wrapMode=10497,r.textures.elements[r.textures.count++]=g,s++)),r.size+=d.size,c+=d.size,h=g._batchLocation,this.addColors(i,p.color,p.alpha,d.attribSize),this.addTextureIds(n,h,d.attribSize)}o.a._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,i=this.colors,n=this.textureIds,r=new ArrayBuffer(3*t.length*4),s=new Float32Array(r),o=new Uint32Array(r),a=0,h=0;h<t.length/2;h++)s[a++]=t[2*h],s[a++]=t[2*h+1],s[a++]=e[2*h],s[a++]=e[2*h+1],o[a++]=i[h],s[a++]=n[h];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),T.triangulate(t,this)):U[t.type].triangulate(t,this)},e.prototype.processLine=function(t){M(t,this);for(var e=0;e<t.holes.length;e++)M(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var i=t[e];U[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=z,i=a.d.IDENTITY;this._bounds.clear(),e.clear();for(var n=0;n<this.graphicsData.length;n++){var r=this.graphicsData[n],s=r.shape,o=r.type,h=r.lineStyle,u=r.matrix||a.d.IDENTITY,l=0;if(h&&h.visible){var c=h.alignment;l=h.width,o===a.l.POLY?l*=.5+Math.abs(.5-c):l*=Math.max(0,c)}i!==u&&(e.isEmpty()||(t.addBoundsMatrix(e,i),e.clear()),i=u),o===a.l.RECT||o===a.l.RREC?e.addFramePad(s.x,s.y,s.x+s.width,s.y+s.height,l,l):o===a.l.CIRC?e.addFramePad(s.x,s.y,s.x,s.y,s.radius+l,s.radius+l):o===a.l.ELIP?e.addFramePad(s.x,s.y,s.x,s.y,s.width+l,s.height+l):t.addVerticesMatrix(i,s.points,0,s.points.length,l,l)}e.isEmpty()||t.addBoundsMatrix(e,i),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var i=0;i<t.length/2;i++){var n=t[2*i],r=t[2*i+1];t[2*i]=e.a*n+e.c*r+e.tx,t[2*i+1]=e.b*n+e.d*r+e.ty}},e.prototype.addColors=function(t,e,i,r){for(var s=(e>>16)+(65280&e)+((255&e)<<16),o=Object(n.premultiplyTint)(s,i);r-- >0;)t.push(o)},e.prototype.addTextureIds=function(t,e,i){for(;i-- >0;)t.push(e)},e.prototype.addUvs=function(t,e,i,n,r,s){for(var o=0,a=e.length,h=i.frame;o<r;){var u=t[2*(n+o)],l=t[2*(n+o)+1];if(s){var c=s.a*u+s.c*l+s.tx;l=s.b*u+s.d*l+s.ty,u=c}o++,e.push(u/h.width,l/h.height)}var f=i.baseTexture;(h.width<f.width||h.height<f.height)&&this.adjustUvs(e,i,a,r)},e.prototype.adjustUvs=function(t,e,i,n){for(var r=e.baseTexture,s=i+2*n,o=e.frame,a=o.width/r.width,h=o.height/r.height,u=o.x/o.width,l=o.y/o.height,c=Math.floor(t[i]+1e-6),f=Math.floor(t[i+1]+1e-6),d=i+2;d<s;d+=2)c=Math.min(c,Math.floor(t[d]+1e-6)),f=Math.min(f,Math.floor(t[d+1]+1e-6));u-=c,l-=f;for(var p=i;p<s;p+=2)t[p]=(t[p]+u)*a,t[p+1]=(t[p+1]+l)*h},Object.defineProperties(e.prototype,i),e}(o.c);X.BATCHABLE_SIZE=100;var Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.width=0,this.alignment=.5,this.native=!1},e}(E),H=new Float32Array(3),G={},V=function(t){function e(e){void 0===e&&(e=null),t.call(this),this.geometry=e||new X,this.geometry.refCount++,this.shader=null,this.state=o.o.for2d(),this._fillStyle=new E,this._lineStyle=new Y,this._matrix=null,this._holeMode=!1,this.currentPath=null,this.batches=[],this.batchTint=-1,this.vertexData=null,this._transformID=-1,this.batchDirty=-1,this.pluginName="batch",this.tint=16777215,this.blendMode=w.b.NORMAL}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blendMode:{configurable:!0},tint:{configurable:!0},fill:{configurable:!0},line:{configurable:!0}};return e.prototype.clone=function(){return this.finishPoly(),new e(this.geometry)},i.blendMode.set=function(t){this.state.blendMode=t},i.blendMode.get=function(){return this.state.blendMode},i.tint.get=function(){return this._tint},i.tint.set=function(t){this._tint=t},i.fill.get=function(){return this._fillStyle},i.line.get=function(){return this._lineStyle},e.prototype.lineStyle=function(t){if("number"==typeof t){var e=arguments;t={width:e[0]||0,color:e[1]||0,alpha:void 0!==e[2]?e[2]:1,alignment:void 0!==e[3]?e[3]:.5,native:!!e[4]}}return this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){if("number"==typeof t){Object(n.deprecation)("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var e=arguments[0],i=arguments[1],r=arguments[2],s=arguments[3],a=arguments[4],h=arguments[5],u=arguments[6];t={width:e,texture:i,color:r,alpha:s,matrix:a,alignment:h,native:u},Object.keys(t).forEach((function(e){return void 0===t[e]&&delete t[e]}))}t=Object.assign({width:0,texture:o.p.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1},t),this.currentPath&&this.startPoly();var l=t.width>0&&t.alpha>0;return l?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:l},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new a.h,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new a.h,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,n=i[i.length-2],r=i[i.length-1];return n===t&&r===e||i.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,i,n){this._initCurve();var r=this.currentPath.points;return 0===r.length&&this.moveTo(0,0),D.curveTo(t,e,i,n,r),this},e.prototype.bezierCurveTo=function(t,e,i,n,r,s){return this._initCurve(),L.curveTo(t,e,i,n,r,s,this.currentPath.points),this},e.prototype.arcTo=function(t,e,i,n,r){this._initCurve(t,e);var s=this.currentPath.points,o=I.curveTo(t,e,i,n,r,s);if(o){var a=o.cx,h=o.cy,u=o.radius,l=o.startAngle,c=o.endAngle,f=o.anticlockwise;this.arc(a,h,u,l,c,f)}return this},e.prototype.arc=function(t,e,i,n,r,s){if(void 0===s&&(s=!1),n===r)return this;if(!s&&r<=n?r+=a.f:s&&n<=r&&(n+=a.f),0===r-n)return this;var o=t+Math.cos(n)*i,h=e+Math.sin(n)*i,u=this.geometry.closePointEps,l=this.currentPath?this.currentPath.points:null;if(l){var c=Math.abs(l[l.length-2]-o),f=Math.abs(l[l.length-1]-h);c<u&&f<u||l.push(o,h)}else this.moveTo(o,h),l=this.currentPath.points;return I.arc(o,h,t,e,i,n,r,s,l),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:o.p.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){if(t instanceof o.p){Object(n.deprecation)("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var e=arguments[0],i=arguments[1],r=arguments[2],s=arguments[3];t={texture:e,color:i,alpha:r,matrix:s},Object.keys(t).forEach((function(e){return void 0===t[e]&&delete t[e]}))}t=Object.assign({texture:o.p.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var a=t.alpha>0;return a?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:a},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,i,n){return this.drawShape(new a.j(t,e,i,n))},e.prototype.drawRoundedRect=function(t,e,i,n,r){return this.drawShape(new a.k(t,e,i,n,r))},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new a.a(t,e,i))},e.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new a.c(t,e,i,n))},e.prototype.drawPolygon=function(t){var e=arguments,i=t,n=!0;if(i.points&&(n=i.closeStroke,i=i.points),!Array.isArray(i)){i=new Array(arguments.length);for(var r=0;r<i.length;++r)i[r]=e[r]}var s=new a.h(i);return s.closeStroke=n,this.drawShape(s),this},e.prototype.drawShape=function(t){return this._holeMode?this.geometry.drawHole(t,this._matrix):this.geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.drawStar=function(t,e,i,n,r,s){return void 0===s&&(s=0),this.drawPolygon(new k(t,e,i,n,r,s))},e.prototype.clear=function(){return this.geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){return 1===this.geometry.graphicsData.length&&this.geometry.graphicsData[0].shape.type===a.l.RECT&&!this.geometry.graphicsData[0].lineWidth},e.prototype._render=function(t){this.finishPoly();var e=this.geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this.geometry,e=this.blendMode;this.batches=[],this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.vertexData=new Float32Array(t.points);for(var i=0,r=t.batches.length;i<r;i++){var s=t.batches[i],o=s.style.color,a=new Float32Array(this.vertexData.buffer,4*s.attribStart*2,2*s.attribSize),h=new Float32Array(t.uvsFloat32.buffer,4*s.attribStart*2,2*s.attribSize),u={vertexData:a,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*s.start,s.size),uvs:h,_batchRGB:Object(n.hex2rgb)(o),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=u}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,i=this.batches.length;e<i;e++){var n=this.batches[e];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),i=this.geometry,n=this.tint,r=this.worldAlpha,s=e.uniforms,o=i.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(n>>16&255)/255*r,s.tint[1]=(n>>8&255)/255*r,s.tint[2]=(255&n)/255*r,s.tint[3]=r,t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(var a=0,h=o.length;a<h;a++)this._renderDrawCallDirect(t,i.drawCalls[a])},e.prototype._renderDrawCallDirect=function(t,e){for(var i=e.textures,n=e.type,r=e.size,s=e.start,o=i.count,a=0;a<o;a++)t.texture.bind(i.elements[a],a);t.geometry.draw(n,r,s)},e.prototype._resolveDirectShader=function(t){var e=this.shader,i=this.pluginName;if(!e){if(!G[i]){for(var n=new Int32Array(16),r=0;r<16;r++)n[r]=r;var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new a.d,default:o.r.from({uSamplers:n},!0)},h=t.plugins[i]._shader.program;G[i]=new o.n(h,s)}e=G[i]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this.geometry;if(t.graphicsData.length){var e=t.bounds,i=e.minX,n=e.minY,r=e.maxX,s=e.maxY;this._bounds.addFrame(this.transform,i,n,r,s)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this.geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Object(n.hex2rgb)(this.tint,H),e=0;e<this.batches.length;e++){var i=this.batches[e],r=i._batchRGB,s=(t[0]*r[0]*255<<16)+(t[1]*r[1]*255<<8)+(0|t[2]*r[2]*255);i._tintRGB=(s>>16)+(65280&s)+((255&s)<<16)}}},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID;for(var t=this.transform.worldTransform,e=t.a,i=t.b,n=t.c,r=t.d,s=t.tx,o=t.ty,a=this.geometry.points,h=this.vertexData,u=0,l=0;l<a.length;l+=2){var c=a[l],f=a[l+1];h[u++]=e*c+n*f+s,h[u++]=r*f+i*c+o}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this.geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},Object.defineProperties(e.prototype,i),e}(r.b);V._TEMP_POINT=new a.g;
/*!
 * @pixi/sprite - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var W=new a.g,q=new Uint16Array([0,1,2,0,2,3]),K=function(t){function e(e){t.call(this),this._anchor=new a.e(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=w.b.NORMAL,this.shader=null,this._cachedTint=16777215,this.uvs=null,this.texture=e||o.p.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=q,this.size=4,this.start=0,this.pluginName="batch",this.isSprite=!0,this._roundPixels=_.b.ROUND_PIXELS}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={roundPixels:{configurable:!0},width:{configurable:!0},height:{configurable:!0},anchor:{configurable:!0},tint:{configurable:!0},texture:{configurable:!0}};return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Object(n.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Object(n.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,n=e.b,r=e.c,s=e.d,o=e.tx,a=e.ty,h=this.vertexData,u=t.trim,l=t.orig,c=this._anchor,f=0,d=0,p=0,g=0;if(u?(f=(d=u.x-c._x*l.width)+u.width,p=(g=u.y-c._y*l.height)+u.height):(f=(d=-c._x*l.width)+l.width,p=(g=-c._y*l.height)+l.height),h[0]=i*d+r*g+o,h[1]=s*g+n*d+a,h[2]=i*f+r*g+o,h[3]=s*g+n*f+a,h[4]=i*f+r*p+o,h[5]=s*p+n*f+a,h[6]=i*d+r*p+o,h[7]=s*p+n*d+a,this._roundPixels)for(var v=_.b.RESOLUTION,y=0;y<h.length;++y)h[y]=Math.round((h[y]*v|0)/v)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,r=this.transform.worldTransform,s=r.a,o=r.b,a=r.c,h=r.d,u=r.tx,l=r.ty,c=-n._x*i.width,f=c+i.width,d=-n._y*i.height,p=d+i.height;e[0]=s*c+a*d+u,e[1]=h*d+o*c+l,e[2]=s*f+a*d+u,e[3]=h*d+o*f+l,e[4]=s*f+a*p+u,e[5]=h*p+o*f+l,e[6]=s*c+a*p+u,e[7]=h*p+o*c+l},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new a.j),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,W);var e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x,r=0;return W.x>=n&&W.x<n+e&&(r=-i*this.anchor.y,W.y>=r&&W.y<r+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},e.from=function(t,i){return new e(t instanceof o.p?t:o.p.from(t,i))},i.roundPixels.set=function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},i.roundPixels.get=function(){return this._roundPixels},i.width.get=function(){return Math.abs(this.scale.x)*this._texture.orig.width},i.width.set=function(t){var e=Object(n.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},i.height.get=function(){return Math.abs(this.scale.y)*this._texture.orig.height},i.height.set=function(t){var e=Object(n.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},i.anchor.get=function(){return this._anchor},i.anchor.set=function(t){this._anchor.copyFrom(t)},i.tint.get=function(){return this._tint},i.tint.set=function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},i.texture.get=function(){return this._texture},i.texture.set=function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||o.p.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},Object.defineProperties(e.prototype,i),e}(r.b),Z=0,J={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Z,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Q=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],$=function(t){this.styleID=0,this.reset(),nt(this,t,t)},tt={align:{configurable:!0},breakWords:{configurable:!0},dropShadow:{configurable:!0},dropShadowAlpha:{configurable:!0},dropShadowAngle:{configurable:!0},dropShadowBlur:{configurable:!0},dropShadowColor:{configurable:!0},dropShadowDistance:{configurable:!0},fill:{configurable:!0},fillGradientType:{configurable:!0},fillGradientStops:{configurable:!0},fontFamily:{configurable:!0},fontSize:{configurable:!0},fontStyle:{configurable:!0},fontVariant:{configurable:!0},fontWeight:{configurable:!0},letterSpacing:{configurable:!0},lineHeight:{configurable:!0},leading:{configurable:!0},lineJoin:{configurable:!0},miterLimit:{configurable:!0},padding:{configurable:!0},stroke:{configurable:!0},strokeThickness:{configurable:!0},textBaseline:{configurable:!0},trim:{configurable:!0},whiteSpace:{configurable:!0},wordWrap:{configurable:!0},wordWrapWidth:{configurable:!0}};function et(t){return"number"==typeof t?Object(n.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function it(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=et(t[e]);return t}return et(t)}function nt(t,e,i){for(var n in i)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}$.prototype.clone=function(){var t={};return nt(t,this,J),new $(t)},$.prototype.reset=function(){nt(this,J,J)},tt.align.get=function(){return this._align},tt.align.set=function(t){this._align!==t&&(this._align=t,this.styleID++)},tt.breakWords.get=function(){return this._breakWords},tt.breakWords.set=function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},tt.dropShadow.get=function(){return this._dropShadow},tt.dropShadow.set=function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},tt.dropShadowAlpha.get=function(){return this._dropShadowAlpha},tt.dropShadowAlpha.set=function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},tt.dropShadowAngle.get=function(){return this._dropShadowAngle},tt.dropShadowAngle.set=function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},tt.dropShadowBlur.get=function(){return this._dropShadowBlur},tt.dropShadowBlur.set=function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},tt.dropShadowColor.get=function(){return this._dropShadowColor},tt.dropShadowColor.set=function(t){var e=it(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},tt.dropShadowDistance.get=function(){return this._dropShadowDistance},tt.dropShadowDistance.set=function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},tt.fill.get=function(){return this._fill},tt.fill.set=function(t){var e=it(t);this._fill!==e&&(this._fill=e,this.styleID++)},tt.fillGradientType.get=function(){return this._fillGradientType},tt.fillGradientType.set=function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},tt.fillGradientStops.get=function(){return this._fillGradientStops},tt.fillGradientStops.set=function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},tt.fontFamily.get=function(){return this._fontFamily},tt.fontFamily.set=function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},tt.fontSize.get=function(){return this._fontSize},tt.fontSize.set=function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},tt.fontStyle.get=function(){return this._fontStyle},tt.fontStyle.set=function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},tt.fontVariant.get=function(){return this._fontVariant},tt.fontVariant.set=function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},tt.fontWeight.get=function(){return this._fontWeight},tt.fontWeight.set=function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},tt.letterSpacing.get=function(){return this._letterSpacing},tt.letterSpacing.set=function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},tt.lineHeight.get=function(){return this._lineHeight},tt.lineHeight.set=function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},tt.leading.get=function(){return this._leading},tt.leading.set=function(t){this._leading!==t&&(this._leading=t,this.styleID++)},tt.lineJoin.get=function(){return this._lineJoin},tt.lineJoin.set=function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},tt.miterLimit.get=function(){return this._miterLimit},tt.miterLimit.set=function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},tt.padding.get=function(){return this._padding},tt.padding.set=function(t){this._padding!==t&&(this._padding=t,this.styleID++)},tt.stroke.get=function(){return this._stroke},tt.stroke.set=function(t){var e=it(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},tt.strokeThickness.get=function(){return this._strokeThickness},tt.strokeThickness.set=function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},tt.textBaseline.get=function(){return this._textBaseline},tt.textBaseline.set=function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},tt.trim.get=function(){return this._trim},tt.trim.set=function(t){this._trim!==t&&(this._trim=t,this.styleID++)},tt.whiteSpace.get=function(){return this._whiteSpace},tt.whiteSpace.set=function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},tt.wordWrap.get=function(){return this._wordWrap},tt.wordWrap.set=function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},tt.wordWrapWidth.get=function(){return this._wordWrapWidth},tt.wordWrapWidth.set=function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},$.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&Q.indexOf(n)<0&&(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},Object.defineProperties($.prototype,tt);var rt=function(t,e,i,n,r,s,o,a,h){this.text=t,this.style=e,this.width=i,this.height=n,this.lines=r,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=h};rt.measureText=function(t,e,i,n){void 0===n&&(n=rt._canvas),i=null==i?e.wordWrap:i;var r=e.toFontString(),s=rt.measureFont(r);0===s.fontSize&&(s.fontSize=e.fontSize,s.ascent=e.fontSize);var o=n.getContext("2d");o.font=r;for(var a=(i?rt.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),h=new Array(a.length),u=0,l=0;l<a.length;l++){var c=o.measureText(a[l]).width+(a[l].length-1)*e.letterSpacing;h[l]=c,u=Math.max(u,c)}var f=u+e.strokeThickness;e.dropShadow&&(f+=e.dropShadowDistance);var d=e.lineHeight||s.fontSize+e.strokeThickness,p=Math.max(d,s.fontSize+e.strokeThickness)+(a.length-1)*(d+e.leading);return e.dropShadow&&(p+=e.dropShadowDistance),new rt(t,e,f,p,a,h,d+e.leading,u,s)},rt.wordWrap=function(t,e,i){void 0===i&&(i=rt._canvas);for(var n=i.getContext("2d"),r=0,s="",o="",a={},h=e.letterSpacing,u=e.whiteSpace,l=rt.collapseSpaces(u),c=rt.collapseNewlines(u),f=!l,d=e.wordWrapWidth+h,p=rt.tokenize(t),g=0;g<p.length;g++){var v=p[g];if(rt.isNewline(v)){if(!c){o+=rt.addLine(s),f=!l,s="",r=0;continue}v=" "}if(l){var y=rt.isBreakingSpace(v),m=rt.isBreakingSpace(s[s.length-1]);if(y&&m)continue}var b=rt.getFromCache(v,h,a,n);if(b>d)if(""!==s&&(o+=rt.addLine(s),s="",r=0),rt.canBreakWords(v,e.breakWords))for(var _=rt.wordWrapSplit(v),w=0;w<_.length;w++){for(var x=_[w],E=1;_[w+E];){var T=_[w+E],S=x[x.length-1];if(rt.canBreakChars(S,T,v,w,e.breakWords))break;x+=T,E++}w+=x.length-1;var O=rt.getFromCache(x,h,a,n);O+r>d&&(o+=rt.addLine(s),f=!1,s="",r=0),s+=x,r+=O}else{s.length>0&&(o+=rt.addLine(s),s="",r=0);var A=g===p.length-1;o+=rt.addLine(v,!A),f=!1,s="",r=0}else b+r>d&&(f=!1,o+=rt.addLine(s),s="",r=0),(s.length>0||!rt.isBreakingSpace(v)||f)&&(s+=v,r+=b)}return o+=rt.addLine(s,!1)},rt.addLine=function(t,e){return void 0===e&&(e=!0),t=rt.trimRight(t),t=e?t+"\n":t},rt.getFromCache=function(t,e,i,n){var r=i[t];if(void 0===r){var s=t.length*e;r=n.measureText(t).width+s,i[t]=r}return r},rt.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},rt.collapseNewlines=function(t){return"normal"===t},rt.trimRight=function(t){if("string"!=typeof t)return"";for(var e=t.length-1;e>=0;e--){var i=t[e];if(!rt.isBreakingSpace(i))break;t=t.slice(0,-1)}return t},rt.isNewline=function(t){return"string"==typeof t&&rt._newlines.indexOf(t.charCodeAt(0))>=0},rt.isBreakingSpace=function(t){return"string"==typeof t&&rt._breakingSpaces.indexOf(t.charCodeAt(0))>=0},rt.tokenize=function(t){var e=[],i="";if("string"!=typeof t)return e;for(var n=0;n<t.length;n++){var r=t[n];rt.isBreakingSpace(r)||rt.isNewline(r)?(""!==i&&(e.push(i),i=""),e.push(r)):i+=r}return""!==i&&e.push(i),e},rt.canBreakWords=function(t,e){return e},rt.canBreakChars=function(t,e,i,n,r){return!0},rt.wordWrapSplit=function(t){return t.split("")},rt.measureFont=function(t){if(rt._fonts[t])return rt._fonts[t];var e={},i=rt._canvas,n=rt._context;n.font=t;var r=rt.METRICS_STRING+rt.BASELINE_SYMBOL,s=Math.ceil(n.measureText(r).width),o=Math.ceil(n.measureText(rt.BASELINE_SYMBOL).width),a=2*o;o=o*rt.BASELINE_MULTIPLIER|0,i.width=s,i.height=a,n.fillStyle="#f00",n.fillRect(0,0,s,a),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(r,0,o);var h=n.getImageData(0,0,s,a).data,u=h.length,l=4*s,c=0,f=0,d=!1;for(c=0;c<o;++c){for(var p=0;p<l;p+=4)if(255!==h[f+p]){d=!0;break}if(d)break;f+=l}for(e.ascent=o-c,f=u-l,d=!1,c=a;c>o;--c){for(var g=0;g<l;g+=4)if(255!==h[f+g]){d=!0;break}if(d)break;f-=l}return e.descent=c-o,e.fontSize=e.ascent+e.descent,rt._fonts[t]=e,e},rt.clearMetrics=function(t){void 0===t&&(t=""),t?delete rt._fonts[t]:rt._fonts={}};var st=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();st.width=st.height=10,rt._canvas=st,rt._context=st.getContext("2d"),rt._fonts={},rt.METRICS_STRING="|ÉqÅ",rt.BASELINE_SYMBOL="M",rt.BASELINE_MULTIPLIER=1.4,rt._newlines=[10,13],rt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var ot={texture:!0,children:!1,baseTexture:!0},at=function(t){function e(e,i,n){(n=n||document.createElement("canvas")).width=3,n.height=3;var r=o.p.from(n);r.orig=new a.j,r.trim=new a.j,t.call(this,r),this.canvas=n,this.context=this.canvas.getContext("2d"),this._resolution=_.b.RESOLUTION,this._autoResolution=!0,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=i,this.localStyleID=-1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={width:{configurable:!0},height:{configurable:!0},style:{configurable:!0},text:{configurable:!0},resolution:{configurable:!0}};return e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i,r,s=this.context,o=rt.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=o.width,h=o.height,u=o.lines,l=o.lineHeight,c=o.lineWidths,f=o.maxLineWidth,d=o.fontProperties;this.canvas.width=Math.ceil((Math.max(1,a)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,h)+2*e.padding)*this._resolution),s.scale(this._resolution,this._resolution),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.font=this._font,s.lineWidth=e.strokeThickness,s.textBaseline=e.textBaseline,s.lineJoin=e.lineJoin,s.miterLimit=e.miterLimit;for(var p=e.dropShadow?2:1,g=0;g<p;++g){var v=e.dropShadow&&0===g,y=v?2*h:0,m=y*this.resolution;if(v){s.fillStyle="black",s.strokeStyle="black";var b=e.dropShadowColor,_=Object(n.hex2rgb)("number"==typeof b?b:Object(n.string2hex)(b));s.shadowColor="rgba("+255*_[0]+","+255*_[1]+","+255*_[2]+","+e.dropShadowAlpha+")",s.shadowBlur=e.dropShadowBlur,s.shadowOffsetX=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,s.shadowOffsetY=Math.sin(e.dropShadowAngle)*e.dropShadowDistance+m}else s.fillStyle=this._generateFillStyle(e,u),s.strokeStyle=e.stroke,s.shadowColor=0,s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0;for(var w=0;w<u.length;w++)i=e.strokeThickness/2,r=e.strokeThickness/2+w*l+d.ascent,"right"===e.align?i+=f-c[w]:"center"===e.align&&(i+=(f-c[w])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(u[w],i+e.padding,r+e.padding-y,!0),e.fill&&this.drawLetterSpacing(u[w],i+e.padding,r+e.padding-y)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i,n){void 0===n&&(n=!1);var r=this._style.letterSpacing;if(0!==r)for(var s=e,o=Array.from?Array.from(t):t.split(""),a=this.context.measureText(t).width,h=0,u=0;u<o.length;++u){var l=o[u];n?this.context.strokeText(l,s,i):this.context.fillText(l,s,i),s+=a-(h=this.context.measureText(t.substring(u+1)).width)+r,a=h}else n?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=Object(n.trimCanvas)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,r=this._style,s=r.trim?0:r.padding,o=i.baseTexture;i.trim.width=i._frame.width=Math.ceil(t.width/this._resolution),i.trim.height=i._frame.height=Math.ceil(t.height/this._resolution),i.trim.x=-s,i.trim.y=-s,i.orig.width=i._frame.width-2*s,i.orig.height=i._frame.height-2*s,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(1===t.fill.length)return t.fill[0];var i,n,r,s,o=t.dropShadow?t.dropShadowDistance:0,a=Math.ceil(this.canvas.width/this._resolution)-o,h=Math.ceil(this.canvas.height/this._resolution)-o,u=t.fill.slice(),l=t.fillGradientStops.slice();if(!l.length)for(var c=u.length+1,f=1;f<c;++f)l.push(f/c);if(u.unshift(t.fill[0]),l.unshift(0),u.push(t.fill[t.fill.length-1]),l.push(1),t.fillGradientType===Z){i=this.context.createLinearGradient(a/2,0,a/2,h),n=(u.length+1)*e.length,r=0;for(var d=0;d<e.length;d++){r+=1;for(var p=0;p<u.length;p++)s="number"==typeof l[p]?l[p]/e.length+d/e.length:r/n,i.addColorStop(s,u[p]),r++}}else{i=this.context.createLinearGradient(0,h/2,a,h/2),n=u.length+1,r=1;for(var g=0;g<u.length;g++)s="number"==typeof l[g]?l[g]:r/n,i.addColorStop(s,u[g]),r++}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},ot,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},i.width.get=function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},i.width.set=function(t){this.updateText(!0);var e=Object(n.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},i.height.get=function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},i.height.set=function(t){this.updateText(!0);var e=Object(n.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},i.style.get=function(){return this._style},i.style.set=function(t){t=t||{},this._style=t instanceof $?t:new $(t),this.localStyleID=-1,this.dirty=!0},i.text.get=function(){return this._text},i.text.set=function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},i.resolution.get=function(){return this._resolution},i.resolution.set=function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},Object.defineProperties(e.prototype,i),e}(K);
/*!
 * @pixi/prepare - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
_.b.UPLOADS_PER_FRAME=4;var ht=function(t){this.maxItemsPerFrame=t,this.itemsLeft=0};ht.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},ht.prototype.allowedToUpload=function(){return this.itemsLeft-- >0};var ut=function(t){var e=this;this.limiter=new ht(_.b.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(gt),this.registerFindHook(vt),this.registerFindHook(lt),this.registerFindHook(ct),this.registerFindHook(ft),this.registerUploadHook(dt),this.registerUploadHook(pt)};function lt(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof o.p){var r=t._textures[n].baseTexture;-1===e.indexOf(r)&&(e.push(r),i=!0)}return i}function ct(t,e){if(t.baseTexture instanceof o.a){var i=t.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function ft(t,e){if(t._texture&&t._texture instanceof o.p){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function dt(t,e){return e instanceof at&&(e.updateText(!0),!0)}function pt(t,e){if(e instanceof $){var i=e.toFontString();return rt.measureFont(i),!0}return!1}function gt(t,e){if(t instanceof at){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function vt(t,e){return t instanceof $&&(-1===e.indexOf(t)&&e.push(t),!0)}ut.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,l.a.system.addOnce(this.tick,this,l.c.UTILITY))):e&&e()},ut.prototype.tick=function(){setTimeout(this.delayedTick,0)},ut.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)l.a.system.addOnce(this.tick,this,l.c.UTILITY);else{this.ticking=!1;var r=this.completes.slice(0);this.completes.length=0;for(var s=0,o=r.length;s<o;s++)r[s]()}},ut.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},ut.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},ut.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof r.b)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},ut.prototype.destroy=function(){this.ticking&&l.a.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null};var yt=function(t){function e(e){t.call(this,e),this.uploadHookHelper=this.renderer,this.registerFindHook(_t),this.registerUploadHook(mt),this.registerUploadHook(bt)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ut);function mt(t,e){return e instanceof o.a&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function bt(t,e){if(!(e instanceof V))return!1;var i=e.geometry;e.finishPoly(),i.updateBatches();for(var n=i.batches,r=0;r<n.length;r++){var s=n[r].style.texture;s&&mt(t,s.baseTexture)}return i.batchable||t.geometry.bind(i,e._resolveDirectShader()),!0}function _t(t,e){return t instanceof V&&(e.push(t),!0)}var wt=function(t){this.maxMilliseconds=t,this.frameStart=0};wt.prototype.beginFrame=function(){this.frameStart=Date.now()},wt.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds};
/*!
 * @pixi/app - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var xt=function t(e){var i=this;e=Object.assign({forceCanvas:!1},e),this.renderer=Object(o.s)(e),this.stage=new r.b,t._plugins.forEach((function(t){t.init.call(i,e)}))},Et={view:{configurable:!0},screen:{configurable:!0}};xt.registerPlugin=function(t){xt._plugins.push(t)},xt.prototype.render=function(){this.renderer.render(this.stage)},Et.view.get=function(){return this.renderer.view},Et.screen.get=function(){return this.renderer.screen},xt.prototype.destroy=function(t,e){var i=this,n=xt._plugins.slice(0);n.reverse(),n.forEach((function(t){t.destroy.call(i)})),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},Object.defineProperties(xt.prototype,Et),xt._plugins=[];var Tt=function(){};Tt.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){window.removeEventListener("resize",this.resize),this._resizeTo=t,t&&(window.addEventListener("resize",this.resize),this.resize())},get:function(){return this._resizeTo}}),this.resize=function(){e._resizeTo&&(e._resizeTo===window?e.renderer.resize(window.innerWidth,window.innerHeight):e.renderer.resize(e._resizeTo.clientWidth,e._resizeTo.clientHeight))},this._resizeTo=null,this.resizeTo=t.resizeTo||null},Tt.destroy=function(){this.resizeTo=null,this.resize=null},xt.registerPlugin(Tt);var St=i(24),Ot=(r.b,function(t,e,i){this.geometry=new o.h,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;++n){var r=t[n];r={attributeName:r.attributeName,size:r.size,uploadFunction:r.uploadFunction,type:r.type||w.m.FLOAT,offset:r.offset},e[n]?this.dynamicProperties.push(r):this.staticProperties.push(r)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()});
/*!
 * @pixi/particles - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ot.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new o.f(Object(n.createIndicesForQuads)(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var r=this.dynamicProperties[i];r.offset=e,e+=r.size,this.dynamicStride+=r.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new o.f(this.dynamicData,!1,!1);var a=0;this.staticStride=0;for(var h=0;h<this.staticProperties.length;++h){var u=this.staticProperties[h];u.offset=a,a+=u.size,this.staticStride+=u.size}var l=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(l),this.staticDataUint32=new Uint32Array(l),this.staticBuffer=new o.f(this.staticData,!0,!1);for(var c=0;c<this.dynamicProperties.length;++c){var f=this.dynamicProperties[c];t.addAttribute(f.attributeName,this.dynamicBuffer,0,f.type===w.m.UNSIGNED_BYTE,f.type,4*this.dynamicStride,4*f.offset)}for(var d=0;d<this.staticProperties.length;++d){var p=this.staticProperties[d];t.addAttribute(p.attributeName,this.staticBuffer,0,p.type===w.m.UNSIGNED_BYTE,p.type,4*this.staticStride,4*p.offset)}},Ot.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var r=this.dynamicProperties[n];r.uploadFunction(t,e,i,r.type===w.m.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer._updateID++},Ot.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var r=this.staticProperties[n];r.uploadFunction(t,e,i,r.type===w.m.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer._updateID++},Ot.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()};var At=function(t){function e(e){t.call(this,e),this.shader=null,this.properties=null,this.tempMatrix=new a.d,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:w.m.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=o.n.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=o.o.for2d()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(t){var e=t.children,i=t._maxSize,r=t._batchSize,s=this.renderer,o=e.length;if(0!==o){o>i&&!t.autoResize&&(o=i);var a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));var h=e[0]._texture.baseTexture;this.state.blendMode=Object(n.correctBlendMode)(t.blendMode,h.alphaMode),s.state.set(this.state);var u=s.gl,l=t.worldTransform.copyTo(this.tempMatrix);l.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=l.toArray(!0),this.shader.uniforms.uColor=Object(n.premultiplyRgba)(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h.alphaMode),this.shader.uniforms.uSampler=h,this.renderer.shader.bind(this.shader);for(var c=!1,f=0,d=0;f<o;f+=r,d+=1){var p=o-f;p>r&&(p=r),d>=a.length&&a.push(this._generateOneMoreBuffer(t));var g=a[d];g.uploadDynamic(e,f,p);var v=t._bufferUpdateIDs[d]||0;(c=c||g._updateID<v)&&(g._updateID=t._updateID,g.uploadStatic(e,f,p)),s.geometry.bind(g.geometry),u.drawElements(u.TRIANGLES,6*p,u.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,n=t._batchSize,r=t._properties,s=0;s<i;s+=n)e.push(new Ot(this.properties,r,n));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,i=t._properties;return new Ot(this.properties,i,e)},e.prototype.uploadVertices=function(t,e,i,n,r,s){for(var o=0,a=0,h=0,u=0,l=0;l<i;++l){var c=t[e+l],f=c._texture,d=c.scale.x,p=c.scale.y,g=f.trim,v=f.orig;g?(o=(a=g.x-c.anchor.x*v.width)+g.width,h=(u=g.y-c.anchor.y*v.height)+g.height):(o=v.width*(1-c.anchor.x),a=v.width*-c.anchor.x,h=v.height*(1-c.anchor.y),u=v.height*-c.anchor.y),n[s]=a*d,n[s+1]=u*p,n[s+r]=o*d,n[s+r+1]=u*p,n[s+2*r]=o*d,n[s+2*r+1]=h*p,n[s+3*r]=a*d,n[s+3*r+1]=h*p,s+=4*r}},e.prototype.uploadPosition=function(t,e,i,n,r,s){for(var o=0;o<i;o++){var a=t[e+o].position;n[s]=a.x,n[s+1]=a.y,n[s+r]=a.x,n[s+r+1]=a.y,n[s+2*r]=a.x,n[s+2*r+1]=a.y,n[s+3*r]=a.x,n[s+3*r+1]=a.y,s+=4*r}},e.prototype.uploadRotation=function(t,e,i,n,r,s){for(var o=0;o<i;o++){var a=t[e+o].rotation;n[s]=a,n[s+r]=a,n[s+2*r]=a,n[s+3*r]=a,s+=4*r}},e.prototype.uploadUvs=function(t,e,i,n,r,s){for(var o=0;o<i;++o){var a=t[e+o]._texture._uvs;a?(n[s]=a.x0,n[s+1]=a.y0,n[s+r]=a.x1,n[s+r+1]=a.y1,n[s+2*r]=a.x2,n[s+2*r+1]=a.y2,n[s+3*r]=a.x3,n[s+3*r+1]=a.y3,s+=4*r):(n[s]=0,n[s+1]=0,n[s+r]=0,n[s+r+1]=0,n[s+2*r]=0,n[s+2*r+1]=0,n[s+3*r]=0,n[s+3*r+1]=0,s+=4*r)}},e.prototype.uploadTint=function(t,e,i,r,s,o){for(var a=0;a<i;++a){var h=t[e+a],u=h._texture.baseTexture.alphaMode>0,l=h.alpha,c=l<1&&u?Object(n.premultiplyTint)(h._tintRGB,l):h._tintRGB+(255*l<<24);r[o]=c,r[o+s]=c,r[o+2*s]=c,r[o+3*s]=c,o+=4*s}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(o.i),Pt=function(t,e,i){void 0===i&&(i=null),this.baseTexture=t,this.textures={},this.animations={},this.data=e,this.resolution=this._updateResolution(i||(this.baseTexture.resource?this.baseTexture.resource.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null},Ct={BATCH_SIZE:{configurable:!0}};Ct.BATCH_SIZE.get=function(){return 1e3},Pt.prototype._updateResolution=function(t){var e=this.data.meta.scale,i=Object(n.getResolutionOfUrl)(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&this.baseTexture.setResolution(i),i},Pt.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=Pt.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},Pt.prototype._processFrames=function(t){for(var e=t,i=Pt.BATCH_SIZE;e-t<i&&e<this._frameKeys.length;){var n=this._frameKeys[e],r=this._frames[n],s=r.frame;if(s){var h=null,u=null,l=!1!==r.trimmed&&r.sourceSize?r.sourceSize:r.frame,c=new a.j(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);h=r.rotated?new a.j(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new a.j(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==r.trimmed&&r.spriteSourceSize&&(u=new a.j(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[n]=new o.p(this.baseTexture,h,c,u,r.rotated?2:0,r.anchor),o.p.addToCache(this.textures[n],n)}e++}},Pt.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=0;i<t[e].length;i++){var n=t[e][i];this.animations[e].push(this.textures[n])}}},Pt.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},Pt.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*Pt.BATCH_SIZE),this._batchIndex++,setTimeout((function(){t._batchIndex*Pt.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())}),0)},Pt.prototype.destroy=function(t){for(var e in void 0===t&&(t=!1),this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},Object.defineProperties(Pt,Ct);var Mt=function(){};Mt.use=function(t,e){var i=t.name+"_image";if(t.data&&t.type===St.c.TYPE.JSON&&t.data.frames&&!this.resources[i]){var n={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},r=Mt.getResourcePath(t,this.baseUrl);this.add(i,r,n,(function(i){if(i.error)e(i.error);else{var n=new Pt(i.texture.baseTexture,t.data,t.url);n.parse((function(){t.spritesheet=n,t.textures=n.textures,e()}))}}))}else e()},Mt.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:n.url.resolve(t.url.replace(e,""),t.data.meta.image)};
/*!
 * @pixi/sprite-tiling - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
new a.g;var kt="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",It=new a.d,Lt=function(t){function e(e){t.call(this,e);var i={globals:this.renderer.globalUniforms};this.shader=o.n.from(kt,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord - floor(vTextureCoord - uClampOffset);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",i),this.simpleShader=o.n.from(kt,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",i),this.quad=new o.k,this.state=o.o.for2d()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(t){var e=this.renderer,i=this.quad,r=i.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((r=i.uvs)[0]=r[6]=-t.anchor.x,r[1]=r[3]=-t.anchor.y,r[2]=r[4]=1-t.anchor.x,r[5]=r[7]=1-t.anchor.y),i.invalidate();var s=t._texture,o=s.baseTexture,a=t.tileTransform.localTransform,h=t.uvMatrix,u=o.isPowerOfTwo&&s.frame.width===o.width&&s.frame.height===o.height;u&&(o._glTextures[e.CONTEXT_UID]?u=o.wrapMode!==w.n.CLAMP:o.wrapMode===w.n.CLAMP&&(o.wrapMode=w.n.REPEAT));var l=u?this.simpleShader:this.shader,c=s.width,f=s.height,d=t._width,p=t._height;It.set(a.a*c/d,a.b*c/p,a.c*f/d,a.d*f/p,a.tx/d,a.ty/p),It.invert(),u?It.prepend(h.mapCoord):(l.uniforms.uMapCoord=h.mapCoord.toArray(!0),l.uniforms.uClampFrame=h.uClampFrame,l.uniforms.uClampOffset=h.uClampOffset),l.uniforms.uTransform=It.toArray(!0),l.uniforms.uColor=Object(n.premultiplyTintToRgba)(t.tint,t.worldAlpha,l.uniforms.uColor,o.alphaMode),l.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),l.uniforms.uSampler=s,e.shader.bind(l),e.geometry.bind(i),this.state.blendMode=Object(n.correctBlendMode)(t.blendMode,o.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(o.i),Dt=function(t){function e(e,i){var n=this;void 0===i&&(i={}),t.call(this),this._textWidth=0,this._textHeight=0,this._glyphs=[],this._font={tint:void 0!==i.tint?i.tint:16777215,align:i.align||"left",name:null,size:0},this.font=i.font,this._text=e,this._maxWidth=0,this._maxLineHeight=0,this._letterSpacing=0,this._anchor=new a.e((function(){n.dirty=!0}),this,0,0),this.dirty=!1,this.roundPixels=_.b.ROUND_PIXELS,this.updateText()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={tint:{configurable:!0},align:{configurable:!0},anchor:{configurable:!0},font:{configurable:!0},text:{configurable:!0},maxWidth:{configurable:!0},maxLineHeight:{configurable:!0},textWidth:{configurable:!0},letterSpacing:{configurable:!0},textHeight:{configurable:!0}};return e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],i=this._font.size/t.size,r=new a.g,s=[],o=[],h=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",u=h.length,l=this._maxWidth*t.size/this._font.size,c=null,f=0,d=0,p=0,g=-1,v=0,y=0,m=0,b=0;b<u;b++){var _=h.charCodeAt(b),w=h.charAt(b);if(/(?:\s)/.test(w)&&(g=b,v=f),"\r"!==w&&"\n"!==w){var x=t.chars[_];x&&(c&&x.kerning[c]&&(r.x+=x.kerning[c]),s.push({texture:x.texture,line:p,charCode:_,position:new a.g(r.x+x.xOffset+this._letterSpacing/2,r.y+x.yOffset)}),r.x+=x.xAdvance+this._letterSpacing,f=r.x,m=Math.max(m,x.yOffset+x.texture.height),c=_,-1!==g&&l>0&&r.x>l&&(++y,Object(n.removeItems)(s,1+g-y,1+b-g),b=g,g=-1,o.push(v),d=Math.max(d,v),p++,r.x=0,r.y+=t.lineHeight,c=null))}else o.push(f),d=Math.max(d,f),++p,++y,r.x=0,r.y+=t.lineHeight,c=null}var E=h.charAt(h.length-1);"\r"!==E&&"\n"!==E&&(/(?:\s)/.test(E)&&(f=v),o.push(f),d=Math.max(d,f));for(var T=[],S=0;S<=p;S++){var O=0;"right"===this._font.align?O=d-o[S]:"center"===this._font.align&&(O=(d-o[S])/2),T.push(O)}for(var A=s.length,P=this.tint,C=0;C<A;C++){var M=this._glyphs[C];M?M.texture=s[C].texture:((M=new K(s[C].texture)).roundPixels=this.roundPixels,this._glyphs.push(M)),M.position.x=(s[C].position.x+T[s[C].line])*i,M.position.y=s[C].position.y*i,M.scale.x=M.scale.y=i,M.tint=P,M.parent||this.addChild(M)}for(var k=A;k<this._glyphs.length;++k)this.removeChild(this._glyphs[k]);if(this._textWidth=d*i,this._textHeight=(r.y+t.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var I=0;I<A;I++)this._glyphs[I].x-=this._textWidth*this.anchor.x,this._glyphs[I].y-=this._textHeight*this.anchor.y;this._maxLineHeight=m*i},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},i.tint.get=function(){return this._font.tint},i.tint.set=function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0},i.align.get=function(){return this._font.align},i.align.set=function(t){this._font.align=t||"left",this.dirty=!0},i.anchor.get=function(){return this._anchor},i.anchor.set=function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},i.font.get=function(){return this._font},i.font.set=function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)},i.text.get=function(){return this._text},i.text.set=function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},i.maxWidth.get=function(){return this._maxWidth},i.maxWidth.set=function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},i.maxLineHeight.get=function(){return this.validate(),this._maxLineHeight},i.textWidth.get=function(){return this.validate(),this._textWidth},i.letterSpacing.get=function(){return this._letterSpacing},i.letterSpacing.set=function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},i.textHeight.get=function(){return this.validate(),this._textHeight},e.registerFont=function(t,i){var r={},s=t.getElementsByTagName("info")[0],h=t.getElementsByTagName("common")[0],u=t.getElementsByTagName("page"),l=Object(n.getResolutionOfUrl)(u[0].getAttribute("file"),_.b.RESOLUTION),c={};r.font=s.getAttribute("face"),r.size=parseInt(s.getAttribute("size"),10),r.lineHeight=parseInt(h.getAttribute("lineHeight"),10)/l,r.chars={},i instanceof o.p&&(i=[i]);for(var f=0;f<u.length;f++){var d=u[f].getAttribute("id"),p=u[f].getAttribute("file");c[d]=i instanceof Array?i[f]:i[p]}for(var g=t.getElementsByTagName("char"),v=0;v<g.length;v++){var y=g[v],m=parseInt(y.getAttribute("id"),10),b=y.getAttribute("page")||0,w=new a.j(parseInt(y.getAttribute("x"),10)/l+c[b].frame.x/l,parseInt(y.getAttribute("y"),10)/l+c[b].frame.y/l,parseInt(y.getAttribute("width"),10)/l,parseInt(y.getAttribute("height"),10)/l);r.chars[m]={xOffset:parseInt(y.getAttribute("xoffset"),10)/l,yOffset:parseInt(y.getAttribute("yoffset"),10)/l,xAdvance:parseInt(y.getAttribute("xadvance"),10)/l,kerning:{},texture:new o.p(c[b].baseTexture,w),page:b}}for(var x=t.getElementsByTagName("kerning"),E=0;E<x.length;E++){var T=x[E],S=parseInt(T.getAttribute("first"),10)/l,O=parseInt(T.getAttribute("second"),10)/l,A=parseInt(T.getAttribute("amount"),10)/l;r.chars[O]&&(r.chars[O].kerning[S]=A)}return e.fonts[r.font]=r,r},Object.defineProperties(e.prototype,i),e}(r.b);Dt.fonts={};var Rt=function(){};Rt.parse=function(t,e){t.bitmapFont=Dt.registerFont(t.data,e)},Rt.add=function(){St.c.setExtensionXhrType("fnt",St.c.XHR_RESPONSE_TYPE.DOCUMENT)},Rt.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},Rt.use=function(t,e){if(t.data&&t.type===St.c.TYPE.XML)if(0!==t.data.getElementsByTagName("page").length&&0!==t.data.getElementsByTagName("info").length&&null!==t.data.getElementsByTagName("info")[0].getAttribute("face")){var i=t.isDataUrl?"":Rt.dirname(t.url);t.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/")),(i=i.replace(this.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/");for(var n=t.data.getElementsByTagName("page"),r={},s=function(i){r[i.metadata.pageFile]=i.texture,Object.keys(r).length===n.length&&(Rt.parse(t,r),e())},o=0;o<n.length;++o){var a=n[o].getAttribute("file"),h=i+a,u=!1;for(var l in this.resources){var c=this.resources[l];if(c.url===h){c.metadata.pageFile=a,c.texture?s(c):c.onAfterMiddleware.add(s),u=!0;break}}if(!u){var f={crossOrigin:t.crossOrigin,loadType:St.c.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:a},t.metadata.imageMetadata),parentResource:t};this.add(h,f,s)}}}else e();else e()};
/*!
 * @pixi/filter-alpha - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Ut=function(t){function e(e){void 0===e&&(e=1),t.call(this,o.u,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}),this.alpha=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={alpha:{configurable:!0}};return i.alpha.get=function(){return this.uniforms.uAlpha},i.alpha.set=function(t){this.uniforms.uAlpha=t},Object.defineProperties(e.prototype,i),e}(o.g);var Ft={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Nt=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");var jt=function(t){function e(e,i,n,r,s){var o=function(t,e){var i,n=Math.ceil(t/2),r="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",s="";i=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<t;o++){var a=i.replace("%index%",o);s+=a=a.replace("%sampleIndex%",o-(n-1)+".0"),s+="\n"}return r=(r=r.replace("%blur%",s)).replace("%size%",t)}(s=s||5,e),a=function(t){for(var e,i=Ft[t],n=i.length,r=Nt,s="",o=0;o<t;o++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",o);e=o,o>=n&&(e=t-o-1),s+=a=a.replace("%value%",i[e]),s+="\n"}return r=(r=r.replace("%blur%",s)).replace("%size%",t)}(s);t.call(this,o,a),this.horizontal=e,this.resolution=r||_.b.RESOLUTION,this._quality=0,this.quality=n||4,this.blur=i||8}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blur:{configurable:!0},quality:{configurable:!0}};return e.prototype.apply=function(t,e,i,n){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{var r=t.getFilterTexture(),s=t.renderer,o=e,a=r;this.state.blend=!1,t.applyFilter(this,o,a,!0);for(var h=1;h<this.passes-1;h++){s.renderTexture.bind(o,o.filterFrame),this.uniforms.uSampler=a;var u=a;a=o,o=u,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,i,n),t.returnFilterTexture(r)}},i.blur.get=function(){return this.strength},i.blur.set=function(t){this.padding=1+2*Math.abs(t),this.strength=t},i.quality.get=function(){return this._quality},i.quality.set=function(t){this._quality=t,this.passes=t},Object.defineProperties(e.prototype,i),e}(o.g),Bt=function(t){function e(e,i,n,r){t.call(this),this.blurXFilter=new jt(!0,e,i,n,r),this.blurYFilter=new jt(!1,e,i,n,r),this.resolution=n||_.b.RESOLUTION,this.quality=i||4,this.blur=e||8,this.repeatEdgePixels=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blur:{configurable:!0},quality:{configurable:!0},blurX:{configurable:!0},blurY:{configurable:!0},blendMode:{configurable:!0},repeatEdgePixels:{configurable:!0}};return e.prototype.apply=function(t,e,i,n){var r=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(r&&s){var o=t.getFilterTexture();this.blurXFilter.apply(t,e,o,!0),this.blurYFilter.apply(t,o,i,n),t.returnFilterTexture(o)}else s?this.blurYFilter.apply(t,e,i,n):this.blurXFilter.apply(t,e,i,n)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},i.blur.get=function(){return this.blurXFilter.blur},i.blur.set=function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},i.quality.get=function(){return this.blurXFilter.quality},i.quality.set=function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},i.blurX.get=function(){return this.blurXFilter.blur},i.blurX.set=function(t){this.blurXFilter.blur=t,this.updatePadding()},i.blurY.get=function(){return this.blurYFilter.blur},i.blurY.set=function(t){this.blurYFilter.blur=t,this.updatePadding()},i.blendMode.get=function(){return this.blurYFilter.blendMode},i.blendMode.set=function(t){this.blurYFilter.blendMode=t},i.repeatEdgePixels.get=function(){return this._repeatEdgePixels},i.repeatEdgePixels.set=function(t){this._repeatEdgePixels=t,this.updatePadding()},Object.defineProperties(e.prototype,i),e}(o.g),zt=function(t){function e(){var e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};t.call(this,o.t,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",e),this.alpha=1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={matrix:{configurable:!0},alpha:{configurable:!0}};return e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),n=Math.sin(t),r=1/3,s=(0,Math.sqrt)(r),o=[i+(1-i)*r,r*(1-i)-s*n,r*(1-i)+s*n,0,0,r*(1-i)+s*n,i+r*(1-i),r*(1-i)-s*n,0,0,r*(1-i)-s*n,r*(1-i)+s*n,i+r*(1-i),0,0,0,0,0,1,0];this._loadMatrix(o,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,n=-.5*(i-1),r=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var i=2*t/3+1,n=-.5*(i-1),r=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,n,r){var s=((i=i||16770432)>>16&255)/255,o=(i>>8&255)/255,a=(255&i)/255,h=((n=n||3375104)>>16&255)/255,u=(n>>8&255)/255,l=(255&n)/255,c=[.3,.59,.11,0,0,s,o,a,t=t||.2,0,h,u,l,e=e||.15,0,s-h,o-u,a-l,0,0];this._loadMatrix(c,r)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},i.matrix.get=function(){return this.uniforms.m},i.matrix.set=function(t){this.uniforms.m=t},i.alpha.get=function(){return this.uniforms.uAlpha},i.alpha.set=function(t){this.uniforms.uAlpha=t},Object.defineProperties(e.prototype,i),e}(o.g);zt.prototype.grayscale=zt.prototype.greyscale;
/*!
 * @pixi/filter-displacement - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Xt=function(t){function e(e,i){var n=new a.d;e.renderable=!1,t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,null==i&&(i=20),this.scale=new a.g(i,i)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={map:{configurable:!0}};return e.prototype.apply=function(t,e,i,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var r=this.maskSprite.transform.worldTransform,s=Math.sqrt(r.a*r.a+r.b*r.b),o=Math.sqrt(r.c*r.c+r.d*r.d);0!==s&&0!==o&&(this.uniforms.rotation[0]=r.a/s,this.uniforms.rotation[1]=r.b/s,this.uniforms.rotation[2]=r.c/o,this.uniforms.rotation[3]=r.d/o),t.applyFilter(this,e,i,n)},i.map.get=function(){return this.uniforms.mapSampler},i.map.set=function(t){this.uniforms.mapSampler=t},Object.defineProperties(e.prototype,i),e}(o.g),Yt=function(t){function e(){t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(o.g),Ht=function(t){function e(e,i){void 0===e&&(e=.5),void 0===i&&(i=Math.random()),t.call(this,o.t,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0}),this.noise=e,this.seed=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={noise:{configurable:!0},seed:{configurable:!0}};return i.noise.get=function(){return this.uniforms.uNoise},i.noise.set=function(t){this.uniforms.uNoise=t},i.seed.get=function(){return this.uniforms.uSeed},i.seed.set=function(t){this.uniforms.uSeed=t},Object.defineProperties(e.prototype,i),e}(o.g),Gt=new a.d;r.c.prototype._cacheAsBitmap=!1,r.c.prototype._cacheData=!1;var Vt=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(r.c.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new Vt),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),r.c.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},r.c.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.batch.flush();var i=this.getLocalBounds().clone();if(this.filters){var r=this.filters[0].padding;i.pad(r)}i.ceil(_.b.RESOLUTION);var s=t.renderTexture.current,a=t.renderTexture.sourceFrame,h=t.projection.transform,u=o.l.create(i.width,i.height),l="cacheAsBitmap_"+Object(n.uid)();this._cacheData.textureCacheId=l,o.a.addToCache(u.baseTexture,l),o.p.addToCache(u,l);var c=Gt;c.tx=-i.x,c.ty=-i.y,this.transform.worldTransform.identity(),this.render=this._cacheData.originalRender,t.render(this,u,!0,c,!0),t.projection.transform=h,t.renderTexture.bind(s,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var f=new K(u);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-i.x/i.width,f.anchor.y=-i.y/i.height,f.alpha=e,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=f.containsPoint.bind(f)}},r.c.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},r.c.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),i=this.alpha;this.alpha=1;var r=t.context;e.ceil(_.b.RESOLUTION);var s=o.l.create(e.width,e.height),a="cacheAsBitmap_"+Object(n.uid)();this._cacheData.textureCacheId=a,o.a.addToCache(s.baseTexture,a),o.p.addToCache(s,a);var h=Gt;this.transform.localTransform.copyTo(h),h.invert(),h.tx-=e.x,h.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,s,!0,h,!1),t.context=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var u=new K(s);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-e.x/e.width,u.anchor.y=-e.y/e.height,u.alpha=i,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}},r.c.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},r.c.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},r.c.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,o.a.removeFromCache(this._cacheData.textureCacheId),o.p.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},r.c.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},
/*!
 * @pixi/mixin-get-child-by-name - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
r.c.prototype.name=null,r.b.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null},
/*!
 * @pixi/mixin-get-global-position - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
r.c.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new a.g),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};
/*!
 * @pixi/mesh - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Wt=function(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0};Wt.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}};var qt=new a.g,Kt=new a.h,Zt=function(t){function e(e,i,n,r){void 0===r&&(r=w.c.TRIANGLES),t.call(this),this.geometry=e,e.refCount++,this.shader=i,this.state=n||o.o.for2d(),this.drawMode=r,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=0,this._transformID=-1,this.tint=16777215,this.blendMode=w.b.NORMAL,this._roundPixels=_.b.ROUND_PIXELS,this.batchUvs=null}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={uvBuffer:{configurable:!0},verticesBuffer:{configurable:!0},material:{configurable:!0},blendMode:{configurable:!0},roundPixels:{configurable:!0},tint:{configurable:!0},texture:{configurable:!0}};return i.uvBuffer.get=function(){return this.geometry.buffers[1]},i.verticesBuffer.get=function(){return this.geometry.buffers[0]},i.material.set=function(t){this.shader=t},i.material.get=function(){return this.shader},i.blendMode.set=function(t){this.state.blendMode=t},i.blendMode.get=function(){return this.state.blendMode},i.roundPixels.set=function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},i.roundPixels.get=function(){return this._roundPixels},i.tint.get=function(){return this.shader.tint},i.tint.set=function(t){this.shader.tint=t},i.texture.get=function(){return this.shader.texture},i.texture.set=function(t){this.shader.texture=t},e.prototype._render=function(t){var i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===w.c.TRIANGLES&&i.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var i=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[i]),t.plugins[i].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var i=this.transform.worldTransform,n=i.a,r=i.b,s=i.c,o=i.d,a=i.tx,h=i.ty,u=this.vertexData,l=0;l<u.length/2;l++){var c=e[2*l],f=e[2*l+1];u[2*l]=n*c+s*f+a,u[2*l+1]=r*c+o*f+h}if(this._roundPixels)for(var d=_.b.RESOLUTION,p=0;p<u.length;++p)u[p]=Math.round((u[p]*d|0)/d);this.vertexDirty=t.vertexDirtyId}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Wt(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,qt);for(var e=this.geometry.getBuffer("aVertexPosition").data,i=Kt.points,n=this.geometry.getIndex().data,r=n.length,s=4===this.drawMode?3:1,o=0;o+2<r;o+=s){var a=2*n[o],h=2*n[o+1],u=2*n[o+2];if(i[0]=e[a],i[1]=e[a+1],i[2]=e[h],i[3]=e[h+1],i[4]=e[u],i[5]=e[u+1],Kt.contains(qt.x,qt.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},Object.defineProperties(e.prototype,i),e}(r.b);Zt.BATCHABLE_SIZE=100;o.n,o.h,i(31);var Jt=function(t){function e(e,i){t.call(this,e[0]instanceof o.p?e[0]:e[0].texture),this._textures=null,this._durations=null,this.textures=e,this._autoUpdate=!1!==i,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this.playing=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={totalFrames:{configurable:!0},textures:{configurable:!0},currentFrame:{configurable:!0}};return e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&l.a.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&l.a.shared.add(this.update,this,l.c.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this._currentTime=0,this.stop(),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this._currentTime=this._textures.length-1,this.stop(),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var i=[],n=0;n<t.length;++n)i.push(o.p.from(t[n]));return new e(i)},e.fromImages=function(t){for(var i=[],n=0;n<t.length;++n)i.push(o.p.from(t[n]));return new e(i)},i.totalFrames.get=function(){return this._textures.length},i.textures.get=function(){return this._textures},i.textures.set=function(t){if(t[0]instanceof o.p)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()},i.currentFrame.get=function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},Object.defineProperties(e.prototype,i),e}(K);i.d(e,"r",(function(){return Qt})),i.d(e,"s",(function(){return $t})),i.d(e,"u",(function(){return n})),i.d(e,"c",(function(){return o.a})),i.d(e,"l",(function(){return o.l})),i.d(e,"m",(function(){return o.m})),i.d(e,"p",(function(){return o.p})),i.d(e,"g",(function(){return St.b})),i.d(e,"q",(function(){return l.a})),i.d(e,"a",(function(){return w.a})),i.d(e,"e",(function(){return r.b})),i.d(e,"f",(function(){return V})),i.d(e,"d",(function(){return a.a})),i.d(e,"h",(function(){return a.d})),i.d(e,"i",(function(){return a.g})),i.d(e,"j",(function(){return a.h})),i.d(e,"k",(function(){return a.j})),i.d(e,"n",(function(){return K})),i.d(e,"b",(function(){return Jt})),i.d(e,"o",(function(){return at}));o.m.registerPlugin("accessibility",s),o.m.registerPlugin("extract",u),o.m.registerPlugin("interaction",b),o.m.registerPlugin("particle",At),o.m.registerPlugin("prepare",yt),o.m.registerPlugin("batch",o.d),o.m.registerPlugin("tilingSprite",Lt),St.b.registerPlugin(Rt),St.b.registerPlugin(Mt),xt.registerPlugin(l.b),xt.registerPlugin(St.a);var Qt="5.2.0",$t={AlphaFilter:Ut,BlurFilter:Bt,BlurFilterPass:jt,ColorMatrixFilter:zt,DisplacementFilter:Xt,FXAAFilter:Yt,NoiseFilter:Ht}},function(t,e,i){"use strict";var n,r,s,o,a=i(0),h=i(13),u=i.n(h),l=i(19);e.a=(o=(s=function(t,e,i){this.matrix?(this.matrix[0]=0,this.matrix[1]=0,this.matrix[2]=0):this.matrix=a.a.setUp(0,0,0),this.set(t,e,i)}).prototype,Object.defineProperty(o,"x",{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}}),Object.defineProperty(o,"y",{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}}),Object.defineProperty(o,"z",{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}}),o.toString=function(){return"["+this.matrix.join(",")+"]"},o.set=function(t,e,i){return t&&t.matrix?this.setVector(t,e):t&&"number"==typeof t.x&&"number"==typeof t.y?this.setXYZ(t.x,t.y,t.z):t&&Array.isArray(t)?this.setArray(t,e):this.setXYZ(t,e,i)},o.setXYZ=function(t,e,i){var n=this.matrix;return n[0]=t||0,n[1]=e||0,n[2]=i||0,this},o.setVector=function(t,e){return this.setArray(t.matrix,e)},o.setArray=function(t,e){for(var i=e||t.length,n=this.matrix;i--;)n[i]=t[i];return this},o.equals=function(t,e,i){var n=null,r=0,s=this.matrix;if(t&&Array.isArray(t)){for(r=e||t.length;r--;)if(s[r]!==t[r])return!1;return!0}if(t&&t.matrix){for(n=t.matrix,r=e||n.length;r--;)if(s[r]!==n[r])return!1;return!0}return!("number"!=typeof t||s[0]!==t||"number"==typeof e&&s[1]!==e||"number"==typeof i&&s[2]!==i)},o.magnitude=function(t){return Math.sqrt(this.magnitudeSquared(t))},o.magnitudeSquared=function(t){var e=0,i=0;for(t=t||this.matrix.length,i=0;i<t;i++)e+=Math.pow(this.matrix[i],2);return e},o.getAngle=function(){var t=this.magnitude(2),e=0;return 0!==t&&(e=Math.acos(this.x/t),this.y<0&&(e=2*Math.PI-e)),e},o.getUnit=function(){return s.setUp(this).normalize()},o.getInverse=function(){return s.setUp(this).multiply(-1)},o.normalize=function(){var t=this.magnitude();return 0===t?this:this.multiply(1/t)},o.cross=(n=function(t,e,i,n){return t*n-e*i},function(t){var e=n(this.y,this.z,t.y,t.z),i=-n(this.x,this.z,t.x,t.z),r=n(this.x,this.y,t.x,t.y);return this.x=e,this.y=i,this.z=r,this}),o.getCrossProduct=function(t){return s.setUp(this).cross(t)},o.rotate=function(t,e){var i,n,r,o,h=e,u=Math.cos(t),l=Math.sin(t),c=1-u,f=s.setUp();return h?"x"===h?h=f.setXYZ(1,0,0):"y"===h?h=f.setXYZ(0,1,0):"z"===h&&(h=f.setXYZ(0,0,1)):h=f.setXYZ(0,0,1),n=h.x,r=h.y,o=h.z,i=a.a.setUp(a.a.setUp(u+n*n*c,n*r*c-o*l,n*o*c+r*l),a.a.setUp(r*n*c+o*l,u+r*r*c,r*o*c-n*l),a.a.setUp(o*n*c-r*l,o*r*c+n*l,u+o*o*c)),this.multiply(i),f.recycle(),a.a.recycle(i,2),this},o.rotateAbout=function(t,e){var i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=t.x+(r*i-s*n),this.y=t.y+(r*n+s*i),this},o.multiply=function(t,e){var i=this.matrix;if(Array.isArray(t)){var n=Object(a.b)(i);2===t.length?(i[0]=n[0]*t[0][0]+n[1]*t[0][1],i[1]=n[0]*t[1][0]+n[1]*t[1][1]):t.length>=3&&(i[0]=n[0]*t[0][0]+n[1]*t[0][1]+n[2]*t[0][2],i[1]=n[0]*t[1][0]+n[1]*t[1][1]+n[2]*t[1][2],i[2]=n[0]*t[2][0]+n[1]*t[2][1]+n[2]*t[2][2]),a.a.recycle(n)}else for(var r=e||i.length,s=0;s<r;s++)i[s]*=t;return this},o.add=function(t,e,i){var n=t,r=0,o=0;for(Array.isArray(n)?r=e||this.matrix.length:n instanceof s?(n=n.matrix,r=e||this.matrix.length):(n=[t||0,e||0,i||0],r=this.matrix.length),o=0;o<r;o++)this.matrix[o]+=n[o];return this},o.addVector=function(t,e){return this.add(t,e)},o.subtractVector=function(t,e){var i=t.getInverse();return this.add(i,e),i.recycle(),this},o.perpendicular=function(t){var e=this.matrix,i=!0===t?-1:1,n=-this.matrix[1];return e[1]=e[0],e[0]=n,t&&(e[1]*=i,e[0]*=i),this},o.scale=function(t,e){return this.multiply(t,e)},o.dot=function(t,e){var i=0,n=0,r=this.matrix,s=t.matrix;for(n=e||r.length;n--;)i+=r[n]*(s[n]||0);return i},o.angleTo=function(t){var e=this.getUnit(),i=t.getUnit(),n=0;return e.magnitude()&&i.magnitude()?n=Math.acos(e.dot(i)):(platypus.debug.warn("Vector: Attempted to find the angle of a zero-length vector."),n=NaN),e.recycle(),i.recycle(),n},o.signedAngleTo=function(t,e){var i=this.getUnit(),n=t.getUnit(),r=i.getCrossProduct(n),s=0;return s=0===r.magnitude()?0:r.dot(e)<0?-Math.acos(i.dot(n)):Math.acos(i.dot(n)),i.recycle(),n.recycle(),r.recycle(),s},o.scalarProjection=function(t){var e=null,i=0;return"number"==typeof t?this.magnitude(2)*Math.cos(t):(e=s.setUp(t).normalize(),i=this.dot(e),e.recycle(),i)},o.copy=function(){return s.setUp(this)},s.assign=(r=function(t,e,i,n){var r=null,s=!1;"string"==typeof t&&void 0!==e[t]&&(r=e[t],delete e[t],s=!0),Object.defineProperty(e,t,{get:function(){return i.matrix[n]},set:function(t){i.matrix[n]=t},enumerable:!0}),s&&(e[t]=r)},function(t,e){var i=0;if(t&&e){if(!t[e]){for(t[e]=s.setUp(),i=2;i<arguments.length;i++)arguments[i]!==e&&r(arguments[i],t,t[e],i-2);return null}return t[e]}return null}),l.a.add(s,"Vector",s,(function(){this.matrix.length=0}),!0,u.a.dev),s)},function(t,e,i){"use strict";const n=/iPhone/i,r=/iPod/i,s=/iPad/i,o=/\bAndroid(?:.+)Mobile\b/i,a=/Android/i,h=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,u=/Silk/i,l=/Windows Phone/i,c=/\bWindows(?:.+)ARM\b/i,f=/BlackBerry/i,d=/BB10/i,p=/Opera Mini/i,g=/\b(CriOS|Chrome)(?:.+)Mobile/i,v=/Mobile(?:.+)Firefox\b/i;function y(t,e){return t.test(e)}i.d(e,"a",(function(){return m})),i.d(e,"b",(function(){return b}));
/*!
 * @pixi/settings - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var m=function(t){let e=(t=t||("undefined"!=typeof navigator?navigator.userAgent:"")).split("[FBAN");void 0!==e[1]&&(t=e[0]),e=t.split("Twitter"),void 0!==e[1]&&(t=e[0]);const i={apple:{phone:y(n,t)&&!y(l,t),ipod:y(r,t),tablet:!y(n,t)&&y(s,t)&&!y(l,t),device:(y(n,t)||y(r,t)||y(s,t))&&!y(l,t)},amazon:{phone:y(h,t),tablet:!y(h,t)&&y(u,t),device:y(h,t)||y(u,t)},android:{phone:!y(l,t)&&y(h,t)||!y(l,t)&&y(o,t),tablet:!y(l,t)&&!y(h,t)&&!y(o,t)&&(y(u,t)||y(a,t)),device:!y(l,t)&&(y(h,t)||y(u,t)||y(o,t)||y(a,t))||y(/\bokhttp\b/i,t)},windows:{phone:y(l,t),tablet:y(c,t),device:y(l,t)||y(c,t)},other:{blackberry:y(f,t),blackberry10:y(d,t),opera:y(p,t),firefox:y(v,t),chrome:y(g,t),device:y(f,t)||y(d,t)||y(p,t)||y(v,t)||y(g,t)},any:!1,phone:!1,tablet:!1};return i.any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}();var b={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(t){var e=!0;if(m.tablet||m.phone){if(e=!1,m.apple.device){var i=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(i)parseInt(i[1],10)>=11&&(e=!0)}if(m.android.device){var n=navigator.userAgent.match(/Android\s([0-9.]*)/);if(n)parseInt(n[1],10)>=7&&(e=!0)}}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:m.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!m.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}},function(t,e,i){"use strict";var n,r,s=i(13),o=i.n(s),a=i(19);e.a=((r=(n=function t(e,i,n,r){e instanceof t?this.set(e):(this.empty=!0,this.setAll(e,i,n,r))}).prototype).setAll=function(t,e,i,n){return this.empty=!1,this.x=t,this.y=e,this.resize(i,n),this},r.setBounds=function(t,e,i,n){return this.empty=!1,this.x=(i+t)/2,this.y=(e+n)/2,this.resize(i-t,n-e),this},r.set=function(t){return this.empty=t.empty,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this},r.toString=function(){return"[AABB: "+this.width+"x"+this.height+" ("+this.x+", "+this.y+")]"},r.reset=function(){return this.empty=!0,this},r.resize=function(t,e){var i=t||0,n=e||0,r=i/2,s=n/2;return this.width=i,this.height=n,this.halfWidth=r,this.halfHeight=s,"number"==typeof this.x?(this.left=-r+this.x,this.right=r+this.x):this.empty=!0,"number"==typeof this.y?(this.top=-s+this.y,this.bottom=s+this.y):this.empty=!0,this},r.include=function(t){return this.empty?this.set(t):(this.left>t.left&&(this.left=t.left),this.right<t.right&&(this.right=t.right),this.top>t.top&&(this.top=t.top),this.bottom<t.bottom&&(this.bottom=t.bottom),this.width=this.right-this.left,this.height=this.bottom-this.top,this.halfWidth=this.width/2,this.halfHeight=this.height/2,this.x=this.left+this.halfWidth,this.y=this.top+this.halfHeight),this},r.move=function(t,e){return this.moveX(t),this.moveY(e),this},r.moveX=function(t){return this.x=t,this.left=-this.halfWidth+t,this.right=this.halfWidth+t,this},r.moveY=function(t){return this.y=t,this.top=-this.halfHeight+t,this.bottom=this.halfHeight+t,this},r.moveXBy=function(t){return this.moveX(this.x+t)},r.moveYBy=function(t){return this.moveY(this.y+t)},r.equals=function(t){return!this.empty&&!t.empty&&this.left===t.left&&this.top===t.top&&this.right===t.right&&this.bottom===t.bottom},r.contains=function(t){return t.top>=this.top&&t.bottom<=this.bottom&&t.left>=this.left&&t.right<=this.right},r.containsVector=function(t){return this.containsPoint(t.x,t.y)},r.containsPoint=function(t,e){return e>=this.top&&e<=this.bottom&&t>=this.left&&t<=this.right},r.collides=function(t){return t.bottom>this.top&&t.top<this.bottom&&t.right>this.left&&t.left<this.right},r.collidesPoint=function(t,e){return e>this.top&&e<this.bottom&&t>this.left&&t<this.right},r.intersects=function(t){return t.bottom>=this.top&&t.top<=this.bottom&&t.right>=this.left&&t.left<=this.right},r.getIntersectionArea=function(t){var e=Math.max,i=Math.min;return this.intersects(t)?(i(this.bottom,t.bottom)-e(this.top,t.top))*(i(this.right,t.right)-e(this.left,t.left)):0},a.a.add(n,"AABB",n,null,!0,o.a.dev),n)},function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return u})),i.d(e,"c",(function(){return a}));var n=i(10),r=i(4),s=i(1);
/*!
 * @pixi/display - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
n.b.SORTABLE_CHILDREN=!1;var o=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null};o.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},o.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},o.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?r.j.EMPTY:((t=t||new r.j(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},o.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},o.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY,s=t[0],o=t[1];e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,e=(s=t[2])<e?s:e,i=(o=t[3])<i?o:i,n=s>n?s:n,r=o>r?o:r,e=(s=t[4])<e?s:e,i=(o=t[5])<i?o:i,n=s>n?s:n,r=o>r?o:r,e=(s=t[6])<e?s:e,i=(o=t[7])<i?o:i,n=s>n?s:n,r=o>r?o:r,this.minX=e,this.minY=i,this.maxX=n,this.maxY=r},o.prototype.addFrame=function(t,e,i,n,r){this.addFrameMatrix(t.worldTransform,e,i,n,r)},o.prototype.addFrameMatrix=function(t,e,i,n,r){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=this.minX,f=this.minY,d=this.maxX,p=this.maxY,g=s*e+a*i+u,v=o*e+h*i+l;c=g<c?g:c,f=v<f?v:f,d=g>d?g:d,p=v>p?v:p,c=(g=s*n+a*i+u)<c?g:c,f=(v=o*n+h*i+l)<f?v:f,d=g>d?g:d,p=v>p?v:p,c=(g=s*e+a*r+u)<c?g:c,f=(v=o*e+h*r+l)<f?v:f,d=g>d?g:d,p=v>p?v:p,c=(g=s*n+a*r+u)<c?g:c,f=(v=o*n+h*r+l)<f?v:f,d=g>d?g:d,p=v>p?v:p,this.minX=c,this.minY=f,this.maxX=d,this.maxY=p},o.prototype.addVertexData=function(t,e,i){for(var n=this.minX,r=this.minY,s=this.maxX,o=this.maxY,a=e;a<i;a+=2){var h=t[a],u=t[a+1];n=h<n?h:n,r=u<r?u:r,s=h>s?h:s,o=u>o?u:o}this.minX=n,this.minY=r,this.maxX=s,this.maxY=o},o.prototype.addVertices=function(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)},o.prototype.addVerticesMatrix=function(t,e,i,n,r,s){var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty;r=r||0,s=s||0;for(var f=this.minX,d=this.minY,p=this.maxX,g=this.maxY,v=i;v<n;v+=2){var y=e[v],m=e[v+1],b=o*y+h*m+l,_=u*m+a*y+c;f=Math.min(f,b-r),p=Math.max(p,b+r),d=Math.min(d,_-s),g=Math.max(g,_+s)}this.minX=f,this.minY=d,this.maxX=p,this.maxY=g},o.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r},o.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=r&&n<=s){var o=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=i<o?i:o,this.minY=n<a?n:a,this.maxX=r>h?r:h,this.maxY=s>u?s:u}},o.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},o.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=r&&n<=s){var o=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=i<o?i:o,this.minY=n<a?n:a,this.maxX=r>h?r:h,this.maxY=s>u?s:u}},o.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},o.prototype.addFramePad=function(t,e,i,n,r,s){t-=r,e-=s,i+=r,n+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n};var a=function(t){function e(){t.call(this),this.tempDisplayObjectParent=null,this.transform=new r.m,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new o,this._boundsID=0,this._lastBoundsID=-1,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={_tempDisplayObjectParent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},worldTransform:{configurable:!0},localTransform:{configurable:!0},position:{configurable:!0},scale:{configurable:!0},pivot:{configurable:!0},skew:{configurable:!0},rotation:{configurable:!0},angle:{configurable:!0},zIndex:{configurable:!0},worldVisible:{configurable:!0},mask:{configurable:!0}};return e.mixin=function(t){for(var i=Object.keys(t),n=0;n<i.length;++n){var r=i[n];Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t,r))}},i._tempDisplayObjectParent.get=function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.calculateBounds=function(){},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&(this.calculateBounds(),this._lastBoundsID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new r.j),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new r.j),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=i,this.transform=e,n},e.prototype.toGlobal=function(t,e,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.render=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,i,n,r,s,o,a,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=r,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},e.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},i.x.get=function(){return this.position.x},i.x.set=function(t){this.transform.position.x=t},i.y.get=function(){return this.position.y},i.y.set=function(t){this.transform.position.y=t},i.worldTransform.get=function(){return this.transform.worldTransform},i.localTransform.get=function(){return this.transform.localTransform},i.position.get=function(){return this.transform.position},i.position.set=function(t){this.transform.position.copyFrom(t)},i.scale.get=function(){return this.transform.scale},i.scale.set=function(t){this.transform.scale.copyFrom(t)},i.pivot.get=function(){return this.transform.pivot},i.pivot.set=function(t){this.transform.pivot.copyFrom(t)},i.skew.get=function(){return this.transform.skew},i.skew.set=function(t){this.transform.skew.copyFrom(t)},i.rotation.get=function(){return this.transform.rotation},i.rotation.set=function(t){this.transform.rotation=t},i.angle.get=function(){return this.transform.rotation*r.i},i.angle.set=function(t){this.transform.rotation=t*r.b},i.zIndex.get=function(){return this._zIndex},i.zIndex.set=function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},i.worldVisible.get=function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},i.mask.get=function(){return this._mask},i.mask.set=function(t){if(this._mask){var e=this._mask.maskObject||this._mask;e.renderable=!0,e.isMask=!1}if(this._mask=t,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}},Object.defineProperties(e.prototype,i),e}(s.EventEmitter);function h(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}a.prototype.displayObjectUpdateTransform=a.prototype.updateTransform;var u=function(t){function e(){t.call(this),this.children=[],this.sortableChildren=n.b.SORTABLE_CHILDREN,this.sortDirty=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={width:{configurable:!0},height:{configurable:!0}};return e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments,i=arguments.length;if(i>1)for(var n=0;n<i;n++)this.addChild(e[n]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);Object(s.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments,i=arguments.length;if(i>1)for(var n=0;n<i;n++)this.removeChild(e[n]);else{var r=this.children.indexOf(t);if(-1===r)return null;t.parent=null,t.transform._parentID=-1,Object(s.removeItems)(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Object(s.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0);var i,n=t,r="number"==typeof e?e:this.children.length,s=r-n;if(s>0&&s<=r){i=this.children.splice(n,s);for(var o=0;o<i.length;++o)i[o].parent=null,i[o].transform&&(i[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<i.length;++a)i[a].emit("removed",this),this.emit("childRemoved",i[a],this,a);return i}if(0===s&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var n=this.children[e];n._lastSortedIndex=e,t||0===n.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(h),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var i=e._mask.maskObject||e._mask;i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}i&&t.mask.push(this,this._mask),this._render(t);for(var r=0,s=this.children.length;r<s;r++)this.children[r].render(t);t.batch.flush(),i&&t.mask.pop(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var i="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var r=0;r<n.length;++r)n[r].destroy(e)},i.width.get=function(){return this.scale.x*this.getLocalBounds().width},i.width.set=function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},i.height.get=function(){return this.scale.y*this.getLocalBounds().height},i.height.set=function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},Object.defineProperties(e.prototype,i),e}(a);u.prototype.containerUpdateTransform=u.prototype.updateTransform},function(t,e,i){var n=i(432);t.exports={dev:!1,buildDate:(new Date).toGMTString(),version:n.version}},function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n}));var n,r=i(10);
/*!
 * @pixi/ticker - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */r.b.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(n||(n={}));var s=function(){function t(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=0),void 0===n&&(n=!1),this.fn=t,this.context=e,this.priority=i,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),o=function(){function t(){var t=this;this._head=new s(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/r.b.TARGET_FPMS,this.elapsedMS=1/r.b.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,i){return void 0===i&&(i=n.NORMAL),this._addListener(new s(t,e,i))},t.prototype.addOnce=function(t,e,i){return void 0===i&&(i=n.NORMAL),this._addListener(new s(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*r.b.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,r.b.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!0,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!0,configurable:!0}),t}(),a=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,n.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?o.shared:new o,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}()},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){var n=i(18);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){"use strict";var n={value:!1,writable:!0},r={},s=function(){this.contains=null,this.previous=null},o=null;e.a={add:function(t,e,i,a,h,u){var l=t===Array,c=null;return e?r[e]?(t!==r[e].ClassObject&&console.warn('Recycle: There is already a cache named "'+e+'" that is being used for another object type.'),r[e]):((c=r[e]={ClassObject:t,list:null,setUp:null,recycle:null,pop:l?function(){var t=this.list,e=null;return t?(this.list=t.previous,e=t.contains,t.previous=o,o=t,e):[]}:function(){var t=this.list,e=null;return t?(this.list=t.previous,e=t.contains,t.previous=o,o=t,e):Object.create(this.ClassObject.prototype)},push:function(t){var e=o;e?o=e.previous:e=Object.create(s.prototype),e.previous=this.list,this.list=e,e.contains=t},getLength:function(){for(var t=0,e=this.list;e;)t+=1,e=e.previous;return t}}).setUp=i?function(){var t=this.pop();return i.apply(t,arguments),t}:l?function(){var t=this.pop(),e=0;for(e=0;e<arguments.length;e++)t[e]=arguments[e];return t}:c.pop,c.recycle=a?function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];a.apply.apply(a,[t].concat(i)),this.push(t)}:l?function(t,e){var i=0;if(e>1)for(i=t.length,e-=1;i--;)this.recycle(t[i],e);t.length=0,this.push(t)}:c.push,u&&(c.setUp=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];var s=t.apply(void 0,i);return void 0===s.recycled?Object.defineProperty(s,"recycled",n):s.recycled=!1,s}.bind(c,c.setUp.bind(c)),c.recycle=function(t,e){if(e.recycled)console.warn("Recycle: WHOA! I have already been recycled!",e);else{e.recycled=!0;for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];t.apply(void 0,[e].concat(n))}}.bind(c,c.recycle.bind(c)),l&&(c.recycle=function(t,e){Array.isArray(e)||console.warn("Recycle: Adding a non-Array to the array cache!");for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];t.apply(void 0,[e].concat(n))}.bind(c,c.recycle.bind(c)))),h&&(Object.defineProperties(t,{setUp:{value:c.setUp.bind(c)},recycle:{value:c.recycle.bind(c)}}),Object.defineProperty(t.prototype,"recycle",{value:function(){for(var t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];(t=c).recycle.apply(t,[this].concat(i))}})),c):(console.warn("Recycle: Must define a name for this cache."),null)},cache:r}},function(t,e,i){"use strict";!function(t){var e=null,i=null,n=null;window.Map||(e={value:null},n=(i=function(){e.value={},t.defineProperty(this,"map",e)}).prototype,t.defineProperties(n,{get:{value:function(t){return this.map[t]}},has:{value:function(t){return this.map.hasOwnProperty(t)}},set:{value:function(t,e){return this.map[t]=e,this}},delete:{value:function(t){var e=this.map[t];return delete this.map[t],e}}}),window.Map=i)}(Object);var n,r,s,o,a,h,u,l=i(0),c=i(13),f=i.n(c),d=i(19);e.a=(n=window.Map,r=function(t,e,i){return this.get(e)!==i&&(this.has(e)||t.push(e),this.set(e,i)),i},s=function(t,e){var i=t.indexOf(e),n=this.get(e);return i>=0&&(Object(l.c)(t,i),this.delete(e)),n},o=function(t){for(var e=t.length;e--;)this.delete(t[e]);t.length=0},a=function(t){for(var e=t.length,i={};e--;)i[t[e]]=this.get(t[e]);return i},h={get:{value:null},has:{value:null},keys:{value:null},set:{value:null},delete:{value:null},clear:{value:null},toJSON:{value:null}},u=function(t){var e=arguments.length,i="",u=null,c=null,f=null;if(this.map||(f=h,c=this.map=new n,u=f.keys.value=l.a.setUp(),f.get.value=c.get.bind(c),f.has.value=c.has.bind(c),f.set.value=r.bind(c,u),f.delete.value=s.bind(c,u),f.clear.value=o.bind(c,u),f.toJSON.value=a.bind(c,u),Object.defineProperties(this,f)),t)if(u=t.keys,"string"==typeof t)for(e%2&&(e-=1,this.set(arguments[e],null));e;)e-=2,this.set(arguments[e],arguments[e+1]);else if(u)for(e=u.length;e--;)this.set(u[e],t.get(u[e]));else for(i in t)t.hasOwnProperty(i)&&this.set(i,t[i])},d.a.add(u,"DataMap",u,(function(){this.clear()}),!0,f.a.dev),u)},function(t,e,i){"use strict";(function(t){var n=i(175),r=i(35),s=i(100),o=i(13),a=i.n(o),h=i(2),u=i(77),l=i(178),c=i(179),f=i(180),d=i(181),p=i(101),g=i(182),v=i(183),y=i(184),m=i(185),b=i(186),_=i(187),w=i(188),x=i(189),E=i(190),T=i(191),S=i(192),O=i(193),A=i(194),P=i(195),C=i(196),M=i(197),k=i(198),I=i(199),L=i(200),D=i(201),R=i(202),U=i(203),F=i(204),N=i(205),j=i(206),B=i(207),z=i(208),X=i(209),Y=i(210),H=i(211),G=i(212),V=i(213),W=i(214),q=i(215),K=i(216),Z=i(217),J=i(218),Q=i(219),$=i(220),tt=i(221),et=i(222),it=i(223),nt=i(224),rt=i(225),st=i(226),ot=i(227),at=i(228),ht=i(229),ut=i(230),lt=i(231),ct=i(78),ft=i(42),dt=i(232),pt=i(233),gt=i(234),vt=i(235),yt=i(103),mt=i(236),bt=i(237),_t=i(238),wt=i(239),xt=i(240),Et=i(241),Tt=i(242),St=i(243),Ot=i(244),At=i(0);i.d(e,"c",(function(){return At.a})),i.d(e,"e",(function(){return At.b})),i.d(e,"f",(function(){return At.c})),i.d(e,"g",(function(){return At.d}));i(41),i(19),i(11),i(83),i(50),i(84),i(99),i(69),i(98),i(7),i(20);var Pt=i(23);i.d(e,"a",(function(){return Pt.a}));i(40),i(55),i(27);var Ct=i(9);i.d(e,"b",(function(){return Ct.a})),e.d=function(){var e=t.platypus={},i=r.c?function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];r.c.log.apply(r.c,[t].concat(i))}:function(t){for(var e,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(e=window.console)[t].apply(e,n)},o=a.a.dev?i:function(){},At=navigator.userAgent.toLowerCase(),Pt=At.search("edge")>-1,Ct=At.search("ipod")>-1,Mt=At.search("iphone")>-1,kt=At.search("ipad")>-1,It=At.search("android")>-1,Lt=At.search("silk")>-1,Dt=Ct||Mt||kt,Rt=Dt||It||Lt;return e.components={Interactive:u.a,AIChaser:l.a,AIPacer:c.a,AudioMusic:f.a,AudioSFX:d.a,AudioVO:p.a,Camera:g.a,CameraFollowMe:v.a,CollisionBasic:y.a,CollisionFilter:m.a,CollisionGroup:b.a,CollisionTiles:_.a,ComponentSwitcher:w.a,Counter:x.a,EntityContainer:E.a,EntityController:T.a,HandlerCollision:S.a,HandlerController:O.a,HandlerLogic:A.a,HandlerRender:P.a,LevelBuilder:C.a,LogicAngularMovement:M.a,LogicAttachment:k.a,LogicButton:I.a,LogicCarrier:L.a,LogicDestroyMe:D.a,LogicDirectionalMovement:R.a,LogicDragDrop:U.a,LogicImpactLaunch:F.a,LogicPacingPlatform:N.a,LogicPortable:j.a,LogicPortal:B.a,LogicPushable:z.a,LogicRebounder:X.a,LogicRegionSpawner:Y.a,LogicRotationalMovement:H.a,LogicSpawner:G.a,LogicStateMachine:V.a,LogicSwitch:W.a,LogicTeleportee:q.a,LogicTeleporter:K.a,LogicTimer:Z.a,LogicWindUpRacer:J.a,Motion:Q.a,Mover:$.a,Node:tt.a,NodeMap:et.a,NodeResident:it.a,Orientation:nt.a,RandomEvents:rt.a,RelativePosition:st.a,RelayFamily:ot.a,RelayGame:at.a,RelayLinker:ht.a,RelayParent:ut.a,RelaySelf:lt.a,RenderAnimator:ct.a,RenderContainer:ft.a,RenderDebug:dt.a,RenderDestroyMe:pt.a,RenderProgress:gt.a,RenderSpine:vt.a,RenderSprite:yt.a,RenderText:mt.a,RenderTiles:bt.a,SceneChanger:_t.a,TiledLoader:wt.a,Timeline:xt.a,Tutorial:Et.a,Tween:Tt.a,VoiceOver:St.a,XHR:Ot.a},e.createComponentClass=h.a,e.supports={touch:"undefined"!==window.ontouchstart,edge:Pt,iPod:Ct,iPhone:Mt,iPad:kt,safari:At.search("safari")>-1&&!Pt,ie:At.search("msie")>-1||At.search("trident")>-1,firefox:At.search("firefox")>-1,android:It,chrome:At.search("chrome")>-1&&!Pt,silk:Lt,iOS:Dt,mobile:Rt,desktop:!Rt},e.debug={general:o.bind(null,"log"),log:o.bind(null,"log"),warn:o.bind(null,"warn"),debug:o.bind(null,"debug"),error:o.bind(null,"error"),olive:o.bind(null,"log")},e.assetCache=new n.a,e.version=a.a.version,e.buildDate=a.a.buildDate,e.Game=s.a,e}()}).call(this,i(76))},function(t,e,i){var n=i(85)("wks"),r=i(60),s=i(15).Symbol,o="function"==typeof s;(t.exports=function(t){return n[t]||(n[t]=o&&s[t]||(o?s:r)("Symbol."+t))}).store=n},function(t,e,i){"use strict";var n,r,s=i(0),o=i(50),a=i(7),h=i(40),u=i(27),l=i(2);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e,i){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}e.a=(n=function(t,e,i){this.addComponent(new t(this,e,i))},r={},function(t){function e(t,i,h,f){var p;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var v=0,y=null,m=s.a.setUp(),b=a.a.setUp(t),_=b.components,w=a.a.setUp(b.properties),x=a.a.setUp(i),E=a.a.setUp(x.properties),T=s.a.setUp();if((p=function(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?d(t):e}(this,g(e).call(this))).components=s.a.setUp(),p.type=b.id||"none",p.id=x.id||E.id,p.id?0===p.id.search(p.type+"-")&&(v=parseInt(p.id.substring(p.id.search("-")+1),10),isNaN(v)||r[p.type]&&!(r[p.type]<=v)||(r[p.type]=v+1)):(r[p.type]||(r[p.type]=0),p.id=p.type+"-"+r[p.type],r[p.type]+=1),p.setProperty(w),p.setProperty(E),p.on("set-property",function(t){this.setProperty(t)}.bind(d(p))),p.state=u.a.setUp(p.state),p.lastState=u.a.setUp(),f&&(p.parent=f),p.trigger=p.triggerEvent=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return T.push(t.bind.apply(t,[this].concat(i))),-1}.bind(d(p),p.trigger),_)for(v=0;v<_.length;v++)(y=_[v])&&(y.type?platypus.components[y.type]?m.push(n.bind(d(p),platypus.components[y.type],y)):platypus.debug.warn('Entity "'+p.type+'": Component "'+y.type+'" is not defined.',y):y.id?m.push(n.bind(d(p),Object(l.a)(y),null)):"function"==typeof y?m.push(n.bind(d(p),y,null)):platypus.debug.warn('Entity "'+p.type+'": Component must have an `id` or `type` value.',y));return p.loadingComponents=o.a.setUp(m,function(){this.loadingComponents=null,delete this.trigger,delete this.triggerEvent;for(var t=0;t<T.length;t++)T[t]();s.a.recycle(T),this.triggerEvent("load"),h&&h(this)}.bind(d(p))),s.a.recycle(m),b.recycle(),w.recycle(),x.recycle(),E.recycle(),p}var i,h,y;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,t),i=e,y=[{key:"getAssetList",value:function(t,i,n){var r,o=0,a=null,h=null,u=null;if(t.type)return(u=platypus.game.settings.entities[t.type])?e.getAssetList(u,t.properties,n):(platypus.debug.warn('Entity "'+t.type+'": This entity is not defined.',t),s.a.setUp());for(r=Object(s.d)(s.a.setUp(),t.preload),o=0;o<t.components.length;o++)(a=t.components[o]&&t.components[o].type&&platypus.components[t.components[o].type])&&(h=a.getAssetList(t.components[o],t.properties,i,n),Object(s.d)(r,h),s.a.recycle(h));return r}}],(h=[{key:"toString",value:function(){return"[Entity "+this.type+"]"}},{key:"toJSON",value:function(t){var e=this.components,i={properties:{id:this.id,state:this.state.toJSON()}},n=0,r=null,s=i.properties;for(t?(i.id=this.type,i.components=[]):i.type=this.type,n=0;n<e.length;n++)r=e[n].toJSON(s),t&&r&&i.components.push(r);return i}},{key:"addComponent",value:function(t){return this.components.push(t),this.triggerEvent("component-added",t),t}},{key:"removeComponent",value:function(t){var e=0;if("string"==typeof t){for(e=0;e<this.components.length;e++)if(this.components[e].type===t)return t=this.components[e],Object(s.c)(this.components,e),this.triggerEvent("component-removed",t),t.destroy(),t}else for(e=0;e<this.components.length;e++)if(this.components[e]===t)return Object(s.c)(this.components,e),this.triggerEvent("component-removed",t),t.destroy(),t;return!1}},{key:"setProperty",value:function(t){var e="";for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}},{key:"destroy",value:function(){var t=this.components;if(!this._destroyed){for(;t.length;)t[0].destroy(),t.shift();s.a.recycle(t),this.components=null,this.state.recycle(),this.state=null,this.lastState.recycle(),this.lastState=null,p(g(e.prototype),"destroy",this).call(this)}}}])&&f(i.prototype,h),y&&f(i,y),e}(h.a))},function(t,e,i){"use strict";var n=i(133),r=i.n(n),s=i(51),o=i.n(s);
/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */
function a(){}function h(t,e,i,n){var r=0,s=t.length;!function o(a){a||r===s?i&&i(a):n?setTimeout((function(){e(t[r++],o)}),1):e(t[r++],o)}()}function u(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function l(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var i=0,n={_tasks:[],concurrency:e,saturated:a,unsaturated:a,buffer:e/4,empty:a,drain:a,error:a,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){i=0,n.drain=a,n.started=!1,n._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!n.paused&&i<n.concurrency&&n._tasks.length;){var e=n._tasks.shift();0===n._tasks.length&&n.empty(),(i+=1)===n.concurrency&&n.saturated(),t(e.data,u(s(e)))}},length:function(){return n._tasks.length},running:function(){return i},idle:function(){return n._tasks.length+i===0},pause:function(){!0!==n.paused&&(n.paused=!0)},resume:function(){if(!1!==n.paused){n.paused=!1;for(var t=1;t<=n.concurrency;t++)n.process()}}};function r(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(n.started=!0,null==t&&n.idle())setTimeout((function(){return n.drain()}),1);else{var r={data:t,callback:"function"==typeof i?i:a};e?n._tasks.unshift(r):n._tasks.push(r),setTimeout((function(){return n.process()}),1)}}function s(t){return function(){i-=1,t.callback.apply(t,arguments),null!=arguments[0]&&n.error(arguments[0],t.data),i<=n.concurrency-n.buffer&&n.unsaturated(),n.idle()&&n.drain(),n.process()}}return n}var c={};function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,i){return e&&f(t.prototype,e),i&&f(t,i),t}var p=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),g=null;function v(){}var y=function(){function t(e,i,n){if("string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=v,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new o.a,this.onProgress=new o.a,this.onComplete=new o.a,this.onAfterMiddleware=new o.a}t.setExtensionLoadType=function(e,i){m(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){m(t._xhrTypeMap,e,i)};var e=t.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(i)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:p&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e._hasFlag=function(t){return 0!=(this._flags&t)},e._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},e._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},e._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},e._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=i,n},e._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var t=this.xhr;this.abort(b(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e._xhrOnTimeout=function(){var t=this.xhr;this.abort(b(t)+" Request timed out.")},e._xhrOnAbort=function(){var t=this.xhr;this.abort(b(t)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var e=this.xhr,i="",n=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===n&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2===(n/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(i,"text/xml")}else{var s=document.createElement("div");s.innerHTML=i,this.data=s}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},e._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,g||(g=document.createElement("a")),g.href=t;var i=!(t=r()(g.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&n===e.protocol?"":"anonymous"},e._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},e._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?"),r=t.indexOf("#"),s=Math.min(n>-1?n:t.length,r>-1?r:t.length);e=(t=t.substring(0,s)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},e._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},d(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function m(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function b(t){return t.toString().replace("object ","")}y.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},y.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},y.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},y.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},y._loadTypeMap={gif:y.LOAD_TYPE.IMAGE,png:y.LOAD_TYPE.IMAGE,bmp:y.LOAD_TYPE.IMAGE,jpg:y.LOAD_TYPE.IMAGE,jpeg:y.LOAD_TYPE.IMAGE,tif:y.LOAD_TYPE.IMAGE,tiff:y.LOAD_TYPE.IMAGE,webp:y.LOAD_TYPE.IMAGE,tga:y.LOAD_TYPE.IMAGE,svg:y.LOAD_TYPE.IMAGE,"svg+xml":y.LOAD_TYPE.IMAGE,mp3:y.LOAD_TYPE.AUDIO,ogg:y.LOAD_TYPE.AUDIO,wav:y.LOAD_TYPE.AUDIO,mp4:y.LOAD_TYPE.VIDEO,webm:y.LOAD_TYPE.VIDEO},y._xhrTypeMap={xhtml:y.XHR_RESPONSE_TYPE.DOCUMENT,html:y.XHR_RESPONSE_TYPE.DOCUMENT,htm:y.XHR_RESPONSE_TYPE.DOCUMENT,xml:y.XHR_RESPONSE_TYPE.DOCUMENT,tmx:y.XHR_RESPONSE_TYPE.DOCUMENT,svg:y.XHR_RESPONSE_TYPE.DOCUMENT,tsx:y.XHR_RESPONSE_TYPE.DOCUMENT,gif:y.XHR_RESPONSE_TYPE.BLOB,png:y.XHR_RESPONSE_TYPE.BLOB,bmp:y.XHR_RESPONSE_TYPE.BLOB,jpg:y.XHR_RESPONSE_TYPE.BLOB,jpeg:y.XHR_RESPONSE_TYPE.BLOB,tif:y.XHR_RESPONSE_TYPE.BLOB,tiff:y.XHR_RESPONSE_TYPE.BLOB,webp:y.XHR_RESPONSE_TYPE.BLOB,tga:y.XHR_RESPONSE_TYPE.BLOB,json:y.XHR_RESPONSE_TYPE.JSON,text:y.XHR_RESPONSE_TYPE.TEXT,txt:y.XHR_RESPONSE_TYPE.TEXT,ttf:y.XHR_RESPONSE_TYPE.BUFFER,otf:y.XHR_RESPONSE_TYPE.BUFFER},y.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var _=window.URL||window.webkitURL;var w={caching:function(t,e){var i=this;c[t.url]?(t.data=c[t.url],t.complete()):t.onComplete.once((function(){return c[i.url]=i.data})),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===y.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=_.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=y.TYPE.IMAGE,void(t.data.onload=function(){_.revokeObjectURL(i),t.data.onload=null,e()})}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+function(t){for(var e="",i=0;i<t.length;){for(var n=[0,0,0],r=[0,0,0,0],s=0;s<n.length;++s)i<t.length?n[s]=255&t.charCodeAt(i++):n[s]=0;switch(r[0]=n[0]>>2,r[1]=(3&n[0])<<4|n[1]>>4,r[2]=(15&n[1])<<2|n[2]>>6,r[3]=63&n[2],i-(t.length-1)){case 2:r[3]=64,r[2]=64;break;case 1:r[3]=64}for(var o=0;o<r.length;++o)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r[o])}return e}(t.xhr.responseText),t.type=y.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},x=/(#[\w-]+)?$/,E=function(){function t(e,i){var n=this;void 0===e&&(e=""),void 0===i&&(i=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return n._loadResource(t,e)},this._queue=l(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new o.a,this.onError=new o.a,this.onLoad=new o.a,this.onStart=new o.a,this.onComplete=new o.a;for(var r=0;r<t._defaultBeforeMiddleware.length;++r)this.pre(t._defaultBeforeMiddleware[r]);for(var s=0;s<t._defaultAfterMiddleware.length;++s)this.use(t._defaultAfterMiddleware[s])}var e=t.prototype;return e.add=function(t,e,i,n){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"==typeof t&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new y(t,e,i),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var s=i.parentResource,o=[],a=0;a<s.children.length;++a)s.children[a].isComplete||o.push(s.children[a]);var h=s.progressChunk*(o.length+1)/(o.length+2);s.children.push(this.resources[t]),s.progressChunk=h;for(var u=0;u<o.length;++u)o[u].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},e.pre=function(t){return this._beforeMiddleware.push(t),this},e.use=function(t){return this._afterMiddleware.push(t),this},e.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},e.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},e._prepareUrl=function(t){var e,i=r()(t,{strictMode:!0});if(e=i.protocol||!i.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=x.exec(e)[0];-1!==(e=e.substr(0,e.length-n.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=n}return e},e._loadResource=function(t,e){var i=this;t._dequeue=e,h(this._beforeMiddleware,(function(e,n){e.call(i,t,(function(){n(t.isComplete?{}:null)}))}),(function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())}),!0)},e._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),h(this._afterMiddleware,(function(i,n){i.call(e,t,n)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},d(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();E._defaultBeforeMiddleware=[],E._defaultAfterMiddleware=[],E.pre=function(t){return E._defaultBeforeMiddleware.push(t),E},E.use=function(t){return E._defaultAfterMiddleware.push(t),E};var T=i(1),S=i(5);i.d(e,"a",(function(){return P})),i.d(e,"b",(function(){return A})),i.d(e,"c",(function(){return C}));
/*!
 * @pixi/loaders - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var O=function(){};O.use=function(t,e){t.data&&t.type===y.TYPE.IMAGE&&(t.texture=S.p.fromLoader(t.data,t.url,t.name)),e()};var A=function(t){function e(i,n){var r=this;t.call(this,i,n),T.EventEmitter.call(this);for(var s=0;s<e._plugins.length;++s){var o=e._plugins[s],a=o.pre,h=o.use;a&&this.pre(a),h&&this.use(h)}this.onStart.add((function(t){return r.emit("start",t)})),this.onProgress.add((function(t,e){return r.emit("progress",t,e)})),this.onError.add((function(t,e,i){return r.emit("error",t,e,i)})),this.onLoad.add((function(t,e){return r.emit("load",t,e)})),this.onComplete.add((function(t,e){return r.emit("complete",t,e)})),this._protected=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={shared:{configurable:!0}};return e.prototype.destroy=function(){this._protected||(this.removeAllListeners(),this.reset())},i.shared.get=function(){var t=e._shared;return t||((t=new e)._protected=!0,e._shared=t),t},Object.defineProperties(e,i),e}(E);Object.assign(A.prototype,T.EventEmitter.prototype),A._plugins=[],A.registerPlugin=function(t){return A._plugins.push(t),t.add&&t.add(),A},A.registerPlugin({use:w.parsing}),A.registerPlugin(O);var P=function(){};P.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?A.shared:new A},P.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)};var C=y},function(t,e,i){var n=i(46),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},function(t,e){var i=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=i)},function(t,e,i){"use strict";var n,r,s,o=i(20),a=i(0),h=i(13),u=i.n(h),l=i(41),c=i(19);e.a=(n=function(t){var e=arguments.length;e?1===e&&"string"==typeof t?(o.a.call(this),this.updateFromString(t)):o.a.apply(this,arguments):o.a.call(this)},r=o.a.prototype,s=n.prototype=Object.create(r),Object.defineProperty(n.prototype,"constructor",{configurable:!0,writable:!0,value:n}),Object.defineProperty(s,"updateFromString",{value:function(t){for(var e=Object(l.a)(t,","),i=e.length,n="";i--;)(n=e[i])&&("!"===n.substr(0,1)?this.set(n.substr(1),!1):this.set(n,!0));return a.a.recycle(e),this}}),Object.defineProperty(s,"update",{value:function(t){for(var e=t.keys,i=e.length,n="",r=!1,s=!1;i--;)n=e[i],s=t.get(n),this.get(n)!==s&&(this.set(n,s),r=!0);return r}}),Object.defineProperty(s,"includes",{value:function(t){for(var e=t.keys,i=e.length,n="";i--;)if(n=e[i],this.get(n)!==t.get(n))return!1;return!0}}),Object.defineProperty(s,"intersects",{value:function(t){for(var e=t.keys,i=e.length,n="";i--;)if(n=e[i],this.get(n)===t.get(n))return!0;return!1}}),c.a.add(n,"StateMap",n,(function(){this.clear()}),!0,u.a.dev),n)},function(t,e,i){t.exports=!i(16)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,i){var n=i(17),r=i(134),s=i(56),o=Object.defineProperty;e.f=i(28)?Object.defineProperty:function(t,e,i){if(n(t),e=s(e,!0),n(i),r)try{return o(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){"use strict";var n=i(24),r=i(14),s=i(1),o=i(5),a=function(){function t(t,e){this._output=e,this._input=t}return Object.defineProperty(t.prototype,"destination",{get:function(){return this._input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters},set:function(t){var e=this;if(this._filters&&(this._filters.forEach((function(t){t&&t.disconnect()})),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();var i=null;t.forEach((function(t){null===i?e._input.connect(t.destination):i.connect(t.destination),i=t})),i.connect(this._output)}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.filters=null,this._input=null,this._output=null},t}(),h=function(){function t(t,e){this.init(t,e)}return t.prototype.init=function(t,e){this.destination=t,this.source=e||t},t.prototype.connect=function(t){this.source.connect(t)},t.prototype.disconnect=function(){this.source.disconnect()},t.prototype.destroy=function(){this.disconnect(),this.destination=null,this.source=null},t}(),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function l(t,e){function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var c,f=function(){return(f=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function d(){return c}var p,g,v,y,m=function(){function t(){}return t.setParamValue=function(t,e){if(t.setValueAtTime){var i=d().context;t.setValueAtTime(e,i.audioContext.currentTime)}else t.value=e;return e},t}(),b=0,_=function(t){function e(e){var i=t.call(this)||this;return i.id=b++,i._media=null,i._paused=!1,i._muted=!1,i._elapsed=0,i.init(e),i}return l(e,t),e.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");return this[t]=e,this},e.prototype.stop=function(){this._source&&(this._internalStop(),this.emit("stop"))},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh(),this._update(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){if(this._source){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var i=t.volume*(t.muted?0:1),n=e.volume*(e.muted?0:1),r=this._volume*(this._muted?0:1);m.setParamValue(this._gain.gain,r*n*i),m.setParamValue(this._source.playbackRate,this._speed*e.speed*t.speed)}},e.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",i))},e.prototype.play=function(t){var e=t.start,i=t.end,n=t.speed,r=t.loop,s=t.volume,o=t.muted;this._paused=!1;var a=this._media.nodes.cloneBufferSource(),h=a.source,u=a.gain;this._source=h,this._gain=u,this._speed=n,this._volume=s,this._loop=!!r,this._muted=o,this.refresh();var l=this._source.buffer.duration;this._duration=l,this._end=i,this._lastUpdate=this._now(),this._elapsed=e,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=i,this._source.loopStart=e,this._source.start(0,e)):i?this._source.start(0,e,i-e):this._source.start(0,e),this.emit("start"),this._update(!0),this._enabled=!0},e.prototype._toSec=function(t){return t>10&&(t/=1e3),t||0},Object.defineProperty(e.prototype,"_enabled",{set:function(t){r.a.shared.remove(this._updateListener,this),t&&r.a.shared.add(this._updateListener,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1},e.prototype.toString=function(){return"[WebAudioInstance id="+this.id+"]"},e.prototype._now=function(){return this._media.context.audioContext.currentTime},e.prototype._updateListener=function(){this._update()},e.prototype._update=function(t){if(void 0===t&&(t=!1),this._source){var e=this._now(),i=e-this._lastUpdate;if(i>0||t){var n=this._source.playbackRate.value;this._elapsed+=i*n,this._lastUpdate=e;var r=this._duration,s=void 0;if(this._source.loopStart){var o=this._source.loopEnd-this._source.loopStart;s=(this._source.loopStart+this._elapsed%o)/r}else s=this._elapsed%r/r;this._progress=s,this.emit("progress",this._progress,r)}}},e.prototype.init=function(t){this._media=t,t.context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)},e.prototype._internalStop=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.stop(0),this._source.disconnect(),this._source=null)},e.prototype._onComplete=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.disconnect()),this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)},e}(s.EventEmitter),w=function(t){function e(e){var i=this,n=e.audioContext,r=n.createBufferSource(),s=n.createGain(),o=n.createAnalyser();return r.connect(o),o.connect(s),s.connect(e.destination),(i=t.call(this,o,s)||this).context=e,i.bufferSource=r,i.gain=s,i.analyser=o,i}return l(e,t),Object.defineProperty(e.prototype,"script",{get:function(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(e.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null},e.prototype.cloneBufferSource=function(){var t=this.bufferSource,e=this.context.audioContext.createBufferSource();e.buffer=t.buffer,m.setParamValue(e.playbackRate,t.playbackRate.value),e.loop=t.loop;var i=this.context.audioContext.createGain();return e.connect(i),i.connect(this.destination),{source:e,gain:i}},Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this.script.bufferSize},enumerable:!0,configurable:!0}),e.BUFFER_SIZE=0,e}(a),x=function(){function t(){}return t.prototype.init=function(t){this.parent=t,this._nodes=new w(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source},t.prototype.destroy=function(){this.parent=null,this._nodes.destroy(),this._nodes=null,this._source=null,this.source=null},t.prototype.create=function(){return new _(this)},Object.defineProperty(t.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlayable",{get:function(){return!!this._source&&!!this._source.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._nodes.filters},set:function(t){this._nodes.filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._source.buffer.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this._source.buffer},set:function(t){this._source.buffer=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodes",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),t.prototype.load=function(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t&&t(new Error("sound.url or sound.source must be set"))},t.prototype._loadUrl=function(t){var e=this,i=new XMLHttpRequest,n=this.parent.url;i.open("GET",n,!0),i.responseType="arraybuffer",i.onload=function(){e.source=i.response,e._decode(i.response,t)},i.send()},t.prototype._decode=function(t,e){var i=this;this.parent.context.decode(t,(function(t,n){if(t)e&&e(t);else{i.parent.isLoaded=!0,i.buffer=n;var r=i.parent.autoPlayStart();e&&e(null,i.parent,r)}}))},t}(),E=function(t){function e(){var i=this,n=window,r=new e.AudioContext,o=r.createDynamicsCompressor(),a=r.createAnalyser();return a.connect(o),o.connect(r.destination),(i=t.call(this,a,o)||this)._ctx=r,i._offlineCtx=new e.OfflineAudioContext(1,2,n.OfflineAudioContext?r.sampleRate:44100),i._unlocked=!1,i.compressor=o,i.analyser=a,i.events=new s.EventEmitter,i.volume=1,i.speed=1,i.muted=!1,i.paused=!1,"running"!==r.state&&(i._unlock(),i._unlock=i._unlock.bind(i),document.addEventListener("mousedown",i._unlock,!0),document.addEventListener("touchstart",i._unlock,!0),document.addEventListener("touchend",i._unlock,!0)),i}return l(e,t),e.prototype._unlock=function(){this._unlocked||(this.playEmptySound(),"running"===this._ctx.state&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._unlocked=!0))},e.prototype.playEmptySound=function(){var t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0),"suspended"===t.context.state&&t.context.resume()},Object.defineProperty(e,"AudioContext",{get:function(){var t=window;return t.AudioContext||t.webkitAudioContext||null},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OfflineAudioContext",{get:function(){var t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this);var e=this._ctx;void 0!==e.close&&e.close(),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null},Object.defineProperty(e.prototype,"audioContext",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offlineContext",{get:function(){return this._offlineCtx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){t&&"running"===this._ctx.state?this._ctx.suspend():t||"suspended"!==this._ctx.state||this._ctx.resume(),this._paused=t},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){this.events.emit("refresh")},e.prototype.refreshPaused=function(){this.events.emit("refreshPaused")},e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this._paused},e.prototype.decode=function(t,e){this._offlineCtx.decodeAudioData(t,(function(t){e(null,t)}),(function(t){e(new Error(t.message||"Unable to decode file"))}))},e}(a),T={WebAudioMedia:x,WebAudioInstance:_,WebAudioNodes:w,WebAudioContext:E,WebAudioUtils:m},S={Filter:h,EqualizerFilter:function(t){function e(i,n,r,s,o,a,h,u,l,c){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===u&&(u=0),void 0===l&&(l=0),void 0===c&&(c=0);var f=this;if(!d().useLegacy){var p=[{f:e.F32,type:"lowshelf",gain:i},{f:e.F64,type:"peaking",gain:n},{f:e.F125,type:"peaking",gain:r},{f:e.F250,type:"peaking",gain:s},{f:e.F500,type:"peaking",gain:o},{f:e.F1K,type:"peaking",gain:a},{f:e.F2K,type:"peaking",gain:h},{f:e.F4K,type:"peaking",gain:u},{f:e.F8K,type:"peaking",gain:l},{f:e.F16K,type:"highshelf",gain:c}].map((function(t){var e=d().context.audioContext.createBiquadFilter();return e.type=t.type,m.setParamValue(e.Q,1),e.frequency.value=t.f,m.setParamValue(e.gain,t.gain),e}));(f=t.call(this,p[0],p[p.length-1])||this).bands=p,f.bandsMap={};for(var g=0;g<f.bands.length;g++){var v=f.bands[g];g>0&&f.bands[g-1].connect(v),f.bandsMap[v.frequency.value]=v}return f}f=t.call(this,null)||this}return l(e,t),e.prototype.setGain=function(t,e){if(void 0===e&&(e=0),!this.bandsMap[t])throw new Error("No band found for frequency "+t);m.setParamValue(this.bandsMap[t].gain,e)},e.prototype.getGain=function(t){if(!this.bandsMap[t])throw new Error("No band found for frequency "+t);return this.bandsMap[t].gain.value},Object.defineProperty(e.prototype,"f32",{get:function(){return this.getGain(e.F32)},set:function(t){this.setGain(e.F32,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f64",{get:function(){return this.getGain(e.F64)},set:function(t){this.setGain(e.F64,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f125",{get:function(){return this.getGain(e.F125)},set:function(t){this.setGain(e.F125,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f250",{get:function(){return this.getGain(e.F250)},set:function(t){this.setGain(e.F250,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f500",{get:function(){return this.getGain(e.F500)},set:function(t){this.setGain(e.F500,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f1k",{get:function(){return this.getGain(e.F1K)},set:function(t){this.setGain(e.F1K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f2k",{get:function(){return this.getGain(e.F2K)},set:function(t){this.setGain(e.F2K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f4k",{get:function(){return this.getGain(e.F4K)},set:function(t){this.setGain(e.F4K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f8k",{get:function(){return this.getGain(e.F8K)},set:function(t){this.setGain(e.F8K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f16k",{get:function(){return this.getGain(e.F16K)},set:function(t){this.setGain(e.F16K,t)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.bands.forEach((function(t){m.setParamValue(t.gain,0)}))},e.prototype.destroy=function(){this.bands.forEach((function(t){t.disconnect()})),this.bands=null,this.bandsMap=null},e.F32=32,e.F64=64,e.F125=125,e.F250=250,e.F500=500,e.F1K=1e3,e.F2K=2e3,e.F4K=4e3,e.F8K=8e3,e.F16K=16e3,e}(h),DistortionFilter:function(t){function e(e){void 0===e&&(e=0);var i=this;if(!d().useLegacy){var n=d().context.audioContext.createWaveShaper();return(i=t.call(this,n)||this)._distortion=n,i.amount=e,i}i=t.call(this,null)||this}return l(e,t),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount},set:function(t){t*=1e3,this._amount=t;for(var e,i=new Float32Array(44100),n=Math.PI/180,r=0;r<44100;++r)e=2*r/44100-1,i[r]=(3+t)*e*20*n/(Math.PI+t*Math.abs(e));this._distortion.curve=i,this._distortion.oversample="4x"},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._distortion=null,t.prototype.destroy.call(this)},e}(h),StereoFilter:function(t){function e(e){void 0===e&&(e=0);var i=this;if(!d().useLegacy){var n,r,s,o=d().context.audioContext;return o.createStereoPanner?s=n=o.createStereoPanner():((r=o.createPanner()).panningModel="equalpower",s=r),(i=t.call(this,s)||this)._stereo=n,i._panner=r,i.pan=e,i}i=t.call(this,null)||this}return l(e,t),Object.defineProperty(e.prototype,"pan",{get:function(){return this._pan},set:function(t){this._pan=t,this._stereo?m.setParamValue(this._stereo.pan,t):this._panner.setPosition(t,0,1-Math.abs(t))},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this._stereo=null,this._panner=null},e}(h),ReverbFilter:function(t){function e(e,i,n){void 0===e&&(e=3),void 0===i&&(i=2),void 0===n&&(n=!1);var r=this;if(!d().useLegacy)return(r=t.call(this,null)||this)._seconds=r._clamp(e,1,50),r._decay=r._clamp(i,0,100),r._reverse=n,r._rebuild(),r;r=t.call(this,null)||this}return l(e,t),e.prototype._clamp=function(t,e,i){return Math.min(i,Math.max(e,t))},Object.defineProperty(e.prototype,"seconds",{get:function(){return this._seconds},set:function(t){this._seconds=this._clamp(t,1,50),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decay",{get:function(){return this._decay},set:function(t){this._decay=this._clamp(t,0,100),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._reverse},set:function(t){this._reverse=t,this._rebuild()},enumerable:!0,configurable:!0}),e.prototype._rebuild=function(){for(var t,e=d().context.audioContext,i=e.sampleRate,n=i*this._seconds,r=e.createBuffer(2,n,i),s=r.getChannelData(0),o=r.getChannelData(1),a=0;a<n;a++)t=this._reverse?n-a:a,s[a]=(2*Math.random()-1)*Math.pow(1-t/n,this._decay),o[a]=(2*Math.random()-1)*Math.pow(1-t/n,this._decay);var h=d().context.audioContext.createConvolver();h.buffer=r,this.init(h)},e}(h),MonoFilter:function(t){function e(){var e=this;if(!d().useLegacy){var i=d().context.audioContext,n=i.createChannelSplitter(),r=i.createChannelMerger();return r.connect(n),(e=t.call(this,r,n)||this)._merger=r,e}e=t.call(this,null)||this}return l(e,t),e.prototype.destroy=function(){this._merger.disconnect(),this._merger=null,t.prototype.destroy.call(this)},e}(h),TelephoneFilter:function(t){function e(){if(!d().useLegacy){var e=d().context.audioContext,i=e.createBiquadFilter(),n=e.createBiquadFilter(),r=e.createBiquadFilter(),s=e.createBiquadFilter();return i.type="lowpass",m.setParamValue(i.frequency,2e3),n.type="lowpass",m.setParamValue(n.frequency,2e3),r.type="highpass",m.setParamValue(r.frequency,500),s.type="highpass",m.setParamValue(s.frequency,500),i.connect(n),n.connect(r),r.connect(s),t.call(this,i,s)||this}t.call(this,null)}return l(e,t),e}(h)},O=0,A=function(t){function e(e){var i=t.call(this)||this;return i.id=O++,i.init(e),i}return l(e,t),e.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");return this[t]=e,this},Object.defineProperty(e.prototype,"progress",{get:function(){return this._source.currentTime/this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),e.prototype._onPlay=function(){this._playing=!0},e.prototype._onPause=function(){this._playing=!1},e.prototype.init=function(t){this._playing=!1,this._duration=t.source.duration;var e=this._source=t.source.cloneNode(!1);e.src=t.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),t.context.on("refresh",this.refresh,this),t.context.on("refreshPaused",this.refreshPaused,this),this._media=t},e.prototype._internalStop=function(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())},e.prototype.stop=function(){this._internalStop(),this._source&&this.emit("stop")},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var i=t.volume*(t.muted?0:1),n=e.volume*(e.muted?0:1),r=this._volume*(this._muted?0:1);this._source.volume=r*i*n,this._source.playbackRate=this._speed*t.speed*e.speed},e.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",i))},e.prototype.play=function(t){var i=this,n=t.start,s=t.end,o=t.speed,a=t.loop,h=t.volume,u=t.muted;this._speed=o,this._volume=h,this._loop=!!a,this._muted=u,this.refresh(),this.loop&&null!==s&&(this.loop=!1),this._start=n,this._end=s||this._duration,this._start=Math.max(0,this._start-e.PADDING),this._end=Math.min(this._end+e.PADDING,this._duration),this._source.onloadedmetadata=function(){i._source&&(i._source.currentTime=n,i._source.onloadedmetadata=null,i.emit("progress",n,i._duration),r.a.shared.add(i._onUpdate,i))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")},e.prototype._onUpdate=function(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()},e.prototype._onComplete=function(){r.a.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)},e.prototype.destroy=function(){r.a.shared.remove(this._onUpdate,this),this.removeAllListeners();var t=this._source;t&&(t.onended=null,t.onplay=null,t.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)},e.prototype.toString=function(){return"[HTMLAudioInstance id="+this.id+"]"},e.PADDING=.1,e}(s.EventEmitter),P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.init=function(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)},e.prototype.create=function(){return new A(this)},Object.defineProperty(e.prototype,"isPlayable",{get:function(){return!!this._source&&4===this._source.readyState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._source.duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)},Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),e.prototype.load=function(t){var e=this._source,i=this.parent;if(4!==e.readyState){if(!i.url)return t(new Error("sound.url or sound.source must be set"));e.src=i.url;var n=function(){e.removeEventListener("canplaythrough",r),e.removeEventListener("load",r),e.removeEventListener("abort",s),e.removeEventListener("error",o)},r=function(){n(),i.isLoaded=!0;var e=i.autoPlayStart();t&&t(null,i,e)},s=function(){n(),t&&t(new Error("Sound loading has been aborted"))},o=function(){n();var i="Failed to load audio element (code: "+e.error.code+")";t&&t(new Error(i))};e.addEventListener("canplaythrough",r,!1),e.addEventListener("load",r,!1),e.addEventListener("abort",s,!1),e.addEventListener("error",o,!1),e.load()}else{i.isLoaded=!0;var a=i.autoPlayStart();t&&setTimeout((function(){t(null,i,a)}),0)}},e}(s.EventEmitter),C=function(t){function e(){var e=t.call(this)||this;return e.speed=1,e.volume=1,e.muted=!1,e.paused=!1,e}return l(e,t),e.prototype.refresh=function(){this.emit("refresh")},e.prototype.refreshPaused=function(){this.emit("refreshPaused")},Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioContext",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this.paused},e.prototype.destroy=function(){this.removeAllListeners()},e}(s.EventEmitter),M={HTMLAudioMedia:P,HTMLAudioInstance:A,HTMLAudioContext:C},k=["mp3","ogg","oga","opus","mpeg","wav","m4a","aiff","wma","mid"],I=(p={m4a:"mp4",oga:"ogg"},g=document.createElement("audio"),v={},y=/^no$/,k.forEach((function(t){var e=p[t]||t,i=g.canPlayType("audio/"+t).replace(y,""),n=g.canPlayType("audio/"+e).replace(y,"");v[t]=!!i||!!n})),Object.freeze(v)),L=/\.(\{([^\}]+)\})(\?.*)?$/;function D(t){var e=L,i="string"==typeof t?t:t.url;if(e.test(i)){for(var n=e.exec(i),r=n[2].split(","),s=r[r.length-1],o=0,a=r.length;o<a;o++){var h=r[o];if(I[h]){s=h;break}}var u=i.replace(n[1],s);return"string"!=typeof t&&(t.extension=s,t.url=u),u}return i}var R,U=function(){function t(){}return t.add=function(){t.legacy=d().useLegacy},Object.defineProperty(t,"legacy",{set:function(t){var e=k;t?e.forEach((function(t){n.c.setExtensionXhrType(t,n.c.XHR_RESPONSE_TYPE.DEFAULT),n.c.setExtensionLoadType(t,n.c.LOAD_TYPE.AUDIO)})):e.forEach((function(t){n.c.setExtensionXhrType(t,n.c.XHR_RESPONSE_TYPE.BUFFER),n.c.setExtensionLoadType(t,n.c.LOAD_TYPE.XHR)}))},enumerable:!0,configurable:!0}),t.pre=function(t,e){D(t),e()},t.use=function(t,e){t.data&&k.indexOf(t.extension)>-1?t.sound=d().add(t.name,{loaded:e,preload:!0,url:t.url,source:t.data}):e()},t}(),F=function(){function t(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start}return t.prototype.play=function(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})},t.prototype.destroy=function(){this.parent=null},t}(),N=function(){function t(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);var i=e.complete;this._autoPlayOptions=i?{complete:i}:null,this.isLoaded=!1,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}return t.from=function(e){var i={};return"string"==typeof e?i.url=e:e instanceof ArrayBuffer||e instanceof HTMLAudioElement?i.source=e:i=e,(i=f({autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1},i)).url&&(i.url=D(i.url)),Object.freeze(i),new t(d().useLegacy?new P:new x,i)},Object.defineProperty(t.prototype,"context",{get:function(){return d().context},enumerable:!0,configurable:!0}),t.prototype.pause=function(){return this.isPlaying=!1,this.paused=!0,this},t.prototype.resume=function(){return this.isPlaying=this._instances.length>0,this.paused=!1,this},Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this.media.filters},set:function(t){this.media.filters=t},enumerable:!0,configurable:!0}),t.prototype.addSprites=function(t,e){if("object"==typeof t){var i={};for(var n in t)i[n]=this.addSprites(n,t[n]);return i}if("string"==typeof t){var r=new F(this,e);return this._sprites[t]=r,r}},t.prototype.destroy=function(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null},t.prototype.removeSprites=function(t){if(t){var e=this._sprites[t];void 0!==e&&(e.destroy(),delete this._sprites[t])}else for(var i in this._sprites)this.removeSprites(i);return this},Object.defineProperty(t.prototype,"isPlayable",{get:function(){return this.isLoaded&&this.media&&this.media.isPlayable},enumerable:!0,configurable:!0}),t.prototype.stop=function(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(var t=this._instances.length-1;t>=0;t--)this._instances[t].stop();return this},t.prototype.play=function(t,e){var i,n=this;if("string"==typeof t?i={sprite:s=t,loop:this.loop,complete:e}:"function"==typeof t?(i={}).complete=t:i=t,(i=f({complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1},i||{})).sprite){var r=i.sprite,s=this._sprites[r];i.start=s.start,i.end=s.end,i.speed=s.speed||1,i.loop=s.loop||i.loop,delete i.sprite}if(i.offset&&(i.start=i.offset),!this.isLoaded)return new Promise((function(t,e){n.autoPlay=!0,n._autoPlayOptions=i,n._preload((function(n,r,s){n?e(n):(i.loaded&&i.loaded(n,r,s),t(s))}))}));this.singleInstance&&this._removeInstances();var o=this._createInstance();return this._instances.push(o),this.isPlaying=!0,o.once("end",(function(){i.complete&&i.complete(n),n._onComplete(o)})),o.once("stop",(function(){n._onComplete(o)})),o.play(i),o},t.prototype.refresh=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refresh()},t.prototype.refreshPaused=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refreshPaused()},Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),t.prototype._preload=function(t){this.media.load(t)},Object.defineProperty(t.prototype,"instances",{get:function(){return this._instances},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sprites",{get:function(){return this._sprites},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.media.duration},enumerable:!0,configurable:!0}),t.prototype.autoPlayStart=function(){var t;return this.autoPlay&&(t=this.play(this._autoPlayOptions)),t},t.prototype._removeInstances=function(){for(var t=this._instances.length-1;t>=0;t--)this._poolInstance(this._instances[t]);this._instances.length=0},t.prototype._onComplete=function(t){if(this._instances){var e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1),this.isPlaying=this._instances.length>0}this._poolInstance(t)},t.prototype._createInstance=function(){if(t._pool.length>0){var e=t._pool.pop();return e.init(this.media),e}return this.media.create()},t.prototype._poolInstance=function(e){e.destroy(),t._pool.indexOf(e)<0&&t._pool.push(e)},t._pool=[],t}(),j=function(){function t(){this.init()}return t.prototype.init=function(){return this.supported&&(this._webAudioContext=new E),this._htmlAudioContext=new C,this._sounds={},this.useLegacy=!this.supported,this},Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filtersAll",{get:function(){return this.useLegacy?[]:this._context.filters},set:function(t){this.useLegacy||(this._context.filters=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supported",{get:function(){return null!==E.AudioContext},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){if("object"==typeof t){var i={};for(var n in t){var r=this._getOptions(t[n],e);i[n]=this.add(n,r)}return i}if("string"==typeof t){if(e instanceof N)return this._sounds[t]=e,e;r=this._getOptions(e);var s=N.from(r);return this._sounds[t]=s,s}},t.prototype._getOptions=function(t,e){var i;return i="string"==typeof t?{url:t}:t instanceof ArrayBuffer||t instanceof HTMLAudioElement?{source:t}:t,f({},i,e||{})},Object.defineProperty(t.prototype,"useLegacy",{get:function(){return this._useLegacy},set:function(t){U.legacy=t,this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext},enumerable:!0,configurable:!0}),t.prototype.remove=function(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this},Object.defineProperty(t.prototype,"volumeAll",{get:function(){return this._context.volume},set:function(t){this._context.volume=t,this._context.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speedAll",{get:function(){return this._context.speed},set:function(t){this._context.speed=t,this._context.refresh()},enumerable:!0,configurable:!0}),t.prototype.togglePauseAll=function(){return this._context.togglePause()},t.prototype.pauseAll=function(){return this._context.paused=!0,this._context.refreshPaused(),this},t.prototype.resumeAll=function(){return this._context.paused=!1,this._context.refreshPaused(),this},t.prototype.toggleMuteAll=function(){return this._context.toggleMute()},t.prototype.muteAll=function(){return this._context.muted=!0,this._context.refresh(),this},t.prototype.unmuteAll=function(){return this._context.muted=!1,this._context.refresh(),this},t.prototype.removeAll=function(){for(var t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this},t.prototype.stopAll=function(){for(var t in this._sounds)this._sounds[t].stop();return this},t.prototype.exists=function(t,e){return void 0===e&&(e=!1),!!this._sounds[t]},t.prototype.find=function(t){return this.exists(t,!0),this._sounds[t]},t.prototype.play=function(t,e){return this.find(t).play(e)},t.prototype.stop=function(t){return this.find(t).stop()},t.prototype.pause=function(t){return this.find(t).pause()},t.prototype.resume=function(t){return this.find(t).resume()},t.prototype.volume=function(t,e){var i=this.find(t);return void 0!==e&&(i.volume=e),i.volume},t.prototype.speed=function(t,e){var i=this.find(t);return void 0!==e&&(i.speed=e),i.speed},t.prototype.duration=function(t){return this.find(t).duration},t.prototype.close=function(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this},t}(),B=0,z={get PLAY_ID(){return B},playOnce:function(t,e){var i="alias"+B++;return d().add(i,{url:t,preload:!0,autoPlay:!0,loaded:function(t){t&&(d().remove(i),e&&e(t))},complete:function(){d().remove(i),e&&e(null)}}),i},render:function(t,e){var i=document.createElement("canvas");e=f({width:512,height:128,fill:"black"},e||{}),i.width=e.width,i.height=e.height;var n=o.a.from(i);if(!(t.media instanceof x))return n;var r=t.media,s=i.getContext("2d");s.fillStyle=e.fill;for(var a=r.buffer.getChannelData(0),h=Math.ceil(a.length/e.width),u=e.height/2,l=0;l<e.width;l++){for(var c=1,d=-1,p=0;p<h;p++){var g=a[l*h+p];g<c&&(c=g),g>d&&(d=g)}s.fillRect(l,(1+c)*u,1,Math.max(1,(d-c)*u))}return n},resolveUrl:D,sineTone:function(t,e){void 0===t&&(t=200),void 0===e&&(e=1);var i=N.from({singleInstance:!0});if(!(i.media instanceof x))return i;for(var n=i.media,r=i.context.audioContext.createBuffer(1,48e3*e,48e3),s=r.getChannelData(0),o=0;o<s.length;o++){var a=t*(o/r.sampleRate)*Math.PI;s[o]=2*Math.sin(a)}return n.buffer=r,i.isLoaded=!0,i},extensions:k,supported:I},X=(R=new j,c=R,R);n.b.registerPlugin(U),Object.defineProperties(X,{Filterable:{get:function(){return a}},filters:{get:function(){return S}},htmlaudio:{get:function(){return M}},Sound:{get:function(){return N}},SoundLibrary:{get:function(){return j}},SoundSprite:{get:function(){return F}},utils:{get:function(){return z}},webaudio:{get:function(){return T}},sound:{get:function(){return X}}}),e.a=X},function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));
/*!
 * @pixi/runner - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var n=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,i,n,r,s,o,a){if(arguments.length>8)throw new Error("max arguments reached");var h=this,u=h.name,l=h.items;this._aliasCount++;for(var c=0,f=l.length;c<f;c++)l[c][u](t,e,i,n,r,s,o,a);return l===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t}();Object.defineProperties(n.prototype,{dispatch:{value:n.prototype.emit},run:{value:n.prototype.emit}})},function(t,e,i){var n=i(53);t.exports=function(t){return Object(n(t))}},function(t,e,i){var n=i(15),r=i(37),s=i(36),o=i(60)("src"),a=i(250),h=(""+a).split("toString");i(26).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,i,a){var u="function"==typeof i;u&&(s(i,"name")||r(i,"name",e)),t[e]!==i&&(u&&(s(i,o)||r(i,o,t[e]?""+t[e]:h.join(String(e)))),t===n?t[e]=i:a?t[e]?t[e]=i:r(t,e,i):(delete t[e],r(t,e,i)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[o]||a.call(this)}))},function(t,e,i){var n=i(6),r=i(16),s=i(53),o=/"/g,a=function(t,e,i,n){var r=String(s(t)),a="<"+e;return""!==i&&(a+=" "+i+'="'+String(n).replace(o,"&quot;")+'"'),a+">"+r+"</"+e+">"};t.exports=function(t,e){var i={};i[t]=e(a),n(n.P+n.F*r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",i)}},function(t,e,i){"use strict";function n(t,e){return t(e={exports:{}},e.exports),e.exports}i.d(e,"c",(function(){return Co})),i.d(e,"f",(function(){return zo})),i.d(e,"d",(function(){return Yo})),i.d(e,"a",(function(){return Vo})),i.d(e,"b",(function(){return Zo})),i.d(e,"e",(function(){return ta}));var r=n((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),s=n((function(t){var e=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=e)})),o=(s.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),a=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t},h=function(t){try{return!!t()}catch(t){return!0}},u=!h((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),l=r.document,c=o(l)&&o(l.createElement),f=function(t){return c?l.createElement(t):{}},d=!u&&!h((function(){return 7!=Object.defineProperty(f("div"),"a",{get:function(){return 7}}).a})),p=function(t,e){if(!o(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!o(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!o(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!o(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")},g=Object.defineProperty,v={f:u?Object.defineProperty:function(t,e,i){if(a(t),e=p(e,!0),a(i),d)try{return g(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},y=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},m=u?function(t,e,i){return v.f(t,e,y(1,i))}:function(t,e,i){return t[e]=i,t},b={}.hasOwnProperty,_=function(t,e){return b.call(t,e)},w=0,x=Math.random(),E=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++w+x).toString(36))},T=n((function(t){var e=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,i){return e[t]||(e[t]=void 0!==i?i:{})})("versions",[]).push({version:s.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),S=T("native-function-to-string",Function.toString),O=n((function(t){var e=E("src"),i=(""+S).split("toString");s.inspectSource=function(t){return S.call(t)},(t.exports=function(t,n,s,o){var a="function"==typeof s;a&&(_(s,"name")||m(s,"name",n)),t[n]!==s&&(a&&(_(s,e)||m(s,e,t[n]?""+t[n]:i.join(String(n)))),t===r?t[n]=s:o?t[n]?t[n]=s:m(t,n,s):(delete t[n],m(t,n,s)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[e]||S.call(this)}))})),A=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},P=function(t,e,i){if(A(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}},C=function(t,e,i){var n,o,a,h,u=t&C.F,l=t&C.G,c=t&C.S,f=t&C.P,d=t&C.B,p=l?r:c?r[e]||(r[e]={}):(r[e]||{}).prototype,g=l?s:s[e]||(s[e]={}),v=g.prototype||(g.prototype={});for(n in l&&(i=e),i)a=((o=!u&&p&&void 0!==p[n])?p:i)[n],h=d&&o?P(a,r):f&&"function"==typeof a?P(Function.call,a):a,p&&O(p,n,a,t&C.U),g[n]!=a&&m(g,n,h),f&&v[n]!=a&&(v[n]=a)};r.core=s,C.F=1,C.G=2,C.S=4,C.P=8,C.B=16,C.W=32,C.U=64,C.R=128;var M=C,k=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},I=function(t){return Object(k(t))},L=Math.ceil,D=Math.floor,R=function(t){return isNaN(t=+t)?0:(t>0?D:L)(t)},U=Math.max,F=Math.min,N=function(t,e){return(t=R(t))<0?U(t+e,0):F(t,e)},j=Math.min,B=function(t){return t>0?j(R(t),9007199254740991):0},z=[].copyWithin||function(t,e){var i=I(this),n=B(i.length),r=N(t,n),s=N(e,n),o=arguments.length>2?arguments[2]:void 0,a=Math.min((void 0===o?n:N(o,n))-s,n-r),h=1;for(s<r&&r<s+a&&(h=-1,s+=a-1,r+=a-1);a-- >0;)s in i?i[r]=i[s]:delete i[r],r+=h,s+=h;return i},X=n((function(t){var e=T("wks"),i=r.Symbol,n="function"==typeof i;(t.exports=function(t){return e[t]||(e[t]=n&&i[t]||(n?i:E)("Symbol."+t))}).store=e})),Y=X("unscopables"),H=Array.prototype;null==H[Y]&&m(H,Y,{});var G=function(t){H[Y][t]=!0};M(M.P,"Array",{copyWithin:z}),G("copyWithin");var V=function(t){for(var e=I(this),i=B(e.length),n=arguments.length,r=N(n>1?arguments[1]:void 0,i),s=n>2?arguments[2]:void 0,o=void 0===s?i:N(s,i);o>r;)e[r++]=t;return e};M(M.P,"Array",{fill:V}),G("fill");var W={}.toString,q=function(t){return W.call(t).slice(8,-1)},K=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==q(t)?t.split(""):Object(t)},Z=Array.isArray||function(t){return"Array"==q(t)},J=X("species"),Q=function(t,e){return new(function(t){var e;return Z(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Z(e.prototype)||(e=void 0),o(e)&&null===(e=e[J])&&(e=void 0)),void 0===e?Array:e}(t))(e)},$=function(t,e){var i=1==t,n=2==t,r=3==t,s=4==t,o=6==t,a=5==t||o,h=e||Q;return function(e,u,l){for(var c,f,d=I(e),p=K(d),g=P(u,l,3),v=B(p.length),y=0,m=i?h(e,v):n?h(e,0):void 0;v>y;y++)if((a||y in p)&&(f=g(c=p[y],y,d),t))if(i)m[y]=f;else if(f)switch(t){case 3:return!0;case 5:return c;case 6:return y;case 2:m.push(c)}else if(s)return!1;return o?-1:r||s?s:m}},tt=$(5),et=!0;"find"in[]&&Array(1).find((function(){et=!1})),M(M.P+M.F*et,"Array",{find:function(t){return tt(this,t,arguments.length>1?arguments[1]:void 0)}}),G("find");var it=$(6),nt=!0;"findIndex"in[]&&Array(1).findIndex((function(){nt=!1})),M(M.P+M.F*nt,"Array",{findIndex:function(t){return it(this,t,arguments.length>1?arguments[1]:void 0)}}),G("findIndex");var rt=X("isConcatSpreadable");var st=function t(e,i,n,r,s,a,h,u){for(var l,c,f=s,d=0,p=!!h&&P(h,u,3);d<r;){if(d in n){if(l=p?p(n[d],d,i):n[d],c=!1,o(l)&&(c=void 0!==(c=l[rt])?!!c:Z(l)),c&&a>0)f=t(e,i,l,B(l.length),f,a-1)-1;else{if(f>=9007199254740991)throw TypeError();e[f]=l}f++}d++}return f};M(M.P,"Array",{flatMap:function(t){var e,i,n=I(this);return A(t),e=B(n.length),i=Q(n,0),st(i,n,n,e,0,1,t,arguments[1]),i}}),G("flatMap");var ot=function(t,e,i,n){try{return n?e(a(i)[0],i[1]):e(i)}catch(e){var r=t.return;throw void 0!==r&&a(r.call(t)),e}},at={},ht=X("iterator"),ut=Array.prototype,lt=function(t){return void 0!==t&&(at.Array===t||ut[ht]===t)},ct=function(t,e,i){e in t?v.f(t,e,y(0,i)):t[e]=i},ft=X("toStringTag"),dt="Arguments"==q(function(){return arguments}()),pt=function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ft))?i:dt?q(e):"Object"==(n=q(e))&&"function"==typeof e.callee?"Arguments":n},gt=X("iterator"),vt=s.getIteratorMethod=function(t){if(null!=t)return t[gt]||t["@@iterator"]||at[pt(t)]},yt=X("iterator"),mt=!1;try{[7][yt]().return=function(){mt=!0}}catch(fr){}var bt=function(t,e){if(!e&&!mt)return!1;var i=!1;try{var n=[7],r=n[yt]();r.next=function(){return{done:i=!0}},n[yt]=function(){return r},t(n)}catch(t){}return i};M(M.S+M.F*!bt((function(t){})),"Array",{from:function(t){var e,i,n,r,s=I(t),o="function"==typeof this?this:Array,a=arguments.length,h=a>1?arguments[1]:void 0,u=void 0!==h,l=0,c=vt(s);if(u&&(h=P(h,a>2?arguments[2]:void 0,2)),null==c||o==Array&&lt(c))for(i=new o(e=B(s.length));e>l;l++)ct(i,l,u?h(s[l],l):s[l]);else for(r=c.call(s),i=new o;!(n=r.next()).done;l++)ct(i,l,u?ot(r,h,[n.value,l],!0):n.value);return i.length=l,i}});var _t=function(t){return K(k(t))},wt=function(t){return function(e,i,n){var r,s=_t(e),o=B(s.length),a=N(n,o);if(t&&i!=i){for(;o>a;)if((r=s[a++])!=r)return!0}else for(;o>a;a++)if((t||a in s)&&s[a]===i)return t||a||0;return!t&&-1}},xt=wt(!0);M(M.P,"Array",{includes:function(t){return xt(this,t,arguments.length>1?arguments[1]:void 0)}}),G("includes");var Et=function(t,e){return{value:e,done:!!t}},Tt=T("keys"),St=function(t){return Tt[t]||(Tt[t]=E(t))},Ot=wt(!1),At=St("IE_PROTO"),Pt=function(t,e){var i,n=_t(t),r=0,s=[];for(i in n)i!=At&&_(n,i)&&s.push(i);for(;e.length>r;)_(n,i=e[r++])&&(~Ot(s,i)||s.push(i));return s},Ct="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Mt=Object.keys||function(t){return Pt(t,Ct)},kt=u?Object.defineProperties:function(t,e){a(t);for(var i,n=Mt(e),r=n.length,s=0;r>s;)v.f(t,i=n[s++],e[i]);return t},It=r.document,Lt=It&&It.documentElement,Dt=St("IE_PROTO"),Rt=function(){},Ut=function(){var t,e=f("iframe"),i=Ct.length;for(e.style.display="none",Lt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Ut=t.F;i--;)delete Ut.prototype[Ct[i]];return Ut()},Ft=Object.create||function(t,e){var i;return null!==t?(Rt.prototype=a(t),i=new Rt,Rt.prototype=null,i[Dt]=t):i=Ut(),void 0===e?i:kt(i,e)},Nt=v.f,jt=X("toStringTag"),Bt=function(t,e,i){t&&!_(t=i?t:t.prototype,jt)&&Nt(t,jt,{configurable:!0,value:e})},zt={};m(zt,X("iterator"),(function(){return this}));var Xt=St("IE_PROTO"),Yt=Object.prototype,Ht=Object.getPrototypeOf||function(t){return t=I(t),_(t,Xt)?t[Xt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Yt:null},Gt=X("iterator"),Vt=!([].keys&&"next"in[].keys()),Wt=function(){return this},qt=function(t,e,i,n,r,s,o){!function(t,e,i){t.prototype=Ft(zt,{next:y(1,i)}),Bt(t,e+" Iterator")}(i,e,n);var a,h,u,l=function(t){if(!Vt&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},c=e+" Iterator",f="values"==r,d=!1,p=t.prototype,g=p[Gt]||p["@@iterator"]||r&&p[r],v=g||l(r),b=r?f?l("entries"):v:void 0,_="Array"==e&&p.entries||g;if(_&&(u=Ht(_.call(new t)))!==Object.prototype&&u.next&&(Bt(u,c,!0),"function"==typeof u[Gt]||m(u,Gt,Wt)),f&&g&&"values"!==g.name&&(d=!0,v=function(){return g.call(this)}),!Vt&&!d&&p[Gt]||m(p,Gt,v),at[e]=v,at[c]=Wt,r)if(a={values:f?v:l("values"),keys:s?v:l("keys"),entries:b},o)for(h in a)h in p||O(p,h,a[h]);else M(M.P+M.F*(Vt||d),e,a);return a},Kt=qt(Array,"Array",(function(t,e){this._t=_t(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,Et(1)):Et(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])}),"values");at.Arguments=at.Array,G("keys"),G("values"),G("entries"),M(M.S+M.F*h((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,i=new("function"==typeof this?this:Array)(e);e>t;)ct(i,t,arguments[t++]);return i.length=e,i}});var Zt=X("species"),Jt=function(t){var e=r[t];u&&e&&!e[Zt]&&v.f(e,Zt,{configurable:!0,get:function(){return this}})};Jt("Array");var Qt=X("toPrimitive"),$t=Date.prototype;Qt in $t||m($t,Qt,(function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return p(a(this),"number"!=t)}));var te=X("hasInstance"),ee=Function.prototype;te in ee||v.f(ee,te,{value:function(t){if("function"!=typeof this||!o(t))return!1;if(!o(this.prototype))return t instanceof this;for(;t=Ht(t);)if(this.prototype===t)return!0;return!1}});var ie=v.f,ne=Function.prototype,re=/^\s*function ([^ (]*)/;"name"in ne||u&&ie(ne,"name",{configurable:!0,get:function(){try{return(""+this).match(re)[1]}catch(t){return""}}});var se=function(t,e,i){for(var n in e)O(t,n,e[n],i);return t},oe=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t},ae=n((function(t){var e={},i={},n=t.exports=function(t,n,r,s,o){var h,u,l,c,f=o?function(){return t}:vt(t),d=P(r,s,n?2:1),p=0;if("function"!=typeof f)throw TypeError(t+" is not iterable!");if(lt(f)){for(h=B(t.length);h>p;p++)if((c=n?d(a(u=t[p])[0],u[1]):d(t[p]))===e||c===i)return c}else for(l=f.call(t);!(u=l.next()).done;)if((c=ot(l,d,u.value,n))===e||c===i)return c};n.BREAK=e,n.RETURN=i})),he=n((function(t){var e=E("meta"),i=v.f,n=0,r=Object.isExtensible||function(){return!0},s=!h((function(){return r(Object.preventExtensions({}))})),a=function(t){i(t,e,{value:{i:"O"+ ++n,w:{}}})},u=t.exports={KEY:e,NEED:!1,fastKey:function(t,i){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!_(t,e)){if(!r(t))return"F";if(!i)return"E";a(t)}return t[e].i},getWeak:function(t,i){if(!_(t,e)){if(!r(t))return!0;if(!i)return!1;a(t)}return t[e].w},onFreeze:function(t){return s&&u.NEED&&r(t)&&!_(t,e)&&a(t),t}}})),ue=(he.KEY,he.NEED,he.fastKey,he.getWeak,he.onFreeze,function(t,e){if(!o(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}),le=v.f,ce=he.fastKey,fe=u?"_s":"size",de=function(t,e){var i,n=ce(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i},pe={getConstructor:function(t,e,i,n){var r=t((function(t,s){oe(t,r,e,"_i"),t._t=e,t._i=Ft(null),t._f=void 0,t._l=void 0,t[fe]=0,null!=s&&ae(s,i,t[n],t)}));return se(r.prototype,{clear:function(){for(var t=ue(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[fe]=0},delete:function(t){var i=ue(this,e),n=de(i,t);if(n){var r=n.n,s=n.p;delete i._i[n.i],n.r=!0,s&&(s.n=r),r&&(r.p=s),i._f==n&&(i._f=r),i._l==n&&(i._l=s),i[fe]--}return!!n},forEach:function(t){ue(this,e);for(var i,n=P(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!de(ue(this,e),t)}}),u&&le(r.prototype,"size",{get:function(){return ue(this,e)[fe]}}),r},def:function(t,e,i){var n,r,s=de(t,e);return s?s.v=i:(t._l=s={i:r=ce(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=s),n&&(n.n=s),t[fe]++,"F"!==r&&(t._i[r]=s)),t},getEntry:de,setStrong:function(t,e,i){qt(t,e,(function(t,i){this._t=ue(t,e),this._k=i,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?Et(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,Et(1))}),i?"entries":"values",!i,!0),Jt(e)}},ge={f:{}.propertyIsEnumerable},ve=Object.getOwnPropertyDescriptor,ye={f:u?ve:function(t,e){if(t=_t(t),e=p(e,!0),d)try{return ve(t,e)}catch(t){}if(_(t,e))return y(!ge.f.call(t,e),t[e])}},me=function(t,e){if(a(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},be={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=P(Function.call,ye.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return me(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:me},_e=be.set,we=function(t,e,i){var n,r=e.constructor;return r!==i&&"function"==typeof r&&(n=r.prototype)!==i.prototype&&o(n)&&_e&&_e(t,n),t},xe=function(t,e,i,n,s,a){var u=r[t],l=u,c=s?"set":"add",f=l&&l.prototype,d={},p=function(t){var e=f[t];O(f,t,"delete"==t?function(t){return!(a&&!o(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(a&&!o(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return a&&!o(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,i){return e.call(this,0===t?0:t,i),this})};if("function"==typeof l&&(a||f.forEach&&!h((function(){(new l).entries().next()})))){var g=new l,v=g[c](a?{}:-0,1)!=g,y=h((function(){g.has(1)})),m=bt((function(t){new l(t)})),b=!a&&h((function(){for(var t=new l,e=5;e--;)t[c](e,e);return!t.has(-0)}));m||((l=e((function(e,i){oe(e,l,t);var n=we(new u,e,l);return null!=i&&ae(i,s,n[c],n),n}))).prototype=f,f.constructor=l),(y||b)&&(p("delete"),p("has"),s&&p("get")),(b||v)&&p(c),a&&f.clear&&delete f.clear}else l=n.getConstructor(e,t,s,c),se(l.prototype,i),he.NEED=!0;return Bt(l,t),d[t]=l,M(M.G+M.W+M.F*(l!=u),d),a||n.setStrong(l,t,s),l},Ee=(xe("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=pe.getEntry(ue(this,"Map"),t);return e&&e.v},set:function(t,e){return pe.def(ue(this,"Map"),0===t?0:t,e)}},pe,!0),Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}),Te=Math.sqrt,Se=Math.acosh;M(M.S+M.F*!(Se&&710==Math.floor(Se(Number.MAX_VALUE))&&Se(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:Ee(t-1+Te(t-1)*Te(t+1))}});var Oe=Math.asinh;M(M.S+M.F*!(Oe&&1/Oe(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}});var Ae=Math.atanh;M(M.S+M.F*!(Ae&&1/Ae(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}});var Pe=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1};M(M.S,"Math",{cbrt:function(t){return Pe(t=+t)*Math.pow(Math.abs(t),1/3)}}),M(M.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}});var Ce=Math.exp;M(M.S,"Math",{cosh:function(t){return(Ce(t=+t)+Ce(-t))/2}});var Me=Math.expm1,ke=!Me||Me(10)>22025.465794806718||Me(10)<22025.465794806718||-2e-17!=Me(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:Me;M(M.S+M.F*(ke!=Math.expm1),"Math",{expm1:ke});var Ie=Math.pow,Le=Ie(2,-52),De=Ie(2,-23),Re=Ie(2,127)*(2-De),Ue=Ie(2,-126),Fe=Math.fround||function(t){var e,i,n=Math.abs(t),r=Pe(t);return n<Ue?r*function(t){return t+1/Le-1/Le}(n/Ue/De)*Ue*De:(i=(e=(1+De/Le)*n)-(e-n))>Re||i!=i?r*(1/0):r*i};M(M.S,"Math",{fround:Fe});var Ne=Math.abs;M(M.S,"Math",{hypot:function(t,e){for(var i,n,r=0,s=0,o=arguments.length,a=0;s<o;)a<(i=Ne(arguments[s++]))?(r=r*(n=a/i)*n+1,a=i):r+=i>0?(n=i/a)*n:i;return a===1/0?1/0:a*Math.sqrt(r)}});var je=Math.imul;M(M.S+M.F*h((function(){return-5!=je(4294967295,5)||2!=je.length})),"Math",{imul:function(t,e){var i=+t,n=+e,r=65535&i,s=65535&n;return 0|r*s+((65535&i>>>16)*s+r*(65535&n>>>16)<<16>>>0)}}),M(M.S,"Math",{log1p:Ee}),M(M.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}}),M(M.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}}),M(M.S,"Math",{sign:Pe});var Be=Math.exp;M(M.S+M.F*h((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(ke(t)-ke(-t))/2:(Be(t-1)-Be(-t-1))*(Math.E/2)}});var ze=Math.exp;M(M.S,"Math",{tanh:function(t){var e=ke(t=+t),i=ke(-t);return e==1/0?1:i==1/0?-1:(e-i)/(ze(t)+ze(-t))}}),M(M.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}});var Xe=Ct.concat("length","prototype"),Ye={f:Object.getOwnPropertyNames||function(t){return Pt(t,Xe)}},He="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Ge="["+He+"]",Ve=RegExp("^"+Ge+Ge+"*"),We=RegExp(Ge+Ge+"*$"),qe=function(t,e,i){var n={},r=h((function(){return!!He[t]()||"​"!="​"[t]()})),s=n[t]=r?e(Ke):He[t];i&&(n[i]=s),M(M.P+M.F*r,"String",n)},Ke=qe.trim=function(t,e){return t=String(k(t)),1&e&&(t=t.replace(Ve,"")),2&e&&(t=t.replace(We,"")),t},Ze=qe,Je=Ye.f,Qe=ye.f,$e=v.f,ti=Ze.trim,ei=r.Number,ii=ei,ni=ei.prototype,ri="Number"==q(Ft(ni)),si="trim"in String.prototype,oi=function(t){var e=p(t,!1);if("string"==typeof e&&e.length>2){var i,n,r,s=(e=si?e.trim():ti(e,3)).charCodeAt(0);if(43===s||45===s){if(88===(i=e.charCodeAt(2))||120===i)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+e}for(var o,a=e.slice(2),h=0,u=a.length;h<u;h++)if((o=a.charCodeAt(h))<48||o>r)return NaN;return parseInt(a,n)}}return+e};if(!ei(" 0o1")||!ei("0b1")||ei("+0x1")){ei=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof ei&&(ri?h((function(){ni.valueOf.call(i)})):"Number"!=q(i))?we(new ii(oi(e)),i,ei):oi(e)};for(var ai,hi=u?Je(ii):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),ui=0;hi.length>ui;ui++)_(ii,ai=hi[ui])&&!_(ei,ai)&&$e(ei,ai,Qe(ii,ai));ei.prototype=ni,ni.constructor=ei,O(r,"Number",ei)}M(M.S,"Number",{EPSILON:Math.pow(2,-52)});var li=r.isFinite;M(M.S,"Number",{isFinite:function(t){return"number"==typeof t&&li(t)}});var ci=Math.floor,fi=function(t){return!o(t)&&isFinite(t)&&ci(t)===t};M(M.S,"Number",{isInteger:fi}),M(M.S,"Number",{isNaN:function(t){return t!=t}});var di=Math.abs;M(M.S,"Number",{isSafeInteger:function(t){return fi(t)&&di(t)<=9007199254740991}}),M(M.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),M(M.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991});var pi=r.parseFloat,gi=Ze.trim,vi=1/pi(He+"-0")!=-1/0?function(t){var e=gi(String(t),3),i=pi(e);return 0===i&&"-"==e.charAt(0)?-0:i}:pi;M(M.S+M.F*(Number.parseFloat!=vi),"Number",{parseFloat:vi});var yi=r.parseInt,mi=Ze.trim,bi=/^[-+]?0[xX]/,_i=8!==yi(He+"08")||22!==yi(He+"0x16")?function(t,e){var i=mi(String(t),3);return yi(i,e>>>0||(bi.test(i)?16:10))}:yi;M(M.S+M.F*(Number.parseInt!=_i),"Number",{parseInt:_i});var wi={f:Object.getOwnPropertySymbols},xi=Object.assign,Ei=!xi||h((function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach((function(t){e[t]=t})),7!=xi({},t)[i]||Object.keys(xi({},e)).join("")!=n}))?function(t,e){for(var i=I(t),n=arguments.length,r=1,s=wi.f,o=ge.f;n>r;)for(var a,h=K(arguments[r++]),l=s?Mt(h).concat(s(h)):Mt(h),c=l.length,f=0;c>f;)a=l[f++],u&&!o.call(h,a)||(i[a]=h[a]);return i}:xi;M(M.S+M.F,"Object",{assign:Ei});var Ti=!h((function(){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete r[t]}));u&&M(M.P+Ti,"Object",{__defineGetter__:function(t,e){v.f(I(this),t,{get:A(e),enumerable:!0,configurable:!0})}}),u&&M(M.P+Ti,"Object",{__defineSetter__:function(t,e){v.f(I(this),t,{set:A(e),enumerable:!0,configurable:!0})}});var Si=ge.f,Oi=function(t){return function(e){for(var i,n=_t(e),r=Mt(n),s=r.length,o=0,a=[];s>o;)i=r[o++],u&&!Si.call(n,i)||a.push(t?[i,n[i]]:n[i]);return a}},Ai=Oi(!0);M(M.S,"Object",{entries:function(t){return Ai(t)}});var Pi=function(t,e){var i=(s.Object||{})[t]||Object[t],n={};n[t]=e(i),M(M.S+M.F*h((function(){i(1)})),"Object",n)},Ci=he.onFreeze;Pi("freeze",(function(t){return function(e){return t&&o(e)?t(Ci(e)):e}}));var Mi=ye.f;Pi("getOwnPropertyDescriptor",(function(){return function(t,e){return Mi(_t(t),e)}}));var ki=r.Reflect,Ii=ki&&ki.ownKeys||function(t){var e=Ye.f(a(t)),i=wi.f;return i?e.concat(i(t)):e};M(M.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,i,n=_t(t),r=ye.f,s=Ii(n),o={},a=0;s.length>a;)void 0!==(i=r(n,e=s[a++]))&&ct(o,e,i);return o}});var Li=Ye.f,Di={}.toString,Ri="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ui={f:function(t){return Ri&&"[object Window]"==Di.call(t)?function(t){try{return Li(t)}catch(t){return Ri.slice()}}(t):Li(_t(t))}};Pi("getOwnPropertyNames",(function(){return Ui.f})),Pi("getPrototypeOf",(function(){return function(t){return Ht(I(t))}}));var Fi=ye.f;u&&M(M.P+Ti,"Object",{__lookupGetter__:function(t){var e,i=I(this),n=p(t,!0);do{if(e=Fi(i,n))return e.get}while(i=Ht(i))}});var Ni=ye.f;u&&M(M.P+Ti,"Object",{__lookupSetter__:function(t){var e,i=I(this),n=p(t,!0);do{if(e=Ni(i,n))return e.set}while(i=Ht(i))}});var ji=he.onFreeze;Pi("preventExtensions",(function(t){return function(e){return t&&o(e)?t(ji(e)):e}}));var Bi={};Bi[X("toStringTag")]="z",Bi+""!="[object z]"&&O(Object.prototype,"toString",(function(){return"[object "+pt(this)+"]"}),!0);var zi=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};M(M.S,"Object",{is:zi}),Pi("isFrozen",(function(t){return function(e){return!o(e)||!!t&&t(e)}})),Pi("isSealed",(function(t){return function(e){return!o(e)||!!t&&t(e)}})),Pi("isExtensible",(function(t){return function(e){return!!o(e)&&(!t||t(e))}})),Pi("keys",(function(){return function(t){return Mt(I(t))}}));var Xi=he.onFreeze;Pi("seal",(function(t){return function(e){return t&&o(e)?t(Xi(e)):e}}));var Yi=Oi(!1);M(M.S,"Object",{values:function(t){return Yi(t)}});var Hi,Gi,Vi,Wi=X("species"),qi=function(t,e){var i,n=a(t).constructor;return void 0===n||null==(i=a(n)[Wi])?e:A(i)},Ki=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)},Zi=r.process,Ji=r.setImmediate,Qi=r.clearImmediate,$i=r.MessageChannel,tn=r.Dispatch,en=0,nn={},rn=function(){var t=+this;if(nn.hasOwnProperty(t)){var e=nn[t];delete nn[t],e()}},sn=function(t){rn.call(t.data)};Ji&&Qi||(Ji=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return nn[++en]=function(){Ki("function"==typeof t?t:Function(t),e)},Hi(en),en},Qi=function(t){delete nn[t]},"process"==q(Zi)?Hi=function(t){Zi.nextTick(P(rn,t,1))}:tn&&tn.now?Hi=function(t){tn.now(P(rn,t,1))}:$i?(Vi=(Gi=new $i).port2,Gi.port1.onmessage=sn,Hi=P(Vi.postMessage,Vi,1)):r.addEventListener&&"function"==typeof postMessage&&!r.importScripts?(Hi=function(t){r.postMessage(t+"","*")},r.addEventListener("message",sn,!1)):Hi="onreadystatechange"in f("script")?function(t){Lt.appendChild(f("script")).onreadystatechange=function(){Lt.removeChild(this),rn.call(t)}}:function(t){setTimeout(P(rn,t,1),0)});var on={set:Ji,clear:Qi},an=on.set,hn=r.MutationObserver||r.WebKitMutationObserver,un=r.process,ln=r.Promise,cn="process"==q(un);function fn(t){var e,i;this.promise=new t((function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n})),this.resolve=A(e),this.reject=A(i)}var dn,pn,gn,vn,yn={f:function(t){return new fn(t)}},mn=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},bn=r.navigator,_n=bn&&bn.userAgent||"",wn=function(t,e){if(a(t),o(e)&&e.constructor===t)return e;var i=yn.f(t);return(0,i.resolve)(e),i.promise},xn=on.set,En=function(){var t,e,i,n=function(){var n,r;for(cn&&(n=un.domain)&&n.exit();t;){r=t.fn,t=t.next;try{r()}catch(n){throw t?i():e=void 0,n}}e=void 0,n&&n.enter()};if(cn)i=function(){un.nextTick(n)};else if(!hn||r.navigator&&r.navigator.standalone)if(ln&&ln.resolve){var s=ln.resolve(void 0);i=function(){s.then(n)}}else i=function(){an.call(r,n)};else{var o=!0,a=document.createTextNode("");new hn(n).observe(a,{characterData:!0}),i=function(){a.data=o=!o}}return function(n){var r={fn:n,next:void 0};e&&(e.next=r),t||(t=r,i()),e=r}}(),Tn=r.TypeError,Sn=r.process,On=Sn&&Sn.versions,An=On&&On.v8||"",Pn=r.Promise,Cn="process"==pt(Sn),Mn=function(){},kn=pn=yn.f,In=!!function(){try{var t=Pn.resolve(1),e=(t.constructor={})[X("species")]=function(t){t(Mn,Mn)};return(Cn||"function"==typeof PromiseRejectionEvent)&&t.then(Mn)instanceof e&&0!==An.indexOf("6.6")&&-1===_n.indexOf("Chrome/66")}catch(t){}}(),Ln=function(t){var e;return!(!o(t)||"function"!=typeof(e=t.then))&&e},Dn=function(t,e){if(!t._n){t._n=!0;var i=t._c;En((function(){for(var n=t._v,r=1==t._s,s=0,o=function(e){var i,s,o,a=r?e.ok:e.fail,h=e.resolve,u=e.reject,l=e.domain;try{a?(r||(2==t._h&&Fn(t),t._h=1),!0===a?i=n:(l&&l.enter(),i=a(n),l&&(l.exit(),o=!0)),i===e.promise?u(Tn("Promise-chain cycle")):(s=Ln(i))?s.call(i,h,u):h(i)):u(n)}catch(t){l&&!o&&l.exit(),u(t)}};i.length>s;)o(i[s++]);t._c=[],t._n=!1,e&&!t._h&&Rn(t)}))}},Rn=function(t){xn.call(r,(function(){var e,i,n,s=t._v,o=Un(t);if(o&&(e=mn((function(){Cn?Sn.emit("unhandledRejection",s,t):(i=r.onunhandledrejection)?i({promise:t,reason:s}):(n=r.console)&&n.error&&n.error("Unhandled promise rejection",s)})),t._h=Cn||Un(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},Un=function(t){return 1!==t._h&&0===(t._a||t._c).length},Fn=function(t){xn.call(r,(function(){var e;Cn?Sn.emit("rejectionHandled",t):(e=r.onrejectionhandled)&&e({promise:t,reason:t._v})}))},Nn=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Dn(e,!0))},jn=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw Tn("Promise can't be resolved itself");(e=Ln(t))?En((function(){var n={_w:i,_d:!1};try{e.call(t,P(jn,n,1),P(Nn,n,1))}catch(t){Nn.call(n,t)}})):(i._v=t,i._s=1,Dn(i,!1))}catch(t){Nn.call({_w:i,_d:!1},t)}}};In||(Pn=function(t){oe(this,Pn,"Promise","_h"),A(t),dn.call(this);try{t(P(jn,this,1),P(Nn,this,1))}catch(t){Nn.call(this,t)}},(dn=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=se(Pn.prototype,{then:function(t,e){var i=kn(qi(this,Pn));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=Cn?Sn.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&Dn(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),gn=function(){var t=new dn;this.promise=t,this.resolve=P(jn,t,1),this.reject=P(Nn,t,1)},yn.f=kn=function(t){return t===Pn||t===vn?new gn(t):pn(t)}),M(M.G+M.W+M.F*!In,{Promise:Pn}),Bt(Pn,"Promise"),Jt("Promise"),vn=s.Promise,M(M.S+M.F*!In,"Promise",{reject:function(t){var e=kn(this);return(0,e.reject)(t),e.promise}}),M(M.S+M.F*!In,"Promise",{resolve:function(t){return wn(this,t)}}),M(M.S+M.F*!(In&&bt((function(t){Pn.all(t).catch(Mn)}))),"Promise",{all:function(t){var e=this,i=kn(e),n=i.resolve,r=i.reject,s=mn((function(){var i=[],s=0,o=1;ae(t,!1,(function(t){var a=s++,h=!1;i.push(void 0),o++,e.resolve(t).then((function(t){h||(h=!0,i[a]=t,--o||n(i))}),r)})),--o||n(i)}));return s.e&&r(s.v),i.promise},race:function(t){var e=this,i=kn(e),n=i.reject,r=mn((function(){ae(t,!1,(function(t){e.resolve(t).then(i.resolve,n)}))}));return r.e&&n(r.v),i.promise}}),M(M.P+M.R,"Promise",{finally:function(t){var e=qi(this,s.Promise||r.Promise),i="function"==typeof t;return this.then(i?function(i){return wn(e,t()).then((function(){return i}))}:t,i?function(i){return wn(e,t()).then((function(){throw i}))}:t)}});var Bn=(r.Reflect||{}).apply,zn=Function.apply;M(M.S+M.F*!h((function(){Bn((function(){}))})),"Reflect",{apply:function(t,e,i){var n=A(t),r=a(i);return Bn?Bn(n,e,r):zn.call(n,e,r)}});var Xn=[].slice,Yn={},Hn=function(t,e,i){if(!(e in Yn)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";Yn[e]=Function("F,a","return new F("+n.join(",")+")")}return Yn[e](t,i)},Gn=Function.bind||function(t){var e=A(this),i=Xn.call(arguments,1),n=function(){var r=i.concat(Xn.call(arguments));return this instanceof n?Hn(e,r.length,r):Ki(e,r,t)};return o(e.prototype)&&(n.prototype=e.prototype),n},Vn=(r.Reflect||{}).construct,Wn=h((function(){function t(){}return!(Vn((function(){}),[],t)instanceof t)})),qn=!h((function(){Vn((function(){}))}));M(M.S+M.F*(Wn||qn),"Reflect",{construct:function(t,e){A(t),a(e);var i=arguments.length<3?t:A(arguments[2]);if(qn&&!Wn)return Vn(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(Gn.apply(t,n))}var r=i.prototype,s=Ft(o(r)?r:Object.prototype),h=Function.apply.call(t,s,e);return o(h)?h:s}}),M(M.S+M.F*h((function(){Reflect.defineProperty(v.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,i){a(t),e=p(e,!0),a(i);try{return v.f(t,e,i),!0}catch(t){return!1}}});var Kn=ye.f;M(M.S,"Reflect",{deleteProperty:function(t,e){var i=Kn(a(t),e);return!(i&&!i.configurable)&&delete t[e]}}),M(M.S,"Reflect",{get:function t(e,i){var n,r,s=arguments.length<3?e:arguments[2];return a(e)===s?e[i]:(n=ye.f(e,i))?_(n,"value")?n.value:void 0!==n.get?n.get.call(s):void 0:o(r=Ht(e))?t(r,i,s):void 0}}),M(M.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return ye.f(a(t),e)}}),M(M.S,"Reflect",{getPrototypeOf:function(t){return Ht(a(t))}}),M(M.S,"Reflect",{has:function(t,e){return e in t}});var Zn=Object.isExtensible;M(M.S,"Reflect",{isExtensible:function(t){return a(t),!Zn||Zn(t)}}),M(M.S,"Reflect",{ownKeys:Ii});var Jn=Object.preventExtensions;M(M.S,"Reflect",{preventExtensions:function(t){a(t);try{return Jn&&Jn(t),!0}catch(t){return!1}}}),M(M.S,"Reflect",{set:function t(e,i,n){var r,s,h=arguments.length<4?e:arguments[3],u=ye.f(a(e),i);if(!u){if(o(s=Ht(e)))return t(s,i,n,h);u=y(0)}if(_(u,"value")){if(!1===u.writable||!o(h))return!1;if(r=ye.f(h,i)){if(r.get||r.set||!1===r.writable)return!1;r.value=n,v.f(h,i,r)}else v.f(h,i,y(0,n));return!0}return void 0!==u.set&&(u.set.call(h,n),!0)}}),be&&M(M.S,"Reflect",{setPrototypeOf:function(t,e){be.check(t,e);try{return be.set(t,e),!0}catch(t){return!1}}});var Qn=X("match"),$n=function(t){var e;return o(t)&&(void 0!==(e=t[Qn])?!!e:"RegExp"==q(t))},tr=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},er=v.f,ir=Ye.f,nr=r.RegExp,rr=nr,sr=nr.prototype,or=/a/g,ar=/a/g,hr=new nr(or)!==or;if(u&&(!hr||h((function(){return ar[X("match")]=!1,nr(or)!=or||nr(ar)==ar||"/a/i"!=nr(or,"i")})))){nr=function(t,e){var i=this instanceof nr,n=$n(t),r=void 0===e;return!i&&n&&t.constructor===nr&&r?t:we(hr?new rr(n&&!r?t.source:t,e):rr((n=t instanceof nr)?t.source:t,n&&r?tr.call(t):e),i?this:sr,nr)};for(var ur=function(t){t in nr||er(nr,t,{configurable:!0,get:function(){return rr[t]},set:function(e){rr[t]=e}})},lr=ir(rr),cr=0;lr.length>cr;)ur(lr[cr++]);sr.constructor=nr,nr.prototype=sr,O(r,"RegExp",nr)}Jt("RegExp"),u&&"g"!=/./g.flags&&v.f(RegExp.prototype,"flags",{configurable:!0,get:tr});var fr,dr,pr=function(t){return function(e,i){var n,r,s=String(k(e)),o=R(i),a=s.length;return o<0||o>=a?t?"":void 0:(n=s.charCodeAt(o))<55296||n>56319||o+1===a||(r=s.charCodeAt(o+1))<56320||r>57343?t?s.charAt(o):n:t?s.slice(o,o+2):r-56320+(n-55296<<10)+65536}},gr=pr(!0),vr=function(t,e,i){return e+(i?gr(t,e).length:1)},yr=RegExp.prototype.exec,mr=function(t,e){var i=t.exec;if("function"==typeof i){var n=i.call(t,e);if("object"!=typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==pt(t))throw new TypeError("RegExp#exec called on incompatible receiver");return yr.call(t,e)},br=RegExp.prototype.exec,_r=String.prototype.replace,wr=br,xr=(fr=/a/,dr=/b*/g,br.call(fr,"a"),br.call(dr,"a"),0!==fr.lastIndex||0!==dr.lastIndex),Er=void 0!==/()??/.exec("")[1];(xr||Er)&&(wr=function(t){var e,i,n,r,s=this;return Er&&(i=new RegExp("^"+s.source+"$(?!\\s)",tr.call(s))),xr&&(e=s.lastIndex),n=br.call(s,t),xr&&n&&(s.lastIndex=s.global?n.index+n[0].length:e),Er&&n&&n.length>1&&_r.call(n[0],i,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)})),n});var Tr=wr;M({target:"RegExp",proto:!0,forced:Tr!==/./.exec},{exec:Tr});var Sr=X("species"),Or=!h((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),Ar=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}(),Pr=function(t,e,i){var n=X(t),r=!h((function(){var e={};return e[n]=function(){return 7},7!=""[t](e)})),s=r?!h((function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[Sr]=function(){return i}),i[n](""),!e})):void 0;if(!r||!s||"replace"===t&&!Or||"split"===t&&!Ar){var o=/./[n],a=i(k,n,""[t],(function(t,e,i,n,s){return e.exec===Tr?r&&!s?{done:!0,value:o.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}})),u=a[0],l=a[1];O(String.prototype,t,u),m(RegExp.prototype,n,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)})}};Pr("match",1,(function(t,e,i,n){return[function(i){var n=t(this),r=null==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},function(t){var e=n(i,t,this);if(e.done)return e.value;var r=a(t),s=String(this);if(!r.global)return mr(r,s);var o=r.unicode;r.lastIndex=0;for(var h,u=[],l=0;null!==(h=mr(r,s));){var c=String(h[0]);u[l]=c,""===c&&(r.lastIndex=vr(s,B(r.lastIndex),o)),l++}return 0===l?null:u}]}));var Cr=Math.max,Mr=Math.min,kr=Math.floor,Ir=/\$([$&`']|\d\d?|<[^>]*>)/g,Lr=/\$([$&`']|\d\d?)/g,Dr=function(t){return void 0===t?t:String(t)};Pr("replace",2,(function(t,e,i,n){return[function(n,r){var s=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,s,r):i.call(String(s),n,r)},function(t,e){var s=n(i,t,this,e);if(s.done)return s.value;var o=a(t),h=String(this),u="function"==typeof e;u||(e=String(e));var l=o.global;if(l){var c=o.unicode;o.lastIndex=0}for(var f=[];;){var d=mr(o,h);if(null===d)break;if(f.push(d),!l)break;""===String(d[0])&&(o.lastIndex=vr(h,B(o.lastIndex),c))}for(var p="",g=0,v=0;v<f.length;v++){d=f[v];for(var y=String(d[0]),m=Cr(Mr(R(d.index),h.length),0),b=[],_=1;_<d.length;_++)b.push(Dr(d[_]));var w=d.groups;if(u){var x=[y].concat(b,m,h);void 0!==w&&x.push(w);var E=String(e.apply(void 0,x))}else E=r(y,h,m,b,w,e);m>=g&&(p+=h.slice(g,m)+E,g=m+y.length)}return p+h.slice(g)}];function r(t,e,n,r,s,o){var a=n+t.length,h=r.length,u=Lr;return void 0!==s&&(s=I(s),u=Ir),i.call(o,u,(function(i,o){var u;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(a);case"<":u=s[o.slice(1,-1)];break;default:var l=+o;if(0===l)return i;if(l>h){var c=kr(l/10);return 0===c?i:c<=h?void 0===r[c-1]?o.charAt(1):r[c-1]+o.charAt(1):i}u=r[l-1]}return void 0===u?"":u}))}}));var Rr=Math.min,Ur=[].push,Fr=!h((function(){}));Pr("split",2,(function(t,e,i,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!$n(t))return i.call(n,t,e);for(var r,s,o,a=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,l=void 0===e?4294967295:e>>>0,c=new RegExp(t.source,h+"g");(r=Tr.call(c,n))&&!((s=c.lastIndex)>u&&(a.push(n.slice(u,r.index)),r.length>1&&r.index<n.length&&Ur.apply(a,r.slice(1)),o=r[0].length,u=s,a.length>=l));)c.lastIndex===r.index&&c.lastIndex++;return u===n.length?!o&&c.test("")||a.push(""):a.push(n.slice(u)),a.length>l?a.slice(0,l):a}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,n){var s=t(this),o=null==i?void 0:i[e];return void 0!==o?o.call(i,s,n):r.call(String(s),i,n)},function(t,e){var s=n(r,t,this,e,r!==i);if(s.done)return s.value;var o=a(t),h=String(this),u=qi(o,RegExp),l=o.unicode,c=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(Fr?"y":"g"),f=new u(Fr?o:"^(?:"+o.source+")",c),d=void 0===e?4294967295:e>>>0;if(0===d)return[];if(0===h.length)return null===mr(f,h)?[h]:[];for(var p=0,g=0,v=[];g<h.length;){f.lastIndex=Fr?g:0;var y,m=mr(f,Fr?h:h.slice(g));if(null===m||(y=Rr(B(f.lastIndex+(Fr?0:g)),h.length))===p)g=vr(h,g,l);else{if(v.push(h.slice(p,g)),v.length===d)return v;for(var b=1;b<=m.length-1;b++)if(v.push(m[b]),v.length===d)return v;g=p=y}}return v.push(h.slice(p)),v}]})),Pr("search",1,(function(t,e,i,n){return[function(i){var n=t(this),r=null==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},function(t){var e=n(i,t,this);if(e.done)return e.value;var r=a(t),s=String(this),o=r.lastIndex;zi(o,0)||(r.lastIndex=0);var h=mr(r,s);return zi(r.lastIndex,o)||(r.lastIndex=o),null===h?-1:h.index}]}));var Nr=/./.toString,jr=function(t){O(RegExp.prototype,"toString",t,!0)};h((function(){return"/a/b"!=Nr.call({source:"a",flags:"b"})}))?jr((function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!u&&t instanceof RegExp?tr.call(t):void 0)})):"toString"!=Nr.name&&jr((function(){return Nr.call(this)}));xe("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return pe.def(ue(this,"Set"),t=0===t?0:t,t)}},pe);var Br={f:X},zr=v.f,Xr=function(t){var e=s.Symbol||(s.Symbol=r.Symbol||{});"_"==t.charAt(0)||t in e||zr(e,t,{value:Br.f(t)})},Yr=he.KEY,Hr=ye.f,Gr=v.f,Vr=Ui.f,Wr=r.Symbol,qr=r.JSON,Kr=qr&&qr.stringify,Zr=X("_hidden"),Jr=X("toPrimitive"),Qr={}.propertyIsEnumerable,$r=T("symbol-registry"),ts=T("symbols"),es=T("op-symbols"),is=Object.prototype,ns="function"==typeof Wr&&!!wi.f,rs=r.QObject,ss=!rs||!rs.prototype||!rs.prototype.findChild,os=u&&h((function(){return 7!=Ft(Gr({},"a",{get:function(){return Gr(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=Hr(is,e);n&&delete is[e],Gr(t,e,i),n&&t!==is&&Gr(is,e,n)}:Gr,as=function(t){var e=ts[t]=Ft(Wr.prototype);return e._k=t,e},hs=ns&&"symbol"==typeof Wr.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Wr},us=function(t,e,i){return t===is&&us(es,e,i),a(t),e=p(e,!0),a(i),_(ts,e)?(i.enumerable?(_(t,Zr)&&t[Zr][e]&&(t[Zr][e]=!1),i=Ft(i,{enumerable:y(0,!1)})):(_(t,Zr)||Gr(t,Zr,y(1,{})),t[Zr][e]=!0),os(t,e,i)):Gr(t,e,i)},ls=function(t,e){a(t);for(var i,n=function(t){var e=Mt(t),i=wi.f;if(i)for(var n,r=i(t),s=ge.f,o=0;r.length>o;)s.call(t,n=r[o++])&&e.push(n);return e}(e=_t(e)),r=0,s=n.length;s>r;)us(t,i=n[r++],e[i]);return t},cs=function(t){var e=Qr.call(this,t=p(t,!0));return!(this===is&&_(ts,t)&&!_(es,t))&&(!(e||!_(this,t)||!_(ts,t)||_(this,Zr)&&this[Zr][t])||e)},fs=function(t,e){if(t=_t(t),e=p(e,!0),t!==is||!_(ts,e)||_(es,e)){var i=Hr(t,e);return!i||!_(ts,e)||_(t,Zr)&&t[Zr][e]||(i.enumerable=!0),i}},ds=function(t){for(var e,i=Vr(_t(t)),n=[],r=0;i.length>r;)_(ts,e=i[r++])||e==Zr||e==Yr||n.push(e);return n},ps=function(t){for(var e,i=t===is,n=Vr(i?es:_t(t)),r=[],s=0;n.length>s;)!_(ts,e=n[s++])||i&&!_(is,e)||r.push(ts[e]);return r};ns||(O((Wr=function(){if(this instanceof Wr)throw TypeError("Symbol is not a constructor!");var t=E(arguments.length>0?arguments[0]:void 0),e=function(i){this===is&&e.call(es,i),_(this,Zr)&&_(this[Zr],t)&&(this[Zr][t]=!1),os(this,t,y(1,i))};return u&&ss&&os(is,t,{configurable:!0,set:e}),as(t)}).prototype,"toString",(function(){return this._k})),ye.f=fs,v.f=us,Ye.f=Ui.f=ds,ge.f=cs,wi.f=ps,u&&O(is,"propertyIsEnumerable",cs,!0),Br.f=function(t){return as(X(t))}),M(M.G+M.W+M.F*!ns,{Symbol:Wr});for(var gs="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),vs=0;gs.length>vs;)X(gs[vs++]);for(var ys=Mt(X.store),ms=0;ys.length>ms;)Xr(ys[ms++]);M(M.S+M.F*!ns,"Symbol",{for:function(t){return _($r,t+="")?$r[t]:$r[t]=Wr(t)},keyFor:function(t){if(!hs(t))throw TypeError(t+" is not a symbol!");for(var e in $r)if($r[e]===t)return e},useSetter:function(){ss=!0},useSimple:function(){ss=!1}}),M(M.S+M.F*!ns,"Object",{create:function(t,e){return void 0===e?Ft(t):ls(Ft(t),e)},defineProperty:us,defineProperties:ls,getOwnPropertyDescriptor:fs,getOwnPropertyNames:ds,getOwnPropertySymbols:ps});var bs=h((function(){wi.f(1)}));M(M.S+M.F*bs,"Object",{getOwnPropertySymbols:function(t){return wi.f(I(t))}}),qr&&M(M.S+M.F*(!ns||h((function(){var t=Wr();return"[null]"!=Kr([t])||"{}"!=Kr({a:t})||"{}"!=Kr(Object(t))}))),"JSON",{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(o(e)||void 0!==t)&&!hs(t))return Z(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!hs(e))return e}),n[1]=e,Kr.apply(qr,n)}}),Wr.prototype[Jr]||m(Wr.prototype,Jr,Wr.prototype.valueOf),Bt(Wr,"Symbol"),Bt(Math,"Math",!0),Bt(r.JSON,"JSON",!0),Xr("asyncIterator");var _s=/"/g,ws=function(t,e,i,n){var r=String(k(t)),s="<"+e;return""!==i&&(s+=" "+i+'="'+String(n).replace(_s,"&quot;")+'"'),s+">"+r+"</"+e+">"},xs=function(t,e){var i={};i[t]=e(ws),M(M.P+M.F*h((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",i)};xs("anchor",(function(t){return function(e){return t(this,"a","name",e)}})),xs("big",(function(t){return function(){return t(this,"big","","")}})),xs("blink",(function(t){return function(){return t(this,"blink","","")}})),xs("bold",(function(t){return function(){return t(this,"b","","")}}));var Es=pr(!1);M(M.P,"String",{codePointAt:function(t){return Es(this,t)}});var Ts=function(t,e,i){if($n(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(k(t))},Ss=X("match"),Os=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[Ss]=!1,!"/./"[t](e)}catch(t){}}return!0},As="".endsWith;M(M.P+M.F*Os("endsWith"),"String",{endsWith:function(t){var e=Ts(this,t,"endsWith"),i=arguments.length>1?arguments[1]:void 0,n=B(e.length),r=void 0===i?n:Math.min(B(i),n),s=String(t);return As?As.call(e,s,r):e.slice(r-s.length,r)===s}}),xs("fixed",(function(t){return function(){return t(this,"tt","","")}})),xs("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}})),xs("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}));var Ps=String.fromCharCode,Cs=String.fromCodePoint;M(M.S+M.F*(!!Cs&&1!=Cs.length),"String",{fromCodePoint:function(t){for(var e,i=[],n=arguments.length,r=0;n>r;){if(e=+arguments[r++],N(e,1114111)!==e)throw RangeError(e+" is not a valid code point");i.push(e<65536?Ps(e):Ps(55296+((e-=65536)>>10),e%1024+56320))}return i.join("")}});M(M.P+M.F*Os("includes"),"String",{includes:function(t){return!!~Ts(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}}),xs("italics",(function(t){return function(){return t(this,"i","","")}}));var Ms=pr(!0);qt(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=Ms(e,i),this._i+=t.length,{value:t,done:!1})})),xs("link",(function(t){return function(e){return t(this,"a","href",e)}}));var ks=function(t){var e=String(k(this)),i="",n=R(t);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(i+=e);return i},Is=function(t,e,i,n){var r=String(k(t)),s=r.length,o=void 0===i?" ":String(i),a=B(e);if(a<=s||""==o)return r;var h=a-s,u=ks.call(o,Math.ceil(h/o.length));return u.length>h&&(u=u.slice(0,h)),n?u+r:r+u},Ls=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(_n);M(M.P+M.F*Ls,"String",{padStart:function(t){return Is(this,t,arguments.length>1?arguments[1]:void 0,!0)}});var Ds=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(_n);M(M.P+M.F*Ds,"String",{padEnd:function(t){return Is(this,t,arguments.length>1?arguments[1]:void 0,!1)}}),M(M.S,"String",{raw:function(t){for(var e=_t(t.raw),i=B(e.length),n=arguments.length,r=[],s=0;i>s;)r.push(String(e[s++])),s<n&&r.push(String(arguments[s]));return r.join("")}}),M(M.P,"String",{repeat:ks}),xs("small",(function(t){return function(){return t(this,"small","","")}}));var Rs="".startsWith;M(M.P+M.F*Os("startsWith"),"String",{startsWith:function(t){var e=Ts(this,t,"startsWith"),i=B(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return Rs?Rs.call(e,n,i):e.slice(i,i+n.length)===n}}),xs("strike",(function(t){return function(){return t(this,"strike","","")}})),xs("sub",(function(t){return function(){return t(this,"sub","","")}})),xs("sup",(function(t){return function(){return t(this,"sup","","")}})),Ze("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart"),Ze("trimRight",(function(t){return function(){return t(this,2)}}),"trimEnd");for(var Us,Fs=E("typed_array"),Ns=E("view"),js=!(!r.ArrayBuffer||!r.DataView),Bs=js,zs=0,Xs="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");zs<9;)(Us=r[Xs[zs++]])?(m(Us.prototype,Fs,!0),m(Us.prototype,Ns,!0)):Bs=!1;var Ys={ABV:js,CONSTR:Bs,TYPED:Fs,VIEW:Ns},Hs=function(t){if(void 0===t)return 0;var e=R(t),i=B(e);if(e!==i)throw RangeError("Wrong length!");return i},Gs=n((function(t,e){var i=Ye.f,n=v.f,s="prototype",o="Wrong index!",a=r.ArrayBuffer,l=r.DataView,c=r.Math,f=r.RangeError,d=r.Infinity,p=a,g=c.abs,y=c.pow,b=c.floor,_=c.log,w=c.LN2,x=u?"_b":"buffer",E=u?"_l":"byteLength",T=u?"_o":"byteOffset";function S(t,e,i){var n,r,s,o=new Array(i),a=8*i-e-1,h=(1<<a)-1,u=h>>1,l=23===e?y(2,-24)-y(2,-77):0,c=0,f=t<0||0===t&&1/t<0?1:0;for((t=g(t))!=t||t===d?(r=t!=t?1:0,n=h):(n=b(_(t)/w),t*(s=y(2,-n))<1&&(n--,s*=2),(t+=n+u>=1?l/s:l*y(2,1-u))*s>=2&&(n++,s/=2),n+u>=h?(r=0,n=h):n+u>=1?(r=(t*s-1)*y(2,e),n+=u):(r=t*y(2,u-1)*y(2,e),n=0));e>=8;o[c++]=255&r,r/=256,e-=8);for(n=n<<e|r,a+=e;a>0;o[c++]=255&n,n/=256,a-=8);return o[--c]|=128*f,o}function O(t,e,i){var n,r=8*i-e-1,s=(1<<r)-1,o=s>>1,a=r-7,h=i-1,u=t[h--],l=127&u;for(u>>=7;a>0;l=256*l+t[h],h--,a-=8);for(n=l&(1<<-a)-1,l>>=-a,a+=e;a>0;n=256*n+t[h],h--,a-=8);if(0===l)l=1-o;else{if(l===s)return n?NaN:u?-d:d;n+=y(2,e),l-=o}return(u?-1:1)*n*y(2,l-e)}function A(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function P(t){return[255&t]}function C(t){return[255&t,t>>8&255]}function M(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function k(t){return S(t,52,8)}function I(t){return S(t,23,4)}function L(t,e,i){n(t[s],e,{get:function(){return this[i]}})}function D(t,e,i,n){var r=Hs(+i);if(r+e>t[E])throw f(o);var s=t[x]._b,a=r+t[T],h=s.slice(a,a+e);return n?h:h.reverse()}function U(t,e,i,n,r,s){var a=Hs(+i);if(a+e>t[E])throw f(o);for(var h=t[x]._b,u=a+t[T],l=n(+r),c=0;c<e;c++)h[u+c]=l[s?c:e-c-1]}if(Ys.ABV){if(!h((function(){a(1)}))||!h((function(){new a(-1)}))||h((function(){return new a,new a(1.5),new a(NaN),"ArrayBuffer"!=a.name}))){for(var F,N=(a=function(t){return oe(this,a),new p(Hs(t))})[s]=p[s],j=i(p),z=0;j.length>z;)(F=j[z++])in a||m(a,F,p[F]);N.constructor=a}var X=new l(new a(2)),Y=l[s].setInt8;X.setInt8(0,2147483648),X.setInt8(1,2147483649),!X.getInt8(0)&&X.getInt8(1)||se(l[s],{setInt8:function(t,e){Y.call(this,t,e<<24>>24)},setUint8:function(t,e){Y.call(this,t,e<<24>>24)}},!0)}else a=function(t){oe(this,a,"ArrayBuffer");var e=Hs(t);this._b=V.call(new Array(e),0),this[E]=e},l=function(t,e,i){oe(this,l,"DataView"),oe(t,a,"DataView");var n=t[E],r=R(e);if(r<0||r>n)throw f("Wrong offset!");if(r+(i=void 0===i?n-r:B(i))>n)throw f("Wrong length!");this[x]=t,this[T]=r,this[E]=i},u&&(L(a,"byteLength","_l"),L(l,"buffer","_b"),L(l,"byteLength","_l"),L(l,"byteOffset","_o")),se(l[s],{getInt8:function(t){return D(this,1,t)[0]<<24>>24},getUint8:function(t){return D(this,1,t)[0]},getInt16:function(t){var e=D(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=D(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return A(D(this,4,t,arguments[1]))},getUint32:function(t){return A(D(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return O(D(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return O(D(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){U(this,1,t,P,e)},setUint8:function(t,e){U(this,1,t,P,e)},setInt16:function(t,e){U(this,2,t,C,e,arguments[2])},setUint16:function(t,e){U(this,2,t,C,e,arguments[2])},setInt32:function(t,e){U(this,4,t,M,e,arguments[2])},setUint32:function(t,e){U(this,4,t,M,e,arguments[2])},setFloat32:function(t,e){U(this,4,t,I,e,arguments[2])},setFloat64:function(t,e){U(this,8,t,k,e,arguments[2])}});Bt(a,"ArrayBuffer"),Bt(l,"DataView"),m(l[s],Ys.VIEW,!0),e.ArrayBuffer=a,e.DataView=l})),Vs=r.ArrayBuffer,Ws=Gs.ArrayBuffer,qs=Gs.DataView,Ks=Ys.ABV&&Vs.isView,Zs=Ws.prototype.slice,Js=Ys.VIEW;M(M.G+M.W+M.F*(Vs!==Ws),{ArrayBuffer:Ws}),M(M.S+M.F*!Ys.CONSTR,"ArrayBuffer",{isView:function(t){return Ks&&Ks(t)||o(t)&&Js in t}}),M(M.P+M.U+M.F*h((function(){return!new Ws(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(t,e){if(void 0!==Zs&&void 0===e)return Zs.call(a(this),t);for(var i=a(this).byteLength,n=N(t,i),r=N(void 0===e?i:e,i),s=new(qi(this,Ws))(B(r-n)),o=new qs(this),h=new qs(s),u=0;n<r;)h.setUint8(u++,o.getUint8(n++));return s}}),Jt("ArrayBuffer");var Qs=n((function(t){if(u){var e=r,i=h,n=M,s=Ys,a=Gs,l=P,c=oe,f=y,d=m,g=se,b=R,w=B,x=Hs,T=N,S=p,O=_,A=pt,C=o,k=I,L=lt,D=Ft,U=Ht,F=Ye.f,j=vt,Y=E,H=X,G=$,W=wt,q=qi,K=Kt,Z=at,J=bt,Q=Jt,tt=V,et=z,it=v,nt=ye,rt=it.f,st=nt.f,ot=e.RangeError,ht=e.TypeError,ut=e.Uint8Array,ct=Array.prototype,ft=a.ArrayBuffer,dt=a.DataView,gt=G(0),yt=G(2),mt=G(3),_t=G(4),xt=G(5),Et=G(6),Tt=W(!0),St=W(!1),Ot=K.values,At=K.keys,Pt=K.entries,Ct=ct.lastIndexOf,Mt=ct.reduce,kt=ct.reduceRight,It=ct.join,Lt=ct.sort,Dt=ct.slice,Rt=ct.toString,Ut=ct.toLocaleString,Nt=H("iterator"),jt=H("toStringTag"),Bt=Y("typed_constructor"),zt=Y("def_constructor"),Xt=s.CONSTR,Yt=s.TYPED,Gt=s.VIEW,Vt=G(1,(function(t,e){return $t(q(t,t[zt]),e)})),Wt=i((function(){return 1===new ut(new Uint16Array([1]).buffer)[0]})),qt=!!ut&&!!ut.prototype.set&&i((function(){new ut(1).set({})})),Zt=function(t,e){var i=b(t);if(i<0||i%e)throw ot("Wrong offset!");return i},Qt=function(t){if(C(t)&&Yt in t)return t;throw ht(t+" is not a typed array!")},$t=function(t,e){if(!(C(t)&&Bt in t))throw ht("It is not a typed array constructor!");return new t(e)},te=function(t,e){return ee(q(t,t[zt]),e)},ee=function(t,e){for(var i=0,n=e.length,r=$t(t,n);n>i;)r[i]=e[i++];return r},ie=function(t,e,i){rt(t,e,{get:function(){return this._d[i]}})},ne=function(t){var e,i,n,r,s,o,a=k(t),h=arguments.length,u=h>1?arguments[1]:void 0,c=void 0!==u,f=j(a);if(null!=f&&!L(f)){for(o=f.call(a),n=[],e=0;!(s=o.next()).done;e++)n.push(s.value);a=n}for(c&&h>2&&(u=l(u,arguments[2],2)),e=0,i=w(a.length),r=$t(this,i);i>e;e++)r[e]=c?u(a[e],e):a[e];return r},re=function(){for(var t=0,e=arguments.length,i=$t(this,e);e>t;)i[t]=arguments[t++];return i},ae=!!ut&&i((function(){Ut.call(new ut(1))})),he=function(){return Ut.apply(ae?Dt.call(Qt(this)):Qt(this),arguments)},ue={copyWithin:function(t,e){return et.call(Qt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return _t(Qt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return tt.apply(Qt(this),arguments)},filter:function(t){return te(this,yt(Qt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return xt(Qt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return Et(Qt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){gt(Qt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return St(Qt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return Tt(Qt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return It.apply(Qt(this),arguments)},lastIndexOf:function(t){return Ct.apply(Qt(this),arguments)},map:function(t){return Vt(Qt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return Mt.apply(Qt(this),arguments)},reduceRight:function(t){return kt.apply(Qt(this),arguments)},reverse:function(){for(var t,e=Qt(this).length,i=Math.floor(e/2),n=0;n<i;)t=this[n],this[n++]=this[--e],this[e]=t;return this},some:function(t){return mt(Qt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return Lt.call(Qt(this),t)},subarray:function(t,e){var i=Qt(this),n=i.length,r=T(t,n);return new(q(i,i[zt]))(i.buffer,i.byteOffset+r*i.BYTES_PER_ELEMENT,w((void 0===e?n:T(e,n))-r))}},le=function(t,e){return te(this,Dt.call(Qt(this),t,e))},ce=function(t){Qt(this);var e=Zt(arguments[1],1),i=this.length,n=k(t),r=w(n.length),s=0;if(r+e>i)throw ot("Wrong length!");for(;s<r;)this[e+s]=n[s++]},fe={entries:function(){return Pt.call(Qt(this))},keys:function(){return At.call(Qt(this))},values:function(){return Ot.call(Qt(this))}},de=function(t,e){return C(t)&&t[Yt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},pe=function(t,e){return de(t,e=S(e,!0))?f(2,t[e]):st(t,e)},ge=function(t,e,i){return!(de(t,e=S(e,!0))&&C(i)&&O(i,"value"))||O(i,"get")||O(i,"set")||i.configurable||O(i,"writable")&&!i.writable||O(i,"enumerable")&&!i.enumerable?rt(t,e,i):(t[e]=i.value,t)};Xt||(nt.f=pe,it.f=ge),n(n.S+n.F*!Xt,"Object",{getOwnPropertyDescriptor:pe,defineProperty:ge}),i((function(){Rt.call({})}))&&(Rt=Ut=function(){return It.call(this)});var ve=g({},ue);g(ve,fe),d(ve,Nt,fe.values),g(ve,{slice:le,set:ce,constructor:function(){},toString:Rt,toLocaleString:he}),ie(ve,"buffer","b"),ie(ve,"byteOffset","o"),ie(ve,"byteLength","l"),ie(ve,"length","e"),rt(ve,jt,{get:function(){return this[Yt]}}),t.exports=function(t,r,o,a){var h=t+((a=!!a)?"Clamped":"")+"Array",u="get"+t,l="set"+t,f=e[h],p=f||{},g=f&&U(f),v=!f||!s.ABV,y={},m=f&&f.prototype,b=function(t,e){rt(t,e,{get:function(){return function(t,e){var i=t._d;return i.v[u](e*r+i.o,Wt)}(this,e)},set:function(t){return function(t,e,i){var n=t._d;a&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),n.v[l](e*r+n.o,i,Wt)}(this,e,t)},enumerable:!0})};v?(f=o((function(t,e,i,n){c(t,f,h,"_d");var s,o,a,u,l=0,p=0;if(C(e)){if(!(e instanceof ft||"ArrayBuffer"==(u=A(e))||"SharedArrayBuffer"==u))return Yt in e?ee(f,e):ne.call(f,e);s=e,p=Zt(i,r);var g=e.byteLength;if(void 0===n){if(g%r)throw ot("Wrong length!");if((o=g-p)<0)throw ot("Wrong length!")}else if((o=w(n)*r)+p>g)throw ot("Wrong length!");a=o/r}else a=x(e),s=new ft(o=a*r);for(d(t,"_d",{b:s,o:p,l:o,e:a,v:new dt(s)});l<a;)b(t,l++)})),m=f.prototype=D(ve),d(m,"constructor",f)):i((function(){f(1)}))&&i((function(){new f(-1)}))&&J((function(t){new f,new f(null),new f(1.5),new f(t)}),!0)||(f=o((function(t,e,i,n){var s;return c(t,f,h),C(e)?e instanceof ft||"ArrayBuffer"==(s=A(e))||"SharedArrayBuffer"==s?void 0!==n?new p(e,Zt(i,r),n):void 0!==i?new p(e,Zt(i,r)):new p(e):Yt in e?ee(f,e):ne.call(f,e):new p(x(e))})),gt(g!==Function.prototype?F(p).concat(F(g)):F(p),(function(t){t in f||d(f,t,p[t])})),f.prototype=m,m.constructor=f);var _=m[Nt],E=!!_&&("values"==_.name||null==_.name),T=fe.values;d(f,Bt,!0),d(m,Yt,h),d(m,Gt,!0),d(m,zt,f),(a?new f(1)[jt]==h:jt in m)||rt(m,jt,{get:function(){return h}}),y[h]=f,n(n.G+n.W+n.F*(f!=p),y),n(n.S,h,{BYTES_PER_ELEMENT:r}),n(n.S+n.F*i((function(){p.of.call(f,1)})),h,{from:ne,of:re}),"BYTES_PER_ELEMENT"in m||d(m,"BYTES_PER_ELEMENT",r),n(n.P,h,ue),Q(h),n(n.P+n.F*qt,h,{set:ce}),n(n.P+n.F*!E,h,fe),m.toString!=Rt&&(m.toString=Rt),n(n.P+n.F*i((function(){new f(1).slice()})),h,{slice:le}),n(n.P+n.F*(i((function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()}))||!i((function(){m.toLocaleString.call([1,2])}))),h,{toLocaleString:he}),Z[h]=E?_:T,E||d(m,Nt,T)}}else t.exports=function(){}}));Qs("Int8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}})),Qs("Uint8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}})),Qs("Uint8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}}),!0),Qs("Int16",2,(function(t){return function(e,i,n){return t(this,e,i,n)}})),Qs("Uint16",2,(function(t){return function(e,i,n){return t(this,e,i,n)}})),Qs("Int32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}})),Qs("Uint32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}})),Qs("Float32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}})),Qs("Float64",8,(function(t){return function(e,i,n){return t(this,e,i,n)}}));var $s=he.getWeak,to=$(5),eo=$(6),io=0,no=function(t){return t._l||(t._l=new ro)},ro=function(){this.a=[]},so=function(t,e){return to(t.a,(function(t){return t[0]===e}))};ro.prototype={get:function(t){var e=so(this,t);if(e)return e[1]},has:function(t){return!!so(this,t)},set:function(t,e){var i=so(this,t);i?i[1]=e:this.a.push([t,e])},delete:function(t){var e=eo(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}};var oo={getConstructor:function(t,e,i,n){var r=t((function(t,s){oe(t,r,e,"_i"),t._t=e,t._i=io++,t._l=void 0,null!=s&&ae(s,i,t[n],t)}));return se(r.prototype,{delete:function(t){if(!o(t))return!1;var i=$s(t);return!0===i?no(ue(this,e)).delete(t):i&&_(i,this._i)&&delete i[this._i]},has:function(t){if(!o(t))return!1;var i=$s(t);return!0===i?no(ue(this,e)).has(t):i&&_(i,this._i)}}),r},def:function(t,e,i){var n=$s(a(e),!0);return!0===n?no(t).set(e,i):n[t._i]=i,t},ufstore:no};n((function(t){var e,i=$(0),n=ue,s=!r.ActiveXObject&&"ActiveXObject"in r,a=he.getWeak,h=Object.isExtensible,u=oo.ufstore,l=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},c={get:function(t){if(o(t)){var e=a(t);return!0===e?u(ue(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return oo.def(ue(this,"WeakMap"),t,e)}},f=t.exports=xe("WeakMap",l,c,oo,!0,!0);n&&s&&(e=oo.getConstructor(l,"WeakMap"),Ei(e.prototype,c),he.NEED=!0,i(["delete","has","get","set"],(function(t){var i=f.prototype,n=i[t];O(i,t,(function(i,r){if(o(i)&&!h(i)){this._f||(this._f=new e);var s=this._f[t](i,r);return"set"==t?this:s}return n.call(this,i,r)}))})))}));xe("WeakSet",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return oo.def(ue(this,"WeakSet"),t,!0)}},oo,!1,!0);var ao=[].slice,ho=/MSIE .\./.test(_n),uo=function(t){return function(e,i){var n=arguments.length>2,r=!!n&&ao.call(arguments,2);return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,i)}};M(M.G+M.B+M.F*ho,{setTimeout:uo(r.setTimeout),setInterval:uo(r.setInterval)}),M(M.G+M.B,{setImmediate:on.set,clearImmediate:on.clear});for(var lo=X("iterator"),co=X("toStringTag"),fo=at.Array,po={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},go=Mt(po),vo=0;vo<go.length;vo++){var yo,mo=go[vo],bo=po[mo],_o=r[mo],wo=_o&&_o.prototype;if(wo&&(wo[lo]||m(wo,lo,fo),wo[co]||m(wo,co,mo),at[mo]=fo,bo))for(yo in Kt)wo[yo]||O(wo,yo,Kt[yo],!0)}n((function(t){var e=function(t){var e,i=Object.prototype,n=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function h(t,e,i,n){var r=e&&e.prototype instanceof g?e:g,s=Object.create(r.prototype),o=new A(n||[]);return s._invoke=function(t,e,i){var n=l;return function(r,s){if(n===f)throw new Error("Generator is already running");if(n===d){if("throw"===r)throw s;return C()}for(i.method=r,i.arg=s;;){var o=i.delegate;if(o){var a=T(o,i);if(a){if(a===p)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===l)throw n=d,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=f;var h=u(t,e,i);if("normal"===h.type){if(n=i.done?d:c,h.arg===p)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(n=d,i.method="throw",i.arg=h.arg)}}}(t,i,o),s}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var l="suspendedStart",c="suspendedYield",f="executing",d="completed",p={};function g(){}function v(){}function y(){}var m={};m[s]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(P([])));_&&_!==i&&n.call(_,s)&&(m=_);var w=y.prototype=g.prototype=Object.create(m);function x(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t){var e;this._invoke=function(i,r){function s(){return new Promise((function(e,s){!function e(i,r,s,o){var a=u(t[i],t,r);if("throw"!==a.type){var h=a.arg,l=h.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,s,o)}),(function(t){e("throw",t,s,o)})):Promise.resolve(l).then((function(t){h.value=t,s(h)}),(function(t){return e("throw",t,s,o)}))}o(a.arg)}(i,r,e,s)}))}return e=e?e.then(s,s):s()}}function T(t,i){var n=t.iterator[i.method];if(n===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,T(t,i),"throw"===i.method))return p;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,t.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,p;var s=r.arg;return s?s.done?(i[t.resultName]=s.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,p):s:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(t){if(t){var i=t[s];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function i(){for(;++r<t.length;)if(n.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=e,i.done=!0,i};return o.next=o}}return{next:C}}function C(){return{value:e,done:!0}}return v.prototype=w.constructor=y,y.constructor=v,y[a]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(E.prototype),E.prototype[o]=function(){return this},t.AsyncIterator=E,t.async=function(e,i,n,r){var s=new E(h(e,i,n,r));return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},x(w),w[a]="Generator",w[s]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=P,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(n,r){return a.type="throw",a.arg=t,i.next=n,r&&(i.method="next",i.arg=e),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var h=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(h&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(h){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),O(i),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;O(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:P(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));function xo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Eo(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function To(t,e,i){return e&&Eo(t.prototype,e),i&&Eo(t,i),t}function So(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Oo(t){return(Oo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ao(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Po(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?Ao(t):e}var Co=function(){function t(){xo(this,t)}return To(t,null,[{key:"minLevel",value:function(e){t.initParams(),"number"!=typeof e?(e=e.toUpperCase(),t.isValidLevelName(e)?window[t.paramKey].minLevel=t.LEVEL[e]:window[t.paramKey].minLevel=t.LEVEL.GENERAL):window[t.paramKey].minLevel=e}},{key:"initParams",value:function(){window[t.paramKey]||(window[t.paramKey]={emitEnabled:!1,enabled:!0,minLevel:1})}},{key:"emit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Debugger";t.initParams(),t.params.emitEnabled&&window.dispatchEvent(new Event(e))}},{key:"meetsLevelRequirement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GENERAL";return t.initParams(),!!(t.isValidLevelName(e)&&t.LEVEL[e]>=t.params.minLevel)}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"log";if(t.initParams(),t.isEnabled()){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];switch(e.toLowerCase()){case"info":var s;return!!t.meetsLevelRequirement("INFO")&&((s=console).info.apply(s,n),t.emit(),!0);case"debug":var o;return!!t.meetsLevelRequirement("DEBUG")&&((o=console).debug.apply(o,n),t.emit(),!0);case"error":var a;return!!t.meetsLevelRequirement("ERROR")&&((a=console).error.apply(a,n),t.emit(),!0);case"warn":var h;return!!t.meetsLevelRequirement("WARN")&&((h=console).warn.apply(h,n),t.emit(),!0);case"log":case"general":default:var u;return!!t.meetsLevelRequirement("GENERAL")&&((u=console).log.apply(u,n),t.emit(),!0)}}}},{key:"isValidLevelName",value:function(e){return t.initParams(),"GENERAL"==e||"DEBUG"==e||"INFO"==e||"WARN"==e||"ERROR"==e}},{key:"assert",value:function(e){if(t.initParams(),!e)throw"Assert Error: ".concat(e)}},{key:"isEnabled",value:function(){return window[t.paramKey].enabled}},{key:"enable",value:function(e){t.initParams(),window[t.paramKey].enabled=e}},{key:"params",get:function(){return t.initParams(),window[t.paramKey]}},{key:"LEVEL",get:function(){return{GENERAL:1,DEBUG:2,INFO:3,WARN:4,ERROR:5}}},{key:"paramKey",get:function(){return"__spring_roll_debugger_params__"}}]),t}(),Mo=!!window.MSInputMethodContext&&!!document.documentMode,ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Io=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Lo=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Do=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},Ro=function(){function t(){Io(this,t),this._listeners={}}return Lo(t,[{key:"on",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._listeners[t]||(this._listeners[t]=[]),e._priority=parseInt(i)||0,-1===this._listeners[t].indexOf(e)&&(this._listeners[t].push(e),this._listeners[t].length>1&&this._listeners[t].sort(this.listenerSorter))}},{key:"listenerSorter",value:function(t,e){return t._priority-e._priority}},{key:"off",value:function(t,e){if(void 0!==this._listeners[t])if(void 0!==e){var i=this._listeners[t].indexOf(e);-1<i&&this._listeners[t].splice(i,1)}else delete this._listeners[t]}},{key:"trigger",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof t&&(t={type:t,data:"object"===(void 0===e?"undefined":ko(e))&&null!==e?e:{}}),void 0!==this._listeners[t.type])for(var i=this._listeners[t.type].length-1;i>=0;i--)this._listeners[t.type][i](t)}},{key:"destroy",value:function(){this._listeners={}}}]),t}(),Uo=new(function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100*Math.random()|0;Io(this,e);var i=Do(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.id="BELLHOP:"+t,i.connected=!1,i.isChild=!0,i.connecting=!1,i.origin="*",i._sendLater=[],i.iframe=null,i.receive=i.receive.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Ro),Lo(e,[{key:"receive",value:function(t){if(this.target===t.source)if("connected"===t.data)this.onConnectionReceived(t.data);else{var e=t.data;if("string"==typeof e)try{e=JSON.parse(e)}catch(t){console.error("Bellhop error: ",t)}this.connected&&"object"===(void 0===e?"undefined":ko(e))&&e.type&&this.trigger(e)}}},{key:"onConnectionReceived",value:function(t){this.connecting=!1,this.connected=!0,this.isChild||this.target.postMessage(t,this.origin);for(var e=0;e<this._sendLater.length;e++){var i=this._sendLater[e],n=i.type,r=i.data;this.send(n,r)}this._sendLater.length=0,this.trigger("connected")}},{key:"connect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";this.connecting||(this.disconnect(),this.connecting=!0,t instanceof HTMLIFrameElement&&(this.iframe=t),this.isChild=void 0===t,this.supported=!0,this.isChild&&(this.supported=window!=t),this.origin=e,window.addEventListener("message",this.receive),this.isChild&&(window===this.target?this.trigger("failed"):this.target.postMessage("connected",this.origin)))}},{key:"disconnect",value:function(){this.connected=!1,this.connecting=!1,this.origin=null,this.iframe=null,this.isChild=!0,this._sendLater.length=0,window.removeEventListener("message",this.receive)}},{key:"send",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof t)throw"The event type must be a string";var i={type:t,data:e};this.connecting?this._sendLater.push(i):this.target.postMessage(JSON.stringify(i),this.origin)}},{key:"fetch",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this.connecting&&!this.connected)throw"No connection, please call connect() first";this.on(t,(function t(n){r&&i.off(n.type,t),e(n)})),this.send(t,n)}},{key:"respond",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.on(t,(function r(s){n&&e.off(s.type,r),e.send(t,"function"==typeof i?i():i)}))}},{key:"destroy",value:function(){(function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,n)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.disconnect(),this._sendLater.length=0}},{key:"target",get:function(){return this.isChild?window.parent:this.iframe.contentWindow}}]),e}()),Fo=(function(){function t(){xo(this,t),this.listeners=[]}To(t,[{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3;t?(this.length=t,this.timer=setTimeout(this.dispatch.bind(this),t)):Co.log("warn","[IdleTimer.start()] must specify a time!")}},{key:"reset",value:function(){this.timer?(clearTimeout(this.timer),this.timer=setTimeout(this.dispatch.bind(this),this.length)):Co.log("warn","[IdleTimer.reset()] timer has not been started")}},{key:"stop",value:function(){this.timer?(clearTimeout(this.timer),this.timer=null):Co.log("warn","[IdleTimer.reset()] timer has not been started")}},{key:"dispatch",value:function(){for(var t=0;t<this.listeners.length;t++)this.listeners[t](this._value);this.reset()}},{key:"subscribe",value:function(t){this.listeners.push(t)}},{key:"unsubscribe",value:function(t){this.listeners=this.listeners.filter((function(e){return e!==t}))}}])}(),function t(){xo(this,t),"function"!=typeof this.play&&console.error('Springroll Hint Player not implemented correctly. Please ensure you have a "play" function in your class.')}),No=function(t){function e(){var t;return xo(this,e),(t=Po(this,Oo(e).call(this))).hints=[],t.index=0,t}return So(e,Fo),To(e,[{key:"play",value:function(){0!=this.hints.length?(this.index>=this.hints.length&&(this.index=0),this.hints[this.index](),this.index++):Co.log("warn","[HintSequencePlayer.play()] No hints?!")}},{key:"clear",value:function(){this.index=0,this.hints.length=0}},{key:"add",value:function(){for(var t=arguments.length,e=0;e<t;e++)this.hints.push(e<0||arguments.length<=e?void 0:arguments[e])}},{key:"remove",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];for(var r=i.length,s=function(e){t.hints=t.hints.filter((function(t){return t!==i[e]}))},o=0;o<r;o++)s(o)}}]),e}(),jo=function(){function t(e){xo(this,t),this._value=e,this.listeners=[]}return To(t,[{key:"subscribe",value:function(t){this.listeners.push(t)}},{key:"unsubscribe",value:function(t){this.listeners=this.listeners.filter((function(e){return e!==t}))}},{key:"value",get:function(){return this._value},set:function(t){if(this.value!==t){var e=this._value;this._value=t;for(var i=0;i<this.listeners.length;i++)this.listeners[i](this._value,e)}}},{key:"hasListeners",get:function(){return this.listeners.length>0}}]),t}(),Bo=Symbol("onReturn"),zo=function(){function t(){xo(this,t)}return To(t,null,[{key:Bo,value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return new Promise((function(n,r){var s=!1,o=0,a=function e(i){Uo.off(t,e),s=!0,n(i)};Uo.on(t,a),Uo.send(t,e);var h=setInterval((function(){s?clearInterval(h):(o>=i&&(clearInterval(h),Uo.off(t,a),r("No Response")),o++)}),100)}))}},{key:"read",value:function(t){var e="Could not complete read action for ".concat(t,". Bellhop is not connected.");return Uo.connected?this[Bo]("userDataRead",{name:t}):new Promise((function(t,i){return i(e)}))}},{key:"write",value:function(t,e){var i="Could not complete write action for ".concat(t," with value ").concat(e,". Bellhop is not connected.");return Uo.connected?this[Bo]("userDataWrite",{name:t,value:e}):new Promise((function(t,e){return e(i)}))}},{key:"delete",value:function(t){var e="Could not complete delete action for ".concat(t,". Bellhop is not connected.");Uo.connected?Uo.send("userDataRemove",{name:t}):console.warn(e)}}]),t}(),Xo=function(){function t(){xo(this,t)}return To(t,[{key:"onResize",value:function(){throw"not implemented"}}]),t}(),Yo=(function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.position,r=i.direction,s=i.callback,o=void 0===s?function(){return Co.log("warn",Ao(t),"Anchor missing callback")}:s;return xo(this,e),(t=Po(this,Oo(e).call(this))).position=n||{x:0,y:0},t.direction=r||{x:-1,y:-1},t.callback=o,t}So(e,Xo),To(e,[{key:"onResize",value:function(t){var e=t.viewArea,i=.5*e.width,n=.5*e.height,r=e.x+i,s=e.y+n,o=r+this.direction.x*i+this.position.x,a=s+this.direction.y*n+this.position.y;this.callback({x:o,y:a})}}])}(),function(){function t(e){var i=e.width,n=e.height,r=e.safeWidth,s=void 0===r?1/0:r,o=e.safeHeight,a=void 0===o?1/0:o,h=e.callback;xo(this,t),this.gameWidth=i,this.gameHeight=n,this.safeWidth=s<=i?s:i,this.safeHeight=a<=n?a:n,this.callback=h,this.scaleRatio=1,this.viewArea={x:0,y:0,width:0,height:0,left:0,right:0,top:0,bottom:0},this.onResize=this.onResize.bind(this),this.entities=[],h instanceof Function&&this.enable(h)}To(t,[{key:"onResize",value:function(t){var e=this,i=function(){var i=t.target.innerWidth,n=t.target.innerHeight;e.scaleRatio=Math.min(i/e.safeWidth,n/e.safeHeight);var r=Math.max(0,Math.min(e.gameWidth*e.scaleRatio,i)),s=Math.max(0,Math.min(e.gameHeight*e.scaleRatio,n)),o={x:e.gameWidth/r*e.scaleRatio,y:e.gameHeight/s*e.scaleRatio},a=i/e.scaleRatio,h=n/e.scaleRatio;e.viewArea.left=Math.max(.5*-(a-e.gameWidth),0),e.viewArea.top=Math.max(.5*-(h-e.gameHeight),0),e.viewArea.right=Math.min(e.viewArea.left+a,e.gameWidth),e.viewArea.bottom=Math.min(e.viewArea.top+h,e.gameHeight),e.viewArea.x=e.viewArea.left,e.viewArea.y=e.viewArea.top,e.viewArea.width=e.viewArea.right-e.viewArea.left,e.viewArea.height=e.viewArea.bottom-e.viewArea.top,e.resizeEventData=Object.freeze({offset:{x:e.viewArea.x,y:e.viewArea.y},gameSize:{x:e.gameWidth,y:e.gameHeight},viewArea:e.viewArea,scale:o}),e.callback({width:r,height:s,scaleRatio:e.scaleRatio,viewArea:e.viewArea,scale:o});for(var u=0,l=e.entities.length;u<l;u++)e.entities[u].onResize(e.resizeEventData)};i(),setTimeout(i,500)}},{key:"calcOffset",value:function(t){var e=this.gameWidth/this.safeWidth,i=this.gameHeight/this.safeHeight,n=(t.x-1)/(e-1),r=(t.y-1)/(i-1);return n=Number.isFinite(n)?n:0,r=Number.isFinite(r)?r:0,{x:(this.gameWidth-this.safeWidth)*n*.5,y:(this.gameHeight-this.safeHeight)*r*.5}}},{key:"addEntity",value:function(t){var e=this;Array.isArray(t)||(t=[t]),t.forEach((function(t){e.entities.includes(t)||(e.resizeEventData&&t.onResize(e.resizeEventData),e.entities.push(t))}))}},{key:"removeEntity",value:function(t){this.entities=this.entities.filter((function(e){return e!==t}))}},{key:"enable",value:function(t){t instanceof Function?(this.callback=t,window.addEventListener("resize",this.onResize),window.dispatchEvent(new Event("resize"))):Co.warn("Scale Manager was not passed a function")}},{key:"disable",value:function(){window.removeEventListener("resize",this.onResize)}}])}(),function(){function t(e){xo(this,t),this.width=1,this.height=1,this.callback=e,this.onResize=this.onResize.bind(this),e instanceof Function&&this.enable(e)}return To(t,[{key:"onResize",value:function(t){var e=this,i=function(){var i=t.target.innerWidth,n=t.target.innerHeight;e.callback({width:i,height:n,ratio:i/n}),e.width=i,e.height=n};i(),setTimeout(i,500)}},{key:"enable",value:function(t){t instanceof Function?(this.callback=t,window.addEventListener("resize",this.onResize)):console.warn("Scale Manager was not passed a function")}},{key:"disable",value:function(){window.removeEventListener("resize",this.onResize)}}]),t}()),Ho=(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.voice,n=void 0===i?0:i,r=e.rate,s=void 0===r?1:r,o=e.pitch,a=void 0===o?0:o,h=e.volume,u=void 0===h?1:h;if(xo(this,t),window.speechSynthesis){this.voiceOptions=[],this.voicesLoaded=!1,this.queue=[],this.options={voice:{},rate:s,pitch:a,volume:u};var l=function(){this.voiceOptions=window.speechSynthesis.getVoices(),this.voice=this.setVoice(n),this.voicesLoaded=!0}.bind(this),c=window.speechSynthesis.getVoices();Array.isArray(c)&&0<c.length?l():window.speechSynthesis.addEventListener("voiceschanged",l,{once:!0})}else console.error("Springroll SpeechSynth is not supported on on this Device")}To(t,[{key:"pause",value:function(){this.speaking=!1,window.speechSynthesis.pause()}},{key:"resume",value:function(){this.speaking=!0,window.speechSynthesis.resume()}},{key:"cancel",value:function(){this.speaking=!1,this.pause(),this.queue.length=0,window.speechSynthesis.cancel()}},{key:"say",value:function(t){var e=this;if(!this.speaking&&this.voicesLoaded){this.speaking=!0;var i=new SpeechSynthesisUtterance(t);Object.assign(i,this.options),i.onend=function(){e.speaking=!1,0<e.queue.length&&e.say(e.queue.shift())},window.speechSynthesis.speak(i)}else this.queue.push(t)}},{key:"rangeLimit",value:function(t,e,i){return isNaN(i)?(console.warn("'".concat(i,"' is not a valid number!")),t):i>=e?e:t>=i?t:i}},{key:"setVoice",value:function(t){this.options.voice=this.voiceOptions[t]}},{key:"getVoice",value:function(){return this.options.voice}},{key:"rate",set:function(t){this.options.rate=this.rangeLimit(.1,10,t)},get:function(){return this.options.rate}},{key:"pitch",set:function(t){this.options.pitch=this.rangeLimit(0,2,t)},get:function(){return this.options.pitch}},{key:"volume",set:function(t){this.options.volume=this.rangeLimit(0,1,t)},get:function(){return this.options.volume}}])}(),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(xo(this,t),Mo)console.error("Springroll ColorFilter is not supported on IE11");else{if(this.element=null,null===document.getElementById("color__filter__svg")){var n=document.createElement("div");n.style.width="0",n.style.height="0",n.style.position="absolute",n.style.opacity="0",n.innerHTML+='<svg id="color__filter__svg" style="width: 0; height: 0; position: absolute;" xmlns="http://www.w3.org/2000/svg"\n      version="1.1">\n      <defs>\n        <filter id="color__filter__protanopia">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.567, 0.433, 0,     0, 0\n                    0.558, 0.442, 0,     0, 0\n                    0,     0.242, 0.758, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__protanomaly">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.817, 0.183, 0,     0, 0\n                    0.333, 0.667, 0,     0, 0\n                    0,     0.125, 0.875, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__deuteranopia">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.625, 0.375, 0,   0, 0\n                    0.7,   0.3,   0,   0, 0\n                    0,     0.3,   0.7, 0, 0\n                    0,     0,     0,   1, 0"/>\n        </filter>\n        <filter id="color__filter__deuteranomaly">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.8,   0.2,   0,     0, 0\n                    0.258, 0.742, 0,     0, 0\n                    0,     0.142, 0.858, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__tritanopia">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.95, 0.05,  0,     0, 0\n                    0,    0.433, 0.567, 0, 0\n                    0,    0.475, 0.525, 0, 0\n                    0,    0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__tritanomaly">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.967, 0.033, 0,     0, 0\n                    0,     0.733, 0.267, 0, 0\n                    0,     0.183, 0.817, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__achromatopsia">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.299, 0.587, 0.114, 0, 0\n                    0.299, 0.587, 0.114, 0, 0\n                    0.299, 0.587, 0.114, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__achromatomaly">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.618, 0.320, 0.062, 0, 0\n                    0.163, 0.775, 0.062, 0, 0\n                    0.163, 0.320, 0.516, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n      </defs>\n      </svg>\n      ',document.body.appendChild(n)}e instanceof HTMLElement&&"string"==typeof i&&this.applyFilter(e,i)}}To(t,[{key:"applyFilter",value:function(t,e){this.element=t,this.changeFilter(e)}},{key:"changeFilter",value:function(t){null!==this.element&&(this.element.style.filter="url(#color__filter__".concat(t,")"))}},{key:"removeFilter",value:function(){this.element.style.filter=null}},{key:"types",get:function(){return[{name:"Protanopia",value:"protanopia"},{name:"Protanomaly",value:"protanomaly"},{name:"Deuteranopia",value:"deuteranopia"},{name:"Deuteranomaly",value:"deuteranomaly"},{name:"Tritanopia",value:"tritanopia"},{name:"Tritanomaly",value:"tritanomaly"},{name:"Achromatopsia",value:"achromatopsia"},{name:"Achromatomaly",value:"achromatomaly"}]}}])}(),Object.freeze({left:"leftarrow",right:"rightarrow",up:"uparrow",down:"downarrow"})),Go=function(){function t(e,i,n){xo(this,t),this.key=e,this._state=0,this.actions={up:n,down:i}}return To(t,[{key:"updateState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t<3&&t>-1&&(this._state=t)}},{key:"action",value:function(){1===this.state?this.actions.down&&this.actions.down():2===this.state&&(this.actions.up&&this.actions.up(),this.updateState(0))}},{key:"state",get:function(){return this._state}}]),t}(),Vo=(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];xo(this,t),this.assignButtons(e),window.addEventListener("blur",this.onWindowBlur.bind(this)),window.addEventListener("keydown",this.onKeyDown.bind(this)),window.addEventListener("keyup",this.onKeyUp.bind(this))}To(t,[{key:"update",value:function(){for(var t=0,e=this.keys.length;t<e;t++)this.buttons[this.keys[t]].action()}},{key:"onKeyDown",value:function(t){this.onKey(t,1)}},{key:"onKeyUp",value:function(t){this.onKey(t,2)}},{key:"onWindowBlur",value:function(){for(var t=0,e=Object.keys(this.buttons);t<e.length;t++){var i=e[t];1===this.buttons[i]._state&&this.buttons[i].updateState(2)}}},{key:"assignButtons",value:function(t){this.buttons={},this.keys=[];for(var e=0,i=t.length;e<i;e++){var n=t[e].key.toLowerCase(),r=Ho[n];void 0!==r&&(this.keys.push(r),this.buttons[r]=new Go(r,t[e].down,t[e].up)),this.keys.push(n),this.buttons[n]=new Go(n,t[e].down,t[e].up)}}},{key:"onKey",value:function(t,e){var i=t.key.toLowerCase();this.buttons[i]&&this.buttons[i].updateState(e)}}])}(),function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.features,r=i.hintPlayer,s=void 0===r?new No:r;xo(this,t),this.state={ready:new jo(!1),pause:new jo(!1),captionsMuted:new jo(!0),playOptions:new jo({}),soundVolume:new jo(1),musicVolume:new jo(1),voVolume:new jo(1),sfxVolume:new jo(1)},this.features=Object.assign({captions:!1,sound:!1,vo:!1,music:!1,sfx:!1,soundVolume:!1,musicVolume:!1,voVolume:!1,sfxVolume:!1},n||{}),(this.features.vo||this.features.music||this.features.sfx)&&(this.features.sound=!0),this.container=Uo,this.container.connect(),this.container.send("features",this.features),this.container.send("keepFocus",!1);for(var o=["soundVolume","musicVolume","voVolume","sfxVolume","captionsMuted","pause"],a=o.length,h=function(t){var i=e.state[o[t]];e.container.on(o[t],(function(t){return i.value=t.data}))},u=0;u<a;u++)h(u);for(var l=[{mute:"soundMuted",volume:"soundVolume"},{mute:"musicMuted",volume:"musicVolume"},{mute:"voMuted",volume:"voVolume"},{mute:"sfxMuted",volume:"sfxVolume"}],c=function(t){var i=e.state[l[t].volume];e.container.on(l[t].mute,(function(t){var e=i._previousValue||1;i._previousValue=i.value,i.value=t.data?0:e}))},f=0;f<l.length;f++)c(f);window.addEventListener("focus",(function(){return e.container.send("focus",!0)})),window.addEventListener("blur",(function(){return e.container.send("focus",!1)}));var d=/playOptions=[^&$]*/.exec(window.location.search);if(null!==d){var p=d[0],g=decodeURIComponent(p.split("=")[1]);try{this.state.playOptions.value=JSON.parse(g)}catch(t){Co.log("warn","Failed to parse playOptions from query string:"+t.message)}}this.container.fetch("playOptions",(function(t){return e.state.playOptions.value=t.data})),this.setupPlugins().catch((function(t){Co.log("warn",t)})).then((function(){e.validateListeners()})).catch((function(t){Co.log("warn",t)})).then((function(){e.container.send("loaded"),e.state.ready.value=!0})),this.hints=s,this.container.on("playHelp",(function(){e.hints?e.hints.play():Co.log("warn","[Springroll] Missing IHintPlayer see: https://github.com/SpringRoll/SpringRoll/tree/v2/src/hints")}))}return To(t,[{key:"setupPlugins",value:function(){for(var e=this,i=[],n=function(n){t._plugins[n].preload&&i.push(t._plugins[n].preload(e).catch((function(e){t._plugins[n].preloadFailed=!0,console.warn(t._plugins[n].name,"Preload Failed:",e)})))},r=0;r<t._plugins.length;r++)n(r);return Promise.all(i).then((function(){t._plugins=t._plugins.filter((function(t){return!0!==t.preloadFailed}));for(var i=0;i<t._plugins.length;i++)t._plugins[i].init&&t._plugins[i].init(e);for(var n=0;n<t._plugins.length;n++)t._plugins[n].start&&t._plugins[n].start(e)}))}},{key:"getPlugin",value:function(e){return t.getPlugin(e)}},{key:"validateListeners",value:function(){for(var t=[],e={captions:"captionsMuted",sound:"soundVolume",music:"musicVolume",vo:"voVolume",sfx:"sfxVolume"},i=Object.keys(e),n=0;n<i.length;n++){var r=e[i[n]];this.features[i[n]]&&!this.state[r].hasListeners&&t.push(r)}if(this.state.pause.hasListeners||t.push("pause"),t.length)throw new Error("Application state is missing required listeners: "+t.join(", ")+".")}}]),t}());Vo._plugins=[],Vo.uses=function(t){Vo._plugins.push(t)},Vo.getPlugin=function(t){return Vo._plugins.find((function(e){return e.name===t}))};var Wo=function(){function t(e){xo(this,t),this.lines=e,this.lines.sort((function(t,e){return t.endTime<e.endTime?-1:t.endTime>e.endTime?1:0})),this.reset()}return To(t,[{key:"reset",value:function(){this.time=0,this.lineIndex=0,this.renderer=null}},{key:"update",value:function(t){var e=this.time+1e3*t;e!==this.time&&(this.updateState(e,this.time),this.time=e)}},{key:"updateState",value:function(t,e){if(!this.isFinished()){for(t>this.lines[this.lineIndex].endTime&&this.renderer.lineEnd();t>this.lines[this.lineIndex].endTime;)if(this.lineIndex++,this.isFinished())return;var i=this.lines[this.lineIndex];t>=i.startTime&&e<=i.startTime&&this.renderer.lineBegin(i)}}},{key:"isFinished",value:function(){return this.lineIndex>=this.lines.length}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{lineBegin:function(){},lineEnd:function(){}};this.reset(),this.renderer=e,this.updateTimeIndex(t),this.updateState(this.time,this.lines[this.lineIndex].startTime-1)}},{key:"updateTimeIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.time=t,!this.isFinished())for(var e=this.lines.length-1;e>-1;e--)if(this.lines[e].startTime<=t){this.lineIndex=e;break}}}]),t}(),qo=function(){function t(e,i,n){xo(this,t),this.startTime=e||0,this.endTime=i||0,this.content="",this.setContent(n)}return To(t,[{key:"setContent",value:function(t){this.content=t}}]),t}(),Ko=function(){function t(){xo(this,t)}return To(t,null,[{key:"createCaptionMap",value:function(t){var e={};for(var i in t){var n=this.createCaption(t[i]);n?e[i]=n:Co.log("error","[CaptionFactory.createCaptionMap] failed to create caption:",i)}return e}},{key:"createCaption",value:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=this.createLine(t[i]);r&&e.push(r)}if(!(e.length<=0))return new Wo(e);Co.log("error","[CaptionFactory.createCaption] captions should not have 0 lines.")}},{key:"createLine",value:function(t){if("number"==typeof t.start)if("number"==typeof t.end)if("string"==typeof t.content){if(""!==t.content)return new qo(t.start,t.end,t.content);Co.log("warn","[CaptionFactory.createLine] lineData.content should not be empty","Its recommended to add time to the start of the next line to add delays.")}else Co.log("error","[CaptionFactory.createLine] lineData.content must be defined as a string");else Co.log("error","[CaptionFactory.createLine] lineData.end must be defined as a number");else Co.log("error","[CaptionFactory.createLine] lineData.start must be defined as a number")}}]),t}(),Zo=function(){function t(e,i){xo(this,t),this.captions=Ko.createCaptionMap(e),this.renderer=i,this.activeCaption=null}return To(t,[{key:"update",value:function(t){this.activeCaption&&(this.activeCaption.update(t),this.activeCaption.isFinished()&&this.stop())}},{key:"start",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.stop(),this.activeCaption=this.captions[t],this.activeCaption)return this.renderer.start(i),void this.activeCaption.start(e,this.renderer);Co.log("warn","[CaptionPlayer.Start()] caption ".concat(t," not found"))}},{key:"stop",value:function(){this.activeCaption&&this.renderer.stop&&this.renderer.stop(),this.activeCaption=null}}]),t}(),Jo=function t(){xo(this,t),"function"==typeof this.start&&"function"==typeof this.stop&&"function"==typeof this.lineBegin&&"function"==typeof this.lineEnd||console.error('Springroll Caption Renderer not implemented corrected. Please ensure you have a "start", "end", "lineBegin", and "lineEnd" function in your class.')},Qo=function(t){function e(t){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return xo(this,e),i=Po(this,Oo(e).call(this)),t instanceof HTMLElement||console.error("Invalid html element provided to renderer"),i.renderTarget=t,i.templateVariables=n,i}return So(e,Jo),To(e,[{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.renderTarget.style.visibility="visible",this.templateVariables=t}},{key:"stop",value:function(){this.renderTarget.style.visibility="hidden",this.templateVariables={}}}]),e}();function $o(t,e){return t.replace(/{{([a-zA-Z][A-Za-z0-9]*)}}/g,(function(t,i){return e[i]||t}))}!function(t){function e(){return xo(this,e),Po(this,Oo(e).apply(this,arguments))}So(e,Qo),To(e,[{key:"lineBegin",value:function(t){this.renderTarget.innerHTML=$o(t.content,this.templateVariables)}},{key:"lineEnd",value:function(){this.renderTarget.innerHTML=""}}])}();var ta=function(t){function e(){return xo(this,e),Po(this,Oo(e).apply(this,arguments))}return So(e,Qo),To(e,[{key:"lineBegin",value:function(t){this.renderTarget.innerText=this.sanitize($o(t.content,this.templateVariables))}},{key:"lineEnd",value:function(){this.renderTarget.textContent=""}},{key:"sanitize",value:function(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""}}]),e}();(function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};xo(this,t),this.locales=e.locales,this.setPrimaryLocale(i.language||this.getBrowsersLocaleKey()||e.default),this.setFallbackLocale(i.fallback||e.default)}To(t,[{key:"resolve",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.language?this.getLocaleKey(e.language):this.primaryLanguage,n=this.getLocaleKey(e.fallback)||this.fallbackLanguage,r=this.locales[i],s=this.locales[n];return r?{path:r.path+t,language:i}:s?{path:s.path+t,language:n}:void 0}},{key:"setPrimaryLocale",value:function(t){var e=this.getLocaleKey(t);return!!e&&(this.primaryLanguage=e,!0)}},{key:"setFallbackLocale",value:function(t){var e=this.getLocaleKey(t);return!!e&&(this.fallbackLanguage=e,!0)}},{key:"getLocaleKey",value:function(t){if(t){var e=t.toLowerCase();if(this.locales[e])return e;if(e.indexOf("-")>0)return e=e.split("-")[0],this.getLocaleKey(e)}}},{key:"getBrowsersLocaleKey",value:function(){for(var t=this.getBrowserLanguages(),e=0,i=t.length;e<i;e++){var n=this.getLocaleKey(t[e]);if(n)return n}}},{key:"getBrowserLanguages",value:function(){return navigator.languages?navigator.languages:navigator.language?[navigator.language||navigator.userLanguage]:[]}}])})(),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(xo(this,t),void 0===e.name)throw new Error("Application plugin not provided a name field");this.name=e.name}To(t,[{key:"preload",value:function(){return Promise.resolve()}},{key:"init",value:function(){}},{key:"start",value:function(){}}])}()},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var n=i(29),r=i(59);t.exports=i(28)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(79),r=i(53);t.exports=function(t){return n(r(t))}},function(t,e,i){"use strict";var n=i(16);t.exports=function(t,e){return!!t&&n((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},function(t,e,i){"use strict";var n,r,s,o,a=i(0),h=i(13),u=i.n(h);function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}e.a=(n=u.a.dev,r=n&&window.performance&&window.performance.mark&&window.performance.measure&&window.performance,s=function(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}},o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._listeners={},this._destroyed=!1,this.loopCheck=a.a.setUp()}var e,i,n;return e=t,n=[{key:"mixin",value:function(e){for(var i="",n=t.prototype,r=e.prototype,o=Object.getOwnPropertyNames(n),a=o.length;a--;)"constructor"!==(i=o[a])&&(r[i]?r[i]=s(r[i],n[i]):r[i]=n[i])}},{key:"initialize",value:function(t){t._listeners={},t._destroyed=!1,t.loopCheck=a.a.setUp()}}],(i=[{key:"on",value:function(t,e){var i=this._listeners[t]=this._listeners[t]||[];this._destroyed||-1===i.indexOf(e)&&i.push(e)}},{key:"off",value:function(t,e){var i=this._listeners[t],n=0;!this._destroyed&&i&&(void 0===t?this._listeners={}:void 0===e?i.length=0:-1!==(n=i.indexOf(e))&&i.splice(n,1))}},{key:"toString",value:function(){return"[Messenger Object]"}},{key:"trigger",value:function(t,e,i){var n=null,r=0,s=0,o=e,h=null;if("string"==typeof t){if(-1===t.indexOf(" "))return this.triggerEvent.apply(this,arguments);for(h=t.split(" "),n=Object(a.b)(arguments),r=0;r<h.length;r++)n[0]=h[r],s+=this.triggerEvent.apply(this,n);return a.a.recycle(n),s}if(Array.isArray(t)){for(n=Object(a.b)(arguments),r=0;r<t.length;r++)n[0]=t[r],s+=this.trigger.apply(this,n);return a.a.recycle(n),s}return t.event?(void 0!==t.message&&(o=t.message),this.triggerEvent(t.event,o,t.debug||i)):(platypus.debug.warn('Event incorrectly formatted: must be string, array, or object containing an "event" property.',t),0)}},{key:"triggerEvent",value:function(t){var e=0,i=0,n=null,r=this._listeners,s=null;if(!this._destroyed&&r.hasOwnProperty(t)&&r[t]){for(r=Object(a.b)(r[t]),arguments.length>1&&(s=Object(a.b)(arguments)).shift(),e=i=r.length;i--;)(n=r[i])._eventDispatcherOnce&&(delete n._eventDispatcherOnce,this.off(t,n)),n.apply(this,s);s&&a.a.recycle(s),a.a.recycle(r)}return e}},{key:"getMessageIds",value:function(){return Object.keys(this._listeners)}},{key:"destroy",value:function(){a.a.recycle(this.loopCheck),this.loopCheck=null,this._destroyed=!0,this._listeners=null}},{key:"destroyed",get:function(){return this._destroyed}}])&&l(e.prototype,i),n&&l(e,n),t}(),n&&(o.prototype._triggerEvent=o.prototype.triggerEvent,o.prototype.triggerEvent=function(t,e){var i=0,n=5,s=e&&e.debug,o=0,a=0;if(s||this.debug){for(i=0;i<this.loopCheck.length;i++)if(this.loopCheck[i]===t){if((o+=1)>n)throw"Endless loop detected for '"+t+"'.";platypus.debug.warn("Event '"+t+"' is nested inside another '"+t+"' event.")}return this.loopCheck.push(t),r&&r.mark("a"),a=this._triggerEvent.apply(this,arguments),r&&(r.mark("b"),r.measure(this.type+":"+t,"a","b")),this.loopCheck.length=this.loopCheck.length-1,s&&(a?platypus.debug.olive('Entity "'+this.type+'": Event "'+t+'" has '+a+" subscriber"+(a>1?"s":"")+".",e):platypus.debug.warn('Entity "'+this.type+'": Event "'+t+'" has no subscribers.',e)),a}return this._triggerEvent.apply(this,arguments)}),o)},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(0);function r(t,e){t=t.toString();var i=0,r=0,s=n.a.setUp();if(e){for(r=t.indexOf(e),i=e.length;r>=0;)s.push(t.substr(0,r)),r=(t=t.substr(r+i)).indexOf(e);s.push(t)}else for(i=(r=t.length)-1;r--;)s.push(t[i-r]);return s}},function(t,e,i){"use strict";var n,r,s,o,a,h=i(8),u=i(11),l=i(7),c=i(77),f=i(0),d=i(2),p=i(41);e.a=(s=h.s.ColorMatrixFilter,o=new h.h,n=function(t,e){var i=0,n=e.indexOf("("),r=e.substring(0,n),s=e.substring(n+1,e.indexOf(")")),o=!1;if(s.length){for("["===s[0]&&(s=s.substring(1,s.length-1),o=!0),i=(s=Object(p.a)(s,",")).length;i--;)s[i]=+s[i];o?t[r](s):(t[r].apply(t,s),f.a.recycle(s))}else t[r]()},a=function(t,e){var i=0,r=Object(p.a)(e,".");for(i=0;i<r.length;i++)n(t,r[i]);f.a.recycle(r)},Object(d.a)({id:"RenderContainer",properties:{mask:null,interactive:!1,rotate:"rotation",mirror:!1,flip:!1,visible:!0,cache:!1,ignoreOpacity:!1,localMask:!1},publicProperties:{dragMode:!1,renderParent:null,rotation:0,scaleX:1,scaleY:1,skewX:0,skewY:0,tint:null,x:0,y:0,z:0},initialize:function(){var t=this.container=this.owner.container=new h.e,e=null,i=this.tint;!0===this.rotate&&(this.rotate="rotation",platypus.debug.warn('RenderContainer: Boolean values for the "rotate" property has been deprecated. Use "rotation", "orientationMatrix", or "" to specify the source of rotation for the render container. This property defaults to "rotation".')),this.parentContainer=null,this.wasVisible=this.visible,this.lastX=this.owner.x,this.lastY=this.owner.y,this.camera=u.a.setUp(),this.isOnCamera=!0,this.needsCameraCheck=!0,this._tint=null,Object.defineProperty(this.owner,"tint",{get:function(){return this._tint}.bind(this),set:function(t){var e=this.container.filters,i=null,n=function(t){return null===t?t:("string"==typeof t&&"#"===t[0]&&(t="0x"+t.substring(1)),+t)}(t);n!==this._tint&&(null===n?e&&(this.container.filters=null):(e||(e=this.container.filters=f.a.setUp(new s)),(i=e[0].matrix)[0]=(16711680&n)/16711680,i[6]=(65280&n)/65280,i[12]=(255&n)/255),this._tint=n)}.bind(this)}),null!==i&&(this.tint=i),this.interactive&&(e=l.a.setUp("container",t,"hitArea",this.interactive.hitArea,"hover",this.interactive.hover),this.owner.addComponent(new c.a(this.owner,e)),e.recycle()),this.cache&&(this.updateSprite(!1),this.owner.cacheRender=this.container)},events:{cache:function(){this.updateSprite(!1),this.owner.cacheRender=this.container,this.cache=!0,this.owner.parent.triggerEventOnChildren?this.owner.parent.triggerEventOnChildren("cache-sprite",this.owner):platypus.debug.warn("Unable to cache sprite for "+this.owner.type)},"camera-update":function(t){this.camera.set(t.viewport),this.needsCameraCheck=!0},"handle-render-load":function(t){this.owner.triggerEvent("input-on"),this.updateSprite(!0)},"handle-render":function(t){this.container&&this.updateSprite(!0)},"hide-sprite":function(){this.visible=!1},"show-sprite":function(){this.visible=!0},"set-mask":function(t){this.setMask(t)}},methods:{updateSprite:(r=function(t,e){return t.z-e.z},function(t){var e,i,n=0,s=o,a=1,h=1,u=null;if(e=this.owner.x,i=this.owner.y,"rotation"===this.rotate&&(n=this.rotation),this.container.z!==this.owner.z&&(this.parentContainer&&(this.parentContainer.reorder=!0),this.container.z=this.owner.z),this.ignoreOpacity||!this.owner.opacity&&0!==this.owner.opacity||(this.container.alpha=this.owner.opacity),this.container.reorder&&(this.container.reorder=!1,this.container.children.sort(r),this.needsCameraCheck=!0),(this.mirror||this.flip)&&(u=this.rotation%360,this.mirror&&u>90&&u<270&&(a=-1),this.flip&&u<180&&(h=-1)),"orientationMatrix"===this.rotate){var l=this.owner.orientationMatrix;s.a=l[0][0],s.b=l[1][0],s.tx=e+l[0][2],s.c=l[0][1],s.d=l[1][1],s.ty=i+l[1][2],this.container.transform.setFromMatrix(s)}else this.container.setTransform(e,i,this.scaleX*a,this.scaleY*h,n?n/180*Math.PI:0,this.skewX,this.skewY);this.parentContainer&&this.parentContainer.parentUpdated&&(this.needsCameraCheck=!0),this.container&&(this.container.childUpdated&&(this.needsCameraCheck=!0,this.container.childUpdated=!1),this.container.parentUpdated=!1),this.needsCameraCheck||(this.needsCameraCheck=this.lastX!==this.owner.x||this.lastY!==this.owner.y),t&&this.container&&(this.needsCameraCheck||!this.wasVisible&&this.visible)&&(this.isOnCamera=this.owner.parent.isOnCanvas(this.container.getBounds(!1)),this.needsCameraCheck=!1,this.parentContainer&&(this.parentContainer.childUpdated=!0),this.container.parentUpdated=!0),this.lastX=this.owner.x,this.lastY=this.owner.y,this.wasVisible=this.visible,this.container.visible=this.visible&&this.isOnCamera||this.dragMode}),setMask:function(t){var e=null;this.mask&&(this.localMask?this.container.removeChild(this.mask):this.parentContainer&&this.parentContainer.removeChild(this.mask)),t?(t.isMask||t instanceof h.f?e=t:((e=new h.f).beginFill(0,1),"string"==typeof t?a(e,t):t.radius?e.drawCircle(t.x||0,t.y||0,t.radius):t.width&&t.height&&e.drawRect(t.x||0,t.y||0,t.width,t.height),e.endFill()),e.isMask=!0,this.mask=this.container.mask=e,this.mask.z=0,this.localMask?this.container.addChild(this.mask):this.parentContainer&&this.parentContainer.addChild(this.mask)):this.mask=this.container.mask=null},destroy:function(){this.camera.recycle(),this.parentContainer&&!this.container.mouseTarget?(this.parentContainer.removeChild(this.container),this.parentContainer=null):this.cache||this.container.destroy(),this.container=null}},publicMethods:{removeFromParentContainer:function(){this.parentContainer&&(this.mask&&this.setMask(),this.parentContainer.removeChild(this.container))},addToParentContainer:function(t){this.parentContainer=t,this.parentContainer.addChild(this.container),this.parentContainer.reorder=!0,this.mask&&this.setMask(this.mask)}}}))},function(t,e,i){"use strict";(function(t){var i=function(){this._tweens={},this._tweensAddedDuringUpdate={}};i.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var i=Object.keys(this._tweens);if(0===i.length)return!1;for(t=void 0!==t?t:r.now();i.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<i.length;n++){var s=this._tweens[i[n]];s&&!1===s.update(t)&&(s._isPlaying=!1,e||delete this._tweens[i[n]])}i=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var n,r=new i;r.Group=i,r._nextId=0,r.nextId=function(){return r._nextId++},"undefined"==typeof self&&void 0!==t&&t.hrtime?r.now=function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?r.now=self.performance.now.bind(self.performance):void 0!==Date.now?r.now=Date.now:r.now=function(){return(new Date).getTime()},r.Tween=function(t,e){this._isPaused=!1,this._pauseStart=null,this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=r.Easing.Linear.None,this._interpolationFunction=r.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||r,this._id=r.nextId()},r.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},isPaused:function(){return this._isPaused},to:function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},duration:function(t){return this._duration=t,this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?r.now()+parseFloat(t):t:r.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(void 0===this._valuesStart[e]&&(this._valuesStart[e]=this._object[e]),this._valuesStart[e]instanceof Array==!1&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},pause:function(t){return this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=void 0===t?r.now():t,this._group.remove(this),this)},resume:function(t){return this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=(void 0===t?r.now():t)-this._pauseStart,this._pauseStart=0,this._group.add(this),this):this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:function(t){return this._onRepeatCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,i,n;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(t-this._startTime)/this._duration,i=0===this._duration||i>1?1:i,n=this._easingFunction(i),this._valuesEnd)if(void 0!==this._valuesStart[e]){var r=this._valuesStart[e]||0,s=this._valuesEnd[e];s instanceof Array?this._object[e]=this._interpolationFunction(s,n):("string"==typeof s&&(s="+"===s.charAt(0)||"-"===s.charAt(0)?r+parseFloat(s):parseFloat(s)),"number"==typeof s&&(this._object[e]=r+(s-r)*n))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var o=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=o}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,h=this._chainedTweens.length;a<h;a++)this._chainedTweens[a].start(this._startTime+this._duration);return!1}return!0}},r.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-r.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*r.Easing.Bounce.In(2*t):.5*r.Easing.Bounce.Out(2*t-1)+.5}}},r.Interpolation={Linear:function(t,e){var i=t.length-1,n=i*e,s=Math.floor(n),o=r.Interpolation.Utils.Linear;return e<0?o(t[0],t[1],n):e>1?o(t[i],t[i-1],i-n):o(t[s],t[s+1>i?i:s+1],n-s)},Bezier:function(t,e){for(var i=0,n=t.length-1,s=Math.pow,o=r.Interpolation.Utils.Bernstein,a=0;a<=n;a++)i+=s(1-e,n-a)*s(e,a)*t[a]*o(n,a);return i},CatmullRom:function(t,e){var i=t.length-1,n=i*e,s=Math.floor(n),o=r.Interpolation.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(s=Math.floor(n=i*(1+e))),o(t[(s-1+i)%i],t[s],t[(s+1)%i],t[(s+2)%i],n-s)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[i]-(o(t[i],t[i],t[i-1],t[i-1],n-i)-t[i]):o(t[s?s-1:0],t[s],t[i<s+1?i:s+1],t[i<s+2?i:s+2],n-s)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=r.Interpolation.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:(n=[1],function(t){var e=1;if(n[t])return n[t];for(var i=t;i>1;i--)e*=i;return n[t]=e,e}),CatmullRom:function(t,e,i,n,r){var s=.5*(i-t),o=.5*(n-e),a=r*r;return(2*e-2*i+s+o)*(r*a)+(-3*e+3*i-2*s-o)*a+s*r+e}}},e.a=r}).call(this,i(167))},function(t,e,i){var n=i(45);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){var n=i(80),r=i(59),s=i(38),o=i(56),a=i(36),h=i(134),u=Object.getOwnPropertyDescriptor;e.f=i(28)?u:function(t,e){if(t=s(t),e=o(e,!0),h)try{return u(t,e)}catch(t){}if(a(t,e))return r(!n.f.call(t,e),t[e])}},function(t,e,i){var n=i(6),r=i(26),s=i(16);t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],o={};o[t]=e(i),n(n.S+n.F*s((function(){i(1)})),"Object",o)}},function(t,e,i){var n=i(44),r=i(79),s=i(32),o=i(25),a=i(150);t.exports=function(t,e){var i=1==t,h=2==t,u=3==t,l=4==t,c=6==t,f=5==t||c,d=e||a;return function(e,a,p){for(var g,v,y=s(e),m=r(y),b=n(a,p,3),_=o(m.length),w=0,x=i?d(e,_):h?d(e,0):void 0;_>w;w++)if((f||w in m)&&(v=b(g=m[w],w,y),t))if(i)x[w]=v;else if(v)switch(t){case 3:return!0;case 5:return g;case 6:return w;case 2:x.push(g)}else if(l)return!1;return c?-1:u||l?l:x}}},function(t,e,i){"use strict";var n,r,s,o=i(13),a=i.n(o),h=i(19);e.a=(n=function(t){this.increment-=1,this.increment||(this.resolve=t,this.timeout=setTimeout(t,0))},r=function(t){this.resolve=null,t(),this.recycle()},(s=function(t,e){var i=r.bind(this,e),s=t.length;if(s){var o=n.bind(this,i),a=0;for(this.increment=s,this.resolve=null,a=0;a<s;a++)t[a](o)}else this.resolve=i,this.timeout=setTimeout(i,0)}).prototype.attemptResolution=function(){return!!this.resolve&&(clearTimeout(this.timeout),this.resolve(),!0)},h.a.add(s,"Async",s,(function(){this.increment=0,this.resolve=null,this.timeout=0}),!0,a.a.dev),s)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(e,i,n){void 0===i&&(i=!1),r(this,t),this._fn=e,this._once=i,this._thisArg=n,this._next=this._prev=this._owner=null}return n(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function o(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var a=function(){function t(){r(this,t),this._head=this._tail=void 0}return n(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return o(this,new s(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return o(this,new s(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=s,e.default=a,t.exports=e.default},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){"use strict";if(i(28)){var n=i(61),r=i(15),s=i(16),o=i(6),a=i(96),h=i(128),u=i(44),l=i(74),c=i(59),f=i(37),d=i(75),p=i(46),g=i(25),v=i(161),y=i(63),m=i(56),b=i(36),_=i(81),w=i(18),x=i(32),E=i(120),T=i(64),S=i(66),O=i(65).f,A=i(122),P=i(60),C=i(22),M=i(49),k=i(86),I=i(82),L=i(124),D=i(72),R=i(89),U=i(73),F=i(123),N=i(152),j=i(29),B=i(47),z=j.f,X=B.f,Y=r.RangeError,H=r.TypeError,G=r.Uint8Array,V=Array.prototype,W=h.ArrayBuffer,q=h.DataView,K=M(0),Z=M(2),J=M(3),Q=M(4),$=M(5),tt=M(6),et=k(!0),it=k(!1),nt=L.values,rt=L.keys,st=L.entries,ot=V.lastIndexOf,at=V.reduce,ht=V.reduceRight,ut=V.join,lt=V.sort,ct=V.slice,ft=V.toString,dt=V.toLocaleString,pt=C("iterator"),gt=C("toStringTag"),vt=P("typed_constructor"),yt=P("def_constructor"),mt=a.CONSTR,bt=a.TYPED,_t=a.VIEW,wt=M(1,(function(t,e){return Ot(I(t,t[yt]),e)})),xt=s((function(){return 1===new G(new Uint16Array([1]).buffer)[0]})),Et=!!G&&!!G.prototype.set&&s((function(){new G(1).set({})})),Tt=function(t,e){var i=p(t);if(i<0||i%e)throw Y("Wrong offset!");return i},St=function(t){if(w(t)&&bt in t)return t;throw H(t+" is not a typed array!")},Ot=function(t,e){if(!(w(t)&&vt in t))throw H("It is not a typed array constructor!");return new t(e)},At=function(t,e){return Pt(I(t,t[yt]),e)},Pt=function(t,e){for(var i=0,n=e.length,r=Ot(t,n);n>i;)r[i]=e[i++];return r},Ct=function(t,e,i){z(t,e,{get:function(){return this._d[i]}})},Mt=function(t){var e,i,n,r,s,o,a=x(t),h=arguments.length,l=h>1?arguments[1]:void 0,c=void 0!==l,f=A(a);if(null!=f&&!E(f)){for(o=f.call(a),n=[],e=0;!(s=o.next()).done;e++)n.push(s.value);a=n}for(c&&h>2&&(l=u(l,arguments[2],2)),e=0,i=g(a.length),r=Ot(this,i);i>e;e++)r[e]=c?l(a[e],e):a[e];return r},kt=function(){for(var t=0,e=arguments.length,i=Ot(this,e);e>t;)i[t]=arguments[t++];return i},It=!!G&&s((function(){dt.call(new G(1))})),Lt=function(){return dt.apply(It?ct.call(St(this)):St(this),arguments)},Dt={copyWithin:function(t,e){return N.call(St(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return Q(St(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return F.apply(St(this),arguments)},filter:function(t){return At(this,Z(St(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return $(St(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(St(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){K(St(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return it(St(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(St(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ut.apply(St(this),arguments)},lastIndexOf:function(t){return ot.apply(St(this),arguments)},map:function(t){return wt(St(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return at.apply(St(this),arguments)},reduceRight:function(t){return ht.apply(St(this),arguments)},reverse:function(){for(var t,e=St(this).length,i=Math.floor(e/2),n=0;n<i;)t=this[n],this[n++]=this[--e],this[e]=t;return this},some:function(t){return J(St(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return lt.call(St(this),t)},subarray:function(t,e){var i=St(this),n=i.length,r=y(t,n);return new(I(i,i[yt]))(i.buffer,i.byteOffset+r*i.BYTES_PER_ELEMENT,g((void 0===e?n:y(e,n))-r))}},Rt=function(t,e){return At(this,ct.call(St(this),t,e))},Ut=function(t){St(this);var e=Tt(arguments[1],1),i=this.length,n=x(t),r=g(n.length),s=0;if(r+e>i)throw Y("Wrong length!");for(;s<r;)this[e+s]=n[s++]},Ft={entries:function(){return st.call(St(this))},keys:function(){return rt.call(St(this))},values:function(){return nt.call(St(this))}},Nt=function(t,e){return w(t)&&t[bt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},jt=function(t,e){return Nt(t,e=m(e,!0))?c(2,t[e]):X(t,e)},Bt=function(t,e,i){return!(Nt(t,e=m(e,!0))&&w(i)&&b(i,"value"))||b(i,"get")||b(i,"set")||i.configurable||b(i,"writable")&&!i.writable||b(i,"enumerable")&&!i.enumerable?z(t,e,i):(t[e]=i.value,t)};mt||(B.f=jt,j.f=Bt),o(o.S+o.F*!mt,"Object",{getOwnPropertyDescriptor:jt,defineProperty:Bt}),s((function(){ft.call({})}))&&(ft=dt=function(){return ut.call(this)});var zt=d({},Dt);d(zt,Ft),f(zt,pt,Ft.values),d(zt,{slice:Rt,set:Ut,constructor:function(){},toString:ft,toLocaleString:Lt}),Ct(zt,"buffer","b"),Ct(zt,"byteOffset","o"),Ct(zt,"byteLength","l"),Ct(zt,"length","e"),z(zt,gt,{get:function(){return this[bt]}}),t.exports=function(t,e,i,h){var u=t+((h=!!h)?"Clamped":"")+"Array",c="get"+t,d="set"+t,p=r[u],y=p||{},m=p&&S(p),b=!p||!a.ABV,x={},E=p&&p.prototype,A=function(t,i){z(t,i,{get:function(){return function(t,i){var n=t._d;return n.v[c](i*e+n.o,xt)}(this,i)},set:function(t){return function(t,i,n){var r=t._d;h&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),r.v[d](i*e+r.o,n,xt)}(this,i,t)},enumerable:!0})};b?(p=i((function(t,i,n,r){l(t,p,u,"_d");var s,o,a,h,c=0,d=0;if(w(i)){if(!(i instanceof W||"ArrayBuffer"==(h=_(i))||"SharedArrayBuffer"==h))return bt in i?Pt(p,i):Mt.call(p,i);s=i,d=Tt(n,e);var y=i.byteLength;if(void 0===r){if(y%e)throw Y("Wrong length!");if((o=y-d)<0)throw Y("Wrong length!")}else if((o=g(r)*e)+d>y)throw Y("Wrong length!");a=o/e}else a=v(i),s=new W(o=a*e);for(f(t,"_d",{b:s,o:d,l:o,e:a,v:new q(s)});c<a;)A(t,c++)})),E=p.prototype=T(zt),f(E,"constructor",p)):s((function(){p(1)}))&&s((function(){new p(-1)}))&&R((function(t){new p,new p(null),new p(1.5),new p(t)}),!0)||(p=i((function(t,i,n,r){var s;return l(t,p,u),w(i)?i instanceof W||"ArrayBuffer"==(s=_(i))||"SharedArrayBuffer"==s?void 0!==r?new y(i,Tt(n,e),r):void 0!==n?new y(i,Tt(n,e)):new y(i):bt in i?Pt(p,i):Mt.call(p,i):new y(v(i))})),K(m!==Function.prototype?O(y).concat(O(m)):O(y),(function(t){t in p||f(p,t,y[t])})),p.prototype=E,n||(E.constructor=p));var P=E[pt],C=!!P&&("values"==P.name||null==P.name),M=Ft.values;f(p,vt,!0),f(E,bt,u),f(E,_t,!0),f(E,yt,p),(h?new p(1)[gt]==u:gt in E)||z(E,gt,{get:function(){return u}}),x[u]=p,o(o.G+o.W+o.F*(p!=y),x),o(o.S,u,{BYTES_PER_ELEMENT:e}),o(o.S+o.F*s((function(){y.of.call(p,1)})),u,{from:Mt,of:kt}),"BYTES_PER_ELEMENT"in E||f(E,"BYTES_PER_ELEMENT",e),o(o.P,u,Dt),U(u),o(o.P+o.F*Et,u,{set:Ut}),o(o.P+o.F*!C,u,Ft),n||E.toString==ft||(E.toString=ft),o(o.P+o.F*s((function(){new p(1).slice()})),u,{slice:Rt}),o(o.P+o.F*(s((function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()}))||!s((function(){E.toLocaleString.call([1,2])}))),u,{toLocaleString:Lt}),D[u]=C?P:M,n||C||f(E,pt,M)}}else t.exports=function(){}},function(t,e,i){"use strict";var n,r,s,o,a,h,u,l,c,f,d,p,g,v,y,m,b=i(8),_=i(0),w=i(7);e.a=(u={},l={},c=function(){},f=b.p.EMPTY,d=/[\[\]{},-]/g,p=function(t){var e=0,i=_.a.setUp(),n=null,r=platypus.assetCache,s=l,o=null;for(e=0;e<t.length;e++)if("string"==typeof(o=t[e])){if(!s[o]){if(!(n=r.get(o))){platypus.debug.warn('"'+o+'" is not a loaded asset.');break}s[o]=new b.c(n)}i.push(s[o])}else i.push(new b.c(o));return i},g=function(t,e){var i=_.a.setUp(),n=0;for(n=0;n<t;n++)i.push(e[n]||f);return w.a.setUp("id","default","frames",i,"next","default","speed",1)},v=function(t,e){var i="",n=w.a.setUp(),r=0,s=null,o="";for(o in t)if(t.hasOwnProperty(o)){for(i=t[o],r=(s=Object(_.b)(i.frames)).length;r--;)s[r]=e[s[r]]||f;n[o]=w.a.setUp("id",o,"frames",s,"next",i.next,"speed",i.speed)}return n.default||(n.default=g(e.length,e)),n},m=(y=function(t,e){var i=function(t){var e=0;if(t.id)return t.id;for(e=0;e<t.images.length;e++)if("string"!=typeof t.images[e])return"";return t.id=JSON.stringify(t).replace(d,""),t.id}(t),n=i?u[i]:null,r=(t.framerate||60)/60;for(var s in i?n?(n.viable+=1,this.cacheId=i):(n=u[i]=function(t,e){var i,n=0,r=null,s=t.frames,o=t.images,a=_.a.setUp(),h=p(o);for(n=0;n<s.length;n++)r=s[n],a.push(new b.p(h[r[4]],new b.k(r[0],r[1],r[2],r[3]),null,null,0,new b.i((r[5]||0)/r[2],(r[6]||0)/r[3])));return i=v(t.animations,a),_.a.recycle(h),w.a.setUp("textures",a,"animations",i,"viable",1,"cacheId",e)}(t,i),this.cacheId=i):n=function(t){var e=0,i=null,n=null,r=t.frames,s=t.images,o=_.a.setUp(),a=p(s);for(e=0;e<r.length;e++)n=r[e],o.push(new b.p(a[n[4]],new b.k(n[0],n[1],n[2],n[3]),null,null,0,new b.i((n[5]||0)/n[2],(n[6]||0)/n[3])));return(i=v(t.animations,o)).default||(i.default=g(o.length,o)),_.a.recycle(a),w.a.setUp("textures",o,"animations",i)}(t),b.e.call(this),this._animations={},n.animations)if(1===n.animations[s].frames.length)this._animations[s]=new b.n(n.animations[s].frames[0]);else{var o=this._animations[s]=new b.b(n.animations[s].frames);o.animationSpeed=r*n.animations[s].speed,o.onComplete=o.onLoop=function(t,e){this.onComplete&&this.onComplete(t),e.next&&this.gotoAndPlay(e.next)}.bind(this,s,n.animations[s]),o.updateAnchor=!0}this._animation=null,this.animationSpeed=r,this.currentAnimation=null,this.playing=!1,this._visible=!0,this._updating=!1,this.update=c,this.gotoAndPlay(e)}).prototype=Object.create(b.e.prototype),y.prototype.constructor=y,Object.defineProperties(m,{visible:{get:function(){return this._visible},set:function(t){this._visible=t}},paused:{get:function(){return!this.playing},set:function(t){(t&&this.playing||!t&&!this.playing)&&(this.playing=!t)}}}),m.stop=function(){this.paused=!0},m.play=function(){this.paused=!1},m.gotoAndStop=function(t){this.stop(),this._animation&&this._animation.stop&&this._animation.stop(),this._animation=this._animations[t],this._animation||(this._animation=this._animations.default),this.removeChildren(),this.addChild(this._animation)},m.gotoAndPlay=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(this.currentAnimation!==t||i)&&(this._animation&&this._animation.stop&&this._animation.stop(),this._animation=this._animations[t],this.currentAnimation=t,this._animation||(this._animation=this._animations.default,this.currentAnimation="default"),this.removeChildren(),this.addChild(this._animation)),this._animation.loop=e,this._animation.play&&this._animation.play(),this.play()},m.has=function(t){return!!this._animations[t]},m.destroy=function(){var t="";if(this.stop(),this._animation&&this._animation.stop&&this._animation.stop(),b.e.prototype.destroy.call(this),this.cacheId&&(u[this.cacheId].viable-=1,u[this.cacheId].viable<=0)){for(t in _.a.recycle(u[this.cacheId].textures),u[this.cacheId].animations)u[this.cacheId].animations.hasOwnProperty(t)&&_.a.recycle(u[this.cacheId].animations[t].frames);delete u[this.cacheId]}},y.preloadBaseTextures=function(t){var e=l,i="";if(t.updateTexture)for(i in e)e.hasOwnProperty(i)&&t.updateTexture(e[i])},y.unloadBaseTextures=function(t){var e=l,i="";for(i in e)e.hasOwnProperty(i)&&e[i]&&(e[i].destroy(),e[i]=null);b.u.clearTextureCache()},y.EmptySpriteSheet={framerate:60,frames:[],images:[],animations:{},recycleSpriteSheet:function(){}},y.formatSpriteSheet=(n=/([\w-]+)\.(\w+)$/,r=function(t){for(var e=t.length,i="",n="";e--;)i+=n+(t[e].src||t[e]).substring(0,128),n=",";return i},s=function(t,e){var i=null,n=e.animations,s=e.images,h=e.framerate||60,u=e.frames,l=0,c=_.a.setUp(),f=s.length,d=u.length,g=t.animations,v=t.images,y=t.framerate||60,m=t.frames;for(e.id?e.id+=";"+(t.id||r(t.images)):e.id=t.id||r(t.images),l=0;l<v.length;l++)c.push(a(v[l])),s.push(c[l]);return Array.isArray(m)?function(t,e,i){var n=null,r=0;for(r=0;r<t.length;r++)n=t[r],e.push(_.a.setUp(n[0],n[1],n[2],n[3],n[4]+i,n[5],n[6]))}(m,u,f):(function(t,e,i,n){var r=0,s=t.width,o=t.height,a=t.regX||0,h=t.regY||0,u=0,l=0,c=0,f=0;for(r=0;r<n.length;r++)for(u=n[r].realWidth-s,l=n[r].realHeight-o,f=0;f<=l;f+=o)for(c=0;c<=u;c+=s)e.push([c,f,s,o,r+i,a,h])}(m,u,f,i=p(c)),_.a.recycle(i)),function(t,e,i,n,r){var s="";for(s in t)t.hasOwnProperty(s)&&(e[s]&&(_.a.recycle(e[s].frames),e[s].recycle(),platypus.debug.olive('PIXIAnimation "'+r+'": Overwriting duplicate animation for "'+s+'".')),e[s]=o(s,t[s],i,n))}(g,n,y/h,d,e.id),_.a.recycle(c),e},o=function(t,e,i,n){var r=0,s=0,o=_.a.setUp(),a=0;if("number"==typeof e)return o.push(e+n),w.a.setUp("frames",o,"next",t,"speed",i);if(Array.isArray(e)){for(s=e[0]||0,a=(e[1]||s)+1+n,r=s+=n;r<a;r++)o.push(r);return w.a.setUp("frames",o,"next",e[2]||t,"speed",(e[3]||1)*i)}for(r=0;r<e.frames.length;r++)o.push(e.frames[r]+n);return w.a.setUp("frames",o,"next",e.next||t,"speed",(e.speed||1)*i)},a=function(t){var e=!1;return"string"==typeof t&&(e=t.match(n))?e[1]:t},h=function(){var t=this.animations,e="";for(e in t)t.hasOwnProperty(e)&&_.a.recycle(t[e].frames),t[e].recycle();_.a.recycle(this.frames,2),this.frames=null,_.a.recycle(this.images),this.images=null,this.recycle()},function(t){var e=y.EmptySpriteSheet,i=t;if("string"==typeof i&&(i=platypus.game.settings.spriteSheets[t]),i){if(e=w.a.setUp("animations",w.a.setUp(),"framerate",60,"frames",_.a.setUp(),"id","","images",_.a.setUp(),"recycleSpriteSheet",h),Array.isArray(i))return function(t,e){for(var i=t.length,n=null;i--;)"string"==typeof(n=t[i])&&(n=platypus.game.settings.spriteSheets[n]),n&&s(n,e);return e}(i,e);if(i)return s(i,e)}return e}),y)},function(t,e,i){var n=i(18);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){var n=i(60)("meta"),r=i(18),s=i(36),o=i(29).f,a=0,h=Object.isExtensible||function(){return!0},u=!i(16)((function(){return h(Object.preventExtensions({}))})),l=function(t){o(t,n,{value:{i:"O"+ ++a,w:{}}})},c=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,n)){if(!h(t))return"F";if(!e)return"E";l(t)}return t[n].i},getWeak:function(t,e){if(!s(t,n)){if(!h(t))return!0;if(!e)return!1;l(t)}return t[n].w},onFreeze:function(t){return u&&c.NEED&&h(t)&&!s(t,n)&&l(t),t}}},function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)r(i,n)&&(t[n]=i[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var s={arraySet:function(t,e,i,n,r){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),r);else for(var s=0;s<n;s++)t[r+s]=e[i+s]},flattenChunks:function(t){var e,i,n,r,s,o;for(n=0,e=0,i=t.length;e<i;e++)n+=t[e].length;for(o=new Uint8Array(n),r=0,e=0,i=t.length;e<i;e++)s=t[e],o.set(s,r),r+=s.length;return o}},o={arraySet:function(t,e,i,n,r){for(var s=0;s<n;s++)t[r+s]=e[i+s]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,s)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(n)},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e){t.exports=!1},function(t,e,i){var n=i(136),r=i(107);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e,i){var n=i(46),r=Math.max,s=Math.min;t.exports=function(t,e){return(t=n(t))<0?r(t+e,0):s(t,e)}},function(t,e,i){var n=i(17),r=i(137),s=i(107),o=i(106)("IE_PROTO"),a=function(){},h=function(){var t,e=i(104)("iframe"),n=s.length;for(e.style.display="none",i(108).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),h=t.F;n--;)delete h.prototype[s[n]];return h()};t.exports=Object.create||function(t,e){var i;return null!==t?(a.prototype=n(t),i=new a,a.prototype=null,i[o]=t):i=h(),void 0===e?i:r(i,e)}},function(t,e,i){var n=i(136),r=i(107).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},function(t,e,i){var n=i(36),r=i(32),s=i(106)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,i){var n=i(22)("unscopables"),r=Array.prototype;null==r[n]&&i(37)(r,n,{}),t.exports=function(t){r[n][t]=!0}},function(t,e,i){var n=i(18);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,i){"use strict";var n,r,s,o,a,h,u=i(11),l=i(9),c=i(13),f=i.n(c),d=i(19);e.a=(n=function(t,e){var i=e.aABB,n=i.halfHeight,r=i.halfWidth,s=Math.abs,o=Math.pow,a=s(t.x-e.x),h=s(t.y-e.y),u=t.radius;return a<r||h<n||a<r+u&&h<n+u&&o(a-r,2)+o(h-n,2)<o(u,2)},r=function(t){var e=Math.pow;return this.aABB.collides(t.aABB)&&("rectangle"===t.type&&n(this,t)||"circle"===t.type&&e(this.x-t.x,2)+e(this.y-t.y,2)<=e(this.radius+t.radius,2))},s=function(){return!1},o=function(t){return this.aABB.collides(t.aABB)&&("rectangle"===t.type||"circle"===t.type&&n(t,this))},(h=(a=function(t,e,i){var n=e.regX,a=e.regY,h=e.width||2*e.radius||0,c=e.height||2*e.radius||0,f=e.radius||0,d=e.type||"rectangle";this.initialized||(this.initialized=!0,l.a.assign(this,"offset","offsetX","offsetY"),l.a.assign(this,"position","x","y"),l.a.assign(this,"size","width","height"),this.aABB=u.a.setUp()),this.owner=t,this.collisionType=i,this.type=d,this.subType="","circle"===d?(h=c=2*f,this.collides=r):this.collides="rectangle"===d?o:s,this.size.setXYZ(h,c),this.radius=f,"number"!=typeof n&&(n=h/2),"number"!=typeof a&&(a=c/2),this.offset.setXYZ(e.offsetX||h/2-n,e.offsetY||c/2-a),t?this.position.setXYZ(t.x,t.y).add(this.offset):this.position.setXYZ(e.x,e.y).add(this.offset),this.aABB.setAll(this.x,this.y,h,c)}).prototype).updateAll=function(t){this.owner=t.owner,this.collisionType=t.collisionType,this.type=t.type,this.subType=t.subType,this.offset.x=t.offset.x,this.offset.y=t.offset.y,this.position.x=t.position.x,this.position.y=t.position.y,this.size.x=t.size.x,this.size.y=t.size.y,this.radius=t.radius,this.aABB.setAll(this.x,this.y,this.width,this.height),"circle"===this.type?this.collides=r:"rectangle"===this.type?this.collides=o:this.collides=s},h.update=function(t,e){var i=t+this.offsetX,n=e+this.offsetY;this.position.setXYZ(i,n),this.aABB.move(i,n)},h.moveX=function(t){this.x=t,this.aABB.moveX(t)},h.moveY=function(t){this.y=t,this.aABB.moveY(t)},h.moveXY=function(t,e){this.x=t,this.y=e,this.aABB.move(t,e)},h.getAABB=function(){return this.aABB},h.setXWithEntityX=function(t){this.x=t+this.offsetX,this.aABB.moveX(this.x)},h.setYWithEntityY=function(t){this.y=t+this.offsetY,this.aABB.moveY(this.y)},h.multiply=function(t){var e=this.position,i=this.owner.position;e.subtractVector(i),e.multiply(t),this.offset.multiply(t),this.size.multiply(t),e.addVector(i),this.width=Math.abs(this.width),this.height=Math.abs(this.height),this.aABB.setAll(this.x,this.y,this.width,this.height)},h.containsPoint=function(t,e){var i=Math.pow;return this.aABB.containsPoint(t,e)&&("rectangle"===this.type||"circle"===this.type&&i(this.x-t,2)+i(this.y-e,2)<=i(this.radius,2))},h.toJSON=function(){var t={},e=this.size.width,i=this.size.height;return e/2!==this.regX&&(t.regX=this.regX),i/2!==this.regY&&(t.regY=this.regY),this.offset.x!==e/2-this.regX&&(t.offsetX=this.offset.x),this.offset.y!==i/2-this.regY&&(t.offsetY=this.offset.y),"circle"===this.type?t.radius=this.radius:(t.width=e,t.height=i),t.type=this.type,t},d.a.add(a,"CollisionShape",a,null,!0,f.a.dev),a)},function(t,e,i){var n=i(29).f,r=i(36),s=i(22)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,s)&&n(t,s,{configurable:!0,value:e})}},function(t,e,i){var n=i(6),r=i(53),s=i(16),o=i(110),a="["+o+"]",h=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),l=function(t,e,i){var r={},a=s((function(){return!!o[t]()||"​"!="​"[t]()})),h=r[t]=a?e(c):o[t];i&&(r[i]=h),n(n.P+n.F*a,"String",r)},c=l.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(h,"")),2&e&&(t=t.replace(u,"")),t};t.exports=l},function(t,e){t.exports={}},function(t,e,i){"use strict";var n=i(15),r=i(29),s=i(28),o=i(22)("species");t.exports=function(t){var e=n[t];s&&e&&!e[o]&&r.f(e,o,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){var n=i(33);t.exports=function(t,e,i){for(var r in e)n(t,r,e[r],i);return t}},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";var n,r,s,o,a,h,u,l,c,f,d,p,g=i(8),v=i(11),y=i(7),m=i(2),b=function(t){var e=t.data,i=e.originalEvent;return void 0!==i.pointerId?"point"+i.pointerId:i.type.substr(0,5)+(e.identifier||0)},_={};e.a=Object(m.a)({id:"Interactive",properties:{container:null,hitArea:null,hover:!1,relativeToSelf:!1},publicProperties:{buttonMode:!1},initialize:function(){this.pressed=!1,this.camera=v.a.setUp(),this.hitArea&&(this.container.hitArea=this.setHitArea(this.hitArea))},events:{"camera-update":function(t){this.camera.set(t.viewport)},"handle-render":function(){this.buttonMode!==this.container.buttonMode&&(this.container.buttonMode=this.buttonMode)},"dispatch-event":function(t){this.sprite.dispatchEvent(this.sprite,t.event,t.data)},"input-on":function(){this.removeInputListeners||this.addInputs()},"input-off":function(){this.removeInputListeners&&this.removeInputListeners()},pointerdown:function(){this.pressed=!0},pointermove:function(t){this.pressed&&_[b(t.pixiEvent)]===this&&this.owner.triggerEvent("pressmove",t)},pointerup:function(t){this.pressed&&(this.owner.triggerEvent("pressup",t),this.pressed=!1)},pointerupoutside:function(t){this.pressed&&(this.owner.triggerEvent("pressup",t),this.pressed=!1)},pointercancel:function(t){this.pressed&&(this.owner.triggerEvent("pressup",t),this.pressed=!1)},"set-hit-area":function(t){this.setHitArea(t)}},methods:{addInputs:(s=function(t,e){var i,n=this.camera,r=this.container,s=null,o=this.owner;r&&e.data.originalEvent&&(i=this.relativeToSelf?r.transform.worldTransform:r.parent.transform.worldTransform,s=y.a.setUp("event",e.data.originalEvent,"pixiEvent",e,"x",e.data.global.x/i.a+n.left,"y",e.data.global.y/i.d+n.top,"entity",o),o.trigger(t,s),s.recycle())},o=function(t){_[b(t)]=this,s.call(this,"pointerdown",t),t.currentTarget.mouseTarget=!0},a=function(t){s.call(this,"pointermove",t),t.currentTarget.mouseTarget=!0},h=function(t){s.call(this,"pointertap",t)},u=function(t){s.call(this,"pointerout",t)},l=function(t){s.call(this,"pointerover",t)},c=function(t){var e=b(t);_[e]===this&&(_[e]=null,s.call(this,"pointerup",t),t.currentTarget.mouseTarget=!1,t.currentTarget.removeDisplayObject&&t.currentTarget.removeDisplayObject())},f=function(t){var e=b(t);_[e]===this&&(_[e]=null,s.call(this,"pointerupoutside",t),t.currentTarget.mouseTarget=!1,t.currentTarget.removeDisplayObject&&t.currentTarget.removeDisplayObject())},d=function(t){var e=b(t);_[e]===this&&(_[e]=null,s.call(this,"pointercancel",t),t.currentTarget.mouseTarget=!1,t.currentTarget.removeDisplayObject&&t.currentTarget.removeDisplayObject())},p=function(t,e,i,n,r,s,o,a,h){var u="";for(u in _)_.hasOwnProperty(u)&&_[u]===this&&(_[u]=null);t.removeListener("pointerdown",e),t.removeListener("pointerup",i),t.removeListener("pointerupoutside",n),t.removeListener("pointercancel",r),t.removeListener("pointermove",s),t.removeListener("pointertap",o),this.hover&&(t.removeListener("pointerover",a),t.removeListener("pointerout",h)),t.interactive=!1,this.removeInputListeners=null},function(){var t,e,i,n,r,s,g=this.container,v=null,y=null;g.interactive=!0,t=o.bind(this),e=a.bind(this),i=c.bind(this),n=f.bind(this),r=d.bind(this),s=h.bind(this),g.addListener("pointerdown",t),g.addListener("pointerup",i),g.addListener("pointerupoutside",n),g.addListener("pointercancel",r),g.addListener("pointermove",e),g.addListener("pointertap",s),this.hover&&(v=l.bind(this),y=u.bind(this),g.addListener("pointerover",v),g.addListener("pointerout",y)),this.removeInputListeners=p.bind(this,g,t,i,n,r,e,s,v,y)}),setHitArea:(r={},function(t){var e,i=null;return e=JSON.stringify(t),(i=r[e])||(i=Array.isArray(t)?new g.j(t):t.radius?new g.d(t.x||0,t.y||0,t.radius):new g.k(t.x||0,t.y||0,t.width||this.owner.width||0,t.height||this.owner.height||0),r[e]=i),i}),toJSON:function(){return null},destroy:(n=function(){this.container.parent.removeChild(this.container),this.container=null},function(){this.removeInputListeners&&this.removeInputListeners(),this.camera.recycle(),this.container.mouseTarget&&this.container.parent&&(this.container.visible=!1,this.container.removeDisplayObject=n.bind(this))})},publicMethods:{}})},function(t,e,i){"use strict";var n,r,s,o,a,h,u,l,c,f=i(27),d=i(0),p=i(2);function g(t){throw new Error('"'+t+'" is read-only')}e.a=(s=function(t,e){return"default"===t?o.bind(null,e):u.bind(null,e,f.a.setUp(t))},o=function(t){return t},a=function(t,e,i){this.component.playAnimation(t,e,i)},h=function(t){this.component.stopAnimation(t)},u=function(t,e,i){return!!i.includes(e)&&t},l=function(t,e,i){this.owner.triggerEvent("play-animation",t,e,i)},c=function(t){this.owner.triggerEvent("stop-animation",t)},Object(p.a)({id:"RenderAnimator",properties:{animationStates:null,animationEvents:null,component:null,forcePlayThrough:!1,restart:!0,loop:!1},initialize:(n=function(t,e,i){this.override=t,this.owner.triggerEvent("play-animation",t,e,i)},r=function(t,e,i){this.override=t,this.playAnimation(t,e,i)},function(){var t=this.animationEvents,e=this.animationStates;if(this.override=!1,t)for(var i in t)t.hasOwnProperty(i)&&(this.component?this.addEventListener(i,r.bind(this.component,t[i],this.loop,this.restart)):this.addEventListener(i,n.bind(this,t[i],this.loop,this.restart)));if(this.followThroughs={},this.checkStates=d.a.setUp(),this.state=this.owner.state,this.stateChange=!0,this.lastState=-1,e)for(var o in e)if(e.hasOwnProperty(o)){var u=e[o];"!"===u[u.length-1]?(g("animation"),u=u.substring(0,u.length-1),this.followThroughs[u]=!0):this.followThroughs[u]=!1,this.checkStates.push(s(o,u))}this.waitingAnimation=!1,this.waitingState=0,this.playWaiting=!1,this.animationFinished=!1,this.component?(this.playAnimation=a,this.stopAnimation=h):(this.playAnimation=l,this.stopAnimation=c)}),events:{"state-changed":function(){this.stateChange=!0},"animation-ended":function(t){t===this.currentAnimation&&(this.override&&t===this.override&&(this.stateChange=!0,this.override=!1),this.waitingAnimation?(this.currentAnimation=this.waitingAnimation,this.waitingAnimation=!1,this.lastState=this.waitingState,this.animationFinished=!1,this.playAnimation(this.currentAnimation)):this.animationFinished=!0)},"update-animation":function(t){var e=0,i=!1;if(this.stateChange&&!this.override){for(this.state.has("visible")&&(this.visible=this.state.get("visible")),e=0;e<this.checkStates.length;e++)if(i=this.checkStates[e](this.state)){this.currentAnimation!==i?!this.followThroughs[this.currentAnimation]&&(!this.forcePlaythrough||this.animationFinished||this.lastState>=+e)?(this.currentAnimation=i,this.lastState=+e,this.animationFinished=!1,t?this.playAnimation(this.currentAnimation):this.stopAnimation(this.currentAnimation)):(this.waitingAnimation=i,this.waitingState=+e):this.waitingAnimation&&!this.followThroughs[this.currentAnimation]&&(this.waitingAnimation=!1);break}this.stateChange=!1}}},methods:{toJSON:function(){return null},destroy:function(){d.a.recycle(this.checkStates),this.checkStates=null,this.followThroughs=null,this.state=null}}}))},function(t,e,i){var n=i(52);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){var n=i(52),r=i(22)("toStringTag"),s="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?i:s?n(e):"Object"==(o=n(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e,i){var n=i(17),r=i(45),s=i(22)("species");t.exports=function(t,e){var i,o=n(t).constructor;return void 0===o||null==(i=n(o)[s])?e:r(i)}},function(t,e,i){"use strict";var n,r,s,o=i(7),a=i(27),h=i(0),u=i(13),l=i.n(u),c=i(19);e.a=(r=function(t){return t},(s=(n=function(t,e,i){this.event=t,this.trigger=i,this.active=!1,this.wasActive=!1,this.valid=!0,this.wasValid=!0,this.states=a.a.setUp(e),this.inputs=h.a.setUp(),this.stateSummary=o.a.setUp("pressed",!1,"released",!1,"triggered",!1)}).prototype).update=function(t){var e=this.stateSummary;return this.valid=t.includes(this.states),this.active=this.inputs.some(r),e.pressed=this.valid&&this.active,e.released=this.wasActive&&(!this.valid&&this.wasValid||this.valid&&!this.active),e.triggered=this.valid&&this.active&&!this.wasActive,this.wasValid=this.valid,this.wasActive=this.active,e.pressed||e.released||e.triggered},s.resolve=function(){this.trigger(this.event,this.stateSummary)},c.a.add(n,"ActionState",n,(function(){this.states.recycle(),this.stateSummary.recycle(),h.a.recycle(this.inputs)}),!0,l.a.dev),n)},function(t,e,i){"use strict";var n,r,s=i(9),o=i(13),a=i.n(o),h=i(19);e.a=((r=(n=function t(e){this.vector||(this.vector=s.a.setUp()),e instanceof t?this.copy(e):this.set.apply(this,arguments)}).prototype).set=function(t,e,i,n,r,s,o,a,h){this.occurred=t||!1,this.direction=e||null,this.position=i||null,this.deltaMovement=n||null,this.aABB=r||null,this.thisShape=s||null,this.thatShape=o||null,this.vector.set(a),this.stuck=h||0},r.copy=function(t){this.occurred=t.occurred,this.direction=t.direction,this.position=t.position,this.deltaMovement=t.deltaMovement,this.aABB=t.aABB,this.thisShape=t.thisShape,this.thatShape=t.thatShape,this.vector.setVector(t.vector),this.stuck=t.stuck},h.a.add(n,"CollisionData",n,null,!0,a.a.dev),n)},function(t,e,i){var n=i(26),r=i(15),s=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i(61)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,i){var n=i(38),r=i(25),s=i(63);t.exports=function(t){return function(e,i,o){var a,h=n(e),u=r(h.length),l=s(o,u);if(t&&i!=i){for(;u>l;)if((a=h[l++])!=a)return!0}else for(;u>l;l++)if((t||l in h)&&h[l]===i)return t||l||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var n=i(52);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){var n=i(22)("iterator"),r=!1;try{var s=[7][n]();s.return=function(){r=!0},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var s=[7],o=s[n]();o.next=function(){return{done:i=!0}},s[n]=function(){return o},t(s)}catch(t){}return i}},function(t,e,i){"use strict";var n=i(17);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,i){"use strict";var n=i(81),r=RegExp.prototype.exec;t.exports=function(t,e){var i=t.exec;if("function"==typeof i){var s=i.call(t,e);if("object"!=typeof s)throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},function(t,e,i){"use strict";i(154);var n=i(33),r=i(37),s=i(16),o=i(53),a=i(22),h=i(125),u=a("species"),l=!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),c=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();t.exports=function(t,e,i){var f=a(t),d=!s((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),p=d?!s((function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[u]=function(){return i}),i[f](""),!e})):void 0;if(!d||!p||"replace"===t&&!l||"split"===t&&!c){var g=/./[f],v=i(o,f,""[t],(function(t,e,i,n,r){return e.exec===h?d&&!r?{done:!0,value:g.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}})),y=v[0],m=v[1];n(String.prototype,t,y),r(RegExp.prototype,f,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},function(t,e,i){var n=i(44),r=i(149),s=i(120),o=i(17),a=i(25),h=i(122),u={},l={};(e=t.exports=function(t,e,i,c,f){var d,p,g,v,y=f?function(){return t}:h(t),m=n(i,c,e?2:1),b=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(s(y)){for(d=a(t.length);d>b;b++)if((v=e?m(o(p=t[b])[0],p[1]):m(t[b]))===u||v===l)return v}else for(g=y.call(t);!(p=g.next()).done;)if((v=r(g,m,p.value,e))===u||v===l)return v}).BREAK=u,e.RETURN=l},function(t,e,i){var n=i(15).navigator;t.exports=n&&n.userAgent||""},function(t,e,i){"use strict";var n=i(15),r=i(6),s=i(33),o=i(75),a=i(57),h=i(93),u=i(74),l=i(18),c=i(16),f=i(89),d=i(70),p=i(111);t.exports=function(t,e,i,g,v,y){var m=n[t],b=m,_=v?"set":"add",w=b&&b.prototype,x={},E=function(t){var e=w[t];s(w,t,"delete"==t?function(t){return!(y&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return y&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,i){return e.call(this,0===t?0:t,i),this})};if("function"==typeof b&&(y||w.forEach&&!c((function(){(new b).entries().next()})))){var T=new b,S=T[_](y?{}:-0,1)!=T,O=c((function(){T.has(1)})),A=f((function(t){new b(t)})),P=!y&&c((function(){for(var t=new b,e=5;e--;)t[_](e,e);return!t.has(-0)}));A||((b=e((function(e,i){u(e,b,t);var n=p(new m,e,b);return null!=i&&h(i,v,n[_],n),n}))).prototype=w,w.constructor=b),(O||P)&&(E("delete"),E("has"),v&&E("get")),(P||S)&&E(_),y&&w.clear&&delete w.clear}else b=g.getConstructor(e,t,v,_),o(b.prototype,i),a.NEED=!0;return d(b,t),x[t]=b,r(r.G+r.W+r.F*(b!=m),x),y||g.setStrong(b,t,v),b}},function(t,e,i){for(var n,r=i(15),s=i(37),o=i(60),a=o("typed_array"),h=o("view"),u=!(!r.ArrayBuffer||!r.DataView),l=u,c=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");c<9;)(n=r[f[c++]])?(s(n.prototype,a,!0),s(n.prototype,h,!0)):l=!1;t.exports={ABV:u,CONSTR:l,TYPED:a,VIEW:h}},function(t,e,i){"use strict";var n=i(436),r=i(438);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=b,e.resolve=function(t,e){return b(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?b(t,!1,!0).resolveObject(e):e},e.format=function(t){r.isString(t)&&(t=b(t));return t instanceof s?t.format():s.prototype.format.call(t)},e.Url=s;var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),c=["%","/","?",";","#"].concat(l),f=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=i(439);function b(t,e,i){if(t&&r.isObject(t)&&t instanceof s)return t;var n=new s;return n.parse(t,e,i),n}s.prototype.parse=function(t,e,i){if(!r.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),a=-1!==s&&s<t.indexOf("#")?"?":"#",u=t.split(a);u[0]=u[0].replace(/\\/g,"/");var b=t=u.join(a);if(b=b.trim(),!i&&1===t.split("#").length){var _=h.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=e?m.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=o.exec(b);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,b=b.substr(w.length)}if(i||w||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===b.substr(0,2);!E||w&&v[w]||(b=b.substr(2),this.slashes=!0)}if(!v[w]&&(E||w&&!y[w])){for(var T,S,O=-1,A=0;A<f.length;A++){-1!==(P=b.indexOf(f[A]))&&(-1===O||P<O)&&(O=P)}-1!==(S=-1===O?b.lastIndexOf("@"):b.lastIndexOf("@",O))&&(T=b.slice(0,S),b=b.slice(S+1),this.auth=decodeURIComponent(T)),O=-1;for(A=0;A<c.length;A++){var P;-1!==(P=b.indexOf(c[A]))&&(-1===O||P<O)&&(O=P)}-1===O&&(O=b.length),this.host=b.slice(0,O),b=b.slice(O),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var M=this.hostname.split(/\./),k=(A=0,M.length);A<k;A++){var I=M[A];if(I&&!I.match(d)){for(var L="",D=0,R=I.length;D<R;D++)I.charCodeAt(D)>127?L+="x":L+=I[D];if(!L.match(d)){var U=M.slice(0,A),F=M.slice(A+1),N=I.match(p);N&&(U.push(N[1]),F.unshift(N[2])),F.length&&(b="/"+F.join(".")+b),this.hostname=U.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=n.toASCII(this.hostname));var j=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+j,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!g[x])for(A=0,k=l.length;A<k;A++){var z=l[A];if(-1!==b.indexOf(z)){var X=encodeURIComponent(z);X===z&&(X=escape(z)),b=b.split(z).join(X)}}var Y=b.indexOf("#");-1!==Y&&(this.hash=b.substr(Y),b=b.slice(0,Y));var H=b.indexOf("?");if(-1!==H?(this.search=b.substr(H),this.query=b.substr(H+1),e&&(this.query=m.parse(this.query)),b=b.slice(0,H)):e&&(this.search="",this.query={}),b&&(this.pathname=b),y[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var G=this.search||"";this.path=j+G}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",s=!1,o="";this.host?s=t+this.host:this.hostname&&(s=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(o=m.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==s?(s="//"+(s||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+s+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+n},s.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(r.isString(t)){var e=new s;e.parse(t,!1,!0),t=e}for(var i=new s,n=Object.keys(this),o=0;o<n.length;o++){var a=n[o];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),u=0;u<h.length;u++){var l=h[u];"protocol"!==l&&(i[l]=t[l])}return y[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!y[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var d=c[f];i[d]=t[d]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||v[t.protocol])i.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),i.pathname=p.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var g=i.pathname||"",m=i.search||"";i.path=g+m}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var b=i.pathname&&"/"===i.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=_||b||i.host&&t.pathname,x=w,E=i.pathname&&i.pathname.split("/")||[],T=(p=t.pathname&&t.pathname.split("/")||[],i.protocol&&!y[i.protocol]);if(T&&(i.hostname="",i.port=null,i.host&&(""===E[0]?E[0]=i.host:E.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),w=w&&(""===p[0]||""===E[0])),_)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,E=p;else if(p.length)E||(E=[]),E.pop(),E=E.concat(p),i.search=t.search,i.query=t.query;else if(!r.isNullOrUndefined(t.search)){if(T)i.hostname=i.host=E.shift(),(C=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=C.shift(),i.host=i.hostname=C.shift());return i.search=t.search,i.query=t.query,r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!E.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var S=E.slice(-1)[0],O=(i.host||t.host||E.length>1)&&("."===S||".."===S)||""===S,A=0,P=E.length;P>=0;P--)"."===(S=E[P])?E.splice(P,1):".."===S?(E.splice(P,1),A++):A&&(E.splice(P,1),A--);if(!w&&!x)for(;A--;A)E.unshift("..");!w||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),O&&"/"!==E.join("/").substr(-1)&&E.push("");var C,M=""===E[0]||E[0]&&"/"===E[0].charAt(0);T&&(i.hostname=i.host=M?"":E.length?E.shift():"",(C=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=C.shift(),i.host=i.hostname=C.shift()));return(w=w||i.host&&E.length)&&!M&&E.unshift(""),E.length?i.pathname=E.join("/"):(i.pathname=null,i.path=null),r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},s.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){"use strict";var n,r,s=i(0),o=i(7);e.a=((r=(n=function(t,e){this.type=t,this.owner=e,this.publicMethods=o.a.setUp(),this.listener=o.a.setUp("events",s.a.setUp(),"messages",s.a.setUp())}).prototype).toString=function(){return"[Component "+this.type+"]"},r.toJSON=null,r.destroy=function(){var t="";if(this.listener){for(t in this._destroy&&this._destroy(),this.publicMethods)this.publicMethods.hasOwnProperty(t)&&this.removeMethod(t);this.publicMethods.recycle(),this.removeEventListeners(),s.a.recycle(this.listener.events),s.a.recycle(this.listener.messages),this.listener.recycle(),this.listener=null}},r.removeEventListeners=function(t){var e=0,i=null,n=null;if(t)for(e=0;e<t.length;e++)this.removeEventListener(t[e]);else{for(i=this.listener.events,n=this.listener.messages,e=0;e<i.length;e++)this.owner.off(i[e],n[e]);i.length=0,n.length=0}},r.addEventListener=function(t,e,i){var n=e.bind(this);return this.listener.events.push(t),this.listener.messages.push(n),this.owner.on(t,n,i),n},r.addMethod=function(t,e){this.owner[t]?platypus.debug.warn(this.owner.type+': Entity already has a method called "'+t+'". Method not added.'):(this.owner[t]=function(){return e.apply(this,arguments)}.bind(this),this.publicMethods[t]=e)},r.removeEventListener=function(t,e){var i=0,n=this.listener.events,r=this.listener.messages;for(i=n.length-1;i>=0;i--)n[i]!==t||e&&r[i]!==e||(this.owner.off(t,r[i]),Object(s.c)(this.listener.events,i),Object(s.c)(this.listener.messages,i))},r.removeMethod=function(t){this.owner[t]?delete this.owner[t]:platypus.debug.warn(this.owner.type+': Entity does not have a method called "'+t+'".'),delete this.publicMethods[t]},n.getAssetList=function(){return s.a.setUp()},n)},function(t,e,i){"use strict";var n,r,s=i(0),o=i(13),a=i.n(o),h=i(19);e.a=((r=(n=function(){this.xData||this.yData?this.reset():(this.xData=s.a.setUp(),this.yData=s.a.setUp(),this.xDeltaMovement=1/0,this.yDeltaMovement=1/0)}).prototype).tryToAddX=function(t){return!(t.deltaMovement>this.xDeltaMovement||(t.deltaMovement<this.xDeltaMovement&&this.resetX(t.deltaMovement),this.xData.push(t),0))},r.tryToAddY=function(t){return!(t.deltaMovement>this.yDeltaMovement||(t.deltaMovement<this.yDeltaMovement&&this.resetY(t.deltaMovement),this.yData.push(t),0))},r.reset=function(){this.resetX(1/0),this.resetY(1/0)},r.resetX=function(t){for(var e=this.xData,i=e.length;i--;)e[i].recycle();e.length=0,this.xDeltaMovement=t},r.resetY=function(t){for(var e=this.yData,i=e.length;i--;)e[i].recycle();e.length=0,this.yDeltaMovement=t},h.a.add(n,"CollisionDataContainer",n,null,!0,a.a.dev),n)},function(t,e,i){"use strict";var n=i(35),r=i(8),s=i(0),o=i(50),a=i(7),h=i(23),u=i(40),l=i(30);function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.volume=1,this.player=l.a,this.playingAudio=s.a.setUp(),this.sounds=s.a.setUp()}var e,i,n;return e=t,(i=[{key:"play",value:function(t,e){var i=this,n=this.player.play(t,e);return n.initialVolume=n.volume,this.player.volume(t,n.initialVolume*this.volume),this.playingAudio.push(n),this.sounds.push(t),n.on("end",(function(){var t=i.playingAudio.indexOf(n);Object(s.c)(i.playingAudio,t),Object(s.c)(i.sounds,t)})),n}},{key:"setVolume",value:function(t){var e=this.playingAudio;this.volume=t;for(var i=0;i<e.length;i++){var n=e[i],r=this.sounds[i];this.player.volume(r,n.initialVolume*this.volume)}}},{key:"destroy",value:function(){s.a.recycle(this.playingAudio),this.playingAudio=null,s.a.recycle(this.sounds),this.sounds=null}}])&&c(e.prototype,i),n&&c(e,n),t}(),d=i(20);function p(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var g=function(){function t(e,i){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var s=i.name+"-data",o=window.localStorage.getItem(s),a=i.storageKeys||null,h=function(t){if(t&&t.data){var e=t.data;for(var i in e)e.hasOwnProperty(i)&&(r.map.has(i)?r.map.set(i,e[i]):r.addKey(i,e[i]))}};if(this.map=d.a.setUp(),this.storageKey=s,this.connected=!1,a)for(var u=0;u<a.length;u++)this.addKey(a[u],null);try{h({data:JSON.parse(o)})}catch(t){}e.container.on("connected",(function(){r.connected=!0,n.f.read(r.storageKey).then(h).catch((function(t){platypus.debug.warn("Storage: connected but received an error",t)}))}))}var e,i,r;return e=t,(i=[{key:"addKey",value:function(t,e){this.map.set(t,e),Object.defineProperty(this,t,{get:function(){return this.map.get(t)},set:function(e){this.map.set(t,e),this.save()},enumerable:!0})}},{key:"get",value:function(t){return this.map.has(t)||this.addKey(t,null),this[t]}},{key:"save",value:function(){var t=this.map.toJSON();this.connected?n.f.write(this.storageKey,t).catch((function(t){platypus.debug.warn("Storage: tried to save but received an error",t)})):window.localStorage.setItem(this.storageKey,JSON.stringify(t))}},{key:"set",value:function(t,e){this.map.has(t)?this[t]=e:(this.addKey(t,e),this.save())}}])&&p(e.prototype,i),r&&p(e,r),t}(),v=i(43);function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var x,E,T=function(t){function e(t,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?_(t):e}(this,b(e).call(this))).game=t,n.assetCache=i,n._onSoundFinished=n._onSoundFinished.bind(_(n)),n._updateSilence=n._updateSilence.bind(_(n)),n._syncCaptionToSound=n._syncCaptionToSound.bind(_(n)),n._listHelper=[],n.trackSound=!1,n.paused=!1,n.voList=null,n._listCounter=0,n._currentVO=null,n._soundInstance=null,n._callback=null,n._cancelledCallback=null,n._trackedSounds=[],n._timer=0,n._captions=null,n.volume=1,n.captionMute=!0,n.currentlyLoadingAudio=!1,n.playQueue=s.a.setUp(),n}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(e,t),i=e,(n=[{key:"getElapsed",value:function(){var t,e=0;if(!this.voList)return 0;for(var i=0;i<this._listCounter;++i){var n=this.voList[i];"string"==typeof n?e+=l.a.duration(n):"number"==typeof n&&(e+=n)}if((t=this._listCounter)<this.voList.length){var r=this.voList[t];"string"==typeof r?this._soundInstance&&(e+=1e3*this._soundInstance._elapsed):"number"==typeof r&&(e+=r-this._timer)}return e}},{key:"pause",value:function(){!this.paused&&this.playing&&(this.paused=!0,this._soundInstance&&this._soundInstance.pause(),this.game.off("tick",this._syncCaptionToSound),this.game.off("tick",this._updateSilence))}},{key:"resume",value:function(){this.paused&&(this.paused=!1,this._soundInstance&&this._soundInstance.resume(),this._captions.activeCaption?this._soundInstance&&this.game.on("tick",this._syncCaptionToSound):this.game.on("tick",this._updateSilence))}},{key:"play",value:function(t,e,i){this.currentlyLoadingAudio?this.playQueue.push(a.a.setUp("idOrList",t,"callback",e,"cancelledCallback",i)):(this.stop(),this._listCounter=-1,"string"==typeof t?(this._listHelper.length=0,this._listHelper[0]=t,this.voList=this._listHelper):this.voList=t,this._callback=e,this._cancelledCallback=!0===i?e:i,this._onSoundFinished())}},{key:"_onSoundFinished",value:function(){if(this._listCounter>=0&&this.trigger("end",this._currentVO),this.game.off("tick",this._syncCaptionToSound),this.game.off("tick",this._updateSilence),this._captions&&this._captions.activeCaption&&this._soundInstance){var t=this._captions.activeCaption;t.lineIndex=t.lines.length}if(this._soundInstance=null,this._listCounter++,this._listCounter>=this.voList.length){var e=this._callback;this._captions&&this._captions.stop(),this._currentVO=null,this._cancelledCallback=null,this._callback=null,e&&e()}else this._currentVO=this.voList[this._listCounter],"string"==typeof this._currentVO?(this._playSound(),this.trigger("start",this._currentVO)):"function"==typeof this._currentVO?(this._currentVO(),this._onSoundFinished()):(this._timer=this._currentVO,this._currentVO=null,this.game.on("tick",this._updateSilence),this.trigger("start",null))}},{key:"_updateSilence",value:function(t){this._timer-=t.delta,this._timer<=0&&this._onSoundFinished()}},{key:"_syncCaptionToSound",value:function(t){this._soundInstance&&this._captions.update(t.delta/1e3)}},{key:"_playSound",value:function(){var t=this,e=function(){if(t._soundInstance=l.a.play(t._currentVO,t._onSoundFinished),t._soundInstance.volume=t.volume,t._captions&&(t._captions.start(t._currentVO),t.game.on("tick",t._syncCaptionToSound)),t.playQueue.length){var e=Object(s.c)(t.playQueue,0);t.play(e.idOrList,e.callback,e.cancelledCallback),e.recycle()}else for(var i=t._listCounter+1;i<t.voList.length;++i){var n=t.voList[i];if("string"==typeof n){if(!t.assetCache.has(n)){var r=s.a.setUp(n+".{ogg,mp3}");t.assetCache.load(r),s.a.recycle(r)}break}}};if(this.trackSound&&-1===this._trackedSounds.indexOf(this._currentVO)&&this._trackedSounds.push(this._currentVO),this.assetCache.has(this._currentVO))e();else{var i=s.a.setUp({id:this._currentVO,src:this._currentVO+".{ogg,mp3}"});this.currentlyLoadingAudio=!0,this.assetCache.load(i,null,(function(){t.currentlyLoadingAudio=!1,e()})),s.a.recycle(i)}}},{key:"stop",value:function(){var t=this._cancelledCallback;this.paused=!1,this._soundInstance&&(this._soundInstance.stop(),this._soundInstance=null),this._currentVO=null,this._captions&&this._captions.activeCaption&&this._captions.stop(),this.game.off("tick",this._syncCaptionToSound),this.game.off("tick",this._updateSilence),this.voList=null,this._timer=0,this._callback=null,this._cancelledCallback=null,t&&t()}},{key:"setVolume",value:function(t){this.volume=t,this._soundInstance&&(this._soundInstance.volume=this.volume)}},{key:"setCaptionMute",value:function(t){this.captionMute=t,this._captions&&(this._captions.renderer.renderTarget.style.display=t?"none":"block")}},{key:"unloadSound",value:function(){for(var t=this.assetCache,e=this._trackedSounds,i=0;i<e.length;i++){var n=e[i];t.delete(n)&&l.a.remove(n)}e.length=0}},{key:"destroy",value:function(){this.stop(),this.voList=null,this._listHelper=null,this._currentVO=null,this._soundInstance=null,this._callback=null,this._cancelledCallback=null,this._trackedSounds=null,this._captions=null}},{key:"playing",get:function(){return null!==this._currentVO||this._timer>0}},{key:"currentVO",get:function(){return this._currentVO}},{key:"captions",set:function(t){this._captions=t,t&&(t.selfUpdate=!1,this.setCaptionMute(this.captionMute))},get:function(){return this._captions}},{key:"currentPosition",get:function(){return this.playing?this._soundInstance?this._soundInstance.position:this._currentVO?this._timer:this.voList[this._listCounter]-this._timer:0}},{key:"currentDuration",get:function(){return this.playing?this._soundInstance?l.a.duration(this._soundInstance.alias):this._currentVO&&this._captions?this._captions.currentDuration:this.voList[this._listCounter]:0}}])&&m(i.prototype,n),r&&m(i,r),e}(u.a),S=i(13),O=i.n(S),A=i(41),P=(x=function(t,e){return Math.floor(204*t/e)},E=function(t,e){var i,n=0,r=0,o=0,a=0,h=null;return e&&(h=Object(A.a)(e,".")),e&&3===h.length?(r=parseInt(h[0],10),o=parseInt(h[1],10),a=parseInt(h[2],10)):(r=t.charCodeAt(0)||0,o=t.charCodeAt(1)||0,a=t.charCodeAt(2)||0,r-=n=Math.min(r,o,a),o-=n,a-=n),h&&s.a.recycle(h),i=Math.max(r,o,a,1),"color: #ffffff; line-height: 1.5em; border-radius: 6px; background-color: rgb("+x(r,i)+","+x(o,i)+","+x(a,i)+");"},r.u.skipHello(),function(t){var e=t.options,i=document.getElementsByName("author"),n=i.length&&i[0].getAttribute("content")||"",o=n?"by "+n:"",a=e.name||t.name||document.title||"",h="Platypus "+platypus.version,u=e.version||"(?)",l=s.a.setUp(),c=s.a.setUp(),f=platypus.springroll,d=platypus.supports;f&&l.push("SpringRoll "+f.version),l.push("Pixi.js "+r.r),"(?)"!==u&&(a+=" "+u),d.firefox||d.chrome?(console.log("%c "+a+" %c "+o,E(a,a.substr(a.lastIndexOf(" ")-a.length+1)),"line-height: 1.5em;"),l.push(h),c=function(t,e,i){var n=0,r="",o=s.a.setUp(t);for(n=0;n<i.length;n++)r=i[n],o.push(E(r,r.substr(r.lastIndexOf(" ")-r.length+1)),"line-height: 1.5em;");return o}("Using %c "+l.join(" %c %c ")+" %c ",0,l),console.log.apply(console,c),s.a.recycle(c)):console.log('--- "'+a+'" '+o+" - Using "+l.join(", ")+", and "+h+" ---"),s.a.recycle(l)});function C(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function M(t,e){return!e||"object"!==D(e)&&"function"!=typeof e?I(t):e}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(){var t=window.XMLHttpRequest,e=function e(i,n){var r=0,s="",o=0,a=function(){(o-=1)||n(i)},h=function(t,i,n){e(t[i],(function(e){t[i]=e,n(e)}))};if(i){if(Array.isArray(i)){if(o=i.length)for(r=0;r<i.length;r++)h(i,r,a);else n(i);return}if("object"===D(i)){if(i.src&&i.src.length>5&&".json"===i.src.substring(i.src.length-5).toLowerCase())e(i.src,(function(t){i.src!==t&&(i=t),n(i)}));else{for(s in i)i.hasOwnProperty(s)&&(o+=1);if(o)for(s in i)i.hasOwnProperty(s)&&h(i,s,a);else n(i)}return}if("string"==typeof i&&i.length>5&&".json"===i.substring(i.length-5).toLowerCase())return void function(e,i){var n=new t;n.open("GET",e,!0),n.responseType="text",n.onload=function(){var t=null;if(200===n.status)try{t=JSON.parse(n.responseText)}catch(t){platypus.debug.warn('Error parsing "'+e+'": '+t.message)}else platypus.debug.warn('Error opening "'+e+'": '+n.description);i(t)},n.send()}(i,(function(t){"object"===D(t)?e(t,n):n(t)}))}n(i)};return function(t){function i(t,o,a){var h;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var u=o.display||{},c=function(t,e){var i=this,o=window.devicePixelRatio||1,h=r.q.shared;if(platypus.game=this,O.a.dev&&(e.debug=!0),this.settings=e,e.captions){var u=document.getElementById("captions")||function(t){var e=document.createElement("div");return e.setAttribute("id","captions"),t.parentNode.insertBefore(e,t),e}(this.canvas);this.voPlayer.captions=new n.b(e.captions,new n.e(u))}if(this.stage=new r.e,this.renderer=new r.m({width:this.canvas.width,height:this.canvas.height,view:this.canvas,transparent:!!t.transparent,antialias:!!t.antiAlias,preserveDrawingBuffer:!!t.preserveDrawingBuffer,clearBeforeRender:!!t.clearView,backgroundColor:t.backgroundColor||0,autoResize:!1}),t.aspectRatio){var l=t.aspectRatio.split("-"),c=l[0].split(":"),f=l[l.length-1].split(":"),d=c[0]/c[1],p=f[0]/f[1],g=Math.min(d,p),v=Math.max(d,p);this.scaleManager=new n.d((function(t){var e=t.width,n=t.height,r=i.renderer,s=document.getElementById("content"),a=e/g>>0,h=n*v>>0,u=n*o,l=e*o;n>a?(s.style.height=a+"px",s.style.top=((n-a)/2>>0)+"px",s.style.width="",s.style.left="",u=a*o):e>h?(s.style.width=h+"px",s.style.left=((e-h)/2>>0)+"px",s.style.height="",s.style.top="",l=h*o):(s.style.height="",s.style.top="",s.style.width="",s.style.left=""),r.resize(l,u),r.render(i.stage)}))}else this.scaleManager=new n.d((function(t){var e=t.width,n=t.height,r=i.renderer;r.resize(e*o,n*o),r.render(i.stage)}));this.scaleManager.onResize({target:window}),a&&a(this),e.hideHello||P(this),platypus.debug.general("Game config loaded.",e),window.getEntityById=function(t){return this.getEntityById(t)}.bind(this),window.getEntitiesByType=function(t){return this.getEntitiesByType(t)}.bind(this),window.getVisibleSprites=function(t,e){var i=0;if(e=e||s.a.setUp(),!(t=t||this.stage).texture&&t.visible){for(i=0;i<t.children.length;i++)window.getVisibleSprites(t.children[i],e);return e}return t.visible?(e.push(t),e):e}.bind(this),this.ticker=h,this.tickInstance=this.tick.bind(this,h,{delta:0,deltaMS:0,deltaTime:0,elapsed:0}),h.add(this.tickInstance),this.paused=!1,O.a.dev&&function(t,e){var i=document.createElement("div"),n=0;i.id="framerate",i.innerHTML="FPS: 00.000",e.parentNode.insertBefore(i,e),t.add(function(){(n+=this.deltaMS)>=1e3&&(i.innerHTML="FPS: "+this.FPS.toFixed(3),n=0)}.bind(t))}(h,this.canvas)},d=null;return h=M(this,k(i).call(this)),t?(h.options=o,o.canvasId&&(d=window.document.getElementById(o.canvasId)),d||(d=window.document.createElement("canvas"),window.document.body.appendChild(d),o.canvasId&&d.setAttribute("id",o.canvasId)),d.width=d.offsetWidth,d.height=d.offsetHeight,d.ondragstart=function(){return!1},h.canvas=d,h.voPlayer=new T(I(h),platypus.assetCache),h.voPlayer.trackSound=platypus.supports.iOS,h.sfxPlayer=new f,h.springroll=function(){var t=this,e=new n.a({features:o.features||{sfx:!0,vo:!0,music:!0,sound:!0,captions:!0}}),i=e.state;return i.pause.subscribe(function(t){t?this.paused||(this.ticker.remove(this.tickInstance),this.paused=!0,l.a.pauseAll()):this.paused&&(this.ticker.add(this.tickInstance),this.paused=!1,l.a.resumeAll())}.bind(this)),i.soundVolume.subscribe((function(t){})),i.musicVolume.subscribe((function(e){e?t.triggerOnChildren("mute-music"):t.triggerOnChildren("unmute-music")})),i.voVolume.subscribe((function(t){platypus.game.voPlayer.setVolume(t)})),i.captionsMuted.subscribe((function(t){platypus.game.voPlayer.setCaptionMute(t)})),i.sfxVolume.subscribe((function(t){platypus.game.sfxPlayer.setVolume(t)})),this.storage=new g(e,o),e}.bind(I(h))(),h.layers=s.a.setUp(),h.sceneLayers=s.a.setUp(),h.loading=s.a.setUp(),h.loadingQueue=s.a.setUp(),"string"==typeof t?e(t,c.bind(I(h),u)):c.bind(I(h))(u,t),h):(platypus.debug.warn("No game definition is supplied. Game not created."),M(h))}var u,c,d;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(i,t),u=i,(c=[{key:"tick",value:function(t,e,i){var n=this.loading;if(e.delta=e.deltaMS=t.deltaMS,e.deltaTime=i,e.elapsed+=t.deltaMS,n.length){for(var r=0;r<n.length;r++)n[r]();n.length=0}v.a.update(),this.triggerEvent("tick",e),this.triggerOnChildren("tick",e),this.renderer.render(this.stage)}},{key:"triggerOnChildren",value:function(){for(var t=this.layers,e=0;e<t.length;e++){var i;(i=t[e]).trigger.apply(i,arguments)}}},{key:"load",value:function(t,e,i,n){var r=this;this.loadingQueue.push(t),this.loading.push((function(){for(var u=Array.isArray(t)?Object(s.b)(t):s.a.setUp(t),l=s.a.setUp(),c=s.a.setUp(),f=s.a.setUp((function(e){var i=r.loadingQueue,n=i.indexOf(t);if(0===n)for(i.shift(),e();"function"==typeof i[0];){var s=i[0];i.shift(),s()}else i[n]=e})),d=function(t){var e=t?t.type||t:null,i=null;if(!e)return platypus.debug.warn("Game: A layer id or layer definition must be provided to load a layer."),null;if("string"==typeof e){if(!r.settings.entities[e])return platypus.debug.warn('Game: A layer with the id "'+e+'" has not been defined in the game settings.'),null;i=r.settings.entities[e]}else i=t;return i},p=function(t,e,i,n,r,o,u){var l=this,c=a.a.setUp(r);if(c.stage=this.stage,c.parent=this,n){var f=a.a.setUp("count",1,"release",(function(){f.count-=1,f.count||(f.recycle(),u())})),d=new h.a(n,{properties:c},(function(e){t[i]=e,f.release()}));d.unloadLayer=function(){var t=function(){0==(n-=1)&&window.setTimeout((function(){d.triggerEvent("layer-unloaded"),platypus.debug.olive("Layer unloaded: "+d.id),Object(s.c)(l.layers,l.layers.indexOf(d)),d.destroy(),platypus.assetCache.unload(e[i]),s.a.recycle(e[i])}),1)},n=1;d.triggerEvent("unload-layer",(function(){n+=1}),t),platypus.debug.olive("Layer unloading: "+d.id),t()},d.triggerEvent("layer-loaded",o,f)}},g=n?"string"==typeof n?function(t,e){t.progress=e,this.triggerOnChildren("load-progress",t)}.bind(r,a.a.setUp("id",n,"progress",0)):n:null,v=0;v<u.length;v++){var y=u[v],m=d(y),b=y&&y.type&&y.properties||null;f.push(p.bind(r,u,l,v,m,b,e)),u[v]=m,c[v]=b}!function(t,e,i,n,r,o){for(var u=s.a.setUp(),l=0;l<t.length;l++){for(var c=a.a.setUp(e[l]),f=n[l]=h.a.getAssetList(t[l],c,i),d=0;d<f.length;d++)u.push(f[d]);c.recycle()}platypus.assetCache.load(u,r,o)}(u,c,e,l,g,(function(){o.a.setUp(f,(function(){for(var t=0;t<u.length;t++){var n=u[t];r.layers.push(n),i&&r.sceneLayers.push(n),platypus.debug.olive("Layer live: "+n.id),n.triggerEvent("layer-live",e)}}))}))}))}},{key:"loadScene",value:function(t,e){var i=this.sceneLayers,n=t;if("string"==typeof n&&(n=this.settings.scenes&&this.settings.scenes[n]),n){for(n.layers&&(n=n.layers);i.length;)this.unload(i[0]);this.load(n,e,!0,"scene")}else platypus.debug.warn('Game: "'+t+'" is an invalid scene.')}},{key:"unload",value:function(t){var e,i=t;if("string"==typeof i)for(var n=0;n<this.layers.length;n++)if(this.layers[n].type===i){i=this.layers[n];break}(e=this.sceneLayers.indexOf(i))>=0&&Object(s.c)(this.sceneLayers,e),i.unloadLayer()}},{key:"getEntityById",value:function(t){var e=0,i=null;for(e=0;e<this.layers.length;e++){if(this.layers[e].id===t)return this.layers[e];if(this.layers[e].getEntityById&&(i=this.layers[e].getEntityById(t)))return i}return null}},{key:"getEntitiesByType",value:function(t){var e=0,i=null,n=s.a.setUp();for(e=0;e<this.layers.length;e++)this.layers[e].type===t&&n.push(this.layers[e]),this.layers[e].getEntitiesByType&&(i=this.layers[e].getEntitiesByType(t),Object(s.d)(n,i),s.a.recycle(i));return n}},{key:"destroy",value:function(){for(var t=this.layers,e=0;e<t.length;e++)t[e].destroy();t.recycle()}}])&&C(u.prototype,c),d&&C(u,d),i}(u.a)}()},function(t,e,i){"use strict";var n,r,s,o,a,h=i(7),u=i(0),l=i(2);e.a=(n=function(t,e){return t.time-e.time},r=function(t,e){var i=0;for(i=0;i<t.length;i++)e.push(h.a.setUp("event",t[i].event,"time",t[i].time||0,"message",t[i].message));return i&&e.sort(n),e},s=function(t,e,i){var r=0,s=i.getElapsed();for(r=0;r<t.length;r++)e.push(h.a.setUp("event",t[r].event,"time",(t[r].time||0)+s,"message",t[r].message||null));r&&e.sort(n)},o=function(t,e,i){var n=0,r=u.a.setUp();for(n=0;n<t.length;n++)t[n].sound?(t[n].events&&r.push(s.bind(this,t[n].events,e,i)),r.push(t[n].sound)):r.push(t[n]);return r},a=function(t,e){this.playingAudio=!1,this.owner.destroyed?this.player.unloadSound():(this.checkTimeEvents(!0),this.player.unloadSound(),this.owner.triggerEvent("sequence-complete")),u.a.recycle(e)},Object(l.a)({id:"AudioVO",properties:{audioMap:null},initialize:function(){var t="";if(this.eventList=u.a.setUp(),this.playingAudio=!1,this.player=platypus.game.voPlayer,this.audioMap)for(t in this.audioMap)this.audioMap.hasOwnProperty(t)&&this.addEventListener(t,this.playSound.bind(this,this.audioMap[t]));this.paused=!1},events:{"handle-render":function(){this.paused||this.checkTimeEvents(!1)},"play-voice-over":function(t){this.playSound(t)},"stop-audio":function(){this.player.stop(),this.player.voList=[]}},methods:{checkTimeEvents:function(t){var e=null,i=this.eventList,n=0,r=this.owner;if(i&&i.length)for(n=this.player.getElapsed();i.length&&(t||i[0].time<=n);)e=i.shift(),r.trigger(e.event,e.message),e.recycle()},destroy:function(){this.playingAudio&&(this.player.stop(),this.player.voList=[]),u.a.recycle(this.eventList),this.eventList=null},playSound:function(t,e){var i=null,n=u.a.setUp(),s=this.player;"string"==typeof t?i=u.a.setUp(t):Array.isArray(t)?i=o(t,n,s):(t.events&&r(t.events,n),i=Array.isArray(t.sound)?o(t.sound,n,s):u.a.setUp(t.sound)),e&&e.events&&r(e.events,n),s.play(i,a.bind(this,!0,i),a.bind(this,!1,i)),u.a.recycle(this.eventList),this.eventList=n,this.playingAudio=!0}}}))},function(t,e,i){"use strict";var n={};(0,i(58).assign)(n,i(442),i(445),i(174)),t.exports=n},function(t,e,i){"use strict";var n,r,s=i(0),o=i(7),a=i(55),h=i(78),u=i(42),l=i(2);e.a=Object(l.a)({id:"RenderSprite",properties:{animationStates:null,animationEvents:null,spriteSheet:null,animationMap:null,mask:null,interactive:!1,offsetX:0,offsetY:0,offsetZ:0,restart:!0,mirror:!1,flip:!1,visible:!0,eventBased:!1,stateBased:!0,cache:!1,forcePlayThrough:!1,ignoreOpacity:!1,scale:1,scaleX:1,scaleY:1,localScaleX:1,localScaleY:1,skew:0,skewX:0,skewY:0},initialize:(r=function(t){this.owner.triggerEvent("animation-ended",t)},function(){var t,e="",i=null,n=a.a.formatSpriteSheet(this.spriteSheet);n===a.a.EmptySpriteSheet&&platypus.debug.warn('Entity "'+this.owner.type+'": RenderSprite sprite sheet not defined.'),t=function(t,e){var i=null,n="";if(t)return t;if(Array.isArray(e.frames)&&1===e.frames.length)return null;for(n in i={},e.animations)e.animations.hasOwnProperty(n)&&(i[n]=n);return i}(this.animationMap,n),this.stateBased=t&&this.stateBased,this.eventBased=t&&this.eventBased,t&&(e=t.default||"",i=o.a.setUp("animationEvents",this.eventBased?this.animationEvents||t:null,"animationStates",this.stateBased?this.animationStates||t:null,"forcePlayThrough",this.forcePlayThrough,"restart",this.restart,"component",this),this.owner.addComponent(new h.a(this.owner,i)),i.recycle()),this.sprite=new a.a(n,e),this.sprite.onComplete=r.bind(this),this.sprite.x=this.offsetX,this.sprite.y=this.offsetY,this.sprite.z=this.offsetZ,this.sprite.scale.x=this.localScaleX,this.sprite.scale.y=this.localScaleY,this.owner.container?this.addToContainer():(i=o.a.setUp("interactive",this.interactive,"mask",this.mask,"mirror",this.mirror,"flip",this.flip,"visible",this.visible,"cache",this.cache,"ignoreOpacity",this.ignoreOpacity,"scaleX",this.scaleX,"scaleY",this.scaleY,"skewX",this.skewX,"skewY",this.skewY),this.owner.addComponent(new u.a(this.owner,i,this.addToContainer.bind(this))),i.recycle()),n.recycleSpriteSheet()}),events:{"handle-render":function(t){this.sprite&&(this.owner.triggerEvent("update-animation",!0),this.sprite.update(t.delta))},"stop-animation":function(t){this.stopAnimation(t)},"play-animation":function(t,e,i){this.playAnimation(t,e,i)}},methods:{addToContainer:function(){var t=this.owner.container;t.addChild(this.sprite),t.reorder=!0},playAnimation:function(t,e,i){var n=this.sprite;t&&n.has(t)?n.gotoAndPlay(t,e,i):n.play()},stopAnimation:function(t){var e=this.sprite;t&&e.has(t)?e.gotoAndStop(t):e.stop()},destroy:function(){this.owner.container.removeChild(this.sprite),this.sprite.destroy(),this.sprite=null}},getAssetList:(n=function t(e,i){if(e){if("string"==typeof e)return t(i[e],i);if(e.images)return Object(s.b)(e.images)}return s.a.setUp()},function(t,e,i){var r=null,o=0,a=null,h=platypus.game.settings.spriteSheets,u=t.spriteSheet||e.spriteSheet||i&&i.spriteSheet||null;if(Array.isArray(u)){for(o=u.length,a=s.a.setUp();o--;)r=n(u[o],h),Object(s.d)(a,r),s.a.recycle(r);return a}return n(u,h)})})},function(t,e,i){var n=i(18),r=i(15).document,s=n(r)&&n(r.createElement);t.exports=function(t){return s?r.createElement(t):{}}},function(t,e,i){e.f=i(22)},function(t,e,i){var n=i(85)("keys"),r=i(60);t.exports=function(t){return n[t]||(n[t]=r(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var n=i(15).document;t.exports=n&&n.documentElement},function(t,e,i){var n=i(18),r=i(17),s=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=i(44)(Function.call,i(47).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return s(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:s}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,i){var n=i(18),r=i(109).set;t.exports=function(t,e,i){var s,o=e.constructor;return o!==i&&"function"==typeof o&&(s=o.prototype)!==i.prototype&&n(s)&&r&&r(t,s),t}},function(t,e,i){"use strict";var n=i(46),r=i(53);t.exports=function(t){var e=String(r(this)),i="",s=n(t);if(s<0||s==1/0)throw RangeError("Count can't be negative");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(i+=e);return i}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var i=Math.expm1;t.exports=!i||i(10)>22025.465794806718||i(10)<22025.465794806718||-2e-17!=i(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:i},function(t,e,i){var n=i(46),r=i(53);t.exports=function(t){return function(e,i){var s,o,a=String(r(e)),h=n(i),u=a.length;return h<0||h>=u?t?"":void 0:(s=a.charCodeAt(h))<55296||s>56319||h+1===u||(o=a.charCodeAt(h+1))<56320||o>57343?t?a.charAt(h):s:t?a.slice(h,h+2):o-56320+(s-55296<<10)+65536}}},function(t,e,i){"use strict";var n=i(61),r=i(6),s=i(33),o=i(37),a=i(72),h=i(148),u=i(70),l=i(66),c=i(22)("iterator"),f=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,i,p,g,v,y){h(i,e,p);var m,b,_,w=function(t){if(!f&&t in S)return S[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},x=e+" Iterator",E="values"==g,T=!1,S=t.prototype,O=S[c]||S["@@iterator"]||g&&S[g],A=O||w(g),P=g?E?w("entries"):A:void 0,C="Array"==e&&S.entries||O;if(C&&(_=l(C.call(new t)))!==Object.prototype&&_.next&&(u(_,x,!0),n||"function"==typeof _[c]||o(_,c,d)),E&&O&&"values"!==O.name&&(T=!0,A=function(){return O.call(this)}),n&&!y||!f&&!T&&S[c]||o(S,c,A),a[e]=A,a[x]=d,g)if(m={values:E?A:w("values"),keys:v?A:w("keys"),entries:P},y)for(b in m)b in S||s(S,b,m[b]);else r(r.P+r.F*(f||T),e,m);return m}},function(t,e,i){var n=i(118),r=i(53);t.exports=function(t,e,i){if(n(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(r(t))}},function(t,e,i){var n=i(18),r=i(52),s=i(22)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==r(t))}},function(t,e,i){var n=i(22)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,i){var n=i(72),r=i(22)("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||s[r]===t)}},function(t,e,i){"use strict";var n=i(29),r=i(59);t.exports=function(t,e,i){e in t?n.f(t,e,r(0,i)):t[e]=i}},function(t,e,i){var n=i(81),r=i(22)("iterator"),s=i(72);t.exports=i(26).getIteratorMethod=function(t){if(null!=t)return t[r]||t["@@iterator"]||s[n(t)]}},function(t,e,i){"use strict";var n=i(32),r=i(63),s=i(25);t.exports=function(t){for(var e=n(this),i=s(e.length),o=arguments.length,a=r(o>1?arguments[1]:void 0,i),h=o>2?arguments[2]:void 0,u=void 0===h?i:r(h,i);u>a;)e[a++]=t;return e}},function(t,e,i){"use strict";var n=i(67),r=i(153),s=i(72),o=i(38);t.exports=i(116)(Array,"Array",(function(t,e){this._t=o(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])}),"values"),s.Arguments=s.Array,n("keys"),n("values"),n("entries")},function(t,e,i){"use strict";var n,r,s=i(90),o=RegExp.prototype.exec,a=String.prototype.replace,h=o,u=(n=/a/,r=/b*/g,o.call(n,"a"),o.call(r,"a"),0!==n.lastIndex||0!==r.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(h=function(t){var e,i,n,r,h=this;return l&&(i=new RegExp("^"+h.source+"$(?!\\s)",s.call(h))),u&&(e=h.lastIndex),n=o.call(h,t),u&&n&&(h.lastIndex=h.global?n.index+n[0].length:e),l&&n&&n.length>1&&a.call(n[0],i,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)})),n}),t.exports=h},function(t,e,i){"use strict";var n=i(115)(!0);t.exports=function(t,e,i){return e+(i?n(t,e).length:1)}},function(t,e,i){var n,r,s,o=i(44),a=i(142),h=i(108),u=i(104),l=i(15),c=l.process,f=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,g=l.Dispatch,v=0,y={},m=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},b=function(t){m.call(t.data)};f&&d||(f=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return y[++v]=function(){a("function"==typeof t?t:Function(t),e)},n(v),v},d=function(t){delete y[t]},"process"==i(52)(c)?n=function(t){c.nextTick(o(m,t,1))}:g&&g.now?n=function(t){g.now(o(m,t,1))}:p?(s=(r=new p).port2,r.port1.onmessage=b,n=o(s.postMessage,s,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(t){l.postMessage(t+"","*")},l.addEventListener("message",b,!1)):n="onreadystatechange"in u("script")?function(t){h.appendChild(u("script")).onreadystatechange=function(){h.removeChild(this),m.call(t)}}:function(t){setTimeout(o(m,t,1),0)}),t.exports={set:f,clear:d}},function(t,e,i){"use strict";var n=i(15),r=i(28),s=i(61),o=i(96),a=i(37),h=i(75),u=i(16),l=i(74),c=i(46),f=i(25),d=i(161),p=i(65).f,g=i(29).f,v=i(123),y=i(70),m=n.ArrayBuffer,b=n.DataView,_=n.Math,w=n.RangeError,x=n.Infinity,E=m,T=_.abs,S=_.pow,O=_.floor,A=_.log,P=_.LN2,C=r?"_b":"buffer",M=r?"_l":"byteLength",k=r?"_o":"byteOffset";function I(t,e,i){var n,r,s,o=new Array(i),a=8*i-e-1,h=(1<<a)-1,u=h>>1,l=23===e?S(2,-24)-S(2,-77):0,c=0,f=t<0||0===t&&1/t<0?1:0;for((t=T(t))!=t||t===x?(r=t!=t?1:0,n=h):(n=O(A(t)/P),t*(s=S(2,-n))<1&&(n--,s*=2),(t+=n+u>=1?l/s:l*S(2,1-u))*s>=2&&(n++,s/=2),n+u>=h?(r=0,n=h):n+u>=1?(r=(t*s-1)*S(2,e),n+=u):(r=t*S(2,u-1)*S(2,e),n=0));e>=8;o[c++]=255&r,r/=256,e-=8);for(n=n<<e|r,a+=e;a>0;o[c++]=255&n,n/=256,a-=8);return o[--c]|=128*f,o}function L(t,e,i){var n,r=8*i-e-1,s=(1<<r)-1,o=s>>1,a=r-7,h=i-1,u=t[h--],l=127&u;for(u>>=7;a>0;l=256*l+t[h],h--,a-=8);for(n=l&(1<<-a)-1,l>>=-a,a+=e;a>0;n=256*n+t[h],h--,a-=8);if(0===l)l=1-o;else{if(l===s)return n?NaN:u?-x:x;n+=S(2,e),l-=o}return(u?-1:1)*n*S(2,l-e)}function D(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function R(t){return[255&t]}function U(t){return[255&t,t>>8&255]}function F(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function N(t){return I(t,52,8)}function j(t){return I(t,23,4)}function B(t,e,i){g(t.prototype,e,{get:function(){return this[i]}})}function z(t,e,i,n){var r=d(+i);if(r+e>t[M])throw w("Wrong index!");var s=t[C]._b,o=r+t[k],a=s.slice(o,o+e);return n?a:a.reverse()}function X(t,e,i,n,r,s){var o=d(+i);if(o+e>t[M])throw w("Wrong index!");for(var a=t[C]._b,h=o+t[k],u=n(+r),l=0;l<e;l++)a[h+l]=u[s?l:e-l-1]}if(o.ABV){if(!u((function(){m(1)}))||!u((function(){new m(-1)}))||u((function(){return new m,new m(1.5),new m(NaN),"ArrayBuffer"!=m.name}))){for(var Y,H=(m=function(t){return l(this,m),new E(d(t))}).prototype=E.prototype,G=p(E),V=0;G.length>V;)(Y=G[V++])in m||a(m,Y,E[Y]);s||(H.constructor=m)}var W=new b(new m(2)),q=b.prototype.setInt8;W.setInt8(0,2147483648),W.setInt8(1,2147483649),!W.getInt8(0)&&W.getInt8(1)||h(b.prototype,{setInt8:function(t,e){q.call(this,t,e<<24>>24)},setUint8:function(t,e){q.call(this,t,e<<24>>24)}},!0)}else m=function(t){l(this,m,"ArrayBuffer");var e=d(t);this._b=v.call(new Array(e),0),this[M]=e},b=function(t,e,i){l(this,b,"DataView"),l(t,m,"DataView");var n=t[M],r=c(e);if(r<0||r>n)throw w("Wrong offset!");if(r+(i=void 0===i?n-r:f(i))>n)throw w("Wrong length!");this[C]=t,this[k]=r,this[M]=i},r&&(B(m,"byteLength","_l"),B(b,"buffer","_b"),B(b,"byteLength","_l"),B(b,"byteOffset","_o")),h(b.prototype,{getInt8:function(t){return z(this,1,t)[0]<<24>>24},getUint8:function(t){return z(this,1,t)[0]},getInt16:function(t){var e=z(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=z(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return D(z(this,4,t,arguments[1]))},getUint32:function(t){return D(z(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return L(z(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return L(z(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){X(this,1,t,R,e)},setUint8:function(t,e){X(this,1,t,R,e)},setInt16:function(t,e){X(this,2,t,U,e,arguments[2])},setUint16:function(t,e){X(this,2,t,U,e,arguments[2])},setInt32:function(t,e){X(this,4,t,F,e,arguments[2])},setUint32:function(t,e){X(this,4,t,F,e,arguments[2])},setFloat32:function(t,e){X(this,4,t,j,e,arguments[2])},setFloat64:function(t,e){X(this,8,t,N,e,arguments[2])}});y(m,"ArrayBuffer"),y(b,"DataView"),a(b.prototype,o.VIEW,!0),e.ArrayBuffer=m,e.DataView=b},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){t.exports=!i(166)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,i){"use strict";t.exports=function(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=i.parser[e.strictMode?"strict":"loose"].exec(t),r={},s=14;s--;)r[i.key[s]]=n[s]||"";return r[i.q.name]={},r[i.key[12]].replace(i.q.parser,(function(t,e,n){e&&(r[i.q.name][e]=n)})),r}},function(t,e,i){t.exports=!i(28)&&!i(16)((function(){return 7!=Object.defineProperty(i(104)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,i){var n=i(15),r=i(26),s=i(61),o=i(105),a=i(29).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=s?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:o.f(t)})}},function(t,e,i){var n=i(36),r=i(38),s=i(86)(!1),o=i(106)("IE_PROTO");t.exports=function(t,e){var i,a=r(t),h=0,u=[];for(i in a)i!=o&&n(a,i)&&u.push(i);for(;e.length>h;)n(a,i=e[h++])&&(~s(u,i)||u.push(i));return u}},function(t,e,i){var n=i(29),r=i(17),s=i(62);t.exports=i(28)?Object.defineProperties:function(t,e){r(t);for(var i,o=s(e),a=o.length,h=0;a>h;)n.f(t,i=o[h++],e[i]);return t}},function(t,e,i){var n=i(38),r=i(65).f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"[object Window]"==s.call(t)?function(t){try{return r(t)}catch(t){return o.slice()}}(t):r(n(t))}},function(t,e,i){"use strict";var n=i(28),r=i(62),s=i(87),o=i(80),a=i(32),h=i(79),u=Object.assign;t.exports=!u||i(16)((function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach((function(t){e[t]=t})),7!=u({},t)[i]||Object.keys(u({},e)).join("")!=n}))?function(t,e){for(var i=a(t),u=arguments.length,l=1,c=s.f,f=o.f;u>l;)for(var d,p=h(arguments[l++]),g=c?r(p).concat(c(p)):r(p),v=g.length,y=0;v>y;)d=g[y++],n&&!f.call(p,d)||(i[d]=p[d]);return i}:u},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,i){"use strict";var n=i(45),r=i(18),s=i(142),o=[].slice,a={},h=function(t,e,i){if(!(e in a)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";a[e]=Function("F,a","return new F("+n.join(",")+")")}return a[e](t,i)};t.exports=Function.bind||function(t){var e=n(this),i=o.call(arguments,1),a=function(){var n=i.concat(o.call(arguments));return this instanceof a?h(e,n.length,n):s(e,n,t)};return r(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e){t.exports=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},function(t,e,i){var n=i(15).parseInt,r=i(71).trim,s=i(110),o=/^[-+]?0[xX]/;t.exports=8!==n(s+"08")||22!==n(s+"0x16")?function(t,e){var i=r(String(t),3);return n(i,e>>>0||(o.test(i)?16:10))}:n},function(t,e,i){var n=i(15).parseFloat,r=i(71).trim;t.exports=1/n(i(110)+"-0")!=-1/0?function(t){var e=r(String(t),3),i=n(e);return 0===i&&"-"==e.charAt(0)?-0:i}:n},function(t,e,i){var n=i(52);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=n(t))throw TypeError(e);return+t}},function(t,e,i){var n=i(18),r=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&r(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,i){"use strict";var n=i(64),r=i(59),s=i(70),o={};i(37)(o,i(22)("iterator"),(function(){return this})),t.exports=function(t,e,i){t.prototype=n(o,{next:r(1,i)}),s(t,e+" Iterator")}},function(t,e,i){var n=i(17);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){var s=t.return;throw void 0!==s&&n(s.call(t)),e}}},function(t,e,i){var n=i(340);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,i){var n=i(45),r=i(32),s=i(79),o=i(25);t.exports=function(t,e,i,a,h){n(e);var u=r(t),l=s(u),c=o(u.length),f=h?c-1:0,d=h?-1:1;if(i<2)for(;;){if(f in l){a=l[f],f+=d;break}if(f+=d,h?f<0:c<=f)throw TypeError("Reduce of empty array with no initial value")}for(;h?f>=0:c>f;f+=d)f in l&&(a=e(a,l[f],f,u));return a}},function(t,e,i){"use strict";var n=i(32),r=i(63),s=i(25);t.exports=[].copyWithin||function(t,e){var i=n(this),o=s(i.length),a=r(t,o),h=r(e,o),u=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===u?o:r(u,o))-h,o-a),c=1;for(h<a&&a<h+l&&(c=-1,h+=l-1,a+=l-1);l-- >0;)h in i?i[a]=i[h]:delete i[a],a+=c,h+=c;return i}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){"use strict";var n=i(125);i(6)({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},function(t,e,i){i(28)&&"g"!=/./g.flags&&i(29).f(RegExp.prototype,"flags",{configurable:!0,get:i(90)})},function(t,e,i){"use strict";var n,r,s,o,a=i(61),h=i(15),u=i(44),l=i(81),c=i(6),f=i(18),d=i(45),p=i(74),g=i(93),v=i(82),y=i(127).set,m=i(360)(),b=i(157),_=i(361),w=i(94),x=i(158),E=h.TypeError,T=h.process,S=T&&T.versions,O=S&&S.v8||"",A=h.Promise,P="process"==l(T),C=function(){},M=r=b.f,k=!!function(){try{var t=A.resolve(1),e=(t.constructor={})[i(22)("species")]=function(t){t(C,C)};return(P||"function"==typeof PromiseRejectionEvent)&&t.then(C)instanceof e&&0!==O.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),I=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},L=function(t,e){if(!t._n){t._n=!0;var i=t._c;m((function(){for(var n=t._v,r=1==t._s,s=0,o=function(e){var i,s,o,a=r?e.ok:e.fail,h=e.resolve,u=e.reject,l=e.domain;try{a?(r||(2==t._h&&U(t),t._h=1),!0===a?i=n:(l&&l.enter(),i=a(n),l&&(l.exit(),o=!0)),i===e.promise?u(E("Promise-chain cycle")):(s=I(i))?s.call(i,h,u):h(i)):u(n)}catch(t){l&&!o&&l.exit(),u(t)}};i.length>s;)o(i[s++]);t._c=[],t._n=!1,e&&!t._h&&D(t)}))}},D=function(t){y.call(h,(function(){var e,i,n,r=t._v,s=R(t);if(s&&(e=_((function(){P?T.emit("unhandledRejection",r,t):(i=h.onunhandledrejection)?i({promise:t,reason:r}):(n=h.console)&&n.error&&n.error("Unhandled promise rejection",r)})),t._h=P||R(t)?2:1),t._a=void 0,s&&e.e)throw e.v}))},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},U=function(t){y.call(h,(function(){var e;P?T.emit("rejectionHandled",t):(e=h.onrejectionhandled)&&e({promise:t,reason:t._v})}))},F=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),L(e,!0))},N=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw E("Promise can't be resolved itself");(e=I(t))?m((function(){var n={_w:i,_d:!1};try{e.call(t,u(N,n,1),u(F,n,1))}catch(t){F.call(n,t)}})):(i._v=t,i._s=1,L(i,!1))}catch(t){F.call({_w:i,_d:!1},t)}}};k||(A=function(t){p(this,A,"Promise","_h"),d(t),n.call(this);try{t(u(N,this,1),u(F,this,1))}catch(t){F.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i(75)(A.prototype,{then:function(t,e){var i=M(v(this,A));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=P?T.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&L(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),s=function(){var t=new n;this.promise=t,this.resolve=u(N,t,1),this.reject=u(F,t,1)},b.f=M=function(t){return t===A||t===o?new s(t):r(t)}),c(c.G+c.W+c.F*!k,{Promise:A}),i(70)(A,"Promise"),i(73)("Promise"),o=i(26).Promise,c(c.S+c.F*!k,"Promise",{reject:function(t){var e=M(this);return(0,e.reject)(t),e.promise}}),c(c.S+c.F*(a||!k),"Promise",{resolve:function(t){return x(a&&this===o?A:this,t)}}),c(c.S+c.F*!(k&&i(89)((function(t){A.all(t).catch(C)}))),"Promise",{all:function(t){var e=this,i=M(e),n=i.resolve,r=i.reject,s=_((function(){var i=[],s=0,o=1;g(t,!1,(function(t){var a=s++,h=!1;i.push(void 0),o++,e.resolve(t).then((function(t){h||(h=!0,i[a]=t,--o||n(i))}),r)})),--o||n(i)}));return s.e&&r(s.v),i.promise},race:function(t){var e=this,i=M(e),n=i.reject,r=_((function(){g(t,!1,(function(t){e.resolve(t).then(i.resolve,n)}))}));return r.e&&n(r.v),i.promise}})},function(t,e,i){"use strict";var n=i(45);function r(t){var e,i;this.promise=new t((function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n})),this.resolve=n(e),this.reject=n(i)}t.exports.f=function(t){return new r(t)}},function(t,e,i){var n=i(17),r=i(18),s=i(157);t.exports=function(t,e){if(n(t),r(e)&&e.constructor===t)return e;var i=s.f(t);return(0,i.resolve)(e),i.promise}},function(t,e,i){"use strict";var n=i(29).f,r=i(64),s=i(75),o=i(44),a=i(74),h=i(93),u=i(116),l=i(153),c=i(73),f=i(28),d=i(57).fastKey,p=i(68),g=f?"_s":"size",v=function(t,e){var i,n=d(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,u){var l=t((function(t,n){a(t,l,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[g]=0,null!=n&&h(n,i,t[u],t)}));return s(l.prototype,{clear:function(){for(var t=p(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var i=p(this,e),n=v(i,t);if(n){var r=n.n,s=n.p;delete i._i[n.i],n.r=!0,s&&(s.n=r),r&&(r.p=s),i._f==n&&(i._f=r),i._l==n&&(i._l=s),i[g]--}return!!n},forEach:function(t){p(this,e);for(var i,n=o(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!v(p(this,e),t)}}),f&&n(l.prototype,"size",{get:function(){return p(this,e)[g]}}),l},def:function(t,e,i){var n,r,s=v(t,e);return s?s.v=i:(t._l=s={i:r=d(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=s),n&&(n.n=s),t[g]++,"F"!==r&&(t._i[r]=s)),t},getEntry:v,setStrong:function(t,e,i){u(t,e,(function(t,i){this._t=p(t,e),this._k=i,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?l(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,l(1))}),i?"entries":"values",!i,!0),c(e)}}},function(t,e,i){"use strict";var n=i(75),r=i(57).getWeak,s=i(17),o=i(18),a=i(74),h=i(93),u=i(49),l=i(36),c=i(68),f=u(5),d=u(6),p=0,g=function(t){return t._l||(t._l=new v)},v=function(){this.a=[]},y=function(t,e){return f(t.a,(function(t){return t[0]===e}))};v.prototype={get:function(t){var e=y(this,t);if(e)return e[1]},has:function(t){return!!y(this,t)},set:function(t,e){var i=y(this,t);i?i[1]=e:this.a.push([t,e])},delete:function(t){var e=d(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,i,s){var u=t((function(t,n){a(t,u,e,"_i"),t._t=e,t._i=p++,t._l=void 0,null!=n&&h(n,i,t[s],t)}));return n(u.prototype,{delete:function(t){if(!o(t))return!1;var i=r(t);return!0===i?g(c(this,e)).delete(t):i&&l(i,this._i)&&delete i[this._i]},has:function(t){if(!o(t))return!1;var i=r(t);return!0===i?g(c(this,e)).has(t):i&&l(i,this._i)}}),u},def:function(t,e,i){var n=r(s(e),!0);return!0===n?g(t).set(e,i):n[t._i]=i,t},ufstore:g}},function(t,e,i){var n=i(46),r=i(25);t.exports=function(t){if(void 0===t)return 0;var e=n(t),i=r(e);if(e!==i)throw RangeError("Wrong length!");return i}},function(t,e,i){var n=i(65),r=i(87),s=i(17),o=i(15).Reflect;t.exports=o&&o.ownKeys||function(t){var e=n.f(s(t)),i=r.f;return i?e.concat(i(t)):e}},function(t,e,i){var n=i(25),r=i(112),s=i(53);t.exports=function(t,e,i,o){var a=String(s(t)),h=a.length,u=void 0===i?" ":String(i),l=n(e);if(l<=h||""==u)return a;var c=l-h,f=r.call(u,Math.ceil(c/u.length));return f.length>c&&(f=f.slice(0,c)),o?f+a:a+f}},function(t,e,i){var n=i(28),r=i(62),s=i(38),o=i(80).f;t.exports=function(t){return function(e){for(var i,a=s(e),h=r(a),u=h.length,l=0,c=[];u>l;)i=h[l++],n&&!o.call(a,i)||c.push(t?[i,a[i]]:a[i]);return c}}},function(t,e){var i=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=i)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var i,n,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(t){i=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var h,u=[],l=!1,c=-1;function f(){l&&h&&(l=!1,h.length?u=h.concat(u):c=-1,u.length&&d())}function d(){if(!l){var t=a(f);l=!0;for(var e=u.length;e;){for(h=u,u=[];++c<e;)h&&h[c].run();c=-1,e=u.length}h=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new p(t,e)),1!==u.length||l||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty,r="~";function s(){}function o(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(t,e,i,n,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new o(i,n||t,s),h=r?r+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new s:delete t._events[e]}function u(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(r=!1)),u.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)n.call(t,e)&&i.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},u.prototype.listeners=function(t){var e=r?r+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,o=new Array(s);n<s;n++)o[n]=i[n].fn;return o},u.prototype.listenerCount=function(t){var e=r?r+t:t,i=this._events[e];return i?i.fn?1:i.length:0},u.prototype.emit=function(t,e,i,n,s,o){var a=r?r+t:t;if(!this._events[a])return!1;var h,u,l=this._events[a],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,n),!0;case 5:return l.fn.call(l.context,e,i,n,s),!0;case 6:return l.fn.call(l.context,e,i,n,s,o),!0}for(u=1,h=new Array(c-1);u<c;u++)h[u-1]=arguments[u];l.fn.apply(l.context,h)}else{var f,d=l.length;for(u=0;u<d;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),c){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,i);break;case 4:l[u].fn.call(l[u].context,e,i,n);break;default:if(!h)for(f=1,h=new Array(c-1);f<c;f++)h[f-1]=arguments[f];l[u].fn.apply(l[u].context,h)}}return!0},u.prototype.on=function(t,e,i){return a(this,t,e,i,!1)},u.prototype.once=function(t,e,i){return a(this,t,e,i,!0)},u.prototype.removeListener=function(t,e,i,n){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return h(this,s),this;var o=this._events[s];if(o.fn)o.fn!==e||n&&!o.once||i&&o.context!==i||h(this,s);else{for(var a=0,u=[],l=o.length;a<l;a++)(o[a].fn!==e||n&&!o[a].once||i&&o[a].context!==i)&&u.push(o[a]);u.length?this._events[s]=1===u.length?u[0]:u:h(this,s)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&h(this,e)):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,t.exports=u},function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n,a,h,u,l,d,p,v=e&&e.length,y=v?e[0]*i:t.length,m=r(t,0,y,i,!0),b=[];if(!m||m.next===m.prev)return b;if(v&&(m=function(t,e,i,n){var o,a,h,u,l,d=[];for(o=0,a=e.length;o<a;o++)h=e[o]*n,u=o<a-1?e[o+1]*n:t.length,(l=r(t,h,u,n,!1))===l.next&&(l.steiner=!0),d.push(g(l));for(d.sort(c),o=0;o<d.length;o++)f(d[o],i),i=s(i,i.next);return i}(t,e,m,i)),t.length>80*i){n=h=t[0],a=u=t[1];for(var _=i;_<y;_+=i)(l=t[_])<n&&(n=l),(d=t[_+1])<a&&(a=d),l>h&&(h=l),d>u&&(u=d);p=0!==(p=Math.max(h-n,u-a))?1/p:0}return o(m,b,i,n,a,p),b}function r(t,e,i,n,r){var s,o;if(r===P(t,e,i,n)>0)for(s=e;s<i;s+=n)o=S(s,t[s],t[s+1],o);else for(s=i-n;s>=e;s-=n)o=S(s,t[s],t[s+1],o);return o&&b(o,o.next)&&(O(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!b(n,n.next)&&0!==m(n.prev,n,n.next))n=n.next;else{if(O(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function o(t,e,i,n,r,c,f){if(t){!f&&c&&function(t,e,i,n){var r=t;do{null===r.z&&(r.z=p(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,s,o,a,h,u=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,n=i,a=0,e=0;e<u&&(a++,n=n.nextZ);e++);for(h=u;a>0||h>0&&n;)0!==a&&(0===h||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,h--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,u*=2}while(o>1)}(r)}(t,n,r,c);for(var d,g,v=t;t.prev!==t.next;)if(d=t.prev,g=t.next,c?h(t,n,r,c):a(t))e.push(d.i/i),e.push(t.i/i),e.push(g.i/i),O(t),t=g.next,v=g.next;else if((t=g)===v){f?1===f?o(t=u(s(t),e,i),e,i,n,r,c,2):2===f&&l(t,e,i,n,r,c):o(s(t),e,i,n,r,c,1);break}}}function a(t){var e=t.prev,i=t,n=t.next;if(m(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(v(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&m(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function h(t,e,i,n){var r=t.prev,s=t,o=t.next;if(m(r,s,o)>=0)return!1;for(var a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,h=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,u=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,l=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,c=p(a,h,e,i,n),f=p(u,l,e,i,n),d=t.prevZ,g=t.nextZ;d&&d.z>=c&&g&&g.z<=f;){if(d!==t.prev&&d!==t.next&&v(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&m(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,g!==t.prev&&g!==t.next&&v(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&v(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&m(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;g&&g.z<=f;){if(g!==t.prev&&g!==t.next&&v(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function u(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!b(r,o)&&_(r,n,n.next,o)&&E(r,o)&&E(o,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(o.i/i),O(n),O(n.next),n=t=o),n=n.next}while(n!==t);return s(n)}function l(t,e,i,n,r,a){var h=t;do{for(var u=h.next.next;u!==h.prev;){if(h.i!==u.i&&y(h,u)){var l=T(h,u);return h=s(h,h.next),l=s(l,l.next),o(h,e,i,n,r,a),void o(l,e,i,n,r,a)}u=u.next}h=h.next}while(h!==t)}function c(t,e){return t.x-e.x}function f(t,e){if(e=function(t,e){var i,n=e,r=t.x,s=t.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>o){if(o=a,a===r){if(s===n.y)return n;if(s===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===o)return i;var h,u=i,l=i.x,c=i.y,f=1/0;n=i;do{r>=n.x&&n.x>=l&&r!==n.x&&v(s<c?r:o,s,l,c,s<c?o:r,s,n.x,n.y)&&(h=Math.abs(s-n.y)/(r-n.x),E(n,t)&&(h<f||h===f&&(n.x>i.x||n.x===i.x&&d(i,n)))&&(i=n,f=h)),n=n.next}while(n!==u);return i}(t,e)){var i=T(e,t);s(e,e.next),s(i,i.next)}}function d(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function p(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function v(t,e,i,n,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(n-a)-(i-o)*(e-a)>=0&&(i-o)*(s-a)-(r-o)*(n-a)>=0}function y(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&_(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(E(t,e)&&E(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||b(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function b(t,e){return t.x===e.x&&t.y===e.y}function _(t,e,i,n){var r=x(m(t,e,i)),s=x(m(t,e,n)),o=x(m(i,n,t)),a=x(m(i,n,e));return r!==s&&o!==a||(!(0!==r||!w(t,i,e))||(!(0!==s||!w(t,n,e))||(!(0!==o||!w(i,t,n))||!(0!==a||!w(i,e,n)))))}function w(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function x(t){return t>0?1:t<0?-1:0}function E(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function T(t,e){var i=new A(t.i,t.x,t.y),n=new A(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function S(t,e,i,n){var r=new A(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function O(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function A(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,i,n){for(var r=0,s=e,o=i-n;s<i;s+=n)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}t.exports=n,t.exports.default=n,n.deviation=function(t,e,i,n){var r=e&&e.length,s=r?e[0]*i:t.length,o=Math.abs(P(t,0,s,i));if(r)for(var a=0,h=e.length;a<h;a++){var u=e[a]*i,l=a<h-1?e[a+1]*i:t.length;o-=Math.abs(P(t,u,l,i))}var c=0;for(a=0;a<n.length;a+=3){var f=n[a]*i,d=n[a+1]*i,p=n[a+2]*i;c+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[r][s][o]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},function(t,e,i){"use strict";t.exports=function(t,e,i,n){for(var r=65535&t|0,s=t>>>16&65535|0,o=0;0!==i;){i-=o=i>2e3?2e3:i;do{s=s+(r=r+e[n++]|0)|0}while(--o);r%=65521,s%=65521}return r|s<<16|0}},function(t,e,i){"use strict";var n=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();t.exports=function(t,e,i,r){var s=n,o=r+i;t^=-1;for(var a=r;a<o;a++)t=t>>>8^s[255&(t^e[a])];return-1^t}},function(t,e,i){"use strict";var n=i(58),r=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var o=new n.Buf8(256),a=0;a<256;a++)o[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function h(t,e){if(e<65534&&(t.subarray&&s||!t.subarray&&r))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var i="",o=0;o<e;o++)i+=String.fromCharCode(t[o]);return i}o[254]=o[254]=1,e.string2buf=function(t){var e,i,r,s,o,a=t.length,h=0;for(s=0;s<a;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(r-56320),s++),h+=i<128?1:i<2048?2:i<65536?3:4;for(e=new n.Buf8(h),o=0,s=0;o<h;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(r-56320),s++),i<128?e[o++]=i:i<2048?(e[o++]=192|i>>>6,e[o++]=128|63&i):i<65536?(e[o++]=224|i>>>12,e[o++]=128|i>>>6&63,e[o++]=128|63&i):(e[o++]=240|i>>>18,e[o++]=128|i>>>12&63,e[o++]=128|i>>>6&63,e[o++]=128|63&i);return e},e.buf2binstring=function(t){return h(t,t.length)},e.binstring2buf=function(t){for(var e=new n.Buf8(t.length),i=0,r=e.length;i<r;i++)e[i]=t.charCodeAt(i);return e},e.buf2string=function(t,e){var i,n,r,s,a=e||t.length,u=new Array(2*a);for(n=0,i=0;i<a;)if((r=t[i++])<128)u[n++]=r;else if((s=o[r])>4)u[n++]=65533,i+=s-1;else{for(r&=2===s?31:3===s?15:7;s>1&&i<a;)r=r<<6|63&t[i++],s--;s>1?u[n++]=65533:r<65536?u[n++]=r:(r-=65536,u[n++]=55296|r>>10&1023,u[n++]=56320|1023&r)}return h(u,n)},e.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;i>=0&&128==(192&t[i]);)i--;return i<0?e:0===i?e:i+o[t[i]]>e?i:e}},function(t,e,i){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,i){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(7),r=i(20),s=i(8),o=i(0);function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var h=/^(?:\w+:\/{2}\w+(?:\.\w+)*\/?)?(?:[\/.]*?(?:[^?]+)?\/)?(?:([^\/?]+)\.(\w+|{\w+(?:,\w+)*}))(?:\?\S*)?$/,u={png:"images",jpg:"images",jpeg:"images",ogg:"audio",mp3:"audio",m4a:"audio",wav:"audio","{ogg,mp3}":"audio"},l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.assets=r.a.setUp(),this.counts=n.a.setUp()}var e,i,l;return e=t,(i=[{key:"delete",value:function(t){var e=this.assets;if(e.has(t)){var i=this.counts;if(i[t]-=1,0===i[t]){var n=e.get(t);n&&n.src&&(n.src=""),e.delete(t)}return!i[t]}return!1}},{key:"get",value:function(t){return this.assets.get(t)}},{key:"has",value:function(t){return this.assets.has(t)}},{key:"set",value:function(t,e){var i=this.assets,n=this.counts;i.has(t)?n[t]+=1:(i.set(t,e),n[t]=1)}},{key:"load",value:function(t,e,i){for(var r,a,l,c,f=this,d=this.counts,p=o.a.setUp(),g=0;g<t.length;g++){var v=(r=t[g],a=void 0,l=void 0,c=void 0,a=r.src||r,l=platypus.supports.ie?a.replace("{ogg,mp3}","mp3"):a,c=l.match(h),n.a.setUp("id",r.id||(c?c[1]:l),"src",(platypus.game.options[u[c[2].toLowerCase()]]||"")+l)),y=v.id||v.src||v;this.has(y)?d[y]+=1:p.push(v)}if(p.length){var m=new s.g,b=p.length,_=0;m.onLoad.add((function(t,i){f.set(i.name,i.data),_+=1,e&&e(_/b)})),i&&m.onComplete.add(i);for(var w=0;w<b;w++){var x=p[w],E=x.id||x.src||x;m.add(E,x.src||x,x)}m.load()}else i&&i();o.a.recycle(p)}},{key:"unload",value:function(t){for(var e=t.length;e--;)this.delete(t[e].id||t[e])}}])&&a(e.prototype,i),l&&a(e,l),t}()},function(t,e,i){(function(n,r){var s;!function(n){var o=n.Promise,a=o&&"resolve"in o&&"reject"in o&&"all"in o&&"race"in o&&function(){var t;return new o((function(e){t=e})),"function"==typeof t}();e?(e.Promise=a?o:E,e.Polyfill=E):void 0===(s=function(){return a?o:E}.call(e,i,e,t))||(t.exports=s);var h=function(){};function u(t){return"[object Array]"===Object.prototype.toString.call(t)}var l,c=void 0!==r?r:setTimeout,f=[];function d(){for(var t=0;t<f.length;t++)f[t][0](f[t][1]);f=[],l=!1}function p(t,e){f.push([t,e]),l||(l=!0,c(d,0))}function g(t){var e=t.owner,i=e.state_,n=e.data_,r=t[i],s=t.then;if("function"==typeof r){i="fulfilled";try{n=r(n)}catch(t){b(s,t)}}v(s,n)||("fulfilled"===i&&y(s,n),"rejected"===i&&b(s,n))}function v(t,e){var i;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"==typeof e)){var n=e.then;if("function"==typeof n)return n.call(e,(function(n){i||(i=!0,e!==n?y(t,n):m(t,n))}),(function(e){i||(i=!0,b(t,e))})),!0}}catch(e){return i||b(t,e),!0}return!1}function y(t,e){t!==e&&v(t,e)||m(t,e)}function m(t,e){"pending"===t.state_&&(t.state_="sealed",t.data_=e,p(w,t))}function b(t,e){"pending"===t.state_&&(t.state_="sealed",t.data_=e,p(x,t))}function _(t){var e=t.then_;t.then_=void 0;for(var i=0;i<e.length;i++)g(e[i])}function w(t){t.state_="fulfilled",_(t)}function x(t){t.state_="rejected",_(t)}function E(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof E==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(t,e){function i(t){b(e,t)}try{t((function(t){y(e,t)}),i)}catch(t){i(t)}}(t,this)}E.prototype={constructor:E,state_:"pending",then_:null,data_:void 0,then:function(t,e){var i={owner:this,then:new this.constructor(h),fulfilled:t,rejected:e};return"fulfilled"===this.state_||"rejected"===this.state_?p(g,i):this.then_.push(i),i.then},catch:function(t){return this.then(null,t)}},E.all=function(t){if(!u(t))throw new TypeError("You must pass an array to Promise.all().");return new this((function(e,i){var n=[],r=0;function s(t){return r++,function(i){n[t]=i,--r||e(n)}}for(var o,a=0;a<t.length;a++)(o=t[a])&&"function"==typeof o.then?o.then(s(a),i):n[a]=o;r||e(n)}))},E.race=function(t){if(!u(t))throw new TypeError("You must pass an array to Promise.race().");return new this((function(e,i){for(var n,r=0;r<t.length;r++)(n=t[r])&&"function"==typeof n.then?n.then(e,i):e(n)}))},E.resolve=function(t){return t&&"object"==typeof t&&t.constructor===this?t:new this((function(e){e(t)}))},E.reject=function(t){return new this((function(e,i){i(t)}))}}("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this)}).call(this,i(76),i(434).setImmediate)},function(t,e,i){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function o(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,h=o(t),u=1;u<arguments.length;u++){for(var l in i=Object(arguments[u]))r.call(i,l)&&(h[l]=i[l]);if(n){a=n(i);for(var c=0;c<a.length;c++)s.call(i,a[c])&&(h[a[c]]=i[a[c]])}}return h}},function(t,e,i){"use strict";var n=i(9),r=i(2);e.a=Object(r.a)({id:"AIChaser",properties:{accelerate:!1,chasing:!0},publicProperties:{speed:.3},initialize:function(){this.target=this.owner.target||null,this.offset=n.a.setUp(0,0),this.state=this.owner.state,this.state.set("chasing",!1)},events:{load:function(){this.owner.addMover?this.direction=this.owner.addMover({vector:[this.speed,0,0],event:"chase",accelerator:this.accelerate}).vector:platypus.debug.warn('The "AIChaser" component requires a "Mover" component to function correctly.')},"handle-ai":function(){var t=null,e=!1;this.target&&this.chasing&&((t=n.a.setUp(this.offset).add(this.target.position).subtractVector(this.owner.position)).magnitude(2)&&(e=!0,this.direction.setVector(t).normalize().multiply(this.speed)),t.recycle()),e!==this.state.get("chasing")&&(this.state.set("chasing",e),this.owner.triggerEvent("chase",e))},"set-target":function(t){this.target=t,this.offset.x=0,this.offset.y=0},"set-target-offset":function(t){this.offset.x=t.x,this.offset.y=t.y},"start-chasing":function(t){t&&(this.target=t),this.chasing=!0},"stop-chasing":function(){this.chasing=!1}},methods:{destroy:function(){this.target=null,this.offset.recycle(),this.state=null}}})},function(t,e,i){"use strict";var n=i(2);e.a=Object(n.a)({id:"AIPacer",properties:{movement:"both",direction:null},initialize:function(){this.lastDirection="",this.currentDirection=this.direction||("horizontal"===this.movement?"left":"up")},events:{"handle-ai":function(){this.currentDirection!==this.lastDirection&&(this.lastDirection=this.currentDirection,this.owner.triggerEvent("stop"),this.owner.triggerEvent("go-"+this.currentDirection))},"turn-around":function(t){"both"!==this.movement&&"horizontal"!==this.movement||(t.x>0?this.currentDirection="left":t.x<0&&(this.currentDirection="right")),"both"!==this.movement&&"vertical"!==this.movement||(t.y>0?this.currentDirection="up":t.y<0&&(this.currentDirection="down"))}}})},function(t,e,i){"use strict";var n=i(0),r=i(30),s=i(43),o=i(2),a=s.a.Tween,h={};e.a=Object(o.a)({id:"AudioMusic",properties:{tracks:null},initialize:function(){var t=n.a.setUp(),e=1e3;for(var i in h)h.hasOwnProperty(i)&&t.push(i);if(this.tracks)for(var s in this.tracks)if(this.tracks.hasOwnProperty(s)){var o=t.indexOf(s),u=this.tracks[s],l=h[s],c=null;o>=0?Object(n.c)(t,o):l=h[s]=r.a.play(u.sound||u,{loop:1/0,volume:u.fade?0:"number"==typeof u.volume?u.volume:1}),u.fade&&((c=new a(l)).to({volume:"number"==typeof u.volume?u.volume:1},u.fade),c.start(),e=u.fade)}t.forEach((function(t){var i=h[t],n=new a(i);n.to({volume:0},e),n.onComplete((function(){i.stop(),i.unload(),delete h[t]})),n.start()}))},events:{"mute-music":function(){for(var t in h)h.hasOwnProperty(t)&&(h[t].muted=!0)},"unmute-music":function(){for(var t in h)h.hasOwnProperty(t)&&(h[t].muted=!1)}},methods:{destroy:function(){}},getAssetList:function(t,e,i){var r="",s=n.a.setUp(),o=t.tracks||e.tracks||i.tracks;if(o)for(r in o)if(o.hasOwnProperty(r)){var a=(o[r].sound||o[r])+".{ogg,mp3}";-1===s.indexOf(a)&&s.push(a)}return s}})},function(t,e,i){"use strict";var n,r,s,o,a=i(0),h=i(7),u=i(30),l=i(27),c=i(2);e.a=(r={interrupt:0,delay:0,offset:0,loop:0,volume:1,pan:0,mute:!1,paused:!1,speed:1,playthrough:!1},s=function(t,e){var i="",n=null,s=function(t){t.audio&&!this.owner.destroyed&&(this.removeClip(t.audio),this.owner.triggerEvent("clip-complete")),t.recycle()};return"string"==typeof t?(i=t,n={channel:e}):(i=t.sound,n={interrupt:t.interrupt,delay:t.delay,offset:t.offset,loop:t.loop,volume:t.volume,pan:t.pan,startTime:t.startTime,duration:t.duration,mute:t.mute,paused:t.paused,channel:e,speed:t.speed,playthrough:t.playthrough}),function(t){var e=null;t=t||n,(e=h.a.setUp("interrupt",t.interrupt||n.interrupt||r.interrupt,"delay",t.delay||n.delay||r.delay,"loop",t.loop||n.loop||r.loop,"loops",t.loop||n.loop||r.loop,"offset",t.offset||n.offset||r.offset,"volume",void 0!==t.volume?t.volume:void 0!==n.volume?n.volume:r.volume,"pan",t.pan||n.pan||r.pan,"mute",t.mute||n.mute||r.mute,"paused",t.paused||n.paused||r.paused,"channel",t.channel||n.channel||r.channel,"speed",void 0!==t.speed?t.speed:void 0!==n.speed?n.speed:r.speed,"playthrough",t.playthrough||n.playthrough||r.playthrough)).audio=this.player.play(i,e),e.pan&&(e.audio.filters=[new u.a.filters.StereoFilter(e.audio.pan)]),e.volume&&(e.audio.volume=e.volume),e.speed&&(e.audio.speed=e.speed),e.playthrough&&(e.audio.playthrough=!0),e.audio.on("end",s.bind(this,e)),e.audio&&(e.audio.soundId=i,this.activeAudioClips.push(e.audio),"playFailed"===e.audio.playState)&&u.a.on("fileload",(function t(n){n.id===i&&(e.audio.play(e),u.a.off("fileload",t))}))}},o=function(t,e,i,n){var r=n.includes(t.states);r!==t.playing&&(r?i():this.stopAudio(e,this.forcePlaythrough),t.playing=r)},Object(c.a)({id:"AudioSFX",properties:{audioMap:null,channel:"",forcePlayThrough:!0,eventBased:!0,stateBased:!1},initialize:function(t){var e="",i=null,n=null;if(this.channel,this.activeAudioClips=a.a.setUp(),this.state=this.owner.state,this.stateChange=!1,this.player=platypus.game.sfxPlayer,this.audioMap)for(e in this.stateBased&&(this.checkStates=a.a.setUp()),this.audioMap)this.audioMap.hasOwnProperty(e)&&(n=this.audioMap[e],i=s(n,this.channel),n.sound&&(n=n.sound),this.eventBased&&this.addEventListener(e,i),this.stateBased&&this.addStateCheck(e,n,i));this.paused=!1},events:{"handle-render":function(){var t=0,e=null,i=this.state;if(!this.paused&&this.stateBased&&this.stateChange){for(t=(e=this.checkStates).length;t--;)e[t].check(i);this.stateChange=!1}},"state-changed":function(){this.stateChange=!0},"toggle-mute":function(t){this.handleClip(t,(function(t){t&&(t.unmuted?(t.volume=t.unmuted,delete t.unmuted):(t.unmuted=t.volume,t.volume=0))}))},"stop-audio":function(t){t?"string"==typeof t?this.stopAudio(t):this.stopAudio(t.audioId||!1,t.playthrough||!1):this.stopAudio()},"mute-audio":function(t){this.handleClip(t,(function(t){t&&(t.unmuted=t.volume,t.volume=0)}))},"unmute-audio":function(t){this.handleClip(t,(function(t){t&&(t.volume=t.unmuted,delete t.unmuted)}))},"pause-audio":function(t){this.handleClip(t,(function(t){t&&t.pause()}))},"unpause-audio":function(t){this.handleClip(t,(function(t){t&&t.unpause()}))},"set-pan":function(t,e){var i=e||"",n=function(t,e){e&&(e.pan=t)};e?this.handleClip(i,n.bind(null,t)):this.getAllClips(n.bind(null,t))},"set-volume":function(t,e){var i=e||"",n=function(t,e){e&&(e.volume=t)};e?this.handleClip(i,n.bind(null,t)):this.getAllClips(n.bind(null,t))},"set-speed":function(t,e){var i=e||"",n=function(t,e){e&&(e.speed=t)};e?this.handleClip(i,n.bind(null,t)):this.getAllClips(n.bind(null,t))}},methods:{handleClip:function(t,e){"string"==typeof t?this.getClipById(t,e):this.getAllClips(e)},getClipById:function(t,e){var i=0,n=this.activeAudioClips;for(i=0;i<n.length;i++)if(n[i].soundId===t)return e&&e(n[i]),n[i];return e&&e(null),null},getAllClips:function(t){var e=0,i=this.activeAudioClips;if(t)for(e=0;e<i.length;e++)t(i[e]);return i},stopAudio:(n=function(t){this.stopAudioInstance(t.currentTarget)},function(t,e){var i=this.activeAudioClips,r=(n.bind(this),i.length);if(t)for(;r--;)i[r].soundId===t&&(i[r].playthrough||e||(i[r].stop(),Object(a.c)(i,r)));else{for(;r--;)e||i[r].playthrough||i[r].stop();i.length=0}}),stopAudioInstance:function(t){var e=this.activeAudioClips,i=e?e.indexOf(t):-1;i>=0&&Object(a.c)(e,i),t.stop()},removeClip:function(t){var e=this.activeAudioClips.indexOf(t);e>=0&&Object(a.c)(this.activeAudioClips,e)},addStateCheck:function(t,e,i){var n=l.a.setUp(t),r=h.a.setUp("states",n,"playing",!1);r.check=o.bind(this,r,e,i.bind(this)),this.checkStates.push(r)},destroy:function(){var t=this.checkStates,e=null,i=0;if(this.stopAudio(),a.a.recycle(this.activeAudioClips),this.activeAudioClips=null,this.state=null,t){for(i=t.length;i--;)(e=t[i]).states.recycle(),e.recycle();a.a.recycle(t),this.checkStates=null}}},getAssetList:function(t,e,i){var n="",r=a.a.setUp(),s=t.audioMap||e.audioMap||i.audioMap;for(n in s)if(s.hasOwnProperty(n)){var o=(s[n].sound||s[n])+".{ogg,mp3}";-1===r.indexOf(o)&&r.push(o)}return r}}))},function(t,e,i){"use strict";var n,r,s,o,a,h,u,l,c,f,d,p,g,v,y,m,b,_=i(11),w=i(8),x=i(7),E=i(43),T=i(9),S=i(2);e.a=(g=window.devicePixelRatio||1,v=function(t,e,i,n){var r=_.a.setUp(n.x+e,n.y+i,n.width,n.height),s=t.x,o=t.y;return r.top<t.top?o-=t.top-r.top:r.bottom>t.bottom&&(o+=t.bottom-r.bottom),r.left<t.left?s-=t.left-r.left:r.right>t.right&&(s+=t.right-r.right),r.recycle(),this.move(s,o,0)},y=function(){return!1},m=function(t){return t.clientX?t.clientX:t.touches&&t.touches[0]&&t.touches[0].clientX?t.touches[0].clientX:0},b=function(t){return t.clientY?t.clientY:t.touches&&t.touches[0]&&t.touches[0].clientY?t.touches[0].clientY:0},Object(S.a)({id:"Camera",properties:{width:0,height:0,mode:"static",overflow:!1,stretch:!1,threshold:1,rotate:!1,x:0,y:0},publicProperties:{canvas:null,transitionX:400,transitionY:600,transitionAngle:600},initialize:function(t){var e=_.a.setUp(this.x,this.y,this.width,this.height),i=x.a.setUp("viewport",e,"orientation",t.orientation||0);this.viewport=_.a.setUp(0,0,0,0),this.worldCamera=i,this.worldDimensions=_.a.setUp(),this.message=x.a.setUp("viewport",_.a.setUp(),"scaleX",0,"scaleY",0,"orientation",0,"stationary",!1,"world",this.worldDimensions),this.cameraLoadedMessage=x.a.setUp("viewport",this.message.viewport,"world",this.worldDimensions),this.worldIsLoaded=!1,this.following=null,this.state="static","pan"===this.mode&&(this.state="mouse-pan"),this.boundingBox=_.a.setUp(e.x,e.y,e.width/2,e.height/2),this.lastX=e.x,this.lastY=e.y,this.lastOrientation=i.orientation,this.forwardX=0,this.forwardY=0,this.forwardAngle=0,this.averageOffsetX=0,this.averageOffsetY=0,this.averageOffsetAngle=0,this.offsetX=0,this.offsetY=0,this.offsetAngle=0,this.forwardFollower=x.a.setUp("x",this.lastX,"y",this.lastY,"orientation",this.lastOrientation),this.lastFollow=x.a.setUp("entity",null,"mode",null,"offsetX",0,"offsetY",0,"begin",0),this.xMagnitude=0,this.yMagnitude=0,this.xWaveLength=0,this.yWaveLength=0,this.xShakeTime=0,this.yShakeTime=0,this.shakeTime=0,this.shakeIncrementor=0,this.direction=!0,this.stationary=!1,this.viewportUpdate=!1,this.owner.container?this.parentContainer=this.owner.container:this.owner.stage?(this.canvas=this.canvas||platypus.game.canvas,this.parentContainer=this.owner.stage,this.owner.width=this.canvas.width,this.owner.height=this.canvas.height):platypus.debug.warn("Camera: There appears to be no Container on this entity for the camera to display."),this.container=new w.e,this.container.visible=!1,this.parentContainer.addChild(this.container),this.movedCamera=!1},events:{load:function(){this.resize()},"render-world":function(t){this.world=t.world,this.container.addChild(this.world)},"child-entity-added":function(t){this.viewportUpdate=!0,this.worldIsLoaded&&t.triggerEvent("camera-loaded",this.cameraLoadedMessage)},"child-entity-updated":function(t){this.viewportUpdate=!0,this.worldIsLoaded&&t.triggerEvent("camera-update",this.message)},"world-loaded":function(t){this.message.viewport.set(this.worldCamera.viewport),this.worldDimensions.set(t.world),this.worldIsLoaded=!0,t.camera&&this.follow(t.camera),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("camera-loaded",this.cameraLoadedMessage),this.updateMovementMethods()},pointerdown:function(t){var e=this.worldCamera.viewport;"mouse-pan"===this.state&&(this.mouseVector||(this.mouseVector=T.a.setUp(),this.mouseWorldOrigin=T.a.setUp()),this.mouse=this.mouseVector,this.mouse.x=m(t.event),this.mouse.y=b(t.event),this.mouseWorldOrigin.x=e.x,this.mouseWorldOrigin.y=e.y,t.pixiEvent.stopPropagation())},pressmove:function(t){this.mouse&&this.move(this.mouseWorldOrigin.x+(this.mouse.x-m(t.event))*g/this.world.transform.worldTransform.a,this.mouseWorldOrigin.y+(this.mouse.y-b(t.event))*g/this.world.transform.worldTransform.d)&&(this.viewportUpdate=!0,this.movedCamera=!0,t.pixiEvent.stopPropagation())},pressup:function(t){this.mouse&&(this.mouse=null,this.movedCamera&&(this.movedCamera=!1,t.pixiEvent.stopPropagation()))},tick:function(t){var e=this.message,i=e.viewport,n=this.worldCamera;"following"===this.state&&this.followingFunction(this.following,t.delta)&&(this.viewportUpdate=!0),this.canvas&&(this.owner.width=this.canvas.width,this.owner.height=this.canvas.height),this.owner.width===this.lastWidth&&this.owner.height===this.lastHeight||(this.resize(),this.lastWidth=this.owner.width,this.lastHeight=this.owner.height),this.viewportUpdate?(this.viewportUpdate=!1,this.stationary=!1,e.stationary=!1,i.set(n.viewport),this.shakeIncrementor<this.shakeTime&&(this.viewportUpdate=!0,this.shakeIncrementor+=t.delta,this.shakeIncrementor=Math.min(this.shakeIncrementor,this.shakeTime),this.shakeIncrementor<this.xShakeTime&&i.moveX(i.x+Math.sin(this.shakeIncrementor/this.xWaveLength*(2*Math.PI))*this.xMagnitude),this.shakeIncrementor<this.yShakeTime&&i.moveY(i.y+Math.sin(this.shakeIncrementor/this.yWaveLength*(2*Math.PI))*this.yMagnitude)),e.scaleX=this.windowPerWorldUnitWidth,e.scaleY=this.windowPerWorldUnitHeight,e.orientation=n.orientation,this.world.setTransform(-i.x,-i.y,1,1,0),this.container.setTransform(i.halfWidth*e.scaleX,i.halfHeight*e.scaleY,e.scaleX,e.scaleY,e.orientation),this.container.visible=!0,this.owner.triggerEvent("camera-update",e),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("camera-update",e)):this.stationary||(this.stationary=!0,e.stationary=!0,this.owner.triggerEvent("camera-update",e),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("camera-update",e)),this.lastFollow.begin&&this.lastFollow.begin<Date.now()&&this.follow(this.lastFollow)},"resize-camera":function(t){this.width=t.width,this.height=t.height,this.resize()},relocate:(d=function(t){this.move(t.x,t.y)&&(this.viewportUpdate=!0)},p=function(){this.recycle()},function(t){var e=null,i=this.worldCamera.viewport;t.time?(e=T.a.setUp(i.x,i.y),new E.a.Tween(e).to({x:t.x,y:t.y},t.time).easing(t.ease).onUpdate(d.bind(this,e)).onStop(p.bind(e)).start()):this.move(t.x,t.y)&&(this.viewportUpdate=!0)}),follow:function(t){this.follow(t)},shake:function(t){var e=t||{},i=e.xMagnitude||0,n=e.yMagnitude||0,r=e.xFrequency||0,s=e.yFrequency||0,o=e.time||0;this.viewportUpdate=!0,this.shakeIncrementor=0,this.xMagnitude=i,this.yMagnitude=n,0===r?(this.xWaveLength=1,this.xShakeTime=0):(this.xWaveLength=1e3/r,this.xShakeTime=Math.ceil(o/this.xWaveLength)*this.xWaveLength),0===s?(this.yWaveLength=1,this.yShakeTime=0):(this.yWaveLength=1e3/s,this.yShakeTime=Math.ceil(o/this.yWaveLength)*this.yWaveLength),this.shakeTime=Math.max(this.xShakeTime,this.yShakeTime)}},methods:{follow:function(t){switch(t.time?(this.lastFollow.begin||(this.lastFollow.entity=this.following,this.lastFollow.mode=this.mode,this.lastFollow.offsetX=this.offsetX,this.lastFollow.offsetY=this.offsetY),this.lastFollow.begin=Date.now()+t.time):this.lastFollow.begin&&(this.lastFollow.begin=0),this.mode=t.mode,t.mode){case"locked":this.state="following",this.following=t.entity,this.followingFunction=this.lockedFollow,this.offsetX=t.offsetX||0,this.offsetY=t.offsetY||0,this.offsetAngle=t.offsetAngle||0;break;case"forward":this.state="following",this.followFocused=!1,this.following=t.entity,this.lastX=t.entity.x-t.offsetX||0,this.lastY=t.entity.y-t.offsetY||0,this.lastOrientation=t.entity.orientation||0,this.forwardX=t.movementX||.1*this.transitionX,this.forwardY=t.movementY||.1*this.transitionY,this.averageOffsetX=0,this.averageOffsetY=0,this.averageOffsetAngle=0,this.offsetX=t.offsetX||0,this.offsetY=t.offsetY||0,this.offsetAngle=t.offsetAngle||0,this.followingFunction=this.forwardFollow;break;case"bounding":this.state="following",this.following=t.entity,this.offsetX=t.offsetX||0,this.offsetY=t.offsetY||0,this.offsetAngle=t.offsetAngle||0,this.boundingBox.setAll(t.x,t.y,t.width,t.height),this.followingFunction=this.boundingFollow;break;case"anchor-bound":this.state="following",this.following=t.entity,this.followingFunction=v.bind(this,t.anchorAABB,t.offsetX||0,t.offsetY||0);break;case"pan":this.state="mouse-pan",this.following=null,this.followingFunction=null,t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.move(t.x,t.y,t.orientation||0),this.viewportUpdate=!0);break;default:this.state="static",this.following=null,this.followingFunction=null,t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.move(t.x,t.y,t.orientation||0),this.viewportUpdate=!0)}t.begin&&(t.begin=0)},move:function(t,e,i){var n=this.moveX(t);return n=this.moveY(e)||n,this.rotate&&(n=this.reorient(i||0)||n),n},moveX:y,moveY:y,reorient:function(t){var e=this.worldCamera;return Math.abs(e.orientation-t)>1e-4&&(e.orientation=t,!0)},lockedFollow:(l=Math.min,c=function(t,e,i){return i*e+(1-i)*t},f=function(t,e){return t?l(e/t,1):1},function(t,e){var i=this.worldCamera,n=i.viewport,r=c(n.x,t.x+this.offsetX,f(this.transitionX,e)),s=c(n.y,t.y+this.offsetY,f(this.transitionY,e));return this.rotate?this.move(r,s,c(i.orientation,-(t.orientation||0),f(this.transitionAngle,e))):this.move(r,s,0)}),forwardFollow:function(t,e){var i=this.forwardFollower,n=!1,r=15/e,s=this.worldCamera,o=s.viewport,a=t.x+this.offsetX,h=t.y+this.offsetY,u=(t.orientation||0)+this.offsetAngle;return this.followFocused&&this.lastX===a&&this.lastY===h?this.lockedFollow(i,e):(this.averageOffsetX*=.9,this.averageOffsetY*=.9,this.averageOffsetX+=(1-.9)*(a-this.lastX)*r,this.averageOffsetY+=(1-.9)*(h-this.lastY)*r,Math.abs(this.averageOffsetX)>o.width/(2*this.forwardX)&&(this.averageOffsetX=0),Math.abs(this.averageOffsetY)>o.height/(2*this.forwardY)&&(this.averageOffsetY=0),this.rotate&&(this.averageOffsetAngle*=.9,this.averageOffsetAngle+=(1-.9)*(u-this.lastOrientation)*r,Math.abs(this.averageOffsetAngle)>s.orientation/(2*this.forwardAngle)&&(this.averageOffsetAngle=0)),i.x=this.averageOffsetX*this.forwardX+a,i.y=this.averageOffsetY*this.forwardY+h,i.orientation=this.averageOffsetAngle*this.forwardAngle+u,this.lastX=a,this.lastY=h,this.lastOrientation=u,n=this.lockedFollow(i,e),this.followFocused||n||(this.followFocused=!0),n)},boundingFollow:function(t,e){var i=0,n=0,r=this.transitionX?Math.min(e/this.transitionX,1):1,s=1-r,o=this.transitionY?Math.min(e/this.transitionY,1):1,a=1-o,h=this.worldCamera.viewport;return this.boundingBox.move(h.x,h.y),t.x>this.boundingBox.right?i=t.x-this.boundingBox.halfWidth:t.x<this.boundingBox.left&&(i=t.x+this.boundingBox.halfWidth),t.y>this.boundingBox.bottom?n=t.y-this.boundingBox.halfHeight:t.y<this.boundingBox.top&&(n=t.y+this.boundingBox.halfHeight),0!==i&&(i=this.moveX(r*i+s*h.x)),0!==n&&(n=this.moveY(o*n+a*h.y)),i||n},resize:function(){var t=this.width/this.height,e=this.owner.width/this.owner.height,i=this.worldCamera.viewport;this.viewport.setAll(this.owner.width/2,this.owner.height/2,this.owner.width,this.owner.height),this.stretch||(e>t?this.overflow?i.resize(this.height*e,this.height):this.viewport.resize(this.viewport.height*t,this.viewport.height):this.overflow?i.resize(this.width,this.width/e):this.viewport.resize(this.viewport.width,this.viewport.width/t)),this.worldPerWindowUnitWidth=i.width/this.viewport.width,this.worldPerWindowUnitHeight=i.height/this.viewport.height,this.windowPerWorldUnitWidth=this.viewport.width/i.width,this.windowPerWorldUnitHeight=this.viewport.height/i.height,this.container.setTransform(this.viewport.x-this.viewport.halfWidth,this.viewport.y-this.viewport.halfHeight),this.viewportUpdate=!0,this.updateMovementMethods()},updateMovementMethods:(n=y,r=function(){var t=this.worldDimensions;return this.worldCamera.viewport.moveX(t.width/2+t.left),this.moveX=n,!0},s=function(){var t=this.worldDimensions;return this.worldCamera.viewport.moveY(t.height/2+t.top),this.moveY=n,!0},o=function(t){var e=this.worldCamera.viewport,i=this.worldDimensions,n=i.width,r=i.left;return Math.abs(e.x-t)>this.threshold&&(t+e.halfWidth>n+r?e.moveX(n-e.halfWidth+r):t<e.halfWidth+r?e.moveX(e.halfWidth+r):e.moveX(t),!0)},a=function(t){var e=this.worldCamera.viewport,i=this.worldDimensions,n=i.height,r=i.top;return Math.abs(e.y-t)>this.threshold&&(t+e.halfHeight>n+r?e.moveY(n-e.halfHeight+r):t<e.halfHeight+r?e.moveY(e.halfHeight+r):e.moveY(t),!0)},h=function(t){var e=this.worldCamera.viewport;return Math.abs(e.x-t)>this.threshold&&(e.moveX(t),!0)},u=function(t){var e=this.worldCamera.viewport;return Math.abs(e.y-t)>this.threshold&&(e.moveY(t),!0)},function(){var t=this.threshold,e=this.worldCamera.viewport,i=this.worldDimensions,n=i.width,l=i.height;n?n<e.width?this.moveX=r:this.moveX=o:this.moveX=h,l?l<e.height?this.moveY=s:this.moveY=a:this.moveY=u,this.threshold=-1,this.moveX(e.x),this.moveY(e.y),this.threshold=t}),destroy:function(){this.parentContainer.removeChild(this.container),this.parentContainer=null,this.container=null,this.mouseVector&&(this.mouseVector.recycle(),this.mouseWorldOrigin.recycle()),this.boundingBox.recycle(),this.viewport.recycle(),this.worldCamera.viewport.recycle(),this.worldCamera.recycle(),this.message.viewport.recycle(),this.message.recycle(),this.cameraLoadedMessage.recycle(),this.worldDimensions.recycle(),this.forwardFollower.recycle(),this.lastFollow.recycle()}},publicMethods:{isOnCanvas:function(t){var e=this.canvas;return!t||!(t.x+t.width<0||t.x>e.width||t.y+t.height<0||t.y>e.height)},windowToWorld:function(t,e,i){var n=i||T.a.setUp();return n.x=t.x*this.worldPerWindowUnitWidth,n.y=t.y*this.worldPerWindowUnitHeight,!1!==e&&(n.x+=this.worldCamera.viewport.left,n.y+=this.worldCamera.viewport.top),n},worldToWindow:function(t,e,i){var n=i||T.a.setUp();return n.x=t.x*this.windowPerWorldUnitWidth,n.y=t.y*this.windowPerWorldUnitHeight,!1!==e&&(n.x+=this.viewport.x,n.y+=this.viewport.y),n}}}))},function(t,e,i){"use strict";var n=i(7),r=i(2);e.a=Object(r.a)({id:"CameraFollowMe",properties:{camera:{},mode:"forward",pause:!1},initialize:function(){this.pauseGame=this.pause&&this.camera.time?{time:this.camera.time}:null,this.camera=n.a.setUp("entity",this.owner,"mode",this.camera.mode||this.mode,"top",this.camera.top,"left",this.camera.left,"offsetX",this.camera.offsetX,"offsetY",this.camera.offsetY,"width",this.camera.width,"height",this.camera.height,"time",this.camera.time)},events:{"follow-me":function(t){var e=null;e=t?n.a.setUp("entity",this.owner,"mode",t.mode||this.camera.mode,"top",t.top||this.camera.top,"left",t.left||this.camera.left,"offsetX",t.offsetX||this.camera.offsetX,"offsetY",t.offsetY||this.camera.offsetY,"width",t.width||this.camera.width,"height",t.height||this.camera.height,"time",t.time||this.camera.time):n.a.setUp(this.camera),this.pauseGame&&(this.owner.parent.triggerEvent("pause-logic",this.pauseGame),this.owner.parent.triggerEvent("pause-render",this.pauseGame)),this.owner.parent.triggerEvent("follow",e),e.recycle()}},methods:{destroy:function(){this.camera.recycle()}}})},function(t,e,i){"use strict";var n,r,s,o,a,h,u,l,c,f,d,p,g,v,y,m,b,_,w,x,E=i(0),T=i(11),S=i(69),O=i(7),A=i(20),P=i(9),C=i(2),M=(_=function(t,e,i,n){n.myType===e&&n.hitType===i&&this.owner.triggerEvent(t,n)},w=function(t,e,i,n){var r=0;if(n.myType===e&&n.hitType===i)for(r=0;r<t.length;r++)this.owner.triggerEvent(t[r],n)},x=function(t,e,i,n){var r=n.x,s=n.y;!n.entity||r||s||(r=n.entity.x-this.owner.x,s=n.entity.y-this.owner.y),n.myType===e&&n.hitType===i&&(s>0&&t.bottom?this.owner.trigger(t.bottom,n):s<0&&t.top&&this.owner.trigger(t.top,n),r>0&&t.right?this.owner.trigger(t.right,n):r<0&&t.left&&this.owner.trigger(t.left,n),t.all&&this.owner.trigger(t.all,n))},function(t,e,i){return"string"==typeof e?_.bind(t,e,t.collisionType,i):Array.isArray(e)?w.bind(t,e,t.collisionType,i):x.bind(t,e,t.collisionType,i)}),k=(s=function(t,e,i){var n=e.keys,r=n.length,s=null;if(i)return(s=e.get(i))?s.getAABB():null;for(t.reset();r--;)t.include(e.get(n[r]).getAABB());return t},o=function(t,e){var i=t.get(e);return i?i.getPreviousAABB():null},a=function(t,e){var i=t.get(e);return i?i.getShapes():null},h=function(t,e){var i=t.get(e);return i?i.getPrevShapes():null},u=function(t,e,i){for(var n=t.keys,r=n.length;r--;)t.get(n[r]).prepareCollision(e,i)},n=function(t,e,i){var n=0,r=e.stuck;r&&(n=t.magnitude(),e.thatShape.owner&&Math.abs(r)>1&&(r*=.05),(!n||n>Math.abs(r))&&(e.vector.x&&(t.x=r,t.y=0),e.vector.y&&(t.x=0,t.y=r),i.stuckWith&&i.stuckWith.recycle(),i.stuckWith=P.a.setUp(e.thatShape.x,e.thatShape.y)))},r={position:null,unstick:null},l=function(t,e){var i=e.xData[0],s=e.yData[0],o=r,a=null;i&&(a=P.a.setUp(0,0,0),n(a,i,this)),s&&(a=a||P.a.setUp(0,0,0),n(a,s,this)),o.position=t,o.unstick=a,this.triggerEvent("relocate-entity",o),a&&a.recycle()},c=function(t,e){for(var i=t.keys,n=i.length;n--;)t.get(i[n]).movePreviousX(e)},f=function(){return this.collisionTypes},d=function(){return this.solidCollisionMap},p=function(){return this.getAABB()},g=function(){return this.getPreviousAABB()},v=function(){return this.getShapes()},y=function(){return this.getPrevShapes()},m=function(t,e){this.prepareCollision(t,e)},b=function(t){this.movePreviousX(t)},function(t,e){var i=e.collisionFunctions;i||(i=e.collisionFunctions=A.a.setUp(),e.aabb=T.a.setUp(),e.getAABB=s.bind(e,e.aabb,i),e.getPreviousAABB=o.bind(e,i),e.getShapes=a.bind(e,i),e.getPrevShapes=h.bind(e,i),e.prepareCollision=u.bind(e,i),e.relocateEntity=l.bind(e),e.movePreviousX=c.bind(e,i),e.getCollisionTypes=f.bind(e),e.getSolidCollisions=d.bind(e)),i.set(t.collisionType,O.a.setUp("getAABB",p.bind(t),"getPreviousAABB",g.bind(t),"getShapes",v.bind(t),"getPrevShapes",y.bind(t),"prepareCollision",m.bind(t),"movePreviousX",b.bind(t)))}),I=function(t,e,i,n,r){for(var s=t.length;s--;){var o=t[s];o.updateAll(e[s]),o.update(n,r),i.include(o.aABB)}this.updateShapes=L},L=function(t,e,i,n,r){for(var s=t.length;s--;){var o=t[s];o.update(n,r),i.include(o.aABB)}};e.a=Object(C.a)({id:"CollisionBasic",properties:{collisionType:"none",shapeType:"rectangle",ignoreOrientation:!1,regX:null,regY:null,width:0,height:0,radius:0,softCollisions:null,solidCollisions:null,margin:0,shapes:null},publicProperties:{collisionDirty:!1,immobile:!1,bullet:!1,jumpThrough:!1},initialize:function(t){var e=null,i=0,n="",r=null,s=this.regX,o=this.regY,a=this.width,h=this.height,u=this.radius,l=0,c=0,f=0,d=0;for("number"==typeof this.margin?(l=this.margin,c=this.margin,f=this.margin,d=this.margin):(l=this.margin.left||0,c=this.margin.right||0,f=this.margin.top||0,d=this.margin.bottom||0),null===s&&(s=this.regX=a/2),null===o&&(o=this.regY=h/2),P.a.assign(this.owner,"position","x","y","z"),P.a.assign(this.owner,"previousPosition","previousX","previousY","previousZ"),this.owner.previousX=this.owner.previousX||this.owner.x,this.owner.previousY=this.owner.previousY||this.owner.y,this.aabb=T.a.setUp(),this.prevAABB=T.a.setUp(),this.shapes?r=this.shapes:"circle"===this.shapeType?(u=u||((a||0)+(h||0))/4,r=[{regX:(isNaN(s)?u:s)-(c-l)/2,regY:(isNaN(o)?u:o)-(d-f)/2,radius:u,type:this.shapeType}]):r=[{regX:(isNaN(s)?(a||0)/2:s)+l,regY:(isNaN(o)?(h||0)/2:o)+f,points:t.points,width:(a||0)+l+c,height:(h||0)+f+d,type:this.shapeType}],this.owner.collisionTypes=this.owner.collisionTypes||E.a.setUp(),this.owner.collisionTypes.push(this.collisionType),this.shapes=E.a.setUp(),this.prevShapes=E.a.setUp(),this.entities=null,i=0;i<r.length;i++)this.shapes.push(S.a.setUp(this.owner,r[i],this.collisionType)),this.prevShapes.push(S.a.setUp(this.owner,r[i],this.collisionType)),this.prevAABB.include(this.prevShapes[i].aABB),this.aabb.include(this.shapes[i].aABB);if(this.updateShapes=L,k(this,this.owner),this.owner.solidCollisionMap=this.owner.solidCollisionMap||A.a.setUp(),e=this.owner.solidCollisionMap.set(this.collisionType,E.a.setUp()),this.solidCollisions)for(n in this.solidCollisions)this.solidCollisions.hasOwnProperty(n)&&(e.push(n),this.solidCollisions[n]&&this.addEventListener("hit-by-"+n,M(this,this.solidCollisions[n],"solid")));if(this.owner.softCollisionMap=this.owner.softCollisionMap||A.a.setUp(),e=this.owner.softCollisionMap.set(this.collisionType,E.a.setUp()),this.softCollisions)for(n in this.softCollisions)this.softCollisions.hasOwnProperty(n)&&(e.push(n),this.softCollisions[n]&&this.addEventListener("hit-by-"+n,M(this,this.softCollisions[n],"soft")));this.active=!0,this.stuck=!1},events:{"collide-on":function(t){var e=this.owner,i=this.collisionType,n=e.collisionTypes;this.active||"string"==typeof t&&t!==i||(e.parent.triggerEvent("remove-collision-entity",e),-1===n.indexOf(i)&&n.push(i),e.parent.triggerEvent("add-collision-entity",e),this.active=!0,this.collisionDirty=!0)},"collide-off":function(t){var e=0,i=this.owner,n=i.parent,r=this.collisionType,s=i.collisionTypes;!this.active||"string"==typeof t&&t!==r||(n.triggerEvent("remove-collision-entity",i),(e=s.indexOf(r))>=0&&Object(E.c)(s,e),this.active=!1,s.length&&n.triggerEvent("add-collision-entity",i))},"relocate-entity":function(t,e){var i,n,r=t.unstick,s=0,o=0,a=this.aabb,h=this.owner,u=null,l=this.shapes,c=t.position||t;for(r&&(s=r.magnitude()),this.move&&(this.move.recycle(),this.move=null),t.relative||e?h.position.setVector(h.previousPosition).add(c):h.position.setVector(c),this.stuck&&(s>0?h.position.add(r):this.stuck=!1),i=h.x,n=h.y,a.reset(),o=l.length;o--;)(u=l[o]).update(i,n),a.include(u.aABB);h.previousPosition.setVector(h.position),s>0&&(this.stuck||(this.stuck=!0),this.move=h.stuckWith.copy().add(-i,-n).normalize())},"handle-logic":function(){this.move&&this.owner.position.add(this.move)},"orientation-updated":function(t){var e=0;if(!this.ignoreOrientation){for(e=0;e<this.shapes.length;e++)this.shapes[e].multiply(t);this.updateShapes=I,this.collisionDirty=!0}}},methods:{getAABB:function(){return this.aabb},getPreviousAABB:function(){return this.prevAABB},getShapes:function(){return this.shapes},getPrevShapes:function(){return this.prevShapes},prepareCollision:function(t,e){var i=this.shapes,n=this.prevShapes,r=this.aabb;this.owner.x=t,this.owner.y=e,this.prevShapes=i,this.shapes=n,this.prevAABB.set(r),r.reset(),this.updateShapes(n,i,r,t,e),this.collisionDirty&&(this.collisionDirty=!1)},movePreviousX:function(t){var e=0;for(this.prevAABB.moveX(t),e=0;e<this.prevShapes.length;e++)this.prevShapes[e].setXWithEntityX(t)},destroy:function(){var t=this.owner.collisionFunctions,e=this.collisionType,i=this.owner.collisionTypes?this.owner.collisionTypes.indexOf(e):-1,n=this.owner;for(n.parent.triggerEvent("remove-collision-entity",n),this.aabb.recycle(),delete this.aabb,this.prevAABB.recycle(),delete this.prevAABB,i>=0&&Object(E.c)(n.collisionTypes,i),n.collisionTypes&&(n.solidCollisionMap.has(e)&&E.a.recycle(n.solidCollisionMap.delete(e)),n.softCollisionMap.has(e)&&E.a.recycle(n.softCollisionMap.delete(e)),t.delete(e).recycle()),i=this.shapes.length;i--;)this.shapes[i].recycle(),this.prevShapes[i].recycle();E.a.recycle(this.shapes),E.a.recycle(this.prevShapes),this.shapes=null,this.prevShapes=null,this.entities=null,n.collisionTypes&&(n.collisionTypes.length?n.parent.triggerEvent("add-collision-entity",n):(t.recycle(),n.collisionFunctions=null,n.solidCollisionMap.recycle(),n.solidCollisionMap=null,n.softCollisionMap.recycle(),n.softCollisionMap=null,n.aabb.recycle(),n.aabb=null,E.a.recycle(n.collisionTypes),n.collisionTypes=null))}}})},function(t,e,i){"use strict";var n,r,s=i(2);e.a=(n=function(t,e,i){this.state.get(t)&&this.trigger(e,i)},r=function(t,e,i){this.state.get(t)||this.trigger(e,i)},Object(s.a)({id:"CollisionFilter",properties:{collisions:{},state:""},initialize:function(){var t="",e=this.collisions,i=this.state;if(e)if("!"===i[0])for(t in i=i.substring(1),e)e.hasOwnProperty(t)&&this.addEventListener(t,r.bind(this.owner,i,e[t]));else for(t in e)e.hasOwnProperty(t)&&this.addEventListener(t,n.bind(this.owner,i,e[t]))}}))},function(t,e,i){"use strict";var n=i(0),r=i(11),s=i(20),o=i(9),a=i(2);e.a=Object(a.a)({id:"CollisionGroup",initialize:function(){this.solidEntities=n.a.setUp(),this.collisionTypes=n.a.setUp(),this.shapes=n.a.setUp(),this.prevShapes=n.a.setUp(),this.terrain=null,this.aabb=r.a.setUp(this.owner.x,this.owner.y),this.prevAABB=r.a.setUp(this.owner.x,this.owner.y),this.filteredAABB=r.a.setUp(),o.a.assign(this.owner,"position","x","y","z"),o.a.assign(this.owner,"previousPosition","previousX","previousY","previousZ"),this.owner.previousX=this.owner.previousX||this.owner.x,this.owner.previousY=this.owner.previousY||this.owner.y,this.collisionGroup=this.owner.collisionGroup={getAllEntities:function(){var t=0,e=0,i=null;for(t=0;t<this.solidEntities.length;t++)(i=this.solidEntities[t])!==this.owner&&i.collisionGroup?e+=i.collisionGroup.getAllEntities():e+=1;return e}.bind(this),getSize:function(){return this.solidEntities.length}.bind(this),getCollisionTypes:function(){return this.getCollisionTypes()}.bind(this),getSolidCollisions:function(){return this.getSolidCollisions()}.bind(this),getAABB:function(t){return this.getAABB(t)}.bind(this),getPreviousAABB:function(t){return this.getPreviousAABB(t)}.bind(this),getShapes:function(t){return this.getShapes(t)}.bind(this),getPrevShapes:function(t){return this.getPrevShapes(t)}.bind(this),prepareCollision:function(t,e){return this.prepareCollision(t,e)}.bind(this),relocateEntity:function(t,e){return this.relocateEntity(t,e)}.bind(this),movePreviousX:function(t){return this.movePreviousX(t)}.bind(this),getSolidEntities:function(){return this.solidEntities}.bind(this),jumpThrough:!1}},events:{"child-entity-added":function(t){this.addCollisionEntity(t)},"add-collision-entity":function(t){this.addCollisionEntity(t)},"child-entity-removed":function(t){this.removeCollisionEntity(t)},"remove-collision-entity":function(t){this.removeCollisionEntity(t)},"relocate-entity":function(){this.owner.previousPosition.setVector(this.owner.position),this.updateAABB()}},methods:{addCollisionEntity:function(t){var e=0,i=t.collisionTypes;if(i){for(e=i.length;e--;)t.solidCollisionMap.get(i[e]).length&&!t.immobile&&(this.solidEntities[this.solidEntities.length]=t);this.updateAABB()}},removeCollisionEntity:function(t){var e=0,i=0,r=t.collisionTypes;if(r){for(i=r.length;i--;)t.solidCollisionMap.get(r[i]).length&&(e=this.solidEntities.indexOf(t))>=0&&Object(n.c)(this.solidEntities,e);this.updateAABB()}},getCollisionTypes:function(){var t=null,e=this.collisionTypes,i=this.solidEntities,r=i.length;for(e.length=0;r--;)(t=i[r])!==this.owner&&t.collisionGroup&&(t=t.collisionGroup),Object(n.d)(e,t.getCollisionTypes());return e},getSolidCollisions:function(){var t=0,e="",i=null,r=null,o=s.a.setUp(),a=null,h=0,u=null,l=null,c=!1;for(t=0;t<this.solidEntities.length;t++){for(c=!1,(r=this.solidEntities[t])!==this.owner&&r.collisionGroup&&(r=r.collisionGroup,c=!0),h=(i=(a=r.getSolidCollisions()).keys).length;h--;)e=i[h],u=o.get(e),l=a.get(e),u||(u=o.set(e,n.a.setUp())),Object(n.d)(u,l),c&&l.recycle();c&&a.recycle()}return o},getAABB:function(t){var e=0,i=this.filteredAABB,n=null,r=null,s=this.solidEntities;if(t){for(i.reset(),e=s.length;e--;)(n=s[e])!==this.owner&&n.collisionGroup&&(n=n.collisionGroup),(r=n.getAABB(t))&&i.include(r);return i}return this.aabb},getPreviousAABB:function(t){var e=0,i=this.filteredAABB,n=null,r=null,s=this.solidEntities;if(t){for(i.reset(),e=s.length;e--;)(n=s[e])!==this.owner&&n.collisionGroup&&(n=n.collisionGroup),(r=n.getPreviousAABB(t))&&i.include(r);return i}return this.prevAABB},updateAABB:function(){var t=this.aabb,e=this.solidEntities,i=null,n=e.length,r=this.owner;for(t.reset();n--;)i=e[n],t.include(i!==r&&i.getCollisionGroupAABB?i.getCollisionGroupAABB():i.getAABB())},getShapes:function(t){var e=0,i=null,r=this.shapes,s=null;for(r.length=0,e=0;e<this.solidEntities.length;e++)(i=this.solidEntities[e])!==this.owner&&i.collisionGroup&&(i=i.collisionGroup),(s=i.getShapes(t))&&Object(n.d)(r,s);return r},getPrevShapes:function(t){var e=0,i=null,r=null,s=this.prevShapes;for(s.length=0,e=0;e<this.solidEntities.length;e++)(i=this.solidEntities[e])!==this.owner&&i.collisionGroup&&(i=i.collisionGroup),(r=i.getPrevShapes(t))&&Object(n.d)(s,r);return s},prepareCollision:function(t,e){var i=0,n=null,r=0,s=0;for(i=0;i<this.solidEntities.length;i++)(n=this.solidEntities[i]).saveDX=n.x-n.previousX,n.saveDY=n.y-n.previousY,r=n.saveOX=this.owner.previousX-n.previousX,s=n.saveOY=this.owner.previousY-n.previousY,n!==this.owner&&n.collisionGroup&&(n=n.collisionGroup),n.prepareCollision(t-r,e-s)},movePreviousX:function(t){var e=null,i=0,n=0;for(n=0;n<this.solidEntities.length;n++)i=(e=this.solidEntities[n]).saveOX,e!==this.owner&&e.collisionGroup&&(e=e.collisionGroup),e.movePreviousX(t-i)},relocateEntity:function(t,e){var i=null,n=null,r=0,s=null,a=this.owner,h=this.solidEntities,u=null;for(a.saveDX-=t.x-a.previousX,a.saveDY-=t.y-a.previousY,r=(s=e.xData).length;r--;)if(s[r].thisShape.owner===a){a.saveDX=0;break}for(r=(s=e.yData).length;r--;)if(s[r].thisShape.owner===a){a.saveDY=0;break}for(r=0;r<h.length;r++)(i=n=h[r])!==a&&i.collisionGroup&&(i=i.collisionGroup),u=o.a.setUp(t.x-n.saveOX,t.y-n.saveOY,i.z),i.relocateEntity(u,e),u.recycle(),n.x+=n.saveDX,n.y+=n.saveDY,n!==a&&(n.x+=a.saveDX,n.y+=a.saveDY)},destroy:function(){n.a.recycle(this.solidEntities),n.a.recycle(this.collisionTypes),n.a.recycle(this.shapes),n.a.recycle(this.prevShapes),this.aabb.recycle(),this.prevAABB.recycle(),this.filteredAABB.recycle()}},publicMethods:{getCollisionGroupAABB:function(){return this.getAABB()},getWorldEntities:function(){return this.owner.parent.getWorldEntities()},getWorldTerrain:function(){return this.owner.parent.getWorldTerrain()}}})},function(t,e,i){"use strict";var n,r,s,o,a,h,u,l,c,f,d,p=i(11),g=i(69),v=i(7),y=i(0),m=i(2);e.a=(n=function(){return this.collisionType},r=function(t){return this.collisionTypeMap[268435455&t]||this.collisionType},s=function(t){return 0===t?t:1610612736^t},o=function(t){return 0===t?t:-1610612736^t},a=function(t){return 0===t?t:2147483648^t},h=function(t){return 0===t?t:1073741824^t},u=function(t){return 0===t?t:536870912&t?1610612736^t:-1610612736^t},l=function(t){return 0===t?t:-1073741824^t},c=function(t){return 0===t?t:536870912&t?-1610612736^t:1610612736^t},f=function(t,e,i,n,r){var s=0,o=0,a=y.a.setUp();for(o=0;o<r;o++)for(a[o]=y.a.setUp(),s=0;s<n;s++)a[o][s]=t[e+s][i+o];return a},d={diagonal:function(t,e,i,n,r){var o=f(t,e,i,n,r),a=s,h=0,u=0;for(h=0;h<n;h++)for(u=0;u<r;u++)t[e+h][i+u]=a(o[h][u]);return y.a.recycle(o,2),t},"diagonal-inverse":function(t,e,i,n,r){var s=f(t,e,i,n,r),a=o,h=0,u=0;for(h=0;h<n;h++)for(u=0;u<r;u++)t[e+n-h-1][i+r-u-1]=a(s[h][u]);return y.a.recycle(s,2),t},horizontal:function(t,e,i,n,r){var s=f(t,e,i,n,r),o=a,h=0,u=0;for(u=0;u<r;u++)for(h=0;h<n;h++)t[e+n-h-1][i+u]=o(s[u][h]);return y.a.recycle(s,2),t},vertical:function(t,e,i,n,r){var s=f(t,e,i,n,r),o=h,a=0,u=0;for(u=0;u<r;u++)for(a=0;a<n;a++)t[e+a][i+r-u-1]=o(s[u][a]);return y.a.recycle(s,2),t},"rotate-90":function(t,e,i,n,r){var s=f(t,e,i,n,r),o=u,a=0,h=0;for(h=0;h<r;h++)for(a=0;a<n;a++)t[e+r-h-1][i+a]=o(s[h][a]);return y.a.recycle(s,2),t},"rotate-180":function(t,e,i,n,r){var s=f(t,e,i,n,r),o=l,a=0,h=0;for(h=0;h<r;h++)for(a=0;a<n;a++)t[e+n-a-1][i+r-h-1]=o(s[h][a]);return y.a.recycle(s,2),t},"rotate-270":function(t,e,i,n,r){var s=f(t,e,i,n,r),o=c,a=0,h=0;for(h=0;h<r;h++)for(a=0;a<n;a++)t[e+h][i+n-a-1]=o(s[h][a]);return y.a.recycle(s,2),t},translate:function(t,e,i,n,r,s,o){var a=function(t,e,i,n,r){var s=0,o=0,a=y.a.setUp();for(o=0;o<r;o++)for(a[o]=y.a.setUp(),s=0;s<n;s++)a[o][s]=t[e+s][i+o],t[e+s][i+o]=-1;return a}(t,e,i,n,r),h=0,u=0;for(u=0;u<r;u++)for(h=0;h<n;h++)t[e+h+s][i+u+o]=a[u][h];return y.a.recycle(a,2),t}},Object(m.a)({id:"CollisionTiles",properties:{collisionTypeMap:null,collisionType:"tiles",top:0,left:0},publicProperties:{collisionMap:[],tileWidth:10,tileHeight:10},initialize:function(){this.tileOffsetLeft=this.tileWidth/2+this.left,this.tileOffsetTop=this.tileHeight/2+this.top,this.columns=this.collisionMap.length,this.rows=this.collisionMap[0].length,this.shapeDefinition=v.a.setUp("x",0,"y",0,"type","rectangle","width",this.tileWidth,"height",this.tileHeight),this.storedTiles=y.a.setUp(),this.serveTiles=y.a.setUp(),this.storedTileIndex=0,this.aabb=p.a.setUp(),this.aabb.setBounds(this.left,this.top,this.tileWidth*this.columns+this.left,this.tileHeight*this.rows+this.top),this.collisionTypeMap?this.getType=r:this.getType=n},events:{transform:function(t){this.transform(t)},translate:function(t){this.translate(t)}},methods:{getShape:function(t,e,i){var n=this.storedTileIndex,r=null,s=this.storedTiles;return n===s.length?(r=g.a.setUp(null,this.shapeDefinition,i),s.push(r)):(r=s[n]).collisionType=i,r.update(t*this.tileWidth+this.tileOffsetLeft,e*this.tileHeight+this.tileOffsetTop),this.storedTileIndex+=1,r},addShape:function(t,e,i,n,r){var s=this.collisionMap[i][n],o=268435455&s,a=268435456,h=536870912,u=2147483648,l=1073741824;return s&&this.getType(o)===r&&((a&=s)?(l&=s,(h&=s)&&(u&=s)?e.left>=(i+1)*this.tileWidth+this.left&&t.push(this.getShape(i,n,r)):h?e.right<=i*this.tileWidth+this.left&&t.push(this.getShape(i,n,r)):l?e.top>=(n+1)*this.tileHeight+this.top&&t.push(this.getShape(i,n,r)):e.bottom<=n*this.tileHeight+this.top&&t.push(this.getShape(i,n,r))):t.push(this.getShape(i,n,r))),t},destroy:function(){var t=this.storedTiles,e=t.length;for(this.shapeDefinition.recycle(),this.shapeDefinition=null;e--;)t[e].recycle();y.a.recycle(t),this.storedTiles=null,y.a.recycle(this.serveTiles),this.serveTiles=null,this.aabb.recycle(),this.aabb=null}},publicMethods:{getAABB:function(){return this.aabb},isTile:function(t,e){return!(t<0||e<0||t>=this.columns||e>=this.rows||-1===this.collisionMap[t][e])},getTileShapes:function(t,e,i){var n=i||"tiles",r=this.left,s=this.top,o=this.tileHeight,a=this.tileWidth,h=Math.max(Math.floor((t.left-r)/a),0),u=Math.max(Math.floor((t.top-s)/o),0),l=Math.min(Math.ceil((t.right-r)/a),this.columns),c=Math.min(Math.ceil((t.bottom-s)/o),this.rows),f=0,d=0,p=this.serveTiles;for(p.length=0,this.storedTileIndex=0,f=h;f<l;f++)for(d=u;d<c;d++)this.addShape(p,e,f,d,n);return p},transform:function(t){var e=t||{},i=e.left||0,n=e.top||0,r=e.width||this.rows,s=e.height||this.columns,o=e.type||"horizontal";return d[o]?d[o](this.collisionMap,i,n,r,s):null},translate:function(t){var e=t||{},i=e.left||0,n=e.top||0,r=e.width||this.rows,s=e.height||this.columns,o=e.dx||0,a=e.dy||0;return d.translate(this.collisionMap,i,n,r,s,o,a)},getCollisionMatrix:function(t,e,i,n){return f(this.collisionMap,t,e,i,n)},setCollisionMatrix:function(t,e,i,n,r){return function(t,e,i,n,r,s){var o=0,a=0;for(a=0;a<s;a++)for(o=0;o<r;o++)t[i+o][n+a]=e[a][o];return t}(this.collisionMap,t,e,i,n,r)}}}))},function(t,e,i){"use strict";var n,r=i(0),s=i(2);e.a=(n=function(t){this.switches.push(t)},Object(s.a)({id:"ComponentSwitcher",properties:{componentMap:null},initialize:function(){var t="";if(this.switches=r.a.setUp(),this.componentMap)for(t in this.componentMap)this.componentMap.hasOwnProperty(t)&&this.addEventListener(t,n.bind(this,t))},events:{"prepare-logic":function(){var t=0;if(this.switches.length){for(t=0;t<this.switches.length;t++)this.switchComponents(this.componentMap[this.switches[t]]);this.switches.length=0}}},methods:{switchComponents:function(t){var e=0,i=0,n=this.owner,r=n.components,s=t.remove,o=t.add;if(s)if(Array.isArray(s))for(e=0;e<s.length;e++)for(i=r.length-1;i>-1;i--)r[i].type===s[e]&&n.removeComponent(r[i]);else for(e=r.length-1;e>-1;e--)r[e].type===s&&n.removeComponent(r[e]);if(o)if(Array.isArray(o))for(e=0;e<o.length;e++)n.addComponent(new platypus.components[o[e].type](n,o[e]));else n.addComponent(new platypus.components[o.type](n,o));n.parent.triggerEvent("child-entity-updated",n),n.triggerEvent("add-remove-component-complete")},destroy:function(){r.a.recycle(this.switches)}},getAssetList:function(t,e,i){var n=t.componentMap||e.componentMap||i.componentMap,s="",o=0,a=null,h=r.a.setUp(),u=null;for(s in n)if(n.hasOwnProperty(s))for(o=0;o<n[s].add.length;o++)(a=platypus.components[n[s].add[o].type])&&(u=a.getAssetList(n[s].add[o],e,i),Object(r.d)(h,u),r.a.recycle(u));return h}}))},function(t,e,i){"use strict";var n=i(7),r=i(2);e.a=Object(r.a)({id:"Counter",publicProperties:{total:0},initialize:function(){this.count=0,this.lastTotal=0,this.lastCount=0,this.message=n.a.setUp("text","")},events:{"handle-logic":function(){var t=!1,e=this.message;this.total!==this.lastTotal&&(this.lastTotal=this.total,t=!0),this.count!==this.lastCount&&(this.lastCount=this.count,t=!0),t&&(this.total?e.text=String(this.count)+"/"+String(this.total):e.text=String(this.count),this.owner.triggerEvent("update-content",e))},"change-total":function(t){this.total=t},"change-count":function(t){this.count=t},"increment-count":function(){this.count+=1}},methods:{destroy:function(){this.message.recycle()}}})},function(t,e,i){"use strict";var n,r,s,o=i(0),a=i(50),h=i(7),u=i(23),l=i(40),c=i(2);e.a=(s=Object(c.a)({id:"EntityContainer",properties:{childEvents:[]},initialize:(r=function(t,e){this.addEntity(t,e)},function(t,e){var i=0,n=null,s=this.childEvents,h=null;for(l.a.initialize(this),this.newAdds=o.a.setUp(),n=t.entities&&this.owner.entities?t.entities.concat(this.owner.entities):t.entities||this.owner.entities||null,this.owner.entities=this.entities=o.a.setUp(),this.childEvents=o.a.setUp(),i=0;i<s.length;i++)this.addNewPublicEvent(s[i]);if(this.addNewPrivateEvent("peer-entity-added"),this.addNewPrivateEvent("peer-entity-removed"),n){for(h=o.a.setUp(),i=0;i<n.length;i++)h.push(r.bind(this,n[i]));return a.a.setUp(h,e),o.a.recycle(h),!0}return!1}),events:{"add-entity":function(t,e){this.addEntity(t,e)},"remove-entity":function(t){this.removeEntity(t)},"child-entity-updated":function(t){this.updateChildEventListeners(t)},"handle-logic":function(){var t=null,e=this.newAdds,i=e.length,n=0,r=null;if(i){for(r=o.a.setUp(),n=0;n<i;n++)((t=e[n]).destroyed||!t.loadingComponents||t.loadingComponents.attemptResolution())&&r.push(n);for(n=r.length;n--;)Object(o.c)(e,r[n]);o.a.recycle(r)}}},methods:{addNewPublicEvent:function(t){var e=0;for(this.addNewPrivateEvent(t),e=0;e<this.childEvents.length;e++)if(this.childEvents[e]===t)return!1;return this.childEvents.push(t),this.addEventListener(t,function(t){return function(e,i){this.triggerOnChildren(t,e,i)}}(t)),!0},addNewPrivateEvent:function(t){var e=0,i=0;if(this._listeners[t])return!1;for(this._listeners[t]=o.a.setUp(),e=0;e<this.entities.length;e++)if(this.entities[e]._listeners[t])for(i=0;i<this.entities[e]._listeners[t].length;i++)this.addChildEventListener(this.entities[e],t,this.entities[e]._listeners[t][i]);return!0},updateChildEventListeners:function(t){this.removeChildEventListeners(t),this.addChildEventListeners(t)},addChildEventListeners:function(t){var e=0,i="";for(i in this._listeners)if(this._listeners.hasOwnProperty(i)&&t._listeners[i])for(e=0;e<t._listeners[i].length;e++)this.addChildEventListener(t,i,t._listeners[i][e])},removeChildEventListeners:function(t){var e=0,i=null,n=null;if(t.containerListener){for(i=t.containerListener.events,n=t.containerListener.messages,e=0;e<i.length;e++)this.removeChildEventListener(t,i[e],n[e]);o.a.recycle(i),o.a.recycle(n),t.containerListener.recycle(),t.containerListener=null}},addChildEventListener:function(t,e,i){t.containerListener||(t.containerListener=h.a.setUp("events",o.a.setUp(),"messages",o.a.setUp())),t.containerListener.events.push(e),t.containerListener.messages.push(i),this.on(e,i,i._priority||0)},removeChildEventListener:function(t,e,i){var n=0,r=t.containerListener.events,s=t.containerListener.messages;for(n=0;n<r.length;n++)r[n]!==e||i&&s[n]!==i||this.off(e,s[n])},destroy:function(){for(var t=Object(o.b)(this.entities),e=t.length,i=null;e--;)i=t[e],this.removeChildEventListeners(i),i.destroy();o.a.recycle(t),o.a.recycle(this.entities),this.owner.entities=null,o.a.recycle(this.childEvents),this.childEvents=null,o.a.recycle(this.newAdds),this.newAdds=null}},publicMethods:{getEntityById:function(t){var e=0,i=null;for(e=0;e<this.entities.length;e++){if(this.entities[e].id===t)return this.entities[e];if(this.entities[e].getEntityById&&(i=this.entities[e].getEntityById(t)))return i}return null},getEntitiesByType:function(t){var e=0,i=null,n=o.a.setUp();for(e=0;e<this.entities.length;e++)this.entities[e].type===t&&n.push(this.entities[e]),this.entities[e].getEntitiesByType&&(i=this.entities[e].getEntitiesByType(t),Object(o.d)(n,i),o.a.recycle(i));return n},addEntity:(n=function(t,e){var i=this.owner,n=this.entities,r=n.length;for(e.triggerEvent("adopted",e);r--&&e.triggerEvent("peer-entity-added",n[r]););this.triggerEventOnChildren("peer-entity-added",e),this.addChildEventListeners(e),n.push(e),i.triggerEvent("child-entity-added",e),t&&t(e)},function(t,e){var i=null,r=this.owner;return t instanceof u.a?((i=t).parent=r,n.call(this,e,i)):(i="string"==typeof t?new u.a(platypus.game.settings.entities[t],null,n.bind(this,e),r):t.id?new u.a(t,null,n.bind(this,e),r):new u.a(platypus.game.settings.entities[t.type],t,n.bind(this,e),r),this.owner.triggerEvent("entity-created",i)),this.newAdds.push(i),i}),removeEntity:function(t){var e=this.entities.indexOf(t);return e>=0&&(this.removeChildEventListeners(t),Object(o.c)(this.entities,e),this.triggerEventOnChildren("peer-entity-removed",t),this.owner.triggerEvent("child-entity-removed",t),t.destroy(),t.parent=null,t)},triggerEventOnChildren:function(t,e,i){return this.destroyed?0:(this._listeners[t]||this.addNewPrivateEvent(t),this.triggerEvent(t,e,i))},triggerOnChildren:function(t){return this.destroyed?0:(this._listeners[t]||this.addNewPrivateEvent(t),this.trigger.apply(this,arguments))}},getAssetList:function(t,e,i){var n=0,r=o.a.setUp(),s=o.a.setUp(),a=null;for(t.entities&&Object(o.d)(s,t.entities),e&&e.entities?Object(o.d)(s,e.entities):i&&i.entities&&Object(o.d)(s,i.entities),n=0;n<s.length;n++)a=u.a.getAssetList(s[n]),Object(o.d)(r,a),o.a.recycle(a);return o.a.recycle(s),r}}),l.a.mixin(s),s)},function(t,e,i){"use strict";var n,r,s,o,a,h,u=i(83),l=i(7),c=i(20),f=i(27),d=i(0),p=i(2);e.a=(s=[null,null,null,null,["east","south","west","north"],null,null,null,["east","southeast","south","southwest","west","northwest","north","northeast"],null,null,null,null,null,null,null,["east","east-southeast","southeast","south-southeast","south","south-southwest","southwest","west-southwest","west","west-northwest","northwest","north-northwest","north","north-northeast","northeast","east-northeast"]],o=["left-button","middle-button","right-button"],a=function(t,e){this.paused||this.owner.trigger(t,e)},h=function(t,e,i){!this.paused&&i[t]&&this.owner.trigger(e,i)},Object(p.a)({id:"EntityController",properties:{controlMap:{},joystick:null,stateMaps:{}},publicProperties:{paused:!1},initialize:function(t){var e="",i=null;if(this.actions=c.a.setUp(),this.stateMaps)for(e in this.stateMaps)this.stateMaps.hasOwnProperty(e)&&(i=f.a.setUp(e),this.addMap(this.stateMaps[e],e,i),i.recycle());this.addMap(this.controlMap,"default"),t.joystick&&(this.joystick=l.a.setUp("directions",t.joystick.directions||4,"handleEdge",t.joystick.handleEdge||!1,"innerRadius",t.joystick.innerRadius||0,"outerRadius",t.joystick.outerRadius||1/0))},events:{"handle-controller":function(){for(var t=this.actions,e=t.keys,i=e.length,n="",r=d.a.setUp(),s=this.owner.state;i--;)(n=t.get(e[i])).update(s)&&r.push(n);for(i=r.length;i--;)r[i].resolve();d.a.recycle(r)},pointerdown:function(t){"mouse"===t.pixiEvent.data.pointerType&&this.owner.triggerEvent("mouse:"+o[t.event.button||0]+":down",t.event),this.joystick&&(this.owner.triggerEvent("joystick:down",t.event),this.handleJoy(t))},pressup:function(t){var e=this.owner;"mouse"===t.pixiEvent.data.pointerType&&e.triggerEvent("mouse:"+o[t.event.button||0]+":up",t.event),this.joystick&&(e.triggerEvent("joystick:up",t.event),e.triggerEvent("stop"))},pressmove:function(t){this.joystick&&this.handleJoy(t)},"pause-controls":function(){this.paused=!0},"unpause-controls":function(){this.paused=!1}},methods:{handleJoy:function(t){var e,i,n,r,o=this.joystick,a=this.owner,h=Math.PI/(o.directions/2),u=(e=a,n=(i=t).x-e.x,r=i.y-e.y,Math.sqrt(n*n+r*r)),l=0,c="",f="";u>o.outerRadius||u<o.innerRadius||this.paused||(l=function(t,e,i){var n=e.x-t.x,r=e.y-t.y,s=0,o=2*Math.PI;return i?(s=Math.acos(n/i),r<0&&(s=o-s),s):s}(a,t,u),c=s[o.directions][Math.floor((l+h/2)%(2*Math.PI)/h)],o.handleEdge&&(h=Math.PI/o.directions,(f=s[2*o.directions][Math.floor((l+h/2)%(2*Math.PI)/h)])!==c&&a.triggerEvent(f.replace(c,"").replace("-",""),t)),a.triggerEvent("stop"),a.triggerEvent(c,t),a.triggerEvent("joystick-orientation",l))},addController:(n=function(t){this.inputs[t]=!1},r=function(t){this.inputs[t]=!0},function(t,e,i,s,o){var l=this.actions,c=e+"-"+i+"-"+(o||"all"),f=l.get(c);f||(f=o?l.set(c,u.a.setUp(i,s,h.bind(this,o))):l.set(c,u.a.setUp(i,s,a.bind(this)))),this.addEventListener(t+":up",n.bind(f,f.inputs.length)),this.addEventListener(t+":down",r.bind(f,f.inputs.length)),f.inputs.push(!1)}),addMap:function(t,e,i){var n=null,r=0,s="",o="";for(o in t)if(t.hasOwnProperty(o))if("string"==typeof(n=t[o]))this.addController(o,e,n,i);else if(Array.isArray(n))for(r=0;r<n.length;r++)this.addController(o,e,n[r],i);else for(s in n)if(n.hasOwnProperty(s))if("string"==typeof n[s])this.addController(o,e,n[s],i,s);else for(r=0;r<n[s].length;r++)this.addController(o,e,n[s][r],i,s)},destroy:function(){for(var t=this.actions,e=t.keys,i=e.length;i--;)t.get(e[i]).recycle();t.recycle(),this.joystick&&this.joystick.recycle()}}}))},function(t,e,i){"use strict";var n,r,s,o,a,h,u,l,c,f,d,p,g,v=i(0),y=i(11),m=i(84),b=i(99),_=i(7),w=i(20),x=i(9),E=i(2);e.a=(d=function(t,e){return t<<16|65535&e},p={entity:null,target:null,type:null,x:0,y:0,hitType:null,myType:null},g=function(t,e){return t.collisionGroup.getAllEntities()-e.collisionGroup.getAllEntities()},Object(E.a)({id:"HandlerCollision",properties:{gridBits:8},initialize:function(){this.againstGrid=_.a.setUp(),this.solidEntitiesLive=v.a.setUp(),this.softEntitiesLive=v.a.setUp(),this.allEntitiesLive=v.a.setUp(),this.groupsLive=v.a.setUp(),this.nonColliders=v.a.setUp(),this.terrain=null,this.owner.previousX=this.owner.previousX||this.owner.x,this.owner.previousY=this.owner.previousY||this.owner.y,this.relocationMessage=_.a.setUp("position",x.a.setUp(),"relative",!1)},events:{"child-entity-added":function(t){t.collideOff||this.addCollisionEntity(t)},"add-collision-entity":function(t){this.addCollisionEntity(t)},"child-entity-removed":function(t){this.removeCollisionEntity(t)},"remove-collision-entity":function(t){this.removeCollisionEntity(t)},"child-entity-updated":function(t){this.removeCollisionEntity(t),this.addCollisionEntity(t)},"check-collision-group":function(t){this.checkCamera(t.camera,t.entities),this.checkGroupCollisions(),this.checkSolidCollisions(),this.resolveNonCollisions(),this.checkSoftCollisions(t)}},methods:{mapDown:function(t){var e=y.a.setUp(),i=this.gridBits;return e.setBounds(t.left>>i,t.top>>i,t.right>>i,t.bottom>>i)},getAgainstGrid:function(t,e,i){var n=this.mapDown(e),r=_.a.setUp(),s=null,o=this.againstGrid,a=0,h=0;if(t&&e.equals(t.againstAABB))return this.getEntityAgainstGrid(t,i);for(a=n.left;a<=n.right;a++)for(h=n.top;h<=n.bottom;h++)(s=o[d(a,h)])&&this.mergeAGCell(s,r,i);return n.recycle(),r},getEntityAgainstGrid:function(t,e){for(var i=t.againstGrid,n=_.a.setUp(),r=i.length;r--;)this.mergeAGCell(i[r],n,e);return n},mergeAGCell:function(t,e,i){for(var n=i.length;n--;){var r=i[n],s=t.get(r);if(s&&s.length){var o=e[r];o?Object(v.d)(o,s):e[r]=Object(v.d)(v.a.setUp(),s)}}},removeAgainst:function(t){for(var e=t.againstGrid,i=t.collisionTypes,n=null,r=e.length,s=0,o=0,a=i.length,h=null;r--;)for(h=e[r],s=a;s--;)(n=h.get(i[s]))&&(o=n.indexOf(t))>=0&&Object(v.c)(n,o);e.length=0},updateAgainst:function(t){var e=null,i=0,n="",r=t.collisionTypes,s=this.mapDown(t.getAABB()),o=t.againstGrid,a=0,h=null,u=this.againstGrid,l=0,c=0;if(!s.equals(t.againstAABB))for(t.againstAABB.set(s),this.removeAgainst(t),l=s.left;l<=s.right;l++)for(c=s.top;c<=s.bottom;c++){for((h=u[a=d(l,c)])||(h=u[a]=w.a.setUp()),i=r.length;i--;)n=r[i],(e=h.get(n))||(e=h.set(n,v.a.setUp())),e.push(t);o.push(h)}s.recycle()},addCollisionEntity:function(t){t.getTileShapes?this.terrain=t:t.collisionTypes&&!t.againstGrid&&(t.againstGrid=v.a.setUp(),t.againstAABB=y.a.setUp(),this.updateAgainst(t))},removeCollisionEntity:function(t){t.againstGrid&&(this.removeAgainst(t),v.a.recycle(t.againstGrid),t.againstGrid=null,t.againstAABB.recycle(),t.againstAABB=null)},checkCamera:function(t,e){var i=e.length,n=0,r=this.allEntitiesLive,s=this.softEntitiesLive,o=this.solidEntitiesLive,a=this.nonColliders,h=this.groupsLive,u=null,l=null,c=!1;for(r.length=0,o.length=0,s.length=0,a.length=0,h.length=0;i--;)if(c=!1,l=(u=e[i]).collisionTypes,!u.immobile&&l&&l.length){if(r.push(u),u!==this.owner)for(n=l.length;n--;)if(u.solidCollisionMap.get(l[n]).length){o.push(u),c=!0;break}for(n=l.length;n--;)if(u.softCollisionMap.get(l[n]).length){s.push(u);break}c||a.push(u),u.collisionGroup&&h.push(u)}h.sort(g)},resolveNonCollisions:function(){var t=null,e=this.relocationMessage,i=this.nonColliders,n=i.length;for(e.relative=!1;n--;)(t=i[n]).position.x===t.previousPosition.x&&t.position.y===t.previousPosition.y||(e.position.setVector(t.position),t.triggerEvent("relocate-entity",e),this.updateAgainst(t))},checkGroupCollisions:(f=function(t,e,i,n,r,s,o,a){var h=p;h.entity=e,h.target=t,h.myType=i,h.type=n,h.x=r,h.y=s,h.direction=a,h.hitType=o,t.triggerEvent("hit-by-"+n,h),e&&(h.entity=t,h.target=e,h.type=i,h.myType=n,h.x=-r,h.y=-s,h.direction=a.getInverse(),h.hitType=o,e.triggerEvent("hit-by-"+i,h),h.direction.recycle())},function(){for(var t=0,e=this.groupsLive,i=e.length,n=null,r=null,s=null,o=null;i--;)if((n=e[i]).collisionGroup.getSize()>1){for(t=(r=(o=this.checkSolidEntityCollision(n,n.collisionGroup)).xData).length;t--;)s=r[t],f(s.thisShape.owner,s.thatShape.owner,s.thisShape.collisionType,s.thatShape.collisionType,s.direction,0,"solid",s.vector);for(t=(r=o.yData).length;t--;)s=r[t],f(s.thisShape.owner,s.thatShape.owner,s.thisShape.collisionType,s.thatShape.collisionType,0,s.direction,"solid",s.vector);o.recycle()}}),checkSolidCollisions:function(){var t=function(t,e,i,n,r,s,o,a){var h=p;h.entity=e,h.target=t,h.myType=i,h.type=n,h.x=r,h.y=s,h.direction=a,h.hitType=o,t.triggerEvent("hit-by-"+n,h),e&&(h.entity=t,h.target=e,h.type=i,h.myType=n,h.x=-r,h.y=-s,h.direction=a.getInverse(),h.hitType=o,e.triggerEvent("hit-by-"+i,h),h.direction.recycle())};return function(){for(var e=0,i=this.solidEntitiesLive,n=i.length,r=null,s=null,o=null,a=null,h=t;n--;){for(r=i[n],e=(s=(a=this.checkSolidEntityCollision(r,r)).xData).length;e--;)h((o=s[e]).thisShape.owner,o.thatShape.owner,o.thisShape.collisionType,o.thatShape.collisionType,o.direction,0,"solid",o.vector);for(e=(s=a.yData).length;e--;)h((o=s[e]).thisShape.owner,o.thatShape.owner,o.thisShape.collisionType,o.thatShape.collisionType,0,o.direction,"solid",o.vector);a.recycle()}}}(),checkSolidEntityCollision:function(t,e){var i=b.a.setUp(),n=0,r=null,s=null,o=t.previousX,a=t.previousY,h=t.x-o,u=t.y-a,l=1/0,c=1/0,f=e.getCollisionTypes(),d=0,p=!1,g=null;if(e.getSolidEntities&&(p=e.getSolidEntities()),r=x.a.setUp(t.position),h||u||t.collisionDirty){if(t.bullet){for(g=Math.min,d=f.length;d--;)l=g(l,(s=e.getAABB(f[d])).width),c=g(c,s.height);for(h/=n=g(n=Math.ceil(Math.max(Math.abs(h)/l,Math.abs(u)/c)),100),u/=n;n--;){if(e.prepareCollision(t.previousX+h,t.previousY+u),(r=this.processCollisionStep(t,e,p,i,r.setVector(t.position),h,u,f)).x===t.previousX&&r.y===t.previousY){e.relocateEntity(r,i);break}e.relocateEntity(r,i)}}else e.prepareCollision(t.previousX+h,t.previousY+u),r=this.processCollisionStep(t,e,p,i,r,h,u,f),e.relocateEntity(r,i);r.x===o&&r.y===a||this.updateAgainst(t)}return r.recycle(),i},processCollisionStep:(l=y.a.setUp(),c=function(t,e,i,n,r,s){var o=0;if(i===t)return!1;if(i.jumpThrough&&e.bottom>n.top)return!1;if(t.jumpThrough&&n.bottom>e.top)return!1;if(r)for(o=r.length;o--;)if(i===r[o])return!1;return s.collides(n)},function(t,e,i,n,r,s,o,a){for(var h=a.length,u=0,f=0,d=0,p=c,g=!1,y=v.a.setUp(),m=null,b=null,_=null,w=null,x=null,E="",T=null,S=null,O=null,A=this.terrain,P=null,C=e.getSolidCollisions(),M=null,k=l;h--;){for(y[h]=m=v.a.setUp(),w=a[h],b=e.getPreviousAABB(w),_=e.getAABB(w),k.set(_),k.include(b),M=C.get(w),P=this.getAgainstGrid(t,k,M),u=M.length;u--;)if(O=P[E=M[u]]){for(f=O.length;f--;)if(T=(x=O[f]).getAABB(E),p(t,b,x,T,i,k)){for(d=(S=x.getShapes(E)).length;d--;)m.push(S[d]);g=!0}v.a.recycle(O)}else if(A)for(f=(S=A.getTileShapes(k,b,E)).length;f--;)m.push(S[f]),g=!0;P.recycle()}return g&&(r=this.resolveCollisionPosition(t,e,r,y,n,a,s,o)),v.a.recycle(y,2),r}),resolveCollisionPosition:function(t,e,i,n,r,s,o,a){var h=0,u=null;if(0!==o)for(h=s.length;h--;)(u=this.findMinAxisMovement(t,e,s[h],"x",n[h])).occurred&&r.tryToAddX(u)||u.recycle();if(u=r.xData[0],i.x=u?t.previousX+u.deltaMovement*u.direction:t.x,e.movePreviousX(i.x),0!==a)for(h=s.length;h--;)(u=this.findMinAxisMovement(t,e,s[h],"y",n[h])).occurred&&r.tryToAddY(u)||u.recycle();return u=r.yData[0],i.y=u?t.previousY+u.deltaMovement*u.direction:t.y,i},findMinAxisMovement:function(t,e,i,n,r){for(var s=m.a.setUp(),o=e.getShapes(i),a=e.getPrevShapes(i),h=null,u=o.length;u--;)(h=this.findMinShapeMovementCollision(a[u],o[u],n,r)).occurred&&(!s.occurred||h.deltaMovement<s.deltaMovement)?(s.recycle(),s=h):h.recycle();return s},findMinShapeMovementCollision:(r={position:0,contactVector:x.a.setUp()},s=function(t,e){var i=Math.pow;return Math.sqrt(i(e,2)-i(t,2))},o=function(t,e,i){var n=t-e;return n-n/Math.abs(n)*i},a=function(t,e,i,n,r){var a=0,h=e.aABB,u=h.halfWidth,l=t.x,c=t.y;return c>=h.top&&c<=h.bottom?u+t.radius:(c=o(c,e.y,h.halfHeight),a=u+s(c,t.radius),i===t?(r.x=-o(l-n*a,e.x,u)/2,c=-c):r.x=o(l,e.x-n*a,u)/2,r.y=c,r.normalize(),a)},h=function(t,e,i,n,r){var a=0,h=e.aABB,u=h.halfHeight,l=t.x,c=t.y;return l>=h.left&&l<=h.right?u+t.radius:(l=o(l,e.x,h.halfWidth),a=u+s(l,t.radius),i===t?(l=-l,r.y=-o(c-n*a,e.y,u)/2):r.y=o(c,e.y-n*a,u)/2,r.x=l,r.normalize(),a)},u={x:{rectangle:{rectangle:function(t,e,i){var n=r;return n.position=i.x-t*(i.aABB.halfWidth+e.aABB.halfWidth),n.contactVector.setXYZ(t,0),n},circle:function(t,e,i){var n=r;return n.position=i.x-t*a(i,e,e,t,n.contactVector.setXYZ(t,0)),n}},circle:{rectangle:function(t,e,i){var n=r;return n.position=i.x-t*a(e,i,e,t,n.contactVector.setXYZ(t,0)),n},circle:function(t,e,i){var n=i.y-e.y,o=i.x-t*s(n,e.radius+i.radius),a=r;return a.contactVector.setXYZ(i.x-o,n).normalize(),a.position=o,a}}},y:{rectangle:{rectangle:function(t,e,i){var n=r;return n.position=i.y-t*(i.aABB.halfHeight+e.aABB.halfHeight),n.contactVector.setXYZ(0,t),n},circle:function(t,e,i){var n=r;return n.position=i.y-t*h(i,e,e,t,n.contactVector.setXYZ(0,t)),n}},circle:{rectangle:function(t,e,i){var n=r;return n.position=i.y-t*h(e,i,e,t,n.contactVector.setXYZ(0,t)),n},circle:function(t,e,i){var n=i.x-e.x,o=i.y-t*s(n,e.radius+i.radius),a=r;return a.contactVector.setXYZ(n,i.y-o).normalize(),a.position=o,a}}}},function(t,e,i,n){var r=0,s=t[i],o=e[i],a=t,h=s<o?1:-1,l=o,c=null,f=m.a.setUp(),d=null,p=o,g=null;if(s!==o)for(g=u[i][a.type],"x"===i?a.moveX(o):"y"===i&&a.moveY(o),r=n.length;r--;)c=n[r],l=o,a.collides(c)&&(l=(d=g[c.type](h,a,c)).position,h>0?l<p&&(l<s&&(l=s),p=l,f.set(!0,h,p,Math.abs(p-s),c.aABB,e,c,d.contactVector,0)):l>p&&(l>s&&(l=s),p=l,f.set(!0,h,p,Math.abs(p-s),c.aABB,e,c,d.contactVector,0)));return f}),checkSoftCollisions:(n=function(t){this.triggerEvent("hit-by-"+t.type,t)},function(){for(var t=this.softEntitiesLive,e=null,i=t.length,r=n;i--;)e=t[i],this.checkEntityForSoftCollisions(e,r.bind(e))}),checkEntityForSoftCollisions:function(t,e){var i=null,n=null,r=p,s=t.collisionTypes.length,o=0,a=0,h=0,u=0,l=null,c=null,f=null,d=null,g=null,y=null,m=!1;for(r.x=0,r.y=0;s--;){for(l=t.collisionTypes[s],c=t.softCollisionMap.get(l),i=this.getEntityAgainstGrid(t,c),o=c.length;o--;)if(f=i[d=c[o]]){for(a=f.length;a--;)if((n=f[a])!==t&&t.getAABB(l).collides(n.getAABB(d)))for(m=!1,g=t.getShapes(l),y=n.getShapes(d),h=g.length;h--;){for(u=y.length;u--;)if(g[h].collides(y[u])){r.entity=n,r.target=t,r.type=d,r.myType=l,r.shape=y[u],r.hitType="soft",e(r),m=!0;break}if(m)break}v.a.recycle(f)}i.recycle()}},checkShapeForCollisions:function(t,e,i){var n=null,r=null,s=p,o=0,a=0,h=0,u=null,l=null,c=null;for(s.x=0,s.y=0,n=this.getAgainstGrid(null,t.getAABB(),e),o=e.length;o--;)if(u=n[l=e[o]]){for(a=u.length;a--;)if(r=u[a],t.getAABB().collides(r.getAABB(l)))for(h=(c=r.getShapes(l)).length;h--;)if(t.collides(c[h])){s.entity=r,s.target=null,s.type=l,s.myType="",s.shape=c[h],s.hitType="soft",i(s);break}v.a.recycle(u)}n.recycle()},checkPointForCollisions:function(t,e,i,n){var r=this.gridBits,s=this.againstGrid[function(t,e,i){return d(t>>i,e>>i)}(t,e,r)],o=null,a=p,h=0,u=0,l=0,c=null,f=null,g=null;if(a.x=0,a.y=0,s)for(h=i.length;h--;)if(f=i[h],c=s.get(f))for(u=c.length;u--;)if((o=c[u]).getAABB(f).containsPoint(t,e))for(l=(g=o.getShapes(f)).length;l--;)if(g[l].containsPoint(t,e)){a.entity=o,a.target=null,a.type=f,a.myType="",a.shape=g[l],a.hitType="soft",n(a);break}},destroy:function(){var t=this.againstGrid,e=null,i="",n=null,r=0;for(i in v.a.recycle(this.groupsLive),v.a.recycle(this.nonColliders),v.a.recycle(this.allEntitiesLive),v.a.recycle(this.softEntitiesLive),v.a.recycle(this.solidEntitiesLive),this.relocationMessage.position.recycle(),this.relocationMessage.recycle(),t)if(t.hasOwnProperty(i)){for(r=(n=(e=t[i]).keys).length;r--;)v.a.recycle(e.get(n[r]));e.recycle()}t.recycle(),this.againstGrid=null}},publicMethods:{getWorldEntities:function(){return this.allEntitiesLive},getWorldTerrain:function(){return this.terrain},getEntityCollisions:function(t){var e=v.a.setUp();return this.checkEntityForSoftCollisions(t,(function(t){e.push(_.a.setUp(t))})),e},getShapeCollisions:function(t,e){var i=v.a.setUp();return this.checkShapeForCollisions(t,e,(function(t){i.push(_.a.setUp(t))})),i},getPointCollisions:function(t,e,i){var n=v.a.setUp();return this.checkPointForCollisions(t,e,i,(function(t){n.push(_.a.setUp(t))})),n}}}))},function(t,e,i){"use strict";var n,r=i(2);e.a=(n={kc0:"unknown",kc8:"backspace",kc9:"tab",kc12:"numpad-5-shift",kc13:"enter",kc16:"shift",kc17:"ctrl",kc18:"alt",kc19:"pause",kc20:"caps-lock",kc27:"esc",kc32:"space",kc33:"page-up",kc34:"page-down",kc35:"end",kc36:"home",kc37:"left-arrow",kc38:"up-arrow",kc39:"right-arrow",kc40:"down-arrow",kc42:"numpad-multiply",kc43:"numpad-add",kc44:"print-screen",kc45:"insert",kc46:"delete",kc47:"numpad-division",kc48:"0",kc49:"1",kc50:"2",kc51:"3",kc52:"4",kc53:"5",kc54:"6",kc55:"7",kc56:"8",kc57:"9",kc59:"semicolon",kc61:"equals",kc65:"a",kc66:"b",kc67:"c",kc68:"d",kc69:"e",kc70:"f",kc71:"g",kc72:"h",kc73:"i",kc74:"j",kc75:"k",kc76:"l",kc77:"m",kc78:"n",kc79:"o",kc80:"p",kc81:"q",kc82:"r",kc83:"s",kc84:"t",kc85:"u",kc86:"v",kc87:"w",kc88:"x",kc89:"y",kc90:"z",kc91:"left-windows-start",kc92:"right-windows-start",kc93:"windows-menu",kc96:"back-quote",kc106:"numpad-multiply",kc107:"numpad-add",kc109:"numpad-minus",kc110:"numpad-period",kc111:"numpad-division",kc112:"f1",kc113:"f2",kc114:"f3",kc115:"f4",kc116:"f5",kc117:"f6",kc118:"f7",kc119:"f8",kc120:"f9",kc121:"f10",kc122:"f11",kc123:"f12",kc144:"num-lock",kc145:"scroll-lock",kc186:"semicolon",kc187:"equals",kc188:"comma",kc189:"hyphen",kc190:"period",kc191:"forward-slash",kc192:"back-quote",kc219:"open-bracket",kc220:"back-slash",kc221:"close-bracket",kc222:"quote"},Object(r.a)({id:"HandlerController",initialize:function(){this.callbackKeyUp=null,this.callbackKeyDown=null,platypus.game.settings.debug?(this.callbackKeyDown=function(t){this.keyDown(t)}.bind(this),this.callbackKeyUp=function(t){this.keyUp(t)}.bind(this)):(this.callbackKeyDown=function(t){this.keyDown(t),t.preventDefault()}.bind(this),this.callbackKeyUp=function(t){this.keyUp(t),t.preventDefault()}.bind(this)),window.addEventListener("keydown",this.callbackKeyDown,!0),window.addEventListener("keyup",this.callbackKeyUp,!0)},events:{tick:function(t){this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("handle-controller",t)}},methods:{keyDown:function(t){this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("key:"+(n["kc"+t.keyCode]||"key-code-"+t.keyCode)+":down",t)},keyUp:function(t){this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("key:"+(n["kc"+t.keyCode]||"key-code-"+t.keyCode)+":up",t)},destroy:function(){window.removeEventListener("keydown",this.callbackKeyDown),window.removeEventListener("keyup",this.callbackKeyUp)}}}))},function(t,e,i){"use strict";var n,r,s,o,a=i(0),h=i(11),u=i(2);e.a=(n=function(t,e){var i=t.length;for(e.length=0;i--;)e.push(t[i])},r=function(t,e){return t.alwaysOn||t.aabb&&e.collides(t.getAABB())||void 0===t.x||e.containsPoint(t.x,t.y)},s=function(t,e,i){var n=t.length,s=null;for(e.length=0;n--;)s=t[n],r(s,i)&&e.push(s)},o=function(t){return"handle-logic"===t||"handle-post-collision-logic"===t||"prepare-logic"===t||"state-changed"===t||"handle-movement"===t},Object(u.a)({id:"HandlerLogic",properties:{alwaysOn:!1},publicProperties:{buffer:-1,stepLength:5,maxStepsPerTick:100,timeMultiplier:1},initialize:function(){this.entities=a.a.setUp(),this.activeEntities=a.a.setUp(),this.removals=a.a.setUp(),this.inLogicLoop=!1,this.alwaysOn?(this.updateList=n,this.camera=null):(this.updateList=s,this.camera=h.a.setUp()),this.paused=0,this.leftoverTime=0,this.message={delta:this.stepLength,tick:null,camera:this.camera,entities:this.activeEntities}},events:{"child-entity-updated":function(t){var e=this.entities.indexOf(t),i=t.getMessageIds().some(o);i&&e<0?(this.entities.push(t),!this.inLogicLoop||this.camera&&!r(t,this.camera)||this.activeEntities.push(t)):!i&&e>=0&&(Object(a.c)(this.entities,e),this.inLogicLoop&&this.removals.push(t))},"child-entity-added":function(t){t.getMessageIds().some(o)&&(this.entities.push(t),!this.inLogicLoop||this.camera&&!r(t,this.camera)||this.activeEntities.push(t))},"child-entity-removed":function(t){var e=this.entities.indexOf(t);e>=0&&(Object(a.c)(this.entities,e),this.inLogicLoop&&this.removals.push(t))},"pause-logic":function(t){t&&t.time?this.paused=t.time:this.paused=-1,this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("logic-paused")},"unpause-logic":function(){this.paused=0,this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("logic-unpaused")},"camera-update":function(t){var e=this.buffer,i=this.camera,n=null;i&&(-1===e&&(e=t.viewport.width/10),n=t.viewport,i.setBounds(n.left-e,n.top-e,n.right+e,n.bottom+e))},tick:function(t){var e=0,i=0,n=0,r=null,s=this.message,o=this.activeEntities,h=this.removals,u=this.stepLength;for(this.leftoverTime+=t.delta*this.timeMultiplier,n=Math.floor(this.leftoverTime/u)||1,s.delta=u,this.leftoverTime=Math.max(this.leftoverTime-n*u,0),s.tick=t,this.updateList(this.entities,o,this.camera),n=Math.min(n,this.maxStepsPerTick);n--;)if(this.paused>0&&(this.paused-=u,this.paused<0&&(this.paused=0)),!this.paused){for(this.inLogicLoop=!0,this.owner.triggerEvent("handle-logic",s),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("handle-ai",s),e=o.length;e--;)(r=o[e]).triggerEvent("prepare-logic",s),r.triggerEvent("handle-logic",s),r.triggerEvent("handle-movement",s);if(this.inLogicLoop=!1,h.length){for(e=h.length;e--;)(i=o.indexOf(h[e]))>=0&&Object(a.c)(o,i);h.length=0}if(e=o.length,this.owner.triggerEvent("check-collision-group",s))for(;e--;)(r=o[e]).triggerEvent("handle-post-collision-logic",s),r.lastState.update(r.state)&&r.triggerEvent("state-changed",r.state);else for(;e--;)(r=o[e]).lastState.update(r.state)&&r.triggerEvent("state-changed",r.state)}}},methods:{destroy:function(){a.a.recycle(this.entities),this.entities=null,a.a.recycle(this.activeEntities),this.activeEntities=null,a.a.recycle(this.removals),this.removals=null}}}))},function(t,e,i){"use strict";var n=i(8),r=i(7),s=i(77),o=i(2);e.a=Object(o.a)({id:"HandlerRender",properties:{interactive:!1},publicProperties:{worldContainer:null},initialize:function(){var t=null;this.worldContainer=this.worldContainer||new n.e,this.worldContainer.name="",this.interactive&&(t=r.a.setUp("container",this.worldContainer,"hitArea",this.interactive.hitArea,"hover",this.interactive.hover,"relativeToSelf",!0),this.owner.addComponent(new s.a(this.owner,t)),t.recycle()),this.renderMessage=r.a.setUp("delta",0,"container",this.worldContainer)},events:{load:function(){this.owner.triggerEvent("render-world",{world:this.worldContainer}),this.owner.triggerEvent("input-on")},"child-entity-added":function(t){t.container&&this.setParentRenderContainer(t,t.renderParent),t.triggerEvent("handle-render-load",this.renderMessage)},"pause-render":function(t){t&&t.time?this.paused=t.time:this.paused=-1,this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("render-paused")},"unpause-render":function(){this.paused=0,this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("render-unpaused")},tick:function(t){var e=this.renderMessage,i=this.worldContainer;e.delta=t.delta,this.paused>0&&(this.paused-=t.delta,this.paused<=0&&(this.paused=0)),this.paused||(this.owner.triggerEvent("handle-render",e),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("handle-render",e)),i.reorder&&(i.reorder=!1,i.children.sort((function(t,e){return t.z-e.z})))},"set-parent-render-container":function(t,e){this.setParentRenderContainer(t,e)}},methods:{setParentRenderContainer:function(t,e){var i=null;if(t.removeFromParentContainer(),e)if("string"==typeof e){var n=this.owner.getEntityById(e);n?i=n.container:(platypus.debug.warn("Trying to add to non-existent entity, added to World container instead."),i=this.worldContainer)}else i=e.container;else i=this.worldContainer;t.addToParentContainer(i)},destroy:function(){this.worldContainer=null,this.renderMessage.recycle(),this.renderMessage=null}}})},function(t,e,i){"use strict";var n,r,s,o,a,h,u,l,c,f,d=i(0),p=i(2),g=i(102);e.a=(n=function(t,e){return t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24)>>>0},r=function(t,e){return t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24)>>>0},s=function(t,e){var i=4,s=[],o=atob(t.replace(/\\/g,""));if("zlib"===e)for(o=Object(g.inflate)(o);i<=o.length;)s.push(r(o,i-4)),i+=4;else for(;i<=o.length;)s.push(n(o,i-4)),i+=4;return s},o=function(t){return"base64"===t.encoding&&(t.data=s(t.data,t.compression),t.encoding="csv"),t},a=function(t,e,i,n,r,s){var o=0,a=0,h=0,u=Object(d.b)(t);if("horizontal"===s){for(a=r-1;a>=0;a--)for(o=a*n,h=0;o<(a+1)*n;o++,h++)u.splice((a+1)*e+h,0,i[o]);return u}return"vertical"===s?t.concat(i):null},h=function(t,e,i,n){var r=0,s="",o=Object(d.b)(t),a=null;for(r=0;r<e.length;r++){for(s in a={},e[r])e[r].hasOwnProperty(s)&&(a[s]=e[r][s]);"horizontal"===n?a.x+=i:"vertical"===n&&(a.y+=i),o.push(a)}return o},u=function(t,e,i){var n=0,r="";for(t.tilewidth||t.tileheight?t.tilewidth===e.tilewidth&&t.tileheight===e.tileheight||platypus.debug.warn("Component LevelBuilder: Your map has segments with different tile sizes. All tile sizes must match. Segment: "+e):(t.tilewidth=e.tilewidth,t.tileheight=e.tileheight),"horizontal"===i?0===t.height?t.height=e.height:t.height!==e.height&&platypus.debug.warn("Component LevelBuilder: You are trying to merge segments with different heights. All segments need to have the same height. Level: "+t+" Segment: "+e):"vertical"===i&&(0===t.width?t.width=e.width:t.width!==e.width&&platypus.debug.warn("Component LevelBuilder: You are trying to merge segments with different widths. All segments need to have the same width. Level: "+t+" Segment: "+e)),n=0;n<e.layers.length;n++)if(t.layers[n])t.layers[n].type===e.layers[n].type?t.layers[n].data&&e.layers[n].data?(o(e.layers[n]),"horizontal"===i?(t.layers[n].data=a(t.layers[n].data,t.width,e.layers[n].data,e.width,t.height,i),t.layers[n].width+=e.width):"vertical"===i&&(t.layers[n].data=a(t.layers[n].data,t.height,e.layers[n].data,e.height,t.width,i),t.layers[n].height+=e.height)):t.layers[n].objects&&e.layers[n].objects&&("horizontal"===i?t.layers[n].objects=h(t.layers[n].objects,e.layers[n].objects,t.width*t.tilewidth,i):"vertical"===i&&(t.layers[n].objects=h(t.layers[n].objects,e.layers[n].objects,t.height*t.tileheight,i))):platypus.debug.warn("Component LevelBuilder: The layers in your level segments do not match. Level: "+t+" Segment: "+e);else{var s=t.layers[n]={};for(r in o(e.layers[n]),e.layers[n])e.layers[n].hasOwnProperty(r)&&(s[r]=e.layers[n][r]);s.objects&&("horizontal"===i?s.objects=h([],s.objects,t.width*t.tilewidth,i):"vertical"===i&&(s.objects=h([],s.objects,t.height*t.tileheight,i)))}for(r in"horizontal"===i?t.width+=e.width:"vertical"===i&&(t.height+=e.height),e)e.hasOwnProperty(r)&&!t[r]&&(t[r]=e[r])},l=function(t){var e=0,i=0,n=platypus.game.settings.levels,r={height:0,width:0,layers:[]},s={height:0,width:0,layers:[]};for(e=0;e<t.length;e++){for(r={height:0,width:0,layers:[]},i=0;i<t[e].length;i++)if("string"==typeof t[e][i]){var o=t[e][i],a=o.indexOf(":"),h=n[o];if(!h&&a>=0){var l=o.substring(a+1);h=n[o.substring(0,a)],"mirror"===l&&(h=n[o]=c(h))}u(r,h,"horizontal")}else u(r,t[e][i],"horizontal");u(s,r,"vertical")}return s},c=function(t){for(var e={layers:[]},i=t.width*t.tilewidth,n=0;n<t.layers.length;n++){var r=e.layers[n]={},s=t.layers[n];for(var a in o(s),s)s.hasOwnProperty(a)&&(r[a]=s[a]);if(s.data)for(var h=s.data,u=r.data=[],l=t.width,c=0;c<h.length;c++){var d=h[l*(c/l>>0)+l-1-c%l];u[c]=d?2147483648^d:0}if(s.objects)for(var p=s.objects,g=r.objects=[],v=0;v<p.length;v++){var y=p[v],m=g[v]={};for(var b in y)y.hasOwnProperty(b)&&(m[b]=y[b]);m.x=i-y.x-(y.width||0),y.polygon&&(m.polygon=f(y.polygon)),y.polyline&&(m.polyline=f(y.polyline))}}for(var _ in t)t.hasOwnProperty(_)&&!e[_]&&(e[_]=t[_]);return e},f=function(t){for(var e=[],i=t.length;i--;)e.push({x:-t[i].x,y:t[i].y});return e.unshift(e.pop()),e},Object(p.a)({id:"LevelBuilder",properties:{useUniques:!0,levelTemplate:null,levelPieces:null},publicProperties:{},initialize:function(){this.levelMessage={level:null,persistentData:null}},events:{"layer-loaded":function(t){var e=null,i=null,n="",r=0,s=0,o=0;if(this.levelMessage.persistentData=t,this.levelTemplate=t&&t.levelTemplate||this.levelTemplate,this.useUniques=t&&t.useUniques||this.useUniques,i=t&&t.levelPieces||this.levelPieces,this.levelPieces={},i)for(n in i)if(i.hasOwnProperty(n))if("string"==typeof i[n])this.levelPieces[n]=i[n];else{if(!i[n].length)throw"Level Builder: Level pieces of incorrect type: "+i[n];for(this.levelPieces[n]=[],r=0;r<i[n].length;r++)this.levelPieces[n].push(i[n][r])}if(!this.levelTemplate)throw"Level Builder: There is no level template.";if(!this.levelTemplate)throw"Level Builder: Template is not defined";for(this.levelMessage.level=[],s=0;s<this.levelTemplate.length;s++)if("string"==typeof(e=this.levelTemplate[s]))this.levelMessage.level[s]=this.getLevelPiece(e);else{if(!e.length)throw"Level Builder: Template row is neither a string or array. What is it?";for(this.levelMessage.level[s]=[],o=0;o<e.length;o++)this.levelMessage.level[s][o]=this.getLevelPiece(e[o])}this.levelMessage.level&&(this.levelMessage.level=l(this.levelMessage.level),this.owner.triggerEvent("load-level",this.levelMessage))}},methods:{getLevelPiece:function(t){var e=this.levelPieces[t]||t,i=null,n=0;if(e){if("string"==typeof e)return this.useUniques?(i=e,this.levelPieces[t]=null,i):e;if(e.length)return n=Math.floor(Math.random()*e.length),this.useUniques?Object(d.c)(this.levelPieces[t],n):e[n];throw"Level Builder: There are no MORE level pieces of type: "+t}throw"Level Builder: There are no level pieces of type: "+t},destroy:function(){this.levelMessage.level=null,this.levelMessage.persistentData=null,this.levelMessage=null}},publicMethods:{mergeLevels:function(t){return l(t)}},getAssetList:function(t,e,i){var n=0,r=null,s=d.a.setUp(),o="",a=null;if(t&&t.levelPieces?a=t.levelPieces:e&&e.levelPieces?a=e.levelPieces:i&&i.levelPieces&&(a=i.levelPieces),a)for(o in a)if(a.hasOwnProperty(o))if(Array.isArray(a[o]))for(n=0;n<a[o].length;n++)r=platypus.components.TiledLoader.getAssetList({level:a[o][n]},e,i),Object(d.d)(s,r),d.a.recycle(r);else r=platypus.components.TiledLoader.getAssetList({level:a[o]},e,i),Object(d.d)(s,r),d.a.recycle(r);return s}}))},function(t,e,i){"use strict";var n=i(0),r=i(2);e.a=Object(r.a)({id:"LogicAngularMovement",properties:{maxVelocity:3,acceleration:.01,visualOffset:0,startAngle:0},publicProperties:{},initialize:function(){this.angle=this.startAngle,this.v=n.a.setUp(0,0),this.moving=!1,this.piOverTwo=Math.PI/2,this.owner.rotation=this.owner.rotation||this.visualOffset},events:{"handle-logic":function(t){var e=Math.PI,i=Math.sin,n=Math.cos,r=Math.min,s=Math.max,o=t.delta,a=0;this.moving&&(this.v[0]+=this.acceleration*n(this.angle)*o,this.v[1]+=this.acceleration*i(this.angle)*o,0===this.v[0]?a=this.v[1]>0?this.piOverTwo:this.v[1]<0?-this.piOverTwo:this.angle:(a=Math.atan(this.v[1]/this.v[0]),this.v[0]<0&&(a=e+a)),this.v[0]>=0?this.v[0]=r(this.v[0],this.maxVelocity*n(a)):this.v[0]=s(this.v[0],this.maxVelocity*n(a)),this.v[1]>=0?this.v[1]=r(this.v[1],this.maxVelocity*i(a)):this.v[1]=s(this.v[1],this.maxVelocity*i(a)),this.owner.x+=this.v[0],this.owner.y+=this.v[1],this.owner.rotation=a*(180/e)+this.visualOffset)},"set-angle":function(t){this.angle=t},move:function(){this.moving=!0},stop:function(){this.moving=!1,this.v[0]=0,this.v[1]=0},"set-max-velocity":function(t){this.maxVelocity=t}},methods:{destroy:function(){this.v.recycle()}}})},function(t,e,i){"use strict";var n,r=i(23),s=i(0),o=i(2);e.a=(n=function(){var t=this.attachment;t&&t.trigger.apply(t,arguments)},Object(o.a)({id:"LogicAttachment",properties:{attachState:"attached",attachment:"",events:null,startAttached:!1,offsetX:0,offsetY:0,offsetZ:.01},initialize:function(){var t="",e=this.events;if(this.state=this.owner.state,this.state.set(this.attachState,this.startAttached),this.attachmentPosition={x:0,y:0,z:0,dx:0,dy:0},this.attachmentProperties={type:this.attachment,properties:this.attachmentPosition},this.attachment=null,this.isAttached=this.startAttached,e)for(t in e)e.hasOwnProperty(t)&&this.addEventListener(t,n.bind(this,e[t]))},events:{"handle-logic":function(){var t=0,e=this.state;this.isAttached?(this.attachment||(this.attachmentPosition.x=this.owner.x,this.attachmentPosition.y=this.owner.y,this.attachmentPosition.z=this.owner.z,this.attachment=this.owner.parent.addEntity(this.attachmentProperties)),this.attachment.destroyed?(this.owner.parent.removeEntity(this.attachment),this.attachment=null,this.isAttached=!1):(this.attachment.x=this.owner.x,t=this.offsetX,e.get("left")?(t*=-1,this.attachment.rotation=180):e.get("right")&&(this.attachment.rotation=0),this.attachment.x+=t,this.attachment.y=this.owner.y,t=this.offsetY,e.get("top")?(t*=-1,this.attachment.rotation=90):e.get("bottom")&&(this.attachment.rotation=-90),this.attachment.y+=t,this.attachment.z=this.owner.z,this.attachment.z+=this.offsetZ)):this.attachment&&(this.owner.parent.removeEntity(this.attachment),this.attachment=null),e.set(this.attachState,this.isAttached)},attach:function(t){this.isAttached=!t||!1!==t.pressed},detach:function(){this.isAttached=!1},"change-attachment-offset":function(t){void 0!==t.x?this.offsetX=t.x:void 0!==t.y?this.offsetY=t.y:void 0!==t.z&&(this.offsetZ=t.z)}},methods:{destroy:function(){this.state.set(this.attachState,!1),this.attachment&&(this.owner.parent.removeEntity(this.attachment),this.attachment=null),this.isAttached=!1,this.state=null}},getAssetList:function(t,e,i){var n=t.attachment||e.attachment||i.attachment;return n?r.a.getAssetList({type:n}):s.a.setUp()}}))},function(t,e,i){"use strict";var n=i(11),r=i(7),s=i(2);e.a=Object(s.a)({id:"LogicButton",properties:{onPress:"",onRelease:"",onCancel:"",onHover:"",useOnce:!1,disabled:!1,toggle:!1,pressed:!1},publicProperties:{bottom:null,left:null,right:null,top:null},initialize:function(){var t=this.owner.state;this.aabb=n.a.setUp(),this.lastBottom=null,this.lastLeft=null,this.lastRight=null,this.lastTop=null,this.state=t,t.set("disabled",this.disabled),t.set("released",!this.pressed),t.set("pressed",this.pressed),t.set("highlighted",!1),this.owner.buttonMode=!this.disabled,this.cancelled=!1,this.readyToToggle=!1},events:{"handle-logic":function(){var t=this.bottom,e=this.left,i=this.right,n=this.top;this.lastBottom===t&&this.lastLeft===e&&this.lastRight===i&&this.lastTop===n||(this.updatePosition(this.aabb),this.lastBottom=t,this.lastLeft=e,this.lastRight=i,this.lastTop=n)},"camera-update":function(t){this.aabb.set(t.viewport),this.updatePosition(this.aabb)},pointerdown:function(t){this.state.get("disabled")||(this.toggle?this.readyToToggle=!0:(this.onPress&&this.owner.trigger(this.onPress),this.updateStateAndTrigger("pressed"),t&&t.pixiEvent&&t.pixiEvent.stopPropagation&&t.pixiEvent.stopPropagation(),this.useOnce&&this.removeEventListener&&this.removeEventListener("pointerdown")))},pressup:function(t){var e=this.state;e.get("disabled")||(this.cancelled?(this.onCancel&&this.owner.trigger(this.onCancel),this.updateStateAndTrigger("cancelled")):this.toggle?this.readyToToggle&&(e.get("pressed")?this.updateStateAndTrigger("released"):this.updateStateAndTrigger("pressed")):(this.onRelease&&this.owner.trigger(this.onRelease),this.updateStateAndTrigger("released")),t&&t.pixiEvent&&t.pixiEvent.stopPropagation&&t.pixiEvent.stopPropagation(),this.useOnce&&this.removeEventListener&&(this.removeEventListener("pressup"),this.state.set("disabled",!0),this.owner.buttonMode=!1)),this.cancelled=!1,this.readyToToggle=!1},pointerover:function(){this.onHover&&this.owner.trigger(this.onHover),this.state.get("pressed")&&(this.cancelled=!1)},pointerout:function(){this.state.get("pressed")&&(this.cancelled=!0)},disable:function(){this.state.set("disabled",!0),this.owner.buttonMode=!1},enable:function(){this.state.set("disabled",!1),this.owner.buttonMode=!0},"toggle-disabled":function(){var t=this.state.get("disabled");this.owner.buttonMode=t,this.state.set("disabled",!t)},highlight:function(){this.state.set("highlighted",!0)},unhighlight:function(){this.state.set("highlighted",!1)},"toggle-highlight":function(){var t=this.state;t.set("highlighted",!t.get("highlighted"))}},methods:{updatePosition:function(t){var e=this.bottom,i=this.left,n=this.owner,r=this.right,s=this.top;"number"==typeof i?n.x=t.left+i:"number"==typeof r&&(n.x=t.right-r),"number"==typeof s?n.y=t.top+s:"number"==typeof e&&(n.y=t.bottom-e)},updateStateAndTrigger:function(t){var e=null,i=this.owner,n=this.state,s=n.get("pressed"),o=n.get("released"),a=!1;o&&"pressed"===t?(n.set("pressed",!0),n.set("released",!1),a=!0):!s||"released"!==t&&"cancelled"!==t||(n.set("pressed",!1),n.set("released",!0),a=!0),a&&(e=r.a.setUp("released",s,"pressed",o,"triggered",o,"entity",i),i.triggerEvent(t,e),e.recycle())},destroy:function(){this.aabb.recycle(),this.aabb=null,this.owner.buttonMode=!1,this.state=null}}})},function(t,e,i){"use strict";var n=i(2);e.a=Object(n.a)({id:"LogicCarrier",initialize:function(){},events:{load:function(){this.owner.triggerEvent("add-collision-entity",this.owner)||(this.owner.addComponent(new platypus.components.CollisionGroup(this.owner,{})),this.owner.triggerEvent("add-collision-entity",this.owner))},"carry-me":function(t){this.owner.triggerEvent("add-collision-entity",t.entity)},"release-me":function(t){this.owner.triggerEvent("remove-collision-entity",t.entity)}}})},function(t,e,i){"use strict";var n=i(2);e.a=Object(n.a)({id:"LogicDestroyMe",properties:{delay:0,destroyed:!1},events:{"prepare-logic":function(t){var e=t.delta;this.destroyed&&!this.owner.state.get("paused")&&(this.delay-=e,this.delay<=0&&this.owner.parent.removeEntity(this.owner))},"destroy-me":function(){this.destroyed=!0}}})},function(t,e,i){"use strict";var n,r,s,o,a=i(9),h=i(2);e.a=(r=function(t){return function(e){this[t]=!e||!1!==e.pressed}},s=function(){},o={x:function(t,e){t!==e&&(t>180&&e<=180||t<=180&&e>180)&&this.owner.triggerEvent("transform","vertical")},y:function(t,e){t!==e&&(t>90&&t<=270&&(e<=90||e>270)||(t<=90||t>270)&&e>90&&e<=270)&&this.owner.triggerEvent("transform","horizontal")},z:function(t,e){t!==e&&this.owner.triggerEvent("replace-transform","rotate-"+t)}},Object(h.a)({id:"LogicDirectionalMovement",properties:{axis:"y",speed:.3},initialize:function(){var t=this.state=this.owner.state;"number"==typeof this.speed&&(this.speed=[this.speed,0,0]),this.initialVector=a.a.setUp(this.speed),this.reorient=o[this.axis],this.reorient||(this.reorient=s),this.moving=t.set("moving",!1),this.left=t.set("left",!1),this.right=t.set("right",!1),this.up=t.set("up",!1),this.down=t.set("down",!1),this.upLeft=!1,this.upRight=!1,this.downLeft=!1,this.downRight=!1,this.heading=0,this.owner.heading=this.owner.heading||0},events:{"component-added":function(t){if(t===this){if(!this.owner.addMover)return void platypus.debug.warn('The "LogicDirectionalMovement" component requires a "Mover" component to function correctly.');this.direction=this.owner.addMover({velocity:this.speed,drag:0,friction:0,stopOnCollision:!1,orient:!1,aliases:{moving:"control-velocity"}}).velocity,this.owner.heading!==this.heading&&(this.direction.setVector(this.initialVector).rotate(this.owner.heading/180*Math.PI),this.heading=this.owner.heading),this.owner.triggerEvent("moving",this.moving)}},"handle-logic":function(){var t=this.state,e=this.up||this.upLeft||this.upRight,i=this.upLeft||this.up&&this.left,n=this.left||this.upLeft||this.downLeft,r=this.downLeft||this.down&&this.left,s=this.down||this.downLeft||this.downRight,o=this.downRight||this.down&&this.right,a=this.right||this.upRight||this.downRight,h=this.upRight||this.up&&this.right;if(n&&a||e&&s)this.moving=!1;else if(i)this.moving=!0,this.heading=225;else if(h)this.moving=!0,this.heading=315;else if(r)this.moving=!0,this.heading=135;else if(o)this.moving=!0,this.heading=45;else if(n)this.moving=!0,this.heading=180;else if(a)this.moving=!0,this.heading=0;else if(e)this.moving=!0,this.heading=270;else if(s)this.moving=!0,this.heading=90;else switch(this.moving=!1,this.heading){case 270:e=!0;break;case 90:s=!0;break;case 180:n=!0;break;case 225:e=!0,n=!0;break;case 315:e=!0,a=!0;break;case 135:s=!0,n=!0;break;case 45:s=!0,a=!0;break;case 0:default:a=!0}this.owner.heading!==this.heading&&(this.direction.setVector(this.initialVector).rotate(this.heading/180*Math.PI),this.reorient(this.heading,this.owner.heading),this.owner.heading=this.heading),t.get("moving")!==this.moving&&(this.owner.triggerEvent("moving",this.moving),t.set("moving",this.moving)),t.set("up",e),t.set("right",a),t.set("down",s),t.set("left",n)},"go-down":r("down"),"go-south":r("down"),"go-down-left":r("downLeft"),"go-southwest":r("downLeft"),"go-left":r("left"),"go-west":r("left"),"go-up-left":r("upLeft"),"go-northwest":r("upLeft"),"go-up":r("up"),"go-north":r("up"),"go-up-right":r("upRight"),"go-northeast":r("upRight"),"go-right":r("right"),"go-east":r("right"),"go-down-right":r("downRight"),"go-southeast":r("downRight"),stop:function(t){t&&!1===t.pressed||(this.left=!1,this.right=!1,this.up=!1,this.down=!1,this.upLeft=!1,this.upRight=!1,this.downLeft=!1,this.downRight=!1)},face:(n={up:270,north:270,down:90,south:90,left:180,west:180,right:0,east:0,"up-left":225,northwest:225,"up-right":315,northeast:315,"down-left":135,southwest:135,"down-right":45,southeast:45},function(t){this.heading=n[t]||0}),accelerate:function(t){this.initialVector.normalize().multiply(t),this.direction.normalize().multiply(t)}},methods:{destroy:function(){this.initialVector.recycle(),this.state=null}}}))},function(t,e,i){"use strict";var n=i(11),r=i(8),s=i(2),o=new r.k(-2e3,-2e3,4e3,4e3);e.a=Object(s.a)({id:"LogicDragDrop",properties:{dragRenderParent:"",stickyClick:!1},initialize:function(){this.aabb=n.a.setUp(),this.nextX=this.owner.x,this.nextY=this.owner.y,this.lastZ=this.owner.z,this.grabOffsetX=0,this.grabOffsetY=0,this.state=this.owner.state,this.state.set("dragging",!1),this.state.set("noDrop",!1),this.tryDrop=!1,this.hitSomething=!1,this.hasCollision=!1,platypus.supports.mobile&&(this.stickyClick=!1)},events:{"camera-update":function(t){this.aabb.set(t.viewport),this.checkCamera()},"component-added":function(t){"CollisionBasic"===t.type&&(this.hasCollision=!0)},"prepare-logic":function(){this.checkCamera()},"handle-logic":function(){this.state.get("dragging")&&(this.owner.x=this.nextX,this.owner.y=this.nextY,this.owner.triggerEvent("hovering")),this.state.set("noDrop",!1)},"handle-post-collision-logic":function(){this.tryDrop?(this.tryDrop=!1,this.hitSomething?(this.dropFailed=!1,this.state.set("noDrop",!0),this.state.set("dragging",!0),this.owner.dragMode=!0):(this.state.set("noDrop",!1),this.state.set("dragging",!1),this.owner.dragMode=!1)):this.hitSomething&&this.state.set("noDrop",!0),this.hitSomething=!1},pointerdown:function(t){this.sticking?(this.sticking=!1,this.releasePointer(),this.release()):(this.nextX=this.owner.x,this.nextY=this.owner.y,this.lastZ=this.owner.z,this.grabOffsetX=(t.x>>0)-this.owner.x,this.grabOffsetY=(t.y>>0)-this.owner.y,this.state.set("dragging",!0),this.dragRenderParent!==this.owner.renderParent&&(this.originalRenderParent=this.owner.renderParent,this.owner.parent.triggerEvent("set-parent-render-container",this.owner,this.dragRenderParent)),this.owner.dragMode=!0,this.sticking=this.stickyClick,this.sticking&&this.claimPointer()),t.pixiEvent.stopPropagation()},pressup:function(t){this.sticking||this.release(),t.pixiEvent.stopPropagation()},pointermove:function(t){this.sticking&&(this.nextX=t.x-this.grabOffsetX,this.nextY=t.y-this.grabOffsetY,t.event.preventDefault(),t.pixiEvent.stopPropagation())},pressmove:function(t){this.nextX=t.x-this.grabOffsetX,this.nextY=t.y-this.grabOffsetY,!this.sticking||this.nextX===this.owner.x&&this.nextY===this.owner.y||(this.sticking=!1,this.releasePointer()),t.event.preventDefault(),t.pixiEvent.stopPropagation()},"no-drop":function(){this.hitSomething=!0}},methods:{checkCamera:function(){this.state&&this.state.get("dragging")&&!this.aabb.containsPoint(this.nextX+this.grabOffsetX,this.nextY+this.grabOffsetY)&&(this.sticking&&(this.sticking=!1,this.releasePointer()),this.release())},claimPointer:function(){this.lastHitArea=this.owner.container.hitArea,this.owner.container.hitArea=o},releasePointer:function(){this.owner.container.hitArea=this.lastHitArea},release:function(){this.hasCollision?this.tryDrop=!0:(this.state.set("noDrop",!1),this.state.set("dragging",!1),this.originalRenderParent&&this.owner.parent.triggerEvent("set-parent-render-container",this.owner,this.originalRenderParent),this.owner.dragMode=!1,this.owner.z=this.lastZ),this.owner.triggerEvent("dropped",this.owner)},destroy:function(){this.state.set("dragging",!1),this.owner.dragMode=!1,this.state.set("noDrop",!1),this.state=null,this.aabb.recycle(),this.aabb=null,this.owner.z=this.lastZ}}})},function(t,e,i){"use strict";var n=i(9),r=i(2);e.a=Object(r.a)({id:"LogicImpactLaunch",properties:{accelerationX:-.3,accelerationY:-.8,flipX:!0,flipY:!1},initialize:function(t){this.stunState=t.state||"stunned",this.flipX=this.flipX?-1:1,this.flipY=this.flipY?-1:1,this.justJumped=!1,this.stunned=!1,this.state=this.owner.state,this.state.set("impact",!1),this.state.set(this.stunState,!1)},events:{"component-added":function(t){if(t===this){if(!this.owner.addMover)return void platypus.debug.warn('The "LogicDirectionalMovement" component requires a "Mover" component to function correctly.');this.direction=this.owner.addMover({velocity:[0,0,0],orient:!1}).velocity,this.vector=n.a.setUp()}},"handle-logic":function(){this.state.set("impact",this.justJumped),this.state.set(this.stunState,this.stunned),this.justJumped&&(this.direction.setVector(this.vector),this.justJumped=!1,this.stunned=!0)},"impact-launch":function(t){var e=t.x,i=t.y;t.entity&&(e=t.entity.x-this.owner.x,i=t.entity.y-this.owner.y),this.stunned||(this.justJumped=!0,e>=0?this.vector.x=this.accelerationX:e<0&&(this.vector.x=this.accelerationX*this.flipX),i>=0?this.vector.y=this.accelerationY:i<0&&(this.vector.y=this.accelerationY*this.flipY))},"hit-solid":function(t){this.stunned&&t.y>0&&(this.direction.x=0,this.direction.y=0,this.stunned=!1)}},methods:{destroy:function(){this.vector.recycle(),this.state=null}}})},function(t,e,i){"use strict";var n=i(2);e.a=Object(n.a)({id:"LogicPacingPlatform",initialize:function(t){this.ang=this.owner.angle||t.angle||0,this.dist=this.owner.distance||t.distance||128,this.dX=this.dist*Math.cos(this.ang),this.dY=this.dist*Math.sin(this.ang),this.period=this.owner.period||t.period||4e3,this.time=0,this.startPos=this.owner.startPos||t.startPos||0,this.offset=0,this.originX=this.owner.x,this.originY=this.owner.y},events:{"handle-logic":function(t){var e=this.period,i=t.delta;this.time+=i,this.time>e&&(this.time=this.time%e),this.offset=this.time/e*(2*Math.PI),this.owner.x=this.originX+Math.sin(this.offset+this.startPos)*this.dX,this.owner.y=this.originY+Math.sin(this.offset+this.startPos)*this.dY}}})},function(t,e,i){"use strict";var n=i(2);e.a=Object(n.a)({id:"LogicPortable",properties:{portableDirections:{down:!0}},initialize:function(t){this.carrier=this.lastCarrier=null,this.message={entity:this.owner}},events:{"handle-logic":function(){var t=this.message;this.carrierConnected?(this.carrier!==this.lastCarrier&&(this.lastCarrier&&this.lastCarrier.triggerEvent("release-me",t),this.carrier.triggerEvent("carry-me",t)),this.carrierConnected=!1):this.carrier&&(this.carrier.triggerEvent("release-me",t),this.carrier=null),this.lastCarrier=this.carrier},"hit-solid":function(t){t.y>0?this.updateCarrier(t.entity,"down"):t.y<0?this.updateCarrier(t.entity,"up"):t.x<0?this.updateCarrier(t.entity,"left"):t.x>0&&this.updateCarrier(t.entity,"right")},"force-release":function(){this.carrier&&this.carrier.triggerEvent("release-me",this.message),this.carrier=null,this.lastCarrier=this.carrier,this.carrierConnected=!1}},methods:{updateCarrier:function(t,e){this.portableDirections[e]&&t&&(t!==this.carrier&&(this.carrier=t),this.carrierConnected=!0)}}})},function(t,e,i){"use strict";var n=i(20),r=i(2);e.a=Object(r.a)({id:"LogicPortal",initialize:function(t){var e=0,i=t.entrants||t.entrant||"no one",r=this.owner.state;if(this.destination=this.owner.destination||t.destination,this.used=!1,this.ready=!1,this.wasReady=!1,this.entrants=n.a.setUp(),Array.isArray(i))for(e=0;e<i.length;e++)this.entrants.set(i[e],!1);else this.entrants.set(i,!1);this.state=r,r.set("occupied",!1),r.set("ready",!0)},events:{"handle-logic":function(){var t=this.entrants,e=t.keys,i=e.length,n=!1,r=!0,s=this.state;for(!this.used&&this.activated?(this.owner.triggerEvent("port-"+this.destination),this.used=!0):this.ready&&!this.wasReady?(this.owner.triggerEvent("portal-waiting"),this.wasReady=!0):this.wasReady&&!this.ready&&(this.owner.triggerEvent("portal-not-waiting"),this.wasReady=!1);i--;)t[e[i]]?(n=!0,t.set(e[i],!1)):r=!1;s.set("occupied",n),s.set("ready",r),this.ready=!1},"occupied-portal":function(t){var e=this.entrants,i=e.keys,n=i.length;for(e.set(t.entity.type,!0);n--;)if(!e.get(i[n]))return;this.ready=!0},"activate-portal":function(){this.activated=!0}},methods:{destroy:function(){this.state=null,this.entrants.recycle(),this.entrants=null}}})},function(t,e,i){"use strict";var n,r=i(0),s=i(2);e.a=(n=function(t,e){return t/Math.abs(t)*e},Object(s.a)({id:"LogicPushable",initialize:function(t){this.yPush=t.push||t.yPush||0,this.xPush=t.push||t.xPush||.1,t.roll?(this.radius=t.radius||this.owner.radius||(this.owner.width||this.owner.height||2)/2,this.owner.orientation=this.owner.orientation||0):this.radius=0,this.currentPushX=0,this.currentPushY=0,this.lastX=this.owner.x,this.lastY=this.owner.y,this.pushers=r.a.setUp()},events:{"handle-logic":function(t){var e=0,i=t.delta;for(this.currentPushY&&(this.owner.y+=n(this.currentPushY,this.yPush*i),this.currentPushY=0),this.currentPushX&&(this.owner.x+=n(this.currentPushX,this.xPush*i),this.currentPushX=0),this.lastX===this.owner.x&&this.lastY===this.owner.y||(this.radius&&(this.owner.orientation+=(this.owner.x+this.owner.y-this.lastX-this.lastY)/this.radius),this.lastX=this.owner.x,this.lastY=this.owner.y),e=0;e<this.pushers.length;e++)this.pushers[e].triggerEvent("pushed",this.owner);this.pushers.length=0},"push-entity":function(t){var e=t.x||0,i=t.y||0;this.currentPushX-=e,this.currentPushY-=i,(this.yPush&&i||this.xPush&&e)&&this.pushers.push(t.entity)},"hit-solid":function(t){return t.y>0&&this.vY>0||t.y<0&&this.vY<0?this.vY=0:(t.x<0&&this.vX<0||t.x>0&&this.vX>0)&&(this.vX=0),!0}},methods:{destroy:function(){r.a.recycle(this.pushers)}}}))},function(t,e,i){"use strict";var n=i(9),r=i(0),s=i(2);e.a=Object(s.a)({id:"LogicRebounder",initialize:function(t){n.a.assign(this.owner,"velocity","dx","dy","dz"),this.owner.mass=this.owner.mass||t.mass||1,this.elasticity=t.elasticity||.8,this.v=n.a.setUp(0,0,0),this.incidentVector=n.a.setUp(0,0,0),this.staticCollisionOccurred=!1,this.nonStaticCollisionOccurred=!1,this.hitThisTick=r.a.setUp(),this.otherV=n.a.setUp(0,0,0),this.otherVelocityData=r.a.setUp()},events:{"handle-logic":function(){var t=0;for(this.hitThisTick.length=0,t=0;t<this.otherVelocityData.length;t++)this.otherVelocityData[t].velocity.recycle();this.otherVelocityData.length=0},"hit-static":function(t){var e,i=t.entity,n=0;for(n=0;n<this.hitThisTick.length;n++)if(i===this.hitThisTick[n])return;this.hitThisTick.push(i),this.v.setVector(this.owner.velocity),this.incidentVector.setVector(t.direction),e=this.v.scalarProjection(this.incidentVector),isNaN(e)||(this.incidentVector.scale(e*(1+this.elasticity)),this.v.subtractVector(this.incidentVector)),this.owner.velocity.setVector(this.v)},"hit-non-static":function(t){var e,i=0,n=t.entity,r=!1,s=0,o=0;if(!((i=this.hitThisTick.indexOf(n))>=0)){for(this.hitThisTick.push(n),i=0;i<this.otherVelocityData.length;i++)if(n===this.otherVelocityData[i].entity){this.otherV.setVector(this.otherVelocityData[i].velocity),r=!0;break}r||(this.otherV.setVector(n.velocity),n.triggerEvent("share-velocity",this.owner)),this.v.setVector(this.owner.velocity),this.incidentVector.setVector(t.direction),s=this.v.scalarProjection(this.incidentVector),s=isNaN(s)?0:s,o=this.otherV.scalarProjection(this.incidentVector),o=isNaN(o)?0:o,e=(s*(this.owner.mass-n.mass)+2*n.mass*o)/(this.owner.mass+n.mass),this.incidentVector.scale(e-s),this.owner.velocity.setVector(this.incidentVector)}},"share-velocity":function(t){this.otherVelocityData.push({entity:t,velocity:n.a.setUp(t.velocity)})}},methods:{destroy:function(){this.v.recycle(),this.incidentVector.recycle(),this.otherV.recycle(),r.a.recycle(this.hitThisTick),r.a.recycle(this.otherVelocityData)}},publicMethods:{}})},function(t,e,i){"use strict";var n=i(23),r=i(0),s=i(2);e.a=Object(s.a)({id:"LogicRegionSpawner",initialize:function(t){var e=0,i=0,n=1,s=1,o=0,a=0,h=0,u=0;if(this.spawnPosition={x:0,y:0},this.spawnProperties={type:t.spawn,properties:this.spawnPosition},this.regions=null,this.usedRegions=null,this.regionWidth=0,this.regionHeight=0,t.regions)for(this.regions=r.a.setUp(),this.usedRegions=r.a.setUp(),this.regionWidth=o=t.regions.width||this.owner.width,this.regionHeight=a=t.regions.height||this.owner.height,n=Math.round(this.owner.width/o),s=Math.round(this.owner.height/a),e=0;e<n;e++)for(i=0;i<s;i++)h=Math.min(o,this.owner.width-e*o),u=Math.min(a,this.owner.height-i*a),this.regions.push({x:e*o,y:i*a,width:h,height:u});this.interval=this.owner.interval||t.interval||1e3,this.time=0},events:{"handle-logic":function(t){var e=this.regions,i=null;this.time+=t.delta,this.time>this.interval&&(this.time-=this.interval,e?(e.length||(this.regions=this.usedRegions,this.usedRegions=e,e=this.regions),i=e[Math.floor(e.length*Math.random())],this.spawnPosition.x=this.owner.x-(this.owner.regX||0)+(i.x+Math.random()*i.width),this.spawnPosition.y=this.owner.y-(this.owner.regY||0)+(i.y+Math.random()*i.height)):(this.spawnPosition.x=this.owner.x-(this.owner.regX||0)+Math.random()*this.owner.width,this.spawnPosition.y=this.owner.y-(this.owner.regY||0)+Math.random()*this.owner.height),this.owner.parent.addEntity(this.spawnProperties))}},methods:{destroy:function(){this.regions&&(r.a.recycle(this.regions),r.a.recycle(this.usedRegions))}},getAssetList:function(t,e,i){var s=t.spawn||e.spawn||i.spawn;return s?n.a.getAssetList({type:s}):r.a.setUp()}})},function(t,e,i){"use strict";var n,r,s=i(2);e.a=(n=Math.cos,r=Math.sin,Object(s.a)({id:"LogicRotationalMovement",properties:{speed:.3,angle:0,degree:1},initialize:function(){var t=this.owner.state;this.magnitude=0,this.state=t,t.set("moving",!1),t.set("turningRight",!1),t.set("turningLeft",!1),this.owner.orientation=0,this.moving=!1,this.turningRight=!1,this.turningLeft=!1},events:{"handle-logic":function(t){var e,i,s=this.state;this.turningRight&&(this.angle+=this.degree*t.delta/15),this.turningLeft&&(this.angle-=this.degree*t.delta/15),this.moving&&(this.owner.x+=(e=this.magnitude,i=this.angle,e*n(i)*t.delta),this.owner.y+=function(t,e){return t*r(e)}(this.magnitude,this.angle)*t.delta),s.set("moving",this.moving),s.set("turningLeft",this.turningLeft),s.set("turningRight",this.turningRight),this.owner.orientation!==this.angle*Math.PI/180&&(this.owner.orientation=this.angle*Math.PI/180,this.owner.triggerEvent("orientation-updated"))},rotate:function(t){this.angle+=t},"turn-right":function(t){this.turningRight=!t||t.pressed},"turn-left":function(t){this.turningLeft=!t||t.pressed},"go-forward":function(t){!t||t.pressed?(this.moving=!0,this.magnitude=this.speed):this.moving=!1},"go-backward":function(t){!t||t.pressed?(this.moving=!0,this.magnitude=-this.speed):this.moving=!1},stop:function(t){t&&!t.pressed||(this.moving=!1,this.turningLeft=!1,this.turningRight=!1)},"stop-moving":function(t){t&&!t.pressed||(this.moving=!1)},"stop-turning":function(t){t&&!t.pressed||(this.turningLeft=!1,this.turningRight=!1)}},methods:{destroy:function(){this.state=null}}}))},function(t,e,i){"use strict";var n=i(23),r=i(0),s=i(2);e.a=Object(s.a)({id:"LogicSpawner",initialize:function(t){var e=this.owner.spawneeClass||t.spawneeClass,i="",n=0;if(this.state=this.owner.state,this.stateName=t.state||"spawning",this.originalZ=platypus.game.settings.entities[e]&&platypus.game.settings.entities[e].properties&&platypus.game.settings.entities[e].properties.z||0,this.speed=t.speed||this.owner.speed||0,this.state.set(this.stateName,!1),this.spawneeProperties={x:0,y:0,z:0,dx:0,dy:0,spawner:this.owner},t.passOnProperties)for(n=0;n<t.passOnProperties.length;n++)i=t.passOnProperties[n],this.owner[i]&&(this.spawneeProperties[i]=this.owner[i]);this.propertiesContainer={type:e,properties:this.spawneeProperties},this.offsetX=this.owner.offsetX||t.offsetX||0,this.offsetY=this.owner.offsetY||t.offsetY||0,this.firing=!1},events:{"handle-logic":function(){var t=0,e=this.state;this.firing&&(this.spawneeProperties.x=this.owner.x,this.spawneeProperties.y=this.owner.y,this.spawneeProperties.z=this.owner.z+this.originalZ,t=this.offsetX,e.get("left")&&(t*=-1),this.spawneeProperties.x+=t,t=this.offsetY,e.get("top")&&(t*=-1),this.spawneeProperties.y+=t,this.speed?(e.get("top")?this.spawneeProperties.dy=-this.speed:e.get("bottom")?this.spawneeProperties.dy=this.speed:delete this.spawneeProperties.dy,e.get("left")?this.spawneeProperties.dx=-this.speed:e.get("right")?this.spawneeProperties.dx=this.speed:delete this.spawneeProperties.dx):(delete this.spawneeProperties.dx,delete this.spawneeProperties.dy),this.parent.addEntity(this.propertiesContainer)),e.set(this.stateName,this.firing),this.firing=!1},spawn:function(t){this.firing=!t||!1!==t.pressed,this.parent=this.owner.parent}},methods:{destroy:function(){this.state=null}},getAssetList:function(t,e,i){var s=t.spawneeClass||e.spawneeClass||i.spawneeClass;return s?n.a.getAssetList({type:s}):r.a.setUp()}})},function(t,e,i){"use strict";var n,r,s,o,a=i(0),h=i(20),u=i(27),l=i(2);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=(n=function(t,e){e.update(t)},r=function(t,e){e.set(t,!0)},s=null,o=null,s=function(t,e,i,n,r,a,h){var u,l=0,c="",f=n.message||0===n.message||!1===n.message,d=null;if(r){if("string"==typeof n)return void a.triggerEvent(n);if(Array.isArray(n)){for(l=0;l<n.length;l++)s(t,e,i,n[l],r,a,h);return}if(n.event&&(f||n.delay))return void(n.delay?h.push(n):a.trigger(n.event,n.message));n.get&&(d=n.get("true"))&&s(t,e,i,d,r,a,h)}if(u=n.keys)for(l=u.length;l--;)"true"!==(c=u[l])&&o(c,e,i,n.get(c),r,a,h)},o=function(t,e,i,n,r,o,a){var h=r,u=!1,l="",c=!1;"!"===t.charAt(0)?(l=t.substring(1),u=!1===(c=e.get(l)),"outputs"!==t&&i.get(l)!==c&&(h=!0)):(u=!0===(c=e.get(t)),"outputs"!==t&&i.get(t)!==c&&(h=!0)),(u||"outputs"===t)&&s(t,e,i,n,h,o,a)},Object(l.a)({id:"LogicStateMachine",properties:{inputs:null,outputs:null},initialize:function(t){var e=0,i=this.inputs,s="",o=null,l=null,f=null,d=t["sustained-inputs"],p=this.owner.state;if(this.state=p,i){for(s in f=a.a.setUp(),i)if(i.hasOwnProperty(s))for(l=u.a.setUp(i[s]),f.push(l),this.addEventListener(s,n.bind(this,l,p)),e=(o=l.keys).length;e--;)p.has(o[e])||p.set(o[e],!1);this.stateObjects=f}if(this.sustainedState=u.a.setUp(),d)for(s in d)d.hasOwnProperty(s)&&(this.addEventListener(s,r.bind(this,d[s],this.sustainedState)),this.sustainedState.set(d[s],!1),p.set(d[s],!1));this.snapshot=u.a.setUp(),this.last=u.a.setUp(),this.queueTimes=a.a.setUp(),this.queue=a.a.setUp(),this.outputs=function t(e){var i=null,n="";if(!e||"object"!==c(e)||Array.isArray(e)||e.event)return e;for(n in i=h.a.setUp(),e)e.hasOwnProperty(n)&&i.set(n,t(e[n]));return i}(this.outputs)},events:{"handle-logic":function(t){for(var e=this.sustainedState,i="",n=e.keys,r=n.length,s=this.state;r--;)i=n[r],s.set(i,e.get(i)),e.set(i,!1);for(r=this.queue.length;r--;)this.queueTimes[r]-=t.delta,this.queueTimes[r]<=0&&(this.owner.trigger(this.queue[r].event,this.queue[r].message),Object(a.c)(this.queueTimes,r),Object(a.c)(this.queue,r))},"update-state":function(t){this.state.update(t)},"state-changed":function(t){var e=0,i=null,n=this.snapshot;if(this.outputs){for(n.update(t),i=a.a.setUp(),o("outputs",n,this.last,this.outputs,!1,this.owner,i),e=i.length;e--;)this.queue.push(i[e]),this.queueTimes.push(i[e].delay);a.a.recycle(i),this.last.update(n)}}},methods:{destroy:function(){var t=0,e=this.stateObjects;if(a.a.recycle(this.queueTimes),a.a.recycle(this.queue),e){for(t=e.length;t--;)e[t].recycle();a.a.recycle(e),this.stateObjects=null}this.sustainedState.recycle(),this.snapshot.recycle(),this.last.recycle(),this.state=null,this.inputs=null}}}))},function(t,e,i){"use strict";var n=i(2);e.a=Object(n.a)({id:"LogicSwitch",initialize:function(t){this.state=this.owner.state,this.pressed=!1,this.wasPressed=this.pressed,this.sticky=t.sticky||!1,this.state.set("pressed",!1),this.initialPress=!0},events:{"handle-logic":function(){this.sticky?this.pressed&&!this.wasPressed&&(this.state.set("pressed",!0),this.wasPressed=!0,this.owner.triggerEvent("switch-on")):(this.pressed!==this.wasPressed&&(this.pressed?(this.state.set("pressed",!0),this.owner.triggerEvent("switch-on")):(this.state.set("pressed",!1),this.owner.triggerEvent("switch-off"))),this.wasPressed=this.pressed,this.pressed=!1)},"switch-pressed":function(){this.pressed=!0,this.initialPress&&(this.owner.triggerEvent("initial-press"),this.initialPress=!1)}},methods:{destroy:function(){this.state=null}}})},function(t,e,i){"use strict";var n=i(9),r=i(2);e.a=Object(r.a)({id:"LogicTeleportee",initialize:function(){this.teleportDestination=n.a.setUp(),this.teleportNow=!1,this.DestinationSet=!1,this.message={position:this.teleportDestination}},events:{"handle-logic":function(){this.teleportNow&&(this.owner.triggerEvent("relocate-entity",this.message),this.teleportNow=!1,this.owner.triggerEvent("teleport-complete"))},teleport:function(){this.destinationSet&&(this.teleportNow=!0)},"set-destination":function(t){this.setDestination(t)},"hit-telepoint":function(t){this.setDestination(t.entity)}},methods:{setDestination:function(t){this.teleportDestination.setXYZ(t.x,t.y,this.owner.z),this.destinationSet=!0},destroy:function(){this.teleportDestination.recycle()}}})},function(t,e,i){"use strict";var n=i(2);e.a=Object(n.a)({id:"LogicTeleporter",initialize:function(t){this.destination=null,this.linkId=this.owner.teleportId||t.teleportId,this.facing=this.owner.facing||t.facing||!1,this.facing&&this.owner.state.set("facing-"+this.facing,!0)},events:{"peer-entity-added":function(t){this.destination||t.linkId!==this.linkId||(this.destination=t)},"teleport-entity":function(t){switch(this.facing){case"up":t.y<0&&t.entity.triggerEvent("teleport",this.destination);break;case"right":t.x>0&&t.entity.triggerEvent("teleport",this.destination);break;case"down":t.y>0&&t.entity.triggerEvent("teleport",this.destination);break;case"left":t.x<0&&t.entity.triggerEvent("teleport",this.destination);break;default:t.entity.triggerEvent("teleport",this.destination)}}},methods:{destroy:function(){this.destination=null}}})},function(t,e,i){"use strict";var n=i(2);e.a=Object(n.a)({id:"LogicTimer",properties:{time:0,alarmTime:0,isInterval:!1,alarmMessage:"",updateMessage:"",isOn:!0,isIncrementing:!0,maxTime:36e5,resetOnStop:!1},initialize:function(t){this.prevTime=this.time},events:{"handle-logic":function(t){this.isOn&&(this.prevTime=this.time,this.isIncrementing?this.time+=t.delta:this.time-=t.delta,Math.abs(this.time)>this.maxTime&&(this.time>0?this.time=this.maxTime:this.time<0&&(this.time=-this.maxTime),this.triggerEvent("stop-timer")),0!==this.alarmTime&&(this.isInterval?this.isIncrementing?Math.floor(this.time/this.alarmTime)>Math.floor(this.prevTime/this.alarmTime)&&this.owner.trigger(this.alarmMessage):Math.floor(this.time/this.alarmTime)<Math.floor(this.prevTime/this.alarmTime)&&this.owner.trigger(this.alarmMessage):this.isIncrementing?this.time>this.alarmTime&&this.prevTime<this.alarmTime&&this.owner.trigger(this.alarmMessage):this.time<this.alarmTime&&this.prevTime>this.alarmTime&&this.owner.trigger(this.alarmMessage))),this.owner.trigger(this.updateMessage,{time:this.time})},"set-timer":function(t){this.time=t.time},"start-timer":function(){this.isOn=!0},"stop-timer":function(){this.isOn=!1,this.resetOnStop&&(this.time=0)}}})},function(t,e,i){"use strict";var n=i(2);e.a=Object(n.a)({id:"LogicWindUpRacer",properties:{speed:.3,raceTime:5e3,windTime:500},initialize:function(){var t=this.owner.state;this.windProgress=0,this.winding=!1,this.racing=!1,this.blocked=!1,this.right=!1,this.left=!1,this.state=t,t.set("windingUp",!1),t.set("racing",!1),t.set("blocked",!1)},events:{"handle-logic":function(t){var e=this.state;this.racing?!this.blocked&&this.right&&e.get("right")?(this.owner.x+=this.speed*t.delta,this.owner.triggerEvent("racing")):!this.blocked&&this.left&&e.get("left")?(this.owner.x-=this.speed*t.delta,this.owner.triggerEvent("racing")):(this.racing=!1,this.owner.triggerEvent("stopped-racing")):this.winding?((this.right&&e.get("right")||this.left&&e.get("left"))&&(this.windProgress+=t.delta),this.owner.triggerEvent("winding",this.windProgress/this.windTime)):this.windProgress&&(this.windProgress>=this.windTime&&(this.racing=!0),this.windProgress=0,this.owner.triggerEvent("stopped-winding")),e.set("windingUp",this.winding),e.set("racing",this.racing),e.set("blocked",this.blocked),this.blocked=!1},"stop-racing":function(){this.racing=!1,this.owner.triggerEvent("stopped-racing")},"wind-up":function(t){this.winding=!t||!1!==t.pressed,this.right=this.state.get("right"),this.left=this.state.get("left")},"hit-solid":function(t){t.x&&this.racing&&(this.right&&t.x>0||this.left&&t.x<0)&&(this.blocked=!0,this.owner.triggerEvent("blocked",t))}},methods:{destroy:function(){this.state.set("windingUp",!1),this.state.set("racing",!1),this.state.set("blocked",!1),this.state=null}}})},function(t,e,i){"use strict";var n,r,s,o,a=i(9),h=i(2);e.a=(n=function(){return!0},r=function(t,e){return t.get(e)},s=function(t,e,i){var n=t(),r=e();if(this.activeVelocity){if(this.enact&&!r&&(this.ready=!1),this.ready&&this.enact&&n)this.ready=!1,this.velocity.setVector(this.instant),i&&this.owner.triggerEvent(i);else if(this.ready||this.enact&&n){if(r)return null}else this.ready=!0,this.decay();return this.velocity}return null},o=function(t,e){return this.activeVelocity&&t()?(this.activeAcceleration&&this.move(e),this.velocity):null},Object(h.a)({id:"Motion",properties:{orient:!0,acceleration:0,activeAcceleration:!0,activeVelocity:!0,maxMagnitude:1/0,controlState:"",instant:!1,instantState:"",instantSuccess:"",instantDecay:null,velocity:0,stopOnCollision:!0,drag:-1,friction:-1},initialize:function(t){this.acceleration||(this.activeAcceleration=!1),this.acceleration=a.a.setUp(this.acceleration),this.velocity=a.a.setUp(this.velocity),this.triggered=!1,this.ready=!0,"number"==typeof this.instantDecay?this.capMagnitude=this.velocity.magnitude()*this.instantDecay:this.capMagnitude=-1,function(t,e){var i=t.owner.state,a=e.controlState?r.bind(null,i,e.controlState):n,h=e.instantState?r.bind(null,i,e.instantState):n;t.instant||e.instantState?(t.instant=!0,t.update=s.bind(t,h,a,e.instantSuccess)):t.update=o.bind(t,a)}(this,t),this.instant&&(this.enact=!1,this.instant=a.a.setUp(this.velocity),this.velocity.setXYZ(0,0,0)),this.orient&&(this.owner.triggerEvent("orient-vector",this.velocity),this.owner.triggerEvent("orient-vector",this.acceleration))},events:{"control-velocity":function(t){this.activeVelocity=t&&!1!==t.pressed},"stop-velocity":function(){this.activeVelocity=!1},"start-velocity":function(){this.activeVelocity=!0},"control-acceleration":function(t){this.activeAcceleration=t&&!1!==t.pressed},"stop-acceleration":function(){this.activeAcceleration=!1},"start-acceleration":function(){this.activeAcceleration=!0},"instant-motion":function(t){this.enact=t&&!1!==t.triggered},"instant-begin":function(){this.enact=!0},"instant-end":function(){this.enact=!1},"set-motion":function(t){t.acceleration&&this.acceleration.set(t.acceleration),t.velocity&&(this.velocity.set(t.velocity),"number"==typeof this.instantDecay?this.capMagnitude=this.velocity.magnitude()*this.instantDecay:this.capMagnitude=-1),"number"==typeof t.maxMagnitude&&(this.maxMagnitude=t.maxMagnitude)}},methods:{move:function(t){var e=a.a.setUp(this.acceleration).multiply(t);return this.velocity.add(e),e.recycle(),this.velocity.magnitude()>this.maxMagnitude&&this.velocity.normalize().multiply(this.maxMagnitude),this.velocity},decay:function(){this.capMagnitude>=0&&this.velocity.magnitude()>this.capMagnitude&&this.velocity.normalize().multiply(this.capMagnitude)},destroy:function(){this.orient&&(this.owner.triggerEvent("remove-vector",this.acceleration),this.owner.triggerEvent("remove-vector",this.velocity)),this.acceleration.recycle(),this.velocity.recycle(),this.instant&&this.instant.recycle()}},publicMethods:{}}))},function(t,e,i){"use strict";var n,r,s,o,a=i(0),h=i(9),u=i(2);e.a=(n=h.a.setUp(),r=function(t,e,i,n){return t&&e!==i?e<i?Math.min(e+t*n,i):Math.max(e-t*n,i):e},s=function(t,e){var i=this.maxMagnitudeInterim=r(this.maxMagnitudeDelta,this.maxMagnitudeInterim,this.maxMagnitude,e);t.magnitude()>i&&t.normalize().multiply(i)},o=function(t,e){var i=this.maxMagnitude,n=this.maxMagnitudeDelta,s=this.maxMagnitudeInterim;s.up=r(n,s.up,i.up,e),s.right=r(n,s.right,i.right,e),s.down=r(n,s.down,i.down,e),s.left=r(n,s.left,i.left,e),t.x>0?t.x>s.right&&(t.x=s.right):t.x<0&&t.x<-s.left&&(t.x=-s.left),t.y>0?t.y>s.down&&(t.y=s.down):t.y<0&&t.y<-s.up&&(t.y=-s.up)},Object(u.a)({id:"Mover",properties:{ground:[0,1]},publicProperties:{movers:[],gravity:0,jump:0,speed:0,drag:.01,friction:.06,maxMagnitude:1/0,maxMagnitudeDelta:0,reorientVelocities:!0},initialize:function(){var t=1/0,e=this.maxMagnitude,i=this.owner.state;h.a.assign(this.owner,"position","x","y","z"),h.a.assign(this.owner,"velocity","dx","dy","dz"),this.position=this.owner.position,this.velocity=this.owner.velocity,this.lastVelocity=h.a.setUp(this.velocity),this.collision=null,this.pause=!1,this.moversCopy=this.movers,this.movers=a.a.setUp(),this.velocityChanges=a.a.setUp(),this.velocityDirections=a.a.setUp(),this.ground=h.a.setUp(this.ground),this.state=i,i.set("grounded",!1),Object.defineProperty(this.owner,"maxMagnitude",{get:function(){return t},set:function(e){"number"==typeof e?(this.clamp=s,t=e,this.maxMagnitudeDelta||(this.maxMagnitudeInterim=e)):(this.clamp=o,"number"==typeof t&&(t={up:t,right:t,down:t,left:t}),"number"==typeof e.up&&(t.up=e.up),"number"==typeof e.right&&(t.right=e.right),"number"==typeof e.down&&(t.down=e.down),"number"==typeof e.left&&(t.left=e.left),"number"==typeof this.maxMagnitudeInterim?this.maxMagnitudeDelta?this.maxMagnitudeInterim={up:this.maxMagnitudeInterim,right:this.maxMagnitudeInterim,down:this.maxMagnitudeInterim,left:this.maxMagnitudeInterim}:this.maxMagnitudeInterim={up:t.up,right:t.right,down:t.down,left:t.left}:this.maxMagnitudeDelta||(this.maxMagnitudeInterim.up=t.up,this.maxMagnitudeInterim.right=t.right,this.maxMagnitudeInterim.down=t.down,this.maxMagnitudeInterim.left=t.left))}.bind(this)}),this.maxMagnitudeInterim=0,this.maxMagnitude=e},events:{"component-added":function(t){"Motion"===t.type&&this.movers.push(t)},"component-removed":function(t){var e=0;"Motion"===t.type&&(e=this.movers.indexOf(t))>=0&&Object(a.c)(this.movers,e)},load:function(){var t=0,e=this.moversCopy;for(delete this.moversCopy,t=0;t<e.length;t++)this.addMover(e[t]);this.externalForces=this.addMover({velocity:[0,0,0],orient:!1}).velocity,this.speed&&(isNaN(this.speed)||(this.speed=[this.speed,0,0]),this.speed=this.addMover({velocity:this.speed,controlState:"moving"}).velocity),this.gravity&&(isNaN(this.gravity)||(this.gravity=[0,this.gravity,0]),this.gravity=this.addMover({acceleration:this.gravity,orient:!1,aliases:{gravitate:"control-acceleration"}}).acceleration),this.jump&&(isNaN(this.jump)||(this.jump=[0,this.jump,0]),this.jump=this.addMover({velocity:this.jump,instant:!0,controlState:"grounded",state:"jumping",instantSuccess:"just-jumped",instantDecay:.2,aliases:{jump:"instant-motion"}}).instant)},"handle-movement":function(t){var e=t.delta,i=null,n=this.state,r=null,s=this.velocity,o=this.position,a=this.movers,u=a.length;if(!n.get("paused")&&!this.paused){for(s.equals(this.lastVelocity,2)||this.externalForces.addVector(s).subtractVector(this.lastVelocity),s.setXYZ(0,0,0);u--;)(i=a[u].update(e))&&(this.grounded?-1!==a[u].friction?i.multiply(1-a[u].friction):i.multiply(1-this.friction):-1!==a[u].drag?i.multiply(1-a[u].drag):i.multiply(1-this.drag),s.add(i));this.clamp(s,e),this.lastVelocity.setVector(s),r=h.a.setUp(s).multiply(e),o.add(r),r.recycle(),n.set("grounded",this.grounded),this.grounded=!1}},"hit-solid":function(t){var e=0,i=0,n=t.entity&&t.entity.velocity,r=t.direction,s=!0,o=this.velocityChanges,a=this.velocityDirections,u=o.length;if(r.dot(this.ground)>0&&(this.grounded=!0),(e=this.velocity.scalarProjection(r))>0){for(e=n&&(i=Math.max(n.scalarProjection(r),0))<e?i:0;u--;)if(e<o[u]&&a[u].dot(r)>0){o[u]=e,a[u].setVector(r),s=!1;break}s&&(o.push(e),a.push(h.a.setUp(r)))}},"handle-post-collision-logic":function(){var t=null,e=this.movers,i=this.velocityChanges,r=this.velocityDirections,s=i.length,o=e.length,h=null,u=0,l=null,c=n;if(s){for(l=a.a.setUp();o--;)(h=e[o]).stopOnCollision&&l.push(h);for(;s--;){for(t=r[s],u=i[s]/(o=l.length);o--;)h=l[o],c.setVector(t).normalize().multiply(u-h.velocity.scalarProjection(t)),h.velocity.add(c);t.recycle()}i.length=0,r.length=0,a.a.recycle(l)}},"set-mover":function(t){"number"==typeof t.maxMagnitudeDelta&&(this.maxMagnitudeDelta=t.maxMagnitudeDelta),t.maxMagnitude&&(this.maxMagnitude=t.maxMagnitude)},"pause-movement":function(){this.paused=!0},"unpause-movement":function(){this.paused=!1},"orientation-updated":function(t){this.reorientVelocities||this.lastVelocity.multiply(t)}},methods:{destroy:function(){var t=0,e=this.maxMagnitude;for(t=this.movers.length-1;t>=0;t--)this.removeMover(this.movers[t]);a.a.recycle(this.movers),this.ground.recycle(),this.lastVelocity.recycle(),a.a.recycle(this.velocityChanges),a.a.recycle(this.velocityDirections),delete this.owner.maxMagnitude,this.owner.maxMagnitude=e,this.state=null}},publicMethods:{addMover:function(t){return this.owner.addComponent(new platypus.components.Motion(this.owner,t))},removeMover:function(t){this.owner.removeComponent(t)}}}))},function(t,e,i){"use strict";var n=i(0),r=i(9),s=i(2);e.a=Object(s.a)({id:"Node",publicProperties:{x:0,y:0,z:0},initialize:function(t){this.nodeId=t.nodeId||this.owner.nodeId||this.owner.id||String(Math.random()),"string"!=typeof this.nodeId&&this.nodeId.length&&(this.nodeId=t.nodeId.join("|")),this.owner.nodeId=this.nodeId,this.owner.isNode=!0,this.map=this.owner.map=this.owner.map||this.owner.parent||null,this.contains=this.owner.contains=n.a.setUp(),this.edgesContain=this.owner.edgesContain=n.a.setUp(),r.a.assign(this.owner,"position","x","y","z"),this.neighbors=this.owner.neighbors=t.neighbors||this.owner.neighbors||{}},events:{"add-neighbors":function(t){var e=0,i=null;for(i in t)t.hasOwnProperty(i)&&(this.neighbors[i]=t[i]);for(e=0;e<this.contains.length;e++)this.contains[e].triggerEvent("set-directions")},"remove-neighbor":function(t){var e=null,i=t;for(e in"string"!=typeof i&&(i=i.nodeId),this.neighbors)if(this.neighbors.hasOwnProperty(e))if("string"==typeof this.neighbors[e]){if(this.neighbors[e]===i){delete this.neighbors[e];break}}else if(this.neighbors[e].nodeId===i){delete this.neighbors[e];break}}},methods:{destroy:function(){n.a.recycle(this.contains),this.contains=this.owner.contains=null,n.a.recycle(this.edgesContain),this.edgesContain=this.owner.edgesContain=null}},publicMethods:{getNode:function(t){var e=null;if(!this.map&&this.owner.map&&(this.map=this.owner.map),this.neighbors[t]){if((e=this.neighbors[t]).isNode)return e;if("string"==typeof e){if(e=this.map.getNode(e))return this.neighbors[t]=e,e}else if(e.length&&(e=this.map.getNode(e.join("|"))))return this.neighbors[t]=e,e;return null}return null},addToNode:function(t){var e=0;for(e=0;e<this.contains.length;e++)if(this.contains[e]===t)return!1;return this.contains.push(t),t},removeFromNode:function(t){var e=0;for(e=0;e<this.contains.length;e++)if(this.contains[e]===t)return Object(n.c)(this.contains,e);return!1},addToEdge:function(t){var e=0;for(e=0;e<this.edgesContain.length;e++)if(this.edgesContain[e]===t)return!1;return this.edgesContain.push(t),t},removeFromEdge:function(t){var e=0;for(e=0;e<this.edgesContain.length;e++)if(this.edgesContain[e]===t)return Object(n.c)(this.edgesContain,e);return!1}}})},function(t,e,i){"use strict";var n,r,s=i(0),o=i(23),a=i(9),h=i(13),u=i.n(h),l=i(2),c=i(19);e.a=((r=(n=function(t,e){t.id?"string"==typeof t.id?this.id=t.id:Array.isArray(t.id)?this.id=t.id.join("|"):this.id=String(Math.random()):this.id=String(Math.random()),this.isNode=!0,this.map=e,this.contains=s.a.setUp(),this.type=t.type||"",this.position||a.a.assign(this,"position","x","y","z"),this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.neighbors=t.neighbors||{}}).prototype).getNode=function(t){var e=null;if(this.neighbors[t]){if((e=this.neighbors[t]).isNode)return e;if("string"==typeof e){if(e=this.map.getNode(e))return this.neighbors[t]=e,e}else if(Array.isArray(e)&&(e=this.map.getNode(e.join("|"))))return this.neighbors[t]=e,e;return null}return null},r.add=function(t){var e=0;for(e=0;e<this.contains.length;e++)if(this.contains[e]===t)return!1;return this.contains.push(t),t},r.remove=function(t){var e=0;for(e=0;e<this.contains.length;e++)if(this.contains[e]===t)return Object(s.c)(this.contains,e);return!1},c.a.add(n,"Node",n,(function(){s.a.recycle(this.contains)}),!0,u.a.dev),Object(l.a)({id:"NodeMap",publicProperties:{map:[]},initialize:function(){var t=0,e=this.map;for(this.map=s.a.setUp(),this.nodes={},this.residentsAwaitingNode=s.a.setUp(),t=0;t<e.length;t++)this.addNode(n.setUp(e[t],this))},events:{"add-node":function(t){var e=0,i=null,r=null;for(t.isNode?(r=t,t.map=this):r=n.setUp(t,this),this.addNode(r),e=this.residentsAwaitingNode.length-1;e>=0;e--)i=this.residentsAwaitingNode[e],r.id===i.nodeId&&(Object(s.c)(this.residentsAwaitingNode,e),i.node=this.getNode(i.nodeId),i.triggerEvent("on-node",i.node))},"child-entity-added":function(t){t.isNode?this.owner.triggerEvent("add-node",t):t.nodeId&&(t.node=this.getNode(t.nodeId),t.node?t.triggerEvent("on-node",t.node):this.residentsAwaitingNode.push(t))}},methods:{addNode:function(t){this.map.push(t),this.nodes[t.id]=t},destroy:function(){var t=0;for(t=0;t<this.map.length;t++)this.map[t]instanceof o.a||this.map[t].recycle();s.a.recycle(this.map),s.a.recycle(this.residentsAwaitingNode)}},publicMethods:{getNode:function(){var t=0,e="",i="",n=arguments;if(1===n.length){if(n[0].isNode)return n[0];Array.isArray(n[0])&&(n=n[0])}for(t=0;t<n.length;t++)e+=i+n[t],i="|";return this.nodes[e]||null},getClosestNode:function(t,e,i){var n=0,r=a.a.setUp(t),s=a.a.setUp(),o=0,h=e||this.map,u=null,l=1/0;for(n=0;n<h.length;n++)if((o=s.setVector(r).subtractVector(h[n].position).magnitude())<l){if(i&&i.indexOf(h[n])>=0)break;l=o,u=h[n]}return r.recycle(),s.recycle(),u}}}))},function(t,e,i){"use strict";var n,r,s,o,a,h,u,l,c=i(0),f=i(2);e.a=(a=function(t,e,i){return function(){var n=e.getNode(t);return!!this.isPassable(n)&&(this.destinationNodes.length=0,this.destinationNodes.push(n),this.node?this.onEdge(n):this.distance=0,this.progress=0,this.setState("going-"+i),!0)}},h=function(t,e){var i=e.x-t.x,n=e.y-t.y,r=e.z-t.z;return Math.sqrt(i*i+n*n+r*r)},u=function(t,e,i,n){var r=e.x-t.x,s=e.y-t.y,o=0;return t.rotation&&e.rotation?((r=(t.rotation+180)%360)*(1-n)+(s=(e.rotation+180)%360)*n+180)%360:i?(o=Math.acos(r/i),s<0&&(o=2*Math.PI-o),180*o/Math.PI):o},l=function(t,e,i,n){return e*(1-t)+i*t+n},Object(f.a)({id:"NodeResident",publicProperties:{speed:0},initialize:function(t){var e=t.offset||this.owner.nodeOffset||{};this.nodeId=this.owner.nodeId=t.nodeId||this.owner.nodeId,this.neighbors={},this.friendlyNodes=t.nodes||null,this.friendlyEntities=t.shares||null,this.snapToNodes=t.snapToNodes||!1,this.updateOrientation=t.updateOrientation||!1,this.distance=0,this.buffer=t.buffer||0,this.progress=0,this.offset={x:e.x||0,y:e.y||0,z:e.z||0},this.destinationNodes=c.a.setUp(),this.algorithm=t.algorithm||h,this.state=this.owner.state,this.state.set("moving",!1),this.state.set("on-node",!1),this.currentState=""},events:{"set-algorithm":function(t){this.algorithm=t||h},"handle-logic":function(t){var e=0,i=0,n=0,r=null,s=null;if(this.owner.node||(s=c.a.setUp(this.owner.x,this.owner.y),this.owner.triggerEvent("on-node",this.owner.parent.getClosestNode(s)),c.a.recycle(s),this.owner.triggerEvent("in-location",this.owner)),this.followEntity?(r=this.followEntity.node||this.followEntity)&&r.isNode&&r!==this.node?(this.lag=0,this.state.set("moving",this.gotoNode()),this.followDistance&&(n=this.lag)):this.followEntity=null:n=this.speed*t.delta,this.blocked&&(this.blocked=!1,this.goingToNode&&this.owner.triggerEvent("goto-closest-node",this.goingToNode)),this.destinationNodes.length){if(this.state.set("moving",0!==this.speed),this.node)this.onEdge(this.destinationNodes[0]);else if(!this.lastNode&&(this.owner.triggerEvent("on-node",this.destinationNodes[0]),this.destinationNodes.shift(),!this.destinationNodes.length))return void this.state.set("moving",!1);if(this.snapToNodes){for(e=0;e<this.destinationNodes.length;e++)this.owner.triggerEvent("on-node",this.destinationNodes[e]);this.destinationNodes.length=0}else for(;this.destinationNodes.length&&n;)this.progress+n>=this.distance?(r=this.destinationNodes[0],n-=this.distance-this.progress,this.progress=0,this.destinationNodes.shift(),this.owner.triggerEvent("on-node",r),this.destinationNodes.length&&n&&this.onEdge(this.destinationNodes[0])):(this.progress+=n,i=this.progress/this.distance,this.owner.x=l(i,this.lastNode.x,this.destinationNodes[0].x,this.offset.x),this.owner.y=l(i,this.lastNode.y,this.destinationNodes[0].y,this.offset.y),this.owner.z=l(i,this.lastNode.z,this.destinationNodes[0].z,this.offset.z),this.updateOrientation&&(this.owner.rotation=u(this.lastNode,this.destinationNodes[0],this.distance,i)),n=0)}else this.state.set("moving",!1)},"on-node":function(t){var e=0,i=null;for(this.owner.node=this.node=t,this.node.removeFromEdge(this.owner),this.lastNode&&this.lastNode.removeFromEdge(this.owner),this.node.addToNode(this.owner),this.setState("on-node"),this.owner.x=this.node.x+this.offset.x,this.owner.y=this.node.y+this.offset.y,this.owner.z=this.node.z+this.offset.z,this.updateOrientation&&this.node.rotation&&(this.owner.rotation=this.node.rotation),this.owner.triggerEvent("set-directions"),this.friendlyNodes&&this.friendlyNodes[t.type]&&this.owner.trigger(this.friendlyNodes[t.type],t),i=t.contains,e=0;e<i.length;e++)this.owner!==i[e]&&(i[e].triggerEvent("with-"+this.owner.type,this.owner),this.owner.triggerEvent("with-"+i[e].type,i[e]))},"leave-node":function(){this.node&&(this.node.removeFromNode(this.owner),this.owner.triggerEvent("left-node",this.node),this.owner.triggerEvent("remove-directions")),this.lastNode=this.node,this.node=null},"goto-node":function(t){this.gotoNode(t)},follow:function(t){t.entity?(this.followDistance=t.distance,this.followEntity=t.entity):(this.followDistance=0,this.followEntity=t)},"goto-closest-node":(r=function(t,e){var i=0;for(i=0;i<e.length;i++)if(e[i]===t)return!0;return!1},s=function(t,e){return t.type===e},o=function(t,e){return t.type===e.type},function(t){var e=null,i=this.node||this.lastNode,n=null,a=t.steps||0,h=null;this.goingToNode=t,n="string"==typeof t?s:"string"==typeof t.type?o:r,i&&t&&!n(i,t)&&(h=c.a.setUp(),(e=this.traverseNode({depth:20,origin:i,position:i,test:n,destination:t,nodes:h,shortestPath:1/0,distance:0,found:!1,algorithm:this.algorithm,blocked:!1})).distance-=this.progress,e.found?this.followEntity&&this.followDistance?e.distance+(this.followEntity.progress||0)>this.followDistance?(this.lag=e.distance+(this.followEntity.progress||0)-this.followDistance,this.setPath(e,a)):this.lag=0:this.setPath(e,a):e.blocked&&(this.blocked=!0),c.a.recycle(h))}),"set-directions":function(){var t="",e=0,i=null,n=this.node,r=null;for(t in this.owner.triggerEvent("remove-directions"),n.neighbors)if(n.neighbors.hasOwnProperty(t)&&(this.neighbors[t]=a(n.neighbors[t],n.map,t),this.addEventListener(t,this.neighbors[t]),r=n.map.getNode(n.neighbors[t])))for(i=r.contains,e=0;e<i.length;e++)i[e].triggerEvent("next-to-"+this.owner.type,this.owner),this.owner.triggerEvent("next-to-"+i[e].type,i[e])},"remove-directions":function(){var t="";for(t in this.neighbors)this.neighbors.hasOwnProperty(t)&&(this.removeEventListener(t,this.neighbors[t]),delete this.neighbors[t])}},methods:{gotoNode:(n=function(t,e){return t===e},function(t){var e=null,i=this.node||this.lastNode,r=null,s=!1;return!t&&this.followEntity&&(t=this.followEntity.node||this.followEntity.lastNode||this.followEntity),i&&t&&this.node!==t&&(r=c.a.setUp(),(e=this.traverseNode({depth:20,origin:i,position:i,test:n,destination:t,nodes:r,shortestPath:1/0,distance:0,found:!1,algorithm:this.algorithm,blocked:!1})).distance-=this.progress,e.found?this.followEntity&&this.followDistance?e.distance+(this.followEntity.progress||0)>this.followDistance?(this.lag=e.distance+(this.followEntity.progress||0)-this.followDistance,this.setPath(e),s=!0):this.lag=0:(this.setPath(e),s=!0):e.blocked&&(this.blocked=!0),c.a.recycle(r)),s}),isPassable:function(t){return t&&this.node!==t&&(!this.friendlyNodes||void 0!==this.friendlyNodes[t.type])&&(!t.contains.length||function(t,e){var i=0,n=0,r=!1;if(null===e)return!0;for(i=0;i<t.length;i++){for(n=0;n<e.length;n++)t[i].type===e[n]&&(r=!0);if(!r)return!1;r=!1}return!0}(t.contains,this.friendlyEntities))},traverseNode:function(t){var e=1,i="",n=t.position.map,r=null,s=null,o=null,a=null,u=t.algorithm||h,l={shortestPath:1/0,found:!1,blocked:!1},f=!0,d=!1;if(0===t.depth||t.distance>t.shortestPath)return t;if(t.test(t.position,t.destination))return t.found=!0,t.shortestPath=t.distance,t;for(o=t.nodes,e=1;e<o.length-1;e++)if(o[e]===t.position)return t;for(i in r=t.position.neighbors)r.hasOwnProperty(i)&&(s=n.getNode(r[i]),d=!0,this.isPassable(s)&&((o=Object(c.b)(t.nodes)).push(s),a=this.traverseNode({depth:t.depth-1,origin:t.origin,position:s,destination:t.destination,test:t.test,algorithm:u,nodes:o,shortestPath:t.shortestPath,distance:t.distance+u(t.position,s),gateway:t.gateway||i,found:!1,blocked:!1}),c.a.recycle(o),a.found&&l.shortestPath>a.shortestPath&&(l=a),f=!1));return l.blocked=d&&f,l},setPath:function(t,e){t.nodes[0]===this.node&&t.nodes.shift(),c.a.recycle(this.destinationNodes),this.destinationNodes=Object(c.b)(t.nodes),e&&(this.destinationNodes.length=Math.min(e,this.destinationNodes.length))},setState:function(t){"on-node"===t?this.state.set("on-node",!0):(this.state.set("on-node",!1),this.currentState&&this.state.set(this.currentState,!1),this.currentState=t,this.state.set(t,!0))},onEdge:function(t){this.distance=h(this.node,t),this.updateOrientation&&(this.owner.rotation=u(this.node,t,this.distance,this.progress/this.distance)),this.node.addToEdge(this.owner),t.addToEdge(this.owner),this.owner.triggerEvent("leave-node")},destroy:function(){c.a.recycle(this.destinationNodes),this.destinationNodes=null,this.state=null}}}))},function(t,e,i){"use strict";var n,r,s,o,a,h,u,l,c,f,d,p=i(0),g=i(7),v=i(9),y=i(2),m=i(41);e.a=(u=v.a.setUp(0,0,1),l=v.a.setUp(1,0,0),c={identity:[[1,0,0],[0,1,0],[0,0,1]],horizontal:[[-1,0,0],[0,1,0],[0,0,-1]],vertical:[[1,0,0],[0,-1,0],[0,0,-1]],diagonal:[[0,1,0],[1,0,0],[0,0,-1]],"diagonal-inverse":[[0,-1,0],[-1,0,0],[0,0,-1]],"rotate-90":[[0,-1,0],[1,0,0],[0,0,1]],"rotate-180":[[-1,0,0],[0,-1,0],[0,0,1]],"rotate-270":[[0,1,0],[-1,0,0],[0,0,1]]},n=function(t,e,i){var n=0,r=0;for(n=0;n<t.length;n++)r+=t[n]*i[n][e];return r},f=function(t,e,i){var r=0,s=0,o=p.a.setUp();for(r=0;r<t.length;r++)for(s=0;s<t[0].length;s++)o.push(n(t[r],s,e));for(r=0;r<t.length;r++)for(s=0;s<t[0].length;s++)i[r][s]=o.shift();p.a.recycle(o)},d=function(t){var e=0,i=0;for(e=0;e<3;e++)for(i=0;i<3;i++)t[e][i]=e===i?1:0;return t},Object(y.a)({id:"Orientation",publicProperties:{scaleX:1,scaleY:1,rotation:0,orientation:0,orientationMatrix:null},initialize:function(){this.loadedOrientationMatrix=this.orientationMatrix,this.matrix=p.a.setUp(p.a.setUp(1,0,0),p.a.setUp(0,1,0),p.a.setUp(0,0,1)),this.matrixTween=p.a.setUp(p.a.setUp(1,0,0),p.a.setUp(0,1,0),p.a.setUp(0,0,1)),this.relocationMessage=g.a.setUp("position",null),this.vectors=p.a.setUp(),this.inverses=p.a.setUp(),this.tweens=p.a.setUp(),this.orientationVector=function(t,e){var i=v.a.setUp(1,0,0),n=t.owner,r=p.a.setUp(p.a.setUp(1,0,0),p.a.setUp(0,1,0),p.a.setUp(0,0,1));return Object.defineProperty(n,"orientationMatrix",{get:function(){return f(t.matrixTween,t.matrix,d(r)),r},enumerable:!0}),delete n.orientation,Object.defineProperty(n,"orientation",{get:function(){return i.signedAngleTo(l,u)},set:function(t){i.setVector(l).rotate(t)},enumerable:!0}),Object.defineProperty(n,"rotation",{get:function(){return n.orientation/Math.PI*180},set:function(t){n.orientation=t*Math.PI/180},enumerable:!0}),e&&("number"!=typeof e?i.set(e):i.rotate(e)),i}(this,this.orientation),this.owner.triggerEvent("orient-vector",this.orientationVector),this.owner.state.set("reorienting",!1)},events:{load:function(){this.loadedOrientationMatrix?this.transform(this.loadedOrientationMatrix):(this.scaleX&&this.scaleX<0&&(this.scaleX=-this.scaleX,this.transform("horizontal")),this.scaleY&&this.scaleY<0&&(this.scaleY=-this.scaleY,this.transform("vertical")),this.rotation&&((this.rotation+270)%360==0?(this.rotation=0,this.transform("rotate-90")):(this.rotation+180)%360==0?(this.rotation=0,this.transform("rotate-180")):(this.rotation+90)%360==0&&(this.rotation=0,this.transform("rotate-270")))),delete this.loadedOrientationMatrix},"handle-logic":function(t){var e=this.tweens.length,i=t.delta,n=this.owner.state,r=null,s=null,o=this.relocationMessage;if(e){for(r=p.a.setUp(),n.set("reorienting",!0),d(this.matrixTween);e--;)this.updateTween(this.tweens[e],i)&&r.push(Object(p.c)(this.tweens,e));for(e=this.vectors.length;e--;)this.updateVector(this.vectors[e],this.inverses[e]);for(e=r.length;e--;)s=r[e],this.transform(s.endMatrix),s.anchor&&(s.offset.multiply(s.endMatrix).addVector(s.anchor),o.position=s.offset,this.owner.triggerEvent("relocate-entity",o),s.recycleOffset&&s.offset.recycle()),s.onFinished(s.endMatrix),s.recycle();p.a.recycle(r)}else n.get("reorienting")&&(d(this.matrixTween),n.set("reorienting",!1))},"complete-tweens":function(){var t=0;for(t=0;t<this.tweens.length;t++)this.tweens[t].time=this.tweens[t].endTime},"drop-tweens":function(){var t=0;for(t=this.tweens.length;t--;)this.tweens[t].offset&&this.tweens[t].offset.recycle();for(this.tweens.length=0,t=this.vectors.length;t--;)this.updateVector(this.vectors[t],this.inverses[t])},"orient-vector":function(t){var e=t.aligned||!1;t.vector&&(t=t.vector),-1===this.vectors.indexOf(t)&&(e||t.multiply(this.matrix),this.vectors.push(t),this.inverses.push(v.a.setUp()))},"remove-vector":function(t){var e=this.vectors.indexOf(t);e>=0&&(Object(p.c)(this.vectors,e),Object(p.c)(this.inverses,e).recycle())},"tween-transform":(o=function(){},a=function(){return!0},h=function(t){return t},function(t){var e=null,i=t.angle||0,n=t.matrix,r=g.a.setUp("transform",t.transform,"anchor",t.anchor,"endTime",t.time||0,"time",0,"tween",t.tween||h,"onFinished",t.onFinished||o,"beforeTick",t.beforeTick||a,"afterTick",t.afterTick||o);if(n||(n=c[t.transform]),r.endMatrix=n,!i&&0===t.transform.indexOf("rotate"))switch(t.transform){case"rotate-90":i=Math.PI/2;break;case"rotate-180":i=Math.PI;break;case"rotate-270":i=-Math.PI/2;break;default:i=(e=Object(m.a)(t.transform,"-"))[1]/180*Math.PI,p.a.recycle(e)}r.angle=i,t.anchor&&(r.offset=t.offset,r.offset||(r.offset=this.owner.position.copy().subtractVector(t.anchor,2),r.recycleOffset=!0)),this.tweens.push(r)}),transform:function(t){this.transform(t)},"prepend-transform":function(t){this.transform(t)},"append-transform":function(t){this.transform(t,!0)},"replace-transform":function(t){Array.isArray(t)?this.replace(t):"string"==typeof t&&c[t]&&this.replace(c[t])}},methods:{transform:function(t,e){Array.isArray(t)?this.multiply(t,e):"string"==typeof t&&c[t]&&this.multiply(c[t],e)},multiply:function(t,e){var i=0;for(e?f(this.matrix,t,this.matrix):f(t,this.matrix,this.matrix),i=0;i<this.vectors.length;i++)this.vectors[i].multiply(t),this.inverses[i].multiply(t);this.owner.triggerEvent("orientation-updated",t)},replace:(s=function(t,e,i,n){return t*n-e*i},function(t){var e,i,n,r=(e=this.matrix,i=p.a.setUp(p.a.setUp(),p.a.setUp(),p.a.setUp()),n=1/function(t){var e=0,i=0;for(e=0;e<3;e++)i+=t[e][0]*t[(e+1)%3][1]*t[(e+2)%3][2],i-=t[e][2]*t[(e+1)%3][1]*t[(e+2)%3][0];return i}(e),i[0].push(s(e[1][1],e[1][2],e[2][1],e[2][2])*n),i[0].push(s(e[0][2],e[0][1],e[2][2],e[2][1])*n),i[0].push(s(e[0][1],e[0][2],e[1][1],e[1][2])*n),i[1].push(s(e[1][2],e[1][0],e[2][2],e[2][0])*n),i[1].push(s(e[0][0],e[0][2],e[2][0],e[2][2])*n),i[1].push(s(e[0][2],e[0][0],e[1][2],e[1][0])*n),i[2].push(s(e[1][0],e[1][1],e[2][0],e[2][1])*n),i[2].push(s(e[0][1],e[0][0],e[2][1],e[2][0])*n),i[2].push(s(e[0][0],e[0][1],e[1][0],e[1][1])*n),i);this.multiply(r),this.multiply(t),p.a.recycle(r,2)}),updateTween:(r=function(t,e,i){return t*(1-i)+e*i},function(t,e){var i,n,s=1,o=0,a=0,h=1,u=1,l=0,c=t.endMatrix,d=null,g=null;return t.beforeTick(t.time)&&(t.time+=e),t.time>=t.endTime||(i=t.tween(t.time/t.endTime),t.angle?(l=i*t.angle,s=h=Math.cos(l),a=-(o=Math.sin(l))):(s=r(s,c[0][0],i),o=r(o,c[1][0],i),a=r(a,c[0][1],i),h=r(h,c[1][1],i),u=r(u,c[2][2],i)),n=p.a.setUp(p.a.setUp(s,a,0),p.a.setUp(o,h,0),p.a.setUp(0,0,u)),f(this.matrixTween,n,this.matrixTween),t.anchor&&(d=v.a.setUp(t.offset).multiply(1-i),g=v.a.setUp(t.offset).multiply(i),this.owner.triggerEvent("relocate-entity",{position:d.add(g).multiply(n).addVector(t.anchor)}),d.recycle(),g.recycle()),t.afterTick(i,n),p.a.recycle(n,2),!1)}),updateVector:function(t,e){e.setVector(t.add(e)),t.multiply(this.matrixTween),e.subtractVector(t)},destroy:function(){p.a.recycle(this.vectors),this.vectors=null,p.a.recycle(this.inverses),this.inverses=null,p.a.recycle(this.tweens),this.tweens=null,this.orientationVector.recycle(),this.orientationVector=null,p.a.recycle(this.orientationMatrix,2),p.a.recycle(this.matrix,2),this.matrix=null,p.a.recycle(this.matrixTween,2),this.matrixTween=null,this.relocationMessage.recycle(),this.relocationMessage=null}}}))},function(t,e,i){"use strict";var n,r=i(2);e.a=(n=function(t){return function(e,i){this.owner.trigger(t[Math.floor(Math.random()*t.length)],e,i)}},Object(r.a)({id:"RandomEvents",initialize:function(t){var e="";if(t.events)for(e in t.events)t.events.hasOwnProperty(e)&&this.addEventListener(e,n(t.events[e]))}}))},function(t,e,i){"use strict";var n=i(11),r=i(2);e.a=Object(r.a)({id:"RelativePosition",properties:{cameraSizes:null},publicProperties:{bottom:null,left:null,right:null,top:null,scaleX:1,scaleY:1,x:0,y:0},initialize:function(){this.aabb=n.a.setUp(),this.lastBottom=null,this.lastLeft=null,this.lastRight=null,this.lastTop=null,this.cameraSizesIndex=-1},events:{"handle-logic":function(){var t=this.bottom,e=this.left,i=this.right,n=this.top;this.lastBottom===t&&this.lastLeft===e&&this.lastRight===i&&this.lastTop===n||(this.updatePosition(this.aabb),this.lastBottom=t,this.lastLeft=e,this.lastRight=i,this.lastTop=n)},"camera-update":function(t){this.aabb.set(t.viewport),this.cameraSizes&&this.checkCamera(this.aabb),this.updatePosition(this.aabb)}},methods:{checkCamera:function(t){var e=this.cameraSizes,i=0,n=t.width/t.height;for(i=0;i<e.length;i++)if(n>e[i].minRatio){i!==this.cameraSizesIndex&&(this.updateProperties(e[i]),this.cameraSizesIndex=i);break}},updateProperties:function(t){this.right="number"==typeof t.right?t.right:null,this.left="number"==typeof t.left?t.left:null,this.top="number"==typeof t.top?t.top:null,this.bottom="number"==typeof t.bottom?t.bottom:null,"number"==typeof t.x&&(this.x=t.x),"number"==typeof t.y&&(this.y=t.y),"number"==typeof t.scaleX&&(this.scaleX=t.scaleX),"number"==typeof t.scaleY&&(this.scaleY=t.scaleY)},updatePosition:function(t){var e=this.bottom,i=this.left,n=this.owner,r=this.right,s=this.top;"number"==typeof i?n.x=t.left+i:"number"==typeof r&&(n.x=t.right-r),"number"==typeof s?n.y=t.top+s:"number"==typeof e&&(n.y=t.bottom-e)},destroy:function(){this.aabb.recycle(),this.aabb=null}}})},function(t,e,i){"use strict";var n=i(0),r=i(2);e.a=Object(r.a)({id:"RelayFamily",properties:{events:null},initialize:function(){var t="";if(this.events)for(t in this.events)this.events.hasOwnProperty(t)&&this.addEventListener(t,this.broadcast.bind(this,null,this.events[t]));this.owner.familyLinks=n.a.setUp(this.owner)},events:{"link-family":function(t){var e=0,i=this.owner.familyLinks,r=Object(n.d)(Object(n.d)(n.a.setUp(),t),i);for(e=0;e<r.length;e++)r[e].familyLinks=r;this.broadcast(t,"family-members-added",i),this.broadcast(i,"family-members-added",t),n.a.recycle(i)},"entity-created":function(t){t.triggerEvent("link-family",this.owner.familyLinks)||(t.addComponent(new platypus.components.RelayFamily(t,{})),t.triggerEvent("link-family",this.owner.familyLinks))}},methods:{broadcast:function(t){var e=t||this.owner.familyLinks,i=0,r=Object(n.b)(arguments);for(r.shift(),i=0;i<e.length;i++)e[i].trigger.apply(e[i],r);n.a.recycle(r)},destroy:function(){var t=this.owner.familyLinks,e=t.indexOf(this.owner);e>=0&&Object(n.c)(t,e),this.broadcast(t,"family-member-removed",this.owner),this.events=null}}})},function(t,e,i){"use strict";var n,r=i(2);e.a=(n=function(){platypus.game.triggerOnChildren.apply(platypus.game,arguments)},Object(r.a)({id:"RelayGame",properties:{events:null},initialize:function(){var t="",e=this.events;if(e)for(t in e)e.hasOwnProperty(t)&&this.addEventListener(t,n.bind(this,e[t]))}}))},function(t,e,i){"use strict";var n=i(2),r=i(0),s={},o=function(){for(var t=this.channel,e=0;e<t.length;e++){var i;(i=t[e]).trigger.apply(i,arguments)}};e.a=Object(n.a)({id:"RelayLinker",properties:{linkId:"linked",events:null},initialize:function(){if(this.events)for(var t in this.events)this.events.hasOwnProperty(t)&&this.addEventListener(t,o.bind(this,this.events[t]));this.owner.linkId||(this.owner.linkId=this.linkId),this.channel=s[this.linkId],this.channel||(this.channel=s[this.linkId]=[])},events:{load:function(){this.channel.push(this.owner)}},methods:{destroy:function(){var t=this.channel.indexOf(this.owner);t>=0?Object(r.c)(this.channel,t):platypus.debug.warn("RelayLinker: Component destroyed, but entity not found on channel."),this.events=null}}})},function(t,e,i){"use strict";var n,r=i(2);e.a=(n=function(){var t=this.owner.parent;t&&t.trigger.apply(t,arguments)},Object(r.a)({id:"RelayParent",properties:{events:null},initialize:function(){var t="",e=this.events;if(e)for(t in e)e.hasOwnProperty(t)&&this.addEventListener(t,n.bind(this,e[t]))}}))},function(t,e,i){"use strict";var n,r=i(2);e.a=(n=function(){var t=this.owner;t.trigger.apply(t,arguments)},Object(r.a)({id:"RelaySelf",properties:{events:null},initialize:function(){var t="",e=this.events;if(e)for(t in e)e.hasOwnProperty(t)&&this.addEventListener(t,n.bind(this,e[t]))}}))},function(t,e,i){"use strict";var n,r,s=i(8),o=(i(42),i(0)),a=i(13),h=i.n(a),u=i(2),l={},c=function(t){var e,i,n=t.charCodeAt(0)||0,r=t.charCodeAt(1)||0,s=t.charCodeAt(2)||0;return r-=e=Math.min(n,r,s),s-=e,((n=204*(n-=e)/(i=Math.max(n,r,s,1))>>0)<<8)+((r=204*r/i>>0)<<4)+(s=204*s/i>>0)};e.a=(n=function(t,e,i,n,r,o,a,h){var u=(new s.f).beginFill(e,.1);switch(h&&u.lineStyle(h,e),t){case"rectangle":u.drawRect(i,n,r,o);break;case"circle":u.drawCircle(0,0,r)}return u.z=a,u},r=function(t){return"string"==typeof t?parseInt(t.replace("#",""),16):t},Object(u.a)({id:"RenderDebug",properties:{aabbColor:16746751,collisionColor:0,groupColor:65280,renderColor:255,width:100,height:100,offsetZ:1e4},initialize:function(){this.container=new s.e,this.parentContainer=this.owner.parent.worldContainer,this.parentContainer.addChild(this.container),this.parentContainer.reorder=!0,this.needsCameraCheck=!0,this.shapes=o.a.setUp(),this.isOutdated=!0,this.aabbColor=r(this.aabbColor),this.collisionColor=this.collisionColor?r(this.collisionColor):0,this.groupColor=r(this.groupColor),this.renderColor=r(this.renderColor)},events:{load:function(){h.a.dev||this.owner.removeComponent(this)},"camera-update":function(){this.needsCameraCheck=!0},"handle-render":function(){var t=null;this.isOutdated&&(this.updateSprites(),this.isOutdated=!1),this.owner.getCollisionGroupAABB&&(t=this.owner.getCollisionGroupAABB(),this.groupShape||(this.groupShape=n("rectangle",this.groupColor,-.5,-.5,1,1,this.offsetZ),this.container.addChild(this.groupShape)),this.groupShape.scaleX=t.width,this.groupShape.scaleY=t.height,this.groupShape.x=t.x-this.owner.x,this.groupShape.y=t.y-this.owner.y),this.update()},"orientation-updated":function(){this.isOutdated=!0},"collide-on":function(){this.isOutdated=!0},"collide-off":function(){this.isOutdated=!0}},methods:{update:function(){var t,e;t=this.owner.x,e=this.owner.y,this.container.z!==this.owner.z+1e-6&&(this.parentContainer.reorder=!0,this.container.z=this.owner.z+1e-6),this.container.setTransform(t,e,1,1,0,0,0),this.needsCameraCheck||(this.needsCameraCheck=this.lastX!==this.owner.x||this.lastY!==this.owner.y),this.needsCameraCheck&&(this.isOnCamera=this.owner.parent.isOnCanvas(this.container.getBounds(!1)),this.needsCameraCheck=!1),this.lastX=this.owner.x,this.lastY=this.owner.y,this.container.visible=this.isOnCamera},updateSprites:function(){var t=this.owner,e=this.offsetZ,i=0,r=0,s=this.width,o=this.height,a=null,h=null,u=null;for(i=0;i<this.shapes.length;i++)this.container.removeChild(this.shapes[i]);if(this.shapes.length=0,t.getAABB)for(r=0;r<t.collisionTypes.length;r++){var f=t.collisionTypes[r],d=this.collisionColor||l[f];for(d||(d=l[f]=c(f)),h=t.getAABB(f),s=this.initialWidth=h.width,o=this.initialHeight=h.height,a=t.getShapes(f),u=n("rectangle",this.aabbColor,h.left-t.x,h.top-t.y,s,o,e--),this.shapes.push(u),this.container.addChild(u),i=0;i<a.length;i++)s=a[i].width-2,o=a[i].height-2,u=n(a[i].type,d,a[i].offsetX-s/2,a[i].offsetY-o/2,a[i].radius?a[i].radius-2:s,o,e--,2),this.shapes.push(u),this.container.addChild(u)}else u=n("rectangle",this.renderColor,-s/2,-o/2,s,o,e--),this.shapes.push(u),this.container.addChild(u)},destroy:function(){var t=0;for(t=0;t<this.shapes.length;t++)this.container.removeChild(this.shapes[t]);o.a.recycle(this.shapes),this.parentContainer.removeChild(this.container),this.container=null}}}))},function(t,e,i){"use strict";var n=i(0),r=i(2);e.a=Object(r.a)({id:"RenderDestroyMe",properties:{animationId:"",animationIds:null},initialize:function(t){this.animationId?this.animationIds=n.a.setUp(t.animationId):this.animationIds&&(this.animationIds=Object(n.b)(this.animationIds))},events:{"animation-ended":function(t){(!this.animationIds||this.animationIds.indexOf(t)>=0)&&this.owner.parent.removeEntity(this.owner)}},methods:{destroy:function(){this.animationIds&&(n.a.recycle(this.animationIds),this.animationIds=null)}}})},function(t,e,i){"use strict";var n=i(8),r=i(2);e.a=Object(r.a)({id:"RenderProgress",properties:{backgroundColor:0,color:16777215,mirror:!1,flip:!1,width:100,height:20,regX:0,regY:0},publicProperties:{x:0,y:0,z:0},initialize:function(){var t=new n.f,e=new n.f,i=new n.e;this.parentContainer=null,this.background=t,this.progress=e,this.container=i,"string"==typeof this.backgroundColor&&(this.backgroundColor=+this.backgroundColor.replace("#","0x")),"string"==typeof this.color&&(this.color=+this.color.replace("#","0x")),t.f(this.backgroundColor).drawRect(-this.regX,-this.regY,this.width,this.height),e.f(this.color).drawRect(-this.regX,-this.regY,this.width,this.height),e.scale=new n.i(1e-4,1),i.addChild(t),i.addChild(e)},events:{"handle-render-load":function(t){!this.parentContainer&&t&&t.container&&(this.parentContainer=t.container,this.parentContainer.addChild(this.container))},"handle-render":function(t){this.container&&(this.parentContainer||(t&&t.container?(this.parentContainer=t.container,this.parentContainer.addChild(this.container)):(platypus.debug.warn('No PIXI Stage, removing ProgressRender component from "'+this.owner.type+'".'),this.owner.removeComponent(this))),this.container.x=this.x,this.container.y=this.y,this.container.z=this.z)},"update-progress":function(t){isNaN(t)?"number"==typeof t.fraction?this.progress.scale.x=t.fraction:"number"==typeof t.total&&"number"==typeof t.progress&&(this.progress.scale.x=t.progress/t.total):this.progress.scale.x=t}},methods:{destroy:function(){this.parentContainer&&(this.parentContainer.removeChild(this.container),this.parentContainer=null),this.container=null}}})},function(t,e,i){"use strict";var n,r,s,o,a,h,u,l=i(8),c=i(0),f=i(7),d=i(78),p=i(42),g=i(27),v=i(2);e.a=(a=l.c,h=function(t){return t},u=function(t,e,i){return i.includes(e)?t:null},Object(v.a)({id:"RenderSpine",properties:{animationStates:null,animationEvents:null,animationMap:null,skinMap:null,localScaleX:1,localScaleY:1,mask:null,interactive:!1,mixTimes:0,offsetX:0,offsetY:0,offsetZ:0,atlas:"",skeleton:null,mirror:!1,flip:!1,visible:!0,eventBased:!1,preMultipliedAlpha:!0,stateBased:!0},publicProperties:{dragMode:!1,scaleX:1,scaleY:1,skewX:0,skewY:0,x:0,y:0,z:0},initialize:(r=function(t,e,i,n){var r=function(t,e){var i=platypus.assetCache.get(t.substring(t.lastIndexOf("/")+1,t.lastIndexOf(".")));return i||platypus.debug.warn('RenderSpine: "'+t+'" is not a loaded asset.'),new a(i,{alphaMode:e?l.a.PMA:l.a.UNPACK})}(i,t);n(r),r.isLoading?r.on("loaded",e):e()},s=function(t,e){this.owner.triggerEvent("animation-ended",this.currentAnimations[t],e)},o=function(t,e){var i=e.data.name;this.playAnimation(i)&&this.spine.update(1e-6),this.owner.trigger(i,e.data)},function(t,e){var i=this,n=l.spine,a=n&&n.core,v=n&&n.Spine;if(!v||!a)return platypus.debug.error("RenderSpine requires `PIXI.spine` to function."),!1;var y,m,b=a.TextureAtlas,_=a.AtlasAttachmentLoader,w=a.SkeletonJson,x=platypus.game.settings,E=x.atlases[this.atlas],T=x.skeletons[this.skeleton],S=new w(new _(new b(E,r.bind(null,this.preMultipliedAlpha,e)))).readSkeletonData(T),O=this.spine=new v(S),A=function(t,e){var i=null,n="";if(t)return t;for(n in i={},e)e.hasOwnProperty(n)&&(i[n]=n);return i}(this.animationMap,T.animations),P="";if(O.state.addListener({event:o.bind(this),complete:s.bind(this)}),O.autoUpdate=!1,this.stateBased=A&&this.stateBased,this.eventBased=A&&this.eventBased,A){var C=f.a.setUp("animationEvents",this.eventBased?this.animationEvents||A:null,"animationStates",this.stateBased?this.animationStates||A:null,"forcePlayThrough",this.forcePlayThrough,"component",this);this.owner.addComponent(new d.a(this.owner,C)),C.recycle(),P=A.default||""}if(this.mixTimes&&this.setMixTimes(this.mixTimes),this.currentAnimations=c.a.setUp(),P&&this.playAnimation(P),O.x=this.offsetX,O.y=this.offsetY,O.z=this.offsetZ,O.scale.x=this.localScaleX,O.scale.y=this.localScaleY,this.skinMap){var M=function(t){this.currentSkin!==t&&(this.currentSkin=t,this.spine.skeleton.setSkin(null),this.spine.skeleton.setSlotsToSetupPose(),this.spine.state.apply(this.spine.skeleton),t&&(this.spine.skeleton.setSkinByName(t),this.spine.skeleton.setSlotsToSetupPose(),this.spine.state.apply(this.spine.skeleton)))},k=this.skinMap;if(this.currentSkin=null,this.eventBased)for(var I in k)k.hasOwnProperty(I)&&this.addEventListener(I,M.bind(this,k[I]));if(this.stateBased){for(var L in this.state=this.owner.state,this.stateChange=!0,this.checkStates=c.a.setUp(),this.skins=c.a.setUp(),k)k.hasOwnProperty(L)&&(this.checkStates.push((y=L,m=k[L],"default"===y?h.bind(null,m):u.bind(null,m,g.a.setUp(y)))),this.skins.push(L));this.addEventListener("state-changed",(function(){i.stateChange=!0})),this.addEventListener("handle-render",(function(){if(i.stateChange){for(var t=0;t<i.checkStates.length;t++){var e=i.checkStates[t](i.state);if(null!==e){M.call(i,e);break}}i.stateChange=!1}}))}}if(this.owner.container)this.addToContainer();else{var D=f.a.setUp("interactive",this.interactive,"mask",this.mask,"mirror",this.mirror,"flip",this.flip,"visible",this.visible,"cache",this.cache,"ignoreOpacity",this.ignoreOpacity,"scaleX",this.scaleX,"scaleY",this.scaleY,"skewX",this.skewX,"skewY",this.skewY);this.owner.addComponent(new p.a(this.owner,D,this.addToContainer.bind(this))),D.recycle()}return!0}),events:{"handle-render":function(t){this.spine&&(this.owner.triggerEvent("update-animation",!0),this.spine.update(t.delta/1e3))},"set-mix-times":function(t){this.setMixTimes(t)},hide:function(){this.visible=!1},show:function(){this.visible=!0},"stop-animation":function(t){this.stopAnimation(t)},"play-animation":function(t,e){this.playAnimation(t,e)}},methods:{addToContainer:function(){var t=this.owner.container;t.addChild(this.spine),t.reorder=!0},playAnimation:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.spine,n=0,r=t;r;){var s=r.indexOf(";"),o=s>=0?r.substring(0,s):r;r=s>=0?r.substring(s+1):"",i.state.hasAnimation(o)&&(this.currentAnimations[n]=o,i.state.setAnimation(n,o,e)),n+=1}return n},stopAnimation:function(t){for(var e=this.spine,i=0,n=t;n;){var r=n.indexOf(";"),s=r>=0?n.substring(0,r):n;n=r>=0?n.substring(r+1):"",e.state.hasAnimation(s)&&(this.currentAnimations[i]=s,e.state.setAnimation(i,s,!1)),i+=1}return this.paused=!0,i},setMixTimes:function(t){var e=this.spine,i=e.spineData.animations,n=0,r=0,s=0,o="",a=e.stateData;if("number"==typeof t)for(r=i.length;r--;)for(s=i.length;s--;)r!==s&&a.setMix(i[r].name,i[s].name,t);else for(o in t)t.hasOwnProperty(o)&&(n=o.indexOf(":"))>=0&&a.setMix(o.substring(0,n),o.substring(n+1),t[o]);this.mixTimes=a.animationToMixTime},destroy:function(){this.owner.container.removeChild(this.spine),this.spine.destroy(),this.spine=null,this.mixTimes=null}},getAssetList:(n=function(t,e){var i=c.a.setUp();if(t){var n=/\r/g,r=t.replace(n,"").split("\n"),s=r.length;if(1===r.length){if(!(t=e[t]))return i;s=(r=t.replace(n,"").split("\n")).length}for(;s--;)".png"===r[s].substr(r[s].length-4)&&i.push(r[s])}return i},function(t,e,i){var r=null,s=0,o=null,a=platypus.game.settings.atlases,h=t.atlas||e.atlas||i.atlas;if(Array.isArray(h)){for(s=h.length,o=c.a.setUp();s--;)r=n(h[s],a),Object(c.d)(o,r),c.a.recycle(r);return o}return n(h,a)})}))},function(t,e,i){"use strict";var n,r=i(42),s=i(8),o=i(2);e.a=(n={horizontal:{left:0,middle:.5,center:.5,right:1},vertical:{top:0,middle:.5,center:.5,bottom:1}},Object(o.a)({id:"RenderText",properties:{offsetX:0,offsetY:0,offsetZ:0,text:"",style:null},initialize:function(t){var e=n.horizontal[this.style.align],i=n.vertical[this.style.verticalAlign];this.sprite=new s.o(this.text,this.style),this.sprite.anchor.x="number"==typeof e?e:.5,this.sprite.anchor.y="number"==typeof i?i:1,this.sprite.x=this.offsetX,this.sprite.y=this.offsetY,this.sprite.z=this.offsetZ,this.owner.container?this.addToContainer():this.owner.addComponent(new r.a(this.owner,t,this.addToContainer.bind(this)))},events:{"set-text":function(t){if("string"==typeof t)this.sprite.text=t;else{if(t.style){var e=this.sprite.style;for(var i in t.style)t.style.hasOwnProperty(i)&&(e[i]=t.style[i])}"string"==typeof t.text&&(this.sprite.text=t.text)}}},methods:{addToContainer:function(){var t=this.owner.container;t.addChild(this.sprite),t.reorder=!0},destroy:function(){this.owner.container.removeChild(this.sprite),this.sprite.destroy(),this.sprite=null}}}))},function(t,e,i){"use strict";var n,r,s,o,a,h,u,l,c=i(8),f=i(0),d=i(11),p=i(55),g=i(42),v=i(13),y=i.n(v),m=i(2),b=i(19);e.a=(r=function(){return null},s=d.a.setUp(),o=function(t,e){return t.z-e.z},a=function(t){for(var e=1;e<t;)e*=2;return e},u={getNext:r,destroy:r},(l=(h=function(t,e,i){this.id=e,this.instances=f.a.setUp(),this.index=0,this.tileSpriteSheet=t,this.getNext=this.initializeAndGetNext,this.uninitializedTiles=i,i.push(this)}).prototype).initializeAndGetNext=function(){return this.initialize(),this.index+=1,this.instances[0]},l.initialize=function(){var t=+this.id.substring(4),e="tile"+(268435455&t),i=new c.n((this.tileSpriteSheet._animations[e]||this.tileSpriteSheet._animations.default).texture);!function(t,e){if(2147483648&t&&(e.scale.x=-1),1073741824&t&&(e.scale.y=-1),536870912&t){var i=e.scale.x;e.scale.x=e.scale.y,e.scale.y=-i,e.rotation=Math.PI/2}}(t,i),i.template=this,this.instances.push(i),Object(f.c)(this.uninitializedTiles,this.uninitializedTiles.indexOf(this)),delete this.getNext},l.getNext=function(){var t=this.instances[this.index],e=null;return t||(e=this.instances[0],(t=this.instances[this.index]=new c.n(e.texture)).scale=e.scale,t.rotation=e.rotation,t.anchor=e.anchor||e._animation.anchor),this.index+=1,t},l.clear=function(){this.index=0},l.destroy=function(){var t=0;for(t=0;t<this.instances.length;t++)this.instances[t].destroy();f.a.recycle(this.instances),this.recycle()},b.a.add(h,"Template",h,null,!0,y.a.dev),Object(m.a)({id:"RenderTiles",properties:{buffer:0,cacheAll:!1,entityCache:!1,imageMap:[],maximumBuffer:2048,scaleX:1,scaleY:1,spriteSheet:null,tileCache:!0,tileHeight:10,tileWidth:10,top:0,left:0},initialize:function(t){var e=this.imageMap;this.doMap=null,this.cachedDisplayObjects=null,this.populate=this.populateTiles,this.tiles={},this.renderer=platypus.game.renderer,this.tilesSprite=null,this.cacheTexture=null,this.mapContainer=null,this.laxCam=d.a.setUp(),this.worldWidth=this.tileWidth,this.worldHeight=this.tileHeight,this.cache=d.a.setUp(),this.cachePixels=d.a.setUp(),this.uninitializedTiles=f.a.setUp(),this.spriteSheet=p.a.formatSpriteSheet(this.spriteSheet),this.tileSpriteSheet=new p.a(this.spriteSheet),this.tileContainer=new c.e,this.mapContainer=new c.e,this.mapContainer.addChild(this.tileContainer),this.reorderedStage=!1,this.updateCache=!1,this.imageMap=f.a.setUp(this.createMap(e)),this.tilesWidth=this.imageMap[0].length,this.tilesHeight=this.imageMap[0][0].length,this.layerWidth=this.tilesWidth*this.tileWidth,this.layerHeight=this.tilesHeight*this.tileHeight,this.cacheWidth=Math.min(a(this.layerWidth+2),this.maximumBuffer),this.cacheHeight=Math.min(a(this.layerHeight+2),this.maximumBuffer),this.tileCache||(this.buffer=0,this.cacheAll=!1),this.ready=!1,this.owner.container?this.addToContainer():this.owner.addComponent(new g.a(this.owner,t,this.addToContainer.bind(this)))},events:{"cache-sprite":function(t){this.cacheSprite(t)},"peer-entity-added":function(t){this.cacheSprite(t)},"add-tiles":function(t){var e=t.imageMap;e&&(this.imageMap.push(this.createMap(e)),this.updateCache=!0)},"change-tile":function(t,e,i,n){var r=this.imageMap;r&&(this.updateTile(t,r[n||0],e,i),this.updateCache=!0)},"camera-loaded":function(t){this.worldWidth=t.world.width,this.worldHeight=t.world.height,this.buffer&&!this.cacheAll&&this.updateBufferRegion(t.viewport)},"camera-update":function(t){this.ready&&this.updateCamera(t)},"handle-render":function(){this.updateCache?(this.updateCache=!1,this.cacheGrid?this.updateGrid():this.update(this.cacheTexture,this.cache)):this.uninitializedTiles.length&&this.uninitializedTiles[0].initialize()}},methods:{addToContainer:function(){var t=this.container=this.owner.container,e=this.mapContainer,i=null,n=this.owner.z;t.reorder=!0,this.ready=!0,this.updateRegion(0),this.tileCache?(this.mapContainerWrapper=new c.e,this.mapContainerWrapper.addChild(e),this.layerWidth<=this.cacheWidth&&this.layerHeight<=this.cacheHeight?(this.cacheAll=!0,this.render=this.renderCache,this.cacheTexture=c.l.create(this.cacheWidth,this.cacheHeight),this.tilesSprite=i=new c.n(this.cacheTexture),i.scale.x=this.scaleX,i.scale.y=this.scaleY,i.z=n,this.cache.setBounds(0,0,this.tilesWidth-1,this.tilesHeight-1),this.update(this.cacheTexture,this.cache),t.addChild(i)):this.cacheAll||this.layerWidth<=2*this.cacheWidth&&this.layerHeight<=this.cacheHeight||this.layerWidth<=this.cacheWidth&&this.layerHeight<=2*this.cacheHeight?(this.cacheAll=!0,this.cacheWidth=Math.min(a(this.layerWidth+2),this.maximumBuffer),this.cacheHeight=Math.min(a(this.layerHeight+2),this.maximumBuffer),this.updateRegion(2),this.render=this.renderCacheWithExtrusion,this.cacheGrid=this.createGrid(t),this.updateCache=!0):(this.render=this.renderCache,this.cacheAll=!1,this.cacheTexture=c.l.create(this.cacheWidth,this.cacheHeight),this.tilesSprite=new c.n(this.cacheTexture),this.tilesSprite.scale.x=this.scaleX,this.tilesSprite.scale.y=this.scaleY,this.tilesSprite.z=n,this.cacheTexture.alternate=c.l.create(this.cacheWidth,this.cacheHeight),this.tilesSpriteCache=new c.n(this.cacheTexture.alternate),this.cacheTexture.alternate.alternate=this.cacheTexture,t.addChild(this.tilesSprite))):(this.render=r,e.scale.x=this.scaleX,e.scale.y=this.scaleY,e.x=this.left,e.y=this.top,e.z=n,t.addChild(e))},cacheSprite:function(t){var e=0,i=0,n=t.cacheRender,r=null,s=0,o=0,a=0,h=0;if(this.entityCache&&n){for(this.doMap||(this.doMap=f.a.setUp(),this.cachedDisplayObjects=f.a.setUp(),this.populate=this.populateTilesAndEntities),this.cachedDisplayObjects.push(n),(r=n.getBounds(n.transformMatrix)).x-=this.left,r.y-=this.top,s=Math.max(0,Math.floor(r.y/this.tileHeight)),o=Math.min(this.tilesHeight,Math.ceil((r.y+r.height)/this.tileHeight)),h=Math.max(0,Math.floor(r.x/this.tileWidth)),a=Math.min(this.tilesWidth,Math.ceil((r.x+r.width)/this.tileWidth)),e=h;e<a;e++)for(this.doMap[e]||(this.doMap[e]=f.a.setUp()),i=s;i<o;i++)this.doMap[e][i]||(this.doMap[e][i]=f.a.setUp()),this.doMap[e][i].push(n);t.removeComponent("RenderSprite"),this.updateCache=!0}},convertCamera:function(t){var e=this.worldWidth/this.scaleX,i=e-t.width,n=this.worldHeight/this.scaleY,r=n-t.height,s=this.laxCam;return e!==this.layerWidth&&i?s.moveX((t.left-this.left)*(this.layerWidth-t.width)/i+t.halfWidth+this.left):s.moveX(t.x),n!==this.layerHeight&&r?s.moveY((t.top-this.top)*(this.layerHeight-t.height)/r+t.halfHeight+this.top):s.moveY(t.y),t.width===s.width&&t.height===s.height||s.resize(t.width,t.height),s},createTile:function(t){return"tile-1"===t?u:h.setUp(this.tileSpriteSheet,t,this.uninitializedTiles)},createMap:function(t){var e=0,i=0,n="",r=null;if("string"!=typeof t[0][0])return t;for(r=f.a.setUp(),e=0;e<t.length;e++)for(r[e]=f.a.setUp(),i=0;i<t[e].length;i++)n=t[e][i],this.updateTile(n,r,e,i);return r},updateCamera:function(t){var e=0,i=0,n=!1,r=null,o=0,a=0,h=0,u=0,l=this.cache,c=this.cachePixels,f=t.viewport,d=this.buffer&&(f.width!==this.laxCam.width||f.height!==this.laxCam.height),p=s,g=this.convertCamera(f);if(!this.cacheAll&&(c.empty||!c.contains(g))&&this.imageMap.length>0&&(d&&this.updateBufferRegion(g),h=(o=this.cacheTilesWidth-1)/2,u=(a=this.cacheTilesHeight-1)/2,p.setAll(Math.round((g.x-this.left)/this.tileWidth-h)+h,Math.round((g.y-this.top)/this.tileHeight-u)+u,o,a),p.left<0?p.moveX(p.halfWidth):p.right>this.tilesWidth-1&&p.moveX(this.tilesWidth-1-p.halfWidth),p.top<0?p.moveY(p.halfHeight):p.bottom>this.tilesHeight-1&&p.moveY(this.tilesHeight-1-p.halfHeight),this.tileCache?!l.empty&&p.contains(l)||(this.tilesSpriteCache.texture=this.cacheTexture,this.cacheTexture=this.cacheTexture.alternate,this.tilesSprite.texture=this.cacheTexture,this.update(this.cacheTexture,p,this.tilesSpriteCache,l)):this.update(null,p),c.setAll((l.x+.5)*this.tileWidth+this.left,(l.y+.5)*this.tileHeight+this.top,(l.width+1)*this.tileWidth,(l.height+1)*this.tileHeight)),this.cacheGrid)for(e=0;e<this.cacheGrid.length;e++)for(i=0;i<this.cacheGrid[e].length;i++)r=this.cacheGrid[e][i],c.setAll((e+.5)*this.cacheClipWidth+this.left,(i+.5)*this.cacheClipHeight+this.top,this.cacheClipWidth,this.cacheClipHeight),n=c.intersects(g),r.visible&&!n?r.visible=!1:!r.visible&&n&&(r.visible=!0),r.visible&&n&&(r.x=f.left-g.left+e*this.cacheClipWidth+this.left,r.y=f.top-g.top+i*this.cacheClipHeight+this.top);else this.tileCache&&(this.tilesSprite.x=f.left-g.left+l.left*this.tileWidth+this.left,this.tilesSprite.y=f.top-g.top+l.top*this.tileHeight+this.top)},updateTile:function(t,e,i,n){var r=null,s=this.tiles;t.id&&(t=t.id),(r=s[t])||null===r||(r=s[t]=this.createTile(t)),e[i][n]=r},createGrid:function(t){var e=this.cacheHeight,i=this.cacheWidth,n=this.cacheTilesHeight,r=this.cacheTilesWidth,s=0,o=0,h=null,u=this.scaleX,l=this.scaleY,d=this.tileHeight,p=this.tileWidth,g=this.tilesHeight,v=this.tilesWidth,y=0,m=0,b=this.owner.z,_=null,w=null,x=f.a.setUp();for(y=0;y<v;y+=r)for(_=f.a.setUp(),x.push(_),m=0;m<g;m+=n)o=Math.min(a((v-y)*p+2),i),s=Math.min(a((g-m)*d+2),e),(h=c.l.create(o,s)).frame=new c.k(1,1,((o-2)/p>>0)*p+1,((s-2)/d>>0)*d+1),(w=new c.n(h)).z=b,w.scale.x=u,w.scale.y=l,_.push(w),t.addChild(w),b-=1e-6;return x},updateRegion:function(t){var e=this.tileWidth*this.scaleX,i=this.tileHeight*this.scaleY,n=Math.min(this.tilesWidth,(this.cacheWidth-2)/e>>0),r=Math.min(this.tilesHeight,(this.cacheHeight-2)/i>>0);n||platypus.debug.warn('"'+this.owner.type+'" RenderTiles: The tiles are '+e+"px wide which is larger than "+(this.cacheWidth-2)+"px (maximum cache size of "+this.cacheWidth+"px minus a 2px edge bleed). Increase the maximum cache size or reduce tile size."),r||platypus.debug.warn('"'+this.owner.type+'" RenderTiles: The tiles are '+i+"px high which is larger than "+(this.cacheHeight-2)+"px (maximum cache size of "+this.cacheHeight+"px minus a 2px edge bleed). Increase the maximum cache size or reduce tile size."),this.cacheTilesWidth=n,this.cacheTilesHeight=r,this.cacheClipWidth=n*e,this.cacheClipHeight=r*i,this.tileCache&&(this.mapContainer.mask=(new c.f).beginFill(0).drawRect(0,0,this.cacheClipWidth+t,this.cacheClipHeight+t).endFill())},updateBufferRegion:function(t){var e=this.tileWidth*this.scaleX,i=this.tileHeight*this.scaleY;this.cacheTilesWidth=Math.min(this.tilesWidth,Math.ceil((t.width+2*this.buffer)/e),this.cacheWidth/e>>0),this.cacheTilesHeight=Math.min(this.tilesHeight,Math.ceil((t.height+2*this.buffer)/i),this.cacheHeight/i>>0),this.cacheClipWidth=this.cacheTilesWidth*e,this.cacheClipHeight=this.cacheTilesHeight*i,this.mapContainer.mask=(new c.f).beginFill(0).drawRect(0,0,this.cacheClipWidth,this.cacheClipHeight).endFill()},update:function(t,e,i,n){this.populate(e,n),this.render(e,t,this.mapContainer,this.mapContainerWrapper,i,n),n&&n.set(e)},populateTiles:function(t,e){var i=0,n=0,r=0,s=0,o=null,a=f.a.setUp();for(this.tileContainer.removeChildren(),i=t.left;i<=t.right;i++)for(n=t.top;n<=t.bottom;n++)if(!e||e.empty||n>e.bottom||n<e.top||i>e.right||i<e.left)for(s=0;s<this.imageMap.length;s++)(o=this.imageMap[s][i][n].getNext())&&(o.template&&a.push(o.template),o.x=(i+.5)*this.tileWidth,o.y=(n+.5)*this.tileHeight,this.tileContainer.addChild(o));for(r=0;r<a.length;r++)a[r].clear();f.a.recycle(a)},populateTilesAndEntities:function(t,e){var i=0,n=0,r=0,s=0,a=null,h=null,u=f.a.setUp(),l=f.a.setUp(),c=null;for(this.tileContainer.removeChildren(),i=t.left;i<=t.right;i++)for(n=t.top;n<=t.bottom;n++)if(!e||e.empty||n>e.bottom||n<e.top||i>e.right||i<e.left){for(s=0;s<this.imageMap.length;s++)(a=this.imageMap[s][i][n].getNext())&&(a.template&&l.push(a.template),a.x=(i+.5)*this.tileWidth,a.y=(n+.5)*this.tileHeight,this.tileContainer.addChild(a));if(this.doMap[i]&&this.doMap[i][n])for(c=this.doMap[i][n],r=0;r<c.length;r++)c[r].drawn||(c[r].drawn=!0,u.push(c[r]))}if(this.mapContainer.removeChildren(),this.mapContainer.addChild(this.tileContainer),u.length)for(u.sort(o),r=0;r<u.length;r++)delete(h=u[r]).drawn,this.mapContainer.addChild(h),h.mask&&this.mapContainer.addChild(h.mask);for(r=0;r<l.length;r++)l[r].clear();f.a.recycle(l),f.a.recycle(u)},renderCache:function(t,e,i,n,r,s){var o=this.renderer;r&&!s.empty&&(r.x=s.left*this.tileWidth,r.y=s.top*this.tileHeight,i.addChild(r)),i.x=-t.left*this.tileWidth,i.y=-t.top*this.tileHeight,o.render(n,e),e.requiresUpdate=!0},renderCacheWithExtrusion:function(t,e,i,n){var r=new c.f,s=this.renderer;r.lineStyle(1,0),r.drawRect(.5,.5,this.cacheClipWidth+1,this.cacheClipHeight+1),n.mask=r,i.x=-t.left*this.tileWidth,i.y=-t.top*this.tileHeight+1,s.render(n,e),i.x=-t.left*this.tileWidth+1,i.y=-t.top*this.tileHeight,s.render(n,e),i.x=-t.left*this.tileWidth+2,i.y=-t.top*this.tileHeight+1,s.render(n,e),i.x=-t.left*this.tileWidth+1,i.y=-t.top*this.tileHeight+2,s.render(n,e),n.mask=null,i.x=-t.left*this.tileWidth+1,i.y=-t.top*this.tileHeight+1,s.render(n,e),e.requiresUpdate=!0},updateGrid:function(){var t=this.cache,e=this.cacheTilesHeight,i=this.cacheTilesWidth,n=this.tilesHeight-1,r=this.tilesWidth-1,s=0,o=0,a=this.cacheGrid;for(s=0;s<a.length;s++)for(o=0;o<a[s].length;o++)t.setBounds(s*i,o*e,Math.min((s+1)*i,r),Math.min((o+1)*e,n)),this.update(a[s][o].texture,t)},toJSON:function(){for(var t=this.imageMap[0],e=[],i=t.length,n=0;i--;)for(n=t[i].length,e[i]=[];n--;)e[i][n]=t[i][n].id;return{type:"RenderTiles",buffer:this.buffer,cacheAll:this.cacheAll,entityCache:this.entityCache,imageMap:e,maximumBuffer:this.maximumBuffer,scaleX:this.scaleX,scaleY:this.scaleY,spriteSheet:this.spriteSheet,tileCache:this.tileCache,tileHeight:this.tileHeight,tileWidth:this.tileWidth,top:this.top,left:this.left}},destroy:function(){var t=0,e=0,i="",n=this.cacheGrid,r=this.doMap,s=this.imageMap;if(n){for(t=0;t<n.length;t++)for(e=0;e<n[t].length;e++)n[t][e].texture.destroy(!0),this.container.removeChild(n[t][e]);f.a.recycle(n,2),delete this.cacheGrid}else this.tilesSprite?(this.tilesSprite.texture.alternate&&this.tilesSprite.texture.alternate.destroy(!0),this.tilesSprite.texture.destroy(!0),this.container.removeChild(this.tilesSprite)):this.container.removeChild(this.mapContainer);for(i in f.a.recycle(s,2),this.tiles)this.tiles.hasOwnProperty(i)&&this.tiles[i].destroy();if(this.tiles=null,this.container=null,this.tilesSprite=null,this.spriteSheet.recycleSpriteSheet(),r){for(t=0;t<this.cachedDisplayObjects.length;t++)this.cachedDisplayObjects[t].destroy();for(f.a.recycle(this.cachedDisplayObjects),t=0;t<r.length;t++)if(r[t]){for(e=0;e<r.length;e++)r[t][e]&&r[t][e].recycle();f.a.recycle(r[t])}f.a.recycle(r)}this.laxCam.recycle(),this.cache.recycle(),this.cachePixels.recycle(),f.a.recycle(this.uninitializedTiles)}},getAssetList:(n=function t(e,i){if(e){if("string"==typeof e)return t(i[e],i);if(e.images)return Object(f.b)(e.images)}return f.a.setUp()},function(t,e,i){var r=null,s=0,o=null,a=platypus.game.settings.spriteSheets,h=t.spriteSheet||e.spriteSheet||i.spriteSheet;if(h){if("string"==typeof h&&"import"!==h)return n(h,a);if(Array.isArray(h)){for(s=h.length,o=f.a.setUp();s--;)r=n(h[s],a),Object(f.d)(o,r),f.a.recycle(r);return o}if(h.images)return Object(f.b)(h.images)}return f.a.setUp()})}))},function(t,e,i){"use strict";var n=i(7),r=i(2);e.a=Object(r.a)({id:"SceneChanger",properties:{loadLayers:null,scene:"",unloadLayers:null,persistentData:null},initialize:function(){this.persistentData=n.a.setUp(this.persistentData)},events:{"new-scene":function(t){var e=t&&t.loadLayers||this.loadLayers,i=t&&t.scene||this.scene,n=t&&t.unloadLayers||this.unloadLayers,r=t&&t.persistentData||this.persistentData;if(n&&n.length)for(var s=0;s<n.length;s++)platypus.game.unload(n[s]);if(e&&e.length)for(var o=0;o<e.length;o++)platypus.game.load(e[o],r);i&&platypus.game.loadScene(i,r)},"set-scene":function(t){this.scene=t},"set-persistent-scene-data":function(t){var e=this.persistentData,i="";for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}},methods:{destroy:function(){}}})},function(t,e,i){"use strict";var n,r,s,o,a,h,u,l,c,f,d,p,g,v,y,m,b,_,w,x,E,T,S,O,A=i(0),P=i(11),C=i(7),M=i(20),k=i(23),I=i(9),L=i(2),D=i(102);function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=(c=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([\/.]*?(?:[^?]+)?\/)?(?:(([^\/?]+)\.(\w+))|([^\/?]+))(?:\?((?:(?:[^&]*?[\/=])?(?:((?:(?:[^\/?&=]+)\.(\w+)))\S*?)|\S+))?)?$/,n=function(t,e){return t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24)>>>0},r=function(t,e){return t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24)>>>0},f=function(t,e){var i=4,s=[],o=atob(t.replace(/\\/g,""));if("zlib"===e)for(o=Object(D.inflate)(o);i<=o.length;)s.push(r(o,i-4)),i+=4;else for(;i<=o.length;)s.push(n(o,i-4)),i+=4;return s},d=function(t){return"base64"===t.encoding&&(t.data=f(t.data,t.compression),t.encoding="csv"),t},p=function(t){var e=t.match(c);return e[5]||e[7]},g=function(t,e,i,n,r,s,o,a){var h=this,u=C.a.setUp("level",null,"world",P.a.setUp(),"tile",P.a.setUp(),"camera",null,"lazyLoads",this.lazyLoads);this.lazyLoads.sort((function(t,e){return e.aabb.left-t.aabb.left})),u.level=t,u.camera=this.followEntity,u.width=n,u.height=r,u.world.setBounds(e,i,e+n,i+r),u.tile.setBounds(0,0,s,o),this.owner.triggerEvent("world-loaded",u),u.world.recycle(),u.tile.recycle(),u.recycle(),this.lazyLoads.length?(this.addEventListener("camera-update",(function(t){for(var e=h.lazyLoads,i=t.viewport,n=e.length;n--;){var r=e[n],s=r.aabb;if(i.intersects(s)){s.recycle(),r.aabb=null,h.owner.addEntity(r);for(var o=n+1;o<e.length;o++)e[o-1]=e[o];e.length-=1}else if(s.left>i.right)break}})),this.backgroundLoad&&this.addEventListener("tick",(function(){var t=this.lazyLoads,e=t.length;if(e){var i=t.pop(e-1);i.aabb.recycle(),i.aabb=null,this.owner.addEntity(i)}}))):this.owner.removeComponent(this),a&&a()},v=function(t){for(var e=1;e<t;)e*=10;return e},y={x:1,y:1,id:-1},m=function(t,e){var i=0;if(t){if(Array.isArray(t)){for(i=t.length;i--;)if(t[i].name===e)return t[i].value;return null}return t[e]}return null},b=function(t,e,i){var n=0;if(t)if(Array.isArray(t)){for(n=t.length;n--;)if(t[n].name===e)return t[n].type=R(i),void(t[n].value=i);t.push({name:e,type:R(i),value:i})}else t[e]=i},_=function(t){var e=y,i=!!(1073741824&t),n=!!(2147483648&t);return e.id=268435455&t,e.x=1,e.y=1,i&&(e.y=-1),n&&(e.x=-1),e},w=function(t,e){var i=0,n=t.gid||-1,r={},s={gid:-1,transform:null,properties:r,type:""},o=null,a=null,h=0;if(-1!==n&&(s.transform=_(n),n=s.gid=y.id),e){for(i=0;i<e.length&&!(e[i].firstgid>n);i++)a=e[i];a&&(h=n-a.firstgid,a.tileproperties&&a.tileproperties[h]&&(o=a.tileproperties[h]),a.tiles&&a.tiles[h]&&(s.type=a.tiles[h].type||""))}return s.type=t.type||s.type,s.type?(s.transform?(r.scaleX=s.transform.x,r.scaleY=s.transform.y):(r.scaleX=1,r.scaleY=1),x(o,s.properties),x(t.properties,s.properties),s):null},x=function(t,e){var i=0,n="";if(t&&e)if(Array.isArray(t))for(i=0;i<t.length;i++)b(e,t[i].name,E(t[i].value));else for(n in t)t.hasOwnProperty(n)&&b(e,n,E(t[n]));return e},E=function(t){var e=0;if("string"==typeof t){if(0===(e=parseFloat(t)||parseInt(t))||e)return e;if("true"===t)return!0;if("false"===t)return!1;if(t.length>1&&("{"===t[0]&&"}"===t[t.length-1]||"["===t[0]&&"]"===t[t.length-1]))try{return JSON.parse(t)}catch(t){}}return t},T={"render-layer":{id:"render-layer",components:[{type:"RenderTiles",spriteSheet:"import",imageMap:"import",entityCache:!0}]},"collision-layer":{id:"collision-layer",components:[{type:"CollisionTiles",collisionMap:"import"}]},"image-layer":{id:"image-layer",components:[{type:"RenderTiles",spriteSheet:"import",imageMap:"import"}]}},S=function(t){var e="",i=platypus.game.settings.levels[t.source.replace(".json","")];for(e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return delete t.source,t},O=function(t){var e=0;for(e=0;e<t.length;e++)t[e].source&&(t[e]=S(t[e]));return t},Object(L.a)({id:"TiledLoader",properties:{offsetMap:!1,showCollisionTiles:!1,images:null,layerIncrement:1e3,separateTiles:!1,spriteSheet:null,backgroundLoad:!0},publicProperties:{level:null,entityPositionX:"center",entityPositionY:"bottom",manuallyLoad:!1},initialize:function(){this.assetCache=platypus.assetCache,this.layerZ=0,this.followEntity=!1,this.lazyLoads=A.a.setUp()},events:{"layer-loaded":function(t,e){this.manuallyLoad||(e.count+=1,this.loadLevel({level:this.level||t.level,persistentData:t},e.release))},"load-level":function(t,e){this.loadLevel(t,e)}},methods:{createLayer:function(t,e,i,n,r,s,o,a,h,u,l){var c=null,f=null,p=e.width,g=e.height,v=e.tileheight||s,y=e.tilewidth||r,b=0,w=0,E=0,S=0,O=0,A=JSON.parse(JSON.stringify(platypus.game.settings.entities[t]||T[t])),P={},C=[],M=[],I=[],L={images:e.image?[e.image]:h,frames:M,animations:P},D=!1,R=0,U=0,F=0,N=null,j=function(t,e,i,n){var r=i.margin||0,s=i.spacing||0,o=i.tilewidth,a=i.tileheight,h=o/2,u=a/2,l=o+s,c=a+s,f=2*r-s,d=i.columns||i.imagewidth/l+f>>0,p=i.imageheight/c+f>>0,g=0,v=0;for(o*=n,a*=n,h*=n,u*=n,l*=n,c*=n,v=0;v<p;v++)for(g=0;g<d;g++)t.push([r+g*l,r+v*c,o,a,e,h,u])};if(d(e),N=e.data,i+=e.offsetx||0,n+=e.offsety||0,A.properties=A.properties||{},e.properties){if((S=m(e.properties,"width"))&&(b=parseInt(S,10)),(E=m(e.properties,"height"))&&(w=parseInt(E,10)),b||w){for(b=b||p,w=w||g,N=[],U=0;U<b;U++)for(F=0;F<w;F++)N[U+F*b]=U<p&&F<g?e.data[U+F*p]:0;p=b,g=w}x(e.properties,A.properties)}if(A.properties.width=y*p,A.properties.height=v*g,A.properties.columns=p,A.properties.rows=g,A.properties.tileWidth=y,A.properties.tileHeight=v,A.properties.scaleX=1,A.properties.scaleY=1,A.properties.layerZ=this.layerZ,A.properties.left=A.properties.x||i,A.properties.top=A.properties.y||n,A.properties.z=A.properties.z||this.layerZ,o.length){for(U=0;U<o.length;U++)j(M,U,o[U],1);for(O=(c=o[o.length-1]).firstgid+c.tilecount,U=-1;U<O;U++)P["tile"+U]=U}for(U=0;U<p;U++)for(C[U]=[],I[U]=[],F=0;F<g;F++)if(R=+N[U+F*p]-1,I[U][F]="tile"+R,R+=1,C[U][F]=R,a){var B=_(R);if(a.has(B.id)){var z=i+r*(B.x>0?U:U+1),X=n+s*(B.y>0?F:F+1);this.setUpEntities(a.get(B.id),z,X,r,s,o,B,l)}}for(U=0;U<A.components.length;U++)"RenderTiles"===A.components[U].type&&(D=A.components[U]),"import"===A.components[U].spriteSheet?A.components[U].spriteSheet=L:A.components[U].spriteSheet&&("string"==typeof A.components[U].spriteSheet&&platypus.game.settings.spriteSheets[A.components[U].spriteSheet]&&(A.components[U].spriteSheet=platypus.game.settings.spriteSheets[A.components[U].spriteSheet]),A.components[U].spriteSheet.animations||(A.components[U].spriteSheet.animations=P)),"import"===A.components[U].collisionMap&&(A.components[U].collisionMap=C),"import"===A.components[U].imageMap&&(A.components[U].imageMap=I);return"render-layer"===t&&!this.separateTiles&&u&&u.tileHeight===v&&u.tileWidth===y&&u.columns===p&&u.rows===g?(u.triggerEvent("add-tiles",D),this.updateLoadingProgress(l),console.log("combined!"),u):(f={},"render-layer"===t&&this.spriteSheet&&("string"==typeof this.spriteSheet?f.spriteSheet=platypus.game.settings.spriteSheets[this.spriteSheet]:f.spriteSheet=this.spriteSheet,f.spriteSheet.animations||(f.spriteSheet.animations=P)),this.owner.addEntity(new k.a(A,{properties:f},this.updateLoadingProgress.bind(this,l),this.owner)))},convertImageLayer:function(t){var e,i=null,n=0,r="",s=t.properties||{},o=m(s,"repeat"),a=m(s,"repeat-x"),h=m(s,"repeat-y"),u={data:[],image:"",height:1,name:t.name,type:"tilelayer",width:1,tileheight:1,tilewidth:1,x:t.x,y:t.y,properties:s};for(o&&(u.width=+o,u.height=+o),a&&(u.width=+a),h&&(u.height=+h),e=u.width*u.height,n=0;n<e;n++)u.data.push(1);return(i=this.assetCache.get(t.name))?(u.image=t.name,u.tileheight=i.height,u.tilewidth=i.width):(r=p(t.image),(i=this.assetCache.get(r))?(platypus.debug.warn('Component TiledLoader: Did not find a spritesheet for "'+t.name+'", so using "'+t.image+'" instead.'),u.image=r,u.tileheight=i.height,u.tilewidth=i.width):(platypus.debug.warn('Component TiledLoader: Cannot find the "'+t.name+'" sprite sheet. Add it to the list of assets in config.json and give it the id "'+t.name+'".'),u.image=t.image)),u.tileset={columns:1,image:u.image,imageheight:u.tileheight,imagewidth:u.tilewidth,margin:0,name:t.name,spacing:0,tilecount:1,tileheight:u.tileheight,tilewidth:u.tilewidth,type:"tileset"},u},loadLevel:function(t,e){var i,n,r,s,o,a,h=null,u=0,l="",c=null,f=null,d=null,y=null,m=M.a.setUp(),b=C.a.setUp("count",0,"progress",0,"total",0),_=0,w=0,E=Date.now();if(i=(h="string"==typeof t.level?platypus.game.settings.levels[t.level]:t.level).layers,r=O(h.tilesets),s=h.tilewidth,o=h.tileheight,function(t,e){for(var i=0;i<e.length;i++){var n=e[i],r=n.tiles;if(r)for(var s=0;s<r.length;s++){var o=r[s];o.objectgroup&&t.set(o.id+n.firstgid,o.objectgroup)}}}(m,r),h.properties&&x(h.properties,this.owner),0===(c=this.images?Object(A.b)(this.images):A.a.setUp()).length)for(u=0;u<r.length;u++)y=r[u],this.assetCache.get(y.name)?c.push(y.name):(l=p(y.image),this.assetCache.get(l)?(platypus.debug.warn('Component TiledLoader: Did not find a spritesheet for "'+y.name+'", so using "'+y.image+'" instead.'),c.push(l)):(platypus.debug.warn('Component TiledLoader: Cannot find the "'+y.name+'" sprite sheet. Add it to the list of assets in config.json and give it the id "'+y.name+'".'),c.push(y.image)));for(a=h.width*s,n=h.height*o,this.offsetMap&&(_=v(a),w=v(n)),b.total=u=i.length,this.finishedLoading=g.bind(this,h,_,w,a,n,s,o,e),console.log("    preparation: "+(Date.now()-E)+"ms"),E=Date.now(),u=0;u<i.length;u++){switch((d=i[u]).type){case"imagelayer":f=this.convertImageLayer(d),f=this.createLayer("image-layer",f,_,w,f.tilewidth,f.tileheight,[f.tileset],null,c,f,b);break;case"objectgroup":this.setUpEntities(d,_,w,s,o,r,null,b),f=null,this.updateLoadingProgress(b);break;case"tilelayer":f=this.setupLayer(d,f,_,w,s,o,r,m,c,b);break;default:platypus.debug.warn('Component TiledLoader: Platypus does not support Tiled layers of type "'+d.type+'". This layer will not be loaded.'),this.updateLoadingProgress(b)}this.layerZ+=this.layerIncrement,console.log("    "+d.type+": "+(Date.now()-E)+"ms"),E=Date.now()}m.recycle()},setUpEntities:(s=function(t){return C.a.setUp("x",-t.x,"y",-t.y)},o=function(t){return C.a.setUp("x",t.x,"y",t.y)},a=function(t){return C.a.setUp("x",-t.x,"y",t.y)},h=function(t){return C.a.setUp("x",t.x,"y",-t.y)},u=function(t,e,i){var n=A.a.setUp(),r=e?i?s:a:i?h:o;if(e^i){for(var u=t.length;u--;)n.push(r(t[u]));n.unshift(n.pop())}else for(var l=0;l<t.length;l++)n.push(r(t[l]));return n},l=function(t,e,i,n,r){var s={type:t,points:u(e,i,n)};if(r){var o=[],a=0;for(a=0;a<r.length;a++)o.push(u(r[a],i,n));s.decomposedPolygon=o}return s},function(t,e,i,n,r,s,o,a){var h=0,u=0,c=0,f=0,d=0,p=0,g=null,v=0,y=null,b=null,_=m(t.properties,"entityPositionX")||this.entityPositionX,x=m(t.properties,"entityPositionY")||this.entityPositionY,E=-1,T=1/0,S=-1/0,O=1/0,A=-1/0,C=null,M=0,k=0,L=o?o.x:1,D=o?o.y:1,R=t.objects.length;for(e+=t.offsetx||0,i+=t.offsety||0,a.total+=R,v=0;v<R;v++){var U=t.objects[v],F=w(U,s);if(F){var N=F.properties,j=F.type,B={properties:N};if(E=F.gid,(y=platypus.game.settings.entities[j])?(b=y.properties||null,B.type=j):(b=null,B.id=j),U.polygon||U.polyline){for(T=1/0,S=-1/0,O=1/0,A=-1/0,C=null,U.polygon?C=U.polygon:U.polyline&&(C=U.polyline),c=0;c<C.length;c++)C[c].x>S&&(S=C[c].x),C[c].x<T&&(T=C[c].x),C[c].y>A&&(A=C[c].y),C[c].y<O&&(O=C[c].y);N.width=S-T,N.height=A-O,N.x=U.x+e,N.y=U.y+i,h=0,u=0,U.polygon?N.shape=l("polygon",C,-1===L,-1===D,N.decomposedPolygon):U.polyline&&(N.shape=l("polyline",C,-1===L,-1===D,null)),U.rotation&&(N.rotation=U.rotation)}else M=n,k=r,h=0,u=0,N.width=U.width||0,N.height=U.height||0,b&&("number"==typeof b.width&&(N.width=b.width,h=M),"number"==typeof b.height&&(N.height=b.height,u=k)),U.point||(N.width||(N.width=M),N.height||(N.height=k),h=h||N.width,u=u||N.height),N.x=U.x,N.y=U.y,U.rotation&&(f=(U.width||M)/2,d=(U.height||k)/2,p=U.rotation/180%2*Math.PI,g=I.a.setUp(f,-d).rotate(p),N.rotation=U.rotation,N.x=Math.round(1e3*(N.x+g.x-f))/1e3,N.y=Math.round(1e3*(N.y+g.y+d))/1e3,g.recycle()),"left"===_?N.regX=0:"center"===_?(N.regX=N.width/2,N.x+=h/2):"right"===_&&(N.regX=N.width,N.x+=h),N.x=e+N.x*L,-1===E&&(N.y+=N.height),"bottom"===x?N.regY=N.height:"center"===x?(N.regY=N.height/2,N.y-=u/2):"top"===x&&(N.regY=0,N.y-=u),N.y=i+N.y*D,U.ellipse?(N.shape={},N.shape.type="circle",N.shape.width=N.width,N.shape.height=N.height,N.shape.radius=(N.width+N.height)/4):U.width&&U.height&&(N.shape={},N.shape.type="rectangle",N.shape.width=N.width,N.shape.height=N.height);if(b&&(N.scaleX*=b.scaleX||1,N.scaleY*=b.scaleY||1),N.scaleX*=L,N.scaleY*=D,N.layerZ=this.layerZ,N.z?N.z+=this.layerZ:b&&"number"==typeof b.z?N.z=this.layerZ+b.z:N.z=this.layerZ,N.lazyLoad||b&&b.lazyLoad)B.aabb=P.a.setUp(N.x+N.width/2-N.regX,N.y+N.height/2-N.regY,N.width||1,N.height||1),this.lazyLoads.push(B),this.updateLoadingProgress(a);else{var z=this.owner.addEntity(B,this.updateLoadingProgress.bind(this,a));z&&z.camera&&(this.followEntity={entity:z,mode:z.camera})}}else this.updateLoadingProgress(a)}}),setupLayer:function(t,e,i,n,r,s,o,a,h,u){var l,c=!1,f=m(t.properties,"entity")||"render-layer",d=0;if(l=platypus.game.settings.entities[f]||T[f])for(d=l.components.length;d--;)if("RenderTiles"===l.components[d].type){c=!0;break}return c?this.createLayer(f,t,i,n,r,s,o,a,h,e,u):(this.createLayer(f,t,i,n,r,s,o,a,h,e,u),null)},updateLoadingProgress:function(t){t.count+=1,t.progress=t.count/t.total,this.owner.triggerEvent("level-loading-progress",t),t.count===t.total&&(t.recycle(),this.finishedLoading())},destroy:function(){A.a.recycle(this.lazyLoads),this.lazyLoads=null}},getAssetList:function(t,e,i,n){var r=e||{},s=i||{},o=t.spriteSheet||r.spriteSheet||s.spriteSheet,a=t.images||r.images||s.images,h=function(t,e){var i=function(t,e,i){for(var n=e.objects,r=0;r<n.length;r++){var s=w(n[r],i);if(s){var o=k.a.getAssetList(s);Object(A.d)(t,o),A.a.recycle(o)}}},n=0,r=A.a.setUp(),s=null,o=A.a.setUp(),a=null,h=null;if("string"==typeof t&&(t=platypus.game.settings.levels[t]),t)if(t.tilesets&&(t.tilesets=O(t.tilesets)),t.assets)Object(A.d)(o,t.assets);else if(t.layers){for(n=0;n<t.layers.length;n++){var u=t.layers[n];if("objectgroup"===u.type)i(o,u,t.tilesets);else if("imagelayer"===u.type)Object(A.d)(o,[u.image]);else{var l=A.a.setUp();d(u),Object(A.d)(l,u.data);for(var c=0;c<l.length;c++)for(var f=268435455&l[c],p=0;p<t.tilesets.length;p++){var g=t.tilesets[p].tiles;if(g)for(var v=0;v<g.length;v++){var y=g[v];y.id===f&&y.objectgroup&&i(o,y.objectgroup)}}(h=m(t.layers[n].properties,"entity"))&&(a=C.a.setUp("type",h),s=k.a.getAssetList(a),Object(A.d)(o,s),A.a.recycle(s),a.recycle())}}if(!e){for(n=0;n<t.tilesets.length;n++)r.push(t.tilesets[n].image);Object(A.d)(o,r),A.a.recycle(r)}t.assets=Object(A.b)(o)}return o}(n&&n.level||t.level||r.level||s.level,o);return o&&("string"==typeof o?Object(A.d)(h,platypus.game.settings.spriteSheets[o].images):Object(A.d)(h,o.images)),a&&Object(A.d)(h,a),h}}))},function(t,e,i){"use strict";var n,r,s,o=i(0),a=i(7),h=i(2);e.a=(n=function(){this.active--},r=function(){this.active++},s=function(t){this.timelineInstances.push(this.createTimeStampedTimeline(this.timelines[t]))},Object(h.a)({id:"Timeline",properties:{timelines:{}},initialize:function(){var t=0;for(t in this.timelineInstances=o.a.setUp(),this.timelines)this.timelines.hasOwnProperty(t)&&this.addEventListener(t,s.bind(this,t))},events:{"handle-logic":function(t){for(var e=t.delta,i=null,n=this.timelineInstances,r=n.length;r--;)(i=n[r]).remove?(Object(o.c)(n,r),o.a.recycle(i.timeline),i.recycle()):i.active&&(0===i.timeline.length?(Object(o.c)(n,r),o.a.recycle(i.timeline),i.recycle()):this.progressTimeline(i,e))},"stop-active-timelines":function(){for(var t=this.timelineInstances,e=t.length;e--;)t[e].remove=!0}},methods:{createTimeStampedTimeline:function(t){var e=o.a.setUp(),i=0,s=0,h=null;for(i=0;i<t.length;i++)"number"==typeof(h=t[i])?s+=h:e.push(a.a.setUp("time",s,"value",h));return e.reverse(),a.a.setUp("timeline",e,"time",0,"active",1,"pause",n,"play",r,"remove",!1)},progressTimeline:function(t,e){var i=t.timeline,n=i.length,r=null,s=null,o=this.owner;for(t.time+=e;n--;){if(!((r=i[n]).time<=t.time))return;if("string"==typeof(s=r.value)?this.owner.triggerEvent(s):(s.entity&&((o=this.owner.getEntityById?this.owner.getEntityById(s.entity):this.owner.parent.getEntityById(s.entity))||(platypus.debug.warn("No entity of that id"),o=this.owner)),s.message?o.triggerEvent(s.event,s.message):o.trigger(s.event)),r.recycle(),i.pop(),!t.active)return;r=null,s=null,o=this.owner}},destroy:function(){for(var t=null,e=this.timelineInstances,i=e.length;i--;)t=e[i],o.a.recycle(t.timeline),t.recycle();o.a.recycle(e),this.timelineInstances=null}}}))},function(t,e,i){"use strict";var n,r,s=i(2),o=i(0);e.a=(n=function(t){var e=null;for(e in this.watchedEntities)t.type===e&&this.watchedEntities[e].push(t)},r=function(t){var e=0,i=t.type;for(e=this.watchedEntities[i].length-1;e>=0;e--)if(this.watchedEntities[i][e]===t){this.watchedEntities[i].splice(e,1);break}},Object(s.a)({id:"Tutorial",properties:{tutorialDefs:[]},publicProperties:{},initialize:function(){var t=0,e=null,i=null,n=null;for(this.playing=null,this.theQueue=[],this.watchedEntities={},this.tutorials=[],t=0;t<this.tutorialDefs.length;t++)if(n={},(i=this.tutorialDefs[t]).events){for(e in n.events=Object(o.b)(i.events),n.originalEvents=Object(o.b)(i.events),n.priority=i.priority||0,n.queue=i.queue||!1,n.timesToReplay="number"==typeof i.timesToReplay?i.timesToReplay:1/0,n.replayDelay=i.replayDelay||null,n.replayDelayTimer=n.replayDelay,n.level=i.level,n.requirements={},i.requirements)i.requirements.hasOwnProperty(e)&&(n.requirements[e]=Object(o.b)(i.requirements[e]),this.watchedEntities[e]||(this.watchedEntities[e]=[]));this.tutorials.push(n)}else platypus.debug.warn("Tutorial definition lacks events.")},events:{"child-entity-added":n,"peer-entity-added":n,"child-entity-removed":r,"peer-entity-removed":r,"handle-logic":function(t){var e=t.delta,i=0,n=null,r=null,s=-1,o=!1,a=null;for(i=0;i<this.tutorials.length;i++)if(o=!1,n=this.tutorials[i],this.playing||0!==this.theQueue.length?!this.playing&&this.theQueue.length>0&&n.priority>this.theQueue[0].priority?o=!0:this.playing&&this.playing.priority<n.priority?o=!0:n.queue&&(o=!0):o=!0,o&&this.checkRequirements(n.requirements)){if(n.replayDelay&&n.replayDelayTimer>0&&(n.replayDelayTimer-=e,n.replayDelayTimer>0))continue;(!r||r.priority<n.priority)&&(r=n,s=i)}r?(a=this.tutorials.splice(s,1)[0],this.playing?a.priority>this.playing.priority?(this.owner.triggerEvent("stop-audio"),this.play(a)):this.queue(a):this.theQueue.length>0?a.priority>this.theQueue[0].priority?this.play(a):(this.play(this.theQueue.splice(0,1)[0]),this.queue(a)):this.play(a)):!this.playing&&this.theQueue.length>0&&this.play(this.theQueue.splice(0,1)[0])},"sequence-complete":function(){this.playing.timesToReplay>=0&&this.tutorials.push(this.playing),this.playing=null}},methods:{play:function(t){var e;this.playing=t,0===this.playing.events.length&&(this.playing.events=Object(o.b)(this.playing.originalEvents)),e=this.playing.events.splice(Math.floor(Math.random()*this.playing.events.length),1)[0],this.owner.triggerEvent(e),t.timesToReplay-=1,t.replayDelayTimer=t.replayDelay},queue:function(t){var e=0,i=!1;for(e=0;e<this.theQueue.length;e++)if(this.theQueue[e].priority<t.priority){this.theQueue.splice(e,0,t),i=!0;break}i||this.theQueue.push(t)},checkRequirements:function(t){var e=0,i=0,n=null,r=null,s=null,o=!0;for(n in t)if(t.hasOwnProperty(n)){for(r=t[n],i=this.watchedEntities[n].length-1;i>=0;i--){for(s=this.watchedEntities[n][i],o=!0,e=0;e<r.length;e++)if(!s.state.get(r[e])){o=!1;break}if(o)break}if(!o)return!1}return!0},destroy:function(){this.watchedEntities=null,this.theQueue=null,this.playing=null,this.tutorials=null}}}))},function(t,e,i){"use strict";var n=i(7),r=i(43),s=i(0),o=i(2),a=r.a.Easing,h=r.a.Group,u=r.a.Interpolation,l=r.a.Tween,c=function(){var t={};for(var e in a)if(a.hasOwnProperty(e))for(var i in a[e])a[e].hasOwnProperty(i)&&(t[e+"."+i]=a[e][i]);return t}(),f=function(){this.trigger.apply(this,arguments)};e.a=Object(o.a)({id:"Tween",properties:{events:null},initialize:function(){var t="",e=this.events;if(this.group=new h,this.waitingToChain=n.a.setUp(),this.tweens=n.a.setUp(),this.time=0,e)for(t in e)if(e.hasOwnProperty(t)){var i=this.tweens[t]=this.createTweens(e[t]);if(this.addEventListener(t,this.runTween.bind(this,t)),this.waitingToChain[t]){for(var r=this.waitingToChain[t],o=0;o<r.length;o++)r[o].chain(i);s.a.recycle(r),delete this.waitingToChain[t]}}},events:{tween:function(t){this.runTween(t)},"handle-logic":function(t){this.time+=t.delta,this.group.update(this.time)},"stop-tween":function(){this.group.removeAll()}},methods:{createTween:function(t,e){var i=this.owner,n=t.target?"string"==typeof t.target?i.parent.getEntityById(t.target):t.target:i;if(n){if(t.to&&t.time){var r=new l(n,this.group);if(r.to(t.to,t.time),t.onUpdate&&r.onUpdate("function"!=typeof t.onUpdate?f.bind(i,t.onUpdate):t.onUpdate),t.onStart&&r.onStart("function"!=typeof t.onStart?f.bind(i,t.onStart):t.onStart),t.onStop&&r.onStop("function"!=typeof t.onStop?f.bind(i,t.onStop):t.onStop),t.onComplete&&r.onComplete("function"!=typeof t.onComplete?f.bind(i,t.onComplete):t.onComplete),t.onRepeat&&r.onRepeat("function"!=typeof t.onRepeat?f.bind(i,t.onRepeat):t.onRepeat),t.chain&&(e?"string"==typeof t.chain?this.tweens[t.chain]?r.chain(this.tweens[t.chain]):(this.waitingToChain[t.chain]||(this.waitingToChain[t.chain]=s.a.setUp()),this.waitingToChain[t.chain].push(r)):r.chain(t.chain):platypus.debug.warn("Component Tween: ignoring `chain` on tween since it is part of an array of tweens.")),t.repeat&&r.repeat(t.repeat),t.yoyo&&r.yoyo(),t.delay&&r.delay(t.delay),t.repeatDelay&&r.repeatDelay(t.repeatDelay),t.interpolation&&("function"==typeof t.interpolation?r.interpolation(t.interpolation):u[t.interpolation]?r.interpolation(u[t.interpolation]):platypus.debug.warn('Component Tween: "'+t.interpolation+'" is not a valid interpolation value; must be "Linear", "Bezier", or "CatmullRom".')),t.easing)if("function"==typeof t.easing)r.easing(t.easing);else if(c[t.easing])r.easing(c[t.easing]);else{var o='".',a='", or "';for(var h in c)c.hasOwnProperty(h)&&(o=a+h+o,a='", "');platypus.debug.warn('Component Tween: "'+t.easing+'" is not a valid easing value; must be '+o.substring(3))}return r}return platypus.debug.warn("Component Tween: Both `time` and `to` must be specified to create tween."),null}return platypus.debug.warn("Component Tween: Could not find entity as specified by `target` - "+t.target),null},createTweens:function(t){if(Array.isArray(t)){for(var e=t.length,i=null;e--;){var n=this.createTween(t[e],!i);i&&n.chain(i),i=n}return i}return this.createTween(t,!0)},destroy:function(){this.group.removeAll()},runTween:function(t){var e="string"==typeof t?this.tweens[t]:this.createTweens(t);e?e.start(this.time):platypus.debug.warn("Component Tween: Unable to run requested tween.",t)}}})},function(t,e,i){"use strict";var n,r,s,o,a=i(0),h=i(50),u=i(101),l=i(103),c=i(2);e.a=(n=function(t,e){return" "===e?t+"default":t+e},r=function(t,e,i){this.owner.addComponent(new t(this.owner,e,i))},s=function(t,e,i,r){var s=0,o="",h={},u=0,l="",c="",f=t.voice,d=t.mouthCues;if("string"==typeof t)h.sound=t,h.events=a.a.setUp();else if("string"==typeof t.sound)h.sound=t.sound,h.events=a.a.setUp();else{for(o in t.sound)t.sound.hasOwnProperty(o)&&(h[o]=t.sound[o]);h.events?h.events=Object(a.b)(h.events):h.events=a.a.setUp()}if(f||d||!platypus.game.app.config.mouthCues||(d=platypus.game.app.config.mouthCues[h.sound]),f)for(f+=" ",s=0;s<f.length;s++)(c=f[s])!==l&&(l=c,h.events.push({time:u,event:n(i,c)})),u+=r;else if(d)for(s=0;s<d.length;s++)c=d[s],h.events.push({time:1e3*c.start,event:n(i,c.value)}),u+=r;return h},o=function(t,e,i,n){var r=0,o=a.a.setUp();if(e[" "]||(e[" "]=e.default),Array.isArray(t)){for(r=0;r<t.length;r++)"number"==typeof t[r]?o.push(t[r]):o.push(s(t[r],0,i,n));return o}return s(t,0,i,n)},Object(c.a)({id:"VoiceOver",properties:{animationMap:{default:"default"},renderComponent:"",frameLength:100,messagePrefix:"",voiceOverMap:{}},initialize:function(t,e){var i="",s=a.a.setUp(),c={audioMap:{},aliases:t.aliases},f={acceptInput:t.acceptInput,aliases:t.aliases,animation:t.animation,animationMap:{},eventBased:!0,flip:t.flip,hidden:t.hidden,interactive:t.interactive,mask:t.mask,mirror:t.mirror,offsetZ:t.offsetZ,regX:t.regX,regY:t.regY,restart:t.restart,scaleX:t.scaleX,scaleY:t.scaleY,spriteSheet:t.spriteSheet,stateBased:t.stateBased||!1};for(i in this.messagePrefix?this.message=this.messagePrefix+"-":this.message="",this.animationMap)this.animationMap.hasOwnProperty(i)&&(f.animationMap[n(this.message,i)]=this.animationMap[i]);for(i in f.animationMap.default=this.animationMap.default,this.renderComponent?s.push(r.bind(this,platypus.components[this.renderComponent],f)):s.push(r.bind(this,l.a,f)),this.voiceOverMap)this.voiceOverMap.hasOwnProperty(i)&&(c.audioMap[i]=o(this.voiceOverMap[i],this.animationMap,this.message,this.frameLength));return s.push(r.bind(this,u.a,c)),h.a.setUp(s,e),a.a.recycle(s),!0},events:{load:function(){this.owner.removeComponent(this)}},getAssetList:function(t,e,i){var n=t.spriteSheet||e.spriteSheet||i&&i.spriteSheet;return"string"==typeof n?Object(a.b)(platypus.game.settings.spriteSheets[n].images):n?Object(a.b)(n.images):a.a.setUp()}}))},function(t,e,i){"use strict";var n=i(2);e.a=function(){var t=window.XMLHttpRequest;return Object(n.a)({id:"XHR",properties:{method:"GET",path:"",responseType:"text",withCredentials:!1},initialize:function(t){this.setProperties(t)},events:{request:function(t){if(this.setProperties(t),"GET"===this.method)this.get();else{if("POST"!==this.method)throw"Method must be GET or POST";this.post()}}},methods:{setProperties:function(t){var e="",i="",n=t||this;if(this.method=n.method||this.method||"GET",this.path=n.path||this.path||null,this.responseType=n.responseType||this.responseType||"text",this.withCredentials=n.withCredentials||this.withCredentials||!1,n!==this&&n.data)for(e in this.data="",n.data)n.data.hasOwnProperty(e)&&(this.data+=i+e+"="+n.data[e],i="&");else this.data="";this.onload=n.onload||this.onload||function(){200===this.status&&this.owner.triggerEvent("response",this.responseText)}.bind(this)},get:function(){var e=new t,i=this.path;this.data&&(i+="?"+this.data),e.open(this.method,i,!0),e.withCredentials=this.withCredentials,e.responseType=this.responseType,e.onload=this.onload,e.send()},post:function(){var e=new t;e.open(this.method,this.path,!0),e.withCredentials=this.withCredentials,e.responseType=this.responseType,e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onload=this.onload,e.send(this.data)}}})}()},,function(t,e,i){"use strict";i(247);var n,r=(n=i(419))&&n.__esModule?n:{default:n};r.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),r.default._babelPolyfill=!0},function(t,e,i){"use strict";i(248),i(391),i(393),i(396),i(398),i(400),i(402),i(404),i(406),i(408),i(410),i(412),i(414),i(418)},function(t,e,i){i(249),i(252),i(253),i(254),i(255),i(256),i(257),i(258),i(259),i(260),i(261),i(262),i(263),i(264),i(265),i(266),i(267),i(268),i(269),i(270),i(271),i(272),i(273),i(274),i(275),i(276),i(277),i(278),i(279),i(280),i(281),i(282),i(283),i(284),i(285),i(286),i(287),i(288),i(289),i(290),i(291),i(292),i(293),i(295),i(296),i(297),i(298),i(299),i(300),i(301),i(302),i(303),i(304),i(305),i(306),i(307),i(308),i(309),i(310),i(311),i(312),i(313),i(314),i(315),i(316),i(317),i(318),i(319),i(320),i(321),i(322),i(323),i(324),i(325),i(326),i(327),i(328),i(330),i(331),i(333),i(334),i(335),i(336),i(337),i(338),i(339),i(341),i(342),i(343),i(344),i(345),i(346),i(347),i(348),i(349),i(350),i(351),i(352),i(353),i(124),i(354),i(154),i(355),i(155),i(356),i(357),i(358),i(359),i(156),i(362),i(363),i(364),i(365),i(366),i(367),i(368),i(369),i(370),i(371),i(372),i(373),i(374),i(375),i(376),i(377),i(378),i(379),i(380),i(381),i(382),i(383),i(384),i(385),i(386),i(387),i(388),i(389),i(390),t.exports=i(26)},function(t,e,i){"use strict";var n=i(15),r=i(36),s=i(28),o=i(6),a=i(33),h=i(57).KEY,u=i(16),l=i(85),c=i(70),f=i(60),d=i(22),p=i(105),g=i(135),v=i(251),y=i(88),m=i(17),b=i(18),_=i(32),w=i(38),x=i(56),E=i(59),T=i(64),S=i(138),O=i(47),A=i(87),P=i(29),C=i(62),M=O.f,k=P.f,I=S.f,L=n.Symbol,D=n.JSON,R=D&&D.stringify,U=d("_hidden"),F=d("toPrimitive"),N={}.propertyIsEnumerable,j=l("symbol-registry"),B=l("symbols"),z=l("op-symbols"),X=Object.prototype,Y="function"==typeof L&&!!A.f,H=n.QObject,G=!H||!H.prototype||!H.prototype.findChild,V=s&&u((function(){return 7!=T(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=M(X,e);n&&delete X[e],k(t,e,i),n&&t!==X&&k(X,e,n)}:k,W=function(t){var e=B[t]=T(L.prototype);return e._k=t,e},q=Y&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},K=function(t,e,i){return t===X&&K(z,e,i),m(t),e=x(e,!0),m(i),r(B,e)?(i.enumerable?(r(t,U)&&t[U][e]&&(t[U][e]=!1),i=T(i,{enumerable:E(0,!1)})):(r(t,U)||k(t,U,E(1,{})),t[U][e]=!0),V(t,e,i)):k(t,e,i)},Z=function(t,e){m(t);for(var i,n=v(e=w(e)),r=0,s=n.length;s>r;)K(t,i=n[r++],e[i]);return t},J=function(t){var e=N.call(this,t=x(t,!0));return!(this===X&&r(B,t)&&!r(z,t))&&(!(e||!r(this,t)||!r(B,t)||r(this,U)&&this[U][t])||e)},Q=function(t,e){if(t=w(t),e=x(e,!0),t!==X||!r(B,e)||r(z,e)){var i=M(t,e);return!i||!r(B,e)||r(t,U)&&t[U][e]||(i.enumerable=!0),i}},$=function(t){for(var e,i=I(w(t)),n=[],s=0;i.length>s;)r(B,e=i[s++])||e==U||e==h||n.push(e);return n},tt=function(t){for(var e,i=t===X,n=I(i?z:w(t)),s=[],o=0;n.length>o;)!r(B,e=n[o++])||i&&!r(X,e)||s.push(B[e]);return s};Y||(a((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(i){this===X&&e.call(z,i),r(this,U)&&r(this[U],t)&&(this[U][t]=!1),V(this,t,E(1,i))};return s&&G&&V(X,t,{configurable:!0,set:e}),W(t)}).prototype,"toString",(function(){return this._k})),O.f=Q,P.f=K,i(65).f=S.f=$,i(80).f=J,A.f=tt,s&&!i(61)&&a(X,"propertyIsEnumerable",J,!0),p.f=function(t){return W(d(t))}),o(o.G+o.W+o.F*!Y,{Symbol:L});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;et.length>it;)d(et[it++]);for(var nt=C(d.store),rt=0;nt.length>rt;)g(nt[rt++]);o(o.S+o.F*!Y,"Symbol",{for:function(t){return r(j,t+="")?j[t]:j[t]=L(t)},keyFor:function(t){if(!q(t))throw TypeError(t+" is not a symbol!");for(var e in j)if(j[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),o(o.S+o.F*!Y,"Object",{create:function(t,e){return void 0===e?T(t):Z(T(t),e)},defineProperty:K,defineProperties:Z,getOwnPropertyDescriptor:Q,getOwnPropertyNames:$,getOwnPropertySymbols:tt});var st=u((function(){A.f(1)}));o(o.S+o.F*st,"Object",{getOwnPropertySymbols:function(t){return A.f(_(t))}}),D&&o(o.S+o.F*(!Y||u((function(){var t=L();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))}))),"JSON",{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(b(e)||void 0!==t)&&!q(t))return y(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!q(e))return e}),n[1]=e,R.apply(D,n)}}),L.prototype[F]||i(37)(L.prototype,F,L.prototype.valueOf),c(L,"Symbol"),c(Math,"Math",!0),c(n.JSON,"JSON",!0)},function(t,e,i){t.exports=i(85)("native-function-to-string",Function.toString)},function(t,e,i){var n=i(62),r=i(87),s=i(80);t.exports=function(t){var e=n(t),i=r.f;if(i)for(var o,a=i(t),h=s.f,u=0;a.length>u;)h.call(t,o=a[u++])&&e.push(o);return e}},function(t,e,i){var n=i(6);n(n.S,"Object",{create:i(64)})},function(t,e,i){var n=i(6);n(n.S+n.F*!i(28),"Object",{defineProperty:i(29).f})},function(t,e,i){var n=i(6);n(n.S+n.F*!i(28),"Object",{defineProperties:i(137)})},function(t,e,i){var n=i(38),r=i(47).f;i(48)("getOwnPropertyDescriptor",(function(){return function(t,e){return r(n(t),e)}}))},function(t,e,i){var n=i(32),r=i(66);i(48)("getPrototypeOf",(function(){return function(t){return r(n(t))}}))},function(t,e,i){var n=i(32),r=i(62);i(48)("keys",(function(){return function(t){return r(n(t))}}))},function(t,e,i){i(48)("getOwnPropertyNames",(function(){return i(138).f}))},function(t,e,i){var n=i(18),r=i(57).onFreeze;i(48)("freeze",(function(t){return function(e){return t&&n(e)?t(r(e)):e}}))},function(t,e,i){var n=i(18),r=i(57).onFreeze;i(48)("seal",(function(t){return function(e){return t&&n(e)?t(r(e)):e}}))},function(t,e,i){var n=i(18),r=i(57).onFreeze;i(48)("preventExtensions",(function(t){return function(e){return t&&n(e)?t(r(e)):e}}))},function(t,e,i){var n=i(18);i(48)("isFrozen",(function(t){return function(e){return!n(e)||!!t&&t(e)}}))},function(t,e,i){var n=i(18);i(48)("isSealed",(function(t){return function(e){return!n(e)||!!t&&t(e)}}))},function(t,e,i){var n=i(18);i(48)("isExtensible",(function(t){return function(e){return!!n(e)&&(!t||t(e))}}))},function(t,e,i){var n=i(6);n(n.S+n.F,"Object",{assign:i(139)})},function(t,e,i){var n=i(6);n(n.S,"Object",{is:i(140)})},function(t,e,i){var n=i(6);n(n.S,"Object",{setPrototypeOf:i(109).set})},function(t,e,i){"use strict";var n=i(81),r={};r[i(22)("toStringTag")]="z",r+""!="[object z]"&&i(33)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},function(t,e,i){var n=i(6);n(n.P,"Function",{bind:i(141)})},function(t,e,i){var n=i(29).f,r=Function.prototype,s=/^\s*function ([^ (]*)/;"name"in r||i(28)&&n(r,"name",{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(t){return""}}})},function(t,e,i){"use strict";var n=i(18),r=i(66),s=i(22)("hasInstance"),o=Function.prototype;s in o||i(29).f(o,s,{value:function(t){if("function"!=typeof this||!n(t))return!1;if(!n(this.prototype))return t instanceof this;for(;t=r(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,i){var n=i(6),r=i(143);n(n.G+n.F*(parseInt!=r),{parseInt:r})},function(t,e,i){var n=i(6),r=i(144);n(n.G+n.F*(parseFloat!=r),{parseFloat:r})},function(t,e,i){"use strict";var n=i(15),r=i(36),s=i(52),o=i(111),a=i(56),h=i(16),u=i(65).f,l=i(47).f,c=i(29).f,f=i(71).trim,d=n.Number,p=d,g=d.prototype,v="Number"==s(i(64)(g)),y="trim"in String.prototype,m=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){var i,n,r,s=(e=y?e.trim():f(e,3)).charCodeAt(0);if(43===s||45===s){if(88===(i=e.charCodeAt(2))||120===i)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+e}for(var o,h=e.slice(2),u=0,l=h.length;u<l;u++)if((o=h.charCodeAt(u))<48||o>r)return NaN;return parseInt(h,n)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof d&&(v?h((function(){g.valueOf.call(i)})):"Number"!=s(i))?o(new p(m(e)),i,d):m(e)};for(var b,_=i(28)?u(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;_.length>w;w++)r(p,b=_[w])&&!r(d,b)&&c(d,b,l(p,b));d.prototype=g,g.constructor=d,i(33)(n,"Number",d)}},function(t,e,i){"use strict";var n=i(6),r=i(46),s=i(145),o=i(112),a=1..toFixed,h=Math.floor,u=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",c=function(t,e){for(var i=-1,n=e;++i<6;)n+=t*u[i],u[i]=n%1e7,n=h(n/1e7)},f=function(t){for(var e=6,i=0;--e>=0;)i+=u[e],u[e]=h(i/t),i=i%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==u[t]){var i=String(u[t]);e=""===e?i:e+o.call("0",7-i.length)+i}return e},p=function(t,e,i){return 0===e?i:e%2==1?p(t,e-1,i*t):p(t*t,e/2,i)};n(n.P+n.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i(16)((function(){a.call({})}))),"Number",{toFixed:function(t){var e,i,n,a,h=s(this,l),u=r(t),g="",v="0";if(u<0||u>20)throw RangeError(l);if(h!=h)return"NaN";if(h<=-1e21||h>=1e21)return String(h);if(h<0&&(g="-",h=-h),h>1e-21)if(i=(e=function(t){for(var e=0,i=t;i>=4096;)e+=12,i/=4096;for(;i>=2;)e+=1,i/=2;return e}(h*p(2,69,1))-69)<0?h*p(2,-e,1):h/p(2,e,1),i*=4503599627370496,(e=52-e)>0){for(c(0,i),n=u;n>=7;)c(1e7,0),n-=7;for(c(p(10,n,1),0),n=e-1;n>=23;)f(1<<23),n-=23;f(1<<n),c(1,1),f(2),v=d()}else c(0,i),c(1<<-e,0),v=d()+o.call("0",u);return v=u>0?g+((a=v.length)<=u?"0."+o.call("0",u-a)+v:v.slice(0,a-u)+"."+v.slice(a-u)):g+v}})},function(t,e,i){"use strict";var n=i(6),r=i(16),s=i(145),o=1..toPrecision;n(n.P+n.F*(r((function(){return"1"!==o.call(1,void 0)}))||!r((function(){o.call({})}))),"Number",{toPrecision:function(t){var e=s(this,"Number#toPrecision: incorrect invocation!");return void 0===t?o.call(e):o.call(e,t)}})},function(t,e,i){var n=i(6);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,i){var n=i(6),r=i(15).isFinite;n(n.S,"Number",{isFinite:function(t){return"number"==typeof t&&r(t)}})},function(t,e,i){var n=i(6);n(n.S,"Number",{isInteger:i(146)})},function(t,e,i){var n=i(6);n(n.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,i){var n=i(6),r=i(146),s=Math.abs;n(n.S,"Number",{isSafeInteger:function(t){return r(t)&&s(t)<=9007199254740991}})},function(t,e,i){var n=i(6);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,i){var n=i(6);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,i){var n=i(6),r=i(144);n(n.S+n.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(t,e,i){var n=i(6),r=i(143);n(n.S+n.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(t,e,i){var n=i(6),r=i(147),s=Math.sqrt,o=Math.acosh;n(n.S+n.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:r(t-1+s(t-1)*s(t+1))}})},function(t,e,i){var n=i(6),r=Math.asinh;n(n.S+n.F*!(r&&1/r(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,i){var n=i(6),r=Math.atanh;n(n.S+n.F*!(r&&1/r(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,i){var n=i(6),r=i(113);n(n.S,"Math",{cbrt:function(t){return r(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,i){var n=i(6);n(n.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,i){var n=i(6),r=Math.exp;n(n.S,"Math",{cosh:function(t){return(r(t=+t)+r(-t))/2}})},function(t,e,i){var n=i(6),r=i(114);n(n.S+n.F*(r!=Math.expm1),"Math",{expm1:r})},function(t,e,i){var n=i(6);n(n.S,"Math",{fround:i(294)})},function(t,e,i){var n=i(113),r=Math.pow,s=r(2,-52),o=r(2,-23),a=r(2,127)*(2-o),h=r(2,-126);t.exports=Math.fround||function(t){var e,i,r=Math.abs(t),u=n(t);return r<h?u*(r/h/o+1/s-1/s)*h*o:(i=(e=(1+o/s)*r)-(e-r))>a||i!=i?u*(1/0):u*i}},function(t,e,i){var n=i(6),r=Math.abs;n(n.S,"Math",{hypot:function(t,e){for(var i,n,s=0,o=0,a=arguments.length,h=0;o<a;)h<(i=r(arguments[o++]))?(s=s*(n=h/i)*n+1,h=i):s+=i>0?(n=i/h)*n:i;return h===1/0?1/0:h*Math.sqrt(s)}})},function(t,e,i){var n=i(6),r=Math.imul;n(n.S+n.F*i(16)((function(){return-5!=r(4294967295,5)||2!=r.length})),"Math",{imul:function(t,e){var i=+t,n=+e,r=65535&i,s=65535&n;return 0|r*s+((65535&i>>>16)*s+r*(65535&n>>>16)<<16>>>0)}})},function(t,e,i){var n=i(6);n(n.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,i){var n=i(6);n(n.S,"Math",{log1p:i(147)})},function(t,e,i){var n=i(6);n(n.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,i){var n=i(6);n(n.S,"Math",{sign:i(113)})},function(t,e,i){var n=i(6),r=i(114),s=Math.exp;n(n.S+n.F*i(16)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(r(t)-r(-t))/2:(s(t-1)-s(-t-1))*(Math.E/2)}})},function(t,e,i){var n=i(6),r=i(114),s=Math.exp;n(n.S,"Math",{tanh:function(t){var e=r(t=+t),i=r(-t);return e==1/0?1:i==1/0?-1:(e-i)/(s(t)+s(-t))}})},function(t,e,i){var n=i(6);n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,i){var n=i(6),r=i(63),s=String.fromCharCode,o=String.fromCodePoint;n(n.S+n.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(t){for(var e,i=[],n=arguments.length,o=0;n>o;){if(e=+arguments[o++],r(e,1114111)!==e)throw RangeError(e+" is not a valid code point");i.push(e<65536?s(e):s(55296+((e-=65536)>>10),e%1024+56320))}return i.join("")}})},function(t,e,i){var n=i(6),r=i(38),s=i(25);n(n.S,"String",{raw:function(t){for(var e=r(t.raw),i=s(e.length),n=arguments.length,o=[],a=0;i>a;)o.push(String(e[a++])),a<n&&o.push(String(arguments[a]));return o.join("")}})},function(t,e,i){"use strict";i(71)("trim",(function(t){return function(){return t(this,3)}}))},function(t,e,i){"use strict";var n=i(115)(!0);i(116)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})}))},function(t,e,i){"use strict";var n=i(6),r=i(115)(!1);n(n.P,"String",{codePointAt:function(t){return r(this,t)}})},function(t,e,i){"use strict";var n=i(6),r=i(25),s=i(117),o="".endsWith;n(n.P+n.F*i(119)("endsWith"),"String",{endsWith:function(t){var e=s(this,t,"endsWith"),i=arguments.length>1?arguments[1]:void 0,n=r(e.length),a=void 0===i?n:Math.min(r(i),n),h=String(t);return o?o.call(e,h,a):e.slice(a-h.length,a)===h}})},function(t,e,i){"use strict";var n=i(6),r=i(117);n(n.P+n.F*i(119)("includes"),"String",{includes:function(t){return!!~r(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){var n=i(6);n(n.P,"String",{repeat:i(112)})},function(t,e,i){"use strict";var n=i(6),r=i(25),s=i(117),o="".startsWith;n(n.P+n.F*i(119)("startsWith"),"String",{startsWith:function(t){var e=s(this,t,"startsWith"),i=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return o?o.call(e,n,i):e.slice(i,i+n.length)===n}})},function(t,e,i){"use strict";i(34)("anchor",(function(t){return function(e){return t(this,"a","name",e)}}))},function(t,e,i){"use strict";i(34)("big",(function(t){return function(){return t(this,"big","","")}}))},function(t,e,i){"use strict";i(34)("blink",(function(t){return function(){return t(this,"blink","","")}}))},function(t,e,i){"use strict";i(34)("bold",(function(t){return function(){return t(this,"b","","")}}))},function(t,e,i){"use strict";i(34)("fixed",(function(t){return function(){return t(this,"tt","","")}}))},function(t,e,i){"use strict";i(34)("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}}))},function(t,e,i){"use strict";i(34)("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}))},function(t,e,i){"use strict";i(34)("italics",(function(t){return function(){return t(this,"i","","")}}))},function(t,e,i){"use strict";i(34)("link",(function(t){return function(e){return t(this,"a","href",e)}}))},function(t,e,i){"use strict";i(34)("small",(function(t){return function(){return t(this,"small","","")}}))},function(t,e,i){"use strict";i(34)("strike",(function(t){return function(){return t(this,"strike","","")}}))},function(t,e,i){"use strict";i(34)("sub",(function(t){return function(){return t(this,"sub","","")}}))},function(t,e,i){"use strict";i(34)("sup",(function(t){return function(){return t(this,"sup","","")}}))},function(t,e,i){var n=i(6);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,i){"use strict";var n=i(6),r=i(32),s=i(56);n(n.P+n.F*i(16)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=r(this),i=s(e);return"number"!=typeof i||isFinite(i)?e.toISOString():null}})},function(t,e,i){var n=i(6),r=i(329);n(n.P+n.F*(Date.prototype.toISOString!==r),"Date",{toISOString:r})},function(t,e,i){"use strict";var n=i(16),r=Date.prototype.getTime,s=Date.prototype.toISOString,o=function(t){return t>9?t:"0"+t};t.exports=n((function(){return"0385-07-25T07:06:39.999Z"!=s.call(new Date(-5e13-1))}))||!n((function(){s.call(new Date(NaN))}))?function(){if(!isFinite(r.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),i=t.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+o(t.getUTCMonth()+1)+"-"+o(t.getUTCDate())+"T"+o(t.getUTCHours())+":"+o(t.getUTCMinutes())+":"+o(t.getUTCSeconds())+"."+(i>99?i:"0"+o(i))+"Z"}:s},function(t,e,i){var n=Date.prototype,r=n.toString,s=n.getTime;new Date(NaN)+""!="Invalid Date"&&i(33)(n,"toString",(function(){var t=s.call(this);return t==t?r.call(this):"Invalid Date"}))},function(t,e,i){var n=i(22)("toPrimitive"),r=Date.prototype;n in r||i(37)(r,n,i(332))},function(t,e,i){"use strict";var n=i(17),r=i(56);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return r(n(this),"number"!=t)}},function(t,e,i){var n=i(6);n(n.S,"Array",{isArray:i(88)})},function(t,e,i){"use strict";var n=i(44),r=i(6),s=i(32),o=i(149),a=i(120),h=i(25),u=i(121),l=i(122);r(r.S+r.F*!i(89)((function(t){Array.from(t)})),"Array",{from:function(t){var e,i,r,c,f=s(t),d="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,v=void 0!==g,y=0,m=l(f);if(v&&(g=n(g,p>2?arguments[2]:void 0,2)),null==m||d==Array&&a(m))for(i=new d(e=h(f.length));e>y;y++)u(i,y,v?g(f[y],y):f[y]);else for(c=m.call(f),i=new d;!(r=c.next()).done;y++)u(i,y,v?o(c,g,[r.value,y],!0):r.value);return i.length=y,i}})},function(t,e,i){"use strict";var n=i(6),r=i(121);n(n.S+n.F*i(16)((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,i=new("function"==typeof this?this:Array)(e);e>t;)r(i,t,arguments[t++]);return i.length=e,i}})},function(t,e,i){"use strict";var n=i(6),r=i(38),s=[].join;n(n.P+n.F*(i(79)!=Object||!i(39)(s)),"Array",{join:function(t){return s.call(r(this),void 0===t?",":t)}})},function(t,e,i){"use strict";var n=i(6),r=i(108),s=i(52),o=i(63),a=i(25),h=[].slice;n(n.P+n.F*i(16)((function(){r&&h.call(r)})),"Array",{slice:function(t,e){var i=a(this.length),n=s(this);if(e=void 0===e?i:e,"Array"==n)return h.call(this,t,e);for(var r=o(t,i),u=o(e,i),l=a(u-r),c=new Array(l),f=0;f<l;f++)c[f]="String"==n?this.charAt(r+f):this[r+f];return c}})},function(t,e,i){"use strict";var n=i(6),r=i(45),s=i(32),o=i(16),a=[].sort,h=[1,2,3];n(n.P+n.F*(o((function(){h.sort(void 0)}))||!o((function(){h.sort(null)}))||!i(39)(a)),"Array",{sort:function(t){return void 0===t?a.call(s(this)):a.call(s(this),r(t))}})},function(t,e,i){"use strict";var n=i(6),r=i(49)(0),s=i(39)([].forEach,!0);n(n.P+n.F*!s,"Array",{forEach:function(t){return r(this,t,arguments[1])}})},function(t,e,i){var n=i(18),r=i(88),s=i(22)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&null===(e=e[s])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){"use strict";var n=i(6),r=i(49)(1);n(n.P+n.F*!i(39)([].map,!0),"Array",{map:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(6),r=i(49)(2);n(n.P+n.F*!i(39)([].filter,!0),"Array",{filter:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(6),r=i(49)(3);n(n.P+n.F*!i(39)([].some,!0),"Array",{some:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(6),r=i(49)(4);n(n.P+n.F*!i(39)([].every,!0),"Array",{every:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(6),r=i(151);n(n.P+n.F*!i(39)([].reduce,!0),"Array",{reduce:function(t){return r(this,t,arguments.length,arguments[1],!1)}})},function(t,e,i){"use strict";var n=i(6),r=i(151);n(n.P+n.F*!i(39)([].reduceRight,!0),"Array",{reduceRight:function(t){return r(this,t,arguments.length,arguments[1],!0)}})},function(t,e,i){"use strict";var n=i(6),r=i(86)(!1),s=[].indexOf,o=!!s&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(o||!i(39)(s)),"Array",{indexOf:function(t){return o?s.apply(this,arguments)||0:r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(6),r=i(38),s=i(46),o=i(25),a=[].lastIndexOf,h=!!a&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(h||!i(39)(a)),"Array",{lastIndexOf:function(t){if(h)return a.apply(this,arguments)||0;var e=r(this),i=o(e.length),n=i-1;for(arguments.length>1&&(n=Math.min(n,s(arguments[1]))),n<0&&(n=i+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}})},function(t,e,i){var n=i(6);n(n.P,"Array",{copyWithin:i(152)}),i(67)("copyWithin")},function(t,e,i){var n=i(6);n(n.P,"Array",{fill:i(123)}),i(67)("fill")},function(t,e,i){"use strict";var n=i(6),r=i(49)(5),s=!0;"find"in[]&&Array(1).find((function(){s=!1})),n(n.P+n.F*s,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(67)("find")},function(t,e,i){"use strict";var n=i(6),r=i(49)(6),s="findIndex",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),n(n.P+n.F*o,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(67)(s)},function(t,e,i){i(73)("Array")},function(t,e,i){var n=i(15),r=i(111),s=i(29).f,o=i(65).f,a=i(118),h=i(90),u=n.RegExp,l=u,c=u.prototype,f=/a/g,d=/a/g,p=new u(f)!==f;if(i(28)&&(!p||i(16)((function(){return d[i(22)("match")]=!1,u(f)!=f||u(d)==d||"/a/i"!=u(f,"i")})))){u=function(t,e){var i=this instanceof u,n=a(t),s=void 0===e;return!i&&n&&t.constructor===u&&s?t:r(p?new l(n&&!s?t.source:t,e):l((n=t instanceof u)?t.source:t,n&&s?h.call(t):e),i?this:c,u)};for(var g=function(t){t in u||s(u,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},v=o(l),y=0;v.length>y;)g(v[y++]);c.constructor=u,u.prototype=c,i(33)(n,"RegExp",u)}i(73)("RegExp")},function(t,e,i){"use strict";i(155);var n=i(17),r=i(90),s=i(28),o=/./.toString,a=function(t){i(33)(RegExp.prototype,"toString",t,!0)};i(16)((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?a((function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?r.call(t):void 0)})):"toString"!=o.name&&a((function(){return o.call(this)}))},function(t,e,i){"use strict";var n=i(17),r=i(25),s=i(126),o=i(91);i(92)("match",1,(function(t,e,i,a){return[function(i){var n=t(this),r=null==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},function(t){var e=a(i,t,this);if(e.done)return e.value;var h=n(t),u=String(this);if(!h.global)return o(h,u);var l=h.unicode;h.lastIndex=0;for(var c,f=[],d=0;null!==(c=o(h,u));){var p=String(c[0]);f[d]=p,""===p&&(h.lastIndex=s(u,r(h.lastIndex),l)),d++}return 0===d?null:f}]}))},function(t,e,i){"use strict";var n=i(17),r=i(32),s=i(25),o=i(46),a=i(126),h=i(91),u=Math.max,l=Math.min,c=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;i(92)("replace",2,(function(t,e,i,p){return[function(n,r){var s=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,s,r):i.call(String(s),n,r)},function(t,e){var r=p(i,t,this,e);if(r.done)return r.value;var c=n(t),f=String(this),d="function"==typeof e;d||(e=String(e));var v=c.global;if(v){var y=c.unicode;c.lastIndex=0}for(var m=[];;){var b=h(c,f);if(null===b)break;if(m.push(b),!v)break;""===String(b[0])&&(c.lastIndex=a(f,s(c.lastIndex),y))}for(var _,w="",x=0,E=0;E<m.length;E++){b=m[E];for(var T=String(b[0]),S=u(l(o(b.index),f.length),0),O=[],A=1;A<b.length;A++)O.push(void 0===(_=b[A])?_:String(_));var P=b.groups;if(d){var C=[T].concat(O,S,f);void 0!==P&&C.push(P);var M=String(e.apply(void 0,C))}else M=g(T,f,S,O,P,e);S>=x&&(w+=f.slice(x,S)+M,x=S+T.length)}return w+f.slice(x)}];function g(t,e,n,s,o,a){var h=n+t.length,u=s.length,l=d;return void 0!==o&&(o=r(o),l=f),i.call(a,l,(function(i,r){var a;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(h);case"<":a=o[r.slice(1,-1)];break;default:var l=+r;if(0===l)return i;if(l>u){var f=c(l/10);return 0===f?i:f<=u?void 0===s[f-1]?r.charAt(1):s[f-1]+r.charAt(1):i}a=s[l-1]}return void 0===a?"":a}))}}))},function(t,e,i){"use strict";var n=i(17),r=i(140),s=i(91);i(92)("search",1,(function(t,e,i,o){return[function(i){var n=t(this),r=null==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},function(t){var e=o(i,t,this);if(e.done)return e.value;var a=n(t),h=String(this),u=a.lastIndex;r(u,0)||(a.lastIndex=0);var l=s(a,h);return r(a.lastIndex,u)||(a.lastIndex=u),null===l?-1:l.index}]}))},function(t,e,i){"use strict";var n=i(118),r=i(17),s=i(82),o=i(126),a=i(25),h=i(91),u=i(125),l=i(16),c=Math.min,f=[].push,d=!l((function(){RegExp(4294967295,"y")}));i(92)("split",2,(function(t,e,i,l){var p;return p="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!n(t))return i.call(r,t,e);for(var s,o,a,h=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,d=void 0===e?4294967295:e>>>0,p=new RegExp(t.source,l+"g");(s=u.call(p,r))&&!((o=p.lastIndex)>c&&(h.push(r.slice(c,s.index)),s.length>1&&s.index<r.length&&f.apply(h,s.slice(1)),a=s[0].length,c=o,h.length>=d));)p.lastIndex===s.index&&p.lastIndex++;return c===r.length?!a&&p.test("")||h.push(""):h.push(r.slice(c)),h.length>d?h.slice(0,d):h}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,n){var r=t(this),s=null==i?void 0:i[e];return void 0!==s?s.call(i,r,n):p.call(String(r),i,n)},function(t,e){var n=l(p,t,this,e,p!==i);if(n.done)return n.value;var u=r(t),f=String(this),g=s(u,RegExp),v=u.unicode,y=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(d?"y":"g"),m=new g(d?u:"^(?:"+u.source+")",y),b=void 0===e?4294967295:e>>>0;if(0===b)return[];if(0===f.length)return null===h(m,f)?[f]:[];for(var _=0,w=0,x=[];w<f.length;){m.lastIndex=d?w:0;var E,T=h(m,d?f:f.slice(w));if(null===T||(E=c(a(m.lastIndex+(d?0:w)),f.length))===_)w=o(f,w,v);else{if(x.push(f.slice(_,w)),x.length===b)return x;for(var S=1;S<=T.length-1;S++)if(x.push(T[S]),x.length===b)return x;w=_=E}}return x.push(f.slice(_)),x}]}))},function(t,e,i){var n=i(15),r=i(127).set,s=n.MutationObserver||n.WebKitMutationObserver,o=n.process,a=n.Promise,h="process"==i(52)(o);t.exports=function(){var t,e,i,u=function(){var n,r;for(h&&(n=o.domain)&&n.exit();t;){r=t.fn,t=t.next;try{r()}catch(n){throw t?i():e=void 0,n}}e=void 0,n&&n.enter()};if(h)i=function(){o.nextTick(u)};else if(!s||n.navigator&&n.navigator.standalone)if(a&&a.resolve){var l=a.resolve(void 0);i=function(){l.then(u)}}else i=function(){r.call(n,u)};else{var c=!0,f=document.createTextNode("");new s(u).observe(f,{characterData:!0}),i=function(){f.data=c=!c}}return function(n){var r={fn:n,next:void 0};e&&(e.next=r),t||(t=r,i()),e=r}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,i){"use strict";var n=i(159),r=i(68);t.exports=i(95)("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=n.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(r(this,"Map"),0===t?0:t,e)}},n,!0)},function(t,e,i){"use strict";var n=i(159),r=i(68);t.exports=i(95)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return n.def(r(this,"Set"),t=0===t?0:t,t)}},n)},function(t,e,i){"use strict";var n,r=i(15),s=i(49)(0),o=i(33),a=i(57),h=i(139),u=i(160),l=i(18),c=i(68),f=i(68),d=!r.ActiveXObject&&"ActiveXObject"in r,p=a.getWeak,g=Object.isExtensible,v=u.ufstore,y=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(t){if(l(t)){var e=p(t);return!0===e?v(c(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(c(this,"WeakMap"),t,e)}},b=t.exports=i(95)("WeakMap",y,m,u,!0,!0);f&&d&&(h((n=u.getConstructor(y,"WeakMap")).prototype,m),a.NEED=!0,s(["delete","has","get","set"],(function(t){var e=b.prototype,i=e[t];o(e,t,(function(e,r){if(l(e)&&!g(e)){this._f||(this._f=new n);var s=this._f[t](e,r);return"set"==t?this:s}return i.call(this,e,r)}))})))},function(t,e,i){"use strict";var n=i(160),r=i(68);i(95)("WeakSet",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return n.def(r(this,"WeakSet"),t,!0)}},n,!1,!0)},function(t,e,i){"use strict";var n=i(6),r=i(96),s=i(128),o=i(17),a=i(63),h=i(25),u=i(18),l=i(15).ArrayBuffer,c=i(82),f=s.ArrayBuffer,d=s.DataView,p=r.ABV&&l.isView,g=f.prototype.slice,v=r.VIEW;n(n.G+n.W+n.F*(l!==f),{ArrayBuffer:f}),n(n.S+n.F*!r.CONSTR,"ArrayBuffer",{isView:function(t){return p&&p(t)||u(t)&&v in t}}),n(n.P+n.U+n.F*i(16)((function(){return!new f(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(t,e){if(void 0!==g&&void 0===e)return g.call(o(this),t);for(var i=o(this).byteLength,n=a(t,i),r=a(void 0===e?i:e,i),s=new(c(this,f))(h(r-n)),u=new d(this),l=new d(s),p=0;n<r;)l.setUint8(p++,u.getUint8(n++));return s}}),i(73)("ArrayBuffer")},function(t,e,i){var n=i(6);n(n.G+n.W+n.F*!i(96).ABV,{DataView:i(128).DataView})},function(t,e,i){i(54)("Int8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},function(t,e,i){i(54)("Uint8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},function(t,e,i){i(54)("Uint8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}}),!0)},function(t,e,i){i(54)("Int16",2,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},function(t,e,i){i(54)("Uint16",2,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},function(t,e,i){i(54)("Int32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},function(t,e,i){i(54)("Uint32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},function(t,e,i){i(54)("Float32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},function(t,e,i){i(54)("Float64",8,(function(t){return function(e,i,n){return t(this,e,i,n)}}))},function(t,e,i){var n=i(6),r=i(45),s=i(17),o=(i(15).Reflect||{}).apply,a=Function.apply;n(n.S+n.F*!i(16)((function(){o((function(){}))})),"Reflect",{apply:function(t,e,i){var n=r(t),h=s(i);return o?o(n,e,h):a.call(n,e,h)}})},function(t,e,i){var n=i(6),r=i(64),s=i(45),o=i(17),a=i(18),h=i(16),u=i(141),l=(i(15).Reflect||{}).construct,c=h((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),f=!h((function(){l((function(){}))}));n(n.S+n.F*(c||f),"Reflect",{construct:function(t,e){s(t),o(e);var i=arguments.length<3?t:s(arguments[2]);if(f&&!c)return l(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(u.apply(t,n))}var h=i.prototype,d=r(a(h)?h:Object.prototype),p=Function.apply.call(t,d,e);return a(p)?p:d}})},function(t,e,i){var n=i(29),r=i(6),s=i(17),o=i(56);r(r.S+r.F*i(16)((function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,i){s(t),e=o(e,!0),s(i);try{return n.f(t,e,i),!0}catch(t){return!1}}})},function(t,e,i){var n=i(6),r=i(47).f,s=i(17);n(n.S,"Reflect",{deleteProperty:function(t,e){var i=r(s(t),e);return!(i&&!i.configurable)&&delete t[e]}})},function(t,e,i){"use strict";var n=i(6),r=i(17),s=function(t){this._t=r(t),this._i=0;var e,i=this._k=[];for(e in t)i.push(e)};i(148)(s,"Object",(function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}})),n(n.S,"Reflect",{enumerate:function(t){return new s(t)}})},function(t,e,i){var n=i(47),r=i(66),s=i(36),o=i(6),a=i(18),h=i(17);o(o.S,"Reflect",{get:function t(e,i){var o,u,l=arguments.length<3?e:arguments[2];return h(e)===l?e[i]:(o=n.f(e,i))?s(o,"value")?o.value:void 0!==o.get?o.get.call(l):void 0:a(u=r(e))?t(u,i,l):void 0}})},function(t,e,i){var n=i(47),r=i(6),s=i(17);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return n.f(s(t),e)}})},function(t,e,i){var n=i(6),r=i(66),s=i(17);n(n.S,"Reflect",{getPrototypeOf:function(t){return r(s(t))}})},function(t,e,i){var n=i(6);n(n.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,i){var n=i(6),r=i(17),s=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(t){return r(t),!s||s(t)}})},function(t,e,i){var n=i(6);n(n.S,"Reflect",{ownKeys:i(162)})},function(t,e,i){var n=i(6),r=i(17),s=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(t){r(t);try{return s&&s(t),!0}catch(t){return!1}}})},function(t,e,i){var n=i(29),r=i(47),s=i(66),o=i(36),a=i(6),h=i(59),u=i(17),l=i(18);a(a.S,"Reflect",{set:function t(e,i,a){var c,f,d=arguments.length<4?e:arguments[3],p=r.f(u(e),i);if(!p){if(l(f=s(e)))return t(f,i,a,d);p=h(0)}if(o(p,"value")){if(!1===p.writable||!l(d))return!1;if(c=r.f(d,i)){if(c.get||c.set||!1===c.writable)return!1;c.value=a,n.f(d,i,c)}else n.f(d,i,h(0,a));return!0}return void 0!==p.set&&(p.set.call(d,a),!0)}})},function(t,e,i){var n=i(6),r=i(109);r&&n(n.S,"Reflect",{setPrototypeOf:function(t,e){r.check(t,e);try{return r.set(t,e),!0}catch(t){return!1}}})},function(t,e,i){i(392),t.exports=i(26).Array.includes},function(t,e,i){"use strict";var n=i(6),r=i(86)(!0);n(n.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(67)("includes")},function(t,e,i){i(394),t.exports=i(26).Array.flatMap},function(t,e,i){"use strict";var n=i(6),r=i(395),s=i(32),o=i(25),a=i(45),h=i(150);n(n.P,"Array",{flatMap:function(t){var e,i,n=s(this);return a(t),e=o(n.length),i=h(n,0),r(i,n,n,e,0,1,t,arguments[1]),i}}),i(67)("flatMap")},function(t,e,i){"use strict";var n=i(88),r=i(18),s=i(25),o=i(44),a=i(22)("isConcatSpreadable");t.exports=function t(e,i,h,u,l,c,f,d){for(var p,g,v=l,y=0,m=!!f&&o(f,d,3);y<u;){if(y in h){if(p=m?m(h[y],y,i):h[y],g=!1,r(p)&&(g=void 0!==(g=p[a])?!!g:n(p)),g&&c>0)v=t(e,i,p,s(p.length),v,c-1)-1;else{if(v>=9007199254740991)throw TypeError();e[v]=p}v++}y++}return v}},function(t,e,i){i(397),t.exports=i(26).String.padStart},function(t,e,i){"use strict";var n=i(6),r=i(163),s=i(94),o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(s);n(n.P+n.F*o,"String",{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,i){i(399),t.exports=i(26).String.padEnd},function(t,e,i){"use strict";var n=i(6),r=i(163),s=i(94),o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(s);n(n.P+n.F*o,"String",{padEnd:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,i){i(401),t.exports=i(26).String.trimLeft},function(t,e,i){"use strict";i(71)("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart")},function(t,e,i){i(403),t.exports=i(26).String.trimRight},function(t,e,i){"use strict";i(71)("trimRight",(function(t){return function(){return t(this,2)}}),"trimEnd")},function(t,e,i){i(405),t.exports=i(105).f("asyncIterator")},function(t,e,i){i(135)("asyncIterator")},function(t,e,i){i(407),t.exports=i(26).Object.getOwnPropertyDescriptors},function(t,e,i){var n=i(6),r=i(162),s=i(38),o=i(47),a=i(121);n(n.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,i,n=s(t),h=o.f,u=r(n),l={},c=0;u.length>c;)void 0!==(i=h(n,e=u[c++]))&&a(l,e,i);return l}})},function(t,e,i){i(409),t.exports=i(26).Object.values},function(t,e,i){var n=i(6),r=i(164)(!1);n(n.S,"Object",{values:function(t){return r(t)}})},function(t,e,i){i(411),t.exports=i(26).Object.entries},function(t,e,i){var n=i(6),r=i(164)(!0);n(n.S,"Object",{entries:function(t){return r(t)}})},function(t,e,i){"use strict";i(156),i(413),t.exports=i(26).Promise.finally},function(t,e,i){"use strict";var n=i(6),r=i(26),s=i(15),o=i(82),a=i(158);n(n.P+n.R,"Promise",{finally:function(t){var e=o(this,r.Promise||s.Promise),i="function"==typeof t;return this.then(i?function(i){return a(e,t()).then((function(){return i}))}:t,i?function(i){return a(e,t()).then((function(){throw i}))}:t)}})},function(t,e,i){i(415),i(416),i(417),t.exports=i(26)},function(t,e,i){var n=i(15),r=i(6),s=i(94),o=[].slice,a=/MSIE .\./.test(s),h=function(t){return function(e,i){var n=arguments.length>2,r=!!n&&o.call(arguments,2);return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,i)}};r(r.G+r.B+r.F*a,{setTimeout:h(n.setTimeout),setInterval:h(n.setInterval)})},function(t,e,i){var n=i(6),r=i(127);n(n.G+n.B,{setImmediate:r.set,clearImmediate:r.clear})},function(t,e,i){for(var n=i(124),r=i(62),s=i(33),o=i(15),a=i(37),h=i(72),u=i(22),l=u("iterator"),c=u("toStringTag"),f=h.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=r(d),g=0;g<p.length;g++){var v,y=p[g],m=d[y],b=o[y],_=b&&b.prototype;if(_&&(_[l]||a(_,l,f),_[c]||a(_,c,y),h[y]=f,m))for(v in n)_[v]||s(_,v,n[v],!0)}},function(t,e,i){var n=function(t){"use strict";var e=Object.prototype,i=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function a(t,e,i,n){var r=e&&e.prototype instanceof l?e:l,s=Object.create(r.prototype),o=new x(n||[]);return s._invoke=function(t,e,i){var n="suspendedStart";return function(r,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw s;return T()}for(i.method=r,i.arg=s;;){var o=i.delegate;if(o){var a=b(o,i);if(a){if(a===u)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var l=h(t,e,i);if("normal"===l.type){if(n=i.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n="completed",i.method="throw",i.arg=l.arg)}}}(t,i,o),s}function h(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var u={};function l(){}function c(){}function f(){}var d={};d[r]=function(){return this};var p=Object.getPrototypeOf,g=p&&p(p(E([])));g&&g!==e&&i.call(g,r)&&(d=g);var v=f.prototype=l.prototype=Object.create(d);function y(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function m(t){var e;this._invoke=function(n,r){function s(){return new Promise((function(e,s){!function e(n,r,s,o){var a=h(t[n],t,r);if("throw"!==a.type){var u=a.arg,l=u.value;return l&&"object"==typeof l&&i.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,s,o)}),(function(t){e("throw",t,s,o)})):Promise.resolve(l).then((function(t){u.value=t,s(u)}),(function(t){return e("throw",t,s,o)}))}o(a.arg)}(n,r,e,s)}))}return e=e?e.then(s,s):s()}}function b(t,e){var i=t.iterator[e.method];if(void 0===i){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=h(i,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var r=n.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function E(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return s.next=s}}return{next:T}}function T(){return{value:void 0,done:!0}}return c.prototype=v.constructor=f,f.constructor=c,f[o]=c.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===c||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},y(m.prototype),m.prototype[s]=function(){return this},t.AsyncIterator=m,t.async=function(e,i,n,r){var s=new m(a(e,i,n,r));return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},y(v),v[o]="Generator",v[r]=function(){return this},v.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=E,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(i,n){return o.type="throw",o.arg=t,e.next=i,n&&(e.method="next",e.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],o=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=i.call(s,"catchLoc"),h=i.call(s,"finallyLoc");if(a&&h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,u):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),w(i),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;w(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:E(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),u}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e,i){i(420),t.exports=i(165).global},function(t,e,i){var n=i(421);n(n.G,{global:i(129)})},function(t,e,i){var n=i(129),r=i(165),s=i(422),o=i(424),a=i(431),h=function(t,e,i){var u,l,c,f=t&h.F,d=t&h.G,p=t&h.S,g=t&h.P,v=t&h.B,y=t&h.W,m=d?r:r[e]||(r[e]={}),b=m.prototype,_=d?n:p?n[e]:(n[e]||{}).prototype;for(u in d&&(i=e),i)(l=!f&&_&&void 0!==_[u])&&a(m,u)||(c=l?_[u]:i[u],m[u]=d&&"function"!=typeof _[u]?i[u]:v&&l?s(c,n):y&&_[u]==c?function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(c):g&&"function"==typeof c?s(Function.call,c):c,g&&((m.virtual||(m.virtual={}))[u]=c,t&h.R&&b&&!b[u]&&o(b,u,c)))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,t.exports=h},function(t,e,i){var n=i(423);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var n=i(425),r=i(430);t.exports=i(131)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(426),r=i(427),s=i(429),o=Object.defineProperty;e.f=i(131)?Object.defineProperty:function(t,e,i){if(n(t),e=s(e,!0),n(i),r)try{return o(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){var n=i(130);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){t.exports=!i(131)&&!i(166)((function(){return 7!=Object.defineProperty(i(428)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,i){var n=i(130),r=i(129).document,s=n(r)&&n(r.createElement);t.exports=function(t){return s?r.createElement(t):{}}},function(t,e,i){var n=i(130);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t){t.exports=JSON.parse('{"_args":[["git+https://github.com/PBS-KIDS/Platypus.git#v2.0.0-alpha4","/home/jenkins/agent/workspace/CYB/Poddle_Weigh_In"]],"_development":true,"_from":"git+https://github.com/PBS-KIDS/Platypus.git#v2.0.0-alpha4","_id":"platypus@git+https://github.com/PBS-KIDS/Platypus.git#fbfe56f7ac4dc0120f843945e16b0c0d0bf87b50","_inBundle":false,"_integrity":"","_location":"/platypus","_phantomChildren":{},"_requested":{"type":"git","raw":"git+https://github.com/PBS-KIDS/Platypus.git#v2.0.0-alpha4","rawSpec":"git+https://github.com/PBS-KIDS/Platypus.git#v2.0.0-alpha4","saveSpec":"git+https://github.com/PBS-KIDS/Platypus.git#v2.0.0-alpha4","fetchSpec":"https://github.com/PBS-KIDS/Platypus.git","gitCommittish":"v2.0.0-alpha4"},"_requiredBy":["#DEV:/"],"_resolved":"git+https://github.com/PBS-KIDS/Platypus.git#fbfe56f7ac4dc0120f843945e16b0c0d0bf87b50","_spec":"git+https://github.com/PBS-KIDS/Platypus.git#v2.0.0-alpha4","_where":"/home/jenkins/agent/workspace/CYB/Poddle_Weigh_In","bugs":{"url":"https://github.com/PBS-KIDS/Platypus/issues"},"dependencies":{"@tweenjs/tween.js":"18.3.1","pixi-sound":"3.0.3","pixi-spine":"2.1.4","pixi.js":"5.2.0","recycle":"git+https://github.com/gopherwood/recycle.git#master","springroll":"2.2.0"},"description":"Platypus Docs","devDependencies":{"grunt":"^0.4.5","grunt-contrib-compress":"^0.13.0","grunt-contrib-concat":"^1.0.1","grunt-contrib-copy":"^0.8.0","grunt-contrib-jasmine":"^1.1.0","grunt-contrib-uglify":"^0.9.1","grunt-contrib-yuidoc":"^0.8.0","lodash":"^3.10.0","pako":"^0.2.8","webpack":"^4.35.2","webpack-cli":"^3.3.5"},"engine":"node >= 0.10.22","homepage":"https://github.com/PBS-KIDS/Platypus#readme","license":"MIT","logo":"assets/platypus-title.png","main":"lib/platypus.js","module":"src/index.js","name":"platypus","repository":{"type":"git","url":"git+https://github.com/PBS-KIDS/Platypus.git"},"scripts":{"build:debug":"webpack --env.dev","build:release":"webpack --env.prod","start":"webpack-dev-server --env.dev","test":"grunt jasmine:src"},"url":"https://github.com/PBS-KIDS/Platypus","version":"2.0.0-alpha4"}')},function(t,e,i){"use strict";(function(t){var e=i(176),n=i(177),r=i.n(n);
/*!
 * @pixi/polyfill - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
window.Promise||(window.Promise=e.Polyfill),Object.assign||(Object.assign=r.a);var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!s.performance||!s.performance.now){var o=Date.now();s.performance||(s.performance={}),s.performance.now=function(){return Date.now()-o}}for(var a=Date.now(),h=["ms","moz","webkit","o"],u=0;u<h.length&&!s.requestAnimationFrame;++u){var l=h[u];s.requestAnimationFrame=s[l+"RequestAnimationFrame"],s.cancelAnimationFrame=s[l+"CancelAnimationFrame"]||s[l+"CancelRequestAnimationFrame"]}s.requestAnimationFrame||(s.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),i=16+a-e;return i<0&&(i=0),a=e,setTimeout((function(){a=Date.now(),t(performance.now())}),i)}),s.cancelAnimationFrame||(s.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array)}).call(this,i(76))},function(t,e,i){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function s(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new s(r.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new s(r.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},i(435),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(76))},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var n,r,s,o,a,h=1,u={},l=!1,c=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?t.MessageChannel?((s=new MessageChannel).port1.onmessage=function(t){p(t.data)},n=function(t){s.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,n=function(t){var e=c.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):n=function(t){setTimeout(p,0,t)}:(o="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&p(+e.data.slice(o.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),n=function(e){t.postMessage(o+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var r={callback:t,args:e};return u[h]=r,n(h),h++},f.clearImmediate=d}function d(t){delete u[t]}function p(t){if(l)setTimeout(p,0,t);else{var e=u[t];if(e){l=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(void 0,i)}}(e)}finally{d(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(76),i(167))},function(t,e,i){(function(t,n){var r;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(s){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof n&&n;o.global!==o&&o.window!==o&&o.self;var a,h=2147483647,u=/^xn--/,l=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,p=String.fromCharCode;function g(t){throw new RangeError(f[t])}function v(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function y(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+v((t=t.replace(c,".")).split("."),e).join(".")}function m(t){for(var e,i,n=[],r=0,s=t.length;r<s;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<s?56320==(64512&(i=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--):n.push(e);return n}function b(t){return v(t,(function(t){var e="";return t>65535&&(e+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=p(t)})).join("")}function _(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,i){var n=0;for(t=i?d(t/700):t>>1,t+=d(t/e);t>455;n+=36)t=d(t/35);return d(n+36*t/(t+38))}function x(t){var e,i,n,r,s,o,a,u,l,c,f,p=[],v=t.length,y=0,m=128,_=72;for((i=t.lastIndexOf("-"))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&g("not-basic"),p.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<v;){for(s=y,o=1,a=36;r>=v&&g("invalid-input"),((u=(f=t.charCodeAt(r++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:36)>=36||u>d((h-y)/o))&&g("overflow"),y+=u*o,!(u<(l=a<=_?1:a>=_+26?26:a-_));a+=36)o>d(h/(c=36-l))&&g("overflow"),o*=c;_=w(y-s,e=p.length+1,0==s),d(y/e)>h-m&&g("overflow"),m+=d(y/e),y%=e,p.splice(y++,0,m)}return b(p)}function E(t){var e,i,n,r,s,o,a,u,l,c,f,v,y,b,x,E=[];for(v=(t=m(t)).length,e=128,i=0,s=72,o=0;o<v;++o)(f=t[o])<128&&E.push(p(f));for(n=r=E.length,r&&E.push("-");n<v;){for(a=h,o=0;o<v;++o)(f=t[o])>=e&&f<a&&(a=f);for(a-e>d((h-i)/(y=n+1))&&g("overflow"),i+=(a-e)*y,e=a,o=0;o<v;++o)if((f=t[o])<e&&++i>h&&g("overflow"),f==e){for(u=i,l=36;!(u<(c=l<=s?1:l>=s+26?26:l-s));l+=36)x=u-c,b=36-c,E.push(p(_(c+x%b,0))),u=d(x/b);E.push(p(_(u,0))),s=w(i,y,n==r),i=0,++n}++i,++e}return E.join("")}a={version:"1.4.1",ucs2:{decode:m,encode:b},decode:x,encode:E,toASCII:function(t){return y(t,(function(t){return l.test(t)?"xn--"+E(t):t}))},toUnicode:function(t){return y(t,(function(t){return u.test(t)?x(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return a}.call(e,i,e,t))||(t.exports=r)}()}).call(this,i(437)(t),i(76))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(440),e.encode=e.stringify=i(441)},function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,s){e=e||"&",i=i||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys);var u=t.length;h>0&&u>h&&(u=h);for(var l=0;l<u;++l){var c,f,d,p,g=t[l].replace(a,"%20"),v=g.indexOf(i);v>=0?(c=g.substr(0,v),f=g.substr(v+1)):(c=g,f=""),d=decodeURIComponent(c),p=decodeURIComponent(f),n(o,d)?r(o[d])?o[d].push(p):o[d]=[o[d],p]:o[d]=p}return o};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?s(o(t),(function(o){var a=encodeURIComponent(n(o))+i;return r(t[o])?s(t[o],(function(t){return a+encodeURIComponent(n(t))})).join(e):a+encodeURIComponent(n(t[o]))})).join(e):a?encodeURIComponent(n(a))+i+encodeURIComponent(n(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var o=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e,i){"use strict";var n=i(443),r=i(58),s=i(172),o=i(132),a=i(173),h=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=r.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var i=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==i)throw new Error(o[i]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var l;if(l="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(i=n.deflateSetDictionary(this.strm,l)))throw new Error(o[i]);this._dict_set=!0}}function l(t,e){var i=new u(e);if(i.push(t,!0),i.err)throw i.msg||o[i.err];return i.result}u.prototype.push=function(t,e){var i,o,a=this.strm,u=this.options.chunkSize;if(this.ended)return!1;o=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=s.string2buf(t):"[object ArrayBuffer]"===h.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new r.Buf8(u),a.next_out=0,a.avail_out=u),1!==(i=n.deflate(a,o))&&0!==i)return this.onEnd(i),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(r.shrinkBuf(a.output,a.next_out))):this.onData(r.shrinkBuf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&1!==i);return 4===o?(i=n.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,0===i):2!==o||(this.onEnd(0),a.avail_out=0,!0)},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=u,e.deflate=l,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,l(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,l(t,e)}},function(t,e,i){"use strict";var n,r=i(58),s=i(444),o=i(170),a=i(171),h=i(132);function u(t,e){return t.msg=h[e],e}function l(t){return(t<<1)-(t>4?9:0)}function c(t){for(var e=t.length;--e>=0;)t[e]=0}function f(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(r.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function d(t,e){s._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,f(t.strm)}function p(t,e){t.pending_buf[t.pending++]=e}function g(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function v(t,e){var i,n,r=t.max_chain_length,s=t.strstart,o=t.prev_length,a=t.nice_match,h=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,u=t.window,l=t.w_mask,c=t.prev,f=t.strstart+258,d=u[s+o-1],p=u[s+o];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(u[(i=e)+o]===p&&u[i+o-1]===d&&u[i]===u[s]&&u[++i]===u[s+1]){s+=2,i++;do{}while(u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&s<f);if(n=258-(f-s),s=f-258,n>o){if(t.match_start=e,o=n,n>=a)break;d=u[s+o-1],p=u[s+o]}}}while((e=c[e&l])>h&&0!=--r);return o<=t.lookahead?o:t.lookahead}function y(t){var e,i,n,s,h,u,l,c,f,d,p=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-262)){r.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=i=t.hash_size;do{n=t.head[--e],t.head[e]=n>=p?n-p:0}while(--i);e=i=p;do{n=t.prev[--e],t.prev[e]=n>=p?n-p:0}while(--i);s+=p}if(0===t.strm.avail_in)break;if(u=t.strm,l=t.window,c=t.strstart+t.lookahead,f=s,d=void 0,(d=u.avail_in)>f&&(d=f),i=0===d?0:(u.avail_in-=d,r.arraySet(l,u.input,u.next_in,d,c),1===u.state.wrap?u.adler=o(u.adler,l,d,c):2===u.state.wrap&&(u.adler=a(u.adler,l,d,c)),u.next_in+=d,u.total_in+=d,d),t.lookahead+=i,t.lookahead+t.insert>=3)for(h=t.strstart-t.insert,t.ins_h=t.window[h],t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+3-1])&t.hash_mask,t.prev[h&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=h,h++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function m(t,e){for(var i,n;;){if(t.lookahead<262){if(y(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-262&&(t.match_length=v(t,i)),t.match_length>=3)if(n=s._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function b(t,e){for(var i,n,r;;){if(t.lookahead<262){if(y(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-262&&(t.match_length=v(t,i),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(d(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=s._tr_tally(t,0,t.window[t.strstart-1]))&&d(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function _(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(1146),this.dyn_dtree=new r.Buf16(122),this.bl_tree=new r.Buf16(78),c(this.dyn_ltree),c(this.dyn_dtree),c(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(16),this.heap=new r.Buf16(573),c(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(573),c(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,s._tr_init(e),0):u(t,-2)}function E(t){var e,i=x(t);return 0===i&&((e=t.state).window_size=2*e.w_size,c(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),i}function T(t,e,i,n,s,o){if(!t)return-2;var a=1;if(-1===e&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),s<1||s>9||8!==i||n<8||n>15||e<0||e>9||o<0||o>4)return u(t,-2);8===n&&(n=9);var h=new w;return t.state=h,h.strm=t,h.wrap=a,h.gzhead=null,h.w_bits=n,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new r.Buf8(2*h.w_size),h.head=new r.Buf16(h.hash_size),h.prev=new r.Buf16(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new r.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=o,h.method=i,E(t)}n=[new _(0,0,0,0,(function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(y(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,d(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(d(t,!1),t.strm.avail_out),1)})),new _(4,4,8,4,m),new _(4,5,16,8,m),new _(4,6,32,32,m),new _(4,4,16,16,b),new _(8,16,32,32,b),new _(8,16,128,128,b),new _(8,32,128,256,b),new _(32,128,258,1024,b),new _(32,258,258,4096,b)],e.deflateInit=function(t,e){return T(t,e,8,15,8,0)},e.deflateInit2=T,e.deflateReset=E,e.deflateResetKeep=x,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},e.deflate=function(t,e){var i,r,o,h;if(!t||!t.state||e>5||e<0)return t?u(t,-2):-2;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&4!==e)return u(t,0===t.avail_out?-5:-2);if(r.strm=t,i=r.last_flush,r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,p(r,31),p(r,139),p(r,8),r.gzhead?(p(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),p(r,255&r.gzhead.time),p(r,r.gzhead.time>>8&255),p(r,r.gzhead.time>>16&255),p(r,r.gzhead.time>>24&255),p(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),p(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(p(r,255&r.gzhead.extra.length),p(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=a(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(p(r,0),p(r,0),p(r,0),p(r,0),p(r,0),p(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),p(r,3),r.status=113);else{var v=8+(r.w_bits-8<<4)<<8;v|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(v|=32),v+=31-v%31,r.status=113,g(r,v),0!==r.strstart&&(g(r,t.adler>>>16),g(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(o=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),f(t),o=r.pending,r.pending!==r.pending_buf_size));)p(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),f(t),o=r.pending,r.pending===r.pending_buf_size)){h=1;break}h=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,p(r,h)}while(0!==h);r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),0===h&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),f(t),o=r.pending,r.pending===r.pending_buf_size)){h=1;break}h=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,p(r,h)}while(0!==h);r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),0===h&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&f(t),r.pending+2<=r.pending_buf_size&&(p(r,255&t.adler),p(r,t.adler>>8&255),t.adler=0,r.status=113)):r.status=113),0!==r.pending){if(f(t),0===t.avail_out)return r.last_flush=-1,0}else if(0===t.avail_in&&l(e)<=l(i)&&4!==e)return u(t,-5);if(666===r.status&&0!==t.avail_in)return u(t,-5);if(0!==t.avail_in||0!==r.lookahead||0!==e&&666!==r.status){var m=2===r.strategy?function(t,e){for(var i;;){if(0===t.lookahead&&(y(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var i,n,r,o,a=t.window;;){if(t.lookahead<=258){if(y(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=a[r=t.strstart-1])===a[++r]&&n===a[++r]&&n===a[++r]){o=t.strstart+258;do{}while(n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&r<o);t.match_length=258-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=s._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(r,e):n[r.level].func(r,e);if(3!==m&&4!==m||(r.status=666),1===m||3===m)return 0===t.avail_out&&(r.last_flush=-1),0;if(2===m&&(1===e?s._tr_align(r):5!==e&&(s._tr_stored_block(r,0,0,!1),3===e&&(c(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),f(t),0===t.avail_out))return r.last_flush=-1,0}return 4!==e?0:r.wrap<=0?1:(2===r.wrap?(p(r,255&t.adler),p(r,t.adler>>8&255),p(r,t.adler>>16&255),p(r,t.adler>>24&255),p(r,255&t.total_in),p(r,t.total_in>>8&255),p(r,t.total_in>>16&255),p(r,t.total_in>>24&255)):(g(r,t.adler>>>16),g(r,65535&t.adler)),f(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},e.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?u(t,-2):(t.state=null,113===e?u(t,-3):0):-2},e.deflateSetDictionary=function(t,e){var i,n,s,a,h,u,l,f,d=e.length;if(!t||!t.state)return-2;if(2===(a=(i=t.state).wrap)||1===a&&42!==i.status||i.lookahead)return-2;for(1===a&&(t.adler=o(t.adler,e,d,0)),i.wrap=0,d>=i.w_size&&(0===a&&(c(i.head),i.strstart=0,i.block_start=0,i.insert=0),f=new r.Buf8(i.w_size),r.arraySet(f,e,d-i.w_size,i.w_size,0),e=f,d=i.w_size),h=t.avail_in,u=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,y(i);i.lookahead>=3;){n=i.strstart,s=i.lookahead-2;do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+3-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++}while(--s);i.strstart=n,i.lookahead=2,y(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=u,t.input=l,t.avail_in=h,i.wrap=a,0},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,i){"use strict";var n=i(58);function r(t){for(var e=t.length;--e>=0;)t[e]=0}var s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],o=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u=new Array(576);r(u);var l=new Array(60);r(l);var c=new Array(512);r(c);var f=new Array(256);r(f);var d=new Array(29);r(d);var p,g,v,y=new Array(30);function m(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function b(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function _(t){return t<256?c[t]:c[256+(t>>>7)]}function w(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function x(t,e,i){t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function E(t,e,i){x(t,i[2*e],i[2*e+1])}function T(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}function S(t,e,i){var n,r,s=new Array(16),o=0;for(n=1;n<=15;n++)s[n]=o=o+i[n-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=T(s[a]++,a))}}function O(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function A(t){t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function P(t,e,i,n){var r=2*e,s=2*i;return t[r]<t[s]||t[r]===t[s]&&n[e]<=n[i]}function C(t,e,i){for(var n=t.heap[i],r=i<<1;r<=t.heap_len&&(r<t.heap_len&&P(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!P(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n}function M(t,e,i){var n,r,a,h,u=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],r=t.pending_buf[t.l_buf+u],u++,0===n?E(t,r,e):(E(t,(a=f[r])+256+1,e),0!==(h=s[a])&&x(t,r-=d[a],h),E(t,a=_(--n),i),0!==(h=o[a])&&x(t,n-=y[a],h))}while(u<t.last_lit);E(t,256,e)}function k(t,e){var i,n,r,s=e.dyn_tree,o=e.stat_desc.static_tree,a=e.stat_desc.has_stree,h=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<h;i++)0!==s[2*i]?(t.heap[++t.heap_len]=u=i,t.depth[i]=0):s[2*i+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=o[2*r+1]);for(e.max_code=u,i=t.heap_len>>1;i>=1;i--)C(t,s,i);r=h;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],C(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,s[2*r]=s[2*i]+s[2*n],t.depth[r]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,s[2*i+1]=s[2*n+1]=r,t.heap[1]=r++,C(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,n,r,s,o,a,h=e.dyn_tree,u=e.max_code,l=e.stat_desc.static_tree,c=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(s=0;s<=15;s++)t.bl_count[s]=0;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(s=h[2*h[2*(n=t.heap[i])+1]+1]+1)>p&&(s=p,g++),h[2*n+1]=s,n>u||(t.bl_count[s]++,o=0,n>=d&&(o=f[n-d]),a=h[2*n],t.opt_len+=a*(s+o),c&&(t.static_len+=a*(l[2*n+1]+o)));if(0!==g){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(s=p;0!==s;s--)for(n=t.bl_count[s];0!==n;)(r=t.heap[--i])>u||(h[2*r+1]!==s&&(t.opt_len+=(s-h[2*r+1])*h[2*r],h[2*r+1]=s),n--)}}(t,e),S(s,u,t.bl_count)}function I(t,e,i){var n,r,s=-1,o=e[1],a=0,h=7,u=4;for(0===o&&(h=138,u=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)r=o,o=e[2*(n+1)+1],++a<h&&r===o||(a<u?t.bl_tree[2*r]+=a:0!==r?(r!==s&&t.bl_tree[2*r]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,s=r,0===o?(h=138,u=3):r===o?(h=6,u=3):(h=7,u=4))}function L(t,e,i){var n,r,s=-1,o=e[1],a=0,h=7,u=4;for(0===o&&(h=138,u=3),n=0;n<=i;n++)if(r=o,o=e[2*(n+1)+1],!(++a<h&&r===o)){if(a<u)do{E(t,r,t.bl_tree)}while(0!=--a);else 0!==r?(r!==s&&(E(t,r,t.bl_tree),a--),E(t,16,t.bl_tree),x(t,a-3,2)):a<=10?(E(t,17,t.bl_tree),x(t,a-3,3)):(E(t,18,t.bl_tree),x(t,a-11,7));a=0,s=r,0===o?(h=138,u=3):r===o?(h=6,u=3):(h=7,u=4)}}r(y);var D=!1;function R(t,e,i,r){x(t,0+(r?1:0),3),function(t,e,i,r){A(t),r&&(w(t,i),w(t,~i)),n.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i,!0)}e._tr_init=function(t){D||(!function(){var t,e,i,n,r,h=new Array(16);for(i=0,n=0;n<28;n++)for(d[n]=i,t=0;t<1<<s[n];t++)f[i++]=n;for(f[i-1]=n,r=0,n=0;n<16;n++)for(y[n]=r,t=0;t<1<<o[n];t++)c[r++]=n;for(r>>=7;n<30;n++)for(y[n]=r<<7,t=0;t<1<<o[n]-7;t++)c[256+r++]=n;for(e=0;e<=15;e++)h[e]=0;for(t=0;t<=143;)u[2*t+1]=8,t++,h[8]++;for(;t<=255;)u[2*t+1]=9,t++,h[9]++;for(;t<=279;)u[2*t+1]=7,t++,h[7]++;for(;t<=287;)u[2*t+1]=8,t++,h[8]++;for(S(u,287,h),t=0;t<30;t++)l[2*t+1]=5,l[2*t]=T(t,5);p=new m(u,s,257,286,15),g=new m(l,o,0,30,15),v=new m(new Array(0),a,0,19,7)}(),D=!0),t.l_desc=new b(t.dyn_ltree,p),t.d_desc=new b(t.dyn_dtree,g),t.bl_desc=new b(t.bl_tree,v),t.bi_buf=0,t.bi_valid=0,O(t)},e._tr_stored_block=R,e._tr_flush_block=function(t,e,i,n){var r,s,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),k(t,t.l_desc),k(t,t.d_desc),o=function(t){var e;for(I(t,t.dyn_ltree,t.l_desc.max_code),I(t,t.dyn_dtree,t.d_desc.max_code),k(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*h[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=r&&(r=s)):r=s=i+5,i+4<=r&&-1!==e?R(t,e,i,n):4===t.strategy||s===r?(x(t,2+(n?1:0),3),M(t,u,l)):(x(t,4+(n?1:0),3),function(t,e,i,n){var r;for(x(t,e-257,5),x(t,i-1,5),x(t,n-4,4),r=0;r<n;r++)x(t,t.bl_tree[2*h[r]+1],3);L(t,t.dyn_ltree,e-1),L(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),M(t,t.dyn_ltree,t.dyn_dtree)),O(t),n&&A(t)},e._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(f[i]+256+1)]++,t.dyn_dtree[2*_(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){x(t,2,3),E(t,256,u),function(t){16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,i){"use strict";var n=i(446),r=i(58),s=i(172),o=i(174),a=i(132),h=i(173),u=i(449),l=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var i=n.inflateInit2(this.strm,e.windowBits);if(i!==o.Z_OK)throw new Error(a[i]);if(this.header=new u,n.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=s.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=n.inflateSetDictionary(this.strm,e.dictionary))!==o.Z_OK))throw new Error(a[i])}function f(t,e){var i=new c(e);if(i.push(t,!0),i.err)throw i.msg||a[i.err];return i.result}c.prototype.push=function(t,e){var i,a,h,u,c,f=this.strm,d=this.options.chunkSize,p=this.options.dictionary,g=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof t?f.input=s.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new r.Buf8(d),f.next_out=0,f.avail_out=d),(i=n.inflate(f,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&p&&(i=n.inflateSetDictionary(this.strm,p)),i===o.Z_BUF_ERROR&&!0===g&&(i=o.Z_OK,g=!1),i!==o.Z_STREAM_END&&i!==o.Z_OK)return this.onEnd(i),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&i!==o.Z_STREAM_END&&(0!==f.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(h=s.utf8border(f.output,f.next_out),u=f.next_out-h,c=s.buf2string(f.output,h),f.next_out=u,f.avail_out=d-u,u&&r.arraySet(f.output,f.output,h,u,0),this.onData(c)):this.onData(r.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((f.avail_in>0||0===f.avail_out)&&i!==o.Z_STREAM_END);return i===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(i=n.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),f.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=c,e.inflate=f,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},e.ungzip=f},function(t,e,i){"use strict";var n=i(58),r=i(170),s=i(171),o=i(447),a=i(448);function h(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):-2}function c(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,l(t)):-2}function f(t,e){var i,n;return t&&t.state?(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,c(t))):-2}function d(t,e){var i,n;return t?(n=new u,t.state=n,n.window=null,0!==(i=f(t,e))&&(t.state=null),i):-2}var p,g,v=!0;function y(t){if(v){var e;for(p=new n.Buf32(512),g=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,p,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,g,0,t.work,{bits:5}),v=!1}t.lencode=p,t.lenbits=9,t.distcode=g,t.distbits=5}function m(t,e,i,r){var s,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),r>=o.wsize?(n.arraySet(o.window,e,i-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((s=o.wsize-o.wnext)>r&&(s=r),n.arraySet(o.window,e,i-r,s,o.wnext),(r-=s)?(n.arraySet(o.window,e,i-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}e.inflateReset=c,e.inflateReset2=f,e.inflateResetKeep=l,e.inflateInit=function(t){return d(t,15)},e.inflateInit2=d,e.inflate=function(t,e){var i,u,l,c,f,d,p,g,v,b,_,w,x,E,T,S,O,A,P,C,M,k,I,L,D=0,R=new n.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(i=t.state).mode&&(i.mode=13),f=t.next_out,l=t.output,p=t.avail_out,c=t.next_in,u=t.input,d=t.avail_in,g=i.hold,v=i.bits,b=d,_=p,k=0;t:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;v<16;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(2&i.wrap&&35615===g){i.check=0,R[0]=255&g,R[1]=g>>>8&255,i.check=s(i.check,R,2,0),g=0,v=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&g)<<8)+(g>>8))%31){t.msg="incorrect header check",i.mode=30;break}if(8!=(15&g)){t.msg="unknown compression method",i.mode=30;break}if(v-=4,M=8+(15&(g>>>=4)),0===i.wbits)i.wbits=M;else if(M>i.wbits){t.msg="invalid window size",i.mode=30;break}i.dmax=1<<M,t.adler=i.check=1,i.mode=512&g?10:12,g=0,v=0;break;case 2:for(;v<16;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(i.flags=g,8!=(255&i.flags)){t.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=g>>8&1),512&i.flags&&(R[0]=255&g,R[1]=g>>>8&255,i.check=s(i.check,R,2,0)),g=0,v=0,i.mode=3;case 3:for(;v<32;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}i.head&&(i.head.time=g),512&i.flags&&(R[0]=255&g,R[1]=g>>>8&255,R[2]=g>>>16&255,R[3]=g>>>24&255,i.check=s(i.check,R,4,0)),g=0,v=0,i.mode=4;case 4:for(;v<16;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}i.head&&(i.head.xflags=255&g,i.head.os=g>>8),512&i.flags&&(R[0]=255&g,R[1]=g>>>8&255,i.check=s(i.check,R,2,0)),g=0,v=0,i.mode=5;case 5:if(1024&i.flags){for(;v<16;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}i.length=g,i.head&&(i.head.extra_len=g),512&i.flags&&(R[0]=255&g,R[1]=g>>>8&255,i.check=s(i.check,R,2,0)),g=0,v=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&((w=i.length)>d&&(w=d),w&&(i.head&&(M=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,u,c,w,M)),512&i.flags&&(i.check=s(i.check,u,w,c)),d-=w,c+=w,i.length-=w),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===d)break t;w=0;do{M=u[c+w++],i.head&&M&&i.length<65536&&(i.head.name+=String.fromCharCode(M))}while(M&&w<d);if(512&i.flags&&(i.check=s(i.check,u,w,c)),d-=w,c+=w,M)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===d)break t;w=0;do{M=u[c+w++],i.head&&M&&i.length<65536&&(i.head.comment+=String.fromCharCode(M))}while(M&&w<d);if(512&i.flags&&(i.check=s(i.check,u,w,c)),d-=w,c+=w,M)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;v<16;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(g!==(65535&i.check)){t.msg="header crc mismatch",i.mode=30;break}g=0,v=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=12;break;case 10:for(;v<32;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}t.adler=i.check=h(g),g=0,v=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=f,t.avail_out=p,t.next_in=c,t.avail_in=d,i.hold=g,i.bits=v,2;t.adler=i.check=1,i.mode=12;case 12:if(5===e||6===e)break t;case 13:if(i.last){g>>>=7&v,v-=7&v,i.mode=27;break}for(;v<3;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}switch(i.last=1&g,v-=1,3&(g>>>=1)){case 0:i.mode=14;break;case 1:if(y(i),i.mode=20,6===e){g>>>=2,v-=2;break t}break;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=30}g>>>=2,v-=2;break;case 14:for(g>>>=7&v,v-=7&v;v<32;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if((65535&g)!=(g>>>16^65535)){t.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&g,g=0,v=0,i.mode=15,6===e)break t;case 15:i.mode=16;case 16:if(w=i.length){if(w>d&&(w=d),w>p&&(w=p),0===w)break t;n.arraySet(l,u,c,w,f),d-=w,c+=w,p-=w,f+=w,i.length-=w;break}i.mode=12;break;case 17:for(;v<14;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(i.nlen=257+(31&g),g>>>=5,v-=5,i.ndist=1+(31&g),g>>>=5,v-=5,i.ncode=4+(15&g),g>>>=4,v-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;v<3;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}i.lens[U[i.have++]]=7&g,g>>>=3,v-=3}for(;i.have<19;)i.lens[U[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,I={bits:i.lenbits},k=a(0,i.lens,0,19,i.lencode,0,i.work,I),i.lenbits=I.bits,k){t.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;S=(D=i.lencode[g&(1<<i.lenbits)-1])>>>16&255,O=65535&D,!((T=D>>>24)<=v);){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(O<16)g>>>=T,v-=T,i.lens[i.have++]=O;else{if(16===O){for(L=T+2;v<L;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(g>>>=T,v-=T,0===i.have){t.msg="invalid bit length repeat",i.mode=30;break}M=i.lens[i.have-1],w=3+(3&g),g>>>=2,v-=2}else if(17===O){for(L=T+3;v<L;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}v-=T,M=0,w=3+(7&(g>>>=T)),g>>>=3,v-=3}else{for(L=T+7;v<L;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}v-=T,M=0,w=11+(127&(g>>>=T)),g>>>=7,v-=7}if(i.have+w>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=30;break}for(;w--;)i.lens[i.have++]=M}}if(30===i.mode)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,I={bits:i.lenbits},k=a(1,i.lens,0,i.nlen,i.lencode,0,i.work,I),i.lenbits=I.bits,k){t.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,I={bits:i.distbits},k=a(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,I),i.distbits=I.bits,k){t.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===e)break t;case 20:i.mode=21;case 21:if(d>=6&&p>=258){t.next_out=f,t.avail_out=p,t.next_in=c,t.avail_in=d,i.hold=g,i.bits=v,o(t,_),f=t.next_out,l=t.output,p=t.avail_out,c=t.next_in,u=t.input,d=t.avail_in,g=i.hold,v=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;S=(D=i.lencode[g&(1<<i.lenbits)-1])>>>16&255,O=65535&D,!((T=D>>>24)<=v);){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(S&&0==(240&S)){for(A=T,P=S,C=O;S=(D=i.lencode[C+((g&(1<<A+P)-1)>>A)])>>>16&255,O=65535&D,!(A+(T=D>>>24)<=v);){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}g>>>=A,v-=A,i.back+=A}if(g>>>=T,v-=T,i.back+=T,i.length=O,0===S){i.mode=26;break}if(32&S){i.back=-1,i.mode=12;break}if(64&S){t.msg="invalid literal/length code",i.mode=30;break}i.extra=15&S,i.mode=22;case 22:if(i.extra){for(L=i.extra;v<L;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}i.length+=g&(1<<i.extra)-1,g>>>=i.extra,v-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;S=(D=i.distcode[g&(1<<i.distbits)-1])>>>16&255,O=65535&D,!((T=D>>>24)<=v);){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(0==(240&S)){for(A=T,P=S,C=O;S=(D=i.distcode[C+((g&(1<<A+P)-1)>>A)])>>>16&255,O=65535&D,!(A+(T=D>>>24)<=v);){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}g>>>=A,v-=A,i.back+=A}if(g>>>=T,v-=T,i.back+=T,64&S){t.msg="invalid distance code",i.mode=30;break}i.offset=O,i.extra=15&S,i.mode=24;case 24:if(i.extra){for(L=i.extra;v<L;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}i.offset+=g&(1<<i.extra)-1,g>>>=i.extra,v-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===p)break t;if(w=_-p,i.offset>w){if((w=i.offset-w)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=30;break}w>i.wnext?(w-=i.wnext,x=i.wsize-w):x=i.wnext-w,w>i.length&&(w=i.length),E=i.window}else E=l,x=f-i.offset,w=i.length;w>p&&(w=p),p-=w,i.length-=w;do{l[f++]=E[x++]}while(--w);0===i.length&&(i.mode=21);break;case 26:if(0===p)break t;l[f++]=i.length,p--,i.mode=21;break;case 27:if(i.wrap){for(;v<32;){if(0===d)break t;d--,g|=u[c++]<<v,v+=8}if(_-=p,t.total_out+=_,i.total+=_,_&&(t.adler=i.check=i.flags?s(i.check,l,_,f-_):r(i.check,l,_,f-_)),_=p,(i.flags?g:h(g))!==i.check){t.msg="incorrect data check",i.mode=30;break}g=0,v=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;v<32;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(g!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=30;break}g=0,v=0}i.mode=29;case 29:k=1;break t;case 30:k=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=f,t.avail_out=p,t.next_in=c,t.avail_in=d,i.hold=g,i.bits=v,(i.wsize||_!==t.avail_out&&i.mode<30&&(i.mode<27||4!==e))&&m(t,t.output,t.next_out,_-t.avail_out)?(i.mode=31,-4):(b-=t.avail_in,_-=t.avail_out,t.total_in+=b,t.total_out+=_,i.total+=_,i.wrap&&_&&(t.adler=i.check=i.flags?s(i.check,l,_,t.next_out-_):r(i.check,l,_,t.next_out-_)),t.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0===b&&0===_||4===e)&&0===k&&(k=-5),k)},e.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var i;return t&&t.state?0==(2&(i=t.state).wrap)?-2:(i.head=e,e.done=!1,0):-2},e.inflateSetDictionary=function(t,e){var i,n=e.length;return t&&t.state?0!==(i=t.state).wrap&&11!==i.mode?-2:11===i.mode&&r(1,e,n,0)!==i.check?-3:m(t,e,n,n)?(i.mode=31,-4):(i.havedict=1,0):-2},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,i){"use strict";t.exports=function(t,e){var i,n,r,s,o,a,h,u,l,c,f,d,p,g,v,y,m,b,_,w,x,E,T,S,O;i=t.state,n=t.next_in,S=t.input,r=n+(t.avail_in-5),s=t.next_out,O=t.output,o=s-(e-t.avail_out),a=s+(t.avail_out-257),h=i.dmax,u=i.wsize,l=i.whave,c=i.wnext,f=i.window,d=i.hold,p=i.bits,g=i.lencode,v=i.distcode,y=(1<<i.lenbits)-1,m=(1<<i.distbits)-1;t:do{p<15&&(d+=S[n++]<<p,p+=8,d+=S[n++]<<p,p+=8),b=g[d&y];e:for(;;){if(d>>>=_=b>>>24,p-=_,0===(_=b>>>16&255))O[s++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=g[(65535&b)+(d&(1<<_)-1)];continue e}if(32&_){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}w=65535&b,(_&=15)&&(p<_&&(d+=S[n++]<<p,p+=8),w+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=S[n++]<<p,p+=8,d+=S[n++]<<p,p+=8),b=v[d&m];i:for(;;){if(d>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=v[(65535&b)+(d&(1<<_)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(x=65535&b,p<(_&=15)&&(d+=S[n++]<<p,(p+=8)<_&&(d+=S[n++]<<p,p+=8)),(x+=d&(1<<_)-1)>h){t.msg="invalid distance too far back",i.mode=30;break t}if(d>>>=_,p-=_,x>(_=s-o)){if((_=x-_)>l&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(E=0,T=f,0===c){if(E+=u-_,_<w){w-=_;do{O[s++]=f[E++]}while(--_);E=s-x,T=O}}else if(c<_){if(E+=u+c-_,(_-=c)<w){w-=_;do{O[s++]=f[E++]}while(--_);if(E=0,c<w){w-=_=c;do{O[s++]=f[E++]}while(--_);E=s-x,T=O}}}else if(E+=c-_,_<w){w-=_;do{O[s++]=f[E++]}while(--_);E=s-x,T=O}for(;w>2;)O[s++]=T[E++],O[s++]=T[E++],O[s++]=T[E++],w-=3;w&&(O[s++]=T[E++],w>1&&(O[s++]=T[E++]))}else{E=s-x;do{O[s++]=O[E++],O[s++]=O[E++],O[s++]=O[E++],w-=3}while(w>2);w&&(O[s++]=O[E++],w>1&&(O[s++]=O[E++]))}break}}break}}while(n<r&&s<a);n-=w=p>>3,d&=(1<<(p-=w<<3))-1,t.next_in=n,t.next_out=s,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=s<a?a-s+257:257-(s-a),i.hold=d,i.bits=p}},function(t,e,i){"use strict";var n=i(58),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,i,h,u,l,c,f){var d,p,g,v,y,m,b,_,w,x=f.bits,E=0,T=0,S=0,O=0,A=0,P=0,C=0,M=0,k=0,I=0,L=null,D=0,R=new n.Buf16(16),U=new n.Buf16(16),F=null,N=0;for(E=0;E<=15;E++)R[E]=0;for(T=0;T<h;T++)R[e[i+T]]++;for(A=x,O=15;O>=1&&0===R[O];O--);if(A>O&&(A=O),0===O)return u[l++]=20971520,u[l++]=20971520,f.bits=1,0;for(S=1;S<O&&0===R[S];S++);for(A<S&&(A=S),M=1,E=1;E<=15;E++)if(M<<=1,(M-=R[E])<0)return-1;if(M>0&&(0===t||1!==O))return-1;for(U[1]=0,E=1;E<15;E++)U[E+1]=U[E]+R[E];for(T=0;T<h;T++)0!==e[i+T]&&(c[U[e[i+T]]++]=T);if(0===t?(L=F=c,m=19):1===t?(L=r,D-=257,F=s,N-=257,m=256):(L=o,F=a,m=-1),I=0,T=0,E=S,y=l,P=A,C=0,g=-1,v=(k=1<<A)-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){b=E-C,c[T]<m?(_=0,w=c[T]):c[T]>m?(_=F[N+c[T]],w=L[D+c[T]]):(_=96,w=0),d=1<<E-C,S=p=1<<P;do{u[y+(I>>C)+(p-=d)]=b<<24|_<<16|w|0}while(0!==p);for(d=1<<E-1;I&d;)d>>=1;if(0!==d?(I&=d-1,I+=d):I=0,T++,0==--R[E]){if(E===O)break;E=e[i+c[T]]}if(E>A&&(I&v)!==g){for(0===C&&(C=A),y+=S,M=1<<(P=E-C);P+C<O&&!((M-=R[P+C])<=0);)P++,M<<=1;if(k+=1<<P,1===t&&k>852||2===t&&k>592)return 1;u[g=I&v]=A<<24|P<<16|y-l|0}}return 0!==I&&(u[y+I]=E-C<<24|64<<16|0),f.bits=A,0}},function(t,e,i){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}}]]);