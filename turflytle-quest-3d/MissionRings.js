pc.script.attribute("displayName","string",""),pc.script.attribute("time","number",30,{displayName:"Time(Second)"}),pc.script.attribute("totalRings","number",1),pc.script.attribute("unlockNextMission","string",""),pc.script.attribute("showTutorial","boolean",!1),pc.script.create("MissionRings",function(a){var b=function(a){this.entity=a,this.type=MissionTypes.RING};return b.prototype={initialize:function(){this.displayName=textDic.Mission.Rings.value,this.childGame="List"===this.entity.getParent().getName(),this.childGame?this.missionManager=this.entity.getParent().getParent().script.ComplexMission:this.missionManager=a.root.findByName("Missions").script.MissionManager,this.missionManager.registerMission(this),this.childGame||(this.start=this.entity.findByName("Start"),this.startBodyWrapper=this.start.script?this.start.script.BodyWrapper:this.start.findByName("Collision").script.BodyWrapper),this.rings=this.entity.findByName("Rings"),this.allRings=this.rings.getChildren(),this.screenCoord=new pc.Vec3,this.player=a.root.findByName("Player"),this.playerScript=this.player.script.PlayerController,this.camera=a.root.findByName("Camera").camera,this.ringCollected=0,this.popupMessageScript=a.root.findByName("PopupMessage").script.PopupMessage},update:function(a){!this.rings.enabled},onEnable:function(){this.startBodyWrapper&&(this.startBodyWrapper.on("onCollisionEnter",this.onCollisionEnter,this),this.startBodyWrapper.on("onCollisionExit",this.onCollisionExit,this))},onDisable:function(){this.startBodyWrapper&&(this.startBodyWrapper.off("onCollisionEnter",this.onCollisionEnter,this),this.startBodyWrapper.off("onCollisionExit",this.onCollisionExit,this))},onCollisionEnter:function(a){"Player"!==a.name||this.rings.enabled||this.missionManager.showMission(this)},onCollisionExit:function(a){},collectRing:function(a){if(this.ringCollected+=a,10===this.ringCollected&&this.playerScript.fire("playAudio","VO","tenRings"),this.ringCollected<this.totalRings){var b=textDic.Mission.Rings_Rings_Found_1,c=this.ringCollected+" "+b.value+" "+this.totalRings+" "+textDic.Mission.Rings_Rings_Found_2.value;this.popupMessageScript.addMessage(c),this.popupMessageScript.setFont(b.offsetX,b.offsetY,b.size)}else this.missionManager.missionComplete(this)},disableMission:function(){this.entity.enabled=!1},enableMission:function(){this.entity.enabled=!0},failMission:function(){this.entity.enabled=!0,this.rings.enabled=!1,this.ringCollected=0},startMission:function(){this.rings.enabled=!0;for(var a=this.allRings.length,b=0;a>b;b++)this.allRings[b].enabled=!0},destroyMission:function(){this.startBodyWrapper&&nick.engine.removeBody(this.startBodyWrapper.body);for(var a=this.allRings.length,b=0;a>b;b++)nick.engine.removeBody(this.allRings[b].script.BodyWrapper.body);this.entity.destroy()}},b});