'use strict';(function(){var R,fa,Z,$,S,aa,ba,u,G,s,ca,W,I,T,D,v,da,P,K,r,h,j,q,g,i,H,N,C,d,m,y,w,p,L,E,k;function F(a,b){function c(){}c.prototype=a;var f=new c,d;for(d in b)f[d]=b[d];b.toString!==Object.prototype.toString&&(f.toString=b.toString);return f}function ha(a){return a instanceof Array?function(){return x.iter(a)}:"function"==typeof a.iterator?A(a,a.iterator):a.iterator}function A(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=ka++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var e={},z=function(){return K.__string_rec(this,"")},V=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};e.EReg=V;V.__name__=["EReg"];V.prototype={matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,len:this.r.m[0].length}},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)a=this.r.m[a];else throw"EReg::matched";return a},match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},__class__:V};var x=function(){};e.HxOverrides=x;x.__name__=["HxOverrides"];x.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};x.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b);return a.substr(b,c)};x.remove=function(a,b){for(var c=0,f=a.length;c<f;){if(a[c]==b)return a.splice(c,1),!0;c++}return!1};x.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var X=function(){};e.Lambda=X;X.__name__=["Lambda"];X.array=function(a){for(var b=[],a=ha(a)();a.hasNext();){var c=a.next();b.push(c)}return b};X.count=function(a,b){var c=0;if(null==b)for(var f=ha(a)();f.hasNext();)f.next(),c++;else for(f=ha(a)();f.hasNext();){var d=f.next();b(d)&&c++}return c};X.indexOf=function(a,b){for(var c=0,f=ha(a)();f.hasNext();){var d=f.next();if(b==d)return c;c++}return-1};var Q=function(){};e.Main=Q;Q.__name__=["Main"];Q.onLocaleReady=function(){var a=h.Manifest.build("bootstrap");a.add("xml","../xml/game_config.xml");j._platform.loadAssetPack(a).get(Q.onSuccess)};Q.onSuccess=function(a){var b=new q.Library(a,"transition");Q._FirstScene=Z;Q._preloadArray=["common"];j.root.add((new $).parse(n.parse(a.getFile("xml").toString())));u.Scenes.init(a,Q._FirstScene,Q._preloadArray);j._platform.getTouch().get_supported();u.Scenes.defaultTransition(u.MovieTransition,[b.createSprite("face_group",!0)]);Q._FirstScene=null};Q.main=function(){j.init();j._platform.getStage().lockOrientation(g.Orientation.Landscape);var a=null;if(j._platform.getExternal().get_supported()){var b=r.document.getElementById("embedtarget");null!=b&&null!=b.getAttribute("base")&&(a=J.string(b.getAttribute("base")))}null!=a&&(ea.startsWith(a,"http://")||ea.startsWith(a,"https://")?(G.Assets.externalBase=a+"assets/",s.Locale.externalBase=a):(G.Assets.relativeBase=a+"assets/",s.Locale.relativeBase=a));s.Locale.init(Q.onLocaleReady,new s.DisneyParser,"strings/strings.xml")};var ga=function(){};e.IMap=ga;ga.__name__=["IMap"];var O=function(){};e.Reflect=O;O.__name__=["Reflect"];O.hasField=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};O.field=function(a,b){var c=null;try{c=a[b]}catch(f){}return c};O.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,f;for(f in a)"__id__"!=f&&"hx__closures__"!=f&&c.call(a,f)&&b.push(f)}return b};O.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)};var J=function(){};e.Std=J;J.__name__=["Std"];J.string=function(a){return K.__string_rec(a,"")};J.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==x.cca(a,1)||88==x.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};J.parseFloat=function(a){return parseFloat(a)};var Y=function(){this.b=""};e.StringBuf=Y;Y.__name__=["StringBuf"];Y.prototype={addSub:function(a,b,c){this.b+=null==c?x.substr(a,b,null):x.substr(a,b,c)},__class__:Y};var ea=function(){};e.StringTools=ea;ea.__name__=["StringTools"];ea.htmlEscape=function(a,b){a=a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;");return b?a.split('"').join("&quot;").split("'").join("&#039;"):a};ea.startsWith=function(a,b){return a.length>=b.length&&x.substr(a,0,b.length)==b};var B=e.ValueType={__ename__:!0,__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",")};B.TNull=["TNull",0];B.TNull.toString=z;B.TNull.__enum__=B;B.TInt=["TInt",1];B.TInt.toString=z;B.TInt.__enum__=B;B.TFloat=["TFloat",2];B.TFloat.toString=z;B.TFloat.__enum__=B;B.TBool=["TBool",3];B.TBool.toString=z;B.TBool.__enum__=B;B.TObject=["TObject",4];B.TObject.toString=z;B.TObject.__enum__=B;B.TFunction=["TFunction",5];B.TFunction.toString=z;B.TFunction.__enum__=B;B.TClass=function(a){a=["TClass",6,a];a.__enum__=B;a.toString=z;return a};B.TEnum=function(a){a=["TEnum",7,a];a.__enum__=B;a.toString=z;return a};B.TUnknown=["TUnknown",8];B.TUnknown.toString=z;B.TUnknown.__enum__=B;var M=function(){};e.Type=M;M.__name__=["Type"];M.getClass=function(a){return null==a?null:a.__class__};M.getClassName=function(a){return a.__name__.join(".")};M.resolveClass=function(a){a=e[a];return null==a||!a.__name__?null:a};M.resolveEnum=function(a){a=e[a];return null==a||!a.__ename__?null:a};M.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw"Too many arguments";}};M.createEnum=function(a,b,c){var f=O.field(a,b);if(null==f)throw"No such constructor "+b;if(O.isFunction(f)){if(null==c)throw"Constructor "+b+" need parameters";return f.apply(a,c)}if(null!=c&&0!=c.length)throw"Constructor "+b+" does not need parameters";return f};M["typeof"]=function(a){switch(typeof a){case "boolean":return B.TBool;case "string":return B.TClass(String);case "number":return Math.ceil(a)==a%2147483648?B.TInt:B.TFloat;case "object":if(null==a)return B.TNull;var b=a.__enum__;if(null!=b)return B.TEnum(b);a=a.__class__;return null!=a?B.TClass(a):B.TObject;case "function":return a.__name__||a.__ename__?B.TObject:B.TFunction;case "undefined":return B.TNull;default:return B.TUnknown}};M.enumIndex=function(a){return a[1]};e.XmlType={__ename__:!0,__constructs__:[]};var n=function(){};e.Xml=n;n.__name__=["Xml"];n.parse=function(a){return T.Parser.parse(a)};n.createElement=function(a){var b=new n;b.nodeType=n.Element;b._children=[];b._attributes=new D.StringMap;b.set_nodeName(a);return b};n.createPCData=function(a){var b=new n;b.nodeType=n.PCData;b.set_nodeValue(a);return b};n.createCData=function(a){var b=new n;b.nodeType=n.CData;b.set_nodeValue(a);return b};n.createComment=function(a){var b=new n;b.nodeType=n.Comment;b.set_nodeValue(a);return b};n.createDocType=function(a){var b=new n;b.nodeType=n.DocType;b.set_nodeValue(a);return b};n.createProcessingInstruction=function(a){var b=new n;b.nodeType=n.ProcessingInstruction;b.set_nodeValue(a);return b};n.createDocument=function(){var a=new n;a.nodeType=n.Document;a._children=[];return a};n.prototype={toString:function(){if(this.nodeType==n.PCData)return ea.htmlEscape(this._nodeValue);if(this.nodeType==n.CData)return"<![CDATA["+this._nodeValue+"]]\>";if(this.nodeType==n.Comment)return"<\!--"+
this._nodeValue+"--\>";if(this.nodeType==n.DocType)return"<!DOCTYPE "+this._nodeValue+">";if(this.nodeType==n.ProcessingInstruction)return"<?"+this._nodeValue+"?>";var a=new Y;if(this.nodeType==n.Element){a.b+="<";a.b+=J.string(this._nodeName);for(var b=this._attributes.keys();b.hasNext();){var c=b.next();a.b+=" ";a.b+=J.string(c);a.b+='="';a.b+=J.string(this._attributes.get(c));a.b+='"'}if(0==this._children.length)return a.b+="/>",a.b;a.b+=">"}for(b=this.iterator();b.hasNext();)c=b.next(),a.b+=J.string(c.toString());this.nodeType==n.Element&&(a.b+="</",a.b+=J.string(this._nodeName),a.b+=">");return a.b},addChild:function(a){if(null==this._children)throw"bad nodetype";null!=a._parent&&x.remove(a._parent._children,a);a._parent=this;this._children.push(a)},firstElement:function(){if(null==this._children)throw"bad nodetype";for(var a=0,b=this._children.length;a<b;){var c=this._children[a];if(c.nodeType==n.Element)return c;a++}return null},firstChild:function(){if(null==this._children)throw"bad nodetype";return this._children[0]},elementsNamed:function(a){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var b=this.cur,c=this.x.length;b<c;){var f=this.x[b];if(f.nodeType==n.Element&&f._nodeName==a)break;b++}this.cur=b;return b<c},next:function(){for(var b=this.cur,c=this.x.length;b<c;){var f=this.x[b];b++;if(f.nodeType==n.Element&&f._nodeName==a)return this.cur=b,f}return null}}},elements:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var a=this.cur,b=this.x.length;a<b&&!(this.x[a].nodeType==n.Element);)a+=1;this.cur=a;return a<b},next:function(){for(var a=this.cur,b=this.x.length;a<b;){var c=this.x[a],a=a+1;if(c.nodeType==n.Element)return this.cur=a,c}return null}}},iterator:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length},next:function(){return this.x[this.cur++]}}},exists:function(a){if(this.nodeType!=n.Element)throw"bad nodeType";return this._attributes.exists(a)},set:function(a,b){if(this.nodeType!=n.Element)throw"bad nodeType";this._attributes.set(a,b)},get:function(a){if(this.nodeType!=n.Element)throw"bad nodeType";return this._attributes.get(a)},set_nodeValue:function(a){if(this.nodeType==n.Element||this.nodeType==n.Document)throw"bad nodeType";return this._nodeValue=a},get_nodeValue:function(){if(this.nodeType==n.Element||this.nodeType==n.Document)throw"bad nodeType";return this._nodeValue},set_nodeName:function(a){if(this.nodeType!=n.Element)throw"bad nodeType";return this._nodeName=a},get_nodeName:function(){if(this.nodeType!=n.Element)throw"bad nodeType";return this._nodeName},__class__:n};R={};fa=void 0;R.codec={};R.codec.Base64=function(){this._buffer=[];R.codec.Base64._output=[];this._tmp=[];this.BASE64_CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.BASE64_ENCODE=Array(this.BASE64_CHARS.length);this.BASE64_DECODE=Array(127);for(var a=0,b=this.BASE64_CHARS.length;a<b;){var c=a++;this.BASE64_ENCODE[c]=x.cca(this.BASE64_CHARS,c);this.BASE64_DECODE[x.cca(this.BASE64_CHARS,c)]=c}};e["de.polygonal.core.codec.Base64"]=R.codec.Base64;R.codec.Base64.__name__=["de","polygonal","core","codec","Base64"];R.codec.Base64.prototype={_encode:function(a,b,c){null==c&&(c=76);null==b&&(b=!1);fa.ArrayUtil.shrink(this._buffer,0);for(var f=0,d=0,o="",g=a.length|0,o=g%3,g=g-o,e=this._buffer;d<g;){var i=a[d]<<24>>>24,h=a[d+1]<<24>>>24,l=a[d+2]<<24>>>24;e[f]=this.BASE64_ENCODE[(i&252)>>2];e[f+1]=this.BASE64_ENCODE[(i&3)<<4|h>>4];e[f+2]=this.BASE64_ENCODE[(h&15)<<2|l>>6];e[f+3]=this.BASE64_ENCODE[l&63];f+=4;d+=3}1==o?(i=a[d]<<24>>>24,e[f]=this.BASE64_ENCODE[(i&252)>>2],e[f+1]=this.BASE64_ENCODE[(i&3)<<4],e[f+2]=61,e[f+3]=61):2==o&&(i=a[d]<<24>>>24,h=a[d+1]<<24>>>24,e[f]=this.BASE64_ENCODE[(i&252)>>2],e[f+1]=this.BASE64_ENCODE[(i&3)<<4|h>>4],e[f+2]=this.BASE64_ENCODE[(h&15)<<2],e[f+3]=61);o=v.Bytes.ofData(e).readString(0,e.length);if(b){a=o.length/c;b=[];for(f=g=0;f<a;)d=f++,b[d]=x.substr(o,g,c),g+=c;b.push(x.substr(o,g,null));o=b.join("\n")}return o},_encodeStr:function(a,b,c){null==c&&(c=76);null==b&&(b=!1);var f=new v.BytesOutput;f.writeString(a);return this._encode(f.getBytes().b,b,c)},__class__:R.codec.Base64};fa={ArrayUtil:function(){}};e["de.polygonal.ds.ArrayUtil"]=fa.ArrayUtil;fa.ArrayUtil.__name__=["de","polygonal","ds","ArrayUtil"];fa.ArrayUtil.shrink=function(a,b){a.length>b&&(a.length=b);return a};h=void 0;j=void 0;q=void 0;g=void 0;i=void 0;H=void 0;N=void 0;C=void 0;d=void 0;m=void 0;y=void 0;w=void 0;p=void 0;y=void 0;L=void 0;E=void 0;k=void 0;i={Disposable:function(){}};e["flambe.util.Disposable"]=i.Disposable;i.Disposable.__name__=["flambe","util","Disposable"];i.Disposable.prototype={__class__:i.Disposable};H=function(){};e["flambe.Component"]=H;H.__name__=["flambe","Component"];H.__interfaces__=[i.Disposable];H.prototype={init:function(a,b){this.owner=a;this.next=b},get_name:function(){return null},dispose:function(){null!=this.owner&&this.owner.remove(this)},onUpdate:function(){},onRemoved:function(){},onAdded:function(){},__class__:H};N=function(){this._disposables=[]};e["flambe.Disposer"]=N;N.__name__=["flambe","Disposer"];N.__super__=H;N.prototype=F(H.prototype,{freeDisposables:function(){var a=this._disposables;this._disposables=[];for(var b=0;b<a.length;){var c=a[b];++b;c.dispose()}},dispose:function(){H.prototype.dispose.call(this);this.freeDisposables()},onRemoved:function(){this.freeDisposables()},connect2:function(a,b){this.add(a.connect(b));return this},connect1:function(a,b){this.add(a.connect(b));return this},connect0:function(a,b){this.add(a.connect(b));return this},add:function(a){this._disposables.push(a);return this},get_name:function(){return"Disposer_4"},__class__:N});C=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};e["flambe.Entity"]=C;C.__name__=["flambe","Entity"];C.__interfaces__=[i.Disposable];C.prototype={dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},removeChild:function(a){for(var b=null,c=this.firstChild;null!=c;){var f=c.next;if(c==a){null==b?this.firstChild=f:b.next=f;c.parent=null;c.next=null;break}b=c;c=f}},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var c=null,f=this.firstChild;null!=f;)c=f,f=f.next;null!=c?c.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},remove:function(a){for(var b=null,c=this.firstComponent;null!=c;){var f=c.next;if(c==a)return null==b?this.firstComponent=f:b.init(this,f),delete this._compMap[c.get_name()],c.onRemoved(),c.init(null,null),!0;b=c;c=f}return!1},add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),c=this._compMap[b];null!=c&&this.remove(c);this._compMap[b]=a;b=null;for(c=this.firstComponent;null!=c;)b=c,c=c.next;null!=b?b.next=a:this.firstComponent=a;a.init(this,null);a.onAdded();return this},__class__:C};d={Platform:function(){}};e["flambe.platform.Platform"]=d.Platform;d.Platform.__name__=["flambe","platform","Platform"];d.Platform.prototype={__class__:d.Platform};d.html={};d.html.HtmlPlatform=function(){};e["flambe.platform.html.HtmlPlatform"]=d.html.HtmlPlatform;d.html.HtmlPlatform.__name__=["flambe","platform","html","HtmlPlatform"];d.html.HtmlPlatform.__interfaces__=[d.Platform];d.html.HtmlPlatform.prototype={createRenderer:function(a){return new d.html.CanvasRenderer(a)},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/b.height},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getRenderer:function(){return this._renderer},getExternal:function(){null==this._external&&(this._external=new d.html.HtmlExternal);return this._external},getWeb:function(){null==this._web&&(this._web=new d.html.HtmlWeb(this._container));return this._web},getTouch:function(){return this._touch},getMouse:function(){return this._mouse},getPointer:function(){return this._pointer},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;j.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getTime:function(){return Date.now()/1E3},getStage:function(){return this._stage},loadAssetPack:function(a){return(new d.html.HtmlAssetPackLoader(this,a)).promise},init:function(){var a=this;d.html.HtmlUtil.fixAndroidMath();var b=null;try{b=r.window.flambe.canvas}catch(c){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.setAttribute("moz-opaque","true");this._stage=new d.html.HtmlStage(b);this._pointer=new d.BasicPointer;this._mouse=new d.html.HtmlMouse(this._pointer,b);this._renderer=this.createRenderer(b);this.mainLoop=new d.MainLoop;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var f=0,t=function(c){if(!(1E3>c.timeStamp-f)){var d=b.getBoundingClientRect(),t=a.getX(c,d),d=a.getY(c,d);switch(c.type){case "mousedown":c.target==b&&(c.preventDefault(),a._mouse.submitDown(t,d,c.button),b.focus());break;case "mousemove":a._mouse.submitMove(t,d);break;case "mouseup":a._mouse.submitUp(t,d,c.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(t,d,"mousewheel"==c.type?c.wheelDelta/40:-c.detail)&&c.preventDefault()}}};r.window.addEventListener("mousedown",t,!1);r.window.addEventListener("mousemove",t,!1);r.window.addEventListener("mouseup",t,!1);b.addEventListener("mousewheel",t,!1);b.addEventListener("DOMMouseScroll",t,!1);var o="undefined"!=typeof r.window.ontouchstart,t="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(o||t){var g=new d.BasicTouch(this._pointer,o?4:r.navigator.msMaxTouchPoints);this._touch=g;t=function(b){var c=o?b.changedTouches:[b],t=b.target.getBoundingClientRect();f=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":b.preventDefault();d.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&d.html.HtmlUtil.hideMobileBrowser();for(b=0;b<c.length;){var e=c[b];++b;var i=a.getX(e,t),U=a.getY(e,t),e=(o?e.identifier:e.pointerId)|0;g.submitDown(e,i,U)}break;case "touchmove":case "MSPointerMove":b.preventDefault();for(b=0;b<c.length;)e=c[b],++b,i=a.getX(e,t),U=a.getY(e,t),e=(o?e.identifier:e.pointerId)|0,g.submitMove(e,i,U);break;case "touchend":case "touchcancel":case "MSPointerUp":for(b=0;b<c.length;)e=c[b],++b,i=a.getX(e,t),U=a.getY(e,t),e=(o?e.identifier:e.pointerId)|0,g.submitUp(e,i,U)}};o?(b.addEventListener("touchstart",t,!1),b.addEventListener("touchmove",t,!1),b.addEventListener("touchend",t,!1),b.addEventListener("touchcancel",t,!1)):(b.addEventListener("MSPointerDown",t,!1),b.addEventListener("MSPointerMove",t,!1),b.addEventListener("MSPointerUp",t,!1))}else this._touch=new d.DummyTouch;var e=r.window.onerror;r.window.onerror=function(a,b,c){j.uncaughtError.emit(a);return null!=e?e(a,b,c):!1};var i=d.html.HtmlUtil.loadExtension("hidden",r.document);null!=i.value?(t=function(){j.hidden.set__(O.field(r.document,i.field))},t(null),r.document.addEventListener(i.prefix+
"visibilitychange",t,!1)):(t=function(a){j.hidden.set__("pagehide"==a.type)},r.window.addEventListener("pageshow",t,!1),r.window.addEventListener("pagehide",t,!1));j.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var h=d.html.HtmlUtil.loadExtension("requestAnimationFrame").value;if(null!=h){var l=r.window.performance,k=null!=l&&d.html.HtmlUtil.polyfill("now",l);k?this._lastUpdate=l.now():null;var n=null,n=function(c){a.update(k?l.now():c);h(n,b)};h(n,b)}else r.window.setInterval(function(){a.update(Date.now())},16);null},__class__:d.html.HtmlPlatform};i.Value=function(a,b){this._value=a;this._changed=null!=b?new i.Signal2(b):null};e["flambe.util.Value"]=i.Value;i.Value.__name__=["flambe","util","Value"];i.Value.prototype={get_changed:function(){null==this._changed&&(this._changed=new i.Signal2);return this._changed},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit(a,b));return a},watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},__class__:i.Value};i.SignalConnection=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};e["flambe.util.SignalConnection"]=i.SignalConnection;i.SignalConnection.__name__=["flambe","util","SignalConnection"];i.SignalConnection.__interfaces__=[i.Disposable];i.SignalConnection.prototype={dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},once:function(){this.stayInList=!1;return this},__class__:i.SignalConnection};i.SignalBase=function(a){this._head=null!=a?new i.SignalConnection(this,a):null;this._deferredTasks=null};e["flambe.util.SignalBase"]=i.SignalBase;i.SignalBase.__name__=["flambe","util","SignalBase"];i.SignalBase.prototype={listRemove:function(a){for(var b=null,c=this._head;null!=c;){if(c==a){a=c._next;null==b?this._head=a:b._next=a;break}b=c;c=c._next}},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var c=null,f=this._head;null!=f;)c=f,f=f._next;null!=c?c._next=a:this._head=a}},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},willEmit:function(){var a=this._head;this._head=i.SignalBase.DISPATCHING_SENTINEL;return a},defer:function(a){for(var b=null,c=this._deferredTasks;null!=c;)b=c,c=c.next;a=new i._SignalBase.Task(a);null!=b?b.next=a:this._deferredTasks=a},disconnect:function(a){var b=this;this._head==i.SignalBase.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},connectImpl:function(a,b){var c=this,f=new i.SignalConnection(this,a);this._head==i.SignalBase.DISPATCHING_SENTINEL?this.defer(function(){c.listAdd(f,b)}):this.listAdd(f,b);return f},__class__:i.SignalBase};i.Signal2=function(a){i.SignalBase.call(this,a)};e["flambe.util.Signal2"]=i.Signal2;i.Signal2.__name__=["flambe","util","Signal2"];i.Signal2.__super__=i.SignalBase;i.Signal2.prototype=F(i.SignalBase.prototype,{emitImpl:function(a,b){for(var c=this.willEmit(),f=c;null!=f;)f._listener(a,b),f.stayInList||f.dispose(),f=f._next;this.didEmit(c)},emit:function(a,b){var c=this;this._head==i.SignalBase.DISPATCHING_SENTINEL?this.defer(function(){c.emitImpl(a,b)}):this.emitImpl(a,b)},connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:i.Signal2});i.Signal1=function(a){i.SignalBase.call(this,a)};e["flambe.util.Signal1"]=i.Signal1;i.Signal1.__name__=["flambe","util","Signal1"];i.Signal1.__super__=i.SignalBase;i.Signal1.prototype=F(i.SignalBase.prototype,{emitImpl:function(a){for(var b=this.willEmit(),c=b;null!=c;)c._listener(a),c.stayInList||c.dispose(),c=c._next;this.didEmit(b)},emit:function(a){var b=this;this._head==i.SignalBase.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:i.Signal1});m={AnimatedFloat:function(a,b){this._behavior=null;i.Value.call(this,a,b)}};e["flambe.animation.AnimatedFloat"]=m.AnimatedFloat;m.AnimatedFloat.__name__=["flambe","animation","AnimatedFloat"];m.AnimatedFloat.__super__=i.Value;m.AnimatedFloat.prototype=F(i.Value.prototype,{set_behavior:function(a){this._behavior=a;this.update(0);return a},animateTo:function(a,b,c){this.set_behavior(new m.Tween(this._value,a,b,c))},update:function(a){null!=this._behavior&&(i.Value.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},set__:function(a){this._behavior=null;return i.Value.prototype.set__.call(this,a)},__class__:m.AnimatedFloat});j=function(){};e["flambe.System"]=j;j.__name__=["flambe","System"];j.init=function(){j._calledInit||(j._platform.init(),j._calledInit=!0)};y=function(){this._realDt=0};e["flambe.SpeedAdjuster"]=y;y.__name__=["flambe","SpeedAdjuster"];y.__super__=H;y.prototype=F(H.prototype,{onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},get_name:function(){return"SpeedAdjuster_6"},__class__:y});m.Behavior=function(){};e["flambe.animation.Behavior"]=m.Behavior;m.Behavior.__name__=["flambe","animation","Behavior"];m.Behavior.prototype={__class__:m.Behavior};m.Ease=function(){};e["flambe.animation.Ease"]=m.Ease;m.Ease.__name__=["flambe","animation","Ease"];m.Ease.linear=function(a){return a};m.Ease.quadOut=function(a){return a*(2-a)};m.Ease.quartIn=function(a){return a*a*a*a};m.Sine=function(a,b,c,f,d){null==d&&(d=0);null==f&&(f=0);null==c&&(c=1);this.start=a;this.end=b;this.cycles=f;this.speed=new m.AnimatedFloat(c);this._count=1.5707963267948966+d*(3.141592653589793/c);this._distance=0.5*(a-b);this._center=b+this._distance};e["flambe.animation.Sine"]=m.Sine;m.Sine.__name__=["flambe","animation","Sine"];m.Sine.__interfaces__=[m.Behavior];m.Sine.prototype={isComplete:function(){return 0<this.cycles&&0.5*((this._count-1.5707963267948966)/3.141592653589793)>=this.cycles},update:function(a){this.speed.update(a);this._count+=a*(3.141592653589793/this.speed._value);return this._center+Math.sin(this._count)*this._distance},__class__:m.Sine};m.Tween=function(a,b,c,f){this._from=a;this._to=b;this._duration=c;this.elapsed=0;this._easing=null!=f?f:m.Ease.linear};e["flambe.animation.Tween"]=m.Tween;m.Tween.__name__=["flambe","animation","Tween"];m.Tween.__interfaces__=[m.Behavior];m.Tween.prototype={isComplete:function(){return this.elapsed>=this._duration},update:function(a){this.elapsed+=a;return this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/this._duration)},__class__:m.Tween};h={Asset:function(){}};e["flambe.asset.Asset"]=h.Asset;h.Asset.__name__=["flambe","asset","Asset"];h.Asset.__interfaces__=[i.Disposable];h.Asset.prototype={__class__:h.Asset};h.AssetFormat=e["flambe.asset.AssetFormat"]={__ename__:!0,__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(",")};h.AssetFormat.WEBP=["WEBP",0];h.AssetFormat.WEBP.toString=z;h.AssetFormat.WEBP.__enum__=h.AssetFormat;h.AssetFormat.JXR=["JXR",1];h.AssetFormat.JXR.toString=z;h.AssetFormat.JXR.__enum__=h.AssetFormat;h.AssetFormat.PNG=["PNG",2];h.AssetFormat.PNG.toString=z;h.AssetFormat.PNG.__enum__=h.AssetFormat;h.AssetFormat.JPG=["JPG",3];h.AssetFormat.JPG.toString=z;h.AssetFormat.JPG.__enum__=h.AssetFormat;h.AssetFormat.GIF=["GIF",4];h.AssetFormat.GIF.toString=z;h.AssetFormat.GIF.__enum__=h.AssetFormat;h.AssetFormat.DDS=["DDS",5];h.AssetFormat.DDS.toString=z;h.AssetFormat.DDS.__enum__=h.AssetFormat;h.AssetFormat.PVR=["PVR",6];h.AssetFormat.PVR.toString=z;h.AssetFormat.PVR.__enum__=h.AssetFormat;h.AssetFormat.PKM=["PKM",7];h.AssetFormat.PKM.toString=z;h.AssetFormat.PKM.__enum__=h.AssetFormat;h.AssetFormat.MP3=["MP3",8];h.AssetFormat.MP3.toString=z;h.AssetFormat.MP3.__enum__=h.AssetFormat;h.AssetFormat.M4A=["M4A",9];h.AssetFormat.M4A.toString=z;h.AssetFormat.M4A.__enum__=h.AssetFormat;h.AssetFormat.OPUS=["OPUS",10];h.AssetFormat.OPUS.toString=z;h.AssetFormat.OPUS.__enum__=h.AssetFormat;h.AssetFormat.OGG=["OGG",11];h.AssetFormat.OGG.toString=z;h.AssetFormat.OGG.__enum__=h.AssetFormat;h.AssetFormat.WAV=["WAV",12];h.AssetFormat.WAV.toString=z;h.AssetFormat.WAV.__enum__=h.AssetFormat;h.AssetFormat.Data=["Data",13];h.AssetFormat.Data.toString=z;h.AssetFormat.Data.__enum__=h.AssetFormat;h.AssetEntry=function(a,b,c,f){this.name=a;this.url=b;this.format=c;this.bytes=f};e["flambe.asset.AssetEntry"]=h.AssetEntry;h.AssetEntry.__name__=["flambe","asset","AssetEntry"];h.AssetEntry.prototype={__class__:h.AssetEntry};h.AssetPack=function(){};e["flambe.asset.AssetPack"]=h.AssetPack;h.AssetPack.__name__=["flambe","asset","AssetPack"];h.AssetPack.__interfaces__=[i.Disposable];h.AssetPack.prototype={__class__:h.AssetPack};h.File=function(){};e["flambe.asset.File"]=h.File;h.File.__name__=["flambe","asset","File"];h.File.__interfaces__=[h.Asset];h.File.prototype={__class__:h.File};K=void 0;r=void 0;r=function(){};e["js.Browser"]=r;r.__name__=["js","Browser"];h.Manifest=function(){this._entries=[]};e["flambe.asset.Manifest"]=h.Manifest;h.Manifest.__name__=["flambe","asset","Manifest"];h.Manifest.build=function(a,b){null==b&&(b=!0);var c=O.field(da.Meta.getType(h.Manifest).assets[0],a);if(null==c){if(b)throw i.Strings.withFields("Missing asset pack",["name",a]);return null}var f=new h.Manifest;f.set_relativeBasePath("assets");for(var d=0;d<c.length;){var o=c[d];++d;var g=o.name,e=a+"/"+g+"?v="+J.string(o.md5),j=h.Manifest.inferFormat(g);j!=h.AssetFormat.Data&&(g=i.Strings.removeFileExtension(g));f.add(g,e,o.bytes,j)}return f};h.Manifest.exists=function(a){return O.hasField(da.Meta.getType(h.Manifest).assets[0],a)};h.Manifest.inferFormat=function(a){a=i.Strings.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return h.AssetFormat.GIF;case "jpg":case "jpeg":return h.AssetFormat.JPG;case "jxr":case "wdp":return h.AssetFormat.JXR;case "png":return h.AssetFormat.PNG;case "webp":return h.AssetFormat.WEBP;case "dds":return h.AssetFormat.DDS;case "pvr":return h.AssetFormat.PVR;case "pkm":return h.AssetFormat.PKM;case "m4a":return h.AssetFormat.M4A;case "mp3":return h.AssetFormat.MP3;case "ogg":return h.AssetFormat.OGG;case "opus":return h.AssetFormat.OPUS;case "wav":return h.AssetFormat.WAV}else null;return h.AssetFormat.Data};h.Manifest.prototype={set_externalBasePath:function(a){this._externalBasePath=a;null!=a&&null;return a},get_externalBasePath:function(){return this._externalBasePath},set_relativeBasePath:function(a){this._relativeBasePath=a;null!=a&&null;return a},get_relativeBasePath:function(){return this._relativeBasePath},getFullURL:function(a){var b=null!=this.get_externalBasePath()&&h.Manifest._supportsCrossOrigin?this.get_externalBasePath():this.get_relativeBasePath(),c=null!=this.get_externalBasePath()?this.get_externalBasePath():this.get_relativeBasePath();a.format==h.AssetFormat.Data&&(c=b);return null!=c?i.Strings.joinPath(c,a.url):a.url},iterator:function(){return x.iter(this._entries)},add:function(a,b,c,f){null==c&&(c=0);null==f&&(f=h.Manifest.inferFormat(b));a=new h.AssetEntry(a,b,f,c);this._entries.push(a);return a},__class__:h.Manifest};g={};g.BlendMode=e["flambe.display.BlendMode"]={__ename__:!0,__constructs__:["Normal","Add","Mask","Copy"]};g.BlendMode.Normal=["Normal",0];g.BlendMode.Normal.toString=z;g.BlendMode.Normal.__enum__=g.BlendMode;g.BlendMode.Add=["Add",1];g.BlendMode.Add.toString=z;g.BlendMode.Add.__enum__=g.BlendMode;g.BlendMode.Mask=["Mask",2];g.BlendMode.Mask.toString=z;g.BlendMode.Mask.__enum__=g.BlendMode;g.BlendMode.Copy=["Copy",3];g.BlendMode.Copy.toString=z;g.BlendMode.Copy.__enum__=g.BlendMode;w={Point:function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b}};e["flambe.math.Point"]=w.Point;w.Point.__name__=["flambe","math","Point"];w.Point.prototype={set:function(a,b){this.x=a;this.y=b},__class__:w.Point};g.Sprite=function(){this._viewMatrixUpdateCount=this._parentViewMatrixUpdateCount=0;this.blendMode=this.scissor=this._viewMatrix=null;var a=this;this._flags=139;this._localMatrix=new w.Matrix;var b=function(){a._flags|=12};this.x=new m.AnimatedFloat(0,b);this.y=new m.AnimatedFloat(0,b);this.rotation=new m.AnimatedFloat(0,b);this.scaleX=new m.AnimatedFloat(1,b);this.scaleY=new m.AnimatedFloat(1,b);this.anchorX=new m.AnimatedFloat(0,b);this.anchorY=new m.AnimatedFloat(0,b);this.alpha=new m.AnimatedFloat(1)};e["flambe.display.Sprite"]=g.Sprite;g.Sprite.__name__=["flambe","display","Sprite"];g.Sprite.hitTest=function(a,b,c){var f=a._compMap.Sprite_2;if(null!=f){if(3!=(f._flags&3))return null;f.getLocalMatrix().inverseTransform(b,c,g.Sprite._scratchPoint)&&(b=g.Sprite._scratchPoint.x,c=g.Sprite._scratchPoint.y);var d=f.scissor;if(null!=d&&!d.contains(b,c))return null}a=g.Sprite.hitTestBackwards(a.firstChild,b,c);return null!=a?a:null!=f&&f.containsLocal(b,c)?f:null};g.Sprite.getBounds=function(a,b){null==b&&(b=new w.Rectangle);b.set(1.79769313486231E308,1.79769313486231E308,-1.79769313486231E308,-1.79769313486231E308);g.Sprite.getBoundsImpl(a,null,b);b.width-=b.x;b.height-=b.y;return b};g.Sprite.render=function(a,b){var c=a._compMap.Sprite_2;if(null!=c){var f=c.alpha._value;if(0==(c._flags&1)||0>=f)return;b.save();1>f&&b.multiplyAlpha(f);null!=c.blendMode&&b.setBlendMode(c.blendMode);var f=c.getLocalMatrix(),d=f.m02,o=f.m12;0!=(c._flags&128)&&(d=Math.round(d),o=Math.round(o));b.transform(f.m00,f.m10,f.m01,f.m11,d,o);f=c.scissor;null!=f&&b.applyScissor(f.x,f.y,f.width,f.height);c.draw(b)}f=a._compMap.Director_5;if(null!=f){f=f.occludedScenes;for(d=0;d<f.length;)o=f[d],++d,g.Sprite.render(o,b)}for(f=a.firstChild;null!=f;)d=f.next,g.Sprite.render(f,b),f=d;null!=c&&b.restore()};g.Sprite.hitTestBackwards=function(a,b,c){if(null!=a){var f=g.Sprite.hitTestBackwards(a.next,b,c);return null!=f?f:g.Sprite.hitTest(a,b,c)}return null};g.Sprite.getBoundsImpl=function(a,b,c){var f=a._compMap.Sprite_2;if(null!=f){var b=null!=b?w.Matrix.multiply(b,f.getLocalMatrix()):f.getLocalMatrix(),d=f.getNaturalWidth(),f=f.getNaturalHeight();0<d&&0<f&&(g.Sprite.extendRect(b,0,0,c),g.Sprite.extendRect(b,d,0,c),g.Sprite.extendRect(b,d,f,c),g.Sprite.extendRect(b,0,f,c))}d=a._compMap.Director_5;if(null!=d)for(var d=d.occludedScenes,f=0,o=d.length;f<o;)g.Sprite.getBoundsImpl(d[f],b,c),++f;for(a=a.firstChild;null!=a;)d=a.next,g.Sprite.getBoundsImpl(a,b,c),a=d};g.Sprite.extendRect=function(a,b,c,f){a=a.transform(b,c,g.Sprite._scratchPoint);b=a.x;c=a.y;b<f.x&&(f.x=b);c<f.y&&(f.y=c);b>f.width&&(f.width=b);c>f.height&&(f.height=c)};g.Sprite.__super__=H;g.Sprite.prototype=F(H.prototype,{set_pointerEnabled:function(a){this._flags=i.BitSets.set(this._flags,2,a);return a},set_visible:function(a){this._flags=i.BitSets.set(this._flags,1,a);return a},get_pointerUp:function(){null==this._pointerUp&&(this._pointerUp=new i.Signal1);return this._pointerUp},get_pointerMove:function(){null==this._pointerMove&&(this._pointerMove=new i.Signal1);return this._pointerMove},get_pointerDown:function(){null==this._pointerDown&&(this._pointerDown=new i.Signal1);return this._pointerDown},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a._compMap.Sprite_2;if(null!=b)return b;a=a.parent}return null},isViewMatrixDirty:function(){if(0!=(this._flags&8))return!0;var a=this.getParentSprite();return null==a?!1:this._parentViewMatrixUpdateCount!=a._viewMatrixUpdateCount||a.isViewMatrixDirty()},draw:function(){},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},disablePointer:function(){this.set_pointerEnabled(!1);return this},setScaleXY:function(a,b){this.scaleX.set__(a);this.scaleY.set__(b);return this},setScale:function(a){this.scaleX.set__(a);this.scaleY.set__(a);return this},setXY:function(a,b){this.x.set__(a);this.y.set__(b);return this},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/2);this.anchorY.set__(this.getNaturalHeight()/2);return this},setAnchor:function(a,b){this.anchorX.set__(a);this.anchorY.set__(b);return this},getViewMatrix:function(){if(this.isViewMatrixDirty()){var a=this.getParentSprite();this._viewMatrix=null!=a?w.Matrix.multiply(a.getViewMatrix(),this.getLocalMatrix(),this._viewMatrix):this.getLocalMatrix().clone(this._viewMatrix);this._flags&=-9;null!=a&&(this._parentViewMatrixUpdateCount=a._viewMatrixUpdateCount);++this._viewMatrixUpdateCount}return this._viewMatrix},getLocalMatrix:function(){0!=(this._flags&4)&&(this._flags&=-5,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getNaturalHeight:function(){return 0},getNaturalWidth:function(){return 0},get_name:function(){return"Sprite_2"},__class__:g.Sprite});g.FillSprite=function(a,b,c){g.Sprite.call(this);this.color=a;this.width=new m.AnimatedFloat(b);this.height=new m.AnimatedFloat(c)};e["flambe.display.FillSprite"]=g.FillSprite;g.FillSprite.__name__=["flambe","display","FillSprite"];g.FillSprite.__super__=g.Sprite;g.FillSprite.prototype=F(g.Sprite.prototype,{onUpdate:function(a){g.Sprite.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},getNaturalHeight:function(){return this.height._value},getNaturalWidth:function(){return this.width._value},draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},__class__:g.FillSprite});g.Glyph=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=0;this.charCode=a};e["flambe.display.Glyph"]=g.Glyph;g.Glyph.__name__=["flambe","display","Glyph"];g.Glyph.prototype={setKerning:function(a,b){null==this._kernings&&(this._kernings=new D.IntMap);this._kernings.set(a,b)},getKerning:function(a){return null!=this._kernings?this._kernings.get(a)|0:0},draw:function(a,b,c){0<this.width&&a.drawSubImage(this.page,b+this.xOffset,c+this.yOffset,this.x,this.y,this.width,this.height)},__class__:g.Glyph};g.Font=function(a,b){this.name=b;this._pack=a;this.reload()};e["flambe.display.Font"]=g.Font;g.Font.__name__=["flambe","display","Font"];g.Font.prototype={reload:function(){this._glyphs=new D.IntMap;this._glyphs.set(g.Font.NEWLINE.charCode,g.Font.NEWLINE);for(var a=new g._Font.ConfigParser(this._pack.getFile(this.name+".fnt").toString()),b=new D.IntMap,c=this.name.lastIndexOf("/"),c=0<=c?x.substr(this.name,0,c+1):"",f=a.keywords();f.hasNext();)switch(f.next()){case "info":for(var d=a.pairs();d.hasNext();){var o=d.next();switch(o.key){case "size":this.size=o.getInt()}}break;case "page":for(var d=0,e=null,U=a.pairs();U.hasNext();)switch(o=U.next(),o.key){case "id":d=o.getInt();break;case "file":e=o.getString()}b.set(d,this._pack.getTexture(c+
i.Strings.removeFileExtension(e)));break;case "char":d=null;for(e=a.pairs();e.hasNext();)switch(o=e.next(),o.key){case "id":d=new g.Glyph(o.getInt());break;case "x":d.x=o.getInt();break;case "y":d.y=o.getInt();break;case "width":d.width=o.getInt();break;case "height":d.height=o.getInt();break;case "page":d.page=b.get(o.getInt());break;case "xoffset":d.xOffset=o.getInt();break;case "yoffset":d.yOffset=o.getInt();break;case "xadvance":d.xAdvance=o.getInt()}this._glyphs.set(d.charCode,d);break;case "kerning":d=null;e=-1;for(U=a.pairs();U.hasNext();)switch(o=U.next(),o.key){case "first":d=this._glyphs.get(o.getInt());break;case "second":e=o.getInt();break;case "amount":d.setKerning(e,o.getInt())}}},layoutText:function(a,b,c){null==c&&(c=0);null==b&&(b=g.TextAlign.Left);return new g.TextLayout(this,a,b,c)},__class__:g.Font};g.TextAlign=e["flambe.display.TextAlign"]={__ename__:!0,__constructs__:["Left","Center","Right"]};g.TextAlign.Left=["Left",0];g.TextAlign.Left.toString=z;g.TextAlign.Left.__enum__=g.TextAlign;g.TextAlign.Center=["Center",1];g.TextAlign.Center.toString=z;g.TextAlign.Center.__enum__=g.TextAlign;g.TextAlign.Right=["Right",2];g.TextAlign.Right.toString=z;g.TextAlign.Right.__enum__=g.TextAlign;g.TextLayout=function(a,b,c,f){this.lines=0;var d=this;this._font=a;this._glyphs=[];this._offsets=[];this.bounds=new w.Rectangle;for(var o=[],e=b.length,i=0;i<e;){var h=i++,j=b.charCodeAt(h),j=a._glyphs.get(j);null!=j?this._glyphs.push(j):null}for(var b=-1,l=0,k=0,e=a._glyphs.get(10),i=function(){d.bounds.width=w.FMath.max(d.bounds.width,l);d.bounds.height+=k;o[d.lines]=l;k=l=0;++d.lines},h=0;h<this._glyphs.length;){j=this._glyphs[h];this._offsets[h]=l;var n=0<f&&l+j.width>f;n||j==e?(n&&(0<=b?(this._glyphs[b]=e,l=this._offsets[b],h=b):this._glyphs.splice(h,0,e)),b=-1,k=a.size,i()):(32==j.charCode&&(b=h),l+=j.xAdvance,k=w.FMath.max(k,j.height+j.yOffset),h+1<this._glyphs.length&&(l+=j.getKerning(this._glyphs[h+1].charCode)));++h}i();for(var h=0,b=g.TextLayout.getAlignOffset(c,o[0],f),e=1.79769313486231E308,i=-1.79769313486231E308,m=n=0,q=this._glyphs.length;m<q;){j=this._glyphs[m];10==j.charCode&&(h+=a.size,++n,b=g.TextLayout.getAlignOffset(c,o[n],f));this._offsets[m]+=b;var p=h+j.yOffset,e=e<p?e:p,i=w.FMath.max(i,p+j.height);++m}this.bounds.x=g.TextLayout.getAlignOffset(c,this.bounds.width,f);this.bounds.y=e;this.bounds.height=i-e};e["flambe.display.TextLayout"]=g.TextLayout;g.TextLayout.__name__=["flambe","display","TextLayout"];g.TextLayout.getAlignOffset=function(a,b,c){switch(a[1]){case 0:return 0;case 2:return c-b;case 1:return(c-b)/2}};g.TextLayout.prototype={draw:function(a){for(var b=0,c=0,f=this._glyphs.length;c<f;){var d=this._glyphs[c];10==d.charCode?b+=this._font.size:d.draw(a,this._offsets[c],b);++c}},__class__:g.TextLayout};g._Font={};g._Font.ConfigParser=function(a){this._configText=a;this._keywordPattern=new V("([a-z]+)(.*)","");this._pairPattern=new V('([a-z]+)=("[^"]*"|[^\\s]+)',"")};e["flambe.display._Font.ConfigParser"]=g._Font.ConfigParser;g._Font.ConfigParser.__name__=["flambe","display","_Font","ConfigParser"];g._Font.ConfigParser.advance=function(a,b){var c=b.matchedPos();return x.substr(a,c.pos+c.len,a.length)};g._Font.ConfigParser.prototype={pairs:function(){var a=this,b=this._pairText;return{next:function(){b=g._Font.ConfigParser.advance(b,a._pairPattern);return new g._Font.ConfigPair(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},keywords:function(){var a=this,b=this._configText;return{next:function(){b=g._Font.ConfigParser.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},__class__:g._Font.ConfigParser};g._Font.ConfigPair=function(a,b){this.key=a;this._value=b};e["flambe.display._Font.ConfigPair"]=g._Font.ConfigPair;g._Font.ConfigPair.__name__=["flambe","display","_Font","ConfigPair"];g._Font.ConfigPair.prototype={getString:function(){return 34!=this._value.charCodeAt(0)?null:x.substr(this._value,1,this._value.length-
2)},getInt:function(){return J.parseInt(this._value)},__class__:g._Font.ConfigPair};g.Graphics=function(){};e["flambe.display.Graphics"]=g.Graphics;g.Graphics.__name__=["flambe","display","Graphics"];g.Graphics.prototype={__class__:g.Graphics};g.ImageSprite=function(a){g.Sprite.call(this);this.texture=a};e["flambe.display.ImageSprite"]=g.ImageSprite;g.ImageSprite.__name__=["flambe","display","ImageSprite"];g.ImageSprite.__super__=g.Sprite;g.ImageSprite.prototype=F(g.Sprite.prototype,{getNaturalHeight:function(){return this.texture.get_height()},getNaturalWidth:function(){return this.texture.get_width()},draw:function(a){a.drawImage(this.texture,0,0)},__class__:g.ImageSprite});g.Orientation=e["flambe.display.Orientation"]={__ename__:!0,__constructs__:["Portrait","Landscape"]};g.Orientation.Portrait=["Portrait",0];g.Orientation.Portrait.toString=z;g.Orientation.Portrait.__enum__=g.Orientation;g.Orientation.Landscape=["Landscape",1];g.Orientation.Landscape.toString=z;g.Orientation.Landscape.__enum__=g.Orientation;g.TextSprite=function(a,b){null==b&&(b="");this._layout=null;var c=this;g.Sprite.call(this);this._font=a;this._text=b;this._align=g.TextAlign.Left;this._flags|=64;this.wrapWidth=new m.AnimatedFloat(0,function(){c._flags|=64})};e["flambe.display.TextSprite"]=g.TextSprite;g.TextSprite.__name__=["flambe","display","TextSprite"];g.TextSprite.__super__=g.Sprite;g.TextSprite.prototype=F(g.Sprite.prototype,{onUpdate:function(a){g.Sprite.prototype.onUpdate.call(this,a);this.wrapWidth.update(a)},updateLayout:function(){0!=(this._flags&64)&&(this._flags&=-65,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value))},set_align:function(a){a!=this._align&&(this._align=a,this._flags|=64);return a},containsLocal:function(a,b){this.updateLayout();return this._layout.bounds.contains(a,b)},getNaturalHeight:function(){this.updateLayout();return this._layout.lines*this._font.size},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:this._layout.bounds.width},draw:function(a){this.updateLayout();this._layout.draw(a,this._align)},__class__:g.TextSprite});g.Texture=function(){};e["flambe.display.Texture"]=g.Texture;g.Texture.__name__=["flambe","display","Texture"];g.Texture.__interfaces__=[h.Asset];g.Texture.prototype={__class__:g.Texture};p={};p.MouseButton=e["flambe.input.MouseButton"]={__ename__:!0,__constructs__:["Left","Middle","Right","Unknown"]};p.MouseButton.Left=["Left",0];p.MouseButton.Left.toString=z;p.MouseButton.Left.__enum__=p.MouseButton;p.MouseButton.Middle=["Middle",1];p.MouseButton.Middle.toString=z;p.MouseButton.Middle.__enum__=p.MouseButton;p.MouseButton.Right=["Right",2];p.MouseButton.Right.toString=z;p.MouseButton.Right.__enum__=p.MouseButton;p.MouseButton.Unknown=function(a){a=["Unknown",3,a];a.__enum__=p.MouseButton;a.toString=z;return a};p.MouseCursor=e["flambe.input.MouseCursor"]={__ename__:!0,__constructs__:["Default","Button","None"]};p.MouseCursor.Default=["Default",0];p.MouseCursor.Default.toString=z;p.MouseCursor.Default.__enum__=p.MouseCursor;p.MouseCursor.Button=["Button",1];p.MouseCursor.Button.toString=z;p.MouseCursor.Button.__enum__=p.MouseCursor;p.MouseCursor.None=["None",2];p.MouseCursor.None.toString=z;p.MouseCursor.None.__enum__=p.MouseCursor;p.MouseEvent=function(){this.init(0,0,0,null)};e["flambe.input.MouseEvent"]=p.MouseEvent;p.MouseEvent.__name__=["flambe","input","MouseEvent"];p.MouseEvent.prototype={init:function(a,b,c,f){this.id=a;this.viewX=b;this.viewY=c;this.button=f},__class__:p.MouseEvent};p.EventSource=e["flambe.input.EventSource"]={__ename__:!0,__constructs__:["Mouse","Touch"]};p.EventSource.Mouse=function(a){a=["Mouse",0,a];a.__enum__=p.EventSource;a.toString=z;return a};p.EventSource.Touch=function(a){a=["Touch",1,a];a.__enum__=p.EventSource;a.toString=z;return a};p.PointerEvent=function(){this.init(0,0,0,null,null)};e["flambe.input.PointerEvent"]=p.PointerEvent;p.PointerEvent.__name__=["flambe","input","PointerEvent"];p.PointerEvent.prototype={init:function(a,b,c,f,d){this.id=a;this.viewX=b;this.viewY=c;this.hit=f;this.source=d;this._stopped=!1},__class__:p.PointerEvent};p.TouchPoint=function(a){this.id=a;this._source=p.EventSource.Touch(this)};e["flambe.input.TouchPoint"]=p.TouchPoint;p.TouchPoint.__name__=["flambe","input","TouchPoint"];p.TouchPoint.prototype={init:function(a,b){this.viewX=a;this.viewY=b},__class__:p.TouchPoint};w.FMath=function(){};e["flambe.math.FMath"]=w.FMath;w.FMath.__name__=["flambe","math","FMath"];w.FMath.max=function(a,b){return a>b?a:b};w.FMath.clamp=function(a,b,c){return a<b?b:a>c?c:a};w.Matrix=function(){this.identity()};e["flambe.math.Matrix"]=w.Matrix;w.Matrix.__name__=["flambe","math","Matrix"];w.Matrix.multiply=function(a,b,c){null==c&&(c=new w.Matrix);var f=a.m00*b.m00+a.m01*b.m10,d=a.m00*b.m01+a.m01*b.m11,o=a.m00*b.m02+a.m01*b.m12+a.m02;c.m00=f;c.m01=d;c.m02=o;f=a.m10*b.m00+a.m11*b.m10;d=a.m10*b.m01+a.m11*b.m11;o=a.m10*b.m02+a.m11*b.m12+a.m12;c.m10=f;c.m11=d;c.m12=o;return c};w.Matrix.prototype={clone:function(a){null==a&&(a=new w.Matrix);a.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);return a},inverseTransform:function(a,b,c){var f=this.determinant();if(0==f)return!1;a-=this.m02;b-=this.m12;c.x=(a*this.m11-b*this.m01)/f;c.y=(b*this.m00-a*this.m10)/f;return!0},determinant:function(){return this.m00*this.m11-this.m01*this.m10},transform:function(a,b,c){null==c&&(c=new w.Point);c.x=a*this.m00+b*this.m01+this.m02;c.y=a*this.m10+b*this.m11+this.m12;return c},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},compose:function(a,b,c,f,d){var o=Math.sin(d),d=Math.cos(d);this.set(d*c,o*c,-o*f,d*f,a,b)},identity:function(){this.set(1,0,0,1,0,0)},set:function(a,b,c,f,d,o){this.m00=a;this.m01=c;this.m02=d;this.m10=b;this.m11=f;this.m12=o},__class__:w.Matrix};w.Rectangle=function(a,b,c,f){null==f&&(f=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,c,f)};e["flambe.math.Rectangle"]=w.Rectangle;w.Rectangle.__name__=["flambe","math","Rectangle"];w.Rectangle.prototype={contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},set:function(a,b,c,f){this.x=a;this.y=b;this.width=c;this.height=f},__class__:w.Rectangle};d.BasicAsset=function(){this._disposed=!1};e["flambe.platform.BasicAsset"]=d.BasicAsset;d.BasicAsset.__name__=["flambe","platform","BasicAsset"];d.BasicAsset.__interfaces__=[h.Asset];d.BasicAsset.prototype={onDisposed:function(){null},dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},__class__:d.BasicAsset};d.BasicAssetPackLoader=function(a,b){var c=this;this.manifest=b;this._platform=a;this.promise=new i.Promise;this._bytesLoaded=new D.StringMap;this._pack=new d._BasicAssetPackLoader.BasicAssetPack(b,this);var f=X.array(b);if(0==f.length)this.handleSuccess();else{for(var t=new D.StringMap,o=0;o<f.length;){var e=f[o];++o;var g=t.get(e.name);null==g&&(g=[],t.set(e.name,g));g.push(e)}this._assetsRemaining=X.count(t);for(f=function(){return function(a){return function(){return function(){return a.iterator()}}()}}()(t)();f.hasNext();)g=f.next(),g=[g],this.pickBestEntry(g[0],function(a){return function(f){if(null!=f){var t=b.getFullURL(f);try{c.loadEntry(t,f)}catch(o){c.handleError(f,"Unexpected error: "+J.string(o))}t=c.promise;t.set_total(t._total+f.bytes)}else f=a[0][0],d.BasicAssetPackLoader.isAudio(f.format)?c.handleLoad(f,d.DummySound.getInstance()):c.handleError(f,"Could not find a supported format to load")}}(g))}};e["flambe.platform.BasicAssetPackLoader"]=d.BasicAssetPackLoader;d.BasicAssetPackLoader.__name__=["flambe","platform","BasicAssetPackLoader"];d.BasicAssetPackLoader.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};d.BasicAssetPackLoader.prototype={handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},handleError:function(a,b){this.promise.error.emit(i.Strings.withFields(b,["url",a.url]))},handleSuccess:function(){this.promise.set_result(this._pack)},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var c=0,f=function(a){return function(){return a.iterator()}}(this._bytesLoaded)();f.hasNext();)var d=f.next(),c=c+d;this.promise.set_progress(c)},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var c;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:c=this._pack.sounds;break;case 13:c=this._pack.files}c.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},getAssetFormats:function(){null},loadEntry:function(){null},pickBestEntry:function(a,b){this.getAssetFormats(function(c){for(var f=0;f<c.length;){var d=c[f];++f;for(var o=0;o<a.length;){var e=a[o];++o;if(e.format==d){b(e);return}}}b(null)})},onDisposed:function(){},__class__:d.BasicAssetPackLoader};d._BasicAssetPackLoader={};d._BasicAssetPackLoader.BasicAssetPack=function(a,b){this.disposed=!1;this._manifest=a;this.loader=b;this.textures=new D.StringMap;this.sounds=new D.StringMap;this.files=new D.StringMap};e["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=d._BasicAssetPackLoader.BasicAssetPack;d._BasicAssetPackLoader.BasicAssetPack.__name__=["flambe","platform","_BasicAssetPackLoader","BasicAssetPack"];d._BasicAssetPackLoader.BasicAssetPack.__interfaces__=[h.AssetPack];d._BasicAssetPackLoader.BasicAssetPack.prototype={get_manifest:function(){return this._manifest},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=function(a){return function(){return a.iterator()}}(this.textures)();a.hasNext();)a.next().dispose();this.textures=null;for(a=function(a){return function(){return a.iterator()}}(this.sounds)();a.hasNext();)a.next().dispose();this.sounds=null;for(a=function(a){return function(){return a.iterator()}}(this.files)();a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},getFile:function(a,b){null==b&&(b=!0);var c=this.files.get(a);if(null==c&&b)throw i.Strings.withFields("Missing file",["name",a]);return c},getSound:function(a,b){null==b&&(b=!0);var c=this.sounds.get(a);if(null==c&&b)throw i.Strings.withFields("Missing sound",["name",a]);return c},getTexture:function(a,b){null==b&&(b=!0);var c=this.textures.get(a);if(null==c&&b)throw i.Strings.withFields("Missing texture",["name",a]);return c},__class__:d._BasicAssetPackLoader.BasicAssetPack};d.BasicFile=function(a){d.BasicAsset.call(this);this._content=a};e["flambe.platform.BasicFile"]=d.BasicFile;d.BasicFile.__name__=["flambe","platform","BasicFile"];d.BasicFile.__interfaces__=[h.File];d.BasicFile.__super__=d.BasicAsset;d.BasicFile.prototype=F(d.BasicAsset.prototype,{onDisposed:function(){this._content=null},toString:function(){return this._content},__class__:d.BasicFile});y={MouseSystem:function(){}};e["flambe.subsystem.MouseSystem"]=y.MouseSystem;y.MouseSystem.__name__=["flambe","subsystem","MouseSystem"];y.MouseSystem.prototype={__class__:y.MouseSystem};d.BasicMouse=function(a){this._pointer=a;this._source=p.EventSource.Mouse(d.BasicMouse._sharedEvent);this.down=new i.Signal1;this.move=new i.Signal1;this.up=new i.Signal1;this.scroll=new i.Signal1;this._y=this._x=0;this._cursor=p.MouseCursor.Default;this._buttonStates=new D.IntMap};e["flambe.platform.BasicMouse"]=d.BasicMouse;d.BasicMouse.__name__=["flambe","platform","BasicMouse"];d.BasicMouse.__interfaces__=[y.MouseSystem];d.BasicMouse.prototype={prepare:function(a,b,c){this._x=a;this._y=b;d.BasicMouse._sharedEvent.init(d.BasicMouse._sharedEvent.id+1,a,b,c)},submitScroll:function(a,b,c){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit(c);return!0},submitUp:function(a,b,c){this._buttonStates.exists(c)&&(this._buttonStates.remove(c),this.prepare(a,b,d.MouseCodes.toButton(c)),this._pointer.submitUp(a,b,this._source),this.up.emit(d.BasicMouse._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit(d.BasicMouse._sharedEvent)},submitDown:function(a,b,c){this._buttonStates.exists(c)||(this._buttonStates.set(c,!0),this.prepare(a,b,d.MouseCodes.toButton(c)),this._pointer.submitDown(a,b,this._source),this.down.emit(d.BasicMouse._sharedEvent))},set_cursor:function(a){return this._cursor=a},get_supported:function(){return!0},__class__:d.BasicMouse};y.PointerSystem=function(){};e["flambe.subsystem.PointerSystem"]=y.PointerSystem;y.PointerSystem.__name__=["flambe","subsystem","PointerSystem"];y.PointerSystem.prototype={__class__:y.PointerSystem};d.BasicPointer=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=new i.Signal1;this.move=new i.Signal1;this.up=new i.Signal1;this._x=a;this._y=b;this._isDown=c};e["flambe.platform.BasicPointer"]=d.BasicPointer;d.BasicPointer.__name__=["flambe","platform","BasicPointer"];d.BasicPointer.__interfaces__=[y.PointerSystem];d.BasicPointer.prototype={prepare:function(a,b,c,f){this._x=a;this._y=b;d.BasicPointer._sharedEvent.init(d.BasicPointer._sharedEvent.id+1,a,b,c,f)},submitUp:function(a,b,c){if(this._isDown){this._isDown=!1;var f=[],t=g.Sprite.hitTest(j.root,a,b);if(null!=t){var o=t.owner;do{var e=o._compMap.Sprite_2;null!=e&&f.push(e);o=o.parent}while(null!=o)}this.prepare(a,b,t,c);for(a=0;a<f.length;)if(e=f[a],++a,e=e._pointerUp,null!=e&&(e.emit(d.BasicPointer._sharedEvent),d.BasicPointer._sharedEvent._stopped))return;this.up.emit(d.BasicPointer._sharedEvent)}},submitMove:function(a,b,c){var f=[],t=g.Sprite.hitTest(j.root,a,b);if(null!=t){var e=t.owner;do{var i=e._compMap.Sprite_2;null!=i&&f.push(i);e=e.parent}while(null!=e)}this.prepare(a,b,t,c);for(a=0;a<f.length;)if(i=f[a],++a,i=i._pointerMove,null!=i&&(i.emit(d.BasicPointer._sharedEvent),d.BasicPointer._sharedEvent._stopped))return;this.move.emit(d.BasicPointer._sharedEvent)},submitDown:function(a,b,c){if(!this._isDown){this._isDown=!0;var f=[],t=g.Sprite.hitTest(j.root,a,b);if(null!=t){var e=t.owner;do{var i=e._compMap.Sprite_2;null!=i&&f.push(i);e=e.parent}while(null!=e)}this.prepare(a,b,t,c);for(a=0;a<f.length;)if(i=f[a],++a,i=i._pointerDown,null!=i&&(i.emit(d.BasicPointer._sharedEvent),d.BasicPointer._sharedEvent._stopped))return;this.down.emit(d.BasicPointer._sharedEvent)}},isDown:function(){return this._isDown},get_y:function(){return this._y},get_x:function(){return this._x},__class__:d.BasicPointer};y.TouchSystem=function(){};e["flambe.subsystem.TouchSystem"]=y.TouchSystem;y.TouchSystem.__name__=["flambe","subsystem","TouchSystem"];y.TouchSystem.prototype={__class__:y.TouchSystem};d.BasicTouch=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new D.IntMap;this._points=[];this.down=new i.Signal1;this.move=new i.Signal1;this.up=new i.Signal1};e["flambe.platform.BasicTouch"]=d.BasicTouch;d.BasicTouch.__name__=["flambe","platform","BasicTouch"];d.BasicTouch.__interfaces__=[y.TouchSystem];d.BasicTouch.prototype={submitUp:function(a,b,c){var f=this._pointMap.get(a);null!=f&&(f.init(b,c),this._pointMap.remove(a),x.remove(this._points,f),this._pointerTouch==f&&(this._pointerTouch=null,this._pointer.submitUp(b,c,f._source)),this.up.emit(f))},submitMove:function(a,b,c){a=this._pointMap.get(a);null!=a&&(a.init(b,c),this._pointerTouch==a&&this._pointer.submitMove(b,c,a._source),this.move.emit(a))},submitDown:function(a,b,c){if(!this._pointMap.exists(a)){var f=new p.TouchPoint(a);f.init(b,c);this._pointMap.set(a,f);this._points.push(f);null==this._pointerTouch&&(this._pointerTouch=f,this._pointer.submitDown(b,c,f._source));this.down.emit(f)}},get_supported:function(){return!0},__class__:d.BasicTouch};L={Sound:function(){}};e["flambe.sound.Sound"]=L.Sound;L.Sound.__name__=["flambe","sound","Sound"];L.Sound.__interfaces__=[h.Asset];L.Sound.prototype={__class__:L.Sound};d.DummySound=function(){d.BasicAsset.call(this);this._playback=new d.DummyPlayback(this)};e["flambe.platform.DummySound"]=d.DummySound;d.DummySound.__name__=["flambe","platform","DummySound"];d.DummySound.__interfaces__=[L.Sound];d.DummySound.getInstance=function(){null==d.DummySound._instance&&(d.DummySound._instance=new d.DummySound);return d.DummySound._instance};d.DummySound.__super__=d.BasicAsset;d.DummySound.prototype=F(d.BasicAsset.prototype,{loop:function(){return this._playback},play:function(){return this._playback},__class__:d.DummySound});L.Playback=function(){};e["flambe.sound.Playback"]=L.Playback;L.Playback.__name__=["flambe","sound","Playback"];L.Playback.__interfaces__=[i.Disposable];L.Playback.prototype={__class__:L.Playback};d.DummyPlayback=function(a){this._sound=a;this.volume=new m.AnimatedFloat(0)};e["flambe.platform.DummyPlayback"]=d.DummyPlayback;d.DummyPlayback.__name__=["flambe","platform","DummyPlayback"];d.DummyPlayback.__interfaces__=[L.Playback];d.DummyPlayback.prototype={dispose:function(){},__class__:d.DummyPlayback};d.DummyTouch=function(){this.down=new i.Signal1;this.move=new i.Signal1;this.up=new i.Signal1};e["flambe.platform.DummyTouch"]=d.DummyTouch;d.DummyTouch.__name__=["flambe","platform","DummyTouch"];d.DummyTouch.__interfaces__=[y.TouchSystem];d.DummyTouch.prototype={get_supported:function(){return!1},__class__:d.DummyTouch};d.EventGroup=function(){this._entries=[]};e["flambe.platform.EventGroup"]=d.EventGroup;d.EventGroup.__name__=["flambe","platform","EventGroup"];d.EventGroup.__interfaces__=[i.Disposable];d.EventGroup.prototype={dispose:function(){for(var a=0,b=this._entries;a<b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},addDisposingListener:function(a,b,c){var f=this;this.addListener(a,b,function(a){f.dispose();c(a)})},addListener:function(a,b,c){a.addEventListener(b,c,!1);this._entries.push(new d._EventGroup.Entry(a,b,c))},__class__:d.EventGroup};d._EventGroup={};d._EventGroup.Entry=function(a,b,c){this.dispatcher=a;this.type=b;this.listener=c};e["flambe.platform._EventGroup.Entry"]=d._EventGroup.Entry;d._EventGroup.Entry.__name__=["flambe","platform","_EventGroup","Entry"];d._EventGroup.Entry.prototype={__class__:d._EventGroup.Entry};d.InternalGraphics=function(){};e["flambe.platform.InternalGraphics"]=d.InternalGraphics;d.InternalGraphics.__name__=["flambe","platform","InternalGraphics"];d.InternalGraphics.__interfaces__=[g.Graphics];d.InternalGraphics.prototype={__class__:d.InternalGraphics};d.MainLoop=function(){this._tickables=[]};e["flambe.platform.MainLoop"]=d.MainLoop;d.MainLoop.__name__=["flambe","platform","MainLoop"];d.MainLoop.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_6;if(null!=c&&(c._realDt=b,b*=c.scale._value,0>=b)){c.onUpdate(b);return}for(var f=a.firstComponent;null!=f;)c=f.next,f.onUpdate(b),f=c;for(f=a.firstChild;null!=f;)c=f.next,d.MainLoop.updateEntity(f,b),f=c};d.MainLoop.prototype={addTickable:function(a){this._tickables.push(a)},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),g.Sprite.render(j.root,b),a.didRender())},update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];null==c||c.update(a)?this._tickables.splice(b,1):++b}j.volume.update(a);d.MainLoop.updateEntity(j.root,a)}},__class__:d.MainLoop};d.MouseCodes=function(){};e["flambe.platform.MouseCodes"]=d.MouseCodes;d.MouseCodes.__name__=["flambe","platform","MouseCodes"];d.MouseCodes.toButton=function(a){switch(a){case 0:return p.MouseButton.Left;case 1:return p.MouseButton.Middle;case 2:return p.MouseButton.Right}return p.MouseButton.Unknown(a)};d.Renderer=function(){};e["flambe.platform.Renderer"]=d.Renderer;d.Renderer.__name__=["flambe","platform","Renderer"];d.Renderer.prototype={__class__:d.Renderer};d.Tickable=function(){};e["flambe.platform.Tickable"]=d.Tickable;d.Tickable.__name__=["flambe","platform","Tickable"];d.Tickable.prototype={__class__:d.Tickable};d.html.CanvasGraphics=function(a){this._firstDraw=!1;this._canvasCtx=a.getContext("2d")};e["flambe.platform.html.CanvasGraphics"]=d.html.CanvasGraphics;d.html.CanvasGraphics.__name__=["flambe","platform","html","CanvasGraphics"];d.html.CanvasGraphics.__interfaces__=[d.InternalGraphics];d.html.CanvasGraphics.prototype={didRender:function(){},willRender:function(){this._firstDraw=!0},applyScissor:function(a,b,c,f){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,c|0,f|0);this._canvasCtx.clip()},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="destination-in";break;case 3:b="copy"}this._canvasCtx.globalCompositeOperation=b},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},fillRect:function(a,b,c,f,d){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,c,f,d),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=(16777215&a).toString(16);6>a.length;)a="0"+J.string(a);this._canvasCtx.fillStyle="#"+J.string(a);this._canvasCtx.fillRect(b|0,c|0,f|0,d|0)}},drawSubImage:function(a,b,c,f,d,e,g){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubImage(a,b,c,f,d,e,g),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.image,f|0,d|0,e|0,g|0,b|0,c|0,e|0,g|0)},drawImage:function(a,b,c){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawImage(a,b,c),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.image,b|0,c|0)},restore:function(){this._canvasCtx.restore()},transform:function(a,b,c,f,d,e){this._canvasCtx.transform(a,b,c,f,d,e)},save:function(){this._canvasCtx.save()},__class__:d.html.CanvasGraphics};d.html.CanvasRenderer=function(a){this.graphics=new d.html.CanvasGraphics(a);j.hasGPU.set__(!0)};e["flambe.platform.html.CanvasRenderer"]=d.html.CanvasRenderer;d.html.CanvasRenderer.__name__=["flambe","platform","html","CanvasRenderer"];d.html.CanvasRenderer.__interfaces__=[d.Renderer];d.html.CanvasRenderer.prototype={didRender:function(){this.graphics.didRender()},willRender:function(){this.graphics.willRender()},createCompressedTexture:function(){return null},getCompressedTextureFormats:function(){return[]},createTexture:function(a){return new d.html.CanvasTexture(d.html.CanvasRenderer.CANVAS_TEXTURES?d.html.HtmlUtil.createCanvas(a):a)},__class__:d.html.CanvasRenderer};d.html.CanvasTexture=function(a){this.pattern=this._graphics=null;d.BasicAsset.call(this);this.image=a};e["flambe.platform.html.CanvasTexture"]=d.html.CanvasTexture;d.html.CanvasTexture.__name__=["flambe","platform","html","CanvasTexture"];d.html.CanvasTexture.__interfaces__=[g.Texture];d.html.CanvasTexture.__super__=d.BasicAsset;d.html.CanvasTexture.prototype=F(d.BasicAsset.prototype,{onDisposed:function(){this._graphics=this.pattern=this.image=null},get_height:function(){return this.image.height},get_width:function(){return this.image.width},__class__:d.html.CanvasTexture});d.html.HtmlAssetPackLoader=function(a,b){d.BasicAssetPackLoader.call(this,a,b)};e["flambe.platform.html.HtmlAssetPackLoader"]=d.html.HtmlAssetPackLoader;d.html.HtmlAssetPackLoader.__name__=["flambe","platform","html","HtmlAssetPackLoader"];d.html.HtmlAssetPackLoader.detectImageFormats=function(a){var b=[h.AssetFormat.PNG,h.AssetFormat.JPG,h.AssetFormat.GIF],c=2,f=r.document.createElement("img");f.onload=f.onerror=function(){1==f.width&&b.unshift(h.AssetFormat.WEBP);--c;0==c&&a(b)};f.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var d=r.document.createElement("img");d.onload=d.onerror=function(){1==d.width&&b.unshift(h.AssetFormat.JXR);--c;0==c&&a(b)};d.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};d.html.HtmlAssetPackLoader.detectAudioFormats=function(){var a=r.document.createElement("audio");if(null==a||null==A(a,a.canPlayType))return[];var b=new V("\\b(iPhone|iPod|iPad|Android)\\b",""),c=r.window.navigator.userAgent;if(!d.html.WebAudioSound.get_supported()&&b.match(c))return[];for(var b=[{format:h.AssetFormat.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:h.AssetFormat.MP3,mimeType:"audio/mpeg"},{format:h.AssetFormat.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:h.AssetFormat.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:h.AssetFormat.WAV,mimeType:"audio/wav"}],c=[],f=0;f<b.length;){var t=b[f];++f;var e="";try{e=a.canPlayType(t.mimeType)}catch(g){}""!=e&&c.push(t.format)}return c};d.html.HtmlAssetPackLoader.supportsBlob=function(){if(d.html.HtmlAssetPackLoader._detectBlobSupport){d.html.HtmlAssetPackLoader._detectBlobSupport=!1;var a=new XMLHttpRequest;a.open("GET",".",!0);a.responseType="blob";if("blob"!=a.responseType)return!1;d.html.HtmlAssetPackLoader._URL=d.html.HtmlUtil.loadExtension("URL").value}return null!=d.html.HtmlAssetPackLoader._URL&&null!=d.html.HtmlAssetPackLoader._URL.createObjectURL};d.html.HtmlAssetPackLoader.__super__=d.BasicAssetPackLoader;d.html.HtmlAssetPackLoader.prototype=F(d.BasicAssetPackLoader.prototype,{download:function(a,b,c,f){var d=this,e=new XMLHttpRequest,g=0,i=function(){g=Date.now();e.open("GET",a,!0);e.responseType=c;""==e.responseType&&(e.responseType="arraybuffer");e.send()},h=0;if("undefined"!=typeof e.onprogress){var j=4;e.onprogress=function(a){g=Date.now();d.handleProgress(b,a.loaded)};h=r.window.setInterval(function(){1<=e.readyState&&5E3<Date.now()-g&&(e.abort(),--j,0<j?i():(r.window.clearInterval(h),d.handleError(b,"Request timed out")))},1E3)}e.onload=function(){r.window.clearInterval(h);var a=e.response;null==a?a=e.responseText:"blob"==c&&"arraybuffer"==e.responseType&&(a=new Blob([e.response]));f(a)};e.onerror=function(){r.window.clearInterval(h);d.handleError(b,"Failed to load asset: error #"+e.status)};i();return e},getAssetFormats:function(a){var b=this;null==d.html.HtmlAssetPackLoader._supportedFormats&&(d.html.HtmlAssetPackLoader._supportedFormats=new i.Promise,d.html.HtmlAssetPackLoader.detectImageFormats(function(a){d.html.HtmlAssetPackLoader._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(d.html.HtmlAssetPackLoader.detectAudioFormats()).concat([h.AssetFormat.Data]))}));d.html.HtmlAssetPackLoader._supportedFormats.get(a)},loadEntry:function(a,b){var c=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var f=r.document.createElement("img"),e=new d.EventGroup;e.addDisposingListener(f,"load",function(){d.html.HtmlAssetPackLoader.supportsBlob()&&d.html.HtmlAssetPackLoader._URL.revokeObjectURL(f.src);var a=c._platform.getRenderer().createTexture(f);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});e.addDisposingListener(f,"error",function(){c.handleError(b,"Failed to load image")});d.html.HtmlAssetPackLoader.supportsBlob()?this.download(a,b,"blob",function(a){f.src=d.html.HtmlAssetPackLoader._URL.createObjectURL(a)}):f.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=c._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(d.html.WebAudioSound.get_supported())this.download(a,b,"arraybuffer",function(a){d.html.WebAudioSound.ctx.decodeAudioData(a,function(a){c.handleLoad(b,new d.html.WebAudioSound(a))},function(){c.handleLoad(b,d.DummySound.getInstance())})});else{var g=r.document.createElement("audio");g.preload="auto";var i=++d.html.HtmlAssetPackLoader._mediaRefCount;null==d.html.HtmlAssetPackLoader._mediaElements&&(d.html.HtmlAssetPackLoader._mediaElements=new D.IntMap);d.html.HtmlAssetPackLoader._mediaElements.set(i,g);e=new d.EventGroup;e.addDisposingListener(g,"canplaythrough",function(){d.html.HtmlAssetPackLoader._mediaElements.remove(i);c.handleLoad(b,new d.html.HtmlSound(g))});e.addDisposingListener(g,"error",function(){d.html.HtmlAssetPackLoader._mediaElements.remove(i);var a=g.error.code;3==a||4==a?c.handleLoad(b,d.DummySound.getInstance()):c.handleError(b,"Failed to load audio: "+g.error.code)});e.addListener(g,"progress",function(){if(0<g.buffered.length&&0<g.duration){var a=g.buffered.end(0)/g.duration;c.handleProgress(b,a*b.bytes|0)}});g.src=a;g.load()}break;case 13:this.download(a,b,"text",function(a){c.handleLoad(b,new d.BasicFile(a))})}},__class__:d.html.HtmlAssetPackLoader});y.ExternalSystem=function(){};e["flambe.subsystem.ExternalSystem"]=y.ExternalSystem;y.ExternalSystem.__name__=["flambe","subsystem","ExternalSystem"];y.ExternalSystem.prototype={__class__:y.ExternalSystem};d.html.HtmlExternal=function(){};e["flambe.platform.html.HtmlExternal"]=d.html.HtmlExternal;d.html.HtmlExternal.__name__=["flambe","platform","html","HtmlExternal"];d.html.HtmlExternal.__interfaces__=[y.ExternalSystem];d.html.HtmlExternal.prototype={get_supported:function(){return!0},__class__:d.html.HtmlExternal};d.html.HtmlMouse=function(a,b){d.BasicMouse.call(this,a);this._canvas=b};e["flambe.platform.html.HtmlMouse"]=d.html.HtmlMouse;d.html.HtmlMouse.__name__=["flambe","platform","html","HtmlMouse"];d.html.HtmlMouse.__super__=d.BasicMouse;d.html.HtmlMouse.prototype=F(d.BasicMouse.prototype,{set_cursor:function(a){var b;switch(a[1]){case 0:b="";break;case 1:b="pointer";break;case 2:b="none"}this._canvas.style.cursor=b;return d.BasicMouse.prototype.set_cursor.call(this,a)},__class__:d.html.HtmlMouse});d.html.HtmlSound=function(a){d.BasicAsset.call(this);this.audioElement=a};e["flambe.platform.html.HtmlSound"]=d.html.HtmlSound;d.html.HtmlSound.__name__=["flambe","platform","html","HtmlSound"];d.html.HtmlSound.__interfaces__=[L.Sound];d.html.HtmlSound.__super__=d.BasicAsset;d.html.HtmlSound.prototype=F(d.BasicAsset.prototype,{onDisposed:function(){this.audioElement=null},loop:function(a){null==a&&(a=1);return new d.html._HtmlSound.HtmlPlayback(this,a,!0)},play:function(a){null==a&&(a=1);return new d.html._HtmlSound.HtmlPlayback(this,a,!1)},__class__:d.html.HtmlSound});d.html._HtmlSound={};d.html._HtmlSound.HtmlPlayback=function(a,b,c){this._disposed=!1;var f=this;this._sound=a;this._tickableAdded=!1;this._clonedElement=r.document.createElement("audio");this._clonedElement.loop=c;this._clonedElement.src=a.audioElement.src;this.volume=new m.AnimatedFloat(b,function(){f.updateVolume()});this.updateVolume();this.playAudio();j.hidden._value&&this.set_paused(!0)};e["flambe.platform.html._HtmlSound.HtmlPlayback"]=d.html._HtmlSound.HtmlPlayback;d.html._HtmlSound.HtmlPlayback.__name__=["flambe","platform","html","_HtmlSound","HtmlPlayback"];d.html._HtmlSound.HtmlPlayback.__interfaces__=[d.Tickable,L.Playback];d.html._HtmlSound.HtmlPlayback.prototype={updateVolume:function(){this._clonedElement.volume=j.volume._value*this.volume._value},playAudio:function(){var a=this;this._clonedElement.play();this._tickableAdded||(d.html.HtmlPlatform.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=j.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=j.hidden.get_changed().connect(function(b){b?(a._wasPaused=a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},dispose:function(){this.set_paused(!0);this._disposed=!0},update:function(a){this.volume.update(a);return this.get_ended()||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},get_ended:function(){return this._disposed||this._clonedElement.ended},set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():this.playAudio());return a},__class__:d.html._HtmlSound.HtmlPlayback};y.StageSystem=function(){};e["flambe.subsystem.StageSystem"]=y.StageSystem;y.StageSystem.__name__=["flambe","subsystem","StageSystem"];y.StageSystem.prototype={__class__:y.StageSystem};d.html.HtmlStage=function(a){var b=this;this._canvas=a;this.resize=new i.Signal0;this.scaleFactor=d.html.HtmlStage.computeScaleFactor();1!=this.scaleFactor&&(d.html.HtmlUtil.setVendorStyle(this._canvas,"transform-origin","top left"),d.html.HtmlUtil.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));d.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&(r.window.addEventListener("orientationchange",function(){d.html.HtmlUtil.callLater(A(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());r.window.addEventListener("resize",A(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new i.Value(null);null!=r.window.orientation&&(r.window.addEventListener("orientationchange",A(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new i.Value(!1);d.html.HtmlUtil.addVendorListener(r.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};e["flambe.platform.html.HtmlStage"]=d.html.HtmlStage;d.html.HtmlStage.__name__=["flambe","platform","html","HtmlStage"];d.html.HtmlStage.__interfaces__=[y.StageSystem];d.html.HtmlStage.computeScaleFactor=function(){var a=r.window.devicePixelRatio;null==a&&(a=1);var b=r.document.createElement("canvas").getContext("2d"),b=d.html.HtmlUtil.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);a/=b;b=r.window.screen.height;return 1136<a*r.window.screen.width||1136<a*b?1:a};d.html.HtmlStage.prototype={updateFullscreen:function(){this.fullscreen.set__(!0==d.html.HtmlUtil.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],r.document).value)},onOrientationChange:function(){this.orientation.set__(d.html.HtmlUtil.orientation(r.window.orientation))},hideMobileBrowser:function(){var a=this,b=r.document.documentElement.style;b.height=r.window.innerHeight+100+"px";b.width=r.window.innerWidth+"px";b.overflow="visible";d.html.HtmlUtil.callLater(function(){d.html.HtmlUtil.hideMobileBrowser();d.html.HtmlUtil.callLater(function(){b.height=r.window.innerHeight+"px";a.onWindowResize(null)},100)})},resizeCanvas:function(a,b){var c=this.scaleFactor*a,f=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==f)return!1;this._canvas.width=c|0;this._canvas.height=f|0;this.resize.emit();return!0},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},lockOrientation:function(){},get_height:function(){return this._canvas.height},get_width:function(){return this._canvas.width},__class__:d.html.HtmlStage};d.html.HtmlUtil=function(){};e["flambe.platform.html.HtmlUtil"]=d.html.HtmlUtil;d.html.HtmlUtil.__name__=["flambe","platform","html","HtmlUtil"];d.html.HtmlUtil.callLater=function(a,b){null==b&&(b=0);r.window.setTimeout(a,b)};d.html.HtmlUtil.hideMobileBrowser=function(){r.window.scrollTo(1,0)};d.html.HtmlUtil.loadExtension=function(a,b){null==b&&(b=r.window);var c=O.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+x.substr(a,1,null),f=0,e=d.html.HtmlUtil.VENDOR_PREFIXES;f<e.length;){var g=e[f];++f;var i=g+c,h=O.field(b,i);if(null!=h)return{prefix:g,field:i,value:h}}return{prefix:null,field:null,value:null}};d.html.HtmlUtil.loadFirstExtension=function(a,b){for(var c=0;c<a.length;){var f=a[c];++c;f=d.html.HtmlUtil.loadExtension(f,b);if(null!=f.field)return f}return{prefix:null,field:null,value:null}};d.html.HtmlUtil.polyfill=function(a,b){null==b&&(b=r.window);var c=d.html.HtmlUtil.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};d.html.HtmlUtil.setVendorStyle=function(a,b,c){for(var a=a.style,f=0,e=d.html.HtmlUtil.VENDOR_PREFIXES;f<e.length;){var g=e[f];++f;a.setProperty("-"+g+"-"+b,c)}a.setProperty(b,c)};d.html.HtmlUtil.addVendorListener=function(a,b,c,f){for(var e=0,g=d.html.HtmlUtil.VENDOR_PREFIXES;e<g.length;){var i=g[e];++e;a.addEventListener(i+b,c,f)}a.addEventListener(b,c,f)};d.html.HtmlUtil.orientation=function(a){switch(a){case-90:case 90:return g.Orientation.Landscape;default:return g.Orientation.Portrait}};d.html.HtmlUtil.createEmptyCanvas=function(a,b){var c=r.document.createElement("canvas");c.width=a;c.height=b;return c};d.html.HtmlUtil.createCanvas=function(a){var b=d.html.HtmlUtil.createEmptyCanvas(a.width,a.height),c=b.getContext("2d");c.save();c.globalCompositeOperation="copy";c.drawImage(a,0,0);c.restore();return b};d.html.HtmlUtil.fixAndroidMath=function(){if(0<=r.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};y.WebSystem=function(){};e["flambe.subsystem.WebSystem"]=y.WebSystem;y.WebSystem.__name__=["flambe","subsystem","WebSystem"];y.WebSystem.prototype={__class__:y.WebSystem};d.html.HtmlWeb=function(a){this._container=a};e["flambe.platform.html.HtmlWeb"]=d.html.HtmlWeb;d.html.HtmlWeb.__name__=["flambe","platform","html","HtmlWeb"];d.html.HtmlWeb.__interfaces__=[y.WebSystem];d.html.HtmlWeb.prototype={openBrowser:function(a){r.window.open(a,"_blank")},__class__:d.html.HtmlWeb};d.html.WebAudioSound=function(a){d.BasicAsset.call(this);this.buffer=a};e["flambe.platform.html.WebAudioSound"]=d.html.WebAudioSound;d.html.WebAudioSound.__name__=["flambe","platform","html","WebAudioSound"];d.html.WebAudioSound.__interfaces__=[L.Sound];d.html.WebAudioSound.get_supported=function(){if(d.html.WebAudioSound._detectSupport){d.html.WebAudioSound._detectSupport=!1;var a=d.html.HtmlUtil.loadExtension("AudioContext").value;null!=a&&(d.html.WebAudioSound.ctx=new a,d.html.WebAudioSound.gain=d.html.WebAudioSound.createGain(),d.html.WebAudioSound.gain.connect(d.html.WebAudioSound.ctx.destination),j.volume.watch(function(a){d.html.WebAudioSound.gain.gain.value=a}))}return null!=d.html.WebAudioSound.ctx};d.html.WebAudioSound.createGain=function(){return null!=d.html.WebAudioSound.ctx.createGain?d.html.WebAudioSound.ctx.createGain():d.html.WebAudioSound.ctx.createGainNode()};d.html.WebAudioSound.start=function(a,b){null!=a.start?a.start(b):a.noteOn(b)};d.html.WebAudioSound.__super__=d.BasicAsset;d.html.WebAudioSound.prototype=F(d.BasicAsset.prototype,{onDisposed:function(){this.buffer=null},get_duration:function(){return this.buffer.duration},loop:function(a){null==a&&(a=1);return new d.html._WebAudioSound.WebAudioPlayback(this,a,!0)},play:function(a){null==a&&(a=1);return new d.html._WebAudioSound.WebAudioPlayback(this,a,!1)},__class__:d.html.WebAudioSound});d.html._WebAudioSound={};d.html._WebAudioSound.WebAudioPlayback=function(a,b,c){this._ended=!1;var f=this;this._sound=a;this._head=d.html.WebAudioSound.gain;this._sourceNode=d.html.WebAudioSound.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=c;this._sourceNode.onended=function(){f._ended=!0};d.html.WebAudioSound.start(this._sourceNode,0);this.playAudio();this.volume=new m.AnimatedFloat(b,function(a){f.setVolume(a)});1!=b&&this.setVolume(b);j.hidden._value&&this.set_paused(!0)};e["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=d.html._WebAudioSound.WebAudioPlayback;d.html._WebAudioSound.WebAudioPlayback.__name__=["flambe","platform","html","_WebAudioSound","WebAudioPlayback"];d.html._WebAudioSound.WebAudioPlayback.__interfaces__=[d.Tickable,L.Playback];d.html._WebAudioSound.WebAudioPlayback.prototype={playAudio:function(){var a=this;this._sourceNode.connect(this._head);this._startedAt=d.html.WebAudioSound.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(d.html.HtmlPlatform.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=j.hidden.get_changed().connect(function(b){b?(a._wasPaused=0<=a._pausedAt,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},setVolume:function(a){null==this._gainNode&&(this._gainNode=d.html.WebAudioSound.createGain(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},dispose:function(){this.set_paused(!0);this._ended=!0},update:function(a){this.volume.update(a);return this.get_ended()||0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},get_position:function(){return this.get_ended()?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(d.html.WebAudioSound.ctx.currentTime-this._startedAt)%this._sound.get_duration()},get_ended:function(){return this._ended||3==this._sourceNode.playbackState},set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},__class__:d.html._WebAudioSound.WebAudioPlayback};E={Director:function(){this._transitor=null;this.scenes=[];this.occludedScenes=[];this._root=new C}};e["flambe.scene.Director"]=E.Director;E.Director.__name__=["flambe","scene","Director"];E.Director.__super__=H;E.Director.prototype=F(H.prototype,{playTransition:function(a,b,c,f){this.completeTransition();this.add(b);null!=c?(this.occludedScenes.push(a),this._transitor=new E._Director.Transitor(a,b,c,f),this._transitor.init(this)):(f(),this.invalidateVisibility())},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a],b=b._compMap.Scene_1;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];b=this.get_topScene();null!=b&&this.show(b)},show:function(a){a=a._compMap.Scene_1;null!=a&&a.shown.emit()},hideAndDispose:function(a){this.hide(a);a.dispose()},hide:function(a){a=a._compMap.Scene_1;null!=a&&a.hidden.emit()},add:function(a){var b=this.get_topScene();null!=b&&this._root.removeChild(b);x.remove(this.scenes,a);this.scenes.push(a);this._root.addChild(a)},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onAdded:function(){this.owner.addChild(this._root)},unwindToScene:function(a,b){var c=this;this.completeTransition();var f=this.get_topScene();if(null!=f){if(f!=a){for(this.scenes.pop();0<this.scenes.length&&this.scenes[this.scenes.length-1]!=a;)this.scenes.pop().dispose();this.playTransition(f,a,b,function(){c.hideAndDispose(f)})}}else this.pushScene(a,b)},pushScene:function(a,b){var c=this;this.completeTransition();var f=this.get_topScene();null!=f?this.playTransition(f,a,b,function(){c.hide(f)}):(this.add(a),this.invalidateVisibility())},get_name:function(){return"Director_5"},__class__:E.Director});E._Director={};E._Director.Transitor=function(a,b,c,f){this._from=a;this._to=b;this._transition=c;this._onComplete=f};e["flambe.scene._Director.Transitor"]=E._Director.Transitor;E._Director.Transitor.__name__=["flambe","scene","_Director","Transitor"];E._Director.Transitor.prototype={complete:function(){this._transition.complete();this._onComplete()},update:function(a){return this._transition.update(a)},init:function(a){this._transition.init(a,this._from,this._to)},__class__:E._Director.Transitor};E.Transition=function(){};e["flambe.scene.Transition"]=E.Transition;E.Transition.__name__=["flambe","scene","Transition"];E.Transition.prototype={complete:function(){},update:function(){return!0},init:function(a,b,c){this._director=a;this._from=b;this._to=c},__class__:E.Transition};E.Scene=function(a){null==a&&(a=!0);this.opaque=a;this.shown=new i.Signal0;this.hidden=new i.Signal0};e["flambe.scene.Scene"]=E.Scene;E.Scene.__name__=["flambe","scene","Scene"];E.Scene.__super__=H;E.Scene.prototype=F(H.prototype,{get_name:function(){return"Scene_1"},__class__:E.Scene});k={Action:function(){}};e["flambe.script.Action"]=k.Action;k.Action.__name__=["flambe","script","Action"];k.Action.prototype={__class__:k.Action};k.AnimateBy=function(a,b,c,f){this._value=a;this._by=b;this._seconds=c;this._easing=f};e["flambe.script.AnimateBy"]=k.AnimateBy;k.AnimateBy.__name__=["flambe","script","AnimateBy"];k.AnimateBy.__interfaces__=[k.Action];k.AnimateBy.prototype={update:function(a){null==this._tween&&(this._tween=new m.Tween(this._value._value,this._value._value+this._by,this._seconds,this._easing),this._value.set_behavior(this._tween),this._value.update(a));if(this._value._behavior!=this._tween){var b=this._tween.elapsed-this._seconds;this._tween=null;return 0<b?a-b:0}return-1},__class__:k.AnimateBy};k.AnimateTo=function(a,b,c,f){this._value=a;this._to=b;this._seconds=c;this._easing=f};e["flambe.script.AnimateTo"]=k.AnimateTo;k.AnimateTo.__name__=["flambe","script","AnimateTo"];k.AnimateTo.__interfaces__=[k.Action];k.AnimateTo.prototype={update:function(a){null==this._tween&&(this._tween=new m.Tween(this._value._value,this._to,this._seconds,this._easing),this._value.set_behavior(this._tween),this._value.update(a));if(this._value._behavior!=this._tween){var b=this._tween.elapsed-this._seconds;this._tween=null;return 0<b?a-b:0}return-1},__class__:k.AnimateTo};k.CallFunction=function(a){this._fn=a};e["flambe.script.CallFunction"]=k.CallFunction;k.CallFunction.__name__=["flambe","script","CallFunction"];k.CallFunction.__interfaces__=[k.Action];k.CallFunction.prototype={update:function(){this._fn();return 0},__class__:k.CallFunction};k.MoveBy=function(a,b,c,f,d){this._x=a;this._y=b;this._seconds=c;this._easingX=f;this._easingY=d};e["flambe.script.MoveBy"]=k.MoveBy;k.MoveBy.__name__=["flambe","script","MoveBy"];k.MoveBy.__interfaces__=[k.Action];k.MoveBy.prototype={update:function(a,b){var c=b._compMap.Sprite_2;null==this._tweenX&&(this._tweenX=new m.Tween(c.x._value,c.x._value+this._x,this._seconds,this._easingX),c.x.set_behavior(this._tweenX),c.x.update(a),this._tweenY=new m.Tween(c.y._value,c.y._value+this._y,this._seconds,null!=this._easingY?this._easingY:this._easingX),c.y.set_behavior(this._tweenY),c.y.update(a));return c.x._behavior!=this._tweenX&&c.y._behavior!=this._tweenY?(c=w.FMath.max(this._tweenX.elapsed,this._tweenY.elapsed)-this._seconds,this._tweenY=this._tweenX=null,0<c?a-c:0):-1},__class__:k.MoveBy};k.Parallel=function(a){this._completedActions=[];this._runningActions=null!=a?a.slice():[]};e["flambe.script.Parallel"]=k.Parallel;k.Parallel.__name__=["flambe","script","Parallel"];k.Parallel.__interfaces__=[k.Action];k.Parallel.prototype={update:function(a,b){for(var c=!0,f=0,d=0,e=this._runningActions.length;d<e;){var g=d++,i=this._runningActions[g];if(null!=i){var h=i.update(a,b);0<=h?(this._runningActions[g]=null,this._completedActions.push(i),h>f&&(f=h)):c=!1}}return c?(this._runningActions=this._completedActions,this._completedActions=[],f):-1},__class__:k.Parallel};k.Script=function(){this.stopAll()};e["flambe.script.Script"]=k.Script;k.Script.__name__=["flambe","script","Script"];k.Script.__super__=H;k.Script.prototype=F(H.prototype,{onUpdate:function(a){for(var b=0;b<this._handles.length;){var c=this._handles[b];c.removed||0<=c.action.update(a,this.owner)?this._handles.splice(b,1):++b}},stopAll:function(){this._handles=[]},run:function(a){a=new k._Script.Handle(a);this._handles.push(a);return a},get_name:function(){return"Script_11"},__class__:k.Script});k._Script={};k._Script.Handle=function(a){this.removed=!1;this.action=a};e["flambe.script._Script.Handle"]=k._Script.Handle;k._Script.Handle.__name__=["flambe","script","_Script","Handle"];k._Script.Handle.__interfaces__=[i.Disposable];k._Script.Handle.prototype={dispose:function(){this.removed=!0;this.action=null},__class__:k._Script.Handle};k.Sequence=function(a){this._idx=0;this._runningActions=null!=a?a.slice():[]};e["flambe.script.Sequence"]=k.Sequence;k.Sequence.__name__=["flambe","script","Sequence"];k.Sequence.__interfaces__=[k.Action];k.Sequence.prototype={update:function(a,b){for(var c=0;;){var f=this._runningActions[this._idx];if(null!=f)if(f=f.update(a-c,b),0<=f)c+=f;else return-1;++this._idx;if(this._idx>=this._runningActions.length){this._idx=0;break}else if(c>a)return-1}return c},__class__:k.Sequence};q={BitmapSprite:function(a){g.Sprite.call(this);this.symbol=a;this.anchorX.set__(a.anchorX);this.anchorY.set__(a.anchorY)}};e["flambe.swf.BitmapSprite"]=q.BitmapSprite;q.BitmapSprite.__name__=["flambe","swf","BitmapSprite"];q.BitmapSprite.__super__=g.Sprite;q.BitmapSprite.prototype=F(g.Sprite.prototype,{getNaturalHeight:function(){return this.symbol.height},getNaturalWidth:function(){return this.symbol.width},draw:function(a){a.drawSubImage(this.symbol.atlas,0,0,this.symbol.x,this.symbol.y,this.symbol.width,this.symbol.height)},__class__:q.BitmapSprite});q.Symbol=function(){};e["flambe.swf.Symbol"]=q.Symbol;q.Symbol.__name__=["flambe","swf","Symbol"];q.Symbol.prototype={__class__:q.Symbol};q.BitmapSymbol=function(a,b){this._name=a.symbol;this.atlas=b;var c=a.rect;this.x=c[0];this.y=c[1];this.width=c[2];this.height=c[3];c=a.origin;null!=c?(this.anchorX=c[0],this.anchorY=c[1]):this.anchorY=this.anchorX=0};e["flambe.swf.BitmapSymbol"]=q.BitmapSymbol;q.BitmapSymbol.__name__=["flambe","swf","BitmapSymbol"];q.BitmapSymbol.__interfaces__=[q.Symbol];q.BitmapSymbol.prototype={get_name:function(){return this._name},createSprite:function(){return new q.BitmapSprite(this)},__class__:q.BitmapSymbol};q.Library=function(a,b){this._symbols=new D.StringMap;var c=P.parse(a.getFile(b+"/library.json").toString());this.frameRate=c.frameRate;for(var f=[],d=0,e=c.movies;d<e.length;){var g=e[d];++d;g=new q.MovieSymbol(this,g);f.push(g);this._symbols.set(g.get_name(),g)}d=c.textureGroups;(1!=d[0].scaleFactor||1<d.length)&&null;g=d[0].atlases;for(d=0;d<g.length;){c=g[d];++d;for(var h=a.getTexture(b+"/"+i.Strings.removeFileExtension(c.file)),e=0,c=c.textures;e<c.length;){var j=c[e];++e;j=new q.BitmapSymbol(j,h);this._symbols.set(j.get_name(),j)}}for(d=0;d<f.length;){g=f[d];++d;e=0;for(c=g.layers;e<c.length;){g=c[e];++e;g=g.keyframes;h=g.length;for(j=0;j<h;){var k=j++,l=g[k];if(null!=l.symbolName){var n=this._symbols.get(l.symbolName);l.symbol=n}if(1==l.duration&&k+1<h&&(k=g[k+1],!k.visible||null==k.symbolName))l.visible=!1}}}};e["flambe.swf.Library"]=q.Library;q.Library.__name__=["flambe","swf","Library"];q.Library.prototype={createSprite:function(a,b){null==b&&(b=!0);var c=this._symbols.get(a);if(null==c){if(b)throw i.Strings.withFields("Missing symbol",["name",a]);return null}return c.createSprite()},__class__:q.Library};q.MovieSprite=function(a){this._looped=null;g.Sprite.call(this);this.symbol=a;this.speed=new m.AnimatedFloat(1);this._animators=Array(a.layers.length);for(var b=0,c=this._animators.length;b<c;){var f=b++;this._animators[f]=new q._MovieSprite.LayerAnimator(a.layers[f])}this._position=this._frame=0;this["goto"](1)};e["flambe.swf.MovieSprite"]=q.MovieSprite;q.MovieSprite.__name__=["flambe","swf","MovieSprite"];q.MovieSprite.__super__=g.Sprite;q.MovieSprite.prototype=F(g.Sprite.prototype,{rewind:function(){this._position=0;this._flags|=32},get_looped:function(){null==this._looped&&(this._looped=new i.Signal0);return this._looped},set_paused:function(a){this._flags=i.BitSets.set(this._flags,16,a);return a},set_position:function(a){return this._position=w.FMath.clamp(a,0,this.symbol.duration)},"goto":function(a){if(this._frame!=a){if(a<this._frame)for(var b=0,c=this._animators;b<c.length;){var f=c[b];++b;f.needsKeyframeUpdate=!0;f.keyframeIdx=0}b=0;for(c=this._animators;b<c.length;)f=c[b],++b,f.composeFrame(a);this._frame=a}},onUpdate:function(a){g.Sprite.prototype.onUpdate.call(this,a);this.speed.update(a);switch(this._flags&48){case 0:this._position+=this.speed._value*a;this._position>this.symbol.duration&&(this._position%=this.symbol.duration,null!=this._looped&&this._looped.emit());break;case 32:this._flags&=-33}this["goto"](this._position*this.symbol.frameRate)},onRemoved:function(){g.Sprite.prototype.onRemoved.call(this);for(var a=0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.removeChild(c.content)}},onAdded:function(){g.Sprite.prototype.onAdded.call(this);for(var a=0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.addChild(c.content)}},getLayer:function(a,b){null==b&&(b=!0);for(var c=0,f=this._animators;c<f.length;){var d=f[c];++c;if(d.layer.name==a)return d.content}if(b)throw i.Strings.withFields("Missing layer",["name",a]);return null},__class__:q.MovieSprite});q._MovieSprite={};q._MovieSprite.LayerAnimator=function(a){this.keyframeIdx=0;this.needsKeyframeUpdate=!1;this.layer=a;this.content=new C;if(a.empty)this._sprites=null;else{this._sprites=Array(a.keyframes.length);for(var b=0,c=this._sprites.length;b<c;){var d=b++,e=a.keyframes[d];this._sprites[d]=0<d&&a.keyframes[d-1].symbol==e.symbol?this._sprites[d-1]:null==e.symbol?new g.Sprite:e.symbol.createSprite()}this.content.add(this._sprites[0])}};e["flambe.swf._MovieSprite.LayerAnimator"]=q._MovieSprite.LayerAnimator;q._MovieSprite.LayerAnimator.__name__=["flambe","swf","_MovieSprite","LayerAnimator"];q._MovieSprite.LayerAnimator.prototype={composeFrame:function(a){if(null!=this._sprites){var b=this.layer.keyframes,c=b.length-1;if(a>this.layer.frames)this.content._compMap.Sprite_2.set_visible(!1),this.keyframeIdx=c,this.needsKeyframeUpdate=!0;else{for(;this.keyframeIdx<c&&b[this.keyframeIdx+1].index<=a;)++this.keyframeIdx,this.needsKeyframeUpdate=!0;var d;this.needsKeyframeUpdate?(this.needsKeyframeUpdate=!1,d=this._sprites[this.keyframeIdx],d!=this.content._compMap.Sprite_2&&(M.getClass(d)==q.MovieSprite&&d.rewind(),this.content.add(d))):d=this.content._compMap.Sprite_2;var e=b[this.keyframeIdx],g=e.visible&&null!=e.symbol;d.set_visible(g);if(g){var g=e.x,i=e.y,h=e.scaleX,j=e.scaleY,k=e.skewX,l=e.skewY,n=e.alpha;if(e.tweened&&this.keyframeIdx<c){a=(a-e.index)/e.duration;c=e.ease;if(0!=c){var m;0>c?(m=1-a,m=1-m*m,c=-c):m=a*a;a=c*m+(1-c)*a}b=b[this.keyframeIdx+1];g+=(b.x-g)*a;i+=(b.y-i)*a;h+=(b.scaleX-h)*a;j+=(b.scaleY-j)*a;k+=(b.skewX-k)*a;l+=(b.skewY-l)*a;n+=(b.alpha-n)*a}b=d.getLocalMatrix();a=Math.sin(k);k=Math.cos(k);c=Math.sin(l);l=Math.cos(l);b.set(l*h,c*h,-a*j,k*j,g,i);b.translate(-e.pivotX,-e.pivotY);d.alpha.set__(n)}}}},__class__:q._MovieSprite.LayerAnimator};q.MovieSymbol=function(a,b){this._name=b.id;this.frameRate=a.frameRate;this.frames=0;this.layers=Array(b.layers.length);for(var c=0,d=this.layers.length;c<d;){var e=c++,g=new q.MovieLayer(b.layers[e]);this.frames=Math.max(g.frames,this.frames);this.layers[e]=g}this.duration=this.frames/this.frameRate};e["flambe.swf.MovieSymbol"]=q.MovieSymbol;q.MovieSymbol.__name__=["flambe","swf","MovieSymbol"];q.MovieSymbol.__interfaces__=[q.Symbol];q.MovieSymbol.prototype={createSprite:function(){return new q.MovieSprite(this)},get_name:function(){return this._name},__class__:q.MovieSymbol};q.MovieLayer=function(a){this.empty=!0;this.name=a.name;var b=null;this.keyframes=Array(a.keyframes.length);for(var c=0,d=this.keyframes.length;c<d;){var e=c++,b=new q.MovieKeyframe(a.keyframes[e],b);this.keyframes[e]=b;this.empty=this.empty&&null==b.symbolName}this.frames=null!=b?b.index+(b.duration|0):0};e["flambe.swf.MovieLayer"]=q.MovieLayer;q.MovieLayer.__name__=["flambe","swf","MovieLayer"];q.MovieLayer.prototype={__class__:q.MovieLayer};q.MovieKeyframe=function(a,b){this.ease=0;this.visible=this.tweened=!0;this.alpha=1;this.skewX=this.skewY=this.pivotX=this.pivotY=0;this.scaleX=this.scaleY=1;this.x=this.y=0;this.symbol=null;this.index=null!=b?b.index+b.duration:0;this.duration=a.duration;this.label=a.label;this.symbolName=a.ref;var c=a.loc;null!=c&&(this.x=c[0],this.y=c[1]);c=a.scale;null!=c&&(this.scaleX=c[0],this.scaleY=c[1]);c=a.skew;null!=c&&(this.skewX=c[0],this.skewY=c[1]);c=a.pivot;null!=c&&(this.pivotX=c[0],this.pivotY=c[1]);null!=a.alpha&&(this.alpha=a.alpha);null!=a.visible&&(this.visible=a.visible);null!=a.tweened&&(this.tweened=a.tweened);null!=a.ease&&(this.ease=a.ease)};e["flambe.swf.MovieKeyframe"]=q.MovieKeyframe;q.MovieKeyframe.__name__=["flambe","swf","MovieKeyframe"];q.MovieKeyframe.prototype={__class__:q.MovieKeyframe};i.BitSets=function(){};e["flambe.util.BitSets"]=i.BitSets;i.BitSets.__name__=["flambe","util","BitSets"];i.BitSets.set=function(a,b,c){return c?a|b:a&~b};i.Promise=function(){this.success=new i.Signal1;this.error=new i.Signal1;this.progressChanged=new i.Signal0;this.hasResult=!1;this._total=this._progress=0};e["flambe.util.Promise"]=i.Promise;i.Promise.__name__=["flambe","util","Promise"];i.Promise.prototype={set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit());return a},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit(a);return a},get_result:function(){if(!this.hasResult)throw"Promise result not yet available";return this._result},__class__:i.Promise};i.Signal0=function(a){i.SignalBase.call(this,a)};e["flambe.util.Signal0"]=i.Signal0;i.Signal0.__name__=["flambe","util","Signal0"];i.Signal0.__super__=i.SignalBase;i.Signal0.prototype=F(i.SignalBase.prototype,{emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},emit:function(){var a=this;this._head==i.SignalBase.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:i.Signal0});i._SignalBase={};i._SignalBase.Task=function(a){this.next=null;this.fn=a};e["flambe.util._SignalBase.Task"]=i._SignalBase.Task;i._SignalBase.Task.__name__=["flambe","util","_SignalBase","Task"];i._SignalBase.Task.prototype={__class__:i._SignalBase.Task};i.Strings=function(){};e["flambe.util.Strings"]=i.Strings;i.Strings.__name__=["flambe","util","Strings"];i.Strings.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?x.substr(a,b+1,null):null};i.Strings.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?x.substr(a,0,b):a};i.Strings.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=x.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=x.substr(a,b+1,null));return i.Strings.getFileExtension(a)};i.Strings.joinPath=function(a,b){47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};i.Strings.withFields=function(a,b){var c=b.length;if(0<c){for(var a=a+(0<a.length?" [":"["),d=0;d<c;){0<d&&(a+=", ");var e=b[d],g=b[d+1];if(K.__instanceof(g,Error)){var i=g.stack;null!=i&&(g=i)}a+=e+"="+J.string(g);d+=2}a+="]"}return a};T=void 0;D=void 0;v=void 0;da=void 0;P=void 0;P=function(){};e["haxe.Json"]=P;P.__name__=["haxe","Json"];P.parse=function(a){return(new P).doParse(a)};P.stringify=function(a,b){return(new P).toString(a,b)};P.prototype={parseNumber:function(a){for(var b=this.pos-1,c=45==a,d=!c,e=48==a,g=!1,i=!1,h=!1,j=!1;;){a=this.str.charCodeAt(this.pos++);switch(a){case 48:e&&!g&&this.invalidNumber(b);c&&(c=!1,e=!0);d=!0;break;case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:e&&!g&&this.invalidNumber(b);c&&(c=!1);d=!0;e=!1;break;case 46:(c||g)&&this.invalidNumber(b);d=!1;g=!0;break;case 101:case 69:(c||e||i)&&this.invalidNumber(b);d=!1;i=!0;break;case 43:case 45:(!i||h)&&this.invalidNumber(b);d=!1;h=!0;break;default:d||this.invalidNumber(b),this.pos--,j=!0}if(j)break}a=J.parseFloat(x.substr(this.str,b,this.pos-b));b=a|0;return b==a?b:a},invalidNumber:function(a){throw"Invalid number at position "+
a+": "+x.substr(this.str,a,this.pos-a);},parseString:function(){for(var a=this.pos,b=new Y;;){var c=this.str.charCodeAt(this.pos++);if(34==c)break;if(92==c){b.addSub(this.str,a,this.pos-a-1);c=this.str.charCodeAt(this.pos++);switch(c){case 114:b.b+="\r";break;case 110:b.b+="\n";break;case 116:b.b+="\t";break;case 98:b.b+="\u0008";break;case 102:b.b+="\u000c";break;case 47:case 92:case 34:b.b+=String.fromCharCode(c);break;case 117:a=J.parseInt("0x"+x.substr(this.str,this.pos,4));this.pos+=4;b.b+=String.fromCharCode(a);break;default:throw"Invalid escape sequence \\"+String.fromCharCode(c)+" at position "+(this.pos-1);}a=this.pos}else if(c!=c)throw"Unclosed string";}b.addSub(this.str,a,this.pos-a-1);return b.b},parseRec:function(){for(;;){var a=this.str.charCodeAt(this.pos++);switch(a){case 32:case 13:case 10:case 9:break;case 123:for(var b={},c=null,a=null;;){var d=this.str.charCodeAt(this.pos++);switch(d){case 32:case 13:case 10:case 9:break;case 125:return(null!=c||!1==a)&&this.invalidChar(),b;case 58:null==c&&this.invalidChar();b[c]=this.parseRec();c=null;a=!0;break;case 44:a?a=!1:this.invalidChar();break;case 34:a&&this.invalidChar();c=this.parseString();break;default:this.invalidChar()}}break;case 91:b=[];for(a=null;;)switch(d=this.str.charCodeAt(this.pos++),d){case 32:case 13:case 10:case 9:break;case 93:return!1==a&&this.invalidChar(),b;case 44:a?a=!1:this.invalidChar();break;default:a&&this.invalidChar(),this.pos--,b.push(this.parseRec()),a=!0}break;case 116:a=this.pos;if(114!=this.str.charCodeAt(this.pos++)||117!=this.str.charCodeAt(this.pos++)||101!=this.str.charCodeAt(this.pos++))this.pos=a,this.invalidChar();return!0;case 102:a=this.pos;if(97!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++)||115!=this.str.charCodeAt(this.pos++)||101!=this.str.charCodeAt(this.pos++))this.pos=a,this.invalidChar();return!1;case 110:a=this.pos;if(117!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++))this.pos=a,this.invalidChar();return null;case 34:return this.parseString();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 45:return this.parseNumber(a);default:this.invalidChar()}}},invalidChar:function(){this.pos--;throw"Invalid char "+this.str.charCodeAt(this.pos)+" at position "+this.pos;},doParse:function(a){this.str=a;this.pos=0;return this.parseRec()},quote:function(a){this.buf.b+='"';for(var b=0;;){var c=a.charCodeAt(b++);if(c!=c)break;switch(c){case 34:this.buf.b+='\\"';break;case 92:this.buf.b+="\\\\";break;case 10:this.buf.b+="\\n";break;case 13:this.buf.b+="\\r";break;case 9:this.buf.b+="\\t";break;case 8:this.buf.b+="\\b";break;case 12:this.buf.b+="\\f";break;default:this.buf.b+=String.fromCharCode(c)}}this.buf.b+='"'},toStringRec:function(a,b){null!=this.replacer&&(b=this.replacer(a,b));var c=M["typeof"](b);switch(c[1]){case 8:this.buf.b+='"???"';break;case 4:this.objString(b);break;case 1:this.buf.b+=J.string(b);break;case 2:this.buf.b+=J.string(Math.isFinite(b)?b:"null");break;case 5:this.buf.b+='"<fun>"';break;case 6:c=c[2];if(c==String)this.quote(b);else if(c==Array){c=b;this.buf.b+="[";var d=c.length;if(0<d){this.toStringRec(0,c[0]);for(var e=1;e<d;)this.buf.b+=",",this.toStringRec(e,c[e++])}this.buf.b+="]"}else if(c==D.StringMap){c=b;d={};for(e=c.keys();e.hasNext();){var g=e.next();d[g]=c.get(g)}this.objString(d)}else this.objString(b);break;case 7:e=M.enumIndex(b);this.buf.b+=J.string(e);break;case 3:this.buf.b+=J.string(b);break;case 0:this.buf.b+="null"}},objString:function(a){this.fieldsString(a,O.fields(a))},fieldsString:function(a,b){var c=!0;this.buf.b+="{";for(var d=0;d<b.length;){var e=b[d];++d;var g=O.field(a,e);O.isFunction(g)||(c?c=!1:this.buf.b+=",",this.quote(e),this.buf.b+=":",this.toStringRec(e,g))}this.buf.b+="}"},toString:function(a,b){this.buf=new Y;this.replacer=b;this.toStringRec("",a);return this.buf.b},__class__:P};D={IntMap:function(){this.h={}}};e["haxe.ds.IntMap"]=D.IntMap;D.IntMap.__name__=["haxe","ds","IntMap"];D.IntMap.__interfaces__=[ga];D.IntMap.prototype={remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},exists:function(a){return this.h.hasOwnProperty(a)},get:function(a){return this.h[a]},set:function(a,b){this.h[a]=b},__class__:D.IntMap};D.StringMap=function(){this.h={}};e["haxe.ds.StringMap"]=D.StringMap;D.StringMap.__name__=["haxe","ds","StringMap"];D.StringMap.__interfaces__=[ga];D.StringMap.prototype={iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return x.iter(a)},remove:function(a){a="$"+a;if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},exists:function(a){return this.h.hasOwnProperty("$"+a)},get:function(a){return this.h["$"+a]},set:function(a,b){this.h["$"+a]=b},__class__:D.StringMap};v={Bytes:function(a,b){this.length=a;this.b=b}};e["haxe.io.Bytes"]=v.Bytes;v.Bytes.__name__=["haxe","io","Bytes"];v.Bytes.ofString=function(a){for(var b=[],c=0,d=a.length;c<d;){var e=c++,e=a.charCodeAt(e);127>=e?b.push(e):(2047>=e?b.push(192|e>>6):(65535>=e?b.push(224|e>>12):(b.push(240|e>>18),b.push(128|e>>12&63)),b.push(128|e>>6&63)),b.push(128|e&63))}return new v.Bytes(b.length,b)};v.Bytes.ofData=function(a){return new v.Bytes(a.length,a)};v.Bytes.prototype={readString:function(a,b){if(0>a||0>b||a+b>this.length)throw v.Error.OutsideBounds;for(var c="",d=this.b,e=String.fromCharCode,g=a,i=a+b;g<i;){var h=d[g++];if(128>h){if(0==h)break;c+=e(h)}else if(224>h)c+=e((h&63)<<6|d[g++]&127);else if(240>h)var j=d[g++],c=c+e((h&31)<<12|(j&127)<<6|d[g++]&127);else var j=d[g++],k=d[g++],c=c+e((h&15)<<18|(j&127)<<12|k<<6&127|d[g++]&127)}return c},__class__:v.Bytes};v.BytesBuffer=function(){this.b=[]};e["haxe.io.BytesBuffer"]=v.BytesBuffer;v.BytesBuffer.__name__=["haxe","io","BytesBuffer"];v.BytesBuffer.prototype={getBytes:function(){var a=new v.Bytes(this.b.length,this.b);this.b=null;return a},addBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw v.Error.OutsideBounds;for(var a=a.b,d=b,b=b+c;d<b;)c=d++,this.b.push(a[c])},__class__:v.BytesBuffer};v.Output=function(){};e["haxe.io.Output"]=v.Output;v.Output.__name__=["haxe","io","Output"];v.Output.prototype={writeString:function(a){a=v.Bytes.ofString(a);this.writeFullBytes(a,0,a.length)},writeFullBytes:function(a,b,c){for(;0<c;)var d=this.writeBytes(a,b,c),b=b+d,c=c-d},writeBytes:function(a,b,c){var d=c,e=a.b;if(0>b||0>c||b+c>a.length)throw v.Error.OutsideBounds;for(;0<d;)this.writeByte(e[b]),b++,d--;return c},writeByte:function(){throw"Not implemented";},__class__:v.Output};v.BytesOutput=function(){this.b=new v.BytesBuffer};e["haxe.io.BytesOutput"]=v.BytesOutput;v.BytesOutput.__name__=["haxe","io","BytesOutput"];v.BytesOutput.__super__=v.Output;v.BytesOutput.prototype=F(v.Output.prototype,{getBytes:function(){return this.b.getBytes()},writeBytes:function(a,b,c){this.b.addBytes(a,b,c);return c},writeByte:function(a){this.b.b.push(a)},__class__:v.BytesOutput});v.Eof=function(){};e["haxe.io.Eof"]=v.Eof;v.Eof.__name__=["haxe","io","Eof"];v.Eof.prototype={toString:function(){return"Eof"},__class__:v.Eof};v.Error=e["haxe.io.Error"]={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};v.Error.Blocked=["Blocked",0];v.Error.Blocked.toString=z;v.Error.Blocked.__enum__=v.Error;v.Error.Overflow=["Overflow",1];v.Error.Overflow.toString=z;v.Error.Overflow.__enum__=v.Error;v.Error.OutsideBounds=["OutsideBounds",2];v.Error.OutsideBounds.toString=z;v.Error.OutsideBounds.__enum__=v.Error;v.Error.Custom=function(a){a=["Custom",3,a];a.__enum__=v.Error;a.toString=z;return a};da={Meta:function(){}};e["haxe.rtti.Meta"]=da.Meta;da.Meta.__name__=["haxe","rtti","Meta"];da.Meta.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};T={Parser:function(){}};e["haxe.xml.Parser"]=T.Parser;T.Parser.__name__=["haxe","xml","Parser"];T.Parser.parse=function(a){var b=n.createDocument();T.Parser.doParse(a,0,b);return b};T.Parser.doParse=function(a,b,c){null==b&&(b=0);for(var d=null,e=1,g=1,i=null,h=0,j=0,k=0,l=a.charCodeAt(b),m=new Y;l==l;){switch(e){case 0:switch(l){case 10:case 13:case 9:case 32:break;default:e=g;continue}break;case 1:switch(l){case 60:e=0;g=2;break;default:h=b;e=13;continue}break;case 13:60==l?(e=n.createPCData(m.b+x.substr(a,h,b-h)),m=new Y,c.addChild(e),j++,e=0,g=2):38==l&&(m.addSub(a,h,b-h),e=18,g=13,h=b+1);break;case 17:93==l&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(e=n.createCData(x.substr(a,h,b-h)),c.addChild(e),j++,b+=2,e=1);break;case 2:switch(l){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=x.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;e=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=x.substr(a,b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;e=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";b+=2;e=15}h=b+1;break;case 63:e=14;h=b;break;case 47:if(null==c)throw"Expected node name";h=b+1;e=0;g=10;break;default:e=3;h=b;continue}break;case 3:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(b==h)throw"Expected node name";d=n.createElement(x.substr(a,h,b-h));c.addChild(d);e=0;g=4;continue}break;case 4:switch(l){case 47:e=11;j++;break;case 62:e=9;j++;break;default:e=5;h=b;continue}break;case 5:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(h==b)throw"Expected attribute name";i=x.substr(a,h,b-h);if(d.exists(i))throw"Duplicate attribute";e=0;g=6;continue}break;case 6:switch(l){case 61:e=0;g=7;break;default:throw"Expected =";}break;case 7:switch(l){case 34:case 39:e=8;h=b;break;default:throw'Expected "';}break;case 8:l==a.charCodeAt(h)&&(g=x.substr(a,h+1,b-h-1),d.set(i,g),e=0,g=4);break;case 9:h=b=T.Parser.doParse(a,b,d);e=1;break;case 11:switch(l){case 62:e=1;break;default:throw"Expected >";}break;case 12:switch(l){case 62:return 0==j&&c.addChild(n.createPCData("")),b;default:throw"Expected >";}case 10:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(h==b)throw"Expected node name";if(x.substr(a,h,b-h)!=c.get_nodeName())throw"Expected </"+
c.get_nodeName()+">";e=0;g=12;continue}break;case 15:45==l&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(c.addChild(n.createComment(x.substr(a,h,b-h))),b+=2,e=1);break;case 16:91==l?k++:93==l?k--:62==l&&0==k&&(c.addChild(n.createDocType(x.substr(a,h,b-h))),e=1);break;case 14:63==l&&62==a.charCodeAt(b+1)&&(b++,e=x.substr(a,h+1,b-h-2),c.addChild(n.createProcessingInstruction(e)),e=1);break;case 18:59==l&&(h=x.substr(a,h,b-h),35==h.charCodeAt(0)?(h=120==h.charCodeAt(1)?J.parseInt("0"+x.substr(h,1,h.length-1)):J.parseInt(x.substr(h,1,h.length-1)),m.b+=J.string(String.fromCharCode(h))):m.b=T.Parser.escapes.exists(h)?m.b+J.string(T.Parser.escapes.get(h)):m.b+J.string("&"+h+";"),h=b+1,e=g)}l=a.charCodeAt(++b)}1==e&&(h=b,e=13);if(13==e)return(b!=h||0==j)&&c.addChild(n.createPCData(m.b+x.substr(a,h,b-h))),b;throw"Unexpected end";};K=function(){};e["js.Boot"]=K;K.__name__=["js","Boot"];K.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",d=2,e=a.length;d<e;)var g=d++,c=2!=g?c+(","+K.__string_rec(a[g],b)):c+K.__string_rec(a[g],b);return c+")"}d=a.length;c="[";b+="\t";for(e=0;e<d;)g=e++,c+=(0<g?",":"")+K.__string_rec(a[g],b);return c+"]"}try{e=a.toString}catch(h){return"???"}if(null!=e&&e!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;e=null;c="{\n";b+="\t";d=null!=a.hasOwnProperty;for(e in a)if(!d||a.hasOwnProperty(e))"prototype"==e||"__class__"==e||"__super__"==e||"__interfaces__"==e||"__properties__"==e||(2!=c.length&&(c+=", \n"),c+=b+e+" : "+K.__string_rec(a[e],b));b=b.substring(1);return c+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};K.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var g=d++,g=c[g];if(g==b||K.__interfLoop(g,b))return!0}return K.__interfLoop(a.__super__,b)};K.__instanceof=function(a,b){if(null==b)return!1;switch(b){case la:return(a|0)===a;case ia:return"number"==typeof a;case ja:return"boolean"==typeof a;case String:return"string"==typeof a;case ma:return!0;default:if(null!=a){if("function"==typeof b){if(a instanceof b)return b==Array?null==a.__enum__:!0;if(K.__interfLoop(a.__class__,b))return!0}}else return!1;return b==na&&null!=a.__name__||b==oa&&null!=a.__ename__?!0:a.__enum__==b}};u=void 0;G=void 0;s=void 0;ca=void 0;W=void 0;I=void 0;ca={Draggable:function(a,b){null==b&&(b=0);null==a&&(a=0);this._nXOffset=this._nYOffset=0;this._pt=new w.Point;this._nXOffset=a;this._nYOffset=b}};e["s2.animation.Draggable"]=ca.Draggable;ca.Draggable.__name__=["s2","animation","Draggable"];ca.Draggable.__super__=H;ca.Draggable.prototype=F(H.prototype,{onUpdate:function(){for(var a=this.owner._compMap.Sprite_2,b=null;null==b;)b=this.owner.parent._compMap.Sprite_2;b=W.Positioning.globalToLocal(b.owner,j._platform.getPointer().get_x(),j._platform.getPointer().get_y(),this._pt);a.setXY(b.x+this._nXOffset,b.y+this._nYOffset)},get_name:function(){return"Draggable_10"},__class__:ca.Draggable});I={AutoFillScreen:function(){N.call(this)}};e["s2.display.AutoFillScreen"]=I.AutoFillScreen;I.AutoFillScreen.__name__=["s2","display","AutoFillScreen"];I.AutoFillScreen.__super__=N;I.AutoFillScreen.prototype=F(N.prototype,{resizeSprite:function(a){var b=j._platform.getStage().get_width(),c=j._platform.getStage().get_height(),d=w.FMath.max(b/a.getNaturalWidth(),c/a.getNaturalHeight());a.setScale(d);a.setXY(0.5*b,0.5*c)},onResize:function(){var a=this.owner._compMap.Sprite_2;null!=a&&this.resizeSprite(a)},onAdded:function(){N.prototype.onAdded.call(this);var a=this.owner._compMap.Sprite_2;null!=a&&(a.centerAnchor(),this.resizeSprite(a));this.connect0(j._platform.getStage().resize,A(this,this.onResize))},__class__:I.AutoFillScreen});I.ButtonMode=function(){this._reuse=new w.Point;this.over=new i.Value(!1)};e["s2.display.ButtonMode"]=I.ButtonMode;I.ButtonMode.__name__=["s2","display","ButtonMode"];I.ButtonMode.__super__=H;I.ButtonMode.prototype=F(H.prototype,{onSystemMove:function(a){a._stopped=!0;this.over._value&&(this.over.set__(!1),j._platform.getMouse().set_cursor(p.MouseCursor.Default),this._globalDispose.dispose())},onMove:function(a){a._stopped=!0;this.over._value||(this.over.set__(!0),j._platform.getMouse().set_cursor(p.MouseCursor.Button),this._globalDispose=j._platform.getPointer().move.connect(A(this,this.onSystemMove)))},onRemoved:function(){this.over.set__(!1);null!=this._moveDispose&&this._moveDispose.dispose();null!=this._globalDispose&&this._globalDispose.dispose();this._sprite=null;j._platform.getMouse().set_cursor(p.MouseCursor.Default)},onUpdate:function(){null==this._sprite&&j._platform.getMouse().get_supported()&&(this._sprite=this.owner._compMap.Sprite_2)},onAdded:function(){j._platform.getMouse().get_supported()&&(this._sprite=this.owner._compMap.Sprite_2,null!=this._sprite&&(this._moveDispose=this._sprite.get_pointerMove().connect(A(this,this.onMove))))},get_name:function(){return"ButtonMode_12"},__class__:I.ButtonMode});I.ScrollGroup=function(a,b,c){this._nTotalWidth=this._width=this._height=this._padding=0;this.position=new m.AnimatedFloat(0);this._items=[];this._holder=new C;this.setWidth(a);this.setHeight(b);this._padding=c};e["s2.display.ScrollGroup"]=I.ScrollGroup;I.ScrollGroup.__name__=["s2","display","ScrollGroup"];I.ScrollGroup.__super__=H;I.ScrollGroup.prototype=F(H.prototype,{get_maxPosition:function(){return this._nTotalWidth-this._width},initViewport:function(){var a=this._holder._compMap.Sprite_2;null==a&&(a=new g.Sprite,this._holder.add(a));a.scissor=new w.Rectangle(0,0,this._width,this._height)},internalAddItem:function(a,b){null!=this.owner&&this._holder.addChild(a);0<this._items.length&&(this._nTotalWidth+=this._padding);var c=0.5*this._height-0.5*b.getNaturalHeight()*b.scaleY._value+b.anchorY._value*b.scaleY._value;b.setXY(this._nTotalWidth+b.anchorX._value*b.scaleX._value,c);this._nTotalWidth+=b.getNaturalWidth()*b.scaleX._value},setHeight:function(a){this._height=a;this.initViewport();return this},setWidth:function(a){this._width=a;this.initViewport();return this},removeAllItems:function(){this._items=[];this.position.set__(0);this._nTotalWidth=0;this._holder.dispose();this.initViewport();null!=this.owner&&this.owner.addChild(this._holder)},addItem:function(a){var b=a._compMap.Sprite_2;null!=this.owner&&this.internalAddItem(a,b);this._items.push(a)},onUpdate:function(a){this.position.update(a);var a=this._holder._compMap.Sprite_2,b=this.position._value;b>this.get_maxPosition()&&this.position.set__(b=this.get_maxPosition());if(0>b||this._nTotalWidth<this._width)this.position.set__(b=0);a.scissor.x=b;a.x.set__(-b)},onRemoved:function(){this.removeAllItems()},onAdded:function(){this.owner.addChild(this._holder);this.position.set__(0);if(0<this._items.length)for(var a=this._nTotalWidth=0,b=this._items.length;a<b;){var c=this._items[a++];this.internalAddItem(c,c._compMap.Sprite_2)}this.initViewport()},get_name:function(){return"ScrollGroup_9"},__class__:I.ScrollGroup});G={Assets:function(a,b,c,d){null==c&&(c=!1);null==b&&(b=!1);this.loadedBytes=this.totalBytes=0;this.releaseCacheOnRemove=this._isLoading=this.ready=!1;this._nLoaded=this._nNeeded=0;this.progressed=new i.Signal2;this.success=new i.Signal0;this._suffix=d;this._manifests=new D.StringMap;this._packsReady=new D.StringMap;this._packsLoading=[];this.autoCacheResults=b;this.releaseCacheOnRemove=c;this._nLoaded=this._nNeeded=0;if(null!=a){b=0;for(c=a.length;b<c;)d=b++,this.require(a[d])}}};e["s2.loading.Assets"]=G.Assets;G.Assets.__name__=["s2","loading","Assets"];G.Assets.getCached=function(a){null==G.Assets._cache&&(G.Assets._cache=new D.StringMap);return G.Assets._cache.exists(a)?G.Assets._cache.get(a):null};G.Assets.cache=function(a,b){null==G.Assets._cache&&(G.Assets._cache=new D.StringMap);G.Assets._cache.set(a,b)};G.Assets.release=function(a){null!=G.Assets._cache&&G.Assets._cache.exists(a)&&G.Assets._cache.remove(a)};G.Assets.__super__=H;G.Assets.prototype=F(H.prototype,{onSuccess:function(a){this._nLoaded++;this._manifests.keys();for(var b=this._manifests.keys();b.hasNext();){var c=b.next();this._manifests.get(c)==a.get_manifest()&&(this.autoCacheResults&&G.Assets.cache(c,a),this._packsReady.set(c,a))}this._nLoaded==this._nNeeded&&(this.progressed.emit(this.totalBytes,this.totalBytes),this._isLoading=!1,this.ready=!0,this.success.emit())},get:function(a){if(G.Assets._cache.exists(a))return G.Assets._cache.get(a);if(this.ready){var b=this._packsReady.get(a+(null==this._suffix?"":"_"+this._suffix));if(null!=b)return b;b=this._packsReady.get(a);if(null!=b)return b;throw"Asset pack "+a+" not part of this asset requirement.";}throw"Can't get an asset pack before all packs are loaded and ready.";},onRemoved:function(){if(this.releaseCacheOnRemove)for(var a=this._manifests.keys();a.hasNext();){var b=a.next();G.Assets.release(b)}this.ready=this._isLoading=!1;this._packsLoading=[];this._packsReady=new D.StringMap},onUpdate:function(){if(!this.ready){for(var a=0,b=0,c=this._packsLoading.length;b<c;)var d=b++,a=a+this._packsLoading[d]._progress;a!=this.loadedBytes&&this.progressed.emit(a,this.totalBytes);this.loadedBytes=a}},load:function(){this.loadedBytes=this.totalBytes=0;this.ready=!1;for(var a=this._manifests.keys();a.hasNext();){var b=a.next(),c=G.Assets.getCached(b);if(null!=c)this._manifests.set(b,c.get_manifest()),this.onSuccess(c);else if(b=j._platform.loadAssetPack(this._manifests.get(b)),b.hasResult)this.onSuccess(b.get_result());else this._isLoading=!0,this.totalBytes+=b._total,this._packsLoading.push(b),b.get(A(this,this.onSuccess))}},onAdded:function(){this.load()},addManifest:function(a,b){if(this._manifests.exists(b))throw"Asset key for manifest "+b+" already exists.";this._nNeeded++;null!=G.Assets.externalBase?a.set_externalBasePath(G.Assets.externalBase):null!=G.Assets.relativeBase&&a.set_relativeBasePath(G.Assets.relativeBase);this._manifests.set(b,a);return this},require:function(a){var b=null==this._suffix?"":"_"+this._suffix;if(h.Manifest.exists(a+b))this.addManifest(h.Manifest.build(a+
b),a);else if(h.Manifest.exists(a))this.addManifest(h.Manifest.build(a),a);else if(!G.Assets._cache.exists(a))throw"The directory "+a+" does not exist in the manifest."+(null==this._suffix?"":" Also attempted path "+a+b);return this},get_name:function(){return"Assets_3"},__class__:G.Assets});s={LocaleParser:function(){}};e["s2.localization.LocaleParser"]=s.LocaleParser;s.LocaleParser.__name__=["s2","localization","LocaleParser"];s.LocaleParser.prototype={__class__:s.LocaleParser};s.DisneyParser=function(){};e["s2.localization.DisneyParser"]=s.DisneyParser;s.DisneyParser.__name__=["s2","localization","DisneyParser"];s.DisneyParser.__interfaces__=[s.LocaleParser];s.DisneyParser.prototype={parseStrings:function(a,b){var c=new D.StringMap,d=new D.StringMap;if(K.__instanceof(a,n))for(var e=a.firstElement().elements();e.hasNext();)for(var h=e.next(),i=h.elements(),h=h.get_nodeName();i.hasNext();){var j=i.next(),k=j.get("font"),m=d.exists(k)?d.get(k):new g.Font(b,k),l=null==j.get("fontScale")?1:J.parseFloat(j.get("fontScale")),p=null;if(null!=j.get("align"))var p=j.get("align").toLowerCase(),q=p.charAt(0),p=M.createEnum(g.TextAlign,q.toUpperCase()+p.substring(1));j={id:h+"."+j.get_nodeName(),font:m,lineHeight:J.parseFloat(j.get("lineHeight")),scale:l,text:j.firstChild().get_nodeValue(),align:p};d.set(k,m);c.set(j.id,j)}return c},parseFonts:function(a){var b=new h.Manifest,c=[];if(K.__instanceof(a,n))for(a=a.firstElement().elements();a.hasNext();)for(var d=a.next().elements();d.hasNext();){var e=d.next().get("font");-1==X.indexOf(c,e)&&(b.add(e+".fnt",e+".fnt"),b.add(e,e+".png"),c.push(e))}return b},__class__:s.DisneyParser};s.Locale=function(){};e["s2.localization.Locale"]=s.Locale;s.Locale.__name__=["s2","localization","Locale"];s.Locale.init=function(a,b,c,d){null==d&&(d="assets/fonts");null==c&&(c="xml/translation.xml");s.Locale._formats=new D.StringMap;s.Locale._xmlPath=c;s.Locale._fontDirectory=d;s.Locale._onReady=a;s.Locale._parser=b;a=new h.Manifest;null!=s.Locale.externalBase?a.set_externalBasePath(s.Locale.externalBase):null!=s.Locale.relativeBase&&a.set_relativeBasePath(s.Locale.relativeBase);a.add(c,c);j._platform.loadAssetPack(a).get(s.Locale.onXmlSuccess)};s.Locale.getField=function(a,b,c){null==b&&(b=0);if(s.Locale._formats.exists(a)){var a=s.Locale._formats.get(a),d=new g.TextSprite(a.font,a.text);0<b&&(b/=a.scale);d.wrapWidth.set__(b);d.set_align(null!=a.align?a.align:c);d.setScale(a.scale);return d}throw"No string id : '"+a+"' exists.";};s.Locale.onXmlSuccess=function(a){s.Locale._x=n.parse(a.getFile(s.Locale._xmlPath).toString());a=s.Locale._parser.parseFonts(s.Locale._x);null!=s.Locale.externalBase?a.set_externalBasePath(s.Locale.externalBase+s.Locale._fontDirectory):null!=s.Locale.relativeBase?a.set_relativeBasePath(s.Locale.relativeBase+s.Locale._fontDirectory):a.set_relativeBasePath(s.Locale._fontDirectory);j._platform.loadAssetPack(a).get(s.Locale.onFontLoadSuccess)};s.Locale.onFontLoadSuccess=function(a){s.Locale._formats=s.Locale._parser.parseStrings(s.Locale._x,a);s.Locale.loading=!1;null!=s.Locale._onReady&&s.Locale._onReady.apply(null,[]);s.Locale._onReady=null};u={BaseScene:function(){E.Scene.call(this);this._disposer=new N;this._assets=new G.Assets}};e["s2.scene.BaseScene"]=u.BaseScene;u.BaseScene.__name__=["s2","scene","BaseScene"];u.BaseScene.__super__=E.Scene;u.BaseScene.prototype=F(E.Scene.prototype,{onResize:function(){},internal_assetsReady:function(){this.assetsReady();if(this.isShown)this.onShown()},internal_onShown:function(){this.isShown=!0;if(this._assets.ready)this.onShown()},onShown:function(){},assetsReady:function(){},onAdded:function(){null!=this._assets&&this._assets.dispose();null!=this._disposer&&this._disposer.dispose();this.owner.add(this._assets);this.owner.add(this._disposer);this._assets.ready?this.internal_assetsReady():this._disposer.connect0(this._assets.success,A(this,this.internal_assetsReady));var a=u.Scenes.director.get_topScene(),a=null!=a?a._compMap.Scene_1:null,b=null,b=null!=a?a.hidden.connect(A(this,this.internal_onShown)).once():this.shown.connect(A(this,this.internal_onShown)).once();this._disposer.add(b);this._disposer.connect0(j._platform.getStage().resize,A(this,this.onResize))},__class__:u.BaseScene});u.MovieTransition=function(a,b){null==b&&(b=-1);this._obscured=0>b?a.symbol.duration/2:b;this._elapsed=0;this._movie=a;this._movie.get_looped().connect(A(this,this.movieLooped)).once()};e["s2.scene.MovieTransition"]=u.MovieTransition;u.MovieTransition.__name__=["s2","scene","MovieTransition"];u.MovieTransition.__super__=E.Transition;u.MovieTransition.prototype=F(E.Transition.prototype,{complete:function(){this.movieLooped()},update:function(a){this._elapsed+=a;this._elapsed>=this._obscured&&this._to._compMap.Sprite_2.alpha.set__(1);return this._elapsed>=this._movie.symbol.duration},init:function(a,b,c){E.Transition.prototype.init.call(this,a,b,c);this._movie.setScale(Math.max(j._platform.getStage().get_height()/768,j._platform.getStage().get_width()/1024));this._holder=(new C).add(this._movie);this._movie.set_position(0);b=this._to._compMap.Sprite_2;null==b&&this._to.add(b=new g.Sprite);b.alpha.set__(0);a.owner.addChild(this._holder)},movieLooped:function(){this._elapsed=this._movie.symbol.duration;this._to._compMap.Sprite_2.alpha.set__(1);this._holder.dispose()},__class__:u.MovieTransition});u.PreloadScene=function(a,b){E.Scene.call(this);this._packsToPreload=b;this._pack=a;this._width=new m.AnimatedFloat(0);this.success=new i.Signal1};e["s2.scene.PreloadScene"]=u.PreloadScene;u.PreloadScene.__name__=["s2","scene","PreloadScene"];u.PreloadScene.__super__=E.Scene;u.PreloadScene.prototype=F(E.Scene.prototype,{onSuccess:function(){for(var a=this.owner._compMap.Assets_3,b=new D.StringMap,c=0,d=this._packsToPreload.length;c<d;){var e=this._packsToPreload[c++];b.set(e,a.get(e))}this.success.emit(b)},onUpdate:function(a){E.Scene.prototype.onUpdate.call(this,a);this._width.update(a)},onProgress:function(a,b){var c=w.FMath.clamp(a/b,0,1);this._width.animateTo(this._progressBar._compMap.Sprite_2.getNaturalWidth()*c,0.2)},onRemoved:function(){null!=this._successHandle&&this._successHandle.dispose();null!=this._progressHandle&&this._progressHandle.dispose();null!=this._widthHandle&&this._widthHandle.dispose()},onAdded:function(){var a=this,b=new G.Assets(this._packsToPreload,!0);this._container=(new C).add(new g.Sprite);j._platform.getStage().get_width();j._platform.getStage().get_height();var c=(new C).add(new g.ImageSprite(this._pack.getTexture("bg_texture"))).add(new I.AutoFillScreen);this._progressBar=(new C).add(new g.ImageSprite(this._pack.getTexture("progress_bg")));this._holder=(new C).add((new g.ImageSprite(this._pack.getTexture("progress_reveal"))).centerAnchor().setXY(540,570)).addChild(this._progressBar);this._width.set__(0);this._progressBar._compMap.Sprite_2.scissor=new w.Rectangle(0,0,this._progressBar._compMap.Sprite_2.getNaturalWidth(),this._progressBar._compMap.Sprite_2.getNaturalHeight());if(b.ready)this.onSuccess();else this._successHandle=b.success.connect(A(this,this.onSuccess)),this._progressHandle=b.progressed.connect(A(this,this.onProgress)),this._widthHandle=this._width.get_changed().connect(function(b){a._progressBar._compMap.Sprite_2.scissor.x=b});var d=Math.min(j._platform.getStage().get_width()/1024,j._platform.getStage().get_height()/600),e=600*d;this._container._compMap.Sprite_2.setXY(0.5*(j._platform.getStage().get_width()-1024*d),0.5*(j._platform.getStage().get_height()-e)).setScale(d);this.owner.addChild(c);this.owner.addChild(this._container);this._container.addChild(this._holder);this.owner.add(b);this._container.addChild(this._holder)},__class__:u.PreloadScene});u.Scenes=function(){};e["s2.scene.Scenes"]=u.Scenes;u.Scenes.__name__=["s2","scene","Scenes"];u.Scenes.init=function(a,b,c){u.Scenes.SceneOnLoad=b;u.Scenes.director=new E.Director;j.root.addChild((new C).add(u.Scenes.director),!1);a=new u.PreloadScene(a,c);a.success.connect(u.Scenes.preloadComplete).once();u.Scenes.director.pushScene((new C).add(a))};u.Scenes["goto"]=function(a,b){null==b&&null!=u.Scenes._DefaultTransition&&(b=M.createInstance(u.Scenes._DefaultTransition,u.Scenes._DefaultTransitionParams));for(var c=M.getClassName(a),d=0,e=u.Scenes.director.scenes;d<e.length;){var g=e[d];++d;for(var h=g.firstComponent;null!=h;){if(K.__instanceof(h,a)&&M.getClassName(M.getClass(h))==c){u.Scenes.director.unwindToScene(g,b);return}h=h.next}}c=M.createInstance(a,[]);u.Scenes.director.unwindToScene((new C).add(c),b)};u.Scenes.preloadComplete=function(){if(null!=u.Scenes.SceneOnLoad)u.Scenes["goto"](u.Scenes.SceneOnLoad);u.Scenes.SceneOnLoad=null};u.Scenes.defaultTransition=function(a,b){u.Scenes._DefaultTransition=a;u.Scenes._DefaultTransitionParams=null!=b?b:[]};W={Positioning:function(){}};e["s2.util.Positioning"]=W.Positioning;W.Positioning.__name__=["s2","util","Positioning"];W.Positioning.globalToLocal=function(a,b,c,d){a=a._compMap.Sprite_2;d=null==d?new w.Point:d;null!=a&&(a.getViewMatrix().inverseTransform(b,c,d),d.x-=a.anchorX._value,d.y-=a.anchorY._value);return d};Z=void 0;$=void 0;S=void 0;aa=void 0;ba=void 0;S=function(){u.BaseScene.call(this);this._assets.require("common")};e["woy.ActivityScene"]=S;S.__name__=["woy","ActivityScene"];S.__super__=u.BaseScene;S.prototype=F(u.BaseScene.prototype,{onScenesTap:function(){this.populateScroller(j.root._compMap.ConfigInfo_0.scenes,!1)},onCharactersTap:function(){this.populateScroller(j.root._compMap.ConfigInfo_0.characters,!0)},onObjectsTap:function(){this.populateScroller(j.root._compMap.ConfigInfo_0.objects,!0)},onGreetingsTap:function(){this.populateScroller(j.root._compMap.ConfigInfo_0.greetings,!0)},onTrashTap:function(){this.owner._compMap.Sprite_2.disablePointer();u.Scenes.director.unwindToScene((new C).add(new S))},onPrintTap:function(){var a=this._activityArea._compMap.ItemManager_7.toQueryString(),b=j.root._compMap.ConfigInfo_0.printURL;if(j._platform.getExternal().get_supported())try{cto.trackPrint(),null}catch(c){null}j._platform.getWeb().openBrowser(b+a)},onScrollLeft:function(){var a=this._selector._compMap.ScrollGroup_9;this._selector._compMap.ScrollGroup_9.position.animateTo(w.FMath.clamp(a.position._value-200,0,a.get_maxPosition()),0.5,m.Ease.quadOut)},onScrollRight:function(){var a=this._selector._compMap.ScrollGroup_9;this._selector._compMap.ScrollGroup_9.position.animateTo(w.FMath.clamp(a.position._value+200,0,a.get_maxPosition()),0.5,m.Ease.quadOut)},onMuteTap:function(){null!=this._muteBlock&&this._muteBlock.dispose();1>j.volume._value?j.volume.animateTo(1,0.3):(this._muteBlock=(new C).add((new g.FillSprite(0,20,30)).setXY(1,-12).disablePointer()),this._btnVolume.addChild(this._muteBlock),j.volume.set__(0))},onResize:function(){var a=Math.min(j._platform.getStage().get_width()/1024,j._platform.getStage().get_height()/600),b=600*a;this._holder._compMap.Sprite_2.setXY(0.5*(j._platform.getStage().get_width()-1024*a),0.5*(j._platform.getStage().get_height()-b)).setScale(a)},onStickerDrop:function(a){this._currentSticker=null;this._holder.removeChild(a.owner);this._activityArea._compMap.ItemManager_7.add(a.owner)},grabStickerFromDrawer:function(a){null!=this._currentSticker&&this._currentSticker.dispose();var b=this._assets.get("common");this._currentSticker=(new C).add(new aa(b,a));this._currentSticker._compMap.StickerAI_8.dropped.connect(A(this,this.onStickerDrop));this._holder.addChild(this._currentSticker);this._currentSticker._compMap.StickerAI_8.drag()},setBackground:function(a){var b=this._assets.get("common");this._activityArea._compMap.ItemManager_7.setBg(new g.ImageSprite(b.getTexture("backgrounds/"+a)),a)},populateScroller:function(a,b){null==b&&(b=!0);var c=this,d=this._assets.get("common"),e=this._selector._compMap.ScrollGroup_9,h=new m.Sine(-6,6,1);e.removeAllItems();for(var i=0,j=a.length;i<j;){var k=[i++],n=new C,l=(new g.ImageSprite(d.getTexture((b?"stickers/":"backgrounds/")+"thumbs/"+a[k[0]]))).centerAnchor();l.rotation.set__(h.update(1));n.add(l).add(new I.ButtonMode).add(new N);b?n._compMap.Disposer_4.connect1(l.get_pointerDown(),function(b){return function(){c.grabStickerFromDrawer(a[b[0]])}}(k)):n._compMap.Disposer_4.connect1(l.get_pointerDown(),function(b){return function(){c.setBackground(a[b[0]])}}(k));e.addItem(n)}},onInstructionsTap:function(){this.showInstructions()},onHideTap:function(){var a=this;if(null!=this._instructions){var b=this._instructions;b.add(new k.Script);b._compMap.Script_11.run(new k.Sequence([new k.AnimateTo(b._compMap.Sprite_2.alpha,0,0.2),new k.CallFunction(function(){a.owner._compMap.Sprite_2.set_pointerEnabled(!0);b.dispose()})]));this._instructions=null}},showInstructions:function(){var a=this;if(null==this._instructions){var b=this._lib.createSprite("instructions",!0);this._holder.addChild(this._instructions=(new C).add(b));this.localizeField(b.getLayer("left")._compMap.Sprite_2,"help.leftButtons",130);this.localizeField(b.getLayer("middle")._compMap.Sprite_2,"help.bottomButtons",170);this.localizeField(b.getLayer("right")._compMap.Sprite_2,"help.rightButtons",150);this.owner._compMap.Sprite_2.set_pointerEnabled(!1);b.set_pointerEnabled(!1);b.set_paused(!1);b.set_position(0);b.alpha.set__(0);this._instructions.add(new k.Script);this._instructions._compMap.Script_11.run(new k.Sequence([new k.AnimateTo(b.alpha,1,0.2),new k.CallFunction(function(){j._platform.getPointer().down.connect(A(a,a.onHideTap)).once()})]))}},localizeField:function(a,b,c){null==c&&(c=400);a=a.getLayer("txt",!0);if(null!=a){var d=new C,b=s.Locale.getField(b,c),c=b.y;c.set__(c._value+(a._compMap.Sprite_2.anchorY._value-10));d.add(b);a.addChild(d)}},setupButton:function(a,b,c,d){a=a.getLayer(b).add(new I.ButtonMode)._compMap.Sprite_2;null!=d&&this.localizeField(a,d);c=a.get_pointerDown().connect(c);this._disposer.add(c);return c},onShown:function(){S._firstRun&&this.showInstructions();S._firstRun=!1},assetsReady:function(){var a=this._assets.get("common"),b=new q.Library(a,"activity_ui"),c=b.createSprite("activityLayout",!0);this._lib=b;this._btnLeft=c.getLayer("arrowLeft").add(new I.ButtonMode);this._disposer.connect1(this._btnLeft._compMap.Sprite_2.get_pointerDown(),A(this,this.onScrollLeft));this._btnRight=c.getLayer("arrowRight").add(new I.ButtonMode);this._disposer.connect1(this._btnRight._compMap.Sprite_2.get_pointerDown(),A(this,this.onScrollRight));this._btnVolume=c.getLayer("btnMute");var d=this._btnRight._compMap.Sprite_2.getLocalMatrix(),e=this._btnLeft._compMap.Sprite_2.getLocalMatrix(),h=d.m02,i=d.m12,k=e.m02,e=e.m12;this._selector=(new C).add(new I.ScrollGroup(Math.round(h-i+this._btnRight._compMap.Sprite_2.getNaturalWidth()*d.m00),105,10)).add((new g.Sprite).setXY(k+20,e-25));this._holder=(new C).add(c).addChild(this._selector);d=(new C).add(new g.ImageSprite(a.getTexture("activity_bg"))).add(new I.AutoFillScreen);a=(new C).add((new g.ImageSprite(a.getTexture("wander_logo"))).centerAnchor().setXY(100,100).setScale(0.8));h=c.getLayer("frame_bg");c.getLayer("t_frameBack")._compMap.Sprite_2.disablePointer();i=h._compMap.Sprite_2;k=i.getLocalMatrix();this._activityArea=(new C).add(new ba(b,Math.round(i.getNaturalWidth()*k.m00),Math.round(i.getNaturalHeight()*k.m11)));this._activityArea._compMap.Sprite_2.scaleX.set__(1/k.m00);this._activityArea._compMap.Sprite_2.scaleY.set__(1/k.m11);h.addChild(this._activityArea);this._holder.addChild(a);this.setupButton(c,"btnGreetings",A(this,this.onGreetingsTap),"activity.greetingsBtn");this.setupButton(c,"btnObjects",A(this,this.onObjectsTap),"activity.objectsBtn");this.setupButton(c,"btnCharacters",A(this,this.onCharactersTap),"activity.charactersBtn");this.setupButton(c,"btnScenes",A(this,this.onScenesTap),"activity.scenesBtn");this.setupButton(c,"btnTrash",A(this,this.onTrashTap));this.setupButton(c,"btnMute",A(this,this.onMuteTap));this.setupButton(c,"btnPrint",A(this,this.onPrintTap));this.setupButton(c,"btnHelp",A(this,this.onInstructionsTap));b=j.root._compMap.ConfigInfo_0;this.populateScroller(b.scenes,!1);this.setBackground(b.scenes[0]);null==this.owner._compMap.Sprite_2&&this.owner.add(new g.Sprite);this.owner.addChild(d);this.owner.addChild(this._holder);this.onResize()},__class__:S});$=function(){};e["woy.ConfigInfo"]=$;$.__name__=["woy","ConfigInfo"];$.__super__=H;$.prototype=F(H.prototype,{parse:function(a){for(var b=a.firstElement().elementsNamed("postcard").next().elements();b.hasNext();){for(var c=b.next(),d=c.elements(),e=[];d.hasNext();){var g=d.next();e.push(g.get("id").toString())}d=c.get("id").toString();switch(d){case "greeting":this.greetings=e;break;case "object":this.objects=e;break;case "character":this.characters=e;break;case "scene":this.scenes=e}}for(a=a.firstElement().elementsNamed("printing").next().elements();a.hasNext();)switch(c=a.next(),d=c.get_nodeName(),d){case "printURL":this.printURL=c.firstChild().toString();break;case "assetURL":this.assetURL=c.firstChild().toString();break;case "activityURL":this.activityURL=c.firstChild().toString()}return this},get_name:function(){return"ConfigInfo_0"},__class__:$});ba=function(a,b,c){this._adjusterHidden=!0;this._dragging=!1;this._adjusterPlaced=this._rotating=this._shrinking=0;this._dragPt=new w.Point;this._startPt=new w.Point;this._holder=(new C).add(new g.Sprite);this._bg=new C;this._adjuster=(new C).add(a.createSprite("itemUI",!0)).add(new k.Script);this._holder.addChild(this._bg);this._holder._compMap.Sprite_2.scissor=new w.Rectangle(0,0,b,c);this._items=[];this._width=b;this._height=c};e["woy.ItemManager"]=ba;ba.__name__=["woy","ItemManager"];ba.__super__=H;ba.prototype=F(H.prototype,{getMatrix:function(a){return[a.m00,a.m10,a.m01,a.m11,a.m02,a.m12]},toQueryString:function(){var a=[],b={base:j.root._compMap.ConfigInfo_0.assetURL,img:a};a.push({url:"backgrounds/"+this._backgroundId+".jpg",mat:this.getMatrix(this._bg._compMap.Sprite_2.getLocalMatrix())});for(var c=this._holder.firstChild;null!=c;){var d=c._compMap.StickerAI_8;null!=d&&a.push({url:"stickers/"+d.id+".png",mat:this.getMatrix(d.getMatrix())});c=c.next}null==R.codec.Base64._instance&&(R.codec.Base64._instance=new R.codec.Base64);return"?pic="+R.codec.Base64._instance._encodeStr(P.stringify(b),!1,76)},remove:function(a,b){null==b&&(b=!0);x.remove(this._items,a);b&&a.dispose()},onRotateEnd:function(){this._rotating=0},onRotateStartLeft:function(){this._rotating=-1},onShrinkEnd:function(){this._shrinking=0},onGrowStart:function(){this._shrinking=1},onShrinkStart:function(){this._shrinking=-1},onRotateStart:function(){this._rotating=1},onTrashTap:function(){null!=this.focus&&this.remove(this.focus,!0);this.hideAdjuster()},hideAdjuster:function(){if(!this._adjusterHidden){this._adjusterHidden=!0;var a=this._adjuster._compMap.Script_11,b=this._adjuster._compMap.Sprite_2;a.stopAll();a.run(new k.Sequence([new k.Parallel([new k.AnimateTo(b.alpha,0,0.2),new k.MoveBy(0,20,0.2,m.Ease.linear,m.Ease.quartIn)]),new k.CallFunction(function(){b.set_visible(!1)})]))}},showAdjuster:function(){if(this._adjusterHidden){this._adjusterPlaced=j._platform.getTime();this._adjusterHidden=!1;var a=g.Sprite.getBounds(this.focus),b=g.Sprite.getBounds(this._adjuster),c=this._adjuster._compMap.Sprite_2,d=a.x>0.5*this._width||a.x+a.width>this._width?a.x-b.width:a.x+a.width,a=w.FMath.clamp(a.y,0,this._height-b.height),d=w.FMath.clamp(d,0,this._width-b.width-10);this._adjuster._compMap.Script_11.stopAll();c.set_visible(!0);c.alpha.set__(0);this._adjuster._compMap.Sprite_2.alpha.animateTo(1,0.3);this._adjuster._compMap.Sprite_2.setXY(d,a)}},onPointerUp:function(){this.focus._compMap.StickerAI_8.drop();this._upBind.dispose();this.showAdjuster()},set_focus:function(a){this._rotating=0;this._dragging=!1;null!=this._upBind&&this._upBind.dispose();var b=this.focus==a;this.focus=a;null!=this.focus&&(a=new N,this.focus.add(a),this._upBind=j._platform.getPointer().up.connect(A(this,this.onPointerUp)),a.add(this._upBind),a.connect1(this.focus._compMap.Sprite_2.get_pointerDown(),A(this,this.onItemTouch)),this._holder.addChild(this.focus),b||(b=this.focus._compMap.Sprite_2,this.focus.add(new k.Script),this.focus._compMap.Script_11.run(new k.Sequence([new k.Parallel([new k.AnimateBy(b.scaleX,-0.1,0.05),new k.AnimateBy(b.scaleY,-0.1,0.05)]),new k.Parallel([new k.AnimateBy(b.scaleX,0.1,0.3,m.Ease.quadOut),new k.AnimateBy(b.scaleY,0.1,0.2,m.Ease.quadOut)])]))))},onItemTouch:function(a){this._time=j._platform.getTime();this.set_focus(a.hit.owner.parent);this._adjusterHidden||this.hideAdjuster();this._dragPt=W.Positioning.globalToLocal(this._holder,a.viewX,a.viewY,this._dragPt);this._startPt.set(this._dragPt.x,this._dragPt.y);this._dragging=!0},add:function(a){var b=new w.Point(j._platform.getPointer().get_x(),j._platform.getPointer().get_y()),b=W.Positioning.globalToLocal(this.owner,b.x,b.y,b);a._compMap.Sprite_2.setXY(b.x,b.y);0>X.indexOf(this._items,a)&&(null==a._compMap.StickerAI_8&&null,b=a._compMap.Disposer_4,null==b&&(b=new N,a.add(b)),b.connect1(a._compMap.Sprite_2.get_pointerDown(),A(this,this.onItemTouch)),this._items.push(a));this._holder.addChild(a);this.set_focus(a);this._adjusterHidden=!0;this.showAdjuster()},setBg:function(a,b){a.setXY(0,0);var c=a.getNaturalWidth(),d=a.getNaturalHeight();a.setScaleXY(this._width/c,this._height/d).setAnchor(0,0).disablePointer();this._bg.add(a);this._backgroundId=b},onUpdate:function(a){if((0!=this._rotating||0!=this._shrinking)&&null!=this.focus){var b=this.focus._compMap.StickerAI_8,c=b.get_rotation();c.set__(c._value+100*a*this._rotating);c=b.get_scaleX()._value;c=w.FMath.clamp(c+a*this._shrinking,0.2,1);b.get_scaleX().set__(c);b.get_scaleY().set__(c);this._adjusterPlaced=j._platform.getTime()}a=null!=this.focus?this.focus._compMap.Sprite_2:null;if(this._dragging&&j._platform.getPointer().isDown()){var b=this._dragPt.x,d=this._dragPt.y;this._dragPt=W.Positioning.globalToLocal(this._holder,j._platform.getPointer().get_x(),j._platform.getPointer().get_y(),this._dragPt);c=a.x;c.set__(c._value+(this._dragPt.x-b));c=a.y;c.set__(c._value+(this._dragPt.y-d))}else this._dragging=!1;!this._adjusterHidden&&2<j._platform.getTime()-this._adjusterPlaced&&this.hideAdjuster()},onAdded:function(){this.owner.addChild(this._holder);this.owner.addChild(this._adjuster);this._adjuster._compMap.Sprite_2.alpha.set__(0);null==this.owner._compMap.Sprite_2&&this.owner.add(new g.Sprite);var a=new N,b=this._adjuster._compMap.Sprite_2.getLayer("btnTrash"),c=this._adjuster._compMap.Sprite_2.getLayer("btnRotate"),d=this._adjuster._compMap.Sprite_2.getLayer("btnRotateRight"),e=this._adjuster._compMap.Sprite_2.getLayer("btnGrow"),h=this._adjuster._compMap.Sprite_2.getLayer("btnShrink");b.add(new I.ButtonMode);c.add(new I.ButtonMode);d.add(new I.ButtonMode);h.add(new I.ButtonMode);e.add(new I.ButtonMode);this.owner.add(a);a.connect1(b._compMap.Sprite_2.get_pointerDown(),A(this,this.onTrashTap));a.connect1(c._compMap.Sprite_2.get_pointerDown(),A(this,this.onRotateStart));a.connect1(d._compMap.Sprite_2.get_pointerDown(),A(this,this.onRotateStartLeft));a.connect1(d._compMap.Sprite_2.get_pointerUp(),A(this,this.onRotateEnd));a.connect1(c._compMap.Sprite_2.get_pointerUp(),A(this,this.onRotateEnd));a.connect1(e._compMap.Sprite_2.get_pointerDown(),A(this,this.onGrowStart));a.connect1(h._compMap.Sprite_2.get_pointerDown(),A(this,this.onShrinkStart));a.connect1(e._compMap.Sprite_2.get_pointerUp(),A(this,this.onShrinkEnd));a.connect1(h._compMap.Sprite_2.get_pointerUp(),A(this,this.onShrinkEnd))},get_name:function(){return"ItemManager_7"},__class__:ba});aa=function(a,b){this.id=b;this.dropped=new i.Signal1;this._sticker=(new C).add((new g.ImageSprite(a.getTexture("stickers/"+b))).setScale(0.5).centerAnchor())};e["woy.StickerAI"]=aa;aa.__name__=["woy","StickerAI"];aa.__super__=H;aa.prototype=F(H.prototype,{getMatrix:function(){var a=this.owner._compMap.Sprite_2.getLocalMatrix(),b=this._sticker._compMap.Sprite_2.getLocalMatrix();return w.Matrix.multiply(a,b)},get_scaleY:function(){return this._sticker._compMap.Sprite_2.scaleY},get_scaleX:function(){return this._sticker._compMap.Sprite_2.scaleX},get_rotation:function(){return this._sticker._compMap.Sprite_2.rotation},onDrop:function(){0.1<j._platform.getTime()-this._time&&this.drop()},drop:function(a){null==a&&(a=!0);null!=this._dropBind&&(this._dropBind.dispose(),this._upBind.dispose());var b=this.owner._compMap.Draggable_10;null!=b&&(b.dispose(),a&&this.dropped.emit(this));return this},drag:function(a,b){null==b&&(b=0);null==a&&(a=0);null!=this._dropBind&&this._dropBind.dispose();this._time=j._platform.getTime();this.owner.add(new ca.Draggable(a,b));this._dropBind=j._platform.getPointer().down.connect(A(this,this.onDrop));this._upBind=j._platform.getPointer().up.connect(A(this,this.onDrop));return this},onRemoved:function(){this.drop(!1)},onAdded:function(){this.owner.addChild(this._sticker);null==this.owner._compMap.Sprite_2&&this.owner.add(new g.Sprite)},get_name:function(){return"StickerAI_8"},__class__:aa});Z=function(){u.BaseScene.call(this);this._assets.require("common")};e["woy.TitleScene"]=Z;Z.__name__=["woy","TitleScene"];Z.__super__=u.BaseScene;Z.prototype=F(u.BaseScene.prototype,{onClick:function(){u.Scenes["goto"](S)},onRollOver:function(){},onResize:function(){var a=Math.min(j._platform.getStage().get_width()/1024,j._platform.getStage().get_height()/600),b=600*a;this._holder._compMap.Sprite_2.setXY(0.5*(j._platform.getStage().get_width()-1024*a),0.5*(j._platform.getStage().get_height()-b)).setScale(a)},onShown:function(){},assetsReady:function(){var a=this._assets.get("common"),b=a.getSound("background");b.loop(0).volume.animateTo(0.2,1);if(j._platform.getTouch().get_supported())j._platform.getTouch().down.connect(function(){b.play(0).dispose()}).once();this._holder=(new C).add(new g.Sprite);var c=(new C).add(new g.ImageSprite(a.getTexture("title_bg"))).add(new I.AutoFillScreen),d=(new C).add((new g.ImageSprite(a.getTexture("wander_logo"))).centerAnchor().setXY(512,200)),e=(new C).add((new g.ImageSprite(a.getTexture("activity_title"))).centerAnchor().setXY(512,350)),a=(new C).add((new g.ImageSprite(a.getTexture("button_back"))).centerAnchor().setXY(512,450)).add(new I.ButtonMode),h=s.Locale.getField("title.playButton",a._compMap.Sprite_2.getNaturalWidth(),g.TextAlign.Center);h.setXY(0,20);a.addChild((new C).add(h));this._disposer.connect2(a._compMap.ButtonMode_12.over.get_changed(),A(this,this.onRollOver));this._disposer.connect1(a._compMap.Sprite_2.get_pointerDown(),A(this,this.onClick));this._holder.addChild(d).addChild(e).addChild(a);this.owner.addChild(c);this.owner.addChild(this._holder);this.onResize()},__class__:Z});var ka=0;Array.prototype.indexOf&&(x.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0});Math.__name__=["Math"];Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;e.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=e.String=String;String.__name__=["String"];Array.prototype.__class__=e.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=e.Date=Date;Date.__name__=["Date"];var la=e.Int={__name__:["Int"]},ma=e.Dynamic={__name__:["Dynamic"]},ia=e.Float=Number;ia.__name__=["Float"];var ja=e.Bool=Boolean;ja.__ename__=["Bool"];var na=e.Class={__name__:["Class"]},oa={};n.Element="element";n.PCData="pcdata";n.CData="cdata";n.Comment="comment";n.DocType="doctype";n.ProcessingInstruction="processingInstruction";n.Document="document";"undefined"!=typeof JSON&&(P=JSON);d.html.HtmlPlatform.instance=new d.html.HtmlPlatform;i.SignalBase.DISPATCHING_SENTINEL=new i.SignalConnection(null,null);j.root=new C;j.uncaughtError=new i.Signal1;j.hidden=new i.Value(!1);j.hasGPU=new i.Value(!1);j.volume=new m.AnimatedFloat(1);j._platform=d.html.HtmlPlatform.instance;j._calledInit=!1;r.window="undefined"!=typeof window?window:null;r.document="undefined"!=typeof window?window.document:null;r.navigator="undefined"!=typeof window?window.navigator:null;h.Manifest.__meta__={obj:{assets:[{fonts:[{bytes:23797,md5:"dff1f45a0a43ac1abffe43054b34f2a7",name:"avenir_next_bold_yellow.fnt"},{bytes:40452,md5:"4944d516fe96a2ee058255ae6e575e0a",name:"avenir_next_bold_yellow.png"},{bytes:23797,md5:"c3840bcb0eaa7d19f38211b5f7f17d7d",name:"avenir_next_heavy_black.fnt"},{bytes:22460,md5:"bc0346ead24f6198b01edae023f8c817",name:"avenir_next_heavy_black.png"}],bootstrap:[{bytes:57867,md5:"0485039a6a35a8d871068c8e4ce73c6b",name:"bg_texture.jpg"},{bytes:4631,md5:"793b8a94f5cfab0e7d69851c3c744dbb",name:"progress_bg.png"},{bytes:4634,md5:"c7a72dbcdb1e145837037b0883e1d32e",name:"progress_reveal.png"},{bytes:6867,md5:"0f03cb40b85ba948c5dc95fc3f5f0d3f",name:"transition/atlas0.png"},{bytes:9212,md5:"0506b7194fbf558c601469cd673d00c4",name:"transition/library.json"}],common:[{bytes:111693,md5:"2df88d2f1c070ad9128d366a9b0bd15c",name:"activity_bg.jpg"},{bytes:11070,md5:"4e44557520d07a88aeb42b27d821c28d",name:"activity_title.png"},{bytes:32708,md5:"228b0dcdb0ba6a786c1404b4b366e7e6",name:"activity_ui/atlas0.png"},{bytes:8364,md5:"e3f28f45f975a16c38da31293e1386ec",name:"activity_ui/library.json"},{bytes:699264,md5:"4baf1ac885cf67ecf8026fd44316cf29",name:"background.mp3"},{bytes:658534,md5:"e4da8d66703af7c07858c7621ba22d9e",name:"background.ogg"},{bytes:157929,md5:"38ae231921a0fcd91bc135ed8687e2b6",name:"backgrounds/1.jpg"},{bytes:350288,md5:"46986ec6460374803bd47b28dd412800",name:"backgrounds/2.jpg"},{bytes:305508,md5:"9f2845c8c9cd1f372f18c57a8c98d9ac",name:"backgrounds/3.jpg"},{bytes:203609,md5:"aae89d8bcb8cc5d1f3000266a2d32bac",name:"backgrounds/4.jpg"},{bytes:415181,md5:"1315fa4254a5ecfa36f83ed0ef72c9ba",name:"backgrounds/5.jpg"},{bytes:363746,md5:"d1c643befab708bf1df7439730c72067",name:"backgrounds/6.jpg"},{bytes:177111,md5:"4f4055b59d4e491fe6dd48316f18c2db",name:"backgrounds/7.jpg"},{bytes:209267,md5:"15c6a00ffb27d871124c4c58b2502c7e",name:"backgrounds/8.jpg"},{bytes:83739,md5:"f1744a310e2e68897965cb37f4f01690",name:"backgrounds/9.jpg"},{bytes:10392,md5:"0561c53e2fba8a017e3a9bd4bfb09dd0",name:"backgrounds/thumbs/1.jpg"},{bytes:12841,md5:"0c342e4dbcfc1ee247be1d8fe2523a8b",name:"backgrounds/thumbs/2.jpg"},{bytes:14888,md5:"63466da6cf605c035c58c7de72fb0197",name:"backgrounds/thumbs/3.jpg"},{bytes:9108,md5:"f2c12a2be916bf8168adb28b566af8c9",name:"backgrounds/thumbs/4.jpg"},{bytes:15758,md5:"89b9a8501547d44dcd68ddd895be3a22",name:"backgrounds/thumbs/5.jpg"},{bytes:12631,md5:"7221998ffa543a13a2f3c655432f7036",name:"backgrounds/thumbs/6.jpg"},{bytes:10560,md5:"07e11eec737268c47da8a3a5059f6a52",name:"backgrounds/thumbs/7.jpg"},{bytes:7630,md5:"e7c805926565c2940fcbb7a54fca8a18",name:"backgrounds/thumbs/8.jpg"},{bytes:6847,md5:"303783fd181bc41abdda9d19547b89cf",name:"backgrounds/thumbs/9.jpg"},{bytes:4541,md5:"d43a94b68deab02d55daeed6cc4f2e16",name:"button_back.png"},{bytes:8701,md5:"989b536b53b556b0298c356c4c98515e",name:"icons/thumb_sample.jpg"},{bytes:7436,md5:"9d0b032798e39ca168b16eaf7d5bf2b3",name:"stickers/blaster1.png"},{bytes:11773,md5:"5a6b85454585327957ae909d6afe4765",name:"stickers/camera.png"},{bytes:1308,md5:"f44502dc81f02a62b732942759535ab9",name:"stickers/cookie.png"},{bytes:3483,md5:"ebb27c04f00c0b83ce9c20d6333b680f",name:"stickers/corndog.png"},{bytes:19508,md5:"f8d0474295bc72838bb9b8f08012cabf",name:"stickers/discoball.png"},{bytes:18882,md5:"4bd263996825acda4d106e21110ae903",name:"stickers/dontbeahater.png"},{bytes:4377,md5:"12bc70c98564711771d7840956f93716",name:"stickers/galactivepostcard.png"},{bytes:5769,md5:"77df96ead2130c1264586614cab82e24",name:"stickers/greetings.png"},{bytes:18306,md5:"08e8896858bf5ad61a326961624f654c",name:"stickers/hater-hug-final.png"},{bytes:24755,md5:"05ac20ebe2223db209fb8c31568b6109",name:"stickers/hatersthrone.png"},{bytes:4171,md5:"bd857bdb2f2605e96a2fd51789e53063",name:"stickers/heartssticker.png"},{bytes:5320,md5:"e9ae48734d86fdd9da9c0a8f415fcdcf",name:"stickers/howdypardner.png"},{bytes:8898,md5:"c0a7eb700009dffb94817ebe10e9d082",name:"stickers/icecreamcone.png"},{bytes:43655,md5:"aed5da68f0626a1fabb35b471874ff6f",name:"stickers/lordhater.png"},{bytes:30846,md5:"1221404580e014e89287c63c94a50c6f",name:"stickers/lordhater2.png"},{bytes:40875,md5:"3e2a3a106a3f0b9b8df040399cd6da98",name:"stickers/lordhater3.png"},{bytes:38765,md5:"6401b2ff696af27af0935646784fe509",name:"stickers/lordhater4.png"},{bytes:34156,md5:"fdcc74368a6b49fa349aeb54889f0f71",name:"stickers/lordhatersship.png"},{bytes:9028,md5:"48248cfaba3b1519ec2bdcb9da1f4980",name:"stickers/moseyonover.png"},{bytes:8887,md5:"61e9ac8487820c53a5380d5f0541f3c2",name:"stickers/orbleBottle.png"},{bytes:22494,md5:"2f757a4e726e2ba44459291910144bf1",name:"stickers/peeprs_presentation.png"},{bytes:7755,md5:"05a4d11516a5feb1806fffb71cc87e37",name:"stickers/pizza.png"},{bytes:23432,md5:"6d059aee2b13835a4eb03238c9561bd1",name:"stickers/ridethingy.png"},{bytes:10797,md5:"4891c149be933e35e8daecee4b6065c6",name:"stickers/sandwich.png"},{bytes:13421,md5:"3c230c2682464d288c3b34fa47064bfd",name:"stickers/sandwich2.png"},{bytes:8173,md5:"570f9852a16d95b8f3d9c29102a83a26",name:"stickers/shipsticker.png"},{bytes:9083,md5:"53d861fee59692f993cf49bfcb89c635",name:"stickers/stroll-final.png"},{bytes:12301,md5:"fd4e6d88731ea1e176781b61593b798d",name:"stickers/swordsticker.png"},{bytes:12966,md5:"8151fae7e2b1a7e130b93b1c647bbaaf",name:"stickers/syliva-hug-final.png"},{bytes:58348,md5:"e82f9ce3cf58d1435af0910e5c0573a0",name:"stickers/sylvia-ride-final.png"},{bytes:12761,md5:"4f8ec9efbb531ae7d3d8a09156e41140",name:"stickers/sylvia.png"},{bytes:11125,md5:"02f15c0322731e939f346b2bb1ad2429",name:"stickers/taco.png"},{bytes:6865,md5:"9bc50e57be1aeecaa826a0a2f0fe507e",name:"stickers/throne.png"},{bytes:2582,md5:"21f35ba9a88c6e9807292df7d3cd7de9",name:"stickers/thumbs/blaster1.png"},{bytes:7214,md5:"716d0935e27b972915dccc8ae3af3a93",name:"stickers/thumbs/camera.png"},{bytes:5246,md5:"aec816497d67c0fd30ea51418d042ece",name:"stickers/thumbs/cookie.png"},{bytes:2724,md5:"0c85ec40415a208d74c4f23f5ccb3bc7",name:"stickers/thumbs/corndog.png"},{bytes:6532,md5:"9964a1d8a5d19927ecbf2e84f2929f6c",name:"stickers/thumbs/discoball.png"},{bytes:11149,md5:"2e4e36ac01117916bb607e842c4a5a38",name:"stickers/thumbs/dontbeahater.png"},{bytes:2776,md5:"bf46dbfc7978efccd43c14890195acb9",name:"stickers/thumbs/galactivepostcard.png"},{bytes:4229,md5:"38c3794bd7c94b5b83f484f229e13a9f",name:"stickers/thumbs/greetings.png"},{bytes:8126,md5:"f8b6a184cb3ee4f37a5df9b7276e8217",name:"stickers/thumbs/hater-hug-final.png"},{bytes:6889,md5:"2f83e02b40bc191d6b27a094eac47f63",name:"stickers/thumbs/hatersthrone.png"},{bytes:4289,md5:"794635af35dcff90c51d1947f18b848b",name:"stickers/thumbs/heartssticker.png"},{bytes:5422,md5:"c506f1ae7b53bdbf7caf5ac72500da9a",name:"stickers/thumbs/icecreamcone.png"},{bytes:7977,md5:"01aa44c1b608d195042cba89e928aea6",name:"stickers/thumbs/lordhater.png"},{bytes:7286,md5:"82e9997540c283efb7502b7ab25f0f01",name:"stickers/thumbs/lordhater2.png"},{bytes:7342,md5:"5de10771973e463f3e61135325db4221",name:"stickers/thumbs/lordhater3.png"},{bytes:7858,md5:"3f0eb7b5593679ebaad737b5cfcad072",name:"stickers/thumbs/lordhater4.png"},{bytes:9226,md5:"14111b0350640967049289e11c1c0466",name:"stickers/thumbs/lordhatersship.png"},{bytes:6676,md5:"3765673ebbe19f72e3644cb638ef53d3",name:"stickers/thumbs/moseyonover.png"},{bytes:1499,md5:"0ce2f5c4f390b65e04969abe4df32c6c",name:"stickers/thumbs/orbleBottle.png"},{bytes:5306,md5:"7b5324adf59d2589b4fa3b89d26a6f87",name:"stickers/thumbs/peeprs_presentation.png"},{bytes:6116,md5:"7fcde02b383b55825686ac8a280f9858",name:"stickers/thumbs/pizza.png"},{bytes:9359,md5:"2981a4a4a8dace2179b5620e97635f2f",name:"stickers/thumbs/ridethingy.png"},{bytes:5900,md5:"72b8f0d409f441dcba888ca670d1fc9c",name:"stickers/thumbs/sandwich.png"},{bytes:10057,md5:"26e5aed06cc7eca0c1326cf4db1e725a",name:"stickers/thumbs/sandwich2.png"},{bytes:5948,md5:"8c450ee7d33d31610add53fd50451cca",name:"stickers/thumbs/shipsticker.png"},{bytes:5988,md5:"54f1e6323523d98498f793ec80c90454",name:"stickers/thumbs/stroll-final.png"},{bytes:4784,md5:"e5a814eb9601e772ef69ca87407ac532",name:"stickers/thumbs/swordsticker.png"},{bytes:7342,md5:"ace6074e4309dbc15d30651f3d700eb4",name:"stickers/thumbs/syliva-hug-final.png"},{bytes:6578,md5:"04cd96fc8d363dfdfde01549046d79e0",name:"stickers/thumbs/sylvia-ride-final.png"},{bytes:6358,md5:"faf2d52c5e4bbc0f0d1e573148985021",name:"stickers/thumbs/sylvia.png"},{bytes:6264,md5:"e95656b9542b6ee5e2ee21c1a3dfd48e",name:"stickers/thumbs/taco.png"},{bytes:4212,md5:"628a173146231ac1634796048a3468f0",name:"stickers/thumbs/throne.png"},{bytes:9917,md5:"2a21ee28a2b1de335fd5e4ea19014edd",name:"stickers/thumbs/wagonsticker.png"},{bytes:4840,md5:"baacba249509c6d96460aedadc011073",name:"stickers/thumbs/wishyouwerehere.png"},{bytes:33190,md5:"afba38cfb5c60880713340b1d24fdf68",name:"stickers/wagonsticker.png"},{bytes:10968,md5:"839bfe9b2e68f1e9a9a82573de80ab89",name:"stickers/wishyouwerehere.png"},{bytes:42295,md5:"8e2271f0ad55eed43530096af3f4502d",name:"title_bg.jpg"},{bytes:50569,md5:"ecbacb8de1e4a9357b45fd8641b18d28",name:"wander_logo.png"}]}]}};ga=h.Manifest;y=(new V("\\b(Android)\\b","")).match(r.window.navigator.userAgent)?!1:null!=(new XMLHttpRequest).withCredentials;ga._supportsCrossOrigin=y;g.Sprite._scratchPoint=new w.Point;g.Font.NEWLINE=new g.Glyph(10);d.BasicMouse._sharedEvent=new p.MouseEvent;d.BasicPointer._sharedEvent=new p.PointerEvent;d.html.CanvasRenderer.CANVAS_TEXTURES=(new V("(iPhone|iPod|iPad)","")).match(r.window.navigator.userAgent);d.html.HtmlAssetPackLoader._mediaRefCount=0;d.html.HtmlAssetPackLoader._detectBlobSupport=!0;d.html.HtmlUtil.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];d.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER=r.window.top==r.window&&(new V("Mobile(/.*)? Safari","")).match(r.navigator.userAgent);d.html.WebAudioSound._detectSupport=!0;T.Parser.escapes=function(){var a=new D.StringMap;a.set("lt","<");a.set("gt",">");a.set("amp","&");a.set("quot",'"');a.set("apos","'");a.set("nbsp",String.fromCharCode(160));return a}(this);s.Locale.loading=!0;S._firstRun=!0;Q.main()})();