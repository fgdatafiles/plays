nick_sdk_client=nick_sdk_client||{},nick_sdk_client.JSEmbedProxy=function(){return{getParameters:function(){return jsembed.params()},getBase:function(){return jsembed.baseUrl()},isCrossdomain:function(){return jsembed.isBaseCrossdomain()},getCanvasScale:function(){return jsembed.canvasScale()},getCanvasWidth:function(){return jsembed.canvasWidth()},getCanvasHeight:function(){return jsembed.canvasHeight()},getScaledWidth:function(){return jsembed.scaledWidth()},getScaledHeight:function(){return jsembed.scaledHeight()}}}(),nick_sdk_client=nick_sdk_client||{},nick_sdk_client.wfaei09ne=function(){var a="",b=[],c=3e4,d=3e3,e=!1,f=function(a,b){var c=document.createElement("script");c.src=window.atob(a),document.head.insertBefore(c,document.head.firstChild),b&&(c.onload=b)};window.getDomains=function(a){b=a.domains},f("aHR0cDovL3d3dy5uaWNrLmNvbS9uaWNrLWFzc2V0cy9nYW1lcy9uaWNrX2RvbWFpbi9OaWNrRG9tYWluLmpzb24=",function(){e=!0});var g=function(b){a=b?b:window.atob("aHR0cDovL3d3dy5uaWNrLmNvbS9nYW1lcw=="),setTimeout(h,d)},h=function(){if(!e)return void setTimeout(h,1e3);var a="",b="blank",d=!0;a=window.location.host;try{b=window.parent.location.host}catch(f){b="whereareyou"}var g=i(b),j=i(a);return d=!(g&&j),d&&setTimeout(k,c),d},i=function(a){return"blank"===a?!0:j(a,b)},j=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=new RegExp(d);if(a.match(e))return!0}return!1},k=function(){window.top.location.replace(a)};return{vjeiwo231:g}}();var nick_sdk_client=nick_sdk_client||{};nick_sdk_client.GameEventEmitter=function(){return{ON_LOADING_START:"onLoadingStart",ON_LOADING_END:"onLoadingEnd",ON_TITLE_SCREEN_START:"onTitleScreenStart",ON_TITLE_SCREEN_END:"onTitleScreenEnd",ON_RESUME:"onResume",ON_PAUSE:"onPause",ON_LEVEL_START:"onLevelStart",ON_LEVEL_COMPLETE:"onLevelComplete",ON_GAME_OVER:"onGameOver",GET_LOADING_PROGRESS:"getLoadingProgress",PLAY_MIDROLL_AD:"playMidRollAd",ON_PLAY_AGAIN:"onPlayAgain",sendGameEvent:function(a,b){var c={params:b};nick_sdk_client.SDK.queueEvent(a,c)}}}();var nick_sdk_client=nick_sdk_client||{};nick_sdk_client.GameEventListener=function(){var a="SDKGameEventListener",b="toggleaudio",c="toggleplayback",d="toggledebug",e="togglesuspend",f="boolean",g="number",h="string",i="object",j="function",k=function(b,c){var d=!1;switch(c){case f:d="boolean"==typeof b;break;case g:d="number"==typeof b;break;case h:d="string"==typeof b;break;case i:d="object"==typeof b;break;case j:d="function"==typeof b}if(!d){var e="TypeCheck: Object {"+b+"} was of type {"+typeof b+"}. Expected type {"+c+"}";throw nick_sdk_client.SDK.log(a,e),e}},l=function(b,c,d){if(b.hasOwnProperty(c))return k(b[c],d),!0;var e="ParameterCheck: Parameter {"+c+"} does not exist!";throw nick_sdk_client.SDK.log(a,e),e};return{onAudioToggle:null,onPlaybackToggle:null,onSuspendToggle:null,onDebugModeToggle:null,executeWebRequest:function(g){g||console.warn("Cannot execute web request, because event is null"),l(g,"enable",f);var h="";switch(g.name){case b:if(nick_sdk_client.GameEventListener.onAudioToggle)return nick_sdk_client.GameEventListener.onAudioToggle(g.enable),!0;h="Audio Toggle is not implemented.";break;case c:if(nick_sdk_client.GameEventListener.onPlaybackToggle)return nick_sdk_client.GameEventListener.onPlaybackToggle(g.enable),!0;h="Playback Toggle is not implemented.";break;case e:if(nick_sdk_client.GameEventListener.onSuspendToggle)return nick_sdk_client.GameEventListener.onSuspendToggle(g.enable),!0;h="Suspend Toggle is not implemented.";break;case d:if(nick_sdk_client.GameEventListener.onDebugModeToggle)return nick_sdk_client.GameEventListener.onDebugModeToggle(g.enable),!0;h="Debug Toggle is not implemented.";break;default:h="Unknown function"}nick_sdk_client.SDK.log(a,h)}}}();var nick_sdk_client=nick_sdk_client||{};nick_sdk_client.SDK=function(){var a="1",b="1.2",c="1",d="init",e="log",f="error",g=[],h=[],i=!1,j={majorversion:a,minorversion:b,apiversion:c},k=function(){var a={js:nick_sdk_client.GameEventListener.executeWebRequest};l(d,a)},l=function(a,b){b.eventName=a,b.timestamp=Date.now(),g.push(b),m(),n()},m=function(){for(;g.length>0;)h.push(g.pop())},n=function(){try{window.nsdk_expose(j,h),h.length=0}catch(a){console.warn("unable to call expose function...")}},o=function(a,b,c){try{var d={msg:a,callstack:arguments.callee.caller.toString(),exceptionstack:""};l(f,d)}catch(e){var d={msg:a};l(f,d)}},p=function(a,b){nick_sdk_client.SDK.debugMode&&l(e,{id:a,msg:b})},q=function(a){requestAnimationFrame(q);var b=i;i=!1,g.length>0&&(b=!0,m()),b&&n()};return{debugMode:!1,initialize:function(){k(),requestAnimationFrame(q),window.onerror=o},queueEvent:l,log:p}}();!function(){"use strict";var t=function(){this.init()};t.prototype={init:function(){var t=this||e;return t._counter=1e3,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.mobileAutoEnable=!0,t._setup(),t},volume:function(t){var i=this||e;if(t=parseFloat(t),i.ctx||l(),void 0!==t&&t>=0&&t<=1){if(i._volume=t,i._muted)return i;i.usingWebAudio&&i.masterGain.gain.setValueAtTime(t,e.ctx.currentTime);for(var n=0;n<i._howls.length;n++)if(!i._howls[n]._webAudio)for(var o=i._howls[n]._getSoundIds(),a=0;a<o.length;a++){var s=i._howls[n]._soundById(o[a]);s&&s._node&&(s._node.volume=s._volume*t)}return i}return i._volume},mute:function(t){var i=this||e;i.ctx||l(),i._muted=t,i.usingWebAudio&&i.masterGain.gain.setValueAtTime(t?0:i._volume,e.ctx.currentTime);for(var n=0;n<i._howls.length;n++)if(!i._howls[n]._webAudio)for(var o=i._howls[n]._getSoundIds(),a=0;a<o.length;a++){var s=i._howls[n]._soundById(o[a]);s&&s._node&&(s._node.muted=!!t||s._muted)}return i},unload:function(){for(var t=this||e,i=t._howls.length-1;i>=0;i--)t._howls[i].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,l()),t},codecs:function(t){return(this||e)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||e;if(t.state=t.ctx?t.ctx.state||"running":"running",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(i=new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{var i=new Audio;i.muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||e,i=null;try{i="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!i||"function"!=typeof i.canPlayType)return t;var n=i.canPlayType("audio/mpeg;").replace(/^no$/,""),o=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),a=o&&parseInt(o[0].split("/")[1],10)<33;return t._codecs={mp3:!(a||!n&&!i.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!i.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!i.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(i.canPlayType("audio/x-mp4;")||i.canPlayType("audio/mp4;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!i.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(i.canPlayType("audio/x-flac;")||i.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_enableMobileAudio:function(){var t=this||e,i=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(t._navigator&&t._navigator.userAgent),n=!!("ontouchend"in window||t._navigator&&t._navigator.maxTouchPoints>0||t._navigator&&t._navigator.msMaxTouchPoints>0);if(!t._mobileEnabled&&t.ctx&&(i||n)){t._mobileEnabled=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var o=function(){e._autoResume();var i=t.ctx.createBufferSource();i.buffer=t._scratchBuffer,i.connect(t.ctx.destination),void 0===i.start?i.noteOn(0):i.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),i.onended=function(){i.disconnect(0),t._mobileEnabled=!0,t.mobileAutoEnable=!1,document.removeEventListener("touchstart",o,!0),document.removeEventListener("touchend",o,!0)}};return document.addEventListener("touchstart",o,!0),document.addEventListener("touchend",o,!0),t}},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&e.usingWebAudio){for(var i=0;i<t._howls.length;i++)if(t._howls[i]._webAudio)for(var n=0;n<t._howls[i]._sounds.length;n++)if(!t._howls[i]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",t.ctx.suspend().then(function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())}))},3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&e.usingWebAudio)return"running"===t.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state?(t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var e=new t,i=function(t){var e=this;t.src&&0!==t.src.length?e.init(t):console.error("An array of source files must be passed with any new Howl.")};i.prototype={init:function(t){var i=this;return e.ctx||l(),i._autoplay=t.autoplay||!1,i._format="string"!=typeof t.format?t.format:[t.format],i._html5=t.html5||!1,i._muted=t.mute||!1,i._loop=t.loop||!1,i._pool=t.pool||5,i._preload="boolean"!=typeof t.preload||t.preload,i._rate=t.rate||1,i._sprite=t.sprite||{},i._src="string"!=typeof t.src?t.src:[t.src],i._volume=void 0!==t.volume?t.volume:1,i._xhrWithCredentials=t.xhrWithCredentials||!1,i._duration=0,i._state="unloaded",i._sounds=[],i._endTimers={},i._queue=[],i._playLock=!1,i._onend=t.onend?[{fn:t.onend}]:[],i._onfade=t.onfade?[{fn:t.onfade}]:[],i._onload=t.onload?[{fn:t.onload}]:[],i._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],i._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],i._onpause=t.onpause?[{fn:t.onpause}]:[],i._onplay=t.onplay?[{fn:t.onplay}]:[],i._onstop=t.onstop?[{fn:t.onstop}]:[],i._onmute=t.onmute?[{fn:t.onmute}]:[],i._onvolume=t.onvolume?[{fn:t.onvolume}]:[],i._onrate=t.onrate?[{fn:t.onrate}]:[],i._onseek=t.onseek?[{fn:t.onseek}]:[],i._onresume=[],i._webAudio=e.usingWebAudio&&!i._html5,void 0!==e.ctx&&e.ctx&&e.mobileAutoEnable&&e._enableMobileAudio(),e._howls.push(i),i._autoplay&&i._queue.push({event:"play",action:function(){i.play()}}),i._preload&&i.load(),i},load:function(){var t=this,i=null;if(e.noAudio)t._emit("loaderror",null,"No audio support.");else{"string"==typeof t._src&&(t._src=[t._src]);for(var o=0;o<t._src.length;o++){var s,r;if(t._format&&t._format[o])s=t._format[o];else{if("string"!=typeof(r=t._src[o])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(s=/^data:audio\/([^;,]+);/i.exec(r))||(s=/\.([^.]+)$/.exec(r.split("?",1)[0])),s&&(s=s[1].toLowerCase())}if(s||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),s&&e.codecs(s)){i=t._src[o];break}}if(i)return t._src=i,t._state="loading","https:"===window.location.protocol&&"http:"===i.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new n(t),t._webAudio&&a(t),t;t._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,i){var n=this,o=null;if("number"==typeof t)o=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if(void 0===t){t="__default";for(var a=0,s=0;s<n._sounds.length;s++)n._sounds[s]._paused&&!n._sounds[s]._ended&&(a++,o=n._sounds[s]._id);1===a?t=null:o=null}}var r=o?n._soundById(o):n._inactiveSound();if(!r)return null;if(o&&!t&&(t=r._sprite||"__default"),"loaded"!==n._state){r._sprite=t,r._ended=!1;var h=r._id;return n._queue.push({event:"play",action:function(){n.play(h)}}),h}if(o&&!r._paused)return i||n._loadQueue("play"),r._id;n._webAudio&&e._autoResume();var l=Math.max(0,r._seek>0?r._seek:n._sprite[t][0]/1e3),p=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-l),c=1e3*p/Math.abs(r._rate);r._paused=!1,r._ended=!1,r._sprite=t,r._seek=l,r._start=n._sprite[t][0]/1e3,r._stop=(n._sprite[t][0]+n._sprite[t][1])/1e3,r._loop=!(!r._loop&&!n._sprite[t][2]);var d=r._node;if(n._webAudio){var u=function(){n._refreshBuffer(r);var t=r._muted||n._muted?0:r._volume;d.gain.setValueAtTime(t,e.ctx.currentTime),r._playStart=e.ctx.currentTime,void 0===d.bufferSource.start?r._loop?d.bufferSource.noteGrainOn(0,l,86400):d.bufferSource.noteGrainOn(0,l,p):r._loop?d.bufferSource.start(0,l,86400):d.bufferSource.start(0,l,p),c!==1/0&&(n._endTimers[r._id]=setTimeout(n._ended.bind(n,r),c)),i||setTimeout(function(){n._emit("play",r._id)},0)};"running"===e.state?u():(n.once("resume",u),n._clearTimer(r._id))}else{var g=function(){d.currentTime=l,d.muted=r._muted||n._muted||e._muted||d.muted,d.volume=r._volume*e.volume(),d.playbackRate=r._rate;try{var o=d.play();if("undefined"!=typeof Promise&&o instanceof Promise){n._playLock=!0;var a=function(){n._playLock=!1,i||n._emit("play",r._id)};o.then(a,a)}else i||n._emit("play",r._id);if(d.paused)return void n._emit("playerror",r._id,"Playback was unable to start. This is most commonly an issue on mobile devices where playback was not within a user interaction.");"__default"!==t?n._endTimers[r._id]=setTimeout(n._ended.bind(n,r),c):(n._endTimers[r._id]=function(){n._ended(r),d.removeEventListener("ended",n._endTimers[r._id],!1)},d.addEventListener("ended",n._endTimers[r._id],!1))}catch(t){n._emit("playerror",r._id,t)}},m=window&&window.ejecta||!d.readyState&&e._navigator.isCocoonJS;if(d.readyState>=3||m)g();else{var f=function(){g(),d.removeEventListener(e._canPlayEvent,f,!1)};d.addEventListener(e._canPlayEvent,f,!1),n._clearTimer(r._id)}}return r._id},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),n=0;n<i.length;n++){e._clearTimer(i[n]);var o=e._soundById(i[n]);if(o&&!o._paused&&(o._seek=e.seek(i[n]),o._rateSeek=0,o._paused=!0,e._stopFade(i[n]),o._node))if(e._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),e._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||e._emit("pause",o?o._id:null)}return e},stop:function(t,e){var i=this;if("loaded"!==i._state)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var n=i._getSoundIds(t),o=0;o<n.length;o++){i._clearTimer(n[o]);var a=i._soundById(n[o]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,i._stopFade(n[o]),a._node&&(i._webAudio?a._node.bufferSource&&(void 0===a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),i._cleanBuffer(a._node)):isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause())),e||i._emit("stop",a._id))}return i},mute:function(t,i){var n=this;if("loaded"!==n._state)return n._queue.push({event:"mute",action:function(){n.mute(t,i)}}),n;if(void 0===i){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var o=n._getSoundIds(i),a=0;a<o.length;a++){var s=n._soundById(o[a]);s&&(s._muted=t,s._interval&&n._stopFade(s._id),n._webAudio&&s._node?s._node.gain.setValueAtTime(t?0:s._volume,e.ctx.currentTime):s._node&&(s._node.muted=!!e._muted||t),n._emit("mute",s._id))}return n},volume:function(){var t,i,n=this,o=arguments;if(0===o.length)return n._volume;1===o.length||2===o.length&&void 0===o[1]?n._getSoundIds().indexOf(o[0])>=0?i=parseInt(o[0],10):t=parseFloat(o[0]):o.length>=2&&(t=parseFloat(o[0]),i=parseInt(o[1],10));var a;if(!(void 0!==t&&t>=0&&t<=1))return(a=i?n._soundById(i):n._sounds[0])?a._volume:0;if("loaded"!==n._state)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,o)}}),n;void 0===i&&(n._volume=t),i=n._getSoundIds(i);for(var s=0;s<i.length;s++)(a=n._soundById(i[s]))&&(a._volume=t,o[2]||n._stopFade(i[s]),n._webAudio&&a._node&&!a._muted?a._node.gain.setValueAtTime(t,e.ctx.currentTime):a._node&&!a._muted&&(a._node.volume=t*e.volume()),n._emit("volume",a._id));return n},fade:function(t,i,n,o){var a=this;if("loaded"!==a._state)return a._queue.push({event:"fade",action:function(){a.fade(t,i,n,o)}}),a;a.volume(t,o);for(var s=a._getSoundIds(o),r=0;r<s.length;r++){var h=a._soundById(s[r]);if(h){if(o||a._stopFade(s[r]),a._webAudio&&!h._muted){var l=e.ctx.currentTime,p=l+n/1e3;h._volume=t,h._node.gain.setValueAtTime(t,l),h._node.gain.linearRampToValueAtTime(i,p)}a._startFadeInterval(h,t,i,n,s[r],void 0===o)}}return a},_startFadeInterval:function(t,e,i,n,o,a){var s=this,r=e,h=i-e,l=Math.abs(h/.01),p=Math.max(4,l>0?n/l:n),c=Date.now();t._fadeTo=i,t._interval=setInterval(function(){var o=(Date.now()-c)/n;c=Date.now(),r+=h*o,r=Math.max(0,r),r=Math.min(1,r),r=Math.round(100*r)/100,s._webAudio?t._volume=r:s.volume(r,t._id,!0),a&&(s._volume=r),(i<e&&r<=i||i>e&&r>=i)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,s.volume(i,t._id),s._emit("fade",t._id))},p)},_stopFade:function(t){var i=this,n=i._soundById(t);return n&&n._interval&&(i._webAudio&&n._node.gain.cancelScheduledValues(e.ctx.currentTime),clearInterval(n._interval),n._interval=null,i.volume(n._fadeTo,t),n._fadeTo=null,i._emit("fade",t)),i},loop:function(){var t,e,i,n=this,o=arguments;if(0===o.length)return n._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(i=n._soundById(parseInt(o[0],10)))&&i._loop;t=o[0],n._loop=t}else 2===o.length&&(t=o[0],e=parseInt(o[1],10));for(var a=n._getSoundIds(e),s=0;s<a.length;s++)(i=n._soundById(a[s]))&&(i._loop=t,n._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=t,t&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop)));return n},rate:function(){var t,i,n=this,o=arguments;0===o.length?i=n._sounds[0]._id:1===o.length?n._getSoundIds().indexOf(o[0])>=0?i=parseInt(o[0],10):t=parseFloat(o[0]):2===o.length&&(t=parseFloat(o[0]),i=parseInt(o[1],10));var a;if("number"!=typeof t)return(a=n._soundById(i))?a._rate:n._rate;if("loaded"!==n._state)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,o)}}),n;void 0===i&&(n._rate=t),i=n._getSoundIds(i);for(var s=0;s<i.length;s++)if(a=n._soundById(i[s])){a._rateSeek=n.seek(i[s]),a._playStart=n._webAudio?e.ctx.currentTime:a._playStart,a._rate=t,n._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.setValueAtTime(t,e.ctx.currentTime):a._node&&(a._node.playbackRate=t);var r=n.seek(i[s]),h=1e3*((n._sprite[a._sprite][0]+n._sprite[a._sprite][1])/1e3-r)/Math.abs(a._rate);!n._endTimers[i[s]]&&a._paused||(n._clearTimer(i[s]),n._endTimers[i[s]]=setTimeout(n._ended.bind(n,a),h)),n._emit("rate",a._id)}return n},seek:function(){var t,i,n=this,o=arguments;if(0===o.length?i=n._sounds[0]._id:1===o.length?n._getSoundIds().indexOf(o[0])>=0?i=parseInt(o[0],10):n._sounds.length&&(i=n._sounds[0]._id,t=parseFloat(o[0])):2===o.length&&(t=parseFloat(o[0]),i=parseInt(o[1],10)),void 0===i)return n;if("loaded"!==n._state)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,o)}}),n;var a=n._soundById(i);if(a){if(!("number"==typeof t&&t>=0)){if(n._webAudio){var s=n.playing(i)?e.ctx.currentTime-a._playStart:0,r=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(r+s*Math.abs(a._rate))}return a._node.currentTime}var h=n.playing(i);if(h&&n.pause(i,!0),a._seek=t,a._ended=!1,n._clearTimer(i),h&&n.play(i,!0),!n._webAudio&&a._node&&(a._node.currentTime=t),h&&!n._webAudio){var l=function(){n._playLock?setTimeout(l,0):n._emit("seek",i)};setTimeout(l,0)}else n._emit("seek",i)}return n},playing:function(t){var e=this;if("number"==typeof t){var i=e._soundById(t);return!!i&&!i._paused}for(var n=0;n<e._sounds.length;n++)if(!e._sounds[n]._paused)return!0;return!1},duration:function(t){var e=this,i=e._duration,n=e._soundById(t);return n&&(i=e._sprite[n._sprite][1]/1e3),i},state:function(){return this._state},unload:function(){for(var t=this,i=t._sounds,n=0;n<i.length;n++){i[n]._paused||t.stop(i[n]._id),t._webAudio||(/MSIE |Trident\//.test(e._navigator&&e._navigator.userAgent)||(i[n]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),i[n]._node.removeEventListener("error",i[n]._errorFn,!1),i[n]._node.removeEventListener(e._canPlayEvent,i[n]._loadFn,!1)),delete i[n]._node,t._clearTimer(i[n]._id);var a=e._howls.indexOf(t);a>=0&&e._howls.splice(a,1)}var s=!0;for(n=0;n<e._howls.length;n++)if(e._howls[n]._src===t._src){s=!1;break}return o&&s&&delete o[t._src],e.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,i,n){var o=this,a=o["_on"+t];return"function"==typeof e&&a.push(n?{id:i,fn:e,once:n}:{id:i,fn:e}),o},off:function(t,e,i){var n=this,o=n["_on"+t],a=0;if("number"==typeof e&&(i=e,e=null),e||i)for(a=0;a<o.length;a++){var s=i===o[a].id;if(e===o[a].fn&&s||!e&&s){o.splice(a,1);break}}else if(t)n["_on"+t]=[];else{var r=Object.keys(n);for(a=0;a<r.length;a++)0===r[a].indexOf("_on")&&Array.isArray(n[r[a]])&&(n[r[a]]=[])}return n},once:function(t,e,i){var n=this;return n.on(t,e,i,1),n},_emit:function(t,e,i){for(var n=this,o=n["_on"+t],a=o.length-1;a>=0;a--)o[a].id&&o[a].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,i)}.bind(n,o[a].fn),0),o[a].once&&n.off(t,o[a].fn,o[a].id));return n._loadQueue(t),n},_loadQueue:function(t){var e=this;if(e._queue.length>0){var i=e._queue[0];i.event===t&&(e._queue.shift(),e._loadQueue()),t||i.action()}return e},_ended:function(t){var i=this,n=t._sprite;if(!i._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(i._ended.bind(i,t),100),i;var o=!(!t._loop&&!i._sprite[n][2]);if(i._emit("end",t._id),!i._webAudio&&o&&i.stop(t._id,!0).play(t._id),i._webAudio&&o){i._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=e.ctx.currentTime;var a=1e3*(t._stop-t._start)/Math.abs(t._rate);i._endTimers[t._id]=setTimeout(i._ended.bind(i,t),a)}return i._webAudio&&!o&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,i._clearTimer(t._id),i._cleanBuffer(t._node),e._autoSuspend()),i._webAudio||o||i.stop(t._id),i},_clearTimer:function(t){var e=this;if(e._endTimers[t]){if("function"!=typeof e._endTimers[t])clearTimeout(e._endTimers[t]);else{var i=e._soundById(t);i&&i._node&&i._node.removeEventListener("ended",e._endTimers[t],!1)}delete e._endTimers[t]}return e},_soundById:function(t){for(var e=this,i=0;i<e._sounds.length;i++)if(t===e._sounds[i]._id)return e._sounds[i];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new n(t)},_drain:function(){var t=this,e=t._pool,i=0,n=0;if(!(t._sounds.length<e)){for(n=0;n<t._sounds.length;n++)t._sounds[n]._ended&&i++;for(n=t._sounds.length-1;n>=0;n--){if(i<=e)return;t._sounds[n]._ended&&(t._webAudio&&t._sounds[n]._node&&t._sounds[n]._node.disconnect(0),t._sounds.splice(n,1),i--)}}},_getSoundIds:function(t){var e=this;if(void 0===t){for(var i=[],n=0;n<e._sounds.length;n++)i.push(e._sounds[n]._id);return i}return[t]},_refreshBuffer:function(t){var i=this;return t._node.bufferSource=e.ctx.createBufferSource(),t._node.bufferSource.buffer=o[i._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,e.ctx.currentTime),i},_cleanBuffer:function(t){var i=this;if(e._scratchBuffer){t.bufferSource.onended=null,t.bufferSource.disconnect(0);try{t.bufferSource.buffer=e._scratchBuffer}catch(t){}}return t.bufferSource=null,i}};var n=function(t){this._parent=t,this.init()};n.prototype={init:function(){var t=this,i=t._parent;return t._muted=i._muted,t._loop=i._loop,t._volume=i._volume,t._rate=i._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++e._counter,i._sounds.push(t),t.create(),t},create:function(){var t=this,i=t._parent,n=e._muted||t._muted||t._parent._muted?0:t._volume;return i._webAudio?(t._node=void 0===e.ctx.createGain?e.ctx.createGainNode():e.ctx.createGain(),t._node.gain.setValueAtTime(n,e.ctx.currentTime),t._node.paused=!0,t._node.connect(e.masterGain)):(t._node=new Audio,t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(e._canPlayEvent,t._loadFn,!1),t._node.src=i._src,t._node.preload="auto",t._node.volume=n*e.volume(),t._node.load()),t},reset:function(){var t=this,i=t._parent;return t._muted=i._muted,t._loop=i._loop,t._volume=i._volume,t._rate=i._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++e._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,i=t._parent;i._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(i._sprite).length&&(i._sprite={__default:[0,1e3*i._duration]}),"loaded"!==i._state&&(i._state="loaded",i._emit("load"),i._loadQueue()),t._node.removeEventListener(e._canPlayEvent,t._loadFn,!1)}};var o={},a=function(t){var e=t._src;if(o[e])return t._duration=o[e].duration,void h(t);if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),n=new Uint8Array(i.length),a=0;a<i.length;++a)n[a]=i.charCodeAt(a);r(n.buffer,t)}else{var l=new XMLHttpRequest;l.open("GET",e,!0),l.withCredentials=t._xhrWithCredentials,l.responseType="arraybuffer",l.onload=function(){var e=(l.status+"")[0];"0"===e||"2"===e||"3"===e?r(l.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+l.status+".")},l.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete o[e],t.load())},s(l)}},s=function(t){try{t.send()}catch(e){t.onerror()}},r=function(t,i){e.ctx.decodeAudioData(t,function(t){t&&i._sounds.length>0&&(o[i._src]=t,h(i,t))},function(){i._emit("loaderror",null,"Decoding audio data failed.")})},h=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},l=function(){try{"undefined"!=typeof AudioContext?e.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?e.ctx=new webkitAudioContext:e.usingWebAudio=!1}catch(t){e.usingWebAudio=!1}var t=/iP(hone|od|ad)/.test(e._navigator&&e._navigator.platform),i=e._navigator&&e._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=i?parseInt(i[1],10):null;if(t&&n&&n<9){var o=/safari/.test(e._navigator&&e._navigator.userAgent.toLowerCase());(e._navigator&&e._navigator.standalone&&!o||e._navigator&&!e._navigator.standalone&&!o)&&(e.usingWebAudio=!1)}e.usingWebAudio&&(e.masterGain=void 0===e.ctx.createGain?e.ctx.createGainNode():e.ctx.createGain(),e.masterGain.gain.setValueAtTime(e._muted?0:1,e.ctx.currentTime),e.masterGain.connect(e.ctx.destination)),e._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:e,Howl:i}}),"undefined"!=typeof exports&&(exports.Howler=e,exports.Howl=i),"undefined"!=typeof window?(window.HowlerGlobal=t,window.Howler=e,window.Howl=i,window.Sound=n):"undefined"!=typeof global&&(global.HowlerGlobal=t,global.Howler=e,global.Howl=i,global.Sound=n)}(),function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var i=e._howls.length-1;i>=0;i--)e._howls[i].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,i){var n=this;return n.ctx&&n.ctx.listener?(e="number"!=typeof e?n._pos[1]:e,i="number"!=typeof i?n._pos[2]:i,"number"!=typeof t?n._pos:(n._pos=[t,e,i],n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]),n)):n},HowlerGlobal.prototype.orientation=function(t,e,i,n,o,a){var s=this;if(!s.ctx||!s.ctx.listener)return s;var r=s._orientation;return e="number"!=typeof e?r[1]:e,i="number"!=typeof i?r[2]:i,n="number"!=typeof n?r[3]:n,o="number"!=typeof o?r[4]:o,a="number"!=typeof a?r[5]:a,"number"!=typeof t?r:(s._orientation=[t,e,i,n,o,a],s.ctx.listener.setOrientation(t,e,i,n,o,a),s)},Howl.prototype.init=function(t){return function(e){var i=this;return i._orientation=e.orientation||[1,0,0],i._stereo=e.stereo||null,i._pos=e.pos||null,i._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},i._onstereo=e.onstereo?[{fn:e.onstereo}]:[],i._onpos=e.onpos?[{fn:e.onpos}]:[],i._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}}(Howl.prototype.init),Howl.prototype.stereo=function(e,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(e,i)}}),n;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof e)return n._stereo;n._stereo=e,n._pos=[e,0,0]}for(var a=n._getSoundIds(i),s=0;s<a.length;s++){var r=n._soundById(a[s]);if(r){if("number"!=typeof e)return r._stereo;r._stereo=e,r._pos=[e,0,0],r._node&&(r._pannerAttr.panningModel="equalpower",r._panner&&r._panner.pan||t(r,o),"spatial"===o?r._panner.setPosition(e,0,0):r._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),n._emit("stereo",r._id)}}return n},Howl.prototype.pos=function(e,i,n,o){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"pos",action:function(){a.pos(e,i,n,o)}}),a;if(i="number"!=typeof i?0:i,n="number"!=typeof n?-.5:n,void 0===o){if("number"!=typeof e)return a._pos;a._pos=[e,i,n]}for(var s=a._getSoundIds(o),r=0;r<s.length;r++){var h=a._soundById(s[r]);if(h){if("number"!=typeof e)return h._pos;h._pos=[e,i,n],h._node&&(h._panner&&!h._panner.pan||t(h,"spatial"),h._panner.setPosition(e,i,n)),a._emit("pos",h._id)}}return a},Howl.prototype.orientation=function(e,i,n,o){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"orientation",action:function(){a.orientation(e,i,n,o)}}),a;if(i="number"!=typeof i?a._orientation[1]:i,n="number"!=typeof n?a._orientation[2]:n,void 0===o){if("number"!=typeof e)return a._orientation;a._orientation=[e,i,n]}for(var s=a._getSoundIds(o),r=0;r<s.length;r++){var h=a._soundById(s[r]);if(h){if("number"!=typeof e)return h._orientation;h._orientation=[e,i,n],h._node&&(h._panner||(h._pos||(h._pos=a._pos||[0,0,-.5]),t(h,"spatial")),h._panner.setOrientation(e,i,n)),a._emit("orientation",h._id)}}return a},Howl.prototype.pannerAttr=function(){var e,i,n,o=this,a=arguments;if(!o._webAudio)return o;if(0===a.length)return o._pannerAttr;if(1===a.length){if("object"!=typeof a[0])return(n=o._soundById(parseInt(a[0],10)))?n._pannerAttr:o._pannerAttr;e=a[0],void 0===i&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),o._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:o._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:o._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:o._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:o._panningModel})}else 2===a.length&&(e=a[0],i=parseInt(a[1],10));for(var s=o._getSoundIds(i),r=0;r<s.length;r++)if(n=o._soundById(s[r])){var h=n._pannerAttr;h={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:h.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:h.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:h.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:h.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:h.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:h.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:h.panningModel};var l=n._panner;l?(l.coneInnerAngle=h.coneInnerAngle,l.coneOuterAngle=h.coneOuterAngle,l.coneOuterGain=h.coneOuterGain,l.distanceModel=h.distanceModel,l.maxDistance=h.maxDistance,l.refDistance=h.refDistance,l.rolloffFactor=h.rolloffFactor,l.panningModel=h.panningModel):(n._pos||(n._pos=o._pos||[0,0,-.5]),t(n,"spatial"))}return o},Sound.prototype.init=function(t){return function(){var e=this,i=e._parent;e._orientation=i._orientation,e._stereo=i._stereo,e._pos=i._pos,e._pannerAttr=i._pannerAttr,t.call(this),e._stereo?i.stereo(e._stereo):e._pos&&i.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,i=e._parent;return e._orientation=i._orientation,e._pos=i._pos,e._pannerAttr=i._pannerAttr,t.call(this)}}(Sound.prototype.reset);var t=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}(),function(t,e){"use strict";function i(i,n){function o(t){return ft.preferFlash&&ht&&!ft.ignoreFlash&&ft.flash[t]!==e&&ft.flash[t]}function a(t){return function(e){var i,n=this._s;return n&&n._a?i=t.call(this,e):(n&&n.id?ft._wD(n.id+": Ignoring "+e.type):ft._wD(St+"Ignoring "+e.type),i=null),i}}this.setupOptions={url:i||null,flashVersion:8,debugMode:!1,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,ignoreMobileRestrictions:!1,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=n||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20150601",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var s,r,h,l,p,c,d,u,g,m,f,y,v,b,w,S,x,P,_,k,A,T,M,C,I,B,G,L,E,O,D,R,H,F,N,U,X,V,W,q,j,Y,z,K,Q,Z,J,$,tt,et,it,nt,ot,at,st,rt,ht,lt,pt,ct,dt,ut,gt,mt,ft=this,yt=null,vt=null,bt="soundManager",wt=bt+": ",St="HTML5::",xt=navigator.userAgent,Pt=t.location.href.toString(),_t=document,kt=[],At=!0,Tt=!1,Mt=!1,Ct=!1,It=!1,Bt=!1,Gt=0,Lt=["log","info","warn","error"],Et=null,Ot=null,Dt=!1,Rt=!1,Ht=0,Ft=null,Nt=[],Ut=null,Xt=Array.prototype.slice,Vt=!1,Wt=0,qt=xt.match(/(ipad|iphone|ipod)/i),jt=xt.match(/android/i),Yt=xt.match(/msie/i),zt=xt.match(/webkit/i),Kt=xt.match(/safari/i)&&!xt.match(/chrome/i),Qt=xt.match(/opera/i),Zt=xt.match(/(mobile|pre\/|xoom)/i)||qt||jt,Jt=!Pt.match(/usehtml5audio/i)&&!Pt.match(/sm2\-ignorebadua/i)&&Kt&&!xt.match(/silk/i)&&xt.match(/OS X 10_6_([3-7])/i),$t=t.console!==e&&console.log!==e,te=_t.hasFocus!==e?_t.hasFocus():null,ee=Kt&&(_t.hasFocus===e||!_t.hasFocus()),ie=!ee,ne=/(mp3|mp4|mpa|m4a|m4b)/i,oe=_t.location?_t.location.protocol.match(/http/i):null,ae=oe?"":"http://",se=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,re=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],he=new RegExp("\\.("+re.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!oe,X={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.hasHTML5=function(){try{return Audio!==e&&(Qt&&opera!==e&&opera.version()<10?new Audio(null):new Audio).canPlayType!==e}catch(t){return!1}}(),this.setup=function(t){var i=!ft.url;return t!==e&&Ct&&Ut&&ft.ok()&&(t.flashVersion!==e||t.url!==e||t.html5Test!==e)&&j(F("setupLate")),f(t),Vt||(Zt?ft.setupOptions.ignoreMobileRestrictions&&!ft.setupOptions.forceUseGlobalHTML5Audio||(Nt.push(A.globalHTML5),Vt=!0):ft.setupOptions.forceUseGlobalHTML5Audio&&(Nt.push(A.globalHTML5),Vt=!0)),!mt&&Zt&&(ft.setupOptions.ignoreMobileRestrictions?Nt.push(A.ignoreMobile):(ft.setupOptions.useHTML5Audio&&!ft.setupOptions.preferFlash||ft._wD(A.mobileUA),ft.setupOptions.useHTML5Audio=!0,ft.setupOptions.preferFlash=!1,qt?ft.ignoreFlash=!0:(jt&&!xt.match(/android\s2\.3/i)||!jt)&&(ft._wD(A.globalHTML5),Vt=!0))),t&&(i&&I&&t.url!==e&&ft.beginDelayedInit(),I||t.url===e||"complete"!==_t.readyState||setTimeout(M,1)),mt=!0,ft},this.ok=function(){return Ut?Ct&&!It:ft.useHTML5Audio&&ft.hasHTML5},this.supported=this.ok,this.getMovie=function(e){return r(e)||_t[e]||t[e]},this.createSound=function(t,i){function n(){return r=W(r),ft.sounds[r.id]=new s(r),ft.soundIDs.push(r.id),ft.sounds[r.id]}var o,a,r,h=null;if(o=bt+".createSound(): ",a=o+F(Ct?"notOK":"notReady"),!Ct||!ft.ok())return j(a),!1;if(i!==e&&(t={id:t,url:i}),r=m(t),r.url=Z(r.url),r.id===e&&(r.id=ft.setupOptions.idPrefix+Wt++),r.id.toString().charAt(0).match(/^[0-9]$/)&&ft._wD(o+F("badID",r.id),2),ft._wD(o+r.id+(r.url?" ("+r.url+")":""),1),Y(r.id,!0))return ft._wD(o+r.id+" exists",1),ft.sounds[r.id];if(tt(r))h=n(),ft.html5Only||ft._wD(r.id+": Using HTML5"),h._setup_html5(r);else{if(ft.html5Only)return ft._wD(r.id+": No HTML5 support for this sound, and no Flash. Exiting."),n();if(ft.html5.usingFlash&&r.url&&r.url.match(/data\:/i))return ft._wD(r.id+": data: URIs not supported via Flash. Exiting."),n();c>8&&(null===r.isMovieStar&&(r.isMovieStar=!!(r.serverURL||r.type&&r.type.match(se)||r.url&&r.url.match(he))),r.isMovieStar&&(ft._wD(o+"using MovieStar handling"),r.loops>1&&u("noNSLoop"))),r=q(r,o),h=n(),8===c?vt._createSound(r.id,r.loops||1,r.usePolicyFile):(vt._createSound(r.id,r.url,r.usePeakData,r.useWaveformData,r.useEQData,r.isMovieStar,!!r.isMovieStar&&r.bufferTime,r.loops||1,r.serverURL,r.duration||null,r.autoPlay,!0,r.autoLoad,r.usePolicyFile),r.serverURL||(h.connected=!0,r.onconnect&&r.onconnect.apply(h))),r.serverURL||!r.autoLoad&&!r.autoPlay||h.load(r)}return!r.serverURL&&r.autoPlay&&h.play(),h},this.destroySound=function(t,e){if(!Y(t))return!1;var i,n=ft.sounds[t];for(n.stop(),n._iO={},n.unload(),i=0;i<ft.soundIDs.length;i++)if(ft.soundIDs[i]===t){ft.soundIDs.splice(i,1);break}return e||n.destruct(!0),n=null,delete ft.sounds[t],!0},this.load=function(t,e){return!!Y(t)&&ft.sounds[t].load(e)},this.unload=function(t){return!!Y(t)&&ft.sounds[t].unload()},this.onPosition=function(t,e,i,n){return!!Y(t)&&ft.sounds[t].onposition(e,i,n)},this.onposition=this.onPosition,this.clearOnPosition=function(t,e,i){return!!Y(t)&&ft.sounds[t].clearOnPosition(e,i)},this.play=function(t,e){var i=null,n=e&&!(e instanceof Object);if(!Ct||!ft.ok())return j(bt+".play(): "+F(Ct?"notOK":"notReady")),!1;if(Y(t,n))n&&(e={url:e});else{if(!n)return!1;n&&(e={url:e}),e&&e.url&&(ft._wD(bt+'.play(): Attempting to create "'+t+'"',1),e.id=t,i=ft.createSound(e).play())}return null===i&&(i=ft.sounds[t].play(e)),i},this.start=this.play,this.setPosition=function(t,e){return!!Y(t)&&ft.sounds[t].setPosition(e)},this.stop=function(t){return!!Y(t)&&(ft._wD(bt+".stop("+t+")",1),ft.sounds[t].stop())},this.stopAll=function(){var t;ft._wD(bt+".stopAll()",1);for(t in ft.sounds)ft.sounds.hasOwnProperty(t)&&ft.sounds[t].stop()},this.pause=function(t){return!!Y(t)&&ft.sounds[t].pause()},this.pauseAll=function(){var t;for(t=ft.soundIDs.length-1;t>=0;t--)ft.sounds[ft.soundIDs[t]].pause()},this.resume=function(t){return!!Y(t)&&ft.sounds[t].resume()},this.resumeAll=function(){var t;for(t=ft.soundIDs.length-1;t>=0;t--)ft.sounds[ft.soundIDs[t]].resume()},this.togglePause=function(t){return!!Y(t)&&ft.sounds[t].togglePause()},this.setPan=function(t,e){return!!Y(t)&&ft.sounds[t].setPan(e)},this.setVolume=function(t,i){var n,o;{if(t===e||isNaN(t)||i!==e)return!!Y(t)&&ft.sounds[t].setVolume(i);for(n=0,o=ft.soundIDs.length;n<o;n++)ft.sounds[ft.soundIDs[n]].setVolume(t)}},this.mute=function(t){var e=0;if(t instanceof String&&(t=null),t)return!!Y(t)&&(ft._wD(bt+'.mute(): Muting "'+t+'"'),ft.sounds[t].mute());for(ft._wD(bt+".mute(): Muting all sounds"),e=ft.soundIDs.length-1;e>=0;e--)ft.sounds[ft.soundIDs[e]].mute();return ft.muted=!0,!0},this.muteAll=function(){ft.mute()},this.unmute=function(t){var e;if(t instanceof String&&(t=null),t)return!!Y(t)&&(ft._wD(bt+'.unmute(): Unmuting "'+t+'"'),ft.sounds[t].unmute());for(ft._wD(bt+".unmute(): Unmuting all sounds"),e=ft.soundIDs.length-1;e>=0;e--)ft.sounds[ft.soundIDs[e]].unmute();return ft.muted=!1,!0},this.unmuteAll=function(){ft.unmute()},this.toggleMute=function(t){return!!Y(t)&&ft.sounds[t].toggleMute()},this.getMemoryUse=function(){var t=0;return vt&&8!==c&&(t=parseInt(vt._getMemoryUse(),10)),t},this.disable=function(i){var n;if(i===e&&(i=!1),It)return!1;for(It=!0,u("shutdown",1),n=ft.soundIDs.length-1;n>=0;n--)D(ft.sounds[ft.soundIDs[n]]);return g(i),st.remove(t,"load",w),!0},this.canPlayMIME=function(t){var e;return ft.hasHTML5&&(e=et({type:t})),!e&&Ut&&(e=t&&ft.ok()?!!((c>8?t.match(se):null)||t.match(ft.mimePattern)):null),e},this.canPlayURL=function(t){var e;return ft.hasHTML5&&(e=et({url:t})),!e&&Ut&&(e=t&&ft.ok()?!!t.match(ft.filePattern):null),e},this.canPlayLink=function(t){return!(t.type===e||!t.type||!ft.canPlayMIME(t.type))||ft.canPlayURL(t.href)},this.getSoundById=function(t,e){if(!t)return null;var i=ft.sounds[t];return i||e||ft._wD(bt+'.getSoundById(): Sound "'+t+'" not found.',2),i},this.onready=function(e,i){if("function"!=typeof e)throw F("needFunction","onready");return Ct&&ft._wD(F("queue","onready")),i||(i=t),v("onready",e,i),b(),!0},this.ontimeout=function(e,i){var n="ontimeout";if("function"!=typeof e)throw F("needFunction",n);return Ct&&ft._wD(F("queue",n)),i||(i=t),v(n,e,i),b({type:n}),!0},this._writeDebug=function(t,i){var n,o;return!!ft.setupOptions.debugMode&&(!!($t&&ft.useConsole&&(i&&"object"==typeof i?console.log(t,i):Lt[i]!==e?console[Lt[i]](t):console.log(t),ft.consoleOnly))||!!(n=r("soundmanager-debug"))&&(o=_t.createElement("div"),++Gt%2==0&&(o.className="sm2-alt"),i=i===e?0:parseInt(i,10),o.appendChild(_t.createTextNode(t)),i&&(i>=2&&(o.style.fontWeight="bold"),3===i&&(o.style.color="#ff3333")),n.insertBefore(o,n.firstChild),n=null,!0))},-1!==Pt.indexOf("sm2-debug=alert")&&(this._writeDebug=function(e){t.alert(e)}),this._wD=this._writeDebug,this._debug=function(){var t,e;for(u("currentObj",1),t=0,e=ft.soundIDs.length;t<e;t++)ft.sounds[ft.soundIDs[t]]._debug()},this.reboot=function(e,i){ft.soundIDs.length&&ft._wD("Destroying "+ft.soundIDs.length+" SMSound object"+(1!==ft.soundIDs.length?"s":"")+"...");var n,o,a;for(n=ft.soundIDs.length-1;n>=0;n--)ft.sounds[ft.soundIDs[n]].destruct();if(vt)try{Yt&&(Ot=vt.innerHTML),Et=vt.parentNode.removeChild(vt)}catch(t){u("badRemove",2)}if(Ot=Et=Ut=vt=null,ft.enabled=I=Ct=Dt=Rt=Tt=Mt=It=Vt=ft.swfLoaded=!1,ft.soundIDs=[],ft.sounds={},Wt=0,mt=!1,e)kt=[];else for(n in kt)if(kt.hasOwnProperty(n))for(o=0,a=kt[n].length;o<a;o++)kt[n][o].fired=!1;return i||ft._wD(bt+": Rebooting..."),ft.html5={usingFlash:null},ft.flash={},ft.html5Only=!1,ft.ignoreFlash=!1,t.setTimeout(function(){i||ft.beginDelayedInit()},20),ft},this.reset=function(){return u("reset"),ft.reboot(!0,!0)},this.getMoviePercent=function(){return vt&&"PercentLoaded"in vt?vt.PercentLoaded():null},this.beginDelayedInit=function(){Bt=!0,M(),setTimeout(function(){return!Rt&&(G(),T(),Rt=!0,!0)},20),S()},this.destruct=function(){ft._wD(bt+".destruct()"),ft.disable(!0)},s=function(t){var i,n,o,a,s,r,h,l,p,g,f=this,y=!1,v=[],b=0,w=null;p={duration:null,time:null},this.id=t.id,this.sID=this.id,this.url=t.url,this.options=m(t),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,g=!this.url,this.id3={},this._debug=function(){ft._wD(f.id+": Merged options:",f.options)},this.load=function(t){var i;if(t!==e?f._iO=m(t,f.options):(t=f.options,f._iO=t,w&&w!==f.url&&(u("manURL"),f._iO.url=f.url,f.url=null)),f._iO.url||(f._iO.url=f.url),f._iO.url=Z(f._iO.url),f.instanceOptions=f._iO,i=f._iO,ft._wD(f.id+": load ("+i.url+")"),!i.url&&!f.url)return ft._wD(f.id+": load(): url is unassigned. Exiting.",2),f;if(f.isHTML5||8!==c||f.url||i.autoPlay||ft._wD(f.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),i.url===f.url&&0!==f.readyState&&2!==f.readyState)return u("onURL",1),3===f.readyState&&i.onload&&gt(f,function(){i.onload.apply(f,[!!f.duration])}),f;if(f.loaded=!1,f.readyState=1,f.playState=0,f.id3={},tt(i))f._setup_html5(i)._called_load?ft._wD(f.id+": Ignoring request to load again"):(f._html5_canplay=!1,f.url!==i.url&&(ft._wD(u("manURL")+": "+i.url),f._a.src=i.url,f.setPosition(0)),f._a.autobuffer="auto",f._a.preload="auto",f._a._called_load=!0);else{if(ft.html5Only)return ft._wD(f.id+": No flash support. Exiting."),f;if(f._iO.url&&f._iO.url.match(/data\:/i))return ft._wD(f.id+": data: URIs not supported via Flash. Exiting."),f;try{f.isHTML5=!1,f._iO=q(W(i)),f._iO.autoPlay&&(f._iO.position||f._iO.from)&&(ft._wD(f.id+": Disabling autoPlay because of non-zero offset case"),f._iO.autoPlay=!1),i=f._iO,8===c?vt._load(f.id,i.url,i.stream,i.autoPlay,i.usePolicyFile):vt._load(f.id,i.url,!!i.stream,!!i.autoPlay,i.loops||1,!!i.autoLoad,i.usePolicyFile)}catch(t){u("smError",2),d("onload",!1),L({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return f.url=i.url,f},this.unload=function(){return 0!==f.readyState&&(ft._wD(f.id+": unload()"),f.isHTML5?(a(),f._a&&(f._a.pause(),w=nt(f._a))):8===c?vt._unload(f.id,"about:blank"):vt._unload(f.id),i()),f},this.destruct=function(t){ft._wD(f.id+": Destruct"),f.isHTML5?(a(),f._a&&(f._a.pause(),nt(f._a),Vt||o(),f._a._s=null,f._a=null)):(f._iO.onfailure=null,vt._destroySound(f.id)),t||ft.destroySound(f.id,!0)},this.play=function(t,i){var n,o,a,h,p,d,u=!0,v=null;if(n=f.id+": play(): ",i=i===e||i,t||(t={}),f.url&&(f._iO.url=f.url),f._iO=m(f._iO,f.options),f._iO=m(t,f._iO),f._iO.url=Z(f._iO.url),f.instanceOptions=f._iO,!f.isHTML5&&f._iO.serverURL&&!f.connected)return f.getAutoPlay()||(ft._wD(n+" Netstream not connected yet - setting autoPlay"),f.setAutoPlay(!0)),f;if(tt(f._iO)&&(f._setup_html5(f._iO),s()),1!==f.playState||f.paused||(f._iO.multiShot?ft._wD(n+"Already playing (multi-shot)",1):(ft._wD(n+"Already playing (one-shot)",1),f.isHTML5&&f.setPosition(f._iO.position),v=f)),null!==v)return v;if(t.url&&t.url!==f.url&&(f.readyState||f.isHTML5||8!==c||!g?f.load(f._iO):g=!1),f.loaded?ft._wD(n.substr(0,n.lastIndexOf(":"))):0===f.readyState?(ft._wD(n+"Attempting to load"),f.isHTML5||ft.html5Only?f.isHTML5?f.load(f._iO):(ft._wD(n+"Unsupported type. Exiting."),v=f):(f._iO.autoPlay=!0,f.load(f._iO)),f.instanceOptions=f._iO):2===f.readyState?(ft._wD(n+"Could not load - exiting",2),v=f):ft._wD(n+"Loading - attempting to play..."),null!==v)return v;if(!f.isHTML5&&9===c&&f.position>0&&f.position===f.duration&&(ft._wD(n+"Sound at end, resetting to position: 0"),t.position=0),f.paused&&f.position>=0&&(!f._iO.serverURL||f.position>0))ft._wD(n+"Resuming from paused state",1),f.resume();else{if(f._iO=m(t,f._iO),(!f.isHTML5&&null!==f._iO.position&&f._iO.position>0||null!==f._iO.from&&f._iO.from>0||null!==f._iO.to)&&0===f.instanceCount&&0===f.playState&&!f._iO.serverURL){if(a=function(){f._iO=m(t,f._iO),f.play(f._iO)},f.isHTML5&&!f._html5_canplay?(ft._wD(n+"Beginning load for non-zero offset case"),f.load({_oncanplay:a}),v=!1):f.isHTML5||f.loaded||f.readyState&&2===f.readyState||(ft._wD(n+"Preloading for non-zero offset case"),f.load({onload:a}),v=!1),null!==v)return v;f._iO=l()}(!f.instanceCount||f._iO.multiShotEvents||f.isHTML5&&f._iO.multiShot&&!Vt||!f.isHTML5&&c>8&&!f.getAutoPlay())&&f.instanceCount++,f._iO.onposition&&0===f.playState&&r(f),f.playState=1,f.paused=!1,f.position=f._iO.position===e||isNaN(f._iO.position)?0:f._iO.position,f.isHTML5||(f._iO=q(W(f._iO))),f._iO.onplay&&i&&(f._iO.onplay.apply(f),y=!0),f.setVolume(f._iO.volume,!0),f.setPan(f._iO.pan,!0),f.isHTML5?f.instanceCount<2?(s(),o=f._setup_html5(),f.setPosition(f._iO.position),o.play()):(ft._wD(f.id+": Cloning Audio() for instance #"+f.instanceCount+"..."),h=new Audio(f._iO.url),p=function(){st.remove(h,"ended",p),f._onfinish(f),nt(h),h=null},d=function(){st.remove(h,"canplay",d);try{h.currentTime=f._iO.position/1e3}catch(t){j(f.id+": multiShot play() failed to apply position of "+f._iO.position/1e3)}h.play()},st.add(h,"ended",p),f._iO.volume!==e&&(h.volume=Math.max(0,Math.min(1,f._iO.volume/100))),f.muted&&(h.muted=!0),f._iO.position?st.add(h,"canplay",d):h.play()):(u=vt._start(f.id,f._iO.loops||1,9===c?f.position:f.position/1e3,f._iO.multiShot||!1),9!==c||u||(ft._wD(n+"No sound hardware, or 32-sound ceiling hit",2),f._iO.onplayerror&&f._iO.onplayerror.apply(f)))}return f},this.start=this.play,this.stop=function(t){var e,i=f._iO;return 1===f.playState&&(ft._wD(f.id+": stop()"),f._onbufferchange(0),f._resetOnPosition(0),f.paused=!1,f.isHTML5||(f.playState=0),h(),i.to&&f.clearOnPosition(i.to),f.isHTML5?f._a&&(e=f.position,f.setPosition(0),f.position=e,f._a.pause(),f.playState=0,f._onTimer(),a()):(vt._stop(f.id,t),i.serverURL&&f.unload()),f.instanceCount=0,f._iO={},i.onstop&&i.onstop.apply(f)),f},this.setAutoPlay=function(t){ft._wD(f.id+": Autoplay turned "+(t?"on":"off")),f._iO.autoPlay=t,f.isHTML5||(vt._setAutoPlay(f.id,t),t&&(f.instanceCount||1!==f.readyState||(f.instanceCount++,ft._wD(f.id+": Incremented instance count to "+f.instanceCount))))},this.getAutoPlay=function(){return f._iO.autoPlay},this.setPosition=function(t){t===e&&(t=0);var i,n,o=f.isHTML5?Math.max(t,0):Math.min(f.duration||f._iO.duration,Math.max(t,0));if(f.position=o,n=f.position/1e3,f._resetOnPosition(f.position),f._iO.position=o,f.isHTML5){if(f._a){if(f._html5_canplay){if(f._a.currentTime!==n){ft._wD(f.id+": setPosition("+n+")");try{f._a.currentTime=n,(0===f.playState||f.paused)&&f._a.pause()}catch(t){ft._wD(f.id+": setPosition("+n+") failed: "+t.message,2)}}}else if(n)return ft._wD(f.id+": setPosition("+n+"): Cannot seek yet, sound not ready",2),f;f.paused&&f._onTimer(!0)}}else i=9===c?f.position:n,f.readyState&&2!==f.readyState&&vt._setPosition(f.id,i,f.paused||!f.playState,f._iO.multiShot);return f},this.pause=function(t){return f.paused||0===f.playState&&1!==f.readyState?f:(ft._wD(f.id+": pause()"),f.paused=!0,f.isHTML5?(f._setup_html5().pause(),a()):(t||t===e)&&vt._pause(f.id,f._iO.multiShot),f._iO.onpause&&f._iO.onpause.apply(f),f)},this.resume=function(){var t=f._iO;return f.paused?(ft._wD(f.id+": resume()"),f.paused=!1,f.playState=1,f.isHTML5?(f._setup_html5().play(),s()):(t.isMovieStar&&!t.serverURL&&f.setPosition(f.position),vt._pause(f.id,t.multiShot)),!y&&t.onplay?(t.onplay.apply(f),y=!0):t.onresume&&t.onresume.apply(f),f):f},this.togglePause=function(){return ft._wD(f.id+": togglePause()"),0===f.playState?(f.play({position:9!==c||f.isHTML5?f.position/1e3:f.position}),f):(f.paused?f.resume():f.pause(),f)},this.setPan=function(t,i){return t===e&&(t=0),i===e&&(i=!1),f.isHTML5||vt._setPan(f.id,t),f._iO.pan=t,i||(f.pan=t,f.options.pan=t),f},this.setVolume=function(t,i){return t===e&&(t=100),i===e&&(i=!1),f.isHTML5?f._a&&(ft.muted&&!f.muted&&(f.muted=!0,f._a.muted=!0),f._a.volume=Math.max(0,Math.min(1,t/100))):vt._setVolume(f.id,ft.muted&&!f.muted||f.muted?0:t),f._iO.volume=t,i||(f.volume=t,f.options.volume=t),f},this.mute=function(){return f.muted=!0,f.isHTML5?f._a&&(f._a.muted=!0):vt._setVolume(f.id,0),f},this.unmute=function(){f.muted=!1;var t=f._iO.volume!==e;return f.isHTML5?f._a&&(f._a.muted=!1):vt._setVolume(f.id,t?f._iO.volume:f.options.volume),f},this.toggleMute=function(){return f.muted?f.unmute():f.mute()},this.onPosition=function(t,i,n){return v.push({position:parseInt(t,10),method:i,scope:n!==e?n:f,fired:!1}),f},this.onposition=this.onPosition,this.clearOnPosition=function(t,e){var i;if(t=parseInt(t,10),isNaN(t))return!1;for(i=0;i<v.length;i++)t===v[i].position&&(e&&e!==v[i].method||(v[i].fired&&b--,v.splice(i,1)))},this._processOnPosition=function(){var t,e,i=v.length;if(!i||!f.playState||b>=i)return!1;for(t=i-1;t>=0;t--)!(e=v[t]).fired&&f.position>=e.position&&(e.fired=!0,b++,e.method.apply(e.scope,[e.position]),i=v.length);return!0},this._resetOnPosition=function(t){var e,i,n=v.length;if(!n)return!1;for(e=n-1;e>=0;e--)(i=v[e]).fired&&t<=i.position&&(i.fired=!1,b--);return!0},l=function(){var t,e,i=f._iO,n=i.from,o=i.to;return e=function(){ft._wD(f.id+': "To" time of '+o+" reached."),f.clearOnPosition(o,e),f.stop()},t=function(){ft._wD(f.id+': Playing "from" '+n),null===o||isNaN(o)||f.onPosition(o,e)},null===n||isNaN(n)||(i.position=n,i.multiShot=!1,t()),i},r=function(){var t,e=f._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&f.onPosition(parseInt(t,10),e[t])},h=function(){var t,e=f._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&f.clearOnPosition(parseInt(t,10))},s=function(){f.isHTML5&&z(f)},a=function(){f.isHTML5&&K(f)},(i=function(t){t||(v=[],b=0),y=!1,f._hasTimer=null,f._a=null,f._html5_canplay=!1,f.bytesLoaded=null,f.bytesTotal=null,f.duration=f._iO&&f._iO.duration?f._iO.duration:null,f.durationEstimate=null,f.buffered=[],f.eqData=[],f.eqData.left=[],f.eqData.right=[],f.failures=0,f.isBuffering=!1,f.instanceOptions={},f.instanceCount=0,f.loaded=!1,f.metadata={},f.readyState=0,f.muted=!1,f.paused=!1,f.peakData={left:0,right:0},f.waveformData={left:[],right:[]},f.playState=0,f.position=null,f.id3={}})(),this._onTimer=function(t){var e,i,n=!1,o={};if(f._hasTimer||t)return f._a&&(t||(f.playState>0||1===f.readyState)&&!f.paused)&&((e=f._get_html5_duration())!==p.duration&&(p.duration=e,f.duration=e,n=!0),f.durationEstimate=f.duration,(i=1e3*f._a.currentTime||0)!==p.time&&(p.time=i,n=!0),(n||t)&&f._whileplaying(i,o,o,o,o)),n},this._get_html5_duration=function(){var t=f._iO,e=f._a&&f._a.duration?1e3*f._a.duration:t&&t.duration?t.duration:null;return e&&!isNaN(e)&&e!==1/0?e:null},this._apply_loop=function(t,e){!t.loop&&e>1&&ft._wD("Note: Native HTML5 looping is infinite.",1),t.loop=e>1?"loop":""},this._setup_html5=function(t){var e,o=m(f._iO,t),a=Vt?yt:f._a,s=decodeURI(o.url);if(Vt?s===decodeURI(rt)&&(e=!0):s===decodeURI(w)&&(e=!0),a){if(a._s)if(Vt)a._s&&a._s.playState&&!e&&a._s.stop();else if(!Vt&&s===decodeURI(w))return f._apply_loop(a,o.loops),a;e||(w&&i(!1),a.src=o.url,f.url=o.url,w=o.url,rt=o.url,a._called_load=!1)}else o.autoLoad||o.autoPlay?(f._a=new Audio(o.url),f._a.load()):f._a=Qt&&opera.version()<10?new Audio(null):new Audio,(a=f._a)._called_load=!1,Vt&&(yt=a);return f.isHTML5=!0,f._a=a,a._s=f,n(),f._apply_loop(a,o.loops),o.autoLoad||o.autoPlay?f.load():(a.autobuffer=!1,a.preload="auto"),a},n=function(){if(f._a._added_events)return!1;var t;f._a._added_events=!0;for(t in ct)ct.hasOwnProperty(t)&&function(t,e,i){f._a&&f._a.addEventListener(t,e,i||!1)}(t,ct[t]);return!0},o=function(){var t;ft._wD(f.id+": Removing event listeners"),f._a._added_events=!1;for(t in ct)ct.hasOwnProperty(t)&&function(t,e,i){f._a&&f._a.removeEventListener(t,e,i||!1)}(t,ct[t])},this._onload=function(t){var e,i=!!t||!f.isHTML5&&8===c&&f.duration;return e=f.id+": ",ft._wD(e+(i?"onload()":"Failed to load / invalid sound?"+(f.duration?" -":" Zero-length duration reported.")+" ("+f.url+")"),i?1:2),i||f.isHTML5||(!0===ft.sandbox.noRemote&&ft._wD(e+F("noNet"),1),!0===ft.sandbox.noLocal&&ft._wD(e+F("noLocal"),1)),f.loaded=i,f.readyState=i?3:2,f._onbufferchange(0),f._iO.onload&&gt(f,function(){f._iO.onload.apply(f,[i])}),!0},this._onbufferchange=function(t){return 0!==f.playState&&(!(t&&f.isBuffering||!t&&!f.isBuffering)&&(f.isBuffering=1===t,f._iO.onbufferchange&&(ft._wD(f.id+": Buffer state change: "+t),f._iO.onbufferchange.apply(f,[t])),!0))},this._onsuspend=function(){return f._iO.onsuspend&&(ft._wD(f.id+": Playback suspended"),f._iO.onsuspend.apply(f)),!0},this._onfailure=function(t,e,i){f.failures++,ft._wD(f.id+": Failure ("+f.failures+"): "+t),f._iO.onfailure&&1===f.failures?f._iO.onfailure(t,e,i):ft._wD(f.id+": Ignoring failure")},this._onwarning=function(t,e,i){f._iO.onwarning&&f._iO.onwarning(t,e,i)},this._onfinish=function(){var t=f._iO.onfinish;f._onbufferchange(0),f._resetOnPosition(0),f.instanceCount&&(f.instanceCount--,f.instanceCount||(h(),f.playState=0,f.paused=!1,f.instanceCount=0,f.instanceOptions={},f._iO={},a(),f.isHTML5&&(f.position=0)),f.instanceCount&&!f._iO.multiShotEvents||t&&(ft._wD(f.id+": onfinish()"),gt(f,function(){t.apply(f)})))},this._whileloading=function(t,e,i,n){var o=f._iO;f.bytesLoaded=t,f.bytesTotal=e,f.duration=Math.floor(i),f.bufferLength=n,f.isHTML5||o.isMovieStar?f.durationEstimate=f.duration:o.duration?f.durationEstimate=f.duration>o.duration?f.duration:o.duration:f.durationEstimate=parseInt(f.bytesTotal/f.bytesLoaded*f.duration,10),f.isHTML5||(f.buffered=[{start:0,end:f.duration}]),(3!==f.readyState||f.isHTML5)&&o.whileloading&&o.whileloading.apply(f)},this._whileplaying=function(t,i,n,o,a){var s,r=f._iO;return!isNaN(t)&&null!==t&&(f.position=Math.max(0,t),f._processOnPosition(),!f.isHTML5&&c>8&&(r.usePeakData&&i!==e&&i&&(f.peakData={left:i.leftPeak,right:i.rightPeak}),r.useWaveformData&&n!==e&&n&&(f.waveformData={left:n.split(","),right:o.split(",")}),r.useEQData&&a!==e&&a&&a.leftEQ&&(s=a.leftEQ.split(","),f.eqData=s,f.eqData.left=s,a.rightEQ!==e&&a.rightEQ&&(f.eqData.right=a.rightEQ.split(",")))),1===f.playState&&(f.isHTML5||8!==c||f.position||!f.isBuffering||f._onbufferchange(0),r.whileplaying&&r.whileplaying.apply(f)),!0)},this._oncaptiondata=function(t){ft._wD(f.id+": Caption data received."),f.captiondata=t,f._iO.oncaptiondata&&f._iO.oncaptiondata.apply(f,[t])},this._onmetadata=function(t,e){ft._wD(f.id+": Metadata received.");var i,n,o={};for(i=0,n=t.length;i<n;i++)o[t[i]]=e[i];f.metadata=o,f._iO.onmetadata&&f._iO.onmetadata.call(f,f.metadata)},this._onid3=function(t,e){ft._wD(f.id+": ID3 data received.");var i,n,o=[];for(i=0,n=t.length;i<n;i++)o[t[i]]=e[i];f.id3=m(f.id3,o),f._iO.onid3&&f._iO.onid3.apply(f)},this._onconnect=function(t){t=1===t,ft._wD(f.id+": "+(t?"Connected.":"Failed to connect? - "+f.url),t?1:2),f.connected=t,t&&(f.failures=0,Y(f.id)&&(f.getAutoPlay()?f.play(e,f.getAutoPlay()):f._iO.autoLoad&&f.load()),f._iO.onconnect&&f._iO.onconnect.apply(f,[t]))},this._ondataerror=function(t){f.playState>0&&(ft._wD(f.id+": Data error: "+t),f._iO.ondataerror&&f._iO.ondataerror.apply(f))},this._debug()},B=function(){return _t.body||_t.getElementsByTagName("div")[0]},r=function(t){return _t.getElementById(t)},m=function(t,i){var n,o,a=t||{};n=i===e?ft.defaultOptions:i;for(o in n)n.hasOwnProperty(o)&&a[o]===e&&("object"!=typeof n[o]||null===n[o]?a[o]=n[o]:a[o]=m(a[o],n[o]));return a},gt=function(e,i){e.isHTML5||8!==c?i():t.setTimeout(i,0)},y={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},f=function(t,i){var n,o=!0,a=i!==e,s=ft.setupOptions,r=y;if(t===e){o=[];for(n in s)s.hasOwnProperty(n)&&o.push(n);for(n in r)r.hasOwnProperty(n)&&("object"==typeof ft[n]?o.push(n+": {...}"):ft[n]instanceof Function?o.push(n+": function() {...}"):o.push(n));return ft._wD(F("setup",o.join(", "))),!1}for(n in t)if(t.hasOwnProperty(n))if("object"!=typeof t[n]||null===t[n]||t[n]instanceof Array||t[n]instanceof RegExp)a&&r[i]!==e?ft[i][n]=t[n]:s[n]!==e?(ft.setupOptions[n]=t[n],ft[n]=t[n]):r[n]===e?(j(F(ft[n]===e?"setupUndef":"setupError",n),2),o=!1):ft[n]instanceof Function?ft[n].apply(ft,t[n]instanceof Array?t[n]:[t[n]]):ft[n]=t[n];else{if(r[n]!==e)return f(t[n],n);j(F(ft[n]===e?"setupUndef":"setupError",n),2),o=!1}return o},st=function(){function e(t){var e=Xt.call(t),i=e.length;return n?(e[1]="on"+e[1],i>3&&e.pop()):3===i&&e.push(!1),e}function i(t,e){var i=t.shift(),a=[o[e]];n?i[a](t[0],t[1]):i[a].apply(i,t)}var n=t.attachEvent,o={add:n?"attachEvent":"addEventListener",remove:n?"detachEvent":"removeEventListener"};return{add:function(){i(e(arguments),"add")},remove:function(){i(e(arguments),"remove")}}}(),ct={abort:a(function(){ft._wD(this._s.id+": abort")}),canplay:a(function(){var t,i=this._s;if(i._html5_canplay)return!0;if(i._html5_canplay=!0,ft._wD(i.id+": canplay"),i._onbufferchange(0),t=i._iO.position===e||isNaN(i._iO.position)?null:i._iO.position/1e3,this.currentTime!==t){ft._wD(i.id+": canplay: Setting position to "+t);try{this.currentTime=t}catch(e){ft._wD(i.id+": canplay: Setting position of "+t+" failed: "+e.message,2)}}i._iO._oncanplay&&i._iO._oncanplay()}),canplaythrough:a(function(){var t=this._s;t.loaded||(t._onbufferchange(0),t._whileloading(t.bytesLoaded,t.bytesTotal,t._get_html5_duration()),t._onload(!0))}),durationchange:a(function(){var t,e=this._s;t=e._get_html5_duration(),isNaN(t)||t===e.duration||(ft._wD(this._s.id+": durationchange ("+t+")"+(e.duration?", previously "+e.duration:"")),e.durationEstimate=e.duration=t)}),ended:a(function(){var t=this._s;ft._wD(t.id+": ended"),t._onfinish()}),error:a(function(){ft._wD(this._s.id+": HTML5 error, code "+this.error.code),this._s._onload(!1)}),loadeddata:a(function(){var t=this._s;ft._wD(t.id+": loadeddata"),t._loaded||Kt||(t.duration=t._get_html5_duration())}),loadedmetadata:a(function(){ft._wD(this._s.id+": loadedmetadata")}),loadstart:a(function(){ft._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:a(function(){this._s._onbufferchange(0)}),playing:a(function(){ft._wD(this._s.id+": playing "+String.fromCharCode(9835)),this._s._onbufferchange(0)}),progress:a(function(t){var e,i,n,o=this._s,a=0,s="progress"===t.type,r=t.target.buffered,h=t.loaded||0,l=t.total||1;if(o.buffered=[],r&&r.length){for(e=0,i=r.length;e<i;e++)o.buffered.push({start:1e3*r.start(e),end:1e3*r.end(e)});if(a=1e3*(r.end(0)-r.start(0)),h=Math.min(1,a/(1e3*t.target.duration)),s&&r.length>1){for(n=[],i=r.length,e=0;e<i;e++)n.push(1e3*t.target.buffered.start(e)+"-"+1e3*t.target.buffered.end(e));ft._wD(this._s.id+": progress, timeRanges: "+n.join(", "))}s&&!isNaN(h)&&ft._wD(this._s.id+": progress, "+Math.floor(100*h)+"% loaded")}isNaN(h)||(o._whileloading(h,l,o._get_html5_duration()),h&&l&&h===l&&ct.canplaythrough.call(this,t))}),ratechange:a(function(){ft._wD(this._s.id+": ratechange")}),suspend:a(function(t){var e=this._s;ft._wD(this._s.id+": suspend"),ct.progress.call(this,t),e._onsuspend()}),stalled:a(function(){ft._wD(this._s.id+": stalled")}),timeupdate:a(function(){this._s._onTimer()}),waiting:a(function(){var t=this._s;ft._wD(this._s.id+": waiting"),t._onbufferchange(1)})},tt=function(t){return!(!t||!(t.type||t.url||t.serverURL))&&(!(t.serverURL||t.type&&o(t.type))&&(t.type?et({type:t.type}):et({url:t.url})||ft.html5Only||t.url.match(/data\:/i)))},nt=function(t){var i;return t&&(i=Kt?"about:blank":ft.html5.canPlayType("audio/wav")?"data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==":"about:blank",t.src=i,t._called_unload!==e&&(t._called_load=!1)),Vt&&(rt=null),i},et=function(t){if(!ft.useHTML5Audio||!ft.hasHTML5)return!1;var i,n,a,s,r=t.url||null,h=t.type||null,l=ft.audioFormats;if(h&&ft.html5[h]!==e)return ft.html5[h]&&!o(h);if(!it){it=[];for(s in l)l.hasOwnProperty(s)&&(it.push(s),l[s].related&&(it=it.concat(l[s].related)));it=new RegExp("\\.("+it.join("|")+")(\\?.*)?$","i")}return(a=r?r.toLowerCase().match(it):null)&&a.length?a=a[1]:h?a=(-1!==(n=h.indexOf(";"))?h.substr(0,n):h).substr(6):i=!1,a&&ft.html5[a]!==e?i=ft.html5[a]&&!o(a):(h="audio/"+a,i=ft.html5.canPlayType({type:h}),ft.html5[a]=i,i=i&&ft.html5[h]&&!o(h)),i},at=function(){function t(t){var e,i,n=!1,o=!1;if(!s||"function"!=typeof s.canPlayType)return n;if(t instanceof Array){for(a=0,i=t.length;a<i;a++)(ft.html5[t[a]]||s.canPlayType(t[a]).match(ft.html5Test))&&(o=!0,ft.html5[t[a]]=!0,ft.flash[t[a]]=!!t[a].match(ne));n=o}else n=!(!(e=!(!s||"function"!=typeof s.canPlayType)&&s.canPlayType(t))||!e.match(ft.html5Test));return n}if(!ft.useHTML5Audio||!ft.hasHTML5)return ft.html5.usingFlash=!0,Ut=!0,!1;var i,n,o,a,s=Audio!==e?Qt&&opera.version()<10?new Audio(null):new Audio:null,r={};o=ft.audioFormats;for(i in o)if(o.hasOwnProperty(i)&&(n="audio/"+i,r[i]=t(o[i].type),r[n]=r[i],i.match(ne)?(ft.flash[i]=!0,ft.flash[n]=!0):(ft.flash[i]=!1,ft.flash[n]=!1),o[i]&&o[i].related))for(a=o[i].related.length-1;a>=0;a--)r["audio/"+o[i].related[a]]=r[i],ft.html5[o[i].related[a]]=r[i],ft.flash[o[i].related[a]]=r[i];return r.canPlayType=s?t:null,ft.html5=m(ft.html5,r),ft.html5.usingFlash=$(),Ut=ft.html5.usingFlash,!0},A={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:bt+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:wt+"Verify that %s is a valid path.",tryDebug:"Try "+bt+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:wt+"Non-HTTP page ("+_t.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:wt+"Special case: Waiting for SWF to load with window focus...",waitForever:wt+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:wt+"Waiting for 100% SWF load...",needFunction:wt+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:wt+"_debug(): Current sound objects",waitOnload:wt+"Waiting for window.onload()",docLoaded:wt+"Document already loaded",onload:wt+"initComplete(): calling soundManager.onload()",onloadOK:bt+".onload() complete",didInit:wt+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:wt+"Failed to remove Flash node.",shutdown:bt+".disable(): Shutting down",queue:wt+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+X.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:wt+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:bt+".load(): current URL already assigned.",badFV:bt+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:wt+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:wt+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:bt+".setup(): allowed parameters: %s",setupError:bt+'.setup(): "%s" cannot be assigned with this method.',setupUndef:bt+'.setup(): Could not find option "%s"',setupLate:bt+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:wt+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:bt+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device.",ignoreMobile:"Ignoring mobile restrictions for this device."},F=function(){var t,e,i,n,o;if(t=Xt.call(arguments),n=t.shift(),(o=A&&A[n]?A[n]:"")&&t&&t.length)for(e=0,i=t.length;e<i;e++)o=o.replace("%s",t[e]);return o},W=function(t){return 8===c&&t.loops>1&&t.stream&&(u("as2loop"),t.stream=!1),t},q=function(t,e){return t&&!t.usePolicyFile&&(t.onid3||t.usePeakData||t.useWaveformData||t.useEQData)&&(ft._wD((e||"")+F("policy")),t.usePolicyFile=!0),t},j=function(t){$t&&console.warn!==e?console.warn(t):ft._wD(t)},h=function(){return!1},D=function(t){var e;for(e in t)t.hasOwnProperty(e)&&"function"==typeof t[e]&&(t[e]=h);e=null},R=function(t){t===e&&(t=!1),(It||t)&&ft.disable(t)},H=function(t){var e;if(t)if(t.match(/\.swf(\?.*)?$/i)){if(t.substr(t.toLowerCase().lastIndexOf(".swf?")+4))return t}else t.lastIndexOf("/")!==t.length-1&&(t+="/");return e=(t&&-1!==t.lastIndexOf("/")?t.substr(0,t.lastIndexOf("/")+1):"./")+ft.movieURL,ft.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},_=function(){8!==(c=parseInt(ft.flashVersion,10))&&9!==c&&(ft._wD(F("badFV",c,8)),ft.flashVersion=c=8);var t=ft.debugMode||ft.debugFlash?"_debug.swf":".swf";ft.useHTML5Audio&&!ft.html5Only&&ft.audioFormats.mp4.required&&c<9&&(ft._wD(F("needfl9")),ft.flashVersion=c=9),ft.version=ft.versionNumber+(ft.html5Only?" (HTML5-only mode)":9===c?" (AS3/Flash 9)":" (AS2/Flash 8)"),c>8?(ft.defaultOptions=m(ft.defaultOptions,ft.flash9Options),ft.features.buffering=!0,ft.defaultOptions=m(ft.defaultOptions,ft.movieStarOptions),ft.filePatterns.flash9=new RegExp("\\.(mp3|"+re.join("|")+")(\\?.*)?$","i"),ft.features.movieStar=!0):ft.features.movieStar=!1,ft.filePattern=ft.filePatterns[8!==c?"flash9":"flash8"],ft.movieURL=(8===c?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",t),ft.features.peakData=ft.features.waveformData=ft.features.eqData=c>8},E=function(t,e){if(!vt)return!1;vt._setPolling(t,e)},O=function(){if(ft.debugURLParam.test(Pt)&&(ft.setupOptions.debugMode=ft.debugMode=!0),r(ft.debugID))return!1;var t,e,i,n,o;if(ft.debugMode&&!r(ft.debugID)&&(!$t||!ft.useConsole||!ft.consoleOnly)){(t=_t.createElement("div")).id=ft.debugID+"-toggle",n={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},t.appendChild(_t.createTextNode("-")),t.onclick=V,t.title="Toggle SM2 debug console",xt.match(/msie 6/i)&&(t.style.position="absolute",t.style.cursor="hand");for(o in n)n.hasOwnProperty(o)&&(t.style[o]=n[o]);if(e=_t.createElement("div"),e.id=ft.debugID,e.style.display=ft.debugMode?"block":"none",ft.debugMode&&!r(t.id)){try{(i=B()).appendChild(t)}catch(t){throw new Error(F("domError")+" \n"+t.toString())}i.appendChild(e)}}i=null},Y=this.getSoundById,u=function(t,e){return t?ft._wD(F(t),e):""},V=function(){var t=r(ft.debugID),e=r(ft.debugID+"-toggle");if(!t)return!1;At?(e.innerHTML="+",t.style.display="none"):(e.innerHTML="-",t.style.display="block"),At=!At},d=function(i,n,o){if(t.sm2Debugger!==e)try{sm2Debugger.handleEvent(i,n,o)}catch(t){return!1}return!0},U=function(){var t=[];return ft.debugMode&&t.push(X.sm2Debug),ft.debugFlash&&t.push(X.flashDebug),ft.useHighPerformance&&t.push(X.highPerf),t.join(" ")},N=function(){var t=F("fbHandler"),e=ft.getMoviePercent(),i=X,n={type:"FLASHBLOCK"};if(ft.html5Only)return!1;ft.ok()?(ft.didFlashBlock&&ft._wD(t+": Unblocked"),ft.oMC&&(ft.oMC.className=[U(),i.swfDefault,i.swfLoaded+(ft.didFlashBlock?" "+i.swfUnblocked:"")].join(" "))):(Ut&&(ft.oMC.className=U()+" "+i.swfDefault+" "+(null===e?i.swfTimedout:i.swfError),ft._wD(t+": "+F("fbTimeout")+(e?" ("+F("fbLoaded")+")":""))),ft.didFlashBlock=!0,b({type:"ontimeout",ignoreInit:!0,error:n}),L(n))},v=function(t,i,n){kt[t]===e&&(kt[t]=[]),kt[t].push({method:i,scope:n||null,fired:!1})},b=function(t){if(t||(t={type:ft.ok()?"onready":"ontimeout"}),!Ct&&t&&!t.ignoreInit)return!1;if("ontimeout"===t.type&&(ft.ok()||It&&!t.ignoreInit))return!1;var e,i,n={success:t&&t.ignoreInit?ft.ok():!It},o=t&&t.type?kt[t.type]||[]:[],a=[],s=[n],r=Ut&&!ft.ok();for(t.error&&(s[0].error=t.error),e=0,i=o.length;e<i;e++)!0!==o[e].fired&&a.push(o[e]);if(a.length)for(e=0,i=a.length;e<i;e++)a[e].scope?a[e].method.apply(a[e].scope,s):a[e].method.apply(this,s),r||(a[e].fired=!0);return!0},w=function(){t.setTimeout(function(){ft.useFlashBlock&&N(),b(),"function"==typeof ft.onload&&(u("onload",1),ft.onload.apply(t),u("onloadOK",1)),ft.waitForWindowLoad&&st.add(t,"load",w)},1)},lt=function(){if(ht!==e)return ht;var i,n,o,a=!1,s=navigator,r=s.plugins,h=t.ActiveXObject;if(r&&r.length)n="application/x-shockwave-flash",(o=s.mimeTypes)&&o[n]&&o[n].enabledPlugin&&o[n].enabledPlugin.description&&(a=!0);else if(h!==e&&!xt.match(/MSAppHost/i)){try{i=new h("ShockwaveFlash.ShockwaveFlash")}catch(t){i=null}a=!!i,i=null}return ht=a,a},$=function(){var t,e,i=ft.audioFormats;if(qt&&!!xt.match(/os (1|2|3_0|3_1)\s/i)?(ft.hasHTML5=!1,ft.html5Only=!0,ft.oMC&&(ft.oMC.style.display="none")):ft.useHTML5Audio&&(ft.html5&&ft.html5.canPlayType||(ft._wD("SoundManager: No HTML5 Audio() support detected."),ft.hasHTML5=!1),Jt&&ft._wD(wt+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(ht?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),ft.useHTML5Audio&&ft.hasHTML5){J=!0;for(e in i)i.hasOwnProperty(e)&&i[e].required&&(ft.html5.canPlayType(i[e].type)?ft.preferFlash&&(ft.flash[e]||ft.flash[i[e].type])&&(t=!0):(J=!1,t=!0))}return ft.ignoreFlash&&(t=!1,J=!0),ft.html5Only=ft.hasHTML5&&ft.useHTML5Audio&&!t,!ft.html5Only},Z=function(t){var e,i,n,o=0;if(t instanceof Array){for(e=0,i=t.length;e<i;e++)if(t[e]instanceof Object){if(ft.canPlayMIME(t[e].type)){o=e;break}}else if(ft.canPlayURL(t[e])){o=e;break}t[o].url&&(t[o]=t[o].url),n=t[o]}else n=t;return n},z=function(t){t._hasTimer||(t._hasTimer=!0,!Zt&&ft.html5PollingInterval&&(null===Ft&&0===Ht&&(Ft=setInterval(Q,ft.html5PollingInterval)),Ht++))},K=function(t){t._hasTimer&&(t._hasTimer=!1,!Zt&&ft.html5PollingInterval&&Ht--)},Q=function(){var t;if(null!==Ft&&!Ht)return clearInterval(Ft),Ft=null,!1;for(t=ft.soundIDs.length-1;t>=0;t--)ft.sounds[ft.soundIDs[t]].isHTML5&&ft.sounds[ft.soundIDs[t]]._hasTimer&&ft.sounds[ft.soundIDs[t]]._onTimer()},L=function(i){i=i!==e?i:{},"function"==typeof ft.onerror&&ft.onerror.apply(t,[{type:i.type!==e?i.type:null}]),i.fatal!==e&&i.fatal&&ft.disable()},pt=function(){if(!Jt||!lt())return!1;var t,e,i=ft.audioFormats;for(e in i)if(i.hasOwnProperty(e)&&("mp3"===e||"mp4"===e)&&(ft._wD(bt+": Using flash fallback for "+e+" format"),ft.html5[e]=!1,i[e]&&i[e].related))for(t=i[e].related.length-1;t>=0;t--)ft.html5[i[e].related[t]]=!1},this._setSandboxType=function(t){var i=ft.sandbox;i.type=t,i.description=i.types[i.types[t]!==e?t:"unknown"],"localWithFile"===i.type?(i.noRemote=!0,i.noLocal=!1,u("secNote",2)):"localWithNetwork"===i.type?(i.noRemote=!1,i.noLocal=!0):"localTrusted"===i.type&&(i.noRemote=!1,i.noLocal=!1)},this._externalInterfaceOK=function(t){if(ft.swfLoaded)return!1;var e;if(d("swf",!0),d("flashtojs",!0),ft.swfLoaded=!0,ee=!1,Jt&&pt(),!t||t.replace(/\+dev/i,"")!==ft.versionNumber.replace(/\+dev/i,""))return e=bt+': Fatal: JavaScript file build "'+ft.versionNumber+'" does not match Flash SWF build "'+t+'" at '+ft.url+". Ensure both are up-to-date.",setTimeout(function(){throw new Error(e)},0),!1;setTimeout(p,Yt?100:1)},G=function(t,i){function n(){var t,e=[],i=[];t="SoundManager "+ft.version+(!ft.html5Only&&ft.useHTML5Audio?ft.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),ft.html5Only?ft.html5PollingInterval&&e.push("html5PollingInterval ("+ft.html5PollingInterval+"ms)"):(ft.preferFlash&&e.push("preferFlash"),ft.useHighPerformance&&e.push("useHighPerformance"),ft.flashPollingInterval&&e.push("flashPollingInterval ("+ft.flashPollingInterval+"ms)"),ft.html5PollingInterval&&e.push("html5PollingInterval ("+ft.html5PollingInterval+"ms)"),ft.wmode&&e.push("wmode ("+ft.wmode+")"),ft.debugFlash&&e.push("debugFlash"),ft.useFlashBlock&&e.push("flashBlock")),e.length&&(i=i.concat([e.join(" + ")])),ft._wD(t+(i.length?" + "+i.join(", "):""),1),dt()}function o(t,e){return'<param name="'+t+'" value="'+e+'" />'}if(Tt&&Mt)return!1;if(ft.html5Only)return _(),n(),ft.oMC=r(ft.movieID),p(),Tt=!0,Mt=!0,!1;var a,s,h,l,c,d,u,g,m=i||ft.url,f=ft.altURL||m,y=B(),v=U(),b=null,w=_t.getElementsByTagName("html")[0];if(b=w&&w.dir&&w.dir.match(/rtl/i),t=t===e?ft.id:t,_(),ft.url=H(oe?m:f),i=ft.url,ft.wmode=!ft.wmode&&ft.useHighPerformance?"transparent":ft.wmode,null!==ft.wmode&&(xt.match(/msie 8/i)||!Yt&&!ft.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Nt.push(A.spcWmode),ft.wmode=null),a={name:t,id:t,src:i,quality:"high",allowScriptAccess:ft.allowScriptAccess,bgcolor:ft.bgColor,pluginspage:ae+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:ft.wmode,hasPriority:"true"},ft.debugFlash&&(a.FlashVars="debug=1"),ft.wmode||delete a.wmode,Yt)s=_t.createElement("div"),l=['<object id="'+t+'" data="'+i+'" type="'+a.type+'" title="'+a.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',o("movie",i),o("AllowScriptAccess",ft.allowScriptAccess),o("quality",a.quality),ft.wmode?o("wmode",ft.wmode):"",o("bgcolor",ft.bgColor),o("hasPriority","true"),ft.debugFlash?o("FlashVars",a.FlashVars):"","</object>"].join("");else{s=_t.createElement("embed");for(h in a)a.hasOwnProperty(h)&&s.setAttribute(h,a[h])}if(O(),v=U(),y=B())if(ft.oMC=r(ft.movieID)||_t.createElement("div"),ft.oMC.id)g=ft.oMC.className,ft.oMC.className=(g?g+" ":X.swfDefault)+(v?" "+v:""),ft.oMC.appendChild(s),Yt&&((c=ft.oMC.appendChild(_t.createElement("div"))).className=X.swfBox,c.innerHTML=l),Mt=!0;else{if(ft.oMC.id=ft.movieID,ft.oMC.className=X.swfDefault+" "+v,d=null,c=null,ft.useFlashBlock||(ft.useHighPerformance?d={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(d={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},b&&(d.left=Math.abs(parseInt(d.left,10))+"px"))),zt&&(ft.oMC.style.zIndex=1e4),!ft.debugFlash)for(u in d)d.hasOwnProperty(u)&&(ft.oMC.style[u]=d[u]);try{Yt||ft.oMC.appendChild(s),y.appendChild(ft.oMC),Yt&&((c=ft.oMC.appendChild(_t.createElement("div"))).className=X.swfBox,c.innerHTML=l),Mt=!0}catch(t){throw new Error(F("domError")+" \n"+t.toString())}}return Tt=!0,n(),!0},T=function(){return ft.html5Only?(G(),!1):!vt&&(ft.url?((vt=ft.getMovie(ft.id))||(Et?(Yt?ft.oMC.innerHTML=Ot:ft.oMC.appendChild(Et),Et=null,Tt=!0):G(ft.id,ft.url),vt=ft.getMovie(ft.id)),"function"==typeof ft.oninitmovie&&setTimeout(ft.oninitmovie,1),ut(),!0):(u("noURL"),!1))},S=function(){setTimeout(x,1e3)},P=function(){t.setTimeout(function(){j(wt+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),ft.setup({preferFlash:!1}).reboot(),ft.didFlashBlock=!0,ft.beginDelayedInit()},1)},x=function(){var e,i=!1;return!!ft.url&&(!Dt&&(Dt=!0,st.remove(t,"load",S),ht&&ee&&!te?(u("waitFocus"),!1):(Ct||(e=ft.getMoviePercent())>0&&e<100&&(i=!0),void setTimeout(function(){if(e=ft.getMoviePercent(),i)return Dt=!1,ft._wD(F("waitSWF")),t.setTimeout(S,1),!1;Ct||(ft._wD(bt+": No Flash response within expected time. Likely causes: "+(0===e?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(ft.debugFlash?" "+F("checkSWF"):""),2),!oe&&e&&(u("localFail",2),ft.debugFlash||u("tryDebug",2)),0===e&&ft._wD(F("swf404",ft.url),1),d("flashtojs",!1,": Timed out"+(oe?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)"))),!Ct&&ie&&(null===e?ft.useFlashBlock||0===ft.flashLoadTimeout?(ft.useFlashBlock&&N(),u("waitForever")):!ft.useFlashBlock&&J?P():(u("waitForever"),b({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===ft.flashLoadTimeout?u("waitForever"):!ft.useFlashBlock&&J?P():R(!0))},ft.flashLoadTimeout))))},k=function(){function e(){st.remove(t,"focus",k)}return te||!ee?(e(),!0):(ie=!0,te=!0,u("gotFocus"),Dt=!1,S(),e(),!0)},ut=function(){Nt.length&&(ft._wD("SoundManager 2: "+Nt.join(" "),1),Nt=[])},dt=function(){ut();var t,e=[];if(ft.useHTML5Audio&&ft.hasHTML5){for(t in ft.audioFormats)ft.audioFormats.hasOwnProperty(t)&&e.push(t+" = "+ft.html5[t]+(!ft.html5[t]&&Ut&&ft.flash[t]?" (using flash)":ft.preferFlash&&ft.flash[t]&&Ut?" (preferring flash)":ft.html5[t]?"":" ("+(ft.audioFormats[t].required?"required, ":"")+"and no flash support)"));ft._wD("SoundManager 2 HTML5 support: "+e.join(", "),1)}},g=function(e){if(Ct)return!1;if(ft.html5Only)return u("sm2Loaded",1),Ct=!0,w(),d("onload",!0),!0;var i,n=!0;return ft.useFlashBlock&&ft.flashLoadTimeout&&!ft.getMoviePercent()||(Ct=!0),i={type:!ht&&Ut?"NO_FLASH":"INIT_TIMEOUT"},ft._wD("SoundManager 2 "+(It?"failed to load":"loaded")+" ("+(It?"Flash security/load error":"OK")+") "+String.fromCharCode(It?10006:10003),It?2:1),It||e?(ft.useFlashBlock&&ft.oMC&&(ft.oMC.className=U()+" "+(null===ft.getMoviePercent()?X.swfTimedout:X.swfError)),b({type:"ontimeout",error:i,ignoreInit:!0}),d("onload",!1),L(i),n=!1):d("onload",!0),It||(ft.waitForWindowLoad&&!Bt?(u("waitOnload"),st.add(t,"load",w)):(ft.waitForWindowLoad&&Bt&&u("docLoaded"),w())),n},l=function(){var t,i=ft.setupOptions;for(t in i)i.hasOwnProperty(t)&&(ft[t]===e?ft[t]=i[t]:ft[t]!==i[t]&&(ft.setupOptions[t]=ft[t]))},p=function(){function e(){st.remove(t,"load",ft.beginDelayedInit)}if(Ct)return u("didInit"),!1;if(ft.html5Only)return Ct||(e(),ft.enabled=!0,g()),!0;T();try{vt._externalInterfaceTest(!1),E(!0,ft.flashPollingInterval||(ft.useHighPerformance?10:50)),ft.debugMode||vt._disableDebug(),ft.enabled=!0,d("jstoflash",!0),ft.html5Only||st.add(t,"unload",h)}catch(t){return ft._wD("js/flash exception: "+t.toString()),d("jstoflash",!1),L({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),R(!0),g(),!1}return g(),e(),!0},M=function(){return!I&&(I=!0,l(),O(),!ht&&ft.hasHTML5&&(ft._wD("SoundManager 2: No Flash detected"+(ft.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),ft.setup({useHTML5Audio:!0,preferFlash:!1})),at(),!ht&&Ut&&(Nt.push(A.needFlash),ft.setup({flashLoadTimeout:1})),_t.removeEventListener&&_t.removeEventListener("DOMContentLoaded",M,!1),T(),!0)},ot=function(){return"complete"===_t.readyState&&(M(),_t.detachEvent("onreadystatechange",ot)),!0},C=function(){Bt=!0,M(),st.remove(t,"load",C)},lt(),st.add(t,"focus",k),st.add(t,"load",S),st.add(t,"load",C),_t.addEventListener?_t.addEventListener("DOMContentLoaded",M,!1):_t.attachEvent?_t.attachEvent("onreadystatechange",ot):(d("onload",!1),L({type:"NO_DOM2_EVENTS",fatal:!0}))}if(!t||!t.document)throw new Error("SoundManager requires a browser with window and document objects.");var n=null;t.SM2_DEFER!==e&&SM2_DEFER||(n=new i),"object"==typeof module&&module&&"object"==typeof module.exports?(module.exports.SoundManager=i,module.exports.soundManager=n):"function"==typeof define&&define.amd&&define(function(){return{constructor:i,getInstance:function(e){if(!t.soundManager&&e instanceof Function){var n=e(i);n instanceof i&&(t.soundManager=n)}return t.soundManager}}}),t.SoundManager=i,t.soundManager=n}(window);var Stats=function(){function t(t,e,i){var n=document.createElement(t);return n.id=e,n.style.cssText=i,n}function e(e,i,n){var o=t("div",e,"padding:0 0 3px 3px;text-align:left;background:"+n),a=t("div",e+"Text","font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:"+i);a.innerHTML=e.toUpperCase(),o.appendChild(a);var s=t("div",e+"Graph","width:74px;height:30px;background:"+i);o.appendChild(s);for(var r=0;r<74;r++)s.appendChild(t("span","","width:1px;height:30px;float:left;opacity:0.9;background:"+n));return o}function i(t){for(var e=p.children,i=0;i<e.length;i++)e[i].style.display=i===t?"block":"none";h=t}function n(t,e){t.appendChild(t.firstChild).style.height=Math.min(30,30-30*e)+"px"}var o=performance&&performance.now?performance.now.bind(performance):Date.now,a=o(),s=a,r=0,h=0,l=0,p=t("div","stats","width:80px;opacity:0.9;cursor:pointer");p.addEventListener("mousedown",function(t){t.preventDefault(),i(++h%p.children.length)},!1),l=0,fpsMin=1/0,fpsMax=0;var c=e("fps","#0ff","#002"),d=c.children[0],u=c.children[1];p.appendChild(c);var g=0,m=1/0,f=0,y=e("ms","#0f0","#020"),v=y.children[0],b=y.children[1];if(p.appendChild(y),performance&&performance.memory){var w=0,S=1/0,x=0,P=e("mb","#f08","#201"),_=P.children[0],k=P.children[1];p.appendChild(P)}return i(h),{REVISION:14,domElement:p,setMode:i,begin:function(){a=o()},end:function(){var t=o();if(g=t-a,m=Math.min(m,g),f=Math.max(f,g),v.textContent=(0|g)+" MS ("+(0|m)+"-"+(0|f)+")",n(b,g/200),r++,t>s+1e3&&(l=Math.round(1e3*r/(t-s)),fpsMin=Math.min(fpsMin,l),fpsMax=Math.max(fpsMax,l),d.textContent=l+" FPS ("+fpsMin+"-"+fpsMax+")",n(u,l/100),s=t,r=0,void 0!==w)){var e=performance.memory.usedJSHeapSize,i=performance.memory.jsHeapSizeLimit;w=Math.round(9.54e-7*e),S=Math.min(S,w),x=Math.max(x,w),_.textContent=w+" MB ("+S+"-"+x+")",n(k,e/i)}return t},update:function(){a=this.end()},getFPS:function(){return l}}};"object"==typeof module&&(module.exports=Stats),function(t){"use strict";function e(t){switch(typeof t){case"undefined":return"undefined";case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return null===t?"null":"object"}}function i(t){return Object.prototype.toString.call(t).replace(/^\[object *|\]$/g,"")}function n(t){return"function"==typeof t}function o(t){if(null===t||t===C)throw TypeError();return Object(t)}function a(t){return t>>0}function s(t){return t>>>0}function r(t){if(t.length>I)throw RangeError("Array too large for polyfill");var e;for(e=0;e<t.length;e+=1)!function(e){Object.defineProperty(t,e,{get:function(){return t._getter(e)},set:function(i){t._setter(e,i)},enumerable:!0,configurable:!1})}(e)}function h(t,e){var i=32-e;return t<<i>>i}function l(t,e){var i=32-e;return t<<i>>>i}function p(t){return[255&t]}function c(t){return h(t[0],8)}function d(t){return[255&t]}function u(t){return l(t[0],8)}function g(t){return t=H(Number(t)),[t<0?0:t>255?255:255&t]}function m(t){return[t>>8&255,255&t]}function f(t){return h(t[0]<<8|t[1],16)}function y(t){return[t>>8&255,255&t]}function v(t){return l(t[0]<<8|t[1],16)}function b(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]}function w(t){return h(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function S(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]}function x(t){return l(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function P(t,e,i){function n(t){var e=L(t),i=t-e;return i<.5?e:i>.5?e+1:e%2?e+1:e}var o,a,s,r,h,l,p,c=(1<<e-1)-1;for(t!==t?(a=(1<<e)-1,s=R(2,i-1),o=0):t===1/0||t===-1/0?(a=(1<<e)-1,s=0,o=t<0?1:0):0===t?(a=0,s=0,o=1/t==-1/0?1:0):(o=t<0,(t=G(t))>=R(2,1-c)?(a=D(L(E(t)/B),1023),(s=n(t/R(2,a)*R(2,i)))/R(2,i)>=2&&(a+=1,s=1),a>c?(a=(1<<e)-1,s=0):(a+=c,s-=R(2,i))):(a=0,s=n(t/R(2,1-c-i)))),h=[],r=i;r;r-=1)h.push(s%2?1:0),s=L(s/2);for(r=e;r;r-=1)h.push(a%2?1:0),a=L(a/2);for(h.push(o?1:0),h.reverse(),l=h.join(""),p=[];l.length;)p.push(parseInt(l.substring(0,8),2)),l=l.substring(8);return p}function _(t,e,i){var n,o,a,s,r,h,l,p,c=[];for(n=t.length;n;n-=1)for(a=t[n-1],o=8;o;o-=1)c.push(a%2?1:0),a>>=1;return c.reverse(),s=c.join(""),r=(1<<e-1)-1,h=parseInt(s.substring(0,1),2)?-1:1,l=parseInt(s.substring(1,1+e),2),p=parseInt(s.substring(1+e),2),l===(1<<e)-1?0!==p?NaN:h*(1/0):l>0?h*R(2,l-r)*(1+p/R(2,i)):0!==p?h*R(2,-(r-1))*(p/R(2,i)):h<0?-0:0}function k(t){return _(t,11,52)}function A(t){return P(t,11,52)}function T(t){return _(t,8,23)}function M(t){return P(t,8,23)}var C=void 0,I=1e5,B=Math.LN2,G=Math.abs,L=Math.floor,E=Math.log,O=Math.max,D=Math.min,R=Math.pow,H=Math.round;!function(){var t=Object.defineProperty,e=!function(){try{return Object.defineProperty({},"x",{})}catch(t){return!1}}();t&&!e||(Object.defineProperty=function(e,i,n){if(t)try{return t(e,i,n)}catch(t){}if(e!==Object(e))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in n&&Object.prototype.__defineGetter__.call(e,i,n.get),Object.prototype.__defineSetter__&&"set"in n&&Object.prototype.__defineSetter__.call(e,i,n.set),"value"in n&&(e[i]=n.value),e})}(),function(){function h(t){if((t=a(t))<0)throw RangeError("ArrayBuffer size is not a small enough positive integer.");Object.defineProperty(this,"byteLength",{value:t}),Object.defineProperty(this,"_bytes",{value:Array(t)});for(var e=0;e<t;e+=1)this._bytes[e]=0}function l(){if(!arguments.length||"object"!=typeof arguments[0])return function(t){if((t=a(t))<0)throw RangeError("length is not a small enough positive integer.");Object.defineProperty(this,"length",{value:t}),Object.defineProperty(this,"byteLength",{value:t*this.BYTES_PER_ELEMENT}),Object.defineProperty(this,"buffer",{value:new h(this.byteLength)}),Object.defineProperty(this,"byteOffset",{value:0})}.apply(this,arguments);if(arguments.length>=1&&"object"===e(arguments[0])&&arguments[0]instanceof l)return function(t){if(this.constructor!==t.constructor)throw TypeError();var e=t.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new h(e)}),Object.defineProperty(this,"byteLength",{value:e}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:t.length});for(var i=0;i<this.length;i+=1)this._setter(i,t._getter(i))}.apply(this,arguments);if(arguments.length>=1&&"object"===e(arguments[0])&&!(arguments[0]instanceof l)&&!(arguments[0]instanceof h||"ArrayBuffer"===i(arguments[0])))return function(t){var e=t.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new h(e)}),Object.defineProperty(this,"byteLength",{value:e}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:t.length});for(var i=0;i<this.length;i+=1){var n=t[i];this._setter(i,Number(n))}}.apply(this,arguments);if(arguments.length>=1&&"object"===e(arguments[0])&&(arguments[0]instanceof h||"ArrayBuffer"===i(arguments[0])))return function(t,e,i){if((e=s(e))>t.byteLength)throw RangeError("byteOffset out of range");if(e%this.BYTES_PER_ELEMENT)throw RangeError("buffer length minus the byteOffset is not a multiple of the element size.");if(i===C){var n=t.byteLength-e;if(n%this.BYTES_PER_ELEMENT)throw RangeError("length of buffer minus byteOffset not a multiple of the element size");i=n/this.BYTES_PER_ELEMENT}else n=(i=s(i))*this.BYTES_PER_ELEMENT;if(e+n>t.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:t}),Object.defineProperty(this,"byteLength",{value:n}),Object.defineProperty(this,"byteOffset",{value:e}),Object.defineProperty(this,"length",{value:i})}.apply(this,arguments);throw TypeError()}function P(t,e,i){var n=function(){Object.defineProperty(this,"constructor",{value:n}),l.apply(this,arguments),r(this)};"__proto__"in n?n.__proto__=l:(n.from=l.from,n.of=l.of),n.BYTES_PER_ELEMENT=t;var o=function(){};return o.prototype=_,n.prototype=new o,Object.defineProperty(n.prototype,"BYTES_PER_ELEMENT",{value:t}),Object.defineProperty(n.prototype,"_pack",{value:e}),Object.defineProperty(n.prototype,"_unpack",{value:i}),n}t.ArrayBuffer=t.ArrayBuffer||h,Object.defineProperty(l,"from",{value:function(t){return new this(t)}}),Object.defineProperty(l,"of",{value:function(){return new this(arguments)}});var _={};l.prototype=_,Object.defineProperty(l.prototype,"_getter",{value:function(t){if(arguments.length<1)throw SyntaxError("Not enough arguments");if((t=s(t))>=this.length)return C;var e,i,n=[];for(e=0,i=this.byteOffset+t*this.BYTES_PER_ELEMENT;e<this.BYTES_PER_ELEMENT;e+=1,i+=1)n.push(this.buffer._bytes[i]);return this._unpack(n)}}),Object.defineProperty(l.prototype,"get",{value:l.prototype._getter}),Object.defineProperty(l.prototype,"_setter",{value:function(t,e){if(arguments.length<2)throw SyntaxError("Not enough arguments");if(!((t=s(t))>=this.length)){var i,n,o=this._pack(e);for(i=0,n=this.byteOffset+t*this.BYTES_PER_ELEMENT;i<this.BYTES_PER_ELEMENT;i+=1,n+=1)this.buffer._bytes[n]=o[i]}}}),Object.defineProperty(l.prototype,"constructor",{value:l}),Object.defineProperty(l.prototype,"copyWithin",{value:function(t,e){var i=arguments[2],n=o(this),r=s(n.length);r=O(r,0);var h,l=a(t);h=l<0?O(r+l,0):D(l,r);var p,c=a(e);p=c<0?O(r+c,0):D(c,r);var d,u;u=(d=i===C?r:a(i))<0?O(r+d,0):D(d,r);var g,m=D(u-p,r-h);for(p<h&&h<p+m?(g=-1,p=p+m-1,h=h+m-1):g=1;m>0;)n._setter(h,n._getter(p)),p+=g,h+=g,m-=1;return n}}),Object.defineProperty(l.prototype,"every",{value:function(t){if(this===C||null===this)throw TypeError();var e=Object(this),i=s(e.length);if(!n(t))throw TypeError();for(var o=arguments[1],a=0;a<i;a++)if(!t.call(o,e._getter(a),a,e))return!1;return!0}}),Object.defineProperty(l.prototype,"fill",{value:function(t){var e=arguments[1],i=arguments[2],n=o(this),r=s(n.length);r=O(r,0);var h,l=a(e);h=l<0?O(r+l,0):D(l,r);var p,c;for(c=(p=i===C?r:a(i))<0?O(r+p,0):D(p,r);h<c;)n._setter(h,t),h+=1;return n}}),Object.defineProperty(l.prototype,"filter",{value:function(t){if(this===C||null===this)throw TypeError();var e=Object(this),i=s(e.length);if(!n(t))throw TypeError();for(var o=[],a=arguments[1],r=0;r<i;r++){var h=e._getter(r);t.call(a,h,r,e)&&o.push(h)}return new this.constructor(o)}}),Object.defineProperty(l.prototype,"find",{value:function(t){var e=o(this),i=s(e.length);if(!n(t))throw TypeError();for(var a=arguments.length>1?arguments[1]:C,r=0;r<i;){var h=e._getter(r),l=t.call(a,h,r,e);if(Boolean(l))return h;++r}return C}}),Object.defineProperty(l.prototype,"findIndex",{value:function(t){var e=o(this),i=s(e.length);if(!n(t))throw TypeError();for(var a=arguments.length>1?arguments[1]:C,r=0;r<i;){var h=e._getter(r),l=t.call(a,h,r,e);if(Boolean(l))return r;++r}return-1}}),Object.defineProperty(l.prototype,"forEach",{value:function(t){if(this===C||null===this)throw TypeError();var e=Object(this),i=s(e.length);if(!n(t))throw TypeError();for(var o=arguments[1],a=0;a<i;a++)t.call(o,e._getter(a),a,e)}}),Object.defineProperty(l.prototype,"indexOf",{value:function(t){if(this===C||null===this)throw TypeError();var e=Object(this),i=s(e.length);if(0===i)return-1;var n=0;if(arguments.length>0&&((n=Number(arguments[1]))!==n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*L(G(n)))),n>=i)return-1;for(var o=n>=0?n:O(i-G(n),0);o<i;o++)if(e._getter(o)===t)return o;return-1}}),Object.defineProperty(l.prototype,"join",{value:function(t){if(this===C||null===this)throw TypeError();for(var e=Object(this),i=s(e.length),n=Array(i),o=0;o<i;++o)n[o]=e._getter(o);return n.join(t===C?",":t)}}),Object.defineProperty(l.prototype,"lastIndexOf",{value:function(t){if(this===C||null===this)throw TypeError();var e=Object(this),i=s(e.length);if(0===i)return-1;var n=i;arguments.length>1&&((n=Number(arguments[1]))!==n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*L(G(n))));for(var o=n>=0?D(n,i-1):i-G(n);o>=0;o--)if(e._getter(o)===t)return o;return-1}}),Object.defineProperty(l.prototype,"map",{value:function(t){if(this===C||null===this)throw TypeError();var e=Object(this),i=s(e.length);if(!n(t))throw TypeError();var o=[];o.length=i;for(var a=arguments[1],r=0;r<i;r++)o[r]=t.call(a,e._getter(r),r,e);return new this.constructor(o)}}),Object.defineProperty(l.prototype,"reduce",{value:function(t){if(this===C||null===this)throw TypeError();var e=Object(this),i=s(e.length);if(!n(t))throw TypeError();if(0===i&&1===arguments.length)throw TypeError();var o,a=0;for(o=arguments.length>=2?arguments[1]:e._getter(a++);a<i;)o=t.call(C,o,e._getter(a),a,e),a++;return o}}),Object.defineProperty(l.prototype,"reduceRight",{value:function(t){if(this===C||null===this)throw TypeError();var e=Object(this),i=s(e.length);if(!n(t))throw TypeError();if(0===i&&1===arguments.length)throw TypeError();var o,a=i-1;for(o=arguments.length>=2?arguments[1]:e._getter(a--);a>=0;)o=t.call(C,o,e._getter(a),a,e),a--;return o}}),Object.defineProperty(l.prototype,"reverse",{value:function(){if(this===C||null===this)throw TypeError();for(var t=Object(this),e=s(t.length),i=L(e/2),n=0,o=e-1;n<i;++n,--o){var a=t._getter(n);t._setter(n,t._getter(o)),t._setter(o,a)}return t}}),Object.defineProperty(l.prototype,"set",{value:function(t,e){if(arguments.length<1)throw SyntaxError("Not enough arguments");var i,n,o,a,r,h,l,p,c,d;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(i=arguments[0],(o=s(arguments[1]))+i.length>this.length)throw RangeError("Offset plus length of array is out of range");if(p=this.byteOffset+o*this.BYTES_PER_ELEMENT,c=i.length*this.BYTES_PER_ELEMENT,i.buffer===this.buffer){for(d=[],r=0,h=i.byteOffset;r<c;r+=1,h+=1)d[r]=i.buffer._bytes[h];for(r=0,l=p;r<c;r+=1,l+=1)this.buffer._bytes[l]=d[r]}else for(r=0,h=i.byteOffset,l=p;r<c;r+=1,h+=1,l+=1)this.buffer._bytes[l]=i.buffer._bytes[h]}else{if("object"!=typeof arguments[0]||void 0===arguments[0].length)throw TypeError("Unexpected argument type(s)");if(n=arguments[0],a=s(n.length),(o=s(arguments[1]))+a>this.length)throw RangeError("Offset plus length of array is out of range");for(r=0;r<a;r+=1)h=n[r],this._setter(o+r,Number(h))}}}),Object.defineProperty(l.prototype,"slice",{value:function(t,e){for(var i=o(this),n=s(i.length),r=a(t),h=r<0?O(n+r,0):D(r,n),l=e===C?n:a(e),p=l<0?O(n+l,0):D(l,n),c=p-h,d=new(0,i.constructor)(c),u=0;h<p;){var g=i._getter(h);d._setter(u,g),++h,++u}return d}}),Object.defineProperty(l.prototype,"some",{value:function(t){if(this===C||null===this)throw TypeError();var e=Object(this),i=s(e.length);if(!n(t))throw TypeError();for(var o=arguments[1],a=0;a<i;a++)if(t.call(o,e._getter(a),a,e))return!0;return!1}}),Object.defineProperty(l.prototype,"sort",{value:function(t){if(this===C||null===this)throw TypeError();for(var e=Object(this),i=s(e.length),n=Array(i),o=0;o<i;++o)n[o]=e._getter(o);for(t?n.sort(t):n.sort(),o=0;o<i;++o)e._setter(o,n[o]);return e}}),Object.defineProperty(l.prototype,"subarray",{value:function(t,e){function i(t,e,i){return t<e?e:t>i?i:t}t=a(t),e=a(e),arguments.length<1&&(t=0),arguments.length<2&&(e=this.length),t<0&&(t=this.length+t),e<0&&(e=this.length+e),t=i(t,0,this.length);var n=(e=i(e,0,this.length))-t;return n<0&&(n=0),new this.constructor(this.buffer,this.byteOffset+t*this.BYTES_PER_ELEMENT,n)}});var I=P(1,p,c),B=P(1,d,u),E=P(1,g,u),R=P(2,m,f),H=P(2,y,v),F=P(4,b,w),N=P(4,S,x),U=P(4,M,T),X=P(8,A,k);t.Int8Array=t.Int8Array||I,t.Uint8Array=t.Uint8Array||B,t.Uint8ClampedArray=t.Uint8ClampedArray||E,t.Int16Array=t.Int16Array||R,t.Uint16Array=t.Uint16Array||H,t.Int32Array=t.Int32Array||F,t.Uint32Array=t.Uint32Array||N,t.Float32Array=t.Float32Array||U,t.Float64Array=t.Float64Array||X}(),function(){function e(t,e){return n(t.get)?t.get(e):t[e]}function o(t,e,n){if(!(t instanceof ArrayBuffer||"ArrayBuffer"===i(t)))throw TypeError();if((e=s(e))>t.byteLength)throw RangeError("byteOffset out of range");if(n=n===C?t.byteLength-e:s(n),e+n>t.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:t}),Object.defineProperty(this,"byteLength",{value:n}),Object.defineProperty(this,"byteOffset",{value:e})}function a(t){return function(i,n){if((i=s(i))+t.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");i+=this.byteOffset;for(var o=new Uint8Array(this.buffer,i,t.BYTES_PER_ELEMENT),a=[],r=0;r<t.BYTES_PER_ELEMENT;r+=1)a.push(e(o,r));return Boolean(n)===Boolean(h)&&a.reverse(),e(new t(new Uint8Array(a).buffer),0)}}function r(t){return function(i,n,o){if((i=s(i))+t.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");var a,r=new t([n]),l=new Uint8Array(r.buffer),p=[];for(a=0;a<t.BYTES_PER_ELEMENT;a+=1)p.push(e(l,a));Boolean(o)===Boolean(h)&&p.reverse(),new Uint8Array(this.buffer,i,t.BYTES_PER_ELEMENT).set(p)}}var h=function(){var t=new Uint16Array([4660]);return 18===e(new Uint8Array(t.buffer),0)}();Object.defineProperty(o.prototype,"getUint8",{value:a(Uint8Array)}),Object.defineProperty(o.prototype,"getInt8",{value:a(Int8Array)}),Object.defineProperty(o.prototype,"getUint16",{value:a(Uint16Array)}),Object.defineProperty(o.prototype,"getInt16",{value:a(Int16Array)}),Object.defineProperty(o.prototype,"getUint32",{value:a(Uint32Array)}),Object.defineProperty(o.prototype,"getInt32",{value:a(Int32Array)}),Object.defineProperty(o.prototype,"getFloat32",{value:a(Float32Array)}),Object.defineProperty(o.prototype,"getFloat64",{value:a(Float64Array)}),Object.defineProperty(o.prototype,"setUint8",{value:r(Uint8Array)}),Object.defineProperty(o.prototype,"setInt8",{value:r(Int8Array)}),Object.defineProperty(o.prototype,"setUint16",{value:r(Uint16Array)}),Object.defineProperty(o.prototype,"setInt16",{value:r(Int16Array)}),Object.defineProperty(o.prototype,"setUint32",{value:r(Uint32Array)}),Object.defineProperty(o.prototype,"setInt32",{value:r(Int32Array)}),Object.defineProperty(o.prototype,"setFloat32",{value:r(Float32Array)}),Object.defineProperty(o.prototype,"setFloat64",{value:r(Float64Array)}),t.DataView=t.DataView||o}()}(this);var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var n=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},o=function(t,e,i){var n,o,a=t.cycle;for(n in a)o=a[n],t[n]="function"==typeof o?o(i,e[i]):o[i%o.length];delete t.cycle},a=function(t,e,n){i.call(this,t,e,n),this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=a.prototype.render},s=i._internals,r=s.isSelector,h=s.isArray,l=a.prototype=i.to({},.1,{}),p=[];a.version="1.19.1",l.constructor=a,l.kill()._gc=!1,a.killTweensOf=a.killDelayedCallsTo=i.killTweensOf,a.getTweensOf=i.getTweensOf,a.lagSmoothing=i.lagSmoothing,a.ticker=i.ticker,a.render=i.render,l.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},l.updateTo=function(t,e){var n,o=this.ratio,a=this.vars.immediateRender||t.immediateRender;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(n in t)this.vars[n]=t[n];if(this._initted||a)if(e)this._initted=!1,a&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var s=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(s,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||a)for(var r,h=1/(1-o),l=this._firstPT;l;)r=l.s+l.c,l.c*=h,l.s=r-l.c,l=l._next;return this},l.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var n,o,a,r,h,l,p,c,d=this._dirty?this.totalDuration():this._totalDuration,u=this._time,g=this._totalTime,m=this._cycle,f=this._duration,y=this._rawPrevTime;if(t>=d-1e-7&&t>=0?(this._totalTime=d,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=f,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(n=!0,o="onComplete",i=i||this._timeline.autoRemoveChildren),0===f&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(y<0||t<=0&&t>=-1e-7||1e-10===y&&"isPause"!==this.data)&&y!==t&&(i=!0,y>1e-10&&(o="onReverseComplete")),this._rawPrevTime=c=!e||t||y===t?t:1e-10)):t<1e-7?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==g||0===f&&y>0)&&(o="onReverseComplete",n=this._reversed),t<0&&(this._active=!1,0===f&&(this._initted||!this.vars.lazy||i)&&(y>=0&&(i=!0),this._rawPrevTime=c=!e||t||y===t?t:1e-10)),this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(r=f+this._repeatDelay,this._cycle=this._totalTime/r>>0,0!==this._cycle&&this._cycle===this._totalTime/r&&g<=t&&this._cycle--,this._time=this._totalTime-this._cycle*r,this._yoyo&&0!=(1&this._cycle)&&(this._time=f-this._time),this._time>f?this._time=f:this._time<0&&(this._time=0)),this._easeType?(h=this._time/f,l=this._easeType,p=this._easePower,(1===l||3===l&&h>=.5)&&(h=1-h),3===l&&(h*=2),1===p?h*=h:2===p?h*=h*h:3===p?h*=h*h*h:4===p&&(h*=h*h*h*h),1===l?this.ratio=1-h:2===l?this.ratio=h:this._time/f<.5?this.ratio=h/2:this.ratio=1-h/2):this.ratio=this._ease.getRatio(this._time/f)),u!==this._time||i||m!==this._cycle){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=u,this._totalTime=g,this._rawPrevTime=y,this._cycle=m,s.lazyTweens.push(this),void(this._lazy=[t,e]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/f):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==u&&t>=0&&(this._active=!0),0===g&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,i):o||(o="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==f||e||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(t<0&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==g||o)&&this._callback("onUpdate")),this._cycle!==m&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),o&&(this._gc&&!i||(t<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this._callback(o),0===f&&1e-10===this._rawPrevTime&&1e-10!==c&&(this._rawPrevTime=0)))}else g!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate"))},a.to=function(t,e,i){return new a(t,e,i)},a.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new a(t,e,i)},a.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new a(t,e,n)},a.staggerTo=a.allTo=function(t,e,s,l,c,d,u){l=l||0;var g,m,f,y,v=0,b=[],w=s.cycle,S=s.startAt&&s.startAt.cycle;for(h(t)||("string"==typeof t&&(t=i.selector(t)||t),r(t)&&(t=n(t))),t=t||[],l<0&&((t=n(t)).reverse(),l*=-1),g=t.length-1,f=0;f<=g;f++){m={};for(y in s)m[y]=s[y];if(w&&(o(m,t,f),null!=m.duration&&(e=m.duration,delete m.duration)),S){S=m.startAt={};for(y in s.startAt)S[y]=s.startAt[y];o(m.startAt,t,f)}m.delay=v+(m.delay||0),f===g&&c&&(m.onComplete=function(){s.onComplete&&s.onComplete.apply(s.onCompleteScope||this,arguments),c.apply(u||s.callbackScope||this,d||p)}),b[f]=new a(t[f],e,m),v+=l}return b},a.staggerFrom=a.allFrom=function(t,e,i,n,o,s,r){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,a.staggerTo(t,e,i,n,o,s,r)},a.staggerFromTo=a.allFromTo=function(t,e,i,n,o,s,r,h){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,a.staggerTo(t,e,n,o,s,r,h)},a.delayedCall=function(t,e,i,n,o){return new a(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:n,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,useFrames:o,overwrite:0})},a.set=function(t,e){return new a(t,0,e)},a.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var c=function(t,e){for(var n=[],o=0,a=t._first;a;)a instanceof i?n[o++]=a:(e&&(n[o++]=a),o=(n=n.concat(c(a,e))).length),a=a._next;return n},d=a.getAllTweens=function(e){return c(t._rootTimeline,e).concat(c(t._rootFramesTimeline,e))};a.killAll=function(t,i,n,o){null==i&&(i=!0),null==n&&(n=!0);var a,s,r,h=d(0!=o),l=h.length,p=i&&n&&o;for(r=0;r<l;r++)s=h[r],(p||s instanceof e||(a=s.target===s.vars.onComplete)&&n||i&&!a)&&(t?s.totalTime(s._reversed?0:s.totalDuration()):s._enabled(!1,!1))},a.killChildTweensOf=function(t,e){if(null!=t){var o,l,p,c,d,u=s.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),r(t)&&(t=n(t)),h(t))for(c=t.length;--c>-1;)a.killChildTweensOf(t[c],e);else{o=[];for(p in u)for(l=u[p].target.parentNode;l;)l===t&&(o=o.concat(u[p].tweens)),l=l.parentNode;for(d=o.length,c=0;c<d;c++)e&&o[c].totalTime(o[c].totalDuration()),o[c]._enabled(!1,!1)}}};var u=function(t,i,n,o){i=!1!==i,n=!1!==n;for(var a,s,r=d(o=!1!==o),h=i&&n&&o,l=r.length;--l>-1;)s=r[l],(h||s instanceof e||(a=s.target===s.vars.onComplete)&&n||i&&!a)&&s.paused(t)};return a.pauseAll=function(t,e,i){u(!0,t,e,i)},a.resumeAll=function(t,e,i){u(!1,t,e,i)},a.globalTimeScale=function(e){var n=t._rootTimeline,o=i.ticker.time;return arguments.length?(e=e||1e-10,n._startTime=o-(o-n._startTime)*n._timeScale/e,n=t._rootFramesTimeline,o=i.ticker.frame,n._startTime=o-(o-n._startTime)*n._timeScale/e,n._timeScale=t._rootTimeline._timeScale=e,e):n._timeScale},l.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},l.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},l.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},l.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},a},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var n=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,n,o=this.vars;for(n in o)i=o[n],r(i)&&-1!==i.join("").indexOf("{self}")&&(o[n]=this._swapSelfInParams(i));r(o.tweens)&&this.add(o.tweens,0,o.align,o.stagger)},o=i._internals,a=n._internals={},s=o.isSelector,r=o.isArray,h=o.lazyTweens,l=o.lazyRender,p=_gsScope._gsDefine.globals,c=function(t){var e,i={};for(e in t)i[e]=t[e];return i},d=function(t,e,i){var n,o,a=t.cycle;for(n in a)o=a[n],t[n]="function"==typeof o?o(i,e[i]):o[i%o.length];delete t.cycle},u=a.pauseCallback=function(){},g=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},m=n.prototype=new e;return n.version="1.19.1",m.constructor=n,m.kill()._gc=m._forcingPlayhead=m._hasPause=!1,m.to=function(t,e,n,o){var a=n.repeat&&p.TweenMax||i;return e?this.add(new a(t,e,n),o):this.set(t,n,o)},m.from=function(t,e,n,o){return this.add((n.repeat&&p.TweenMax||i).from(t,e,n),o)},m.fromTo=function(t,e,n,o,a){var s=o.repeat&&p.TweenMax||i;return e?this.add(s.fromTo(t,e,n,o),a):this.set(t,o,a)},m.staggerTo=function(t,e,o,a,r,h,l,p){var u,m,f=new n({onComplete:h,onCompleteParams:l,callbackScope:p,smoothChildTiming:this.smoothChildTiming}),y=o.cycle;for("string"==typeof t&&(t=i.selector(t)||t),s(t=t||[])&&(t=g(t)),(a=a||0)<0&&((t=g(t)).reverse(),a*=-1),m=0;m<t.length;m++)(u=c(o)).startAt&&(u.startAt=c(u.startAt),u.startAt.cycle&&d(u.startAt,t,m)),y&&(d(u,t,m),null!=u.duration&&(e=u.duration,delete u.duration)),f.to(t[m],e,u,m*a);return this.add(f,r)},m.staggerFrom=function(t,e,i,n,o,a,s,r){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,n,o,a,s,r)},m.staggerFromTo=function(t,e,i,n,o,a,s,r,h){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,n,o,a,s,r,h)},m.call=function(t,e,n,o){return this.add(i.delayedCall(0,t,e,n),o)},m.set=function(t,e,n){return n=this._parseTimeOrLabel(n,0,!0),null==e.immediateRender&&(e.immediateRender=n===this._time&&!this._paused),this.add(new i(t,0,e),n)},n.exportRoot=function(t,e){null==(t=t||{}).smoothChildTiming&&(t.smoothChildTiming=!0);var o,a,s=new n(t),r=s._timeline;for(null==e&&(e=!0),r._remove(s,!0),s._startTime=0,s._rawPrevTime=s._time=s._totalTime=r._time,o=r._first;o;)a=o._next,e&&o instanceof i&&o.target===o.vars.onComplete||s.add(o,o._startTime-o._delay),o=a;return r.add(s,0),s},m.add=function(o,a,s,h){var l,p,c,d,u,g;if("number"!=typeof a&&(a=this._parseTimeOrLabel(a,0,!0,o)),!(o instanceof t)){if(o instanceof Array||o&&o.push&&r(o)){for(s=s||"normal",h=h||0,l=a,p=o.length,c=0;c<p;c++)r(d=o[c])&&(d=new n({tweens:d})),this.add(d,l),"string"!=typeof d&&"function"!=typeof d&&("sequence"===s?l=d._startTime+d.totalDuration()/d._timeScale:"start"===s&&(d._startTime-=d.delay())),l+=h;return this._uncache(!0)}if("string"==typeof o)return this.addLabel(o,a);if("function"!=typeof o)throw"Cannot add "+o+" into the timeline; it is not a tween, timeline, function, or string.";o=i.delayedCall(0,o)}if(e.prototype.add.call(this,o,a),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(g=(u=this).rawTime()>o._startTime;u._timeline;)g&&u._timeline.smoothChildTiming?u.totalTime(u._totalTime,!0):u._gc&&u._enabled(!0,!1),u=u._timeline;return this},m.remove=function(e){if(e instanceof t){this._remove(e,!1);var i=e._timeline=e.vars.useFrames?t._rootFramesTimeline:t._rootTimeline;return e._startTime=(e._paused?e._pauseTime:i._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&r(e)){for(var n=e.length;--n>-1;)this.remove(e[n]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},m._remove=function(t,i){return e.prototype._remove.call(this,t,i),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},m.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},m.insert=m.insertMultiple=function(t,e,i,n){return this.add(t,e||0,i,n)},m.appendMultiple=function(t,e,i,n){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,n)},m.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},m.addPause=function(t,e,n,o){var a=i.delayedCall(0,u,n,o||this);return a.vars.onComplete=a.vars.onReverseComplete=e,a.data="isPause",this._hasPause=!0,this.add(a,t)},m.removeLabel=function(t){return delete this._labels[t],this},m.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},m._parseTimeOrLabel=function(e,i,n,o){var a;if(o instanceof t&&o.timeline===this)this.remove(o);else if(o&&(o instanceof Array||o.push&&r(o)))for(a=o.length;--a>-1;)o[a]instanceof t&&o[a].timeline===this&&this.remove(o[a]);if("string"==typeof i)return this._parseTimeOrLabel(i,n&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,n);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(-1===(a=e.indexOf("=")))return null==this._labels[e]?n?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(a-1)+"1",10)*Number(e.substr(a+1)),e=a>1?this._parseTimeOrLabel(e.substr(0,a-1),0,n):this.duration()}return Number(e)+i},m.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),!1!==e)},m.stop=function(){return this.paused(!0)},m.gotoAndPlay=function(t,e){return this.play(t,e)},m.gotoAndStop=function(t,e){return this.pause(t,e)},m.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,o,a,s,r,p,c,d=this._dirty?this.totalDuration():this._totalDuration,u=this._time,g=this._startTime,m=this._timeScale,f=this._paused;if(t>=d-1e-7&&t>=0)this._totalTime=this._time=d,this._reversed||this._hasPausedChild()||(o=!0,s="onComplete",r=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||this._rawPrevTime<0||1e-10===this._rawPrevTime)&&this._rawPrevTime!==t&&this._first&&(r=!0,this._rawPrevTime>1e-10&&(s="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,t=d+1e-4;else if(t<1e-7)if(this._totalTime=this._time=0,(0!==u||0===this._duration&&1e-10!==this._rawPrevTime&&(this._rawPrevTime>0||t<0&&this._rawPrevTime>=0))&&(s="onReverseComplete",o=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(r=o=!0,s="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(r=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,0===t&&o)for(n=this._first;n&&0===n._startTime;)n._duration||(o=!1),n=n._next;t=0,this._initted||(r=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!e){if(t>=u)for(n=this._first;n&&n._startTime<=t&&!p;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===this._rawPrevTime||(p=n),n=n._next;else for(n=this._last;n&&n._startTime>=t&&!p;)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(p=n),n=n._prev;p&&(this._time=t=p._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=t}if(this._time!==u&&this._first||i||r||p){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==u&&t>0&&(this._active=!0),0===u&&this.vars.onStart&&(0===this._time&&this._duration||e||this._callback("onStart")),(c=this._time)>=u)for(n=this._first;n&&(a=n._next,c===this._time&&(!this._paused||f));)(n._active||n._startTime<=c&&!n._paused&&!n._gc)&&(p===n&&this.pause(),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=a;else for(n=this._last;n&&(a=n._prev,c===this._time&&(!this._paused||f));){if(n._active||n._startTime<=u&&!n._paused&&!n._gc){if(p===n){for(p=n._prev;p&&p.endTime()>this._time;)p.render(p._reversed?p.totalDuration()-(t-p._startTime)*p._timeScale:(t-p._startTime)*p._timeScale,e,i),p=p._prev;p=null,this.pause()}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)}n=a}this._onUpdate&&(e||(h.length&&l(),this._callback("onUpdate"))),s&&(this._gc||g!==this._startTime&&m===this._timeScale||(0===this._time||d>=this.totalDuration())&&(o&&(h.length&&l(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[s]&&this._callback(s)))}},m._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof n&&t._hasPausedChild())return!0;t=t._next}return!1},m.getChildren=function(t,e,n,o){o=o||-9999999999;for(var a=[],s=this._first,r=0;s;)s._startTime<o||(s instanceof i?!1!==e&&(a[r++]=s):(!1!==n&&(a[r++]=s),!1!==t&&(r=(a=a.concat(s.getChildren(!0,e,n))).length))),s=s._next;return a},m.getTweensOf=function(t,e){var n,o,a=this._gc,s=[],r=0;for(a&&this._enabled(!0,!0),o=(n=i.getTweensOf(t)).length;--o>-1;)(n[o].timeline===this||e&&this._contains(n[o]))&&(s[r++]=n[o]);return a&&this._enabled(!1,!0),s},m.recent=function(){return this._recent},m._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},m.shiftChildren=function(t,e,i){i=i||0;for(var n,o=this._first,a=this._labels;o;)o._startTime>=i&&(o._startTime+=t),o=o._next;if(e)for(n in a)a[n]>=i&&(a[n]+=t);return this._uncache(!0)},m._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),n=i.length,o=!1;--n>-1;)i[n]._kill(t,e)&&(o=!0);return o},m.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return!1!==t&&(this._labels={}),this._uncache(!0)},m.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},m._enabled=function(t,i){if(t===this._gc)for(var n=this._first;n;)n._enabled(t,!0),n=n._next;return e.prototype._enabled.call(this,t,i)},m.totalTime=function(e,i,n){this._forcingPlayhead=!0;var o=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,o},m.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},m.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,n=0,o=this._last,a=999999999999;o;)e=o._prev,o._dirty&&o.totalDuration(),o._startTime>a&&this._sortChildren&&!o._paused?this.add(o,o._startTime-o._delay):a=o._startTime,o._startTime<0&&!o._paused&&(n-=o._startTime,this._timeline.smoothChildTiming&&(this._startTime+=o._startTime/this._timeScale),this.shiftChildren(-o._startTime,!1,-9999999999),a=0),(i=o._startTime+o._totalDuration/o._timeScale)>n&&(n=i),o=e;this._duration=this._totalDuration=n,this._dirty=!1}return this._totalDuration}return t&&this.totalDuration()?this.timeScale(this._totalDuration/t):this},m.paused=function(e){if(!e)for(var i=this._first,n=this._time;i;)i._startTime===n&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},m.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},m.rawTime=function(t){return t&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(t)-this._startTime)*this._timeScale},n},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var n=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},o=e._internals,a=o.lazyTweens,s=o.lazyRender,r=_gsScope._gsDefine.globals,h=new i(null,null,1,0),l=n.prototype=new t;return l.constructor=n,l.kill()._gc=!1,n.version="1.19.1",l.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},l.addCallback=function(t,i,n,o){return this.add(e.delayedCall(0,t,n,o),i)},l.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),n=i.length,o=this._parseTimeOrLabel(e);--n>-1;)i[n]._startTime===o&&i[n]._enabled(!1,!1);return this},l.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},l.tweenTo=function(t,i){i=i||{};var n,o,a,s={ease:h,useFrames:this.usesFrames(),immediateRender:!1},l=i.repeat&&r.TweenMax||e;for(o in i)s[o]=i[o];return s.time=this._parseTimeOrLabel(t),n=Math.abs(Number(s.time)-this._time)/this._timeScale||.001,a=new l(this,n,s),s.onStart=function(){a.target.paused(!0),a.vars.time!==a.target.time()&&n===a.duration()&&a.duration(Math.abs(a.vars.time-a.target.time())/a.target._timeScale),i.onStart&&i.onStart.apply(i.onStartScope||i.callbackScope||a,i.onStartParams||[])},a},l.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=!1!==i.immediateRender;var n=this.tweenTo(e,i);return n.duration(Math.abs(n.vars.time-t)/this._timeScale||.001)},l.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,o,r,h,l,p,c,d,u=this._dirty?this.totalDuration():this._totalDuration,g=this._duration,m=this._time,f=this._totalTime,y=this._startTime,v=this._timeScale,b=this._rawPrevTime,w=this._paused,S=this._cycle;if(t>=u-1e-7&&t>=0)this._locked||(this._totalTime=u,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(o=!0,h="onComplete",l=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||b<0||1e-10===b)&&b!==t&&this._first&&(l=!0,b>1e-10&&(h="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,this._yoyo&&0!=(1&this._cycle)?this._time=t=0:(this._time=g,t=g+1e-4);else if(t<1e-7)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==m||0===g&&1e-10!==b&&(b>0||t<0&&b>=0)&&!this._locked)&&(h="onReverseComplete",o=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(l=o=!0,h="onReverseComplete"):b>=0&&this._first&&(l=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=g||!e||t||this._rawPrevTime===t?t:1e-10,0===t&&o)for(n=this._first;n&&0===n._startTime;)n._duration||(o=!1),n=n._next;t=0,this._initted||(l=!0)}else if(0===g&&b<0&&(l=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(p=g+this._repeatDelay,this._cycle=this._totalTime/p>>0,0!==this._cycle&&this._cycle===this._totalTime/p&&f<=t&&this._cycle--,this._time=this._totalTime-this._cycle*p,this._yoyo&&0!=(1&this._cycle)&&(this._time=g-this._time),this._time>g?(this._time=g,t=g+1e-4):this._time<0?this._time=t=0:t=this._time)),this._hasPause&&!this._forcingPlayhead&&!e&&t<g){if((t=this._time)>=m||this._repeat&&S!==this._cycle)for(n=this._first;n&&n._startTime<=t&&!c;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===this._rawPrevTime||(c=n),n=n._next;else for(n=this._last;n&&n._startTime>=t&&!c;)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(c=n),n=n._prev;c&&(this._time=t=c._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==S&&!this._locked){var x=this._yoyo&&0!=(1&S),P=x===(this._yoyo&&0!=(1&this._cycle)),_=this._totalTime,k=this._cycle,A=this._rawPrevTime,T=this._time;if(this._totalTime=S*g,this._cycle<S?x=!x:this._totalTime+=g,this._time=m,this._rawPrevTime=0===g?b-1e-4:b,this._cycle=S,this._locked=!0,m=x?0:g,this.render(m,e,0===g),e||this._gc||this.vars.onRepeat&&(this._cycle=k,this._locked=!1,this._callback("onRepeat")),m!==this._time)return;if(P&&(this._cycle=S,this._locked=!0,m=x?g+1e-4:-1e-4,this.render(m,!0,!1)),this._locked=!1,this._paused&&!w)return;this._time=T,this._totalTime=_,this._cycle=k,this._rawPrevTime=A}if(this._time!==m&&this._first||i||l||c){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==f&&t>0&&(this._active=!0),0===f&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||e||this._callback("onStart")),(d=this._time)>=m)for(n=this._first;n&&(r=n._next,d===this._time&&(!this._paused||w));)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(c===n&&this.pause(),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=r;else for(n=this._last;n&&(r=n._prev,d===this._time&&(!this._paused||w));){if(n._active||n._startTime<=m&&!n._paused&&!n._gc){if(c===n){for(c=n._prev;c&&c.endTime()>this._time;)c.render(c._reversed?c.totalDuration()-(t-c._startTime)*c._timeScale:(t-c._startTime)*c._timeScale,e,i),c=c._prev;c=null,this.pause()}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)}n=r}this._onUpdate&&(e||(a.length&&s(),this._callback("onUpdate"))),h&&(this._locked||this._gc||y!==this._startTime&&v===this._timeScale||(0===this._time||u>=this.totalDuration())&&(o&&(a.length&&s(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[h]&&this._callback(h)))}else f!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate"))},l.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var n,o,a=[],s=this.getChildren(t,e,i),r=0,h=s.length;for(n=0;n<h;n++)(o=s[n]).isActive()&&(a[r++]=o);return a},l.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),n=i.length;for(e=0;e<n;e++)if(i[e].time>t)return i[e].name;return null},l.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(e[i].time<t)return e[i].name;return null},l.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},l.invalidate=function(){return this._locked=!1,t.prototype.invalidate.call(this)},l.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},l.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},l.totalDuration=function(e){return arguments.length?-1!==this._repeat&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},l.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},n},!0),function(){var t=180/Math.PI,e=[],i=[],n=[],o={},a=_gsScope._gsDefine.globals,s=function(t,e,i,n){i===n&&(i=n-(n-e)/1e6),t===e&&(e=t+(i-t)/1e6),this.a=t,this.b=e,this.c=i,this.d=n,this.da=n-t,this.ca=i-t,this.ba=e-t},r=function(t,e,i,n){var o={a:t},a={},s={},r={c:n},h=(t+e)/2,l=(e+i)/2,p=(i+n)/2,c=(h+l)/2,d=(l+p)/2,u=(d-c)/8;return o.b=h+(t-h)/4,a.b=c+u,o.c=a.a=(o.b+a.b)/2,a.c=s.a=(c+d)/2,s.b=d-u,r.b=p+(n-p)/4,s.c=r.a=(s.b+r.b)/2,[o,a,s,r]},h=function(t,o,a,s,h){var l,p,c,d,u,g,m,f,y,v,b,w,S,x=t.length-1,P=0,_=t[0].a;for(l=0;l<x;l++)p=(u=t[P]).a,c=u.d,d=t[P+1].d,h?(b=e[l],S=((w=i[l])+b)*o*.25/(s?.5:n[l]||.5),f=c-((g=c-(c-p)*(s?.5*o:0!==b?S/b:0))+(((m=c+(d-c)*(s?.5*o:0!==w?S/w:0))-g)*(3*b/(b+w)+.5)/4||0))):f=c-((g=c-(c-p)*o*.5)+(m=c+(d-c)*o*.5))/2,g+=f,m+=f,u.c=y=g,u.b=0!==l?_:_=u.a+.6*(u.c-u.a),u.da=c-p,u.ca=y-p,u.ba=_-p,a?(v=r(p,_,y,c),t.splice(P,1,v[0],v[1],v[2],v[3]),P+=4):P++,_=m;(u=t[P]).b=_,u.c=_+.4*(u.d-_),u.da=u.d-u.a,u.ca=u.c-u.a,u.ba=_-u.a,a&&(v=r(u.a,_,u.c,u.d),t.splice(P,1,v[0],v[1],v[2],v[3]))},l=function(t,n,o,a){var r,h,l,p,c,d,u=[];if(a)for(h=(t=[a].concat(t)).length;--h>-1;)"string"==typeof(d=t[h][n])&&"="===d.charAt(1)&&(t[h][n]=a[n]+Number(d.charAt(0)+d.substr(2)));if((r=t.length-2)<0)return u[0]=new s(t[0][n],0,0,t[r<-1?0:1][n]),u;for(h=0;h<r;h++)l=t[h][n],p=t[h+1][n],u[h]=new s(l,0,0,p),o&&(c=t[h+2][n],e[h]=(e[h]||0)+(p-l)*(p-l),i[h]=(i[h]||0)+(c-p)*(c-p));return u[h]=new s(t[h][n],0,0,t[h+1][n]),u},p=function(t,a,s,r,p,c){var d,u,g,m,f,y,v,b,w={},S=[],x=c||t[0];p="string"==typeof p?","+p+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==a&&(a=1);for(u in t[0])S.push(u);if(t.length>1){for(b=t[t.length-1],v=!0,d=S.length;--d>-1;)if(u=S[d],Math.abs(x[u]-b[u])>.05){v=!1;break}v&&(t=t.concat(),c&&t.unshift(c),t.push(t[1]),c=t[t.length-3])}for(e.length=i.length=n.length=0,d=S.length;--d>-1;)u=S[d],o[u]=-1!==p.indexOf(","+u+","),w[u]=l(t,u,o[u],c);for(d=e.length;--d>-1;)e[d]=Math.sqrt(e[d]),i[d]=Math.sqrt(i[d]);if(!r){for(d=S.length;--d>-1;)if(o[u])for(y=(g=w[S[d]]).length-1,m=0;m<y;m++)f=g[m+1].da/i[m]+g[m].da/e[m]||0,n[m]=(n[m]||0)+f*f;for(d=n.length;--d>-1;)n[d]=Math.sqrt(n[d])}for(d=S.length,m=s?4:1;--d>-1;)g=w[u=S[d]],h(g,a,s,r,o[u]),v&&(g.splice(0,m),g.splice(g.length-m,m));return w},c=function(t,e,i){var n,o,a,r,h,l,p,c,d,u,g,m={},f="cubic"===(e=e||"soft")?3:2,y="soft"===e,v=[];if(y&&i&&(t=[i].concat(t)),null==t||t.length<f+1)throw"invalid Bezier data";for(d in t[0])v.push(d);for(l=v.length;--l>-1;){for(m[d=v[l]]=h=[],u=0,c=t.length,p=0;p<c;p++)n=null==i?t[p][d]:"string"==typeof(g=t[p][d])&&"="===g.charAt(1)?i[d]+Number(g.charAt(0)+g.substr(2)):Number(g),y&&p>1&&p<c-1&&(h[u++]=(n+h[u-2])/2),h[u++]=n;for(c=u-f+1,u=0,p=0;p<c;p+=f)n=h[p],o=h[p+1],a=h[p+2],r=2===f?0:h[p+3],h[u++]=g=3===f?new s(n,o,a,r):new s(n,(2*o+n)/3,(2*o+a)/3,a);h.length=u}return m},d=function(t,e,i){for(var n,o,a,s,r,h,l,p,c,d,u,g=1/i,m=t.length;--m>-1;)for(a=(d=t[m]).a,s=d.d-a,r=d.c-a,h=d.b-a,n=o=0,p=1;p<=i;p++)n=o-(o=((l=g*p)*l*s+3*(c=1-l)*(l*r+c*h))*l),e[u=m*i+p-1]=(e[u]||0)+n*n},u=function(t,e){var i,n,o,a,s=[],r=[],h=0,l=0,p=(e=e>>0||6)-1,c=[],u=[];for(i in t)d(t[i],s,e);for(o=s.length,n=0;n<o;n++)h+=Math.sqrt(s[n]),u[a=n%e]=h,a===p&&(l+=h,c[a=n/e>>0]=u,r[a]=l,h=0,u=[]);return{length:l,lengths:r,segments:c}},g=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.7",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var n,o,a,s,r,h=e.values||[],l={},d=h[0],g=e.autoRotate||i.vars.orientToBezier;this._autoRotate=g?g instanceof Array?g:[["x","y","rotation",!0===g?0:Number(g)||0]]:null;for(n in d)this._props.push(n);for(a=this._props.length;--a>-1;)n=this._props[a],this._overwriteProps.push(n),o=this._func[n]="function"==typeof t[n],l[n]=o?t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(t[n]),r||l[n]!==h[0][n]&&(r=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?p(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,r):c(h,e.type,l),this._segCount=this._beziers[n].length,this._timeRes){var m=u(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(g=this._autoRotate)for(this._initialRotations=[],g[0]instanceof Array||(this._autoRotate=g=[g]),a=g.length;--a>-1;){for(s=0;s<3;s++)n=g[a][s],this._func[n]="function"==typeof t[n]&&t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)];n=g[a][2],this._initialRotations[a]=(this._func[n]?this._func[n].call(this._target):this._target[n])||0,this._overwriteProps.push(n)}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,n,o,a,s,r,h,l,p,c,d=this._segCount,u=this._func,g=this._target,m=e!==this._startRatio;if(this._timeRes){if(p=this._lengths,c=this._curSeg,e*=this._length,o=this._li,e>this._l2&&o<d-1){for(l=d-1;o<l&&(this._l2=p[++o])<=e;);this._l1=p[o-1],this._li=o,this._curSeg=c=this._segments[o],this._s2=c[this._s1=this._si=0]}else if(e<this._l1&&o>0){for(;o>0&&(this._l1=p[--o])>=e;);0===o&&e<this._l1?this._l1=0:o++,this._l2=p[o],this._li=o,this._curSeg=c=this._segments[o],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(i=o,e-=this._l1,o=this._si,e>this._s2&&o<c.length-1){for(l=c.length-1;o<l&&(this._s2=c[++o])<=e;);this._s1=c[o-1],this._si=o}else if(e<this._s1&&o>0){for(;o>0&&(this._s1=c[--o])>=e;);0===o&&e<this._s1?this._s1=0:o++,this._s2=c[o],this._si=o}r=(o+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else r=(e-(i=e<0?0:e>=1?d-1:d*e>>0)*(1/d))*d;for(n=1-r,o=this._props.length;--o>-1;)a=this._props[o],h=(r*r*(s=this._beziers[a][i]).da+3*n*(r*s.ca+n*s.ba))*r+s.a,this._mod[a]&&(h=this._mod[a](h,g)),u[a]?g[a](h):g[a]=h;if(this._autoRotate){var f,y,v,b,w,S,x,P=this._autoRotate;for(o=P.length;--o>-1;)a=P[o][2],S=P[o][3]||0,x=!0===P[o][4]?1:t,s=this._beziers[P[o][0]],f=this._beziers[P[o][1]],s&&f&&(s=s[i],f=f[i],y=s.a+(s.b-s.a)*r,y+=((b=s.b+(s.c-s.b)*r)-y)*r,b+=(s.c+(s.d-s.c)*r-b)*r,v=f.a+(f.b-f.a)*r,v+=((w=f.b+(f.c-f.b)*r)-v)*r,w+=(f.c+(f.d-f.c)*r-w)*r,h=m?Math.atan2(w-v,b-y)*x+S:this._initialRotations[o],this._mod[a]&&(h=this._mod[a](h,g)),u[a]?g[a](h):g[a]=h)}}}),m=g.prototype;g.bezierThrough=p,g.cubicToQuadratic=r,g._autoCSS=!0,g.quadraticToCubic=function(t,e,i){return new s(t,(2*e+t)/3,(2*e+i)/3,i)},g._cssRegister=function(){var t=a.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,n=e._setPluginRatio,o=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,a,s,r,h){e instanceof Array&&(e={values:e}),h=new g;var l,p,c,d=e.values,u=d.length-1,m=[],f={};if(u<0)return r;for(l=0;l<=u;l++)c=i(t,d[l],s,r,h,u!==l),m[l]=c.end;for(p in e)f[p]=e[p];return f.values=m,r=new o(t,"bezier",0,0,c.pt,2),r.data=c,r.plugin=h,r.setRatio=n,0===f.autoRotate&&(f.autoRotate=!0),!f.autoRotate||f.autoRotate instanceof Array||(l=!0===f.autoRotate?0:Number(f.autoRotate),f.autoRotate=null!=c.end.left?[["left","top","rotation",l,!1]]:null!=c.end.x&&[["x","y","rotation",l,!1]]),f.autoRotate&&(s._transform||s._enableTransforms(!1),c.autoRotate=s._target._gsTransform,c.proxy.rotation=c.autoRotate.rotation||0,s._overwriteProps.push("rotation")),h._onInitTween(c.proxy,f,s._tween),r}})}},m._mod=function(t){for(var e,i=this._overwriteProps,n=i.length;--n>-1;)(e=t[i[n]])&&"function"==typeof e&&(this._mod[i[n]]=e)},m._kill=function(t){var e,i,n=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=n.length;--i>-1;)n[i]===e&&n.splice(i,1);if(n=this._autoRotate)for(i=n.length;--i>-1;)t[n[i][2]]&&n.splice(i,1);return this._super._kill.call(this,t)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,n,o,a,s=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=s.prototype.setRatio},r=_gsScope._gsDefine.globals,h={},l=s.prototype=new t("css");l.constructor=s,s.version="1.19.1",s.API=2,s.defaultTransformPerspective=0,s.defaultSkewType="compensated",s.defaultSmoothOrigin=!0,l="px",s.suffixMap={top:l,right:l,bottom:l,left:l,width:l,height:l,fontSize:l,padding:l,margin:l,perspective:l,lineHeight:""};var p,c,d,u,g,m,f,y,v=/(?:\-|\.|\b)(\d|\.|e\-)+/g,b=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,w=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,S=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,x=/(?:\d|\-|\+|=|#|\.)*/g,P=/opacity *= *([^)]*)/i,_=/opacity:([^;]*)/i,k=/alpha\(opacity *=.+?\)/i,A=/^(rgb|hsl)/,T=/([A-Z])/g,M=/-([a-z])/gi,C=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,I=function(t,e){return e.toUpperCase()},B=/(?:Left|Right|Width)/i,G=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,L=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,E=/,(?=[^\)]*(?:\(|$))/gi,O=/[\s,\(]/i,D=Math.PI/180,R=180/Math.PI,H={},F={style:{}},N=_gsScope.document||{createElement:function(){return F}},U=function(t,e){return N.createElementNS?N.createElementNS(e||"http://www.w3.org/1999/xhtml",t):N.createElement(t)},X=U("div"),V=U("img"),W=s._internals={_specialProps:h},q=(_gsScope.navigator||{}).userAgent||"",j=function(){var t=q.indexOf("Android"),e=U("a");return d=-1!==q.indexOf("Safari")&&-1===q.indexOf("Chrome")&&(-1===t||parseFloat(q.substr(t+8,2))>3),g=d&&parseFloat(q.substr(q.indexOf("Version/")+8,2))<6,u=-1!==q.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(q)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(q))&&(m=parseFloat(RegExp.$1)),!!e&&(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity))}(),Y=function(t){return P.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},z=function(t){_gsScope.console&&console.log(t)},K="",Q="",Z=function(t,e){var i,n,o=(e=e||X).style;if(void 0!==o[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],n=5;--n>-1&&void 0===o[i[n]+t];);return n>=0?(Q=3===n?"ms":i[n],K="-"+Q.toLowerCase()+"-",Q+t):null},J=N.defaultView?N.defaultView.getComputedStyle:function(){},$=s.getStyle=function(t,e,i,n,o){var a;return j||"opacity"!==e?(!n&&t.style[e]?a=t.style[e]:(i=i||J(t))?a=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(T,"-$1").toLowerCase()):t.currentStyle&&(a=t.currentStyle[e]),null==o||a&&"none"!==a&&"auto"!==a&&"auto auto"!==a?a:o):Y(t)},tt=W.convertToPixels=function(t,i,n,o,a){if("px"===o||!o)return n;if("auto"===o||!n)return 0;var r,h,l,p=B.test(i),c=t,d=X.style,u=n<0,g=1===n;if(u&&(n=-n),g&&(n*=100),"%"===o&&-1!==i.indexOf("border"))r=n/100*(p?t.clientWidth:t.clientHeight);else{if(d.cssText="border:0 solid red;position:"+$(t,"position")+";line-height:0;","%"!==o&&c.appendChild&&"v"!==o.charAt(0)&&"rem"!==o)d[p?"borderLeftWidth":"borderTopWidth"]=n+o;else{if(c=t.parentNode||N.body,h=c._gsCache,l=e.ticker.frame,h&&p&&h.time===l)return h.width*n/100;d[p?"width":"height"]=n+o}c.appendChild(X),r=parseFloat(X[p?"offsetWidth":"offsetHeight"]),c.removeChild(X),p&&"%"===o&&!1!==s.cacheWidths&&((h=c._gsCache=c._gsCache||{}).time=l,h.width=r/n*100),0!==r||a||(r=tt(t,i,n,o,!0))}return g&&(r/=100),u?-r:r},et=W.calculateOffset=function(t,e,i){if("absolute"!==$(t,"position",i))return 0;var n="left"===e?"Left":"Top",o=$(t,"margin"+n,i);return t["offset"+n]-(tt(t,e,parseFloat(o),o.replace(x,""))||0)},it=function(t,e){var i,n,o,a={};if(e=e||J(t,null))if(i=e.length)for(;--i>-1;)-1!==(o=e[i]).indexOf("-transform")&&Ct!==o||(a[o.replace(M,I)]=e.getPropertyValue(o));else for(i in e)-1!==i.indexOf("Transform")&&Mt!==i||(a[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===a[i]&&(a[i.replace(M,I)]=e[i]);return j||(a.opacity=Y(t)),n=Vt(t,e,!1),a.rotation=n.rotation,a.skewX=n.skewX,a.scaleX=n.scaleX,a.scaleY=n.scaleY,a.x=n.x,a.y=n.y,Bt&&(a.z=n.z,a.rotationX=n.rotationX,a.rotationY=n.rotationY,a.scaleZ=n.scaleZ),a.filters&&delete a.filters,a},nt=function(t,e,i,n,o){var a,s,r,h={},l=t.style;for(s in i)"cssText"!==s&&"length"!==s&&isNaN(s)&&(e[s]!==(a=i[s])||o&&o[s])&&-1===s.indexOf("Origin")&&("number"!=typeof a&&"string"!=typeof a||(h[s]="auto"!==a||"left"!==s&&"top"!==s?""!==a&&"auto"!==a&&"none"!==a||"string"!=typeof e[s]||""===e[s].replace(S,"")?a:0:et(t,s),void 0!==l[s]&&(r=new vt(l,s,l[s],r))));if(n)for(s in n)"className"!==s&&(h[s]=n[s]);return{difs:h,firstMPT:r}},ot={width:["Left","Right"],height:["Top","Bottom"]},at=["marginLeft","marginRight","marginTop","marginBottom"],st=function(t,e,i){if("svg"===(t.nodeName+"").toLowerCase())return(i||J(t))[e]||0;if(t.getCTM&&Nt(t))return t.getBBox()[e]||0;var n=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),o=ot[e],a=o.length;for(i=i||J(t,null);--a>-1;)n-=parseFloat($(t,"padding"+o[a],i,!0))||0,n-=parseFloat($(t,"border"+o[a]+"Width",i,!0))||0;return n},rt=function(t,e){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";null!=t&&""!==t||(t="0 0");var i,n=t.split(" "),o=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":n[0],a=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":n[1];if(n.length>3&&!e){for(n=t.split(", ").join(",").split(","),t=[],i=0;i<n.length;i++)t.push(rt(n[i]));return t.join(",")}return null==a?a="center"===o?"50%":"0":"center"===a&&(a="50%"),("center"===o||isNaN(parseFloat(o))&&-1===(o+"").indexOf("="))&&(o="50%"),t=o+" "+a+(n.length>2?" "+n[2]:""),e&&(e.oxp=-1!==o.indexOf("%"),e.oyp=-1!==a.indexOf("%"),e.oxr="="===o.charAt(1),e.oyr="="===a.charAt(1),e.ox=parseFloat(o.replace(S,"")),e.oy=parseFloat(a.replace(S,"")),e.v=t),e||t},ht=function(t,e){return"function"==typeof t&&(t=t(y,f)),"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)||0},lt=function(t,e){return"function"==typeof t&&(t=t(y,f)),null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)||0},pt=function(t,e,i,n){var o,a,s,r,h;return"function"==typeof t&&(t=t(y,f)),null==t?r=e:"number"==typeof t?r=t:(o=360,a=t.split("_"),s=((h="="===t.charAt(1))?parseInt(t.charAt(0)+"1",10)*parseFloat(a[0].substr(2)):parseFloat(a[0]))*(-1===t.indexOf("rad")?1:R)-(h?0:e),a.length&&(n&&(n[i]=e+s),-1!==t.indexOf("short")&&(s%=o)!==s%(o/2)&&(s=s<0?s+o:s-o),-1!==t.indexOf("_cw")&&s<0?s=(s+9999999999*o)%o-(s/o|0)*o:-1!==t.indexOf("ccw")&&s>0&&(s=(s-9999999999*o)%o-(s/o|0)*o)),r=e+s),r<1e-6&&r>-1e-6&&(r=0),r},ct={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},dt=function(t,e,i){return 255*(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)+.5|0},ut=s.parseColor=function(t,e){var i,n,o,a,s,r,h,l,p,c,d;if(t)if("number"==typeof t)i=[t>>16,t>>8&255,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),ct[t])i=ct[t];else if("#"===t.charAt(0))4===t.length&&(t="#"+(n=t.charAt(1))+n+(o=t.charAt(2))+o+(a=t.charAt(3))+a),i=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(i=d=t.match(v),e){if(-1!==t.indexOf("="))return t.match(b)}else s=Number(i[0])%360/360,r=Number(i[1])/100,n=2*(h=Number(i[2])/100)-(o=h<=.5?h*(r+1):h+r-h*r),i.length>3&&(i[3]=Number(t[3])),i[0]=dt(s+1/3,n,o),i[1]=dt(s,n,o),i[2]=dt(s-1/3,n,o);else i=t.match(v)||ct.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),i.length>3&&(i[3]=Number(i[3]))}else i=ct.black;return e&&!d&&(n=i[0]/255,o=i[1]/255,a=i[2]/255,h=((l=Math.max(n,o,a))+(p=Math.min(n,o,a)))/2,l===p?s=r=0:(c=l-p,r=h>.5?c/(2-l-p):c/(l+p),s=l===n?(o-a)/c+(o<a?6:0):l===o?(a-n)/c+2:(n-o)/c+4,s*=60),i[0]=s+.5|0,i[1]=100*r+.5|0,i[2]=100*h+.5|0),i},gt=function(t,e){var i,n,o,a=t.match(mt)||[],s=0,r=a.length?"":t;for(i=0;i<a.length;i++)n=a[i],s+=(o=t.substr(s,t.indexOf(n,s)-s)).length+n.length,3===(n=ut(n,e)).length&&n.push(1),r+=o+(e?"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+n[3]:"rgba("+n.join(","))+")";return r+t.substr(s)},mt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(l in ct)mt+="|"+l+"\\b";mt=new RegExp(mt+")","gi"),s.colorStringFilter=function(t){var e,i=t[0]+t[1];mt.test(i)&&(e=-1!==i.indexOf("hsl(")||-1!==i.indexOf("hsla("),t[0]=gt(t[0],e),t[1]=gt(t[1],e)),mt.lastIndex=0},e.defaultStringFilter||(e.defaultStringFilter=s.colorStringFilter);var ft=function(t,e,i,n){if(null==t)return function(t){return t};var o,a=e?(t.match(mt)||[""])[0]:"",s=t.split(a).join("").match(w)||[],r=t.substr(0,t.indexOf(s[0])),h=")"===t.charAt(t.length-1)?")":"",l=-1!==t.indexOf(" ")?" ":",",p=s.length,c=p>0?s[0].replace(v,""):"";return p?o=e?function(t){var e,d,u,g;if("number"==typeof t)t+=c;else if(n&&E.test(t)){for(g=t.replace(E,"|").split("|"),u=0;u<g.length;u++)g[u]=o(g[u]);return g.join(",")}if(e=(t.match(mt)||[a])[0],d=t.split(e).join("").match(w)||[],u=d.length,p>u--)for(;++u<p;)d[u]=i?d[(u-1)/2|0]:s[u];return r+d.join(l)+l+e+h+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,a,d;if("number"==typeof t)t+=c;else if(n&&E.test(t)){for(a=t.replace(E,"|").split("|"),d=0;d<a.length;d++)a[d]=o(a[d]);return a.join(",")}if(e=t.match(w)||[],d=e.length,p>d--)for(;++d<p;)e[d]=i?e[(d-1)/2|0]:s[d];return r+e.join(l)+h}:function(t){return t}},yt=function(t){return t=t.split(","),function(e,i,n,o,a,s,r){var h,l=(i+"").split(" ");for(r={},h=0;h<4;h++)r[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return o.parse(e,r,a,s)}},vt=(W._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,n,o,a,s=this.data,r=s.proxy,h=s.firstMPT;h;)e=r[h.v],h.r?e=Math.round(e):e<1e-6&&e>-1e-6&&(e=0),h.t[h.p]=e,h=h._next;if(s.autoRotate&&(s.autoRotate.rotation=s.mod?s.mod(r.rotation,this.t):r.rotation),1===t||0===t)for(h=s.firstMPT,a=1===t?"e":"b";h;){if((i=h.t).type){if(1===i.type){for(o=i.xs0+i.s+i.xs1,n=1;n<i.l;n++)o+=i["xn"+n]+i["xs"+(n+1)];i[a]=o}}else i[a]=i.s+i.xs0;h=h._next}},function(t,e,i,n,o){this.t=t,this.p=e,this.v=i,this.r=o,n&&(n._prev=this,this._next=n)}),bt=(W._parseToProxy=function(t,e,i,n,o,a){var s,r,h,l,p,c=n,d={},u={},g=i._transform,m=H;for(i._transform=null,H=e,n=p=i.parse(t,e,n,o),H=m,a&&(i._transform=g,c&&(c._prev=null,c._prev&&(c._prev._next=null)));n&&n!==c;){if(n.type<=1&&(r=n.p,u[r]=n.s+n.c,d[r]=n.s,a||(l=new vt(n,"s",r,l,n.r),n.c=0),1===n.type))for(s=n.l;--s>0;)h="xn"+s,u[r=n.p+"_"+h]=n.data[h],d[r]=n[h],a||(l=new vt(n,h,r,l,n.rxp[h]));n=n._next}return{proxy:d,end:u,firstMPT:l,pt:p}},W.CSSPropTween=function(t,e,n,o,s,r,h,l,p,c,d){this.t=t,this.p=e,this.s=n,this.c=o,this.n=h||e,t instanceof bt||a.push(this.n),this.r=l,this.type=r||0,p&&(this.pr=p,i=!0),this.b=void 0===c?n:c,this.e=void 0===d?n+o:d,s&&(this._next=s,s._prev=this)}),wt=function(t,e,i,n,o,a){var s=new bt(t,e,i,n-i,o,-1,a);return s.b=i,s.e=s.xs0=n,s},St=s.parseComplex=function(t,e,i,n,o,a,r,h,l,c){i=i||a||"","function"==typeof n&&(n=n(y,f)),r=new bt(t,e,0,0,r,c?2:1,null,!1,h,i,n),n+="",o&&mt.test(n+i)&&(n=[i,n],s.colorStringFilter(n),i=n[0],n=n[1]);var d,u,g,m,w,S,x,P,_,k,A,T,M,C=i.split(", ").join(",").split(" "),I=n.split(", ").join(",").split(" "),B=C.length,G=!1!==p;for(-1===n.indexOf(",")&&-1===i.indexOf(",")||(C=C.join(" ").replace(E,", ").split(" "),I=I.join(" ").replace(E,", ").split(" "),B=C.length),B!==I.length&&(B=(C=(a||"").split(" ")).length),r.plugin=l,r.setRatio=c,mt.lastIndex=0,d=0;d<B;d++)if(m=C[d],w=I[d],(P=parseFloat(m))||0===P)r.appendXtra("",P,ht(w,P),w.replace(b,""),G&&-1!==w.indexOf("px"),!0);else if(o&&mt.test(m))T=")"+((T=w.indexOf(")")+1)?w.substr(T):""),M=-1!==w.indexOf("hsl")&&j,m=ut(m,M),w=ut(w,M),(_=m.length+w.length>6)&&!j&&0===w[3]?(r["xs"+r.l]+=r.l?" transparent":"transparent",r.e=r.e.split(I[d]).join("transparent")):(j||(_=!1),M?r.appendXtra(_?"hsla(":"hsl(",m[0],ht(w[0],m[0]),",",!1,!0).appendXtra("",m[1],ht(w[1],m[1]),"%,",!1).appendXtra("",m[2],ht(w[2],m[2]),_?"%,":"%"+T,!1):r.appendXtra(_?"rgba(":"rgb(",m[0],w[0]-m[0],",",!0,!0).appendXtra("",m[1],w[1]-m[1],",",!0).appendXtra("",m[2],w[2]-m[2],_?",":T,!0),_&&(m=m.length<4?1:m[3],r.appendXtra("",m,(w.length<4?1:w[3])-m,T,!1))),mt.lastIndex=0;else if(S=m.match(v)){if(!(x=w.match(b))||x.length!==S.length)return r;for(g=0,u=0;u<S.length;u++)A=S[u],k=m.indexOf(A,g),r.appendXtra(m.substr(g,k-g),Number(A),ht(x[u],A),"",G&&"px"===m.substr(k+A.length,2),0===u),g=k+A.length;r["xs"+r.l]+=m.substr(g)}else r["xs"+r.l]+=r.l||r["xs"+r.l]?" "+w:w;if(-1!==n.indexOf("=")&&r.data){for(T=r.xs0+r.data.s,d=1;d<r.l;d++)T+=r["xs"+d]+r.data["xn"+d];r.e=T+r["xs"+d]}return r.l||(r.type=-1,r.xs0=r.e),r.xfirst||r},xt=9;for((l=bt.prototype).l=l.pr=0;--xt>0;)l["xn"+xt]=0,l["xs"+xt]="";l.xs0="",l._next=l._prev=l.xfirst=l.data=l.plugin=l.setRatio=l.rxp=null,l.appendXtra=function(t,e,i,n,o,a){var s=this,r=s.l;return s["xs"+r]+=a&&(r||s["xs"+r])?" "+t:t||"",i||0===r||s.plugin?(s.l++,s.type=s.setRatio?2:1,s["xs"+s.l]=n||"",r>0?(s.data["xn"+r]=e+i,s.rxp["xn"+r]=o,s["xn"+r]=e,s.plugin||(s.xfirst=new bt(s,"xn"+r,e,i,s.xfirst||s,0,s.n,o,s.pr),s.xfirst.xs0=0),s):(s.data={s:e+i},s.rxp={},s.s=e,s.c=i,s.r=o,s)):(s["xs"+r]+=e+(n||""),s)};var Pt=function(t,e){e=e||{},this.p=e.prefix?Z(t)||t:t,h[t]=h[this.p]=this,this.format=e.formatter||ft(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},_t=W._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var n,o=t.split(","),a=e.defaultValue;for(i=i||[a],n=0;n<o.length;n++)e.prefix=0===n&&e.prefix,e.defaultValue=i[n]||a,new Pt(o[n],e)},kt=W._registerPluginProp=function(t){if(!h[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";_t(t,{parser:function(t,i,n,o,a,s,l){var p=r.com.greensock.plugins[e];return p?(p._cssRegister(),h[n].parse(t,i,n,o,a,s,l)):(z("Error: "+e+" js file not loaded."),a)}})}};(l=Pt.prototype).parseComplex=function(t,e,i,n,o,a){var s,r,h,l,p,c,d=this.keyword;if(this.multi&&(E.test(i)||E.test(e)?(r=e.replace(E,"|").split("|"),h=i.replace(E,"|").split("|")):d&&(r=[e],h=[i])),h){for(l=h.length>r.length?h.length:r.length,s=0;s<l;s++)e=r[s]=r[s]||this.dflt,i=h[s]=h[s]||this.dflt,d&&(p=e.indexOf(d))!==(c=i.indexOf(d))&&(-1===c?r[s]=r[s].split(d).join(""):-1===p&&(r[s]+=" "+d));e=r.join(", "),i=h.join(", ")}return St(t,this.p,e,i,this.clrs,this.dflt,n,this.pr,o,a)},l.parse=function(t,e,i,n,a,s,r){return this.parseComplex(t.style,this.format($(t,this.p,o,!1,this.dflt)),this.format(e),a,s)},s.registerSpecialProp=function(t,e,i){_t(t,{parser:function(t,n,o,a,s,r,h){var l=new bt(t,o,0,0,s,2,o,!1,i);return l.plugin=r,l.setRatio=e(t,n,a._tween,o),l},priority:i})},s.useSVGTransformAttr=!0;var At,Tt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Mt=Z("transform"),Ct=K+"transform",It=Z("transformOrigin"),Bt=null!==Z("perspective"),Gt=W.Transform=function(){this.perspective=parseFloat(s.defaultTransformPerspective)||0,this.force3D=!(!1===s.defaultForce3D||!Bt)&&(s.defaultForce3D||"auto")},Lt=_gsScope.SVGElement,Et=function(t,e,i){var n,o=N.createElementNS("http://www.w3.org/2000/svg",t),a=/([a-z])([A-Z])/g;for(n in i)o.setAttributeNS(null,n.replace(a,"$1-$2").toLowerCase(),i[n]);return e.appendChild(o),o},Ot=N.documentElement||{},Dt=function(){var t,e,i,n=m||/Android/i.test(q)&&!_gsScope.chrome;return N.createElementNS&&!n&&(t=Et("svg",Ot),i=(e=Et("rect",t,{width:100,height:50,x:100})).getBoundingClientRect().width,e.style[It]="50% 50%",e.style[Mt]="scaleX(0.5)",n=i===e.getBoundingClientRect().width&&!(u&&Bt),Ot.removeChild(t)),n}(),Rt=function(t,e,i,n,o,a){var r,h,l,p,c,d,u,g,m,f,y,v,b,w,S=t._gsTransform,x=Xt(t,!0);S&&(b=S.xOrigin,w=S.yOrigin),(!n||(r=n.split(" ")).length<2)&&(0===(u=t.getBBox()).x&&0===u.y&&u.width+u.height===0&&(u={x:parseFloat(t.hasAttribute("x")?t.getAttribute("x"):t.hasAttribute("cx")?t.getAttribute("cx"):0)||0,y:parseFloat(t.hasAttribute("y")?t.getAttribute("y"):t.hasAttribute("cy")?t.getAttribute("cy"):0)||0,width:0,height:0}),r=[(-1!==(e=rt(e).split(" "))[0].indexOf("%")?parseFloat(e[0])/100*u.width:parseFloat(e[0]))+u.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*u.height:parseFloat(e[1]))+u.y]),i.xOrigin=p=parseFloat(r[0]),i.yOrigin=c=parseFloat(r[1]),n&&x!==Ut&&(d=x[0],u=x[1],g=x[2],m=x[3],f=x[4],y=x[5],(v=d*m-u*g)&&(h=p*(m/v)+c*(-g/v)+(g*y-m*f)/v,l=p*(-u/v)+c*(d/v)-(d*y-u*f)/v,p=i.xOrigin=r[0]=h,c=i.yOrigin=r[1]=l)),S&&(a&&(i.xOffset=S.xOffset,i.yOffset=S.yOffset,S=i),o||!1!==o&&!1!==s.defaultSmoothOrigin?(h=p-b,l=c-w,S.xOffset+=h*x[0]+l*x[2]-h,S.yOffset+=h*x[1]+l*x[3]-l):S.xOffset=S.yOffset=0),a||t.setAttribute("data-svg-origin",r.join(" "))},Ht=function(t){var e,i=U("svg",this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,o=this.nextSibling,a=this.style.cssText;if(Ot.appendChild(i),i.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Ht}catch(t){}else this._originalGetBBox&&(e=this._originalGetBBox());return o?n.insertBefore(this,o):n.appendChild(this),Ot.removeChild(i),this.style.cssText=a,e},Ft=function(t){try{return t.getBBox()}catch(e){return Ht.call(t,!0)}},Nt=function(t){return!(!(Lt&&t.getCTM&&Ft(t))||t.parentNode&&!t.ownerSVGElement)},Ut=[1,0,0,1,0,0],Xt=function(t,e){var i,n,o,a,s,r,h=t._gsTransform||new Gt,l=t.style;if(Mt?n=$(t,Ct,null,!0):t.currentStyle&&(n=(n=t.currentStyle.filter.match(G))&&4===n.length?[n[0].substr(4),Number(n[2].substr(4)),Number(n[1].substr(4)),n[3].substr(4),h.x||0,h.y||0].join(","):""),(i=!n||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n)&&Mt&&((r="none"===J(t).display)||!t.parentNode)&&(r&&(a=l.display,l.display="block"),t.parentNode||(s=1,Ot.appendChild(t)),i=!(n=$(t,Ct,null,!0))||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,a?l.display=a:r&&Yt(l,"display"),s&&Ot.removeChild(t)),(h.svg||t.getCTM&&Nt(t))&&(i&&-1!==(l[Mt]+"").indexOf("matrix")&&(n=l[Mt],i=0),o=t.getAttribute("transform"),i&&o&&(-1!==o.indexOf("matrix")?(n=o,i=0):-1!==o.indexOf("translate")&&(n="matrix(1,0,0,1,"+o.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",i=0))),i)return Ut;for(o=(n||"").match(v)||[],xt=o.length;--xt>-1;)a=Number(o[xt]),o[xt]=(s=a-(a|=0))?(1e5*s+(s<0?-.5:.5)|0)/1e5+a:a;return e&&o.length>6?[o[0],o[1],o[4],o[5],o[12],o[13]]:o},Vt=W.getTransform=function(t,i,n,o){if(t._gsTransform&&n&&!o)return t._gsTransform;var a,r,h,l,p,c,d=n?t._gsTransform||new Gt:new Gt,u=d.scaleX<0,g=Bt?parseFloat($(t,It,i,!1,"0 0 0").split(" ")[2])||d.zOrigin||0:0,m=parseFloat(s.defaultTransformPerspective)||0;if(d.svg=!(!t.getCTM||!Nt(t)),d.svg&&(Rt(t,$(t,It,i,!1,"50% 50%")+"",d,t.getAttribute("data-svg-origin")),At=s.useSVGTransformAttr||Dt),(a=Xt(t))!==Ut){if(16===a.length){var f,y,v,b,w,S=a[0],x=a[1],P=a[2],_=a[3],k=a[4],A=a[5],T=a[6],M=a[7],C=a[8],I=a[9],B=a[10],G=a[12],L=a[13],E=a[14],O=a[11],D=Math.atan2(T,B);d.zOrigin&&(G=C*(E=-d.zOrigin)-a[12],L=I*E-a[13],E=B*E+d.zOrigin-a[14]),d.rotationX=D*R,D&&(f=k*(b=Math.cos(-D))+C*(w=Math.sin(-D)),y=A*b+I*w,v=T*b+B*w,C=k*-w+C*b,I=A*-w+I*b,B=T*-w+B*b,O=M*-w+O*b,k=f,A=y,T=v),D=Math.atan2(-P,B),d.rotationY=D*R,D&&(y=x*(b=Math.cos(-D))-I*(w=Math.sin(-D)),v=P*b-B*w,I=x*w+I*b,B=P*w+B*b,O=_*w+O*b,S=f=S*b-C*w,x=y,P=v),D=Math.atan2(x,S),d.rotation=D*R,D&&(S=S*(b=Math.cos(-D))+k*(w=Math.sin(-D)),y=x*b+A*w,A=x*-w+A*b,T=P*-w+T*b,x=y),d.rotationX&&Math.abs(d.rotationX)+Math.abs(d.rotation)>359.9&&(d.rotationX=d.rotation=0,d.rotationY=180-d.rotationY),d.scaleX=(1e5*Math.sqrt(S*S+x*x)+.5|0)/1e5,d.scaleY=(1e5*Math.sqrt(A*A+I*I)+.5|0)/1e5,d.scaleZ=(1e5*Math.sqrt(T*T+B*B)+.5|0)/1e5,d.rotationX||d.rotationY?d.skewX=0:(d.skewX=k||A?Math.atan2(k,A)*R+d.rotation:d.skewX||0,Math.abs(d.skewX)>90&&Math.abs(d.skewX)<270&&(u?(d.scaleX*=-1,d.skewX+=d.rotation<=0?180:-180,d.rotation+=d.rotation<=0?180:-180):(d.scaleY*=-1,d.skewX+=d.skewX<=0?180:-180))),d.perspective=O?1/(O<0?-O:O):0,d.x=G,d.y=L,d.z=E,d.svg&&(d.x-=d.xOrigin-(d.xOrigin*S-d.yOrigin*k),d.y-=d.yOrigin-(d.yOrigin*x-d.xOrigin*A))}else if(!Bt||o||!a.length||d.x!==a[4]||d.y!==a[5]||!d.rotationX&&!d.rotationY){var H=a.length>=6,F=H?a[0]:1,N=a[1]||0,U=a[2]||0,X=H?a[3]:1;d.x=a[4]||0,d.y=a[5]||0,h=Math.sqrt(F*F+N*N),l=Math.sqrt(X*X+U*U),p=F||N?Math.atan2(N,F)*R:d.rotation||0,c=U||X?Math.atan2(U,X)*R+p:d.skewX||0,Math.abs(c)>90&&Math.abs(c)<270&&(u?(h*=-1,c+=p<=0?180:-180,p+=p<=0?180:-180):(l*=-1,c+=c<=0?180:-180)),d.scaleX=h,d.scaleY=l,d.rotation=p,d.skewX=c,Bt&&(d.rotationX=d.rotationY=d.z=0,d.perspective=m,d.scaleZ=1),d.svg&&(d.x-=d.xOrigin-(d.xOrigin*F+d.yOrigin*U),d.y-=d.yOrigin-(d.xOrigin*N+d.yOrigin*X))}d.zOrigin=g;for(r in d)d[r]<2e-5&&d[r]>-2e-5&&(d[r]=0)}return n&&(t._gsTransform=d,d.svg&&(At&&t.style[Mt]?e.delayedCall(.001,function(){Yt(t.style,Mt)}):!At&&t.getAttribute("transform")&&e.delayedCall(.001,function(){t.removeAttribute("transform")}))),d},Wt=function(t){var e,i,n=this.data,o=-n.rotation*D,a=o+n.skewX*D,s=(Math.cos(o)*n.scaleX*1e5|0)/1e5,r=(Math.sin(o)*n.scaleX*1e5|0)/1e5,h=(Math.sin(a)*-n.scaleY*1e5|0)/1e5,l=(Math.cos(a)*n.scaleY*1e5|0)/1e5,p=this.t.style,c=this.t.currentStyle;if(c){i=r,r=-h,h=-i,e=c.filter,p.filter="";var d,u,g=this.t.offsetWidth,f=this.t.offsetHeight,y="absolute"!==c.position,v="progid:DXImageTransform.Microsoft.Matrix(M11="+s+", M12="+r+", M21="+h+", M22="+l,b=n.x+g*n.xPercent/100,w=n.y+f*n.yPercent/100;if(null!=n.ox&&(b+=(d=(n.oxp?g*n.ox*.01:n.ox)-g/2)-(d*s+(u=(n.oyp?f*n.oy*.01:n.oy)-f/2)*r),w+=u-(d*h+u*l)),v+=y?", Dx="+((d=g/2)-(d*s+(u=f/2)*r)+b)+", Dy="+(u-(d*h+u*l)+w)+")":", sizingMethod='auto expand')",-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?p.filter=e.replace(L,v):p.filter=v+" "+e,0!==t&&1!==t||1===s&&0===r&&0===h&&1===l&&(y&&-1===v.indexOf("Dx=0, Dy=0")||P.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&p.removeAttribute("filter")),!y){var S,_,k,A=m<8?1:-1;for(d=n.ieOffsetX||0,u=n.ieOffsetY||0,n.ieOffsetX=Math.round((g-((s<0?-s:s)*g+(r<0?-r:r)*f))/2+b),n.ieOffsetY=Math.round((f-((l<0?-l:l)*f+(h<0?-h:h)*g))/2+w),xt=0;xt<4;xt++)k=(i=-1!==(S=c[_=at[xt]]).indexOf("px")?parseFloat(S):tt(this.t,_,parseFloat(S),S.replace(x,""))||0)!==n[_]?xt<2?-n.ieOffsetX:-n.ieOffsetY:xt<2?d-n.ieOffsetX:u-n.ieOffsetY,p[_]=(n[_]=Math.round(i-k*(0===xt||2===xt?1:A)))+"px"}}},qt=W.set3DTransformRatio=W.setTransformRatio=function(t){var e,i,n,o,a,s,r,h,l,p,c,d,g,m,f,y,v,b,w,S,x,P=this.data,_=this.t.style,k=P.rotation,A=P.rotationX,T=P.rotationY,M=P.scaleX,C=P.scaleY,I=P.scaleZ,B=P.x,G=P.y,L=P.z,E=P.svg,O=P.perspective,R=P.force3D,H=P.skewY,F=P.skewX;if(H&&(F+=H,k+=H),!((1!==t&&0!==t||"auto"!==R||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&R||L||O||T||A||1!==I)||At&&E||!Bt)k||F||E?(k*=D,S=F*D,x=1e5,i=Math.cos(k)*M,a=Math.sin(k)*M,n=Math.sin(k-S)*-C,s=Math.cos(k-S)*C,S&&"simple"===P.skewType&&(e=Math.tan(S-H*D),n*=e=Math.sqrt(1+e*e),s*=e,H&&(e=Math.tan(H*D),i*=e=Math.sqrt(1+e*e),a*=e)),E&&(B+=P.xOrigin-(P.xOrigin*i+P.yOrigin*n)+P.xOffset,G+=P.yOrigin-(P.xOrigin*a+P.yOrigin*s)+P.yOffset,At&&(P.xPercent||P.yPercent)&&(f=this.t.getBBox(),B+=.01*P.xPercent*f.width,G+=.01*P.yPercent*f.height),B<(f=1e-6)&&B>-f&&(B=0),G<f&&G>-f&&(G=0)),w=(i*x|0)/x+","+(a*x|0)/x+","+(n*x|0)/x+","+(s*x|0)/x+","+B+","+G+")",E&&At?this.t.setAttribute("transform","matrix("+w):_[Mt]=(P.xPercent||P.yPercent?"translate("+P.xPercent+"%,"+P.yPercent+"%) matrix(":"matrix(")+w):_[Mt]=(P.xPercent||P.yPercent?"translate("+P.xPercent+"%,"+P.yPercent+"%) matrix(":"matrix(")+M+",0,0,"+C+","+B+","+G+")";else{if(u&&(M<(f=1e-4)&&M>-f&&(M=I=2e-5),C<f&&C>-f&&(C=I=2e-5),!O||P.z||P.rotationX||P.rotationY||(O=0)),k||F)k*=D,y=i=Math.cos(k),v=a=Math.sin(k),F&&(k-=F*D,y=Math.cos(k),v=Math.sin(k),"simple"===P.skewType&&(e=Math.tan((F-H)*D),y*=e=Math.sqrt(1+e*e),v*=e,P.skewY&&(e=Math.tan(H*D),i*=e=Math.sqrt(1+e*e),a*=e))),n=-v,s=y;else{if(!(T||A||1!==I||O||E))return void(_[Mt]=(P.xPercent||P.yPercent?"translate("+P.xPercent+"%,"+P.yPercent+"%) translate3d(":"translate3d(")+B+"px,"+G+"px,"+L+"px)"+(1!==M||1!==C?" scale("+M+","+C+")":""));i=s=1,n=a=0}p=1,o=r=h=l=c=d=0,g=O?-1/O:0,m=P.zOrigin,f=1e-6,",","0",(k=T*D)&&(y=Math.cos(k),h=-(v=Math.sin(k)),c=g*-v,o=i*v,r=a*v,p=y,g*=y,i*=y,a*=y),(k=A*D)&&(e=n*(y=Math.cos(k))+o*(v=Math.sin(k)),b=s*y+r*v,l=p*v,d=g*v,o=n*-v+o*y,r=s*-v+r*y,p*=y,g*=y,n=e,s=b),1!==I&&(o*=I,r*=I,p*=I,g*=I),1!==C&&(n*=C,s*=C,l*=C,d*=C),1!==M&&(i*=M,a*=M,h*=M,c*=M),(m||E)&&(m&&(B+=o*-m,G+=r*-m,L+=p*-m+m),E&&(B+=P.xOrigin-(P.xOrigin*i+P.yOrigin*n)+P.xOffset,G+=P.yOrigin-(P.xOrigin*a+P.yOrigin*s)+P.yOffset),B<f&&B>-f&&(B="0"),G<f&&G>-f&&(G="0"),L<f&&L>-f&&(L=0)),w=P.xPercent||P.yPercent?"translate("+P.xPercent+"%,"+P.yPercent+"%) matrix3d(":"matrix3d(",w+=(i<f&&i>-f?"0":i)+","+(a<f&&a>-f?"0":a)+","+(h<f&&h>-f?"0":h),w+=","+(c<f&&c>-f?"0":c)+","+(n<f&&n>-f?"0":n)+","+(s<f&&s>-f?"0":s),A||T||1!==I?(w+=","+(l<f&&l>-f?"0":l)+","+(d<f&&d>-f?"0":d)+","+(o<f&&o>-f?"0":o),w+=","+(r<f&&r>-f?"0":r)+","+(p<f&&p>-f?"0":p)+","+(g<f&&g>-f?"0":g)+","):w+=",0,0,0,0,1,0,",w+=B+","+G+","+L+","+(O?1+-L/O:1)+")",_[Mt]=w}};(l=Gt.prototype).x=l.y=l.z=l.skewX=l.skewY=l.rotation=l.rotationX=l.rotationY=l.zOrigin=l.xPercent=l.yPercent=l.xOffset=l.yOffset=0,l.scaleX=l.scaleY=l.scaleZ=1,_t("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,i,n,a,r,h){if(n._lastParsedTransform===h)return a;n._lastParsedTransform=h;var l,p=h.scale&&"function"==typeof h.scale?h.scale:0;"function"==typeof h[i]&&(l=h[i],h[i]=e),p&&(h.scale=p(y,t));var c,d,u,g,m,v,b,w,S,x=t._gsTransform,P=t.style,_=Tt.length,k=h,A={},T=Vt(t,o,!0,k.parseTransform),M=k.transform&&("function"==typeof k.transform?k.transform(y,f):k.transform);if(n._transform=T,M&&"string"==typeof M&&Mt)(d=X.style)[Mt]=M,d.display="block",d.position="absolute",N.body.appendChild(X),c=Vt(X,null,!1),T.svg&&(v=T.xOrigin,b=T.yOrigin,c.x-=T.xOffset,c.y-=T.yOffset,(k.transformOrigin||k.svgOrigin)&&(M={},Rt(t,rt(k.transformOrigin),M,k.svgOrigin,k.smoothOrigin,!0),v=M.xOrigin,b=M.yOrigin,c.x-=M.xOffset-T.xOffset,c.y-=M.yOffset-T.yOffset),(v||b)&&(w=Xt(X,!0),c.x-=v-(v*w[0]+b*w[2]),c.y-=b-(v*w[1]+b*w[3]))),N.body.removeChild(X),c.perspective||(c.perspective=T.perspective),null!=k.xPercent&&(c.xPercent=lt(k.xPercent,T.xPercent)),null!=k.yPercent&&(c.yPercent=lt(k.yPercent,T.yPercent));else if("object"==typeof k){if(c={scaleX:lt(null!=k.scaleX?k.scaleX:k.scale,T.scaleX),scaleY:lt(null!=k.scaleY?k.scaleY:k.scale,T.scaleY),scaleZ:lt(k.scaleZ,T.scaleZ),x:lt(k.x,T.x),y:lt(k.y,T.y),z:lt(k.z,T.z),xPercent:lt(k.xPercent,T.xPercent),yPercent:lt(k.yPercent,T.yPercent),perspective:lt(k.transformPerspective,T.perspective)},null!=(m=k.directionalRotation))if("object"==typeof m)for(d in m)k[d]=m[d];else k.rotation=m;"string"==typeof k.x&&-1!==k.x.indexOf("%")&&(c.x=0,c.xPercent=lt(k.x,T.xPercent)),"string"==typeof k.y&&-1!==k.y.indexOf("%")&&(c.y=0,c.yPercent=lt(k.y,T.yPercent)),c.rotation=pt("rotation"in k?k.rotation:"shortRotation"in k?k.shortRotation+"_short":"rotationZ"in k?k.rotationZ:T.rotation,T.rotation,"rotation",A),Bt&&(c.rotationX=pt("rotationX"in k?k.rotationX:"shortRotationX"in k?k.shortRotationX+"_short":T.rotationX||0,T.rotationX,"rotationX",A),c.rotationY=pt("rotationY"in k?k.rotationY:"shortRotationY"in k?k.shortRotationY+"_short":T.rotationY||0,T.rotationY,"rotationY",A)),c.skewX=pt(k.skewX,T.skewX),c.skewY=pt(k.skewY,T.skewY)}for(Bt&&null!=k.force3D&&(T.force3D=k.force3D,g=!0),T.skewType=k.skewType||T.skewType||s.defaultSkewType,(u=T.force3D||T.z||T.rotationX||T.rotationY||c.z||c.rotationX||c.rotationY||c.perspective)||null==k.scale||(c.scaleZ=1);--_>-1;)((M=c[S=Tt[_]]-T[S])>1e-6||M<-1e-6||null!=k[S]||null!=H[S])&&(g=!0,a=new bt(T,S,T[S],M,a),S in A&&(a.e=A[S]),a.xs0=0,a.plugin=r,n._overwriteProps.push(a.n));return M=k.transformOrigin,T.svg&&(M||k.svgOrigin)&&(v=T.xOffset,b=T.yOffset,Rt(t,rt(M),c,k.svgOrigin,k.smoothOrigin),a=wt(T,"xOrigin",(x?T:c).xOrigin,c.xOrigin,a,"transformOrigin"),a=wt(T,"yOrigin",(x?T:c).yOrigin,c.yOrigin,a,"transformOrigin"),v===T.xOffset&&b===T.yOffset||(a=wt(T,"xOffset",x?v:T.xOffset,T.xOffset,a,"transformOrigin"),a=wt(T,"yOffset",x?b:T.yOffset,T.yOffset,a,"transformOrigin")),M="0px 0px"),(M||Bt&&u&&T.zOrigin)&&(Mt?(g=!0,S=It,M=(M||$(t,S,o,!1,"50% 50%"))+"",(a=new bt(P,S,0,0,a,-1,"transformOrigin")).b=P[S],a.plugin=r,Bt?(d=T.zOrigin,M=M.split(" "),T.zOrigin=(M.length>2&&(0===d||"0px"!==M[2])?parseFloat(M[2]):d)||0,a.xs0=a.e=M[0]+" "+(M[1]||"50%")+" 0px",(a=new bt(T,"zOrigin",0,0,a,-1,a.n)).b=d,a.xs0=a.e=T.zOrigin):a.xs0=a.e=M):rt(M+"",T)),g&&(n._transformType=T.svg&&At||!u&&3!==this._transformType?2:3),l&&(h[i]=l),p&&(h.scale=p),a},prefix:!0}),_t("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),_t("borderRadius",{defaultValue:"0px",parser:function(t,e,i,a,s,r){e=this.format(e);var h,l,p,c,d,u,g,m,f,y,v,b,w,S,x,P,_=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],k=t.style;for(f=parseFloat(t.offsetWidth),y=parseFloat(t.offsetHeight),h=e.split(" "),l=0;l<_.length;l++)this.p.indexOf("border")&&(_[l]=Z(_[l])),-1!==(d=c=$(t,_[l],o,!1,"0px")).indexOf(" ")&&(d=(c=d.split(" "))[0],c=c[1]),u=p=h[l],g=parseFloat(d),b=d.substr((g+"").length),(w="="===u.charAt(1))?(m=parseInt(u.charAt(0)+"1",10),u=u.substr(2),m*=parseFloat(u),v=u.substr((m+"").length-(m<0?1:0))||""):(m=parseFloat(u),v=u.substr((m+"").length)),""===v&&(v=n[i]||b),v!==b&&(S=tt(t,"borderLeft",g,b),x=tt(t,"borderTop",g,b),"%"===v?(d=S/f*100+"%",c=x/y*100+"%"):"em"===v?(d=S/(P=tt(t,"borderLeft",1,"em"))+"em",c=x/P+"em"):(d=S+"px",c=x+"px"),w&&(u=parseFloat(d)+m+v,p=parseFloat(c)+m+v)),s=St(k,_[l],d+" "+c,u+" "+p,!1,"0px",s);return s},prefix:!0,formatter:ft("0px 0px 0px 0px",!1,!0)}),_t("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(t,e,i,n,a,s){return St(t.style,i,this.format($(t,i,o,!1,"0px 0px")),this.format(e),!1,"0px",a)},prefix:!0,formatter:ft("0px 0px",!1,!0)}),_t("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,n,a,s){var r,h,l,p,c,d,u="background-position",g=o||J(t,null),f=this.format((g?m?g.getPropertyValue(u+"-x")+" "+g.getPropertyValue(u+"-y"):g.getPropertyValue(u):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),y=this.format(e);if(-1!==f.indexOf("%")!=(-1!==y.indexOf("%"))&&y.split(",").length<2&&(d=$(t,"backgroundImage").replace(C,""))&&"none"!==d){for(r=f.split(" "),h=y.split(" "),V.setAttribute("src",d),l=2;--l>-1;)(p=-1!==(f=r[l]).indexOf("%"))!==(-1!==h[l].indexOf("%"))&&(c=0===l?t.offsetWidth-V.width:t.offsetHeight-V.height,r[l]=p?parseFloat(f)/100*c+"px":parseFloat(f)/c*100+"%");f=r.join(" ")}return this.parseComplex(t.style,f,y,a,s)},formatter:rt}),_t("backgroundSize",{defaultValue:"0 0",formatter:function(t){return t+="",rt(-1===t.indexOf(" ")?t+" "+t:t)}}),_t("perspective",{defaultValue:"0px",prefix:!0}),_t("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),_t("transformStyle",{prefix:!0}),_t("backfaceVisibility",{prefix:!0}),_t("userSelect",{prefix:!0}),_t("margin",{parser:yt("marginTop,marginRight,marginBottom,marginLeft")}),_t("padding",{parser:yt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),_t("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,n,a,s){var r,h,l;return m<9?(h=t.currentStyle,l=m<8?" ":",",r="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(r=this.format($(t,this.p,o,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,r,e,a,s)}}),_t("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),_t("autoRound,strictUnits",{parser:function(t,e,i,n,o){return o}}),_t("border",{defaultValue:"0px solid #000",parser:function(t,e,i,n,a,s){var r=$(t,"borderTopWidth",o,!1,"0px"),h=this.format(e).split(" "),l=h[0].replace(x,"");return"px"!==l&&(r=parseFloat(r)/tt(t,"borderTopWidth",1,l)+l),this.parseComplex(t.style,this.format(r+" "+$(t,"borderTopStyle",o,!1,"solid")+" "+$(t,"borderTopColor",o,!1,"#000")),h.join(" "),a,s)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(mt)||["#000"])[0]}}),_t("borderWidth",{parser:yt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),_t("float,cssFloat,styleFloat",{parser:function(t,e,i,n,o,a){var s=t.style,r="cssFloat"in s?"cssFloat":"styleFloat";return new bt(s,r,0,0,o,-1,i,!1,0,s[r],e)}});var jt=function(t){var e,i=this.t,n=i.filter||$(this.data,"filter")||"",o=this.s+this.c*t|0;100===o&&(-1===n.indexOf("atrix(")&&-1===n.indexOf("radient(")&&-1===n.indexOf("oader(")?(i.removeAttribute("filter"),e=!$(this.data,"filter")):(i.filter=n.replace(k,""),e=!0)),e||(this.xn1&&(i.filter=n=n||"alpha(opacity="+o+")"),-1===n.indexOf("pacity")?0===o&&this.xn1||(i.filter=n+" alpha(opacity="+o+")"):i.filter=n.replace(P,"opacity="+o))};_t("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,n,a,s){var r=parseFloat($(t,"opacity",o,!1,"1")),h=t.style,l="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+r),l&&1===r&&"hidden"===$(t,"visibility",o)&&0!==e&&(r=0),j?a=new bt(h,"opacity",r,e-r,a):((a=new bt(h,"opacity",100*r,100*(e-r),a)).xn1=l?1:0,h.zoom=1,a.type=2,a.b="alpha(opacity="+a.s+")",a.e="alpha(opacity="+(a.s+a.c)+")",a.data=t,a.plugin=s,a.setRatio=jt),l&&((a=new bt(h,"visibility",0,0,a,-1,null,!1,0,0!==r?"inherit":"hidden",0===e?"hidden":"inherit")).xs0="inherit",n._overwriteProps.push(a.n),n._overwriteProps.push(i)),a}});var Yt=function(t,e){e&&(t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(T,"-$1").toLowerCase())):t.removeAttribute(e))},zt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Yt(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};_t("className",{parser:function(t,e,n,a,s,r,h){var l,p,c,d,u,g=t.getAttribute("class")||"",m=t.style.cssText;if(s=a._classNamePT=new bt(t,n,0,0,s,2),s.setRatio=zt,s.pr=-11,i=!0,s.b=g,p=it(t,o),c=t._gsClassPT){for(d={},u=c.data;u;)d[u.p]=1,u=u._next;c.setRatio(1)}return t._gsClassPT=s,s.e="="!==e.charAt(1)?e:g.replace(new RegExp("(?:\\s|^)"+e.substr(2)+"(?![\\w-])"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",s.e),l=nt(t,p,it(t),h,d),t.setAttribute("class",g),s.data=l.firstMPT,t.style.cssText=m,s=s.xfirst=a.parse(t,l.difs,s,r)}});var Kt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,n,o,a,s=this.t.style,r=h.transform.parse;if("all"===this.e)s.cssText="",o=!0;else for(n=(e=this.e.split(" ").join("").split(",")).length;--n>-1;)i=e[n],h[i]&&(h[i].parse===r?o=!0:i="transformOrigin"===i?It:h[i].p),Yt(s,i);o&&(Yt(s,Mt),(a=this.t._gsTransform)&&(a.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(_t("clearProps",{parser:function(t,e,n,o,a){return a=new bt(t,n,0,0,a,2),a.setRatio=Kt,a.e=e,a.pr=-10,a.data=o._tween,i=!0,a}}),l="bezier,throwProps,physicsProps,physics2D".split(","),xt=l.length;xt--;)kt(l[xt]);(l=s.prototype)._firstPT=l._lastParsedTransform=l._transform=null,l._onInitTween=function(t,e,r,l){if(!t.nodeType)return!1;this._target=f=t,this._tween=r,this._vars=e,y=l,p=e.autoRound,i=!1,n=e.suffixMap||s.suffixMap,o=J(t,""),a=this._overwriteProps;var u,m,v,b,w,S,x,P,k,A=t.style;if(c&&""===A.zIndex&&("auto"!==(u=$(t,"zIndex",o))&&""!==u||this._addLazySet(A,"zIndex",0)),"string"==typeof e&&(b=A.cssText,u=it(t,o),A.cssText=b+";"+e,u=nt(t,u,it(t)).difs,!j&&_.test(e)&&(u.opacity=parseFloat(RegExp.$1)),e=u,A.cssText=b),e.className?this._firstPT=m=h.className.parse(t,e.className,"className",this,null,null,e):this._firstPT=m=this.parse(t,e,null),this._transformType){for(k=3===this._transformType,Mt?d&&(c=!0,""===A.zIndex&&("auto"!==(x=$(t,"zIndex",o))&&""!==x||this._addLazySet(A,"zIndex",0)),g&&this._addLazySet(A,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(k?"visible":"hidden"))):A.zoom=1,v=m;v&&v._next;)v=v._next;P=new bt(t,"transform",0,0,null,2),this._linkCSSP(P,null,v),P.setRatio=Mt?qt:Wt,P.data=this._transform||Vt(t,o,!0),P.tween=r,P.pr=-1,a.pop()}if(i){for(;m;){for(S=m._next,v=b;v&&v.pr>m.pr;)v=v._next;(m._prev=v?v._prev:w)?m._prev._next=m:b=m,(m._next=v)?v._prev=m:w=m,m=S}this._firstPT=b}return!0},l.parse=function(t,e,i,a){var s,r,l,c,d,u,g,m,v,b,w=t.style;for(s in e)"function"==typeof(u=e[s])&&(u=u(y,f)),(r=h[s])?i=r.parse(t,u,s,this,i,a,e):(d=$(t,s,o)+"",v="string"==typeof u,"color"===s||"fill"===s||"stroke"===s||-1!==s.indexOf("Color")||v&&A.test(u)?(v||(u=((u=ut(u)).length>3?"rgba(":"rgb(")+u.join(",")+")"),i=St(w,s,d,u,!0,"transparent",i,0,a)):v&&O.test(u)?i=St(w,s,d,u,!0,null,i,0,a):(g=(l=parseFloat(d))||0===l?d.substr((l+"").length):"",""!==d&&"auto"!==d||("width"===s||"height"===s?(l=st(t,s,o),g="px"):"left"===s||"top"===s?(l=et(t,s,o),g="px"):(l="opacity"!==s?0:1,g="")),(b=v&&"="===u.charAt(1))?(c=parseInt(u.charAt(0)+"1",10),u=u.substr(2),c*=parseFloat(u),m=u.replace(x,"")):(c=parseFloat(u),m=v?u.replace(x,""):""),""===m&&(m=s in n?n[s]:g),u=c||0===c?(b?c+l:c)+m:e[s],g!==m&&""!==m&&(c||0===c)&&l&&(l=tt(t,s,l,g),"%"===m?(l/=tt(t,s,100,"%")/100,!0!==e.strictUnits&&(d=l+"%")):"em"===m||"rem"===m||"vw"===m||"vh"===m?l/=tt(t,s,1,m):"px"!==m&&(c=tt(t,s,c,m),m="px"),b&&(c||0===c)&&(u=c+l+m)),b&&(c+=l),!l&&0!==l||!c&&0!==c?void 0!==w[s]&&(u||u+""!="NaN"&&null!=u)?(i=new bt(w,s,c||l||0,0,i,-1,s,!1,0,d,u)).xs0="none"!==u||"display"!==s&&-1===s.indexOf("Style")?u:d:z("invalid "+s+" tween value: "+e[s]):(i=new bt(w,s,l,c-l,i,0,s,!1!==p&&("px"===m||"zIndex"===s),0,d,u)).xs0=m)),a&&i&&!i.plugin&&(i.plugin=a);return i},l.setRatio=function(t){var e,i,n,o=this._firstPT;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;o;){if(e=o.c*t+o.s,o.r?e=Math.round(e):e<1e-6&&e>-1e-6&&(e=0),o.type)if(1===o.type)if(2===(n=o.l))o.t[o.p]=o.xs0+e+o.xs1+o.xn1+o.xs2;else if(3===n)o.t[o.p]=o.xs0+e+o.xs1+o.xn1+o.xs2+o.xn2+o.xs3;else if(4===n)o.t[o.p]=o.xs0+e+o.xs1+o.xn1+o.xs2+o.xn2+o.xs3+o.xn3+o.xs4;else if(5===n)o.t[o.p]=o.xs0+e+o.xs1+o.xn1+o.xs2+o.xn2+o.xs3+o.xn3+o.xs4+o.xn4+o.xs5;else{for(i=o.xs0+e+o.xs1,n=1;n<o.l;n++)i+=o["xn"+n]+o["xs"+(n+1)];o.t[o.p]=i}else-1===o.type?o.t[o.p]=o.xs0:o.setRatio&&o.setRatio(t);else o.t[o.p]=e+o.xs0;o=o._next}else for(;o;)2!==o.type?o.t[o.p]=o.b:o.setRatio(t),o=o._next;else for(;o;){if(2!==o.type)if(o.r&&-1!==o.type)if(e=Math.round(o.s+o.c),o.type){if(1===o.type){for(n=o.l,i=o.xs0+e+o.xs1,n=1;n<o.l;n++)i+=o["xn"+n]+o["xs"+(n+1)];o.t[o.p]=i}}else o.t[o.p]=e+o.xs0;else o.t[o.p]=o.e;else o.setRatio(t);o=o._next}},l._enableTransforms=function(t){this._transform=this._transform||Vt(this._target,o,!0),this._transformType=this._transform.svg&&At||!t&&3!==this._transformType?2:3};var Qt=function(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};l._addLazySet=function(t,e,i){var n=this._firstPT=new bt(t,e,0,0,this._firstPT,2);n.e=i,n.setRatio=Qt,n.data=this},l._linkCSSP=function(t,e,i,n){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,n=!0),i?i._next=t:n||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},l._mod=function(t){for(var e=this._firstPT;e;)"function"==typeof t[e.p]&&t[e.p]===Math.round&&(e.r=1),e=e._next},l._kill=function(e){var i,n,o,a=e;if(e.autoAlpha||e.alpha){a={};for(n in e)a[n]=e[n];a.opacity=1,a.autoAlpha&&(a.visibility=1)}for(e.className&&(i=this._classNamePT)&&((o=i.xfirst)&&o._prev?this._linkCSSP(o._prev,i._next,o._prev._prev):o===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,o._prev),this._classNamePT=null),i=this._firstPT;i;)i.plugin&&i.plugin!==n&&i.plugin._kill&&(i.plugin._kill(e),n=i.plugin),i=i._next;return t.prototype._kill.call(this,a)};var Zt=function(t,e,i){var n,o,a,s;if(t.slice)for(o=t.length;--o>-1;)Zt(t[o],e,i);else for(o=(n=t.childNodes).length;--o>-1;)s=(a=n[o]).type,a.style&&(e.push(it(a)),i&&i.push(a)),1!==s&&9!==s&&11!==s||!a.childNodes.length||Zt(a,e,i)};return s.cascadeTo=function(t,i,n){var o,a,s,r,h=e.to(t,i,n),l=[h],p=[],c=[],d=[],u=e._internals.reservedProps;for(t=h._targets||h.target,Zt(t,p,d),h.render(i,!0,!0),Zt(t,c),h.render(0,!0,!0),h._enabled(!0),o=d.length;--o>-1;)if((a=nt(d[o],p[o],c[o])).firstMPT){a=a.difs;for(s in n)u[s]&&(a[s]=n[s]);r={};for(s in a)r[s]=p[o][s];l.push(e.fromTo(d[o],i,r,a))}return l},t.activate([s]),s},!0),function(){var t=function(t){for(;t;)t.f||t.blob||(t.m=Math.round),t=t._next},e=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}).prototype;e._onInitAllProps=function(){for(var e,i,n,o=this._tween,a=o.vars.roundProps.join?o.vars.roundProps:o.vars.roundProps.split(","),s=a.length,r={},h=o._propLookup.roundProps;--s>-1;)r[a[s]]=Math.round;for(s=a.length;--s>-1;)for(e=a[s],i=o._firstPT;i;)n=i._next,i.pg?i.t._mod(r):i.n===e&&(2===i.f&&i.t?t(i.t._firstPT):(this._add(i.t,e,i.s,i.c),n&&(n._prev=i._prev),i._prev?i._prev._next=n:o._firstPT===i&&(o._firstPT=n),i._next=i._prev=null,o._propLookup[e]=h)),i=n;return!1},e._add=function(t,e,i,n){this._addTween(t,e,i,i+n,e,Math.round),this._overwriteProps.push(e)}}(),_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.6.0",init:function(t,e,i,n){var o,a;if("function"!=typeof t.setAttribute)return!1;for(o in e)"function"==typeof(a=e[o])&&(a=a(n,t)),this._addTween(t,"setAttribute",t.getAttribute(o)+"",a+"",o,!1,o),this._overwriteProps.push(o);return!0}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.3.0",API:2,init:function(t,e,i,n){"object"!=typeof e&&(e={rotation:e}),this.finals={};var o,a,s,r,h,l,p=!0===e.useRadians?2*Math.PI:360;for(o in e)"useRadians"!==o&&("function"==typeof(r=e[o])&&(r=r(n,t)),a=(l=(r+"").split("_"))[0],s=parseFloat("function"!=typeof t[o]?t[o]:t[o.indexOf("set")||"function"!=typeof t["get"+o.substr(3)]?o:"get"+o.substr(3)]()),h=(r=this.finals[o]="string"==typeof a&&"="===a.charAt(1)?s+parseInt(a.charAt(0)+"1",10)*Number(a.substr(2)):Number(a)||0)-s,l.length&&(-1!==(a=l.join("_")).indexOf("short")&&(h%=p)!==h%(p/2)&&(h=h<0?h+p:h-p),-1!==a.indexOf("_cw")&&h<0?h=(h+9999999999*p)%p-(h/p|0)*p:-1!==a.indexOf("ccw")&&h>0&&(h=(h-9999999999*p)%p-(h/p|0)*p)),(h>1e-6||h<-1e-6)&&(this._addTween(t,o,s,s+h,o),this._overwriteProps.push(o)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,n,o=_gsScope.GreenSockGlobals||_gsScope,a=o.com.greensock,s=2*Math.PI,r=Math.PI/2,h=a._class,l=function(e,i){var n=h("easing."+e,function(){},!0),o=n.prototype=new t;return o.constructor=n,o.getRatio=i,n},p=t.register||function(){},c=function(t,e,i,n,o){var a=h("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new n},!0);return p(a,t),a},d=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},u=function(e,i){var n=h("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),o=n.prototype=new t;return o.constructor=n,o.getRatio=i,o.config=function(t){return new n(t)},n},g=c("Back",u("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),u("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),u("BackInOut",function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),m=h("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=!0===i},!0),f=m.prototype=new t;return f.constructor=m,f.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},m.ease=new m(.7,.7),f.config=m.config=function(t,e,i){return new m(t,e,i)},e=h("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),f=e.prototype=new t,f.constructor=e,f.getRatio=function(t){return t<0?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},f.config=e.config=function(t){return new e(t)},i=h("easing.RoughEase",function(e){for(var i,n,o,a,s,r,h=(e=e||{}).taper||"none",l=[],p=0,c=0|(e.points||20),u=c,g=!1!==e.randomize,m=!0===e.clamp,f=e.template instanceof t?e.template:null,y="number"==typeof e.strength?.4*e.strength:.4;--u>-1;)i=g?Math.random():1/c*u,n=f?f.getRatio(i):i,o="none"===h?y:"out"===h?(a=1-i)*a*y:"in"===h?i*i*y:i<.5?(a=2*i)*a*.5*y:(a=2*(1-i))*a*.5*y,g?n+=Math.random()*o-.5*o:u%2?n+=.5*o:n-=.5*o,m&&(n>1?n=1:n<0&&(n=0)),l[p++]={x:i,y:n};for(l.sort(function(t,e){return t.x-e.x}),r=new d(1,1,null),u=c;--u>-1;)s=l[u],r=new d(s.x,s.y,r);this._prev=new d(0,0,0!==r.t?r:r.next)},!0),f=i.prototype=new t,f.constructor=i,f.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},f.config=function(t){return new i(t)},i.ease=new i,c("Bounce",l("BounceOut",function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),l("BounceIn",function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),l("BounceInOut",function(t){var e=t<.5;return(t=e?1-2*t:2*t-1)<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),c("Circ",l("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),l("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),l("CircInOut",function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),n=function(e,i,n){var o=h("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||n)/(t<1?t:1),this._p3=this._p2/s*(Math.asin(1/this._p1)||0),this._p2=s/this._p2},!0),a=o.prototype=new t;return a.constructor=o,a.getRatio=i,a.config=function(t,e){return new o(t,e)},o},c("Elastic",n("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),n("ElasticIn",function(t){return-this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)},.3),n("ElasticInOut",function(t){return(t*=2)<1?this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1},.45)),c("Expo",l("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),l("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),l("ExpoInOut",function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),c("Sine",l("SineOut",function(t){return Math.sin(t*r)}),l("SineIn",function(t){return 1-Math.cos(t*r)}),l("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),h("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),p(o.SlowMo,"SlowMo","ease,"),p(i,"RoughEase","ease,"),p(e,"SteppedEase","ease,"),g},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t,e){"use strict";var i={},n=t.document,o=t.GreenSockGlobals=t.GreenSockGlobals||t;if(!o.TweenLite){var a,s,r,h,l,p=function(t){var e,i=t.split("."),n=o;for(e=0;e<i.length;e++)n[i[e]]=n=n[i[e]]||{};return n},c=p("com.greensock"),d=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},u=function(){},g=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),m={},f=function(e,n,a,s){this.sc=m[e]?m[e].sc:[],m[e]=this,this.gsClass=null,this.func=a;var r=[];this.check=function(h){for(var l,c,d,u,g,y=n.length,v=y;--y>-1;)(l=m[n[y]]||new f(n[y],[])).gsClass?(r[y]=l.gsClass,v--):h&&l.sc.push(this);if(0===v&&a){if(c=("com.greensock."+e).split("."),d=c.pop(),u=p(c.join("."))[d]=this.gsClass=a.apply(a,r),s)if(o[d]=i[d]=u,!(g="undefined"!=typeof module&&module.exports)&&"function"==typeof define&&define.amd)define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+e.split(".").pop(),[],function(){return u});else if(g)if("TweenMax"===e){module.exports=i.TweenMax=u;for(y in i)u[y]=i[y]}else i.TweenMax&&(i.TweenMax[d]=u);for(y=0;y<this.sc.length;y++)this.sc[y].check()}},this.check(!0)},y=t._gsDefine=function(t,e,i,n){return new f(t,e,i,n)},v=c._class=function(t,e,i){return e=e||function(){},y(t,[],function(){return e},i),e};y.globals=o;var b=[0,0,1,1],w=v("easing.Ease",function(t,e,i,n){this._func=t,this._type=i||0,this._power=n||0,this._params=e?b.concat(e):b},!0),S=w.map={},x=w.register=function(t,e,i,n){for(var o,a,s,r,h=e.split(","),l=h.length,p=(i||"easeIn,easeOut,easeInOut").split(",");--l>-1;)for(a=h[l],o=n?v("easing."+a,null,!0):c.easing[a]||{},s=p.length;--s>-1;)r=p[s],S[a+"."+r]=S[r+a]=o[r]=t.getRatio?t:t[r]||new t};for((r=w.prototype)._calcEnd=!1,r.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,n=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===i?n*=n:2===i?n*=n*n:3===i?n*=n*n*n:4===i&&(n*=n*n*n*n),1===e?1-n:2===e?n:t<.5?n/2:1-n/2},s=(a=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--s>-1;)r=a[s]+",Power"+s,x(new w(null,null,1,s),r,"easeOut",!0),x(new w(null,null,2,s),r,"easeIn"+(0===s?",easeNone":"")),x(new w(null,null,3,s),r,"easeInOut");S.linear=c.easing.Linear.easeIn,S.swing=c.easing.Quad.easeInOut;var P=v("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});(r=P.prototype).addEventListener=function(t,e,i,n,o){o=o||0;var a,s,r=this._listeners[t],p=0;for(this!==h||l||h.wake(),null==r&&(this._listeners[t]=r=[]),s=r.length;--s>-1;)(a=r[s]).c===e&&a.s===i?r.splice(s,1):0===p&&a.pr<o&&(p=s+1);r.splice(p,0,{c:e,s:i,up:n,pr:o})},r.removeEventListener=function(t,e){var i,n=this._listeners[t];if(n)for(i=n.length;--i>-1;)if(n[i].c===e)return void n.splice(i,1)},r.dispatchEvent=function(t){var e,i,n,o=this._listeners[t];if(o)for((e=o.length)>1&&(o=o.slice(0)),i=this._eventTarget;--e>-1;)(n=o[e])&&(n.up?n.c.call(n.s||i,{type:t,target:i}):n.c.call(n.s||i))};var _=t.requestAnimationFrame,k=t.cancelAnimationFrame,A=Date.now||function(){return(new Date).getTime()},T=A();for(s=(a=["ms","moz","webkit","o"]).length;--s>-1&&!_;)_=t[a[s]+"RequestAnimationFrame"],k=t[a[s]+"CancelAnimationFrame"]||t[a[s]+"CancelRequestAnimationFrame"];v("Ticker",function(t,e){var i,o,a,s,r,p=this,c=A(),d=!(!1===e||!_)&&"auto",g=500,m=33,f=function(t){var e,n,h=A()-T;h>g&&(c+=h-m),T+=h,p.time=(T-c)/1e3,e=p.time-r,(!i||e>0||!0===t)&&(p.frame++,r+=e+(e>=s?.004:s-e),n=!0),!0!==t&&(a=o(f)),n&&p.dispatchEvent("tick")};P.call(p),p.time=p.frame=0,p.tick=function(){f(!0)},p.lagSmoothing=function(t,e){g=t||1e10,m=Math.min(e,g,0)},p.sleep=function(){null!=a&&(d&&k?k(a):clearTimeout(a),o=u,a=null,p===h&&(l=!1))},p.wake=function(t){null!==a?p.sleep():t?c+=-T+(T=A()):p.frame>10&&(T=A()-g+5),o=0===i?u:d&&_?_:function(t){return setTimeout(t,1e3*(r-p.time)+1|0)},p===h&&(l=!0),f(2)},p.fps=function(t){if(!arguments.length)return i;s=1/((i=t)||60),r=this.time+s,p.wake()},p.useRAF=function(t){if(!arguments.length)return d;p.sleep(),d=t,p.fps(i)},p.fps(t),setTimeout(function(){"auto"===d&&p.frame<5&&"hidden"!==n.visibilityState&&p.useRAF(!1)},1500)}),(r=c.Ticker.prototype=new c.events.EventDispatcher).constructor=c.Ticker;var M=v("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!0===e.immediateRender,this.data=e.data,this._reversed=!0===e.reversed,Y){l||h.wake();var i=this.vars.useFrames?j:Y;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});h=M.ticker=new c.Ticker,(r=M.prototype)._dirty=r._gc=r._initted=r._paused=!1,r._totalTime=r._time=0,r._rawPrevTime=-1,r._next=r._last=r._onUpdate=r._timeline=r.timeline=null,r._paused=!1;var C=function(){l&&A()-T>2e3&&h.wake(),setTimeout(C,2e3)};C(),r.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},r.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},r.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},r.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},r.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},r.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},r.render=function(t,e,i){},r.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},r.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<i+this.totalDuration()/this._timeScale},r._enabled=function(t,e){return l||h.wake(),this._gc=!t,this._active=this.isActive(),!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},r._kill=function(t,e){return this._enabled(!1,!1)},r.kill=function(t,e){return this._kill(t,e),this},r._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},r._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},r._callback=function(t){var e=this.vars,i=e[t],n=e[t+"Params"],o=e[t+"Scope"]||e.callbackScope||this;switch(n?n.length:0){case 0:i.call(o);break;case 1:i.call(o,n[0]);break;case 2:i.call(o,n[0],n[1]);break;default:i.apply(o,n)}},r.eventCallback=function(t,e,i,n){if("on"===(t||"").substr(0,2)){var o=this.vars;if(1===arguments.length)return o[t];null==e?delete o[t]:(o[t]=e,o[t+"Params"]=g(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,o[t+"Scope"]=n),"onUpdate"===t&&(this._onUpdate=e)}return this},r.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},r.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},r.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},r.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},r.totalTime=function(t,e,i){if(l||h.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,o=this._timeline;if(t>n&&!i&&(t=n),this._startTime=(this._paused?this._pauseTime:o._time)-(this._reversed?n-t:t)/this._timeScale,o._dirty||this._uncache(!1),o._timeline)for(;o._timeline;)o._timeline._time!==(o._startTime+o._totalTime)/o._timeScale&&o.totalTime(o._totalTime,!0),o=o._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(E.length&&K(),this.render(t,e,!1),E.length&&K())}return this},r.progress=r.totalProgress=function(t,e){var i=this.duration();return arguments.length?this.totalTime(i*t,e):i?this._time/i:this.ratio},r.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},r.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},r.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||1e-10,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},r.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},r.paused=function(t){if(!arguments.length)return this._paused;var e,i,n=this._timeline;return t!=this._paused&&n&&(l||t||h.wake(),i=(e=n.rawTime())-this._pauseTime,!t&&n.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&(e=n.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var I=v("core.SimpleTimeline",function(t){M.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});(r=I.prototype=new M).constructor=I,r.kill()._gc=!1,r._first=r._last=r._recent=null,r._sortChildren=!1,r.add=r.insert=function(t,e,i,n){var o,a;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),o=this._last,this._sortChildren)for(a=t._startTime;o&&o._startTime>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=o,this._recent=t,this._timeline&&this._uncache(!0),this},r._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},r.render=function(t,e,i){var n,o=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;o;)n=o._next,(o._active||t>=o._startTime&&!o._paused)&&(o._reversed?o.render((o._dirty?o.totalDuration():o._totalDuration)-(t-o._startTime)*o._timeScale,e,i):o.render((t-o._startTime)*o._timeScale,e,i)),o=n},r.rawTime=function(){return l||h.wake(),this._totalTime};var B=v("TweenLite",function(e,i,n){if(M.call(this,i,n),this.render=B.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:B.selector(e)||e;var o,a,s,r=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?q[B.defaultOverwrite]:"number"==typeof h?h>>0:q[h],(r||e instanceof Array||e.push&&g(e))&&"number"!=typeof e[0])for(this._targets=s=d(e),this._propLookup=[],this._siblings=[],o=0;o<s.length;o++)(a=s[o])?"string"!=typeof a?a.length&&a!==t&&a[0]&&(a[0]===t||a[0].nodeType&&a[0].style&&!a.nodeType)?(s.splice(o--,1),this._targets=s=s.concat(d(a))):(this._siblings[o]=Q(a,this,!1),1===h&&this._siblings[o].length>1&&J(a,this,null,1,this._siblings[o])):"string"==typeof(a=s[o--]=B.selector(a))&&s.splice(o+1,1):s.splice(o--,1);else this._propLookup={},this._siblings=Q(e,this,!1),1===h&&this._siblings.length>1&&J(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1e-10,this.render(Math.min(0,-this._delay)))},!0),G=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},L=function(t,e){var i,n={};for(i in t)W[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!U[i]||U[i]&&U[i]._autoCSS)||(n[i]=t[i],delete t[i]);t.css=n};(r=B.prototype=new M).constructor=B,r.kill()._gc=!1,r.ratio=0,r._firstPT=r._targets=r._overwrittenProps=r._startAt=null,r._notifyPluginsOfEnabled=r._lazy=!1,B.version="1.19.1",B.defaultEase=r._ease=new w(null,null,1,1),B.defaultOverwrite="auto",B.ticker=h,B.autoSleep=120,B.lagSmoothing=function(t,e){h.lagSmoothing(t,e)},B.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(B.selector=i,i(e)):void 0===n?e:n.querySelectorAll?n.querySelectorAll(e):n.getElementById("#"===e.charAt(0)?e.substr(1):e)};var E=[],O={},D=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,R=function(t){for(var e,i=this._firstPT;i;)e=i.blob?1===t?this.end:t?this.join(""):this.start:i.c*t+i.s,i.m?e=i.m(e,this._target||i.t):e<1e-6&&e>-1e-6&&!i.blob&&(e=0),i.f?i.fp?i.t[i.p](i.fp,e):i.t[i.p](e):i.t[i.p]=e,i=i._next},H=function(t,e,i,n){var o,a,s,r,h,l,p,c=[],d=0,u="",g=0;for(c.start=t,c.end=e,t=c[0]=t+"",e=c[1]=e+"",i&&(i(c),t=c[0],e=c[1]),c.length=0,o=t.match(D)||[],a=e.match(D)||[],n&&(n._next=null,n.blob=1,c._firstPT=c._applyPT=n),h=a.length,r=0;r<h;r++)p=a[r],u+=(l=e.substr(d,e.indexOf(p,d)-d))||!r?l:",",d+=l.length,g?g=(g+1)%5:"rgba("===l.substr(-5)&&(g=1),p===o[r]||o.length<=r?u+=p:(u&&(c.push(u),u=""),s=parseFloat(o[r]),c.push(s),c._firstPT={_next:c._firstPT,t:c,p:c.length-1,s:s,c:("="===p.charAt(1)?parseInt(p.charAt(0)+"1",10)*parseFloat(p.substr(2)):parseFloat(p)-s)||0,f:0,m:g&&g<4?Math.round:0}),d+=p.length;return(u+=e.substr(d))&&c.push(u),c.setRatio=R,c},F=function(t,e,i,n,o,a,s,r,h){"function"==typeof n&&(n=n(h||0,t));var l=typeof t[e],p="function"!==l?"":e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),c="get"!==i?i:p?s?t[p](s):t[p]():t[e],d="string"==typeof n&&"="===n.charAt(1),u={t:t,p:e,s:c,f:"function"===l,pg:0,n:o||e,m:a?"function"==typeof a?a:Math.round:0,pr:0,c:d?parseInt(n.charAt(0)+"1",10)*parseFloat(n.substr(2)):parseFloat(n)-c||0};if(("number"!=typeof c||"number"!=typeof n&&!d)&&(s||isNaN(c)||!d&&isNaN(n)||"boolean"==typeof c||"boolean"==typeof n?(u.fp=s,u={t:H(c,d?u.s+u.c:n,r||B.defaultStringFilter,u),p:"setRatio",s:0,c:1,f:2,pg:0,n:o||e,pr:0,m:0}):(u.s=parseFloat(c),d||(u.c=parseFloat(n)-u.s||0))),u.c)return(u._next=this._firstPT)&&(u._next._prev=u),this._firstPT=u,u},N=B._internals={isArray:g,isSelector:G,lazyTweens:E,blobDif:H},U=B._plugins={},X=N.tweenLookup={},V=0,W=N.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1},q={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},j=M._rootFramesTimeline=new I,Y=M._rootTimeline=new I,z=30,K=N.lazyRender=function(){var t,e=E.length;for(O={};--e>-1;)(t=E[e])&&!1!==t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);E.length=0};Y._startTime=h.time,j._startTime=h.frame,Y._active=j._active=!0,setTimeout(K,1),M._updateRoot=B.render=function(){var t,e,i;if(E.length&&K(),Y.render((h.time-Y._startTime)*Y._timeScale,!1,!1),j.render((h.frame-j._startTime)*j._timeScale,!1,!1),E.length&&K(),h.frame>=z){z=h.frame+(parseInt(B.autoSleep,10)||120);for(i in X){for(t=(e=X[i].tweens).length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete X[i]}if((!(i=Y._first)||i._paused)&&B.autoSleep&&!j._first&&1===h._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||h.sleep()}}},h.addEventListener("tick",M._updateRoot);var Q=function(t,e,i){var n,o,a=t._gsTweenID;if(X[a||(t._gsTweenID=a="t"+V++)]||(X[a]={target:t,tweens:[]}),e&&(n=X[a].tweens,n[o=n.length]=e,i))for(;--o>-1;)n[o]===e&&n.splice(o,1);return X[a].tweens},Z=function(t,e,i,n){var o,a,s=t.vars.onOverwrite;return s&&(o=s(t,e,i,n)),(s=B.onOverwrite)&&(a=s(t,e,i,n)),!1!==o&&!1!==a},J=function(t,e,i,n,o){var a,s,r,h;if(1===n||n>=4){for(h=o.length,a=0;a<h;a++)if((r=o[a])!==e)r._gc||r._kill(null,t,e)&&(s=!0);else if(5===n)break;return s}var l,p=e._startTime+1e-10,c=[],d=0,u=0===e._duration;for(a=o.length;--a>-1;)(r=o[a])===e||r._gc||r._paused||(r._timeline!==e._timeline?(l=l||$(e,0,u),0===$(r,l,u)&&(c[d++]=r)):r._startTime<=p&&r._startTime+r.totalDuration()/r._timeScale>p&&((u||!r._initted)&&p-r._startTime<=2e-10||(c[d++]=r)));for(a=d;--a>-1;)if(r=c[a],2===n&&r._kill(i,t,e)&&(s=!0),2!==n||!r._firstPT&&r._initted){if(2!==n&&!Z(r,e))continue;r._enabled(!1,!1)&&(s=!0)}return s},$=function(t,e,i){for(var n=t._timeline,o=n._timeScale,a=t._startTime;n._timeline;){if(a+=n._startTime,o*=n._timeScale,n._paused)return-100;n=n._timeline}return(a/=o)>e?a-e:i&&a===e||!t._initted&&a-e<2e-10?1e-10:(a+=t.totalDuration()/t._timeScale/o)>e+1e-10?0:a-e-1e-10};r._init=function(){var t,e,i,n,o,a,s=this.vars,r=this._overwrittenProps,h=this._duration,l=!!s.immediateRender,p=s.ease;if(s.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),o={};for(n in s.startAt)o[n]=s.startAt[n];if(o.overwrite=!1,o.immediateRender=!0,o.lazy=l&&!1!==s.lazy,o.startAt=o.delay=null,this._startAt=B.to(this.target,0,o),l)if(this._time>0)this._startAt=null;else if(0!==h)return}else if(s.runBackwards&&0!==h)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(l=!1),i={};for(n in s)W[n]&&"autoCSS"!==n||(i[n]=s[n]);if(i.overwrite=0,i.data="isFromStart",i.lazy=l&&!1!==s.lazy,i.immediateRender=l,this._startAt=B.to(this.target,0,i),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=p=p?p instanceof w?p:"function"==typeof p?new w(p,s.easeParams):S[p]||B.defaultEase:B.defaultEase,s.easeParams instanceof Array&&p.config&&(this._ease=p.config.apply(p,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length,t=0;t<a;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],r?r[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,r,0);if(e&&B._onPluginEvent("_onInitAllProps",this),r&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=s.onUpdate,this._initted=!0},r._initProps=function(e,i,n,o,a){var s,r,h,l,p,c;if(null==e)return!1;O[e._gsTweenID]&&K(),this.vars.css||e.style&&e!==t&&e.nodeType&&U.css&&!1!==this.vars.autoCSS&&L(this.vars,e);for(s in this.vars)if(c=this.vars[s],W[s])c&&(c instanceof Array||c.push&&g(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[s]=c=this._swapSelfInParams(c,this));else if(U[s]&&(l=new U[s])._onInitTween(e,this.vars[s],this,a)){for(this._firstPT=p={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:1,n:s,pg:1,pr:l._priority,m:0},r=l._overwriteProps.length;--r>-1;)i[l._overwriteProps[r]]=this._firstPT;(l._priority||l._onInitAllProps)&&(h=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0),p._next&&(p._next._prev=p)}else i[s]=F.call(this,e,s,"get",c,s,0,null,this.vars.stringFilter,a);return o&&this._kill(o,e)?this._initProps(e,i,n,o,a):this._overwrite>1&&this._firstPT&&n.length>1&&J(e,this,i,this._overwrite,n)?(this._kill(i,e),this._initProps(e,i,n,o,a)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(O[e._gsTweenID]=!0),h)},r.render=function(t,e,i){var n,o,a,s,r=this._time,h=this._duration,l=this._rawPrevTime;if(t>=h-1e-7&&t>=0)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(n=!0,o="onComplete",i=i||this._timeline.autoRemoveChildren),0===h&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(l<0||t<=0&&t>=-1e-7||1e-10===l&&"isPause"!==this.data)&&l!==t&&(i=!0,l>1e-10&&(o="onReverseComplete")),this._rawPrevTime=s=!e||t||l===t?t:1e-10);else if(t<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==r||0===h&&l>0)&&(o="onReverseComplete",n=this._reversed),t<0&&(this._active=!1,0===h&&(this._initted||!this.vars.lazy||i)&&(l>=0&&(1e-10!==l||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=s=!e||t||l===t?t:1e-10)),this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var p=t/h,c=this._easeType,d=this._easePower;(1===c||3===c&&p>=.5)&&(p=1-p),3===c&&(p*=2),1===d?p*=p:2===d?p*=p*p:3===d?p*=p*p*p:4===d&&(p*=p*p*p*p),this.ratio=1===c?1-p:2===c?p:t/h<.5?p/2:1-p/2}else this.ratio=this._ease.getRatio(t/h);if(this._time!==r||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=r,this._rawPrevTime=l,E.push(this),void(this._lazy=[t,e]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/h):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==r&&t>=0&&(this._active=!0),0===r&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):o||(o="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==h||e||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(t<0&&this._startAt&&-1e-4!==t&&this._startAt.render(t,e,i),e||(this._time!==r||n||i)&&this._callback("onUpdate")),o&&(this._gc&&!i||(t<0&&this._startAt&&!this._onUpdate&&-1e-4!==t&&this._startAt.render(t,e,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this._callback(o),0===h&&1e-10===this._rawPrevTime&&1e-10!==s&&(this._rawPrevTime=0)))}},r._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:B.selector(e)||e;var n,o,a,s,r,h,l,p,c,d=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((g(e)||G(e))&&"number"!=typeof e[0])for(n=e.length;--n>-1;)this._kill(t,e[n],i)&&(h=!0);else{if(this._targets){for(n=this._targets.length;--n>-1;)if(e===this._targets[n]){r=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],o=this._overwrittenProps[n]=t?this._overwrittenProps[n]||{}:"all";break}}else{if(e!==this.target)return!1;r=this._propLookup,o=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(r){if(l=t||r,p=t!==o&&"all"!==o&&t!==r&&("object"!=typeof t||!t._tempKill),i&&(B.onOverwrite||this.vars.onOverwrite)){for(a in l)r[a]&&(c||(c=[]),c.push(a));if((c||!t)&&!Z(this,i,e,c))return!1}for(a in l)(s=r[a])&&(d&&(s.f?s.t[s.p](s.s):s.t[s.p]=s.s,h=!0),s.pg&&s.t._kill(l)&&(h=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete r[a]),p&&(o[a]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},r.invalidate=function(){return this._notifyPluginsOfEnabled&&B._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],M.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-1e-10,this.render(Math.min(0,-this._delay))),this},r._enabled=function(t,e){if(l||h.wake(),t&&this._gc){var i,n=this._targets;if(n)for(i=n.length;--i>-1;)this._siblings[i]=Q(n[i],this,!0);else this._siblings=Q(this.target,this,!0)}return M.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&B._onPluginEvent(t?"_onEnable":"_onDisable",this)},B.to=function(t,e,i){return new B(t,e,i)},B.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new B(t,e,i)},B.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new B(t,e,n)},B.delayedCall=function(t,e,i,n,o){return new B(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:n,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:o,overwrite:0})},B.set=function(t,e){return new B(t,0,e)},B.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:B.selector(t)||t;var i,n,o,a;if((g(t)||G(t))&&"number"!=typeof t[0]){for(i=t.length,n=[];--i>-1;)n=n.concat(B.getTweensOf(t[i],e));for(i=n.length;--i>-1;)for(a=n[i],o=i;--o>-1;)a===n[o]&&n.splice(i,1)}else for(i=(n=Q(t).concat()).length;--i>-1;)(n[i]._gc||e&&!n[i].isActive())&&n.splice(i,1);return n},B.killTweensOf=B.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var n=B.getTweensOf(t,e),o=n.length;--o>-1;)n[o]._kill(i,t)};var tt=v("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=tt.prototype},!0);if(r=tt.prototype,tt.version="1.19.0",tt.API=2,r._firstPT=null,r._addTween=F,r.setRatio=R,r._kill=function(t){var e,i=this._overwriteProps,n=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;n;)null!=t[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},r._mod=r._roundProps=function(t){for(var e,i=this._firstPT;i;)(e=t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&"function"==typeof e&&(2===i.f?i.t._applyPT.m=e:i.m=e),i=i._next},B._onPluginEvent=function(t,e){var i,n,o,a,s,r=e._firstPT;if("_onInitAllProps"===t){for(;r;){for(s=r._next,n=o;n&&n.pr>r.pr;)n=n._next;(r._prev=n?n._prev:a)?r._prev._next=r:o=r,(r._next=n)?n._prev=r:a=r,r=s}r=e._firstPT=o}for(;r;)r.pg&&"function"==typeof r.t[t]&&r.t[t]()&&(i=!0),r=r._next;return i},tt.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===tt.API&&(U[(new t[e])._propName]=t[e]);return!0},y.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,n=t.priority||0,o=t.overwriteProps,a={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},s=v("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){tt.call(this,i,n),this._overwriteProps=o||[]},!0===t.global),r=s.prototype=new tt(i);r.constructor=s,s.API=t.API;for(e in a)"function"==typeof t[e]&&(r[a[e]]=t[e]);return s.version=t.version,tt.activate([s]),s},a=t._gsQueue){for(s=0;s<a.length;s++)a[s]();for(r in m)m[r].func||t.console.log("GSAP encountered missing dependency: "+r)}l=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window);var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),pixi_spine;!function(t){!function(t){var e=function(){function t(t,e,i){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=i}return t.prototype.apply=function(t,e,i,n,o,a,s,r){if(null==t)throw new Error("skeleton cannot be null.");n&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));for(var h=this.timelines,l=0,p=h.length;l<p;l++)h[l].apply(t,e,i,o,a,s,r)},t.binarySearch=function(t,e,i){void 0===i&&(i=1);var n=0,o=t.length/i-2;if(0==o)return i;for(var a=o>>>1;;){if(t[(a+1)*i]<=e?n=a+1:o=a,n==o)return(n+1)*i;a=n+o>>>1}},t.linearSearch=function(t,e,i){for(var n=0,o=t.length-i;n<=o;n+=i)if(t[n]>e)return n;return-1},t}();t.Animation=e;var i;!function(t){t[t.setup=0]="setup",t[t.current=1]="current",t[t.currentLayered=2]="currentLayered"}(i=t.MixPose||(t.MixPose={}));var n;!function(t){t[t.in=0]="in",t[t.out=1]="out"}(n=t.MixDirection||(t.MixDirection={}));var o;!function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"}(o=t.TimelineType||(t.TimelineType={}));var a=function(){function e(i){if(i<=0)throw new Error("frameCount must be > 0: "+i);this.curves=t.Utils.newFloatArray((i-1)*e.BEZIER_SIZE)}return e.prototype.getFrameCount=function(){return this.curves.length/e.BEZIER_SIZE+1},e.prototype.setLinear=function(t){this.curves[t*e.BEZIER_SIZE]=e.LINEAR},e.prototype.setStepped=function(t){this.curves[t*e.BEZIER_SIZE]=e.STEPPED},e.prototype.getCurveType=function(t){var i=t*e.BEZIER_SIZE;if(i==this.curves.length)return e.LINEAR;var n=this.curves[i];return n==e.LINEAR?e.LINEAR:n==e.STEPPED?e.STEPPED:e.BEZIER},e.prototype.setCurve=function(t,i,n,o,a){var s=.03*(2*-i+o),r=.03*(2*-n+a),h=.006*(3*(i-o)+1),l=.006*(3*(n-a)+1),p=2*s+h,c=2*r+l,d=.3*i+s+.16666667*h,u=.3*n+r+.16666667*l,g=t*e.BEZIER_SIZE,m=this.curves;m[g++]=e.BEZIER;for(var f=d,y=u,v=g+e.BEZIER_SIZE-1;g<v;g+=2)m[g]=f,m[g+1]=y,d+=p,u+=c,p+=h,c+=l,f+=d,y+=u},e.prototype.getCurvePercent=function(i,n){n=t.MathUtils.clamp(n,0,1);var o=this.curves,a=i*e.BEZIER_SIZE,s=o[a];if(s==e.LINEAR)return n;if(s==e.STEPPED)return 0;for(var r=0,h=++a,l=a+e.BEZIER_SIZE-1;a<l;a+=2)if((r=o[a])>=n){var p=void 0,c=void 0;return a==h?(p=0,c=0):(p=o[a-2],c=o[a-1]),c+(o[a+1]-c)*(n-p)/(r-p)}var d=o[a-1];return d+(1-d)*(n-r)/(1-r)},e.LINEAR=0,e.STEPPED=1,e.BEZIER=2,e.BEZIER_SIZE=19,e}();t.CurveTimeline=a;var s=function(n){function a(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e<<1),i}return __extends(a,n),a.prototype.getPropertyId=function(){return(o.rotate<<24)+this.boneIndex},a.prototype.setFrame=function(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+a.ROTATION]=i},a.prototype.apply=function(t,n,o,s,r,h,l){var p=this.frames,c=t.bones[this.boneIndex];if(o<p[0])switch(h){case i.setup:return void(c.rotation=c.data.rotation);case i.current:var d=c.data.rotation-c.rotation;d-=360*(16384-(16384.499999999996-d/360|0)),c.rotation+=d*r}else if(o>=p[p.length-a.ENTRIES])if(h==i.setup)c.rotation=c.data.rotation+p[p.length+a.PREV_ROTATION]*r;else{var u=c.data.rotation+p[p.length+a.PREV_ROTATION]-c.rotation;u-=360*(16384-(16384.499999999996-u/360|0)),c.rotation+=u*r}else{var g=e.binarySearch(p,o,a.ENTRIES),m=p[g+a.PREV_ROTATION],f=p[g],y=this.getCurvePercent((g>>1)-1,1-(o-f)/(p[g+a.PREV_TIME]-f)),v=p[g+a.ROTATION]-m;v=m+(v-=360*(16384-(16384.499999999996-v/360|0)))*y,h==i.setup?(v-=360*(16384-(16384.499999999996-v/360|0)),c.rotation=c.data.rotation+v*r):(v=c.data.rotation+v-c.rotation,v-=360*(16384-(16384.499999999996-v/360|0)),c.rotation+=v*r)}},a.ENTRIES=2,a.PREV_TIME=-2,a.PREV_ROTATION=-1,a.ROTATION=1,a}(a);t.RotateTimeline=s;var r=function(n){function a(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return __extends(a,n),a.prototype.getPropertyId=function(){return(o.translate<<24)+this.boneIndex},a.prototype.setFrame=function(t,e,i,n){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.X]=i,this.frames[t+a.Y]=n},a.prototype.apply=function(t,n,o,s,r,h,l){var p=this.frames,c=t.bones[this.boneIndex];if(o<p[0])switch(h){case i.setup:return c.x=c.data.x,void(c.y=c.data.y);case i.current:c.x+=(c.data.x-c.x)*r,c.y+=(c.data.y-c.y)*r}else{var d=0,u=0;if(o>=p[p.length-a.ENTRIES])d=p[p.length+a.PREV_X],u=p[p.length+a.PREV_Y];else{var g=e.binarySearch(p,o,a.ENTRIES);d=p[g+a.PREV_X],u=p[g+a.PREV_Y];var m=p[g],f=this.getCurvePercent(g/a.ENTRIES-1,1-(o-m)/(p[g+a.PREV_TIME]-m));d+=(p[g+a.X]-d)*f,u+=(p[g+a.Y]-u)*f}h==i.setup?(c.x=c.data.x+d*r,c.y=c.data.y+u*r):(c.x+=(c.data.x+d-c.x)*r,c.y+=(c.data.y+u-c.y)*r)}},a.ENTRIES=3,a.PREV_TIME=-3,a.PREV_X=-2,a.PREV_Y=-1,a.X=1,a.Y=2,a}(a);t.TranslateTimeline=r;var h=function(a){function s(t){return a.call(this,t)||this}return __extends(s,a),s.prototype.getPropertyId=function(){return(o.scale<<24)+this.boneIndex},s.prototype.apply=function(o,a,r,h,l,p,c){var d=this.frames,u=o.bones[this.boneIndex];if(r<d[0])switch(p){case i.setup:return u.scaleX=u.data.scaleX,void(u.scaleY=u.data.scaleY);case i.current:u.scaleX+=(u.data.scaleX-u.scaleX)*l,u.scaleY+=(u.data.scaleY-u.scaleY)*l}else{var g=0,m=0;if(r>=d[d.length-s.ENTRIES])g=d[d.length+s.PREV_X]*u.data.scaleX,m=d[d.length+s.PREV_Y]*u.data.scaleY;else{var f=e.binarySearch(d,r,s.ENTRIES);g=d[f+s.PREV_X],m=d[f+s.PREV_Y];var y=d[f],v=this.getCurvePercent(f/s.ENTRIES-1,1-(r-y)/(d[f+s.PREV_TIME]-y));g=(g+(d[f+s.X]-g)*v)*u.data.scaleX,m=(m+(d[f+s.Y]-m)*v)*u.data.scaleY}if(1==l)u.scaleX=g,u.scaleY=m;else{var b=0,w=0;p==i.setup?(b=u.data.scaleX,w=u.data.scaleY):(b=u.scaleX,w=u.scaleY),c==n.out?(g=Math.abs(g)*t.MathUtils.signum(b),m=Math.abs(m)*t.MathUtils.signum(w)):(b=Math.abs(b)*t.MathUtils.signum(g),w=Math.abs(w)*t.MathUtils.signum(m)),u.scaleX=b+(g-b)*l,u.scaleY=w+(m-w)*l}}},s}(r);t.ScaleTimeline=h;var l=function(t){function n(e){return t.call(this,e)||this}return __extends(n,t),n.prototype.getPropertyId=function(){return(o.shear<<24)+this.boneIndex},n.prototype.apply=function(t,o,a,s,r,h,l){var p=this.frames,c=t.bones[this.boneIndex];if(a<p[0])switch(h){case i.setup:return c.shearX=c.data.shearX,void(c.shearY=c.data.shearY);case i.current:c.shearX+=(c.data.shearX-c.shearX)*r,c.shearY+=(c.data.shearY-c.shearY)*r}else{var d=0,u=0;if(a>=p[p.length-n.ENTRIES])d=p[p.length+n.PREV_X],u=p[p.length+n.PREV_Y];else{var g=e.binarySearch(p,a,n.ENTRIES);d=p[g+n.PREV_X],u=p[g+n.PREV_Y];var m=p[g],f=this.getCurvePercent(g/n.ENTRIES-1,1-(a-m)/(p[g+n.PREV_TIME]-m));d+=(p[g+n.X]-d)*f,u+=(p[g+n.Y]-u)*f}h==i.setup?(c.shearX=c.data.shearX+d*r,c.shearY=c.data.shearY+u*r):(c.shearX+=(c.data.shearX+d-c.shearX)*r,c.shearY+=(c.data.shearY+u-c.shearY)*r)}},n}(r);t.ShearTimeline=l;var p=function(n){function a(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return __extends(a,n),a.prototype.getPropertyId=function(){return(o.color<<24)+this.slotIndex},a.prototype.setFrame=function(t,e,i,n,o,s){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.R]=i,this.frames[t+a.G]=n,this.frames[t+a.B]=o,this.frames[t+a.A]=s},a.prototype.apply=function(t,n,o,s,r,h,l){var p=t.slots[this.slotIndex],c=this.frames;if(o<c[0])switch(h){case i.setup:return void p.color.setFromColor(p.data.color);case i.current:var d=p.color,u=p.data.color;d.add((u.r-d.r)*r,(u.g-d.g)*r,(u.b-d.b)*r,(u.a-d.a)*r)}else{var g=0,m=0,f=0,y=0;if(o>=c[c.length-a.ENTRIES]){var v=c.length;g=c[v+a.PREV_R],m=c[v+a.PREV_G],f=c[v+a.PREV_B],y=c[v+a.PREV_A]}else{var b=e.binarySearch(c,o,a.ENTRIES);g=c[b+a.PREV_R],m=c[b+a.PREV_G],f=c[b+a.PREV_B],y=c[b+a.PREV_A];var w=c[b],S=this.getCurvePercent(b/a.ENTRIES-1,1-(o-w)/(c[b+a.PREV_TIME]-w));g+=(c[b+a.R]-g)*S,m+=(c[b+a.G]-m)*S,f+=(c[b+a.B]-f)*S,y+=(c[b+a.A]-y)*S}if(1==r)p.color.set(g,m,f,y);else{d=p.color;h==i.setup&&d.setFromColor(p.data.color),d.add((g-d.r)*r,(m-d.g)*r,(f-d.b)*r,(y-d.a)*r)}}},a.ENTRIES=5,a.PREV_TIME=-5,a.PREV_R=-4,a.PREV_G=-3,a.PREV_B=-2,a.PREV_A=-1,a.R=1,a.G=2,a.B=3,a.A=4,a}(a);t.ColorTimeline=p;var c=function(n){function a(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return __extends(a,n),a.prototype.getPropertyId=function(){return(o.twoColor<<24)+this.slotIndex},a.prototype.setFrame=function(t,e,i,n,o,s,r,h,l){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.R]=i,this.frames[t+a.G]=n,this.frames[t+a.B]=o,this.frames[t+a.A]=s,this.frames[t+a.R2]=r,this.frames[t+a.G2]=h,this.frames[t+a.B2]=l},a.prototype.apply=function(t,n,o,s,r,h,l){var p=t.slots[this.slotIndex],c=this.frames;if(o<c[0])switch(h){case i.setup:return p.color.setFromColor(p.data.color),void p.darkColor.setFromColor(p.data.darkColor);case i.current:var d=p.color,u=p.darkColor,g=p.data.color,m=p.data.darkColor;d.add((g.r-d.r)*r,(g.g-d.g)*r,(g.b-d.b)*r,(g.a-d.a)*r),u.add((m.r-u.r)*r,(m.g-u.g)*r,(m.b-u.b)*r,0)}else{var f=0,y=0,v=0,b=0,w=0,S=0,x=0;if(o>=c[c.length-a.ENTRIES]){var P=c.length;f=c[P+a.PREV_R],y=c[P+a.PREV_G],v=c[P+a.PREV_B],b=c[P+a.PREV_A],w=c[P+a.PREV_R2],S=c[P+a.PREV_G2],x=c[P+a.PREV_B2]}else{var _=e.binarySearch(c,o,a.ENTRIES);f=c[_+a.PREV_R],y=c[_+a.PREV_G],v=c[_+a.PREV_B],b=c[_+a.PREV_A],w=c[_+a.PREV_R2],S=c[_+a.PREV_G2],x=c[_+a.PREV_B2];var k=c[_],A=this.getCurvePercent(_/a.ENTRIES-1,1-(o-k)/(c[_+a.PREV_TIME]-k));f+=(c[_+a.R]-f)*A,y+=(c[_+a.G]-y)*A,v+=(c[_+a.B]-v)*A,b+=(c[_+a.A]-b)*A,w+=(c[_+a.R2]-w)*A,S+=(c[_+a.G2]-S)*A,x+=(c[_+a.B2]-x)*A}if(1==r)p.color.set(f,y,v,b),p.darkColor.set(w,S,x,1);else{var d=p.color,u=p.darkColor;h==i.setup&&(d.setFromColor(p.data.color),u.setFromColor(p.data.darkColor)),d.add((f-d.r)*r,(y-d.g)*r,(v-d.b)*r,(b-d.a)*r),u.add((w-u.r)*r,(S-u.g)*r,(x-u.b)*r,0)}}},a.ENTRIES=8,a.PREV_TIME=-8,a.PREV_R=-7,a.PREV_G=-6,a.PREV_B=-5,a.PREV_A=-4,a.PREV_R2=-3,a.PREV_G2=-2,a.PREV_B2=-1,a.R=1,a.G=2,a.B=3,a.A=4,a.R2=5,a.G2=6,a.B2=7,a}(a);t.TwoColorTimeline=c;var d=function(){function a(e){this.frames=t.Utils.newFloatArray(e),this.attachmentNames=new Array(e)}return a.prototype.getPropertyId=function(){return(o.attachment<<24)+this.slotIndex},a.prototype.getFrameCount=function(){return this.frames.length},a.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},a.prototype.apply=function(t,o,a,s,r,h,l){var p=t.slots[this.slotIndex];if(l!=n.out||h!=i.setup){var c=this.frames;if(a<c[0]){if(h==i.setup){var d=p.data.attachmentName;p.setAttachment(null==d?null:t.getAttachment(this.slotIndex,d))}}else{var u=0;u=a>=c[c.length-1]?c.length-1:e.binarySearch(c,a,1)-1;var g=this.attachmentNames[u];t.slots[this.slotIndex].setAttachment(null==g?null:t.getAttachment(this.slotIndex,g))}}else{var m=p.data.attachmentName;p.setAttachment(null==m?null:t.getAttachment(this.slotIndex,m))}},a}();t.AttachmentTimeline=d;var u=null,g=function(n){function a(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e),i.frameVertices=new Array(e),null==u&&(u=t.Utils.newFloatArray(64)),i}return __extends(a,n),a.prototype.getPropertyId=function(){return(o.deform<<27)+ +this.attachment.id+this.slotIndex},a.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.frameVertices[t]=i},a.prototype.apply=function(n,o,a,s,r,h,l){var p=n.slots[this.slotIndex],c=p.getAttachment();if(c instanceof t.VertexAttachment&&c.applyDeform(this.attachment)){var d=p.attachmentVertices,g=this.frameVertices,m=g[0].length,f=t.Utils.setArraySize(d,m),y=this.frames;if(a<y[0]){var v=c;switch(h){case i.setup:var b=void 0;return null==v.bones?b=v.vertices:(b=u).length<m&&(u=b=t.Utils.newFloatArray(m)),void t.Utils.arrayCopy(b,0,f,0,m);case i.current:if(1==r)break;if(null==v.bones)for(var w=v.vertices,S=0;S<m;S++)f[S]+=(w[S]-f[S])*r;else{r=1-r;for(var x=0;x<m;x++)f[x]*=r}}}else if(a>=y[y.length-1]){var P=g[y.length-1];if(1==r)t.Utils.arrayCopy(P,0,f,0,m);else if(h==i.setup)if(null==(v=c).bones)for(var w=v.vertices,_=0;_<m;_++){O=w[_];f[_]=O+(P[_]-O)*r}else for(var k=0;k<m;k++)f[k]=P[k]*r;else for(var A=0;A<m;A++)f[A]+=(P[A]-f[A])*r}else{var T=e.binarySearch(y,a),M=g[T-1],C=g[T],I=y[T],B=this.getCurvePercent(T-1,1-(a-I)/(y[T-1]-I));if(1==r)for(var G=0;G<m;G++){E=M[G];f[G]=E+(C[G]-E)*B}else if(h==i.setup)if(null==(v=c).bones)for(var w=v.vertices,L=0;L<m;L++){var E=M[L],O=w[L];f[L]=O+(E+(C[L]-E)*B-O)*r}else for(var D=0;D<m;D++){E=M[D];f[D]=(E+(C[D]-E)*B)*r}else for(var R=0;R<m;R++){E=M[R];f[R]+=(E+(C[R]-E)*B-f[R])*r}}}},a}(a);t.DeformTimeline=g;var m=function(){function i(e){this.frames=t.Utils.newFloatArray(e),this.events=new Array(e)}return i.prototype.getPropertyId=function(){return o.event<<24},i.prototype.getFrameCount=function(){return this.frames.length},i.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},i.prototype.apply=function(t,i,n,o,a,s,r){if(null!=o){var h=this.frames,l=this.frames.length;if(i>n)this.apply(t,i,Number.MAX_VALUE,o,a,s,r),i=-1;else if(i>=h[l-1])return;if(!(n<h[0])){var p=0;if(i<h[0])p=0;else for(var c=h[p=e.binarySearch(h,i)];p>0&&h[p-1]==c;)p--;for(;p<l&&n>=h[p];p++)o.push(this.events[p])}}},i}();t.EventTimeline=m;var f=function(){function a(e){this.frames=t.Utils.newFloatArray(e),this.drawOrders=new Array(e)}return a.prototype.getPropertyId=function(){return o.drawOrder<<24},a.prototype.getFrameCount=function(){return this.frames.length},a.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.drawOrders[t]=i},a.prototype.apply=function(o,a,s,r,h,l,p){var c=o.drawOrder,d=o.slots;if(p!=n.out||l!=i.setup){var u=this.frames;if(s<u[0])l==i.setup&&t.Utils.arrayCopy(o.slots,0,o.drawOrder,0,o.slots.length);else{var g=0;g=s>=u[u.length-1]?u.length-1:e.binarySearch(u,s)-1;var m=this.drawOrders[g];if(null==m)t.Utils.arrayCopy(d,0,c,0,d.length);else for(var f=0,y=m.length;f<y;f++)c[f]=d[m[f]]}}else t.Utils.arrayCopy(o.slots,0,o.drawOrder,0,o.slots.length)},a}();t.DrawOrderTimeline=f;var y=function(a){function s(e){var i=a.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*s.ENTRIES),i}return __extends(s,a),s.prototype.getPropertyId=function(){return(o.ikConstraint<<24)+this.ikConstraintIndex},s.prototype.setFrame=function(t,e,i,n){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.MIX]=i,this.frames[t+s.BEND_DIRECTION]=n},s.prototype.apply=function(t,o,a,r,h,l,p){var c=this.frames,d=t.ikConstraints[this.ikConstraintIndex];if(a<c[0])switch(l){case i.setup:return d.mix=d.data.mix,void(d.bendDirection=d.data.bendDirection);case i.current:d.mix+=(d.data.mix-d.mix)*h,d.bendDirection=d.data.bendDirection}else if(a>=c[c.length-s.ENTRIES])l==i.setup?(d.mix=d.data.mix+(c[c.length+s.PREV_MIX]-d.data.mix)*h,d.bendDirection=p==n.out?d.data.bendDirection:c[c.length+s.PREV_BEND_DIRECTION]):(d.mix+=(c[c.length+s.PREV_MIX]-d.mix)*h,p==n.in&&(d.bendDirection=c[c.length+s.PREV_BEND_DIRECTION]));else{var u=e.binarySearch(c,a,s.ENTRIES),g=c[u+s.PREV_MIX],m=c[u],f=this.getCurvePercent(u/s.ENTRIES-1,1-(a-m)/(c[u+s.PREV_TIME]-m));l==i.setup?(d.mix=d.data.mix+(g+(c[u+s.MIX]-g)*f-d.data.mix)*h,d.bendDirection=p==n.out?d.data.bendDirection:c[u+s.PREV_BEND_DIRECTION]):(d.mix+=(g+(c[u+s.MIX]-g)*f-d.mix)*h,p==n.in&&(d.bendDirection=c[u+s.PREV_BEND_DIRECTION]))}},s.ENTRIES=3,s.PREV_TIME=-3,s.PREV_MIX=-2,s.PREV_BEND_DIRECTION=-1,s.MIX=1,s.BEND_DIRECTION=2,s}(a);t.IkConstraintTimeline=y;var v=function(n){function a(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return __extends(a,n),a.prototype.getPropertyId=function(){return(o.transformConstraint<<24)+this.transformConstraintIndex},a.prototype.setFrame=function(t,e,i,n,o,s){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.ROTATE]=i,this.frames[t+a.TRANSLATE]=n,this.frames[t+a.SCALE]=o,this.frames[t+a.SHEAR]=s},a.prototype.apply=function(t,n,o,s,r,h,l){var p=this.frames,c=t.transformConstraints[this.transformConstraintIndex];if(o<p[0]){w=c.data;switch(h){case i.setup:return c.rotateMix=w.rotateMix,c.translateMix=w.translateMix,c.scaleMix=w.scaleMix,void(c.shearMix=w.shearMix);case i.current:c.rotateMix+=(w.rotateMix-c.rotateMix)*r,c.translateMix+=(w.translateMix-c.translateMix)*r,c.scaleMix+=(w.scaleMix-c.scaleMix)*r,c.shearMix+=(w.shearMix-c.shearMix)*r}}else{var d=0,u=0,g=0,m=0;if(o>=p[p.length-a.ENTRIES]){var f=p.length;d=p[f+a.PREV_ROTATE],u=p[f+a.PREV_TRANSLATE],g=p[f+a.PREV_SCALE],m=p[f+a.PREV_SHEAR]}else{var y=e.binarySearch(p,o,a.ENTRIES);d=p[y+a.PREV_ROTATE],u=p[y+a.PREV_TRANSLATE],g=p[y+a.PREV_SCALE],m=p[y+a.PREV_SHEAR];var v=p[y],b=this.getCurvePercent(y/a.ENTRIES-1,1-(o-v)/(p[y+a.PREV_TIME]-v));d+=(p[y+a.ROTATE]-d)*b,u+=(p[y+a.TRANSLATE]-u)*b,g+=(p[y+a.SCALE]-g)*b,m+=(p[y+a.SHEAR]-m)*b}if(h==i.setup){var w=c.data;c.rotateMix=w.rotateMix+(d-w.rotateMix)*r,c.translateMix=w.translateMix+(u-w.translateMix)*r,c.scaleMix=w.scaleMix+(g-w.scaleMix)*r,c.shearMix=w.shearMix+(m-w.shearMix)*r}else c.rotateMix+=(d-c.rotateMix)*r,c.translateMix+=(u-c.translateMix)*r,c.scaleMix+=(g-c.scaleMix)*r,c.shearMix+=(m-c.shearMix)*r}},a.ENTRIES=5,a.PREV_TIME=-5,a.PREV_ROTATE=-4,a.PREV_TRANSLATE=-3,a.PREV_SCALE=-2,a.PREV_SHEAR=-1,a.ROTATE=1,a.TRANSLATE=2,a.SCALE=3,a.SHEAR=4,a}(a);t.TransformConstraintTimeline=v;var b=function(n){function a(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return __extends(a,n),a.prototype.getPropertyId=function(){return(o.pathConstraintPosition<<24)+this.pathConstraintIndex},a.prototype.setFrame=function(t,e,i){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.VALUE]=i},a.prototype.apply=function(t,n,o,s,r,h,l){var p=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(o<p[0])switch(h){case i.setup:return void(c.position=c.data.position);case i.current:c.position+=(c.data.position-c.position)*r}else{var d=0;if(o>=p[p.length-a.ENTRIES])d=p[p.length+a.PREV_VALUE];else{var u=e.binarySearch(p,o,a.ENTRIES);d=p[u+a.PREV_VALUE];var g=p[u],m=this.getCurvePercent(u/a.ENTRIES-1,1-(o-g)/(p[u+a.PREV_TIME]-g));d+=(p[u+a.VALUE]-d)*m}h==i.setup?c.position=c.data.position+(d-c.data.position)*r:c.position+=(d-c.position)*r}},a.ENTRIES=2,a.PREV_TIME=-2,a.PREV_VALUE=-1,a.VALUE=1,a}(a);t.PathConstraintPositionTimeline=b;var w=function(t){function n(e){return t.call(this,e)||this}return __extends(n,t),n.prototype.getPropertyId=function(){return(o.pathConstraintSpacing<<24)+this.pathConstraintIndex},n.prototype.apply=function(t,o,a,s,r,h,l){var p=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(a<p[0])switch(h){case i.setup:return void(c.spacing=c.data.spacing);case i.current:c.spacing+=(c.data.spacing-c.spacing)*r}else{var d=0;if(a>=p[p.length-n.ENTRIES])d=p[p.length+n.PREV_VALUE];else{var u=e.binarySearch(p,a,n.ENTRIES);d=p[u+n.PREV_VALUE];var g=p[u],m=this.getCurvePercent(u/n.ENTRIES-1,1-(a-g)/(p[u+n.PREV_TIME]-g));d+=(p[u+n.VALUE]-d)*m}h==i.setup?c.spacing=c.data.spacing+(d-c.data.spacing)*r:c.spacing+=(d-c.spacing)*r}},n}(b);t.PathConstraintSpacingTimeline=w;var S=function(n){function a(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return __extends(a,n),a.prototype.getPropertyId=function(){return(o.pathConstraintMix<<24)+this.pathConstraintIndex},a.prototype.setFrame=function(t,e,i,n){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.ROTATE]=i,this.frames[t+a.TRANSLATE]=n},a.prototype.apply=function(t,n,o,s,r,h,l){var p=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(o<p[0])switch(h){case i.setup:return c.rotateMix=c.data.rotateMix,void(c.translateMix=c.data.translateMix);case i.current:c.rotateMix+=(c.data.rotateMix-c.rotateMix)*r,c.translateMix+=(c.data.translateMix-c.translateMix)*r}else{var d=0,u=0;if(o>=p[p.length-a.ENTRIES])d=p[p.length+a.PREV_ROTATE],u=p[p.length+a.PREV_TRANSLATE];else{var g=e.binarySearch(p,o,a.ENTRIES);d=p[g+a.PREV_ROTATE],u=p[g+a.PREV_TRANSLATE];var m=p[g],f=this.getCurvePercent(g/a.ENTRIES-1,1-(o-m)/(p[g+a.PREV_TIME]-m));d+=(p[g+a.ROTATE]-d)*f,u+=(p[g+a.TRANSLATE]-u)*f}h==i.setup?(c.rotateMix=c.data.rotateMix+(d-c.data.rotateMix)*r,c.translateMix=c.data.translateMix+(u-c.data.translateMix)*r):(c.rotateMix+=(d-c.rotateMix)*r,c.translateMix+=(u-c.translateMix)*r)}},a.ENTRIES=3,a.PREV_TIME=-3,a.PREV_ROTATE=-2,a.PREV_TRANSLATE=-1,a.ROTATE=1,a.TRANSLATE=2,a}(a);t.PathConstraintMixTimeline=S}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function e(e){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new n(this),this.propertyIDs=new t.IntSet,this.mixingTo=new Array,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new t.Pool(function(){return new i}),this.data=e}return e.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,i=0,n=e.length;i<n;i++){var o=e[i];if(null!=o){o.animationLast=o.nextAnimationLast,o.trackLast=o.nextTrackLast;var a=t*o.timeScale;if(o.delay>0){if(o.delay-=a,o.delay>0)continue;a=-o.delay,o.delay=0}var s=o.next;if(null!=s){var r=o.trackLast-s.delay;if(r>=0){for(s.delay=0,s.trackTime=r+t*s.timeScale,o.trackTime+=a,this.setCurrent(i,s,!0);null!=s.mixingFrom;)s.mixTime+=a,s=s.mixingFrom;continue}}else if(o.trackLast>=o.trackEnd&&null==o.mixingFrom){e[i]=null,this.queue.end(o),this.disposeNext(o);continue}if(null!=o.mixingFrom&&this.updateMixingFrom(o,t)){var h=o.mixingFrom;for(o.mixingFrom=null;null!=h;)this.queue.end(h),h=h.mixingFrom}o.trackTime+=a}}this.queue.drain()},e.prototype.updateMixingFrom=function(t,e){var i=t.mixingFrom;if(null==i)return!0;var n=this.updateMixingFrom(i,e);return t.mixTime>0&&(t.mixTime>=t.mixDuration||0==t.timeScale)?(0==i.totalAlpha&&(t.mixingFrom=i.mixingFrom,t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),n):(i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,i.trackTime+=e*i.timeScale,t.mixTime+=e*t.timeScale,!1)},e.prototype.apply=function(i){if(null==i)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var n=this.events,o=this.tracks,a=!1,s=0,r=o.length;s<r;s++){var h=o[s];if(!(null==h||h.delay>0)){a=!0;var l=0==s?t.MixPose.current:t.MixPose.currentLayered,p=h.alpha;null!=h.mixingFrom?p*=this.applyMixingFrom(h,i,l):h.trackTime>=h.trackEnd&&null==h.next&&(p=0);var c=h.animationLast,d=h.getAnimationTime(),u=h.animation.timelines.length,g=h.animation.timelines;if(1==p)for(v=0;v<u;v++)g[v].apply(i,c,d,n,1,t.MixPose.setup,t.MixDirection.in);else{var m=h.timelineData,f=0==h.timelinesRotation.length;f&&t.Utils.setArraySize(h.timelinesRotation,u<<1,null);for(var y=h.timelinesRotation,v=0;v<u;v++){var b=g[v],w=m[v]>=e.FIRST?t.MixPose.setup:l;b instanceof t.RotateTimeline?this.applyRotateTimeline(b,i,d,p,w,y,v<<1,f):b.apply(i,c,d,n,p,w,t.MixDirection.in)}}this.queueEvents(h,d),n.length=0,h.nextAnimationLast=d,h.nextTrackLast=h.trackTime}}return this.queue.drain(),a},e.prototype.applyMixingFrom=function(i,n,o){var a=i.mixingFrom;null!=a.mixingFrom&&this.applyMixingFrom(a,n,o);var s=0;0==i.mixDuration?s=1:(s=i.mixTime/i.mixDuration)>1&&(s=1);var r=s<a.eventThreshold?this.events:null,h=s<a.attachmentThreshold,l=s<a.drawOrderThreshold,p=a.animationLast,c=a.getAnimationTime(),d=a.animation.timelines.length,u=a.animation.timelines,g=a.timelineData,m=a.timelineDipMix,f=0==a.timelinesRotation.length;f&&t.Utils.setArraySize(a.timelinesRotation,d<<1,null);var y,v=a.timelinesRotation,b=a.alpha*i.interruptAlpha,w=b*(1-s),S=0;a.totalAlpha=0;for(var x=0;x<d;x++){var P=u[x];switch(g[x]){case e.SUBSEQUENT:if(!h&&P instanceof t.AttachmentTimeline)continue;if(!l&&P instanceof t.DrawOrderTimeline)continue;y=o,S=w;break;case e.FIRST:y=t.MixPose.setup,S=w;break;case e.DIP:y=t.MixPose.setup,S=b;break;default:y=t.MixPose.setup,S=b;var _=m[x];S*=Math.max(0,1-_.mixTime/_.mixDuration)}a.totalAlpha+=S,P instanceof t.RotateTimeline?this.applyRotateTimeline(P,n,c,S,y,v,x<<1,f):P.apply(n,p,c,r,S,y,t.MixDirection.out)}return i.mixDuration>0&&this.queueEvents(a,c),this.events.length=0,a.nextAnimationLast=c,a.nextTrackLast=a.trackTime,s},e.prototype.applyRotateTimeline=function(e,i,n,o,a,s,r,h){if(h&&(s[r]=0),1!=o){var l=e,p=l.frames,c=i.bones[l.boneIndex];if(n<p[0])a==t.MixPose.setup&&(c.rotation=c.data.rotation);else{var d=0;if(n>=p[p.length-t.RotateTimeline.ENTRIES])d=c.data.rotation+p[p.length+t.RotateTimeline.PREV_ROTATION];else{var u=t.Animation.binarySearch(p,n,t.RotateTimeline.ENTRIES),g=p[u+t.RotateTimeline.PREV_ROTATION],m=p[u],f=l.getCurvePercent((u>>1)-1,1-(n-m)/(p[u+t.RotateTimeline.PREV_TIME]-m));d=p[u+t.RotateTimeline.ROTATION]-g,d=g+(d-=360*(16384-(16384.499999999996-d/360|0)))*f+c.data.rotation,d-=360*(16384-(16384.499999999996-d/360|0))}var y=a==t.MixPose.setup?c.data.rotation:c.rotation,v=0,b=d-y;if(0==b)v=s[r];else{b-=360*(16384-(16384.499999999996-b/360|0));var w=0,S=0;h?(w=0,S=b):(w=s[r],S=s[r+1]);var x=b>0,P=w>=0;t.MathUtils.signum(S)!=t.MathUtils.signum(b)&&Math.abs(S)<=90&&(Math.abs(w)>180&&(w+=360*t.MathUtils.signum(w)),P=x),v=b+w-w%360,P!=x&&(v+=360*t.MathUtils.signum(w)),s[r]=v}s[r+1]=b,y+=v*o,c.rotation=y-360*(16384-(16384.499999999996-y/360|0))}}else e.apply(i,0,n,null,1,a,t.MixDirection.in)},e.prototype.queueEvents=function(t,e){for(var i=t.animationStart,n=t.animationEnd,o=n-i,a=t.trackLast%o,s=this.events,r=0,h=s.length;r<h;r++){var l=s[r];if(l.time<a)break;l.time>n||this.queue.event(t,l)}for((t.loop?a>t.trackTime%o:e>=n&&t.animationLast<n)&&this.queue.complete(t);r<h;r++)s[r].time<i||this.queue.event(t,s[r])},e.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,i=this.tracks.length;e<i;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},e.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var i=e;;){var n=i.mixingFrom;if(null==n)break;this.queue.end(n),i.mixingFrom=null,i=n}this.tracks[e.trackIndex]=null,this.queue.drain()}}},e.prototype.setCurrent=function(t,e,i){var n=this.expandToIndex(t);this.tracks[t]=e,null!=n&&(i&&this.queue.interrupt(n),e.mixingFrom=n,e.mixTime=0,null!=n.mixingFrom&&n.mixDuration>0&&(e.interruptAlpha*=Math.min(1,n.mixTime/n.mixDuration)),n.timelinesRotation.length=0),this.queue.start(e)},e.prototype.setAnimation=function(t,e,i){var n=this.data.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,n,i)},e.prototype.setAnimationWith=function(t,e,i){if(null==e)throw new Error("animation cannot be null.");var n=!0,o=this.expandToIndex(t);null!=o&&(-1==o.nextTrackLast?(this.tracks[t]=o.mixingFrom,this.queue.interrupt(o),this.queue.end(o),this.disposeNext(o),o=o.mixingFrom,n=!1):this.disposeNext(o));var a=this.trackEntry(t,e,i,o);return this.setCurrent(t,a,n),this.queue.drain(),a},e.prototype.addAnimation=function(t,e,i,n){var o=this.data.skeletonData.findAnimation(e);if(null==o)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,o,i,n)},e.prototype.addAnimationWith=function(t,e,i,n){if(null==e)throw new Error("animation cannot be null.");var o=this.expandToIndex(t);if(null!=o)for(;null!=o.next;)o=o.next;var a=this.trackEntry(t,e,i,o);if(null==o)this.setCurrent(t,a,!0),this.queue.drain();else if(o.next=a,n<=0){var s=o.animationEnd-o.animationStart;0!=s?n+=s*(1+(o.trackTime/s|0))-this.data.getMix(o.animation,e):n=0}return a.delay=n,a},e.prototype.setEmptyAnimation=function(t,i){var n=this.setAnimationWith(t,e.emptyAnimation,!1);return n.mixDuration=i,n.trackEnd=i,n},e.prototype.addEmptyAnimation=function(t,i,n){n<=0&&(n-=i);var o=this.addAnimationWith(t,e.emptyAnimation,!1,n);return o.mixDuration=i,o.trackEnd=i,o},e.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,n=this.tracks.length;i<n;i++){var o=this.tracks[i];null!=o&&this.setEmptyAnimation(o.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},e.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(t.Utils.ensureArrayCapacity(this.tracks,e-this.tracks.length+1,null),this.tracks.length=e+1,null)},e.prototype.trackEntry=function(t,e,i,n){var o=this.trackEntryPool.obtain();return o.trackIndex=t,o.animation=e,o.loop=i,o.eventThreshold=0,o.attachmentThreshold=0,o.drawOrderThreshold=0,o.animationStart=0,o.animationEnd=e.duration,o.animationLast=-1,o.nextAnimationLast=-1,o.delay=0,o.trackTime=0,o.trackLast=-1,o.nextTrackLast=-1,o.trackEnd=Number.MAX_VALUE,o.timeScale=1,o.alpha=1,o.interruptAlpha=1,o.mixTime=0,o.mixDuration=null==n?0:this.data.getMix(n.animation,e),o},e.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1;var t=this.propertyIDs;t.clear();for(var e=this.mixingTo,i=0,n=this.tracks.length;i<n;i++){var o=this.tracks[i];null!=o&&o.setTimelineData(null,e,t)}},e.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},e.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},e.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.prototype.setAnimationByName=function(t,i,n){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,i,n)},e.prototype.addAnimationByName=function(t,i,n,o){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,i,n,o)},e.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},e.prototype.hasAnimationByName=function(t){return e.deprecatedWarning3||(e.deprecatedWarning3=!0,console.warn("Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},e.emptyAnimation=new t.Animation("<empty>",[],0),e.SUBSEQUENT=0,e.FIRST=1,e.DIP=2,e.DIP_MIX=3,e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e.deprecatedWarning3=!1,e}();t.AnimationState=e;var i=function(){function i(){this.timelineData=new Array,this.timelineDipMix=new Array,this.timelinesRotation=new Array}return i.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.animation=null,this.listener=null,this.timelineData.length=0,this.timelineDipMix.length=0,this.timelinesRotation.length=0},i.prototype.setTimelineData=function(i,n,o){null!=i&&n.push(i);var a=null!=this.mixingFrom?this.mixingFrom.setTimelineData(this,n,o):this;null!=i&&n.pop();var s=n,r=n.length-1,h=this.animation.timelines,l=this.animation.timelines.length,p=t.Utils.setArraySize(this.timelineData,l);this.timelineDipMix.length=0;var c=t.Utils.setArraySize(this.timelineDipMix,l);t:for(var d=0;d<l;d++){var u=h[d].getPropertyId();if(o.add(u))if(null!=i&&i.hasTimeline(u)){for(var g=r;g>=0;g--){var m=s[g];if(!m.hasTimeline(u)&&m.mixDuration>0){p[d]=e.DIP_MIX,c[d]=m;continue t}}p[d]=e.DIP}else p[d]=e.FIRST;else p[d]=e.SUBSEQUENT}return a},i.prototype.hasTimeline=function(t){for(var e=this.animation.timelines,i=0,n=e.length;i<n;i++)if(e[i].getPropertyId()==t)return!0;return!1},i.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},i.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},i.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},i.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(i.prototype,"time",{get:function(){return i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"endTime",{get:function(){return i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!0,configurable:!0}),i.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},i.deprecatedWarning1=!1,i.deprecatedWarning2=!1,i}();t.TrackEntry=i;var n=function(){function e(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return e.prototype.start=function(t){this.objects.push(o.start),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.interrupt=function(t){this.objects.push(o.interrupt),this.objects.push(t)},e.prototype.end=function(t){this.objects.push(o.end),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.dispose=function(t){this.objects.push(o.dispose),this.objects.push(t)},e.prototype.complete=function(t){this.objects.push(o.complete),this.objects.push(t)},e.prototype.event=function(t,e){this.objects.push(o.event),this.objects.push(t),this.objects.push(e)},e.prototype.deprecateStuff=function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},e.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,i=this.animState.listeners,n=0;n<e.length;n+=2){var a=e[n],s=e[n+1];switch(a){case o.start:null!=s.listener&&s.listener.start&&s.listener.start(s);for(l=0;l<i.length;l++)i[l].start&&i[l].start(s);s.onStart&&this.deprecateStuff()&&s.onStart(s.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(s.trackIndex);break;case o.interrupt:null!=s.listener&&s.listener.interrupt&&s.listener.interrupt(s);for(l=0;l<i.length;l++)i[l].interrupt&&i[l].interrupt(s);break;case o.end:null!=s.listener&&s.listener.end&&s.listener.end(s);for(l=0;l<i.length;l++)i[l].end&&i[l].end(s);s.onEnd&&this.deprecateStuff()&&s.onEnd(s.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(s.trackIndex);case o.dispose:null!=s.listener&&s.listener.dispose&&s.listener.dispose(s);for(l=0;l<i.length;l++)i[l].dispose&&i[l].dispose(s);this.animState.trackEntryPool.free(s);break;case o.complete:null!=s.listener&&s.listener.complete&&s.listener.complete(s);for(l=0;l<i.length;l++)i[l].complete&&i[l].complete(s);var r=t.MathUtils.toInt(s.loopsCount());s.onComplete&&this.deprecateStuff()&&s.onComplete(s.trackIndex,r),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(s.trackIndex,r);break;case o.event:var h=e[2+n++];null!=s.listener&&s.listener.event&&s.listener.event(s,h);for(var l=0;l<i.length;l++)i[l].event&&i[l].event(s,h);s.onEvent&&this.deprecateStuff()&&s.onEvent(s.trackIndex,h),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(s.trackIndex,h)}}this.clear(),this.drainDisabled=!1}},e.prototype.clear=function(){this.objects.length=0},e.deprecatedWarning1=!1,e}();t.EventQueue=n;var o;!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(o=t.EventType||(t.EventType={}));var a=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}();t.AnimationStateAdapter2=a}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,i){var n=this.skeletonData.findAnimation(t);if(null==n)throw new Error("Animation not found: "+t);var o=this.skeletonData.findAnimation(e);if(null==o)throw new Error("Animation not found: "+e);this.setMixWith(n,o,i)},t.prototype.setMixByName=function(e,i,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,i,n)},t.prototype.setMixWith=function(t,e,i){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var n=t.name+e.name;this.animationToMixTime[n]=i},t.prototype.getMix=function(t,e){var i=t.name+e.name,n=this.animationToMixTime[i];return void 0===n?this.defaultMix:n},t.deprecatedWarning1=!1,t}();t.AnimationStateData=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function e(t){this.atlas=t}return e.prototype.newRegionAttachment=function(e,i,n){var o=this.atlas.findRegion(n);if(null==o)throw new Error("Region not found in atlas: "+n+" (region attachment: "+i+")");var a=new t.RegionAttachment(i);return a.region=o,a},e.prototype.newMeshAttachment=function(e,i,n){var o=this.atlas.findRegion(n);if(null==o)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+i+")");var a=new t.MeshAttachment(i);return a.region=o,a},e.prototype.newBoundingBoxAttachment=function(e,i){return new t.BoundingBoxAttachment(i)},e.prototype.newPathAttachment=function(e,i){return new t.PathAttachment(i)},e.prototype.newPointAttachment=function(e,i){return new t.PointAttachment(i)},e.prototype.newClippingAttachment=function(e,i){return new t.ClippingAttachment(i)},e}();t.AtlasAttachmentLoader=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(t.BlendMode||(t.BlendMode={}))}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function e(t,e,i){if(this.matrix=new PIXI.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}return Object.defineProperty(e.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!0,configurable:!0}),e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(i,n,o,a,s,r,h){this.ax=i,this.ay=n,this.arotation=o,this.ascaleX=a,this.ascaleY=s,this.ashearX=r,this.ashearY=h,this.appliedValid=!0;var l=this.parent,p=this.matrix;if(null==l){var c=o+90+h,d=t.MathUtils.cosDeg(o+r)*a,u=t.MathUtils.cosDeg(c)*s,g=t.MathUtils.sinDeg(o+r)*a,m=t.MathUtils.sinDeg(c)*s,f=this.skeleton;return f.flipX&&(i=-i,d=-d,u=-u),f.flipY!==e.yDown&&(n=-n,g=-g,m=-m),p.a=d,p.c=u,p.b=g,p.d=m,p.tx=i+f.x,void(p.ty=n+f.y)}var y=l.matrix.a,v=l.matrix.c,b=l.matrix.b,w=l.matrix.d;switch(p.tx=y*i+v*n+l.matrix.tx,p.ty=b*i+w*n+l.matrix.ty,this.data.transformMode){case t.TransformMode.Normal:var c=o+90+h,d=t.MathUtils.cosDeg(o+r)*a,u=t.MathUtils.cosDeg(c)*s,g=t.MathUtils.sinDeg(o+r)*a,m=t.MathUtils.sinDeg(c)*s;return p.a=y*d+v*g,p.c=y*u+v*m,p.b=b*d+w*g,void(p.d=b*u+w*m);case t.TransformMode.OnlyTranslation:c=o+90+h;p.a=t.MathUtils.cosDeg(o+r)*a,p.c=t.MathUtils.cosDeg(c)*s,p.b=t.MathUtils.sinDeg(o+r)*a,p.d=t.MathUtils.sinDeg(c)*s;break;case t.TransformMode.NoRotationOrReflection:var S=0;(M=y*y+b*b)>1e-4?(v=b*(M=Math.abs(y*w-v*b)/M),w=y*M,S=Math.atan2(b,y)*t.MathUtils.radDeg):(y=0,b=0,S=90-Math.atan2(w,v)*t.MathUtils.radDeg);var x=o+r-S,P=o+h-S+90,d=t.MathUtils.cosDeg(x)*a,u=t.MathUtils.cosDeg(P)*s,g=t.MathUtils.sinDeg(x)*a,m=t.MathUtils.sinDeg(P)*s;p.a=y*d-v*g,p.c=y*u-v*m,p.b=b*d+w*g,p.d=b*u+w*m;break;case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:var _=t.MathUtils.cosDeg(o),k=t.MathUtils.sinDeg(o),A=y*_+v*k,T=b*_+w*k,M=Math.sqrt(A*A+T*T);M>1e-5&&(M=1/M),A*=M,T*=M,M=Math.sqrt(A*A+T*T);var C=Math.PI/2+Math.atan2(T,A),I=Math.cos(C)*M,B=Math.sin(C)*M,d=t.MathUtils.cosDeg(r)*a,u=t.MathUtils.cosDeg(90+h)*s,g=t.MathUtils.sinDeg(r)*a,m=t.MathUtils.sinDeg(90+h)*s;return p.a=A*d+I*g,p.c=A*u+I*m,p.b=T*d+B*g,p.d=T*u+B*m,void((this.data.transformMode!=t.TransformMode.NoScaleOrReflection?y*w-v*b<0:this.skeleton.flipX!=this.skeleton.flipY!=e.yDown)&&(p.c=-p.c,p.d=-p.d))}this.skeleton.flipX&&(p.a=-p.a,p.c=-p.c),this.skeleton.flipY!=e.yDown&&(p.b=-p.b,p.d=-p.d)},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*t.MathUtils.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*t.MathUtils.radDeg},e.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},e.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},e.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var e=this.parent,i=this.matrix;if(null==e)return this.ax=i.tx,this.ay=i.ty,this.arotation=Math.atan2(i.b,i.a)*t.MathUtils.radDeg,this.ascaleX=Math.sqrt(i.a*i.a+i.b*i.b),this.ascaleY=Math.sqrt(i.c*i.c+i.d*i.d),this.ashearX=0,void(this.ashearY=Math.atan2(i.a*i.c+i.b*i.d,i.a*i.d-i.b*i.c)*t.MathUtils.radDeg);var n=e.matrix,o=1/(n.a*n.d-n.b*n.c),a=i.tx-n.tx,s=i.ty-n.ty;this.ax=a*n.d*o-s*n.c*o,this.ay=s*n.a*o-a*n.b*o;var r=o*n.d,h=o*n.a,l=o*n.c,p=o*n.b,c=r*i.a-l*i.b,d=r*i.c-l*i.d,u=h*i.b-p*i.a,g=h*i.d-p*i.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+u*u),this.ascaleX>1e-4){var m=c*g-d*u;this.ascaleY=m/this.ascaleX,this.ashearY=Math.atan2(c*d+u*g,m)*t.MathUtils.radDeg,this.arotation=Math.atan2(u,c)*t.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(d*d+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,d)*t.MathUtils.radDeg},e.prototype.worldToLocal=function(t){var e=this.matrix,i=e.a,n=e.c,o=e.b,a=e.d,s=1/(i*a-n*o),r=t.x-e.tx,h=t.y-e.ty;return t.x=r*a*s-h*n*s,t.y=h*i*s-r*o*s,t},e.prototype.localToWorld=function(t){var e=this.matrix,i=t.x,n=t.y;return t.x=i*e.a+n*e.c+e.tx,t.y=i*e.b+n*e.d+e.ty,t},e.prototype.worldToLocalRotation=function(e){var i=t.MathUtils.sinDeg(e),n=t.MathUtils.cosDeg(e),o=this.matrix;return Math.atan2(o.a*i-o.b*n,o.d*n-o.c*i)*t.MathUtils.radDeg},e.prototype.localToWorldRotation=function(e){var i=t.MathUtils.sinDeg(e),n=t.MathUtils.cosDeg(e),o=this.matrix;return Math.atan2(n*o.b+i*o.d,n*o.a+i*o.c)*t.MathUtils.radDeg},e.prototype.rotateWorld=function(e){var i=this.matrix,n=i.a,o=i.c,a=i.b,s=i.d,r=t.MathUtils.cosDeg(e),h=t.MathUtils.sinDeg(e);i.a=r*n-h*a,i.c=r*o-h*s,i.b=h*n+r*a,i.d=h*o+r*s,this.appliedValid=!1},e.yDown=!1,e}();t.Bone=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){return function(t,e,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=i.Normal,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=n}}();t.BoneData=e;var i;!function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(i=t.TransformMode||(t.TransformMode={}))}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){return function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e}}();t.Event=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){return function(t){this.name=t}}();t.EventData=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function e(t,e){if(this.mix=1,this.bendDirection=0,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}return e.prototype.getOrder=function(){return this.data.order},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}},e.prototype.apply1=function(e,i,n,o){e.appliedValid||e.updateAppliedTransform();var a=e.parent.matrix,s=1/(a.a*a.d-a.b*a.c),r=i-a.tx,h=n-a.ty,l=(r*a.d-h*a.c)*s-e.ax,p=(h*a.a-r*a.b)*s-e.ay,c=Math.atan2(p,l)*t.MathUtils.radDeg-e.ashearX-e.arotation;e.ascaleX<0&&(c+=180),c>180?c-=360:c<-180&&(c+=360),e.updateWorldTransformWith(e.ax,e.ay,e.arotation+c*o,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)},e.prototype.apply2=function(e,i,n,o,a,s){if(0!=s){e.appliedValid||e.updateAppliedTransform(),i.appliedValid||i.updateAppliedTransform();var r=e.ax,h=e.ay,l=e.ascaleX,p=e.ascaleY,c=i.ascaleX,d=e.matrix,u=0,g=0,m=0;l<0?(l=-l,u=180,m=-1):(u=0,m=1),p<0&&(p=-p,m=-m),c<0?(c=-c,g=180):g=0;var f=i.ax,y=0,v=0,b=0,w=d.a,S=d.c,x=d.b,P=d.d,_=Math.abs(l-p)<=1e-4;_?(v=w*f+S*(y=i.ay)+d.tx,b=x*f+P*y+d.ty):(y=0,v=w*f+d.tx,b=x*f+d.ty);var k=e.parent.matrix;w=k.a,S=k.c,x=k.b;var A=1/(w*(P=k.d)-S*x),T=n-k.tx,M=o-k.ty,C=(T*P-M*S)*A-r,I=(M*w-T*x)*A-h,B=((T=v-k.tx)*P-(M=b-k.ty)*S)*A-r,G=(M*w-T*x)*A-h,L=Math.sqrt(B*B+G*G),E=i.data.length*c,O=0,D=0;t:if(_){var R=(C*C+I*I-L*L-(E*=l)*E)/(2*L*E);R<-1?R=-1:R>1&&(R=1),D=Math.acos(R)*a,w=L+E*R,S=E*Math.sin(D),O=Math.atan2(I*w-C*S,C*w+I*S)}else{var H=(w=l*E)*w,F=(S=p*E)*S,N=C*C+I*I,U=Math.atan2(I,C),X=-2*F*L,V=F-H;if((P=X*X-4*V*(x=F*L*L+H*N-H*F))>=0){var W=Math.sqrt(P);X<0&&(W=-W);var q=(W=-(X+W)/2)/V,j=x/W,Y=Math.abs(q)<Math.abs(j)?q:j;if(Y*Y<=N){M=Math.sqrt(N-Y*Y)*a,O=U-Math.atan2(M,Y),D=Math.atan2(M/p,(Y-L)/l);break t}}var z=t.MathUtils.PI,K=L-w,Q=K*K,Z=0,J=0,$=L+w,tt=$*$,et=0;(x=-w*L/(H-F))>=-1&&x<=1&&(x=Math.acos(x),(P=(T=w*Math.cos(x)+L)*T+(M=S*Math.sin(x))*M)<Q&&(z=x,Q=P,K=T,Z=M),P>tt&&(J=x,tt=P,$=T,et=M)),N<=(Q+tt)/2?(O=U-Math.atan2(Z*a,K),D=z*a):(O=U-Math.atan2(et*a,$),D=J*a)}var it=Math.atan2(y,f)*m,nt=e.arotation;(O=(O-it)*t.MathUtils.radDeg+u-nt)>180?O-=360:O<-180&&(O+=360),e.updateWorldTransformWith(r,h,nt+O*s,e.ascaleX,e.ascaleY,0,0),nt=i.arotation,(D=((D+it)*t.MathUtils.radDeg-i.ashearX)*m+g-nt)>180?D-=360:D<-180&&(D+=360),i.updateWorldTransformWith(f,y,nt+D*s,i.ascaleX,i.ascaleY,i.ashearX,i.ashearY)}else i.updateWorldTransform()},e}();t.IkConstraint=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){return function(t){this.order=0,this.bones=new Array,this.bendDirection=1,this.mix=1,this.name=t}}();t.IkConstraintData=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function e(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var i=0,n=t.bones.length;i<n;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return e.prototype.apply=function(){this.update()},e.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof t.PathAttachment){var i=this.rotateMix,n=this.translateMix,o=i>0;if(n>0||o){var a=this.data,s=a.spacingMode,r=s==t.SpacingMode.Length,h=a.rotateMode,l=h==t.RotateMode.Tangent,p=h==t.RotateMode.ChainScale,c=this.bones.length,d=l?c:c+1,u=this.bones,g=t.Utils.setArraySize(this.spaces,d),m=null,f=this.spacing;if(p||r){p&&(m=t.Utils.setArraySize(this.lengths,c));for(var y=0,v=d-1;y<v;){var b=(C=u[y]).data.length,w=b*C.matrix.a,S=b*C.matrix.b,x=Math.sqrt(w*w+S*S);p&&(m[y]=x),g[++y]=(r?b+f:f)*x/b}}else for(y=1;y<d;y++)g[y]=f;var P=this.computeWorldPositions(e,d,l,a.positionMode==t.PositionMode.Percent,s==t.SpacingMode.Percent),_=P[0],k=P[1],A=a.offsetRotation,T=!1;0==A?T=h==t.RotateMode.Chain:(T=!1,A*=(M=this.target.bone.matrix).a*M.d-M.b*M.c>0?t.MathUtils.degRad:-t.MathUtils.degRad);for(var y=0,M=3;y<c;y++,M+=3){var C=u[y],I=C.matrix;I.tx+=(_-I.tx)*n,I.ty+=(k-I.ty)*n;var B=(w=P[M])-_,G=(S=P[M+1])-k;if(p){var L=m[y];if(0!=L){var E=(Math.sqrt(B*B+G*G)/L-1)*i+1;I.a*=E,I.b*=E}}if(_=w,k=S,o){var O=I.a,D=I.c,R=I.b,H=I.d,F=0,N=0,U=0;if(F=l?P[M-1]:0==g[y+1]?P[M+2]:Math.atan2(G,B),F-=Math.atan2(R,O),T){N=Math.cos(F),U=Math.sin(F);var X=C.data.length;_+=(X*(N*O-U*R)-B)*i,k+=(X*(U*O+N*R)-G)*i}else F+=A;F>t.MathUtils.PI?F-=t.MathUtils.PI2:F<-t.MathUtils.PI&&(F+=t.MathUtils.PI2),F*=i,N=Math.cos(F),U=Math.sin(F),I.a=N*O-U*R,I.c=N*D-U*H,I.b=U*O+N*R,I.d=U*D+N*H}C.appliedValid=!1}}}},e.prototype.computeWorldPositions=function(i,n,o,a,s){var r=this.target,h=this.position,l=this.spaces,p=t.Utils.setArraySize(this.positions,3*n+2),c=null,d=i.closed,u=i.worldVerticesLength,g=u/6,m=e.NONE;if(!i.constantSpeed){var f=i.lengths,y=f[g-=d?1:2];if(a&&(h*=y),s)for(v=0;v<n;v++)l[v]*=y;c=t.Utils.setArraySize(this.world,8);for(var v=0,b=0,w=0;v<n;v++,b+=3){q=h+=W=l[v];if(d)(q%=y)<0&&(q+=y),w=0;else{if(q<0){m!=e.BEFORE&&(m=e.BEFORE,i.computeWorldVertices(r,2,4,c,0,2)),this.addBeforePosition(q,c,0,p,b);continue}if(q>y){m!=e.AFTER&&(m=e.AFTER,i.computeWorldVertices(r,u-6,4,c,0,2)),this.addAfterPosition(q-y,c,0,p,b);continue}}for(;;w++){var S=f[w];if(!(q>S)){0==w?q/=S:q=(q-(K=f[w-1]))/(S-K);break}}w!=m&&(m=w,d&&w==g?(i.computeWorldVertices(r,u-4,4,c,0,2),i.computeWorldVertices(r,0,4,c,4,2)):i.computeWorldVertices(r,6*w+2,8,c,0,2)),this.addCurvePosition(q,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],p,b,o||v>0&&0==W)}return p}d?(u+=2,c=t.Utils.setArraySize(this.world,u),i.computeWorldVertices(r,2,u-4,c,0,2),i.computeWorldVertices(r,0,2,c,u-4,2),c[u-2]=c[0],c[u-1]=c[1]):(g--,u-=4,c=t.Utils.setArraySize(this.world,u),i.computeWorldVertices(r,2,u,c,0,2));for(var x=t.Utils.setArraySize(this.curves,g),P=0,_=c[0],k=c[1],A=0,T=0,M=0,C=0,I=0,B=0,G=0,L=0,E=0,O=0,D=0,R=0,H=0,F=0,v=0,N=2;v<g;v++,N+=6)A=c[N],T=c[N+1],M=c[N+2],C=c[N+3],D=2*(G=.1875*(_-2*A+M))+(E=.09375*(3*(A-M)-_+(I=c[N+4]))),R=2*(L=.1875*(k-2*T+C))+(O=.09375*(3*(T-C)-k+(B=c[N+5]))),H=.75*(A-_)+G+.16666667*E,F=.75*(T-k)+L+.16666667*O,P+=Math.sqrt(H*H+F*F),H+=D,F+=R,D+=E,R+=O,P+=Math.sqrt(H*H+F*F),H+=D,F+=R,P+=Math.sqrt(H*H+F*F),H+=D+E,F+=R+O,P+=Math.sqrt(H*H+F*F),x[v]=P,_=I,k=B;if(a&&(h*=P),s)for(v=0;v<n;v++)l[v]*=P;for(var U=this.segments,X=0,v=0,b=0,w=0,V=0;v<n;v++,b+=3){var W=l[v],q=h+=W;if(d)(q%=P)<0&&(q+=P),w=0;else{if(q<0){this.addBeforePosition(q,c,0,p,b);continue}if(q>P){this.addAfterPosition(q-P,c,u-4,p,b);continue}}for(;;w++){var j=x[w];if(!(q>j)){0==w?q/=j:q=(q-(K=x[w-1]))/(j-K);break}}if(w!=m){m=w;var Y=6*w;for(_=c[Y],k=c[Y+1],A=c[Y+2],T=c[Y+3],M=c[Y+4],C=c[Y+5],D=2*(G=.03*(_-2*A+M))+(E=.006*(3*(A-M)-_+(I=c[Y+6]))),R=2*(L=.03*(k-2*T+C))+(O=.006*(3*(T-C)-k+(B=c[Y+7]))),H=.3*(A-_)+G+.16666667*E,F=.3*(T-k)+L+.16666667*O,X=Math.sqrt(H*H+F*F),U[0]=X,Y=1;Y<8;Y++)H+=D,F+=R,D+=E,R+=O,X+=Math.sqrt(H*H+F*F),U[Y]=X;H+=D,F+=R,X+=Math.sqrt(H*H+F*F),U[8]=X,H+=D+E,F+=R+O,X+=Math.sqrt(H*H+F*F),U[9]=X,V=0}for(q*=X;;V++){var z=U[V];if(!(q>z)){if(0==V)q/=z;else{var K=U[V-1];q=V+(q-K)/(z-K)}break}}this.addCurvePosition(.1*q,_,k,A,T,M,C,I,B,p,b,o||v>0&&0==W)}return p},e.prototype.addBeforePosition=function(t,e,i,n,o){var a=e[i],s=e[i+1],r=e[i+2]-a,h=e[i+3]-s,l=Math.atan2(h,r);n[o]=a+t*Math.cos(l),n[o+1]=s+t*Math.sin(l),n[o+2]=l},e.prototype.addAfterPosition=function(t,e,i,n,o){var a=e[i+2],s=e[i+3],r=a-e[i],h=s-e[i+1],l=Math.atan2(h,r);n[o]=a+t*Math.cos(l),n[o+1]=s+t*Math.sin(l),n[o+2]=l},e.prototype.addCurvePosition=function(t,e,i,n,o,a,s,r,h,l,p,c){(0==t||isNaN(t))&&(t=1e-4);var d=t*t,u=d*t,g=1-t,m=g*g,f=m*g,y=g*t,v=3*y,b=g*v,w=v*t,S=e*f+n*b+a*w+r*u,x=i*f+o*b+s*w+h*u;l[p]=S,l[p+1]=x,c&&(l[p+2]=Math.atan2(x-(i*m+o*y*2+s*d),S-(e*m+n*y*2+a*d)))},e.prototype.getOrder=function(){return this.data.order},e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,e}();t.PathConstraint=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){return function(t){this.order=0,this.bones=new Array,this.name=t}}();t.PathConstraintData=e;!function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(t.PositionMode||(t.PositionMode={}));!function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"}(t.SpacingMode||(t.SpacingMode={}));!function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(t.RotateMode||(t.RotateMode={}))}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function e(e){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.flipX=!1,this.flipY=!1,this.x=0,this.y=0,null==e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(l=0;l<e.bones.length;l++){var i=e.bones[l],n=void 0;if(null==i.parent)n=new t.Bone(i,this,null);else{var o=this.bones[i.parent.index];n=new t.Bone(i,this,o),o.children.push(n)}this.bones.push(n)}this.slots=new Array,this.drawOrder=new Array;for(l=0;l<e.slots.length;l++){var a=e.slots[l],n=this.bones[a.boneData.index],s=new t.Slot(a,n);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(l=0;l<e.ikConstraints.length;l++){var r=e.ikConstraints[l];this.ikConstraints.push(new t.IkConstraint(r,this))}this.transformConstraints=new Array;for(l=0;l<e.transformConstraints.length;l++){var h=e.transformConstraints[l];this.transformConstraints.push(new t.TransformConstraint(h,this))}this.pathConstraints=new Array;for(var l=0;l<e.pathConstraints.length;l++){var p=e.pathConstraints[l];this.pathConstraints.push(new t.PathConstraint(p,this))}this.color=new t.Color(1,1,1,1),this.updateCache()}return e.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].sorted=!1;var n=this.ikConstraints,o=this.transformConstraints,a=this.pathConstraints,s=n.length,r=o.length,h=a.length,l=s+r+h;t:for(e=0;e<l;e++){for(p=0;p<s;p++)if((c=n[p]).data.order==e){this.sortIkConstraint(c);continue t}for(p=0;p<r;p++)if((c=o[p]).data.order==e){this.sortTransformConstraint(c);continue t}for(var p=0;p<h;p++){var c=a[p];if(c.data.order==e){this.sortPathConstraint(c);continue t}}}for(var e=0,i=t.length;e<i;e++)this.sortBone(t[e])},e.prototype.sortIkConstraint=function(t){var e=t.target;this.sortBone(e);var i=t.bones,n=i[0];if(this.sortBone(n),i.length>1){var o=i[i.length-1];this._updateCache.indexOf(o)>-1||this.updateCacheReset.push(o)}this._updateCache.push(t),this.sortReset(n.children),i[i.length-1].sorted=!0},e.prototype.sortPathConstraint=function(e){var i=e.target,n=i.data.index,o=i.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,o),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,o);for(var a=0,s=this.data.skins.length;a<s;a++)this.sortPathConstraintAttachment(this.data.skins[a],n,o);var r=i.getAttachment();r instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(r,o);for(var h=e.bones,l=h.length,a=0;a<l;a++)this.sortBone(h[a]);this._updateCache.push(e);for(a=0;a<l;a++)this.sortReset(h[a].children);for(a=0;a<l;a++)h[a].sorted=!0},e.prototype.sortTransformConstraint=function(t){this.sortBone(t.target);var e=t.bones,i=e.length;if(t.data.local)for(o=0;o<i;o++){var n=e[o];this.sortBone(n.parent),this._updateCache.indexOf(n)>-1||this.updateCacheReset.push(n)}else for(var o=0;o<i;o++)this.sortBone(e[o]);this._updateCache.push(t);for(a=0;a<i;a++)this.sortReset(e[a].children);for(var a=0;a<i;a++)e[a].sorted=!0},e.prototype.sortPathConstraintAttachment=function(t,e,i){var n=t.attachments[e];if(n)for(var o in n)this.sortPathConstraintAttachmentWith(n[o],i)},e.prototype.sortPathConstraintAttachmentWith=function(e,i){if(e instanceof t.PathAttachment){var n=e.bones;if(null==n)this.sortBone(i);else for(var o=this.bones,a=0;a<n.length;)for(var s=n[a++],r=a+s;a<r;a++){var h=n[a];this.sortBone(o[h])}}},e.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},e.prototype.sortReset=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];n.sorted&&this.sortReset(n.children),n.sorted=!1}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,i=t.length;e<i;e++){var n=t[e];n.ax=n.x,n.ay=n.y,n.arotation=n.rotation,n.ascaleX=n.scaleX,n.ascaleY=n.scaleY,n.ashearX=n.shearX,n.ashearY=n.shearY,n.appliedValid=!0}for(var o=this._updateCache,e=0,i=o.length;e<i;e++)o[e].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].setToSetupPose();for(var n=this.ikConstraints,e=0,i=n.length;e<i;e++)(s=n[e]).bendDirection=s.data.bendDirection,s.mix=s.data.mix;for(var o=this.transformConstraints,e=0,i=o.length;e<i;e++){r=(s=o[e]).data;s.rotateMix=r.rotateMix,s.translateMix=r.translateMix,s.scaleMix=r.scaleMix,s.shearMix=r.shearMix}for(var a=this.pathConstraints,e=0,i=a.length;e<i;e++){var s=a[e],r=s.data;s.position=r.position,s.spacing=r.spacing,s.rotateMix=r.rotateMix,s.translateMix=r.translateMix}},e.prototype.setSlotsToSetupPose=function(){var e=this.slots;t.Utils.arrayCopy(e,0,this.drawOrder,0,e.length);for(var i=0,n=e.length;i<n;i++)e[i].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++){var o=e[i];if(o.data.name==t)return o}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++){var o=e[i];if(o.data.name==t)return o}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},e.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},e.prototype.setSkin=function(t){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,i=0,n=e.length;i<n;i++){var o=e[i],a=o.data.attachmentName;if(null!=a){var s=t.getAttachment(i,a);null!=s&&o.setAttachment(s)}}this.skin=t},e.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},e.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var i=this.skin.getAttachment(t,e);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},e.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,n=0,o=i.length;n<o;n++){var a=i[n];if(a.data.name==t){var s=null;if(null!=e&&null==(s=this.getAttachment(n,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void a.setAttachment(s)}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,n=e.length;i<n;i++){var o=e[i];if(o.data.name==t)return o}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,n=e.length;i<n;i++){var o=e[i];if(o.data.name==t)return o}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++){var o=e[i];if(o.data.name==t)return o}return null},e.prototype.getBounds=function(e,i,n){if(null==e)throw new Error("offset cannot be null.");if(null==i)throw new Error("size cannot be null.");for(var o=this.drawOrder,a=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,l=0,p=o.length;l<p;l++){var c=o[l],d=0,u=null,g=c.getAttachment();if(g instanceof t.RegionAttachment)d=8,u=t.Utils.setArraySize(n,d,0),g.computeWorldVertices(c.bone,u,0,2);else if(g instanceof t.MeshAttachment){var m=g;d=m.worldVerticesLength,u=t.Utils.setArraySize(n,d,0),m.computeWorldVertices(c,0,d,u,0,2)}if(null!=u)for(var f=0,y=u.length;f<y;f+=2){var v=u[f],b=u[f+1];a=Math.min(a,v),s=Math.min(s,b),r=Math.max(r,v),h=Math.max(h,b)}}e.set(a,s),i.set(r-a,h-s)},e.prototype.update=function(t){this.time+=t},e}();t.Skeleton=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new t.Pool(function(){return t.Utils.newFloatArray(16)})}return e.prototype.update=function(e,i){if(null==e)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,o=this.polygons,a=this.polygonPool,s=e.slots,r=s.length;n.length=0,a.freeAll(o),o.length=0;for(var h=0;h<r;h++){var l=s[h],p=l.getAttachment();if(p instanceof t.BoundingBoxAttachment){var c=p;n.push(c);var d=a.obtain();d.length!=c.worldVerticesLength&&(d=t.Utils.newFloatArray(c.worldVerticesLength)),o.push(d),c.computeWorldVertices(l,0,c.worldVerticesLength,d,0,2)}}i?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,o=this.polygons,a=0,s=o.length;a<s;a++)for(var r=o[a],h=r,l=0,p=r.length;l<p;l+=2){var c=h[l],d=h[l+1];t=Math.min(t,c),e=Math.min(e,d),i=Math.max(i,c),n=Math.max(n,d)}this.minX=t,this.minY=e,this.maxX=i,this.maxY=n},e.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,e,i,n){var o=this.minX,a=this.minY,s=this.maxX,r=this.maxY;if(t<=o&&i<=o||e<=a&&n<=a||t>=s&&i>=s||e>=r&&n>=r)return!1;var h=(n-e)/(i-t),l=h*(o-t)+e;if(l>a&&l<r)return!0;if((l=h*(s-t)+e)>a&&l<r)return!0;var p=(a-e)/h+t;return p>o&&p<s||(p=(r-e)/h+t)>o&&p<s},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,e){for(var i=this.polygons,n=0,o=i.length;n<o;n++)if(this.containsPointPolygon(i[n],t,e))return this.boundingBoxes[n];return null},e.prototype.containsPointPolygon=function(t,e,i){for(var n=t,o=t.length,a=o-2,s=!1,r=0;r<o;r+=2){var h=n[r+1],l=n[a+1];if(h<i&&l>=i||l<i&&h>=i){var p=n[r];p+(i-h)/(l-h)*(n[a]-p)<e&&(s=!s)}a=r}return s},e.prototype.intersectsSegment=function(t,e,i,n){for(var o=this.polygons,a=0,s=o.length;a<s;a++)if(this.intersectsSegmentPolygon(o[a],t,e,i,n))return this.boundingBoxes[a];return null},e.prototype.intersectsSegmentPolygon=function(t,e,i,n,o){for(var a=t,s=t.length,r=e-n,h=i-o,l=e*o-i*n,p=a[s-2],c=a[s-1],d=0;d<s;d+=2){var u=a[d],g=a[d+1],m=p*g-c*u,f=p-u,y=c-g,v=r*y-h*f,b=(l*f-r*m)/v;if((b>=p&&b<=u||b>=u&&b<=p)&&(b>=e&&b<=n||b>=n&&b<=e)){var w=(l*y-h*m)/v;if((w>=c&&w<=g||w>=g&&w<=c)&&(w>=i&&w<=o||w>=o&&w<=i))return!0}p=u,c=g}return!1},e.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e}();t.SkeletonBounds=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function e(){this.triangulator=new t.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return e.prototype.clipStart=function(i,n){if(null!=this.clipAttachment)return 0;this.clipAttachment=n;var o=n.worldVerticesLength,a=t.Utils.setArraySize(this.clippingPolygon,o);n.computeWorldVertices(i,0,o,a,0,2);var s=this.clippingPolygon;e.makeClockwise(s);for(var r=this.clippingPolygons=this.triangulator.decompose(s,this.triangulator.triangulate(s)),h=0,l=r.length;h<l;h++){var p=r[h];e.makeClockwise(p),p.push(p[0]),p.push(p[1])}return r.length},e.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},e.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},e.prototype.isClipping=function(){return null!=this.clipAttachment},e.prototype.clipTriangles=function(e,i,n,o,a,s,r,h){var l=this.clipOutput,p=this.clippedVertices,c=this.clippedTriangles,d=this.clippingPolygons,u=this.clippingPolygons.length,g=h?12:8,m=0;p.length=0,c.length=0;t:for(var f=0;f<o;f+=3)for(var y=n[f]<<1,v=e[y],b=e[y+1],w=a[y],S=a[y+1],x=e[y=n[f+1]<<1],P=e[y+1],_=a[y],k=a[y+1],A=e[y=n[f+2]<<1],T=e[y+1],M=a[y],C=a[y+1],I=0;I<u;I++){var B=p.length;if(!this.clip(v,b,x,P,A,T,d[I],l)){(N=t.Utils.setArraySize(p,B+3*g))[B]=v,N[B+1]=b,N[B+2]=s.r,N[B+3]=s.g,N[B+4]=s.b,N[B+5]=s.a,h?(N[B+6]=w,N[B+7]=S,N[B+8]=r.r,N[B+9]=r.g,N[B+10]=r.b,N[B+11]=r.a,N[B+12]=x,N[B+13]=P,N[B+14]=s.r,N[B+15]=s.g,N[B+16]=s.b,N[B+17]=s.a,N[B+18]=_,N[B+19]=k,N[B+20]=r.r,N[B+21]=r.g,N[B+22]=r.b,N[B+23]=r.a,N[B+24]=A,N[B+25]=T,N[B+26]=s.r,N[B+27]=s.g,N[B+28]=s.b,N[B+29]=s.a,N[B+30]=M,N[B+31]=C,N[B+32]=r.r,N[B+33]=r.g,N[B+34]=r.b,N[B+35]=r.a):(N[B+6]=w,N[B+7]=S,N[B+8]=x,N[B+9]=P,N[B+10]=s.r,N[B+11]=s.g,N[B+12]=s.b,N[B+13]=s.a,N[B+14]=_,N[B+15]=k,N[B+16]=A,N[B+17]=T,N[B+18]=s.r,N[B+19]=s.g,N[B+20]=s.b,N[B+21]=s.a,N[B+22]=M,N[B+23]=C),B=c.length,(K=t.Utils.setArraySize(c,B+3))[B]=m,K[B+1]=m+1,K[B+2]=m+2,m+=3;continue t}var G=l.length;if(0!=G){for(var L=P-T,E=A-x,O=v-A,D=T-b,R=1/(L*O+E*(b-T)),H=G>>1,F=this.clipOutput,N=t.Utils.setArraySize(p,B+H*g),U=0;U<G;U+=2){var X=F[U],V=F[U+1];N[B]=X,N[B+1]=V,N[B+2]=s.r,N[B+3]=s.g,N[B+4]=s.b,N[B+5]=s.a;var W=X-A,q=V-T,j=(L*W+E*q)*R,Y=(D*W+O*q)*R,z=1-j-Y;N[B+6]=w*j+_*Y+M*z,N[B+7]=S*j+k*Y+C*z,h&&(N[B+8]=r.r,N[B+9]=r.g,N[B+10]=r.b,N[B+11]=r.a),B+=g}B=c.length;var K=t.Utils.setArraySize(c,B+3*(H-2));H--;for(U=1;U<H;U++)K[B]=m,K[B+1]=m+U,K[B+2]=m+U+1,B+=3;m+=H+1}}},e.prototype.clip=function(t,e,i,n,o,a,s,r){var h=r,l=!1,p=null;s.length%4>=2?(p=r,r=this.scratch):p=this.scratch,p.length=0,p.push(t),p.push(e),p.push(i),p.push(n),p.push(o),p.push(a),p.push(t),p.push(e),r.length=0;for(var c=s,d=s.length-4,u=0;;u+=2){for(var g=c[u],m=c[u+1],f=c[u+2],y=c[u+3],v=g-f,b=m-y,w=p,S=p.length-2,x=r.length,P=0;P<S;P+=2){var _=w[P],k=w[P+1],A=w[P+2],T=w[P+3],M=v*(T-y)-b*(A-f)>0;if(v*(k-y)-b*(_-f)>0){if(M){r.push(A),r.push(T);continue}B=((I=A-_)*(m-k)-(C=T-k)*(g-_))/(C*(f-g)-I*(y-m));r.push(g+(f-g)*B),r.push(m+(y-m)*B)}else if(M){var C=T-k,I=A-_,B=(I*(m-k)-C*(g-_))/(C*(f-g)-I*(y-m));r.push(g+(f-g)*B),r.push(m+(y-m)*B),r.push(A),r.push(T)}l=!0}if(x==r.length)return h.length=0,!0;if(r.push(r[0]),r.push(r[1]),u==d)break;var G=r;(r=p).length=0,p=G}if(h!=r){h.length=0;for(var u=0,L=r.length-2;u<L;u++)h[u]=r[u]}else h.length=h.length-2;return l},e.makeClockwise=function(t){for(var e=t,i=t.length,n=e[i-2]*e[1]-e[0]*e[i-1],o=0,a=0,s=0,r=0,h=i-3;r<h;r+=2)o=e[r],a=e[r+1],s=e[r+2],n+=o*e[r+3]-s*a;if(!(n<0))for(var r=0,l=i-2,h=i>>1;r<h;r+=2){var p=e[r],c=e[r+1],d=l-r;e[r]=e[d],e[r+1]=e[d+1],e[d]=p,e[d+1]=c}},e}();t.SkeletonClipping=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++){var o=e[i];if(o.name==t)return o}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++){var o=e[i];if(o.name==t)return o}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,i=0,n=e.length;i<n;i++){var o=e[i];if(o.name==t)return o}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,i=0,n=e.length;i<n;i++){var o=e[i];if(o.name==t)return o}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,i=0,n=e.length;i<n;i++){var o=e[i];if(o.name==t)return o}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,n=e.length;i<n;i++){var o=e[i];if(o.name==t)return o}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,n=e.length;i<n;i++){var o=e[i];if(o.name==t)return o}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++){var o=e[i];if(o.name==t)return o}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t}();t.SkeletonData=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(i){var n=this.scale,o=new t.SkeletonData,a="string"==typeof i?JSON.parse(i):i,s=a.skeleton;if(null!=s&&(o.hash=s.hash,o.version=s.spine,o.width=s.width,o.height=s.height,o.fps=s.fps,o.imagesPath=s.images),a.bones)for(T=0;T<a.bones.length;T++){var r=a.bones[T],h=null,l=this.getValue(r,"parent",null);if(null!=l&&null==(h=o.findBone(l)))throw new Error("Parent bone not found: "+l);(u=new t.BoneData(o.bones.length,r.name,h)).length=this.getValue(r,"length",0)*n,u.x=this.getValue(r,"x",0)*n,u.y=this.getValue(r,"y",0)*n,u.rotation=this.getValue(r,"rotation",0),u.scaleX=this.getValue(r,"scaleX",1),u.scaleY=this.getValue(r,"scaleY",1),u.shearX=this.getValue(r,"shearX",0),u.shearY=this.getValue(r,"shearY",0),u.transformMode=e.transformModeFromString(this.getValue(r,"transform","normal")),o.bones.push(u)}if(a.slots)for(T=0;T<a.slots.length;T++){var p=(_=a.slots[T]).name,c=_.bone,d=o.findBone(c);if(null==d)throw new Error("Slot bone not found: "+c);var u=new t.SlotData(o.slots.length,p,d),g=this.getValue(_,"color",null);null!=g&&u.color.setFromString(g);var m=this.getValue(_,"dark",null);null!=m&&(u.darkColor=new t.Color(1,1,1,1),u.darkColor.setFromString(m)),u.attachmentName=this.getValue(_,"attachment",null),u.blendMode=e.blendModeFromString(this.getValue(_,"blend","normal")),o.slots.push(u)}if(a.ik)for(T=0;T<a.ik.length;T++){f=a.ik[T];(u=new t.IkConstraintData(f.name)).order=this.getValue(f,"order",0);for(y=0;y<f.bones.length;y++){c=f.bones[y];if(null==(v=o.findBone(c)))throw new Error("IK bone not found: "+c);u.bones.push(v)}b=f.target;if(u.target=o.findBone(b),null==u.target)throw new Error("IK target bone not found: "+b);u.bendDirection=this.getValue(f,"bendPositive",!0)?1:-1,u.mix=this.getValue(f,"mix",1),o.ikConstraints.push(u)}if(a.transform)for(T=0;T<a.transform.length;T++){f=a.transform[T];(u=new t.TransformConstraintData(f.name)).order=this.getValue(f,"order",0);for(y=0;y<f.bones.length;y++){c=f.bones[y];if(null==(v=o.findBone(c)))throw new Error("Transform constraint bone not found: "+c);u.bones.push(v)}b=f.target;if(u.target=o.findBone(b),null==u.target)throw new Error("Transform constraint target bone not found: "+b);u.local=this.getValue(f,"local",!1),u.relative=this.getValue(f,"relative",!1),u.offsetRotation=this.getValue(f,"rotation",0),u.offsetX=this.getValue(f,"x",0)*n,u.offsetY=this.getValue(f,"y",0)*n,u.offsetScaleX=this.getValue(f,"scaleX",0),u.offsetScaleY=this.getValue(f,"scaleY",0),u.offsetShearY=this.getValue(f,"shearY",0),u.rotateMix=this.getValue(f,"rotateMix",1),u.translateMix=this.getValue(f,"translateMix",1),u.scaleMix=this.getValue(f,"scaleMix",1),u.shearMix=this.getValue(f,"shearMix",1),o.transformConstraints.push(u)}if(a.path)for(T=0;T<a.path.length;T++){var f=a.path[T];(u=new t.PathConstraintData(f.name)).order=this.getValue(f,"order",0);for(var y=0;y<f.bones.length;y++){var c=f.bones[y],v=o.findBone(c);if(null==v)throw new Error("Transform constraint bone not found: "+c);u.bones.push(v)}var b=f.target;if(u.target=o.findSlot(b),null==u.target)throw new Error("Path target slot not found: "+b);u.positionMode=e.positionModeFromString(this.getValue(f,"positionMode","percent")),u.spacingMode=e.spacingModeFromString(this.getValue(f,"spacingMode","length")),u.rotateMode=e.rotateModeFromString(this.getValue(f,"rotateMode","tangent")),u.offsetRotation=this.getValue(f,"rotation",0),u.position=this.getValue(f,"position",0),u.positionMode==t.PositionMode.Fixed&&(u.position*=n),u.spacing=this.getValue(f,"spacing",0),u.spacingMode!=t.SpacingMode.Length&&u.spacingMode!=t.SpacingMode.Fixed||(u.spacing*=n),u.rotateMix=this.getValue(f,"rotateMix",1),u.translateMix=this.getValue(f,"translateMix",1),o.pathConstraints.push(u)}if(a.skins)for(var w in a.skins){var S=a.skins[w],x=new t.Skin(w);for(var p in S){var P=o.findSlotIndex(p);if(-1==P)throw new Error("Slot not found: "+p);var _=S[p];for(var k in _){var A=this.readAttachment(_[k],x,P,k,o);null!=A&&x.addAttachment(P,k,A)}}o.skins.push(x),"default"==x.name&&(o.defaultSkin=x)}for(var T=0,M=this.linkedMeshes.length;T<M;T++){var C=this.linkedMeshes[T];if(null==(x=null==C.skin?o.defaultSkin:o.findSkin(C.skin)))throw new Error("Skin not found: "+C.skin);var I=x.getAttachment(C.slotIndex,C.parent);if(null==I)throw new Error("Parent mesh not found: "+C.parent);C.mesh.setParentMesh(I)}if(this.linkedMeshes.length=0,a.events)for(var B in a.events){var G=a.events[B];(u=new t.EventData(B)).intValue=this.getValue(G,"int",0),u.floatValue=this.getValue(G,"float",0),u.stringValue=this.getValue(G,"string",""),o.events.push(u)}if(a.animations)for(var L in a.animations){var E=a.animations[L];this.readAnimation(E,L,o)}return o},e.prototype.readAttachment=function(e,n,o,a,s){var r=this.scale;switch(a=this.getValue(e,"name",a),this.getValue(e,"type","region")){case"region":var h=this.getValue(e,"path",a),l=this.attachmentLoader.newRegionAttachment(n,a,h);return null==l?null:(l.path=h,l.x=this.getValue(e,"x",0)*r,l.y=this.getValue(e,"y",0)*r,l.scaleX=this.getValue(e,"scaleX",1),l.scaleY=this.getValue(e,"scaleY",1),l.rotation=this.getValue(e,"rotation",0),l.width=e.width*r,l.height=e.height*r,null!=(S=this.getValue(e,"color",null))&&l.color.setFromString(S),l);case"boundingbox":var p=this.attachmentLoader.newBoundingBoxAttachment(n,a);return null==p?null:(this.readVertices(e,p,e.vertexCount<<1),null!=(S=this.getValue(e,"color",null))&&p.color.setFromString(S),p);case"mesh":case"linkedmesh":var h=this.getValue(e,"path",a),c=this.attachmentLoader.newMeshAttachment(n,a,h);if(null==c)return null;c.path=h,null!=(S=this.getValue(e,"color",null))&&c.color.setFromString(S);var d=this.getValue(e,"parent",null);if(null!=d)return c.inheritDeform=this.getValue(e,"deform",!0),this.linkedMeshes.push(new i(c,this.getValue(e,"skin",null),o,d)),c;var u=e.uvs;return this.readVertices(e,c,u.length),c.triangles=e.triangles,c.regionUVs=u,c.hullLength=2*this.getValue(e,"hull",0),c;case"path":if(null==(h=this.attachmentLoader.newPathAttachment(n,a)))return null;h.closed=this.getValue(e,"closed",!1),h.constantSpeed=this.getValue(e,"constantSpeed",!0);w=e.vertexCount;this.readVertices(e,h,w<<1);for(var g=t.Utils.newArray(w/3,0),m=0;m<e.lengths.length;m++)g[m]=e.lengths[m]*r;return h.lengths=g,null!=(S=this.getValue(e,"color",null))&&h.color.setFromString(S),h;case"point":var f=this.attachmentLoader.newPointAttachment(n,a);return null==f?null:(f.x=this.getValue(e,"x",0)*r,f.y=this.getValue(e,"y",0)*r,f.rotation=this.getValue(e,"rotation",0),null!=(S=this.getValue(e,"color",null))&&f.color.setFromString(S),f);case"clipping":var y=this.attachmentLoader.newClippingAttachment(n,a);if(null==y)return null;var v=this.getValue(e,"end",null);if(null!=v){var b=s.findSlot(v);if(null==b)throw new Error("Clipping end slot not found: "+v);y.endSlot=b}var w=e.vertexCount;this.readVertices(e,y,w<<1);var S=this.getValue(e,"color",null);return null!=S&&y.color.setFromString(S),y}return null},e.prototype.readVertices=function(e,i,n){var o=this.scale;i.worldVerticesLength=n;var a=e.vertices;if(n!=a.length){for(var s=new Array,r=new Array,h=0,l=a.length;h<l;){var p=a[h++];r.push(p);for(var c=h+4*p;h<c;h+=4)r.push(a[h]),s.push(a[h+1]*o),s.push(a[h+2]*o),s.push(a[h+3])}i.bones=r,i.vertices=t.Utils.toFloatArray(s)}else{var d=t.Utils.toFloatArray(a);if(1!=o)for(var h=0,l=a.length;h<l;h++)d[h]*=o;i.vertices=d}},e.prototype.readAnimation=function(e,i,n){var o=this.scale,a=new Array,s=0;if(e.slots)for(var r in e.slots){I=e.slots[r];if(-1==(Q=n.findSlotIndex(r)))throw new Error("Slot not found: "+r);for(var h in I){B=I[h];if("attachment"==h){(v=new t.AttachmentTimeline(B.length)).slotIndex=Q;for(var l=0,p=0;p<B.length;p++){c=B[p];v.setFrame(l++,c.time,c.name)}a.push(v),s=Math.max(s,v.frames[v.getFrameCount()-1])}else if("color"==h){(v=new t.ColorTimeline(B.length)).slotIndex=Q;for(var l=0,p=0;p<B.length;p++){var c=B[p],d=new t.Color;d.setFromString(c.color),v.setFrame(l,c.time,d.r,d.g,d.b,d.a),this.readCurve(c,v,l),l++}a.push(v),s=Math.max(s,v.frames[(v.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if("twoColor"!=h)throw new Error("Invalid timeline type for a slot: "+h+" ("+r+")");(v=new t.TwoColorTimeline(B.length)).slotIndex=Q;for(var l=0,p=0;p<B.length;p++){var c=B[p],u=new t.Color,g=new t.Color;u.setFromString(c.light),g.setFromString(c.dark),v.setFrame(l,c.time,u.r,u.g,u.b,u.a,g.r,g.g,g.b),this.readCurve(c,v,l),l++}a.push(v),s=Math.max(s,v.frames[(v.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}}}if(e.bones)for(var m in e.bones){var f=e.bones[m],y=n.findBoneIndex(m);if(-1==y)throw new Error("Bone not found: "+m);for(var h in f){B=f[h];if("rotate"===h){(v=new t.RotateTimeline(B.length)).boneIndex=y;for(var l=0,p=0;p<B.length;p++){c=B[p];v.setFrame(l,c.time,c.angle),this.readCurve(c,v,l),l++}a.push(v),s=Math.max(s,v.frames[(v.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==h&&"scale"!==h&&"shear"!==h)throw new Error("Invalid timeline type for a bone: "+h+" ("+m+")");var v=null,b=1;"scale"===h?v=new t.ScaleTimeline(B.length):"shear"===h?v=new t.ShearTimeline(B.length):(v=new t.TranslateTimeline(B.length),b=o),v.boneIndex=y;for(var l=0,p=0;p<B.length;p++){var c=B[p],w=this.getValue(c,"x",0),S=this.getValue(c,"y",0);v.setFrame(l,c.time,w*b,S*b),this.readCurve(c,v,l),l++}a.push(v),s=Math.max(s,v.frames[(v.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}}if(e.ik)for(var x in e.ik){var P=e.ik[x],_=n.findIkConstraint(x);(v=new t.IkConstraintTimeline(P.length)).ikConstraintIndex=n.ikConstraints.indexOf(_);for(var l=0,p=0;p<P.length;p++){c=P[p];v.setFrame(l,c.time,this.getValue(c,"mix",1),this.getValue(c,"bendPositive",!0)?1:-1),this.readCurve(c,v,l),l++}a.push(v),s=Math.max(s,v.frames[(v.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(e.transform)for(var x in e.transform){var P=e.transform[x],_=n.findTransformConstraint(x);(v=new t.TransformConstraintTimeline(P.length)).transformConstraintIndex=n.transformConstraints.indexOf(_);for(var l=0,p=0;p<P.length;p++){c=P[p];v.setFrame(l,c.time,this.getValue(c,"rotateMix",1),this.getValue(c,"translateMix",1),this.getValue(c,"scaleMix",1),this.getValue(c,"shearMix",1)),this.readCurve(c,v,l),l++}a.push(v),s=Math.max(s,v.frames[(v.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(e.paths)for(var x in e.paths){var P=e.paths[x],k=n.findPathConstraintIndex(x);if(-1==k)throw new Error("Path constraint not found: "+x);var A=n.pathConstraints[k];for(var h in P){B=P[h];if("position"===h||"spacing"===h){var v=null,b=1;"spacing"===h?(v=new t.PathConstraintSpacingTimeline(B.length),A.spacingMode!=t.SpacingMode.Length&&A.spacingMode!=t.SpacingMode.Fixed||(b=o)):(v=new t.PathConstraintPositionTimeline(B.length),A.positionMode==t.PositionMode.Fixed&&(b=o)),v.pathConstraintIndex=k;for(var l=0,p=0;p<B.length;p++){c=B[p];v.setFrame(l,c.time,this.getValue(c,h,0)*b),this.readCurve(c,v,l),l++}a.push(v),s=Math.max(s,v.frames[(v.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===h){(v=new t.PathConstraintMixTimeline(B.length)).pathConstraintIndex=k;for(var l=0,p=0;p<B.length;p++){c=B[p];v.setFrame(l,c.time,this.getValue(c,"rotateMix",1),this.getValue(c,"translateMix",1)),this.readCurve(c,v,l),l++}a.push(v),s=Math.max(s,v.frames[(v.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}}if(e.deform)for(var T in e.deform){var M=e.deform[T],C=n.findSkin(T);if(null==C)throw new Error("Skin not found: "+T);for(var r in M){var I=M[r];if(-1==(Q=n.findSlotIndex(r)))throw new Error("Slot not found: "+I.name);for(var h in I){var B=I[h],G=C.getAttachment(Q,h);if(null==G)throw new Error("Deform attachment not found: "+B.name);var L=null!=G.bones,E=G.vertices,O=L?E.length/3*2:E.length;(v=new t.DeformTimeline(B.length)).slotIndex=Q,v.attachment=G;for(var l=0,D=0;D<B.length;D++){var c=B[D],R=void 0,H=this.getValue(c,"vertices",null);if(null==H)R=L?t.Utils.newFloatArray(O):E;else{R=t.Utils.newFloatArray(O);var F=this.getValue(c,"offset",0);if(t.Utils.arrayCopy(H,0,R,F,H.length),1!=o)for(var N=(p=F)+H.length;p<N;p++)R[p]*=o;if(!L)for(p=0;p<O;p++)R[p]+=E[p]}v.setFrame(l,c.time,R),this.readCurve(c,v,l),l++}a.push(v),s=Math.max(s,v.frames[v.getFrameCount()-1])}}}var U=e.drawOrder;if(null==U&&(U=e.draworder),null!=U){for(var v=new t.DrawOrderTimeline(U.length),X=n.slots.length,l=0,D=0;D<U.length;D++){var V=U[D],W=null,q=this.getValue(V,"offsets",null);if(null!=q){W=t.Utils.newArray(X,-1);for(var j=t.Utils.newArray(X-q.length,0),Y=0,z=0,p=0;p<q.length;p++){var K=q[p],Q=n.findSlotIndex(K.slot);if(-1==Q)throw new Error("Slot not found: "+K.slot);for(;Y!=Q;)j[z++]=Y++;W[Y+K.offset]=Y++}for(;Y<X;)j[z++]=Y++;for(p=X-1;p>=0;p--)-1==W[p]&&(W[p]=j[--z])}v.setFrame(l++,V.time,W)}a.push(v),s=Math.max(s,v.frames[v.getFrameCount()-1])}if(e.events){for(var v=new t.EventTimeline(e.events.length),l=0,p=0;p<e.events.length;p++){var Z=e.events[p],J=n.findEvent(Z.name);if(null==J)throw new Error("Event not found: "+Z.name);var $=new t.Event(t.Utils.toSinglePrecision(Z.time),J);$.intValue=this.getValue(Z,"int",J.intValue),$.floatValue=this.getValue(Z,"float",J.floatValue),$.stringValue=this.getValue(Z,"string",J.stringValue),v.setFrame(l++,$)}a.push(v),s=Math.max(s,v.frames[v.getFrameCount()-1])}if(isNaN(s))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new t.Animation(i,a,s))},e.prototype.readCurve=function(t,e,i){if(t.curve)if("stepped"===t.curve)e.setStepped(i);else if("[object Array]"===Object.prototype.toString.call(t.curve)){var n=t.curve;e.setCurve(i,n[0],n[1],n[2],n[3])}},e.prototype.getValue=function(t,e,i){return void 0!==t[e]?t[e]:i},e.blendModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.BlendMode.Normal;if("additive"==e)return t.BlendMode.Additive;if("multiply"==e)return t.BlendMode.Multiply;if("screen"==e)return t.BlendMode.Screen;throw new Error("Unknown blend mode: "+e)},e.positionModeFromString=function(e){if("fixed"==(e=e.toLowerCase()))return t.PositionMode.Fixed;if("percent"==e)return t.PositionMode.Percent;throw new Error("Unknown position mode: "+e)},e.spacingModeFromString=function(e){if("length"==(e=e.toLowerCase()))return t.SpacingMode.Length;if("fixed"==e)return t.SpacingMode.Fixed;if("percent"==e)return t.SpacingMode.Percent;throw new Error("Unknown position mode: "+e)},e.rotateModeFromString=function(e){if("tangent"==(e=e.toLowerCase()))return t.RotateMode.Tangent;if("chain"==e)return t.RotateMode.Chain;if("chainscale"==e)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+e)},e.transformModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.TransformMode.Normal;if("onlytranslation"==e)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==e)return t.TransformMode.NoRotationOrReflection;if("noscale"==e)return t.TransformMode.NoScale;if("noscaleorreflection"==e)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+e)},e}();t.SkeletonJson=e;var i=function(){return function(t,e,i,n){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=n}}()}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function t(t){if(this.attachments=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return t.prototype.addAttachment=function(t,e,i){if(null==i)throw new Error("attachment cannot be null.");var n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=i},t.prototype.getAttachment=function(t,e){var i=this.attachments[t];return i?i[e]:null},t.prototype.attachAll=function(t,e){for(var i=0,n=0;n<t.slots.length;n++){var o=t.slots[n],a=o.getAttachment();if(a&&i<e.attachments.length){var s=e.attachments[i];for(var r in s)if(a==s[r]){var h=this.getAttachment(i,name);null!=h&&o.setAttachment(h);break}}i++}},t}();t.Skin=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function e(e,i){if(this.attachmentVertices=new Array,null==e)throw new Error("data cannot be null.");if(null==i)throw new Error("bone cannot be null.");this.data=e,this.bone=i,this.color=new t.Color,this.darkColor=null==e.darkColor?null:new t.Color,this.setToSetupPose(),this.blendMode=this.data.blendMode}return e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e}();t.Slot=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){return function(e,i,n){if(this.color=new t.Color(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(null==i)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=e,this.name=i,this.boneData=n}}();t.SlotData=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function t(t){this._image=t}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return i.Nearest;case"linear":return i.Linear;case"mipmap":return i.MipMap;case"mipmapnearestnearest":return i.MipMapNearestNearest;case"mipmaplinearnearest":return i.MipMapLinearNearest;case"mipmapnearestlinear":return i.MipMapNearestLinear;case"mipmaplinearlinear":return i.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},t.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return n.MirroredRepeat;case"clamptoedge":return n.ClampToEdge;case"repeat":return n.Repeat;default:throw new Error("Unknown texture wrap "+t)}},t}();t.Texture=e;var i;!function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(i=t.TextureFilter||(t.TextureFilter={}));var n;!function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(n=t.TextureWrap||(t.TextureWrap={}));var o=function(){function t(){this.size=null}return Object.defineProperty(t.prototype,"width",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.width:t.trim?t.trim.width:t.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.height:t.trim?t.trim.height:t.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return console.warn("Deprecation Warning: @Hackerham: I guess, if you are using PIXI-SPINE ATLAS region.offsetY, you want a texture, right? Use region.texture from now on."),this.spineOffsetY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalWidth",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.width:t.crop.width:t.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.height:t.crop.height:t.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!0,configurable:!0}),t}();t.TextureRegion=o}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function e(t,e,i){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,i)}return e.prototype.addTexture=function(e,i){for(var a=this.pages,s=null,r=0;r<a.length;r++)if(a[r].baseTexture===i.baseTexture){s=a[r];break}if(null===s){(s=new n).name="texturePage";var h=i.baseTexture;s.width=h.realWidth,s.height=h.realHeight,s.baseTexture=h,s.minFilter=s.magFilter=t.TextureFilter.Nearest,s.uWrap=t.TextureWrap.ClampToEdge,s.vWrap=t.TextureWrap.ClampToEdge,a.push(s)}var l=new o;return l.name=e,l.page=s,l.texture=i,l.index=-1,this.regions.push(l),l},e.prototype.addTextureHash=function(t,e){for(var i in t)t.hasOwnProperty(i)&&this.addTexture(e&&-1!==i.indexOf(".")?i.substr(0,i.lastIndexOf(".")):i,t[i])},e.prototype.addSpineAtlas=function(t,e,i){return this.load(t,e,i)},e.prototype.load=function(e,a,s){var r=this;if(null==a)throw new Error("textureLoader cannot be null.");var h=new i(e),l=new Array(4),p=null,c=function(){for(;;){var e=h.readLine();if(null==e)return s&&s(r);if(0==(e=e.trim()).length)p=null;else{if(!p){(p=new n).name=e,2==h.readTuple(l)&&(p.width=parseInt(l[0]),p.height=parseInt(l[1]),h.readTuple(l)),h.readTuple(l),p.minFilter=t.Texture.filterFromString(l[0]),p.magFilter=t.Texture.filterFromString(l[1]);var i=h.readValue();p.uWrap=t.TextureWrap.ClampToEdge,p.vWrap=t.TextureWrap.ClampToEdge,"x"==i?p.uWrap=t.TextureWrap.Repeat:"y"==i?p.vWrap=t.TextureWrap.Repeat:"xy"==i&&(p.uWrap=p.vWrap=t.TextureWrap.Repeat),a(e,function(t){p.baseTexture=t,t.hasLoaded||(t.width=p.width,t.height=p.height),r.pages.push(p),p.setFilters(),p.width&&p.height||(p.width=t.realWidth,p.height=t.realHeight,p.width&&p.height||console.log("ERROR spine atlas page "+p.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),c()}),r.pages.push(p);break}var d=new o;d.name=e,d.page=p;var u="true"==h.readValue()?6:0;h.readTuple(l);var g=parseInt(l[0]),m=parseInt(l[1]);h.readTuple(l);var f=parseInt(l[0]),y=parseInt(l[1]),v=p.baseTexture.resolution;g/=v,m/=v,f/=v,y/=v;var b=new PIXI.Rectangle(g,m,u?y:f,u?f:y);4==h.readTuple(l)&&4==h.readTuple(l)&&h.readTuple(l);var w=parseInt(l[0])/v,S=parseInt(l[1])/v;h.readTuple(l);var x=parseInt(l[0])/v,P=parseInt(l[1])/v,_=new PIXI.Rectangle(0,0,w,S),k=new PIXI.Rectangle(x,S-y-P,f,y);if("3"!=PIXI.VERSION[0])d.texture=new PIXI.Texture(d.page.baseTexture,b,_,k,u);else{var A=new PIXI.Rectangle(g,m,f,y),T=A.clone();k.width=w,k.height=S,d.texture=new PIXI.Texture(d.page.baseTexture,A,T,k,u)}d.index=parseInt(h.readValue()),d.texture._updateUvs(),r.regions.push(d)}}};c()},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},e}();t.TextureAtlas=e;var i=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},t.prototype.readTuple=function(t){var e=this.readLine(),i=e.indexOf(":");if(-1==i)throw new Error("Invalid line: "+e);for(var n=0,o=i+1;n<3;n++){var a=e.indexOf(",",o);if(-1==a)break;t[n]=e.substr(o,a-o).trim(),o=a+1}return t[n]=e.substring(o).trim(),n+1},t}(),n=function(){function e(){}return e.prototype.setFilters=function(){var e=this.baseTexture,i=this.minFilter;i==t.TextureFilter.Linear?e.scaleMode=PIXI.SCALE_MODES.LINEAR:this.minFilter==t.TextureFilter.Nearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:(e.mipmap=!0,i==t.TextureFilter.MipMapNearestNearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:e.scaleMode=PIXI.SCALE_MODES.LINEAR)},e}();t.TextureAtlasPage=n;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t.TextureRegion);t.TextureAtlasRegion=o}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function e(e,i){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new t.Vector2,null==e)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(var n=0;n<e.bones.length;n++)this.bones.push(i.findBone(e.bones[n].name));this.target=i.findBone(e.target.name)}return e.prototype.apply=function(){this.update()},e.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},e.prototype.applyAbsoluteWorld=function(){for(var e=this.rotateMix,i=this.translateMix,n=this.scaleMix,o=this.shearMix,a=this.target,s=a.matrix,r=s.a,h=s.c,l=s.b,p=s.d,c=r*p-h*l>0?t.MathUtils.degRad:-t.MathUtils.degRad,d=this.data.offsetRotation*c,u=this.data.offsetShearY*c,g=this.bones,m=0,f=g.length;m<f;m++){var y=g[m],v=!1,b=y.matrix;if(0!=e){var w=b.a,S=b.c,x=b.b,P=b.d;(I=Math.atan2(l,r)-Math.atan2(x,w)+d)>t.MathUtils.PI?I-=t.MathUtils.PI2:I<-t.MathUtils.PI&&(I+=t.MathUtils.PI2),I*=e;var _=Math.cos(I),k=Math.sin(I);b.a=_*w-k*x,b.c=_*S-k*P,b.b=k*w+_*x,b.d=k*S+_*P,v=!0}if(0!=i){var A=this.temp;a.localToWorld(A.set(this.data.offsetX,this.data.offsetY)),b.tx+=(A.x-b.tx)*i,b.ty+=(A.y-b.ty)*i,v=!0}if(n>0){var T=Math.sqrt(b.a*b.a+b.b*b.b),M=Math.sqrt(r*r+l*l);T>1e-5&&(T=(T+(M-T+this.data.offsetScaleX)*n)/T),b.a*=T,b.b*=T,T=Math.sqrt(b.c*b.c+b.d*b.d),M=Math.sqrt(h*h+p*p),T>1e-5&&(T=(T+(M-T+this.data.offsetScaleY)*n)/T),b.c*=T,b.d*=T,v=!0}if(o>0){var S=b.c,P=b.d,C=Math.atan2(P,S),I=Math.atan2(p,h)-Math.atan2(l,r)-(C-Math.atan2(b.b,b.a));I>t.MathUtils.PI?I-=t.MathUtils.PI2:I<-t.MathUtils.PI&&(I+=t.MathUtils.PI2),I=C+(I+u)*o;T=Math.sqrt(S*S+P*P);b.c=Math.cos(I)*T,b.d=Math.sin(I)*T,v=!0}v&&(y.appliedValid=!1)}},e.prototype.applyRelativeWorld=function(){for(var e=this.rotateMix,i=this.translateMix,n=this.scaleMix,o=this.shearMix,a=this.target,s=a.matrix,r=s.a,h=s.c,l=s.b,p=s.d,c=r*p-h*l>0?t.MathUtils.degRad:-t.MathUtils.degRad,d=this.data.offsetRotation*c,u=this.data.offsetShearY*c,g=this.bones,m=0,f=g.length;m<f;m++){var y=g[m],v=!1,b=y.matrix;if(0!=e){var w=b.a,S=b.c,x=b.b,P=b.d;(T=Math.atan2(l,r)+d)>t.MathUtils.PI?T-=t.MathUtils.PI2:T<-t.MathUtils.PI&&(T+=t.MathUtils.PI2),T*=e;var _=Math.cos(T),k=Math.sin(T);b.a=_*w-k*x,b.c=_*S-k*P,b.b=k*w+_*x,b.d=k*S+_*P,v=!0}if(0!=i){var A=this.temp;a.localToWorld(A.set(this.data.offsetX,this.data.offsetY)),b.tx+=A.x*i,b.ty+=A.y*i,v=!0}if(n>0){M=(Math.sqrt(r*r+l*l)-1+this.data.offsetScaleX)*n+1;b.a*=M,b.b*=M,M=(Math.sqrt(h*h+p*p)-1+this.data.offsetScaleY)*n+1,b.c*=M,b.d*=M,v=!0}if(o>0){var T=Math.atan2(p,h)-Math.atan2(l,r);T>t.MathUtils.PI?T-=t.MathUtils.PI2:T<-t.MathUtils.PI&&(T+=t.MathUtils.PI2);var S=b.c,P=b.d;T=Math.atan2(P,S)+(T-t.MathUtils.PI/2+u)*o;var M=Math.sqrt(S*S+P*P);b.c=Math.cos(T)*M,b.d=Math.sin(T)*M,v=!0}v&&(y.appliedValid=!1)}},e.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,o=this.target;o.appliedValid||o.updateAppliedTransform();for(var a=this.bones,s=0,r=a.length;s<r;s++){var h=a[s];h.appliedValid||h.updateAppliedTransform();var l=h.arotation;if(0!=t){m=o.arotation-l+this.data.offsetRotation;l+=(m-=360*(16384-(16384.499999999996-m/360|0)))*t}var p=h.ax,c=h.ay;0!=e&&(p+=(o.ax-p+this.data.offsetX)*e,c+=(o.ay-c+this.data.offsetY)*e);var d=h.ascaleX,u=h.ascaleY;i>0&&(d>1e-5&&(d=(d+(o.ascaleX-d+this.data.offsetScaleX)*i)/d),u>1e-5&&(u=(u+(o.ascaleY-u+this.data.offsetScaleY)*i)/u));var g=h.ashearY;if(n>0){var m=o.ashearY-g+this.data.offsetShearY;m-=360*(16384-(16384.499999999996-m/360|0)),h.shearY+=m*n}h.updateWorldTransformWith(p,c,l,d,u,h.ashearX,g)}},e.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,o=this.target;o.appliedValid||o.updateAppliedTransform();for(var a=this.bones,s=0,r=a.length;s<r;s++){var h=a[s];h.appliedValid||h.updateAppliedTransform();var l=h.arotation;0!=t&&(l+=(o.arotation+this.data.offsetRotation)*t);var p=h.ax,c=h.ay;0!=e&&(p+=(o.ax+this.data.offsetX)*e,c+=(o.ay+this.data.offsetY)*e);var d=h.ascaleX,u=h.ascaleY;i>0&&(d>1e-5&&(d*=(o.ascaleX-1+this.data.offsetScaleX)*i+1),u>1e-5&&(u*=(o.ascaleY-1+this.data.offsetScaleY)*i+1));var g=h.ashearY;n>0&&(g+=(o.ashearY+this.data.offsetShearY)*n),h.updateWorldTransformWith(p,c,l,d,u,h.ashearX,g)}},e.prototype.getOrder=function(){return this.data.order},e}();t.TransformConstraint=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){return function(t){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,null==t)throw new Error("name cannot be null.");this.name=t}}();t.TransformConstraintData=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function e(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool(function(){return new Array}),this.polygonIndicesPool=new t.Pool(function(){return new Array})}return e.prototype.triangulate=function(t){var i=t,n=t.length>>1,o=this.indicesArray;o.length=0;for(s=0;s<n;s++)o[s]=s;var a=this.isConcaveArray;a.length=0;for(var s=0,r=n;s<r;++s)a[s]=e.isConcave(s,n,i,o);var h=this.triangles;for(h.length=0;n>3;){for(var l=n-1,s=0,p=1;;){t:if(!a[s]){for(var c=o[l]<<1,d=o[s]<<1,u=o[p]<<1,g=i[c],m=i[c+1],f=i[d],y=i[d+1],v=i[u],b=i[u+1],w=(p+1)%n;w!=l;w=(w+1)%n)if(a[w]){var S=o[w]<<1,x=i[S],P=i[S+1];if(e.positiveArea(v,b,g,m,x,P)&&e.positiveArea(g,m,f,y,x,P)&&e.positiveArea(f,y,v,b,x,P))break t}break}if(0==p){do{if(!a[s])break;s--}while(s>0);break}l=s,s=p,p=(p+1)%n}h.push(o[(n+s-1)%n]),h.push(o[s]),h.push(o[(s+1)%n]),o.splice(s,1),a.splice(s,1);var _=(--n+s-1)%n,k=s==n?0:s;a[_]=e.isConcave(_,n,i,o),a[k]=e.isConcave(k,n,i,o)}return 3==n&&(h.push(o[2]),h.push(o[0]),h.push(o[1])),h},e.prototype.decompose=function(t,i){var n=t,o=this.convexPolygons;this.polygonPool.freeAll(o),o.length=0;var a=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(a),a.length=0;var s=this.polygonIndicesPool.obtain();s.length=0;var r=this.polygonPool.obtain();r.length=0;for(var h=-1,l=0,p=0,c=i.length;p<c;p+=3){var d=i[p]<<1,u=i[p+1]<<1,g=i[p+2]<<1,m=n[d],f=n[d+1],y=n[u],v=n[u+1],b=n[g],w=n[g+1],S=!1;if(h==d){var x=r.length-4,P=e.winding(r[x],r[x+1],r[x+2],r[x+3],b,w),_=e.winding(b,w,r[0],r[1],r[2],r[3]);P==l&&_==l&&(r.push(b),r.push(w),s.push(g),S=!0)}S||(r.length>0?(o.push(r),a.push(s)):(this.polygonPool.free(r),this.polygonIndicesPool.free(s)),(r=this.polygonPool.obtain()).length=0,r.push(m),r.push(f),r.push(y),r.push(v),r.push(b),r.push(w),(s=this.polygonIndicesPool.obtain()).length=0,s.push(d),s.push(u),s.push(g),l=e.winding(m,f,y,v,b,w),h=d)}r.length>0&&(o.push(r),a.push(s));for(var p=0,c=o.length;p<c;p++)if(0!=(s=a[p]).length)for(var k=s[0],A=s[s.length-1],T=(r=o[p])[x=r.length-4],M=r[x+1],C=r[x+2],I=r[x+3],B=r[0],G=r[1],L=r[2],E=r[3],O=e.winding(T,M,C,I,B,G),D=0;D<c;D++)if(D!=p){var R=a[D];if(3==R.length){var H=R[0],F=R[1],N=R[2],U=o[D],b=U[U.length-2],w=U[U.length-1];if(H==k&&F==A){var P=e.winding(T,M,C,I,b,w),_=e.winding(b,w,B,G,L,E);P==O&&_==O&&(U.length=0,R.length=0,r.push(b),r.push(w),s.push(N),T=C,M=I,C=b,I=w,D=0)}}}for(p=o.length-1;p>=0;p--)0==(r=o[p]).length&&(o.splice(p,1),this.polygonPool.free(r),s=a[p],a.splice(p,1),this.polygonIndicesPool.free(s));return o},e.isConcave=function(t,e,i,n){var o=n[(e+t-1)%e]<<1,a=n[t]<<1,s=n[(t+1)%e]<<1;return!this.positiveArea(i[o],i[o+1],i[a],i[a+1],i[s],i[s+1])},e.positiveArea=function(t,e,i,n,o,a){return t*(a-n)+i*(e-a)+o*(n-e)>=0},e.winding=function(t,e,i,n,o,a){var s=i-t,r=n-e;return o*r-a*s+s*e-t*r>=0?1:-1},e}();t.Triangulator=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function t(){this.array=new Array}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return void 0!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}();t.IntSet=e;var i=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.r=t,this.g=e,this.b=i,this.a=n}return t.prototype.set=function(t,e,i,n){return this.r=t,this.g=e,this.b=i,this.a=n,this.clamp(),this},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},t.prototype.add=function(t,e,i,n){return this.r+=t,this.g+=e,this.b+=i,this.a+=n,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}();t.Color=i;var n=function(){function t(){}return t.clamp=function(t,e,i){return t<e?e:t>i?i:t},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(t){return t>0?1:t<0?-1:0},t.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},t.randomTriangular=function(e,i){return t.randomTriangularWith(e,i,.5*(e+i))},t.randomTriangularWith=function(t,e,i){var n=Math.random(),o=e-t;return n<=(i-t)/o?t+Math.sqrt(n*o*(i-t)):e-Math.sqrt((1-n)*o*(e-i))},t.PI=3.1415927,t.PI2=2*t.PI,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}();t.MathUtils=n;var o=function(){function t(){}return t.prototype.apply=function(t,e,i){return t+(e-t)*this.applyInternal(i)},t}();t.Interpolation=o;var a=function(t){function e(e){var i=t.call(this)||this;return i.power=2,i.power=e,i}return __extends(e,t),e.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},e}(o);t.Pow=a;var s=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},e}(a);t.PowOut=s;var r=function(){function t(){}return t.arrayCopy=function(t,e,i,n,o){for(var a=e,s=n;a<e+o;a++,s++)i[s]=t[a]},t.setArraySize=function(t,e,i){void 0===i&&(i=0);var n=t.length;if(n==e)return t;if(t.length=e,n<e)for(var o=n;o<e;o++)t[o]=i;return t},t.ensureArrayCapacity=function(e,i,n){return void 0===n&&(n=0),e.length>=i?e:t.setArraySize(e,i,n)},t.newArray=function(t,e){for(var i=new Array(t),n=0;n<t;n++)i[n]=e;return i},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var i=new Array(e),n=0;n<i.length;n++)i[n]=0;return i},t.newShortArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var i=new Array(e),n=0;n<i.length;n++)i[n]=0;return i},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.toSinglePrecision=function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e},t.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t}();t.Utils=r;var h=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var i=t.bones[e],n=i.matrix;console.log(i.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.tx+", "+n.ty)}},t}();t.DebugUtils=h;var l=function(){function t(t){this.items=new Array,this.instantiator=t}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)t[e].reset&&t[e].reset(),this.items[e]=t[e]},t.prototype.clear=function(){this.items.length=0},t}();t.Pool=l;var p=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}();t.Vector2=p;var c=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}();t.TimeKeeper=c;var d=function(){function t(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},t}();t.WindowedMean=d}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){return function(t){if(null==t)throw new Error("name cannot be null.");this.name=t}}();t.Attachment=e;var i=function(t){function e(i){var n=t.call(this,i)||this;return n.id=(65535&e.nextID++)<<11,n.worldVerticesLength=0,n}return __extends(e,t),e.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},e.prototype.computeWorldVertices=function(t,e,i,n,o,a){i=o+(i>>1)*a;var s=t.bone.skeleton,r=t.attachmentVertices,h=this.vertices,l=this.bones;if(null!=l){for(var p=0,c=0,d=0;d<e;d+=2)p+=(v=l[p])+1,c+=v;var u=s.bones;if(0==r.length)for(var g=o,m=3*c;g<i;g+=a){var f=0,y=0,v=l[p++];for(v+=p;p<v;p++,m+=3){var b=u[l[p]].matrix,w=h[m],S=h[m+1],x=h[m+2];f+=(w*b.a+S*b.c+b.tx)*x,y+=(w*b.b+S*b.d+b.ty)*x}n[g]=f,n[g+1]=y}else for(var P=r,g=o,m=3*c,_=c<<1;g<i;g+=a){var f=0,y=0,v=l[p++];for(v+=p;p<v;p++,m+=3,_+=2){var b=u[l[p]].matrix,w=h[m]+P[_],S=h[m+1]+P[_+1],x=h[m+2];f+=(w*b.a+S*b.c+b.tx)*x,y+=(w*b.b+S*b.d+b.ty)*x}n[g]=f,n[g+1]=y}}else{r.length>0&&(h=r);for(var k=(b=t.bone.matrix).tx,A=b.ty,T=b.a,m=b.c,M=b.b,C=b.d,I=e,g=o;g<i;I+=2,g+=a){var w=h[I],S=h[I+1];n[g]=w*T+S*m+k,n[g+1]=w*M+S*C+A}}},e.prototype.applyDeform=function(t){return this==t},e.nextID=0,e}(e);t.VertexAttachment=i}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point"}(t.AttachmentType||(t.AttachmentType={}))}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(1,1,1,1),n}return __extends(i,e),i}(t.VertexAttachment);t.BoundingBoxAttachment=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(.2275,.2275,.8078,1),n}return __extends(i,e),i}(t.VertexAttachment);t.ClippingAttachment=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(1,1,1,1),n.inheritDeform=!1,n.tempColor=new t.Color(0,0,0,0),n}return __extends(i,e),i.prototype.updateUVs=function(e,i){var n=this.regionUVs.length;if(i&&i.length==n||(i=t.Utils.newFloatArray(n)),null!=e){for(var o=e.texture._uvs,a=e.width,s=e.height,r=e.originalWidth,h=e.originalHeight,l=e.offsetX,p=e.pixiOffsetY,c=0;c<n;c+=2){var d=this.regionUVs[c],u=this.regionUVs[c+1];d=(d*r-l)/a,u=(u*h-p)/s,i[c]=(o.x0*(1-d)+o.x1*d)*(1-u)+(o.x3*(1-d)+o.x2*d)*u,i[c+1]=(o.y0*(1-d)+o.y1*d)*(1-u)+(o.y3*(1-d)+o.y2*d)*u}return i}},i.prototype.applyDeform=function(t){return this==t||this.inheritDeform&&this.parentMesh==t},i.prototype.getParentMesh=function(){return this.parentMesh},i.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},i}(t.VertexAttachment);t.MeshAttachment=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.closed=!1,n.constantSpeed=!1,n.color=new t.Color(1,1,1,1),n}return __extends(i,e),i}(t.VertexAttachment);t.PathAttachment=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(.38,.94,0,1),n}return __extends(i,e),i.prototype.computeWorldPosition=function(t,e){var i=t.matrix;return e.x=this.x*i.a+this.y*i.c+t.worldX,e.y=this.x*i.b+this.y*i.d+t.worldY,e},i.prototype.computeWorldRotation=function(e){var i=e.matrix,n=t.MathUtils.cosDeg(this.rotation),o=t.MathUtils.sinDeg(this.rotation),a=n*i.a+o*i.c,s=n*i.b+o*i.d;return Math.atan2(s,a)*t.MathUtils.radDeg},i}(t.VertexAttachment);t.PointAttachment=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new t.Color(1,1,1,1),n.offset=t.Utils.newFloatArray(8),n.uvs=t.Utils.newFloatArray(8),n.tempColor=new t.Color(1,1,1,1),n}return __extends(i,e),i.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,o=-this.height/2*this.scaleY+this.region.offsetY*e,a=n+this.region.width*t,s=o+this.region.height*e,r=this.rotation*Math.PI/180,h=Math.cos(r),l=Math.sin(r),p=n*h+this.x,c=n*l,d=o*h+this.y,u=o*l,g=a*h+this.x,m=a*l,f=s*h+this.y,y=s*l,v=this.offset;v[i.OX1]=p-u,v[i.OY1]=d+c,v[i.OX2]=p-y,v[i.OY2]=f+c,v[i.OX3]=g-y,v[i.OY3]=f+m,v[i.OX4]=g-u,v[i.OY4]=d+m},i.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},i.prototype.computeWorldVertices=function(t,e,n,o){var a=this.offset,s=t.matrix,r=s.tx,h=s.ty,l=s.a,p=s.c,c=s.b,d=s.d,u=0,g=0;u=a[i.OX1],g=a[i.OY1],e[n]=u*l+g*p+r,e[n+1]=u*c+g*d+h,n+=o,u=a[i.OX2],g=a[i.OY2],e[n]=u*l+g*p+r,e[n+1]=u*c+g*d+h,n+=o,u=a[i.OX3],g=a[i.OY3],e[n]=u*l+g*p+r,e[n+1]=u*c+g*d+h,n+=o,u=a[i.OX4],g=a[i.OY4],e[n]=u*l+g*p+r,e[n+1]=u*c+g*d+h},i.OX1=0,i.OY1=1,i.OX2=2,i.OY2=3,i.OX3=4,i.OY3=5,i.OX4=6,i.OY4=7,i.X1=0,i.Y1=1,i.C1R=2,i.C1G=3,i.C1B=4,i.C1A=5,i.U1=6,i.V1=7,i.X2=8,i.Y2=9,i.C2R=10,i.C2G=11,i.C2B=12,i.C2A=13,i.U2=14,i.V2=15,i.X3=16,i.Y3=17,i.C3R=18,i.C3G=19,i.C3B=20,i.C3A=21,i.U3=22,i.V3=23,i.X4=24,i.Y4=25,i.C4R=26,i.C4G=27,i.C4B=28,i.C4A=29,i.U4=30,i.V4=31,i}(t.Attachment);t.RegionAttachment=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function e(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return e.prototype.begin=function(t){},e.prototype.transform=function(e,i,n,o){e.x+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY),e.y+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},e.prototype.end=function(){},e}();t.JitterEffect=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){!function(t){var e=function(){function e(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return e.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},e.prototype.transform=function(i,n,o,a){var s=this.angle*t.MathUtils.degreesToRadians,r=i.x-this.worldX,h=i.y-this.worldY,l=Math.sqrt(r*r+h*h);if(l<this.radius){var p=e.interpolation.apply(0,s,(this.radius-l)/this.radius),c=Math.cos(p),d=Math.sin(p);i.x=c*r-d*h+this.worldX,i.y=d*r+c*h+this.worldY}},e.prototype.end=function(){},e.interpolation=new t.PowOut(2),e}();t.SwirlEffect=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(t){function e(t){return t.type===PIXI.loaders.Resource.TYPE.JSON}function i(){return function(i,a){if(!i.data||!e(i)||!i.data.bones)return a();var s=i.metadata||{},r=s?i.metadata.spineSkeletonScale:null,h=s?i.metadata.spineAtlas:null;if(!1===h)return a();if(h&&h.pages){var l=new t.core.SkeletonJson(new t.core.AtlasAttachmentLoader(h)).readSkeletonData(i.data);return i.spineData=l,i.spineAtlas=h,a()}var p=s.spineAtlasSuffix||".atlas",c=i.url.substr(0,i.url.lastIndexOf("."))+p;c=c.replace(this.baseUrl,"");var d={crossOrigin:i.crossOrigin,xhrType:PIXI.loaders.Resource.XHR_RESPONSE_TYPE.TEXT,metadata:s.spineMetadata||null,parentResource:i},u={crossOrigin:i.crossOrigin,metadata:s.imageMetadata||null,parentResource:i},g=i.url.substr(0,i.url.lastIndexOf("/")+1);g=g.replace(this.baseUrl,"");var m=s.images?o(s.images):s.image?o({default:s.image}):s.imageLoader?s.imageLoader(this,i.name+"_atlas_page_",g,u):n(this,i.name+"_atlas_page_",g,u);this.add(i.name+"_atlas",c,d,function(e){new t.core.TextureAtlas(e.xhr.responseText,m,function(e){var n=new t.core.SkeletonJson(new t.core.AtlasAttachmentLoader(e));r&&(n.scale=r),i.spineData=n.readSkeletonData(i.data),i.spineAtlas=e,a()})})}}function n(t,e,i,n){return i&&i.lastIndexOf("/")!==i.length-1&&(i+="/"),function(o,a){var s=e+o,r=i+o;t.add(s,r,n,function(t){a(t.texture.baseTexture)})}}function o(t){return function(e,i){var n=t[e]||t.default;i(n&&n.baseTexture?n.baseTexture:n)}}t.atlasParser=i,t.imageLoaderAdapter=n,t.syncImageLoaderAdapter=function(t,e){return t&&t.lastIndexOf("/")!==t.length-1&&(t+="/"),function(t,i){i(PIXI.BaseTexture.fromImage(t,e))}},t.staticImageLoader=o,PIXI.loaders.Loader.addPixiMiddleware(i),PIXI.loader.use(i())}(pixi_spine||(pixi_spine={})),Math.fround||(Math.fround=Math.fround=function(t){return function(e){return t[0]=e,t[0]}}(new Float32Array(1)));var pixi_spine;!function(t){function e(){var t=this.parent.worldTransform,e=this.worldTransform,i=this.localTransform;e.a=i.a*t.a+i.b*t.c,e.b=i.a*t.b+i.b*t.d,e.c=i.c*t.a+i.d*t.c,e.d=i.c*t.b+i.d*t.d,e.tx=i.tx*t.a+i.ty*t.c+t.tx,e.ty=i.tx*t.b+i.ty*t.d+t.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null}t.core.Bone.yDown=!0;var i=[0,0,0],n=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(PIXI.Sprite);t.SpineSprite=n;var o=function(t){function e(e,i,n,o,a){return t.call(this,e,i,n,o,a)||this}return __extends(e,t),e}(PIXI.mesh.Mesh);t.SpineMesh=o;var a=function(a){function s(e){var i=a.call(this)||this;if(i.hackTextureBySlotName=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=this.skeleton.findSlotIndex(t);return-1!=n&&this.hackTextureBySlotIndex(n,e,i)},!e)throw new Error("The spineData param is required.");if("string"==typeof e)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');i.spineData=e,i.skeleton=new t.core.Skeleton(e),i.skeleton.updateWorldTransform(),i.stateData=new t.core.AnimationStateData(e),i.state=new t.core.AnimationState(i.stateData),i.slotContainers=[],i.tempClipContainers=[];for(var n=0,o=i.skeleton.slots.length;n<o;n++){var s=i.skeleton.slots[n],r=s.attachment,h=new PIXI.Container;if(i.slotContainers.push(h),i.addChild(h),i.tempClipContainers.push(null),r instanceof t.core.RegionAttachment){var l=r.region.name,p=i.createSprite(s,r,l);s.currentSprite=p,s.currentSpriteName=l,h.addChild(p)}else if(r instanceof t.core.MeshAttachment){var c=i.createMesh(s,r);s.currentMesh=c,s.currentMeshName=r.name,h.addChild(c)}else{if(!(r instanceof t.core.ClippingAttachment))continue;i.createGraphics(s,r),h.addChild(s.clippingContainer),h.addChild(s.currentGraphics)}}return i.autoUpdate=!0,i.tintRgb=new Float32Array([1,1,1]),i}return __extends(s,a),Object.defineProperty(s.prototype,"autoUpdate",{get:function(){return this.updateTransform===s.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?s.prototype.autoUpdateTransform:PIXI.Container.prototype.updateTransform},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"tint",{get:function(){return PIXI.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=PIXI.utils.hex2rgb(t,this.tintRgb)},enumerable:!0,configurable:!0}),s.prototype.update=function(n){this.state.update(n),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var o=this.skeleton.slots,a=this.tintRgb[0],s=this.tintRgb[1],r=this.tintRgb[2],h=0,l=o.length;h<l;h++){var p=(A=o[h]).attachment,c=this.slotContainers[h];if(p){var d=p.color;if(p instanceof t.core.RegionAttachment){var u=p.region;if(u){A.currentMesh&&(A.currentMesh.visible=!1,A.currentMesh=null,A.currentMeshName=void 0);var g=u;if(!A.currentSpriteName||A.currentSpriteName!==g.name){var m=g.name;if(A.currentSprite&&(A.currentSprite.visible=!1),A.sprites=A.sprites||{},void 0!==A.sprites[m])A.sprites[m].visible=!0;else{var f=this.createSprite(A,p,m);c.addChild(f)}A.currentSprite=A.sprites[m],A.currentSpriteName=m}}if(c.transform){var y=c.transform,v=y,b=null;v.matrix2d?(b=v.matrix2d,v._dirtyVersion++,v.version=v._dirtyVersion,v.isStatic=!0,v.operMode=0):PIXI.TransformBase?(v.position&&(y=new PIXI.TransformBase,c.transform=y),b=y.localTransform):v.setFromMatrix(A.bone.matrix),b&&A.bone.matrix.copy(b)}else{b=c.localTransform||new PIXI.Matrix;A.bone.matrix.copy(b),c.localTransform=b,c.displayObjectUpdateTransform=e}i[0]=a*A.color.r*d.r,i[1]=s*A.color.g*d.g,i[2]=r*A.color.b*d.b,A.currentSprite.tint=PIXI.utils.rgb2hex(i),A.currentSprite.blendMode=A.blendMode}else if(p instanceof t.core.MeshAttachment){if(A.currentSprite&&(A.currentSprite.visible=!1,A.currentSprite=null,A.currentSpriteName=void 0,c.transform?c.transform=new PIXI.TransformStatic:(c.localTransform=new PIXI.Matrix,c.displayObjectUpdateTransform=PIXI.DisplayObject.prototype.updateTransform)),!A.currentMeshName||A.currentMeshName!==p.name){var w=p.name;if(A.currentMesh&&(A.currentMesh.visible=!1),A.meshes=A.meshes||{},void 0!==A.meshes[w])A.meshes[w].visible=!0;else{var S=this.createMesh(A,p);c.addChild(S)}A.currentMesh=A.meshes[w],A.currentMeshName=w}if(p.computeWorldVerticesOld(A,A.currentMesh.vertices),"3"!==PIXI.VERSION[0]){var x=A.currentMesh.tintRgb;x[0]=a*A.color.r*d.r,x[1]=s*A.color.g*d.g,x[2]=r*A.color.b*d.b}A.currentMesh.blendMode=A.blendMode}else{if(!(p instanceof t.core.ClippingAttachment)){c.visible=!1;continue}A.currentGraphics||(this.createGraphics(A,p),c.addChild(A.clippingContainer),c.addChild(A.currentGraphics)),this.updateGraphics(A,p)}c.visible=!0,c.alpha=A.color.a}else c.visible=!1}for(var P=this.skeleton.drawOrder,_=null,k=null,h=0,l=P.length;h<l;h++){var A=o[P[h].data.index],c=this.slotContainers[P[h].data.index];if(k||c.parent!==this&&(c.parent.removeChild(c),c.parent=this),A.currentGraphics&&A.attachment)k=A.clippingContainer,_=A.attachment,k.children.length=0,this.children[h]=c,_.endSlot==A.data&&(k.renderable=!1,k=null,_=null);else if(k){var T=this.tempClipContainers[h];T||((T=this.tempClipContainers[h]=new PIXI.Container).visible=!1),this.children[h]=T,c.parent=null,k.addChild(c),_.endSlot==A.data&&(k.renderable=!0,k=null,_=null)}else this.children[h]=c}},s.prototype.setSpriteRegion=function(t,e,i){e.region=i,e.texture=i.texture,i.size?(e.scale.x=i.size.width/i.originalWidth,e.scale.y=-i.size.height/i.originalHeight):(e.scale.x=t.scaleX*t.width/i.originalWidth,e.scale.y=-t.scaleY*t.height/i.originalHeight)},s.prototype.setMeshRegion=function(t,e,i){e.region=i,e.texture=i.texture,t.updateUVs(i,e.uvs),e.dirty++},s.prototype.autoUpdateTransform=function(){if(s.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t)}else this.lastTime=0;PIXI.Container.prototype.updateTransform.call(this)},s.prototype.createSprite=function(e,i,o){var a=i.region;e.tempAttachment===i&&(a=e.tempRegion,e.tempAttachment=null,e.tempRegion=null);var s=a.texture,r=new n(s);return r.rotation=i.rotation*t.core.MathUtils.degRad,r.anchor.x=.5,r.anchor.y=.5,r.position.x=i.x,r.position.y=i.y,r.alpha=i.color.a,r.region=i.region,this.setSpriteRegion(i,r,i.region),e.sprites=e.sprites||{},e.sprites[o]=r,r},s.prototype.createMesh=function(t,e){var i=e.region;t.tempAttachment===e&&(i=t.tempRegion,t.tempAttachment=null,t.tempRegion=null);var n=new o(i.texture,new Float32Array(e.regionUVs.length),new Float32Array(e.regionUVs.length),new Uint16Array(e.triangles),PIXI.mesh.Mesh.DRAW_MODES.TRIANGLES);return n.canvasPadding=1.5,n.alpha=e.color.a,n.region=e.region,this.setMeshRegion(e,n,i),t.meshes=t.meshes||{},t.meshes[e.name]=n,n},s.prototype.createGraphics=function(t,e){var i=new PIXI.Graphics,n=new PIXI.Polygon([]);return i.clear(),i.beginFill(16777215,1),i.drawPolygon(n),i.renderable=!1,t.currentGraphics=i,t.clippingContainer=new PIXI.Container,t.clippingContainer.mask=t.currentGraphics,i},s.prototype.updateGraphics=function(t,e){var i=t.currentGraphics.graphicsData[0].shape.points,n=e.worldVerticesLength;i.length=n,e.computeWorldVertices(t,0,n,i,0,2),t.currentGraphics.dirty++,t.currentGraphics.clearDirty++},s.prototype.hackTextureBySlotIndex=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=null);var o=this.skeleton.slots[e];if(!o)return!1;var a=o.attachment,s=a.region;return i&&((s=new t.core.TextureRegion).texture=i,s.size=n),o.currentSprite&&o.currentSprite.region!=s?(this.setSpriteRegion(a,o.currentSprite,s),o.currentSprite.region=s):o.currentMesh&&o.currentMesh.region!=s?this.setMeshRegion(a,o.currentMesh,s):(o.tempRegion=s,o.tempAttachment=a),!0},s.globalAutoUpdate=!0,s.clippingPolygon=[],s}(PIXI.Container);t.Spine=a}(pixi_spine||(pixi_spine={})),PIXI.spine=pixi_spine;var MinAjax=function(){function t(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}return{minAjax:function(e){if(e.url)if(e.type){e.method||(e.method=!0),e.debugLog||(e.debugLog=!1);var i=t();i.onreadystatechange=function(){4==i.readyState&&200==i.status?(e.success&&e.success(i.responseText,i.readyState),1==e.debugLog&&console.log("SuccessResponse"),1==e.debugLog&&console.log("Response Data:"+i.responseText)):1==e.debugLog&&console.log("FailureResponse --\x3e State:"+i.readyState+"Status:"+i.status)};var n=[],o=e.data;if("string"==typeof o)for(var a=String.prototype.split.call(o,"&"),s=0,r=a.length;s<r;s++){l=a[s].split("=");n.push(encodeURIComponent(l[0])+"="+encodeURIComponent(l[1]))}else if("object"==typeof o&&!(o instanceof String||FormData&&o instanceof FormData))for(var h in o){var l=o[h];if("[object Array]"==Object.prototype.toString.call(l))for(var s=0,r=l.length;s<r;s++)n.push(encodeURIComponent(h)+"[]="+encodeURIComponent(l[s]));else n.push(encodeURIComponent(h)+"="+encodeURIComponent(l))}n=n.join("&"),"GET"==e.type&&(i.open("GET",e.url+"?"+n,e.method),i.send(),1==e.debugLog&&console.log("GET fired at:"+e.url+"?"+n)),"POST"==e.type&&(i.open("POST",e.url,e.method),i.setRequestHeader(e.requestType,e.requestValue),i.send(n),1==e.debugLog&&console.log("POST fired at:"+e.url+" || Data:"+n))}else 1==e.debugLog&&console.log("No Default type (GET/POST) given!");else 1==e.debugLog&&console.log("No Url!")}}};!function(t){if("object"==typeof exports)module.exports=t();else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.p2=t()}}(function(){return function t(e,i,n){function o(s,r){if(!i[s]){if(!e[s]){var h="function"==typeof require&&require;if(!r&&h)return h(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=i[s]={exports:{}};e[s][0].call(l.exports,function(t){var i=e[s][1][t];return o(i||t)},l,l.exports,t,e,i,n)}return i[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){function n(){}var o=t("./Scalar");e.exports=n,n.lineInt=function(t,e,i){i=i||0;var n,a,s,r,h,l,p,c=[0,0];return n=t[1][1]-t[0][1],a=t[0][0]-t[1][0],s=n*t[0][0]+a*t[0][1],r=e[1][1]-e[0][1],h=e[0][0]-e[1][0],l=r*e[0][0]+h*e[0][1],p=n*h-r*a,o.eq(p,0,i)||(c[0]=(h*s-a*l)/p,c[1]=(n*l-r*s)/p),c},n.segmentsIntersect=function(t,e,i,n){var o=e[0]-t[0],a=e[1]-t[1],s=n[0]-i[0],r=n[1]-i[1];if(s*a-r*o==0)return!1;var h=(o*(i[1]-t[1])+a*(t[0]-i[0]))/(s*a-r*o),l=(s*(t[1]-i[1])+r*(i[0]-t[0]))/(r*o-s*a);return h>=0&&h<=1&&l>=0&&l<=1}},{"./Scalar":4}],2:[function(t,e,i){function n(){}e.exports=n,n.area=function(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])},n.left=function(t,e,i){return n.area(t,e,i)>0},n.leftOn=function(t,e,i){return n.area(t,e,i)>=0},n.right=function(t,e,i){return n.area(t,e,i)<0},n.rightOn=function(t,e,i){return n.area(t,e,i)<=0};var o=[],a=[];n.collinear=function(t,e,i,s){if(s){var r=o,h=a;r[0]=e[0]-t[0],r[1]=e[1]-t[1],h[0]=i[0]-e[0],h[1]=i[1]-e[1];var l=r[0]*h[0]+r[1]*h[1],p=Math.sqrt(r[0]*r[0]+r[1]*r[1]),c=Math.sqrt(h[0]*h[0]+h[1]*h[1]);return Math.acos(l/(p*c))<s}return 0==n.area(t,e,i)},n.sqdist=function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n}},{}],3:[function(t,e,i){function n(){this.vertices=[]}function o(t,e,i,n,o){o=o||0;var a=e[1]-t[1],s=t[0]-e[0],h=a*t[0]+s*t[1],l=n[1]-i[1],p=i[0]-n[0],c=l*i[0]+p*i[1],d=a*p-l*s;return r.eq(d,0,o)?[0,0]:[(p*h-s*c)/d,(a*c-l*h)/d]}var a=t("./Line"),s=t("./Point"),r=t("./Scalar");e.exports=n,n.prototype.at=function(t){var e=this.vertices,i=e.length;return e[t<0?t%i+i:t%i]},n.prototype.first=function(){return this.vertices[0]},n.prototype.last=function(){return this.vertices[this.vertices.length-1]},n.prototype.clear=function(){this.vertices.length=0},n.prototype.append=function(t,e,i){if(void 0===e)throw new Error("From is not given!");if(void 0===i)throw new Error("To is not given!");if(i-1<e)throw new Error("lol1");if(i>t.vertices.length)throw new Error("lol2");if(e<0)throw new Error("lol3");for(var n=e;n<i;n++)this.vertices.push(t.vertices[n])},n.prototype.makeCCW=function(){for(var t=0,e=this.vertices,i=1;i<this.vertices.length;++i)(e[i][1]<e[t][1]||e[i][1]==e[t][1]&&e[i][0]>e[t][0])&&(t=i);s.left(this.at(t-1),this.at(t),this.at(t+1))||this.reverse()},n.prototype.reverse=function(){for(var t=[],e=0,i=this.vertices.length;e!==i;e++)t.push(this.vertices.pop());this.vertices=t},n.prototype.isReflex=function(t){return s.right(this.at(t-1),this.at(t),this.at(t+1))};var h=[],l=[];n.prototype.canSee=function(t,e){var i,n,o=h,r=l;if(s.leftOn(this.at(t+1),this.at(t),this.at(e))&&s.rightOn(this.at(t-1),this.at(t),this.at(e)))return!1;n=s.sqdist(this.at(t),this.at(e));for(var p=0;p!==this.vertices.length;++p)if((p+1)%this.vertices.length!==t&&p!==t&&s.leftOn(this.at(t),this.at(e),this.at(p+1))&&s.rightOn(this.at(t),this.at(e),this.at(p))&&(o[0]=this.at(t),o[1]=this.at(e),r[0]=this.at(p),r[1]=this.at(p+1),i=a.lineInt(o,r),s.sqdist(this.at(t),i)<n))return!1;return!0},n.prototype.copy=function(t,e,i){var o=i||new n;if(o.clear(),t<e)for(a=t;a<=e;a++)o.vertices.push(this.vertices[a]);else{for(a=0;a<=e;a++)o.vertices.push(this.vertices[a]);for(var a=t;a<this.vertices.length;a++)o.vertices.push(this.vertices[a])}return o},n.prototype.getCutEdges=function(){for(var t=[],e=[],i=[],o=new n,a=Number.MAX_VALUE,s=0;s<this.vertices.length;++s)if(this.isReflex(s))for(var r=0;r<this.vertices.length;++r)if(this.canSee(s,r)){e=this.copy(s,r,o).getCutEdges(),i=this.copy(r,s,o).getCutEdges();for(var h=0;h<i.length;h++)e.push(i[h]);e.length<a&&(t=e,a=e.length,t.push([this.at(s),this.at(r)]))}return t},n.prototype.decomp=function(){var t=this.getCutEdges();return t.length>0?this.slice(t):[this]},n.prototype.slice=function(t){if(0==t.length)return[this];if(t instanceof Array&&t.length&&t[0]instanceof Array&&2==t[0].length&&t[0][0]instanceof Array){for(var e=[this],i=0;i<t.length;i++)for(var n=t[i],o=0;o<e.length;o++){var a=e[o].slice(n);if(a){e.splice(o,1),e.push(a[0],a[1]);break}}return e}var n=t,i=this.vertices.indexOf(n[0]),o=this.vertices.indexOf(n[1]);return-1!=i&&-1!=o&&[this.copy(i,o),this.copy(o,i)]},n.prototype.isSimple=function(){for(var t=this.vertices,e=0;e<t.length-1;e++)for(var i=0;i<e-1;i++)if(a.segmentsIntersect(t[e],t[e+1],t[i],t[i+1]))return!1;for(e=1;e<t.length-2;e++)if(a.segmentsIntersect(t[0],t[t.length-1],t[e],t[e+1]))return!1;return!0},n.prototype.quickDecomp=function(t,e,i,a,r,h){r=r||100,h=h||0,a=a||25,t=void 0!==t?t:[],e=e||[],i=i||[];var l=[0,0],p=[0,0],c=[0,0],d=0,u=0,g=0,m=0,f=0,y=0,v=0,b=new n,w=new n,S=this,x=this.vertices;if(x.length<3)return t;if(++h>r)return console.warn("quickDecomp: max level ("+r+") reached."),t;for(var P=0;P<this.vertices.length;++P)if(S.isReflex(P)){e.push(S.vertices[P]),d=u=Number.MAX_VALUE;for(_=0;_<this.vertices.length;++_)s.left(S.at(P-1),S.at(P),S.at(_))&&s.rightOn(S.at(P-1),S.at(P),S.at(_-1))&&(c=o(S.at(P-1),S.at(P),S.at(_),S.at(_-1)),s.right(S.at(P+1),S.at(P),c)&&(g=s.sqdist(S.vertices[P],c))<u&&(u=g,p=c,y=_)),s.left(S.at(P+1),S.at(P),S.at(_+1))&&s.rightOn(S.at(P+1),S.at(P),S.at(_))&&(c=o(S.at(P+1),S.at(P),S.at(_),S.at(_+1)),s.left(S.at(P-1),S.at(P),c)&&(g=s.sqdist(S.vertices[P],c))<d&&(d=g,l=c,f=_));if(y==(f+1)%this.vertices.length)c[0]=(p[0]+l[0])/2,c[1]=(p[1]+l[1])/2,i.push(c),P<f?(b.append(S,P,f+1),b.vertices.push(c),w.vertices.push(c),0!=y&&w.append(S,y,S.vertices.length),w.append(S,0,P+1)):(0!=P&&b.append(S,P,S.vertices.length),b.append(S,0,f+1),b.vertices.push(c),w.vertices.push(c),w.append(S,y,P+1));else{if(y>f&&(f+=this.vertices.length),m=Number.MAX_VALUE,f<y)return t;for(var _=y;_<=f;++_)s.leftOn(S.at(P-1),S.at(P),S.at(_))&&s.rightOn(S.at(P+1),S.at(P),S.at(_))&&(g=s.sqdist(S.at(P),S.at(_)))<m&&(m=g,v=_%this.vertices.length);P<v?(b.append(S,P,v+1),0!=v&&w.append(S,v,x.length),w.append(S,0,P+1)):(0!=P&&b.append(S,P,x.length),b.append(S,0,v+1),w.append(S,v,P+1))}return b.vertices.length<w.vertices.length?(b.quickDecomp(t,e,i,a,r,h),w.quickDecomp(t,e,i,a,r,h)):(w.quickDecomp(t,e,i,a,r,h),b.quickDecomp(t,e,i,a,r,h)),t}return t.push(this),t},n.prototype.removeCollinearPoints=function(t){for(var e=0,i=this.vertices.length-1;this.vertices.length>3&&i>=0;--i)s.collinear(this.at(i-1),this.at(i),this.at(i+1),t)&&(this.vertices.splice(i%this.vertices.length,1),i--,e++);return e}},{"./Line":1,"./Point":2,"./Scalar":4}],4:[function(t,e,i){function n(){}e.exports=n,n.eq=function(t,e,i){return i=i||0,Math.abs(t-e)<i}},{}],5:[function(t,e,i){e.exports={Polygon:t("./Polygon"),Point:t("./Point")}},{"./Point":2,"./Polygon":3}],6:[function(t,e,i){e.exports={name:"p2",version:"0.7.0",description:"A JavaScript 2D physics engine.",author:"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",keywords:["p2.js","p2","physics","engine","2d"],main:"./src/p2.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/p2.js.git"},bugs:{url:"https://github.com/schteppe/p2.js/issues"},licenses:[{type:"MIT"}],devDependencies:{grunt:"^0.4.5","grunt-contrib-jshint":"^0.11.2","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0"},dependencies:{"poly-decomp":"0.1.0"}}},{}],7:[function(t,e,i){function n(t){this.lowerBound=o.create(),t&&t.lowerBound&&o.copy(this.lowerBound,t.lowerBound),this.upperBound=o.create(),t&&t.upperBound&&o.copy(this.upperBound,t.upperBound)}var o=t("../math/vec2");t("../utils/Utils");e.exports=n;var a=o.create();n.prototype.setFromPoints=function(t,e,i,n){var s=this.lowerBound,r=this.upperBound;"number"!=typeof i&&(i=0),0!==i?o.rotate(s,t[0],i):o.copy(s,t[0]),o.copy(r,s);for(var h=Math.cos(i),l=Math.sin(i),p=1;p<t.length;p++){var c=t[p];if(0!==i){var d=c[0],u=c[1];a[0]=h*d-l*u,a[1]=l*d+h*u,c=a}for(var g=0;g<2;g++)c[g]>r[g]&&(r[g]=c[g]),c[g]<s[g]&&(s[g]=c[g])}e&&(o.add(this.lowerBound,this.lowerBound,e),o.add(this.upperBound,this.upperBound,e)),n&&(this.lowerBound[0]-=n,this.lowerBound[1]-=n,this.upperBound[0]+=n,this.upperBound[1]+=n)},n.prototype.copy=function(t){o.copy(this.lowerBound,t.lowerBound),o.copy(this.upperBound,t.upperBound)},n.prototype.extend=function(t){for(var e=2;e--;){var i=t.lowerBound[e];this.lowerBound[e]>i&&(this.lowerBound[e]=i);var n=t.upperBound[e];this.upperBound[e]<n&&(this.upperBound[e]=n)}},n.prototype.overlaps=function(t){var e=this.lowerBound,i=this.upperBound,n=t.lowerBound,o=t.upperBound;return(n[0]<=i[0]&&i[0]<=o[0]||e[0]<=o[0]&&o[0]<=i[0])&&(n[1]<=i[1]&&i[1]<=o[1]||e[1]<=o[1]&&o[1]<=i[1])},n.prototype.containsPoint=function(t){var e=this.lowerBound,i=this.upperBound;return e[0]<=t[0]&&t[0]<=i[0]&&e[1]<=t[1]&&t[1]<=i[1]},n.prototype.overlapsRay=function(t){var e=1/t.direction[0],i=1/t.direction[1],n=(this.lowerBound[0]-t.from[0])*e,o=(this.upperBound[0]-t.from[0])*e,a=(this.lowerBound[1]-t.from[1])*i,s=(this.upperBound[1]-t.from[1])*i,r=Math.max(Math.max(Math.min(n,o),Math.min(a,s))),h=Math.min(Math.min(Math.max(n,o),Math.max(a,s)));return h<0?-1:r>h?-1:r}},{"../math/vec2":30,"../utils/Utils":57}],8:[function(t,e,i){function n(t){this.type=t,this.result=[],this.world=null,this.boundingVolumeType=n.AABB}var o=t("../math/vec2"),a=t("../objects/Body");e.exports=n,n.AABB=1,n.BOUNDING_CIRCLE=2,n.prototype.setWorld=function(t){this.world=t},n.prototype.getCollisionPairs=function(t){};var s=o.create();n.boundingRadiusCheck=function(t,e){o.sub(s,t.position,e.position);var i=o.squaredLength(s),n=t.boundingRadius+e.boundingRadius;return i<=n*n},n.aabbCheck=function(t,e){return t.getAABB().overlaps(e.getAABB())},n.prototype.boundingVolumeCheck=function(t,e){var i;switch(this.boundingVolumeType){case n.BOUNDING_CIRCLE:i=n.boundingRadiusCheck(t,e);break;case n.AABB:i=n.aabbCheck(t,e);break;default:throw new Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return i},n.canCollide=function(t,e){var i=a.KINEMATIC,n=a.STATIC;return(t.type!==n||e.type!==n)&&(!(t.type===i&&e.type===n||t.type===n&&e.type===i)&&((t.type!==i||e.type!==i)&&((t.sleepState!==a.SLEEPING||e.sleepState!==a.SLEEPING)&&!(t.sleepState===a.SLEEPING&&e.type===n||e.sleepState===a.SLEEPING&&t.type===n))))},n.NAIVE=1,n.SAP=2},{"../math/vec2":30,"../objects/Body":31}],9:[function(t,e,i){function n(){o.call(this,o.NAIVE)}t("../shapes/Circle"),t("../shapes/Plane"),t("../shapes/Shape"),t("../shapes/Particle");var o=t("../collision/Broadphase");t("../math/vec2");e.exports=n,(n.prototype=new o).constructor=n,n.prototype.getCollisionPairs=function(t){var e=t.bodies,i=this.result;i.length=0;for(var n=0,a=e.length;n!==a;n++)for(var s=e[n],r=0;r<n;r++){var h=e[r];o.canCollide(s,h)&&this.boundingVolumeCheck(s,h)&&i.push(s,h)}return i},n.prototype.aabbQuery=function(t,e,i){i=i||[];for(var n=t.bodies,o=0;o<n.length;o++){var a=n[o];a.aabbNeedsUpdate&&a.updateAABB(),a.aabb.overlaps(e)&&i.push(a)}return i}},{"../collision/Broadphase":8,"../math/vec2":30,"../shapes/Circle":39,"../shapes/Particle":43,"../shapes/Plane":44,"../shapes/Shape":45}],10:[function(t,e,i){function n(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.enabledEquations=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.contactEquationPool=new p({size:32}),this.frictionEquationPool=new c({size:64}),this.restitution=0,this.stiffness=u.DEFAULT_STIFFNESS,this.relaxation=u.DEFAULT_RELAXATION,this.frictionStiffness=u.DEFAULT_STIFFNESS,this.frictionRelaxation=u.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new d,this.contactSkinSize=.01}function o(t,e){s.set(t.vertices[0],.5*-e.length,-e.radius),s.set(t.vertices[1],.5*e.length,-e.radius),s.set(t.vertices[2],.5*e.length,e.radius),s.set(t.vertices[3],.5*-e.length,e.radius)}function a(t,e,i,n){for(var o=q,a=j,l=Y,p=z,c=t,d=e.vertices,u=null,g=0;g!==d.length+1;g++){var m=d[g%d.length],f=d[(g+1)%d.length];s.rotate(o,m,n),s.rotate(a,f,n),h(o,o,i),h(a,a,i),r(l,o,c),r(p,a,c);var y=s.crossLength(l,p);if(null===u&&(u=y),y*u<0)return!1;u=y}return!0}var s=t("../math/vec2"),r=s.sub,h=s.add,l=s.dot,p=(t("../utils/Utils"),t("../utils/ContactEquationPool")),c=t("../utils/FrictionEquationPool"),d=t("../utils/TupleDictionary"),u=t("../equations/Equation"),g=(t("../equations/ContactEquation"),t("../equations/FrictionEquation"),t("../shapes/Circle")),m=t("../shapes/Convex"),f=t("../shapes/Shape"),y=(t("../objects/Body"),t("../shapes/Box"));e.exports=n;var v=s.fromValues(0,1),b=s.fromValues(0,0),w=s.fromValues(0,0),S=s.fromValues(0,0),x=s.fromValues(0,0),P=s.fromValues(0,0),_=s.fromValues(0,0),k=s.fromValues(0,0),A=s.fromValues(0,0),T=s.fromValues(0,0),M=s.fromValues(0,0),C=s.fromValues(0,0),I=s.fromValues(0,0),B=s.fromValues(0,0),G=s.fromValues(0,0),L=s.fromValues(0,0),E=s.fromValues(0,0),O=s.fromValues(0,0),D=s.fromValues(0,0),R=[],H=s.create(),F=s.create();n.prototype.bodiesOverlap=function(t,e){for(var i=H,n=F,o=0,a=t.shapes.length;o!==a;o++){var s=t.shapes[o];t.toWorldFrame(i,s.position);for(var r=0,h=e.shapes.length;r!==h;r++){var l=e.shapes[r];if(e.toWorldFrame(n,l.position),this[s.type|l.type](t,s,i,s.angle+t.angle,e,l,n,l.angle+e.angle,!0))return!0}}return!1},n.prototype.collidedLastStep=function(t,e){var i=0|t.id,n=0|e.id;return!!this.collidingBodiesLastStep.get(i,n)},n.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var t=this.contactEquations,e=t.length;e--;){var i=t[e],n=i.bodyA.id,o=i.bodyB.id;this.collidingBodiesLastStep.set(n,o,!0)}for(var a=this.contactEquations,s=this.frictionEquations,r=0;r<a.length;r++)this.contactEquationPool.release(a[r]);for(r=0;r<s.length;r++)this.frictionEquationPool.release(s[r]);this.contactEquations.length=this.frictionEquations.length=0},n.prototype.createContactEquation=function(t,e,i,n){var o=this.contactEquationPool.get();return o.bodyA=t,o.bodyB=e,o.shapeA=i,o.shapeB=n,o.restitution=this.restitution,o.firstImpact=!this.collidedLastStep(t,e),o.stiffness=this.stiffness,o.relaxation=this.relaxation,o.needsUpdate=!0,o.enabled=this.enabledEquations,o.offset=this.contactSkinSize,o},n.prototype.createFrictionEquation=function(t,e,i,n){var o=this.frictionEquationPool.get();return o.bodyA=t,o.bodyB=e,o.shapeA=i,o.shapeB=n,o.setSlipForce(this.slipForce),o.frictionCoefficient=this.frictionCoefficient,o.relativeVelocity=this.surfaceVelocity,o.enabled=this.enabledEquations,o.needsUpdate=!0,o.stiffness=this.frictionStiffness,o.relaxation=this.frictionRelaxation,o.contactEquations.length=0,o},n.prototype.createFrictionFromContact=function(t){var e=this.createFrictionEquation(t.bodyA,t.bodyB,t.shapeA,t.shapeB);return s.copy(e.contactPointA,t.contactPointA),s.copy(e.contactPointB,t.contactPointB),s.rotate90cw(e.t,t.normalA),e.contactEquations.push(t),e},n.prototype.createFrictionFromAverage=function(t){var e=this.contactEquations[this.contactEquations.length-1],i=this.createFrictionEquation(e.bodyA,e.bodyB,e.shapeA,e.shapeB),n=e.bodyA;e.bodyB;s.set(i.contactPointA,0,0),s.set(i.contactPointB,0,0),s.set(i.t,0,0);for(var o=0;o!==t;o++)(e=this.contactEquations[this.contactEquations.length-1-o]).bodyA===n?(s.add(i.t,i.t,e.normalA),s.add(i.contactPointA,i.contactPointA,e.contactPointA),s.add(i.contactPointB,i.contactPointB,e.contactPointB)):(s.sub(i.t,i.t,e.normalA),s.add(i.contactPointA,i.contactPointA,e.contactPointB),s.add(i.contactPointB,i.contactPointB,e.contactPointA)),i.contactEquations.push(e);var a=1/t;return s.scale(i.contactPointA,i.contactPointA,a),s.scale(i.contactPointB,i.contactPointB,a),s.normalize(i.t,i.t),s.rotate90cw(i.t,i.t),i},n.prototype[f.LINE|f.CONVEX]=n.prototype.convexLine=function(t,e,i,n,o,a,s,r,h){return!h&&0},n.prototype[f.LINE|f.BOX]=n.prototype.lineBox=function(t,e,i,n,o,a,s,r,h){return!h&&0};var N=new y({width:1,height:1}),U=s.create();n.prototype[f.CAPSULE|f.CONVEX]=n.prototype[f.CAPSULE|f.BOX]=n.prototype.convexCapsule=function(t,e,i,n,a,r,h,l,p){var c=U;s.set(c,r.length/2,0),s.rotate(c,c,l),s.add(c,c,h);var d=this.circleConvex(a,r,c,l,t,e,i,n,p,r.radius);s.set(c,-r.length/2,0),s.rotate(c,c,l),s.add(c,c,h);var u=this.circleConvex(a,r,c,l,t,e,i,n,p,r.radius);if(p&&(d||u))return!0;var g=N;return o(g,r),this.convexConvex(t,e,i,n,a,g,h,l,p)+d+u},n.prototype[f.CAPSULE|f.LINE]=n.prototype.lineCapsule=function(t,e,i,n,o,a,s,r,h){return!h&&0};var X=s.create(),V=s.create(),W=new y({width:1,height:1});n.prototype[f.CAPSULE|f.CAPSULE]=n.prototype.capsuleCapsule=function(t,e,i,n,a,r,h,l,p){for(var c=X,d=V,u=0,g=0;g<2;g++){s.set(c,(0===g?-1:1)*e.length/2,0),s.rotate(c,c,n),s.add(c,c,i);for(var m=0;m<2;m++){s.set(d,(0===m?-1:1)*r.length/2,0),s.rotate(d,d,l),s.add(d,d,h),this.enableFrictionReduction&&(b=this.enableFriction,this.enableFriction=!1);var f=this.circleCircle(t,e,c,n,a,r,d,l,p,e.radius,r.radius);if(this.enableFrictionReduction&&(this.enableFriction=b),p&&f)return!0;u+=f}}this.enableFrictionReduction&&(b=this.enableFriction,this.enableFriction=!1);var y=W;o(y,e);var v=this.convexCapsule(t,y,i,n,a,r,h,l,p);if(this.enableFrictionReduction&&(this.enableFriction=b),p&&v)return!0;if(u+=v,this.enableFrictionReduction){var b=this.enableFriction;this.enableFriction=!1}o(y,r);var w=this.convexCapsule(a,y,h,l,t,e,i,n,p);return this.enableFrictionReduction&&(this.enableFriction=b),!(!p||!w)||(u+=w,this.enableFrictionReduction&&u&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(u)),u)},n.prototype[f.LINE|f.LINE]=n.prototype.lineLine=function(t,e,i,n,o,a,s,r,h){return!h&&0},n.prototype[f.PLANE|f.LINE]=n.prototype.planeLine=function(t,e,i,n,o,a,p,c,d){var u=b,g=w,m=S,f=x,y=P,M=_,C=k,I=A,B=T,G=R,L=0;s.set(u,-a.length/2,0),s.set(g,a.length/2,0),s.rotate(m,u,c),s.rotate(f,g,c),h(m,m,p),h(f,f,p),s.copy(u,m),s.copy(g,f),r(y,g,u),s.normalize(M,y),s.rotate90cw(B,M),s.rotate(I,v,n),G[0]=u,G[1]=g;for(var E=0;E<G.length;E++){var O=G[E];r(C,O,i);var D=l(C,I);if(D<0){if(d)return!0;var H=this.createContactEquation(t,o,e,a);L++,s.copy(H.normalA,I),s.normalize(H.normalA,H.normalA),s.scale(C,I,D),r(H.contactPointA,O,C),r(H.contactPointA,H.contactPointA,t.position),r(H.contactPointB,O,p),h(H.contactPointB,H.contactPointB,p),r(H.contactPointB,H.contactPointB,o.position),this.contactEquations.push(H),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(H))}}return!d&&(this.enableFrictionReduction||L&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(L)),L)},n.prototype[f.PARTICLE|f.CAPSULE]=n.prototype.particleCapsule=function(t,e,i,n,o,a,s,r,h){return this.circleLine(t,e,i,n,o,a,s,r,h,a.radius,0)},n.prototype[f.CIRCLE|f.LINE]=n.prototype.circleLine=function(t,e,i,n,o,a,p,c,d,u,g){var u=u||0,g=void 0!==g?g:e.radius,m=b,f=w,y=S,v=x,L=P,E=_,O=k,D=A,H=T,F=M,N=C,U=I,X=B,V=G,W=R;s.set(D,-a.length/2,0),s.set(H,a.length/2,0),s.rotate(F,D,c),s.rotate(N,H,c),h(F,F,p),h(N,N,p),s.copy(D,F),s.copy(H,N),r(E,H,D),s.normalize(O,E),s.rotate90cw(L,O),r(U,i,D);var q=l(U,L);r(v,D,p),r(X,i,p);var j=g+u;if(Math.abs(q)<j){s.scale(m,L,q),r(y,i,m),s.scale(f,L,l(L,X)),s.normalize(f,f),s.scale(f,f,u),h(y,y,f);var Y=l(O,y),z=l(O,D),K=l(O,H);if(Y>z&&Y<K){if(d)return!0;J=this.createContactEquation(t,o,e,a);return s.scale(J.normalA,m,-1),s.normalize(J.normalA,J.normalA),s.scale(J.contactPointA,J.normalA,g),h(J.contactPointA,J.contactPointA,i),r(J.contactPointA,J.contactPointA,t.position),r(J.contactPointB,y,p),h(J.contactPointB,J.contactPointB,p),r(J.contactPointB,J.contactPointB,o.position),this.contactEquations.push(J),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(J)),1}}W[0]=D,W[1]=H;for(var Q=0;Q<W.length;Q++){var Z=W[Q];if(r(U,Z,i),s.squaredLength(U)<Math.pow(j,2)){if(d)return!0;var J=this.createContactEquation(t,o,e,a);return s.copy(J.normalA,U),s.normalize(J.normalA,J.normalA),s.scale(J.contactPointA,J.normalA,g),h(J.contactPointA,J.contactPointA,i),r(J.contactPointA,J.contactPointA,t.position),r(J.contactPointB,Z,p),s.scale(V,J.normalA,-u),h(J.contactPointB,J.contactPointB,V),h(J.contactPointB,J.contactPointB,p),r(J.contactPointB,J.contactPointB,o.position),this.contactEquations.push(J),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(J)),1}}return 0},n.prototype[f.CIRCLE|f.CAPSULE]=n.prototype.circleCapsule=function(t,e,i,n,o,a,s,r,h){return this.circleLine(t,e,i,n,o,a,s,r,h,a.radius)},n.prototype[f.CIRCLE|f.CONVEX]=n.prototype[f.CIRCLE|f.BOX]=n.prototype.circleConvex=function(t,e,i,n,o,l,p,c,d,u){for(var u="number"==typeof u?u:e.radius,g=b,m=w,f=S,y=x,v=P,_=M,k=C,A=B,T=G,I=L,O=E,D=!1,R=Number.MAX_VALUE,H=l.vertices,F=0;F!==H.length+1;F++){var N=H[F%H.length],U=H[(F+1)%H.length];if(s.rotate(g,N,c),s.rotate(m,U,c),h(g,g,p),h(m,m,p),r(f,m,g),s.normalize(y,f),s.rotate90cw(v,y),s.scale(T,v,-e.radius),h(T,T,i),a(T,l,p,c)){s.sub(I,g,T);var X=Math.abs(s.dot(I,v));X<R&&(s.copy(O,T),R=X,s.scale(A,v,X),s.add(A,A,T),D=!0)}}if(D){if(d)return!0;W=this.createContactEquation(t,o,e,l);return s.sub(W.normalA,O,i),s.normalize(W.normalA,W.normalA),s.scale(W.contactPointA,W.normalA,u),h(W.contactPointA,W.contactPointA,i),r(W.contactPointA,W.contactPointA,t.position),r(W.contactPointB,A,p),h(W.contactPointB,W.contactPointB,p),r(W.contactPointB,W.contactPointB,o.position),this.contactEquations.push(W),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(W)),1}if(u>0)for(F=0;F<H.length;F++){var V=H[F];if(s.rotate(k,V,c),h(k,k,p),r(_,k,i),s.squaredLength(_)<Math.pow(u,2)){if(d)return!0;var W=this.createContactEquation(t,o,e,l);return s.copy(W.normalA,_),s.normalize(W.normalA,W.normalA),s.scale(W.contactPointA,W.normalA,u),h(W.contactPointA,W.contactPointA,i),r(W.contactPointA,W.contactPointA,t.position),r(W.contactPointB,k,p),h(W.contactPointB,W.contactPointB,p),r(W.contactPointB,W.contactPointB,o.position),this.contactEquations.push(W),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(W)),1}}return 0};var q=s.create(),j=s.create(),Y=s.create(),z=s.create();n.prototype[f.PARTICLE|f.CONVEX]=n.prototype[f.PARTICLE|f.BOX]=n.prototype.particleConvex=function(t,e,i,n,o,p,c,d,u){var g=b,m=w,f=S,y=x,v=P,A=_,T=k,C=M,I=B,G=O,L=D,E=Number.MAX_VALUE,R=!1,H=p.vertices;if(!a(i,p,c,d))return!u&&0;if(u)return!0;for(var F=0;F!==H.length+1;F++){var N=H[F%H.length],U=H[(F+1)%H.length];s.rotate(g,N,d),s.rotate(m,U,d),h(g,g,c),h(m,m,c),r(f,m,g),s.normalize(y,f),s.rotate90cw(v,y),r(C,i,g);l(C,v);r(A,g,c),r(T,i,c),s.sub(G,g,i);var X=Math.abs(s.dot(G,v));X<E&&(E=X,s.scale(I,v,X),s.add(I,I,i),s.copy(L,v),R=!0)}if(R){var V=this.createContactEquation(t,o,e,p);return s.scale(V.normalA,L,-1),s.normalize(V.normalA,V.normalA),s.set(V.contactPointA,0,0),h(V.contactPointA,V.contactPointA,i),r(V.contactPointA,V.contactPointA,t.position),r(V.contactPointB,I,c),h(V.contactPointB,V.contactPointB,c),r(V.contactPointB,V.contactPointB,o.position),this.contactEquations.push(V),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(V)),1}return 0},n.prototype[f.CIRCLE]=n.prototype.circleCircle=function(t,e,i,n,o,a,l,p,c,d,u){var g=b,d=d||e.radius,u=u||a.radius;r(g,i,l);var m=d+u;if(s.squaredLength(g)>Math.pow(m,2))return 0;if(c)return!0;var f=this.createContactEquation(t,o,e,a);return r(f.normalA,l,i),s.normalize(f.normalA,f.normalA),s.scale(f.contactPointA,f.normalA,d),s.scale(f.contactPointB,f.normalA,-u),h(f.contactPointA,f.contactPointA,i),r(f.contactPointA,f.contactPointA,t.position),h(f.contactPointB,f.contactPointB,l),r(f.contactPointB,f.contactPointB,o.position),this.contactEquations.push(f),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(f)),1},n.prototype[f.PLANE|f.CONVEX]=n.prototype[f.PLANE|f.BOX]=n.prototype.planeConvex=function(t,e,i,n,o,a,p,c,d){var u=b,g=w,m=S,f=0;s.rotate(g,v,n);for(var y=0;y!==a.vertices.length;y++){var x=a.vertices[y];if(s.rotate(u,x,c),h(u,u,p),r(m,u,i),l(m,g)<=0){if(d)return!0;f++;var P=this.createContactEquation(t,o,e,a);r(m,u,i),s.copy(P.normalA,g);var _=l(m,P.normalA);s.scale(m,P.normalA,_),r(P.contactPointB,u,o.position),r(P.contactPointA,u,m),r(P.contactPointA,P.contactPointA,t.position),this.contactEquations.push(P),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(P))}}return this.enableFrictionReduction&&this.enableFriction&&f&&this.frictionEquations.push(this.createFrictionFromAverage(f)),f},n.prototype[f.PARTICLE|f.PLANE]=n.prototype.particlePlane=function(t,e,i,n,o,a,h,p,c){var d=b,u=w;p=p||0,r(d,i,h),s.rotate(u,v,p);var g=l(d,u);if(g>0)return 0;if(c)return!0;var m=this.createContactEquation(o,t,a,e);return s.copy(m.normalA,u),s.scale(d,m.normalA,g),r(m.contactPointA,i,d),r(m.contactPointA,m.contactPointA,o.position),r(m.contactPointB,i,t.position),this.contactEquations.push(m),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(m)),1},n.prototype[f.CIRCLE|f.PARTICLE]=n.prototype.circleParticle=function(t,e,i,n,o,a,l,p,c){var d=b;if(r(d,l,i),s.squaredLength(d)>Math.pow(e.radius,2))return 0;if(c)return!0;var u=this.createContactEquation(t,o,e,a);return s.copy(u.normalA,d),s.normalize(u.normalA,u.normalA),s.scale(u.contactPointA,u.normalA,e.radius),h(u.contactPointA,u.contactPointA,i),r(u.contactPointA,u.contactPointA,t.position),r(u.contactPointB,l,o.position),this.contactEquations.push(u),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(u)),1};var K=new g({radius:1}),Q=s.create(),Z=s.create();s.create();n.prototype[f.PLANE|f.CAPSULE]=n.prototype.planeCapsule=function(t,e,i,n,o,a,r,l,p){var c=Q,d=Z,u=K;s.set(c,-a.length/2,0),s.rotate(c,c,l),h(c,c,r),s.set(d,a.length/2,0),s.rotate(d,d,l),h(d,d,r),u.radius=a.radius;var g;this.enableFrictionReduction&&(g=this.enableFriction,this.enableFriction=!1);var m=this.circlePlane(o,u,c,0,t,e,i,n,p),f=this.circlePlane(o,u,d,0,t,e,i,n,p);if(this.enableFrictionReduction&&(this.enableFriction=g),p)return m||f;var y=m+f;return this.enableFrictionReduction&&y&&this.frictionEquations.push(this.createFrictionFromAverage(y)),y},n.prototype[f.CIRCLE|f.PLANE]=n.prototype.circlePlane=function(t,e,i,n,o,a,p,c,d){var u=t,g=e,m=i,f=o,y=p,x=c;x=x||0;var P=b,_=w,k=S;r(P,m,y),s.rotate(_,v,x);var A=l(_,P);if(A>g.radius)return 0;if(d)return!0;var T=this.createContactEquation(f,u,a,e);return s.copy(T.normalA,_),s.scale(T.contactPointB,T.normalA,-g.radius),h(T.contactPointB,T.contactPointB,m),r(T.contactPointB,T.contactPointB,u.position),s.scale(k,T.normalA,A),r(T.contactPointA,P,k),h(T.contactPointA,T.contactPointA,y),r(T.contactPointA,T.contactPointA,f.position),this.contactEquations.push(T),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(T)),1},n.prototype[f.CONVEX]=n.prototype[f.CONVEX|f.BOX]=n.prototype[f.BOX]=n.prototype.convexConvex=function(t,e,i,o,a,p,c,d,u,g){var m=b,f=w,y=S,v=x,_=P,M=k,C=A,I=T,B=0,g="number"==typeof g?g:0;if(!n.findSeparatingAxis(e,i,o,p,c,d,m))return 0;r(C,c,i),l(m,C)>0&&s.scale(m,m,-1);var G=n.getClosestEdge(e,o,m,!0),L=n.getClosestEdge(p,d,m);if(-1===G||-1===L)return 0;for(var E=0;E<2;E++){var O=G,D=L,R=e,H=p,F=i,N=c,U=o,X=d,V=t,W=a;if(0===E){var q;q=O,O=D,D=q,q=R,R=H,H=q,q=F,F=N,N=q,q=U,U=X,X=q,q=V,V=W,W=q}for(var j=D;j<D+2;j++){var Y=H.vertices[(j+H.vertices.length)%H.vertices.length];s.rotate(f,Y,X),h(f,f,N);for(var z=0,K=O-1;K<O+2;K++){var Q=R.vertices[(K+R.vertices.length)%R.vertices.length],Z=R.vertices[(K+1+R.vertices.length)%R.vertices.length];s.rotate(y,Q,U),s.rotate(v,Z,U),h(y,y,F),h(v,v,F),r(_,v,y),s.rotate90cw(I,_),s.normalize(I,I),r(C,f,y);$=l(I,C);(K===O&&$<=g||K!==O&&$<=0)&&z++}if(z>=3){if(u)return!0;var J=this.createContactEquation(V,W,R,H);B++;var Q=R.vertices[O%R.vertices.length],Z=R.vertices[(O+1)%R.vertices.length];s.rotate(y,Q,U),s.rotate(v,Z,U),h(y,y,F),h(v,v,F),r(_,v,y),s.rotate90cw(J.normalA,_),s.normalize(J.normalA,J.normalA),r(C,f,y);var $=l(J.normalA,C);s.scale(M,J.normalA,$),r(J.contactPointA,f,F),r(J.contactPointA,J.contactPointA,M),h(J.contactPointA,J.contactPointA,F),r(J.contactPointA,J.contactPointA,V.position),r(J.contactPointB,f,N),h(J.contactPointB,J.contactPointB,N),r(J.contactPointB,J.contactPointB,W.position),this.contactEquations.push(J),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(J))}}}return this.enableFrictionReduction&&this.enableFriction&&B&&this.frictionEquations.push(this.createFrictionFromAverage(B)),B};var J=s.fromValues(0,0);n.projectConvexOntoAxis=function(t,e,i,n,o){var a,r,h=null,p=null,c=J;s.rotate(c,n,-i);for(var d=0;d<t.vertices.length;d++)a=t.vertices[d],r=l(a,c),(null===h||r>h)&&(h=r),(null===p||r<p)&&(p=r);if(p>h){var u=p;p=h,h=u}var g=l(e,n);s.set(o,p+g,h+g)};var $=s.fromValues(0,0),tt=s.fromValues(0,0),et=s.fromValues(0,0),it=s.fromValues(0,0),nt=s.fromValues(0,0),ot=s.fromValues(0,0);n.findSeparatingAxis=function(t,e,i,o,a,h,l){var p=null,c=!1,d=!1,u=$,g=tt,m=et,f=it,v=nt,b=ot;if(t instanceof y&&o instanceof y)for(_=0;2!==_;_++){var w=t,S=i;1===_&&(w=o,S=h);for(k=0;2!==k;k++){0===k?s.set(f,0,1):1===k&&s.set(f,1,0),0!==S&&s.rotate(f,f,S),n.projectConvexOntoAxis(t,e,i,f,v),n.projectConvexOntoAxis(o,a,h,f,b);var x=v,P=b;v[0]>b[0]&&(P=v,x=b,!0),c=(A=P[0]-x[1])<=0,(null===p||A>p)&&(s.copy(l,f),p=A,d=c)}}else for(var _=0;2!==_;_++){var w=t,S=i;1===_&&(w=o,S=h);for(var k=0;k!==w.vertices.length;k++){s.rotate(g,w.vertices[k],S),s.rotate(m,w.vertices[(k+1)%w.vertices.length],S),r(u,m,g),s.rotate90cw(f,u),s.normalize(f,f),n.projectConvexOntoAxis(t,e,i,f,v),n.projectConvexOntoAxis(o,a,h,f,b);var x=v,P=b;v[0]>b[0]&&(P=v,x=b,!0);var A=P[0]-x[1];c=A<=0,(null===p||A>p)&&(s.copy(l,f),p=A,d=c)}}return d};var at=s.fromValues(0,0),st=s.fromValues(0,0),rt=s.fromValues(0,0);n.getClosestEdge=function(t,e,i,n){var o=at,a=st,h=rt;s.rotate(o,i,-e),n&&s.scale(o,o,-1);for(var p=-1,c=t.vertices.length,d=-1,u=0;u!==c;u++){r(a,t.vertices[(u+1)%c],t.vertices[u%c]),s.rotate90cw(h,a),s.normalize(h,h);var g=l(h,o);(-1===p||g>d)&&(p=u%c,d=g)}return p};var ht=s.create(),lt=s.create(),pt=s.create(),ct=s.create(),dt=s.create(),ut=s.create(),gt=s.create();n.prototype[f.CIRCLE|f.HEIGHTFIELD]=n.prototype.circleHeightfield=function(t,e,i,n,o,a,l,p,c,d){var u=a.heights,d=d||e.radius,g=a.elementWidth,m=lt,f=ht,y=dt,v=gt,b=ut,w=pt,S=ct,x=Math.floor((i[0]-d-l[0])/g),P=Math.ceil((i[0]+d-l[0])/g);x<0&&(x=0),P>=u.length&&(P=u.length-1);for(var _=u[x],k=u[P],A=x;A<P;A++)u[A]<k&&(k=u[A]),u[A]>_&&(_=u[A]);if(i[1]-d>_)return!c&&0;for(var T=!1,A=x;A<P;A++){s.set(w,A*g,u[A]),s.set(S,(A+1)*g,u[A+1]),s.add(w,w,l),s.add(S,S,l),s.sub(b,S,w),s.rotate(b,b,Math.PI/2),s.normalize(b,b),s.scale(f,b,-d),s.add(f,f,i),s.sub(m,f,w);var M=s.dot(m,b);if(f[0]>=w[0]&&f[0]<S[0]&&M<=0){if(c)return!0;T=!0,s.scale(m,b,-M),s.add(y,f,m),s.copy(v,b);C=this.createContactEquation(o,t,a,e);s.copy(C.normalA,v),s.scale(C.contactPointB,C.normalA,-d),h(C.contactPointB,C.contactPointB,i),r(C.contactPointB,C.contactPointB,t.position),s.copy(C.contactPointA,y),s.sub(C.contactPointA,C.contactPointA,o.position),this.contactEquations.push(C),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(C))}}if(T=!1,d>0)for(A=x;A<=P;A++)if(s.set(w,A*g,u[A]),s.add(w,w,l),s.sub(m,i,w),s.squaredLength(m)<Math.pow(d,2)){if(c)return!0;T=!0;var C=this.createContactEquation(o,t,a,e);s.copy(C.normalA,m),s.normalize(C.normalA,C.normalA),s.scale(C.contactPointB,C.normalA,-d),h(C.contactPointB,C.contactPointB,i),r(C.contactPointB,C.contactPointB,t.position),r(C.contactPointA,w,l),h(C.contactPointA,C.contactPointA,l),r(C.contactPointA,C.contactPointA,o.position),this.contactEquations.push(C),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(C))}return T?1:0};var mt=s.create(),ft=s.create(),yt=s.create(),vt=new m({vertices:[s.create(),s.create(),s.create(),s.create()]});n.prototype[f.BOX|f.HEIGHTFIELD]=n.prototype[f.CONVEX|f.HEIGHTFIELD]=n.prototype.convexHeightfield=function(t,e,i,n,o,a,r,h,l){var p=a.heights,c=a.elementWidth,d=mt,u=ft,g=yt,m=vt,f=Math.floor((t.aabb.lowerBound[0]-r[0])/c),y=Math.ceil((t.aabb.upperBound[0]-r[0])/c);f<0&&(f=0),y>=p.length&&(y=p.length-1);for(var v=p[f],b=p[y],w=f;w<y;w++)p[w]<b&&(b=p[w]),p[w]>v&&(v=p[w]);if(t.aabb.lowerBound[1]>v)return!l&&0;for(var S=0,w=f;w<y;w++){s.set(d,w*c,p[w]),s.set(u,(w+1)*c,p[w+1]),s.add(d,d,r),s.add(u,u,r);s.set(g,.5*(u[0]+d[0]),.5*(u[1]+d[1]-100)),s.sub(m.vertices[0],u,g),s.sub(m.vertices[1],d,g),s.copy(m.vertices[2],m.vertices[1]),s.copy(m.vertices[3],m.vertices[0]),m.vertices[2][1]-=100,m.vertices[3][1]-=100,S+=this.convexConvex(t,e,i,n,o,m,g,0,l)}return S}},{"../equations/ContactEquation":21,"../equations/Equation":22,"../equations/FrictionEquation":23,"../math/vec2":30,"../objects/Body":31,"../shapes/Box":37,"../shapes/Circle":39,"../shapes/Convex":40,"../shapes/Shape":45,"../utils/ContactEquationPool":48,"../utils/FrictionEquationPool":49,"../utils/TupleDictionary":56,"../utils/Utils":57}],11:[function(t,e,i){function n(t){t=t||{},this.from=t.from?a.fromValues(t.from[0],t.from[1]):a.create(),this.to=t.to?a.fromValues(t.to[0],t.to[1]):a.create(),this.checkCollisionResponse=void 0===t.checkCollisionResponse||t.checkCollisionResponse,this.skipBackfaces=!!t.skipBackfaces,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:-1,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:-1,this.mode=void 0!==t.mode?t.mode:n.ANY,this.callback=t.callback||function(t){},this.direction=a.create(),this.length=1,this.update()}function o(t,e,i){a.sub(r,i,t);var n=a.dot(r,e);return a.scale(h,e,n),a.add(h,h,t),a.squaredDistance(i,h)}e.exports=n;var a=t("../math/vec2");t("../collision/RaycastResult"),t("../shapes/Shape"),t("../collision/AABB");n.prototype.constructor=n,n.CLOSEST=1,n.ANY=2,n.ALL=4,n.prototype.update=function(){var t=this.direction;a.sub(t,this.to,this.from),this.length=a.length(t),a.normalize(t,t)},n.prototype.intersectBodies=function(t,e){for(var i=0,n=e.length;!t.shouldStop(this)&&i<n;i++){var o=e[i],a=o.getAABB();(a.overlapsRay(this)>=0||a.containsPoint(this.from))&&this.intersectBody(t,o)}};var s=a.create();n.prototype.intersectBody=function(t,e){var i=this.checkCollisionResponse;if(!i||e.collisionResponse)for(var n=s,o=0,r=e.shapes.length;o<r;o++){var h=e.shapes[o];if((!i||h.collisionResponse)&&(0!=(this.collisionGroup&h.collisionMask)&&0!=(h.collisionGroup&this.collisionMask))){a.rotate(n,h.position,e.angle),a.add(n,n,e.position);var l=h.angle+e.angle;if(this.intersectShape(t,h,l,n,e),t.shouldStop(this))break}}},n.prototype.intersectShape=function(t,e,i,n,a){o(this.from,this.direction,n)>e.boundingRadius*e.boundingRadius||(this._currentBody=a,this._currentShape=e,e.raycast(t,this,n,i),this._currentBody=this._currentShape=null)},n.prototype.getAABB=function(t){var e=this.to,i=this.from;a.set(t.lowerBound,Math.min(e[0],i[0]),Math.min(e[1],i[1])),a.set(t.upperBound,Math.max(e[0],i[0]),Math.max(e[1],i[1]))};a.create();n.prototype.reportIntersection=function(t,e,i,o){this.from,this.to;var s=this._currentShape,r=this._currentBody;if(!(this.skipBackfaces&&a.dot(i,this.direction)>0))switch(this.mode){case n.ALL:t.set(i,s,r,e,o),this.callback(t);break;case n.CLOSEST:(e<t.fraction||!t.hasHit())&&t.set(i,s,r,e,o);break;case n.ANY:t.set(i,s,r,e,o)}};var r=a.create(),h=a.create()},{"../collision/AABB":7,"../collision/RaycastResult":12,"../math/vec2":30,"../shapes/Shape":45}],12:[function(t,e,i){function n(){this.normal=o.create(),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1}var o=t("../math/vec2"),a=t("../collision/Ray");e.exports=n,n.prototype.reset=function(){o.set(this.normal,0,0),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1},n.prototype.getHitDistance=function(t){return o.distance(t.from,t.to)*this.fraction},n.prototype.hasHit=function(){return-1!==this.fraction},n.prototype.getHitPoint=function(t,e){o.lerp(t,e.from,e.to,this.fraction)},n.prototype.stop=function(){this.isStopped=!0},n.prototype.shouldStop=function(t){return this.isStopped||-1!==this.fraction&&t.mode===a.ANY},n.prototype.set=function(t,e,i,n,a){o.copy(this.normal,t),this.shape=e,this.body=i,this.fraction=n,this.faceIndex=a}},{"../collision/Ray":11,"../math/vec2":30}],13:[function(t,e,i){function n(){a.call(this,a.SAP),this.axisList=[],this.axisIndex=0;var t=this;this._addBodyHandler=function(e){t.axisList.push(e.body)},this._removeBodyHandler=function(e){var i=t.axisList.indexOf(e.body);-1!==i&&t.axisList.splice(i,1)}}var o=t("../utils/Utils"),a=t("../collision/Broadphase");e.exports=n,(n.prototype=new a).constructor=n,n.prototype.setWorld=function(t){this.axisList.length=0,o.appendArray(this.axisList,t.bodies),t.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),t.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=t},n.sortAxisList=function(t,e){e|=0;for(var i=1,n=t.length;i<n;i++){for(var o=t[i],a=i-1;a>=0&&!(t[a].aabb.lowerBound[e]<=o.aabb.lowerBound[e]);a--)t[a+1]=t[a];t[a+1]=o}return t},n.prototype.sortList=function(){var t=this.axisList,e=this.axisIndex;n.sortAxisList(t,e)},n.prototype.getCollisionPairs=function(t){var e=this.axisList,i=this.result,n=this.axisIndex;i.length=0;for(var o=e.length;o--;){var s=e[o];s.aabbNeedsUpdate&&s.updateAABB()}this.sortList();for(var r=0,h=0|e.length;r!==h;r++)for(var l=e[r],p=r+1;p<h;p++){var c=e[p];if(!(c.aabb.lowerBound[n]<=l.aabb.upperBound[n]))break;a.canCollide(l,c)&&this.boundingVolumeCheck(l,c)&&i.push(l,c)}return i},n.prototype.aabbQuery=function(t,e,i){i=i||[],this.sortList();var n=this.axisIndex,o="x";1===n&&(o="y"),2===n&&(o="z");for(var a=this.axisList,s=(e.lowerBound[o],e.upperBound[o],0);s<a.length;s++){var r=a[s];r.aabbNeedsUpdate&&r.updateAABB(),r.aabb.overlaps(e)&&i.push(r)}return i}},{"../collision/Broadphase":8,"../utils/Utils":57}],14:[function(t,e,i){function n(t,e,i,n){this.type=i,n=o.defaults(n,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=e,this.collideConnected=n.collideConnected,n.wakeUpBodies&&(t&&t.wakeUp(),e&&e.wakeUp())}e.exports=n;var o=t("../utils/Utils");n.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},n.DISTANCE=1,n.GEAR=2,n.LOCK=3,n.PRISMATIC=4,n.REVOLUTE=5,n.prototype.setStiffness=function(t){for(var e=this.equations,i=0;i!==e.length;i++){var n=e[i];n.stiffness=t,n.needsUpdate=!0}},n.prototype.setRelaxation=function(t){for(var e=this.equations,i=0;i!==e.length;i++){var n=e[i];n.relaxation=t,n.needsUpdate=!0}}},{"../utils/Utils":57}],15:[function(t,e,i){function n(t,e,i){i=r.defaults(i,{localAnchorA:[0,0],localAnchorB:[0,0]}),o.call(this,t,e,o.DISTANCE,i),this.localAnchorA=s.fromValues(i.localAnchorA[0],i.localAnchorA[1]),this.localAnchorB=s.fromValues(i.localAnchorB[0],i.localAnchorB[1]);var n=this.localAnchorA,h=this.localAnchorB;if(this.distance=0,"number"==typeof i.distance)this.distance=i.distance;else{var l=s.create(),p=s.create(),c=s.create();s.rotate(l,n,t.angle),s.rotate(p,h,e.angle),s.add(c,e.position,p),s.sub(c,c,l),s.sub(c,c,t.position),this.distance=s.length(c)}var d;d=void 0===i.maxForce?Number.MAX_VALUE:i.maxForce;var u=new a(t,e,-d,d);this.equations=[u],this.maxForce=d;var c=s.create(),g=s.create(),m=s.create(),f=this;u.computeGq=function(){var t=this.bodyA,e=this.bodyB,i=t.position,o=e.position;return s.rotate(g,n,t.angle),s.rotate(m,h,e.angle),s.add(c,o,m),s.sub(c,c,g),s.sub(c,c,i),s.length(c)-f.distance},this.setMaxForce(d),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}var o=t("./Constraint"),a=t("../equations/Equation"),s=t("../math/vec2"),r=t("../utils/Utils");e.exports=n,(n.prototype=new o).constructor=n;var h=s.create(),l=s.create(),p=s.create();n.prototype.update=function(){var t=this.equations[0],e=this.bodyA,i=this.bodyB,n=(this.distance,e.position),o=i.position,a=this.equations[0],r=t.G;s.rotate(l,this.localAnchorA,e.angle),s.rotate(p,this.localAnchorB,i.angle),s.add(h,o,p),s.sub(h,h,l),s.sub(h,h,n),this.position=s.length(h);var c=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(a.maxForce=0,a.minForce=-this.maxForce,this.distance=this.upperLimit,c=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(a.maxForce=this.maxForce,a.minForce=0,this.distance=this.lowerLimit,c=!0),!this.lowerLimitEnabled&&!this.upperLimitEnabled||c){a.enabled=!0,s.normalize(h,h);var d=s.crossLength(l,h),u=s.crossLength(p,h);r[0]=-h[0],r[1]=-h[1],r[2]=-d,r[3]=h[0],r[4]=h[1],r[5]=u}else a.enabled=!1},n.prototype.setMaxForce=function(t){var e=this.equations[0];e.minForce=-t,e.maxForce=t},n.prototype.getMaxForce=function(){return this.equations[0].maxForce}},{"../equations/Equation":22,"../math/vec2":30,"../utils/Utils":57,"./Constraint":14}],16:[function(t,e,i){function n(t,e,i){i=i||{},o.call(this,t,e,o.GEAR,i),this.ratio=void 0!==i.ratio?i.ratio:1,this.angle=void 0!==i.angle?i.angle:e.angle-this.ratio*t.angle,i.angle=this.angle,i.ratio=this.ratio,this.equations=[new a(t,e,i)],void 0!==i.maxTorque&&this.setMaxTorque(i.maxTorque)}var o=t("./Constraint"),a=(t("../equations/Equation"),t("../equations/AngleLockEquation"));t("../math/vec2");e.exports=n,(n.prototype=new o).constructor=n,n.prototype.update=function(){var t=this.equations[0];t.ratio!==this.ratio&&t.setRatio(this.ratio),t.angle=this.angle},n.prototype.setMaxTorque=function(t){this.equations[0].setMaxTorque(t)},n.prototype.getMaxTorque=function(t){return this.equations[0].maxForce}},{"../equations/AngleLockEquation":20,"../equations/Equation":22,"../math/vec2":30,"./Constraint":14}],17:[function(t,e,i){function n(t,e,i){i=i||{},o.call(this,t,e,o.LOCK,i);var n=void 0===i.maxForce?Number.MAX_VALUE:i.maxForce,r=(i.localAngleB,new s(t,e,-n,n)),h=new s(t,e,-n,n),l=new s(t,e,-n,n),p=a.create(),c=a.create(),d=this;r.computeGq=function(){return a.rotate(p,d.localOffsetB,t.angle),a.sub(c,e.position,t.position),a.sub(c,c,p),c[0]},h.computeGq=function(){return a.rotate(p,d.localOffsetB,t.angle),a.sub(c,e.position,t.position),a.sub(c,c,p),c[1]};var u=a.create(),g=a.create();l.computeGq=function(){return a.rotate(u,d.localOffsetB,e.angle-d.localAngleB),a.scale(u,u,-1),a.sub(c,t.position,e.position),a.add(c,c,u),a.rotate(g,u,-Math.PI/2),a.normalize(g,g),a.dot(c,g)},this.localOffsetB=a.create(),i.localOffsetB?a.copy(this.localOffsetB,i.localOffsetB):(a.sub(this.localOffsetB,e.position,t.position),a.rotate(this.localOffsetB,this.localOffsetB,-t.angle)),this.localAngleB=0,"number"==typeof i.localAngleB?this.localAngleB=i.localAngleB:this.localAngleB=e.angle-t.angle,this.equations.push(r,h,l),this.setMaxForce(n)}var o=t("./Constraint"),a=t("../math/vec2"),s=t("../equations/Equation");e.exports=n,(n.prototype=new o).constructor=n,n.prototype.setMaxForce=function(t){for(var e=this.equations,i=0;i<this.equations.length;i++)e[i].maxForce=t,e[i].minForce=-t},n.prototype.getMaxForce=function(){return this.equations[0].maxForce};var r=a.create(),h=a.create(),l=a.create(),p=a.fromValues(1,0),c=a.fromValues(0,1);n.prototype.update=function(){var t=this.equations[0],e=this.equations[1],i=this.equations[2],n=this.bodyA,o=this.bodyB;a.rotate(r,this.localOffsetB,n.angle),a.rotate(h,this.localOffsetB,o.angle-this.localAngleB),a.scale(h,h,-1),a.rotate(l,h,Math.PI/2),a.normalize(l,l),t.G[0]=-1,t.G[1]=0,t.G[2]=-a.crossLength(r,p),t.G[3]=1,e.G[0]=0,e.G[1]=-1,e.G[2]=-a.crossLength(r,c),e.G[4]=1,i.G[0]=-l[0],i.G[1]=-l[1],i.G[3]=l[0],i.G[4]=l[1],i.G[5]=a.crossLength(h,l)}},{"../equations/Equation":22,"../math/vec2":30,"./Constraint":14}],18:[function(t,e,i){function n(t,e,i){i=i||{},o.call(this,t,e,o.PRISMATIC,i);var n=r.fromValues(0,0),l=r.fromValues(1,0),p=r.fromValues(0,0);i.localAnchorA&&r.copy(n,i.localAnchorA),i.localAxisA&&r.copy(l,i.localAxisA),i.localAnchorB&&r.copy(p,i.localAnchorB),this.localAnchorA=n,this.localAnchorB=p,this.localAxisA=l;var c=this.maxForce=void 0!==i.maxForce?i.maxForce:Number.MAX_VALUE,d=new s(t,e,-c,c),u=new r.create,g=new r.create,m=new r.create,f=new r.create;if(d.computeGq=function(){return r.dot(m,f)},d.updateJacobian=function(){var i=this.G,o=t.position,a=e.position;r.rotate(u,n,t.angle),r.rotate(g,p,e.angle),r.add(m,a,g),r.sub(m,m,o),r.sub(m,m,u),r.rotate(f,l,t.angle+Math.PI/2),i[0]=-f[0],i[1]=-f[1],i[2]=-r.crossLength(u,f)+r.crossLength(f,m),i[3]=f[0],i[4]=f[1],i[5]=r.crossLength(g,f)},this.equations.push(d),!i.disableRotationalLock){var y=new h(t,e,-c,c);this.equations.push(y)}this.position=0,this.velocity=0,this.lowerLimitEnabled=void 0!==i.lowerLimit,this.upperLimitEnabled=void 0!==i.upperLimit,this.lowerLimit=void 0!==i.lowerLimit?i.lowerLimit:0,this.upperLimit=void 0!==i.upperLimit?i.upperLimit:1,this.upperLimitEquation=new a(t,e),this.lowerLimitEquation=new a(t,e),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=c,this.motorEquation=new s(t,e),this.motorEnabled=!1,this.motorSpeed=0;var v=this,b=this.motorEquation;b.computeGW;b.computeGq=function(){return 0},b.computeGW=function(){var t=this.G,e=this.bodyA,i=this.bodyB,n=e.velocity,o=i.velocity,a=e.angularVelocity,s=i.angularVelocity;return this.gmult(t,n,a,o,s)+v.motorSpeed}}var o=t("./Constraint"),a=t("../equations/ContactEquation"),s=t("../equations/Equation"),r=t("../math/vec2"),h=t("../equations/RotationalLockEquation");e.exports=n,(n.prototype=new o).constructor=n;var l=r.create(),p=r.create(),c=r.create(),d=r.create(),u=r.create(),g=r.create();n.prototype.update=function(){var t=this.equations,e=t[0],i=this.upperLimit,n=this.lowerLimit,o=this.upperLimitEquation,a=this.lowerLimitEquation,s=this.bodyA,h=this.bodyB,m=this.localAxisA,f=this.localAnchorA,y=this.localAnchorB;e.updateJacobian(),r.rotate(l,m,s.angle),r.rotate(d,f,s.angle),r.add(p,d,s.position),r.rotate(u,y,h.angle),r.add(c,u,h.position);var v=this.position=r.dot(c,l)-r.dot(p,l);if(this.motorEnabled){var b=this.motorEquation.G;b[0]=l[0],b[1]=l[1],b[2]=r.crossLength(l,u),b[3]=-l[0],b[4]=-l[1],b[5]=-r.crossLength(l,d)}if(this.upperLimitEnabled&&v>i?(r.scale(o.normalA,l,-1),r.sub(o.contactPointA,p,s.position),r.sub(o.contactPointB,c,h.position),r.scale(g,l,i),r.add(o.contactPointA,o.contactPointA,g),-1===t.indexOf(o)&&t.push(o)):-1!==(w=t.indexOf(o))&&t.splice(w,1),this.lowerLimitEnabled&&v<n)r.scale(a.normalA,l,1),r.sub(a.contactPointA,p,s.position),r.sub(a.contactPointB,c,h.position),r.scale(g,l,n),r.sub(a.contactPointB,a.contactPointB,g),-1===t.indexOf(a)&&t.push(a);else{var w=t.indexOf(a);-1!==w&&t.splice(w,1)}},n.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},n.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},n.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)}},{"../equations/ContactEquation":21,"../equations/Equation":22,"../equations/RotationalLockEquation":24,"../math/vec2":30,"./Constraint":14}],19:[function(t,e,i){function n(t,e,i){i=i||{},o.call(this,t,e,o.REVOLUTE,i);var n=this.maxForce=void 0!==i.maxForce?i.maxForce:Number.MAX_VALUE;this.pivotA=h.create(),this.pivotB=h.create(),i.worldPivot?(h.sub(this.pivotA,i.worldPivot,t.position),h.sub(this.pivotB,i.worldPivot,e.position),h.rotate(this.pivotA,this.pivotA,-t.angle),h.rotate(this.pivotB,this.pivotB,-e.angle)):(h.copy(this.pivotA,i.localPivotA),h.copy(this.pivotB,i.localPivotB));var g=this.equations=[new a(t,e,-n,n),new a(t,e,-n,n)],m=g[0],f=g[1],y=this;m.computeGq=function(){return h.rotate(l,y.pivotA,t.angle),h.rotate(p,y.pivotB,e.angle),h.add(u,e.position,p),h.sub(u,u,t.position),h.sub(u,u,l),h.dot(u,c)},f.computeGq=function(){return h.rotate(l,y.pivotA,t.angle),h.rotate(p,y.pivotB,e.angle),h.add(u,e.position,p),h.sub(u,u,t.position),h.sub(u,u,l),h.dot(u,d)},f.minForce=m.minForce=-n,f.maxForce=m.maxForce=n,this.motorEquation=new s(t,e),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new r(t,e),this.lowerLimitEquation=new r(t,e),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}var o=t("./Constraint"),a=t("../equations/Equation"),s=t("../equations/RotationalVelocityEquation"),r=t("../equations/RotationalLockEquation"),h=t("../math/vec2");e.exports=n;var l=h.create(),p=h.create(),c=h.fromValues(1,0),d=h.fromValues(0,1),u=h.create();(n.prototype=new o).constructor=n,n.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)},n.prototype.update=function(){var t=this.bodyA,e=this.bodyB,i=this.pivotA,n=this.pivotB,o=this.equations,a=(o[0],o[1],o[0]),s=o[1],r=this.upperLimit,u=this.lowerLimit,g=this.upperLimitEquation,m=this.lowerLimitEquation,f=this.angle=e.angle-t.angle;if(this.upperLimitEnabled&&f>r?(g.angle=r,-1===o.indexOf(g)&&o.push(g)):-1!==(y=o.indexOf(g))&&o.splice(y,1),this.lowerLimitEnabled&&f<u)m.angle=u,-1===o.indexOf(m)&&o.push(m);else{var y=o.indexOf(m);-1!==y&&o.splice(y,1)}h.rotate(l,i,t.angle),h.rotate(p,n,e.angle),a.G[0]=-1,a.G[1]=0,a.G[2]=-h.crossLength(l,c),a.G[3]=1,a.G[4]=0,a.G[5]=h.crossLength(p,c),s.G[0]=0,s.G[1]=-1,s.G[2]=-h.crossLength(l,d),s.G[3]=0,s.G[4]=1,s.G[5]=h.crossLength(p,d)},n.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},n.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},n.prototype.motorIsEnabled=function(){return!!this.motorEnabled},n.prototype.setMotorSpeed=function(t){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations[e].relativeVelocity=t}},n.prototype.getMotorSpeed=function(){return!!this.motorEnabled&&this.motorEquation.relativeVelocity}},{"../equations/Equation":22,"../equations/RotationalLockEquation":24,"../equations/RotationalVelocityEquation":25,"../math/vec2":30,"./Constraint":14}],20:[function(t,e,i){function n(t,e,i){i=i||{},o.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=i.angle||0,this.ratio="number"==typeof i.ratio?i.ratio:1,this.setRatio(this.ratio)}var o=t("./Equation");t("../math/vec2");e.exports=n,(n.prototype=new o).constructor=n,n.prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},n.prototype.setRatio=function(t){var e=this.G;e[2]=t,e[5]=-1,this.ratio=t},n.prototype.setMaxTorque=function(t){this.maxForce=t,this.minForce=-t}},{"../math/vec2":30,"./Equation":22}],21:[function(t,e,i){function n(t,e){o.call(this,t,e,0,Number.MAX_VALUE),this.contactPointA=a.create(),this.penetrationVec=a.create(),this.contactPointB=a.create(),this.normalA=a.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}var o=t("./Equation"),a=t("../math/vec2");e.exports=n,(n.prototype=new o).constructor=n,n.prototype.computeB=function(t,e,i){var n=this.bodyA,o=this.bodyB,s=this.contactPointA,r=this.contactPointB,h=n.position,l=o.position,p=this.penetrationVec,c=this.normalA,d=this.G,u=a.crossLength(s,c),g=a.crossLength(r,c);d[0]=-c[0],d[1]=-c[1],d[2]=-u,d[3]=c[0],d[4]=c[1],d[5]=g,a.add(p,l,r),a.sub(p,p,h),a.sub(p,p,s);var m,f;return this.firstImpact&&0!==this.restitution?(f=0,m=1/e*(1+this.restitution)*this.computeGW()):(f=a.dot(c,p)+this.offset,m=this.computeGW()),-f*t-m*e-i*this.computeGiMf()}},{"../math/vec2":30,"./Equation":22}],22:[function(t,e,i){function n(t,e,i,o){this.minForce=void 0===i?-Number.MAX_VALUE:i,this.maxForce=void 0===o?Number.MAX_VALUE:o,this.bodyA=t,this.bodyB=e,this.stiffness=n.DEFAULT_STIFFNESS,this.relaxation=n.DEFAULT_RELAXATION,this.G=new a.ARRAY_TYPE(6);for(var s=0;s<6;s++)this.G[s]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}e.exports=n;var o=t("../math/vec2"),a=t("../utils/Utils");t("../objects/Body");n.prototype.constructor=n,n.DEFAULT_STIFFNESS=1e6,n.DEFAULT_RELAXATION=4,n.prototype.update=function(){var t=this.stiffness,e=this.relaxation,i=this.timeStep;this.a=4/(i*(1+4*e)),this.b=4*e/(1+4*e),this.epsilon=4/(i*i*t*(1+4*e)),this.needsUpdate=!1},n.prototype.gmult=function(t,e,i,n,o){return t[0]*e[0]+t[1]*e[1]+t[2]*i+t[3]*n[0]+t[4]*n[1]+t[5]*o},n.prototype.computeB=function(t,e,i){var n=this.computeGW();return-this.computeGq()*t-n*e-this.computeGiMf()*i};var s=o.create(),r=o.create();n.prototype.computeGq=function(){var t=this.G,e=this.bodyA,i=this.bodyB,n=(e.position,i.position,e.angle),o=i.angle;return this.gmult(t,s,n,r,o)+this.offset},n.prototype.computeGW=function(){var t=this.G,e=this.bodyA,i=this.bodyB,n=e.velocity,o=i.velocity,a=e.angularVelocity,s=i.angularVelocity;return this.gmult(t,n,a,o,s)+this.relativeVelocity},n.prototype.computeGWlambda=function(){var t=this.G,e=this.bodyA,i=this.bodyB,n=e.vlambda,o=i.vlambda,a=e.wlambda,s=i.wlambda;return this.gmult(t,n,a,o,s)};var h=o.create(),l=o.create();n.prototype.computeGiMf=function(){var t=this.bodyA,e=this.bodyB,i=t.force,n=t.angularForce,a=e.force,s=e.angularForce,r=t.invMassSolve,p=e.invMassSolve,c=t.invInertiaSolve,d=e.invInertiaSolve,u=this.G;return o.scale(h,i,r),o.multiply(h,t.massMultiplier,h),o.scale(l,a,p),o.multiply(l,e.massMultiplier,l),this.gmult(u,h,n*c,l,s*d)},n.prototype.computeGiMGt=function(){var t=this.bodyA,e=this.bodyB,i=t.invMassSolve,n=e.invMassSolve,o=t.invInertiaSolve,a=e.invInertiaSolve,s=this.G;return s[0]*s[0]*i*t.massMultiplier[0]+s[1]*s[1]*i*t.massMultiplier[1]+s[2]*s[2]*o+s[3]*s[3]*n*e.massMultiplier[0]+s[4]*s[4]*n*e.massMultiplier[1]+s[5]*s[5]*a};var p=o.create(),c=o.create(),d=o.create();o.create(),o.create(),o.create();n.prototype.addToWlambda=function(t){var e=this.bodyA,i=this.bodyB,n=p,a=c,s=d,r=e.invMassSolve,h=i.invMassSolve,l=e.invInertiaSolve,u=i.invInertiaSolve,g=this.G;a[0]=g[0],a[1]=g[1],s[0]=g[3],s[1]=g[4],o.scale(n,a,r*t),o.multiply(n,n,e.massMultiplier),o.add(e.vlambda,e.vlambda,n),e.wlambda+=l*g[2]*t,o.scale(n,s,h*t),o.multiply(n,n,i.massMultiplier),o.add(i.vlambda,i.vlambda,n),i.wlambda+=u*g[5]*t},n.prototype.computeInvC=function(t){return 1/(this.computeGiMGt()+t)}},{"../math/vec2":30,"../objects/Body":31,"../utils/Utils":57}],23:[function(t,e,i){function n(t,e,i){a.call(this,t,e,-i,i),this.contactPointA=o.create(),this.contactPointB=o.create(),this.t=o.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}var o=t("../math/vec2"),a=t("./Equation");t("../utils/Utils");e.exports=n,(n.prototype=new a).constructor=n,n.prototype.setSlipForce=function(t){this.maxForce=t,this.minForce=-t},n.prototype.getSlipForce=function(){return this.maxForce},n.prototype.computeB=function(t,e,i){this.bodyA,this.bodyB;var n=this.contactPointA,a=this.contactPointB,s=this.t,r=this.G;return r[0]=-s[0],r[1]=-s[1],r[2]=-o.crossLength(n,s),r[3]=s[0],r[4]=s[1],r[5]=o.crossLength(a,s),-this.computeGW()*e-i*this.computeGiMf()}},{"../math/vec2":30,"../utils/Utils":57,"./Equation":22}],24:[function(t,e,i){function n(t,e,i){i=i||{},o.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=i.angle||0;var n=this.G;n[2]=1,n[5]=-1}var o=t("./Equation"),a=t("../math/vec2");e.exports=n,(n.prototype=new o).constructor=n;var s=a.create(),r=a.create(),h=a.fromValues(1,0),l=a.fromValues(0,1);n.prototype.computeGq=function(){return a.rotate(s,h,this.bodyA.angle+this.angle),a.rotate(r,l,this.bodyB.angle),a.dot(s,r)}},{"../math/vec2":30,"./Equation":22}],25:[function(t,e,i){function n(t,e){o.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}var o=t("./Equation");t("../math/vec2");e.exports=n,(n.prototype=new o).constructor=n,n.prototype.computeB=function(t,e,i){var n=this.G;n[2]=-1,n[5]=this.ratio;var o=this.computeGiMf();return-this.computeGW()*e-i*o}},{"../math/vec2":30,"./Equation":22}],26:[function(t,e,i){var n=function(){};e.exports=n,n.prototype={constructor:n,on:function(t,e,i){e.context=i||this,void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e),this},has:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;if(e){if(void 0!==i[t]&&-1!==i[t].indexOf(e))return!0}else if(void 0!==i[t])return!0;return!1},off:function(t,e){if(void 0===this._listeners)return this;var i=this._listeners,n=i[t].indexOf(e);return-1!==n&&i[t].splice(n,1),this},emit:function(t){if(void 0===this._listeners)return this;var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var i=0,n=e.length;i<n;i++){var o=e[i];o.call(o.context,t)}}return this}}},{}],27:[function(t,e,i){function n(t,e,i){if(i=i||{},!(t instanceof o&&e instanceof o))throw new Error("First two arguments must be Material instances.");this.id=n.idCounter++,this.materialA=t,this.materialB=e,this.friction=void 0!==i.friction?Number(i.friction):.3,this.restitution=void 0!==i.restitution?Number(i.restitution):0,this.stiffness=void 0!==i.stiffness?Number(i.stiffness):a.DEFAULT_STIFFNESS,this.relaxation=void 0!==i.relaxation?Number(i.relaxation):a.DEFAULT_RELAXATION,this.frictionStiffness=void 0!==i.frictionStiffness?Number(i.frictionStiffness):a.DEFAULT_STIFFNESS,this.frictionRelaxation=void 0!==i.frictionRelaxation?Number(i.frictionRelaxation):a.DEFAULT_RELAXATION,this.surfaceVelocity=void 0!==i.surfaceVelocity?Number(i.surfaceVelocity):0,this.contactSkinSize=.005}var o=t("./Material"),a=t("../equations/Equation");e.exports=n,n.idCounter=0},{"../equations/Equation":22,"./Material":28}],28:[function(t,e,i){function n(t){this.id=t||n.idCounter++}e.exports=n,n.idCounter=0},{}],29:[function(t,e,i){var n={};n.GetArea=function(t){if(t.length<6)return 0;for(var e=t.length-2,i=0,n=0;n<e;n+=2)i+=(t[n+2]-t[n])*(t[n+1]+t[n+3]);return.5*-(i+=(t[0]-t[e])*(t[e+1]+t[1]))},n.Triangulate=function(t){var e=t.length>>1;if(e<3)return[];for(var i=[],o=[],a=0;a<e;a++)o.push(a);for(var a=0,s=e;s>3;){var r=o[(a+0)%s],h=o[(a+1)%s],l=o[(a+2)%s],p=t[2*r],c=t[2*r+1],d=t[2*h],u=t[2*h+1],g=t[2*l],m=t[2*l+1],f=!1;if(n._convex(p,c,d,u,g,m)){f=!0;for(var y=0;y<s;y++){var v=o[y];if(v!=r&&v!=h&&v!=l&&n._PointInTriangle(t[2*v],t[2*v+1],p,c,d,u,g,m)){f=!1;break}}}if(f)i.push(r,h,l),o.splice((a+1)%s,1),s--,a=0;else if(a++>3*s)break}return i.push(o[0],o[1],o[2]),i},n._PointInTriangle=function(t,e,i,n,o,a,s,r){var h=s-i,l=r-n,p=o-i,c=a-n,d=t-i,u=e-n,g=h*h+l*l,m=h*p+l*c,f=h*d+l*u,y=p*p+c*c,v=p*d+c*u,b=1/(g*y-m*m),w=(y*f-m*v)*b,S=(g*v-m*f)*b;return w>=0&&S>=0&&w+S<1},n._convex=function(t,e,i,n,o,a){return(e-n)*(o-i)+(i-t)*(a-n)>=0},e.exports=n},{}],30:[function(t,e,i){var n=e.exports={},o=t("../utils/Utils");n.crossLength=function(t,e){return t[0]*e[1]-t[1]*e[0]},n.crossVZ=function(t,e,i){return n.rotate(t,e,-Math.PI/2),n.scale(t,t,i),t},n.crossZV=function(t,e,i){return n.rotate(t,i,Math.PI/2),n.scale(t,t,e),t},n.rotate=function(t,e,i){if(0!==i){var n=Math.cos(i),o=Math.sin(i),a=e[0],s=e[1];t[0]=n*a-o*s,t[1]=o*a+n*s}else t[0]=e[0],t[1]=e[1]},n.rotate90cw=function(t,e){var i=e[0],n=e[1];t[0]=n,t[1]=-i},n.toLocalFrame=function(t,e,i,o){n.copy(t,e),n.sub(t,t,i),n.rotate(t,t,-o)},n.toGlobalFrame=function(t,e,i,o){n.copy(t,e),n.rotate(t,t,o),n.add(t,t,i)},n.vectorToLocalFrame=function(t,e,i){n.rotate(t,e,-i)},n.vectorToGlobalFrame=function(t,e,i){n.rotate(t,e,i)},n.centroid=function(t,e,i,o){return n.add(t,e,i),n.add(t,t,o),n.scale(t,t,1/3),t},n.create=function(){var t=new o.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},n.clone=function(t){var e=new o.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},n.fromValues=function(t,e){var i=new o.ARRAY_TYPE(2);return i[0]=t,i[1]=e,i},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},n.set=function(t,e,i){return t[0]=e,t[1]=i,t},n.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},n.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},n.sub=n.subtract,n.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},n.mul=n.multiply,n.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},n.div=n.divide,n.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},n.distance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(i*i+n*n)},n.dist=n.distance,n.squaredDistance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n},n.sqrDist=n.squaredDistance,n.length=function(t){var e=t[0],i=t[1];return Math.sqrt(e*e+i*i)},n.len=n.length,n.squaredLength=function(t){var e=t[0],i=t[1];return e*e+i*i},n.sqrLen=n.squaredLength,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},n.normalize=function(t,e){var i=e[0],n=e[1],o=i*i+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o),t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},n.lerp=function(t,e,i,n){var o=e[0],a=e[1];return t[0]=o+n*(i[0]-o),t[1]=a+n*(i[1]-a),t},n.reflect=function(t,e,i){var n=e[0]*i[0]+e[1]*i[1];t[0]=e[0]-2*i[0]*n,t[1]=e[1]-2*i[1]*n},n.getLineSegmentsIntersection=function(t,e,i,o,a){var s=n.getLineSegmentsIntersectionFraction(e,i,o,a);return!(s<0)&&(t[0]=e[0]+s*(i[0]-e[0]),t[1]=e[1]+s*(i[1]-e[1]),!0)},n.getLineSegmentsIntersectionFraction=function(t,e,i,n){var o,a,s=e[0]-t[0],r=e[1]-t[1],h=n[0]-i[0],l=n[1]-i[1];return o=(-r*(t[0]-i[0])+s*(t[1]-i[1]))/(-h*r+s*l),a=(h*(t[1]-i[1])-l*(t[0]-i[0]))/(-h*r+s*l),o>=0&&o<=1&&a>=0&&a<=1?a:-1}},{"../utils/Utils":57}],31:[function(t,e,i){function n(t){t=t||{},p.call(this),this.id=t.id||++n._idCounter,this.world=null,this.shapes=[],this.mass=t.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!t.fixedRotation,this.fixedX=!!t.fixedX,this.fixedY=!!t.fixedY,this.massMultiplier=o.create(),this.position=o.fromValues(0,0),t.position&&o.copy(this.position,t.position),this.interpolatedPosition=o.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=o.fromValues(0,0),this.previousAngle=0,this.velocity=o.fromValues(0,0),t.velocity&&o.copy(this.velocity,t.velocity),this.vlambda=o.fromValues(0,0),this.wlambda=0,this.angle=t.angle||0,this.angularVelocity=t.angularVelocity||0,this.force=o.create(),t.force&&o.copy(this.force,t.force),this.angularForce=t.angularForce||0,this.damping="number"==typeof t.damping?t.damping:.1,this.angularDamping="number"==typeof t.angularDamping?t.angularDamping:.1,this.type=n.STATIC,void 0!==t.type?this.type=t.type:t.mass?this.type=n.DYNAMIC:this.type=n.STATIC,this.boundingRadius=0,this.aabb=new l,this.aabbNeedsUpdate=!0,this.allowSleep=void 0===t.allowSleep||t.allowSleep,this.wantsToSleep=!1,this.sleepState=n.AWAKE,this.sleepSpeedLimit=void 0!==t.sleepSpeedLimit?t.sleepSpeedLimit:.2,this.sleepTimeLimit=void 0!==t.sleepTimeLimit?t.sleepTimeLimit:1,this.gravityScale=void 0!==t.gravityScale?t.gravityScale:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.idleTime=0,this.timeLastSleepy=0,this.ccdSpeedThreshold=void 0!==t.ccdSpeedThreshold?t.ccdSpeedThreshold:-1,this.ccdIterations=void 0!==t.ccdIterations?t.ccdIterations:10,this.concavePath=null,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}var o=t("../math/vec2"),a=t("poly-decomp"),s=t("../shapes/Convex"),r=t("../collision/RaycastResult"),h=t("../collision/Ray"),l=t("../collision/AABB"),p=t("../events/EventEmitter");e.exports=n,n.prototype=new p,n.prototype.constructor=n,n._idCounter=0,n.prototype.updateSolveMassProperties=function(){this.sleepState===n.SLEEPING||this.type===n.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},n.prototype.setDensity=function(t){var e=this.getArea();this.mass=e*t,this.updateMassProperties()},n.prototype.getArea=function(){for(var t=0,e=0;e<this.shapes.length;e++)t+=this.shapes[e].area;return t},n.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var c=new l,d=o.create();n.prototype.updateAABB=function(){for(var t=this.shapes,e=t.length,i=d,n=this.angle,a=0;a!==e;a++){var s=t[a],r=s.angle+n;o.rotate(i,s.position,n),o.add(i,i,this.position),s.computeAABB(c,i,r),0===a?this.aabb.copy(c):this.aabb.extend(c)}this.aabbNeedsUpdate=!1},n.prototype.updateBoundingRadius=function(){for(var t=this.shapes,e=t.length,i=0,n=0;n!==e;n++){var a=t[n],s=o.length(a.position),r=a.boundingRadius;s+r>i&&(i=s+r)}this.boundingRadius=i},n.prototype.addShape=function(t,e,i){if(t.body)throw new Error("A shape can only be added to one body.");t.body=this,e?o.copy(t.position,e):o.set(t.position,0,0),t.angle=i||0,this.shapes.push(t),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},n.prototype.removeShape=function(t){var e=this.shapes.indexOf(t);return-1!==e&&(this.shapes.splice(e,1),this.aabbNeedsUpdate=!0,t.body=null,!0)},n.prototype.updateMassProperties=function(){if(this.type===n.STATIC||this.type===n.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var t=this.shapes,e=t.length,i=this.mass/e,a=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var s=0;s<e;s++){var r=t[s],h=o.squaredLength(r.position);a+=r.computeMomentOfInertia(i)+i*h}this.inertia=a,this.invInertia=a>0?1/a:0}this.invMass=1/this.mass,o.set(this.massMultiplier,this.fixedX?0:1,this.fixedY?0:1)}};o.create();n.prototype.applyForce=function(t,e){if(o.add(this.force,this.force,t),e){var i=o.crossLength(e,t);this.angularForce+=i}};var u=o.create(),g=o.create(),m=o.create();n.prototype.applyForceLocal=function(t,e){e=e||m;var i=u,n=g;this.vectorToWorldFrame(i,t),this.vectorToWorldFrame(n,e),this.applyForce(i,n)};var f=o.create();n.prototype.applyImpulse=function(t,e){if(this.type===n.DYNAMIC){var i=f;if(o.scale(i,t,this.invMass),o.multiply(i,this.massMultiplier,i),o.add(this.velocity,i,this.velocity),e){var a=o.crossLength(e,t);a*=this.invInertia,this.angularVelocity+=a}}};var y=o.create(),v=o.create(),b=o.create();n.prototype.applyImpulseLocal=function(t,e){e=e||b;var i=y,n=v;this.vectorToWorldFrame(i,t),this.vectorToWorldFrame(n,e),this.applyImpulse(i,n)},n.prototype.toLocalFrame=function(t,e){o.toLocalFrame(t,e,this.position,this.angle)},n.prototype.toWorldFrame=function(t,e){o.toGlobalFrame(t,e,this.position,this.angle)},n.prototype.vectorToLocalFrame=function(t,e){o.vectorToLocalFrame(t,e,this.angle)},n.prototype.vectorToWorldFrame=function(t,e){o.vectorToGlobalFrame(t,e,this.angle)},n.prototype.fromPolygon=function(t,e){e=e||{};for(var i=!1,n=this.shapes.length;n>=0;--n)this.removeShape(this.shapes[n]);var r=new a.Polygon;if(r.vertices=t,r.makeCCW(),"number"==typeof e.removeCollinearPoints&&r.removeCollinearPoints(e.removeCollinearPoints),void 0===e.skipSimpleCheck&&!r.isSimple())return!1;this.concavePath=r.vertices.slice(0);for(n=0;n<this.concavePath.length;n++){d=[0,0];o.copy(d,this.concavePath[n]),this.concavePath[n]=d}var h;h=e.optimalDecomp?r.decomp():r.quickDecomp();for(var l=o.create(),n=0;n!==h.length;n++){for(var p=new s({vertices:h[n].vertices}),c=0;c!==p.vertices.length;c++){var d=p.vertices[c];o.sub(d,d,p.centerOfMass)}o.scale(l,p.centerOfMass,1),p.updateTriangles(),p.updateCenterOfMass(),p.updateBoundingRadius(),this.addShape(p,l)}return"boolean"==typeof e.skipAdjustCenterOfMass&&(i=e.skipAdjustCenterOfMass),0==i&&this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0,!0};o.fromValues(0,0);var w=o.fromValues(0,0),S=o.fromValues(0,0),x=o.fromValues(0,0);n.prototype.adjustCenterOfMass=function(){var t=w,e=S,i=x,n=0;o.set(e,0,0);for(s=0;s!==this.shapes.length;s++){a=this.shapes[s];o.scale(t,a.position,a.area),o.add(e,e,t),n+=a.area}o.scale(i,e,1/n);for(s=0;s!==this.shapes.length;s++){var a=this.shapes[s];o.sub(a.position,a.position,i)}o.add(this.position,this.position,i);for(var s=0;this.concavePath&&s<this.concavePath.length;s++)o.sub(this.concavePath[s],this.concavePath[s],i);this.updateMassProperties(),this.updateBoundingRadius()},n.prototype.setZeroForce=function(){o.set(this.force,0,0),this.angularForce=0},n.prototype.resetConstraintVelocity=function(){var t=this,e=t.vlambda;o.set(e,0,0),t.wlambda=0},n.prototype.addConstraintVelocity=function(){var t=this,e=t.velocity;o.add(e,e,t.vlambda),t.angularVelocity+=t.wlambda},n.prototype.applyDamping=function(t){if(this.type===n.DYNAMIC){var e=this.velocity;o.scale(e,e,Math.pow(1-this.damping,t)),this.angularVelocity*=Math.pow(1-this.angularDamping,t)}},n.prototype.wakeUp=function(){var t=this.sleepState;this.sleepState=n.AWAKE,this.idleTime=0,t!==n.AWAKE&&this.emit(n.wakeUpEvent)},n.prototype.sleep=function(){this.sleepState=n.SLEEPING,this.angularVelocity=0,this.angularForce=0,o.set(this.velocity,0,0),o.set(this.force,0,0),this.emit(n.sleepEvent)},n.prototype.sleepTick=function(t,e,i){if(this.allowSleep&&this.type!==n.SLEEPING){this.wantsToSleep=!1;this.sleepState;o.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2)>=Math.pow(this.sleepSpeedLimit,2)?(this.idleTime=0,this.sleepState=n.AWAKE):(this.idleTime+=i,this.sleepState=n.SLEEPY),this.idleTime>this.sleepTimeLimit&&(e?this.wantsToSleep=!0:this.sleep())}},n.prototype.overlaps=function(t){return this.world.overlapKeeper.bodiesAreOverlapping(this,t)};var P=o.create(),_=o.create();n.prototype.integrate=function(t){var e=this.invMass,i=this.force,n=this.position,a=this.velocity;o.copy(this.previousPosition,this.position),this.previousAngle=this.angle,this.fixedRotation||(this.angularVelocity+=this.angularForce*this.invInertia*t),o.scale(P,i,t*e),o.multiply(P,this.massMultiplier,P),o.add(a,P,a),this.integrateToTimeOfImpact(t)||(o.scale(_,a,t),o.add(n,n,_),this.fixedRotation||(this.angle+=this.angularVelocity*t)),this.aabbNeedsUpdate=!0};var k=new r,A=new h({mode:h.CLOSEST,skipBackfaces:!0}),T=o.create(),M=o.create(),C=o.create();o.create();n.prototype.integrateToTimeOfImpact=function(t){if(this.ccdSpeedThreshold<0||o.squaredLength(this.velocity)<Math.pow(this.ccdSpeedThreshold,2))return!1;o.normalize(T,this.velocity),o.scale(M,this.velocity,t),o.add(M,M,this.position),o.sub(C,M,this.position);this.angularVelocity,o.length(C);return o.copy(A.from,this.position),o.copy(A.to,M),A.update(),this.world.raycast(k,A),hitBody=k.body,hitBody===this&&(hitBody=null),!1},n.prototype.getVelocityAtPoint=function(t,e){return o.crossVZ(t,e,this.angularVelocity),o.subtract(t,this.velocity,t),t},n.sleepyEvent={type:"sleepy"},n.sleepEvent={type:"sleep"},n.wakeUpEvent={type:"wakeup"},n.DYNAMIC=1,n.STATIC=2,n.KINEMATIC=4,n.AWAKE=0,n.SLEEPY=1,n.SLEEPING=2},{"../collision/AABB":7,"../collision/Ray":11,"../collision/RaycastResult":12,"../events/EventEmitter":26,"../math/vec2":30,"../shapes/Convex":40,"poly-decomp":5}],32:[function(t,e,i){function n(t,e,i){i=i||{},a.call(this,t,e,i),this.localAnchorA=o.fromValues(0,0),this.localAnchorB=o.fromValues(0,0),i.localAnchorA&&o.copy(this.localAnchorA,i.localAnchorA),i.localAnchorB&&o.copy(this.localAnchorB,i.localAnchorB),i.worldAnchorA&&this.setWorldAnchorA(i.worldAnchorA),i.worldAnchorB&&this.setWorldAnchorB(i.worldAnchorB);var n=o.create(),s=o.create();this.getWorldAnchorA(n),this.getWorldAnchorB(s);var r=o.distance(n,s);this.restLength="number"==typeof i.restLength?i.restLength:r}var o=t("../math/vec2"),a=t("./Spring");t("../utils/Utils");e.exports=n,(n.prototype=new a).constructor=n,n.prototype.setWorldAnchorA=function(t){this.bodyA.toLocalFrame(this.localAnchorA,t)},n.prototype.setWorldAnchorB=function(t){this.bodyB.toLocalFrame(this.localAnchorB,t)},n.prototype.getWorldAnchorA=function(t){this.bodyA.toWorldFrame(t,this.localAnchorA)},n.prototype.getWorldAnchorB=function(t){this.bodyB.toWorldFrame(t,this.localAnchorB)};var s=o.create(),r=o.create(),h=o.create(),l=o.create(),p=o.create(),c=o.create(),d=o.create(),u=o.create(),g=o.create();n.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,i=this.restLength,n=this.bodyA,a=this.bodyB,m=s,f=r,y=h,v=l,b=g,w=p,S=c,x=d,P=u;this.getWorldAnchorA(w),this.getWorldAnchorB(S),o.sub(x,w,n.position),o.sub(P,S,a.position),o.sub(m,S,w);var _=o.len(m);o.normalize(f,m),o.sub(y,a.velocity,n.velocity),o.crossZV(b,a.angularVelocity,P),o.add(y,y,b),o.crossZV(b,n.angularVelocity,x),o.sub(y,y,b),o.scale(v,f,-t*(_-i)-e*o.dot(y,f)),o.sub(n.force,n.force,v),o.add(a.force,a.force,v);var k=o.crossLength(x,v),A=o.crossLength(P,v);n.angularForce-=k,a.angularForce+=A}},{"../math/vec2":30,"../utils/Utils":57,"./Spring":34}],33:[function(t,e,i){function n(t,e,i){i=i||{},o.call(this,t,e,i),this.restAngle="number"==typeof i.restAngle?i.restAngle:e.angle-t.angle}t("../math/vec2");var o=t("./Spring");e.exports=n,(n.prototype=new o).constructor=n,n.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,i=this.restAngle,n=this.bodyA,o=this.bodyB,a=-t*(o.angle-n.angle-i)-e*(o.angularVelocity-n.angularVelocity)*0;n.angularForce-=a,o.angularForce+=a}},{"../math/vec2":30,"./Spring":34}],34:[function(t,e,i){function n(t,e,i){i=o.defaults(i,{stiffness:100,damping:1}),this.stiffness=i.stiffness,this.damping=i.damping,this.bodyA=t,this.bodyB=e}t("../math/vec2");var o=t("../utils/Utils");e.exports=n,n.prototype.applyForce=function(){}},{"../math/vec2":30,"../utils/Utils":57}],35:[function(t,e,i){function n(t,e){e=e||{},this.chassisBody=t,this.wheels=[],this.groundBody=new h({mass:0}),this.world=null;var i=this;this.preStepCallback=function(){i.update()}}function o(t,e){e=e||{},this.vehicle=t,this.forwardEquation=new r(t.chassisBody,t.groundBody),this.sideEquation=new r(t.chassisBody,t.groundBody),this.steerValue=0,this.engineForce=0,this.setSideFriction(void 0!==e.sideFriction?e.sideFriction:5),this.localForwardVector=a.fromValues(0,1),e.localForwardVector&&a.copy(this.localForwardVector,e.localForwardVector),this.localPosition=a.fromValues(0,0),e.localPosition&&a.copy(this.localPosition,e.localPosition),s.apply(this,t.chassisBody,t.groundBody),this.equations.push(this.forwardEquation,this.sideEquation),this.setBrakeForce(0)}var a=t("../math/vec2"),s=(t("../utils/Utils"),t("../constraints/Constraint")),r=t("../equations/FrictionEquation"),h=t("../objects/Body");e.exports=n,n.prototype.addToWorld=function(t){this.world=t,t.addBody(this.groundBody),t.on("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var i=this.wheels[e];t.addConstraint(i)}},n.prototype.removeFromWorld=function(){var t=this.world;t.removeBody(this.groundBody),t.off("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var i=this.wheels[e];t.removeConstraint(i)}this.world=null},n.prototype.addWheel=function(t){var e=new o(this,t);return this.wheels.push(e),e},n.prototype.update=function(){for(var t=0;t<this.wheels.length;t++)this.wheels[t].update()},(o.prototype=new s).setBrakeForce=function(t){this.forwardEquation.setSlipForce(t)},o.prototype.setSideFriction=function(t){this.sideEquation.setSlipForce(t)};var l=a.create(),p=a.create();o.prototype.getSpeed=function(){return this.vehicle.chassisBody.vectorToWorldFrame(p,this.localForwardVector),this.vehicle.chassisBody.getVelocityAtPoint(l,p),a.dot(l,p)};var c=a.create();o.prototype.update=function(){this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t,this.localForwardVector),a.rotate(this.sideEquation.t,this.localForwardVector,Math.PI/2),this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t,this.sideEquation.t),a.rotate(this.forwardEquation.t,this.forwardEquation.t,this.steerValue),a.rotate(this.sideEquation.t,this.sideEquation.t,this.steerValue),this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB,this.localPosition),a.copy(this.sideEquation.contactPointB,this.forwardEquation.contactPointB),this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA,this.localPosition),a.copy(this.sideEquation.contactPointA,this.forwardEquation.contactPointA),a.normalize(c,this.forwardEquation.t),a.scale(c,c,this.engineForce),this.vehicle.chassisBody.applyForce(c,this.forwardEquation.contactPointA)}},{"../constraints/Constraint":14,"../equations/FrictionEquation":23,"../math/vec2":30,"../objects/Body":31,"../utils/Utils":57}],36:[function(t,e,i){var n=e.exports={AABB:t("./collision/AABB"),AngleLockEquation:t("./equations/AngleLockEquation"),Body:t("./objects/Body"),Broadphase:t("./collision/Broadphase"),Capsule:t("./shapes/Capsule"),Circle:t("./shapes/Circle"),Constraint:t("./constraints/Constraint"),ContactEquation:t("./equations/ContactEquation"),ContactEquationPool:t("./utils/ContactEquationPool"),ContactMaterial:t("./material/ContactMaterial"),Convex:t("./shapes/Convex"),DistanceConstraint:t("./constraints/DistanceConstraint"),Equation:t("./equations/Equation"),EventEmitter:t("./events/EventEmitter"),FrictionEquation:t("./equations/FrictionEquation"),FrictionEquationPool:t("./utils/FrictionEquationPool"),GearConstraint:t("./constraints/GearConstraint"),GSSolver:t("./solver/GSSolver"),Heightfield:t("./shapes/Heightfield"),Line:t("./shapes/Line"),LockConstraint:t("./constraints/LockConstraint"),Material:t("./material/Material"),Narrowphase:t("./collision/Narrowphase"),NaiveBroadphase:t("./collision/NaiveBroadphase"),Particle:t("./shapes/Particle"),Plane:t("./shapes/Plane"),Pool:t("./utils/Pool"),RevoluteConstraint:t("./constraints/RevoluteConstraint"),PrismaticConstraint:t("./constraints/PrismaticConstraint"),Ray:t("./collision/Ray"),RaycastResult:t("./collision/RaycastResult"),Box:t("./shapes/Box"),RotationalVelocityEquation:t("./equations/RotationalVelocityEquation"),SAPBroadphase:t("./collision/SAPBroadphase"),Shape:t("./shapes/Shape"),Solver:t("./solver/Solver"),Spring:t("./objects/Spring"),TopDownVehicle:t("./objects/TopDownVehicle"),LinearSpring:t("./objects/LinearSpring"),RotationalSpring:t("./objects/RotationalSpring"),Utils:t("./utils/Utils"),World:t("./world/World"),vec2:t("./math/vec2"),version:t("../package.json").version};Object.defineProperty(n,"Rectangle",{get:function(){return console.warn("The Rectangle class has been renamed to Box."),this.Box}})},{"../package.json":6,"./collision/AABB":7,"./collision/Broadphase":8,"./collision/NaiveBroadphase":9,"./collision/Narrowphase":10,"./collision/Ray":11,"./collision/RaycastResult":12,"./collision/SAPBroadphase":13,"./constraints/Constraint":14,"./constraints/DistanceConstraint":15,"./constraints/GearConstraint":16,"./constraints/LockConstraint":17,"./constraints/PrismaticConstraint":18,"./constraints/RevoluteConstraint":19,"./equations/AngleLockEquation":20,"./equations/ContactEquation":21,"./equations/Equation":22,"./equations/FrictionEquation":23,"./equations/RotationalVelocityEquation":25,"./events/EventEmitter":26,"./material/ContactMaterial":27,"./material/Material":28,"./math/vec2":30,"./objects/Body":31,"./objects/LinearSpring":32,"./objects/RotationalSpring":33,"./objects/Spring":34,"./objects/TopDownVehicle":35,"./shapes/Box":37,"./shapes/Capsule":38,"./shapes/Circle":39,"./shapes/Convex":40,"./shapes/Heightfield":41,"./shapes/Line":42,"./shapes/Particle":43,"./shapes/Plane":44,"./shapes/Shape":45,"./solver/GSSolver":46,"./solver/Solver":47,"./utils/ContactEquationPool":48,"./utils/FrictionEquationPool":49,"./utils/Pool":55,"./utils/Utils":57,"./world/World":61}],37:[function(t,e,i){function n(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={width:arguments[0],height:arguments[1]},console.warn("The Rectangle has been renamed to Box and its constructor signature has changed. Please use the following format: new Box({ width: 1, height: 1, ... })")),t=t||{};var e=this.width=t.width||1,i=this.height=t.height||1,n=[o.fromValues(-e/2,-i/2),o.fromValues(e/2,-i/2),o.fromValues(e/2,i/2),o.fromValues(-e/2,i/2)],r=[o.fromValues(1,0),o.fromValues(0,1)];t.vertices=n,t.axes=r,t.type=a.BOX,s.call(this,t)}var o=t("../math/vec2"),a=t("./Shape"),s=t("./Convex");e.exports=n,(n.prototype=new s).constructor=n,n.prototype.computeMomentOfInertia=function(t){var e=this.width,i=this.height;return t*(i*i+e*e)/12},n.prototype.updateBoundingRadius=function(){var t=this.width,e=this.height;this.boundingRadius=Math.sqrt(t*t+e*e)/2};o.create(),o.create(),o.create(),o.create();n.prototype.computeAABB=function(t,e,i){t.setFromPoints(this.vertices,e,i,0)},n.prototype.updateArea=function(){this.area=this.width*this.height}},{"../math/vec2":30,"./Convex":40,"./Shape":45}],38:[function(t,e,i){function n(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={length:arguments[0],radius:arguments[1]},console.warn("The Capsule constructor signature has changed. Please use the following format: new Capsule({ radius: 1, length: 1 })")),t=t||{},this.length=t.length||1,this.radius=t.radius||1,t.type=o.CAPSULE,o.call(this,t)}var o=t("./Shape"),a=t("../math/vec2");e.exports=n,(n.prototype=new o).constructor=n,n.prototype.computeMomentOfInertia=function(t){var e=this.radius,i=this.length+e,n=2*e;return t*(n*n+i*i)/12},n.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},n.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var s=a.create();n.prototype.computeAABB=function(t,e,i){var n=this.radius;a.set(s,this.length/2,0),0!==i&&a.rotate(s,s,i),a.set(t.upperBound,Math.max(s[0]+n,-s[0]+n),Math.max(s[1]+n,-s[1]+n)),a.set(t.lowerBound,Math.min(s[0]-n,-s[0]-n),Math.min(s[1]-n,-s[1]-n)),a.add(t.lowerBound,t.lowerBound,e),a.add(t.upperBound,t.upperBound,e)};var r=a.create(),h=a.create(),l=a.create(),p=a.create(),c=a.fromValues(0,1);n.prototype.raycast=function(t,e,i,n){for(var o=e.from,s=e.to,d=(e.direction,r),u=h,g=l,m=p,f=this.length/2,y=0;y<2;y++){var v=this.radius*(2*y-1);if(a.set(g,-f,v),a.set(m,f,v),a.toGlobalFrame(g,g,i,n),a.toGlobalFrame(m,m,i,n),(P=a.getLineSegmentsIntersectionFraction(o,s,g,m))>=0&&(a.rotate(u,c,n),a.scale(u,u,2*y-1),e.reportIntersection(t,P,u,-1),t.shouldStop(e)))return}for(var b=Math.pow(this.radius,2)+Math.pow(f,2),y=0;y<2;y++){a.set(g,f*(2*y-1),0),a.toGlobalFrame(g,g,i,n);var w=Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2),S=2*((s[0]-o[0])*(o[0]-g[0])+(s[1]-o[1])*(o[1]-g[1])),x=Math.pow(o[0]-g[0],2)+Math.pow(o[1]-g[1],2)-Math.pow(this.radius,2),P=Math.pow(S,2)-4*w*x;if(!(P<0))if(0===P){if(a.lerp(d,o,s,P),a.squaredDistance(d,i)>b&&(a.sub(u,d,g),a.normalize(u,u),e.reportIntersection(t,P,u,-1),t.shouldStop(e)))return}else{var _=Math.sqrt(P),k=1/(2*w),A=(-S-_)*k,T=(-S+_)*k;if(A>=0&&A<=1&&(a.lerp(d,o,s,A),a.squaredDistance(d,i)>b&&(a.sub(u,d,g),a.normalize(u,u),e.reportIntersection(t,A,u,-1),t.shouldStop(e))))return;if(T>=0&&T<=1&&(a.lerp(d,o,s,T),a.squaredDistance(d,i)>b&&(a.sub(u,d,g),a.normalize(u,u),e.reportIntersection(t,T,u,-1),t.shouldStop(e))))return}}}},{"../math/vec2":30,"./Shape":45}],39:[function(t,e,i){function n(t){"number"==typeof arguments[0]&&(t={radius:arguments[0]},console.warn("The Circle constructor signature has changed. Please use the following format: new Circle({ radius: 1 })")),t=t||{},this.radius=t.radius||1,t.type=o.CIRCLE,o.call(this,t)}var o=t("./Shape"),a=t("../math/vec2");e.exports=n,(n.prototype=new o).constructor=n,n.prototype.computeMomentOfInertia=function(t){var e=this.radius;return t*e*e/2},n.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},n.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},n.prototype.computeAABB=function(t,e,i){var n=this.radius;a.set(t.upperBound,n,n),a.set(t.lowerBound,-n,-n),e&&(a.add(t.lowerBound,t.lowerBound,e),a.add(t.upperBound,t.upperBound,e))};var s=a.create(),r=a.create();n.prototype.raycast=function(t,e,i,n){var o=e.from,h=e.to,l=this.radius,p=Math.pow(h[0]-o[0],2)+Math.pow(h[1]-o[1],2),c=2*((h[0]-o[0])*(o[0]-i[0])+(h[1]-o[1])*(o[1]-i[1])),d=Math.pow(o[0]-i[0],2)+Math.pow(o[1]-i[1],2)-Math.pow(l,2),u=Math.pow(c,2)-4*p*d,g=s,m=r;if(!(u<0))if(0===u)a.lerp(g,o,h,u),a.sub(m,g,i),a.normalize(m,m),e.reportIntersection(t,u,m,-1);else{var f=Math.sqrt(u),y=1/(2*p),v=(-c-f)*y,b=(-c+f)*y;if(v>=0&&v<=1&&(a.lerp(g,o,h,v),a.sub(m,g,i),a.normalize(m,m),e.reportIntersection(t,v,m,-1),t.shouldStop(e)))return;b>=0&&b<=1&&(a.lerp(g,o,h,b),a.sub(m,g,i),a.normalize(m,m),e.reportIntersection(t,b,m,-1))}}},{"../math/vec2":30,"./Shape":45}],40:[function(t,e,i){function n(t){Array.isArray(arguments[0])&&(t={vertices:arguments[0],axes:arguments[1]},console.warn("The Convex constructor signature has changed. Please use the following format: new Convex({ vertices: [...], ... })")),t=t||{},this.vertices=[];for(var e=void 0!==t.vertices?t.vertices:[],i=0;i<e.length;i++){var n=a.create();a.copy(n,e[i]),this.vertices.push(n)}if(this.axes=[],t.axes)for(i=0;i<t.axes.length;i++){var s=a.create();a.copy(s,t.axes[i]),this.axes.push(s)}else for(i=0;i<this.vertices.length;i++){var r=this.vertices[i],h=this.vertices[(i+1)%this.vertices.length],l=a.create();a.sub(l,h,r),a.rotate90cw(l,l),a.normalize(l,l),this.axes.push(l)}if(this.centerOfMass=a.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,t.type=o.CONVEX,o.call(this,t),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error("Convex vertices must be given in conter-clockwise winding.")}var o=t("./Shape"),a=t("../math/vec2"),s=t("../math/polyk");t("poly-decomp");e.exports=n,(n.prototype=new o).constructor=n;var r=a.create(),h=a.create();n.prototype.projectOntoLocalAxis=function(t,e){for(var i,n,o=null,s=null,t=r,h=0;h<this.vertices.length;h++)i=this.vertices[h],n=a.dot(i,t),(null===o||n>o)&&(o=n),(null===s||n<s)&&(s=n);if(s>o){var l=s;s=o,o=l}a.set(e,s,o)},n.prototype.projectOntoWorldAxis=function(t,e,i,n){var o=h;this.projectOntoLocalAxis(t,n),0!==i?a.rotate(o,t,i):o=t;var s=a.dot(e,o);a.set(n,n[0]+s,n[1]+s)},n.prototype.updateTriangles=function(){this.triangles.length=0;for(var t=[],e=0;e<this.vertices.length;e++){var i=this.vertices[e];t.push(i[0],i[1])}for(var n=s.Triangulate(t),e=0;e<n.length;e+=3){var o=n[e],a=n[e+1],r=n[e+2];this.triangles.push([o,a,r])}};var l=a.create(),p=a.create(),c=a.create(),d=a.create(),u=a.create();a.create(),a.create(),a.create(),a.create();n.prototype.updateCenterOfMass=function(){var t=this.triangles,e=this.vertices,i=this.centerOfMass,o=l,s=c,r=d,h=u,g=p;a.set(i,0,0);for(var m=0,f=0;f!==t.length;f++){var y=t[f],s=e[y[0]],r=e[y[1]],h=e[y[2]];a.centroid(o,s,r,h);var v=n.triangleArea(s,r,h);m+=v,a.scale(g,o,v),a.add(i,i,g)}a.scale(i,i,1/m)},n.prototype.computeMomentOfInertia=function(t){for(var e=0,i=0,n=this.vertices.length,o=n-1,s=0;s<n;o=s,s++){var r=this.vertices[o],h=this.vertices[s],l=Math.abs(a.crossLength(r,h));e+=l*(a.dot(h,h)+a.dot(h,r)+a.dot(r,r)),i+=l}return t/6*(e/i)},n.prototype.updateBoundingRadius=function(){for(var t=this.vertices,e=0,i=0;i!==t.length;i++){var n=a.squaredLength(t[i]);n>e&&(e=n)}this.boundingRadius=Math.sqrt(e)},n.triangleArea=function(t,e,i){return.5*((e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1]))},n.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var t=this.triangles,e=this.vertices,i=0;i!==t.length;i++){var o=t[i],a=e[o[0]],s=e[o[1]],r=e[o[2]],h=n.triangleArea(a,s,r);this.area+=h}},n.prototype.computeAABB=function(t,e,i){t.setFromPoints(this.vertices,e,i,0)};var g=a.create(),m=a.create(),f=a.create();n.prototype.raycast=function(t,e,i,n){var o=g,s=m,r=f,h=this.vertices;a.toLocalFrame(o,e.from,i,n),a.toLocalFrame(s,e.to,i,n);for(var l=h.length,p=0;p<l&&!t.shouldStop(e);p++){var c=h[p],d=h[(p+1)%l],u=a.getLineSegmentsIntersectionFraction(o,s,c,d);u>=0&&(a.sub(r,d,c),a.rotate(r,r,-Math.PI/2+n),a.normalize(r,r),e.reportIntersection(t,u,r,p))}}},{"../math/polyk":29,"../math/vec2":30,"./Shape":45,"poly-decomp":5}],41:[function(t,e,i){function n(t){if(Array.isArray(arguments[0])){if(t={heights:arguments[0]},"object"==typeof arguments[1])for(var e in arguments[1])t[e]=arguments[1][e];console.warn("The Heightfield constructor signature has changed. Please use the following format: new Heightfield({ heights: [...], ... })")}t=t||{},this.heights=t.heights?t.heights.slice(0):[],this.maxValue=t.maxValue||null,this.minValue=t.minValue||null,this.elementWidth=t.elementWidth||.1,void 0!==t.maxValue&&void 0!==t.minValue||this.updateMaxMinValues(),t.type=o.HEIGHTFIELD,o.call(this,t)}var o=t("./Shape"),a=t("../math/vec2");t("../utils/Utils");e.exports=n,(n.prototype=new o).constructor=n,n.prototype.updateMaxMinValues=function(){for(var t=this.heights,e=t[0],i=t[0],n=0;n!==t.length;n++){var o=t[n];o>e&&(e=o),o<i&&(i=o)}this.maxValue=e,this.minValue=i},n.prototype.computeMomentOfInertia=function(t){return Number.MAX_VALUE},n.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},n.prototype.updateArea=function(){for(var t=this.heights,e=0,i=0;i<t.length-1;i++)e+=(t[i]+t[i+1])/2*this.elementWidth;this.area=e};var s=[a.create(),a.create(),a.create(),a.create()];n.prototype.computeAABB=function(t,e,i){a.set(s[0],0,this.maxValue),a.set(s[1],this.elementWidth*this.heights.length,this.maxValue),a.set(s[2],this.elementWidth*this.heights.length,this.minValue),a.set(s[3],0,this.minValue),t.setFromPoints(s,e,i)},n.prototype.getLineSegment=function(t,e,i){var n=this.heights,o=this.elementWidth;a.set(t,i*o,n[i]),a.set(e,(i+1)*o,n[i+1])},n.prototype.getSegmentIndex=function(t){return Math.floor(t[0]/this.elementWidth)},n.prototype.getClampedSegmentIndex=function(t){var e=this.getSegmentIndex(t);return e=Math.min(this.heights.length,Math.max(e,0))};a.create();var r=a.create(),h=a.create(),l=a.create(),p=a.create(),c=a.create();a.fromValues(0,1);n.prototype.raycast=function(t,e,i,n){var o=e.from,s=e.to,d=(e.direction,r),u=h,g=l,m=p,f=c;a.toLocalFrame(m,o,i,n),a.toLocalFrame(f,s,i,n);var y=this.getClampedSegmentIndex(m),v=this.getClampedSegmentIndex(f);if(y>v){var b=y;y=v,v=b}for(var w=0;w<this.heights.length-1;w++){this.getLineSegment(u,g,w);var S=a.getLineSegmentsIntersectionFraction(m,f,u,g);if(S>=0&&(a.sub(d,g,u),a.rotate(d,d,n+Math.PI/2),a.normalize(d,d),e.reportIntersection(t,S,d,-1),t.shouldStop(e)))return}}},{"../math/vec2":30,"../utils/Utils":57,"./Shape":45}],42:[function(t,e,i){function n(t){"number"==typeof arguments[0]&&(t={length:arguments[0]},console.warn("The Line constructor signature has changed. Please use the following format: new Line({ length: 1, ... })")),t=t||{},this.length=t.length||1,t.type=o.LINE,o.call(this,t)}var o=t("./Shape"),a=t("../math/vec2");e.exports=n,(n.prototype=new o).constructor=n,n.prototype.computeMomentOfInertia=function(t){return t*Math.pow(this.length,2)/12},n.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var s=[a.create(),a.create()];n.prototype.computeAABB=function(t,e,i){var n=this.length/2;a.set(s[0],-n,0),a.set(s[1],n,0),t.setFromPoints(s,e,i,0)};a.create();var r=a.create(),h=a.create(),l=a.create(),p=a.fromValues(0,1);n.prototype.raycast=function(t,e,i,n){var o=e.from,s=e.to,c=h,d=l,u=this.length/2;a.set(c,-u,0),a.set(d,u,0),a.toGlobalFrame(c,c,i,n),a.toGlobalFrame(d,d,i,n);var g=a.getLineSegmentsIntersectionFraction(c,d,o,s);if(g>=0){var m=r;a.rotate(m,p,n),e.reportIntersection(t,g,m,-1)}}},{"../math/vec2":30,"./Shape":45}],43:[function(t,e,i){function n(t){(t=t||{}).type=o.PARTICLE,o.call(this,t)}var o=t("./Shape"),a=t("../math/vec2");e.exports=n,(n.prototype=new o).constructor=n,n.prototype.computeMomentOfInertia=function(t){return 0},n.prototype.updateBoundingRadius=function(){this.boundingRadius=0},n.prototype.computeAABB=function(t,e,i){a.copy(t.lowerBound,e),a.copy(t.upperBound,e)}},{"../math/vec2":30,"./Shape":45}],44:[function(t,e,i){function n(t){(t=t||{}).type=o.PLANE,o.call(this,t)}var o=t("./Shape"),a=t("../math/vec2");t("../utils/Utils");e.exports=n,(n.prototype=new o).constructor=n,n.prototype.computeMomentOfInertia=function(t){return 0},n.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},n.prototype.computeAABB=function(t,e,i){var n=i%(2*Math.PI),o=a.set,s=Number.MAX_VALUE,r=t.lowerBound,h=t.upperBound;0===n?(o(r,-s,-s),o(h,s,0)):n===Math.PI/2?(o(r,0,-s),o(h,s,s)):n===Math.PI?(o(r,-s,0),o(h,s,s)):n===3*Math.PI/2?(o(r,-s,-s),o(h,0,s)):(o(r,-s,-s),o(h,s,s)),a.add(r,r,e),a.add(h,h,e)},n.prototype.updateArea=function(){this.area=Number.MAX_VALUE};var s=a.create(),r=(a.create(),a.create(),a.create()),h=a.create();n.prototype.raycast=function(t,e,i,n){var o=e.from,l=e.to,p=e.direction,c=s,d=r,u=h;a.set(d,0,1),a.rotate(d,d,n),a.sub(u,o,i);var g=a.dot(u,d);if(a.sub(u,l,i),!(g*a.dot(u,d)>0||a.squaredDistance(o,l)<g*g)){var m=a.dot(d,p);a.sub(c,o,i);var f=-a.dot(d,c)/m/e.length;e.reportIntersection(t,f,d,-1)}}},{"../math/vec2":30,"../utils/Utils":57,"./Shape":45}],45:[function(t,e,i){function n(t){t=t||{},this.body=null,this.position=o.fromValues(0,0),t.position&&o.copy(this.position,t.position),this.angle=t.angle||0,this.type=t.type||0,this.id=n.idCounter++,this.boundingRadius=0,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:1,this.material=t.material||null,this.area=0,this.sensor=void 0!==t.sensor&&t.sensor,this.type&&this.updateBoundingRadius(),this.updateArea()}e.exports=n;var o=t("../math/vec2");n.idCounter=0,n.CIRCLE=1,n.PARTICLE=2,n.PLANE=4,n.CONVEX=8,n.LINE=16,n.BOX=32,Object.defineProperty(n,"RECTANGLE",{get:function(){return console.warn("Shape.RECTANGLE is deprecated, use Shape.BOX instead."),n.BOX}}),n.CAPSULE=64,n.HEIGHTFIELD=128,n.prototype.computeMomentOfInertia=function(t){},n.prototype.updateBoundingRadius=function(){},n.prototype.updateArea=function(){},n.prototype.computeAABB=function(t,e,i){},n.prototype.raycast=function(t,e,i,n){}},{"../math/vec2":30}],46:[function(t,e,i){function n(t){s.call(this,t,s.GS),t=t||{},this.iterations=t.iterations||10,this.tolerance=t.tolerance||1e-7,this.arrayStep=30,this.lambda=new r.ARRAY_TYPE(this.arrayStep),this.Bs=new r.ARRAY_TYPE(this.arrayStep),this.invCs=new r.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=0,this.usedIterations=0}function o(t){for(var e=t.length;e--;)t[e]=0}var a=t("../math/vec2"),s=t("./Solver"),r=t("../utils/Utils"),h=t("../equations/FrictionEquation");e.exports=n,(n.prototype=new s).constructor=n,n.prototype.solve=function(t,e){this.sortEquations();var i=0,s=this.iterations,l=this.frictionIterations,p=this.equations,c=p.length,d=Math.pow(this.tolerance*c,2),u=e.bodies,g=e.bodies.length,m=(a.add,a.set,this.useZeroRHS),f=this.lambda;if(this.usedIterations=0,c)for(b=0;b!==g;b++)(P=u[b]).updateSolveMassProperties();f.length<c&&(f=this.lambda=new r.ARRAY_TYPE(c+this.arrayStep),this.Bs=new r.ARRAY_TYPE(c+this.arrayStep),this.invCs=new r.ARRAY_TYPE(c+this.arrayStep)),o(f);for(var y=this.invCs,v=this.Bs,f=this.lambda,b=0;b!==p.length;b++)((w=p[b]).timeStep!==t||w.needsUpdate)&&(w.timeStep=t,w.update()),v[b]=w.computeB(w.a,w.b,t),y[b]=w.computeInvC(w.epsilon);var w,S,x;if(0!==c){for(b=0;b!==g;b++){var P=u[b];P.resetConstraintVelocity()}if(l){for(i=0;i!==l;i++){for(S=0,x=0;x!==c;x++){w=p[x];T=n.iterateEquation(x,w,w.epsilon,v,y,f,m,t,i);S+=Math.abs(T)}if(this.usedIterations++,S*S<=d)break}for(n.updateMultipliers(p,f,1/t),x=0;x!==c;x++){var _=p[x];if(_ instanceof h){for(var k=0,A=0;A!==_.contactEquations.length;A++)k+=_.contactEquations[A].multiplier;k*=_.frictionCoefficient/_.contactEquations.length,_.maxForce=k,_.minForce=-k}}}for(i=0;i!==s;i++){for(S=0,x=0;x!==c;x++){w=p[x];var T=n.iterateEquation(x,w,w.epsilon,v,y,f,m,t,i);S+=Math.abs(T)}if(this.usedIterations++,S*S<=d)break}for(b=0;b!==g;b++)u[b].addConstraintVelocity();n.updateMultipliers(p,f,1/t)}},n.updateMultipliers=function(t,e,i){for(var n=t.length;n--;)t[n].multiplier=e[n]*i},n.iterateEquation=function(t,e,i,n,o,a,s,r,h){var l=n[t],p=o[t],c=a[t],d=e.computeGWlambda(),u=e.maxForce,g=e.minForce;s&&(l=0);var m=p*(l-d-i*c),f=c+m;return f<g*r?m=g*r-c:f>u*r&&(m=u*r-c),a[t]+=m,e.addToWlambda(m),m}},{"../equations/FrictionEquation":23,"../math/vec2":30,"../utils/Utils":57,"./Solver":47}],47:[function(t,e,i){function n(t,e){t=t||{},o.call(this),this.type=e,this.equations=[],this.equationSortFunction=t.equationSortFunction||!1}t("../utils/Utils");var o=t("../events/EventEmitter");e.exports=n,(n.prototype=new o).constructor=n,n.prototype.solve=function(t,e){throw new Error("Solver.solve should be implemented by subclasses!")};var a={bodies:[]};n.prototype.solveIsland=function(t,e){this.removeAllEquations(),e.equations.length&&(this.addEquations(e.equations),a.bodies.length=0,e.getBodies(a.bodies),a.bodies.length&&this.solve(t,a))},n.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},n.prototype.addEquation=function(t){t.enabled&&this.equations.push(t)},n.prototype.addEquations=function(t){for(var e=0,i=t.length;e!==i;e++){var n=t[e];n.enabled&&this.equations.push(n)}},n.prototype.removeEquation=function(t){var e=this.equations.indexOf(t);-1!==e&&this.equations.splice(e,1)},n.prototype.removeAllEquations=function(){this.equations.length=0},n.GS=1,n.ISLAND=2},{"../events/EventEmitter":26,"../utils/Utils":57}],48:[function(t,e,i){function n(){a.apply(this,arguments)}var o=t("../equations/ContactEquation"),a=t("./Pool");e.exports=n,(n.prototype=new a).constructor=n,n.prototype.create=function(){return new o},n.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this}},{"../equations/ContactEquation":21,"./Pool":55}],49:[function(t,e,i){function n(){a.apply(this,arguments)}var o=t("../equations/FrictionEquation"),a=t("./Pool");e.exports=n,(n.prototype=new a).constructor=n,n.prototype.create=function(){return new o},n.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this}},{"../equations/FrictionEquation":23,"./Pool":55}],50:[function(t,e,i){function n(){a.apply(this,arguments)}var o=t("../world/IslandNode"),a=t("./Pool");e.exports=n,(n.prototype=new a).constructor=n,n.prototype.create=function(){return new o},n.prototype.destroy=function(t){return t.reset(),this}},{"../world/IslandNode":60,"./Pool":55}],51:[function(t,e,i){function n(){a.apply(this,arguments)}var o=t("../world/Island"),a=t("./Pool");e.exports=n,(n.prototype=new a).constructor=n,n.prototype.create=function(){return new o},n.prototype.destroy=function(t){return t.reset(),this}},{"../world/Island":58,"./Pool":55}],52:[function(t,e,i){function n(){this.overlappingShapesLastState=new o,this.overlappingShapesCurrentState=new o,this.recordPool=new a({size:16}),this.tmpDict=new o,this.tmpArray1=[]}var o=t("./TupleDictionary"),a=(t("./OverlapKeeperRecord"),t("./OverlapKeeperRecordPool"));t("./Utils");e.exports=n,n.prototype.tick=function(){for(var t=this.overlappingShapesLastState,e=this.overlappingShapesCurrentState,i=t.keys.length;i--;){var n=t.keys[i],o=t.getByKey(n);e.getByKey(n);o&&this.recordPool.release(o)}t.reset(),t.copy(e),e.reset()},n.prototype.setOverlapping=function(t,e,i,n){this.overlappingShapesLastState;var o=this.overlappingShapesCurrentState;if(!o.get(e.id,n.id)){var a=this.recordPool.get();a.set(t,e,i,n),o.set(e.id,n.id,a)}},n.prototype.getNewOverlaps=function(t){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,t)},n.prototype.getEndOverlaps=function(t){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,t)},n.prototype.bodiesAreOverlapping=function(t,e){for(var i=this.overlappingShapesCurrentState,n=i.keys.length;n--;){var o=i.keys[n],a=i.data[o];if(a.bodyA===t&&a.bodyB===e||a.bodyA===e&&a.bodyB===t)return!0}return!1},n.prototype.getDiff=function(t,e,i){var n=t,o=e;(i=i||[]).length=0;for(var a=o.keys.length;a--;){var s=o.keys[a],r=o.data[s];if(!r)throw new Error("Key "+s+" had no data!");n.data[s]||i.push(r)}return i},n.prototype.isNewOverlap=function(t,e){var i=0|t.id,n=0|e.id,o=this.overlappingShapesLastState,a=this.overlappingShapesCurrentState;return!o.get(i,n)&&!!a.get(i,n)},n.prototype.getNewBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},n.prototype.getEndBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},n.prototype.getBodyDiff=function(t,e){e=e||[];for(var i=this.tmpDict,n=t.length;n--;){var o=t[n];i.set(0|o.bodyA.id,0|o.bodyB.id,o)}for(n=i.keys.length;n--;)(o=i.getByKey(i.keys[n]))&&e.push(o.bodyA,o.bodyB);return i.reset(),e}},{"./OverlapKeeperRecord":53,"./OverlapKeeperRecordPool":54,"./TupleDictionary":56,"./Utils":57}],53:[function(t,e,i){function n(t,e,i,n){this.shapeA=e,this.shapeB=n,this.bodyA=t,this.bodyB=i}e.exports=n,n.prototype.set=function(t,e,i,o){n.call(this,t,e,i,o)}},{}],54:[function(t,e,i){function n(){a.apply(this,arguments)}var o=t("./OverlapKeeperRecord"),a=t("./Pool");e.exports=n,(n.prototype=new a).constructor=n,n.prototype.create=function(){return new o},n.prototype.destroy=function(t){return t.bodyA=t.bodyB=t.shapeA=t.shapeB=null,this}},{"./OverlapKeeperRecord":53,"./Pool":55}],55:[function(t,e,i){function n(t){t=t||{},this.objects=[],void 0!==t.size&&this.resize(t.size)}e.exports=n,n.prototype.resize=function(t){for(var e=this.objects;e.length>t;)e.pop();for(;e.length<t;)e.push(this.create());return this},n.prototype.get=function(){var t=this.objects;return t.length?t.pop():this.create()},n.prototype.release=function(t){return this.destroy(t),this.objects.push(t),this}},{}],56:[function(t,e,i){function n(){this.data={},this.keys=[]}var o=t("./Utils");e.exports=n,n.prototype.getKey=function(t,e){return t|=0,e|=0,(0|t)==(0|e)?-1:0|((0|t)>(0|e)?t<<16|65535&e:e<<16|65535&t)},n.prototype.getByKey=function(t){return t|=0,this.data[t]},n.prototype.get=function(t,e){return this.data[this.getKey(t,e)]},n.prototype.set=function(t,e,i){if(!i)throw new Error("No data!");var n=this.getKey(t,e);return this.data[n]||this.keys.push(n),this.data[n]=i,n},n.prototype.reset=function(){for(var t=this.data,e=this.keys,i=e.length;i--;)delete t[e[i]];e.length=0},n.prototype.copy=function(t){this.reset(),o.appendArray(this.keys,t.keys);for(var e=t.keys.length;e--;){var i=t.keys[e];this.data[i]=t.data[i]}}},{"./Utils":57}],57:[function(t,e,i){function n(){}e.exports=n,n.appendArray=function(t,e){if(e.length<15e4)t.push.apply(t,e);else for(var i=0,n=e.length;i!==n;++i)t.push(e[i])},n.splice=function(t,e,i){i=i||1;for(var n=e,o=t.length-i;n<o;n++)t[n]=t[n+i];t.length=o},n.ARRAY_TYPE="undefined"!=typeof P2_ARRAY_TYPE?P2_ARRAY_TYPE:"undefined"!=typeof Float32Array?Float32Array:Array,n.extend=function(t,e){for(var i in e)t[i]=e[i]},n.defaults=function(t,e){t=t||{};for(var i in e)i in t||(t[i]=e[i]);return t}},{}],58:[function(t,e,i){function n(){this.equations=[],this.bodies=[]}var o=t("../objects/Body");e.exports=n,n.prototype.reset=function(){this.equations.length=this.bodies.length=0};var a=[];n.prototype.getBodies=function(t){var e=t||[],i=this.equations;a.length=0;for(var n=0;n!==i.length;n++){var o=i[n];-1===a.indexOf(o.bodyA.id)&&(e.push(o.bodyA),a.push(o.bodyA.id)),-1===a.indexOf(o.bodyB.id)&&(e.push(o.bodyB),a.push(o.bodyB.id))}return e},n.prototype.wantsToSleep=function(){for(var t=0;t<this.bodies.length;t++){var e=this.bodies[t];if(e.type===o.DYNAMIC&&!e.wantsToSleep)return!1}return!0},n.prototype.sleep=function(){for(var t=0;t<this.bodies.length;t++)this.bodies[t].sleep();return!0}},{"../objects/Body":31}],59:[function(t,e,i){function n(t){this.nodePool=new o({size:16}),this.islandPool=new a({size:8}),this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}t("../math/vec2"),t("./Island"),t("./IslandNode");var o=t("./../utils/IslandNodePool"),a=t("./../utils/IslandPool"),s=t("../objects/Body");e.exports=n,n.getUnvisitedNode=function(t){for(var e=t.length,i=0;i!==e;i++){var n=t[i];if(!n.visited&&n.body.type===s.DYNAMIC)return n}return!1},n.prototype.visit=function(t,e,i){e.push(t.body);for(var n=t.equations.length,o=0;o!==n;o++){var a=t.equations[o];-1===i.indexOf(a)&&i.push(a)}},n.prototype.bfs=function(t,e,i){var o=this.queue;for(o.length=0,o.push(t),t.visited=!0,this.visit(t,e,i);o.length;)for(var a,r=o.pop();a=n.getUnvisitedNode(r.neighbors);)a.visited=!0,this.visit(a,e,i),a.body.type===s.DYNAMIC&&o.push(a)},n.prototype.split=function(t){for(var e=t.bodies,i=this.nodes,o=this.equations;i.length;)this.nodePool.release(i.pop());for(h=0;h!==e.length;h++){var a=this.nodePool.get();a.body=e[h],i.push(a)}for(var s=0;s!==o.length;s++){var r=o[s],h=e.indexOf(r.bodyA),l=e.indexOf(r.bodyB),p=i[h],c=i[l];p.neighbors.push(c),c.neighbors.push(p),p.equations.push(r),c.equations.push(r)}for(var d=this.islands,h=0;h<d.length;h++)this.islandPool.release(d[h]);d.length=0;for(var u;u=n.getUnvisitedNode(i);){var g=this.islandPool.get();this.bfs(u,g.bodies,g.equations),d.push(g)}return d}},{"../math/vec2":30,"../objects/Body":31,"./../utils/IslandNodePool":50,"./../utils/IslandPool":51,"./Island":58,"./IslandNode":60}],60:[function(t,e,i){function n(t){this.body=t,this.neighbors=[],this.equations=[],this.visited=!1}e.exports=n,n.prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}},{}],61:[function(t,e,i){function n(t){c.apply(this),t=t||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=t.solver||new o,this.narrowphase=new y(this),this.islandManager=new w,this.gravity=a.fromValues(0,-9.78),t.gravity&&a.copy(this.gravity,t.gravity),this.frictionGravity=a.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.broadphase=t.broadphase||new f,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new u,this.defaultContactMaterial=new g(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.accumulator=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.islandSplit=void 0===t.islandSplit||!!t.islandSplit,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=n.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new b}var o=t("../solver/GSSolver"),a=(t("../solver/Solver"),t("../collision/Ray"),t("../math/vec2")),s=t("../shapes/Circle"),r=t("../shapes/Convex"),h=(t("../shapes/Line"),t("../shapes/Plane")),l=t("../shapes/Capsule"),p=t("../shapes/Particle"),c=t("../events/EventEmitter"),d=t("../objects/Body"),u=(t("../shapes/Shape"),t("../objects/LinearSpring"),t("../material/Material")),g=t("../material/ContactMaterial"),m=(t("../constraints/DistanceConstraint"),t("../constraints/Constraint"),t("../constraints/LockConstraint"),t("../constraints/RevoluteConstraint"),t("../constraints/PrismaticConstraint"),t("../constraints/GearConstraint"),t("../../package.json"),t("../collision/Broadphase"),t("../collision/AABB")),f=t("../collision/SAPBroadphase"),y=t("../collision/Narrowphase"),v=t("../utils/Utils"),b=t("../utils/OverlapKeeper"),w=t("./IslandManager");t("../objects/RotationalSpring");e.exports=n,n.prototype=new Object(c.prototype),n.prototype.constructor=n,n.NO_SLEEPING=1,n.BODY_SLEEPING=2,n.ISLAND_SLEEPING=4,n.prototype.addConstraint=function(t){this.constraints.push(t)},n.prototype.addContactMaterial=function(t){this.contactMaterials.push(t)},n.prototype.removeContactMaterial=function(t){var e=this.contactMaterials.indexOf(t);-1!==e&&v.splice(this.contactMaterials,e,1)},n.prototype.getContactMaterial=function(t,e){for(var i=this.contactMaterials,n=0,o=i.length;n!==o;n++){var a=i[n];if(a.materialA.id===t.id&&a.materialB.id===e.id||a.materialA.id===e.id&&a.materialB.id===t.id)return a}return!1},n.prototype.removeConstraint=function(t){var e=this.constraints.indexOf(t);-1!==e&&v.splice(this.constraints,e,1)};a.create(),a.create(),a.create(),a.create(),a.create(),a.create();var S=a.create(),x=a.fromValues(0,0),P=a.fromValues(0,0);a.fromValues(0,0),a.fromValues(0,0);n.prototype.step=function(t,e,i){if(i=i||10,0===(e=e||0))this.internalStep(t),this.time+=t;else{this.accumulator+=e;for(var n=0;this.accumulator>=t&&n<i;)this.internalStep(t),this.time+=t,this.accumulator-=t,n++;for(var o=this.accumulator%t/t,s=0;s!==this.bodies.length;s++){var r=this.bodies[s];a.lerp(r.interpolatedPosition,r.previousPosition,r.position,o),r.interpolatedAngle=r.previousAngle+o*(r.angle-r.previousAngle)}}};var _=[];n.prototype.internalStep=function(t){this.stepping=!0;var e=this.springs.length,i=this.springs,o=this.bodies,s=this.gravity,r=this.solver,h=this.bodies.length,l=this.broadphase,p=this.narrowphase,c=this.constraints,u=S,g=(a.scale,a.add),m=(a.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=t,this.useWorldGravityAsFrictionGravity){var f=a.length(this.gravity);0===f&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=f)}if(this.applyGravity)for(P=0;P!==h;P++){var y=(b=o[P]).force;b.type===d.DYNAMIC&&b.sleepState!==d.SLEEPING&&(a.scale(u,s,b.mass*b.gravityScale),g(y,y,u))}if(this.applySpringForces)for(P=0;P!==e;P++)i[P].applyForce();if(this.applyDamping)for(P=0;P!==h;P++){var b=o[P];b.type===d.DYNAMIC&&b.applyDamping(t)}for(var w=l.getCollisionPairs(this),x=this.disabledBodyCollisionPairs,P=x.length-2;P>=0;P-=2)for(A=w.length-2;A>=0;A-=2)(x[P]===w[A]&&x[P+1]===w[A+1]||x[P+1]===w[A]&&x[P]===w[A+1])&&w.splice(A,2);q=c.length;for(P=0;P!==q;P++){var k=c[P];if(!k.collideConnected)for(var A=w.length-2;A>=0;A-=2)(k.bodyA===w[A]&&k.bodyB===w[A+1]||k.bodyB===w[A]&&k.bodyA===w[A+1])&&w.splice(A,2)}this.postBroadphaseEvent.pairs=w,this.emit(this.postBroadphaseEvent),this.postBroadphaseEvent.pairs=null,p.reset(this);for(var P=0,T=w.length;P!==T;P+=2)for(var M=w[P],C=w[P+1],I=0,B=M.shapes.length;I!==B;I++)for(var G=M.shapes[I],L=G.position,E=G.angle,O=0,D=C.shapes.length;O!==D;O++){var R=C.shapes[O],H=R.position,F=R.angle,N=this.defaultContactMaterial;if(G.material&&R.material){var U=this.getContactMaterial(G.material,R.material);U&&(N=U)}this.runNarrowphase(p,M,G,L,E,C,R,H,F,N,this.frictionGravity)}for(P=0;P!==h;P++)(j=o[P])._wakeUpAfterNarrowphase&&(j.wakeUp(),j._wakeUpAfterNarrowphase=!1);if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(_);for(var X=this.endContactEvent,O=_.length;O--;){var V=_[O];X.shapeA=V.shapeA,X.shapeB=V.shapeB,X.bodyA=V.bodyA,X.bodyB=V.bodyB,this.emit(X)}_.length=0}var W=this.preSolveEvent;W.contactEquations=p.contactEquations,W.frictionEquations=p.frictionEquations,this.emit(W),W.contactEquations=W.frictionEquations=null;var q=c.length;for(P=0;P!==q;P++)c[P].update();if(p.contactEquations.length||p.frictionEquations.length||q)if(this.islandSplit){for(m.equations.length=0,v.appendArray(m.equations,p.contactEquations),v.appendArray(m.equations,p.frictionEquations),P=0;P!==q;P++)v.appendArray(m.equations,c[P].equations);m.split(this);for(P=0;P!==m.islands.length;P++)(K=m.islands[P]).equations.length&&r.solveIsland(t,K)}else{for(r.addEquations(p.contactEquations),r.addEquations(p.frictionEquations),P=0;P!==q;P++)r.addEquations(c[P].equations);this.solveConstraints&&r.solve(t,this),r.removeAllEquations()}for(P=0;P!==h;P++){var j=o[P];j.integrate(t)}for(P=0;P!==h;P++)o[P].setZeroForce();if(this.emitImpactEvent&&this.has("impact"))for(var Y=this.impactEvent,P=0;P!==p.contactEquations.length;P++){var z=p.contactEquations[P];z.firstImpact&&(Y.bodyA=z.bodyA,Y.bodyB=z.bodyB,Y.shapeA=z.shapeA,Y.shapeB=z.shapeB,Y.contactEquation=z,this.emit(Y))}if(this.sleepMode===n.BODY_SLEEPING)for(P=0;P!==h;P++)o[P].sleepTick(this.time,!1,t);else if(this.sleepMode===n.ISLAND_SLEEPING&&this.islandSplit){for(P=0;P!==h;P++)o[P].sleepTick(this.time,!0,t);for(P=0;P<this.islandManager.islands.length;P++){var K=this.islandManager.islands[P];K.wantsToSleep()&&K.sleep()}}this.stepping=!1;for(var Q=this.bodiesToBeRemoved,P=0;P!==Q.length;P++)this.removeBody(Q[P]);Q.length=0,this.emit(this.postStepEvent)},n.prototype.runNarrowphase=function(t,e,i,n,o,s,r,h,l,p,c){if(0!=(i.collisionGroup&r.collisionMask)&&0!=(r.collisionGroup&i.collisionMask)){a.rotate(x,n,e.angle),a.rotate(P,h,s.angle),a.add(x,x,e.position),a.add(P,P,s.position);var u=o+e.angle,g=l+s.angle;t.enableFriction=p.friction>0,t.frictionCoefficient=p.friction;var m;m=e.type===d.STATIC||e.type===d.KINEMATIC?s.mass:s.type===d.STATIC||s.type===d.KINEMATIC?e.mass:e.mass*s.mass/(e.mass+s.mass),t.slipForce=p.friction*c*m,t.restitution=p.restitution,t.surfaceVelocity=p.surfaceVelocity,t.frictionStiffness=p.frictionStiffness,t.frictionRelaxation=p.frictionRelaxation,t.stiffness=p.stiffness,t.relaxation=p.relaxation,t.contactSkinSize=p.contactSkinSize,t.enabledEquations=e.collisionResponse&&s.collisionResponse&&i.collisionResponse&&r.collisionResponse;var f=t[i.type|r.type],y=0;if(f){var v=i.sensor||r.sensor,b=t.frictionEquations.length;y=i.type<r.type?f.call(t,e,i,x,u,s,r,P,g,v):f.call(t,s,r,P,g,e,i,x,u,v);var w=t.frictionEquations.length-b;if(y){if(e.allowSleep&&e.type===d.DYNAMIC&&e.sleepState===d.SLEEPING&&s.sleepState===d.AWAKE&&s.type!==d.STATIC&&a.squaredLength(s.velocity)+Math.pow(s.angularVelocity,2)>=2*Math.pow(s.sleepSpeedLimit,2)&&(e._wakeUpAfterNarrowphase=!0),s.allowSleep&&s.type===d.DYNAMIC&&s.sleepState===d.SLEEPING&&e.sleepState===d.AWAKE&&e.type!==d.STATIC&&a.squaredLength(e.velocity)+Math.pow(e.angularVelocity,2)>=2*Math.pow(e.sleepSpeedLimit,2)&&(s._wakeUpAfterNarrowphase=!0),this.overlapKeeper.setOverlapping(e,i,s,r),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(i,r)){var S=this.beginContactEvent;if(S.shapeA=i,S.shapeB=r,S.bodyA=e,S.bodyB=s,S.contactEquations.length=0,"number"==typeof y)for(_=t.contactEquations.length-y;_<t.contactEquations.length;_++)S.contactEquations.push(t.contactEquations[_]);this.emit(S)}if("number"==typeof y&&w>1)for(var _=t.frictionEquations.length-w;_<t.frictionEquations.length;_++){var k=t.frictionEquations[_];k.setSlipForce(k.getSlipForce()/w)}}}}},n.prototype.addSpring=function(t){this.springs.push(t);var e=this.addSpringEvent;e.spring=t,this.emit(e),e.spring=null},n.prototype.removeSpring=function(t){var e=this.springs.indexOf(t);-1!==e&&v.splice(this.springs,e,1)},n.prototype.addBody=function(t){if(-1===this.bodies.indexOf(t)){this.bodies.push(t),t.world=this;var e=this.addBodyEvent;e.body=t,this.emit(e),e.body=null}},n.prototype.removeBody=function(t){if(this.stepping)this.bodiesToBeRemoved.push(t);else{t.world=null;var e=this.bodies.indexOf(t);-1!==e&&(v.splice(this.bodies,e,1),this.removeBodyEvent.body=t,t.resetConstraintVelocity(),this.emit(this.removeBodyEvent),this.removeBodyEvent.body=null)}},n.prototype.getBodyById=function(t){for(var e=this.bodies,i=0;i<e.length;i++){var n=e[i];if(n.id===t)return n}return!1},n.prototype.disableBodyCollision=function(t,e){this.disabledBodyCollisionPairs.push(t,e)},n.prototype.enableBodyCollision=function(t,e){for(var i=this.disabledBodyCollisionPairs,n=0;n<i.length;n+=2)if(i[n]===t&&i[n+1]===e||i[n+1]===t&&i[n]===e)return void i.splice(n,2)},n.prototype.clear=function(){this.time=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var t=this.constraints,e=t.length-1;e>=0;e--)this.removeConstraint(t[e]);for(var i=this.bodies,e=i.length-1;e>=0;e--)this.removeBody(i[e]);for(var o=this.springs,e=o.length-1;e>=0;e--)this.removeSpring(o[e]);for(var a=this.contactMaterials,e=a.length-1;e>=0;e--)this.removeContactMaterial(a[e]);n.apply(this)};var k=a.create(),A=(a.fromValues(0,0),a.fromValues(0,0));n.prototype.hitTest=function(t,e,i){i=i||0;var n=new d({position:t}),o=new p,c=t,u=k,g=A;n.addShape(o);for(var m=this.narrowphase,f=[],y=0,v=e.length;y!==v;y++)for(var b=e[y],w=0,S=b.shapes.length;w!==S;w++){var x=b.shapes[w];a.rotate(u,x.position,b.angle),a.add(u,u,b.position);var P=x.angle+b.angle;(x instanceof s&&m.circleParticle(b,x,u,P,n,o,c,0,!0)||x instanceof r&&m.particleConvex(n,o,c,0,b,x,u,P,!0)||x instanceof h&&m.particlePlane(n,o,c,0,b,x,u,P,!0)||x instanceof l&&m.particleCapsule(n,o,c,0,b,x,u,P,!0)||x instanceof p&&a.squaredLength(a.sub(g,u,t))<i*i)&&f.push(b)}return f},n.prototype.setGlobalStiffness=function(t){for(var e=this.constraints,i=0;i!==e.length;i++)for(var n=e[i],o=0;o!==n.equations.length;o++){var a=n.equations[o];a.stiffness=t,a.needsUpdate=!0}for(var s=this.contactMaterials,i=0;i!==s.length;i++)(n=s[i]).stiffness=n.frictionStiffness=t;(n=this.defaultContactMaterial).stiffness=n.frictionStiffness=t},n.prototype.setGlobalRelaxation=function(t){for(o=0;o!==this.constraints.length;o++)for(var e=this.constraints[o],i=0;i!==e.equations.length;i++){var n=e.equations[i];n.relaxation=t,n.needsUpdate=!0}for(var o=0;o!==this.contactMaterials.length;o++)(e=this.contactMaterials[o]).relaxation=e.frictionRelaxation=t;(e=this.defaultContactMaterial).relaxation=e.frictionRelaxation=t};var T=new m,M=[];n.prototype.raycast=function(t,e){return e.getAABB(T),this.broadphase.aabbQuery(this,T,M),e.intersectBodies(t,M),M.length=0,t.hasHit()}},{"../../package.json":6,"../collision/AABB":7,"../collision/Broadphase":8,"../collision/Narrowphase":10,"../collision/Ray":11,"../collision/SAPBroadphase":13,"../constraints/Constraint":14,"../constraints/DistanceConstraint":15,"../constraints/GearConstraint":16,"../constraints/LockConstraint":17,"../constraints/PrismaticConstraint":18,"../constraints/RevoluteConstraint":19,"../events/EventEmitter":26,"../material/ContactMaterial":27,"../material/Material":28,"../math/vec2":30,"../objects/Body":31,"../objects/LinearSpring":32,"../objects/RotationalSpring":33,"../shapes/Capsule":38,"../shapes/Circle":39,"../shapes/Convex":40,"../shapes/Line":42,"../shapes/Particle":43,"../shapes/Plane":44,"../shapes/Shape":45,"../solver/GSSolver":46,"../solver/Solver":47,"../utils/OverlapKeeper":52,"../utils/Utils":57,"./IslandManager":59}]},{},[36])(36)});var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},DisplayObjectContainer=function(t){function e(){t.call(this),this.items={},this.neverFlush=!1,this.origX=0,this.origY=0,this.origPivot={x:0,y:0,compensate:!1},this.defaultPivot=!0,this.pooled=!1,this.pooledActive=!1}return __extends(e,t),e.prototype.addChild=function(e){t.prototype.addChild.call(this,e),this.addItem(e),1==this.pooled&&(this.pooledActive=!0)},e.prototype.addChildAt=function(e,i){t.prototype.addChildAt.call(this,e,i),this.addItem(e)},e.prototype.addItem=function(t){this.items[t.id]=t},e.prototype.removeFromItems=function(t){delete this.items[t.id]},e.prototype.getSpriteAt=function(t){var e=this.getChildAt(t);return this.resetItem(e)},e.prototype.showOnlyChild=function(t){if(this.children&&this.children.length>1)for(var e=this.children.length-1;e>=0;e--)this.getChildAt(e).visible=e==t},e.prototype.getSprite=function(t,e){var i=this.items[t];return i=this.resetItem(i),e&&1==e&&i.setRegPoint(.5,.5),i},e.prototype.getContainer=function(t){var e=this.items[t];return this.resetItem(e)},e.prototype.getSpine=function(t){var e=this.items[t];return this.resetItem(e)},e.prototype.getAnimatedSprite=function(t){var e=this.items[t];return this.resetItem(e)},e.prototype.resetItem=function(t){return null==t?null:(t.scale.x=1,t.scale.y=1,t.rotation=0,"number"==typeof t.origX&&(t.position.x=t.origX),"number"==typeof t.origY&&(t.position.y=t.origY),t.origAnchor&&("number"==typeof t.origAnchor.x&&(t.anchor.x=t.origAnchor.x),"number"==typeof t.origAnchor.y&&(t.anchor.y=t.origAnchor.y)),t.origPivot&&("number"==typeof t.origPivot.x&&(t.pivot.x=t.origPivot.x),"number"==typeof t.origPivot.y&&(t.pivot.y=t.origPivot.y)),"boolean"==typeof t.defaultAnchor&&0==t.defaultAnchor&&t.setRegPoint(t.origAnchor.x,t.origAnchor.y,t.origAnchor.compensate),"boolean"==typeof t.defaultPivot&&0==t.defaultPivot&&t.setRegPoint(t.origPivot.x,t.origPivot.y,t.origPivot.compensate),t)},e.prototype.getItemAt=function(t){return this.getChildAt(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0)},e.prototype.disposeAssets=function(){if(this.children&&this.children.length>0)for(var t=this.children.length-1;t>=0;t--)this.removeChild(this.getChildAt(t));for(var e in this.items)this.items[e]=null,delete this.items[e]},e.prototype.removeAllChildren=function(){for(var t=this.children.length-1;t>=0;t--)this.removeChild(this.getChildAt(t))},e.prototype.setRegPoint=function(t,e,i){var n=this.width*t,o=this.height*e;this.pivot.x=n,this.pivot.y=o,1==i&&(this.position.x+=n,this.position.y+=o,this.origPivot.compensate=!0)},e.prototype.setRegPointPixels=function(t,e,i){var n=this.pivot.x,o=this.pivot.y;if(this.pivot.x=t,this.pivot.y=e,1==i){var a=this.pivot.x-n,s=this.pivot.y-o,r=a*Math.cos(this.rotation)-s*Math.sin(this.rotation),h=s*Math.cos(this.rotation)+a*Math.sin(this.rotation);this.position.x+=r*this.scale.x,this.position.y+=h*this.scale.y}},e}(PIXI.Container);((_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window)._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var t=Math.PI/180,e=function(t,e,i,n,o){this.p=e,this.f="function"==typeof t[e],this.start=this.value=this.f?t[e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3)]():parseFloat(t[e]),this.velocity=i||0,this.v=this.velocity/o,n||0===n?(this.acceleration=n,this.a=this.acceleration/(o*o)):this.acceleration=this.a=0},i=Math.random(),n=_gsScope._gsDefine.globals,o=n.com.greensock.core.Animation._rootFramesTimeline,a=_gsScope._gsDefine.plugin({propName:"physics2D",version:"0.2.0",API:2,init:function(i,n,a,s){"function"==typeof n&&(n=n(s,i)),this._target=i,this._tween=a,this._runBackwards=!0===a.vars.runBackwards,this._step=0;for(var r,h=a._timeline,l=Number(n.angle)||0,p=Number(n.velocity)||0,c=Number(n.acceleration)||0,d=n.xProp||"x",u=n.yProp||"y",g=n.accelerationAngle||0===n.accelerationAngle?Number(n.accelerationAngle):l;h._timeline;)h=h._timeline;return this._stepsPerTimeUnit=r=h===o?1:30,n.gravity&&(c=Number(n.gravity),g=90),l*=t,g*=t,this._friction=1-Number(n.friction||0),this._overwriteProps.push(d),this._overwriteProps.push(u),this._x=new e(i,d,Math.cos(l)*p,Math.cos(g)*c,r),this._y=new e(i,u,Math.sin(l)*p,Math.sin(g)*c,r),this._skipX=this._skipY=!1,!0},set:function(t){var e,i,n,o,a,s,r=this._tween._time,h=this._x,l=this._y;if(!0===this._runBackwards&&(r=this._tween._duration-r),1===this._friction)n=r*r*.5,e=h.start+(h.velocity*r+h.acceleration*n),i=l.start+(l.velocity*r+l.acceleration*n);else{if(r*=this._stepsPerTimeUnit,o=s=(0|r)-this._step,a=r%1,s>=0)for(;--s>-1;)h.v+=h.a,l.v+=l.a,h.v*=this._friction,l.v*=this._friction,h.value+=h.v,l.value+=l.v;else for(s=-s;--s>-1;)h.value-=h.v,l.value-=l.v,h.v/=this._friction,l.v/=this._friction,h.v-=h.a,l.v-=l.a;e=h.value+h.v*a,i=l.value+l.v*a,this._step+=o}this._skipX||(h.m&&(e=h.m(e,this._target)),h.f?this._target[h.p](e):this._target[h.p]=e),this._skipY||(l.m&&(i=l.m(i,this._target)),l.f?this._target[l.p](i):this._target[l.p]=i)}}),s=a.prototype;s._kill=function(t){return null!=t[this._x.p]&&(this._skipX=!0),null!=t[this._y.p]&&(this._skipY=!0),this._super._kill.call(this,t)},s._mod=function(t){var e=t[this._x.p]||t.physics2D;e&&"function"==typeof e&&(this._x.m=e),(e=t[this._y.p]||t.physics2D)&&"function"==typeof e&&(this._y.m=e)},a._autoCSS=!0,a._cssRegister=function(){var t=n.CSSPlugin;if(t){var e=t._internals,o=e._parseToProxy,s=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("physics2D",{parser:function(t,e,n,h,l,p){p=new a;var c,d=e.xProp||"x",u=e.yProp||"y",g={};return g[d]=g[u]=i++,c=o(t,g,h,l,p),l=new r(t,"physics2D",0,0,c.pt,2),l.data=c,l.plugin=p,l.setRatio=s,p._onInitTween(c.proxy,e,h._tween),l}})}}}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t){"use strict";var e=function(){return(_gsScope.GreenSockGlobals||_gsScope).Physics2DPlugin};"function"==typeof define&&define.amd?define(["TweenLite"],e):"undefined"!=typeof module&&module.exports&&(require("../TweenLite.js"),module.exports=e())}();var visualAssets={"initial-loading-assets":[{id:"preloader/loading-font",dir:"henry-danger-title-font",fontname:"hemi",fontdata:"henry-danger-title-font.xml",type:"bitmaptext",alphabet:"english"},{id:"preloader/loading-font",dir:"henry-danger-title-font-latin-and-cyrillic",fontname:"coder",fontdata:"henry-danger-title-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"preloader/loading-font",dir:"henry-danger-title-font-latin-and-cyrillic",fontname:"coder",fontdata:"henry-danger-title-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"global/screen-overlay-grid-tile-element",url:"global/screen-overlay-grid-tile-element.png",pool:20},{id:"global/streak-effect",url:"global/streak-effect.png",anchor:[.5,.5],pool:4},{id:"global/screen-colour-overlay",url:"global/screen-colour-overlay.png"},{id:"preloader-bar",anchor:[.5,.5],children:[{id:"bar-bg",url:"preloader/bar-bg.png"},{id:"bar-fill-holder",children:[{id:"bar-fill-grad",url:"preloader/bar-fill-grad.png"},{id:"bar-fill",url:"preloader/bar-fill.png"}]}]},{id:"loader-zap-anim",anchor:[.4,.5],type:"spritesheet",dir:"preloader/loader-zap-anim",atlas:"loader-zap-anim.json",frames:[]}],"pause-assets":[{id:"pause/bg-bars-holder",children:[]},{id:"pause/screen-holder",children:[]},{id:"pause/screen-frame",url:"pause/screen-frame.png",anchor:[.5,.5]},{id:"pause/screen-black",url:"pause/screen-black.png",pool:2,anchor:[0,.5]},{id:"pause/screen-pattern",url:"pause/screen-pattern.png",anchor:[.5,.5]},{id:"pause/screen-shadow",url:"pause/screen-shadow.png",pool:2,anchor:[0,.5]},{id:"pause/table",url:"pause/table.png",anchor:[.5,.5]},{id:"pause/bg-bars",url:"pause/bg-bars.png",pool:2,anchor:[0,.5],retina:!1}],global:[{neverFlush:!0},{id:"help/help-loading-circle",url:"help-assets/help-loading-circle.png",anchor:[.5,.5]},{id:"help/screen-overlay-grid-tile-element",url:"help-assets/screen-overlay-grid-tile-element.png",pool:20},{id:"help/streak-effect",url:"help-assets/streak-effect.png",anchor:[.5,.5],pool:4},{id:"help/screen-colour-overlay",url:"help-assets/screen-colour-overlay.png"},{id:"blank-element",url:"global/blank.png",retina:!1},{id:"pause-screen-overlay-container",children:[{id:"pause-overlay",url:"ui/paused-overlay.png",retina:!1}]},{id:"title-blank-input",url:"global/title-blank-input.png"},{id:"tutorial-element-bg",url:"global/tutorial-element-bg.png"},{id:"global/pause-font",dir:"henry-danger-title-font",fontname:"hemi",fontdata:"henry-danger-title-font.xml",type:"bitmaptext",alphabet:"english"},{id:"global/pause-font",dir:"henry-danger-title-font-latin-and-cyrillic",fontname:"coder",fontdata:"henry-danger-title-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"global/pause-font",dir:"henry-danger-title-font-latin-and-cyrillic",fontname:"coder",fontdata:"henry-danger-title-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"}],"title-assets":[{id:"title-scene/click-area",url:"title-scene/click-area.png",x:0,y:0,retina:!1},{id:"title-scene-holder",children:[{id:"title-scene/screen-colour-overlay",url:"title-scene/screen-colour-overlay.png"},{id:"title-scene/hologram-front",url:"title-scene/hologram-front.png",retina:!1,anchor:[.5,.5]},{id:"title-scene/logo-holder",x:503,y:206,anchor:[.5,.5],children:[{id:"title-scene/logo-the",url:"title-scene/logo-the.png",x:164.5,y:28.5,anchor:[.5,.5]},{id:"title-scene/logo-danger",url:"title-scene/logo-danger-asset.png",x:239.5,y:107,anchor:[.5,.5]},{id:"title-scene/logo-trials",url:"title-scene/logo-trials.png",x:250.5,y:202,anchor:[.5,.5]}]},{id:"title-scene/henry-danger-logo",url:"title-scene/henry-danger-logo.png",x:139.5,y:75.5,anchor:[.5,.5]},{id:"title-scene/captain-man-holder",children:[{id:"title-scene/man-left-arm-top",url:"title-scene/man-left-arm-top.png",x:216,y:271,anchor:[1,0]},{id:"title-scene/man-left-arm-top-lightmap",url:"title-scene/man-left-arm-top-lightmap.png",x:216,y:271,anchor:[1,0]},{id:"title-scene/man-body",url:"title-scene/man-body.png",x:312.5,y:346,anchor:[.5,.5]},{id:"title-scene/man-body-lightmap",url:"title-scene/man-body-lightmap.png",x:319,y:346,anchor:[.5,.5]},{id:"title-scene/man-head",url:"title-scene/man-head.png",x:327,y:205,anchor:[.5,.8]},{id:"title-scene/man-head-lightmap",url:"title-scene/man-head-lightmap.png",x:337.5,y:205,anchor:[.5,.8]},{id:"title-scene/man-left-arm-bottom",url:"title-scene/man-left-arm-bottom.png",x:94,y:498,anchor:[1,1]},{id:"title-scene/man-left-arm-bottom-lightmap",url:"title-scene/man-left-arm-bottom-lightmap.png",x:94,y:498,anchor:[1,1]},{id:"title-scene/man-right-arm-top",url:"title-scene/man-right-arm-top.png",x:448,y:316,anchor:[.8,0]},{id:"title-scene/man-right-arm-top-lightmap",url:"title-scene/man-right-arm-top-lightmap.png",x:462,y:315,anchor:[.8,0]},{id:"title-scene/man-right-arm-bottom",url:"title-scene/man-right-arm-bottom.png",x:406,y:541,anchor:[1,1]},{id:"title-scene/man-right-arm-bottom-lightmap",url:"title-scene/man-right-arm-bottom-lightmap.png",x:406,y:541,anchor:[1,1]}]},{id:"title-scene/henry-holder",children:[{id:"title-scene/henry-right-arm-top",url:"title-scene/henry-right-arm-top.png",x:174,y:241,anchor:[0,0]},{id:"title-scene/henry-right-arm-top-lightmap",url:"title-scene/henry-right-arm-top-lightmap.png",x:174,y:241,anchor:[0,0]},{id:"title-scene/henry-right-arm-bottom",url:"title-scene/henry-right-arm-bottom.png",x:219,y:408,anchor:[0,1]},{id:"title-scene/henry-right-arm-bottom-lightmap",url:"title-scene/henry-right-arm-bottom-lightmap.png",x:219,y:408,anchor:[0,1]},{id:"title-scene/henry-body",url:"title-scene/henry-body.png",x:132,y:296,anchor:[.5,.5]},{id:"title-scene/henry-body-lightmap",url:"title-scene/henry-body-lightmap.png",x:130,y:296,anchor:[.5,.5]},{id:"title-scene/henry-left-arm-top",url:"title-scene/henry-left-arm-top.png",x:71,y:253,anchor:[1,0]},{id:"title-scene/henry-left-arm-top-lightmap",url:"title-scene/henry-left-arm-top-lightmap.png",x:65,y:252.5,anchor:[1,0]},{id:"title-scene/henry-left-arm-bottom",url:"title-scene/henry-left-arm-bottom.png",x:0,y:419,anchor:[0,1]},{id:"title-scene/henry-left-arm-bottom-lightmap",url:"title-scene/henry-left-arm-bottom-lightmap.png",x:0,y:418,anchor:[0,1]},{id:"title-scene/henry-head",url:"title-scene/henry-head.png",x:120,y:191,anchor:[.5,.9]},{id:"title-scene/henry-head-lightmap",url:"title-scene/henry-head-lightmap.png",x:120,y:162,anchor:[.5,.9]}]},{id:"title-scene/light-holder",x:512,y:650,anchor:[.5,1],children:[{id:"title-scene/light-top",url:"title-scene/light-top.png",x:0,y:225},{id:"title-scene/light-lines",url:"title-scene/light-lines.png",x:14,y:0}]}]},{id:"title-scene/click-to-play-holder",children:[]},{id:"title-scene/particle-burst-1-holder",children:[]},{id:"title-scene/particle-burst-2-holder",children:[]},{id:"title-scene/particle-burst-3-holder",children:[]},{id:"title-scene/particle-burst-4-holder",children:[]},{id:"title-scene/outer-white-lines-holder",children:[]},{id:"title-scene/outer-green-lines-holder",children:[]},{id:"title-scene/outer-blue-lines-holder",children:[]},{id:"title-scene/outer-red-lines-holder",children:[]},{id:"title-scene/hologram-effect-back-holder",children:[]},{id:"title-scene/hologram-effect-back",url:"title-scene/hologram-effect-back.png",retina:!1,pool:4,anchor:[0,1]},{id:"title-scene/outer-lines",url:"title-scene/outer-lines.png",pool:12,anchor:[0,0],retina:!1},{id:"title-scene/logo-star",url:"title-scene/logo-star.png",pool:3,anchor:[.5,.5]},{id:"title-scene/green-line-1",url:"title-scene/green-line-1.png",pool:8,anchor:[.5,.5]},{id:"title-scene/green-line-2",url:"title-scene/green-line-2.png",pool:4,anchor:[.5,.5]},{id:"title-scene/particle-1",url:"title-scene/particle-1.png",pool:100,anchor:[.5,.5]},{id:"title-scene/particle-2",url:"title-scene/particle-1.png",pool:100,anchor:[.5,.5]},{id:"title-scene/particle-3",url:"title-scene/particle-1.png",pool:100,anchor:[.5,.5]},{id:"title-scene/particle-4",url:"title-scene/particle-1.png",pool:300,anchor:[.5,.5]},{id:"title-scene/click-to-play-font",dir:"henry-danger-title-font",fontname:"hemi",fontdata:"henry-danger-title-font.xml",type:"bitmaptext",alphabet:"english"},{id:"title-scene/click-to-play-font",dir:"henry-danger-title-font-latin-and-cyrillic",fontname:"coder",fontdata:"henry-danger-title-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"title-scene/click-to-play-font",dir:"henry-danger-title-font-latin-and-cyrillic",fontname:"coder",fontdata:"henry-danger-title-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"}],"hub-assets":[{id:"hub-scene/logo-font",dir:"score-font",fontname:"hemi-white",fontdata:"score-font.xml",type:"bitmaptext",pool:4,alphabet:"english"},{id:"hub-scene/logo-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",pool:4,alphabet:"latin"},{id:"hub-scene/logo-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",pool:4,alphabet:"cyrillic"},{id:"hub-blank-input",url:"hub-scene/hub-blank-input.png"},{id:"hub-scene/zoom-holder",children:[]},{id:"hub-scene/holo-filter",url:"hub-scene/holo-filter.png"},{id:"hub-scene/holo-bulge-filter",url:"hub-scene/bulge-filter.png"},{id:"hub-scene/holo-light-beam",url:"hub-scene/holo-light-beam.png",anchor:[.5,1],pool:2},{id:"hub-scene/holo-light-lines",url:"hub-scene/holo-light-lines.png",anchor:[.5,1],pool:2},{id:"hub-scene/holo-logo-container",children:[]},{id:"hub-scene/holo-lights-container",children:[]},{id:"hub-scene/photon-logo-overlay",url:"hub-scene/photon-logo-overlay.png",anchor:[.5,.5]},{id:"hub-scene/photon-logo",url:"hub-scene/photon-logo.png",anchor:[.5,.5]},{id:"hub-scene/photon-logo-glow",url:"hub-scene/photon-logo-glow.png",anchor:[.5,.5]},{id:"hub-scene/baddie-logo-overlay",url:"hub-scene/baddie-logo-overlay.png",anchor:[.5,.5]},{id:"hub-scene/baddie-logo",url:"hub-scene/baddie-logo.png",anchor:[.5,.5]},{id:"hub-scene/baddie-logo-glow",url:"hub-scene/baddie-logo-glow.png",anchor:[.5,.5]},{id:"hub-scene/gap-logo-overlay",url:"hub-scene/gap-logo-overlay.png",anchor:[.5,.5]},{id:"hub-scene/gap-logo",url:"hub-scene/gap-logo.png",anchor:[.5,.5]},{id:"hub-scene/gap-logo-glow",url:"hub-scene/gap-logo-glow.png",anchor:[.5,.5]},{id:"hub-scene/swinging-logo-overlay",url:"hub-scene/swinging-logo-overlay.png",anchor:[.5,.5]},{id:"hub-scene/swinging-logo",url:"hub-scene/swinging-logo.png",anchor:[.5,.5]},{id:"hub-scene/swinging-logo-glow",url:"hub-scene/swinging-logo-glow.png",anchor:[.5,.5]},{id:"hub-scene/man-cave-bg",url:"hub-scene/man-cave-bg.jpg"},{id:"hub-scene/man-cave-light-map",url:"hub-scene/man-cave-light-map.png"},{id:"hub-scene/beam-bottom",url:"hub-scene/beam-bottom.png",anchor:[.5,1]},{id:"hub-scene/logo-mask-holder",children:[]},{id:"hub-scene/hub-secondary-characters",url:"hub-scene/hub-secondary-characters.png"},{id:"hub-scene/hub-secondary-characters-light-map",url:"hub-scene/hub-secondary-characters-light-map.png"},{id:"hub-scene/hub-henry",url:"hub-scene/hub-henry.png"},{id:"hub-scene/hub-henry-light-map",url:"hub-scene/hub-henry-light-map.png"},{id:"hub-scene/captain-man-hologram",url:"hub-scene/captain-man-hologram.png"},{id:"hub-scene/captain-man-hologram-head",url:"hub-scene/captain-man-hologram-head.png"},{id:"hub-scene/captain-man-hologram-head-blink",url:"hub-scene/captain-man-hologram-head-blink.png"},{id:"hub-scene/hub-secondary-characters-holder",children:[]},{id:"hub-scene/hub-henry-character-holder",children:[]},{id:"hub-scene/comic-font-0",dir:"comic-font",fontname:"comic-font",fontdata:"comic-font.xml",type:"bitmaptext",alphabet:"english"},{id:"hub-scene/comic-font-1",dir:"comic-font",fontname:"comic-font",fontdata:"comic-font.xml",type:"bitmaptext",alphabet:"english"},{id:"hub-scene/comic-font-2",dir:"comic-font",fontname:"comic-font",fontdata:"comic-font.xml",type:"bitmaptext",alphabet:"english"},{id:"hub-scene/comic-font-0",dir:"comic-font-latin-and-cyrillic",fontname:"comic-relief",fontdata:"comic-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"hub-scene/comic-font-1",dir:"comic-font-latin-and-cyrillic",fontname:"comic-relief",fontdata:"comic-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"hub-scene/comic-font-2",dir:"comic-font-latin-and-cyrillic",fontname:"comic-relief",fontdata:"comic-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"hub-scene/comic-font-0",dir:"comic-font-latin-and-cyrillic",fontname:"comic-relief",fontdata:"comic-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"hub-scene/comic-font-1",dir:"comic-font-latin-and-cyrillic",fontname:"comic-relief",fontdata:"comic-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"hub-scene/comic-font-2",dir:"comic-font-latin-and-cyrillic",fontname:"comic-relief",fontdata:"comic-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"hub-scene/click-anywhere-message",dir:"henry-danger-title-font",fontname:"hemi",fontdata:"henry-danger-title-font.xml",type:"bitmaptext",alphabet:"english"},{id:"hub-scene/click-anywhere-message",dir:"henry-danger-title-font-latin-and-cyrillic",fontname:"coder",fontdata:"henry-danger-title-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"hub-scene/click-anywhere-message",dir:"henry-danger-title-font-latin-and-cyrillic",fontname:"coder",fontdata:"henry-danger-title-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"hub-scene/blink-jasper",url:"hub-scene/blink-jasper.png"},{id:"hub-scene/blink-henry",url:"hub-scene/blink-henry.png"},{id:"hub-scene/blink-charlotte",url:"hub-scene/blink-charlotte.png"},{id:"hub-scene/captain-man-holder",children:[]},{id:"hub-scene/captain-man-mouth-holder",children:[]},{id:"hub-scene/captain-man-hologram-mouth-0",url:"hub-scene/captain-man-hologram-mouth-0.png",anchor:[.5,.5]},{id:"hub-scene/captain-man-hologram-mouth-1",url:"hub-scene/captain-man-hologram-mouth-1.png",anchor:[.5,.5]},{id:"hub-scene/captain-man-hologram-mouth-2",url:"hub-scene/captain-man-hologram-mouth-2.png",anchor:[.5,.5]},{id:"hub-scene/captain-man-hologram-mouth-3",url:"hub-scene/captain-man-hologram-mouth-3.png",anchor:[.5,.5]},{id:"hub-scene/captain-man-hologram-mouth-4",url:"hub-scene/captain-man-hologram-mouth-4.png",anchor:[.5,.5]}],"ui-assets":[{neverFlush:!0},{id:"ui-focus-meter",children:[{url:"ui/ui-powerup-bar.png",anchor:[.5,.5]}]},{id:"ui-powerup-slot",children:[],pool:5},{url:"ui/ui-powerup-slot-empty.png",anchor:[.5,.5],pool:5},{url:"ui/ui-powerup-slot-full.png",anchor:[.5,.5],pool:5},{id:"ui-main-container",children:[]},{id:"ui-message-container",children:[]},{id:"ui/start-message-0",dir:"henry-danger-title-font",fontname:"hemi",fontdata:"henry-danger-title-font.xml",type:"bitmaptext",alphabet:"english"},{id:"ui/start-message-1",dir:"henry-danger-title-font",fontname:"hemi",fontdata:"henry-danger-title-font.xml",type:"bitmaptext",alphabet:"english"},{id:"ui/start-message-2",dir:"henry-danger-title-font",fontname:"hemi",fontdata:"henry-danger-title-font.xml",type:"bitmaptext",alphabet:"english"},{id:"ui/start-message-0",dir:"henry-danger-title-font-latin-and-cyrillic",fontname:"coder",fontdata:"henry-danger-title-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"ui/start-message-1",dir:"henry-danger-title-font-latin-and-cyrillic",fontname:"coder",fontdata:"henry-danger-title-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"ui/start-message-2",dir:"henry-danger-title-font-latin-and-cyrillic",fontname:"coder",fontdata:"henry-danger-title-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"ui/start-message-0",dir:"henry-danger-title-font-latin-and-cyrillic",fontname:"coder",fontdata:"henry-danger-title-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"ui/start-message-1",dir:"henry-danger-title-font-latin-and-cyrillic",fontname:"coder",fontdata:"henry-danger-title-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"ui/start-message-2",dir:"henry-danger-title-font-latin-and-cyrillic",fontname:"coder",fontdata:"henry-danger-title-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"ui/start-message-holder",children:[]},{id:"ui/tutorial-overlay-main-holder",children:[]},{id:"tutorial-pagination-dot",url:"ui/helpscreen-pagination-dot.png",anchor:[.5,.5],pool:9},{id:"wrong-orientation-bg",url:"global/wrong-orientation-bg.png",retina:!1},{id:"scroll-bg",url:"global/iphone-scroll-overlay.png",retina:!1},{id:"white-square",url:"global/white-square.png",pool:3,retina:!1},{id:"click-anim",anchor:[.5,.5],type:"spritesheet",dir:"ui/ui-holo-anim",atlas:"ui-holo-anim-frames.json",frames:["ui-holo-anim-0.png","ui-holo-anim-1.png","ui-holo-anim-2.png","ui-holo-anim-3.png","ui-holo-anim-4.png","ui-holo-anim-0.png"]},{id:"wrong-orientation-bg",url:"global/wrong-orientation-bg.png",retina:!1},{id:"scroll-bg",url:"global/iphone-scroll-overlay.png",retina:!1},{id:"white-square",url:"global/white-square.png",pool:3,retina:!1},{id:"transition-holder",children:[{id:"black-area-top",url:"global/black-square.png",retina:!1},{id:"black-area-bottom",url:"global/black-square.png",retina:!1},{id:"black-area-left",url:"global/black-square.png",retina:!1},{id:"black-area-right",url:"global/black-square.png",retina:!1},{id:"transition-mask",children:[{id:"black-corner-top-left",url:"global/transition-mask-corner.png",retina:!1},{id:"black-corner-top-right",url:"global/transition-mask-corner.png",retina:!1},{id:"black-corner-bottom-right",url:"global/transition-mask-corner.png",retina:!1},{id:"black-corner-bottom-left",url:"global/transition-mask-corner.png",retina:!1}]}]},{id:"replaybuttonlarge",type:"button",children:[{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-large.png"},{id:"whiteout",url:"ui/ui-button-bg-whiteout-large.png"},{id:"highlight",url:"ui/ui-button-bg-highlight-large.png"},{id:"icon",url:"ui/ui-button-icon-replay-large.png"}]}]},{id:"playbuttonlarge",type:"button",children:[{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-large.png"},{id:"whiteout",url:"ui/ui-button-bg-whiteout-large.png"},{id:"highlight",url:"ui/ui-button-bg-highlight-large.png"},{id:"icon",url:"ui/ui-button-icon-play-large.png"}]}]},{id:"soundoffbutton",type:"button",children:[{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg.png"},{id:"whiteout",url:"ui/ui-button-bg-whiteout.png"},{id:"highlight",url:"ui/ui-button-bg-highlight.png"},{id:"icon",url:"ui/ui-button-icon-sound-off.png"}]}]},{id:"soundonbutton",type:"button",children:[{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg.png"},{id:"whiteout",url:"ui/ui-button-bg-whiteout.png"},{id:"highlight",url:"ui/ui-button-bg-highlight.png"},{id:"icon",url:"ui/ui-button-icon-sound-on.png"}]}]},{id:"pause-button",type:"button",children:[{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg.png"},{id:"whiteout",url:"ui/ui-button-bg-whiteout.png"},{id:"highlight",url:"ui/ui-button-bg-highlight.png"},{id:"icon",url:"ui/ui-button-icon-pause.png"}]}]},{id:"powerup-button",type:"button",children:[{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg.png"},{id:"whiteout",url:"ui/ui-button-bg-whiteout.png"},{id:"highlight",url:"ui/ui-button-bg-highlight.png"},{id:"icon",url:"ui/ui-button-icon-focusmode.png"}]}]},{id:"play-button",type:"button",children:[{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg.png"},{id:"whiteout",url:"ui/ui-button-bg-whiteout.png"},{id:"highlight",url:"ui/ui-button-bg-highlight.png"},{id:"icon",url:"ui/ui-button-icon-play.png"}]}]},{id:"back-button",type:"button",children:[{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg.png"},{id:"whiteout",url:"ui/ui-button-bg-whiteout.png"},{id:"highlight",url:"ui/ui-button-bg-highlight.png"},{id:"icon",url:"ui/ui-button-icon-back.png"}]}]},{id:"close-button",type:"button",children:[{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg.png"},{id:"whiteout",url:"ui/ui-button-bg-whiteout.png"},{id:"highlight",url:"ui/ui-button-bg-highlight.png"},{id:"icon",url:"ui/ui-button-icon-close.png"}]}]},{id:"home-button",type:"button",children:[{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg.png"},{id:"whiteout",url:"ui/ui-button-bg-whiteout.png"},{id:"highlight",url:"ui/ui-button-bg-highlight.png"},{id:"icon",url:"ui/ui-button-icon-home.png"}]}]},{id:"help-button",type:"button",children:[{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg.png"},{id:"whiteout",url:"ui/ui-button-bg-whiteout.png"},{id:"highlight",url:"ui/ui-button-bg-highlight.png"},{id:"icon",url:"ui/ui-button-icon-help.png"}]}]},{id:"tutorial-button-left",type:"button",children:[{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg.png"},{id:"whiteout",url:"ui/ui-button-bg-whiteout.png"},{id:"highlight",url:"ui/ui-button-bg-highlight.png"},{id:"icon",url:"ui/ui-button-icon-left.png"}]}]},{id:"tutorial-button-right",type:"button",children:[{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg.png"},{id:"whiteout",url:"ui/ui-button-bg-whiteout.png"},{id:"highlight",url:"ui/ui-button-bg-highlight.png"},{id:"icon",url:"ui/ui-button-icon-right.png"}]}]},{id:"hub-button-left",type:"button",children:[{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg.png"},{id:"whiteout",url:"ui/ui-button-bg-whiteout.png"},{id:"highlight",url:"ui/ui-button-bg-highlight.png"},{id:"icon",url:"ui/ui-button-icon-left.png"}]}]},{id:"hub-button-right",type:"button",children:[{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg.png"},{id:"whiteout",url:"ui/ui-button-bg-whiteout.png"},{id:"highlight",url:"ui/ui-button-bg-highlight.png"},{id:"icon",url:"ui/ui-button-icon-right.png"}]}]},{id:"skip-button",type:"button",children:[{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg.png"},{id:"whiteout",url:"ui/ui-button-bg-whiteout.png"},{id:"highlight",url:"ui/ui-button-bg-highlight.png"},{id:"icon",url:"ui/ui-button-icon-skip.png"}]}]}],"game-over-assets":[{id:"game-over/game-over-score-font",dir:"score-font",fontname:"hemi-white",fontdata:"score-font.xml",type:"bitmaptext",alphabet:"english"},{id:"game-over/game-over-score",dir:"score-font",fontname:"hemi-white",fontdata:"score-font.xml",type:"bitmaptext",alphabet:"english"},{id:"game-over/game-over-score-font",dir:"score-font-latin-and-cyrillic",fontname:"coder",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"game-over/game-over-score",dir:"score-font-latin-and-cyrillic",fontname:"coder",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"game-over/game-over-score-font",dir:"score-font-latin-and-cyrillic",fontname:"coder",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"game-over/game-over-score",dir:"score-font-latin-and-cyrillic",fontname:"coder",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"game-over-holder",children:[{id:"game-over-title-holder",children:[]},{id:"game-over-score-holder",children:[]},{id:"blue-bars-holder",children:[]},{id:"red-lines-holder",children:[]},{id:"star-1-holder",children:[]},{id:"star-2-holder",children:[]},{id:"star-3-holder",children:[]},{id:"screen-holder",children:[]},{id:"gameover-assets/black-overlay",url:"gameover-assets/black-overlay.png",retina:!1},{id:"gameover-assets/screen-overlay",url:"gameover-assets/screen-overlay.png",anchor:[.5,.5]},{id:"gameover-assets/screen-shadow",url:"gameover-assets/screen-shadow.png",anchor:[.5,.5]},{id:"henry-holder",x:-232,y:69.5,children:[{id:"gameover-assets/henry-0",url:"gameover-assets/henry-0.png",anchor:[.5,.5]},{id:"gameover-assets/henry-1",url:"gameover-assets/henry-1.png",anchor:[.5,.5]},{id:"gameover-assets/henry-2",url:"gameover-assets/henry-2.png",anchor:[.5,.5]},{id:"gameover-assets/henry-3",url:"gameover-assets/henry-3.png",anchor:[.5,.5]}]},{id:"man-holder",x:195,y:47,children:[{id:"gameover-assets/cpt-man-0",url:"gameover-assets/cpt-man-0.png",anchor:[.5,.5]},{id:"gameover-assets/cpt-man-1",url:"gameover-assets/cpt-man-1.png",anchor:[.5,.5]},{id:"gameover-assets/cpt-man-2",url:"gameover-assets/cpt-man-2.png",anchor:[.5,.5]},{id:"gameover-assets/cpt-man-3",url:"gameover-assets/cpt-man-3.png",anchor:[.5,.5]}]}]},{id:"gameover-assets/blue-bars",url:"gameover-assets/blue-bars.png",pool:2,anchor:[0,.5],retina:!1},{id:"gameover-assets/red-lines",url:"gameover-assets/red-lines.png",pool:4,anchor:[0,0],retina:!1},{id:"gameover-assets/star-back",url:"gameover-assets/star-back.png",pool:3,anchor:[.5,.5]},{id:"gameover-assets/star-front",url:"gameover-assets/star-front.png",pool:3,anchor:[.5,.5]},{id:"gameover-assets/star-front-overlay",url:"gameover-assets/star-front-overlay.png",pool:3,anchor:[.5,.5]},{id:"gameover-assets/star-burst-particle-1",url:"gameover-assets/star-particle.png",anchor:[.5,.5],pool:100},{id:"gameover-assets/star-burst-particle-2",url:"gameover-assets/star-particle.png",anchor:[.5,.5],pool:100},{id:"gameover-assets/star-burst-particle-3",url:"gameover-assets/star-particle.png",anchor:[.5,.5],pool:100},{id:"gameover-assets/star-1-burst-holder",x:0,y:0,children:[]},{id:"gameover-assets/star-2-burst-holder",x:0,y:0,children:[]},{id:"gameover-assets/star-3-burst-holder",x:0,y:0,children:[]},{id:"gameover-assets/screen-blank",url:"gameover-assets/screen-blank.png",anchor:[.5,.5]},{id:"gameover-assets/screen-come-out-swinging",url:"gameover-assets/screen-come-out-swinging.png",anchor:[.5,.5]},{id:"gameover-assets/screen-mind-the-gap",url:"gameover-assets/screen-mind-the-gap.png",anchor:[.5,.5]},{id:"gameover-assets/screen-baddie-barrage",url:"gameover-assets/screen-baddie-barrage.png",anchor:[.5,.5]},{id:"gameover-assets/screen-photon-fusion",url:"gameover-assets/screen-photon-fusion.png",anchor:[.5,.5]}],"baddie-barrage-tutorial-assets":[{id:"tutorial/title-font",dir:"score-font",fontname:"hemi-white",fontdata:"score-font.xml",type:"bitmaptext",pool:3,alphabet:"english"},{id:"tutorial/title-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"baddie-barrage-controls",url:"baddie-barrage/help-mobile-controls.png",x:0,y:0,anchor:[.5,.5],platformspecific:"mobile"},{id:"baddie-barrage-controls",url:"baddie-barrage/help-desktop-controls.png",x:0,y:0,anchor:[.5,.5],platformspecific:"desktop"}]},{id:"tutorial-frame-howtoplay",children:[{id:"baddie-barrage-how-to-play",url:"baddie-barrage/how-to-play.png",x:10,y:20,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"baddie-barrage-power-up",url:"baddie-barrage/help-powerup.png",x:0,y:0,anchor:[.5,.5]}]}],"baddie-barrage-assets":[{id:"baddie-barrage/scale-holder",children:[{id:"baddie-barrage/main-holder",children:[]}]},{id:"baddie-barrage/bg",url:"baddie-barrage/bg.png"},{id:"baddie-barrage/baddie-a",url:"baddie-barrage/baddie-a.png",pool:10,anchor:[.5,1]},{id:"baddie-barrage/baddie-b",url:"baddie-barrage/baddie-b.png",pool:10,anchor:[.5,1]},{id:"baddie-barrage/baddie-c",url:"baddie-barrage/baddie-c.png",pool:10,anchor:[.5,1]},{id:"baddie-barrage/baddie-sprite-holder",children:[],x:-40,y:40,pool:10},{id:"baddie-barrage/baddie-spine-0",type:"spine",dir:"baddie-barrage/baddie",url:"skeleton.png",skeleton:"skeleton.json",atlas:"skeleton.txt"},{id:"baddie-barrage/baddie-spine-1",type:"spine",dir:"baddie-barrage/baddie",url:"skeleton.png",skeleton:"skeleton.json",atlas:"skeleton.txt"},{id:"baddie-barrage/baddie-spine-2",type:"spine",dir:"baddie-barrage/baddie",url:"skeleton.png",skeleton:"skeleton.json",atlas:"skeleton.txt"},{id:"baddie-barrage/baddie-spine-3",type:"spine",dir:"baddie-barrage/baddie",url:"skeleton.png",skeleton:"skeleton.json",atlas:"skeleton.txt"},{id:"baddie-barrage/baddie-spine-4",type:"spine",dir:"baddie-barrage/baddie",url:"skeleton.png",skeleton:"skeleton.json",atlas:"skeleton.txt"},{id:"baddie-barrage/baddie-spine-5",type:"spine",dir:"baddie-barrage/baddie",url:"skeleton.png",skeleton:"skeleton.json",atlas:"skeleton.txt"},{id:"baddie-barrage/baddie-spine-6",type:"spine",dir:"baddie-barrage/baddie",url:"skeleton.png",skeleton:"skeleton.json",atlas:"skeleton.txt"},{id:"baddie-barrage/baddie-spine-7",type:"spine",dir:"baddie-barrage/baddie",url:"skeleton.png",skeleton:"skeleton.json",atlas:"skeleton.txt"},{id:"baddie-barrage/baddie-spine-8",type:"spine",dir:"baddie-barrage/baddie",url:"skeleton.png",skeleton:"skeleton.json",atlas:"skeleton.txt"},{id:"baddie-barrage/baddie-spine-9",type:"spine",dir:"baddie-barrage/baddie",url:"skeleton.png",skeleton:"skeleton.json",atlas:"skeleton.txt"},{id:"baddie-barrage/baddie-spine-10",type:"spine",dir:"baddie-barrage/baddie",url:"skeleton.png",skeleton:"skeleton.json",atlas:"skeleton.txt"},{id:"baddie-barrage/henry-spine",type:"spine",dir:"baddie-barrage/henry",url:"skeleton.png",skeleton:"skeleton.json",atlas:"skeleton.txt"},{id:"baddie-barrage/floor-holder",children:[]},{id:"baddie-barrage/floor-bar",url:"baddie-barrage/floor-bar.png",anchor:[0,.5],pool:20},{id:"baddie-barrage/score-font",dir:"score-font",fontname:"hemi-white",fontdata:"score-font.xml",type:"bitmaptext",alphabet:"english"},{id:"baddie-barrage/score-font",dir:"score-font-latin-and-cyrillic",fontname:"coder",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"baddie-barrage/score-font",dir:"score-font-latin-and-cyrillic",fontname:"coder",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"baddie-barrage/add-score-font",dir:"score-font",fontname:"hemi-white",fontdata:"score-font.xml",type:"bitmaptext",alphabet:"english"},{id:"baddie-barrage/add-score-font",dir:"score-font-latin-and-cyrillic",fontname:"coder",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"baddie-barrage/add-score-font",dir:"score-font-latin-and-cyrillic",fontname:"coder",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"baddie-barrage/wave-font",dir:"henry-danger-title-font",fontname:"hemi",fontdata:"henry-danger-title-font.xml",type:"bitmaptext",alphabet:"english"},{id:"baddie-barrage/wave-font",dir:"henry-danger-title-font-latin-and-cyrillic",fontname:"coder",fontdata:"henry-danger-title-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"baddie-barrage/wave-font",dir:"henry-danger-title-font-latin-and-cyrillic",fontname:"coder",fontdata:"henry-danger-title-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"baddie-barrage/green-particle",url:"baddie-barrage/green-particle.png",anchor:[.5,.5],retina:!1,pool:40},{id:"baddie-barrage/pink-particle",url:"baddie-barrage/pink-particle.png",anchor:[.5,.5],retina:!1,pool:40},{id:"baddie-barrage/red-particle",url:"baddie-barrage/red-particle.png",anchor:[.5,.5],retina:!1,pool:40},{id:"baddie-barrage/blank-input",url:"baddie-barrage/blank-input.png",retina:!1},{id:"baddie-barrage/smash-particle-container",children:[]},{id:"baddie-barrage/hit-particle-container",children:[]},{id:"baddie-barrage/wave-text-holder",children:[]},{id:"baddie-barrage/add-score-holder",children:[]},{id:"baddie-barrage/score-holder",children:[{id:"baddie-barrage/score-bg",url:"baddie-barrage/score-bg.png",anchor:[.1,.5]}]},{id:"baddie-barrage/bar",x:-30,y:850,children:[{id:"baddie-barrage/bar-bg",url:"baddie-barrage/bar.png",anchor:[.5,.5]},{id:"baddie-barrage/bar-pack",url:"baddie-barrage/bar-pack.png",x:-540,anchor:[.5,.5]},{id:"baddie-barrage/belt-logo",url:"baddie-barrage/belt-logo.png",x:510,anchor:[.5,.5]}]},{id:"baddie-barrage/marker-container",children:[]},{id:"baddie-barrage/trail-container",children:[{id:"baddie-barrage/green-trail",url:"baddie-barrage/bar-glow.png",anchor:[1,.5]},{id:"baddie-barrage/purple-trail",url:"baddie-barrage/bar-glow-powerup.png",anchor:[1,.5]}]},{id:"baddie-barrage/marker",url:"baddie-barrage/marker.png",y:0,anchor:[.5,.5],pool:4},{id:"baddie-barrage/marker-powerup",url:"baddie-barrage/marker-power-up.png",y:0,anchor:[.5,.5],pool:4},{id:"baddie-barrage/target",url:"baddie-barrage/target.png",x:0,y:-6,anchor:[.5,.5],pool:3},{id:"baddie-barrage/hit-container",children:[{id:"baddie-barrage/green-flash",url:"baddie-barrage/green-flash.png",x:0,y:-6,retina:!1,anchor:[.5,.5]},{id:"baddie-barrage/pink-flash",url:"baddie-barrage/pink-flash.png",x:0,y:-6,retina:!1,anchor:[.5,.5]}]},{id:"baddie-barrage/henry",x:-400,y:560,children:[]},{id:"baddie-barrage/baddie-layer",children:[]},{id:"baddie-barrage/baddie-holder",children:[],pool:10},{id:"baddie-barrage/shield",children:[{id:"baddie-barrage/shield-inner",children:[{id:"baddie-barrage/shield-1",url:"baddie-barrage/shield-1.png",x:0,anchor:[.5,.5],retina:!1},{id:"baddie-barrage/shield-2",url:"baddie-barrage/shield-2.png",x:18,anchor:[.5,.5],retina:!1},{id:"baddie-barrage/shield-3",url:"baddie-barrage/shield-3.png",x:10,anchor:[.5,.5],retina:!1},{id:"baddie-barrage/shield-4",url:"baddie-barrage/shield-4.png",x:17,anchor:[.5,.5],retina:!1}]}]}],"come-out-swinging-tutorial-assets":[{id:"tutorial/title-font",dir:"score-font",fontname:"hemi-white",fontdata:"score-font.xml",type:"bitmaptext",pool:3,alphabet:"english"},{id:"tutorial/title-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"come-out-swinging-controls",url:"come-out-swinging/help-desktop-controls.png",x:0,y:0,anchor:[.5,.5],platformspecific:"desktop"},{id:"come-out-swinging-controls",url:"come-out-swinging/help-mobile-controls.png",x:0,y:0,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"come-out-swinging-how-to-play",url:"come-out-swinging/how-to-play.png",x:0,y:0,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"come-out-swinging-power-up",url:"come-out-swinging/help-power-up.png",x:0,y:0,anchor:[.5,.5]}]}],"come-out-swinging-assets":[{id:"come-out-swinging/score-font",dir:"score-font",fontname:"hemi-white",fontdata:"score-font.xml",type:"bitmaptext",alphabet:"english"},{id:"come-out-swinging/score-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"come-out-swinging/score-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"come-out-swinging/checkpoint-font",dir:"score-font",fontname:"hemi-white",fontdata:"score-font.xml",type:"bitmaptext",alphabet:"english"},{id:"come-out-swinging/checkpoint-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"come-out-swinging/checkpoint-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"come-out-swinging/roof-particle-container",children:[]},{id:"come-out-swinging/roof-particle-container2",children:[]},{id:"come-out-swinging/hit-particle-container",children:[]},{id:"come-out-swinging/green-particle",url:"come-out-swinging/green-particle.png",anchor:[.5,.5],retina:!1,pool:15},{id:"come-out-swinging/pink-particle",url:"come-out-swinging/pink-particle.png",anchor:[.5,.5],retina:!1,pool:50},{id:"come-out-swinging/red-particle",url:"come-out-swinging/red-particle.png",anchor:[.5,.5],retina:!1,pool:40},{id:"come-out-swinging/checkpoint",children:[{url:"come-out-swinging/checkpoint-off-pole.png",anchor:[0,1],x:43,y:48},{id:"come-out-swinging/checkpoint-off",children:[{url:"come-out-swinging/checkpoint-off.png",x:33,y:48},{url:"come-out-swinging/checkpoint-board.png",x:63,y:66},{url:"come-out-swinging/checkpoint-side-on.png",x:61,y:63},{url:"come-out-swinging/checkpoint-lamp-off.png",x:29,y:155}]},{id:"come-out-swinging/checkpoint-on",children:[{url:"come-out-swinging/checkpoint-off.png",x:33,y:48},{url:"come-out-swinging/checkpoint-lamp-on.png",x:2,y:128},{url:"come-out-swinging/checkpoint-side-on.png",x:61,y:63}]}]},{id:"come-out-swinging/long-laser/long-laser-frames",anchor:[.5,.5],type:"spritesheet",dir:"come-out-swinging/long-laser",atlas:"long-laser-frames.json",frames:[],pool:2},{id:"come-out-swinging/checkpoint-electric",anchor:[.5,.5],type:"spritesheet",dir:"come-out-swinging/checkpoint-electric",atlas:"electric.json",frames:[]},{id:"come-out-swinging/flame",anchor:[.5,1],type:"spritesheet",dir:"come-out-swinging/flame",atlas:"flame-frames.json",frames:[]},{id:"come-out-swinging/boxing-glove",children:[{url:"come-out-swinging/boxing-glove.png",anchor:[.5,.5]}]},{id:"come-out-swinging/smoke-puff-1",url:"come-out-swinging/smoke-puff-1.png",pool:15,anchor:[.5,.5],retina:!1},{id:"come-out-swinging/smoke-puff-2",url:"come-out-swinging/smoke-puff-2.png",pool:15,anchor:[.5,.5],retina:!1},{id:"come-out-swinging/muzzle-frames",anchor:[0,.5],type:"spritesheet",dir:"come-out-swinging/muzzle-frames",atlas:"muzzled-frames.json",frames:["flash-blank1.png","flash-frame1.png","flash-frame2.png","flash-frame3.png","flash-frame4.png","flash-blank2.png"]},{id:"come-out-swinging/power-up-laser",anchor:[0,.5],type:"spritesheet",dir:"come-out-swinging/muzzle-power",atlas:"muzzle-frames-power.json",frames:["flash-void.png","flash-power1.png","flash-power2.png","flash-power3.png","flash-power4.png","flash-void.png"]},{id:"come-out-swinging/shield",children:[{id:"come-out-swinging/shield-inner",x:0,children:[{id:"come-out-swinging/shield-1",url:"come-out-swinging/shield-1.png",x:0,anchor:[.5,.5],retina:!1},{id:"come-out-swinging/shield-2",url:"come-out-swinging/shield-2.png",x:18,anchor:[.5,.5],retina:!1},{id:"come-out-swinging/shield-3",url:"come-out-swinging/shield-3.png",x:10,anchor:[.5,.5],retina:!1},{id:"come-out-swinging/shield-4",url:"come-out-swinging/shield-4.png",x:17,anchor:[.5,.5],retina:!1}]}]},{id:"come-out-swinging/warning",x:950,y:320,children:[{url:"come-out-swinging/warning-arrow.png",x:40,anchor:[.5,.5]},{url:"come-out-swinging/exclamation-mark.png",anchor:[.5,.5]}]},{id:"come-out-swinging/red-chase",url:"come-out-swinging/red.png",anchor:[1,0]},{id:"come-out-swinging/red-floor",url:"come-out-swinging/red.png",anchor:[.5,.5]},{id:"come-out-swinging/score-bg",url:"come-out-swinging/score-bg.png",anchor:[0,.5]},{id:"come-out-swinging/game-over-henry",y:1450,children:[{id:"come-out-swinging/henry-body",url:"come-out-swinging/henry-body.png",anchor:[.5,.5]},{id:"come-out-swinging/henry-head",url:"come-out-swinging/henry-head.png",x:-5,y:-165,anchor:[.5,.7]},{id:"come-out-swinging/henry-arm-left",url:"come-out-swinging/henry-arm-left.png",x:-36,y:-76,anchor:[.95,.05]},{id:"come-out-swinging/henry-arm-right",url:"come-out-swinging/henry-arm-right.png",x:34,y:-78,anchor:[.1,.1]}]},{id:"come-out-swinging/floor-holder",children:[]},{id:"come-out-swinging/floor-front-holder",children:[]},{id:"come-out-swinging/floor-bar",url:"come-out-swinging/floor-bar.png",anchor:[0,.5],pool:10},{id:"come-out-swinging/tv-container",children:[{id:"come-out-swinging/tv-back",url:"come-out-swinging/tv-back.png"},{id:"come-out-swinging/tv-screen-man",url:"come-out-swinging/tv-screen-man.png"}]},{id:"come-out-swinging/smoke-cloud-1",url:"come-out-swinging/smoke-cloud-1.png",anchor:[.5,.5],retina:!1,pool:30},{id:"come-out-swinging/cloud-back",url:"come-out-swinging/cloud-back.png",anchor:[1,.5]},{id:"come-out-swinging/bg-shadow",url:"come-out-swinging/shadow.png",anchor:[.5,.5],retina:!1},{id:"come-out-swinging/cloud-container",children:[]},{id:"come-out-swinging/scale-holder",children:[{id:"come-out-swinging/main-holder",children:[]}]},{id:"come-out-swinging/blank-input",url:"come-out-swinging/blank-input.png",retina:!1},{id:"come-out-swinging/head-container",children:[{id:"come-out-swinging/head-worried",url:"come-out-swinging/head-worried.png",anchor:[.5,.5]},{id:"come-out-swinging/head-focused",url:"come-out-swinging/head-focused.png",anchor:[.5,.5]},{id:"come-out-swinging/head-happy",url:"come-out-swinging/head-happy.png",anchor:[.5,.5]},{id:"come-out-swinging/head-shocked",url:"come-out-swinging/head-shocked.png",anchor:[.5,.5]},{id:"come-out-swinging/head-determined",url:"come-out-swinging/head-determined.png",anchor:[.5,.5]}]},{id:"come-out-swinging/body",url:"come-out-swinging/body.png",anchor:[.5,.5]},{id:"come-out-swinging/arm-front-top",url:"come-out-swinging/arm-front-top.png",anchor:[.5,.5]},{id:"come-out-swinging/arm-front-bottom",url:"come-out-swinging/arm-front-bottom.png",anchor:[.5,.5]},{id:"come-out-swinging/arm-back",children:[{url:"come-out-swinging/arm-back.png",anchor:[.5,.5]},{url:"come-out-swinging/arm-back-powerup.png",anchor:[.5,.5]}]},{id:"come-out-swinging/leg-front-top",url:"come-out-swinging/leg-front-top.png",anchor:[.5,.5]},{id:"come-out-swinging/leg-front-bottom",url:"come-out-swinging/leg-front-bottom.png",anchor:[.5,.5]},{id:"come-out-swinging/leg-back-top",url:"come-out-swinging/leg-back-top.png",anchor:[.5,.5]},{id:"come-out-swinging/leg-back-bottom",url:"come-out-swinging/leg-back-bottom.png",anchor:[.5,.5]},{id:"come-out-swinging/rope-point",url:"come-out-swinging/rope-point.png",anchor:[.5,.5],retina:!1},{id:"come-out-swinging/rope-container",children:[{id:"come-out-swinging/green-rope",url:"come-out-swinging/rope-segment.png",anchor:[.5,0]},{id:"come-out-swinging/pink-rope",url:"come-out-swinging/rope-segment-power.png",anchor:[.5,0]}]},{id:"come-out-swinging/start-platform",url:"come-out-swinging/start-platform.png",pool:2,anchor:[.5,.5]},{id:"come-out-swinging/laser-hook",children:[{id:"come-out-swinging/laser-hook",url:"come-out-swinging/laser-hook.png",anchor:[.5,.5]},{id:"come-out-swinging/laser-hook-powerup",url:"come-out-swinging/laser-hook-powerup.png",anchor:[.5,.6]}]},{id:"come-out-swinging/terrain-holder",children:[]},{id:"come-out-swinging/terrain-grad-0",url:"come-out-swinging/terrain-grad-0.png",pool:18,anchor:[.5,.5]},{id:"come-out-swinging/terrain-grad-1",url:"come-out-swinging/terrain-grad-1.png",pool:18,anchor:[.5,.5]},{id:"come-out-swinging/terrain-grad-2",url:"come-out-swinging/terrain-grad-2.png",pool:18,anchor:[.5,.5]},{id:"come-out-swinging/terrain-grad--1",url:"come-out-swinging/terrain-grad--1.png",pool:18,anchor:[.5,.5]},{id:"come-out-swinging/terrain-grad--2",url:"come-out-swinging/terrain-grad--2.png",pool:18,anchor:[.5,.5]},{id:"come-out-swinging/shadow-0",url:"come-out-swinging/shadow-0.png",pool:18,anchor:[.5,.5]},{id:"come-out-swinging/shadow-1",url:"come-out-swinging/shadow-1.png",pool:18,anchor:[.5,.5]},{id:"come-out-swinging/shadow-2",url:"come-out-swinging/shadow-2.png",pool:18,anchor:[.5,.5]},{id:"come-out-swinging/shadow--1",url:"come-out-swinging/shadow--1.png",pool:18,anchor:[.5,.5]},{id:"come-out-swinging/shadow--2",url:"come-out-swinging/shadow--2.png",pool:18,anchor:[.5,.5]},{id:"come-out-swinging/under-shape",url:"come-out-swinging/terrain-support.png",pool:18,anchor:[.5,1]},{id:"come-out-swinging/under-shape-2",url:"come-out-swinging/terrain-support-2.png",pool:18,anchor:[.5,1]},{id:"come-out-swinging/beam-end",url:"come-out-swinging/beam-end.png",pool:4,anchor:[.5,.5]},{id:"come-out-swinging/beam-container",children:[],pool:2},{id:"come-out-swinging/beam-container-front",children:[],pool:2},{id:"come-out-swinging/beam-main-container",children:[],pool:2},{id:"come-out-swinging/beam-main-container-front",children:[],pool:2},{id:"come-out-swinging/beam-pole",url:"come-out-swinging/beam-pole.png",anchor:[.5,0],pool:5},{id:"come-out-swinging/beam-pole-arm-side",url:"come-out-swinging/beam-pole-arm-side.png",anchor:[0,.5],pool:8},{id:"come-out-swinging/beam-pole-arm-top",url:"come-out-swinging/beam-pole-arm-top.png",anchor:[.5,0],pool:4},{id:"come-out-swinging/vent-container",children:[],pool:6},{id:"come-out-swinging/vent-container-front",children:[],pool:6},{id:"come-out-swinging/vent-front",url:"come-out-swinging/vent-front.png",anchor:[.5,0],pool:6},{id:"come-out-swinging/vent-side-left",url:"come-out-swinging/vent-side.png",anchor:[1,0],pool:6},{id:"come-out-swinging/vent-side-right",url:"come-out-swinging/vent-side.png",anchor:[0,0],pool:6},{id:"come-out-swinging/vent-top-side-left",url:"come-out-swinging/vent-top-side.png",anchor:[1,1],pool:6},{id:"come-out-swinging/vent-top-side-right",url:"come-out-swinging/vent-top-side.png",anchor:[0,1],pool:6},{id:"come-out-swinging/vent-top-top",url:"come-out-swinging/vent-top-top.png",anchor:[.5,0],pool:6},{id:"come-out-swinging/vent-top-bottom",url:"come-out-swinging/vent-top-bottom.png",anchor:[.5,0],pool:6},{id:"come-out-swinging/vent-grill",url:"come-out-swinging/vent-grill.png",anchor:[.5,.5],pool:6},{id:"come-out-swinging/vent-particle-container",children:[]},{id:"come-out-swinging/smash-particle-container",children:[]},{id:"come-out-swinging/vent-bolt",url:"come-out-swinging/vent-bolt.png",anchor:[.5,.5],pool:5},{id:"come-out-swinging/vent-nut",url:"come-out-swinging/vent-nut.png",anchor:[.5,.5],pool:5},{id:"come-out-swinging/vent-shard-1",url:"come-out-swinging/vent-shard-1.png",anchor:[.5,.5],pool:5},{id:"come-out-swinging/vent-shard-2",url:"come-out-swinging/vent-shard-2.png",anchor:[.5,.5],pool:5},{id:"come-out-swinging/obstacles-container",children:[]},{id:"come-out-swinging/obstacles-container-front",children:[]},{id:"come-out-swinging/checkpoint-layer",children:[{id:"come-out-swinging/checkpoint-layer-chunks",children:[]}]},{id:"come-out-swinging/bg-layer",children:[{id:"come-out-swinging/bg-layer-chunks",children:[{url:"come-out-swinging/bg_01.png",retina:!1},{url:"come-out-swinging/bg_03.png",retina:!1},{url:"come-out-swinging/bg_04.png",retina:!1},{url:"come-out-swinging/bg_01.png",retina:!1},{url:"come-out-swinging/bg_03.png",retina:!1}]}]},{id:"come-out-swinging/ceiling-layer",children:[{id:"come-out-swinging/ceiling-layer-chunks",children:[{url:"come-out-swinging/flat-ceiling-chunk.png"},{url:"come-out-swinging/flat-ceiling-chunk.png"},{url:"come-out-swinging/flat-ceiling-chunk.png"},{url:"come-out-swinging/flat-ceiling-chunk.png"},{url:"come-out-swinging/flat-ceiling-chunk.png"},{url:"come-out-swinging/flat-ceiling-chunk.png"}]}]}],"mind-the-gap-tutorial-assets":[{id:"tutorial/title-font",dir:"score-font",fontname:"hemi-white",fontdata:"score-font.xml",type:"bitmaptext",pool:3,alphabet:"english"},{id:"tutorial/title-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"mind-the-gap-controls",url:"mind-the-gap/help-mobile-controls.png",x:0,y:0,anchor:[.5,.5],platformspecific:"mobile"},{id:"mind-the-gap-controls",url:"mind-the-gap/help-desktop-controls.png",x:0,y:0,anchor:[.5,.5],platformspecific:"desktop"}]},{id:"tutorial-frame-howtoplay",children:[{id:"mind-the-gap-how-to-play",url:"mind-the-gap/how-to-play.png",x:10,y:70,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"mind-the-gap-power-up",url:"mind-the-gap/help-powerup.png",x:0,y:0,anchor:[.5,.5]}]}],"mind-the-gap-assets":[{id:"mind-the-gap/main-holder",children:[]},{id:"mind-the-gap/blank-input",url:"mind-the-gap/blank-input.png"},{id:"mind-the-gap/platform",url:"mind-the-gap/platform.png",pool:6,anchor:[0,.3]},{id:"mind-the-gap/platform-front",url:"mind-the-gap/platform-front.png",pool:6,anchor:[0,.3],pool:2},{id:"mind-the-gap/level-edges",url:"mind-the-gap/level-edges.png",pool:3},{id:"mind-the-gap/chicken-sprite-claw-red",url:"mind-the-gap/chicken-sprite-claw-red.png",anchor:[.5,.5]},{id:"mind-the-gap/chicken-sprite-claw-blue",url:"mind-the-gap/chicken-sprite-claw-blue.png",anchor:[.5,.5]},{id:"mind-the-gap/chicken-sprite-claw-green",url:"mind-the-gap/chicken-sprite-claw-green.png",anchor:[.5,.5]},{id:"mind-the-gap/chicken-holder",children:[],pool:10},{id:"mind-the-gap/spawn-claw-holder",children:[]},{id:"mind-the-gap/claw-jaw-left",url:"mind-the-gap/claw-jaw-left.png",anchor:[1,0]},{id:"mind-the-gap/claw-jaw-right",url:"mind-the-gap/claw-jaw-right.png",anchor:[0,0]},{id:"mind-the-gap/claw-arm",url:"mind-the-gap/claw-arm.png",anchor:[1,.5]},{id:"mind-the-gap/bridge-anchor",url:"mind-the-gap/bridge-anchor.png",anchor:[.5,.5],pool:6},{id:"mind-the-gap/bridge-anchor-light",url:"mind-the-gap/bridge-anchor-light.png",anchor:[.5,.5],pool:6},{id:"mind-the-gap/bridge-holder",children:[]},{id:"mind-the-gap/bridge-asset",url:"mind-the-gap/bridge-asset.png",anchor:[0,.5]},{id:"mind-the-gap/bridge-asset-powerup",url:"mind-the-gap/bridge-asset-powerup.png",anchor:[0,.5]},{id:"mind-the-gap/bridge-asset-highlight",url:"mind-the-gap/bridge-asset-highlight.png",anchor:[0,.5]},{id:"mind-the-gap/portal-flash",url:"mind-the-gap/portal-flash.png",anchor:[0,.5],pool:3},{id:"mind-the-gap/orange-portal-back-container",children:[]},{id:"mind-the-gap/green-portal-back-container",children:[]},{id:"mind-the-gap/purple-portal-back-container",children:[]},{id:"mind-the-gap/orange-portal-front-container",children:[]},{id:"mind-the-gap/green-portal-front-container",children:[]},{id:"mind-the-gap/purple-portal-front-container",children:[]},{id:"mind-the-gap/portal-pipe-back",url:"mind-the-gap/portal-back.png",anchor:[.5,.5],pool:4},{id:"mind-the-gap/portal-pipe-front",url:"mind-the-gap/portal-front.png",anchor:[.5,.5],pool:4},{id:"mind-the-gap/portal-hex-grid",url:"mind-the-gap/hex-grid.png",anchor:[.5,.5],pool:4},{id:"mind-the-gap/pink-platform",url:"mind-the-gap/pink-platform.png",anchor:[.5,.5]},{id:"mind-the-gap/orange-platform",url:"mind-the-gap/orange-platform.png",anchor:[.5,.5]},{id:"mind-the-gap/green-platform",url:"mind-the-gap/green-platform.png",anchor:[.5,.5]},{id:"mind-the-gap/pink-wall-flash",url:"mind-the-gap/pink-wall-flash.png",anchor:[0,.5]},{id:"mind-the-gap/orange-wall-flash",url:"mind-the-gap/orange-wall-flash.png",anchor:[0,.5]},{id:"mind-the-gap/green-wall-flash",url:"mind-the-gap/green-wall-flash.png",anchor:[0,.5]},{id:"mind-the-gap/portal-orange-glow",url:"mind-the-gap/orange-glow-half.png",anchor:[.5,.5],pool:2},{id:"mind-the-gap/portal-green-glow",url:"mind-the-gap/green-glow-half.png",anchor:[.5,.5],pool:2},{id:"mind-the-gap/portal-purple-glow",url:"mind-the-gap/purple-glow-half.png",anchor:[.5,.5],pool:2},{id:"mind-the-gap/portal-orange-inner",url:"mind-the-gap/orange-inner.png",anchor:[.5,.5]},{id:"mind-the-gap/portal-green-inner",url:"mind-the-gap/green-inner.png",anchor:[.5,.5]},{id:"mind-the-gap/portal-purple-inner",url:"mind-the-gap/purple-inner.png",anchor:[.5,.5]},{id:"mind-the-gap/portal-glow",url:"mind-the-gap/portal-glow.png",anchor:[.5,.5],pool:3},{id:"mind-the-gap/feather-1",url:"mind-the-gap/feather-1.png",anchor:[.5,.5],pool:15},{id:"mind-the-gap/feather-2",url:"mind-the-gap/feather-2.png",anchor:[.5,.5],pool:15},{id:"mind-the-gap/feather-container",children:[]},{id:"mind-the-gap/portal-powerup-holder-back",children:[{id:"mind-the-gap/portal-pipe-back",url:"mind-the-gap/portal-back.png",x:-75,anchor:[.5,.5]},{id:"mind-the-gap/portal-powerup-purple-inner",url:"mind-the-gap/purple-inner.png",x:25,anchor:[.5,.5]},{id:"mind-the-gap/portal-powerup-orange-inner",url:"mind-the-gap/orange-inner.png",x:25,anchor:[.5,.5]},{id:"mind-the-gap/portal-powerup-green-inner",url:"mind-the-gap/green-inner.png",x:25,anchor:[.5,.5]},{id:"mind-the-gap/powerup-portal-glow-core",url:"mind-the-gap/portal-glow.png",x:0,anchor:[.5,.5]},{id:"mind-the-gap/portal-hex-grid",url:"mind-the-gap/hex-grid.png",x:25,anchor:[.5,.5]},{id:"mind-the-gap/portal-powerup-glow-back",url:"mind-the-gap/powerup-glow-half-right.png",x:50,anchor:[.5,.5]},{id:"mind-the-gap/pink-powerup-wall-flash",url:"mind-the-gap/pink-wall-flash.png",y:10,x:100,anchor:[.5,.5]},{id:"mind-the-gap/orange-powerup-wall-flash",url:"mind-the-gap/orange-wall-flash.png",y:10,x:100,anchor:[.5,.5]},{id:"mind-the-gap/green-powerup-wall-flash",url:"mind-the-gap/green-wall-flash.png",y:10,x:100,anchor:[.5,.5]}]},{id:"mind-the-gap/portal-powerup-holder-front",children:[{id:"mind-the-gap/powerup-portal-flash",url:"mind-the-gap/portal-flash.png",anchor:[0,.5]},{id:"mind-the-gap/portal-pipe-front",url:"mind-the-gap/portal-front.png",x:-90,anchor:[.5,.5]},{id:"mind-the-gap/portal-powerup-glow-front",url:"mind-the-gap/powerup-glow-half.png",x:-2,anchor:[.5,.5]}]},{id:"mind-the-gap/chicken-temp-arrow",url:"mind-the-gap/chicken-temp-arrow.png",anchor:[.5,.5],pool:10},{id:"mind-the-gap/bridge-input-indicator",url:"mind-the-gap/bridge-input-indicator.png",anchor:[0,.5]},{id:"mind-the-gap/score-font",dir:"score-font",fontname:"hemi-white",fontdata:"score-font.xml",type:"bitmaptext",alphabet:"english"},{id:"mind-the-gap/score-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"mind-the-gap/score-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"mind-the-gap/score-holder",children:[]},{id:"mind-the-gap/rear-wall-bg",url:"mind-the-gap/rear-wall-bg.png",pool:6},{id:"mind-the-gap/barrier",url:"mind-the-gap/barrier.png",anchor:[.5,.5]},{id:"mind-the-gap/grid",url:"mind-the-gap/laser-beam.png",anchor:[.5,.5]},{id:"mind-the-gap/chicken-shadow",url:"mind-the-gap/chicken-shadow.png",anchor:[.5,.5],pool:12},{id:"mind-the-gap/bridge-anchor-light-1",url:"mind-the-gap/bridge-anchor-light-1.png",anchor:[.5,.5],pool:6},{id:"mind-the-gap/bridge-anchor-light-2",url:"mind-the-gap/bridge-anchor-light-2.png",anchor:[.5,.5],pool:6},{id:"mind-the-gap/blue-target",url:"mind-the-gap/blue-target.png",anchor:[.5,.5],pool:6},{id:"mind-the-gap/red-glow",url:"mind-the-gap/red-glow.png",anchor:[0,1]},{id:"mind-the-gap/lower-wall",url:"mind-the-gap/lower-wall.png",anchor:[0,1]},{id:"mind-the-gap/bottom-left",url:"mind-the-gap/bottom-left.png",anchor:[0,1]},{id:"mind-the-gap/bottom-right",url:"mind-the-gap/bottom-right.png",anchor:[1,1]},{id:"mind-the-gap/henry-floor",url:"mind-the-gap/henry-floor.png",anchor:[.5,.5]},{id:"chicken-ui",children:[],pool:12},{id:"mind-the-gap/ui-orange",url:"mind-the-gap/orange-target.png",anchor:[.5,.5],pool:12},{id:"mind-the-gap/ui-pink",url:"mind-the-gap/pink-target.png",anchor:[.5,.5],pool:12},{id:"mind-the-gap/ui-green",url:"mind-the-gap/green-target.png",anchor:[.5,.5],pool:12},{id:"mind-the-gap/henry-container",children:[]},{id:"mind-the-gap/portal-particle-container",children:[],pool:3},{id:"mind-the-gap/powerup-portal-particle-container",children:[]},{id:"mind-the-gap/orange-particle",url:"mind-the-gap/orange-particle.png",anchor:[1,.5],pool:33},{id:"mind-the-gap/green-particle",url:"mind-the-gap/green-particle.png",anchor:[1,.5],pool:33},{id:"mind-the-gap/pink-particle",url:"mind-the-gap/pink-particle.png",anchor:[1,.5],pool:33},{id:"mind-the-gap/henry-body",url:"mind-the-gap/henry-body.png",anchor:[.5,1]},{id:"mind-the-gap/henry-arm-holder-left",children:[]},{id:"mind-the-gap/henry-arm-holder-right",children:[]},{id:"mind-the-gap/henry-arm-left",url:"mind-the-gap/henry-arm-left.png",anchor:[.9,.5]},{id:"mind-the-gap/henry-arm-right",url:"mind-the-gap/henry-arm-right.png",anchor:[.1,.5]},{id:"mind-the-gap/henry-head-holder",children:[]},{id:"mind-the-gap/henry-head-0",url:"mind-the-gap/henry-head-0.png",anchor:[.5,.5]},{id:"mind-the-gap/henry-head-blink",url:"mind-the-gap/henry-head-blink.png",anchor:[.5,.5]},{id:"mind-the-gap/henry-head-eyes",url:"mind-the-gap/henry-head-eyes.png",anchor:[.5,.5]},{id:"mind-the-gap/henry-hat",url:"mind-the-gap/henry-hat.png",anchor:[.5,.5]},{id:"mind-the-gap/henry-neutral",url:"mind-the-gap/henry-neutral.png",anchor:[.5,.5]},{id:"mind-the-gap/henry-gritted",url:"mind-the-gap/henry-gritted.png",anchor:[.5,.5]},{id:"mind-the-gap/henry-shocked",url:"mind-the-gap/henry-shocked.png",anchor:[.5,.5]},{id:"mind-the-gap/henry-happy",url:"mind-the-gap/henry-happy.png",anchor:[.5,.5]},{id:"mind-the-gap/score-bg-element",url:"mind-the-gap/score-bg-element.png",anchor:[.5,.5]},{id:"mind-the-gap/holo-filter",url:"mind-the-gap/holo-filter.png",anchor:[.5,.5]},{id:"mind-the-gap/scene-bg-panel",url:"mind-the-gap/bg-panel.png",anchor:[1,0],pool:2},{id:"mind-the-gap/beam-highlight",url:"mind-the-gap/beam-highlight.png",anchor:[1,.5],pool:2},{id:"mind-the-gap/hand-beam",url:"mind-the-gap/hand-beam.png",anchor:[1,.5],pool:2},{id:"mind-the-gap/hand-beam-extention",url:"mind-the-gap/hand-beam-extention.png",anchor:[1,.5],pool:2},{id:"mind-the-gap/left-hand-particles",children:[]},{id:"mind-the-gap/right-hand-particles",children:[]},{id:"mind-the-gap/beam-particle-1",url:"mind-the-gap/beam-particle-1.png",anchor:[.5,.5],pool:12},{id:"mind-the-gap/beam-particle-2",url:"mind-the-gap/beam-particle-2.png",anchor:[.5,.5],pool:12},{id:"mind-the-gap/beam-particle-3",url:"mind-the-gap/beam-particle-3.png",anchor:[.5,.5],pool:12},{id:"mind-the-gap/chicken-walking-orange",anchor:[.5,.5],type:"spritesheet",dir:"mind-the-gap/chicken-walking-orange",atlas:"chicken-orange-walking-frames.json",pool:12},{id:"mind-the-gap/chicken-walking-green",anchor:[.5,.5],type:"spritesheet",dir:"mind-the-gap/chicken-walking-green",atlas:"chicken-green-walking-frames.json",pool:12},{id:"mind-the-gap/chicken-walking-purple",anchor:[.5,.5],type:"spritesheet",dir:"mind-the-gap/chicken-walking-purple",atlas:"chicken-purple-walking-frames.json",pool:12},{id:"mind-the-gap/chicken-falling-purple",anchor:[.5,.5],type:"spritesheet",dir:"mind-the-gap/chicken-falling-pink",atlas:"chicken-falling-purple.json",pool:12},{id:"mind-the-gap/chicken-falling-green",anchor:[.5,.5],type:"spritesheet",dir:"mind-the-gap/chicken-falling-green",atlas:"chicken-falling-green.json",pool:12},{id:"mind-the-gap/chicken-falling-orange",anchor:[.5,.5],type:"spritesheet",dir:"mind-the-gap/chicken-falling-orange",atlas:"chicken-falling-orange.json",pool:12},{id:"mind-the-gap/chicken-turning-purple",anchor:[.5,.5],type:"spritesheet",dir:"mind-the-gap/chicken-turn-purple",atlas:"chicken-turning-purple.json",pool:12},{id:"mind-the-gap/chicken-turning-green",anchor:[.5,.5],type:"spritesheet",dir:"mind-the-gap/chicken-turn-green",atlas:"chicken-turning-green.json",pool:12},{id:"mind-the-gap/chicken-turning-orange",anchor:[.5,.5],type:"spritesheet",dir:"mind-the-gap/chicken-turn-orange",atlas:"chicken-turning-orange.json",pool:12},{id:"mind-the-gap/red-overlay",url:"mind-the-gap/red-overlay.png",retina:!1,anchor:[.5,.5]},{id:"mind-the-gap/landing-purple-particle",url:"mind-the-gap/landing-purple-particle.png",retina:!1,anchor:[.5,.5],pool:15},{id:"mind-the-gap/landing-green-particle",url:"mind-the-gap/landing-green-particle.png",retina:!1,anchor:[.5,.5],pool:15},{id:"mind-the-gap/landing-particle-container",children:[]},{id:"mind-the-gap/landing-powerup-particle-container",children:[]},{id:"mind-the-gap/alarm-light",anchor:[.5,1],children:[{id:"mind-the-gap/light-base",url:"mind-the-gap/light-base.png",anchor:[.5,.5]},{id:"mind-the-gap/light-core",url:"mind-the-gap/light-core.png",anchor:[.5,.5]},{id:"mind-the-gap/light-glow-left",url:"mind-the-gap/light-glow.png",anchor:[.5,.5]},{id:"mind-the-gap/light-glow-right",url:"mind-the-gap/light-glow.png",anchor:[.5,.5]},{id:"mind-the-gap/light-outer",url:"mind-the-gap/light-outer.png",anchor:[.5,.5]},{id:"mind-the-gap/light-shell-on",url:"mind-the-gap/light-shell-on.png",anchor:[.5,.5]},{id:"mind-the-gap/light-shell-off",url:"mind-the-gap/light-shell-off.png",anchor:[.5,.5]}],pool:2},{id:"mind-the-gap/electric-frames",anchor:[.5,.5],type:"spritesheet",dir:"mind-the-gap/electric-frames",atlas:"electric-frames.json",pool:11},{id:"mind-the-gap/portal-error",url:"mind-the-gap/portal-error.png",anchor:[.5,.5],pool:3},{id:"mind-the-gap/laser-frames",pool:13,anchor:[.5,.5],type:"spritesheet",dir:"mind-the-gap/laser-frames",atlas:"laser-frames.json"}],"photon-fusion-tutorial-assets":[{id:"tutorial/title-font",dir:"score-font",fontname:"hemi-white",fontdata:"score-font.xml",type:"bitmaptext",pool:3,alphabet:"english"},{id:"tutorial/title-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"photon-fusion-controls",url:"photon-fusion/photon-controls-touch.png",x:35,y:10,anchor:[.5,.5],platformspecific:"mobile"},{id:"photon-fusion-controls",url:"photon-fusion/photon-controls.png",x:35,y:10,anchor:[.5,.5],platformspecific:"desktop"}]},{id:"tutorial-frame-howtoplay",children:[{id:"photon-how-to-play",url:"photon-fusion/photon-how-to.png",x:10,y:10,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"photon-fusion-power-up",url:"photon-fusion/photon-powerup.png",x:10,y:30,anchor:[.5,.5]}]}],"photon-fusion-assets":[{id:"photon-fusion/main-holder",children:[]},{id:"photon-fusion/blank-input",url:"photon-fusion/blank-input.png"},{id:"photon-fusion/wall-element",url:"photon-fusion/wall-element.png",pool:4},{id:"photon-fusion/photon-holder",children:[],pool:45},{id:"photon-fusion/photon-decay-timer-holder",children:[],pool:45},{id:"photon-fusion/photon-decay-timer-dot",url:"photon-fusion/photon-decay-timer-dot.png",anchor:[.5,.5],pool:1e3},{id:"photon-fusion/photon-red-small",url:"photon-fusion/photon-red-small.png",anchor:[.5,.5],pool:5},{id:"photon-fusion/photon-red-medium",url:"photon-fusion/photon-red-medium.png",anchor:[.5,.5],pool:5},{id:"photon-fusion/photon-red-large",url:"photon-fusion/photon-red-large.png",anchor:[.5,.5],pool:5},{id:"photon-fusion/photon-blue-small",url:"photon-fusion/photon-blue-small.png",anchor:[.5,.5],pool:5},{id:"photon-fusion/photon-blue-medium",url:"photon-fusion/photon-blue-medium.png",anchor:[.5,.5],pool:5},{id:"photon-fusion/photon-blue-large",url:"photon-fusion/photon-blue-large.png",anchor:[.5,.5],pool:5},{id:"photon-fusion/photon-pink-small",url:"photon-fusion/photon-pink-small.png",anchor:[.5,.5],pool:15},{id:"photon-fusion/photon-pink-medium",url:"photon-fusion/photon-pink-medium.png",anchor:[.5,.5],pool:15},{id:"photon-fusion/photon-pink-large",url:"photon-fusion/photon-pink-large.png",anchor:[.5,.5],pool:15},{id:"photon-fusion/red-warning",url:"photon-fusion/red-warning.png",anchor:[.5,.5]},{id:"photon-fusion/dot-20",url:"photon-fusion/dots/dot-20.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-19",url:"photon-fusion/dots/dot-19.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-18",url:"photon-fusion/dots/dot-18.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-17",url:"photon-fusion/dots/dot-17.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-16",url:"photon-fusion/dots/dot-16.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-15",url:"photon-fusion/dots/dot-15.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-14",url:"photon-fusion/dots/dot-14.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-13",url:"photon-fusion/dots/dot-13.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-12",url:"photon-fusion/dots/dot-12.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-11",url:"photon-fusion/dots/dot-11.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-10",url:"photon-fusion/dots/dot-10.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-9",url:"photon-fusion/dots/dot-9.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-8",url:"photon-fusion/dots/dot-8.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-7",url:"photon-fusion/dots/dot-7.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-6",url:"photon-fusion/dots/dot-6.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-5",url:"photon-fusion/dots/dot-5.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-4",url:"photon-fusion/dots/dot-4.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-3",url:"photon-fusion/dots/dot-3.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-2",url:"photon-fusion/dots/dot-2.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-1",url:"photon-fusion/dots/dot-1.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/dot-0",url:"photon-fusion/dots/dot-0.png",anchor:[.5,.5],pool:50},{id:"photon-fusion/photon-yellow-small",url:"photon-fusion/photon-yellow-small.png",anchor:[.5,.5],pool:5},{id:"photon-fusion/photon-yellow-medium",url:"photon-fusion/photon-yellow-medium.png",anchor:[.5,.5],pool:5},{id:"photon-fusion/photon-yellow-large",url:"photon-fusion/photon-yellow-large.png",anchor:[.5,.5],pool:5},{id:"photon-fusion/input-radius",url:"photon-fusion/input-radius.png",anchor:[.5,.5]},{id:"photon-fusion/angle-indicator",url:"photon-fusion/angle-indicator.png",anchor:[0,.5],pool:45},{id:"photon-fusion/indicator-power-circle",url:"photon-fusion/indicator-power-circle.png",anchor:[.5,.5]},{id:"photon-fusion/join-particle",url:"photon-fusion/join-particle.png",anchor:[.5,.5],pool:60},{id:"photon-fusion/dm-filter-ripple",url:"photon-fusion/dm-filter-ripple.png",anchor:[.5,.5]},{id:"photon-fusion/score-font",dir:"score-font",fontname:"hemi-white",fontdata:"score-font.xml",type:"bitmaptext",alphabet:"english"},{id:"photon-fusion/score-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"latin"},{id:"photon-fusion/score-font",dir:"score-font-latin-and-cyrillic",fontname:"coder-white",fontdata:"score-font-latin-and-cyrillic.xml",type:"bitmaptext",alphabet:"greek"},{id:"photon-fusion/score-holder",children:[]},{id:"photon-fusion/score-bg-element",url:"photon-fusion/score-bg-element.png",anchor:[.5,.5]},{id:"photon-fusion/indicator-1",url:"photon-fusion/indicator-1.png",anchor:[.5,.5]},{id:"photon-fusion/indicator-2",url:"photon-fusion/indicator-2.png",anchor:[.5,.5]},{id:"photon-fusion/indicator-3",url:"photon-fusion/indicator-3.png",anchor:[.5,.5]},{id:"photon-fusion/back-glow",url:"photon-fusion/back-glow.png",anchor:[.5,.5],retina:!1},{id:"photon-fusion/inner-glow",url:"photon-fusion/inner-glow.png",anchor:[.5,0],pool:4,retina:!1},{id:"photon-fusion/frame-glow",url:"photon-fusion/frame-glow.png",anchor:[.5,0],pool:4},{id:"photon-fusion/frame",url:"photon-fusion/frame.png",anchor:[.5,0],pool:4},{id:"photon-fusion/shine",url:"photon-fusion/shine.png",anchor:[.5,.5],pool:10},{id:"photon-fusion/con-circle",url:"photon-fusion/con-circle.png",anchor:[.5,.5],pool:30},{id:"photon-fusion/background-tile-1",url:"photon-fusion/background-tile-1.png",anchor:[0,0],pool:2,retina:!1},{id:"photon-fusion/background-tile-2",url:"photon-fusion/background-tile-2.png",anchor:[0,0],pool:2,retina:!1},{id:"photon-fusion/glass-texture",url:"photon-fusion/glass-texture.png",anchor:[0,.5],pool:2},{id:"photon-fusion/glass-glint",url:"photon-fusion/glass-glint.png",anchor:[.5,.5],pool:4,retina:!1},{id:"photon-fusion/corner-bolt",url:"photon-fusion/corner-bolt.png",anchor:[.5,.5],pool:4},{id:"photon-fusion/black-overlay",url:"photon-fusion/black-overlay.png",anchor:[.5,.5],retina:!1},{id:"photon-fusion/henry-bg-holder",children:[{id:"photon-fusion/henry-arm-base-left",url:"photon-fusion/henry-arm-base-left.png",anchor:[.75,.08]},{id:"photon-fusion/henry-arm-base-left-lightmap",url:"photon-fusion/henry-arm-base-left-lightmap.png",anchor:[.75,.08]},{id:"photon-fusion/henry-arm-base-right",url:"photon-fusion/henry-arm-base-right.png",anchor:[.25,.08]},{id:"photon-fusion/henry-arm-base-right-lightmap",url:"photon-fusion/henry-arm-base-right-lightmap.png",anchor:[.25,.08]},{id:"photon-fusion/henry-body",url:"photon-fusion/henry-body.png",anchor:[.5,1]},{id:"photon-fusion/henry-body-lightmap",url:"photon-fusion/henry-body-lightmap.png",anchor:[.5,1]},{id:"photon-fusion/henry-head-container",children:[{id:"photon-fusion/henry-head",url:"photon-fusion/henry-head.png",anchor:[.5,.5]},{id:"photon-fusion/henry-eyes",url:"photon-fusion/henry-eyes.png",anchor:[.5,.5]},{id:"photon-fusion/henry-happy",url:"photon-fusion/henry-happy.png",anchor:[.5,.5]},{id:"photon-fusion/henry-neutral",url:"photon-fusion/henry-neutral.png",anchor:[.5,.5]},{id:"photon-fusion/henry-sad",url:"photon-fusion/henry-sad.png",anchor:[.5,.5]},{id:"photon-fusion/henry-shocked",url:"photon-fusion/henry-shocked.png",anchor:[.5,.5]},{id:"photon-fusion/henry-head-blink",url:"photon-fusion/henry-head-blink.png",anchor:[.5,.5]},{id:"photon-fusion/henry-head-lightmap",url:"photon-fusion/henry-head-lightmap.png",anchor:[.5,.5]}]}]},{id:"photon-fusion/henry-bg-arm-left-holder",children:[]},{id:"photon-fusion/henry-bg-arm-right-holder",children:[]},{id:"photon-fusion/henry-bg",url:"photon-fusion/henry-bg.png",anchor:[.5,1]},{id:"photon-fusion/henry-arm-left",url:"photon-fusion/henry-arm-left.png",anchor:[.75,.08]},{id:"photon-fusion/henry-arm-left-lightmap",url:"photon-fusion/henry-arm-left-lightmap.png",anchor:[.75,.08]},{id:"photon-fusion/henry-arm-right",url:"photon-fusion/henry-arm-right.png",anchor:[.25,.08]},{id:"photon-fusion/henry-arm-right-lightmap",url:"photon-fusion/henry-arm-right-lightmap.png",anchor:[.25,.08]}]},audioAssets={"global-audio":[{url:"button-click-ui"},{url:"enjoy-the-ride-swoosh"},{url:"swoosh-8"}],"hub-audio":[{url:"hub/man-cave",loop:!0},{url:"hub/computer-effects"},{url:"hub/computer-scan"},{url:"hub/computer-shutdown"},{url:"hub/hologram-startup"},{url:"hub/hologram-shutdown"},{url:"hub/man-talk"},{url:"hub/scanning"},{url:"hub/si-fi-sound"},{url:"hub/group-wow",loc:!0},{url:"hub/henry-sounds-fun",loc:!0},{url:"hub/henry-word-test",loc:!0},{url:"hub/jasper-ooo",loc:!0},{url:"hub/swoosh-1"}],"come-out-swinging-audio":[{url:"come-out-swinging/laser-shoot-1"},{url:"come-out-swinging/laser-shoot-2"},{url:"come-out-swinging/deep-laser"},{url:"come-out-swinging/warning"},{url:"come-out-swinging/zap"},{url:"come-out-swinging/scanning"},{url:"come-out-swinging/smash-vent-1"},{url:"come-out-swinging/smash-vent-2"},{url:"come-out-swinging/smash-vent-3"},{url:"come-out-swinging/smash-vent-4"},{url:"come-out-swinging/vent-hit-1"},{url:"come-out-swinging/vent-hit-2"},{url:"come-out-swinging/vent-hit-3"},{url:"come-out-swinging/vent-hit-4"},{url:"come-out-swinging/metal-bang-1"},{url:"come-out-swinging/metal-bang-2"},{url:"come-out-swinging/rocket-1"},{url:"come-out-swinging/rocket-2"},{url:"come-out-swinging/punch-1"},{url:"come-out-swinging/punch-2"},{url:"come-out-swinging/swoosh-1"},{url:"come-out-swinging/swoosh-2"},{url:"come-out-swinging/swoosh-3"},{url:"come-out-swinging/swoosh-4"},{url:"come-out-swinging/dance",loop:!0},{url:"come-out-swinging/hero-music-intro"},{url:"come-out-swinging/hero-music-loop",loop:!0},{url:"come-out-swinging/grapple-impact-1"},{url:"come-out-swinging/grapple-impact-2"},{url:"come-out-swinging/grapple-impact-3"},{url:"come-out-swinging/shield-loop",loop:!0},{url:"come-out-swinging/shield-engage"},{url:"come-out-swinging/shield-lose"},{url:"come-out-swinging/shield-impact"},{url:"come-out-swinging/shine"},{url:"come-out-swinging/henry-er",loc:!0},{url:"come-out-swinging/henry-i-get-it",loc:!0},{url:"come-out-swinging/henry-feels-good",loc:!0},{url:"come-out-swinging/henry-hurt-1",loc:!0},{url:"come-out-swinging/henry-hurt-2",loc:!0},{url:"come-out-swinging/henry-hurt-3",loc:!0},{url:"come-out-swinging/henry-hurt-4",loc:!0},{url:"come-out-swinging/henry-yeahh",loc:!0},{url:"come-out-swinging/henry-shocked",loc:!0},{url:"come-out-swinging/charlotte-thats-insane",loc:!0},{url:"come-out-swinging/jasper-girls-hate-when-i-speak",loc:!0},{url:"come-out-swinging/cpt-man-dont-fret",loc:!0},{url:"come-out-swinging/cpt-man-go-for-it",loc:!0},{url:"come-out-swinging/cpt-man-keep-on-playing",loc:!0},{url:"come-out-swinging/cpt-man-my-god-this-game",loc:!0},{url:"come-out-swinging/cpt-man-wontons",loc:!0}],"photon-fusion-audio":[{url:"photon-fusion/background-music-2",loop:!0},{url:"photon-fusion/man-cave",loop:!0},{url:"photon-fusion/thud-1"},{url:"photon-fusion/thud-2"},{url:"photon-fusion/laser1"},{url:"photon-fusion/laser2"},{url:"photon-fusion/laser3"},{url:"photon-fusion/laser-beam"},{url:"photon-fusion/interact-1"},{url:"photon-fusion/interact-2"},{url:"photon-fusion/interact-3"},{url:"photon-fusion/phaserdown1"},{url:"photon-fusion/phaserdown2"},{url:"photon-fusion/phaserdown3"},{url:"photon-fusion/phaserup1"},{url:"photon-fusion/phaserup2"},{url:"photon-fusion/phaserup3"},{url:"photon-fusion/touch-start"},{url:"photon-fusion/loop-touch",loop:!0},{url:"photon-fusion/warning",loop:!0},{url:"photon-fusion/henry-er",loc:!0},{url:"photon-fusion/henry-feels-good",loc:!0},{url:"photon-fusion/henry-shocked",loc:!0},{url:"photon-fusion/henry-yeahh",loc:!0},{url:"photon-fusion/cpt-man-go-for-it",loc:!0}],"mind-the-gap-audio":[{url:"mind-the-gap/background-music-2",loop:!0},{url:"mind-the-gap/chicken-cluck-1"},{url:"mind-the-gap/chicken-cluck-2"},{url:"mind-the-gap/chicken-cluck-3"},{url:"mind-the-gap/chicken-cluck-4"},{url:"mind-the-gap/chicken-cluck-5"},{url:"mind-the-gap/chicken-cry"},{url:"mind-the-gap/chicken-supprise"},{url:"mind-the-gap/bird-flap"},{url:"mind-the-gap/flicker-high"},{url:"mind-the-gap/land-2"},{url:"mind-the-gap/land"},{url:"mind-the-gap/mechanical"},{url:"mind-the-gap/man-cave",loop:!0},{url:"mind-the-gap/teleport-high"},{url:"mind-the-gap/laser-beam"},{url:"mind-the-gap/teleport-low"},{url:"mind-the-gap/buzz-1"},{url:"mind-the-gap/buzz-2"},{url:"mind-the-gap/warning"},{url:"mind-the-gap/zap"},{url:"mind-the-gap/laser-data"},{url:"mind-the-gap/step-1"},{url:"mind-the-gap/step-2"},{url:"mind-the-gap/step-3"},{url:"mind-the-gap/bridge-on"},{url:"mind-the-gap/bridge-off"},{url:"mind-the-gap/blip-1"},{url:"mind-the-gap/blip-2"},{url:"mind-the-gap/blip-3"},{url:"mind-the-gap/beam-connect"},{url:"mind-the-gap/hero-music-loop",loop:!0},{url:"mind-the-gap/hero-music-intro"},{url:"mind-the-gap/chicken-supprise"},{url:"mind-the-gap/alarm-sound",loop:!0},{url:"mind-the-gap/henry-feels-good",loc:!0},{url:"mind-the-gap/henry-yeahh",loc:!0},{url:"mind-the-gap/henry-0-help",loc:!0}],"baddie-barrage-audio":[{url:"baddie-barrage/dance",loop:!0},{url:"baddie-barrage/tick-up"},{url:"baddie-barrage/shield-loop",loop:!0},{url:"baddie-barrage/shield-engage"},{url:"baddie-barrage/shield-lose"},{url:"baddie-barrage/shield-impact"},{url:"baddie-barrage/hero-music-loop",loop:!0},{url:"baddie-barrage/punch-1"},{url:"baddie-barrage/punch-2"},{url:"baddie-barrage/punch-3"},{url:"baddie-barrage/punch-4"},{url:"baddie-barrage/punch-5"},{url:"baddie-barrage/punch-6"},{url:"baddie-barrage/punch-7"},{url:"baddie-barrage/punch-8"},{url:"baddie-barrage/punch-9"},{url:"baddie-barrage/baddie-pain-1"},{url:"baddie-barrage/baddie-pain-2"},{url:"baddie-barrage/baddie-pain-3"},{url:"baddie-barrage/baddie-pain-4"},{url:"baddie-barrage/baddie-pain-5"},{url:"baddie-barrage/baddie-pain-6"},{url:"baddie-barrage/baddie-pain-big-1"},{url:"baddie-barrage/baddie-pain-big-2"},{url:"baddie-barrage/baddie-pain-big-3"},{url:"baddie-barrage/baddie-pain-big-4"},{url:"baddie-barrage/baddie-pain-big-5"},{url:"baddie-barrage/baddie-attack-1"},{url:"baddie-barrage/baddie-attack-2"},{url:"baddie-barrage/baddie-attack-3"},{url:"baddie-barrage/baddie-attack-4"},{url:"baddie-barrage/baddie-attack-5"},{url:"baddie-barrage/baddie-attack-6"},{url:"baddie-barrage/swipe-1"},{url:"baddie-barrage/swipe-2"},{url:"baddie-barrage/swipe-3"},{url:"baddie-barrage/swipe-4"},{url:"baddie-barrage/swipe-5"},{url:"baddie-barrage/swipe-6"},{url:"baddie-barrage/swipe-7"},{url:"baddie-barrage/marker-hit"},{url:"baddie-barrage/miss"},{url:"baddie-barrage/shine"},{url:"baddie-barrage/critical-hit"},{url:"baddie-barrage/beam-in"},{url:"baddie-barrage/henry-hurt-1",loc:!0},{url:"baddie-barrage/henry-hurt-2",loc:!0},{url:"baddie-barrage/henry-hurt-3",loc:!0},{url:"baddie-barrage/henry-hurt-4",loc:!0},{url:"baddie-barrage/henry-attack-1",loc:!0},{url:"baddie-barrage/henry-attack-2",loc:!0},{url:"baddie-barrage/henry-attack-3",loc:!0},{url:"baddie-barrage/henry-yeahh",loc:!0},{url:"baddie-barrage/henry-er",loc:!0},{url:"baddie-barrage/henry-i-get-it",loc:!0},{url:"baddie-barrage/wind-up-3"},{url:"baddie-barrage/wind-up-4"},{url:"baddie-barrage/cpt-man-go-for-it",loc:!0}],"game-over-audio":[{url:"game-over/tick-up"},{url:"game-over/swish-long-1"},{url:"game-over/swish-long-2"},{url:"game-over/swish-long-3"},{url:"game-over/thud"},{url:"game-over/shine-1"},{url:"game-over/shine-2"},{url:"game-over/shine-3"},{url:"game-over/captain-man-0-playing",loc:!0},{url:"game-over/captain-man-1-go",loc:!0},{url:"game-over/captain-man-2-right",loc:!0},{url:"game-over/captain-man-3-hair",loc:!0},{url:"game-over/henry-0-help",loc:!0},{url:"game-over/henry-0-what",loc:!0},{url:"game-over/henry-1-go",loc:!0},{url:"game-over/henry-2-yeahh",loc:!0},{url:"game-over/henry-3-good",loc:!0}]},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Scene=function(t){function e(e){t.call(this),this.tweens=new Array,this.render=!1,this.game=e,this.interactive=!0,this.container=new DisplayObjectContainer,this.addChild(this.container),this.container.interactive=!0,this.paused=!1,this.interactionLocked=!0,this.keyDownIDs=[]}return __extends(e,t),e.prototype.rotatePause=function(){this.pausedRotated=!0},e.prototype.pause=function(t){0!=this.game.initLoaded&&(this.game.ui.pause(),this.game.powerUpManager.pause(),1!=this.transitioning&&1!=this.interactionLocked&&1!=this.paused&&(this.paused=!0,this.game.ui.setUI("pause"),this.transitioning=!1,this.interactionLocked=!0,this.pauseContainer=Game.displayStore.getContainer("pause-screen-overlay-container"),this.pauseOverlayBG=this.pauseContainer.getSprite("pause-overlay"),this.pauseOverlayBG.alpha=.75,this.pauseOverlayBG.width=Game.stageWidth,this.pauseOverlayBG.height=Game.stageHeight,this.pauseTitle=Game.displayStore.getBitmapText("global/pause-font"),Game.stringsManager.setTextString(this.pauseTitle,"paused"),this.pauseTitle.position.x=Game.stageWidth/2-this.pauseTitle.width/2+Game.stringsManager.getTextOffset("paused").xOffset,this.pauseTitle.position.y=0+Game.stringsManager.getTextOffset("paused").yOffset,this.pauseScreenHolder=Game.displayStore.getContainer("pause/screen-holder"),this.pauseScreenHolder.position.x=Game.stageWidth/2,this.pauseScreenHolder.position.y=Game.stageHeight/2-10,this.pauseScreenHolder.scale.x=.95,this.pauseScreenHolder.scale.y=.95,this.pauseScreenHolder.alpha=0,this.pauseScreenFrame=Game.displayStore.getSprite("pause/screen-frame"),this.pauseScreenBlack1=Game.displayStore.getSprite("pause/screen-black"),this.pauseScreenBlack2=Game.displayStore.getSprite("pause/screen-black"),this.pauseScreenBlack2.scale.x=-1,this.pauseScreenPattern=Game.displayStore.getSprite("pause/screen-pattern"),this.pauseScreenPattern.scale.x=.75,this.pauseScreenPattern.scale.y=.75,this.pauseScreenShadow1=Game.displayStore.getSprite("pause/screen-shadow"),this.pauseScreenShadow2=Game.displayStore.getSprite("pause/screen-shadow"),this.pauseScreenShadow2.scale.x=-1,this.pauseScreenTable=Game.displayStore.getSprite("pause/table"),this.pauseScreenTable.position.x=Game.stageWidth/2,this.pauseScreenTable.position.y=Game.stageHeight-33,this.pauseBgBarsHolder=Game.displayStore.getContainer("pause/bg-bars-holder"),this.pauseBgBars1=Game.displayStore.getSprite("pause/bg-bars"),this.pauseBgBars2=Game.displayStore.getSprite("pause/bg-bars"),this.pauseBgBars2.scale.x=-1,this.pauseBgBarsHolder.addChild(this.pauseBgBars1),this.pauseBgBarsHolder.addChild(this.pauseBgBars2),this.pauseBgBarsHolder.position.x=Game.stageWidth/2,this.pauseBgBarsHolder.position.y=Game.stageHeight/2,this.pauseBgBarsHolder.alpha=.3,this.pauseScreenHolder.addChild(this.pauseScreenFrame),this.pauseScreenHolder.addChild(this.pauseScreenBlack1),this.pauseScreenHolder.addChild(this.pauseScreenBlack2),this.pauseScreenHolder.addChild(this.pauseScreenPattern),this.pauseScreenHolder.addChild(this.pauseScreenShadow1),this.pauseScreenHolder.addChild(this.pauseScreenShadow2),this.pauseContainer.addChild(this.pauseBgBarsHolder),this.pauseContainer.addChild(this.pauseScreenHolder),this.pauseContainer.addChild(this.pauseScreenTable),this.pauseContainer.addChild(this.pauseTitle),this.container.addChild(this.pauseContainer),this.pauseResumeTween(this.transitionTween,"pause"),this.pauseTimeline&&this.pauseTimeline.kill(),this.pauseTimeline=new TimelineMax,this.pauseTimeline.add([TweenMax.from(this.pauseBgBarsHolder,200,{rotation:2*Math.PI,ease:Power0.easeInOut,repeat:-1}),TweenMax.from(this.pauseBgBarsHolder.scale,.35,{x:2,y:2,ease:Back.easeOut}),TweenMax.from(this.pauseScreenHolder.position,.3,{y:Game.stageHeight/2+10,ease:Power1.easeInOut}),TweenMax.from(this.pauseScreenHolder.scale,.35,{x:2,y:2,ease:Back.easeOut}),TweenMax.to(this.pauseScreenHolder,.1,{alpha:1,ease:Power0.easeInOut}),TweenMax.from(this.pauseScreenTable.position,.35,{y:Game.stageHeight+70,ease:Power1.easeInOut}),TweenMax.from(this.pauseScreenTable.scale,.35,{x:1.2,y:1.2,ease:Back.easeOut}),TweenMax.to(this.pauseScreenPattern,.1,{alpha:.3,yoyo:!0,repeat:3,ease:Power0.easeInOut})],0),this.interactionLocked=!1))},e.prototype.unlockInput=function(t){t.interactionLocked=!1},e.prototype.resume=function(){0!=this.game.initLoaded&&(this.game.ui.resume(),this.game.powerUpManager.resume(),this.removePauseElements())},e.prototype.removePauseElements=function(){this.pauseContainer&&(this.container.removeChild(this.pauseContainer),Game.displayStore.returnPooledItem(this.pauseBgBars1),Game.displayStore.returnPooledItem(this.pauseBgBars2),Game.displayStore.returnPooledItem(this.pauseScreenBlack1),Game.displayStore.returnPooledItem(this.pauseScreenBlack2),Game.displayStore.returnPooledItem(this.pauseScreenShadow1),Game.displayStore.returnPooledItem(this.pauseScreenShadow2),this.pauseContainer.removeChild(this.pausedTitle)),this.pauseTimeline=this.killTween(this.pauseTimeline),this.pauseOverlayBG=null,this.pausedRotated=!1,this.paused=!1,this.pauseResumeTween(this.transitionTween,"resume")},e.prototype.restore=function(){this.interactionLocked=!1},e.prototype.destroy=function(){this.interactionLocked=!0;for(var t=this.container.children.length-1;t>=0;t--)this.container.removeChild(this.container.getChildAt(t));this.tweens=[],this.uiContainerRef=null,this.uiMessageContainerRef=null,this.game.powerUpManager.sceneDestroy(this.id),this.game.ui.sceneDestroy(),Game.saveProgress(),this.pauseTimeline=this.killTween(this.pauseTimeline)},e.prototype.init=function(t){this.paused=!1,this.setBackgroundColor(16777215)},e.prototype.setBackgroundColor=function(t){Game.renderer.backgroundColor=t},e.prototype.addUI=function(t,e){t&&(this.addChild(e),this.addChild(t),this.uiMessageContainerRef=e,this.uiContainerRef=t)},e.prototype.uiClicked=function(t){if("soundonbutton"!=t.id&&"soundoffbutton"!=t.id||this.game.ui.soundToggled(),"help-button"==t.id){if(1==this.interactionLocked)return;this.interactionLocked=!0,this.game.setScene("helpScene",!1)}if("powerup-button"==t.id&&this.game.powerUpManager.activatePowerUp(),"home-button"==t.id){if(1==this.interactionLocked)return;this.interactionLocked=!0,this.paused=!1;var e=this;Game.assetChunkManager.generateLoadChunkParams("hub"),this.game.loadAssets(Game.assetChunkManager.getLoadAssets(),!0,function(){e.removePauseElements(),e.game.setScene(Game.assetChunkManager.getTargetInitialScene(),!0,[!0])})}},e.prototype.tutorialOverlayClosed=function(){},e.prototype.secondChanceUse=function(){},e.prototype.uiRolledOver=function(t){},e.prototype.uiRolledOut=function(t){},e.prototype.downOnUI=function(t){},e.prototype.upOnUI=function(t){},e.prototype.keyDown=function(t){for(var e=0;e<this.keyDownIDs.length;e++)if(this.keyDownIDs[e]==t)return;this.keyDownIDs.push(t)},e.prototype.keyUp=function(t){"x"==t&&this.game.powerUpManager.activatePowerUp();for(var e=0;e<this.keyDownIDs.length;e++)this.keyDownIDs[e]==t&&this.keyDownIDs.splice(this.keyDownIDs.indexOf(t),1)},e.prototype.activatePowerUpEffect=function(){},e.prototype.deactivatePowerUpEffect=function(){},e.prototype.rolloutCustomButtonKeyboard=function(t){},e.prototype.rolloverCustomButtonKeyboard=function(t){},e.prototype.selectCustomButtonKeyboard=function(t){},e.prototype.tick=function(){0!=this.game.initLoaded&&0==this.interactive&&(this.interactive=!0)},e.prototype.resize=function(t){this.container.scale.x=t,this.container.scale.y=t},e.prototype.initTransitionOut=function(t){if(0==this.game.initLoaded)return this.interactionLocked=!1,void(this.transitioning=!1);this.transitioning=!0,this.interactionLocked=!0,this.setUpTransition(),this.transitionMask.scale.x=this.transitionMask.scale.y=1.2,this.transitionTween=TweenMax.to(this.transitionMask.scale,t,{x:.001,y:.001,ease:Expo.easeOut,onUpdate:this.updateTransition,onUpdateParams:[this]})},e.prototype.initTransitionIn=function(t){if(0==this.game.initLoaded)return this.interactionLocked=!1,void(this.transitioning=!1);this.transitioning=!0,this.interactionLocked=!0,this.setUpTransition(),this.transitionMask.scale.x=this.transitionMask.scale.y=.001,this.transitionTween=TweenMax.to(this.transitionMask.scale,t,{x:1.2,y:1.2,ease:Expo.easeIn,onComplete:this.killTransitionAssets,onCompleteParams:[this],onUpdate:this.updateTransition,onUpdateParams:[this]})},e.prototype.updateTransition=function(t){t.transitionMask.width<Game.stageWidth&&(t.transitionBarLeft.width=(Game.stageWidth-t.transitionMask.width)/2,t.transitionBarRight.width=t.transitionBarLeft.width,t.transitionBarRight.position.x=t.transitionBarLeft.width+t.transitionMask.width),t.transitionMask.height<Game.stageHeight&&(t.transitionBarTop.height=(Game.stageHeight-t.transitionMask.height)/2,t.transitionBarBottom.height=t.transitionBarTop.height,t.transitionBarBottom.position.y=t.transitionBarTop.height+t.transitionMask.height)},e.prototype.setUpTransition=function(){this.transitionHolder=Game.displayStore.getContainer("transition-holder"),1==this.game.initLoaded&&(this.transitionMask=this.transitionHolder.getContainer("transition-mask"),this.transitionBarTop=this.transitionHolder.getSprite("black-area-top"),this.transitionBarLeft=this.transitionHolder.getSprite("black-area-left"),this.transitionBarRight=this.transitionHolder.getSprite("black-area-right"),this.transitionBarBottom=this.transitionHolder.getSprite("black-area-bottom"),this.transitionBarRight.position.x=Game.stageWidth,this.transitionBarBottom.position.y=Game.stageHeight,this.transitionBarTop.width=this.transitionBarBottom.width=Game.stageWidth,this.transitionBarLeft.height=this.transitionBarRight.height=Game.stageHeight,this.transitionMask.setRegPoint(512,512),this.transitionMask.position.x=Game.stageWidth/2,this.transitionMask.position.y=Game.stageHeight/2,this.transitionCornerTopLeft=this.transitionMask.getSprite("black-corner-top-left"),this.transitionCornerTopRight=this.transitionMask.getSprite("black-corner-top-right"),this.transitionCornerBottomRight=this.transitionMask.getSprite("black-corner-bottom-right"),this.transitionCornerBottomLeft=this.transitionMask.getSprite("black-corner-bottom-left"),this.transitionCornerTopLeft.texture.baseTexture.scaleMode=1,this.transitionCornerTopRight.scale.x=-1,this.transitionCornerTopRight.position.x=1024,this.transitionCornerBottomRight.scale.x=-1,this.transitionCornerBottomRight.scale.y=-1,this.transitionCornerBottomRight.position.x=1024,this.transitionCornerBottomRight.position.y=1024,this.transitionCornerBottomLeft.scale.y=-1,this.transitionCornerBottomLeft.position.y=1024),this.uiContainerRef&&this.uiContainerRef.addChild(this.transitionHolder)},e.prototype.killTransitionAssets=function(t){t.transitionHolder.parent&&t.uiContainerRef&&t.uiContainerRef.removeChild(t.transitionHolder),t.transitioning=!1,t.interactionLocked=!1,t.transitionTween&&t.transitionTween.kill()},e.prototype.pauseResumeTween=function(t,e,i){t&&("pause"==e?(t.totalProgress()>0&&t.totalProgress()<1||0*t.totalProgress()!=0)&&t.pause():"resume"==e&&(t.totalProgress()>0&&t.totalProgress()<1||0*t.totalProgress()!=0)&&t.paused&&t.resume())},e.prototype.killTween=function(t){return t&&(t.kill(),t=null),t},e.prototype.simpleEase=function(t,e,i){return t+=(e-t)/i,t=Math.round(1e3*t)/1e3},e.prototype.shuffleArray=function(t){for(var e,i,n=t.length;n>0;)i=Math.floor(Math.random()*n),e=t[--n],t[n]=t[i],t[i]=e;return t},e.prototype.onLoadUpdate=function(t,e){},e.prototype.getPreloaderAssetList=function(){return[]},e}(PIXI.Container),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Sprite=function(t){function e(e){t.call(this,e),this.neverFlush=!1,this.origX=0,this.origY=0,this.origAnchor={x:0,y:0,compensate:!1},this.defaultAnchor=!0,this.pooled=!1,this.pooledActive=!1,this.disposeAssetsOnDestroy=!1}return __extends(e,t),e.prototype.addChild=function(e){t.prototype.addChild.call(this,e),1==this.pooled&&(this.pooledActive=!0)},e.prototype.destroy=function(){1!=this.disposeAssetsOnDestroy?t.prototype.destroy.call(this):t.prototype.destroy.call(this,!0)},e.prototype.disposeAssets=function(){1==Game.displayStore.checkTextureDeletable(this)&&(this.disposeAssetsOnDestroy=!0,PIXI.Texture.removeFromCache(this.texture),PIXI.BaseTexture.removeFromCache(this.texture.baseTexture))},e.prototype.destroyRenderTexture=function(){this.texture.destroy(!0)},e.prototype.resampleTextureLowEndIPad=function(){},e.prototype.setTextureResolution=function(t){this.texture.baseTexture.resolution=t,this.texture.baseTexture.update()},e.prototype.resizeItem=function(){},e.prototype.setWidth=function(t){this._width=t},e.prototype.setHeight=function(t){this._height=t},e.prototype.setRegPoint=function(t,e,i){this.anchor.x=t,this.anchor.y=e,1==i&&(this.position.x=this.width*t+this.position.x,this.position.y=this.height*e+this.position.y)},e}(PIXI.Sprite),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Spine=function(t){function e(e){t.call(this,e),this.neverFlush=!1,this.origX=0,this.origY=0,this.pooled=!1,this.pooledActive=!1,this.disposeAssetsOnDestroy=!1}return __extends(e,t),e.prototype.addChild=function(e){t.prototype.addChild.call(this,e),1==this.pooled&&(this.pooledActive=!0)},e.prototype.setTextureResolution=function(t){this.scale.x=1/t,this.scale.y=1/t},e.prototype.disposeAssets=function(){if(1==Game.displayStore.checkTextureDeletable(this)){this.disposeAssetsOnDestroy=!0;for(var t=0;t<this.children.length;t++){for(var e=this.children[t],i=0;i<e.children.length;i++){var n=e.children[i];n.texture.destroy(!0),n=null}e=null}PIXI.Texture.removeFromCache(this.textureURL),PIXI.BaseTexture.removeFromCache(this.textureURL),PIXI.Texture.removeFromCache(this.atlasTextureRefID),PIXI.BaseTexture.removeFromCache(this.atlasTextureRefID)}this.slotContainers=null,this.spineData=null,this.skeleton=null,this.data=null,this.state=null,this.storedState=null},e.prototype.destroy=function(){1!=this.disposeAssetsOnDestroy?t.prototype.destroy.call(this):t.prototype.destroy.call(this,!0)},e.prototype.setAtlasTextureRefID=function(t){this.atlasTextureRefID=t},e.prototype.changeBaseTexture=function(t){for(n=0;n<this.slotContainers.length;n++)for(var e=this.slotContainers[n],i=0;i<e.children.length;i++)e.children[i].texture.baseTexture=t;for(var n=0;n<this.skeleton.slots.length;n++){var o=this.skeleton.slots[n];o.attachment&&(o.attachment.rendererObject.page.rendererObject=t)}},e.prototype.setAnim=function(t,e){this.lastTime=Date.now(),this.currentAnim=t,this.loop=e,this.state.setAnimation(0,t,e)},e.prototype.setSkin=function(t){this.skeleton.setSkinByName(t),this.skeleton.setSlotsToSetupPose()},e.prototype.pause=function(){this.currentAnim&&(this.currentAnimTime=this.state.currentTime,this.storedState=this.state,this.state.tracks[0]&&(this.storedTime=this.state.tracks[0].trackTime),this.state.clearTracks())},e.prototype.resume=function(){this.currentAnim&&(this.state=this.storedState,this.state.setAnimation(0,this.currentAnim,this.loop),this.state.tracks[0].trackTime=this.storedTime)},e.prototype.rewindAndStop=function(){},e.prototype.resizeItem=function(){},e}(PIXI.spine.Spine),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},AnimatedSprite=function(t){function e(e){t.call(this,e),this.neverFlush=!1,this.origX=0,this.origY=0,this.origAnchor={x:0,y:0,compensate:!1},this.defaultAnchor=!0,this.pooled=!1,this.pooledActive=!1,this.disposeAssetsOnDestroy=!1,this.texturesStore=new Array;for(var i=0;i<e.length;i++)this.texturesStore.push(e[i])}return __extends(e,t),e.prototype.addChild=function(e){t.prototype.addChild.call(this,e),1==this.pooled&&(this.pooledActive=!0)},e.prototype.setJsonBaseTextureRef=function(t){this.jsonBaseTextureRefID=t},e.prototype.setTextureResolution=function(t){var e=PIXI.utils.TextureCache[this.textureURL];e.baseTexture.resolution=t,e.baseTexture.update()},e.prototype.disposeAssets=function(){if(1==Game.displayStore.checkTextureDeletable(this)){this.disposeAssetsOnDestroy=!0,PIXI.Texture.removeFromCache(this.texture),PIXI.BaseTexture.removeFromCache(this.texture.baseTexture);for(var t=0;t<this.texturesStore.length;t++)PIXI.Texture.removeFromCache(this.texturesStore[t]),PIXI.BaseTexture.removeFromCache(this.texturesStore[t].baseTexture);PIXI.Texture.removeFromCache(this.jsonBaseTextureRefID),PIXI.BaseTexture.removeFromCache(this.jsonBaseTextureRefID)}},e.prototype.destroy=function(){1!=this.disposeAssetsOnDestroy?t.prototype.destroy.call(this):t.prototype.destroy.call(this,!0)},e.prototype.resizeItem=function(){},e.prototype.setRegPoint=function(t,e,i){this.anchor.x=t,this.anchor.y=e,1==i&&(this.position.x=this.width*t+this.position.x,this.position.y=this.height*e+this.position.y)},e}(PIXI.extras.AnimatedSprite),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},BitmapText=function(t){function e(e,i){t.call(this,e,i),this.neverFlush=!1,this.origX=0,this.origY=0,this.defaultAnchor=!0,this.pooled=!1,this.pooledActive=!1,this.disposeAssetsOnDestroy=!1}return __extends(e,t),e.prototype.addChild=function(e){t.prototype.addChild.call(this,e),1==this.pooled&&(this.pooledActive=!0)},e.prototype.setTextureResolution=function(t){var e=PIXI.utils.TextureCache[this.textureURL];e.baseTexture.resolution=t,e.baseTexture.update()},e.prototype.saveTexture=function(){this.pixiTex=PIXI.Texture.fromImage(this.textureURL)},e.prototype.disposeAssets=function(){1==Game.displayStore.checkTextureDeletable(this)&&(this.disposeAssetsOnDestroy=!0,this.pixiTex.destroy(!0),PIXI.Texture.removeFromCache(this.pixiTex),PIXI.BaseTexture.removeFromCache(this.pixiTex.baseTexture),PIXI.Texture.removeFromCache(this.xmlTextureRefID),PIXI.BaseTexture.removeFromCache(this.xmlTextureRefID))},e.prototype.destroy=function(){1!=this.disposeAssetsOnDestroy?t.prototype.destroy.call(this):t.prototype.destroy.call(this,!0)},e.prototype.setXMLBaseTextureRef=function(t){this.xmlTextureRefID=t},e.prototype.resizeItem=function(){},e.prototype.setRegPoint=function(t,e,i){},e}(PIXI.extras.BitmapText),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},LoadingScene=function(t){function e(e){t.call(this,e),this.endPreloadTriggered=!1,this.id="loadingScene"}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.setBackgroundColor(0),this.game.ui.setUI("none"),this.colourOverlay=Game.displayStore.getSprite("global/screen-colour-overlay"),this.colourOverlay.width=Game.stageWidth,this.colourOverlay.height=Game.stageHeight,this.colourOverlay.alpha=1,this.container.addChild(this.colourOverlay),this.colourOverlay.blendMode=PIXI.BLEND_MODES.MULTIPLY,this.streak1=Game.displayStore.getSprite("global/streak-effect"),this.streak2=Game.displayStore.getSprite("global/streak-effect"),this.streak3=Game.displayStore.getSprite("global/streak-effect"),this.streak4=Game.displayStore.getSprite("global/streak-effect"),this.streak1.rotation=this.streak2.rotation=this.streak3.rotation=this.streak4.rotation=-.5,this.streak1.position.x=200,this.streak1.position.y=0,this.streak2.position.x=500,this.streak2.position.y=250,this.streak3.position.x=800,this.streak3.position.y=300,this.streak4.position.x=650,this.streak4.position.y=525,this.streak1.tint=16733011,this.streak2.tint=16733011,this.streak3.tint=366571,this.streak4.tint=366571,this.container.addChild(this.streak1),this.container.addChild(this.streak2),this.container.addChild(this.streak3),this.container.addChild(this.streak4);var e=0,i=0,n=0;this.gridTiles=new Array;for(var o=0;o<20;o++){var a=Game.displayStore.getSprite("global/screen-overlay-grid-tile-element");a.position.x=a.width*n,a.position.y=a.height*i,a.alpha=.1,a.blendMode=PIXI.BLEND_MODES.ADD,this.gridTiles.push(a),this.container.addChild(a),n++,++e>=6&&(e=0,i++,n=0)}this.loadingText=Game.displayStore.getBitmapText("preloader/loading-font"),Game.stringsManager.setTextString(this.loadingText,"loading"),this.loadingText.position.x=Game.stageWidth/2-this.loadingText.width/2+Game.stringsManager.getTextOffset("loading").xOffset,this.loadingText.position.y=240+Game.stringsManager.getTextOffset("loading").yOffset,this.container.addChild(this.loadingText),this.animation=new TimelineMax,this.preloaderBarContainerMain=Game.displayStore.getContainer("preloader-bar"),this.preloaderContainerInner=this.preloaderBarContainerMain.getContainer("bar-fill-holder"),this.preloaderBarContainerMain.position.x=Game.stageWidth/2,this.preloaderBarContainerMain.position.y=360,this.preloaderBarFillMain=this.preloaderContainerInner.getSprite("bar-fill"),this.preloadBarFillGrad=this.preloaderContainerInner.getSprite("bar-fill-grad"),this.preloaderBarFillMain.blendMode=PIXI.BLEND_MODES.ADD,this.preloadBarFillGrad.alpha=.5,this.maskElement=new PIXI.Graphics,this.maskElement.moveTo(0,0),this.maskElement.beginFill(16777215),this.maskElement.lineTo(435,0),this.maskElement.lineTo(435,60),this.maskElement.lineTo(0,60),this.maskElement.lineTo(0,0),this.maskElement.endFill(),this.maskElement.position.x=6,this.maskElement.position.y=0,this.preloaderBarContainerMain.addChild(this.maskElement),this.preloaderContainerInner.mask=this.maskElement,this.maskElement.scale.x=0,this.currentScale=0,this.zapFrames=Game.displayStore.getAnimatedSprite("loader-zap-anim"),this.zapFrames.loop=!0,this.zapFrames.animationSpeed=.3,this.zapFrames.gotoAndStop(0),this.zapFrames.play(),this.zapFrames.blendMode=PIXI.BLEND_MODES.ADD,this.zapFrames.alpha=0,this.zapFrames.scale.x=0,this.zapStartPos=this.preloaderBarContainerMain.position.x-this.preloaderBarFillMain.width/2,this.zapFrames.position.y=this.preloaderBarContainerMain.position.y,this.container.addChild(this.preloaderBarContainerMain),this.container.addChild(this.zapFrames),TweenMax.from(this.preloaderBarContainerMain.scale,.4,{x:0,ease:Back.easeOut})},e.prototype.positionLoadingText=function(){this.loadingText.position.x=this.preloaderBarFillMain.width/2-this.loadingText.width/2},e.prototype.onLoadUpdate=function(t,e){this.currentScale=t/e},e.prototype.tick=function(){t.prototype.tick.call(this),this.maskElement.scale.x+=(this.currentScale-this.maskElement.scale.x)/9,this.zapFrames.position.x=this.zapStartPos+this.maskElement.width,0!=this.currentScale&&(this.zapFrames.alpha<1&&(this.zapFrames.alpha=5*this.maskElement.scale.x),this.zapFrames.scale.x<1&&(this.zapFrames.scale.x=3*this.maskElement.scale.x))},e.prototype.pause=function(e){0==e&&t.prototype.pause.call(this,e)},e.prototype.resume=function(){t.prototype.resume.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.container.removeChild(this.loadingText),this.container.removeChild(this.preloaderBarContainerMain),this.preloaderBarFillMain.mask=null,this.maskElement.clear(),this.preloaderBarContainerMain.removeChild(this.maskElement),this.animation=this.killTween(this.animation),this.barTween=this.killTween(this.barTween),Game.displayStore.returnPooledItem(this.streak1),Game.displayStore.returnPooledItem(this.streak2),Game.displayStore.returnPooledItem(this.streak3),Game.displayStore.returnPooledItem(this.streak4);for(var e=0;e<this.gridTiles.length;e++)Game.displayStore.returnPooledItem(this.gridTiles[e]);this.currentScale=0,Game.displayStore.flush(this.getPreloaderAssetList())},e.prototype.getPreloaderAssetList=function(){return["initial-loading-assets"]},e}(Scene),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},TitleScene=function(t){function e(e){t.call(this,e),this.id="titleScene"}return __extends(e,t),e.prototype.init=function(e){t.prototype.init.call(this),this.setBackgroundColor(4408131),this.game.ui.setUI("title"),Game.assetChunkManager.flushAssets("games"),this.mainHolder=Game.displayStore.getContainer("title-scene-holder"),this.mainHolder.setRegPointPixels(Game.stageWidth/2,Game.stageHeight/2,!0),this.clickArea=Game.displayStore.getSprite("title-scene/click-area"),this.clickArea.width=Game.stageWidth,this.clickArea.height=Game.stageHeight,this.colourOverlay=Game.displayStore.getSprite("title-scene/screen-colour-overlay"),this.colourOverlay.width=Game.stageWidth,this.colourOverlay.height=Game.stageHeight,this.colourOverlay.alpha=1,this.redTint=16733011,this.blueTint=366571,this.glitchCount=0,this.glitchLimit=10,this.glitchEaseAmount=5,this.lightGlitchEaseAmount=2.5,this.targetGlitchAlpha=0,this.greenLineTargetAlpha=0,this.lightTopTargetAlpha=0,this.lightLinesTargetAlpha=0,this.characterHighlightsOn=!1,this.characterHighlightTimer=0,this.characterHighlightLimit=40;var i=0,n=0,o=0;this.mainHolder.addChild(this.colourOverlay),this.gridTiles=new Array;for(var a=0;a<20;a++){var s=Game.displayStore.getSprite("help/screen-overlay-grid-tile-element");s.position.x=s.width*o,s.position.y=s.height*n,s.alpha=.1,s.blendMode=PIXI.BLEND_MODES.OVERLAY,this.gridTiles.push(s),this.mainHolder.addChild(s),o++,++i>=6&&(i=0,n++,o=0)}this.streak1=Game.displayStore.getSprite("help/streak-effect"),this.streak2=Game.displayStore.getSprite("help/streak-effect"),this.streak3=Game.displayStore.getSprite("help/streak-effect"),this.streak4=Game.displayStore.getSprite("help/streak-effect"),this.streak1.rotation=this.streak2.rotation=this.streak3.rotation=this.streak4.rotation=-.5,this.streak1.position.x=400,this.streak1.position.y=-100,this.streak2.position.x=100,this.streak2.position.y=250,this.streak3.position.x=950,this.streak3.position.y=200,this.streak4.position.x=550,this.streak4.position.y=650,this.streak1.tint=this.redTint,this.streak2.tint=this.redTint,this.streak3.tint=this.blueTint,this.streak4.tint=this.blueTint,this.streak1.blendMode=PIXI.BLEND_MODES.ADD,this.streak2.blendMode=PIXI.BLEND_MODES.ADD,this.streak3.blendMode=PIXI.BLEND_MODES.ADD,this.streak4.blendMode=PIXI.BLEND_MODES.ADD,this.hologramEffectBackHolder=Game.displayStore.getContainer("title-scene/hologram-effect-back-holder"),this.hologramEffectBack1=Game.displayStore.getSprite("title-scene/hologram-effect-back"),this.hologramEffectBack2=Game.displayStore.getSprite("title-scene/hologram-effect-back"),this.hologramEffectBack3=Game.displayStore.getSprite("title-scene/hologram-effect-back"),this.hologramEffectBack4=Game.displayStore.getSprite("title-scene/hologram-effect-back"),this.hologramEffectBack2.scale.y=-1,this.hologramEffectBack3.scale.x=-1,this.hologramEffectBack3.scale.y=-1,this.hologramEffectBack4.scale.x=-1,this.hologramEffectBackHolder.addChild(this.hologramEffectBack1),this.hologramEffectBackHolder.addChild(this.hologramEffectBack2),this.hologramEffectBackHolder.addChild(this.hologramEffectBack3),this.hologramEffectBackHolder.addChild(this.hologramEffectBack4),this.hologramEffectBackHolder.position.x=Game.stageWidth/2,this.hologramEffectBackHolder.position.y=Game.stageHeight/2-30,this.hologramEffectBackHolder.alpha=0,this.redLinesHolder=Game.displayStore.getContainer("title-scene/outer-red-lines-holder"),this.redLines1=Game.displayStore.getSprite("title-scene/outer-lines"),this.redLines2=Game.displayStore.getSprite("title-scene/outer-lines"),this.redLines3=Game.displayStore.getSprite("title-scene/outer-lines"),this.redLines4=Game.displayStore.getSprite("title-scene/outer-lines"),this.redLinesHolder.position.x=Game.stageWidth/2,this.redLinesHolder.position.y=Game.stageHeight/2-30,this.redLinesHolder.scale.x=1.3,this.redLinesHolder.scale.y=1.3,this.redLines1.scale.y=-1,this.redLines3.scale.x=-1,this.redLines4.scale.x=-1,this.redLines4.scale.y=-1,this.redLines1.tint=this.redTint,this.redLines2.tint=this.redTint,this.redLines3.tint=this.redTint,this.redLines4.tint=this.redTint,this.redLines1.alpha=.2,this.redLines2.alpha=.2,this.redLines3.alpha=.2,this.redLines4.alpha=.2,this.redLinesHolder.addChild(this.redLines1),this.redLinesHolder.addChild(this.redLines2),this.redLinesHolder.addChild(this.redLines3),this.redLinesHolder.addChild(this.redLines4),this.redLines1.blendMode=PIXI.BLEND_MODES.ADD,this.redLines2.blendMode=PIXI.BLEND_MODES.ADD,this.redLines3.blendMode=PIXI.BLEND_MODES.ADD,this.redLines4.blendMode=PIXI.BLEND_MODES.ADD,this.blueLinesHolder=Game.displayStore.getContainer("title-scene/outer-blue-lines-holder"),this.blueLines1=Game.displayStore.getSprite("title-scene/outer-lines"),this.blueLines2=Game.displayStore.getSprite("title-scene/outer-lines"),this.blueLines3=Game.displayStore.getSprite("title-scene/outer-lines"),this.blueLines4=Game.displayStore.getSprite("title-scene/outer-lines"),this.blueLinesHolder.position.x=Game.stageWidth/2,this.blueLinesHolder.position.y=Game.stageHeight/2-30,this.blueLinesHolder.scale.x=2,this.blueLinesHolder.scale.y=2,this.blueLinesHolder.rotation=2,this.blueLines1.scale.y=-1,this.blueLines3.scale.x=-1,this.blueLines4.scale.x=-1,this.blueLines4.scale.y=-1,this.blueLines1.tint=this.blueTint,this.blueLines2.tint=this.blueTint,this.blueLines3.tint=this.blueTint,this.blueLines4.tint=this.blueTint,this.blueLines1.alpha=.2,this.blueLines2.alpha=.2,this.blueLines3.alpha=.2,this.blueLines4.alpha=.2,this.blueLinesHolder.addChild(this.blueLines1),this.blueLinesHolder.addChild(this.blueLines2),this.blueLinesHolder.addChild(this.blueLines3),this.blueLinesHolder.addChild(this.blueLines4),this.blueLines1.blendMode=PIXI.BLEND_MODES.ADD,this.blueLines2.blendMode=PIXI.BLEND_MODES.ADD,this.blueLines3.blendMode=PIXI.BLEND_MODES.ADD,this.blueLines4.blendMode=PIXI.BLEND_MODES.ADD,this.whiteLinesHolder=Game.displayStore.getContainer("title-scene/outer-white-lines-holder"),this.whiteLines1=Game.displayStore.getSprite("title-scene/outer-lines"),this.whiteLines2=Game.displayStore.getSprite("title-scene/outer-lines"),this.whiteLines3=Game.displayStore.getSprite("title-scene/outer-lines"),this.whiteLines4=Game.displayStore.getSprite("title-scene/outer-lines"),this.whiteLinesHolder.position.x=Game.stageWidth/2,this.whiteLinesHolder.position.y=Game.stageHeight/2-30,this.whiteLinesHolder.scale.x=1.8,this.whiteLinesHolder.scale.y=1.8,this.whiteLinesHolder.rotation=2,this.whiteLines1.scale.y=-1,this.whiteLines3.scale.x=-1,this.whiteLines4.scale.x=-1,this.whiteLines4.scale.y=-1,this.whiteLines1.alpha=.2,this.whiteLines2.alpha=.2,this.whiteLines3.alpha=.2,this.whiteLines4.alpha=.2,this.whiteLinesHolder.addChild(this.blueLines1),this.whiteLinesHolder.addChild(this.blueLines2),this.whiteLinesHolder.addChild(this.blueLines3),this.whiteLinesHolder.addChild(this.blueLines4),this.whiteLines1.blendMode=PIXI.BLEND_MODES.ADD,this.whiteLines2.blendMode=PIXI.BLEND_MODES.ADD,this.whiteLines3.blendMode=PIXI.BLEND_MODES.ADD,this.whiteLines4.blendMode=PIXI.BLEND_MODES.ADD,this.hologramFront=this.mainHolder.getSprite("title-scene/hologram-front"),this.hologramFront.position.x=512,this.hologramFront.position.y=264,this.hologramFront.scale.x=0,this.hologramFront.alpha=0,this.hologramFront.tint=this.blueTint,this.hologramFront.blendMode=PIXI.BLEND_MODES.ADD,this.titleHolder=this.mainHolder.getContainer("title-scene/logo-holder"),this.titleThe=this.titleHolder.getSprite("title-scene/logo-the"),this.titleDanger=this.titleHolder.getSprite("title-scene/logo-danger"),this.titleTrials=this.titleHolder.getSprite("title-scene/logo-trials"),this.titleThe.alpha=0,this.titleDanger.alpha=0,this.titleTrials.alpha=0,this.henryDangerLogo=this.mainHolder.getSprite("title-scene/henry-danger-logo"),this.henryDangerLogo.alpha=0,this.star1=Game.displayStore.getSprite("title-scene/logo-star"),this.star2=Game.displayStore.getSprite("title-scene/logo-star"),this.star3=Game.displayStore.getSprite("title-scene/logo-star"),this.star1.position.x=420.5,this.star1.position.y=372,this.star2.position.x=513.5,this.star2.position.y=395,this.star3.position.x=606.5,this.star3.position.y=372,this.star1.alpha=0,this.star2.alpha=0,this.star3.alpha=0,this.greenLinesHolder=Game.displayStore.getContainer("title-scene/outer-green-lines-holder"),this.greenLinesHolder.setRegPointPixels(Game.stageWidth/2,Game.stageHeight/2,!0),this.greenLinesHolder.alpha=0,this.greenLine1=Game.displayStore.getSprite("title-scene/green-line-1"),this.greenLine2=Game.displayStore.getSprite("title-scene/green-line-1"),this.greenLine3=Game.displayStore.getSprite("title-scene/green-line-1"),this.greenLine4=Game.displayStore.getSprite("title-scene/green-line-1"),this.greenLine5=Game.displayStore.getSprite("title-scene/green-line-1"),this.greenLine6=Game.displayStore.getSprite("title-scene/green-line-1"),this.greenLine7=Game.displayStore.getSprite("title-scene/green-line-1"),this.greenLine8=Game.displayStore.getSprite("title-scene/green-line-1"),this.greenLinesHolder.addChild(this.greenLine1),this.greenLinesHolder.addChild(this.greenLine2),this.greenLinesHolder.addChild(this.greenLine3),this.greenLinesHolder.addChild(this.greenLine4),this.greenLinesHolder.addChild(this.greenLine5),this.greenLinesHolder.addChild(this.greenLine6),this.greenLinesHolder.addChild(this.greenLine7),this.greenLinesHolder.addChild(this.greenLine8),this.greenLine1.position.x=248,this.greenLine1.position.y=1.5,this.greenLine1.rotation=-.75,this.greenLine2.position.x=-24.5,this.greenLine2.position.y=149.5,this.greenLine2.rotation=-1.34,this.greenLine3.position.x=14.5,this.greenLine3.position.y=332,this.greenLine3.rotation=-1.68,this.greenLine4.position.x=227,this.greenLine4.position.y=625,this.greenLine4.rotation=-2.51,this.greenLine5.position.x=765.5,this.greenLine5.position.y=1.5,this.greenLine5.rotation=.75,this.greenLine6.position.x=1038.5,this.greenLine6.position.y=149.5,this.greenLine6.rotation=1.34,this.greenLine7.position.x=1033.5,this.greenLine7.position.y=332,this.greenLine7.rotation=1.68,this.greenLine8.position.x=787,this.greenLine8.position.y=625,this.greenLine8.rotation=2.51,this.greenLine9=Game.displayStore.getSprite("title-scene/green-line-2"),this.greenLine10=Game.displayStore.getSprite("title-scene/green-line-2"),this.greenLine11=Game.displayStore.getSprite("title-scene/green-line-2"),this.greenLine12=Game.displayStore.getSprite("title-scene/green-line-2"),this.greenLinesHolder.addChild(this.greenLine9),this.greenLinesHolder.addChild(this.greenLine10),this.greenLinesHolder.addChild(this.greenLine11),this.greenLinesHolder.addChild(this.greenLine12),this.greenLine9.position.x=51.5,this.greenLine9.position.y=27.5,this.greenLine9.rotation=-1,this.greenLine10.position.x=-19.5,this.greenLine10.position.y=414,this.greenLine10.rotation=-1.79,this.greenLine11.position.x=962.5,this.greenLine11.position.y=27.5,this.greenLine11.rotation=1,this.greenLine12.position.x=1033.5,this.greenLine12.position.y=414,this.greenLine12.rotation=1.79,this.captainManHolder=this.mainHolder.getContainer("title-scene/captain-man-holder"),this.captainManHolder.position.x=-110,this.captainManHolder.position.y=120,this.captainManHolder.setRegPointPixels(Game.stageWidth/2,Game.stageHeight/2,!0),this.captainManHead=this.captainManHolder.getSprite("title-scene/man-head"),this.captainManRightArmBottom=this.captainManHolder.getSprite("title-scene/man-right-arm-bottom"),this.captainManBodyLightmap=this.captainManHolder.getSprite("title-scene/man-body-lightmap"),this.captainManHeadLightmap=this.captainManHolder.getSprite("title-scene/man-head-lightmap"),this.captainManRightArmTopLightmap=this.captainManHolder.getSprite("title-scene/man-right-arm-top-lightmap"),this.captainManLeftArmTopLightmap=this.captainManHolder.getSprite("title-scene/man-left-arm-top-lightmap"),this.captainManLeftArmBottomLightmap=this.captainManHolder.getSprite("title-scene/man-left-arm-bottom-lightmap"),this.captainManRightArmBottomLightmap=this.captainManHolder.getSprite("title-scene/man-right-arm-bottom-lightmap"),this.captainManBodyLightmap.tint=2293538,this.captainManHeadLightmap.tint=2293538,this.captainManRightArmTopLightmap.tint=2293538,this.captainManLeftArmTopLightmap.tint=2293538,this.captainManLeftArmBottomLightmap.tint=2293538,this.captainManRightArmBottomLightmap.tint=2293538,this.captainManBodyLightmap.alpha=0,this.captainManHeadLightmap.alpha=0,this.captainManRightArmTopLightmap.alpha=0,this.captainManLeftArmTopLightmap.alpha=0,this.captainManLeftArmBottomLightmap.alpha=0,this.captainManRightArmBottomLightmap.alpha=0,this.henryHolder=this.mainHolder.getContainer("title-scene/henry-holder"),this.henryHolder.position.x=674,this.henryHolder.position.y=204,this.henryHolder.setRegPointPixels(-Game.stageWidth/2,-Game.stageHeight/2,!0),this.henryHead=this.henryHolder.getSprite("title-scene/henry-head"),this.henryLeftArmBottom=this.henryHolder.getSprite("title-scene/henry-left-arm-bottom"),this.henryRightArmBottom=this.henryHolder.getSprite("title-scene/henry-right-arm-bottom"),this.henryRightArmBottomLightmap=this.henryHolder.getSprite("title-scene/henry-right-arm-bottom-lightmap"),this.henryLeftArmBottomLightmap=this.henryHolder.getSprite("title-scene/henry-left-arm-bottom-lightmap"),this.henryLeftArmTopLightmap=this.henryHolder.getSprite("title-scene/henry-left-arm-top-lightmap"),this.henryRightArmTopLightmap=this.henryHolder.getSprite("title-scene/henry-right-arm-top-lightmap"),this.henryBodyLightmap=this.henryHolder.getSprite("title-scene/henry-body-lightmap"),this.henryHeadLightmap=this.henryHolder.getSprite("title-scene/henry-head-lightmap"),this.henryRightArmBottomLightmap.tint=2293538,this.henryLeftArmBottomLightmap.tint=2293538,this.henryLeftArmTopLightmap.tint=2293538,this.henryRightArmTopLightmap.tint=2293538,this.henryBodyLightmap.tint=2293538,this.henryHeadLightmap.tint=2293538,this.henryRightArmBottomLightmap.alpha=0,this.henryLeftArmBottomLightmap.alpha=0,this.henryLeftArmTopLightmap.alpha=0,this.henryRightArmTopLightmap.alpha=0,this.henryBodyLightmap.alpha=0,this.henryHeadLightmap.alpha=0,this.starParticle1Container=Game.displayStore.getContainer("title-scene/particle-burst-1-holder");var r={lowerAngle:0,upperAngle:360,lowerVelocity:250,upperVelocity:500,lowerStartScale:1,upperStartScale:2,lowerEndScale:0,upperEndScale:0,friction:.15,XstartRange:20,YstartRange:20,time:.6,gravity:1,stagger:0,cap:100,endAlpha:0,rotationPower:0};this.starBurst1=new ParticleBurst(["title-scene/particle-1"],this.starParticle1Container,this,r),this.starParticle2Container=Game.displayStore.getContainer("title-scene/particle-burst-2-holder"),this.starBurst2=new ParticleBurst(["title-scene/particle-2"],this.starParticle2Container,this,r),this.starParticle3Container=Game.displayStore.getContainer("title-scene/particle-burst-3-holder"),this.starBurst3=new ParticleBurst(["title-scene/particle-3"],this.starParticle3Container,this,r);var h={lowerAngle:0,upperAngle:360,lowerVelocity:250,upperVelocity:500,lowerStartScale:1,upperStartScale:2,lowerEndScale:0,upperEndScale:0,friction:.15,XstartRange:180,YstartRange:50,time:.6,gravity:1,stagger:0,cap:300,endAlpha:0,rotationPower:0};this.trialsParticle4Container=Game.displayStore.getContainer("title-scene/particle-burst-4-holder"),this.trialsBurst=new ParticleBurst(["title-scene/particle-4"],this.trialsParticle4Container,this,h),this.starParticle1Container.position.x=this.star1.position.x,this.starParticle1Container.position.y=this.star1.position.y,this.starParticle2Container.position.x=this.star2.position.x,this.starParticle2Container.position.y=this.star2.position.y,this.starParticle3Container.position.x=this.star3.position.x,this.starParticle3Container.position.y=this.star3.position.y,this.trialsParticle4Container.position.x=512,this.trialsParticle4Container.position.y=270,this.clickToPlayHolder=Game.displayStore.getContainer("title-scene/click-to-play-holder"),this.clickToPlay=Game.displayStore.getBitmapText("title-scene/click-to-play-font"),Game.stringsManager.setTextString(this.clickToPlay,"click-anywhere-message"),this.clickToPlay.position.x=0-this.clickToPlay.width/2+Game.stringsManager.getTextOffset("click-anywhere-message").xOffset,this.clickToPlay.position.y=0+Game.stringsManager.getTextOffset("click-anywhere-message").yOffset,this.clickToPlayHolder.addChild(this.clickToPlay),this.clickToPlayHolder.position.x=Game.stageWidth/2,this.clickToPlayHolder.position.y=490,this.clickToPlayHolder.alpha=0,this.lightHolder=this.mainHolder.getContainer("title-scene/light-holder"),this.lightHolder.scale.x=0,this.lightTop=this.lightHolder.getSprite("title-scene/light-top"),this.lightLines=this.lightHolder.getSprite("title-scene/light-lines"),this.lightLines.tint=2293538,this.lightTop.tint=2293538,this.lightLines.blendMode=PIXI.BLEND_MODES.ADD,this.lightTop.blendMode=PIXI.BLEND_MODES.ADD,this.mainHolder.addChild(this.streak1),this.mainHolder.addChild(this.streak2),this.mainHolder.addChild(this.streak3),this.mainHolder.addChild(this.streak4),this.mainHolder.addChild(this.hologramEffectBackHolder),this.mainHolder.addChild(this.redLinesHolder),this.mainHolder.addChild(this.blueLinesHolder),this.mainHolder.addChild(this.lightHolder),this.mainHolder.addChild(this.hologramFront),this.mainHolder.addChild(this.greenLinesHolder),this.mainHolder.addChild(this.captainManHolder),this.mainHolder.addChild(this.henryHolder),this.mainHolder.addChild(this.whiteLinesHolder),this.mainHolder.addChild(this.trialsParticle4Container),this.mainHolder.addChild(this.titleHolder),this.mainHolder.addChild(this.starParticle1Container),this.mainHolder.addChild(this.starParticle2Container),this.mainHolder.addChild(this.starParticle3Container),this.mainHolder.addChild(this.star1),this.mainHolder.addChild(this.star2),this.mainHolder.addChild(this.star3),this.mainHolder.addChild(this.henryDangerLogo),this.mainHolder.addChild(this.clickToPlayHolder),this.container.addChild(this.mainHolder),this.container.addChild(this.clickArea),this.initialAnimation=new TimelineMax,this.initialAnimation.add([TweenMax.from(this.mainHolder.scale,.6,{x:1.8,y:1.8,ease:Sine.easeInOut}),TweenMax.from(this.mainHolder.position,.6,{y:"-=100",ease:Back.easeOut}),TweenMax.from(this.hologramEffectBackHolder.scale,.6,{x:2,y:2,ease:Back.easeOut}),TweenMax.to(this.hologramEffectBackHolder,.6,{alpha:1,ease:Back.easeOut}),TweenMax.from(this.redLinesHolder.scale,.6,{x:3.3,y:3.3,ease:Back.easeOut}),TweenMax.from(this.blueLinesHolder.scale,.6,{x:4,y:4,ease:Back.easeOut}),TweenMax.from(this.captainManHolder.scale,.6,{x:2,y:2,ease:Back.easeOut}),TweenMax.from(this.captainManHolder.position,.6,{x:"-=100",y:"+=200",ease:Back.easeOut}),TweenMax.from(this.captainManHead,.6,{rotation:-.6,ease:Back.easeOut}),TweenMax.from(this.captainManRightArmBottom,.6,{rotation:-1,ease:Back.easeOut}),TweenMax.from(this.henryHolder.scale,.6,{x:1.5,y:1.5,ease:Back.easeOut}),TweenMax.from(this.henryHead,.6,{rotation:.6,ease:Back.easeOut}),TweenMax.from(this.henryLeftArmBottom,.6,{rotation:1,ease:Back.easeOut}),TweenMax.from(this.henryRightArmBottom,.6,{rotation:1,ease:Back.easeOut})]),this.titleAnimation=new TimelineMax,this.titleAnimation.add([TweenMax.to(this.lightHolder.scale,.6,{x:1,ease:Back.easeOut}),TweenMax.to(this.hologramFront.scale,.6,{x:1,ease:Back.easeOut,delay:.1}),TweenMax.to(this.hologramFront,.6,{alpha:1,ease:Sine.easeInOut,delay:.1}),TweenMax.to(this.captainManBodyLightmap,.6,{alpha:1,ease:Sine.easeInOut,delay:.1}),TweenMax.to(this.captainManHeadLightmap,.6,{alpha:1,ease:Sine.easeInOut,delay:.1}),TweenMax.to(this.captainManLeftArmBottomLightmap,.6,{alpha:1,ease:Sine.easeInOut,delay:.1}),TweenMax.to(this.captainManRightArmBottomLightmap,.6,{alpha:1,ease:Sine.easeInOut,delay:.1}),TweenMax.to(this.captainManLeftArmTopLightmap,.6,{alpha:1,ease:Sine.easeInOut,delay:.1}),TweenMax.to(this.captainManRightArmTopLightmap,.6,{alpha:1,ease:Sine.easeInOut,delay:.1}),TweenMax.to(this.henryBodyLightmap,.6,{alpha:1,ease:Sine.easeInOut,delay:.1}),TweenMax.to(this.henryHeadLightmap,.6,{alpha:1,ease:Sine.easeInOut,delay:.1}),TweenMax.to(this.henryLeftArmBottomLightmap,.6,{alpha:1,ease:Sine.easeInOut,delay:.1}),TweenMax.to(this.henryRightArmBottomLightmap,.6,{alpha:1,ease:Sine.easeInOut,delay:.1}),TweenMax.to(this.henryRightArmTopLightmap,.6,{alpha:1,ease:Sine.easeInOut,delay:.1}),TweenMax.to(this.henryLeftArmTopLightmap,.6,{alpha:1,ease:Sine.easeInOut,delay:.1})],.55),this.titleAnimation.add([TweenMax.from(this.titleThe.scale,.4,{x:2,y:2,ease:Back.easeOut}),TweenMax.to(this.titleThe,.4,{alpha:1,ease:Sine.easeInOut})],"-=0.9"),this.titleAnimation.add([TweenMax.from(this.titleDanger.position,.4,{x:"-=200",ease:Back.easeOut}),TweenMax.to(this.titleDanger,.4,{alpha:1,ease:Sine.easeInOut})],"-=0.7"),this.titleAnimation.add([TweenMax.from(this.titleTrials.scale,.4,{x:2,y:2,ease:Back.easeOut}),TweenMax.to(this.titleTrials,.4,{alpha:1,ease:Sine.easeInOut}),TweenMax.delayedCall(.25,function(){this.trialsBurst.fire()},null,this)],"-=0.5"),this.titleAnimation.add([TweenMax.to(this.greenLinesHolder,.2,{alpha:1,ease:Sine.easeInOut}),TweenMax.from(this.greenLine1.position,.6,{x:Game.stageWidth/2,y:Game.stageHeight/2,ease:Back.easeOut}),TweenMax.from(this.greenLine2.position,.5,{x:Game.stageWidth/2,y:Game.stageHeight/2,ease:Back.easeOut}),TweenMax.from(this.greenLine3.position,.5,{x:Game.stageWidth/2,y:Game.stageHeight/2,ease:Back.easeOut}),TweenMax.from(this.greenLine4.position,.6,{x:Game.stageWidth/2,y:Game.stageHeight/2,ease:Back.easeOut}),TweenMax.from(this.greenLine5.position,.6,{x:Game.stageWidth/2,y:Game.stageHeight/2,ease:Back.easeOut}),TweenMax.from(this.greenLine6.position,.5,{x:Game.stageWidth/2,y:Game.stageHeight/2,ease:Back.easeOut}),TweenMax.from(this.greenLine7.position,.5,{x:Game.stageWidth/2,y:Game.stageHeight/2,ease:Back.easeOut}),TweenMax.from(this.greenLine8.position,.6,{x:Game.stageWidth/2,y:Game.stageHeight/2,ease:Back.easeOut}),TweenMax.from(this.greenLine9.position,.6,{x:Game.stageWidth/2,y:Game.stageHeight/2,ease:Back.easeOut}),TweenMax.from(this.greenLine10.position,.5,{x:Game.stageWidth/2,y:Game.stageHeight/2,ease:Back.easeOut}),TweenMax.from(this.greenLine11.position,.6,{x:Game.stageWidth/2,y:Game.stageHeight/2,ease:Back.easeOut}),TweenMax.from(this.greenLine12.position,.5,{x:Game.stageWidth/2,y:Game.stageHeight/2,ease:Back.easeOut})],"-=0.5"),this.titleAnimation.add([TweenMax.from(this.star1.position,.3,{x:"-=200",y:"+=50",ease:Back.easeOut}),TweenMax.from(this.star1.scale,.3,{x:4,y:4,ease:Back.easeOut}),TweenMax.to(this.star1,.1,{alpha:1,ease:Sine.easeInOut}),TweenMax.delayedCall(.25,function(){this.starBurst1.fire()},null,this)],"-=0.2"),this.titleAnimation.add([TweenMax.from(this.star2.position,.3,{y:"+=50",ease:Back.easeOut}),TweenMax.from(this.star2.scale,.3,{x:4,y:4,ease:Back.easeOut}),TweenMax.to(this.star2,.1,{alpha:1,ease:Sine.easeInOut}),TweenMax.delayedCall(.25,function(){this.starBurst2.fire()},null,this)],"-=0.1"),this.titleAnimation.add([TweenMax.from(this.star3.position,.3,{x:"+=200",y:"+=50",ease:Back.easeOut}),TweenMax.from(this.star3.scale,.3,{x:4,y:4,ease:Back.easeOut}),TweenMax.to(this.star3,.1,{alpha:1,ease:Sine.easeInOut}),TweenMax.delayedCall(.25,function(){this.starBurst3.fire()},null,this)],"-=0"),this.titleAnimation.add([TweenMax.to(this.henryDangerLogo,.4,{alpha:1,ease:Sine.easeInOut}),TweenMax.to(this.clickToPlayHolder,.4,{alpha:1,ease:Sine.easeInOut,delay:.5})],2.5),this.loopingAnimation=new TimelineMax,this.loopingAnimation.add([TweenMax.from(this.hologramEffectBackHolder,100,{rotation:2*Math.PI,ease:Power0.easeInOut,repeat:-1})]),this.initialAnimation.timeScale(1.4),this.titleAnimation.timeScale(1.2),this.setUpHitArea()},e.prototype.glitchTick=function(){++this.glitchCount>=this.glitchLimit&&(this.glitchCount=0,this.glitchLimit=Game.getRandom(2,10,!0),this.targetGlitchAlpha=Game.getRandom(.75,.95),this.greenLineTargetAlpha=Game.getRandom(.5,.8),this.lightTopTargetAlpha=Game.getRandom(.5,.8),this.lightLinesTargetAlpha=Game.getRandom(.5,.8)),this.greenLine1.alpha=this.simpleEase(this.greenLine1.alpha,this.greenLineTargetAlpha,this.glitchEaseAmount),this.greenLine2.alpha=this.greenLine1.alpha,this.greenLine3.alpha=this.greenLine1.alpha,this.greenLine4.alpha=this.greenLine1.alpha,this.greenLine5.alpha=this.greenLine1.alpha,this.greenLine6.alpha=this.greenLine1.alpha,this.greenLine7.alpha=this.greenLine1.alpha,this.greenLine8.alpha=this.greenLine1.alpha,this.greenLine9.alpha=this.greenLine1.alpha,this.greenLine10.alpha=this.greenLine1.alpha,this.greenLine11.alpha=this.greenLine1.alpha,this.greenLine12.alpha=this.greenLine1.alpha,this.lightTop.alpha=this.simpleEase(this.lightTop.alpha,this.lightTopTargetAlpha,this.lightGlitchEaseAmount),this.lightLines.alpha=this.simpleEase(this.lightLines.alpha,this.lightLinesTargetAlpha,this.lightGlitchEaseAmount),1==this.characterHighlightsOn&&(this.captainManBodyLightmap.alpha=this.lightTop.alpha,this.captainManHeadLightmap.alpha=this.lightTop.alpha,this.captainManRightArmTopLightmap.alpha=this.lightTop.alpha,this.captainManLeftArmTopLightmap.alpha=this.lightTop.alpha,this.captainManLeftArmBottomLightmap.alpha=this.lightTop.alpha,this.captainManRightArmBottomLightmap.alpha=this.lightTop.alpha,this.henryRightArmBottomLightmap.alpha=this.lightTop.alpha,this.henryLeftArmBottomLightmap.alpha=this.lightTop.alpha,this.henryLeftArmTopLightmap.alpha=this.lightTop.alpha,this.henryRightArmTopLightmap.alpha=this.lightTop.alpha,this.henryBodyLightmap.alpha=this.lightTop.alpha,this.henryHeadLightmap.alpha=this.lightTop.alpha)},e.prototype.setUpHitArea=function(){this.clickArea.interactive=!0,this.clickArea.buttonMode=!0;var t=this;Game.onDesktop?this.clickArea.on("mouseup",function(e){Game.playSound("button-click-ui"),t.game.trackingEventsManager.trackGameEvent("play","true"),t.game.setScene("hubScene",!1)}):this.clickArea.on("touchend",function(e){Game.playSound("button-click-ui"),t.game.trackingEventsManager.trackGameEvent("play","true"),t.game.setScene("hubScene",!1)})},e.prototype.uiClicked=function(e){switch(t.prototype.uiClicked.call(this,e),e.id){case"playbuttonlarge":if(1==this.interactionLocked)return;this.interactionLocked=!0,this.game.setScene("gameIntro",!1)}},e.prototype.uiRolledOver=function(e){t.prototype.uiRolledOver.call(this,e)},e.prototype.tick=function(){t.prototype.tick.call(this),this.glitchTick(),0==this.characterHighlightsOn&&++this.characterHighlightTimer>=this.characterHighlightLimit&&(this.characterHighlightTimer=0,this.characterHighlightsOn=!0)},e.prototype.keyDown=function(t){},e.prototype.keyUp=function(t){},e.prototype.pause=function(e){0==e&&t.prototype.pause.call(this,e)},e.prototype.resume=function(){t.prototype.resume.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.initialAnimation=this.killTween(this.initialAnimation),this.loopingAnimation=this.killTween(this.loopingAnimation),this.titleAnimation=this.killTween(this.titleAnimation),Game.displayStore.returnPooledItem(this.redLines1),Game.displayStore.returnPooledItem(this.redLines2),Game.displayStore.returnPooledItem(this.redLines3),Game.displayStore.returnPooledItem(this.redLines4),Game.displayStore.returnPooledItem(this.blueLines1),Game.displayStore.returnPooledItem(this.blueLines2),Game.displayStore.returnPooledItem(this.blueLines3),Game.displayStore.returnPooledItem(this.blueLines4),Game.displayStore.returnPooledItem(this.whiteLines1),Game.displayStore.returnPooledItem(this.whiteLines2),Game.displayStore.returnPooledItem(this.whiteLines3),Game.displayStore.returnPooledItem(this.whiteLines4),Game.displayStore.returnPooledItem(this.hologramEffectBack1),Game.displayStore.returnPooledItem(this.hologramEffectBack2),Game.displayStore.returnPooledItem(this.hologramEffectBack3),Game.displayStore.returnPooledItem(this.hologramEffectBack4),Game.displayStore.returnPooledItem(this.star1),Game.displayStore.returnPooledItem(this.star2),Game.displayStore.returnPooledItem(this.star3),Game.displayStore.returnPooledItem(this.greenLine1),Game.displayStore.returnPooledItem(this.greenLine2),Game.displayStore.returnPooledItem(this.greenLine3),Game.displayStore.returnPooledItem(this.greenLine4),Game.displayStore.returnPooledItem(this.greenLine5),Game.displayStore.returnPooledItem(this.greenLine6),Game.displayStore.returnPooledItem(this.greenLine7),Game.displayStore.returnPooledItem(this.greenLine8),Game.displayStore.returnPooledItem(this.greenLine9),Game.displayStore.returnPooledItem(this.greenLine10),Game.displayStore.returnPooledItem(this.greenLine11),Game.displayStore.returnPooledItem(this.greenLine12),Game.displayStore.returnPooledItem(this.streak1),Game.displayStore.returnPooledItem(this.streak2),Game.displayStore.returnPooledItem(this.streak3),Game.displayStore.returnPooledItem(this.streak4);for(var e=0;e<this.gridTiles.length;e++)Game.displayStore.returnPooledItem(this.gridTiles[e]);this.starBurst1.destroy(),this.starBurst2.destroy(),this.starBurst3.destroy(),this.trialsBurst.destroy(),this.clickArea.removeAllListeners()},e}(Scene),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},HelpScene=function(t){function e(e){t.call(this,e),this.id="helpScene"}return __extends(e,t),e.prototype.init=function(e){t.prototype.init.call(this),this.setBackgroundColor(0),this.loadedHelpAssets=!1,this.gameId=Game.coreData.getCurrentGame(),this.colourOverlay=Game.displayStore.getSprite("help/screen-colour-overlay"),this.colourOverlay.width=Game.stageWidth,this.colourOverlay.height=Game.stageHeight,this.colourOverlay.alpha=1,this.container.addChild(this.colourOverlay),this.colourOverlay.blendMode=PIXI.BLEND_MODES.MULTIPLY,this.streak1=Game.displayStore.getSprite("help/streak-effect"),this.streak2=Game.displayStore.getSprite("help/streak-effect"),this.streak3=Game.displayStore.getSprite("help/streak-effect"),this.streak4=Game.displayStore.getSprite("help/streak-effect"),this.streak1.rotation=this.streak2.rotation=this.streak3.rotation=this.streak4.rotation=-.5,this.streak1.position.x=200,this.streak1.position.y=0,this.streak2.position.x=500,this.streak2.position.y=250,this.streak3.position.x=800,this.streak3.position.y=300,this.streak4.position.x=650,this.streak4.position.y=525,this.streak1.tint=16733011,this.streak2.tint=16733011,this.streak3.tint=366571,this.streak4.tint=366571,this.container.addChild(this.streak1),this.container.addChild(this.streak2),this.container.addChild(this.streak3),this.container.addChild(this.streak4);var i=0,n=0,o=0;this.gridTiles=new Array;for(var a=0;a<20;a++){var s=Game.displayStore.getSprite("help/screen-overlay-grid-tile-element");s.position.x=s.width*o,s.position.y=s.height*n,s.alpha=.1,s.blendMode=PIXI.BLEND_MODES.ADD,this.gridTiles.push(s),this.container.addChild(s),o++,++i>=6&&(i=0,n++,o=0)}this.game.ui.setUI("none"),this.loadingCircle=Game.displayStore.getSprite("help/help-loading-circle"),this.loadingCircle.position.x=Game.stageWidth/2,this.loadingCircle.position.y=Game.stageHeight/2,this.loadingCircle.visible=!0,this.container.addChild(this.loadingCircle);var r=this;this.game.loadAssets([this.gameId.id+"-tutorial-assets"],!1,function(){r.addTutorialOverlay(r),r.loadedHelpAssets=!0})},e.prototype.addTutorialOverlay=function(t){t.tutorialOverlay=new TutorialOverlay(t),t.tutorialOverlay.buildTutorial(t.gameId.id,!1),t.loadingCircle.visible=!1},e.prototype.uiClicked=function(e){switch(t.prototype.uiClicked.call(this,e),this.tutorialOverlay.uiClicked(e),e.id){case"close-button":case"back-button":this.returnToGame()}},e.prototype.returnToGame=function(){var t;switch(console.log("return to game",this.gameId.id),this.gameId.id){case"come-out-swinging":t="comeOutSwingingGameplayScene";break;case"mind-the-gap":t="mindTheGapGameplayScene";break;case"photon-fusion":t="photonFusionGameplayScene";break;case"baddie-barrage":t="baddieBarrageGameplayScene"}this.tutorialOverlay.remove(),this.game.setScene(t,!1)},e.prototype.uiRolledOver=function(e){t.prototype.uiRolledOver.call(this,e)},e.prototype.tick=function(){t.prototype.tick.call(this),1!=this.loadedHelpAssets&&(this.loadingCircle.rotation+=.05)},e.prototype.keyDown=function(t){},e.prototype.keyUp=function(t){},e.prototype.pause=function(e){0==e&&t.prototype.pause.call(this,e)},e.prototype.resume=function(){t.prototype.resume.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),Game.displayStore.returnPooledItem(this.streak1),Game.displayStore.returnPooledItem(this.streak2),Game.displayStore.returnPooledItem(this.streak3),Game.displayStore.returnPooledItem(this.streak4);for(var e=0;e<this.gridTiles.length;e++)Game.displayStore.returnPooledItem(this.gridTiles[e])},e}(Scene),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},HubScene=function(t){function e(e){t.call(this,e),this.id="hubScene"}return __extends(e,t),e.prototype.init=function(e){t.prototype.init.call(this),this.setBackgroundColor(4408131),this.playSounds=!1,this.game.ui.setUI("hub-skip"),this.captainIntroOn=!0,this.captainUnlockMouth=!1,e&&1==e[0]&&(this.playSounds=!0),1==Game.onDesktop&&(this.playSounds=!0),1==this.playSounds&&Game.playSound("hub/man-cave",.3),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("games"),this.mouthSwapCounter=-50,this.mouthSwapCounterLimit=20,this.captainBlinkCounterLimit=30,this.captainBlinkCounter=0,this.jasperBlinkCounterLimit=30,this.jasperBlinkCounter=0,this.charlotteBlinkCounterLimit=30,this.charlotteBlinkCounter=0,this.henryBlinkCounterLimit=30,this.henryBlinkCounter=0,this.fullHubMode=!0,this.currentGameID="",this.allowInput=!1,2==this.game.gameLaunchMode&&(this.fullHubMode=!1,this.currentGameID=Game.assetChunkManager.getCurrentGameId()),this.glitchCount=0,this.glitchLimit=10,this.linesFlickerCount=0,this.linesFlickerLimit=6,this.baseBeamWidth=1.5,this.glitchEaseLocked=!0,this.gameLogos=new Array,this.gameLogos.push({gameID:"photon-fusion",logo:Game.displayStore.getSprite("hub-scene/photon-logo"),glow:Game.displayStore.getSprite("hub-scene/photon-logo-glow"),overlay:Game.displayStore.getSprite("hub-scene/photon-logo-overlay"),tintColour:65535},{gameID:"mind-the-gap",logo:Game.displayStore.getSprite("hub-scene/gap-logo"),glow:Game.displayStore.getSprite("hub-scene/gap-logo-glow"),overlay:Game.displayStore.getSprite("hub-scene/gap-logo-overlay"),tintColour:65280},{gameID:"baddie-barrage",logo:Game.displayStore.getSprite("hub-scene/baddie-logo"),glow:Game.displayStore.getSprite("hub-scene/baddie-logo-glow"),overlay:Game.displayStore.getSprite("hub-scene/baddie-logo-overlay"),tintColour:16776960},{gameID:"come-out-swinging",logo:Game.displayStore.getSprite("hub-scene/swinging-logo"),glow:Game.displayStore.getSprite("hub-scene/swinging-logo-glow"),overlay:Game.displayStore.getSprite("hub-scene/swinging-logo-overlay"),tintColour:16711935}),this.gameLogos=this.shuffleArray(this.gameLogos);for(n=0;n<this.gameLogos.length;n++)this.gameLogos[n].logo.blendMode=PIXI.BLEND_MODES.ADD,this.gameLogos[n].glow.blendMode=PIXI.BLEND_MODES.ADD,this.gameLogos[n].logo.tint=this.gameLogos[n].tintColour,this.gameLogos[n].glow.tint=this.gameLogos[n].tintColour;this.gameStrings=new Array,this.gameStrings.push({gameID:"photon-fusion",textStringID:"game-logo-photon-fusion",text:null,tintColour:65535},{gameID:"mind-the-gap",textStringID:"game-logo-mind-the-gap",text:null,tintColour:65280},{gameID:"baddie-barrage",textStringID:"game-logo-baddie-barrage",text:null,tintColour:16776960},{gameID:"come-out-swinging",textStringID:"game-logo-come-out-swinging",text:null,tintColour:16711935}),this.gameStrings=this.shuffleArray(this.gameStrings);for(n=0;n<this.gameStrings.length;n++){var i=Game.displayStore.getBitmapText("hub-scene/logo-font");Game.stringsManager.setTextString(i,this.gameStrings[n].textStringID),i.position.x=0-i.width/2+Game.stringsManager.getTextOffset(this.gameStrings[n].textStringID).xOffset,i.position.y=0-i.height/2+Game.stringsManager.getTextOffset(this.gameStrings[n].textStringID).yOffset,i.tint=this.gameStrings[n].tintColour,this.gameStrings[n].text=i,this.gameStrings[n].text.blendMode=PIXI.BLEND_MODES.ADD}this.glitchEaseAmount=5,this.targetGlitchScale=0,this.targetGlitchAlpha=0,this.lightBeam1TargetXScale=1,this.lightBeam2TargetXScale=1,this.lightBeam1TargetAlpha=0,this.lightBeam2TargetAlpha=0,this.lightBeamLinesTargetAlpha=0,this.targetGlitchYPos=Game.stageHeight/2,this.screenHit=Game.displayStore.getSprite("hub-blank-input"),this.screenHit.width=Game.stageWidth,this.screenHit.height=Game.stageHeight,this.caveBG=Game.displayStore.getSprite("hub-scene/man-cave-bg"),this.caveLightMap=Game.displayStore.getSprite("hub-scene/man-cave-light-map"),this.caveBG.setRegPoint(.5,.5),this.caveLightMap.setRegPoint(.5,.5),this.caveBG.position.x=Game.stageWidth/2,this.caveBG.position.y=Game.stageHeight/2,this.caveLightMap.position.x=Game.stageWidth/2,this.caveLightMap.position.y=Game.stageHeight/2,this.caveBG.scale.x=1.5,this.caveBG.scale.y=1.5,this.caveLightMap.scale.x=1.5,this.caveLightMap.scale.y=1.5,this.holoFilterSprite=Game.displayStore.getSprite("hub-scene/holo-filter",!0),this.holoFilterSprite.position.x=Game.stageWidth/2,this.holoFilterSprite.position.y=Game.stageHeight/2,this.bulgeFilterSprite=Game.displayStore.getSprite("hub-scene/holo-bulge-filter",!0),this.bulgeFilterSprite.position.x=Game.stageWidth/2,this.bulgeFilterSprite.position.y=Game.stageHeight/2,this.logoHolder=Game.displayStore.getContainer("hub-scene/holo-logo-container"),this.lightHolder=Game.displayStore.getContainer("hub-scene/holo-lights-container"),this.holoFilter=new PIXI.filters.DisplacementFilter(this.holoFilterSprite),this.bulgeFilter=new PIXI.filters.DisplacementFilter(this.bulgeFilterSprite),this.zoomHolder=Game.displayStore.getContainer("hub-scene/zoom-holder"),this.container.addChild(this.zoomHolder),this.holoFilter.scale.x=0,this.holoFilter.scale.y=0,this.bulgeFilter.scale.x=50,this.bulgeFilter.scale.y=50,this.lightBeam1=Game.displayStore.getSprite("hub-scene/holo-light-beam"),this.lightBeam2=Game.displayStore.getSprite("hub-scene/holo-light-beam"),this.lightBeamLines1=Game.displayStore.getSprite("hub-scene/holo-light-lines"),this.lightBeamLines2=Game.displayStore.getSprite("hub-scene/holo-light-lines"),this.lightBeamLines2.visible=!1,this.lightBeam2.scale.x=-1,this.beamBottom=Game.displayStore.getSprite("hub-scene/beam-bottom"),this.beamBottom.blendMode=PIXI.BLEND_MODES.ADD,this.beamBottom.position.y=100,this.logoMaskHolder=Game.displayStore.getContainer("hub-scene/logo-mask-holder"),this.logoMaskShape=new PIXI.Graphics,this.logoMaskShape.beginFill(16777215),this.logoMaskShape.drawRect(0,0,600,598),this.logoMaskShape.endFill(),this.logoMaskHolder.addChild(this.logoMaskShape),this.logoMaskHolder.setRegPoint(.5,.5),this.logoMaskHolder.position.x=Game.stageWidth/2,this.logoMaskHolder.position.y=Game.stageHeight/2,this.zoomHolder.addChild(this.caveBG),this.zoomHolder.addChild(this.caveLightMap),this.secondaryCharactersHolder=Game.displayStore.getContainer("hub-scene/hub-secondary-characters-holder"),this.henryCharacterHolder=Game.displayStore.getContainer("hub-scene/hub-henry-character-holder"),this.secondaryCharacters=Game.displayStore.getSprite("hub-scene/hub-secondary-characters"),this.secondaryCharactersLightMap=Game.displayStore.getSprite("hub-scene/hub-secondary-characters-light-map"),this.secondaryCharactersLightMap.alpha=0,this.secondaryCharactersLightMap.blendMode=PIXI.BLEND_MODES.ADD,this.blinkAssetJasper=Game.displayStore.getSprite("hub-scene/blink-jasper"),this.blinkAssetJasper.position.x=100.5,this.blinkAssetJasper.position.y=88.5,this.blinkAssetJasper.visible=!1,this.blinkAssetCharlotte=Game.displayStore.getSprite("hub-scene/blink-charlotte"),this.blinkAssetCharlotte.position.x=185.5,this.blinkAssetCharlotte.position.y=89,this.blinkAssetCharlotte.visible=!1,this.secondaryCharactersHolder.addChild(this.secondaryCharacters),this.secondaryCharactersHolder.addChild(this.blinkAssetJasper),this.secondaryCharactersHolder.addChild(this.blinkAssetCharlotte),this.secondaryCharactersHolder.addChild(this.secondaryCharactersLightMap),this.secondaryCharactersHolder.position.x=-300,this.secondaryCharactersHolder.position.y=200,this.henryCharacter=Game.displayStore.getSprite("hub-scene/hub-henry"),this.henryCharacterLightMap=Game.displayStore.getSprite("hub-scene/hub-henry-light-map"),this.henryCharacterLightMap.alpha=0,this.henryCharacterLightMap.blendMode=PIXI.BLEND_MODES.ADD,this.blinkAssetHenry=Game.displayStore.getSprite("hub-scene/blink-henry"),this.blinkAssetHenry.position.x=43,this.blinkAssetHenry.position.y=79.5,this.blinkAssetHenry.visible=!1,this.henryCharacterHolder.addChild(this.henryCharacter),this.henryCharacterHolder.addChild(this.blinkAssetHenry),this.henryCharacterHolder.addChild(this.henryCharacterLightMap),this.henryCharacterHolder.position.x=1200,this.henryCharacterHolder.position.y=200,this.captainManHolder=Game.displayStore.getContainer("hub-scene/captain-man-holder"),this.captainManMouthHolder=Game.displayStore.getContainer("hub-scene/captain-man-mouth-holder"),this.captainMan=Game.displayStore.getSprite("hub-scene/captain-man-hologram"),this.captainMan.setRegPoint(.5,1),this.captainManMouths=new Array;for(var n=0;n<4;n++){var o=Game.displayStore.getSprite("hub-scene/captain-man-hologram-mouth-"+String(n));this.captainManMouthHolder.addChild(o),this.captainManMouths.push(o),o.visible=!1}this.captainManMouths[0].visible=!0,this.captainManHolder.addChild(this.captainMan),this.captainManHead=Game.displayStore.getSprite("hub-scene/captain-man-hologram-head"),this.captainManHeadBlink=Game.displayStore.getSprite("hub-scene/captain-man-hologram-head-blink"),this.captainManHeadBlink.visible=!1,this.captainManHead.setRegPoint(.5,1),this.captainManHeadBlink.setRegPoint(.5,1),this.captainManHead.position.y=0-this.captainMan.height,this.captainManHeadBlink.position.y=0-this.captainMan.height,this.captainManHolder.addChild(this.captainManHead),this.captainManHolder.addChild(this.captainManHeadBlink),this.captainManHolder.addChild(this.captainManMouthHolder),this.captainManMouthHolder.position.x=40,this.captainManMouthHolder.position.y=-667,this.captainManMouthHolder.alpha=.75,this.captainMan.blendMode=PIXI.BLEND_MODES.ADD,this.captainManHead.blendMode=PIXI.BLEND_MODES.ADD,this.captainManHeadBlink.blendMode=PIXI.BLEND_MODES.ADD,this.captainManHolder.position.x=Game.stageWidth/2,this.captainManHolder.position.y=870,this.zoomHolder.addChild(this.secondaryCharactersHolder),this.zoomHolder.addChild(this.henryCharacterHolder),this.zoomHolder.addChild(this.captainManHolder),this.caveLightMap.blendMode=PIXI.BLEND_MODES.ADD,this.caveLightMap.alpha=0,this.lightHolder.addChild(this.lightBeamLines1),this.lightHolder.addChild(this.lightBeamLines2),this.lightHolder.addChild(this.lightBeam1),this.lightHolder.addChild(this.lightBeam2),this.lightHolder.addChild(this.beamBottom),this.lightHolder.position.x=Game.stageWidth/2,this.lightHolder.position.y=Game.stageHeight,this.lightBeam1.blendMode=PIXI.BLEND_MODES.ADD,this.lightBeam2.blendMode=PIXI.BLEND_MODES.ADD,this.lightBeamLines1.blendMode=PIXI.BLEND_MODES.ADD,this.lightBeamLines2.blendMode=PIXI.BLEND_MODES.ADD,this.lightBeam1.alpha=.2,this.lightBeam2.alpha=.2,this.lightBeamLines1.alpha=.1,this.lightBeamLines2.alpha=.1,this.lightBeamLines1.scale.x=this.baseBeamWidth,this.lightBeamLines2.scale.x=-this.baseBeamWidth,this.lightBeam2.scale.x=.5,this.logoHolder.position.x=Game.stageWidth/2,this.logoHolder.position.y=Game.stageHeight/2,this.lightHolder.alpha=.8,this.zoomHolder.addChild(this.lightHolder),this.zoomHolder.addChild(this.logoHolder),this.zoomHolder.addChild(this.holoFilterSprite),this.zoomHolder.addChild(this.bulgeFilterSprite),this.captainManCaption0=Game.displayStore.getBitmapText("hub-scene/comic-font-0"),Game.stringsManager.setTextString(this.captainManCaption0,"captain-hub-caption-0"),this.captainManCaption0.position.x=Game.stageWidth/2-this.captainManCaption0.width/2+Game.stringsManager.getTextOffset("captain-hub-caption-0").xOffset,this.captainManCaption0.position.y=Game.stageHeight-50+Game.stringsManager.getTextOffset("captain-hub-caption-0").yOffset,this.captainManCaption1=Game.displayStore.getBitmapText("hub-scene/comic-font-1"),Game.stringsManager.setTextString(this.captainManCaption1,"captain-hub-caption-1"),this.captainManCaption1.position.x=Game.stageWidth/2-this.captainManCaption1.width/2+Game.stringsManager.getTextOffset("captain-hub-caption-1").yOffset,this.captainManCaption1.position.y=Game.stageHeight-50+Game.stringsManager.getTextOffset("captain-hub-caption-1").yOffset,this.captainManCaption2=Game.displayStore.getBitmapText("hub-scene/comic-font-2"),Game.stringsManager.setTextString(this.captainManCaption2,"captain-hub-caption-2"),this.captainManCaption2.position.x=Game.stageWidth/2-this.captainManCaption2.width/2+Game.stringsManager.getTextOffset("captain-hub-caption-2").yOffset,this.captainManCaption2.position.y=Game.stageHeight-50+Game.stringsManager.getTextOffset("captain-hub-caption-2").yOffset,this.zoomHolder.addChild(this.captainManCaption0),this.zoomHolder.addChild(this.captainManCaption1),this.zoomHolder.addChild(this.captainManCaption2),this.captainManCaption0.alpha=0,this.captainManCaption1.alpha=0,this.captainManCaption2.alpha=0,this.clickAnywhereMessage=Game.displayStore.getBitmapText("hub-scene/click-anywhere-message"),Game.stringsManager.setTextString(this.clickAnywhereMessage,"click-anywhere-message"),this.clickAnywhereMessage.position.x=Game.stageWidth/2-this.clickAnywhereMessage.width/2+Game.stringsManager.getTextOffset("click-anywhere-message").xOffset,this.clickAnywhereMessage.position.y=Game.stageHeight+50+Game.stringsManager.getTextOffset("click-anywhere-message").yOffset,this.bulgeFilterSprite.scale.x=1.5,this.bulgeFilterSprite.scale.y=1.5,this.zoomHolder.addChild(this.logoMaskHolder),this.zoomHolder.addChild(this.clickAnywhereMessage),this.zoomHolder.addChild(this.screenHit),this.screenHit.interactive=!0,this.screenHit.buttonMode=!0,this.zoomHolder.setRegPointPixels(Game.stageWidth/2,Game.stageHeight,!0),this.startCaptainManHologram()},e.prototype.startCaptainManHologram=function(){this.captainManHolder.mask=this.logoMaskShape,this.captainManHolder.filters=[this.holoFilter,this.bulgeFilter],this.glitchEaseLocked=!0,this.logoMaskHolder.scale.x=0,this.caveLightMap.tint=65535,this.lightBeam1.tint=65535,this.lightBeam2.tint=65535,this.lightBeamLines1.tint=65535,this.lightBeamLines2.tint=65535,this.bulgeFilter.scale.x=1,this.bulgeFilter.scale.y=1,this.caveLightMap.alpha=0,this.lightHolder.scale.x=0,this.secondaryCharactersLightMap.alpha=0,this.henryCharacterLightMap.alpha=0,this.holoFilter.scale.x=50,this.introTimeline=this.killTween(this.introTimeline),this.introTimeline=new TimelineMax,this.introTimeline.eventCallback("onComplete",this.killIntro,null,this),this.introTimeline.add([TweenMax.to(this.lightHolder.scale,.3,{x:1.5,y:1.5,ease:Quad.easeOut}),TweenMax.to(this.logoMaskHolder.scale,.4,{x:1,ease:Quad.easeOut}),TweenMax.to(this.caveLightMap,.4,{alpha:.15,ease:Quad.easeOut}),TweenMax.to(this.holoFilter.scale,.4,{x:1,y:1,ease:Quad.easeOut})],1),this.introTimeline.call(this.unlockGlitchEase,null,this,.4),this.introTimeline.call(this.unlockCaptainsMouth,null,this,1),this.introTimeline.add([TweenMax.to(this.captainManCaption0.position,2,{y:Game.stageHeight-400,ease:SlowMo.ease.config(.7,.8,!1)}),TweenMax.to(this.captainManCaption0,.2,{alpha:1,ease:Sine.easeOut,delay:0}),TweenMax.to(this.captainManCaption0,.2,{alpha:0,ease:Sine.easeOut,delay:1.8})],2),this.introTimeline.add([TweenMax.to(this.captainManCaption1.position,2,{y:Game.stageHeight-400,ease:SlowMo.ease.config(.7,.8,!1)}),TweenMax.to(this.captainManCaption1,.2,{alpha:1,ease:Sine.easeOut,delay:0}),TweenMax.to(this.captainManCaption1,.2,{alpha:0,ease:Sine.easeOut,delay:1.8})],4),this.introTimeline.add([TweenMax.to(this.captainManCaption2.position,2,{y:Game.stageHeight-400,ease:SlowMo.ease.config(.7,.8,!1)}),TweenMax.to(this.captainManCaption2,.2,{alpha:1,ease:Sine.easeOut,delay:0}),TweenMax.to(this.captainManCaption2,.2,{alpha:0,ease:Sine.easeOut,delay:1.8})],6),this.introTimeline.add([TweenMax.to(this.lightHolder.scale,.3,{x:0,y:1,ease:Quad.easeOut}),TweenMax.to(this.logoMaskHolder.scale,.4,{x:0,ease:Quad.easeOut}),TweenMax.to(this.caveLightMap,.4,{alpha:0,ease:Quad.easeOut}),TweenMax.to(this.holoFilter.scale,.4,{x:20,y:20,ease:Quad.easeOut})],8),this.introTimeline.add([TweenMax.to(this.caveBG.scale,1,{x:1,y:1,ease:Sine.easeOut}),TweenMax.to(this.caveLightMap.scale,1,{x:1,y:1,ease:Sine.easeOut}),TweenMax.to(this.henryCharacterHolder.position,1,{x:800,ease:Sine.easeOut}),TweenMax.to(this.secondaryCharactersHolder.position,1,{x:-40,ease:Sine.easeOut}),TweenMax.to(this.beamBottom.position,1,{y:0,ease:Sine.easeOut})],8),this.introTimeline.call(this.lockGlitchEase,null,this,8),this.introTimeline.call(this.introHologramEnd,null,this,8),1==this.playSounds&&(this.introTimeline.call(Game.playSound,["hub/swoosh-1"],this,.5),this.introTimeline.call(Game.playSound,["hub/hologram-startup",.5],this,1)),this.introTimeline.add(TweenMax.from(this.zoomHolder.scale,1.5,{x:5,y:5,ease:Power4.easeInOut}),0)},e.prototype.unlockCaptainsMouth=function(){this.captainUnlockMouth=!0},e.prototype.killIntro=function(){this.captainManHolder.filters=[],this.captainManHolder.mask=null,this.zoomHolder.removeChild(this.captainManHolder),this.logoHolder.filters=[this.holoFilter,this.bulgeFilter],this.logoHolder.mask=this.logoMaskShape,this.captainIntroOn=!1,1==this.fullHubMode?(this.game.ui.setUI("hub"),this.startHologram(!0)):(this.game.ui.setUI("hub-single-game"),this.startHologram(!1)),this.addLaunchListener()},e.prototype.startHologram=function(t){if(0==t){if(1==this.game.getUseLogos()){for(e=0;e<this.gameLogos.length;e++)if(this.gameLogos[e].gameID==this.currentGameID){this.currentGameIndex=e;break}}else for(var e=0;e<this.gameStrings.length;e++)if(this.gameStrings[e].gameID==this.currentGameID){this.currentGameIndex=e;break}}else 1==t&&(this.currentGameIndex=0);this.logoMaskHolder.scale.x=0,this.lightHolder.scale.x=0,this.bulgeFilterSprite.scale.x=1,this.bulgeFilterSprite.scale.y=1,this.holoFilter.scale.x=50,this.holoFilter.scale.y=1,this.caveLightMap.alpha=0,1==this.game.getUseLogos()?(this.logoHolder.addChild(this.gameLogos[this.currentGameIndex].glow),this.logoHolder.addChild(this.gameLogos[this.currentGameIndex].logo),this.logoHolder.addChild(this.gameLogos[this.currentGameIndex].overlay),this.lightBeam1.tint=this.gameLogos[this.currentGameIndex].tintColour,this.lightBeam2.tint=this.gameLogos[this.currentGameIndex].tintColour,this.lightBeamLines1.tint=this.gameLogos[this.currentGameIndex].tintColour,this.lightBeamLines2.tint=this.gameLogos[this.currentGameIndex].tintColour,this.caveLightMap.tint=this.gameLogos[this.currentGameIndex].tintColour,this.secondaryCharactersLightMap.tint=this.gameLogos[this.currentGameIndex].tintColour,this.henryCharacterLightMap.tint=this.gameLogos[this.currentGameIndex].tintColour,this.gameLogos[this.currentGameIndex].glow.alpha=.85,this.gameLogos[this.currentGameIndex].logo.alpha=1):(this.logoHolder.addChild(this.gameStrings[this.currentGameIndex].text),this.lightBeam1.tint=this.gameStrings[this.currentGameIndex].tintColour,this.lightBeam2.tint=this.gameStrings[this.currentGameIndex].tintColour,this.lightBeamLines1.tint=this.gameStrings[this.currentGameIndex].tintColour,this.lightBeamLines2.tint=this.gameStrings[this.currentGameIndex].tintColour,this.caveLightMap.tint=this.gameStrings[this.currentGameIndex].tintColour,this.secondaryCharactersLightMap.tint=this.gameStrings[this.currentGameIndex].tintColour,this.henryCharacterLightMap.tint=this.gameStrings[this.currentGameIndex].tintColour),this.cycleHologramTimeline=this.killTween(this.cycleHologramTimeline),this.cycleHologramTimeline=new TimelineMax,this.cycleHologramTimeline.add([TweenMax.to(this.logoMaskHolder.scale,.3,{x:1,ease:Quad.easeIn}),TweenMax.to(this.lightHolder.scale,.2,{x:1,ease:Quad.easeIn}),TweenMax.to(this.bulgeFilterSprite.scale,.3,{x:1.5,y:1.5,ease:Quad.easeIn}),TweenMax.to(this.holoFilter.scale,.2,{x:1,ease:Quad.easeIn}),TweenMax.to(this.caveLightMap,.3,{alpha:.15,ease:Quad.easeOut}),TweenMax.to(this.secondaryCharactersLightMap,.3,{alpha:.4,ease:Quad.easeOut}),TweenMax.to(this.henryCharacterLightMap,.3,{alpha:.4,ease:Quad.easeOut})],.5),this.cycleHologramTimeline.call(this.unlockGlitchEase,null,this,1),this.cycleHologramTimeline.call(this.introHologramStart,null,this,.5),this.clickMessageOnAnim=this.killTween(this.clickMessageOnAnim),this.clickMessageOnAnim=TweenMax.to(this.clickAnywhereMessage.position,.5,{y:Game.stageHeight-100,ease:Expo.easeOut,delay:1})},e.prototype.nextLogo=function(t){this.targetGlitchScale=0,this.cycleHologramTimeline=this.killTween(this.cycleHologramTimeline),this.cycleHologramTimeline=new TimelineMax,this.glitchEaseLocked=!0,this.allowInput=!1,this.cycleHologramTimeline.call(this.introHologramEnd,null,this,0),this.cycleHologramTimeline.add([TweenMax.to(this.logoMaskHolder.scale,.3,{x:0,ease:Quad.easeOut}),TweenMax.to(this.lightHolder.scale,.2,{x:0,ease:Quad.easeOut}),TweenMax.to(this.bulgeFilterSprite.scale,.3,{x:1,y:1,ease:Quad.easeOut}),TweenMax.to(this.holoFilter.scale,.2,{x:50,ease:Quad.easeOut}),TweenMax.to(this.caveLightMap,.3,{alpha:0,ease:Quad.easeOut}),TweenMax.to(this.secondaryCharactersLightMap,.3,{alpha:0,ease:Quad.easeOut}),TweenMax.to(this.henryCharacterLightMap,.3,{alpha:0,ease:Quad.easeOut})],0),this.cycleHologramTimeline.call(this.setNewLogo,null,this,.5),this.cycleHologramTimeline.add([TweenMax.to(this.logoMaskHolder.scale,.3,{x:1,ease:Quad.easeIn}),TweenMax.to(this.lightHolder.scale,.2,{x:1,ease:Quad.easeIn}),TweenMax.to(this.bulgeFilterSprite.scale,.3,{x:1.5,y:1.5,ease:Quad.easeIn}),TweenMax.to(this.holoFilter.scale,.2,{x:1,ease:Quad.easeIn}),TweenMax.to(this.caveLightMap,.3,{alpha:.15,ease:Quad.easeOut}),TweenMax.to(this.secondaryCharactersLightMap,.3,{alpha:.4,ease:Quad.easeOut}),TweenMax.to(this.henryCharacterLightMap,.3,{alpha:.4,ease:Quad.easeOut})],.5),this.cycleHologramTimeline.call(this.unlockGlitchEase,null,this,1),this.cycleHologramTimeline.call(this.introHologramStart,null,this,.6),this.currentGameIndex+=t,this.currentGameIndex>this.gameLogos.length-1&&(this.currentGameIndex=0),this.currentGameIndex<0&&(this.currentGameIndex=this.gameLogos.length-1)},e.prototype.introHologramStart=function(){if(1==this.playSounds){Game.playSound("hub/hologram-startup",.5);var t=["hub/jasper-ooo","hub/henry-word-test","hub/henry-sounds-fun","hub/group-wow"],e=Game.getRandom(0,t.length,!0);TweenMax.delayedCall(.5,Game.playSound,[t[e]],this)}},e.prototype.introHologramEnd=function(){1==this.playSounds&&Game.playSound("hub/hologram-shutdown",.5)},e.prototype.unlockGlitchEase=function(){this.glitchEaseLocked=!1,this.allowInput=!0},e.prototype.lockGlitchEase=function(){this.glitchEaseLocked=!0,this.secondaryCharactersLightMap.alpha=0,this.henryCharacterLightMap.alpha=0,this.captainUnlockMouth=!1},e.prototype.setNewLogo=function(){this.logoHolder.removeAllChildren(),1==this.game.getUseLogos()?(this.logoHolder.addChild(this.gameLogos[this.currentGameIndex].glow),this.logoHolder.addChild(this.gameLogos[this.currentGameIndex].logo),this.logoHolder.addChild(this.gameLogos[this.currentGameIndex].overlay),this.lightBeam1.tint=this.gameLogos[this.currentGameIndex].tintColour,this.lightBeam2.tint=this.gameLogos[this.currentGameIndex].tintColour,this.lightBeamLines1.tint=this.gameLogos[this.currentGameIndex].tintColour,this.lightBeamLines2.tint=this.gameLogos[this.currentGameIndex].tintColour,this.caveLightMap.tint=this.gameLogos[this.currentGameIndex].tintColour,this.secondaryCharactersLightMap.tint=this.gameLogos[this.currentGameIndex].tintColour,this.henryCharacterLightMap.tint=this.gameLogos[this.currentGameIndex].tintColour,this.gameLogos[this.currentGameIndex].glow.alpha=.85,this.gameLogos[this.currentGameIndex].logo.alpha=1):(this.logoHolder.addChild(this.gameStrings[this.currentGameIndex].text),this.lightBeam1.tint=this.gameStrings[this.currentGameIndex].tintColour,this.lightBeam2.tint=this.gameStrings[this.currentGameIndex].tintColour,this.lightBeamLines1.tint=this.gameStrings[this.currentGameIndex].tintColour,this.lightBeamLines2.tint=this.gameStrings[this.currentGameIndex].tintColour,this.caveLightMap.tint=this.gameStrings[this.currentGameIndex].tintColour,this.secondaryCharactersLightMap.tint=this.gameStrings[this.currentGameIndex].tintColour,this.henryCharacterLightMap.tint=this.gameStrings[this.currentGameIndex].tintColour)},e.prototype.addLaunchListener=function(){var t=this;1==Game.onDesktop?this.screenHit.on("mouseup",function(e){t.initGameLoad(t)}):this.screenHit.on("touchend",function(e){t.initGameLoad(t)})},e.prototype.initGameLoad=function(t){if(0!=t.allowInput){t.allowInput=!1,Game.playSound("button-click-ui");var e;e=1==t.game.getUseLogos()?t.gameLogos[t.currentGameIndex].gameID:t.gameStrings[t.currentGameIndex].gameID,console.log("game id....",e,t.currentGameIndex),Game.assetChunkManager.setCurrentGameId(e),Game.assetChunkManager.generateLoadChunkParams("game"),t.game.loadAssets(Game.assetChunkManager.getLoadAssets(),!0,function(){t.game.setScene(Game.assetChunkManager.getTargetInitialScene(),!0)})}},e.prototype.uiClicked=function(e){switch(t.prototype.uiClicked.call(this,e),e.id){case"skip-button":this.skipIntro();break;case"hub-button-left":if(0==this.allowInput)return;this.nextLogo(-1);break;case"hub-button-right":if(0==this.allowInput)return;this.nextLogo(1)}},e.prototype.skipIntro=function(){this.introTimeline.totalProgress(1)},e.prototype.tick=function(){t.prototype.tick.call(this),++this.linesFlickerCount>=this.linesFlickerLimit&&(this.linesFlickerCount=0,this.switchLightLines()),this.captainIntroTick(),this.menuTick(),this.glitchTick()},e.prototype.captainIntroTick=function(){0!=this.captainIntroOn&&(++this.captainBlinkCounter>=this.captainBlinkCounterLimit&&(this.captainBlinkCounter=0,this.blinkCaptain()),0==this.glitchEaseLocked&&(this.holoFilter.scale.x=this.simpleEase(this.holoFilter.scale.x,this.targetGlitchScale,this.glitchEaseAmount),this.caveLightMap.alpha=this.targetGlitchAlpha/6),this.captainMan.alpha=this.simpleEase(this.captainManHolder.alpha,this.targetGlitchAlpha,this.glitchEaseAmount),0!=this.captainUnlockMouth&&++this.mouthSwapCounter>=this.mouthSwapCounterLimit&&(this.mouthSwapCounter=0,this.swapCaptainMouth()))},e.prototype.menuTick=function(){1!=this.captainIntroOn&&(++this.henryBlinkCounter>=this.henryBlinkCounterLimit&&(this.henryBlinkCounter=0,this.blinkHenry()),++this.charlotteBlinkCounter>=this.charlotteBlinkCounterLimit&&(this.charlotteBlinkCounter=0,this.blinkCharlotte()),++this.jasperBlinkCounter>=this.jasperBlinkCounterLimit&&(this.jasperBlinkCounter=0,this.blinkJasper()),0==this.glitchEaseLocked&&(this.holoFilter.scale.x=this.simpleEase(this.holoFilter.scale.x,this.targetGlitchScale,this.glitchEaseAmount),this.caveLightMap.alpha=this.targetGlitchAlpha/6,this.secondaryCharactersLightMap.alpha=this.targetGlitchAlpha/2,this.henryCharacterLightMap.alpha=this.targetGlitchAlpha/2),this.logoHolder.alpha=this.simpleEase(this.logoHolder.alpha,this.targetGlitchAlpha,this.glitchEaseAmount))},e.prototype.glitchTick=function(){if(++this.glitchCount>=this.glitchLimit){this.glitchCount=0,this.glitchLimit=Game.getRandom(2,10,!0);var t=Game.getRandom(0,4);this.targetGlitchScale=t,this.targetGlitchYPos=Game.stageHeight/2+Game.getRandom(-60,60),this.targetGlitchAlpha=Game.getRandom(.75,.95),this.lightBeam1TargetAlpha=Game.getRandom(.1,.2),this.lightBeam2TargetAlpha=Game.getRandom(.05,.1),this.lightBeam1TargetXScale=this.baseBeamWidth*Game.getRandom(.6,.9),this.lightBeam2TargetXScale=this.baseBeamWidth*Game.getRandom(.7,1),this.lightBeamLinesTargetAlpha=Game.getRandom(.1,.2)}this.holoFilterSprite.position.y=this.simpleEase(this.holoFilterSprite.position.y,this.targetGlitchYPos,this.glitchEaseAmount),this.lightBeam1.scale.x=this.simpleEase(this.lightBeam1.scale.x,this.lightBeam1TargetXScale,this.glitchEaseAmount),this.lightBeam2.scale.x=this.simpleEase(this.lightBeam2.scale.x,this.lightBeam2TargetXScale,this.glitchEaseAmount),this.lightBeam1.alpha=this.simpleEase(this.lightBeam1.alpha,this.lightBeam1TargetAlpha,this.glitchEaseAmount),this.lightBeam2.alpha=this.simpleEase(this.lightBeam2.alpha,this.lightBeam2TargetAlpha,this.glitchEaseAmount)},e.prototype.blinkCaptain=function(){if(1==this.captainManHeadBlink.visible){if(Game.getRandom(0,1)<.5)return;this.captainBlinkCounterLimit=Game.getRandom(40,100),this.captainManHeadBlink.visible=!1,this.captainManHead.visible=!0}else 0==this.captainManHeadBlink.visible&&(this.captainManHeadBlink.visible=!0,this.captainManHead.visible=!1,this.captainBlinkCounterLimit=6)},e.prototype.blinkCharlotte=function(){if(1==this.blinkAssetCharlotte.visible){if(Game.getRandom(0,1)<.5)return;this.charlotteBlinkCounterLimit=Game.getRandom(40,100),this.blinkAssetCharlotte.visible=!1}else 0==this.blinkAssetCharlotte.visible&&(this.blinkAssetCharlotte.visible=!0,this.charlotteBlinkCounterLimit=6)},e.prototype.blinkHenry=function(){if(1==this.blinkAssetHenry.visible){if(Game.getRandom(0,1)<.5)return;this.henryBlinkCounterLimit=Game.getRandom(40,100),this.blinkAssetHenry.visible=!1}else 0==this.blinkAssetHenry.visible&&(this.blinkAssetHenry.visible=!0,this.henryBlinkCounterLimit=6)},e.prototype.blinkJasper=function(){if(1==this.blinkAssetJasper.visible){if(Game.getRandom(0,1)<.5)return;this.jasperBlinkCounterLimit=Game.getRandom(40,100),this.blinkAssetJasper.visible=!1}else 0==this.blinkAssetJasper.visible&&(this.blinkAssetJasper.visible=!0,this.jasperBlinkCounterLimit=6)},e.prototype.switchLightLines=function(){0==this.lightBeamLines1.visible?(this.lightBeamLines1.visible=!0,this.lightBeamLines2.visible=!1):1==this.lightBeamLines1.visible&&(this.lightBeamLines1.visible=!1,this.lightBeamLines2.visible=!0)},e.prototype.swapCaptainMouth=function(){for(var t=0;t<this.captainManMouths.length;t++)this.captainManMouths[t].visible=!1;var e=Game.getRandom(1,this.captainManMouths.length-1,!0);this.captainManMouths[e].visible=!0,this.mouthSwapCounterLimit=Game.getRandom(2,10,!0)},e.prototype.keyDown=function(t){},e.prototype.keyUp=function(t){},e.prototype.pause=function(e){0==e&&t.prototype.pause.call(this,e)},e.prototype.resume=function(){t.prototype.resume.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.cycleHologramTimeline=this.killTween(this.cycleHologramTimeline),this.introTimeline=this.killTween(this.introTimeline),this.clickMessageOnAnim=this.killTween(this.clickMessageOnAnim),this.screenHit.removeAllListeners(),this.logoHolder.filters=[],this.logoHolder.mask=null,this.captainManHolder.filters=[],this.captainManHolder.mask=null,this.logoMaskShape.clear(),this.logoMaskShape=null,Game.stopSound("hub/man-cave"),Game.stopSound("hub/hologram-startup"),Game.stopSound("hub/hologram-shutdown");for(var e=0;e<this.gameStrings.length;e++)Game.displayStore.returnPooledItem(this.gameStrings[e].text)},e}(Scene),CoreData=function(){function t(t){this.firstTime=!0,this.gameData=new Array,this.currentGame={id:null},this.game=t,this.gameData=[{id:"come-out-swinging",active:!0,lastScore:0,highScore:0,lastStars:0,tutorialViewed:!1},{id:"mind-the-gap",active:!0,lastScore:0,highScore:0,lastStars:0,tutorialViewed:!1},{id:"photon-fusion",active:!0,lastScore:0,highScore:0,lastStars:0,tutorialViewed:!1},{id:"baddie-barrage",active:!0,lastScore:0,highScore:0,lastStars:0,tutorialViewed:!1}]}return t.prototype.setCurrentGame=function(t){this.currentGame.id=t},t.prototype.getCurrentGame=function(){return this.currentGame},t.prototype.getGameData=function(t){for(var e=[],i=0;i<this.gameData.length;i++)t&&t==this.gameData[i].id&&e.push(this.gameData[i]);return t||(e=this.gameData),e},t.prototype.setGameScore=function(t){for(var e=0;e<this.gameData.length;e++)this.gameData[e].id==t.id&&(this.gameData[e].lastScore=t.score)},t.prototype.setGameHighScore=function(t){for(var e=0;e<this.gameData.length;e++)this.gameData[e].id==t.id&&(this.gameData[e].highScore=t.score)},t.prototype.setGameData=function(t){for(var e=0;e<t.length;e++)this.gameData[e].id=t[e].id,this.gameData[e].lastScore=t[e].lastScore,this.gameData[e].highScore=t[e].highScore,this.gameData[e].lastStars=t[e].lastStars,this.gameData[e].tutorialViewed=t[e].tutorialViewed},t.prototype.getGameTutorialViewed=function(t){for(var e=!0,i=0;i<this.gameData.length;i++)if(this.gameData[i].id==t){e=this.gameData[i].tutorialViewed;break}return e},t.prototype.setGameTutorialViewed=function(t){for(var e=0;e<this.gameData.length;e++)if(this.gameData[e].id==t){this.gameData[e].tutorialViewed=!0;break}Game.saveProgress()},t.prototype.setCurrentGameScoreFromGame=function(t,e){for(var i=0;i<this.gameData.length;i++)if(this.gameData[i].id==this.currentGame.id){this.gameData[i].lastScore=t,this.gameData[i].lastStars=e||0;break}},t.prototype.updateHighScoreFromGameOver=function(t){for(var e=0;e<this.gameData.length;e++)if(this.gameData[e].id==this.currentGame.id){this.gameData[e].highScore=t;break}},t.prototype.getCurrentGameScore=function(t){for(var e,i=0;i<this.gameData.length;i++)this.gameData[i].id==this.currentGame.id&&(e=t?this.gameData[i].highScore:this.gameData[i].lastScore);return e},t.prototype.setFirstTime=function(t){this.firstTime=t},t}(),XMLManager=function(){function t(t){this.game=t}return t.prototype.parseXML=function(t,e){"config"==e?this.parseConfigXML(t):"localization"==e&&this.parseLocalizationXML(t)},t.prototype.parseConfigXML=function(t){for(var e=t,i=e.getElementsByTagName("localization"),n=0;n<i[0].childNodes.length;n++)if("languagecode"==(p=i[0].childNodes[n]).nodeName){this.game.setLanguageCode(p.textContent);break}for(var o=e.getElementsByTagName("votoggle"),n=0;n<o[0].childNodes.length;n++)if("vo"==(p=o[0].childNodes[n]).nodeName){"on"==p.textContent?this.game.setVOActive(!0):"off"==p.textContent&&this.game.setVOActive(!1);break}for(var a=e.getElementsByTagName("logotoggle"),n=0;n<a[0].childNodes.length;n++)if("uselogos"==(p=a[0].childNodes[n]).nodeName){"on"==p.textContent?this.game.setUseLogos(!0):"off"==p.textContent&&this.game.setUseLogos(!1);break}for(var s,r,h=e.getElementsByTagName("services"),l=null,n=0;n<h[0].childNodes.length;n++){var p=h[0].childNodes[n];if("service"==p.nodeName){for(var c=0;c<p.attributes.length;c++)"type"==p.attributes[c].nodeName&&(s=p.attributes[c].textContent),"enabled"==p.attributes[c].nodeName&&(r=p.attributes[c].textContent),"showGameTitle"==p.attributes[c].nodeName&&(l=p.attributes[c].textContent);if(!s||!r)return;this.setServiceParams(s,r,l)}}},t.prototype.setServiceParams=function(t,e,i){var n;switch("true"==e?n=!0:"false"==e&&(n=!1),t){case"eventReporting":this.game.trackingEventsManager.setTrackingParams(n,i);break;case"localStorage":this.game.setLocalStorageEnabled(n)}},t.prototype.parseLocalizationXML=function(t){for(var e,i=this.game.getCurrentLanguageCode(),n=t.getElementsByTagName("language"),o=0;o<n.length;o++)for(c=0;c<n[o].attributes.length;c++)if("id"==n[o].attributes[c].nodeName&&n[o].attributes[c].textContent==i){e=o;break}for(o=0;o<n[e].attributes.length;o++)"alphabet"==n[e].attributes[o].nodeName&&this.game.setAlphabet(n[e].attributes[o].textContent);for(var a,s,r,h,l,o=0;o<n[e].childNodes.length;o++){var p=n[e].childNodes[o];if(p.attributes){for(var c=0;c<p.attributes.length;c++)"id"==p.attributes[c].nodeName&&(a=p.attributes[c].textContent),"fontScale"==p.attributes[c].nodeName&&(s=Number(p.attributes[c].textContent)),"offsetX"==p.attributes[c].nodeName&&(r=Number(p.attributes[c].textContent)),"offsetY"==p.attributes[c].nodeName&&(h=Number(p.attributes[c].textContent));l=p.textContent,Game.stringsManager.addString({id:a,fontScale:s,offsetX:r,offsetY:h,text:l})}}},t}(),StringsManager=function(){function t(t){this.game=t,this.strings=new Array}return t.prototype.addString=function(t){if(1==this.checkDuplicate(t.id))throw ReferenceError("Oops! We've detected another string with the same ID: "+t.id);this.strings.push({id:t.id,fontScale:t.fontScale,offsetX:t.offsetX,offsetY:t.offsetY,text:this.replaceLineBreaks(t.text)})},t.prototype.checkDuplicate=function(t){for(var e=!1,i=0;i<this.strings.length;i++)if(this.strings[i].id==t){e=!0;break}return e},t.prototype.setTextString=function(t,e){for(var i=0;i<this.strings.length;i++)if(e==this.strings[i].id){t.text=this.strings[i].text,t.scale.x=this.strings[i].fontScale,t.scale.y=this.strings[i].fontScale;break}},t.prototype.getTextOffset=function(t){for(var e=0,i=0,n=0;n<this.strings.length;n++)if(t==this.strings[n].id){e=this.strings[n].offsetX,i=this.strings[n].offsetY;break}return{xOffset:e,yOffset:i}},t.prototype.setTextScale=function(t,e){for(var i=0;i<this.strings.length;i++)if(e==this.strings[i].id){t.scale.x=this.strings[i].fontScale,t.scale.y=this.strings[i].fontScale;break}},t.prototype.getStringTextContent=function(t){for(var e=0;e<this.strings.length;e++)if(t==this.strings[e].id)return this.strings[e].text},t.prototype.replaceLineBreaks=function(t){return t.replace(new RegExp("<br>","g"),"\n")},t}(),PowerUpManager=function(){function t(t){this.game=t,this.powerUpInUse=!1,this.powerUpButtonEnabled=!1,this.startWaiting=!1,this.totalFocusPoints=5,this.currentFocusPoints=0,this.betweenRoundPause=!1,this.buttonManuallyDisabled=!1}return t.prototype.manuallyShowPowerUpButton=function(){this.buttonManuallyDisabled=!1,this.resumeGame(!0)},t.prototype.manuallyHidePowerUpButton=function(){this.buttonManuallyDisabled=!0,this.game.ui.hidePowerUpButton()},t.prototype.startGame=function(){this.currentGameID=this.game.currentScene.id,this.startWaiting=!0,this.buttonManuallyDisabled=!1,this.game.ui.hidePowerUpButton(),this.startDelay=TweenMax.delayedCall(1.5,function(){this.startWaiting=!1,this.resetPowerUpButton()},null,this)},t.prototype.resumeGame=function(t){this.resetPowerUpButton(t)},t.prototype.earnedFocusPoint=function(){1!=this.powerUpInUse&&(0==this.powerUpButtonEnabled&&this.game.ui.animateFocusPoint(this.currentFocusPoints),++this.currentFocusPoints>this.totalFocusPoints&&(this.currentFocusPoints=this.totalFocusPoints),this.updatePowerUpButtonState(),this.game.ui.setFocusMeterState(this.currentFocusPoints))},t.prototype.endPowerUpMode=function(){this.game.currentScene.deactivatePowerUpEffect(),this.powerUpInUse=!1,this.resetPowerUpButton()},t.prototype.updatePowerUpButtonState=function(){if(this.currentFocusPoints>=this.totalFocusPoints){if(1==this.powerUpButtonEnabled)return;this.enablePowerUpButton()}else this.disablePowerUpButton()},t.prototype.enablePowerUpButton=function(){3!=this.game.gameLaunchMode&&1!=this.powerUpInUse&&(this.powerUpButtonEnabled=!0,this.game.ui.enablePowerupButton(this.powerUpButtonEnabled,!1))},t.prototype.disablePowerUpButton=function(){this.powerUpButtonEnabled=!1,this.game.ui.disablePowerUpButton()},t.prototype.activatePowerUp=function(){if(1!=this.powerUpInUse&&0!=this.powerUpButtonEnabled){this.updatePowerUpButtonState(),this.game.currentScene.activatePowerUpEffect(),this.currentFocusPoints=0,this.game.ui.setFocusMeterState(0),this.game.ui.hidePowerUpButton();Game.coreData.getCurrentGame().id;this.powerUpInUse=!0}},t.prototype.resetPowerUpButton=function(t){if(1!=this.powerUpInUse&&1!=this.buttonManuallyDisabled&&1!=this.startWaiting){var e=!1;t&&(e=t),this.updatePowerUpButtonState(),this.game.ui.enablePowerupButton(this.powerUpButtonEnabled,e)}},t.prototype.killPowerUpUI=function(){this.powerUpButtonEnabled=!1},t.prototype.tick=function(){},t.prototype.pause=function(){1!=this.betweenRoundPause&&1==this.startWaiting&&this.startDelay.pause()},t.prototype.resume=function(){1!=this.betweenRoundPause&&(1==this.startWaiting?this.startDelay.resume():this.updatePowerUpButtonState())},t.prototype.sceneDestroy=function(t){t==this.currentGameID&&(1==this.powerUpInUse&&(this.powerUpInUse=!1),1==this.startWaiting&&(this.startDelay=this.killTween(this.startDelay)))},t.prototype.destroy=function(){},t.prototype.killTween=function(t){return t&&(t.kill(),t=null),t},t}(),AssetChunkManager=function(){function t(t){this.devMode=!1,this.devModeGameID="mind-the-gap",this.game=t,this.firstLoad=!0}return t.prototype.storeInitialAssets=function(t){this.storedInitialAssets=t},t.prototype.generateLoadChunkParams=function(t){if(console.log("generate asset list.................",t,this.currentGameId,this.firstLoad,this.currentGameLaunchMode),1==this.firstLoad?this.loadAssets=this.storedInitialAssets:0==this.firstLoad&&(this.loadAssets=new Array),"hub"==t&&(3==this.currentGameLaunchMode?this.targetInitialScene="hubScene":1==this.currentGameLaunchMode?(this.loadAssets.push("title-assets"),this.targetInitialScene="titleScene"):this.targetInitialScene="hubScene"),"hub"==t&&3==this.currentGameLaunchMode&&(this.targetInitialScene="hubScene"),"hub"!=t&&"game"!=t)throw new ReferenceError("Ooops! Can only generate asset list to load if param is 'hub' or 'game'.");switch(1==this.devMode&&1==this.firstLoad&&(t="game"),"game"==t&&this.game.trackingEventsManager.onLevelStart(this.currentGameId),this.game.setLoadingScreen("loadingScene"),this.currentGameId){case"come-out-swinging":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&"game"==t&&this.loadAssets.push("come-out-swinging-tutorial-assets"),"game"==t&&(this.loadAssets.push("come-out-swinging-assets"),this.loadAssets.push("game-over-assets"),this.loadAssets.push("pause-assets"),this.loadAssets.push("come-out-swinging-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="comeOutSwingingGameplayScene"),"hub"==t&&(2==this.currentGameLaunchMode||3==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets"),this.loadAssets.push("hub-audio")):(this.loadAssets.push("title-assets"),this.loadAssets.push("hub-assets"),this.loadAssets.push("hub-audio")));break;case"photon-fusion":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&"game"==t&&this.loadAssets.push("photon-fusion-tutorial-assets"),"game"==t&&(this.loadAssets.push("photon-fusion-assets"),this.loadAssets.push("game-over-assets"),this.loadAssets.push("pause-assets"),this.loadAssets.push("photon-fusion-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="photonFusionGameplayScene"),"hub"==t&&(2==this.currentGameLaunchMode||3==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets"),this.loadAssets.push("hub-audio")):(this.loadAssets.push("title-assets"),this.loadAssets.push("hub-assets"),this.loadAssets.push("hub-audio")));break;case"mind-the-gap":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&"game"==t&&this.loadAssets.push("mind-the-gap-tutorial-assets"),"game"==t&&(this.loadAssets.push("mind-the-gap-assets"),this.loadAssets.push("game-over-assets"),this.loadAssets.push("pause-assets"),this.loadAssets.push("mind-the-gap-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="mindTheGapGameplayScene"),"hub"==t&&(2==this.currentGameLaunchMode||3==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets"),this.loadAssets.push("hub-audio")):(this.loadAssets.push("title-assets"),this.loadAssets.push("hub-assets"),this.loadAssets.push("hub-audio")));break;case"baddie-barrage":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&"game"==t&&this.loadAssets.push("baddie-barrage-tutorial-assets"),"game"==t&&(this.loadAssets.push("baddie-barrage-assets"),this.loadAssets.push("game-over-assets"),this.loadAssets.push("pause-assets"),this.loadAssets.push("baddie-barrage-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="baddieBarrageGameplayScene"),"hub"==t&&(2==this.currentGameLaunchMode||3==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets"),this.loadAssets.push("hub-audio")):(this.loadAssets.push("title-assets"),this.loadAssets.push("hub-assets"),this.loadAssets.push("hub-audio")));break;case"all-games":case void 0:this.loadAssets.push("hub-assets"),this.loadAssets.push("hub-audio"),this.currentGameLaunchMode=1}if(1==this.firstLoad&&1==this.devMode&&Game.coreData.setCurrentGame(this.devModeGameID),this.firstLoad=!1,1==this.devMode)switch(this.currentGameId){case"intro":this.loadAssets.push("intro-assets"),this.targetInitialScene="gameIntro",this.currentGameLaunchMode=1;break;case"title-scene":this.loadAssets.push("title-assets"),this.targetInitialScene="titleScene",this.currentGameLaunchMode=1;break;case"hub-scene":this.loadAssets.push("hub-assets"),this.loadAssets.push("hub-audio"),this.targetInitialScene="hubScene",this.currentGameLaunchMode=1;break;case"gameover-scene":this.loadAssets.push("game-over-assets"),this.loadAssets.push("pause-assets"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="gameoverScene",this.currentGameLaunchMode=1}},t.prototype.flushAssets=function(t){var e=new Array,i=new Array;if("hub"!=t&&"games"!=t&&"title"!=t)throw new ReferenceError("Ooops! Can only generate asset list to load if param is 'hub', 'games', 'title'.");switch(t){case"games":e.push("come-out-swinging-assets"),e.push("come-out-swinging-tutorial-assets"),e.push("mind-the-gap-assets"),e.push("mind-the-gap-tutorial-assets"),e.push("photon-fusion-assets"),e.push("photon-fusion-tutorial-assets"),e.push("baddie-barrage-assets"),e.push("baddie-barrage-tutorial-assets"),e.push("pause-assets"),e.push("game-over-assets"),i.push("come-out-swinging-audio"),i.push("mind-the-gap-audio"),i.push("photon-fusion-audio"),i.push("baddie-barrage-audio");break;case"hub":e.push("hub-assets"),i.push("hub-audio");break;case"title":e.push("title-assets"),e.push("intro-assets")}Game.displayStore.flush(e);for(var n=0;n<i.length;n++)Game.audioManager.flush(i[n]);1==Game.webGL&&Game.renderer.textureGC.run()},t.prototype.setCurrentGameLaunchMode=function(t){this.currentGameLaunchMode=t},t.prototype.getCurrentGameLaunchMode=function(){return this.currentGameLaunchMode},t.prototype.setCurrentGameId=function(t){this.currentGameId=t},t.prototype.getCurrentGameId=function(){return this.currentGameId},t.prototype.getTargetInitialScene=function(){return this.targetInitialScene},t.prototype.getLoadAssets=function(){return this.loadAssets},t}(),TrackingEventsManager=function(){function t(t){this.game=t,this.trackingOn=!1}return t.prototype.setTrackingParams=function(t,e){this.trackingOn=t,this.overallGameTitle=e},t.prototype.trackGameEvent=function(t,e){0!=this.trackingOn&&"function"==typeof window.trackFlashEvent&&window.trackFlashEvent(this.overallGameTitle,t,e)},t.prototype.onLevelStart=function(t){0!=this.trackingOn&&"function"==typeof window.onLevelStart&&window.onLevelStart(t)},t.prototype.onLevelEnd=function(t){0!=this.trackingOn&&"function"==typeof window.onLevelComplete&&window.onLevelComplete(t)},t}(),LocalStorageManager=function(){function t(t){this.game=t,this.enableStorage=!1,this.localStorage=window.localStorage}return t.prototype.setLocalStorageEnabled=function(t){this.enableStorage=t},t.prototype.saveProgress=function(){if(0!=this.isLocalStorageAvailable())if(1==this.enableStorage){this.localStorage.setItem("firstTime",!1),Game.coreData.setFirstTime(!1);var t=JSON.stringify(Game.coreData.getGameData());localStorage.setItem("gameData",t)}else this.localStorage.clear()},t.prototype.restoreProgress=function(){if(0!=this.enableStorage&&("false"==localStorage.getItem("firstTime")&&Game.coreData.setFirstTime(!1),this.localStorage.getItem("gameData"))){var t=localStorage.getItem("gameData");if(t)var e=JSON.parse(t);Game.coreData.setGameData(e)}},t.prototype.isLocalStorageAvailable=function(){var t=!1;if(void 0!==window.localStorage&&null!=window.localStorage){var e=window.localStorage;try{e.setItem("test","1"),e.removeItem("test"),t=!0}catch(e){t=!1}}else t=!1;return t},t}(),ComeOutSwingingInputManager=function(){function t(t,e){this.scene=t,this.leftInputDown=!1,this.rightInputDown=!1,this.hitAreaSprite=Game.displayStore.getSprite("come-out-swinging/blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite),this.mouseDown=!1}return t.prototype.setUpHitArea=function(t){t.interactive=!0,t.buttonMode=!0;var e=this;Game.onDesktop?(t.on("mousedown",function(t){e.inputDown(e,t.data.getLocalPosition(e.scene.container))}),t.on("mousemove",function(t){e.inputMove(e,t.data.getLocalPosition(e.scene.container))}),t.on("mouseup",function(t){e.inputUp(e,t.data.getLocalPosition(e.scene.container))}),t.on("mouseupoutside",function(t){e.inputUp(e,t.data.getLocalPosition(e.scene.container))})):(t.on("touchstart",function(t){e.inputDown(e,t.data.getLocalPosition(e.scene.container))}),t.on("touchmove",function(t){e.inputMove(e,t.data.getLocalPosition(e.scene.container))}),t.on("touchend",function(t){e.inputUp(e,t.data.getLocalPosition(e.scene.container))}),t.on("touchendoutside",function(t){e.inputUp(e,t.data.getLocalPosition(e.scene.container))}))},t.prototype.inputDown=function(t,e){t.mouseDown=!0,t.keyBoardModeOn=!1,t.mouseModeOn=!0,this.scene.tapToSwing(e)},t.prototype.inputUp=function(t,e){this.scene.stopSwinging()},t.prototype.inputMove=function(t,e){t.mouseDown},t.prototype.getAngle=function(t,e,i,n){return Math.atan2(e-n,t-i)},t.prototype.upKeyDown=function(){},t.prototype.downKeyDown=function(){},t.prototype.upKeyUp=function(){},t.prototype.downKeyUp=function(){},t.prototype.tick=function(){},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},t}(),ComeOutSwingingPhysicsManager=function(){function t(t,e){this.CHARACTER=Math.pow(2,2),this.LEVEL=Math.pow(2,3),this.FAIL=Math.pow(2,4),this.LASER=Math.pow(2,5),this.physicsEnabled=!0,this.resizeRatio=1,this.targetChaserSpeed=0,this.chaserSpeed=2,this.scene=t,this.mainContainer=e,this.stepSpeed=30}return t.prototype.initPhysicsWorld=function(){this.world=new p2.World({gravity:[0,-500]}),this.ropeInPlay=!1,this.targetArmAngle=-Math.PI/2,this.world.broadphase=new p2.NaiveBroadphase(1),this.world.defaultContactMaterial.restitution=0,this.world.defaultContactMaterial.friction=.9,this.world.defaultContactMaterial.contactSkinSize=1,this.boundBodies=[],this.activeObstacles=[],this.laserRayResult=new p2.RaycastResult,this.laserRay=new p2.Ray({mode:p2.Ray.CLOSEST,collisionGroup:this.LASER,collisionMask:this.LEVEL,callback:function(e){t.rayHitCallback(t.laserRayResult,t.laserRay)}}),this.initPhysicsObjects();var t=this;this.world.on("beginContact",function(e){t.checkCollision(t,e)}),this.world.on("endContact",function(t){}),this.world.on("postStep",function(t){}),this.physicsEnabled=!0},t.prototype.initPhysicsObjects=function(){this.characterArmBackBody=new p2.Body({mass:1,position:this.setStartPos([58,220])}),this.characterArmBackBody.damping=.2,this.characterArmBackBody.angularDamping=.999,this.characterArmBackBody.angle=-1.3,this.characterArmBackShape=new p2.Box({width:100,height:30}),this.characterArmBackBody.addShape(this.characterArmBackShape),this.characterArmBackShape.collisionGroup=this.CHARACTER,this.characterArmBackShape.collisionMask=this.LEVEL,this.characterArmFrontTopBody=new p2.Body({mass:2,position:this.setStartPos([50,245])}),this.characterArmFrontTopBody.damping=.2,this.characterArmFrontTopBody.angularDamping=.99,this.characterArmFrontTopBody.angle=-1.4,this.characterArmFrontTopShape=new p2.Box({width:60,height:20}),this.characterArmFrontTopBody.addShape(this.characterArmFrontTopShape),this.characterArmFrontTopShape.collisionGroup=this.CHARACTER,this.characterArmFrontTopShape.collisionMask=this.LEVEL|this.FAIL,this.characterArmFrontBottomBody=new p2.Body({mass:2,position:this.setStartPos([60,195])}),this.characterArmFrontBottomBody.damping=.2,this.characterArmFrontBottomBody.angularDamping=.9999,this.characterArmFrontBottomBody.angle=-1.4,this.characterArmFrontBottomShape=new p2.Box({width:60,height:20}),this.characterArmFrontBottomBody.addShape(this.characterArmFrontBottomShape),this.characterArmFrontBottomShape.collisionGroup=this.CHARACTER,this.characterArmFrontBottomShape.collisionMask=this.LEVEL,this.characterLegBackTopBody=new p2.Body({mass:.6,position:this.setStartPos([58,165])}),this.characterLegBackTopBody.damping=.16,this.characterLegBackTopBody.angularDamping=.99,this.characterLegBackTopBody.angle=-Math.PI/2+.1,this.characterLegBackTopShape=new p2.Box({width:90,height:35}),this.characterLegBackTopBody.addShape(this.characterLegBackTopShape),this.characterLegBackTopShape.collisionGroup=this.CHARACTER,this.characterLegBackTopShape.collisionMask=this.LEVEL|this.FAIL,this.characterLegFrontTopBody=new p2.Body({mass:.6,position:this.setStartPos([52,165])}),this.characterLegFrontTopBody.damping=.16,this.characterLegFrontTopBody.angularDamping=.9,this.characterLegFrontTopBody.angle=-Math.PI/2,this.characterLegFrontTopShape=new p2.Box({width:90,height:35}),this.characterLegFrontTopBody.addShape(this.characterLegFrontTopShape),this.characterLegFrontTopShape.collisionGroup=this.CHARACTER,this.characterLegFrontTopShape.collisionMask=this.LEVEL|this.FAIL,this.characterLegBackBottomBody=new p2.Body({mass:25,position:this.setStartPos([64,75])}),this.characterLegBackBottomBody.damping=.4,this.characterLegBackBottomBody.angularDamping=.999999999999999,this.characterLegBackBottomBody.angle=-Math.PI/2,this.characterLegBackBottomShape=new p2.Box({width:98,height:35}),this.characterLegBackBottomBody.addShape(this.characterLegBackBottomShape),this.characterLegBackBottomShape.collisionGroup=this.CHARACTER,this.characterLegBackBottomShape.collisionMask=this.LEVEL,this.characterLegFrontBottomBody=new p2.Body({mass:20,position:this.setStartPos([48,75])}),this.characterLegFrontBottomBody.damping=.3,this.characterLegFrontBottomBody.angularDamping=.9999999999999999,this.characterLegFrontBottomBody.angle=-Math.PI/2,this.characterLegFrontBottomShape=new p2.Box({width:90,height:35}),this.characterLegFrontBottomBody.addShape(this.characterLegFrontBottomShape),this.characterLegFrontBottomShape.collisionGroup=this.CHARACTER,this.characterLegFrontBottomShape.collisionMask=this.LEVEL,this.characterRopePointBody=new p2.Body({mass:1,position:this.setStartPos([50,250])}),this.characterRopePointBody.damping=.1,this.characterRopePointBody.angularDamping=.999,this.characterRopePointShape=new p2.Circle({radius:10}),this.characterRopePointShape.collisionGroup=this.CHARACTER,this.characterRopePointShape.collisionMask=this.LEVEL|this.FAIL,this.characterSmashBody=new p2.Body({mass:.1,position:this.setStartPos([150,250])}),this.characterSmashShape=new p2.Box({width:25,height:200}),this.characterSmashBody.addShape(this.characterSmashShape),this.characterSmashBody.gravityScale=0,this.characterSmashShape.sensor=!0,this.characterSmashShape.collisionGroup=this.CHARACTER,this.characterSmashShape.collisionMask=this.LEVEL|this.FAIL,this.characterBodyBody=new p2.Body({mass:12,position:this.setStartPos([50,250])}),this.characterBodyBody.damping=.2,this.characterBodyBody.angularDamping=.99999,this.characterBodyBody.angle=0,this.characterBodyShape=new p2.Box({width:55,height:80}),this.characterBodyBody.addShape(this.characterBodyShape),this.characterBodyShape.collisionGroup=this.CHARACTER,this.characterBodyShape.collisionMask=this.LEVEL|this.FAIL,this.characterHeadBody=new p2.Body({mass:.2,position:this.setStartPos([50,320])}),this.characterHeadBody.damping=.2,this.characterHeadBody.angularDamping=.9999,this.characterHeadShape=new p2.Circle({radius:25}),this.characterHeadBody.addShape(this.characterHeadShape),this.characterHeadShape.collisionGroup=this.CHARACTER,this.characterHeadShape.collisionMask=this.LEVEL|this.FAIL,this.ropePointConstraint=new p2.RevoluteConstraint(this.characterRopePointBody,this.characterArmBackBody,{collideConnected:!1,localPivotA:[0,0],localPivotB:[18,5]}),this.backArmConstraint=new p2.RevoluteConstraint(this.characterBodyBody,this.characterArmBackBody,{collideConnected:!1,localPivotA:[6,20],localPivotB:[-50,-5]}),this.backArmConstraint.setLimits(-1,2.5),this.backArmConstraint.enableMotor(),this.frontTopArmConstraint=new p2.RevoluteConstraint(this.characterBodyBody,this.characterArmFrontTopBody,{collideConnected:!1,localPivotA:[-8,25],localPivotB:[-28,0]}),this.frontTopArmConstraint.setLimits(-2.2,-.5),this.frontBottomArmConstraint=new p2.RevoluteConstraint(this.characterArmFrontTopBody,this.characterArmFrontBottomBody,{collideConnected:!1,localPivotA:[24,1],localPivotB:[-32,0]}),this.frontBottomArmConstraint.setLimits(-.1,1.2),this.backTopLegConstraint=new p2.RevoluteConstraint(this.characterBodyBody,this.characterLegBackTopBody,{collideConnected:!1,localPivotA:[5,-46],localPivotB:[-37,0]}),this.backTopLegConstraint.setLimits(-Math.PI/2,-Math.PI/2),this.backBottomLegConstraint=new p2.RevoluteConstraint(this.characterLegBackTopBody,this.characterLegBackBottomBody,{collideConnected:!1,localPivotA:[22,0],localPivotB:[-55,-5]}),this.backBottomLegConstraint.setLimits(-.1,-.1),this.frontTopLegConstraint=new p2.RevoluteConstraint(this.characterBodyBody,this.characterLegFrontTopBody,{collideConnected:!1,localPivotA:[-4,-50],localPivotB:[-35,0]}),this.frontTopLegConstraint.setLimits(-Math.PI/2,-Math.PI/2),this.frontBottomLegConstraint=new p2.RevoluteConstraint(this.characterLegFrontTopBody,this.characterLegFrontBottomBody,{collideConnected:!1,localPivotA:[28,0],localPivotB:[-57,-6]}),this.frontBottomLegConstraint.setLimits(-.1,-.1),this.headConstraint=new p2.RevoluteConstraint(this.characterBodyBody,this.characterHeadBody,{collideConnected:!1,localPivotA:[-2,47],localPivotB:[0,-20]}),this.headConstraint.setLimits(-.8,.6),this.headConstraint.enableMotor(),this.headConstraint.setMotorSpeed(0),this.floorBody=new p2.Body({mass:0,position:[0,-430],angle:0}),this.floorShape=new p2.Plane,this.floorBody.addShape(this.floorShape),this.floorShape.sensor=!0,this.floorShape.collisionGroup=this.FAIL,this.floorShape.collisionMask=this.CHARACTER,this.bottomFloorBody=new p2.Body({mass:0,position:[0,-800],angle:0}),this.bottomFloorShape=new p2.Plane,this.bottomFloorBody.addShape(this.bottomFloorShape),this.bottomFloorShape.sensor=!0,this.bottomFloorShape.collisionGroup=this.FAIL,this.bottomFloorShape.collisionMask=this.CHARACTER,this.ceilingBody=new p2.Body({mass:0,position:[0,0]}),this.ceilingShape=new p2.Plane,1==Game.isLowEndIPad&&(this.ceilingBody.addShape(this.ceilingShape,[0,630],-Math.PI),this.ceilingShape.collisionGroup=this.LEVEL,this.ceilingShape.collisionMask=this.LASER|this.CHARACTER),this.chaseBody=new p2.Body({mass:0,position:[-1200,Game.stageHeight]}),this.chaseShape=new p2.Plane,this.chaseBody.addShape(this.chaseShape,[-200,0],-Math.PI/2),this.chaseShape.sensor=!0,this.chaseShape.collisionGroup=this.FAIL,this.chaseShape.collisionMask=this.CHARACTER,this.startPlatformBody=new p2.Body({mass:0,position:[-50,-185]}),this.startPlatformShape=new p2.Box({width:300,height:360}),this.startPlatformShape.collisionGroup=this.LEVEL,this.startPlatformShape.collisionMask=this.CHARACTER,this.startPlatformBody.addShape(this.startPlatformShape,[0,0],0),this.world.addBody(this.characterLegBackTopBody),this.world.addBody(this.characterLegFrontTopBody),this.world.addBody(this.characterLegBackBottomBody),this.world.addBody(this.characterLegFrontBottomBody),this.world.addBody(this.characterHeadBody),this.world.addBody(this.characterRopePointBody),this.world.addBody(this.characterArmBackBody),this.world.addBody(this.characterArmFrontTopBody),this.world.addBody(this.characterArmFrontBottomBody),this.world.addBody(this.characterBodyBody),this.world.addBody(this.startPlatformBody),this.world.addBody(this.floorBody),this.world.addBody(this.bottomFloorBody),this.world.addBody(this.ceilingBody),this.world.addBody(this.chaseBody),this.world.addConstraint(this.ropePointConstraint),this.world.addConstraint(this.backTopLegConstraint),this.world.addConstraint(this.frontTopLegConstraint),this.world.addConstraint(this.backBottomLegConstraint),this.world.addConstraint(this.frontBottomLegConstraint),this.world.addConstraint(this.headConstraint),this.world.addConstraint(this.backArmConstraint),this.world.addConstraint(this.frontTopArmConstraint),this.world.addConstraint(this.frontBottomArmConstraint)},t.prototype.raiseArm=function(){TweenMax.to(this,.5,{targetArmAngle:.7,delay:.3}),TweenMax.to(this.chaseBody.position,3,(t={},t[0]=-500,t.ease=Power2.easeOut,t));var t},t.prototype.firstSwing=function(){this.backTopLegConstraint.setLimits(-1.8,-.7),this.backBottomLegConstraint.setLimits(-1.5,-.2),this.frontTopLegConstraint.setLimits(-1.8,-.7),this.frontBottomLegConstraint.setLimits(-1.5,-.2),this.characterLegBackBottomBody.mass=.4,this.characterLegFrontBottomBody.mass=.3,this.characterBodyBody.mass=5,this.characterRopePointBody.mass=3,this.characterArmFrontBottomBody.mass=.5,this.characterArmFrontTopBody.mass=1,this.characterRopePointBody.updateMassProperties(),this.characterArmFrontBottomBody.updateMassProperties(),this.characterArmFrontTopBody.updateMassProperties(),this.characterLegBackBottomBody.updateMassProperties(),this.characterLegFrontBottomBody.updateMassProperties(),this.characterBodyBody.updateMassProperties()},t.prototype.setStartPos=function(t){var e=[];return e[0]=t[0]-50,e[1]=t[1]-50,e},t.prototype.setHeadAngle=function(t){var e=0;e=this.characterHeadBody.angle-t,this.headConstraint.setMotorSpeed(5*e)},t.prototype.setArmAngle=function(t){var e=0;e=this.characterArmBackBody.angle-t,this.backArmConstraint.setMotorSpeed(6*e)},t.prototype.spawnRope=function(t){this.ropeSpring&&this.world.removeSpring(this.ropeSpring),this.castRay(t),this.ropeLength=0;var e=65,i=80;1==this.scene.powerUpIsActive?(e=110,i=110,this.ropePointConstraint.pivotB=[18,3]):this.ropePointConstraint.pivotB=[20,5],this.ropeSpring=new p2.LinearSpring(this.ceilingBody,this.characterRopePointBody,{restLength:this.ropeLength,stiffness:e,damping:i,localAnchorA:[this.rayHitPoint[0],this.rayHitPoint[1]-30],localAnchorB:[0,0]}),this.delayedHookup=this.scene.killTween(this.delayedHookup),this.delayedHookup=TweenMax.delayedCall(.1,function(){this.ropeInPlay=!0,this.backArmConstraint.disableMotor(),this.world.addSpring(this.ropeSpring),this.scene.startSwing()},null,this)},t.prototype.castRay=function(t){this.laserRayResult&&this.laserRayResult.reset(),this.rayStartPos=[t.x,100],this.rayEndPos=[t.x,5e3],p2.vec2.copy(this.laserRay.from,this.rayStartPos),p2.vec2.copy(this.laserRay.to,this.rayEndPos),this.laserRay.update(),this.laserRay.collisionGroup=this.LASER,this.laserRay.collisionMask=this.LEVEL,this.world.raycast(this.laserRayResult,this.laserRay),this.rayHitPoint=p2.vec2.create(),this.laserRayResult.getHitPoint(this.rayHitPoint,this.laserRay)},t.prototype.rayHitCallback=function(t,e){},t.prototype.clearRope=function(){this.ropeSpring&&this.world.removeSpring(this.ropeSpring),this.ropeInPlay=!1,this.delayedHookup=this.scene.killTween(this.delayedHookup),this.backArmConstraint.enableMotor()},t.prototype.convertAngleToGlobal=function(t){var e=0;return e=Math.floor(t/(2*Math.PI)),t-e*(2*Math.PI)},t.prototype.getRopeLength=function(){return this.getDistance(this.ropeSpring.localAnchorA[0],this.ropeSpring.localAnchorA[1],this.characterRopePointBody.position[0],this.characterRopePointBody.position[1])},t.prototype.getRopeAngle=function(){var t;return this.ropeSpring&&(t=this.getAngle(this.characterRopePointBody.position[0],this.characterRopePointBody.position[1],this.ropeSpring.localAnchorA[0],this.ropeSpring.localAnchorA[1])),t},t.prototype.setChaseSpeed=function(t){this.targetChaserSpeed=t/2},t.prototype.bindSpriteToBody=function(t,e){this.boundBodies.push({sprite:t,body:e})},t.prototype.unbindSpriteFromBody=function(t){this.boundBodies&&this.boundBodies.splice(this.findIndexByKeyValue(this.boundBodies,"sprite",t),1)},t.prototype.checkCollision=function(t,e){if(t.checkBody(t.floorBody,[e.bodyA,e.bodyB]))t.scene.hitFloor();else if(t.checkBody(t.bottomFloorBody,[e.bodyA,e.bodyB]))t.scene.hitFloorBottom();else if(t.checkBody(t.chaseBody,[e.bodyA,e.bodyB]))t.scene.hitChaser();else if(t.checkBody(t.scene.obstacleManager.boxingGlove.body,[e.bodyA,e.bodyB]))t.hitBoxingGlove();else for(var i=0;i<t.activeObstacles.length;i++)if(t.checkBody(t.activeObstacles[i].body,[e.bodyA,e.bodyB]))return"beam"==t.activeObstacles[i].type&&t.scene.hitBeam(),void("vent"==t.activeObstacles[i].type&&(t.scene.hitVent(),t.activeObstacles[i].smash()))},t.prototype.hitBoxingGlove=function(){0==this.scene.obstacleManager.boxingGlove.hasHit&&(this.scene.hitBoxingGlove(),0==this.scene.powerUpIsActive&&this.characterBodyBody.applyImpulseLocal([-1e4,5e3],[0,-30]),Game.playSound("come-out-swinging/punch-"+Game.getRandom(1,2,!0)))},t.prototype.checkBody=function(t,e){for(var i=!1,n=0;n<e.length;n++)t==e[n]&&(i=!0);return i},t.prototype.activatePowerup=function(){this.world.addBody(this.characterSmashBody)},t.prototype.deactivatePowerup=function(){this.world.removeBody(this.characterSmashBody)},t.prototype.addBodyToWorld=function(t){this.world.addBody(t)},t.prototype.removeBodyFromWorld=function(t){this.world.removeBody(t)},t.prototype.removeConstraintFromWorld=function(t){this.world.removeConstraint(t)},t.prototype.addConstraintToWorld=function(t){this.world.addConstraint(t)},t.prototype.removeSpringFromWorld=function(t){this.world.removeSpring(t)},t.prototype.addSpringToWorld=function(t){this.world.addSpring(t)},t.prototype.findIndexByKeyValue=function(t,e,i){for(var n=0;n<t.length;n++)if(t[n][e]==i)return n;return null},t.prototype.resizeElements=function(t,e){this.canvasHeight=e,this.canvasWidth=t,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},t.prototype.stepPhysics=function(){if(0!=this.physicsEnabled&&this.world){this.world.step(1/this.stepSpeed),this.chaserSpeed+=(this.targetChaserSpeed-this.chaserSpeed)/30,0==this.scene.firstSwing&&(this.chaseBody.position[0]+=this.chaserSpeed);for(var t=0;t<this.boundBodies.length;t++)this.boundBodies[t].sprite.position.x=this.boundBodies[t].body.position[0],this.boundBodies[t].sprite.position.y=Game.stageHeight-this.boundBodies[t].body.position[1],this.boundBodies[t].sprite.rotation=-this.boundBodies[t].body.angle;0==this.ropeInPlay&&0==this.scene.firstSwing&&(this.characterBodyBody.angle>-.25&&(this.characterBodyBody.angularForce=-6e4*(this.characterBodyBody.angle+.25)),this.characterLegFrontTopBody.angularForce=-15e3,this.characterLegFrontBottomBody.angularForce=-3500,this.characterLegBackTopBody.angularForce=-12e3,this.characterLegBackBottomBody.angularForce=-4e3,this.characterArmFrontTopBody.angularForce=-3e4),this.characterSmashBody.position[0]=this.characterBodyBody.position[0]+120,this.characterSmashBody.position[1]=this.characterBodyBody.position[1]-30,this.setArmAngle(this.targetArmAngle),this.setHeadAngle(.4)}},t.prototype.updateStepSpeed=function(){this.stepSpeed=30,this.stepSpeed/=this.scene.speedRatio},t.prototype.bodyIsInWorld=function(t){for(var e=!1,i=0;i<this.world.bodies.length;i++)t==this.world.bodies[i]&&(e=!0);return e},t.prototype.getDistance=function(t,e,i,n){var o=t-i,a=e-n;return Math.sqrt(o*o+a*a)},t.prototype.getAngle=function(t,e,i,n){if(t!=i||e!=n){var o=t-i,a=n-e;return Math.atan2(a,o)}},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.destroy=function(){this.world.clear(),this.world=null,this.delayedHookup=this.scene.killTween(this.delayedHookup)},t}(),ComeOutSwingingScrollingLayer=function(){function t(t,e,i,n,o,a){this.transitioned=!1,this.stripTarget=new PIXI.Point,this.containerTarget=new PIXI.Point,this.lastLayerMovement=new PIXI.Point,this.layerMovement=new PIXI.Point,this.scene=t,this.game=t.game,this.container=n,this.chunksContainer=o,this.defaultPos=[],this.defaultPos[0]=i[0],this.defaultPos[1]=i[1],this.depth=e,this.chunks=[];var s=a||1;if(this.currentChunkIndex=0,this.chunksContainer.children.length>0)for(var r=0;r<this.chunksContainer.children.length;r++){var h=this.chunksContainer.getSpriteAt(r);h.scale.x=s,h.scale.y=s,this.chunks.push(h)}this.layoutChunks(),this.upperLimit=Game.stageWidth,this.lowerLimit=-Game.stageWidth}return t.prototype.layoutChunks=function(){var t=0;if(!(this.chunks.length<2))for(var e=0;e<this.chunks.length;e++)this.chunkWidth=this.chunks[e].width,this.chunks[e].position.x=t-this.chunkWidth*this.currentChunkIndex,t+=this.chunks[e].width},t.prototype.reorderArray=function(t,e){-1==e?t.push(t.shift()):t.unshift(t.pop())},t.prototype.showOnlyChunkChild=function(t,e){for(var i=0;i<this.chunks.length;i++)for(var n=this.chunks[i],o=0;o<n.children.length;o++){var a=n.getSpriteAt(o);o==t?TweenMax.to(a,.5,{alpha:1}):a!=e&&TweenMax.to(a,.5,{alpha:0})}},t.prototype.tick=function(t,e){this.smoothing=t,this.layerMovement.x=e.x-this.lastLayerMovement.x,this.layerMovement.y=e.y-this.lastLayerMovement.y,this.lastLayerMovement.x=e.x,this.lastLayerMovement.y=e.y,this.stripTarget.x+=this.layerMovement.x*this.depth,this.stripTarget.y+=this.layerMovement.y*this.depth,this.containerTarget.x+=(this.stripTarget.x-this.containerTarget.x)/this.smoothing,this.containerTarget.y+=(this.stripTarget.y-this.containerTarget.y)/this.smoothing,this.containerTarget.x>this.stripTarget.x+.1?this.direction=-1:this.containerTarget.x<this.stripTarget.x-.1?this.direction=1:this.direction=0,this.depth<-1&&(this.direction=-1*this.direction),this.container.position.x=this.defaultPos[0]-this.containerTarget.x,this.container.position.y=this.defaultPos[1]-this.containerTarget.y,this.direction<0?this.scene.container.toLocal(new PIXI.Point,this.chunks[0]).x<this.lowerLimit&&(this.currentChunkIndex--,this.reorderArray(this.chunks,-1),this.layoutChunks()):this.direction>0&&this.scene.container.toLocal(new PIXI.Point,this.chunks[this.chunks.length-1]).x>this.upperLimit&&(this.currentChunkIndex++,this.reorderArray(this.chunks,1),this.layoutChunks())},t.prototype.destroy=function(){this.chunks=[]},t}(),ComeOutSwingingTerrainManager=function(){function t(t){this.containerTarget=new PIXI.Point,this.lastLayerMovementX=0,this.layerMovementX=0,this.chunkWidth=100,this.scene=t,this.game=t.game,this.currentChunkIndex=0,this.previousChunkIndex=0,this.maxChunkIndex=0,this.chunks=[],this.container=Game.displayStore.getContainer("come-out-swinging/terrain-holder"),this.container.position.y=0,this.createChunks(),this.upperLimit=0,this.lowerLimit=-this.chunkWidth*this.chunks.length+Game.stageWidth}return t.prototype.createChunks=function(){for(var t=0;t<18;t++){var e=new ComeOutSwingingTerrainChunk(this.scene,this.container,t);this.chunks.push(e)}this.layoutChunks()},t.prototype.layoutChunks=function(){for(var t=-30,e=0;e<this.chunks.length;e++)this.chunks[e].updatePos(t+100,0,100,100),t=this.chunks[e].xPos,this.chunks[e].endY,this.chunks[e].grad},t.prototype.reorderArray=function(t,e){-1==e?t.push(t.shift()):t.unshift(t.pop())},t.prototype.checkChunkOverlap=function(t){for(var e=!1,i=0;i<this.chunks.length;i++){var n=this.chunks[i].getChunkBody();if(1==t.overlaps(n.body)){e=!0;break}}return{contact:e,chunkAngle:n.angle}},t.prototype.addNextChunk=function(t){var e=t.shift();t.push(e);var i,n=t[t.length-2];n.grad,Math.abs(this.currentChunkIndex),this.scene.checkpointDistance;(i=n.altitude>170?Game.getRandom(-1,0,!0):n.altitude<-120?Game.getRandom(0,1,!0):Game.getRandom(-1,1,!0))>2&&(i=2),i<-2&&(i=-2),e.showGradShape(i),e.updatePos(n.xPos+100,n.altitude,e.startY,n.endY),this.currentChunkIndex<this.maxChunkIndex&&(this.maxChunkIndex=this.currentChunkIndex),this.previousChunkIndex=this.currentChunkIndex,e.undersprite.alpha=1},t.prototype.addPrevChunk=function(t){var e=t.pop();t.unshift(e),e.showGradShape(0);var i=t[1];e.updatePos(i.xPos-100,i.altitude,e.startY,i.startY),e.undersprite.alpha=1},t.prototype.tick=function(t,e){this.smoothing=t,this.layerMovementX=e-this.lastLayerMovementX,this.lastLayerMovementX=e,this.containerTarget.x+=(this.layerMovementX-this.containerTarget.x)/this.smoothing,this.layerMovementX<-1?this.direction=-1:this.layerMovementX>1?this.direction=1:this.direction=0,this.direction<0?e<=this.lowerLimit&&(this.currentChunkIndex--,this.addNextChunk(this.chunks)):this.direction>=0&&e>=this.upperLimit&&(this.currentChunkIndex++,this.addPrevChunk(this.chunks)),this.upperLimit=(this.currentChunkIndex-1)*this.chunkWidth-Game.stageWidth/3,this.lowerLimit=-this.chunkWidth*this.chunks.length+Game.stageWidth+550+this.currentChunkIndex*this.chunkWidth},t.prototype.getChunkAt=function(t){for(var e,i=0;i<this.chunks.length;i++)if(this.chunks[i].xPos-60<t&&this.chunks[i].xPos+60>t){e=this.chunks[i];break}return e},t.prototype.highlightChunkAtX=function(t){for(var e=0;e<this.chunks.length;e++)this.chunks[e].xPos-60<t&&this.chunks[e].xPos+60>t&&(this.chunks[e].undersprite.alpha=.5)},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.destroy=function(){for(var t=0;t<this.chunks.length;t++)this.chunks[t].destroy();this.chunks=[]},t}(),ComeOutSwingingTerrainChunk=function(){function t(t,e,i){this.grads=[-2,-1,0,1,2],this.baselineY=500,this.scene=t,this.game=t.game,this.grad=0,this.xPos=0,this.startY=0,this.endY=0,this.index=i,this.container=e,this.gradShapes=[],this.createGrads(),this.showGradShape(0)}return t.prototype.getChunkBody=function(){return{body:this.gradShapes[this.activeShapeIndex].body,angle:this.currentShapeAngle}},t.prototype.createGrads=function(){this.undersprite=Game.displayStore.getSprite("come-out-swinging/under-shape"),this.undersprite2=Game.displayStore.getSprite("come-out-swinging/under-shape-2"),this.container.addChild(this.undersprite),this.container.addChild(this.undersprite2);for(var t=0;t<5;t++){var e=new p2.Body({mass:0,position:[0,0]}),i=this.getPath(this.grads[t]),n=Game.displayStore.getSprite("come-out-swinging/terrain-grad-"+this.grads[t]),o=Game.displayStore.getSprite("come-out-swinging/shadow-"+this.grads[t]),a=new p2.Box({width:100,height:100});e.fromPolygon(i,{skipAdjustCenterOfMass:!0}),e.shapes[0].collisionGroup=this.scene.physicsManager.LEVEL,e.shapes[0].collisionMask=this.scene.physicsManager.CHARACTER|this.scene.physicsManager.LASER,a.collisionGroup=this.scene.physicsManager.LEVEL,a.collisionMask=this.scene.physicsManager.CHARACTER|this.scene.physicsManager.LASER,e.addShape(a,[0,100]),this.scene.physicsManager.bindSpriteToBody(n,e),this.gradShapes.push({body:e,shape:e.shapes[0],sprite:n,grad:this.grads[t],startY:this.getStartEndY(this.grads[t]).startY,shadow:o})}},t.prototype.showGradShape=function(t){0==t?(this.shadowY=46,this.undershape2Y=0):(this.shadowY=-50,this.undershape2Y=-96),this.undershape2Y=0;for(var e=0;e<this.gradShapes.length;e++)if(this.gradShapes[e].grad==t){1==this.scene.physicsManager.bodyIsInWorld(this.gradShapes[e].body)&&this.scene.physicsManager.removeBodyFromWorld(this.gradShapes[e].body),this.scene.physicsManager.addBodyToWorld(this.gradShapes[e].body),this.container.addChild(this.gradShapes[e].sprite),this.container.addChild(this.gradShapes[e].shadow),this.activeShapeIndex=e,this.grad=t;var i=this.getStartEndY(t);this.endY=i.endY,this.startY=i.startY,this.currentShapeAngle=i.angle}else this.gradShapes[e].sprite.parent==this.container&&(this.scene.physicsManager.removeBodyFromWorld(this.gradShapes[e].body),this.container.removeChild(this.gradShapes[e].sprite),this.container.removeChild(this.gradShapes[e].shadow))},t.prototype.getStartEndY=function(t){var e={startY:0,endY:0,angle:0};switch(t){case-2:e.startY=50,e.endY=0,e.angle=.453786;break;case-1:e.startY=25,e.endY=0,e.angle=.226893;break;case 0:e.startY=97,e.endY=97,e.angle=0;break;case 1:e.startY=0,e.endY=25,e.angle=-.226893;break;case 2:e.startY=0,e.endY=50,e.angle=-.453786}return e},t.prototype.updatePos=function(t,e,i,n){for(var o=0;o<this.gradShapes.length;o++)this.gradShapes[o].body.position[0]=t,this.gradShapes[o].body.position[1]=Game.stageHeight-e-n+i-50,this.undersprite.position.x=t,this.undersprite.position.y=e+n-i,this.undersprite.height=1e3,this.gradShapes[o].shadow.position.x=t,this.gradShapes[o].shadow.position.y=this.undersprite.position.y+this.shadowY,this.undersprite2.position.x=t,this.undersprite2.position.y=this.gradShapes[o].shadow.position.y,this.undersprite2.height=1e3,this.altitude=this.undersprite.position.y,this.xPos=this.undersprite.position.x},t.prototype.getPath=function(t){var e;switch(t){case-2:e=[[-50,50],[-50,0],[50,50]];break;case-1:e=[[-50,50],[-50,25],[50,50]];break;case 0:e=[[-50,50],[-50,-50],[50,-50],[50,50]];break;case 1:e=[[-50,50],[50,25],[50,50]];break;case 2:e=[[-50,50],[50,0],[50,50]]}return e},t.prototype.destroy=function(){for(var t=0;t<this.gradShapes.length;t++)Game.displayStore.returnPooledItem(this.undersprite),Game.displayStore.returnPooledItem(this.undersprite2),Game.displayStore.returnPooledItem(this.gradShapes[t].sprite),Game.displayStore.returnPooledItem(this.gradShapes[t].shadow);this.gradShapes=[]},t}(),ComeOutSwingingBeam=function(){function t(t,e){this.available=!0,this.scene=t,this.game=t.game,this.type="beam",this.index=e,this.innerHolder=Game.displayStore.getContainer("come-out-swinging/beam-container"),this.innerHolderFront=Game.displayStore.getContainer("come-out-swinging/beam-container-front"),this.container=Game.displayStore.getContainer("come-out-swinging/beam-main-container"),this.containerFront=Game.displayStore.getContainer("come-out-swinging/beam-main-container-front"),this.end1=Game.displayStore.getSprite("come-out-swinging/beam-end"),this.end2=Game.displayStore.getSprite("come-out-swinging/beam-end"),this.beamPole1=Game.displayStore.getSprite("come-out-swinging/beam-pole"),this.beamPole2=Game.displayStore.getSprite("come-out-swinging/beam-pole"),this.end2.rotation=Math.PI,this.container.addChild(this.beamPole1),this.container.addChild(this.beamPole2),0==Game.isLowEndIPad&&(this.beamPoleTop1l=Game.displayStore.getSprite("come-out-swinging/beam-pole-arm-side"),this.beamPoleTop1r=Game.displayStore.getSprite("come-out-swinging/beam-pole-arm-side"),this.beamPoleTop1t=Game.displayStore.getSprite("come-out-swinging/beam-pole-arm-top"),this.beamPoleTop2l=Game.displayStore.getSprite("come-out-swinging/beam-pole-arm-side"),this.beamPoleTop2r=Game.displayStore.getSprite("come-out-swinging/beam-pole-arm-side"),this.beamPoleTop2t=Game.displayStore.getSprite("come-out-swinging/beam-pole-arm-top"),this.container.addChild(this.beamPoleTop1l),this.container.addChild(this.beamPoleTop1r),this.container.addChild(this.beamPoleTop2l),this.container.addChild(this.beamPoleTop2r),this.container.addChild(this.beamPoleTop1t),this.container.addChild(this.beamPoleTop2t)),this.innerHolderFront.addChild(this.end1),this.innerHolderFront.addChild(this.end2),this.container.addChild(this.innerHolder),this.beamPole1.tint=16777215,this.beamPole2.tint=16777215,this.end1.tint=16777215,this.end2.tint=16777215,this.beamPole1.blendMode=PIXI.BLEND_MODES.NORMAL,this.beamPole2.blendMode=PIXI.BLEND_MODES.NORMAL,this.end1.blendMode=PIXI.BLEND_MODES.NORMAL,this.end2.blendMode=PIXI.BLEND_MODES.NORMAL,this.container.alpha=1,this.containerFront.alpha=1,this.count=0,this.body=new p2.Body({mass:0})}return t.prototype.spawn=function(t){this.available=!1,this.container.position.x=this.containerFront.position.x=t.position[0],this.container.position.y=this.containerFront.position.y=t.position[1],this.scene.physicsManager.activeObstacles.push(this),this.length=t.length||100,this.middle=Game.displayStore.getAnimatedSprite("come-out-swinging/long-laser/long-laser-frames"),this.middle.animationSpeed=.4,this.middle.loop=!0,this.middle.blendMode=PIXI.BLEND_MODES.ADD,this.middle.gotoAndPlay(0),this.innerHolderFront.addChild(this.middle),this.end1.position.x=-this.length/2,this.end2.position.x=this.length/2,this.middle.height=this.length+30,this.middle.rotation=Math.PI/2,this.middle.alpha=1;var e=t.angle||0;switch(this.innerHolder.rotation=e,this.innerHolderFront.rotation=e,t.angle){case Math.PI/2:this.end1.rotation=e,this.end2.rotation=-e;break;case Math.PI/4:case 0:case-Math.PI/4:this.end1.rotation=Math.PI/2,this.end2.rotation=-Math.PI/2}this.beamPole1.height=1e3,this.beamPole2.height=1e3,this.containerFront.position.y=this.container.position.y,this.body.position[0]=this.container.position.x,this.body.position[1]=Game.stageHeight-this.container.position.y,this.scene.physicsManager.addBodyToWorld(this.body),this.shape=new p2.Box({width:.8*this.middle.width,height:5}),this.shape.collisionGroup=this.scene.physicsManager.FAIL,this.shape.collisionMask=this.scene.physicsManager.CHARACTER,this.shape.sensor=!0,this.body.addShape(this.shape,[0,0],-e),this.container.addChild(this.innerHolderFront),this.beamPole1.position.x=this.container.toLocal(new PIXI.Point,this.end1).x,this.beamPole2.position.x=this.container.toLocal(new PIXI.Point,this.end2).x,this.beamPole1.position.y=this.container.toLocal(new PIXI.Point,this.end1).y,this.beamPole2.position.y=this.container.toLocal(new PIXI.Point,this.end2).y},t.prototype.stop=function(t){t.middle&&(t.middle.alpha=0);var e=new RoughEase({strength:2,points:15,randomize:!1,clamp:!0});this.beamPole1.tint=65280,this.beamPole2.tint=65280,this.end1.tint=65280,this.end2.tint=65280,this.beamPole1.blendMode=PIXI.BLEND_MODES.ADD,this.beamPole2.blendMode=PIXI.BLEND_MODES.ADD,this.end1.blendMode=PIXI.BLEND_MODES.ADD,this.end2.blendMode=PIXI.BLEND_MODES.ADD,TweenMax.to(this.container,.5,{alpha:0,ease:e}),TweenMax.to(this.containerFront,.58,{alpha:0,ease:e})},t.prototype.tick=function(){if(1!=this.available&&0==Game.isLowEndIPad){var t=(this.scene.container.toLocal(new PIXI.Point,this.innerHolder).x-Game.stageWidth/2)/Game.stageWidth/2*300,e=(this.scene.container.toLocal(new PIXI.Point,this.innerHolder).y-Game.stageHeight/2)/Game.stageHeight/2*300,i=this.container.toLocal(new PIXI.Point,this.end1).x,n=this.container.toLocal(new PIXI.Point,this.end1).y,o=this.container.toLocal(new PIXI.Point,this.end2).x,a=this.container.toLocal(new PIXI.Point,this.end2).y;this.beamPole1.position.x=i-t,this.beamPole2.position.x=o-t,this.beamPole1.position.y=n-e,this.beamPole2.position.y=a-e;var s=i-t,r=i-t+this.beamPole1.width/2-3,h=i-t-this.beamPole1.width/2+3,l=n-e,p=n-e+this.beamPoleTop1l.height/2,c=o-t,d=o-t+this.beamPole2.width/2-3,u=o-t-this.beamPole2.width/2+3,g=a-e,m=a-e+this.beamPoleTop2l.height/2,f=this.getAngle(i,n-10,this.beamPole1.position.x,this.beamPole1.position.y),y=this.getDistance(i,n-10,this.beamPole1.position.x,this.beamPole1.position.y),v=y/61,b=y/50,w=Math.PI/2+f,S=-f;t>0?(this.container.addChild(this.beamPoleTop1l),this.container.addChild(this.beamPoleTop1r),this.container.addChild(this.beamPoleTop2l),this.container.addChild(this.beamPoleTop2r),this.container.addChild(this.innerHolder)):(S=Math.PI-f,v*=-1,this.container.addChild(this.beamPoleTop1t),this.container.addChild(this.beamPoleTop1r),this.container.addChild(this.beamPoleTop1l),this.container.addChild(this.beamPoleTop2r),this.container.addChild(this.beamPoleTop2l),this.container.addChild(this.innerHolder)),e>0?(this.container.addChild(this.beamPoleTop1t),this.container.addChild(this.beamPoleTop2t),this.container.addChild(this.innerHolder)):(w=-Math.PI/2+f,b*=-1,this.container.addChildAt(this.beamPoleTop1t,0),this.container.addChildAt(this.beamPoleTop2t,0)),this.container.addChild(this.innerHolderFront),this.beamPoleTop1l.setTransform(r,p,v,1,0,0,S),this.beamPoleTop1r.setTransform(h,p,v,1,0,0,S),this.beamPoleTop1t.setTransform(s,l,1,b,0,w,0),this.beamPoleTop2l.setTransform(d,m,v,1,0,0,S),this.beamPoleTop2r.setTransform(u,m,v,1,0,0,S),this.beamPoleTop2t.setTransform(c,g,1,b,0,w,0)}},t.prototype.getAngle=function(t,e,i,n){if(t!=i||e!=n){var o=t-i,a=n-e;return Math.atan2(a,o)}},t.prototype.getDistance=function(t,e,i,n){var o=t-i,a=e-n;return Math.sqrt(o*o+a*a)},t.prototype.remove=function(){Game.displayStore.returnPooledItem(this.middle),this.innerHolderFront.removeChild(this.middle),this.available=!0,this.body.removeShape(this.shape),this.scene.physicsManager.activeObstacles.splice(this.scene.physicsManager.activeObstacles.indexOf(this),1),this.scene.physicsManager.removeBodyFromWorld(this.body)},t.prototype.destroy=function(){this.container.parent&&(this.container.parent.removeChild(this.container),this.containerFront.parent.removeChild(this.containerFront)),Game.displayStore.returnPooledItem(this.innerHolder),Game.displayStore.returnPooledItem(this.container),Game.displayStore.returnPooledItem(this.innerHolderFront),Game.displayStore.returnPooledItem(this.containerFront),Game.displayStore.returnPooledItem(this.middle),Game.displayStore.returnPooledItem(this.end1),Game.displayStore.returnPooledItem(this.end2),Game.displayStore.returnPooledItem(this.beamPole1),Game.displayStore.returnPooledItem(this.beamPole2),0==Game.isLowEndIPad&&(Game.displayStore.returnPooledItem(this.beamPoleTop1l),Game.displayStore.returnPooledItem(this.beamPoleTop1r),Game.displayStore.returnPooledItem(this.beamPoleTop1t),Game.displayStore.returnPooledItem(this.beamPoleTop2l),Game.displayStore.returnPooledItem(this.beamPoleTop2r),Game.displayStore.returnPooledItem(this.beamPoleTop2t))},t}(),ComeOutSwingingVent=function(){function t(t,e){this.available=!0,this.scene=t,this.game=t.game,this.yPosChecked=!1,this.timeOutReset=0,this.index=e,this.container=Game.displayStore.getContainer("come-out-swinging/vent-container"),this.containerFront=Game.displayStore.getContainer("come-out-swinging/vent-container-front"),this.grill=Game.displayStore.getSprite("come-out-swinging/vent-grill"),this.front=Game.displayStore.getSprite("come-out-swinging/vent-front"),this.sideL=Game.displayStore.getSprite("come-out-swinging/vent-side-left"),this.sideR=Game.displayStore.getSprite("come-out-swinging/vent-side-right"),this.topSideL=Game.displayStore.getSprite("come-out-swinging/vent-top-side-left"),this.topSideR=Game.displayStore.getSprite("come-out-swinging/vent-top-side-right"),this.topTop=Game.displayStore.getSprite("come-out-swinging/vent-top-top"),this.topBottom=Game.displayStore.getSprite("come-out-swinging/vent-top-bottom"),this.container.addChild(this.front),this.containerFront.addChild(this.grill),this.grill.tint=16777215,this.grill.blendMode=PIXI.BLEND_MODES.NORMAL,this.front.blendMode=PIXI.BLEND_MODES.NORMAL,0==Game.isLowEndIPad?(this.container.addChild(this.sideL),this.container.addChild(this.topSideL),this.container.addChild(this.sideR),this.container.addChild(this.topSideR),this.container.addChild(this.topBottom),this.container.addChild(this.topTop),this.sideL.tint=16777215,this.sideR.tint=16777215,this.topSideL.tint=16777215,this.topSideR.tint=16777215,this.topTop.tint=16777215,this.topBottom.tint=16777215,this.front.tint=16777215,this.sideL.blendMode=PIXI.BLEND_MODES.NORMAL,this.sideR.blendMode=PIXI.BLEND_MODES.NORMAL,this.topSideL.blendMode=PIXI.BLEND_MODES.NORMAL,this.topSideR.blendMode=PIXI.BLEND_MODES.NORMAL,this.topTop.blendMode=PIXI.BLEND_MODES.NORMAL,this.topBottom.blendMode=PIXI.BLEND_MODES.NORMAL):this.front.tint=13421772,this.count=0,this.container.alpha=1,this.containerFront.alpha=1}return t.prototype.spawn=function(t){this.available=!1,this.type="vent",this.yPosChecked=!1;var e=Game.getRandom(-150,400);this.body=new p2.Body({mass:0}),this.scene.physicsManager.bindSpriteToBody(this.containerFront,this.body),0==Game.isLowEndIPad&&(this.container.alpha=0,this.containerFront.alpha=0),this.container.position.x=this.containerFront.position.x=t,this.container.position.y=this.containerFront.position.y=e,this.container.rotation=0,this.containerFront.addChild(this.grill),this.body.type=p2.Body.STATIC,this.body.mass=0,this.body.updateMassProperties(),this.body.position[0]=t,this.body.position[1]=Game.stageHeight-e,this.front.position.x=this.container.toLocal(new PIXI.Point,this.grill).x,this.front.position.y=this.container.toLocal(new PIXI.Point,this.grill).y,this.front.scale.y=-1,this.front.height=1.5*Game.stageHeight,0==Game.isLowEndIPad&&(this.sideL.position.x=this.front.position.x-this.front.width/2,this.sideL.position.y=this.front.position.y,this.sideL.scale.y=-1,this.sideL.height=this.front.height,this.sideR.position.x=this.front.position.x+this.front.width/2,this.sideR.position.y=this.front.position.y,this.sideR.scale.y=-1,this.sideR.height=this.front.height,this.topTop.position.x=this.front.position.x,this.topTop.position.y=this.front.position.y,this.topBottom.position.x=this.front.position.x,this.topBottom.position.y=this.front.position.y),this.smashForce=Game.getRandom(10,50),this.body.position[1]+=Game.getRandom(-500,-300),this.container.position.y=Game.stageHeight-this.body.position[1],this.scene.physicsManager.addBodyToWorld(this.body),this.shape=new p2.Box({width:50,height:45}),this.shape.collisionGroup=this.scene.physicsManager.LEVEL,this.shape.collisionMask=this.scene.physicsManager.CHARACTER,this.body.addShape(this.shape,[0,0],0),this.topTop.position.y=this.front.position.y-this.grill.height,this.grillX=this.container.toLocal(new PIXI.Point,this.grill).x,this.grillY=this.container.toLocal(new PIXI.Point,this.grill).y},t.prototype.stop=function(t){var e=new RoughEase({strength:2,points:15,randomize:!1,clamp:!0});this.grill.tint=65280,this.front.tint=65280,0==Game.isLowEndIPad&&(this.sideL.tint=65280,this.sideR.tint=65280,this.topSideL.tint=65280,this.topSideR.tint=65280,this.topTop.tint=65280,this.topBottom.tint=65280,this.grill.blendMode=PIXI.BLEND_MODES.ADD,this.front.blendMode=PIXI.BLEND_MODES.ADD,this.sideL.blendMode=PIXI.BLEND_MODES.ADD,this.sideR.blendMode=PIXI.BLEND_MODES.ADD,this.topSideL.blendMode=PIXI.BLEND_MODES.ADD,this.topSideR.blendMode=PIXI.BLEND_MODES.ADD,this.topTop.blendMode=PIXI.BLEND_MODES.ADD,this.topBottom.blendMode=PIXI.BLEND_MODES.ADD),TweenMax.to(this.container,.5,{alpha:0,ease:e}),TweenMax.to(this.containerFront,.58,{alpha:0,ease:e})},t.prototype.tick=function(){if(1!=this.available&&(this.scene.physicsManager.activeObstacles.push(this),this.timeOutReset>0&&this.timeOutReset--,0==Game.isLowEndIPad)){var t=(this.scene.container.toLocal(new PIXI.Point,this.container).x-Game.stageWidth/2)/Game.stageWidth/2*500,e=(this.scene.container.toLocal(new PIXI.Point,this.container).y-Game.stageHeight/2)/Game.stageHeight/2*500;"vent"==this.type&&(this.grillX=this.container.toLocal(new PIXI.Point,this.grill).x,this.grillY=this.container.toLocal(new PIXI.Point,this.grill).y),this.front.position.x=this.grillX-.8*t,this.front.position.y=this.grillY-.8*e-40;var i=this.grillX-t,n=this.grillX-t+this.front.width/2,o=this.grillY-t-this.front.width/2,a=this.grillY-e-this.grill.height+6,s=this.grillY-e-2,r=this.grillY-e,h=this.getDistance(this.grillX,this.grillY+this.grill.height/2,this.grillX-t,this.grillY-e),l=this.getAngle(this.grillX,this.grillY+this.grill.height/2,this.grillX-t,this.grillY-e),p=this.getAngle(this.grillX+this.smashForce,this.grillY+this.grill.height/2,this.grillX-t,this.grillY-e),c=this.getAngle(this.grillX+1.2*this.smashForce,this.grillY+this.grill.height/2,this.grillX-t,this.grillY-e),d=h/240,u=h/90,g=h/88,m=h/70,f=Math.PI/2+l,y=-l,v=-p,b=-c;if(t>0?(this.container.addChild(this.sideR),this.container.addChild(this.topSideR),this.container.addChild(this.topTop),this.container.addChild(this.sideL),this.container.addChild(this.front),this.container.addChild(this.topSideL),this.container.addChild(this.topBottom)):(y=Math.PI-l,v=Math.PI-p,b=Math.PI-c,u*=-1,d*=-1,this.container.addChild(this.sideL),this.container.addChild(this.topSideL),this.container.addChild(this.topTop),this.container.addChild(this.sideR),this.container.addChild(this.front),this.container.addChild(this.topSideR),this.container.addChild(this.topBottom)),e>-25?this.container.addChildAt(this.topBottom,0):(f=-Math.PI/2+l,g*=-1,m*=-1),this.sideL.setTransform(o+2,r,-d,this.sideL.scale.y,0,0,y),this.sideR.setTransform(n-2,r,d,this.sideR.scale.y,0,0,y),"vent"==this.type?(this.topSideL.setTransform(o,r,-u,this.topSideL.scale.y,0,0,y),this.topSideR.setTransform(n,r,u,this.topSideR.scale.y,0,0,y),this.topTop.setTransform(i,a,this.topTop.scale.x,g,0,f,0),this.topBottom.setTransform(i,s,this.topBottom.scale.x,m,0,f,0)):(this.topSideL.setTransform(o,r,-u,this.topSideL.scale.y,0,0,v),this.topSideR.setTransform(n,r,u,this.topSideR.scale.y,0,0,b),this.topTop.setTransform(i,a,this.topTop.scale.x,g,0,f,0),this.topBottom.setTransform(i,s,this.topBottom.scale.x,m,0,f,0)),this.scene.container.toLocal(new PIXI.Point,this.container).x<Game.stageWidth+200&&0==this.yPosChecked&&0==Game.isLowEndIPad){this.yPosChecked=!0;var w,S=this.scene.terrainManager.getChunkAt(this.container.position.x),x=Game.getRandom(160,700);w=0==S.grad?S.altitude+100:S.altitude,this.body.position[1]=Game.stageHeight-(w+x),this.container.position.y=w+x,this.container.alpha=1,this.containerFront.alpha=1}}},t.prototype.smash=function(){if(0==this.scene.powerUpIsActive)return this.scene.changeExpression(4),void(0==this.timeOutReset&&(Game.playSound("come-out-swinging/vent-hit-"+Game.getRandom(1,4,!0),.6),Game.playSound("come-out-swinging/henry-hurt-"+Game.getRandom(1,4,!0)),this.timeOutReset=40));Game.playSound("come-out-swinging/smash-vent-"+Game.getRandom(1,4,!0),.6),Game.playSound("come-out-swinging/metal-bang-"+Game.getRandom(1,2,!0),.6),Game.playSound("come-out-swinging/shield-impact"),this.type="smashed-vent",this.body.type=p2.Body.DYNAMIC,this.body.mass=1,this.body.updateMassProperties(),this.scene.fireVentParticles(this.scene.mainHolder.toLocal(new PIXI.Point,this.containerFront)),this.scene.fireSmashParticles(this.scene.mainHolder.toLocal(new PIXI.Point,this.containerFront)),this.smashTimeline=this.scene.killTween(this.smashTimeline),this.smashTimeline=new TimelineMax,this.smashTimeline.add([TweenMax.to(this.container,.5,{rotation:Game.getRandom(-.3,-.1),ease:Back.easeOut}),TweenMax.to(this.container,.4,{x:"+=150",ease:Power1.easeOut}),TweenMax.to(this.container,.6,{y:"+=50",ease:Bounce.easeOut})])},t.prototype.getAngle=function(t,e,i,n){if(t!=i||e!=n){var o=t-i,a=n-e;return Math.atan2(a,o)}},t.prototype.getDistance=function(t,e,i,n){var o=t-i,a=e-n;return Math.sqrt(o*o+a*a)},t.prototype.remove=function(){this.yPosChecked=!1,Game.displayStore.returnPooledItem(this.grill),this.containerFront.removeChild(this.grill),this.available=!0,this.container.parent.removeChild(this.container),this.containerFront.parent.removeChild(this.containerFront),this.body.removeShape(this.shape),this.scene.physicsManager.activeObstacles.splice(this.scene.physicsManager.activeObstacles.indexOf(this),1),this.scene.physicsManager.unbindSpriteFromBody(this.containerFront),this.scene.physicsManager.removeBodyFromWorld(this.body)},t.prototype.destroy=function(){this.container.parent&&(this.container.parent.removeChild(this.container),this.containerFront.parent.removeChild(this.containerFront)),Game.displayStore.returnPooledItem(this.container),Game.displayStore.returnPooledItem(this.containerFront),Game.displayStore.returnPooledItem(this.grill),Game.displayStore.returnPooledItem(this.front),Game.displayStore.returnPooledItem(this.sideL),Game.displayStore.returnPooledItem(this.sideR),Game.displayStore.returnPooledItem(this.topSideL),Game.displayStore.returnPooledItem(this.topSideR),Game.displayStore.returnPooledItem(this.topTop),Game.displayStore.returnPooledItem(this.topBottom)},t}(),ComeOutSwingingBoxingGlove=function(){function t(t){this.scene=t,this.game=t.game,this.enabled=!0,this.hasHit=!1,this.count=0,this.container=Game.displayStore.getContainer("come-out-swinging/boxing-glove"),this.flameAnimation=Game.displayStore.getAnimatedSprite("come-out-swinging/flame"),this.flameAnimation.gotoAndPlay(0),this.flameAnimation.animationSpeed=.4,this.flameAnimation.blendMode=PIXI.BLEND_MODES.ADD,this.flameAnimation.position.x=80,this.flameAnimation.position.y=17,this.flameAnimation.scale.x=this.flameAnimation.scale.y=2,this.flameAnimation.rotation=Math.PI/2,this.container.addChildAt(this.flameAnimation,0),this.body=new p2.Body({mass:0,position:[-2e3,0]}),this.scene.physicsManager.addBodyToWorld(this.body),this.shape=new p2.Circle({radius:70}),this.shape.collisionGroup=this.scene.physicsManager.LEVEL,this.shape.collisionMask=this.scene.physicsManager.CHARACTER,this.body.addShape(this.shape,[-70,0]),this.scene.physicsManager.bindSpriteToBody(this.container,this.body),this.warning=Game.displayStore.getContainer("come-out-swinging/warning"),this.mark=this.warning.getSprite("come-out-swinging/exclamation-mark.png"),this.warning.visible=!1}return t.prototype.spawn=function(t){this.enabled=!0,this.hasHit=!1,this.body.setZeroForce(),this.body.invMass=1/this.body.mass,this.body.invInertia=1/this.body.inertia,this.body.angularVelocity=0,this.body.angularForce=0,this.body.angle=0,this.body.velocity=[0,0],this.body.setZeroForce(),this.body.mass=0,this.body.type=p2.Body.STATIC,this.body.updateMassProperties(),this.flameAnimation.alpha=1;var e=[300,500,700][Game.getRandom(0,2,!0)];this.body.position[0]=t,this.body.position[1]=Game.stageHeight-e,this.warning.visible=!0,Game.playSound("come-out-swinging/warning",.8),Game.playSound("come-out-swinging/rocket-"+Game.getRandom(1,2,!0))},t.prototype.pause=function(){this.flameAnimation.stop()},t.prototype.resume=function(){this.flameAnimation.play()},t.prototype.smash=function(){0!=this.scene.powerUpIsActive?(this.flameAnimation.alpha=0,Game.playSound("come-out-swinging/henry-yeahh"),this.body.type=p2.Body.DYNAMIC,this.body.mass=1,this.body.updateMassProperties(),this.body.applyImpulse([1e3,200]),this.body.angularForce=6e5,this.scene.fireSmashParticles(this.scene.mainHolder.toLocal(new PIXI.Point,this.container))):this.scene.changeExpression(0)},t.prototype.tick=function(){this.body.position[0]-=16,this.warning.position.x=this.warning.parent.toLocal(new PIXI.Point,this.scene.container).x+1.25*Game.stageWidth,this.warning.position.y=this.container.position.y,this.mark.alpha=(Math.sin(this.count)+1)/2,this.count+=.5,this.scene.container.toLocal(new PIXI.Point,this.container).x<Game.stageWidth?this.warning.visible=!1:this.warning.visible=!0},t.prototype.getAngle=function(t,e,i,n){if(t!=i||e!=n){var o=t-i,a=n-e;return Math.atan2(a,o)}},t.prototype.getDistance=function(t,e,i,n){var o=t-i,a=e-n;return Math.sqrt(o*o+a*a)},t.prototype.remove=function(){this.enabled=!1},t.prototype.destroy=function(){this.scene.physicsManager.unbindSpriteFromBody(this.container),this.body.removeShape(this.shape),this.scene.physicsManager.removeBodyFromWorld(this.body),this.container.parent&&this.container.parent.removeChild(this.container)},t}(),ComeOutSwingingObstaclesManager=function(){function t(t){this.totalObstacles=8,this.angles=[0,Math.PI/2,-Math.PI/4,Math.PI/4],this.lengths=[80,130,180],this.scene=t,this.game=t.game,this.spawnGap=1200,this.lastSpawnX=0,this.beamChance=0,this.spawnGapBG=7e3,this.lastSpawnXBG=7e3,this.currentSmokeParticle=0,this.smokeCount=0,this.obstacles=[],this.boxingGloveSmokeArray=[],this.container=Game.displayStore.getContainer("come-out-swinging/obstacles-container"),this.containerFront=Game.displayStore.getContainer("come-out-swinging/obstacles-container-front");for(var e=0;e<30;e++){var i;(i=e<15?Game.displayStore.getSprite("come-out-swinging/smoke-puff-1"):Game.displayStore.getSprite("come-out-swinging/smoke-puff-2")).position.y=-500,this.boxingGloveSmokeArray.push({avail:!0,sprite:i}),this.containerFront.addChild(i)}this.scene.shuffleArray(this.boxingGloveSmokeArray),this.populateObjectPool(),this.boxingGlove=new ComeOutSwingingBoxingGlove(this.scene),this.containerFront.addChild(this.boxingGlove.container),this.containerFront.addChild(this.boxingGlove.warning)}return t.prototype.populateObjectPool=function(){for(var t=0;t<this.totalObstacles;t++){var e;e=t<2?new ComeOutSwingingBeam(this.scene,t):new ComeOutSwingingVent(this.scene,t),this.obstacles.push(e)}},t.prototype.spawnBeam=function(t){for(var e=0;e<2;e++){var i=this.obstacles[e];if(1==i.available){var n=this.angles[Game.getRandom(0,this.angles.length-1,!0)],o=this.lengths[Game.getRandom(0,this.lengths.length-1,!0)],a=Game.getRandom(250,850);i.spawn({position:[t,a],angle:n,length:o}),this.container.addChild(i.container),this.containerFront.addChild(i.containerFront);break}}},t.prototype.spawnVent=function(t){for(var e=2;e<this.obstacles.length;e++){var i=this.obstacles[e];if(1==i.available){i.spawn(t),this.container.addChild(i.container),this.containerFront.addChild(i.containerFront);break}}this.containerFront.addChild(this.boxingGlove.container)},t.prototype.tick=function(t){if(this.scene.mainHolder.toLocal(new PIXI.Point,this.boxingGlove.container).x>-Game.stageWidth){if(this.boxingGlove.body.type==p2.Body.STATIC&&this.boxingGlove.tick(),this.smokeCount%5==0&&0==Game.isLowEndIPad){for(n=0;n<this.boxingGloveSmokeArray.length;n++){var e;if(1==this.boxingGloveSmokeArray[n].avail){e=this.boxingGloveSmokeArray[n].sprite,this.boxingGloveSmokeArray[n].avail=!1;break}}e.position.x=this.boxingGlove.container.position.x+120,e.position.y=this.boxingGlove.container.position.y+10,e.rotation=Game.getRandom(0,2*Math.PI);var i=Game.getRandom(.5,2);e.scale.x=e.scale.y=i,e.alpha=1}if(0==Game.isLowEndIPad)for(n=0;n<this.boxingGloveSmokeArray.length-1;n++)this.boxingGloveSmokeArray[n].sprite.alpha>0?this.boxingGloveSmokeArray[n].sprite.alpha-=.01:this.boxingGloveSmokeArray[n].avail=!0,this.boxingGloveSmokeArray[n].sprite.rotation+=.02,this.boxingGloveSmokeArray[n].sprite.scale.x+=.1,this.boxingGloveSmokeArray[n].sprite.scale.y+=.1,this.boxingGloveSmokeArray[n].sprite.position.y-=3}if(this.smokeCount++,1!=this.scene.showingGameOverHenry){for(var n=0;n<this.obstacles.length;n++){var o=this.obstacles[n];o.tick(),this.scene.container.toLocal(new PIXI.Point,o.container).x<-1e3&&0==o.available&&o.remove()}this.scene.getCurrentPlayerPos("local").x>this.lastSpawnX+this.spawnGap-Game.stageWidth&&(this.lastSpawnX=this.lastSpawnX+this.spawnGap+Game.stageWidth,Game.getRandom(0,1)>this.beamChance?this.spawnVent(this.lastSpawnX):this.spawnBeam(this.lastSpawnX),this.spawnGap>200&&Game.getRandom(0,1)<this.scene.difficultyCurve&&(this.spawnGap-=Game.getRandom(10,60,!0),this.beamChance<.4&&(this.beamChance+=.05))),this.scene.getCurrentPlayerPos("local").x>this.lastSpawnXBG+this.spawnGapBG-Game.stageWidth&&0==this.scene.characterIsHit&&(this.lastSpawnXBG=this.lastSpawnXBG+this.spawnGapBG+3*Game.stageWidth,this.boxingGlove.spawn(this.lastSpawnXBG),this.spawnGapBG>3e3&&Game.getRandom(0,1)<this.scene.difficultyCurve&&(this.spawnGap-=Game.getRandom(50,150,!0)))}},t.prototype.pause=function(){this.boxingGlove.pause()},t.prototype.resume=function(){this.boxingGlove.resume()},t.prototype.stopBeams=function(){for(var t=0;t<this.obstacles.length;t++)this.obstacles[t].stop(this.obstacles[t])},t.prototype.destroy=function(){for(t=0;t<this.obstacles.length;t++)this.obstacles[t].destroy();for(var t=0;t<this.boxingGloveSmokeArray.length;t++)Game.displayStore.returnPooledItem(this.boxingGloveSmokeArray[t].sprite)},t}(),ComeOutSwingingCloudManager=function(){function t(t,e){if(this.scene=t,this.game=t.game,this.mainHolder=e,this.clouds=new Array,this.previousY=0,this.doDisperse=!1,this.cloudBack=Game.displayStore.getSprite("come-out-swinging/cloud-back"),this.cloudBack.height=1.5*Game.stageHeight,this.cloudBack.position.y=0,this.container=Game.displayStore.getContainer("come-out-swinging/cloud-container"),this.red=Game.displayStore.getSprite("come-out-swinging/red-chase"),this.red.height=2.5*Game.stageHeight,this.red.width=2.5*Game.stageWidth,this.red.position.x=60,this.red.alpha=.9,this.red.position.y=-100,this.container.addChild(this.red),0==Game.isLowEndIPad)for(var i=0;i<30;i++){var n=Game.displayStore.getSprite("come-out-swinging/smoke-cloud-1");this.clouds.push({cloud:n,available:!0,counter:Game.getRandom(0,100,!0),increase:2*Math.PI/Game.getRandom(70,100),decayCounter:0,decayLimit:Game.getRandom(30,90),spin:Game.getRandom(-.01,.01)}),i%2==0?(this.clouds[i].cloud.blendMode=PIXI.BLEND_MODES.MULTIPLY,this.clouds[i].cloud.alpha=Game.getRandom(.45,.6)):(this.clouds[i].cloud.blendMode=PIXI.BLEND_MODES.ADD,this.clouds[i].cloud.alpha=Game.getRandom(.45,.8)),this.container.addChild(this.clouds[i].cloud)}this.scene.physicsManager.bindSpriteToBody(this.container,this.scene.physicsManager.chaseBody),this.spawnClouds(),this.mainHolder.addChild(this.container)}return t.prototype.spawnClouds=function(){for(var t=0;t<this.clouds.length;t++)15==t&&(this.previousY=0),t>=15&&(this.clouds[t].cloud.position.x=-180),this.clouds[t].cloud.position.y=this.previousY+2*this.clouds[t].cloud.height/7,this.previousY=this.clouds[t].cloud.position.y,this.clouds[t].available=!1,this.clouds[t].cloud.rotation=Game.getRandom(-5,5),this.clouds[t].cloud.scale.x=this.clouds[t].cloud.scale.y=2*Game.getRandom(.5,.8)},t.prototype.disperse=function(){this.doDisperse=!0},t.prototype.tick=function(){if(1!=Game.isLowEndIPad){for(var t=0;t<this.clouds.length;t++)0==this.clouds[t].available&&(this.clouds[t].cloud.scale.x=2*(Math.sin(this.clouds[t].counter)/5+.7),this.clouds[t].cloud.scale.y=2*(Math.sin(this.clouds[t].counter)/5+.7),this.clouds[t].cloud.rotation+=this.clouds[t].spin*this.scene.speedRatio*2,this.clouds[t].cloud.scale.x>1.6&&(this.clouds[t].cloud.scale.x=1.6,this.clouds[t].cloud.scale.y=1.6),this.clouds[t].cloud.scale.x<.8&&(this.clouds[t].cloud.scale.x=.8,this.clouds[t].cloud.scale.y=.8),this.clouds[t].cloud.position.x+=1.2*Math.sin(this.clouds[t].counter),this.clouds[t].counter+=this.clouds[t].increase*this.scene.speedRatio,1==this.doDisperse&&(this.clouds[t].cloud.alpha-=.1));1==this.doDisperse&&(this.red.alpha-=.1)}},t.prototype.remove=function(){},t.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.container);for(var t=0;t<this.clouds.length;t++)Game.displayStore.returnPooledItem(this.clouds[t].cloud)},t}(),ComeOutSwingingTvManager=function(){function t(t,e){this.scene=t,this.game=t.game,this.mainHolder=e,this.count=0,this.tvContainer=Game.displayStore.getContainer("come-out-swinging/tv-container"),this.tvScreen=this.tvContainer.getSprite("come-out-swinging/tv-screen-man"),this.tvScreen.position.x=10,this.tvPassed=!1,this.tvScreen.alpha=1,this.tvScreen.visible=!1,this.manSounds=new Array,this.manSounds.push({Sound:"come-out-swinging/cpt-man-dont-fret"}),this.manSounds.push({Sound:"come-out-swinging/cpt-man-keep-on-playing"}),this.manSounds.push({Sound:"come-out-swinging/cpt-man-my-god-this-game"}),this.manSounds.push({Sound:"come-out-swinging/cpt-man-wontons"}),this.tvPole=Game.displayStore.getSprite("come-out-swinging/beam-pole"),this.mainHolder.addChild(this.tvPole),this.mainHolder.addChild(this.tvContainer),this.tvContainer.position.x=4e3,this.tvContainer.position.y=-50,this.tvPole.height=Game.stageHeight,this.tvPole.position.x=this.tvContainer.position.x+this.tvContainer.width/2,this.tvPole.position.y=this.tvContainer.position.y+this.tvContainer.height/2,this.tvPole.rotation=Math.PI;Game.getRandom(0,1);this.tvPassed=!1,this.tvScreen.visible=!0}return t.prototype.tick=function(){if(this.scene.container.toLocal(new PIXI.Point,this.tvContainer).x<this.scene.getCurrentPlayerPos("global").x-1e3&&(this.tvPassed=!1,this.tvContainer.position.x=-this.scene.mainHolder.position.x+Game.stageWidth+12e3-this.mainHolder.position.x,this.tvContainer.position.y=Game.getRandom(-50,100,!0),this.tvPole.position.x=this.tvContainer.position.x+this.tvContainer.width/2,this.tvPole.position.y=this.tvContainer.position.y+this.tvContainer.height/2),this.scene.container.toLocal(new PIXI.Point,this.tvContainer).x<this.scene.getCurrentPlayerPos("global").x+500&&0==this.tvPassed){var t=Game.getRandom(0,this.manSounds.length-1,!0);Game.playSound(this.manSounds[t].Sound),this.tvPassed=!0}7==++this.count?(this.tvScreen.alpha=1,this.count=0):this.tvScreen.alpha-=.1},t.prototype.remove=function(){},t.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.tvPole)},t}(),ComeOutSwingingCheckpointManager=function(){function t(t,e){this.scene=t,this.game=t.game,this.checkpointDistance=6e3,this.container=e,this.checkpointPassed=!0,this.checkpoint=Game.displayStore.getContainer("come-out-swinging/checkpoint"),this.checkpoint.alpha=0,this.checkpointOff=this.checkpoint.getContainer("come-out-swinging/checkpoint-off"),this.checkpointOn=this.checkpoint.getContainer("come-out-swinging/checkpoint-on"),this.checkpointOn.getSprite("come-out-swinging/checkpoint-lamp-on.png").blendMode=PIXI.BLEND_MODES.ADD,this.checkpointOn.getSprite("come-out-swinging/checkpoint-side-on.png").blendMode=PIXI.BLEND_MODES.ADD,this.checkpointOff.getSprite("come-out-swinging/checkpoint-side-on.png").blendMode=PIXI.BLEND_MODES.ADD,this.checkpointBoard=this.checkpointOff.getSprite("come-out-swinging/checkpoint-board.png"),this.checkpointBoard.blendMode=PIXI.BLEND_MODES.ADD,this.checkpointOn.alpha=0,this.checkpointNumber=1,this.electric=Game.displayStore.getAnimatedSprite("come-out-swinging/checkpoint-electric"),this.electric.animationSpeed=.4,this.electric.blendMode=PIXI.BLEND_MODES.ADD,this.electric.gotoAndPlay(0),this.electric.position.x=73,this.electric.position.y=105,this.checkpointText=Game.displayStore.getBitmapText("come-out-swinging/checkpoint-font"),this.checkpointText.position.x=90,this.checkpointText.position.y=75,this.checkpointText.scale.x=this.checkpointText.scale.y=.65,this.checkpointText.text="01",this.checkpoint.addChild(this.checkpointText),this.checkpoint.addChild(this.electric),this.container.addChild(this.checkpoint)}return t.prototype.tick=function(){this.scene.getCurrentPlayerPos("local").x>this.checkpointDistance*this.checkpointNumber&&this.spawnCheckpoint(),this.scene.container.toLocal(new PIXI.Point,this.checkpoint).x<this.scene.getCurrentPlayerPos("global").x+100&&0==this.checkpointPassed&&this.passCheckpoint()},t.prototype.spawnCheckpoint=function(){this.checkpointPassed=!1,this.checkpoint.position.x=-this.scene.mainHolder.position.x+Game.stageWidth+300-this.scene.checkpointHolder.position.x,this.checkpoint.alpha=1,this.checkpoint.getSprite("come-out-swinging/checkpoint-off-pole.png").height=300,this.checkpoint.position.y=-180,this.checkpointOn.alpha=0;var t;t=this.checkpointNumber<10?"0"+this.checkpointNumber.toString():this.checkpointNumber.toString(),this.checkpointText.text=t,this.checkpointNumber+=1},t.prototype.passCheckpoint=function(){this.checkpointPassed=!0,this.scene.passedCheckpoint();var t=new RoughEase({strength:2,points:20,randomize:!1,clamp:!0});Game.playSound("come-out-swinging/shine",.9),TweenMax.to(this.checkpointOn,.2,{alpha:1,ease:t}),TweenMax.to(this.checkpointText,.2,{alpha:1,ease:t})},t.prototype.pause=function(){this.electric.stop()},t.prototype.resume=function(){this.electric.play()},t.prototype.destroy=function(){},t}(),BaddieBarrageInputManager=function(){function t(t,e){this.scene=t,this.leftInputDown=!1,this.rightInputDown=!1,this.hitAreaSprite=Game.displayStore.getSprite("baddie-barrage/blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite),this.mouseDown=!1}return t.prototype.setUpHitArea=function(t){t.interactive=!0,t.buttonMode=!0;var e=this;Game.onDesktop?(t.on("mousedown",function(t){e.inputDown(e,t.data.getLocalPosition(e.scene.container))}),t.on("mousemove",function(t){e.inputMove(e,t.data.getLocalPosition(e.scene.container))}),t.on("mouseup",function(t){e.inputUp(e,t.data.getLocalPosition(e.scene.container))}),t.on("mouseupoutside",function(t){e.inputUp(e,t.data.getLocalPosition(e.scene.container))})):(t.on("touchstart",function(t){e.inputDown(e,t.data.getLocalPosition(e.scene.container))}),t.on("touchmove",function(t){e.inputMove(e,t.data.getLocalPosition(e.scene.container))}),t.on("touchend",function(t){e.inputUp(e,t.data.getLocalPosition(e.scene.container))}),t.on("touchendoutside",function(t){e.inputUp(e,t.data.getLocalPosition(e.scene.container))}))},t.prototype.inputDown=function(t,e){t.mouseDown=!0,t.keyBoardModeOn=!1,t.mouseModeOn=!0,this.scene.tapScreen()},t.prototype.inputUp=function(t,e){},t.prototype.inputMove=function(t,e){t.mouseDown},t.prototype.getAngle=function(t,e,i,n){return Math.atan2(e-n,t-i)},t.prototype.upKeyDown=function(){},t.prototype.downKeyDown=function(){},t.prototype.upKeyUp=function(){},t.prototype.downKeyUp=function(){},t.prototype.tick=function(){},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},t}(),BaddieBarrageBar=function(){function t(t){this.scene=t,this.game=t.game,this.container=Game.displayStore.getContainer("baddie-barrage/bar"),this.marker=Game.displayStore.getSprite("baddie-barrage/marker"),this.markerPowerup=Game.displayStore.getSprite("baddie-barrage/marker-powerup"),this.markerContainer=Game.displayStore.getContainer("baddie-barrage/marker-container"),this.trailContainer=Game.displayStore.getContainer("baddie-barrage/trail-container"),this.greenTrail=this.trailContainer.getSprite("baddie-barrage/green-trail"),this.purpleTrail=this.trailContainer.getSprite("baddie-barrage/purple-trail"),this.trailContainer.position.y=-5,this.greenTrail.blendMode=PIXI.BLEND_MODES.ADD,this.purpleTrail.blendMode=PIXI.BLEND_MODES.ADD,this.trailContainer.alpha=0,this.trailContainer.scale.x=0,this.purpleTrail.visible=!1,this.purpleTrail.blendMode=PIXI.BLEND_MODES.ADD,this.greenTrail.visible=!0,this.greenTrail.blendMode=PIXI.BLEND_MODES.ADD,this.markerContainer.addChild(this.marker),this.markerContainer.addChild(this.markerPowerup),this.markerPowerup.visible=!1,this.marker.visible=!0,this.focusMode=!1,this.stopped=!1,this.isOpen=!1,this.targets=[],this.markerMarks=[],this.currentHits=[],this.container.addChild(this.trailContainer),this.container.addChild(this.markerContainer);for(var e=0;e<3;e++){var i=Game.displayStore.getSprite("baddie-barrage/target");this.container.addChildAt(i,1),this.targets.push(i),i.position.x=30+132*e;var n=Game.displayStore.getSprite("baddie-barrage/marker"),o=Game.displayStore.getSprite("baddie-barrage/marker-powerup");n.blendMode=PIXI.BLEND_MODES.ADD,n.alpha=0,o.blendMode=PIXI.BLEND_MODES.ADD,o.alpha=0,this.markerMarks.push({normalMark:n,powerupMark:o}),this.container.addChild(n),this.container.addChild(o)}this.container.addChild(this.container.getSprite("baddie-barrage/bar-pack")),this.container.addChild(this.container.getSprite("baddie-barrage/belt-logo")),this.currentTargetIndex=0,this.snapTolerance=10,this.sweepTime=1.5,this.lastMarkerX=this.markerContainer.position.x}return t.prototype.updateSweepTime=function(t){this.sweepTime=t},t.prototype.activatePowerup=function(){this.snapTolerance=30,this.focusMode=!0,this.markerPowerup.visible=!0,this.marker.visible=!1,this.greenTrail.visible=!1,this.purpleTrail.visible=!0;for(var t=0;t<this.targets.length;t++)TweenMax.to(this.targets[t].scale,.2,{x:this.scene.powerupFactor,ease:Power2.easeOut});this.sweepAnimation&&this.sweepAnimation.timeScale(this.scene.powerupFactor)},t.prototype.deactivatePowerup=function(){this.snapTolerance=10,this.focusMode=!1,this.greenTrail.visible=!0,this.purpleTrail.visible=!1,this.markerPowerup.visible=!1,this.marker.visible=!0;for(var t=0;t<this.targets.length;t++)TweenMax.to(this.targets[t].scale,.2,{x:1,ease:Power2.easeOut});this.sweepAnimation&&this.sweepAnimation.timeScale(1)},t.prototype.open=function(){this.markerContainer.x=-530,this.container.scale.x=1,this.container.position.x=0,this.introAnimation=this.scene.killTween(this.introAnimation),this.scene.setHenrySide("left"),this.scene.baddieManager.setBaddies(this.scene.waveSize),this.introAnimation=new TimelineMax,this.introAnimation.add(TweenMax.to(this.container.position,.5/this.scene.powerupFactor,{y:675,ease:Back.easeOut}),.5),this.introAnimation.call(this.sweep,null,this,1.5),this.introAnimation.call(this.scene.baddieManager.setCurrentBaddie,[1],this.scene.baddieManager,1.2),this.introAnimation.call(function(){this.isOpen=!0},null,this);for(var t=0;t<this.targets.length;t++)this.targets[t].scale.x=this.scene.powerupFactor,this.targets[t].alpha=1,this.markerMarks[t].normalMark.alpha=0,this.markerMarks[t].powerupMark.alpha=0,3-t>this.scene.numberOfTargets&&(this.targets[t].alpha=0)},t.prototype.close=function(t){this.isOpen=!1,this.introAnimation=this.scene.killTween(this.introAnimation),this.introAnimation=new TimelineMax,this.introAnimation.add(TweenMax.to(this.container.position,.5/this.scene.powerupFactor,{y:850,ease:Back.easeIn}),.6),t&&this.introAnimation.call(this.open,null,this)},t.prototype.sweep=function(t){var e=t||0;this.currentHits=[],this.stopped=!1,this.currentTargetIndex=0,this.scene.progress%2==0?(TweenMax.to(this.container.scale,.3,{x:-1,ease:Power2.easeOut}),TweenMax.to(this.container,.3,{x:-60,ease:Power2.easeOut})):(TweenMax.to(this.container.scale,.3,{x:1,ease:Power2.easeOut}),TweenMax.to(this.container,.3,{x:0,ease:Power2.easeOut})),this.markerContainer.x=-520,this.sweepAnimation=this.scene.killTween(this.sweepAnimation),this.sweepAnimation=new TimelineMax,this.sweepAnimation.add(TweenMax.to(this.markerContainer.position,this.sweepTime/(2*this.scene.powerupFactor),{x:530,ease:Power0.easeIn,onUpdate:this.tick,onUpdateParams:[this]}),e),this.sweepAnimation.add(TweenMax.to(this.trailContainer.scale,.4,{x:0,ease:Power2.easeOut})),this.sweepAnimation.call(function(){if(this.currentTargetIndex<this.scene.numberOfTargets)this.scene.hasMissed();else{for(var t=!0,e=0,i=0;i<this.currentHits.length;i++)1!=this.currentHits[i].isPerfect&&(t=!1),e+=this.currentHits[i].score;this.currentHits.length>0?this.scene.hasHit(e,t):this.scene.hasMissed()}},null,this,"-=0.4"),this.sweepAnimation.call(Game.playSound,["baddie-barrage/wind-up-4",.6],this,.2+e),this.sweepAnimation.call(function(){this.sweepTween=TweenMax.to(this.sweepAnimation,this.sweepTime/(2*this.scene.powerupFactor),{timeScale:.2,ease:Power1.easeOut,repeat:1,yoyo:!0})},null,this,e);for(var i=0;i<this.targets.length;i++)3-i<=this.scene.numberOfTargets&&(this.targets[i].alpha=1),this.markerMarks[i].normalMark.alpha=0,this.markerMarks[i].powerupMark.alpha=0},t.prototype.hasHit=function(t,e){this.currentHits.push({score:t,isPerfect:e})},t.prototype.hasMissed=function(){this.currentHits=[]},t.prototype.stop=function(){if(1!=this.stopped&&0!=this.isOpen){if(this.currentTargetIndex==this.scene.numberOfTargets-1&&(this.stopped=!0),0==this.focusMode)this.markerMarks[this.currentTargetIndex].normalMark.scale.y=4,this.markerMarks[this.currentTargetIndex].normalMark.position.x=this.markerContainer.position.x,this.markerMarks[this.currentTargetIndex].normalMark.alpha=1,(t=Math.abs(this.markerMarks[this.currentTargetIndex].normalMark.position.x-this.targets[3-this.scene.numberOfTargets+this.currentTargetIndex].position.x))<this.snapTolerance*this.scene.powerupFactor&&(t=0,this.markerMarks[this.currentTargetIndex].normalMark.position.x=this.targets[3-this.scene.numberOfTargets+this.currentTargetIndex].position.x),TweenMax.to(this.markerMarks[this.currentTargetIndex].normalMark.scale,.5,{x:1,y:1,ease:Expo.easeOut});else{this.markerMarks[this.currentTargetIndex].powerupMark.scale.y=4,this.markerMarks[this.currentTargetIndex].powerupMark.position.x=this.markerContainer.position.x,this.markerMarks[this.currentTargetIndex].powerupMark.alpha=1;var t=Math.abs(this.markerMarks[this.currentTargetIndex].powerupMark.position.x-this.targets[3-this.scene.numberOfTargets+this.currentTargetIndex].position.x);t<this.snapTolerance*this.scene.powerupFactor&&(t=0,this.markerMarks[this.currentTargetIndex].powerupMark.position.x=this.targets[3-this.scene.numberOfTargets+this.currentTargetIndex].position.x),TweenMax.to(this.markerMarks[this.currentTargetIndex].powerupMark.scale,.5,{x:1,y:1,ease:Expo.easeOut})}Game.playSound("baddie-barrage/marker-hit",.6),this.currentTargetIndex<this.scene.numberOfTargets&&(t>50*this.scene.powerupFactor&&this.hasMissed(),t<50*this.scene.powerupFactor&&t>5&&this.hasHit(50-t/this.scene.powerupFactor,!1),t<5&&this.hasHit(50,!0)),this.currentTargetIndex++}},t.prototype.tick=function(t){var e=Math.abs(t.lastMarkerX-t.markerContainer.position.x);t.lastMarkerX=t.markerContainer.position.x,t.trailContainer.position.x=t.markerContainer.position.x,t.trailContainer.alpha+=(.1*e-t.trailContainer.alpha)/5,t.trailContainer.scale.x+=(.2*e-t.trailContainer.scale.x)/5},t.prototype.pause=function(){this.scene.pauseResumeTween(this.introAnimation,"pause"),this.scene.pauseResumeTween(this.sweepAnimation,"pause"),this.scene.pauseResumeTween(this.sweepTween,"pause"),Game.pauseSound("baddie-barrage/wind-up-4")},t.prototype.resume=function(){this.scene.pauseResumeTween(this.introAnimation,"resume"),this.scene.pauseResumeTween(this.sweepAnimation,"resume"),this.scene.pauseResumeTween(this.sweepTween,"resume"),Game.resumeSound("baddie-barrage/wind-up-4")},t.prototype.getAngle=function(t,e,i,n){if(t!=i||e!=n){var o=t-i,a=n-e;return Math.atan2(a,o)}},t.prototype.getDistance=function(t,e,i,n){var o=t-i,a=e-n;return Math.sqrt(o*o+a*a)},t.prototype.destroy=function(){this.container.parent&&this.container.parent.removeChild(this.container),this.introAnimation=this.scene.killTween(this.introAnimation),this.sweepAnimation=this.scene.killTween(this.sweepAnimation),this.sweepTween=this.scene.killTween(this.sweepTween),Game.displayStore.returnPooledItem(this.marker),Game.displayStore.returnPooledItem(this.markerPowerup);for(var t=0;t<3;t++)Game.displayStore.returnPooledItem(this.targets[t]),Game.displayStore.returnPooledItem(this.markerMarks[t].normalMark),Game.displayStore.returnPooledItem(this.markerMarks[t].powerupMark)},t}(),BaddieBarrageBaddieManager=function(){function t(t){this.scene=t,this.game=t.game,this.container=Game.displayStore.getContainer("baddie-barrage/baddie-layer"),this.container.position.y=330,this.powerupCounter=0,this.flashTickerActive=!1,this.goingGameOver=!1,this.flashTicker=0,this.flashTickerLimit=120,this.baddies=[],this.focusActive=!1,this.hitGraphicContainer=Game.displayStore.getContainer("baddie-barrage/hit-container"),this.greenFlash=this.hitGraphicContainer.getSprite("baddie-barrage/green-flash"),this.pinkFlash=this.hitGraphicContainer.getSprite("baddie-barrage/pink-flash"),this.hitGraphicContainer.scale.x=this.hitGraphicContainer.scale.y=1.5,this.hitGraphicContainer.position.y=-300,this.hitGraphicContainer.position.x=-300,this.hitGraphicContainer.visible=!0,this.pinkFlash.visible=!1,this.greenFlash.visible=!1,this.greenFlash.blendMode=PIXI.BLEND_MODES.ADD,this.pinkFlash.blendMode=PIXI.BLEND_MODES.ADD;for(var e=0;e<10;e++){var i=Game.displayStore.getContainer("baddie-barrage/baddie-holder"),n=Game.displayStore.getSpine("baddie-barrage/baddie-spine-"+e);i.alpha=0;var o;o=e%2==0?"right":"left",n.stateData.setMix("idle-1","ha-1",.3),n.stateData.setMix("idle-1","ha-2",.3),n.stateData.setMix("ha-1","idle-1",.3),n.stateData.setMix("ha-2","idle-1",.3),n.stateData.setMix("idle-2","ha-1",.3),n.stateData.setMix("idle-2","ha-2",.3),n.stateData.setMix("ha-1","idle-2",.3),n.stateData.setMix("ha-2","idle-2",.3),n.setAnim("idle-"+Game.getRandom(1,2,!0),!0);var a=Game.displayStore.getContainer("baddie-barrage/baddie-sprite-holder"),s=Game.displayStore.getSprite("baddie-barrage/baddie-a"),r=Game.displayStore.getSprite("baddie-barrage/baddie-b"),h=Game.displayStore.getSprite("baddie-barrage/baddie-c");a.addChild(s),a.addChild(r),a.addChild(h),i.addChild(a),this.baddies.push({active:!1,holder:i,spine:n,spriteHolder:a,side:o,yPos:0}),this.container.addChildAt(i,0)}}return t.prototype.setBaddies=function(t){for(o=0;o<t;o++){var e=this.baddies[o].holder;e.rotation=0,this.baddies[o].holder.removeChild(this.baddies[o].spine),this.baddies[o].active=!0,this.flashTicker=0,this.flashTickerActive=!1,this.baddies[o].holder.addChild(this.baddies[o].spriteHolder),"right"==this.baddies[o].side?(e.position.x=250,e.scale.x=1):(e.position.x=-250,e.scale.x=-1),this.baddies[o].spine.position.x=0,this.baddies[o].spriteHolder.position.x=0,0==this.scene.powerUpIsActive?this.baddies[o].yPos=200-150*o:this.baddies[o].yPos=170-150*o,this.baddies[o].spine.tint=65280,this.baddies[o].spine.alpha=0,this.baddies[o].spriteHolder.alpha=0;var i=Game.getRandom(1,3,!0);this.baddies[o].spriteHolder.showOnlyChild(i-1);for(var n=0;n<this.baddies[o].spriteHolder.children.length;n++)this.baddies[o].spriteHolder.getSpriteAt(n).tint=65280,this.baddies[o].spriteHolder.getSpriteAt(n).blendMode=PIXI.BLEND_MODES.ADD;this.baddies[o].spine.setSkin("type-"+i),this.baddies[o].spine.setAnim("idle-"+Game.getRandom(1,2,!0),!0),e.position.y=Math.pow(this.baddies[o].yPos,3)/1e6}this.zoomTimeline=this.scene.killTween(this.zoomTimeline),this.zoomTimeline=new TimelineMax;for(var o=0;o<this.baddies.length;o++){var a=new RoughEase({strength:3,points:20,randomize:!1,clamp:!0,template:Power0.easeIn});this.zoomTimeline.add(TweenMax.to(this.baddies[o].spine,.5,{alpha:1,ease:a}),1+o/10),this.zoomTimeline.add(TweenMax.to(this.baddies[o].spriteHolder,1,{alpha:1,ease:a}),.3+o/10),this.zoomTimeline.call(function(t){t.spine.tint=16777215;for(var e=0;e<t.spriteHolder.children.length;e++)t.spriteHolder.getSpriteAt(e).tint=16777215,t.spriteHolder.getSpriteAt(e).blendMode=PIXI.BLEND_MODES.NORMAL;0==Game.onAndroid&&0==Game.isLowEndIPad&&(t.holder.addChild(t.spine),t.holder.removeChild(t.spriteHolder))},[this.baddies[o]],this,1.1),o<t?(this.baddies[o].holder.alpha=1,this.zoomTimeline.call(Game.playSound,["baddie-barrage/beam-in",1],this,.7+o/10),this.zoomTimeline.call(function(t){t.setAnim("ha-"+Game.getRandom(1,2,!0),!1),0==Game.onAndroid&&0==Game.isLowEndIPad&&Game.playSound("baddie-barrage/baddie-attack-"+Game.getRandom(1,6,!0))},[this.baddies[o].spine],this,1.2+o/3),this.zoomTimeline.call(function(t){t.setAnim("idle-"+Game.getRandom(1,2,!0),!0)},[this.baddies[o].spine],this,2+o/3)):this.baddies[o].holder.alpha=0}this.zoomTimeline.call(this.scene.zoomFloor,null,this.scene,.5)},t.prototype.setCurrentBaddie=function(t){this.currentBaddie=this.baddies[t-1],this.currentBaddie.holder.addChild(this.hitGraphicContainer),this.currentBaddie.holder.addChild(this.currentBaddie.spine),this.currentBaddie.holder.removeChild(this.currentBaddie.spriteHolder),this.currentBaddie.active=!0},t.prototype.baddieAttack=function(t){this.hitTimeline=this.scene.killTween(this.hitTimeline),this.hitTimeline=new TimelineMax,this.currentBaddie.spine.setAnim("punch-"+Game.getRandom(1,2,!0),!1),t||(0==this.scene.powerUpIsActive?this.hitTimeline.add([TweenMax.to(this.currentBaddie.spriteHolder.position,.3,{x:"-=450",ease:Power1.easeIn}),TweenMax.to(this.currentBaddie.spine.position,.3,{x:"-=300",ease:Power1.easeIn})]):this.hitTimeline.add([TweenMax.to(this.currentBaddie.spriteHolder.position,.3,{x:"-=330",ease:Power1.easeIn}),TweenMax.to(this.currentBaddie.spine.position,.3,{x:"-=180",ease:Power1.easeIn})]))},t.prototype.hitCurrentBaddie=function(t,e){2==++this.powerupCounter&&(this.powerupCounter=0,this.scene.earnFocusPoint()),this.currentBaddie.active=!1,this.hitTimeline=this.scene.killTween(this.hitTimeline),this.hitTimeline=new TimelineMax;var i=new RoughEase({strength:2,points:10,randomize:!1,clamp:!0,template:Power1.easeOut});if(this.hitTimeline.call(function(t){t.spine.tint=65280},[this.currentBaddie],this,.5),e)return this.hitTimeline.add(TweenMax.to(this.currentBaddie.spine,.5,{alpha:0,ease:i}),0),void this.hitTimeline.add(TweenMax.to(this.currentBaddie.spine.position,.5,{x:"+=250",ease:Power2.easeOut}),0);this.hitTimeline.add(TweenMax.to(this.currentBaddie.spine,.5,{alpha:0,ease:i}),.3),0==this.scene.powerUpIsActive?0==t?this.currentBaddie.spine.setAnim("take-hit-2",!1):(this.greenFlash.visible=!0,this.pinkFlash.visible=!1,this.greenFlash.alpha=0,this.hitGraphicContainer.visible=!0,this.currentBaddie.spine.setAnim("take-hit-3",!1),this.hitTimeline.add(TweenMax.to(this.greenFlash,.3,{alpha:1,ease:i}),0),this.hitTimeline.add(TweenMax.to(this.greenFlash,.3,{alpha:0,ease:Power3.easeOut}),.3)):(this.currentBaddie.spine.setAnim("take-hit-1",!1),1==t&&(this.pinkFlash.visible=!0,this.greenFlash.visible=!1,this.pinkFlash.alpha=0,this.hitGraphicContainer.visible=!0,this.hitTimeline.add(TweenMax.to(this.pinkFlash,.3,{alpha:1,ease:i}),0),this.hitTimeline.add(TweenMax.to(this.pinkFlash,.3,{alpha:0,ease:Power3.easeOut}),.3)))},t.prototype.removeAllBaddies=function(){this.hitTimeline=this.scene.killTween(this.hitTimeline),this.hitTimeline=new TimelineMax,this.goingGameOver=!0;for(var t=new RoughEase({strength:2,points:15,randomize:!1,clamp:!0}),e=0;e<this.baddies.length;e++)if(e>=this.scene.progress-1){var i=this.baddies[e];i.spriteHolder.alpha=1,i.spine.tint=65280,i.holder.addChild(i.spriteHolder);for(var n=0;n<3;n++)i.spriteHolder.getSpriteAt(n).tint=65280,i.spriteHolder.getSpriteAt(n).blendMode=PIXI.BLEND_MODES.ADD;this.hitTimeline.add(TweenMax.to(i.spine,.5,{alpha:0,ease:t}),e/6),this.hitTimeline.add(TweenMax.to(i.spriteHolder,.5,{alpha:0,ease:t}),e/6)}},t.prototype.flashBaddie=function(){this.flashTimeline=this.scene.killTween(this.flashTimeline),this.flashTimeline=new TimelineMax;new RoughEase({strength:2,points:15,randomize:!1,clamp:!0});for(var t=0;t<this.baddies.length;t++)if(1==this.baddies[t].active){for(var e=0;e<3;e++)this.baddies[t].spriteHolder.getSpriteAt(e).blendMode=PIXI.BLEND_MODES.ADD;this.flashTimeline.call(function(t){t.spriteHolder.alpha=1,t.holder.alpha=1,t.spine.tint=65280,t.holder.alpha=.8},[this.baddies[t]],this,0),this.flashTimeline.call(function(t){t.spine.alpha=.6},[this.baddies[t]],this,.05),this.flashTimeline.call(function(t){t.spine.alpha=.9},[this.baddies[t]],this,.1),this.flashTimeline.call(function(t){t.spine.alpha=.7},[this.baddies[t]],this,.15),this.flashTimeline.call(function(t){t.spine.tint=16777215;for(var e=0;e<t.spriteHolder.children.length;e++)t.spriteHolder.getSpriteAt(e).tint=16777215,t.spriteHolder.getSpriteAt(e).blendMode=PIXI.BLEND_MODES.NORMAL;t.spriteHolder.alpha=1,t.spine.alpha=1,t.holder.alpha=1,0==Game.onAndroid&&0==Game.isLowEndIPad&&(t.holder.addChild(t.spine),t.holder.removeChild(t.spriteHolder)),this.flashTicker=0,this.flashTickerActive=!1},[this.baddies[t]],this,.2)}},t.prototype.tick=function(t){++this.flashTicker>=120&&0==this.flashTickerActive&&0==this.goingGameOver&&(this.flashTickerActive=!0,this.flashBaddie());for(var e=0;e<this.baddies.length;e++){var i=this.baddies[e];i.yPos+=t,i.holder.position.y=Math.pow(i.yPos,3)/75e4,"right"==i.side?i.holder.position.x=60+Math.pow(i.yPos,3)/11e5:i.holder.position.x=-60-Math.pow(i.yPos,3)/11e5,i.holder.scale.y=Math.pow(i.yPos+250,3)/9e8,"right"==i.side?(i.holder.scale.x=Math.pow(i.yPos+250,3)/9e8,i.holder.scale.x<0&&(i.holder.scale.x=0)):(i.holder.scale.x=-Math.pow(i.yPos+250,3)/9e8,i.holder.scale.x>0&&(i.holder.scale.x=0)),i.holder.scale.y<0&&(i.holder.scale.y=0)}},t.prototype.pause=function(){for(var t=0;t<this.baddies.length;t++)this.baddies[t].spine.pause();this.scene.pauseResumeTween(this.zoomTimeline,"pause"),this.scene.pauseResumeTween(this.hitTimeline,"pause"),this.scene.pauseResumeTween(this.flashTimeline,"pause")},t.prototype.resume=function(){for(var t=0;t<this.baddies.length;t++)this.baddies[t].spine.resume();this.scene.pauseResumeTween(this.zoomTimeline,"resume"),this.scene.pauseResumeTween(this.hitTimeline,"resume"),this.scene.pauseResumeTween(this.flashTimeline,"resume")},t.prototype.destroy=function(){this.container.parent&&this.container.parent.removeChild(this.container),this.zoomTimeline=this.scene.killTween(this.zoomTimeline),this.flashTimeline=this.scene.killTween(this.flashTimeline);for(var t=0;t<this.baddies.length;t++){Game.displayStore.returnPooledItem(this.baddies[t].holder),Game.displayStore.returnPooledItem(this.baddies[t].holder.getSpriteAt(0));for(var e=0;e<this.baddies[t].spriteHolder.children.length;e++)Game.displayStore.returnPooledItem(this.baddies[t].spriteHolder.children[e]);Game.displayStore.returnPooledItem(this.baddies[t].spriteHolder)}},t}(),MindTheGapInputManager=function(){function t(t,e){this.scene=t,this.anchorTouchSize=50,this.startInputPos=new PIXI.Point(0,0),this.moveInputPos=new PIXI.Point(0,0),this.swipeMode=!1,this.swipeBeginDistance=50,this.activatedNode=!1,this.hitAreaSprite=Game.displayStore.getSprite("mind-the-gap/blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite),this.mouseDown=!1}return t.prototype.setUpHitArea=function(t){t.interactive=!0,t.buttonMode=!0;var e=this;Game.onDesktop?(t.on("mousedown",function(t){e.inputDown(e,t.data.getLocalPosition(e.scene.container))}),t.on("mousemove",function(t){e.inputMove(e,t.data.getLocalPosition(e.scene.container))}),t.on("mouseup",function(t){e.inputUp(e,t.data.getLocalPosition(e.scene.container))}),t.on("mouseupoutside",function(t){e.inputUp(e,t.data.getLocalPosition(e.scene.container))})):(t.on("touchstart",function(t){e.inputDown(e,t.data.getLocalPosition(e.scene.container))}),t.on("touchmove",function(t){e.inputMove(e,t.data.getLocalPosition(e.scene.container))}),t.on("touchend",function(t){e.inputUp(e,t.data.getLocalPosition(e.scene.container))}),t.on("touchendoutside",function(t){e.inputUp(e,t.data.getLocalPosition(e.scene.container))}))},t.prototype.inputDown=function(t,e){t.mouseDown=!0,t.keyBoardModeOn=!1,t.mouseModeOn=!0,t.activatedNode=t.scene.checkInputDownOnNode(e,t.anchorTouchSize),t.scene.checkTapInput(e,t.anchorTouchSize),t.swipeMode=!1,t.startInputPos.x=e.x,t.startInputPos.y=e.y,t.moveInputPos.x=e.x,t.moveInputPos.y=e.y,t.currentSwipeDistance=0},t.prototype.inputUp=function(t,e){t.activatedNode=!1,t.scene.endInputSwipeMode()},t.prototype.inputMove=function(t,e){0!=t.mouseDown&&(t.moveInputPos.x=e.x,t.moveInputPos.y=e.y)},t.prototype.getDistance=function(t,e,i,n){var o=t-i,a=e-n;return Math.sqrt(o*o+a*a)},t.prototype.getAngle=function(t,e,i,n){if(t!=i||e!=n){var o=t-i,a=n-e;return Math.atan2(a,o)}},t.prototype.upKeyDown=function(){},t.prototype.downKeyDown=function(){},t.prototype.upKeyUp=function(){},t.prototype.downKeyUp=function(){},t.prototype.tick=function(){0!=this.activatedNode&&(1==this.mouseDown&&0==this.swipeMode&&(this.currentSwipeDistance=this.getDistance(this.startInputPos.x,this.startInputPos.y,this.moveInputPos.x,this.moveInputPos.y),this.currentSwipeDistance>=this.swipeBeginDistance&&(this.swipeMode=!0,this.scene.showSwipeIndicator())),1==this.swipeMode&&this.scene.positionSwipeIndicator(this.moveInputPos))},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},t}(),MindTheGapChickenManager=function(){function t(t,e,i,n){this.scene=t,this.mainHolder=e,this.cluckTicker=0,this.cluckTickerLimit=60,this.chickenInputSize=60,this.chickenRadius=50,this.focusModeActive=!1,this.targetSpeedEaseAmount=10,this.targetSpeedMultiplier=1,this.currentSpeedMultiplier=this.targetSpeedMultiplier,this.chickenRotateEaseAmount=8,this.chickenSpeedEaseAmount=10,this.bridgeAdjustVerticalVectorAmount=.4,this.keyXPositions=n,this.chickenYOffset=i,this.currentlySpawnedChickens=0,this.chickenSpeed=2,this.timescale=1,this.walkFrameSpeed=.15,this.chickens=new Array;for(var o=0;o<10;o++){var a=Game.displayStore.getContainer("mind-the-gap/chicken-holder");a.position.y=-1e3,this.mainHolder.addChild(a),this.chickens.push({holder:a,direction:"right",motionVector:[0,0],currentState:"spawning",active:!1,nextKeyPosition:0,nextKeyPositionMainIndex:0,platform:0,onBridge:!1,currentColour:null,changingDirection:!1,changingDirectionFrameCount:0,changingDirectionFrameLimit:20,tempArrow:Game.displayStore.getSprite("mind-the-gap/chicken-temp-arrow"),detectFalling:!1,targetRotation:0,inGap:!1,fallingOffGapPlatform:0,setFallingGapPlatform:!1,currentMotionAngle:0,chickenTimeline:new TimelineMax,timescale:1,shadow:Game.displayStore.getSprite("mind-the-gap/chicken-shadow"),stepTick:0,fallingGreenFrames:Game.displayStore.getAnimatedSprite("mind-the-gap/chicken-falling-green"),walkingGreenFrames:Game.displayStore.getAnimatedSprite("mind-the-gap/chicken-walking-green"),fallingPurpleFrames:Game.displayStore.getAnimatedSprite("mind-the-gap/chicken-falling-purple"),walkingPurpleFrames:Game.displayStore.getAnimatedSprite("mind-the-gap/chicken-walking-purple"),triggeredAlarm:!1,fallingOrangeFrames:Game.displayStore.getAnimatedSprite("mind-the-gap/chicken-falling-orange"),walkingOrangeFrames:Game.displayStore.getAnimatedSprite("mind-the-gap/chicken-walking-orange"),electricFrames:Game.displayStore.getAnimatedSprite("mind-the-gap/electric-frames"),turningOrangeFrames:Game.displayStore.getAnimatedSprite("mind-the-gap/chicken-turning-orange"),turningGreenFrames:Game.displayStore.getAnimatedSprite("mind-the-gap/chicken-turning-green"),turningPurpleFrames:Game.displayStore.getAnimatedSprite("mind-the-gap/chicken-turning-purple")})}}return t.prototype.spawnNewChicken=function(t,e,i,n){for(var o=0;o<this.chickens.length;o++)if(1!=this.chickens[o].active){switch(this.currentlySpawnedChickens++,this.chickens[o].electricFrames.loop=!1,this.chickens[o].electricFrames.animationSpeed=.2,this.chickens[o].electricFrames.position.y=-75,this.chickens[o].electricFrames.blendMode=PIXI.BLEND_MODES.ADD,this.chickens[o].electricFrames.scale.x=this.chickens[o].electricFrames.scale.y=.6,this.chickens[o].holder.children.length>0&&this.chickens[o].holder.removeAllChildren(),this.chickens[o].holder.addChild(this.chickens[o].shadow),this.chickens[o].shadow.position.y=40,this.chickens[o].shadow.alpha=.6,i){case"orange":this.chickens[o].holder.addChild(this.chickens[o].fallingOrangeFrames),this.chickens[o].holder.addChild(this.chickens[o].walkingOrangeFrames),this.chickens[o].holder.addChild(this.chickens[o].turningOrangeFrames),this.chickens[o].fallingOrangeFrames.visible=!1,this.chickens[o].walkingOrangeFrames.visible=!0,this.chickens[o].turningOrangeFrames.visible=!0,this.chickens[o].walkingOrangeFrames.position.y=-20,this.chickens[o].fallingOrangeFrames.position.y=-20,this.chickens[o].turningOrangeFrames.position.y=-20;break;case"pink":this.chickens[o].holder.addChild(this.chickens[o].fallingPurpleFrames),this.chickens[o].holder.addChild(this.chickens[o].walkingPurpleFrames),this.chickens[o].holder.addChild(this.chickens[o].turningPurpleFrames),this.chickens[o].fallingPurpleFrames.visible=!1,this.chickens[o].walkingPurpleFrames.visible=!0,this.chickens[o].turningPurpleFrames.visible=!0,this.chickens[o].walkingPurpleFrames.position.y=-20,this.chickens[o].fallingPurpleFrames.position.y=-20,this.chickens[o].turningPurpleFrames.position.y=-20;break;case"green":this.chickens[o].holder.addChild(this.chickens[o].fallingGreenFrames),this.chickens[o].holder.addChild(this.chickens[o].walkingGreenFrames),this.chickens[o].holder.addChild(this.chickens[o].turningGreenFrames),this.chickens[o].fallingGreenFrames.visible=!1,this.chickens[o].walkingGreenFrames.visible=!0,this.chickens[o].turningGreenFrames.visible=!0,this.chickens[o].walkingGreenFrames.position.y=-20,this.chickens[o].fallingGreenFrames.position.y=-20,this.chickens[o].turningGreenFrames.position.y=-20}this.chickens[o].currentColour=i,this.chickens[o].active=!0,this.chickens[o].holder.position.x=t.x,this.chickens[o].holder.position.y=t.y,this.chickens[o].currentState="moving",this.chickens[o].platform=e,this.chickens[o].targetRotation=0,this.chickens[o].holder.addChild(this.chickens[o].electricFrames);var a;return"left"==n?(this.chickens[o].nextKeyPositionMainIndex=1,a=0,this.chickens[o].direction="right"):"right"==n&&(this.chickens[o].nextKeyPositionMainIndex=2,a=Math.PI,this.chickens[o].direction="left"),this.chickenWalk(o,i,this.chickens[o].direction),this.chickens[o].shadow.alpha=.6,this.chickens[o].holder.rotation=this.chickens[o].targetRotation,this.chickens[o].motionVector[0]=this.chickenSpeed*Math.cos(a),this.chickens[o].motionVector[1]=this.chickenSpeed*Math.sin(a),this.chickens[o].currentMotionAngle=a,this.chickens[o].nextKeyPosition=this.keyXPositions[this.chickens[o].nextKeyPositionMainIndex],this.chickens[o].currentMotionAngle=a,void this.scene.getChickenUI(o,this.chickens[o].currentColour)}},t.prototype.chickenWalk=function(t,e,i){switch(e){case"orange":this.chickens[t].walkingOrangeFrames.visible=!0,this.chickens[t].fallingOrangeFrames.visible=!1,this.chickens[t].turningOrangeFrames.visible=!1,this.chickens[t].walkingOrangeFrames.play(),this.chickens[t].walkingOrangeFrames.loop=!0,this.chickens[t].walkingOrangeFrames.animationSpeed=this.walkFrameSpeed;break;case"pink":this.chickens[t].walkingPurpleFrames.visible=!0,this.chickens[t].fallingPurpleFrames.visible=!1,this.chickens[t].turningPurpleFrames.visible=!1,this.chickens[t].walkingPurpleFrames.play(),this.chickens[t].walkingPurpleFrames.loop=!0,this.chickens[t].walkingPurpleFrames.animationSpeed=this.walkFrameSpeed;break;case"green":this.chickens[t].walkingGreenFrames.visible=!0,this.chickens[t].fallingGreenFrames.visible=!1,this.chickens[t].turningGreenFrames.visible=!1,this.chickens[t].walkingGreenFrames.play(),this.chickens[t].walkingGreenFrames.loop=!0,this.chickens[t].walkingGreenFrames.animationSpeed=this.walkFrameSpeed}"left"==i?(this.chickens[t].holder.scale.x=-.8,this.chickens[t].holder.scale.y=.8):(this.chickens[t].holder.scale.x=.8,this.chickens[t].holder.scale.y=.8)},t.prototype.chickenFall=function(t,e,i){switch(this.chickens[t].currentColour){case"orange":this.chickens[t].fallingOrangeFrames.visible=!0,this.chickens[t].walkingOrangeFrames.visible=!1,this.chickens[t].turningOrangeFrames.visible=!1,this.chickens[t].fallingOrangeFrames.play(),this.chickens[t].fallingOrangeFrames.loop=!0,this.chickens[t].fallingOrangeFrames.animationSpeed=this.walkFrameSpeed;break;case"pink":this.chickens[t].fallingPurpleFrames.visible=!0,this.chickens[t].walkingPurpleFrames.visible=!1,this.chickens[t].turningPurpleFrames.visible=!1,this.chickens[t].fallingPurpleFrames.play(),this.chickens[t].fallingPurpleFrames.loop=!0,this.chickens[t].fallingPurpleFrames.animationSpeed=this.walkFrameSpeed;break;case"green":this.chickens[t].fallingGreenFrames.visible=!0,this.chickens[t].walkingGreenFrames.visible=!1,this.chickens[t].turningGreenFrames.visible=!1,this.chickens[t].fallingGreenFrames.play(),this.chickens[t].fallingGreenFrames.loop=!0,this.chickens[t].fallingGreenFrames.animationSpeed=this.walkFrameSpeed}"left"==i?(this.chickens[t].holder.scale.x=-.8,this.chickens[t].holder.scale.y=.8):(this.chickens[t].holder.scale.x=.8,this.chickens[t].holder.scale.y=.8)},t.prototype.allActiveChickens=function(){console.log(this.chickens)},t.prototype.chickenTurn=function(t,e,i){switch(this.chickens[t].chickenTimeline=this.scene.killTween(this.chickens[t].chickenTimeline),this.chickens[t].chickenTimeline=new TimelineMax,this.chickens[t].currentColour){case"orange":this.chickens[t].fallingOrangeFrames.visible=!1,this.chickens[t].walkingOrangeFrames.visible=!1,this.chickens[t].turningOrangeFrames.visible=!0,this.chickens[t].turningOrangeFrames.gotoAndPlay(0),this.chickens[t].turningOrangeFrames.loop=!1,this.chickens[t].turningOrangeFrames.animationSpeed=.15;break;case"pink":this.chickens[t].fallingPurpleFrames.visible=!1,this.chickens[t].walkingPurpleFrames.visible=!1,this.chickens[t].turningPurpleFrames.visible=!0,this.chickens[t].turningPurpleFrames.gotoAndPlay(0),this.chickens[t].turningPurpleFrames.loop=!1,this.chickens[t].turningPurpleFrames.animationSpeed=.15;break;case"green":this.chickens[t].fallingGreenFrames.visible=!1,this.chickens[t].walkingGreenFrames.visible=!1,this.chickens[t].turningGreenFrames.visible=!0,this.chickens[t].turningGreenFrames.gotoAndPlay(0),this.chickens[t].turningGreenFrames.loop=!1,this.chickens[t].turningGreenFrames.animationSpeed=.15}this.chickens[t].chickenTimeline.call(this.chickenWalk,[t,this.chickens[t].currentColour,this.chickens[t].direction],this,.5),"left"==i?(this.chickens[t].holder.scale.x=-.8,this.chickens[t].holder.scale.y=.8):(this.chickens[t].holder.scale.x=.8,this.chickens[t].holder.scale.y=.8)},t.prototype.slowTime=function(){0==this.focusModeActive?(this.targetSpeedMultiplier=.4,this.timescale=.5):1==this.focusModeActive&&(this.targetSpeedMultiplier=.05,this.timescale=.5)},t.prototype.restartTime=function(){this.targetSpeedMultiplier=1,this.timescale=1},t.prototype.checkTapInput=function(t){for(var e=0;e<this.chickens.length;e++)if(0!=this.chickens[e].active&&t.x>this.chickens[e].holder.position.x-this.chickenInputSize/2&&t.x<this.chickens[e].holder.position.x+this.chickenInputSize/2&&t.y>this.chickens[e].holder.position.y-this.chickenInputSize/2&&t.y<this.chickens[e].holder.position.y+this.chickenInputSize/2)return this.scene.chickenClicked(e),this.reverseChickenMotion(e),this.scene.henryElectric.gotoAndPlay(0),this.scene.henryElectric.animationSpeed=.2,this.chickens[e].electricFrames.gotoAndPlay(0),1==Game.getRandom(0,1,!0)&&Game.playSound("mind-the-gap/chicken-supprise"),void(0==Game.getRandom(0,1,!0)?Game.playSound("mind-the-gap/buzz-1"):Game.playSound("mind-the-gap/buzz-2"))},t.prototype.reverseChickenMotion=function(t){if("falling"!=this.chickens[t].currentState){for(var e,i,n=0;n<this.keyXPositions.length;n++)if(this.chickens[t].nextKeyPosition==this.keyXPositions[n]){e=n;break}this.chickens[t].changingDirection=!0,this.chickens[t].changingDirectionFrameCount=0,"left"==this.chickens[t].direction?(this.chickens[t].direction="right",this.chickenTurn(t,this.chickens[t].currentColour,"left"),i=e+1):"right"==this.chickens[t].direction&&(this.chickens[t].direction="left",this.chickenTurn(t,this.chickens[t].currentColour,"right"),i=e-1),this.chickens[t].motionVector[0]*=-1,this.chickens[t].motionVector[1]*=-1,this.chickens[t].nextKeyPosition=this.keyXPositions[i]}},t.prototype.checkChickenHitWallOrPortal=function(t,e){var i=!1,n=this.chickens[t].platform,o=this.scene.getPlatformColour(this.chickens[t].platform);1==this.focusModeActive?"left"==e&&0==n&&(i=!0):0==this.focusModeActive&&("left"==e?0!=n&&2!=n||this.chickens[t].currentColour==o&&(i=!0):"right"==e&&1==n&&this.chickens[t].currentColour==o&&(i=!0)),1==i?(this.currentlySpawnedChickens--,this.chickens[t].active=!1,this.chickens[t].holder.position.y=-1e3,this.scene.removeChickenUI(t),this.scene.incrementScore(),this.scene.portalScore(this.chickens[t].currentColour)):this.reverseChickenMotion(t)},t.prototype.getCurrentlySpawnedChickens=function(){return this.currentlySpawnedChickens},t.prototype.shouldChickenTurnEarly=function(t,e){var i=this.chickens[t].platform,n=this.scene.getPlatformColour(this.chickens[t].platform);1!=this.focusModeActive&&("left"==e&&0==i&&n!=this.chickens[t].currentColour?this.reverseChickenMotion(t):"left"==e&&2==i&&n!=this.chickens[t].currentColour?this.reverseChickenMotion(t):"right"==e&&1==i&&n!=this.chickens[t].currentColour&&this.reverseChickenMotion(t))},t.prototype.tick=function(){if(this.currentlySpawnedChickens>0&&++this.cluckTicker>=this.cluckTickerLimit){var t=["mind-the-gap/chicken-cluck-1","mind-the-gap/chicken-cluck-2","mind-the-gap/chicken-cluck-3","mind-the-gap/chicken-cluck-4","mind-the-gap/chicken-cluck-5"],e=Game.getRandom(0,t.length-1,!0);this.cluckTicker=0,this.cluckTickerLimit=Game.getRandom(90,180)/this.currentlySpawnedChickens,Game.playSound(t[e],.5)}this.currentSpeedMultiplier=this.scene.simpleEase(this.currentSpeedMultiplier,this.targetSpeedMultiplier,this.targetSpeedEaseAmount);for(var i=0;i<this.chickens.length;i++)if(0!=this.chickens[i].active){if(this.chickens[i].holder.position.x>900&&"right"==this.chickens[i].direction&&this.shouldChickenTurnEarly(i,"right"),this.chickens[i].holder.position.x<100&&"left"==this.chickens[i].direction&&this.shouldChickenTurnEarly(i,"left"),"falling"!=this.chickens[i].currentState&&this.chickens[i].stepTick++,this.chickens[i].stepTick>20){this.chickens[i].stepTick=0;var n=["mind-the-gap/step-1","mind-the-gap/step-2","mind-the-gap/step-3"],o=Game.getRandom(0,n.length-1,!0);Game.playSound(n[o],.4)}if("falling"!=this.chickens[i].currentState)if(1!=this.chickens[i].changingDirection){this.chickens[i].holder.rotation=this.scene.simpleEase(this.chickens[i].holder.rotation,this.chickens[i].targetRotation,this.chickenRotateEaseAmount);var a=0;1==this.chickens[i].onBridge?1==this.scene.pointBelowLine([this.chickens[i].holder.position.x,this.chickens[i].holder.position.y+this.chickenYOffset])&&(a=this.bridgeAdjustVerticalVectorAmount):a=(this.chickens[i].holder.position.y+this.chickenYOffset-this.scene.getPlatformYPos(this.chickens[i].platform))/10,this.chickens[i].holder.position.x+=this.chickens[i].motionVector[0]*this.currentSpeedMultiplier,this.chickens[i].holder.position.y+=(this.chickens[i].motionVector[1]-a)*this.currentSpeedMultiplier,this.checkKeyPosHit(i)}else++this.chickens[i].changingDirectionFrameCount>=this.chickens[i].changingDirectionFrameLimit&&(this.chickens[i].changingDirection=!1,this.chickenWalk(i,this.chickens[i].currentColour,this.chickens[i].direction));else this.chickenFalling(i)}},t.prototype.checkKeyPosHit=function(t){this.manageGapState(t),"right"==this.chickens[t].direction&&this.chickens[t].holder.position.x>=this.chickens[t].nextKeyPosition&&this.chickenHitKeyPosition(t),"left"==this.chickens[t].direction&&this.chickens[t].holder.position.x<=this.chickens[t].nextKeyPosition&&this.chickenHitKeyPosition(t)},t.prototype.checkInGapPos=function(t){this.manageGapState(t),"right"==this.chickens[t].direction&&this.chickens[t].holder.position.x>=this.chickens[t].nextKeyPosition&&this.chickens[t].nextKeyPosition==this.keyXPositions[2]?this.chickens[t].nextKeyPosition=this.keyXPositions[3]:"left"==this.chickens[t].direction&&this.chickens[t].holder.position.x<=this.chickens[t].nextKeyPosition&&this.chickens[t].nextKeyPosition==this.keyXPositions[1]&&(this.chickens[t].nextKeyPosition=this.keyXPositions[0])},t.prototype.manageGapState=function(t){this.chickens[t].holder.position.x>this.keyXPositions[1]&&this.chickens[t].holder.position.x<this.keyXPositions[2]?this.chickens[t].inGap=!0:this.chickens[t].inGap=!1},t.prototype.chickenFalling=function(t){if(this.chickens[t].motionVector[0]=this.scene.simpleEase(this.chickens[t].motionVector[0],0,300),this.chickens[t].motionVector[1]+=.2,this.chickens[t].holder.position.x+=this.chickens[t].motionVector[0]*this.currentSpeedMultiplier,this.chickens[t].holder.position.y+=this.chickens[t].motionVector[1]*this.currentSpeedMultiplier,this.checkInGapPos(t),this.chickens[t].holder.position.y>this.scene.getLowestPlatformPos())return this.chickens[t].holder.position.y>600&&0==this.chickens[t].triggeredAlarm&&(this.chickens[t].triggeredAlarm=!0,this.scene.endGame()),void(this.chickens[t].holder.position.y>900&&(this.chickens[t].triggeredAlarm=!1,this.chickens[t].active=!1,this.currentlySpawnedChickens--,this.scene.removeChickenUI(t)));if(1!=this.scene.pointBelowLine([this.chickens[t].holder.position.x,this.chickens[t].holder.position.y+this.chickenYOffset])||1!=this.chickens[t].detectFalling||1!=this.chickens[t].inGap){if(1==this.chickens[t].detectFalling&&0==this.chickens[t].inGap){var e=!0;this.chickens[t].holder.position.x<this.keyXPositions[0]&&(e=!1),this.chickens[t].holder.position.x>this.keyXPositions[3]&&(e=!1),0==this.chickens[t].setFallingGapPlatform&&(this.chickens[t].setFallingGapPlatform=!0,this.chickens[t].fallingOffGapPlatform=this.scene.getPlatformBelowPos(this.chickens[t].holder.y));var i=this.scene.getPlatformYPos(this.chickens[t].fallingOffGapPlatform);if(1==e)return void(this.chickens[t].holder.position.y+this.chickenYOffset>=i&&this.calculateLandedOnPlatformMotionParams(t))}}else this.calculateLandedOnBridgeMotionParams(t)},t.prototype.calculateFallingDetection=function(){for(var t=0;t<this.chickens.length;t++)"falling"==this.chickens[t].currentState&&(1==this.scene.pointBelowLine([this.chickens[t].holder.position.x,this.chickens[t].holder.position.y+this.chickenYOffset])?this.chickens[t].detectFalling=!1:this.chickens[t].detectFalling=!0)},t.prototype.cancelBridge=function(){for(var t=0;t<this.chickens.length;t++)1!=this.chickens[t].onBridge||(this.chickens[t].currentState="falling",Game.playSound("mind-the-gap/bird-flap",.7),this.chickens[t].onBridge=!1,this.chickens[t].detectFalling=!0,this.chickenFall(t,this.chickens[t].currentColour,this.chickens[t].direction),this.scene.setHenryWorried(),this.checkChickensOnBridge())},t.prototype.checkChickensOnBridge=function(){for(var t=!1,e=0;e<this.chickens.length;e++)if(1==this.chickens[e].onBridge){t=!0,this.chickenWalk(e,this.chickens[e].currentColour,this.chickens[e].direction);break}this.scene.setChickenOnBridge(t)},t.prototype.chickenHitKeyPosition=function(t){this.scene.getBridgeActive();var e=this.chickens[t].direction,i=this.scene.getClosestPlatform(this.chickens[t].holder.y);if(this.chickens[t].platform=i,"left"!=e||this.chickens[t].nextKeyPosition!=this.keyXPositions[0])if("right"!=e||this.chickens[t].nextKeyPosition!=this.keyXPositions[3])if("right"!=e||this.chickens[t].nextKeyPosition!=this.keyXPositions[1])if("left"!=e||this.chickens[t].nextKeyPosition!=this.keyXPositions[2])if("right"!=e||this.chickens[t].nextKeyPosition!=this.keyXPositions[2])if("left"!=e||this.chickens[t].nextKeyPosition!=this.keyXPositions[1]);else switch(i){case 0:this.setNewPlatformMotionParams(t,1,Math.PI,this.keyXPositions[0]);break;case 1:this.setNewPlatformMotionParams(t,3,Math.PI,this.keyXPositions[0]);break;case 2:this.setNewPlatformMotionParams(t,5,Math.PI,this.keyXPositions[0])}else switch(i){case 0:this.setNewPlatformMotionParams(t,1,0,this.keyXPositions[3]);break;case 1:this.setNewPlatformMotionParams(t,3,0,this.keyXPositions[3]);break;case 2:this.setNewPlatformMotionParams(t,5,0,this.keyXPositions[3])}else switch(i){case 0:this.checkBridgeAnchorConnected(t,1,this.keyXPositions[1]);break;case 1:this.checkBridgeAnchorConnected(t,3,this.keyXPositions[1]);break;case 2:this.checkBridgeAnchorConnected(t,5,this.keyXPositions[1])}else switch(i){case 0:this.checkBridgeAnchorConnected(t,0,this.keyXPositions[2]);break;case 1:this.checkBridgeAnchorConnected(t,2,this.keyXPositions[2]);break;case 2:this.checkBridgeAnchorConnected(t,4,this.keyXPositions[2])}else this.checkChickenHitWallOrPortal(t,e);else this.checkChickenHitWallOrPortal(t,e)},t.prototype.activateFocusMode=function(){this.focusModeActive=!0,this.chickenSpeed=3},t.prototype.deactivateFocusMode=function(){this.focusModeActive=!1,this.chickenSpeed=2},t.prototype.resetChickenMotionParams=function(){for(var t=0;t<this.chickens.length;t++)this.chickens[t].motionVector[0]=this.chickenSpeed*Math.cos(this.chickens[t].currentMotionAngle),this.chickens[t].motionVector[1]=this.chickenSpeed*Math.sin(this.chickens[t].currentMotionAngle)},t.prototype.checkBridgeAnchorConnected=function(t,e,i){if(1==this.scene.checkBridgeAnchorConnected(e))this.recalculateChickenMotionParamsBridge(t,e);else{var n=this.scene.pointBelowLine([this.chickens[t].holder.position.x,this.chickens[t].holder.position.y+this.chickenYOffset]);this.chickens[t].detectFalling=1!=n,this.chickens[t].currentState="falling",this.chickens[t].nextKeyPosition=i,Game.playSound("mind-the-gap/bird-flap",.7),this.chickenFall(t,this.chickens[t].currentColour,this.chickens[t].direction),this.scene.setHenryWorried()}},t.prototype.recalculateChickenMotionParamsBridge=function(t,e){var i=this.scene.getBridgeAngle(this.chickens[t].direction);"left"==this.chickens[t].direction?(this.chickens[t].nextKeyPosition=this.keyXPositions[1],this.chickens[t].targetRotation=i-Math.PI):"right"==this.chickens[t].direction&&(this.chickens[t].nextKeyPosition=this.keyXPositions[2],this.chickens[t].targetRotation=i),this.chickens[t].motionVector[0]=this.chickenSpeed*Math.cos(i),this.chickens[t].motionVector[1]=this.chickenSpeed*Math.sin(i),this.chickens[t].currentMotionAngle=i,this.chickens[t].onBridge=!0,this.chickens[t].setFallingGapPlatform=!1,this.checkChickensOnBridge()},t.prototype.setNewPlatformMotionParams=function(t,e,i,n){var o=i;this.chickens[t].motionVector[0]=this.chickenSpeed*Math.cos(o),this.chickens[t].motionVector[1]=this.chickenSpeed*Math.sin(o),"left"==this.chickens[t].direction?this.chickens[t].targetRotation=i-Math.PI:this.chickens[t].targetRotation=i,this.chickens[t].nextKeyPosition=n,this.chickens[t].currentMotionAngle=o,this.chickens[t].onBridge=!1,this.checkChickensOnBridge()},t.prototype.calculateLandedOnBridgeMotionParams=function(t){var e=this.scene.getBridgeAngle(this.chickens[t].direction);Game.stopSound("mind-the-gap/chicken-flap"),1==Game.getRandom(0,1,!0)?Game.playSound("mind-the-gap/land-2"):Game.playSound("mind-the-gap/land"),0==Game.isLowEndIPad&&(0==this.focusModeActive?this.scene.landedOnBridge(this.chickens[t].holder.rotation,this.chickens[t].holder.position.x,this.chickens[t].holder.position.y+30,!1):this.scene.landedOnBridge(this.chickens[t].holder.rotation,this.chickens[t].holder.position.x,this.chickens[t].holder.position.y+30,!0)),this.chickenWalk(t,this.chickens[t].currentColour,this.chickens[t].direction),"left"==this.chickens[t].direction?this.chickens[t].targetRotation=e-Math.PI:this.chickens[t].targetRotation=e,this.chickens[t].motionVector[0]=this.chickenSpeed*Math.cos(e),this.chickens[t].motionVector[1]=this.chickenSpeed*Math.sin(e),this.chickens[t].currentMotionAngle=e,this.chickens[t].onBridge=!0,this.chickens[t].setFallingGapPlatform=!1,this.chickens[t].currentState="moving",this.checkChickensOnBridge()},t.prototype.calculateLandedOnPlatformMotionParams=function(t){var e;e="left"==this.chickens[t].direction?0-Math.PI:0;var i=this.scene.getClosestPlatform(this.chickens[t].holder.y);this.chickens[t].platform=i,this.chickens[t].targetRotation=0,this.chickens[t].motionVector[0]=this.chickenSpeed*Math.cos(e),this.chickens[t].motionVector[1]=this.chickenSpeed*Math.sin(e),this.chickens[t].currentMotionAngle=e,this.chickens[t].onBridge=!1,this.chickens[t].currentState="moving",this.chickens[t].setFallingGapPlatform=!1,this.chickenWalk(t,this.chickens[t].currentColour,this.chickens[t].direction),this.checkChickensOnBridge()},t.prototype.pause=function(){for(var t=0;t<this.chickens.length;t++)1==this.chickens[t].active&&(this.chickens[t].chickenTimeline.pause(),this.chickens[t].walkingGreenFrames.stop(),this.chickens[t].fallingGreenFrames.stop(),this.chickens[t].turningGreenFrames.stop(),this.chickens[t].walkingOrangeFrames.stop(),this.chickens[t].fallingOrangeFrames.stop(),this.chickens[t].turningOrangeFrames.stop(),this.chickens[t].walkingPurpleFrames.stop(),this.chickens[t].fallingPurpleFrames.stop(),this.chickens[t].turningPurpleFrames.stop())},t.prototype.resume=function(){for(var t=0;t<this.chickens.length;t++)if(1==this.chickens[t].active){if(this.chickens[t].chickenTimeline.resume(),"moving"==this.chickens[t].currentState)switch(this.chickens[t].currentColour){case"pink":this.chickens[t].walkingPurpleFrames.play();break;case"orange":this.chickens[t].walkingOrangeFrames.play();break;case"green":this.chickens[t].walkingGreenFrames.play()}if("falling"==this.chickens[t].currentState)switch(this.chickens[t].currentColour){case"pink":this.chickens[t].fallingPurpleFrames.play();break;case"orange":this.chickens[t].fallingOrangeFrames.play();break;case"green":this.chickens[t].fallingGreenFrames.play()}}},t.prototype.destroy=function(){Game.stopSound("mind-the-gap/alarm-sound");for(var t=0;t<this.chickens.length;t++)Game.displayStore.returnPooledItem(this.chickens[t].holder),Game.displayStore.returnPooledItem(this.chickens[t].shadow),this.chickens[t].chickenTimeline=this.scene.killTween(this.chickens[t].chickenTimeline),console.log(t),Game.displayStore.returnPooledItem(this.chickens[t].tempArrow),Game.displayStore.returnPooledItem(this.chickens[t].walkingOrangeFrames),Game.displayStore.returnPooledItem(this.chickens[t].walkingGreenFrames),Game.displayStore.returnPooledItem(this.chickens[t].walkingPurpleFrames),Game.displayStore.returnPooledItem(this.chickens[t].fallingOrangeFrames),Game.displayStore.returnPooledItem(this.chickens[t].fallingGreenFrames),Game.displayStore.returnPooledItem(this.chickens[t].fallingPurpleFrames),Game.displayStore.returnPooledItem(this.chickens[t].turningGreenFrames),Game.displayStore.returnPooledItem(this.chickens[t].turningOrangeFrames),Game.displayStore.returnPooledItem(this.chickens[t].turningPurpleFrames),Game.displayStore.returnPooledItem(this.chickens[t].electricFrames)},t}(),PhotonFusionInputManager=function(){function t(t,e){this.scene=t,this.startInputPos=new PIXI.Point(0,0),this.moveInputPos=new PIXI.Point(0,0),this.hitAreaSprite=Game.displayStore.getSprite("photon-fusion/blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite),this.mouseDown=!1}return t.prototype.setUpHitArea=function(t){t.interactive=!0,t.buttonMode=!0;var e=this;Game.onDesktop?(t.on("mousedown",function(t){e.inputDown(e,t.data.getLocalPosition(e.scene.container))}),t.on("mousemove",function(t){e.inputMove(e,t.data.getLocalPosition(e.scene.container))}),t.on("mouseup",function(t){e.inputUp(e,t.data.getLocalPosition(e.scene.container))}),t.on("mouseupoutside",function(t){e.inputUp(e,t.data.getLocalPosition(e.scene.container))})):(t.on("touchstart",function(t){e.inputDown(e,t.data.getLocalPosition(e.scene.container))}),t.on("touchmove",function(t){e.inputMove(e,t.data.getLocalPosition(e.scene.container))}),t.on("touchend",function(t){e.inputUp(e,t.data.getLocalPosition(e.scene.container))}),t.on("touchendoutside",function(t){e.inputUp(e,t.data.getLocalPosition(e.scene.container))}))},t.prototype.inputDown=function(t,e){t.mouseDown=!0,t.keyBoardModeOn=!1,t.mouseModeOn=!0,t.startInputPos.x=e.x,t.startInputPos.y=e.y,t.moveInputPos.x=e.x,t.moveInputPos.y=e.y,t.scene.inputDown(e)},t.prototype.inputUp=function(t,e){t.scene.inputUp(e)},t.prototype.inputMove=function(t,e){0!=t.mouseDown&&(t.moveInputPos.x=e.x,t.moveInputPos.y=e.y,t.scene.inputMove(e))},t.prototype.getDistance=function(t,e,i,n){var o=t-i,a=e-n;return Math.sqrt(o*o+a*a)},t.prototype.getAngle=function(t,e,i,n){if(t!=i||e!=n){var o=t-i,a=n-e;return Math.atan2(a,o)}},t.prototype.upKeyDown=function(){},t.prototype.downKeyDown=function(){},t.prototype.upKeyUp=function(){},t.prototype.downKeyUp=function(){},t.prototype.tick=function(){},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},t}(),PhotonFusionPhysicsManager=function(){function t(t,e){this.physicsEnabled=!0,this.resizeRatio=1,this.scene=t,this.mainContainer=e}return t.prototype.initPhysicsWorld=function(){this.collisionGroups=new Array,this.collisionGroups.push({collisionGroupNumber:Math.pow(2,1),collisionGroupString:"red"}),this.collisionGroups.push({collisionGroupNumber:Math.pow(2,2),collisionGroupString:"blue"}),this.collisionGroups.push({collisionGroupNumber:Math.pow(2,3),collisionGroupString:"yellow"}),this.collisionGroups.push({collisionGroupNumber:Math.pow(2,4),collisionGroupString:"walls"}),this.collisionGroups.push({collisionGroupNumber:Math.pow(2,5),collisionGroupString:"join-particles"}),this.world=new p2.World({gravity:[0,0]}),this.world.broadphase=new p2.NaiveBroadphase(1),this.world.defaultContactMaterial.restitution=.8,this.wallEdgeBufferDistance=40,this.wallPlaneBodyBottom=new p2.Body({mass:0,angle:0,position:[0,this.wallEdgeBufferDistance]}),this.wallPlaneShapeBottom=new p2.Plane,this.wallPlaneShapeBottom.collisionGroup=this.getCollisionNum("walls"),this.wallPlaneShapeBottom.collisionMask=this.getCollisionNum("red")|this.getCollisionNum("blue")|this.getCollisionNum("yellow"),this.wallPlaneBodyBottom.addShape(this.wallPlaneShapeBottom),this.wallPlaneBodyTop=new p2.Body({mass:0,angle:Math.PI,position:[0,Game.stageHeight-this.wallEdgeBufferDistance]}),this.wallPlaneShapeTop=new p2.Plane,this.wallPlaneShapeTop.collisionGroup=this.getCollisionNum("walls"),this.wallPlaneShapeTop.collisionMask=this.getCollisionNum("red")|this.getCollisionNum("blue")|this.getCollisionNum("yellow"),this.wallPlaneBodyTop.addShape(this.wallPlaneShapeTop),this.wallPlaneBodyLeft=new p2.Body({mass:0,angle:.5*-Math.PI,position:[this.wallEdgeBufferDistance,Game.stageHeight]}),this.wallPlaneShapeLeft=new p2.Plane,this.wallPlaneShapeLeft.collisionGroup=this.getCollisionNum("walls"),this.wallPlaneShapeLeft.collisionMask=this.getCollisionNum("red")|this.getCollisionNum("blue")|this.getCollisionNum("yellow"),this.wallPlaneBodyLeft.addShape(this.wallPlaneShapeLeft),this.wallPlaneBodyRight=new p2.Body({mass:0,angle:.5*Math.PI,position:[Game.stageWidth-this.wallEdgeBufferDistance,Game.stageHeight]}),this.wallPlaneShapeRight=new p2.Plane,this.wallPlaneShapeRight.collisionGroup=this.getCollisionNum("walls"),this.wallPlaneShapeRight.collisionMask=this.getCollisionNum("red")|this.getCollisionNum("blue")|this.getCollisionNum("yellow"),this.wallPlaneBodyRight.addShape(this.wallPlaneShapeRight),this.world.addBody(this.wallPlaneBodyBottom),this.world.addBody(this.wallPlaneBodyTop),this.world.addBody(this.wallPlaneBodyLeft),this.world.addBody(this.wallPlaneBodyRight);var t=this;this.world.on("beginContact",function(e){t.checkCollision(t,e)}),this.world.on("endContact",function(t){}),this.world.on("postStep",function(t){}),this.physicsEnabled=!0},t.prototype.getCollisionNum=function(t){for(var e=0;e<this.collisionGroups.length;e++)if(this.collisionGroups[e].collisionGroupString==t)return this.collisionGroups[e].collisionGroupNumber},t.prototype.getPhotonPhysicsElements=function(t,e,i){var n=new p2.Body({mass:.6}),o=new p2.Circle({radius:e});return n.damping=.4,o.collisionGroup=this.getCollisionNum(i),o.collisionMask=this.getCollisionNum("red")|this.getCollisionNum("blue")|this.getCollisionNum("yellow")|this.getCollisionNum("walls"),n.addShape(o),{body:n,shape:o}},t.prototype.getJoinParticle=function(){var t=Game.getRandom(.3,1),e=new p2.Body({mass:Game.getRandom(t/10,t/10)}),i=new p2.Circle({radius:5});return i.collisionGroup=this.getCollisionNum("join-particles"),e.damping=Game.getRandom(.1,.4),i.sensor=!0,e.addShape(i),{body:e,scale:t}},t.prototype.checkCollision=function(t,e){var i=this.getCollisionGroupStringCollision(e.bodyA),n=this.getCollisionGroupStringCollision(e.bodyB);this.scene.photonCollided(e.bodyA,i,e.bodyB,n),e.bodyA!=this.wallPlaneBodyLeft&&e.bodyB!=this.wallPlaneBodyLeft||this.scene.lightUpSide(3),e.bodyA!=this.wallPlaneBodyRight&&e.bodyB!=this.wallPlaneBodyRight||this.scene.lightUpSide(4),e.bodyA!=this.wallPlaneBodyTop&&e.bodyB!=this.wallPlaneBodyTop||this.scene.lightUpSide(2),e.bodyA!=this.wallPlaneBodyBottom&&e.bodyB!=this.wallPlaneBodyBottom||this.scene.lightUpSide(1)},t.prototype.getCollisionGroupStringCollision=function(t){for(var e=0;e<this.collisionGroups.length;e++)if(t.shapes[0].collisionGroup==this.collisionGroups[e].collisionGroupNumber)return this.collisionGroups[e].collisionGroupString},t.prototype.addBodyToWorld=function(t){this.world.addBody(t)},t.prototype.removeBodyFromWorld=function(t){this.world.removeBody(t)},t.prototype.removeConstraintFromWorld=function(t){this.world.removeConstraint(t)},t.prototype.addConstraintToWorld=function(t){this.world.addConstraint(t)},t.prototype.removeSpringFromWorld=function(t){this.world.removeSpring(t)},t.prototype.addSpringToWorld=function(t){this.world.addSpring(t)},t.prototype.resizeElements=function(t,e){this.canvasHeight=e,this.canvasWidth=t,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},t.prototype.stepPhysics=function(){0!=this.physicsEnabled&&this.world&&this.world.step(1/30)},t.prototype.getDistance=function(t,e,i,n){var o=t-i,a=e-n;return Math.sqrt(o*o+a*a)},t.prototype.getAngle=function(t,e,i,n){if(t!=i||e!=n){var o=t-i,a=n-e;return Math.atan2(a,o)}},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.destroy=function(){this.world.clear(),this.world=null},t}(),PhotonFusionPhotonManager=function(){function t(t,e,i){this.scene=t,this.gameOverTick=0,this.gameOverTriggered=!1,this.mainHolderRef=e,this.photonTypeNumber=i,this.photonTotalNumber=0,this.alarmActive=!1,this.decayTimerDotNum=20,this.currentlyActivePhotons=0,this.warningCounter=0,this.focusModeActive=!1,this.currentBlueSmall=0,this.currentRedSmall=0,this.currentYellowSmall=0,this.isScoringPossible=!0,this.warningTickRate=1,this.bluePossible=!0,this.redPossible=!0,this.yellowPossible=!0,this.currentMedium=0,this.currentLarge=0,this.gameSetup=!0,this.warningIsActive=!1,this.pulsePower=100,this.pulseRadiusRange=100,this.radii=new Array,this.radii.push({size:"small",number:25}),this.radii.push({size:"medium",number:38}),this.radii.push({size:"large",number:56})}return t.prototype.currentPhotons=function(t,e,i){if("small"==t)switch(i){case"blue":"add"==e?this.currentBlueSmall++:this.currentBlueSmall--;break;case"red":"add"==e?this.currentRedSmall++:this.currentRedSmall--;break;case"yellow":"add"==e?this.currentYellowSmall++:this.currentYellowSmall--}else if("medium"==t){if("add"!=e)return void this.currentMedium--;this.currentMedium++}else if("large"==t){if("add"!=e)return void this.currentLarge--;this.currentLarge++}if(this.currentMedium>0||this.currentLarge>0){if(this.isScoringPossible=!0,this.scene.deActivateWarning(),this.warningTickRate=1,this.warningIsActive=!1,this.warningCounter=0,1==this.alarmActive){this.alarmActive=!1;for(n=0;n<this.photons.length;n++)for(o=0;o<this.photons[n].decayTimerDots.length;o++)this.photons[n].decayTimerDots[o].sprite.tint=16711680}}else if(this.currentBlueSmall<=1?this.bluePossible=!1:this.bluePossible=!0,this.currentRedSmall<=1?this.redPossible=!1:this.redPossible=!0,this.currentYellowSmall<=1?this.yellowPossible=!1:this.yellowPossible=!0,0==this.yellowPossible&&0==this.bluePossible&&0==this.redPossible)this.isScoringPossible=!1;else if(this.isScoringPossible=!0,this.scene.deActivateWarning(),this.warningTickRate=1,this.warningIsActive=!1,this.warningCounter=0,1==this.alarmActive){this.alarmActive=!1;for(var n=0;n<this.photons.length;n++)for(var o=0;o<this.photons[n].decayTimerDots.length;o++)this.photons[n].decayTimerDots[o].sprite.tint=16711680}0==this.isScoringPossible&&0==this.gameSetup&&0==this.focusModeActive&&0==this.warningIsActive&&(this.warningIsActive=!0)},t.prototype.createPhotons=function(){this.photons=new Array,this.createPhotonsColour("red"),this.createPhotonsColour("blue"),this.createPhotonsColour("yellow"),this.photons=this.scene.shuffleArray(this.photons)},t.prototype.createPhotonsColour=function(t){for(var e=0;e<this.photonTypeNumber;e++)this.createPhoton("small",t),this.createPhoton("medium",t),this.createPhoton("large",t)},t.prototype.activateFocusMode=function(){this.focusModeActive=!0;for(var t=0;t<this.photons.length;t++)this.photons[t].sprite.visible=!1,this.photons[t].powerUpSprite.visible=!0,this.photons[t].powerUpSprite.scale.x=this.photons[t].powerUpSprite.scale.y=1},t.prototype.deactivateFocusMode=function(){this.gameSetup=!0,this.focusModeActive=!1;for(var t=0;t<this.photons.length;t++)this.photons[t].sprite.visible=!0,this.photons[t].powerUpSprite.visible=!1},t.prototype.getPhotonActiveState=function(t){return{photonHolder:this.photons[t].holder,photonActive:this.photons[t].active,pulseRadius:this.pulseRadiusRange}},t.prototype.createPhoton=function(t,e){var i=Game.displayStore.getContainer("photon-fusion/photon-holder"),n="photon-fusion/photon-"+e+"-"+t,o="photon-fusion/photon-pink-"+t,a=Game.displayStore.getSprite(n),s=Game.displayStore.getSprite(o);i.addChild(a),i.addChild(s),s.blendMode=PIXI.BLEND_MODES.ADD,a.blendMode=PIXI.BLEND_MODES.ADD,1==this.focusModeActive?s.visible=!0:s.visible=!1,i.position.y=-1e3;var r=Game.displayStore.getContainer("photon-fusion/photon-decay-timer-holder");r.position.y=-1e3;var h=this.getRadius(t);this.photonTotalNumber++;var l;switch(t){case"small":l=1;break;case"medium":l=2;break;case"large":l=3}for(var p=this.scene.getPhotonPhysicsElements(t,h,e),c=new Array,d=0;d<21;d++)c.push({sprite:Game.displayStore.getSprite("photon-fusion/dot-"+d),active:!1,dots:d});this.photons.push({holder:i,sprite:a,powerUpSprite:s,physicsBody:p.body,physicsShape:p.shape,active:!1,colour:e,size:t,radius:h,spawnTimeline:null,wobbleCountX:Game.getRandom(2*-Math.PI,2*Math.PI),wobbleCountY:Game.getRandom(2*-Math.PI,2*Math.PI),wobbleAmountX:Game.getRandom(.2,.4),wobbleAmountY:Game.getRandom(.2,.4),wobbleIntensityMultiplier:l,decayTimerHolder:r,decayTimerDots:c,largePhotonDecayCount:null,timerDotCount:0,timerDotLimit:25,timerPauseCount:0,timerPauseLimit:30,currentDots:20})},t.prototype.getRadius=function(t){for(var e=0;e<this.radii.length;e++)if(this.radii[e].size==t)return this.radii[e].number},t.prototype.updateDepths=function(){},t.prototype.getTotalPhotonNumber=function(){return this.photonTotalNumber},t.prototype.tapInput=function(t,e){for(var i=0;i<this.photons.length;i++){var n=this.getAngle(t.x,t.y,this.photons[i].holder.position.x,this.photons[i].holder.position.y);if(!(this.getDistance(t.x,t.y,this.photons[i].holder.position.x,this.photons[i].holder.position.y)>this.pulseRadiusRange)){this.photons[i].timerDotCount=0;var o=this.pulseRadiusRange*(this.pulsePower*e);o<0&&(o=0);var a=Math.cos(n)*(o/this.photons[i].physicsBody.mass),s=Math.sin(n)*(o/this.photons[i].physicsBody.mass),r=[-a,-s];(a||s)&&this.photons[i].physicsBody.applyForce(r)}}},t.prototype.spawnStartPhotons=function(){this.startingPositions=new Array,this.startingPositions.push([Game.stageWidth/2-200,Game.stageHeight-100]),this.startingPositions.push([Game.stageWidth/2-100,Game.stageHeight-100]),this.startingPositions.push([Game.stageWidth/2,Game.stageHeight-100]),this.startingPositions.push([Game.stageWidth/2+100,Game.stageHeight-100]),this.startingPositions.push([Game.stageWidth/2+200,Game.stageHeight-100]),this.startingPositions.push([Game.stageWidth/2-200,Game.stageHeight/2]),this.startingPositions.push([Game.stageWidth/2-100,Game.stageHeight/2]),this.startingPositions.push([Game.stageWidth/2,Game.stageHeight/2]),this.startingPositions.push([Game.stageWidth/2+100,Game.stageHeight/2]),this.startingPositions.push([Game.stageWidth/2+200,Game.stageHeight/2]),this.startingPositions.push([Game.stageWidth/2-200,100]),this.startingPositions.push([Game.stageWidth/2-100,100]),this.startingPositions.push([Game.stageWidth/2,100]),this.startingPositions.push([Game.stageWidth/2+100,100]),this.startingPositions.push([Game.stageWidth/2+200,100]);for(var t=["red","yellow","blue"],e=0;e<8;e++){var i=Game.getRandom(0,this.startingPositions.length-1,!0),n=this.startingPositions[i],o=t[Game.getRandom(0,t.length-1,!0)];this.spawnPhoton("small",o,n,[0,0],!0),this.startingPositions.splice(i,1)}for(e=0;e<this.photons.length;e++)if(this.mainHolderRef.addChild(this.photons[e].decayTimerHolder),this.mainHolderRef.addChild(this.photons[e].holder),"large"!=this.photons[e].size)for(var a=0;a<this.photons[e].decayTimerDots.length;a++)this.photons[e].holder.interactiveChildren=!1,this.photons[e].decayTimerHolder.interactiveChildren=!1,this.photons[e].decayTimerDots[a].sprite.position.x=0,this.photons[e].decayTimerDots[a].sprite.position.y=0,this.photons[e].decayTimerDots[a].sprite.tint=65280;this.gameSetup=!1},t.prototype.killSpawnAnim=function(t,e){t.photons[e].spawnTimeline=t.scene.killTween(t.photons[e].spawnTimeline)},t.prototype.collideSameColours=function(t,e){this.scene.playAbsorbSound(),this.scene.setExpression("happy");for(var i=new Array,n=0;n<this.photons.length;n++)this.photons[n].physicsBody!=t&&this.photons[n].physicsBody!=e||i.push(n);var o=this.photons[i[0]].size,a=this.photons[i[1]].size;"small"==o&&"small"==a&&this.collideReaction(i,"medium"),"medium"==o&&"medium"==a&&(Game.playSound("photon-fusion/unstable-1"),this.collideReaction(i,"large"),this.scene.addFocusPoint()),("small"==o&&"medium"==a||"medium"==o&&"small"==a)&&(this.collideReaction(i,"large"),Game.playSound("photon-fusion/unstable-1"),this.scene.addFocusPoint())},t.prototype.collideReaction=function(t,e){var i=[0,0],n=this.photons[t[0]].physicsBody.velocity,o=this.photons[t[1]].physicsBody.velocity;p2.vec2.add(i,n,o);var a=[0,0],s=-this.getAngle(this.photons[t[1]].physicsBody.position[0],this.photons[t[1]].physicsBody.position[1],this.photons[t[0]].physicsBody.position[0],this.photons[t[0]].physicsBody.position[1]),r=Math.cos(s),h=Math.sin(s);a[0]=this.photons[t[0]].physicsBody.position[0]+this.photons[t[0]].radius*r,a[1]=this.photons[t[0]].physicsBody.position[1]+this.photons[t[0]].radius*h;var l=this.photons[t[0]].colour;this.removePhoton(t[0]),this.removePhoton(t[1]),this.spawnPhoton(e,l,a,i,!1)},t.prototype.removePhoton=function(t){this.photons[t].decayTimerHolder.removeAllChildren(),this.photons[t].currentDots<0&&this.photonSplit(t),this.currentlyActivePhotons--,"small"==this.photons[t].size&&this.currentPhotons("small","remove",this.photons[t].colour),"medium"==this.photons[t].size&&this.currentPhotons("medium","remove"),"large"==this.photons[t].size&&this.currentPhotons("large","remove"),this.photons[t].decayTimerHolder.position.y=-1e3,this.photons[t].active=!1,this.scene.removeBodyFromWorld(this.photons[t].physicsBody),this.photons[t].spawnTimeline=this.scene.killTween(this.photons[t].spawnTimeline),this.photons[t].spawnTimeline=new TimelineMax({onComplete:this.killPhoton,onCompleteParams:[this,t]}),1==this.focusModeActive?this.photons[t].spawnTimeline.add([TweenMax.to(this.photons[t].powerUpSprite.scale,.4,{x:0,y:0,ease:Back.easeOut})],0):this.photons[t].spawnTimeline.add([TweenMax.to(this.photons[t].sprite.scale,.4,{x:0,y:0,ease:Back.easeOut})],0)},t.prototype.killPhoton=function(t,e){t.photons[e].holder.position.y=-1e3,t.photons[e].spawnTimeline=t.scene.killTween(t.photons[e].spawnTimeline),t.currentlyActivePhotons<=0&&(t.gameOverTriggered=!0)},t.prototype.spawnPhoton=function(t,e,i,n,o){var a;switch(t){case"small":a=1;break;case"medium":a=.66;break;case"large":a=.33}for(var s=0;s<this.photons.length;s++)if(1!=this.photons[s].active&&this.photons[s].colour==e&&this.photons[s].size==t){this.currentlyActivePhotons++,this.photons[s].currentDots=20;for(var r=0;r<this.photons[s].decayTimerDots.length;r++)if(this.photons[s].decayTimerDots[r].dots==this.photons[s].currentDots){this.photons[s].decayTimerHolder.addChild(this.photons[s].decayTimerDots[r].sprite),"small"==t&&(this.photons[s].decayTimerDots[r].sprite.scale.x=.7,this.photons[s].decayTimerDots[r].sprite.scale.y=.7),"medium"==t&&(this.photons[s].decayTimerDots[r].sprite.scale.x=1,this.photons[s].decayTimerDots[r].sprite.scale.y=1),"large"==t&&(this.photons[s].decayTimerDots[r].sprite.scale.x=.2,this.photons[s].decayTimerDots[r].sprite.scale.y=.2);break}return"small"==t&&this.currentPhotons("small","add",e),"medium"==t&&this.currentPhotons("medium","add"),"large"==t&&this.currentPhotons("large","add"),this.resetBody(this.photons[s].physicsBody),this.photons[s].active=!0,this.photons[s].sprite.scale.x=this.photons[s].sprite.scale.y=0,this.photons[s].spawnTimeline=this.scene.killTween(this.photons[s].spawnTimeline),this.photons[s].spawnTimeline=new TimelineMax({onComplete:this.killSpawnAnim,onCompleteParams:[this,s]}),1==this.focusModeActive?this.photons[s].spawnTimeline.add([TweenMax.to(this.photons[s].powerUpSprite.scale,.4,{x:1,y:1,ease:Back.easeOut})],0):this.photons[s].spawnTimeline.add([TweenMax.to(this.photons[s].sprite.scale,.4,{x:1,y:1,ease:Back.easeOut})],0),this.scene.addBodyToWorld(this.photons[s].physicsBody),this.photons[s].physicsBody.position[0]=i[0],this.photons[s].physicsBody.position[1]=i[1],this.photons[s].physicsBody.velocity[0]=n[0]*a,this.photons[s].physicsBody.velocity[1]=n[1]*a,this.photons[s].timerDotLimit=this.scene.getDotTickTime(),this.photons[s].largePhotonDecayCount=60,void(0==o&&this.scene.fireJoinParticles(i,t,e,this.photons[s].physicsBody.velocity))}},t.prototype.resetBody=function(t){t.invMass=1/t.mass,t.invInertia=1/t.inertia,t.angle=0,t.velocity=[0,0],t.setZeroForce()},t.prototype.getDistance=function(t,e,i,n){var o=t-i,a=e-n;return Math.sqrt(o*o+a*a)},t.prototype.getAngle=function(t,e,i,n){if(t!=i||e!=n){var o=t-i,a=n-e;return Math.atan2(a,o)}},t.prototype.startAlarm=function(){if(1!=this.alarmActive){this.alarmActive=!0,this.scene.activateWarning(),this.warningTickRate=.2;for(var t=0;t<this.photons.length;t++)for(var e=0;e<this.photons[t].decayTimerDots.length;e++)this.photons[t].decayTimerDots[e].sprite.tint=16711680}},t.prototype.tick=function(){1==this.gameOverTriggered&&++this.gameOverTick>=60&&(this.currentlyActivePhotons>0?(this.gameOverTriggered=!1,this.gameOverTick=0):(this.scene.endGame(),this.gameOverTriggered=!1,this.gameOverTick=0)),1==this.warningIsActive&&++this.warningCounter>=60&&this.startAlarm();for(var t=0;t<this.photons.length;t++)0!=this.photons[t].active&&(this.photons[t].holder.position.x=this.photons[t].physicsBody.position[0],this.photons[t].holder.position.y=Game.stageHeight-this.photons[t].physicsBody.position[1],this.photons[t].holder.rotation=-this.photons[t].physicsBody.angle,this.photons[t].decayTimerHolder.position.x=this.photons[t].holder.position.x,this.photons[t].decayTimerHolder.position.y=this.photons[t].holder.position.y,this.photons[t].wobbleCountX+=this.photons[t].wobbleAmountX*this.photons[t].wobbleIntensityMultiplier,this.photons[t].wobbleCountX>=2*Math.PI&&(this.photons[t].wobbleCountX=2*-Math.PI),this.photons[t].wobbleCountY+=this.photons[t].wobbleAmountY*this.photons[t].wobbleIntensityMultiplier,this.photons[t].wobbleCountY>=2*Math.PI&&(this.photons[t].wobbleCountY=2*-Math.PI),this.photons[t].holder.scale.x=1+Math.sin(this.photons[t].wobbleCountX)/20,this.photons[t].holder.scale.y=1+Math.cos(this.photons[t].wobbleCountY)/20,"large"==this.photons[t].size&&--this.photons[t].largePhotonDecayCount<=0&&this.photonSplit(t),this.photons[t].timerPauseCount<this.photons[t].timerPauseLimit?this.photons[t].timerPauseCount++:(this.photons[t].timerDotCount++,1==this.focusModeActive?this.photons[t].timerDotCount>=this.photons[t].timerDotLimit/3&&(this.photons[t].timerDotCount=0,this.decayTick(t)):this.photons[t].timerDotCount>=this.photons[t].timerDotLimit*this.warningTickRate&&(this.photons[t].timerDotCount=0,this.decayTick(t))))},t.prototype.changeDotImage=function(t){this.photons[t].decayTimerHolder.removeAllChildren();for(var e=0;e<this.photons[t].decayTimerDots.length;e++)if(this.photons[t].decayTimerDots[e].dots==this.photons[t].currentDots){this.photons[t].decayTimerHolder.addChild(this.photons[t].decayTimerDots[e].sprite),"small"==this.photons[t].size&&(this.photons[t].decayTimerDots[e].sprite.scale.x=.7,this.photons[t].decayTimerDots[e].sprite.scale.y=.7),"medium"==this.photons[t].size&&(this.photons[t].decayTimerDots[e].sprite.scale.x=1,this.photons[t].decayTimerDots[e].sprite.scale.y=1),"large"==this.photons[t].size&&(this.photons[t].decayTimerDots[e].sprite.scale.x=.2,this.photons[t].decayTimerDots[e].sprite.scale.y=.2);break}0==this.photons[t].currentDots&&(console.log("calling split"),this.photonSplit(t))},t.prototype.decayTick=function(t){this.photons[t].currentDots--,this.changeDotImage(t)},t.prototype.photonSplit=function(t){this.scene.playPulseSound();var e=["blue","red","yellow"];if("small"==this.photons[t].size){this.removePhoton(t),this.scene.setExpression("sad"),this.scene.playHenrySound("negative");o=Game.getRandom(1,3,!0);Game.playSound(String("photon-fusion/phaserdown"+o))}else if("medium"==this.photons[t].size){this.removePhoton(t);o=Game.getRandom(1,3,!0);Game.playSound(String("photon-fusion/phaserup"+o));for(var i=this.photons[t].colour,n=0;n<e.length;n++)i==e[n]&&e.splice(n,1);this.createSplitPhotons(2,e,t)}else if("large"==this.photons[t].size){var o=Game.getRandom(1,3,!0);Game.playSound(String("photon-fusion/phaserup"+o)),this.removePhoton(t),this.scene.setExpression("shocked"),this.createSplitPhotons(4,e,t)}},t.prototype.createSplitPhotons=function(t,e,i){for(var n=2*Math.PI/t,o=Game.getRandom(0,2*Math.PI),a=0;a<t;a++){var s=o-n*a,r=Math.cos(s),h=Math.sin(s),l=[0,0];1==t?(l[0]=this.photons[i].physicsBody.position[0],l[1]=this.photons[i].physicsBody.position[1]):(l[0]=this.photons[i].physicsBody.position[0]+this.photons[i].radius*r,l[1]=this.photons[i].physicsBody.position[1]+this.photons[i].radius*h);var p=e[Game.getRandom(0,e.length-1,!0)],c=[100*r,100*h];this.spawnPhoton("small",p,l,c,!0)}1==Game.useFilters&&this.scene.fireRipple([l[0],l[1]],"large")},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.destroy=function(){for(var t=0;t<this.photons.length;t++){Game.displayStore.returnPooledItem(this.photons[t].holder),Game.displayStore.returnPooledItem(this.photons[t].sprite),Game.displayStore.returnPooledItem(this.photons[t].powerUpSprite),Game.displayStore.returnPooledItem(this.photons[t].decayTimerHolder);for(var e=0;e<this.photons[t].decayTimerDots.length;e++)Game.displayStore.returnPooledItem(this.photons[t].decayTimerDots[e].sprite)}},t}(),ParticleBurst=function(){function t(t,e,i,n){this.enabled=!1,this.cap=30,this.time=1.2,this.next=0,this.tickCount=0,this.container=e,this.pos=new PIXI.Point(0,0),this.particles=[],this.params=n,this.blendMode=n.blendMode||PIXI.BLEND_MODES.NORMAL,this.time=n.time||1,this.cap=this.params.cap||30,this.cancelled=!1,this.stagger=this.params.stagger||-1,this.scene=i,this.inUse=!1;for(var o=0;o<t.length;o++)for(var a=0;a<this.cap/t.length;a++){var s=Game.displayStore.getSprite(t[o]);this.particles.push({sprite:s,index:(o+1)*a}),s.alpha=0,this.container.addChild(s)}this.shuffleArray(this.particles)}return t.prototype.tint=function(t){for(var e=0;e<this.particles.length;e++)this.particles[e].sprite.tint=t},t.prototype.fire=function(){this.animation=this.scene.killTween(this.animation),this.animation=new TimelineMax,this.cancelled=!1,this.inUse=!0;for(var t=0;t<this.particles.length;t++)this.cycleParticle(this.particles[t],this,t);this.animation.call(function(){this.inUse=!1},null,this)},t.prototype.updateParams=function(t,e){e.params.lowerAngle=t.lowerAngle,e.params.upperAngle=t.upperAngle,e.params.lowerVelocity=t.lowerVelocity,e.params.upperVelocity=t.upperVelocity,e.params.endScale=t.endScale,e.params.lowerStartScale=t.lowerStartScale,e.params.upperStartScale=t.upperStartScale,e.params.lowerEndScale=t.lowerEndScale,e.params.upperEndScale=t.upperEndScale,e.params.blendMode=t.blendMode,e.params.friction=t.friction,e.params.XstartRange=t.XstartRange,e.params.YstartRange=t.YstartRange,e.params.endAlpha=t.endAlpha,e.params.startAlpha=t.startAlpha,e.params.gravity=t.gravity,e.stagger=t.stagger},t.prototype.cycleParticle=function(t,e,i){if(1!=e.cancelled){var n=t.sprite;n.position.x=Game.getRandom(-e.params.XstartRange,e.params.XstartRange),n.position.y=Game.getRandom(-e.params.YstartRange,e.params.YstartRange),n.alpha=e.params.startAlpha||0;h=Game.getRandom(e.params.lowerStartScale,e.params.upperStartScale);n.scale.x=h,n.scale.y=h,n.blendMode=e.blendMode;var o=i/e.stagger;o<0&&(o=0);var a=e.params.endScale||0,s=e.params.lowerEndScale||a,r=e.params.upperEndScale||a,h=Game.getRandom(s,r);n.rotation=Game.getRandom(-Math.PI,Math.PI)*e.params.rotationPower,e.animation.add([TweenLite.to(n.position,e.time,{physics2D:{velocity:Game.getRandom(e.params.lowerVelocity,e.params.upperVelocity),angle:Game.getRandom(e.params.lowerAngle,e.params.upperAngle),acceleration:e.params.gravity,accelerationAngle:90,friction:e.params.friction}}),TweenLite.to(n,e.time/8,{alpha:1,ease:Sine.easeOut}),TweenLite.to(n,e.time,{delay:e.time/8,alpha:e.params.endAlpha,ease:Sine.easeOut}),TweenLite.to(n,e.time,{rotation:Game.getRandom(-3*e.params.rotationPower,3*e.params.rotationPower),ease:Sine.easeOut}),TweenLite.to(n.scale,e.time,{x:h,y:h,ease:Sine.easeOut})],o)}},t.prototype.shuffleArray=function(t){for(var e,i,n=t.length;n>0;)i=Math.floor(Math.random()*n),e=t[--n],t[n]=t[i],t[i]=e;return t},t.prototype.cancel=function(){this.cancelled=!0,this.animation.kill()},t.prototype.pause=function(){this.scene.pauseResumeTween(this.animation,"pause")},t.prototype.resume=function(){this.scene.pauseResumeTween(this.animation,"resume")},t.prototype.destroy=function(){this.animation=this.scene.killTween(this.animation);for(var t=0;t<this.particles.length;t++)this.particles[t].sprite.parent&&this.particles[t].sprite.parent.removeChild(this.particles[t].sprite),TweenLite.killTweensOf(this.particles[t].sprite),TweenLite.killTweensOf(this.particles[t].sprite.scale),Game.displayStore.returnPooledItem(this.particles[t].sprite);this.inUse=!1},t}(),ParticleStream=function(){function t(t,e,i,n){this.cap=30,this.time=1,this.next=0,this.tickCount=0,this.stagger=.1,this.enabled=!1,this.delayedCalls=new Array,this.container=e,this.pos=new PIXI.Point(0,0),this.particles=[],this.animation=new TimelineMax,this.container.interactive=!1,this.container.interactiveChildren=!1,this.tweens=[],this.iterations=0,this.scene=i,this.params=n,this.blendMode=n.blendMode||PIXI.BLEND_MODES.NORMAL,this.time=n.time||1,n.xPos&&n.yPos&&this.updatePos(new PIXI.Point(n.xPos,n.yPos)),this.cap=this.params.cap||30,this.stagger=this.time/this.cap,this.timer=new TimelineMax({repeat:-1}),this.timer.call(this.tick,null,this,1/30);for(var o=0;o<t.length;o++)for(s=0;s<Math.round(this.cap/t.length);s++){var a=Game.displayStore.getSprite(t[o]);this.particles.push({sprite:a,startTime:0,inUse:!1}),a.alpha=0,this.container.addChild(a),0}this.shuffleArray(this.particles);for(var s=0;s<this.particles.length;s++)this.particles[s].startTime=this.stagger*s}return t.prototype.updateParams=function(t,e){e.params.lowerAngle=t.lowerAngle,e.params.upperAngle=t.upperAngle,e.params.lowerVelocity=t.lowerVelocity,e.params.upperVelocity=t.upperVelocity,e.params.endScale=t.endScale,e.params.lowerStartScale=t.lowerStartScale,e.params.upperStartScale=t.upperStartScale,e.params.rotationPower=t.rotationPower,e.params.friction=t.friction,t.xPos&&t.yPos&&e.updatePos(new PIXI.Point(t.xPos,t.yPos))},t.prototype.pause=function(){this.paused=!0;for(var t=0;t<this.tweens.length;t++)this.scene.pauseResumeTween(this.tweens[t],"pause");this.delayedCalls=[],this.scene.pauseResumeTween(this.timer,"pause")},t.prototype.resume=function(){this.paused=!1;for(var t=0;t<this.tweens.length;t++)this.scene.pauseResumeTween(this.tweens[t],"resume");this.scene.pauseResumeTween(this.timer,"resume")},t.prototype.cycleParticle=function(t,e){if(0!=e.enabled&&1!=e.paused){t.inUse=!0;var i=t.sprite;i.position.x=Game.getRandom(e.pos.x-e.params.XstartRange,e.pos.x+e.params.XstartRange),i.position.y=Game.getRandom(e.pos.y-e.params.YstartRange,e.pos.y+e.params.YstartRange),i.alpha=e.params.startAlpha;var n=e.params.lowerAngle||0,o=e.params.upperAngle||360,a=e.params.lowerVelocity||20,s=e.params.upperVelocity||50,r=e.params.endScale||0,h=e.params.rotationPower;0!=h&&(h=1);var l=Game.getRandom(e.params.lowerStartScale,e.params.upperStartScale);i.scale.x=0,i.scale.y=0,i.rotation=0,i.blendMode=e.blendMode,0!=e.params.rotationPower&&(i.rotation=Game.getRandom(0,2*Math.PI*h)),this.tweens.push(TweenMax.to(i.position,e.time,{physics2D:{velocity:Game.getRandom(a,s),angle:Game.getRandom(n,o),acceleration:e.params.gravity,accelerationAngle:90,friction:e.params.friction}}));var p;p=e.params.fadeInTime?e.params.fadeInTime:50;var c;c=e.params.fadeOutTime?e.params.fadeOutTime:4;var d;d=e.params.scaleInTime?e.params.scaleInTime:50;var u;u=e.params.scaleOutTime?e.params.scaleOutTime:4,this.tweens.push(TweenMax.to(i,e.time/p,{alpha:e.params.startAlpha,ease:Sine.easeOut})),this.tweens.push(TweenMax.to(i,e.time/c,{delay:e.time-e.time/c,alpha:0,ease:Sine.easeOut})),this.tweens.push(TweenMax.to(i.scale,e.time/d,{delay:e.time/d,x:l,y:l,ease:Sine.easeOut})),this.tweens.push(TweenMax.to(i.scale,e.time/u,{delay:e.time-e.time/u,x:r,y:r,ease:Sine.easeOut})),this.tweens.push(TweenMax.to(i,e.time,{rotation:Game.getRandom(0,2*Math.PI)*h,ease:Sine.easeOut}))}},t.prototype.enable=function(){this.enabled=!0,this.timer=this.scene.killTween(this.timer),this.timer=new TimelineMax({repeat:-1}),this.timer.call(this.tick,null,this,1/30),this.iterations=0;for(var t=0;t<this.particles.length;t++)this.particles[t].inUse=!1},t.prototype.disable=function(){this.enabled=!1;for(var t=0;t<this.delayedCalls.length;t++)this.delayedCalls[t].kill();this.timer=this.scene.killTween(this.timer)},t.prototype.trackItem=function(t){this.trackedItem=t},t.prototype.updatePos=function(t){this.pos.x=t.x,this.pos.y=t.y},t.prototype.tick=function(){var t=this.time;t<1&&(t=1),this.iterations+=1/(30*t);for(e=0;e<this.particles.length;e++)this.iterations>=this.particles[e].startTime&&0==this.particles[e].inUse&&this.cycleParticle(this.particles[e],this);if(this.iterations>this.time){this.iterations=0;for(var e=0;e<this.particles.length;e++)this.particles[e].inUse=!1,this.particles[e].startTime=this.stagger*e;this.tweens=[]}},t.prototype.shuffleArray=function(t){for(var e,i,n=t.length;n>0;)i=Math.floor(Math.random()*n),e=t[--n],t[n]=t[i],t[i]=e;return t},t.prototype.destroy=function(){this.animation=this.scene.killTween(this.animation),this.timer=this.scene.killTween(this.timer),this.disable();for(t=0;t<this.particles.length;t++)TweenLite.killTweensOf(this.particles[t].sprite),TweenLite.killTweensOf(this.particles[t].sprite.scale),Game.displayStore.returnPooledItem(this.particles[t].sprite);for(var t=0;t<this.tweens.length;t++)this.tweens[t]=this.scene.killTween(this.tweens[t]);Game.displayStore.returnPooledItem(this.container)},t}(),TutorialOverlay=function(){function t(t){this.scene=t,this.bgOverlay=Game.displayStore.getSprite("tutorial-element-bg"),this.bgOverlay.width=Game.stageWidth,this.bgOverlay.height=Game.stageHeight,this.bgOverlay.alpha=.4,this.dotSpacing=30,this.isOpen=!1,this.paginationOffAlpha=.5,this.paginationOnAlpha=1}return t.prototype.buildTutorial=function(t,e){this.isOpen=!0,this.controlsTitle=Game.displayStore.getBitmapText("tutorial/title-font"),this.howToPlayTitle=Game.displayStore.getBitmapText("tutorial/title-font"),this.powerUpTitle=Game.displayStore.getBitmapText("tutorial/title-font"),this.currentPanelState=0,this.addedOverlay=e,this.tutorialHolder=Game.displayStore.getContainer("ui/tutorial-overlay-main-holder"),this.tutorialHolder.position.y=Game.stageHeight/2-Game.stageHeight,this.gameID=t,this.panels=new Array,this.panels.push({container:Game.displayStore.getContainer("tutorial-frame-controls"),panelBG:Game.displayStore.getSprite("tutorial-panel-bg"),id:"controls"}),this.panels.push({container:Game.displayStore.getContainer("tutorial-frame-howtoplay"),panelBG:Game.displayStore.getSprite("tutorial-panel-bg"),id:"howtoplay"}),3!=this.scene.game.gameLaunchMode&&this.panels.push({container:Game.displayStore.getContainer("tutorial-frame-powerups"),panelBG:Game.displayStore.getSprite("tutorial-panel-bg"),id:"powerup"}),Game.coreData.setGameTutorialViewed(this.gameID),1==this.addedOverlay&&this.scene.container.addChild(this.bgOverlay),0==this.addedOverlay?this.scene.game.ui.setUI("help"):this.scene.game.ui.setUI("tutorial-overlay"),this.positions=new Array,this.positions.push(Game.stageWidth/2),this.positions.push(Game.stageWidth/2-Game.stageWidth),this.positions.push(Game.stageWidth/2-2*Game.stageWidth);for(i=0;i<this.panels.length;i++)this.panels[i].container.addChildAt(this.panels[i].panelBG,0),this.panels[i].container.position.x=Game.stageWidth*i,this.tutorialHolder.addChild(this.panels[i].container);this.scene.container.addChild(this.tutorialHolder),this.setUpTitle(this.controlsTitle,0),this.setUpTitle(this.howToPlayTitle,1),3!=this.scene.game.gameLaunchMode&&this.setUpTitle(this.powerUpTitle,2),this.paginationDots=new Array;for(var i=0;i<9;i++)this.paginationDots.push({sprite:Game.displayStore.getSprite("tutorial-pagination-dot"),container:null});this.setUpPaginationDots(0,2,this.panels[0].container,0),this.setUpPaginationDots(3,5,this.panels[1].container,1),3!=this.scene.game.gameLaunchMode&&this.setUpPaginationDots(6,8,this.panels[2].container,2),this.tutorialHolder.position.x=this.positions[this.currentPanelState],this.cyclePanel(0),TweenMax.to(this.tutorialHolder.position,.5,{y:Game.stageHeight/2,ease:Expo.easeOut,delay:.2})},t.prototype.setUpTitle=function(t,e){Game.stringsManager.setTextString(t,this.panels[e].id),t.position.x=0-t.width/2+Game.stringsManager.getTextOffset(this.panels[e].id).xOffset,t.position.y=-225+Game.stringsManager.getTextOffset(this.panels[e].id).yOffset,t.tint=16777215,this.panels[e].container.addChild(t)},t.prototype.setUpPaginationDots=function(t,e,i,n){var o,a=0;3!=this.scene.game.gameLaunchMode?o=-this.dotSpacing:(o=-this.dotSpacing/2,e-=1);for(var s=t;s<=e;s++)this.paginationDots[s].container=i,this.paginationDots[s].sprite.position.x=o,this.paginationDots[s].sprite.position.y=218,this.paginationDots[s].sprite.alpha=this.paginationOffAlpha,a==n&&(this.paginationDots[s].sprite.alpha=this.paginationOnAlpha),this.paginationDots[s].container.addChild(this.paginationDots[s].sprite),o+=this.dotSpacing,a++},t.prototype.remove=function(){this.isOpen=!1;for(t=0;t<this.panels.length;t++)this.panels[t].container.removeChild(this.panels[t].panelBG),this.tutorialHolder.removeChild(this.panels[t].container);this.scene.container.removeChild(this.tutorialHolder),1==this.addedOverlay&&this.scene.container.removeChild(this.bgOverlay);for(var t=0;t<this.paginationDots.length;t++)this.paginationDots[t].container&&(this.paginationDots[t].container.removeChild(this.paginationDots[t].sprite),this.paginationDots[t].container=null),Game.displayStore.returnPooledItem(this.paginationDots[t].sprite);this.animationTween=this.scene.killTween(this.animationTween),Game.displayStore.flush([this.gameID+"-tutorial-assets"]),Game.displayStore.flush(["help-assets"]),Game.displayStore.returnPooledItem(this.controlsTitle),Game.displayStore.returnPooledItem(this.howToPlayTitle),Game.displayStore.returnPooledItem(this.powerUpTitle)},t.prototype.uiClicked=function(t){switch(t.id){case"tutorial-button-left":this.cyclePanel(-1);break;case"tutorial-button-right":this.cyclePanel(1);break;case"close-button":1==this.isOpen&&(this.remove(),this.scene.tutorialOverlayClosed())}},t.prototype.cyclePanel=function(t){this.currentPanelState+=t,this.currentPanelState<0&&(this.currentPanelState=0),this.currentPanelState>this.panels.length-1&&(this.currentPanelState=this.panels.length-1),this.animationTween=this.scene.killTween(this.animationTween),this.animationTween=new TimelineMax,this.animationTween.add(TweenMax.to(this.tutorialHolder.position,.5,{x:this.positions[this.currentPanelState],ease:Expo.easeOut}),0),this.setButtonState()},t.prototype.setButtonState=function(){0==this.currentPanelState?(this.scene.game.ui.disableButton("tutorial-button-left"),this.scene.game.ui.enableButton("tutorial-button-right")):this.currentPanelState==this.panels.length-1?(this.scene.game.ui.disableButton("tutorial-button-right"),this.scene.game.ui.enableButton("tutorial-button-left")):(this.scene.game.ui.enableButton("tutorial-button-left"),this.scene.game.ui.enableButton("tutorial-button-right"))},t.prototype.tick=function(){},t.prototype.destroy=function(){},t}(),UI=function(){function t(t){this.tweens=new Array,this.uiInitialised=!1,this.currentKeyCycledButton=0,this.keyboardUIFocus=!1,this.game=t,this.buttons=new Array,this.enjoyIntroOn=!1,this.powerUpIntroOn=!1,this.pauseButtonSpacing=150,this.pauseVerticalSpacing=200,this.highlightRoughEase=new RoughEase({strength:5,points:12,randomize:!1})}return t.prototype.initUI=function(){this.uiContainer=Game.displayStore.getContainer("ui-main-container"),this.uiContainer.interactive=!0,this.uiMessageContainer=Game.displayStore.getContainer("ui-message-container"),this.uiMessageContainer.interactive=!1,this.startMessageHolder=Game.displayStore.getContainer("ui/start-message-holder"),this.startMessageHolder.position.x=Game.stageWidth/2,this.startMessageHolder.position.y=Game.stageHeight/2,this.startMessage0=Game.displayStore.getBitmapText("ui/start-message-0"),Game.stringsManager.setTextString(this.startMessage0,"start-message-0"),this.startMessage0.position.x=0-this.startMessage0.width/2+Game.stringsManager.getTextOffset("start-message-0").xOffset,this.startMessage0.position.y=0-this.startMessage0.height/2+Game.stringsManager.getTextOffset("start-message-0").yOffset,this.startMessage1=Game.displayStore.getBitmapText("ui/start-message-1"),Game.stringsManager.setTextString(this.startMessage1,"start-message-1"),this.startMessage1.position.x=0-this.startMessage1.width/2+Game.stringsManager.getTextOffset("start-message-1").xOffset,this.startMessage1.position.y=0-this.startMessage1.height/2+Game.stringsManager.getTextOffset("start-message-1").yOffset,this.startMessage2=Game.displayStore.getBitmapText("ui/start-message-2"),Game.stringsManager.setTextString(this.startMessage2,"start-message-2"),this.startMessage2.position.x=0-this.startMessage2.width/2+Game.stringsManager.getTextOffset("start-message-2").xOffset,this.startMessage2.position.y=0-this.startMessage2.height/2+Game.stringsManager.getTextOffset("start-message-2").yOffset,this.clickEffect=Game.displayStore.getAnimatedSprite("click-anim"),this.clickEffect.animationSpeed=.3,this.clickEffect.loop=!1,this.clickEffect.scale.x=this.clickEffect.scale.y=1,this.clickEffect.position.y=-1e3,this.clickEffect.blendMode=PIXI.BLEND_MODES.ADD,this.pauseButton=Game.displayStore.getButton("pause-button"),this.pauseButton.position.x=952,this.pauseButton.position.y=68,this.pauseButton.visuallyPrepareButton("small"),this.pauseButton.setAsUIButton(),this.largeReplayButton=Game.displayStore.getButton("replaybuttonlarge"),this.largeReplayButton.position.x=900,this.largeReplayButton.position.y=480,this.largeReplayButton.visuallyPrepareButton("large"),this.largeReplayButton.setAsUIButton(),this.largePlayButton=Game.displayStore.getButton("playbuttonlarge"),this.largePlayButton.position.x=512,this.largePlayButton.position.y=350,this.largePlayButton.visuallyPrepareButton("large"),this.largePlayButton.setAsUIButton(),this.powerupButton=Game.displayStore.getButton("powerup-button"),this.powerupButton.visuallyPrepareButton("small"),this.powerupButton.setAsUIButton(this),this.soundOnButton=Game.displayStore.getButton("soundonbutton"),this.soundOnButton.position.x=952,this.soundOnButton.position.y=68,this.soundOnButton.visuallyPrepareButton("small"),this.soundOnButton.setAsUIButton(),this.soundOffButton=Game.displayStore.getButton("soundoffbutton"),this.soundOffButton.position.x=952,this.soundOffButton.position.y=68,this.soundOffButton.visuallyPrepareButton("small"),this.soundOffButton.setAsUIButton(),this.homeButton=Game.displayStore.getButton("home-button"),this.homeButton.visuallyPrepareButton("small"),this.homeButton.setAsUIButton(),this.helpButton=Game.displayStore.getButton("help-button"),this.helpButton.position.x=72,this.helpButton.position.y=68,this.helpButton.visuallyPrepareButton("small"),this.helpButton.setAsUIButton(),this.playButton=Game.displayStore.getButton("play-button"),this.playButton.position.x=952,this.playButton.position.y=530,this.playButton.visuallyPrepareButton("small"),this.playButton.setAsUIButton(),this.closeButton=Game.displayStore.getButton("close-button"),this.closeButton.visuallyPrepareButton("small"),this.closeButton.setAsUIButton(),this.backButton=Game.displayStore.getButton("back-button"),this.backButton.position.x=72,this.backButton.position.y=68,this.backButton.visuallyPrepareButton("small"),this.backButton.setAsUIButton(),this.skipButton=Game.displayStore.getButton("skip-button"),this.skipButton.position.x=928,this.skipButton.position.y=500,this.skipButton.visuallyPrepareButton("small"),this.skipButton.setAsUIButton(),this.tutorialLeftButton=Game.displayStore.getButton("tutorial-button-left"),this.tutorialLeftButton.position.x=106,this.tutorialLeftButton.position.y=312,this.tutorialLeftButton.visuallyPrepareButton("small"),this.tutorialLeftButton.setAsUIButton(),this.tutorialRightButton=Game.displayStore.getButton("tutorial-button-right"),this.tutorialRightButton.position.x=918,this.tutorialRightButton.position.y=312,this.tutorialRightButton.visuallyPrepareButton("small"),this.tutorialRightButton.setAsUIButton(),this.hubLeftButton=Game.displayStore.getButton("hub-button-left"),this.hubLeftButton.position.x=96,this.hubLeftButton.position.y=500,this.hubLeftButton.visuallyPrepareButton("small"),this.hubLeftButton.setAsUIButton(),this.hubRightButton=Game.displayStore.getButton("hub-button-right"),this.hubRightButton.position.x=928,this.hubRightButton.position.y=500,this.hubRightButton.visuallyPrepareButton("small"),this.hubRightButton.setAsUIButton(),this.focusMeterContainer=Game.displayStore.getContainer("ui-focus-meter"),this.focusMeterContainer.alpha=0,this.focusMeterSlots=[];for(var t=0;t<5;t++){var e=Game.displayStore.getContainer("ui-powerup-slot"),i=Game.displayStore.getSprite("ui/ui-powerup-slot-empty.png"),n=Game.displayStore.getSprite("ui/ui-powerup-slot-full.png");e.addChild(i),e.addChild(n),e.showOnlyChild(0),e.position.x=13*t-26,this.focusMeterContainer.addChild(e),this.focusMeterSlots.push(e)}var o=this,a=window;a.addEventListener("keydown",function(t){o.onKeyDown(t)},!0),a.addEventListener("keyup",function(t){o.onKeyUp(t)},!0),this.uiInitialised=!0},t.prototype.setFocusMeterState=function(t){for(var e=0;e<this.focusMeterSlots.length;e++)e<t?this.focusMeterSlots[e].showOnlyChild(1):this.focusMeterSlots[e].showOnlyChild(0)},t.prototype.animateFocusPoint=function(t){var e=this.focusMeterSlots[t].getSpriteAt(1);e.scale.x=e.scale.y=0,TweenMax.to(e.scale,.15,{x:3,y:3,ease:Power2.easeIn}),TweenMax.to(e.scale,.2,{x:1,y:1,delay:.15,ease:Back.easeOut})},t.prototype.setUI=function(t){if(0!=this.uiInitialised)switch(this.mode=t,this.removeAllButtons(),this.uiContainer.addChild(this.clickEffect),this.currentKeyCycledButton=0,this.deselectDelay&&this.deselectDelay.kill(),this.soundOnButton.position.x=952,this.soundOnButton.position.y=68,this.soundOffButton.position.x=952,this.soundOffButton.position.y=68,this.homeButton.position.x=72,this.homeButton.position.y=68,t){case"title":window.og&&window.og.isFullScreen;break;case"game-over":case"mini-game-title":this.addSoundButtons(!0),this.addUIButton(this.homeButton,!0,!0);break;case"mini-game-gameover":this.addSoundButtons(!0),this.addUIButton(this.homeButton,!0,!0),this.addUIButton(this.largeReplayButton,!0,!0);break;case"hub-skip":this.addSoundButtons(!0),this.addUIButton(this.skipButton,!0,!0);break;case"hub":this.addSoundButtons(!1),this.addUIButton(this.hubLeftButton,!0,!0),this.addUIButton(this.hubRightButton,!0,!0);break;case"hub-single-game":this.addSoundButtons(!0);break;case"pause":this.homeButton.position.x=Game.stageWidth/2-this.pauseButtonSpacing,this.homeButton.position.y=1.3*this.pauseVerticalSpacing,this.helpButton.position.x=Game.stageWidth/2,this.helpButton.position.y=.97*this.pauseVerticalSpacing,this.soundOnButton.position.x=Game.stageWidth/2+this.pauseButtonSpacing,this.soundOnButton.position.y=1.3*this.pauseVerticalSpacing,this.soundOffButton.position.x=Game.stageWidth/2+this.pauseButtonSpacing,this.soundOffButton.position.y=1.3*this.pauseVerticalSpacing,this.addUIButton(this.homeButton,!0,!0),this.addUIButton(this.helpButton,!0,!0),this.addUIButton(this.largePlayButton,!0,!0),this.addSoundButtons(!0);break;case"gameplay":case"gameplay-come-out-swinging":case"gameplay-baddie-barrage":this.addUIButton(this.pauseButton,!0,!0),this.addPowerUpButton();break;case"gameplay-mind-the-gap":this.addUIButton(this.pauseButton,!0,!0),this.addPowerUpButton(),this.powerupButton.position.y=Game.stageHeight/2-30,this.focusMeterContainer.position.y=this.powerupButton.position.y-50;break;case"gameplay-photon-fusion":this.addUIButton(this.pauseButton,!0,!0),this.addPowerUpButton();break;case"none":case"skip":break;case"tutorial-overlay":this.closeButton.position.x=900,this.closeButton.position.y=80,this.addUIButton(this.tutorialLeftButton,!0,!0),this.addUIButton(this.tutorialRightButton,!0,!0),this.addUIButton(this.closeButton,!0,!0);break;case"help":this.closeButton.position.x=900,this.closeButton.position.y=80,this.addUIButton(this.tutorialLeftButton,!0,!0),this.addUIButton(this.tutorialRightButton,!0,!0),this.addUIButton(this.backButton,!0,!0)}},t.prototype.addSoundButtons=function(t){1==Game.soundOn?this.addUIButton(this.soundOffButton,t,!0):0==Game.soundOn&&this.addUIButton(this.soundOnButton,t,!0)},t.prototype.addPowerUpButton=function(){this.powerupButton.position.x=60,this.powerupButton.position.y=400,this.focusMeterContainer.position.x=this.powerupButton.position.x,this.focusMeterContainer.position.y=this.powerupButton.position.y-50,this.addUIButton(this.powerupButton,!1,!1),this.uiContainer.addChild(this.focusMeterContainer)},t.prototype.disableButton=function(t){for(var e=0;e<this.buttons.length;e++)this.buttons[e].id==t&&this.buttons[e].disableButton()},t.prototype.enableButton=function(t){for(var e=0;e<this.buttons.length;e++)this.buttons[e].id==t&&this.buttons[e].enableButton()},t.prototype.enablePowerupButton=function(t,e){1==t?(this.powerupButton.enableButton(),this.powerupButton.animatePowerUpActive(e)):(this.powerupButton.show(),this.powerupButton.disableButton()),this.addUIButton(this.powerupButton,!0,!1),this.showFocusMeter()},t.prototype.showFocusMeter=function(){this.uiContainer.addChild(this.focusMeterContainer),this.focusMeterContainer.alpha=0;var t=Game.getRandom(0,.2),e=new RoughEase({strength:5,points:Game.getRandom(8,12,!0),randomize:!0});this.focusAnimation=this.killTween(this.focusAnimation),this.focusAnimation=new TimelineMax,this.focusAnimation.add(TweenMax.to(this.focusMeterContainer,.3,{alpha:1,ease:e,delay:t}))},t.prototype.hideFocusMeter=function(){this.focusMeterContainer.parent&&this.uiContainer.removeChild(this.focusMeterContainer)},t.prototype.disablePowerUpButton=function(){this.powerupButton.disableButton(),this.clearButton(this.powerupButton)},t.prototype.hidePowerUpButton=function(){this.powerupButton.disableButton(),this.powerupButton.hide(),this.focusMeterContainer.alpha=0},t.prototype.showActivatePowerup=function(){},t.prototype.endPowerupTimeline=function(t){},t.prototype.resize=function(t){0!=this.uiInitialised&&(this.uiContainer.scale.x=t,this.uiContainer.scale.y=t,this.uiMessageContainer.scale.x=t,this.uiMessageContainer.scale.y=t)},t.prototype.removeAllButtons=function(){if(this.buttons.length>0)for(var t=this.buttons.length-1;t>=0;t--)this.buttons[t]instanceof UIButton&&this.removeButton(this.buttons[t]);this.buttons=[],this.game.powerUpManager.killPowerUpUI(),this.hideFocusMeter()},t.prototype.removeButton=function(t){this.clearButton(t),t.parent==this.uiContainer&&this.uiContainer.removeChild(t),"powerup-button"==t.id&&this.powerupButton.killParticles(),this.buttons.splice(this.getButtonIndex(t),1)},t.prototype.getButtonIndex=function(t){for(var e=0;e<this.buttons.length;e++)if(this.buttons[e]==t)return e},t.prototype.triggerEnjoyTheRide=function(){this.endEnjoyTimeline(this),this.enjoyIntroOn=!0,this.startMessageHolder.position.x=Game.stageWidth/2,this.startMessageHolder.position.y=Game.stageHeight/2,this.startMessageHolder.scale.x=2,this.startMessageHolder.scale.y=2,this.startMessageHolder.alpha=0,this.startMessageHolder.visible=!0,this.startMessageHolder.interactive=!1;var t;switch(Game.getRandom(0,2,!0)){case 0:t=this.startMessage0;break;case 1:t=this.startMessage1;break;case 2:t=this.startMessage2}this.startMessageHolder.addChild(t),this.uiMessageContainer.addChild(this.startMessageHolder),this.enjoyTheRideTimeline=this.killTween(this.enjoyTheRideTimeline),this.enjoyTheRideTimeline=new TimelineMax({onComplete:this.endEnjoyTimeline,onCompleteParams:[this]}),this.enjoyTheRideTimeline.add([TweenMax.to(this.startMessageHolder.scale,.5,{x:1,y:1,ease:Expo.easeOut})],0),this.enjoyTheRideTimeline.add([TweenMax.to(this.startMessageHolder,.2,{alpha:1,ease:Expo.easeOut})],0),this.enjoyTheRideTimeline.add([TweenMax.to(this.startMessageHolder.scale,.5,{x:3,y:3,ease:Expo.easeIn})],1),this.enjoyTheRideTimeline.add([TweenMax.to(this.startMessageHolder,.5,{alpha:0,ease:Expo.easeIn})],1),this.enjoyTheRideTimeline.call(Game.playSound,["swoosh-8"],this,1)},t.prototype.pause=function(){1==this.enjoyIntroOn&&(this.startMessageHolder.visible=!1,this.game.currentScene.pauseResumeTween(this.enjoyTheRideTimeline,"pause")),1==this.powerUpIntroOn&&(this.powerupActiveIcon.visible=!1,this.game.currentScene.pauseResumeTween(this.activatePowerupTimeline,"pause"),this.game.currentScene.pauseResumeTween(this.focusAnimation,"pause"))},t.prototype.resume=function(){1==this.enjoyIntroOn&&(this.startMessageHolder.visible=!0,this.game.currentScene.pauseResumeTween(this.enjoyTheRideTimeline,"resume")),1==this.powerUpIntroOn&&(this.powerupActiveIcon.visible=!0,this.game.currentScene.pauseResumeTween(this.activatePowerupTimeline,"resume"),this.game.currentScene.pauseResumeTween(this.focusAnimation,"resume"))},t.prototype.endEnjoyTimeline=function(t){t.enjoyIntroOn=!1,t.startMessage0.parent&&t.startMessageHolder.removeChild(t.startMessage0),t.startMessage1.parent&&t.startMessageHolder.removeChild(t.startMessage1),t.startMessage2.parent&&t.startMessageHolder.removeChild(t.startMessage2),t.enjoyTheRideTimeline=t.killTween(t.enjoyTheRideTimeline)},t.prototype.addCustomUIButton=function(t,e,i){t.setAsUIButton(),this.addUIButton(t,e,i)},t.prototype.addUIButton=function(t,e,i){this.uiContainer.addChild(t),this.buttons.push(t),t.buttonInit(e,i),this.registerButton(t)},t.prototype.addNonUIButton=function(t){this.buttons.push(t)},t.prototype.setButtonIndex=function(t){this.currentKeyCycledButton=t,this.keyboardUIFocus=!0},t.prototype.registerButton=function(t){var e=this;if(1==window.forceMobile)return t.on("mouseover",function(t){e.rolloverButton(e,this)}),t.on("mouseout",function(t){e.rolloutButton(e,this)}),t.on("mousedown",function(t){e.downonButton(e,this)}),void t.on("mouseup",function(t){e.uponButton(e,this)});Game.onDesktop?(t.on("mouseover",function(t){e.rolloverButton(e,this)}),t.on("mouseout",function(t){e.rolloutButton(e,this)}),t.on("mousedown",function(t){e.downonButton(e,this)}),t.on("mouseup",function(t){1!=this.disabled&&(Game.playSound("button-click-ui"),e.uponButton(e,this))})):(t.on("touchstart",function(t){e.downonButton(e,this)}),t.on("touchend",function(t){1!=this.disabled&&(Game.playSound("button-click-ui"),e.uponButton(e,this))}),t.on("touchendoutside",function(t){e.rolloutButton(e,this)}))},t.prototype.clearButton=function(t){t.clearInteractions()},t.prototype.onKeyUp=function(t){if(1!=this.game.currentScene.interactionLocked&&1!=this.game.currentScene.transitioning){var e=this.getKey(t.keyCode,t);this.game.currentScene.keyUp(e)}},t.prototype.onKeyDown=function(t){if(1!=this.game.currentScene.interactionLocked&&1!=this.game.currentScene.transitioning){var e=this.getKey(t.keyCode,t);this.game.currentScene.keyDown(e)}},t.prototype.getKey=function(t,e){var i="none";return 37==t?(e.preventDefault?e.preventDefault():e.returnValue=!1,i="left"):39==t?(e.preventDefault?e.preventDefault():e.returnValue=!1,i="right"):38==t?(e.preventDefault?e.preventDefault():e.returnValue=!1,i="up"):40==t?(e.preventDefault?e.preventDefault():e.returnValue=!1,i="down"):32==t?(e.preventDefault?e.preventDefault():e.returnValue=!1,i="spacebar"):27==t?i="esc":13==t?i="enter":9==t?i="tab":88==t&&(i="x"),i},t.prototype.cycleUIButton=function(t){var e=this.buttons[this.currentKeyCycledButton];e instanceof UIButton?this.rolloutButton(this,e):this.game.currentScene.rolloutCustomButtonKeyboard(e),this.keyboardUIFocus=!0,this.deselectDelay&&this.deselectDelay.kill();var i;"left"==t?i=-1:"right"==t&&(i=1),this.currentKeyCycledButton+=i,this.currentKeyCycledButton<0&&(this.currentKeyCycledButton=this.buttons.length-1),this.currentKeyCycledButton>=this.buttons.length&&(this.currentKeyCycledButton=0);var n=this;(e=this.buttons[this.currentKeyCycledButton])instanceof UIButton?(this.rolloverButton(this,e),this.deselectDelay=TweenMax.delayedCall(2,function(){n.keyboardUIFocus=!1,n.rolloutButton(n,e)})):(this.game.currentScene.rolloverCustomButtonKeyboard(e),this.deselectDelay=TweenMax.delayedCall(2,function(){n.keyboardUIFocus=!1,n.game.currentScene.rolloutCustomButtonKeyboard(e)}))},t.prototype.activateCycledUIButton=function(){if(0!=this.keyboardUIFocus){var t=this.buttons[this.currentKeyCycledButton];t instanceof UIButton?this.game.currentScene.uiClicked(t):this.game.currentScene.selectCustomButtonKeyboard(t)}},t.prototype.tick=function(){},t.prototype.killPowerUpButton=function(){this.removeButton(this.powerupButton)},t.prototype.rolloverButton=function(t,e){1!=e.disabled&&1!=t.game.currentScene.interactionLocked&&(t.game.currentScene.uiRolledOver(e),e.id,t.pulseTween&&t.pulseTween.kill(),t.overTimeline&&t.overTimeline.kill(),t.overTimeline=new TimelineMax,t.overTimeline.add(TweenMax.to(e.buttonContainer.scale,.2,{x:1.1,y:1.1,ease:Expo.easeOut}),0),t.overTimeline.add(TweenMax.to(e.highlight,.2,{alpha:1,ease:t.highlightRoughEase}),0))},t.prototype.rolloutButton=function(t,e){1!=e.disabled&&1!=t.game.currentScene.interactionLocked&&(e.whiteout.alpha=0,t.game.currentScene.uiRolledOut(e),t.outTimeline&&t.outTimeline.kill(),t.outTimeline=new TimelineMax,t.outTimeline.add(TweenMax.to(e.buttonContainer.scale,.2,{x:1,y:1,ease:Expo.easeOut}),0),t.outTimeline.add(TweenMax.to(e.highlight,.2,{alpha:0,ease:Expo.easeOut}),0))},t.prototype.downonButton=function(t,e){1!=e.disabled&&1!=t.game.currentScene.interactionLocked&&(t.game.currentScene.downOnUI(e),e.whiteout.alpha=.8,t.pulseTween&&t.pulseTween.kill(),t.downTimeline&&t.downTimeline.kill(),t.downTimeline=new TimelineMax,t.downTimeline.add(TweenMax.to(e.buttonContainer.scale,.2,{x:1.2,y:1.2,ease:Expo.easeOut}),0),t.downTimeline.add(TweenMax.to(e.highlight,.2,{alpha:1,ease:Expo.easeOut}),0))},t.prototype.uponButton=function(t,e){1!=e.disabled&&(t.game.currentScene.upOnUI(e),1==e.animateEffect&&t.playClickEffect(t,e),1!=t.game.currentScene.interactionLocked&&(t.upTimeline&&(t.upTimeline.kill(),t.delayedClick.kill()),Game.playSound("button-click"),t.upTimeline=new TimelineMax,e.whiteout.alpha=0,t.upTimeline=new TimelineMax,t.upTimeline.add(TweenMax.to(e.buttonContainer.scale,.2,{x:1,y:1,ease:Expo.easeOut}),0),t.upTimeline.add(TweenMax.to(e.highlight,.2,{alpha:1,ease:Expo.easeOut}),0),t.delayedClick=TweenMax.delayedCall(.15,function(){t.game.currentScene.uiClicked(e)})))},t.prototype.pulseButton=function(t){this.pulseTween&&this.pulseTween.kill(),this.pulseTween=new TimelineMax({repeat:-1}),this.pulseTween.add(TweenMax.to(t.buttonContainer.scale,.8,{x:1.1,y:1.1,ease:Quad.easeInOut}),0),this.pulseTween.add(TweenMax.to(t.buttonContainer.scale,.8,{x:1,y:1,ease:Quad.easeInOut}),.8)},t.prototype.playClickEffect=function(t,e){this.uiContainer.addChild(this.clickEffect),t.clickEffect.position.x=e.position.x,t.clickEffect.position.y=e.position.y,t.clickEffect.gotoAndStop(0),t.clickEffect.play()},t.prototype.playUISound=function(t){Game.stopCurrentInterruptableSound(),TweenMax.delayedCall(.2,Game.playSound,[t,!0])},t.prototype.sceneDestroy=function(){1==this.enjoyIntroOn&&(this.startMessageHolder.visible=!1,this.game.currentScene.killTween(this.enjoyTheRideTimeline)),1==this.powerUpIntroOn&&(this.game.currentScene.killTween(this.activatePowerupTimeline),this.game.currentScene.killTween(this.focusAnimation))},t.prototype.showSpinner=function(){this.uiInitialised},t.prototype.hideSpinner=function(){this.uiInitialised},t.prototype.soundToggled=function(){1==Game.soundOn?(Game.soundOn=!1,Game.audioManager.soundOff(),this.removeButton(this.soundOffButton),this.addUIButton(this.soundOnButton,!0,!0)):0==Game.soundOn&&(Game.soundOn=!0,Game.audioManager.soundOn(),this.removeButton(this.soundOnButton),this.addUIButton(this.soundOffButton,!0,!0)),this.uiContainer.addChild(this.clickEffect)},t.prototype.killTween=function(t){return t&&(t.kill(),t=null),t},t.prototype.exitGame=function(){Game.trace("exit url is..",window.og),window.og&&window.og.exitGameUrl&&window.open(window.og.exitGameUrl,"_self")},t}(),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},UIButton=function(t){function e(){t.call(this),this.disabled=!1,this.animateEffect=!0}return __extends(e,t),e.prototype.visuallyPrepareButton=function(t){this.buttonContainer=this.getContainer("button-container"),this.buttonContainer.getSprite("icon")&&(this.icon=this.buttonContainer.getSprite("icon"),this.icon.setRegPoint(.5,.5)),this.bg=this.buttonContainer.getSprite("bg"),this.bg.setRegPoint(.5,.5),this.highlight=this.buttonContainer.getSprite("highlight"),this.highlight.setRegPoint(.5,.5),this.highlight.alpha=0,this.highlight.blendMode=PIXI.BLEND_MODES.ADD,this.whiteout=this.buttonContainer.getSprite("whiteout"),this.whiteout.setRegPoint(.5,.5),this.whiteout.alpha=0},e.prototype.setAsUIButton=function(t){this.buttonContainer=this.getContainer("button-container"),this.ui=t,this.buttonContainer.getSprite("icon")&&(this.icon=this.buttonContainer.getSprite("icon"),this.icon.setRegPoint(.5,.5),this.icon.interactive=!0),this.bg=this.buttonContainer.getSprite("bg"),this.bg.setRegPoint(.5,.5),this.highlight.interactive=!1,this.interactive=!0,this.buttonMode=!0},e.prototype.destroy=function(){this.removeAllListeners(),this.buttonContainer=null,this.icon=null,this.highlight=null,this.particles&&this.particles.destroy()},e.prototype.clearInteractions=function(){this.removeAllListeners(),this.buttonMode=!1,this.disabled=!1,this.particles&&this.particles.destroy()},e.prototype.disableButton=function(){this.bg.alpha=.5,this.icon.alpha=.5,this.disabled=!0,this.particles&&this.particles.destroy(),this.buttonMode=!1},e.prototype.enableButton=function(){this.bg.alpha=1,this.icon.alpha=1,this.highlight.alpha=0,this.disabled=!1,this.alpha=1,this.buttonMode=!0},e.prototype.hide=function(){this.alpha=0,this.particles&&this.particles.destroy(),this.clearInteractions()},e.prototype.show=function(){this.alpha=1},e.prototype.buttonInit=function(t,e){if(0==e&&(this.animateEffect=!1),1==t){this.icon&&(this.icon.scale.x=this.icon.scale.y=1),this.highlight.alpha=0,this.buttonContainer.alpha=0,this.initialOnAnimation=this.killTween(this.initialOnAnimation),this.initialOnAnimation=new TimelineMax;var i=Game.getRandom(0,.2),n=new RoughEase({strength:5,points:Game.getRandom(8,12,!0),randomize:!0});this.initialOnAnimation.add(TweenMax.to(this.buttonContainer,.3,{alpha:1,ease:n}),i)}else 0==t&&(this.icon&&(this.icon.scale.x=this.icon.scale.y=1),this.highlight.position.x=this.shadowOrigX,this.highlight.position.y=this.shadowOrigY,this.highlight.scale.x=this.highlight.scale.y=1,0==this.disabled?this.highlight.alpha=1:this.highlight.alpha=.4,this.buttonContainer.alpha=1);this.buttonContainer.scale.x=1,this.buttonContainer.scale.y=1},e.prototype.animatePowerUpActive=function(t){this.icon&&(this.icon.scale.x=this.icon.scale.y=1),this.highlight.position.x=0,this.highlight.position.y=0,this.highlight.scale.x=this.highlight.scale.y=.75,this.highlight.alpha=0,this.buttonContainer.scale.x=0,this.buttonContainer.scale.y=0,this.powerUpPopAnimation=this.killTween(this.powerUpPopAnimation),this.powerUpPopAnimation=new TimelineMax,0==Game.isLowEndIPad&&0==t&&this.powerUpPopAnimation.call(function(){this.popParticles()},null,this,.1),this.icon.scale.x=2,this.icon.scale.y=2.5,this.powerUpPopAnimation.add(TweenMax.to(this.buttonContainer.scale,1,{x:1,y:1,ease:Elastic.easeOut}),0),this.powerUpPopAnimation.add(TweenMax.to(this.icon.scale,1,{x:1,y:1,ease:Elastic.easeOut}),.1)},e.prototype.popParticles=function(){},e.prototype.killParticles=function(){this.particles&&this.particles.destroy()},e.prototype.killTween=function(t){return t&&(t.kill(),t=null),t},e}(DisplayObjectContainer),Game=function(){function t(e,i,n,o,a,s,r,h,l){this.lastOrientationCorrect=!1,this.initLoaded=!1,this.scenes={},this.pixiInitialalised=!1,this.paused=!1,this.initialOrientationStatTaken=!1,this.iOSScrollMode=!1,this.allowScrollOverlay=!1,this.miniGameID="none",this.getURLValue=function(t){var e=!1;return window.location.href.indexOf(t)>-1&&(e=!0),e},t.basePath=e,t.ieVer=a,t.coreData=new CoreData(this),t.assetChunkManager=new AssetChunkManager(this),t.stringsManager=new StringsManager(this),this.xmlManager=new XMLManager(this),this.powerUpManager=new PowerUpManager(this),t.holderDiv=document.getElementById(i),this.parentalApprovalImageSubmit=!1,this.voActive=!0,this.useGameLogos=!0,0==h&&(this.gameLaunchMode=3,t.assetChunkManager.setCurrentGameLaunchMode(this.gameLaunchMode)),l&&(this.miniGameID=l),t.useFilters=!1,this.trackingEventsManager=new TrackingEventsManager(this),t.localStorageManager=new LocalStorageManager(this),this.visualAssets=n,this.audioAssets=o,this.scenes=new Array,this.initialised=!1,this.xmlFilesLoaded=0,this.xmlFilesRequiredToLoad=0,this.useRetinaAssests=s,this.deeplinkConfigURL=r,1==this.useRetinaAssests?(this.pixelRatio=Math.round(window.devicePixelRatio),this.pixelRatio>2&&(this.pixelRatio=1)):this.pixelRatio=1,t.assetResolutionPath="@"+String(this.pixelRatio)+"x/",window.doobStats&&this.startStats(0)}return t.prototype.initialise=function(e,i,n,o,a){this.setViewportTag(),this.initialAssets=a,t.assetChunkManager.storeInitialAssets(this.initialAssets),t.onDesktop=this.isDesktop(),t.isLowEndIPad=this.isLowEndIPad(),this.frameCounter=0,this.frameCounterLimit=1,1==t.isLowEndIPad&&(this.frameCounterLimit=2),this.mobileDetect=new MobileDetect(window.navigator.userAgent),this.fileInputDiv=document.getElementById("file-input"),0==t.onDesktop&&(this.addMobileCSS(),"iPhone"==this.mobileDetect.phone()&&"iOS"==this.mobileDetect.os()&&(t.oniPhone=!0),"AndroidOS"==this.mobileDetect.os()&&(t.onAndroid=!0)),this.webAudio=this.isWebAudio(),t.displayStore=new DisplayStore(this),t.gameWidth=e,t.gameHeight=i,t.fps=o,t.bodyElement=document.getElementsByTagName("body")[0],this.rotateOverlay=document.getElementById("rotate-overlay"),this.scrollOverlay=document.getElementById("scroll-overlay"),this.scrollOverlay.style.position="absolute",this.scrollOverlay.style.left="0px",this.nickFormDiv=document.getElementById("nick-form"),this.nickBlankFormDiv=document.getElementById("nick-form-blank"),this.parentalApprovalDiv=document.getElementById("parental-approval-page"),this.uploadFaceDiv=document.getElementById("upload-face-page"),this.gameHolderDivList=new Array,this.gameHolderDivList.push(t.holderDiv),this.gameHolderDivList.push(this.parentalApprovalDiv),this.gameHolderDivList.push(this.uploadFaceDiv),this.targetOrientation=n,this.loadModule=new LoadModule(this),this.touchEnabled=!1,t.audioManager=new AudioManagerMk2(this,t.onDesktop,this.webAudio),this.ui=new UI(this);var s=this.mobileDetect.mobile(),r=this.mobileDetect.os();null==s&&(s="desktop"),null==r&&(r="desktop"),this.xmlFilesRequiredToLoad=2,this.loadXML(this,"config"),this.stopScrollWheelOnGame()},t.prototype.loadXML=function(t,e){var t=this,i=new PIXI.loaders.Loader;i.add("config","config.xml"),i.add("localization","localization.xml"),i.load(function(e,i){t.handleXMLLoad(e,t)})},t.prototype.handleXMLLoad=function(t,e){for(var i in t.resources)e.xmlHandler(e,t.resources[i].data,i)},t.prototype.xmlHandler=function(t,e,i){var e=e;t.xmlManager.parseXML(e,i),t.xmlFilesLoaded++,t.xmlFilesLoaded==t.xmlFilesRequiredToLoad&&t.allXMLLoaded(t)},t.prototype.allXMLLoaded=function(t){t.checkOrientation(!1,t)},t.prototype.addRenderer=function(t){0==t.pixiInitialalised&&(t.pixiInitialalised=!0,t.addPixiRenderer())},t.prototype.setLanguageCode=function(e){t.loc=e},t.prototype.getCurrentLanguageCode=function(){return t.loc},t.prototype.setUseLogos=function(t){console.log("use logos..",t),this.useGameLogos=t},t.prototype.getUseLogos=function(){return this.useGameLogos},t.prototype.setAlphabet=function(e){t.alphabet=e},t.prototype.init=function(e){e.initPIXI(),e.startGameLoop(e),e.addRenderer(e),e.loadAssets(t.assetChunkManager.getLoadAssets(),!0,function(){e.ui.initUI(),e.setRotateOverlayBG(),e.setScrollMode(),e.setScene(t.assetChunkManager.getTargetInitialScene(),!1),e.initLoaded=!0})},t.prototype.setLaunchMode=function(e){this.gameLaunchMode=e,t.assetChunkManager.setCurrentGameLaunchMode(e)},t.prototype.adjustInputCSS=function(t,e){var i=e/10,n=String(i)+"px",o=t,a=(String(o),t/10*8),s=(String(a),t/10*1),i=(String(s),e/10),n=String(i)+"px",r=e/4;String(r);if(this.fileInputDiv.style.lineHeight=n,this.fileInputDiv.style.width=String(t/4)+"px",this.fileInputDiv.style.fontSize="5vw",this.fileInputDiv.style.lineHeight="10vh",i>80)String(80),String(40);if(t<1500)String(39);if(e>t){var i=10,n=String(i)+"px";this.fileInputDiv.style.fontSize=" 2vw",this.fileInputDiv.style.lineHeight="5vh"}},t.prototype.setScrollMode=function(){if(0==t.onDesktop&&1==t.oniPhone&&1==this.allowScrollOverlay){var e=t.displayStore.getSprite("scroll-bg");this.scrollOverlay.style.backgroundImage="url('"+e.textureURL+"')",document.addEventListener("touchstart",function(t){});var i=this;document.addEventListener("touchmove",function(t){0==i.iOSScrollMode&&t.preventDefault&&t.preventDefault()})}},t.prototype.addMobileCSS=function(){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",t.basePath+"styles/mobile.css"),document.getElementsByTagName("head")[0].appendChild(e)},t.prototype.setRotateOverlayBG=function(){var e=t.displayStore.getSprite("wrong-orientation-bg");this.rotateOverlay.style.backgroundImage="url('"+e.textureURL+"')"},t.prototype.checkOrientation=function(e,i){var n=i;n.initialised=e;var o=n.detectBrowserViewport().w,a=n.detectBrowserViewport().h;if(t.onDesktop)0==n.initialised?(n.gameInit(),n.initialised=!0):n.checkResize(o,a);else{o<a?n.currentOrientation="portrait":a<o&&o>400&&(n.currentOrientation="landscape"),0==n.initialOrientationStatTaken&&(n.initialOrientationStatTaken=!0);var s;n.currentOrientation!=n.targetOrientation?s=!1:n.currentOrientation==n.targetOrientation&&(s=!0),"any"==n.targetOrientation&&(s=!0),0==n.initialised&&0==s?n.applyRotateOverlay(!0,o,a):0==n.initialised&&1==s?(n.gameInit(),n.initialised=!0):1==n.initialised&&0==s?n.orientGame(o,a):1==n.initialised&&1==s&&(n.orientGame(o,a),n.checkResize(o,a))}setTimeout(function(){n.checkOrientation(n.initialised,n)},500)},t.prototype.orientGame=function(t,e){var i=!1;this.targetOrientation!=this.currentOrientation&&"landscape"!=this.currentOrientation||(i=!0),this.lastOrientationCorrect!=i&&(this.lastOrientationCorrect=i,i?(this.applyRotateOverlay(!1,t,e),this.correctOrientation=!0):(this.applyRotateOverlay(!0,t,e),this.correctOrientation=!1))},t.prototype.applyRotateOverlay=function(e,i,n){if("any"==this.targetOrientation)return t.holderDiv.className="active","portrait"==this.currentOrientation&&this.setScrollOverlay(!1,0),void this.centerGameOnScreen();if(1==e){if(this.rotateOverlay.className="active",t.holderDiv.removeAttribute("class"),this.rotateOverlay.style.width=i+"px",this.rotateOverlay.style.height=n+"px",this.setScrollOverlay(!1,i),0==this.initialised)return}else if(0==e){if(this.rotateOverlay.removeAttribute("class"),t.holderDiv.className="active",0==this.initialised)return;this.centerGameOnScreen()}},t.prototype.setScrollOverlay=function(e,i){0==e?(this.scrollOverlay.removeAttribute("class"),this.scrollOverlay.style.height="100px",t.holderDiv.style.top="0px",t.holderDiv.className="active",this.centerGameOnScreen()):1==e&&(this.scrollOverlay.className="active",t.holderDiv.removeAttribute("class"),this.scrollOverlay.style.height="9999999999999999px",this.scrollOverlay.style.width=String(i)+"px",window.scrollTo(0,0))},t.prototype.checkResize=function(e,i){if(e!=this.lastViewportWidth||i!=this.lastViewportHeight){if(1==t.oniPhone&&"landscape"==this.currentOrientation&&1==this.allowScrollOverlay){this.iOSScrollMode=!0;for(var n=[[320,480],[320,568],[375,667],[414,736]],o=0;o<n.length;o++){var a=n[o],s=(window.screen.height==a[0]&&window.screen.width==a[1]||window.screen.width==a[0]&&(window.screen.height,a[1]),a[0]);window.innerHeight==s&&(this.iOSScrollMode=!1)}this.setScrollOverlay(this.iOSScrollMode,e)}this.centerGameOnScreen()}this.lastViewportWidth=e,this.lastViewportHeight=i},t.prototype.gameInit=function(){if(this.resizeGameDivs(t.gameWidth+"px",t.gameHeight+"px"),t.stageWidth=t.gameWidth,t.stageHeight=t.gameHeight,3==this.gameLaunchMode)return this.targetGameString=this.miniGameID,t.assetChunkManager.setCurrentGameLaunchMode(this.gameLaunchMode),t.assetChunkManager.setCurrentGameId(this.targetGameString),t.assetChunkManager.generateLoadChunkParams("hub"),void this.beginGameInit(this);var e=this,i=new PIXI.loaders.Loader;i.add(this.deeplinkConfigURL),i.once("complete",function(t){e.parseDeepLinkJSON(e,t.resources[e.deeplinkConfigURL].data.games[0])}),i.load()},t.prototype.parseDeepLinkJSON=function(e,i){for(var n in i){var o="\\b";if(o+=e.escapeRegExp(i[n]),o+="\\b",1==new RegExp(o,"i").test(window.location.href)){e.targetGameString=n;break}}var a;a=void 0==e.targetGameString?1:2,e.gameLaunchMode=a,t.assetChunkManager.setCurrentGameLaunchMode(a),t.assetChunkManager.setCurrentGameId(e.targetGameString),t.assetChunkManager.generateLoadChunkParams("hub"),e.beginGameInit(e)},t.prototype.beginGameInit=function(t){t.initAudio(t.loadModule),t.init(t),"any"==t.targetOrientation?t.applyRotateOverlay(!1,0,0):t.centerGameOnScreen()},t.prototype.centerGameOnScreen=function(){var e=this.detectBrowserViewport().w,i=this.detectBrowserViewport().h;this.scaleStage(e,i);var n=.5*(e-this.currentStageWidth),o=.5*(i-this.currentStageHeight);this.positionGameDivs(n+"px",o+"px"),t.gameOffset=this.getGameOffset(t.holderDiv),t.onAndroid},t.prototype.scaleStage=function(e,i){var n=i/e,o=t.gameHeight/t.gameWidth;n<o?(t.windowScaleFactor=i/t.gameHeight,this.currentStageWidth=i/o,this.currentStageHeight=i):(t.windowScaleFactor=e/t.gameWidth,this.currentStageWidth=e,this.currentStageHeight=e*o),this.resizeGameDivs(String(this.currentStageWidth),String(this.currentStageHeight+1)),this.resizePixiCanvas(this.currentStageWidth,this.currentStageHeight),this.adjustInputCSS(this.currentStageWidth,this.currentStageHeight)},t.prototype.resizeGameDivs=function(t,e){for(var i=0;i<this.gameHolderDivList.length;i++)this.gameHolderDivList[i].style.width=t+"px",this.gameHolderDivList[i].style.height=e+"px"},t.prototype.positionGameDivs=function(t,e){for(var i=0;i<this.gameHolderDivList.length;i++)this.gameHolderDivList[i].style.position="absolute",this.gameHolderDivList[i].style.top=e,this.gameHolderDivList[i].style.left=t},t.prototype.resizePixiCanvas=function(e,i){t.renderer&&t.renderer.resize(e,i);for(var n in this.scenes)this.scenes[n].resize(t.windowScaleFactor);this.ui&&this.ui.resize(t.windowScaleFactor)},t.prototype.addScene=function(t){var e=new t(this);this.scenes[e.id]=e},t.prototype.setLoadingScreen=function(t){this.currentLoadingScene=this.scenes[t]},t.prototype.setScene=function(e,i,n){void 0===i&&(i=!1);var o=0;1==i&&(o=.4,t.playSound("transition")),this.scenes[e]?(this.currentScene&&(this.currentScene.interactionLocked=!0,this.currentScene.interactive=!1,o>0&&this.currentScene.initTransitionOut(o)),o>0?this.setSceneDelay=TweenMax.delayedCall(o,this.initSceneSwap,[this,o,e,n]):this.initSceneSwap(this,o,e,n)):t.trace("Can't find scene!"+e)},t.prototype.initSceneSwap=function(e,i,n,o){e.currentScene&&0==e.currentScene.paused&&(e.currentScene.destroy(),e.currentScene.render=!1),e.currentScene=e.scenes[n],e.currentScene.addUI(e.ui.uiContainer,e.ui.uiMessageContainer),e.ui.resize(t.windowScaleFactor),e.currentScene&&0==e.currentScene.paused?(e.currentScene.init(o),e.currentScene.initTransitionIn(i)):e.currentScene&&1==e.currentScene.paused&&(e.currentScene.interactionLocked=!1,e.currentScene.restore())},t.prototype.startStats=function(t){this.stats=new Stats,this.stats.setMode(t),this.stats.domElement.style.position="absolute",this.stats.domElement.style.right="0px",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement)},t.prototype.initPIXI=function(){1==t.onDesktop?t.renderer=PIXI.autoDetectRenderer(t.stageWidth,t.stageHeight,{autoResize:!0,resolution:this.pixelRatio}):0==t.onDesktop&&(t.renderer=PIXI.autoDetectRenderer(t.stageWidth,t.stageHeight,{autoResize:!0,legacy:!0,resolution:this.pixelRatio})),t.renderer instanceof PIXI.CanvasRenderer?t.webGL=!1:t.webGL=!0,1==t.webGL&&1==t.onDesktop&&(t.useFilters=!0)},t.prototype.addPixiRenderer=function(){t.holderDiv.appendChild(t.renderer.view)},t.prototype.startGameLoop=function(t){this.ticker=new PIXI.ticker.Ticker,this.ticker.speed=1,this.ticker.deltaTime=1,this.ticker.add(t.loopFuncRef=function(){t.tick(t)}),this.ticker.start()},t.prototype.loadAssets=function(t,e,i,n){if(this.loadModule.reset(e),1!=e||n){var o;1==e&&1==n&&(1==this.ui.uiInitialised?(o=1,this.setScene(this.currentLoadingScene.id,!1)):(o=.2,this.setScene(this.currentLoadingScene.id,!1)));for(var a=0;a<t.length;a++){for(var s in this.visualAssets)s!=t[a]||this.loadModule.prepareLoad(t[a],this.visualAssets[s],"visual",e);for(var s in this.audioAssets)s!=t[a]||this.loadModule.prepareLoad(t[a],this.audioAssets[s],"audio",e)}var r=this;this.callbackDelay=this.killDelay(this.callbackDelay),this.callbackDelay=TweenMax.delayedCall(o,function(){r.loadModule.load(i)})}else this.loadPreloaderAssets(this,t,i)},t.prototype.killDelay=function(t){return t&&(t.kill(),t=null),t},t.prototype.loadPreloaderAssets=function(t,e,i){t.loadAssets(t.currentLoadingScene.getPreloaderAssetList(),!1,function(){t.loadAssets(e,!0,i,!0)},!0)},t.prototype.tick=function(e){if(1!=e.paused){var i=e;i.stats&&(i.stats.begin(),t.FPS=i.stats.getFPS()),i.currentScene&&(1==i.currentScene.render?t.renderer.render(i.currentScene):0==i.currentScene.render&&(i.currentScene.render=!0),i.currentScene.tick()),i.ui&&i.ui.tick(),i.stats&&i.stats.end()}},t.openLink=function(t,e){1==e?window.open(t,"_blank"):window.open(t)},t.trace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e]},t.saveProgress=function(){t.localStorageManager.saveProgress()},t.restoreProgress=function(){t.localStorageManager.restoreProgress()},t.prototype.setLocalStorageEnabled=function(e){t.localStorageManager.setLocalStorageEnabled(e)},t.prototype.initAudio=function(e){t.audioManager.initAudio(e)},t.prototype.setVOActive=function(t){this.voActive=t},t.prototype.getVOActive=function(){return this.voActive},t.playSound=function(e,i,n){t.audioManager.playSound(e,t.audioManager,i,n)},t.getSoundDuration=function(e){return t.audioManager.getSoundDuration(e,t.audioManager)},t.stopSound=function(e){t.audioManager.stopSound(e,t.audioManager)},t.fadeSound=function(e,i,n){t.audioManager.fadeSound(e,i,n,t.audioManager)},t.setSoundVolume=function(e,i){t.audioManager.setVolume(e,i)},t.stopCurrentInterruptableSound=function(){TweenMax.killDelayedCallsTo(t.playSound),t.audioManager.stopCurrentInterruptableSound()},t.pauseSound=function(e){t.audioManager.pauseSound(e,t.audioManager)},t.resumeSound=function(e){t.audioManager.resumeSound(e,t.audioManager)},t.prototype.launchIntoFullscreen=function(t){t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},t.prototype.detectBrowserViewport=function(){var t=window.innerWidth,e=window.innerHeight;return void 0!==window.innerWidth?(t=window.innerWidth,e=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):(t=720,e=480),{w:t,h:e}},t.prototype.isLowEndIPad=function(){var t=window.navigator.userAgent.toLowerCase();if(-1!=t.indexOf("ipod")||-1!=t.indexOf("iphone")||-1!=t.indexOf("ipad")){var e=window.screen.width*window.devicePixelRatio,i=window.screen.height*window.devicePixelRatio;if(1024==e&&768==i||768==e&&1024==i)return!0}return!1},t.prototype.isDesktop=function(){if(window.forceMobile)return!1;return 0!=window.screenX||!("ontouchstart"in window||"onmsgesturechange"in window)},t.prototype.isWebAudio=function(){var t=!0;return"undefined"!=typeof AudioContext?new AudioContext:void 0!==window.webkitAudioContext?new window.webkitAudioContext:t=!1,t},t.prototype.stopScrollWheelOnGame=function(){t.holderDiv.onwheel=function(t){t.preventDefault()},t.holderDiv.onmousewheel=function(t){t.preventDefault()}},t.prototype.setViewportTag=function(){if(!t.onDesktop)document.querySelector("meta[name=viewport]")},t.getRandom=function(t,e,i){var n=t+Math.random()*(e-t);return 1==i&&(n=Math.round(n)),n},t.prototype.getGameOffset=function(t){var e=0,i=0;if(t.offsetParent)do{e+=t.offsetLeft,i+=t.offsetTop}while(t=t.offsetParent);return{x:e,y:i}},t.prototype.escapeRegExp=function(t){return t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},t.windowScaleFactor=1,t.onAndroid=!1,t.oniPhone=!1,t.isLowEndIPad=!1,t.onDesktop=!1,t.numberOfSoundsToPreload=0,t.numberOfAssetsToPreload=0,t.numberOfAssetsLoaded=0,t.soundOn=!0,t}(),AudioManagerMk2=function(){function t(t,e,i){this.failedLoadFlash=!1,this.initialised=!1,this.soundLoadedCallback=function(){},this.flashTimeoutCall=function(){},this.game=t,this.onDesktop=e,this.webAudio=i,this.audioPath="",this.flashModeReady=!1,this.soundLoadAttempted=!1,this.sounds=new Array}return t.prototype.initAudio=function(t){if(this.loadModule=t,void 0!=this.forceMode)return this.force(this.forceMode),void(this.initialised=!0);1==this.onDesktop&&void 0!=Game.ieVer?(this.mode=1,this.flashModeReady=!1,this.initSoundManager()):this.initHowler(this.webAudio),this.initialised=!0},t.prototype.addSoundSpriteSound=function(t,e,i){Game.trace("add sprite!!!!",e,i),this.sounds.push({group:t,id:e,times:i})},t.prototype.addSound=function(t,e){if(0!=this.game.getVOActive()||1!=e.loc){this.loadModule.assetsToLoad++,this.currentAssetLoc="sfx",1==e.loc&&(this.currentAssetLoc="vo/"+Game.loc);var i;i=1==e.loop,e.duration||(e.duration=-1),this.sounds.push({group:t,id:e.url,url:e.url,duration:e.duration,volume:1,loop:i,urlPrefix:this.currentAssetLoc,setToLoad:!1,currentlyPaused:!1})}},t.prototype.initHowler=function(t,e){var i=!1;e&&(i=e),(1==t||1==t&&1==i&&0==this.forceMode)&&(this.mode=0,this.assetID="sounds")},t.prototype.initSoundManager=function(){this.assetID="sounds";var t=this;soundManager=new SoundManager,soundManager.setup({url:Game.basePath+"media/swf/",flashVersion:9,preferFlash:!0,debugMode:!1,useHighPerformance:!0,onready:function(){0==t.flashModeReady&&(t.flashModeReady=!0,1==t.soundLoadAttempted&&t.loadSounds()),t=null},ontimeout:function(){t.failedLoadFlash=!0,t.flashTimeoutCall()}}),soundManager.beginDelayedInit()},t.prototype.setLoadCallback=function(t){this.soundLoadedCallback=t},t.prototype.setFlashTimeout=function(t){this.flashTimeoutCall=t},t.prototype.loadSounds=function(){if(0==this.soundLoadAttempted&&(this.soundLoadAttempted=!0),0!=this.flashModeReady||1!=this.mode)for(var t=this,e=0;e<this.sounds.length;e++){var i,n=this.sounds[e];if(1!=n.setToLoad)if(n.setToLoad=!0,0==this.mode)i=new Howl({src:[Game.basePath+"media/audio/"+n.urlPrefix+"/mp3/"+n.url+".mp3",Game.basePath+"media/audio/"+n.urlPrefix+"/ogg/"+n.url+".ogg"],autoplay:!1,loop:n.loop,onload:function(){t.soundLoadedCallback()}}),n.howlSound=i;else if(1==this.mode){if(soundManager.getSoundById(n.id,!0)){t.soundLoadedCallback();continue}soundManager.createSound({id:n.id,url:Game.basePath+"media/audio/"+n.urlPrefix+"/mp3/"+n.url+".mp3",autoLoad:!0,autoPlay:!1,onload:function(){t.soundLoadedCallback()}})}}},t.prototype.playSound=function(t,e,i,n){1!=e.failedLoadFlash&&(n&&1==n&&(this.currentInterruptableSound=t),i&&e.setVolume(t,i),e.startSound(t))},t.prototype.fadeSound=function(t,e,i,n){n.fadeTheSound(t,e,i,n)},t.prototype.getSoundDuration=function(t,e){var i=e.getSoundByID(t);return i&&i.duration?i.duration:-1},t.prototype.startSound=function(t){var e=this.getSoundByID(t);void 0!=e&&e.id==t&&(0==this.mode?e.howlSound&&e.howlSound.play():1==this.mode&&this.soundManagerPlayLoop(t,e.loop))},t.prototype.setVolume=function(t,e){var i=this.getSoundByID(t);void 0!=i&&(0==this.mode&&i.howlSound.volume(e),1==this.mode&&soundManager.setVolume(t,100*e))},t.prototype.fadeTheSound=function(t,e,i,n){var o=n.getSoundByID(t);if(void 0!=o&&o.id==t)if(0==n.mode)o.howlSound&&o.howlSound.fade(o.howlSound._volume,i,1e3*e);else if(1==n.mode){var a={vol:1};TweenMax.to(a,e,{vol:i,onUpdate:function(){soundManager.setVolume(t,100*a.vol)},onComplete:function(){0==i&&soundManager.stop(t)}})}},t.prototype.soundManagerPlayLoop=function(t,e){var i=this;soundManager.play(t,{onfinish:function(){1==e&&i.soundManagerPlayLoop(t,e)}})},t.prototype.pauseSound=function(t,e){var i=e.getSoundByID(t);1==e.failedLoadFlash&&1==e.mode||void 0!=i&&(i.id!=t||(0==e.mode?i.howlSound&&1==i.howlSound.playing()&&(i.currentlyPaused=!0,i.howlSound.pause()):1==e.mode&&(i.currentlyPaused=!0,soundManager.pause(t))))},t.prototype.resumeSound=function(t,e){var i=e.getSoundByID(t);if(void 0!=i&&(1!=e.failedLoadFlash||1!=e.mode))return i.id==t&&1==i.currentlyPaused?(i.currentlyPaused=!1,void(0==e.mode?i.howlSound&&i.howlSound.play():1==e.mode&&soundManager.resume(t))):void 0},t.prototype.stopSound=function(t,e){var i=e.getSoundByID(t);1!=e.failedLoadFlash&&void 0!=i&&i.id==t&&(0==e.mode?i.howlSound&&(Game.trace("stopping sound",i,i.howlSound,i.howlerID),i.howlSound.stop()):1==e.mode&&soundManager.stop(t))},t.prototype.stopCurrentInterruptableSound=function(){this.currentInterruptableSound&&this.stopSound(this.currentInterruptableSound,this)},t.prototype.flush=function(t){if(Game.trace("Flushing audio system!",t,this.mode),0==this.mode)for(e=this.sounds.length-1;e>=0;e--){if((i=this.sounds[e]).group==t){if(0==this.checkSoundFlushable(t,i.id)){this.sounds.splice(e,1);continue}(n=this.sounds.splice(e,1))[0].howlSound.stop(),n[0].howlSound.unload(),n[0]=null,n=null}i=null}else if(1==this.mode&&this.sounds)for(var e=this.sounds.length-1;e>=0;e--){var i=this.sounds[e];if(i.group==t){if(0==this.checkSoundFlushable(t,i.id)){n=this.sounds.splice(e,1);soundManager.stop(n[0].id),n=null;continue}var n=this.sounds.splice(e,1);soundManager.stop(n[0].id),soundManager.destroySound(n[0].id),n[0]=null,n=null}i=null}},t.prototype.checkSoundFlushable=function(t,e){for(var i=!0,n=this.sounds.length-1;n>=0;n--){var o=this.sounds[n];o.group!=t&&o.id==e&&(i=!1)}return i},t.prototype.soundOn=function(){0==this.mode?Howler.mute(!1):1==this.mode&&soundManager.unmute()},t.prototype.soundOff=function(){0==this.mode?Howler.mute(!0):1==this.mode&&soundManager.mute()},t.prototype.getSoundByID=function(t){for(var e=0;e<this.sounds.length;e++){var i=this.sounds[e];if(t==i.id)return i}},t.prototype.listGroupsLoaded=function(){for(var t=new Array,e=0;e<this.sounds.length;e++)0==this.checkExists(this.sounds[e].group,t)&&t.push(this.sounds[e].group);for(e=0;e<t.length;e++)Game.trace("Members of this group are loaded: ",t[e])},t.prototype.listAssetsLoaded=function(){for(var t=0;t<this.sounds.length;t++)Game.trace("Asset loaded: ",this.sounds[t].id," - From group: ",this.sounds[t].group)},t.prototype.checkExists=function(t,e){var i=!1;if(0==e.length)return i;for(var n=0;n<e.length;n++)e[n]==t&&(i=!0);return i},t.prototype.force=function(t){this.assetID="sounds";var e;1==t?(e="SOUND MANAGER - FLASH MODE!",this.mode=1,this.initSoundManager()):0==t&&(e="HOWLER - NORMAL MODE!",this.mode=0,this.initHowler(!0,!0)),console.log(":::::::::::::::::::::::::::: FORCE AUDIO DEBUG MODE - "+this.forceMode+" => "+e)},t}(),LoadModule=function(){function t(t){this.firstLoadComplete=!1,this.game=t,this.lastLoadGroup=null}return t.prototype.prepareLoad=function(t,e,i,n,o){if(this.currentType=i,this.preloadCurrent=n,this.lastLoadGroup!=t){this.neverFlushCurrent=!1;for(a=0;a<e.length;a++)1!=e[a].neverFlush||(this.neverFlushCurrent=!0)}this.lastLoadGroup=t;if("visual"==this.currentType)for(a=0;a<e.length;a++){if(this.itemPoolNumber=0,e[a].pool&&(this.itemPoolNumber=e[a].pool),o&&0!=this.itemPoolNumber)throw new ReferenceError('Ooops! You can only set "pool" attribute on elements at root level of Visual Assets manifest..');this.createVisualAsset(a,t,e[a],this.itemPoolNumber,e,o,this.neverFlushCurrent)}else if("audio"==this.currentType)for(var a=0;a<e.length;a++)e[a].url&&Game.audioManager.addSound(t,e[a])},t.prototype.createVisualAsset=function(t,e,i,n,o,a,s){if(i.platformspecific){if("desktop"==i.platformspecific&&0==Game.onDesktop)return;if("mobile"==i.platformspecific&&1==Game.onDesktop)return}if("bitmaptext"==i.type){if(i.alphabet&&i.alphabet!=Game.alphabet)return;this.createSpriteOrSpine(t,e,i,n,a,s)}if("spritesheet"==i.type&&this.createSpriteOrSpine(t,e,i,n,a,s),i.url){if("misc"==i.type)return void this.loadMiscFileType(i);this.createSpriteOrSpine(t,e,i,n,a,s)}else if(i.children){var r=0,h=!1,l=i.id;n>0&&(r=n-1,h=!0);for(var p=0;p<=r;p++){l=String(l+p);var c,d=i.children;if("button"==i.type?c=new UIButton:((c=new DisplayObjectContainer).pooled=h,c.pooledUniqueID=l),c.group=e,c.id=i.id,c.neverFlush=s,i.anchor){var u=!1;i.anchor[2]&&(u=i.anchor[2]),c.setRegPoint(i.anchor[0],i.anchor[1],u),c.origPivot={x:i.anchor[0],y:i.anchor[1],compensate:u},c.defaultPivot=!1}i.x&&(c.origX=i.x,c.position.x=c.origX),i.y&&(c.origY=i.y,c.position.y=c.origY),a?a.addChild(c):"button"==i.type?Game.displayStore.addButton(c):Game.displayStore.addContainer(c),this.prepareLoad(e,d,this.currentType,this.preloadCurrent,c)}}},t.prototype.loadMiscFileType=function(t){var e=Game.basePath;this.assetsPreparedForLoad.push({type:t.type,path:e,url:t.url})},t.prototype.createSpriteOrSpine=function(t,e,i,n,o,a){this.currentAssetLoc="base/",this.currentSpineFolder="",this.currentSpritesheetFolder="",this.currentAssetResPath=Game.assetResolutionPath;var s="sprite",r=this.game.pixelRatio;void 0!=i.retina&&0==i.retina&&(this.currentAssetResPath="@1x/",r=1),0==this.game.useRetinaAssests&&(this.currentAssetResPath="@1x/",r=1),1==i.loc&&(this.currentAssetLoc="localized/"+Game.loc+"/"),"spine"==i.type&&(this.currentSpineFolder=i.dir+"/"),"spritesheet"==i.type&&(this.currentSpritesheetFolder=i.dir+"/"),"bitmaptext"==i.type&&(this.currentBitmapFontFolder=i.dir+"/"),i.type&&(s=i.type);var h;h="spine"==s?Game.basePath+"media/images/"+this.currentAssetResPath+this.currentAssetLoc+this.currentSpineFolder:"spritesheet"==s?Game.basePath+"media/images/"+this.currentAssetResPath+this.currentAssetLoc+this.currentSpritesheetFolder:"bitmaptext"==s?Game.basePath+"media/images/"+this.currentAssetResPath+this.currentAssetLoc+this.currentBitmapFontFolder:Game.basePath+"media/images/"+this.currentAssetResPath+this.currentAssetLoc;var l;l=i.id?i.id:i.url;i.pooledID&&i.pooledID,this.assetsToLoad++,this.assetsPreparedForLoad.push({index:t,type:s,group:e,id:l,pooledNum:n,path:h,url:i.url,dir:i.dir,atlasJSON:i.atlas,skeletonJSON:i.skeleton,container:o,x:i.x,y:i.y,anchor:i.anchor,w:i.w,h:i.h,frames:i.frames,fontname:i.fontname,fontdata:i.fontdata,alphabet:i.alphabet,textureResolution:r,neverFlush:a})},t.prototype.load=function(t){this.loadedCallback=t;for(var e=!1,i=new Array,n=0;n<this.assetsPreparedForLoad.length;n++){"spritesheet"==this.assetsPreparedForLoad[n].type?this.assetsPreparedForLoad[n].loadPath=this.assetsPreparedForLoad[n].path+this.assetsPreparedForLoad[n].atlasJSON:"bitmaptext"==this.assetsPreparedForLoad[n].type?this.assetsPreparedForLoad[n].loadPath=this.assetsPreparedForLoad[n].path+this.assetsPreparedForLoad[n].fontdata:"spine"==this.assetsPreparedForLoad[n].type?(e=!0,this.assetsPreparedForLoad[n].loadPath=this.assetsPreparedForLoad[n].path+this.assetsPreparedForLoad[n].skeletonJSON):this.assetsPreparedForLoad[n].loadPath=this.assetsPreparedForLoad[n].path+this.assetsPreparedForLoad[n].url,i.push(this.assetsPreparedForLoad[n].loadPath)}i.length,(i=this.remove_duplicates(i)).length;for(var o=new PIXI.loaders.Loader,n=0;n<i.length;n++)if(0==e)o.add(String(i[n]),i[n]);else{var a={metadata:{spineAtlasSuffix:".txt"}};o.add(String(i[n]),i[n],a)}var s=this;Game.audioManager.setLoadCallback(this.checkLoadedFuncRef=function(){s.assetsLoaded++,s.checkAllAssetsLoaded(s)}),Game.audioManager.setFlashTimeout(this.flashTimeoutFuncRef=function(){}),o.load(this.buildAssetFuncRef=function(t,e){s.buildAssets(t,s)}),Game.audioManager.loadSounds()},t.prototype.buildAssets=function(t,e){for(var i in t.resources)for(var n=0;n<e.assetsPreparedForLoad.length;n++)t.resources[i].url==e.assetsPreparedForLoad[n].loadPath&&e.buildIndividualAsset(e,e.assetsPreparedForLoad[n],t.resources[i])},t.prototype.checkAllAssetsLoaded=function(t){1==t.usePreload&&t.game.currentScene&&t.game.currentScene.onLoadUpdate(t.assetsLoaded,t.assetsToLoad),t.assetsLoaded==t.assetsToLoad&&(t.callbackDelayTweenMax=t.killDelay(t.callbackDelayTweenMax),t.callbackDelayTweenMax=TweenMax.delayedCall(t.callbackDelay,t.loadedCallback))},t.prototype.killDelay=function(t){return t&&(t.kill(),t=null),t},t.prototype.buildIndividualAsset=function(t,e,i){t.assetsLoaded++;var n=0,o=!1,a=e.id;e.pooledNum>0&&(n=e.pooledNum-1,o=!0);for(var s=0;s<=n;s++)switch(a=String(a+s),e.type){case"sprite":var r=i.texture,h=new Sprite(r);h.setTextureResolution(e.textureResolution),h.textureURL=e.path+e.url,h.group=e.group,h.id=e.id,h.neverFlush=e.neverFlush,h.pooled=o,h.pooledUniqueID=a,t.storeBuiltObject(h,e);break;case"bitmaptext":var l,p=80*this.game.pixelRatio;l=new BitmapText("0000",{font:String(p)+"px "+e.fontname,align:"left"});var c;for(var d in i.bitmapFont.chars){c=i.bitmapFont.chars[d].texture.baseTexture.imageUrl;break}l.textureURL=c,l.setXMLBaseTextureRef(i.name+"_image"),l.setTextureResolution(e.textureResolution),l.saveTexture(),l.group=e.group,l.id=e.id,l.fontname=e.fontname,l.pooled=o,l.pooledUniqueID=a,t.storeBuiltObject(l,e);break;case"spritesheet":var u,g;e.path,e.atlasJSON;g=new Array;var m=!1;if(e.frames&&e.frames.length>0&&(m=!0),1==m){for(var f=0;f<e.frames.length;f++)for(var d in i.data.frames)if(e.frames[f]==String(d)){r=PIXI.Texture.fromFrame(String(d));g.push(r)}}else if(0==m)for(var d in i.data.frames){r=PIXI.Texture.fromFrame(String(d));g.push(r)}(u=new AnimatedSprite(g)).setJsonBaseTextureRef(i.name+"_image"),u.textureURL=i.children[0].url,u.setTextureResolution(e.textureResolution),u.group=e.group,u.id=e.id,u.pooled=o,u.pooledUniqueID=a,t.storeBuiltObject(u,e);break;case"spine":var y=new Spine(i.spineData);y.textureURL=e.path+e.url,y.setAtlasTextureRefID(i.name+"_atlas_page_skeleton.png"),y.setTextureResolution(e.textureResolution),y.group=e.group,y.id=e.id,y.pooled=o,y.pooledUniqueID=a,t.storeBuiltObject(y,e)}t.checkAllAssetsLoaded(t)},t.prototype.storeBuiltObject=function(t,e){if(e.x&&(t.origX=e.x,t.position.x=t.origX),e.y&&(t.origY=e.y,t.position.y=t.origY),e.anchor){var i=!1;e.anchor[2]&&(i=e.anchor[2]),t.setRegPoint(e.anchor[0],e.anchor[1],i),t.origAnchor={x:e.anchor[0],y:e.anchor[1],compensate:i},t.defaultAnchor=!1}if(e.w&&(t.width=e.w),e.h&&(t.height=e.h),e.container){var n=e.index;e.container.children.length<e.index&&(n=e.container.children.length),e.container.addChildAt(t,n)}"sprite"==e.type?Game.displayStore.addSprite(t):"spine"==e.type?Game.displayStore.addSpine(t):"spritesheet"==e.type?Game.displayStore.addAnimatedSprite(t):"bitmaptext"==e.type&&Game.displayStore.addBitmapText(t)},t.prototype.reset=function(t){this.assetsToLoad=0,this.assetsLoaded=0,this.usePreload=t,this.loadedCallback=function(){},this.assetsPreparedForLoad=new Array,this.currentType="",this.itemPoolNumber=0,this.callbackDelay=1==t?1:0},t.prototype.remove_duplicates=function(t){for(var e={},i=0;i<t.length;i++)e[t[i]]=!0;t=[];for(var n in e)t.push(n);return t},t}(),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},GameoverScene=function(t){function e(e){t.call(this,e),this.tickUpTime=1.5,this.id="gameoverScene"}return __extends(e,t),e.prototype.init=function(e){t.prototype.init.call(this),this.restartAllowed=!0,this.setBackgroundColor(3355443),this.addingScore=!1,this.scoreSoundTimer=0,this.scoreSoundLimit=3,this.scoreSoundPlaying=!1,this.currentScore=0,console.log(this.scoreNumber),console.log(this.starNumber),this.currentGame=Game.coreData.getCurrentGame().id,this.gameData=Game.coreData.getGameData(this.currentGame),this.scoreNumber=this.gameData[0].lastScore,this.starNumber=this.gameData[0].lastStars,this.game.ui.setUI("mini-game-gameover"),this.colourOverlay=Game.displayStore.getSprite("help/screen-colour-overlay"),this.colourOverlay.width=Game.stageWidth,this.colourOverlay.height=Game.stageHeight,this.colourOverlay.alpha=1,this.colourOverlay.blendMode=PIXI.BLEND_MODES.MULTIPLY,this.container.addChild(this.colourOverlay);var i=0,n=0,o=0;this.gridTiles=new Array;for(var a=0;a<20;a++){var s=Game.displayStore.getSprite("help/screen-overlay-grid-tile-element");s.position.x=s.width*o,s.position.y=s.height*n,s.alpha=.1,s.blendMode=PIXI.BLEND_MODES.ADD,this.gridTiles.push(s),this.container.addChild(s),o++,++i>=6&&(i=0,n++,o=0)}this.mainHolder=Game.displayStore.getContainer("game-over-holder"),this.mainHolder.setRegPointPixels(Game.stageWidth/2,Game.stageHeight/2,!0),this.blueBarsHolder=this.mainHolder.getContainer("blue-bars-holder"),this.blueBars1=Game.displayStore.getSprite("gameover-assets/blue-bars"),this.blueBars2=Game.displayStore.getSprite("gameover-assets/blue-bars"),this.blueBarsHolder.position.x=Game.stageWidth/2,this.blueBarsHolder.position.y=Game.stageHeight/2,this.blueBarsHolder.scale.x=2,this.blueBarsHolder.scale.y=2,this.blueBars2.scale.x=-1,this.blueBars1.blendMode=PIXI.BLEND_MODES.ADD,this.blueBars2.blendMode=PIXI.BLEND_MODES.ADD,this.redLinesHolder=this.mainHolder.getContainer("red-lines-holder"),this.redLines1=Game.displayStore.getSprite("gameover-assets/red-lines"),this.redLines2=Game.displayStore.getSprite("gameover-assets/red-lines"),this.redLines3=Game.displayStore.getSprite("gameover-assets/red-lines"),this.redLines4=Game.displayStore.getSprite("gameover-assets/red-lines"),this.redLinesHolder.position.x=Game.stageWidth/2,this.redLinesHolder.position.y=Game.stageHeight/2,this.redLinesHolder.scale.x=1.6,this.redLinesHolder.scale.y=1.6,this.redLines1.scale.y=-1,this.redLines3.scale.x=-1,this.redLines4.scale.x=-1,this.redLines4.scale.y=-1,this.redLines1.blendMode=PIXI.BLEND_MODES.ADD,this.redLines2.blendMode=PIXI.BLEND_MODES.ADD,this.redLines3.blendMode=PIXI.BLEND_MODES.ADD,this.redLines4.blendMode=PIXI.BLEND_MODES.ADD,this.blackOverlay=this.mainHolder.getSprite("gameover-assets/black-overlay"),this.blackOverlay.setRegPoint(Game.stageWidth/2,Game.stageHeight/2,!0),this.blackOverlay.width=Game.stageWidth+100,this.blackOverlay.height=Game.stageHeight+100,this.star1Holder=this.mainHolder.getContainer("star-1-holder"),this.star2Holder=this.mainHolder.getContainer("star-2-holder"),this.star3Holder=this.mainHolder.getContainer("star-3-holder"),this.star1Back=Game.displayStore.getSprite("gameover-assets/star-back"),this.star2Back=Game.displayStore.getSprite("gameover-assets/star-back"),this.star3Back=Game.displayStore.getSprite("gameover-assets/star-back"),this.star1Front=Game.displayStore.getSprite("gameover-assets/star-front"),this.star2Front=Game.displayStore.getSprite("gameover-assets/star-front"),this.star3Front=Game.displayStore.getSprite("gameover-assets/star-front"),this.star1FrontOverlay=Game.displayStore.getSprite("gameover-assets/star-front-overlay"),this.star2FrontOverlay=Game.displayStore.getSprite("gameover-assets/star-front-overlay"),this.star3FrontOverlay=Game.displayStore.getSprite("gameover-assets/star-front-overlay"),this.star1FrontOverlay.blendMode=PIXI.BLEND_MODES.ADD,this.star2FrontOverlay.blendMode=PIXI.BLEND_MODES.ADD,this.star3FrontOverlay.blendMode=PIXI.BLEND_MODES.ADD,this.star1FrontOverlay.alpha=0,this.star2FrontOverlay.alpha=0,this.star3FrontOverlay.alpha=0,this.star1Front.alpha=0,this.star2Front.alpha=0,this.star3Front.alpha=0,this.star1Holder.position.x=Game.stageWidth/2-170,this.star1Holder.position.y=510,this.star1Holder.scale.x=.8,this.star1Holder.scale.y=.8,this.star2Holder.position.x=Game.stageWidth/2,this.star2Holder.position.y=480,this.star3Holder.position.x=Game.stageWidth/2+170,this.star3Holder.position.y=510,this.star3Holder.scale.x=.8,this.star3Holder.scale.y=.8,this.starParticle1Container=Game.displayStore.getContainer("gameover-assets/star-1-burst-holder");var r={lowerAngle:0,upperAngle:360,lowerVelocity:500,upperVelocity:1500,lowerStartScale:1,upperStartScale:2,lowerEndScale:0,upperEndScale:0,friction:.1,XstartRange:60,YstartRange:20,time:.5,gravity:0,stagger:0,cap:100,endAlpha:0,rotationPower:0,blendMode:PIXI.BLEND_MODES.ADD};switch(this.starBurst1=new ParticleBurst(["gameover-assets/star-burst-particle-1"],this.starParticle1Container,this,r),this.starParticle2Container=Game.displayStore.getContainer("gameover-assets/star-2-burst-holder"),this.starBurst2=new ParticleBurst(["gameover-assets/star-burst-particle-2"],this.starParticle2Container,this,r),this.starParticle3Container=Game.displayStore.getContainer("gameover-assets/star-2-burst-holder"),this.starBurst3=new ParticleBurst(["gameover-assets/star-burst-particle-3"],this.starParticle3Container,this,r),this.star1Holder.addChild(this.star1Back),this.star2Holder.addChild(this.star2Back),this.star3Holder.addChild(this.star3Back),this.screenHolder=this.mainHolder.getContainer("screen-holder"),this.screenHolder.position.x=Game.stageWidth/2,this.screenHolder.position.y=Game.stageHeight/2-20,Game.coreData.getCurrentGame().id){case"come-out-swinging":this.screen=Game.displayStore.getSprite("gameover-assets/screen-come-out-swinging");break;case"mind-the-gap":this.screen=Game.displayStore.getSprite("gameover-assets/screen-mind-the-gap");break;case"photon-fusion":this.screen=Game.displayStore.getSprite("gameover-assets/screen-photon-fusion");break;case"baddie-barrage":this.screen=Game.displayStore.getSprite("gameover-assets/screen-baddie-barrage")}switch(this.screenShadow=this.mainHolder.getSprite("gameover-assets/screen-shadow"),this.screenOverlay=this.mainHolder.getSprite("gameover-assets/screen-overlay"),this.screenOverlay.alpha=.7,this.screenShadow.alpha=.8,this.captainMan=this.mainHolder.getContainer("man-holder"),this.henry=this.mainHolder.getContainer("henry-holder"),this.gameOverTitleHolder=this.mainHolder.getContainer("game-over-title-holder"),this.gameOverTitle=Game.displayStore.getBitmapText("global/pause-font"),Game.stringsManager.setTextString(this.gameOverTitle,"gameover"),this.gameOverTitleHolder.setRegPointPixels(this.gameOverTitle.width/2,this.gameOverTitle.height/2,!0),this.gameOverTitleHolder.position.x=Game.stageWidth/2,this.gameOverTitleHolder.position.y=Game.stageHeight/4-120,this.gameOverTitleHolder.addChild(this.gameOverTitle),this.gameOverScoreHolder=this.mainHolder.getContainer("game-over-score-holder"),this.gameOverScore=Game.displayStore.getBitmapText("game-over/game-over-score-font"),Game.stringsManager.setTextString(this.gameOverScore,"gameover-score"),this.gameOverScoreHolder.setRegPointPixels(this.gameOverScore.width/2,this.gameOverScore.height/2,!0),this.gameOverScoreHolder.position.y=Game.stageHeight/4-55,this.gameOverScoreHolder.position.x=Game.stageWidth/2,this.score=Game.displayStore.getBitmapText("game-over/game-over-score"),this.score.text="0",this.score.position.y=Game.stageHeight/4,this.score.position.x=Game.stageWidth/2-this.score.width/2,this.gameOverScoreHolder.addChild(this.gameOverScore),this.container.addChild(this.mainHolder),this.mainHolder.addChild(this.blueBarsHolder),this.blueBarsHolder.addChild(this.blueBars1),this.blueBarsHolder.addChild(this.blueBars2),this.mainHolder.addChild(this.redLinesHolder),this.redLinesHolder.addChild(this.redLines1),this.redLinesHolder.addChild(this.redLines2),this.redLinesHolder.addChild(this.redLines3),this.redLinesHolder.addChild(this.redLines4),console.log("what is screne holder...",this.screenHolder,this.screen),this.mainHolder.addChild(this.screenHolder),this.screenHolder.addChild(this.screen),this.screenHolder.addChild(this.captainMan),this.screenHolder.addChild(this.henry),this.screenHolder.addChild(this.screenOverlay),this.screenHolder.addChild(this.screenShadow),this.mainHolder.addChild(this.star1Holder),this.mainHolder.addChild(this.star2Holder),this.mainHolder.addChild(this.star3Holder),this.mainHolder.addChild(this.gameOverTitleHolder),this.mainHolder.addChild(this.gameOverScoreHolder),this.mainHolder.addChild(this.score),this.initialAnimation&&this.initialAnimation.kill(),this.initialAnimation=new TimelineMax,this.initialAnimation.add([TweenMax.from(this.mainHolder.scale,.6,{x:2,y:2,ease:Sine.easeInOut}),TweenMax.from(this.blueBarsHolder.scale,.6,{x:2,y:2,ease:Sine.easeInOut}),TweenMax.from(this.redLinesHolder.scale,.6,{x:2,y:2,ease:Sine.easeInOut}),TweenMax.from(this.blueBarsHolder,220,{rotation:2*Math.PI,ease:Power0.easeInOut,repeat:-1}),TweenMax.from(this.redLinesHolder,180,{rotation:2*Math.PI,ease:Power0.easeInOut,repeat:-1})],0),this.initialAnimation.add([TweenMax.from(this.screenHolder,.8,{rotation:Game.getRandom(-.15,.15),ease:Sine.easeInOut}),TweenMax.from(this.screenHolder.position,.8,{y:Game.stageHeight/2+200,ease:Back.easeOut}),TweenMax.from(this.screenHolder.scale,.8,{x:2.1,y:2.1,ease:Back.easeOut}),TweenMax.from(this.captainMan.position,.5,{x:223,ease:Sine.easeInOut}),TweenMax.from(this.henry.position,.5,{x:-249,ease:Sine.easeInOut}),TweenMax.delayedCall(.1,function(){Game.playSound("swoosh-8")},null,this)],.05),this.initialAnimation.add([TweenMax.from(this.gameOverTitleHolder.position,.5,{y:Game.stageHeight/4-200,ease:Back.easeOut}),TweenMax.from(this.gameOverTitleHolder.scale,.5,{x:3,y:3,ease:Back.easeOut})],.5),this.initialAnimation.call(function(){0==this.scoreNumber&&0==this.highscoreNumber||this.addScore()},null,this,1),this.starNumber){case 0:this.captainMan.showOnlyChild(0),this.henry.showOnlyChild(0),this.star1Animation&&this.star1Animation.kill(),this.star1Animation=new TimelineMax,this.star1Animation.add([TweenMax.delayedCall(.1,function(){var t=[{id:"game-over/captain-man-0-playing"},{id:"game-over/henry-0-what"},{id:"game-over/henry-0-help"}],e=Game.getRandom(0,3,!0);t[e]&&Game.playSound(t[e].id,t[e].vol||.8)},null,this)]);break;case 1:this.captainMan.showOnlyChild(0),this.henry.showOnlyChild(0),this.star1Animation&&this.star1Animation.kill(),this.star1Animation=new TimelineMax,this.star1Animation.add([TweenMax.from(this.star1Holder.position,.7,{y:730,ease:Back.easeOut})],.8),this.star1Animation.add([TweenMax.from(this.star2Holder.position,.7,{y:710,ease:Back.easeOut})],1),this.star1Animation.add([TweenMax.from(this.star3Holder.position,.7,{y:730,ease:Back.easeOut})],.8),this.star1Animation.add([TweenMax.delayedCall(0,function(){this.star1Holder.addChild(this.starParticle1Container),this.star1Holder.addChild(this.star1Front),this.star1Holder.addChild(this.star1FrontOverlay)},null,this),TweenMax.to(this.star1Front,.15,{alpha:1,ease:Sine.easeInOut}),TweenMax.from(this.star1Front.scale,.5,{x:4,y:4,ease:Back.easeOut}),TweenMax.from(this.star1Front,.4,{rotation:Game.getRandom(-.4,.4),ease:Sine.easeInOut}),TweenMax.to(this.star1FrontOverlay,.05,{alpha:.75,yoyo:!0,repeat:4,ease:Sine.easeInOut,delay:.4}),TweenMax.to(this.mainHolder.scale,.1,{x:.97,y:.97,yoyo:!0,repeat:1,ease:Sine.easeInOut,delay:.25}),TweenMax.delayedCall(.25,function(){this.starBurst1.fire(),this.captainMan.showOnlyChild(1),this.henry.showOnlyChild(1),Game.playSound("game-over/thud"),Game.playSound("game-over/shine-2");var t=[{id:"game-over/captain-man-1-go"},{id:"game-over/henry-1-go"}],e=Game.getRandom(0,2,!0);t[e]&&Game.playSound(t[e].id,t[e].vol||.8)},null,this)]);break;case 2:this.captainMan.showOnlyChild(0),this.henry.showOnlyChild(0),this.star2Animation&&this.star2Animation.kill(),this.star2Animation=new TimelineMax,this.star2Animation.add([TweenMax.from(this.star1Holder.position,.7,{y:730,ease:Back.easeOut})],.8),this.star2Animation.add([TweenMax.from(this.star2Holder.position,.7,{y:710,ease:Back.easeOut})],1),this.star2Animation.add([TweenMax.from(this.star3Holder.position,.7,{y:730,ease:Back.easeOut})],.8),this.star2Animation.add([TweenMax.delayedCall(0,function(){this.star1Holder.addChild(this.starParticle1Container),this.star1Holder.addChild(this.star1Front),this.star1Holder.addChild(this.star1FrontOverlay)},null,this),TweenMax.to(this.star1Front,.15,{alpha:1,ease:Sine.easeInOut}),TweenMax.from(this.star1Front.scale,.5,{x:4,y:4,ease:Back.easeOut}),TweenMax.from(this.star1Front,.4,{rotation:Game.getRandom(-.4,.4),ease:Sine.easeInOut}),TweenMax.to(this.star1FrontOverlay,.05,{alpha:.75,yoyo:!0,repeat:4,ease:Sine.easeInOut,delay:.4}),TweenMax.to(this.mainHolder.scale,.1,{x:.97,y:.97,yoyo:!0,repeat:1,ease:Sine.easeInOut,delay:.25}),TweenMax.delayedCall(.25,function(){this.starBurst1.fire(),this.captainMan.showOnlyChild(1),this.henry.showOnlyChild(1),Game.playSound("game-over/thud"),Game.playSound("game-over/shine-2")},null,this)]),this.star2Animation.add([TweenMax.delayedCall(0,function(){this.star2Holder.addChild(this.starParticle2Container),this.star2Holder.addChild(this.star2Front),this.star2Holder.addChild(this.star2FrontOverlay)},null,this),TweenMax.to(this.star2Front,.15,{alpha:1,ease:Sine.easeInOut}),TweenMax.from(this.star2Front.scale,.5,{x:4,y:4,ease:Back.easeOut}),TweenMax.from(this.star2Front,.4,{rotation:Game.getRandom(-.4,.4),ease:Sine.easeInOut}),TweenMax.to(this.star2FrontOverlay,.05,{alpha:.75,yoyo:!0,repeat:4,ease:Sine.easeInOut,delay:.4}),TweenMax.to(this.mainHolder.scale,.1,{x:.97,y:.97,yoyo:!0,repeat:1,ease:Sine.easeInOut,delay:.25}),TweenMax.delayedCall(.25,function(){this.starBurst2.fire(),this.captainMan.showOnlyChild(2),this.henry.showOnlyChild(2),Game.playSound("game-over/thud"),Game.playSound("game-over/shine-1");var t=[{id:"game-over/captain-man-2-right"},{id:"game-over/henry-2-yeahh"}],e=Game.getRandom(0,2,!0);t[e]&&Game.playSound(t[e].id,t[e].vol||.8)},null,this)]);break;case 3:this.captainMan.showOnlyChild(0),this.henry.showOnlyChild(0),this.star3Animation&&this.star3Animation.kill(),this.star3Animation=new TimelineMax,this.star3Animation.add([TweenMax.from(this.star1Holder.position,.7,{y:730,ease:Back.easeOut})],.8),this.star3Animation.add([TweenMax.from(this.star2Holder.position,.7,{y:710,ease:Back.easeOut})],1),this.star3Animation.add([TweenMax.from(this.star3Holder.position,.7,{y:730,ease:Back.easeOut})],.8),this.star3Animation.add([TweenMax.delayedCall(0,function(){this.star1Holder.addChild(this.starParticle1Container),this.star1Holder.addChild(this.star1Front),this.star1Holder.addChild(this.star1FrontOverlay)},null,this),TweenMax.to(this.star1Front,.15,{alpha:1,ease:Sine.easeInOut}),TweenMax.from(this.star1Front.scale,.5,{x:4,y:4,ease:Back.easeOut}),TweenMax.from(this.star1Front,.4,{rotation:Game.getRandom(-.4,.4),ease:Sine.easeInOut}),TweenMax.to(this.star1FrontOverlay,.05,{alpha:.75,yoyo:!0,repeat:4,ease:Sine.easeInOut,delay:.4}),TweenMax.to(this.mainHolder.scale,.1,{x:.97,y:.97,yoyo:!0,repeat:1,ease:Sine.easeInOut,delay:.25}),TweenMax.delayedCall(.25,function(){this.starBurst1.fire(),this.captainMan.showOnlyChild(1),this.henry.showOnlyChild(1),Game.playSound("game-over/thud"),Game.playSound("game-over/shine-2")},null,this)]),this.star3Animation.add([TweenMax.delayedCall(0,function(){this.star2Holder.addChild(this.starParticle2Container),this.star2Holder.addChild(this.star2Front),this.star2Holder.addChild(this.star2FrontOverlay)},null,this),TweenMax.to(this.star2Front,.15,{alpha:1,ease:Sine.easeInOut}),TweenMax.from(this.star2Front.scale,.5,{x:4,y:4,ease:Back.easeOut}),TweenMax.from(this.star2Front,.4,{rotation:Game.getRandom(-.4,.4),ease:Sine.easeInOut}),TweenMax.to(this.star2FrontOverlay,.05,{alpha:.75,yoyo:!0,repeat:4,ease:Sine.easeInOut,delay:.4}),TweenMax.to(this.mainHolder.scale,.1,{x:.97,y:.97,yoyo:!0,repeat:1,ease:Sine.easeInOut,delay:.25}),TweenMax.delayedCall(.25,function(){this.starBurst2.fire(),this.captainMan.showOnlyChild(2),this.henry.showOnlyChild(2),Game.playSound("game-over/thud"),Game.playSound("game-over/shine-1")},null,this)]),this.star3Animation.add([TweenMax.delayedCall(0,function(){this.star3Holder.addChild(this.starParticle3Container),this.star3Holder.addChild(this.star3Front),this.star3Holder.addChild(this.star3FrontOverlay)},null,this),TweenMax.to(this.star3Front,.15,{alpha:1,ease:Sine.easeInOut}),TweenMax.from(this.star3Front.scale,.5,{x:4,y:4,ease:Back.easeOut}),TweenMax.from(this.star3Front,.4,{rotation:Game.getRandom(-.4,.4),ease:Sine.easeInOut}),TweenMax.to(this.star3FrontOverlay,.05,{alpha:.75,yoyo:!0,repeat:4,ease:Sine.easeInOut,delay:.4}),TweenMax.to(this.mainHolder.scale,.1,{x:.97,y:.97,yoyo:!0,repeat:1,ease:Sine.easeInOut,delay:.25}),TweenMax.delayedCall(.25,function(){this.starBurst3.fire(),this.captainMan.showOnlyChild(3),this.henry.showOnlyChild(3),Game.playSound("game-over/thud"),Game.playSound("game-over/shine-3");var t=[{id:"game-over/henry-3-good"},{id:"game-over/captain-man-3-hair"}],e=Game.getRandom(0,2,!0);t[e]&&Game.playSound(t[e].id,t[e].vol||.8)},null,this)])}},e.prototype.uiClicked=function(e){if(t.prototype.uiClicked.call(this,e),1!=this.interactionLocked)switch(e.id){case"replaybuttonlarge":case"replaybuttonlarge":if(0==this.restartAllowed)return;this.restartAllowed=!1,this.interactionLocked=!0,Game.assetChunkManager.setCurrentGameId(Game.coreData.getCurrentGame().id),Game.assetChunkManager.generateLoadChunkParams("game"),this.game.setScene(Game.assetChunkManager.getTargetInitialScene(),!0)}},e.prototype.addScore=function(t){this.interval=this.scoreNumber/(60*this.tickUpTime),this.addingScore=!0},e.prototype.incrementScore=function(){var t=Math.ceil(this.interval);this.currentScore<this.scoreNumber?(this.score.position.x=Game.stageWidth/2-this.score.width/2,0==this.scoreSoundPlaying&&(this.scoreSoundPlaying=!0,Game.setSoundVolume("game-over/tick-up",.15),Game.playSound("game-over/tick-up")),this.currentScore,this.highscoreNumber,this.currentScore+t<=this.scoreNumber?this.currentScore+=t:this.currentScore+=1,this.score.text=String(this.currentScore)):this.addingScore=!1},e.prototype.checkIncrementScore=function(){1==this.addingScore&&this.incrementScore()},e.prototype.uiRolledOver=function(e){t.prototype.uiRolledOver.call(this,e)},e.prototype.tick=function(){t.prototype.tick.call(this),this.checkIncrementScore(),1==this.scoreSoundPlaying&&++this.scoreSoundTimer>=this.scoreSoundLimit&&(this.scoreSoundTimer=0,this.scoreSoundPlaying=!1)},e.prototype.keyDown=function(t){},e.prototype.keyUp=function(t){},e.prototype.pause=function(e){0==e&&t.prototype.pause.call(this,e)},e.prototype.resume=function(){t.prototype.resume.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.initialAnimation=this.killTween(this.initialAnimation),this.star1Animation=this.killTween(this.initialAnimation),this.star2Animation=this.killTween(this.initialAnimation),this.star3Animation=this.killTween(this.initialAnimation),Game.displayStore.returnPooledItem(this.blueBars1),Game.displayStore.returnPooledItem(this.blueBars2),Game.displayStore.returnPooledItem(this.redLines1),Game.displayStore.returnPooledItem(this.redLines2),Game.displayStore.returnPooledItem(this.redLines3),Game.displayStore.returnPooledItem(this.redLines4),Game.displayStore.returnPooledItem(this.star1Back),Game.displayStore.returnPooledItem(this.star1Front),Game.displayStore.returnPooledItem(this.star2Back),Game.displayStore.returnPooledItem(this.star2Front),Game.displayStore.returnPooledItem(this.star3Back),Game.displayStore.returnPooledItem(this.star3Front),Game.displayStore.returnPooledItem(this.star1FrontOverlay),Game.displayStore.returnPooledItem(this.star2FrontOverlay),Game.displayStore.returnPooledItem(this.star3FrontOverlay),Game.displayStore.returnPooledItem(this.screen),this.starBurst1.destroy(),this.starBurst2.destroy(),this.starBurst3.destroy();for(var e=0;e<this.gridTiles.length;e++)Game.displayStore.returnPooledItem(this.gridTiles[e])},e}(Scene),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ComeOutSwingingGameplayScene=function(t){function e(e){t.call(this,e),this.difficultyCurve=.5,this.checkpointDistance=43,this.smoothing=8,this.cameraEase=6,this.id="comeOutSwingingGameplayScene"}return __extends(e,t),e.prototype.init=function(e){t.prototype.init.call(this),this.mainHolderPos=new PIXI.Point(620,0),this.gridTick=0,this.cameraEase=6,this.score=0,this.stars=0,this.prevMainHolderX=0,this.currentSpeed=0,this.powerUpIsActive=!1,this.startedGameplay=!1,this.gameEnded=!1,this.isSwinging=!1,this.startedSwing=!1,this.allowNewSwing=!0,this.characterIsHit=!1,this.firstSwing=!0,this.speedRatio=1,this.ropeLengthOffset=7,this.showingGameOverHenry=!1,this.playedGameoverSound=!1,this.firedRoofParticles=!1,this.powerUpCoolDownMode=!1,this.gameOverHenry=Game.displayStore.getContainer("come-out-swinging/game-over-henry"),this.gameOverHenry.alpha=0,this.setBackgroundColor(11803917),this.scaleHolder=Game.displayStore.getContainer("come-out-swinging/scale-holder"),this.mainHolder=this.scaleHolder.getContainer("come-out-swinging/main-holder"),this.tutorialOverlay=new TutorialOverlay(this),this.inputManager=new ComeOutSwingingInputManager(this,this.mainHolder),this.physicsManager=new ComeOutSwingingPhysicsManager(this,this.mainHolder),this.physicsManager.initPhysicsWorld(),this.obstacleManager=new ComeOutSwingingObstaclesManager(this),this.bgShadow=Game.displayStore.getSprite("come-out-swinging/bg-shadow"),this.bgShadow.width=3*Game.stageWidth,this.bgShadow.height=4*Game.stageHeight,this.bgShadow.alpha=.65,this.bgShadow.position.x=Game.stageWidth/2,this.bgShadow.position.y=Game.stageHeight/2,this.muzzleFlash=Game.displayStore.getAnimatedSprite("come-out-swinging/muzzle-frames"),this.muzzleFlash.visible=!1,this.muzzleFlash.loop=!1,this.muzzleFlash.animationSpeed=.6,this.muzzleFlash.blendMode=PIXI.BLEND_MODES.ADD,this.muzzleFlashPower=Game.displayStore.getAnimatedSprite("come-out-swinging/power-up-laser"),this.muzzleFlashPower.visible=!1,this.muzzleFlashPower.loop=!1,this.muzzleFlashPower.animationSpeed=.6,this.muzzleFlashPower.blendMode=PIXI.BLEND_MODES.ADD,this.muzzleFlashPower.scale.x=this.muzzleFlashPower.scale.y=.8,this.shield=Game.displayStore.getContainer("come-out-swinging/shield"),this.shieldElements=[],this.shield.scale.y=1.5,this.shield.scale.y=0,this.shield.alpha=0,this.shieldInner=this.shield.getContainer("come-out-swinging/shield-inner"),this.shieldInner.position.x=-100;for(var i=0;i<4;i++){var n=this.shieldInner.getSpriteAt(i);n.blendMode=PIXI.BLEND_MODES.ADD;var o=2*Math.PI/Game.getRandom(50,100),a=n.position.x;this.shieldElements.push({count:Game.getRandom(0,50),origX:a,increase:o,sprite:n})}this.physicsManager.bindSpriteToBody(this.shield,this.physicsManager.characterSmashBody),this.roofParticleContainer=Game.displayStore.getContainer("come-out-swinging/roof-particle-container"),this.ventParticleContainer=Game.displayStore.getContainer("come-out-swinging/vent-particle-container"),this.smashParticleContainer=Game.displayStore.getContainer("come-out-swinging/smash-particle-container"),this.hitParticleContainer=Game.displayStore.getContainer("come-out-swinging/hit-particle-container"),this.counter=200,Game.coreData.setCurrentGame("come-out-swinging"),this.tutorialViewed=Game.coreData.getGameTutorialViewed("come-out-swinging"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("hub"),this.startPlatform=Game.displayStore.getSprite("come-out-swinging/start-platform"),this.startPlatformFront=Game.displayStore.getSprite("come-out-swinging/start-platform"),this.physicsManager.bindSpriteToBody(this.startPlatform,this.physicsManager.startPlatformBody),this.physicsManager.stepPhysics(),this.startPlatformFront.position.x=this.startPlatform.position.x,this.startPlatformFront.position.y=this.startPlatform.position.y,this.bgHolder=Game.displayStore.getContainer("come-out-swinging/bg-layer"),this.floorHolder=Game.displayStore.getContainer("come-out-swinging/floor-holder"),this.floorFrontHolder=Game.displayStore.getContainer("come-out-swinging/floor-front-holder"),this.floorHolder.position.y=this.floorFrontHolder.position.y=950,this.buildFloor(),this.checkpointHolder=Game.displayStore.getContainer("come-out-swinging/checkpoint-layer"),this.bgLayer=new ComeOutSwingingScrollingLayer(this,.6,[0,-500],this.bgHolder,this.bgHolder.getContainer("come-out-swinging/bg-layer-chunks"),2),this.bgHolder.scale.x=this.bgHolder.scale.y=1.1,this.checkpointLayer=new ComeOutSwingingScrollingLayer(this,.4,[0,0],this.checkpointHolder,this.checkpointHolder.getContainer("come-out-swinging/checkpoint-layer-chunks")),0==Game.isLowEndIPad&&(this.tvManager=new ComeOutSwingingTvManager(this,this.checkpointHolder)),this.checkpointManager=new ComeOutSwingingCheckpointManager(this,this.checkpointHolder),0==Game.isLowEndIPad?this.terrainManager=new ComeOutSwingingTerrainManager(this):(this.ceilingHolder=Game.displayStore.getContainer("come-out-swinging/ceiling-layer"),this.ceilingLayer=new ComeOutSwingingScrollingLayer(this,.01,[0,-130],this.ceilingHolder,this.ceilingHolder.getContainer("come-out-swinging/ceiling-layer-chunks")),this.ceilingHolder.position.y=-130),this.floorRed=Game.displayStore.getSprite("come-out-swinging/red-floor"),this.floorRed.rotation=-Math.PI/2,this.floorRed.width=Game.stageWidth/2.5,this.floorRed.height=5*Game.stageWidth,this.floorRed.position.y=900,this.floorRed.blendMode=PIXI.BLEND_MODES.MULTIPLY,this.scoreBG=Game.displayStore.getSprite("come-out-swinging/score-bg"),this.scoreBG.position.y=80,this.scoreBG.position.x=-53,this.scoreText=Game.displayStore.getBitmapText("come-out-swinging/score-font"),this.scoreText.position.x=12,this.scoreText.position.y=57,this.scoreText.scale.x=this.scoreText.scale.y=.45,this.scoreText.text="0m",this.characterHead=Game.displayStore.getContainer("come-out-swinging/head-container"),this.physicsManager.bindSpriteToBody(this.characterHead,this.physicsManager.characterHeadBody),this.characterBackArm=Game.displayStore.getContainer("come-out-swinging/arm-back"),this.physicsManager.bindSpriteToBody(this.characterBackArm,this.physicsManager.characterArmBackBody),this.characterFrontArmTop=Game.displayStore.getSprite("come-out-swinging/arm-front-top"),this.physicsManager.bindSpriteToBody(this.characterFrontArmTop,this.physicsManager.characterArmFrontTopBody),this.characterFrontArmBottom=Game.displayStore.getSprite("come-out-swinging/arm-front-bottom"),this.physicsManager.bindSpriteToBody(this.characterFrontArmBottom,this.physicsManager.characterArmFrontBottomBody),this.characterBackArm.showOnlyChild(0),this.characterBackLeg=Game.displayStore.getSprite("come-out-swinging/leg-back-top"),this.physicsManager.bindSpriteToBody(this.characterBackLeg,this.physicsManager.characterLegBackTopBody),this.characterLeg=Game.displayStore.getSprite("come-out-swinging/leg-front-top"),this.physicsManager.bindSpriteToBody(this.characterLeg,this.physicsManager.characterLegFrontTopBody),this.characterBackLegBottom=Game.displayStore.getSprite("come-out-swinging/leg-back-bottom"),this.physicsManager.bindSpriteToBody(this.characterBackLegBottom,this.physicsManager.characterLegBackBottomBody),this.characterLegBottom=Game.displayStore.getSprite("come-out-swinging/leg-front-bottom"),this.physicsManager.bindSpriteToBody(this.characterLegBottom,this.physicsManager.characterLegFrontBottomBody),this.ropePoint=Game.displayStore.getSprite("come-out-swinging/rope-point"),this.physicsManager.bindSpriteToBody(this.ropePoint,this.physicsManager.characterRopePointBody),this.trackedObject=this.ropePoint,this.characterBody=Game.displayStore.getSprite("come-out-swinging/body"),this.physicsManager.bindSpriteToBody(this.characterBody,this.physicsManager.characterBodyBody),this.rope=Game.displayStore.getContainer("come-out-swinging/rope-container"),this.rope.getSpriteAt(0).blendMode=PIXI.BLEND_MODES.ADD,this.rope.getSpriteAt(1).blendMode=PIXI.BLEND_MODES.ADD,this.rope.showOnlyChild(0),this.laserHook=Game.displayStore.getContainer("come-out-swinging/laser-hook"),this.laserHook.getSpriteAt(0).blendMode=PIXI.BLEND_MODES.ADD,this.laserHook.getSpriteAt(1).blendMode=PIXI.BLEND_MODES.ADD,this.laserHook.scale.x=this.laserHook.scale.y=1.5,this.laserHook.position.y=-2e3,this.laserHook.showOnlyChild(0),this.container.addChild(this.scaleHolder),this.scaleHolder.addChild(this.mainHolder),this.mainHolder.addChild(this.bgHolder),this.mainHolder.addChild(this.bgShadow),this.mainHolder.addChild(this.checkpointHolder),this.container.addChild(this.scoreBG),this.container.addChild(this.scoreText),this.mainHolder.addChild(this.floorHolder),this.mainHolder.addChild(this.obstacleManager.container),this.changeExpression(2);var e={lowerAngle:10,upperAngle:160,lowerVelocity:150,upperVelocity:500,endScale:0,lowerStartScale:6,upperStartScale:12,XstartRange:20,YstartRange:20,blendMode:PIXI.BLEND_MODES.ADD,time:.6,gravity:400,cap:15,endAlpha:1,rotationPower:1},s={lowerAngle:10,upperAngle:160,lowerVelocity:250,upperVelocity:1800,endScale:0,lowerStartScale:1,upperStartScale:7,friction:.05,XstartRange:20,YstartRange:20,blendMode:PIXI.BLEND_MODES.ADD,time:.8,gravity:600,cap:30,endAlpha:1,rotationPower:2},r={lowerAngle:-70,upperAngle:70,lowerVelocity:350,upperVelocity:1500,endScale:0,lowerStartScale:1,upperStartScale:3,XstartRange:20,YstartRange:20,time:2,gravity:1200,cap:20,endAlpha:1,rotationPower:6};0==Game.isLowEndIPad&&(this.roofParticleBurst=new ParticleBurst(["come-out-swinging/green-particle"],this.roofParticleContainer,this,e),this.powerupParticleBurst=new ParticleBurst(["come-out-swinging/pink-particle"],this.roofParticleContainer,this,s),this.mainHolder.addChild(this.roofParticleContainer),this.ventParticleBurst=new ParticleBurst(["come-out-swinging/vent-bolt","come-out-swinging/vent-nut","come-out-swinging/vent-shard-1","come-out-swinging/vent-shard-2"],this.ventParticleContainer,this,r),this.smashParticleBurst=new ParticleBurst(["come-out-swinging/pink-particle"],this.smashParticleContainer,this,r),this.mainHolder.addChild(this.ventParticleContainer),this.mainHolder.addChild(this.smashParticleContainer));var h={lowerAngle:240,upperAngle:360,lowerVelocity:50,upperVelocity:700,endScale:0,lowerStartScale:5,upperStartScale:15,friction:.1,XstartRange:100,YstartRange:0,blendMode:PIXI.BLEND_MODES.ADD,time:3,gravity:100,cap:40,endAlpha:1,rotationPower:1};this.hitParticleBurst=new ParticleBurst(["come-out-swinging/red-particle"],this.hitParticleContainer,this,h),this.mainHolder.addChild(this.startPlatform),this.mainHolder.addChild(this.startPlatformFront),this.mainHolder.addChild(this.characterBackArm),this.mainHolder.addChild(this.muzzleFlash),this.mainHolder.addChild(this.muzzleFlashPower),this.mainHolder.addChild(this.characterBackLegBottom),this.mainHolder.addChild(this.characterBackLeg),this.mainHolder.addChild(this.characterLegBottom),this.mainHolder.addChild(this.characterLeg),this.mainHolder.addChild(this.characterBody),this.mainHolder.addChild(this.rope),this.mainHolder.addChild(this.laserHook),this.mainHolder.addChild(this.characterHead),this.mainHolder.addChild(this.characterFrontArmBottom),this.mainHolder.addChild(this.characterFrontArmTop),this.mainHolder.addChild(this.gameOverHenry),this.mainHolder.addChild(this.obstacleManager.containerFront),this.mainHolder.addChild(this.floorFrontHolder),this.cloudManager=new ComeOutSwingingCloudManager(this,this.mainHolder),1==Game.isLowEndIPad?this.mainHolder.addChild(this.ceilingHolder):this.mainHolder.addChild(this.terrainManager.container),this.mainHolder.addChild(this.floorRed),this.mainHolder.addChild(this.shield),this.mainHolder.addChild(this.hitParticleContainer),this.scaleHolder.scale.x=this.scaleHolder.scale.y=.75,this.scaleHolder.position.y=Game.stageHeight,this.scaleHolder.position.x=Game.stageWidth/2,this.rope.scale.y=0,this.mainHolder.position.y=-770,this.mainHolder.position.x=30,Game.playSound("come-out-swinging/dance",.55),1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("come-out-swinging",!0)},e.prototype.startGameplay=function(){this.startedGameplay=!0,this.game.ui.triggerEnjoyTheRide(),this.game.ui.setUI("gameplay-come-out-swinging"),this.physicsManager.raiseArm(),this.game.powerUpManager.startGame(),this.changeExpression(2),Game.playSound("come-out-swinging/spt-man-go-for-it")},e.prototype.buildFloor=function(){for(var t=0;t<8;t++){var e=Game.displayStore.getSprite("come-out-swinging/floor-bar");e.width=3*Game.stageWidth,e.position.y=3*t*t,e.blendMode=PIXI.BLEND_MODES.ADD,e.alpha=.8,t<4?this.floorHolder.addChild(e):this.floorFrontHolder.addChild(e)}},e.prototype.getCurrentPlayerPos=function(t){var e=new PIXI.Point;return"local"==t&&(e.x=this.ropePoint.position.x,e.y=this.ropePoint.position.y),"global"==t&&(e.x=this.container.toLocal(new PIXI.Point,this.characterBody).x,e.y=this.container.toLocal(new PIXI.Point,this.characterBody).y),e},e.prototype.passedCheckpoint=function(){0==this.characterIsHit&&this.game.powerUpManager.earnedFocusPoint()},e.prototype.changeExpression=function(t){this.characterHead.showOnlyChild(t)},e.prototype.tapToSwing=function(t){if(1!=this.characterIsHit&&1!=this.tutorialOverlay.isOpen&&1!=this.paused){1==this.firstSwing&&this.doFirstSwing(),this.firedRoofParticles=!1,this.isSwinging=!0,this.changeExpression(1),this.allowNewSwing=!0;var e=new PIXI.Point(this.mainHolder.toLocal(new PIXI.Point(0,0),this.inputManager.hitAreaSprite).x+t.x/.75,this.mainHolder.toLocal(new PIXI.Point(0,0),this.inputManager.hitAreaSprite).y+t.y);this.physicsManager.spawnRope(e),this.rope.position.x=this.ropePoint.position.x,this.rope.position.y=this.ropePoint.position.y,this.rope.rotation=this.physicsManager.getRopeAngle()+Math.PI/2,1==this.powerUpIsActive?(Game.playSound("come-out-swinging/deep-laser"),Game.playSound("come-out-swinging/grapple-impact-"+Game.getRandom(1,3,!0),.5),this.muzzleFlash.visible=!1,this.muzzleFlashPower.visible=!0,this.muzzleFlashPower.gotoAndPlay(0)):(this.muzzleFlashPower.visible=!1,this.muzzleFlash.visible=!0,this.muzzleFlash.gotoAndPlay(0),Game.playSound("come-out-swinging/laser-shoot-"+Game.getRandom(1,2,!0),.7),Game.playSound("come-out-swinging/grapple-impact-"+Game.getRandom(1,3,!0),.3)),this.laserHook.visible=!0;var i=Math.cos(this.rope.rotation+Math.PI/2),n=Math.sin(this.rope.rotation+Math.PI/2);this.laserHook.position.x=this.rope.position.x+this.rope.height*i,this.laserHook.position.y=this.rope.position.y+this.rope.height*n,this.laserHook.rotation=this.rope.rotation+Math.PI,this.muzzleFlash.position.x=this.rope.position.x,this.muzzleFlash.position.y=this.rope.position.y,this.muzzleFlash.rotation=this.physicsManager.getRopeAngle()+Math.PI,this.muzzleFlashPower.position.x=this.rope.position.x,this.muzzleFlashPower.position.y=this.rope.position.y,this.muzzleFlashPower.rotation=this.physicsManager.getRopeAngle()+Math.PI,this.delayedSwoosh=TweenMax.delayedCall(.3,Game.playSound,["come-out-swinging/swoosh-"+Game.getRandom(1,4,!0),.5],this)}},e.prototype.doFirstSwing=function(){this.firstSwing=!1,this.physicsManager.firstSwing(),Game.playSound("come-out-swinging/henry-yeahh")},e.prototype.startSwing=function(){this.startedSwing=!0},e.prototype.stopSwinging=function(){this.delayedSwoosh=this.killTween(this.delayedSwoosh),this.changeExpression(2),this.physicsManager.clearRope(),this.rope.height=0,this.startedSwing=!1,this.allowNewSwing=!1,this.isSwinging=!1,this.laserHook.visible=!1,this.muzzleFlash.visible=!0,this.muzzleFlashPower.visible=!0},e.prototype.stopBeams=function(){this.obstacleManager.stopBeams()},e.prototype.hitFloorBottom=function(){this.characterIsHit=!0,this.stopSwinging(),this.showGameOverHenry()},e.prototype.hitFloor=function(){if(1!=this.characterIsHit&&1!=this.powerUpCoolDownMode){if(this.gameOverTimeline=this.killTween(this.gameOverTimeline),this.gameOverTimeline=new TimelineMax,this.changeExpression(3),1==this.powerUpIsActive)return this.game.powerUpManager.endPowerUpMode(),this.powerUpCoolDownMode=!0,void(0==this.isSwinging&&(this.goSloMo(),this.gameOverTimeline.call(this.tapToSwing,[new PIXI.Point(600,100)],this,.8)));Game.playSound("come-out-swinging/henry-shocked"),Game.playSound("come-out-swinging/scanning"),this.characterIsHit=!0,this.stopSwinging();new RoughEase({strength:3,points:30,randomize:!1,clamp:!0});this.goSloMo(),this.gameOverTimeline.call(this.changeExpression,[4],this,.5),this.gameOverTimeline.call(this.showGameOverHenry,null,this,2.2);var t={lowerAngle:240,upperAngle:360,lowerVelocity:150,upperVelocity:800,endScale:0,lowerStartScale:4,upperStartScale:10,friction:.08,XstartRange:100,YstartRange:0,blendMode:PIXI.BLEND_MODES.ADD,time:3,gravity:100,cap:40,endAlpha:1,rotationPower:1};this.hitParticleBurst.updateParams(t,this.hitParticleBurst),this.hitParticleBurst.fire(),this.hitParticleContainer.position.x=this.characterBody.position.x+50,this.hitParticleContainer.position.y=this.floorFrontHolder.position.y+60}},e.prototype.hitChaser=function(){if(1!=this.characterIsHit&&1!=this.powerUpCoolDownMode){if(1==this.powerUpIsActive)return this.game.powerUpManager.endPowerUpMode(),void(this.powerUpCoolDownMode=!0);this.changeExpression(4),this.characterIsHit=!0,this.stopSwinging(),Game.playSound("come-out-swinging/henry-shocked"),Game.playSound("come-out-swinging/scanning"),this.gameOverTimeline=this.killTween(this.gameOverTimeline),this.gameOverTimeline=new TimelineMax,this.goSloMo(),this.gameOverTimeline.call(this.showGameOverHenry,[this],this,2.2),this.gameOverTimeline.call(this.changeExpression,[3],this,.5)}},e.prototype.hitBeam=function(){if(1!=this.characterIsHit&&1!=this.powerUpCoolDownMode){if(1==this.powerUpIsActive){t={lowerAngle:-60,upperAngle:60,lowerVelocity:350,upperVelocity:1300,endScale:0,lowerStartScale:5,upperStartScale:15,friction:.01,XstartRange:20,YstartRange:20,blendMode:PIXI.BLEND_MODES.ADD,time:2,gravity:150,cap:40,endAlpha:1,rotationPower:1};return this.hitParticleBurst.updateParams(t,this.hitParticleBurst),this.hitParticleBurst.fire(),this.hitParticleContainer.position.x=this.characterBody.position.x+100,this.hitParticleContainer.position.y=this.characterBody.position.y,this.game.powerUpManager.endPowerUpMode(),void(this.powerUpCoolDownMode=!0)}this.stopSwinging(),Game.playSound("come-out-swinging/henry-shocked"),Game.playSound("come-out-swinging/zap",.7),Game.playSound("come-out-swinging/scanning");var t={lowerAngle:0,upperAngle:360,lowerVelocity:50,upperVelocity:400,endScale:0,lowerStartScale:5,upperStartScale:15,friction:.05,XstartRange:20,YstartRange:20,blendMode:PIXI.BLEND_MODES.ADD,time:3,gravity:150,cap:40,endAlpha:1,rotationPower:1};this.hitParticleBurst.updateParams(t,this.hitParticleBurst),this.hitParticleBurst.fire(),this.hitParticleContainer.position.x=this.characterBody.position.x+40,this.hitParticleContainer.position.y=this.characterBody.position.y,this.changeExpression(3),this.characterIsHit=!0,this.gameOverTimeline=this.killTween(this.gameOverTimeline),this.gameOverTimeline=new TimelineMax,this.goSloMo(),this.gameOverTimeline.call(this.changeExpression,[4],this,.5),this.gameOverTimeline.call(this.showGameOverHenry,[this],this,2.5)}},e.prototype.hitVent=function(){0==this.powerUpIsActive&&0==this.allowNewSwing&&this.stopSwinging()},e.prototype.goSloMo=function(){this.gameOverTimeline.add([TweenMax.to(this,.3,{speedRatio:.01,ease:Power2.easeOut,repeat:1,yoyo:!0,repeatDelay:.5,onUpdate:function(t){t.physicsManager.updateStepSpeed()},onUpdateParams:[this]})])},e.prototype.tutorialOverlayClosed=function(){this.startGameplay()},e.prototype.updateScoreText=function(t){1!=this.characterIsHit&&(this.score=t,this.scoreText.text=t.toString()+"m")},e.prototype.addPhysicsBodyToWorld=function(t){this.physicsManager.addBodyToWorld(t)},e.prototype.addPhysicsConstraintToWorld=function(t){this.physicsManager.addConstraintToWorld(t)},e.prototype.removePhysicsBodyFromWorld=function(t){this.physicsManager.removeBodyFromWorld(t)},e.prototype.removePhysicsConstraintFromWorld=function(t){this.physicsManager.removeConstraintFromWorld(t)},e.prototype.uiClicked=function(e){switch(t.prototype.uiClicked.call(this,e),this.tutorialOverlay.uiClicked(e),e.id){case"playbuttonlarge":this.resume();break;case"pause-button":this.pause(!1)}},e.prototype.uiRolledOver=function(e){t.prototype.uiRolledOver.call(this,e)},e.prototype.fireSmashParticles=function(t){0==Game.isLowEndIPad&&(this.smashParticleContainer.position.x=t.x,this.smashParticleContainer.position.y=t.y,this.smashParticleBurst.fire());var e=new RoughEase({strength:3,points:6,randomize:!1,template:Power2.easeOut});this.scaleHolder.scale.x=.78,this.scaleHolder.scale.y=.78,TweenMax.to(this.scaleHolder.scale,.25,{x:.75,y:.75,ease:e})},e.prototype.fireVentParticles=function(t){0==Game.isLowEndIPad&&(this.ventParticleContainer.position.x=t.x,this.ventParticleContainer.position.y=t.y,this.ventParticleBurst.fire())},e.prototype.tick=function(){if(t.prototype.tick.call(this),1!=this.paused){if(this.updateScoreText(Math.abs(Math.round(this.mainHolder.position.x/200))),this.bgLayer.tick(this.smoothing,this.mainHolder.position),this.checkpointLayer.tick(this.smoothing,this.mainHolder.position),1==Game.isLowEndIPad?this.ceilingLayer.tick(this.smoothing,this.mainHolder.position):this.terrainManager.tick(this.smoothing,this.mainHolder.position.x+600),this.checkpointManager.tick(),this.tvManager&&this.tvManager.tick(),this.bgShadow.position.x=this.trackedObject.position.x,this.inputManager.tick(),this.physicsManager.stepPhysics(),this.cloudManager.tick(),this.obstacleManager.tick(this.mainHolder.position.x),this.floorRed.position.x=this.floorHolder.position.x=this.floorFrontHolder.position.x=this.trackedObject.position.x-900,this.floorRed.position.y=this.floorHolder.position.y+250,this.gridTick+=1*this.speedRatio,0==this.showingGameOverHenry&&(this.gridTick>=5?(this.floorHolder.alpha=1,this.floorFrontHolder.alpha=1,this.gridTick=0):(this.floorHolder.alpha-=.1*this.speedRatio,this.floorFrontHolder.alpha-=.1*this.speedRatio)),1==this.isSwinging){this.rope.position.x=this.ropePoint.position.x,this.rope.position.y=this.ropePoint.position.y,this.rope.rotation=this.physicsManager.getRopeAngle()+Math.PI/2,this.muzzleFlash.position.x=this.rope.position.x,this.muzzleFlash.position.y=this.rope.position.y,this.muzzleFlash.rotation=this.physicsManager.getRopeAngle()+Math.PI,this.muzzleFlashPower.position.x=this.rope.position.x,this.muzzleFlashPower.position.y=this.rope.position.y,this.muzzleFlashPower.rotation=this.physicsManager.getRopeAngle()+Math.PI,1==this.startedSwing?this.rope.height=this.physicsManager.getRopeLength()+this.ropeLengthOffset:this.rope.height+=(this.physicsManager.getRopeLength()+this.ropeLengthOffset-this.rope.height)/10;var e,i=Math.cos(this.rope.rotation+Math.PI/2),n=Math.sin(this.rope.rotation+Math.PI/2);this.laserHook.position.x=this.rope.position.x+this.rope.height*i,e=this.rope.position.y+this.rope.height*n,e=this.laserHook.position.y<Game.stageHeight-this.physicsManager.rayHitPoint[1]+25?Game.stageHeight-(this.physicsManager.rayHitPoint[1]-25):this.rope.position.y+this.rope.height*n,this.laserHook.position.y=e-5,1==this.startedSwing?(this.laserHook.rotation=0,0==Game.isLowEndIPad&&0==this.firedRoofParticles&&(this.firedRoofParticles=!0,this.roofParticleContainer.position.x=this.laserHook.position.x,this.roofParticleContainer.position.y=this.laserHook.position.y-50,0==this.powerUpIsActive?this.roofParticleBurst.fire():this.powerupParticleBurst.fire())):this.laserHook.rotation=this.rope.rotation+Math.PI}var o=(this.ropePoint.position.x-this.physicsManager.chaseBody.position[0])/40;o<10&&(o=10),o>30&&(o=30),this.physicsManager.setChaseSpeed(o*this.speedRatio),this.shield.rotation+=(this.characterBody.rotation/4-this.shield.rotation)/5;var a;a=1==this.firstSwing?10:o,1==this.showingGameOverHenry&&(a=11);var s=.9*Game.stageWidth-30*a;this.mainHolderPos.x+=(s-this.mainHolderPos.x)/30;for(var r=0;r<this.shieldElements.length;r++){this.shieldElements[r].sprite;this.shieldElements[r].sprite.position.x=this.shieldElements[r].origX+2*Math.sin(this.shieldElements[r].count),this.shieldElements[r].sprite.alpha=.5+3*Math.sin(this.shieldElements[r].count)/20,this.shieldElements[r].count+=this.shieldElements[r].increase*this.speedRatio*8}this.positionViewport()}},e.prototype.positionViewport=function(){var t=new PIXI.Point((-this.trackedObject.position.x-70-this.mainHolder.position.x+this.mainHolderPos.x-Game.stageWidth/2)/this.cameraEase,(250-this.trackedObject.position.y-this.mainHolder.position.y+this.mainHolderPos.y-1.2*Game.stageHeight)/this.cameraEase);this.mainHolder.position.y=this.mainHolder.position.y+t.y,this.mainHolder.position.x=this.mainHolder.position.x+t.x,0==Game.isLowEndIPad?this.mainHolder.position.y>-600&&(this.mainHolder.position.y=-600):this.mainHolder.position.y>-680&&(this.mainHolder.position.y=-680),this.mainHolder.position.y<-1120&&(this.mainHolder.position.y=-1120),this.currentSpeed+=(Math.abs(this.mainHolder.position.x-this.prevMainHolderX)-this.currentSpeed)/20,this.prevMainHolderX=this.mainHolder.position.x},e.prototype.showGameOverHenry=function(){this.cloudManager.disperse();var t=Game.getRandom(0,1,!0);this.showingGameOverHenry=!0,this.cameraEase=40;var e=this.gameOverHenry.getSprite("come-out-swinging/henry-arm-left"),i=this.gameOverHenry.getSprite("come-out-swinging/henry-arm-right"),n=this.gameOverHenry.getSprite("come-out-swinging/henry-head");this.trackedObject=this.gameOverHenry,this.gameOverTimeline=this.killTween(this.gameOverTimeline),this.gameOverTimeline=new TimelineMax,this.gameOverHenry.alpha=1;var o=new RoughEase({strength:3,points:30,randomize:!1,clamp:!0});this.gameOverHenry.position.x=-this.mainHolder.position.x,this.gameOverTimeline.add(TweenMax.to(this.gameOverHenry.position,1.5,{y:1e3,ease:Power2.easeInOut}),0),this.gameOverTimeline.add(TweenMax.to(this.scaleHolder.scale,1.5,{x:1.4,y:1.4,ease:Power2.easeInOut}),0),this.gameOverTimeline.add(TweenMax.to(e,.5,{rotation:1,ease:Power2.easeInOut}),1),this.gameOverTimeline.add(TweenMax.to(i,.5,{rotation:-1,ease:Power2.easeInOut}),1),this.gameOverTimeline.add(TweenMax.to(n.position,.5,{y:-160,ease:Power2.easeOut,repeat:1,repeatDelay:.5,yoyo:!0}),1),this.gameOverTimeline.call(this.stopBeams,null,this,.2),this.gameOverTimeline.add(TweenMax.to(this.bgShadow,.3,{alpha:0,ease:o}),1),this.gameOverTimeline.add(TweenMax.to(this.floorRed,.2,{alpha:0,ease:Power2.easeOut}),0),this.gameOverTimeline.add(TweenMax.to(this.floorHolder,.5,{alpha:0,ease:o}),0),this.gameOverTimeline.add(TweenMax.to(this.floorFrontHolder,.5,{alpha:0,ease:o}),0),this.gameOverTimeline.call(function(){1==t&&0==this.playedGameoverSound?(Game.playSound("come-out-swinging/henry-i-get-it"),this.playedGameoverSound=!0):0==t&&0==this.playedGameoverSound&&(Game.playSound("come-out-swinging/henry-er"),this.playedGameoverSound=!0)},[this],this,.7),this.gameOverTimeline.call(this.gameOver,[this],this,2)},e.prototype.hitBoxingGlove=function(){0==this.powerUpIsActive?(this.stopSwinging(),Game.playSound("come-out-swinging/henry-hurt-"+Game.getRandom(1,4,!0))):this.obstacleManager.boxingGlove.smash(),this.obstacleManager.boxingGlove.hasHit=!0},e.prototype.gameOver=function(t){this.stars=0,this.score>100&&(this.stars=1),this.score>250&&(this.stars=2),this.score>500&&(this.stars=3),Game.coreData.setCurrentGameScoreFromGame(this.score,this.stars),this.game.setScene("gameoverScene",!0)},e.prototype.keyDown=function(e){t.prototype.keyDown.call(this,e),1!=this.paused&&("left"==e?this.leftKeyDown():"right"==e&&this.rightKeyDown(),"x"==e&&this.game.powerUpManager.activatePowerUp())},e.prototype.keyUp=function(e){t.prototype.keyUp.call(this,e),1!=this.paused&&("left"==e?this.leftKeyUp():"right"==e&&this.rightKeyUp())},e.prototype.leftKeyDown=function(){},e.prototype.leftKeyUp=function(){},e.prototype.rightKeyDown=function(){},e.prototype.rightKeyUp=function(){},e.prototype.restore=function(){t.prototype.restore.call(this),this.game.ui.setUI("pause")},e.prototype.activatePowerUpEffect=function(){Game.stopSound("come-out-swinging/dance"),this.powerUpIsActive=!0,this.rope.showOnlyChild(1),Game.playSound("come-out-swinging/shield-engage",.8),this.characterBackArm.showOnlyChild(1),this.laserHook.showOnlyChild(1),this.ropeLengthOffset=-10,this.powerupTimeline=this.killTween(this.powerupTimeline),this.powerupTimeline=new TimelineMax,this.powerupTimeline.add([TweenMax.to(this.shield.scale,1,{y:1.5,ease:Elastic.easeOut}),TweenMax.to(this.shield,.2,{alpha:1,ease:Power2.easeOut}),TweenMax.to(this.shieldInner.position,1,{x:0,ease:Elastic.easeOut})]),this.powerupTimeline.call(Game.playSound,["come-out-swinging/shield-loop",.8],this,.5),this.powerupTimeline.call(Game.playSound,["come-out-swinging/henry-feels-good"],this,1),this.powerupTimeline.call(Game.playSound,["come-out-swinging/hero-music-intro"],this,.3),this.powerupTimeline.call(Game.playSound,["come-out-swinging/hero-music-loop"],this,.3),this.physicsManager.activatePowerup()},e.prototype.deactivatePowerUpEffect=function(){this.powerUpIsActive=!1,Game.stopSound("come-out-swinging/shield-loop"),Game.stopSound("come-out-swinging/hero-music-loop"),Game.playSound("come-out-swinging/shield-lose"),this.rope.showOnlyChild(0),this.characterBackArm.showOnlyChild(0),this.laserHook.showOnlyChild(0),this.ropeLengthOffset=7,TweenMax.delayedCall(1.5,function(){this.powerUpCoolDownMode=!1},null,this),this.powerupTimeline=this.killTween(this.powerupTimeline),this.powerupTimeline=new TimelineMax,this.powerupTimeline.add(TweenMax.to(this.shield,.05,{alpha:0,repeat:20,yoyo:!0})),this.powerupTimeline.add([TweenMax.to(this.shield.scale,.4,{y:0,ease:Back.easeIn}),TweenMax.to(this.shield,.4,{alpha:0,ease:Power2.easeInOut}),TweenMax.to(this.shieldInner.position,.4,{x:-100,ease:Power2.easeOut})]),this.physicsManager.deactivatePowerup(),this.powerupTimeline.call(Game.playSound,["come-out-swinging/dance",.55],1.5)},e.prototype.pause=function(e){0==e&&t.prototype.pause.call(this,e),this.game.powerUpManager.pause(),this.checkpointManager.pause(),this.obstacleManager.pause(),this.hitParticleBurst.pause(),0==Game.isLowEndIPad&&(this.roofParticleBurst.pause(),this.powerupParticleBurst.pause(),this.ventParticleBurst.pause(),this.smashParticleBurst.pause(),this.terrainManager.pause()),this.pauseResumeTween(this.delayedSwoosh,"pause"),this.pauseResumeTween(this.gameOverTimeline,"pause"),Game.pauseSound("come-out-swinging/dance"),Game.pauseSound("come-out-swinging/hero-music-loop")},e.prototype.resume=function(){t.prototype.resume.call(this),this.setBackgroundColor(3355443),this.game.ui.setUI("gameplay-come-out-swinging"),this.game.powerUpManager.resume(),this.checkpointManager.resume(),this.obstacleManager.resume(),this.hitParticleBurst.resume(),this.pauseResumeTween(this.delayedSwoosh,"resume"),this.pauseResumeTween(this.gameOverTimeline,"resume"),Game.resumeSound("come-out-swinging/dance"),Game.resumeSound("come-out-swinging/hero-music-loop"),0==Game.isLowEndIPad&&(this.roofParticleBurst.resume(),this.powerupParticleBurst.resume(),this.ventParticleBurst.resume(),this.smashParticleBurst.resume(),this.terrainManager.resume())},e.prototype.destroy=function(){for(t.prototype.destroy.call(this),this.tutorialOverlay.destroy(),Game.stopSound("come-out-swinging/dance"),Game.stopSound("come-out-swinging/hero-music-loop"),this.inputManager.destroy(),this.physicsManager.destroy();this.floorHolder.children.length>0;)Game.displayStore.returnPooledItem(this.floorHolder.removeChildAt(0));for(;this.floorFrontHolder.children.length>0;)Game.displayStore.returnPooledItem(this.floorFrontHolder.removeChildAt(0));this.bgLayer.destroy(),this.cloudManager.destroy(),this.killTween(this.delayedSwoosh),this.obstacleManager.destroy(),this.tvManager&&this.tvManager.destroy(),this.checkpointManager.destroy(),0==Game.isLowEndIPad?(this.roofParticleBurst.destroy(),this.powerupParticleBurst.destroy(),this.ventParticleBurst.destroy(),this.smashParticleBurst.destroy(),this.terrainManager.destroy()):this.ceilingLayer.destroy(),this.hitParticleBurst.destroy(),this.gameOverTimeline=this.killTween(this.gameOverTimeline),Game.displayStore.returnPooledItem(this.startPlatform),Game.displayStore.returnPooledItem(this.startPlatformFront),Game.displayStore.returnPooledItem(this.characterBackArm),Game.displayStore.returnPooledItem(this.characterLeg),Game.displayStore.returnPooledItem(this.characterBackLeg)},e}(Scene),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},BaddieBarrageGameplayScene=function(t){function e(e){t.call(this,e),this.tickUpTime=1,this.smoothing=8,this.cameraEase=6,this.maxWaveSize=10,this.difficultyCurve=.5,this.id="baddieBarrageGameplayScene"}return __extends(e,t),e.prototype.init=function(e){t.prototype.init.call(this),this.scoreSoundTimer=0,this.scoreSoundLimit=3,this.scoreSoundPlaying=!1,this.mainHolderPos=new PIXI.Point(620,0),this.cameraEase=6,this.powerUpIsActive=!1,this.startedGameplay=!1,this.gameEnded=!1,this.characterIsHit=!1,this.speedRatio=1,this.henryFlipped=!1,this.totalProgress=1,this.progress=1,this.wave=1,this.waveSize=1,this.score=0,this.floorSpeed=0,this.addingScore=!1,this.currentScore=0,this.addedScore=0,this.powerupFactor=1,this.numberOfTargets=1,this.henryIsIdling=!0,Game.playSound("baddie-barrage/dance",.5),this.setBackgroundColor(1118481),this.bg=Game.displayStore.getSprite("baddie-barrage/bg",!0),this.bg.position.x=-30,this.bg.position.y=250,this.scaleHolder=Game.displayStore.getContainer("baddie-barrage/scale-holder"),this.mainHolder=this.scaleHolder.getContainer("baddie-barrage/main-holder"),this.bar=new BaddieBarrageBar(this),this.tutorialOverlay=new TutorialOverlay(this),this.inputManager=new BaddieBarrageInputManager(this,this.mainHolder),this.baddieManager=new BaddieBarrageBaddieManager(this),this.henry=Game.displayStore.getContainer("baddie-barrage/henry"),this.henrySpine=Game.displayStore.getSpine("baddie-barrage/henry-spine"),this.henrySpine.position.y=180,this.henrySpine.setAnim("idle",!0),this.henrySpine.stateData.setMix("idle","flying-punch",.2),this.henrySpine.stateData.setMix("flying-punch","idle",.2),this.henrySpine.stateData.setMix("idle","flying-kick",.2),this.henrySpine.stateData.setMix("flying-kick","idle",.2),this.henrySpine.stateData.setMix("idle","spinning-kick",.2),this.henrySpine.stateData.setMix("spinning-kick","idle",.01),this.henrySpine.stateData.setMix("yeah","idle",.2),this.henrySpine.stateData.setMix("idle","yeah",.2),this.henry.addChild(this.henrySpine),this.henrySpine.scale.x=this.henrySpine.scale.y=.9,this.shield=Game.displayStore.getContainer("baddie-barrage/shield"),this.shieldElements=[],this.shield.scale.y=1.5,this.shield.scale.y=0,this.shield.alpha=0,this.shield.scale.x=2,this.shieldInner=this.shield.getContainer("baddie-barrage/shield-inner"),this.shieldInner.position.x=-150;for(var i=0;i<4;i++){var n=this.shieldInner.getSpriteAt(i);n.blendMode=PIXI.BLEND_MODES.ADD;var o=2*Math.PI/Game.getRandom(50,100),a=n.position.x;this.shieldElements.push({count:Game.getRandom(0,50),origX:a,increase:o,sprite:n})}this.smashParticleContainer=Game.displayStore.getContainer("baddie-barrage/smash-particle-container"),this.hitParticleContainer=Game.displayStore.getContainer("baddie-barrage/hit-particle-container"),Game.coreData.setCurrentGame("baddie-barrage"),this.tutorialViewed=Game.coreData.getGameTutorialViewed("baddie-barrage"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("hub"),this.scoreHolder=Game.displayStore.getContainer("baddie-barrage/score-holder"),this.scoreHolder.position.y=80,this.scoreHolder.position.x=-53,this.scoreText=Game.displayStore.getBitmapText("baddie-barrage/score-font"),this.scoreText.position.x=63,this.scoreText.position.y=-23,this.scoreText.scale.x=this.scoreText.scale.y=.45,this.scoreText.text="0",this.addScoreText=Game.displayStore.getBitmapText("baddie-barrage/add-score-font"),this.addScoreText.text="+50!",this.addScoreText.tint=65280,this.addScoreText.blendMode=PIXI.BLEND_MODES.ADD,this.addScoreText.scale.x=this.addScoreText.scale.y=.55,this.addScoreText.position.x=-55,this.addScoreText.position.y=-25,this.addScoreHolder=Game.displayStore.getContainer("baddie-barrage/add-score-holder"),this.addScoreHolder.scale.x=this.addScoreHolder.scale.y=0,this.addScoreHolder.position.x=140,this.addScoreHolder.position.y=105,this.addScoreHolder.rotation=-.2,this.waveText=Game.displayStore.getBitmapText("baddie-barrage/wave-font"),this.waveText.text=Game.stringsManager.getStringTextContent("wave-prompt")+" 1",Game.stringsManager.setTextScale(this.waveText,"wave-prompt"),this.waveText.position.x=0-this.waveText.width/2+Game.stringsManager.getTextOffset("wave-prompt").xOffset,this.waveText.position.y=0-this.waveText.height/2+Game.stringsManager.getTextOffset("wave-prompt").yOffset,this.waveTextHolder=Game.displayStore.getContainer("baddie-barrage/wave-text-holder"),this.waveTextHolder.position.x=Game.stageWidth/2,this.waveTextHolder.position.y=Game.stageHeight/2-200,this.waveTextHolder.addChild(this.waveText),this.waveTextHolder.alpha=0,this.waveTextHolder.scale.x=this.waveTextHolder.scale.y=6,this.addScoreHolder.addChild(this.addScoreText),this.floorHolder=Game.displayStore.getContainer("baddie-barrage/floor-holder"),this.buildFloor(),this.layoutFloor(),this.mainHolder.addChild(this.bg),this.container.addChild(this.scaleHolder),this.scaleHolder.addChild(this.mainHolder),this.mainHolder.addChild(this.baddieManager.container),this.mainHolder.addChild(this.henry),this.mainHolder.addChild(this.shield),this.mainHolder.addChild(this.bar.container),this.container.addChild(this.scoreHolder),this.scoreHolder.addChild(this.scoreText),this.container.addChild(this.addScoreHolder),this.container.addChild(this.waveTextHolder);var e={lowerAngle:0,upperAngle:360,lowerVelocity:350,upperVelocity:2500,endScale:0,lowerStartScale:3,upperStartScale:9,XstartRange:10,YstartRange:10,blendMode:PIXI.BLEND_MODES.ADD,time:1,friction:.1,gravity:1500,cap:40,endAlpha:1,rotationPower:1},s={lowerAngle:0,upperAngle:360,lowerVelocity:350,upperVelocity:1200,endScale:0,lowerStartScale:8,upperStartScale:18,friction:.1,XstartRange:20,YstartRange:20,blendMode:PIXI.BLEND_MODES.ADD,time:1,gravity:800,cap:40,endAlpha:1,rotationPower:1};0==Game.isLowEndIPad&&(this.smashParticleBurst=new ParticleBurst(["baddie-barrage/pink-particle"],this.smashParticleContainer,this,e),this.mainHolder.addChild(this.smashParticleContainer),this.hitParticleBurst=new ParticleBurst(["baddie-barrage/green-particle"],this.hitParticleContainer,this,s),this.mainHolder.addChild(this.hitParticleContainer)),this.scaleHolder.position.x=Game.stageWidth/2,this.scaleHolder.position.y=180,this.mainHolder.position.y=-340,this.mainHolder.position.x=30,this.bar.updateSweepTime(.5+(40-this.wave)/20),1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("baddie-barrage",!0)},e.prototype.startGameplay=function(){this.startedGameplay=!0,this.floorSpeed=.12,this.game.ui.triggerEnjoyTheRide(),this.game.ui.setUI("gameplay-baddie-barrage"),this.game.powerUpManager.startGame(),Game.playSound("baddie-barrage/cpt-man-go-for-it"),this.introTimeline=new TimelineMax,this.introTimeline.call(function(){this.henrySpine.setAnim("yeah",!1),Game.playSound("baddie-barrage/henry-yeahh")},null,this,.3),this.introTimeline.call(function(){this.bar.open(),this.henrySpine.setAnim("idle",!0),this.henryIsIdling=!0},null,this,.9),this.showWaveText()},e.prototype.buildFloor=function(){this.floorPoles=[];for(var t=0;t<20;t++){var e=Game.displayStore.getSprite("baddie-barrage/floor-bar");e.width=3*Game.stageWidth,e.position.y=40*t,e.blendMode=PIXI.BLEND_MODES.ADD,e.alpha=.8,this.floorHolder.addChild(e),this.floorPoles.push({sprite:e,yPos:40*t})}this.floorHolder.position.x=-Game.stageWidth,this.floorHolder.position.y=330,this.mainHolder.addChild(this.floorHolder)},e.prototype.layoutFloor=function(){for(var t=0;t<this.floorPoles.length;t++){var e=this.floorPoles[t].sprite;this.floorPoles[t].yPos+=this.floorSpeed*this.powerupFactor,this.floorPoles[t].yPos>800&&(this.floorPoles[t].yPos=this.floorPoles[t].yPos-800+0),e.position.y=Math.pow(this.floorPoles[t].yPos,3)/7e5,e.scale.y=this.floorPoles[t].yPos/300}},e.prototype.tapScreen=function(){this.paused||this.bar.stop()},e.prototype.hasMissed=function(){this.attackTimeline=this.killTween(this.attackTimeline),this.attackTimeline=new TimelineMax,this.henryIsIdling=!1,this.game.powerUpManager.manuallyHidePowerUpButton(),0==this.powerUpIsActive?this.henryMiss():(this.henryMiss(),this.attackTimeline.call(this.game.powerUpManager.endPowerUpMode,null,this.game.powerUpManager,.7),this.attackTimeline.call(this.baddieManager.hitCurrentBaddie,[!1,!0],this.baddieManager,1),this.attackTimeline.call(this.nextBaddie,null,this,2)),Game.playSound("baddie-barrage/miss")},e.prototype.hasHit=function(t,e){var i;if(i=this.powerUpIsActive?2*t:t,this.score+=Math.round(i),this.addedScore=Math.round(i),this.henryIsIdling=!1,this.game.powerUpManager.manuallyHidePowerUpButton(),this.attackTimeline=this.killTween(this.attackTimeline),this.attackTimeline=new TimelineMax,0==this.powerUpIsActive)if(1==e){switch(this.numberOfTargets){case 1:this.attackTimeline.call(this.henrySpine.setAnim,["flying-kick",!1],this.henrySpine,.2);break;case 2:this.attackTimeline.call(this.henrySpine.setAnim,["flying-kick-2-hits",!1],this.henrySpine,.2);break;case 3:this.attackTimeline.call(this.henrySpine.setAnim,["flying-kick-3-hits",!1],this.henrySpine,.2)}Game.playSound("baddie-barrage/henry-attack-2")}else{switch(this.numberOfTargets){case 1:this.attackTimeline.call(this.henrySpine.setAnim,["flying-punch",!1],this.henrySpine,.2);break;case 2:this.attackTimeline.call(this.henrySpine.setAnim,["flying-punch-2-hits",!1],this.henrySpine,.2);break;case 3:this.attackTimeline.call(this.henrySpine.setAnim,["flying-punch-3-hits",!1],this.henrySpine,.2)}Game.playSound("baddie-barrage/henry-attack-1")}else this.attackTimeline.call(this.henrySpine.setAnim,["spinning-kick",!1],this.henrySpine,.2),Game.playSound("baddie-barrage/henry-attack-3");switch(this.attackTimeline.call(Game.playSound,["baddie-barrage/punch-"+Game.getRandom(1,9,!0)],this,.5),this.attackTimeline.call(Game.playSound,["baddie-barrage/swipe-"+Game.getRandom(1,7,!0)],this,.3),0==this.powerUpIsActive?this.attackTimeline.call(Game.playSound,["baddie-barrage/baddie-pain-"+Game.getRandom(1,6,!0)],this,.5):this.attackTimeline.call(Game.playSound,["baddie-barrage/baddie-pain-big-"+Game.getRandom(1,5,!0)],this,.5),0==this.henryFlipped?this.attackTimeline.add(TweenMax.to(this.henry.position,.45/this.powerupFactor,{x:220,ease:Power1.easeOut}),.4):this.attackTimeline.add(TweenMax.to(this.henry.position,.45/this.powerupFactor,{x:-220,ease:Power1.easeOut}),.4),this.attackTimeline.add(TweenMax.to(this.henry.position,.2/this.powerupFactor,{y:540,ease:Power1.easeOut}),.4),this.attackTimeline.add(TweenMax.to(this.henry.position,.2/this.powerupFactor,{y:560,ease:Power1.easeIn})),this.attackTimeline.call(this.baddieManager.baddieAttack,[!0],this.baddieManager,.25),this.attackTimeline.call(this.baddieManager.hitCurrentBaddie,[e],this.baddieManager,.6),this.numberOfTargets){case 1:this.attackTimeline.call(function(){0==this.henryFlipped?this.fireHitParticles("right",t/50):this.fireHitParticles("left",t/50)},null,this,.6);break;case 2:this.attackTimeline.call(function(){0==this.henryFlipped?this.fireHitParticles("right",t/50):this.fireHitParticles("left",t/50)},null,this,.6),this.attackTimeline.call(function(){0==this.henryFlipped?this.fireHitParticles("right",t/50):this.fireHitParticles("left",t/50)},null,this,.7);break;case 3:this.attackTimeline.call(function(){0==this.henryFlipped?this.fireHitParticles("right",t/50):this.fireHitParticles("left",t/50)},null,this,.6),this.attackTimeline.call(function(){0==this.henryFlipped?this.fireHitParticles("right",t/50):this.fireHitParticles("left",t/50)},null,this,.8),this.attackTimeline.call(function(){0==this.henryFlipped?this.fireHitParticles("right",t/50):this.fireHitParticles("left",t/50)},null,this,.9)}this.attackTimeline.call(function(){0==this.henryFlipped?this.fireHitParticles("right",t/50):this.fireHitParticles("left",t/50)},null,this,.6),this.attackTimeline.call(this.nextBaddie,null,this,"+=0.2")},e.prototype.earnFocusPoint=function(){this.game.powerUpManager.earnedFocusPoint()},e.prototype.showWaveText=function(){this.nextWaveTimeline=this.killTween(this.nextWaveTimeline),this.nextWaveTimeline=new TimelineMax,this.wave>1&&Game.playSound("baddie-barrage/shine"),this.progress=1,this.waveText.text=Game.stringsManager.getStringTextContent("wave-prompt")+" "+this.wave.toString(),this.waveSize=1+Math.round(this.totalProgress/4),this.waveSize>10&&(this.waveSize=10);var t=(18-this.wave)/7;t<1&&(t=1),this.bar.updateSweepTime(t),this.nextWaveTimeline.add([TweenMax.to(this.waveTextHolder.scale,.8,{x:1,y:1,ease:Bounce.easeOut}),TweenMax.to(this.waveTextHolder,.4,{alpha:1,ease:Power1.easeOut})],1),this.nextWaveTimeline.add([TweenMax.to(this.waveTextHolder.scale,.5,{x:6,y:6,ease:Power2.easeIn}),TweenMax.to(this.waveTextHolder,.5,{alpha:0,ease:Power1.easeOut})],2.3),this.nextWaveTimeline.call(Game.playSound,["baddie-barrage/critical-hit",.5],this,1.2),this.wave++},e.prototype.zoomFloor=function(){this.floorSpeed=.12+(this.wave-1)/100,this.floorZoomTween=TweenMax.to(this,24/this.powerupFactor,{floorSpeed:14,ease:Power1.easeOut,repeat:1,yoyo:!0,useFrames:!0}),Game.playSound("baddie-barrage/wind-up-3",.3)},e.prototype.nextBaddie=function(){this.updateScoreText(),this.numberOfTargets=1,this.nextBaddieTimeline=this.killTween(this.nextBaddieTimeline),this.nextBaddieTimeline=new TimelineMax,this.progress==this.waveSize-1&&(this.wave>=3&&this.wave<7&&(this.numberOfTargets=2),this.wave>=7&&(this.numberOfTargets=3)),this.progress>=this.waveSize?(this.nextBaddieTimeline.call(this.henrySpine.setAnim,["idle",!0],this.henrySpine,1),this.henryIsIdling=!0,this.game.powerUpManager.manuallyShowPowerUpButton(),this.bar.close(!0),this.nextBaddieTimeline.add([TweenMax.to(this.scaleHolder.scale,1,{x:3,y:3,ease:Power2.easeInOut,repeat:1,yoyo:!0}),TweenMax.to(this.henry.position,1,{y:850,ease:Power2.easeInOut,repeat:1,yoyo:!0})],0),1==this.henryFlipped?this.nextBaddieTimeline.add(TweenMax.to(this.henry.position,1,{x:"-=120",ease:Power2.easeInOut,repeat:1,yoyo:!0}),0):this.nextBaddieTimeline.add(TweenMax.to(this.henry.position,1,{x:"+=120",ease:Power2.easeInOut,repeat:1,yoyo:!0}),0),this.showWaveText()):(TweenMax.from(this,30/this.powerupFactor,{floorSpeed:8+2/this.powerupFactor,useFrames:!0}),this.progress++,this.baddieManager.setCurrentBaddie(this.progress),this.nextBaddieTimeline.call(function(){this.henrySpine.setAnim("idle",!0),this.henryIsIdling=!0,this.game.powerUpManager.manuallyShowPowerUpButton(),this.progress%2==0?this.setHenrySide("right"):this.setHenrySide("left")},null,this,.1),this.bar.sweep(1)),this.totalProgress++},e.prototype.setHenrySide=function(t){"left"==t&&(this.henryFlipped=!1,this.henry.scale.x=1,this.shield.scale.x=2,TweenMax.to(this.henry.position,.3,{x:-400})),"right"==t&&(this.henryFlipped=!0,this.henry.scale.x=-1,this.shield.scale.x=-2,TweenMax.to(this.henry.position,.3,{x:350}))},e.prototype.henryMiss=function(){this.attackTimeline=this.killTween(this.attackTimeline),this.attackTimeline=new TimelineMax,this.attackTimeline.call(this.baddieManager.baddieAttack,[!1],this.baddieManager,.2),0==this.powerUpIsActive&&this.attackTimeline.call(this.henrySpine.setAnim,["hit",!1],this.henrySpine,.4);var t=new RoughEase({strength:3,points:4,randomize:!1,template:Power2.easeOut});this.attackTimeline.add(TweenMax.to(this.scaleHolder.scale,.01,{x:1.13,y:1.13,ease:t}),.6),this.attackTimeline.add(TweenMax.to(this.scaleHolder.scale,.2,{x:1,y:1,ease:t})),this.attackTimeline.call(Game.playSound,["baddie-barrage/baddie-attack-"+Game.getRandom(1,6,!0)],this,0),this.attackTimeline.call(Game.playSound,["baddie-barrage/punch-"+Game.getRandom(1,9,!0)],this,.5),0==this.powerUpIsActive&&this.attackTimeline.call(Game.playSound,["baddie-barrage/henry-hurt-"+Game.getRandom(1,4,!0)],this,.5),0==this.powerUpIsActive&&(this.attackTimeline.call(this.baddieManager.removeAllBaddies,null,this.baddieManager,1),this.attackTimeline.call(this.showGameOverHenry,null,this,.5))},e.prototype.tutorialOverlayClosed=function(){this.startGameplay()},e.prototype.updateScoreText=function(){1!=this.characterIsHit&&(this.scoreNumber=this.score,this.addScoreText.text="+"+this.addedScore.toString()+"!",this.addScoreHolder.scale.x=this.addScoreHolder.scale.y=3,this.addScoreHolder.alpha=1,this.addScoreHolder.position.y=120,this.scoreTimeline=this.killTween(this.scoreTimeline),this.scoreTimeline=new TimelineMax,this.scoreTimeline.add(TweenMax.to(this.scoreHolder.scale,.1,{x:1.2,y:1.2,ease:Power2.easeIn}),.2),this.scoreTimeline.call(function(){this.addingScore=!0},null,this,.2),this.scoreTimeline.add(TweenMax.to(this.scoreHolder.scale,.3,{x:1,y:1,ease:Power2.easeInOut}),1),this.scoreTimeline.add(TweenMax.to(this.addScoreHolder.scale,1,{x:1.4,y:1.4,ease:Elastic.easeOut}),0),this.scoreTimeline.add(TweenMax.to(this.addScoreHolder.position,2,{y:20,ease:Power4.easeIn}),0),this.scoreTimeline.add(TweenMax.to(this.addScoreHolder,2,{alpha:0,ease:Power4.easeIn}),0))},e.prototype.uiClicked=function(e){switch(t.prototype.uiClicked.call(this,e),this.tutorialOverlay.uiClicked(e),e.id){case"playbuttonlarge":this.resume();break;case"pause-button":this.pause(!1)}},e.prototype.uiRolledOver=function(e){t.prototype.uiRolledOver.call(this,e)},e.prototype.fireHitParticles=function(t,e){if("left"==t)i={lowerAngle:300,upperAngle:340,lowerVelocity:400+400*e,upperVelocity:1200+1e3*e,endScale:0,lowerStartScale:2+2*e,upperStartScale:10+8*e,friction:.1,XstartRange:20,YstartRange:10,blendMode:PIXI.BLEND_MODES.ADD,time:1,gravity:2e3,cap:40,endAlpha:1,rotationPower:1,stagger:200};else var i={lowerAngle:200,upperAngle:240,lowerVelocity:400+400*e,upperVelocity:1200+1e3*e,endScale:0,lowerStartScale:2+2*e,upperStartScale:10+8*e,friction:.1,XstartRange:20,YstartRange:10,blendMode:PIXI.BLEND_MODES.ADD,time:1,gravity:2e3,cap:40,endAlpha:1,rotationPower:1,stagger:200};0==Game.isLowEndIPad&&(this.hitParticleBurst.updateParams(i,this.hitParticleBurst),0==this.powerUpIsActive?(this.hitParticleContainer.position.x="left"==t?-390:390,this.hitParticleContainer.position.y=460,this.hitParticleBurst.fire()):(this.smashParticleContainer.position.x="left"==t?-360:360,this.smashParticleContainer.position.y=460,this.smashParticleBurst.fire())),0==this.powerUpIsActive?(this.scaleHolder.scale.x=1.1,this.scaleHolder.scale.y=1.1):(this.scaleHolder.scale.x=1.2,this.scaleHolder.scale.y=1.2);var n=new RoughEase({strength:3,points:6,randomize:!1,template:Power2.easeOut});TweenMax.to(this.scaleHolder.scale,.25,{x:1,y:1,ease:n})},e.prototype.fireSmashParticles=function(t){0==Game.isLowEndIPad&&(this.smashParticleContainer.position.x=t.x,this.smashParticleContainer.position.y=t.y,this.smashParticleBurst.fire());var e=new RoughEase({strength:3,points:6,randomize:!1,template:Power2.easeOut});this.scaleHolder.scale.x=1.1,this.scaleHolder.scale.y=1.1,TweenMax.to(this.scaleHolder.scale,.25,{x:1,y:1,ease:e})},e.prototype.incrementScore=function(){if(1==this.addingScore){var t=Math.ceil(this.interval);this.currentScore<this.scoreNumber?(0==this.scoreSoundPlaying&&(this.scoreSoundPlaying=!0,Game.playSound("baddie-barrage/tick-up",.25)),this.currentScore,this.highscoreNumber,this.currentScore+t<=this.scoreNumber?this.currentScore+=t:this.currentScore+=1,this.scoreText.text=String(this.currentScore)):this.addingScore=!1}},e.prototype.tick=function(){if(t.prototype.tick.call(this),1!=this.paused&&1!=this.tutorialOverlay.isOpen){1==this.scoreSoundPlaying&&++this.scoreSoundTimer>=this.scoreSoundLimit&&(this.scoreSoundTimer=0,this.scoreSoundPlaying=!1);for(var e=0;e<this.shieldElements.length;e++){this.shieldElements[e].sprite;this.shieldElements[e].sprite.position.x=this.shieldElements[e].origX+2*Math.sin(this.shieldElements[e].count),this.shieldElements[e].sprite.alpha=.5+3*Math.sin(this.shieldElements[e].count)/20,this.shieldElements[e].count+=this.shieldElements[e].increase*this.speedRatio*8}this.layoutFloor(),this.baddieManager.tick(this.floorSpeed*this.powerupFactor),this.incrementScore(),this.shield.position.x=this.henry.position.x,this.shield.position.y=this.henry.position.y-60,this.inputManager.tick()}},e.prototype.showGameOverHenry=function(){this.gameOverTimeline=this.killTween(this.gameOverTimeline),this.gameOverTimeline=new TimelineMax;new RoughEase({strength:3,points:30,randomize:!1,clamp:!0});var t=["henry-er","henry-i-get-it"];this.gameOverTimeline.call(Game.playSound,["baddie-barrage/"+t[Game.getRandom(0,1,!0)]],this,.8),this.gameOverTimeline.call(this.gameOver,[this],this,2)},e.prototype.gameOver=function(t){this.stars=0,this.score>200&&(this.stars=1),this.score>500&&(this.stars=2),this.score>800&&(this.stars=3),Game.coreData.setCurrentGameScoreFromGame(this.score,this.stars),this.game.setScene("gameoverScene",!0)},e.prototype.keyDown=function(e){t.prototype.keyDown.call(this,e),1!=this.paused&&("left"==e?this.leftKeyDown():"right"==e&&this.rightKeyDown(),"spacebar"==e&&this.tapScreen())},e.prototype.keyUp=function(e){t.prototype.keyUp.call(this,e),1!=this.paused&&("left"==e?this.leftKeyUp():"right"==e&&this.rightKeyUp())},e.prototype.leftKeyDown=function(){},e.prototype.leftKeyUp=function(){},e.prototype.rightKeyDown=function(){},e.prototype.rightKeyUp=function(){},e.prototype.restore=function(){t.prototype.restore.call(this),this.game.ui.setUI("pause")},e.prototype.activatePowerUpEffect=function(){this.powerupFactor=1.3,this.baddieManager.focusActive=!0,this.bar.activatePowerup(),this.addScoreText.tint=16515310,this.powerUpIsActive=!0,Game.stopSound("baddie-barrage/dance"),1==this.henryIsIdling&&(this.henrySpine.setAnim("yeah",!1),Game.playSound("baddie-barrage/henry-yeahh")),this.powerupTimeline=this.killTween(this.powerupTimeline),this.powerupTimeline=new TimelineMax,this.powerupTimeline.add([TweenMax.to(this.shield.scale,1,{y:3,ease:Elastic.easeOut}),TweenMax.to(this.shield,.2,{alpha:1,ease:Power2.easeOut}),TweenMax.to(this.shieldInner.position,1,{x:55,ease:Elastic.easeOut})]),this.powerupTimeline.call(function(){1==this.henryIsIdling&&this.henrySpine.setAnim("idle",!0)},null,this,.6),this.powerupTimeline.call(Game.playSound,["baddie-barrage/shield-loop",.8],this,.5),this.powerupTimeline.call(Game.playSound,["baddie-barrage/henry-feels-good"],this,1),this.powerupTimeline.call(Game.playSound,["baddie-barrage/hero-music-intro"],this,.3),this.powerupTimeline.call(Game.playSound,["baddie-barrage/hero-music-loop"],this,.3)},e.prototype.deactivatePowerUpEffect=function(){this.bar.deactivatePowerup(),this.baddieManager.focusActive=!1,this.addScoreText.tint=65280,Game.stopSound("baddie-barrage/shield-loop"),Game.stopSound("baddie-barrage/hero-music-loop"),Game.playSound("baddie-barrage/shield-lose"),this.powerUpIsActive=!1,this.powerupFactor=1,this.powerupTimeline=this.killTween(this.powerupTimeline),this.powerupTimeline=new TimelineMax,this.powerupTimeline.add(TweenMax.to(this.shield,.05,{alpha:0,repeat:20,yoyo:!0})),this.powerupTimeline.add([TweenMax.to(this.shield.scale,.4,{y:0,ease:Back.easeIn}),TweenMax.to(this.shield,.4,{alpha:0,ease:Power2.easeInOut}),TweenMax.to(this.shieldInner.position,.4,{x:-100,ease:Power2.easeOut})]),this.powerupTimeline.call(Game.playSound,["baddie-barrage/dance"],this,.5)},e.prototype.pause=function(e){0==e&&t.prototype.pause.call(this,e),this.game.powerUpManager.pause(),this.baddieManager.pause(),this.henrySpine.pause(),Game.pauseSound("baddie-barrage/shield-loop"),Game.pauseSound("baddie-barrage/hero-music-loop"),Game.pauseSound("baddie-barrage/dance"),this.hitParticleBurst.pause(),this.pauseResumeTween(this.gameOverTimeline,"pause"),this.pauseResumeTween(this.powerupTimeline,"pause"),this.pauseResumeTween(this.scoreTimeline,"pause"),this.pauseResumeTween(this.attackTimeline,"pause"),this.pauseResumeTween(this.nextWaveTimeline,"pause"),this.pauseResumeTween(this.introTimeline,"pause"),this.pauseResumeTween(this.gameOverDelay,"pause"),this.pauseResumeTween(this.floorZoomTween,"pause"),this.pauseResumeTween(this.nextBaddieTimeline,"pause"),this.bar.pause()},e.prototype.resume=function(){t.prototype.resume.call(this),this.setBackgroundColor(1118481),Game.resumeSound("baddie-barrage/shield-loop"),Game.resumeSound("baddie-barrage/hero-music-loop"),Game.resumeSound("baddie-barrage/dance"),this.game.ui.setUI("gameplay-baddie-barrage"),this.baddieManager.resume(),this.henrySpine.resume(),this.game.powerUpManager.resume(),this.pauseResumeTween(this.gameOverTimeline,"resume"),this.pauseResumeTween(this.powerupTimeline,"resume"),this.pauseResumeTween(this.scoreTimeline,"resume"),this.pauseResumeTween(this.attackTimeline,"resume"),this.pauseResumeTween(this.introTimeline,"resume"),this.pauseResumeTween(this.nextWaveTimeline,"resume"),this.pauseResumeTween(this.gameOverDelay,"resume"),this.pauseResumeTween(this.floorZoomTween,"resume"),this.pauseResumeTween(this.nextBaddieTimeline,"resume"),this.bar.resume(),this.hitParticleBurst.resume()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.tutorialOverlay.destroy(),this.inputManager.destroy(),this.hitParticleBurst.destroy(),this.baddieManager.destroy(),0==Game.isLowEndIPad&&this.smashParticleBurst.destroy(),this.bar.destroy(),Game.stopSound("baddie-barrage/dance"),Game.stopSound("baddie-barrage/hero-music-loop"),Game.stopSound("baddie-barrage/shield-loop"),this.gameOverTimeline=this.killTween(this.gameOverTimeline),this.powerupTimeline=this.killTween(this.powerupTimeline),this.scoreTimeline=this.killTween(this.scoreTimeline),this.attackTimeline=this.killTween(this.attackTimeline),this.nextWaveTimeline=this.killTween(this.nextWaveTimeline),this.gameOverDelay=this.killTween(this.gameOverDelay),this.floorZoomTween=this.killTween(this.floorZoomTween),this.introTimeline=this.killTween(this.introTimeline),this.nextBaddieTimeline=this.killTween(this.nextBaddieTimeline);for(var e=0;e<this.floorHolder.children.length;e++)Game.displayStore.returnPooledItem(this.floorHolder.getSpriteAt(e))},e}(Scene),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MindTheGapGameplayScene=function(t){function e(e){t.call(this,e),this.id="mindTheGapGameplayScene"}return __extends(e,t),e.prototype.init=function(e){t.prototype.init.call(this),this.setBackgroundColor(12961221),this.animatingPortalsIn=!1,this.animatingPortalsOut=!1,Game.playSound("mind-the-gap/background-music-2",.1),Game.playSound("mind-the-gap/man-cave",.05),this.tutorialOverlay=new TutorialOverlay(this),Game.coreData.setCurrentGame("mind-the-gap"),this.focusModeActive=!1,this.firstInteraction=!1,this.anchorScaleUp=!0,this.tutorialArmLeft=!1,this.tutorialArmRight=!1,this.powerUpPortalScored=!1,this.lastColourSpawned="none",this.lastRowIndexSpawned=-1,this.leftHandTick=0,this.rightHandTick=0,this.henryTick=0,this.rightHandExtentionActive=!1,this.leftHandExtentionActive=!1,this.tutorialViewed=Game.coreData.getGameTutorialViewed("mind-the-gap"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("hub"),this.mainHolder=Game.displayStore.getContainer("mind-the-gap/main-holder"),this.scoreHolder=Game.displayStore.getContainer("mind-the-gap/score-holder"),this.scoreFont=Game.displayStore.getBitmapText("mind-the-gap/score-font"),this.scoreFont.scale.x=.8,this.scoreFont.scale.y=.8,this.scoreBGElement=Game.displayStore.getSprite("mind-the-gap/score-bg-element"),this.scoreHolder.addChild(this.scoreBGElement),this.scoreHolder.addChild(this.scoreFont),this.container.addChild(this.mainHolder),this.container.addChild(this.scoreHolder),this.scoreHolder.position.x=Game.stageWidth/2,this.scoreHolder.position.y=50,this.holoFilterSprite=Game.displayStore.getSprite("mind-the-gap/holo-filter"),this.holoFilter=new PIXI.filters.DisplacementFilter(this.holoFilterSprite),this.powerupGreenWallFlash=Game.displayStore.getSprite("mind-the-gap/green-powerup-wall-flash"),this.powerupOrangeWallFlash=Game.displayStore.getSprite("mind-the-gap/orange-powerup-wall-flash"),this.powerupPurpleWallFlash=Game.displayStore.getSprite("mind-the-gap/pink-powerup-wall-flash"),this.landingParticlesContainer=Game.displayStore.getContainer("mind-the-gap/landing-particle-container"),this.landingPowerupParticlesContainer=Game.displayStore.getContainer("mind-the-gap/landing-powerup-particle-container"),this.holoFilter.scale.x=0,this.holoFilter.scale.y=0,this.holoFilterSprite.position.x=Game.stageWidth/2,this.holoFilterSprite.position.y=Game.stageHeight/2,this.holoFilterSprite.scale.x=1,this.holoFilterSprite.scale.y=1,this.glitchEaseAmount=5,this.targetGlitchScale=0,this.targetGlitchAlpha=0,this.beamTick=0,this.stars=0,this.targetGlitchYPos=Game.stageHeight/2,this.validSwipeAnchors=new Array,this.chickenYOffset=45,this.wallOffset=40,this.gapWidth=320,this.bridgeAngleSnapRange=.2,this.armEaseAmount=8,this.bridgeInputSwipeMode=!1,this.chickenSpawning=!1,this.score=0,this.portalParticleCounter=0,this.targetBridgeEaseAmount=6,this.targetBridgeWidth=0,this.currentBridgeAngle=0,this.difficultyCheckDuration=2,this.gameoverTriggered=!1,this.currentNodeSwipingIndex=0,this.currentNodeTargetIndex=null,this.glitchCount=0,this.glitchLimit=10,this.bridgeActive=!1,this.bgMiddleLeft=Game.displayStore.getSprite("mind-the-gap/scene-bg-panel"),this.bgMiddleRight=Game.displayStore.getSprite("mind-the-gap/scene-bg-panel"),this.bgMiddleRight.scale.x=-1,this.bgMiddleLeft.position.x=Game.stageWidth/2,this.bgMiddleRight.position.x=Game.stageWidth/2,this.mainHolder.addChild(this.bgMiddleLeft),this.mainHolder.addChild(this.bgMiddleRight),this.platformFront1=Game.displayStore.getSprite("mind-the-gap/platform-front"),this.platformFront3=Game.displayStore.getSprite("mind-the-gap/platform-front"),this.rightLight=Game.displayStore.getContainer("mind-the-gap/alarm-light"),this.leftLight=Game.displayStore.getContainer("mind-the-gap/alarm-light"),this.portalOrder=new Array,this.portalOrder.push({colour:"orange",portal:Game.displayStore.getContainer("mind-the-gap/orange-portal-back-container"),frontPortal:Game.displayStore.getContainer("mind-the-gap/orange-portal-front-container"),portalBack:Game.displayStore.getSprite("mind-the-gap/portal-pipe-back"),portalFront:Game.displayStore.getSprite("mind-the-gap/portal-pipe-front"),hexGrid:Game.displayStore.getSprite("mind-the-gap/portal-hex-grid"),innerGlow:Game.displayStore.getSprite("mind-the-gap/portal-glow"),outerGlow:Game.displayStore.getSprite("mind-the-gap/portal-orange-glow"),outerGlow2:Game.displayStore.getSprite("mind-the-gap/portal-orange-glow"),portalInner:Game.displayStore.getSprite("mind-the-gap/portal-orange-inner"),platformGlow:Game.displayStore.getSprite("mind-the-gap/orange-platform"),portalFlash:Game.displayStore.getSprite("mind-the-gap/portal-flash"),scored:!1,error:Game.displayStore.getSprite("mind-the-gap/portal-error")}),this.portalOrder.push({colour:"pink",portal:Game.displayStore.getContainer("mind-the-gap/purple-portal-back-container"),frontPortal:Game.displayStore.getContainer("mind-the-gap/purple-portal-front-container"),portalBack:Game.displayStore.getSprite("mind-the-gap/portal-pipe-back"),portalFront:Game.displayStore.getSprite("mind-the-gap/portal-pipe-front"),hexGrid:Game.displayStore.getSprite("mind-the-gap/portal-hex-grid"),innerGlow:Game.displayStore.getSprite("mind-the-gap/portal-glow"),outerGlow:Game.displayStore.getSprite("mind-the-gap/portal-purple-glow"),outerGlow2:Game.displayStore.getSprite("mind-the-gap/portal-purple-glow"),portalInner:Game.displayStore.getSprite("mind-the-gap/portal-purple-inner"),platformGlow:Game.displayStore.getSprite("mind-the-gap/pink-platform"),portalFlash:Game.displayStore.getSprite("mind-the-gap/portal-flash"),scored:!1,error:Game.displayStore.getSprite("mind-the-gap/portal-error")}),this.portalOrder.push({colour:"green",portal:Game.displayStore.getContainer("mind-the-gap/green-portal-back-container"),frontPortal:Game.displayStore.getContainer("mind-the-gap/green-portal-front-container"),portalBack:Game.displayStore.getSprite("mind-the-gap/portal-pipe-back"),portalFront:Game.displayStore.getSprite("mind-the-gap/portal-pipe-front"),hexGrid:Game.displayStore.getSprite("mind-the-gap/portal-hex-grid"),innerGlow:Game.displayStore.getSprite("mind-the-gap/portal-glow"),outerGlow:Game.displayStore.getSprite("mind-the-gap/portal-green-glow"),outerGlow2:Game.displayStore.getSprite("mind-the-gap/portal-green-glow"),portalInner:Game.displayStore.getSprite("mind-the-gap/portal-green-inner"),platformGlow:Game.displayStore.getSprite("mind-the-gap/green-platform"),portalFlash:Game.displayStore.getSprite("mind-the-gap/portal-flash"),scored:!1,error:Game.displayStore.getSprite("mind-the-gap/portal-error")});for(r=0;r<this.portalOrder.length;r++){var i=this.portalOrder[r];this.portalOrder[r].portal.addChild(i.platformGlow),this.portalOrder[r].portal.addChild(i.portalBack),this.portalOrder[r].portal.addChild(i.portalInner),this.portalOrder[r].portal.addChild(i.innerGlow),this.portalOrder[r].portal.addChild(i.hexGrid),this.portalOrder[r].portal.addChild(i.outerGlow),this.portalOrder[r].frontPortal.addChild(i.portalFlash),this.portalOrder[r].portal.addChild(i.error),this.portalOrder[r].frontPortal.addChild(i.portalFront),this.portalOrder[r].frontPortal.addChild(i.outerGlow2),i.innerGlow.blendMode=PIXI.BLEND_MODES.ADD,i.outerGlow.blendMode=PIXI.BLEND_MODES.ADD,i.outerGlow2.blendMode=PIXI.BLEND_MODES.ADD,i.hexGrid.blendMode=PIXI.BLEND_MODES.ADD,i.portalFlash.blendMode=PIXI.BLEND_MODES.ADD,i.platformGlow.position.y=79,i.platformGlow.blendMode=PIXI.BLEND_MODES.ADD,i.portalBack.position.x=-75,i.portalFront.position.x=-90,i.error.position.x=24,i.error.position.y=0,i.error.visible=!1,i.portalFlash.alpha=0,i.portalFlash.width=0,i.innerGlow.position.x=5,i.portalInner.position.x=25,i.outerGlow.position.x=52,i.outerGlow2.position.x=0,i.outerGlow.scale.x=-1,i.hexGrid.position.x=25,i.platformGlow.alpha=.5}if(0==Game.isLowEndIPad){this.orangeParticles=new Array,this.greenParticles=new Array,this.pinkParticles=new Array,this.powerupParticles=new Array,this.orangePortalParticles=Game.displayStore.getContainer("mind-the-gap/portal-particle-container"),this.greenPortalParticles=Game.displayStore.getContainer("mind-the-gap/portal-particle-container"),this.pinkPortalParticles=Game.displayStore.getContainer("mind-the-gap/portal-particle-container"),this.powerupPortalParticles=Game.displayStore.getContainer("mind-the-gap/powerup-portal-particle-container");for(r=0;r<20;r++)this.orangeParticles.push({sprite:Game.displayStore.getSprite("mind-the-gap/orange-particle"),active:!1}),this.orangePortalParticles.addChild(this.orangeParticles[r].sprite),this.orangeParticles[r].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.orangeParticles[r].sprite.alpha=0;for(r=0;r<20;r++)this.greenParticles.push({sprite:Game.displayStore.getSprite("mind-the-gap/green-particle"),active:!1}),this.greenPortalParticles.addChild(this.greenParticles[r].sprite),this.greenParticles[r].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.greenParticles[r].sprite.alpha=0;for(r=0;r<20;r++)this.pinkParticles.push({sprite:Game.displayStore.getSprite("mind-the-gap/pink-particle"),active:!1}),this.pinkPortalParticles.addChild(this.pinkParticles[r].sprite),this.pinkParticles[r].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.pinkParticles[r].sprite.alpha=0;for(r=0;r<30;r++)r<10?this.powerupParticles.push({sprite:Game.displayStore.getSprite("mind-the-gap/green-particle"),active:!1}):r>=10&&r<20?this.powerupParticles.push({sprite:Game.displayStore.getSprite("mind-the-gap/pink-particle"),active:!1}):this.powerupParticles.push({sprite:Game.displayStore.getSprite("mind-the-gap/orange-particle"),active:!1}),this.powerupPortalParticles.addChild(this.powerupParticles[r].sprite),this.powerupParticles[r].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.powerupParticles[r].sprite.alpha=0;this.powerupParticles=this.shuffleArray(this.powerupParticles),this.portalOrder[0].portal.addChild(this.orangePortalParticles),this.portalOrder[1].portal.addChild(this.pinkPortalParticles),this.portalOrder[2].portal.addChild(this.greenPortalParticles),this.orangePortalParticles.position.x=this.portalOrder[0].hexGrid.position.x,this.orangePortalParticles.position.y=this.portalOrder[0].hexGrid.position.y,this.powerupPortalParticles.position.x=this.portalOrder[0].hexGrid.position.x,this.powerupPortalParticles.position.y=this.portalOrder[0].hexGrid.position.y,this.powerupPortalParticles.visible=!1,this.pinkPortalParticles.position.x=this.portalOrder[1].hexGrid.position.x,this.pinkPortalParticles.position.y=this.portalOrder[1].hexGrid.position.y,this.greenPortalParticles.position.x=this.portalOrder[2].hexGrid.position.x,this.greenPortalParticles.position.y=this.portalOrder[2].hexGrid.position.y}if(this.portalOrder=this.shuffleArray(this.portalOrder),0==Game.isLowEndIPad)for(r=0;r<this.portalOrder.length;r++)this.portalOrder[r].portalFront.tint=16777215,this.portalOrder[r].portalBack.tint=16777215,this.portalOrder[r].hexGrid.tint=16777215,this.portalOrder[r].portalInner.tint=16777215,this.portalOrder[r].portalFront.blendMode=PIXI.BLEND_MODES.NORMAL,this.portalOrder[r].portalBack.blendMode=PIXI.BLEND_MODES.NORMAL,this.portalOrder[r].hexGrid.blendMode=PIXI.BLEND_MODES.NORMAL,this.portalOrder[r].portalInner.blendMode=PIXI.BLEND_MODES.NORMAL,this.portalOrder[r].frontPortal.alpha=1,this.portalOrder[r].portal.alpha=1;this.portalAllColoursHolderFront=Game.displayStore.getContainer("mind-the-gap/portal-powerup-holder-front"),this.portalAllColoursHolderBack=Game.displayStore.getContainer("mind-the-gap/portal-powerup-holder-back"),this.portalPowerUpInnerGreen=this.portalAllColoursHolderBack.getSprite("mind-the-gap/portal-powerup-green-inner"),this.portalPowerUpInnerPurple=this.portalAllColoursHolderBack.getSprite("mind-the-gap/portal-powerup-purple-inner"),this.portalPowerUpInnerOrange=this.portalAllColoursHolderBack.getSprite("mind-the-gap/portal-powerup-orange-inner"),this.portalPowerUpBackGlow=this.portalAllColoursHolderBack.getSprite("mind-the-gap/portal-powerup-glow-back"),this.powerUpPlatform=this.portalAllColoursHolderBack.getSprite("mind-the-gap/powerup-platform"),this.portalPowerUpFrontGlow=this.portalAllColoursHolderFront.getSprite("mind-the-gap/portal-powerup-glow-front"),this.powerUpPortalCore=this.portalAllColoursHolderBack.getSprite("mind-the-gap/powerup-portal-glow-core"),this.powerUpPortalFlash=this.portalAllColoursHolderFront.getSprite("mind-the-gap/powerup-portal-flash"),this.powerUpPortalFlash.blendMode=PIXI.BLEND_MODES.ADD,this.powerUpPortalCore.blendMode=PIXI.BLEND_MODES.ADD,this.powerUpPortalFlash.alpha=0,this.powerUpPortalFlash.width=0,this.portalPowerUpInnerGreen.alpha=0,this.portalPowerUpInnerPurple.alpha=0,this.portalPowerUpInnerOrange.alpha=0,this.portalPowerUpBackGlow.blendMode=PIXI.BLEND_MODES.ADD,this.portalPowerUpFrontGlow.blendMode=PIXI.BLEND_MODES.ADD,this.connectedAncorAPos=[0,0],this.connectedAncorBPos=[0,0],this.difficultyParams=new Array,this.featherContainer=Game.displayStore.getContainer("mind-the-gap/feather-container");var n={lowerAngle:250,upperAngle:290,lowerVelocity:800,upperVelocity:1400,lowerStartScale:.4,stagger:100,upperStartScale:1,friction:.07,XstartRange:30,YstartRange:30,time:4,gravity:700,cap:20,endAlpha:1,rotationPower:10};this.featherBurst=new ParticleBurst(["mind-the-gap/feather-1","mind-the-gap/feather-2"],this.featherContainer,this,n);var o={lowerAngle:230,upperAngle:310,lowerVelocity:300,upperVelocity:300,lowerStartScale:.4,stagger:70,upperStartScale:1.5,friction:.07,XstartRange:10,YstartRange:0,time:1,gravity:500,cap:10,endAlpha:1,rotationPower:10,blendMode:PIXI.BLEND_MODES.ADD};this.landingParticles=new ParticleBurst(["mind-the-gap/landing-green-particle"],this.landingParticlesContainer,this,o);PIXI.BLEND_MODES.ADD;if(this.landingPowerupParticles=new ParticleBurst(["mind-the-gap/landing-purple-particle"],this.landingPowerupParticlesContainer,this,o),this.difficultyParams.push({chickenNum:1,score:1}),this.difficultyParams.push({chickenNum:2,score:2}),this.difficultyParams.push({chickenNum:3,score:4}),this.difficultyParams.push({chickenNum:4,score:6}),this.difficultyParams.push({chickenNum:5,score:10}),this.difficultyParams.push({chickenNum:6,score:12}),this.difficultyParams.push({chickenNum:7,score:14}),this.difficultyParams.push({chickenNum:8,score:16}),this.difficultyParams.push({chickenNum:9,score:18}),this.difficultyParams.push({chickenNum:10,score:22}),this.chickenOnBridge=!1,this.keyXPositions=new Array,this.keyXPositions.push(this.wallOffset),this.keyXPositions.push(Game.stageWidth/2-this.gapWidth/2),this.keyXPositions.push(Game.stageWidth/2+this.gapWidth/2),this.keyXPositions.push(Game.stageWidth-this.wallOffset),this.henryArmLeftHolder=Game.displayStore.getContainer("mind-the-gap/henry-arm-holder-left"),this.henryArmRightHolder=Game.displayStore.getContainer("mind-the-gap/henry-arm-holder-right"),this.henryArmLeftInner=Game.displayStore.getSprite("mind-the-gap/henry-arm-left"),this.henryArmRightInner=Game.displayStore.getSprite("mind-the-gap/henry-arm-right"),this.henryArmBeamHighlightLeft=Game.displayStore.getSprite("mind-the-gap/beam-highlight"),this.henryArmBeamHighlightRight=Game.displayStore.getSprite("mind-the-gap/beam-highlight"),this.henryArmBeamLeft=Game.displayStore.getSprite("mind-the-gap/hand-beam"),this.henryArmBeamRight=Game.displayStore.getSprite("mind-the-gap/hand-beam"),this.rightHandExtention=Game.displayStore.getSprite("mind-the-gap/hand-beam-extention"),this.leftHandExtention=Game.displayStore.getSprite("mind-the-gap/hand-beam-extention"),this.henryArmBeamHighlightLeft.visible=!1,this.henryArmBeamHighlightRight.visible=!1,this.henryArmBeamLeft.visible=!1,this.henryArmBeamRight.visible=!1,0==Game.isLowEndIPad){this.rightHandParticlesContainer=Game.displayStore.getContainer("mind-the-gap/right-hand-particles"),this.leftHandParticlesContainer=Game.displayStore.getContainer("mind-the-gap/left-hand-particles"),this.leftHandParticles=new Array,this.rightHandParticles=new Array;for(r=0;r<10;r++){var a=Game.displayStore.getSprite("mind-the-gap/beam-particle-1");r%2==0?this.rightHandParticles.push({sprite:a,active:!1,counter:0,speed:.2,defaultSpeed:.2}):this.leftHandParticles.push({sprite:a,active:!1,counter:0,speed:.2,defaultSpeed:.2})}for(r=0;r<10;r++)r%2==0?this.rightHandParticles.push({sprite:Game.displayStore.getSprite("mind-the-gap/beam-particle-2"),active:!1,counter:0,speed:.3,defaultSpeed:.3}):this.leftHandParticles.push({sprite:Game.displayStore.getSprite("mind-the-gap/beam-particle-2"),active:!1,counter:0,speed:.3,defaultSpeed:.3});for(r=0;r<10;r++)r%2==0?this.rightHandParticles.push({sprite:Game.displayStore.getSprite("mind-the-gap/beam-particle-3"),active:!1,counter:0,speed:.1,defaultSpeed:.1}):this.leftHandParticles.push({sprite:Game.displayStore.getSprite("mind-the-gap/beam-particle-3"),active:!1,counter:0,speed:.1,defaultSpeed:.1});this.leftHandParticles=this.shuffleArray(this.leftHandParticles),this.rightHandParticles=this.shuffleArray(this.rightHandParticles);for(r=0;r<this.leftHandParticles.length;r++)this.leftHandParticles[r].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.leftHandParticles[r].sprite.visible=!1,this.leftHandParticlesContainer.addChild(this.leftHandParticles[r].sprite);for(r=0;r<this.rightHandParticles.length;r++)this.rightHandParticles[r].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.rightHandParticles[r].sprite.visible=!1,this.rightHandParticlesContainer.addChild(this.rightHandParticles[r].sprite)}this.henryArmLeftHolder.addChild(this.henryArmLeftInner),this.henryArmRightHolder.addChild(this.henryArmRightInner),this.henryArmRightHolder.addChild(this.henryArmBeamRight),this.henryArmRightHolder.addChild(this.henryArmBeamHighlightRight),this.henryArmLeftHolder.addChild(this.henryArmBeamLeft),this.henryArmLeftHolder.addChild(this.henryArmBeamHighlightLeft),0==Game.isLowEndIPad&&(this.henryArmLeftHolder.addChild(this.leftHandParticlesContainer),this.henryArmRightHolder.addChild(this.rightHandParticlesContainer)),this.henryArmLeftHolder.addChild(this.leftHandExtention),this.henryArmRightHolder.addChild(this.rightHandExtention),this.henryArmBeamRight.scale.x=-1,this.rightHandExtention.scale.x=-1,this.henryArmBeamHighlightRight.scale.x=-1,this.rightHandExtention.position.x=60+this.henryArmBeamRight.width,this.leftHandExtention.position.x=-60-this.henryArmBeamLeft.width,this.rightHandExtention.position.y=-5,this.leftHandExtention.position.y=-5,this.henryArmBeamLeft.position.x=-60,this.henryArmBeamRight.position.x=60,this.henryArmBeamLeft.position.y=-5,this.henryArmBeamRight.position.y=-5,this.henryArmBeamHighlightLeft.position.x=-60,this.henryArmBeamHighlightRight.position.x=60,this.henryArmBeamHighlightLeft.position.y=-5,this.henryArmBeamHighlightRight.position.y=-5,this.henryArmBeamLeft.blendMode=PIXI.BLEND_MODES.ADD,this.henryArmBeamRight.blendMode=PIXI.BLEND_MODES.ADD,this.henryArmBeamHighlightLeft.blendMode=PIXI.BLEND_MODES.ADD,this.henryArmBeamHighlightRight.blendMode=PIXI.BLEND_MODES.ADD,this.rightHandExtention.blendMode=PIXI.BLEND_MODES.ADD,this.leftHandExtention.blendMode=PIXI.BLEND_MODES.ADD,this.rightArmActive=!1,this.leftArmActive=!1,this.henryShoulderLeftPos=new PIXI.Point(Game.stageWidth/2-20,280),this.henryShoulderRightPos=new PIXI.Point(Game.stageWidth/2+20,280),this.henryArmIdleLeftTarget=new PIXI.Point(Game.stageWidth/2-100,500),this.henryArmIdleRightTarget=new PIXI.Point(Game.stageWidth/2+100,500),this.cancelArmAngle(0),this.cancelArmAngle(1),this.henryArmLeftHolder.rotation=this.armAngleLeft,this.henryArmRightHolder.rotation=this.armAngleRight,this.henryHeadHolder=Game.displayStore.getContainer("mind-the-gap/henry-head-holder"),this.henryHead0=Game.displayStore.getSprite("mind-the-gap/henry-head-0"),this.henryHeadBlink=Game.displayStore.getSprite("mind-the-gap/henry-head-blink"),this.henryHeadEyes=Game.displayStore.getSprite("mind-the-gap/henry-head-eyes"),this.henryHat=Game.displayStore.getSprite("mind-the-gap/henry-hat"),this.henryFaceHappy=Game.displayStore.getSprite("mind-the-gap/henry-happy"),this.henryFaceShocked=Game.displayStore.getSprite("mind-the-gap/henry-shocked"),this.henryFaceNeutral=Game.displayStore.getSprite("mind-the-gap/henry-neutral"),this.henryFaceGritted=Game.displayStore.getSprite("mind-the-gap/henry-gritted"),this.henryHeadEyes.position.x=3,this.henryHeadEyes.position.y=6,this.henryHeadEyes.visible=!0,this.henryHead0.visible=!0,this.henryHeadHolder.visible=!0,this.henryFaceGritted.visible=!1,this.henryFaceShocked.visible=!1,this.henryFaceHappy.visible=!1,this.henryFaceNeutral.visible=!0,this.henryFaceNeutral.position.y=23,this.henryFaceNeutral.position.x=3,this.henryFaceShocked.position.y=26,this.henryFaceShocked.position.x=4,this.henryFaceHappy.position.y=23,this.henryFaceHappy.position.x=3,this.henryFaceGritted.position.y=25,this.henryFaceGritted.position.x=5,this.eyeTimer=0,this.eyePositioned=!1,this.henryHeadBlink.visible=!1,this.henryExpression="neutral",this.expressionTimer=0,this.expressionActive=!1,this.blinkTimer=0,this.blinkLimit=60,this.henryElectric=Game.displayStore.getAnimatedSprite("mind-the-gap/electric-frames"),this.henryElectric.blendMode=PIXI.BLEND_MODES.ADD,this.henryHeadHolder.addChild(this.henryHead0),this.henryHeadHolder.addChild(this.henryHeadBlink),this.henryHeadHolder.addChild(this.henryHeadEyes),this.henryHeadHolder.addChild(this.henryHat),this.henryHeadHolder.addChild(this.henryFaceGritted),this.henryHeadHolder.addChild(this.henryFaceHappy),this.henryHeadHolder.addChild(this.henryFaceNeutral),this.henryHeadHolder.addChild(this.henryFaceShocked),this.henryHeadHolder.addChild(this.henryElectric),this.henryElectric.loop=!1,this.henryElectric.gotoAndStop(0),this.henryElectric.position.y=-40,this.henryHat.position.x=2,this.henryHat.position.y=-30,this.henryHat.scale.x=this.henryHat.scale.y=1,this.henryContainer=Game.displayStore.getContainer("mind-the-gap/henry-container"),this.henryBody=Game.displayStore.getSprite("mind-the-gap/henry-body"),this.henryContainer.addChild(this.henryArmLeftHolder),this.henryContainer.addChild(this.henryArmRightHolder),this.henryContainer.addChild(this.henryBody),this.henryContainer.position.x=Game.stageWidth/2,this.henryContainer.addChild(this.henryHeadHolder),this.henryContainer.position.y=470,this.henryHeadHolder.position.y=-260,this.henryHeadHolder.position.x=-2,this.henryArmLeftHolder.position.y=-205,this.henryArmLeftHolder.position.x=-25,this.henryArmRightHolder.position.x=25,this.henryArmRightHolder.position.y=-205,this.henryContainer.setRegPoint(.5,1,!0),this.henryAnimation=new TimelineMax,this.henryAnimation.add([TweenMax.to(this.henryContainer.scale,2,{y:.99,yoyo:!0,ease:Power1.easeInOut,repeat:-1}),TweenMax.to(this.henryHeadHolder.scale,2,{y:1.01,yoyo:!0,ease:Power1.easeInOut,repeat:-1})]),this.lowerWall=Game.displayStore.getSprite("mind-the-gap/lower-wall"),this.lowerWall.position.x=0,this.lowerWall.position.y=Game.stageHeight,this.lowerWall.width=Game.stageWidth,this.mainHolder.addChild(this.lowerWall),this.redGlow=Game.displayStore.getSprite("mind-the-gap/red-glow"),this.redGlow.position.x=0,this.redGlow.position.y=Game.stageHeight,this.redGlow.width=Game.stageWidth,this.mainHolder.addChild(this.redGlow),this.grid=Game.displayStore.getSprite("mind-the-gap/grid"),this.grid.position.x=Game.stageWidth/2,this.grid.scale.x=1.1,this.grid.position.y=Game.stageHeight-38,this.grid.blendMode=PIXI.BLEND_MODES.ADD,this.mainHolder.addChild(this.grid),this.bottomRight=Game.displayStore.getSprite("mind-the-gap/bottom-right"),this.bottomRight.position.x=Game.stageWidth+40,this.bottomRight.position.y=Game.stageHeight+10,this.mainHolder.addChild(this.bottomRight),this.bottomLeft=Game.displayStore.getSprite("mind-the-gap/bottom-left"),this.bottomLeft.position.x=-50,this.bottomLeft.position.y=Game.stageHeight+10,this.mainHolder.addChild(this.bottomLeft),this.rightLight.position.x=Game.stageWidth/2+250,this.rightLight.position.y=Game.stageHeight,this.leftLight.position.x=Game.stageWidth/2-230,this.leftLight.position.y=Game.stageHeight,this.redOverlay=Game.displayStore.getSprite("mind-the-gap/red-overlay"),this.redOverlay.visible=!1,this.redOverlay.alpha=.5,this.redOverlay.width=1.5*Game.stageWidth,this.redOverlay.height=1.5*Game.stageHeight,this.redOverlay.position.x=Game.stageWidth/2,this.redOverlay.position.y=Game.stageHeight/2,this.featherContainer.position.x=Game.stageWidth/2,this.featherContainer.position.y=Game.stageHeight+100,this.henryFloor=Game.displayStore.getSprite("mind-the-gap/henry-floor"),this.henryFloor.position.x=Game.stageWidth/2,this.henryFloor.position.y=420,this.mainHolder.addChild(this.henryFloor),this.mainHolder.addChild(this.henryContainer),this.barrier=Game.displayStore.getSprite("mind-the-gap/barrier"),this.barrier.position.x=Game.stageWidth/2,this.barrier.position.y=420,this.mainHolder.addChild(this.barrier),this.platformPositions=new Array;for(r=1;r<4;r++){this.platformPositions.push({pos:165*r,colour:"none"})}this.rearWallsLeft=new Array;for(r=0;r<3;r++)(s=Game.displayStore.getSprite("mind-the-gap/rear-wall-bg")).position.y=r*s.height,this.rearWallsLeft.push(s),this.mainHolder.addChild(s);this.rearWallsRight=new Array;for(r=0;r<3;r++){var s=Game.displayStore.getSprite("mind-the-gap/rear-wall-bg");s.position.y=r*s.height,s.position.x=Game.stageWidth,this.rearWallsRight.push(s),this.mainHolder.addChild(s),s.scale.x=-1}this.platforms=new Array;for(r=0;r<6;r++)this.platforms.push(Game.displayStore.getSprite("mind-the-gap/platform"));this.platformPositions[0].colour=this.portalOrder[0].colour,this.platformPositions[1].colour=this.portalOrder[1].colour,this.platformPositions[2].colour=this.portalOrder[2].colour,this.portalOrder[0].portal.position.x=this.wallOffset,this.portalOrder[1].portal.position.x=Game.stageWidth-this.wallOffset,this.portalOrder[2].portal.position.x=this.wallOffset,this.portalOrder[0].frontPortal.position.x=this.wallOffset,this.portalOrder[1].frontPortal.position.x=Game.stageWidth-this.wallOffset,this.portalOrder[2].frontPortal.position.x=this.wallOffset,this.pinkWall=Game.displayStore.getSprite("mind-the-gap/pink-wall-flash"),this.orangeWall=Game.displayStore.getSprite("mind-the-gap/orange-wall-flash"),this.greenWall=Game.displayStore.getSprite("mind-the-gap/green-wall-flash"),this.pinkWall.blendMode=PIXI.BLEND_MODES.ADD,this.orangeWall.blendMode=PIXI.BLEND_MODES.ADD,this.greenWall.blendMode=PIXI.BLEND_MODES.ADD,this.powerupGreenWallFlash.blendMode=PIXI.BLEND_MODES.ADD,this.powerupOrangeWallFlash.blendMode=PIXI.BLEND_MODES.ADD,this.powerupPurpleWallFlash.blendMode=PIXI.BLEND_MODES.ADD,this.orangeWall.alpha=.5,this.pinkWall.alpha=.5,this.greenWall.alpha=.5,this.powerupGreenWallFlash.alpha=.5,this.powerupGreenWallFlash.visible=!1,this.powerupOrangeWallFlash.alpha=.5,this.powerupOrangeWallFlash.visible=!1,this.powerupPurpleWallFlash.alpha=.5,this.powerupPurpleWallFlash.visible=!1;for(r=0;r<this.portalOrder.length;r++)switch(this.portalOrder[r].colour){case"green":this.greenWall.position.x=0,this.mainHolder.addChild(this.greenWall),this.greenWall.position.x>Game.stageWidth&&(this.greenWall.scale.x=-1,this.greenWall.position.x=Game.stageWidth);break;case"pink":this.pinkWall.position.x=0,this.mainHolder.addChild(this.pinkWall),this.pinkWall.position.x>Game.stageWidth&&(this.pinkWall.scale.x=-1,this.pinkWall.position.x=Game.stageWidth);break;case"orange":this.orangeWall.position.x=0,this.mainHolder.addChild(this.orangeWall),this.orangeWall.position.x>Game.stageWidth&&(this.orangeWall.scale.x=-1,this.orangeWall.position.x=Game.stageWidth)}for(r=0;r<this.platforms.length;r++)this.mainHolder.addChild(this.platforms[r]);this.powerupPurpleWallFlash.position.x=100,this.powerupPurpleWallFlash.position.y=this.portalOrder[0].portal.position.y+this.powerupPurpleWallFlash.height/2-20,this.powerupOrangeWallFlash.position.x=100,this.powerupOrangeWallFlash.position.y=this.portalOrder[0].portal.position.y+this.powerupOrangeWallFlash.height/2-20,this.powerupGreenWallFlash.position.x=100,this.powerupGreenWallFlash.position.y=this.portalOrder[0].portal.position.y+this.powerupGreenWallFlash.height/2-20,this.powerupGreenWallFlash.scale.y=1.3,this.powerupOrangeWallFlash.scale.y=1.3,this.powerupPurpleWallFlash.scale.y=1.3,this.mainHolder.addChild(this.powerupPurpleWallFlash),this.mainHolder.addChild(this.powerupOrangeWallFlash),this.mainHolder.addChild(this.powerupGreenWallFlash),this.mainHolder.addChild(this.portalOrder[0].portal),this.mainHolder.addChild(this.portalOrder[1].portal),this.mainHolder.addChild(this.portalOrder[2].portal),this.mainHolder.addChild(this.portalAllColoursHolderBack),this.bridgeAsset=Game.displayStore.getSprite("mind-the-gap/bridge-asset"),this.bridgeAssetPowerUp=Game.displayStore.getSprite("mind-the-gap/bridge-asset-powerup"),this.bridgeAssetHighlight=Game.displayStore.getSprite("mind-the-gap/bridge-asset-highlight"),this.bridgeHolder=Game.displayStore.getContainer("mind-the-gap/bridge-holder"),this.bridgeHolder.position.y=-1e3,this.bridgeAsset.visible=!0,this.bridgeAssetPowerUp.visible=!1,this.mainHolder.addChild(this.bridgeHolder),this.bridgeHolder.addChild(this.bridgeAsset),this.bridgeHolder.addChild(this.bridgeAssetPowerUp),this.bridgeHolder.addChild(this.bridgeAssetHighlight),this.inputManager=new MindTheGapInputManager(this,this.mainHolder),this.chickenManager=new MindTheGapChickenManager(this,this.mainHolder,this.chickenYOffset,this.keyXPositions),0==Game.isLowEndIPad&&this.portalAllColoursHolderBack.addChild(this.powerupPortalParticles),this.mainHolder.addChild(this.portalAllColoursHolderFront),this.mainHolder.addChild(this.portalOrder[0].frontPortal),this.mainHolder.addChild(this.portalOrder[1].frontPortal),this.mainHolder.addChild(this.portalOrder[2].frontPortal),this.mainHolder.addChild(this.platformFront1),this.mainHolder.addChild(this.platformFront3),this.clawHolder=Game.displayStore.getContainer("mind-the-gap/spawn-claw-holder"),this.clawJawLeft=Game.displayStore.getSprite("mind-the-gap/claw-jaw-left"),this.clawJawRight=Game.displayStore.getSprite("mind-the-gap/claw-jaw-right"),this.clawArm=Game.displayStore.getSprite("mind-the-gap/claw-arm"),this.clawChickenSpriteRed=Game.displayStore.getSprite("mind-the-gap/chicken-sprite-claw-red"),this.clawChickenSpriteGreen=Game.displayStore.getSprite("mind-the-gap/chicken-sprite-claw-green"),this.clawChickenSpriteBlue=Game.displayStore.getSprite("mind-the-gap/chicken-sprite-claw-blue"),this.clawChickenSpriteRed.scale.x=this.clawChickenSpriteRed.scale.y=.7,this.clawChickenSpriteBlue.scale.x=this.clawChickenSpriteBlue.scale.y=.7,this.clawChickenSpriteGreen.scale.x=this.clawChickenSpriteGreen.scale.y=.7,this.clawHolder.addChild(this.clawArm),this.clawHolder.addChild(this.clawChickenSpriteRed),this.clawHolder.addChild(this.clawChickenSpriteBlue),this.clawHolder.addChild(this.clawChickenSpriteGreen),this.clawHolder.addChild(this.clawJawLeft),this.clawHolder.addChild(this.clawJawRight),this.container.addChild(this.clawHolder),this.bridgeAssetHighlight.blendMode=PIXI.BLEND_MODES.ADD,this.bridgeAsset.blendMode=PIXI.BLEND_MODES.ADD,this.bridgeAssetPowerUp.blendMode=PIXI.BLEND_MODES.ADD,this.bridgeInputIndicator=Game.displayStore.getSprite("mind-the-gap/bridge-input-indicator"),this.bridgeInputIndicator.position.y=-1e3,this.mainHolder.addChild(this.bridgeInputIndicator),this.mainHolder.addChild(this.holoFilterSprite),this.bridgeHolder.filters=[this.holoFilter],this.clawArm.position.y=-68,this.clawJawLeft.position.y=-60,this.clawJawRight.position.y=-60,this.clawHolder.position.y=-1e3,this.levelEdges=new Array;for(r=0;r<3;r++)this.levelEdges.push(Game.displayStore.getSprite("mind-the-gap/level-edges"));this.bridgeAnchors=new Array;for(r=0;r<6;r++)this.bridgeAnchors.push({sprite:Game.displayStore.getSprite("mind-the-gap/bridge-anchor"),position:new PIXI.Point(0,0),validConnections:[{nodeIndex:0,angle:0}],lightSprite1:Game.displayStore.getSprite("mind-the-gap/bridge-anchor-light-1"),lightSprite2:Game.displayStore.getSprite("mind-the-gap/bridge-anchor-light-2"),uiHighlight:Game.displayStore.getSprite("mind-the-gap/blue-target"),anchorState:0}),this.mainHolder.addChild(this.bridgeAnchors[r].sprite),this.mainHolder.addChild(this.bridgeAnchors[r].lightSprite1),this.mainHolder.addChild(this.bridgeAnchors[r].lightSprite2),this.mainHolder.addChild(this.bridgeAnchors[r].uiHighlight),this.bridgeAnchors[r].lightSprite1.alpha=0,this.bridgeAnchors[r].lightSprite2.alpha=0,this.bridgeAnchors[r].lightSprite1.blendMode=PIXI.BLEND_MODES.ADD,this.bridgeAnchors[r].lightSprite2.blendMode=PIXI.BLEND_MODES.ADD,this.bridgeAnchors[r].uiHighlight.blendMode=PIXI.BLEND_MODES.ADD;this.bridgeAnchors[0].validConnections=[{nodeIndex:1,angle:2*Math.PI},{nodeIndex:1,angle:0},{nodeIndex:3,angle:0},{nodeIndex:5,angle:0}],this.bridgeAnchors[1].validConnections=[{nodeIndex:0,angle:0},{nodeIndex:2,angle:0},{nodeIndex:4,angle:0}],this.bridgeAnchors[2].validConnections=[{nodeIndex:3,angle:2*Math.PI},{nodeIndex:1,angle:0},{nodeIndex:3,angle:0},{nodeIndex:5,angle:0}],this.bridgeAnchors[3].validConnections=[{nodeIndex:0,angle:0},{nodeIndex:2,angle:0},{nodeIndex:4,angle:0}],this.bridgeAnchors[4].validConnections=[{nodeIndex:5,angle:2*Math.PI},{nodeIndex:1,angle:0},{nodeIndex:3,angle:0},{nodeIndex:5,angle:0}],this.bridgeAnchors[5].validConnections=[{nodeIndex:0,angle:0},{nodeIndex:2,angle:0},{nodeIndex:4,angle:0}],this.chickenUiArray=new Array;for(var r=0;r<10;r++)this.chickenUiArray.push({greenUI:Game.displayStore.getSprite("mind-the-gap/ui-green"),orangeUI:Game.displayStore.getSprite("mind-the-gap/ui-orange"),pinkUI:Game.displayStore.getSprite("mind-the-gap/ui-pink"),active:!1,chickenID:99,container:Game.displayStore.getContainer("chicken-ui"),clicked:!1}),this.mainHolder.addChild(this.chickenUiArray[r].container),this.chickenUiArray[r].container.addChild(this.chickenUiArray[r].greenUI),this.chickenUiArray[r].container.addChild(this.chickenUiArray[r].orangeUI),this.chickenUiArray[r].container.addChild(this.chickenUiArray[r].pinkUI),this.chickenUiArray[r].pinkUI.visible=!1,this.chickenUiArray[r].orangeUI.visible=!1,this.chickenUiArray[r].greenUI.visible=!1,this.chickenUiArray[r].pinkUI.blendMode=PIXI.BLEND_MODES.ADD,this.chickenUiArray[r].orangeUI.blendMode=PIXI.BLEND_MODES.ADD,this.chickenUiArray[r].greenUI.blendMode=PIXI.BLEND_MODES.ADD,this.chickenUiArray[r].pinkUI.position.y=-10,this.chickenUiArray[r].orangeUI.position.y=-10,this.chickenUiArray[r].greenUI.position.y=-10,this.chickenUiArray[r].container.position.x=-1e3;this.layoutPlatforms(),this.mainHolder.addChild(this.featherContainer),this.mainHolder.addChild(this.redOverlay),this.mainHolder.addChild(this.landingParticlesContainer),this.mainHolder.addChild(this.landingPowerupParticlesContainer),this.setBridgeAnchorParams(),this.updateScore(this.score),1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("mind-the-gap",!0)},e.prototype.landedOnBridge=function(t,e,i,n){0==n?(this.landingParticlesContainer.position.x=e,this.landingParticlesContainer.position.y=i,this.landingParticlesContainer.rotation=t,this.landingParticles.fire()):(this.landingPowerupParticlesContainer.position.x=e,this.landingPowerupParticlesContainer.position.y=i,this.landingPowerupParticlesContainer.rotation=t,this.landingPowerupParticles.fire())},e.prototype.setHenryWorried=function(){this.changeHenryExpression("shocked")},e.prototype.changeHenryExpression=function(t){switch(t){case"neutral":this.expressionActive=!1,this.henryFaceGritted.visible=!1,this.henryFaceShocked.visible=!1,this.henryFaceHappy.visible=!1,this.henryFaceNeutral.visible=!0,this.expressionTimer=0;break;case"happy":this.expressionActive=!0,this.henryFaceGritted.visible=!1,this.henryFaceShocked.visible=!1,this.henryFaceHappy.visible=!0,this.henryFaceNeutral.visible=!1,this.expressionTimer=0;break;case"shocked":this.expressionActive=!0,this.henryFaceGritted.visible=!1,this.henryFaceShocked.visible=!0,this.henryFaceHappy.visible=!1,this.henryFaceNeutral.visible=!1,this.expressionTimer=0;break;case"gritted":this.expressionActive=!0,this.henryFaceGritted.visible=!0,this.henryFaceShocked.visible=!1,this.henryFaceHappy.visible=!1,this.henryFaceNeutral.visible=!1,this.expressionTimer=0}},e.prototype.updateScore=function(t){this.scoreFont.text=String(t),this.scoreFont.position.x=0-this.scoreFont.width/2,this.scoreFont.position.y=0-this.scoreFont.height/2-18},e.prototype.startGameplay=function(){this.game.ui.triggerEnjoyTheRide(),this.game.ui.setUI("gameplay-mind-the-gap"),this.game.powerUpManager.startGame(),this.checkDifficulty()},e.prototype.setBridgeAnchorParams=function(){for(var t=0;t<this.bridgeAnchors.length;t++)for(var e=this.bridgeAnchors[t].validConnections,i=this.bridgeAnchors[t].position,n=0;n<e.length;n++)if(e[n].angle!=2*Math.PI){var o=this.bridgeAnchors[e[n].nodeIndex].position,a=Math.PI-this.getAngle(i.x,i.y,o.x,o.y);e[n].angle=a}},e.prototype.removeChickenUI=function(t){console.log("ui array",this.chickenUiArray),this.chickenUiArray[t].active=!1,this.chickenUiArray[t].container.position.x=-1e4,this.chickenUiArray[t].greenUI.visible=!1,this.chickenUiArray[t].orangeUI.visible=!1,this.chickenUiArray[t].pinkUI.visible=!1},e.prototype.getChickenUI=function(t,e){var i=this.chickenUiArray[t];if(0==i.active)switch(i.active=!0,i.chickenID=t,e){case"green":i.greenUI.visible=!0,i.orangeUI.visible=!1,i.pinkUI.visible=!1;break;case"orange":i.greenUI.visible=!1,i.orangeUI.visible=!0,i.pinkUI.visible=!1;break;case"pink":i.greenUI.visible=!1,i.orangeUI.visible=!1,i.pinkUI.visible=!0}},e.prototype.checkDifficulty=function(){for(var t=0,e=0;e<this.difficultyParams.length&&this.score>=this.difficultyParams[e].score;e++)t=e;this.chickenManager.getCurrentlySpawnedChickens()<this.difficultyParams[t].chickenNum&&this.spawnChicken(),this.difficultyCheckDelay=this.killTween(this.difficultyCheckDelay),this.difficultyCheckDelay=TweenMax.delayedCall(this.difficultyCheckDuration,this.checkDifficulty,null,this)},e.prototype.spawnChicken=function(){if(1!=this.bridgeInputSwipeMode&&1!=this.chickenSpawning){this.chickenSpawning=!0;var t,e=Game.getRandom(0,this.platformPositions.length-1,!0);t=this.platformPositions[e].pos-this.chickenYOffset-15;var i;switch(Game.getRandom(0,2,!0)){case 0:i="orange";break;case 1:i="pink";break;case 2:i="green"}if(this.lastRowIndexSpawned==e)return this.chickenSpawning=!1,void this.spawnChicken();if(this.lastColourSpawned==i)return this.chickenSpawning=!1,void this.spawnChicken();this.lastRowIndexSpawned=e,this.lastColourSpawned=i,this.startSpawnAnimation(t,e,i)}},e.prototype.startSpawnAnimation=function(t,e,i){var n="left";0!=e&&2!=e||(n="right"),Game.playSound("mind-the-gap/mechanical",.2),this.clawHolder.scale.x=this.clawHolder.scale.y=1.5;var o;switch("left"==n?(this.clawHolder.position.x=-100,this.clawArm.position.x=34,this.clawArm.scale.x=1,this.chickenXSpawnPos=70,o=-100):(this.clawHolder.position.x=Game.stageWidth+100,this.clawArm.position.x=-34,this.clawArm.scale.x=-1,this.chickenXSpawnPos=Game.stageWidth-70,o=Game.stageWidth+100),this.clawHolder.position.y=t,this.clawJawLeft.position.x=0,this.clawJawRight.position.x=0,this.clawChickenSpriteRed.visible=!1,this.clawChickenSpriteBlue.visible=!1,this.clawChickenSpriteGreen.visible=!1,i){case"orange":this.clawChickenSpriteRed.visible=!0;break;case"pink":this.clawChickenSpriteBlue.visible=!0;break;case"green":this.clawChickenSpriteGreen.visible=!0}this.spawnChickenTimeline=this.killTween(this.spawnChickenTimeline),this.spawnChickenTimeline=new TimelineMax({onComplete:this.endSpawnTimeline,onCompleteParams:[this]}),this.spawnChickenTimeline.add(TweenMax.to(this.clawHolder.position,.5,{x:this.chickenXSpawnPos,ease:Expo.easeOut})),this.spawnChickenTimeline.add(TweenMax.to(this.clawHolder.scale,.5,{x:1,y:1,ease:Expo.easeOut})),this.spawnChickenTimeline.call(this.placeSpawnedChicken,[e,i,n],this,1),this.spawnChickenTimeline.add([TweenMax.to(this.clawJawLeft.position,.5,{x:-10,ease:Expo.easeOut}),TweenMax.to(this.clawJawRight.position,.5,{x:10,ease:Expo.easeOut})]),this.spawnChickenTimeline.add(TweenMax.to(this.clawHolder.scale,.5,{x:1.5,y:1.5,ease:Expo.easeOut})),this.spawnChickenTimeline.add(TweenMax.to(this.clawHolder.position,.5,{x:o,ease:Expo.easeOut}))},e.prototype.endSpawnTimeline=function(t){t.chickenSpawning=!1},e.prototype.layoutPlatforms=function(){var t=(Game.stageWidth-this.gapWidth)/2;this.platforms[0].position.x=this.keyXPositions[0]-this.wallOffset,this.platforms[0].position.y=this.platformPositions[0].pos,this.platforms[1].position.x=this.keyXPositions[0]-this.wallOffset,this.platforms[1].position.y=this.platformPositions[1].pos,this.platformFront1.position.x=this.keyXPositions[0]-this.wallOffset,this.platformFront1.position.y=this.platformPositions[1].pos,this.platforms[2].position.x=this.keyXPositions[0]-this.wallOffset,this.platforms[2].position.y=this.platformPositions[2].pos,this.platforms[3].position.x=this.keyXPositions[2],this.platforms[3].position.y=this.platformPositions[0].pos,this.platformFront3.position.x=this.keyXPositions[2],this.platformFront3.position.y=this.platformPositions[0].pos,this.platforms[4].position.x=this.keyXPositions[2],this.platforms[4].position.y=this.platformPositions[1].pos,this.platforms[5].position.x=this.keyXPositions[2],this.platforms[5].position.y=this.platformPositions[2].pos,this.platforms[0].width=t,this.platforms[1].width=t,this.platforms[2].width=t,this.platforms[3].width=t,this.platforms[4].width=t,this.platforms[5].width=t,this.levelEdges[0].width=Game.stageWidth,this.levelEdges[1].height=Game.stageHeight,this.levelEdges[2].position.x=Game.stageWidth-this.levelEdges[2].width,this.levelEdges[2].height=Game.stageHeight,this.setBridgeAnchorPos(0,this.keyXPositions[1],this.platformPositions[0].pos),this.setBridgeAnchorPos(1,this.keyXPositions[2],this.platformPositions[0].pos),this.setBridgeAnchorPos(2,this.keyXPositions[1],this.platformPositions[1].pos),this.setBridgeAnchorPos(3,this.keyXPositions[2],this.platformPositions[1].pos),this.setBridgeAnchorPos(4,this.keyXPositions[1],this.platformPositions[2].pos),this.setBridgeAnchorPos(5,this.keyXPositions[2],this.platformPositions[2].pos),this.portalOrder[0].portal.position.y=this.platforms[0].position.y-75,this.portalOrder[1].portal.position.y=this.platforms[1].position.y-75,this.portalOrder[2].portal.position.y=this.platforms[2].position.y-75,this.portalOrder[0].frontPortal.position.y=this.platforms[0].position.y-75,this.portalOrder[1].frontPortal.position.y=this.platforms[1].position.y-75,this.portalOrder[2].frontPortal.position.y=this.platforms[2].position.y-75,this.portalAllColoursHolderBack.position.x=this.portalOrder[0].portal.position.x,this.portalAllColoursHolderBack.position.y=this.portalOrder[0].portal.position.y,this.portalAllColoursHolderFront.position.x=this.portalOrder[0].portal.position.x,this.portalAllColoursHolderFront.position.y=this.portalOrder[0].portal.position.y,this.portalAllColoursHolderBack.visible=!1,this.portalAllColoursHolderFront.visible=!1,this.portalOrder[0].portal.visible=!0,this.portalOrder[1].portal.visible=!0,this.portalOrder[2].portal.visible=!0,this.portalOrder[1].portal.scale.x=-1,this.portalOrder[1].frontPortal.scale.x=-1;for(var e=0;e<this.portalOrder.length;e++){if(-1==this.portalOrder[e].portal.scale.x)switch(this.portalOrder[e].colour){case"green":this.greenWall.scale.x=-1,this.greenWall.position.x=Game.stageWidth;break;case"pink":this.pinkWall.scale.x=-1,this.pinkWall.position.x=Game.stageWidth;break;case"orange":this.orangeWall.scale.x=-1,this.orangeWall.position.x=Game.stageWidth}switch(this.portalOrder[e].colour){case"green":this.greenWall.position.y=this.portalOrder[e].portal.position.y;break;case"pink":this.pinkWall.position.y=this.portalOrder[e].portal.position.y;break;case"orange":this.orangeWall.position.y=this.portalOrder[e].portal.position.y}}this.mainHolder.setRegPoint(.5,.3,!0)},e.prototype.setBridgeAnchorPos=function(t,e,i){this.bridgeAnchors[t].position.x=e,this.bridgeAnchors[t].position.y=i,this.bridgeAnchors[t].sprite.position.x=e,this.bridgeAnchors[t].sprite.position.y=i,this.bridgeAnchors[t].lightSprite1.position.x=e,this.bridgeAnchors[t].lightSprite1.position.y=i,this.bridgeAnchors[t].lightSprite2.position.x=e,this.bridgeAnchors[t].lightSprite2.position.y=i,this.bridgeAnchors[t].uiHighlight.position.x=e,this.bridgeAnchors[t].uiHighlight.position.y=i},e.prototype.placeSpawnedChicken=function(t,e,i){this.clawChickenSpriteRed.visible=!1,this.clawChickenSpriteBlue.visible=!1,this.clawChickenSpriteGreen.visible=!1,this.chickenManager.spawnNewChicken(this.clawHolder.position,t,e,i),Game.playSound("mind-the-gap/chicken-supprise")},e.prototype.tutorialOverlayClosed=function(){this.startGameplay()},e.prototype.setChickenOnBridge=function(t){1==t?(0==this.chickenOnBridge&&Game.playSound("mind-the-gap/bridge-on"),this.chickenOnBridge=!0,this.bridgeAssetHighlight.alpha=1):0==t&&(1==this.chickenOnBridge&&Game.playSound("mind-the-gap/bridge-off"),this.chickenOnBridge=!1,this.bridgeAssetHighlight.alpha=0)},e.prototype.checkTapInput=function(t,e){this.chickenManager.checkTapInput(t)},e.prototype.checkInputDownOnNode=function(t,e){var i=!1;this.currentNodeTargetIndex=null;for(var n=0;n<this.bridgeAnchors.length;n++)if(this.bridgeAnchors[n].sprite.position.x>t.x-e/2&&this.bridgeAnchors[n].sprite.position.x<t.x+e/2&&this.bridgeAnchors[n].sprite.position.y>t.y-e/2&&this.bridgeAnchors[n].sprite.position.y<t.y+e/2){i=!0,this.chickenManager.slowTime(),this.setAnchorTapped(n),this.firstInteraction=!0;break}return i},e.prototype.setAnchorTapped=function(t,e){var i=this.bridgeAnchors[t].anchorState;switch(this.currentNodeSwipingIndex=t,this.changeHenryExpression("gritted"),this.setEyePosition(t),i){case 0:case 1:this.focusAnchor(t,e);break;case 2:break;case 3:this.focusAnchor(t,e)}},e.prototype.focusAnchor=function(t,e){for(i=0;i<this.bridgeAnchors.length;i++)this.cancelAnchorFocus(i);this.bridgeAnchors[t].lightSprite1.alpha=1,this.bridgeAnchors[t].lightSprite2.alpha=1,this.bridgeAnchors[t].anchorState=1,this.setArmAngle(t,e),this.bridgeInputIndicator.position.x=this.bridgeAnchors[t].position.x,this.bridgeInputIndicator.position.y=this.bridgeAnchors[t].position.y,this.bridgeInputIndicator.alpha=0,this.validSwipeAnchors=[];for(var i=0;i<this.bridgeAnchors[t].validConnections.length;i++)this.bridgeAnchors[this.bridgeAnchors[t].validConnections[i].nodeIndex].anchorState=2,this.bridgeAnchors[this.bridgeAnchors[t].validConnections[i].nodeIndex].lightSprite1.alpha=.3,this.bridgeAnchors[this.bridgeAnchors[t].validConnections[i].nodeIndex].lightSprite2.alpha=.3,this.validSwipeAnchors.push(this.bridgeAnchors[t].validConnections[i])},e.prototype.getClosestSwipeAnchorFromAngle=function(t,e){for(var i=1e3,n=0,o=0;o<t.length;o++){var a=Math.abs(e-t[o].angle);a<i&&(i=a,n=t[o].nodeIndex)}this.setEyePosition(n,!0);var s=["mind-the-gap/blip-1","mind-the-gap/blip-2","mind-the-gap/blip-3"];return n!=this.lightSoundTarget&&(this.lightSoundAvailable=!0),1==this.lightSoundAvailable&&(Game.playSound(s[Game.getRandom(0,s.length-1,!0)],.6),this.lightSoundAvailable=!1,this.lightSoundTarget=n),n},e.prototype.setEyePosition=function(t,e){switch(t){case 0:this.henryHeadEyes.position.x=1,this.henryHeadEyes.position.y=5;break;case 1:this.henryHeadEyes.position.x=4,this.henryHeadEyes.position.y=5;break;case 2:this.henryHeadEyes.position.x=1,this.henryHeadEyes.position.y=7;break;case 3:this.henryHeadEyes.position.x=4,this.henryHeadEyes.position.y=7;break;case 4:this.henryHeadEyes.position.x=1,this.henryHeadEyes.position.y=8;break;case 5:this.henryHeadEyes.position.x=4,this.henryHeadEyes.position.y=8;break;case 10:this.henryHeadEyes.position.x=3,this.henryHeadEyes.position.y=6}1==e&&(this.eyePositioned=!0,this.eyeTimer=0)},e.prototype.cancelAnchorFocus=function(t){this.bridgeActive=!1,this.targetBridgeWidth=0,this.targetBridgeEaseAmount=2,this.bridgeAnchors[t].lightSprite1.alpha=0,this.bridgeAnchors[t].lightSprite2.alpha=0,this.bridgeAnchors[t].anchorState=0,this.cancelArmAngle(t);for(var e=0;e<this.bridgeAnchors[t].validConnections.length;e++)this.bridgeAnchors[this.bridgeAnchors[t].validConnections[e].nodeIndex].anchorState=0,this.bridgeAnchors[this.bridgeAnchors[t].validConnections[e].nodeIndex].lightSprite1.alpha=0,this.bridgeAnchors[this.bridgeAnchors[t].validConnections[e].nodeIndex].lightSprite2.alpha=0;this.chickenManager.cancelBridge()},e.prototype.chickenClicked=function(t){this.chickenUiArray[t].clicked=!0},e.prototype.buildBridge=function(t){var e;this.bridgeAnchors[t].lightSprite1.alpha=1,this.bridgeAnchors[t].lightSprite2.alpha=1,this.bridgeAnchors[t].anchorState=3,this.setArmAngle(t,!1),this.connectedAncorAPos=[this.bridgeAnchors[t].position.x,this.bridgeAnchors[t].position.y];for(var i=0;i<this.bridgeAnchors.length;i++)2==this.bridgeAnchors[i].anchorState?(this.bridgeAnchors[i].anchorState=0,this.bridgeAnchors[i].lightSprite1.alpha=0,this.bridgeAnchors[i].lightSprite2.alpha=0):1==this.bridgeAnchors[i].anchorState&&(this.bridgeAnchors[i].anchorState=3,e=i,this.connectedAncorBPos=[this.bridgeAnchors[i].position.x,this.bridgeAnchors[i].position.y]);this.bridgeActive=!0,this.chickenManager.calculateFallingDetection(),this.buildVisualBridge(e,t)},e.prototype.buildVisualBridge=function(t,e){Game.playSound("mind-the-gap/laser-data",.2),this.targetBridgeEaseAmount=6;var i=this.bridgeAnchors[t].position,n=this.bridgeAnchors[e].position,o=this.getDistance(i.x,i.y,n.x,n.y),a=Math.PI-this.getAngle(i.x,i.y,n.x,n.y);this.bridgeHolder.position.x=i.x,this.bridgeHolder.position.y=i.y,this.bridgeAssetHighlight.alpha=0,this.targetBridgeWidth=o,this.currentBridgeAngle=a,this.bridgeAsset.rotation=this.currentBridgeAngle,this.bridgeAssetPowerUp.rotation=this.currentBridgeAngle,this.bridgeAssetHighlight.rotation=this.currentBridgeAngle},e.prototype.setArmAngle=function(t,e){if(0==this.firstInteraction&&0==e){this.firstInteraction=!0;for(var i=0;i<this.bridgeAnchors.length;i++)this.bridgeAnchors[i].uiHighlight.scale.x=this.bridgeAnchors[i].uiHighlight.scale.y=1}if(Game.playSound("mind-the-gap/beam-connect",.3),0==t||2==t||4==t){switch(this.leftHandExtention.width=0,t){case 0:this.leftExtentionTargetWidth=40,this.armAngleLeft=Math.PI-this.getAngle(this.bridgeAnchors[t].position.x,this.bridgeAnchors[t].position.y+20,this.henryShoulderLeftPos.x,this.henryShoulderLeftPos.y);break;case 2:this.leftExtentionTargetWidth=30,this.armAngleLeft=Math.PI-this.getAngle(this.bridgeAnchors[t].position.x,this.bridgeAnchors[t].position.y+10,this.henryShoulderLeftPos.x,this.henryShoulderLeftPos.y);break;case 4:this.leftExtentionTargetWidth=140,this.armAngleLeft=Math.PI-this.getAngle(this.bridgeAnchors[t].position.x,this.bridgeAnchors[t].position.y+20,this.henryShoulderLeftPos.x,this.henryShoulderLeftPos.y)}this.leftHandExtentionActive=!0,this.armAngleLeft<Math.PI&&(this.armAngleLeft+=2*Math.PI),this.leftArmActive=!0,this.henryArmBeamLeft.visible=!0,this.leftHandExtention.visible=!0,this.henryArmBeamHighlightLeft.visible=!0}if(1==t||3==t||5==t){switch(this.rightHandExtention.width=0,t){case 1:this.rightExtentionTargetWidth=40,this.armAngleRight=Math.PI-this.getAngle(this.henryShoulderRightPos.x,this.henryShoulderRightPos.y,this.bridgeAnchors[t].position.x,this.bridgeAnchors[t].position.y+20);break;case 3:this.rightExtentionTargetWidth=30,this.armAngleRight=Math.PI-this.getAngle(this.henryShoulderRightPos.x,this.henryShoulderRightPos.y,this.bridgeAnchors[t].position.x,this.bridgeAnchors[t].position.y+10);break;case 5:this.rightExtentionTargetWidth=140,this.armAngleRight=Math.PI-this.getAngle(this.henryShoulderRightPos.x,this.henryShoulderRightPos.y,this.bridgeAnchors[t].position.x,this.bridgeAnchors[t].position.y+20)}this.rightHandExtentionActive=!0,this.armAngleRight<Math.PI&&(this.armAngleRight+=2*Math.PI),this.rightArmActive=!0,this.henryArmBeamRight.visible=!0,this.rightHandExtention.visible=!0,this.henryArmBeamHighlightRight.visible=!0}},e.prototype.cancelArmAngle=function(t){0!=t&&2!=t&&4!=t||(this.armAngleLeft=Math.PI-this.getAngle(this.henryArmIdleLeftTarget.x,this.henryArmIdleLeftTarget.y,this.henryShoulderLeftPos.x,this.henryShoulderLeftPos.y),this.armAngleLeft<Math.PI&&(this.armAngleLeft+=2*Math.PI),this.leftArmActive=!1,this.henryArmBeamLeft.visible=!1,this.leftHandExtention.visible=!1,this.henryArmBeamHighlightLeft.visible=!1,this.leftHandExtentionActive=!1,this.rightHandExtention.width=0),1!=t&&3!=t&&5!=t||(this.armAngleRight=Math.PI-this.getAngle(this.henryShoulderRightPos.x,this.henryShoulderRightPos.y,this.henryArmIdleRightTarget.x,this.henryArmIdleRightTarget.y),this.armAngleRight<Math.PI&&(this.armAngleRight+=2*Math.PI),this.rightArmActive=!1,this.henryArmBeamRight.visible=!1,this.rightHandExtention.visible=!1,this.henryArmBeamHighlightRight.visible=!1,this.rightHandExtentionActive=!1,this.rightHandExtention.width=0,this.rightHandExtention.position.x=60+this.henryArmBeamRight.width)},e.prototype.showSwipeIndicator=function(){this.bridgeInputSwipeMode=!0,this.bridgeInputIndicator.alpha=1},e.prototype.endInputSwipeMode=function(){var t=!1;null==this.currentNodeTargetIndex&&(t=!0),1==this.bridgeInputSwipeMode&&0==t&&this.buildBridge(this.currentNodeTargetIndex),this.bridgeInputSwipeMode=!1,this.bridgeInputIndicator.alpha=0,this.chickenManager.restartTime()},e.prototype.positionSwipeIndicator=function(t){var e=this.getAngle(this.bridgeInputIndicator.position.x,this.bridgeInputIndicator.position.y,t.x,t.y);this.bridgeInputIndicator.rotation=Math.PI-e},e.prototype.checkBridgeAnchorConnected=function(t){var e=!1;return 3==this.bridgeAnchors[t].anchorState&&(e=!0),e},e.prototype.getPlatformYPos=function(t){return this.platformPositions[t].pos},e.prototype.getBridgeAngle=function(t){var e=0;return 1==this.bridgeActive&&(e=this.connectedAncorAPos[0]>this.connectedAncorBPos[0]?-this.getAngle(this.connectedAncorAPos[0],this.connectedAncorAPos[1],this.connectedAncorBPos[0],this.connectedAncorBPos[1]):-this.getAngle(this.connectedAncorBPos[0],this.connectedAncorBPos[1],this.connectedAncorAPos[0],this.connectedAncorAPos[1])),"left"==t&&(e+=Math.PI),e},e.prototype.getBridgeActive=function(){return this.bridgeActive},e.prototype.getPlatformColour=function(t){return this.platformPositions[t].colour},e.prototype.pointBelowLine=function(t){var e=!1;if(0==this.bridgeActive)return e;var i=this.connectedAncorAPos,n=this.connectedAncorBPos,o=(t[0]-i[0])*(n[1]-i[1])-(t[1]-i[1])*(n[0]-i[0]);return i[0]<n[0]&&(o*=-1),o>0&&(e=!0),e},e.prototype.getDistance=function(t,e,i,n){var o=t-i,a=e-n;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(t,e,i,n){if(t!=i||e!=n){var o=t-i,a=n-e;return Math.atan2(a,o)}},e.prototype.uiClicked=function(e){switch(t.prototype.uiClicked.call(this,e),this.tutorialOverlay.uiClicked(e),e.id){case"playbuttonlarge":this.resume();break;case"pause-button":this.pause(!1)}},e.prototype.uiRolledOver=function(e){t.prototype.uiRolledOver.call(this,e)},e.prototype.animatePortalsOut=function(){for(var t=0;t<this.portalOrder.length;t++){var e=new RoughEase({strength:2,points:15,randomize:!0,clamp:!0});0==Game.isLowEndIPad&&(this.portalOrder[t].portalFront.tint=65280,this.portalOrder[t].portalBack.tint=65280,this.portalOrder[t].hexGrid.tint=65280,this.portalOrder[t].portalInner.tint=65280,this.portalOrder[t].portalFront.blendMode=PIXI.BLEND_MODES.ADD,this.portalOrder[t].portalBack.blendMode=PIXI.BLEND_MODES.ADD,this.portalOrder[t].hexGrid.blendMode=PIXI.BLEND_MODES.ADD,this.portalOrder[t].portalInner.blendMode=PIXI.BLEND_MODES.ADD),TweenMax.to(this.portalOrder[t].frontPortal,.5,{alpha:0,ease:e}),TweenMax.to(this.portalOrder[t].portal,.58,{alpha:0,ease:e})}},e.prototype.animatePortalsIn=function(){for(var t=0;t<this.portalOrder.length;t++){var e=new RoughEase({strength:2,points:15,randomize:!0,clamp:!0});0==Game.isLowEndIPad&&(this.portalOrder[t].portalFront.tint=16777215,this.portalOrder[t].portalBack.tint=16777215,this.portalOrder[t].hexGrid.tint=16777215,this.portalOrder[t].portalInner.tint=16777215,this.portalOrder[t].portalFront.blendMode=PIXI.BLEND_MODES.NORMAL,this.portalOrder[t].portalBack.blendMode=PIXI.BLEND_MODES.NORMAL,this.portalOrder[t].hexGrid.blendMode=PIXI.BLEND_MODES.NORMAL,this.portalOrder[t].portalInner.blendMode=PIXI.BLEND_MODES.NORMAL),TweenMax.to(this.portalOrder[t].frontPortal,.5,{alpha:1,ease:e}),TweenMax.to(this.portalOrder[t].portal,.5,{alpha:1,ease:e})}},e.prototype.tick=function(){if(t.prototype.tick.call(this),1!=this.paused&&1!=this.tutorialOverlay.isOpen){if(0==this.firstInteraction&&(++this.henryTick>90&&0==this.tutorialArmLeft&&(this.tutorialArmLeft=!0,this.focusAnchor(4,!0)),this.henryTick>150&&0==this.tutorialArmRight&&(this.tutorialArmRight=!0,this.currentNodeTargetIndex=5,this.showSwipeIndicator(),this.endInputSwipeMode())),0==this.firstInteraction)for(i=0;i<this.bridgeAnchors.length;i++)this.bridgeAnchors[i].uiHighlight.scale.x<1.1&&1==this.anchorScaleUp&&(this.bridgeAnchors[i].uiHighlight.scale.y=this.bridgeAnchors[i].uiHighlight.scale.x=this.simpleEase(this.bridgeAnchors[i].uiHighlight.scale.x,1.1,10),this.bridgeAnchors[i].uiHighlight.scale.x>1.08&&(this.anchorScaleUp=!1)),0==this.anchorScaleUp&&(this.bridgeAnchors[i].uiHighlight.scale.y=this.bridgeAnchors[i].uiHighlight.scale.x=this.simpleEase(this.bridgeAnchors[i].uiHighlight.scale.x,1,10),this.bridgeAnchors[i].uiHighlight.scale.x<1.02&&0==this.anchorScaleUp&&(this.anchorScaleUp=!0));1==this.powerUpPortalScored&&(this.powerUpPortalFlash.height>80&&(this.powerUpPortalFlash.width=this.simpleEase(this.powerUpPortalFlash.width,280,5)),this.powerUpPortalFlash.width>250&&this.powerUpPortalFlash.height>20&&(this.powerUpPortalFlash.height=this.simpleEase(this.powerUpPortalFlash.height,10,5)),this.powerUpPortalFlash.height<20&&(this.powerUpPortalFlash.width=this.simpleEase(this.powerUpPortalFlash.width,0,3),this.powerUpPortalFlash.width<2&&(this.powerUpPortalScored=!1)));for(i=0;i<this.portalOrder.length;i++)1==this.portalOrder[i].scored&&(this.portalOrder[i].portalFlash.height>80&&(this.portalOrder[i].portalFlash.width=this.simpleEase(this.portalOrder[i].portalFlash.width,280,5)),this.portalOrder[i].portalFlash.width>250&&this.portalOrder[i].portalFlash.height>20&&(this.portalOrder[i].portalFlash.height=this.simpleEase(this.portalOrder[i].portalFlash.height,10,5)),this.portalOrder[i].portalFlash.height<20&&(this.portalOrder[i].portalFlash.width=this.simpleEase(this.portalOrder[i].portalFlash.width,0,3),this.portalOrder[i].portalFlash.width<2&&(this.portalOrder[i].scored=!1)));if(0==Game.isLowEndIPad){if(++this.portalParticleCounter>=10){if(1==this.focusModeActive){for(i=0;i<this.powerupParticles.length;i++)if(0==this.powerupParticles[i].active){this.powerupParticles[i].active=!0,this.powerupParticles[i].sprite.position.x=0,this.powerupParticles[i].sprite.alpha=1,this.powerupParticles[i].sprite.scale.x=this.powerupParticles[i].sprite.scale.y=Game.getRandom(1,2),this.powerupParticles[i].sprite.position.y=Game.getRandom(-40,40);break}}else{for(i=0;i<this.greenParticles.length;i++)if(0==this.greenParticles[i].active){this.greenParticles[i].active=!0,this.greenParticles[i].sprite.position.x=0,this.greenParticles[i].sprite.alpha=1,this.greenParticles[i].sprite.scale.x=this.greenParticles[i].sprite.scale.y=Game.getRandom(.5,1.5),this.greenParticles[i].sprite.position.y=Game.getRandom(-40,40);break}for(i=0;i<this.orangeParticles.length;i++)if(0==this.orangeParticles[i].active){this.orangeParticles[i].active=!0,this.orangeParticles[i].sprite.position.x=0,this.orangeParticles[i].sprite.alpha=1,this.orangeParticles[i].sprite.scale.x=this.orangeParticles[i].sprite.scale.y=Game.getRandom(.5,1.5),this.orangeParticles[i].sprite.position.y=Game.getRandom(-40,40);break}for(i=0;i<this.pinkParticles.length;i++)if(0==this.pinkParticles[i].active){this.pinkParticles[i].active=!0,this.pinkParticles[i].sprite.position.x=0,this.pinkParticles[i].sprite.alpha=1,this.pinkParticles[i].sprite.scale.x=this.pinkParticles[i].sprite.scale.y=Game.getRandom(.5,1.5),this.pinkParticles[i].sprite.position.y=Game.getRandom(-40,40);break}}this.portalParticleCounter=0}if(1==this.focusModeActive)for(i=0;i<this.powerupParticles.length;i++)1==this.powerupParticles[i].active&&(this.powerupParticles[i].sprite.position.x+=2+this.powerupParticles[i].sprite.scale.y,this.powerupParticles[i].sprite.alpha-=.02,this.powerupParticles[i].sprite.scale.x>0&&(this.powerupParticles[i].sprite.scale.x=this.powerupParticles[i].sprite.scale.y-=.01),this.powerupParticles[i].sprite.alpha<=0&&(this.powerupParticles[i].active=!1));else{for(i=0;i<this.pinkParticles.length;i++)1==this.pinkParticles[i].active&&(this.pinkParticles[i].sprite.position.x+=2+this.pinkParticles[i].sprite.scale.y,this.pinkParticles[i].sprite.alpha-=.02,this.pinkParticles[i].sprite.scale.x>0&&(this.pinkParticles[i].sprite.scale.x=this.pinkParticles[i].sprite.scale.y-=.01),this.pinkParticles[i].sprite.alpha<=0&&(this.pinkParticles[i].active=!1));for(i=0;i<this.orangeParticles.length;i++)1==this.orangeParticles[i].active&&(this.orangeParticles[i].sprite.position.x+=2+this.orangeParticles[i].sprite.scale.y,this.orangeParticles[i].sprite.alpha-=.02,this.orangeParticles[i].sprite.scale.x>0&&(this.orangeParticles[i].sprite.scale.x=this.orangeParticles[i].sprite.scale.y-=.01),this.orangeParticles[i].sprite.alpha<=0&&(this.orangeParticles[i].active=!1));for(i=0;i<this.greenParticles.length;i++)1==this.greenParticles[i].active&&(this.greenParticles[i].sprite.position.x+=2+this.greenParticles[i].sprite.scale.y,this.greenParticles[i].sprite.alpha-=.02,this.greenParticles[i].sprite.scale.x>0&&(this.greenParticles[i].sprite.scale.x=this.greenParticles[i].sprite.scale.y-=.01),this.greenParticles[i].sprite.alpha<=0&&(this.greenParticles[i].active=!1))}}for(i=0;i<this.chickenUiArray.length;i++)if(1==this.chickenUiArray[i].active){var e=this.chickenUiArray[i].chickenID;this.chickenUiArray[i].container.position.x=this.chickenManager.chickens[e].holder.position.x,this.chickenUiArray[i].container.position.y=this.chickenManager.chickens[e].holder.position.y}for(i=0;i<this.chickenUiArray.length;i++)0==this.chickenUiArray[i].clicked&&(this.chickenUiArray[i].container.scale.x=this.chickenUiArray[i].container.scale.y=this.simpleEase(this.chickenUiArray[i].container.scale.y,1,5)),1==this.chickenUiArray[i].clicked&&(this.chickenUiArray[i].container.scale.x=this.chickenUiArray[i].container.scale.y=this.simpleEase(this.chickenUiArray[i].container.scale.y,1.2,5),this.chickenUiArray[i].container.scale.x>=1.15&&(this.chickenUiArray[i].clicked=!1));for(i=0;i<this.bridgeAnchors.length;i++)0!=this.bridgeAnchors[i].anchorState&&(this.bridgeAnchors[i].lightSprite1.rotation-=.01,this.bridgeAnchors[i].lightSprite2.rotation+=.01);if(1==this.rightHandExtentionActive&&this.rightHandExtention.width<this.rightExtentionTargetWidth&&(this.rightHandExtention.width+=9,this.rightHandExtention.position.x+=9),1==this.leftHandExtentionActive&&this.leftHandExtention.width<this.leftExtentionTargetWidth&&(this.leftHandExtention.width+=9),0==Game.isLowEndIPad){if(1==this.leftArmActive&&++this.leftHandTick>=8)for(i=0;i<this.leftHandParticles.length;i++)if(0==this.leftHandParticles[i].active){this.leftHandParticles[i].active=!0,this.leftHandTick=0,this.leftHandParticles[i].counter=0,this.leftHandParticles[i].sprite.position.x=this.henryArmBeamLeft.position.x,this.leftHandParticles[i].sprite.visible=!0,this.leftHandParticles[i].sprite.alpha=1,this.leftHandParticles[i].sprite.position.y=this.henryArmBeamLeft.position.y+Game.getRandom(-3,3),this.leftHandParticles[i].sprite.scale.y=this.leftHandParticles[i].sprite.scale.y=Game.getRandom(.3,.6),this.leftHandParticles[i].sprite.rotation=Game.getRandom(0,2*Math.PI),this.leftHandParticles[i].speed=this.leftHandParticles[i].defaultSpeed;break}if(1==this.rightArmActive&&++this.rightHandTick>=8)for(i=0;i<this.rightHandParticles.length;i++)if(0==this.rightHandParticles[i].active){this.rightHandTick=0,this.rightHandParticles[i].counter=0,this.rightHandParticles[i].active=!0,this.rightHandParticles[i].sprite.position.x=this.henryArmBeamRight.position.x,this.rightHandParticles[i].sprite.visible=!0,this.rightHandParticles[i].sprite.alpha=1,this.rightHandParticles[i].sprite.position.y=this.henryArmBeamRight.position.y+Game.getRandom(-3,3),this.rightHandParticles[i].sprite.scale.y=this.rightHandParticles[i].sprite.scale.y=Game.getRandom(.3,.6),this.rightHandParticles[i].sprite.rotation=Game.getRandom(0,2*Math.PI),this.rightHandParticles[i].speed=this.rightHandParticles[i].defaultSpeed;break}for(i=0;i<this.leftHandParticles.length;i++)1==this.leftHandParticles[i].active&&(this.leftHandParticles[i].sprite.position.x-=this.leftHandParticles[i].speed,this.leftHandParticles[i].speed+=.2,this.leftHandParticles[i].sprite.alpha-=.018,++this.leftHandParticles[i].counter>this.leftExtentionTargetWidth&&(this.leftHandParticles[i].active=!1,this.leftHandParticles[i].sprite.visible=!1));for(i=0;i<this.rightHandParticles.length;i++)1==this.rightHandParticles[i].active&&(this.rightHandParticles[i].sprite.position.x+=this.rightHandParticles[i].speed,this.rightHandParticles[i].speed+=.2,this.rightHandParticles[i].sprite.alpha-=.018,++this.rightHandParticles[i].counter>this.rightExtentionTargetWidth&&(this.rightHandParticles[i].active=!1,this.rightHandParticles[i].sprite.visible=!1))}if(++this.beamTick>=8){this.henryArmBeamLeft.alpha=.9,this.henryArmBeamHighlightLeft.alpha=.8,this.henryArmBeamRight.alpha=.9,this.henryArmBeamHighlightRight.alpha=.8,this.rightHandExtention.alpha=1,this.leftHandExtention.alpha=1,0==this.gameoverTriggered&&(this.grid.alpha=1),this.redGlow.alpha=.8,1==this.focusModeActive&&(this.powerUpPortalCore.alpha=.5);for(i=0;i<this.portalOrder.length;i++)if(1==this.portalOrder[i].scored){switch(this.portalOrder[i].colour){case"green":this.greenWall.alpha=1;break;case"pink":this.pinkWall.alpha=1;break;case"orange":this.orangeWall.alpha=1}this.portalOrder[i].innerGlow.alpha=.6,this.portalOrder[i].outerGlow.alpha=.8,this.portalOrder[i].platformGlow.alpha=1}else{switch(this.portalOrder[i].colour){case"green":this.greenWall.alpha=.5;break;case"pink":this.pinkWall.alpha=.5;break;case"orange":this.orangeWall.alpha=.5}this.portalOrder[i].innerGlow.alpha=.6,this.portalOrder[i].outerGlow.alpha=.8,this.portalOrder[i].platformGlow.alpha=.5}this.beamTick=0}else{this.henryArmBeamLeft.alpha-=.05,this.rightHandExtention.alpha-=.05,this.leftHandExtention.alpha-=.05,this.henryArmBeamHighlightLeft.alpha-=.1,this.henryArmBeamHighlightRight.alpha-=.1,this.henryArmBeamRight.alpha-=.05,this.orangeWall.alpha-=.01,this.pinkWall.alpha-=.01,this.greenWall.alpha-=.01,1==this.focusModeActive&&(this.powerUpPortalCore.alpha-=.01),0==this.gameoverTriggered&&(this.grid.alpha-=.05),this.redGlow.alpha-=.01;for(var i=0;i<this.portalOrder.length;i++)this.portalOrder[i].innerGlow.alpha-=.03,this.portalOrder[i].outerGlow.alpha-=.04,this.portalOrder[i].platformGlow.alpha-=.01}if(++this.blinkTimer>=this.blinkLimit&&(this.henryHead0.visible=!1,this.henryHeadEyes.visible=!1,this.henryHeadBlink.visible=!0,this.blinkTimer>=this.blinkLimit+15&&(this.henryHead0.visible=!0,this.henryHeadEyes.visible=!0,this.henryHeadBlink.visible=!1,this.blinkTimer=0,this.blinkLimit=Game.getRandom(90,120,!0))),1==this.expressionActive&&++this.expressionTimer>=120&&(this.changeHenryExpression("neutral"),this.expressionActive=!1),1==this.eyePositioned&&++this.eyeTimer>=90&&(this.setEyePosition(10),this.eyeTimer=0,this.eyePositioned=!1),this.angleLeftArm(),this.angleRightArm(),this.inputManager.tick(),this.chickenManager.tick(),this.bridgeAsset.width=this.simpleEase(this.bridgeAsset.width,this.targetBridgeWidth,this.targetBridgeEaseAmount),this.bridgeAssetPowerUp.width=this.simpleEase(this.bridgeAssetPowerUp.width,this.targetBridgeWidth,this.targetBridgeEaseAmount),this.bridgeAssetHighlight.width=this.simpleEase(this.bridgeAssetHighlight.width,this.targetBridgeWidth,this.targetBridgeEaseAmount),++this.glitchCount>=this.glitchLimit){this.glitchCount=0,this.glitchLimit=Game.getRandom(2,10,!0);var n=Game.getRandom(0,10);this.targetGlitchScale=n,this.targetGlitchYPos=Game.stageHeight/2+Game.getRandom(-100,100),this.targetGlitchAlpha=Game.getRandom(.9,1)}if(this.holoFilter.scale.x=this.simpleEase(this.holoFilter.scale.x,this.targetGlitchScale,this.glitchEaseAmount),this.holoFilterSprite.position.y=this.simpleEase(this.holoFilterSprite.position.y,this.targetGlitchYPos,this.glitchEaseAmount),this.bridgeAsset.alpha=this.simpleEase(this.bridgeAsset.alpha,this.targetGlitchAlpha,this.glitchEaseAmount),this.bridgeAssetPowerUp.alpha=this.simpleEase(this.bridgeAssetPowerUp.alpha,this.targetGlitchAlpha,this.glitchEaseAmount),0!=this.bridgeInputSwipeMode){var o=this.bridgeInputIndicator.rotation;this.currentNodeTargetIndex=this.getClosestSwipeAnchorFromAngle(this.validSwipeAnchors,o),this.setTargetSwipeNode()}}},e.prototype.angleLeftArm=function(){this.henryArmLeftHolder.rotation=this.simpleEase(this.henryArmLeftHolder.rotation,this.armAngleLeft,this.armEaseAmount)},e.prototype.angleRightArm=function(){this.henryArmRightHolder.rotation=this.simpleEase(this.henryArmRightHolder.rotation,this.armAngleRight,this.armEaseAmount)},e.prototype.setTargetSwipeNode=function(){for(var t=0;t<this.bridgeAnchors.length;t++)2==this.bridgeAnchors[t].anchorState&&(this.bridgeAnchors[t].lightSprite1.alpha=.3,this.bridgeAnchors[t].lightSprite2.alpha=.3);this.bridgeAnchors[this.currentNodeTargetIndex].lightSprite1.alpha=1,this.bridgeAnchors[this.currentNodeTargetIndex].lightSprite2.alpha=1},e.prototype.getBottomPlatformPos=function(){return this.platformPositions[this.platformPositions.length-1].pos},e.prototype.endGame=function(){if(this.featherBurst.fire(),this.chickenManager.restartTime(),Game.playSound("mind-the-gap/alarm-sound"),0==this.gameoverTriggered){t=new RoughEase({strength:2,points:15,randomize:!0,clamp:!0});TweenMax.to(this.mainHolder.scale,.2,{x:1.05,y:1.05,ease:t,yoyo:!0,repeat:1}),this.grid.alpha=0}if(0==this.focusModeActive){this.redOverlay.visible=!0,this.redOverlay.blendMode=PIXI.BLEND_MODES.ADD,this.game.powerUpManager.manuallyHidePowerUpButton();var t=new RoughEase({strength:2,points:15,randomize:!0,clamp:!0});TweenMax.to(this.redOverlay,1,{alpha:.8,ease:t,yoyo:!0,repeat:-1}),this.gameoverTimeline=new TimelineMax,this.gameoverTimeline.call(function(){this.gameOver(this)},null,this,2),this.gameoverTriggered=!0}else 1==this.focusModeActive&&(this.focusModeActive=!1,this.game.powerUpManager.endPowerUpMode(),this.gameoverTimeline=new TimelineMax,this.gameoverTimeline.call(function(){Game.stopSound("mind-the-gap/alarm-sound")},null,this,2),this.chickenManager.allActiveChickens())},e.prototype.gameOver=function(t){this.score<5?this.stars=0:this.score>=5&&this.score<15?this.stars=1:this.score>15&&this.score<25?this.stars=2:this.score>25&&(this.stars=3),Game.coreData.setCurrentGameScoreFromGame(this.score,this.stars),this.game.setScene("gameoverScene",!0)},e.prototype.keyDown=function(e){t.prototype.keyDown.call(this,e),1!=this.paused&&("left"==e?this.leftKeyDown():"right"==e&&this.rightKeyDown())},e.prototype.keyUp=function(e){t.prototype.keyUp.call(this,e),1!=this.paused&&("left"==e?this.leftKeyUp():"right"==e&&this.rightKeyUp())},e.prototype.leftKeyDown=function(){},e.prototype.leftKeyUp=function(){},e.prototype.rightKeyDown=function(){},e.prototype.rightKeyUp=function(){},e.prototype.restore=function(){t.prototype.restore.call(this),this.game.ui.setUI("pause"),this.setBackgroundColor(12961221)},e.prototype.activatePowerUpEffect=function(){Game.playSound("mind-the-gap/hero-music-loop",.7),Game.playSound("mind-the-gap/hero-music-intro"),Game.stopSound("mind-the-gap/background-music-2"),this.bridgeAsset.visible=!1,this.bridgeAssetPowerUp.visible=!0,this.focusModeActive=!0,this.powerupPortalParticles.visible=!0,this.chickenManager.activateFocusMode(),Game.playSound("mind-the-gap/flicker-high"),this.pinkWall.visible=!1,this.orangeWall.visible=!1,this.greenWall.visible=!1,this.portalAllColoursHolderBack.visible=!0,this.powerupGreenWallFlash.visible=!0,this.powerupOrangeWallFlash.visible=!0,this.powerupPurpleWallFlash.visible=!0,this.portalAllColoursHolderFront.visible=!0,this.animatePortalsOut(),this.portalPowerUpInnerGreen.alpha=.6,this.portalPowerUpInnerPurple.alpha=0,this.portalPowerUpInnerOrange.alpha=0,this.powerupGreenWallFlash.alpha=.6,this.powerupPurpleWallFlash.alpha=0,this.powerupOrangeWallFlash.alpha=0,this.powerupPortalTimeline=this.killTween(this.powerupPortalTimeline),this.powerupPortalTimeline=new TimelineMax({repeat:-1}),this.powerupPortalTimeline.add([TweenMax.to(this.portalPowerUpInnerGreen,1,{alpha:0,delay:0}),TweenMax.to(this.portalPowerUpInnerPurple,1,{alpha:.6,delay:0}),TweenMax.to(this.portalPowerUpInnerPurple,1,{alpha:0,delay:1}),TweenMax.to(this.portalPowerUpInnerOrange,1,{alpha:.6,delay:1}),TweenMax.to(this.portalPowerUpInnerOrange,1,{alpha:0,delay:2}),TweenMax.to(this.portalPowerUpInnerGreen,1,{alpha:.6,delay:2})],0),this.powerupPortalTimeline.add([TweenMax.to(this.powerupGreenWallFlash,1,{alpha:0,delay:0}),TweenMax.to(this.powerupPurpleWallFlash,1,{alpha:.6,delay:0}),TweenMax.to(this.powerupPurpleWallFlash,1,{alpha:0,delay:1}),TweenMax.to(this.powerupOrangeWallFlash,1,{alpha:.6,delay:1}),TweenMax.to(this.powerupOrangeWallFlash,1,{alpha:0,delay:2}),TweenMax.to(this.powerupGreenWallFlash,1,{alpha:.6,delay:2})],0),this.powerupPortalTimeline.timeScale(2)},e.prototype.deactivatePowerUpEffect=function(){this.bridgeAsset.visible=!0,this.bridgeAssetPowerUp.visible=!1,Game.stopSound("mind-the-gap/hero-music-loop"),Game.stopSound("mind-the-gap/hero-music-intro"),Game.playSound("mind-the-gap/background-music-2"),this.focusModeActive=!1,this.powerupPortalParticles.visible=!1,this.chickenManager.deactivateFocusMode(),Game.playSound("mind-the-gap/flicker-high"),this.portalAllColoursHolderFront.visible=!1,this.portalAllColoursHolderBack.visible=!1,this.pinkWall.visible=!0,this.orangeWall.visible=!0,this.greenWall.visible=!0,this.powerupGreenWallFlash.visible=!1,this.powerupPurpleWallFlash.visible=!1,this.powerupOrangeWallFlash.visible=!1,this.animatePortalsIn()},e.prototype.incrementScore=function(){this.changeHenryExpression("happy"),this.score++,1==Game.getRandom(0,1,!0)?(Game.playSound("mind-the-gap/teleport-low"),Game.getRandom(0,1)>.3&&Game.playSound("mind-the-gap/henry-feels-good")):(Game.playSound("mind-the-gap/teleport-high"),Game.getRandom(0,1)>.3&&Game.playSound("mind-the-gap/henry-yeahh")),this.checkDifficulty(),this.updateScore(this.score),this.game.powerUpManager.earnedFocusPoint()},e.prototype.portalScore=function(t){if(1==this.focusModeActive)return this.powerUpPortalScored=!0,this.powerUpPortalFlash.alpha=1,this.powerUpPortalFlash.height=140,void(this.powerUpPortalFlash.width=0);for(var e=0;e<this.portalOrder.length;e++)this.portalOrder[e].colour==t&&(this.portalOrder[e].scored=!0,this.portalOrder[e].portalFlash.alpha=1,this.portalOrder[e].portalFlash.height=140,this.portalOrder[e].portalFlash.width=0)},e.prototype.getClosestPlatform=function(t){for(var e,i=1e3,n=0;n<this.platformPositions.length;n++){var o=Math.abs(t-this.platformPositions[n].pos);o<i&&(i=o,this.platformPositions[n].pos,e=n)}return e},e.prototype.getPlatformBelowPos=function(t){for(var e,i=this.platformPositions.length-1;i>=0;i--)this.platformPositions[i].pos>t&&(e=i);return e},e.prototype.getLowestPlatformPos=function(){return this.platformPositions[this.platformPositions.length-1].pos},e.prototype.pause=function(e){0==e&&t.prototype.pause.call(this,e),this.game.powerUpManager.pause(),Game.pauseSound("mind-the-gap/background-music-2"),Game.pauseSound("mind-the-gap/hero-music-loop"),Game.pauseSound("mind-the-gap/man-cave"),Game.pauseSound("mind-the-gap/chicken-flap"),this.pauseResumeTween(this.spawnChickenTimeline,"pause"),this.pauseResumeTween(this.difficultyCheckDelay,"pause"),this.pauseResumeTween(this.gameoverTimeline,"pause"),this.chickenManager.pause()},e.prototype.resume=function(){t.prototype.resume.call(this),this.chickenManager.resume(),this.setBackgroundColor(12961221),Game.resumeSound("mind-the-gap/background-music-2"),Game.resumeSound("mind-the-gap/man-cave"),Game.resumeSound("mind-the-gap/chicken-flap"),Game.resumeSound("mind-the-gap/hero-music-loop"),this.game.ui.setUI("gameplay-mind-the-gap"),this.game.powerUpManager.resume(),this.pauseResumeTween(this.spawnChickenTimeline,"resume"),this.pauseResumeTween(this.difficultyCheckDelay,"resume"),this.pauseResumeTween(this.gameoverTimeline,"resume")},e.prototype.destroy=function(){t.prototype.destroy.call(this),Game.stopSound("mind-the-gap/background-music-2"),Game.stopSound("mind-the-gap/man-cave"),Game.stopSound("mind-the-gap/chicken-flap"),Game.stopSound("mind-the-gap/hero-music-loop"),Game.displayStore.returnPooledItem(this.leftLight),Game.displayStore.returnPooledItem(this.rightLight),Game.displayStore.returnPooledItem(this.bgMiddleLeft),Game.displayStore.returnPooledItem(this.bgMiddleRight),Game.displayStore.returnPooledItem(this.henryArmBeamHighlightLeft),Game.displayStore.returnPooledItem(this.henryArmBeamHighlightRight),Game.displayStore.returnPooledItem(this.henryArmBeamRight),Game.displayStore.returnPooledItem(this.henryArmBeamLeft),this.spawnChickenTimeline=this.killTween(this.spawnChickenTimeline),this.difficultyCheckDelay=this.killTween(this.difficultyCheckDelay),this.gameoverTimeline=this.killTween(this.gameoverTimeline),this.tutorialOverlay.destroy(),this.inputManager.destroy(),this.chickenManager.destroy(),this.featherBurst.destroy(),this.landingParticles.destroy(),this.landingPowerupParticles.destroy(),this.bridgeHolder.filters=[];for(e=0;e<this.bridgeAnchors.length;e++)Game.displayStore.returnPooledItem(this.bridgeAnchors[e].lightSprite1),Game.displayStore.returnPooledItem(this.bridgeAnchors[e].lightSprite2),Game.displayStore.returnPooledItem(this.bridgeAnchors[e].uiHighlight),Game.displayStore.returnPooledItem(this.bridgeAnchors[e].sprite);for(e=0;e<this.platforms.length;e++)Game.displayStore.returnPooledItem(this.platforms[e]);for(e=0;e<this.levelEdges.length;e++)Game.displayStore.returnPooledItem(this.levelEdges[e]);for(e=0;e<this.rearWallsLeft.length;e++)Game.displayStore.returnPooledItem(this.rearWallsLeft[e]);for(e=0;e<this.rearWallsRight.length;e++)Game.displayStore.returnPooledItem(this.rearWallsRight[e]);if(0==Game.isLowEndIPad){for(e=0;e<this.rightHandParticles.length;e++)Game.displayStore.returnPooledItem(this.rightHandParticles[e].sprite);for(e=0;e<this.leftHandParticles.length;e++)Game.displayStore.returnPooledItem(this.leftHandParticles[e].sprite)}Game.displayStore.returnPooledItem(this.rightHandExtention),Game.displayStore.returnPooledItem(this.leftHandExtention);for(e=0;e<this.portalOrder.length;e++)Game.displayStore.returnPooledItem(this.portalOrder[e].portalBack),Game.displayStore.returnPooledItem(this.portalOrder[e].portalFront),Game.displayStore.returnPooledItem(this.portalOrder[e].hexGrid),Game.displayStore.returnPooledItem(this.portalOrder[e].innerGlow),Game.displayStore.returnPooledItem(this.portalOrder[e].outerGlow),Game.displayStore.returnPooledItem(this.portalOrder[e].outerGlow2),Game.displayStore.returnPooledItem(this.portalOrder[e].portalFlash),Game.displayStore.returnPooledItem(this.portalOrder[e].error);for(e=0;e<this.chickenUiArray.length;e++)Game.displayStore.returnPooledItem(this.chickenUiArray[e].greenUI),Game.displayStore.returnPooledItem(this.chickenUiArray[e].orangeUI),Game.displayStore.returnPooledItem(this.chickenUiArray[e].pinkUI),Game.displayStore.returnPooledItem(this.chickenUiArray[e].container);if(0==Game.isLowEndIPad){for(e=0;e<this.pinkParticles.length;e++)Game.displayStore.returnPooledItem(this.pinkParticles[e].sprite);for(e=0;e<this.orangeParticles.length;e++)Game.displayStore.returnPooledItem(this.orangeParticles[e].sprite);for(e=0;e<this.greenParticles.length;e++)Game.displayStore.returnPooledItem(this.greenParticles[e].sprite);for(var e=0;e<this.powerupParticles.length;e++)Game.displayStore.returnPooledItem(this.powerupParticles[e].sprite);Game.displayStore.returnPooledItem(this.greenPortalParticles),Game.displayStore.returnPooledItem(this.orangePortalParticles),Game.displayStore.returnPooledItem(this.pinkPortalParticles)}Game.displayStore.returnPooledItem(this.platformFront1),Game.displayStore.returnPooledItem(this.platformFront3),Game.displayStore.returnPooledItem(this.henryElectric)},e}(Scene),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},PhotonFusionGameplayScene=function(t){function e(e){t.call(this,e),this.id="photonFusionGameplayScene"}return __extends(e,t),e.prototype.init=function(e){t.prototype.init.call(this),this.setBackgroundColor(9408399),this.tutorialOverlay=new TutorialOverlay(this),Game.coreData.setCurrentGame("photon-fusion"),Game.playSound("photon-fusion/background-music-2",.1),Game.playSound("photon-fusion/man-cave",.05),Game.playSound("photon-fusion/cpt-man-go-for-it",.8),this.focusModeActive=!1,this.inputCharging=!1,this.placeCirclesActive=!1,this.placeCircleTimer=0,this.placeCircleCounter=0,this.backGlowTimer=0,this.backGlowActive=!1,this.henryBreathIn=!0,this.lightFlash=!1,this.lightFlashTimer=0,this.expressionActive=!1,this.expressionTimer=0,this.eyesTimer=0,this.eyesActive=!1,this.eyesToMiddle=!1,this.topGlowing=!1,this.bottomGlowing=!1,this.leftGlowing=!1,this.rightGlowing=!1,this.henryVoiceActive=!0,this.henryVoiceTimer=0,this.tutorialViewed=Game.coreData.getGameTutorialViewed("photon-fusion"),this.redWarning=Game.displayStore.getSprite("photon-fusion/red-warning"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("hub"),this.mainHolder=Game.displayStore.getContainer("photon-fusion/main-holder"),this.mainHolder.interactiveChildren=!1,this.henryHappy=Game.displayStore.getSprite("photon-fusion/henry-happy"),this.henrySad=Game.displayStore.getSprite("photon-fusion/henry-sad"),this.henryNeutral=Game.displayStore.getSprite("photon-fusion/henry-neutral"),this.henryShocked=Game.displayStore.getSprite("photon-fusion/henry-shocked"),this.henryHappy.position.x=Game.stageWidth/2+5,this.henrySad.position.x=Game.stageWidth/2+5,this.henryNeutral.position.x=Game.stageWidth/2+5,this.henryShocked.position.x=Game.stageWidth/2+3,this.henryHappy.position.y=130,this.henrySad.position.y=130,this.henryNeutral.position.y=120,this.henryShocked.position.y=135,this.henryHappy.visible=!0,this.henrySad.visible=!1,this.henryNeutral.visible=!1,this.henryShocked.visible=!1,this.stars=0,this.topBorder=Game.displayStore.getSprite("photon-fusion/frame"),this.bottomBorder=Game.displayStore.getSprite("photon-fusion/frame"),this.leftBorder=Game.displayStore.getSprite("photon-fusion/frame"),this.rightBorder=Game.displayStore.getSprite("photon-fusion/frame"),this.topBorderGlow=Game.displayStore.getSprite("photon-fusion/frame-glow"),this.bottomBorderGlow=Game.displayStore.getSprite("photon-fusion/frame-glow"),this.leftBorderGlow=Game.displayStore.getSprite("photon-fusion/frame-glow"),this.rightBorderGlow=Game.displayStore.getSprite("photon-fusion/frame-glow"),this.topInnerBorderGlow=Game.displayStore.getSprite("photon-fusion/inner-glow"),this.bottomInnerBorderGlow=Game.displayStore.getSprite("photon-fusion/inner-glow"),this.leftInnerBorderGlow=Game.displayStore.getSprite("photon-fusion/inner-glow"),this.rightInnerBorderGlow=Game.displayStore.getSprite("photon-fusion/inner-glow"),this.indicator1=Game.displayStore.getSprite("photon-fusion/indicator-1"),this.indicator2=Game.displayStore.getSprite("photon-fusion/indicator-2"),this.indicator3=Game.displayStore.getSprite("photon-fusion/indicator-3"),this.backGlow=Game.displayStore.getSprite("photon-fusion/back-glow"),this.backGlow.position.x=Game.stageWidth/2,this.backGlow.position.y=Game.stageHeight/2,this.backGlow.alpha=.3,this.backGlow.visible=!1,this.backGlow.width=Game.stageWidth,this.backGlow.height=Game.stageHeight,this.backGlow.blendMode=PIXI.BLEND_MODES.ADD,this.topBorder.position.x=Game.stageWidth/2,this.topBorder.position.y=-24,this.topBorder.width=Game.stageWidth,this.bottomBorder.position.x=Game.stageWidth/2,this.bottomBorder.position.y=Game.stageHeight+24,this.bottomBorder.width=Game.stageWidth,this.bottomBorder.scale.y=-1,this.leftBorder.position.x=-24,this.leftBorder.position.y=Game.stageHeight/2,this.leftBorder.width=Game.stageHeight,this.leftBorder.rotation=-Math.PI/2,this.rightBorder.position.x=Game.stageWidth+24,this.rightBorder.position.y=Game.stageHeight/2,this.rightBorder.width=Game.stageHeight,this.rightBorder.rotation=Math.PI/2,this.topBorderGlow.position.x=Game.stageWidth/2,this.topBorderGlow.position.y=0,this.topBorderGlow.width=Game.stageWidth,this.bottomBorderGlow.position.x=Game.stageWidth/2,this.bottomBorderGlow.position.y=Game.stageHeight,this.bottomBorderGlow.width=Game.stageWidth,this.bottomBorderGlow.scale.y=-1,this.leftBorderGlow.position.x=0,this.leftBorderGlow.position.y=Game.stageHeight/2,this.leftBorderGlow.width=Game.stageHeight,this.leftBorderGlow.rotation=-Math.PI/2,this.rightBorderGlow.position.x=Game.stageWidth,this.rightBorderGlow.position.y=Game.stageHeight/2,this.rightBorderGlow.width=Game.stageHeight,this.rightBorderGlow.rotation=Math.PI/2,this.topInnerBorderGlow.position.x=Game.stageWidth/2,this.topInnerBorderGlow.position.y=23,this.topInnerBorderGlow.width=Game.stageWidth,this.bottomInnerBorderGlow.position.x=Game.stageWidth/2,this.bottomInnerBorderGlow.position.y=Game.stageHeight-23,this.bottomInnerBorderGlow.width=Game.stageWidth,this.bottomInnerBorderGlow.scale.y=-1,this.leftInnerBorderGlow.position.x=23,this.leftInnerBorderGlow.position.y=Game.stageHeight/2,this.leftInnerBorderGlow.width=Game.stageHeight,this.leftInnerBorderGlow.rotation=-Math.PI/2,this.rightInnerBorderGlow.position.x=Game.stageWidth-23,this.rightInnerBorderGlow.position.y=Game.stageHeight/2,this.rightInnerBorderGlow.width=Game.stageHeight,this.rightInnerBorderGlow.rotation=Math.PI/2,this.bottomInnerBorderGlow.blendMode=PIXI.BLEND_MODES.ADD,this.topInnerBorderGlow.blendMode=PIXI.BLEND_MODES.ADD,this.leftInnerBorderGlow.blendMode=PIXI.BLEND_MODES.ADD,this.rightInnerBorderGlow.blendMode=PIXI.BLEND_MODES.ADD,this.bottomInnerBorderGlow.visible=!1,this.bottomInnerBorderGlow.alpha=.4,this.topInnerBorderGlow.visible=!1,this.topInnerBorderGlow.alpha=.4,this.leftInnerBorderGlow.visible=!1,this.leftInnerBorderGlow.alpha=.4,this.rightInnerBorderGlow.visible=!1,this.rightInnerBorderGlow.alpha=.4,this.leftGlassTexture=Game.displayStore.getSprite("photon-fusion/glass-texture"),this.rightGlassTexture=Game.displayStore.getSprite("photon-fusion/glass-texture"),this.leftGlassTexture.position.x=40,this.leftGlassTexture.position.y=Game.stageHeight/2,this.rightGlassTexture.position.x=Game.stageWidth-40,this.rightGlassTexture.position.y=Game.stageHeight/2,this.rightGlassTexture.scale.x=-1,this.leftGlassTexture.alpha=.3,this.rightGlassTexture.alpha=.3,this.bolt1=Game.displayStore.getSprite("photon-fusion/corner-bolt"),this.bolt2=Game.displayStore.getSprite("photon-fusion/corner-bolt"),this.bolt3=Game.displayStore.getSprite("photon-fusion/corner-bolt"),this.bolt4=Game.displayStore.getSprite("photon-fusion/corner-bolt"),this.glint1=Game.displayStore.getSprite("photon-fusion/glass-glint"),this.glint2=Game.displayStore.getSprite("photon-fusion/glass-glint"),this.glint3=Game.displayStore.getSprite("photon-fusion/glass-glint"),this.glint4=Game.displayStore.getSprite("photon-fusion/glass-glint"),this.glint1.alpha=.1,this.glint1.blendMode=PIXI.BLEND_MODES.ADD,this.glint2.alpha=.1,this.glint2.blendMode=PIXI.BLEND_MODES.ADD,this.glint3.alpha=0,this.glint3.blendMode=PIXI.BLEND_MODES.ADD,this.glint4.alpha=.1,this.glint4.blendMode=PIXI.BLEND_MODES.ADD,this.glint1.height=2*Game.stageHeight,this.glint1.position.x=100,this.glint1.width=200,this.glint1.position.y=Game.stageHeight/2,this.glint1.rotation=.8,this.glint2.height=2*Game.stageHeight,this.glint2.position.x=500,this.glint2.width=130,this.glint2.position.y=Game.stageHeight/2,this.glint2.rotation=.8,this.glint3.height=2*Game.stageHeight,this.glint3.position.x=600,this.glint3.width=100,this.glint3.position.y=Game.stageHeight/2,this.glint3.rotation=.8,this.glint4.height=2*Game.stageHeight,this.glint4.width=200,this.glint4.position.x=1020,this.glint4.position.y=Game.stageHeight/2,this.glint4.rotation=.8,this.bolt1.position.x=12,this.bolt1.position.y=17,this.bolt2.position.x=Game.stageWidth-12,this.bolt2.position.y=17,this.bolt3.position.x=12,this.bolt3.position.y=Game.stageHeight-17,this.bolt4.position.x=Game.stageWidth-12,this.bolt4.position.y=Game.stageHeight-17,this.backgroundTile1=Game.displayStore.getSprite("photon-fusion/background-tile-1"),this.backgroundTile2=Game.displayStore.getSprite("photon-fusion/background-tile-2"),this.backgroundTile3=Game.displayStore.getSprite("photon-fusion/background-tile-1"),this.backgroundTile4=Game.displayStore.getSprite("photon-fusion/background-tile-2"),this.backgroundTile1.position.x=-100,this.backgroundTile1.position.y=0,this.backgroundTile2.position.x=this.backgroundTile1.position.x+this.backgroundTile1.width,this.backgroundTile2.position.y=0,this.backgroundTile3.position.x=this.backgroundTile2.position.x+this.backgroundTile2.width,this.backgroundTile3.position.y=0,this.backgroundTile4.position.x=this.backgroundTile3.position.x+this.backgroundTile3.width,this.backgroundTile4.position.y=0,this.blackOverlay=Game.displayStore.getSprite("photon-fusion/black-overlay"),this.blackOverlay.position.x=Game.stageWidth/2,this.blackOverlay.position.y=Game.stageHeight/2,this.blackOverlay.width=Game.stageWidth,this.blackOverlay.height=Game.stageHeight,this.blackOverlay.blendMode=PIXI.BLEND_MODES.MULTIPLY,this.blackOverlay.alpha=.4,this.photonTypeNumber=5,this.inputPos=new PIXI.Point(-1e3,-1e3),this.inputChargeCount=0,this.inputChargeLimit=60,this.mainHolder.addChild(this.backgroundTile1),this.mainHolder.addChild(this.backgroundTile2),this.mainHolder.addChild(this.backgroundTile3),this.mainHolder.addChild(this.backgroundTile4),this.mainHolder.addChild(this.backGlow),this.mainHolder.addChild(this.redWarning),this.redWarning.width=500,this.redWarning.position.x=0-this.redWarning.width/2,this.redWarning.position.y=Game.stageHeight/2,this.redWarning.blendMode=PIXI.BLEND_MODES.ADD,this.warningActive=!1,this.redWarning.height=Game.stageHeight,this.henryHolder=Game.displayStore.getContainer("photon-fusion/henry-bg-holder"),this.henryHeadContainer=this.henryHolder.getContainer("photon-fusion/henry-head-container"),this.henryEyes=this.henryHeadContainer.getSprite("photon-fusion/henry-eyes"),this.henryHead=this.henryHeadContainer.getSprite("photon-fusion/henry-head"),this.henryHeadBlink=Game.displayStore.getSprite("photon-fusion/henry-head-blink"),this.henryHeadLightmap=this.henryHeadContainer.getSprite("photon-fusion/henry-head-lightmap"),this.henryHeadBlink.visible=!1,this.blinkTimer=0,this.blinkLimit=60,this.henryArmLeftHolder=Game.displayStore.getContainer("photon-fusion/henry-bg-arm-left-holder"),this.henryArmRightHolder=Game.displayStore.getContainer("photon-fusion/henry-bg-arm-right-holder"),this.henryBG=this.henryHolder.getSprite("photon-fusion/henry-body"),this.henryBGLightmap=this.henryHolder.getSprite("photon-fusion/henry-body-lightmap"),this.henryRightArmBase=this.henryHolder.getSprite("photon-fusion/henry-arm-base-right"),this.henryRightArmBaseLightmap=this.henryHolder.getSprite("photon-fusion/henry-arm-base-right-lightmap"),this.henryLeftArmBase=this.henryHolder.getSprite("photon-fusion/henry-arm-base-left"),this.henryLeftArmBaseLightmap=this.henryHolder.getSprite("photon-fusion/henry-arm-base-left-lightmap"),this.henryArmLeft=Game.displayStore.getSprite("photon-fusion/henry-arm-left"),this.henryArmLeftLightmap=Game.displayStore.getSprite("photon-fusion/henry-arm-left-lightmap"),this.henryArmRight=Game.displayStore.getSprite("photon-fusion/henry-arm-right"),this.henryArmRightLightmap=Game.displayStore.getSprite("photon-fusion/henry-arm-right-lightmap"),this.henryRightArmBase.position.x=Game.stageWidth/2+150,this.henryLeftArmBase.position.x=Game.stageWidth/2-150,this.henryRightArmBase.position.y=Game.stageHeight/2+145,this.henryLeftArmBase.position.y=Game.stageHeight/2+145,this.henryBG.position.x=Game.stageWidth/2,this.henryBG.position.y=Game.stageHeight,this.henryBGLightmap.position.x=Game.stageWidth/2,this.henryBGLightmap.position.y=Game.stageHeight,this.henryArmLeftHolder.addChild(this.henryArmLeft),this.henryArmLeftHolder.addChild(this.henryArmLeftLightmap),this.henryArmRightHolder.addChild(this.henryArmRight),this.henryArmRightHolder.addChild(this.henryArmRightLightmap),this.henryHeadContainer.position.y=190,this.henryHead.position.x=Game.stageWidth/2-15,this.henryHeadBlink.position.x=Game.stageWidth/2-15,this.henryHeadLightmap.position.x=Game.stageWidth/2-15,this.henryEyes.position.x=Game.stageWidth/2-5,this.henryEyes.position.y=40,this.mainHolder.addChild(this.henryHolder),this.mainHolder.addChild(this.henryArmLeftHolder),this.mainHolder.addChild(this.henryArmRightHolder),this.henryHolder.setRegPoint(.5,1,!0),this.henryArmLeftIdlePos=[150,300],this.henryArmRightIdlePos=[Game.stageWidth-150,300],this.henryArmLeftHolder.position.x=this.henryArmLeftIdlePos[0],this.henryArmLeftHolder.position.y=this.henryArmLeftIdlePos[1],this.henryArmRightHolder.position.x=this.henryArmRightIdlePos[0],this.henryArmRightHolder.position.y=this.henryArmRightIdlePos[1],this.henryArmLeftState="idle",this.henryArmRightState="idle",this.henryArmLeftTapPos=[0,0],this.henryArmRightTapPos=[0,0],this.handLeftIdleCount=0,this.handRightIdleCount=0,this.handLeftIdleSpeed=Game.getRandom(.02,.08),this.handRightIdleSpeed=Game.getRandom(.02,.08),this.handLeftIdleOffset=0,this.handRightIdleOffset=0,this.henryHandScaleTap=1,this.henryHandScaleIdle=.8,this.handAngleLeft=0,this.handAngleRight=0,this.handAngleLeftMax=-.5,this.handAngleRightMax=.5,this.handAngleLeftMin=.35,this.handAngleRightMin=-.35,this.henryAnimation=new TimelineMax,this.henryAnimation.add([TweenMax.to(this.henryHolder.scale,2,{y:.99,yoyo:!0,ease:Power1.easeInOut,repeat:-1}),TweenMax.to(this.henryHeadContainer.scale,2,{y:1.01,yoyo:!0,ease:Power1.easeInOut,repeat:-1})]),this.inputRadiusIndicator=Game.displayStore.getSprite("photon-fusion/input-radius"),this.inputPowerIndicator=Game.displayStore.getSprite("photon-fusion/indicator-power-circle"),this.inputPowerIndicator=Game.displayStore.getSprite("photon-fusion/indicator-power-circle"),this.inputPowerIndicator.alpha=.6,this.inputRadiusIndicator.position.y=-1e3,this.inputPowerIndicator.position.y=-1e3,this.indicator1.position.y=-1e3,this.indicator1.position.y=-1e3,this.indicator2.position.y=-1e3,this.indicator2.position.y=-1e3,this.indicator3.position.y=-1e3,this.indicator3.position.y=-1e3,this.indicator1.alpha=.6,this.indicator2.alpha=.6,this.indicator3.alpha=.6,this.indicator1.blendMode=PIXI.BLEND_MODES.ADD,this.indicator2.blendMode=PIXI.BLEND_MODES.ADD,this.indicator3.blendMode=PIXI.BLEND_MODES.ADD,this.inputPowerIndicator.blendMode=PIXI.BLEND_MODES.ADD,this.inputPowerIndicator.tint=65280,this.inputRadiusIndicator.tint=65280;if(this.leftBorderGlow.alpha=.6,this.rightBorderGlow.alpha=.6,this.topBorderGlow.alpha=.6,this.bottomBorderGlow.alpha=.6,this.mainHolder.addChild(this.blackOverlay),0==Game.isLowEndIPad){this.conCircleArray=new Array;for(a=0;a<30;a++)this.conCircleArray.push({sprite:Game.displayStore.getSprite("photon-fusion/con-circle"),active:!1,speed:Game.getRandom(1,2)}),this.conCircleArray[a].sprite.visible=!1,this.conCircleArray[a].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.mainHolder.addChild(this.conCircleArray[a].sprite)}this.shineArray=new Array;for(a=0;a<10;a++)this.shineArray.push({sprite:Game.displayStore.getSprite("photon-fusion/shine"),active:!1}),this.shineArray[a].sprite.visible=!1,this.shineArray[a].sprite.alpha=.8,this.shineArray[a].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.mainHolder.addChild(this.shineArray[a].sprite);if(this.mainHolder.addChild(this.leftGlassTexture),this.mainHolder.addChild(this.rightGlassTexture),this.mainHolder.addChild(this.glint1),this.mainHolder.addChild(this.glint2),this.mainHolder.addChild(this.glint3),this.mainHolder.addChild(this.glint4),this.mainHolder.addChild(this.inputRadiusIndicator),this.mainHolder.addChild(this.inputPowerIndicator),this.mainHolder.addChild(this.indicator1),this.mainHolder.addChild(this.indicator2),this.mainHolder.addChild(this.indicator3),this.mainHolder.addChild(this.topBorderGlow),this.mainHolder.addChild(this.bottomBorderGlow),this.mainHolder.addChild(this.leftBorderGlow),this.mainHolder.addChild(this.rightBorderGlow),this.mainHolder.addChild(this.topBorder),this.mainHolder.addChild(this.bottomBorder),this.mainHolder.addChild(this.leftBorder),this.mainHolder.addChild(this.rightBorder),this.mainHolder.addChild(this.topInnerBorderGlow),this.mainHolder.addChild(this.bottomInnerBorderGlow),this.mainHolder.addChild(this.leftInnerBorderGlow),this.mainHolder.addChild(this.rightInnerBorderGlow),this.mainHolder.addChild(this.bolt1),this.mainHolder.addChild(this.bolt2),this.mainHolder.addChild(this.bolt3),this.mainHolder.addChild(this.bolt4),this.henryArmLeftLightmap.blendMode=PIXI.BLEND_MODES.ADD,this.henryArmRightLightmap.blendMode=PIXI.BLEND_MODES.ADD,this.henryHeadLightmap.blendMode=PIXI.BLEND_MODES.ADD,this.henryLeftArmBaseLightmap.blendMode=PIXI.BLEND_MODES.ADD,this.henryRightArmBaseLightmap.blendMode=PIXI.BLEND_MODES.ADD,this.henryBGLightmap.blendMode=PIXI.BLEND_MODES.ADD,this.flashLightmap("off"),this.container.addChild(this.mainHolder),this.difficultyParams=new Array,this.difficultyParams.push({score:0,dotTickTime:50}),this.difficultyParams.push({score:10,dotTickTime:45}),this.difficultyParams.push({score:20,dotTickTime:40}),this.difficultyParams.push({score:30,dotTickTime:35}),this.difficultyParams.push({score:40,dotTickTime:30}),this.difficultyParams.push({score:50,dotTickTime:25}),this.scoreHolder=Game.displayStore.getContainer("photon-fusion/score-holder"),this.scoreFont=Game.displayStore.getBitmapText("photon-fusion/score-font"),this.scoreFont.scale.x=.8,this.scoreFont.scale.y=.8,this.scoreBGElement=Game.displayStore.getSprite("photon-fusion/score-bg-element"),this.scoreHolder.addChild(this.scoreBGElement),this.scoreHolder.addChild(this.scoreFont),this.container.addChild(this.scoreHolder),this.scoreHolder.position.x=Game.stageWidth/2,this.scoreHolder.position.y=50,this.score=0,this.photonManager=new PhotonFusionPhotonManager(this,this.mainHolder,this.photonTypeNumber),this.inputManager=new PhotonFusionInputManager(this,this.mainHolder),this.physicsManager=new PhotonFusionPhysicsManager(this,this.mainHolder),this.physicsManager.initPhysicsWorld(),0==Game.isLowEndIPad){this.joinParticles=new Array;for(a=0;a<60;a++){var i=Game.displayStore.getSprite("photon-fusion/join-particle"),n=this.physicsManager.getJoinParticle();i.scale.x=n.scale,i.scale.y=n.scale;var o;o=Game.getRandom(0,1)<.5?1:-1,this.joinParticles.push({sprite:i,body:n.body,active:!1,scale:n.scale,scaleDownSpeed:Game.getRandom(.008,.02),rotateSpeed:Game.getRandom(.1,.4)*o}),this.mainHolder.addChild(i),i.position.y=-1e3,i.blendMode=PIXI.BLEND_MODES.ADD}}this.positionEyes("neutral"),this.photonManager.createPhotons(),this.photonTotalNumber=this.photonManager.getTotalPhotonNumber(),this.inputAngleIndicators=new Array;for(var a=0;a<this.photonTotalNumber;a++)(i=Game.displayStore.getSprite("photon-fusion/angle-indicator")).position.y=-1e3,this.mainHolder.addChild(i),this.inputAngleIndicators.push({sprite:i,targetPhoton:null});this.photonManager.updateDepths(),1==Game.useFilters&&(this.rippleFilterSprite=Game.displayStore.getSprite("photon-fusion/dm-filter-ripple"),this.rippleFilter=new PIXI.filters.DisplacementFilter(this.rippleFilterSprite),this.rippleFilter.scale.x=0,this.rippleFilter.scale.y=0,this.mainHolder.addChild(this.rippleFilterSprite),this.rippleFilterSprite.position.y=-1e3,this.mainHolder.filters=[this.rippleFilter]),this.updateScore(this.score),1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("photon-fusion",!0)},e.prototype.getDotTickTime=function(){for(var t=0,e=0;e<this.difficultyParams.length&&this.score>=this.difficultyParams[e].score;e++)t=e;return this.difficultyParams[t].dotTickTime},e.prototype.placeConCircle=function(t,e,i){for(var n=0;n<this.conCircleArray.length;n++)if(0==this.conCircleArray[n].active){this.conCircleArray[n].active=!0,this.conCircleArray[n].sprite.visible=!0,this.conCircleArray[n].sprite.alpha=.5,this.conCircleArray[n].sprite.scale.x=.3,this.conCircleArray[n].sprite.scale.y=.3,this.conCircleArray[n].sprite.tint=t,this.conCircleArray[n].sprite.position.x=e+Game.getRandom(-15,15,!0),this.conCircleArray[n].sprite.position.y=Game.stageHeight-i+Game.getRandom(-15,15,!0);break}},e.prototype.activateWarning=function(){this.warningActive=!0,Game.playSound("photon-fusion/warning")},e.prototype.deActivateWarning=function(){this.warningActive=!1,Game.stopSound("photon-fusion/warning")},e.prototype.placeShine=function(t,e){for(var i=0;i<this.shineArray.length;i++)if(0==this.shineArray[i].active){this.shineArray[i].active=!0,this.shineArray[i].sprite.visible=!0,this.shineArray[i].sprite.alpha=1,this.shineArray[i].sprite.scale.x=.3,this.shineArray[i].sprite.scale.y=.3,this.shineArray[i].sprite.position.x=t,this.shineArray[i].sprite.position.y=Game.stageHeight-e;break}},e.prototype.updateScore=function(t){this.scoreFont.text=String(t),this.scoreFont.position.x=0-this.scoreFont.width/2,this.scoreFont.position.y=0-this.scoreFont.height/2-18},e.prototype.setExpression=function(t){this.changeHenryExpression(t)},e.prototype.playAbsorbSound=function(){var t=Game.getRandom(1,5,!0),e=String("photon-fusion/laser"+t);Game.playSound(e)},e.prototype.playPulseSound=function(){var t=Game.getRandom(1,5,!0),e=String("photon-fusion/laser"+t);Game.playSound(e)},e.prototype.lightUpSide=function(t){switch(1==Game.getRandom(0,1,!0)?Game.playSound("photon-fusion/thud-1",.4):Game.playSound("photon-fusion/thud-2",.4),t){case 2:this.topInnerBorderGlow.visible=!0,this.topInnerBorderGlow.alpha=.8,this.topBorderGlow.alpha=1,this.topGlowing=!0;break;case 1:this.bottomInnerBorderGlow.visible=!0,this.bottomInnerBorderGlow.alpha=.8,this.bottomBorderGlow.alpha=1,this.bottomGlowing=!0;break;case 3:this.leftInnerBorderGlow.visible=!0,this.leftInnerBorderGlow.alpha=.8,this.leftBorderGlow.alpha=1,this.leftGlowing=!0;break;case 4:this.rightInnerBorderGlow.visible=!0,this.rightInnerBorderGlow.alpha=.8,this.rightBorderGlow.alpha=1,this.rightGlowing=!0}},e.prototype.changeHenryExpression=function(t){switch(t){case"neutral":this.expressionActive=!1,this.henrySad.visible=!1,this.henryShocked.visible=!1,this.henryHappy.visible=!1,this.henryNeutral.visible=!0,this.expressionTimer=0;break;case"happy":this.expressionActive=!0,this.henrySad.visible=!1,this.henryShocked.visible=!1,this.henryHappy.visible=!0,this.henryNeutral.visible=!1,this.expressionTimer=0;break;case"shocked":this.expressionActive=!0,this.henrySad.visible=!1,this.henryShocked.visible=!0,this.henryHappy.visible=!1,this.henryNeutral.visible=!1,this.expressionTimer=0;break;case"sad":this.expressionActive=!0,this.henrySad.visible=!0,this.henryShocked.visible=!1,this.henryHappy.visible=!1,this.henryNeutral.visible=!1,this.expressionTimer=0}},e.prototype.startGameplay=function(){this.photonManager.spawnStartPhotons(),this.game.ui.triggerEnjoyTheRide(),this.game.ui.setUI("gameplay-photon-fusion"),this.game.powerUpManager.startGame()},e.prototype.addBodyToWorld=function(t){this.physicsManager.addBodyToWorld(t)},e.prototype.removeBodyFromWorld=function(t){this.physicsManager.removeBodyFromWorld(t)},e.prototype.flashLightmap=function(t,e){switch(t){case"on":this.henryArmLeftLightmap.alpha=1,this.henryArmRightLightmap.alpha=1,this.henryHeadLightmap.alpha=1,this.henryLeftArmBaseLightmap.alpha=1,this.henryRightArmBaseLightmap.alpha=1,this.henryBGLightmap.alpha=1,this.lightFlash=!0;break;case"off":this.henryArmLeftLightmap.alpha=0,this.henryArmRightLightmap.alpha=0,this.henryHeadLightmap.alpha=0,this.henryLeftArmBaseLightmap.alpha=0,this.henryRightArmBaseLightmap.alpha=0,this.henryBGLightmap.alpha=0}this.backGlow.visible=!0,this.backGlow.tint=e,this.henryArmLeftLightmap.tint=e||16777215,this.henryArmRightLightmap.tint=e||16777215,this.henryHeadLightmap.tint=e||16777215,this.henryLeftArmBaseLightmap.tint=e||16777215,this.henryRightArmBaseLightmap.tint=e||16777215,this.henryBGLightmap.tint=e||16777215},e.prototype.inputDown=function(t){Game.playSound("photon-fusion/touch-start");var e=Game.getRandom(1,3,!0),i=String("photon-fusion/interact-"+e);Game.playSound(i),this.inputRadiusIndicator.position.x=t.x,this.inputRadiusIndicator.position.y=t.y,this.inputPos.x=t.x,this.inputPos.y=t.y,this.inputCharging=!0,this.inputChargeCount=0,this.powerScale=0,this.inputPowerIndicator.scale.x=0,this.inputPowerIndicator.scale.y=0,t.x<Game.stageWidth/2?(this.henryArmLeftTapPos[0]=t.x,this.henryArmLeftTapPos[1]=t.y,this.henryArmLeftState="tapping"):(this.henryArmRightTapPos[0]=t.x,this.henryArmRightTapPos[1]=t.y,this.henryArmRightState="tapping")},e.prototype.inputUp=function(t){this.initiatePulse(),Game.stopSound("photon-fusion/loop-touch"),this.fireRippleEffect([t.x,Game.stageHeight-t.y],"x-small")},e.prototype.inputMove=function(t){1==this.inputCharging&&(this.inputPos.x=t.x,this.inputPos.y=t.y)},e.prototype.tutorialOverlayClosed=function(){this.startGameplay()},e.prototype.positionEyes=function(t){var e=this.inputPos.y/Game.stageHeight,i=this.inputPos.x/Game.stageWidth;"neutral"==t?(this.henryEyes.position.x=this.simpleEase(this.henryEyes.position.x,Game.stageWidth/2,5),this.henryEyes.position.y=this.simpleEase(this.henryEyes.position.y,35,5)):(this.eyesActive=!0,this.eyesTimer=0,this.henryEyes.position.x=this.simpleEase(this.henryEyes.position.x,Game.stageWidth/2-5+10*i,5),this.henryEyes.position.y=this.simpleEase(this.henryEyes.position.y,25+15*e,5))},e.prototype.photonCollided=function(t,e,i,n){if(1==this.focusModeActive){if("walls"!=e&&"walls"!=n){if(this.circlePositionX=t.position[0],this.circlePositionY=t.position[1],0==Game.isLowEndIPad){this.placeCirclesActive=!0,this.placeCircleTimer=9;o=15831807;this.circleTint=o}this.placeShine(this.circlePositionX,this.circlePositionY),this.flashLightmap("on",o),this.photonManager.collideSameColours(t,i)}}else if(e==n){switch(this.circlePositionX=t.position[0],this.circlePositionY=t.position[1],this.placeShine(this.circlePositionX,this.circlePositionY),this.placeCirclesActive=!0,this.placeCircleTimer=9,e){case"red":o=16733276;this.circleTint=o;break;case"yellow":o=16508521;this.circleTint=o;break;case"blue":var o=4700671;this.circleTint=o}this.flashLightmap("on",o),this.photonManager.collideSameColours(t,i)}},e.prototype.getDistance=function(t,e,i,n){var o=t-i,a=e-n;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(t,e,i,n){if(t!=i||e!=n){var o=t-i,a=n-e;return Math.atan2(a,o)}},e.prototype.uiClicked=function(e){switch(t.prototype.uiClicked.call(this,e),this.tutorialOverlay.uiClicked(e),e.id){case"playbuttonlarge":this.resume();break;case"pause-button":this.pause(!1)}},e.prototype.uiRolledOver=function(e){t.prototype.uiRolledOver.call(this,e)},e.prototype.tick=function(){if(t.prototype.tick.call(this),1!=this.paused&&1!=this.tutorialOverlay.isOpen){if(1==this.henryVoiceActive&&++this.henryVoiceTimer>120&&(this.henryVoiceActive=!1),1==this.warningActive&&(this.redWarning.position.x+=20,this.redWarning.position.x>Game.stageWidth+this.redWarning.width&&(this.redWarning.position.x=0-this.redWarning.width/2)),0==this.warningActive&&this.redWarning.position.x>0&&(this.redWarning.position.x+=20),0==Game.isLowEndIPad)for(e=0;e<this.conCircleArray.length;e++)1==this.conCircleArray[e].active&&(this.conCircleArray[e].sprite.scale.x+=.04*this.conCircleArray[e].speed,this.conCircleArray[e].sprite.scale.y+=.04*this.conCircleArray[e].speed,this.conCircleArray[e].sprite.alpha-=.02,this.conCircleArray[e].sprite.alpha<=0&&(this.conCircleArray[e].active=!1,this.conCircleArray[e].sprite.visible=!1));for(var e=0;e<this.shineArray.length;e++)1==this.shineArray[e].active&&(this.shineArray[e].sprite.scale.x+=.04,this.shineArray[e].sprite.scale.y+=.04,this.shineArray[e].sprite.alpha-=.03,this.shineArray[e].sprite.rotation+=.08,this.shineArray[e].sprite.alpha<=0&&(this.shineArray[e].active=!1,this.shineArray[e].sprite.visible=!1));0==Game.isLowEndIPad&&1==this.placeCirclesActive&&++this.placeCircleTimer>Game.getRandom(5,10)&&(this.placeCircleTimer=0,this.placeCircleCounter++,this.placeConCircle(this.circleTint,this.circlePositionX,this.circlePositionY),this.placeCircleCounter>=3&&(this.placeCirclesActive=!1,this.placeCircleCounter=0)),1==this.lightFlash&&++this.lightFlashTimer>30&&(this.flashLightmap("off"),this.lightFlashTimer=0,this.lightFlash=!1,this.backGlow.visible=!1),1==this.lightFlash?(5==this.lightFlashTimer&&(this.henryArmLeftLightmap.alpha=.5,this.henryArmRightLightmap.alpha=.5,this.henryHeadLightmap.alpha=.5,this.henryLeftArmBaseLightmap.alpha=.5,this.henryRightArmBaseLightmap.alpha=.5,this.henryBGLightmap.alpha=.5),10==this.lightFlashTimer&&(this.henryArmLeftLightmap.alpha=.7,this.henryArmRightLightmap.alpha=.7,this.henryHeadLightmap.alpha=.7,this.henryLeftArmBaseLightmap.alpha=.7,this.henryRightArmBaseLightmap.alpha=.7,this.henryBGLightmap.alpha=.7),15==this.lightFlashTimer&&(this.henryArmLeftLightmap.alpha=.3,this.henryArmRightLightmap.alpha=.3,this.henryHeadLightmap.alpha=.3,this.henryLeftArmBaseLightmap.alpha=.3,this.henryRightArmBaseLightmap.alpha=.3,this.henryBGLightmap.alpha=.3),20==this.lightFlashTimer&&(this.henryArmLeftLightmap.alpha=.5,this.henryArmRightLightmap.alpha=.5,this.henryHeadLightmap.alpha=.5,this.henryLeftArmBaseLightmap.alpha=.5,this.henryRightArmBaseLightmap.alpha=.5,this.henryBGLightmap.alpha=.5),25==this.lightFlashTimer&&(this.henryArmLeftLightmap.alpha=.3,this.henryArmRightLightmap.alpha=.3,this.henryHeadLightmap.alpha=.3,this.henryLeftArmBaseLightmap.alpha=.3,this.henryRightArmBaseLightmap.alpha=.3,this.henryBGLightmap.alpha=.3)):(this.glint1.alpha=.1,this.glint2.alpha=.1,this.glint3.alpha=0,this.glint4.alpha=.1),1==this.expressionActive&&++this.expressionTimer>=120&&(this.changeHenryExpression("neutral"),this.expressionActive=!1),1==this.topGlowing&&(this.topInnerBorderGlow.alpha=this.simpleEase(this.topInnerBorderGlow.alpha,0,7),this.topBorderGlow.alpha=this.simpleEase(this.topBorderGlow.alpha,.6,7),this.topInnerBorderGlow.alpha<.1&&(this.topGlowing=!1,this.topInnerBorderGlow.visible=!1)),1==this.bottomGlowing&&(this.bottomInnerBorderGlow.alpha=this.simpleEase(this.bottomInnerBorderGlow.alpha,0,7),this.bottomBorderGlow.alpha=this.simpleEase(this.bottomBorderGlow.alpha,.6,7),this.bottomInnerBorderGlow.alpha<.1&&(this.bottomGlowing=!1,this.bottomInnerBorderGlow.visible=!1)),1==this.leftGlowing&&(this.leftInnerBorderGlow.alpha=this.simpleEase(this.leftInnerBorderGlow.alpha,0,7),this.leftBorderGlow.alpha=this.simpleEase(this.leftBorderGlow.alpha,.6,7),this.leftInnerBorderGlow.alpha<.1&&(this.leftGlowing=!1,this.leftInnerBorderGlow.visible=!1)),1==this.rightGlowing&&(this.rightInnerBorderGlow.alpha=this.simpleEase(this.rightInnerBorderGlow.alpha,0,7),this.rightBorderGlow.alpha=this.simpleEase(this.rightBorderGlow.alpha,.6,7),this.rightInnerBorderGlow.alpha<.1&&(this.rightGlowing=!1,this.rightInnerBorderGlow.visible=!1)),++this.blinkTimer>=this.blinkLimit&&(this.henryHeadBlink.visible=!0,this.blinkTimer>=this.blinkLimit+15&&(this.henryHeadBlink.visible=!1,this.blinkTimer=0,this.blinkLimit=Game.getRandom(90,120,!0))),1==this.eyesActive?++this.eyesTimer>60&&(this.eyesActive=!1,this.positionEyes("neutral")):this.positionEyes("neutral"),this.inputPowerIndicator.alpha=.6*this.inputPowerIndicator.scale.x,this.inputRadiusIndicator.alpha=.6*this.inputPowerIndicator.scale.x,this.henryLeftArmBaseLightmap.position.x=this.henryLeftArmBase.position.x,this.henryRightArmBaseLightmap.position.x=this.henryRightArmBase.position.x,this.henryLeftArmBaseLightmap.position.y=this.henryLeftArmBase.position.y,this.henryRightArmBaseLightmap.position.y=this.henryRightArmBase.position.y,this.henryLeftArmBaseLightmap.rotation=this.henryLeftArmBase.rotation,this.henryRightArmBaseLightmap.rotation=this.henryRightArmBase.rotation,this.photonManager.tick(),this.inputManager.tick(),this.physicsManager.stepPhysics(),1==this.inputCharging&&(this.positionEyes("active"),this.inputRadiusIndicator.position.x=this.inputPos.x,this.inputRadiusIndicator.position.y=this.inputPos.y,this.inputPowerIndicator.position.x=this.inputPos.x,this.inputPowerIndicator.position.y=this.inputPos.y,this.indicator1.position.x=this.inputPos.x,this.indicator1.position.y=this.inputPos.y,this.indicator2.position.x=this.inputPos.x,this.indicator2.position.y=this.inputPos.y,this.indicator3.position.x=this.inputPos.x,this.indicator3.position.y=this.inputPos.y,this.powerScale=this.inputChargeCount/this.inputChargeLimit,this.inputPowerIndicator.scale.x=this.powerScale,this.inputPowerIndicator.scale.y=this.powerScale,this.indicator1.scale.x=this.powerScale,this.indicator1.scale.y=this.powerScale,this.indicator2.scale.x=this.powerScale,this.indicator2.scale.y=this.powerScale,this.indicator3.scale.x=this.powerScale,this.indicator3.scale.y=this.powerScale,this.indicator1.rotation+=.05,this.indicator2.rotation-=.1,this.indicator3.rotation+=.1,++this.inputChargeCount>=this.inputChargeLimit&&(this.inputChargeCount=this.inputChargeLimit)),this.indicatePhotonAngles(),0==Game.isLowEndIPad&&this.animateJoinParticles(),this.animateLeftArm(),this.animateRightArm()}},e.prototype.animateLeftArm=function(){var t=Game.stageWidth/2-this.henryArmLeftHolder.position.x,e=Game.stageWidth/2/t;this.henryArmLeftHolder.rotation=this.handAngleLeftMin+this.handAngleLeftMax/e,this.handLeftIdleCount+=this.handLeftIdleSpeed,this.handLeftIdleCount>=2*Math.PI&&(this.handLeftIdleCount=2*-Math.PI),this.handLeftIdleOffset=20*Math.sin(this.handLeftIdleCount),"tapping"==this.henryArmLeftState?(this.inputPos.x>Game.stageWidth/2&&(this.henryArmLeftState="idle",this.henryArmRightState="tapping"),this.inputPos.x>0&&(this.henryArmLeftTapPos[0]=this.inputPos.x),this.inputPos.y>0&&(this.henryArmLeftTapPos[1]=this.inputPos.y),this.henryArmLeftHolder.position.x=this.simpleEase(this.henryArmLeftHolder.position.x,this.henryArmLeftTapPos[0],4),this.henryArmLeftHolder.position.y=this.simpleEase(this.henryArmLeftHolder.position.y,this.henryArmLeftTapPos[1],5),this.henryArmLeftHolder.scale.x=this.simpleEase(this.henryArmLeftHolder.scale.x,this.henryHandScaleTap,6),this.henryArmLeftHolder.scale.y=this.henryArmLeftHolder.scale.x):(this.henryArmLeftHolder.position.x=this.simpleEase(this.henryArmLeftHolder.position.x,this.henryArmLeftIdlePos[0]+this.handLeftIdleOffset,4),this.henryArmLeftHolder.position.y=this.simpleEase(this.henryArmLeftHolder.position.y,this.henryArmLeftIdlePos[1]+this.handRightIdleOffset,5),this.henryArmLeftHolder.scale.x=this.simpleEase(this.henryArmLeftHolder.scale.x,this.henryHandScaleIdle,6),this.henryArmLeftHolder.scale.y=this.henryArmLeftHolder.scale.x);var i=this.henryArmLeftHolder.position.x/510;this.henryLeftArmBase.rotation=this.simpleEase(this.henryLeftArmBase.rotation,-.7*i+.4,5),this.henryLeftArmBase.rotation<-.4&&(this.henryLeftArmBase.rotation=-.4)},e.prototype.animateRightArm=function(){var t=this.henryArmRightHolder.position.x-Game.stageWidth/2,e=Game.stageWidth/2/t;this.henryArmRightHolder.rotation=this.handAngleRightMin+this.handAngleRightMax/e,this.handRightIdleCount+=this.handRightIdleSpeed,this.handRightIdleCount>=2*Math.PI&&(this.handRightIdleCount=2*-Math.PI),this.handRightIdleOffset=20*Math.sin(this.handRightIdleCount),"tapping"==this.henryArmRightState?(this.inputPos.x<Game.stageWidth/2&&(this.henryArmRightState="idle",this.henryArmLeftState="tapping"),this.inputPos.x<Game.stageWidth&&(this.henryArmRightTapPos[0]=this.inputPos.x),this.inputPos.y>0&&(this.henryArmRightTapPos[1]=this.inputPos.y),this.henryArmRightHolder.position.x=this.simpleEase(this.henryArmRightHolder.position.x,this.henryArmRightTapPos[0],4),this.henryArmRightHolder.position.y=this.simpleEase(this.henryArmRightHolder.position.y,this.henryArmRightTapPos[1],5),this.henryArmRightHolder.scale.x=this.simpleEase(this.henryArmRightHolder.scale.x,this.henryHandScaleTap,6),this.henryArmRightHolder.scale.y=this.henryArmRightHolder.scale.x):(this.henryArmRightHolder.position.x=this.simpleEase(this.henryArmRightHolder.position.x,this.henryArmRightIdlePos[0]+this.handRightIdleOffset,4),this.henryArmRightHolder.position.y=this.simpleEase(this.henryArmRightHolder.position.y,this.henryArmRightIdlePos[1]+this.handLeftIdleOffset,5),this.henryArmRightHolder.scale.x=this.simpleEase(this.henryArmRightHolder.scale.x,this.henryHandScaleIdle,6),this.henryArmRightHolder.scale.y=this.henryArmRightHolder.scale.x);var i=this.henryArmRightHolder.position.x/2/560;this.henryRightArmBase.rotation=this.simpleEase(this.henryRightArmBase.rotation,-1*i+.5,5),this.henryRightArmBase.rotation},e.prototype.initiatePulse=function(){Game.playSound("photon-fusion/laser-beam",.3),this.inputCharging=!1,this.inputRadiusIndicator.position.y=-1e3,this.inputPowerIndicator.position.y=-1e3,this.indicator1.position.y=-1e3,this.indicator2.position.y=-1e3,this.indicator3.position.y=-1e3,this.photonManager.tapInput(this.inputPos,this.powerScale),this.inputPos.x=-1e3,this.inputPos.x=-1e3,this.henryArmRightState="idle",this.henryArmLeftState="idle"},e.prototype.animateJoinParticles=function(){for(var t=0;t<this.joinParticles.length;t++)0!=this.joinParticles[t].active&&(this.joinParticles[t].sprite.position.x=this.joinParticles[t].body.position[0],this.joinParticles[t].sprite.position.y=Game.stageHeight-this.joinParticles[t].body.position[1],this.joinParticles[t].sprite.rotation=-this.joinParticles[t].body.angle,this.joinParticles[t].sprite.scale.x=this.joinParticles[t].sprite.scale.y-=this.joinParticles[t].scaleDownSpeed,this.joinParticles[t].sprite.rotation+=this.joinParticles[t].rotateSpeed,this.joinParticles[t].sprite.scale.x<=0&&(this.joinParticles[t].active=!1,this.joinParticles[t].sprite.position.y=-1e3,this.removeBodyFromWorld(this.joinParticles[t].body)))},e.prototype.fireJoinParticles=function(t,e,i,n){if(this.playPulseSound(),this.score++,this.updateScore(this.score),this.playHenrySound("positive"),0==Game.isLowEndIPad){1==Game.useFilters&&this.fireRippleEffect(t,e);var o,a=Game.getRandom(10,20,!0),s=0,r=this.photonManager.getRadius(e);switch(e){case"large":o=2;break;case"medium":o=1}if(1==this.focusModeActive)var h=15831807;else switch(i){case"blue":h=255;break;case"red":h=16711680;break;case"yellow":h=16772163}for(var l=0;l<this.joinParticles.length;l++)if(1!=this.joinParticles[l].active){var p=Game.getRandom(0,2*Math.PI),c=Math.cos(p),d=Math.sin(p),u=[0,0];u[0]=t[0]+r*c,u[1]=t[1]+r*d,this.joinParticles[l].sprite.tint=h,this.joinParticles[l].sprite.scale.x=this.joinParticles[l].sprite.scale.y=this.joinParticles[l].scale,this.joinParticles[l].body.position[0]=u[0],this.joinParticles[l].body.position[1]=u[1],this.joinParticles[l].active=!0,this.resetBody(this.joinParticles[l].body),this.joinParticles[l].sprite.rotation=0;var g=Game.getRandom(5,10)*o;this.joinParticles[l].body.applyImpulse([c*g,d*g]);var m=[0,0];if(m[0]=n[0]/3,m[1]=n[1]/3,p2.vec2.add(this.joinParticles[l].body.velocity,m,this.joinParticles[l].body.velocity),this.addBodyToWorld(this.joinParticles[l].body),++s>=a)return}}},e.prototype.playHenrySound=function(t){if(1!=this.henryVoiceActive)switch(this.henryVoiceActive=!0,this.henryVoiceTimer=0,t){case"positive":1==Game.getRandom(0,1,!0)?Game.playSound("photon-fusion/henry-feels-good"):Game.playSound("photon-fusion/henry-yeahh");break;case"negative":1==Game.getRandom(0,1,!0)?Game.playSound("photon-fusion/henry-er"):Game.playSound("photon-fusion/henry-shocked")}},e.prototype.fireRipple=function(t,e){this.fireRippleEffect(t,e),this.placeShine(t[0],t[1])},e.prototype.fireRippleEffect=function(t,e){if(0!=Game.useFilters){this.rippleTimeline=this.killTween(this.rippleTimeline),this.rippleFilterSprite.position.x=t[0],this.rippleFilterSprite.position.y=Game.stageHeight-t[1],this.rippleFilter.scale.x=20,this.rippleFilter.scale.y=20;var i;switch(e){case"x-small":i=1,this.rippleFilter.scale.x=5,this.rippleFilter.scale.y=5;break;case"small":i=1.5;break;case"medium":i=2;break;case"large":i=2.5}this.rippleFilterSprite.scale.x=.5,this.rippleFilterSprite.scale.y=.5,this.rippleTimeline=new TimelineMax,this.rippleTimeline.add([TweenMax.to(this.rippleFilterSprite.scale,.5,{x:i,y:i,ease:Sine.easeOut}),TweenMax.to(this.rippleFilter.scale,.25,{x:0,y:0,ease:Sine.easeOut,delay:.5})],0)}},e.prototype.resetBody=function(t){t.invMass=1/t.mass,t.invInertia=1/t.inertia,t.angle=0,t.velocity=[0,0],t.setZeroForce()},e.prototype.indicatePhotonAngles=function(){for(var t=0;t<this.inputAngleIndicators.length;t++){var e=this.photonManager.getPhotonActiveState(t);if(0!=e.photonActive)if(this.inputAngleIndicators[t].targetPhoton=e.photonHolder,this.getDistance(this.inputPos.x,this.inputPos.y,this.inputAngleIndicators[t].targetPhoton.x,this.inputAngleIndicators[t].targetPhoton.y)>=e.pulseRadius)this.inputAngleIndicators[t].sprite.position.x=-1e3;else{this.inputAngleIndicators[t].sprite.position.x=this.inputPos.x,this.inputAngleIndicators[t].sprite.position.y=this.inputPos.y;var i=Math.PI-this.getAngle(this.inputPos.x,this.inputPos.y,this.inputAngleIndicators[t].targetPhoton.x,this.inputAngleIndicators[t].targetPhoton.y);this.inputAngleIndicators[t].sprite.rotation=i}else this.inputAngleIndicators[t].sprite.position.x=-1e3}},e.prototype.getPhotonPhysicsElements=function(t,e,i){return this.physicsManager.getPhotonPhysicsElements(t,e,i)},e.prototype.endGame=function(){0==this.focusModeActive?this.gameOver(this):1==this.focusModeActive&&(this.photonManager.deactivateFocusMode(),this.focusModeActive=!1,this.game.powerUpManager.endPowerUpMode(),this.photonManager.spawnStartPhotons())},e.prototype.gameOver=function(t){this.score<20?this.stars=0:this.score>=20&&this.score<50?this.stars=1:this.score>50&&this.score<75?this.stars=2:this.score>75&&(this.stars=3),Game.coreData.setCurrentGameScoreFromGame(this.score,this.stars),this.game.setScene("gameoverScene",!0)},e.prototype.addFocusPoint=function(){this.game.powerUpManager.earnedFocusPoint()},e.prototype.keyDown=function(e){t.prototype.keyDown.call(this,e),1!=this.paused&&("left"==e?this.leftKeyDown():"right"==e&&this.rightKeyDown())},e.prototype.keyUp=function(e){t.prototype.keyUp.call(this,e),1!=this.paused&&("left"==e?this.leftKeyUp():"right"==e&&this.rightKeyUp())},e.prototype.leftKeyDown=function(){},e.prototype.leftKeyUp=function(){},e.prototype.rightKeyDown=function(){},e.prototype.rightKeyUp=function(){},e.prototype.restore=function(){t.prototype.restore.call(this),this.game.ui.setUI("pause"),this.setBackgroundColor(9408399)},e.prototype.activatePowerUpEffect=function(){this.focusModeActive=!0,this.photonManager.activateFocusMode()},e.prototype.deactivatePowerUpEffect=function(){this.focusModeActive=!1},e.prototype.pause=function(e){0==e&&t.prototype.pause.call(this,e),this.game.powerUpManager.pause(),Game.pauseSound("photon-fusion/background-music-2"),Game.pauseSound("photon-fusion/man-cave"),Game.pauseSound("photon-fusion/warning")},e.prototype.resume=function(){t.prototype.resume.call(this),Game.resumeSound("photon-fusion/background-music-2"),Game.resumeSound("photon-fusion/man-cave"),Game.resumeSound("photon-fusion/warning"),this.game.ui.setUI("gameplay-photon-fusion"),this.game.powerUpManager.resume()},e.prototype.destroy=function(){if(t.prototype.destroy.call(this),Game.stopSound("photon-fusion/background-music-2"),Game.stopSound("photon-fusion/man-cave"),Game.stopSound("photon-fusion/warning"),1==Game.useFilters&&(this.mainHolder.filters=[]),this.photonManager.destroy(),this.tutorialOverlay.destroy(),Game.displayStore.returnPooledItem(this.glint1),Game.displayStore.returnPooledItem(this.glint2),Game.displayStore.returnPooledItem(this.glint3),Game.displayStore.returnPooledItem(this.glint4),Game.displayStore.returnPooledItem(this.leftInnerBorderGlow),Game.displayStore.returnPooledItem(this.topInnerBorderGlow),Game.displayStore.returnPooledItem(this.bottomInnerBorderGlow),Game.displayStore.returnPooledItem(this.rightInnerBorderGlow),Game.displayStore.returnPooledItem(this.leftBorder),Game.displayStore.returnPooledItem(this.bottomBorder),Game.displayStore.returnPooledItem(this.topBorder),Game.displayStore.returnPooledItem(this.rightBorder),Game.displayStore.returnPooledItem(this.leftBorderGlow),Game.displayStore.returnPooledItem(this.bottomBorderGlow),Game.displayStore.returnPooledItem(this.topBorderGlow),Game.displayStore.returnPooledItem(this.rightBorderGlow),Game.displayStore.returnPooledItem(this.leftGlassTexture),Game.displayStore.returnPooledItem(this.rightGlassTexture),Game.displayStore.returnPooledItem(this.bolt1),Game.displayStore.returnPooledItem(this.bolt2),Game.displayStore.returnPooledItem(this.bolt3),Game.displayStore.returnPooledItem(this.bolt4),Game.displayStore.returnPooledItem(this.backgroundTile1),Game.displayStore.returnPooledItem(this.backgroundTile2),Game.displayStore.returnPooledItem(this.backgroundTile3),Game.displayStore.returnPooledItem(this.backgroundTile4),0==Game.isLowEndIPad){for(e=0;e<this.conCircleArray.length;e++)Game.displayStore.returnPooledItem(this.conCircleArray[e].sprite);for(e=0;e<this.joinParticles.length;e++)Game.displayStore.returnPooledItem(this.joinParticles[e].sprite)}for(e=0;e<this.shineArray.length;e++)Game.displayStore.returnPooledItem(this.shineArray[e].sprite);for(var e=0;e<this.inputAngleIndicators.length;e++)Game.displayStore.returnPooledItem(this.inputAngleIndicators[e].sprite)},e}(Scene),DisplayStore=function(){function t(t){this.game=t,this.displayObjects=new Array,this.loadedIDs=new Array}return t.prototype.addSprite=function(t){this.displayObjects.push(t)},t.prototype.addContainer=function(t){this.displayObjects.push(t)},t.prototype.addButton=function(t){this.displayObjects.push(t)},t.prototype.addSpine=function(t){this.displayObjects.push(t)},t.prototype.addAnimatedSprite=function(t){this.displayObjects.push(t)},t.prototype.addBitmapText=function(t){this.displayObjects.push(t)},t.prototype.getSpine=function(t){return this.getItem(t)},t.prototype.getSprite=function(t,e,i){var n=this.getItem(t,!0);return e&&1==e&&n.setRegPoint(.5,.5),n},t.prototype.getContainer=function(t){return this.getItem(t,!0)},t.prototype.getButton=function(t){return this.getItem(t)},t.prototype.getAnimatedSprite=function(t){return this.getItem(t,!0)},t.prototype.getBitmapText=function(t){return this.getItem(t,!0)},t.prototype.getRenderTexture=function(t,e,i,n){var o=PIXI.RenderTexture.create(e,i),a=new Sprite(o);return a.id=t,a.group=n,this.addSprite(a),{renderTexture:o,outputSprite:a}},t.prototype.getItem=function(t,e){var i=!1;e&&(i=e);for(var n=!1,o=0;o<this.displayObjects.length;o++){if(this.retrievedItem=this.displayObjects[o],this.retrievedItem.id==t&&0==i&&(n=!0),this.retrievedItem.id==t&&1==i&&0==this.retrievedItem.pooled&&(n=!0),this.retrievedItem.id==t&&1==i&&1==this.retrievedItem.pooled&&0==this.retrievedItem.pooledActive&&(n=!0,this.retrievedItem.pooledActive=!0),1==n)return this.retrievedItem.scale.x=1,this.retrievedItem.scale.y=1,this.retrievedItem.rotation=0,"number"==typeof this.retrievedItem.origX&&(this.retrievedItem.position.x=this.retrievedItem.origX),"number"==typeof this.retrievedItem.origY&&(this.retrievedItem.position.y=this.retrievedItem.origY),this.retrievedItem.origAnchor&&("number"==typeof this.retrievedItem.origAnchor.x&&(this.retrievedItem.anchor.x=this.retrievedItem.origAnchor.x),"number"==typeof this.retrievedItem.origAnchor.y&&(this.retrievedItem.anchor.y=this.retrievedItem.origAnchor.y)),this.retrievedItem.origPivot&&("number"==typeof this.retrievedItem.origPivot.x&&(this.retrievedItem.pivot.x=this.retrievedItem.origPivot.x),"number"==typeof this.retrievedItem.origPivot.y&&(this.retrievedItem.pivot.y=this.retrievedItem.origPivot.y)),"boolean"==typeof this.retrievedItem.defaultAnchor&&0==this.retrievedItem.defaultAnchor&&this.retrievedItem.setRegPoint(this.retrievedItem.origAnchor.x,this.retrievedItem.origAnchor.y,this.retrievedItem.origAnchor.compensate),"boolean"==typeof this.retrievedItem.defaultPivot&&0==this.retrievedItem.defaultPivot&&this.retrievedItem.setRegPoint(this.retrievedItem.origPivot.x,this.retrievedItem.origPivot.y,this.retrievedItem.origPivot.compensate),this.retrievedItem;if(o==this.displayObjects.length-1&&this.displayObjects[o].id!=t)throw new ReferenceError("Ooops! Can't find sprite with ID: "+t)}},t.prototype.returnPooledItem=function(t){for(var e=t,i=0;i<this.displayObjects.length;i++)if(e==this.displayObjects[i]&&1==e.pooled&&1==e.pooledActive&&e.pooledUniqueID==this.displayObjects[i].pooledUniqueID)return void(this.displayObjects[i].pooledActive=!1)},t.prototype.flush=function(t){for(var e=0;e<t.length;e++)for(var i=this.displayObjects.length-1;i>=0;i--){if(!this.displayObjects[i].group)throw new ReferenceError("Oops! Trying to flush an item with no 'group' ID. Example: You're using a RenderTexture to make a sprite but haven't added a 'group' ID to the Sprite..");if(this.displayObjects[i].group==t[e]&&0==this.displayObjects[i].neverFlush){var n=this.displayObjects.splice(i,1);n[0].disposeAssets(),n[0].destroy(),n[0]=null,n=null}}},t.prototype.checkTextureDeletable=function(t){for(var e=0;e<this.displayObjects.length;e++)if(this.displayObjects[e].items){if(0==this.checkItemsChildrenForTexture(this.displayObjects[e],t))return!1}else if(this.displayObjects[e].textureURL&&this.displayObjects[e].textureURL==t.textureURL&&this.displayObjects[e].group!=t.group)return!1;return!0},t.prototype.checkItemsChildrenForTexture=function(t,e){for(var i in t.items)if(t.items[i].items){if(0==this.checkItemsChildrenForTexture(t.items[i],e))return!1}else if(t.items[i].textureURL&&t.items[i].textureURL==e.textureURL&&t.items[i].group!=e.group)return!1;return!0},t.prototype.listGroupsLoaded=function(){for(var t=new Array,e=0;e<this.displayObjects.length;e++)0==this.checkExists(this.displayObjects[e].group,t)&&t.push(this.displayObjects[e].group);for(e=0;e<t.length;e++)console.log("Members of this group are loaded: ",t[e])},t.prototype.checkExists=function(t,e){var i=!1;if(0==e.length)return i;for(var n=0;n<e.length;n++)if(e[n]==t){i=!0;break}return i},t.prototype.listAssetsLoaded=function(){for(var t=0;t<this.displayObjects.length;t++)console.log("Asset loaded: ",this.displayObjects[t].id," - From group: ",this.displayObjects[t].group,this.displayObjects[t].pooledActive)},t}();
