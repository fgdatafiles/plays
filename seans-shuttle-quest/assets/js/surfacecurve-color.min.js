!function(){function e(e){return e%=360,0>e?360+e:e}function r(e){return e>>>0}function t(e){return e.replace(/^\s+/,"").replace(/\s+$/,"").toLowerCase()}function n(e,r){return Array.prototype.slice.call(e,r)}function a(e,r,t){return e>r?t>e?e:t:r}function u(e,r,t){return(1-t)*e+t*r}function i(e){return e=Math.round(255*e),e>0?255>e?255&e:255:0}function s(e){return e/255}function o(e,r,t){var n,a,u=Math.max(e,r,t),i=Math.min(e,r,t),s=(u+i)/2;if(u==i)n=a=0;else{var o=u-i;switch(a=s>.5?o/(2-u-i):o/(u+i),u){case e:n=(r-t)/o+(t>r?6:0);break;case r:n=(t-e)/o+2;break;case t:n=(e-r)/o+4}n/=6}return[n,a,s]}function l(e,r,t){function n(e,r,t){return 0>t&&(t+=1),t>1&&(t-=1),1/6>t?e+6*(r-e)*t:.5>t?r:2/3>t?e+(r-e)*(2/3-t)*6:e}var a,u,i;if(0==r)a=u=i=t;else{var s=.5>t?t*(1+r):t+r-t*r,o=2*t-s;a=n(o,s,e+1/3),u=n(o,s,e),i=n(o,s,e-1/3)}return[a,u,i]}function h(e){for(var r=[parseInt(e.substr(1,1),16),parseInt(e.substr(2,1),16),parseInt(e.substr(3,1),16),1],t=0;3>t;++t)r[t]=(16*r[t]+r[t])/255;return r}function f(e){return[parseInt(e.substr(1,2),16)/255,parseInt(e.substr(3,2),16)/255,parseInt(e.substr(5,2),16)/255,1]}function v(e){var r,t,n=e[0],a=e[1],u=e[2],i=Math.min(Math.min(n,a),u),s=Math.max(Math.max(n,a),u),o=s;return s==i?t=0:s==n?t=60*((a-u)/(s-i))%360:s==a?t=60*((u-n)/(s-i))+120:s==u&&(t=60*((n-a)/(s-i))+240),0>t&&(t+=360),r=0==s?0:1-i/s,[Math.round(t),Math.round(100*r),Math.round(100*o),e[3]]}function g(r){var t=e(r[0]),n=r[1],a=r[2],n=n/100,a=a/100,u=Math.floor(t/60%6),i=t/60-u,s=a*(1-n),o=a*(1-i*n),l=a*(1-(1-i)*n),c=[];switch(u){case 0:c=[a,l,s];break;case 1:c=[o,a,s];break;case 2:c=[s,a,l];break;case 3:c=[s,o,a];break;case 4:c=[l,s,a];break;case 5:c=[a,s,o]}return[c[0],c[1],c[2],r[3]]}function m(r){var t=o(r[0],r[1],r[2]);return t[0]=e(Math.floor(360*t[0])),t[1]=Math.floor(100*t[1]),t[2]=Math.floor(100*t[2]),t}function b(e){var r=m(e);return r.push(e[3]),r}function d(e){var r=parseFloat(e[0])/360,t=parseFloat(e[1])/100,n=parseFloat(e[2])/100,a=l(r,t,n);return[a[0],a[1],a[2],parseFloat(e[3])]}function p(e){this._value=e}function w(e,r){if(void 0==r)return i(this._value[e]);var t=n(this._value,0);if("string"!=typeof r){var a=this.clone();return a._value[e]=r,a}var u;if(u=r.match(/^([+\-\\*]=?)([0-9.]+)/)){var s=u[1],o=parseFloat(u[2]);switch(s[0]){case"+":t[e]+=o/255;break;case"-":t[e]-=o/255;break;case"*":t[e]*=o}return"="==s[1]?(this._value=t,this):new p(t)}}function _(r){return function(){function t(t,n,a){a=parseFloat(a);var u=v(t._value),i=0;switch(n){case"=":u[r]=a,i=1;break;case"+":u[r]+=a,i=1;break;case"+=":u[r]+=a;break;case"-":u[r]-=a,i=1;break;case"-=":u[r]-=a;break;case"*":u[r]*=a,i=1;break;case"*=":u[r]*=a;break;default:throw"Bad op "+n}return 0==r?u[r]=e(u[r]):(1==r||2==r)&&(u[r]<0?u[r]=0:u[r]>99&&(u[r]=99)),i&&(t=t.clone()),t._value=g(u),t}if(0==arguments.length)return v(this._value)[r];if(1==arguments.length){var n;return"string"==typeof arguments[0]&&(n=arguments[0].match(/^([\+\-\*]=?)([0-9.]+)/))?t(this,n[1],n[2]):t(this,"=",arguments[0])}return 2==arguments.length?t(this,arguments[0],arguments[1]):void 0}}var y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,216],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[216,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},k={byteOrPercent:function(e){var r;return"string"==typeof e&&(r=e.match(/^([0-9]+)%$/))?Math.floor(255*parseFloat(r[1])/100):parseFloat(e)},floatOrPercent:function(e){var r;return"string"==typeof e&&(r=e.match(/^([0-9]+)%$/))?parseFloat(r[1])/100:parseFloat(e)},numberOrPercent:function(e,r){var t;return"string"==typeof e&&(t=e.match(/^([0-9]+)%$/))?parseFloat(t[1])/100*r:parseFloat(e)},rgba:function(e){for(var r=0;3>r;++r)e[r]=s(k.byteOrPercent(e[r]));return e[3]=k.floatOrPercent(e[r]),new p(e)},rgba8:function(e){return new p([s(k.byteOrPercent(e[0])),s(k.byteOrPercent(e[1])),s(k.byteOrPercent(e[2])),s(k.byteOrPercent(e[3]))])},float3:function(e){for(var r=0;3>r;++r)e[r]=k.floatOrPercent(e[r]);return e[3]=1,new p(e)},float4:function(e){for(var r=0;3>r;++r)e[r]=k.floatOrPercent(e[r]);return e[3]=k.floatOrPercent(e[r]),new p(e)},hsla:function(e){return e[0]=k.numberOrPercent(e[0],360),e[1]=k.numberOrPercent(e[1],100),e[2]=k.numberOrPercent(e[2],100),e[3]=k.numberOrPercent(e[3],1),new p(d(e))},hsva:function(r){return r[0]=e(parseFloat(r[0])),r[1]=Math.max(0,Math.min(100,parseFloat(r[1]))),r[2]=Math.max(0,Math.min(100,parseFloat(r[2]))),r[3]=k.floatOrPercent(r[3]),new p(g(r))}},F={keyword:{},hex3:{},hex7:{},rgb:{parse:function(e){return e=e.slice(0),e.push(1),k.rgba(e)}},rgba:{parse:k.rgba},hsl:{parse:function(e){return e=e.slice(0),e.push(1),k.hsla(e)}},hsla:{parse:k.hsla},hsv:{parse:function(e){return e=e.slice(0),e.push(1),k.hsva(e)}},hsva:{parse:k.hsva},rgb8:{parse:function(e){return e=e.slice(0),e.push(1),k.rgba(e)}},rgba8:{parse:function(e){return k.rgba8(e)}},packed_rgba:{parse:function(e){return e=[e>>24&255,e>>16&255,e>>8&255,(255&e)/255],k.rgba(e)},output:function(e){return r(i(e[0])<<24|i(e[1])<<16|i(e[2])<<8|i(e[3]))}},packed_argb:{parse:function(e){return e=[e>>16&255,e>>8&255,e>>0&255,(e>>24&255)/255],k.rgba(e)},output:function(e){return r(i(e[3])<<24|i(e[0])<<16|i(e[1])<<8|i(e[2]))}},float3:{parse:k.float3},float4:{parse:k.float4}},M=function(){var e=null;if(arguments[0]instanceof p)return new p(arguments[0]._value);if("string"==typeof arguments[0]){var r=arguments[0][0];if("#"==r){if(e=arguments[0].match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/i))return new p(h(e[0]));if(e=arguments[0].match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/i))return new p(f(e[0]))}else{if(e=F[arguments[0].toLowerCase()])return e.parse(2==arguments.length?arguments[1]:n(arguments,1));if(e=arguments[0].match(/^\s*([A-Z][A-Z0-9_]+)\s*\(\s*([\-0-9A-FX]+)\s*\)\s*$/i)){var a=F[e[1].toLowerCase()];return a.parse(e[2])}if(e=arguments[0].match(/^\s*([A-Z][A-Z0-9]+)\s*\(\s*([0-9\.]+%?)\s*,\s*([0-9\.]+%?)\s*,\s*([0-9\.]+%?)\s*(,\s*([0-9\.]+%?)\s*)?\)\s*$/i)){var a=F[e[1].toLowerCase()];if(void 0===e[5]){var u=[e[2],e[3],e[4]];return a.parse(u)}var u=[e[2],e[3],e[4],e[6]];return a.parse(u)}if(1==arguments.length&&(e=y[t(arguments[0])])){var u=e;return new p([s(u[0]),s(u[1]),s(u[2]),1])}}}throw"Could not parse color '"+arguments[0]+"'"},O={white:M("white"),black:M("black"),gray:M("gray")},P={clone:function(){return new p(this._value.slice(0))},html:function(){var e=this,r=this._value,t={hex3:function(){return e.hex3()},hex6:function(){return e.hex6()},rgb:function(){return"rgb("+e.rgb().join(",")+")"},rgba:function(){return"rgba("+e.rgba().join(",")+")"},hsl:function(){return"hsl("+m(r).join(",")+")"},hsla:function(){return"hsla("+b(r).join(",")+")"},keyword:function(){var e,t=195076;for(x in y){for(var n=y[x],a=0,u=0;3>u;++u){var i=r[u]-s(n[u]);a+=i*i}t>a&&(e=x,t=a)}return e}},n=arguments[0]||"rgba";return t[n]()},red:function(){return w.call(this,0,arguments[0])},green:function(){return w.call(this,1,arguments[0])},blue:function(){return w.call(this,2,arguments[0])},alpha:function(){return 1==arguments.length?(c=this.clone(),c._value[3]=k.floatOrPercent(arguments[0]),c):this._value[3]},alpha8:function(){return 1==arguments.length?(c=this.clone(),c._value[3]=k.byteOrPercent(arguments[0])/255,c):Math.floor(255*this._value[3])},grayvalue:function(){var e=this._value;return(e[0]+e[1]+e[2])/3},grayvalue8:function(){return i(this.grayvalue())},luminanceFast:function(){var e=this._value;return.2126*e[0]+.7152*e[1]+.0722*e[2]},luminance:function(){function e(e){return.03928>e?e/12.92:Math.pow((e+.055)/1.055,2.4)}var r=e(this._value[0]),t=e(this._value[1]),n=e(this._value[2]);return.2126*r+.7152*t+.0722*n},luminance8:function(){return i(this.luminance())},luminanceFast8:function(){return i(this.luminanceFast())},hsv:function(){return v(this._value).slice(0,3)},hsva:function(){return v(this._value)},packed_rgba:function(){return F.packed_rgba.output(this._value)},packed_argb:function(){return F.packed_argb.output(this._value)},hue:_(0),saturation:_(1),value:_(2),clamp:function(){var e=this._value;return new p([a(e[0],0,1),a(e[1],0,1),a(e[2],0,1),a(e[3],0,1)])},blend:function(e,r){"number"!=typeof r&&(r=k.floatOrPercent(r));var t=this,n=M(e);return new p([u(t._value[0],n._value[0],r),u(t._value[1],n._value[1],r),u(t._value[2],n._value[2],r),u(t._value[3],n._value[3],r)])},add:function(e){var r=this._value,t=M(e)._value;return new p([r[0]+t[0]*t[3],r[1]+t[1]*t[3],r[2]+t[2]*t[3],r[3]])},inc:function(e){var r=this._value,t=M(e)._value;return r[0]+=t[0]*t[3],r[1]+=t[1]*t[3],r[2]+=t[2]*t[3],this},dec:function(e){var r=this._value,t=M(e)._value;return r[0]-=t[0]*t[3],r[1]-=t[1]*t[3],r[2]-=t[2]*t[3],this},subtract:function(e){var r=this._value,t=M(e)._value;return new p([r[0]-t[0]*t[3],r[1]-t[1]*t[3],r[2]-t[2]*t[3],r[3]])},multiply:function(e){var r=this._value,t=M(e)._value;return new p([r[0]*t[0],r[1]*t[1],r[2]*t[2],r[3]*t[3]])},scale:function(e){var r=this._value;return new p([r[0]*e,r[1]*e,r[2]*e,r[3]])},xor:function(e){var r=this.rgba8(),t=M(e).rgba8();return M("rgba8",r[0]^t[0],r[1]^t[1],r[2]^t[2],r[3])},tint:function(e){return this.blend(O.white,e)},shade:function(e){return this.blend(O.black,e)},tone:function(e){return this.blend(O.gray,e)},complement:function(){var r=this.hsva();return r[0]=e(r[0]+180),new p(g(r))},triad:function(){return[new p(this._value),this.hue("+120"),this.hue("+240")]},hueSet:function(){for(var e=0,r=[],t=100;t>=30;t-=35)for(var n=100;n>=30;n-=35)r.push(this.hue("+",e).saturation(t).value(n));return r},hueRange:function(e,r){for(var t=this.hue(),n=[],a=0;r>a;++a){var u=t+2*(a/(r-1)-.5)*e;n.push(this.hue("=",u))}return n},contrastWhiteBlack:function(){return M(this.value()<50?"white":"black")},contrastGray:function(){var e=this.hsva(),r=e[2]<30?e[2]+20:e[2]-20;return new p(g([e[0],0,r,e[3]]))},contrastText:function(){var e=this._value,r=.241*e[0]*e[0]+.691*e[1]*e[1]+.068*e[2]*e[2];return M(.51>r?"white":"black")},hex3:function(){function e(e,r){return Math.min(Math.round(i(e)/16),15).toString(16)}return"#"+e(this._value[0])+e(this._value[1])+e(this._value[2])},hex6:function(){function e(e,r){var t=i(e).toString(16);return t.length<2?"0"+t:t}return"#"+e(this._value[0])+e(this._value[1])+e(this._value[2])},rgb:function(){var e=this._value;return[i(e[0]),i(e[1]),i(e[2])]},rgba:function(){var e=this._value;return[i(e[0]),i(e[1]),i(e[2]),e[3]]},rgb8:function(){var e=this._value;return[i(e[0]),i(e[1]),i(e[2])]},rgba8:function(){var e=this._value;return[i(e[0]),i(e[1]),i(e[2]),this.alpha8()]},float3:function(){return[this._value[0],this._value[1],this._value[2]]},float4:function(){return[this._value[0],this._value[1],this._value[2],this._value[3]]}};P.sub=P.subtract,P.mul=P.multiply;for(var x in P)p.prototype[x]=P[x];M.float3=function(e,r,t){return new p([e,r,t,1])},M.float4=function(e,r,t,n){return new p([e,r,t,n])},M.version="0.3.2",M.Color=p,"undefined"!=typeof module&&module.exports?module.exports=M:"undefined"!=typeof window?(window.surfacecurve=window.surfacecurve||{},window.surfacecurve.color=M):"undefined"!=typeof self&&(self.surfacecurve=self.surfacecurve||{},self.surfacecurve.color=M)}();