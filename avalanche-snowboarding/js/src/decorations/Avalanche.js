AvalancheSnowboarding.Avalanche=function(game,gameScene,parent){Phaser.Group.call(this,game,parent);this.gameScene=gameScene;this.distance=-333;this.allSprites=[];this.speed=null;this.setSpeed(AvalancheSnowboarding.C.avalancheSpeedNormal);this.initialProperties={x:470+10*AvalancheSnowboarding.C.speedVector.x,y:450+10*AvalancheSnowboarding.C.speedVector.y,}
this.x=this.initialProperties.x-AvalancheSnowboarding.C.speedVector.x*this.distance;this.y=this.initialProperties.y-AvalancheSnowboarding.C.speedVector.y*this.distance;this.createAvalanche(-142,-268);this.createAvalanche(-135,-176);this.createAvalanche(-208,-110);this.createAvalanche(-355,-82);};AvalancheSnowboarding.Avalanche.prototype=Object.create(Phaser.Group.prototype);AvalancheSnowboarding.Avalanche.constructor=AvalancheSnowboarding.Avalanche;AvalancheSnowboarding.Avalanche.prototype.createAvalanche=function(x,y){var s=this.create(x,y,'avalanche');s.anchor.setTo(1,1);s.initialProperties={};s.initialProperties.x=s.x;s.initialProperties.y=s.y;s.initialProperties.width=s.width;s.initialProperties.height=s.height;s.avalancheTween=this.game.add.tween(s).to({width:s.initialProperties.width*1.13,height:s.initialProperties.height*1.13,x:s.initialProperties.x-39,y:s.initialProperties.y-28,},800,"Linear").to({width:s.initialProperties.width*1.21,height:s.initialProperties.height*1.21,x:s.initialProperties.x-27,y:s.initialProperties.y-18,},500,"Linear").to({width:s.initialProperties.width,height:s.initialProperties.height,x:s.initialProperties.x,y:s.initialProperties.y,},800,"Linear").to({},500+(this.allSprites.length*100)%400,"Linear").loop();s.avalancheTween.delay(200*this.allSprites.length);s.avalancheTween.start();s.animations.add('main',Phaser.Animation.generateFrameNames('avalanche',0,9,'',4),15,true);s.play('main');this.add(s);this.allSprites.push(s);}
AvalancheSnowboarding.Avalanche.prototype.move=function(){this.distance+=this.speed.linear;var distanceToPlayer=this.gameScene.player.distance-this.distance;if(distanceToPlayer>AvalancheSnowboarding.C.avalancheMaxDistanceToPlayer){this.distance=this.gameScene.player.distance-AvalancheSnowboarding.C.avalancheMaxDistanceToPlayer;}
this.x=this.initialProperties.x+AvalancheSnowboarding.C.speedVector.x*distanceToPlayer;this.y=this.initialProperties.y+AvalancheSnowboarding.C.speedVector.y*distanceToPlayer;if(distanceToPlayer<=0&&!this.gameScene.player.isHitByAvalanche){this.gameScene.player.fall();}};AvalancheSnowboarding.Avalanche.prototype.setSpeed=function(speed){if(speed!=this.speed){this.speed=speed;}}
AvalancheSnowboarding.Avalanche.prototype.update=function(){};AvalancheSnowboarding.Avalanche.prototype.destroy=function(){};