!function(a){"use strict";function b(a,b){function c(){}c.prototype=a;var d=new c;for(var e in b)d[e]=b[e];return b.toString!==Object.prototype.toString&&(d.toString=b.toString),d}function c(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=Q++);var c;return null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__],null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c),c}var d=function(){};d.__name__=["HxOverrides"],d.substr=function(a,b,c){if(null==c)c=a.length;else if(0>c){if(0!=b)return"";c=a.length+c}return a.substr(b,c)},d.remove=function(a,b){var c=a.indexOf(b);return-1==c?!1:(a.splice(c,1),!0)};var e=function(){this.length=0};e.__name__=["List"],e.prototype={push:function(a){var b=new f(a,this.h);this.h=b,null==this.q&&(this.q=b),this.length++},clear:function(){this.h=null,this.q=null,this.length=0},remove:function(a){for(var b=null,c=this.h;null!=c;){if(c.item==a)return null==b?this.h=c.next:b.next=c.next,this.q==c&&(this.q=b),this.length--,!0;b=c,c=c.next}return!1},__class__:e};var f=function(a,b){this.item=a,this.next=b};f.__name__=["_List","ListNode"],f.prototype={__class__:f},Math.__name__=["Math"];var g=function(){};g.__name__=["Std"],g.string=function(a){return l.__string_rec(a,"")};var h=function(){};h.__name__=["Type"],h.getClassName=function(a){var b=a.__name__;return null==b?null:b.join(".")};var i=function(){};i.__name__=["haxe","IMap"];var j=function(){this.h={}};j.__name__=["haxe","ds","StringMap"],j.__interfaces__=[i],j.prototype={setReserved:function(a,b){null==this.rh&&(this.rh={}),this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},remove:function(a){return null!=X[a]?(a="$"+a,null!=this.rh&&this.rh.hasOwnProperty(a)?(delete this.rh[a],!0):!1):this.h.hasOwnProperty(a)?(delete this.h[a],!0):!1},__class__:j};var k=function(){};k.__name__=["haxe","macro","Error"],k.prototype={toString:function(){return this.message},__class__:k};var l=function(){};l.__name__=["js","Boot"],l.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;var c=l.__nativeClassName(a);return null!=c?l.__resolveNativeClass(c):null},l.__string_rec=function(a,b){if(null==a)return"null";if(b.length>=5)return"<...>";var c=typeof a;switch("function"==c&&(a.__name__||a.__ename__)&&(c="object"),c){case"function":return"<function>";case"object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];var d=a[0]+"(";b+="	";for(var e=2,f=a.length;f>e;){var g=e++;d+=2!=g?","+l.__string_rec(a[g],b):l.__string_rec(a[g],b)}return d+")"}var h=a.length,i="[";b+="	";for(var j=0,k=h;k>j;){var m=j++;i+=(m>0?",":"")+l.__string_rec(a[m],b)}return i+="]"}var n;try{n=a.toString}catch(o){return"???"}if(null!=n&&n!=Object.toString&&"function"==typeof n){var p=a.toString();if("[object Object]"!=p)return p}var q=null,r="{\n";b+="	";var s=null!=a.hasOwnProperty;for(var q in a)(!s||a.hasOwnProperty(q))&&"prototype"!=q&&"__class__"!=q&&"__super__"!=q&&"__interfaces__"!=q&&"__properties__"!=q&&(2!=r.length&&(r+=", \n"),r+=b+q+" : "+l.__string_rec(a[q],b));return b=b.substring(1),r+="\n"+b+"}";case"string":return a;default:return String(a)}},l.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;e>d;){var f=d++,g=c[f];if(g==b||l.__interfLoop(g,b))return!0}return l.__interfLoop(a.__super__,b)},l.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof Array?null==a.__enum__:!1;case U:return"boolean"==typeof a;case S:return!0;case T:return"number"==typeof a;case R:return"number"==typeof a?(0|a)===a:!1;case String:return"string"==typeof a;default:if(null==a)return!1;if("function"==typeof b){if(a instanceof b)return!0;if(l.__interfLoop(l.getClass(a),b))return!0}else if("object"==typeof b&&l.__isNativeObj(b)&&a instanceof b)return!0;return(b==V?null==a.__name__:1)&&(b==W?null==a.__ename__:1)?a.__enum__==b:!0}},l.__nativeClassName=function(a){var b=l.__toStr.call(a).slice(8,-1);return"Object"==b||"Function"==b||"Math"==b||"JSON"==b?null:b},l.__isNativeObj=function(a){return null!=l.__nativeClassName(a)},l.__resolveNativeClass=function(b){return a[b]};var m=function(){};m.__name__=["pbsdaniel","Constants"];var n=function(){createjs.Container.call(this),this._bg=new createjs.Shape,this._drawBG(q.SpringrollApp.display.width,q.SpringrollApp.display.height),this.addChild(this._bg),this._trolleyContainer=new createjs.Container,this.addChild(this._trolleyContainer),this._trolley=new createjs.Container,this._trolleyContainer.addChild(this._trolley),this._assets=new L(this.getImageManifest(),this.getAudioManifest(),c(this,this.onPackageReady)),this._assets.load()};n.__name__=["pbsdaniel","DTLoadingScreen"],n.__super__=createjs.Container,n.prototype=b(createjs.Container.prototype,{onResize:function(a,b){this._drawBG(a,b),this._trolleyContainer.set({x:a/2,y:b/2})},_drawBG:function(a,b){this._bg.graphics.clear(),this._bg.graphics.beginFill("#fff48b"),this._bg.graphics.drawRect(0,0,a,b),this._bg.graphics.endFill()},start:function(){this._trolley.scaleX=.9,this._trolley.scaleY=1.1,createjs.Tween.get(this._trolley,{loop:!0}).to({scaleX:1.05,scaleY:.95},400,createjs.Ease.backIn).to({scaleX:.95,scaleY:1.05},300,createjs.Ease.cubicInOut),q.SpringrollApp.on("resize",c(this,this.onResize))},freeze:function(){this._trolley.scaleX=this._trolley.scaleY=1,createjs.Tween.removeTweens(this._trolley),q.SpringrollApp.off("resize",c(this,this.onResize))},onPackageReady:function(){var a=this._assets.getSpriteFromSheet("loadingTrolley");H.setRegs(a,.5,1.05),this._trolley.addChild(a),this._text=this._assets.getSpriteFromSheet("loadingText"),H.setRegs(this._text,.5,-.05),this._trolleyContainer.addChild(this._text),this.onResize(q.SpringrollApp.display.width,q.SpringrollApp.display.height)},getImageManifest:function(){var a=[];return a.push(L.makeManifestItem("loadingScreenSheet","assets/sheets/loading.json","spritesheet")),a},getAudioManifest:function(){var a=[];return a},__class__:n});var o=function(){this.sceneName="unnamed",createjs.Container.call(this)};o.__name__=["sg","cjs","GameScreen"],o.__super__=createjs.Container,o.prototype=b(createjs.Container.prototype,{update:function(a){},destroy:function(){},start:function(){},getImageManifest:function(){var a=[];return a},getAudioManifest:function(){var a=[];return a},__class__:o});var p=function(a,b){if(o.call(this),this._assets=b,null!=a.btnBack){if(this._backButton=new z(this._assets.getSpriteFromSheet(a.btnBack.art.up,a.btnBack.art.sheet)),this._backButton.addDown(this._assets.getSpriteFromSheet(a.btnBack.art.down,a.btnBack.art.sheet)),this._backButton.addOver(this._assets.getSpriteFromSheet(a.btnBack.art.over,a.btnBack.art.sheet)),"center"==a.btnBack.align){var d=1664*a.btnBack.position.x-.5*this._backButton.getBounds().width;this._backButton.x=d-q.SpringrollApp.display.width/2+75;var e=768*a.btnBack.position.y,f=.5*this._backButton.getBounds().height;this._backButton.y=e-f}this._backButton.addEventListener("down",c(this,this.onClick)),this._backButton.turnOn()}};p.__name__=["pbsdaniel","bathroom","BathroomGameScreen"],p.__super__=o,p.prototype=b(o.prototype,{start:function(){o.prototype.start.call(this),null!=this._backButton&&this.addChild(this._backButton)},onClick:function(a){a.target==this._backButton&&this.dispatchEvent(new D("sceneRequest","gameIntro"))},__class__:p});var q=function(a,b){null==b&&(b=!1);var c=this;q.SpringrollApp=a,1==a.options.debug?O.enabled=!0:O.enabled=!1,O.log("New DanielGame!",q),this._stage=a.display.stage,this._stage.enableMouseOver(10),window.SRApp=a,this.BG=new createjs.Shape,this.BG.graphics.beginFill("orange").drawRect(0,0,a.options.maxWidth,a.options.maxHeight).endFill(),this._stage.addChild(this.BG),this.container=new createjs.Container,this.container.name="springrollGameContainer",this._stage.addChild(this.container),this._loadLayer=new createjs.Container,this._loadLayer.name="loadContainer",this._loadLayer.mouseChildren=!1,this._loadLayer.mouseEnabled=!1,this._gameLayer=new createjs.Container,this._gameLayer.name="gameContainer",this._debugLayer=new createjs.Container,this._debugLayer.mouseEnabled=!1,this._debugLayer.mouseChildren=!1,this.container.addChild(this._gameLayer),this.container.addChild(this._loadLayer),b&&this.container.addChild(this._debugLayer),createjs.Touch.enable(this._stage,!0),this.resize({width:a.display.width,height:a.display.height}),a.on("update",function(a,b,d){c.update({delta:a})}),a.on("resize",function(a,b){c.resize({width:a,height:b})})};q.__name__=["sg","pbskids","daniel","SpringrollGame"],q.prototype={resize:function(a){this._gameLayer.x=-(q.SpringrollApp.options.maxWidth-a.width)/2},begin:function(){null!=q.SpringrollApp.scaling&&O.purple(q.SpringrollApp.scaling._items)},update:function(a){this._stage.update(a)},__class__:q};var r=function(a){this._loading=0,q.call(this,a),this._loadingScreen=new n,this._loadingScreen.addEventListener("added",(P=this._loadingScreen,c(P,P.start))),this._loadingScreen.addEventListener("removed",(P=this._loadingScreen,c(P,P.freeze))),this._loadLayer.addChild(this._loadingScreen),r.globalAssets=new L(this.getGlobalData(),null,c(this,this.onGlobalAssetsRetrieved)),r.globalAssets.load()};r.__name__=["pbsdaniel","bathroom","InMyBathroom"],r.__super__=q,r.prototype=b(q.prototype,{begin:function(){q.prototype.begin.call(this)},getGlobalData:function(){window.console.log("global assets REQUESTED");var a=[];return a.push(L.makeManifestItem("titlescreenData","assets/data/titlescreen_data.json","json")),a.push(L.makeManifestItem("assetsData","assets/data/assets_data.json","json")),a.push(L.makeManifestItem("charaterData","assets/data/character_data.json","json")),a},onGlobalAssetsRetrieved:function(){window.console.log("global assets retrieved"),this._assetData=r.globalAssets.getResult("assetsData"),this._loading++,this._assets=new L(this._assetData.manifestData.assetManifest,this._assetData.manifestData.audioManifest,c(this,this.loadingComplete)),this._assets.load(),this._loading++,this._screen=new v(r.globalAssets.getResult("titlescreenData"),c(this,this.loadingComplete)),this._screen.addEventListener("sceneRequest",c(this,this.sceneLoadRequest)),this._loading++,this._daniel=new N(r.globalAssets.getResult("charaterData").characters[0],c(this,this.loadingComplete)),this._daniel.scaleX=this._daniel.scaleY=1.4,this._loading++,this._sinkFill=new N(r.globalAssets.getResult("charaterData").characters[3],c(this,this.loadingComplete)),this._loading++,this._sinkHands=new N(r.globalAssets.getResult("charaterData").characters[4],c(this,this.loadingComplete)),this._loading++,this._toilet=new N(r.globalAssets.getResult("charaterData").characters[1],c(this,this.loadingComplete)),this._loading++,this._tpRoll=new N(r.globalAssets.getResult("charaterData").characters[2],c(this,this.loadingComplete)),this._bubbleMacine=new y(this._assets)},sceneLoadRequest:function(a){this._gameLayer.removeAllChildren(),this._screen.destroy(),this._screen=null,window.console.log("load a new scene: "+a.get_sceneId());var b=a.get_sceneId();switch(b){case"gameSink":this._screen=new u(r.globalAssets.getResult("assetsData"),this._assets,this._daniel,this._sinkHands,this._sinkFill,this._bubbleMacine);break;case"gameToilet":this._screen=new w(r.globalAssets.getResult("assetsData"),this._assets,this._toilet,this._tpRoll);break;default:this._screen=new s(r.globalAssets.getResult("assetsData"),this._assets,this._daniel,this._bubbleMacine)}this.startScreen()},loadingComplete:function(){window.console.log("loadingComplete: "+this._loading),this._loading--,0==this._loading&&this.startScreen()},startScreen:function(){this._gameLayer.addChild(this._screen),this._loadingScreen.parent==this._loadLayer&&this._loadLayer.removeChild(this._loadingScreen),this._screen.addEventListener("sceneRequest",c(this,this.sceneLoadRequest)),this._screen.start(),window.console.log("Screen Started!")},update:function(a){q.prototype.update.call(this,a),null!=this._screen&&this._screen.update(a),dragonBones.animation.WorldClock.clock.advanceTime(a.delta/1e3)},__class__:r});var s=function(a,b,c,d){p.call(this,a,b),this._data=a,this._assets=b,this._dan=c,this._bubbleMachine=d};s.__name__=["pbsdaniel","bathroom","IntroScreen"],s.__super__=p,s.prototype=b(p.prototype,{start:function(){p.prototype.start.call(this),q.SpringrollApp.container.send("gameplay_started"),window.console.log("IntroScreen Start"),this._bg=this._assets.getBitmap(this._data.bgMain),this.addChild(this._bg),this._dan.loopAnimation("idle"),this._dan.x=1664*this._data.posDan.x,this._dan.y=768*this._data.posDan.y,this._danIntroToilet=!1,this._danIntroSink=!1,this.addChild(this._dan);var a=this._assets.getSpriteFromSheet(this._data.btnSink.art.up,this._data.btnSink.art.sheet);if(this._sinkButton=new z(a),this._sinkButton.addOver(new F(a)),this.addChild(this._sinkButton),"center"==this._data.btnSink.align){var b=1664*this._data.btnSink.position.x,d=.5*this._sinkButton.getBounds().width;this._sinkButton.x=b-d;var e=768*this._data.btnSink.position.y,f=.5*this._sinkButton.getBounds().height;this._sinkButton.y=e-f}if(this._sinkButton.addEventListener("down",c(this,this.onClick)),this._sinkButton.addEventListener("over",c(this,this.onHover)),this._sinkButton.turnOn(),a=this._assets.getSpriteFromSheet(this._data.btnToilet.art.up,this._data.btnToilet.art.sheet),this._toiletButton=new z(a),this._toiletButton.addOver(new F(a)),this.addChild(this._toiletButton),"center"==this._data.btnSink.align){var g=1664*this._data.btnToilet.position.x,h=.5*this._toiletButton.getBounds().width;this._toiletButton.x=g-h;var i=768*this._data.btnToilet.position.y,j=.5*this._toiletButton.getBounds().height;this._toiletButton.y=i-j}this._toiletButton.addEventListener("down",c(this,this.onClick)),this._toiletButton.addEventListener("over",c(this,this.onHover)),this._toiletButton.turnOn(),this._bubbleMachine.x=1664*this._data.btnSink.position.x,this._bubbleMachine.y=768*this._data.btnSink.position.y,this._bubbleMachine.scaleX=this._bubbleMachine.scaleY=.3,this._bubbleMachine._on=!1,this.addChild(this._bubbleMachine),M.instance.stopAudio("bathroom_water_run_loop"),window.addEventListener("keydown",c(this,this.onKeyDown))},destroy:function(){p.prototype.destroy.call(this),this._dan.stopAnimation(!0),this._sinkButton.turnOff(),this._sinkButton.removeEventListener("down",c(this,this.onClick)),this._sinkButton.removeEventListener("over",c(this,this.onHover)),this._toiletButton.turnOff(),this._toiletButton.removeEventListener("down",c(this,this.onClick)),this._toiletButton.removeEventListener("over",c(this,this.onHover)),window.removeEventListener("keydown",c(this,this.onKeyDown))},onKeyDown:function(a){Math.random()<.5?(this._danIntroToilet||M.instance.playVO("bathroom_daniel_dialogue_001"),this.dispatchEvent(new D("sceneRequest","gameToilet"))):(this._danIntroSink||M.instance.playVO("bathroom_daniel_dialogue_002"),this.dispatchEvent(new D("sceneRequest","gameSink")))},onClick:function(a){p.prototype.onClick.call(this,a),a.target==this._toiletButton?(this._danIntroToilet||M.instance.playVO("bathroom_daniel_dialogue_001"),this.dispatchEvent(new D("sceneRequest","gameToilet"))):a.target==this._sinkButton&&(this._danIntroSink||M.instance.playVO("bathroom_daniel_dialogue_002"),this.dispatchEvent(new D("sceneRequest","gameSink")))},onHover:function(a){a.target!=this._toiletButton||this._danIntroToilet?a.target!=this._sinkButton||this._danIntroSink||(this._danIntroToilet=!1,this._danIntroSink=!0,this._dan.playAnimation("dialogSink",c(this,this.unlockDaniel))):(this._danIntroSink=!1,this._danIntroToilet=!0,this._dan.playAnimation("dialogToilet",c(this,this.unlockDaniel)))},unlockDaniel:function(a){this._dan.loopAnimation("idle"),this._danIntroToilet=!1,this._danIntroSink=!1},update:function(a){p.prototype.update.call(this,a),this._bubbleMachine.update(a.delta)},__class__:s});var t=function(){};t.__name__=["pbsdaniel","bathroom","Main"],t.main=function(){window.SGGameButler=new K("InMyBathroom",t.start),t._isSpringroll="undefined"!=typeof springroll},t.start=function(a,b){t.SpringrollApp=a,t._bellhop=b,M.init(t.SpringrollApp),window.focus(),t._game=new r(t.SpringrollApp)},t.ga_call=function(a){try{t._bellhop.send("gacall",a)}catch(b){if(!l.__instanceof(b,k))throw b;window.console.warn("Warning: "+g.string(b))}};var u=function(a,b,c,d,e,f){p.call(this,a,b),this._data=a,this._assets=b,this._dan=c,this._hands=d,this._sink=e,this._bubbleMacine=f};u.__name__=["pbsdaniel","bathroom","SinkScreen"],u.__super__=p,u.prototype=b(p.prototype,{start:function(){p.prototype.start.call(this),this._bg=this._assets.getBitmap(this._data.bgSink),this.addChildAt(this._bg,0),window.console.log("dan animations",this._dan.armature.animation.animationNameList),window.console.log("hand animations",this._hands.armature.animation.animationNameList),window.console.log("sink animations",this._sink.armature.animation.animationNameList);var a=this._assets.getSpriteFromSheet(this._data.btnSoap.art.up,this._data.btnSoap.art.sheet);if(this._btnSoap=new z(a),this._btnSoap.addOver(new F(a)),this._btnSoap.addDown(this._assets.getSpriteFromSheet(this._data.btnSoap.art.down,this._data.btnSoap.art.sheet)),"center"==this._data.btnSoap.align){var b=1664*this._data.btnSoap.position.x,d=.5*this._btnSoap.getBounds().width;this._btnSoap.x=b-d;var e=768*this._data.btnSoap.position.y,f=.5*this._btnSoap.getBounds().height;this._btnSoap.y=e-f}if(this._btnSoap.addEventListener("down",c(this,this.onClick)),this._btnSoap.turnOn(),this._btnSoap.handlePressup(),this.addChild(this._btnSoap),a=this._assets.getSpriteFromSheet(this._data.btnToothbrush.art.up,this._data.btnToothbrush.art.sheet),this._btnToothbrush=new A(a),this._btnToothbrush.addDown(this._assets.getSpriteFromSheet(this._data.btnToothbrush.art.down,this._data.btnToothbrush.art.sheet)),this._btnToothbrush.addToggledOver(this._assets.getSpriteFromSheet(this._data.btnToothbrush.art.down,this._data.btnToothbrush.art.sheet)),this._btnToothbrush.addOver(new F(a)),"center"==this._data.btnToothbrush.align){var g=1664*this._data.btnToothbrush.position.x,h=.5*this._btnToothbrush.getBounds().width;this._btnToothbrush.x=g-h;var i=768*this._data.btnToothbrush.position.y,j=.5*this._btnToothbrush.getBounds().height;this._btnToothbrush.y=i-j}this._btnToothbrush.addEventListener("down",c(this,this.onClick)),this._btnToothbrush.turnOn(),this.addChild(this._btnToothbrush),this._danIdle=!0,this._dan.loopAnimation("sinkIdle"),this._dan.x=1664*this._data.posDanSink.x,this._dan.y=768*this._data.posDanSink.y,this.addChildAt(this._dan,0);var k=this._assets.getSpriteFromSheet(this._data.btnMirror.art.up,this._data.btnMirror.art.sheet);if(k.x=832,H.setRegs(k,.5,0),this.addChildAt(k,0),a=this._assets.getSpriteFromSheet(this._data.btnMirror.art.up,this._data.btnMirror.art.sheet),a.alpha=.35,this._btnMirror=new z(a,null,!0),"center"==this._data.btnMirror.align&&H.centerRegs(this._btnMirror),this._btnMirror.x=1664*this._data.btnMirror.position.x,this._btnMirror.y=768*this._data.btnMirror.position.y,this._btnMirror.addEventListener("down",c(this,this.onClick)),this._btnMirror.turnOn(),this.addChild(this._btnMirror),this._fill=new createjs.Shape,this._fill.graphics.beginFill("#33eeff"),this._fill.graphics.drawEllipse(-270,-50,540,100),this._fill.x=815.36,this._fill.y=645.12,this._fill.alpha=.667,this._fill.scaleX=this._fill.scaleY=0,this.addChild(this._fill),a=this._assets.getSpriteFromSheet(this._data.btnFaucets.art.up,this._data.btnFaucets.art.sheet),this._faucets=new A(a),this._faucets.addOver(new F(a)),a=this._assets.getSpriteFromSheet(this._data.btnFaucets.art.down,this._data.btnFaucets.art.sheet),this._faucets.addToggledOver(new F(a)),this._faucets.addDown(a),"center"==this._data.btnFaucets.align){var l=1664*this._data.btnFaucets.position.x,m=.5*this._faucets.getBounds().width;this._faucets.x=l-m;var n=768*this._data.btnFaucets.position.y,o=.5*this._faucets.getBounds().height;this._faucets.y=n-o}this._faucets.addEventListener("down",c(this,this.onClick)),this._faucets.turnOn(),this.addChild(this._faucets),this._sink.x=1664*this._data.posSink.x,this._sink.y=768*this._data.posSink.y,this._sink.visible=!1,this.addChild(this._sink),this._hands.playAnimation("idleSink"),this._hands.x=1664*this._data.posHands.x,this._hands.y=768*this._data.posHands.y,this.addChild(this._hands),this._bubbleMacine.x=832,this._bubbleMacine.y=691.2,this._bubbleMacine.scaleX=this._bubbleMacine.scaleY=1,this.addChild(this._bubbleMacine),window.addEventListener("keydown",c(this,this.onKeyDown))},destroy:function(){p.prototype.destroy.call(this),this._btnSoap.removeEventListener("down",c(this,this.onClick)),this._btnToothbrush.removeEventListener("down",c(this,this.onClick)),this._btnMirror.removeEventListener("down",c(this,this.onClick)),this._faucets.removeEventListener("down",c(this,this.onClick)),this._btnSoap.turnOff(),this._btnToothbrush.turnOff(),this._btnMirror.turnOff(),this._faucets.turnOff(),this._dan.stopAnimation(!0),this._hands.stopAnimation(!0),this._sink.stopAnimation(!0),M.instance.stopAudio("bathroom_water_run_loop"),window.removeEventListener("keydown",c(this,this.onKeyDown))},onKeyDown:function(a){this._faucets.toggle(!this._faucets._toggled),this._faucets._toggled?(this._sink.playAnimation("fill",c(this,this.fillComplete)),M.instance.loopAudio("bathroom_water_run_loop"),this._sink.visible=!0):(this._sink.stopAnimation(!0),this._sink.visible=!1,M.instance.stopAudio("bathroom_water_run_loop"))},update:function(a){p.prototype.update.call(this,a),this._faucets._toggled?this._fill.scaleX=this._fill.scaleY=Math.min(this._fill.scaleX+5e-4*a.delta,1):this._fill.scaleX=this._fill.scaleY=Math.max(this._fill.scaleX-9e-4*a.delta,0),this._bubbleMacine.update(a.delta)},onClick:function(a){p.prototype.onClick.call(this,a),a.target==this._btnSoap?(this._dan.armature.animation.getIsPlaying()&&"brushTeeth"==this._dan.armature.animation.getLastAnimationName()&&(M.instance.stopAudio("bathroom_daniel_brushing_teeth"),this._btnToothbrush.toggle(!1),this._btnToothbrush.turnOn()),this._danIdle=!1,this._sink.visible=!0,this._faucets.toggle(!0),this._bubbleMacine._on=!0,this._hands.playAnimation("washHands",c(this,this.doneWashing)),this._dan.playAnimation("washHands",c(this,this.danReturnToIdle)),this._sink.playAnimation("washHands",c(this,this.fillComplete)),M.instance.loopAudio("bathroom_water_run_loop")):a.target==this._btnToothbrush?(this._bubbleMacine._on&&(this._bubbleMacine._on=!1),this._danIdle=!1,this._dan.playAnimation("brushTeeth",c(this,this.brushingDone)),this._hands.playAnimation("idleSink"),this._btnToothbrush.turnOff()):a.target==this._btnMirror?(this._dan.armature.animation.getIsPlaying()&&"brushTeeth"==this._dan.armature.animation.getLastAnimationName()&&(M.instance.stopAudio("bathroom_daniel_brushing_teeth"),this._btnToothbrush.toggle(!1),this._btnToothbrush.turnOn()),this._bubbleMacine._on&&(this._bubbleMacine._on=!1),this._danIdle=!1,this._dan.playAnimation("tapReact",c(this,this.danReturnToIdle))):a.target==this._faucets&&(this._faucets._toggled?(this._sink.stopAnimation(!0),this._sink.visible=!1,M.instance.stopAudio("bathroom_water_run_loop")):(this._sink.playAnimation("fill",c(this,this.fillComplete)),M.instance.loopAudio("bathroom_water_run_loop"),this._sink.visible=!0))},danReturnToIdle:function(a){this._danIdle=!0,this._dan.loopAnimation("sinkIdle")},brushingDone:function(a){this._danIdle=!0,this._dan.loopAnimation("sinkIdle"),this._btnToothbrush.toggle(!1),this._btnToothbrush.turnOn()},fillComplete:function(a){this._faucets.toggle(!1),this._sink.visible=!1,M.instance.stopAudio("bathroom_water_run_loop")},doneWashing:function(a){this._bubbleMacine._on=!1},__class__:u});var v=function(a,b){o.call(this),this._readyCallback=b,O.log(a),this._data=a,this._assets=new L(this._data.manifestData.assetManifest,this._data.manifestData.audioManifest,c(this,this.onPackageReady)),this._assets.load()};v.__name__=["pbsdaniel","bathroom","TitleScreen"],v.__super__=o,v.prototype=b(o.prototype,{getQueryVariable:function(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0,e=c.length;e>d;){var f=d++,g=c[f].split("=");if(g[0]==a)return g[1]}return""},destroy:function(){createjs.Tween.removeTweens(this),this._bg=null,this._playButton.removeAllEventListeners(),this._playButton.destroy(),this._playButton=null,window.removeEventListener("keydown",c(this,this.onKeyDown)),M.instance.killAll()},start:function(){"true"==this.getQueryVariable("playathome")?this.triggerAdvance():createjs.Tween.get(this).wait(1500,!0).call((P=M.instance,c(P,P.playVO)),[this._data.audio])},onPackageReady:function(){O.log("Title screen assets ready",v),this._bg=this._assets.getBitmap(this._data.image),this.addChild(this._bg);var a=this._assets.getSpriteFromSheet(this._data.playButton.art.up,this._data.playButton.art.sheet);this._playButton=new G(a,new F(a)),this._playButton.set({scaleX:1.56,scaleY:1.56}),this.addChild(this._playButton),this._playButton.x=1664*this._data.playButton.position.x,this._playButton.y=768*this._data.playButton.position.y,H.centerRegs(this._playButton),this._playButton.turnOn(),this._playButton.addEventListener("down",c(this,this.triggerAdvance)),this.addEventListener("mousedown",c(this,this.triggerAdvance),null),window.addEventListener("keydown",c(this,this.onKeyDown)),this._readyCallback()},onKeyDown:function(a){window.console.log(a),window.removeEventListener("keydown",c(this,this.onKeyDown)),this.triggerAdvance()},triggerAdvance:function(a){window.console.log("trigger"),this.removeEventListener("mousedown",c(this,this.triggerAdvance),null),window.removeEventListener("keydown",c(this,this.onKeyDown)),this._playButton.removeEventListener("down",c(this,this.triggerAdvance)),this._playButton.turnOff(),createjs.Tween.removeTweens(this),M.instance.killAll(),this.dispatchEvent(new D("sceneRequest","gameIntro"))},__class__:v});var w=function(a,b,c,d){this._mousePt=new createjs.Point,p.call(this,a,b),this._data=a,this._assets=b,this._toilet=c,this._tpRoll=d};w.__name__=["pbsdaniel","bathroom","ToiletScreen"],w.__super__=p,w.prototype=b(p.prototype,{start:function(){p.prototype.start.call(this),this._flushReady=!0,this._tigeyOn=!1,this._tp=0,this._mouseDown=!1,this._mouseDownTP=!1,this._mouseDownHandle=!1,this._mouseDownToilet=!1,this._mousePt.x=this._mousePt.y=0,this._bg=this._assets.getBitmap(this._data.bgToilet),this.addChildAt(this._bg,0),this._handle=this._toilet.armature.getSlot("handle").getDisplay(),this._handleOver=new F(this._handle),this._toilet.armature.getSlot("tp1").setVisible(!1),this._toilet.armature.getSlot("tp2").setVisible(!1),this._toilet.armature.getSlot("tp3").setVisible(!1),this._toilet.armature.getSlot("tp4").setVisible(!1),this._toilet.armature.getSlot("tp5").setVisible(!1),this._toilet.playAnimation("toiletIdle"),this._toilet.x=711.36,this._toilet.y=481.91999999999996,this.addChild(this._toilet),this._handleHitBox=new createjs.DisplayObject;var a=this._handleOver.getBounds(),b=new createjs.Shape;b.graphics.beginFill("black").drawRect(-15,-15,a.width,a.height),this._handle.localToLocal(0,0,this,b),this._handleHitBox.hitArea=b,this.addChild(this._handleHitBox),this._handleHitBox.addEventListener("mousedown",c(this,this.onHandleDown),null),this._handleHitBox.addEventListener("pressup",c(this,this.onHandleUp),null),this._handleHitBox.addEventListener("mouseover",c(this,this.onHandleOver),null),this._handleHitBox.addEventListener("mouseout",c(this,this.onHandleOut),null),this._tpRollOver=new F(this._tpRoll.armature.getSlot("daRoll").getDisplay()),this._tpRollOver.mouseEnabled=!1,this._tpRollOver.x=331,this._tpRollOver.y=327,this.addChild(this._tpRollOver),this._tpRoll.playAnimation("tpIdle"),this._tpRoll.mouseChildren=!1,this._tpRoll.mouseEnabled=!0,this._tpRoll.x=330,this._tpRoll.y=328,this._tpRoll.addEventListener("mousedown",c(this,this.onTpDown),null),this._tpRoll.addEventListener("pressup",c(this,this.onTpPressUp),null),this._tpRoll.addEventListener("mouseover",c(this,this.onTpOver),null),this._tpRoll.addEventListener("mouseout",c(this,this.onTpOut),null),this.addChild(this._tpRoll),this._tpRollOver.visible=!1;var d=this._assets.getSpriteFromSheet(this._data.btnSeat.art.up,this._data.btnSeat.art.sheet);if(this._seat=new A(d),this._seat.addOver(new F(d)),d=this._assets.getSpriteFromSheet(this._data.btnSeat.art.down,this._data.btnSeat.art.sheet),this._seat.addToggledOver(new F(d)),this._seat.addDown(d),"center"==this._data.btnSeat.align){var e=1664*this._data.btnSeat.position.x,f=.5*this._seat.getBounds().width;this._seat.x=e-f,this._seat.y=768*this._data.btnSeat.position.y-this._seat.getBounds().height}if(this._seat.addEventListener("down",c(this,this.onClick)),this._seat.turnOn(),this.addChild(this._seat),d=this._assets.getSpriteFromSheet(this._data.btnPotty.art.up,this._data.btnPotty.art.sheet),this._potty=new z(d),this._potty.addOver(new F(d)),"center"==this._data.btnPotty.align){var g=1664*this._data.btnPotty.position.x,h=.5*this._potty.getBounds().width;this._potty.x=g-h;var i=768*this._data.btnPotty.position.y,j=.5*this._potty.getBounds().height;this._potty.y=i-j}if(this._potty.addEventListener("down",c(this,this.onClick)),this._potty.turnOn(),this.addChild(this._potty),d=this._assets.getSpriteFromSheet(this._data.btnTigey.art.up,this._data.btnTigey.art.sheet),this._tigey=new z(d),this._tigey.addOver(new F(d)),"center"==this._data.btnTigey.align){var k=1664*this._data.btnTigey.position.x,l=.5*this._tigey.getBounds().width;this._tigey.x=k-l;var m=768*this._data.btnTigey.position.y,n=.5*this._tigey.getBounds().height;this._tigey.y=m-n}this._tigey.addEventListener("down",c(this,this.onClick)),this._tigey.turnOn(),this.addChild(this._tigey),d=this._assets.getSpriteFromSheet("bathroom_toilet_toiletpaper","sprites"),d.regX=.5*d.getBounds().width,d.regY=.5*d.getBounds().height,d.scaleX=d.scaleY=.6,d.visible=!1,this._tpDrag=d,this.addChild(d);var o=q.SpringrollApp.display.stage;this._stageEventMouseDown=o.on("stagemousedown",c(this,this.interaction),this),this._stageEventMouseUp=o.on("stagemouseup",c(this,this.interaction),this),window.addEventListener("keydown",c(this,this.onKeyDown))},destroy:function(){p.prototype.destroy.call(this),this._tpRollOver.removeAllEventListeners(),this._handleHitBox.removeEventListener("mousedown",c(this,this.onHandleDown),null),this._handleHitBox.removeEventListener("pressup",c(this,this.onHandleUp),null),this._handleHitBox.removeEventListener("mouseover",c(this,this.onHandleOver),null),this._handleHitBox.removeEventListener("mouseout",c(this,this.onHandleOut),null),this._tpRoll.removeEventListener("click",c(this,this.onTpClick),null),this._tpRoll.removeEventListener("mouseout",c(this,this.onTpOut),null),this._tpRoll.removeEventListener("mousedown",c(this,this.onTpDown),null),this._tpRoll.removeEventListener("pressup",c(this,this.onTpPressUp),null),this._handle.removeEventListener("mousedown",c(this,this.onHandleClick)),this._handleOver.removeEventListener("mousedown",c(this,this.onHandleClick)),this._seat.removeEventListener("down",c(this,this.onClick)),this._tigey.removeEventListener("down",c(this,this.onClick)),this._potty.removeEventListener("down",c(this,this.onClick)),this._seat.turnOff(),this._tigey.turnOff(),this._potty.turnOff(),this._toilet.stopAnimation(!0),this._tpRoll.stopAnimation(!0);var a=q.SpringrollApp.display.stage;a.off("stagemousedown",this._stageEventMouseDown),a.off("stagemouseup",this._stageEventMouseUp),window.removeEventListener("keydown",c(this,this.onKeyDown))},onKeyDown:function(a){this._flushReady?(this._toilet.playAnimation("toiletFlush",c(this,this.afterFlush)).tweenEnabled=!0,this._flushReady=!1):(this._tp<5&&(this._tp++,this._toilet.armature.getSlot("tp1").setVisible(this._tp>0),this._toilet.armature.getSlot("tp2").setVisible(this._tp>1),this._toilet.armature.getSlot("tp3").setVisible(this._tp>2),this._toilet.armature.getSlot("tp4").setVisible(this._tp>3),
this._toilet.armature.getSlot("tp5").setVisible(this._tp>4)),this._tpRollOver.visible=!1,this._tpRoll.playAnimation("tpTap"))},onHandleOver:function(a){this._toilet.armature.getSlot("handle").setDisplay(this._handleOver)},onHandleOut:function(a){this._toilet.armature.getSlot("handle").setDisplay(this._handle)},onHandleDown:function(a){window.console.log("onHandleDown"),this._mouseDownHandle=!0},onHandleUp:function(a){window.console.log("onHandleUp"),this._toilet.armature.getSlot("handle").getDisplay()==this._handleOver&&this.onHandleClick(null),this._mouseDownHandle=!1},onTpOver:function(a){this._tpRollOver.visible=!0},onTpOut:function(a){this._tpRollOver.visible=!1},onHandleClick:function(a){this._flushReady&&(this._toilet.playAnimation("toiletFlush",c(this,this.afterFlush)).tweenEnabled=!0,this.ToggleLid(-1),this._flushReady=!1),this._mouseDownHandle=!1},afterFlush:function(a){this._flushReady=!0,this._tp=0,this._toilet.armature.getSlot("tp1").setVisible(!1),this._toilet.armature.getSlot("tp2").setVisible(!1),this._toilet.armature.getSlot("tp3").setVisible(!1),this._toilet.armature.getSlot("tp4").setVisible(!1),this._toilet.armature.getSlot("tp5").setVisible(!1),this._toilet.playAnimation("toiletIdle")},onTpClick:function(a){window.console.log("click"),this._tp<5?(this._tpRoll.playAnimation("tpTap"),this._tp++,this._toilet.armature.getSlot("tp1").setVisible(this._tp>0),this._toilet.armature.getSlot("tp2").setVisible(this._tp>1),this._toilet.armature.getSlot("tp3").setVisible(this._tp>2),this._toilet.armature.getSlot("tp4").setVisible(this._tp>3),this._toilet.armature.getSlot("tp5").setVisible(this._tp>4)):this._flushReady?M.instance.playVO("bathroom_daniel_dialogue_003"):this._tpRoll.playAnimation("tpTap")},onTpDown:function(a){if(window.console.log("onTpPressDown"),!this._tpDrag.visible&&this._flushReady){this._mouseDownTP=!0,this._potty.mouseEnabled=this._tigey.mouseEnabled=this._seat.mouseEnabled=this._handleHitBox.mouseEnabled=this._tpRoll.mouseEnabled=!1;var b=this.globalToLocal(a.stageX,a.stageY);this._mousePt.x=this._tpDrag.x=b.x,this._mousePt.y=this._tpDrag.y=b.y}},onTpPressUp:function(a){window.console.log("onTpPressUp"),this._mouseDownTP&&(0==this._tpDrag.visible?this.onTpClick(null):this.CheckTpOverToilet()),this._potty.mouseEnabled=this._tigey.mouseEnabled=this._seat.mouseEnabled=this._handleHitBox.mouseEnabled=this._tpRoll.mouseEnabled=!0,this._tpDrag.visible=!1,this._mouseDownTP=!1},update:function(a){var b=q.SpringrollApp.display.stage;if(this._mouseDownTP||this._mouseDownHandle){var c=b.mouseX-this._mousePt.x,d=b.mouseY-this._mousePt.y,e=Math.sqrt(c*c+d*d);this._mouseDownTP?this._tpDrag.visible?(this.globalToLocal(b.mouseX,b.mouseY,this._tpDrag),this.CheckTpOverToilet()):e>=18&&(this._tpDrag.visible=!0,this.ToggleLid(-1)):this._mouseDownHandle&&d>24&&this.onHandleClick(null)}},ToggleLid:function(a){M.instance.playAudio("bathroom_toilet_lid"),this._seat.toggle(a>0);var b=1664*this._data.btnSeat.position.x,c=.5*this._seat.getBounds().width;this._seat.x=b-c,this._seat.y=768*this._data.btnSeat.position.y-this._seat.getBounds().height},CheckTpOverToilet:function(){var a=this._tpDrag.x-710.5,b=this._tpDrag.y-404.5,c=Math.sqrt(a*a+b*b);100>=c&&!this._seat.getChildAt(0).visible&&(this._mouseDown=!1,this._mouseDownTP=!1,this._tpDrag.visible=!1,this.onTpClick(null))},onClick:function(a){if(p.prototype.onClick.call(this,a),a.target==this._seat){M.instance.playAudio("bathroom_toilet_lid");var b=1664*this._data.btnSeat.position.x,c=.5*this._seat.getBounds().width;this._seat.x=b-c,this._seat.y=768*this._data.btnSeat.position.y-this._seat.getBounds().height}else if(a.target==this._tigey)if(this._tigeyOn=!this._tigeyOn,this._tigeyOn){M.instance.playVO("bathroom_daniel_dialogue_004");var d=1664*this._data.btnPotty.position.x,e=.5*this._tigey.getBounds().width;this._tigey.x=d-e;var f=768*this._data.btnPotty.position.y,g=.5*this._potty.getBounds().height;this._tigey.y=f-g}else{var h=1664*this._data.btnTigey.position.x,i=.5*this._tigey.getBounds().width;this._tigey.x=h-i;var j=768*this._data.btnTigey.position.y,k=.5*this._tigey.getBounds().height;this._tigey.y=j-k}else a.target==this._potty&&M.instance.playVO("bathroom_daniel_dialogue_010")},interaction:function(a){"stagemousedown"==a.type&&(this._mousePt.x=a.stageX,this._mousePt.y=a.stageY)},__class__:w});var x=function(a){createjs.Container.call(this),a.x=a.getBounds().width*-.5,a.y=a.getBounds().height*-.5,this.addChild(a),this._life=3e3+8e3*Math.random(),this._drift=.15+1.5*Math.random(),this._spread=1.5-3*Math.random(),this.scaleX=this.scaleY=.5+.5*Math.random(),this.x=40-80*Math.random(),this.y=0-80*Math.random(),this.addEventListener("click",c(this,this.mouseHandler),null),this.addEventListener("mouseover",c(this,this.mouseHandler),null),M.instance.playAudio("bathroom_bubble_appear")};x.__name__=["pbsdaniel","bathroom","ui","Bubble"],x.__super__=createjs.Container,x.prototype=b(createjs.Container.prototype,{mouseHandler:function(a){this._life=0},update:function(a){this._life>=0&&(this.x+=this._spread*Math.sin(this._life*(5e-5*a)),this.y-=this._drift,this._life-=a)},pop:function(){M.instance.playAudio("bathroom_bubble_pop"),this.removeAllEventListeners()},__class__:x});var y=function(a){createjs.Container.call(this),this._bubbles=new e,this._dead=new e,this._assets=a};y.__name__=["pbsdaniel","bathroom","ui","BubbleMachine"],y.__super__=createjs.Container,y.prototype=b(createjs.Container.prototype,{update:function(a){if(this._on&&Math.random()<.025){var b=new x(this._assets.getSpriteFromSheet("single_bubble","sprites"));this._bubbles.push(b),this.addChild(b)}for(var c=this._bubbles.h;null!=c;){var d=c.item;c=c.next;var e=d;e.update(a),e._life<0&&(this.removeChild(e),this._dead.push(e),e.pop())}if(this._dead.length>0){for(var f=this._dead.h;null!=f;){var g=f.item;f=f.next;var h=g;this._bubbles.remove(h)}this._dead.clear()}},__class__:y});var z=function(a,b,c){null==c&&(c=!1),createjs.Container.call(this),this._state="off",null==b&&(b=a.getBounds()),this._off=a,this.addChildAt(this._off,0),0==c&&(this._hitbox=new createjs.Shape,this._hitbox.graphics.beginFill("#00ff00"),this._hitbox.graphics.drawRect(b.x,b.y,b.width,b.height),this._hitbox.graphics.endFill(),this._hitbox.alpha=.01,this.addChild(this._hitbox)),this._pixelDetection=!!c};z.__name__=["pbsdaniel","bathroom","ui","Button"],z.__super__=createjs.Container,z.prototype=b(createjs.Container.prototype,{get_state:function(){return this._state},turnOn:function(){var a=1==this._pixelDetection?this:this._hitbox;a.addEventListener("mousedown",c(this,this.onDown)),a.addEventListener("mouseover",c(this,this.onOver)),a.addEventListener("mouseout",c(this,this.onOut))},turnOff:function(){var a=1==this._pixelDetection?this:this._hitbox;a.removeEventListener("mousedown",c(this,this.onDown)),a.removeEventListener("pressup",c(this,this.onOut)),a.removeEventListener("mouseover",c(this,this.onOver)),a.removeEventListener("mouseout",c(this,this.onOut))},handlePressup:function(){var a=1==this._pixelDetection?this:this._hitbox;a.addEventListener("pressup",c(this,this.onOut))},stateChange:function(a){this._state=a,null!=this._off&&(this._off.visible="off"==this._state||"over"==this._state&&null==this._over||"down"==this._state&&null==this._down),null!=this._over&&(this._over.visible="over"==this._state),null!=this._down&&(this._down.visible="down"==this._state)},onOut:function(a){this.stateChange("off"),this.dispatchEvent(new createjs.Event("out",!1,!1))},onOver:function(a){this.stateChange("over"),this.dispatchEvent(new createjs.Event("over",!1,!1))},onDown:function(a){this.stateChange("down"),this.dispatchEvent(new createjs.Event("down",!1,!1))},forceOver:function(){this.onOver(null)},forceOut:function(){this.onOut(null)},addOver:function(a,b){this._over=a,null!=b&&(this._over.x=b.x,this._over.y=b.y),this.addChildAt(this._over,0),this._over.visible=!1},addDown:function(a,b){this._down=a,null!=b&&(this._down.x=b.x,this._down.y=b.y),this.addChildAt(this._down,0),this._down.visible=!1},destroy:function(){this.removeAllChildren(),this.turnOff()},force:function(){this.onDown(null)},__class__:z});var A=function(a,b){z.call(this,a,b)};A.__name__=["pbsdaniel","bathroom","ui","ToggleButton"],A.__super__=z,A.prototype=b(z.prototype,{toggle:function(a){this._toggled=a,this.stateChange("off")},stateChange:function(a){this._toggled?(this._state=a,this.resizeHitboxWith(this._down),null!=this._off&&(this._off.visible="down"==this._state||"over"==this._state&&null==this._over||"off"==this._state&&null==this._down),null!=this._down&&(this._down.visible="off"==this._state),null!=this._over&&(this._over.visible="over"==this._state&&null==this._toggledOver),null!=this._toggledOver&&(this._toggledOver.visible="over"==this._state)):(z.prototype.stateChange.call(this,a),this.resizeHitboxWith(this._off),null!=this._toggledOver&&(this._toggledOver.visible=!1))},resizeHitboxWith:function(a){var b=a.getBounds();this._hitbox.graphics.clear(),this._hitbox.graphics.beginFill("#00ff00"),this._hitbox.graphics.drawRect(b.x,b.y,b.width,b.height),this._hitbox.graphics.endFill()},onDown:function(a){z.prototype.onDown.call(this,a),this._toggled=!this._toggled},addToggledOver:function(a,b){this._toggledOver=a,null!=b&&(this._toggledOver.x=b.x,this._toggledOver.y=b.y),this.addChildAt(this._toggledOver,0),this._toggledOver.visible=!1},__class__:A});var B=function(a,b,c){this._manifest=a,this._spriteSheetId=b,this._spriteSheetDataId=c};B.__name__=["sg","cjs","AssetLoader"],B.prototype={loadSpriteSheet:function(a){null!=this._queue?a():(this._callback=a,this._queue=new createjs.LoadQueue(!0),this._queue.on("complete",c(this,this.createSpriteSheet)),this._queue.loadManifest(this._manifest))},createSpriteSheet:function(){var a=this._queue.getResult(this._spriteSheetDataId);a.images=[this._queue.getResult(this._spriteSheetId)],this._spriteSheet=new createjs.SpriteSheet(a),this._callback()},image:function(a){var b=new createjs.Sprite(this._spriteSheet);return b.gotoAndStop(a),b},__class__:B};var C=function(a,b,d,e){this._justReleased=!1,this._sticking=!1,this._dragging=!1,this._onStart=b,this._onChange=d,this._onStop=e,this._target=a,a.addEventListener("mousedown",c(this,this.onDownWrapper)),C._draggers.push(this)};C.__name__=["sg","cjs","DragHandler"],C.updateDraggers=function(a){for(var b=0,c=C._draggers;b<c.length;){var d=c[b];++b,d.update(a)}},C.clearDraggers=function(){for(var a=0,b=C._draggers;a<b.length;){var c=b[a];++a,c.dispose()}C.inUse=!1},C.prototype={update:function(a){if(this._sticking&&null!=this._target){var b={target:this._target,currentTarget:this._target,stageX:a.stageX,stageY:a.stageY,type:a.type};this._onChange(b)}},dispose:function(){d.remove(C._draggers,this),this._target.removeEventListener("mousedown",c(this,this.onDownWrapper)),this._target.removeEventListener("pressmove",c(this,this.onMouseMoveWrapper)),this._target.removeEventListener("pressup",c(this,this.onMouseUpWrapper)),this._target=null,this._startTime=null,this._onStart=null,this._onChange=null,this._onStop=null,this._startLoc=null},forceUp:function(a){this._sticking&&(this._justReleased=!0,this.callStop(a),this._justReleased=!1)},reset:function(){this._sticking=!1,this._dragging=!1,this._justReleased=!1,C.inUse=!1,C.objInUse=null,this._target.removeEventListener("pressmove",c(this,this.onMouseMoveWrapper)),this._target.removeEventListener("pressup",c(this,this.onMouseUpWrapper))},onDownWrapper:function(a){this._sticking?this._justReleased=!0:C.inUse||(this._target.addEventListener("pressmove",c(this,this.onMouseMoveWrapper)),this._target.addEventListener("pressup",c(this,this.onMouseUpWrapper)),this._startTime=new Date,this._startLoc=new createjs.Point(a.stageX,a.stageY),this._sticking=!1,C.inUse=!0,C.objInUse=a.currentTarget,-1!=a.pointerID&&(this._dragging=!0),this._onStart(a))},onMouseMoveWrapper:function(a){this._sticking||((Math.abs(this._startLoc.x-a.stageX)>25||Math.abs(this._startLoc.y-a.stageY)>25)&&(this._dragging=!0),this._onChange(a))},onMouseUpWrapper:function(a){a.currentTarget==C.objInUse&&(this._justReleased?(this.callStop(a),this._justReleased=!1):this.get_isClick()&&0==this._dragging?(C.inUse=!0,this._sticking=!0):this.callStop(a))},callStop:function(a){this._dragging=!1,this._sticking=!1,a.currentTarget==C.objInUse&&(a.currentTarget.removeEventListener("pressmove",c(this,this.onMouseMoveWrapper)),a.currentTarget.removeEventListener("pressup",c(this,this.onMouseUpWrapper))),this._onStop(a),C.inUse=!1,C.objInUse=null},get_isClick:function(){return(new Date).getTime()<this._startTime.getTime()+250},__class__:C};var D=function(a,b,c,d,e){null==e&&(e=!1),null==d&&(d=!1),createjs.Event.call(this,a,d,e),this.sceneId=b,this.data=c};D.__name__=["sg","cjs","SceneLoadEvent"],D.__super__=createjs.Event,D.prototype=b(createjs.Event.prototype,{get_sceneId:function(){return this.sceneId},get_data:function(){return this.data},__class__:D});var E=function(a,b){this.completed=!1,createjs.Container.call(this),this._data=a;var d=[];d.push(a.skeleton),d.push(a.texture),d.push(a.textureJSON),this._assets=new L(d,null,c(this,this.chracterDataLoaded)),this._id=a.name,this._readyCallback=b,this._assets.load()};E.__name__=["sg","cjs","dragonbones","DBCharacterCJS"],E.__super__=createjs.Container,E.prototype=b(createjs.Container.prototype,{get_characterId:function(){return this._id},playAnimation:function(a,b){if(this.stopAnimation(!0),this.armature.animation.hasAnimation(a)){null!=b&&(this._currentCompleteCallback=b,this.armature.addEventListener(dragonBones.events.AnimationEvent.COMPLETE,c(this,this.onAnimationComplete)));var d=this.armature.animation.gotoAndPlay(a);return window.console.log(d),d}return window.console.log("Animation does not contain label ["+a+"]"),null},loopAnimation:function(a,b){if(this.stopAnimation(!0),this.armature.animation.hasAnimation(a)){this.armature.animation.gotoAndPlay(a,-1,-1,1e3)}else window.console.log("Animation does not contain label ["+a+"]")},stopAnimation:function(a){null==a&&(a=!1),a&&(this._currentCompleteCallback=null,this.armature.removeEventListener(dragonBones.events.AnimationEvent.COMPLETE,c(this,this.onAnimationComplete))),this.armature.animation.stop()},onAnimationComplete:function(a){window.console.log("Character ["+this._id+"] animation complete. Callback."),this.armature.removeEventListener(dragonBones.events.AnimationEvent.COMPLETE,c(this,this.onAnimationComplete)),this._currentCompleteCallback(a)},chracterDataLoaded:function(){this._texture=this._assets.getImage(this._data.texture.id),this._textureData=this._assets.getResult(this._data.textureJSON.id),this._skeletonData=this._assets.getResult(this._data.skeleton.id),this._armatureName=this._data.armatureName,this.build()},dispose:function(){this.removeAllEventListeners(),this.removeAllChildren(),this.removeChild(this.armature.getDisplay()),this.armature.animation.stop(),null!=this.armature&&(this.armature.removeAllEventListeners(),this.armature=null),this._readyCallback=null,this._texture=null,this._textureData=null,this._skeletonData=null,this._factory=null,this._id=null,this._assets.dispose(),this._assets=null},onTextureLoaded:function(a){this._filesToLoad--,this.charCreationCheck()},charCreationCheck:function(){this._filesToLoad<=0&&this.build()},onTextureDataLoaded:function(a){this._textureData=a,this._filesToLoad--,this.charCreationCheck()},onSkeletonDataLoaded:function(a){this._skeletonData=a,this._filesToLoad--,this.charCreationCheck()},build:function(){window.console.log("BUILD "+this._data.name),this._factory=new dragonBones.factorys.CreateJSFactory,this._factory.addSkeletonData(dragonBones.objects.DataParser.parseSkeletonData(this._skeletonData));var a=new dragonBones.textures.CreateJSTextureAtlas(this._texture,this._textureData);this._factory.addTextureAtlas(a),this.armature=this._factory.buildArmature(this._armatureName),this.addChild(this.armature.getDisplay()),dragonBones.animation.WorldClock.clock.add(this.armature),this.armature.addEventListener(dragonBones.events.FrameEvent.BONE_FRAME_EVENT,c(this,this.omBoneFrameEvent)),window.console.log("BUILT "+this._data.name),this.completed=!0,null!=this._readyCallback&&this._readyCallback()},omBoneFrameEvent:function(a){-1!=a.frameLabel.indexOf("vo_")?M.instance.playVO(a.frameLabel.split("vo_")[1]):-1!=a.frameLabel.indexOf("sfx_")?M.instance.playAudio(a.frameLabel.split("sfx_")[1]):M.instance.playAudio(a.frameLabel)},__class__:E});var F=function(a,b,c,d){null==d&&(d=5),null==c&&(c="#FFFFFF"),null==b&&(b=15),createjs.Container.call(this),this.x=a.x,this.y=a.y;for(var e=0,f=d;f>e;){var g=(e++,a.clone());this.addChild(g),g.x=0,g.y=0,g.shadow=new createjs.Shadow(c,0,0,b),g.cache(-b+a.getBounds().x,-b+a.getBounds().y,a.getBounds().width+2*b,a.getBounds().height+2*b)}this.cache(-b+a.getBounds().x,-b+a.getBounds().y,a.getBounds().width+2*b,a.getBounds().height+2*b),this.removeAllChildren()};F.__name__=["sg","cjs","ui","Glow"],F.__super__=createjs.Container,F.prototype=b(createjs.Container.prototype,{__class__:F});var G=function(a,b,c,d){createjs.Container.call(this),null==d&&(d=a.getBounds()),this._hitbox=new createjs.Shape,this._hitbox.graphics.beginFill("#00ff00"),this._hitbox.graphics.drawRect(d.x,d.y,d.width,d.height),this._hitbox.graphics.endFill(),this._hitbox.alpha=.01,this._off=a,this.addChildAt(this._off,0),null!=b&&this.addOver(b),null==c&&null!=this._over?this._down=this._over:this._down=c,this.addChild(this._hitbox)};G.__name__=["sg","cjs","ui","HoverButton"],G.__super__=createjs.Container,G.prototype=b(createjs.Container.prototype,{forceOver:function(){this._over.visible=!0,this._off.visible=!1},forceOut:function(){this._over.visible=!1,this._off.visible=!0},turnOn:function(){this._hitbox.addEventListener("mousedown",c(this,this.onDown)),null!=this._over&&(this._hitbox.addEventListener("mouseover",c(this,this.onOver)),this._hitbox.addEventListener("mouseout",c(this,this.onOut)))},turnOff:function(){this._hitbox.removeEventListener("mousedown",c(this,this.onDown)),null!=this._over&&(this._hitbox.removeEventListener("mouseover",c(this,this.onOver)),this._hitbox.removeEventListener("mouseout",c(this,this.onOut)))},onOut:function(a){this._over.visible=!1,this._off.visible=!0},onOver:function(a){this._over.visible=!0,this._off.visible=!1,this.dispatchEvent(new createjs.Event("over",!1,!1))},onDown:function(a){null!=this._down&&(null!=this._over&&(this._over.visible=!1),this._off.visible=!1,this._down.visible=!0),this.dispatchEvent(new createjs.Event("down",!1,!1))},addOver:function(a,b,c){null==c&&(c=!1),this._over=a,null!=b&&(this._over.x=b.x,this._over.y=b.y),this.addChildAt(this._over,0),this._over.visible=!1,this._clearOnOver=c},destroy:function(){this.removeAllChildren(),this.turnOff()},__class__:G});var H=function(){};H.__name__=["sg","cjs","utils","DisplayObjectUtils"],H.centerRegs=function(a){H.setRegs(a,.5,.5)},H.setRegs=function(a,b,c){var d,e,f=a.getBounds();null!=f?(d=f.width*b,e=f.height*c,a.set({regX:d,regY:e})):window.console.log("Could not set reg points on displayObject, rectangular bounds are not set")};var I=function(){B.call(this,I.manifest(),"loadingSpriteSheet","loadingData")};I.__name__=["sg","cjs","views","LoadingAnimation"],I.get_instance=function(){return null==I.instance&&(I.instance=new I),I.instance},I.manifest=function(){return[{src:"assets/sheets/loading.png",id:"loadingSpriteSheet"},{src:"assets/sheets/loading.json",id:"loadingData"}]},I.load=function(a){I.get_instance().loadSpriteSheet(a)},I.loadingAnimation=function(){return new createjs.Sprite(I.get_instance()._spriteSheet,"Loading")},I.__super__=B,I.prototype=b(B.prototype,{__class__:I});var J=function(){o.call(this)};J.__name__=["sg","cjs","views","LoadingScreen"],J.__super__=o,J.prototype=b(o.prototype,{init:function(){window.console.log("Load assets for LodaingScreen"),this._assets=new L(this.getImageManifest(),this.getAudioManifest(),c(this,this.onPackageReady)),this._assets.load()},onPackageReady:function(){window.console.log("LoadingScreen: onPackageReady")},start:function(){},freeze:function(){},getImageManifest:function(){return[]},getAudioManifest:function(){return[]},__class__:J});var K=function(a,b){this._started=!1,this.name=a,this._startCall=b};K.__name__=["sg","kit","PBSGameButler"],K.prototype={startGame:function(a,b){this._started||(window.console.log("Butler starting game"),this._startCall(a,b),window.console.log("Start complete"))},get_name:function(){return this.name},__class__:K};var L=function(a,b,c,d){null==d&&(d=""),this.completed=!1,this._sheetCount=0,this._imagesLoaded=!1,this._audioLoaded=!1,this._imgManifest=a,this._audioManifest=b,this._completeCallback=c,this._loadQueue=new createjs.LoadQueue(!0,d),createjs.Sound.alternateExtensions=["mp3","wav"],this._loadQueue.installPlugin(createjs.Sound),this._audioManager=M.instance};L.__name__=["sg","pbskids","AssetPackage"],L.makeManifestItem=function(a,b,c){return{id:a,src:b,type:c}},L.makeAudioManifestItem=function(a){return{id:a}},L.prototype={load:function(){null!=this._audioManifest&&this._audioManifest.length>0?M.instance.loadAudio(this._audioManifest,c(this,this.onAudioLoaded)):this._audioLoaded=!0,this.loadManifest(this._imgManifest)},dispose:function(){this._loadQueue.removeAll(),this._loadQueue.close(),this._loadQueue=null,this._imgManifest=null,this._audioManifest=null,this._sheets=null,this._completeCallback=null},getSpriteFromSheet:function(a,b){if(null!=b&&""!=b){var c=new createjs.Sprite(this._loadQueue.getResult(b),a);return c}for(var d=this._loadQueue.getItems(!0),e=0,f=d.length;f>e;){var g=e++;if("spritesheet"==d[g].item.type&&-1!=this._loadQueue.getResult(d[g].item.id).animations.indexOf(a)){var h=new createjs.Sprite(this._loadQueue.getResult(d[g].item.id),a);return h}}return null},getBitmap:function(a){var b=this._loadQueue.getResult(a);return new createjs.Bitmap(b)},getImage:function(a){return this._loadQueue.getResult(a)},getResult:function(a){return this._loadQueue.getResult(a)},onAudioLoaded:function(){this._audioLoaded=!0,this.checkForCompletion()},loadManifest:function(a){a.length>0?(this._loadQueue.addEventListener("complete",c(this,this.onQueueComplete),null),this._loadQueue.loadManifest(a)):(this._imagesLoaded=!0,this.checkForCompletion())},loadPostManifest:function(a){this._loadQueue.loadManifest(a)},onQueueComplete:function(a){this._loadQueue.removeEventListener("complete",c(this,this.onQueueComplete),null),this._imagesLoaded=!0,this.checkForCompletion()},checkForCompletion:function(){this._audioLoaded&&this._imagesLoaded&&!this.completed&&(this.completed=!0,this._completeCallback())},__class__:L};var M=function(a,b){this._callbacks=new j,this._soundMap=new j,this._sounds=new j,createjs.EventDispatcher.call(this),this._voPlayer=a,this._sound=b};M.__name__=["sg","pbskids","audio","SRAudioManager"],M.init=function(a){null==M.instance&&(M.instance=new M(a.voPlayer,a.sound))},M.__super__=createjs.EventDispatcher,M.prototype=b(createjs.EventDispatcher.prototype,{playAudio:function(a,b){var c=this._sound.play(a,b);return c},loopAudio:function(a){var b={loop:-1},c=this._sound.play(a,b);return c},playVO:function(a,b,c){null==c&&(c=!0),c||!this._voPlayer.playing?(this._voCallback=null,this._voPlayer.play(a,b)):window.console.log("VO dropped due to conflicting VO playing. "+a+" --/-> "+this._voPlayer.currentVO)},stopAudio:function(a){this._sound.stop(a)},stopVO:function(a){this._voPlayer.stop()},killAll:function(){this._voPlayer.stop(),this._sound.stopAll()},handleFailed:function(a){},handleComplete:function(a){var b=a.currentTarget.uniqueId,d=this._callbacks;if(null!=(null!=X[b]?d.getReserved(b):d.h[b])){var e=a.currentTarget.uniqueId,f=this._callbacks;(null!=X[e]?f.getReserved(e):f.h[e])()}var g=a.currentTarget.uniqueId,h=this._sounds;(null!=X[g]?h.getReserved(g):h.h[g]).stop();var i=a.currentTarget.uniqueId,j=this._sounds;(null!=X[i]?j.getReserved(i):j.h[i]).removeEventListener("complete",c(this,this.handleComplete));var k=a.currentTarget.uniqueId,l=this._sounds;(null!=X[k]?l.getReserved(k):l.h[k]).removeEventListener("failed",c(this,this.handleFailed));var m=a.currentTarget.uniqueId,n=this._sounds;null!=X[m]?n.setReserved(m,null):n.h[m]=null,this._sounds.remove(a.currentTarget.uniqueId);var o=a.currentTarget.uniqueId,p=this._callbacks;null!=X[o]?p.setReserved(o,null):p.h[o]=null,this._callbacks.remove(a.currentTarget.uniqueId)},loadAudio:function(a,b){for(var c=[],d=0;d<a.length;){var e=a[d];++d,c.push(e.id)}window.console.log(c),window.console.log(this._sound),this._sound.preload(c,b)},queueLoaded:function(a){},__class__:M});var N=function(a,b){E.call(this,a,b)};N.__name__=["sg","springroll","dragonbones","SRDBCharacter"],N.__super__=E,N.prototype=b(E.prototype,{chracterDataLoaded:function(){this._texture=this._assets.getImage(this._data.texture.id),this._textureData=this._assets.getResult(this._data.textureJSON.id),this._skeletonData=this._assets.getResult(this._data.skeleton.id),this._armatureName=this._data.armatureName,this.preloadAudio(this._skeletonData),this.build()},preloadAudio:function(a){var b=[];this._audioLoaded=!1;for(var e=0,f=a.armature;e<f.length;){var g=f[e];++e;for(var h=0,i=g.animation;h<i.length;){var j=i[h];++h;for(var k=0,l=j.timeline;k<l.length;){var m=l[k];++k;for(var n=0,o=m.frame;n<o.length;){var p=o[n];if(++n,null!=p.event){var q="";p.event.indexOf("vo_")>-1?q=d.substr(p.event,3,null):p.event.indexOf("sfx_")>-1&&(q=d.substr(p.event,4,null)),b.push(L.makeAudioManifestItem(q))}}}}}O.log("Audio from "+this.get_characterId()),O.log(b),b.length>0?M.instance.loadAudio(b,c(this,this.characterAudioLoaded)):(this._audioLoaded=!0,this.characterAudioLoaded())},characterAudioLoaded:function(){O.log("Audio from "+this.get_characterId()+" is preloaded"),this._audioLoaded=!0,null!=this._readyCallback&&this.completed&&this._readyCallback()},build:function(){window.console.log("BUILD "+this._data.name),this._factory=new dragonBones.factorys.CreateJSFactory,this._factory.addSkeletonData(dragonBones.objects.DataParser.parseSkeletonData(this._skeletonData));var a=new dragonBones.textures.CreateJSTextureAtlas(this._texture,this._textureData);this._factory.addTextureAtlas(a),this.armature=this._factory.buildArmature(this._armatureName),this.addChild(this.armature.getDisplay()),dragonBones.animation.WorldClock.clock.add(this.armature),this.armature.addEventListener(dragonBones.events.FrameEvent.BONE_FRAME_EVENT,c(this,this.omBoneFrameEvent)),window.console.log("BUILT "+this._data.name),this.completed=!0,null!=this._readyCallback&&this._audioLoaded&&this._readyCallback()},__class__:N});var O=function(){};O.__name__=["sg","springroll","logging","Logging"],O.log=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.log(a))},O.getCallerString=function(a){if(null==a)return"";var b=h.getClassName(a).split(".");return"["+b[b.length-1]+"] "},O.clear=function(){O.enabled&&springroll.Debug.clear()},O.debug=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.debug(a))},O.error=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.error(a))},O.info=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.info(a))},O.trace=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.trace(a))},O.aqua=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.aqua(a))},O.blue=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.blue(a))},O.gray=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.gray(a))},O.green=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.green(a))},O.lime=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.lime(a))},O.maroon=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.maroon(a))},O.navy=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.navy(a))},O.olive=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.olive(a))},O.orange=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.orange(a))},O.pink=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.pink(a))},O.purple=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.purple(a))},O.red=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.red(a))},O.silver=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.silver(a))},O.teal=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.teal(a))},O.yellow=function(a,b){O.enabled&&(null!=b&&(a=O.getCallerString(b)+g.string(a)),springroll.Debug.yellow(a))};var P,Q=0;String.prototype.__class__=String,String.__name__=["String"],Array.__name__=["Array"],Date.prototype.__class__=Date,Date.__name__=["Date"];var R={__name__:["Int"]},S={__name__:["Dynamic"]},T=Number;T.__name__=["Float"];var U=Boolean;U.__ename__=["Bool"];var V={__name__:["Class"]},W={};createjs.DisplayObject.prototype.setBounds=function(a,b,c,d){this._bounds=null!=a?(this._bounds||new createjs.Rectangle).setValues(a,b,c,d):null};var X={};l.__toStr={}.toString,m.GAME_WIDTH=1664,m.GAME_HEIGHT=768,m.GAME_INTRO="gameIntro",m.GAME_SINK="gameSink",m.GAME_TOILET="gameToilet",m.GAME_DATA="gameData",m.CHARATER_DATA="charaterData",m.TITLESCREEN_DATA="titlescreenData",m.ASSETS_DATA="assetsData",m.IMAGE="image",m.CHARACTER="character",m.SPRITE="sprite",m.CUSTOM="custom",n.DT_LOADING_SS="loadingScreenSheet",o.COMPLETE="complete",r.LOAD_MIN_TIME=500,t.GAME_NAME="InMyBathroom",v.TITLE_SCREEN_SS="titleScreenSS",y.BUBBLE_CHANCE=.025,z.DOWN="down",z.OVER="over",z.OUT="out",z.OFF="off",C.CLICK_N_STICK_TIME=250,C.DRAG_AFTER=25,C._draggers=[],C.inUse=!1,D.SCENE_REQUEST="sceneRequest",D.GAME_RESTART="gameRestart",G.ACTIVATED="activated",G.DOWN="down",G.OVER="over",I.SPRITESHEET="loadingSpriteSheet",I.DATA="loadingData",J.READY="ready",O.enabled=!0,t.main()}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);