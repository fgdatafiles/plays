pc.script.attribute("displayName","string","",{displayName:"DisplayName"}),pc.script.attribute("unlockNextMission","string",""),pc.script.attribute("time","number",30,{displayName:"Time(Second)"}),pc.script.attribute("targetSequence","string",""),pc.script.attribute("showTutorial","boolean",!1),pc.script.create("MissionAToB",function(a){var b=function(a){this.entity=a,this.type=MissionTypes.A_TO_B};return b.prototype={initialize:function(){if(this.displayName=textDic.Mission.AToB.value,this.childGame="List"===this.entity.getParent().getName(),this.audioControllerScript=a.root.findByName("AudioPlayer").script.AudioController,this.childGame?this.missionManager=this.entity.getParent().getParent().script.ComplexMission:this.missionManager=a.root.findByName("Missions").script.MissionManager,this.missionManager.registerMission(this),this.childGame||(this.start=this.entity.findByName("Start"),this.startBodyWrapper=this.start.script?this.start.script.BodyWrapper:this.start.findByName("Collision").script.BodyWrapper),this.popup=a.root.findByName("PopupMessage").script.PopupMessage,this.tutorialPopup=a.root.findByName("TutorialMessage").script.PopupMessage,this.targets=[],this.index=0,""!==this.targetSequence)for(var b=this.targetSequence.split(","),c=0;c<b.length;c++){var d=this.entity.findByName(b[c]);d?this.targets.push(d):console.warn("Does not find target "+b[c])}},update:function(a){!this.currentTarget},onEnable:function(){this.startBodyWrapper&&this.startBodyWrapper.on("onCollisionEnter",this.onCollisionEnter,this)},onDisable:function(){this.startBodyWrapper&&this.startBodyWrapper.off("onCollisionEnter",this.onCollisionEnter,this)},onCollisionEnter:function(a){"Player"===a.name&&this.missionManager.showMission(this)},nextTarget:function(){this.index>-1&&this.audioControllerScript._playSFX("ring"),this.index+=1;var a=this.targets.length;if(this.index<a){if(this.currentTarget=this.targets[this.index],this.targets[this.index].enabled=!0,0!==this.index){var b=textDic.Mission.AToB_Lights_Found_1,c=textDic.Mission.AToB_Lights_Found_2;this.popup.addMessage(this.index+" "+b.value+" "+a+" "+c.value),this.popup.setFont(b.offsetX,b.offsetY,b.size)}}else this.showTutorial&&(this.tutorialPopup.timer=-1),this.missionManager.missionComplete(this)},_showTutorial:function(){var a="",b=textDic.Mission.AToB_Tutorial;a=b.value,this.tutorialPopup.addMessage(a,MissionTypes.A_TO_B),this.tutorialPopup.setFont(b.offsetX,b.offsetY,b.size)},disableMission:function(){this.entity.enabled=!1},enableMission:function(){this.entity.enabled=!0},failMission:function(){this.entity.enabled=!0,this.targets[this.index].enabled=!1,this.index=-1,this.showTutorial&&(this.tutorialPopup.timer=-1)},startMission:function(){this.showTutorial&&this._showTutorial(),this.index=-1,this.nextTarget()},destroyMission:function(){this.childGame||nick.engine.removeBody(this.startBodyWrapper.body),this.entity.destroy()}},b});