/*!
* @license PreloadJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2015 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
this.createjs=this.createjs||{},function(){"use strict";var t=createjs.PreloadJS=createjs.PreloadJS||{};t.version="0.6.3",t.buildDate="Tue, 15 Sep 2015 20:59:37 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n)for(var r in i[(e+="_")+"constructor"]=n.constructor,n)i.hasOwnProperty(r)&&"function"==typeof n[r]&&(i[e+r]=n[r]);return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){"use strict";for(var i=0,n=t.length;n>i;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}createjs.extend(t,createjs.Event).clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n,r=(n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return r&&this.removeEventListener(t,e,i),(r=n[t])?r.push(e):n[t]=[e],e},e.on=function(t,e,i,n,r,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,(function(t){e.call(i,t,r),n&&t.remove()}),s)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var r=n[t];if(r)for(var s=0,a=r.length;a>s;s++)if(r[s]==e){1==a?delete n[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t){if("string"==typeof t){var e=this._listeners;if(!e||!e[t])return!1;t=new createjs.Event(t)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var i=this,n=[i];i.parent;)n.push(i=i.parent);var r,s=n.length;for(r=s-1;r>=0&&!t.propagationStopped;r--)n[r]._dispatchEvent(t,1+(0==r));for(r=1;s>r&&!t.propagationStopped;r++)n[r]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n=1==e?this._captureListeners:this._listeners;if(t&&n){var r=n[t.type];if(!r||!(i=r.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,r=r.slice();for(var s=0;i>s&&!t.immediatePropagationStopped;s++){var a=r[s];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(t){"use strict";function e(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}createjs.extend(e,createjs.Event).clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(e,"Event")}(window),function(){function t(e,n){function s(t){if(s[t]!==_)return s[t];var e;if("bug-string-char-index"==t)e="a"!="a"[0];else if("json"==t)e=s("json-stringify")&&s("json-parse");else{var i,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var h=n.stringify,u="function"==typeof h&&y;if(u){(i=function(){return 1}).toJSON=i;try{u="0"===h(0)&&"0"===h(new a)&&'""'==h(new o)&&h(m)===_&&h(_)===_&&h()===_&&"1"===h(i)&&"[1]"==h([i])&&"[null]"==h([_])&&"null"==h(null)&&"[null,null,null]"==h([_,m,null])&&h({a:[i,!0,!1,null,"\0\b\n\f\r\t"]})==r&&"1"===h(null,i)&&"[\n 1,\n 2\n]"==h([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==h(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==h(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==h(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==h(new l(-1))}catch(t){u=!1}}e=u}if("json-parse"==t){var c=n.parse;if("function"==typeof c)try{if(0===c("0")&&!c(!1)){var d=5==(i=c(r)).a.length&&1===i.a[0];if(d){try{d=!c('"\t"')}catch(t){}if(d)try{d=1!==c("01")}catch(t){}if(d)try{d=1!==c("1.")}catch(t){}}}}catch(t){d=!1}e=d}}return s[t]=!!e}e||(e=r.Object()),n||(n=r.Object());var a=e.Number||r.Number,o=e.String||r.String,h=e.Object||r.Object,l=e.Date||r.Date,u=e.SyntaxError||r.SyntaxError,c=e.TypeError||r.TypeError,d=e.Math||r.Math,p=e.JSON||r.JSON;"object"==typeof p&&p&&(n.stringify=p.stringify,n.parse=p.parse);var f,g,_,v=h.prototype,m=v.toString,y=new l(-0xc782b5b800cec);try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(t){}if(!s("json")){var b="[object Function]",x="[object Number]",T="[object String]",E="[object Array]",w=s("bug-string-char-index");if(!y)var S=d.floor,A=[0,31,59,90,120,151,181,212,243,273,304,334],P=function(t,e){return A[e]+365*(t-1970)+S((t-1969+(e=+(e>1)))/4)-S((t-1901+e)/100)+S((t-1601+e)/400)};if((f=v.hasOwnProperty)||(f=function(t){var e,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=m?f=function(t){var e=this.__proto__,i=t in(this.__proto__=null,this);return this.__proto__=e,i}:(e=i.constructor,f=function(t){var i=(this.constructor||e).prototype;return t in this&&!(t in i&&this[t]===i[t])}),i=null,f.call(this,t)}),g=function(t,e){var n,r,s,a=0;for(s in(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n)f.call(r,s)&&a++;return n=r=null,a?g=2==a?function(t,e){var i,n={},r=m.call(t)==b;for(i in t)r&&"prototype"==i||f.call(n,i)||!(n[i]=1)||!f.call(t,i)||e(i)}:function(t,e){var i,n,r=m.call(t)==b;for(i in t)r&&"prototype"==i||!f.call(t,i)||(n="constructor"===i)||e(i);(n||f.call(t,i="constructor"))&&e(i)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(t,e){var n,s,a=m.call(t)==b,o=!a&&"function"!=typeof t.constructor&&i[typeof t.hasOwnProperty]&&t.hasOwnProperty||f;for(n in t)a&&"prototype"==n||!o.call(t,n)||e(n);for(s=r.length;n=r[--s];o.call(t,n)&&e(n));}),g(t,e)},!s("json-stringify")){var C={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},L=function(t,e){return("000000"+(e||0)).slice(-t)},O=function(t){for(var e='"',i=0,n=t.length,r=!w||n>10,s=r&&(w?t.split(""):t);n>i;i++){var a=t.charCodeAt(i);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=C[a];break;default:if(32>a){e+="\\u00"+L(2,a.toString(16));break}e+=r?s[i]:t.charAt(i)}}return e+'"'},j=function(t,e,i,n,r,s,a){var o,h,l,u,d,p,v,y,b,w,A,C,R,M,D,I;try{o=e[t]}catch(t){}if("object"==typeof o&&o)if("[object Date]"!=(h=m.call(o))||f.call(o,"toJSON"))"function"==typeof o.toJSON&&(h!=x&&h!=T&&h!=E||f.call(o,"toJSON"))&&(o=o.toJSON(t));else if(o>-1/0&&1/0>o){if(P){for(d=S(o/864e5),l=S(d/365.2425)+1970-1;P(l+1,0)<=d;l++);for(u=S((d-P(l,0))/30.42);P(l,u+1)<=d;u++);d=1+d-P(l,u),v=S((p=(o%864e5+864e5)%864e5)/36e5)%24,y=S(p/6e4)%60,b=S(p/1e3)%60,w=p%1e3}else l=o.getUTCFullYear(),u=o.getUTCMonth(),d=o.getUTCDate(),v=o.getUTCHours(),y=o.getUTCMinutes(),b=o.getUTCSeconds(),w=o.getUTCMilliseconds();o=(0>=l||l>=1e4?(0>l?"-":"+")+L(6,0>l?-l:l):L(4,l))+"-"+L(2,u+1)+"-"+L(2,d)+"T"+L(2,v)+":"+L(2,y)+":"+L(2,b)+"."+L(3,w)+"Z"}else o=null;if(i&&(o=i.call(e,t,o)),null===o)return"null";if("[object Boolean]"==(h=m.call(o)))return""+o;if(h==x)return o>-1/0&&1/0>o?""+o:"null";if(h==T)return O(""+o);if("object"==typeof o){for(M=a.length;M--;)if(a[M]===o)throw c();if(a.push(o),A=[],D=s,s+=r,h==E){for(R=0,M=o.length;M>R;R++)C=j(R,o,i,n,r,s,a),A.push(C===_?"null":C);I=A.length?r?"[\n"+s+A.join(",\n"+s)+"\n"+D+"]":"["+A.join(",")+"]":"[]"}else g(n||o,(function(t){var e=j(t,o,i,n,r,s,a);e!==_&&A.push(O(t)+":"+(r?" ":"")+e)})),I=A.length?r?"{\n"+s+A.join(",\n"+s)+"\n"+D+"}":"{"+A.join(",")+"}":"{}";return a.pop(),I}};n.stringify=function(t,e,n){var r,s,a,o;if(i[typeof e]&&e)if((o=m.call(e))==b)s=e;else if(o==E){a={};for(var h,l=0,u=e.length;u>l;h=e[l++],((o=m.call(h))==T||o==x)&&(a[h]=1));}if(n)if((o=m.call(n))==x){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else o==T&&(r=n.length<=10?n:n.slice(0,10));return j("",((h={})[""]=t,h),s,a,r,"",[])}}if(!s("json-parse")){var R,M,D=o.fromCharCode,I={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},F=function(){throw R=M=null,u()},k=function(){for(var t,e,i,n,r,s=M,a=s.length;a>R;)switch(r=s.charCodeAt(R)){case 9:case 10:case 13:case 32:R++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=w?s.charAt(R):s[R],R++,t;case 34:for(t="@",R++;a>R;)if(32>(r=s.charCodeAt(R)))F();else if(92==r)switch(r=s.charCodeAt(++R)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=I[r],R++;break;case 117:for(e=++R,i=R+4;i>R;R++)(r=s.charCodeAt(R))>=48&&57>=r||r>=97&&102>=r||r>=65&&70>=r||F();t+=D("0x"+s.slice(e,R));break;default:F()}else{if(34==r)break;for(r=s.charCodeAt(R),e=R;r>=32&&92!=r&&34!=r;)r=s.charCodeAt(++R);t+=s.slice(e,R)}if(34==s.charCodeAt(R))return R++,t;F();default:if(e=R,45==r&&(n=!0,r=s.charCodeAt(++R)),r>=48&&57>=r){for(48==r&&((r=s.charCodeAt(R+1))>=48&&57>=r)&&F(),n=!1;a>R&&((r=s.charCodeAt(R))>=48&&57>=r);R++);if(46==s.charCodeAt(R)){for(i=++R;a>i&&((r=s.charCodeAt(i))>=48&&57>=r);i++);i==R&&F(),R=i}if(101==(r=s.charCodeAt(R))||69==r){for((43==(r=s.charCodeAt(++R))||45==r)&&R++,i=R;a>i&&((r=s.charCodeAt(i))>=48&&57>=r);i++);i==R&&F(),R=i}return+s.slice(e,R)}if(n&&F(),"true"==s.slice(R,R+4))return R+=4,!0;if("false"==s.slice(R,R+5))return R+=5,!1;if("null"==s.slice(R,R+4))return R+=4,null;F()}return"$"},B=function(t){var e,i;if("$"==t&&F(),"string"==typeof t){if("@"==(w?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];"]"!=(t=k());i||(i=!0))i&&(","==t?"]"==(t=k())&&F():F()),","==t&&F(),e.push(B(t));return e}if("{"==t){for(e={};"}"!=(t=k());i||(i=!0))i&&(","==t?"}"==(t=k())&&F():F()),(","==t||"string"!=typeof t||"@"!=(w?t.charAt(0):t[0])||":"!=k())&&F(),e[t.slice(1)]=B(k());return e}F()}return t},N=function(t,e,i){var n=U(t,e,i);n===_?delete t[e]:t[e]=n},U=function(t,e,i){var n,r=t[e];if("object"==typeof r&&r)if(m.call(r)==E)for(n=r.length;n--;)N(r,n,i);else g(r,(function(t){N(r,t,i)}));return i.call(t,e,r)};n.parse=function(t,e){var i,n;return R=0,M=""+t,i=B(k()),"$"!=k()&&F(),R=M=null,e&&m.call(e)==b?U(((n={})[""]=i,n),"",e):i}}}return n.runInContext=t,n}var e="function"==typeof define&&define.amd,i={function:!0,object:!0},n=i[typeof exports]&&exports&&!exports.nodeType&&exports,r=i[typeof window]&&window||this,s=n&&i[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!s||s.global!==s&&s.window!==s&&s.self!==s||(r=s),n&&!e)t(r,n);else{var a=r.JSON,o=r.JSON3,h=!1,l=t(r,r.JSON3={noConflict:function(){return h||(h=!0,r.JSON=a,r.JSON3=o,a=o=null),l}});r.JSON={parse:l.parse,stringify:l.stringify}}e&&define((function(){return l}))}.call(this),function(){var t={appendToHead:function(e){t.getHead().appendChild(e)},getHead:function(){return document.head||document.getElementsByTagName("head")[0]},getBody:function(){return document.body||document.getElementsByTagName("body")[0]}};createjs.DomUtils=t}(),function(){var t={parseXML:function(t,e){var i=null;try{if(window.DOMParser)i=(new DOMParser).parseFromString(t,e)}catch(t){}if(!i)try{(i=new ActiveXObject("Microsoft.XMLDOM")).async=!1,i.loadXML(t)}catch(t){i=null}return i},parseJSON:function(t){if(null==t)return null;try{return JSON.parse(t)}catch(t){throw t}}};createjs.DataUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=i.LOAD_TIMEOUT_DEFAULT}var e=t.prototype={},i=t;i.LOAD_TIMEOUT_DEFAULT=8e3,i.create=function(e){if("string"==typeof e){var n=new t;return n.src=e,n}if(e instanceof i)return e;if(e instanceof Object&&e.src)return null==e.loadTimeout&&(e.loadTimeout=i.LOAD_TIMEOUT_DEFAULT),e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=i}(),function(){var t={ABSOLUTE_PATT:/^(?:\w+:)?\/{2}/i,RELATIVE_PATT:/^[./]*?\//i,EXTENSION_PATT:/\/?[^/]+\.(\w{1,5})$/i,parseURI:function(e){var i={absolute:!1,relative:!1};if(null==e)return i;var n,r=e.indexOf("?");return r>-1&&(e=e.substr(0,r)),t.ABSOLUTE_PATT.test(e)?i.absolute=!0:t.RELATIVE_PATT.test(e)&&(i.relative=!0),(n=e.match(t.EXTENSION_PATT))&&(i.extension=n[1].toLowerCase()),i},formatQueryString:function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var n in t)i.push(n+"="+escape(t[n]));return e&&(i=i.concat(e)),i.join("&")},buildPath:function(t,e){if(null==e)return t;var i=[],n=t.indexOf("?");if(-1!=n){var r=t.slice(n+1);i=i.concat(r.split("&"))}return-1!=n?t.slice(0,n)+"?"+this._formatQueryString(e,i):t+"?"+this._formatQueryString(e,i)},isCrossDomain:function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");return i.href=location.href,""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname)},isLocal:function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},isBinary:function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},isImageTag:function(t){return t instanceof HTMLImageElement},isAudioTag:function(t){return!!window.HTMLAudioElement&&t instanceof HTMLAudioElement},isVideoTag:function(t){return!!window.HTMLVideoElement&&t instanceof HTMLVideoElement},isText:function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},getTypeByExtension:function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}}};createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(t){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return!(null!=window.createjs&&!this.canceled)},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this),i=this;e instanceof Function?e((function(t){i._result=t,i._sendComplete()})):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_"+t.type.toUpperCase()+"_ERROR"))}},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._formatResult=function(t){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(t.getTag().src=t.getResult(!0)),t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleError=function(){this._clean(),this.dispatchEvent("error")},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){var t=createjs.proxy(this._handleStalled,this);this._stalledCallback=t;var e=createjs.proxy(this._handleProgress,this);this._handleProgress=e,this._tag.addEventListener("stalled",t),this._tag.addEventListener("progress",e),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null!=this._request){null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}}else this._handleError()},e.setResponseType=function(t){"blob"===t&&(t=window.URL?"blob":"arraybuffer",this._responseType=t),this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(t){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(t){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(t){if(!this.loaded){this.loaded=!0;var e=this._checkError();if(e)return void this._handleError(e);if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(t){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===t.name&&window.BlobBuilder){var i=new BlobBuilder;i.append(this._response),this._response=i.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:return new Error(t);case 0:return this._getResponse()?null:new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),i={},n=null;if(window.XMLHttpRequest)n=new XMLHttpRequest,e&&void 0===n.withCredentials&&window.XDomainRequest&&(n=new XDomainRequest);else{for(var r=0,a=s.ACTIVEX_VERSIONS.length;a>r;r++){var o=s.ACTIVEX_VERSIONS[r];try{n=new ActiveXObject(o);break}catch(t){}}if(null==n)return!1}null==t.mimeType&&createjs.RequestUtils.isText(t.type)&&(t.mimeType="text/plain; charset=utf-8"),t.mimeType&&n.overrideMimeType&&n.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof n.responseType?2:1;var h;if(h=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,n.open(t.method||createjs.AbstractLoader.GET,h,!0),e&&n instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var l in t.headers)i[l]=t.headers[l];for(l in i)n.setRequestHeader(l,i[l]);return n instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(n.withCredentials=t.withCredentials),this._request=n,!0},e._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(t,e,i)}var e=createjs.extend(t,createjs.AbstractLoader),i=t;e.init=function(t,e,i){this.useXHR=!0,this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(t),this._paused=!1,this._basePath=e,this._crossOrigin=i,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN},i.loadTimeout=8e3,i.LOAD_TIMEOUT=0,i.BINARY=createjs.AbstractLoader.BINARY,i.CSS=createjs.AbstractLoader.CSS,i.IMAGE=createjs.AbstractLoader.IMAGE,i.JAVASCRIPT=createjs.AbstractLoader.JAVASCRIPT,i.JSON=createjs.AbstractLoader.JSON,i.JSONP=createjs.AbstractLoader.JSONP,i.MANIFEST=createjs.AbstractLoader.MANIFEST,i.SOUND=createjs.AbstractLoader.SOUND,i.VIDEO=createjs.AbstractLoader.VIDEO,i.SVG=createjs.AbstractLoader.SVG,i.TEXT=createjs.AbstractLoader.TEXT,i.XML=createjs.AbstractLoader.XML,i.POST=createjs.AbstractLoader.POST,i.GET=createjs.AbstractLoader.GET,e.registerLoader=function(t){if(!t||!t.canLoadItem)throw new Error("loader is of an incorrect type.");if(-1!=this._availableLoaders.indexOf(t))throw new Error("loader already exists.");this._availableLoaders.unshift(t)},e.unregisterLoader=function(t){var e=this._availableLoaders.indexOf(t);-1!=e&&e<this._defaultLoaderLength-1&&this._availableLoaders.splice(e,1)},e.setUseXHR=function(t){return this.setPreferXHR(t)},e.setPreferXHR=function(t){return this.preferXHR=0!=t&&null!=window.XMLHttpRequest,this.preferXHR},e.removeAll=function(){this.remove()},e.remove=function(t){var e=null;if(!t||t instanceof Array){if(t)e=t;else if(arguments.length>0)return}else e=[t];var i=!1;if(e){for(;e.length;){var n=e.pop(),r=this.getResult(n);for(s=this._loadQueue.length-1;s>=0;s--)if((a=this._loadQueue[s].getItem()).id==n||a.src==n){this._loadQueue.splice(s,1)[0].cancel();break}for(s=this._loadQueueBackup.length-1;s>=0;s--)if((a=this._loadQueueBackup[s].getItem()).id==n||a.src==n){this._loadQueueBackup.splice(s,1)[0].cancel();break}if(r)this._disposeItem(this.getItem(n));else for(var s=this._currentLoads.length-1;s>=0;s--){var a=this._currentLoads[s].getItem();if(a.id==n||a.src==n){this._currentLoads.splice(s,1)[0].cancel(),i=!0;break}}}i&&this._loadNext()}else{for(var o in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[o]);this.init(this.preferXHR,this._basePath,this._crossOrigin)}},e.reset=function(){for(var t in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[t]);for(var e=[],i=0,n=this._loadQueueBackup.length;n>i;i++)e.push(this._loadQueueBackup[i].getItem());this.loadManifest(e,!1)},e.installPlugin=function(t){if(null!=t&&null!=t.getPreloadHandlers){this._plugins.push(t);var e=t.getPreloadHandlers();if(e.scope=t,null!=e.types)for(var i=0,n=e.types.length;n>i;i++)this._typeCallbacks[e.types[i]]=e;if(null!=e.extensions)for(i=0,n=e.extensions.length;n>i;i++)this._extensionCallbacks[e.extensions[i]]=e}},e.setMaxConnections=function(t){this._maxConnections=t,!this._paused&&this._loadQueue.length>0&&this._loadNext()},e.loadFile=function(t,e,i){if(null!=t)this._addItem(t,null,i),!1!==e?this.setPaused(!1):this.setPaused(!0);else{var n=new createjs.ErrorEvent("PRELOAD_NO_FILE");this._sendError(n)}},e.loadManifest=function(t,e,n){var r=null,s=null;if(t instanceof Array){if(0==t.length){var a=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(a)}r=t}else if("string"==typeof t)r=[{src:t,type:i.MANIFEST}];else{if("object"!=typeof t){a=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");return void this._sendError(a)}if(void 0!==t.src){if(null==t.type)t.type=i.MANIFEST;else if(t.type!=i.MANIFEST){a=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(a)}r=[t]}else void 0!==t.manifest&&(r=t.manifest,s=t.path)}for(var o=0,h=r.length;h>o;o++)this._addItem(r[o],s,n);!1!==e?this.setPaused(!1):this.setPaused(!0)},e.load=function(){this.setPaused(!1)},e.getItem=function(t){return this._loadItemsById[t]||this._loadItemsBySrc[t]},e.getResult=function(t,e){var i=this._loadItemsById[t]||this._loadItemsBySrc[t];if(null==i)return null;var n=i.id;return e&&this._loadedRawResults[n]?this._loadedRawResults[n]:this._loadedResults[n]},e.getItems=function(t){var e=[];for(var i in this._loadItemsById){var n=this._loadItemsById[i],r=this.getResult(i);(!0!==t||null!=r)&&e.push({item:n,result:r,rawResult:this.getResult(i,!0)})}return e},e.setPaused=function(t){this._paused=t,this._paused||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},e._addItem=function(t,e,i){var n=this._createLoadItem(t,e,i);if(null!=n){var r=this._createLoader(n);null!=r&&("plugins"in r&&(r.plugins=this._plugins),n._loader=r,this._loadQueue.push(r),this._loadQueueBackup.push(r),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&n.type==createjs.LoadQueue.JAVASCRIPT||!0===n.maintainOrder)&&(this._scriptOrder.push(n),this._loadedScripts.push(null)))}},e._createLoadItem=function(t,e,i){var n=createjs.LoadItem.create(t);if(null==n)return null;var r="",s=i||this._basePath;if(n.src instanceof Object){if(!n.type)return null;if(e){r=e;var a=createjs.RequestUtils.parseURI(e);null==s||a.absolute||a.relative||(r=s+r)}else null!=s&&(r=s)}else{var o=createjs.RequestUtils.parseURI(n.src);o.extension&&(n.ext=o.extension),null==n.type&&(!n.ext&&window.console&&console.error("unable to get extension for "+n.src),n.type=createjs.RequestUtils.getTypeByExtension(n.ext));var h=n.src;if(!o.absolute&&!o.relative)if(e){r=e;a=createjs.RequestUtils.parseURI(e);h=e+h,null==s||a.absolute||a.relative||(r=s+r)}else null!=s&&(r=s);n.src=r+n.src}n.path=r,(void 0===n.id||null===n.id||""===n.id)&&(n.id=h);var l=this._typeCallbacks[n.type]||this._extensionCallbacks[n.ext];if(l){var u=l.callback.call(l.scope,n,this);if(!1===u)return null;!0===u||null!=u&&(n._loader=u),null!=(o=createjs.RequestUtils.parseURI(n.src)).extension&&(n.ext=o.extension)}return this._loadItemsById[n.id]=n,this._loadItemsBySrc[n.src]=n,null==n.crossOrigin&&(n.crossOrigin=this._crossOrigin),n},e._createLoader=function(t){if(null!=t._loader)return t._loader;for(var e=this.preferXHR,i=0;i<this._availableLoaders.length;i++){var n=this._availableLoaders[i];if(n&&n.canLoadItem(t))return new n(t,e)}return null},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var t=0;t<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);t++){var e=this._loadQueue[t];this._canStartLoad(e)&&(this._loadQueue.splice(t,1),t--,this._loadItem(e))}}},e._loadItem=function(t){t.on("fileload",this._handleFileLoad,this),t.on("progress",this._handleProgress,this),t.on("complete",this._handleFileComplete,this),t.on("error",this._handleError,this),t.on("fileerror",this._handleFileError,this),this._currentLoads.push(t),this._sendFileStart(t.getItem()),t.load()},e._handleFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleFileError=function(t){var e=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,t.item);this._sendError(e)},e._handleError=function(t){var e=t.target;this._numItemsLoaded++,this._finishOrderedItem(e,!0),this._updateProgress();var i=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,e.getItem());this._sendError(i),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(e),this._cleanLoadItem(e),this._loadNext())},e._handleFileComplete=function(t){var e=t.target,i=e.getItem(),n=e.getResult();this._loadedResults[i.id]=n;var r=e.getResult(!0);null!=r&&r!==n&&(this._loadedRawResults[i.id]=r),this._saveLoadedItems(e),this._removeLoadItem(e),this._finishOrderedItem(e)||this._processFinishedLoad(i,e),this._cleanLoadItem(e)},e._saveLoadedItems=function(t){var e=t.getLoadedItems();if(null!==e)for(var i=0;i<e.length;i++){var n=e[i].item;this._loadItemsBySrc[n.src]=n,this._loadItemsById[n.id]=n,this._loadedResults[n.id]=e[i].result,this._loadedRawResults[n.id]=e[i].rawResult}},e._finishOrderedItem=function(t,e){var i=t.getItem();if(this.maintainScriptOrder&&i.type==createjs.LoadQueue.JAVASCRIPT||i.maintainOrder){t instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var n=createjs.indexOf(this._scriptOrder,i);return-1!=n&&(this._loadedScripts[n]=!0===e||i,this._checkScriptLoadOrder(),!0)}return!1},e._checkScriptLoadOrder=function(){for(var t=this._loadedScripts.length,e=0;t>e;e++){var i=this._loadedScripts[e];if(null==i)break;if(!0!==i){var n=this._loadedResults[i.id];i.type==createjs.LoadQueue.JAVASCRIPT&&createjs.DomUtils.appendToHead(n);var r=i._loader;this._processFinishedLoad(i,r),this._loadedScripts[e]=!0}}},e._processFinishedLoad=function(t,e){if(this._numItemsLoaded++,!this.maintainScriptOrder&&t.type==createjs.LoadQueue.JAVASCRIPT){var i=e.getTag();createjs.DomUtils.appendToHead(i)}this._updateProgress(),this._sendFileComplete(t,e),this._loadNext()},e._canStartLoad=function(t){if(!this.maintainScriptOrder||t.preferXHR)return!0;var e=t.getItem();if(e.type!=createjs.LoadQueue.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var i=this._scriptOrder.indexOf(e),n=0;i>n;){if(null==this._loadedScripts[n])return!1;n++}return this._currentlyLoadingScript=!0,!0},e._removeLoadItem=function(t){for(var e=this._currentLoads.length,i=0;e>i;i++)if(this._currentLoads[i]==t){this._currentLoads.splice(i,1);break}},e._cleanLoadItem=function(t){var e=t.getItem();e&&delete e._loader},e._handleProgress=function(t){var e=t.target;this._sendFileProgress(e.getItem(),e.progress),this._updateProgress()},e._updateProgress=function(){var t=this._numItemsLoaded/this._numItems,e=this._numItems-this._numItemsLoaded;if(e>0){for(var i=0,n=0,r=this._currentLoads.length;r>n;n++)i+=this._currentLoads[n].progress;t+=i/e*(e/this._numItems)}this._lastProgress!=t&&(this._sendProgress(t),this._lastProgress=t)},e._disposeItem=function(t){delete this._loadedResults[t.id],delete this._loadedRawResults[t.id],delete this._loadItemsById[t.id],delete this._loadItemsBySrc[t.src]},e._sendFileProgress=function(t,e){if(!this._isCanceled()&&!this._paused&&this.hasEventListener("fileprogress")){var i=new createjs.Event("fileprogress");i.progress=e,i.loaded=e,i.total=1,i.item=t,this.dispatchEvent(i)}},e._sendFileComplete=function(t,e){if(!this._isCanceled()&&!this._paused){var i=new createjs.Event("fileload");i.loader=e,i.item=t,i.result=this._loadedResults[t.id],i.rawResult=this._loadedRawResults[t.id],t.completeHandler&&t.completeHandler(i),this.hasEventListener("fileload")&&this.dispatchEvent(i)}},e._sendFileStart=function(t){var e=new createjs.Event("filestart");e.item=t,this.hasEventListener("filestart")&&this.dispatchEvent(e)},e.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.TEXT)}(createjs.extend(t,createjs.AbstractLoader),t).canLoadItem=function(t){return t.type==createjs.AbstractLoader.TEXT},createjs.TextLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.BINARY),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.BINARY},e._updateXHR=function(t){t.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=e?document.createElement("style"):document.createElement("link"),this._tag.rel="stylesheet",this._tag.type="text/css"}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.CSS},e._formatResult=function(t){if(this._preferXHR){var e=t.getTag();if(e.styleSheet)e.styleSheet.cssText=t.getResult(!0);else{var i=document.createTextNode(t.getResult(!0));e.appendChild(i)}}else e=this._tag;return createjs.DomUtils.appendToHead(e),e},createjs.CSSLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.RequestUtils.isImageTag(t)?this._tag=t:createjs.RequestUtils.isImageTag(t.src)?this._tag=t.src:createjs.RequestUtils.isImageTag(t.tag)&&(this._tag=t.tag),null!=this._tag?this._preferXHR=!1:this._tag=document.createElement("img"),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.IMAGE},e.load=function(){if(""!=this._tag.src&&this._tag.complete)this._sendComplete();else{var t=this._item.crossOrigin;1==t&&(t="Anonymous"),null==t||createjs.RequestUtils.isLocal(this._item.src)||(this._tag.crossOrigin=t),this.AbstractLoader_load()}},e._updateXHR=function(t){t.loader.mimeType="text/plain; charset=x-user-defined-binary",t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){var e=this;return function(i){var n=e._tag,r=window.URL||window.webkitURL;if(e._preferXHR)if(r){var s=r.createObjectURL(t.getResult(!0));s?(n.src=s,n.onload=function(){r.revokeObjectURL(this.src),i(this)}):(n.src=t.getItem().src,n.complete?i(n):n.onload=function(){i(this)})}else n.src=t.getItem().src,n.complete?i(n):n.onload=function(){i(this)}}},createjs.ImageLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(document.createElement("script"))}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JAVASCRIPT},e._formatResult=function(t){var e=t.getTag();return this._preferXHR&&(e.text=t.getResult(!0)),e},createjs.JavaScriptLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.JSON),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSON},e._formatResult=function(t){var e=null;try{e=createjs.DataUtils.parseJSON(t.getResult(!0))}catch(t){var i=new createjs.ErrorEvent("JSON_FORMAT",null,t);return this._sendError(i),t}return e},createjs.JSONLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!1,createjs.AbstractLoader.JSONP),this.setTag(document.createElement("script")),this.getTag().type="text/javascript"}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSONP},e.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},e.load=function(){if(null==this._item.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[this._item.callback])throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),window.document.body.appendChild(this._tag),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},e._handleLoad=function(t){this._result=this._rawResult=t,this._sendComplete(),this._dispose()},e._handleTimeout=function(){this._dispose(),this.dispatchEvent(new createjs.ErrorEvent("timeout"))},e._dispose=function(){window.document.body.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},createjs.JSONPLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,null,createjs.AbstractLoader.MANIFEST),this.plugins=null,this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.MANIFEST_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.MANIFEST},e.load=function(){this.AbstractLoader_load()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.MANIFEST_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},e._loadManifest=function(t){if(t&&t.manifest){var e=this._manifestQueue=new createjs.LoadQueue;e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("complete",this._handleManifestComplete,this,!0),e.on("error",this._handleManifestError,this,!0);for(var i=0,n=this.plugins.length;n>i;i++)e.installPlugin(this.plugins[i]);e.loadManifest(t)}else this._sendComplete()},e._handleManifestFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleManifestComplete=function(t){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.MANIFEST_PROGRESS)+i.MANIFEST_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.ManifestLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)||createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.VIDEO),createjs.RequestUtils.isVideoTag(t)||createjs.RequestUtils.isVideoTag(t.src)?(this.setTag(createjs.RequestUtils.isVideoTag(t)?t:t.src),this._preferXHR=!1):this.setTag(this._createTag())}var e=t;createjs.extend(t,createjs.AbstractMediaLoader)._createTag=function(){return document.createElement("video")},e.canLoadItem=function(t){return t.type==createjs.AbstractLoader.VIDEO},createjs.VideoLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,null,createjs.AbstractLoader.SPRITESHEET),this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.SPRITESHEET_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SPRITESHEET},e.destroy=function(){this.AbstractLoader_destroy,this._manifestQueue.close()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.SPRITESHEET_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e._loadManifest=function(t){if(t&&t.images){var e=this._manifestQueue=new createjs.LoadQueue;e.on("complete",this._handleManifestComplete,this,!0),e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("error",this._handleManifestError,this,!0),e.loadManifest(t.images)}},e._handleManifestFileLoad=function(t){var e=t.result;if(null!=e){var i=this.getResult().images,n=i.indexOf(t.item.src);i[n]=e}},e._handleManifestComplete=function(t){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.SPRITESHEET_PROGRESS)+i.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.SpriteSheetLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",e?this.setTag(document.createElement("svg")):(this.setTag(document.createElement("object")),this.getTag().type="image/svg+xml")}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SVG},e._formatResult=function(t){var e=createjs.DataUtils.parseXML(t.getResult(!0),"text/xml"),i=t.getTag();return!this._preferXHR&&document.body.contains(i)&&document.body.removeChild(i),null!=e.documentElement?(i.appendChild(e.documentElement),i.style.visibility="visible",i):e},createjs.SVGLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.XML),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.XML},e._formatResult=function(t){return createjs.DataUtils.parseXML(t.getResult(!0),"text/xml")},createjs.XMLLoader=createjs.promote(t,"AbstractLoader")}(),function(){"use strict";!function(t){function e(t,e){return t._priority-e._priority}var i=function(){this._listeners={}},n=i.prototype;n.on=function(t,i,n){if("string"!=typeof t)for(var r in t)this.on(r,t[r],n);else for(var s,a=t.split(" "),o=0,h=a.length;h>o;o++)t=a[o],(s=this._listeners[t])||(s=this._listeners[t]=[]),i._priority=parseInt(n)||0,-1===s.indexOf(i)&&(s.push(i),s.length>1&&s.sort(e));return this},n.off=function(t,e){if(void 0===t||!this._listeners)return this._listeners={},this;if(void 0===this._listeners[t])return this;if(void 0===e)delete this._listeners[t];else for(var i=this._listeners[t],n=0,r=i.length;r>n;n++)if(i[n]===e){i.splice(n,1);break}return this},n.trigger=function(t){"string"==typeof t&&(t={type:t});var e=this._listeners[t.type];if(void 0!==e)for(var i=e.length-1;i>=0;i--)e[i](t)},n.destroy=function(){this._listeners=null},t.BellhopEventDispatcher=i}(window),function(t,e){var i=t.BellhopEventDispatcher,n=function(){i.call(this),this.onReceive=this.receive.bind(this),this.connected=!1,this.name="",this.isChild=!0,this.connecting=!1,this.origin="*",this._sendLater=[],this.supported=null,this.iframe=null},r=i.prototype,s=n.prototype=Object.create(r);s.receive=function(t){if(t.source===this.target){var e=t.data;if("connected"===e){this.connecting=!1,this.connected=!0,this.trigger("connected"),this.isChild||this.target.postMessage(e,this.origin);var i,r=this._sendLater.length;if(r>0){for(i=0;r>i;i++){var s=this._sendLater[i];this.send(s.type,s.data)}this._sendLater.length=0}}else{if(!this.connected)return;try{e=JSON.parse(e,n.reviver)}catch(t){return}"object"==typeof e&&e.type&&this.trigger(e)}}},s.toString=function(){return"[Bellhop '"+this.name+"']"},Object.defineProperty(s,"target",{get:function(){return this.isChild?t.parent:this.iframe.contentWindow}}),s.connect=function(i,n){if(this.connecting)return this;this.disconnect(),this.connecting=!0,this._sendLater||(this._sendLater=[]),this.iframe=i||null;var r=this.isChild=i===e,s=this.target;return this.supported=r?!!s&&t!=s:!!s,this.origin=n===e?"*":n,t.attachEvent?t.attachEvent("onmessage",this.onReceive):t.addEventListener("message",this.onReceive),r&&(t===s?this.trigger("failed"):"complete"===t.document.readyState?s.postMessage("connected",this.origin):t.onload=function(){s.postMessage("connected",this.origin)}.bind(this)),this},s.disconnect=function(){return this.connected=!1,this.connecting=!1,this.origin=null,this.iframe=null,this._sendLater&&(this._sendLater.length=0),this.isChild=!0,t.detachEvent?t.detachEvent("onmessage",this.onReceive):t.removeEventListener("message",this.onReceive),this},s.send=function(t,i){if("string"!=typeof t)throw"The event type must be a string";if(t={type:t},i!==e&&(t.data=i),this.connecting)this._sendLater.push(t);else{if(!this.connected)return this;this.target.postMessage(JSON.stringify(t),this.origin)}return this},s.fetch=function(t,i,n,r){var s=this;if(!this.connecting&&!this.connected)throw"No connection, please call connect() first";r=r!==e&&r;var a=function(t){r&&s.off(t.type,a),i(t)};return this.on(t,a),this.send(t,n),this},s.respond=function(t,i,n){n=n!==e&&n;var r=this,s=function(e){n&&r.off(e.type,s),r.send(t,"function"==typeof i?i():i)};return this.on(t,s),this},s.destroy=function(){r.destroy.call(this),this.disconnect(),this._sendLater=null},n.reviver=function(t,e){if(e&&"string"==typeof e.__classname){var i=a(e.__classname);if(i){var n=new i;if(n.fromJSON)return n.fromJSON(e),n}}return e};var a=function(e){for(var i=e.split("."),n=t;i.length;)if(!(n=n[i.shift()]))return;return n};t.Bellhop=n}(window)}(),
/*!
* @license SoundJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2015 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
/**!
 * SoundJS FlashAudioPlugin also includes swfobject (http://code.google.com/p/swfobject/)
 */
this.createjs=this.createjs||{},function(){var t=createjs.SoundJS=createjs.SoundJS||{};t.version="0.6.6",t.buildDate="Thu, 10 May 2018 18:47:59 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n)for(var r in i[(e+="_")+"constructor"]=n.constructor,n)i.hasOwnProperty(r)&&"function"==typeof n[r]&&(i[e+r]=n[r]);return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){"use strict";for(var i=0,n=t.length;i<n;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n,r=(n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return r&&this.removeEventListener(t,e,i),(r=n[t])?r.push(e):n[t]=[e],e},e.on=function(t,e,i,n,r,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,(function(t){e.call(i,t,r),n&&t.remove()}),s)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var r=n[t];if(r)for(var s=0,a=r.length;s<a;s++)if(r[s]==e){1==a?delete n[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e,i){if("string"==typeof t){var n=this._listeners;if(!(e||n&&n[t]))return!0;t=new createjs.Event(t,e,i)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var r=this,s=[r];r.parent;)s.push(r=r.parent);var a,o=s.length;for(a=o-1;a>=0&&!t.propagationStopped;a--)s[a]._dispatchEvent(t,1+(0==a));for(a=1;a<o&&!t.propagationStopped;a++)s[a]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n=1==e?this._captureListeners:this._listeners;if(t&&n){var r=n[t.type];if(!r||!(i=r.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,r=r.slice();for(var s=0;s<i&&!t.immediatePropagationStopped;s++){var a=r[s];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}createjs.extend(t,createjs.Event).clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(t){"use strict";function e(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}createjs.extend(e,createjs.Event).clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(e,"Event")}(window),this.createjs=this.createjs||{},function(){"use strict";function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=i.LOAD_TIMEOUT_DEFAULT}var e=t.prototype={},i=t;i.LOAD_TIMEOUT_DEFAULT=8e3,i.create=function(e){if("string"==typeof e){var n=new t;return n.src=e,n}if(e instanceof i)return e;if(e instanceof Object&&e.src)return null==e.loadTimeout&&(e.loadTimeout=i.LOAD_TIMEOUT_DEFAULT),e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=i}(),function(){var t={ABSOLUTE_PATT:/^(?:\w+:)?\/{2}/i,RELATIVE_PATT:/^[.\/]*?\//i,EXTENSION_PATT:/\/?[^\/]+\.(\w{1,5})$/i,parseURI:function(e){var i={absolute:!1,relative:!1};if(null==e)return i;var n,r=e.indexOf("?");return r>-1&&(e=e.substr(0,r)),t.ABSOLUTE_PATT.test(e)?i.absolute=!0:t.RELATIVE_PATT.test(e)&&(i.relative=!0),(n=e.match(t.EXTENSION_PATT))&&(i.extension=n[1].toLowerCase()),i},formatQueryString:function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var n in t)i.push(n+"="+escape(t[n]));return e&&(i=i.concat(e)),i.join("&")},buildPath:function(t,e){if(null==e)return t;var i=[],n=t.indexOf("?");if(-1!=n){var r=t.slice(n+1);i=i.concat(r.split("&"))}return-1!=n?t.slice(0,n)+"?"+this.formatQueryString(e,i):t+"?"+this.formatQueryString(e,i)},isCrossDomain:function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");return i.href=location.href,""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname)},isLocal:function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},isBinary:function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},isImageTag:function(t){return t instanceof HTMLImageElement},isAudioTag:function(t){return!!window.HTMLAudioElement&&t instanceof HTMLAudioElement},isVideoTag:function(t){return!!window.HTMLVideoElement&&t instanceof HTMLVideoElement},isText:function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},getTypeByExtension:function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}}};createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(t){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return!(null!=window.createjs&&!this.canceled)},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this);e instanceof Function?e.call(this,createjs.proxy(this._resultFormatSuccess,this),createjs.proxy(this._resultFormatFailed,this)):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_"+t.type.toUpperCase()+"_ERROR"))}},e._resultFormatSuccess=function(t){this._result=t,this._sendComplete()},e._resultFormatFailed=function(t){this._sendError(t)},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._updateXHR=function(t){t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){if(this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR){var e=window.URL||window.webkitURL,i=t.getResult(!0);t.getTag().src=e.createObjectURL(i)}return t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;"loaded"!=t.readyState&&"complete"!=t.readyState||this._handleTagComplete()},e._handleError=function(){this._clean(),this.dispatchEvent("error")},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){var t=createjs.proxy(this._handleStalled,this);this._stalledCallback=t;var e=createjs.proxy(this._handleProgress,this);this._handleProgress=e,this._tag.addEventListener("stalled",t),this._tag.addEventListener("progress",e),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;"loaded"!=t.readyState&&"complete"!=t.readyState||this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null!=this._request){null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}}else this._handleError()},e.setResponseType=function(t){"blob"===t&&(t=window.URL?"blob":"arraybuffer",this._responseType=t),this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(t){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(t){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(t){if(!this.loaded){this.loaded=!0;var e=this._checkError();if(e)return void this._handleError(e);if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(t){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===t.name&&window.BlobBuilder){var i=new BlobBuilder;i.append(this._response),this._response=i.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:return new Error(t);case 0:return this._getResponse()?null:new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),i={},n=null;if(window.XMLHttpRequest)n=new XMLHttpRequest,e&&void 0===n.withCredentials&&window.XDomainRequest&&(n=new XDomainRequest);else{for(var r=0,a=s.ACTIVEX_VERSIONS.length;r<a;r++){var o=s.ACTIVEX_VERSIONS[r];try{n=new ActiveXObject(o);break}catch(t){}}if(null==n)return!1}null==t.mimeType&&createjs.RequestUtils.isText(t.type)&&(t.mimeType="text/plain; charset=utf-8"),t.mimeType&&n.overrideMimeType&&n.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof n.responseType?2:1;var h;if(h=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,n.open(t.method||createjs.AbstractLoader.GET,h,!0),e&&n instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var l in t.headers)i[l]=t.headers[l];for(l in i)n.setRequestHeader(l,i[l]);return n instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(n.withCredentials=t.withCredentials),this._request=n,!0},e._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)||createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null},e=t.prototype={},i=t;i.create=function(t){if(t instanceof i||t instanceof Object){var e=new createjs.PlayPropsConfig;return e.set(t),e}throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[PlayPropsConfig]"},createjs.PlayPropsConfig=i}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Sound cannot be instantiated"}function e(t,e){this.init(t,e)}var i=t;i.INTERRUPT_ANY="any",i.INTERRUPT_EARLY="early",i.INTERRUPT_LATE="late",i.INTERRUPT_NONE="none",i.PLAY_INITED="playInited",i.PLAY_SUCCEEDED="playSucceeded",i.PLAY_INTERRUPTED="playInterrupted",i.PLAY_FINISHED="playFinished",i.PLAY_FAILED="playFailed",i.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],i.EXTENSION_MAP={m4a:"mp4"},i.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([\/.]*?(?:[^?]+)?\/)?(?:((?:[^\/?]+)\.(\w+))|(?:[^\/?]+))(?:\?((?:(?:[^&]*?[\/=])?(?:((?:(?:[^\/?&=]+)\.(\w+)))\S*?)|\S+))?)?$/,i.defaultInterruptBehavior=i.INTERRUPT_NONE,i.alternateExtensions=[],i.activePlugin=null,i._masterVolume=1,Object.defineProperty(i,"volume",{get:function(){return this._masterVolume},set:function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),i._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,n=0,r=e.length;n<r;n++)e[n].setMasterVolume(t)}}),i._masterMute=!1,Object.defineProperty(i,"muted",{get:function(){return this._masterMute},set:function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,n=e.length;i<n;i++)e[i].setMasterMute(t);return!0}}),Object.defineProperty(i,"capabilities",{get:function(){return null==i.activePlugin?null:i.activePlugin._capabilities},set:function(t){return!1}}),i._pluginsRegistered=!1,i._lastID=0,i._instances=[],i._idHash={},i._preloadHash={},i._defaultPlayPropsHash={},i.addEventListener=null,i.removeEventListener=null,i.removeAllEventListeners=null,i.dispatchEvent=null,i.hasEventListener=null,i._listeners=null,createjs.EventDispatcher.initialize(i),i.getPreloadHandlers=function(){return{callback:createjs.proxy(i.initLoad,i),types:["sound"],extensions:i.SUPPORTED_EXTENSIONS}},i._handleLoadComplete=function(t){var e=t.target.getItem().src;if(i.preloadHash[e])for(var n=0,r=i._preloadHash[e].length;n<r;n++){var s=i._preloadHash[e][n];if(i._preloadHash[e][n]=!0,i.hasEventListener("fileload"))(t=new createjs.Event("fileload")).src=s.src,t.id=s.id,t.data=s.data,t.sprite=s.sprite,i.dispatchEvent(t)}},i._handleLoadError=function(t){var e=t.target.getItem().src;if(i._preloadHash[e])for(var n=0,r=i._preloadHash[e].length;n<r;n++){var s=i._preloadHash[e][n];if(i._preloadHash[e][n]=!1,i.hasEventListener("fileerror"))(t=new createjs.Event("fileerror")).src=s.src,t.id=s.id,t.data=s.data,t.sprite=s.sprite,i.dispatchEvent(t)}},i._registerPlugin=function(t){return!!t.isSupported()&&(i.activePlugin=new t,!0)},i.registerPlugins=function(t){i._pluginsRegistered=!0;for(var e=0,n=t.length;e<n;e++)if(i._registerPlugin(t[e]))return!0;return!1},i.initializeDefaultPlugins=function(){return null!=i.activePlugin||!i._pluginsRegistered&&!!i.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])},i.isReady=function(){return null!=i.activePlugin},i.getCapabilities=function(){return null==i.activePlugin?null:i.activePlugin._capabilities},i.getCapability=function(t){return null==i.activePlugin?null:i.activePlugin._capabilities[t]},i.initLoad=function(t){return i._registerSound(t)},i._registerSound=function(t){if(!i.initializeDefaultPlugins())return!1;var n;if(t.src instanceof Object?(n=i._parseSrc(t.src)).src=t.path+n.src:n=i._parsePath(t.src),null==n)return!1;t.src=n.src,t.type="sound";var r=t.data,s=null;if(null!=r&&(isNaN(r.channels)?isNaN(r)||(s=parseInt(r)):s=parseInt(r.channels),r.audioSprite))for(var a,o=r.audioSprite.length;o--;)a=r.audioSprite[o],i._idHash[a.id]={src:t.src,startTime:parseInt(a.startTime),duration:parseInt(a.duration)},a.defaultPlayProps&&(i._defaultPlayPropsHash[a.id]=createjs.PlayPropsConfig.create(a.defaultPlayProps));null!=t.id&&(i._idHash[t.id]={src:t.src});var h=i.activePlugin.register(t);return e.create(t.src,s),null!=r&&isNaN(r)?t.data.channels=s||e.maxPerChannel():t.data=s||e.maxPerChannel(),h.type&&(t.type=h.type),t.defaultPlayProps&&(i._defaultPlayPropsHash[t.src]=createjs.PlayPropsConfig.create(t.defaultPlayProps)),h},i.registerSound=function(t,e,n,r,s){var a={src:t,id:e,data:n,defaultPlayProps:s};t instanceof Object&&t.src&&(r=e,a=t),(a=createjs.LoadItem.create(a)).path=r,null==r||a.src instanceof Object||(a.src=r+t);var o=i._registerSound(a);if(!o)return!1;if(i._preloadHash[a.src]||(i._preloadHash[a.src]=[]),i._preloadHash[a.src].push(a),1==i._preloadHash[a.src].length)o.on("complete",createjs.proxy(this._handleLoadComplete,this)),o.on("error",createjs.proxy(this._handleLoadError,this)),i.activePlugin.preload(o);else if(1==i._preloadHash[a.src][0])return!0;return a},i.registerSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var n=0,r=t.length;n<r;n++)i[n]=createjs.Sound.registerSound(t[n].src,t[n].id,t[n].data,e,t[n].defaultPlayProps);return i},i.removeSound=function(t,n){if(null==i.activePlugin)return!1;var r;if(t instanceof Object&&t.src&&(t=t.src),t instanceof Object?r=i._parseSrc(t):(t=i._getSrcById(t).src,r=i._parsePath(t)),null==r)return!1;for(var s in t=r.src,null!=n&&(t=n+t),i._idHash)i._idHash[s].src==t&&delete i._idHash[s];return e.removeSrc(t),delete i._preloadHash[t],i.activePlugin.removeSound(t),!0},i.removeSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var n=0,r=t.length;n<r;n++)i[n]=createjs.Sound.removeSound(t[n].src,e);return i},i.removeAllSounds=function(){i._idHash={},i._preloadHash={},e.removeAll(),i.activePlugin&&i.activePlugin.removeAllSounds()},i.loadComplete=function(t){if(!i.isReady())return!1;var e=i._parsePath(t);return t=e?i._getSrcById(e.src).src:i._getSrcById(t).src,null!=i._preloadHash[t]&&1==i._preloadHash[t][0]},i._parsePath=function(t){"string"!=typeof t&&(t=t.toString());var e=t.match(i.FILE_PATTERN);if(null===e)return!1;var n="",r="",s="";if(i.SUPPORTED_EXTENSIONS.indexOf(e[5])>=0)n=e[4],s=r=e[5];else{if(!(i.SUPPORTED_EXTENSIONS.indexOf(e[8])>=0))return null;n=e[7],s=r=e[8]}for(var a=i.capabilities,o=0;!a[r];)if(r=i.alternateExtensions[o++],o>i.alternateExtensions.length)return null;return{name:n,src:t=t.replace("."+s,"."+r),extension:r}},i._parseSrc=function(t){var e={name:void 0,src:void 0,extension:void 0},n=i.capabilities;for(var r in t)if(t.hasOwnProperty(r)&&n[r]){e.src=t[r],e.extension=r;break}if(!e.src)return!1;var s=e.src.lastIndexOf("/");return e.name=-1!=s?e.src.slice(s+1):e.src,e},i.play=function(t,e,n,r,s,a,o,h,l){var u;u=e instanceof Object||e instanceof createjs.PlayPropsConfig?createjs.PlayPropsConfig.create(e):createjs.PlayPropsConfig.create({interrupt:e,delay:n,offset:r,loop:s,volume:a,pan:o,startTime:h,duration:l});var c=i.createInstance(t,u.startTime,u.duration);return i._playInstance(c,u)||c._playFailed(),c},i.createInstance=function(t,n,r){if(!i.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(t,n,r);var s=i._defaultPlayPropsHash[t];t=i._getSrcById(t);var a=i._parsePath(t.src),o=null;return null!=a&&null!=a.src?(e.create(a.src),null==n&&(n=t.startTime),o=i.activePlugin.create(a.src,n,r||t.duration),(s=s||i._defaultPlayPropsHash[a.src])&&o.applyPlayProps(s)):o=new createjs.DefaultSoundInstance(t,n,r),o.uniqueId=i._lastID++,o},i.stop=function(){for(var t=this._instances,e=t.length;e--;)t[e].stop()},i.setVolume=function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),i._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,n=0,r=e.length;n<r;n++)e[n].setMasterVolume(t)},i.getVolume=function(){return this._masterVolume},i.setMute=function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,n=e.length;i<n;i++)e[i].setMasterMute(t);return!0},i.getMute=function(){return this._masterMute},i.setDefaultPlayProps=function(t,e){t=i._getSrcById(t),i._defaultPlayPropsHash[i._parsePath(t.src).src]=createjs.PlayPropsConfig.create(e)},i.getDefaultPlayProps=function(t){return t=i._getSrcById(t),i._defaultPlayPropsHash[i._parsePath(t.src).src]},i.pause=function(){for(var t=this.instances,e=t.length;e--;)t[e].paused=!0},i.resume=function(){for(var t=this.instances,e=t.length;e--;)t[e].paused=!1},i._playInstance=function(t,e){var n=i._defaultPlayPropsHash[t.src]||{};if(null==e.interrupt&&(e.interrupt=n.interrupt||i.defaultInterruptBehavior),null==e.delay&&(e.delay=n.delay||0),null==e.offset&&(e.offset=t.getPosition()),null==e.loop&&(e.loop=t.loop),null==e.volume&&(e.volume=t.volume),null==e.pan&&(e.pan=t.pan),0==e.delay){if(!i._beginPlaying(t,e))return!1}else{var r=setTimeout((function(){i._beginPlaying(t,e)}),e.delay);t.delayTimeoutId=r}return this._instances.push(t),!0},i._beginPlaying=function(t,i){if(!e.add(t,i.interrupt))return!1;if(!t._beginPlaying(i)){var n=createjs.indexOf(this._instances,t);return n>-1&&this._instances.splice(n,1),!1}return!0},i._getSrcById=function(t){return i._idHash[t]||{src:t}},i._playFinished=function(t){e.remove(t);var n=createjs.indexOf(this._instances,t);n>-1&&this._instances.splice(n,1);var r=i.activePlugin._soundInstances;r[t.src]&&r[t.src].indexOf(t)>-1&&r[t.src].splice(r[t.src].indexOf(t),1)},createjs.Sound=t,e.channels={},e.create=function(t,i){return null==e.get(t)&&(e.channels[t]=new e(t,i),!0)},e.removeSrc=function(t){var i=e.get(t);return null!=i&&(i._removeAll(),delete e.channels[t],!0)},e.removeAll=function(){for(var t in e.channels)e.channels[t]._removeAll();e.channels={}},e.add=function(t,i){var n=e.get(t.src);return null!=n&&n._add(t,i)},e.remove=function(t){var i=e.get(t.src);return null!=i&&(i._remove(t),!0)},e.maxPerChannel=function(){return n.maxDefault},e.get=function(t){return e.channels[t]};var n=e.prototype;n.constructor=e,n.src=null,n.max=null,n.maxDefault=100,n.length=0,n.init=function(t,e){this.src=t,this.max=e||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},n._get=function(t){return this._instances[t]},n._add=function(t,e){return!!this._getSlot(e,t)&&(this._instances.push(t),this.length++,!0)},n._remove=function(t){var e=i.activePlugin._soundInstances;e[t.src]&&e[t.src].indexOf(t)>-1&&e[t.src].splice(e[t.src].indexOf(t),1);var n=createjs.indexOf(this._instances,t);return-1!=n&&(this._instances.splice(n,1),this.length--,!0)},n._removeAll=function(){for(var t=this.length-1;t>=0;t--)this._instances[t].stop()},n._getSlot=function(e,i){var n,r;if(e!=t.INTERRUPT_NONE&&null==(r=this._get(0)))return!0;for(var s=0,a=this.max;s<a;s++){if(null==(n=this._get(s)))return!0;if(n.playState==t.PLAY_FINISHED||n.playState==t.PLAY_INTERRUPTED||n.playState==t.PLAY_FAILED){r=n;break}e!=t.INTERRUPT_NONE&&(e==t.INTERRUPT_EARLY&&n.getPosition()<r.getPosition()||e==t.INTERRUPT_LATE&&n.getPosition()>r.getPosition())&&(r=n)}return null!=r&&(r._interrupt(),this._remove(r),!0)},n.toString=function(){return"[Sound SoundChannel]"}}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,n){this.EventDispatcher_constructor(),this.src=t,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._startTime=Math.max(0,e||0),Object.defineProperty(this,"startTime",{get:this.getStartTime,set:this.setStartTime}),this._duration=Math.max(0,i||0),Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),!1!==n&&!0!==n&&this.setPlaybackResource(n),this._position=0,Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},e=createjs.extend(t,createjs.EventDispatcher);e.play=function(t,e,i,n,r,s){var a;return a=t instanceof Object||t instanceof createjs.PlayPropsConfig?createjs.PlayPropsConfig.create(t):createjs.PlayPropsConfig.create({interrupt:t,delay:e,offset:i,loop:n,volume:r,pan:s}),this.playState==createjs.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(a),void(this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,a),this)},e.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},e.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},e.applyPlayProps=function(t){return null!=t.offset&&this.setPosition(t.offset),null!=t.loop&&this.setLoop(t.loop),null!=t.volume&&this.setVolume(t.volume),null!=t.pan&&this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),this},e.toString=function(){return"[AbstractSoundInstance]"},e.getPaused=function(){return this._paused},e.setPaused=function(t){if(!(!0!==t&&!1!==t||this._paused==t||1==t&&this.playState!=createjs.Sound.PLAY_SUCCEEDED))return this._paused=t,t?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this},e.setVolume=function(t){return t==this._volume||(this._volume=Math.max(0,Math.min(1,t)),this._muted||this._updateVolume()),this},e.getVolume=function(){return this._volume},e.setMuted=function(t){if(!0===t||!1===t)return this._muted=t,this._updateVolume(),this},e.getMuted=function(){return this._muted},e.setPan=function(t){return t==this._pan||(this._pan=Math.max(-1,Math.min(1,t)),this._updatePan()),this},e.getPan=function(){return this._pan},e.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},e.setPosition=function(t){return this._position=Math.max(0,t),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},e.getStartTime=function(){return this._startTime},e.setStartTime=function(t){return t==this._startTime||(this._startTime=Math.max(0,t||0),this._updateStartTime()),this},e.getDuration=function(){return this._duration},e.setDuration=function(t){return t==this._duration||(this._duration=Math.max(0,t||0),this._updateDuration()),this},e.setPlaybackResource=function(t){return this._playbackResource=t,0==this._duration&&this._setDurationFromSource(),this},e.getPlaybackResource=function(){return this._playbackResource},e.getLoop=function(){return this._loop},e.setLoop=function(t){null!=this._playbackResource&&(0!=this._loop&&0==t?this._removeLooping(t):0==this._loop&&0!=t&&this._addLooping(t)),this._loop=t},e._sendEvent=function(t){var e=new createjs.Event(t);this.dispatchEvent(e)},e._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},e._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},e._beginPlaying=function(t){return this.setPosition(t.offset),this.setLoop(t.loop),this.setVolume(t.volume),this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},e._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},e._handleSoundComplete=function(t){if(this._position=0,0!=this._loop)return this._loop--,this._handleLoop(),void this._sendEvent("loop");this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this._sendEvent("complete")},e._handleSoundReady=function(){},e._updateVolume=function(){},e._updatePan=function(){},e._updateStartTime=function(){},e._updateDuration=function(){},e._setDurationFromSource=function(){},e._calculateCurrentPosition=function(){},e._updatePosition=function(){},e._removeLooping=function(t){},e._addLooping=function(t){},e._pause=function(){},e._resume=function(){},e._handleStop=function(){},e._handleCleanUp=function(){},e._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(t,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass,this._volume=1},e=t.prototype;t._capabilities=null,t.isSupported=function(){return!0},e.register=function(t){var e=this._loaders[t.src];return e&&!e.canceled?this._loaders[t.src]:(this._audioSources[t.src]=!0,this._soundInstances[t.src]=[],(e=new this._loaderClass(t)).on("complete",this._handlePreloadComplete,this),this._loaders[t.src]=e,e)},e.preload=function(t){t.on("error",this._handlePreloadError,this),t.load()},e.isPreloadStarted=function(t){return null!=this._audioSources[t]},e.isPreloadComplete=function(t){return!(null==this._audioSources[t]||1==this._audioSources[t])},e.removeSound=function(t){if(this._soundInstances[t]){for(var e=this._soundInstances[t].length;e--;)this._soundInstances[t][e].destroy();delete this._soundInstances[t],delete this._audioSources[t],this._loaders[t]&&this._loaders[t].destroy(),delete this._loaders[t]}},e.removeAllSounds=function(){for(var t in this._audioSources)this.removeSound(t)},e.create=function(t,e,i){this.isPreloadStarted(t)||this.preload(this.register(t));var n=new this._soundInstanceClass(t,e,i,this._audioSources[t]);return this._soundInstances[t].push(n),n},e.setVolume=function(t){return this._volume=t,this._updateVolume(),!0},e.getVolume=function(){return this._volume},e.setMute=function(t){return this._updateVolume(),!0},e.toString=function(){return"[AbstractPlugin]"},e._handlePreloadComplete=function(t){var e=t.target.getItem().src;this._audioSources[e]=t.result;for(var i=0,n=this._soundInstances[e].length;i<n;i++)this._soundInstances[e][i].setPlaybackResource(this._audioSources[e])},e._handlePreloadError=function(t){},e._updateVolume=function(){},createjs.AbstractPlugin=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.SOUND)}var e=createjs.extend(t,createjs.AbstractLoader);t.context=null,e.toString=function(){return"[WebAudioLoader]"},e._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},e._sendComplete=function(e){t.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._sendError,this))},e._handleAudioDecoded=function(t){this._result=t,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n,r){this.AbstractSoundInstance_constructor(t,e,n,r),this.gainNode=i.context.createGain(),this.panNode=i.context.createPanner(),this.panNode.panningModel=i._panningModel,this.panNode.connect(this.gainNode),this._updatePan(),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var e=createjs.extend(t,createjs.AbstractSoundInstance),i=t;i.context=null,i._scratchBuffer=null,i.destinationNode=null,i._panningModel="equalpower",e.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},e.toString=function(){return"[WebAudioSoundInstance]"},e._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},e._removeLooping=function(t){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},e._addLooping=function(t){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},e._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},e._cleanUpAudioNode=function(t){if(t){t.stop(0),t.disconnect(0);try{t.buffer=i._scratchBuffer}catch(t){}t=null}return t},e._handleSoundReady=function(t){this.gainNode.connect(i.destinationNode);var e=.001*this._duration,n=.001*this._position;n>e&&(n=e),this.sourceNode=this._createAndPlayAudioNode(i.context.currentTime-e,n),this._playbackStartTime=this.sourceNode.startTime-n,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(e-n)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._createAndPlayAudioNode=function(t,e){var n=i.context.createBufferSource();n.buffer=this.playbackResource,n.connect(this.panNode);var r=.001*this._duration;return e>r&&(e=r-.001),n.startTime=t+r,n.start(n.startTime,e+.001*this._startTime,r-e),n},e._pause=function(){this._position=1e3*(i.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},e._resume=function(){this._handleSoundReady()},e._updateVolume=function(){var t=this._muted?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},e._calculateCurrentPosition=function(){return 1e3*(i.context.currentTime-this._playbackStartTime)},e._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},e._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},e._updateDuration=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},createjs.WebAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.AbstractPlugin_constructor(),this._panningModel=i._panningModel,this.context=i.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=i._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i._capabilities=null,i._panningModel="equalpower",i.context=null,i._scratchBuffer=null,i._unlocked=!1,i.isSupported=function(){var t=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return!("file:"==location.protocol&&!t&&!this._isFileXHRSupported())&&(i._generateCapabilities(),null!=i.context)},i.playEmptySound=function(){if(null!=i.context){var t=i.context.createBufferSource();t.buffer=i._scratchBuffer,t.connect(i.context.destination),t.start(0,0,0),"suspended"===t.context.state&&t.context.resume()}},i._isFileXHRSupported=function(){var t=!0,e=new XMLHttpRequest;try{e.open("GET","WebAudioPluginTest.fail",!1)}catch(e){return t=!1}e.onerror=function(){t=!1},e.onload=function(){t=404==this.status||200==this.status||0==this.status&&""!=this.response};try{e.send()}catch(e){t=!1}return t},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;if(null==i.context){if(window.AudioContext)i.context=new AudioContext;else{if(!window.webkitAudioContext)return null;i.context=new webkitAudioContext}document.addEventListener("click",(function(){"suspended"===i.context.state&&i.context.resume()}))}null==i._scratchBuffer&&(i._scratchBuffer=i.context.createBuffer(1,1,22050)),i._compatibilitySetUp(),"ontouchstart"in window&&"running"!=i.context.state&&(i._unlock(),document.addEventListener("mousedown",i._unlock,!0),document.addEventListener("touchstart",i._unlock,!0),document.addEventListener("touchend",i._unlock,!0)),i._capabilities={panning:!0,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,n=createjs.Sound.EXTENSION_MAP,r=0,s=e.length;r<s;r++){var a=e[r],o=n[a]||a;i._capabilities[a]="no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)||"no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)}i.context.destination.numberOfChannels<2&&(i._capabilities.panning=!1)}},i._compatibilitySetUp=function(){if(i._panningModel="equalpower",!i.context.createGain){i.context.createGain=i.context.createGainNode;var t=i.context.createBufferSource();t.__proto__.start=t.__proto__.noteGrainOn,t.__proto__.stop=t.__proto__.noteOff,i._panningModel=0}},i._unlock=function(){"suspended"===i.context.state&&i.context.resume(),i._unlocked||(i.playEmptySound(),"running"==i.context.state&&(document.removeEventListener("mousedown",i._unlock,!0),document.removeEventListener("touchend",i._unlock,!0),document.removeEventListener("touchstart",i._unlock,!0),i._unlocked=!0))},e.toString=function(){return"[WebAudioPlugin]"},e._addPropsToClasses=function(){var t=this._soundInstanceClass;t.context=this.context,t._scratchBuffer=i._scratchBuffer,t.destinationNode=this.gainNode,t._panningModel=this._panningModel,this._loaderClass.context=this.context},e._updateVolume=function(){var t=createjs.Sound._masterMute?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},createjs.WebAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"HTMLAudioTagPool cannot be instantiated"}function e(t){this._tags=[]}var i=t;i._tags={},i._tagPool=new e,i._tagUsed={},i.get=function(t){var e=i._tags[t];return null==e?(e=i._tags[t]=i._tagPool.get()).src=t:i._tagUsed[t]?(e=i._tagPool.get()).src=t:i._tagUsed[t]=!0,e},i.set=function(t,e){e==i._tags[t]?i._tagUsed[t]=!1:i._tagPool.set(e)},i.remove=function(t){var e=i._tags[t];return null!=e&&(i._tagPool.set(e),delete i._tags[t],delete i._tagUsed[t],!0)},i.getDuration=function(t){var e=i._tags[t];return null!=e&&e.duration?1e3*e.duration:0},createjs.HTMLAudioTagPool=t;var n=e.prototype;n.constructor=e,n.get=function(){var t;return null==(t=0==this._tags.length?this._createTag():this._tags.pop()).parentNode&&document.body.appendChild(t),t},n.set=function(t){-1==createjs.indexOf(this._tags,t)&&(this._tags.src=null,this._tags.push(t))},n.toString=function(){return"[TagPool]"},n._createTag=function(){var t=document.createElement("audio");return t.autoplay=!1,t.preload="none",t}}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n){this.AbstractSoundInstance_constructor(t,e,i,n),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this._playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),i?this._audioSpriteStopTime=.001*(e+i):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var e=createjs.extend(t,createjs.AbstractSoundInstance);e.setMasterVolume=function(t){this._updateVolume()},e.setMasterMute=function(t){this._updateVolume()},e.toString=function(){return"[HTMLAudioSoundInstance]"},e._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},e._handleCleanUp=function(){var t=this._playbackResource;if(null!=t){t.pause(),t.loop=!1,t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{t.currentTime=this._startTime}catch(t){}createjs.HTMLAudioTagPool.set(this.src,t),this._playbackResource=null}},e._beginPlaying=function(t){return this._playbackResource=createjs.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(t)},e._handleSoundReady=function(t){if(4!==this._playbackResource.readyState){var e=this._playbackResource;return e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.preload="auto",void e.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},e._handleTagReady=function(t){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},e._pause=function(){this._playbackResource.pause()},e._resume=function(){this._playbackResource.play()},e._updateVolume=function(){if(null!=this._playbackResource){var t=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;t!=this._playbackResource.volume&&(this._playbackResource.volume=t)}},e._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},e._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(t){this._handleSetPositionSeek(null)}},e._handleSetPositionSeek=function(t){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._handleAudioSpriteLoop=function(t){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},e._handleLoop=function(t){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._setDurationFromSource=function(){this._duration=createjs.HTMLAudioTagPool.getDuration(this.src),this._playbackResource=null},createjs.HTMLAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=i._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i.MAX_INSTANCES=30,i._AUDIO_READY="canplaythrough",i._AUDIO_ENDED="ended",i._AUDIO_SEEKED="seeked",i._AUDIO_STALLED="stalled",i._TIME_UPDATE="timeupdate",i._capabilities=null,i.isSupported=function(){return i._generateCapabilities(),null!=i._capabilities},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;i._capabilities={panning:!1,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,n=createjs.Sound.EXTENSION_MAP,r=0,s=e.length;r<s;r++){var a=e[r],o=n[a]||a;i._capabilities[a]="no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)||"no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)}}},e.register=function(t){var e=createjs.HTMLAudioTagPool.get(t.src),i=this.AbstractPlugin_register(t);return i.setTag(e),i},e.removeSound=function(t){this.AbstractPlugin_removeSound(t),createjs.HTMLAudioTagPool.remove(t)},e.create=function(t,e,i){var n=this.AbstractPlugin_create(t,e,i);return n.setPlaybackResource(null),n},e.toString=function(){return"[HTMLAudioPlugin]"},e.setVolume=e.getVolume=e.setMute=null,createjs.HTMLAudioPlugin=createjs.promote(t,"AbstractPlugin")}();
/*!
* @license SoundJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2015 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
/**!
 * SoundJS FlashAudioPlugin also includes swfobject (http://code.google.com/p/swfobject/)
 */
/*!	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject=function(){function t(){if(!N){try{var t=R.getElementsByTagName("body")[0].appendChild(f("span"));t.parentNode.removeChild(t)}catch(t){return}N=!0;for(var e=I.length,i=0;i<e;i++)I[i]()}}function e(t){N?t():I[I.length]=t}function i(t){if(typeof j.addEventListener!=S)j.addEventListener("load",t,!1);else if(typeof R.addEventListener!=S)R.addEventListener("load",t,!1);else if(typeof j.attachEvent!=S)!function(t,e,i){t.attachEvent(e,i),B[B.length]=[t,e,i]}(j,"onload",t);else if("function"==typeof j.onload){var e=j.onload;j.onload=function(){e(),t()}}else j.onload=t}function n(){var t=F.length;if(t>0)for(var e=0;e<t;e++){var i=F[e].id,n=F[e].callbackFn,h={success:!1,id:i};if(X.pv[0]>0){var l=p(i);if(l)if(!g(F[e].swfVersion)||X.wk&&X.wk<312)if(F[e].expressInstall&&s()){var u={};u.data=F[e].expressInstall,u.width=l.getAttribute("width")||"0",u.height=l.getAttribute("height")||"0",l.getAttribute("class")&&(u.styleclass=l.getAttribute("class")),l.getAttribute("align")&&(u.align=l.getAttribute("align"));for(var c={},d=l.getElementsByTagName("param"),f=d.length,_=0;_<f;_++)"movie"!=d[_].getAttribute("name").toLowerCase()&&(c[d[_].getAttribute("name")]=d[_].getAttribute("value"));a(u,c,i,n)}else o(l),n&&n(h);else v(i,!0),n&&(h.success=!0,h.ref=r(i),n(h))}else if(v(i,!0),n){var m=r(i);m&&typeof m.SetVariable!=S&&(h.success=!0,h.ref=m),n(h)}}}function r(t){var e=null,i=p(t);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=S)e=i;else{var n=i.getElementsByTagName(A)[0];n&&(e=n)}return e}function s(){return!U&&g("6.0.65")&&(X.win||X.mac)&&!(X.wk&&X.wk<312)}function a(t,e,i,n){U=!0,x=n||null,T={success:!1,id:i};var r=p(i);if(r){"OBJECT"==r.nodeName?(y=h(r),b=null):(y=r,b=i),t.id=L,(typeof t.width==S||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(typeof t.height==S||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),R.title=R.title.slice(0,47)+" - Flash Player Installation";var s=X.ie&&X.win?"ActiveX":"PlugIn",a="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+s+"&MMdoctitle="+R.title;if(typeof e.flashvars!=S?e.flashvars+="&"+a:e.flashvars=a,X.ie&&X.win&&4!=r.readyState){var o=f("div");i+="SWFObjectNew",o.setAttribute("id",i),r.parentNode.insertBefore(o,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}l(t,e,i)}}function o(t){if(X.ie&&X.win&&4!=t.readyState){var e=f("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(h(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(h(t),t)}function h(t){var e=f("div");if(X.win&&X.ie)e.innerHTML=t.innerHTML;else{var i=t.getElementsByTagName(A)[0];if(i){var n=i.childNodes;if(n)for(var r=n.length,s=0;s<r;s++)1==n[s].nodeType&&"PARAM"==n[s].nodeName||8==n[s].nodeType||e.appendChild(n[s].cloneNode(!0))}}return e}function l(t,e,i){var n,r=p(i);if(X.wk&&X.wk<312)return n;if(r)if(typeof t.id==S&&(t.id=i),X.ie&&X.win){var s="";for(var a in t)t[a]!=Object.prototype[a]&&("data"==a.toLowerCase()?e.movie=t[a]:"styleclass"==a.toLowerCase()?s+=' class="'+t[a]+'"':"classid"!=a.toLowerCase()&&(s+=" "+a+'="'+t[a]+'"'));var o="";for(var h in e)e[h]!=Object.prototype[h]&&(o+='<param name="'+h+'" value="'+e[h]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+s+">"+o+"</object>",k[k.length]=t.id,n=p(t.id)}else{var l=f(A);for(var c in l.setAttribute("type",C),t)t[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?l.setAttribute("class",t[c]):"classid"!=c.toLowerCase()&&l.setAttribute(c,t[c]));for(var d in e)e[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&u(l,d,e[d]);r.parentNode.replaceChild(l,r),n=l}return n}function u(t,e,i){var n=f("param");n.setAttribute("name",e),n.setAttribute("value",i),t.appendChild(n)}function c(t){var e=p(t);e&&"OBJECT"==e.nodeName&&(X.ie&&X.win?(e.style.display="none",function(){4==e.readyState?d(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function d(t){var e=p(t);if(e){for(var i in e)"function"==typeof e[i]&&(e[i]=null);e.parentNode.removeChild(e)}}function p(t){var e=null;try{e=R.getElementById(t)}catch(t){}return e}function f(t){return R.createElement(t)}function g(t){var e=X.pv,i=t.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,e[0]>i[0]||e[0]==i[0]&&e[1]>i[1]||e[0]==i[0]&&e[1]==i[1]&&e[2]>=i[2]}function _(t,e,i,n){if(!X.ie||!X.mac){var r=R.getElementsByTagName("head")[0];if(r){var s=i&&"string"==typeof i?i:"screen";if(n&&(E=null,w=null),!E||w!=s){var a=f("style");a.setAttribute("type","text/css"),a.setAttribute("media",s),E=r.appendChild(a),X.ie&&X.win&&typeof R.styleSheets!=S&&R.styleSheets.length>0&&(E=R.styleSheets[R.styleSheets.length-1]),w=s}X.ie&&X.win?E&&typeof E.addRule==A&&E.addRule(t,e):E&&typeof R.createTextNode!=S&&E.appendChild(R.createTextNode(t+" {"+e+"}"))}}}function v(t,e){if(H){var i=e?"visible":"hidden";N&&p(t)?p(t).style.visibility=i:_("#"+t,"visibility:"+i)}}function m(t){return null!=/[\\\"<>\.;]/.exec(t)&&typeof encodeURIComponent!=S?encodeURIComponent(t):t}var y,b,x,T,E,w,S="undefined",A="object",P="Shockwave Flash",C="application/x-shockwave-flash",L="SWFObjectExprInst",O="onreadystatechange",j=window,R=document,M=navigator,D=!1,I=[function(){D?function(){var t=R.getElementsByTagName("body")[0],e=f(A);e.setAttribute("type",C);var i=t.appendChild(e);if(i){var r=0;!function(){if(typeof i.GetVariable!=S){var s=i.GetVariable("$version");s&&(s=s.split(" ")[1].split(","),X.pv=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)])}else if(r<10)return r++,void setTimeout(arguments.callee,10);t.removeChild(e),i=null,n()}()}else n()}():n()}],F=[],k=[],B=[],N=!1,U=!1,H=!0,X=function(){var t=typeof R.getElementById!=S&&typeof R.getElementsByTagName!=S&&typeof R.createElement!=S,e=M.userAgent.toLowerCase(),i=M.platform.toLowerCase(),n=/win/.test(i||e),r=/mac/.test(i||e),s=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),a=!1,o=[0,0,0],h=null;if(typeof M.plugins!=S&&typeof M.plugins[P]==A)!(h=M.plugins[P].description)||typeof M.mimeTypes!=S&&M.mimeTypes[C]&&!M.mimeTypes[C].enabledPlugin||(D=!0,a=!1,h=h.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),o[0]=parseInt(h.replace(/^(.*)\..*$/,"$1"),10),o[1]=parseInt(h.replace(/^.*\.(.*)\s.*$/,"$1"),10),o[2]=/[a-zA-Z]/.test(h)?parseInt(h.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof j.ActiveXObject!=S)try{var l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");l&&((h=l.GetVariable("$version"))&&(a=!0,h=h.split(" ")[1].split(","),o=[parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10)]))}catch(t){}return{w3:t,pv:o,wk:s,ie:a,win:n,mac:r}}();return X.w3&&((typeof R.readyState!=S&&"complete"==R.readyState||typeof R.readyState==S&&(R.getElementsByTagName("body")[0]||R.body))&&t(),N||(typeof R.addEventListener!=S&&R.addEventListener("DOMContentLoaded",t,!1),X.ie&&X.win&&(R.attachEvent(O,(function(){"complete"==R.readyState&&(R.detachEvent(O,arguments.callee),t())})),j==top&&function(){if(!N){try{R.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}t()}}()),X.wk&&function(){N||(/loaded|complete/.test(R.readyState)?t():setTimeout(arguments.callee,0))}(),i(t))),X.ie&&X.win&&window.attachEvent("onunload",(function(){for(var t=B.length,e=0;e<t;e++)B[e][0].detachEvent(B[e][1],B[e][2]);for(var i=k.length,n=0;n<i;n++)c(k[n]);for(var r in X)X[r]=null;for(var s in X=null,swfobject)swfobject[s]=null;swfobject=null})),{registerObject:function(t,e,i,n){if(X.w3&&t&&e){var r={};r.id=t,r.swfVersion=e,r.expressInstall=i,r.callbackFn=n,F[F.length]=r,v(t,!1)}else n&&n({success:!1,id:t})},getObjectById:function(t){if(X.w3)return r(t)},embedSWF:function(t,i,n,r,o,h,u,c,d,p){var f={success:!1,id:i};X.w3&&!(X.wk&&X.wk<312)&&t&&i&&n&&r&&o?(v(i,!1),e((function(){n+="",r+="";var e={};if(d&&typeof d===A)for(var _ in d)e[_]=d[_];e.data=t,e.width=n,e.height=r;var m={};if(c&&typeof c===A)for(var y in c)m[y]=c[y];if(u&&typeof u===A)for(var b in u)typeof m.flashvars!=S?m.flashvars+="&"+b+"="+u[b]:m.flashvars=b+"="+u[b];if(g(o)){var x=l(e,m,i);e.id==i&&v(i,!0),f.success=!0,f.ref=x}else{if(h&&s())return e.data=h,void a(e,m,i,p);v(i,!0)}p&&p(f)}))):p&&p(f)},switchOffAutoHideShow:function(){H=!1},ua:X,getFlashPlayerVersion:function(){return{major:X.pv[0],minor:X.pv[1],release:X.pv[2]}},hasFlashPlayerVersion:g,createSWF:function(t,e,i){return X.w3?l(t,e,i):void 0},showExpressInstall:function(t,e,i,n){X.w3&&s()&&a(t,e,i,n)},removeSWF:function(t){X.w3&&c(t)},createCSS:function(t,e,i,n){X.w3&&_(t,e,i,n)},addDomLoadEvent:e,addLoadEvent:i,getQueryParamValue:function(t){var e=R.location.search||R.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return m(e);for(var i=e.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==t)return m(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var t=p(L);t&&y&&(t.parentNode.replaceChild(y,t),b&&(v(b,!0),X.ie&&X.win&&(y.style.display="block")),x&&x(T)),U=!1}}}}();this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!1,createjs.AbstractLoader.SOUND),this.flashId=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i._flash=null,i._preloadInstances=[],i.setFlash=function(t){i._flash=t;for(var e=i._preloadInstances.length;e--;){i._preloadInstances.pop().load()}},e.load=function(){if(null!=i._flash){this.flashId=i._flash.preload(this._item.src);var t=new createjs.Event(createjs.FlashAudioPlugin._REG_FLASHID);this.dispatchEvent(t)}else i._preloadInstances.push(this)},e.handleProgress=function(t,e){this._sendProgress(t/e)},e.handleComplete=function(){this._result=this._item.src,this._sendComplete()},e.handleError=function(t){this._handleError(t)},e.destroy=function(){var t=new createjs.Event(createjs.FlashAudioPlugin._UNREG_FLASHID);this.dispatchEvent(t),this.AbstractLoader_destroy()},e.toString=function(){return"[FlashAudioLoader]"},createjs.FlashAudioLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n,r){this.AbstractSoundInstance_constructor(t,e,n,r),this.flashId=null,null==i._flash&&i._instances.push(this)}var e=createjs.extend(t,createjs.AbstractSoundInstance),i=t;i._flash=null,i._instances=[],i.setFlash=function(t){i._flash=t;for(var e=i._instances.length;e--;){i._instances.pop()._setDurationFromSource()}},e.setLoop=function(t){null!=this.flashId&&i._flash.setLoop(this.flashId,t),this._loop=t},e.toString=function(){return"[FlashAudioSoundInstance]"},e._updateVolume=function(){null!=this.flashId&&i._flash.setVolume(this.flashId,this._volume)},e._updatePan=function(){null!=this.flashId&&i._flash.setPan(this.flashId,this._pan)},e._setDurationFromSource=function(){this._duration=i._flash.getDurationBySrc(this.src)},e._interrupt=function(){null!=this.flashId&&(i._flash.interrupt(this.flashId),this.AbstractSoundInstance__interrupt())},e._handleCleanUp=function(){i._flash.stopSound(this.flashId),this._sendEvent(createjs.FlashAudioPlugin._UNREG_FLASHID),this.flashId=null},e._beginPlaying=function(t){return null!=i._flash&&(this.setPosition(t.offset),this.setLoop(t.loop),this.setVolume(t.volume),this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),this._paused=!1,this.flashId=i._flash.playSound(this.src,this._position,this._loop,this._volume,this._pan,this._startTime,this._duration),null==this.flashId?(this._playFailed(),!1):(this._muted&&this.setMute(!0),this._sendEvent(createjs.FlashAudioPlugin._REG_FLASHID),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0))},e._pause=function(){null!=this.flashId&&(this._position=this._calculateCurrentPosition(),i._flash.pauseSound(this.flashId))},e._resume=function(){null!=this.flashId&&i._flash.resumeSound(this.flashId)},e._handleStop=function(){null!=this.flashId&&i._flash.stopSound(this.flashId)},e._updateVolume=function(){var t=this._muted?0:this._volume;i._flash.setVolume(this.flashId,t)},e._calculateCurrentPosition=function(){return i._flash.getPosition(this.flashId)},e._updatePosition=function(){null!=this.flashId&&i._flash.setPosition(this.flashId,this._position)},e.handleSoundFinished=function(){this._loop=0,this._handleSoundComplete()},e.handleSoundLoop=function(){this._loop--,this._sendEvent("loop")},createjs.FlashAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.AbstractPlugin_constructor(),this.showOutput=!1,this._CONTAINER_ID="flashAudioContainer",this._WRAPPER_ID="SoundJSFlashContainer",this._container=null,this._flash=null,this.flashReady=!1,this._flashInstances={},this._flashPreloadInstances={},this._capabilities=i._capabilities,this._loaderClass=createjs.FlashAudioLoader,this._soundInstanceClass=createjs.FlashAudioSoundInstance;var t=this.wrapper=document.createElement("div");t.id=this._WRAPPER_ID,t.style.position="absolute",t.style.marginLeft="-1px",t.className=this._WRAPPER_ID,document.body.appendChild(t);var e=this._container=document.createElement("div");e.id=this._CONTAINER_ID,e.appendChild(document.createTextNode("SoundJS Flash Container")),t.appendChild(e);var n=i.swfPath;swfobject.embedSWF(n+"FlashAudioPlugin.swf",this._CONTAINER_ID,"1","1","9.0.0",null,null,{AllowScriptAccess:"always"},null,createjs.proxy(this._handleSWFReady,this))}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i._REG_FLASHID="registerflashid",i._UNREG_FLASHID="unregisterflashid",i._capabilities=null,i.swfPath="src/soundjs/flashaudio/",i.isSupported=function(){return!(createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry||createjs.BrowserDetect.isWindowsPhone)&&(i._generateCapabilities(),null!=swfobject&&swfobject.hasFlashPlayerVersion("9.0.0"))},i._generateCapabilities=function(){null==i._capabilities&&(i._capabilities={panning:!0,volume:!0,tracks:-1,mp3:!0,ogg:!1,mpeg:!0,wav:!0,m4a:!1,mp4:!1,aiff:!1,wma:!1,mid:!1})},e.register=function(t,e){var n=this.AbstractPlugin_register(t,e);return n.addEventListener(i._REG_FLASHID,createjs.proxy(this.registerPreloadInstance,this)),n.addEventListener(i._UNREG_FLASHID,createjs.proxy(this.unregisterPreloadInstance,this)),n},e.removeAllSounds=function(){this._flashInstances={},this._flashPreloadInstances={},this.AbstractPlugin_removeAllSounds()},e.create=function(t,e,n){var r=this.AbstractPlugin_create(t,e,n);return r.on(i._REG_FLASHID,this.registerSoundInstance,this),r.on(i._UNREG_FLASHID,this.unregisterSoundInstance,this),r},e.toString=function(){return"[FlashAudioPlugin]"},e._handleSWFReady=function(t){this._flash=t.ref},e._handleFlashReady=function(){this.flashReady=!0,this._loaderClass.setFlash(this._flash),this._soundInstanceClass.setFlash(this._flash),this._updateVolume()},e._updateVolume=function(){if(!this.flashReady)return!0;var t=createjs.Sound._masterMute?0:this._volume;return this._flash.setMasterVolume(t)},e.registerPreloadInstance=function(t){this._flashPreloadInstances[t.target.flashId]=t.target},e.unregisterPreloadInstance=function(t){delete this._flashPreloadInstances[t.target.flashId]},e.registerSoundInstance=function(t){this._flashInstances[t.target.flashId]=t.target},e.unregisterSoundInstance=function(t){delete this._flashInstances[t.target.flashId]},e.flashLog=function(t){try{this.showOutput&&console.log(t)}catch(t){}},e.handleSoundEvent=function(t,e){var i=this._flashInstances[t];if(null!=i){for(var n=[],r=2,s=arguments.length;r<s;r++)n.push(arguments[r]);try{0==n.length?i[e]():i[e].apply(i,n)}catch(t){}}},e.handlePreloadEvent=function(t,e){var i=this._flashPreloadInstances[t];if(null!=i){for(var n=[],r=2,s=arguments.length;r<s;r++)n.push(arguments[r]);try{0==n.length?i[e]():i[e].apply(i,n)}catch(t){}}},e.handleEvent=function(t){switch(t){case"ready":this._handleFlashReady()}},e.handleErrorEvent=function(t){},createjs.FlashAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){var t=createjs.FlashAudioPlugin=createjs.FlashAudioPlugin||{};t.version="0.6.5",t.buildDate="Fri, 07 Apr 2017 15:14:47 GMT"}(),
/*!
* @license EaselJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2013 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n)for(var r in i[(e+="_")+"constructor"]=n.constructor,n)i.hasOwnProperty(r)&&"function"==typeof n[r]&&(i[e+r]=n[r]);return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){"use strict";for(var i=0,n=t.length;n>i;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n,r=(n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return r&&this.removeEventListener(t,e,i),(r=n[t])?r.push(e):n[t]=[e],e},e.on=function(t,e,i,n,r,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,(function(t){e.call(i,t,r),n&&t.remove()}),s)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var r=n[t];if(r)for(var s=0,a=r.length;a>s;s++)if(r[s]==e){1==a?delete n[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t){if("string"==typeof t){var e=this._listeners;if(!e||!e[t])return!1;t=new createjs.Event(t)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var i=this,n=[i];i.parent;)n.push(i=i.parent);var r,s=n.length;for(r=s-1;r>=0&&!t.propagationStopped;r--)n[r]._dispatchEvent(t,1+(0==r));for(r=1;s>r&&!t.propagationStopped;r++)n[r]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n=1==e?this._captureListeners:this._listeners;if(t&&n){var r=n[t.type];if(!r||!(i=r.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,r=r.slice();for(var s=0;i>s&&!t.immediatePropagationStopped;s++){var a=r[s];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Ticker cannot be instantiated."}t.RAF_SYNCHED="synched",t.RAF="raf",t.TIMEOUT="timeout",t.useRAF=!1,t.timingMode=null,t.maxDelta=0,t.paused=!1,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._addEventListener=t.addEventListener,t.addEventListener=function(){return!t._inited&&t.init(),t._addEventListener.apply(t,arguments)},t._inited=!1,t._startTime=0,t._pausedTime=0,t._ticks=0,t._pausedTicks=0,t._interval=50,t._lastTime=0,t._times=null,t._tickTimes=null,t._timerId=null,t._raf=!0,t.setInterval=function(e){t._interval=e,t._inited&&t._setupTick()},t.getInterval=function(){return t._interval},t.setFPS=function(e){t.setInterval(1e3/e)},t.getFPS=function(){return 1e3/t._interval};try{Object.defineProperties(t,{interval:{get:t.getInterval,set:t.setInterval},framerate:{get:t.getFPS,set:t.setFPS}})}catch(t){console.log(t)}t.init=function(){t._inited||(t._inited=!0,t._times=[],t._tickTimes=[],t._startTime=t._getTime(),t._times.push(t._lastTime=0),t.interval=t._interval)},t.reset=function(){if(t._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(t._timerId)}else clearTimeout(t._timerId);t.removeAllEventListeners("tick"),t._timerId=t._times=t._tickTimes=null,t._startTime=t._lastTime=t._ticks=0,t._inited=!1},t.getMeasuredTickTime=function(e){var i=0,n=t._tickTimes;if(!n||n.length<1)return-1;e=Math.min(n.length,e||0|t.getFPS());for(var r=0;e>r;r++)i+=n[r];return i/e},t.getMeasuredFPS=function(e){var i=t._times;return!i||i.length<2?-1:(e=Math.min(i.length-1,e||0|t.getFPS()),1e3/((i[0]-i[e])/e))},t.setPaused=function(e){t.paused=e},t.getPaused=function(){return t.paused},t.getTime=function(e){return t._startTime?t._getTime()-(e?t._pausedTime:0):-1},t.getEventTime=function(e){return t._startTime?(t._lastTime||t._startTime)-(e?t._pausedTime:0):-1},t.getTicks=function(e){return t._ticks-(e?t._pausedTicks:0)},t._handleSynch=function(){t._timerId=null,t._setupTick(),t._getTime()-t._lastTime>=.97*(t._interval-1)&&t._tick()},t._handleRAF=function(){t._timerId=null,t._setupTick(),t._tick()},t._handleTimeout=function(){t._timerId=null,t._setupTick(),t._tick()},t._setupTick=function(){if(null==t._timerId){var e=t.timingMode||t.useRAF&&t.RAF_SYNCHED;if(e==t.RAF_SYNCHED||e==t.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return t._timerId=i(e==t.RAF?t._handleRAF:t._handleSynch),void(t._raf=!0)}t._raf=!1,t._timerId=setTimeout(t._handleTimeout,t._interval)}},t._tick=function(){var e=t.paused,i=t._getTime(),n=i-t._lastTime;if(t._lastTime=i,t._ticks++,e&&(t._pausedTicks++,t._pausedTime+=n),t.hasEventListener("tick")){var r=new createjs.Event("tick"),s=t.maxDelta;r.delta=s&&n>s?s:n,r.paused=e,r.time=i,r.runTime=i-t._pausedTime,t.dispatchEvent(r)}for(t._tickTimes.unshift(t._getTime()-i);t._tickTimes.length>100;)t._tickTimes.pop();for(t._times.unshift(i);t._times.length>100;)t._times.pop()};var e=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);t._getTime=function(){return(e&&e.call(performance)||(new Date).getTime())-t._startTime},createjs.Ticker=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"UID cannot be instantiated"}t._nextID=0,t.get=function(){return t._nextID++},createjs.UID=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n,r,s,a,o,h,l){this.Event_constructor(t,e,i),this.stageX=n,this.stageY=r,this.rawX=null==h?n:h,this.rawY=null==l?r:l,this.nativeEvent=s,this.pointerID=a,this.primary=!!o}var e=createjs.extend(t,createjs.Event);e._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},e._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},e._get_isTouch=function(){return-1!==this.pointerID};try{Object.defineProperties(e,{localX:{get:e._get_localX},localY:{get:e._get_localY},isTouch:{get:e._get_isTouch}})}catch(t){}e.clone=function(){return new t(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},e.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n,r,s){this.setValues(t,e,i,n,r,s)}var e=t.prototype;t.DEG_TO_RAD=Math.PI/180,t.identity=null,e.setValues=function(t,e,i,n,r,s){return this.a=null==t?1:t,this.b=e||0,this.c=i||0,this.d=null==n?1:n,this.tx=r||0,this.ty=s||0,this},e.append=function(t,e,i,n,r,s){var a=this.a,o=this.b,h=this.c,l=this.d;return(1!=t||0!=e||0!=i||1!=n)&&(this.a=a*t+h*e,this.b=o*t+l*e,this.c=a*i+h*n,this.d=o*i+l*n),this.tx=a*r+h*s+this.tx,this.ty=o*r+l*s+this.ty,this},e.prepend=function(t,e,i,n,r,s){var a=this.a,o=this.c,h=this.tx;return this.a=t*a+i*this.b,this.b=e*a+n*this.b,this.c=t*o+i*this.d,this.d=e*o+n*this.d,this.tx=t*h+i*this.ty+r,this.ty=e*h+n*this.ty+s,this},e.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.appendTransform=function(e,i,n,r,s,a,o,h,l){if(s%360)var u=s*t.DEG_TO_RAD,c=Math.cos(u),d=Math.sin(u);else c=1,d=0;return a||o?(a*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.append(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),e,i),this.append(c*n,d*n,-d*r,c*r,0,0)):this.append(c*n,d*n,-d*r,c*r,e,i),(h||l)&&(this.tx-=h*this.a+l*this.c,this.ty-=h*this.b+l*this.d),this},e.prependTransform=function(e,i,n,r,s,a,o,h,l){if(s%360)var u=s*t.DEG_TO_RAD,c=Math.cos(u),d=Math.sin(u);else c=1,d=0;return(h||l)&&(this.tx-=h,this.ty-=l),a||o?(a*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.prepend(c*n,d*n,-d*r,c*r,0,0),this.prepend(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),e,i)):this.prepend(c*n,d*n,-d*r,c*r,e,i),this},e.rotate=function(e){e*=t.DEG_TO_RAD;var i=Math.cos(e),n=Math.sin(e),r=this.a,s=this.b;return this.a=r*i+this.c*n,this.b=s*i+this.d*n,this.c=-r*n+this.c*i,this.d=-s*n+this.d*i,this},e.skew=function(e,i){return e*=t.DEG_TO_RAD,i*=t.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(e),Math.cos(e),0,0),this},e.scale=function(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this},e.translate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},e.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},e.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},e.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},e.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},e.transformPoint=function(t,e,i){return(i=i||{}).x=t*this.a+e*this.c+this.tx,i.y=t*this.b+e*this.d+this.ty,i},e.decompose=function(e){null==e&&(e={}),e.x=this.tx,e.y=this.ty,e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),n=Math.atan2(this.b,this.a);return 1e-5>Math.abs(1-i/n)?(e.rotation=n/t.DEG_TO_RAD,this.a<0&&this.d>=0&&(e.rotation+=e.rotation<=0?180:-180),e.skewX=e.skewY=0):(e.skewX=i/t.DEG_TO_RAD,e.skewY=n/t.DEG_TO_RAD),e},e.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},e.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},t.identity=new t,createjs.Matrix2D=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n,r){this.setValues(t,e,i,n,r)}var e=t.prototype;e.setValues=function(t,e,i,n,r){return this.visible=null==t||!!t,this.alpha=null==e?1:e,this.shadow=i,this.compositeOperation=i,this.matrix=r||this.matrix&&this.matrix.identity()||new createjs.Matrix2D,this},e.append=function(t,e,i,n,r){return this.alpha*=e,this.shadow=i||this.shadow,this.compositeOperation=n||this.compositeOperation,this.visible=this.visible&&t,r&&this.matrix.appendMatrix(r),this},e.prepend=function(t,e,i,n,r){return this.alpha*=e,this.shadow=this.shadow||i,this.compositeOperation=this.compositeOperation||n,this.visible=this.visible&&t,r&&this.matrix.prependMatrix(r),this},e.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},e.clone=function(){return new t(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},createjs.DisplayProps=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.setValues(t,e)}var e=t.prototype;e.setValues=function(t,e){return this.x=t||0,this.y=e||0,this},e.copy=function(t){return this.x=t.x,this.y=t.y,this},e.clone=function(){return new t(this.x,this.y)},e.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n){this.setValues(t,e,i,n)}var e=t.prototype;e.setValues=function(t,e,i,n){return this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this},e.extend=function(t,e,i,n){return n=n||0,t+(i=i||0)>this.x+this.width&&(this.width=t+i-this.x),e+n>this.y+this.height&&(this.height=e+n-this.y),t<this.x&&(this.width+=this.x-t,this.x=t),e<this.y&&(this.height+=this.y-e,this.y=e),this},e.pad=function(t,e,i,n){return this.x-=t,this.y-=e,this.width+=t+i,this.height+=e+n,this},e.copy=function(t){return this.setValues(t.x,t.y,t.width,t.height)},e.contains=function(t,e,i,n){return t.hasOwnProperty("x")&&(e=t.y,i=t.width,n=t.height,t=t.x),i=i||0,n=n||0,t>=this.x&&t+i<=this.x+this.width&&e>=this.y&&e+n<=this.y+this.height},e.union=function(t){return this.clone().extend(t.x,t.y,t.width,t.height)},e.intersection=function(e){var i=e.x,n=e.y,r=i+e.width,s=n+e.height;return this.x>i&&(i=this.x),this.y>n&&(n=this.y),this.x+this.width<r&&(r=this.x+this.width),this.y+this.height<s&&(s=this.y+this.height),i>=r||n>=s?null:new t(i,n,r-i,s-n)},e.intersects=function(t){return t.x<=this.x+this.width&&this.x<=t.x+t.width&&t.y<=this.y+this.height&&this.y<=t.y+t.height},e.isEmpty=function(){return this.width<=0||this.height<=0},e.clone=function(){return new t(this.x,this.y,this.width,this.height)},e.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i){this.x=t||0,this.y=e||0,this.radius=i||0},e=t.prototype;e.clone=function(){return new t(this.x,this.y,this.radius)},e.contains=function(t,e){if(this.radius<=0)return!1;t.hasOwnProperty("x")&&(e=t.y,t=t.x);var i=this.x-t,n=this.y-e;return this.radius*this.radius>=(i*=i)+(n*=n)},t.constructor=t,createjs.Circle=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0},e=t.prototype;e.clone=function(){return new t(this.x,this.y,this.width,this.height)},e.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t.hasOwnProperty("x")&&(e=t.y,t=t.x);var i=(t-this.x)/this.width-.5,n=(e-this.y)/this.height-.5;return.25>(i*=i)+(n*=n)},e.getBounds=function(){return new createjs.Rectangle(this.x,this.y,this.width,this.height)},t.constructor=t,createjs.Ellipse=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){if(t instanceof Array||(t=Array.prototype.slice.call(arguments)),"number"==typeof t[0]){for(var e=[],i=0,n=t.length;n>i;i+=2)e.push(new createjs.Point(t[i],t[i+1]));t=e}this.points=t},e=t.prototype;e.clone=function(){for(var e=[],i=0;i<this.points.length;i++)e.push(this.points[i].clone());return new t(e)},e.contains=function(t,e){t.hasOwnProperty("x")&&(e=t.y,t=t.x);for(var i=!1,n=this.points,r=0,s=n.length,a=n.length-1;s>r;a=r++){var o=n[r],h=n[a],l=o.x,u=o.y,c=h.x,d=h.y;u>e!=d>e&&(c-l)*(e-u)/(d-u)+l>t&&(i=!i)}return i},t.constructor=t,createjs.Polygon=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=180/Math.PI,e=function(t,e,i,n,r){for(this.x=t||0,this.y=e||0,this.radius=i||0,this.startAngle=n||0;this.startAngle<0;)this.startAngle+=360;this.endAngle=r||0,this.endAngle<this.startAngle&&(this.endAngle+=360)},i=e.prototype;i.clone=function(){return new e(this.x,this.y,this.radius,this.startAngle,this.endAngle)},i.contains=function(e,i){if(this.radius<=0)return!1;e.hasOwnProperty("x")&&(i=e.y,e=e.x);var n=this.x-e,r=this.y-i;if((n*=n)+(r*=r)>this.radius*this.radius)return!1;for(var s=Math.atan2(i-this.y,e-this.x)*t;s<this.startAngle;)s+=360;return s>=this.startAngle&&s<=this.endAngle},e.constructor=e,createjs.Sector=e}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n,r,s,a){t.addEventListener&&(this.target=t,this.overLabel=null==i?"over":i,this.outLabel=null==e?"out":e,this.downLabel=null==n?"down":n,this.play=r,this._isPressed=!1,this._isOver=!1,this._enabled=!1,t.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),s&&(a&&(s.actionsEnabled=!1,s.gotoAndStop&&s.gotoAndStop(a)),t.hitArea=s))}var e=t.prototype;e.setEnabled=function(t){if(t!=this._enabled){var e=this.target;this._enabled=t,t?(e.cursor="pointer",e.addEventListener("rollover",this),e.addEventListener("rollout",this),e.addEventListener("mousedown",this),e.addEventListener("pressup",this)):(e.cursor=null,e.removeEventListener("rollover",this),e.removeEventListener("rollout",this),e.removeEventListener("mousedown",this),e.removeEventListener("pressup",this))}},e.getEnabled=function(){return this._enabled};try{Object.defineProperties(e,{enabled:{get:e.getEnabled,set:e.setEnabled}})}catch(t){}e.toString=function(){return"[ButtonHelper]"},e.handleEvent=function(t){var e,i=this.target,n=t.type;"mousedown"==n?(this._isPressed=!0,e=this.downLabel):"pressup"==n?(this._isPressed=!1,e=this._isOver?this.overLabel:this.outLabel):"rollover"==n?(this._isOver=!0,e=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,e=this._isPressed?this.overLabel:this.outLabel),this.play?i.gotoAndPlay&&i.gotoAndPlay(e):i.gotoAndStop&&i.gotoAndStop(e)},createjs.ButtonHelper=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n){this.color=t||"black",this.offsetX=e||0,this.offsetY=i||0,this.blur=n||0}var e=t.prototype;t.identity=new t("transparent",0,0,0),e.toString=function(){return"[Shadow]"},e.clone=function(){return new t(this.color,this.offsetX,this.offsetY,this.blur)},createjs.Shadow=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(t)}var e=createjs.extend(t,createjs.EventDispatcher);e.getAnimations=function(){return this._animations.slice()};try{Object.defineProperties(e,{animations:{get:e.getAnimations}})}catch(t){}e.getNumFrames=function(t){if(null==t)return this._frames?this._frames.length:this._numFrames||0;var e=this._data[t];return null==e?0:e.frames.length},e.getAnimation=function(t){return this._data[t]},e.getFrame=function(t){var e;return this._frames&&(e=this._frames[t])?e:null},e.getFrameBounds=function(t,e){var i=this.getFrame(t);return i?(e||new createjs.Rectangle).setValues(-i.regX,-i.regY,i.rect.width,i.rect.height):null},e.toString=function(){return"[SpriteSheet]"},e.clone=function(){throw"SpriteSheet cannot be cloned."},e._parseData=function(t){var e,i,n,r;if(null!=t){if(this.framerate=t.framerate||0,t.images&&(i=t.images.length)>0)for(r=this._images=[],e=0;i>e;e++){var s=t.images[e];if("string"==typeof s){var a=s;(s=document.createElement("img")).src=a}r.push(s),s.getContext||s.complete||(this._loadCount++,this.complete=!1,function(t){s.onload=function(){t._handleImageLoad()}}(this))}if(null==t.frames);else if(t.frames instanceof Array)for(this._frames=[],e=0,i=(r=t.frames).length;i>e;e++){var o=r[e];this._frames.push({image:this._images[o[4]?o[4]:0],rect:new createjs.Rectangle(o[0],o[1],o[2],o[3]),regX:o[5]||0,regY:o[6]||0})}else n=t.frames,this._frameWidth=n.width,this._frameHeight=n.height,this._regX=n.regX||0,this._regY=n.regY||0,this._spacing=n.spacing||0,this._margin=n.margin||0,this._numFrames=n.count,0==this._loadCount&&this._calculateFrames();var h;if(this._animations=[],null!=(n=t.animations))for(h in this._data={},n){var l={name:h},u=n[h];if("number"==typeof u)r=l.frames=[u];else if(u instanceof Array)if(1==u.length)l.frames=[u[0]];else for(l.speed=u[3],l.next=u[2],r=l.frames=[],e=u[0];e<=u[1];e++)r.push(e);else{l.speed=u.speed,l.next=u.next;var c=u.frames;r=l.frames="number"==typeof c?[c]:c.slice(0)}(!0===l.next||void 0===l.next)&&(l.next=h),(!1===l.next||r.length<2&&l.next==h)&&(l.next=null),l.speed||(l.speed=1),this._animations.push(h),this._data[h]=l}}},e._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},e._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];var t=this._numFrames||1e5,e=0,i=this._frameWidth,n=this._frameHeight,r=this._spacing,s=this._margin;t:for(var a=0,o=this._images;a<o.length;a++)for(var h=o[a],l=h.width,u=h.height,c=s;u-s-n>=c;){for(var d=s;l-s-i>=d;){if(e>=t)break t;e++,this._frames.push({image:h,rect:new createjs.Rectangle(d,c,i,n),regX:this._regX,regY:this._regY}),d+=i+r}c+=n+r}this._numFrames=e}},createjs.SpriteSheet=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var e=t.prototype,i=t;t.getRGB=function(t,e,i,n){return null!=t&&null==i&&(n=e,i=255&t,e=t>>8&255,t=t>>16&255),null==n?"rgb("+t+","+e+","+i+")":"rgba("+t+","+e+","+i+","+n+")"},t.getHSL=function(t,e,i,n){return null==n?"hsl("+t%360+","+e+"%,"+i+"%)":"hsla("+t%360+","+e+"%,"+i+"%,"+n+")"},t.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},t.STROKE_CAPS_MAP=["butt","round","square"],t.STROKE_JOINTS_MAP=["miter","round","bevel"];var n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");n.getContext&&(t._ctx=n.getContext("2d"),n.width=n.height=1),e.getInstructions=function(){return this._updateInstructions(),this._instructions};try{Object.defineProperties(e,{instructions:{get:e.getInstructions}})}catch(t){}e.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},e.draw=function(t,e){this._updateInstructions();for(var i=this._instructions,n=this._storeIndex,r=i.length;r>n;n++)i[n].exec(t,e)},e.drawAsPath=function(t){this._updateInstructions();for(var e,i=this._instructions,n=this._storeIndex,r=i.length;r>n;n++)!1!==(e=i[n]).path&&e.exec(t)},e.moveTo=function(t,e){return this.append(new i.MoveTo(t,e),!0)},e.lineTo=function(t,e){return this.append(new i.LineTo(t,e))},e.arcTo=function(t,e,n,r,s){return this.append(new i.ArcTo(t,e,n,r,s))},e.arc=function(t,e,n,r,s,a){return this.append(new i.Arc(t,e,n,r,s,a))},e.quadraticCurveTo=function(t,e,n,r){return this.append(new i.QuadraticCurveTo(t,e,n,r))},e.bezierCurveTo=function(t,e,n,r,s,a){return this.append(new i.BezierCurveTo(t,e,n,r,s,a))},e.rect=function(t,e,n,r){return this.append(new i.Rect(t,e,n,r))},e.closePath=function(){return this._activeInstructions.length?this.append(new i.ClosePath):this},e.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._stroke=this._fill=this._strokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},e.beginFill=function(t){return this._setFill(t?new i.Fill(t):null)},e.beginLinearGradientFill=function(t,e,n,r,s,a){return this._setFill((new i.Fill).linearGradient(t,e,n,r,s,a))},e.beginRadialGradientFill=function(t,e,n,r,s,a,o,h){return this._setFill((new i.Fill).radialGradient(t,e,n,r,s,a,o,h))},e.beginBitmapFill=function(t,e,n){return this._setFill(new i.Fill(null,n).bitmap(t,e))},e.endFill=function(){return this.beginFill()},e.setStrokeStyle=function(t,e,n,r,s){return this._updateInstructions(!0),this._strokeStyle=this.command=new i.StrokeStyle(t,e,n,r,s),this._stroke&&(this._stroke.ignoreScale=s),this._strokeIgnoreScale=s,this},e.setStrokeDash=function(t,e){return this._updateInstructions(!0),this._strokeDash=this.command=new i.StrokeDash(t,e),this},e.beginStroke=function(t){return this._setStroke(t?new i.Stroke(t):null)},e.beginLinearGradientStroke=function(t,e,n,r,s,a){return this._setStroke((new i.Stroke).linearGradient(t,e,n,r,s,a))},e.beginRadialGradientStroke=function(t,e,n,r,s,a,o,h){return this._setStroke((new i.Stroke).radialGradient(t,e,n,r,s,a,o,h))},e.beginBitmapStroke=function(t,e){return this._setStroke((new i.Stroke).bitmap(t,e))},e.endStroke=function(){return this.beginStroke()},e.curveTo=e.quadraticCurveTo,e.drawRect=e.rect,e.drawRoundRect=function(t,e,i,n,r){return this.drawRoundRectComplex(t,e,i,n,r,r,r,r)},e.drawRoundRectComplex=function(t,e,n,r,s,a,o,h){return this.append(new i.RoundRect(t,e,n,r,s,a,o,h))},e.drawCircle=function(t,e,n){return this.append(new i.Circle(t,e,n))},e.drawEllipse=function(t,e,n,r){return this.append(new i.Ellipse(t,e,n,r))},e.drawPolyStar=function(t,e,n,r,s,a){return this.append(new i.PolyStar(t,e,n,r,s,a))},e.append=function(t,e){return this._activeInstructions.push(t),this.command=t,e||(this._dirty=!0),this},e.decodePath=function(e){for(var i=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],n=[2,2,4,6,0],r=0,s=e.length,a=[],o=0,h=0,l=t.BASE_64;s>r;){var u=e.charAt(r),c=l[u],d=c>>3,p=i[d];if(!p||3&c)throw"bad path data (@"+r+"): "+u;var f=n[d];d||(o=h=0),a.length=0,r++;for(var g=2+(c>>2&1),_=0;f>_;_++){var v=l[e.charAt(r)],m=v>>5?-1:1;v=(31&v)<<6|l[e.charAt(r+1)],3==g&&(v=v<<6|l[e.charAt(r+2)]),v=m*v/10,_%2?o=v+=o:h=v+=h,a[_]=v,r+=g}p.apply(this,a)}return this},e.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},e.unstore=function(){return this._storeIndex=0,this},e.clone=function(){var e=new t;return e.command=this.command,e._stroke=this._stroke,e._strokeStyle=this._strokeStyle,e._strokeDash=this._strokeDash,e._strokeIgnoreScale=this._strokeIgnoreScale,e._fill=this._fill,e._instructions=this._instructions.slice(),e._commitIndex=this._commitIndex,e._activeInstructions=this._activeInstructions.slice(),e._dirty=this._dirty,e._storeIndex=this._storeIndex,e},e.toString=function(){return"[Graphics]"},e.mt=e.moveTo,e.lt=e.lineTo,e.at=e.arcTo,e.bt=e.bezierCurveTo,e.qt=e.quadraticCurveTo,e.a=e.arc,e.r=e.rect,e.cp=e.closePath,e.c=e.clear,e.f=e.beginFill,e.lf=e.beginLinearGradientFill,e.rf=e.beginRadialGradientFill,e.bf=e.beginBitmapFill,e.ef=e.endFill,e.ss=e.setStrokeStyle,e.sd=e.setStrokeDash,e.s=e.beginStroke,e.ls=e.beginLinearGradientStroke,e.rs=e.beginRadialGradientStroke,e.bs=e.beginBitmapStroke,e.es=e.endStroke,e.dr=e.drawRect,e.rr=e.drawRoundRect,e.rc=e.drawRoundRectComplex,e.dc=e.drawCircle,e.de=e.drawEllipse,e.dp=e.drawPolyStar,e.p=e.decodePath,e._updateInstructions=function(e){var i=this._instructions,n=this._activeInstructions,r=this._commitIndex;if(this._dirty&&n.length){i.length=r,i.push(t.beginCmd);var s=n.length,a=i.length;i.length=a+s;for(var o=0;s>o;o++)i[o+a]=n[o];this._fill&&i.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&(this._oldStrokeDash=this._strokeDash,i.push(this._strokeDash)),this._strokeStyle!==this._oldStrokeStyle&&(this._oldStrokeStyle=this._strokeStyle,i.push(this._strokeStyle)),i.push(this._stroke)),this._dirty=!1}e&&(n.length=0,this._commitIndex=i.length)},e._setFill=function(t){return this._updateInstructions(!0),this.command=this._fill=t,this},e._setStroke=function(t){return this._updateInstructions(!0),(this.command=this._stroke=t)&&(t.ignoreScale=this._strokeIgnoreScale),this},(i.LineTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.lineTo(this.x,this.y)},(i.MoveTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.moveTo(this.x,this.y)},(i.ArcTo=function(t,e,i,n,r){this.x1=t,this.y1=e,this.x2=i,this.y2=n,this.radius=r}).prototype.exec=function(t){t.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(i.Arc=function(t,e,i,n,r,s){this.x=t,this.y=e,this.radius=i,this.startAngle=n,this.endAngle=r,this.anticlockwise=!!s}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(i.QuadraticCurveTo=function(t,e,i,n){this.cpx=t,this.cpy=e,this.x=i,this.y=n}).prototype.exec=function(t){t.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(i.BezierCurveTo=function(t,e,i,n,r,s){this.cp1x=t,this.cp1y=e,this.cp2x=i,this.cp2y=n,this.x=r,this.y=s}).prototype.exec=function(t){t.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(i.Rect=function(t,e,i,n){this.x=t,this.y=e,this.w=i,this.h=n}).prototype.exec=function(t){t.rect(this.x,this.y,this.w,this.h)},(i.ClosePath=function(){}).prototype.exec=function(t){t.closePath()},(i.BeginPath=function(){}).prototype.exec=function(t){t.beginPath()},(e=(i.Fill=function(t,e){this.style=t,this.matrix=e}).prototype).exec=function(t){if(this.style){t.fillStyle=this.style;var e=this.matrix;e&&(t.save(),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),t.fill(),e&&t.restore()}},e.linearGradient=function(e,i,n,r,s,a){for(var o=this.style=t._ctx.createLinearGradient(n,r,s,a),h=0,l=e.length;l>h;h++)o.addColorStop(i[h],e[h]);return o.props={colors:e,ratios:i,x0:n,y0:r,x1:s,y1:a,type:"linear"},this},e.radialGradient=function(e,i,n,r,s,a,o,h){for(var l=this.style=t._ctx.createRadialGradient(n,r,s,a,o,h),u=0,c=e.length;c>u;u++)l.addColorStop(i[u],e[u]);return l.props={colors:e,ratios:i,x0:n,y0:r,r0:s,x1:a,y1:o,r1:h,type:"radial"},this},e.bitmap=function(e,i){return(this.style=t._ctx.createPattern(e,i||"")).props={image:e,repetition:i,type:"bitmap"},this},e.path=!1,(e=(i.Stroke=function(t,e){this.style=t,this.ignoreScale=e}).prototype).exec=function(t){this.style&&(t.strokeStyle=this.style,this.ignoreScale&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.stroke(),this.ignoreScale&&t.restore())},e.linearGradient=i.Fill.prototype.linearGradient,e.radialGradient=i.Fill.prototype.radialGradient,e.bitmap=i.Fill.prototype.bitmap,e.path=!1,(e=(i.StrokeStyle=function(t,e,i,n){this.width=t,this.caps=e,this.joints=i,this.miterLimit=n}).prototype).exec=function(e){e.lineWidth=null==this.width?"1":this.width,e.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:t.STROKE_CAPS_MAP[this.caps],e.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:t.STROKE_JOINTS_MAP[this.joints],e.miterLimit=null==this.miterLimit?"10":this.miterLimit},e.path=!1,(i.StrokeDash=function(t,e){this.segments=t,this.offset=e||0}).prototype.exec=function(t){t.setLineDash&&(t.setLineDash(this.segments||i.StrokeDash.EMPTY_SEGMENTS),t.lineDashOffset=this.offset||0)},i.StrokeDash.EMPTY_SEGMENTS=[],(i.RoundRect=function(t,e,i,n,r,s,a,o){this.x=t,this.y=e,this.w=i,this.h=n,this.radiusTL=r,this.radiusTR=s,this.radiusBR=a,this.radiusBL=o}).prototype.exec=function(t){var e=(l>h?h:l)/2,i=0,n=0,r=0,s=0,a=this.x,o=this.y,h=this.w,l=this.h,u=this.radiusTL,c=this.radiusTR,d=this.radiusBR,p=this.radiusBL;0>u&&(u*=i=-1),u>e&&(u=e),0>c&&(c*=n=-1),c>e&&(c=e),0>d&&(d*=r=-1),d>e&&(d=e),0>p&&(p*=s=-1),p>e&&(p=e),t.moveTo(a+h-c,o),t.arcTo(a+h+c*n,o-c*n,a+h,o+c,c),t.lineTo(a+h,o+l-d),t.arcTo(a+h+d*r,o+l+d*r,a+h-d,o+l,d),t.lineTo(a+p,o+l),t.arcTo(a-p*s,o+l+p*s,a,o+l-p,p),t.lineTo(a,o+u),t.arcTo(a-u*i,o-u*i,a+u,o,u),t.closePath()},(i.Circle=function(t,e,i){this.x=t,this.y=e,this.radius=i}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,0,2*Math.PI)},(i.Ellipse=function(t,e,i,n){this.x=t,this.y=e,this.w=i,this.h=n}).prototype.exec=function(t){var e=this.x,i=this.y,n=this.w,r=this.h,s=.5522848,a=n/2*s,o=r/2*s,h=e+n,l=i+r,u=e+n/2,c=i+r/2;t.moveTo(e,c),t.bezierCurveTo(e,c-o,u-a,i,u,i),t.bezierCurveTo(u+a,i,h,c-o,h,c),t.bezierCurveTo(h,c+o,u+a,l,u,l),t.bezierCurveTo(u-a,l,e,c+o,e,c)},(i.PolyStar=function(t,e,i,n,r,s){this.x=t,this.y=e,this.radius=i,this.sides=n,this.pointSize=r,this.angle=s}).prototype.exec=function(t){var e=this.x,i=this.y,n=this.radius,r=(this.angle||0)/180*Math.PI,s=this.sides,a=1-(this.pointSize||0),o=Math.PI/s;t.moveTo(e+Math.cos(r)*n,i+Math.sin(r)*n);for(var h=0;s>h;h++)r+=o,1!=a&&t.lineTo(e+Math.cos(r)*n*a,i+Math.sin(r)*n*a),r+=o,t.lineTo(e+Math.cos(r)*n,i+Math.sin(r)*n);t.closePath()},t.beginCmd=new i.BeginPath,createjs.Graphics=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.cacheID=0,this.id=createjs.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.hitShape=null,this.cursor=null,this._cacheOffsetX=0,this._cacheOffsetY=0,this._filterOffsetX=0,this._filterOffsetY=0,this._cacheScale=1,this._cacheDataURLID=0,this._cacheDataURL=null,this._props=new createjs.DisplayProps,this._rectangle=new createjs.Rectangle,this._bounds=null}var e=createjs.extend(t,createjs.EventDispatcher);t._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],t.suppressCrossDomainErrors=!1,t._snapToPixelEnabled=!1;var i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(t._hitTestCanvas=i,t._hitTestContext=i.getContext("2d"),i.width=i.height=1),t._nextCacheID=1,e.getStage=function(){for(var t=this,e=createjs.Stage;t.parent;)t=t.parent;return t instanceof e?t:null};try{Object.defineProperties(e,{stage:{get:e.getStage}})}catch(t){}e.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},e.draw=function(t,e){var i=this.cacheCanvas;if(e||!i)return!1;var n=this._cacheScale;return t.drawImage(i,this._cacheOffsetX+this._filterOffsetX,this._cacheOffsetY+this._filterOffsetY,i.width/n,i.height/n),!0},e.updateContext=function(e){var i=this,n=i.mask,r=i._props.matrix;n&&n.graphics&&!n.graphics.isEmpty()&&(n.getMatrix(r),e.transform(r.a,r.b,r.c,r.d,r.tx,r.ty),n.graphics.drawAsPath(e),e.clip(),r.invert(),e.transform(r.a,r.b,r.c,r.d,r.tx,r.ty)),this.getMatrix(r);var s=r.tx,a=r.ty;t._snapToPixelEnabled&&i.snapToPixel&&(s=s+(0>s?-.5:.5)|0,a=a+(0>a?-.5:.5)|0),e.transform(r.a,r.b,r.c,r.d,s,a),e.globalAlpha*=i.alpha,i.compositeOperation&&(e.globalCompositeOperation=i.compositeOperation),i.shadow&&this._applyShadow(e,i.shadow)},e.cache=function(t,e,i,n,r){r=r||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this._cacheWidth=i,this._cacheHeight=n,this._cacheOffsetX=t,this._cacheOffsetY=e,this._cacheScale=r,this.updateCache()},e.updateCache=function(e){var i=this.cacheCanvas;if(!i)throw"cache() must be called before updateCache()";var n=this._cacheScale,r=this._cacheOffsetX*n,s=this._cacheOffsetY*n,a=this._cacheWidth,o=this._cacheHeight,h=i.getContext("2d"),l=this._getFilterBounds();r+=this._filterOffsetX=l.x,s+=this._filterOffsetY=l.y,a=Math.ceil(a*n)+l.width,o=Math.ceil(o*n)+l.height,a!=i.width||o!=i.height?(i.width=a,i.height=o):e||h.clearRect(0,0,a+1,o+1),h.save(),h.globalCompositeOperation=e,h.setTransform(n,0,0,n,-r,-s),this.draw(h,!0),this._applyFilters(),h.restore(),this.cacheID=t._nextCacheID++},e.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=this._filterOffsetX=this._filterOffsetY=0,this._cacheScale=1},e.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},e.localToGlobal=function(t,e,i){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(t,e,i||new createjs.Point)},e.globalToLocal=function(t,e,i){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(t,e,i||new createjs.Point)},e.localToLocal=function(t,e,i,n){return n=this.localToGlobal(t,e,n),i.globalToLocal(n.x,n.y,n)},e.setTransform=function(t,e,i,n,r,s,a,o,h){return this.x=t||0,this.y=e||0,this.scaleX=null==i?1:i,this.scaleY=null==n?1:n,this.rotation=r||0,this.skewX=s||0,this.skewY=a||0,this.regX=o||0,this.regY=h||0,this},e.getMatrix=function(t){var e=this,i=t&&t.identity()||new createjs.Matrix2D;return e.transformMatrix?i.copy(e.transformMatrix):i.appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY)},e.getConcatenatedMatrix=function(t){for(var e=this,i=this.getMatrix(t);e=e.parent;)i.prependMatrix(e.getMatrix(e._props.matrix));return i},e.getConcatenatedDisplayProps=function(t){t=t?t.identity():new createjs.DisplayProps;var e=this,i=e.getMatrix(t.matrix);do{t.prepend(e.visible,e.alpha,e.shadow,e.compositeOperation),e!=this&&i.prependMatrix(e.getMatrix(e._props.matrix))}while(e=e.parent);return t},e.hitTest=function(e,i){if(this.hitShape)return this.hitShape.contains(e,i);var n=t._hitTestContext;n.setTransform(1,0,0,1,-e,-i),this.draw(n);var r=this._testHit(n);return n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,2,2),r},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var t=this.cacheCanvas;if(t){var e=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,t.width/e,t.height/e)}return null},e.getTransformedBounds=function(){return this._getBounds()},e.setBounds=function(t,e,i,n){null==t&&(this._bounds=t),this._bounds=(this._bounds||new createjs.Rectangle).setValues(t,e,i,n)},e.clone=function(){return this._cloneProps(new t)},e.toString=function(){return"[DisplayObject (name="+this.name+")]"},e._cloneProps=function(t){return t.alpha=this.alpha,t.mouseEnabled=this.mouseEnabled,t.tickEnabled=this.tickEnabled,t.name=this.name,t.regX=this.regX,t.regY=this.regY,t.rotation=this.rotation,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.shadow=this.shadow,t.skewX=this.skewX,t.skewY=this.skewY,t.visible=this.visible,t.x=this.x,t.y=this.y,t.compositeOperation=this.compositeOperation,t.snapToPixel=this.snapToPixel,t.filters=null==this.filters?null:this.filters.slice(0),t.mask=this.mask,t.hitArea=this.hitArea,t.cursor=this.cursor,t._bounds=this._bounds,t},e._applyShadow=function(t,e){e=e||Shadow.identity,t.shadowColor=e.color,t.shadowOffsetX=e.offsetX,t.shadowOffsetY=e.offsetY,t.shadowBlur=e.blur},e._tick=function(t){var e=this._listeners;e&&e.tick&&(t.target=null,t.propagationStopped=t.immediatePropagationStopped=!1,this.dispatchEvent(t))},e._testHit=function(e){try{var i=e.getImageData(0,0,1,1).data[3]>1}catch(e){if(!t.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return i},e._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var t=this.filters.length,e=this.cacheCanvas.getContext("2d"),i=this.cacheCanvas.width,n=this.cacheCanvas.height,r=0;t>r;r++)this.filters[r].applyFilter(e,0,0,i,n)},e._getFilterBounds=function(){var t,e=this.filters,i=this._rectangle.setValues(0,0,0,0);if(!e||!(t=e.length))return i;for(var n=0;t>n;n++){var r=this.filters[n];r.getBounds&&r.getBounds(i)}return i},e._getBounds=function(t,e){return this._transformBounds(this.getBounds(),t,e)},e._transformBounds=function(t,e,i){if(!t)return t;var n=t.x,r=t.y,s=t.width,a=t.height,o=this._props.matrix;o=i?o.identity():this.getMatrix(o),(n||r)&&o.appendTransform(0,0,1,1,0,0,0,-n,-r),e&&o.prependMatrix(e);var h=s*o.a,l=s*o.b,u=a*o.c,c=a*o.d,d=o.tx,p=o.ty,f=d,g=d,_=p,v=p;return(n=h+d)<f?f=n:n>g&&(g=n),(n=h+u+d)<f?f=n:n>g&&(g=n),(n=u+d)<f?f=n:n>g&&(g=n),(r=l+p)<_?_=r:r>v&&(v=r),(r=l+c+p)<_?_=r:r>v&&(v=r),(r=c+p)<_?_=r:r>v&&(v=r),t.setValues(f,_,g-f,v-_)},e._hasMouseEventListener=function(){for(var e=t._MOUSE_EVENTS,i=0,n=e.length;n>i;i++)if(this.hasEventListener(e[i]))return!0;return!!this.cursor},createjs.DisplayObject=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var e=createjs.extend(t,createjs.DisplayObject);e.getNumChildren=function(){return this.children.length};try{Object.defineProperties(e,{numChildren:{get:e.getNumChildren}})}catch(t){}e.initialize=t,e.isVisible=function(){var t=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;for(var i=this.children.slice(),n=0,r=i.length;r>n;n++){var s=i[n];s.isVisible()&&(t.save(),s.updateContext(t),s.draw(t),t.restore())}return!0},e.addChild=function(t){if(null==t)return t;var e=arguments.length;if(e>1){for(var i=0;e>i;i++)this.addChild(arguments[i]);return arguments[e-1]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),t.dispatchEvent("added"),t},e.addChildAt=function(t,e){var i=arguments.length,n=arguments[i-1];if(0>n||n>this.children.length)return arguments[i-2];if(i>2){for(var r=0;i-1>r;r++)this.addChildAt(arguments[r],n+r);return arguments[i-2]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),t.dispatchEvent("added"),t},e.removeChild=function(t){var e=arguments.length;if(e>1){for(var i=!0,n=0;e>n;n++)i=i&&this.removeChild(arguments[n]);return i}return this.removeChildAt(createjs.indexOf(this.children,t))},e.removeChildAt=function(t){var e=arguments.length;if(e>1){for(var i=[],n=0;e>n;n++)i[n]=arguments[n];i.sort((function(t,e){return e-t}));var r=!0;for(n=0;e>n;n++)r=r&&this.removeChildAt(i[n]);return r}if(0>t||t>this.children.length-1)return!1;var s=this.children[t];return s&&(s.parent=null),this.children.splice(t,1),s.dispatchEvent("removed"),!0},e.removeAllChildren=function(t){for(var e=this.children;e.length;)t&&e[0].removeAllChildren&&e[0].removeAllChildren(!0),this.removeChildAt(0)},e.getChildAt=function(t){return this.children[t]},e.getChildByName=function(t){for(var e=this.children,i=0,n=e.length;n>i;i++)if(e[i].name==t)return e[i];return null},e.sortChildren=function(t){this.children.sort(t)},e.getChildIndex=function(t){return createjs.indexOf(this.children,t)},e.swapChildrenAt=function(t,e){var i=this.children,n=i[t],r=i[e];n&&r&&(i[t]=r,i[e]=n)},e.swapChildren=function(t,e){for(var i,n,r=this.children,s=0,a=r.length;a>s&&(r[s]==t&&(i=s),r[s]==e&&(n=s),null==i||null==n);s++);s!=a&&(r[i]=e,r[n]=t)},e.setChildIndex=function(t,e){var i=this.children,n=i.length;if(!(t.parent!=this||0>e||e>=n)){for(var r=0;n>r&&i[r]!=t;r++);r!=n&&r!=e&&(i.splice(r,1),i.splice(e,0,t))}},e.contains=function(t){for(;t;){if(t==this)return!0;t=t.parent}return!1},e.hitTest=function(t,e){return null!=this.getObjectUnderPoint(t,e)},e.getObjectsUnderPoint=function(t,e,i){var n=[],r=this.localToGlobal(t,e);return this._getObjectsUnderPoint(r.x,r.y,n,i>0,1==i),n},e.getObjectUnderPoint=function(t,e,i){var n=this.localToGlobal(t,e);return this._getObjectsUnderPoint(n.x,n.y,null,i>0,1==i)},e.getBounds=function(){return this._getBounds(null,!0)},e.getTransformedBounds=function(){return this._getBounds()},e.clone=function(e){var i=this._cloneProps(new t);return e&&this._cloneChildren(i),i},e.toString=function(){return"[Container (name="+this.name+")]"},e._tick=function(t){if(this.tickChildren)for(var e=this.children.length-1;e>=0;e--){var i=this.children[e];i.tickEnabled&&i._tick?i._tick(t):i.tickChildren&&i.Container__tick&&i.Container__tick(t)}this.DisplayObject__tick(t)},e._cloneChildren=function(t){t.children.length&&t.removeAllChildren();for(var e=t.children,i=0,n=this.children.length;n>i;i++){var r=this.children[i].clone(!0);r.parent=t,e.push(r)}},e._getObjectsUnderPoint=function(e,i,n,r,s,a){if(!(a=a||0)&&!this._testMask(this,e,i))return null;var o,h=createjs.DisplayObject._hitTestContext;if(s=s||r&&this._hasMouseEventListener(),this.hitShape&&(!r||s))return null==(o=this.getConcatenatedMatrix(this._matrix))?this.hitShape.contains(e,i)?this:null:(o.invert(),o.append(1,0,0,1,e,i),this.hitShape.contains(o.tx,o.ty)?this:null);for(var l=this.children,u=l.length-1;u>=0;u--){var c=l[u],d=c.hitArea;if(c.visible&&(d||c.isVisible())&&(!r||c.mouseEnabled)&&(d||this._testMask(c,e,i))){var p;if(c.hitShape&&(!r||s||c._hasMouseEventListener())){if(null==(o=c.getConcatenatedMatrix(c._matrix))?p=c.hitShape.contains(e,i):(o.invert(),o.append(1,0,0,1,e,i),p=c.hitShape.contains(o.tx,o.ty)),!p)continue;if(!n)return r&&!this.mouseChildren?this:c;n.push(c)}if(!d&&c instanceof t){if(p=c._getObjectsUnderPoint(e,i,n,r,s,a+1),!n&&p)return r&&!this.mouseChildren?this:p}else{if(r&&!s&&!c._hasMouseEventListener())continue;var f=c.getConcatenatedDisplayProps(c._props);if(o=f.matrix,d&&(o.appendMatrix(d.getMatrix(d._props.matrix)),f.alpha=d.alpha),h.globalAlpha=f.alpha,h.setTransform(o.a,o.b,o.c,o.d,o.tx-e,o.ty-i),(d||c).draw(h),!this._testHit(h))continue;if(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,2,2),!n)return r&&!this.mouseChildren?this:c;n.push(c)}}}return null},e._testMask=function(t,e,i){var n=t.mask;if(!n||!n.graphics||n.graphics.isEmpty())return!0;var r=this._props.matrix,s=t.parent;r=s?s.getConcatenatedMatrix(r):r.identity(),r=n.getMatrix(n._props.matrix).prependMatrix(r);var a=createjs.DisplayObject._hitTestContext;return a.setTransform(r.a,r.b,r.c,r.d,r.tx-e,r.ty-i),n.graphics.drawAsPath(a),a.fillStyle="#000",a.fill(),!!this._testHit(a)&&(a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,2,2),!0)},e._getBounds=function(t,e){var i=this.DisplayObject_getBounds();if(i)return this._transformBounds(i,t,e);var n=this._props.matrix;n=e?n.identity():this.getMatrix(n),t&&n.prependMatrix(t);for(var r=this.children.length,s=null,a=0;r>a;a++){var o=this.children[a];o.visible&&(i=o._getBounds(n))&&(s?s.extend(i.x,i.y,i.width,i.height):s=i.clone())}return s},createjs.Container=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.Container_constructor(),this.autoClear=!0,this.canvas="string"==typeof t?document.getElementById(t):t,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this._prevCursor=null,this.enableDOMEvents(!0)}var e=createjs.extend(t,createjs.Container);e._get_nextStage=function(){return this._nextStage},e._set_nextStage=function(t){this._nextStage&&(this._nextStage._prevStage=null),t&&(t._prevStage=this),this._nextStage=t};try{Object.defineProperties(e,{nextStage:{get:e._get_nextStage,set:e._set_nextStage}})}catch(t){}e.update=function(t){if(this.canvas&&(this.tickOnUpdate&&this.tick(t),!this.dispatchEvent("drawstart"))){createjs.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var e=this.drawRect,i=this.canvas.getContext("2d");i.setTransform(1,0,0,1,0,0),this.autoClear&&(e?i.clearRect(e.x,e.y,e.width,e.height):i.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),i.save(),this.drawRect&&(i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.clip()),this.updateContext(i),this.draw(i,!1),i.restore(),this.dispatchEvent("drawend")}},e.tick=function(t){if(this.tickEnabled&&!this.dispatchEvent("tickstart")){var e=new createjs.Event("tick");if(t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);this._tick(e),this.dispatchEvent("tickend")}},e.handleEvent=function(t){"tick"==t.type&&this.update(t)},e.clear=function(){if(this.canvas){var t=this.canvas.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},e.toDataURL=function(t,e){var i,n=this.canvas.getContext("2d"),r=this.canvas.width,s=this.canvas.height;if(t){i=n.getImageData(0,0,r,s);var a=n.globalCompositeOperation;n.globalCompositeOperation="destination-over",n.fillStyle=t,n.fillRect(0,0,r,s)}var o=this.canvas.toDataURL(e||"image/png");return t&&(n.putImageData(i,0,0),n.globalCompositeOperation=a),o},e.enableMouseOver=function(t){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==t&&this._testMouseOver(!0)),null==t)t=20;else if(0>=t)return;var e=this;this._mouseOverIntervalID=setInterval((function(){e._testMouseOver()}),1e3/Math.min(50,t))},e.enableDOMEvents=function(t){null==t&&(t=!0);var e,i,n=this._eventListeners;if(t&&"keepMove"!=t||!n){if(t&&this.canvas){if(!n){var r=window.addEventListener?window:document,s=this;(n=this._eventListeners={}).mouseup={t:r,f:function(t){s._handleMouseUp(t)}},n.mousemove={t:r,f:function(t){s._handleMouseMove(t)}},n.dblclick={t:this.canvas,f:function(t){s._handleDoubleClick(t)}},n.mousedown={t:this.canvas,f:function(t){s._handleMouseDown(t)}}}for(e in n)(i=n[e]).t.removeEventListener(e,i.f),i.t.addEventListener(e,i.f,!1)}}else{for(e in n)i=n[e],("keepMove"!=t||"mousemove"!=e)&&i.t.removeEventListener(e,i.f,!1);t||(this._eventListeners=null)}},e.clone=function(){throw"Stage cannot be cloned."},e.toString=function(){return"[Stage (name="+this.name+")]"},e._getElementRect=function(t){var e;try{e=t.getBoundingClientRect()}catch(i){e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var i=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),n=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),r=window.getComputedStyle?getComputedStyle(t,null):t.currentStyle,s=parseInt(r.paddingLeft)+parseInt(r.borderLeftWidth),a=parseInt(r.paddingTop)+parseInt(r.borderTopWidth),o=parseInt(r.paddingRight)+parseInt(r.borderRightWidth),h=parseInt(r.paddingBottom)+parseInt(r.borderBottomWidth);return{left:e.left+i+s,right:e.right+i-o,top:e.top+n+a,bottom:e.bottom+n-h}},e._getPointerData=function(t){var e=this._pointerData[t];return e||(e=this._pointerData[t]={x:0,y:0}),e},e._handleMouseMove=function(t){t||(t=window.event),this._handlePointerMove(-1,t,t.pageX,t.pageY)},e._handlePointerMove=function(t,e,i,n,r){if((!this._prevStage||void 0!==r)&&this.canvas){var s=this._nextStage,a=this._getPointerData(t),o=a.inBounds;this._updatePointerPosition(t,e,i,n),(o||a.inBounds||this.mouseMoveOutside)&&(-1===t&&a.inBounds==!o&&this._dispatchMouseEvent(this,o?"mouseleave":"mouseenter",!1,t,a,e),this._dispatchMouseEvent(this,"stagemousemove",!1,t,a,e),this._dispatchMouseEvent(a.target,"pressmove",!0,t,a,e)),s&&s._handlePointerMove(t,e,i,n,null)}},e._updatePointerPosition=function(t,e,i,n){var r=this._getElementRect(this.canvas);i-=r.left,n-=r.top;var s=this.canvas.width,a=this.canvas.height;i/=(r.right-r.left)/s,n/=(r.bottom-r.top)/a;var o=this._getPointerData(t);(o.inBounds=i>=0&&n>=0&&s-1>=i&&a-1>=n)?(o.x=i,o.y=n):this.mouseMoveOutside&&(o.x=0>i?0:i>s-1?s-1:i,o.y=0>n?0:n>a-1?a-1:n),o.posEvtObj=e,o.rawX=i,o.rawY=n,(t===this._primaryPointerID||-1===t)&&(this.mouseX=o.x,this.mouseY=o.y,this.mouseInBounds=o.inBounds)},e._handleMouseUp=function(t){this._handlePointerUp(-1,t,!1)},e._handlePointerUp=function(t,e,i,n){var r=this._nextStage,s=this._getPointerData(t);if(!this._prevStage||void 0!==n){s.down&&this._dispatchMouseEvent(this,"stagemouseup",!1,t,s,e),s.down=!1;var a=null,o=s.target;n||!o&&!r||(a=this._getObjectsUnderPoint(s.x,s.y,null,!0)),a==o&&this._dispatchMouseEvent(o,"click",!0,t,s,e),this._dispatchMouseEvent(o,"pressup",!0,t,s,e),i?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):s.target=null,r&&r._handlePointerUp(t,e,i,n||a&&this)}},e._handleMouseDown=function(t){this._handlePointerDown(-1,t,t.pageX,t.pageY)},e._handlePointerDown=function(t,e,i,n,r){this.preventSelection&&e.preventDefault(),(null==this._primaryPointerID||-1===t)&&(this._primaryPointerID=t),null!=n&&this._updatePointerPosition(t,e,i,n);var s=null,a=this._nextStage,o=this._getPointerData(t);o.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,t,o,e),o.down=!0),r||(s=o.target=this._getObjectsUnderPoint(o.x,o.y,null,!0),this._dispatchMouseEvent(o.target,"mousedown",!0,t,o,e)),a&&a._handlePointerDown(t,e,i,n,r||s&&this)},e._testMouseOver=function(t,e,i){if(!this._prevStage||void 0!==e){var n=this._nextStage;if(!this._mouseOverIntervalID)return void(n&&n._testMouseOver(t,e,i));var r=this._getPointerData(-1);if(r&&(t||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var s,a,o,h=r.posEvtObj,l=i||h&&h.target==this.canvas,u=null,c=-1,d="";!e&&(t||this.mouseInBounds&&l)&&(u=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var p=this._mouseOverTarget||[],f=p[p.length-1],g=this._mouseOverTarget=[];for(s=u;s;)g.unshift(s),null!=s.cursor&&(d=s.cursor),s=s.parent;for(this.hasEventListener("changecursor")?d!=this._prevCursor&&(this._prevCursor=d,this.dispatchEvent({type:"changecursor",cursor:d})):(this.canvas.style.cursor=d,!e&&i&&(i.canvas.style.cursor=d)),a=0,o=g.length;o>a&&g[a]==p[a];a++)c=a;for(f!=u&&this._dispatchMouseEvent(f,"mouseout",!0,-1,r,h),a=p.length-1;a>c;a--)this._dispatchMouseEvent(p[a],"rollout",!1,-1,r,h);for(a=g.length-1;a>c;a--)this._dispatchMouseEvent(g[a],"rollover",!1,-1,r,h);f!=u&&this._dispatchMouseEvent(u,"mouseover",!0,-1,r,h),n&&n._testMouseOver(t,e||u&&this,i||l&&this)}}},e._handleDoubleClick=function(t,e){var i=null,n=this._nextStage,r=this._getPointerData(-1);e||(i=this._getObjectsUnderPoint(r.x,r.y,null,!0),this._dispatchMouseEvent(i,"dblclick",!0,-1,r,t)),n&&n._handleDoubleClick(t,e||i&&this)},e._dispatchMouseEvent=function(t,e,i,n,r,s){if(t&&(i||t.hasEventListener(e))){var a=new createjs.MouseEvent(e,i,!1,r.x,r.y,s,n,n===this._primaryPointerID||-1===n,r.rawX,r.rawY);t.dispatchEvent(a)}},createjs.Stage=createjs.promote(t,"Container")}(),this.createjs=this.createjs||{},function(){function t(t){this.DisplayObject_constructor(),"string"==typeof t?(this.image=document.createElement("img"),this.image.src=t):this.image=t,this.sourceRect=null}var e=createjs.extend(t,createjs.DisplayObject);e.initialize=t,e.isVisible=function(){var t=this.cacheCanvas||this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e)||!this.image)return!0;var i=this.image,n=this.sourceRect;if(n){if(n.width<1||n.height<1)return!0;var r=n.x,s=n.y,a=r+n.width,o=s+n.height,h=0,l=0,u=i.width,c=i.height;0>r&&(h-=r,r=0),a>u&&(a=u),0>s&&(l-=s,s=0),o>c&&(o=c),t.drawImage(i,r,s,a-r,o-s,h,l,a-r,o-s)}else t.drawImage(i,0,0);return!0},e.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;var e=this.sourceRect||this.image;return this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2)?this._rectangle.setValues(0,0,e.width,e.height):null},e.clone=function(){var e=new t(this.image);return this.sourceRect&&(e.sourceRect=this.sourceRect.clone()),this._cloneProps(e),e},e.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=t,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,e&&this.gotoAndPlay(e)}var e=createjs.extend(t,createjs.DisplayObject);e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;this._normalizeFrame();var i=this.spriteSheet.getFrame(0|this._currentFrame);if(!i)return!1;var n=i.rect;return n.width&&n.height&&t.drawImage(i.image,n.x,n.y,n.width,n.height,-i.regX,-i.regY,n.width,n.height),!0},e.play=function(){this.paused=!1},e.stop=function(){this.paused=!0},e.gotoAndPlay=function(t){this.paused=!1,this._skipAdvance=!0,this._goto(t)},e.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.advance=function(t){var e=this.framerate||this.spriteSheet.framerate,i=e&&null!=t?t/(1e3/e):1;this._normalizeFrame(i)},e.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},e.clone=function(){return this._cloneProps(new t(this.spriteSheet))},e.toString=function(){return"[Sprite (name="+this.name+")]"},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.currentFrame=this.currentFrame,t.currentAnimation=this.currentAnimation,t.paused=this.paused,t.currentAnimationFrame=this.currentAnimationFrame,t.framerate=this.framerate,t._animation=this._animation,t._currentFrame=this._currentFrame,t._skipAdvance=this._skipAdvance,t},e._tick=function(t){this.paused||(this._skipAdvance||this.advance(t&&t.delta),this._skipAdvance=!1),this.DisplayObject__tick(t)},e._normalizeFrame=function(t){t=t||0;var e,i=this._animation,n=this.paused,r=this._currentFrame;if(i){var s=i.speed||1,a=this.currentAnimationFrame;if(a+t*s>=(e=i.frames.length)){var o=i.next;if(this._dispatchAnimationEnd(i,r,n,o,e-1))return;if(o)return this._goto(o,t-(e-a)/s);this.paused=!0,a=i.frames.length-1}else a+=t*s;this.currentAnimationFrame=a,this._currentFrame=i.frames[0|a]}else if((r=this._currentFrame+=t)>=(e=this.spriteSheet.getNumFrames())&&e>0&&!this._dispatchAnimationEnd(i,r,n,e-1)&&(this._currentFrame-=e)>=e)return this._normalizeFrame();r=0|this._currentFrame,this.currentFrame!=r&&(this.currentFrame=r,this.dispatchEvent("change"))},e._dispatchAnimationEnd=function(t,e,i,n,r){var s=t?t.name:null;if(this.hasEventListener("animationend")){var a=new createjs.Event("animationend");a.name=s,a.next=n,this.dispatchEvent(a)}var o=this._animation!=t||this._currentFrame!=e;return o||i||!this.paused||(this.currentAnimationFrame=r,o=!0),o},e._goto=function(t,e){if(this.currentAnimationFrame=0,isNaN(t)){var i=this.spriteSheet.getAnimation(t);i&&(this._animation=i,this.currentAnimation=t,this._normalizeFrame(e))}else this.currentAnimation=this._animation=null,this._currentFrame=t,this._normalizeFrame()},createjs.Sprite=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.DisplayObject_constructor(),this.graphics=t||new createjs.Graphics}var e=createjs.extend(t,createjs.DisplayObject);e.isVisible=function(){var t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){return this.DisplayObject_draw(t,e)||this.graphics.draw(t,this),!0},e.clone=function(e){var i=e&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new t(i))},e.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.DisplayObject_constructor(),this.text=t,this.font=e,this.color=i,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.stroke=null,this.lineHeight=0,this.lineWidth=null}var e=createjs.extend(t,createjs.DisplayObject),i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(t._workingContext=i.getContext("2d"),i.width=i.height=1),t.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},t.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},e.isVisible=function(){var t=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;var i=this.color||"#000";return this.outline?(t.strokeStyle=i,t.lineWidth=1*this.outline,t.lineJoin="round"):t.fillStyle=i,this.stroke&&!this.outline&&(t.lineWidth=this.stroke.width,t.strokeStyle=this.stroke.color,t.lineJoin="round"),this._drawText(this._prepContext(t)),!0},e.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},e.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},e.getMeasuredHeight=function(){return this._drawText(null,{}).height},e.getBounds=function(){var e=this.DisplayObject_getBounds();if(e)return e;if(null==this.text||""==this.text)return null;var i=this._drawText(null,{}),n=this.maxWidth&&this.maxWidth<i.width?this.maxWidth:i.width,r=n*t.H_OFFSETS[this.textAlign||"left"],s=(this.lineHeight||this.getMeasuredLineHeight())*t.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(r,s,n,i.height)},e.getMetrics=function(){var e={lines:[]};return e.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),e.vOffset=e.lineHeight*t.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,e,e.lines)},e.clone=function(){return this._cloneProps(new t(this.text,this.font,this.color))},e.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.maxWidth=this.maxWidth,t.outline=this.outline,t.lineHeight=this.lineHeight,t.lineWidth=this.lineWidth,t},e._prepContext=function(t){return t.font=this.font||"10px sans-serif",t.textAlign=this.textAlign||"left",t.textBaseline=this.textBaseline||"top",t},e._drawText=function(e,i,n){var r=!!e;r||((e=t._workingContext).save(),this._prepContext(e));for(var s=this.lineHeight||this.getMeasuredLineHeight(),a=0,o=0,h=String(this.text).split(/(?:\r\n|\r|\n)/),l=0,u=h.length;u>l;l++){var c=h[l],d=null;if(null!=this.lineWidth&&(d=e.measureText(c).width)>this.lineWidth){var p=c.split(/(\s)/);c=p[0],d=e.measureText(c).width;for(var f=1,g=p.length;g>f;f+=2){var _=e.measureText(p[f]+p[f+1]).width;d+_>this.lineWidth?(r&&this._drawTextLine(e,c,o*s),n&&n.push(c),d>a&&(a=d),c=p[f+1],d=e.measureText(c).width,o++):(c+=p[f]+p[f+1],d+=_)}}r&&this._drawTextLine(e,c,o*s),n&&n.push(c),i&&null==d&&(d=e.measureText(c).width),d>a&&(a=d),o++}return i&&(i.width=a,i.height=o*s),r||e.restore(),i},e._drawTextLine=function(t,e,i){this.outline?t.strokeText(e,0,i,this.maxWidth||65535):(this.stroke&&t.strokeText(e,0,i,this.maxWidth||65535),t.fillText(e,0,i,this.maxWidth||65535))},e._getMeasuredWidth=function(e){var i=t._workingContext;i.save();var n=this._prepContext(i).measureText(e).width;return i.restore(),n},createjs.Text=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.Container_constructor(),this.text=t||"",this.spriteSheet=e,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0}}var e=createjs.extend(t,createjs.Container);t.maxPoolSize=100,t._spritePool=[],e.draw=function(t,e){this.DisplayObject_draw(t,e)||(this._updateText(),this.Container_draw(t,e))},e.getBounds=function(){return this._updateText(),this.Container_getBounds()},e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&t)},e.clone=function(){return this._cloneProps(new t(this.text,this.spriteSheet))},e.addChild=e.addChildAt=e.removeChild=e.removeChildAt=e.removeAllChildren=function(){},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.spaceWidth=this.spaceWidth,t},e._getFrameIndex=function(t,e){var i,n=e.getAnimation(t);return n||(t!=(i=t.toUpperCase())||t!=(i=t.toLowerCase())||(i=null),i&&(n=e.getAnimation(i))),n&&n.frames[0]},e._getFrame=function(t,e){var i=this._getFrameIndex(t,e);return null==i?i:e.getFrame(i)},e._getLineHeight=function(t){var e=this._getFrame("1",t)||this._getFrame("T",t)||this._getFrame("L",t)||t.getFrame(0);return e?e.rect.height:1},e._getSpaceWidth=function(t){var e=this._getFrame("1",t)||this._getFrame("l",t)||this._getFrame("e",t)||this._getFrame("a",t)||t.getFrame(0);return e?e.rect.width:1},e._updateText=function(){var e,i=0,n=0,r=this._oldProps,s=!1,a=this.spaceWidth,o=this.lineHeight,h=this.spriteSheet,l=t._spritePool,u=this.children,c=0,d=u.length;for(var p in r)r[p]!=this[p]&&(r[p]=this[p],s=!0);if(s){var f=!!this._getFrame(" ",h);f||a||(a=this._getSpaceWidth(h)),o||(o=this._getLineHeight(h));for(var g=0,_=this.text.length;_>g;g++){var v=this.text.charAt(g);if(" "!=v||f)if("\n"!=v&&"\r"!=v){var m=this._getFrameIndex(v,h);null!=m&&(d>c?e=u[c]:(u.push(e=l.length?l.pop():new createjs.Sprite),e.parent=this,d++),e.spriteSheet=h,e.gotoAndStop(m),e.x=i,e.y=n,c++,i+=e.getBounds().width+this.letterSpacing)}else"\r"==v&&"\n"==this.text.charAt(g+1)&&g++,i=0,n+=o;else i+=a}for(;d>c;)l.push(e=u.pop()),e.parent=null,d--;l.length>t.maxPoolSize&&(l.length=t.maxPoolSize)}},createjs.BitmapText=createjs.promote(t,"Container")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"SpriteSheetUtils cannot be instantiated"}var e=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");e.getContext&&(t._workingCanvas=e,t._workingContext=e.getContext("2d"),e.width=e.height=1),t.addFlippedFrames=function(e,i,n,r){if(i||n||r){var s=0;i&&t._flip(e,++s,!0,!1),n&&t._flip(e,++s,!1,!0),r&&t._flip(e,++s,!0,!0)}},t.extractFrame=function(e,i){isNaN(i)&&(i=e.getAnimation(i).frames[0]);var n=e.getFrame(i);if(!n)return null;var r=n.rect,s=t._workingCanvas;s.width=r.width,s.height=r.height,t._workingContext.drawImage(n.image,r.x,r.y,r.width,r.height,0,0,r.width,r.height);var a=document.createElement("img");return a.src=s.toDataURL("image/png"),a},t.mergeAlpha=function(t,e,i){i||(i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),i.width=Math.max(e.width,t.width),i.height=Math.max(e.height,t.height);var n=i.getContext("2d");return n.save(),n.drawImage(t,0,0),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),n.restore(),i},t._flip=function(e,i,n,r){for(var s=e._images,a=t._workingCanvas,o=t._workingContext,h=s.length/i,l=0;h>l;l++){var u=s[l];u.__tmp=l,o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,a.width+1,a.height+1),a.width=u.width,a.height=u.height,o.setTransform(n?-1:1,0,0,r?-1:1,n?u.width:0,r?u.height:0),o.drawImage(u,0,0);var c=document.createElement("img");c.src=a.toDataURL("image/png"),c.width=u.width,c.height=u.height,s.push(c)}var d=e._frames,p=d.length/i;for(l=0;p>l;l++){var f=(u=d[l]).rect.clone(),g={image:c=s[u.image.__tmp+h*i],rect:f,regX:u.regX,regY:u.regY};n&&(f.x=c.width-f.x-f.width,g.regX=f.width-u.regX),r&&(f.y=c.height-f.y-f.height,g.regY=f.height-u.regY),d.push(g)}var _="_"+(n?"h":"")+(r?"v":""),v=e._animations,m=e._data,y=v.length/i;for(l=0;y>l;l++){var b=v[l],x={name:b+_,speed:(u=m[b]).speed,next:u.next,frames:[]};u.next&&(x.next+=_);for(var T=0,E=(d=u.frames).length;E>T;T++)x.frames.push(d[T]+p*i);m[x.name]=x,v.push(x.name)}},createjs.SpriteSheetUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var e=createjs.extend(t,createjs.EventDispatcher);t.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",t.ERR_RUNNING="a build is already running",e.addFrame=function(e,i,n,r,s){if(this._data)throw t.ERR_RUNNING;var a=i||e.bounds||e.nominalBounds;return!a&&e.getBounds&&(a=e.getBounds()),a?(n=n||1,this._frames.push({source:e,sourceRect:a,scale:n,funct:r,data:s,index:this._frames.length,height:a.height*n})-1):null},e.addAnimation=function(e,i,n,r){if(this._data)throw t.ERR_RUNNING;this._animations[e]={frames:i,next:n,frequency:r}},e.addMovieClip=function(e,i,n,r,s,a){if(this._data)throw t.ERR_RUNNING;var o=e.frameBounds,h=i||e.bounds||e.nominalBounds;if(!h&&e.getBounds&&(h=e.getBounds()),h||o){var l,u,c=this._frames.length,d=e.timeline.duration;for(l=0;d>l;l++){var p=o&&o[l]?o[l]:h;this.addFrame(e,p,n,this._setupMovieClipFrame,{i:l,f:r,d:s})}var f=e.timeline._labels,g=[];for(var _ in f)g.push({index:f[_],label:_});if(g.length)for(g.sort((function(t,e){return t.index-e.index})),l=0,u=g.length;u>l;l++){for(var v=g[l].label,m=c+g[l].index,y=c+(l==u-1?d:g[l+1].index),b=[],x=m;y>x;x++)b.push(x);(!a||(v=a(v,e,m,y)))&&this.addAnimation(v,b,!0)}}},e.build=function(){if(this._data)throw t.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},e.buildAsync=function(e){if(this._data)throw t.ERR_RUNNING;this.timeSlice=e,this._startBuild();var i=this;this._timerID=setTimeout((function(){i._run()}),50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},e.stopAsync=function(){clearTimeout(this._timerID),this._data=null},e.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},e.toString=function(){return"[SpriteSheetBuilder]"},e._startBuild=function(){var e=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var i=[];this._data={images:[],frames:i,animations:this._animations};var n=this._frames.slice();if(n.sort((function(t,e){return t.height<=e.height?-1:1})),n[n.length-1].height+2*e>this.maxHeight)throw t.ERR_DIMENSIONS;for(var r=0,s=0,a=0;n.length;){var o=this._fillRow(n,r,a,i,e);if(o.w>s&&(s=o.w),r+=o.h,!o.h||!n.length){var h=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");h.width=this._getSize(s,this.maxWidth),h.height=this._getSize(r,this.maxHeight),this._data.images[a]=h,o.h||(s=r=0,a++)}}},e._setupMovieClipFrame=function(t,e){var i=t.actionsEnabled;t.actionsEnabled=!1,t.gotoAndStop(e.i),t.actionsEnabled=i,e.f&&e.f(t,e.d,e.i)},e._getSize=function(t,e){for(var i=4;Math.pow(2,++i)<t;);return Math.min(e,Math.pow(2,i))},e._fillRow=function(e,i,n,r,s){for(var a=this.maxWidth,o=this.maxHeight-(i+=s),h=s,l=0,u=e.length-1;u>=0;u--){var c=e[u],d=this._scale*c.scale,p=c.sourceRect,f=c.source,g=Math.floor(d*p.x-s),_=Math.floor(d*p.y-s),v=Math.ceil(d*p.height+2*s),m=Math.ceil(d*p.width+2*s);if(m>a)throw t.ERR_DIMENSIONS;v>o||h+m>a||(c.img=n,c.rect=new createjs.Rectangle(h,i,m,v),l=l||v,e.splice(u,1),r[c.index]=[h,i,m,v,n,Math.round(-g+d*f.regX-s),Math.round(-_+d*f.regY-s)],h+=m)}return{w:h,h:l}},e._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},e._run=function(){for(var t=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),e=(new Date).getTime()+t,i=!1;e>(new Date).getTime();)if(!this._drawNext()){i=!0;break}if(i)this._endBuild();else{var n=this;this._timerID=setTimeout((function(){n._run()}),50-t)}var r=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var s=new createjs.Event("progress");s.progress=r,this.dispatchEvent(s)}},e._drawNext=function(){var t=this._frames[this._index],e=t.scale*this._scale,i=t.rect,n=t.sourceRect,r=this._data.images[t.img].getContext("2d");return t.funct&&t.funct(t.source,t.data),r.save(),r.beginPath(),r.rect(i.x,i.y,i.width,i.height),r.clip(),r.translate(Math.ceil(i.x-n.x*e),Math.ceil(i.y-n.y*e)),r.scale(e,e),t.source.draw(r),r.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.DisplayObject_constructor(),"string"==typeof t&&(t=document.getElementById(t)),this.mouseEnabled=!1;var e=t.style;e.position="absolute",e.transformOrigin=e.WebkitTransformOrigin=e.msTransformOrigin=e.MozTransformOrigin=e.OTransformOrigin="0% 0%",this.htmlElement=t,this._oldProps=null}var e=createjs.extend(t,createjs.DisplayObject);e.isVisible=function(){return null!=this.htmlElement},e.draw=function(){return!0},e.cache=function(){},e.uncache=function(){},e.updateCache=function(){},e.hitTest=function(){},e.localToGlobal=function(){},e.globalToLocal=function(){},e.localToLocal=function(){},e.clone=function(){throw"DOMElement cannot be cloned."},e.toString=function(){return"[DOMElement (name="+this.name+")]"},e._tick=function(t){var e=this.getStage();e&&e.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(t)},e._handleDrawEnd=function(){var t=this.htmlElement;if(t){var e=t.style,i=this.getConcatenatedDisplayProps(this._props),n=i.matrix,r=i.visible?"visible":"hidden";if(r!=e.visibility&&(e.visibility=r),i.visible){var s=this._oldProps,a=s&&s.matrix,o=1e4;if(!a||!a.equals(n)){var h="matrix("+(n.a*o|0)/o+","+(n.b*o|0)/o+","+(n.c*o|0)/o+","+(n.d*o|0)/o+","+(n.tx+.5|0);e.transform=e.WebkitTransform=e.OTransform=e.msTransform=h+","+(n.ty+.5|0)+")",e.MozTransform=h+"px,"+(n.ty+.5|0)+"px)",s||(s=this._oldProps=new createjs.DisplayProps(!0,NaN)),s.matrix.copy(n)}s.alpha!=i.alpha&&(e.opacity=""+(i.alpha*o|0)/o,s.alpha=i.alpha)}}},createjs.DOMElement=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){}var e=t.prototype;e.getBounds=function(t){return t},e.applyFilter=function(t,e,i,n,r,s,a,o){s=s||t,null==a&&(a=e),null==o&&(o=i);try{var h=t.getImageData(e,i,n,r)}catch(t){return!1}return!!this._applyFilter(h)&&(s.putImageData(h,a,o),!0)},e.toString=function(){return"[Filter]"},e.clone=function(){return new t},e._applyFilter=function(){return!0},createjs.Filter=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){(isNaN(t)||0>t)&&(t=0),(isNaN(e)||0>e)&&(e=0),(isNaN(i)||1>i)&&(i=1),this.blurX=0|t,this.blurY=0|e,this.quality=0|i}var e=createjs.extend(t,createjs.Filter);t.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],t.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],e.getBounds=function(t){var e=0|this.blurX,i=0|this.blurY;if(0>=e&&0>=i)return t;var n=Math.pow(this.quality,.2);return(t||new createjs.Rectangle).pad(e*n+1,i*n+1,e*n+1,i*n+1)},e.clone=function(){return new t(this.blurX,this.blurY,this.quality)},e.toString=function(){return"[BlurFilter]"},e._applyFilter=function(e){var i=this.blurX>>1;if(isNaN(i)||0>i)return!1;var n=this.blurY>>1;if(isNaN(n)||0>n)return!1;if(0==i&&0==n)return!1;var r=this.quality;(isNaN(r)||1>r)&&(r=1),(r|=0)>3&&(r=3),1>r&&(r=1);var s=e.data,a=0,o=0,h=0,l=0,u=0,c=0,d=0,p=0,f=0,g=0,_=0,v=0,m=0,y=0,b=0,x=i+i+1|0,T=n+n+1|0,E=0|e.width,w=0|e.height,S=E-1|0,A=w-1|0,P=i+1|0,C=n+1|0,L={r:0,b:0,g:0,a:0},O=L;for(h=1;x>h;h++)O=O.n={r:0,b:0,g:0,a:0};O.n=L;var j={r:0,b:0,g:0,a:0},R=j;for(h=1;T>h;h++)R=R.n={r:0,b:0,g:0,a:0};R.n=j;for(var M=null,D=0|t.MUL_TABLE[i],I=0|t.SHG_TABLE[i],F=0|t.MUL_TABLE[n],k=0|t.SHG_TABLE[n];r-- >0;){d=c=0;var B=D,N=I;for(o=w;--o>-1;){for(p=P*(v=s[0|c]),f=P*(m=s[c+1|0]),g=P*(y=s[c+2|0]),_=P*(b=s[c+3|0]),O=L,h=P;--h>-1;)O.r=v,O.g=m,O.b=y,O.a=b,O=O.n;for(h=1;P>h;h++)l=c+((h>S?S:h)<<2)|0,p+=O.r=s[l],f+=O.g=s[l+1],g+=O.b=s[l+2],_+=O.a=s[l+3],O=O.n;for(M=L,a=0;E>a;a++)s[c++]=p*B>>>N,s[c++]=f*B>>>N,s[c++]=g*B>>>N,s[c++]=_*B>>>N,l=d+((l=a+i+1)<S?l:S)<<2,p-=M.r-(M.r=s[l]),f-=M.g-(M.g=s[l+1]),g-=M.b-(M.b=s[l+2]),_-=M.a-(M.a=s[l+3]),M=M.n;d+=E}for(B=F,N=k,a=0;E>a;a++){for(p=C*(v=s[c=a<<2|0])|0,f=C*(m=s[c+1|0])|0,g=C*(y=s[c+2|0])|0,_=C*(b=s[c+3|0])|0,R=j,h=0;C>h;h++)R.r=v,R.g=m,R.b=y,R.a=b,R=R.n;for(u=E,h=1;n>=h;h++)c=u+a<<2,p+=R.r=s[c],f+=R.g=s[c+1],g+=R.b=s[c+2],_+=R.a=s[c+3],R=R.n,A>h&&(u+=E);if(c=a,M=j,r>0)for(o=0;w>o;o++)s[(l=c<<2)+3]=b=_*B>>>N,b>0?(s[l]=p*B>>>N,s[l+1]=f*B>>>N,s[l+2]=g*B>>>N):s[l]=s[l+1]=s[l+2]=0,l=a+((l=o+C)<A?l:A)*E<<2,p-=M.r-(M.r=s[l]),f-=M.g-(M.g=s[l+1]),g-=M.b-(M.b=s[l+2]),_-=M.a-(M.a=s[l+3]),M=M.n,c+=E;else for(o=0;w>o;o++)s[(l=c<<2)+3]=b=_*B>>>N,b>0?(b=255/b,s[l]=(p*B>>>N)*b,s[l+1]=(f*B>>>N)*b,s[l+2]=(g*B>>>N)*b):s[l]=s[l+1]=s[l+2]=0,l=a+((l=o+C)<A?l:A)*E<<2,p-=M.r-(M.r=s[l]),f-=M.g-(M.g=s[l+1]),g-=M.b-(M.b=s[l+2]),_-=M.a-(M.a=s[l+3]),M=M.n,c+=E}}return!0},createjs.BlurFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.alphaMap=t,this._alphaMap=null,this._mapData=null}var e=createjs.extend(t,createjs.Filter);e.clone=function(){var e=new t(this.alphaMap);return e._alphaMap=this._alphaMap,e._mapData=this._mapData,e},e.toString=function(){return"[AlphaMapFilter]"},e._applyFilter=function(t){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var e=t.data,i=this._mapData,n=0,r=e.length;r>n;n+=4)e[n+3]=i[n]||0;return!0},e._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var t,e=this._alphaMap=this.alphaMap,i=e;e instanceof HTMLCanvasElement?t=i.getContext("2d"):((i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).width=e.width,i.height=e.height,(t=i.getContext("2d")).drawImage(e,0,0));try{var n=t.getImageData(0,0,e.width,e.height)}catch(t){return!1}return this._mapData=n.data,!0},createjs.AlphaMapFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.mask=t}var e=createjs.extend(t,createjs.Filter);e.applyFilter=function(t,e,i,n,r,s,a,o){return!this.mask||(null==a&&(a=e),null==o&&(o=i),(s=s||t).save(),t==s&&(s.globalCompositeOperation="destination-in",s.drawImage(this.mask,a,o),s.restore(),!0))},e.clone=function(){return new t(this.mask)},e.toString=function(){return"[AlphaMaskFilter]"},createjs.AlphaMaskFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n,r,s,a,o){this.redMultiplier=null!=t?t:1,this.greenMultiplier=null!=e?e:1,this.blueMultiplier=null!=i?i:1,this.alphaMultiplier=null!=n?n:1,this.redOffset=r||0,this.greenOffset=s||0,this.blueOffset=a||0,this.alphaOffset=o||0}var e=createjs.extend(t,createjs.Filter);e.toString=function(){return"[ColorFilter]"},e.clone=function(){return new t(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)};var i=function(){var t,e,i;return(t=document.createElement("canvas")).width=2,t.height=1,(t=t.getContext("2d")).fillStyle="rgba(10,20,30,0.5)",t.fillRect(0,0,1,1),e=t.getImageData(0,0,1,1),t.putImageData(e,1,0),(i=t.getImageData(1,0,1,1)).data[0]===e.data[0]&&i.data[1]===e.data[1]&&i.data[2]===e.data[2]&&i.data[3]===e.data[3]}();e._applyFilter=function(t){var e,n=t.data,r=n.length,s=this.redMultiplier,a=this.greenMultiplier,o=this.blueMultiplier,h=this.alphaMultiplier,l=this.redOffset,u=this.greenOffset,c=this.blueOffset,d=this.alphaOffset;if(i)for(e=0;r>e;e+=4)n[e]=n[e]*s+l,n[e+1]=n[e+1]*a+u,n[e+2]=n[e+2]*o+c,n[e+3]=n[e+3]*h+d;else for(e=0;r>e;e+=4){n[e]=n[e]*s+l,n[e+1]=n[e+1]*a+u,n[e+2]=n[e+2]*o+c,n[e+3]=n[e+3]*h+d;var p=n[e+3]/255;n[e]*=p,n[e+1]*=p,n[e+2]*=p}return!0},createjs.ColorFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n){this.setColor(t,e,i,n)}var e=t.prototype;t.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],t.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t.LENGTH=t.IDENTITY_MATRIX.length,e.setColor=function(t,e,i,n){return this.reset().adjustColor(t,e,i,n)},e.reset=function(){return this.copy(t.IDENTITY_MATRIX)},e.adjustColor=function(t,e,i,n){return this.adjustHue(n),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},e.adjustBrightness=function(t){return 0==t||isNaN(t)||(t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])),this},e.adjustContrast=function(e){return 0==e||isNaN(e)||(0>(e=this._cleanValue(e,100))?i=127+e/100*127:i=127*(i=0==(i=e%1)?t.DELTA_INDEX[e]:t.DELTA_INDEX[e<<0]*(1-i)+t.DELTA_INDEX[1+(e<<0)]*i)+127,this._multiplyMatrix([i/127,0,0,0,.5*(127-i),0,i/127,0,0,.5*(127-i),0,0,i/127,0,.5*(127-i),0,0,0,1,0,0,0,0,0,1])),this;var i},e.adjustSaturation=function(t){if(0==t||isNaN(t))return this;var e=1+((t=this._cleanValue(t,100))>0?3*t/100:t/100),i=.3086,n=.6094,r=.082;return this._multiplyMatrix([i*(1-e)+e,n*(1-e),r*(1-e),0,0,i*(1-e),n*(1-e)+e,r*(1-e),0,0,i*(1-e),n*(1-e),r*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.adjustHue=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,180)/180*Math.PI;var e=Math.cos(t),i=Math.sin(t),n=.213,r=.715,s=.072;return this._multiplyMatrix([n+e*(1-n)+i*-n,r+e*-r+i*-r,s+e*-s+i*(1-s),0,0,n+e*-n+.143*i,r+e*(1-r)+.14*i,s+e*-s+-.283*i,0,0,n+e*-n+-.787*i,r+e*-r+i*r,s+e*(1-s)+i*s,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.concat=function(e){return(e=this._fixMatrix(e)).length!=t.LENGTH||this._multiplyMatrix(e),this},e.clone=function(){return(new t).copy(this)},e.toArray=function(){for(var e=[],i=0,n=t.LENGTH;n>i;i++)e[i]=this[i];return e},e.copy=function(e){for(var i=t.LENGTH,n=0;i>n;n++)this[n]=e[n];return this},e.toString=function(){return"[ColorMatrix]"},e._multiplyMatrix=function(t){var e,i,n,r=[];for(e=0;5>e;e++){for(i=0;5>i;i++)r[i]=this[i+5*e];for(i=0;5>i;i++){var s=0;for(n=0;5>n;n++)s+=t[i+5*n]*r[n];this[i+5*e]=s}}},e._cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},e._fixMatrix=function(e){return e instanceof t&&(e=e.toArray()),e.length<t.LENGTH?e=e.slice(0,e.length).concat(t.IDENTITY_MATRIX.slice(e.length,t.LENGTH)):e.length>t.LENGTH&&(e=e.slice(0,t.LENGTH)),e},createjs.ColorMatrix=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.matrix=t}var e=createjs.extend(t,createjs.Filter);e.toString=function(){return"[ColorMatrixFilter]"},e.clone=function(){return new t(this.matrix)},e._applyFilter=function(t){for(var e,i,n,r,s=t.data,a=s.length,o=this.matrix,h=o[0],l=o[1],u=o[2],c=o[3],d=o[4],p=o[5],f=o[6],g=o[7],_=o[8],v=o[9],m=o[10],y=o[11],b=o[12],x=o[13],T=o[14],E=o[15],w=o[16],S=o[17],A=o[18],P=o[19],C=0;a>C;C+=4)e=s[C],i=s[C+1],n=s[C+2],r=s[C+3],s[C]=e*h+i*l+n*u+r*c+d,s[C+1]=e*p+i*f+n*g+r*_+v,s[C+2]=e*m+i*y+n*b+r*x+T,s[C+3]=e*E+i*w+n*S+r*A+P;return!0},createjs.ColorMatrixFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Touch cannot be instantiated"}t.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},t.enable=function(e,i,n){return!!(e&&e.canvas&&t.isSupported())&&(e.__touch||(e.__touch={pointers:{},multitouch:!i,preventDefault:!n,count:0},"ontouchstart"in window?t._IOS_enable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_enable(e)),!0)},t.disable=function(e){e&&("ontouchstart"in window?t._IOS_disable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_disable(e),delete e.__touch)},t._IOS_enable=function(e){var i=e.canvas,n=e.__touch.f=function(i){t._IOS_handleEvent(e,i)};i.addEventListener("touchstart",n,!1),i.addEventListener("touchmove",n,!1),i.addEventListener("touchend",n,!1),i.addEventListener("touchcancel",n,!1)},t._IOS_disable=function(t){var e=t.canvas;if(e&&t.__touch){var i=t.__touch.f;e.removeEventListener("touchstart",i,!1),e.removeEventListener("touchmove",i,!1),e.removeEventListener("touchend",i,!1),e.removeEventListener("touchcancel",i,!1)}},t._IOS_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();for(var i=e.changedTouches,n=e.type,r=0,s=i.length;s>r;r++){var a=i[r],o=a.identifier;a.target==t.canvas&&("touchstart"==n?this._handleStart(t,o,e,a.pageX,a.pageY):"touchmove"==n?this._handleMove(t,o,e,a.pageX,a.pageY):("touchend"==n||"touchcancel"==n)&&this._handleEnd(t,o,e))}}},t._IE_enable=function(e){var i=e.canvas,n=e.__touch.f=function(i){t._IE_handleEvent(e,i)};void 0===window.navigator.pointerEnabled?(i.addEventListener("MSPointerDown",n,!1),window.addEventListener("MSPointerMove",n,!1),window.addEventListener("MSPointerUp",n,!1),window.addEventListener("MSPointerCancel",n,!1),e.__touch.preventDefault&&(i.style.msTouchAction="none")):(i.addEventListener("pointerdown",n,!1),window.addEventListener("pointermove",n,!1),window.addEventListener("pointerup",n,!1),window.addEventListener("pointercancel",n,!1),e.__touch.preventDefault&&(i.style.touchAction="none")),e.__touch.activeIDs={}},t._IE_disable=function(t){if(t.__touch){var e=t.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",e,!1),window.removeEventListener("MSPointerUp",e,!1),window.removeEventListener("MSPointerCancel",e,!1),t.canvas&&t.canvas.removeEventListener("MSPointerDown",e,!1)):(window.removeEventListener("pointermove",e,!1),window.removeEventListener("pointerup",e,!1),window.removeEventListener("pointercancel",e,!1),t.canvas&&t.canvas.removeEventListener("pointerdown",e,!1))}},t._IE_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();var i=e.type,n=e.pointerId,r=t.__touch.activeIDs;if("MSPointerDown"==i||"pointerdown"==i){if(e.srcElement!=t.canvas)return;r[n]=!0,this._handleStart(t,n,e,e.pageX,e.pageY)}else r[n]&&("MSPointerMove"==i||"pointermove"==i?this._handleMove(t,n,e,e.pageX,e.pageY):("MSPointerUp"==i||"MSPointerCancel"==i||"pointerup"==i||"pointercancel"==i)&&(delete r[n],this._handleEnd(t,n,e)))}},t._handleStart=function(t,e,i,n,r){var s=t.__touch;if(s.multitouch||!s.count){var a=s.pointers;a[e]||(a[e]=!0,s.count++,t._handlePointerDown(e,i,n,r))}},t._handleMove=function(t,e,i,n,r){t.__touch.pointers[e]&&t._handlePointerMove(e,i,n,r)},t._handleEnd=function(t,e,i){var n=t.__touch,r=n.pointers;r[e]&&(n.count--,t._handlePointerUp(e,i,!0),delete r[e])},createjs.Touch=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.EaselJS=createjs.EaselJS||{};t.version="0.8.7",t.buildDate="Tue, 06 Oct 2015 13:52:46 GMT"}(),
/*!
* @license TweenJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2013 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n)for(var r in i[(e+="_")+"constructor"]=n.constructor,n)i.hasOwnProperty(r)&&"function"==typeof n[r]&&(i[e+r]=n[r]);return t},this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n,r=(n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return r&&this.removeEventListener(t,e,i),(r=n[t])?r.push(e):n[t]=[e],e},e.on=function(t,e,i,n,r,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,(function(t){e.call(i,t,r),n&&t.remove()}),s)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var r=n[t];if(r)for(var s=0,a=r.length;a>s;s++)if(r[s]==e){1==a?delete n[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t){if("string"==typeof t){var e=this._listeners;if(!e||!e[t])return!1;t=new createjs.Event(t)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var i=this,n=[i];i.parent;)n.push(i=i.parent);var r,s=n.length;for(r=s-1;r>=0&&!t.propagationStopped;r--)n[r]._dispatchEvent(t,1+(0==r));for(r=1;s>r&&!t.propagationStopped;r++)n[r]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n=1==e?this._captureListeners:this._listeners;if(t&&n){var r=n[t.type];if(!r||!(i=r.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,r=r.slice();for(var s=0;i>s&&!t.immediatePropagationStopped;s++){var a=r[s];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Ticker cannot be instantiated."}t.RAF_SYNCHED="synched",t.RAF="raf",t.TIMEOUT="timeout",t.useRAF=!1,t.timingMode=null,t.maxDelta=0,t.paused=!1,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._addEventListener=t.addEventListener,t.addEventListener=function(){return!t._inited&&t.init(),t._addEventListener.apply(t,arguments)},t._inited=!1,t._startTime=0,t._pausedTime=0,t._ticks=0,t._pausedTicks=0,t._interval=50,t._lastTime=0,t._times=null,t._tickTimes=null,t._timerId=null,t._raf=!0,t.setInterval=function(e){t._interval=e,t._inited&&t._setupTick()},t.getInterval=function(){return t._interval},t.setFPS=function(e){t.setInterval(1e3/e)},t.getFPS=function(){return 1e3/t._interval};try{Object.defineProperties(t,{interval:{get:t.getInterval,set:t.setInterval},framerate:{get:t.getFPS,set:t.setFPS}})}catch(t){console.log(t)}t.init=function(){t._inited||(t._inited=!0,t._times=[],t._tickTimes=[],t._startTime=t._getTime(),t._times.push(t._lastTime=0),t.interval=t._interval)},t.reset=function(){if(t._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(t._timerId)}else clearTimeout(t._timerId);t.removeAllEventListeners("tick"),t._timerId=t._times=t._tickTimes=null,t._startTime=t._lastTime=t._ticks=0,t._inited=!1},t.getMeasuredTickTime=function(e){var i=0,n=t._tickTimes;if(!n||n.length<1)return-1;e=Math.min(n.length,e||0|t.getFPS());for(var r=0;e>r;r++)i+=n[r];return i/e},t.getMeasuredFPS=function(e){var i=t._times;return!i||i.length<2?-1:(e=Math.min(i.length-1,e||0|t.getFPS()),1e3/((i[0]-i[e])/e))},t.setPaused=function(e){t.paused=e},t.getPaused=function(){return t.paused},t.getTime=function(e){return t._startTime?t._getTime()-(e?t._pausedTime:0):-1},t.getEventTime=function(e){return t._startTime?(t._lastTime||t._startTime)-(e?t._pausedTime:0):-1},t.getTicks=function(e){return t._ticks-(e?t._pausedTicks:0)},t._handleSynch=function(){t._timerId=null,t._setupTick(),t._getTime()-t._lastTime>=.97*(t._interval-1)&&t._tick()},t._handleRAF=function(){t._timerId=null,t._setupTick(),t._tick()},t._handleTimeout=function(){t._timerId=null,t._setupTick(),t._tick()},t._setupTick=function(){if(null==t._timerId){var e=t.timingMode||t.useRAF&&t.RAF_SYNCHED;if(e==t.RAF_SYNCHED||e==t.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return t._timerId=i(e==t.RAF?t._handleRAF:t._handleSynch),void(t._raf=!0)}t._raf=!1,t._timerId=setTimeout(t._handleTimeout,t._interval)}},t._tick=function(){var e=t.paused,i=t._getTime(),n=i-t._lastTime;if(t._lastTime=i,t._ticks++,e&&(t._pausedTicks++,t._pausedTime+=n),t.hasEventListener("tick")){var r=new createjs.Event("tick"),s=t.maxDelta;r.delta=s&&n>s?s:n,r.paused=e,r.time=i,r.runTime=i-t._pausedTime,t.dispatchEvent(r)}for(t._tickTimes.unshift(t._getTime()-i);t._tickTimes.length>100;)t._tickTimes.pop();for(t._times.unshift(i);t._times.length>100;)t._times.pop()};var e=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);t._getTime=function(){return(e&&e.call(performance)||(new Date).getTime())-t._startTime},createjs.Ticker=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(e,i,n){this.ignoreGlobalPause=!1,this.loop=!1,this.duration=0,this.pluginData=n||{},this.target=e,this.position=null,this.passive=!1,this._paused=!1,this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],this._prevPosition=0,this._stepPosition=0,this._prevPos=-1,this._target=e,this._useTicks=!1,this._inited=!1,i&&(this._useTicks=i.useTicks,this.ignoreGlobalPause=i.ignoreGlobalPause,this.loop=i.loop,i.onChange&&this.addEventListener("change",i.onChange),i.override&&t.removeTweens(e)),i&&i.paused?this._paused=!0:createjs.Tween._register(this,!0),i&&null!=i.position&&this.setPosition(i.position,t.NONE)}var e=createjs.extend(t,createjs.EventDispatcher);t.NONE=0,t.LOOP=1,t.REVERSE=2,t.IGNORE={},t._tweens=[],t._plugins={},t.get=function(e,i,n,r){return r&&t.removeTweens(e),new t(e,i,n)},t.tick=function(e,i){for(var n=t._tweens.slice(),r=n.length-1;r>=0;r--){var s=n[r];i&&!s.ignoreGlobalPause||s._paused||s.tick(s._useTicks?1:e)}},t.handleEvent=function(t){"tick"==t.type&&this.tick(t.delta,t.paused)},t.removeTweens=function(e){if(e.tweenjs_count){for(var i=t._tweens,n=i.length-1;n>=0;n--){var r=i[n];r._target==e&&(r._paused=!0,i.splice(n,1))}e.tweenjs_count=0}},t.removeAllTweens=function(){for(var e=t._tweens,i=0,n=e.length;n>i;i++){var r=e[i];r._paused=!0,r.target&&(r.target.tweenjs_count=0)}e.length=0},t.hasActiveTweens=function(e){return e?e.tweenjs_count:t._tweens&&!!t._tweens.length},t.installPlugin=function(e,i){var n=e.priority;null==n&&(e.priority=n=0);for(var r=0,s=i.length,a=t._plugins;s>r;r++){var o=i[r];if(a[o]){for(var h=a[o],l=0,u=h.length;u>l&&!(n<h[l].priority);l++);a[o].splice(l,0,e)}else a[o]=[e]}},t._register=function(e,i){var n=e._target,r=t._tweens;if(i)n&&(n.tweenjs_count=n.tweenjs_count?n.tweenjs_count+1:1),r.push(e),!t._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",t),t._inited=!0);else{n&&n.tweenjs_count--;for(var s=r.length;s--;)if(r[s]==e)return void r.splice(s,1)}},e.reset=function(){var t;if(this._steps.length=0,this._actions.length=0,this._rawPosition=0,this._prevPosition=0,this._stepPosition=0,this._prevPos=-1,this.duration=0,this.position=null,this._curQueueProps)for(t in this._curQueueProps)delete this._curQueueProps[t];if(this._initQueueProps)for(t in this._initQueueProps)delete this._initQueueProps[t];return this},e.wait=function(t,e){if(null==t||0>=t)return this;var i=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:i,e:this._linearEase,p1:i,v:e})},e.to=function(t,e,i){return(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(t))})},e.call=function(t,e,i){return this._addAction({f:t,p:e||[this],o:i||this._target})},e.set=function(t,e){return this._appendQueueProps(t),this._addAction({f:this._set,o:this,p:[t,e||this._target]})},e.play=function(t){return t||(t=this),this.call(t.setPaused,[!1],t)},e.pause=function(t){return t||(t=this),this.call(t.setPaused,[!0],t)},e.setPosition=function(t,e){0>t&&(t=0),null==e&&(e=1);var i=t,n=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,n=!0,this.setPaused(!0))),i==this._prevPos)return n;var r=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=t,this._target)if(n)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var s=0,a=this._steps.length;a>s&&!(this._steps[s].t>i);s++);var o=this._steps[s-1];this._updateTargetProps(o,(this._stepPosition=i-o.t)/o.d)}return 0!=e&&this._actions.length>0&&(this._useTicks?this._runActions(i,i):1==e&&r>i?(r!=this.duration&&this._runActions(r,this.duration),this._runActions(0,i,!0)):this._runActions(r,i)),this.dispatchEvent("change"),n},e.tick=function(t){this._paused||this.setPosition(this._prevPosition+t)},e.setPaused=function(e){return this._paused===!!e||(this._paused=!!e,t._register(this,!e)),this},e.w=e.wait,e.t=e.to,e.c=e.call,e.s=e.set,e.toString=function(){return"[Tween]"},e.clone=function(){throw"Tween can not be cloned."},e._updateTargetProps=function(e,i){var n,r,s,a,o,h;if(e||1!=i){if(this.passive=!!e.v,this.passive)return;e.e&&(i=e.e(i,0,1,1)),n=e.p0,r=e.p1}else this.passive=!1,n=r=this._curQueueProps;for(var l in this._initQueueProps){null==(a=n[l])&&(n[l]=a=this._initQueueProps[l]),null==(o=r[l])&&(r[l]=o=a),s=a==o||0==i||1==i||"number"!=typeof a?1==i?o:a:a+(o-a)*i;var u=!1;if(h=t._plugins[l])for(var c=0,d=h.length;d>c;c++){var p=h[c].tween(this,l,s,n,r,i,!!e&&n==r,!e);p==t.IGNORE?u=!0:s=p}u||(this._target[l]=s)}},e._runActions=function(t,e,i){var n=t,r=e,s=-1,a=this._actions.length,o=1;for(t>e&&(n=e,r=t,s=a,a=o=-1);(s+=o)!=a;){var h=this._actions[s],l=h.t;(l==r||l>n&&r>l||i&&l==t)&&h.f.apply(h.o,h.p)}},e._appendQueueProps=function(e){var i,n,r,s,a;for(var o in e)if(void 0===this._initQueueProps[o]){if(n=this._target[o],i=t._plugins[o])for(r=0,s=i.length;s>r;r++)n=i[r].init(this,o,n);this._initQueueProps[o]=this._curQueueProps[o]=void 0===n?null:n}else n=this._curQueueProps[o];for(var o in e){if(n=this._curQueueProps[o],i=t._plugins[o])for(a=a||{},r=0,s=i.length;s>r;r++)i[r].step&&i[r].step(this,o,n,e[o],a);this._curQueueProps[o]=e[o]}return a&&this._appendQueueProps(a),this._curQueueProps},e._cloneProps=function(t){var e={};for(var i in t)e[i]=t[i];return e},e._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},e._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},e._set=function(t,e){for(var i in t)e[i]=t[i]},createjs.Tween=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.duration=0,this.loop=!1,this.position=null,this._paused=!1,this._tweens=[],this._labels=null,this._labelList=null,this._prevPosition=0,this._prevPos=-1,this._useTicks=!1,i&&(this._useTicks=i.useTicks,this.loop=i.loop,this.ignoreGlobalPause=i.ignoreGlobalPause,i.onChange&&this.addEventListener("change",i.onChange)),t&&this.addTween.apply(this,t),this.setLabels(e),i&&i.paused?this._paused=!0:createjs.Tween._register(this,!0),i&&null!=i.position&&this.setPosition(i.position,createjs.Tween.NONE)}var e=createjs.extend(t,createjs.EventDispatcher);e.addTween=function(t){var e=arguments.length;if(e>1){for(var i=0;e>i;i++)this.addTween(arguments[i]);return arguments[0]}return 0==e?null:(this.removeTween(t),this._tweens.push(t),t.setPaused(!0),t._paused=!1,t._useTicks=this._useTicks,t.duration>this.duration&&(this.duration=t.duration),this._prevPos>=0&&t.setPosition(this._prevPos,createjs.Tween.NONE),t)},e.removeTween=function(t){var e=arguments.length;if(e>1){for(var i=!0,n=0;e>n;n++)i=i&&this.removeTween(arguments[n]);return i}if(0==e)return!1;var r=this._tweens;for(n=r.length;n--;)if(r[n]==t)return r.splice(n,1),t.duration>=this.duration&&this.updateDuration(),!0;return!1},e.addLabel=function(t,e){this._labels[t]=e;var i=this._labelList;if(i){for(var n=0,r=i.length;r>n&&!(e<i[n].position);n++);i.splice(n,0,{label:t,position:e})}},e.setLabels=function(t){this._labels=t||{}},e.getLabels=function(){var t=this._labelList;if(!t){t=this._labelList=[];var e=this._labels;for(var i in e)t.push({label:i,position:e[i]});t.sort((function(t,e){return t.position-e.position}))}return t},e.getCurrentLabel=function(){var t=this.getLabels(),e=this.position,i=t.length;if(i){for(var n=0;i>n&&!(e<t[n].position);n++);return 0==n?null:t[n-1].label}return null},e.gotoAndPlay=function(t){this.setPaused(!1),this._goto(t)},e.gotoAndStop=function(t){this.setPaused(!0),this._goto(t)},e.setPosition=function(t,e){0>t&&(t=0);var i=this.loop?t%this.duration:t,n=!this.loop&&t>=this.duration;if(i==this._prevPos)return n;this._prevPosition=t,this.position=this._prevPos=i;for(var r=0,s=this._tweens.length;s>r;r++)if(this._tweens[r].setPosition(i,e),i!=this._prevPos)return!1;return n&&this.setPaused(!0),this.dispatchEvent("change"),n},e.setPaused=function(t){this._paused=!!t,createjs.Tween._register(this,!t)},e.updateDuration=function(){this.duration=0;for(var t=0,e=this._tweens.length;e>t;t++){var i=this._tweens[t];i.duration>this.duration&&(this.duration=i.duration)}},e.tick=function(t){this.setPosition(this._prevPosition+t)},e.resolve=function(t){var e=Number(t);return isNaN(e)&&(e=this._labels[t]),e},e.toString=function(){return"[Timeline]"},e.clone=function(){throw"Timeline can not be cloned."},e._goto=function(t){var e=this.resolve(t);null!=e&&this.setPosition(e)},createjs.Timeline=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Ease cannot be instantiated."}t.linear=function(t){return t},t.none=t.linear,t.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},t.getPowIn=function(t){return function(e){return Math.pow(e,t)}},t.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},t.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},t.sineOut=function(t){return Math.sin(t*Math.PI/2)},t.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},t.backIn=t.getBackIn(1.7),t.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},t.backOut=t.getBackOut(1.7),t.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)}},t.backInOut=t.getBackInOut(1.7),t.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},t.circOut=function(t){return Math.sqrt(1- --t*t)},t.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.bounceInOut=function(e){return.5>e?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.getElasticIn=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return-t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e)}},t.elasticIn=t.getElasticIn(1,.3),t.getElasticOut=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return t*Math.pow(2,-10*n)*Math.sin((n-r)*i/e)+1}},t.elasticOut=t.getElasticOut(1,.3),t.getElasticInOut=function(t,e){var i=2*Math.PI;return function(n){var r=e/i*Math.asin(1/t);return(n*=2)<1?-.5*t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e):t*Math.pow(2,-10*(n-=1))*Math.sin((n-r)*i/e)*.5+1}},t.elasticInOut=t.getElasticInOut(1,.3*1.5),createjs.Ease=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"MotionGuidePlugin cannot be instantiated."}t.priority=0,t._rotOffS,t._rotOffE,t._rotNormS,t._rotNormE,t.install=function(){return createjs.Tween.installPlugin(t,["guide","x","y","rotation"]),createjs.Tween.IGNORE},t.init=function(t,e,i){var n=t.target;return n.hasOwnProperty("x")||(n.x=0),n.hasOwnProperty("y")||(n.y=0),n.hasOwnProperty("rotation")||(n.rotation=0),"rotation"==e&&(t.__needsRot=!0),"guide"==e?null:i},t.step=function(e,i,n,r,s){if("rotation"==i&&(e.__rotGlobalS=n,e.__rotGlobalE=r,t.testRotData(e,s)),"guide"!=i)return r;var a,o=r;o.hasOwnProperty("path")||(o.path=[]);var h=o.path;if(o.hasOwnProperty("end")||(o.end=1),o.hasOwnProperty("start")||(o.start=n&&n.hasOwnProperty("end")&&n.path===h?n.end:0),o.hasOwnProperty("_segments")&&o._length)return r;var l=h.length;if(!(l>=6&&(l-2)%4==0))throw"invalid 'path' data, please see documentation for valid paths";o._segments=[],o._length=0;for(var u=2;l>u;u+=4){for(var c,d,p=h[u-2],f=h[u-1],g=h[u+0],_=h[u+1],v=h[u+2],m=h[u+3],y=p,b=f,x=0,T=[],E=1;10>=E;E++){var w=E/10,S=1-w;c=S*S*p+2*S*w*g+w*w*v,d=S*S*f+2*S*w*_+w*w*m,x+=T[T.push(Math.sqrt((a=c-y)*a+(a=d-b)*a))-1],y=c,b=d}o._segments.push(x),o._segments.push(T),o._length+=x}a=o.orient,o.orient=!0;var A={};return t.calc(o,o.start,A),e.__rotPathS=Number(A.rotation.toFixed(5)),t.calc(o,o.end,A),e.__rotPathE=Number(A.rotation.toFixed(5)),o.orient=!1,t.calc(o,o.end,s),o.orient=a,o.orient?(e.__guideData=o,t.testRotData(e,s),r):r},t.testRotData=function(t,e){if(void 0===t.__rotGlobalS||void 0===t.__rotGlobalE){if(t.__needsRot)return;t.__rotGlobalS=t.__rotGlobalE=void 0!==t._curQueueProps.rotation?t._curQueueProps.rotation:e.rotation=t.target.rotation||0}if(void 0!==t.__guideData){var i=t.__guideData,n=t.__rotGlobalE-t.__rotGlobalS,r=t.__rotPathE-t.__rotPathS,s=n-r;if("auto"==i.orient)s>180?s-=360:-180>s&&(s+=360);else if("cw"==i.orient){for(;0>s;)s+=360;0==s&&n>0&&180!=n&&(s+=360)}else if("ccw"==i.orient){for(s=n-(r>180?360-r:r);s>0;)s-=360;0==s&&0>n&&-180!=n&&(s-=360)}i.rotDelta=s,i.rotOffS=t.__rotGlobalS-t.__rotPathS,t.__rotGlobalS=t.__rotGlobalE=t.__guideData=t.__needsRot=void 0}},t.tween=function(e,i,n,r,s,a,o){var h=s.guide;if(null==h||h===r.guide)return n;if(h.lastRatio!=a){var l=(h.end-h.start)*(o?h.end:a)+h.start;switch(t.calc(h,l,e.target),h.orient){case"cw":case"ccw":case"auto":e.target.rotation+=h.rotOffS+h.rotDelta*a;break;case"fixed":default:e.target.rotation+=h.rotOffS}h.lastRatio=a}return"rotation"!=i||h.orient&&"false"!=h.orient?e.target[i]:n},t.calc=function(e,i,n){null==e._segments&&t.validate(e),null==n&&(n={x:0,y:0,rotation:0});for(var r=e._segments,s=e.path,a=e._length*i,o=r.length-2,h=0;a>r[h]&&o>h;)a-=r[h],h+=2;var l=r[h+1],u=0;for(o=l.length-1;a>l[u]&&o>u;)a-=l[u],u++;var c=u/++o+a/(o*l[u]);h=2*h+2;var d=1-c;return n.x=d*d*s[h-2]+2*d*c*s[h+0]+c*c*s[h+2],n.y=d*d*s[h-1]+2*d*c*s[h+1]+c*c*s[h+3],e.orient&&(n.rotation=57.2957795*Math.atan2((s[h+1]-s[h-1])*d+(s[h+3]-s[h+1])*c,(s[h+0]-s[h-2])*d+(s[h+2]-s[h+0])*c)),n},createjs.MotionGuidePlugin=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.TweenJS=createjs.TweenJS||{};t.version="0.6.0",t.buildDate="Mon, 26 Jan 2015 19:15:57 GMT"}(),
/*!
* @license EaselJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2013 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
this.createjs=this.createjs||{},function(){"use strict";function t(e,i,n,r){this.Container_constructor(),!t.inited&&t.init(),this.mode=e||t.INDEPENDENT,this.startPosition=i||0,this.loop=n,this.currentFrame=0,this.timeline=new createjs.Timeline(null,r,{paused:!0,position:i,useTicks:!0}),this.paused=!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||null,this._synchOffset=0,this._prevPos=-1,this._prevPosition=0,this._t=0,this._framerate=0,this._duration=0,this._managed={}}function e(){throw"MovieClipPlugin cannot be instantiated."}var i=createjs.extend(t,createjs.Container);t.INDEPENDENT="independent",t.SINGLE_FRAME="single",t.SYNCHED="synched",t.inited=!1,t.init=function(){t.inited||(e.install(),t.inited=!0)},i.getLabels=function(){return this.timeline.getLabels()},i.getCurrentLabel=function(){return this._updateTimeline(),this.timeline.getCurrentLabel()};try{Object.defineProperties(i,{labels:{get:i.getLabels},currentLabel:{get:i.getCurrentLabel}})}catch(t){}Object.defineProperty(i,"elapsedTime",{get:function(){return this._t},set:function(t){this._t=t}}),Object.defineProperty(i,"framerate",{get:function(){return this._framerate},set:function(t){t>0?(this._framerate=t,this._duration=t?this.timeline.duration/t:0):this._framerate=this._duration=0}}),i.initialize=t,i.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},i.draw=function(t,e){return this.DisplayObject_draw(t,e)||(this._updateTimeline(),this.Container_draw(t,e)),!0},i.play=function(){this.paused=!1},i.stop=function(){this.paused=!0},i.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},i.gotoAndStop=function(t){this.paused=!0,this._goto(t)},i.advance=function(e){var i=t.INDEPENDENT;if(this.mode==i){if(!this._framerate){for(var n=this,r=n._framerate;(n=n.parent)&&null==r;)n.mode==i&&(r=n._framerate);this.framerate=r}this.paused||(this._framerate>0?(e&&(this._t+=.001*e),this._t>this._duration&&(this._t=this.timeline.loop?this._t-this._duration:this._duration),this._prevPosition=Math.floor(this._t*this._framerate+1e-8),this._prevPosition>this.timeline.duration&&(this._prevPosition=this.timeline.duration)):this._prevPosition=this._prevPos<0?0:this._prevPosition+1,this._updateTimeline())}},i.clone=function(){throw"MovieClip cannot be cloned."},i.toString=function(){return"[MovieClip (name="+this.name+")]"},i._tick=function(t){this.tickEnabled&&this.advance(t&&t.delta),this.Container__tick(t)},i._goto=function(t){var e=this.timeline.resolve(t);null!=e&&(-1==this._prevPos&&(this._prevPos=NaN),this._prevPosition=e,this._t=this._framerate>0?e/this._framerate:0,this._updateTimeline())},i._reset=function(){this._prevPos=-1,this._t=0,this.currentFrame=0},i._updateTimeline=function(){var e=this.timeline,i=this.mode!=t.INDEPENDENT;if(e.loop=null==this.loop||this.loop,i?e.setPosition(this.startPosition+(this.mode==t.SINGLE_FRAME?0:this._synchOffset),createjs.Tween.NONE):e.setPosition(this._prevPos<0?0:this._prevPosition,this.actionsEnabled?null:createjs.Tween.NONE),this._prevPosition=e._prevPosition,this._prevPos!=e._prevPos){for(var n in this.currentFrame=this._prevPos=e._prevPos,this._managed)this._managed[n]=1;for(var r=e._tweens,s=0,a=r.length;a>s;s++){var o=r[s],h=o._target;if(h!=this&&!o.passive){var l=o._stepPosition;h instanceof createjs.DisplayObject?this._addManagedChild(h,l):this._setState(h.state,l)}}var u=this.children;for(s=u.length-1;s>=0;s--){var c=u[s].id;1==this._managed[c]&&(this.removeChildAt(s),delete this._managed[c])}}},i._setState=function(t,e){if(t)for(var i=t.length-1;i>=0;i--){var n=t[i],r=n.t,s=n.p;for(var a in s)r[a]=s[a];this._addManagedChild(r,e)}},i._addManagedChild=function(e,i){e._off||(this.addChildAt(e,0),e instanceof t&&(e._synchOffset=i,e.mode==t.INDEPENDENT&&e.autoReset&&!this._managed[e.id]&&e._reset()),this._managed[e.id]=2)},i._getBounds=function(t,e){var i=this.DisplayObject_getBounds();return i||(this._updateTimeline(),this.frameBounds&&(i=this._rectangle.copy(this.frameBounds[this.currentFrame]))),i?this._transformBounds(i,t,e):this.Container__getBounds(t,e)},createjs.MovieClip=createjs.promote(t,"Container"),e.priority=100,e.install=function(){createjs.Tween.installPlugin(e,["startPosition"])},e.init=function(t,e,i){return i},e.step=function(){},e.tween=function(e,i,n,r,s,a){return e.target instanceof t?1==a?s[i]:r[i]:n}}(),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.MovieClip=createjs.MovieClip||{};t.version="0.8.7",t.buildDate="Tue, 06 Oct 2015 13:52:46 GMT"}(),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PIXI=t()}}((function(){return function t(e,i,n){function r(a,o){if(!i[a]){if(!e[a]){var h="function"==typeof require&&require;if(!o&&h)return h(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[a]={exports:{}};e[a][0].call(u.exports,(function(t){var i=e[a][1][t];return r(i||t)}),u,u.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e,i){(function(t,i){!function(){function n(){}function r(t){return t}function s(t){return!!t}function a(t){return!t}function o(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function h(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}function l(t){return N(t)||"number"==typeof t.length&&t.length>=0&&t.length%1==0}function u(t,e){for(var i=-1,n=t.length;++i<n;)e(t[i],i,t)}function c(t,e){for(var i=-1,n=t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}function d(t){return c(Array(t),(function(t,e){return e}))}function p(t,e,i){return u(t,(function(t,n,r){i=e(i,t,n,r)})),i}function f(t,e){u(U(t),(function(i){e(t[i],i)}))}function g(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}function _(t){var e,i,n=-1;return l(t)?(e=t.length,function(){return n++,e>n?n:null}):(i=U(t),e=i.length,function(){return n++,e>n?i[n]:null})}function v(t,e){return e=null==e?t.length-1:+e,function(){for(var i=Math.max(arguments.length-e,0),n=Array(i),r=0;i>r;r++)n[r]=arguments[r+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n)}}}function m(t){return function(e,i,n){return t(e,n)}}function y(t){return function(e,i,r){r=h(r||n);var s=_(e=e||[]);if(0>=t)return r(null);var a=!1,l=0,u=!1;!function n(){if(a&&0>=l)return r(null);for(;t>l&&!u;){var h=s();if(null===h)return a=!0,void(0>=l&&r(null));l+=1,i(e[h],h,o((function(t){l-=1,t?(r(t),u=!0):n()})))}}()}}function b(t){return function(e,i,n){return t(F.eachOf,e,i,n)}}function x(t){return function(e,i,n,r){return t(y(i),e,n,r)}}function T(t){return function(e,i,n){return t(F.eachOfSeries,e,i,n)}}function E(t,e,i,r){r=h(r||n);var s=l(e=e||[])?[]:{};t(e,(function(t,e,n){i(t,(function(t,i){s[e]=i,n(t)}))}),(function(t){r(t,s)}))}function w(t,e,i,n){var r=[];t(e,(function(t,e,n){i(t,(function(i){i&&r.push({index:e,value:t}),n()}))}),(function(){n(c(r.sort((function(t,e){return t.index-e.index})),(function(t){return t.value})))}))}function S(t,e,i,n){w(t,e,(function(t,e){i(t,(function(t){e(!t)}))}),n)}function A(t,e,i){return function(n,r,s,a){function o(){a&&a(i(!1,void 0))}function h(t,n,r){return a?void s(t,(function(n){a&&e(n)&&(a(i(!0,t)),a=s=!1),r()})):r()}arguments.length>3?t(n,r,h,o):(a=s,s=r,t(n,h,o))}}function P(t,e){return e}function C(t,e,i){i=i||n;var r=l(e)?[]:{};t(e,(function(t,e,i){t(v((function(t,n){n.length<=1&&(n=n[0]),r[e]=n,i(t)})))}),(function(t){i(t,r)}))}function L(t,e,i,n){var r=[];t(e,(function(t,e,n){i(t,(function(t,e){r=r.concat(e||[]),n(t)}))}),(function(t){n(t,r)}))}function O(t,e,i){function r(t,e,i,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");return t.started=!0,N(e)||(e=[e]),0===e.length&&t.idle()?F.setImmediate((function(){t.drain()})):(u(e,(function(e){var s={data:e,callback:r||n};i?t.tasks.unshift(s):t.tasks.push(s),t.tasks.length===t.concurrency&&t.saturated()})),void F.setImmediate(t.process))}function s(t,e){return function(){a-=1;var i=!1,n=arguments;u(e,(function(t){u(h,(function(e,n){e!==t||i||(h.splice(n,1),i=!0)})),t.callback.apply(t,n)})),t.tasks.length+a===0&&t.drain(),t.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var a=0,h=[],l={tasks:[],concurrency:e,payload:i,saturated:n,empty:n,drain:n,started:!1,paused:!1,push:function(t,e){r(l,t,!1,e)},kill:function(){l.drain=n,l.tasks=[]},unshift:function(t,e){r(l,t,!0,e)},process:function(){for(;!l.paused&&a<l.concurrency&&l.tasks.length;){var e=l.payload?l.tasks.splice(0,l.payload):l.tasks.splice(0,l.tasks.length),i=c(e,(function(t){return t.data}));0===l.tasks.length&&l.empty(),a+=1,h.push(e[0]);var n=o(s(l,e));t(i,n)}},length:function(){return l.tasks.length},running:function(){return a},workersList:function(){return h},idle:function(){return l.tasks.length+a===0},pause:function(){l.paused=!0},resume:function(){if(!1!==l.paused){l.paused=!1;for(var t=Math.min(l.concurrency,l.tasks.length),e=1;t>=e;e++)F.setImmediate(l.process)}}};return l}function j(t){return v((function(e,i){e.apply(null,i.concat([v((function(e,i){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&u(i,(function(e){console[t](e)})))}))]))}))}function R(t){return function(e,i,n){t(d(e),i,n)}}function M(t){return v((function(e,i){var n=v((function(i){var n=this,r=i.pop();return t(e,(function(t,e,r){t.apply(n,i.concat([r]))}),r)}));return i.length?n.apply(this,i):n}))}function D(t){return v((function(e){var i=e.pop();e.push((function(){var t=arguments;n?F.setImmediate((function(){i.apply(null,t)})):i.apply(null,t)}));var n=!0;t.apply(this,e),n=!1}))}var I,F={},k="object"==typeof self&&self.self===self&&self||"object"==typeof i&&i.global===i&&i||this;null!=k&&(I=k.async),F.noConflict=function(){return k.async=I,F};var B=Object.prototype.toString,N=Array.isArray||function(t){return"[object Array]"===B.call(t)},U=Object.keys||function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e},H="function"==typeof setImmediate&&setImmediate,X=H?function(t){H(t)}:function(t){setTimeout(t,0)};"object"==typeof t&&"function"==typeof t.nextTick?F.nextTick=t.nextTick:F.nextTick=X,F.setImmediate=H?X:F.nextTick,F.forEach=F.each=function(t,e,i){return F.eachOf(t,m(e),i)},F.forEachSeries=F.eachSeries=function(t,e,i){return F.eachOfSeries(t,m(e),i)},F.forEachLimit=F.eachLimit=function(t,e,i,n){return y(e)(t,m(i),n)},F.forEachOf=F.eachOf=function(t,e,i){function r(t){l--,t?i(t):null===s&&0>=l&&i(null)}i=h(i||n);for(var s,a=_(t=t||[]),l=0;null!=(s=a());)l+=1,e(t[s],s,o(r));0===l&&i(null)},F.forEachOfSeries=F.eachOfSeries=function(t,e,i){i=h(i||n);var r=_(t=t||[]),s=r();!function n(){var a=!0;return null===s?i(null):(e(t[s],s,o((function(t){if(t)i(t);else{if(null===(s=r()))return i(null);a?F.setImmediate(n):n()}}))),void(a=!1))}()},F.forEachOfLimit=F.eachOfLimit=function(t,e,i,n){y(e)(t,i,n)},F.map=b(E),F.mapSeries=T(E),F.mapLimit=x(E),F.inject=F.foldl=F.reduce=function(t,e,i,n){F.eachOfSeries(t,(function(t,n,r){i(e,t,(function(t,i){e=i,r(t)}))}),(function(t){n(t,e)}))},F.foldr=F.reduceRight=function(t,e,i,n){var s=c(t,r).reverse();F.reduce(s,e,i,n)},F.transform=function(t,e,i,n){3===arguments.length&&(n=i,i=e,e=N(t)?[]:{}),F.eachOf(t,(function(t,n,r){i(e,t,n,r)}),(function(t){n(t,e)}))},F.select=F.filter=b(w),F.selectLimit=F.filterLimit=x(w),F.selectSeries=F.filterSeries=T(w),F.reject=b(S),F.rejectLimit=x(S),F.rejectSeries=T(S),F.any=F.some=A(F.eachOf,s,r),F.someLimit=A(F.eachOfLimit,s,r),F.all=F.every=A(F.eachOf,a,a),F.everyLimit=A(F.eachOfLimit,a,a),F.detect=A(F.eachOf,r,P),F.detectSeries=A(F.eachOfSeries,r,P),F.detectLimit=A(F.eachOfLimit,r,P),F.sortBy=function(t,e,i){function n(t,e){var i=t.criteria,n=e.criteria;return n>i?-1:i>n?1:0}F.map(t,(function(t,i){e(t,(function(e,n){e?i(e):i(null,{value:t,criteria:n})}))}),(function(t,e){return t?i(t):void i(null,c(e.sort(n),(function(t){return t.value})))}))},F.auto=function(t,e,i){function r(t){m.unshift(t)}function s(t){var e=g(m,t);e>=0&&m.splice(e,1)}function a(){l--,u(m.slice(0),(function(t){t()}))}"function"==typeof arguments[1]&&(i=e,e=null),i=h(i||n);var o=U(t),l=o.length;if(!l)return i(null);e||(e=l);var c={},d=0,_=!1,m=[];r((function(){l||i(null,c)})),u(o,(function(n){function o(){return e>d&&p(m,(function(t,e){return t&&c.hasOwnProperty(e)}),!0)&&!c.hasOwnProperty(n)}if(!_){for(var h,l=N(t[n])?t[n]:[t[n]],u=v((function(t,e){if(d--,e.length<=1&&(e=e[0]),t){var r={};f(c,(function(t,e){r[e]=t})),r[n]=e,_=!0,i(t,r)}else c[n]=e,F.setImmediate(a)})),m=l.slice(0,l.length-1),y=m.length;y--;){if(!(h=t[m[y]]))throw new Error("Has nonexistent dependency in "+m.join(", "));if(N(h)&&g(h,n)>=0)throw new Error("Has cyclic dependencies")}o()?(d++,l[l.length-1](u,c)):r((function t(){o()&&(d++,s(t),l[l.length-1](u,c))}))}}))},F.retry=function(t,e,i){function n(t,e){if("number"==typeof e)t.times=parseInt(e,10)||s;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||s,t.interval=parseInt(e.interval,10)||a}}function r(t,e){function i(t,i){return function(n){t((function(t,e){n(!t||i,{err:t,result:e})}),e)}}function n(t){return function(e){setTimeout((function(){e(null)}),t)}}for(;h.times;){var r=!(h.times-=1);o.push(i(h.task,r)),!r&&h.interval>0&&o.push(n(h.interval))}F.series(o,(function(e,i){i=i[i.length-1],(t||h.callback)(i.err,i.result)}))}var s=5,a=0,o=[],h={times:s,interval:a},l=arguments.length;if(1>l||l>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=l&&"function"==typeof t&&(i=e,e=t),"function"!=typeof t&&n(h,t),h.callback=i,h.task=e,h.callback?r():r},F.waterfall=function(t,e){if(e=h(e||n),!N(t)){var i=new Error("First argument to waterfall must be an array of functions");return e(i)}return t.length?void function t(i){return v((function(n,r){if(n)e.apply(null,[n].concat(r));else{var s=i.next();s?r.push(t(s)):r.push(e),D(i).apply(null,r)}}))}(F.iterator(t))():e()},F.parallel=function(t,e){C(F.eachOf,t,e)},F.parallelLimit=function(t,e,i){C(y(e),t,i)},F.series=function(t,e){C(F.eachOfSeries,t,e)},F.iterator=function(t){return function e(i){function n(){return t.length&&t[i].apply(null,arguments),n.next()}return n.next=function(){return i<t.length-1?e(i+1):null},n}(0)},F.apply=v((function(t,e){return v((function(i){return t.apply(null,e.concat(i))}))})),F.concat=b(L),F.concatSeries=T(L),F.whilst=function(t,e,i){if(i=i||n,t()){var r=v((function(n,s){n?i(n):t.apply(this,s)?e(r):i.apply(null,[null].concat(s))}));e(r)}else i(null)},F.doWhilst=function(t,e,i){var n=0;return F.whilst((function(){return++n<=1||e.apply(this,arguments)}),t,i)},F.until=function(t,e,i){return F.whilst((function(){return!t.apply(this,arguments)}),e,i)},F.doUntil=function(t,e,i){return F.doWhilst(t,(function(){return!e.apply(this,arguments)}),i)},F.during=function(t,e,i){i=i||n;var r=v((function(e,n){e?i(e):(n.push(s),t.apply(this,n))})),s=function(t,n){t?i(t):n?e(r):i(null)};t(s)},F.doDuring=function(t,e,i){var n=0;F.during((function(t){n++<1?t(null,!0):e.apply(this,arguments)}),t,i)},F.queue=function(t,e){return O((function(e,i){t(e[0],i)}),e,1)},F.priorityQueue=function(t,e){function i(t,e){return t.priority-e.priority}function r(t,e,r,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");return t.started=!0,N(e)||(e=[e]),0===e.length?F.setImmediate((function(){t.drain()})):void u(e,(function(e){var a={data:e,priority:r,callback:"function"==typeof s?s:n};t.tasks.splice(function(t,e,i){for(var n=-1,r=t.length-1;r>n;){var s=n+(r-n+1>>>1);i(e,t[s])>=0?n=s:r=s-1}return n}(t.tasks,a,i)+1,0,a),t.tasks.length===t.concurrency&&t.saturated(),F.setImmediate(t.process)}))}var s=F.queue(t,e);return s.push=function(t,e,i){r(s,t,e,i)},delete s.unshift,s},F.cargo=function(t,e){return O(t,1,e)},F.log=j("log"),F.dir=j("dir"),F.memoize=function(t,e){var i={},n={},s=Object.prototype.hasOwnProperty;e=e||r;var a=v((function(r){var a=r.pop(),o=e.apply(null,r);s.call(i,o)?F.setImmediate((function(){a.apply(null,i[o])})):s.call(n,o)?n[o].push(a):(n[o]=[a],t.apply(null,r.concat([v((function(t){i[o]=t;var e=n[o];delete n[o];for(var r=0,s=e.length;s>r;r++)e[r].apply(null,t)}))])))}));return a.memo=i,a.unmemoized=t,a},F.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},F.times=R(F.map),F.timesSeries=R(F.mapSeries),F.timesLimit=function(t,e,i,n){return F.mapLimit(d(t),e,i,n)},F.seq=function(){var t=arguments;return v((function(e){var i=this,r=e[e.length-1];"function"==typeof r?e.pop():r=n,F.reduce(t,e,(function(t,e,n){e.apply(i,t.concat([v((function(t,e){n(t,e)}))]))}),(function(t,e){r.apply(i,[t].concat(e))}))}))},F.compose=function(){return F.seq.apply(null,Array.prototype.reverse.call(arguments))},F.applyEach=M(F.eachOf),F.applyEachSeries=M(F.eachOfSeries),F.forever=function(t,e){var i=o(e||n),r=D(t);!function t(e){return e?i(e):void r(t)}()},F.ensureAsync=D,F.constant=v((function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}})),F.wrapSync=F.asyncify=function(t){return v((function(e){var i,n=e.pop();try{i=t.apply(this,e)}catch(t){return n(t)}!function(t){var e=typeof t;return"function"===e||"object"===e&&!!t}(i)||"function"!=typeof i.then?n(null,i):i.then((function(t){n(null,t)})).catch((function(t){n(t.message?t:new Error(t))}))}))},"object"==typeof e&&e.exports?e.exports=F:k.async=F}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:3}],2:[function(t,e,i){(function(t){function e(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(t){return r.exec(t).slice(1)};i.resolve=function(){for(var i="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var a=s>=0?arguments[s]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(i=a+"/"+i,r="/"===a.charAt(0))}return(r?"/":"")+(i=e(n(i.split("/"),(function(t){return!!t})),!r).join("/"))||"."},i.normalize=function(t){var r=i.isAbsolute(t),s="/"===a(t,-1);return(t=e(n(t.split("/"),(function(t){return!!t})),!r).join("/"))||r||(t="."),t&&s&&(t+="/"),(r?"/":"")+t},i.isAbsolute=function(t){return"/"===t.charAt(0)},i.join=function(){var t=Array.prototype.slice.call(arguments,0);return i.normalize(n(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},i.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=i.resolve(t).substr(1),e=i.resolve(e).substr(1);for(var r=n(t.split("/")),s=n(e.split("/")),a=Math.min(r.length,s.length),o=a,h=0;a>h;h++)if(r[h]!==s[h]){o=h;break}var l=[];for(h=o;h<r.length;h++)l.push("..");return(l=l.concat(s.slice(o))).join("/")},i.sep="/",i.delimiter=":",i.dirname=function(t){var e=s(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},i.basename=function(t,e){var i=s(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},i.extname=function(t){return s(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return 0>e&&(e=t.length+e),t.substr(e,i)}}).call(this,t("_process"))},{_process:3}],3:[function(t,e,i){function n(){u=!1,o.length?l=o.concat(l):c=-1,l.length&&r()}function r(){if(!u){var t=setTimeout(n);u=!0;for(var e=l.length;e;){for(o=l,l=[];++c<e;)o&&o[c].run();c=-1,e=l.length}o=null,u=!1,clearTimeout(t)}}function s(t,e){this.fun=t,this.array=e}function a(){}var o,h=e.exports={},l=[],u=!1,c=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new s(t,e)),1!==l.length||u||setTimeout(r,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=a,h.addListener=a,h.once=a,h.off=a,h.removeListener=a,h.removeAllListeners=a,h.emit=a,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],4:[function(t,e,i){(function(t){!function(n){function r(t){throw new RangeError(j[t])}function s(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function a(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+s((t=t.replace(O,".")).split("."),e).join(".")}function o(t){for(var e,i,n=[],r=0,s=t.length;s>r;)(e=t.charCodeAt(r++))>=55296&&56319>=e&&s>r?56320==(64512&(i=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--):n.push(e);return n}function h(t){return s(t,(function(t){var e="";return t>65535&&(e+=D((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+D(t)})).join("")}function l(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:b}function u(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function c(t,e,i){var n=0;for(t=i?M(t/w):t>>1,t+=M(t/e);t>R*T>>1;n+=b)t=M(t/R);return M(n+(R+1)*t/(t+E))}function d(t){var e,i,n,s,a,o,u,d,p,f,g=[],_=t.length,v=0,m=A,E=S;for(0>(i=t.lastIndexOf(P))&&(i=0),n=0;i>n;++n)t.charCodeAt(n)>=128&&r("not-basic"),g.push(t.charCodeAt(n));for(s=i>0?i+1:0;_>s;){for(a=v,o=1,u=b;s>=_&&r("invalid-input"),((d=l(t.charCodeAt(s++)))>=b||d>M((y-v)/o))&&r("overflow"),v+=d*o,!((p=E>=u?x:u>=E+T?T:u-E)>d);u+=b)o>M(y/(f=b-p))&&r("overflow"),o*=f;E=c(v-a,e=g.length+1,0==a),M(v/e)>y-m&&r("overflow"),m+=M(v/e),v%=e,g.splice(v++,0,m)}return h(g)}function p(t){var e,i,n,s,a,h,l,d,p,f,g,_,v,m,E,w=[];for(_=(t=o(t)).length,e=A,i=0,a=S,h=0;_>h;++h)128>(g=t[h])&&w.push(D(g));for(n=s=w.length,s&&w.push(P);_>n;){for(l=y,h=0;_>h;++h)(g=t[h])>=e&&l>g&&(l=g);for(l-e>M((y-i)/(v=n+1))&&r("overflow"),i+=(l-e)*v,e=l,h=0;_>h;++h)if(e>(g=t[h])&&++i>y&&r("overflow"),g==e){for(d=i,p=b;!((f=a>=p?x:p>=a+T?T:p-a)>d);p+=b)E=d-f,m=b-f,w.push(D(u(f+E%m,0))),d=M(E/m);w.push(D(u(d,0))),a=c(i,v,n==s),i=0,++n}++i,++e}return w.join("")}var f="object"==typeof i&&i&&!i.nodeType&&i,g="object"==typeof e&&e&&!e.nodeType&&e,_="object"==typeof t&&t;(_.global===_||_.window===_||_.self===_)&&(n=_);var v,m,y=2147483647,b=36,x=1,T=26,E=38,w=700,S=72,A=128,P="-",C=/^xn--/,L=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=b-x,M=Math.floor,D=String.fromCharCode;if(v={version:"1.3.2",ucs2:{decode:o,encode:h},decode:d,encode:p,toASCII:function(t){return a(t,(function(t){return L.test(t)?"xn--"+p(t):t}))},toUnicode:function(t){return a(t,(function(t){return C.test(t)?d(t.slice(4).toLowerCase()):t}))}},f&&g)if(e.exports==f)g.exports=v;else for(m in v)v.hasOwnProperty(m)&&(f[m]=v[m]);else n.punycode=v}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,i,s){e=e||"&",i=i||"=";var a={};if("string"!=typeof t||0===t.length)return a;var o=/\+/g;t=t.split(e);var h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var u=0;l>u;++u){var c,d,p,f,g=t[u].replace(o,"%20"),_=g.indexOf(i);_>=0?(c=g.substr(0,_),d=g.substr(_+1)):(c=g,d=""),p=decodeURIComponent(c),f=decodeURIComponent(d),n(a,p)?r(a[p])?a[p].push(f):a[p]=[a[p],f]:a[p]=f}return a};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],6:[function(t,e,i){"use strict";function n(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,o){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?n(a(t),(function(a){var o=encodeURIComponent(r(a))+i;return s(t[a])?n(t[a],(function(t){return o+encodeURIComponent(r(t))})).join(e):o+encodeURIComponent(r(t[a]))})).join(e):o?encodeURIComponent(r(o))+i+encodeURIComponent(r(t)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],7:[function(t,e,i){"use strict";i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":5,"./encode":6}],8:[function(t,e,i){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,i){if(t&&a(t)&&t instanceof n)return t;var r=new n;return r.parse(t,e,i),r}function s(t){return"string"==typeof t}function a(t){return"object"==typeof t&&null!==t}function o(t){return null===t}var h=t("punycode");i.parse=r,i.resolve=function(t,e){return r(t,!1,!0).resolve(e)},i.resolveObject=function(t,e){return t?r(t,!1,!0).resolveObject(e):e},i.format=function(t){return s(t)&&(t=r(t)),t instanceof n?t.format():n.prototype.format.call(t)},i.Url=n;var l=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(c),p=["%","/","?",";","#"].concat(d),f=["/","?","#"],g=/^[a-z0-9A-Z_-]{0,63}$/,_=/^([a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=t("querystring");n.prototype.parse=function(t,e,i){if(!s(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t;n=n.trim();var r=l.exec(n);if(r){var a=(r=r[0]).toLowerCase();this.protocol=a,n=n.substr(r.length)}if(i||r||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var o="//"===n.substr(0,2);!o||r&&m[r]||(n=n.substr(2),this.slashes=!0)}if(!m[r]&&(o||r&&!y[r])){for(var u=-1,c=0;c<f.length;c++){-1!==(E=n.indexOf(f[c]))&&(-1===u||u>E)&&(u=E)}var x,T;-1!==(T=-1===u?n.lastIndexOf("@"):n.lastIndexOf("@",u))&&(x=n.slice(0,T),n=n.slice(T+1),this.auth=decodeURIComponent(x)),u=-1;for(c=0;c<p.length;c++){var E;-1!==(E=n.indexOf(p[c]))&&(-1===u||u>E)&&(u=E)}-1===u&&(u=n.length),this.host=n.slice(0,u),n=n.slice(u),this.parseHost(),this.hostname=this.hostname||"";var w="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!w)for(var S=this.hostname.split(/\./),A=(c=0,S.length);A>c;c++){var P=S[c];if(P&&!P.match(g)){for(var C="",L=0,O=P.length;O>L;L++)C+=P.charCodeAt(L)>127?"x":P[L];if(!C.match(g)){var j=S.slice(0,c),R=S.slice(c+1),M=P.match(_);M&&(j.push(M[1]),R.unshift(M[2])),R.length&&(n="/"+R.join(".")+n),this.hostname=j.join(".");break}}}if(this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),!w){var D=this.hostname.split("."),I=[];for(c=0;c<D.length;++c){var F=D[c];I.push(F.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(F):F)}this.hostname=I.join(".")}var k=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+k,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!v[a])for(c=0,A=d.length;A>c;c++){var N=d[c],U=encodeURIComponent(N);U===N&&(U=escape(N)),n=n.split(N).join(U)}var H=n.indexOf("#");-1!==H&&(this.hash=n.substr(H),n=n.slice(0,H));var X=n.indexOf("?");if(-1!==X?(this.search=n.substr(X),this.query=n.substr(X+1),e&&(this.query=b.parse(this.query)),n=n.slice(0,X)):e&&(this.search="",this.query={}),n&&(this.pathname=n),y[a]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){k=this.pathname||"",F=this.search||"";this.path=k+F}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,s="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&a(this.query)&&Object.keys(this.query).length&&(s=b.stringify(this.query));var o=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==r?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),e+r+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(o=o.replace("#","%23"))+n},n.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(s(t)){var e=new n;e.parse(t,!1,!0),t=e}var i=new n;if(Object.keys(this).forEach((function(t){i[t]=this[t]}),this),i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol)return Object.keys(t).forEach((function(e){"protocol"!==e&&(i[e]=t[e])})),y[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i;if(t.protocol&&t.protocol!==i.protocol){if(!y[t.protocol])return Object.keys(t).forEach((function(e){i[e]=t[e]})),i.href=i.format(),i;if(i.protocol=t.protocol,t.host||m[t.protocol])i.pathname=t.pathname;else{for(var r=(t.pathname||"").split("/");r.length&&!(t.host=r.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),i.pathname=r.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var a=i.pathname||"",h=i.search||"";i.path=a+h}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var l=i.pathname&&"/"===i.pathname.charAt(0),u=t.host||t.pathname&&"/"===t.pathname.charAt(0),c=u||l||i.host&&t.pathname,d=c,p=i.pathname&&i.pathname.split("/")||[],f=(r=t.pathname&&t.pathname.split("/")||[],i.protocol&&!y[i.protocol]);if(f&&(i.hostname="",i.port=null,i.host&&(""===p[0]?p[0]=i.host:p.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===r[0]?r[0]=t.host:r.unshift(t.host)),t.host=null),c=c&&(""===r[0]||""===p[0])),u)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,p=r;else if(r.length)p||(p=[]),p.pop(),p=p.concat(r),i.search=t.search,i.query=t.query;else if(!function(t){return null==t}(t.search)){if(f)i.hostname=i.host=p.shift(),(x=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=x.shift(),i.host=i.hostname=x.shift());return i.search=t.search,i.query=t.query,o(i.pathname)&&o(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!p.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var g=p.slice(-1)[0],_=(i.host||t.host)&&("."===g||".."===g)||""===g,v=0,b=p.length;b>=0;b--)"."==(g=p[b])?p.splice(b,1):".."===g?(p.splice(b,1),v++):v&&(p.splice(b,1),v--);if(!c&&!d)for(;v--;v)p.unshift("..");!c||""===p[0]||p[0]&&"/"===p[0].charAt(0)||p.unshift(""),_&&"/"!==p.join("/").substr(-1)&&p.push("");var x,T=""===p[0]||p[0]&&"/"===p[0].charAt(0);f&&(i.hostname=i.host=T?"":p.length?p.shift():"",(x=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=x.shift(),i.host=i.hostname=x.shift()));return(c=c||i.host&&p.length)&&!T&&p.unshift(""),p.length?i.pathname=p.join("/"):(i.pathname=null,i.path=null),o(i.pathname)&&o(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var t=this.host,e=u.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{punycode:4,querystring:7}],9:[function(t,e,i){"use strict";function n(t,e,i,n,r){var s,a,o,h=0;for(s=e,a=i-n;i>s;s+=n)h+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;if(r===h>0)for(s=e;i>s;s+=n)o=E(s,t[s],t[s+1],o);else for(s=i-n;s>=e;s-=n)o=E(s,t[s],t[s+1],o);return o}function r(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!y(n,n.next)&&0!==m(n.prev,n,n.next))n=n.next;else{if(w(n),(n=e=n.prev)===n.next)return null;i=!0}}while(i||n!==e);return e}function s(t,e,i,n,u,c,d){if(t){!d&&c&&p(t,n,u,c);for(var f,g,_=t;t.prev!==t.next;)if(f=t.prev,g=t.next,c?o(t,n,u,c):a(t))e.push(f.i/i),e.push(t.i/i),e.push(g.i/i),w(t),t=g.next,_=g.next;else if((t=g)===_){d?1===d?s(t=h(t,e,i),e,i,n,u,c,2):2===d&&l(t,e,i,n,u,c):s(r(t),e,i,n,u,c,1);break}}}function a(t){var e=t.prev,i=t,n=t.next;if(m(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(_(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&m(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function o(t,e,i,n){var r=t.prev,s=t,a=t.next;if(m(r,s,a)>=0)return!1;for(var o=r.x<s.x?r.x<a.x?r.x:a.x:s.x<a.x?s.x:a.x,h=r.y<s.y?r.y<a.y?r.y:a.y:s.y<a.y?s.y:a.y,l=r.x>s.x?r.x>a.x?r.x:a.x:s.x>a.x?s.x:a.x,u=r.y>s.y?r.y>a.y?r.y:a.y:s.y>a.y?s.y:a.y,c=f(o,h,e,i,n),d=f(l,u,e,i,n),p=t.nextZ;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&_(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&_(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function h(t,e,i){var n=t;do{var r=n.prev,s=n.next.next;b(r,n,n.next,s)&&x(r,s)&&x(s,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(s.i/i),w(n),w(n.next),n=t=s),n=n.next}while(n!==t);return n}function l(t,e,i,n,a,o){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&v(h,l)){var u=T(h,l);return h=r(h,h.next),u=r(u,u.next),s(h,e,i,n,a,o),void s(u,e,i,n,a,o)}l=l.next}h=h.next}while(h!==t)}function u(t,e,i,s){var a,o,h,l=[];for(a=0,o=e.length;o>a;a++)(h=n(t,e[a]*s,o-1>a?e[a+1]*s:t.length,s,!1))===h.next&&(h.steiner=!0),l.push(g(h));for(l.sort(c),a=0;a<l.length;a++)d(l[a],i),i=r(i,i.next);return i}function c(t,e){return t.x-e.x}function d(t,e){if(e=function(t,e){var i,n=e,r=t.x,s=t.y,a=-1/0;do{if(s<=n.y&&s>=n.next.y){var o=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);r>=o&&o>a&&(a=o,i=n.x<n.next.x?n:n.next)}n=n.next}while(n!==e);if(!i)return null;if(t.x===i.x)return i.prev;var h,l=i,u=1/0;for(n=i.next;n!==l;)r>=n.x&&n.x>=i.x&&_(s<i.y?r:a,s,i.x,i.y,s<i.y?a:r,s,n.x,n.y)&&(h=Math.abs(s-n.y)/(r-n.x),(u>h||h===u&&n.x>i.x)&&x(n,t)&&(i=n,u=h)),n=n.next;return i}(t,e)){var i=T(e,t);r(i,i.next)}}function p(t,e,i,n){var r=t;do{null===r.z&&(r.z=f(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,s,a,o,h,l=1;do{for(i=t,t=null,s=null,a=0;i;){for(a++,n=i,o=0,e=0;l>e&&(o++,n=n.nextZ);e++);for(h=l;o>0||h>0&&n;)0===o?(r=n,n=n.nextZ,h--):0!==h&&n?i.z<=n.z?(r=i,i=i.nextZ,o--):(r=n,n=n.nextZ,h--):(r=i,i=i.nextZ,o--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,l*=2}while(a>1)}(r)}function f(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)/r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)/r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function _(t,e,i,n,r,s,a,o){return(r-a)*(e-o)-(t-a)*(s-o)>=0&&(t-a)*(n-o)-(i-a)*(e-o)>=0&&(i-a)*(s-o)-(r-a)*(n-o)>=0}function v(t,e){return y(t,e)||t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&b(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&x(t,e)&&x(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)}function m(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,i,n){return m(t,e,i)>0!=m(t,e,n)>0&&m(i,n,t)>0!=m(i,n,e)>0}function x(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function T(t,e){var i=new S(t.i,t.x,t.y),n=new S(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function E(t,e,i,n){var r=new S(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function w(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function S(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}e.exports=function(t,e,i){i=i||2;var r,a,o,h,l,c,d,p=e&&e.length,f=p?e[0]*i:t.length,g=n(t,0,f,i,!0),_=[];if(!g)return _;if(p&&(g=u(t,e,g,i)),t.length>80*i){r=o=t[0],a=h=t[1];for(var v=i;f>v;v+=i)r>(l=t[v])&&(r=l),a>(c=t[v+1])&&(a=c),l>o&&(o=l),c>h&&(h=c);d=Math.max(o-r,h-a)}return s(g,_,i,r,a,d),_}},{}],10:[function(t,e,i){"use strict";function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function r(){}var s="function"!=typeof Object.create&&"~";r.prototype._events=void 0,r.prototype.listeners=function(t,e){var i=s?s+t:t,n=this._events&&this._events[i];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,o=new Array(a);a>r;r++)o[r]=n[r].fn;return o},r.prototype.emit=function(t,e,i,n,r,a){var o=s?s+t:t;if(!this._events||!this._events[o])return!1;var h,l,u=this._events[o],c=arguments.length;if("function"==typeof u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,n),!0;case 5:return u.fn.call(u.context,e,i,n,r),!0;case 6:return u.fn.call(u.context,e,i,n,r,a),!0}for(l=1,h=new Array(c-1);c>l;l++)h[l-1]=arguments[l];u.fn.apply(u.context,h)}else{var d,p=u.length;for(l=0;p>l;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,i);break;default:if(!h)for(d=1,h=new Array(c-1);c>d;d++)h[d-1]=arguments[d];u[l].fn.apply(u[l].context,h)}}return!0},r.prototype.on=function(t,e,i){var r=new n(e,i||this),a=s?s+t:t;return this._events||(this._events=s?{}:Object.create(null)),this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],r]:this._events[a].push(r):this._events[a]=r,this},r.prototype.once=function(t,e,i){var r=new n(e,i||this,!0),a=s?s+t:t;return this._events||(this._events=s?{}:Object.create(null)),this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],r]:this._events[a].push(r):this._events[a]=r,this},r.prototype.removeListener=function(t,e,i,n){var r=s?s+t:t;if(!this._events||!this._events[r])return this;var a=this._events[r],o=[];if(e)if(a.fn)(a.fn!==e||n&&!a.once||i&&a.context!==i)&&o.push(a);else for(var h=0,l=a.length;l>h;h++)(a[h].fn!==e||n&&!a[h].once||i&&a[h].context!==i)&&o.push(a[h]);return o.length?this._events[r]=1===o.length?o[0]:o:delete this._events[r],this},r.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[s?s+t:t]:this._events=s?{}:Object.create(null),this):this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.prefixed=s,void 0!==e&&(e.exports=r)},{}],11:[function(t,e,i){"use strict";function n(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=Object.assign||function(t,e){for(var i,a,o=n(t),h=1;h<arguments.length;h++){for(var l in i=Object(arguments[h]))r.call(i,l)&&(o[l]=i[l]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(i);for(var u=0;u<a.length;u++)s.call(i,a[u])&&(o[a[u]]=i[a[u]])}}return o}},{}],12:[function(t,e,i){(function(t){!function(){function i(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(n,arguments)}}var n,r,s={};null!=(n=this)&&(r=n.async),s.noConflict=function(){return n.async=r,s};var a=Object.prototype.toString,o=Array.isArray||function(t){return"[object Array]"===a.call(t)},h=function(t,e){for(var i=0;i<t.length;i+=1)e(t[i],i,t)},l=function(t,e){if(t.map)return t.map(e);var i=[];return h(t,(function(t,n,r){i.push(e(t,n,r))})),i},u=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e};void 0!==t&&t.nextTick?(s.nextTick=t.nextTick,"undefined"!=typeof setImmediate?s.setImmediate=function(t){setImmediate(t)}:s.setImmediate=s.nextTick):"function"==typeof setImmediate?(s.nextTick=function(t){setImmediate(t)},s.setImmediate=s.nextTick):(s.nextTick=function(t){setTimeout(t,0)},s.setImmediate=s.nextTick),s.each=function(t,e,n){function r(e){e?(n(e),n=function(){}):(s+=1)>=t.length&&n()}if(n=n||function(){},!t.length)return n();var s=0;h(t,(function(t){e(t,i(r))}))},s.forEach=s.each,s.eachSeries=function(t,e,i){if(i=i||function(){},!t.length)return i();var n=0,r=function(){e(t[n],(function(e){e?(i(e),i=function(){}):(n+=1)>=t.length?i():r()}))};r()},s.forEachSeries=s.eachSeries,s.eachLimit=function(t,e,i,n){c(e).apply(null,[t,i,n])},s.forEachLimit=s.eachLimit;var c=function(t){return function(e,i,n){if(n=n||function(){},!e.length||0>=t)return n();var r=0,s=0,a=0;!function o(){if(r>=e.length)return n();for(;t>a&&s<e.length;)a+=1,i(e[(s+=1)-1],(function(t){t?(n(t),n=function(){}):(a-=1,(r+=1)>=e.length?n():o())}))}()}},d=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[s.each].concat(e))}},p=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[s.eachSeries].concat(e))}},f=function(t,e,i,n){if(e=l(e,(function(t,e){return{index:e,value:t}})),n){var r=[];t(e,(function(t,e){i(t.value,(function(i,n){r[t.index]=n,e(i)}))}),(function(t){n(t,r)}))}else t(e,(function(t,e){i(t.value,(function(t){e(t)}))}))};s.map=d(f),s.mapSeries=p(f),s.mapLimit=function(t,e,i,n){return g(e)(t,i,n)};var g=function(t){return function(t,e){return function(){var i=Array.prototype.slice.call(arguments);return e.apply(null,[c(t)].concat(i))}}(t,f)};s.reduce=function(t,e,i,n){s.eachSeries(t,(function(t,n){i(e,t,(function(t,i){e=i,n(t)}))}),(function(t){n(t,e)}))},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(t,e,i,n){var r=l(t,(function(t){return t})).reverse();s.reduce(r,e,i,n)},s.foldr=s.reduceRight;var _=function(t,e,i,n){var r=[];t(e=l(e,(function(t,e){return{index:e,value:t}})),(function(t,e){i(t.value,(function(i){i&&r.push(t),e()}))}),(function(t){n(l(r.sort((function(t,e){return t.index-e.index})),(function(t){return t.value})))}))};s.filter=d(_),s.filterSeries=p(_),s.select=s.filter,s.selectSeries=s.filterSeries;var v=function(t,e,i,n){var r=[];t(e=l(e,(function(t,e){return{index:e,value:t}})),(function(t,e){i(t.value,(function(i){i||r.push(t),e()}))}),(function(t){n(l(r.sort((function(t,e){return t.index-e.index})),(function(t){return t.value})))}))};s.reject=d(v),s.rejectSeries=p(v);var m=function(t,e,i,n){t(e,(function(t,e){i(t,(function(i){i?(n(t),n=function(){}):e()}))}),(function(t){n()}))};s.detect=d(m),s.detectSeries=p(m),s.some=function(t,e,i){s.each(t,(function(t,n){e(t,(function(t){t&&(i(!0),i=function(){}),n()}))}),(function(t){i(!1)}))},s.any=s.some,s.every=function(t,e,i){s.each(t,(function(t,n){e(t,(function(t){t||(i(!1),i=function(){}),n()}))}),(function(t){i(!0)}))},s.all=s.every,s.sortBy=function(t,e,i){s.map(t,(function(t,i){e(t,(function(e,n){e?i(e):i(null,{value:t,criteria:n})}))}),(function(t,e){if(t)return i(t);i(null,l(e.sort((function(t,e){var i=t.criteria,n=e.criteria;return n>i?-1:i>n?1:0})),(function(t){return t.value})))}))},s.auto=function(t,e){e=e||function(){};var i=u(t),n=i.length;if(!n)return e();var r={},a=[],l=function(t){a.unshift(t)},c=function(t){for(var e=0;e<a.length;e+=1)if(a[e]===t)return void a.splice(e,1)},d=function(){n--,h(a.slice(0),(function(t){t()}))};l((function(){if(!n){var t=e;e=function(){},t(null,r)}})),h(i,(function(i){var n=o(t[i])?t[i]:[t[i]],a=function(t){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1&&(n=n[0]),t){var a={};h(u(r),(function(t){a[t]=r[t]})),a[i]=n,e(t,a),e=function(){}}else r[i]=n,s.setImmediate(d)},p=n.slice(0,Math.abs(n.length-1))||[],f=function(){return function(t,e,i){return t.reduce?t.reduce(e,i):(h(t,(function(t,n,r){i=e(i,t,n,r)})),i)}(p,(function(t,e){return t&&r.hasOwnProperty(e)}),!0)&&!r.hasOwnProperty(i)};if(f())n[n.length-1](a,r);else{var g=function(){f()&&(c(g),n[n.length-1](a,r))};l(g)}}))},s.retry=function(t,e,i){var n=[];"function"==typeof t&&(i=e,e=t,t=5),t=parseInt(t,10)||5;var r=function(r,a){for(var o=function(t,e){return function(i){t((function(t,n){i(!t||e,{err:t,result:n})}),a)}};t;)n.push(o(e,!(t-=1)));s.series(n,(function(t,e){e=e[e.length-1],(r||i)(e.err,e.result)}))};return i?r():r},s.waterfall=function(t,e){if(e=e||function(){},!o(t)){var i=new Error("First argument to waterfall must be an array of functions");return e(i)}if(!t.length)return e();var n=function(t){return function(i){if(i)e.apply(null,arguments),e=function(){};else{var r=Array.prototype.slice.call(arguments,1),a=t.next();a?r.push(n(a)):r.push(e),s.setImmediate((function(){t.apply(null,r)}))}}};n(s.iterator(t))()};var y=function(t,e,i){if(i=i||function(){},o(e))t.map(e,(function(t,e){t&&t((function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),e.call(null,t,i)}))}),i);else{var n={};t.each(u(e),(function(t,i){e[t]((function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),n[t]=r,i(e)}))}),(function(t){i(t,n)}))}};s.parallel=function(t,e){y({map:s.map,each:s.each},t,e)},s.parallelLimit=function(t,e,i){y({map:g(e),each:c(e)},t,i)},s.series=function(t,e){if(e=e||function(){},o(t))s.mapSeries(t,(function(t,e){t&&t((function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),e.call(null,t,i)}))}),e);else{var i={};s.eachSeries(u(t),(function(e,n){t[e]((function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),i[e]=r,n(t)}))}),(function(t){e(t,i)}))}},s.iterator=function(t){var e=function(i){var n=function(){return t.length&&t[i].apply(null,arguments),n.next()};return n.next=function(){return i<t.length-1?e(i+1):null},n};return e(0)},s.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var b=function(t,e,i,n){var r=[];t(e,(function(t,e){i(t,(function(t,i){r=r.concat(i||[]),e(t)}))}),(function(t){n(t,r)}))};s.concat=d(b),s.concatSeries=p(b),s.whilst=function(t,e,i){t()?e((function(n){return n?i(n):void s.whilst(t,e,i)})):i()},s.doWhilst=function(t,e,i){t((function(n){if(n)return i(n);var r=Array.prototype.slice.call(arguments,1);e.apply(null,r)?s.doWhilst(t,e,i):i()}))},s.until=function(t,e,i){t()?i():e((function(n){return n?i(n):void s.until(t,e,i)}))},s.doUntil=function(t,e,i){t((function(n){if(n)return i(n);var r=Array.prototype.slice.call(arguments,1);e.apply(null,r)?i():s.doUntil(t,e,i)}))},s.queue=function(t,e){function n(t,e,i,n){return t.started||(t.started=!0),o(e)||(e=[e]),0==e.length?s.setImmediate((function(){t.drain&&t.drain()})):void h(e,(function(e){var r={data:e,callback:"function"==typeof n?n:null};i?t.tasks.unshift(r):t.tasks.push(r),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),s.setImmediate(t.process)}))}void 0===e&&(e=1);var r=0,a={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,e){n(a,t,!1,e)},kill:function(){a.drain=null,a.tasks=[]},unshift:function(t,e){n(a,t,!0,e)},process:function(){if(!a.paused&&r<a.concurrency&&a.tasks.length){var e=a.tasks.shift();a.empty&&0===a.tasks.length&&a.empty(),r+=1;var n=i((function(){r-=1,e.callback&&e.callback.apply(e,arguments),a.drain&&a.tasks.length+r===0&&a.drain(),a.process()}));t(e.data,n)}},length:function(){return a.tasks.length},running:function(){return r},idle:function(){return a.tasks.length+r===0},pause:function(){!0!==a.paused&&(a.paused=!0)},resume:function(){if(!1!==a.paused){a.paused=!1;for(var t=1;t<=a.concurrency;t++)s.setImmediate(a.process)}}};return a},s.priorityQueue=function(t,e){function i(t,e){return t.priority-e.priority}function n(t,e,n,r){return t.started||(t.started=!0),o(e)||(e=[e]),0==e.length?s.setImmediate((function(){t.drain&&t.drain()})):void h(e,(function(e){var a={data:e,priority:n,callback:"function"==typeof r?r:null};t.tasks.splice(function(t,e,i){for(var n=-1,r=t.length-1;r>n;){var s=n+(r-n+1>>>1);i(e,t[s])>=0?n=s:r=s-1}return n}(t.tasks,a,i)+1,0,a),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),s.setImmediate(t.process)}))}var r=s.queue(t,e);return r.push=function(t,e,i){n(r,t,e,i)},delete r.unshift,r},s.cargo=function(t,e){var i=!1,n=[],r={tasks:n,payload:e,saturated:null,empty:null,drain:null,drained:!0,push:function(t,i){o(t)||(t=[t]),h(t,(function(t){n.push({data:t,callback:"function"==typeof i?i:null}),r.drained=!1,r.saturated&&n.length===e&&r.saturated()})),s.setImmediate(r.process)},process:function s(){if(!i){if(0===n.length)return r.drain&&!r.drained&&r.drain(),void(r.drained=!0);var a="number"==typeof e?n.splice(0,e):n.splice(0,n.length),o=l(a,(function(t){return t.data}));r.empty&&r.empty(),i=!0,t(o,(function(){i=!1;var t=arguments;h(a,(function(e){e.callback&&e.callback.apply(null,t)})),s()}))}},length:function(){return n.length},running:function(){return i}};return r};var x=function(t){return function(e){var i=Array.prototype.slice.call(arguments,1);e.apply(null,i.concat([function(e){var i=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&h(i,(function(e){console[t](e)})))}]))}};s.log=x("log"),s.dir=x("dir"),s.memoize=function(t,e){var i={},n={};e=e||function(t){return t};var r=function(){var r=Array.prototype.slice.call(arguments),a=r.pop(),o=e.apply(null,r);o in i?s.nextTick((function(){a.apply(null,i[o])})):o in n?n[o].push(a):(n[o]=[a],t.apply(null,r.concat([function(){i[o]=arguments;var t=n[o];delete n[o];for(var e=0,r=t.length;r>e;e++)t[e].apply(null,arguments)}])))};return r.memo=i,r.unmemoized=t,r},s.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},s.times=function(t,e,i){for(var n=[],r=0;t>r;r++)n.push(r);return s.map(n,e,i)},s.timesSeries=function(t,e,i){for(var n=[],r=0;t>r;r++)n.push(r);return s.mapSeries(n,e,i)},s.seq=function(){var t=arguments;return function(){var e=this,i=Array.prototype.slice.call(arguments),n=i.pop();s.reduce(t,i,(function(t,i,n){i.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);n(t,e)}]))}),(function(t,i){n.apply(e,[t].concat(i))}))}},s.compose=function(){return s.seq.apply(null,Array.prototype.reverse.call(arguments))};var T=function(t,e){var i=function(){var i=this,n=Array.prototype.slice.call(arguments),r=n.pop();return t(e,(function(t,e){t.apply(i,n.concat([e]))}),r)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return i.apply(this,n)}return i};s.applyEach=d(T),s.applyEachSeries=p(T),s.forever=function(t,e){!function i(n){if(n){if(e)return e(n);throw n}t(i)}()},void 0!==e&&e.exports?e.exports=s:n.async=s}()}).call(this,t("_process"))},{_process:3}],13:[function(t,e,i){function n(t,e){o.call(this),e=e||10,this.baseUrl=t||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._boundOnLoad=this._onLoad.bind(this),this._buffer=[],this._numToLoad=0,this._queue=r.queue(this._boundLoadResource,e),this.resources={}}var r=t("async"),s=t("url"),a=t("./Resource"),o=t("eventemitter3");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.add=n.prototype.enqueue=function(t,e,i,n){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"==typeof t&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.resources[t])throw new Error('Resource with name "'+t+'" already exists.');return e=this._handleBaseUrl(e),this.resources[t]=new a(t,e,i),"function"==typeof n&&this.resources[t].once("afterMiddleware",n),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[t]),this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[t]),this._progressChunk=100/this._buffer.length),this},n.prototype._handleBaseUrl=function(t){var e=s.parse(t);return e.protocol||0===e.pathname.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t},n.prototype.before=n.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},n.prototype.after=n.prototype.use=function(t){return this._afterMiddleware.push(t),this},n.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1,this.resources={}},n.prototype.load=function(t){if("function"==typeof t&&this.once("complete",t),this._queue.started)return this;this.emit("start",this);for(var e=0;e<this._buffer.length;++e)this._queue.push(this._buffer[e]);return this._buffer.length=0,this},n.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,this._runMiddleware(t,this._beforeMiddleware,(function(){t.load(i._boundOnLoad)}))},n.prototype._onComplete=function(){this.emit("complete",this,this.resources)},n.prototype._onLoad=function(t){this.progress+=this._progressChunk,this.emit("progress",this,t),this._runMiddleware(t,this._afterMiddleware,(function(){t.emit("afterMiddleware",t),this._numToLoad--,0===this._numToLoad&&(this.progress=100,this._onComplete()),t.error?this.emit("error",t.error,this,t):this.emit("load",this,t)})),t._dequeue()},n.prototype._runMiddleware=function(t,e,i){var n=this;r.eachSeries(e,(function(e,i){e.call(n,t,i)}),i.bind(this,t))},n.LOAD_TYPE=a.LOAD_TYPE,n.XHR_READY_STATE=a.XHR_READY_STATE,n.XHR_RESPONSE_TYPE=a.XHR_RESPONSE_TYPE},{"./Resource":14,async:12,eventemitter3:10,url:8}],14:[function(t,e,i){function n(t,e,i){if(a.call(this),i=i||{},"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");this.name=t,this.url=e,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=!0===i.crossOrigin?"anonymous":i.crossOrigin,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function r(t){return t.toString().replace("object ","")}function s(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}var a=t("eventemitter3"),o=t("url"),h=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),l=null;n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError),this.data.removeEventListener("load",this._boundComplete),this.data.removeEventListener("progress",this._boundOnProgress),this.data.removeEventListener("canplaythrough",this._boundComplete)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError),this.xhr.removeEventListener("abort",this._boundXhrOnAbort),this.xhr.removeEventListener("progress",this._boundOnProgress),this.xhr.removeEventListener("load",this._boundXhrOnLoad)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.emit("complete",this)},n.prototype.load=function(t){switch(this.emit("start",this),t&&this.once("complete",t),(!1===this.crossOrigin||"string"!=typeof this.crossOrigin)&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case n.LOAD_TYPE.IMAGE:this._loadImage();break;case n.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case n.LOAD_TYPE.VIDEO:this._loadElement("video");break;case n.LOAD_TYPE.XHR:default:h&&this.crossOrigin?this._loadXdr():this._loadXhr()}},n.prototype._loadImage=function(){this.data=new Image,this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.data.src=this.url,this.isImage=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},n.prototype._loadElement=function(t){if("audio"===t&&"undefined"!=typeof Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return this.error=new Error("Unsupported element "+t),void this.complete();if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this["is"+t[0].toUpperCase()+t.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},n.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===n.XHR_RESPONSE_TYPE.JSON||this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=n.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},n.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){t.send()}),0)},n.prototype._createSource=function(t,e,i){i||(i=t+"/"+e.substr(e.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=e,n.type=i,n},n.prototype._onError=function(t){this.error=new Error("Failed to load element using "+t.target.nodeName),this.complete()},n.prototype._onProgress=function(t){t&&t.lengthComputable&&this.emit("progress",this,t.loaded/t.total)},n.prototype._xhrOnError=function(){this.error=new Error(r(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"'),this.complete()},n.prototype._xhrOnAbort=function(){this.error=new Error(r(this.xhr)+" Request was aborted by the user."),this.complete()},n.prototype._xdrOnTimeout=function(){this.error=new Error(r(this.xhr)+" Request timed out."),this.complete()},n.prototype._xhrOnLoad=function(){var t=this.xhr,e=void 0!==t.status?t.status:200;if(200===e||204===e||0===e&&t.responseText.length>0)if(this.xhrType===n.XHR_RESPONSE_TYPE.TEXT)this.data=t.responseText;else if(this.xhrType===n.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t.responseText),this.isJson=!0}catch(t){this.error=new Error("Error trying to parse loaded json:",t)}else if(this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(t.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=t.responseText,this.data=r}this.isXml=!0}catch(t){this.error=new Error("Error trying to parse loaded xml:",t)}else this.data=t.response||t.responseText;else this.error=new Error("["+t.status+"]"+t.statusText+":"+t.responseURL);this.complete()},n.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,l||(l=document.createElement("a")),l.href=t;var i=!(t=o.parse(l.href)).port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"},n.prototype._determineXhrType=function(){return n._xhrTypeMap[this._getExtension()]||n.XHR_RESPONSE_TYPE.TEXT},n.prototype._determineLoadType=function(){return n._loadTypeMap[this._getExtension()]||n.LOAD_TYPE.XHR},n.prototype._getExtension=function(){var t,e=this.url;if(this.isDataUrl){var i=e.indexOf("/");t=e.substring(i+1,e.indexOf(";",i))}else{var n=e.indexOf("?");-1!==n&&(e=e.substring(0,n)),t=e.substring(e.lastIndexOf(".")+1)}return t},n.prototype._getMimeFromXhrType=function(t){switch(t){case n.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case n.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case n.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case n.XHR_RESPONSE_TYPE.JSON:return"application/json";case n.XHR_RESPONSE_TYPE.DEFAULT:case n.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},n.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},n.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},n.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},n._loadTypeMap={gif:n.LOAD_TYPE.IMAGE,png:n.LOAD_TYPE.IMAGE,bmp:n.LOAD_TYPE.IMAGE,jpg:n.LOAD_TYPE.IMAGE,jpeg:n.LOAD_TYPE.IMAGE,tif:n.LOAD_TYPE.IMAGE,tiff:n.LOAD_TYPE.IMAGE,webp:n.LOAD_TYPE.IMAGE,tga:n.LOAD_TYPE.IMAGE},n._xhrTypeMap={xhtml:n.XHR_RESPONSE_TYPE.DOCUMENT,html:n.XHR_RESPONSE_TYPE.DOCUMENT,htm:n.XHR_RESPONSE_TYPE.DOCUMENT,xml:n.XHR_RESPONSE_TYPE.DOCUMENT,tmx:n.XHR_RESPONSE_TYPE.DOCUMENT,tsx:n.XHR_RESPONSE_TYPE.DOCUMENT,svg:n.XHR_RESPONSE_TYPE.DOCUMENT,gif:n.XHR_RESPONSE_TYPE.BLOB,png:n.XHR_RESPONSE_TYPE.BLOB,bmp:n.XHR_RESPONSE_TYPE.BLOB,jpg:n.XHR_RESPONSE_TYPE.BLOB,jpeg:n.XHR_RESPONSE_TYPE.BLOB,tif:n.XHR_RESPONSE_TYPE.BLOB,tiff:n.XHR_RESPONSE_TYPE.BLOB,webp:n.XHR_RESPONSE_TYPE.BLOB,tga:n.XHR_RESPONSE_TYPE.BLOB,json:n.XHR_RESPONSE_TYPE.JSON,text:n.XHR_RESPONSE_TYPE.TEXT,txt:n.XHR_RESPONSE_TYPE.TEXT},n.setExtensionLoadType=function(t,e){s(n._loadTypeMap,t,e)},n.setExtensionXhrType=function(t,e){s(n._xhrTypeMap,t,e)}},{eventemitter3:10,url:8}],15:[function(t,e,i){e.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(t){for(var e,i="",n=new Array(4),r=0,s=0;r<t.length;){for(e=new Array(3),s=0;s<e.length;s++)r<t.length?e[s]=255&t.charCodeAt(r++):e[s]=0;switch(n[0]=e[0]>>2,n[1]=(3&e[0])<<4|e[1]>>4,n[2]=(15&e[1])<<2|e[2]>>6,n[3]=63&e[2],r-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(s=0;s<n.length;s++)i+=this._keyStr.charAt(n[s])}return i}}},{}],16:[function(t,e,i){e.exports=t("./Loader"),e.exports.Resource=t("./Resource"),e.exports.middleware={caching:{memory:t("./middlewares/caching/memory")},parsing:{blob:t("./middlewares/parsing/blob")}}},{"./Loader":13,"./Resource":14,"./middlewares/caching/memory":17,"./middlewares/parsing/blob":18}],17:[function(t,e,i){var n={};e.exports=function(){return function(t,e){n[t.url]?(t.data=n[t.url],t.complete()):t.once("complete",(function(){n[this.url]=this.data})),e()}}},{}],18:[function(t,e,i){var n=t("../../Resource"),r=t("../../b64");window.URL=window.URL||window.webkitURL,e.exports=function(){return function(t,e){if(!t.data)return e();if(t.xhr&&t.xhrType===n.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=URL.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=i,t.isImage=!0,t.data.onload=function(){URL.revokeObjectURL(i),t.data.onload=null,e()}}}else{var s=t.xhr.getResponseHeader("content-type");s&&0===s.indexOf("image")&&(t.data=new Image,t.data.src="data:"+s+";base64,"+r.encodeBinary(t.xhr.responseText),t.isImage=!0,t.data.onload=function(){t.data.onload=null,e()})}else e()}}},{"../../Resource":14,"../../b64":15}],19:[function(t,e,i){e.exports={name:"pixi.js",version:"3.0.9",description:"Pixi.js is a fast lightweight 2D library that works across all devices.",author:"Mat Groves",contributors:["Chad Engler <chad@pantherdev.com>","Richard Davey <rdavey@gmail.com>"],main:"./src/index.js",homepage:"http://goodboydigital.com/",bugs:"https://github.com/pixijs/pixi.js/issues",license:"MIT",repository:{type:"git",url:"https://github.com/pixijs/pixi.js.git"},scripts:{start:"gulp && gulp watch",test:"gulp && testem ci",build:"gulp",docs:"jsdoc -c ./gulp/util/jsdoc.conf.json -R README.md"},files:["bin/","src/","CONTRIBUTING.md","LICENSE","package.json","README.md"],dependencies:{async:"^1.5.0",brfs:"^1.4.1",earcut:"^2.0.7",eventemitter3:"^1.1.1","object-assign":"^4.0.1","resource-loader":"^1.6.4"},devDependencies:{browserify:"^11.1.0",chai:"^3.2.0",del:"^2.0.2",gulp:"^3.9.0","gulp-cached":"^1.1.0","gulp-concat":"^2.6.0","gulp-debug":"^2.1.0","gulp-header":"^1.7.1","gulp-jshint":"^1.11.2","gulp-mirror":"^0.4.0","gulp-plumber":"^1.0.1","gulp-rename":"^1.2.2","gulp-sourcemaps":"^1.5.2","gulp-uglify":"^1.4.1","gulp-util":"^3.0.6","jaguarjs-jsdoc":"git+https://github.com/davidshimjs/jaguarjs-jsdoc.git",jsdoc:"^3.3.2","jshint-summary":"^0.4.0",minimist:"^1.2.0",mocha:"^2.3.2","require-dir":"^0.3.0","run-sequence":"^1.1.2",testem:"^0.9.4","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.4.0"},browserify:{transform:["brfs"]}}},{}],20:[function(t,e,i){function n(t){var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,window.addEventListener("keydown",this._onKeyDown,!1)}var r=t("../core");Object.assign(r.DisplayObject.prototype,t("./accessibleTarget")),n.prototype.constructor=n,e.exports=n,n.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode.appendChild(this.div))},n.prototype.deactivate=function(){this.isActive&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode.removeChild(this.div))},n.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=e.length-1;i>=0;i--)this.updateAccessibleObjects(e[i])}},n.prototype.update=function(){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var s=0;s<this.children.length;s++){var a=this.children[s];if(a.renderId!==this.renderId)a._accessibleActive=!1,r.utils.removeItems(this.children,s,1),this.div.removeChild(a._accessibleDiv),this.pool.push(a._accessibleDiv),a._accessibleDiv=null,s--,0===this.children.length&&this.deactivate();else{n=a._accessibleDiv;var o=a.hitArea,h=a.worldTransform;a.hitArea?(n.style.left=(h.tx+o.x*h.a)*e+"px",n.style.top=(h.ty+o.y*h.d)*i+"px",n.style.width=o.width*h.a*e+"px",n.style.height=o.height*h.d*i+"px"):(o=a.getBounds(),this.capHitArea(o),n.style.left=o.x*e+"px",n.style.top=o.y*i+"px",n.style.width=o.width*e+"px",n.style.height=o.height*i+"px")}}this.renderId++},n.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},n.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.title=t.accessibleTitle||"displayObject "+this.tabIndex,t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},n.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},n.prototype._onFocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},n.prototype._onFocusOut=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},n.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},n.prototype._onMouseMove=function(){this.deactivate()},n.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},r.WebGLRenderer.registerPlugin("accessibility",n),r.CanvasRenderer.registerPlugin("accessibility",n)},{"../core":30,"./accessibleTarget":21}],21:[function(t,e,i){e.exports={accessible:!1,accessibleTitle:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],22:[function(t,e,i){e.exports={accessibleTarget:t("./accessibleTarget"),AccessibilityManager:t("./AccessibilityManager")}},{"./AccessibilityManager":20,"./accessibleTarget":21}],23:[function(t,e,i){var n={VERSION:t("../../package.json").version,PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3};e.exports=n},{"../../package.json":19}],24:[function(t,e,i){function n(){a.call(this),this.children=[]}var r=t("../math"),s=t("../utils"),a=t("./DisplayObject"),o=t("../textures/RenderTexture"),h=new r.Matrix;n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{configurable:!0,get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},height:{configurable:!0,get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}}),n.prototype.onChildrenChange=function(){},n.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;e>i;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},n.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.onChildrenChange(e),t.emit("added",this),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},n.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);if(0>i||0>n)throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[i]=e,this.children[n]=t,this.onChildrenChange(n>i?i:n)}},n.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},n.prototype.setChildIndex=function(t,e){if(0>e||e>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(t);s.removeItems(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},n.prototype.getChildAt=function(t){if(0>t||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[t]},n.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;e>i;i++)this.removeChild(arguments[i]);else{var n=this.children.indexOf(t);if(-1===n)return;t.parent=null,s.removeItems(this.children,n,1),this.onChildrenChange(n),t.emit("removed",this)}return t},n.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,s.removeItems(this.children,t,1),this.onChildrenChange(t),e.emit("removed",this),e},n.prototype.removeChildren=function(t,e){var i,n,r=t||0,s="number"==typeof e?e:this.children.length,a=s-r;if(a>0&&s>=a){for(i=this.children.splice(r,a),n=0;n<i.length;++n)i[n].parent=null;for(this.onChildrenChange(t),n=0;n<i.length;++n)i[n].emit("removed",this);return i}if(0===a&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},n.prototype.generateTexture=function(t,e,i){var n=this.getLocalBounds(),r=new o(t,0|n.width,0|n.height,i,e);return h.tx=-n.x,h.ty=-n.y,r.render(this,h),r},n.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();for(var t=0,e=this.children.length;e>t;++t)this.children[t].updateTransform()}},n.prototype.containerUpdateTransform=n.prototype.updateTransform,n.prototype.getBounds=function(){if(!this._currentBounds){if(0===this.children.length)return r.Rectangle.EMPTY;for(var t,e,i,n=1/0,s=1/0,a=-1/0,o=-1/0,h=!1,l=0,u=this.children.length;u>l;++l){this.children[l].visible&&(h=!0,n=n<(t=this.children[l].getBounds()).x?n:t.x,s=s<t.y?s:t.y,a=a>(e=t.width+t.x)?a:e,o=o>(i=t.height+t.y)?o:i)}if(!h)return r.Rectangle.EMPTY;var c=this._bounds;c.x=n,c.y=s,c.width=a-n,c.height=o-s,this._currentBounds=c}return this._currentBounds},n.prototype.containerGetBounds=n.prototype.getBounds,n.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=r.Matrix.IDENTITY;for(var e=0,i=this.children.length;i>e;++e)this.children[e].updateTransform();return this.worldTransform=t,this._currentBounds=null,this.getBounds(r.Matrix.IDENTITY)},n.prototype.renderWebGL=function(t){var e,i;if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters){for(t.currentRenderer.flush(),this._filters&&this._filters.length&&t.filterManager.pushFilter(this,this._filters),this._mask&&t.maskManager.pushMask(this,this._mask),t.currentRenderer.start(),this._renderWebGL(t),e=0,i=this.children.length;i>e;e++)this.children[e].renderWebGL(t);t.currentRenderer.flush(),this._mask&&t.maskManager.popMask(this,this._mask),this._filters&&t.filterManager.popFilter(),t.currentRenderer.start()}else for(this._renderWebGL(t),e=0,i=this.children.length;i>e;++e)this.children[e].renderWebGL(t)},n.prototype._renderWebGL=function(t){},n.prototype._renderCanvas=function(t){},n.prototype.renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask,t),this._renderCanvas(t);for(var e=0,i=this.children.length;i>e;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},n.prototype.destroy=function(t){if(a.prototype.destroy.call(this),t)for(var e=0,i=this.children.length;i>e;++e)this.children[e].destroy(t);this.removeChildren(),this.children=null}},{"../math":33,"../textures/RenderTexture":71,"../utils":77,"./DisplayObject":25}],25:[function(t,e,i){function n(){a.call(this),this.position=new r.Point,this.scale=new r.Point(1,1),this.pivot=new r.Point(0,0),this.skew=new r.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.worldTransform=new r.Matrix,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new r.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null}var r=t("../math"),s=t("../textures/RenderTexture"),a=t("eventemitter3"),o=t("../const"),h=new r.Matrix,l={worldTransform:new r.Matrix,worldAlpha:1,children:[]};n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},worldVisible:{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},mask:{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}}),n.prototype.updateTransform=function(){var t,e,i,n,r,s,a=this.parent.worldTransform,l=this.worldTransform;this.skew.x||this.skew.y?(h.setTransform(this.position.x,this.position.y,this.pivot.x,this.pivot.y,this.scale.x,this.scale.y,this.rotation,this.skew.x,this.skew.y),l.a=h.a*a.a+h.b*a.c,l.b=h.a*a.b+h.b*a.d,l.c=h.c*a.a+h.d*a.c,l.d=h.c*a.b+h.d*a.d,l.tx=h.tx*a.a+h.ty*a.c+a.tx,l.ty=h.tx*a.b+h.ty*a.d+a.ty):this.rotation%o.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,e=this._sr*this.scale.x,i=-this._sr*this.scale.y,n=this._cr*this.scale.y,r=this.position.x,s=this.position.y,(this.pivot.x||this.pivot.y)&&(r-=this.pivot.x*t+this.pivot.y*i,s-=this.pivot.x*e+this.pivot.y*n),l.a=t*a.a+e*a.c,l.b=t*a.b+e*a.d,l.c=i*a.a+n*a.c,l.d=i*a.b+n*a.d,l.tx=r*a.a+s*a.c+a.tx,l.ty=r*a.b+s*a.d+a.ty):(t=this.scale.x,n=this.scale.y,r=this.position.x-this.pivot.x*t,s=this.position.y-this.pivot.y*n,l.a=t*a.a,l.b=t*a.b,l.c=n*a.c,l.d=n*a.d,l.tx=r*a.a+s*a.c+a.tx,l.ty=r*a.b+s*a.d+a.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},n.prototype.displayObjectUpdateTransform=n.prototype.updateTransform,n.prototype.getBounds=function(t){return r.Rectangle.EMPTY},n.prototype.getLocalBounds=function(){return this.getBounds(r.Matrix.IDENTITY)},n.prototype.toGlobal=function(t,e){return this.parent?this.displayObjectUpdateTransform():(this.parent=l,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.apply(t,e)},n.prototype.toLocal=function(t,e,i){return e&&(t=e.toGlobal(t,i)),this.parent?this.displayObjectUpdateTransform():(this.parent=l,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.applyInverse(t,i)},n.prototype.renderWebGL=function(t){},n.prototype.renderCanvas=function(t){},n.prototype.generateTexture=function(t,e,i){var n=this.getLocalBounds(),r=new s(t,0|n.width,0|n.height,e,i);return h.tx=-n.x,h.ty=-n.y,r.render(this,h),r},n.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},n.prototype.setTransform=function(t,e,i,n,r,s,a,o,h){return this.position.x=t||0,this.position.y=e||0,this.scale.x=i||1,this.scale.y=n||1,this.rotation=r||0,this.skew.x=s||0,this.skew.y=a||0,this.pivot.x=o||0,this.pivot.y=h||0,this},n.prototype.destroy=function(){this.position=null,this.scale=null,this.pivot=null,this.skew=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.worldTransform=null,this.filterArea=null}},{"../const":23,"../math":33,"../textures/RenderTexture":71,eventemitter3:10}],26:[function(t,e,i){function n(){r.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=u.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new l.Rectangle(0,0,1,1),this.dirty=!0,this.glDirty=!1,this.boundsDirty=!0,this.cachedSpriteDirty=!1}var r=t("../display/Container"),s=t("../textures/Texture"),a=t("../renderers/canvas/utils/CanvasBuffer"),o=t("../renderers/canvas/utils/CanvasGraphics"),h=t("./GraphicsData"),l=t("../math"),u=t("../const"),c=new l.Point;n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){var t=new n;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=!0,t.glDirty=!0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var e=0;e<this.graphicsData.length;++e)t.graphicsData.push(this.graphicsData[e].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},n.prototype.lineStyle=function(t,e,i){if(this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=void 0===i?1:i,this.currentPath)if(this.currentPath.shape.points.length){var n=new l.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},n.prototype.moveTo=function(t,e){var i=new l.Polygon([t,e]);return i.closed=!1,this.drawShape(i),this},n.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty=!0,this},n.prototype.quadraticCurveTo=function(t,e,i,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var r,s,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var o=a[a.length-2],h=a[a.length-1],l=0,u=1;20>=u;++u)r=o+(t-o)*(l=u/20),s=h+(e-h)*l,a.push(r+(t+(i-t)*l-r)*l,s+(e+(n-e)*l-s)*l);return this.dirty=this.boundsDirty=!0,this},n.prototype.bezierCurveTo=function(t,e,i,n,r,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var a,o,h,l,u,c=this.currentPath.shape.points,d=c[c.length-2],p=c[c.length-1],f=0,g=1;20>=g;++g)h=(o=(a=1-(f=g/20))*a)*a,u=(l=f*f)*f,c.push(h*d+3*o*f*t+3*a*l*i+u*r,h*p+3*o*f*e+3*a*l*n+u*s);return this.dirty=this.boundsDirty=!0,this},n.prototype.arcTo=function(t,e,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var s=this.currentPath.shape.points,a=s[s.length-2],o=s[s.length-1]-e,h=a-t,l=n-e,u=i-t,c=Math.abs(o*u-h*l);if(1e-8>c||0===r)(s[s.length-2]!==t||s[s.length-1]!==e)&&s.push(t,e);else{var d=o*o+h*h,p=l*l+u*u,f=o*l+h*u,g=r*Math.sqrt(d)/c,_=r*Math.sqrt(p)/c,v=g*f/d,m=_*f/p,y=g*u+_*h,b=g*l+_*o,x=h*(_+v),T=o*(_+v),E=u*(g+m),w=l*(g+m),S=Math.atan2(T-b,x-y),A=Math.atan2(w-b,E-y);this.arc(y+t,b+e,r,S,A,h*l>u*o)}return this.dirty=this.boundsDirty=!0,this},n.prototype.arc=function(t,e,i,n,r,s){if(n===r)return this;!(s=s||!1)&&n>=r?r+=2*Math.PI:s&&r>=n&&(n+=2*Math.PI);var a=s?-1*(n-r):r-n,o=40*Math.ceil(Math.abs(a)/(2*Math.PI));if(0===a)return this;var h=t+Math.cos(n)*i,l=e+Math.sin(n)*i;this.currentPath?this.currentPath.shape.points.push(h,l):this.moveTo(h,l);for(var u=this.currentPath.shape.points,c=a/(2*o),d=2*c,p=Math.cos(c),f=Math.sin(c),g=o-1,_=g%1/g,v=0;g>=v;v++){var m=c+n+d*(v+_*v),y=Math.cos(m),b=-Math.sin(m);u.push((p*y+f*b)*i+t,(p*-b+f*y)*i+e)}return this.dirty=this.boundsDirty=!0,this},n.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},n.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},n.prototype.drawRect=function(t,e,i,n){return this.drawShape(new l.Rectangle(t,e,i,n)),this},n.prototype.drawRoundedRect=function(t,e,i,n,r){return this.drawShape(new l.RoundedRectangle(t,e,i,n,r)),this},n.prototype.drawCircle=function(t,e,i){return this.drawShape(new l.Circle(t,e,i)),this},n.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new l.Ellipse(t,e,i,n)),this},n.prototype.drawPolygon=function(t){var e=t,i=!0;if(e instanceof l.Polygon&&(i=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var r=new l.Polygon(e);return r.closed=i,this.drawShape(r),this},n.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},n.prototype.generateTexture=function(t,e,i){e=e||1;var n=this.getLocalBounds(),r=new a(n.width*e,n.height*e),h=s.fromCanvas(r.canvas,i);return h.baseTexture.resolution=e,r.context.scale(e,e),r.context.translate(-n.x,-n.y),o.renderGraphics(this,r.context),h},n.prototype._renderWebGL=function(t){this.glDirty&&(this.dirty=!0,this.glDirty=!1),t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this)},n.prototype._renderCanvas=function(t){if(!0!==this.isMask){this._prevTint!==this.tint&&(this.dirty=!0);var e=t.context,i=this.worldTransform,n=t.blendModes[this.blendMode];n!==e.globalCompositeOperation&&(e.globalCompositeOperation=n);var r=t.resolution;e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r,i.ty*r),o.renderGraphics(this,e)}},n.prototype.getBounds=function(t){if(!this._currentBounds){if(!this.renderable)return l.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.boundsDirty=!1);var e=this._localBounds,i=e.x,n=e.width+e.x,r=e.y,s=e.height+e.y,a=t||this.worldTransform,o=a.a,h=a.b,u=a.c,c=a.d,d=a.tx,p=a.ty,f=o*n+u*s+d,g=c*s+h*n+p,_=o*i+u*s+d,v=c*s+h*i+p,m=o*i+u*r+d,y=c*r+h*i+p,b=o*n+u*r+d,x=c*r+h*n+p,T=f,E=g,w=f,S=g;w=(w=(w=w>_?_:w)>m?m:w)>b?b:w,S=(S=(S=S>v?v:S)>y?y:S)>x?x:S,T=b>(T=m>(T=_>T?_:T)?m:T)?b:T,E=x>(E=y>(E=v>E?v:E)?y:E)?x:E,this._bounds.x=w,this._bounds.width=T-w,this._bounds.y=S,this._bounds.height=E-S,this._currentBounds=this._bounds}return this._currentBounds},n.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,c);for(var e=this.graphicsData,i=0;i<e.length;i++){var n=e[i];if(n.fill&&n.shape&&n.shape.contains(c.x,c.y))return!0}return!1},n.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,i=1/0,n=-1/0;if(this.graphicsData.length)for(var r,s,a,o,h,l,c=0;c<this.graphicsData.length;c++){var d=this.graphicsData[c],p=d.type,f=d.lineWidth;if(r=d.shape,p===u.SHAPES.RECT||p===u.SHAPES.RREC)a=r.x-f/2,o=r.y-f/2,t=t>a?a:t,e=a+(h=r.width+f)>e?a+h:e,i=i>o?o:i,n=o+(l=r.height+f)>n?o+l:n;else if(p===u.SHAPES.CIRC)a=r.x,o=r.y,t=t>a-(h=r.radius+f/2)?a-h:t,e=a+h>e?a+h:e,i=i>o-(l=r.radius+f/2)?o-l:i,n=o+l>n?o+l:n;else if(p===u.SHAPES.ELIP)a=r.x,o=r.y,t=t>a-(h=r.width+f/2)?a-h:t,e=a+h>e?a+h:e,i=i>o-(l=r.height+f/2)?o-l:i,n=o+l>n?o+l:n;else{s=r.points;for(var g=0;g<s.length;g+=2)t=t>(a=s[g])-f?a-f:t,e=a+f>e?a+f:e,i=i>(o=s[g+1])-f?o-f:i,n=o+f>n?o+f:n}}else t=0,e=0,i=0,n=0;var _=this.boundsPadding;this._localBounds.x=t-_,this._localBounds.width=e-t+2*_,this._localBounds.y=i-_,this._localBounds.height=n-i+2*_},n.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new h(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===u.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty=this.boundsDirty=!0,e},n.prototype.destroy=function(){r.prototype.destroy.apply(this,arguments);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();for(var e in this._webgl)for(var i=0;i<this._webgl[e].data.length;++i)this._webgl[e].data[i].destroy();this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},{"../const":23,"../display/Container":24,"../math":33,"../renderers/canvas/utils/CanvasBuffer":45,"../renderers/canvas/utils/CanvasGraphics":46,"../textures/Texture":72,"./GraphicsData":27}],27:[function(t,e,i){function n(t,e,i,n,r,s,a){this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this._lineTint=e,this.fillColor=n,this.fillAlpha=r,this._fillTint=n,this.fill=s,this.shape=a,this.type=a.type}n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},n.prototype.destroy=function(){this.shape=null}},{}],28:[function(t,e,i){function n(t){o.call(this,t),this.graphicsDataPool=[],this.primitiveShader=null,this.complexPrimitiveShader=null,this.maximumSimplePolySize=200}var r=t("../../utils"),s=t("../../math"),a=t("../../const"),o=t("../../renderers/webgl/utils/ObjectRenderer"),h=t("../../renderers/webgl/WebGLRenderer"),l=t("./WebGLGraphicsData"),u=t("earcut");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,h.registerPlugin("graphics",n),n.prototype.onContextChange=function(){},n.prototype.destroy=function(){o.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},n.prototype.render=function(t){var e,i=this.renderer,n=i.gl,s=i.shaderManager.plugins.primitiveShader;(t.dirty||!t._webGL[n.id])&&this.updateGraphics(t);var a=t._webGL[n.id];i.blendModeManager.setBlendMode(t.blendMode);for(var o=0,h=a.data.length;h>o;o++)e=a.data[o],1===a.data[o].mode?(i.stencilManager.pushStencil(t,e),n.uniform1f(i.shaderManager.complexPrimitiveShader.uniforms.alpha._location,t.worldAlpha*e.alpha),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(e.indices.length-4)),i.stencilManager.popStencil(t,e)):(s=i.shaderManager.primitiveShader,i.shaderManager.setShader(s),n.uniformMatrix3fv(s.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),n.uniformMatrix3fv(s.uniforms.projectionMatrix._location,!1,i.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(s.uniforms.tint._location,r.hex2rgb(t.tint)),n.uniform1f(s.uniforms.alpha._location,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(s.attributes.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(s.attributes.aColor,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer),n.drawElements(n.TRIANGLE_STRIP,e.indices.length,n.UNSIGNED_SHORT,0)),i.drawCount++},n.prototype.updateGraphics=function(t){var e,i,n=this.renderer.gl,r=t._webGL[n.id];if(r||(r=t._webGL[n.id]={lastIndex:0,data:[],gl:n}),t.dirty=!1,t.clearDirty){for(t.clearDirty=!1,e=0;e<r.data.length;e++){var s=r.data[e];s.reset(),this.graphicsDataPool.push(s)}r.data=[],r.lastIndex=0}for(e=r.lastIndex;e<t.graphicsData.length;e++){var o=t.graphicsData[e];if(o.type===a.SHAPES.POLY){if(o.points=o.shape.points.slice(),o.shape.closed&&(o.points[0]!==o.points[o.points.length-2]||o.points[1]!==o.points[o.points.length-1])&&o.points.push(o.points[0],o.points[1]),o.fill&&o.points.length>=6)if(o.points.length<2*this.maximumSimplePolySize){i=this.switchMode(r,0),this.buildPoly(o,i)||(i=this.switchMode(r,1),this.buildComplexPoly(o,i))}else i=this.switchMode(r,1),this.buildComplexPoly(o,i);o.lineWidth>0&&(i=this.switchMode(r,0),this.buildLine(o,i))}else i=this.switchMode(r,0),o.type===a.SHAPES.RECT?this.buildRectangle(o,i):o.type===a.SHAPES.CIRC||o.type===a.SHAPES.ELIP?this.buildCircle(o,i):o.type===a.SHAPES.RREC&&this.buildRoundedRectangle(o,i);r.lastIndex++}for(e=0;e<r.data.length;e++)(i=r.data[e]).dirty&&i.upload()},n.prototype.switchMode=function(t,e){var i;return t.data.length?((i=t.data[t.data.length-1]).points.length>32e4||i.mode!==e||1===e)&&((i=this.graphicsDataPool.pop()||new l(t.gl)).mode=e,t.data.push(i)):((i=this.graphicsDataPool.pop()||new l(t.gl)).mode=e,t.data.push(i)),i.dirty=!0,i},n.prototype.buildRectangle=function(t,e){var i=t.shape,n=i.x,s=i.y,a=i.width,o=i.height;if(t.fill){var h=r.hex2rgb(t.fillColor),l=t.fillAlpha,u=h[0]*l,c=h[1]*l,d=h[2]*l,p=e.points,f=e.indices,g=p.length/6;p.push(n,s),p.push(u,c,d,l),p.push(n+a,s),p.push(u,c,d,l),p.push(n,s+o),p.push(u,c,d,l),p.push(n+a,s+o),p.push(u,c,d,l),f.push(g,g,g+1,g+2,g+3,g+3)}if(t.lineWidth){var _=t.points;t.points=[n,s,n+a,s,n+a,s+o,n,s+o,n,s],this.buildLine(t,e),t.points=_}},n.prototype.buildRoundedRectangle=function(t,e){var i=t.shape,n=i.x,s=i.y,a=i.width,o=i.height,h=i.radius,l=[];if(l.push(n,s+h),this.quadraticBezierCurve(n,s+o-h,n,s+o,n+h,s+o,l),this.quadraticBezierCurve(n+a-h,s+o,n+a,s+o,n+a,s+o-h,l),this.quadraticBezierCurve(n+a,s+h,n+a,s,n+a-h,s,l),this.quadraticBezierCurve(n+h,s,n,s,n,s+h+1e-10,l),t.fill){var c=r.hex2rgb(t.fillColor),d=t.fillAlpha,p=c[0]*d,f=c[1]*d,g=c[2]*d,_=e.points,v=e.indices,m=_.length/6,y=u(l,null,2),b=0;for(b=0;b<y.length;b+=3)v.push(y[b]+m),v.push(y[b]+m),v.push(y[b+1]+m),v.push(y[b+2]+m),v.push(y[b+2]+m);for(b=0;b<l.length;b++)_.push(l[b],l[++b],p,f,g,d)}if(t.lineWidth){var x=t.points;t.points=l,this.buildLine(t,e),t.points=x}},n.prototype.quadraticBezierCurve=function(t,e,i,n,r,s,a){function o(t,e,i){return t+(e-t)*i}for(var h,l,u,c,d,p,f=a||[],g=0,_=0;20>=_;_++)h=o(t,i,g=_/20),l=o(e,n,g),u=o(i,r,g),c=o(n,s,g),d=o(h,u,g),p=o(l,c,g),f.push(d,p);return f},n.prototype.buildCircle=function(t,e){var i,n,s=t.shape,o=s.x,h=s.y;t.type===a.SHAPES.CIRC?(i=s.radius,n=s.radius):(i=s.width,n=s.height);var l=Math.floor(30*Math.sqrt(s.radius))||Math.floor(15*Math.sqrt(s.width+s.height)),u=2*Math.PI/l,c=0;if(t.fill){var d=r.hex2rgb(t.fillColor),p=t.fillAlpha,f=d[0]*p,g=d[1]*p,_=d[2]*p,v=e.points,m=e.indices,y=v.length/6;for(m.push(y),c=0;l+1>c;c++)v.push(o,h,f,g,_,p),v.push(o+Math.sin(u*c)*i,h+Math.cos(u*c)*n,f,g,_,p),m.push(y++,y++);m.push(y-1)}if(t.lineWidth){var b=t.points;for(t.points=[],c=0;l+1>c;c++)t.points.push(o+Math.sin(u*c)*i,h+Math.cos(u*c)*n);this.buildLine(t,e),t.points=b}},n.prototype.buildLine=function(t,e){var i=0,n=t.points;if(0!==n.length){var a=new s.Point(n[0],n[1]),o=new s.Point(n[n.length-2],n[n.length-1]);if(a.x===o.x&&a.y===o.y){(n=n.slice()).pop(),n.pop();var h=(o=new s.Point(n[n.length-2],n[n.length-1])).x+.5*(a.x-o.x),l=o.y+.5*(a.y-o.y);n.unshift(h,l),n.push(h,l)}var u,c,d,p,f,g,_,v,m,y,b,x,T,E,w,S,A,P,C,L,O,j,R=e.points,M=e.indices,D=n.length/2,I=n.length,F=R.length/6,k=t.lineWidth/2,B=r.hex2rgb(t.lineColor),N=t.lineAlpha,U=B[0]*N,H=B[1]*N,X=B[2]*N;for(d=n[0],p=n[1],f=n[2],m=-(p-(g=n[3])),y=d-f,m/=j=Math.sqrt(m*m+y*y),y/=j,m*=k,y*=k,R.push(d-m,p-y,U,H,X,N),R.push(d+m,p+y,U,H,X,N),i=1;D-1>i;i++)d=n[2*(i-1)],p=n[2*(i-1)+1],f=n[2*i],g=n[2*i+1],_=n[2*(i+1)],v=n[2*(i+1)+1],m=-(p-g),y=d-f,m/=j=Math.sqrt(m*m+y*y),y/=j,m*=k,y*=k,b=-(g-v),x=f-_,b/=j=Math.sqrt(b*b+x*x),x/=j,A=(-m+d)*(-y+g)-(-m+f)*(-y+p),L=(-(b*=k)+_)*(-(x*=k)+g)-(-b+f)*(-x+v),O=(w=-y+p-(-y+g))*(C=-b+f-(-b+_))-(P=-x+v-(-x+g))*(S=-m+f-(-m+d)),Math.abs(O)<.1?(O+=10.1,R.push(f-m,g-y,U,H,X,N),R.push(f+m,g+y,U,H,X,N)):((u=(S*L-C*A)/O)-f)*(u-f)+((c=(P*A-w*L)/O)-g)*(c-g)>19600?(T=m-b,E=y-x,T/=j=Math.sqrt(T*T+E*E),E/=j,T*=k,E*=k,R.push(f-T,g-E),R.push(U,H,X,N),R.push(f+T,g+E),R.push(U,H,X,N),R.push(f-T,g-E),R.push(U,H,X,N),I++):(R.push(u,c),R.push(U,H,X,N),R.push(f-(u-f),g-(c-g)),R.push(U,H,X,N));for(d=n[2*(D-2)],p=n[2*(D-2)+1],f=n[2*(D-1)],m=-(p-(g=n[2*(D-1)+1])),y=d-f,m/=j=Math.sqrt(m*m+y*y),y/=j,m*=k,y*=k,R.push(f-m,g-y),R.push(U,H,X,N),R.push(f+m,g+y),R.push(U,H,X,N),M.push(F),i=0;I>i;i++)M.push(F++);M.push(F-1)}},n.prototype.buildComplexPoly=function(t,e){var i=t.points.slice();if(!(i.length<6)){var n=e.indices;e.points=i,e.alpha=t.fillAlpha,e.color=r.hex2rgb(t.fillColor);for(var s,a,o=1/0,h=-1/0,l=1/0,u=-1/0,c=0;c<i.length;c+=2)o=o>(s=i[c])?s:o,h=s>h?s:h,l=l>(a=i[c+1])?a:l,u=a>u?a:u;i.push(o,l,h,l,h,u,o,u);var d=i.length/2;for(c=0;d>c;c++)n.push(c)}},n.prototype.buildPoly=function(t,e){var i=t.points;if(!(i.length<6)){var n=e.points,s=e.indices,a=i.length/2,o=r.hex2rgb(t.fillColor),h=t.fillAlpha,l=o[0]*h,c=o[1]*h,d=o[2]*h,p=u(i,null,2);if(!p)return!1;var f=n.length/6,g=0;for(g=0;g<p.length;g+=3)s.push(p[g]+f),s.push(p[g]+f),s.push(p[g+1]+f),s.push(p[g+2]+f),s.push(p[g+2]+f);for(g=0;a>g;g++)n.push(i[2*g],i[2*g+1],l,c,d,h);return!0}}},{"../../const":23,"../../math":33,"../../renderers/webgl/WebGLRenderer":49,"../../renderers/webgl/utils/ObjectRenderer":63,"../../utils":77,"./WebGLGraphicsData":29,earcut:9}],29:[function(t,e,i){function n(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0,this.glPoints=null,this.glIndices=null}n.prototype.constructor=n,e.exports=n,n.prototype.reset=function(){this.points.length=0,this.indices.length=0},n.prototype.upload=function(){var t=this.gl;this.glPoints=new Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndices=new Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndices,t.STATIC_DRAW),this.dirty=!1},n.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.gl.deleteBuffer(this.buffer),this.gl.deleteBuffer(this.indexBuffer),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},{}],30:[function(t,e,i){var n=e.exports=Object.assign(t("./const"),t("./math"),{utils:t("./utils"),ticker:t("./ticker"),DisplayObject:t("./display/DisplayObject"),Container:t("./display/Container"),Sprite:t("./sprites/Sprite"),ParticleContainer:t("./particles/ParticleContainer"),SpriteRenderer:t("./sprites/webgl/SpriteRenderer"),ParticleRenderer:t("./particles/webgl/ParticleRenderer"),Text:t("./text/Text"),Graphics:t("./graphics/Graphics"),GraphicsData:t("./graphics/GraphicsData"),GraphicsRenderer:t("./graphics/webgl/GraphicsRenderer"),Texture:t("./textures/Texture"),BaseTexture:t("./textures/BaseTexture"),RenderTexture:t("./textures/RenderTexture"),VideoBaseTexture:t("./textures/VideoBaseTexture"),TextureUvs:t("./textures/TextureUvs"),CanvasRenderer:t("./renderers/canvas/CanvasRenderer"),CanvasGraphics:t("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:t("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:t("./renderers/webgl/WebGLRenderer"),WebGLManager:t("./renderers/webgl/managers/WebGLManager"),ShaderManager:t("./renderers/webgl/managers/ShaderManager"),Shader:t("./renderers/webgl/shaders/Shader"),ObjectRenderer:t("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:t("./renderers/webgl/utils/RenderTarget"),AbstractFilter:t("./renderers/webgl/filters/AbstractFilter"),FXAAFilter:t("./renderers/webgl/filters/FXAAFilter"),SpriteMaskFilter:t("./renderers/webgl/filters/SpriteMaskFilter"),autoDetectRenderer:function(t,e,i,r){return t=t||800,e=e||600,!r&&n.utils.isWebGLSupported()?new n.WebGLRenderer(t,e,i):new n.CanvasRenderer(t,e,i)}})},{"./const":23,"./display/Container":24,"./display/DisplayObject":25,"./graphics/Graphics":26,"./graphics/GraphicsData":27,"./graphics/webgl/GraphicsRenderer":28,"./math":33,"./particles/ParticleContainer":39,"./particles/webgl/ParticleRenderer":41,"./renderers/canvas/CanvasRenderer":44,"./renderers/canvas/utils/CanvasBuffer":45,"./renderers/canvas/utils/CanvasGraphics":46,"./renderers/webgl/WebGLRenderer":49,"./renderers/webgl/filters/AbstractFilter":50,"./renderers/webgl/filters/FXAAFilter":51,"./renderers/webgl/filters/SpriteMaskFilter":52,"./renderers/webgl/managers/ShaderManager":56,"./renderers/webgl/managers/WebGLManager":58,"./renderers/webgl/shaders/Shader":61,"./renderers/webgl/utils/ObjectRenderer":63,"./renderers/webgl/utils/RenderTarget":65,"./sprites/Sprite":67,"./sprites/webgl/SpriteRenderer":68,"./text/Text":69,"./textures/BaseTexture":70,"./textures/RenderTexture":71,"./textures/Texture":72,"./textures/TextureUvs":73,"./textures/VideoBaseTexture":74,"./ticker":76,"./utils":77}],31:[function(t,e,i){function n(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}var r=t("./Point");n.prototype.constructor=n,e.exports=n,n.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},n.prototype.set=function(t,e,i,n,r,s){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s,this},n.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},n.prototype.apply=function(t,e){e=e||new r;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},n.prototype.applyInverse=function(t,e){e=e||new r;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},n.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},n.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},n.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,s=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this},n.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},n.prototype.setTransform=function(t,e,i,n,r,s,a,o,h){var l,u,c,d,p,f,g,_,v,m;return p=Math.sin(a),f=Math.cos(a),g=Math.cos(h),_=Math.sin(h),v=-Math.sin(o),m=Math.cos(o),l=f*r,u=p*r,c=-p*s,d=f*s,this.a=g*l+_*c,this.b=g*u+_*d,this.c=v*l+m*c,this.d=v*u+m*d,this.tx=t+(i*l+n*c),this.ty=e+(i*u+n*d),this},n.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},n.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},n.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.prototype.clone=function(){var t=new n;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n.IDENTITY=new n,n.TEMP_MATRIX=new n},{"./Point":32}],32:[function(t,e,i){function n(t,e){this.x=t||0,this.y=e||0}n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copy=function(t){this.set(t.x,t.y)},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},n.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)}},{}],33:[function(t,e,i){e.exports={Point:t("./Point"),Matrix:t("./Matrix"),Circle:t("./shapes/Circle"),Ellipse:t("./shapes/Ellipse"),Polygon:t("./shapes/Polygon"),Rectangle:t("./shapes/Rectangle"),RoundedRectangle:t("./shapes/RoundedRectangle")}},{"./Matrix":31,"./Point":32,"./shapes/Circle":34,"./shapes/Ellipse":35,"./shapes/Polygon":36,"./shapes/Rectangle":37,"./shapes/RoundedRectangle":38}],34:[function(t,e,i){function n(t,e,i){this.x=t||0,this.y=e||0,this.radius=i||0,this.type=s.SHAPES.CIRC}var r=t("./Rectangle"),s=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.radius)},n.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.x-t,n=this.y-e;return this.radius*this.radius>=(i*=i)+(n*=n)},n.prototype.getBounds=function(){return new r(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{"../../const":23,"./Rectangle":37}],35:[function(t,e,i){function n(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this.type=s.SHAPES.ELIP}var r=t("./Rectangle"),s=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return 1>=(i*=i)+(n*=n)},n.prototype.getBounds=function(){return new r(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":23,"./Rectangle":37}],36:[function(t,e,i){function n(t){var e=t;if(!Array.isArray(e)){e=new Array(arguments.length);for(var i=0;i<e.length;++i)e[i]=arguments[i]}if(e[0]instanceof r){for(var n=[],a=0,o=e.length;o>a;a++)n.push(e[a].x,e[a].y);e=n}this.closed=!0,this.points=e,this.type=s.SHAPES.POLY}var r=t("../Point"),s=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.points.slice())},n.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,s=n-1;n>r;s=r++){var a=this.points[2*r],o=this.points[2*r+1],h=this.points[2*s],l=this.points[2*s+1];o>e!=l>e&&(h-a)*(e-o)/(l-o)+a>t&&(i=!i)}return i}},{"../../const":23,"../Point":32}],37:[function(t,e,i){function n(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this.type=r.SHAPES.RECT}var r=t("../../const");n.prototype.constructor=n,e.exports=n,n.EMPTY=new n(0,0,0,0),n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)}},{"../../const":23}],38:[function(t,e,i){function n(t,e,i,n,s){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this.radius=s||20,this.type=r.SHAPES.RREC}var r=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height,this.radius)},n.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height)}},{"../../const":23}],39:[function(t,e,i){function n(t,e,i){r.call(this);(i=i||15e3)>16384&&(i=16384),i>(t=t||15e3)&&(i=t),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=i,this._buffers=null,this._bufferToUpdate=0,this.interactiveChildren=!1,this.blendMode=s.BLEND_MODES.NORMAL,this.roundPixels=!0,this.setProperties(e)}var r=t("../display/Container"),s=t("../const");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.setProperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t?!!t.alpha:this._properties[4])},n.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},n.prototype.renderWebGL=function(t){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},n.prototype.onChildrenChange=function(t){var e=Math.floor(t/this._batchSize);e<this._bufferToUpdate&&(this._bufferToUpdate=e)},n.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,i=this.worldTransform,n=!0,r=0,s=0,a=0,o=0,h=t.blendModes[this.blendMode];h!==e.globalCompositeOperation&&(e.globalCompositeOperation=h),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var u=this.children[l];if(u.visible){var c=u.texture.frame;if(e.globalAlpha=this.worldAlpha*u.alpha,u.rotation%(2*Math.PI)==0)n&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),n=!1),r=u.anchor.x*(-c.width*u.scale.x)+u.position.x+.5,s=u.anchor.y*(-c.height*u.scale.y)+u.position.y+.5,a=c.width*u.scale.x,o=c.height*u.scale.y;else{n||(n=!0),u.displayObjectUpdateTransform();var d=u.worldTransform;t.roundPixels?e.setTransform(d.a,d.b,d.c,d.d,0|d.tx,0|d.ty):e.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty),r=u.anchor.x*-c.width+.5,s=u.anchor.y*-c.height+.5,a=c.width,o=c.height}e.drawImage(u.texture.baseTexture.source,c.x,c.y,c.width,c.height,r,s,a,o)}}}},n.prototype.destroy=function(){if(r.prototype.destroy.apply(this,arguments),this._buffers)for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._properties=null,this._buffers=null}},{"../const":23,"../display/Container":24}],40:[function(t,e,i){function n(t,e,i,n){this.gl=t,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<e.length;r++){var s=e[r];i[r]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}n.prototype.constructor=n,e.exports=n,n.prototype.initBuffers=function(){var t,e,i=this.gl,n=0;for(this.dynamicStride=0,t=0;t<this.dynamicProperties.length;t++)(e=this.dynamicProperties[t]).offset=n,n+=e.size,this.dynamicStride+=e.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.dynamicBuffer),i.bufferData(i.ARRAY_BUFFER,this.dynamicData,i.DYNAMIC_DRAW);var r=0;for(this.staticStride=0,t=0;t<this.staticProperties.length;t++)(e=this.staticProperties[t]).offset=r,r+=e.size,this.staticStride+=e.size;this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.staticBuffer),i.bufferData(i.ARRAY_BUFFER,this.staticData,i.DYNAMIC_DRAW)},n.prototype.uploadDynamic=function(t,e,i){for(var n=this.gl,r=0;r<this.dynamicProperties.length;r++){var s=this.dynamicProperties[r];s.uploadFunction(t,e,i,this.dynamicData,this.dynamicStride,s.offset)}n.bindBuffer(n.ARRAY_BUFFER,this.dynamicBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,this.dynamicData)},n.prototype.uploadStatic=function(t,e,i){for(var n=this.gl,r=0;r<this.staticProperties.length;r++){var s=this.staticProperties[r];s.uploadFunction(t,e,i,this.staticData,this.staticStride,s.offset)}n.bindBuffer(n.ARRAY_BUFFER,this.staticBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,this.staticData)},n.prototype.bind=function(){var t,e,i=this.gl;for(i.bindBuffer(i.ARRAY_BUFFER,this.dynamicBuffer),t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],i.vertexAttribPointer(e.attribute,e.size,i.FLOAT,!1,4*this.dynamicStride,4*e.offset);for(i.bindBuffer(i.ARRAY_BUFFER,this.staticBuffer),t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],i.vertexAttribPointer(e.attribute,e.size,i.FLOAT,!1,4*this.staticStride,4*e.offset)},n.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.gl.deleteBuffer(this.dynamicBuffer),this.staticProperties=null,this.staticData=null,this.gl.deleteBuffer(this.staticBuffer)}},{}],41:[function(t,e,i){function n(t){r.call(this,t);this.indices=new Uint16Array(98304);for(var e=0,i=0;98304>e;e+=6,i+=4)this.indices[e+0]=i+0,this.indices[e+1]=i+1,this.indices[e+2]=i+2,this.indices[e+3]=i+0,this.indices[e+4]=i+2,this.indices[e+5]=i+3;this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new h.Matrix}var r=t("../../renderers/webgl/utils/ObjectRenderer"),s=t("../../renderers/webgl/WebGLRenderer"),a=t("./ParticleShader"),o=t("./ParticleBuffer"),h=t("../../math");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,s.registerPlugin("particle",n),n.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new a(this.renderer.shaderManager),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},n.prototype.start=function(){var t=this.renderer.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.shader;this.renderer.shaderManager.setShader(e)},n.prototype.render=function(t){var e=t.children,i=e.length,n=t._maxSize,r=t._batchSize;if(0!==i){i>n&&(i=n),t._buffers||(t._buffers=this.generateBuffers(t)),this.renderer.blendModeManager.setBlendMode(t.blendMode);var s=this.renderer.gl,a=t.worldTransform.copy(this.tempMatrix);a.prepend(this.renderer.currentRenderTarget.projectionMatrix),s.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,!1,a.toArray(!0)),s.uniform1f(this.shader.uniforms.uAlpha._location,t.worldAlpha);var o=e[0]._texture.baseTexture;if(o._glTextures[s.id])s.bindTexture(s.TEXTURE_2D,o._glTextures[s.id]);else{if(!this.renderer.updateTexture(o))return;t._properties[0]&&t._properties[3]||(t._bufferToUpdate=0)}for(var h=0,l=0;i>h;h+=r,l+=1){var u=i-h;u>r&&(u=r);var c=t._buffers[l];c.uploadDynamic(e,h,u),t._bufferToUpdate===l&&(c.uploadStatic(e,h,u),t._bufferToUpdate=l+1),c.bind(this.shader),s.drawElements(s.TRIANGLES,6*u,s.UNSIGNED_SHORT,0),this.renderer.drawCount++}}},n.prototype.generateBuffers=function(t){var e,i=this.renderer.gl,n=[],r=t._maxSize,s=t._batchSize,a=t._properties;for(e=0;r>e;e+=s)n.push(new o(i,this.properties,a,s));return n},n.prototype.uploadVertices=function(t,e,i,n,r,s){for(var a,o,h,l,u,c,d,p,f,g=0;i>g;g++)o=(a=t[e+g])._texture,l=a.scale.x,u=a.scale.y,o.trim?(c=(d=(h=o.trim).x-a.anchor.x*h.width)+o.crop.width,p=(f=h.y-a.anchor.y*h.height)+o.crop.height):(c=o._frame.width*(1-a.anchor.x),d=o._frame.width*-a.anchor.x,p=o._frame.height*(1-a.anchor.y),f=o._frame.height*-a.anchor.y),n[s]=d*l,n[s+1]=f*u,n[s+r]=c*l,n[s+r+1]=f*u,n[s+2*r]=c*l,n[s+2*r+1]=p*u,n[s+3*r]=d*l,n[s+3*r+1]=p*u,s+=4*r},n.prototype.uploadPosition=function(t,e,i,n,r,s){for(var a=0;i>a;a++){var o=t[e+a].position;n[s]=o.x,n[s+1]=o.y,n[s+r]=o.x,n[s+r+1]=o.y,n[s+2*r]=o.x,n[s+2*r+1]=o.y,n[s+3*r]=o.x,n[s+3*r+1]=o.y,s+=4*r}},n.prototype.uploadRotation=function(t,e,i,n,r,s){for(var a=0;i>a;a++){var o=t[e+a].rotation;n[s]=o,n[s+r]=o,n[s+2*r]=o,n[s+3*r]=o,s+=4*r}},n.prototype.uploadUvs=function(t,e,i,n,r,s){for(var a=0;i>a;a++){var o=t[e+a]._texture._uvs;o?(n[s]=o.x0,n[s+1]=o.y0,n[s+r]=o.x1,n[s+r+1]=o.y1,n[s+2*r]=o.x2,n[s+2*r+1]=o.y2,n[s+3*r]=o.x3,n[s+3*r+1]=o.y3,s+=4*r):(n[s]=0,n[s+1]=0,n[s+r]=0,n[s+r+1]=0,n[s+2*r]=0,n[s+2*r+1]=0,n[s+3*r]=0,n[s+3*r+1]=0,s+=4*r)}},n.prototype.uploadAlpha=function(t,e,i,n,r,s){for(var a=0;i>a;a++){var o=t[e+a].alpha;n[s]=o,n[s+r]=o,n[s+2*r]=o,n[s+3*r]=o,s+=4*r}},n.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),r.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},{"../../math":33,"../../renderers/webgl/WebGLRenderer":49,"../../renderers/webgl/utils/ObjectRenderer":63,"./ParticleBuffer":40,"./ParticleShader":42}],42:[function(t,e,i){function n(t){r.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}var r=t("../../renderers/webgl/shaders/TextureShader");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n},{"../../renderers/webgl/shaders/TextureShader":62}],43:[function(t,e,i){function n(t,e,i,n){if(o.call(this),r.sayHello(t),n)for(var h in a.DEFAULT_RENDER_OPTIONS)void 0===n[h]&&(n[h]=a.DEFAULT_RENDER_OPTIONS[h]);else n=a.DEFAULT_RENDER_OPTIONS;this.type=a.RENDERER_TYPE.UNKNOWN,this.width=e||800,this.height=i||600,this.view=n.view||document.createElement("canvas"),this.resolution=n.resolution,this.transparent=n.transparent,this.autoResize=n.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=n.preserveDrawingBuffer,this.clearBeforeRender=n.clearBeforeRender,this.roundPixels=n.roundPixels,this._backgroundColor=0,this._backgroundColorRgb=[0,0,0],this._backgroundColorString="#000000",this.backgroundColor=n.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent={worldTransform:new s.Matrix,worldAlpha:1,children:[]},this._lastObjectRendered=this._tempDisplayObjectParent}var r=t("../utils"),s=t("../math"),a=t("../const"),o=t("eventemitter3");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=r.hex2string(t),r.hex2rgb(t,this._backgroundColorRgb)}}}),n.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},n.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=a.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgb=null,this._backgroundColorString=null}},{"../const":23,"../math":33,"../utils":77,eventemitter3:10}],44:[function(t,e,i){function n(t,e,i){i=i||{},r.call(this,"Canvas",t,e,i),this.type=h.RENDERER_TYPE.CANVAS,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.maskManager=new s,this.smoothProperty="imageSmoothingEnabled",this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this._mapBlendModes(),this._tempDisplayObjectParent={worldTransform:new o.Matrix,worldAlpha:1},this.resize(t,e)}var r=t("../SystemRenderer"),s=t("./utils/CanvasMaskManager"),a=t("../../utils"),o=t("../../math"),h=t("../../const");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,a.pluginTarget.mixin(n),n.prototype.render=function(t){this.emit("prerender");var e=t.parent;this._lastObjectRendered=t,t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e,this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.context.globalCompositeOperation=this.blendModes[h.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t,this.context),this.emit("postrender")},n.prototype.destroy=function(t){this.destroyPlugins(),r.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},n.prototype.renderDisplayObject=function(t,e){var i=this.context;this.context=e,t.renderCanvas(this),this.context=i},n.prototype.resize=function(t,e){r.prototype.resize.call(this,t,e),this.smoothProperty&&(this.context[this.smoothProperty]=h.SCALE_MODES.DEFAULT===h.SCALE_MODES.LINEAR)},n.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},a.canUseNewCanvasBlendModes()?(this.blendModes[h.BLEND_MODES.NORMAL]="source-over",this.blendModes[h.BLEND_MODES.ADD]="lighter",this.blendModes[h.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[h.BLEND_MODES.SCREEN]="screen",this.blendModes[h.BLEND_MODES.OVERLAY]="overlay",this.blendModes[h.BLEND_MODES.DARKEN]="darken",this.blendModes[h.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[h.BLEND_MODES.COLOR_DODGE]="color-dodge",this.blendModes[h.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[h.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[h.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[h.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[h.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[h.BLEND_MODES.HUE]="hue",this.blendModes[h.BLEND_MODES.SATURATION]="saturate",this.blendModes[h.BLEND_MODES.COLOR]="color",this.blendModes[h.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[h.BLEND_MODES.NORMAL]="source-over",this.blendModes[h.BLEND_MODES.ADD]="lighter",this.blendModes[h.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[h.BLEND_MODES.SCREEN]="source-over",this.blendModes[h.BLEND_MODES.OVERLAY]="source-over",this.blendModes[h.BLEND_MODES.DARKEN]="source-over",this.blendModes[h.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[h.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[h.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[h.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[h.BLEND_MODES.SOFT_LIGHT]="source-over",this.blendModes[h.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[h.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[h.BLEND_MODES.HUE]="source-over",this.blendModes[h.BLEND_MODES.SATURATION]="source-over",this.blendModes[h.BLEND_MODES.COLOR]="source-over",this.blendModes[h.BLEND_MODES.LUMINOSITY]="source-over"))}},{"../../const":23,"../../math":33,"../../utils":77,"../SystemRenderer":43,"./utils/CanvasMaskManager":47}],45:[function(t,e,i){function n(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e}n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},height:{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}}),n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(t,e){this.canvas.width=t,this.canvas.height=e},n.prototype.destroy=function(){this.context=null,this.canvas=null}},{}],46:[function(t,e,i){var n=t("../../../const"),r={};e.exports=r,r.renderGraphics=function(t,e){var i=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var r=0;r<t.graphicsData.length;r++){var s=t.graphicsData[r],a=s.shape,o=s._fillTint,h=s._lineTint;if(e.lineWidth=s.lineWidth,s.type===n.SHAPES.POLY){e.beginPath();var l=a.points;e.moveTo(l[0],l[1]);for(var u=1;u<l.length/2;u++)e.lineTo(l[2*u],l[2*u+1]);a.closed&&e.lineTo(l[0],l[1]),l[0]===l[l.length-2]&&l[1]===l[l.length-1]&&e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|o).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}else if(s.type===n.SHAPES.RECT)(s.fillColor||0===s.fillColor)&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|o).toString(16)).substr(-6),e.fillRect(a.x,a.y,a.width,a.height)),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.strokeRect(a.x,a.y,a.width,a.height));else if(s.type===n.SHAPES.CIRC)e.beginPath(),e.arc(a.x,a.y,a.radius,0,2*Math.PI),e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|o).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke());else if(s.type===n.SHAPES.ELIP){var c=2*a.width,d=2*a.height,p=a.x-c/2,f=a.y-d/2;e.beginPath();var g=.5522848,_=c/2*g,v=d/2*g,m=p+c,y=f+d,b=p+c/2,x=f+d/2;e.moveTo(p,x),e.bezierCurveTo(p,x-v,b-_,f,b,f),e.bezierCurveTo(b+_,f,m,x-v,m,x),e.bezierCurveTo(m,x+v,b+_,y,b,y),e.bezierCurveTo(b-_,y,p,x+v,p,x),e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|o).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}else if(s.type===n.SHAPES.RREC){var T=a.x,E=a.y,w=a.width,S=a.height,A=a.radius,P=Math.min(w,S)/2|0;A=A>P?P:A,e.beginPath(),e.moveTo(T,E+A),e.lineTo(T,E+S-A),e.quadraticCurveTo(T,E+S,T+A,E+S),e.lineTo(T+w-A,E+S),e.quadraticCurveTo(T+w,E+S,T+w,E+S-A),e.lineTo(T+w,E+A),e.quadraticCurveTo(T+w,E,T+w-A,E),e.lineTo(T+A,E),e.quadraticCurveTo(T,E,T,E+A),e.closePath(),(s.fillColor||0===s.fillColor)&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|o).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}}},r.renderGraphicsMask=function(t,e){var i=t.graphicsData.length;if(0!==i){e.beginPath();for(var r=0;i>r;r++){var s=t.graphicsData[r],a=s.shape;if(s.type===n.SHAPES.POLY){var o=a.points;e.moveTo(o[0],o[1]);for(var h=1;h<o.length/2;h++)e.lineTo(o[2*h],o[2*h+1]);o[0]===o[o.length-2]&&o[1]===o[o.length-1]&&e.closePath()}else if(s.type===n.SHAPES.RECT)e.rect(a.x,a.y,a.width,a.height),e.closePath();else if(s.type===n.SHAPES.CIRC)e.arc(a.x,a.y,a.radius,0,2*Math.PI),e.closePath();else if(s.type===n.SHAPES.ELIP){var l=2*a.width,u=2*a.height,c=a.x-l/2,d=a.y-u/2,p=.5522848,f=l/2*p,g=u/2*p,_=c+l,v=d+u,m=c+l/2,y=d+u/2;e.moveTo(c,y),e.bezierCurveTo(c,y-g,m-f,d,m,d),e.bezierCurveTo(m+f,d,_,y-g,_,y),e.bezierCurveTo(_,y+g,m+f,v,m,v),e.bezierCurveTo(m-f,v,c,y+g,c,y),e.closePath()}else if(s.type===n.SHAPES.RREC){var b=a.x,x=a.y,T=a.width,E=a.height,w=a.radius,S=Math.min(T,E)/2|0;w=w>S?S:w,e.moveTo(b,x+w),e.lineTo(b,x+E-w),e.quadraticCurveTo(b,x+E,b+w,x+E),e.lineTo(b+T-w,x+E),e.quadraticCurveTo(b+T,x+E,b+T,x+E-w),e.lineTo(b+T,x+w),e.quadraticCurveTo(b+T,x,b+T-w,x),e.lineTo(b+w,x),e.quadraticCurveTo(b,x,b,x+w),e.closePath()}}}},r.updateGraphicsTint=function(t){if(16777215!==t.tint||t._prevTint!==t.tint){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,n=(255&t.tint)/255,r=0;r<t.graphicsData.length;r++){var s=t.graphicsData[r],a=0|s.fillColor,o=0|s.lineColor;s._fillTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*n*255,s._lineTint=((o>>16&255)/255*e*255<<16)+((o>>8&255)/255*i*255<<8)+(255&o)/255*n*255}}}},{"../../../const":23}],47:[function(t,e,i){function n(){}var r=t("./CanvasGraphics");n.prototype.constructor=n,e.exports=n,n.prototype.pushMask=function(t,e){e.context.save();var i=t.alpha,n=t.worldTransform,s=e.resolution;e.context.setTransform(n.a*s,n.b*s,n.c*s,n.d*s,n.tx*s,n.ty*s),t.texture||(r.renderGraphicsMask(t,e.context),e.context.clip()),t.worldAlpha=i},n.prototype.popMask=function(t){t.context.restore()},n.prototype.destroy=function(){}},{"./CanvasGraphics":46}],48:[function(t,e,i){var n=t("../../../utils"),r={};e.exports=r,r.getTintedTexture=function(t,e){var i=t.texture,n="#"+("00000"+(0|(e=r.roundColor(e))).toString(16)).substr(-6);if(i.tintCache=i.tintCache||{},i.tintCache[n])return i.tintCache[n];var s=r.canvas||document.createElement("canvas");if(r.tintMethod(i,e,s),r.convertTintToImage){var a=new Image;a.src=s.toDataURL(),i.tintCache[n]=a}else i.tintCache[n]=s,r.canvas=null;return s},r.tintWithMultiply=function(t,e,i){var n=i.getContext("2d"),r=t.baseTexture.resolution,s=t.crop.clone();s.x*=r,s.y*=r,s.width*=r,s.height*=r,i.width=s.width,i.height=s.height,n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,s.width,s.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height)},r.tintWithOverlay=function(t,e,i){var n=i.getContext("2d"),r=t.baseTexture.resolution,s=t.crop.clone();s.x*=r,s.y*=r,s.width*=r,s.height*=r,i.width=s.width,i.height=s.height,n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,s.width,s.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height)},r.tintWithPerPixel=function(t,e,i){var r=i.getContext("2d"),s=t.baseTexture.resolution,a=t.crop.clone();a.x*=s,a.y*=s,a.width*=s,a.height*=s,i.width=a.width,i.height=a.height,r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height);for(var o=n.hex2rgb(e),h=o[0],l=o[1],u=o[2],c=r.getImageData(0,0,a.width,a.height),d=c.data,p=0;p<d.length;p+=4)d[p+0]*=h,d[p+1]*=l,d[p+2]*=u;r.putImageData(c,0,0)},r.roundColor=function(t){var e=r.cacheStepsPerColorChannel,i=n.hex2rgb(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),n.rgb2hex(i)},r.cacheStepsPerColorChannel=8,r.convertTintToImage=!1,r.canUseMultiply=n.canUseNewCanvasBlendModes(),r.tintMethod=r.canUseMultiply?r.tintWithMultiply:r.tintWithPerPixel},{"../../../utils":77}],49:[function(t,e,i){function n(t,e,i){i=i||{},r.call(this,"WebGL",t,e,i),this.type=f.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._useFXAA=!!i.forceFXAA&&i.antialias,this._FXAAFilter=null,this._contextOptions={alpha:this.transparent,antialias:i.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer},this.drawCount=0,this.shaderManager=new s(this),this.maskManager=new a(this),this.stencilManager=new o(this),this.filterManager=new h(this),this.blendModeManager=new l(this),this.currentRenderTarget=null,this.currentRenderer=new c(this),this.initPlugins(),this._createContext(),this._initContext(),this._mapGlModes(),this._managedTextures=[],this._renderTargetStack=[]}var r=t("../SystemRenderer"),s=t("./managers/ShaderManager"),a=t("./managers/MaskManager"),o=t("./managers/StencilManager"),h=t("./managers/FilterManager"),l=t("./managers/BlendModeManager"),u=t("./utils/RenderTarget"),c=t("./utils/ObjectRenderer"),d=t("./filters/FXAAFilter"),p=t("../../utils"),f=t("../../const");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,p.pluginTarget.mixin(n),n.glContextId=0,n.prototype._createContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=t,!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=n.glContextId++,t.id=this.glContextId,t.renderer=this},n.prototype._initContext=function(){var t=this.gl;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this.renderTarget=new u(t,this.width,this.height,null,this.resolution,!0),this.setRenderTarget(this.renderTarget),this.emit("context",t),this.resize(this.width,this.height),this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!t.getContextAttributes().antialias),this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),this._FXAAFilter=[new d])},n.prototype.render=function(t){if(this.emit("prerender"),!this.gl.isContextLost()){this.drawCount=0,this._lastObjectRendered=t,this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,t.filterArea=this.renderTarget.size,t.filters=this._FXAAFilter);var e=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e;var i=this.gl;this.setRenderTarget(this.renderTarget),this.clearBeforeRender&&(this.transparent?i.clearColor(0,0,0,0):i.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),i.clear(i.COLOR_BUFFER_BIT)),this.renderDisplayObject(t,this.renderTarget),this.emit("postrender")}},n.prototype.renderDisplayObject=function(t,e,i){this.setRenderTarget(e),i&&e.clear(),this.filterManager.setFilterStack(e.filterStack),t.renderWebGL(this),this.currentRenderer.flush()},n.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},n.prototype.setRenderTarget=function(t){this.currentRenderTarget!==t&&(this.currentRenderTarget=t,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(t.stencilMaskStack))},n.prototype.resize=function(t,e){r.prototype.resize.call(this,t,e),this.filterManager.resize(t,e),this.renderTarget.resize(t,e),this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),this.gl.viewport(0,0,this.width,this.height))},n.prototype.updateTexture=function(t){if((t=t.baseTexture||t).hasLoaded){var e=this.gl;return t._glTextures[e.id]||(t._glTextures[e.id]=e.createTexture(),t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t)),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.mipmap&&t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),t._glTextures[e.id]}},n.prototype.destroyTexture=function(t,e){if((t=t.baseTexture||t).hasLoaded&&t._glTextures[this.gl.id]&&(this.gl.deleteTexture(t._glTextures[this.gl.id]),delete t._glTextures[this.gl.id],!e)){var i=this._managedTextures.indexOf(t);-1!==i&&p.removeItems(this._managedTextures,i,1)}},n.prototype.handleContextLost=function(t){t.preventDefault()},n.prototype.handleContextRestored=function(){this._initContext();for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.gl.id]&&delete e._glTextures[this.gl.id]}},n.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);for(var e=0;e<this._managedTextures.length;++e){var i=this._managedTextures[e];this.destroyTexture(i,!0),i.off("update",this.updateTexture,this),i.off("dispose",this.destroyTexture,this)}r.prototype.destroy.call(this,t),this.uid=0,this.shaderManager.destroy(),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.blendModeManager.destroy(),this.shaderManager=null,this.maskManager=null,this.filterManager=null,this.blendModeManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this._managedTextures=null,this.drawCount=0,this.gl.useProgram(null),this.gl=null},n.prototype._mapGlModes=function(){var t=this.gl;this.blendModes||(this.blendModes={},this.blendModes[f.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.ADD]=[t.SRC_ALPHA,t.DST_ALPHA],this.blendModes[f.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SCREEN]=[t.SRC_ALPHA,t.ONE],this.blendModes[f.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA]),this.drawModes||(this.drawModes={},this.drawModes[f.DRAW_MODES.POINTS]=t.POINTS,this.drawModes[f.DRAW_MODES.LINES]=t.LINES,this.drawModes[f.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,this.drawModes[f.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,this.drawModes[f.DRAW_MODES.TRIANGLES]=t.TRIANGLES,this.drawModes[f.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,this.drawModes[f.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN)}},{"../../const":23,"../../utils":77,"../SystemRenderer":43,"./filters/FXAAFilter":51,"./managers/BlendModeManager":53,"./managers/FilterManager":54,"./managers/MaskManager":55,"./managers/ShaderManager":56,"./managers/StencilManager":57,"./utils/ObjectRenderer":63,"./utils/RenderTarget":65}],50:[function(t,e,i){function n(t,e,i){this.shaders=[],this.padding=0,this.uniforms=i||{},this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc}var r=t("../shaders/TextureShader");n.prototype.constructor=n,e.exports=n,n.prototype.getShader=function(t){var e=t.gl,i=this.shaders[e.id];return i||(i=new r(t.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[e.id]=i),i},n.prototype.applyFilter=function(t,e,i,n){var r=this.getShader(t);t.filterManager.applyFilter(r,e,i,n)},n.prototype.syncUniform=function(t){for(var e=0,i=this.shaders.length;i>e;++e)this.shaders[e].syncUniform(t)}},{"../shaders/TextureShader":62}],51:[function(t,e,i){function n(){r.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',{resolution:{type:"v2",value:{x:1,y:1}}})}var r=t("./AbstractFilter");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i){var n=t.filterManager,r=this.getShader(t);n.applyFilter(r,e,i)}},{"./AbstractFilter":50}],52:[function(t,e,i){function n(t){var e=new s.Matrix;r.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",{mask:{type:"sampler2D",value:t._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:e.toArray(!0)}}),this.maskSprite=t,this.maskMatrix=e}var r=t("./AbstractFilter"),s=t("../../../math");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i){var n=t.filterManager;this.uniforms.mask.value=this.maskSprite._texture,n.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.alpha.value=this.maskSprite.worldAlpha;var r=this.getShader(t);n.applyFilter(r,e,i)},Object.defineProperties(n.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}},offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}})},{"../../../math":33,"./AbstractFilter":50}],53:[function(t,e,i){function n(t){r.call(this,t),this.currentBlendMode=99999}var r=t("./WebGLManager");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var e=this.renderer.blendModes[this.currentBlendMode];return this.renderer.gl.blendFunc(e[0],e[1]),!0}},{"./WebGLManager":58}],54:[function(t,e,i){function n(t){r.call(this,t),this.filterStack=[],this.filterStack.push({renderTarget:t.currentRenderTarget,filter:[],bounds:null}),this.texturePool=[],this.textureSize=new h.Rectangle(0,0,t.width,t.height),this.currentFrame=null}var r=t("./WebGLManager"),s=t("../utils/RenderTarget"),a=t("../../../const"),o=t("../utils/Quad"),h=t("../../../math");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.onContextChange=function(){this.texturePool.length=0;var t=this.renderer.gl;this.quad=new o(t)},n.prototype.setFilterStack=function(t){this.filterStack=t},n.prototype.pushFilter=function(t,e){var i=t.filterArea?t.filterArea.clone():t.getBounds();i.x=0|i.x,i.y=0|i.y,i.width=0|i.width,i.height=0|i.height;var n=0|e[0].padding;if(i.x-=n,i.y-=n,i.width+=2*n,i.height+=2*n,this.renderer.currentRenderTarget.transform){var r=this.renderer.currentRenderTarget.transform;i.x+=r.tx,i.y+=r.ty,this.capFilterArea(i),i.x-=r.tx,i.y-=r.ty}else this.capFilterArea(i);if(i.width>0&&i.height>0){this.currentFrame=i;var s=this.getRenderTarget();this.renderer.setRenderTarget(s),s.clear(),this.filterStack.push({renderTarget:s,filter:e})}else this.filterStack.push({renderTarget:null,filter:e})},n.prototype.popFilter=function(){var t=this.filterStack.pop(),e=this.filterStack[this.filterStack.length-1],i=t.renderTarget;if(t.renderTarget){var n=e.renderTarget,r=this.renderer.gl;this.currentFrame=i.frame,this.quad.map(this.textureSize,i.frame),r.bindBuffer(r.ARRAY_BUFFER,this.quad.vertexBuffer),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var s=t.filter;if(r.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,r.FLOAT,!1,0,0),r.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,r.FLOAT,!1,0,32),r.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,r.FLOAT,!1,0,64),this.renderer.blendModeManager.setBlendMode(a.BLEND_MODES.NORMAL),1===s.length)s[0].uniforms.dimensions&&(s[0].uniforms.dimensions.value[0]=this.renderer.width,s[0].uniforms.dimensions.value[1]=this.renderer.height,s[0].uniforms.dimensions.value[2]=this.quad.vertices[0],s[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),s[0].applyFilter(this.renderer,i,n),this.returnRenderTarget(i);else{for(var o=i,h=this.getRenderTarget(!0),l=0;l<s.length-1;l++){var u=s[l];u.uniforms.dimensions&&(u.uniforms.dimensions.value[0]=this.renderer.width,u.uniforms.dimensions.value[1]=this.renderer.height,u.uniforms.dimensions.value[2]=this.quad.vertices[0],u.uniforms.dimensions.value[3]=this.quad.vertices[5]),u.applyFilter(this.renderer,o,h);var c=o;o=h,h=c}s[s.length-1].applyFilter(this.renderer,o,n),this.returnRenderTarget(o),this.returnRenderTarget(h)}return t.filter}},n.prototype.getRenderTarget=function(t){var e=this.texturePool.pop()||new s(this.renderer.gl,this.textureSize.width,this.textureSize.height,a.SCALE_MODES.LINEAR,this.renderer.resolution*a.FILTER_RESOLUTION);return e.frame=this.currentFrame,t&&e.clear(!0),e},n.prototype.returnRenderTarget=function(t){this.texturePool.push(t)},n.prototype.applyFilter=function(t,e,i,n){var r=this.renderer.gl;this.renderer.setRenderTarget(i),n&&i.clear(),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,e.texture),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),this.renderer.drawCount++},n.prototype.calculateMappedMatrix=function(t,e,i){var n=e.worldTransform.copy(h.Matrix.TEMP_MATRIX),r=e._texture.baseTexture,s=i.identity(),a=this.textureSize.height/this.textureSize.width;s.translate(t.x/this.textureSize.width,t.y/this.textureSize.height),s.scale(1,a);var o=this.textureSize.width/r.width,l=this.textureSize.height/r.height;return n.tx/=r.width*o,n.ty/=r.width*o,n.invert(),s.prepend(n),s.scale(1,1/a),s.scale(o,l),s.translate(e.anchor.x,e.anchor.y),s},n.prototype.capFilterArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.textureSize.width&&(t.width=this.textureSize.width-t.x),t.y+t.height>this.textureSize.height&&(t.height=this.textureSize.height-t.y)},n.prototype.resize=function(t,e){this.textureSize.width=t,this.textureSize.height=e;for(var i=0;i<this.texturePool.length;i++)this.texturePool[i].resize(t,e)},n.prototype.destroy=function(){this.quad.destroy(),r.prototype.destroy.call(this),this.filterStack=null,this.offsetY=0;for(var t=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null}},{"../../../const":23,"../../../math":33,"../utils/Quad":64,"../utils/RenderTarget":65,"./WebGLManager":58}],55:[function(t,e,i){function n(t){r.call(this,t),this.stencilStack=[],this.reverse=!0,this.count=0,this.alphaMaskPool=[]}var r=t("./WebGLManager"),s=t("../filters/SpriteMaskFilter");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.pushMask=function(t,e){e.texture?this.pushSpriteMask(t,e):this.pushStencilMask(t,e)},n.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.popStencilMask(t,e)},n.prototype.pushSpriteMask=function(t,e){var i=this.alphaMaskPool.pop();i||(i=[new s(e)]),i[0].maskSprite=e,this.renderer.filterManager.pushFilter(t,i)},n.prototype.popSpriteMask=function(){var t=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(t)},n.prototype.pushStencilMask=function(t,e){this.renderer.stencilManager.pushMask(e)},n.prototype.popStencilMask=function(t,e){this.renderer.stencilManager.popMask(e)}},{"../filters/SpriteMaskFilter":52,"./WebGLManager":58}],56:[function(t,e,i){function n(t){r.call(this,t),this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.stack=[],this._currentId=-1,this.currentShader=null}var r=t("./WebGLManager"),s=t("../shaders/TextureShader"),a=t("../shaders/ComplexPrimitiveShader"),o=t("../shaders/PrimitiveShader"),h=t("../../../utils");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,h.pluginTarget.mixin(n),e.exports=n,n.prototype.onContextChange=function(){this.initPlugins();var t=this.renderer.gl;this.maxAttibs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.defaultShader=new s(this),this.primitiveShader=new o(this),this.complexPrimitiveShader=new a(this)},n.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(var i in t)this.tempAttribState[t[i]]=!0;var n=this.renderer.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.attribState[e]?n.enableVertexAttribArray(e):n.disableVertexAttribArray(e))},n.prototype.setShader=function(t){return this._currentId!==t.uid&&(this._currentId=t.uid,this.currentShader=t,this.renderer.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},n.prototype.destroy=function(){this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),r.prototype.destroy.call(this),this.destroyPlugins(),this.attribState=null,this.tempAttribState=null}},{"../../../utils":77,"../shaders/ComplexPrimitiveShader":59,"../shaders/PrimitiveShader":60,"../shaders/TextureShader":62,"./WebGLManager":58}],57:[function(t,e,i){function n(t){r.call(this,t),this.stencilMaskStack=null}var r=t("./WebGLManager"),s=t("../../../utils");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.stencilStack.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},n.prototype.pushStencil=function(t,e){this.renderer.currentRenderTarget.attachStencilBuffer();var i=this.renderer.gl,n=this.stencilMaskStack;this.bindGraphics(t,e),0===n.stencilStack.length&&(i.enable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),n.reverse=!0,n.count=0),n.stencilStack.push(e);var r=n.count;i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.ALWAYS,0,255),i.stencilOp(i.KEEP,i.KEEP,i.INVERT),1===e.mode?(i.drawElements(i.TRIANGLE_FAN,e.indices.length-4,i.UNSIGNED_SHORT,0),n.reverse?(i.stencilFunc(i.EQUAL,255-r,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)):(i.stencilFunc(i.EQUAL,r,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(e.indices.length-4)),n.reverse?i.stencilFunc(i.EQUAL,255-(r+1),255):i.stencilFunc(i.EQUAL,r+1,255),n.reverse=!n.reverse):(n.reverse?(i.stencilFunc(i.EQUAL,r,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,255-r,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),i.drawElements(i.TRIANGLE_STRIP,e.indices.length,i.UNSIGNED_SHORT,0),n.reverse?i.stencilFunc(i.EQUAL,r+1,255):i.stencilFunc(i.EQUAL,255-(r+1),255)),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),n.count++},n.prototype.bindGraphics=function(t,e){var i,n=this.renderer.gl;1===e.mode?(i=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(i),n.uniformMatrix3fv(i.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),n.uniformMatrix3fv(i.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(i.uniforms.tint._location,s.hex2rgb(t.tint)),n.uniform3fv(i.uniforms.color._location,e.color),n.uniform1f(i.uniforms.alpha._location,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(i.attributes.aVertexPosition,2,n.FLOAT,!1,8,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer)):(i=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(i),n.uniformMatrix3fv(i.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),n.uniformMatrix3fv(i.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(i.uniforms.tint._location,s.hex2rgb(t.tint)),n.uniform1f(i.uniforms.alpha._location,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(i.attributes.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(i.attributes.aColor,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer))},n.prototype.popStencil=function(t,e){var i=this.renderer.gl,n=this.stencilMaskStack;if(n.stencilStack.pop(),n.count--,0===n.stencilStack.length)i.disable(i.STENCIL_TEST);else{var r=n.count;this.bindGraphics(t,e),i.colorMask(!1,!1,!1,!1),1===e.mode?(n.reverse=!n.reverse,n.reverse?(i.stencilFunc(i.EQUAL,255-(r+1),255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,r+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(e.indices.length-4)),i.stencilFunc(i.ALWAYS,0,255),i.stencilOp(i.KEEP,i.KEEP,i.INVERT),i.drawElements(i.TRIANGLE_FAN,e.indices.length-4,i.UNSIGNED_SHORT,0),this.renderer.drawCount+=2,n.reverse?i.stencilFunc(i.EQUAL,r,255):i.stencilFunc(i.EQUAL,255-r,255)):(n.reverse?(i.stencilFunc(i.EQUAL,r+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)):(i.stencilFunc(i.EQUAL,255-(r+1),255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)),i.drawElements(i.TRIANGLE_STRIP,e.indices.length,i.UNSIGNED_SHORT,0),this.renderer.drawCount++,n.reverse?i.stencilFunc(i.EQUAL,r,255):i.stencilFunc(i.EQUAL,255-r,255)),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}},n.prototype.destroy=function(){r.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},n.prototype.pushMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),t.dirty&&this.renderer.plugins.graphics.updateGraphics(t,this.renderer.gl),t._webGL[this.renderer.gl.id].data.length&&this.pushStencil(t,t._webGL[this.renderer.gl.id].data[0])},n.prototype.popMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.popStencil(t,t._webGL[this.renderer.gl.id].data[0])}},{"../../../utils":77,"./WebGLManager":58}],58:[function(t,e,i){function n(t){this.renderer=t,this.renderer.on("context",this.onContextChange,this)}n.prototype.constructor=n,e.exports=n,n.prototype.onContextChange=function(){},n.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},{}],59:[function(t,e,i){function n(t){r.call(this,t,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var r=t("./Shader");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n},{"./Shader":61}],60:[function(t,e,i){function n(t){r.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var r=t("./Shader");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n},{"./Shader":61}],61:[function(t,e,i){function n(t,e,i,n,s){if(!e||!i)throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");this.uid=r.uid(),this.gl=t.renderer.gl,this.shaderManager=t,this.program=null,this.uniforms=n||{},this.attributes=s||{},this.textureCount=1,this.vertexSrc=e,this.fragmentSrc=i,this.init()}var r=t("../../../utils");n.prototype.constructor=n,e.exports=n,n.prototype.init=function(){this.compile(),this.gl.useProgram(this.program),this.cacheUniformLocations(Object.keys(this.uniforms)),this.cacheAttributeLocations(Object.keys(this.attributes))},n.prototype.cacheUniformLocations=function(t){for(var e=0;e<t.length;++e)this.uniforms[t[e]]._location=this.gl.getUniformLocation(this.program,t[e])},n.prototype.cacheAttributeLocations=function(t){for(var e=0;e<t.length;++e)this.attributes[t[e]]=this.gl.getAttribLocation(this.program,t[e])},n.prototype.compile=function(){var t=this.gl,e=this._glCompile(t.VERTEX_SHADER,this.vertexSrc),i=this._glCompile(t.FRAGMENT_SHADER,this.fragmentSrc),n=t.createProgram();return t.attachShader(n,e),t.attachShader(n,i),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(n,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(n)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(n)),t.deleteProgram(n),n=null),t.deleteShader(e),t.deleteShader(i),this.program=n},n.prototype.syncUniform=function(t){var e,i,n=t._location,s=t.value,a=this.gl;switch(t.type){case"b":case"bool":case"boolean":a.uniform1i(n,s?1:0);break;case"i":case"1i":a.uniform1i(n,s);break;case"f":case"1f":a.uniform1f(n,s);break;case"2f":a.uniform2f(n,s[0],s[1]);break;case"3f":a.uniform3f(n,s[0],s[1],s[2]);break;case"4f":a.uniform4f(n,s[0],s[1],s[2],s[3]);break;case"v2":a.uniform2f(n,s.x,s.y);break;case"v3":a.uniform3f(n,s.x,s.y,s.z);break;case"v4":a.uniform4f(n,s.x,s.y,s.z,s.w);break;case"1iv":a.uniform1iv(n,s);break;case"2iv":a.uniform2iv(n,s);break;case"3iv":a.uniform3iv(n,s);break;case"4iv":a.uniform4iv(n,s);break;case"1fv":a.uniform1fv(n,s);break;case"2fv":a.uniform2fv(n,s);break;case"3fv":a.uniform3fv(n,s);break;case"4fv":a.uniform4fv(n,s);break;case"m2":case"mat2":case"Matrix2fv":a.uniformMatrix2fv(n,t.transpose,s);break;case"m3":case"mat3":case"Matrix3fv":a.uniformMatrix3fv(n,t.transpose,s);break;case"m4":case"mat4":case"Matrix4fv":a.uniformMatrix4fv(n,t.transpose,s);break;case"c":"number"==typeof s&&(s=r.hex2rgb(s)),a.uniform3f(n,s[0],s[1],s[2]);break;case"iv1":a.uniform1iv(n,s);break;case"iv":a.uniform3iv(n,s);break;case"fv1":a.uniform1fv(n,s);break;case"fv":a.uniform3fv(n,s);break;case"v2v":for(t._array||(t._array=new Float32Array(2*s.length)),e=0,i=s.length;i>e;++e)t._array[2*e]=s[e].x,t._array[2*e+1]=s[e].y;a.uniform2fv(n,t._array);break;case"v3v":for(t._array||(t._array=new Float32Array(3*s.length)),e=0,i=s.length;i>e;++e)t._array[3*e]=s[e].x,t._array[3*e+1]=s[e].y,t._array[3*e+2]=s[e].z;a.uniform3fv(n,t._array);break;case"v4v":for(t._array||(t._array=new Float32Array(4*s.length)),e=0,i=s.length;i>e;++e)t._array[4*e]=s[e].x,t._array[4*e+1]=s[e].y,t._array[4*e+2]=s[e].z,t._array[4*e+3]=s[e].w;a.uniform4fv(n,t._array);break;case"t":case"sampler2D":if(!t.value||!t.value.baseTexture.hasLoaded)break;a.activeTexture(a["TEXTURE"+this.textureCount]);var o=t.value.baseTexture._glTextures[a.id];o||(this.initSampler2D(t),o=t.value.baseTexture._glTextures[a.id]),a.bindTexture(a.TEXTURE_2D,o),a.uniform1i(t._location,this.textureCount),this.textureCount++;break;default:console.warn("Pixi.js Shader Warning: Unknown uniform type: "+t.type)}},n.prototype.syncUniforms=function(){for(var t in this.textureCount=1,this.uniforms)this.syncUniform(this.uniforms[t])},n.prototype.initSampler2D=function(t){var e=this.gl,i=t.value.baseTexture;if(i.hasLoaded)if(t.textureData){var n=t.textureData;i._glTextures[e.id]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,i._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,n.luminance?e.LUMINANCE:e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n.magFilter?n.magFilter:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n.wrapS?n.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,n.wrapS?n.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n.wrapT?n.wrapT:e.CLAMP_TO_EDGE)}else this.shaderManager.renderer.updateTexture(i)},n.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.gl=null,this.uniforms=null,this.attributes=null,this.vertexSrc=null,this.fragmentSrc=null},n.prototype._glCompile=function(t,e){var i=this.gl.createShader(t);return this.gl.shaderSource(i,e),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(console.log(this.gl.getShaderInfoLog(i)),null)}},{"../../../utils":77}],62:[function(t,e,i){function n(t,e,i,s,a){var o={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(s)for(var h in s)o[h]=s[h];var l={aVertexPosition:0,aTextureCoord:0,aColor:0};if(a)for(var u in a)l[u]=a[u];e=e||n.defaultVertexSrc,i=i||n.defaultFragmentSrc,r.call(this,t,e,i,o,l)}var r=t("./Shader");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),n.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n")},{"./Shader":61}],63:[function(t,e,i){function n(t){r.call(this,t)}var r=t("../managers/WebGLManager");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.start=function(){},n.prototype.stop=function(){this.flush()},n.prototype.flush=function(){},n.prototype.render=function(t){}},{"../managers/WebGLManager":58}],64:[function(t,e,i){function n(t){this.gl=t,this.vertices=new Float32Array([0,0,200,0,200,200,0,200]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.upload()}n.prototype.constructor=n,n.prototype.map=function(t,e){var i=0,n=0;this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this.upload()},n.prototype.upload=function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this.uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this.colors)},n.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},e.exports=n},{}],65:[function(t,e,i){var n=t("../../../math"),r=t("../../../utils"),s=t("../../../const"),a=t("./StencilMaskStack"),o=function(t,e,i,o,h,l){(this.gl=t,this.frameBuffer=null,this.texture=null,this.size=new n.Rectangle(0,0,1,1),this.resolution=h||s.RESOLUTION,this.projectionMatrix=new n.Matrix,this.transform=null,this.frame=null,this.stencilBuffer=null,this.stencilMaskStack=new a,this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}],this.scaleMode=o||s.SCALE_MODES.DEFAULT,this.root=l,this.root)||(this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,o===s.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,o===s.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST),r.isPowerOfTwo(e,i)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0));this.resize(e,i)};o.prototype.constructor=o,e.exports=o,o.prototype.clear=function(t){var e=this.gl;t&&e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},o.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var t=this.gl;this.stencilBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencilBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}},o.prototype.activate=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer);var e=this.frame||this.size;this.calculateProjection(e),this.transform&&this.projectionMatrix.append(this.transform),t.viewport(0,0,e.width*this.resolution,e.height*this.resolution)},o.prototype.calculateProjection=function(t){var e=this.projectionMatrix;e.identity(),this.root?(e.a=1/t.width*2,e.d=-1/t.height*2,e.tx=-1-t.x*e.a,e.ty=1-t.y*e.d):(e.a=1/t.width*2,e.d=1/t.height*2,e.tx=-1-t.x*e.a,e.ty=-1-t.y*e.d)},o.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){if(this.size.width=t,this.size.height=e,!this.root){var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t*this.resolution,e*this.resolution,0,i.RGBA,i.UNSIGNED_BYTE,null),this.stencilBuffer&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencilBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t*this.resolution,e*this.resolution))}var n=this.frame||this.size;this.calculateProjection(n)}},o.prototype.destroy=function(){var t=this.gl;t.deleteRenderbuffer(this.stencilBuffer),t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}},{"../../../const":23,"../../../math":33,"../../../utils":77,"./StencilMaskStack":66}],66:[function(t,e,i){function n(){this.stencilStack=[],this.reverse=!0,this.count=0}n.prototype.constructor=n,e.exports=n},{}],67:[function(t,e,i){function n(t){a.call(this),this.anchor=new r.Point,this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=l.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=t||s.EMPTY}var r=t("../math"),s=t("../textures/Texture"),a=t("../display/Container"),o=t("../renderers/canvas/utils/CanvasTinter"),h=t("../utils"),l=t("../const"),u=new r.Point;n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture.width},set:function(t){var e=h.sign(this.scale.x)||1;this.scale.x=e*t/this.texture.width,this._width=t}},height:{get:function(){return Math.abs(this.scale.y)*this.texture.height},set:function(t){var e=h.sign(this.scale.y)||1;this.scale.y=e*t/this.texture.height,this._height=t}},texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),n.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=h.sign(this.scale.x)*this._width/this.texture.width),this._height&&(this.scale.y=h.sign(this.scale.y)*this._height/this.texture.height)},n.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this)},n.prototype.getBounds=function(t){if(!this._currentBounds){var e,i,n,r,s=this._texture.width,a=this._texture.height,o=s*(1-this.anchor.x),h=s*-this.anchor.x,l=a*(1-this.anchor.y),u=a*-this.anchor.y,c=t||this.worldTransform,d=c.a,p=c.b,f=c.c,g=c.d,_=c.tx,v=c.ty,m=d*h+f*u+_,y=g*u+p*h+v,b=d*o+f*u+_,x=g*u+p*o+v,T=d*o+f*l+_,E=g*l+p*o+v,w=d*h+f*l+_,S=g*l+p*h+v;if(e=(e=(e=(e=m)>b?b:e)>T?T:e)>w?w:e,n=(n=(n=(n=y)>x?x:n)>E?E:n)>S?S:n,i=w>(i=T>(i=b>(i=m)?b:i)?T:i)?w:i,r=S>(r=E>(r=x>(r=y)?x:r)?E:r)?S:r,this.children.length){var A=this.containerGetBounds();o=A.x,h=A.x+A.width,e=o>e?e:o,n=(l=A.y)>n?n:l,i=i>h?i:h,r=r>(u=A.y+A.height)?r:u}var P=this._bounds;P.x=e,P.width=i-e,P.y=n,P.height=r-n,this._currentBounds=P}return this._currentBounds},n.prototype.getLocalBounds=function(){return this._bounds.x=-this._texture._frame.width*this.anchor.x,this._bounds.y=-this._texture._frame.height*this.anchor.y,this._bounds.width=this._texture._frame.width,this._bounds.height=this._texture._frame.height,this._bounds},n.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,u);var e,i=this._texture.width,n=this._texture.height,r=-i*this.anchor.x;return u.x>r&&u.x<r+i&&(e=-n*this.anchor.y,u.y>e&&u.y<e+n)},n.prototype._renderCanvas=function(t){if(!(this.texture.crop.width<=0||this.texture.crop.height<=0)){var e=t.blendModes[this.blendMode];if(e!==t.context.globalCompositeOperation&&(t.context.globalCompositeOperation=e),this.texture.valid){var i,n,r,s,a=this._texture,h=this.worldTransform;t.context.globalAlpha=this.worldAlpha;var u=a.baseTexture.scaleMode===l.SCALE_MODES.LINEAR;if(t.smoothProperty&&t.context[t.smoothProperty]!==u&&(t.context[t.smoothProperty]=u),a.rotate){r=a.crop.height,s=a.crop.width,i=a.trim?a.trim.y-this.anchor.y*a.trim.height:this.anchor.y*-a._frame.height,n=a.trim?a.trim.x-this.anchor.x*a.trim.width:this.anchor.x*-a._frame.width,i+=r,h.tx=n*h.a+i*h.c+h.tx,h.ty=n*h.b+i*h.d+h.ty;var c=h.a;h.a=-h.c,h.c=c,c=h.b,h.b=-h.d,h.d=c,i=0,n=0}else r=a.crop.width,s=a.crop.height,i=a.trim?a.trim.x-this.anchor.x*a.trim.width:this.anchor.x*-a._frame.width,n=a.trim?a.trim.y-this.anchor.y*a.trim.height:this.anchor.y*-a._frame.height;var d=a.baseTexture.resolution;t.roundPixels?(t.context.setTransform(h.a/d,h.b/d,h.c/d,h.d/d,h.tx*t.resolution|0,h.ty*t.resolution|0),i|=0,n|=0):t.context.setTransform(h.a/d,h.b/d,h.c/d,h.d/d,h.tx*t.resolution,h.ty*t.resolution),16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=o.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,r,s,i*t.resolution,n*t.resolution,r*t.resolution,s*t.resolution)):t.context.drawImage(a.baseTexture.source,a.crop.x,a.crop.y,r,s,i*t.resolution,n*t.resolution,r*t.resolution,s*t.resolution)}}},n.prototype.destroy=function(t,e){a.prototype.destroy.call(this),this.anchor=null,t&&this._texture.destroy(e),this._texture=null,this.shader=null},n.fromFrame=function(t){var e=h.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new n(e)},n.fromImage=function(t,e,i){return new n(s.fromImage(t,e,i))}},{"../const":23,"../display/Container":24,"../math":33,"../renderers/canvas/utils/CanvasTinter":48,"../textures/Texture":72,"../utils":77}],68:[function(t,e,i){function n(t){r.call(this,t),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=a.SPRITE_BATCH_SIZE;var e=4*this.size*this.vertByteSize,i=6*this.size;this.vertices=new ArrayBuffer(e),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(i);for(var n=0,s=0;i>n;n+=6,s+=4)this.indices[n+0]=s+0,this.indices[n+1]=s+1,this.indices[n+2]=s+2,this.indices[n+3]=s+0,this.indices[n+4]=s+2,this.indices[n+5]=s+3;this.currentBatchSize=0,this.sprites=[],this.shader=null}var r=t("../../renderers/webgl/utils/ObjectRenderer"),s=t("../../renderers/webgl/WebGLRenderer"),a=t("../../const");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,s.registerPlugin("sprite",n),n.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999},n.prototype.render=function(t){var e=t._texture;this.currentBatchSize>=this.size&&this.flush();var i=e._uvs;if(i){var n,r,s,a,o=t.anchor.x,h=t.anchor.y;if(e.trim&&void 0===t.tileScale){var l=e.trim;n=(r=l.x-o*l.width)+e.crop.width,s=(a=l.y-h*l.height)+e.crop.height}else n=e._frame.width*(1-o),r=e._frame.width*-o,s=e._frame.height*(1-h),a=e._frame.height*-h;var u=this.currentBatchSize*this.vertByteSize,c=t.worldTransform,d=e.baseTexture.resolution,p=c.a/d,f=c.b/d,g=c.c/d,_=c.d/d,v=c.tx,m=c.ty,y=this.colors,b=this.positions;if(this.renderer.roundPixels){d=this.renderer.resolution;b[u]=((p*r+g*a+v)*d|0)/d,b[u+1]=((_*a+f*r+m)*d|0)/d,b[u+5]=((p*n+g*a+v)*d|0)/d,b[u+6]=((_*a+f*n+m)*d|0)/d,b[u+10]=((p*n+g*s+v)*d|0)/d,b[u+11]=((_*s+f*n+m)*d|0)/d,b[u+15]=((p*r+g*s+v)*d|0)/d,b[u+16]=((_*s+f*r+m)*d|0)/d}else b[u]=p*r+g*a+v,b[u+1]=_*a+f*r+m,b[u+5]=p*n+g*a+v,b[u+6]=_*a+f*n+m,b[u+10]=p*n+g*s+v,b[u+11]=_*s+f*n+m,b[u+15]=p*r+g*s+v,b[u+16]=_*s+f*r+m;b[u+2]=i.x0,b[u+3]=i.y0,b[u+7]=i.x1,b[u+8]=i.y1,b[u+12]=i.x2,b[u+13]=i.y2,b[u+17]=i.x3,b[u+18]=i.y3;var x=t.tint;y[u+4]=y[u+9]=y[u+14]=y[u+19]=(x>>16)+(65280&x)+((255&x)<<16)+(255*t.worldAlpha<<24),this.sprites[this.currentBatchSize++]=t}},n.prototype.flush=function(){if(0!==this.currentBatchSize){var t,e=this.renderer.gl;if(this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var i=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);e.bufferSubData(e.ARRAY_BUFFER,0,i)}for(var n,r,s,a,o=0,h=0,l=null,u=this.renderer.blendModeManager.currentBlendMode,c=null,d=!1,p=!1,f=0,g=this.currentBatchSize;g>f;f++)n=(a=this.sprites[f])._texture.baseTexture,d=u!==(r=a.blendMode),p=c!==(s=a.shader||this.shader),(l!==n||d||p)&&(this.renderBatch(l,o,h),h=f,o=0,l=n,d&&(u=r,this.renderer.blendModeManager.setBlendMode(u)),p&&((t=(c=s).shaders?c.shaders[e.id]:c)||(t=c.getShader(this.renderer)),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),e.activeTexture(e.TEXTURE0))),o++;this.renderBatch(l,o,h),this.currentBatchSize=0}},n.prototype.renderBatch=function(t,e,i){if(0!==e){var n=this.renderer.gl;t._glTextures[n.id]?n.bindTexture(n.TEXTURE_2D,t._glTextures[n.id]):this.renderer.updateTexture(t),n.drawElements(n.TRIANGLES,6*e,n.UNSIGNED_SHORT,6*i*2),this.renderer.drawCount++}},n.prototype.start=function(){var t=this.renderer.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.vertByteSize;t.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,t.FLOAT,!1,e,0),t.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,t.FLOAT,!1,e,8),t.vertexAttribPointer(this.shader.attributes.aColor,4,t.UNSIGNED_BYTE,!0,e,16)},n.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),r.prototype.destroy.call(this),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.sprites=null,this.shader=null}},{"../../const":23,"../../renderers/webgl/WebGLRenderer":49,"../../renderers/webgl/utils/ObjectRenderer":63}],69:[function(t,e,i){function n(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||h.RESOLUTION,this._text=null,this._style=null;var n=s.fromCanvas(this.canvas);n.trim=new a.Rectangle,r.call(this,n),this.text=t,this.style=e}var r=t("../sprites/Sprite"),s=t("../textures/Texture"),a=t("../math"),o=t("../utils"),h=t("../const");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.fontPropertiesCache={},n.fontPropertiesCanvas=document.createElement("canvas"),n.fontPropertiesContext=n.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(n.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture.width},set:function(t){this.scale.x=t/this._texture.width,this._width=t}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture.height},set:function(t){this.scale.y=t/this._texture.height,this._height=t}},style:{get:function(){return this._style},set:function(t){"number"==typeof(t=t||{}).fill&&(t.fill=o.hex2string(t.fill)),"number"==typeof t.stroke&&(t.stroke=o.hex2string(t.stroke)),"number"==typeof t.dropShadowColor&&(t.dropShadowColor=o.hex2string(t.dropShadowColor)),t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowColor=t.dropShadowColor||"#000000",t.dropShadowAngle=void 0!==t.dropShadowAngle?t.dropShadowAngle:Math.PI/6,t.dropShadowDistance=void 0!==t.dropShadowDistance?t.dropShadowDistance:5,t.dropShadowBlur=void 0!==t.dropShadowBlur?t.dropShadowBlur:0,t.padding=t.padding||0,t.textBaseline=t.textBaseline||"alphabetic",t.lineJoin=t.lineJoin||"miter",t.miterLimit=t.miterLimit||10,this._style=t,this.dirty=!0}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),n.prototype.updateText=function(){var t=this._style;this.context.font=t.font;for(var e=(t.wordWrap?this.wordWrap(this._text):this._text).split(/(?:\r\n|\r|\n)/),i=new Array(e.length),n=0,r=this.determineFontProperties(t.font),s=0;s<e.length;s++){var a=this.context.measureText(e[s]).width;i[s]=a,n=Math.max(n,a)}var o=n+t.strokeThickness;t.dropShadow&&(o+=t.dropShadowDistance),this.canvas.width=(o+this.context.lineWidth)*this.resolution;var h,l,u=this.style.lineHeight||r.fontSize+t.strokeThickness,c=u*e.length;if(t.dropShadow&&(c+=t.dropShadowDistance),this.canvas.height=(c+2*this._style.padding)*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=t.font,this.context.strokeStyle=t.stroke,this.context.lineWidth=t.strokeThickness,this.context.textBaseline=t.textBaseline,this.context.lineJoin=t.lineJoin,this.context.miterLimit=t.miterLimit,t.dropShadow){t.dropShadowBlur>0?(this.context.shadowColor=t.dropShadowColor,this.context.shadowBlur=t.dropShadowBlur):this.context.fillStyle=t.dropShadowColor;var d=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,p=Math.sin(t.dropShadowAngle)*t.dropShadowDistance;for(s=0;s<e.length;s++)h=t.strokeThickness/2,l=t.strokeThickness/2+s*u+r.ascent,"right"===t.align?h+=n-i[s]:"center"===t.align&&(h+=(n-i[s])/2),t.fill&&this.context.fillText(e[s],h+d,l+p+this._style.padding)}for(this.context.fillStyle=t.fill,s=0;s<e.length;s++)h=t.strokeThickness/2,l=t.strokeThickness/2+s*u+r.ascent,"right"===t.align?h+=n-i[s]:"center"===t.align&&(h+=(n-i[s])/2),t.stroke&&t.strokeThickness&&this.context.strokeText(e[s],h,l+this._style.padding),t.fill&&this.context.fillText(e[s],h,l+this._style.padding);this.updateTexture()},n.prototype.updateTexture=function(){var t=this._texture;t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.realWidth=this.canvas.width,t.baseTexture.realHeight=this.canvas.height,t.width=t.baseTexture.width=this.canvas.width/this.resolution,t.height=t.baseTexture.height=this.canvas.height/this.resolution,t.crop.width=t._frame.width=this.canvas.width/this.resolution,t.crop.height=t._frame.height=this.canvas.height/this.resolution,t.trim.x=0,t.trim.y=-this._style.padding,t.trim.width=t._frame.width,t.trim.height=t._frame.height-2*this._style.padding,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,t.baseTexture.emit("update",t.baseTexture),this.dirty=!1},n.prototype.renderWebGL=function(t){this.dirty&&this.updateText(),r.prototype.renderWebGL.call(this,t)},n.prototype._renderCanvas=function(t){this.dirty&&this.updateText(),r.prototype._renderCanvas.call(this,t)},n.prototype.determineFontProperties=function(t){var e=n.fontPropertiesCache[t];if(!e){e={};var i=n.fontPropertiesCanvas,r=n.fontPropertiesContext;r.font=t;var s=Math.ceil(r.measureText("|MÉq").width),a=Math.ceil(r.measureText("M").width),o=2*a;a=1.4*a|0,i.width=s,i.height=o,r.fillStyle="#f00",r.fillRect(0,0,s,o),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText("|MÉq",0,a);var h,l,u=r.getImageData(0,0,s,o).data,c=u.length,d=4*s,p=0,f=!1;for(h=0;a>h;h++){for(l=0;d>l;l+=4)if(255!==u[p+l]){f=!0;break}if(f)break;p+=d}for(e.ascent=a-h,p=c-d,f=!1,h=o;h>a;h--){for(l=0;d>l;l+=4)if(255!==u[p+l]){f=!0;break}if(f)break;p-=d}e.descent=h-a,e.fontSize=e.ascent+e.descent,n.fontPropertiesCache[t]=e}return e},n.prototype.wordWrap=function(t){for(var e="",i=t.split("\n"),n=this._style.wordWrapWidth,r=0;r<i.length;r++){for(var s=n,a=i[r].split(" "),o=0;o<a.length;o++){var h=this.context.measureText(a[o]).width,l=h+this.context.measureText(" ").width;0===o||l>s?(o>0&&(e+="\n"),e+=a[o],s=n-h):(s-=l,e+=" "+a[o])}r<i.length-1&&(e+="\n")}return e},n.prototype.getBounds=function(t){return this.dirty&&this.updateText(),r.prototype.getBounds.call(this,t)},n.prototype.destroy=function(t){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(void 0===t||t)}},{"../const":23,"../math":33,"../sprites/Sprite":67,"../textures/Texture":72,"../utils":77}],70:[function(t,e,i){function n(t,e,i){a.call(this),this.uid=r.uid(),this.resolution=i||1,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=e||s.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=!1,this._glTextures={},t&&this.loadSource(t)}var r=t("../utils"),s=t("../const"),a=t("eventemitter3");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=r.isPowerOfTwo(this.realWidth,this.realHeight),this.emit("update",this)},n.prototype.loadSource=function(t){var e=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=t,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!t.getContext){this.isLoading=!0;var i=this;t.onload=function(){t.onload=null,t.onerror=null,i.isLoading&&(i.isLoading=!1,i._sourceLoaded(),i.emit("loaded",i))},t.onerror=function(){t.onload=null,t.onerror=null,i.isLoading&&(i.isLoading=!1,i.emit("error",i))},t.complete&&t.src&&(this.isLoading=!1,t.onload=null,t.onerror=null,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this))}},n.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},n.prototype.destroy=function(){var t;this.imageUrl?(t=this.imageUrl,r.useFilenamesForTextures&&(t=r.getFilenameFromUrl(this.imageUrl)),delete r.BaseTextureCache[t],delete r.TextureCache[t],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete r.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose();var e=r.TextureCache;for(t in e){var i=e[t];i?i.baseTexture===this&&(i.destroy(),delete e[t]):delete e[t]}this.removeAllListeners()},n.prototype.dispose=function(){this.emit("dispose",this)},n.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},n.fromImage=function(t,e,i){var s=t;r.useFilenamesForTextures&&(s=r.getFilenameFromUrl(t));var a=r.BaseTextureCache[s];if(void 0===e&&0!==t.indexOf("data:")&&(e=!0),!a){var o=new Image;e&&(o.crossOrigin=""),(a=new n(o,i)).imageUrl=t,o.src=t,r.BaseTextureCache[s]=a,a.resolution=r.getResolutionOfUrl(t)}return a},n.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+r.uid());var i=r.BaseTextureCache[t._pixiId];return i||(i=new n(t,e),r.BaseTextureCache[t._pixiId]=i),i}},{"../const":23,"../utils":77,eventemitter3:10}],71:[function(t,e,i){function n(t,e,i,n,c){if(!t)throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");e=e||100,i=i||100,c=c||u.RESOLUTION;var d=new r;if(d.width=e,d.height=i,d.realWidth=e*c,d.realHeight=i*c,d.resolution=c,d.scaleMode=n||u.SCALE_MODES.DEFAULT,d.hasLoaded=!0,s.call(this,d,new l.Rectangle(0,0,d.realWidth,d.realHeight)),this.width=e,this.height=i,this.resolution=c,this.render=null,this.renderer=t,this.renderer.type===u.RENDERER_TYPE.WEBGL){var p=this.renderer.gl;this.textureBuffer=new a(p,this.width,this.height,d.scaleMode,this.resolution),this.baseTexture._glTextures[p.id]=this.textureBuffer.texture,this.filterManager=new o(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(e,i),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),this.renderer.currentRenderTarget.activate()}else this.render=this.renderCanvas,this.textureBuffer=new h(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()}var r=t("./BaseTexture"),s=t("./Texture"),a=t("../renderers/webgl/utils/RenderTarget"),o=t("../renderers/webgl/managers/FilterManager"),h=t("../renderers/canvas/utils/CanvasBuffer"),l=t("../math"),u=t("../const"),c=new l.Matrix;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.resize=function(t,e,i){(t!==this.width||e!==this.height)&&(this.valid=t>0&&e>0,this.width=t,this.height=e,this._frame.width=this.crop.width=t*this.resolution,this._frame.height=this.crop.height=e*this.resolution,i&&(this.baseTexture.realWidth=t*this.resolution,this.baseTexture.realHeight=e*this.resolution,this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.valid&&(this.renderer.type===u.RENDERER_TYPE.WEBGL?this.textureBuffer.resize(this.width,this.height):this.textureBuffer.resize(this.baseTexture.realWidth,this.baseTexture.realHeight),this.filterManager&&this.filterManager.resize(this.width,this.height)))},n.prototype.clear=function(){this.valid&&(this.renderer.type===u.RENDERER_TYPE.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},n.prototype.renderWebGL=function(t,e,i,n){if(this.valid){if(n=void 0===n||n,this.textureBuffer.transform=e,this.textureBuffer.activate(),t.worldAlpha=1,n){t.worldTransform.identity(),t.currentBounds=null;var r,s,a=t.children;for(r=0,s=a.length;s>r;++r)a[r].updateTransform()}var o=this.renderer.filterManager;this.renderer.filterManager=this.filterManager,this.renderer.renderDisplayObject(t,this.textureBuffer,i),this.renderer.filterManager=o}},n.prototype.renderCanvas=function(t,e,i,n){if(this.valid){n=!!n;var r=c;r.identity(),e&&r.append(e);var s=t.worldTransform;t.worldTransform=r,t.worldAlpha=1;var a,o,h=t.children;for(a=0,o=h.length;o>a;++a)h[a].updateTransform();i&&this.textureBuffer.clear();var l=this.textureBuffer.context,u=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,l),this.renderer.resolution=u,t.worldTransform===r&&(t.worldTransform=s)}},n.prototype.destroy=function(){s.prototype.destroy.call(this,!0),this.textureBuffer.destroy(),this.filterManager&&this.filterManager.destroy(),this.renderer=null},n.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},n.prototype.getBase64=function(){return this.getCanvas().toDataURL()},n.prototype.getCanvas=function(){if(this.renderer.type===u.RENDERER_TYPE.WEBGL){var t=this.renderer.gl,e=this.textureBuffer.size.width,i=this.textureBuffer.size.height,n=new Uint8Array(4*e*i);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,e,i,t.RGBA,t.UNSIGNED_BYTE,n),t.bindFramebuffer(t.FRAMEBUFFER,null);var r=new h(e,i),s=r.context.getImageData(0,0,e,i);return s.data.set(n),r.context.putImageData(s,0,0),r.canvas}return this.textureBuffer.canvas},n.prototype.getPixels=function(){var t,e;if(this.renderer.type===u.RENDERER_TYPE.WEBGL){var i=this.renderer.gl;t=this.textureBuffer.size.width,e=this.textureBuffer.size.height;var n=new Uint8Array(4*t*e);return i.bindFramebuffer(i.FRAMEBUFFER,this.textureBuffer.frameBuffer),i.readPixels(0,0,t,e,i.RGBA,i.UNSIGNED_BYTE,n),i.bindFramebuffer(i.FRAMEBUFFER,null),n}return t=this.textureBuffer.canvas.width,e=this.textureBuffer.canvas.height,this.textureBuffer.canvas.getContext("2d").getImageData(0,0,t,e).data},n.prototype.getPixel=function(t,e){if(this.renderer.type===u.RENDERER_TYPE.WEBGL){var i=this.renderer.gl,n=new Uint8Array(4);return i.bindFramebuffer(i.FRAMEBUFFER,this.textureBuffer.frameBuffer),i.readPixels(t,e,1,1,i.RGBA,i.UNSIGNED_BYTE,n),i.bindFramebuffer(i.FRAMEBUFFER,null),n}return this.textureBuffer.canvas.getContext("2d").getImageData(t,e,1,1).data}},{"../const":23,"../math":33,"../renderers/canvas/utils/CanvasBuffer":45,"../renderers/webgl/managers/FilterManager":54,"../renderers/webgl/utils/RenderTarget":65,"./BaseTexture":70,"./Texture":72}],72:[function(t,e,i){function n(t,e,i,r,s){o.call(this),this.noFrame=!1,e||(this.noFrame=!0,e=new h.Rectangle(0,0,1,1)),t instanceof n&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=r,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=i||e,this.rotate=!!s,t.hasLoaded?(this.noFrame&&(e=new h.Rectangle(0,0,t.realWidth,t.realHeight)),this.frame=e):t.once("loaded",this.onBaseTextureLoaded,this),t.on("update",this.onBaseTextureUpdated,this)}var r=t("./BaseTexture"),s=t("./VideoBaseTexture"),a=t("./TextureUvs"),o=t("eventemitter3"),h=t("../math"),l=t("../utils");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{frame:{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=this.baseTexture.resolution;if(this.width=t.width/e,this.height=t.height/e,!this.trim&&!this.rotate&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded,this.trim?(this.width=this.trim.width/e,this.height=this.trim.height/e,this._frame.width=this.trim.width,this._frame.height=this.trim.height):this.crop=t,this.valid&&this._updateUvs()}}}),n.prototype.update=function(){this.baseTexture.update()},n.prototype.onBaseTextureLoaded=function(t){this.noFrame?this.frame=new h.Rectangle(0,0,t.realWidth,t.realHeight):this.frame=this._frame,this.emit("update",this)},n.prototype.onBaseTextureUpdated=function(t){this.noFrame?(this._frame.width=t.realWidth,this._frame.height=t.realHeight):this.frame=this._frame,this.emit("update",this)},n.prototype.destroy=function(t){this.baseTexture&&(t&&this.baseTexture.destroy(),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.crop=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},n.prototype.clone=function(){return new n(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)},n.prototype._updateUvs=function(){this._uvs||(this._uvs=new a),this._uvs.set(this.crop,this.baseTexture,this.rotate)},n.fromImage=function(t,e,i){var s=t;l.useFilenamesForTextures&&(s=l.getFilenameFromUrl(t));var a=l.TextureCache[s];return a||(a=new n(r.fromImage(t,e,i)),l.TextureCache[s]=a),a},n.fromFrame=function(t,e){var i=t;l.useFilenamesForTextures&&(i=l.getFilenameFromUrl(t));var n=l.TextureCache[i];if(!n&&!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return n},n.fromCanvas=function(t,e){return new n(r.fromCanvas(t,e))},n.fromVideo=function(t,e){return"string"==typeof t?n.fromVideoUrl(t,e):new n(s.fromVideo(t,e))},n.fromVideoUrl=function(t,e){return new n(s.fromUrl(t,e))},n.addTextureToCache=function(t,e){l.TextureCache[e]=t},n.removeTextureFromCache=function(t){var e=l.TextureCache[t];return delete l.TextureCache[t],delete l.BaseTextureCache[t],e},n.EMPTY=new n(new r)},{"../math":33,"../utils":77,"./BaseTexture":70,"./TextureUvs":73,"./VideoBaseTexture":74,eventemitter3:10}],73:[function(t,e,i){function n(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1}e.exports=n,n.prototype.set=function(t,e,i){var n=e.realWidth,r=e.realHeight;i?(this.x0=(t.x+t.height)/n,this.y0=t.y/r,this.x1=(t.x+t.height)/n,this.y1=(t.y+t.width)/r,this.x2=t.x/n,this.y2=(t.y+t.width)/r,this.x3=t.x/n,this.y3=t.y/r):(this.x0=t.x/n,this.y0=t.y/r,this.x1=(t.x+t.width)/n,this.y1=t.y/r,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/r,this.x3=t.x/n,this.y3=(t.y+t.height)/r)}},{}],74:[function(t,e,i){function n(t,e){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),s.call(this,t,e),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),t.complete||(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function r(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=t,i.type=e,i}var s=t("./BaseTexture"),a=t("../utils");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,n.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},n.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},n.prototype._onPlayStop=function(){this.autoUpdate=!1},n.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},n.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete a.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),s.prototype.destroy.call(this)},n.fromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+a.uid());var i=a.BaseTextureCache[t._pixiId];return i||(i=new n(t,e),a.BaseTextureCache[t._pixiId]=i),i},n.fromUrl=function(t,e){var i=document.createElement("video");if(Array.isArray(t))for(var s=0;s<t.length;++s)i.appendChild(r(t[s].src||t[s],t[s].mime));else i.appendChild(r(t.src||t,t.mime));return i.load(),i.play(),n.fromVideo(i,e)},n.fromUrls=n.fromUrl},{"../utils":77,"./BaseTexture":70}],75:[function(t,e,i){function n(){var t=this;this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._emitter.listeners(a,!0)&&(t._requestId=requestAnimationFrame(t._tick)))},this._emitter=new s,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/r.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var r=t("../const"),s=t("eventemitter3"),a="tick";Object.defineProperties(n.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,r.TARGET_FPMS);this._maxElapsedMS=1/e}}}),n.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(a,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},n.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},n.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},n.prototype.add=function(t,e){return this._emitter.on(a,t,e),this._startIfPossible(),this},n.prototype.addOnce=function(t,e){return this._emitter.once(a,t,e),this._startIfPossible(),this},n.prototype.remove=function(t,e){return this._emitter.off(a,t,e),this._emitter.listeners(a,!0)||this._cancelIfNeeded(),this},n.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},n.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},n.prototype.update=function(t){var e;t=t||performance.now(),(e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*r.TARGET_FPMS*this.speed,this._emitter.emit(a,this.deltaTime),this.lastTime=t},e.exports=n},{"../const":23,eventemitter3:10}],76:[function(t,e,i){var n=t("./Ticker"),r=new n;r.autoStart=!0,e.exports={shared:r,Ticker:n}},{"./Ticker":75}],77:[function(t,e,i){var n=t("../const"),r=e.exports={_uid:0,_saidHello:!1,EventEmitter:t("eventemitter3"),pluginTarget:t("./pluginTarget"),async:t("async"),uid:function(){return++r._uid},hex2rgb:function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},hex2string:function(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)},rgb2hex:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},canUseNewCanvasBlendModes:function(){if("undefined"==typeof document)return!1;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",e="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",i=new Image;i.src=t+"AP804Oa6"+e;var n=new Image;n.src=t+"/wCKxvRF"+e;var r=document.createElement("canvas");r.width=6,r.height=1;var s=r.getContext("2d");s.globalCompositeOperation="multiply",s.drawImage(i,0,0),s.drawImage(n,2,0);var a=s.getImageData(2,0,1,1).data;return 255===a[0]&&0===a[1]&&0===a[2]},getNextPowerOfTwo:function(t){if(t>0&&0==(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},isPowerOfTwo:function(t,e){return t>0&&0==(t&t-1)&&e>0&&0==(e&e-1)},getResolutionOfUrl:function(t){var e=n.RETINA_PREFIX.exec(t);return e?parseFloat(e[1]):1},sayHello:function(t){if(!r._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c Pixi.js "+n.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("Pixi.js "+n.VERSION+" - "+t+" - http://www.pixijs.com/");r._saidHello=!0}},isWebGLSupported:function(){var t={stencil:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);return!(!i||!i.getContextAttributes().stencil)}catch(t){return!1}},sign:function(t){return t?0>t?-1:1:0},removeItems:function(t,e,i){var n=t.length;if(!(e>=n||0===i)){for(var r=e,s=n-(i=e+i>n?n-e:i);s>r;++r)t[r]=t[r+i];t.length=s}},TextureCache:{},BaseTextureCache:{},useFilenamesForTextures:!1,getFilenameFromUrl:function(t){if(0===t.indexOf("data:"))return t;var e=t.substring(t.lastIndexOf("/")+1),i=e.lastIndexOf(".");return-1!==i&&(e=e.substring(0,i)),e}}},{"../const":23,"./pluginTarget":78,async:1,eventemitter3:10}],78:[function(t,e,i){e.exports={mixin:function(t){!function(t){t.__plugins={},t.registerPlugin=function(e,i){t.__plugins[e]=i},t.prototype.initPlugins=function(){for(var e in this.plugins=this.plugins||{},t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}(t)}}},{}],79:[function(t,e,i){var n=t("./core"),r=t("./mesh"),s=t("./extras"),a=t("./filters");n.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},n.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(n,{Stage:{get:function(){return console.warn("You do not need to use a PIXI Stage any more, you can simply render any container."),n.Container}},DisplayObjectContainer:{get:function(){return console.warn("DisplayObjectContainer has been shortened to Container, please use Container from now on."),n.Container}},Strip:{get:function(){return console.warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),r.Mesh}},Rope:{get:function(){return console.warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),r.Rope}},MovieClip:{get:function(){return console.warn("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on."),s.MovieClip}},TilingSprite:{get:function(){return console.warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),s.TilingSprite}},BitmapText:{get:function(){return console.warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),s.BitmapText}},blendModes:{get:function(){return console.warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),n.BLEND_MODES}},scaleModes:{get:function(){return console.warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),n.SCALE_MODES}},BaseTextureCache:{get:function(){return console.warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),n.utils.BaseTextureCache}},TextureCache:{get:function(){return console.warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),n.utils.TextureCache}},math:{get:function(){return console.warn("The math namespace is deprecated, please access members already accessible on PIXI."),n}}}),n.Sprite.prototype.setTexture=function(t){this.texture=t,console.warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},s.BitmapText.prototype.setText=function(t){this.text=t,console.warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},n.Text.prototype.setText=function(t){this.text=t,console.warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},n.Text.prototype.setStyle=function(t){this.style=t,console.warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},n.Texture.prototype.setFrame=function(t){this.frame=t,console.warn("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")},Object.defineProperties(a,{AbstractFilter:{get:function(){return console.warn("filters.AbstractFilter is an undocumented alias, please use AbstractFilter from now on."),n.AbstractFilter}},FXAAFilter:{get:function(){return console.warn("filters.FXAAFilter is an undocumented alias, please use FXAAFilter from now on."),n.FXAAFilter}},SpriteMaskFilter:{get:function(){return console.warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),n.SpriteMaskFilter}}}),n.utils.uuid=function(){return console.warn("utils.uuid() is deprecated, please use utils.uid() from now on."),n.utils.uid()}},{"./core":30,"./extras":86,"./filters":103,"./mesh":128}],80:[function(t,e,i){function n(t,e){r.Container.call(this),e=e||{},this.textWidth=0,this.textHeight=0,this._glyphs=[],this._font={tint:void 0!==e.tint?e.tint:16777215,align:e.align||"left",name:null,size:0},this.font=e.font,this._text=t,this.maxWidth=0,this.maxLineHeight=0,this.dirty=!1,this.updateText()}var r=t("../core");n.prototype=Object.create(r.Container.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{tint:{get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},align:{get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},font:{get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):n.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),n.prototype.updateText=function(){for(var t=n.fonts[this._font.name],e=new r.Point,i=null,s=[],a=0,o=0,h=[],l=0,u=this._font.size/t.size,c=-1,d=0,p=0;p<this.text.length;p++){var f=this.text.charCodeAt(p);if(c=/(\s)/.test(this.text.charAt(p))?p:c,/(?:\r\n|\r|\n)/.test(this.text.charAt(p)))h.push(a),o=Math.max(o,a),l++,e.x=0,e.y+=t.lineHeight,i=null;else if(-1!==c&&this.maxWidth>0&&e.x*u>this.maxWidth)r.utils.removeItems(s,c,p-c),p=c,c=-1,h.push(a),o=Math.max(o,a),l++,e.x=0,e.y+=t.lineHeight,i=null;else{var g=t.chars[f];g&&(i&&g.kerning[i]&&(e.x+=g.kerning[i]),s.push({texture:g.texture,line:l,charCode:f,position:new r.Point(e.x+g.xOffset,e.y+g.yOffset)}),a=e.x+(g.texture.width+g.xOffset),e.x+=g.xAdvance,d=Math.max(d,g.yOffset+g.texture.height),i=f)}}h.push(a),o=Math.max(o,a);var _=[];for(p=0;l>=p;p++){var v=0;"right"===this._font.align?v=o-h[p]:"center"===this._font.align&&(v=(o-h[p])/2),_.push(v)}var m=s.length,y=this.tint;for(p=0;m>p;p++){var b=this._glyphs[p];b?b.texture=s[p].texture:(b=new r.Sprite(s[p].texture),this._glyphs.push(b)),b.position.x=(s[p].position.x+_[s[p].line])*u,b.position.y=s[p].position.y*u,b.scale.x=b.scale.y=u,b.tint=y,b.parent||this.addChild(b)}for(p=m;p<this._glyphs.length;++p)this.removeChild(this._glyphs[p]);this.textWidth=o*u,this.textHeight=(e.y+t.lineHeight)*u,this.maxLineHeight=d*u},n.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},n.prototype.getLocalBounds=function(){return this.validate(),r.Container.prototype.getLocalBounds.call(this)},n.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},n.fonts={}},{"../core":30}],81:[function(t,e,i){function n(t){r.Sprite.call(this,t[0]instanceof r.Texture?t[0]:t[0].texture),this._textures=null,this._durations=null,this.textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this._currentTime=0,this.playing=!1}var r=t("../core");n.prototype=Object.create(r.Sprite.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(t){if(t[0]instanceof r.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}}},currentFrame:{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return 0>t&&(t+=this._textures.length),t}}}),n.prototype.stop=function(){this.playing&&(this.playing=!1,r.ticker.shared.remove(this.update,this))},n.prototype.play=function(){this.playing||(this.playing=!0,r.ticker.shared.add(this.update,this))},n.prototype.gotoAndStop=function(t){this.stop(),this._currentTime=t,this._texture=this._textures[this.currentFrame]},n.prototype.gotoAndPlay=function(t){this._currentTime=t,this.play()},n.prototype.update=function(t){var e=this.animationSpeed*t;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=e/60*1e3;0>i;)this._currentTime--,i+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):this._texture=this._textures[this.currentFrame]},n.prototype.destroy=function(){this.stop(),r.Sprite.prototype.destroy.call(this)},n.fromFrames=function(t){for(var e=[],i=0;i<t.length;++i)e.push(new r.Texture.fromFrame(t[i]));return new n(e)},n.fromImages=function(t){for(var e=[],i=0;i<t.length;++i)e.push(new r.Texture.fromImage(t[i]));return new n(e)}},{"../core":30}],82:[function(t,e,i){function n(t,e,i){r.Sprite.call(this,t),this.tileScale=new r.Point(1,1),this.tilePosition=new r.Point(0,0),this._width=e||100,this._height=i||100,this._uvs=new r.TextureUvs,this._canvasPattern=null,this.shader=new r.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","uniform vec2 uPixelSize;","void main(void){","   vec2 coord = mod(vTextureCoord, uFrame.zw);","   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join("\n"),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]},uPixelSize:{type:"2fv",value:[1,1]}})}var r=t("../core"),s=new r.Point,a=t("../core/renderers/canvas/utils/CanvasTinter");n.prototype=Object.create(r.Sprite.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this._width},set:function(t){this._width=t}},height:{get:function(){return this._height},set:function(t){this._height=t}}}),n.prototype._onTextureUpdate=function(){},n.prototype._renderWebGL=function(t){var e=this._texture;if(e&&e._uvs){var i=e._uvs,n=e._frame.width,r=e._frame.height,s=e.baseTexture.width,a=e.baseTexture.height;e._uvs=this._uvs,e._frame.width=this.width,e._frame.height=this.height,this.shader.uniforms.uPixelSize.value[0]=1/s,this.shader.uniforms.uPixelSize.value[1]=1/a,this.shader.uniforms.uFrame.value[0]=i.x0,this.shader.uniforms.uFrame.value[1]=i.y0,this.shader.uniforms.uFrame.value[2]=i.x1-i.x0,this.shader.uniforms.uFrame.value[3]=i.y2-i.y0,this.shader.uniforms.uTransform.value[0]=this.tilePosition.x%(n*this.tileScale.x)/this._width,this.shader.uniforms.uTransform.value[1]=this.tilePosition.y%(r*this.tileScale.y)/this._height,this.shader.uniforms.uTransform.value[2]=s/this._width*this.tileScale.x,this.shader.uniforms.uTransform.value[3]=a/this._height*this.tileScale.y,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this),e._uvs=i,e._frame.width=n,e._frame.height=r}},n.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,n=this.worldTransform,s=t.resolution,o=e.baseTexture,h=this.tilePosition.x/this.tileScale.x%e._frame.width,l=this.tilePosition.y/this.tileScale.y%e._frame.height;if(!this._canvasPattern){var u=new r.CanvasBuffer(e._frame.width,e._frame.height);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=a.getTintedTexture(this,this.tint)),u.context.drawImage(this.tintedTexture,0,0)):u.context.drawImage(o.source,-e._frame.x,-e._frame.y),this._canvasPattern=u.context.createPattern(u.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(n.a*s,n.b*s,n.c*s,n.d*s,n.tx*s,n.ty*s),i.scale(this.tileScale.x,this.tileScale.y),i.translate(h+this.anchor.x*-this._width,l+this.anchor.y*-this._height);var c=t.blendModes[this.blendMode];c!==t.context.globalCompositeOperation&&(i.globalCompositeOperation=c),i.fillStyle=this._canvasPattern,i.fillRect(-h,-l,this._width/this.tileScale.x,this._height/this.tileScale.y)}},n.prototype.getBounds=function(){var t,e,i,n,r=this._width,s=this._height,a=r*(1-this.anchor.x),o=r*-this.anchor.x,h=s*(1-this.anchor.y),l=s*-this.anchor.y,u=this.worldTransform,c=u.a,d=u.b,p=u.c,f=u.d,g=u.tx,_=u.ty,v=c*o+p*l+g,m=f*l+d*o+_,y=c*a+p*l+g,b=f*l+d*a+_,x=c*a+p*h+g,T=f*h+d*a+_,E=c*o+p*h+g,w=f*h+d*o+_;t=(t=(t=(t=v)>y?y:t)>x?x:t)>E?E:t,i=(i=(i=(i=m)>b?b:i)>T?T:i)>w?w:i,e=E>(e=x>(e=y>(e=v)?y:e)?x:e)?E:e,n=w>(n=T>(n=b>(n=m)?b:n)?T:n)?w:n;var S=this._bounds;return S.x=t,S.width=e-t,S.y=i,S.height=n-i,this._currentBounds=S,S},n.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,s);var e,i=this._width,n=this._height,r=-i*this.anchor.x;return s.x>r&&s.x<r+i&&(e=-n*this.anchor.y,s.y>e&&s.y<e+n)},n.prototype.destroy=function(){r.Sprite.prototype.destroy.call(this),this.tileScale=null,this._tileScaleOffset=null,this.tilePosition=null,this._uvs=null},n.fromFrame=function(t,e,i){var s=r.utils.TextureCache[t];if(!s)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new n(s,e,i)},n.fromImage=function(t,e,i,s,a){return new n(r.Texture.fromImage(t,s,a),e,i)}},{"../core":30,"../core/renderers/canvas/utils/CanvasTinter":48}],83:[function(t,e,i){var n=t("../core"),r=n.DisplayObject,s=new n.Matrix;r.prototype._cacheAsBitmap=!1,r.prototype._originalRenderWebGL=null,r.prototype._originalRenderCanvas=null,r.prototype._originalUpdateTransform=null,r.prototype._originalHitTest=null,r.prototype._originalDestroy=null,r.prototype._cachedSprite=null,Object.defineProperties(r.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._originalRenderWebGL=this.renderWebGL,this._originalRenderCanvas=this.renderCanvas,this._originalUpdateTransform=this.updateTransform,this._originalGetBounds=this.getBounds,this._originalDestroy=this.destroy,this._originalContainsPoint=this.containsPoint,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(this._cachedSprite&&this._destroyCachedDisplayObject(),this.renderWebGL=this._originalRenderWebGL,this.renderCanvas=this._originalRenderCanvas,this.getBounds=this._originalGetBounds,this.destroy=this._originalDestroy,this.updateTransform=this._originalUpdateTransform,this.containsPoint=this._originalContainsPoint))}}}),r.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cachedSprite.worldAlpha=this.worldAlpha,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this._cachedSprite))},r.prototype._initCachedDisplayObject=function(t){if(!this._cachedSprite){t.currentRenderer.flush();var e=this.getLocalBounds().clone();if(this._filters){var i=this._filters[0].padding;e.x-=i,e.y-=i,e.width+=2*i,e.height+=2*i}var r=t.currentRenderTarget,a=t.filterManager.filterStack,o=new n.RenderTexture(t,0|e.width,0|e.height),h=s;h.tx=-e.x,h.ty=-e.y,this.renderWebGL=this._originalRenderWebGL,o.render(this,h,!0,!0),t.setRenderTarget(r),t.filterManager.filterStack=a,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new n.Sprite(o),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-e.x/e.width,this._cachedSprite.anchor.y=-e.y/e.height,this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},r.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cachedSprite.worldAlpha=this.worldAlpha,this._cachedSprite.renderCanvas(t))},r.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cachedSprite){var e=this.getLocalBounds(),i=t.context,r=new n.RenderTexture(t,0|e.width,0|e.height),a=s;a.tx=-e.x,a.ty=-e.y,this.renderCanvas=this._originalRenderCanvas,r.render(this,a,!0),t.context=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new n.Sprite(r),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-e.x/e.width,this._cachedSprite.anchor.y=-e.y/e.height,this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},r.prototype._getCachedBounds=function(){return this._cachedSprite._currentBounds=null,this._cachedSprite.getBounds()},r.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy(),this._cachedSprite=null},r.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this._originalDestroy()}},{"../core":30}],84:[function(t,e,i){var n=t("../core");n.DisplayObject.prototype.name=null,n.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":30}],85:[function(t,e,i){var n=t("../core");n.DisplayObject.prototype.getGlobalPosition=function(t){return t=t||new n.Point,this.parent?(this.displayObjectUpdateTransform(),t.x=this.worldTransform.tx,t.y=this.worldTransform.ty):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":30}],86:[function(t,e,i){t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition"),e.exports={MovieClip:t("./MovieClip"),TilingSprite:t("./TilingSprite"),BitmapText:t("./BitmapText")}},{"./BitmapText":80,"./MovieClip":81,"./TilingSprite":82,"./cacheAsBitmap":83,"./getChildByName":84,"./getGlobalPosition":85}],87:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})},{"../../core":30}],88:[function(t,e,i){function n(){r.AbstractFilter.call(this),this.blurXFilter=new s,this.blurYFilter=new a,this.defaultFilter=new r.AbstractFilter}var r=t("../../core"),s=t("../blur/BlurXFilter"),a=t("../blur/BlurYFilter");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i){var n=t.filterManager.getRenderTarget(!0);this.defaultFilter.applyFilter(t,e,i),this.blurXFilter.applyFilter(t,e,n),t.blendModeManager.setBlendMode(r.BLEND_MODES.SCREEN),this.blurYFilter.applyFilter(t,n,i),t.blendModeManager.setBlendMode(r.BLEND_MODES.NORMAL),t.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":30,"../blur/BlurXFilter":91,"../blur/BlurYFilter":92}],89:[function(t,e,i){function n(t,e){r.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform float dirX;\nuniform float dirY;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[3];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );\n    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );\n    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[3];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;\n}\n",{strength:{type:"1f",value:1},dirX:{type:"1f",value:t||0},dirY:{type:"1f",value:e||0}}),this.defaultFilter=new r.AbstractFilter,this.passes=1,this.dirX=t||0,this.dirY=e||0,this.strength=4}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i,n){var r=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(r,e,i,n);else{var s=t.filterManager.getRenderTarget(!0);t.filterManager.applyFilter(r,e,s,n);for(var a=0;a<this.passes-2;a++)t.filterManager.applyFilter(r,s,s,n);t.filterManager.applyFilter(r,s,i,n),t.filterManager.returnRenderTarget(s)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}},dirX:{get:function(){return this.dirX},set:function(t){this.uniforms.dirX.value=t}},dirY:{get:function(){return this.dirY},set:function(t){this.uniforms.dirY.value=t}}})},{"../../core":30}],90:[function(t,e,i){function n(){r.AbstractFilter.call(this),this.blurXFilter=new s,this.blurYFilter=new a}var r=t("../../core"),s=t("./BlurXFilter"),a=t("./BlurYFilter");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i){var n=t.filterManager.getRenderTarget(!0);this.blurXFilter.applyFilter(t,e,n),this.blurYFilter.applyFilter(t,n,i),t.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.padding=.5*Math.abs(t),this.blurXFilter.blur=this.blurYFilter.blur=t}},passes:{get:function(){return this.blurXFilter.passes},set:function(t){this.blurXFilter.passes=this.blurYFilter.passes=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":30,"./BlurXFilter":91,"./BlurYFilter":92}],91:[function(t,e,i){function n(){r.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i,n){var r=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(r,e,i,n);else{for(var s=t.filterManager.getRenderTarget(!0),a=e,o=s,h=0;h<this.passes-1;h++){t.filterManager.applyFilter(r,a,o,!0);var l=o;o=a,a=l}t.filterManager.applyFilter(r,a,i,n),t.filterManager.returnRenderTarget(s)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})},{"../../core":30}],92:[function(t,e,i){function n(){r.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i,n){var r=this.getShader(t);if(this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(r,e,i,n);else{for(var s=t.filterManager.getRenderTarget(!0),a=e,o=s,h=0;h<this.passes-1;h++){t.filterManager.applyFilter(r,a,o,!0);var l=o;o=a,a=l}t.filterManager.applyFilter(r,a,i,n),t.filterManager.returnRenderTarget(s)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})},{"../../core":30}],93:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 delta;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{delta:{type:"v2",value:{x:.1,y:0}}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n},{"../../core":30}],94:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[25];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4];\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9];\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14];\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19];\n\n}\n",{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype._loadMatrix=function(t,e){var i=t;(e=!!e)&&(this._multiply(i,this.uniforms.m.value,t),i=this._colorMatrix(i)),this.uniforms.m.value=i},n.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19],t},n.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},n.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},n.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},n.prototype.grayscale=n.prototype.greyscale,n.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},n.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),n=Math.sin(t),r=.213,s=.715,a=.072,o=[r+i*(1-r)+n*-r,s+i*-s+n*-s,a+i*-a+n*(1-a),0,0,r+i*-r+.143*n,s+i*(1-s)+.14*n,a+i*-a+-.283*n,0,0,r+i*-r+-.787*n,s+i*-s+n*s,a+i*(1-a)+n*a,0,0,0,0,0,1,0];this._loadMatrix(o,e)},n.prototype.contrast=function(t,e){var i=(t||0)+1,n=-128*(i-1),r=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(r,e)},n.prototype.saturate=function(t,e){var i=2*(t||0)/3+1,n=-.5*(i-1),r=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(r,e)},n.prototype.desaturate=function(t){this.saturate(-1)},n.prototype.negative=function(t){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],t)},n.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},n.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},n.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},n.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},n.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},n.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},n.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},n.prototype.colorTone=function(t,e,i,n,r){var s=((i=i||16770432)>>16&255)/255,a=(i>>8&255)/255,o=(255&i)/255,h=((n=n||3375104)>>16&255)/255,l=(n>>8&255)/255,u=(255&n)/255,c=[.3,.59,.11,0,0,s,a,o,t=t||.2,0,h,l,u,e=e||.15,0,s-h,a-l,o-u,0,0];this._loadMatrix(c,r)},n.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},n.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},n.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},n.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperties(n.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(t){this.uniforms.m.value=t}}})},{"../../core":30}],95:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n",{step:{type:"1f",value:5}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}})},{"../../core":30}],96:[function(t,e,i){function n(t,e,i){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",{matrix:{type:"1fv",value:new Float32Array(t)},texelSize:{type:"v2",value:{x:1/e,y:1/i}}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=new Float32Array(t)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(t){this.uniforms.texelSize.value.x=1/t}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(t){this.uniforms.texelSize.value.y=1/t}}})},{"../../core":30}],97:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n},{"../../core":30}],98:[function(t,e,i){function n(t,e){var i=new r.Matrix;t.renderable=!1,r.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision mediump float;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vMapCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));\n}\n",{mapSampler:{type:"sampler2D",value:t.texture},otherMatrix:{type:"mat3",value:i.toArray(!0)},scale:{type:"v2",value:{x:1,y:1}}}),this.maskSprite=t,this.maskMatrix=i,null==e&&(e=20),this.scale=new r.Point(e,e)}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i){var n=t.filterManager;n.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.scale.value.x=this.scale.x*(1/e.frame.width),this.uniforms.scale.value.y=this.scale.y*(1/e.frame.height);var r=this.getShader(t);n.applyFilter(r,e,i)},Object.defineProperties(n.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(t){this.uniforms.mapSampler.value=t}}})},{"../../core":30}],99:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})},{"../../core":30}],100:[function(t,e,i){function n(){r.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform vec2 offset;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n\n    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );\n}\n",{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i,n){var r=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(r,e,i,n);else{for(var s=t.filterManager.getRenderTarget(!0),a=e,o=s,h=0;h<this.passes-1;h++){t.filterManager.applyFilter(r,a,o,n);var l=o;o=a,a=l}t.filterManager.applyFilter(r,a,i,n),t.filterManager.returnRenderTarget(s)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}}})},{"../../core":30}],101:[function(t,e,i){function n(){r.AbstractFilter.call(this),this.blurXFilter=new s,this.blurYTintFilter=new a,this.defaultFilter=new r.AbstractFilter,this.padding=30,this._dirtyPosition=!0,this._angle=45*Math.PI/180,this._distance=10,this.alpha=.75,this.hideObject=!1,this.blendMode=r.BLEND_MODES.MULTIPLY}var r=t("../../core"),s=t("../blur/BlurXFilter"),a=t("./BlurYTintFilter");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i){var n=t.filterManager.getRenderTarget(!0);this._dirtyPosition&&(this._dirtyPosition=!1,this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance,this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance),this.blurXFilter.applyFilter(t,e,n),t.blendModeManager.setBlendMode(this.blendMode),this.blurYTintFilter.applyFilter(t,n,i),t.blendModeManager.setBlendMode(r.BLEND_MODES.NORMAL),this.hideObject||this.defaultFilter.applyFilter(t,e,i),t.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYTintFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(t){this.blurYTintFilter.blur=t}},color:{get:function(){return r.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(t){this.blurYTintFilter.uniforms.color.value=r.utils.hex2rgb(t)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(t){this.blurYTintFilter.uniforms.alpha.value=t}},distance:{get:function(){return this._distance},set:function(t){this._dirtyPosition=!0,this._distance=t}},angle:{get:function(){return this._angle},set:function(t){this._dirtyPosition=!0,this._angle=t}}})},{"../../core":30,"../blur/BlurXFilter":91,"./BlurYTintFilter":100}],102:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n",{gray:{type:"1f",value:1}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}})},{"../../core":30}],103:[function(t,e,i){e.exports={AsciiFilter:t("./ascii/AsciiFilter"),BloomFilter:t("./bloom/BloomFilter"),BlurFilter:t("./blur/BlurFilter"),BlurXFilter:t("./blur/BlurXFilter"),BlurYFilter:t("./blur/BlurYFilter"),BlurDirFilter:t("./blur/BlurDirFilter"),ColorMatrixFilter:t("./color/ColorMatrixFilter"),ColorStepFilter:t("./color/ColorStepFilter"),ConvolutionFilter:t("./convolution/ConvolutionFilter"),CrossHatchFilter:t("./crosshatch/CrossHatchFilter"),DisplacementFilter:t("./displacement/DisplacementFilter"),DotScreenFilter:t("./dot/DotScreenFilter"),GrayFilter:t("./gray/GrayFilter"),DropShadowFilter:t("./dropshadow/DropShadowFilter"),InvertFilter:t("./invert/InvertFilter"),NoiseFilter:t("./noise/NoiseFilter"),PixelateFilter:t("./pixelate/PixelateFilter"),RGBSplitFilter:t("./rgb/RGBSplitFilter"),ShockwaveFilter:t("./shockwave/ShockwaveFilter"),SepiaFilter:t("./sepia/SepiaFilter"),SmartBlurFilter:t("./blur/SmartBlurFilter"),TiltShiftFilter:t("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:t("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:t("./tiltshift/TiltShiftYFilter"),TwistFilter:t("./twist/TwistFilter")}},{"./ascii/AsciiFilter":87,"./bloom/BloomFilter":88,"./blur/BlurDirFilter":89,"./blur/BlurFilter":90,"./blur/BlurXFilter":91,"./blur/BlurYFilter":92,"./blur/SmartBlurFilter":93,"./color/ColorMatrixFilter":94,"./color/ColorStepFilter":95,"./convolution/ConvolutionFilter":96,"./crosshatch/CrossHatchFilter":97,"./displacement/DisplacementFilter":98,"./dot/DotScreenFilter":99,"./dropshadow/DropShadowFilter":101,"./gray/GrayFilter":102,"./invert/InvertFilter":104,"./noise/NoiseFilter":105,"./pixelate/PixelateFilter":106,"./rgb/RGBSplitFilter":107,"./sepia/SepiaFilter":108,"./shockwave/ShockwaveFilter":109,"./tiltshift/TiltShiftFilter":111,"./tiltshift/TiltShiftXFilter":112,"./tiltshift/TiltShiftYFilter":113,"./twist/TwistFilter":114}],104:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n",{invert:{type:"1f",value:1}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}})},{"../../core":30}],105:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n",{noise:{type:"1f",value:.5}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(t){this.uniforms.noise.value=t}}})},{"../../core":30}],106:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})},{"../../core":30}],107:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(t){this.uniforms.red.value=t}},green:{get:function(){return this.uniforms.green.value},set:function(t){this.uniforms.green.value=t}},blue:{get:function(){return this.uniforms.blue.value},set:function(t){this.uniforms.blue.value=t}}})},{"../../core":30}],108:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n",{sepia:{type:"1f",value:1}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}})},{"../../core":30}],109:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n",{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(t){this.uniforms.center.value=t}},params:{get:function(){return this.uniforms.params.value},set:function(t){this.uniforms.params.value=t}},time:{get:function(){return this.uniforms.time.value},set:function(t){this.uniforms.time.value=t}}})},{"../../core":30}],110:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}}),this.updateDelta()}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.updateDelta=function(){this.uniforms.delta.value.x=0,this.uniforms.delta.value.y=0},Object.defineProperties(n.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(t){this.uniforms.blur.value=t}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(t){this.uniforms.gradientBlur.value=t}},start:{get:function(){return this.uniforms.start.value},set:function(t){this.uniforms.start.value=t,this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(t){this.uniforms.end.value=t,this.updateDelta()}}})},{"../../core":30}],111:[function(t,e,i){function n(){r.AbstractFilter.call(this),this.tiltShiftXFilter=new s,this.tiltShiftYFilter=new a}var r=t("../../core"),s=t("./TiltShiftXFilter"),a=t("./TiltShiftYFilter");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i){var n=t.filterManager.getRenderTarget(!0);this.tiltShiftXFilter.applyFilter(t,e,n),this.tiltShiftYFilter.applyFilter(t,n,i),t.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(t){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=t}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(t){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=t}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(t){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=t}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(t){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=t}}})},{"../../core":30,"./TiltShiftXFilter":112,"./TiltShiftYFilter":113}],112:[function(t,e,i){function n(){r.call(this)}var r=t("./TiltShiftAxisFilter");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,i=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=t/i,this.uniforms.delta.value.y=e/i}},{"./TiltShiftAxisFilter":110}],113:[function(t,e,i){function n(){r.call(this)}var r=t("./TiltShiftAxisFilter");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,i=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=-e/i,this.uniforms.delta.value.y=t/i}},{"./TiltShiftAxisFilter":110}],114:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n",{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}},radius:{get:function(){return this.uniforms.radius.value},set:function(t){this.uniforms.radius.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})},{"../../core":30}],115:[function(t,e,i){(function(i){t("./polyfill");var n=e.exports=t("./core");n.extras=t("./extras"),n.filters=t("./filters"),n.interaction=t("./interaction"),n.loaders=t("./loaders"),n.mesh=t("./mesh"),n.accessibility=t("./accessibility"),n.loader=new n.loaders.Loader,Object.assign(n,t("./deprecation")),i.PIXI=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":22,"./core":30,"./deprecation":79,"./extras":86,"./filters":103,"./interaction":118,"./loaders":121,"./mesh":128,"./polyfill":133}],116:[function(t,e,i){function n(){this.global=new r.Point,this.target=null,this.originalEvent=null,this.identifier=-1}var r=t("../core");n.prototype.constructor=n,e.exports=n,n.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)}},{"../core":30}],117:[function(t,e,i){function n(t,e){e=e||{},a.call(this),this.renderer=t,this.autoPreventDefault=void 0===e.autoPreventDefault||e.autoPreventDefault,this.interactionFrequency=e.interactionFrequency||10,this.mouse=new s,this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}},this.interactiveDataPool=[],this.interactionDOMElement=null,this.eventsAdded=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.handleCursorChange=null,this._tempPoint=new r.Point,this.resolution=1,this.setTargetElement(this.renderer.view,this.renderer.resolution)}var r=t("../core"),s=t("./InteractionData"),a=t("eventemitter3");Object.assign(r.DisplayObject.prototype,t("./interactiveTarget")),n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.setTargetElement=function(t,e){this.removeEvents(),this.interactionDOMElement=t,this.resolution=e||1,this.addEvents()},n.prototype.addEvents=function(){this.interactionDOMElement&&(r.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onMouseOver,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},n.prototype.removeEvents=function(){this.interactionDOMElement&&(r.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onMouseOver,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},n.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.handleCursorChange?this.handleCursorChange(this.cursor):this.interactionDOMElement.style.cursor=this.cursor)}},n.prototype.dispatchEvent=function(t,e,i){i.stopped||(i.target=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},n.prototype.mapPositionToPoint=function(t,e,i){var n=this.interactionDOMElement.getBoundingClientRect();t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)/this.resolution,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)/this.resolution},n.prototype.processInteractive=function(t,e,i,n,r){if(!e||!e.visible)return!1;var s=!1,a=r=e.interactive||r;if(e.hitArea&&(a=!1),e.interactiveChildren)for(var o=e.children,h=o.length-1;h>=0;h--)this.processInteractive(t,o[h],i,n,a)&&(s=!0,a=!1,o[h].interactive&&(n=!1));return r&&(n&&!s&&(e.hitArea?(e.worldTransform.applyInverse(t,this._tempPoint),s=e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):e.containsPoint&&(s=e.containsPoint(t))),e.interactive&&i(e,s)),s},n.prototype.onMouseDown=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.emit("stagedown",this.eventData),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0)},n.prototype.processMouseDown=function(t,e){var i=this.mouse.originalEvent,n=2===i.button||3===i.which;e&&(t[n?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(t,n?"rightdown":"mousedown",this.eventData))},n.prototype.onMouseUp=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.emit("stageup",this.eventData),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0)},n.prototype.processMouseUp=function(t,e){var i=this.mouse.originalEvent,n=2===i.button||3===i.which,r=n?"_isRightDown":"_isLeftDown";e?(this.dispatchEvent(t,n?"rightup":"mouseup",this.eventData),t[r]&&(t[r]=!1,this.dispatchEvent(t,n?"rightclick":"click",this.eventData))):t[r]&&(t[r]=!1,this.dispatchEvent(t,n?"rightupoutside":"mouseupoutside",this.eventData))},n.prototype.onMouseMove=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.didMove=!0,this.cursor="inherit",this.emit("stagemove",this.eventData),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.handleCursorChange?this.handleCursorChange(this.cursor):this.interactionDOMElement.style.cursor=this.cursor)},n.prototype.processMouseMove=function(t,e){this.dispatchEvent(t,"mousemove",this.eventData),this.processMouseOverOut(t,e)},n.prototype.onMouseOut=function(t){this.mouse.originalEvent=t,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.handleCursorChange||(this.interactionDOMElement.style.cursor="inherit"),this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1),this.emit("stageout")},n.prototype.processMouseOverOut=function(t,e){e?(t._over||(t._over=!0,this.dispatchEvent(t,"mouseover",this.eventData)),t.buttonMode&&(this.cursor=t.defaultCursor)):t._over&&(t._over=!1,this.dispatchEvent(t,"mouseout",this.eventData))},n.prototype.onMouseOver=function(){this.emit("stagein")},n.prototype.onTouchStart=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,n=0;i>n;n++){var r=e[n],s=this.getTouchData(r);s.originalEvent=t,this.eventData.data=s,this.eventData.stopped=!1,this.emit("stagedown",this.eventData),this.processInteractive(s.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.returnTouchData(s)}},n.prototype.processTouchStart=function(t,e){e&&(t._touchDown=this.eventData.data.identifier,this.dispatchEvent(t,"touchstart",this.eventData))},n.prototype.onTouchEnd=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,n=0;i>n;n++){var r=e[n],s=this.getTouchData(r);s.originalEvent=t,this.eventData.data=s,this.eventData.stopped=!1,this.emit("stageup",this.eventData),this.processInteractive(s.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.returnTouchData(s)}},n.prototype.processTouchEnd=function(t,e){e?(this.dispatchEvent(t,"touchend",this.eventData),t._touchDown===this.eventData.data.identifier&&(t._touchDown=!1,this.dispatchEvent(t,"tap",this.eventData))):t._touchDown===this.eventData.data.identifier&&(t._touchDown=!1,this.dispatchEvent(t,"touchendoutside",this.eventData))},n.prototype.onTouchMove=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,n=0;i>n;n++){var r=e[n],s=this.getTouchData(r);s.originalEvent=t,this.eventData.data=s,this.eventData.stopped=!1,this.emit("stagemove",this.eventData),this.processInteractive(s.global,this.renderer._lastObjectRendered,this.processTouchMove,!0),this.returnTouchData(s)}},n.prototype.processTouchMove=function(t,e){e=e,this.dispatchEvent(t,"touchmove",this.eventData)},n.prototype.getTouchData=function(t){var e=this.interactiveDataPool.pop();return e||(e=new s),e.identifier=t.identifier,this.mapPositionToPoint(e.global,t.clientX,t.clientY),navigator.isCocoonJS&&(e.global.x=e.global.x/this.resolution,e.global.y=e.global.y/this.resolution),t.globalX=e.global.x,t.globalY=e.global.y,e},n.prototype.returnTouchData=function(t){this.interactiveDataPool.push(t)},n.prototype.destroy=function(){this.removeEvents(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onMouseOver=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null,this.handleCursorChange=null},r.WebGLRenderer.registerPlugin("interaction",n),r.CanvasRenderer.registerPlugin("interaction",n)},{"../core":30,"./InteractionData":116,"./interactiveTarget":119,eventemitter3:10}],118:[function(t,e,i){e.exports={InteractionData:t("./InteractionData"),InteractionManager:t("./InteractionManager"),interactiveTarget:t("./interactiveTarget")}},{"./InteractionData":116,"./InteractionManager":117,"./interactiveTarget":119}],119:[function(t,e,i){e.exports={interactive:!1,buttonMode:!1,interactiveChildren:!0,defaultCursor:"pointer",_over:!1,_touchDown:!1}},{}],120:[function(t,e,i){function n(t,e){var i={},n=t.data.getElementsByTagName("info")[0],r=t.data.getElementsByTagName("common")[0];i.font=n.getAttribute("face"),i.size=parseInt(n.getAttribute("size"),10),i.lineHeight=parseInt(r.getAttribute("lineHeight"),10),i.chars={};for(var o=t.data.getElementsByTagName("char"),h=0;h<o.length;h++){var l=parseInt(o[h].getAttribute("id"),10),u=new s.Rectangle(parseInt(o[h].getAttribute("x"),10)+e.frame.x,parseInt(o[h].getAttribute("y"),10)+e.frame.y,parseInt(o[h].getAttribute("width"),10),parseInt(o[h].getAttribute("height"),10));i.chars[l]={xOffset:parseInt(o[h].getAttribute("xoffset"),10),yOffset:parseInt(o[h].getAttribute("yoffset"),10),xAdvance:parseInt(o[h].getAttribute("xadvance"),10),kerning:{},texture:new s.Texture(e.baseTexture,u)}}var c=t.data.getElementsByTagName("kerning");for(h=0;h<c.length;h++){var d=parseInt(c[h].getAttribute("first"),10),p=parseInt(c[h].getAttribute("second"),10),f=parseInt(c[h].getAttribute("amount"),10);i.chars[p].kerning[d]=f}t.bitmapFont=i,a.BitmapText.fonts[i.font]=i}var r=t("resource-loader").Resource,s=t("../core"),a=t("../extras"),o=t("path");e.exports=function(){return function(t,e){if(!t.data||!t.isXml)return e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return e();var i=o.dirname(t.url);"."===i&&(i=""),this.baseUrl&&i&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/"),i=i.replace(this.baseUrl,"")),i&&"/"!==i.charAt(i.length-1)&&(i+="/");var a=i+t.data.getElementsByTagName("page")[0].getAttribute("file"),h=a;if(s.utils.useFilenamesForTextures&&(h=s.utils.getFilenameFromUrl(h)),s.utils.TextureCache[h])n(t,s.utils.TextureCache[h]),e();else{var l={crossOrigin:t.crossOrigin,loadType:r.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata};this.add(t.name+"_image",a,l,(function(i){n(t,i.texture),e()}))}}}},{"../core":30,"../extras":86,path:2,"resource-loader":16}],121:[function(t,e,i){e.exports={Loader:t("./loader"),bitmapFontParser:t("./bitmapFontParser"),spritesheetParser:t("./spritesheetParser"),textureParser:t("./textureParser"),Resource:t("resource-loader").Resource}},{"./bitmapFontParser":120,"./loader":122,"./spritesheetParser":123,"./textureParser":124,"resource-loader":16}],122:[function(t,e,i){function n(t,e){r.call(this,t,e);for(var i=0;i<n._pixiMiddleware.length;++i)this.use(n._pixiMiddleware[i]())}var r=t("resource-loader"),s=t("./textureParser"),a=t("./spritesheetParser"),o=t("./bitmapFontParser");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n._pixiMiddleware=[r.middleware.parsing.blob,s,a,o],n.addPixiMiddleware=function(t){n._pixiMiddleware.push(t)};var h=r.Resource;h.setExtensionXhrType("fnt",h.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":120,"./spritesheetParser":123,"./textureParser":124,"resource-loader":16}],123:[function(t,e,i){var n=t("resource-loader").Resource,r=t("path"),s=t("../core");e.exports=function(){return function(t,e){if(!t.data||!t.isJson||!t.data.frames)return e();var i={crossOrigin:t.crossOrigin,loadType:n.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata},a=r.dirname(t.url.replace(this.baseUrl,"")),o=s.utils.getResolutionOfUrl(t.url);this.add(t.name+"_image",a+"/"+t.data.meta.image,i,(function(i){t.textures={};var n=t.data.frames;for(var r in n){var a=n[r].frame;if(a){var h=null,l=null;if(h=n[r].rotated?new s.Rectangle(a.x,a.y,a.h,a.w):new s.Rectangle(a.x,a.y,a.w,a.h),n[r].trimmed&&(l=new s.Rectangle(n[r].spriteSourceSize.x/o,n[r].spriteSourceSize.y/o,n[r].sourceSize.w/o,n[r].sourceSize.h/o)),n[r].rotated){var u=h.width;h.width=h.height,h.height=u}h.x/=o,h.y/=o,h.width/=o,h.height/=o;var c=r;s.utils.useFilenamesForTextures&&(c=s.utils.getFilenameFromUrl(r)),t.textures[c]=new s.Texture(i.texture.baseTexture,h,h.clone(),l,n[r].rotated),s.utils.TextureCache[c]=t.textures[c]}}e()}))}}},{"../core":30,path:2,"resource-loader":16}],124:[function(t,e,i){var n=t("../core");e.exports=function(){return function(t,e){if(t.data&&t.isImage){var i=new n.BaseTexture(t.data,null,n.utils.getResolutionOfUrl(t.url));i.imageUrl=t.url,t.texture=new n.Texture(i);var r=t.url;n.utils.useFilenamesForTextures&&(r=n.utils.getFilenameFromUrl(r)),n.utils.BaseTextureCache[r]=i,n.utils.TextureCache[r]=t.texture}e()}}},{"../core":30}],125:[function(t,e,i){function n(t,e,i,s,a){r.Container.call(this),this._texture=null,this.uvs=i||new Float32Array([0,0,1,0,1,1,0,1]),this.vertices=e||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=s||new Uint16Array([0,1,3,2]),this.dirty=!0,this.blendMode=r.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=a||n.DRAW_MODES.TRIANGLE_MESH,this.texture=t,this.shader=null}var r=t("../core"),s=new r.Point,a=new r.Polygon;n.prototype=Object.create(r.Container.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),n.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.mesh),t.plugins.mesh.render(this)},n.prototype._renderCanvas=function(t){var e=t.context,i=this.worldTransform;t.roundPixels?e.setTransform(i.a,i.b,i.c,i.d,0|i.tx,0|i.ty):e.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.drawMode===n.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(e):this._renderCanvasTriangles(e)},n.prototype._renderCanvasTriangleMesh=function(t){for(var e=this.vertices,i=this.uvs,n=e.length/2,r=0;n-2>r;r++){var s=2*r;this._renderCanvasDrawTriangle(t,e,i,s,s+2,s+4)}},n.prototype._renderCanvasTriangles=function(t){for(var e=this.vertices,i=this.uvs,n=this.indices,r=n.length,s=0;r>s;s+=3){var a=2*n[s],o=2*n[s+1],h=2*n[s+2];this._renderCanvasDrawTriangle(t,e,i,a,o,h)}},n.prototype._renderCanvasDrawTriangle=function(t,e,i,n,r,s){var a=this._texture.baseTexture.source,o=this._texture.baseTexture.width,h=this._texture.baseTexture.height,l=e[n],u=e[r],c=e[s],d=e[n+1],p=e[r+1],f=e[s+1],g=i[n]*o,_=i[r]*o,v=i[s]*o,m=i[n+1]*h,y=i[r+1]*h,b=i[s+1]*h;if(this.canvasPadding>0){var x=this.canvasPadding/this.worldTransform.a,T=this.canvasPadding/this.worldTransform.d,E=(l+u+c)/3,w=(d+p+f)/3,S=l-E,A=d-w,P=Math.sqrt(S*S+A*A);l=E+S/P*(P+x),d=w+A/P*(P+T),A=p-w,u=E+(S=u-E)/(P=Math.sqrt(S*S+A*A))*(P+x),p=w+A/P*(P+T),A=f-w,c=E+(S=c-E)/(P=Math.sqrt(S*S+A*A))*(P+x),f=w+A/P*(P+T)}t.save(),t.beginPath(),t.moveTo(l,d),t.lineTo(u,p),t.lineTo(c,f),t.closePath(),t.clip();var C=g*y+m*v+_*b-y*v-m*_-g*b,L=l*y+m*c+u*b-y*c-m*u-l*b,O=g*u+l*v+_*c-u*v-l*_-g*c,j=g*y*c+m*u*v+l*_*b-l*y*v-m*_*c-g*u*b,R=d*y+m*f+p*b-y*f-m*p-d*b,M=g*p+d*v+_*f-p*v-d*_-g*f,D=g*y*f+m*p*v+d*_*b-d*y*v-m*_*f-g*p*b;t.transform(L/C,R/C,O/C,M/C,j/C,D/C),t.drawImage(a,0,0),t.restore()},n.prototype.renderMeshFlat=function(t){var e=this.context,i=t.vertices,n=i.length/2;e.beginPath();for(var r=1;n-2>r;r++){var s=2*r,a=i[s],o=i[s+2],h=i[s+4],l=i[s+1],u=i[s+3],c=i[s+5];e.moveTo(a,l),e.lineTo(o,u),e.lineTo(h,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},n.prototype._onTextureUpdate=function(){this.updateFrame=!0},n.prototype.getBounds=function(t){if(!this._currentBounds){for(var e=t||this.worldTransform,i=e.a,n=e.b,s=e.c,a=e.d,o=e.tx,h=e.ty,l=-1/0,u=-1/0,c=1/0,d=1/0,p=this.vertices,f=0,g=p.length;g>f;f+=2){var _=p[f],v=p[f+1],m=i*_+s*v+o,y=a*v+n*_+h;c=c>m?m:c,d=d>y?y:d,l=m>l?m:l,u=y>u?y:u}if(c===-1/0||u===1/0)return r.Rectangle.EMPTY;var b=this._bounds;b.x=c,b.width=l-c,b.y=d,b.height=u-d,this._currentBounds=b}return this._currentBounds},n.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,s);var e,i,r=this.vertices,o=a.points;if(this.drawMode===n.DRAW_MODES.TRIANGLES){var h=this.indices;for(i=this.indices.length,e=0;i>e;e+=3){var l=2*h[e],u=2*h[e+1],c=2*h[e+2];if(o[0]=r[l],o[1]=r[l+1],o[2]=r[u],o[3]=r[u+1],o[4]=r[c],o[5]=r[c+1],a.contains(s.x,s.y))return!0}}else for(i=r.length,e=0;i>e;e+=6)if(o[0]=r[e],o[1]=r[e+1],o[2]=r[e+2],o[3]=r[e+3],o[4]=r[e+4],o[5]=r[e+5],a.contains(s.x,s.y))return!0;return!1},n.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":30}],126:[function(t,e,i){function n(t,e,i){r.call(this,t),this._ready=!0,this.segmentsX=e||10,this.segmentsY=i||10,this.drawMode=r.DRAW_MODES.TRIANGLES,this.refresh()}var r=t("./Mesh");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.refresh=function(){var t=this.segmentsX*this.segmentsY,e=[],i=[],n=[],r=this.texture,s=this.segmentsX-1,a=this.segmentsY-1,o=0,h=r.width/s,l=r.height/a;for(o=0;t>o;o++){var u=o%this.segmentsX,c=o/this.segmentsX|0;e.push(u*h,c*l),i.push(u/(this.segmentsX-1),c/(this.segmentsY-1))}var d=s*a;for(o=0;d>o;o++){var p=o%s,f=o/s|0,g=f*this.segmentsX+p,_=f*this.segmentsX+p+1,v=(f+1)*this.segmentsX+p,m=(f+1)*this.segmentsX+p+1;n.push(g,_,v),n.push(_,m,v)}this.vertices=new Float32Array(e),this.uvs=new Float32Array(i),this.colors=new Float32Array([]),this.indices=new Uint16Array(n)},n.prototype._onTextureUpdate=function(){r.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()}},{"./Mesh":125}],127:[function(t,e,i){function n(t,e){r.call(this,t),this.points=e,this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length),this._ready=!0,this.refresh()}var r=t("./Mesh"),s=t("../core");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){var e=this.uvs,i=this.indices,n=this.colors,r=this._texture._uvs,a=new s.Point(r.x0,r.y0),o=new s.Point(r.x2-r.x0,r.y2-r.y0);e[0]=0+a.x,e[1]=0+a.y,e[2]=0+a.x,e[3]=1*o.y+a.y,n[0]=1,n[1]=1,i[0]=0,i[1]=1;for(var h,l,u=t.length,c=1;u>c;c++)t[c],l=c/(u-1),e[h=4*c]=l*o.x+a.x,e[h+1]=0+a.y,e[h+2]=l*o.x+a.x,e[h+3]=1*o.y+a.y,n[h=2*c]=1,n[h+1]=1,i[h=2*c]=h,i[h+1]=h+1;this.dirty=!0}},n.prototype._onTextureUpdate=function(){r.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},n.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){for(var e,i,n,r,s,a=t[0],o=0,h=0,l=this.vertices,u=t.length,c=0;u>c;c++)i=t[c],n=4*c,h=-((e=c<t.length-1?t[c+1]:i).x-a.x),o=e.y-a.y,10*(1-c/(u-1))>1&&1,o/=r=Math.sqrt(o*o+h*h),h/=r,o*=s=this._texture.height/2,h*=s,l[n]=i.x+o,l[n+1]=i.y+h,l[n+2]=i.x-o,l[n+3]=i.y-h,a=i;this.containerUpdateTransform()}}},{"../core":30,"./Mesh":125}],128:[function(t,e,i){e.exports={Mesh:t("./Mesh"),Plane:t("./Plane"),Rope:t("./Rope"),MeshRenderer:t("./webgl/MeshRenderer"),MeshShader:t("./webgl/MeshShader")}},{"./Mesh":125,"./Plane":126,"./Rope":127,"./webgl/MeshRenderer":129,"./webgl/MeshShader":130}],129:[function(t,e,i){function n(t){r.ObjectRenderer.call(this,t),this.indices=new Uint16Array(15e3);for(var e=0,i=0;15e3>e;e+=6,i+=4)this.indices[e+0]=i+0,this.indices[e+1]=i+1,this.indices[e+2]=i+2,this.indices[e+3]=i+0,this.indices[e+4]=i+2,this.indices[e+5]=i+3;this.currentShader=null}var r=t("../../core"),s=t("../Mesh");n.prototype=Object.create(r.ObjectRenderer.prototype),n.prototype.constructor=n,e.exports=n,r.WebGLRenderer.registerPlugin("mesh",n),n.prototype.onContextChange=function(){},n.prototype.render=function(t){t._vertexBuffer||this._initWebGL(t);var e=this.renderer,i=e.gl,n=t._texture.baseTexture,r=t.shader,a=t.drawMode===s.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;e.blendModeManager.setBlendMode(t.blendMode),r=r?r.shaders[i.id]||r.getShader(e):e.shaderManager.plugins.meshShader,this.renderer.shaderManager.setShader(r),r.uniforms.translationMatrix.value=t.worldTransform.toArray(!0),r.uniforms.projectionMatrix.value=e.currentRenderTarget.projectionMatrix.toArray(!0),r.uniforms.alpha.value=t.worldAlpha,r.syncUniforms(),t.dirty?(t.dirty=!1,i.bindBuffer(i.ARRAY_BUFFER,t._vertexBuffer),i.bufferData(i.ARRAY_BUFFER,t.vertices,i.STATIC_DRAW),i.vertexAttribPointer(r.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,t._uvBuffer),i.bufferData(i.ARRAY_BUFFER,t.uvs,i.STATIC_DRAW),i.vertexAttribPointer(r.attributes.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),n._glTextures[i.id]?i.bindTexture(i.TEXTURE_2D,n._glTextures[i.id]):this.renderer.updateTexture(n),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t._indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t.indices,i.STATIC_DRAW)):(i.bindBuffer(i.ARRAY_BUFFER,t._vertexBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,t.vertices),i.vertexAttribPointer(r.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,t._uvBuffer),i.vertexAttribPointer(r.attributes.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),n._glTextures[i.id]?i.bindTexture(i.TEXTURE_2D,n._glTextures[i.id]):this.renderer.updateTexture(n),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t._indexBuffer),i.bufferSubData(i.ELEMENT_ARRAY_BUFFER,0,t.indices)),i.drawElements(a,t.indices.length,i.UNSIGNED_SHORT,0)},n.prototype._initWebGL=function(t){var e=this.renderer.gl;t._vertexBuffer=e.createBuffer(),t._indexBuffer=e.createBuffer(),t._uvBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,t.vertices,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._uvBuffer),e.bufferData(e.ARRAY_BUFFER,t.uvs,e.STATIC_DRAW),t.colors&&(t._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._colorBuffer),e.bufferData(e.ARRAY_BUFFER,t.colors,e.STATIC_DRAW)),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.indices,e.STATIC_DRAW)},n.prototype.flush=function(){},n.prototype.start=function(){this.currentShader=null},n.prototype.destroy=function(){r.ObjectRenderer.prototype.destroy.call(this)}},{"../../core":30,"../Mesh":125}],130:[function(t,e,i){function n(t){r.Shader.call(this,t,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}var r=t("../../core");n.prototype=Object.create(r.Shader.prototype),n.prototype.constructor=n,e.exports=n,r.ShaderManager.registerPlugin("meshShader",n)},{"../../core":30}],131:[function(t,e,i){Math.sign||(Math.sign=function(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1})},{}],132:[function(t,e,i){Object.assign||(Object.assign=t("object-assign"))},{"object-assign":11}],133:[function(t,e,i){t("./Object.assign"),t("./requestAnimationFrame"),t("./Math.sign")},{"./Math.sign":131,"./Object.assign":132,"./requestAnimationFrame":134}],134:[function(t,e,i){(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var i=Date.now(),n=["ms","moz","webkit","o"],r=0;r<n.length&&!t.requestAnimationFrame;++r)t.requestAnimationFrame=t[n[r]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[n[r]+"CancelAnimationFrame"]||t[n[r]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+i-e;return 0>n&&(n=0),i=e,setTimeout((function(){i=Date.now(),t(performance.now())}),n)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[115])(115)})),function(){"use strict";var t,e,i,n;"extend"in(n=window)||(n.extend=function(t,e){if(e){"string"==typeof e&&(e=n.include(e));var i=e.prototype;t.prototype=Object.create(i),Object.defineProperty(t.prototype,"__parent",{configurable:!0,writable:!0,value:i})}return Object.defineProperty(t.prototype,"constructor",{configurable:!0,writable:!0,value:t}),t.extend=function(e){return n.extend(e,t)},t.prototype}),function(t,e){if(!("include"in t)){t.include=function(e,i){var n=e.split("."),r=t,s="";i=void 0===i||!!i;for(var a=0,o=n.length;a<o;a++){if(!r[s=n[a]]){if(!i)return null;throw"Unable to include '"+e+"'"}r=r[s]}return r}}}(window),function(t,e){if(!("mixin"in t)){t.mixin=function(i,n){if("string"==typeof n&&(n=t.include(n)),!n.prototype)throw"no mixin prototype";var r=n.prototype;for(var s in r){var a=e.getOwnPropertyDescriptor(r,s);a?e.defineProperty(i,s,a):i[s]=r[s]}return n.apply(i,Array.prototype.slice.call(arguments,2)),i}}}(window,Object),function(t){if(!("namespace"in t)){t.namespace=function(e){for(var i=e.split("."),n=t,r="",s=0,a=i.length;s<a;s++)n[r=i[s]]=n[r]||{},n=n[r];return n}}}(window),function(t,e,i){t.prototype.shuffle||i.defineProperty(t.prototype,"shuffle",{enumerable:!1,writable:!1,value:function(){for(var t,i,n=this.length;n;t=e.floor(e.random()*n),i=this[--n],this[n]=this[t],this[t]=i);return this}}),t.prototype.random||i.defineProperty(t.prototype,"random",{enumerable:!1,writable:!1,value:function(){return this[e.floor(e.random()*this.length)]}}),t.prototype.last||i.defineProperty(t.prototype,"last",{enumerable:!1,writable:!1,value:function(){return this[this.length-1]}}),t.prototype.append||i.defineProperty(t.prototype,"append",{enumerable:!1,writable:!1,value:function(){for(var e=arguments,i=0,n=e.length;i<n;++i){var r=e[i];if(t.isArray(r))for(var s=0,a=r.length;s<a;++s)this.push(r[s]);else this.push(r)}return this}})}(Array,Math,Object),function(t){t.randomInt=function(e,i){return void 0===i&&(i=e,e=0),t.floor(t.random()*(i-e+1))+e},t.randomFloat=function(e,i){return void 0===i&&(i=e,e=0),t.random()*(i-e)+e},t.dist=function(e,i,n,r){return t.sqrt(t.distSq(e,i,n,r))},t.distSq=function(t,e,i,n){return"number"==typeof t.x&&t.x==t.x&&(n=i,i=e,e=t.y,t=t.x),"number"==typeof i.x&&i.x==i.x&&(n=i.y,i=i.x),(t-i)*(t-i)+(e-n)*(e-n)},t.clamp=function(t,e,i){return void 0===i&&(i=e,e=0),t>i?i:t<e?e:t},t.roundDecimal=function(e,i){return t.round(e/i)*i}}(Math),function(t,e){t.prototype.toPaddedString||e.defineProperty(t.prototype,"toPaddedString",{enumerable:!1,writable:!1,value:function(t){t||(t=2);var e,i=this;i<0&&(i*=-1,e="-");for(var n=String(Math.floor(i));n.length<t;)n="0"+n;return e&&(n=e+n),n}})}(Number,Object),function(t,e,i){t.merge=function(e,i){for(var n in e&&"object"==typeof e||(e={}),i)if(i.hasOwnProperty(n)){var r=i[n];if("object"==typeof r&&t.isPlain(r)){e[n]=t.merge(e[n],r);continue}e[n]=r}for(var s=2,a=arguments.length;s<a;s++)t.merge(e,arguments[s]);return e},t.isPlain=function(t){var i,n=e.hasOwnProperty;if(!t||"object"!=typeof t||t.nodeType||t===window)return!1;try{if(t.constructor&&!n.call(t,"constructor")&&!n.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(e.ownLast)for(i in t)return n.call(t,i);for(i in t);return void 0===i||n.call(t,i)},t.prototype.clone||t.defineProperty(t.prototype,"clone",{enumerable:!1,writable:!0,value:function(){var t={};for(var e in this)t[e]=this[e];return t}})}(Object,{}),function(){var t=include("createjs.RequestUtils",!1),e=include("createjs.AbstractLoader",!1);if(t){var i=t.getTypeByExtension;t.getTypeByExtension=function(t){if(t)switch(t.toLowerCase()){case"fnt":return e.XML}return i(t)}}}(),function(t,e){e.defineProperty(t.prototype,"format",{enumerable:!1,writable:!1,value:function(){if(arguments.length<1)return this;var t=Array.isArray(t)?t:Array.prototype.slice.call(arguments);return this.replace(/([^%]|^)%(?:(\d+)\$)?s/g,(function(e,i,n){return n?i+t[parseInt(n)-1]:i+t.shift()})).replace(/%%s/g,"%s")}}),t.prototype.reverse||e.defineProperty(t.prototype,"reverse",{enumerable:!1,writable:!1,value:function(){for(var t="",e=this.length-1;e>=0;e--)t+=this[e];return t}})}(String,Object),function(){function t(){this.currentCallCount=0}var e={create:function(e,i){if(!e)return null;("number"!=typeof i||i<1)&&(i=2);var n=function(){++n.currentCallCount>=i&&e()};return n.currentCallCount=0,n.reset=t,n}};namespace("springroll").CombinedCallback=e}(),e=function(e,i,n,r,s){t||(t=include("springroll.Application")),"boolean"==typeof n&&(n={repeat:!!n,autoDestroy:void 0===r||!!r,useFrames:!!s}),n=Object.merge({repeat:!1,autoDestroy:!0,useFrames:!1},n||{}),this._callback=e,this._delay=i,this._timer=i,this._repeat=n.repeat,this._autoDestroy=n.autoDestroy,this._useFrames=n.useFrames,this._paused=!1,this._update=this._update.bind(this),t.instance.on("update",this._update)},(i=extend(e))._update=function(e){this._callback?(this._timer-=this._useFrames?1:e,this._timer<=0&&(this._callback(this),this._repeat?this._timer+=this._delay:this._autoDestroy?this.destroy():t.instance.off("update",this._update))):this.destroy()},i.restart=function(){if(this._callback){var e=t.instance;e.has("update",this._update)||e.on("update",this._update),this._timer=this._delay,this._paused=!1}},i.stop=function(){t.instance.off("update",this._update),this._paused=!1},Object.defineProperty(i,"paused",{get:function(){return this._paused},set:function(e){if(this._callback){var i=t.instance;this._paused&&!e?(this._paused=!1,i.has("update",this._update)||i.on("update",this._update)):e&&i.has("update",this._update)&&(this._paused=!0,i.off("update",this._update))}}}),i.destroy=function(){t.instance.off("update",this._update),this._callback=null},namespace("springroll").DelayedCall=e,function(){var t,e=function(e,i,n){void 0===t&&(t=include("springroll.Debug",!1)),this.name=e,this._value=i,this._toString=n||this.name};Object.defineProperty(e.prototype,"asInt",{get:function(){return this._value}}),e.prototype.toString=function(){return this._toString};var i=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);Object.defineProperty(this,"_byValue",{enumerable:!1,writable:!1,value:[]}),Object.defineProperty(this,"rawEnumValues",{enumerable:!1,writable:!1,value:t});for(var i,n,r,s=0,a=0,o=t.length;a<o;++a)"string"==typeof t[a]?r=t[a]:(r=t[a].name,n=t[a].value||s,s=n),this[r]||(this[(i="string"==typeof t[a]?new e(r,s,r):new e(r,n,t[a].toString||r)).name]=i,this._byValue[s]?Array.isArray(this._byValue[s])?this._byValue[s].push(i):this._byValue[s]=[this._byValue[s],i]:this._byValue[s]=i,s++);Object.defineProperty(this,"length",{enumerable:!1,writable:!1,value:t.length}),Object.defineProperty(this,"next",{enumerable:!1,writable:!1,value:function(t){var e=t.asInt+1;return e>=s?this.first:this.valueFromInt(e)}}),Object.defineProperty(this,"first",{enumerable:!1,writable:!1,value:this.valueFromInt(t[0].value||0)}),Object.defineProperty(this,"last",{enumerable:!1,writable:!1,value:this.valueFromInt(s-1)})},n=extend(i);Object.defineProperty(n,"valueFromInt",{enumerable:!1,writable:!1,value:function(t){var e=this._byValue[t];return e?Array.isArray(e)?e[0]:e:null}}),namespace("springroll").Enum=i}(),function(t){var e={},i=void 0!==window.Storage;if(i)try{localStorage.setItem("LS_TEST","test"),localStorage.removeItem("LS_TEST")}catch(t){i=!1}e.remove=function(t){i?(localStorage.removeItem(t),sessionStorage.removeItem(t)):e.write(t,"",-1)},e.write=function(t,e,n){var r;i?n?sessionStorage.setItem(t,JSON.stringify(e)):localStorage.setItem(t,JSON.stringify(e)):(r=n?-1!==n?"":"; expires=Thu, 01 Jan 1970 00:00:00 GMT":"; expires="+new Date(2147483646e3).toGMTString(),document.cookie=t+"="+escape(JSON.stringify(e))+r+"; path=/")},e.read=function(t){if(i){var n=localStorage.getItem(t)||sessionStorage.getItem(t);return n?JSON.parse(n,e.reviver):null}var r,s,a=t+"=",o=document.cookie.split(";"),h=0;for(h=0,s=o.length;h<s;h++){for(r=o[h];" "==r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(a))return JSON.parse(unescape(r.substring(a.length,r.length)),e.reviver)}return null},e.reviver=function(t,e){if(e&&"string"==typeof e.__classname){var i=include(e.__classname,!1);if(i){var n=new i;if(n.fromJSON)return n.fromJSON(e),n}}return e},namespace("springroll").SavedData=e}(),function(t){var e=include("performance",!1),i=e&&(e.now||e.mozNow||e.msNow||e.oNow||e.webkitNow);i&&(e.now=i);var n={};n.now=i?function(){return e.now()}:Date.now,namespace("springroll").TimeUtils=n}(window),function(){var t=function(t){this.max=-1,this.options=[];var e=0;for(var i in t)e+=t[i],this.options.push({key:i,value:e}),this.max+=t[i]};extend(t).random=function(){for(var t=Math.randomInt(0,this.max),e=0,i=this.options,n=i.length;e<n;++e)if(t<i[e].value)return i[e].key;return null},namespace("springroll").WeightedRandom=t}(),function(){for(var t=["ms","moz","webkit","o"],e=t.length,i=0;i<e&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame){var n=include("springroll.TimeUtils"),r=0;window.requestAnimationFrame=function(t){var e=n.now(),i=Math.max(0,16-(e-r)),s=window.setTimeout((function(){t(e+i)}),i);return r=e+i,s},window.cancelAnimationFrame=function(t){clearTimeout(t)}}window.requestAnimFrame=window.requestAnimationFrame}(),function(t){function e(t,e){return t._priority-e._priority}function i(t){if(null===t)return"null";var e=typeof t;return"object"===e||"function"===e?Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":e}var n=function(){this._listeners={},this._destroyed=!1},r=extend(n);Object.defineProperty(r,"destroyed",{enumerable:!0,get:function(){return this._destroyed}}),r.trigger=function(e){if(!this._destroyed&&this._listeners.hasOwnProperty(e)&&this._listeners[e]!==t){var i,n=this._listeners[e].slice();arguments.length>1&&(i=Array.prototype.slice.call(arguments,1));for(var r=n.length-1;r>=0;--r){var s=n[r];s._eventDispatcherOnce&&(delete s._eventDispatcherOnce,this.off(e,s)),s.apply(this,i)}}},r.once=function(t,e,i){return this.on(t,e,i,!0)},r.on=function(t,n,r,s){if(!this._destroyed){if("object"===i(t))for(var a in t)t.hasOwnProperty(a)&&this.on(a,t[a],r,s);else if("function"===i(n))for(var o,h=t.split(" "),l=null,u=0,c=h.length;u<c;u++)l=h[u],o=this._listeners.hasOwnProperty(l)?this._listeners[l]:this._listeners[l]=[],s&&(n._eventDispatcherOnce=!0),n._priority=parseInt(r)||0,-1===o.indexOf(n)&&(o.push(n),o.length>1&&o.sort(e));else if(Array.isArray(n))for(var d=0,p=n.length;d<p;d++)this.on(t,n[d],r,s);return this}},r.off=function(e,i){if(!this._destroyed){if(e===t)this._listeners={};else if(Array.isArray(i))for(var n=0,r=i.length;n<r;n++)this.off(e,i[n]);else for(var s,a,o=e.split(" "),h=null,l=0,u=o.length;l<u;l++)h=o[l],this._listeners.hasOwnProperty(h)&&(s=this._listeners[h],i===t?s.length=0:-1!==(a=s.indexOf(i))&&s.splice(a,1));return this}},r.has=function(t,e){if(!t||!this._listeners.hasOwnProperty(t))return!1;var i=this._listeners[t];return!!i&&(e?i.indexOf(e)>=0:i.length>0)},r.destroy=function(){this._destroyed=!0,this._listeners=null},namespace("springroll").EventDispatcher=n}(),function(t){var e=include("springroll.EventDispatcher"),i=function(){e.call(this),this._properties={}},n=e.prototype,r=e.extend(i),s=function(t,e){var i=this._properties[t];if(i.readOnly)throw"Property '"+t+"' is read-only";var n=i.value;i.value=e,n!=e&&this.trigger(t,e)},a=function(t){var e=this._properties[t];if(e.responder){var i=e.responder();return e.value=i,i}return e.value};r.add=function(e,i,n){var r=this._properties,h=r[e];if(h!==t)return h.setValue(i),h.setReadOnly(n===t?h.readOnly:n),this;if(this.hasOwnProperty(e))throw"Object already has property "+e;return r[e]=new o(e,i,n),Object.defineProperty(this,e,{get:a.bind(this,e),set:s.bind(this,e)}),this},r.respond=function(e,i){var n=this._properties[e];if(n===t)throw"Property "+e+" does not exist";return n.responder=i,n.value=i(),this},r.destroy=function(){var t;for(var e in this._properties)(t=this._properties[e]).value=null,t.responder=null;this._properties=null,n.destroy.call(this)};var o=function(t,e,i){this.name=t,this.setValue(e),this.setReadOnly(i),this.responder=null};o.prototype.setValue=function(e){this.value=e===t?null:e},o.prototype.setReadOnly=function(e){this.readOnly=e!==t&&!!e},namespace("springroll").PropertyDispatcher=i}(),function(t){var e,i=include("springroll.PropertyDispatcher"),n=function(n,r){e===t&&(e=include("springroll.Debug",!1)),i.call(this),this._options=r||{},this._app=n},r=i.extend(n);r.init=function(){var t=this._options;for(var e in this._app,(t=Object.merge({},t)).useQueryString&&Object.merge(t,s()),t)this.add(e,t[e]);var i=this._properties;for(var n in i)this.trigger(n,i[n].value)};var s=function(){var e={},i=window.location.search;if(!i)return e;for(var n,r=i.substr(i.indexOf("?")+1),s=r.indexOf("#"),a=(r=s<0?r:r.substring(0,s)).split("&"),o=0,h=a.length;o<h;o++){var l=(n=a[o].split("="))[1];"true"===l||l===t?l=!0:"false"===l&&(l=!1),e[n[0]]=l}return e};r.asDOMElement=function(t){var e=this._properties[t];e&&e.value&&"string"==typeof e.value&&(e.value=document.getElementById(e.value))},r.override=function(e,i){var n=this._properties[e];if(n===t)throw"Invalid override "+e;return n.setValue(i),this},namespace("springroll").ApplicationOptions=n}(),function(){var t;namespace("springroll").ApplicationPlugin=function(e){t||(t=include("springroll.Application")),this.priority=e||0,this.setup=function(){},this.preload=null,this.teardown=function(){},t._plugins.push(this),t._plugins.sort((function(t,e){return e.priority-t.priority}))}}(),function(t){var e=include("springroll.TimeUtils"),i=include("springroll.EventDispatcher"),n=include("springroll.ApplicationOptions"),r=include("springroll.DelayedCall"),s=function(t,e){if(v)throw"Only one Application can be opened at a time";v=this,i.call(this),this.options=new n(this,t),this.display=null,this.init=e||null,this.pluginLoad=null,_={},g=[],l=this._tick.bind(this),s._plugins.forEach((function(t){t.setup.call(v)})),this.options.init(),this.name=this.options.name,setTimeout(this._preInit.bind(this),0)};s.version="1.0.3";var a=i.prototype,o=i.extend(s);s._plugins=[];var h=0,l=null,u=!1,c=!0,d=-1,p=!1,f=0,g=null,_=null,v=null;Object.defineProperty(s,"instance",{get:function(){return v}}),o._preInit=function(){if(!this.destroyed){var t=this.options;p=t.raf,t.on("raf",(function(t){p=t})),t.on("fps",(function(t){"number"==typeof t&&(f=1e3/t|0)})),t.canvasId&&t.display&&this.addDisplay(t.canvasId,t.display,t.displayOptions);var e=[];s._plugins.forEach((function(t){t.preload&&e.push(t.preload.bind(v))})),this.pluginLoad=this.load(e,{complete:this._doInit.bind(this),progress:m.bind(this),autoStart:!1,startAll:!1}),this.pluginLoad.start()}};var m=function(t){this.trigger("pluginProgress",t)};o._doInit=function(){this.destroyed||(this.pluginLoad=null,this.trigger("beforeInit"),this.paused=!1,this.trigger("init"),this.init&&this.init.call(this),this.trigger("afterInit"))},Object.defineProperty(o,"enabled",{set:function(t){c=t,g.forEach((function(e){e.enabled=t}))},get:function(){return c}}),Object.defineProperty(o,"paused",{get:function(){return u},set:function(t){u=!!t,this.internalPaused(u)}}),o.internalPaused=function(t){this.trigger("pause",t),this.trigger(t?"paused":"resumed",t),t?-1!=d&&(p?cancelAnimationFrame(d):clearTimeout(d),d=-1):-1==d&&l&&(h=e.now(),d=p?requestAnimFrame(l):y(l))};var y=function(t,e){var i=f;return e&&(i=Math.max(0,f-e)),setTimeout(t,i)};o.addDisplay=function(t,e,i){if(_[t])throw"Display exists with id '"+t+"'";var n=new e(t,i);return _[t]=n,g.push(n),n.enabled=c,this.display||(this.display=n),this.trigger("displayAdded",n),n},Object.defineProperty(o,"displays",{get:function(){return g}}),o.getDisplay=function(t){return _[t]},o.removeDisplay=function(t){var e=_[t];e&&(g.splice(g.indexOf(e),1),e.destroy(),delete _[t],this.trigger("displayRemoved",t))},o._tick=function(){if(u)d=-1;else{var t=e.now(),i=t-h;if(h=t,this.trigger("update",i),g)for(var n=0;n<g.length;n++)g[n].render(i);l&&(d=p?requestAnimFrame(l):y(l,e.now()-h))}},o.setTimeout=function(t,e,i,n){return new r(t,e,!1,n,i)},o.setInterval=function(t,e,i){return new r(t,e,!0,!1,i)},o.destroy=function(){this.destroyed||(this.paused=!0,this.trigger("destroy"),s._plugins.slice().reverse().forEach((function(t){t.teardown.call(v)})),g.forEach((function(t){t.destroy()})),g=null,_=null,v=l=null,this.display=null,this.options.destroy(),this.options=null,a.destroy.call(this))},o.toString=function(){return"[Application name='"+this.name+"']"},namespace("springroll").Application=s}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("createjs.Tween",!1),i=include("createjs.Ticker",!1);new t(120).setup=function(){var t=this.options;t.add("raf",!0,!0),t.add("fps",60,!0),t.add("useQueryString",!1,!0),t.add("canvasId",null,!0),t.add("display",null,!0),t.add("displayOptions",null,!0);var n=this;t.add("updateTween",!0,!0).on("updateTween",(function(t){e&&(i&&i.setPaused(!!t),n.off("update",e.tick),t&&n.on("update",e.tick))})),t.add("name","",!0)}}(),function(t,e,i){var n=function(t,n){this._onFocus=t,this._onBlur=n,this._enabled=!1,(s||e.onfocusin!==i)&&(this._onToggle=function(){e.hidden||e.webkitHidden||e.msHidden||e.mozHidden?this._onBlur():this._onFocus()}.bind(this),this.enabled=!0)},r=extend(n),s=null;e.hidden!==i?s="visibilitychange":e.mozHidden!==i?s="mozvisibilitychange":e.msHidden!==i?s="msvisibilitychange":e.webkitHidden!==i&&(s="webkitvisibilitychange");var a=!s&&e.onfocusin!==i;Object.defineProperty(r,"enabled",{get:function(){return this._enabled},set:function(i){i=!!i,this._enabled!=i&&(this._enabled=i,t.removeEventListener("pagehide",this._onBlur),t.removeEventListener("pageshow",this._onFocus),t.removeEventListener("blur",this._onBlur),t.removeEventListener("focus",this._onFocus),t.removeEventListener("visibilitychange",this._onToggle),e.removeEventListener(s,this._onToggle,!1),a&&(e.removeEventListener("focusin",this._onFocus),e.removeEventListener("focusout",this._onBlur)),i&&(e.addEventListener(s,this._onToggle,!1),t.addEventListener("pagehide",this._onBlur),t.addEventListener("pageshow",this._onFocus),t.addEventListener("blur",this._onBlur),t.addEventListener("focus",this._onFocus),t.addEventListener("visibilitychange",this._onToggle,!1),a&&(e.addEventListener("focusin",this._onFocus),e.addEventListener("focusout",this._onBlur))))}}),r.destroy=function(){s&&this._onToggle&&(this.enabled=!1,this._onToggle=null,this._onFocus=null,this._onBlur=null)},namespace("springroll").PageVisibility=n}(window,document),function(){var t=new(include("springroll.ApplicationPlugin"));t.setup=function(){var t=include("springroll.PageVisibility"),n=this._visibility=new t(i.bind(this),e.bind(this));this.options.add("autoPause",!0).on("autoPause",(function(t){n.enabled=t})).respond("autoPause",(function(){return n.enabled})),Object.defineProperty(this,"autoPaused",{set:function(t){this.paused||this.internalPaused(t)}})};var e=function(){this.autoPaused=!0},i=function(){this.autoPaused=!1};t.teardown=function(){this._visibility&&this._visibility.destroy(),this._visibility=null}}(),function(){var t=function(){this._filters=[]},e=extend(t);e.add=function(t,e){if(!t||"string"!=typeof t&&t instanceof RegExp==0)throw"invalide replace value";if("string"!=typeof e)throw"invalid replacement value";if(this._filters){for(var i=this._filters.length-1;i>=0;i--)if(t.toString()==this._filters[i].replace.toString())throw"Filter already exists.";this._filters.push({replace:t,replacement:e})}},e.filter=function(t){if(!this._filters)return t;for(var e=this._filters.length-1;e>=0;e--){var i=this._filters[e].replace,n=this._filters[e].replacement;t=t.replace(i,n)}return t},e.destroy=function(){this._filters=null},namespace("springroll").StringFilters=t}(),function(){var t=new(include("springroll.ApplicationPlugin"))(110);t.setup=function(){var t=include("springroll.StringFilters");this.filters=new t},t.teardown=function(){this.filters&&this.filters.destroy(),this.filters=null}}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("devicePixelRatio",!1),i=new t(100),n=null,r=0,s=0,a=0,o=0,h={width:0,height:0,normalWidth:0,normalHeight:0},l=null;i.setup=function(){var t=this.options;t.add("maxWidth",0),t.add("maxHeight",0),t.add("uniformResize",!0),t.add("responsive",!1,!0),t.add("resizeElement","frame",!0),t.add("enableHiDPI",!1),t.on("maxWidth",(function(t){r=t})),t.on("maxHeight",(function(t){s=t})),this.once("displayAdded",(function(t){a=t.width,o=t.height,r||(r=a),s||(s=o)})),this.realWidth=0,this.realHeight=0,this.triggerResize=function(){if(n){h.width=0|(n.innerWidth||n.clientWidth),h.height=0|(n.innerHeight||n.clientHeight),this.calculateDisplaySize(h);var t=this.realWidth=h.width,i=this.realHeight=h.height,r=h.normalWidth,s=h.normalHeight,a=this.options.responsive,o=this.options.enableHiDPI;this.displays.forEach((function(n){a?(o&&e&&(n.canvas.style.width=t+"px",n.canvas.style.height=i+"px",t*=e,i*=e),n.resize(t,i)):(n.canvas.style.width=t+"px",n.canvas.style.height=i+"px",o&&e&&(r*=e,s*=e),n.resize(r,s))})),this.trigger("resize",a?t:r,a?i:s),this.displays.forEach((function(t){t.render(0,!0)}))}},this.onWindowResize=function(){this.triggerResize(),l=this.setTimeout(function(){this.triggerResize(),l=null}.bind(this),500)},this.calculateDisplaySize=function(t){if(o&&this.options.uniformResize){var e=r/o,i=a/s,n=a/o,h=t.width/t.height;h<i?t.height=t.width/i:h>e&&(t.width=t.height*e),h=t.width/t.height,t.normalWidth=a,t.normalHeight=o,h>n?t.normalWidth=o*h:h<n&&(t.normalHeight=a/h),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t.normalWidth=Math.ceil(t.normalWidth),t.normalHeight=Math.ceil(t.normalHeight)}},this.once("beforeInit",this.triggerResize)},i.preload=function(t){var e=this.options;e.asDOMElement("resizeElement"),e.resizeElement&&(n=e.resizeElement,this.onWindowResize=this.onWindowResize.bind(this),window.addEventListener("resize",this.onWindowResize)),t()},i.teardown=function(){l&&(l.destroy(),l=null),n&&window.removeEventListener("resize",this.onWindowResize),n=null,h.width=h.height=h.normalWidth=h.normalHeight=a=o=s=r=0}}(),function(t){var e=function(t){this._app=t,this._versions={},this._filters=[],this._globalVersion=null,this._applySpecificVersion=this._applySpecificVersion.bind(this),this._applyGlobalVersion=this._applyGlobalVersion.bind(this),this.cacheBust=!1},i=extend(e);Object.defineProperty(i,"cacheBust",{get:function(){return!(!this._globalVersion||0!==this._globalVersion.indexOf("cb="))},set:function(t){if(t)this._globalVersion="cb="+Date.now(),this.unregisterURLFilter(this._applySpecificVersion),this.registerURLFilter(this._applyGlobalVersion);else{var e=this._app.options.version;this._globalVersion=e?"v="+e:null,this._globalVersion?(this.unregisterURLFilter(this._applySpecificVersion),this.registerURLFilter(this._applyGlobalVersion)):(this.unregisterURLFilter(this._applyGlobalVersion),this.registerURLFilter(this._applySpecificVersion))}}}),i.destroy=function(){this._app=null,this._versions=null,this._filters=null,this._applySpecificVersion=null,this._applyGlobalVersion=null},i.addVersionsFile=function(t,e,i){if(this.cacheBust)e&&e();else{this.addVersion(t,Date.now().toString()),t=this._applySpecificVersion(t);var n=this;this._app.load(t,(function(t){if(t){var r,s,a=t.replace(/\r/g,"").split("\n");for(r=0,len=a.length;r<len;r++)a[r]&&(2==(s=a[r].split(" ")).length&&n.addVersion((i||"")+s[0],s[1]))}e&&e()}))}},i.addVersion=function(t,e){this._versions[t]||(this._versions[t]=e)},i.registerURLFilter=function(t){-1==this._filters.indexOf(t)&&this._filters.push(t)},i.unregisterURLFilter=function(t){var e=this._filters.indexOf(t);e>-1&&this._filters.splice(e,1)},i._applySpecificVersion=function(t){var e=this._app.options.basePath;if(e&&e.indexOf("?")>0)return t;var i=this._versions[t];return i&&!1===/(\?|\&)v\=[0-9]*/.test(t)&&(t=t+(t.indexOf("?")<0?"?":"&")+"v="+i.version),t},i._applyGlobalVersion=function(t){if(!this._globalVersion)return t;var e=this._app.options.basePath;return e&&e.indexOf("?")>0||!1===(0===this._globalVersion.indexOf("cb=")?/(\?|\&)cb\=[0-9]*/:/(\?|\&)v\=/).test(t)&&(t=t+(t.indexOf("?")<0?"?":"&")+this._globalVersion),t},i._applyBasePath=function(t){var e=this._app.options.basePath;return e&&!1===/^http(s)?\:/.test(t)&&-1==t.search(e)&&(t=e+t),t},i.prepare=function(t,e){e&&(t=this._applyBasePath(t));for(var i=0,n=this._filters.length;i<n;++i)t=this._filters[i](t);return t},namespace("springroll").CacheManager=e}(),function(){var t,e=include("springroll.Application"),i=function(e,n){if(void 0===t&&(t=include("springroll.Debug",!1)),this.status=i.WAITING,this.complete=e.complete||null,this.cache=!!e.cache,this.id=e.id||null,this.type=e.type||null,this.original=e,this.cache&&!this.id){if(n&&"string"==typeof n){var r=n.lastIndexOf(".");r>-1&&(n=n.substr(0,r));var s=n.lastIndexOf("/");s>-1&&(n=n.substr(s+1)),e.id=this.id=n}this.id||(this.cache=!1)}},n=extend(i);i.WAITING=0,i.RUNNING=1,i.FINISHED=2,n.start=function(t){t()},n.filter=function(t){var i=e.instance.assetManager.sizes;if(t&&i.test(t)){var n=i.size(this.original.sizes);t=i.filter(t,n),this.original.scale=n.scale}return t},n.load=function(t,i){return e.instance.load(t,i)},n.simpleLoad=function(t,i,n,r){return e.instance.loader.load(t,i,n,r)},n.destroy=function(){this.status=i.FINISHED,this.id=null,this.type=null,this.complete=null,this.original=null},namespace("springroll").Task=i}(),function(){var t=include("springroll.Task"),e=function(e){t.call(this,e),this.async=e.async},i=t.extend(e);e.test=function(t){return!!t.async},i.start=function(t){this.async(t)},i.destroy=function(){t.prototype.destroy.call(this),this.async=null},namespace("springroll").FunctionTask=e}(),function(){var t=include("springroll.Task"),e=function(e){t.call(this,e,e.color),this.color=this.filter(e.color),this.alpha=this.filter(e.alpha)},i=t.extend(e);e.test=function(t){return!!t.color&&!!t.alpha},i.start=function(t){this.load({_alpha:this.alpha,_color:this.color},(function(i){t(e.mergeAlpha(i._color,i._alpha)),i._color.src=i._alpha.src=""}))},e.mergeAlpha=function(t,e,i){i||(i=document.createElement("canvas")),i.width=Math.max(e.width,t.width),i.height=Math.max(e.height,t.height);var n=i.getContext("2d");return n.save(),n.drawImage(t,0,0),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),n.restore(),i},namespace("springroll").ColorAlphaTask=e}(),function(){var t=include("springroll.Task"),e=function(e){t.call(this,e),this.assets=e.assets,this.cacheAll=e.cacheAll,this.progress=e.progress},i=t.extend(e);e.test=function(t){return!!t.assets&&(Array.isArray(t.assets)||Object.isPlain(t.assets))},i.start=function(t){this.load(this.assets,{complete:t,progress:this.progress,cacheAll:this.cacheAll})},i.destroy=function(){t.prototype.destroy.call(this),this.assets=null},namespace("springroll").ListTask=e}(),function(){var t=include("springroll.Task"),e=function(e){t.call(this,e,e.src),this.src=this.filter(e.src),this.progress=e.progress||null,this.data=e.data||null,this.advanced=!!e.advanced},i=t.extend(e);e.test=function(t){return!!t.src},i.start=function(t){var e=this.advanced;this.simpleLoad(this.src,(function(i){var n=i;n&&!e&&(n=i.content,i.destroy()),t(n)}),this.progress,this.data)},i.destroy=function(){t.prototype.destroy.call(this),this.data=null,this.progress=null},namespace("springroll").LoadTask=e}(),function(t){var e,i=include("createjs.LoadQueue"),n=include("createjs.Sound",!1),r=function(){i.call(this,!0),void 0===e&&(e=include("springroll.Debug",!1)),this.retries=0,this.url=null,this.preparedUrl=null,this.data=null,this.onComplete=null,this.onProgress=null,this._onFailed=this._onFailed.bind(this),this._onProgress=this._onProgress.bind(this),this._onCompleted=this._onCompleted.bind(this),n&&this.installPlugin(n)},s=extend(r,i);r.MAX_RETRIES=3,s.toString=function(){return"[LoaderItem(url:'"+this.url+"')]"},Object.defineProperty(s,"basePath",{set:function(t){this._basePath=t}}),Object.defineProperty(s,"crossOrigin",{set:function(t){this._crossOrigin=t}}),s.clear=function(){this.basePath="",this.crossOrigin=!1,this.retries=0,this.onComplete=null,this.onProgress=null,this.data=null,this.preparedUrl=null,this.url=null,this.removeAllEventListeners(),this.removeAll(),this.close()},s.start=function(t){this.addEventListener("fileload",this._onCompleted),this.addEventListener("error",this._onFailed),this.addEventListener("fileprogress",this._onProgress),this._internalStart()},s._internalStart=function(){var t=this.preparedUrl;this.data&&this.data.id&&(t={id:this.data.id,src:t,data:this.data}),this.loadFile(t)},s._onProgress=function(t){this.onProgress&&this.onProgress(this.progress)},s._onFailed=function(t){this.removeAll(),this.retry()},s.retry=function(){this.retries++,this.retries>r.MAX_RETRIES?this.onComplete(this,null):this._internalStart()},s._onCompleted=function(t){this.onComplete(this,t.result)},namespace("springroll").LoaderItem=r}(),function(){var t=function(t,e,i){this.content=t,this.url=e,this.data=i,this.id=null},e=extend(t);e.toString=function(){return"[LoaderResult(url: '"+this.url+"')]"},e.reset=function(){this.content=this.url=this.data=this.id=null},e.destroy=function(){this.reset()},namespace("springroll").LoaderResult=t}(),function(t){var e=include("springroll.LoaderItem"),i=include("springroll.CacheManager"),n=include("springroll.LoaderResult"),r=function(t){this.app=t,this.maxCurrentLoads=2,this.cacheManager=new i(t),this.items={},this.itemPool=[]},s=extend(r);s.destroy=function(){this.itemPool&&this.itemPool.forEach((function(t){t.clear()})),this.itemPool=null,this.cacheManager&&this.cacheManager.destroy(),this.cacheManager=null,this.items=null},s.load=function(t,e,i,n){var r=this.app.options,s=this._getItem(),a=r.basePath;return void 0!==a&&!1===/^http(s)?\:/.test(t)&&-1==t.search(a)&&(s.basePath=a),s.crossOrigin=r.crossOrigin,s.url=t,s.preparedUrl=this.cacheManager.prepare(t),s.onComplete=this._onComplete.bind(this,e),s.onProgress=i||null,s.data=n||null,s.setMaxConnections(this.maxCurrentLoads),this.items[t]=s,s.start(),s},s._onComplete=function(t,e,i){i&&(i=new n(i,e.url,e.data)),t(i),this._putItem(e)},s.cancel=function(t){var e=this.items[t];return!!e&&(e.clear(),this._putItem(e),!0)},s._getItem=function(){var t=this.itemPool;return t.length?t.pop():new e},s._putItem=function(t){delete this.items[t.url],t.clear(),this.itemPool.push(t)},namespace("springroll").Loader=r}(),function(t){function e(t){t&&(t.destroy&&t.destroy(),"IMG"==t.tagName&&(t.src=""))}var i,n=function(){void 0===i&&(i=include("springroll.Debug",!1)),this._cache={}},r=extend(n);r.read=function(t){return this._cache[t]||null},r.write=function(t,e){this._cache[t]&&this.delete(t),this._cache[t]=e},r.delete=function(t){var i="string"==typeof t?t:t.id;if(i){var n=this._cache[i];if(n){if(Object.isPlain(n))for(var r in n)e(n[r]);else Array.isArray(n)?n.forEach(e):e(n);delete this._cache[i]}}},r.empty=function(){for(var t in this._cache)this.delete(t)},r.destroy=function(){this.empty(),this._cache=null},namespace("springroll").AssetCache=n}(),function(){var t,e=include("devicePixelRatio",!1)||1,i=function(){void 0===t&&(t=include("springroll.Debug",!1)),this._sizes=[],this._sizesMap={},this._preferredSize=null},n=extend(i);i.SIZE_TOKEN="%SIZE%",n.reset=function(){this._sizes.length=0,this._sizesMap={}},n.define=function(t,e,i,n){var r={id:t,maxSize:e,scale:i,fallback:n};this._sizesMap[t]=r,this._sizes.push(r),this._sizes.sort((function(t,e){return t.maxSize-e.maxSize}))},n.filter=function(t,e){return e=e||this._preferredSize,t.replace(i.SIZE_TOKEN,e.id)},n.test=function(t){return t.indexOf(i.SIZE_TOKEN)>-1},n.size=function(t){var e=this._preferredSize,i=e.fallback;if(t&&!t[e.id])for(var n=0,r=i.length;n<r;n++){var s=i[n];if(!1!==t[s]){e=this._sizesMap[s];break}}if(!e)throw"Asset does not support any valid size";return e},n.refresh=function(t,i){for(var n=Math.min(t,i),r=null,s=this._sizes,a=s.length-1;a>=0&&s[a].maxSize/e>n;--a)r=s[a];this._preferredSize=r},n.destroy=function(){this._preferredSize=null,this._sizes=null,this._sizesMap=null},namespace("springroll").AssetSizes=i}(),function(t){function e(t){return function(t){return"string"==typeof t}(t)?{src:t}:function(t){return"function"==typeof t}(t)?{async:t}:t}var i=include("springroll.Task"),n=include("springroll.EventDispatcher"),r=function(t){n.call(this),this.manager=t,this.mode=a,this.startAll=!0,this.cacheAll=!1,this.tasks=[],this.results=null,this.running=!1,this.numLoaded=0,this.total=0,this.type=null},s=n.extend(r);s.setup=function(t,e){this.startAll=e.startAll,this.cacheAll=e.cacheAll,this.type=e.type,this.mode=this.addTasks(t),this.results=o(this.mode),e.autoStart&&this.start()},s.start=function(){this.trigger("progress",0),this.running=!0,this.nextTask()},s.reset=function(){this.tasks.forEach((function(t){t.status=i.FINISHED,t.destroy()})),this.total=0,this.numLoaded=0,this.mode=a,this.tasks.length=0,this.results=null,this.type=null,this.startAll=!0,this.cacheAll=!1,this.running=!1};var a=1;s.addTasks=function(i){var n,r,s=a;if((i=e(i)).type===t&&this.type&&(i.type=this.type),this.getTaskByAsset(i))return this.addTask(i),0;if(i.type===this.type&&this.type&&delete i.type,Array.isArray(i))for(var o=0;o<i.length;o++)n=e(i[o]),(r=this.addTask(n)).id||(s=2);else if(Object.isPlain(i))for(var h in i)n=e(i[h]),(r=this.addTask(n)).id||(r.id=h);return s},s.addTask=function(e){e.type===t&&this.type&&(e.type=this.type);var i,n=this.getTaskByAsset(e);return n&&(e.cache===t&&this.cacheAll&&(e.cache=!0),i=new n(e),this.tasks.push(i),++this.total),i},s.getTaskByAsset=function(t){for(var e,i=this.manager.taskDefs,n=0,r=i.length;n<r;n++)if((e=i[n]).test(t))return e;return null},s.nextTask=function(){for(var t=this.tasks,e=0;e<t.length;e++){var n=t[e];if(n.status===i.WAITING&&(n.status=i.RUNNING,n.start(this.taskDone.bind(this,n)),!this.startAll))return}},s.taskDone=function(t,e){if(this.running){e=e||null;var i=this.tasks.indexOf(t);if(-1!==i){this.tasks.splice(i,1);var n=[];if(e){switch(this.mode){case 0:this.results=e;break;case 2:this.results.push(e);break;case a:this.results[t.id]=e}t.cache&&this.manager.cache.write(t.id,e)}t.complete&&t.complete(e,t.original,n),this.trigger("taskDone",e,t.original,n),t.destroy();var r=this.addTasks(n);if(this.trigger("progress",++this.numLoaded/this.total),this.mode===a&&r!==this.mode)throw"Assets require IDs";this.tasks.length?this.nextTask():this.trigger("complete",this.results)}}};var o=function(t){switch(t){case 0:return null;case 2:return[];case a:return{}}};s.destroy=function(){n.prototype.destroy.call(this),this.reset(),this.tasks=null,this.manager=null},namespace("springroll").AssetLoad=r}(),function(t){var e=include("springroll.AssetLoad"),i=include("springroll.AssetCache"),n=include("springroll.AssetSizes"),r=(include("springroll.Task"),function(){this.loads=[],this.loadPool=[],this.taskDefs=[],this.cache=new i,this.sizes=new n,this.defaultType=null,this.sizes.define("half",400,.5,["full"]),this.sizes.define("full",1e4,1,["half"])}),s=extend(r);s.register=function(t,e){"string"==typeof t&&(t=include(t,!1)),t&&(t.priority=e||0,this.taskDefs.push(t),this.taskDefs.sort((function(t,e){return e.priority-t.priority})))},s.load=function(t,e){e=Object.merge({complete:null,progress:null,taskDone:null,cacheAll:!1,startAll:!0,autoStart:!0,type:this.defaultType},e);var i=this.getLoad();return this.loads.push(i),e.complete=this._onLoaded.bind(this,e.complete,i),i.once("complete",e.complete),e.progress&&i.on("progress",e.progress),e.taskDone&&i.on("taskDone",e.taskDone),i.setup(t,e),i},s.poolLoad=function(t){t.off("complete progress taskDone"),t.reset(),this.loadPool.push(t)},s.getLoad=function(){return this.loadPool.length>0?this.loadPool.pop():new e(this)},s._onLoaded=function(t,e,i){var n=this.loads.indexOf(e);n>-1&&this.loads.splice(n,1),t&&t(i),this.poolLoad(e)},s.destroy=function(){this.sizes.destroy(),this.sizes=null,this.cache.destroy(),this.cache=null,this.loadPool=null,this.loads=null,this.taskDefs=null},namespace("springroll").AssetManager=r}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("springroll.Loader"),i=include("springroll.AssetManager"),n=new t(100);n.setup=function(){var t=this.loader=new e(this),n=this.assetManager=new i;n.register("springroll.LoadTask"),n.register("springroll.ListTask"),n.register("springroll.FunctionTask",10),n.register("springroll.ColorAlphaTask",20);var r=this.options;r.add("cacheBust",!1).respond("cacheBust",(function(){return t.cacheManager.cacheBust})).on("cacheBust",(function(e){t.cacheManager.cacheBust="true"==e||!!e})),r.add("basePath"),r.add("version",null,!0),r.add("versionsFile",null,!0),r.add("defaultAssetType").on("defaultAssetType",(function(t){n.defaultType=t})),this.load=function(t,e,i,r,s){var a;return"string"==typeof t?t={src:t,progress:i||null,complete:e||null,cache:!!r,data:s||null}:(a=e,"function"==typeof e&&(a={complete:e})),n.load(t,a)},this.unload=function(t){"string"==typeof t&&(t=Array.prototype.slice.call(arguments));for(var e=0;e<t.length;e++)n.cache.delete(t[e])},this.unloadAll=function(){n.cache.empty()},this.getCache=function(t){return n.cache.read(t)},this.on("resize",(function(){n.sizes.refresh(this.realWidth,this.realHeight)})),this.once("beforeInit",(function(){this.display&&n.sizes.refresh(this.realWidth,this.realHeight)}))},n.preload=function(t){this.triggerResize();var e=this.options.versionsFile;e?this.loader.cacheManager.addVersionsFile(e,t):t()},n.teardown=function(){this.loader&&(this.loader.destroy(),this.loader=null),this.assetManager&&(this.assetManager.destroy(),this.assetManager=null)}}(),function(){var t=new(include("springroll.ApplicationPlugin"))(80);t.setup=function(){include("springroll.Debug",!1);var t=this.options;t.add("configPath",null,!0),t.add("preload",[],!0),this.config=null,this._assetLoad=null,this._numLoaded=0,this._total=0,this._progress=-1,this.on("pluginProgress",e.bind(this))},t.preload=function(t){var s=[],a=this.options.configPath;a?s.push({id:"config",src:a,cache:!1,complete:n.bind(this)}):i(this,s);var o=r.bind(this,t);s.length?this._assetLoad=this.load(s,{complete:o,progress:e.bind(this),cacheAll:!0}):o()};var e=function(){this._assetLoad&&(this._numLoaded=this._assetLoad.numLoaded,this._total=this._assetLoad.total);var t=(this._numLoaded+this.pluginLoad.numLoaded)/(this._total+this.pluginLoad.total);t>this._progress&&(this._progress=t,this.trigger("progress",t))},i=function(t,e){e.append(t.options.preload),t.trigger("loading",e)},n=function(t,e,n){this.config=t,this.trigger("configLoaded",t,n),i(this,n)},r=function(t,e){this._assetLoad=null,this.trigger("loaded",e),t()};t.teardown=function(){this.config=null}}(),function(t){var e=include("springroll.EventDispatcher"),i=function(t,i){e.call(this),i=i||{},this.canvas=document.getElementById(t),this.id=t,this.width=this.canvas.width,this.height=this.canvas.height,this.stage=null,this.paused=!1,this._enabled=!1,this._visible="none"!=this.canvas.style.display,this.adapter=null},n=e.extend(i);Object.defineProperty(n,"enabled",{get:function(){return this._enabled},set:function(t){var e=this._enabled;this._enabled=t,e!=t&&(this.trigger(t?"enabled":"disabled"),this.trigger("enable",t))}}),Object.defineProperty(n,"visible",{get:function(){return this._visible},set:function(t){var e=this._visible;this._visible=t,this.canvas.style.display=t?"block":"none",e!=t&&(this.trigger(t?"visible":"hidden"),this.trigger("visibility",t))}}),n.resize=function(t,e){this.width=this.canvas.width=t,this.height=this.canvas.height=e},n.render=function(t,e){},n.destroy=function(){this.enabled=!1,this.adapter=null,this.stage=null,this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.canvas.onmousedown=null,this.canvas=null},namespace("springroll").AbstractDisplay=i}(),function(){var t=include("springroll.Application"),e=include("springroll.Loader"),i=include("springroll.PropertyDispatcher"),n=include("springroll.EventDispatcher");t.prototype.getDisplays=function(t){return"function"==typeof t&&_displays.forEach(t),_displays},n.mixIn=function(t,e){return mixin(t,n)},Object.defineProperty(e,"instance",{get:function(){return t.instance.loader}}),i.prototype.readOnly=function(t){for(var e,i,n=0;n<arguments.length;n++){if(i=arguments[n],void 0===(e=this._properties[i]))throw"Property "+i+" does not exist";e.readOnly=!0}return this}}()}(),function(){"use strict";var t,e,i;t=include("springroll.SavedData"),e=function(t){this.container=t,this.id=""},(i=extend(e)).read=function(e,i){if(!this.container.supported)return i(t.read(this.id+e));this.container.fetch("userDataRead",(function(t){i(t.data)}),this.id+e,!0)},i.write=function(e,i,n){if(!this.container.supported)return t.write(this.id+e,i),void(n&&n());this.container.fetch("userDataWrite",(function(t){n&&n()}),{name:this.id+e,value:i},!0)},i.remove=function(e,i){if(!this.container.supported)return t.remove(this.id+e),void(i&&i());this.container.fetch("userDataRemove",(function(t){i&&i()}),this.id+e,!0)},i.destroy=function(){this.id=null,this.container=null},namespace("springroll").UserData=e,function(t){var e=include("springroll.ApplicationPlugin"),i=include("springroll.PageVisibility"),n=include("springroll.UserData"),r=include("Bellhop"),s=new e(200);s.setup=function(){var t=this.options,e=this.container=new r;e.connect(),this.userData=new n(e),t.add("keepFocus",!1).on("keepFocus",(function(t){e.send("keepFocus",t)})),this.on("progress",(function(t){this.container.send("progress",t)})),this.once("beforeInit",(function(){e.send("loaded")})),e.send("loading"),this.singlePlay=!1,this.playOptions={},this.singlePlayEnd=function(){return!!this.singlePlay&&(this.endGame(),!0)},this.endGame=function(t){this.trigger("endGame",t||"game_completed"),this.destroy()},this.once("beforeInit",(function(){var t=!!this.sound;this.container.send("features",{sound:t,hints:!!this.hints,music:t&&this.sound.contextExists("music"),vo:t&&this.sound.contextExists("vo"),sfx:t&&this.sound.contextExists("sfx"),captions:!!this.captions,disablePause:!!this.options.disablePause})})),e.supported&&(e.fetch("singlePlay",f.bind(this)),e.fetch("playOptions",p.bind(this))),window.onerror=o.bind(this),window.onunload=window.onbeforeunload=a.bind(this)};var a=function(){return window.onunload=window.onbeforeunload=null,void this.endGame("left_site")},o=function(t){if(this.container.supported)return this.container.send("localError",String(t)),!0};s.preload=function(t){if(!this.name)throw"Application name is empty";if(this.userData.id=this.name,this.container.supported){this.container.on({soundMuted:l.bind(this),captionsMuted:u.bind(this),musicMuted:c.bind(this,"music"),voMuted:c.bind(this,"vo"),sfxMuted:c.bind(this,"sfx"),captionsStyles:d.bind(this),pause:h.bind(this),close:g.bind(this)}),this.options.autoPause=!1;var e=this.container;this._pageVisibility=new i(e.send.bind(e,"focus",!0),e.send.bind(e,"focus",!1))}t()};var h=function(t){var e=!!t.data;this.autoPaused=e,this.enabled=!e},l=function(t){this.sound&&(this.sound.muteAll=!!t.data)},u=function(t){this.captions&&(this.captions.mute=!!t.data)},c=function(t,e){this.sound&&this.sound.setContextMute(t,!!e.data)},d=function(t){var e=t.data,i=(this.captions||{}).textField||null;i&&i.nodeName&&(i.className="size-"+e.size+" bg-"+e.background+" color-"+e.color+" edge-"+e.edge+" font-"+e.font+" align-"+e.align)},p=function(t){Object.merge(this.playOptions,t.data||{})},f=function(t){this.singlePlay=!!t.data},g=function(){this.endGame("closed_container")};s.teardown=function(){window.onerror=null,this._pageVisibility&&(this._pageVisibility.destroy(),this._pageVisibility=null),this.userData&&(this.userData.destroy(),this.userData=null),this.container&&(this.container.send("endGame"),this.container.destroy(),this.container=null)}}()}(),function(){"use strict";var t,e;t=function(){this.onComplete=null,this.onCancelled=null,this.eventList=null,this.listIndex=-1,this.instance=null,this.isLooping=!1,this.useCaptions=!1,this._paused=!1,this.duration=0,this.speed=1,this.soundAlias=null,this.soundInst=null,this.playSound=!1,this.soundStart=0,this.soundEnd=0,this.complete=!1,this._position=0,this.isTimer=!1},(e=extend(t)).reset=function(){return this.instance&&(this.instance.destroy(),this.instance=null),this.complete=!1,this.soundEnd=0,this.soundStart=0,this.playSound=!1,this.soundInst=null,this.soundAlias=null,this.speed=1,this._position=0,this.duration=0,this._paused=!1,this.useCaptions=!1,this.isLooping=!1,this.isTimer=!1,this.listIndex=-1,this.eventList=null,this.onCancelled=null,this.onComplete=null,this},Object.defineProperty(e,"position",{get:function(){return this._position},set:function(t){this._position=t,this.isTimer||this.instance.setPosition(t)}}),e._nextItem=function(){var t=!1;if(this.soundInst&&(this.soundInst._endCallback=null),this.isLooping){var e=this.soundInst;e&&(e.stop(),this.soundInst=null),t=!0}else if(this.isTimer||this.instance.endAnim(),this.soundEnd=this.soundStart=0,this.isLooping=this.playSound=this.useCaptions=!1,this.soundInst=this.soundAlias=null,++this.listIndex>=this.eventList.length)return void(this.complete=!0);var i=this.eventList[this.listIndex];switch(typeof i){case"object":this.isTimer=!1;var n=this.instance;n.beginAnim(i,t),this.duration=n.duration,this.speed=i.speed,this.isLooping=n.isLooping||i.loop,this._position=n.position,i.alias&&(this.soundAlias=i.alias,this.soundStart=i.audioStart,this.playSound=!0,this.useCaptions=i.useCaptions);break;case"number":this.isTimer=!0,this.duration=i,this._position=0;break;case"function":i(),this._nextItem()}},Object.defineProperty(e,"time",{get:function(){return 1e3*this.position},set:function(t){this.position=.001*t}}),Object.defineProperty(e,"paused",{get:function(){return this._paused},set:function(t){if(t!=this._paused){this._paused=!!t;var e=this.soundInst;e&&(this.paused?e.pause():e.resume())}}}),namespace("springroll").AnimatorTimeline=t,function(t){function e(t){return"string"==typeof t}function i(t){return"number"==typeof t}function n(t){return"function"==typeof t}var r,s,a,o,h,l,u,c=include("springroll.AnimatorTimeline"),d=function(t){this.debug=!1,this.captions=null,u=t,a=[],r=[];try{"function"==typeof(s=new Map([])).delete&&"function"==typeof s.has&&"function"==typeof s.set&&"function"==typeof s.get||(s=null)}catch(t){}l=[],o=!1,h=!1,this._update=this._update.bind(this),include("springroll.Debug",!1)},p=extend(d);p.register=function(t,e){var i=include(t,!1);i&&(i.priority=e,a.push(i),a.sort((function(t,e){return e.priority-t.priority})))},p.play=function(t,e,i,n){!0===n&&(n=i),Array.isArray(e)||(e=[e]),this.stop(t);var a=this._makeTimeline(t,e,i,n);return a.eventList&&a.eventList.length>=1?(a._nextItem(),o||this._startUpdate(),s&&s.set(t,a),r.push(a),o=!0,a):(l.push(a.reset()),i&&i(),null)},p._makeTimeline=function(t,r,s,a){var o=l.length?l.pop():new c,h=f(t);if(!h)return o;var d=h.create(t);if(!d)return o;o.instance=d,o.eventList=[],o.onComplete=s,o.onCancelled=a,o.speed=void 0;for(var p,g,_,v=0,m=r.length;v<m;++v){var y=r[v];if(e(y)){if(!h.hasAnimation(t,y))continue;o.eventList.push({anim:y,audio:null,start:0,speed:1})}else if("object"==typeof y){if(!h.hasAnimation(t,y.anim))continue;var b={anim:y.anim,start:i(y.start)?.001*y.start:0,speed:y.speed>0?y.speed:1,loop:y.loop};(p=y.audio)&&u.sound&&(e(p)?(g=0,_=p):(g=p.start>0?.001*p.start:0,_=p.alias),u.sound.isSupported&&!u.sound.systemMuted&&u.sound.exists(_)&&(u.sound.preload(_),b.alias=_,b.audioStart=g,b.useCaptions=this.captions&&this.captions.hasCaption(_))),o.eventList.push(b)}else i(y)?o.eventList.push(.001*y):n(y)&&o.eventList.push(y)}return o},p.canAnimate=function(t){return!!t&&!!f(t)};var f=function(t){for(var e,i=0,n=a.length;i<n;i++)if((e=a[i]).test(t))return e;return null};p.hasAnimation=function(t,e){var i=f(t);return!!i&&i.hasAnimation(t,e)},p.getDuration=function(t,e){var i=f(t);if(!i)return 0;if(!Array.isArray(e))return i.getDuration(t,e.anim||e);for(var n=0,r=0;r<e.length;++r){var s=e[r];"number"==typeof s?n+=s:"string"==typeof s?n+=i.getDuration(t,s):"object"==typeof s&&s.anim&&(n+=i.getDuration(t,s.anim))}return n},p.stop=function(t,e){var i=g(t);i&&(e&&(i.onComplete=i.onCancelled=null),this._remove(i,!0))},p.stopAll=function(t,e){if(o)for(var i,n=r.length-1;n>=0;--n)i=r[n],t&&!t.contains(i.instance.clip)||(e&&(i.onComplete=i.onCancelled=null),this._remove(i,!0))},p._remove=function(t,e){var i=r.indexOf(t);if(!(i<0)){var n=t.onComplete,a=t.onCancelled;e&&t.soundInst&&t.soundInst.stop(),s&&s.delete(t.instance.clip),i==r.length-1?r.pop():r.splice(i,1),o=r.length>0,t.useCaptions&&this.captions.stop(),l.push(t.reset()),o||this._stopUpdate(),e?a&&a():n&&n()}},p.pause=function(){if(!h){h=!0;for(var t=r.length-1;t>=0;--t)r[t].paused=!0;this._stopUpdate()}},p.resume=function(){if(h){h=!1;for(var t=r.length-1;t>=0;--t)r[t].paused=!1;o&&this._startUpdate()}},p.pauseInGroup=function(t,e){if(o&&e)for(var i=r.length-1;i>=0;--i)e.contains(r[i].instance.clip)&&(r[i].paused=t)},p.getTimeline=function(t){return o?g(t):null};var g=function(t){if(s)return s.has(t)?s.get(t):null;for(var e=r.length-1;e>=0;--e)if(r[e].instance.clip===t)return r[e];return null};Object.defineProperty(p,"paused",{get:function(){return h}}),p._startUpdate=function(){u.on("update",this._update)},p._stopUpdate=function(){u.off("update",this._update)},p._update=function(t){for(var e,i,n,s=.001*t,a=r.length-1;a>=0;--a){if(!(e=r[a]))return;if(e.instance,!e.paused){if(n=0,e.soundInst?e.soundInst.isValid?((i=.001*e.soundInst.position)<0&&(i=0),n=e.soundStart+i,e.useCaptions&&this.captions.seek(e.soundInst.position)):n=e.duration:n=e.position+s*e.speed,n>=e.duration){for(;n>=e.duration;){if(n-=e.duration,e.isLooping){if(!e.duration){e.complete=!0;break}e.onComplete&&e.onComplete()}if(e._nextItem(),e.complete)break}if(e.complete){this._remove(e);continue}}e.playSound&&n>=e.soundStart?(e.position=e.soundStart,e.playSound=!1,e.soundInst=u.sound.play(e.soundAlias,this._onSoundDone.bind(this,e,e.listIndex,e.soundAlias),_.bind(null,e,e.listIndex)),e.useCaptions&&this.captions.play(e.soundAlias)):e.position=n}}};var _=function(t,e){t.listIndex==e&&(t.soundEnd=t.soundStart+.001*t.soundInst.length)};p._onSoundDone=function(t,e,i){this.captions&&this.captions.currentAlias==i&&this.captions.stop(),t.listIndex==e&&(t.soundEnd>t.position&&(t.position=t.soundEnd),t.soundInst=null)},p.destroy=function(){this.stopAll(null,!0),this.captions=null,u=null,r=null,l=null,s=null,a=null},namespace("springroll").Animator=d}(),function(t){var e=(include("springroll.Application"),function(){this.clip=null,this.position=0,this.duration=0,this.isLooping=!1,this.currentName=null}),i=extend(e);i.init=function(t){this.clip=t},i.beginAnim=function(t,e){},i.endAnim=function(){},i.setPosition=function(t){},e.test=function(t){return!1},e.hasAnimation=function(t,e){return!1},e.getDuration=function(t,e){return 0},e.extend=function(t,i){return t._pool=[],t.create=function(e){var i=t._pool.length>0?t._pool.pop():new t;return i.init(e),i},t.pool=function(e){e.destroy(),t._pool.push(e)},extend(t,i||e)},i.destroy=function(){this.clip=null},namespace("springroll").AnimatorInstance=e}(),function(t){var e=include("springroll.Application"),i=include("springroll.AnimatorInstance"),n=function(){i.call(this),this.startTime=0,this.length=0,this.firstFrame=-1,this.lastFrame=-1},r=i.extend(n);r.init=function(t){t.framerate||(t.framerate=e.instance.options.fps||15),t.tickEnabled=!1,this.clip=t,this.isLooping=!1,this.currentName=null,this.position=this.duration=0,this.lastFrame=t.currentFrame},r.beginAnim=function(t,e){var i,n=this.currentName=t.anim,r=-1,s=-1,a=!1;if("*"!=n||this.clip.timeline.resolve(n))for(var o=this.clip.getLabels(),h=n+"_stop",l=n+"_loop",u=0,c=o.length;u<c;++u)if((i=o[u]).label==n)r=i.position;else{if(i.label==h){s=i.position;break}if(i.label==l){s=i.position,a=!0;break}}else r=0,s=this.clip.timeline.duration-1,a=!!t.loop;this.firstFrame=r,this.lastFrame=s,this.length=s-r,this.isLooping=a;var d=this.clip.framerate;if(this.startTime=this.firstFrame/d,this.duration=this.length/d,e)this.position=0;else{var p=t.start||0;this.position=p<0?Math.random()*this.duration:p}this.clip.play(),this.clip.elapsedTime=this.startTime+this.position,this.clip.advance()},r.endAnim=function(){this.clip.gotoAndStop(this.lastFrame)},r.setPosition=function(t){this.position=t,this.clip.elapsedTime=this.startTime+t,this.clip.advance()},n.test=function(e){return e.framerate!==t&&e.getLabels!==t&&e.elapsedTime!==t&&e.gotoAndStop!==t&&e.gotoAndPlay!==t&&e.stop!==t&&e.play!==t},n.hasAnimation=function(t,e){if("*"==e&&!t.timeline.resolve(e))return!0;for(var i,n=t.getLabels(),r=-1,s=-1,a=e+"_stop",o=e+"_loop",h=0,l=n.length;h<l;++h)if((i=n[h]).label==e)r=i.position;else if(i.label==a||i.label==o){s=i.position;break}return r>=0&&s>0},n.getDuration=function(t,i){if(t.framerate||(t.framerate=e.instance.options.fps||15),"*"==i&&!t.timeline.resolve(i))return t.timeline.duration/t.framerate*1e3;for(var n,r=t.getLabels(),s=-1,a=-1,o=i+"_stop",h=i+"_loop",l=0,u=r.length;l<u;++l)if((n=r[l]).label==i)s=n.position;else if(n.label==o||n.label==h){a=n.position;break}return s>=0&&a>0?(a-s)/t.framerate*1e3:0},r.destroy=function(){this.clip=null},namespace("springroll").GenericMovieClipInstance=n}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("springroll.Animator"),i=new t(50);i.setup=function(){this.animator=new e(this),this.animator.captions=this.captions||null,this.animator.register("springroll.GenericMovieClipInstance",0)},i.teardown=function(){this.animator&&(this.animator.destroy(),this.animator=null)}}()}(),function(){"use strict";var t;!function(t){var e,i=include("springroll.EventDispatcher"),n=function(t,n){i.call(this),e||(e=include("springroll.Application"),include("springroll.Debug",!1)),n=Object.merge({next:null,previous:null,delayLoad:0,preload:[],scaling:null},n||{});var r=this.app=e.instance;this.voPlayer=r.voPlayer||null,this.sound=r.sound||null,this.config=r.config||null,this.scaling=r.scaling||null,this.scalingItems=n.scaling||null,this.stateId=null,this.manager=null,this.panel=t,this.preload=n.preload,this.preloaded=!1,this.assets=null,this._destroyed=!1,this._active=!1,this._isLoading=!1,this._canceled=!1,this._onEnterProceed=null,this._onLoadingComplete=null,this._enabled=!1,this._nextState=n.next,this._prevState=n.previous,this.delayLoad=n.delayLoad,this.panel.visible=!1},r=i.prototype,s=i.extend(n),a=function(){};s.exit=a,s.exitStart=a,s.cancel=a,s.enter=a,s.enterDone=a,s.nextState=function(){var t=typeof this._nextState;this._nextState&&("function"===t?this._nextState():"string"===t&&(this.manager.state=this._nextState))},s.previousState=function(){var t=typeof this._prevState;this._prevState&&("function"===t?this._prevState():"string"===t&&(this.manager.state=this._prevState))},s.loadingStart=function(){this._isLoading||(this._isLoading=!0,this.manager.loadingStart(),this._onLoadingComplete=this._onEnterProceed,this._onEnterProceed=null)},s.loadingDone=function(t){if(void 0===t&&(t=this.delayLoad),this._isLoading){if(t&&"number"==typeof t)return this.panel.visible=!0,void this.app.setTimeout(this.loadingDone.bind(this,0),t,!0);this._isLoading=!1,this.manager.loadingDone(),this._onLoadingComplete&&(this._onLoadingComplete(),this._onLoadingComplete=null)}},Object.defineProperty(s,"canceled",{get:function(){return this._canceled}}),Object.defineProperty(s,"active",{get:function(){return this._active}}),Object.defineProperty(s,"enabled",{get:function(){return this._enabled},set:function(t){var e=this._enabled;this._enabled=t,e!=t&&this.trigger("enabled",t)}}),Object.defineProperty(s,"destroyed",{get:function(){return this._destroyed}}),s._internalExit=function(){this.preloaded=!1;var t=this.panel,e=this.scalingItems,i=this.scaling;i&&e&&("panel"==e?i.removeItem(t):i.removeItems(t,e)),this.preload.length&&this.app.unload(this.preload),this._isTransitioning&&(this._isTransitioning=!1,this.manager.animator&&this.manager.animator.stop(t)),this._enabled=!1,t.visible=!1,this._active=!1,this.exit(),this.trigger("exit")},s._internalEntering=function(){this.enter(),this.trigger("enter"),this.loadingStart(),this.preloaded=!1;var t=[];this.trigger("loading",t),this.preload.length&&(t=this.preload.concat(t)),t.length?this.app.load(t,{complete:this._onLoaded.bind(this),progress:o.bind(this),cacheAll:!0}):this._onLoaded(null)};var o=function(t){this.trigger("progress",t),this.manager.trigger("progress",t)};s._onLoaded=function(t){if(this.assets=t,this.preloaded=!0,this.trigger("loaded",t),this.scaling){var e=this.scalingItems;e&&("panel"==e?(this.panel.x=this.panel.y=0,this.panel.scaleX=this.panel.scaleY=1,this.scaling.addItem(this.panel,{align:"top-left",titleSafe:!0})):this.scaling.addItems(this.panel,e))}this.loadingDone()},s._internalExitStart=function(){this.exitStart(),this.trigger("exitStart")},s._internalEnter=function(t){this._isTransitioning&&(this._isTransitioning=!1,this.manager.animator&&this.manager.animator.stop(this.panel)),this._enabled=!1,this._active=!0,this._canceled=!1,this._onEnterProceed=t,this._internalEntering(),this._onEnterProceed&&(this._onEnterProceed(),this._onEnterProceed=null)},s._internalCancel=function(){this._active=!1,this._canceled=!0,this._isLoading=!1,this._internalExit(),this.cancel(),this.trigger("cancel")},s._internalEnterDone=function(){this._canceled||(this.enabled=!0,this.enterDone(),this.trigger("enterDone"))},s.destroy=function(){this._destroyed||(this.trigger("destroy"),this.app=null,this.scaling=null,this.sound=null,this.voPlayer=null,this.config=null,this.scalingItems=null,this.assets=null,this.preload=null,this.panel=null,this.manager=null,this._destroyed=!0,this._onEnterProceed=null,this._onLoadingComplete=null,r.destroy.call(this))},namespace("springroll").State=n}(),t=function(t,e,i){this.currentState=e,this.visibleState=void 0===i?e:i,this.type=t},extend(t),t.VISIBLE="onVisible",t.HIDDEN="onHidden",namespace("springroll").StateEvent=t,function(t){var e=(include("springroll.Debug",!1),include("springroll.EventDispatcher")),i=(include("springroll.State"),include("springroll.StateEvent")),n=function(t){e.call(this),this.animator=null,this.transition=null,this.waitForLoadingComplete=!1,this._transitionSounds=t||null,this._states={},this._state=null,this._stateId=null,this._oldState=null,this._isLoading=!1,this._isTransitioning=!1,this._destroyed=!1,this.enabled=!0,this._onTransitionLoading=this._onTransitionLoading.bind(this),this._onTransitionOut=this._onTransitionOut.bind(this),this._onStateLoaded=this._onStateLoaded.bind(this),this._onTransitionIn=this._onTransitionIn.bind(this)},r=e.extend(n),s=n.TRANSITION_IN="onTransitionIn",a=n.TRANSITION_LOADING="onTransitionLoading",o=n.TRANSITION_IN_DONE="onTransitionInDone",h=n.TRANSITION_OUT="onTransitionOut",l=n.TRANSITION_OUT_DONE="onTransitionOutDone",u=n.TRANSITION_INIT_DONE="onInitDone",c=n.LOADING_START="onLoadingStart",d=n.LOADING_DONE="onLoadingDone";r.addState=function(t,e){this._states[t]=e,e.stateId=t,e.manager=this},Object.defineProperty(r,"currentState",{get:function(){return this._state}}),r.getStateById=function(t){return this._states[t]},r.isBusy=function(){return this._isLoading||this._isTransitioning},r.loadingStart=function(){this._destroyed||(this.trigger(c),this._onTransitionLoading())},r.loadingDone=function(){this._destroyed||this.trigger(d)},Object.defineProperty(r,"enabled",{set:function(t){this.trigger("enabled",t)}}),r.refresh=function(){this.state=this._stateId},Object.defineProperty(r,"state",{set:function(t){this._isTransitioning||(this._stateId=t,this.enabled=!1,this._oldState=this._state,this._state=this._states[t],this._oldState?this._isLoading?(this._oldState._internalCancel(),this._isLoading=!1,this._state._internalEnter(this._onStateLoaded)):(this._isTransitioning=!0,this._oldState._internalExitStart(),this.enabled=!1,this.trigger(h),this._transitioning(h,this._onTransitionOut)):(this._isTransitioning=!0,this.transition&&(this.transition.visible=!0),this._onTransitionLoading(),this.trigger(u),this._isLoading=!0,this._state._internalEnter(this._onStateLoaded)))},get:function(){return this._stateId}}),r._onTransitionOut=function(){this.trigger(l),this._isTransitioning=!1,this.has(i.HIDDEN)&&this.trigger(i.HIDDEN,new i(i.HIDDEN,this._state,this._oldState)),this._oldState.panel.visible=!1,this._oldState._internalExit(),this._oldState=null,this._onTransitionLoading(),this._isLoading=!0,this._state._internalEnter(this._onStateLoaded)},r._onStateLoaded=function(){if(this._isLoading=!1,this._isTransitioning=!0,this.has(i.VISIBLE)&&this.trigger(i.VISIBLE,new i(i.VISIBLE,this._state)),this._state.panel.visible=!0,this.waitForLoadingComplete&&this.animator.hasAnimation(this.transition,a)){var t=this.animator.getTimeline(this.transition);t.onComplete=function(){this.trigger(s),this._transitioning(s,this._onTransitionIn)}.bind(this),t.isLooping=!1}else this.trigger(s),this._transitioning(s,this._onTransitionIn)},r._onTransitionIn=function(){this.transition&&(this.transition.visible=!1),this.trigger(o),this._isTransitioning=!1,this.enabled=!0,this._state._internalEnterDone()},r._onTransitionLoading=function(){if(this.transition){var t,e=this._transitionSounds;e&&(t=e.loading||e.loop);var i=this.animator;i.hasAnimation(this.transition,a)?(this.trigger(a),i.play(this.transition,{anim:a,audio:t})):i.hasAnimation(this.transition,"transitionLoop")&&(this.trigger(a),i.play(this.transition,{anim:"transitionLoop",audio:t}))}},r.showTransitionOut=function(t){this.enabled=!1,this._transitioning(h,function(){this._onTransitionLoading(),t&&t()}.bind(this))},r.showTransitionIn=function(t){this._transitioning(s,function(){this.enabled=!0,this.transition.visible=!1,t&&t()}.bind(this))},r._transitioning=function(t,e){var i,n=this.transition,r=this._transitionSounds;if(!n)return e();n.visible=!0,r&&(i=t==s?r.in:r.out),this.animator.play(n,{anim:t,audio:i},e)},r.destroy=function(){if(this._destroyed=!0,this.off(),this.transition&&this.animator.stop(this.transition),this._state&&this._state._internalExit(),this._states)for(var t in this._states)this._states[t].destroy(),delete this._states[t];this.transition=null,this._state=null,this._oldState=null,this._states=null},namespace("springroll").StateManager=n}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("springroll.StateManager"),i=(include("springroll.Debug",!1),new t);i.setup=function(){this._states=null,this.manager=null,this._transition=null,Object.defineProperty(this,"transition",{set:function(t){if(!this.display)throw"No default display";if(t&&!this.animator)throw"No animation module";var e=this.display.stage;this._transition&&e.removeChild(this._transition),this._transition=t,this.manager&&(this.manager.transition=t),t&&(t.stop&&t.stop(),e.addChild(t))},get:function(){return this._transition}}),this.options.add("state",null,!0),this.options.add("transition"),this.options.add("transitionSounds",{in:null,out:null},!0),Object.defineProperty(this,"states",{set:function(t){if(this.manager)throw"States already set";if(!this.display)throw"No default display";var i=this.manager=new e(this.options.transitionSounds);i.animator=this.animator,i.on("enabled",function(t){this.display.enabled=t}.bind(this));var n=this.display.stage;for(var r in t)i.addState(r,t[r]),n.addChild(t[r].panel),this.trigger("stateAdded",r,t[r]);this._states=t;var s=this._transition||this.options.transition;s&&(this.transition=s,s.gotoAndStop&&s.gotoAndStop("onTransitionOut_stop")),this.options.state&&(i.state=this.options.state)},get:function(){return this._states}})},i.teardown=function(){this._state=null,this.manager&&(this.manager.destroy(),this.manager=null),this.transition&&(this.display&&this.display.adapter.removeChildren(this.transition),this.transition=null)}}(),function(){var t=include("springroll.StateManager").prototype;t.changeTransition=function(t){this.transition=t},t.getCurrentState=function(){return this.currentState},t.setState=function(t){this.state=t},t.next=function(){this._state.nextState()},t.previous=function(){this._state.previousState()},Object.defineProperty(include("springroll"),"BaseState",{get:function(){return include("springroll.State")}})}()}(),function(){"use strict";var t,e,i;namespace("springroll").SoundContext=function(t){this.id=t,this.volume=1,this.muted=!1,this.sounds=[],this.subContexts=[]},e=function(){t||(t=include("springroll.Sound")),this._channel=null,this._endFunc=null,this._endCallback=null,this._startFunc=null,this._startParams=null,this.alias=null,this._fTime=0,this._fDur=0,this._fStart=0,this._fEnd=0,this.curVol=0,this._pan=0,this.length=0,this.paused=!1,this.globallyPaused=!1,this.isValid=!0},i=extend(e),Object.defineProperty(i,"position",{get:function(){return this._channel?this._channel.getPosition():0}}),i.stop=function(){var e=t.instance;if(e){var i=e._sounds[this.alias];if(!i)return;var n=i.playing.indexOf(this);n>-1&&i.playing.splice(n,1),(n=i.waitingToPlay.indexOf(this))>-1&&i.waitingToPlay.splice(n,1),e._stopInst(this)}},i.updateVolume=function(e){if(this._channel){if(void 0===e){var i=t.instance,n=i._sounds[this.alias];if(n.context){var r=i._contexts[n.context];e=r.muted?0:r.volume}else e=1}this._channel.setVolume(e*this.curVol)}},Object.defineProperty(i,"volume",{get:function(){return this.curVol},set:function(t){this.curVol=t,this.updateVolume()}}),Object.defineProperty(i,"pan",{get:function(){return this._pan},set:function(t){this._pan=t,this._channel&&(this._channel.pan=t)}}),i.pause=function(){this.globallyPaused=!1,this.paused||(this.paused=!0,this._channel&&(this._channel.paused=!0,t.instance._onInstancePaused()))},i.resume=function(){this.paused&&(this.paused=!1,this._channel&&(t.instance._onInstanceResume(),this._channel.paused=!1,this._channel.gainNode&&(this._channel._volume=-1,this._channel.gainNode.gain.value=0),this.updateVolume()))},namespace("springroll").SoundInstance=e,function(){var t=include("springroll.Task"),e=include("springroll.Application"),i=function(e){t.call(this,e,e.sounds[0]),this.sounds=e.sounds},n=t.prototype,r=t.extend(i);i.test=function(t){return!!t.sounds&&Array.isArray(t.sounds)},r.start=function(t){var i=e.instance.sound,n=this.sounds;i.preload(n,(function(){n.destroy=function(){i.unload(this),this.length=0,delete this.destroy},t(n)}))},r.destroy=function(){this.sounds=null,n.destroy.call(this)},namespace("springroll").SoundTask=i}(),function(){function t(){var t=c.activePlugin,e=t._audioSources,i=t._soundInstances,n=t._loaders;h.context.close&&h.context.close();var r=window.AudioContext||window.webkitAudioContext;for(var s in h.context=new r,h.call(t),t._loaders=n,t._audioSources=e,t._soundInstances=i,i)for(var a=i[s],o=0;o<a.length;++o){var l=a[o];l.panNode.disconnect(0),l.gainNode.disconnect(0),l.gainNode=h.context.createGain(),l.panNode=h.context.createPanner(),l.panNode.panningModel=h._panningModel,l.panNode.connect(l.gainNode),l._updatePan(),(l._position<0||void 0===l._position)&&(l._position=0)}}function e(t){h.playEmptySound(),"running"!=h.context.state&&void 0!==h.context.state||(_.preventDefaultOnUnmute&&t.preventDefault(),document.removeEventListener("touchstart",e),document.removeEventListener("touchend",e),document.removeEventListener("mousedown",e),_.systemMuted=!1,_.trigger("systemUnmuted"))}function i(t){return"string"==typeof t}function n(t){return"function"==typeof t}var r,s,a=include("springroll.Application"),o=include("springroll.EventDispatcher"),h=include("createjs.WebAudioPlugin"),l=include("createjs.CordovaAudioPlugin",!1),u=include("createjs.FlashAudioPlugin",!1),c=include("createjs.Sound"),d=include("springroll.Enum"),p=function(){s||(include("springroll.Debug",!1),r=include("springroll.SoundContext"),s=include("springroll.SoundInstance")),o.call(this),this._sounds={},this._fades=[],this._pool=[],this.supportedSound=null,this._contexts={},this._update=this._update.bind(this),this._markLoaded=this._markLoaded.bind(this),this._playAfterLoad=this._playAfterLoad.bind(this),this.isSupported=!0,this.systemMuted=createjs.BrowserDetect.isIOS,this.preventDefaultOnUnmute=!0},f=o.prototype,g=o.extend(p),_=null,v=new d("unloaded","loading","loaded");p.init=function(t,i){var r=a.instance.options;n(t)&&(t={ready:t});var s={plugins:u?[h,u]:[h],types:["ogg","mp3"],swfPath:"assets/swfs/",ready:null};if(t=Object.merge({},s,t),r.forceFlashAudio&&(t.plugins=[u]),l&&(r.forceNativeAudio||t.plugins.indexOf(l)>=0))try{(window.top?window.top.springroll.forceNativeAudio:window.springroll.forceNativeAudio)&&(t.plugins=[l])}catch(t){}if(t.ready=t.ready||i,!t.ready)throw"springroll.Sound.init requires a ready callback";if(u){var o=r.basePath;u.swfPath=(o||"")+t.swfPath}if(c.registerPlugins(t.plugins),createjs.BrowserDetect.isIOS&&c.activePlugin instanceof h&&"running"!=c.activePlugin.context.state?(document.addEventListener("touchstart",e),document.addEventListener("touchend",e),document.addEventListener("mousedown",e)):this.systemMuted=!1,_=new p,c.getCapabilities())_._initComplete(t.types,t.ready);else if(c.activePlugin){var d;d=function(){try{var e=window.plugins.NativeAudio||window.top.plugins.NativeAudio||null;e&&e.getCapabilities((function(e){e,a.instance.off("update",d),_._initComplete(t.types,t.ready)}),(function(t){t}))}catch(t){}},a.instance.on("update",d)}else _.isSupported=!1,t.ready&&t.ready();return _},g._initComplete=function(t,e){if(u&&c.activePlugin instanceof u)_.supportedSound=".mp3";else for(var i,n=0,r=t.length;n<r;++n)if(i=t[n],c.getCapability(i)){_.supportedSound="."+i;break}this._fixAndroidAudio=createjs.BrowserDetect.isAndroid&&c.activePlugin instanceof h&&!(navigator.userAgent.indexOf("Gecko")>-1&&navigator.userAgent.indexOf("Firefox")>-1),this._fixAndroidAudio&&(this._numPlayingAudio=0,this._lastAudioTime=Date.now()),e&&e()},Object.defineProperty(p,"instance",{get:function(){return _}}),g.addContext=function(t){if(t){for(var e,n=t.soundManifest||t.sounds||[],s=t.path||"",a=!0===t.preload||!1,o=t.context,h={},l=0,u=n.length;l<u;++l)i(e=n[l])&&(e={id:e}),(h=this._sounds[e.id]={id:e.id,src:s+(e.src?e.src:e.id)+this.supportedSound,volume:e.volume?e.volume:1,loop:!!e.loop,loadState:v.unloaded,playing:[],waitingToPlay:[],context:e.context||o,playAfterLoad:!1,preloadCallback:null,data:e,duration:0}).context&&(this._contexts[h.context]||(this._contexts[h.context]=new r(h.context)),this._contexts[h.context].sounds.push(h)),(a||!0===e.preload)&&this.preload(h.id);return this}},g.linkContexts=function(t,e){if(this._contexts[t]||(this._contexts[t]=new r(t)),t=this._contexts[t],Array.isArray(e))for(var i=0;i<e.length;++i)t.subContexts.indexOf(e[i])<0&&t.subContexts.push(e[i]);else t.subContexts.indexOf(e)<0&&t.subContexts.push(e)},g.exists=function(t){return!!this._sounds[t]},g.contextExists=function(t){return!!this._contexts[t]},g.isUnloaded=function(t){return!!this._sounds[t]&&this._sounds[t].loadState==v.unloaded},g.isLoaded=function(t){return!!this._sounds[t]&&this._sounds[t].loadState==v.loaded},g.isLoading=function(t){return!!this._sounds[t]&&this._sounds[t].loadState==v.loading},g.isPlaying=function(t){var e=this._sounds[t];return!!e&&e.playing.length+e.waitingToPlay.length>0},g.getDuration=function(t){var e=this._sounds[t];if(!e)return null;if(!e.duration&&e.loadState==v.loaded){var i=c.play(t,null,null,null,null,0);e.duration=i.getDuration(),i.stop()}return e.duration},g.fadeIn=function(t,e,n,r){var s,o;if(i(t)){if(!(s=this._sounds[t]))return;s.playing.length&&(o=s.playing[s.playing.length-1])}else o=t,s=this._sounds[o.alias];if(o&&o._channel){o._fTime=0,o._fDur=e>0?e:500,o._fEnd=n||o.curVol,o._fStop=!1;var h=r>0?r:0;o.volume=o._fStart=h,-1==this._fades.indexOf(o)&&(this._fades.push(o),1==this._fades.length&&a.instance.on("update",this._update))}},g.fadeOut=function(t,e,n,r,s){var o,h;if(i(t)){if(!(o=this._sounds[t]))return;if(o.playing.length)h=o.playing[o.playing.length-1];else if(f.loadState==v.loading)return void this.stop(t)}else h=t;h&&h._channel&&(h._fTime=0,h._fDur=e>0?e:500,r>0?(h.volume=r,h._fStart=r):h._fStart=h.volume,h._fEnd=n||0,s=void 0===s?0===h._fEnd:!!s,h._fStop=s,-1==this._fades.indexOf(h)&&(this._fades.push(h),1==this._fades.length&&a.instance.on("update",this._update)))},g._update=function(t){for(var e,i,n,r,s,o=this._fades,h=o.length-1;h>=0;--h)(e=o[h]).paused||((i=e._fTime+=t)>=e._fDur?e._fStop?((n=this._sounds[e.alias])&&n.playing.splice(n.playing.indexOf(e),1),this._stopInst(e)):(e.curVol=e._fEnd,e.updateVolume(),o.splice(h,1)):(r=i/e._fDur,s=e._fEnd>e._fStart?e._fStart+(e._fEnd-e._fStart)*r:e._fEnd+(e._fStart-e._fEnd)*r,e.curVol=s,e.updateVolume()));0===o.length&&a.instance.off("update",this._update)},g.play=function(e,i,r,s,a,o,h,l,u){var d;if(i&&n(i)&&(d=i,i=null),d=(i?i.complete:d)||null,r=(i?i.start:r)||null,s=!!(i?i.interrupt:s),a=(i?i.delay:a)||0,o=(i?i.offset:o)||0,h=i?i.loop:h,l=i?i.volume:l,u=(i?i.pan:u)||0,this.isSupported){!0===h&&(h=-1);var p=this._sounds[e];if(p){(p.loop&&void 0===h||null===h)&&(h=-1),l="number"==typeof l?l:p.volume;var f,g,_=p.loadState;if(_==v.loaded){this._fixAndroidAudio&&(this._numPlayingAudio?(this._numPlayingAudio++,this._lastAudioTime=-1):(Date.now()-this._lastAudioTime>=3e4&&t(),this._numPlayingAudio=1,this._lastAudioTime=-1));var m=c.play(e,s,a,o,h,l,u);return m&&m.playState!=c.PLAY_FAILED?(f=this._getSoundInst(m,p.id),m.handleExtraData&&m.handleExtraData(p.data),f.curVol=l,f._pan=u,p.playing.push(f),f._endCallback=d,f.updateVolume(),f.length=m.getDuration(),p.duration||(p.duration=f.length),f._channel.addEventListener("complete",f._endFunc),r&&setTimeout(r,0),f):(d&&d(),null)}return _==v.unloaded?(p.playAfterLoad=!0,(f=this._getSoundInst(null,p.id)).curVol=l,f._pan=u,p.waitingToPlay.push(f),f._endCallback=d,f._startFunc=r,f._startParams?((g=f._startParams)[0]=s,g[1]=a,g[2]=o,g[3]=h):f._startParams=[s,a,o,h],this.preload(p.id),f):_==v.loading?(p.playAfterLoad=!0,(f=this._getSoundInst(null,p.id)).curVol=l,f._pan=u,p.waitingToPlay.push(f),f._endCallback=d,f._startFunc=r,f._startParams?((g=f._startParams)[0]=s,g[1]=a,g[2]=o,g[3]=h):f._startParams=[s,a,o,h],f):void 0}d&&d()}else d&&setTimeout(d,0)},g._getSoundInst=function(t,e){var i;return this._pool.length?i=this._pool.pop():(i=new s)._endFunc=this._onSoundComplete.bind(this,i),i._channel=t,i.alias=e,i.length=t?t.getDuration():0,i.isValid=!0,i},g._playAfterLoad=function(e){var n=i(e)?e:e.data.id,r=this._sounds[n];if(r.loadState=v.loaded,r.playAfterLoad){this._fixAndroidAudio&&this._lastAudioTime>0&&Date.now()-this._lastAudioTime>=3e4&&t();for(var s,a,o,h,l,u=r.waitingToPlay,d=0,p=u.length;d<p;++d)a=(s=u[d])._startParams,o=s.curVol,l=s._pan,(h=c.play(n,a[0],a[1],a[2],a[3],o,l))&&h.playState!=c.PLAY_FAILED?(this._fixAndroidAudio&&(this._numPlayingAudio?(this._numPlayingAudio++,this._lastAudioTime=-1):(this._numPlayingAudio=1,this._lastAudioTime=-1)),r.playing.push(s),s._channel=h,h.handleExtraData&&h.handleExtraData(r.data),s.length=h.getDuration(),r.duration||(r.duration=s.length),s.updateVolume(),h.addEventListener("complete",s._endFunc),s._startFunc&&s._startFunc(),s.paused&&h.pause()):(s._endCallback&&s._endCallback(),this._poolInst(s));u.length=0}},g._onSoundComplete=function(t){if(t._channel){this._fixAndroidAudio&&0==--this._numPlayingAudio&&(this._lastAudioTime=Date.now()),t._channel.removeEventListener("complete",t._endFunc);var e=this._sounds[t.alias],i=e.playing.indexOf(t);i>-1&&e.playing.splice(i,1);var n=t._endCallback;this._poolInst(t),n&&n()}},g.stop=function(t){var e=this._sounds[t];if(e)if(e.playing.length)this._stopSound(e);else if(e.loadState==v.loading){e.playAfterLoad=!1;for(var i,n=e.waitingToPlay,r=0,s=n.length;r<s;++r)i=n[r],this._poolInst(i);n.length=0}},g._stopSound=function(t){for(var e=t.playing,i=e.length-1;i>=0;--i)this._stopInst(e[i]);e.length=0},g._stopInst=function(t){t._channel&&(!t.paused&&this._fixAndroidAudio&&0==--this._numPlayingAudio&&(this._lastAudioTime=Date.now()),t._channel.removeEventListener("complete",t._endFunc),t._channel.stop());var e=this._fades.indexOf(t);e>-1&&this._fades.splice(e,1),this._poolInst(t)},g.stopContext=function(t){if(t=this._contexts[t]){var e,i,n=t.sounds;for(i=n.length-1;i>=0;--i)(e=n[i]).playing.length?this._stopSound(e):e.loadState==v.loading&&(e.playAfterLoad=!1);for(i=0;i<t.subContexts.length;++i)this.stopContext(t.subContexts[i])}},g.stopAll=function(){for(var t in this._sounds)this.stop(t)},g.pause=function(t,e){i(t)&&(t=this._sounds[t]),e=!!e;var n,r=t.playing;for(n=r.length-1;n>=0;--n)r[n].paused||(r[n].pause(),r[n].globallyPaused=e);for(n=(r=t.waitingToPlay).length-1;n>=0;--n)r[n].paused||(r[n].pause(),r[n].globallyPaused=e)},g.resume=function(t,e){i(t)&&(t=this._sounds[t]);var n,r=t.playing;for(n=r.length-1;n>=0;--n)r[n].globallyPaused==e&&r[n].resume();for(n=(r=t.waitingToPlay).length-1;n>=0;--n)r[n].globallyPaused==e&&r[n].resume()},g.pauseContext=function(t){if(t=this._contexts[t]){var e,i,n=t.sounds;for(i=n.length-1;i>=0;--i){var r;for(r=(e=n[i]).playing.length-1;r>=0;--r)e.playing[r].pause();for(r=e.waitingToPlay.length-1;r>=0;--r)e.waitingToPlay[r].pause()}for(i=0;i<t.subContexts.length;++i)this.pauseContext(t.subContexts[i])}},g.resumeContext=function(t){if(t=this._contexts[t]){var e,i,n=t.sounds;for(i=n.length-1;i>=0;--i){var r;for(r=(e=n[i]).playing.length-1;r>=0;--r)e.playing[r].resume();for(r=e.waitingToPlay.length-1;r>=0;--r)e.waitingToPlay[r].resume()}for(i=0;i<t.subContexts.length;++i)this.resumeContext(t.subContexts[i])}},g.pauseAll=function(){var t=this._sounds;for(var e in t)this.pause(t[e],!0)},g.resumeAll=function(){var t=this._sounds;for(var e in t)this.resume(t[e],!0)},g._onInstancePaused=function(){this._fixAndroidAudio&&0==--this._numPlayingAudio&&(this._lastAudioTime=Date.now())},g._onInstanceResume=function(){this._fixAndroidAudio&&(this._lastAudioTime>0&&Date.now()-this._lastAudioTime>3e4&&t(),this._numPlayingAudio++,this._lastAudioTime=-1)},g.setContextMute=function(t,e){if(t=this._contexts[t]){t.muted=e;var i,n,r,s,a=t.volume,o=t.sounds;for(s=o.length-1;s>=0;--s)if((i=o[s]).playing.length)for(r=(n=i.playing).length-1;r>=0;--r)n[r].updateVolume(e?0:a);for(s=0;s<t.subContexts.length;++s)this.setContextMute(t.subContexts[s],e)}},Object.defineProperty(g,"muteAll",{set:function(t){c.setMute(!!t)}}),g.setContextVolume=function(t,e){if(t=this._contexts[t]){var i=t.muted;t.volume=e;for(var n,r,s,a=t.sounds,o=a.length-1;o>=0;--o)if((n=a[o]).playing.length)for(s=(r=n.playing).length-1;s>=0;--s)r[s].updateVolume(i?0:e)}},g.preload=function(t,e){if(this.isSupported)if(i(t)&&(t=[t]),t&&0!==t.length){for(var n,r=[],s=0,o=t.length;s<o;++s)(n=this._sounds[t[s]])&&n.loadState==v.unloaded&&(n.loadState=v.loading,r.push({id:n.id,src:n.src,complete:this._markLoaded,data:n,advanced:!0}));r.length>0?a.instance.load(r,e):e&&e()}else e&&e();else e&&setTimeout(e,0)},g._markLoaded=function(t){var e=t.data.id,i=this._sounds[e];i&&(i.loadState=v.loaded,i.playAfterLoad&&this._playAfterLoad(e));var n=i.preloadCallback;n&&(i.preloadCallback=null,n())},g.unload=function(t){if(t)for(var e,i=0,n=t.length;i<n;++i)(e=this._sounds[t[i]])&&(this._stopSound(e),e.loadState=v.unloaded),c.removeSound(e.src)},g.unloadAll=function(){var t=[];for(var e in this._sounds)t.push(e);this.unload(t)},g._poolInst=function(t){-1==this._pool.indexOf(t)&&(t._endCallback=t.alias=t._channel=t._startFunc=null,t.curVol=0,t.globallyPaused=t.paused=t.isValid=!1,this._pool.push(t))},g.destroy=function(){if(this.stopAll(),c.removeAllSounds(),u&&c.activePlugin instanceof u){var t=document.getElementById("SoundJSFlashContainer");t&&t.parentNode&&t.parentNode.removeChild(t)}_=null,this._sounds=null,this._volumes=null,this._fades=null,this._contexts=null,this._pool=null},namespace("springroll").Sound=p}(),function(){var t,e=include("springroll.Sound"),i=include("springroll.Application"),n=include("springroll.EventDispatcher"),r=function(){n.call(this),t||(t=include("springroll.Captions",!1)),this._onSoundFinished=this._onSoundFinished.bind(this),this._updateSilence=this._updateSilence.bind(this),this._updateSoloCaption=this._updateSoloCaption.bind(this),this._syncCaptionToSound=this._syncCaptionToSound.bind(this),this._listHelper=[],this.trackSound=!1,this.paused=!1,this.voList=null,this._listCounter=0,this._currentVO=null,this._soundInstance=null,this._callback=null,this._cancelledCallback=null,this._trackedSounds=[],this._timer=0,this._captions=null},s=extend(r,n);Object.defineProperty(s,"playing",{get:function(){return null!==this._currentVO||this._timer>0}}),Object.defineProperty(s,"currentVO",{get:function(){return this._currentVO}}),Object.defineProperty(s,"captions",{set:function(t){this._captions=t,t&&(t.selfUpdate=!1)},get:function(){return this._captions}}),Object.defineProperty(s,"currentPosition",{get:function(){return this.playing?this._soundInstance?this._soundInstance.position:this._currentVO?this._timer:this.voList[this._listCounter]-this._timer:0}}),Object.defineProperty(s,"currentDuration",{get:function(){return this.playing?this._soundInstance?e.instance.getDuration(this._soundInstance.alias):this._currentVO&&this._captions?this._captions.currentDuration:this.voList[this._listCounter]:0}}),s.getElapsed=function(){var t,i,n=0;if(!this.voList)return 0;for(i=0;i<this._listCounter;++i)"string"==typeof(t=this.voList[i])?n+=e.instance.getDuration(t):"number"==typeof t&&(n+=t);return(i=this._listCounter)<this.voList.length&&("string"==typeof(t=this.voList[i])?n+=this._soundInstance.position:"number"==typeof t&&(n+=t-this._timer)),n},s.pause=function(){!this.paused&&this.playing&&(this.paused=!0,this._soundInstance&&this._soundInstance.pause(),i.instance.off("update",[this._updateSoloCaption,this._syncCaptionToSound,this._updateSilence]))},s.resume=function(){this.paused&&(this.paused=!1,this._soundInstance&&this._soundInstance.resume(),this._captions.playing?this._soundInstance?i.instance.on("update",this._syncCaptionToSound):i.instance.on("update",this._updateSoloCaption):i.instance.on("update",this._updateSilence))},s.play=function(t,e,i){this.stop(),this.playing&&this.stop(),this._listCounter=-1,"string"==typeof t?(this._listHelper.length=0,this._listHelper[0]=t,this.voList=this._listHelper):this.voList=t,this._callback=e,this._cancelledCallback=!0===i?e:i,this._onSoundFinished()},s._onSoundFinished=function(){if(this._listCounter>=0&&this.trigger("end",this._currentVO),i.instance.off("update",[this._updateSoloCaption,this._syncCaptionToSound,this._updateSilence]),this._captions&&this._soundInstance&&this._captions.seek(this._soundInstance.length),this._soundInstance=null,++this._listCounter>=this.voList.length){this._captions&&this._captions.stop(),this._currentVO=null,this._cancelledCallback=null;var t=this._callback;this._callback=null,t&&t()}else this._currentVO=this.voList[this._listCounter],"string"==typeof this._currentVO?(this._playSound(),this.trigger("start",this._currentVO)):"function"==typeof this._currentVO?(this._currentVO(),this._onSoundFinished()):(this._timer=this._currentVO,this._currentVO=null,i.instance.on("update",this._updateSilence),this.trigger("start",null))},s._updateSilence=function(t){this._timer-=t,this._timer<=0&&this._onSoundFinished()},s._updateSoloCaption=function(t){this._timer+=t,this._captions.seek(this._timer),this._timer>=this._captions.currentDuration&&this._onSoundFinished()},s._syncCaptionToSound=function(t){this._soundInstance&&this._captions.seek(this._soundInstance.position)},s._playSound=function(){this.trackSound&&-1==this._trackedSounds.indexOf(this._currentVO)&&this._trackedSounds.push(this._currentVO);var t=e.instance;!t.exists(this._currentVO)&&this._captions&&this._captions.hasCaption(this._currentVO)?(this._captions.play(this._currentVO),this._timer=0,i.instance.on("update",this._updateSoloCaption)):(this._soundInstance=t.play(this._currentVO,this._onSoundFinished),this._captions&&(this._captions.play(this._currentVO),i.instance.on("update",this._syncCaptionToSound)));for(var n,r=this.voList.length,s=this._listCounter+1;s<r;++s)if("string"==typeof(n=this.voList[s])){t.exists(n)&&!t.isLoaded(n)&&t.preload(n);break}},s.stop=function(){this.paused=!1,this._soundInstance&&(this._soundInstance.stop(),this._soundInstance=null),this._currentVO=null,this._captions&&this._captions.stop(),i.instance.off("update",[this._updateSoloCaption,this._syncCaptionToSound,this._updateSilence]),this.voList=null,this._timer=0,this._callback=null;var t=this._cancelledCallback;this._cancelledCallback=null,t&&t()},s.unloadSound=function(){e.instance.unload(this._trackedSounds),this._trackedSounds.length=0},s.destroy=function(){this.stop(),this.voList=null,this._listHelper=null,this._currentVO=null,this._soundInstance=null,this._callback=null,this._cancelledCallback=null,this._trackedSounds=null,this._captions=null,n.prototype.destroy.call(this)},namespace("springroll").VOPlayer=r,namespace("springroll").Sound.VOPlayer=r}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("springroll.Sound"),i=include("springroll.VOPlayer"),n=include("createjs.WebAudioPlugin"),r=include("createjs.FlashAudioPlugin",!1),s=new t(90);s.setup=function(){this.options.add("audioPlugins",r?[n,r]:[n],!0),this.options.add("swfPath","assets/swfs/",!0),this.options.add("forceFlashAudio",!1,!0),this.options.add("forceNativeAudio",!1,!0),this.options.add("audioTypes",["ogg","mp3"],!0),this._music=null,this._musicInstance=null,this.voPlayer=new i,this.sound=null,this.assetManager.register("springroll.SoundTask"),Object.defineProperty(this,"music",{set:function(t){if(t!=this._music){var e=this.sound;this._music&&(e.fadeOut(this._music),this._musicInstance=null),this._music=t,t&&(this._musicInstance=e.play(this._music,{start:e.fadeIn.bind(e,t),loop:-1}))}},get:function(){return this._music}}),Object.defineProperty(this,"musicInstance",{get:function(){return this._musicInstance}}),this.once("configLoaded",(function(t){var e=t.sounds,i=this.sound;e&&(e.vo&&i.addContext(e.vo),e.sfx&&i.addContext(e.sfx),e.music&&i.addContext(e.music))}))},s.preload=function(t){e.init({plugins:this.options.audioPlugins,swfPath:this.options.swfPath,types:this.options.audioTypes,ready:function(){if(!this.destroyed){var i=this.sound=e.instance;this.on({paused:function(){i.pauseAll()},resumed:function(){i.resumeAll()}}),this.trigger("soundReady"),t()}}.bind(this)})},s.teardown=function(){this.voPlayer&&(this.voPlayer.destroy(),this.voPlayer=null),this.sound&&(this.sound.destroy(),this.sound=null)}}(),function(){var t=include("springroll.Sound"),e=include("springroll.SoundInstance"),i=include("springroll.VOPlayer"),n=t.prototype;Object.defineProperty(n,"soundEnabled",{get:function(){return this.isSupported}}),n.loadConfig=function(t){return this.addContext(t)},n.preloadSound=function(t,e){this.preload(t,e)},n.unpauseAll=function(){this.resumeAll()},n.unpauseSound=function(t){this.resume(t)},n.pauseSound=function(t){this.pause(t)},(n=e.prototype).unpause=function(){this.resume()},n=i.prototype,Object.defineProperty(n,"soundList",{get:function(){return this.voList}})}()}(),function(){"use strict";var t,e,i,n;t=include("createjs.Bitmap",!1),e=include("PIXI.Sprite",!1),i=function(i,n,r){var s=!1;if(i?(t&&i instanceof t||e&&i instanceof e)&&(s=!0):s=!1,!s)throw"Invalid image";this._image=i,this._size=n,this._adapter=r},(n=extend(i)).resize=function(t,e){var i=this._size,n=this._adapter,r=this._image,s=t/e>=i.width/i.height,a=n.getBitmapSize(r),o=i.maxWidth||i.width,h=a.w/o;i.maxHeight||(h=a.h/i.height);var l=(s?e:t)/(h*(s?i.height:i.width));n.setScale(this._image,l),n.setPosition(this._image,{x:.5*(t-a.w*l),y:.5*(e-a.h*l)})},Object.defineProperty(n,"display",{get:function(){return this._image}}),n.destroy=function(){this._adapter=null,this._size=null,this._image=null},namespace("springroll").ScaleImage=i,function(){var t,e=function(e,i,n,r){t||(t=include("springroll.ScaleManager")),i=i.split("-"),this.vertAlign=i[0],this.horiAlign=i[1],this.titleSafe=!1,this.maxScale=1,this.minScale=1,this.centeredHorizontally=!1,this._display=e,this._size=n,this._adapter=r;var s=r.getScale(e),a=r.getPosition(e),o=this.origScaleX=s.x||1,h=this.origScaleY=s.y||1;this.origBounds=r.getLocalBounds(e);var l,u=this.origBounds;switch(this.origScaleX<0?(l=u.x,u.x=u.right*o,u.right=l*o,u.width*=Math.abs(o)):(u.x*=o,u.right*=o,u.width*=o),this.origScaleY<0?(l=u.y,u.y=u.bottom*h,u.bottom=l*h,u.height*=Math.abs(h)):(u.y*=h,u.bottom*=h,u.height*=h),this.origMarginHori=0,this.origMarginVert=0,this.vertAlign){case t.ALIGN_TOP:this.origMarginVert=a.y+this.origBounds.y;break;case t.ALIGN_CENTER:this.origMarginVert=.5*n.height-a.y;break;case t.ALIGN_BOTTOM:this.origMarginVert=n.height-(a.y+this.origBounds.bottom)}switch(this.horiAlign){case t.ALIGN_LEFT:this.origMarginHori=a.x+this.origBounds.x;break;case t.ALIGN_CENTER:this.origMarginHori=.5*n.width-a.x;break;case t.ALIGN_RIGHT:this.origMarginHori=n.width-(a.x+this.origBounds.right)}},i=extend(e);Object.defineProperty(i,"display",{get:function(){return this._display}}),i.resize=function(e,i){var n=this._adapter,r=this._display,s=this._size,a=this.origBounds,o=this.origScaleX,h=this.origScaleY,l=s.width/s.height,u=e/i,c=u>=l?i/s.height:e/s.width,d=0,p=0;u>=l?d=(e-s.width*c)/2:p=(i-s.height*c)/2;var f,g,_,v=c;this.minScale&&v<this.minScale?v=this.minScale:this.maxScale&&v>this.maxScale&&(v=this.maxScale),n.setScale(r,o*v,"x"),n.setScale(r,h*v,"y"),f=this.origMarginVert*c;var m=!0===this.titleSafe||"vertical"===this.titleSafe;switch(this.vertAlign){case t.ALIGN_TOP:_=m?p+f-a.y*v:f-a.y*v;break;case t.ALIGN_CENTER:_=.5*i-f;break;case t.ALIGN_BOTTOM:_=m?i-p-f-a.bottom*v:i-f-a.bottom*v}switch(null!==_&&n.setPosition(r,_,"y"),f=this.origMarginHori*c,m=!0===this.titleSafe||"horizontal"===this.titleSafe,this.horiAlign){case t.ALIGN_LEFT:g=m?d+f-a.x*v:f-a.x*v;break;case t.ALIGN_CENTER:g=this.centeredHorizontally?.5*(e-r.width):.5*e-f;break;case t.ALIGN_RIGHT:g=m?e-d-f-a.right*v:e-f-a.right*v}null!==g&&n.setPosition(r,g,"x")},i.destroy=function(){this._adapter=null,this.origBounds=null,this._display=null,this._size=null},namespace("springroll").ScaleItem=e}(),function(t){var e={},i=Math.PI/180;e.init=function(n,r,s){s||(s=springroll.ScaleManager._getAdapter()),r.x!==t&&s.setPosition(n,r.x,"x"),r.y!==t&&s.setPosition(n,r.y,"y");var a=r.scale,o=s.getScale(n);a&&(s.setScale(n,a.x*o.x,"x"),s.setScale(n,a.y*o.y,"y")),(a=r.pivot)&&s.setPivot(n,a),r.rotation!==t&&(n.rotation=r.rotation,s.useRadians&&(n.rotation*=i)),r.hitArea&&s.setHitArea(n,e.generateHitArea(r.hitArea,1,s))},e.generateHitArea=function(t,e,i){if(i||(i=springroll.ScaleManager._getAdapter()),e||(e=1),Array.isArray(t)){if(1==e)return new i.Polygon(t);for(var n=[],r=0,s=t.length;r<s;++r)n.push(new i.Point(t[r].x*e,t[r].y*e));return new i.Polygon(n)}return"rect"!=t.type&&t.type?"ellipse"==t.type?new i.Ellipse((t.x-.5*t.w)*e,(t.y-.5*t.h)*e,t.w*e,t.h*e):"circle"==t.type?new i.Circle(t.x*e,t.y*e,t.r*e):"sector"==t.type?new i.Sector(t.x*e,t.y*e,t.r*e,t.start,t.end):null:new i.Rectangle(t.x*e,t.y*e,t.w*e,t.h*e)},namespace("springroll").Positioner=e}(),function(t){var e=include("springroll.ScaleItem"),i=include("springroll.ScaleImage"),n=include("springroll.Positioner"),r=include("springroll.Application"),s=function(t){if(include("springroll.Debug",!1),t=Object.merge({enabled:!1,size:null,items:null,display:null,container:null},t),this._items=[],this._size=null,this._scale=1,this._adapter=null,this._enabled=t.enabled,this.size=t.size,this.display=t.display,t.items){if(!t.container)throw"ScaleManager requires container to add items";this.addItems(t.container,t.items)}this._resize=this._resize.bind(this),this.enabled=this._enabled},a=extend(s),o=s.ALIGN_TOP="top",h=s.ALIGN_BOTTOM="bottom",l=s.ALIGN_LEFT="left",u=s.ALIGN_RIGHT="right",c=s.ALIGN_CENTER="center";s._getAdapter=function(t){if(t||(t=r.instance.display),!t)return null;if(!t.adapter)throw"ScaleManager incompatible display";return t.adapter},Object.defineProperty(a,"display",{set:function(t){this._adapter=s._getAdapter(t)}}),Object.defineProperty(a,"size",{set:function(t){if(this._size=t,t){if(!t.width||!t.height)throw"Invalid design settings";var e=r.instance.options;t.maxWidth&&(e.maxWidth=t.maxWidth),t.maxHeight&&(e.maxHeight=t.maxHeight)}},get:function(){return this._size}}),Object.defineProperty(a,"scale",{get:function(){return this._scale}}),Object.defineProperty(a,"numItems",{get:function(){return this._items.length}}),Object.defineProperty(a,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t;var e=r.instance;e.off("resize",this._resize),t&&(e.on("resize",this._resize),e.triggerResize())}}),a.removeItems=function(t,e){var i=[];if(!e)return this.removeItemsByContainer(t);for(var n in e)t[n]&&i.push(t[n]);if(i.length){var r=this._items.slice(),s=this._items;r.forEach((function(t){i.indexOf(t.display)>-1&&s.splice(s.indexOf(t),1)}))}return this},a.removeItemsByContainer=function(t){var e=this._adapter;return this._items.forEach((function(i,n,r){e.contains(t,i.display)&&r.splice(n,1)})),this},a.removeItem=function(t){for(var e=this._items,i=0,n=e.length;i<n;i++)if(e[i].display===t){e.splice(i,1);break}return this},a.addItems=function(t,e){var i,n;for(n in e)i=e[n],t[n]&&this.addItem(t[n],i,!1);return r.instance.triggerResize(),this},a.addItem=function(t,s,a){if(void 0===a&&(a=!0),s||(s={align:c}),"cover-image"===s)this._items.push(new i(t,this._size,this._adapter));else{"string"==typeof s&&(s={align:s});var d=s.align||c;switch(d){case c:d=d+"-"+d;break;case l:case u:d=c+"-"+d;break;case o:case h:d=d+"-"+c}if(!/^(center|top|bottom)\-(left|right|center)$/.test(d))throw"Item align '"+d+"' is invalid for "+t;n.init(t,s,this._adapter);var p=new e(t,d,this._size,this._adapter);p.titleSafe="all"==s.titleSafe||s.titleSafe,p.maxScale=s.maxScale||NaN,p.minScale=s.minScale||NaN,p.centeredHorizontally=!!s.centeredHorizontally,this._items.push(p)}return a&&r.instance.triggerResize(),this},a._resize=function(t,e){var i=this._size;if(i){var n=i.width/i.height,r=t/e;this._scale=r>n?e/i.height:t/i.width,this._items.forEach((function(i){i.resize(t,e)}))}},a.destroy=function(){this.enabled=!1,this._items.forEach((function(t){t.destroy()})),this._adapter=null,this._size=null,this._items=null},namespace("springroll").ScaleManager=s}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("springroll.ScaleManager"),i=new t(1);i.setup=function(){include("springroll.Debug",!1),this.scaling=new e,this.options.override("responsive",!0),this.once("configLoaded",(function(t){var e=t.scalingSize;e&&(this.scaling.size=e)})),this.once("afterInit",(function(){var t=this.config;t&&t.scaling&&this.scaling.addItems(this,t.scaling)}))},i.preload=function(t){this.scaling.display=this.display,this.scaling.enabled=!0,t()},i.teardown=function(){this.scaling&&this.scaling.destroy(),this.scaling=null}}(),function(t){var e=new(include("springroll.ApplicationPlugin"))(100);e.setup=function(){var e=t.navigator;this.isIOS=e.userAgent.search(/iPhone|iPad|iPod/)>-1,this.isAndroid=e.userAgent.search(/Android/)>-1,this.hasTouch=!!("ontouchstart"in t||e.msPointerEnabled&&e.msMaxTouchPoints>0||e.pointerEnabled&&e.maxTouchPoints>0)},e.preload=function(t){if(this.filters){var e=this.hasTouch?"_touch":"_mouse";this.filters.add("%INTERACTION%",e),this.filters.add("%UI%",e)}t()}}(window),function(){var t=include("springroll.ScaleManager"),e=t.prototype;e.addBackground=function(t){return this.addItem(t,"cover-image",!0),this},e.removeBackground=function(t){return this.removeItem(t),this},Object.defineProperty(springroll,"UIScaler",{get:function(){return t}})}()}(),function(){"use strict";var t,e,i;!function(t){function e(t){var e=t.lastIndexOf("."),i=parseInt(t.substr(e+1),10),n=t.substr(0,e).split(":");return 36e5*parseInt(n[0],10)+6e3*parseInt(n[1],10)+1e3*parseInt(n[2],10)+i}var i=include("springroll.Application"),n=function(t,e,i){include("springroll.Debug",!1),this._data=null,this._textField=null,this._completeCallback=null,this._lines=[],this._currentAlias=0,this._currentDuration=0,this._currentTime=0,this._currentLine=-1,this._lastActiveLine=-1,this._playing=!1,this._destroyed=!1,this._selfUpdate=!0,this._mute=!1,this.update=this.update.bind(this),this.data=t||{},this.textField=e||null,this.selfUpdate=void 0===i||!!i},r=extend(n);Object.defineProperty(r,"mute",{get:function(){return this._mute},set:function(t){this._mute=t,this._updateCaptions()}}),Object.defineProperty(r,"selfUpdate",{set:function(t){this._selfUpdate=!!t,i.instance.off("update",this.update),this._selfUpdate&&i.instance.on("update",this.update)},get:function(){return this._selfUpdate}}),Object.defineProperty(r,"data",{set:function(t){if(this._data=t,t){var i,n,r,s,a=/[0-9]+\:[0-9]{2}\:[0-9]{2}\.[0-9]{3}/;for(var o in t)if(Array.isArray(t[o])&&(t[o]={lines:t[o]}),i=t[o].lines)for(s=i.length,n=0;n<s;++n)"string"==typeof(r=i[n]).start&&(a.test(r.start)?r.start=e(r.start):r.start=parseInt(r.start,10)),"string"==typeof r.end&&(a.test(r.end)?r.end=e(r.end):r.end=parseInt(r.end,10))}},get:function(){return this._data}}),Object.defineProperty(r,"textField",{set:function(t){s(this._textField,""),this._textField="string"==typeof t?document.getElementById(t):t||null},get:function(){return this._textField}});var s=function(t,e){if(t){if(t.nodeName)t.innerHTML=e;else{if(!t.constructor.prototype.hasOwnProperty("text")&&!t.hasOwnProperty("text"))throw"Unrecognizable captions text field";t.text=e}return t}};r.hasCaption=function(t){return!!this._data&&!!this._data[t]},r.getFullCaption=function(t,e){if(this._data){var i,n,r;if(e=e||" ",Array.isArray(t))for(r=0;r<t.length;r++)"string"==typeof t[r]&&(n=this.getFullCaption(t[r],e),i?i+=e+n:i=n);else{if(!this._data[t])return t;var s=this._data[t].lines;for(r=0;r<s.length;r++)n=s[r].content,i?i+=e+n:i=n}return i}},r._load=function(t){if(!this._destroyed){if(this._reset(),!t)return void(this._lines=null);this._lines=t.lines}},r._reset=function(){this._currentLine=-1,this._lastActiveLine=-1},Object.defineProperty(r,"playing",{get:function(){return this._playing}}),r._getTotalDuration=function(){var t=this._lines;return t?t[t.length-1].end:0},Object.defineProperty(r,"currentDuration",{get:function(){return this._currentDuration}}),Object.defineProperty(r,"currentAlias",{get:function(){return this._currentAlias}}),r.play=function(t,e){this.stop(),this._completeCallback=e,this._playing=!0,this._currentAlias=t,this._load(this._data[t]),this._currentDuration=this._getTotalDuration(),this.seek(0)},r.stop=function(){this._playing=!1,this._currentAlias=null,this._lines=null,this._completeCallback=null,this._reset(),this._updateCaptions()},r.seek=function(t){var e=this._currentTime=t,i=this._lines;if(i){if(e<i[0].start)return this._currentLine=this._lastActiveLine=-1,void this._updateCaptions();for(var n=i.length,r=0;r<n;r++){if(e>=i[r].start&&e<=i[r].end){this._currentLine=this._lastActiveLine=r,this._updateCaptions();break}e>i[r].end?(this._lastActiveLine=r,this._currentLine=-1,this._updateCaptions()):e<i[r].start&&(this._lastActiveLine=r-1,this._currentLine=-1,this._updateCaptions())}}else this._updateCaptions()},r._updatePercent=function(t){this._destroyed||(this._currentTime=t*this._currentDuration,this._calcUpdate())},r.update=function(t){!this._destroyed&&this._playing&&(this._currentTime+=t,this._calcUpdate())},r._calcUpdate=function(){var t=this._lines;if(t){var e=t.length,i=this._lastActiveLine+1,n=e-1,r=this._currentTime;r>=t[n].end?this.stop():i<=n&&r>=t[i].start&&r<=t[i].end?(this._currentLine=this._lastActiveLine=i,this._updateCaptions()):-1!=this._currentLine&&r>t[this._currentLine].end&&(this._lastActiveLine=this._currentLine,this._currentLine=-1,this._updateCaptions())}},r._updateCaptions=function(){s(this._textField,-1==this._currentLine||this._mute?"":this._lines[this._currentLine].content)},r.getLength=function(t){var e=0;if(Array.isArray(t))for(var i=0,n=t.length;i<n;i++)"string"==typeof t[i]?e+=this.getLength(t[i]):"number"==typeof t[i]&&(e+=t[i]);else{if(!this._data[t])return e;var r=this._data[t].lines;e+=r[r.length-1].end}return parseInt(e)},r.destroy=function(){this._destroyed||(this._destroyed=!0,this._data=null,this._lines=null)},namespace("springroll").Captions=n}(),t=include("springroll.ApplicationPlugin"),e=include("springroll.Captions"),include("springroll.Debug",!1),(i=new t(60)).setup=function(){this.options.add("captions","captions",!0),this.options.add("captionsPath",null,!0),this.captions=new e},i.preload=function(t){this.voPlayer&&(this.voPlayer.captions=this.captions),this.captions.textField=this.options.captions;var e=this.options.captionsPath;e?this.load(e,function(e){this.captions.data=e,t()}.bind(this)):t()},i.teardown=function(){this.captions&&(this.captions.destroy(),this.captions=null)}}(),function(){"use strict";var t,e;!function(t){var e=include("createjs.Container",!1);if(e){var i=e.prototype;i.cacheByBounds=function(t,e){this.cacheByRect(this.nominalBounds,t,e)},i.cacheByRect=function(t,e,i){e=null==e?0:e,i=i>0?i:1,this.cache(t.x-e,t.y-e,t.width+2*e,t.height+2*e,i)}}}(),(e=include("createjs.MovieClip",!1))&&(e.prototype.gotoAndCacheByBounds=function(t,e,i){t=void 0===t?0:t,this.gotoAndStop(t);var n=this.frameBounds?this.frameBounds[this.currentFrame]:this.nominalBounds;n?this.cacheByRect(n,e,i):this.uncache()}),function(t){var e=include("createjs.Point",!1);e&&((e=e.prototype).dotProd=function(t){return this.x*t.x+this.y*t.y},e.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.lengthSq=function(){return this.x*this.x+this.y*this.y},e.normalize=function(){var t=1/this.length();this.x*=t,this.y*=t},e.subtract=function(t){this.x-=t.x,this.y-=t.y},e.add=function(t){this.x+=t.x,this.y+=t.y},e.truncate=function(t){var e=this.length();if(e>t){var i=t/e;this.x*=i,this.y*=i}},e.scaleBy=function(t){this.x*=t,this.y*=t},e.distance=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},e.distanceSq=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i})}(),(t=include("createjs.SpriteSheet",!1))&&(t.prototype.destroy=function(){this.dispatchEvent("destroy"),this._images.forEach((function(t){t.onload=null,t.src=""})),this._images=null,this._data=null,this._frames=null,this._animations=null,this.removeAllEventListeners()}),function(){var t=include("createjs.Bitmap"),e=include("createjs.Container"),i=include("createjs.Rectangle"),n={loadSpriteSheet:function(n,r,s,a){s>0||(s=n.meta&&parseFloat(n.meta.scale)?1/parseFloat(n.meta.scale):1),a||(a="lib");var o=n.frames||n,h=n.meta&&"http://www.codeandweb.com/texturepacker"==n.meta.app,l=window[a];for(var u in o){var c=o[u],d=u.indexOf(".");d>0&&(u=u.substring(0,d));var p=l[u],f=(l[u]=function(){e.call(this);var i=new t(this._image);this.addChild(i),i.sourceRect=this._frameRect;var n=this._scale;i.setTransform(this._frameOffsetX*n,this._frameOffsetY*n,n,n),this._rotated&&(i.rotation=-90,i.regX=i.sourceRect.width)}).prototype=new e;f._image=r,f._scale=s;var g=c.rotated;g&&(f._rotated=!0);var _=c.frame;f._frameRect=new i(_.x,_.y,g&&h?_.h:_.w,g&&h?_.w:_.h),c.trimmed?(f._frameOffsetX=c.spriteSourceSize.x,f._frameOffsetY=c.spriteSourceSize.y):f._frameOffsetX=f._frameOffsetY=0,p&&p.prototype.nominalBounds?f.nominalBounds=p.prototype.nominalBounds:f.nominalBounds=new i(0,0,c.sourceSize.w*s,c.sourceSize.h*s)}},bitmapFromTexture:function(n,r){r>0||(r=1);var s=new e,a=new t(n.image);return s.addChild(a),a.sourceRect=n.frame,a.setTransform(n.offset.x*r,n.offset.y*r,r,r),n.rotated&&(a.rotation=-90,a.regX=a.sourceRect.width),s.nominalBounds=new i(0,0,n.width*r,n.height*r),s},replaceWithScaledBitmap:function(t,i,n){if(1!=i&&i>0){n||(n="lib");var r,s,a,o=window[n];if("string"==typeof t)(s=o[r=t])&&((a=(o[r]=function(){e.call(this);var t=new this._oldBM;this.addChild(t),t.setTransform(0,0,this._scale,this._scale)}).prototype=new e)._oldBM=s,a._scale=i,a.nominalBounds=s.prototype.nominalBounds);else for(r in t)(s=o[r])&&((a=(o[r]=function(){e.call(this);var t=new this._oldBM;this.addChild(t),t.setTransform(0,0,this._scale,this._scale)}).prototype=new e)._oldBM=s,a._scale=i,a.nominalBounds=s.prototype.nominalBounds)}}};namespace("createjs").BitmapUtils=n,namespace("springroll.easeljs").BitmapUtils=n}(),function(t){var e=function(t,e,i){this.dom=e,this.symbols=[],this.libName=i||"lib",this.id=t,this.parseSymbols(e.text)},i=extend(e);e.globalSymbols={},i.parseSymbols=function(t){for(var i=t.split(/[\(!]function\s*\(/),n=e.globalSymbols,r=0;r<i.length;++r)if(t=i[r]){var s=t.substring(0,t.indexOf(","));if(s)for(var a,o=new RegExp("\\("+s+".(\\w+)\\s*=","g"),h=o.exec(t);h;)a=h[1],this.symbols.push(a),n[a]=this.id,h=o.exec(t)}},i.destroy=function(){this.dom.parentNode.removeChild(this.dom),this.dom=null;var t=e.globalSymbols,i=window[this.libName];this.symbols.forEach((function(e){delete t[e],delete i[e]})),this.symbols=null},namespace("springroll.easeljs").FlashArt=e}(),function(){var t=include("springroll.Task"),e=include("springroll.easeljs.FlashArt"),i=include("springroll.Application"),n=include("springroll.easeljs.BitmapUtils"),r=function(e){t.call(this,e,e.src),this.src=this.filter(e.src),this.images=e.images,this.atlas=this.filter(e.atlas),this.image=this.filter(e.image),this.color=this.filter(e.color),this.alpha=this.filter(e.alpha),this.libName=e.libName||"lib",this.imagesName=e.imagesName||"images"},s=t.extend(r);r.test=function(t){return t.src&&t.src.search(/\.js$/i)>-1&&"easeljs"==t.type&&"springroll.easeljs.FlashArt"==t.format},s.start=function(t){var r,s=[],a=0;if(this.atlas)r={atlas:this.atlas,id:"asset_"+a++,type:"easeljs",format:"FlashAtlas",libName:this.libName},this.image?r.image=this.image:(r.alpha=this.alpha,r.color=this.color),s.push(r);else if(this.images)for(var o,h=0;h<this.images.length;++h)if(this.images[h].atlas)o=this.images[h],r={atlas:this.filter(o.atlas),id:"asset_"+a++,type:"easeljs",format:"FlashAtlas",libName:this.libName},o.image?r.image=this.filter(o.image):(r.alpha=this.filter(o.alpha),r.color=this.filter(o.color)),s.push(r);else if("createjs.SpriteSheet"==this.images[h].format){if(o=this.images[h].clone(),s.push(o),o.type||(o.type="easeljs"),!o.id){var l=o.src;l=(l=l.substr(0,l.lastIndexOf("."))).substr(l.lastIndexOf("/")+1),o.id=l}}else{if(!(o="string"==typeof this.images[h]?{src:this.filter(this.images[h])}:this.images[h].clone()).id){var u=o.src||o.color,c=u.lastIndexOf(".");c>-1&&(u=u.substr(0,c));var d=u.lastIndexOf("/");d>-1&&(u=u.substr(d+1)),o.id=u}o.type="easeljs",o.format="FlashImage",o.imagesName=this.imagesName,s.push(o)}var p={_flash:this.src};s.length&&(p._images={assets:s}),i.instance.load(p,function(i){var r=new e(this.id,i._flash,this.libName),s=i._images;if(s){var a=[];for(var o in namespace(this.imagesName),s){var h=s[o];a.push(h),h.image&&h.scale?1!=h.scale&&n.replaceWithScaledBitmap(o,1/h.scale,this.libName):h.create&&h.create()}r._orig_destroy=r.destroy,r.destroy=function(){var t;for(t=a.length-1;t>=0;--t)a[t].destroy?a[t].destroy():a[t].dispatchEvent("destroy");r._orig_destroy()}}t(r)}.bind(this))},namespace("springroll.easeljs").FlashArtTask=r}(),function(t){var e=function(t,e){Array.isArray(t)?this._images=t:(this._images=[t],e=[e]),this.frames={},e[0].meta&&parseFloat(e[0].meta.scale)?this.scale=parseFloat(e[0].meta.scale):this.scale=1;for(var i=0;i<this._images.length;++i){t=this._images[i];var r=e[i].meta&&"http://www.codeandweb.com/texturepacker"==e[i].meta.app,s=e[i].frames;for(var a in s){var o=s[a],h=a.lastIndexOf(".");h>0&&(a=a.substring(0,h)),(h=a.lastIndexOf("/"))>=0&&(a=a.substring(h+1)),this.frames[a]=new n(t,o,r)}}},i=extend(e);i.getFrame=function(t){return this.frames[t]||null},i.getFrames=function(t,e,i,n,r){void 0===n&&(n=4),n<0&&(n=0),r||(r=[]);var s,a,o=[],h=[];for(s=1;s<n;++s){var l="";a=1;for(var u=0;u<s;++u)l+="0",a*=10;o.unshift(l),h.push(a)}var c,d,p=h.length;for(s=e,d=i;s<=d;++s){var f=null;for(a=0;a<p;++a)if(s<h[a]){f=o[a]+s;break}f||(f=s.toString());var g=t.replace("#",f),_=this.frames[g];_&&(c=_),c&&r.push(c)}return r},i.destroy=function(){this.image=null,this.frames=null},namespace("createjs").TextureAtlas=e,namespace("springroll.easeljs").TextureAtlas=e;var n=function(t,e,i){this.image=t,this.rotated=e.rotated;var n=e.frame;this.frame=new createjs.Rectangle(n.x,n.y,e.rotated&&i?n.h:n.w,e.rotated&&i?n.w:n.h),this.trimmed=e.trimmed,this.offset=new createjs.Point(e.spriteSourceSize.x,e.spriteSourceSize.y),this.width=e.sourceSize.w,this.height=e.sourceSize.h}}(),function(){var t=include("springroll.Task"),e=include("springroll.easeljs.TextureAtlas"),i=include("springroll.ColorAlphaTask"),n=function(e){t.call(this,e,e.atlas),this.atlas=this.filter(e.atlas),this.image=this.filter(e.image),this.color=this.filter(e.color),this.alpha=this.filter(e.alpha)},r=t.extend(n);n.test=function(t){return"easeljs"==t.type&&t.atlas&&(t.image||t.alpha&&t.color)},r.start=function(t){this.loadAtlas({},t)},r.loadAtlas=function(t,n){t._atlas=this.atlas,this.image?t._image=this.image:(t._color=this.color,t._alpha=this.alpha),this.load(t,(function(t){var r;r=t._image?t._image:i.mergeAlpha(t._color,t._alpha);var s=new e(r,t._atlas);n(s,t)}))},namespace("springroll.easeljs").TextureAtlasTask=n}(),function(){var t=include("springroll.Task"),e=function(e){t.call(this,e,e.color),this.src=this.filter(e.src),this.color=this.filter(e.color),this.alpha=this.filter(e.alpha),this.imagesName=e.imagesName},i=t.extend(e);e.test=function(t){return"easeljs"==t.type&&"FlashImage"==t.format&&!!(t.src||t.alpha&&t.color)},i.start=function(t){var e=this.src;e||(e={alpha:this.alpha,color:this.color}),this.load(e,function(e){var i=e,n=namespace(this.imagesName);n[this.id]=i;var r={image:i,scale:this.scale,id:this.id,destroy:function(){i.src="",delete n[this.id]}};t(r)}.bind(this))},namespace("springroll.easeljs").FlashArtImageTask=e}(),function(){var t=include("springroll.Task"),e=(include("springroll.easeljs.TextureAtlas"),include("springroll.ColorAlphaTask")),i=include("springroll.easeljs.BitmapUtils"),n=function(e){t.call(this,e,e.atlas),this.atlas=this.filter(e.atlas),this.image=this.filter(e.image),this.color=this.filter(e.color),this.alpha=this.filter(e.alpha),this.libName=e.libName||"lib"},r=t.extend(n);n.test=function(t){return"easeljs"==t.type&&"FlashAtlas"==t.format&&t.atlas&&(t.image||t.alpha&&t.color)},r.start=function(t){this.loadAtlas({},t)},r.loadAtlas=function(t,n){t._atlas=this.atlas,this.image?t._image=this.image:(t._color=this.color,t._alpha=this.alpha),this.load(t,function(t){var r;r=t._image?t._image:e.mergeAlpha(t._color,t._alpha);var s=t._atlas.meta?1/parseFloat(t._atlas.meta.scale):0;s||(s=1/this.original.scale);var a={},o=this.libName;a.create=function(){i.loadSpriteSheet(t._atlas,r,s,o)};var h=namespace(this.libName),l=t._atlas.frames;a.destroy=function(){for(var t in l)delete h[t];r.src=null},n(a,t)}.bind(this))},namespace("springroll.easeljs").FlashArtAtlasTask=n}(),function(){var t=include("springroll.Task"),e=include("createjs.SpriteSheet"),i=function(e){t.call(this,e,e.images[0]),this.images=e.images,this.frames=e.frames,this.globalProperty=e.globalProperty||"ss"},n=t.extend(i);i.test=function(t){return t.images&&"easeljs"==t.type&&Array.isArray(t.images)&&t.frames},n.start=function(t){var i=this.globalProperty,n=this.id,r=this.frames;this.load(this.images,(function(s){var a=new e({images:s,frames:r});namespace(i)[n]=a,a.addEventListener("destroy",(function(){delete window[i][n];for(var t=s.length-1;t>=0;--t)s[t].src=""})),t(a)}))},namespace("springroll.easeljs").SpriteSheetTask=i}(),function(){var t=include("springroll.LoadTask"),e=function(e){t.call(this,e),this.globalProperty=e.globalProperty||"ss"},i=t.prototype,n=t.extend(e);e.test=function(t){return t.src&&"easeljs"==t.type&&"createjs.SpriteSheet"==t.format},n.start=function(t){var e=this.globalProperty,n=this.id;i.start.call(this,function(i){i.id=n,i.globalProperty=e,i.type="easeljs",this.load(i,t)}.bind(this))},namespace("springroll.easeljs").FlashSpriteSheetTask=e}(),function(){var t=include("springroll.LoadTask"),e=include("createjs.Bitmap"),i=(include("springroll.Application"),function(e){t.call(this,e)}),n=t.prototype,r=t.extend(i);i.test=function(t){return t.src&&"easeljs"==t.type&&"createjs.Bitmap"==t.format},r.start=function(t){n.start.call(this,(function(i){var n=new e(i);n.destroy=function(){this.removeAllEventListeners(),this.image.src=""},t(n)}))},namespace("springroll.easeljs").BitmapTask=i}(),(new(include("springroll.ApplicationPlugin"))).setup=function(){var t=this.assetManager;t.register("springroll.easeljs.TextureAtlasTask",30),t.register("springroll.easeljs.FlashArtImageTask",40),t.register("springroll.easeljs.FlashArtAtlasTask",40),t.register("springroll.easeljs.FlashArtTask",50),t.register("springroll.easeljs.SpriteSheetTask",70),t.register("springroll.easeljs.FlashSpriteSheetTask",80),t.register("springroll.easeljs.BitmapTask",90),this.once("displayAdded",(function(t){var e=this.options;!e.defaultAssetType&&t instanceof include("springroll.EaselJSDisplay")&&(e.defaultAssetType="easeljs")}))},function(t){var e={};e.Circle=include("createjs.Circle",!1),e.Ellipse=include("createjs.Ellipse",!1),e.Rectangle=include("createjs.Rectangle"),e.Sector=include("createjs.Sector",!1),e.Point=include("createjs.Point"),e.Polygon=include("createjs.Polygon",!1),e.useRadians=!1,e.getLocalBounds=function(e){var i;if(e.nominalBounds)i=e.nominalBounds.clone();else if(e.width!==t&&e.height!==t){var n=e.width/Math.abs(e.scaleX),r=e.height/Math.abs(e.scaleY);i=new createjs.Rectangle(-e.regX,-e.regY,n,r)}else e.getLocalBounds&&(i=e.getLocalBounds())&&(i=i.clone()),i||(i=new createjs.Rectangle);return i.right=i.x+i.width,i.bottom=i.y+i.height,i},e.getScale=function(e,i){return i!==t?e["scale"+i.toUpperCase()]:{x:e.scaleX,y:e.scaleY}},e.setPosition=function(e,i,n){return n!==t?e[n]=i:(i.x!==t&&(e.x=i.x),i.y!==t&&(e.y=i.y)),e},e.getPosition=function(e,i){return i!==t?e[i]:{x:e.x,y:e.y}},e.setScale=function(e,i,n){return n!==t?e["scale"+n.toUpperCase()]=i:e.scaleX=e.scaleY=i,e},e.setPivot=function(e,i,n){return n!==t&&(e["reg"+n.toUpperCase()]=i),e.regX=i.x,e.regY=i.y,e},e.setHitArea=function(t,e){return t.hitShape=e,t},e.getBitmapSize=function(e){var i={w:0,h:0};return e.nominalBounds?(i.w=e.nominalBounds.width,i.h=e.nominalBounds.height):e.width!==t&&e.height!==t?(i.w=e.width,i.h=e.height):e.sourceRect?(i.w=e.sourceRect.width,i.h=e.sourceRect.height):e.image&&(i.w=e.image.width,i.h=e.image.height),i},e.removeChildren=function(t){t.removeAllChildren()},e.contains=function(t,e){return t.contains(e)},namespace("springroll.easeljs").DisplayAdapter=e}(),function(t){var e,i,n=include("springroll.AbstractDisplay"),r=function(t,r){e||(e=include("createjs.Stage"),i=include("createjs.Touch")),n.call(this,t,r),r=r||{},this.mouseOverRate=r.mouseOverRate||30,this.keepMouseover=r.keepMouseover||!1,this._autoPreventDefault=!r.hasOwnProperty("autoPreventDefault")||r.autoPreventDefault,"spriteStage"==r.stageType||(this.stage=new e(t)),this.stage.autoClear=!!r.clearView,this.stage.preventSelection=this._autoPreventDefault,this.adapter=include("springroll.easeljs.DisplayAdapter")},s=n.prototype,a=n.extend(r),o={delta:0};Object.defineProperty(a,"enabled",{get:function(){return this._enabled},set:function(t){Object.getOwnPropertyDescriptor(s,"enabled").set.call(this,t),t?(this.stage.enableMouseOver(this.mouseOverRate),this.stage.enableDOMEvents(!0),i.enable(this.stage,!1,!this._autoPreventDefault)):(this.keepMouseover?this.stage.enableDOMEvents("keepMove"):(this.stage.enableMouseOver(!1),this.stage.enableDOMEvents(!1)),i.disable(this.stage),"none"!=this.canvas.style.cursor&&(this.canvas.style.cursor=""))}}),Object.defineProperty(a,"autoPreventDefault",{get:function(){return this._autoPreventDefault},set:function(t){this._autoPreventDefault=!!t,this.stage&&(this._enabled&&(i.disable(this.stage),i.enable(this.stage,!1,!this._autoPreventDefault)),this.stage.preventSelection=this._autoPreventDefault)}}),a.render=function(t,e){(e||!this.paused&&this._visible)&&(o.delta=t,this.stage.update(o))},a.destroy=function(){this.stage.removeAllChildren(!0),s.destroy.call(this)},namespace("springroll").EaselJSDisplay=r,namespace("springroll.easeljs").EaselJSDisplay=r}(),function(t){var e=include("springroll.easeljs.EaselJSDisplay"),i=include("springroll.Application");t.defineProperty(e.prototype,"animator",{get:function(){return i.instance.animator}})}(Object)}(),function(){"use strict";var t,e,i,n,r;i=include("createjs.Container"),n=function(){e||(e=include("springroll.Application"),t=include("springroll.easeljs.DwellTimer",!1)),i.call(this),this.app=e.instance,this.config=this.app.config,this.background=null},(r=extend(n,i)).setup=function(){},r.teardown=function(){var t=this.children.slice();this.cleanupChildren.apply(this,t)},r.cleanupChildren=function(e){var i,n,r=arguments.length;for(n=0;n<r;n++)(i=arguments[n])&&(Array.isArray(i)&&i.length>0?this.cleanupChildren.apply(this,i):(t&&t.destroy(i),this.app.animator&&this.app.animator.stop(i,!0),i.stop&&i.stop(),i.destroy&&i.destroy(),i.removeAllChildren&&i.removeAllChildren(!0),this.contains(i)&&this.removeChild(i)))},r.destroy=function(){this.app=null,this.config=null,this.background=null,this.removeAllChildren()},namespace("springroll.easeljs").BasePanel=n,function(t){var e,i=include("springroll.State"),n=function(t,n){if(e||(e=include("springroll.easeljs.BasePanel"),include("springroll.Debug",!1)),!(t instanceof e))throw"springroll.State requires the panel be a springroll.easeljs.BasePanel";(n=n||{}).manifest&&(n.preload=n.manifest),i.call(this,t,n),this._images=[];this.on("loading",(function(t){this.addTasks&&this.addTasks(t)}),100).on("loaded",(function(t){if(t)for(var e in t)"IMG"!=t[e].tagName&&"CANVAS"!=t[e].tagName||(images[e]=t[e],this._images.push(e));this.panel.setup(),this.onAssetsLoaded()}),100).on("exit",(function(){this.panel.teardown(),this._images.forEach((function(t){delete images[t]})),this._images.length=0}),100)},r=i.prototype,s=i.extend(n);s.addTasks=null,s.onAssetsLoaded=function(){},s.destroy=function(){this._images=null,this.panel.destroy(),r.destroy.call(this)},namespace("springroll.easeljs").BaseState=n}(),function(t){var e=new(include("springroll.ApplicationPlugin"));e.setup=function(){this.options.add("manifestsPath",null,!0),this.options.override("fps",30),this.options.override("display",include("springroll.easeljs.EaselJSDisplay")),this.options.override("displayOptions",{clearView:!0}),this.options.override("canvasId","stage"),include("springroll.Debug",!1),include("springroll.easeljs.BaseState"),this._manifests={},Object.defineProperty(this,"manifests",{get:function(){return this._manifests}}),this.once("loading",(function(t){var e=this.options.manifestsPath;e&&t.push({id:"manifests",src:e,complete:i.bind(this)})}))};var i=function(t,e,i){Object.merge(this._manifests,t),this.trigger("manifestLoaded",i)};e.teardown=function(){this._manifests=null}}(),function(t){var e=include("springroll.easeljs.BasePanel"),i=include("springroll.easeljs.BaseState");t.defineProperty(e.prototype,"game",{get:function(){return this.app}}),t.defineProperty(i.prototype,"game",{get:function(){return this.app}}),t.defineProperty(i.prototype,"manifest",{get:function(){return this.preload}}),t.defineProperty(i.prototype,"assetsLoaded",{get:function(){return this.preloaded}})}(Object)}(),function(){"use strict";var t,e,i,n;(new(include("springroll.ApplicationPlugin"))).setup=function(){this.assetManager.register("springroll.easeljs.BitmapMovieClipTask",40),this.animator.register("springroll.easeljs.BitmapMovieClipInstance",20),this.animator.register("springroll.easeljs.MovieClipInstance",10)},function(t){function e(t,e){return t.position-e.position}var i=include("createjs.Container"),n=include("createjs.Point"),r=include("createjs.Rectangle"),s=include("createjs.Bitmap"),a=function(t,e){i.call(this),this.loop=!0,this.currentFrame=0,this.paused=!1,this.nominalBounds=new r,this._framerate=0,this._duration=0,this._t=0,this._prevPosition=0,this._bitmap=0,this._labels=0,this._events=0,this._frames=null,this._currentTexture=null,this._origin=null,this._scale=1,this.mouseChildren=!1,this._bitmap=new s,this.addChild(this._bitmap),t&&e&&this.init(t,e)},o=extend(a,i),h=i.prototype;Object.defineProperty(o,"framerate",{get:function(){return this._framerate},set:function(t){t>0?(this._framerate=t,this._duration=t?this._frames.length/t:0):this._framerate=this._duration=0}}),Object.defineProperty(o,"elapsedTime",{get:function(){return this._t},set:function(t){this._t=t}}),Object.defineProperty(o,"totalFrames",{get:function(){return this._frames.length}}),Object.defineProperty(o,"currentTexture",{get:function(){return this._currentTexture}}),o.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY)},o.draw=function(t,e){return!!this.DisplayObject_draw(t,e)||(this._updateTimeline(),h.draw.call(this,t,e),!0)},o.play=function(){this.paused=!1},o.stop=function(){this.paused=!0},o.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},o.gotoAndStop=function(t){this.paused=!0,this._goto(t)},o.gotoAndCache=function(t){},o.advance=function(t){this.paused||(this._framerate>0?(t&&(this._t+=.001*t),this._t>this._duration&&(this._t=this.loop?this._t-this._duration:this._duration),this._prevPosition=Math.floor(this._t*this._framerate+1e-7),this._prevPosition>=this._frames.length&&(this._prevPosition=this._frames.length-1)):this._prevPosition=this._prevPosition+1,this._updateTimeline())},o.getLabels=function(){return this._labels},o.getEvents=function(){return this._events},o.getCurrentLabel=function(){for(var t=this._labels,e=null,i=0,n=t.length;i<n&&t[i].position<=this.currentFrame;++i)e=t[i].label;return e},o.init=function(t,i){var r,s=this._labels=[],a=this._events=[];if(i.labels){var o={};for(r in i.labels){var h={label:r,position:i.labels[r],length:1};o[r]=h.position,/_(loop|stop)$/.test(r)||a.push(h),s.push(h)}for(var l=null,u=0;u<a.length;u++){var c=a[u];l=c.position,c.length=o[r+"_stop"]-l||o[r+"_loop"]-l||0}s.sort(e),a.sort(e)}this._frames=[];for(var d,p=0;p<i.frames.length;++p){var f=i.frames[p];(d=(r=f.name).lastIndexOf("/"))>=0&&(r=r.substring(d+1)),t.getFrames(r,f.min,f.max,f.digits,this._frames)}i.fps?this.framerate=i.fps:this._framerate&&(this.framerate=this._framerate),i.scale&&i.scale>0?this._scale=1/i.scale:this._scale=1,this._bitmap.scaleX=this._bitmap.scaleY=this._scale,i.origin?this._origin=new n(i.origin.x*this._scale,i.origin.y*this._scale):this._origin=new n;var g=this._frames[0],_=this.nominalBounds;_.x=-this._origin.x,_.y=-this._origin.y,_.width=g.width*this._scale,_.height=g.height*this._scale},o.copyFrom=function(t){this._frames=t._frames,this._labels=t._labels,this._events=t._events,this._origin=t._origin,this._framerate=t._framerate,this._duration=t._duration,this._scale=t._scale,this._bitmap.scaleX=this._bitmap.scaleY=this._scale},a.clone=function(t,e,i){var n=new a;return n.copyFrom(t),n.x=e||t.x,n.y=i||t.y,n},o.destroy=function(){this.removeAllChildren(),this._bitmap=null,this._frames=null,this._origin=null,this._currentTexture=null},o._tick=function(t){this.advance(t&&t.delta),h._tick.call(this,t)},o._goto=function(t){var e=null;if("string"==typeof t){for(var i=this._labels,n=0,r=i.length;n<r;++n)if(i[n].label==t){e=i[n].position;break}}else e=t;null!==e&&(this._prevPosition=e,this._framerate>0?this._t=e/this._framerate:this._t=0,this._updateTimeline())},o._updateTimeline=function(){if(this._prevPosition<0?this._prevPosition=0:this._prevPosition>=this._frames.length&&(this._prevPosition=this._frames.length-1),this.currentFrame=this._prevPosition,this._currentTexture!=this._frames[this.currentFrame]){var t=this._currentTexture=this._frames[this.currentFrame],e=this._bitmap;e.image=t.image,e.sourceRect=t.frame,e.x=-this._origin.x+t.offset.x*e.scaleX,e.y=-this._origin.y+t.offset.y*e.scaleY,t.rotated?(e.rotation=-90,e.regX=e.sourceRect.width):e.rotation=e.regX=0}},o._reset=function(){this._prevPosition=0,this._t=0,this.currentFrame=0},namespace("createjs").BitmapMovieClip=a,namespace("springroll.easeljs").BitmapMovieClip=a}(),t=include("createjs.MovieClip"),e=include("springroll.AnimatorInstance"),i=include("springroll.GenericMovieClipInstance"),(n=function(){i.call(this)}).test=function(e){return e instanceof t},n.hasAnimation=i.hasAnimation,n.getDuration=i.getDuration,e.prototype,e.extend(n,i),namespace("springroll.easeljs").MovieClipInstance=n,function(t){var e=include("springroll.AnimatorInstance"),i=include("springroll.easeljs.BitmapMovieClip"),n=include("springroll.GenericMovieClipInstance"),r=function(){n.call(this)};r.test=function(t){return t instanceof i},r.hasAnimation=n.hasAnimation,r.getDuration=n.getDuration,e.extend(r,n),namespace("springroll.easeljs").BitmapMovieClipInstance=r}(),function(){var t=include("springroll.Application"),e=function(t){this.clip=t,this.frameRate=24,this.frameDictionary=n(t),this.update=this.update.bind(this)},i=extend(e),n=function(t){var e,i,n,r,s={};for(i=t._labels.length-1;i>=0;i--)(e=(n=t._labels[i]).label).indexOf("_stop")>-1||e.indexOf("_loop")>-1||s[e]||(s[e]={first:n.position,last:null});for(i=t._labels.length-1;i>=0;i--)(e=(n=t._labels[i]).label).indexOf("_stop"),(r=e.indexOf("_loop"))>-1&&(s[e.substring(0,r)].last=n.position);return s};i.play=function(e){this.stop();var i=this.frameDictionary[e];this.startFrame=i.last,this.endFrame=i.first,this.framePassed=this.frameRate,this.clip.gotoAndStop(this.endFrame),t.instance.on("update",this.update)},i.goToPreviousFrame=function(){var t=this.clip.currentFrame-1;t<this.endFrame&&(t=this.startFrame),this.clip.gotoAndStop(t)},i.update=function(t){this.framePassed-=t,this.framePassed<=0&&(this.framePassed=this.frameRate,this.goToPreviousFrame())},i.stop=function(){t.instance.off("update",this.update)},namespace("springroll.easeljs").ReversePlayback=e}(),function(){var t=include("springroll.easeljs.TextureAtlasTask"),e=include("springroll.easeljs.BitmapMovieClip"),i=function(e){t.call(this,e),this.anim=this.filter(e.anim)},n=t.extend(i);i.test=function(e){return e.anim&&t.test(e)},n.start=function(t){this.loadAtlas({_anim:this.anim},(function(i,n){t(new e(i,n._anim),n)}))},namespace("springroll.easeljs").BitmapMovieClipTask=i}(),function(){var t=include("springroll.Application"),e=namespace("springroll").Animator=namespace("springroll.easeljs").Animator={};e.canAnimate=function(e){return t.instance.animator.canAnimate(e)},e.getDuration=function(e,i){return t.instance.animator.getDuration(e,i)},e.getTimeline=function(e){return t.instance.animator.getTimeline(e)},e.instanceHasAnimation=function(e,i){return t.instance.animator.hasAnimation(e,i)},e.pauseInGroup=function(e,i){t.instance.animator.pauseInGroup(e,i)},e.resume=function(){t.instance.animator.resume()},e.stopAll=function(e,i){t.instance.animator.stopAll(e,i)},e.destroy=function(){t.instance.animator.destroy()},e.getPaused=function(e){return t.instance.animator.paused},e.init=function(){return t.intance.animator},e.pause=function(){t.instance.animator.pause()},e.play=function(e,i,n,r){return t.instance.animator.play(e,i,n,r)},e.stop=function(e,i){t.instance.animator.stop(e,i)},e.toString=function(){return"[Animator]"},Object.defineProperties(e,{captions:{get:function(){return t.instance.animator.captions}},debug:{get:function(){return t.instance.animator.debug}}})}()}(),function(){"use strict";var t,e,i,n,r;!function(t){function e(t){if(!t||"object"!=typeof t)return null;var e=t.constructor();for(var i in e||(e={}),t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}var i=include("createjs.Rectangle"),n=include("createjs.Container"),r=include("createjs.ColorMatrix"),s=include("createjs.ColorFilter"),a=include("createjs.ColorMatrixFilter"),o=include("createjs.Text"),h=include("createjs.Event"),l=include("createjs.Point"),u=include("createjs.Bitmap"),c=function(r,s,a){include("springroll.Debug",!1),n.call(this),this.back=null,this.label=null,this._overCB=this._onMouseOver.bind(this),this._outCB=this._onMouseOut.bind(this),this._downCB=this._onMouseDown.bind(this),this._upCB=this._onMouseUp.bind(this),this._clickCB=this._onClick.bind(this),this._stateFlags={},this._statePriority=null,this._stateData={},this._width=0,this._height=0,this._offset=new l,this.mouseChildren=!1;var h,c,d,p,g,_,v=this._stateData;if(s&&(delete(h=e(s)).text,h.x===t&&(h.x="center"),h.y===t&&(h.y="center")),r.image){var m,y;for(c=r.image,this._statePriority=r.priority||f,g=this._statePriority.length-1;g>=0;--g)_=this._statePriority[g],this._addProperty(_),"disabled"!=_&&"up"!=_&&(this._stateFlags[_]=!1),m=r[_],v[_]=m?e(m):v.up,s&&(m&&m.label?(m=m.label,(y=v[_].label={}).font=m.font||h.font,y.color=m.color||h.color,y.stroke=m.hasOwnProperty("stroke")?m.stroke:h.stroke,y.shadow=m.hasOwnProperty("shadow")?m.shadow:h.shadow,y.textBaseline=m.textBaseline||h.textBaseline,y.x=m.x||h.x,y.y=m.y||h.y):v[_].label=h);if(v.up.trim){var b=v.up.trim;d=b.width,p=b.height}else d=v.up.src.width,p=v.up.src.height;v.up,v.over||(v.over=v.up),v.down||(v.down=v.up),v.disabled||(v.disabled=v.up),r.offset?(this._offset.x=r.offset.x,this._offset.y=r.offset.y):this._offset.x=this._offset.y=0}else d=(c=r).width,p=c.height/3,this._statePriority=f,v.disabled=v.up={src:new i(0,0,d,p)},v.over={src:new i(0,p,d,p)},v.down={src:new i(0,2*p,d,p)},h&&(v.up.label=v.over.label=v.down.label=v.disabled.label=h),this._offset.x=this._offset.y=0;this.back=new u(c),this.addChild(this.back),this._width=d,this._height=p,s&&(this.label=new o(s.text||"",v.up.label.font,v.up.label.color),this.addChild(this.label)),this.enabled=a===t||!!a},d=extend(c,n);n.prototype,c.BUTTON_PRESS="buttonPress",c.BUTTON_OVER="buttonOver",c.BUTTON_OUT="buttonOut";var p=["disabled","enabled","up","over","down"],f=["disabled","down","over","up"];Object.defineProperty(d,"width",{get:function(){return this._width*this.scaleX},set:function(t){this.scaleX=t/this._width}}),Object.defineProperty(d,"height",{get:function(){return this._height*this.scaleY},set:function(t){this.scaleY=t/this._height}}),d.setText=function(t){if(this.label){this.label.text=t;for(var e,i=0,n=this._statePriority.length;i<n;++i)if(this._stateFlags[this._statePriority[i]]){e=this._stateData[this._statePriority[i]];break}e||(e=this._stateData.up),"center"==(e=e.label).x?this.label.x=.5*(this._width-this.label.getMeasuredWidth())+this._offset.x:this.label.x=e.x+this._offset.x,"center"==e.y?this.label.y=.5*this._height+this._offset.y:this.label.y=e.y+this._offset.y}},Object.defineProperty(d,"enabled",{get:function(){return!this._stateFlags.disabled},set:function(t){this._stateFlags.disabled=!t,t?(this.cursor="pointer",this.addEventListener("mousedown",this._downCB),this.addEventListener("mouseover",this._overCB),this.addEventListener("mouseout",this._outCB)):(this.cursor=null,this.removeEventListener("mousedown",this._downCB),this.removeEventListener("mouseover",this._overCB),this.removeEventListener("mouseout",this._outCB),this.removeEventListener("pressup",this._upCB),this.removeEventListener("click",this._clickCB),this._stateFlags.down=this._stateFlags.over=!1),this._updateState()},configurable:!0}),d._addProperty=function(t){p.indexOf(t)>=0||Object.defineProperty(this,t,{get:function(){return this._stateFlags[t]},set:function(e){this._stateFlags[t]=e,this._updateState()}})},d._updateState=function(){var t=this.back;if(t){for(var e,i=0,n=this._statePriority.length;i<n;++i)if(this._stateFlags[this._statePriority[i]]){e=this._stateData[this._statePriority[i]];break}e||(e=this._stateData.up),t.sourceRect=e.src,e.rotated?(t.rotation=-90,t.regX=t.sourceRect.width):t.rotation=t.regX=0,e.trim?(t.x=e.trim.x+this._offset.x,t.y=e.trim.y+this._offset.y):(t.x=this._offset.x,t.y=this._offset.y);var r=this.label;if(r){var s=e.label;r.textBaseline=s.textBaseline||"middle",r.stroke=s.stroke,r.shadow=s.shadow,r.font=s.font,r.color=s.color||"#000","center"==s.x?r.x=.5*(this._width-r.getMeasuredWidth())+this._offset.x:r.x=s.x+this._offset.x,"center"==s.y?r.y=.5*this._height+this._offset.y:r.y=s.y+this._offset.y}return e}},d._onMouseDown=function(t){this.addEventListener("pressup",this._upCB),this.addEventListener("click",this._clickCB),this._stateFlags.down=!0,this._updateState()},d._onMouseUp=function(t){this.removeEventListener("pressup",this._upCB),this.removeEventListener("click",this._clickCB),this._stateFlags.down=!1,this._updateState()},d._onClick=function(t){this.dispatchEvent(new h(c.BUTTON_PRESS))},d._onMouseOver=function(t){this._stateFlags.over=!0,this._updateState(),this.dispatchEvent(new h(c.BUTTON_OVER))},d._onMouseOut=function(t){this._stateFlags.over=!1,this._updateState(),this.dispatchEvent(new h(c.BUTTON_OUT))},d.destroy=function(){this.removeAllChildren(),this.removeAllEventListeners(),this._downCB=null,this._upCB=null,this._overCB=null,this._outCB=null,this.back=null,this.label=null,this._statePriority=null,this._stateFlags=null,this._stateData=null},c.generateDefaultStates=function(e,n,o){var h=e.width,l=e.height/3,c=document.createElement("canvas"),d=h,p=e.height;n&&(p+=l),o&&(d+=2*o.size,p+=l+2*o.size,o.rgba&&(o.red=o.rgba[0],o.green=o.rgba[1],o.blue=o.rgba[2],o.rgba[3]&&(o.alpha=o.rgba[3]))),c.width=d,c.height=p;var g=c.getContext("2d");g.drawImage(e,0,0);var _={image:c,up:{src:new i(0,0,h,l)},over:{src:new i(0,l,h,l)},down:{src:new i(0,2*l,h,l)}},v=new u(e);v.sourceRect=_.up.src;var m=e.height;if(n){g.save(),g.translate(0,m);var y=new r;n.saturation!==t&&y.adjustSaturation(n.saturation),n.brightness!==t&&y.adjustBrightness(2.55*n.brightness),n.contrast!==t&&y.adjustContrast(n.contrast),v.filters=[new a(y)],v.cache(0,0,_.up.src.width,_.up.src.height),v.draw(g),_.disabled={src:new i(0,m,0|h,0|l)},m+=l,g.restore()}if(o){g.save();var b=h+2*o.size,x=l+2*o.size;v.filters=[new s(0,0,0,1,o.red,o.green,o.blue,o.alpha!==t?-255+o.alpha:0)],v.scaleX=b/h,v.scaleY=x/l,v.x=0,v.y=m,v.cache(0,0,b,x),v.updateContext(g),v.draw(g),g.restore(),v.scaleX=v.scaleY=1,v.x=o.size,v.y=m+o.size,v.filters=null,v.uncache(),v.updateContext(g),v.draw(g);var T=new i(o.size,o.size,b,x);_.up.trim=T,_.over.trim=T,_.down.trim=T,_.disabled&&(_.disabled.trim=T),_.highlighted={src:new i(0,m,0|b,0|x)},_.priority=f.slice(),_.priority.unshift("highlighted"),_.offset={x:-o.size,y:-o.size}}return _},c.generateSettingsFromAtlas=function(t,e,n){for(var r={priority:n},s=n.length-1;s>=0;--s){var a=t.getFrame(e+"_"+n[s]);if(a){r.image||(r.image=a.image);var o=r[n[s]]={src:a.frame};a.rotated&&(o.rotated=!0),a.trimmed&&(o.trim=new i(a.offset.x,a.offset.y,a.width,a.height))}else r[n[s]]=r.up}return r},namespace("springroll").Button=c,namespace("springroll.easeljs").Button=c}(),e=include("springroll.easeljs.Button"),i=function(i,n,r,s,a){t=include("springroll.Sound"),this.clickAlias=s||"ButtonClick",this.overAlias=a||"ButtonRollover",this._audioEnabled=!0,this._onRollover=this._onRollover.bind(this),this._onButtonPress=this._onButtonPress.bind(this),e.call(this,i,n,r)},n=e.prototype,(r=e.extend(i))._onButtonPress=function(e){this.clickAlias&&this._audioEnabled&&t.instance.play(this.clickAlias)},r._onRollover=function(e){this.overAlias&&this.enabled&&this._audioEnabled&&t.instance.play(this.overAlias)},Object.defineProperty(r,"audioEnabled",{get:function(){return this._audioEnabled},set:function(t){this._audioEnabled=t}}),Object.defineProperty(r,"enabled",{get:function(){return!this._stateFlags.disabled},set:function(t){this.removeEventListener("rollover",this._onRollover),this.removeEventListener(e.BUTTON_PRESS,this._onButtonPress),t&&(this.addEventListener("rollover",this._onRollover),this.addEventListener(e.BUTTON_PRESS,this._onButtonPress)),Object.getOwnPropertyDescriptor(n,"enabled").set.call(this,t)}}),r.destroy=function(){this.removeEventListener("rollover",this._onRollover),this.removeEventListener(e.BUTTON_PRESS,this._onButtonPress),this.audioEnabled=!1,n.destroy.apply(this)},namespace("springroll").SoundButton=i,namespace("springroll.easeljs").SoundButton=i,function(){var t=function(t){this.obj=t,this.mouseDownObjPos={x:0,y:0},this.dragOffset=new createjs.Point,this.mouseDownStagePos={x:0,y:0}};namespace("springroll").DragData=t,namespace("springroll.easeljs").DragData=t}(),function(){var t,e,i=include("springroll.easeljs.DragData"),n=include("springroll.Application"),r=function(i,r,s){e||(t=include("createjs.Tween",!1),e=include("createjs.Stage")),"function"!=typeof i||s||(s=r,r=i,i=n.instance.display),this.draggedObj=null,this.dragStartThreshold=20,this.mouseDownStagePos={x:0,y:0},this.mouseDownObjPos={x:0,y:0},this.allowStickyClick=!0,this.isTouchMove=!1,this.isHeldDrag=!1,this.isStickyClick=!1,this.snapSettings=null,stage instanceof e?this._theStage=i:this._theStage=i.stage,this._dragOffset=null,this._dragPointerID=0,this._dragStartCallback=r,this._dragEndCallback=s,this._triggerHeldDrag=this._triggerHeldDrag.bind(this),this._triggerStickyClick=this._triggerStickyClick.bind(this),this._stopDrag=this._stopDrag.bind(this),this._updateObjPosition=this._updateObjPosition.bind(this),this._draggableObjects=[],this._helperPoint=null,this._multitouch=!1},s=extend(r);Object.defineProperty(s,"multitouch",{get:function(){return this._multitouch},set:function(t){if(this.draggedObj)if(this._multitouch)for(var e in this.draggedObj)this._stopDrag(e,!0);else this._stopDrag(null,!0);this._multitouch=!!t,this.draggedObj=t?{}:null}}),s.startDrag=function(t,e){this._objMouseDown(e,t)},s._objMouseDown=function(e,n){var r,s,a,o;!this._multitouch&&this.draggedObj||this._multitouch&&!e||(this._multitouch?(r=new i(n),this.draggedObj[e.pointerID]=r,s=r.mouseDownObjPos,a=r.mouseDownStagePos,o=r.dragOffset):(this.draggedObj=n,s=this.mouseDownObjPos,a=this.mouseDownStagePos,o=this._dragOffset=new createjs.Point),t&&t.removeTweens(n),e&&(n._dragOffset?(o.x=n._dragOffset.x,o.y=n._dragOffset.y):((o=n.parent.globalToLocal(e.stageX,e.stageY,o)).x-=n.x,o.y-=n.y)),s.x=n.x,s.y=n.y,e?(this._theStage._getPointerData(e.pointerID).target=n,this._dragPointerID=e.pointerID,this.allowStickyClick&&"touchstart"!=e.nativeEvent.type?(a.x=e.stageX,a.y=e.stageY,n.addEventListener("pressmove",this._triggerHeldDrag),n.addEventListener("pressup",this._triggerStickyClick)):(this.isTouchMove="touchstart"==e.nativeEvent.type,this.isHeldDrag=!0,this._startDrag(e))):(this.isHeldDrag=!0,this._dragPointerID=-1,this._startDrag()))},s._triggerStickyClick=function(t){this.isStickyClick=!0;var e=this._multitouch?this.draggedObj[t.pointerID].obj:this.draggedObj;e.removeEventListener("pressmove",this._triggerHeldDrag),e.removeEventListener("pressup",this._triggerStickyClick),this._startDrag(t)},s._triggerHeldDrag=function(t){var e,i;this.isHeldMove=!0,this._multitouch?(i=this.draggedObj[t.pointerID].obj,e=this.draggedObj[t.pointerID].mouseDownStagePos):(i=this.draggedObj,e=this.mouseDownStagePos);var n=t.stageX-e.x,r=t.stageY-e.y;n*n+r*r>=this.dragStartThreshold*this.dragStartThreshold&&(this.isHeldDrag=!0,i.removeEventListener("pressmove",this._triggerHeldDrag),i.removeEventListener("pressup",this._triggerStickyClick),this._startDrag(t))},s._startDrag=function(t){var e=this._theStage;e.addEventListener("stagemousemove",this._updateObjPosition),e.addEventListener("stagemouseup",this._stopDrag),t&&this._updateObjPosition(t),this._dragStartCallback(this._multitouch?this.draggedObj[t.pointerID].obj:this.draggedObj)},s.stopDrag=function(t,e){var i=null;if(this._multitouch&&e)for(var n in this.draggedObj)if(this.draggedObj[n].obj==e){i=n;break}this._stopDrag(i,!0===t)},s._stopDrag=function(t,e){var i,n;if(this._multitouch){if(!t){for(n in this.draggedObj)this._stopDrag(n,e);return}n=t,t instanceof createjs.MouseEvent&&(n=t.pointerID);var r=this.draggedObj[n];if(!r)return;i=r.obj,this.mouseDownObjPos.x=r.mouseDownObjPos.x,this.mouseDownObjPos.y=r.mouseDownObjPos.y,delete this.draggedObj[n]}else{if(t&&t.pointerID!=this._dragPointerID&&this._dragPointerID>-1)return;i=this.draggedObj,this.draggedObj=null}if(i){i.removeEventListener("pressmove",this._triggerHeldDrag),i.removeEventListener("pressup",this._triggerStickyClick);var s=!this._multitouch;if(this._multitouch){var a=!1;for(n in this.draggedObj){a=!0;break}s=!a}s&&(this._theStage.removeEventListener("stagemousemove",this._updateObjPosition),this._theStage.removeEventListener("stagemouseup",this._stopDrag)),this.isTouchMove=!1,this.isStickyClick=!1,this.isHeldMove=!1,!1!==e&&this._dragEndCallback(i)}},s._updateObjPosition=function(t){if(t&&(this.isTouchMove||this._theStage.mouseInBounds)){var e,i;if(this._multitouch){var n=this.draggedObj[t.pointerID];if(!n)return;e=n.obj,i=n.dragOffset}else{if(t.pointerID!=this._dragPointerID&&this._dragPointerID>-1)return;e=this.draggedObj,i=this._dragOffset}var r=e.parent.globalToLocal(t.stageX,t.stageY,this._helperPoint),s=e._dragBounds;if(s?(e.x=Math.clamp(r.x-i.x,s.x,s.right),e.y=Math.clamp(r.y-i.y,s.y,s.bottom)):(e.x=r.x-i.x,e.y=r.y-i.y),this.snapSettings)switch(this.snapSettings.mode){case"points":this._handlePointSnap(r,i,e)}}},s._handlePointSnap=function(t,e,i){for(var n,r,s=this.snapSettings,a=s.dist*s.dist,o=s.points,h=t.x-e.x,l=t.y-e.y,u=-1,c=null,d=o.length-1;d>=0;--d)n=o[d],(r=Math.distSq(h,l,n.x,n.y))<=a&&(r<u||-1==u)&&(u=r,c=n);c&&(i.x=c.x,i.y=c.y)};var a=function(t){!1!==t?(this.addEventListener("mousedown",this._onMouseDownListener),this.cursor="pointer"):o.apply(this)},o=function(){this.removeEventListener("mousedown",this._onMouseDownListener),this.cursor=null},h=function(t){this._dragMan._objMouseDown(t,this)};s.addObject=function(t,e,i){e&&(e.right=e.x+e.width,e.bottom=e.y+e.height),t._dragBounds=e,t._dragOffset=i||null,this._draggableObjects.indexOf(t)>=0||(t.enableDrag=a,t.disableDrag=o,t._onMouseDownListener=h.bind(t),t._dragMan=this,this._draggableObjects.push(t))},s.removeObject=function(t){if(t.disableDrag){t.disableDrag(),delete t.enableDrag,delete t.disableDrag,delete t._onMouseDownListener,delete t._dragMan,delete t._dragBounds,delete t._dragOffset;var e=this._draggableObjects.indexOf(t);e>=0&&this._draggableObjects.splice(e,1)}},s.destroy=function(){this.stopDrag(!1),this.draggedObj=null,this._updateObjPosition=null,this._dragStartCallback=null,this._dragEndCallback=null,this._triggerHeldDrag=null,this._triggerStickyClick=null,this._stopDrag=null,this._theStage=null;for(var t,e=this._draggableObjects.length-1;e>=0;--e)(t=this._draggableObjects[e]).disableDrag(),delete t.enableDrag,delete t.disableDrag,delete t._onMouseDownListener,delete t._dragMan,delete t._dragBounds,delete t._dragOffset;this._draggableObjects=null,this._helperPoint=null},namespace("springroll").DragManager=r,namespace("springroll.easeljs").DragManager=r}()}(),function(){"use strict";var t;!function(t){var e=include("PIXI.extras.BitmapText",!1);if(e){var i=e.prototype;i.setPivotToAlign=!1,i._orig_updateText=i.updateText,i.updateText=function(){if(this._orig_updateText(),this.setPivotToAlign)switch(this.align){case"center":this.pivot.x=this.textWidth/2;break;case"right":this.pivot.x=this.textWidth;break;default:this.pivot.x=0}}}}(),function(t){var e=include("PIXI.Container",!1);if(e){var i=e.prototype;i.useBoundsForSize=!0,i._width=0,i._height=0,Object.getOwnPropertyDescriptor(i,"width").configurable&&(Object.defineProperty(i,"width",{configurable:!0,get:function(){return this.useBoundsForSize?this.scale.x*this.getLocalBounds().width:this.scale.x*this._width},set:function(t){if(this.useBoundsForSize){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}else 0===this._width?this._width=t/this.scale.x:this.scale.x=t/this._width}}),Object.defineProperty(i,"height",{configurable:!0,get:function(){return this.useBoundsForSize?this.scale.y*this.getLocalBounds().height:this.scale.y*this._height},set:function(t){if(this.useBoundsForSize){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}else 0===this._height?this._height=t/this.scale.y:this.scale.y=t/this._height}}))}}(),(t=include("PIXI.interaction.InteractionManager",!1))&&(t.prototype.removeClickEvents=function(){this.interactionDOMElement&&(window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),window.removeEventListener("mouseup",this.onMouseUp,!0))}),function(t){var e=include("PIXI.Point",!1);if(e){var i=e.prototype;i.dotProd=function(t){return this.x*t.x+this.y*t.y},i.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},i.lengthSq=function(){return this.x*this.x+this.y*this.y},i.normalize=function(){var t=1/this.length();this.x*=t,this.y*=t},i.subtract=function(t){this.x-=t.x,this.y-=t.y},i.add=function(t){this.x+=t.x,this.y+=t.y},i.truncate=function(t){var e=this.length();if(e>t){var i=t/e;this.x*=i,this.y*=i}},i.scaleBy=function(t){this.x*=t,this.y*=t},i.distance=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},i.distanceSq=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},e.localToGlobal=function(t,e,i,n){return n||(n=new PIXI.Point),n.x=e,n.y=i,t.toGlobal(n,n)},e.globalToLocal=function(t,e,i,n){return n||(n=new PIXI.Point),n.x=e,n.y=i,t.toLocal(n,null,n)},e.localToLocal=function(t,e,i,n,r){return r||(r=new PIXI.Point),r.x=i,r.y=n,e.toLocal(r,t,r)},i.toString=function(){return"("+this.x+", "+this.y+")"}}}(),function(t){var e=180/Math.PI,i=function(t,e,i,n,r){for(this.x=t||0,this.y=e||0,this.radius=i||0,this.startAngle=n||0;this.startAngle<0;)this.startAngle+=360;this.endAngle=r||0,this.endAngle<this.startAngle&&(this.endAngle+=360)},n=i.prototype;n.clone=function(){return new PIXI.Sector(this.x,this.y,this.radius,this.startAngle,this.endAngle)},n.contains=function(t,i){if(this.radius<=0)return!1;var n=this.x-t,r=this.y-i;if((n*=n)+(r*=r)>this.radius*this.radius)return!1;for(var s=Math.atan2(i-this.y,t-this.x)*e;s<this.startAngle;)s+=360;return s>=this.startAngle&&s<=this.endAngle},n.constructor=i,namespace("PIXI").Sector=i}(),function(t){var e=include("PIXI.Text",!1);if(e){var i=e.prototype;i.setPivotToAlign=!1,i._orig_updateText=i.updateText,i.updateText=function(){if(this._orig_updateText(),this.setPivotToAlign)switch(this.style.align){case"center":this.pivot.x=this._width/2;break;case"right":this.pivot.x=this._width;break;default:this.pivot.x=0}}}}(),function(){var t,e=include("springroll.ColorAlphaTask"),i=include("springroll.Task"),n=include("PIXI.Texture"),r=include("PIXI.BaseTexture"),s=include("PIXI.utils"),a=include("springroll.Application"),o=function(e,n){t||(t=include("springroll.pixi.PixiDisplay")),i.call(this,e,n||e.image),this.image=this.filter(e.image),this.color=this.filter(e.color),this.alpha=this.filter(e.alpha),this.uploadToGPU=!!e.uploadToGPU},h=i.extend(o);o.test=function(t){return"pixi"==t.type&&(!!t.image||!!t.alpha&&!!t.color)},h.start=function(t){this.loadImage({},t)},h.loadImage=function(i,o,h){this.image?i._image=this.image:(i._color=this.color,i._alpha=this.alpha),this.load(i,function(i){var l;l=i._image?i._image:e.mergeAlpha(i._color,i._alpha);var u=this.original.scale;u&&1!==u||(u=s.getResolutionOfUrl(this.image||this.color));var c=new n(new r(l,null,u));if(c.baseTexture.imageUrl=this.image,this.cache&&!h){var d=this.id;s.useFilenamesForTextures||(d=this.image||this.color),s.TextureCache[d]=c,s.BaseTextureCache[d]=c.baseTexture,c.__T_destroy=c.destroy,c.destroy=function(){this.__destroyed||(this.__destroyed=!0,this.__T_destroy(!0),s.TextureCache[d]==this&&delete s.TextureCache[d])}}if(this.uploadToGPU){var p=a.instance.displays;for(var f in p){var g=p[f];if(g instanceof t&&g.isWebGL){g.renderer.updateTexture(c);break}}}o(c,i)}.bind(this))},h.destroy=function(){i.prototype.destroy.call(this)},namespace("springroll.pixi").TextureTask=o}(),function(t){var e=include("PIXI.Rectangle"),i=include("PIXI.Texture"),n=include("PIXI.utils"),r=function(t,r,s){this.baseTexture=t.baseTexture,this.texture=t,this.frames={};var a=r.meta&&"http://www.codeandweb.com/texturepacker"==r.meta.app,o=r.frames;for(var h in o){var l=o[h],u=h.lastIndexOf(".");u>0&&(h=h.substring(0,u)),(u=h.lastIndexOf("/"))>=0&&(h=h.substring(u+1));var c=l.frame;if(c){var d=null,p=null;d=l.rotated&&a?new e(c.x,c.y,c.h,c.w):new e(c.x,c.y,c.w,c.h),l.trimmed&&(p=new e(l.spriteSourceSize.x,l.spriteSourceSize.y,l.sourceSize.w,l.sourceSize.h)),this.frames[h]=new i(this.baseTexture,d,d.clone(),p,l.rotated),s&&(n.TextureCache[h]=this.frames[h])}}},s=extend(r);s.getFrame=function(t){return this.frames[t]||null},s.getFrames=function(t,e,i,n,r){void 0===n&&(n=4),n<0&&(n=0),r||(r=[]);var s,a,o=[],h=[];for(s=1;s<n;++s){var l="";a=1;for(var u=0;u<s;++u)l+="0",a*=10;o.unshift(l),h.push(a)}var c,d,p=h.length;for(s=e,d=i;s<=d;++s){var f=null;for(a=0;a<p;++a)if(s<h[a]){f=o[a]+s;break}f||(f=s.toString());var g=t.replace("#",f),_=this.frames[g];_&&(c=_),c&&r.push(c)}return r},s.destroy=function(){this.texture.destroy(!0),this.texture=null,this.baseTexture=null,this.frames=null},namespace("springroll.pixi").TextureAtlas=r}(),function(){var t=include("springroll.pixi.TextureTask"),e=(include("PIXI.Texture"),include("springroll.pixi.TextureAtlas")),i=(include("PIXI.utils"),function(e,i){t.call(this,e,i||e.atlas),this.atlas=this.filter(e.atlas)}),n=t.extend(i);i.test=function(e){return!!e.atlas&&t.test(e)},n.start=function(t){this.loadAtlas({},t)},n.loadAtlas=function(t,i,n){t._atlas=this.atlas,this.loadImage(t,function(t,r){var s=r._atlas,a=new e(t,s,this.cache&&!n);s.meta&&s.meta.scale&&1!=parseFloat(s.meta.scale)&&(t.baseTexture.resolution=parseFloat(r._atlas.meta.scale),t.baseTexture.update()),i(a,r)}.bind(this),!0)},namespace("springroll.pixi").TextureAtlasTask=i}(),function(){var t=include("springroll.pixi.TextureTask"),e=include("PIXI.Texture"),i=include("PIXI.Rectangle"),n=include("PIXI.extras.BitmapText",!1);if(include("PIXI.utils"),n){var r=function(e){t.call(this,e,e.font),this.font=this.filter(e.font)},s=t.extend(r);r.test=function(e){return!!e.font&&t.test(e)},s.start=function(t){this.loadImage({_font:this.font},function(r,s){var a=s._font,o={},h=a.getElementsByTagName("info")[0],l=a.getElementsByTagName("common")[0];o.font=h.getAttribute("face"),o.size=parseInt(h.getAttribute("size"),10),o.lineHeight=parseInt(l.getAttribute("lineHeight"),10),o.chars={};var u,c=a.getElementsByTagName("char");for(u=0;u<c.length;u++){var d=c[u],p=parseInt(d.getAttribute("id"),10),f=new i(parseInt(d.getAttribute("x"),10)+r.frame.x,parseInt(d.getAttribute("y"),10)+r.frame.y,parseInt(d.getAttribute("width"),10),parseInt(d.getAttribute("height"),10));o.chars[p]={xOffset:parseInt(d.getAttribute("xoffset"),10),yOffset:parseInt(d.getAttribute("yoffset"),10),xAdvance:parseInt(d.getAttribute("xadvance"),10),kerning:{},texture:new e(r.baseTexture,f)}}var g=a.getElementsByTagName("kerning");for(u=0;u<g.length;u++){var _=g[u],v=parseInt(_.getAttribute("first"),10),m=parseInt(_.getAttribute("second"),10),y=parseInt(_.getAttribute("amount"),10);o.chars[m].kerning[v]=y}this.cache&&n.fonts&&(n.fonts[o.font]=o),o.destroy=function(){o.chars=null,r.destroy()},t(o,s)}.bind(this),!0)},namespace("springroll.pixi").BitmapFontTask=r}}(),(new(include("springroll.ApplicationPlugin"))).setup=function(){this.assetManager.register("springroll.pixi.TextureTask",60),this.assetManager.register("springroll.pixi.TextureAtlasTask",70),this.assetManager.register("springroll.pixi.BitmapFontTask",80),this.once("displayAdded",(function(t){var e=this.options;!e.defaultAssetType&&t instanceof include("springroll.PixiDisplay")&&(e.defaultAssetType="pixi")}))},function(t){var e={};e.Circle=include("PIXI.Circle"),e.Ellipse=include("PIXI.Ellipse"),e.Rectangle=include("PIXI.Rectangle"),e.Sector=include("PIXI.Sector"),e.Point=include("PIXI.Point"),e.Polygon=include("PIXI.Polygon"),e.useRadians=!0,e.getLocalBounds=function(t){var e,i=t.width,n=t.height;return(e=i&&n?new PIXI.Rectangle(-t.pivot.x,-t.pivot.y,i/t.scale.x,n/t.scale.y):new PIXI.Rectangle).right=e.x+e.width,e.bottom=e.y+e.height,e},e.getScale=function(e,i){return i!==t?e.scale[i]:e.scale},e.setPosition=function(e,i,n){return n!==t?e.position[n]=i:(i.x!==t&&(e.position.x=i.x),i.y!==t&&(e.position.y=i.y)),e},e.getPosition=function(e,i){return i!==t?e.position[i]:e.position},e.setScale=function(e,i,n){return n!==t?e.scale[n]=i:e.scale.x=e.scale.y=i,e},e.setPivot=function(e,i,n){return n!==t&&(e.pivot[n]=i),e.pivot=i,e},e.setHitArea=function(t,e){return t.hitArea=e,t},e.getBitmapSize=function(t){return{h:t.height/t.scale.y,w:t.width/t.scale.x}},e.removeChildren=function(t){t.removeChildren()},e.contains=function(t,e){for(;e;){if(e==t)return!0;e=e.parent}return!1},namespace("springroll.pixi").DisplayAdapter=e}(),function(t){var e=include("springroll.AbstractDisplay"),i=include("PIXI.Container"),n=include("PIXI.CanvasRenderer"),r=include("PIXI.WebGLRenderer"),s=include("PIXI.autoDetectRenderer"),a=function(t,a){e.call(this,t,a),a=a||{},this.keepMouseover=a.keepMouseover||!1,this._autoPreventDefault=!a.hasOwnProperty("autoPreventDefault")||a.autoPreventDefault,this.stage=new i,this.renderer=null;var o={view:this.canvas,transparent:!!a.transparent,antialias:!!a.antiAlias,preserveDrawingBuffer:!!a.preserveDrawingBuffer,clearBeforeRender:!!a.clearView,backgroundColor:a.backgroundColor||0,autoResize:!1},h=!!a.preMultAlpha;o.transparent&&!h&&(o.transparent="notMultiplied"),"webgl"!=a.forceContext&&window.navigator.userAgent.indexOf("Trident/7.0")>0&&(a.forceContext="canvas2d"),"canvas2d"==a.forceContext?this.renderer=new n(this.width,this.height,o):"webgl"==a.forceContext?this.renderer=new r(this.width,this.height,o):this.renderer=s(this.width,this.height,o),this.isWebGL=this.renderer instanceof r,this.adapter=include("springroll.pixi.DisplayAdapter"),this.autoPreventDefault=this._autoPreventDefault},o=e.prototype,h=e.extend(a);Object.defineProperty(h,"enabled",{get:function(){return this._enabled},set:function(t){Object.getOwnPropertyDescriptor(o,"enabled").set.call(this,t);var e=this.renderer.plugins.interaction;e&&(t?e.setTargetElement(this.canvas):this.keepMouseover?e.removeClickEvents():e.removeEvents())}}),Object.defineProperty(h,"autoPreventDefault",{get:function(){return this._autoPreventDefault},set:function(t){this._autoPreventDefault=!!t;var e=this.renderer.plugins.interaction;e&&(e.autoPreventDefault=this._autoPreventDefault)}}),h.resize=function(t,e){o.resize.call(this,t,e),this.renderer.resize(t,e)},h.render=function(t,e){(e||!this.paused&&this._visible)&&this.renderer.render(this.stage)},h.destroy=function(){this.stage.destroy(),o.destroy.call(this),this.renderer.destroy(),this.renderer=null},namespace("springroll").PixiDisplay=a,namespace("springroll.pixi").PixiDisplay=a}(),function(){function t(t){r+=t,e.update(r)}var e=include("PIXI.ticker.shared",!1),i=include("springroll.ApplicationPlugin");if(e){var n=new i,r=0;e.autoStart=!1,e.stop(),n.setup=function(){this.on("update",t,300)}}}(),function(t){var e=include("springroll.pixi.PixiDisplay"),i=include("springroll.Application");t.defineProperty(e.prototype,"animator",{get:function(){return i.instance.animator}})}(Object)}(),function(){"use strict";var t,e,i,n,r;(new(include("springroll.ApplicationPlugin"))).setup=function(){this.assetManager.register("springroll.pixi.AdvancedMovieClipTask",80),this.animator.register("springroll.pixi.AdvancedMovieClipInstance",10)},function(t){function e(t,e){return t.position-e.position}function i(t,e,i,n,s){void 0===n&&(n=4),n<0&&(n=0),s||(s=[]);var a,o,h=[],l=[];for(a=1;a<n;++a){var u="";o=1;for(var c=0;c<a;++c)u+="0",o*=10;h.unshift(u),l.push(o)}var d,p,f=l.length,g=r.fromFrame;for(a=e,p=i;a<=p;++a){var _=null;for(o=0;o<f;++o)if(a<l[o]){_=h[o]+a;break}_||(_=a.toString());var v=g(t.replace("#",_),!0);v&&(d=v),d&&s.push(d)}return s}var n=include("PIXI.Sprite"),r=include("PIXI.Texture"),s=function(t,e){n.call(this),this.currentFrame=0,this._framerate=0,this._duration=0,this._t=0,this._labels=0,this._events=0,this._textures=null,t&&this.init(t,e)},a=extend(s,n),o=n.prototype;Object.defineProperty(a,"framerate",{get:function(){return this._framerate},set:function(t){t>0?(this._framerate=t,this._duration=t?this._textures.length/t:0):this._framerate=this._duration=0}}),Object.defineProperty(a,"elapsedTime",{get:function(){return this._t},set:function(t){this._t=t,this._t>this._duration&&(this._t=this._duration),this.currentFrame=Math.floor(this._t*this._framerate+1e-7),this.currentFrame>=this._textures.length&&(this.currentFrame=this._textures.length-1),this.texture=this._textures[this.currentFrame]||r.EMPTY}}),Object.defineProperty(a,"totalFrames",{get:function(){return this._textures.length}}),a.gotoAndStop=function(t){var e=null;if("string"==typeof t){for(var i=this._labels,n=0,s=i.length;n<s;++n)if(i[n].label==t){e=i[n].position;break}}else e=t;null!==e&&(e>=this._textures.length&&(e=this._textures.length-1),this.currentFrame=e,this._framerate>0?this._t=e/this._framerate:this._t=0,this.texture=this._textures[e]||r.EMPTY)},a.advance=function(t){this._framerate>0&&t&&(this._t+=.001*t,this._t>this._duration&&(this._t=this._duration),this.currentFrame=Math.floor(this._t*this._framerate+1e-7),this.currentFrame>=this._textures.length&&(this.currentFrame=this._textures.length-1),this.texture=this._textures[this.currentFrame]||r.EMPTY)},a.getLabels=function(){return this._labels},a.getEvents=function(){return this._events},a.getCurrentLabel=function(){for(var t=this._labels,e=null,i=0,n=t.length;i<n&&t[i].position<=this.currentFrame;++i)e=t[i].label;return e},a.init=function(t,n){var r,s=this._labels=[],a=this._events=[];if(t.labels){var o={};for(r in t.labels){var h={label:r,position:t.labels[r],length:1};o[r]=h.position,/_(loop|stop)$/.test(r)||a.push(h),s.push(h)}for(var l=null,u=0;u<a.length;u++){var c=a[u];l=c.position,c.length=o[r+"_stop"]-l||o[r+"_loop"]-l||0}s.sort(e),a.sort(e)}this._textures=[];for(var d,p=0;p<t.frames.length;++p){var f=t.frames[p];(d=(r=f.name).lastIndexOf("/"))>=0&&(r=r.substring(d+1)),n?n.getFrames(r,f.min,f.max,f.digits,this._textures):i(r,f.min,f.max,f.digits,this._textures)}t.fps?this.framerate=t.fps:this._framerate&&(this.framerate=this._framerate),t.origin?(this.pivot.x=t.origin.x,this.pivot.y=t.origin.y):this.pivot.x=this.pivot.y=0,this.gotoAndStop(0)},a.copyFrom=function(t){this._textures=t._textures,this._labels=t._labels,this._events=t._events,this.pivot.x=t.pivot.x,this.pivot.y=t.pivot.y,this._framerate=t._framerate,this._duration=t._duration},a.destroy=function(){this._labels=this._events=null,o.destroy.call(this)},namespace("springroll.pixi").AdvancedMovieClip=s}(),t=include("springroll.Application"),e=include("springroll.AnimatorInstance"),i=include("springroll.pixi.AdvancedMovieClip"),n=function(){e.call(this),this.startTime=0,this.length=0,this.firstFrame=-1,this.lastFrame=-1},(r=e.extend(n)).init=function(e){e.framerate||(e.framerate=t.instance.options.fps||15),e.tickEnabled=!1,this.clip=e,this.isLooping=!1,this.currentName=null,this.position=this.duration=0,this.lastFrame=e.currentFrame},r.beginAnim=function(t,e){var i,n=this.currentName=t.anim,r=-1,s=-1,a=!1;if("*"==n)r=0,s=this.clip.totalFrames-1,a=!!t.loop;else for(var o=this.clip.getLabels(),h=n+"_stop",l=n+"_loop",u=0,c=o.length;u<c;++u)if((i=o[u]).label==n)r=i.position;else{if(i.label==h){s=i.position;break}if(i.label==l){s=i.position,a=!0;break}}this.firstFrame=r,this.lastFrame=s,this.length=s-r,this.isLooping=a;var d=this.clip.framerate;if(this.startTime=this.firstFrame/d,this.duration=this.length/d,e)this.position=0;else{var p=t.start||0;this.position=p<0?Math.random()*this.duration:p}this.clip.elapsedTime=this.startTime+this.position},r.endAnim=function(){this.clip.gotoAndStop(this.lastFrame)},r.setPosition=function(t){this.position=t,this.clip.elapsedTime=this.startTime+t},n.test=function(t){return t instanceof i},n.hasAnimation=function(t,e){if("*"==e)return!0;for(var i,n=t.getLabels(),r=-1,s=-1,a=e+"_stop",o=e+"_loop",h=0,l=n.length;h<l;++h)if((i=n[h]).label==e)r=i.position;else if(i.label==a||i.label==o){s=i.position;break}return r>=0&&s>0},n.getDuration=function(e,i){if(e.framerate||(e.framerate=t.instance.options.fps||15),"*"==i)return e.totalFrames/e.framerate;for(var n,r=e.getLabels(),s=-1,a=-1,o=i+"_stop",h=i+"_loop",l=0,u=r.length;l<u;++l)if((n=r[l]).label==i)s=n.position;else if(n.label==o||n.label==h){a=n.position;break}return s>=0&&a>0?(a-s)/e.framerate*1e3:0},r.destroy=function(){this.clip=null},namespace("springroll.pixi").AdvancedMovieClipInstance=n,function(){var t=include("springroll.pixi.TextureAtlasTask"),e=include("springroll.pixi.AdvancedMovieClip"),i=function(e){t.call(this,e,e.anim),this.anim=this.filter(e.anim)},n=t.extend(i);i.test=function(e){return!!e.anim&&t.test(e)},n.start=function(t){this.loadAtlas({_anim:this.anim},(function(i,n){var r=new e(n._anim,i);r.__AMC_destroy=r.destroy,r.destroy=function(){r.__AMC_destroy(),i.destroy()},t(r,n)}),!0)},namespace("springroll.pixi").AdvancedMovieClipTask=i}(),function(){var t=include("springroll.Application"),e=namespace("springroll").Animator=namespace("springroll.pixi").Animator={};e.canAnimate=function(e){return t.instance.animator.canAnimate(e)},e.getDuration=function(e,i){return t.instance.animator.getDuration(e,i)},e.getTimeline=function(e){return t.instance.animator.getTimeline(e)},e.instanceHasAnimation=function(e,i){return t.instance.animator.hasAnimation(e,i)},e.pauseInGroup=function(e,i){t.instance.animator.pauseInGroup(e,i)},e.resume=function(){t.instance.animator.resume()},e.stopAll=function(e,i){t.instance.animator.stopAll(e,i)},e.destroy=function(){t.instance.animator.destroy()},e.getPaused=function(e){return t.instance.animator.paused},e.init=function(){return t.intance.animator},e.pause=function(){t.instance.animator.pause()},e.play=function(e,i,n,r){return t.instance.animator.play(e,i,n,r)},e.stop=function(e,i){t.instance.animator.stop(e,i)},e.toString=function(){return"[Animator]"},Object.defineProperties(e,{captions:{get:function(){return t.instance.animator.captions}},debug:{get:function(){return t.instance.animator.debug}}})}()}(),function(){"use strict";(new(include("springroll.ApplicationPlugin"))).setup=function(){this.assetManager.register("springroll.pixi.SpineAtlasTask",40),this.assetManager.register("springroll.pixi.SpineAnimTask",40),this.animator.register("springroll.pixi.SpineInstance",10)},namespace("springroll.pixi").ParallelSpineData=function(t,e,i){this.anim=t,this.loop=!!e,this.speed=i>0?i:1},function(t){var e=(include("springroll.Application"),include("springroll.AnimatorInstance")),i=include("PIXI.spine.Spine",!1),n=include("springroll.pixi.ParallelSpineData");if(i){var r=function(){e.call(this),this.prevPosition=0},s=e.extend(r);s.init=function(t){t.autoUpdate=!1,this.clip=t,this.isLooping=!1,this.currentName=null,this.position=this.duration=0},s.beginAnim=function(t,e){var i=this.clip.state;i.clearTracks();var r=this.clip.stateData.skeletonData;this.isLooping=!!t.loop;var s,a=this.currentName=t.anim;if("string"==typeof a)this.duration=r.findAnimation(a).duration,i.setAnimationByName(0,a,this.isLooping);else if(a[0]instanceof n){this.duration=0;var o,h=0,l=0;for(s=0;s<a.length;++s){var u=a[s].loop;i.setAnimationByName(s,a[s].anim,u),o=r.findAnimation(a[s].anim).duration,u?o>l&&(l=o):o>h&&(h=o)}this.duration=h||l}else if(this.duration=r.findAnimation(a[0]).duration,1==a.length)i.setAnimationByName(0,a[0],this.isLooping);else for(i.setAnimationByName(0,a[0],!1),s=1;s<a.length;++s)i.addAnimationByName(0,a[s],this.isLooping&&s==a.length-1),this.duration+=r.findAnimation(a[s]).duration;if(e)this.position=0;else{var c=t.start||0;this.position=c<0?Math.random()*this.duration:c}this.clip.update(this.position)},s.endAnim=function(){this.clip.update(this.duration-this.position)},s.setPosition=function(t){t<this.position?this.clip.update(this.duration-this.position+t):this.clip.update(t-this.position),this.position=t},r.test=function(t){return t instanceof i},r.hasAnimation=function(t,e){var i,r=t.stateData.skeletonData;if("string"==typeof e)return!!r.findAnimation(e);if(Array.isArray(e)){if(e[0]instanceof n){for(i=0;i<e.length;++i)if(!r.findAnimation(e[i].anim))return!1}else for(i=0;i<e.length;++i)if(!r.findAnimation(e[i]))return!1;return!0}return!1},r.getDuration=function(t,e){var i,r=this.clip.stateData.skeletonData;if("string"==typeof anim)return r.findAnimation(anim).duration;if(Array.isArray(anim)){var s=0;if(anim[0]instanceof n){var a,o=0,h=0;for(i=0;i<anim.length;++i){var l=anim[i].loop;a=r.findAnimation(anim[i].anim).duration,l?a>h&&(h=a):a>o&&(o=a)}s=o||h}else if(s=r.findAnimation(anim[0]).duration,anim.length>1)for(i=1;i<anim.length;++i)s+=r.findAnimation(anim[i]).duration;return s}return 0},s.destroy=function(){this.clip=null},namespace("springroll.pixi").SpineInstance=r}}(),function(t){var e=include("PIXI.spine.SpineRuntime.AtlasReader",!1),i=include("PIXI.spine.SpineRuntime.AtlasPage",!1),n=include("PIXI.spine.SpineRuntime.AtlasRegion",!1),r=include("PIXI.spine.SpineRuntime.Atlas",!1);if(e){var s=function(t,s){if(this.pages=[],this.regions=[],t){var a=new e(t),o=[];o.length=4;for(var h=null;;){var l=a.readLine();if(null===l)break;if((l=a.trim(l)).length)if(h){var u=new n;u.name=l,u.page=h,u.rotate="true"==a.readValue(),a.readTuple(o);var c=parseInt(o[0]),d=parseInt(o[1]);a.readTuple(o);var p=parseInt(o[0]),f=parseInt(o[1]);u.u=c/h.width,u.v=d/h.height,u.rotate?(u.u2=(c+f)/h.width,u.v2=(d+p)/h.height):(u.u2=(c+p)/h.width,u.v2=(d+f)/h.height),u.x=c,u.y=d,u.width=Math.abs(p),u.height=Math.abs(f),4==a.readTuple(o)&&(u.splits=[parseInt(o[0]),parseInt(o[1]),parseInt(o[2]),parseInt(o[3])],4==a.readTuple(o)&&(u.pads=[parseInt(o[0]),parseInt(o[1]),parseInt(o[2]),parseInt(o[3])],a.readTuple(o))),u.originalWidth=parseInt(o[0]),u.originalHeight=parseInt(o[1]),a.readTuple(o),u.offsetX=parseInt(o[0]),u.offsetY=parseInt(o[1]),u.index=parseInt(a.readValue()),this.regions.push(u)}else{(h=new i).name=l,2==a.readTuple(o)&&(h.width=parseInt(o[0]),h.height=parseInt(o[1]),a.readTuple(o)),h.format=r.Format[o[0]],a.readTuple(o),h.minFilter=r.TextureFilter[o[0]],h.magFilter=r.TextureFilter[o[1]];var g=a.readValue();h.uWrap=r.TextureWrap.clampToEdge,h.vWrap=r.TextureWrap.clampToEdge,"x"==g?h.uWrap=r.TextureWrap.repeat:"y"==g?h.vWrap=r.TextureWrap.repeat:"xy"==g&&(h.uWrap=h.vWrap=r.TextureWrap.repeat),h.rendererObject=s[l].baseTexture,this.pages.push(h)}else h=null}}},a=extend(s);a.findRegion=function(t){for(var e=this.regions,i=0,n=e.length;i<n;i++)if(e[i].name==t)return e[i];return null},a.dispose=function(){for(var t=this.pages,e=0,i=t.length;e<i;e++)t[e].rendererObject.destroy(!0)},a.updateUVs=function(t){for(var e=this.regions,i=0,n=e.length;i<n;i++){var r=e[i];r.page==t&&(r.u=r.x/t.width,r.v=r.y/t.height,r.rotate?(r.u2=(r.x+r.height)/t.width,r.v2=(r.y+r.width)/t.height):(r.u2=(r.x+r.width)/t.width,r.v2=(r.y+r.height)/t.height))}},a.addImage=function(t,e){var s=new i;s.name=t,s.width=e.width,s.height=e.height,s.format="RGBA8888",s.minFilter=s.magFilter="Nearest",s.uWrap=r.TextureWrap.clampToEdge,s.vWrap=r.TextureWrap.clampToEdge,s.rendererObject=e.baseTexture,this.pages.push(s);var a=new n;a.name=t,a.page=s,a.rotate=!1,a.u=a.v=0,a.u2=a.v2=1,a.x=a.y=0,a.originalWidth=a.width=s.width,a.originalHeight=a.height=s.height,a.offsetX=a.offsetY=0,a.index=-1,this.regions.push(a)},a.fromTextureAtlas=function(t,e){var s=new i;for(e in s.name=e,s.width=t.baseTexture.width,s.height=t.baseTexture.height,s.format="RGBA8888",s.minFilter=s.magFilter="Nearest",s.uWrap=r.TextureWrap.clampToEdge,s.vWrap=r.TextureWrap.clampToEdge,s.rendererObject=t.baseTexture,this.pages.push(s),t.frames){var a=t.frames[e],o=new n;o.name=e,o.page=s,o.rotate=a.rotate;var h=a.crop.x,l=a.crop.y,u=a.crop.width,c=a.crop.height;o.u=h/s.width,o.v=l/s.height,o.rotate?(o.u2=(h+c)/s.width,o.v2=(l+u)/s.height):(o.u2=(h+u)/s.width,o.v2=(l+c)/s.height),o.x=h,o.y=l,o.width=Math.abs(u),o.height=Math.abs(c),o.originalWidth=a.width,o.originalHeight=a.height,a.trim?(o.offsetX=a.trim.x,o.offsetY=a.trim.y):o.offsetX=o.offsetY=0,o.index=-1,this.regions.push(o)}},a.destroy=function(){this.dispose(),this.pages=this.regions=null},namespace("springroll.pixi").SpineAtlas=s}}(),function(){var t=include("springroll.pixi.TextureTask"),e=include("springroll.pixi.SpineAtlas",!1);if(include("PIXI.utils"),e){var i=function(e,i){t.call(this,e,i||e.spineAtlas),this.spineAtlas=this.filter(e.spineAtlas),this.images=e.images},n=t.extend(i);i.test=function(e){return!!e.spineAtlas&&Array.isArray(e.images)&&t.test(e.images[0])},n.start=function(t){this.load({_atlas:this.spineAtlas,_images:this.images},(function(i){t(new e(i._atlas,i._images),i)}))},namespace("springroll.pixi").SpineAtlasTask=i}}(),function(){var t=include("springroll.Task"),e=include("springroll.pixi.TextureAtlasTask"),i=include("PIXI.spine.loaders.atlasParser",!1),n=include("PIXI.spine.SpineRuntime.SkeletonJsonParser",!1),r=include("PIXI.spine.SpineRuntime.AtlasAttachmentParser",!1),s=include("springroll.pixi.SpineAtlasTask",!1),a=include("springroll.pixi.SpineAtlas",!1);if(i){var o=function(e){t.call(this,e,e.spineAnim),this.spineAnim=this.filter(e.spineAnim),this.atlas=e.atlas,this.extraImages=e.extraImages},h=t.extend(o);o.test=function(t){return!(!t.spineAnim||t.atlas&&!e.test(t.atlas)&&!s.test(t.atlas)||!t.atlas&&!t.extraImages)},h.start=function(t){var e={_anim:this.spineAnim};this.atlas&&(e._atlas=this.atlas),this.extraImages&&(e._images={assets:this.extraImages}),this.load(e,function(e){var s=e._atlas;if(s||(s=new a),!(s instanceof a)){var o=s;(s=new a).fromTextureAtlas(o)}if(e._images)for(var h in e._images)s.addImage(h,e._images[h]);var l=new n(new r(s)).readSkeletonData(e._anim),u={id:this.id,spineData:l,spineAtlas:s};i.enableCaching&&this.cache&&(i.AnimCache[this.id]=l),u.destroy=function(){delete i.AnimCache[this.id],this.spineAtlas.destroy(),this.spineData=this.spineAtlas=null},t(u,e)}.bind(this))},h.destroy=function(){t.prototype.destroy.call(this)},namespace("springroll.pixi").SpineAnimTask=o}}()}(),function(){"use strict";var t;!function(t){function e(t){if(!t||"object"!=typeof t)return null;var e=t.constructor();for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}var i=include("PIXI.Container"),n=include("PIXI.Point"),r=include("PIXI.Sprite"),s=include("PIXI.extras.BitmapText",!1),a=include("PIXI.Text"),o=include("PIXI.Texture"),h=function(h,l,u){include("springroll.Debug",!1),i.call(this),this.back=new r,this.label=null,this._stateFlags={},this._statePriority=h.priority||c,this._stateData=null,this._currentLabelStyle=null,this._offset=new n,this._width=0,this._height=0,this.addChild(this.back),this._onOver=this._onOver.bind(this),this._onOut=this._onOut.bind(this),this._onDown=this._onDown.bind(this),this._onUp=this._onUp.bind(this),this._onUpOutside=this._onUpOutside.bind(this),this._emitPress=this._emitPress.bind(this);var d,p=this._stateData={};if(l){delete(d=e(l)).text,delete d.type,d.x===t&&(d.x="center"),d.y===t&&(d.y="center");var f=d.style=e(l.style);"bitmap"==l.type?f.align=f.align||"left":(f.font=f.font||"bold 20pt Arial",f.fill=f.fill||"black",f.align=f.align||"left",f.stroke=f.stroke||"black",f.strokeThickness=f.strokeThickness||0,f.wordWrap=f.wordWrap||!1,f.wordWrapWidth=f.wordWrapWidth||100)}for(var g=this._statePriority.length-1;g>=0;--g){var _=this._statePriority[g];this._addProperty(_),"disabled"!=_&&"up"!=_&&(this._stateFlags[_]=!1);var v=h[_];if(v?(v.tex?p[_]={tex:v.tex}:p[_]={tex:v},"string"==typeof p[_].tex&&(p[_].tex=o.fromImage(p[_].tex))):p[_]=p.up,l)if(v&&v.label){v=v.label;var m=p[_].label={};m.style=v.style||d.style,m.x=v.x||d.x,m.y=v.y||d.y}else p[_].label=d}if(p.up,p.over||(p.over=p.up),p.down||(p.down=p.up),p.disabled||(p.disabled=p.up),h.offset?(this._offset.x=h.offset.x,this._offset.y=h.offset.y):this._offset.x=this._offset.y=0,h.scale){var y=h.scale||1;this.back.scale.x=this.back.scale.y=y}l&&(this.label="bitmap"==l.type&&s?new s(l.text,d.style):new a(l.text,d.style),this.label.setPivotToAlign=!0,this.addChild(this.label)),this.back.x=this._offset.x,this.back.y=this._offset.y,this._width=this.back.width,this._height=this.back.height,this.enabled=u===t||!!u},l=extend(h,i);h.BUTTON_PRESS="buttonPress",h.BUTTON_OVER="buttonOver",h.BUTTON_OUT="buttonOut";var u=["disabled","enabled","up","over","down"],c=["disabled","down","over","up"];Object.defineProperty(l,"width",{get:function(){return this._width*this.scale.x},set:function(t){this.scale.x=t/this._width}}),Object.defineProperty(l,"height",{get:function(){return this._height*this.scale.y},set:function(t){this.scale.y=t/this._height}}),l.setText=function(t){if(this.label){this.label.text=t,this.label instanceof a?this.label.updateText():this.label.validate();for(var e,i=0;i<this._statePriority.length;++i)if(this._stateFlags[this._statePriority[i]]){e=this._stateData[this._statePriority[i]];break}if(e||(e=this._stateData.up),"center"==(e=e.label).x){var n=this.back.width,r=this.label.width;switch(this._currentLabelStyle.align){case"center":this.label.position.x=.5*n;break;case"right":this.label.position.x=bw-.5*(n-r);break;default:this.label.position.x=.5*(n-r)}}else this.label.position.x=e.x+this._offset.x;"center"==e.y?this.label.position.y=.5*(this.back.height-this.label.height):this.label.position.y=e.y+this._offset.y}},Object.defineProperty(l,"enabled",{get:function(){return!this._stateFlags.disabled},set:function(t){this._stateFlags.disabled=!t,this.buttonMode=t,this.interactive=t,this.off("mousedown",this._onDown),this.off("touchstart",this._onDown),this.off("mouseover",this._onOver),this.off("mouseout",this._onOut),t?(this.on("mousedown",this._onDown),this.on("touchstart",this._onDown),this.on("mouseover",this._onOver),this.on("mouseout",this._onOut)):(this.off("mouseupoutside",this._onUpOutside),this.off("touchendoutside",this._onUpOutside),this.off("mouseup",this._onUp),this.off("touchend",this._onUp),this._stateFlags.down=this._stateFlags.over=!1,this._over=!1,this._touchDown=!1),this._updateState()}}),l._addProperty=function(t){u.indexOf(t)>=0||Object.defineProperty(this,t,{get:function(){return this._stateFlags[t]},set:function(e){this._stateFlags[t]=e,this._updateState()}})},l._updateState=function(){if(this.back){for(var t,e=0;e<this._statePriority.length;++e)if(this._stateFlags[this._statePriority[e]]){t=this._stateData[this._statePriority[e]];break}if(t||(t=this._stateData.up),this.back.texture=t.tex,this.label){var i=t.label,n=this.label;if(this._currentLabelStyle&&function(t,e){if(t===e)return!0;for(var i in t)if(t[i]!=e[i])return!1;return!0}(this._currentLabelStyle,i.style)||(n.font=i.style.font,n.align=i.style.align,this._currentLabelStyle=i.style,n instanceof a?n.updateText():n.validate()),"center"==i.x){var r=this.back.width,s=n.width;switch(this._currentLabelStyle.align){case"center":n.position.x=.5*r;break;case"right":n.position.x=r-.5*(r-s);break;default:n.position.x=.5*(r-s)}}else n.position.x=i.x+this._offset.x;"center"==i.y?n.position.y=.5*(this.back.height-n.height):n.position.y=i.y+this._offset.y}return t}},l._onOver=function(t){this._stateFlags.over=!0,this._updateState(),this.emit(h.BUTTON_OVER,this)},l._onOut=function(t){this._stateFlags.over=!1,this._updateState(),this.emit(h.BUTTON_OUT,this)},l._onDown=function(t){this._stateFlags.down=!0,this._updateState(),this.on("mouseupoutside",this._onUpOutside),this.on("touchendoutside",this._onUpOutside),this.on("mouseup",this._onUp),this.on("touchend",this._onUp)},l._onUp=function(t){this._stateFlags.down=!1,this.off("mouseupoutside",this._onUpOutside),this.off("touchendoutside",this._onUpOutside),this.off("mouseup",this._onUp),this.off("touchend",this._onUp),this._updateState(),setTimeout(this._emitPress,0)},l._emitPress=function(){this.emit(h.BUTTON_PRESS,this)},l._onUpOutside=function(t){this._stateFlags.down=!1,this.off("mouseupoutside",this._onUpOutside),this.off("touchendoutside",this._onUpOutside),this.off("mouseup",this._onUp),this.off("touchend",this._onUp),this._updateState()},l.destroy=function(){this.removeAllListeners(),this.removeChildren(),this.label=null,this.back=null,this._stateData=null,this._stateFlags=null,this._statePriority=null},namespace("springroll").Button=h,namespace("springroll.pixi").Button=h}(),t=function(t){this.obj=t,this.mouseDownObjPos={x:0,y:0},this.dragOffset=new PIXI.Point,this.mouseDownStagePos={x:0,y:0}},namespace("springroll").DragData=t,namespace("springroll.pixi").DragData=t,function(){var t,e,i,n=include("springroll.pixi.DragData"),r=function(n,r,s){t||(t=include("springroll.Application"),e=include("createjs.Tween",!1),i=include("PIXI.Point")),"function"!=typeof n||s||(s=r,r=n,n=t.instance.display),this.draggedObj=null,this.dragStartThreshold=20,this.mouseDownStagePos=new i(0,0),this.mouseDownObjPos=new i(0,0),this.allowStickyClick=!0,this.isTouchMove=!1,this.isHeldDrag=!1,this.isStickyClick=!1,this.snapSettings=null,this._interaction=n.renderer.plugins.interaction,this._dragOffset=null,this._dragStartCallback=r,this._dragEndCallback=s,this._triggerHeldDrag=this._triggerHeldDrag.bind(this),this._triggerStickyClick=this._triggerStickyClick.bind(this),this._stopDrag=this._stopDrag.bind(this),this._updateObjPosition=this._updateObjPosition.bind(this),this._draggableObjects=[],this._multitouch=!1,this._addedDragListeners=!1,this.helperPoint=new i(0,0)},s=extend(r);Object.defineProperty(s,"multitouch",{get:function(){return this._multitouch},set:function(t){if(this.draggedObj)if(this._multitouch)for(var e in this.draggedObj)this._stopDrag(e,!0);else this._stopDrag(null,!0);this._multitouch=!!t,this.draggedObj=t?{}:null}}),s.startDrag=function(t,e){this._objMouseDown(t,e)},s._objMouseDown=function(t,r){var s,a,o,h;(r.data&&r.data.global&&(r=r.data),!this._multitouch&&this.draggedObj||this._multitouch&&!r)||(this._multitouch?(s=new n(t),this.draggedObj[r.identifier]=s,a=s.mouseDownObjPos,o=s.mouseDownStagePos,h=s.dragOffset):(this.draggedObj=t,a=this.mouseDownObjPos,o=this.mouseDownStagePos,h=this._dragOffset=new i),e&&(e.removeTweens(t),e.removeTweens(t.position)),t._dragOffset?(h.x=t._dragOffset.x,h.y=t._dragOffset.y):(r.getLocalPosition(t.parent,h),h.x-=t.position.x,h.y-=t.position.y),a.x=t.position.x,a.y=t.position.y,r?(o.x=r.global.x,o.y=r.global.y,this.allowStickyClick&&"touchstart"!=r.originalEvent.type?(this._interaction.on("stagemove",this._triggerHeldDrag),this._interaction.on("stageup",this._triggerStickyClick)):(this.isTouchMove="touchstart"==r.originalEvent.type,this.isHeldDrag=!0,this._startDrag(r))):(this.isHeldDrag=!0,this._startDrag()))},s._triggerStickyClick=function(t){t=t.data,this.isStickyClick=!0,this._multitouch?this.draggedObj[t.identifier].obj:this.draggedObj,this._interaction.off("stagemove",this._triggerHeldDrag),this._interaction.off("stageup",this._triggerStickyClick),this._startDrag(t)},s._triggerHeldDrag=function(t){var e;t=t.data,this._multitouch?(this.draggedObj[t.identifier].obj,e=this.draggedObj[t.identifier].mouseDownStagePos):(this.draggedObj,e=this.mouseDownStagePos);var i=t.global.x-e.x,n=t.global.y-e.y;i*i+n*n>=this.dragStartThreshold*this.dragStartThreshold&&(this.isHeldDrag=!0,this._interaction.off("stagemove",this._triggerHeldDrag),this._interaction.off("stageup",this._triggerStickyClick),this._startDrag(t))},s._startDrag=function(t){var e;e=this._multitouch?this.draggedObj[t.identifier].obj:this.draggedObj,this._updateObjPosition({data:t}),this._addedDragListeners||(this._addedDragListeners=!0,this._interaction.on("stagemove",this._updateObjPosition),this._interaction.on("stageup",this._stopDrag)),this._dragStartCallback(e)},s.stopDrag=function(t,e){var i=null;if(this._multitouch&&e)for(var n in this.draggedObj)if(this.draggedObj[n].obj==e){i=n;break}this._stopDrag(i,!0===t)},s._stopDrag=function(t,e){var i,n=null;if("number"==typeof t?n=t:t&&(t.data&&t.data.global?n=t.data.identifier:t instanceof PIXI.interaction.InteractionData&&(n=t.identifier)),this._multitouch){if(null===n){for(n in this.draggedObj)this._stopDrag(n,e);return}var r=this.draggedObj[n];if(!r)return;i=r.obj,this.mouseDownObjPos.x=r.mouseDownObjPos.x,this.mouseDownObjPos.y=r.mouseDownObjPos.y,delete this.draggedObj[n]}else i=this.draggedObj,this.draggedObj=null;if(i){var s=!this._multitouch;if(this._multitouch){var a=!1;for(n in this.draggedObj){a=!0;break}s=!a}s&&this._addedDragListeners&&(this._addedDragListeners=!1,this._interaction.off("stagemove",this._updateObjPosition),this._interaction.off("stageup",this._stopDrag)),this.isTouchMove=!1,this.isStickyClick=!1,this.isHeldMove=!1,!1!==e&&this._dragEndCallback(i)}},s._updateObjPosition=function(t){var e,i;if(t=t.data,this._multitouch){var n=this.draggedObj[t.identifier];e=n.obj,i=n.dragOffset}else e=this.draggedObj,i=this._dragOffset;if(e&&e.parent){var r=t.getLocalPosition(e.parent,this.helperPoint),s=e._dragBounds;if(s?(e.position.x=Math.clamp(r.x-i.x,s.x,s.right),e.position.y=Math.clamp(r.y-i.y,s.y,s.bottom)):(e.position.x=r.x-i.x,e.position.y=r.y-i.y),this.snapSettings)switch(this.snapSettings.mode){case"points":this._handlePointSnap(r,i,e)}}else this.stopDrag(!1,e)},s._handlePointSnap=function(t,e,i){for(var n=this.snapSettings,r=n.dist*n.dist,s=n.points,a=t.x-e.x,o=t.y-e.y,h=-1,l=null,u=s.length-1;u>=0;--u){var c=s[u],d=Math.distSq(a,o,c.x,c.y);d<=r&&(d<h||-1==h)&&(h=d,l=c)}l&&(draggedObj.position.x=l.x,draggedObj.position.y=l.y)};var a=function(){this.on("touchstart",this._onMouseDownListener),this.on("mousedown",this._onMouseDownListener),this.buttonMode=this.interactive=!0},o=function(){this.off("touchstart",this._onMouseDownListener),this.off("mousedown",this._onMouseDownListener),this.buttonMode=this.interactive=!1},h=function(t){this._dragMan._objMouseDown(this,t)};s.addObject=function(t,e,i){e&&(e.right=e.x+e.width,e.bottom=e.y+e.height),t._dragBounds=e,t._dragOffset=i||null,this._draggableObjects.indexOf(t)>=0||(t.enableDrag=a,t.disableDrag=o,t._onMouseDownListener=h.bind(t),t._dragMan=this,this._draggableObjects.push(t))},s.removeObject=function(t){var e=this._draggableObjects.indexOf(t);e>=0&&(t.disableDrag(),delete t.enableDrag,delete t.disableDrag,delete t._onMouseDownListener,delete t._dragMan,delete t._dragBounds,delete t._dragOffset,this._draggableObjects.splice(e,1))},s.destroy=function(){this.stopDrag(!1),this._updateObjPosition=null,this._dragStartCallback=null,this._dragEndCallback=null,this._triggerHeldDrag=null,this._triggerStickyClick=null,this._stopDrag=null,this._interaction=null;for(var t=this._draggableObjects.length-1;t>=0;--t){var e=this._draggableObjects[t];e.disableDrag(),delete e.enableDrag,delete e.disableDrag,delete e._onMouseDownListener,delete e._dragMan,delete e._dragBounds,delete e._dragOffset}this._draggableObjects=null},namespace("springroll").DragManager=r,namespace("springroll.pixi").DragManager=r}()}();