/* Created by Olphabet */var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d,e){var f=b.call(this,c.game,d,e)||this;return f._stopGameForBall=!1,f._punchCurrentBall=!1,f._destroyMe=!1,f._baseGame=c,f._ballBody=f.game.make.image(0,-60,"atlas","ball"),f._ballBody.anchor.set(.5),f._ball=f.game.make.sprite(960,a.BaseGame.BALL_Y_MAX),f._ball.anchor.set(.5,1.1),f._ball.addChild(f._ballBody),f._ballShadow=f.game.make.image(960,a.BaseGame.BALL_Y_MAX,"atlas","ballShadow"),f._ballShadow.alpha=.35,f._ballShadow.anchor.set(.5,1),f.game.physics.arcade.enable(f._ball),f._ball.body.setSize(15,15),f._ballY=a.BaseGame.BALL_Y_MAX,f._ballZ=0,f._dz=0,f._dy=0,f}return __extends(c,b),c.prototype.update=function(){var b,c=this;if(1==a.BaseGame.CURRENT_GAME_MOD){var d=this._baseGame.collisionWall(this);if(d&&d.b instanceof a.Barrier){var e=Math.abs(d.b.depth-this._ball.depth);e<=25&&(console.log(e),console.log("COLLISION WITH BARRIER"),this._stopGameForBall=!0,this._baseGame._stopGame=!0,this._baseGame.textShow(),this._baseGame._text.text=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["so-close"],this._baseGame._text.exists=!0,a.SoundMixer.play("bar",.7),this._ballY=d.y+60,this._baseGame._feedbackSound=a.SoundMixer.play("bad",.3),d.b.hitObj(),this._ballWay=null,setTimeout(function(){c._baseGame.whiteFlash()},5),this.killFree())}}if(0==this._stopGameForBall&&this._ballY<a.BaseGame.BALL_Y_MIN+20){var f=this._baseGame.collisionWall(this);if(b=f?f.y:null,1==a.BaseGame.CURRENT_GAME_MOD?b&&f.b instanceof a.Barrier&&(b=null):f&&f.g&&this._baseGame._bearSideStep.hit(),b)this._stopGameForBall=!0,this._baseGame._stopGame=!0,this._baseGame.textShow(),this._baseGame._text.text=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["so-close"],this._baseGame._text.exists=!0,f.g||a.SoundMixer.play("bar",.7),this._ballY=b+60,2==a.BaseGame.CURRENT_GAME_MOD?this._baseGame._targetCounter>0&&(this._baseGame._currentLivesCount--,this._baseGame._plankBalls.incrementBall(),this._baseGame._feedbackSound=a.SoundMixer.play("bad",.3)):this._baseGame._feedbackSound=a.SoundMixer.play("bad",.3),this._ballWay=null,setTimeout(function(){c._baseGame.whiteFlash()},5),this.killFree();else if(this.game.physics.arcade.collide(this._ball,this._baseGame._goal)){this._stopGameForBall=!0,this._baseGame._stopGame=!0;for(var g=0;g<this._baseGame._bonuses.length;g++){var h=this._baseGame._bonuses[g].bonusType;this._baseGame._bonuses[g].checkBonusCollide(this._ball)&&(this._currentBonusType=h,this._baseGame._bonusPosition.set(this._baseGame._bonuses[g].x,this._baseGame._bonuses[g].y))}2==a.BaseGame.CURRENT_GAME_MOD?"target"==this._currentBonusType||"bonus"==this._currentBonusType?(this._baseGame._successGoal=!0,this._baseGame._currentBonusType=this._currentBonusType,this._baseGame._feedbackSound=a.SoundMixer.play("good",.2),this._baseGame.textShow(),this._baseGame._text.text=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].goal,this._baseGame._text.exists=!0,this._ballY=this._baseGame._goal.y+270,this._ballWay=null,this.game.add.tween(this._baseGame._setka.scale).to({x:1.01,y:1.01},40,Phaser.Easing.Circular.InOut,!0,0,0,!0),"target"==this._currentBonusType?(a.SoundMixer.play("ding",.35),this._baseGame._goalkeeperStopTime=Number.MAX_VALUE,this._baseGame._bearSideStep.goal()):a.SoundMixer.play("bonus",.4),setTimeout(function(){c._baseGame.whiteFlash()},5),this.killFree()):(this._baseGame.textShow(),this._baseGame._text.text=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["so-close"],this._baseGame._text.exists=!0,this._baseGame._stopGame=!0,this._stopGameForBall=!0,this._ballY=this._baseGame._goal.y+270,this._ballWay=null,this.game.add.tween(this._baseGame._setka.scale).to({x:1.01,y:1.01},40,Phaser.Easing.Circular.InOut,!0,0,0,!0),2==a.BaseGame.CURRENT_GAME_MOD?this._baseGame._targetCounter>0&&(this._baseGame._currentLivesCount--,this._baseGame._plankBalls.incrementBall(),this._baseGame._feedbackSound=a.SoundMixer.play("bad",.3)):this._baseGame._feedbackSound=a.SoundMixer.play("bad",.3),setTimeout(function(){c._baseGame.whiteFlash()},5),this.killFree()):(this._baseGame._successGoal=!0,this._baseGame._currentBonusType=this._currentBonusType,this._baseGame._feedbackSound=a.SoundMixer.play("good",.2),this._baseGame.textShow(),this._baseGame._text.text=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].goal,this._baseGame._text.exists=!0,this._ballY=this._baseGame._goal.y+270,this._ballWay=null,this.game.add.tween(this._baseGame._setka.scale).to({x:1.01,y:1.01},40,Phaser.Easing.Circular.InOut,!0,0,0,!0),"target"==this._currentBonusType?(a.SoundMixer.play("ding",.35),this._baseGame._goalkeeperStopTime=Number.MAX_VALUE,this._baseGame._bearSideStep.goal()):a.SoundMixer.play("bonus",.4),setTimeout(function(){c._baseGame.whiteFlash()},5),this.killFree())}}var i=.5+(this._ballY-a.BaseGame.BALL_Y_MIN)/a.BaseGame.BALL_DIST*.5;if(this._ball.scale.set(i,i),this._ballShadow.scale.set(i,i),this._ballZ+=this._dz,this._ballZ=Math.min(this._ballZ,0),this._punchCurrentBall&&Math.abs(this._ballZ)<.01&&(this._dy=this._lastDY,this._dz=this._lastDZ,this._timeInk=this._lastDT,this._lastDY=.2*this._dy,this._lastDT=.2*this._lastDT,this._lastDZ=.7*this._dz,Math.abs(this._lastDZ)<.5&&(this._baseGame._punch=!1,this._punchCurrentBall=!1,this._lastDZ=0,this._lastDY=0,this._dz=0,this._dy=0,this._timeInk=0,0==this._stopGameForBall&&(this._baseGame.textShow(),this._baseGame._text.text=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["so-close"],this._baseGame._text.exists=!0,this._baseGame._stopGame=!0,this._stopGameForBall=!0,2==a.BaseGame.CURRENT_GAME_MOD?this._baseGame._targetCounter>0&&(this._baseGame._currentLivesCount--,this._baseGame._plankBalls.incrementBall(),this._baseGame._feedbackSound=a.SoundMixer.play("bad",.3)):this._baseGame._feedbackSound=a.SoundMixer.play("bad",.3),setTimeout(function(){c._baseGame.whiteFlash()},5),this.killFree()))),this._punchCurrentBall&&(this._ballBody.rotation-=this._dy/a.BaseGame.BALL_SPEED*.8),this._ballY=Math.max(this._ballY,a.BaseGame.BALL_Y_MIN),this._ballY==a.BaseGame.BALL_Y_MIN&&this._punchCurrentBall&&(this._punchCurrentBall=!1,this._baseGame._punch=!1,this._lastDZ=0,this._lastDY=0,this._dz=0,this._dy=0,this._timeInk=0,0==this._stopGameForBall&&(this._baseGame.textShow(),this._baseGame._text.text=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["so-close"],this._baseGame._text.exists=!0,this._baseGame._stopGame=!0,this._stopGameForBall=!0,2==a.BaseGame.CURRENT_GAME_MOD?this._baseGame._targetCounter>0&&(this._baseGame._currentLivesCount--,this._baseGame._plankBalls.incrementBall(),this._baseGame._feedbackSound=a.SoundMixer.play("bad",.3)):this._baseGame._feedbackSound=a.SoundMixer.play("bad",.3),setTimeout(function(){c._baseGame.whiteFlash()},5),this.killFree())),this._ballWay&&this._ballWay.length>0){var j=this.getBallWay(this._time);this._ball.x=j[0],this._ballY=j[1],this._time+=this._timeInk}this._ball.y=this._ballY+this._ballZ,this._ballShadow.x=this._ball.x,this._ballShadow.y=this._ballY+5,this._ball.depth=this._ballY,this._dz+=a.BaseGame.GRAVITY,this._dy*=.8;for(var g=0;g<this._baseGame._bonuses.length;g++){var h=this._baseGame._bonuses[g].bonusType;this._baseGame._bonuses[g].updateBonus()}},c.prototype.getEndXTraectoryPos=function(){var b=this._baseGame._downX-this._baseGame._ballStartPos,c=this._baseGame._downY-a.BaseGame.BALL_Y_MAX,d=this._baseGame._mouseX-b,e=this._baseGame._mouseY-c,f=d-this._baseGame._ballStartPos,g=e-a.BaseGame.BALL_Y_MAX,h=a.BaseGame.BALL_Y_MIN;return 0==g?d:f/g*(h-e)+d},c.prototype.createBallWay=function(){var b=this._baseGame._downX-this._baseGame._ballStartPos,c=this._baseGame._downY-a.BaseGame.BALL_Y_MAX,d=this._baseGame._mouseX-b,e=this._baseGame._mouseY-c,f=d-this._baseGame._ballStartPos,g=e-a.BaseGame.BALL_Y_MAX,h=a.BaseGame.BALL_Y_MIN,i=0==g?d:f/g*(h-e)+d,j=0;if(this._baseGame._minMX!=Number.MAX_VALUE&&(this._baseGame._minMX=Math.abs(this._baseGame._minMX-this._baseGame._downX),this._baseGame._maxMX=Math.abs(this._baseGame._maxMX-this._baseGame._downX),this._baseGame._maxMX>200||this._baseGame._minMX>200))if(this._baseGame._maxMX>this._baseGame._minMX&&this._baseGame._maxMX>5&&this._baseGame._maxMX>d-this._baseGame._downX+5){var k=Math.min(1,this._baseGame._maxMX/350);j=300*k}else if(this._baseGame._maxMX<this._baseGame._minMX&&this._baseGame._minMX>5&&this._baseGame._minMX>this._baseGame._downX-d+5){var k=Math.min(1,this._baseGame._minMX/350);j=-300*k}this._ballWay=[[this._baseGame._ballStartPos,a.BaseGame.BALL_Y_MAX],[.5*(this._baseGame._ballStartPos+i)+j,.5*(a.BaseGame.BALL_Y_MAX+h)],[i,h]];var l=i-this._baseGame._ballStartPos,m=h-a.BaseGame.BALL_Y_MAX,n=Math.sqrt(l*l+m*m);n=Math.max(n/960,1),this._timeInk/=n,this._lastDT/=n},c.prototype.killFree=function(){var a=this;this._destroyMe||(this._destroyMe=!0,this.game.add.tween(this._ballShadow).to({alpha:0},400,Phaser.Easing.Sinusoidal.InOut,!0,600),this.game.add.tween(this._ballBody).to({alpha:0},400,Phaser.Easing.Sinusoidal.InOut,!0,600).onComplete.add(function(){a._baseGame.removeMe(a),a._ball.parent.removeChild(a._ball),a._ballShadow.parent.removeChild(a._ballShadow),a._ballBody.parent.removeChild(a._ballBody),a.destroy(!0)}))},c.prototype.getBallWay=function(a){a>1&&(a=1);for(var b=0,c=0,d=0;d<this._ballWay.length;d++){var e=this.getBezierBasis(d,this._ballWay.length-1,a);b+=this._ballWay[d][0]*e,c+=this._ballWay[d][1]*e}return[b,c]},c.prototype.getBezierBasis=function(a,b,c){function d(a){return a<=1?1:a*d(a-1)}return d(b)/(d(a)*d(b-a))*Math.pow(c,a)*Math.pow(1-c,b-a)},c}(Phaser.Sprite);a.Ball=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(a,c,d){var e=b.call(this,a.game,c,d)||this;e._bgballs=[],e._balls=[];for(var f=0;f<3;f++)e._bgballs.push(e.game.make.sprite(70*f,0,"atlas","bgBallUI")),e._bgballs[f].anchor.set(.5),e._balls.push(e.game.make.sprite(0,0,"atlas","ballUI")),e._balls[f].anchor.set(.5),e._bgballs[f].addChild(e._balls[f]),e.addChild(e._bgballs[f]);return e._timeText=e.game.make.text(68,-4,"0:30",{font:"GinzaNarrow-Heavy",fontSize:"80px",fill:"#FFFFFF",align:"center"}),e._timeText.anchor.set(.5),e._timeText.visible=!1,e.addChild(e._timeText),e.initPlank(),e}return __extends(c,b),c.prototype.initPlank=function(){if(2==a.BaseGame.CURRENT_GAME_MOD){this._currentBall=0;for(var b=0;b<3;b++)this._balls[b].alpha=1,this._balls[b].y=0,this._balls[b].scale.set(1,1)}else{for(var b=0;b<3;b++)this._balls[b].alpha=0,this._bgballs[b].alpha=0;3==a.BaseGame.CURRENT_GAME_MOD&&(this._timeText.text="0:30",this._timeText.visible=!0)}},c.prototype.incrementBall=function(){var a=this;this.game.add.tween(this._balls[this._currentBall]).to({alpha:0,y:this._balls[this._currentBall].y-40},320,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(function(){a._currentBall++})},c.prototype.addLiveBall=function(){this._currentBall--,this.game.add.tween(this._balls[this._currentBall]).to({alpha:1,y:0},320,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(function(){})},c.prototype.updateTimeText=function(a){this._timeText.text=a},c}(Phaser.Sprite);a.BallUIPlank=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d,e,f){var g=b.call(this,c.game,d,e)||this;g._baseGame=c,g._visual=g.game.make.sprite(0,0,"atlas","mishka_fake"),g._visual.anchor.set(.5,1),g.addChild(g._visual),g._barierY=g.y;var h=.8+(g._barierY-a.BaseGame.BALL_Y_MIN)/a.BaseGame.BALL_DIST*.5;return g._visual.scale.set(h,h),g.game.physics.arcade.enable(g),g.body.setSize(g._visual.width,g._visual.height,-g._visual.width/2,-g._visual.height),console.log(h),g}return __extends(c,b),c.prototype.resetBarier=function(b,c,d){if(void 0===c&&(c=0),void 0===d&&(d=0),b)this.body.enable=!1,this._visual.visible=!1;else{this.body.enable=!0,this._visual.visible=!0,this.x=c,this.y=d,this._barierY=this.y,this.depth=this.y;var e=.8+(this._barierY-a.BaseGame.BALL_Y_MIN)/a.BaseGame.BALL_DIST*.5;this._visual.scale.set(e,e),this.body.setSize(this._visual.width,this._visual.height,-this._visual.width/2,-this._visual.height),console.log("RESIZEN AND OTHER",e)}},c.prototype.hitObj=function(){this.game.add.tween(this._visual.scale).to({y:this._visual.scale.y+.05,x:this._visual.scale.x-.05},50,Phaser.Easing.Sinusoidal.InOut,!0,0,0,!0),console.log("HIT!")},c}(Phaser.Sprite);a.Barrier=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=Phaser.Sprite,c=function(b){function c(a){var c=b.call(this,a.game,0,20)||this;return c._baseGame=a,c.scale.set(1.1,1.1),c._dz=0,c._step=c.game.make.image(0,0,"bear_sidestep","sorceress_for_animation-Sidestep_0"),c._step.animations.add("loop",Phaser.Animation.generateFrameNames("sorceress_for_animation-Sidestep_",0,75),30,!0),c._step.anchor.set(.5,1),c._step.exists=!1,c._stepScale=c.game.make.image(0,0,"bear_sidestep_scale","sorceress_for_animation-Sidestep_0"),c._stepScale.animations.add("loop",Phaser.Animation.generateFrameNames("sorceress_for_animation-Sidestep_",0,75),30,!0),c._stepScale.anchor.set(.5,1),c._stepScale.exists=!1,c._hit=c.game.make.image(0,0,"bear_hit","sorceress_for_animation-Hit_0"),c._hit.animations.add("loop",Phaser.Animation.generateFrameNames("sorceress_for_animation-Hit_",5,21),30),c._hit.animations.add("stop",["sorceress_for_animation-Hit_21"],0),c._hit.anchor.set(.5,1),c._jump=c.game.make.image(50,10,"bear_jump","sorceress_for_animation-Jump_0"),c._jump.animations.add("loop",Phaser.Animation.generateFrameNames("sorceress_for_animation-Jump_",5,51),35),c._jump.anchor.set(.5,1),c._idle=c.game.make.image(-10,-4,"bear_idle","sorceress_for_animation-Idle_1"),c._idle.animations.add("loop",Phaser.Animation.generateFrameNames("sorceress_for_animation-Idle_",1,41),30,!0),c._idle.anchor.set(.5,1),c._idle.exists=!1,c._shadow=c.game.make.image(0,-8,"atlas","bearShadow"),c._shadow.alpha=.4,c._shadow.anchor.set(.5),c.addChild(c._shadow),c.addChild(c._step),c.addChild(c._stepScale),c.addChild(c._hit),c.addChild(c._jump),c.addChild(c._idle),c.step(),c}return __extends(c,b),c.prototype.update=function(){1==this._jump.exists&&(this.parent.x+=this.scale.x*this._speed,this._speed*=.92)},c.prototype.canFlip=function(){return this._step.exists?this._step.frame%25==0:this._stepScale.exists?this._stepScale.frame%25==0:!!this._idle.exists&&this._idle.frame%20==0},c.prototype.canMove=function(){return!this._jump.exists&&!this._hit.exists},c.prototype.nowStay=function(){return this._step.exists||this._stepScale.exists},c.prototype.closeAll=function(){this._step.exists=!1,this._stepScale.exists=!1,this._hit.exists=!1,this._jump.exists=!1,this._idle.exists=!1,this._step.animations.stop(),this._stepScale.animations.stop(),this._hit.animations.stop(),this._jump.animations.stop(),this._idle.animations.stop()},c.prototype.goal=function(a){void 0===a&&(a=!1),1!=this._idle.exists&&(0==a&&1==this._jump.exists||(this.scale.x=1,this._hit.exists?(this._idle.x=-2,this._idle.y=0):(this._idle.x=-10,this._idle.y=-4),this.closeAll(),this._idle.play("loop"),this._idle.exists=!0))},c.prototype.step=function(){1!=this._step.exists&&1!=this._stepScale.exists&&this.closeAll()},c.prototype.doubleStep=function(){this.scale.x>0?(this._step.play("loop",c.LOOP_SPEED),this._step.exists=!0,this._shadow.exists=!0):(this._stepScale.play("loop",c.LOOP_SPEED),this._stepScale.exists=!0,this._shadow.exists=!0)},c.prototype.rotateBear=function(){this.scale.x>0?(this._step.play("loop",c.LOOP_SPEED),this._step.animations.frame=this._stepScale.animations.frame,this._stepScale.animations.stop(),this._step.exists=!0,this._shadow.exists=!0,this._stepScale.exists=!1):(this._stepScale.play("loop",c.LOOP_SPEED),this._stepScale.animations.frame=this._step.animations.frame,this._step.animations.stop(),this._stepScale.exists=!0,this._shadow.exists=!0,this._step.exists=!1)},c.prototype.hit=function(){var b=this;if(1!=this._hit.exists&&1!=this._jump.exists){if(this._step.exists||this._stepScale.exists?this._endStepAnim=!0:this._idle.exists&&(this._endStepAnim=!1),this.scale.x=1,Math.random()<=.75){var c=[1,5,6,7],d=Phaser.ArrayUtils.getRandomItem(c);7==d&&(d=Phaser.ArrayUtils.getRandomItem([2,3,4]));var e=.4;switch(d){case 6:e=1;break;case 5:e-=.15}a.SoundMixer.play("Bear_ha"+d,e)}this.closeAll(),this._hit.play("loop").onComplete.addOnce(function(){b.goal(!0),b._endStepAnim&&b._baseGame.bearGetHit()&&(b.step(),b.scale.x=b._baseGame._dir,b.rotateBear(),b.step())}),this._hit.exists=!0,this._shadow.exists=!0}},c.prototype.jump=function(){var a=this;1!=this._jump.exists&&(this._speed=15,1==this.scale.x?this._jump.x=50:this._jump.x=55,this._step.exists||this._stepScale.exists?this._endStepAnim=!0:this._idle.exists&&(this._endStepAnim=!1),this.closeAll(),this._jump.play("loop").onComplete.addOnce(function(){a._baseGame.endBearJump(),a.goal(!0),a._endStepAnim&&a._baseGame.bearGetHit()&&(a.step(),a.rotateBear(),a.step())}),this._jump.exists=!0)},c.LOOP_SPEED=30,c}(b);a.Bear=c}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d,e,f){var g=b.call(this,c.game,d,e)||this;return g._baseGame=c,g._shadow=g.game.make.image(d,360,"atlas","targetShadow"),g._shadow.alpha=1,g._shadow.anchor.set(.5),"target"==f?(g._visual=g.game.make.image(0,0,"atlas","medal_standart"),g._visual.anchor.set(.5),g._visual.scale.set(.7,.7)):"bonus"==f&&(g._fakeBack=g.game.make.sprite(0,0,"atlas","outStarLine"),g._fakeBack.anchor.set(.5),g._fakeBack.alpha=.3,g._fakeBack.scale.set(1,1),g._bonusBack=g.game.make.sprite(0,0,"atlas","outStarLine"),g._bonusBack.anchor.set(.5),g._bonusBack.scale.set(1,1),g._currentDeg=0,g._bonusMask=g.game.make.graphics(0,0),g._bonusMask.beginFill(16724736),g._bonusMask.arc(0,0,135,a.GameConfig.degreesToRad(0),a.GameConfig.degreesToRad(g._currentDeg),!0),g._bonusBack.addChild(g._bonusMask),g._bonusBack.mask=g._bonusMask,g._visual=g.game.make.image(0,0,"atlas","medal_super"),g._visual.anchor.set(.5),g._visual.scale.set(2,2)),g._type=f,g.game.physics.arcade.enable(g),g.body.setSize(g._visual.width,g._visual.height,-g._visual.width/2,-g._visual.height/2),c._zContainer.addChild(g._shadow),"bonus"==f&&(g.addChild(g._fakeBack),g.addChild(g._bonusBack)),g.addChild(g._visual),g.resetBonus(d,e,g._visual.scale.x,null,f),g}return __extends(c,b),c.prototype.createPath=function(b){var c=[690,690,1217,1217],d=[134,302,302,134],e=Math.min.apply(null,c),f=Math.min.apply(null,d),g=Math.max.apply(null,c)-e,h=Math.max.apply(null,d)-f,i=[],j=[],k=0;switch(b){case"hirisontal":k=this.x>960?-1:1,i=[this.x,this.x+g/4*k,this.x],j=[this.y,this.y+this.game.rnd.integerInRange(-20,20),this.y];break;case"hirisontal_diag":k=this.x>960?-1:1,i=[this.x,this.x+g/4*k,this.x];var l=this.y>f+h/2?-1:1;j=[this.y,this.y+this.game.rnd.integerInRange(h/4,h/2)*l,this.y];break;case"infinity":k=this.x>960?-1:1,i=[140,440,140,440,140],j=[328,168,168,328,328];break;case"batterfly":k=this.x>960?-1:1,i=[120,120,320,520,520,320,120],j=[68,288,248,288,68,168,68];break;case"triangle":Math.random()>.5?(i=[220,320,420,220],j=[288,108,288,288]):(i=[220,320,420,220],j=[108,288,108,108]);break;case"zigzag":Math.random()>.5?(i=[0,120,220,320,440,320,220,120,0],j=[268,68,268,68,268,68,268,68,268]):(i=[0,120,220,320,440,320,220,120,0],j=[68,268,68,268,68,268,68,268,68])}var m=Math.min.apply(null,i),n=Math.min.apply(null,j),o=Math.max.apply(null,i)-m,p=Math.max.apply(null,j)-n,q=o/g,r=p/h,s=[],t=[],u=3200;if("hirisontal_diag"==b||"hirisontal"==b)s=i,t=j,u=3200;else if("infinity"==b){var v=Math.max(q,r),w=Phaser.ArrayUtils.getRandomItem([0,g/2-o/2,g-o]);s=i.map(function(a){return(a-m+w)/v+e}),t=j.map(function(a){return(a-n)/(v/.8)+f}),u=4500}else if("batterfly"==b){var x=Math.max(q,r),y=Phaser.ArrayUtils.getRandomItem([0,g-o,g-o/2]);s=i.map(function(a){return(a-m+y)/x+e}),t=j.map(function(a){return(a-n)/x+f}),u=4500}else if("triangle"==b){var z=Math.max(q,r),A=this.game.rnd.integerInRange(0,g+(-o/2-this._visual.width/2));s=i.map(function(a){return(a-m+A)/z+e}),t=j.map(function(a){return(a-n)/z+f}),u=3200}else if("zigzag"==b){var B=Math.max(q,r),C=this.game.rnd.integerInRange(0,g+(-o/2-this._visual.width/2));s=i.map(function(a){return(a-m+C)/B+e}),t=j.map(function(a){return(a-n)/B+f}),u=6500}this.x=s.splice(0,1)[0],this.y=t.splice(0,1)[0],this._pathTween="zigzag"==b?this.game.add.tween(this).to({x:s,y:t},u*a.BaseGame.TARGET_SPEED,Phaser.Easing.Linear.None,!0,0,-1):this.game.add.tween(this).to({x:s,y:t},u*a.BaseGame.TARGET_SPEED,Phaser.Easing.Linear.None,!0,0,-1).interpolation(function(a,b){return Phaser.Math.catmullRomInterpolation(a,b)})},c.prototype.updateBonus=function(){if(this.visible&&!this._dead&&0!=this._canTouch){this.y=this._beginY+15*Math.sin(this._ang+=.05);var b=(250-this.y)/150;if(this._shadow.scale.set(1+b,1+b/2),this._shadow.x=this.x,"bonus"==this._type){if(this._currentDeg+=1,this._bonusMask.clear(),this._currentDeg>=360)return this._fakeBack.visible=!1,this._bonusBack.visible=!1,void this.freeBonus();this._bonusMask.beginFill(16724736),this._bonusMask.arc(0,0,135,a.GameConfig.degreesToRad(0),a.GameConfig.degreesToRad(this._currentDeg),!0)}return!1}},c.prototype.checkBonusCollide=function(a){return!this._dead&&(a&&Math.abs(a.y-this.y)<100&&this.game.physics.arcade.collide(a,this)?("bonus"==this._type?(this._dead=!0,this._baseGame._bonusPosition.set(this.x,this.y),this.deadBonus()):this.deadBonus(),!0):void 0)},Object.defineProperty(c.prototype,"bonusType",{get:function(){return this._type},enumerable:!0,configurable:!0}),c.prototype.resetBonus=function(a,b,d,e,f){var g=this;this._type=f||this._type,this.game.tweens.remove(this._pathTween),this.exists=!0,d&&(this._visual.scale.set(d),"bonus"==f&&(this._fakeBack.scale.set(d+.3),this._bonusBack.scale.set(d+.3))),"bonus"==f?this.body.setSize(1.4*this._visual.width,1.4*this._visual.height,-(1.4*this._visual.width)/2,-(1.4*this._visual.height)/2):this.body.setSize(this._visual.width,this._visual.height,-this._visual.width/2,-this._visual.height/2),this.scale.set(.1,.1),this.alpha=0,this.game.add.tween(this).to({alpha:1},300,Phaser.Easing.Linear.None,!0),this._shadow.alpha=0,this.game.add.tween(this._shadow).to({alpha:1},300,Phaser.Easing.Linear.None,!0),"bonus"!=f?this.game.add.tween(this.scale).to({x:.5,y:.5},500,Phaser.Easing.Back.Out,!0).onComplete.addOnce(function(){g._canTouch=!0}):(console.log("OLOLONUS"),this.game.add.tween(this.scale).to({x:1,y:1},500,Phaser.Easing.Back.Out,!0).onComplete.addOnce(function(){g._canTouch=!0})),this.x=a,this.y=b,this._shadow.x=a,e&&this.createPath(e),this._ang=0,this._beginY=b,this._timeLife=c.LIFE_TIME,this._dead=!1,this._canTouch=!1},c.prototype.deadBonus=function(){var a=this;this.game.tweens.remove(this._pathTween),this.game.add.tween(this._shadow.scale).to({x:-1},150,Phaser.Easing.Linear.None,!0),this.game.add.tween(this.scale).to({x:-.5},150,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){a.scale.x=.5,a._shadow.scale.x=1,a.game.add.tween(a._shadow.scale).to({x:-1},150,Phaser.Easing.Linear.None,!0),a.game.add.tween(a._shadow).to({alpha:.2},300,Phaser.Easing.Linear.None,!0),a.game.add.tween(a).to({alpha:.2},300,Phaser.Easing.Linear.None,!0),a.game.add.tween(a.scale).to({x:-.5},150,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){a.scale.x=.5,a._shadow.scale.x=1,a.game.add.tween(a._shadow.scale).to({x:-1},150,Phaser.Easing.Linear.None,!0),a.game.add.tween(a.scale).to({x:-.5},150,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){a.scale.x=.5,a._shadow.scale.x=1,a.exists=!1,"bonus"!=a._type?a._baseGame.addBonuses():a.annihilation()})})})},c.prototype.freeBonus=function(){var a=this;this._dead||(this.game.add.tween(this._shadow).to({alpha:.2},300,Phaser.Easing.Linear.None,!0),this.game.add.tween(this).to({alpha:.2},300,Phaser.Easing.Linear.None,!0),this._dead=!0,this.game.add.tween(this.scale).to({x:0,y:0},400,Phaser.Easing.Back.In,!0).onComplete.addOnce(function(){a.annihilation()}))},c.prototype.annihilation=function(){this.exists=!1,this._shadow.destroy(!0),this._baseGame.removeBonus(this),this.parent.removeChild(this),this.destroy(!0)},c.LIFE_TIME=400,c}(Phaser.Sprite);a.Bonus=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d,e){var f=b.call(this,c.game,d,e)||this;f._baseGame=c,f._bg=f.game.make.sprite(0,0,"atlas_planks","endGamePlank"),f._bg.anchor.set(.5,.53),f._ssChar=f.game.make.sprite(-270,198,"atlas_planks","endGamePlank_bear"),f._ssChar.anchor.set(.5,1),f._bg.addChild(f._ssChar),f.addChild(f._bg),f._currentScore="",f._resultText=f.game.make.text(76,-426,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].result,{font:"GinzaNarrow-Light",fontSize:"80px",fill:"#FFFFFF",align:"center"}),f._resultText.anchor.setTo(.5),f._resultScoreText=f.game.make.text(106,-208,f._currentScore,{font:"GinzaNarrow-Heavy",fontSize:"175px",fill:"#FFFFFF",align:"center"}),f._resultScoreText.anchor.setTo(.5),f._resultScoreText.setShadow(3,3,"rgba(0,0,0,0.5)",5),f._restartBtn=new a.OButton(f.game,"atlas",["btnStart_10001","btnStart_10002","btnStart_10003"],function(){f.hideWindow()}),f._restartBtn.x=294,f._restartBtn.y=100,f._restartBtn.anchor.set(.5);var g=f.game.add.sprite(0,0);if(g.scale.set(.63),g.addChild(f._restartBtn),f._gotoMenuBtn=new a.OButton(f.game,"atlas",["btnHome_10001","btnHome_10002","btnHome_10003"],function(){f.enableDisableAll(!1),f._baseGame.gotoMenu()}),f._gotoMenuBtn.x=12,f._gotoMenuBtn.y=62,f._gotoMenuBtn.anchor.set(.5),f._gotoMenuBtn.scale.set(.95),f._ssPlank=f.game.make.sprite(-246,342),f._ssPlank.tint=0,f._ssPlank.anchor.set(.5),f._bg.addChild(f._resultText),f._bg.addChild(f._resultScoreText),f._bg.addChild(g),f._bg.addChild(f._gotoMenuBtn),f._bg.addChild(f._ssPlank),f._ssButtonsArray=[],0!=window["show-share-btns"])for(var h=this,i=0;i<4;i++)!function(b){h._ssButtonsArray.push(new a.OButton(h.game,"UI_Sound_Atlas",["social000"+b,"social000"+b,"social000"+b],function(){f.showSocialShare(b)})),h._ssButtonsArray[b].anchor.set(.5),h._ssButtonsArray[b].position.set(184*b-26,20),h._ssButtonsArray[b].DefaultScale=1.15,h._ssPlank.addChild(h._ssButtonsArray[b])}(i);return f.enableDisableAll(!1),f._gameUrl=window["game-share-url"],f._imgUrl=window["game-share-img-url"+a.Boot.CURRENT_LANGUAGE.curLng],f._imgUrl=f._imgUrl?f._imgUrl:window["game-share-img-url"],f._description_start=3==a.BaseGame.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareBeginBall:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareBeginMedal,f._description_end=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng][3==a.BaseGame.CURRENT_GAME_MOD?"shareEndBall":"shareEndMedal"],f}return __extends(c,b),c.prototype.showSocialShare=function(b){var c=+this._currentScore,d="",e="";if(c>0){var f=(c+"").substr(-1);c>0&&c<11&&(d="1"==f?3==a.BaseGame.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreBallA:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreMedalA:"2"==f||"3"==f||"4"==f?3==a.BaseGame.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreBallB:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreMedalB:3==a.BaseGame.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreBallC:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreMedalC),c>20?d="1"==f?3==a.BaseGame.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreBallA:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreMedalA:"2"==f||"3"==f||"4"==f?3==a.BaseGame.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreBallB:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreMedalB:3==a.BaseGame.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreBallC:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreMedalC:c>10&&c<21&&(d=3==a.BaseGame.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreBallC:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreMedalC),e=this._description_start+" "+c+" "+d+this._description_end}else e=3==a.BaseGame.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareBadBall:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareBadMedal;switch(b){case 0:gameanalytics.GameAnalytics.addDesignEvent("Game:Sharing:VK",1),Share.vk(this._gameUrl,e,this._imgUrl);break;case 1:gameanalytics.GameAnalytics.addDesignEvent("Game:Sharing:FB",1),Share.fb(this._gameUrl,e,this._imgUrl);break;case 2:gameanalytics.GameAnalytics.addDesignEvent("Game:Sharing:OK",1),Share.ok(this._gameUrl,e,this._imgUrl);break;case 3:gameanalytics.GameAnalytics.addDesignEvent("Game:Sharing:TW",1),Share.tw(this._gameUrl,e,this._imgUrl)}},c.prototype.showWindow=function(a){var b=this;this._currentScore=a,this._resultScoreText.text=this._currentScore,+a>9?(this._ssChar.frameName="endGamePlank_bear",this._ssChar.x=-225,this._ssChar.y=185):(this._ssChar.frameName="endGamePlank_masha",this._ssChar.x=-270,this._ssChar.y=198),this.game.add.tween(this).to({y:this.game.height/2+30},400,Phaser.Easing.Back.Out,!0).onComplete.addOnce(function(){b.enableDisableAll(!0)})},c.prototype.enableDisableAll=function(a){this._restartBtn.enabled=a,this._gotoMenuBtn.enabled=a;for(var b=0;b<this._ssButtonsArray.length;b++)this._ssButtonsArray[b].enabled=a},c.prototype.hideWindow=function(){var a=this;this.enableDisableAll(!1),this._baseGame.whiteFlash(!0),setTimeout(function(){a.y=-a.game.height},100)},c}(Phaser.Sprite);a.EndGameWindow=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b){var c=a.call(this,b.game,0,0)||this;return c.initPosArray(),c._replayCount=0,c._replayMax=0,c.createFX(c.game.rnd.integerInRange(15,c._positionsArray.length)),c}return __extends(b,a),b.prototype.initPosArray=function(){this._positionsArray=[[166,134],[78,28],[570,68],[300,62],[202,90],[42,164],[588,154],[206,15],[764,44],[160,98],[398,98],[936,56],[1148,38],[1310,124],[1336,46],[1482,68],[1344,166],[1362,100],[1526,140],[1532,48],[1586,112],[1648,64],[1780,160],[1850,100]],this._visual=[]},
b.prototype.createFX=function(a){var b=this;this._fxNumber=a;for(var c=this,d=0;d<a;d++)!function(a){c._visual.push(c.game.make.image(0,0,"flash_atlas","flash_1")),c._visual[a].anchor.set(.5),c._visual[a].visible=!1;var d=Phaser.ArrayUtils.removeRandomItem(c._positionsArray);c._visual[a].position.set(d[0],d[1]),c._visual[a].scale.set((d[1]-15)/151*.4+.6),c._visual[a].alpha=.5,c._visual[a].animations.add("flash",Phaser.Animation.generateFrameNames("flash_",1,4)),setTimeout(function(){b._visual[a].visible=!0,b._visual[a].animations.play("flash",24,!1,!0).onComplete.addOnce(function(){b._fxNumber--,b.checkToDestroy()})},c.game.rnd.integerInRange(8*a,30*a)),c.addChild(c._visual[a])}(d)},b.prototype.checkToDestroy=function(){var a=this;0==this._fxNumber&&(this._replayCount<this._replayMax?this.replay():setTimeout(function(){a.destroy(!0)},20))},b.prototype.replay=function(){this.initPosArray(),this.createFX(this.game.rnd.integerInRange(20,this._positionsArray.length)),this._replayCount++},b}(Phaser.Sprite);a.FxFlash=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=Phaser.Sprite,c=function(b){function c(c,d,e){var f=b.call(this,c,d,e)||this;if(f._currentScore=0,f._btnsShow=!1,f._gameUrl=window["game-share-url"],f._imgUrl=window["game-share-img-url "+a.Boot.CURRENT_LANGUAGE.curLng],f._imgUrl=f._imgUrl?f._imgUrl:window["game-share-img-url"],f._description_start=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareBeginScore,f._description_end=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareEndScore,f._ssButtonsArray=[],f._ssPlank=f.game.make.group(),f._visual=new a.OButton(f.game,"atlas",["shareBtn1x","shareBtn1x","shareBtn1x"],function(){f._btnsShow?f.hideButtons():f.showButtons()}),f.addChild(f._ssPlank),f.addChild(f._visual),0!=window["show-share-btns"])for(var g=this,h=0;h<4;h++)!function(b){g._ssButtonsArray.push(new a.OButton(g.game,"UI_Sound_Atlas",["social000"+b,"social000"+b,"social000"+b],function(){f.showSocialShare(b)})),g._ssButtonsArray[b].anchor.set(.5),g._ssButtonsArray[b].position.set(g._visual.width+10+162*b,6),g._ssButtonsArray[b].alpha=0,g._ssPlank.add(g._ssButtonsArray[b]),g._ssButtonsArray[b].enabled=!1}(h);return f._visual.enabled=!1,f._visual.alpha=0,f._visual.scale.set(.8),f}return __extends(c,b),Object.defineProperty(c.prototype,"enabled",{get:function(){return this._visual.enabled},set:function(a){this._visual.enabled=a},enumerable:!0,configurable:!0}),c.prototype.showButtons=function(){var a=this;console.log("SHOW BTNS"),this._btnsShow=!0;var b=300;this._visual.enabled=!1,this.dropMainTween();for(var c=this,d=0;d<this._ssButtonsArray.length;d++)!function(d){var e=c._ssButtonsArray[d].x;c._ssButtonsArray[d].x=0,c.game.add.tween(c._ssButtonsArray[d]).to({alpha:1},b+100,Phaser.Easing.Sinusoidal.Out,!0),c.game.add.tween(c._ssButtonsArray[d]).to({x:e},b,Phaser.Easing.Back.Out,!0).onComplete.addOnce(function(){3==d&&(a._ssPlank.forEachAlive(function(a){a.enabled=!0},a),a._visual.enabled=!0)}),b+=50}(d)},c.prototype.hideButtons=function(){var a=this;console.log("HIDE BTNS"),this._btnsShow=!1,this._visual.scale.set(.8);var b=100;this._visual.enabled=!1,this._ssPlank.forEachAlive(function(a){a.enabled=!1},this);for(var c=this,d=0;d<this._ssButtonsArray.length;d++)!function(d){var e=c._ssButtonsArray[d].x;c.game.add.tween(c._ssButtonsArray[d]).to({alpha:0},b+50,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(function(){a._ssButtonsArray[d].x=e}),c.game.add.tween(c._ssButtonsArray[d]).to({x:0},b,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(function(){3==d&&(a._visual.enabled=!0,a.startMainTween())}),b+=50}(d)},c.prototype.show=function(a){var b=this;this._currentScore=a,0==this._visual.alpha&&this.game.add.tween(this._visual).to({alpha:.6},650,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.add(function(){b._visual.enabled=!0,b.startMainTween()})},c.prototype.startMainTween=function(){var a=this;.8!=this._visual.scale.x?(this.game.tweens.remove(this._visualTween),this._visual.alpha=.6,this._visualTween=this.game.add.tween(this._visual.scale).to({x:.8,y:.8},600,Phaser.Easing.Sinusoidal.InOut,!0),this._visualTween.onComplete.addOnce(function(){a._visualTween=a.game.add.tween(a._visual.scale).to({x:.85,y:.85},900,Phaser.Easing.Sinusoidal.InOut,!0,0,-1,!0)})):(this.game.tweens.remove(this._visualTween),this._visual.alpha=.6,this._visualTween=this.game.add.tween(this._visual.scale).to({x:.85,y:.85},900,Phaser.Easing.Sinusoidal.InOut,!0,0,-1,!0))},c.prototype.dropMainTween=function(){this._visual.alpha=1,this.game.tweens.remove(this._visualTween),this._visualTween=this.game.add.tween(this._visual.scale).to({x:.85,y:.85},600,Phaser.Easing.Sinusoidal.InOut,!0)},c.prototype.dropBtns=function(){this._btnsShow&&this.hideButtons()},c.prototype.showSocialShare=function(b){var c=+this._currentScore,d="",e="";if(c>0){var f=(c+"").substr(-1);c>0&&c<11?d="1"==f?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreScoreA:"2"==f||"3"==f||"4"==f?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreScoreB:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreScoreC:c>20?d="1"==f?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreScoreA:"2"==f||"3"==f||"4"==f?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreScoreB:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreScoreC:c>10&&c<21&&(d=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareScoreScoreC),e=this._description_start+" "+c+" "+d+this._description_end}else e=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].shareBadScore;switch(b){case 0:Share.vk(this._gameUrl,e,this._imgUrl);break;case 1:Share.fb(this._gameUrl,e,this._imgUrl);break;case 2:Share.ok(this._gameUrl,e,this._imgUrl);break;case 3:Share.tw(this._gameUrl,e,this._imgUrl)}},c}(b);a.ShareIngameBtn=c}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b,c,d){var e=a.call(this,b.game,c,d)||this;return e._visual=e.game.make.sprite(0,0,"atlas","star"),e._visual.anchor.set(.5),e._visual.scale.set(.25,.25),e._rotationSpeed=e.game.rnd.integerInRange(2.8,7.5),e.addChild(e._visual),e}return __extends(b,a),b.prototype.update=function(){this.angle+=this._rotationSpeed},b}(Phaser.Sprite);a.StarParticle=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function a(){}return a.enableDrag=function(a){a.inputEnabled=!0,a.input.enableDrag(),a.events.onDragUpdate.add(function(){console.log(a.x+","+a.y)},this)},a.degreesToRad=function(a){return a*Math.PI/180},a.MAP_COLS=9,a.MAP_ROWS=6,a.BLOCK_SIZE=80,a.TELEPORTATION_FRAMERATE=24,a.REVERSE_FRAMERATE=24,a.PLAYER_SPEED_X=100,a.PINGUIN_SPAWN_TIME=2,a.PINGUIN_SPEED=75,a.MAGIC_SPEED=240,a.PLAYER_SPPED_Y=400,a.playMusic=!0,a.WIDTH=720,a.HEIGHT=480,a}();a.GameConfig=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function a(){if(this._saveDataName="~NoName~",null!=a._instance)throw"Попытка создать дубликат SaveManager!";a._instance=this}return Object.defineProperty(a,"getInstance",{get:function(){return null==a._instance&&new a,a._instance},enumerable:!0,configurable:!0}),a.prototype.init=function(a,b){this._saveDataName=a,this._saveData=b},a.prototype.save=function(){return!!a._canSave&&(localStorage.setItem(this._saveDataName,JSON.stringify(this._saveData)),!0)},a.prototype.load=function(){if(a._canSave=!1,!a.isLocalStorageNameSupported())return void this._saveData.reset();a._canSave=!0;var b=JSON.parse(localStorage.getItem(this._saveDataName));return null==b?(this.save(),this._saveData):(this._saveData=b,this._saveData)},a.isLocalStorageNameSupported=function(){var a=window.localStorage;try{return a.setItem("test","1"),a.removeItem("test"),!0}catch(a){return!1}},a}();a.SaveManager=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function a(){}return a}();a.SaveData=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function a(){}return a.setProperty=function(a,b){document.cookie=a+"="+b},a.setData=function(a,b){document.cookie=a+"="+JSON.stringify(b)},a.getProperty=function(a){var b=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return b?decodeURIComponent(b[1]):null},a.getData=function(a){var b=this.getProperty(a);return null==b?null:JSON.parse(b)},a}();a.CookieSave=b}(TProject||(TProject={}));var TProject;!function(a){var b;!function(a){a.RUSSIAN="ru",a.ENGLISH="en",a.DEUTSCH="de",a.FRENCH="fr",a.ITALIAN="it",a.PORTUG="pt",a.SPANISH="es",a.POLISH="pl"}(b=a.GAME_LANGUAGE||(a.GAME_LANGUAGE={}));var c=function(){function c(c){this.DEFAULT_LNG=b.ENGLISH,null!=c&&this.inLanguage(c)?this._lng=c:(this._lng=a.CookieSave.getProperty("game_language"),null==this._lng&&(this._lng=this.brouserLng)),this.inLanguage(this._lng)||(this._lng=this.DEFAULT_LNG),console.log("Current lng:",this._lng)}return c.prototype.inLanguage=function(a){for(var c in b)if(b[c]==a)return!0;return!1},c.prototype.getIndexLanguage=function(a){var c=0;for(var d in b){if(b[d]==a)return c;c++}return 0},c.prototype.getNameLanguage=function(a){var c=0;for(var d in b){if(c==a)return b[d];c++}return this.DEFAULT_LNG},c.prototype.setLng=function(b){this._lng=b,a.CookieSave.setProperty("game_language",this._lng),console.log("Current lng:",this._lng)},Object.defineProperty(c.prototype,"curLng",{get:function(){return this._lng},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"currentIndex",{get:function(){return this.getIndexLanguage(this._lng)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"brouserLng",{get:function(){var a=navigator.language||navigator.browserLanguage;return null==a?this.DEFAULT_LNG:2==a.length?a:a.substr(0,2)},enumerable:!0,configurable:!0}),c}();a.LngSelector=c}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(a,c,d,e,f){void 0===e&&(e=null),void 0===f&&(f=!1);var g=this,h=null,i=null,j=null;return d.length>0&&(h=d[0],d.length>1?(i=d[1],j=d.length>2?d[2]:d[0]):(i=d[0],j=d[0])),g=b.call(this,a,0,0,c,null,null,i,h,j,null)||this,g._framesString=[h,i,j],g.soundOver="over",g.soundDown="click",g.anchor.setTo(.5),g._cb=e,g._deltaScale=.1,g._defaultScale=1,g._isDown=!1,g._isOver=!1,g._invert=f,g._invert?g.scale.set(-g._defaultScale,g._defaultScale):g.scale.set(g._defaultScale),g.onInputOver.add(g.over,g),g.onInputOut.add(g.out,g),g.onInputDown.add(g.down,g),g.onInputUp.add(g.up,g),g}return __extends(c,b),c.prototype.setCBContext=function(a){this._cntxt=a},c.prototype.setAnimationScale=function(a,b){void 0===a&&(a=0),void 0===b&&(b=1),this._deltaScale=a,this._defaultScale=b},c.prototype.setNewFrames=function(a){var b=null,c=null,d=null;a.length>0&&(b=a[0],a.length>1?(c=a[1],d=a.length>2?a[2]:a[0]):(c=a[0],d=a[0])),this._framesString=[b,c,d],this.setFrames(c,b,d)},c.prototype.over=function(){this._isDown,this._isOver=!0,a.SoundMixer.play(this.soundOver,1.2)},c.prototype.out=function(){this._isDown||(this._invert?this.scale.set(-this._defaultScale,this._defaultScale):this.scale.set(this._defaultScale)),this._isOver=!1},c.prototype.up=function(){var b=this;if(this._isDown){this._invert?this.scale.set(-this._defaultScale,this._defaultScale):this.scale.set(this._defaultScale);var c=this.game.device.desktop?this._isOver:this.input.pointerOver();this._isOver?this.frameName=this._framesString[1]:c&&setTimeout(function(){b.frameName=b._framesString[0]},5),this._isDown=!1,c&&null!=this._cb?(a.SoundMixer.play(this.soundDown,1),this._cntxt?this._cb.bind(this._cntxt)(this):this._cb(this),this.frameName=this._framesString[0]):0==c&&(this._invert?this.scale.set(-this._defaultScale,this._defaultScale):this.scale.set(this._defaultScale))}},c.prototype.down=function(){this._isDown||(this._invert?this.scale.set(-(this._defaultScale-this._deltaScale),this._defaultScale-this._deltaScale):this.scale.set(this._defaultScale-this._deltaScale),this._isDown=!0)},c.prototype.deleteFromParent=function(){this.parent&&this.parent.removeChild(this),this.onInputOver.remove(this.over,this),this.onInputOut.remove(this.out,this),this.onInputDown.remove(this.down,this),this.onInputUp.remove(this.up,this)},Object.defineProperty(c.prototype,"enabled",{set:function(a){this.inputEnabled=a,a||(this.frameName=this._framesString[0],this._invert?this.scale.set(-this._defaultScale,this._defaultScale):this.scale.set(this._defaultScale))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"DefaultScale",{set:function(a){this._defaultScale=a,this.scale.set(this._defaultScale)},enumerable:!0,configurable:!0}),c}(Phaser.Button);a.OButton=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(a,c,d,e,f){void 0===f&&(f=null);var g=this,h=null,i=null,j=null,k=null,l=null,m=null;return d.length>0&&(h=d[0],d.length>1?(i=d[1],j=d.length>2?d[2]:d[0]):(i=d[0],j=d[0])),e.length>0&&(k=e[0],e.length>1?(l=e[1],m=e.length>2?e[2]:e[0]):(l=e[0],m=e[0])),g=b.call(this,a,0,0,c,null,null,i,h,j,null)||this,g._framesString=[h,i,j,k,l,m],g._check=!0,g.soundOver="over",g.soundDown="click",g.anchor.setTo(.5),g._cb=f,g._deltaScale=.1,g._defaultScale=1,g._isDown=!1,g._isOver=!1,g.onInputOver.add(g.over,g),g.onInputOut.add(g.out,g),g.onInputDown.add(g.down,g),g.onInputUp.add(g.up,g),g}return __extends(c,b),c.prototype.setCheck=function(a){if(this._check!=a){this._check=a;var b=0;a||(b=3),this.setFrames(this._framesString[b+1],this._framesString[b],this._framesString[b+2],this._framesString[b])}},Object.defineProperty(c.prototype,"check",{get:function(){return this._check},enumerable:!0,configurable:!0}),c.prototype.setCBContext=function(a){this._cntxt=a},c.prototype.setAnimationScale=function(a,b){void 0===a&&(a=0),void 0===b&&(b=1),this._deltaScale=a,this._defaultScale=b},c.prototype.over=function(){this._isDown,this._isOver=!0,a.SoundMixer.play(this.soundOver,1.2)},c.prototype.out=function(){this._isDown||this.scale.set(this._defaultScale),this._isOver=!1},c.prototype.up=function(){var b=this;if(this._isDown){this.scale.set(this._defaultScale);var c=this.game.device.desktop?this._isOver:this.input.pointerOver();this._isOver?this.frameName=this._framesString[1+(this._check?0:3)]:c&&setTimeout(function(){b.frameName=b._framesString[b._check?0:3]},5),this._isDown=!1,c&&null!=this._cb?(a.SoundMixer.play(this.soundDown,1),this.setCheck(!this.check),this._cntxt?this._cb.bind(this._cntxt)():this._cb(),this.frameName=this._framesString[this._check?0:3]):0==c&&this.scale.set(this._defaultScale)}},c.prototype.down=function(){this._isDown||(this.scale.set(this._defaultScale-this._deltaScale),this._isDown=!0)},c.prototype.deleteFromParent=function(){this.parent&&this.parent.removeChild(this),this.onInputOver.remove(this.over,this),this.onInputOut.remove(this.out,this),this.onInputDown.remove(this.down,this),this.onInputUp.remove(this.up,this)},Object.defineProperty(c.prototype,"enabled",{set:function(a){var b=this;this.inputEnabled=a,a||setTimeout(function(){b.frameName=b._framesString[b._check?0:3],b.scale.set(b._defaultScale)},5)},enumerable:!0,configurable:!0}),c}(Phaser.Button);a.OButtonCheck=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function a(a){this._overlayVisible=!1,this._game=a,this.isIphone&&this.setupScrollOverlay()}return Object.defineProperty(a.prototype,"checkFullScreen",{get:function(){return screenfull.enabled},enumerable:!0,configurable:!0}),a.prototype.toggleFullScreen=function(){screenfull.toggle(this._game.canvas)},a.prototype.start=function(){var a=this;0!=this.isIphone&&1==window["iphone-scroll-overlay"]&&(setTimeout(function(){a.toggleOverlay()},500),window.addEventListener("resize",this.checkScreenStatus.bind(this),!1),this._game.scale.onOrientationChange.add(this.checkScreenStatus,this),document.body.addEventListener("touchend",this.checkScreenStatus.bind(this),!1))},a.prototype.checkScreenStatus=function(){this.toggleOverlay()},a.prototype.setupScrollOverlay=function(){this._scrollOverlay=document.createElement("div"),this._scrollOverlay.className="scrollup",this._scrollOverlay.setAttribute("id","scrollup"),this._scrollOverlay.style.height="1000000px",this._scrollOverlay.style.display="none",this._animationContainer=document.createElement("div"),this._game.scale.isLandscape&&this.isIphone6PlusStandardMode&&(this._animationContainer.style.position="absolute"),this._animationContainer.className="scrollAnimationContainer iOS_scrollup_uri",this._animationContainer.style.visibility="hidden",document.body.appendChild(this._animationContainer),document.body.appendChild(this._scrollOverlay)},a.prototype.resetGamePosition=function(){this._removeOverlayTimeout&&window.clearTimeout(this._removeOverlayTimeout),this._removeOverlayTimeout=window.setTimeout(function(){window.scrollTo(0,0),document.getElementById("scrollup").scrollTo(0,0)},300)},a.prototype.removeOverlay=function(){this.resetGamePosition(),this._overlayVisible&&(this._scrollOverlay.style.display="none",this._animationContainer.style.visibility="hidden",this._overlayVisible=!1,this._game.scale.isLandscape&&this.isIphone5Or5sOr5c,window.needPreventDefault=!0)},a.prototype.eventPreventDefault=function(a){a.preventDefault()},a.prototype.showOverlay=function(){this._overlayVisible||(window.needPreventDefault=!1,this._scrollOverlay.style.display="block",this._animationContainer.style.visibility="visible",this._overlayVisible=!0)},a.prototype.isFullscreen=function(){var a=this.getRealScreenSize();return a.height===window.innerHeight||window.innerHeight/a.height>=.9},a.prototype.getRealScreenSize=function(){var a,b;return this._game.device.desktop?this.getInnerScreenSize():(this._game.scale.isPortrait?(a=Math.min(window.screen.width,window.screen.height),b=Math.max(window.screen.width,window.screen.height)):(a=Math.max(window.screen.width,window.screen.height),b=Math.min(window.screen.width,window.screen.height)),{width:a,height:b})},a.prototype.getInnerScreenSize=function(){return{width:window.innerWidth,height:window.innerHeight}},a.prototype.toggleOverlay=function(){document.documentElement.style.paddingBottom="79px",this._game.scale.isLandscape&&this.isIphone6PlusStandardMode&&(document.documentElement.style.paddingBottom=""),this.isFullscreen()?this.removeOverlay():this.showOverlay()},Object.defineProperty(a.prototype,"isIphone6PlusStandardMode",{get:function(){return!!this.isIphone&&"6+"==this.iPhoneVersion()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isIphone5Or5sOr5c",{get:function(){return!!this.isIphone&&"5"==this.iPhoneVersion()},enumerable:!0,configurable:!0}),a.prototype.iPhoneVersion=function(){var a=window.screen.height,b=window.screen.width;return 320===b&&480===a?"4":375===b&&667===a?"6":414===b&&736===a?"6+":320===b&&568===a?"5":a<=480?"2-3":"none"},Object.defineProperty(a.prototype,"isIphone",{get:function(){return!!navigator.userAgent.match(/iPhone/i)||this._game.device.iPhone},enumerable:!0,configurable:!0}),a}();a.ScrollOverlay=b}(TProject||(TProject={}));var Share;!function(a){function b(b,c,d){var e="http://vkontakte.ru/share.php?";e+="url="+encodeURIComponent(b),e+="&title="+encodeURIComponent(c),e+="&image="+encodeURIComponent(d),e+="&noparse=true",a.openUrl(e)}function c(b,c,d){var e="https://connect.ok.ru/offer?";e+="url="+encodeURIComponent(b),e+="&title=&description="+encodeURIComponent(c),e+="&imageUrl="+encodeURIComponent(d),a.openUrl(e)}function d(b,c,d){if(0!=window["use-share-api"])window.facebookShare(b,c);else{var e="https://www.facebook.com/sharer.php?u=";e+="&p[quote]="+encodeURIComponent(c),e+="&p[url]="+encodeURIComponent(b),e+="&p[images][0]="+d,a.openUrl(e)}}function e(b,c,d){var e="http://twitter.com/share?";e+="text="+encodeURIComponent(c),e+="&url="+encodeURIComponent(b),a.openUrl(e)}function f(a){window.open(a,"","toolbar=0,status=0,width=626,height=436")}a.vk=b,a.ok=c,a.fb=d,a.tw=e,a.openUrl=f}(Share||(Share={}));var TProject;!function(a){var b=function(){function a(){}return a.init=function(b){a._audio=b.add.audioSprite("sfx")},a.play=function(b,c,d,e){if(void 0===c&&(c=.3),void 0===d&&(d=!1),void 0===e&&(e=!1),0==this._playMusic&&d)return a._bgKey=b,void(a._bgVolume=c);if(d){if(a._bg&&a._bg.isPlaying&&a._bgKey==b)return;return a._bg&&a._bg.stop(),a._bgKey=b,a._bgVolume=c,a._bg=a._audio.play(b,c),a._bg.allowMultiple=!0,a._bg.loop=!0,a._bg}if(this._playMusic){var f=a._audio.play(b,c);return f.allowMultiple=!0,f.loop=e,f}},a.bgStop=function(){a._bg.stop()},a.on=function(){a._bgKey&&a.play(a._bgKey,a._bgVolume,!0,!0)},a.off=function(){a._audio.stop(null)},a._playMusic=!0,a}();a.SoundMixer=b}(TProject||(TProject={}));var Utils;!function(a){function b(a,b){return a+Math.random()*(b-a)}a.randomRange=b}(Utils||(Utils={}));var TProject;!function(a){var b=function(){function a(){}return a.CURRENT_STATE="MainMenu",a.roomName="kitchenRoom",a.roomStage=2,a}();a.LocalConfig=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function b(){0==b.getParentDomain(document.domain)&&(window["use-share-api"]=!1,window["use-lock-screen"]=!1,window["mobile-redirect"]=!1,b.MY_DOMAIN=!1),this.game=new Phaser.Game({width:1920,height:1080,renderer:Phaser.AUTO,parent:"game_container",transparent:!1,antialias:!0,physicsConfig:null,preserveDrawingBuffer:!0}),this.game.state.add("Boot",a.Boot,!0),this.game.state.add("Preloader",a.Preloader),this.game.state.add("BaseGame",a.BaseGame),this.game.state.add("MainMenu",a.MainMenu)}return b.getParentDomain=function(a){var b=window.location!=window.parent.location?document.referrer:document.location.href;return window["parent-domain"]||(window["parent-domain"]=this.DEF_PARENT_DOMAIN),!!(b.indexOf(window["parent-domain"])+1)},Object.defineProperty(b,"isMobile",{get:function(){return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))},enumerable:!0,configurable:!0}),b.MY_DOMAIN=!0,b.SCALE=1,b.DEF_PARENT_DOMAIN="mashabear.ru",b}();a.Main=b}(TProject||(TProject={})),window.onload=function(){new TProject.Main;window.needPreventDefault=!0,setTimeout("window.scrollTo(0, 1)",10),document.addEventListener("touchmove",function(a){1==window.needPreventDefault&&a.preventDefault()},!1)};var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;return a._dir=0,a._gameDifCoef=.75,a._currentTime=.75,a._currentNumberTarget=0,a}return __extends(c,b),c.prototype.create=function(){var b=this;c.CURRENT_GAME_MOD=a.Boot.CURRENT_GAME_MOD,this._layerZero=this.make.group(),this._zContainer=this.make.group(),this._bg=this.make.image(0,0,"bg_game"),this._bgAnimals3=this.game.make.sprite(954,94,"atlas","animals3"),this._bgAnimals3.anchor.set(.5),this._bg.addChild(this._bgAnimals3),this._bgAnimals2=this.game.make.sprite(966,100,"atlas","animals2"),this._bgAnimals2.anchor.set(.5),this._bg.addChild(this._bgAnimals2),this._bgAnimals1=this.game.make.sprite(972,176,"atlas","animals1"),this._bgAnimals1.anchor.set(.5),this._bg.addChild(this._bgAnimals1),this._bgBordure=this.make.image(0,194,"atlas","brdr"),this._bg.addChild(this._bgBordure),this.game.physics.startSystem(Phaser.Physics.ARCADE),this._ballArray=[],this._stopGame=!1,this._downX=null,this._downY=null,this._ballStartPos=960,this._debug=this.make.graphics(0,0),this._punchDir=0,this._punch=!1,this._bonuses=[],this._bonusPosition=new Phaser.Point(0,0),this._hitArea=[];var d=this.make.sprite(615,320+c.BALL_Y_OFFSET);if(this.game.physics.arcade.enable(d),d.body.setSize(50,280,0,-280-c.BALL_Y_OFFSET),this._hitArea.push(d),d=this.make.sprite(1245,320+c.BALL_Y_OFFSET),this.game.physics.arcade.enable(d),d.body.setSize(50,280,0,-280-c.BALL_Y_OFFSET),this._hitArea.push(d),1!=c.CURRENT_GAME_MOD)d=this.make.sprite(960,335+c.BALL_Y_OFFSET),this._bearSideStep=new a.Bear(this),d.addChild(this._bearSideStep),this.game.physics.arcade.enable(d),d.body.setSize(200,190,-100,-190-c.BALL_Y_OFFSET),this._hitArea.push(d),this._goalkeeper=this._hitArea[2];else{this._currentBarierArray=[],this._currentBarierArray.push(new a.Barrier(this,550,836,"N")),this._currentBarierArray.push(new a.Barrier(this,980,488,"N"));for(var e=0;e<this._currentBarierArray.length;e++)this._hitArea.push(this._currentBarierArray[e])}if(this._goal=this.make.sprite(645,55+c.BALL_Y_OFFSET),this.game.physics.arcade.enable(this._goal),this._goal.body.setSize(610,280),this._vorota=this.game.make.sprite(955,310+c.BALL_Y_OFFSET,"atlas","vorota"),this._vorota.anchor.set(.5,.923),this._setka=this.game.make.sprite(955,185+c.BALL_Y_OFFSET,"atlas","setka"),this._setka.anchor.set(.5),this._text=this.game.make.text(90,50,"ГОЛ!",{font:"GinzaNarrow-Heavy",fontSize:"160px",fill:"#FFFFFF",align:"center"}),this._text.anchor.set(.5),this._text.visible=!1,this._gameUILayer=this.game.make.sprite(0,0),this._gameOverLayer=this.game.make.sprite(0,0),this._startLives=3,this._currentLivesCount=this._startLives,this._scoreCounter=0,this._targetCounter=0,this._gameIsGoOne=!0,this._successGoal=!1,this._currentBonusType="empty",this._whiteOver=this.game.add.graphics(0,0),this._whiteOver.beginFill(16777215,1),this._whiteOver.drawRect(0,0,this.game.width,this.game.height),this._whiteOver.tint=0,this.game.add.tween(this._whiteOver).to({alpha:0},200,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.add(function(){b._whiteOver.alpha=0,b._whiteOver.tint=16777215,b.showTutorialWindow()}),this._blackOver=this.game.add.graphics(0,0),this._blackOver.beginFill(0,1),this._blackOver.drawRect(0,0,this.game.width,this.game.height),this._blackOver.alpha=.8,this._blackOver.inputEnabled=!0,this._nameScoreText=this.game.make.text(1758,182,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].points,{font:"GinzaNarrow-Light",fontSize:"45px",fill:"#FFFFFF",align:"center"}),this._nameScoreText.anchor.setTo(.5),this._currentScoreText=this.game.make.text(1758,250,"0"+this._scoreCounter,{font:"GinzaNarrow-Heavy",fontSize:"90px",fill:"#FFFFFF",align:"center"}),this._currentScoreText.anchor.setTo(.5),this._currentScoreText.setShadow(3,3,"rgba(0,0,0,0.5)",5),1==c.CURRENT_GAME_MOD){this._nameScoreText.y-=83,this._currentScoreText.y-=83,this._nameScoreText.x+=40,this._currentScoreText.x+=40}if(this._ingameScoreText=this.game.make.text(90,130,this._scoreCounter+"",{font:"GinzaNarrow-Heavy",fontSize:"60px",fill:"#FFFFFF",align:"center"}),this._ingameScoreText.anchor.setTo(.5),this._ingameScoreText.alpha=0,this._ingameScoreText.stroke="#000000",this._ingameScoreText.strokeThickness=6,this._plankBalls=new a.BallUIPlank(this,1686,88),this._exitMenuBtn=new a.OButton(this.game,"atlas",["btnHome_10001","btnHome_10002","btnHome_10003"],function(){b.gotoMenu()}),this._exitMenuBtn.position.set(118,148),this._exitMenuBtn.anchor.set(.5),this.createTutorialWindow(),this._endGamePlank=new a.EndGameWindow(this,this.game.width/2,-this.game.height),this._layerZero.add(this._bg),this._layerZero.add(this._setka),this._ballShadowsPull=this.game.make.sprite(0,0),this._layerZero.add(this._ballShadowsPull),this._layerZero.add(this._zContainer),this._layerZero.add(this._hitArea[0]),this._layerZero.add(this._hitArea[1]),this._layerZero.add(this._goal),this._layerZero.add(this._ingameScoreText),this._layerZero.add(this._gameUILayer),this._gameUILayer.addChild(this._text),this._gameUILayer.addChild(this._nameScoreText),this._gameUILayer.addChild(this._currentScoreText),this._gameUILayer.addChild(this._plankBalls),this._gameUILayer.addChild(this._exitMenuBtn),this._gameUILayer.addChild(this._blackOver),this._gameUILayer.addChild(this._startTutorialBG),this._gameUILayer.addChild(this._endGamePlank),0!=window["show-share-btns"]&&(this._shareIngameBtn=new a.ShareIngameBtn(this.game,282,152),this._gameUILayer.addChild(this._shareIngameBtn),this._shareIngameBtn.enabled=!1),this._layerZero.add(this._gameOverLayer),this._gameOverLayer.addChild(this._whiteOver),this._zContainer.add(this._vorota),1!=c.CURRENT_GAME_MOD&&this._zContainer.add(this._goalkeeper),1==c.CURRENT_GAME_MOD)for(var e=0;e<this._currentBarierArray.length;e++)this._zContainer.add(this._currentBarierArray[e]);if(this._vorota.depth=this._vorota.y,1!=c.CURRENT_GAME_MOD&&(this._goalkeeper.depth=this._goalkeeper.y),1==c.CURRENT_GAME_MOD&&1==c.CURRENT_GAME_MOD)for(var e=0;e<this._currentBarierArray.length;e++)this._currentBarierArray[e].depth=this._currentBarierArray[e].y;a.SoundMixer.play("ambient",.4,!0,!0),this.startGame(),this._goalCounter=0},c.prototype.playGoalReaction=function(){0==this._goalCounter?(this._goalCounter=8,this.subGoalReaction()):this._goalCounter=8},c.prototype.subGoalReaction=function(){this._goalCounter--,
this._goalCounter<=0?(this._goalCounter=0,this.resetPublicTween()):this.goalReaction()},c.prototype.goalReaction=function(){var a=this;this._bgAnimals1Tween=this.game.add.tween(this._bgAnimals1).to({y:this._bgAnimals1.y-20},262.5,Phaser.Easing.Sinusoidal.InOut,!0,0,0,!0),this._bgAnimals1Tween.onComplete.addOnce(function(){a.subGoalReaction()}),this._bgAnimals2Tween=this.game.add.tween(this._bgAnimals2).to({y:this._bgAnimals2.y-15},118.75,Phaser.Easing.Sinusoidal.InOut,!0,25,1,!0),this._bgAnimals3Tween=this.game.add.tween(this._bgAnimals3).to({y:this._bgAnimals3.y-12},106.25,Phaser.Easing.Sinusoidal.InOut,!0,50,1,!0),this._bgAnimals2TweenX=this.game.add.tween(this._bgAnimals2).to({x:this._bgAnimals2.x+this.game.rnd.integerInRange(-30,30)},262.5,Phaser.Easing.Sinusoidal.InOut,!0,0,0,!0),this._bgAnimals3TweenX=this.game.add.tween(this._bgAnimals3).to({x:this._bgAnimals3.x+this.game.rnd.integerInRange(-15,15)},262.5,Phaser.Easing.Sinusoidal.InOut,!0,0,0,!0)},c.prototype.startGame=function(){this._oldPose=0,this.initScene();for(var a=this._bonuses.length-1;a>=0;a--)if(0!=a){var b=this._bonuses.splice(a,1)[0];b.annihilation()}this._bearCanMoveNow3MOD=!1,c.TARGET_SPEED=1,this._goalkeeperStopTime=c.GOALKEEPER_STOP_TIME,2==c.CURRENT_GAME_MOD?(c.GOALKEEPER_CURRENT_MODE=0,this._goalkeeper.x=Phaser.ArrayUtils.getRandomItem(c.GOALKEEPER_POSITIONS),this._currentBearStartPos=this._goalkeeper.x,this.addBonuses(),this.bearTargetSet(),this._bearSideStep.goal()):3==c.CURRENT_GAME_MOD?(this._currentBearStartPos=960,this._goalkeeper.x=960,c.GOALKEEPER_CURRENT_MODE=1,this._bearCanMoveNow3MOD=!1,this._currentTime=31,this._bearSideStep.goal()):1==c.CURRENT_GAME_MOD&&(this._currentTime=31)},c.prototype.showTutorialWindow=function(){var a=this;1==c.CURRENT_GAME_MOD?(this._startTutorialAnimation.visible=!0,this._targetTutorialAnimation.visible=!1,this._targetTutorialBear.visible=!1):2==c.CURRENT_GAME_MOD?(this._startTutorialAnimation.visible=!0,this._targetTutorialAnimation.visible=!0,this._targetTutorialBear.visible=!0):3==c.CURRENT_GAME_MOD&&(this._startTutorialAnimation.visible=!0,this._targetTutorialAnimation.visible=!1,this._targetTutorialBear.visible=!0),this.game.add.tween(this._startTutorialBG).to({y:this.game.height/2},400,Phaser.Easing.Back.Out,!0).onComplete.addOnce(function(){a._startTutorialBtn.enabled=!0,a._startTutorialAnimation.animations.play("tutorialLoop",24,!0),a._targetTutorialAnimation.animations.play("tutorialLoop",24,!0),a._gameIsGoOne=!1})},c.prototype.hideTutorialWindow=function(){var a=this;this.game.add.tween(this._blackOver).to({alpha:0},300,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.addOnce(function(){a._blackOver.inputEnabled=!1}),this.game.add.tween(this._startTutorialBG).to({y:-this.game.height},300,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.addOnce(function(){a._startTutorialBtn.enabled=!1,a._startTutorialAnimation.animations.stop("tutorialLoop"),a._targetTutorialAnimation.animations.stop("tutorialLoop"),a._gameIsGoOne=!0,a.initController(),a._startTutorialBG.destroy(!0)})},c.prototype.createTutorialWindow=function(){var b=this;this._startTutorialBG=this.game.make.sprite(this.game.width/2,2*this.game.height,"atlas_planks","helpPlank"),this._startTutorialBG.anchor.set(.5),this._startTutorialAnimation=this.game.make.sprite(-18,186,"atlas","help_10001"),this._startTutorialAnimation.anchor.set(.5),this._startTutorialAnimation.animations.add("tutorialLoop",Phaser.Animation.generateFrameNames("help_1",1,36,"",4)),this._targetTutorialAnimation=this.game.make.sprite(-72,-148,"atlas","monetka_10001"),this._targetTutorialAnimation.anchor.set(.5),this._targetTutorialAnimation.animations.add("tutorialLoop",Phaser.Animation.generateFrameNames("monetka_1",1,36,"",4)),this._targetTutorialBear=this.game.make.sprite(34,-132,"atlas","medved_in_plank"),this._targetTutorialBear.anchor.set(.5),this._startTutorialBtn=new a.OButton(this.game,"atlas",["btnExit_10001","btnExit_10002","btnExit_10003"],function(){b.hideTutorialWindow()}),this._startTutorialBtn.position.set(0,402),this._startTutorialBtn.anchor.set(.5),this._startTutorialBtn.enabled=!1,this._startTutorialText=this.game.make.text(0,-336,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["how-to-play"],{font:"GinzaNarrow-Light",fontSize:"60px",fill:"#FFFFFF",align:"center"}),this._startTutorialText.anchor.setTo(.5),this._startTutorialBG.addChild(this._targetTutorialAnimation),this._startTutorialBG.addChild(this._targetTutorialBear),this._startTutorialBG.addChild(this._startTutorialAnimation),this._startTutorialBG.addChild(this._startTutorialBtn),this._startTutorialBG.addChild(this._startTutorialText)},c.prototype.restartGame=function(){this._blackOver.alpha=0,this._currentScoreText.exists=!0,this._nameScoreText.exists=!0,this._plankBalls.exists=!0,this._exitMenuBtn.exists=!0,this._currentLivesCount=this._startLives,this._scoreCounter=0,this._targetCounter=0,this._gameIsGoOne=!0,this._successGoal=!1,this.resetPublicTween(),this._currentBonusType="empty",this._currentScoreText.text="0"+this._scoreCounter,this._plankBalls.initPlank(),this.startGame()},c.prototype.resetPublicTween=function(){this._goalCounter=0,this.game.tweens.remove(this._bgAnimals1Tween),this.game.tweens.remove(this._bgAnimals2Tween),this.game.tweens.remove(this._bgAnimals3Tween),this.game.tweens.remove(this._bgAnimals2TweenX),this.game.tweens.remove(this._bgAnimals3TweenX),this._bgAnimals3.position.set(954,94),this._bgAnimals2.position.set(966,100),this._bgAnimals1.position.set(972,176)},c.prototype.endScreen=function(){this._text.exists=!1,this._currentScoreText.exists=!1,this._nameScoreText.exists=!1,this._plankBalls.exists=!1,this._exitMenuBtn.exists=!1,this._blackOver.alpha=.8,a.SoundMixer.play("whistle",.5),this._endGamePlank.showWindow(this._currentScoreText.text)},c.prototype.whiteFlash=function(a){var b=this;void 0===a&&(a=!1),a?this.game.add.tween(this._whiteOver).to({alpha:1},100,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.addOnce(function(){b.restartGame(),b.game.add.tween(b._whiteOver).to({alpha:0},300,Phaser.Easing.Sinusoidal.InOut,!0)}):3==c.CURRENT_GAME_MOD?this._currentTime<=0?setTimeout(function(){b.endScreen()},1050):this.initScene():1==c.CURRENT_GAME_MOD?setTimeout(function(){b.game.add.tween(b._whiteOver).to({alpha:1},100,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.addOnce(function(){b.initScene(),b.resetPublicTween(),b.game.add.tween(b._whiteOver).to({alpha:0},300,Phaser.Easing.Sinusoidal.InOut,!0)})},1050):0==this._currentLivesCount?setTimeout(function(){b.endScreen()},1050):this.initScene()},c.prototype.initController=function(){this.enabledMouse(this.downCallback,this.upCallback,this.moveCallback,this)},c.prototype.enabledMouse=function(a,b,c,d){this._mouseFunction=[a,b,c],this._context=d,a&&this.game.input.onDown.add(this.downMouseCallback,d),b&&this.game.input.onUp.add(this.upMouseCallback,d),c&&this.game.input.addMoveCallback(this.moveMouseCallback,d)},c.prototype.disableMouse=function(){this._mouseFunction[0]&&this.game.input.onDown.add(this.downMouseCallback,this),this._mouseFunction[1]&&this.game.input.onUp.add(this.upMouseCallback,this),this._mouseFunction[2]&&this.game.input.addMoveCallback(this.moveMouseCallback,this),this._mouseFunction=null},c.prototype.downMouseCallback=function(a){this._mouseFunction[0].call(this._context,{x:a.position.x,y:a.position.y,default:a})},c.prototype.upMouseCallback=function(a){this._mouseFunction[1].call(this._context,{x:a.position.x,y:a.position.y,default:a})},c.prototype.moveMouseCallback=function(a){this._mouseFunction[2].call(this._context,{x:a.position.x,y:a.position.y,default:a})},c.prototype.collisionWall=function(a){for(var b=this._hitArea.length-1;b>=0;b--)if(this.game.physics.arcade.collide(a._ball,this._hitArea[b]))return{y:this._hitArea[b].y,g:2==b,b:this._hitArea[b]};return null},c.prototype.ccc=function(a){var b=""+a;return 1==b.length&&(b="0"+b),b},c.prototype.makeStarParticle=function(b,c){for(var d=this,e=this,f=0;f<3;f++)!function(f){var g=e.game.rnd.between(0,Phaser.Math.PI2),h=new Phaser.Point(Math.sin(g),Math.cos(g)),i=e.game.rnd.between(30,50);h.setMagnitude(i);var j=new Phaser.Point(b,c);h.x+=j.x,h.y+=j.y;var k=new a.StarParticle(e,h.x,h.y);e._gameUILayer.addChild(k);var l=e._currentScoreText.position,m=750+e.game.rnd.integerInRange(-100,200);e.game.add.tween(k.scale).to({x:3.5,y:3.5},m/2,Phaser.Easing.Sinusoidal.InOut,!0,0,0,!0),e.game.add.tween(k).to({x:[k.x,Math.max(k.x-l.x,l.x-k.x)/2+e.game.rnd.integerInRange(-400,800),l.x],y:[k.y,Math.max(k.y-l.y,l.y-k.y)/2+e.game.rnd.integerInRange(-400,400),l.y]},m,Phaser.Easing.Sinusoidal.Out,!0,100).interpolation(function(a,b){return Phaser.Math.bezierInterpolation(a,b)}).onComplete.addOnce(function(){0==f&&d.updateScore(),k.destroy(!0)},e)}(f)},c.prototype.update=function(){var b=this;if(3==c.CURRENT_GAME_MOD&&this._gameIsGoOne){var d=this.game.time.elapsedMS/1e3;d>.02&&(d=.02),this._currentTime-=d,this._currentTime<=0&&(this._currentTime=0,this._gameIsGoOne=!1,console.log("TimeIsOut!",this._punch),this._punch||(this._stopGame=!0,this._activeBall.killFree(),this.endScreen()));var e=Math.floor(this._currentTime),f=e%60,g=Math.floor(e/60);this._plankBalls.updateTimeText(+this.ccc(g)+":"+this.ccc(f))}this._zContainer.sort("depth",Phaser.Group.SORT_ASCENDING),1!=c.CURRENT_GAME_MOD&&this._bearSideStep.update();for(var h=0;h<this._ballArray.length;h++)this._ballArray[h].update();if(this._successGoal){switch(this._successGoal=!1,this._scoreCounter++,this._ingameScoreText.text="+ 1",this._currentBonusType){case"timer":break;case"bonus":this._scoreCounter+=2,this._ingameScoreText.text="+ 3",this.makeStarParticle(this._bonusPosition.x,this._bonusPosition.y),this._currentLivesCount<3&&(this._currentLivesCount++,this._plankBalls.addLiveBall()),this.playGoalReaction();break;default:this._targetCounter++,this.updateScore(),2==c.CURRENT_GAME_MOD&&this._targetCounter%5==0&&setTimeout(function(){var c=b._bonuses[0].x>=960?730:1190,d=b.game.rnd.integerInRange(b._vorota.y-70,b._vorota.y-200),e=new a.Bonus(b,c,d,"bonus");e.depth=b._vorota.y+1,b._bonuses.push(e),b._zContainer.add(e),e.resetBonus(c,d,1.3,null)},800),this.playGoalReaction(),this._bearStrayingNumberMax=this.game.rnd.integerInRange(3,6),this._bearStrayingCurrent=0,this._bearPrevTargetOffcet=0}this._ingameScoreText.position.set(this._activeBall._ball.x,this._activeBall._ball.y),this.game.add.tween(this._ingameScoreText).to({alpha:1},200,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.addOnce(function(){b.game.add.tween(b._ingameScoreText).to({alpha:0},200,Phaser.Easing.Sinusoidal.InOut,!0,600)}),this.game.add.tween(this._ingameScoreText).to({y:this._ingameScoreText.y-30},700,Phaser.Easing.Back.InOut,!0),1==c.CURRENT_GAME_MOD&&this._scoreCounter>=3&&this._shareIngameBtn&&(this._shareIngameBtn.show(this._scoreCounter),this._shareIngameBtn.enabled=!0)}if(2==c.CURRENT_GAME_MOD){if(1==c.GOALKEEPER_CURRENT_MODE)if(this._goalkeeperStopTime<=-1&&this._bearSideStep.canMove()){this._goalkeeper.x+=c.GOALKEEPER_SPEED*this._dir;var i=1==this._dir?this._goalkeeper.x>this._currentBearStartPos:this._goalkeeper.x<=this._currentBearStartPos;i&&this._bearSideStep.canFlip()&&(this._bearSideStep.step(),this.bearTargetSet())}else this._goalkeeperStopTime--}else if(3==c.CURRENT_GAME_MOD&&1==c.GOALKEEPER_CURRENT_MODE)if(this._goalkeeperStopTime<=-1&&this._bearSideStep.canMove()){var i=1==this._dir?this._goalkeeper.x>=this._currentBearStartPos:this._goalkeeper.x<=this._currentBearStartPos;c.GOALKEEPER_SPEED_MODE=i?.5:1,this._bearCanMoveNow3MOD&&(this._goalkeeper.x+=c.GOALKEEPER_SPEED*c.GOALKEEPER_SPEED_MODE*this._dir),i&&this._bearSideStep.canFlip()&&(console.log("STAY!"),this._bearCanMoveNow3MOD=!1,this._bearSideStep.goal())}else this._goalkeeperStopTime--},c.prototype.getBearRandomPos=function(){var a=0;return a=Math.random()>.7?this._bonuses[0].x+(this.game.rnd.integerInRange(50,150)+40*this._bearStrayingCurrent)*(Math.random()>.5?1:-1):this._bonuses[0].x+(this.game.rnd.integerInRange(0,70)+40*this._bearStrayingCurrent)*(Math.random()>.5?1:-1),a>960&&a>1190?a=1190-(a-1190):a<=960&&a<720&&(a=720-a+720),this._bearPrevTargetOffcet=Math.abs(this._bonuses[0].x-a),a},c.prototype.bearGetHit=function(){return 3!=c.CURRENT_GAME_MOD||(this._bearCanMoveNow3MOD=!0,this._currentBearStartPos=960,this._bearSideStep.step(),this._dir=this._currentBearStartPos-this._goalkeeper.x>=0?1:-1,this._bearSideStep.scale.x=this._dir,this._bearSideStep.rotateBear(),this._bearSideStep.step(),!1)},c.prototype.bearTargetSet=function(){var a=this;if(this._bearSideStep.canMove())if(2==c.CURRENT_GAME_MOD){if(0==this._targetCounter)this._goalkeeperDist=this._currentBearStartPos;else if(1==this._targetCounter)this._currentBearStartPos=960;else if(this._targetCounter>1){if(this._currentBearStartPos=this.getBearRandomPos(),this._oldPose==this._currentBearStartPos)return void this.bearTargetSet();this._oldPose=this._currentBearStartPos,this._bearStrayingCurrent++,this._bearStrayingCurrent>this._bearStrayingNumberMax&&(this._bearStrayingCurrent=0)}if(this._currentBearStartPos==this._goalkeeper.x)return void this._bearSideStep.goal();this._bearSideStep.step(),this._dir=this._currentBearStartPos-this._goalkeeper.x>=0?1:-1,this._bearSideStep.scale.x=this._dir,this._bearSideStep.rotateBear(),this._goalkeeperStopTime=c.GOALKEEPER_STOP_TIME,this._bearSideStep.step()}else 3==c.CURRENT_GAME_MOD&&(null==this._downX?(this._currentBearStartPos=960,this._bearSideStep.step(),this._dir=this._currentBearStartPos-this._goalkeeper.x>=0?1:-1,this._bearSideStep.scale.x=this._dir,this._bearSideStep.rotateBear(),this._bearSideStep.step(),this._bearCanMoveNow3MOD=!0):this.setBerarPositionFromMove());else setTimeout(function(){a.bearTargetSet()},100)},c.prototype.setBerarPositionFromMove=function(){var a=this._activeBall.getEndXTraectoryPos();a=a<960?Math.max(790,a):Math.min(1119,a),isNaN(a)&&(a=960);var b=a-this._goalkeeper.x>=0?1:-1;this._dir!=b?this.testPlayerStep(a,b):(this._currentBearStartPos=a,this._bearCanMoveNow3MOD=!0,this._bearSideStep.step(),this._bearSideStep.rotateBear(),this._bearSideStep.step())},c.prototype.testPlayerStep=function(a,b){console.log("TRUE FLIP"),this._bearCanMoveNow3MOD=!0,this._bearSideStep.step(),this._currentBearStartPos=a,this._dir=b,this._bearSideStep.scale.x=this._dir,this._bearSideStep.rotateBear(),this._goalkeeperStopTime=c.GOALKEEPER_STOP_TIME-10,this._bearSideStep.step()},c.prototype.getPlayerFingerTarget=function(){var a=this._mouseX-this._downX,b=this._mouseY-this._downY,d=Math.sqrt(a*a+b*b);this._punchDir=Math.atan2(b,a);var e=Math.min(d,c.SWAP_DIST)/c.SWAP_DIST;this._activeBall._dy=-c.BALL_SPEED*e,this._activeBall._ballY=c.BALL_Y_MAX,this._activeBall.createBallWay();var f=this._activeBall.getBallWay(1);return new Phaser.Point(f[0],f[1])},c.prototype.updateScore=function(){var a=this;this.game.add.tween(this._currentScoreText.scale).to({x:1.4,y:1.4},150,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.add(function(){a._currentScoreText.text=a._scoreCounter<10?"0"+a._scoreCounter:a._scoreCounter+"",a.game.add.tween(a._currentScoreText.scale).to({x:1,y:1},300,Phaser.Easing.Sinusoidal.InOut,!0,100)})},c.prototype.downCallback=function(a){1!=this._stopGame&&(a.y<250||0!=this._text.exists&&(1==c.CURRENT_GAME_MOD&&this._scoreCounter>=3&&this._shareIngameBtn&&this._shareIngameBtn.dropBtns(),this._downX=a.x,this._downY=a.y,this._mouseX=a.x,this._mouseY=a.y,this._minMX=Number.MAX_VALUE,this._maxMX=Number.MIN_VALUE))},c.prototype.initScene=function(b){if(void 0===b&&(b=!1),this._punch=!0,this._stopGame=!1,this._ballArray.push(new a.Ball(this,0,0)),this._ballShadowsPull.addChild(this._ballArray[this._ballArray.length-1]._ballShadow),this._zContainer.add(this._ballArray[this._ballArray.length-1]._ball),this._ballArray[this._ballArray.length-1]._ball.depth=this._ballArray[this._ballArray.length-1]._ball.y,this._activeBall=this._ballArray[this._ballArray.length-1],this._activeBall._ballBody.rotation=0,this._successGoal=!1,this._currentBonusType="empty",1==c.CURRENT_GAME_MOD){if(0==this._targetCounter)this._currentBarierArray[0].resetBarier(!1,956,658),this._currentBarierArray[1].resetBarier(!0,952,522),this._ballStartPos=960;else if(1==this._targetCounter)this._currentBarierArray[0].resetBarier(!1,550,836),this._currentBarierArray[1].resetBarier(!1,980,488),this._ballStartPos=510;else if(2==this._targetCounter)this._currentBarierArray[0].resetBarier(!1,1160,666),this._currentBarierArray[1].resetBarier(!1,1314,458),this._ballStartPos=1620;else if(3==this._targetCounter)this._currentBarierArray[0].resetBarier(!1,560,688),this._currentBarierArray[1].resetBarier(!1,700,728),this._ballStartPos=420;else if(this._currentNumberTarget!=this._targetCounter){this._currentNumberTarget=this._targetCounter;var d=this.game.rnd.integerInRange(414,846),e=void 0;e=d>=630?this.game.rnd.integerInRange(432,1660):this.game.rnd.integerInRange(650,1310),this._currentBarierArray[0].resetBarier(!1,e,d),Math.random()>.25?(e=e>=960?e-this.game.rnd.integerInRange(50,400):e+this.game.rnd.integerInRange(50,400),d=d>=630?d-this.game.rnd.integerInRange(20,150):d+this.game.rnd.integerInRange(20,150),this._currentBarierArray[1].resetBarier(!1,e,d)):this._currentBarierArray[1].resetBarier(!0,e,d),this._currentBarierArray[0].x>960?this._ballStartPos=40+this._currentBarierArray[0].x:this._currentBarierArray[0].x<960?this._ballStartPos=this._currentBarierArray[0].x-40:this._ballStartPos=this._currentBarierArray[0].x}}else this._ballStartPos=c.POSITIONS[b?1:this.game.rnd.integerInRange(0,2)];this._activeBall._ball.x=this._ballStartPos,this._activeBall._ball.y=c.BALL_Y_MAX,this._activeBall._ballY=c.BALL_Y_MAX,this._downX=null,this._downY=null,this._text.exists=!0,this._text.visible=!1,this._punch=!1,c.GOALKEEPER_SPEED=3,2==c.CURRENT_GAME_MOD?(this._targetCounter>7?c.GOALKEEPER_SPEED=4.5:this._targetCounter>=15&&this._targetCounter<30?c.GOALKEEPER_SPEED=6:this._targetCounter,20==this._targetCounter?c.TARGET_SPEED=.9:27==this._targetCounter&&(c.TARGET_SPEED=.8)):3==c.CURRENT_GAME_MOD&&(c.GOALKEEPER_SPEED=6,a.Bear.LOOP_SPEED=60,this._gameDifCoef=.75,this._targetCounter>=4&&this._targetCounter<8?this._gameDifCoef=.5:this._targetCounter>=8&&this._targetCounter<12?(c.GOALKEEPER_SPEED=9,a.Bear.LOOP_SPEED=90,this._gameDifCoef=.25):this._targetCounter>=12&&(c.GOALKEEPER_SPEED=12,a.Bear.LOOP_SPEED=120,this._gameDifCoef=0),3!=c.CURRENT_GAME_MOD&&2!=c.CURRENT_GAME_MOD||(this._goalkeeper.x>=1060||this._goalkeeper.x<=860)&&(this._currentBearStartPos=960,this._bearSideStep.canMove()&&(this._bearCanMoveNow3MOD=!0,this._bearSideStep.step(),this._dir=this._currentBearStartPos-this._goalkeeper.x>=0?1:-1,this._bearSideStep.scale.x=this._dir,this._bearSideStep.rotateBear(),this._goalkeeperStopTime=c.GOALKEEPER_STOP_TIME,this._bearSideStep.step())))},c.prototype.removeMe=function(a){for(var b=0;b<this._ballArray.length;b++)if(a==this._ballArray[b])return void this._ballArray.splice(b,1)},c.prototype.removeBonus=function(a){for(var b=0;b<this._bonuses.length;b++)if(a==this._bonuses[b])return void this._bonuses.splice(b,1)},c.prototype.textShow=function(){this._text.alpha=0,this._text.scale.set(.2,.2),this._text.position.set(960,980),this.game.add.tween(this._text).to({alpha:1},200,Phaser.Easing.Sinusoidal.InOut,!0),this.game.add.tween(this._text.scale).to({x:1,y:1},200,Phaser.Easing.Back.Out,!0)},c.prototype.upCallback=function(){if(null!=this._downX&&1!=this._stopGame){a.SoundMixer.play("kick",.7),this._punch=!0,this._stopGame=!1,this._activeBall._punchCurrentBall=!0,this._activeBall._ballBody.rotation=0,this._text.exists=!1;var b=this._mouseX-this._downX,d=this._mouseY-this._downY,e=Math.sqrt(b*b+d*d);this._punchDir=Math.atan2(d,b);var f=Math.min(e,c.SWAP_DIST)/c.SWAP_DIST;this._activeBall._dy=-c.BALL_SPEED*f,this._activeBall._ballY=c.BALL_Y_MAX,this._activeBall._ball.x=this._ballStartPos,this._activeBall._ballZ=0;var g=1+this._activeBall._dy/c.BALL_SPEED;this._activeBall._dz=-15-15*g,0==g&&(this._activeBall._dz=-22),this._activeBall._timeInk=f/20,this._activeBall._timeInkMax=e/c.SWAP_DIST/20,this._activeBall._lastDT=.3*this._activeBall._timeInk;var h=this._activeBall._timeInkMax-this._activeBall._timeInk;this._activeBall._dz+=-90*h,this._activeBall._time=0,this._activeBall.createBallWay(),this._activeBall._lastDY=.3*this._activeBall._dy,this._activeBall._lastDZ=.5*this._activeBall._dz,this._downX=null,this._downY=null;var i=this._activeBall.getBallWay(1),j=new Phaser.Point(i[0],i[1]);1!=c.CURRENT_GAME_MOD&&(b=j.x-this._goalkeeper.x,d=j.y-this._goalkeeper.y,this._targetCounter>0&&Math.abs(b)>250&&Math.abs(d)<200&&j.x<1300&&j.x>548&&(this._bearSideStep.scale.x=b<0?-1:1,this._bearSideStep.rotateBear(),this._bearSideStep.jump(),3!=c.CURRENT_GAME_MOD&&(this._goalkeeper.body.enable=!1)))}},c.prototype.endBearJump=function(){this._goalkeeper.body.enable=!0},c.prototype.moveCallback=function(a){if(null!=this._downX&&(this._mouseX=a.x,this._mouseY=a.y,a.x<this._minMX&&(this._minMX=a.x),a.x>this._maxMX&&(this._maxMX=a.x),3==c.CURRENT_GAME_MOD)){if(1==this._stopGame)return;Math.random()>this._gameDifCoef&&this.setBerarPositionFromMove()}},c.prototype.render=function(){},c.prototype.getBonusPattern=function(){var a={};return 0==this._targetCounter?(a.x=this._currentBearStartPos>960?730:1170,a.y=this._vorota.y-130,a.scale=1.4,a.pattern=null,a):1==this._targetCounter?(0==c.GOALKEEPER_CURRENT_MODE&&(c.GOALKEEPER_CURRENT_MODE=1),a.x=this._bonuses[0].x>960?730:1170,a.y=this._vorota.y-130,a.scale=1.4,a.pattern=null,a):2==this._targetCounter?(a.x=960,a.y=this._vorota.y-130,a.scale=1.4,a.pattern=null,a):this._targetCounter>=3&&this._targetCounter<=5?(a.x=this.game.rnd.integerInRange(730,1170),a.y=this.game.rnd.integerInRange(this._vorota.y-70,this._vorota.y-200),a.scale=1.4,a.pattern=null,a):this._targetCounter>5&&this._targetCounter<=8?(a.x=this.game.rnd.integerInRange(730,1170),a.y=this.game.rnd.integerInRange(this._vorota.y-70,this._vorota.y-200),a.scale=1.4,a.pattern="hirisontal",a):this._targetCounter>8&&this._targetCounter<=11?(a.x=this.game.rnd.integerInRange(730,1170),a.y=this.game.rnd.integerInRange(this._vorota.y-70,this._vorota.y-200),a.scale=1.2,a.pattern="hirisontal_diag",a):this._targetCounter>11&&this._targetCounter<=14?(a.x=this.game.rnd.integerInRange(730,1170),a.y=this._vorota.y,a.scale=1.2,a.pattern="infinity",a):this._targetCounter>14&&this._targetCounter<=17?(a.x=this.game.rnd.integerInRange(730,1170),a.y=this._vorota.y,a.scale=1.2,a.pattern="batterfly",a):this._targetCounter>17&&this._targetCounter<=20?(a.x=this.game.rnd.integerInRange(730,1170),a.y=this._vorota.y,a.scale=1,a.pattern="triangle",a):this._targetCounter>20&&this._targetCounter<=23?(a.x=this.game.rnd.integerInRange(730,1170),a.y=this._vorota.y,a.scale=1,a.pattern="zigzag",a):this._targetCounter>23?(a.x=this.game.rnd.integerInRange(730,1170),a.y=this.game.rnd.integerInRange(this._vorota.y-70,this._vorota.y-200),a.scale=1,a.pattern=Phaser.ArrayUtils.getRandomItem(["hirisontal","hirisontal_diag","infinity","batterfly","triangle","zigzag"]),a):void 0},c.prototype.addBonuses=function(b){void 0===b&&(b=null);var c,d,e;if(null==b)d=1170;else{var f=[];if(b-110>650&&f.push([650,b-110]),b+110<1210&&f.push([b+110,1210]),f.length>1){var g=Math.random()<.5?0:1;d=this.game.rnd.integerInRange(f[g][0],f[g][1])}else d=this.game.rnd.integerInRange(f[0][0],f[0][1])}e=this._vorota.y-130;var h=this.getBonusPattern();null!=this._bonuses[0]?(c=this._bonuses[0],c.resetBonus(h.x,h.y,h.scale,h.pattern)):(c=new a.Bonus(this,d,e,"target"),c.depth=this._vorota.y+1,this._bonuses.push(c),this._zContainer.add(c),c.resetBonus(h.x,h.y,h.scale,h.pattern)),this.bearTargetSet()},c.prototype.gotoMenu=function(){for(var b=this,c=window.setTimeout(function(){},0);c--;)window.clearTimeout(c);this.game.tweens.removeAll(),this._whiteOver.alpha=0,this._whiteOver.tint=0,this.game.add.tween(this._whiteOver).to({alpha:1},200,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.addOnce(function(){a.SoundMixer.bgStop(),b.game.state.start("MainMenu",!0)})},c.BALL_Y_OFFSET=25,c.GOALKEEPER_POSITIONS=[1180,760],c.BALL_Y_MIN=300+c.BALL_Y_OFFSET,c.BALL_Y_MAX=1e3,c.BALL_DIST=c.BALL_Y_MAX-c.BALL_Y_MIN,c.SWAP_DIST=500,c.BALL_SPEED=140,c.GRAVITY=2,c.POSITIONS=[960,510,1410],c.TARGET_SPEED=1,c.GOALKEEPER_SPEED=3,c.GOALKEEPER_STOP_TIME=15,c.GOALKEEPER_CURRENT_MODE=1,c.GOALKEEPER_SPEED_MODE=1,c}(Phaser.State);a.BaseGame=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.init=function(){var b=this.getUrlParam();if(1==window["mobile-redirect"]&&0==this.game.device.desktop&&window.top.location.pathname.split("game.html").length<2){var d=window.top.location.protocol+"//"+window.top.location.host+window.top.location.pathname.split("index.html")[0]+"game.html"+window.top.location.search;return void(window.top.location.href=d)}c.SCROLL_OVERLAY=new a.ScrollOverlay(this.game),0!=window["use-lock-screen"]&&0==this.game.device.desktop&&this.initLockScreen(!0,!0);var e=null;b.lng?e=b.lng:window.language&&(e=window.language),c.CURRENT_LANGUAGE=new a.LngSelector(e)},c.prototype.getUrlParam=function(){var b;return b=a.Main.MY_DOMAIN?window.top:window,b=b.location.search.replace("?","").split("&").reduce(function(a,b){var c=b.split("=");return a[decodeURIComponent(c[0])]=decodeURIComponent(c[1]),a},{})},c.prototype.preload=function(){this.game.load.onFileComplete.add(this.loadingUpdate,this),this.game.load.atlas("preloader","./assets/preloader/preloader.png","./assets/preloader/preloader.json"),this.game.load.image("bg_menu","./assets/preloader/bg_menu.png"),this.game.load.image("mmlogo_ru","./assets/preloader/mmlogo_ru.png"),this.game.load.image("mmlogo_en","./assets/preloader/mmlogo_en.png"),this.game.load.image("mmlogo_de","./assets/preloader/mmlogo_de.png"),this.game.load.image("mmlogo_fr","./assets/preloader/mmlogo_fr.png"),this.game.load.image("mmlogo_it","./assets/preloader/mmlogo_it.png"),this.game.load.image("mmlogo_pt","./assets/preloader/mmlogo_pt.png"),this.game.load.image("mmlogo_es","./assets/preloader/mmlogo_es.png"),this.game.load.image("mmlogo_pl","./assets/preloader/mmlogo_pl.png"),this.game.load.image("copyright_ru","./assets/preloader/copyright0001.png"),this.game.load.image("copyright_en","./assets/preloader/copyright0002.png")},c.prototype.create=function(){this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!0,this.enabledMultitouch(!0),this.game.stage.backgroundColor=10066329},c.prototype.loadingUpdate=function(a,b,c,d,e){a>=100&&(this.game.load.onFileComplete.removeAll(),this.game.state.start("Preloader",!0))},c.prototype.enabledMultitouch=function(a){a?(this.game.input.maxPointers=2,this.game.input.addPointer(),this.game.input.addPointer()):this.game.input.maxPointers=1},c.prototype.initLockScreen=function(a,b){void 0===b&&(b=!1),window.addEventListener("resize",this.checkScreenStatus.bind(this),!1),this.game.scale.onOrientationChange.add(this.checkScreenStatus,this);var c=document.createElement("div");c.className="lockscren",c.setAttribute("id","lockscren"),c.style.height="1000000px",c.style.display="none";var d=document.createElement("div");d.className=a?"lockIconContainer PORT_lock_uri":"lockIconContainer LAND_lock_uri",d.style.visibility="hidden",d.style.top=a?"30%":"15%",window["-lockscreen"]={portrait:a,lock:c,icon:d,paused:b},document.body.appendChild(c),document.body.appendChild(d),this.checkScreenStatus()},c.prototype.checkScreenStatus=function(){var a=this.game.scale.isPortrait;window["-lockscreen"]&&a==window["-lockscreen"].portrait?(window["-lockscreen"].lock.style.display="block",window["-lockscreen"].icon.style.visibility="visible"):(window["-lockscreen"].lock.style.display="none",window["-lockscreen"].icon.style.visibility="hidden")},c.PATH_IMAGES="./assets/images/",c.PATH_FONTS="./assets/fonts/",c.PATH_SOUNDS="./assets/sounds/",c.PATH_SETTINGS="./assets/settings/",c.GAME_DATA=new a.SaveData,c.CURRENT_GAME_MOD=1,c}(Phaser.State);a.Boot=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.create=function(){var b=this;a.SoundMixer.play("Robot_Theme",.4,!0,!0),this._bg=this.game.add.sprite(0,0,"bg_menu"),this._copyright=this.make.image(Math.round(this.world.centerX),Math.round(1050*a.Main.SCALE),"copyright_"+("ru"==a.Boot.CURRENT_LANGUAGE.curLng?"ru":"en")),this._copyright.x-=Math.round(.5*this._copyright.width),this._copyright.y-=Math.round(.5*this._copyright.height),this._logomm=this.game.add.image(this.world.centerX+0,61,"mmlogo_"+a.Boot.CURRENT_LANGUAGE.curLng),this._logomm.scale.set(.85,.85),this._logomm.anchor.set(.5),this._playContainer=this.game.make.sprite(this.world.centerX,568),this._playContainer.anchor.set(.5),this._playContainer.scale.set(0),this._play=new a.OButton(this.game,"atlas",["btnStart_10001","btnStart_10002","btnStart_10003"],function(){b._play.enabled=!1,b.showBtns()}),this._play.enabled=!1,this._playContainer.addChild(this._play),this._mishka=this.game.make.image(2344,660,"atlas_actors","BEAR_03"),this._mishka.anchor.set(.5),this._mashka=this.game.make.image(-410,622,"atlas_actors","MASHA_01"),this._mashka.scale.set(-1,1),this._mashka.anchor.set(.5),this._logo=this.game.make.sprite(978,1266,"gameLogo"+("ru"==a.Boot.CURRENT_LANGUAGE.curLng?"_rus":"_eng")),this._logo.anchor.set(.5),this._sound=new a.OButtonCheck(this.game,"UI_Sound_Atlas",["btnSound0000","btnSound0001","btnSound0002"],["btnSound0003","btnSound0004","btnSound0005"],function(){a.GameConfig.playMusic=!a.GameConfig.playMusic,a.GameConfig.playMusic?b.game.sound.volume=1:b.game.sound.volume=0}),this._sound.setCheck(a.GameConfig.playMusic),this._sound.x=1818,this._sound.y=115;this._testStartBTN=new a.OButton(this.game,"atlas",["buttonBack","buttonBack","buttonBack"],function(){a.Boot.CURRENT_GAME_MOD=1,b.startGame()}),this._testStartBTN.position.set(960,518),this._testBtnText=this.game.make.text(0,0,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["game-training"],{font:"GinzaNarrow-Light",fontSize:"80px",fill:"#FFFFFF",align:"center"}),this._testBtnText.anchor.setTo(.5),this._testStartBTN.addChild(this._testBtnText),this._trainingStartBTN=new a.OButton(this.game,"atlas",["buttonBack","buttonBack","buttonBack"],function(){a.Boot.CURRENT_GAME_MOD=2,b.startGame()}),this._trainingStartBTN.position.set(960,663),this._trainingBtnText=this.game.make.text(0,0,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["game-championship"],{font:"GinzaNarrow-Light",fontSize:"80px",fill:"#FFFFFF",align:"center"}),this._trainingBtnText.anchor.setTo(.5),this._trainingStartBTN.addChild(this._trainingBtnText),this._competitionStartBTN=new a.OButton(this.game,"atlas",["buttonBack","buttonBack","buttonBack"],function(){a.Boot.CURRENT_GAME_MOD=3,b.startGame()}),this._competitionStartBTN.position.set(960,808),this._competitionBtnText=this.game.make.text(0,0,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["game-duel"],{font:"GinzaNarrow-Light",fontSize:"80px",fill:"#FFFFFF",align:"center"}),this._competitionBtnText.anchor.setTo(.5),this._competitionStartBTN.addChild(this._competitionBtnText),
this._testBtnText.text=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["game-training"],this._trainingBtnText.text=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["game-championship"],this._competitionBtnText.text=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["game-duel"],this._testStartBTN.enabled=!1,this._testStartBTN.alpha=0,this._trainingStartBTN.enabled=!1,this._trainingStartBTN.alpha=0,this._competitionStartBTN.enabled=!1,this._competitionStartBTN.alpha=0,this._predBGOver=this.game.make.graphics(0,0),this._predBGOver.beginFill(0,1),this._predBGOver.drawRect(0,0,this.game.width,this.game.height),this._predBGOver.alpha=0,this._overG=this.game.make.graphics(0,0),this._overG.beginFill(0,1),this._overG.drawRect(0,0,this.game.width,this.game.height),this._overG.alpha=1,this.game.world.addChild(this._logo),this.game.world.addChild(this._mishka),this.game.world.addChild(this._mashka),this.world.addChild(this._playContainer),this.world.addChild(this._sound),this.add.existing(this._copyright),this.game.add.tween(this._overG).to({alpha:0},200,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.add(function(){b.showStage()}),0!=window["fullscreen-btn"]&&a.Boot.SCROLL_OVERLAY.checkFullScreen&&(this._fullScreen=new a.OButton(this.game,"atlas",["fullscreen"],function(){a.Boot.SCROLL_OVERLAY.toggleFullScreen()}),this._fullScreen.x=this.game.width-1778*a.Main.SCALE,this._fullScreen.y=115*a.Main.SCALE,this.world.addChild(this._fullScreen),this._fullScreen.alpha=0,this.add.tween(this._fullScreen).to({alpha:1},200,Phaser.Easing.Quadratic.Out,!0,400)),this.initLngPanel(),this.updateLanguage(a.Boot.CURRENT_LANGUAGE.currentIndex,a.Boot.CURRENT_LANGUAGE.curLng),this.world.addChild(this._predBGOver),this.world.addChild(this._testStartBTN),this.world.addChild(this._trainingStartBTN),this.world.addChild(this._competitionStartBTN),this.world.addChild(this._overG)},c.prototype.showBtns=function(){var a=this;this.game.add.tween(this._play).to({alpha:0},100,Phaser.Easing.Sinusoidal.InOut,!0,0),this.game.add.tween(this._logo).to({alpha:0},200,Phaser.Easing.Sinusoidal.InOut,!0,0).onComplete.addOnce(function(){a._logo.visible=!1});var b=this._mishka.x;this.game.add.tween(this._mishka).to({x:b+200},100,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){a.game.add.tween(a._mishka).to({x:b},200,Phaser.Easing.Circular.Out,!0)});var c=this._mashka.x;this.game.add.tween(this._mashka).to({x:c-200},100,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){a.game.add.tween(a._mashka).to({x:c},200,Phaser.Easing.Circular.Out,!0)}),this._predBGOver.inputEnabled=!0,this.game.add.tween(this._predBGOver).to({alpha:.5},300,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.add(function(){a.showStage()}),this.game.add.tween(this._testStartBTN).to({alpha:1},300,Phaser.Easing.Sinusoidal.InOut,!0,0).onComplete.add(function(){a._testStartBTN.enabled=!0}),this.game.add.tween(this._trainingStartBTN).to({alpha:1},300,Phaser.Easing.Sinusoidal.InOut,!0,50).onComplete.add(function(){a._trainingStartBTN.enabled=!0}),this.game.add.tween(this._competitionStartBTN).to({alpha:1},300,Phaser.Easing.Sinusoidal.InOut,!0,100).onComplete.add(function(){a._competitionStartBTN.enabled=!0})},c.prototype.startGame=function(){var a=this;this._testStartBTN.enabled=!1,this._trainingStartBTN.enabled=!1,this._competitionStartBTN.enabled=!1,this.game.add.tween(this._overG).to({alpha:1},200,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.add(function(){a.game.state.start("BaseGame",!0)})},c.prototype.showStage=function(){var a=this;this.game.add.tween(this._mishka).to({x:1644},300,Phaser.Easing.Back.Out,!0,250),this.game.add.tween(this._mashka).to({x:290},300,Phaser.Easing.Back.Out,!0,150),this._logo.scale.set(1.3,1.3),this._logo.alpha=0,this.game.add.tween(this._logo).to({alpha:1},320,Phaser.Easing.Sinusoidal.Out,!0),this.game.add.tween(this._logo).to({y:866},300,Phaser.Easing.Back.Out,!0),this.game.add.tween(this._logo.scale).to({x:1,y:1},320,Phaser.Easing.Back.Out,!0),this.game.add.tween(this._playContainer.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0,500).onComplete.addOnce(function(){a._play.enabled=!0})},c.prototype.initLngPanel=function(){var b=this;1==window["language-menu"]&&(this._lang=new a.OButton(this.game,"lng",["btnLng","btnLng2"],function(){b.showLngPanel()}),this._lang.x=1818*a.Main.SCALE-150*a.Main.SCALE,this._lang.y=115*a.Main.SCALE,this.world.addChild(this._lang),this._langIcon=this.make.image(0,-0*a.Main.SCALE,"lng","miniBtnLng0001"),this._langIcon.anchor.set(.5),this._lang.addChild(this._langIcon),this._lang.alpha=0,this.add.tween(this._lang).to({alpha:1},200,Phaser.Easing.Quadratic.Out,!0,400),this.createLngPanel())},c.prototype.updateLanguage=function(b,c){this._langIcon&&(this._langIcon.frameName="miniBtnLng000"+(b+1));var d="ru"==a.Boot.CURRENT_LANGUAGE.curLng?"_rus":"_eng";this._logo.loadTexture("gameLogo"+d),this._logomm.loadTexture("mmlogo_"+a.Boot.CURRENT_LANGUAGE.curLng),this._copyright.loadTexture("copyright_"+("ru"==a.Boot.CURRENT_LANGUAGE.curLng?"ru":"en")),this._copyright.x=this.world.centerX,this._copyright.y=Math.round(1050*a.Main.SCALE),this._copyright.x-=Math.round(.5*this._copyright.width),this._copyright.y-=Math.round(.5*this._copyright.height),this._testBtnText&&(this._testBtnText.text=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["game-training"],this._trainingBtnText.text=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["game-championship"],this._competitionBtnText.text=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["game-duel"])},c.prototype.showLngPanel=function(){this._exitBtn.enabled=!0,this._bglp.exists=!0,this.add.tween(this._bglp).to({alpha:1},300,Phaser.Easing.Circular.Out,!0),this.add.tween(this._panel).to({y:this.world.centerY},300,Phaser.Easing.Circular.Out,!0);var b=a.Boot.CURRENT_LANGUAGE.currentIndex;this._selector.x=this._lngBtns[b].x,this._selector.y=this._lngBtns[b].y},c.prototype.hideLngPanel=function(){var b=this;this.add.tween(this._bglp).to({alpha:0},300,Phaser.Easing.Circular.Out,!0),this.add.tween(this._panel).to({y:this.world.centerY-500*a.Main.SCALE},300,Phaser.Easing.Circular.Out,!0).onComplete.addOnce(function(){b._bglp.exists=!1})},c.prototype.createLngPanel=function(){var b=this;this._bglp=this.add.graphics(0,0),this._bglp.beginFill(0,.4),this._bglp.drawRect(0,0,this.game.width,this.game.height),this._bglp.endFill(),this._bglp.alpha=0,this._bglp.exists=!1,this._bglp.inputEnabled=!0,this._panel=this.make.sprite(this.world.centerX,this.world.centerY-500*a.Main.SCALE,"lng","lngPanel"),this._panel.anchor.set(.5),this._bglp.addChild(this._panel),this._exitBtn=new a.OButton(this.game,"lng",["close","close2"],function(){b._exitBtn.enabled=!1,b.hideLngPanel()}),this._exitBtn.enabled=!1,this._exitBtn.position.set(0,350*a.Main.SCALE),this._panel.addChild(this._exitBtn),this._selector=this.make.image(0,0,"lng","lngSelected"),this._selector.anchor.set(.5),this._panel.addChild(this._selector),this._lngBtns=[];for(var c=0;c<4;c++){var d=new a.OButton(this.game,"lng",["LNG000"+(c+1)],function(c){a.Boot.CURRENT_LANGUAGE.setLng(c.lng),b.updateLanguage(c.lngind,c.lng),b._selector.x=c.x,b._selector.y=c.y});d.lngind=c,d.lng=a.Boot.CURRENT_LANGUAGE.getNameLanguage(c);var e=4+c>0?4:0;d.position.set(-214.7*a.Main.SCALE+210*a.Main.SCALE*c-(99+e)*a.Main.SCALE,-241.1*a.Main.SCALE+119*a.Main.SCALE),d.setAnimationScale(0),this._panel.addChild(d),this._lngBtns.push(d)}for(var c=0;c<4;c++){var d=new a.OButton(this.game,"lng",["LNG000"+(c+1+4)],function(c){a.Boot.CURRENT_LANGUAGE.setLng(c.lng),b.updateLanguage(c.lngind,c.lng),b._selector.x=c.x,b._selector.y=c.y});d.lngind=c+4,d.lng=a.Boot.CURRENT_LANGUAGE.getNameLanguage(c+4);var e=4+c>0?4:0;d.position.set(-214.7*a.Main.SCALE+210*a.Main.SCALE*c-(99+e)*a.Main.SCALE,107.9*a.Main.SCALE),d.setAnimationScale(0),this._panel.addChild(d),this._lngBtns.push(d)}},c.prototype.setEnbldLngBtns=function(a){for(var b=0;b<this._lngBtns.length;b++)this._lngBtns[b].enabled=a},c}(Phaser.State);a.MainMenu=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;return a._loadedAssets=!1,a._loadedFont=!1,a}return __extends(c,b),c.prototype.preload=function(){this.game.load.onFileComplete.add(this.loadingUpdate,this),this._beginTime=performance.now(),this._bg=this.game.add.image(0,0,"bg_menu");var b=this.add.image(Math.round(this.world.centerX),Math.round(1050*a.Main.SCALE),"copyright_"+("ru"==a.Boot.CURRENT_LANGUAGE.curLng?"ru":"en"));b.x-=Math.round(.5*b.width),b.y-=Math.round(.5*b.height);var c=this.game.add.graphics(960,694);c.beginFill(2504023),c.arc(0,0,320,a.GameConfig.degreesToRad(0),a.GameConfig.degreesToRad(180),!0),c.endFill();var d=this.game.add.image(this.world.centerX,60,"mmlogo_"+a.Boot.CURRENT_LANGUAGE.curLng);d.scale.set(.85,.85),d.anchor.set(.5),this._masha=this.game.add.image(960,555,"preloader","masha"),this._masha.anchor.set(.5),this._footer=this.add.image(this.world.centerX,960,"preloader","bg_preloader"),this._footer.anchor.set(.5),this._loading=this.add.image(this.world.centerX,960,"preloader","bgProresss"),this._loading.anchor.set(.5),this._footer2=this.add.image(this.world.centerX,960,"preloader","preloader_border"),this._footer2.anchor.set(.5),this._loadingMask=this.make.graphics(-262.5,0),this._loadingMask.beginFill(16711680,.5),this._loadingMask.drawRect(0,-20,525,40),this._loadingMask.endFill(),this._loading.addChild(this._loadingMask),this._loading.mask=this._loadingMask,this._loadingMask.scale.x=0,gameanalytics.GameAnalytics.setEnabledInfoLog(!1),gameanalytics.GameAnalytics.setEnabledVerboseLog(!1),gameanalytics.GameAnalytics.configureBuild("masha football 1.0.0"),gameanalytics.GameAnalytics.initialize("5fb734b94a413538ac27678fbce2d125","8b92bc25a069523c10106196495c2012c6c05d35"),this.fontsLoading(),this.game.load.image("bg_game",a.Boot.PATH_IMAGES+"bg_game.png"),this.game.load.image("gameLogo_rus",a.Boot.PATH_IMAGES+"gameLogo_rus.png"),this.game.load.image("gameLogo_eng",a.Boot.PATH_IMAGES+"gameLogo_eng.png"),this.game.load.atlas("bear_sidestep",a.Boot.PATH_IMAGES+"bear_sidestep2.png",a.Boot.PATH_IMAGES+"bear_sidestep2.json"),this.game.load.atlas("bear_sidestep_scale",a.Boot.PATH_IMAGES+"bear_sidestep_scale.png",a.Boot.PATH_IMAGES+"bear_sidestep_scale.json"),this.game.load.atlas("bear_hit",a.Boot.PATH_IMAGES+"bear_hit.png",a.Boot.PATH_IMAGES+"bear_hit.json"),this.game.load.atlas("bear_jump",a.Boot.PATH_IMAGES+"bear_jump.png",a.Boot.PATH_IMAGES+"bear_jump.json"),this.game.load.atlas("bear_idle",a.Boot.PATH_IMAGES+"bear_idle.png",a.Boot.PATH_IMAGES+"bear_idle.json"),this.game.load.atlas("atlas",a.Boot.PATH_IMAGES+"atlas01.png",a.Boot.PATH_IMAGES+"atlas01.json"),this.game.load.atlas("atlas_planks",a.Boot.PATH_IMAGES+"atlas02.png",a.Boot.PATH_IMAGES+"atlas02.json"),this.game.load.atlas("atlas_actors",a.Boot.PATH_IMAGES+"atlas03.png",a.Boot.PATH_IMAGES+"atlas03.json"),this.game.load.json("msgs",a.Boot.PATH_SETTINGS+"msgs.json"),this.game.load.atlas("UI_Sound_Atlas",a.Boot.PATH_IMAGES+"UI_Sound_Atlas.png",a.Boot.PATH_IMAGES+"UI_Sound_Atlas.json"),this.game.load.atlas("lng",a.Boot.PATH_IMAGES+"ui/lng.png",a.Boot.PATH_IMAGES+"ui/lng.json"),this.game.load.audiosprite("sfx",[a.Boot.PATH_SOUNDS+"sfx.mp3",a.Boot.PATH_SOUNDS+"sfx.ogg"],a.Boot.PATH_SOUNDS+"sfx.json",!0)},c.prototype.shutdown=function(){this._loading.destroy(),this._loading=null,this._footer.destroy(),this._footer=null,this._footer2.destroy(),this._footer2=null,this._loadingMask.destroy(),this._loadingMask=null},c.prototype.loadingUpdate=function(b,c,d,e,f){if(this._loadingMask.scale.x=b/100,b>=100){this.game.load.onFileComplete.removeAll(),a.Main.DATA=this.game.cache.getJSON("msgs");var g=.001*(performance.now()-this._beginTime);g<=2?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 2 sec",1):g>2&&g<=5?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 5 sec",1):g>5&&g<=10?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 10 sec",1):g>10&&g<=15?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 15 sec",1):g>15&&g<=30?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 30 sec",1):g>30&&g<=60?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 1 min",1):g>60&&g<=120?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 2 min",1):g>120&&g<=180?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 3 min",1):g>180&&g<=300?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 5 min",1):gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:more 5 min",1),this._loadedAssets=!0,a.SoundMixer.init(this.game),a.SoundMixer.play("Robot_Theme",.4,!0,!0),clearInterval(this._intervalId)}},c.prototype.update=function(){var b=this;this._loadedAssets&&this._loadedFont&&(this._loadedAssets=!1,setTimeout(function(){b.game.state.start(a.LocalConfig.CURRENT_STATE,!0)},800))},c.prototype.fontsLoading=function(){var b=this;WebFont.load({custom:{families:["GinzaNarrow-Heavy","GinzaNarrow-Light"],urls:[a.Boot.PATH_FONTS+"styles.css"]},active:function(){window.setTimeout(function(){b._loadedFont=!0},100)}})},c}(Phaser.State);a.Preloader=b}(TProject||(TProject={}));