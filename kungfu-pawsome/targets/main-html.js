(function(){"use strict";var $hxClasses={},$estr=function(){return js.Boot.__string_rec(this,'');};function $extend(from,fields){function inherit(){};inherit.prototype=from;var proto=new inherit();for(var name in fields)proto[name]=fields[name];return proto;}
var EReg=function(r,opt){opt=opt.split("u").join("");this.r=new RegExp(r,opt);};$hxClasses["EReg"]=EReg;EReg.__name__=["EReg"];EReg.prototype={matchedPos:function(){if(this.r.m==null)throw "No string matched";return{pos:this.r.m.index,len:this.r.m[0].length};},matched:function(n){return this.r.m!=null&&n>=0&&n<this.r.m.length?this.r.m[n]:(function($this){var $r;throw "EReg::matched";return $r;}(this));},match:function(s){if(this.r.global)this.r.lastIndex=0;this.r.m=this.r.exec(s);this.r.s=s;return this.r.m!=null;},__class__:EReg}
var Hash=function(){this.h={};};$hxClasses["Hash"]=Hash;Hash.__name__=["Hash"];Hash.prototype={iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext();},next:function(){var i=this.it.next();return this.ref["$"+i];}};},keys:function(){var a=[];for(var key in this.h){if(this.h.hasOwnProperty(key))a.push(key.substr(1));}
return HxOverrides.iter(a);},remove:function(key){key="$"+key;if(!this.h.hasOwnProperty(key))return false;delete(this.h[key]);return true;},exists:function(key){return this.h.hasOwnProperty("$"+key);},get:function(key){return this.h["$"+key];},set:function(key,value){this.h["$"+key]=value;},__class__:Hash}
var HxOverrides=function(){}
$hxClasses["HxOverrides"]=HxOverrides;HxOverrides.__name__=["HxOverrides"];HxOverrides.dateStr=function(date){var m=date.getMonth()+1;var d=date.getDate();var h=date.getHours();var mi=date.getMinutes();var s=date.getSeconds();return date.getFullYear()+"-"+(m<10?"0"+m:""+m)+"-"+(d<10?"0"+d:""+d)+" "+(h<10?"0"+h:""+h)+":"+(mi<10?"0"+mi:""+mi)+":"+(s<10?"0"+s:""+s);}
HxOverrides.strDate=function(s){switch(s.length){case 8:var k=s.split(":");var d=new Date();d.setTime(0);d.setUTCHours(k[0]);d.setUTCMinutes(k[1]);d.setUTCSeconds(k[2]);return d;case 10:var k=s.split("-");return new Date(k[0],k[1]-1,k[2],0,0,0);case 19:var k=s.split(" ");var y=k[0].split("-");var t=k[1].split(":");return new Date(y[0],y[1]-1,y[2],t[0],t[1],t[2]);default:throw "Invalid date format : "+s;}}
HxOverrides.cca=function(s,index){var x=s.charCodeAt(index);if(x!=x)return undefined;return x;}
HxOverrides.substr=function(s,pos,len){if(pos!=null&&pos!=0&&len!=null&&len<0)return "";if(len==null)len=s.length;if(pos<0){pos=s.length+pos;if(pos<0)pos=0;}else if(len<0)len=s.length+len-pos;return s.substr(pos,len);}
HxOverrides.remove=function(a,obj){var i=0;var l=a.length;while(i<l){if(a[i]==obj){a.splice(i,1);return true;}
i++;}
return false;}
HxOverrides.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length;},next:function(){return this.arr[this.cur++];}};}
var IntHash=function(){this.h={};};$hxClasses["IntHash"]=IntHash;IntHash.__name__=["IntHash"];IntHash.prototype={keys:function(){var a=[];for(var key in this.h){if(this.h.hasOwnProperty(key))a.push(key|0);}
return HxOverrides.iter(a);},remove:function(key){if(!this.h.hasOwnProperty(key))return false;delete(this.h[key]);return true;},exists:function(key){return this.h.hasOwnProperty(key);},get:function(key){return this.h[key];},set:function(key,value){this.h[key]=value;},__class__:IntHash}
var Lambda=function(){}
$hxClasses["Lambda"]=Lambda;Lambda.__name__=["Lambda"];Lambda.array=function(it){var a=new Array();var $it0=$iterator(it)();while($it0.hasNext()){var i=$it0.next();a.push(i);}
return a;}
Lambda.has=function(it,elt,cmp){if(cmp==null){var $it0=$iterator(it)();while($it0.hasNext()){var x=$it0.next();if(x==elt)return true;}}else{var $it1=$iterator(it)();while($it1.hasNext()){var x=$it1.next();if(cmp(x,elt))return true;}}
return false;}
Lambda.count=function(it,pred){var n=0;if(pred==null){var $it0=$iterator(it)();while($it0.hasNext()){var _=$it0.next();n++;}}else{var $it1=$iterator(it)();while($it1.hasNext()){var x=$it1.next();if(pred(x))n++;}}
return n;}
var List=function(){this.length=0;};$hxClasses["List"]=List;List.__name__=["List"];List.prototype={iterator:function(){return{h:this.h,hasNext:function(){return this.h!=null;},next:function(){if(this.h==null)return null;var x=this.h[0];this.h=this.h[1];return x;}};},add:function(item){var x=[item];if(this.h==null)this.h=x;else this.q[1]=x;this.q=x;this.length++;},__class__:List}
var Reflect=function(){}
$hxClasses["Reflect"]=Reflect;Reflect.__name__=["Reflect"];Reflect.field=function(o,field){var v=null;try{v=o[field];}catch(e){}
return v;}
Reflect.setField=function(o,field,value){o[field]=value;}
Reflect.setProperty=function(o,field,value){var tmp;if(o.__properties__&&(tmp=o.__properties__["set_"+field]))o[tmp](value);else o[field]=value;}
Reflect.callMethod=function(o,func,args){return func.apply(o,args);}
Reflect.fields=function(o){var a=[];if(o!=null){var hasOwnProperty=Object.prototype.hasOwnProperty;for(var f in o){if(hasOwnProperty.call(o,f))a.push(f);}}
return a;}
Reflect.isFunction=function(f){return typeof(f)=="function"&&!(js.Boot.isClass(f)||js.Boot.isEnum(f));}
Reflect.compareMethods=function(f1,f2){if(f1==f2)return true;if(!Reflect.isFunction(f1)||!Reflect.isFunction(f2))return false;return f1.scope==f2.scope&&f1.method==f2.method&&f1.method!=null;}
var Std=function(){}
$hxClasses["Std"]=Std;Std.__name__=["Std"];Std["is"]=function(v,t){return js.Boot.__instanceof(v,t);}
Std.string=function(s){return js.Boot.__string_rec(s,"");}
Std["int"]=function(x){return x|0;}
Std.parseInt=function(x){var v=parseInt(x,10);if(v==0&&(HxOverrides.cca(x,1)==120||HxOverrides.cca(x,1)==88))v=parseInt(x);if(isNaN(v))return null;return v;}
Std.parseFloat=function(x){return parseFloat(x);}
var StringBuf=function(){this.b="";};$hxClasses["StringBuf"]=StringBuf;StringBuf.__name__=["StringBuf"];StringBuf.prototype={toString:function(){return this.b;},addSub:function(s,pos,len){this.b+=HxOverrides.substr(s,pos,len);},addChar:function(c){this.b+=String.fromCharCode(c);},add:function(x){this.b+=Std.string(x);},__class__:StringBuf}
var StringTools=function(){}
$hxClasses["StringTools"]=StringTools;StringTools.__name__=["StringTools"];StringTools.urlEncode=function(s){return encodeURIComponent(s);}
StringTools.urlDecode=function(s){return decodeURIComponent(s.split("+").join(" "));}
StringTools.startsWith=function(s,start){return s.length>=start.length&&HxOverrides.substr(s,0,start.length)==start;}
StringTools.isSpace=function(s,pos){var c=HxOverrides.cca(s,pos);return c>=9&&c<=13||c==32;}
StringTools.ltrim=function(s){var l=s.length;var r=0;while(r<l&&StringTools.isSpace(s,r))r++;if(r>0)return HxOverrides.substr(s,r,l-r);else return s;}
StringTools.rtrim=function(s){var l=s.length;var r=0;while(r<l&&StringTools.isSpace(s,l-r-1))r++;if(r>0)return HxOverrides.substr(s,0,l-r);else return s;}
StringTools.trim=function(s){return StringTools.ltrim(StringTools.rtrim(s));}
StringTools.replace=function(s,sub,by){return s.split(sub).join(by);}
StringTools.fastCodeAt=function(s,index){return s.charCodeAt(index);}
StringTools.isEOF=function(c){return c!=c;}
var ValueType=$hxClasses["ValueType"]={__ename__:["ValueType"],__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]}
ValueType.TNull=["TNull",0];ValueType.TNull.toString=$estr;ValueType.TNull.__enum__=ValueType;ValueType.TInt=["TInt",1];ValueType.TInt.toString=$estr;ValueType.TInt.__enum__=ValueType;ValueType.TFloat=["TFloat",2];ValueType.TFloat.toString=$estr;ValueType.TFloat.__enum__=ValueType;ValueType.TBool=["TBool",3];ValueType.TBool.toString=$estr;ValueType.TBool.__enum__=ValueType;ValueType.TObject=["TObject",4];ValueType.TObject.toString=$estr;ValueType.TObject.__enum__=ValueType;ValueType.TFunction=["TFunction",5];ValueType.TFunction.toString=$estr;ValueType.TFunction.__enum__=ValueType;ValueType.TClass=function(c){var $x=["TClass",6,c];$x.__enum__=ValueType;$x.toString=$estr;return $x;}
ValueType.TEnum=function(e){var $x=["TEnum",7,e];$x.__enum__=ValueType;$x.toString=$estr;return $x;}
ValueType.TUnknown=["TUnknown",8];ValueType.TUnknown.toString=$estr;ValueType.TUnknown.__enum__=ValueType;var Type=function(){}
$hxClasses["Type"]=Type;Type.__name__=["Type"];Type.getClassName=function(c){var a=c.__name__;return a.join(".");}
Type.getEnumName=function(e){var a=e.__ename__;return a.join(".");}
Type.resolveClass=function(name){var cl=$hxClasses[name];if(cl==null||!js.Boot.isClass(cl))return null;return cl;}
Type.resolveEnum=function(name){var e=$hxClasses[name];if(e==null||!js.Boot.isEnum(e))return null;return e;}
Type.createInstance=function(cl,args){switch(args.length){case 0:return new cl();case 1:return new cl(args[0]);case 2:return new cl(args[0],args[1]);case 3:return new cl(args[0],args[1],args[2]);case 4:return new cl(args[0],args[1],args[2],args[3]);case 5:return new cl(args[0],args[1],args[2],args[3],args[4]);case 6:return new cl(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new cl(args[0],args[1],args[2],args[3],args[4],args[5],args[6]);case 8:return new cl(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7]);default:throw "Too many arguments";}
return null;}
Type.createEmptyInstance=function(cl){function empty(){};empty.prototype=cl.prototype;return new empty();}
Type.createEnum=function(e,constr,params){var f=Reflect.field(e,constr);if(f==null)throw "No such constructor "+constr;if(Reflect.isFunction(f)){if(params==null)throw "Constructor "+constr+" need parameters";return Reflect.callMethod(e,f,params);}
if(params!=null&&params.length!=0)throw "Constructor "+constr+" does not need parameters";return f;}
Type.getEnumConstructs=function(e){var a=e.__constructs__;return a.slice();}
Type["typeof"]=function(v){switch(typeof(v)){case "boolean":return ValueType.TBool;case "string":return ValueType.TClass(String);case "number":if(Math.ceil(v)==v%2147483648.0)return ValueType.TInt;return ValueType.TFloat;case "object":if(v==null)return ValueType.TNull;var e=v.__enum__;if(e!=null)return ValueType.TEnum(e);var c=js.Boot.getClass(v);if(c!=null)return ValueType.TClass(c);return ValueType.TObject;case "function":if(js.Boot.isClass(v)||js.Boot.isEnum(v))return ValueType.TObject;return ValueType.TFunction;case "undefined":return ValueType.TNull;default:return ValueType.TUnknown;}}
var Xml=function(){};$hxClasses["Xml"]=Xml;Xml.__name__=["Xml"];Xml.parse=function(str){return haxe.xml.Parser.parse(str);}
Xml.createElement=function(name){var r=new Xml();r.nodeType=Xml.Element;r._children=new Array();r._attributes=new Hash();r.setNodeName(name);return r;}
Xml.createPCData=function(data){var r=new Xml();r.nodeType=Xml.PCData;r.setNodeValue(data);return r;}
Xml.createCData=function(data){var r=new Xml();r.nodeType=Xml.CData;r.setNodeValue(data);return r;}
Xml.createComment=function(data){var r=new Xml();r.nodeType=Xml.Comment;r.setNodeValue(data);return r;}
Xml.createDocType=function(data){var r=new Xml();r.nodeType=Xml.DocType;r.setNodeValue(data);return r;}
Xml.createProlog=function(data){var r=new Xml();r.nodeType=Xml.Prolog;r.setNodeValue(data);return r;}
Xml.createDocument=function(){var r=new Xml();r.nodeType=Xml.Document;r._children=new Array();return r;}
Xml.prototype={toString:function(){if(this.nodeType==Xml.PCData)return this._nodeValue;if(this.nodeType==Xml.CData)return "<![CDATA["+this._nodeValue+"]]>";if(this.nodeType==Xml.Comment)return "<!--"+this._nodeValue+"-->";if(this.nodeType==Xml.DocType)return "<!DOCTYPE "+this._nodeValue+">";if(this.nodeType==Xml.Prolog)return "<?"+this._nodeValue+"?>";var s=new StringBuf();if(this.nodeType==Xml.Element){s.add("<");s.add(this._nodeName);var $it0=this._attributes.keys();while($it0.hasNext()){var k=$it0.next();s.add(" ");s.add(k);s.add("=\"");s.add(this._attributes.get(k));s.add("\"");}
if(this._children.length==0){s.add("/>");return s.toString();}
s.add(">");}
var $it1=this.iterator();while($it1.hasNext()){var x=$it1.next();s.add(x.toString());}
if(this.nodeType==Xml.Element){s.add("</");s.add(this._nodeName);s.add(">");}
return s.toString();},addChild:function(x){if(this._children==null)throw "bad nodetype";if(x._parent!=null)HxOverrides.remove(x._parent._children,x);x._parent=this;this._children.push(x);},firstElement:function(){if(this._children==null)throw "bad nodetype";var cur=0;var l=this._children.length;while(cur<l){var n=this._children[cur];if(n.nodeType==Xml.Element)return n;cur++;}
return null;},elementsNamed:function(name){if(this._children==null)throw "bad nodetype";return{cur:0,x:this._children,hasNext:function(){var k=this.cur;var l=this.x.length;while(k<l){var n=this.x[k];if(n.nodeType==Xml.Element&&n._nodeName==name)break;k++;}
this.cur=k;return k<l;},next:function(){var k=this.cur;var l=this.x.length;while(k<l){var n=this.x[k];k++;if(n.nodeType==Xml.Element&&n._nodeName==name){this.cur=k;return n;}}
return null;}};},elements:function(){if(this._children==null)throw "bad nodetype";return{cur:0,x:this._children,hasNext:function(){var k=this.cur;var l=this.x.length;while(k<l){if(this.x[k].nodeType==Xml.Element)break;k+=1;}
this.cur=k;return k<l;},next:function(){var k=this.cur;var l=this.x.length;while(k<l){var n=this.x[k];k+=1;if(n.nodeType==Xml.Element){this.cur=k;return n;}}
return null;}};},iterator:function(){if(this._children==null)throw "bad nodetype";return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length;},next:function(){return this.x[this.cur++];}};},exists:function(att){if(this.nodeType!=Xml.Element)throw "bad nodeType";return this._attributes.exists(att);},set:function(att,value){if(this.nodeType!=Xml.Element)throw "bad nodeType";this._attributes.set(att,value);},get:function(att){if(this.nodeType!=Xml.Element)throw "bad nodeType";return this._attributes.get(att);},getParent:function(){return this._parent;},setNodeValue:function(v){if(this.nodeType==Xml.Element||this.nodeType==Xml.Document)throw "bad nodeType";return this._nodeValue=v;},getNodeValue:function(){if(this.nodeType==Xml.Element||this.nodeType==Xml.Document)throw "bad nodeType";return this._nodeValue;},setNodeName:function(n){if(this.nodeType!=Xml.Element)throw "bad nodeType";return this._nodeName=n;},getNodeName:function(){if(this.nodeType!=Xml.Element)throw "bad nodeType";return this._nodeName;},__class__:Xml,__properties__:{set_nodeName:"setNodeName",get_nodeName:"getNodeName",set_nodeValue:"setNodeValue",get_nodeValue:"getNodeValue"}}
var com={}
com.nick={}
com.nick.kung_fu_panda={}
com.nick.kung_fu_panda.boss_beat_down={}
com.nick.kung_fu_panda.boss_beat_down.DocumentApp=function(){}
$hxClasses["com.nick.kung_fu_panda.boss_beat_down.DocumentApp"]=com.nick.kung_fu_panda.boss_beat_down.DocumentApp;com.nick.kung_fu_panda.boss_beat_down.DocumentApp.__name__=["com","nick","kung_fu_panda","boss_beat_down","DocumentApp"];com.nick.kung_fu_panda.boss_beat_down.DocumentApp.main=function(){flambe.System.init();com.nick.kung_fu_panda.boss_beat_down.DocumentApp._fillEntity=new flambe.Entity();com.nick.kung_fu_panda.boss_beat_down.DocumentApp._fillSprite=new flambe.display.FillSprite(0,960,560);com.nick.kung_fu_panda.boss_beat_down.DocumentApp._fillEntity.add(com.nick.kung_fu_panda.boss_beat_down.DocumentApp._fillSprite);flambe.System.root.addChild(com.nick.kung_fu_panda.boss_beat_down.DocumentApp._fillEntity);if(com.workinman.utils.JSEmbedProxy.getIsCrossdomain())com.workinman.utils.WorkinCloud.instance.getAssets().setCrossdomainBaseUrl(com.nick.kung_fu_panda.boss_beat_down.DocumentApp.appendAssetsToUrl(com.workinman.utils.JSEmbedProxy.getBase()));else com.workinman.utils.WorkinCloud.instance.getAssets()._setBaseUrl(com.nick.kung_fu_panda.boss_beat_down.DocumentApp.trimUrl(com.workinman.utils.JSEmbedProxy.getBase()));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.workinman.data.ConstantsCloud.EVENT_FILES_LOADED,com.nick.kung_fu_panda.boss_beat_down.DocumentApp._onBootstrapLoad);com.workinman.utils.WorkinCloud.instance.getAssets().addPackDef("bootstrap");com.workinman.utils.WorkinCloud.instance.getAssets().loadPack("bootstrap");}
com.nick.kung_fu_panda.boss_beat_down.DocumentApp._onBootstrapLoad=function(pEvent){com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.workinman.data.ConstantsCloud.EVENT_FILES_LOADED,com.nick.kung_fu_panda.boss_beat_down.DocumentApp._onBootstrapLoad);com.nick.kung_fu_panda.boss_beat_down.DocumentApp._initServices();haxe.Timer.delay(com.nick.kung_fu_panda.boss_beat_down.DocumentApp._initMain,800);}
com.nick.kung_fu_panda.boss_beat_down.DocumentApp._initMain=function(){com.nick.kung_fu_panda.boss_beat_down.DocumentApp._main=new com.nick.kung_fu_panda.boss_beat_down.Main();}
com.nick.kung_fu_panda.boss_beat_down.DocumentApp._initServices=function(){var tFast=com.workinman.utils.WorkinCloud.instance.getAssets().getXML(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.CONFIG_XML_PATH);var $it0=tFast.node.resolve("services").nodes.resolve("service").iterator();while($it0.hasNext()){var serviceNode=$it0.next();switch(serviceNode.att.resolve("type").toString()){case "analytics":if(serviceNode.att.resolve("enabled").toString()=="true"){com.workinman.utils.WorkinCloud.instance.log("[DocumentApp](_initServices) initAnalytics");com.workinman.services.ServiceAnalytics.init(serviceNode.att.resolve("id").toString());}
break;case "canadaTracking":if(serviceNode.att.resolve("enabled").toString()=="true"){com.workinman.utils.WorkinCloud.instance.log("[DocumentApp](_initServices) initCanadaTracking");com.workinman.services.ServiceAnalytics.enableCanadaTracking(serviceNode.att.resolve("showGameTitle").toString());}
break;}}}
com.nick.kung_fu_panda.boss_beat_down.DocumentApp.trimUrl=function(url){if(url=="")return "";if(url.indexOf("http")<0){if(url.charAt(0)=="/")url=HxOverrides.substr(url,1,url.length-1);return url;}
var tStartIndex=url.indexOf("http://");if(tStartIndex<0){tStartIndex=url.indexOf("https://");if(tStartIndex<0)tStartIndex=0;else tStartIndex+=8;}else tStartIndex+=7;var tEndIndex=url.indexOf("/",tStartIndex);var result=HxOverrides.substr(url,tEndIndex,url.length-tEndIndex);result=com.nick.kung_fu_panda.boss_beat_down.DocumentApp.appendAssetsToUrl(result);return result;}
com.nick.kung_fu_panda.boss_beat_down.DocumentApp.appendAssetsToUrl=function(url){if(url.length==0)return url;if(url.charAt(url.length-1)!="/")url=url+"/";if(url.indexOf("/assets")<url.length-9)url=url+"assets/";return url;}
com.nick.kung_fu_panda.boss_beat_down.Main=function(){this._RATE_REFRESH_SCALE=.4;com.workinman.utils.WorkinCloud.instance.log("[Main] Constructed");this._timeline=flambe.System.root;flambe.System.uncaughtError.connect($bind(this,this.errorHandler));com.workinman.utils.WorkinCloud.instance.getInput().prime();this._scaleSprite=new flambe.display.Sprite();this._timeline.add(this._scaleSprite);this._layerWorld=new flambe.Entity();this._layerUI=new flambe.Entity();this._timeline.addChild(this._layerWorld);this._timeline.addChild(this._layerUI);this._dt=0;this._timerRefreshScale=.001;this._isWorldActive=false;this._isUIActive=false;this._flagFirstPlay=true;this._flagWebAudioUnlocked=false;this._flagInitialLoadComplete=false;this._flagGameplayPaused=true;this._flagJSEmbedPauseState=false;this._flagJSEmbedExists=false;this._flagJSEmbedExists=com.workinman.utils.JSEmbedProxy.getExists();if(Std["is"](flambe.System.get_stage(),flambe.platform.html.HtmlStage))com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.scaleFactor=(js.Boot.__cast(flambe.System.get_stage(),flambe.platform.html.HtmlStage)).scaleFactor;this._flagJSEmbedExists=com.workinman.utils.JSEmbedProxy.getExists();com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_LOCAL_TEXT_LOADED,false);this._changeActions=new Array();this._flowstack=new Array();this._addEventListeners();this._beginEngine();};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.Main"]=com.nick.kung_fu_panda.boss_beat_down.Main;com.nick.kung_fu_panda.boss_beat_down.Main.__name__=["com","nick","kung_fu_panda","boss_beat_down","Main"];com.nick.kung_fu_panda.boss_beat_down.Main.prototype={_disposeWorld:function(){if(!this._isWorldActive)return;console.log("[Main](_destroyWorld)");this._isWorldActive=false;this._world.dispose();this._world=null;},_onEventInterfaceChange:function(event){this._executeInterfaceChange(event.flowId,event.screenId);},_handleWebAudioUnlock:function(){if(this._flagWebAudioUnlocked)return;this._flagWebAudioUnlocked=true;com.workinman.utils.WorkinCloud.instance._getSound().playSound("audio/silent");},_onEventInput:function(pEvent){this._handleWebAudioUnlock();if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_ORIENTATION_ALERT))return;if(this._ui.handleInput(pEvent)&&this._isWorldActive)this._world.handleInput(pEvent);},_onFlowEvent:function(pEvent){this._addFlowEvent(pEvent.flowId);},_onMuteToggle:function(pEvent){com.workinman.utils.WorkinCloud.instance.setValue(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_MUTED,!com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_MUTED));com.workinman.utils.WorkinCloud.instance._getSound().setMute(com.workinman.utils.WorkinCloud.instance.getValue(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_MUTED));},_enableInput:function(){com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.workinman.events.WMEventInput.EVENT_INPUT,$bind(this,this._onEventInput));},_onEventFilesLoading:function(pEvent){com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_LOADING_PROGRESS,pEvent._getData().value);},_addEventListeners:function(){com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.workinman.events.WMEventUpdate.EVENT_UPDATE,$bind(this,this._onEventUpdate));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_MUTE_TOGGLE,$bind(this,this._onMuteToggle));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.workinman.events.WMEventFlow.EVENT_FLOW,$bind(this,this._onFlowEvent));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_WORLD_GENERATION_COMPLETE,$bind(this,this._onWorldGenerationComplete));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.workinman.data.ConstantsCloud.EVENT_FILES_LOADING,$bind(this,this._onEventFilesLoading));},_executeInterfaceChange:function(pEventId,pScreenId){var i=this._changeActions.length;while(i>0){i--;if(this._changeActions[i]._getScreenId()==pScreenId){if(this._changeActions[i]._getChangeEvent()==pEventId){(this._changeActions[i]._getAction())();this._changeActions.splice(i,1);}}}},_unpauseGameplay:function(flagChange){if(flagChange==null)flagChange=true;if(flagChange)this._flagGameplayPaused=false;com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_UNPAUSE));},_pauseGameplay:function(flagChange){if(flagChange==null)flagChange=true;if(flagChange)this._flagGameplayPaused=true;com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_PAUSE));},_executeFlowStack:function(pId){if(this._ui._getHasTransition())return;com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_INPUT_LOCK,false);switch(pId){case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_SPLASH_PLAY:com.workinman.utils.WorkinCloud.instance._getSound().playMusic("kungfupanda_pawsomepanda",.5);com.workinman.services.ServiceAnalytics.sendCanadaTrackingCall("play");this._gotoAndPlayGame();break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_ENTER_CODE_OPEN:this._ui.openScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_UNLOCK,false);break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_ENTER_CODE_CLOSE:this._ui.closeScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_UNLOCK);break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP:this._ui.openScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_HELP,false);com.workinman.services.ServiceAnalytics.sendMilestone("custom3");break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_HELP_CLOSE:this._ui.closeScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_HELP);break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_MENU:com.workinman.utils.WorkinCloud.instance.log("[Main] Main Menu Flow Click");this._pauseGameplay();this._ui.openScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_GAMEPLAY_MENU,false);break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE:this._unpauseGameplay();this._ui.closeScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_GAMEPLAY_MENU);break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT:this._ui.openScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_QUIT_CONFIRM,false);break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES:this._resetFlagsResults();this._gotoEndGame(false);break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO:this._ui.closeScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_QUIT_CONFIRM);break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_BRANCH_GAME_LOSE:this._pauseGameplay();this._resetFlagsResults();this._gotoEndGame(false);break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN:this._disposeWorld();com.workinman.services.ServiceAnalytics.sendCanadaTrackingCall("replay");this._onGameNew();this._gotoAndPlayGame();break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_END_ROUND:this._ui.openScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_END_ROUND,false);this._resetFlagsResults();break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_END_ROUND_CLOSE:this._ui.closeScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_END_ROUND);break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_BRANCH_GAME_WIN:this._pauseGameplay();this._resetFlagsResults();this._gotoEndGame(true);break;default:}},_runFlowStack:function(){if(this._flowstack.length==0)return;while(this._flowstack.length>0){this._executeFlowStack(this._flowstack[0]);this._flowstack.shift();}},_addFlowEvent:function(pId){this._flowstack.push(pId);},_hideOrientationAlert:function(){if(!com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_ORIENTATION_ALERT))return;com.workinman.utils.WorkinCloud.instance.log("[Main](_showOrientationAlert) Back to landscape.");com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_ORIENTATION_ALERT,false);com.workinman.utils.JSEmbedProxy.unpause();com.workinman.utils.JSEmbedProxy.alertOff();},_showOrientationAlert:function(){if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_ORIENTATION_ALERT))return;com.workinman.utils.WorkinCloud.instance.log("[Main](_showOrientationAlert) Portrait mode!");com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_ORIENTATION_ALERT,true);com.workinman.utils.JSEmbedProxy.pause();com.workinman.utils.JSEmbedProxy.alertOn(com.workinman.utils.WorkinCloud.instance._getLocalize().getData("orientation_landscape")._getString());},_onEventUpdate:function(pEvent){this._dt=pEvent.getDt();if(this._dt>.12)this._dt=.12;if(this._flagJSEmbedExists){if(com.workinman.utils.JSEmbedProxy.getIsPaused()!=this._flagJSEmbedPauseState){this._flagJSEmbedPauseState=com.workinman.utils.JSEmbedProxy.getIsPaused();if(this._flagJSEmbedPauseState)this._pauseGameplay(false);else if(!this._flagGameplayPaused)this._unpauseGameplay();}
this._timerRefreshScale-=this._dt;if(this._timerRefreshScale<=0){this._timerRefreshScale=this._RATE_REFRESH_SCALE;if(this._flagInitialLoadComplete&&com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TOUCH_DEVICE)){if(com.workinman.utils.JSEmbedProxy.getCanvasHeight()>com.workinman.utils.JSEmbedProxy.getCanvasWidth()){this._showOrientationAlert();return;}else if(com.workinman.utils.WorkinCloud.instance.getValue(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_ORIENTATION_ALERT)){this._hideOrientationAlert();return;}}
if(this._flagJSEmbedExists){var tScale=com.workinman.utils.JSEmbedProxy.getCanvasScale()*com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.scaleFactor;if(tScale!=this._scaleSprite.scaleX.get__()){this._scaleSprite.scaleX.set__(this._scaleSprite.scaleY.set__(tScale));com.workinman.utils.WorkinCloud.instance.getInput()._setScale(tScale);}}}}
com.workinman.math.tween.WorkinTweener._getInstance().update(this._dt);com.workinman.utils.WorkinCloud.instance.update(this._dt);if(this._isUIActive)this._ui.update(this._dt);if(this._isWorldActive){this._world.update(this._dt);this._world.render();}
com.workinman.utils.WorkinCloud.instance._getSound().update(this._dt);if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_GAME_LOSE))this._onFlowEvent(new com.workinman.events.WMEventFlow(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_BRANCH_GAME_LOSE));else if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_GAME_WIN))this._onFlowEvent(new com.workinman.events.WMEventFlow(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_BRANCH_GAME_WIN));else if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_LEVEL_LOSE))this._onFlowEvent(new com.workinman.events.WMEventFlow(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_BRANCH_LEVEL_LOSE));else if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_LEVEL_WIN))this._onFlowEvent(new com.workinman.events.WMEventFlow(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_END_ROUND));this._runFlowStack();},_generateWorld:function(){if(this._isWorldActive)this._disposeWorld();com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_INPUT_LOCK,true);console.log("[Main](_generateWorld)");this._isWorldActive=true;this._world=new com.nick.kung_fu_panda.boss_beat_down.world.World(this._layerWorld);},_resetFlagsResults:function(){com.workinman.utils.WorkinCloud.instance.resetValue(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_GAME_WIN);com.workinman.utils.WorkinCloud.instance.resetValue(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_GAME_LOSE);com.workinman.utils.WorkinCloud.instance.resetValue(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_LEVEL_WIN);com.workinman.utils.WorkinCloud.instance.resetValue(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_LEVEL_LOSE);},_onGameNew:function(){this._resetFlagsResults();com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SCORE,0);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_ROUND,0);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_COMBO,0);},_gotoEndGame:function(pWin){this._flagWonPreviousGame=pWin;if(pWin)this._ui.changeScreenTo(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_END_GAME_WIN,false,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL_DOWN);else this._ui.changeScreenTo(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_END_GAME,false,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL_DOWN);com.workinman.services.ServiceAnalytics.sendMilestone("custom7");},_gotoSplash:function(){this._enableInput();com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_INPUT_LOCK,false);this._ui.changeScreenTo(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_SPLASH,false,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL_DOWN);com.workinman.services.ServiceAnalytics.sendMilestone("custom2");},_onWorldGenerationComplete:function(event){com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_INPUT_LOCK,false);this._world.start();this._ui.changeScreenTo(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_GAMEPLAY_HUD,false,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL_DOWN);this._unpauseGameplay();com.workinman.services.ServiceAnalytics.sendMilestone("custom6");},_gotoAndPlayGame:function(){if(!this._loadChunks(["gameplay"],$bind(this,this._eventLoadCompleteGameplay),800))return;if(this._isWorldActive)com.workinman.utils.WorkinCloud.instance.log("[Main](_gotoAndPlayGame) World already exists. Using existing world instead of creating new one.");else this._generateWorld();},_generateUI:function(){this._isUIActive=true;this._ui.addScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_LOADING,com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenLoading,"ui/loading_panel");this._ui.addScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_LOADING_OVERLAY,com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGeneric,"ui/loading_2/loading_overlay");this._ui.addScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_CUTSCENE_BORDERS,com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGeneric,"ui/cutscene/cutscene_border");this._ui.addScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_SPLASH,com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenSplash,"ui/splash/splash_bg");this._ui.addScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_HELP,com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenHelp);this._ui.addScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_GAMEPLAY_MENU,com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGameplayMenu);this._ui.addScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_QUIT_CONFIRM,com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenQuitConfirm);this._ui.addScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_GAMEPLAY_HUD,com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGameplayHUD);this._ui.addScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_END_GAME,com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenEndGame,"ui/end_screen/end_screen_bg");this._ui.addScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_END_GAME_WIN,com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenEndGameWin,"ui/end_screen/game_win_screen");this._ui.addScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_PAUSE_ALERT,com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenPauseAlert);this._ui.addScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_END_ROUND,com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenRoundSummary);this._ui.addScreen(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_UNLOCK,com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenCodeUnlock);this._ui.addEventListener(com.workinman.events.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT,$bind(this,this._onEventInterfaceChange));},_registerInput:function(){com.workinman.utils.WorkinCloud.instance.getInput().registerInput(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_SPACE,[flambe.input.Key.Space]);com.workinman.utils.WorkinCloud.instance.getInput().registerInput(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_LEFT,[flambe.input.Key.Left,flambe.input.Key.A]);com.workinman.utils.WorkinCloud.instance.getInput().registerInput(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_RIGHT,[flambe.input.Key.Right,flambe.input.Key.D]);com.workinman.utils.WorkinCloud.instance.getInput().registerInput(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_UP,[flambe.input.Key.Up,flambe.input.Key.W]);com.workinman.utils.WorkinCloud.instance.getInput().registerInput(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_DOWN,[flambe.input.Key.Down,flambe.input.Key.S]);com.workinman.utils.WorkinCloud.instance.getInput().registerInput(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_Z,[flambe.input.Key.Z]);com.workinman.utils.WorkinCloud.instance.getInput().registerInput(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_X,[flambe.input.Key.X]);com.workinman.utils.WorkinCloud.instance.getInput().registerInput(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_C,[flambe.input.Key.C]);com.workinman.utils.WorkinCloud.instance.getInput().registerInput(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_P,[flambe.input.Key.P]);},_setDefaults:function(){com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_PAUSED,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_MUTED,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.OPTION_SILENCE_AUDIO);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_GAMEOVER,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_GAME_WIN,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_GAME_LOSE,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_LEVEL_WIN,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_LEVEL_LOSE,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_INPUT_LOCK,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_ORIENTATION_ALERT,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_CODE_UNLOCK,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TOUCH_DEVICE,flambe.System.get_touch().get_supported());com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_CODE_SCREEN_OPEN,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_ATTACK_COMPLETE,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_1_COMPLETE,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_2_COMPLETE,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_3_COMPLETE,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_4_COMPLETE,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_COMBO_COMPLETE,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_SKADOOSH_COMPLETE,false);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH,3);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_MAX,3);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT,1);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT_MAX,100);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_LIVES,3);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SCORE,0);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_ROUND,0);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_COMBO,0);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HIGHEST_COMBO,0);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PICKUPS,0);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_LOADING_PROGRESS,0);com.workinman.utils.WorkinCloud.instance._getSound().setMute(com.workinman.utils.WorkinCloud.instance.getValue(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_MUTED));},_beginEngine:function(){com.workinman.utils.WorkinCloud.instance.log("[Main](_beginEngine)");this._timeline.add(new com.workinman.components.ComponentUpdater());this._parseConfigXML();this._ui=new com.nick.kung_fu_panda.boss_beat_down.ui.ScreenManager(this._layerUI);this._setDefaults();this._generateUI();this._registerInput();this._loadInLocalizedFonts();},_eventLoadCompleteInitial:function(pEvent){com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.workinman.data.ConstantsCloud.EVENT_FILES_LOADED,this._loadCallbackMethod);this._flagInitialLoadComplete=true;haxe.Timer.delay($bind(this,this._gotoSplash),800);},_eventLoadCompleteGameplay:function(pEvent){com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.workinman.data.ConstantsCloud.EVENT_FILES_LOADED,this._loadCallbackMethod);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_GAMEOVER,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_GAME_WIN,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_GAME_LOSE,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_LEVEL_WIN,false);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_LEVEL_LOSE,false);haxe.Timer.delay($bind(this,this._gotoAndPlayGame),800);},_loadChunksDelayCallback:function(){this._loadChunks(this._loadChunksCurrent,this._loadCallbackMethod,0);},_loadChunks:function(inChunks,inCallbackMethod,inDelay){if(inDelay==null)inDelay=0;var i=0;var tAllLoaded=true;while(i<inChunks.length){if(!com.workinman.utils.WorkinCloud.instance.getAssets().isChunkLoaded(inChunks[i]))tAllLoaded=false;i++;}
if(tAllLoaded)return true;if(!com.workinman.utils.WorkinCloud.instance.getAssets().isLoading())com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_LOADING_PROGRESS,0);this._loadChunksCurrent=inChunks;this._loadCallbackMethod=inCallbackMethod;if(inDelay>0){haxe.Timer.delay($bind(this,this._loadChunksDelayCallback),inDelay);this._ui.changeScreenTo(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_LOADING,false,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL_UP);return false;}
com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.workinman.data.ConstantsCloud.EVENT_FILES_LOADED,this._loadCallbackMethod);i=0;while(i<inChunks.length){if(!com.workinman.utils.WorkinCloud.instance.getAssets().isChunkLoaded(inChunks[i]))com.workinman.utils.WorkinCloud.instance.getAssets().loadChunk(inChunks[i]);i++;}
com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_INPUT_LOCK,true);this._ui.changeScreenTo(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_LOADING,false,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL_UP);return false;},_beginInitialLoad:function(){this._loadChunks(["initial"],$bind(this,this._eventLoadCompleteInitial),800);com.workinman.utils.WorkinCloud.instance.getAssets().loadFolder("fonts_"+com.workinman.utils.WorkinCloud.instance.getString(com.workinman.data.ConstantsCloud.STRING_REGION_ID));},_onFontLoad:function(pEvent){com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.workinman.data.ConstantsCloud.EVENT_FILES_LOADED,$bind(this,this._onFontLoad));com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_LOCAL_TEXT_LOADED,true);this._beginInitialLoad();console.log("[Main] (_onFontLoad) Fonts are loaded in");},_loadInLocalizedFonts:function(){console.log("[Main] (_loadInLocalizedFonts) Fonts are being loaded in");com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.workinman.data.ConstantsCloud.EVENT_FILES_LOADED,$bind(this,this._onFontLoad));this._ui.changeScreenTo(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_LOADING,false,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL_UP);com.workinman.utils.WorkinCloud.instance.getAssets().addPackDef("fonts_"+com.workinman.utils.WorkinCloud.instance.getString(com.workinman.data.ConstantsCloud.STRING_REGION_ID));com.workinman.utils.WorkinCloud.instance.getAssets().loadPack("fonts_"+com.workinman.utils.WorkinCloud.instance.getString(com.workinman.data.ConstantsCloud.STRING_REGION_ID));},_parseConfigXML:function(){com.workinman.utils.WorkinCloud.instance.log("[Main](_parseConfigXML) Parse Config XML: "+com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.CONFIG_XML_PATH);var tFast=com.workinman.utils.WorkinCloud.instance.getAssets().getXML(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.CONFIG_XML_PATH);var $it0=tFast.node.resolve("packs").nodes.resolve("pack").iterator();while($it0.hasNext()){var packNode=$it0.next();var tFlump=new Array();var $it1=packNode.nodes.resolve("flump").iterator();while($it1.hasNext()){var flumpNode=$it1.next();tFlump.push(flumpNode.att.resolve("id").toString());}
var tTiles=new Array();var $it2=packNode.nodes.resolve("tiles").iterator();while($it2.hasNext()){var tileNode=$it2.next();tTiles.push(tileNode.att.resolve("id").toString());}
com.workinman.utils.WorkinCloud.instance.getAssets().addPackDef(packNode.att.resolve("id").toString(),tFlump,tTiles);tFlump=null;tTiles=null;}
var $it3=tFast.node.resolve("chunks").nodes.resolve("chunk").iterator();while($it3.hasNext()){var iChunk=$it3.next();com.workinman.utils.WorkinCloud.instance.getAssets().addChunk(iChunk.att.resolve("id").toString(),iChunk);}
com.workinman.utils.WorkinCloud.instance.setString(com.workinman.data.ConstantsCloud.STRING_REGION_ID,Std.string(tFast.node.resolve("localization").node.resolve("region").getInnerData()));com.workinman.utils.WorkinCloud.instance.log("[Main] Localization : Set Region: "+com.workinman.utils.WorkinCloud.instance.getString(com.workinman.data.ConstantsCloud.STRING_REGION_ID));},errorHandler:function(e){com.workinman.utils.WorkinCloud.instance.log("Error:"+e);},__class__:com.nick.kung_fu_panda.boss_beat_down.Main}
com.nick.kung_fu_panda.boss_beat_down.data={}
com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp=function(){}
$hxClasses["com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp"]=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.__name__=["com","nick","kung_fu_panda","boss_beat_down","data","ConstantsApp"];com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen=function(){}
$hxClasses["com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen"]=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.__name__=["com","nick","kung_fu_panda","boss_beat_down","data","ConstantsScreen"];com.workinman={}
com.workinman.events={}
com.workinman.events.WMEventDispatcher=function(){this._signals=new Hash();};$hxClasses["com.workinman.events.WMEventDispatcher"]=com.workinman.events.WMEventDispatcher;com.workinman.events.WMEventDispatcher.__name__=["com","workinman","events","WMEventDispatcher"];com.workinman.events.WMEventDispatcher.prototype={dispose:function(){var $it0=this._signals.iterator();while($it0.hasNext()){var s=$it0.next();s.dispose();}
this._signals=null;},dispatchEvent:function(pEvent){if(!this._signals.exists(pEvent.getEventId()))return;this._signals.get(pEvent.getEventId()).dispatchEvent(pEvent);},removeEventListener:function(pEventId,pListener){if(!this._signals.exists(pEventId)){console.log("[WMEventDispatcher](removeEventListener) "+pEventId+" doesn't exist!");return;}
this._signals.get(pEventId).removeEventListener(pListener);if(this._signals.get(pEventId).isEmtpy()){this._signals.get(pEventId).dispose();this._signals.remove(pEventId);}},addEventListener:function(pEventId,pListener){if(!this._signals.exists(pEventId))this._signals.set(pEventId,new com.workinman.events._WMEventDispatcher.WMEventTracker());this._signals.get(pEventId).addEventListener(pListener);},__class__:com.workinman.events.WMEventDispatcher}
com.nick.kung_fu_panda.boss_beat_down.ui={}
com.nick.kung_fu_panda.boss_beat_down.ui.ScreenManager=function(pContainer){com.workinman.events.WMEventDispatcher.call(this);this._container=pContainer;this._layerScreen=new flambe.Entity();this._layerTransition=new flambe.Entity();this._container.addChild(this._layerScreen);this._container.addChild(this._layerTransition);this._isPaused=false;this._screens=new Array();this._screensOpen=new Array();this._screensQueue=new Array();this._transitionType=-1;this._flagHasTransition=false;this._flagCloseScreenAfterTransition=false;this._flagOpenScreenAfterTransition=false;this._flagHasScreenshot=false;this._flagCloseAllScreensWhenBottomCloses=false;this._camera=new com.workinman.math.WorkinCamera(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y);};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.ScreenManager"]=com.nick.kung_fu_panda.boss_beat_down.ui.ScreenManager;com.nick.kung_fu_panda.boss_beat_down.ui.ScreenManager.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","ScreenManager"];com.nick.kung_fu_panda.boss_beat_down.ui.ScreenManager.__super__=com.workinman.events.WMEventDispatcher;com.nick.kung_fu_panda.boss_beat_down.ui.ScreenManager.prototype=$extend(com.workinman.events.WMEventDispatcher.prototype,{_transitionPlay:function(){this._transition.show();this._transition.start();},_removeTransition:function(){if(!this._flagHasTransition)return;this._layerTransition.removeChild(this._transition._getEntity());this._transition._getDispatcher().removeEventListener(com.workinman.events.WMEventScreenOut.EVENT_SCREEN_OUTPUT,$bind(this,this._onEventTransitionOutput));this._transition.dispose();this._transition=null;this._flagHasTransition=false;},_addTransition:function(pAssetId,pKillExistingTransition){if(pKillExistingTransition==null)pKillExistingTransition=true;if(this._flagHasTransition){if(!pKillExistingTransition)return;this._removeTransition();}
this._transition=new com.nick.kung_fu_panda.boss_beat_down.ui.transitions.TransitionBase(pAssetId);this._transition.hide();this._transition._getDispatcher().addEventListener(com.workinman.events.WMEventScreenOut.EVENT_SCREEN_OUTPUT,$bind(this,this._onEventTransitionOutput));this._layerTransition.addChild(this._transition._getEntity());this._flagHasTransition=true;},_updateTransition:function(dt){switch(this._transitionType){case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL:this._transitionScreenHeadedOut._getPos().x-=3000*dt;this._transitionScreenHeadedIn._getPos().x-=3000*dt;if(this._transitionScreenHeadedIn._getPos().x<=0){this._transitionScreenHeadedIn._getPos().x=0;this._flagHasTransition=false;this._onTransitionCloseScreen();this._onQueueConditionMet(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_TRANSITION_COMPLETE);}
break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL_UP:this._transitionScreenHeadedOut._getPos().y-=2000*dt;this._transitionScreenHeadedIn._getPos().y-=2000*dt;if(this._transitionScreenHeadedIn._getPos().y<=0){this._transitionScreenHeadedIn._getPos().y=0;this._flagHasTransition=false;this._onTransitionCloseScreen();this._onQueueConditionMet(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_TRANSITION_COMPLETE);}
break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL_DOWN:this._transitionScreenHeadedOut._getPos().y+=2000*dt;this._transitionScreenHeadedIn._getPos().y+=2000*dt;if(this._transitionScreenHeadedIn._getPos().y>=0){this._transitionScreenHeadedIn._getPos().y=0;this._flagHasTransition=false;this._onTransitionCloseScreen();this._onQueueConditionMet(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_TRANSITION_COMPLETE);}
break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_FADE:this._transition.update(dt);if(this._transition.flagDispose)this._removeTransition();break;}},_removeScreenDisplay:function(pDisplay){this._layerScreen.removeChild(pDisplay);},_addScreenDisplay:function(pDisplay){this._layerScreen.addChild(pDisplay);},_dispatchEventChange:function(pChangeId,pScreenId){this.dispatchEvent(new com.workinman.events.WMEventInterfaceChange(pChangeId,pScreenId));},_onQueueConditionMet:function(pCondition,pConditionString){if(pConditionString==null)pConditionString="";var i=0;while(i<this._screensQueue.length){if(this._screensQueue[i].validateCondition(pCondition,pConditionString)){this._generateScreen(this._screensQueue[i].screenData);this._screensQueue.splice(i,1);}
i++;}},dispose:function(){var i=0;while(i<this._screensOpen.length){this._disposeScreen(this._screensOpen[i].id);i++;}
this._screensQueue=null;this._screens=null;this._removeTransition();this._container.removeChild(this._layerScreen);this._container.removeChild(this._layerTransition);this._layerScreen=null;this._layerTransition=null;com.workinman.events.WMEventDispatcher.prototype.dispose.call(this);},_getScreenData:function(pId){var i=this._screens.length-1;while(i>=0){if(this._screens[i].id==pId)return this._screens[i];i--;}
com.workinman.utils.WorkinCloud.instance.log("[ScreenManager](_getScreenData) ERROR: Screen >"+pId+"< idoes not exist. getScreenData() returning NULL.");return null;},_hasScreenData:function(pId){var i=this._screens.length-1;while(i>=0){if(this._screens[i].id==pId)return true;i--;}
return false;},_removeScreenshot:function(){if(!this._flagHasScreenshot)return;this._layerScreen.removeChild(this._screenshot._getEntity());this._screenshot.dispose();this._screenshot=null;this._flagHasScreenshot=false;},_addScreenshot:function(){com.workinman.utils.WorkinCloud.instance.log("[ScreenManager](_addScreenshot) ERROR: Screenshots not supported in HTML5 yet.");return;if(this._flagHasScreenshot){if(this._screensOpen.length==1){com.workinman.utils.WorkinCloud.instance.log("[ScreenManager](_addScreenshot) Keep existing screenshot.");return;}
this._removeScreenshot();}
this._layerScreen.addChild(this._screenshot._getEntity());this._flagHasScreenshot=true;},_onTransitionCloseScreen:function(){if(this._flagCloseScreenAfterTransition){this.closeScreen(this._screenIdToCloseAfterTransition,false);this._flagCloseScreenAfterTransition=false;}
if(this._flagOpenScreenAfterTransition){this.openScreen(this._screenIdToOpenDuringTransition,false);this._flagOpenScreenAfterTransition=false;}},_onEventTransitionOutput:function(event){if(event.flowId==com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.OUTPUT_OPENED){com.workinman.utils.WorkinCloud.instance.log("[ScreenManager] Transition Midway...");this._onTransitionCloseScreen();this._removeScreenshot();this._onQueueConditionMet(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_TRANSITION_MIDWAY);}else if(event.flowId==com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.OUTPUT_CLOSED){com.workinman.utils.WorkinCloud.instance.log("[ScreenManager] Transition Complete.");this._removeScreenshot();this._onQueueConditionMet(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_TRANSITION_COMPLETE);}},_onEventScreenOutput:function(event){if(event.flowId==com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.OUTPUT_OPENED)this._dispatchEventChange(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CHANGE_OPEN_COMPLETE,event.screenId);else if(event.flowId==com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.OUTPUT_CLOSED){this._dispatchEventChange(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CHANGE_CLOSE_COMPLETE,event.screenId);this._onQueueConditionMet(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_CLOSED_SPECIFIC,event.screenId);if(this._flagHasTransition&&this._transitionType==com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_STAGED)this._transitionPlay();}},_disposeScreen:function(pId,pIndex){if(pIndex==null)pIndex=-1;var i=0;while(i<this._screensOpen.length){if(this._screensOpen[i].id==pId){this._screensOpen[i]._getDispatcher().removeEventListener(com.workinman.events.WMEventScreenOut.EVENT_SCREEN_OUTPUT,$bind(this,this._onEventScreenOutput));this._removeScreenDisplay(this._screensOpen[i]._getEntity());this._screensOpen[i].dispose();this._screensOpen.splice(i,1);return;}
i++;}},_generateScreen:function(pData){if(this.isScreenOpen(pData.id)){this.getScreen(pData.id).reset();this._dispatchEventChange(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CHANGE_OPEN_BEGIN,pData.id);return;}
var tNewScreen=Type.createInstance(pData.screenClass,[pData.id,pData.assetClassName,pData.data]);if(tNewScreen==null){com.workinman.utils.WorkinCloud.instance.log("[ScreenManager](_generateScreen) ERROR: Screen Class for >"+pData.id+"< not found.");return;}
if(this._flagHasTransition){this._transitionScreenHeadedIn=tNewScreen;switch(this._transitionType){case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL:tNewScreen._getPos().x=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_WIDTH;break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL_UP:tNewScreen._getPos().y=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT;break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL_DOWN:tNewScreen._getPos().y=-com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT;break;}}
this._screensOpen.push(tNewScreen);tNewScreen.renderPosition(this._camera);this._addScreenDisplay(tNewScreen._getEntity());tNewScreen._getDispatcher().addEventListener(com.workinman.events.WMEventScreenOut.EVENT_SCREEN_OUTPUT,$bind(this,this._onEventScreenOutput));tNewScreen.open(true);this._dispatchEventChange(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CHANGE_OPEN_BEGIN,pData.id);},_addScreenToQueue:function(pData,pOpenCondition,pConditionString){if(pConditionString==null)pConditionString="";if(this.hasQueuedScreen(pData.id))return;this._screensQueue.push(new com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenQueueData(pData,pOpenCondition,pConditionString));},removeAllQueuedScreens:function(){var i=this._screensQueue.length-1;while(i>=0){this._screensQueue.splice(i,1);i--;}},removeQueuedScreen:function(pId){var i=this._screensQueue.length-1;while(i>=0){if(this._screensQueue[i].screenData.id==pId){this._screensQueue.splice(i,1);return;}
i--;}},hasQueuedScreen:function(pId){var i=this._screensQueue.length-1;while(i>=0){if(this._screensQueue[i].screenData.id==pId)return true;i--;}
return false;},isScreenOpen:function(pId){var i=this._screensOpen.length-1;while(i>=0){if(this._screensOpen[i].id==pId)return true;i--;}
return false;},getScreen:function(pId){if(pId==null)pId="";if(this._screensOpen.length==0){com.workinman.utils.WorkinCloud.instance.log("[ScreenManager](getScreen) ERROR: no screens are open. Unable to getScreen()");return null;}
if(pId=="")return this._screensOpen[this._screensOpen.length-1];var i=this._screensOpen.length-1;while(i>=0){if(this._screensOpen[i].id==pId)return this._screensOpen[i];i--;}
com.workinman.utils.WorkinCloud.instance.log("[ScreenManager](getScreen) ERROR: Screen >"+pId+"< is not open or does not exist. getScreen() returning NULL.");return null;},update:function(dt){if(this._isPaused)return;if(dt>.15)dt=.15;if(this._flagHasTransition)this._updateTransition(dt);this._loop=this._screensOpen.length-1;while(this._loop>=0){this._screensOpen[this._loop].update(dt);this._screensOpen[this._loop].renderPosition(this._camera);if(this._screensOpen[this._loop].flagDispose){this._disposeScreen(this._screensOpen[this._loop].id);if(this._screensOpen.length==0)this._onQueueConditionMet(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_CLOSED_ALL);}
this._loop--;}},_getHasTransition:function(){return this._flagHasTransition;},changeScreenTo:function(pId,pPlayOutroAnimations,pTransitionType,pTransitionAssetId){if(pTransitionAssetId==null)pTransitionAssetId="";if(pTransitionType==null)pTransitionType=-1;if(pPlayOutroAnimations==null)pPlayOutroAnimations=false;com.workinman.utils.WorkinCloud.instance.log("[ScreenManager](changeTo) "+pId);this.removeAllQueuedScreens();var i;if(this.isScreenOpen(pId)){com.workinman.utils.WorkinCloud.instance.log("[ScreenManager](changeTo) Screen is already open.");i=this._screensOpen.length-1;while(i>=0){if(this._screensOpen[i].id!=pId)this.closeScreen(this._screensOpen[i].id,false,i);i--;}
this._dispatchEventChange(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CHANGE_OPEN_BEGIN,pId);this._dispatchEventChange(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CHANGE_OPEN_COMPLETE,pId);return;}
this._flagCloseScreenAfterTransition=false;this._flagOpenScreenAfterTransition=false;if(this._screensOpen.length>0){com.workinman.utils.WorkinCloud.instance.log("[ScreenManager](changeFrom) "+this._screensOpen[0].id);this._screensOpen[0].suspend();var tOpenCondition=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_CLOSED_ALL;if(pTransitionType>-1){this._transitionType=pTransitionType;switch(this._transitionType){case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCREENSHOT:this._flagOpenScreenAfterTransition=true;pPlayOutroAnimations=false;this._addScreenshot();this._transitionPlay();break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL:this._flagHasTransition=true;this._flagOpenScreenAfterTransition=false;this._flagCloseScreenAfterTransition=true;pPlayOutroAnimations=false;this._transitionScreenHeadedOut=this._screensOpen[0];tOpenCondition=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_IMMEDIATE;break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL_UP:this._flagHasTransition=true;this._flagOpenScreenAfterTransition=false;this._flagCloseScreenAfterTransition=true;pPlayOutroAnimations=false;this._transitionScreenHeadedOut=this._screensOpen[0];tOpenCondition=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_IMMEDIATE;break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL_DOWN:this._flagHasTransition=true;this._flagOpenScreenAfterTransition=false;this._flagCloseScreenAfterTransition=true;pPlayOutroAnimations=false;this._transitionScreenHeadedOut=this._screensOpen[0];tOpenCondition=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_IMMEDIATE;break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL:this._flagHasTransition=true;this._flagOpenScreenAfterTransition=false;this._flagCloseScreenAfterTransition=true;pPlayOutroAnimations=false;this._transitionScreenHeadedOut=this._screensOpen[0];tOpenCondition=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_IMMEDIATE;break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_FADE:this._addTransition(pTransitionAssetId,this._flagHasTransition?this._transition._getIsOutro()?true:false:false);this._flagCloseScreenAfterTransition=true;pPlayOutroAnimations=false;this._transitionPlay();tOpenCondition=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_TRANSITION_MIDWAY;break;}}
if(this._screensOpen.length>0){if(this._flagCloseScreenAfterTransition)this._screenIdToCloseAfterTransition=this._screensOpen[0].id;else this.closeScreen(this._screensOpen[0].id,pPlayOutroAnimations,0);if(this._screensOpen.length>1){i=1;while(i<this._screensOpen.length){this.closeScreen(this._screensOpen[i].id,false,this._screensOpen.length);i++;}}}
if(this._flagOpenScreenAfterTransition){com.workinman.utils.WorkinCloud.instance.log("[ScreenManager] Store Screen to open at transition midway: "+pId);this._screenIdToOpenDuringTransition=pId;}else this.openScreen(pId,true,tOpenCondition);}else this.openScreen(pId,false);},_moveScreenToTop:function(pId){var tScreen=this.getScreen(pId);if(tScreen==null){com.workinman.utils.WorkinCloud.instance.log("[ScreenManager](_moveScreenToTop) ERROR: Screen >"+pId+"< is not open or does not exist. Cancelling move.");return;}
if(tScreen.isClosing())tScreen.open(false);var i=this._screensOpen.length-1;while(i>=0){if(this._screensOpen[i].id==pId)break;i--;}
this._screensOpen.splice(i,1);tScreen.reset();this._removeScreenDisplay(tScreen._getEntity());this._addScreenDisplay(tScreen._getEntity());this._screensOpen.push(tScreen);},openScreen:function(pId,pWaitForClosingScreens,pOpenCondition,pConditionString){if(pConditionString==null)pConditionString="";if(pOpenCondition==null)pOpenCondition=0;if(pWaitForClosingScreens==null)pWaitForClosingScreens=true;com.workinman.utils.WorkinCloud.instance.log("[ScreenManager](openScreen) "+pId);if(!this._hasScreenData(pId)){com.workinman.utils.WorkinCloud.instance.log("[ScreenManager](closeScreen) ERROR: Screen >"+pId+"< does not exist. Cancelling open().");return;}
if(this.isScreenOpen(pId)){this._moveScreenToTop(pId);return;}
if(pOpenCondition!=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_IMMEDIATE&&pWaitForClosingScreens){if(this._screensOpen.length>0){this._addScreenToQueue(this._getScreenData(pId),pOpenCondition,pConditionString);return;}else if(pOpenCondition==com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_TRANSITION_COMPLETE||pOpenCondition==com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_TRANSITION_MIDWAY){if(this._flagHasTransition){this._addScreenToQueue(this._getScreenData(pId),pOpenCondition,pConditionString);return;}}}
this._generateScreen(this._getScreenData(pId));},closeScreen:function(pId,pPlayOutro,pIndex){if(pIndex==null)pIndex=-1;if(pPlayOutro==null)pPlayOutro=true;if(pId==null)pId="";if(this._screensOpen.length==0){this.removeQueuedScreen(pId);return;}
var tScreen;if(pId=="")tScreen=this._screensOpen[this._screensOpen.length-1];else if(pIndex>=0&&pIndex<this._screensOpen.length)tScreen=this._screensOpen[pIndex];else{tScreen=this.getScreen(pId);if(tScreen==null){this.removeQueuedScreen(pId);return;}}
tScreen.close(pPlayOutro);this._dispatchEventChange(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CHANGE_CLOSE_BEGIN,pId);},handleInput:function(pEvent){var tValid=true;var i=this._screensOpen.length-1;while(i>=0&&tValid){if(!this._screensOpen[i].handleInput(pEvent,i==this._screensOpen.length-1))tValid=false;i--;}
return tValid;},addScreen:function(pId,pScreenClass,pAssetId,pLayer,pData){if(pLayer==null)pLayer=0;if(pAssetId==null)pAssetId="";this._screens.push(new com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenData(pId,pScreenClass,pAssetId,pLayer,pData));},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.ScreenManager,__properties__:{get_isTransition:"_getHasTransition"}});com.workinman.display={}
com.workinman.display.IPoolable=function(){}
$hxClasses["com.workinman.display.IPoolable"]=com.workinman.display.IPoolable;com.workinman.display.IPoolable.__name__=["com","workinman","display","IPoolable"];com.workinman.display.IPoolable.prototype={__class__:com.workinman.display.IPoolable,__properties__:{set_isPooled:"_setIsPooled",get_isPooled:"_getIsPooled",set_isActive:"_setIsActive",get_isActive:"_getIsActive"}}
com.workinman.display.Poolable=function(inData){this._flagPooled=true;this._flagActive=false;};$hxClasses["com.workinman.display.Poolable"]=com.workinman.display.Poolable;com.workinman.display.Poolable.__name__=["com","workinman","display","Poolable"];com.workinman.display.Poolable.__interfaces__=[com.workinman.display.IPoolable];com.workinman.display.Poolable.prototype={_setIsActive:function(inActive){this._flagActive=inActive;return this._flagActive;},_getIsActive:function(){return this._flagActive;},_setIsPooled:function(inPooled){this._flagPooled=inPooled;return this._flagPooled;},_getIsPooled:function(){return this._flagPooled;},dispose:function(){this.release();},release:function(){this._flagActive=false;},renew:function(inData){this._flagActive=true;},__class__:com.workinman.display.Poolable,__properties__:{set_isPooled:"_setIsPooled",get_isPooled:"_getIsPooled",set_isActive:"_setIsActive",get_isActive:"_getIsActive"}}
com.workinman.display.Element=function(inData){com.workinman.display.Poolable.call(this,inData);this._entity=new flambe.Entity();this._display=new flambe.display.Sprite();this._entity.add(this._display);this._elements=new Array();this._textureEntity=new flambe.Entity();this._entity.addChild(this._textureEntity);this._texture=new flambe.display.Sprite();this._textureEntity.add(this._texture);this._dispatcher=new com.workinman.events.WMEventDispatcher();this._pos=new com.workinman.math.WorkinPoint();this._velocity=new com.workinman.math.WorkinPoint();this._renderOffset=new com.workinman.math.WorkinPoint();this._renderOrigin=new com.workinman.math.WorkinPoint();this._render=new com.workinman.display.Renderable();this._uniqueId=com.workinman.data.ConstantsCloud.getUniqueId();this._assetId="";this._layer="";this._doDelete=false;if(inData.pooled==true)this._setIsPooled(true);else{this._setIsPooled(false);this.renew(inData);}
this._addEventListeners();};$hxClasses["com.workinman.display.Element"]=com.workinman.display.Element;com.workinman.display.Element.__name__=["com","workinman","display","Element"];com.workinman.display.Element.__super__=com.workinman.display.Poolable;com.workinman.display.Element.prototype=$extend(com.workinman.display.Poolable.prototype,{_removeEventListeners:function(){},_addEventListeners:function(){},setOrigin:function(pOrigin){this._renderOrigin.toPoint(pOrigin);this._render.width=this._texture.getNaturalWidth();this._render.height=this._texture.getNaturalHeight();this._texture.x.set__(-(this._renderOrigin.x*this._render.width));this._texture.y.set__(-(this._renderOrigin.y*this._render.height));},applyRenderable:function(){this._display.x.set__(this._render.x);this._display.y.set__(this._render.y);this._display.scaleX.set__(this._render.scaleX);this._display.scaleY.set__(this._render.scaleY);this._display.rotation.set__(this._render.rotation);this._display.alpha.set__(this._render.alpha);this._display.set_visible(this._render.visible);},renderPositionWithoutCamera:function(){this._render.x=this._pos.x+this._renderOffset.x;this._render.y=this._pos.y+this._renderOffset.y;this.applyRenderable();},renderPosition:function(pCamera){if(pCamera==null){this._render.x=this._pos.x+this._renderOffset.x;this._render.y=this._pos.y+this._renderOffset.y;}else{this._render.x=this._pos.x-pCamera._getPos().x+pCamera._getScreenCenterX()+this._renderOffset.x;this._render.y=this._pos.y-pCamera._getPos().y+pCamera._getScreenCenterY()+this._renderOffset.y;}
var _g=0,_g1=this._elements;while(_g<_g1.length){var b=_g1[_g];++_g;b.renderPosition(pCamera);}
this.applyRenderable();},_addElement:function(pElement){this._elements.push(pElement);this._entity.addChild(pElement._getEntity());return pElement;},updatePositionFromVelocity:function(dt){this._pos.x+=this._velocity.x*dt;this._pos.y+=this._velocity.y*dt;},update:function(dt){var _g=0,_g1=this._elements;while(_g<_g1.length){var e=_g1[_g];++_g;e.update(dt);}},swapTexture:function(inSprite){this._textureEntity.remove(this._texture);this._texture.dispose();this._texture=inSprite;this._render.width=this._texture.getNaturalWidth();this._render.height=this._texture.getNaturalHeight();this._texture.x.set__(-(this._renderOrigin.x*this._render.width));this._texture.y.set__(-(this._renderOrigin.y*this._render.height));this._textureEntity.add(this._texture);},setTexture:function(inAsset){if(inAsset=="")return;if(com.workinman.utils.WorkinCloud.instance.getAssets().hasAsset(inAsset)==false){com.workinman.utils.WorkinCloud.instance.log("[Element](setTexture) No asset named "+inAsset+" exists!");return;}
this.swapTexture(new flambe.display.ImageSprite(com.workinman.utils.WorkinCloud.instance.getAssets().getTexture(inAsset)));},_getUniqueId:function(){return this._uniqueId;},_setLayer:function(pLayer){this._layer=pLayer;return this._layer;},_getLayer:function(){return this._layer;},_getDepth:function(){return this._pos.z;},_getDispatcher:function(){return this._dispatcher;},_getEntity:function(){return this._entity;},_getRenderable:function(){return this._render;},_setDoDelete:function(pVal){this._doDelete=pVal;return this._doDelete;},_getDoDelete:function(){return this._doDelete;},_setVelocity:function(pPos){this._velocity.toPoint(pPos);return this._velocity;},_getVelocity:function(){return this._velocity;},_setPos:function(pPos){this._pos.toPoint(pPos);return this._pos;},_getPos:function(){return this._pos;},dispose:function(){if(this._getIsPooled()){this.release();return;}
var _g=0,_g1=this._elements;while(_g<_g1.length){var b=_g1[_g];++_g;b.dispose();}
this._elements=null;this._removeEventListeners();this._dispatcher.dispose();this._dispatcher=null;this._entity.dispose();this._entity=null;this._pos=null;this._velocity=null;this._texture=null;this._display=null;this._textureEntity=null;this._render=null;this._renderOffset=null;this._renderOrigin=null;},release:function(){if(!this._getIsPooled())return;com.workinman.display.Poolable.prototype.release.call(this);},renew:function(inData){if(inData.asset){this._assetId=inData.asset;this.setTexture(this._assetId);}
this._doDelete=false;if(inData.layer)this._layer=inData.layer;if(inData.x)this._pos.x=inData.x;if(inData.y)this._pos.y=inData.y;if(inData.z)this._pos.z=inData.z;if(inData.rot)this._render.rotation=inData.rot;if(inData.alpha)this._render.alpha=inData.alpha;if(inData.scale)this._render.scaleX=this._render.scaleY=inData.scale;if(inData.origin)this.setOrigin(inData.origin);else this.setOrigin(new com.workinman.math.WorkinPoint(0,0));},__class__:com.workinman.display.Element,__properties__:$extend(com.workinman.display.Poolable.prototype.__properties__,{set_pos:"_setPos",get_pos:"_getPos",set_doDelete:"_setDoDelete",get_doDelete:"_getDoDelete",get_renderable:"_getRenderable",get_entity:"_getEntity",get_dispatcher:"_getDispatcher",set_layer:"_setLayer",get_layer:"_getLayer"})});com.nick.kung_fu_panda.boss_beat_down.ui.buttons={}
com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase=function(pX,pY,pOrigin,pUpAsset,pOverAsset,pDownAsset,pDisabledAsset,pScale){if(pScale==null)pScale=1;if(pDisabledAsset==null)pDisabledAsset="";if(pDownAsset==null)pDownAsset="";if(pOverAsset==null)pOverAsset="";if(pUpAsset==null)pUpAsset="";this._DEBUG_SHOW_HITBOX=false;if(pOrigin==null)pOrigin=new com.workinman.math.WorkinPoint(.5,.5);com.workinman.display.Element.call(this,{x:pX,y:pY,asset:this._assetUp,origin:pOrigin,scale:pScale});if(pUpAsset=="")this._assetUp=this._getDefaultAssetUp();else this._assetUp=pUpAsset;if(pOverAsset=="")this._assetOver=this._getDefaultAssetOver();else this._assetOver=pOverAsset;if(pDownAsset=="")this._assetDown=this._getDefaultAssetDown();else this._assetDown=pDownAsset;if(pDisabledAsset=="")this._assetDisabled=this._getDefaultAssetDisabled();else this._assetDisabled=pDisabledAsset;this._flagDown=false;this._flagClickTransition=false;this._flagDragged=false;this.enable();this._buildHitBox();};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase"]=com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase;com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","buttons","ButtonBase"];com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.__super__=com.workinman.display.Element;com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.prototype=$extend(com.workinman.display.Element.prototype,{_renderDisabled:function(){if(this._assetDisabled!="")this.setTexture(this._assetDisabled);},_renderReturnUp:function(){if(this._flagClickTransition)return;this._renderUp();},_renderDown:function(){if(this._flagClickTransition)return;if(this._assetDown!="")this.setTexture(this._assetDown);},_renderUp:function(){if(this._assetUp!="")this.setTexture(this._assetUp);},update:function(dt){com.workinman.display.Element.prototype.update.call(this,dt);if(this._flagDown&&com.workinman.utils.WorkinCloud.instance.getInput().getInput(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_CLICK)==false){this._upConnection.dispose();this._renderReturnUp();}},_onCancelDrag:function(){this._flagDragged=false;this._dispatch(com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.CANCEL_DRAG);},_onUp:function(pX,pY){if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_ORIENTATION_ALERT))return;if(this._flagDown){this._upConnection.dispose();this._upConnection=null;this._flagDown=false;this._renderReturnUp();this._click();if(this._flagDragged)this._onCancelDrag();this._dispatch(com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.UP);}},_onDown:function(pX,pY){if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_ORIENTATION_ALERT))return;this._flagDown=true;this._renderDown();this._upConnection=this._hitBox.get_pointerUp().connect($bind(this,this._onUpEvent));this._dispatch(com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.DOWN);},_onClickTransitionComplete:function(){this._flagClickTransition=false;com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_INPUT_LOCK,false);this._dispatch(com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.CLICK);if(this._getClickFlow()!="")com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventFlow(this._getClickFlow()));if(this._getClickEvent()!="")com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(this._getClickEvent()));com.workinman.math.tween.WorkinTweener._getInstance().stop(this._render);this._render.scaleX=1;this._render.scaleY=1;},_click:function(){if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_INPUT_LOCK))return;if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_ORIENTATION_ALERT))return;this._flagClickTransition=true;com.workinman.utils.WorkinCloud.instance._getSound().playSound("punch_2");com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_INPUT_LOCK,true);this._onClickTransitionComplete();},_dispatch:function(pID){if(!this._GET_DO_DISPATCH())return;this._dispatcher.dispatchEvent(new com.workinman.events.WMEvent(pID));},_onUpEvent:function(pEvent){this._onUp(pEvent.viewX,pEvent.viewY);},_onDownEvent:function(pEvent){this._onDown(pEvent.viewX,pEvent.viewY);},_getClickFlow:function(){return "";},_getClickEvent:function(){return "";},_GET_DISABLE_FRAME:function(){return 1;},_GET_CUSTOM_HIT_BOX:function(){return new flambe.math.Point(0,0);},_GET_DO_DISPATCH:function(){return true;},_getDefaultAssetDisabled:function(){return "";},_getDefaultAssetDown:function(){return "";},_getDefaultAssetOver:function(){return "";},_getDefaultAssetUp:function(){return "";},dispose:function(){this.disable();this._downConnection.dispose();this._downConnection=null;if(this._flagDown){this._upConnection.dispose();this._upConnection=null;}
this._hitBox.dispose();com.workinman.display.Element.prototype.dispose.call(this);},_buildHitBox:function(){if(this._DEBUG_SHOW_HITBOX)this._hitBox=new flambe.display.FillSprite(16711680,Std["int"](this._render.width),Std["int"](this._render.height));else{this._hitBox=new flambe.display.ImageSprite(flambe.System.createTexture(Std["int"](this._render.width),Std["int"](this._render.height)));this._hitBox.alpha.set__(0);}
var tEnt=new flambe.Entity();tEnt.add(this._hitBox);this._textureEntity.addChild(tEnt);tEnt=null;this._downConnection=this._hitBox.get_pointerDown().connect($bind(this,this._onDownEvent));},disable:function(){this._flagEnabled=false;this._renderDisabled();},enable:function(){this._flagEnabled=true;this._renderUp();},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase,__properties__:$extend(com.workinman.display.Element.prototype.__properties__,{get__DO_DISPATCH:"_GET_DO_DISPATCH",get__clickEvent:"_getClickEvent",get__clickFlow:"_getClickFlow"})});com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonSoundToggle=function(pX,pY,pOrigin,onAssets,offAssets){this._onAssets=onAssets;this._offAssets=offAssets;this._refreshMuteState();com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.call(this,pX,pY,pOrigin,this._currentAssets[0],this._currentAssets[1],this._currentAssets[this._currentAssets.length==3?2:1]);};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonSoundToggle"]=com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonSoundToggle;com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonSoundToggle.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","buttons","ButtonSoundToggle"];com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonSoundToggle.__super__=com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase;com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonSoundToggle.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.prototype,{_getClickEvent:function(){return "";},_refreshMuteState:function(){this._currentAssets=com.workinman.utils.WorkinCloud.instance._getSound().getMute()?this._offAssets:this._onAssets;this._assetUp=this._currentAssets[0];this._assetOver=this._currentAssets[1];this._assetDown=this._currentAssets[this._currentAssets.length==3?2:1];},_click:function(){if(!this._flagEnabled)return;if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_ORIENTATION_ALERT))return;com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_INPUT_LOCK,true);com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_MUTE_TOGGLE));this._refreshMuteState();this._renderReturnUp();this._onClickTransitionComplete();},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonSoundToggle});com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonText=function(pX,pY,pOrigin,pUpAsset,pOverAsset,pDownAsset,pDisabledAsset,pScale,pText){if(pText==null)pText="";if(pScale==null)pScale=1;if(pDisabledAsset==null)pDisabledAsset="";if(pDownAsset==null)pDownAsset="";if(pOverAsset==null)pOverAsset="";if(pUpAsset==null)pUpAsset="";com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.call(this,pX,pY,pOrigin,pUpAsset,pOverAsset,pDownAsset,pDisabledAsset,pScale);this._addElement(new com.workinman.display.TextLocalized(0,0,pText,"",{origin:new com.workinman.math.WorkinPoint(.5,.5)}));};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonText"]=com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonText;com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonText.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","buttons","ButtonText"];com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonText.__super__=com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase;com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonText.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.prototype,{__class__:com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonText});com.workinman.display.Display=function(pX,pY,pAsset,pRegistration){if(pAsset==null)pAsset="";this._flagLocked=false;com.workinman.display.Element.call(this,{x:pX,y:pY,asset:pAsset,origin:pRegistration});this._addEventListeners();};$hxClasses["com.workinman.display.Display"]=com.workinman.display.Display;com.workinman.display.Display.__name__=["com","workinman","display","Display"];com.workinman.display.Display.__super__=com.workinman.display.Element;com.workinman.display.Display.prototype=$extend(com.workinman.display.Element.prototype,{lock:function(){this._flagLocked=true;},dispose:function(){com.workinman.display.Element.prototype.dispose.call(this);this._removeEventListeners();},_updateValue:function(){return "";},_refresh:function(){},_onUpdateDisplay:function(inEvent){if(this._flagLocked)return;if(inEvent._getData().valueID==this._updateValue())this._refresh();},_removeEventListeners:function(){com.workinman.display.Element.prototype._removeEventListeners.call(this);com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.workinman.display.Display.EVENT_UPDATE_DISPLAY,$bind(this,this._onUpdateDisplay));},_addEventListeners:function(){com.workinman.display.Element.prototype._addEventListeners.call(this);com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.workinman.display.Display.EVENT_UPDATE_DISPLAY,$bind(this,this._onUpdateDisplay));},__class__:com.workinman.display.Display});com.nick.kung_fu_panda.boss_beat_down.ui.displays={}
com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayCombo=function(pX,pY){com.workinman.display.Display.call(this,pX,pY);this._showing=false;this._pos.x=-250;if(com.workinman.utils.WorkinCloud.instance.getString(com.workinman.data.ConstantsCloud.STRING_REGION_ID)=="en")this._addElement(new com.workinman.display.Element({asset:"combo_text_en",x:0,y:0}));else{this._addElement(new com.workinman.display.Element({asset:"round_text_back",x:55,y:5}));this._addElement(new com.workinman.display.TextLocalized(0,20,"combo","",{origin:new com.workinman.math.WorkinPoint(0,0)}));}
var combo=com.workinman.utils.WorkinCloud.instance.getInt(this._updateValue());this._textNum=this._addElement(new com.workinman.display.TextBase(190,25,Std.string(combo),com.workinman.utils.WorkinCloud.instance._getLocalize().getData("combo")._getFontName(),{origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._refresh();};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayCombo"]=com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayCombo;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayCombo.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","displays","DisplayCombo"];com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayCombo.__super__=com.workinman.display.Display;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayCombo.prototype=$extend(com.workinman.display.Display.prototype,{dispose:function(){com.workinman.display.Display.prototype.dispose.call(this);this._textNum=null;},_updateValue:function(){return com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_COMBO;},_refresh:function(){var combo=com.workinman.utils.WorkinCloud.instance.getInt(this._updateValue());if(combo<=0&&this._showing){this._showing=false;com.workinman.math.tween.WorkinTweener._getInstance().tween(this._pos,.25,{x:-250},null,null,false).ease(com.workinman.math.tween.PennerManager.EASE_OUT);}else if(combo>0&&!this._showing){this._showing=true;com.workinman.math.tween.WorkinTweener._getInstance().tween(this._pos,.25,{x:0},null,null,false).ease(com.workinman.math.tween.PennerManager.EASE_OUT);}
this._textNum._setText(Std.string(combo));},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayCombo});com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayComboBonus=function(pX,pY,pTimer){com.workinman.display.Display.call(this,pX,pY);this._render.scaleX=0;this._render.scaleY=0;this._delayTimer=pTimer;this._addElement(new com.workinman.display.TextLocalized(0,0,"combo_bonus",null,{origin:new com.workinman.math.WorkinPoint(1,0)}));this._comboBonus=com.workinman.utils.WorkinCloud.instance.getInt(this._updateValue())*100;console.log("highest combo : "+com.workinman.utils.WorkinCloud.instance.getInt(this._updateValue()));this._textNum=this._addElement(new com.workinman.display.TextBase(100,-5,Std.string(this._comboBonus),com.workinman.utils.WorkinCloud.instance._getLocalize().getData("combo_bonus")._getFontName(),{origin:new com.workinman.math.WorkinPoint(1,.5)}));this._textNum._setText(Std.string(this._comboBonus));this._refresh();};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayComboBonus"]=com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayComboBonus;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayComboBonus.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","displays","DisplayComboBonus"];com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayComboBonus.__super__=com.workinman.display.Display;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayComboBonus.prototype=$extend(com.workinman.display.Display.prototype,{dispose:function(){com.workinman.display.Display.prototype.dispose.call(this);this._textNum=null;},_updateValue:function(){return com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HIGHEST_COMBO;},_refresh:function(){},_onDisplayed:function(){com.workinman.utils.WorkinCloud.instance.modifyInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SCORE,this._comboBonus);com.workinman.math.tween.WorkinTweener._getInstance().stop(this._render);com.workinman.utils.WorkinCloud.instance._getSound().playSound("score_post");},update:function(dt){com.workinman.display.Display.prototype.update.call(this,dt);if(this._delayTimer>0){this._delayTimer-=dt;if(this._delayTimer<=0){this._delayTimer=0;com.workinman.math.tween.WorkinTweener._getInstance().tween(this._render,.25,{scaleX:1,scaleY:1},null,null,false).ease(com.workinman.math.tween.PennerManager.EASE_ELASTIC_OUT).delay(.25).onComplete($bind(this,this._onDisplayed));}}},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayComboBonus});com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth=function(pX,pY,pRegistration,inDisplayAt){if(inDisplayAt==null)inDisplayAt=0;this._displayAt=3;this._displayAt=inDisplayAt;com.workinman.display.Display.call(this,pX,pY,"health_icon",pRegistration);this._refresh();};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth"]=com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","displays","DisplayHealth"];com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth.__super__=com.workinman.display.Display;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth.prototype=$extend(com.workinman.display.Display.prototype,{_updateValue:function(){return com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH;},_refresh:function(){var health=com.workinman.utils.WorkinCloud.instance.getFloat(this._updateValue());health-=this._displayAt;if(health<0)this.setTexture("health_icon_x");else this.setTexture("health_icon");},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth});com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayLoadingProgress=function(pX,pY){com.workinman.display.Display.call(this,pX,pY,"",new com.workinman.math.WorkinPoint(0,0.5));this._addElement(new com.workinman.display.Element({asset:"loading_bar_outline",x:-2,y:-2}));this._bar=this._addElement(new com.workinman.display.Element({asset:"loading_bar"}));this._bar._getRenderable().scaleX=0;};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayLoadingProgress"]=com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayLoadingProgress;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayLoadingProgress.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","displays","DisplayLoadingProgress"];com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayLoadingProgress.__super__=com.workinman.display.Display;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayLoadingProgress.prototype=$extend(com.workinman.display.Display.prototype,{dispose:function(){com.workinman.display.Display.prototype.dispose.call(this);this._bar=null;},_updateValue:function(){return com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_LOADING_PROGRESS;},_refresh:function(){var load=com.workinman.utils.WorkinCloud.instance.getInt(this._updateValue());this._bar._getRenderable().scaleX=load/100;},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayLoadingProgress});com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayOpponentHealth=function(pX,pY,pAsset,pRegistration,inDisplayAt){if(inDisplayAt==null)inDisplayAt=0;if(pAsset==null)pAsset="";this._displayAt=3;this._displayAt=inDisplayAt;com.workinman.display.Display.call(this,pX,pY,null,pRegistration);this._addElement(new com.workinman.display.Element({asset:"dummy_health_bg_bar"}));if(com.workinman.utils.WorkinCloud.instance.getString(com.workinman.data.ConstantsCloud.STRING_REGION_ID)=="en")this._addElement(new com.workinman.display.Element({asset:"dummy_health_text",x:-10,y:10}));else{this._addElement(new com.workinman.display.TextLocalized(10,10,"dummy","",{origin:new com.workinman.math.WorkinPoint(0,0)}));this._addElement(new com.workinman.display.TextLocalized(15,35,"health","",{origin:new com.workinman.math.WorkinPoint(0,0)}));}
this._bar=this._addElement(new com.workinman.display.Element({asset:"dummy_health_bar",x:143,y:33}));this._refresh();};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayOpponentHealth"]=com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayOpponentHealth;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayOpponentHealth.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","displays","DisplayOpponentHealth"];com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayOpponentHealth.__super__=com.workinman.display.Display;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayOpponentHealth.prototype=$extend(com.workinman.display.Display.prototype,{dispose:function(){com.workinman.display.Display.prototype.dispose.call(this);this._bar=null;},_onSkadooshModeEnd:function(){this._bar.setTexture("dummy_health_bar");},_onSkadooshMode:function(inEvent){this._bar.setTexture("skadoosh_bar");this._bar._getRenderable().scaleX=1;this._skadooshTimer=5;},_removeEventListeners:function(){com.workinman.display.Display.prototype._removeEventListeners.call(this);com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_SKADOOSH_START,$bind(this,this._onSkadooshMode));},_addEventListeners:function(){com.workinman.display.Display.prototype._addEventListeners.call(this);com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_SKADOOSH_START,$bind(this,this._onSkadooshMode));},_updateValue:function(){return com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT;},_onUpdateDisplay:function(inEvent){com.workinman.display.Display.prototype._onUpdateDisplay.call(this,inEvent);},update:function(dt){if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_PAUSED))return;com.workinman.display.Display.prototype.update.call(this,dt);if(this._skadooshTimer>0){this._skadooshTimer-=dt;if(this._skadooshTimer<0){this._skadooshTimer=0;this._bar._getRenderable().scaleX=0;this._onSkadooshModeEnd();}
this._bar._getRenderable().scaleX=this._skadooshTimer/5;}},_refresh:function(){var health=com.workinman.utils.WorkinCloud.instance.getFloat(this._updateValue());if(health<0)health=0;var maxHealth=com.workinman.utils.WorkinCloud.instance.getFloat(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT_MAX);this._bar._getRenderable().scaleX=health/maxHealth;},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayOpponentHealth});com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayRound=function(pX,pY){com.workinman.display.Display.call(this,pX,pY);this._showing=false;this._pos.y=-100;this._displayTimer=0;if(com.workinman.utils.WorkinCloud.instance.getString(com.workinman.data.ConstantsCloud.STRING_REGION_ID)=="en")this._addElement(new com.workinman.display.Element({asset:"round_text_back_en",x:0,y:0}));else{this._addElement(new com.workinman.display.Element({asset:"round_text_back",x:0,y:0}));this._addElement(new com.workinman.display.TextLocalized(5,20,"round","",{origin:new com.workinman.math.WorkinPoint(0,0)}));}
var round=com.workinman.utils.WorkinCloud.instance.getInt(this._updateValue());this._textNum=this._addElement(new com.workinman.display.TextBase(140,20,Std.string(round),com.workinman.utils.WorkinCloud.instance._getLocalize().getData("round")._getFontName(),{origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._refresh();};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayRound"]=com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayRound;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayRound.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","displays","DisplayRound"];com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayRound.__super__=com.workinman.display.Display;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayRound.prototype=$extend(com.workinman.display.Display.prototype,{dispose:function(){com.workinman.display.Display.prototype.dispose.call(this);this._textNum=null;},_updateValue:function(){return com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_ROUND;},update:function(dt){if(this._displayTimer>0){this._displayTimer-=dt;if(this._displayTimer<=0){this._displayTimer=0;com.workinman.math.tween.WorkinTweener._getInstance().tween(this._pos,.15,{y:-100},null,null,false).ease(com.workinman.math.tween.PennerManager.EASE_OUT);}}},_refresh:function(){var round=com.workinman.utils.WorkinCloud.instance.getInt(this._updateValue());console.log("show round");com.workinman.math.tween.WorkinTweener._getInstance().tween(this._pos,.15,{y:80},null,null,false).ease(com.workinman.math.tween.PennerManager.EASE_OUT);this._textNum._setText(Std.string(round));this._displayTimer=3;},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayRound});com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScore=function(pX,pY){com.workinman.display.Display.call(this,pX,pY);if(com.workinman.utils.WorkinCloud.instance.getString(com.workinman.data.ConstantsCloud.STRING_REGION_ID)=="en")this._addElement(new com.workinman.display.Element({asset:"score_text_back",x:0,y:0}));else{this._addElement(new com.workinman.display.Element({asset:"round_text_back",x:0,y:0}));this._addElement(new com.workinman.display.TextLocalized(80,60,"score_in_game","",{origin:new com.workinman.math.WorkinPoint(0,0)}));}
var score=com.workinman.utils.WorkinCloud.instance.getInt(this._updateValue());this._textNum=this._addElement(new com.workinman.display.TextBase(50,20,Std.string(score),com.workinman.utils.WorkinCloud.instance._getLocalize().getData("score")._getFontName(),{origin:new com.workinman.math.WorkinPoint(1,.5)}));this._refresh();};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScore"]=com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScore;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScore.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","displays","DisplayScore"];com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScore.__super__=com.workinman.display.Display;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScore.prototype=$extend(com.workinman.display.Display.prototype,{dispose:function(){com.workinman.display.Display.prototype.dispose.call(this);this._textNum=null;},_updateValue:function(){return com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SCORE;},_refresh:function(){var score=com.workinman.utils.WorkinCloud.instance.getInt(this._updateValue());this._textNum._setText(Std.string(score));},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScore});com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScoreStatic=function(pX,pY,pTimer){com.workinman.display.Display.call(this,pX,pY);this._render.scaleX=0;this._render.scaleY=0;this._delayTimer=pTimer;this._addElement(new com.workinman.display.TextLocalized(0,0,"score_summary",null,{origin:new com.workinman.math.WorkinPoint(1,0)}));var score=com.workinman.utils.WorkinCloud.instance.getInt(this._updateValue());this._textNum=this._addElement(new com.workinman.display.TextBase(100,-5,Std.string(score),com.workinman.utils.WorkinCloud.instance._getLocalize().getData("score_summary")._getFontName(),{origin:new com.workinman.math.WorkinPoint(1,.5)}));this._textNum._setText(Std.string(score));this._refresh();};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScoreStatic"]=com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScoreStatic;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScoreStatic.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","displays","DisplayScoreStatic"];com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScoreStatic.__super__=com.workinman.display.Display;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScoreStatic.prototype=$extend(com.workinman.display.Display.prototype,{dispose:function(){com.workinman.display.Display.prototype.dispose.call(this);this._textNum=null;},_updateValue:function(){return com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SCORE;},_refresh:function(){},_onDisplayed:function(){com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SCORE_POOL,com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SCORE));com.workinman.math.tween.WorkinTweener._getInstance().stop(this._render);com.workinman.utils.WorkinCloud.instance._getSound().playSound("score_post");},update:function(dt){com.workinman.display.Display.prototype.update.call(this,dt);if(this._delayTimer>0){this._delayTimer-=dt;if(this._delayTimer<=0){this._delayTimer=0;com.workinman.math.tween.WorkinTweener._getInstance().tween(this._render,.25,{scaleX:1,scaleY:1},null,null,false).ease(com.workinman.math.tween.PennerManager.EASE_ELASTIC_OUT).delay(.25).onComplete($bind(this,this._onDisplayed));}}},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScoreStatic});com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScoreSummary=function(pX,pY,pTimer){com.workinman.display.Display.call(this,pX,pY);this._render.scaleX=0;this._render.scaleY=0;this._delayTimer=pTimer;this._scoreToAdd=com.workinman.utils.WorkinCloud.instance.getInt(this._updateValue());this._addElement(new com.workinman.display.TextLocalized(0,0,"total_score",null,{origin:new com.workinman.math.WorkinPoint(1,0)}));this._currentScore=com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SCORE);this._textNum=this._addElement(new com.workinman.display.TextBase(100,-5,Std.string(this._currentScore),com.workinman.utils.WorkinCloud.instance._getLocalize().getData("total_score")._getFontName(),{origin:new com.workinman.math.WorkinPoint(1,.5)}));this._refresh();};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScoreSummary"]=com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScoreSummary;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScoreSummary.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","displays","DisplayScoreSummary"];com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScoreSummary.__super__=com.workinman.display.Display;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScoreSummary.prototype=$extend(com.workinman.display.Display.prototype,{dispose:function(){com.workinman.display.Display.prototype.dispose.call(this);this._textNum=null;},_updateValue:function(){return com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SCORE_POOL;},_refresh:function(){var score=com.workinman.utils.WorkinCloud.instance.getInt(this._updateValue());this._scoreToAdd+=score;},_onDisplayed:function(){this._currentScore=com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SCORE);this._textNum._setText(Std.string(this._currentScore));com.workinman.math.tween.WorkinTweener._getInstance().stop(this._render);com.workinman.utils.WorkinCloud.instance._getSound().playSound("score_post");com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_SUMMARY_COMPLETE));com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ROUND_LOADED));},update:function(dt){com.workinman.display.Display.prototype.update.call(this,dt);if(this._delayTimer>0){this._delayTimer-=dt;if(this._delayTimer<=0){this._delayTimer=0;com.workinman.math.tween.WorkinTweener._getInstance().tween(this._render,.25,{scaleX:1,scaleY:1},null,null,false).ease(com.workinman.math.tween.PennerManager.EASE_ELASTIC_OUT).delay(.25).onComplete($bind(this,this._onDisplayed));}}},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScoreSummary});com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplaySkadooshBonus=function(pX,pY,pTimer){com.workinman.display.Display.call(this,pX,pY);this._render.scaleX=0;this._render.scaleY=0;this._delayTimer=pTimer;this._addElement(new com.workinman.display.TextLocalized(0,0,"skadoosh_bonus",null,{origin:new com.workinman.math.WorkinPoint(1,0)}));this._skadooshBonus=com.workinman.utils.WorkinCloud.instance.getInt(this._updateValue())*100;this._textNum=this._addElement(new com.workinman.display.TextBase(100,-5,Std.string(this._skadooshBonus),com.workinman.utils.WorkinCloud.instance._getLocalize().getData("skadoosh_bonus")._getFontName(),{origin:new com.workinman.math.WorkinPoint(1,.5)}));this._textNum._setText(Std.string(this._skadooshBonus));this._refresh();};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplaySkadooshBonus"]=com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplaySkadooshBonus;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplaySkadooshBonus.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","displays","DisplaySkadooshBonus"];com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplaySkadooshBonus.__super__=com.workinman.display.Display;com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplaySkadooshBonus.prototype=$extend(com.workinman.display.Display.prototype,{dispose:function(){com.workinman.display.Display.prototype.dispose.call(this);this._textNum=null;},_updateValue:function(){return com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SKADOOSH;},_refresh:function(){},_onDisplayed:function(){com.workinman.utils.WorkinCloud.instance.modifyInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SCORE,this._skadooshBonus);com.workinman.math.tween.WorkinTweener._getInstance().stop(this._render);com.workinman.utils.WorkinCloud.instance._getSound().playSound("score_post");},update:function(dt){com.workinman.display.Display.prototype.update.call(this,dt);if(this._delayTimer>0){this._delayTimer-=dt;if(this._delayTimer<=0){this._delayTimer=0;com.workinman.math.tween.WorkinTweener._getInstance().tween(this._render,.25,{scaleX:1,scaleY:1},null,null,false).ease(com.workinman.math.tween.PennerManager.EASE_ELASTIC_OUT).delay(.25).onComplete($bind(this,this._onDisplayed));}}},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplaySkadooshBonus});com.nick.kung_fu_panda.boss_beat_down.ui.screens={}
com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase=function(pId,pAssetId,pData){this._STATE_SUSPENDED="suspend";this._STATE_OPENED="opened";this._STATE_OUT="out";this._STATE_IN="in";this.id=pId;com.workinman.display.Element.call(this,{asset:pAssetId});this._clickWall=new flambe.Entity();var tSprite=new flambe.display.FillSprite(16711680,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_WIDTH,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT);tSprite.alpha.set__(0);this._clickWall.add(tSprite);this._entity.addChild(this._clickWall);this._entity.addChild(this._textureEntity);this._buildButtons();this.flagDispose=false;this._flagStateCompleteTemp=false;this._flagStateAnimationComplete=false;this._states=new Array();this._generateStates();this._stateIndex=this._states.length+2;this._setFirstState();};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","ScreenBase"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.__super__=com.workinman.display.Element;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype=$extend(com.workinman.display.Element.prototype,{_onStateComplete:function(){this._flagStateCompleteTemp=false;if(this._states[this._stateIndex].outFunc!="")com.workinman.utils.WorkinCloud.instance.log("[ScreenBase](_onStateComplete) Out Func not supported in HTML5 yet");switch(this._states[this._stateIndex].actionOnComplete){case com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData.ACTION_STOP:break;case com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData.ACTION_OPENED:this._setOpenedState();this._dispatcher.dispatchEvent(new com.workinman.events.WMEventScreenOut(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.OUTPUT_OPENED,this.id));break;case com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData.ACTION_CLOSED:this.setFlagDispose();this._dispatcher.dispatchEvent(new com.workinman.events.WMEventScreenOut(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.OUTPUT_CLOSED,this.id));break;case com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData.ACTION_NEW_STATE:this._setState(this._states[this._stateIndex].actionData);break;case com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData.ACTION_EVENT:this._dispatcher.dispatchEvent(new com.workinman.events.WMEvent(this._states[this._stateIndex].actionData));break;case com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData.ACTION_FLOW:this._doFlowEvent(this._states[this._stateIndex].actionData);break;default:}},_findStateIndex:function(pId){var i=this._states.length-1;while(i>=0){if(this._states[i].id==pId)return i;i--;}
return-1;},getState:function(){return this._states[this._stateIndex].id;},_setState:function(pStateId,pForceReset){if(pForceReset==null)pForceReset=false;var tStateIndex=this._findStateIndex(pStateId);if(tStateIndex<0){com.workinman.utils.WorkinCloud.instance.log("[ScreenBase](_setState) ERROR : State >"+pStateId+"< not found.");com.workinman.utils.WorkinCloud.instance.log("[ScreenBase](_setState) cancelling setState().");return;}
if(!pForceReset&&tStateIndex==this._stateIndex)return;this._flagStateCompleteTemp=false;this._flagStateAnimationComplete=false;this._stateIndex=tStateIndex;},_addState:function(pId,pAnim,pActionOnComplete,pActionData,pInFunc,pOutFunc){if(pOutFunc==null)pOutFunc="";if(pInFunc==null)pInFunc="";if(pActionData==null)pActionData="";if(pActionOnComplete==null)pActionOnComplete=0;this._states.push(new com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData(pId,pAnim,pActionOnComplete,pActionData,pInFunc,pOutFunc));},isClosing:function(){return this.getState()==this._STATE_OUT;},close:function(pPlayOutro){if(pPlayOutro==null)pPlayOutro=true;this.setFlagDispose();this._dispatcher.dispatchEvent(new com.workinman.events.WMEventScreenOut(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.OUTPUT_CLOSED,this.id));return;},suspend:function(){this._setState(this._STATE_SUSPENDED);},open:function(pPlayIntro){if(pPlayIntro==null)pPlayIntro=true;this._setOpenedState();this._dispatcher.dispatchEvent(new com.workinman.events.WMEventScreenOut(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.OUTPUT_OPENED,this.id));return;},dispose:function(){this._states=null;com.workinman.display.Element.prototype.dispose.call(this);},reset:function(){this._setFirstState();},handleInput:function(pEvent,pIsTopScreen){if(pIsTopScreen==null)pIsTopScreen=true;var tValid=true;switch(pEvent.input){case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_CLICK:switch(pEvent.phase){case 1:if(!this._onInputDown(pEvent.x,pEvent.y))tValid=false;break;case 2:if(!this._onInputMove(pEvent.x,pEvent.y))tValid=false;break;case 0:if(!this._onInputUp(pEvent.x,pEvent.y))tValid=false;break;}
break;default:if(!this._onInput(pEvent))tValid=false;}
return tValid;},update:function(dt){com.workinman.display.Element.prototype.update.call(this,dt);if(this._flagStateCompleteTemp)this._onStateComplete();},_doFlowEvent:function(pId){com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventFlow(pId));},_buildButtons:function(){},_onInput:function(pEvent){if(this.getState()!=this._STATE_OPENED)return false;return true;},_onInputMove:function(inX,inY){if(this.getState()!=this._STATE_OPENED)return false;return true;},_onInputUp:function(inX,inY){if(this.getState()!=this._STATE_OPENED)return false;return true;},_onInputDown:function(inX,inY){if(this.getState()!=this._STATE_OPENED)return false;return true;},_generateStates:function(){this._addState(this._STATE_IN,"in",com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData.ACTION_OPENED);this._addState(this._STATE_OUT,"out",com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData.ACTION_CLOSED);this._addState(this._STATE_OPENED,"open");this._addState(this._STATE_SUSPENDED,"suspend");},_setOpenedState:function(){this._setState(this._STATE_OPENED);},_setFirstState:function(){this._setState(this._STATE_IN);},setFlagDispose:function(){this.flagDispose=true;},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase,__properties__:$extend(com.workinman.display.Element.prototype.__properties__,{get_state:"getState"})});com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenCodeUnlock=function(pId,pAssetId,pData){if(pAssetId==null)pAssetId="";com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.call(this,pId,pAssetId,pData);this._addElement(new com.workinman.display.Element({asset:"menu_container",x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_WIDTH/2,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT/2,origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,110,"enter_code_header","",{origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,210,"enter_code","",{origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._addElement(new com.workinman.display.Element({asset:"combo_score_back",x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,y:275,origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._textField=this._addElement(new com.workinman.display.TextInput(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,275,"",com.workinman.utils.WorkinCloud.instance._getLocalize().getData("enter_code")._getFontName(),{origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._textResponse=this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,340,"",com.workinman.utils.WorkinCloud.instance._getLocalize().getData("enter_code")._getFontName(),{origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._textResponse._getRenderable().alpha=0;this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase(715,375,new com.workinman.math.WorkinPoint(0,0),"help_btn_back","help_btn_back","help_btn_back"))._getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.CLICK,$bind(this,this._onEventPlayClick));};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenCodeUnlock"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenCodeUnlock;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenCodeUnlock.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","ScreenCodeUnlock"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenCodeUnlock.__super__=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenCodeUnlock.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype,{_onCodeInput:function(inEvent){this._textResponse._getRenderable().alpha=1;if(inEvent._getData().string.toLowerCase()==com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.CODE_UNLOCK){com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_ENTER_CODE_CLOSE,true);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_CODE_UNLOCK,true);this._textResponse._setText("code_accept");}else this._textResponse._setText("invalid_code");},_removeEventListeners:function(){com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype._removeEventListeners.call(this);com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_INPUT_FIELD_ENTER,$bind(this,this._onCodeInput));},_addEventListeners:function(){com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype._addEventListeners.call(this);com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_INPUT_FIELD_ENTER,$bind(this,this._onCodeInput));},_onEventPlayClick:function(event){if(this.getState()!=this._STATE_OPENED)return;com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_CODE_SCREEN_OPEN,false);this._doFlowEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_ENTER_CODE_CLOSE);},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenCodeUnlock});com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenEndGame=function(pId,pAssetId,pData){if(pAssetId==null)pAssetId="";this._BLINK_TIME=1;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.call(this,pId,pAssetId,pData);this._blinkTimer=this._BLINK_TIME;this._score=new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScore(350,320);this._score.lock();this._addElement(this._score);if(com.workinman.utils.WorkinCloud.instance.getString(com.workinman.data.ConstantsCloud.STRING_REGION_ID)=="en")this._addElement(new com.workinman.display.Element({asset:"end_screen_text",x:160,y:60}));else{this._addElement(new com.workinman.display.TextLocalized(230,150,"game_over","",{origin:new com.workinman.math.WorkinPoint(0,0)}))._getRenderable().rotation=-15;this._addElement(new com.workinman.display.TextLocalized(250,250,"game_over_2","",{origin:new com.workinman.math.WorkinPoint(0,0)}))._getRenderable().rotation=-15;}
var tString;if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TOUCH_DEVICE))tString="tap_anywhere_again";else tString="click_anywhere_again";this._textClickToPlay=this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT-80,tString,"",{origin:new com.workinman.math.WorkinPoint(.5,.5)}));};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenEndGame"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenEndGame;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenEndGame.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","ScreenEndGame"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenEndGame.__super__=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenEndGame.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype,{_onInputDown:function(inX,inY){if(this.getState()!=this._STATE_OPENED)return false;if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_INPUT_LOCK))return true;this._doFlowEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_INPUT_LOCK,true);return false;},update:function(dt){com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype.update.call(this,dt);this._blinkTimer-=dt;if(this._blinkTimer<=0){if(this._textClickToPlay._getRenderable().alpha==0){this._blinkTimer=this._BLINK_TIME;this._textClickToPlay._getRenderable().alpha=1;}else{this._blinkTimer=this._BLINK_TIME/2;this._textClickToPlay._getRenderable().alpha=0;}}},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenEndGame});com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenEndGameWin=function(pId,pAssetId,pData){if(pAssetId==null)pAssetId="";this._BLINK_TIME=1;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.call(this,pId,pAssetId,pData);this._blinkTimer=this._BLINK_TIME;this._score=new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScore(550,320);this._score.lock();this._addElement(this._score);if(com.workinman.utils.WorkinCloud.instance.getString(com.workinman.data.ConstantsCloud.STRING_REGION_ID)=="en")this._addElement(new com.workinman.display.Element({asset:"kung_fu_panda_game_win",x:380,y:60}));else{this._addElement(new com.workinman.display.TextLocalized(580,60,"game_win","",{origin:new com.workinman.math.WorkinPoint(0,0)}));this._addElement(new com.workinman.display.TextLocalized(480,150,"game_win_2","",{origin:new com.workinman.math.WorkinPoint(0,0)}));}
var tString;if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TOUCH_DEVICE))tString="tap_anywhere_again";else tString="click_anywhere_again";this._textClickToPlay=this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT-80,tString,"",{origin:new com.workinman.math.WorkinPoint(.5,.5)}));};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenEndGameWin"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenEndGameWin;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenEndGameWin.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","ScreenEndGameWin"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenEndGameWin.__super__=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenEndGameWin.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype,{_onInputDown:function(inX,inY){if(this.getState()!=this._STATE_OPENED)return false;if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_INPUT_LOCK))return true;this._doFlowEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_INPUT_LOCK,true);return false;},update:function(dt){com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype.update.call(this,dt);this._blinkTimer-=dt;if(this._blinkTimer<=0){if(this._textClickToPlay._getRenderable().alpha==0){this._blinkTimer=this._BLINK_TIME;this._textClickToPlay._getRenderable().alpha=1;}else{this._blinkTimer=this._BLINK_TIME/2;this._textClickToPlay._getRenderable().alpha=0;}}},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenEndGameWin});com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGameplayHUD=function(pId,pAssetId,pData){if(pAssetId==null)pAssetId="";com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.call(this,pId,pAssetId,pData);this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayOpponentHealth(0,0));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayRound(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-98.5,0));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScore(0,80));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayCombo(0,180));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_WIDTH-10,10,new com.workinman.math.WorkinPoint(1,0),"pause_btn_up","pause_btn_up","pause_btn_down"))._getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.CLICK,$bind(this,this._onEventPauseClick));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-115,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT-60,new com.workinman.math.WorkinPoint(.5,.5),1));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT-60,new com.workinman.math.WorkinPoint(.5,.5),2));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X+115,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT-60,new com.workinman.math.WorkinPoint(.5,.5),3));if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_CODE_UNLOCK)){com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_MAX,5);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH,5);this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-230,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT-60,new com.workinman.math.WorkinPoint(.5,.5),1));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-115,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT-60,new com.workinman.math.WorkinPoint(.5,.5),2));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT-60,new com.workinman.math.WorkinPoint(.5,.5),3));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X+115,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT-60,new com.workinman.math.WorkinPoint(.5,.5),4));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X+230,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT-60,new com.workinman.math.WorkinPoint(.5,.5),5));}else{this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-115,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT-60,new com.workinman.math.WorkinPoint(.5,.5),1));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT-60,new com.workinman.math.WorkinPoint(.5,.5),2));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayHealth(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X+115,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT-60,new com.workinman.math.WorkinPoint(.5,.5),3));}};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGameplayHUD"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGameplayHUD;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGameplayHUD.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","ScreenGameplayHUD"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGameplayHUD.__super__=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGameplayHUD.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype,{_onEventPauseClick:function(event){if(this.getState()!=this._STATE_OPENED)return;this._doFlowEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_MENU);},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGameplayHUD});com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGameplayMenu=function(pId,pAssetId,pData){if(pAssetId==null)pAssetId="";com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.call(this,pId,pAssetId,pData);this._addElement(new com.workinman.display.Element({asset:"menu_container",x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_WIDTH/2,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT/2,origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X+100,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y-55,new com.workinman.math.WorkinPoint(.5,.5),"menu_btn_help","menu_btn_help","menu_btn_help","",.9))._getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.CLICK,$bind(this,this._onEventHelpClick));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-100,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y-55,new com.workinman.math.WorkinPoint(.5,.5),"menu_btn_resume","menu_btn_resume","menu_btn_resume","",.9))._getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.CLICK,$bind(this,this._onEventResumeClick));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonSoundToggle(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-110,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y+120,new com.workinman.math.WorkinPoint(.5,.5),["menu_btn_sound_on","menu_btn_sound_on","menu_btn_sound_on"],["menu_btn_sound_off","menu_btn_sound_off","menu_btn_sound_off"]))._getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.CLICK,$bind(this,this._onEventSoundToggleClick));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X+110,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y+120,new com.workinman.math.WorkinPoint(.5,.5),"menu_btn_quit","menu_btn_quit","menu_btn_quit"))._getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.CLICK,$bind(this,this._onEventQuitClick));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,110,"menu","",{origin:new com.workinman.math.WorkinPoint(.5,.5)}));};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGameplayMenu"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGameplayMenu;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGameplayMenu.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","ScreenGameplayMenu"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGameplayMenu.__super__=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGameplayMenu.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype,{_removeEventListeners:function(){com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype._removeEventListeners.call(this);},_addEventListeners:function(){com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype._addEventListeners.call(this);},_onEventQuitClick:function(event){if(this.getState()!=this._STATE_OPENED)return;this._doFlowEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT);},_onEventResumeClick:function(event){console.log("[ScreenGameplayMenu] (_onEventResumeClick)  : "+this.getState()+" = "+this._STATE_OPENED);if(this.getState()!=this._STATE_OPENED)return;this._doFlowEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE);},_onEventSoundToggleClick:function(event){console.log("[ScreenGameplayMenu] (_onEventSoundToggleClick)  : "+this.getState()+" = "+this._STATE_OPENED);if(this.getState()!=this._STATE_OPENED)return;},_onEventHelpClick:function(event){console.log("[ScreenGameplayMenu] (_onEventHelpClick)  : "+this.getState()+" = "+this._STATE_OPENED);if(this.getState()!=this._STATE_OPENED)return;this._doFlowEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP);},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGameplayMenu});com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGeneric=function(pId,pAssetId,pData){if(pAssetId==null)pAssetId="";com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.call(this,pId,pAssetId,pData);this._flagHasSpaceAction=false;};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGeneric"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGeneric;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGeneric.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","ScreenGeneric"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGeneric.__super__=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGeneric.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype,{_onInputMove:function(inX,inY){return false;},_onInputUp:function(inX,inY){return false;},_onInputDown:function(inX,inY){return false;},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenGeneric});com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenHelp=function(pId,pAssetId,pData){if(pAssetId==null)pAssetId="";com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.call(this,pId,pAssetId,pData);this._addElement(new com.workinman.display.Element({asset:"menu_container",x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_WIDTH/2,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT/2,origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,110,"help","",{origin:new com.workinman.math.WorkinPoint(.5,.5)}));if(flambe.System.get_touch().get_supported()){this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-50,200,"help_1_mobile_control","",{origin:new com.workinman.math.WorkinPoint(1,.5)}));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,200,"help_1_mobile","",{origin:new com.workinman.math.WorkinPoint(0,.5)}));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-50,280,"help_2_mobile_control","",{origin:new com.workinman.math.WorkinPoint(1,.5)}));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,280,"help_2_mobile","",{origin:new com.workinman.math.WorkinPoint(0,.5)}));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-50,360,"help_3_mobile_control","",{origin:new com.workinman.math.WorkinPoint(1,.5)}));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,360,"help_3_mobile","",{origin:new com.workinman.math.WorkinPoint(0,.5)}));}else{this._addElement(new com.workinman.display.Element({asset:"help_arrow",x:310,y:200,origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._addElement(new com.workinman.display.Element({asset:"help_arrow",x:230,y:200,scale:-1,origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-50,200,"help_1_keyboard","",{origin:new com.workinman.math.WorkinPoint(0,.5)}));this._addElement(new com.workinman.display.Element({asset:"help_arrow",x:270,y:280,rot:90,origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-50,280,"help_3_keyboard","",{origin:new com.workinman.math.WorkinPoint(0,.5)}));this._addElement(new com.workinman.display.Element({asset:"help_space",x:165,y:360,origin:new com.workinman.math.WorkinPoint(0,.5)}));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-50,360,"help_4_keyboard","",{origin:new com.workinman.math.WorkinPoint(0,.5)}));}
this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase(715,375,new com.workinman.math.WorkinPoint(0,0),"help_btn_back","help_btn_back","help_btn_back"))._getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.CLICK,$bind(this,this._onEventPlayClick));};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenHelp"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenHelp;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenHelp.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","ScreenHelp"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenHelp.__super__=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenHelp.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype,{_onEventPlayClick:function(event){if(this.getState()!=this._STATE_OPENED)return;this._doFlowEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_HELP_CLOSE);},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenHelp});com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenLoading=function(pId,pAssetId,pData){if(pAssetId==null)pAssetId="";com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.call(this,pId,pAssetId,pData);this._timerSpin=.25;if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_LOCAL_TEXT_LOADED)){this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayLoadingProgress(130,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT-75));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,375,"loading","",{origin:new com.workinman.math.WorkinPoint(.5,.5)}))._getRenderable().rotation=-3;this._textAdded=true;}};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenLoading"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenLoading;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenLoading.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","ScreenLoading"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenLoading.__super__=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenLoading.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype,{dispose:function(){com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype.dispose.call(this);},update:function(dt){com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype.update.call(this,dt);if(!this._textAdded&&com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_LOCAL_TEXT_LOADED)){this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayLoadingProgress(130,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT-75));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,375,"loading","",{origin:new com.workinman.math.WorkinPoint(.5,.5)}))._getRenderable().rotation=-3;this._textAdded=true;}},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenLoading});com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenPauseAlert=function(pId,pAssetId,pData){if(pAssetId==null)pAssetId="";com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.call(this,pId,pAssetId,pData);this._alertBox=new flambe.display.FillSprite(0,Std["int"](com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_WIDTH),Std["int"](com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT));var tEnt=new flambe.Entity();tEnt.add(this._alertBox);this._textureEntity.addChild(tEnt);this._textAlert=this._addElement(new com.workinman.display.TextLocalized(50,50,"orientation_portrait","",{origin:new com.workinman.math.WorkinPoint(0,.5)}));};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenPauseAlert"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenPauseAlert;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenPauseAlert.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","ScreenPauseAlert"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenPauseAlert.__super__=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenPauseAlert.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype,{update:function(dt){com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype.update.call(this,dt);},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenPauseAlert});com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenQuitConfirm=function(pId,pAssetId,pData){com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.call(this,pId,pAssetId,pData);this._addElement(new com.workinman.display.Element({asset:"menu_container",x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_WIDTH/2,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT/2,origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,110,"quit","",{origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,225,"quit_confirm_header","",{origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonText(350,350,new com.workinman.math.WorkinPoint(.5,.5),"button_bg","button_bg","button_bg","",1,"yes"))._getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.CLICK,$bind(this,this._onYesClick));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonText(620,350,new com.workinman.math.WorkinPoint(.5,.5),"button_bg","button_bg","button_bg","",1,"no"))._getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.CLICK,$bind(this,this._onNoClick));};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenQuitConfirm"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenQuitConfirm;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenQuitConfirm.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","ScreenQuitConfirm"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenQuitConfirm.__super__=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenQuitConfirm.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype,{_onNoClick:function(event){if(this.getState()!=this._STATE_OPENED)return;this._doFlowEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO);},_onYesClick:function(event){if(this.getState()!=this._STATE_OPENED)return;this._doFlowEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES);},dispose:function(){com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype.dispose.call(this);},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenQuitConfirm});com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenRoundSummary=function(pId,pAssetId,pData){if(pAssetId==null)pAssetId="";com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.call(this,pId,pAssetId,pData);this._addElement(new com.workinman.display.Element({asset:"menu_container",x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_WIDTH/2,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT/2,origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,100,"level_up","",{origin:new com.workinman.math.WorkinPoint(.5,.5)}));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScoreStatic(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-30,200,.5));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayComboBonus(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-30,250,1));this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplaySkadooshBonus(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-30,300,1.5));this._score=new com.nick.kung_fu_panda.boss_beat_down.ui.displays.DisplayScoreSummary(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-30,400,2);this._score.lock();this._addElement(this._score);this._textFadeIn=true;this._textClickToPlay=this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,530,"","",{origin:new com.workinman.math.WorkinPoint(.5,.5),center:true,alpha:0}));this._readyToPlay=false;};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenRoundSummary"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenRoundSummary;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenRoundSummary.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","ScreenRoundSummary"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenRoundSummary.__super__=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenRoundSummary.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype,{_onEventRoundLoaded:function(inEvent){this._readyToPlay=true;if(this._textClickToPlay._getText()=="loading"){this._readyToPlay=true;if(com.workinman.utils.WorkinCloud.instance.getString(com.workinman.data.ConstantsCloud.STRING_REGION_ID)=="en")this._textClickToPlay._setText("click_to_continue");else this._textClickToPlay._setText("tap_to_continue");}},_onEventSummaryComplete:function(inEvent){if(this._readyToPlay){if(com.workinman.utils.WorkinCloud.instance.getString(com.workinman.data.ConstantsCloud.STRING_REGION_ID)=="en")this._textClickToPlay._setText("click_to_continue");else this._textClickToPlay._setText("tap_to_continue");}else this._textClickToPlay._setText("loading");},_removeEventListeners:function(){com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype._removeEventListeners.call(this);com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_SUMMARY_COMPLETE,$bind(this,this._onEventSummaryComplete));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ROUND_LOADED,$bind(this,this._onEventRoundLoaded));},_addEventListeners:function(){com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype._addEventListeners.call(this);com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_SUMMARY_COMPLETE,$bind(this,this._onEventSummaryComplete));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ROUND_LOADED,$bind(this,this._onEventRoundLoaded));},update:function(dt){com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype.update.call(this,dt);if(this._textFadeIn){if(this._textClickToPlay._getRenderable().alpha<1)this._textClickToPlay._getRenderable().alpha+=dt*2;else{this._textClickToPlay._getRenderable().alpha=1;this._textFadeIn=false;}}else if(this._textClickToPlay._getRenderable().alpha>0)this._textClickToPlay._getRenderable().alpha-=dt*2;else{this._textClickToPlay._getRenderable().alpha=0;this._textFadeIn=true;}},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenRoundSummary});com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenScreenshot=function(){}
$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenScreenshot"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenScreenshot;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenScreenshot.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","ScreenScreenshot"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenScreenshot.__super__=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenScreenshot.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype,{dispose:function(){com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype.dispose.call(this);},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenScreenshot});com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenSplash=function(pId,pAssetId,pData){if(pAssetId==null)pAssetId="";this._BLINK_TIME=1;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.call(this,pId,pAssetId,pData);this._blinkTimer=this._BLINK_TIME;if(com.workinman.utils.WorkinCloud.instance.getString(com.workinman.data.ConstantsCloud.STRING_REGION_ID)=="en"){this._addElement(new com.workinman.display.Element({asset:"splash_title",x:382,y:245}));this._addElement(new com.workinman.display.Element({asset:"splash_logo",x:10,y:10}));}else{this._addElement(new com.workinman.display.TextLocalized(10,10,"property1","",{origin:new com.workinman.math.WorkinPoint(0,0)}));this._addElement(new com.workinman.display.TextLocalized(20,30,"property2","",{origin:new com.workinman.math.WorkinPoint(0,0)}));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X+100,375,"title1","",{origin:new com.workinman.math.WorkinPoint(0,0)}));this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X+120,425,"title2","",{origin:new com.workinman.math.WorkinPoint(0,0)}));}
this._addElement(new com.workinman.display.Element({x:10,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT-50,asset:"nick_logo_tiny",origin:new com.workinman.math.WorkinPoint(0,1)}));var tString;if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TOUCH_DEVICE))tString="tap_anywhere";else tString="click_anywhere";this._textClickToPlay=this._addElement(new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT-20,tString,"",{origin:new com.workinman.math.WorkinPoint(.5,.5)}));tString=null;this._addElement(new com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonSoundToggle(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_WIDTH-10,10,new com.workinman.math.WorkinPoint(1,0),["menu_btn_sound_on","menu_btn_sound_on","menu_btn_sound_on"],["menu_btn_sound_off","menu_btn_sound_off","menu_btn_sound_off"]));};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenSplash"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenSplash;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenSplash.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","ScreenSplash"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenSplash.__super__=com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase;com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenSplash.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype,{_onInputDown:function(inX,inY){if(this.getState()!=this._STATE_OPENED||com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_CODE_SCREEN_OPEN))return false;if(inY<125)return false;this._doFlowEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_SPLASH_PLAY);return false;},update:function(dt){com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenBase.prototype.update.call(this,dt);this._blinkTimer-=dt;if(this._blinkTimer<=0){if(this._textClickToPlay._getRenderable().alpha==0){this._blinkTimer=this._BLINK_TIME;this._textClickToPlay._getRenderable().alpha=1;}else{this._blinkTimer=this._BLINK_TIME/2;this._textClickToPlay._getRenderable().alpha=0;}}},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.ScreenSplash});com.nick.kung_fu_panda.boss_beat_down.ui.screens.data={}
com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ChangeActionData=function(){}
$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ChangeActionData"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ChangeActionData;com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ChangeActionData.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","data","ChangeActionData"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ChangeActionData.prototype={_getAction:function(){return this._action;},_getChangeEvent:function(){return this._changeEvent;},_getScreenId:function(){return this._screenId;},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ChangeActionData,__properties__:{get_screenId:"_getScreenId",get_changeEvent:"_getChangeEvent",get_action:"_getAction"}}
com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenData=function(pId,pScreenClass,pAssetClassName,pLayer,pData){if(pLayer==null)pLayer=0;if(pAssetClassName==null)pAssetClassName="";this.id=pId;this.screenClass=pScreenClass;this.assetClassName=pAssetClassName;this.layer=pLayer;if(pData==null)this.data=new Hash();else this.data=pData;};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenData"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenData;com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenData.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","data","ScreenData"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenData.prototype={__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenData}
com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenQueueData=function(pScreenData,pOpenCondition,pOpenTestString){if(pOpenTestString==null)pOpenTestString="";this.screenData=pScreenData;this.openCondition=pOpenCondition;this.openTestString=pOpenTestString;};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenQueueData"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenQueueData;com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenQueueData.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","data","ScreenQueueData"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenQueueData.prototype={validateCondition:function(pCondition,pConditionString){if(pConditionString==null)pConditionString="";if(this.openCondition==pCondition)return this.openTestString==""||this.openTestString==pConditionString;return false;},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenQueueData}
com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData=function(pId,pAnim,pActionOnComplete,pactionData,pInFunc,pOutFunc){this.id=pId;this.animation=pAnim;this.actionOnComplete=pActionOnComplete;this.actionData=pactionData;this.inFunc=pInFunc;this.outFunc=pOutFunc;};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData"]=com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData;com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","screens","data","ScreenStateData"];com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData.prototype={__class__:com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData}
com.nick.kung_fu_panda.boss_beat_down.ui.transitions={}
com.nick.kung_fu_panda.boss_beat_down.ui.transitions.TransitionBase=function(pAssetId,pHiddenAtStart,pOutOnly,pTransitionId){if(pTransitionId==null)pTransitionId="";if(pOutOnly==null)pOutOnly=false;if(pHiddenAtStart==null)pHiddenAtStart=true;this._STATE_OUT=3;this._STATE_IDLE=2;this._STATE_IN=1;this._STATE_HIDDEN=0;this._transitionId=pTransitionId;this._flagOutOnly=pOutOnly;this.flagDispose=false;com.workinman.display.Element.call(this,{asset:pAssetId});if(pHiddenAtStart)this._setState(this._STATE_HIDDEN);else if(this._flagOutOnly)this._setState(this._STATE_OUT);else this._setState(this._STATE_IN);};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.ui.transitions.TransitionBase"]=com.nick.kung_fu_panda.boss_beat_down.ui.transitions.TransitionBase;com.nick.kung_fu_panda.boss_beat_down.ui.transitions.TransitionBase.__name__=["com","nick","kung_fu_panda","boss_beat_down","ui","transitions","TransitionBase"];com.nick.kung_fu_panda.boss_beat_down.ui.transitions.TransitionBase.__super__=com.workinman.display.Element;com.nick.kung_fu_panda.boss_beat_down.ui.transitions.TransitionBase.prototype=$extend(com.workinman.display.Element.prototype,{dispose:function(){com.workinman.display.Element.prototype.dispose.call(this);this._mc=null;},_setState:function(pState){this._state=pState;switch(this._state){case this._STATE_HIDDEN:this.hide();break;case this._STATE_IN:break;case this._STATE_IDLE:break;case this._STATE_OUT:break;}},show:function(){this._mc.set_visible(true);},hide:function(){this._mc.set_visible(false);},start:function(){this.show();this._setState(this._STATE_IN);},update:function(dt){com.workinman.display.Element.prototype.update.call(this,dt);},_getIsOutro:function(){return this._state==this._STATE_OUT;},__class__:com.nick.kung_fu_panda.boss_beat_down.ui.transitions.TransitionBase,__properties__:$extend(com.workinman.display.Element.prototype.__properties__,{get_isOutro:"_getIsOutro"})});com.nick.kung_fu_panda.boss_beat_down.world={}
com.nick.kung_fu_panda.boss_beat_down.world.World=function(pTimeline){this._STATE_PICKUP=9;this._STATE_POST_SKADOOSH=8;this._STATE_TUTORIAL=7;this._STATE_SCORE=6;this._STATE_SKADOOSH=5;this._STATE_GAMEPLAY=4;this._STATE_COUNTDOWN=3;this._STATE_COUNTDOWN_READY=2;this._STATE_DROP_OPPONENT=1;this._STATE_INITIALIZING=0;console.log("[World](new) Constructed!");console.log("[World] (new)");com.workinman.events.WMEventDispatcher.call(this);this._timeline=pTimeline;console.log("[World] element manager");this._elementManager=new com.workinman.display.ElementManager(this._timeline,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.FOCAL_LENGTH);this._elementManager.addLayer(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_BG);this._elementManager.addLayer(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_DUMMY);this._elementManager.addLayer(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_PLAYER);this._elementManager.addLayer(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_FG);this._screenShakeTimer=0;this._screenShakeMagnitude=0;this._comboTimer=0;this._roundReady=false;this._clickShouldExecute=false;this._clickDelay=0;this._pickups=new Array();this._effects=new Array();com.workinman.utils.WorkinCloud.instance.stack([$bind(this,this._initPools),$bind(this,this._initParticles),$bind(this,this._initPlayer),$bind(this,this._onGenerationComplete)]);this._setState(this._STATE_INITIALIZING);};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.world.World"]=com.nick.kung_fu_panda.boss_beat_down.world.World;com.nick.kung_fu_panda.boss_beat_down.world.World.__name__=["com","nick","kung_fu_panda","boss_beat_down","world","World"];com.nick.kung_fu_panda.boss_beat_down.world.World.__super__=com.workinman.events.WMEventDispatcher;com.nick.kung_fu_panda.boss_beat_down.world.World.prototype=$extend(com.workinman.events.WMEventDispatcher.prototype,{_onGenerationComplete:function(){com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_WORLD_GENERATION_COMPLETE));},_initPlayer:function(){console.log("building player");com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH,3);this._player=new com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo({x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,z:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.FOCAL_LENGTH,layer:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_PLAYER});this._elementManager.addElement(this._player);this._cameraVelocity=new com.workinman.math.WorkinPoint();this._tutorialText=new com.workinman.display.TextLocalized(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,440,"","",{layer:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_FG,origin:new com.workinman.math.WorkinPoint(.5,.5),center:true,alpha:0});this._elementManager.addElement(this._tutorialText);this._tutorialFadeIn=true;},_initParticles:function(){console.log("building background");this._elementManager.addElement(new com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D({x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,z:-10000,layer:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_BG,asset:"gameplay_bg",origin:new com.workinman.math.WorkinPoint(.5,1.16)},this._elementManager));this._elementManager.addElement(new com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D({x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,z:-1500,layer:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_BG,asset:"gameplay_mg",origin:new com.workinman.math.WorkinPoint(.5,.18)},this._elementManager));},_initPools:function(){this._poolManager=new com.workinman.display.PoolManager();},_onGameover:function(){com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_GAMEOVER,true);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_GAME_LOSE,true);},_spawnPickup:function(){console.log("spawn pickup");com.workinman.utils.WorkinCloud.instance.modifyInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PICKUPS,-1);this._pickups.push(this._elementManager.addElement(new com.nick.kung_fu_panda.boss_beat_down.world.elements.PickupDumplings({y:200,position:com.workinman.utils.WorkinUtils.getRandom(-1,1)},this._elementManager)));},handleInput:function(pEvent){if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_PAUSED))return;if(this._state==this._STATE_TUTORIAL)switch(this._tutorialText._getText()){case "tut_attack":case "tut_attack_mobile":switch(pEvent.input){case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_SPACE:this._clickShouldExecute=false;switch(pEvent.phase){case com.workinman.events.WMEventInput.PHASE_DOWN:com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_ATTACK_COMPLETE,true);this._setState(this._STATE_GAMEPLAY);this._tutorialFadeIn=true;this._tutorialText._getRenderable().alpha=0;this._player.attack();break;}
break;}
break;case "tut_dodge_1":switch(pEvent.input){case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_LEFT:switch(pEvent.phase){case com.workinman.events.WMEventInput.PHASE_DOWN:com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_1_COMPLETE,true);this._setState(this._STATE_GAMEPLAY);this._tutorialFadeIn=true;this._tutorialText._getRenderable().alpha=0;this._player.dodge(com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_LEFT);break;}
break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_RIGHT:switch(pEvent.phase){case com.workinman.events.WMEventInput.PHASE_DOWN:com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_1_COMPLETE,true);this._setState(this._STATE_GAMEPLAY);this._tutorialFadeIn=true;this._tutorialText._getRenderable().alpha=0;this._player.dodge(com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_RIGHT);break;}
break;}
break;case "tut_dodge_2":switch(pEvent.input){case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_SPACE:this._clickShouldExecute=false;switch(pEvent.phase){case com.workinman.events.WMEventInput.PHASE_DOWN:com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_2_COMPLETE,true);this._setState(this._STATE_GAMEPLAY);this._tutorialFadeIn=true;this._tutorialText._getRenderable().alpha=0;this._player.attack();break;}
break;}
break;case "tut_dodge_3":switch(pEvent.input){case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_DOWN:switch(pEvent.phase){case com.workinman.events.WMEventInput.PHASE_DOWN:com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_3_COMPLETE,true);this._setState(this._STATE_GAMEPLAY);this._tutorialFadeIn=true;this._tutorialText._getRenderable().alpha=0;this._player.dodge(com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_BACK);break;}
break;}
break;case "tut_dodge_4":switch(pEvent.input){case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_SPACE:this._clickShouldExecute=false;switch(pEvent.phase){case com.workinman.events.WMEventInput.PHASE_DOWN:com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_4_COMPLETE,true);this._setState(this._STATE_GAMEPLAY);this._tutorialFadeIn=true;this._tutorialText._getRenderable().alpha=0;break;}
break;}
break;case "tut_combo":switch(pEvent.input){case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_SPACE:this._clickShouldExecute=false;switch(pEvent.phase){case com.workinman.events.WMEventInput.PHASE_DOWN:com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_COMBO_COMPLETE,true);this._setState(this._STATE_GAMEPLAY);this._tutorialFadeIn=true;this._tutorialText._getRenderable().alpha=0;this._player.attack();break;}
break;}
break;case "tut_skadoosh":switch(pEvent.input){case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_SPACE:this._clickShouldExecute=false;switch(pEvent.phase){case com.workinman.events.WMEventInput.PHASE_DOWN:com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_SKADOOSH_COMPLETE,true);this._setState(this._STATE_SKADOOSH);this._tutorialFadeIn=true;this._tutorialText._getRenderable().alpha=0;this._player.attack();break;}
break;}
break;}else if(this._state==this._STATE_GAMEPLAY||this._state==this._STATE_SKADOOSH)switch(pEvent.input){case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_CLICK:this._clickShouldExecute=false;switch(pEvent.phase){case com.workinman.events.WMEventInput.PHASE_DOWN:if(pEvent.x>900&&pEvent.y<120)return;break;}
break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_SPACE:case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_UP:switch(pEvent.phase){case com.workinman.events.WMEventInput.PHASE_DOWN:if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_ATTACK_COMPLETE))this._player.attack();break;}
break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_LEFT:switch(pEvent.phase){case com.workinman.events.WMEventInput.PHASE_DOWN:if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_1_COMPLETE))this._player.dodge(com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_LEFT);break;}
break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_RIGHT:switch(pEvent.phase){case com.workinman.events.WMEventInput.PHASE_DOWN:if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_1_COMPLETE))this._player.dodge(com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_RIGHT);break;}
break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_DOWN:switch(pEvent.phase){case com.workinman.events.WMEventInput.PHASE_DOWN:if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_3_COMPLETE))this._player.dodge(com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_BACK);break;}
break;}else if(this._state==this._STATE_SCORE)switch(pEvent.input){case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_CLICK:this._clickShouldExecute=false;switch(pEvent.phase){case com.workinman.events.WMEventInput.PHASE_DOWN:console.log("State score : roundReady? "+com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_ROUND));if(this._roundReady){if(com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_ROUND)>=8)com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_GAME_WIN,true);else{this._setState(this._STATE_DROP_OPPONENT);com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventFlow(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_END_ROUND_CLOSE));}}
break;}
break;case com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_SPACE:switch(pEvent.phase){case com.workinman.events.WMEventInput.PHASE_DOWN:console.log("State score : roundReady? "+Std.string(this._roundReady));if(this._roundReady){if(com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_ROUND)>=8)com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_GAME_WIN,true);else{this._setState(this._STATE_DROP_OPPONENT);com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventFlow(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_END_ROUND_CLOSE));}}
break;}
break;}else return;},_unpause:function(){com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_PAUSED,false);},_pause:function(){com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_PAUSED,true);},_onUnpause:function(inEvent){this._unpause();},_onPause:function(inEvent){this._pause();},_screenShake:function(duration,magnitude){this._screenShakeTimer=duration;this._screenShakeMagnitude=magnitude;},_spawnEffect:function(pEffect){this._elementManager.addElement(pEffect);},_onOpAttack:function(inEvent){var hitLanded=false;if(this._player._getBattlePosition()==com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_POSITION_BACK){if(inEvent._getData().attackArray[com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_POSITION_MID]==com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP)hitLanded=true;}else if(inEvent._getData().attackArray[this._player._getBattlePosition()]>0)hitLanded=true;if(com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PICKUPS)>0){if(com.workinman.utils.WorkinUtils.getRandom(0,1)>.9)this._spawnPickup();}
if(hitLanded){com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_COMBO,0);this._comboTimer=0;this._player.hit();this._screenShake(.5,5);if(com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH)<=0){console.log("GAME OVER");this._onGameover();}}else{var localizeMod=com.workinman.utils.WorkinCloud.instance.getString(com.workinman.data.ConstantsCloud.STRING_REGION_ID)=="en"?"":"_localized";this._player.dodgeAttack();this._spawnEffect(new com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated({layer:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_FG,library:"flump_effects",movie:"effect_dodge_ani"+localizeMod,x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-80,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y-100,vX:com.workinman.utils.WorkinUtils.getRandom(-200,200),vY:com.workinman.utils.WorkinUtils.getRandom(-200,200)}));}},_onPoAttack:function(inEvent){var localizeMod=com.workinman.utils.WorkinCloud.instance.getString(com.workinman.data.ConstantsCloud.STRING_REGION_ID)=="en"?"":"_localized";if(this._opponent._getVulnerable()){console.log("opponent was vulnerable");this._player.hitLanded();if(this._state==this._STATE_SKADOOSH)com.workinman.utils.WorkinCloud.instance.modifyInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SKADOOSH,1);else{com.workinman.utils.WorkinCloud.instance.modifyInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_COMBO,1);if(com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_COMBO)>com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HIGHEST_COMBO)){com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HIGHEST_COMBO,com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_COMBO));console.log("max combo : "+com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HIGHEST_COMBO));}}
this._comboTimer=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.TIMER_COMBO;if(this._opponent.hit(inEvent._getData().damage,1,this._player._getDumplingStance())){if(this._state!=this._STATE_SKADOOSH)com.workinman.utils.WorkinCloud.instance.modifyInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SCORE,100*com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_COMBO));this._spawnEffect(new com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated({layer:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_FG,library:"flump_effects",movie:"effect_hit_ani"+localizeMod,x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-80,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y-100,origin:new com.workinman.math.WorkinPoint(.5,.5),vX:com.workinman.utils.WorkinUtils.getRandom(-200,200),vY:com.workinman.utils.WorkinUtils.getRandom(-200,200)}));}else{if(this._state!=this._STATE_SKADOOSH)com.workinman.utils.WorkinCloud.instance.modifyInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SCORE,10*com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_COMBO));this._spawnEffect(new com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated({layer:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_FG,library:"flump_effects",movie:"effect_hit_ani"+localizeMod,x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-80,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y-100,origin:new com.workinman.math.WorkinPoint(.5,.5),vX:com.workinman.utils.WorkinUtils.getRandom(-200,200),vY:com.workinman.utils.WorkinUtils.getRandom(-200,200)}));}
if(this._state!=this._STATE_SKADOOSH){if(com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT)<=0){this._opponent.finishingState();this._effects.push(this._elementManager.addElement(new com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectPickup({x:225,y:100})));this._setState(this._STATE_PICKUP);}}}else{console.log("opponent was not vulnerable");this._opponent.block();com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PO_COMBO,0);this._spawnEffect(new com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated({layer:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_FG,library:"flump_effects",movie:"effect_miss_ani"+localizeMod,x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X-80,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y-100,origin:new com.workinman.math.WorkinPoint(.5,.5),vX:com.workinman.utils.WorkinUtils.getRandom(-200,200),vY:com.workinman.utils.WorkinUtils.getRandom(-200,200)}));}},_onAttackAlert:function(inEvent){if(inEvent._getData().type==com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_SHALLOW){console.log("effect_caution_ani");this._elementManager.addElement(new com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated({layer:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_FG,library:"flump_effects",movie:"effect_caution_ani",lifetime:inEvent._getData().time,x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X+350*inEvent._getData().position-80,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,origin:new com.workinman.math.WorkinPoint(.5,.5)}));}else if(inEvent._getData().type==com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP){console.log("effect_caution_unblockable_ani");this._elementManager.addElement(new com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated({layer:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_FG,library:"flump_effects",movie:"effect_caution_unblockable_ani",lifetime:inEvent._getData().time,x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X+350*inEvent._getData().position-80,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,origin:new com.workinman.math.WorkinPoint(.5,.5)}));}},_onTutorialCombo:function(inEvent){this._tutorialText._setText("tut_combo");this._setState(this._STATE_TUTORIAL);},_onTutorialDodge4:function(inEvent){this._tutorialText._setText("tut_dodge_4");this._setState(this._STATE_TUTORIAL);},_onTutorialDodge3:function(inEvent){if(flambe.System.get_touch().get_supported())this._tutorialText._setText("tut_dodge_3_mobile");else this._tutorialText._setText("tut_dodge_3");this._setState(this._STATE_TUTORIAL);},_onTutorialDodge2:function(inEvent){if(flambe.System.get_touch().get_supported())this._tutorialText._setText("tut_dodge_2_mobile");else this._tutorialText._setText("tut_dodge_2");this._setState(this._STATE_TUTORIAL);},_onTutorialDodge1:function(inEvent){if(flambe.System.get_touch().get_supported())this._tutorialText._setText("tut_dodge_1_mobile");else this._tutorialText._setText("tut_dodge_1");this._setState(this._STATE_TUTORIAL);},_onNextRoundReady:function(inEvent){this._roundReady=true;},_onOpponentSkadooshed:function(inEvent){this._setState(this._STATE_POST_SKADOOSH);},_onPickup:function(inEvent){var _g=0,_g1=this._pickups;while(_g<_g1.length){var p=_g1[_g];++_g;if(p._getFieldPosition()==inEvent._getData().position){p.pickup();com.workinman.utils.WorkinCloud.instance.modifyInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PICKUPS,-1);com.workinman.utils.WorkinCloud.instance._getSound().playSound("power_up");this._player.dumplingStance(true);}}},_onDumplingEat:function(inEVent){com.workinman.utils.WorkinCloud.instance._getSound().playSound("lipsmack");com.workinman.utils.WorkinCloud.instance.modifyInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH,1);if(com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH)>com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_MAX))com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH,com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_MAX));},_onDumplingBurst:function(inEvent){com.workinman.utils.WorkinCloud.instance.modifyInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SCORE,1000);},_onPickupEnd:function(inEvent){console.log("SKADOOSH TUTORIAL! "+Std.string(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_SKADOOSH_COMPLETE)));if(!com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_SKADOOSH_COMPLETE)){this._tutorialText._setText("tut_skadoosh");this._setState(this._STATE_TUTORIAL);}else this._setState(this._STATE_SKADOOSH);},_onOpponentReady:function(inEvent){this._setState(this._STATE_COUNTDOWN_READY);},_onShake:function(inEvent){this._screenShake(.5,5);},_removeEventListeners:function(){com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_PAUSE,$bind(this,this._onPause));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_UNPAUSE,$bind(this,this._onUnpause));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_PO_ATTACK,$bind(this,this._onPoAttack));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OP_ATTACK,$bind(this,this._onOpAttack));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ATTACK_ALERT,$bind(this,this._onAttackAlert));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_DODGE_1,$bind(this,this._onTutorialDodge1));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_DODGE_2,$bind(this,this._onTutorialDodge2));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_DODGE_3,$bind(this,this._onTutorialDodge3));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_DODGE_4,$bind(this,this._onTutorialDodge4));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_COMBO,$bind(this,this._onTutorialCombo));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ROUND_LOADED,$bind(this,this._onNextRoundReady));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OPPONENT_SKADOOSHED,$bind(this,this._onOpponentSkadooshed));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_PICKUP,$bind(this,this._onPickup));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_PICKUP_DONE,$bind(this,this._onPickupEnd));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OPPONENT_READY,$bind(this,this._onOpponentReady));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_DUMPLING_EAT,$bind(this,this._onDumplingEat));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_DUMPLING_BURST,$bind(this,this._onDumplingBurst));com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_SCREEN_SHAKE,$bind(this,this._onShake));},_addEventListeners:function(){com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_PAUSE,$bind(this,this._onPause));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_UNPAUSE,$bind(this,this._onUnpause));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_PO_ATTACK,$bind(this,this._onPoAttack));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OP_ATTACK,$bind(this,this._onOpAttack));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ATTACK_ALERT,$bind(this,this._onAttackAlert));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_DODGE_1,$bind(this,this._onTutorialDodge1));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_DODGE_2,$bind(this,this._onTutorialDodge2));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_DODGE_3,$bind(this,this._onTutorialDodge3));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_DODGE_4,$bind(this,this._onTutorialDodge4));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_COMBO,$bind(this,this._onTutorialCombo));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ROUND_LOADED,$bind(this,this._onNextRoundReady));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OPPONENT_SKADOOSHED,$bind(this,this._onOpponentSkadooshed));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_PICKUP,$bind(this,this._onPickup));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_PICKUP_DONE,$bind(this,this._onPickupEnd));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OPPONENT_READY,$bind(this,this._onOpponentReady));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_DUMPLING_EAT,$bind(this,this._onDumplingEat));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_DUMPLING_BURST,$bind(this,this._onDumplingBurst));com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_SCREEN_SHAKE,$bind(this,this._onShake));},render:function(){this._elementManager.renderElements();},_dropDummy:function(){console.log("[World] (_dropDummy) ");if(this._opponent!=null)return;switch(com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_ROUND)){case 1:this._opponent=this._elementManager.addElement(new com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyStandard({x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,z:-40},this._elementManager,1));com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT_MAX,120);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT,120);break;case 2:this._opponent=this._elementManager.addElement(new com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyStandard({x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,z:-40},this._elementManager,2));com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT_MAX,120);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT,120);break;case 3:this._opponent=this._elementManager.addElement(new com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyStandard({x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,z:-40},this._elementManager,3));com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT_MAX,130);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT,130);break;case 4:this._opponent=this._elementManager.addElement(new com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyMedium({x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,z:-40},this._elementManager,1));com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT_MAX,150);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT,150);break;case 5:this._opponent=this._elementManager.addElement(new com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyMedium({x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,z:-40},this._elementManager,2));com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT_MAX,170);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT,170);break;case 6:this._opponent=this._elementManager.addElement(new com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyAdvanced({x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,z:-40},this._elementManager,1));com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT_MAX,210);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT,210);break;case 7:this._opponent=this._elementManager.addElement(new com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyUnblockable({x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,z:-40},this._elementManager,1));com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT_MAX,300);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT,300);break;case 8:this._opponent=this._elementManager.addElement(new com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentFung({x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,z:-40},this._elementManager));com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT_MAX,500);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT,500);break;}},_testSwipes:function(){if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_PAUSED))return;var $it0=com.workinman.utils.WorkinCloud.instance.getInput()._getMultiTouch().iterator();while($it0.hasNext()){var t=$it0.next();if(t._getConsumed()==false)switch(t._getSwipe()){case t.SWIPE_UP:console.log("[World] SWIPE UP!");if(this._state==this._STATE_TUTORIAL){console.log("tutorial text : "+this._tutorialText._getText());switch(this._tutorialText._getText()){case "tut_attack_mobile":com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_ATTACK_COMPLETE,true);this._setState(this._STATE_GAMEPLAY);this._tutorialFadeIn=true;this._tutorialText._getRenderable().alpha=0;this._player.attack();break;case "tut_dodge_2_mobile":com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_2_COMPLETE,true);this._setState(this._STATE_GAMEPLAY);this._tutorialFadeIn=true;this._tutorialText._getRenderable().alpha=0;this._player.attack();break;case "tut_dodge_4":com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_4_COMPLETE,true);this._setState(this._STATE_GAMEPLAY);this._tutorialFadeIn=true;this._tutorialText._getRenderable().alpha=0;break;case "tut_combo":com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_COMBO_COMPLETE,true);this._setState(this._STATE_GAMEPLAY);this._tutorialFadeIn=true;this._tutorialText._getRenderable().alpha=0;this._player.attack();break;case "tut_skadoosh":com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_SKADOOSH_COMPLETE,true);this._setState(this._STATE_SKADOOSH);this._tutorialFadeIn=true;this._tutorialText._getRenderable().alpha=0;this._player.attack();break;}}else if(this._state==this._STATE_GAMEPLAY||this._state==this._STATE_SKADOOSH){if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_ATTACK_COMPLETE))this._player.attack();}
t._setConsumed(true);break;case t.SWIPE_DOWN:console.log("[World] SWIPE DOWN!");if(this._state==this._STATE_TUTORIAL)switch(this._tutorialText._getText()){case "tut_dodge_3_mobile":com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_3_COMPLETE,true);this._setState(this._STATE_GAMEPLAY);this._tutorialFadeIn=true;this._tutorialText._getRenderable().alpha=0;this._player.dodge(com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_BACK);break;}else if(this._state==this._STATE_GAMEPLAY||this._state==this._STATE_SKADOOSH){if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_3_COMPLETE))this._player.dodge(com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_BACK);}
t._setConsumed(true);break;case t.SWIPE_LEFT:console.log("[World] SWIPE LEFT!");if(this._state==this._STATE_TUTORIAL)switch(this._tutorialText._getText()){case "tut_dodge_1_mobile":com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_1_COMPLETE,true);this._setState(this._STATE_GAMEPLAY);this._tutorialFadeIn=true;this._tutorialText._getRenderable().alpha=0;this._player.dodge(com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_LEFT);break;}else if(this._state==this._STATE_GAMEPLAY||this._state==this._STATE_SKADOOSH){if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_1_COMPLETE))this._player.dodge(com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_LEFT);}
t._setConsumed(true);break;case t.SWIPE_RIGHT:console.log("[World] SWIPE RIGHT!");if(this._state==this._STATE_TUTORIAL)switch(this._tutorialText._getText()){case "tut_dodge_1_mobile":com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_1_COMPLETE,true);this._setState(this._STATE_GAMEPLAY);this._tutorialFadeIn=true;this._tutorialText._getRenderable().alpha=0;this._player.dodge(com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_RIGHT);break;}else if(this._state==this._STATE_GAMEPLAY||this._state==this._STATE_SKADOOSH){if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_1_COMPLETE))this._player.dodge(com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_RIGHT);}
t._setConsumed(true);break;case t.SWIPE_NONE:break;}}},update:function(dt){if(com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_PAUSED)==true)return;dt=Math.round(dt*1000)/1000;switch(this._state){case this._STATE_INITIALIZING:break;case this._STATE_DROP_OPPONENT:this._elementManager.updateElements(dt);this._roundTimer-=dt;if(this._roundTimer<=0)this._dropDummy();com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PICKUPS,3);break;case this._STATE_COUNTDOWN_READY:this._elementManager.updateElements(dt);this._roundTimer-=dt;if(this._roundTimer<=0){this._setState(this._STATE_COUNTDOWN);this._elementManager.addElement(new com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasic({asset:"ready_text_back_en",x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,layer:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_FG,origin:new com.workinman.math.WorkinPoint(.5,.5),lifetime:1}));}
break;case this._STATE_COUNTDOWN:this._elementManager.updateElements(dt);this._roundTimer-=dt;if(this._roundTimer<=0){this._elementManager.addElement(new com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasic({asset:"fight_text_back",x:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,y:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,layer:com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_FG,origin:new com.workinman.math.WorkinPoint(.5,.5),lifetime:.75}));this._setState(this._STATE_GAMEPLAY);}
break;case this._STATE_GAMEPLAY:this._elementManager.updateElements(dt);this._testSwipes();var shakeOffset=new com.workinman.math.WorkinPoint();if(this._screenShakeTimer>0){this._screenShakeTimer-=dt;shakeOffset.x=com.workinman.utils.WorkinUtils.getRandom(-this._screenShakeMagnitude,this._screenShakeMagnitude);shakeOffset.y=com.workinman.utils.WorkinUtils.getRandom(-this._screenShakeMagnitude,this._screenShakeMagnitude);}
this._elementManager._getCamera()._getPos().x=this._player._getPos().x+shakeOffset.x;this._elementManager._getCamera()._getPos().y=this._player._getPos().y+shakeOffset.y;this._elementManager._getCamera()._getPos().z=this._player._getPos().z;this._tutorialText._getPos().x=this._player._getPos().x+shakeOffset.x;if(this._comboTimer>0){this._comboTimer-=dt;if(this._comboTimer<=0){this._comboTimer=0;com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_COMBO,0);}}
var i=this._pickups.length;while(i>0){i--;if(this._pickups[i]._getDoDelete())this._pickups.splice(i,1);}
i=this._effects.length;while(i>0){i--;if(this._effects[i]._getDoDelete())this._effects.splice(i,1);}
break;case this._STATE_SKADOOSH:this._testSwipes();this._elementManager.updateElements(dt);var shakeOffset=new com.workinman.math.WorkinPoint();if(this._screenShakeTimer>0){this._screenShakeTimer-=dt;shakeOffset.x=com.workinman.utils.WorkinUtils.getRandom(-this._screenShakeMagnitude,this._screenShakeMagnitude);shakeOffset.y=com.workinman.utils.WorkinUtils.getRandom(-this._screenShakeMagnitude,this._screenShakeMagnitude);}
this._elementManager._getCamera()._getPos().x=this._player._getPos().x+shakeOffset.x;this._elementManager._getCamera()._getPos().y=this._player._getPos().y+shakeOffset.y;this._elementManager._getCamera()._getPos().z=this._player._getPos().z;if(this._roundTimer>0){this._roundTimer-=dt;if(this._roundTimer<=0){this._roundTimer=0;this._player.skadoosh();}}
break;case this._STATE_POST_SKADOOSH:this._elementManager.updateElements(dt);if(this._roundTimer>0){this._roundTimer-=dt;if(this._roundTimer<=0){this._roundTimer=0;this._opponent=null;com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_LEVEL_WIN,true);this._setState(this._STATE_SCORE);}}
break;case this._STATE_SCORE:break;case this._STATE_TUTORIAL:this._testSwipes();if(this._tutorialFadeIn){if(this._tutorialText._getRenderable().alpha<1)this._tutorialText._getRenderable().alpha+=dt*2;else{this._tutorialText._getRenderable().alpha=1;this._tutorialFadeIn=false;}}else if(this._tutorialText._getRenderable().alpha>0)this._tutorialText._getRenderable().alpha-=dt*2;else{this._tutorialText._getRenderable().alpha=0;this._tutorialFadeIn=true;}
break;case this._STATE_PICKUP:var i=this._pickups.length;while(i>0){i--;if(this._pickups[i]._getDoDelete())this._pickups.splice(i,1);else this._pickups[i].update(dt);}
i=this._effects.length;while(i>0){i--;if(this._effects[i]._getDoDelete())this._effects.splice(i,1);else this._effects[i].update(dt);}
break;}},_setState:function(pState){this._state=pState;switch(pState){case this._STATE_INITIALIZING:console.log("[World] (_setState) INITIALIZING");break;case this._STATE_DROP_OPPONENT:com.workinman.utils.WorkinCloud.instance.modifyInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_ROUND,1);console.log("[World] (_setState) OPPONENT");this._roundTimer=1;com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_COMBO,0);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PO_COMBO,0);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HIGHEST_COMBO,0);com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SKADOOSH,0);com.workinman.utils.WorkinCloud.instance.setBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_LEVEL_WIN,false);this._player.kungFuPanda(false);break;case this._STATE_COUNTDOWN_READY:this._roundTimer=1;break;case this._STATE_COUNTDOWN:console.log("[World] (_setState) COUNTDOWN");this._roundTimer=1;break;case this._STATE_GAMEPLAY:console.log("[World] (_setState) GAMEPLAY");com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ROUND_START));if(!com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_ATTACK_COMPLETE)){if(flambe.System.get_touch().get_supported())this._tutorialText._setText("tut_attack_mobile");else this._tutorialText._setText("tut_attack");this._setState(this._STATE_TUTORIAL);}
break;case this._STATE_SKADOOSH:this._roundTimer=5;this._player.kungFuPanda(true);com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_SKADOOSH_START));break;case this._STATE_POST_SKADOOSH:this._roundTimer=1.5;com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PO_COMBO,0);break;case this._STATE_SCORE:this._roundReady=false;break;case this._STATE_TUTORIAL:console.log("[World] (_setState) TUTORIAL");break;case this._STATE_PICKUP:break;}},dispose:function(){this._elementManager.dispose();this._elementManager=null;this._poolManager.dispose();this._poolManager=null;this._timeline=null;this._removeEventListeners();this._elements=null;this._tutorialText=null;this._effects=null;this._pickups=null;this._player=null;this._opponent=null;this._cameraVelocity=null;com.workinman.events.WMEventDispatcher.prototype.dispose.call(this);},start:function(){this._addEventListeners();this._setState(this._STATE_DROP_OPPONENT);},__class__:com.nick.kung_fu_panda.boss_beat_down.world.World});com.workinman.display.AnimatedElement=function(inData){if(inData.movie!=null&&inData.movie!=""&&(inData.library==null||inData.library=="")&&(inData.asset==null||inData.asset==""))inData.asset=inData.movie;this._animations=new Hash();this._queuedAnimations=new Array();this._lastFrame=-1;this._currentFrame=0;this._currentAnimation="";this._fps=24;this._animationStopped=true;this._library="";this._loopComplete=false;this._symbol="";this._workFrame=0;this._currentAnimDef=null;com.workinman.display.Element.call(this,inData);};$hxClasses["com.workinman.display.AnimatedElement"]=com.workinman.display.AnimatedElement;com.workinman.display.AnimatedElement.__name__=["com","workinman","display","AnimatedElement"];com.workinman.display.AnimatedElement.__super__=com.workinman.display.Element;com.workinman.display.AnimatedElement.prototype=$extend(com.workinman.display.Element.prototype,{_onAnimationComplete:function(){},_setFrame:function(pFrame){this._movie.set_position(Math.floor(pFrame)/this._frames*this._duration);},_runAnimation:function(dt){if(this._currentAnimation!=""&&this._doLoop()==true&&this._animationStopped==false){if(this._currentAnimDef._getReverse()==false)this._currentFrame+=this._fps*dt;else this._currentFrame-=this._fps*dt;if(this._currentAnimDef._getReverse()==false){if(Math.floor(this._currentFrame)>this._currentAnimDef._getEnd()){this._currentFrame=this._currentAnimDef._getStart()+(this._currentFrame-Math.floor(this._currentFrame));this._loopComplete=true;}}else if(Math.ceil(this._currentFrame)<this._currentAnimDef._getStart()){this._currentFrame=this._currentAnimDef._getEnd()+(this._currentFrame-Math.ceil(this._currentFrame));this._loopComplete=true;}
if(this._loopComplete==true){this._loopComplete=false;this._currentLoop--;if(this._doLoop()==false){this._animationStopped=true;if(this._currentAnimDef._getReverse()==false)this._currentFrame=this._currentAnimDef._getEnd();else this._currentFrame=this._currentAnimDef._getStart();if(this._queuedAnimations.length>0){this._doAnimate(this._queuedAnimations[0]._getName(),this._queuedAnimations[0]._getLoops(),this._queuedAnimations[0]._getForce());this._queuedAnimations.splice(0,1);}else this._onAnimationComplete();}}
if(this._currentAnimDef._getReverse()==false)this._workFrame=Math.floor(this._currentFrame);else this._workFrame=Math.ceil(this._currentFrame);if(this._movie!=null&&this._workFrame!=this._lastFrame){this._setFrame(this._workFrame);this._lastFrame=this._workFrame;}}},_doLoop:function(){return this._currentLoop>0||this._flagLoop;},update:function(dt){com.workinman.display.Element.prototype.update.call(this,dt);this._runAnimation(dt);},clearQueue:function(){while(this._queuedAnimations.length>0)this._queuedAnimations.splice(0,1);},stopAnimation:function(){this._animationStopped=true;},setLoop:function(pLoop){this._currentLoop=pLoop;this._flagLoop=pLoop==0;return this;},_interchangeAnimation:function(pName,pNumLoops,pOffset,pForceRestart){if(pForceRestart==null)pForceRestart=false;if(pOffset==null)pOffset=0;if(pNumLoops==null)pNumLoops=0;if(this._currentAnimation==pName&&pForceRestart==false)return;var frameToOffset=this._currentFrame;if(this._animations!=null&&this._animations.exists(pName)){this._currentAnimDef=null;this._currentAnimDef=this._animations.get(pName);this._currentFrame=frameToOffset+pOffset;this._currentAnimation=pName;this.setLoop(pNumLoops);this._animationStopped=false;this._setFrame(this._currentFrame);}else com.workinman.utils.WorkinCloud.instance.log("Animation not found: "+pName);},_doAnimate:function(pName,pNumLoops,pForceRestart){if(pForceRestart==null)pForceRestart=false;if(pNumLoops==null)pNumLoops=0;if(this._currentAnimation==pName&&pForceRestart==false)return;if(this._animations!=null&&this._animations.exists(pName)){this._currentAnimDef=null;this._currentAnimDef=this._animations.get(pName);this._currentFrame=this._currentAnimDef._getStart();this._currentAnimation=pName;this.setLoop(pNumLoops);this._animationStopped=false;this._setFrame(this._currentFrame);}else com.workinman.utils.WorkinCloud.instance.log("Animation not found: "+pName);},interchangeAnimate:function(pName,pNumLoops,pOffset,pForceRestart){if(pForceRestart==null)pForceRestart=false;if(pOffset==null)pOffset=0;if(pNumLoops==null)pNumLoops=0;this.clearQueue();this._interchangeAnimation(pName,pNumLoops,pOffset,pForceRestart);return this;},animate:function(pName,pNumLoops,pForceRestart){if(pForceRestart==null)pForceRestart=false;if(pNumLoops==null)pNumLoops=0;this.clearQueue();this._doAnimate(pName,pNumLoops,pForceRestart);return this;},addAnimation:function(pName,pStartFrame,pEndFrame){this._animations.set(pName,new com.workinman.display.AnimationDef(pName,pStartFrame-1,pEndFrame-1));return this;},setLibraryAndSymbol:function(pLibrary,pSymbol){this._library=pLibrary;this._symbol=pSymbol;this._texture.dispose();var tSymbol=com.workinman.utils.WorkinCloud.instance.getAssets().getLibrary(this._library).getSymbol(this._symbol);this._duration=tSymbol.duration;this._frames=tSymbol.frames;this._movie=tSymbol.createSprite();this._movie.set_paused(true);this._texture=this._movie;this._textureEntity.add(this._texture);tSymbol=null;return this;},_setAnimationFrameRelative:function(pFrame){this._currentFrame=this._currentAnimDef._getStart()+pFrame;return this._getAnimationFrameRelative();},_getAnimationFrameRelative:function(){return Std["int"](this._currentFrame-this._currentAnimDef._getStart());},_setAnimationFrame:function(pFrame){this._currentFrame=pFrame;this._setFrame(this._currentFrame);this.stopAnimation();return Std["int"](this._currentFrame);},_getAnimationFrame:function(){return Std["int"](this._currentFrame);},_setAnimationRatio:function(ratio){var newFrame=Math.floor(ratio*(this._currentAnimDef._getEnd()-this._currentAnimDef._getStart())+this._currentAnimDef._getStart());if(newFrame!=this._currentFrame)this._setAnimationFrame(newFrame);return this._getAnimationRatio();},_getAnimationRatio:function(){return(this._currentFrame-this._currentAnimDef._getStart())/(this._currentAnimDef._getEnd()-this._currentAnimDef._getEnd());},_setFps:function(pFps){this._fps=pFps;return this._fps;},_getFps:function(){return this._fps;},_getCurrentAnimation:function(){return this._currentAnimation;},renew:function(inData){com.workinman.display.Element.prototype.renew.call(this,inData);if(inData.library&&inData.movie)this.setLibraryAndSymbol(inData.library,inData.movie);if(inData.fps)this._fps=inData.fps;},dispose:function(){this._movie=null;this._animations=null;this._currentAnimDef=null;this._queuedAnimations=null;com.workinman.display.Element.prototype.dispose.call(this);},__class__:com.workinman.display.AnimatedElement,__properties__:$extend(com.workinman.display.Element.prototype.__properties__,{set_animationFrame:"_setAnimationFrame",get_animationFrame:"_getAnimationFrame"})});com.nick.kung_fu_panda.boss_beat_down.world.elements={}
com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D=function(inData,eManager){com.workinman.display.AnimatedElement.call(this,inData);this._em=eManager;this._zRoot=0;if(inData.z)this._zRoot=inData.z;};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D"]=com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D;com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D.__name__=["com","nick","kung_fu_panda","boss_beat_down","world","elements","Element3D"];com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D.__super__=com.workinman.display.AnimatedElement;com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D.prototype=$extend(com.workinman.display.AnimatedElement.prototype,{updateScaleFromPosition:function(){var camZ=this._em._getCamera()._getPos().z;var aZ=camZ-this._pos.z;var bZ=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.FOCAL_LENGTH-this._zRoot;this._render.scaleX=bZ/aZ*(this._render.scaleX>0?1:-1);this._render.scaleY=bZ/aZ;},renderPosition:function(pCamera){if(pCamera==null){this._render.x=this._pos.x+this._renderOffset.x;this._render.y=this._pos.y+this._renderOffset.y;}else{var aZ=pCamera._getPos().z-this._pos.z;var bZ=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.FOCAL_LENGTH;this._render.x=(this._pos.x+this._renderOffset.x-pCamera._getPos().x)*bZ/aZ+pCamera._getScreenCenterX();this._render.y=(this._pos.y+this._renderOffset.y-pCamera._getPos().y)*bZ/aZ+pCamera._getScreenCenterY();}
var _g=0,_g1=this._elements;while(_g<_g1.length){var b=_g1[_g];++_g;b.renderPosition(pCamera);}
this.applyRenderable();},update:function(dt){com.workinman.display.AnimatedElement.prototype.update.call(this,dt);this.updateScaleFromPosition();},__class__:com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D});com.nick.kung_fu_panda.boss_beat_down.world.elements.PickupDumplings=function(inData,eManager){this._STATE_PICKUP=3;this._STATE_OUT=2;this._STATE_IDLE=1;this._STATE_IN=0;inData.library="flump_effects";inData.movie="pickup_dumplings";inData.layer=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_DUMMY;com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D.call(this,inData,eManager);this.addAnimation("in",1,20);this.addAnimation("out",20,1);this.addAnimation("idle",21,66);this.addAnimation("pickup",67,76);this._lifetime=2;if(inData.lifetime)this._lifetime=inData.lifetime;this._fieldPosition=1;if(inData.position)this._fieldPosition=inData.position;if(this._fieldPosition<0){this._pos.x=-560;this._render.scaleX=1;}else{this._pos.x=1560;this._render.scaleX=-1;}
this._setState(this._STATE_IN);};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.world.elements.PickupDumplings"]=com.nick.kung_fu_panda.boss_beat_down.world.elements.PickupDumplings;com.nick.kung_fu_panda.boss_beat_down.world.elements.PickupDumplings.__name__=["com","nick","kung_fu_panda","boss_beat_down","world","elements","PickupDumplings"];com.nick.kung_fu_panda.boss_beat_down.world.elements.PickupDumplings.__super__=com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D;com.nick.kung_fu_panda.boss_beat_down.world.elements.PickupDumplings.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D.prototype,{_getFieldPosition:function(){return this._fieldPosition;},pickup:function(){if(this._state==this._STATE_IDLE)this._setState(this._STATE_PICKUP);},_onAnimationComplete:function(){switch(this._currentAnimation){case "in":this._setState(this._STATE_IDLE);break;case "out":case "pickup":this._setDoDelete(true);break;}},update:function(dt){com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D.prototype.update.call(this,dt);switch(this._state){case this._STATE_IDLE:if(this._lifetime>-1){this._lifetime-=dt;if(this._lifetime<=0)this._setState(this._STATE_OUT);}
break;}},_setState:function(inState){this._state=inState;switch(this._state){case this._STATE_IN:this.animate("in",1);break;case this._STATE_IDLE:this.animate("idle");break;case this._STATE_OUT:this.animate("pickup",1);break;case this._STATE_PICKUP:this.animate("pickup",1);break;}},__class__:com.nick.kung_fu_panda.boss_beat_down.world.elements.PickupDumplings,__properties__:$extend(com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D.prototype.__properties__,{get_fPosition:"_getFieldPosition"})});com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo=function(pData){this._DUMPLING_ANIMATION_OFFSET=173;this._ACTION_DAMAGE_SKADOOSH=100;this._ACTION_DAMAGE_COMBO_FINISH=30;this._ACTION_DAMAGE_COUNTER_ATTACK=20;this._ACTION_DAMAGE_PUNCH_STRAIGHT=10;this._ACTION_FRAME_COUNTER_ATTACK=112;this._ACTION_FRAME_PUNCH_COMBO_2=81;this._ACTION_FRAME_PUNCH_COMBO_1=64;this._ACTION_FRAME_PUNCH_STRAIGHT=52;this._STATE_DELAY=7;this._STATE_HIT=6;this._STATE_DODGE_BACK_RETURN=5;this._STATE_DODGE_RETURN=4;this._STATE_DODGE=3;this._STATE_ATTACK=2;this._STATE_KUNG_FU_PANDA=1;this._STATE_IDLE=0;this._ACTION_PUNCH_COMBO_2=10;this._ACTION_PUNCH_COMBO_1=9;this._ACTION_DODGE_BACK=8;this._ACTION_DODGE_RIGHT=7;this._ACTION_DODGE_LEFT=6;this._ACTION_SKADOOSH=5;this._ACTION_DOUBLE_PAW=4;this._ACTION_KICK=3;this._ACTION_PUNCH_RIGHT=2;this._ACTION_PUNCH_LEFT=1;this._ACTION_PUNCH_STRAIGHT=0;this._ACTION_NONE=-1;pData.library="flump_po";pData.movie="po";pData.layer=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_PLAYER;pData.origin=new com.workinman.math.WorkinPoint(.5,.5);com.workinman.display.AnimatedElement.call(this,pData);this._cameraTarget=new com.workinman.math.WorkinPoint(0,0,0);this._moveSpeed=0;this._delayTimer=0;this._actionAnimation="";this._animationModifier="";this._theta=0;com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PO_COMBO,0);this.kungFuPanda(false);this._vulnerable=true;this._prepAction=this._ACTION_NONE;this._actionFrame=-1;this._actionDamage=0;this._acceleration=new com.workinman.math.WorkinPoint();this._accelerationSpeed=0;this._state=-1;this._battlefieldPosition=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_POSITION_MID;this._dumplingStance=false;this._addAnimations();this._stateQueue=[];this._setState(this._STATE_IDLE);};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo"]=com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo;com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.__name__=["com","nick","kung_fu_panda","boss_beat_down","world","elements","PlayerPo"];com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.__super__=com.workinman.display.AnimatedElement;com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.prototype=$extend(com.workinman.display.AnimatedElement.prototype,{dispose:function(){com.workinman.display.AnimatedElement.prototype.dispose.call(this);},_getDumplingStance:function(){return this._dumplingStance;},_getBattlePosition:function(){return this._battlefieldPosition;},dumplingStance:function(kungFuMasta){if(kungFuMasta){this._dumplingStance=true;this._animationModifier="_dumpling";this.interchangeAnimate(this._currentAnimation+this._animationModifier,this._currentLoop,this._DUMPLING_ANIMATION_OFFSET);}else{this._dumplingStance=false;this._animationModifier="";this.interchangeAnimate(this._actionAnimation,this._currentLoop,-this._DUMPLING_ANIMATION_OFFSET);}},_dumplingBurst:function(){com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_DUMPLING_BURST));this.dumplingStance(false);},kungFuPanda:function(superSaiyan){if(superSaiyan){this._setFps(50);this._kungFuPandaMode=true;}else{this._setFps(30);this._kungFuPandaMode=false;this._skadooshing=false;this._stateQueue=[];this._setState(this._STATE_IDLE);}},_onAnimationComplete:function(){switch(this._currentAnimation){case "idle":case "idle_dumpling":break;case "hit":case "hit_dumpling":case "punch0":case "punch1":case "punch2":case "counter_attack":case "punch0_dumpling":case "punch1_dumpling":case "punch2_dumpling":case "counter_attack_dumpling":case "dodge_out":case "dodge_back_out":case "dodge_out_dumpling":case "dodge_back_out_dumpling":this._setState(this._STATE_IDLE);break;case "dodge_in":case "dodge_in_dumpling":this._actionAnimation="dodge_idle";this.animate(this._actionAnimation+this._animationModifier);break;case "dodge_back_in":case "dodge_back_in_dumpling":this._actionAnimation="dodge_back_idle";this.animate(this._actionAnimation+this._animationModifier);if(this._dumplingStance){this.dumplingStance(false);com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_DUMPLING_EAT));}
break;}},dodge:function(direction){if(this._skadooshing)return;console.log("[PlayerPo] (dodge) _kungFuPandaMode : "+Std.string(this._kungFuPandaMode));switch(this._state){case this._STATE_HIT:case this._STATE_DODGE:case this._STATE_DODGE_RETURN:return;case this._STATE_ATTACK:switch(direction){case com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_LEFT:this._actionType=this._ACTION_DODGE_LEFT;break;case com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_RIGHT:this._actionType=this._ACTION_DODGE_RIGHT;break;case com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_BACK:this._actionType=this._ACTION_DODGE_BACK;break;}
com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PO_COMBO,0);this._stateQueue=[this._STATE_DODGE];break;case this._STATE_IDLE:switch(direction){case com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_LEFT:this._prepAction=this._ACTION_DODGE_LEFT;this._actionType=this._ACTION_DODGE_LEFT;break;case com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_RIGHT:this._prepAction=this._ACTION_DODGE_RIGHT;this._actionType=this._ACTION_DODGE_RIGHT;break;case com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_BACK:this._prepAction=this._ACTION_DODGE_BACK;this._actionType=this._ACTION_DODGE_BACK;break;}
com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PO_COMBO,0);this._setState(this._STATE_DODGE);break;}},animate:function(pName,pNumLoops,pForceRestart){if(pForceRestart==null)pForceRestart=false;if(pNumLoops==null)pNumLoops=0;console.log("[PoAnimate] "+pName);this.clearQueue();this._doAnimate(pName,pNumLoops,pForceRestart);return this;},hit:function(){com.workinman.utils.WorkinCloud.instance._getSound().playSound("po_hit"+com.workinman.utils.WorkinUtils.getRandom(1,2,true));com.workinman.utils.WorkinCloud.instance.modifyValue(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH,-1);this._stateQueue=[];this._setState(this._STATE_HIT);},skadoosh:function(){this._stateQueue=[this._STATE_ATTACK];this._prepAction=this._ACTION_SKADOOSH;this._skadooshing=true;com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PO_COMBO,0);if(this._state==this._STATE_IDLE)this._setState(this._STATE_ATTACK);},attack:function(){if(this._skadooshing)return;console.log("[PlayerPo] (attack) _prepAction: "+this._prepAction);switch(this._state){case this._STATE_HIT:case this._STATE_DODGE_RETURN:return;case this._STATE_DODGE:this._stateQueue=[this._STATE_ATTACK];com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PO_COMBO,1);this._delayTimer=0;break;case this._STATE_ATTACK:console.log(this._currentFrame+" < "+(this._currentAnimDef._getStart()+com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.FRAME_BUFFER));if(this._currentFrame<this._currentAnimDef._getStart()+com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.FRAME_BUFFER)return;switch(com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PO_COMBO)){case 0:break;case 1:break;case 2:if(!com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_COMBO_COMPLETE))com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_COMBO));break;}
this._stateQueue=[this._STATE_ATTACK];break;case this._STATE_IDLE:switch(com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PO_COMBO)){case 0:break;case 1:break;case 2:com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PO_COMBO,0);if(!com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_COMBO_COMPLETE))com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_COMBO));break;}
this._stateQueue=[];this._setState(this._STATE_ATTACK);break;case this._STATE_DELAY:this._stateQueue=[];this._setState(this._STATE_ATTACK);break;case this._STATE_KUNG_FU_PANDA:break;}},_getActionDelay:function(pAction){if(pAction==null)pAction=-1;switch(pAction){default:return .5;}},updatePositionFromVelocity:function(dt){com.workinman.display.AnimatedElement.prototype.updatePositionFromVelocity.call(this,dt);this._pos.z+=this._velocity.z*dt;},_updateCameraPosition:function(dt){this._debugDT+=dt;var distanceToLand=com.workinman.math.WorkinMath.distBetweenPoints(this._pos,this._cameraTarget);if(distanceToLand==0){if(this._state!=this._STATE_ATTACK&&this._state!=this._STATE_HIT)this._setState(this._STATE_IDLE);return;}
if(distanceToLand<com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_SLOW_DISTANCE){if(this._acceleration._getLength()*dt>=this._velocity._getLength()||this._velocity._getLength()*dt>distanceToLand){this._velocity.multiply(0);this._pos=this._cameraTarget.copy();this._setCameraTarget(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.FOCAL_LENGTH);if(this._state!=this._STATE_ATTACK&&this._state!=this._STATE_HIT)this._setState(this._STATE_IDLE);return;}else this._velocity.subtractPoint(this._acceleration.multiplyCopy(dt));}else if(this._velocity._getLength()*dt>distanceToLand){this._velocity.multiply(0);this._pos=this._cameraTarget.copy();this._setCameraTarget(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.FOCAL_LENGTH);if(this._state!=this._STATE_ATTACK&&this._state!=this._STATE_HIT)this._setState(this._STATE_IDLE);return;}
this.updatePositionFromVelocity(dt);},dodgeAttack:function(){if(this._actionType==this._ACTION_DODGE_BACK){com.workinman.utils.WorkinCloud.instance._getSound().playSound("block");com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_SCREEN_SHAKE));}else com.workinman.utils.WorkinCloud.instance._getSound().playSound("dodge_0");},hitLanded:function(){if(this._dumplingStance){if(this._actionAnimation=="punch2")this._dumplingBurst();}},update:function(dt){com.workinman.display.AnimatedElement.prototype.update.call(this,dt);switch(this._state){case this._STATE_IDLE:this._theta+=dt*2;if(this._theta>Math.PI*2)this._theta=0;this._pos.y=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y+Math.sin(this._theta)*com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_HEAD_BOB;break;case this._STATE_ATTACK:this._updateCameraPosition(dt);if(this._actionFrame>-1&&this._currentFrame>=this._actionFrame){this._actionFrame=-1;com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_PO_ATTACK,{damage:this._actionDamage}));}
break;case this._STATE_DODGE:this._updateCameraPosition(dt);break;case this._STATE_DODGE_RETURN:this._updateCameraPosition(dt);break;case this._STATE_DODGE_BACK_RETURN:this._updateCameraPosition(dt);break;case this._STATE_HIT:this._updateCameraPosition(dt);break;case this._STATE_DELAY:if(!com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_2_COMPLETE))com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_DODGE_2));else if(!com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_4_COMPLETE))com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_DODGE_4));this._delayTimer-=dt;if(this._delayTimer<=0){this._delayTimer=0;this._setState(this._STATE_IDLE);}
break;}},_setMovementSpeed:function(pTime){var trueTime=pTime;if(this._kungFuPandaMode)trueTime*=3/5;var D=com.workinman.math.WorkinMath.distBetweenPoints(this._pos,this._cameraTarget);var dS=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_SLOW_DISTANCE;var Vi=(D+dS)/trueTime;var a=Vi*Vi/(-2*dS);this._accelerationSpeed=a;this._moveSpeed=Vi;},_setCameraTarget:function(pX,pY,pZ,pTime){if(pTime==null)pTime=-1;this._cameraTarget=new com.workinman.math.WorkinPoint(pX,pY,pZ);var vectorToTarget=com.workinman.math.WorkinMath.diffBetweenPoints(this._pos,this._cameraTarget);vectorToTarget.normalize();if(pTime==-1)this._setMovementSpeed(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_DODGE_SPEED);else this._setMovementSpeed(pTime);this._velocity=vectorToTarget.multiplyCopy(this._moveSpeed);this._acceleration=vectorToTarget.reverseCopy().multiplyCopy(this._accelerationSpeed);},_setState:function(inState){console.log("[PlayerPo] (_setState) _state: "+this._state+" inState: "+inState);if(this._stateQueue.length>0)this._state=this._stateQueue.shift();else{if(this._state==inState)return;this._state=inState;}
switch(this._state){case this._STATE_IDLE:console.log("[PlayerPo] (_setState) IDLE");this._battlefieldPosition=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_POSITION_MID;this._vulnerable=true;this._actionAnimation="idle";this.animate(this._actionAnimation+this._animationModifier);this._render.scaleX=1;this._prepAction=this._ACTION_NONE;this._theta=0;break;case this._STATE_ATTACK:console.log("[PlayerPo] (_setState) ATTACK");console.log("[PlayerPo] prepAction : "+this._prepAction);switch(this._prepAction){case this._ACTION_NONE:case this._ACTION_DODGE_BACK:this._actionAnimation="punch0";this.animate(this._actionAnimation+this._animationModifier,1);this._prepAction=this._ACTION_PUNCH_STRAIGHT;this._actionFrame=this._ACTION_FRAME_PUNCH_STRAIGHT;if(this._dumplingStance)this._actionFrame+=this._DUMPLING_ANIMATION_OFFSET;this._actionDamage=this._ACTION_DAMAGE_PUNCH_STRAIGHT;this._setCameraTarget(this._pos.x,this._pos.y,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_LUNGE_LOCATION_FORWARD);com.workinman.utils.WorkinCloud.instance._getSound().playSound("swing_"+com.workinman.utils.WorkinUtils.getRandom(0,1,true));break;case this._ACTION_PUNCH_STRAIGHT:case this._ACTION_PUNCH_RIGHT:case this._ACTION_PUNCH_LEFT:this._actionAnimation="punch1";this.animate(this._actionAnimation+this._animationModifier,1);this._prepAction=this._ACTION_PUNCH_COMBO_1;this._actionFrame=this._ACTION_FRAME_PUNCH_COMBO_1;if(this._dumplingStance)this._actionFrame+=this._DUMPLING_ANIMATION_OFFSET;this._actionDamage=this._ACTION_DAMAGE_PUNCH_STRAIGHT;this._setCameraTarget(this._pos.x,this._pos.y,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_LUNGE_LOCATION_FORWARD);com.workinman.utils.WorkinCloud.instance._getSound().playSound("swing_"+com.workinman.utils.WorkinUtils.getRandom(0,1,true));if(!com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_COMBO_COMPLETE))com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_COMBO));break;case this._ACTION_PUNCH_COMBO_1:this._actionAnimation="punch2";this.animate(this._actionAnimation+this._animationModifier,1);this._prepAction=this._ACTION_NONE;this._actionFrame=this._ACTION_FRAME_PUNCH_COMBO_2;if(this._dumplingStance)this._actionFrame+=this._DUMPLING_ANIMATION_OFFSET;this._actionDamage=this._ACTION_DAMAGE_COMBO_FINISH;this._setCameraTarget(this._pos.x,this._pos.y,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_LUNGE_LOCATION_FORWARD,.5);com.workinman.utils.WorkinCloud.instance._getSound().playSound("swing_"+com.workinman.utils.WorkinUtils.getRandom(0,1,true));break;case this._ACTION_PUNCH_COMBO_2:break;case this._ACTION_DODGE_LEFT:this._actionAnimation="counter_attack";this.animate(this._actionAnimation+this._animationModifier,1);this._prepAction=this._ACTION_PUNCH_LEFT;this._actionFrame=this._ACTION_FRAME_COUNTER_ATTACK;if(this._dumplingStance)this._actionFrame+=this._DUMPLING_ANIMATION_OFFSET;this._actionDamage=this._ACTION_DAMAGE_COUNTER_ATTACK;this._setCameraTarget(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_LUNGE_LOCATION_FORWARD);com.workinman.utils.WorkinCloud.instance._getSound().playSound("swing_"+com.workinman.utils.WorkinUtils.getRandom(0,1,true));break;case this._ACTION_DODGE_RIGHT:this._actionAnimation="counter_attack";this.animate(this._actionAnimation+this._animationModifier,1);this._prepAction=this._ACTION_PUNCH_RIGHT;this._actionFrame=this._ACTION_FRAME_COUNTER_ATTACK;if(this._dumplingStance)this._actionFrame+=this._DUMPLING_ANIMATION_OFFSET;this._actionDamage=this._ACTION_DAMAGE_COUNTER_ATTACK;this._setCameraTarget(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_LUNGE_LOCATION_FORWARD);com.workinman.utils.WorkinCloud.instance._getSound().playSound("swing_"+com.workinman.utils.WorkinUtils.getRandom(0,1,true));break;case this._ACTION_DOUBLE_PAW:this._prepAction=this._ACTION_NONE;com.workinman.utils.WorkinCloud.instance._getSound().playSound("swing_"+com.workinman.utils.WorkinUtils.getRandom(0,1,true));break;case this._ACTION_KICK:this._prepAction=this._ACTION_NONE;break;case this._ACTION_SKADOOSH:this._actionAnimation="punch2";this.animate(this._actionAnimation+this._animationModifier,1);this._prepAction=this._ACTION_NONE;this._actionFrame=this._ACTION_FRAME_PUNCH_COMBO_2;if(this._dumplingStance)this._actionFrame+=this._DUMPLING_ANIMATION_OFFSET;this._actionDamage=this._ACTION_DAMAGE_SKADOOSH;this._setCameraTarget(this._pos.x,this._pos.y,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_LUNGE_LOCATION_FORWARD,.5);com.workinman.utils.WorkinCloud.instance._getSound().playSound("swing_"+com.workinman.utils.WorkinUtils.getRandom(0,1,true));break;}
break;case this._STATE_DODGE:this._debugDT=0;this._vulnerable=false;switch(this._actionType){case this._ACTION_DODGE_LEFT:this._battlefieldPosition=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_POSITION_LEFT;this._setCameraTarget(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_DODGE_LOCATION_LEFT,this._pos.y,this._pos.z);this._actionAnimation="dodge_in";this.animate(this._actionAnimation+this._animationModifier,1);this._render.scaleX=-1;this._delayTimer=this._getActionDelay(this._ACTION_DODGE_LEFT);this._prepAction=this._ACTION_DODGE_LEFT;this._stateQueue.push(this._STATE_DELAY);this._stateQueue.push(this._STATE_DODGE_RETURN);break;case this._ACTION_DODGE_RIGHT:this._battlefieldPosition=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_POSITION_RIGHT;this._setCameraTarget(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_DODGE_LOCATION_RIGHT,this._pos.y,this._pos.z);this._actionAnimation="dodge_in";this.animate(this._actionAnimation+this._animationModifier,1);this._delayTimer=this._getActionDelay(this._ACTION_DODGE_RIGHT);this._prepAction=this._ACTION_DODGE_RIGHT;this._stateQueue.push(this._STATE_DELAY);this._stateQueue.push(this._STATE_DODGE_RETURN);break;case this._ACTION_DODGE_BACK:this._battlefieldPosition=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_POSITION_BACK;this._setCameraTarget(this._pos.x,this._pos.y,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_DODGE_LOCATION_BACK);this._actionAnimation="dodge_back_in";this.animate(this._actionAnimation+this._animationModifier,1);this._delayTimer=this._getActionDelay(this._ACTION_DODGE_BACK);this._prepAction=this._ACTION_DODGE_BACK;this._stateQueue.push(this._STATE_DELAY);this._stateQueue.push(this._STATE_DODGE_BACK_RETURN);break;}
break;case this._STATE_DODGE_RETURN:this._actionAnimation="dodge_out";this.animate(this._actionAnimation+this._animationModifier,1);this._prepAction=this._ACTION_NONE;break;case this._STATE_DODGE_BACK_RETURN:this._actionAnimation="dodge_back_out";this.animate(this._actionAnimation+this._animationModifier,1);this._prepAction=this._ACTION_NONE;break;case this._STATE_HIT:console.log("[PlayerPo] (_setState) HIT");com.workinman.utils.WorkinCloud.instance.setInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PO_COMBO,0);this._setCameraTarget(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.FOCAL_LENGTH);this._actionAnimation="hit";this.animate(this._actionAnimation+this._animationModifier,1);this._delayTimer=this._getActionDelay();this._prepAction=this._ACTION_NONE;break;case this._STATE_DELAY:switch(this._prepAction){case this._ACTION_DODGE_LEFT:com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_PICKUP,{position:-1}));break;case this._ACTION_DODGE_RIGHT:com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_PICKUP,{position:1}));break;}
break;}},_addAnimations:function(){this.addAnimation("idle",1,47);this.addAnimation("punch0",48,59);this.addAnimation("punch1",60,71);this.addAnimation("punch2",72,90);this.addAnimation("dodge_in",91,103);this.addAnimation("dodge_idle",103,103);this.addAnimation("dodge_out",121,133);this.addAnimation("dodge_back_in",134,144);this.addAnimation("dodge_back_idle",144,144);this.addAnimation("dodge_back_out",145,157);this.addAnimation("counter_attack",104,120);this.addAnimation("hit",158,173);this.addAnimation("idle_dumpling",174,220);this.addAnimation("punch0_dumpling",221,232);this.addAnimation("punch1_dumpling",233,244);this.addAnimation("punch2_dumpling",245,263);this.addAnimation("dodge_in_dumpling",264,276);this.addAnimation("dodge_idle_dumpling",276,276);this.addAnimation("dodge_out_dumpling",294,306);this.addAnimation("dodge_back_in_dumpling",307,319);this.addAnimation("dodge_back_idle_dumpling",319,319);this.addAnimation("dodge_back_out_dumpling",320,332);this.addAnimation("counter_attack_dumpling",277,293);this.addAnimation("hit_dumpling",333,348);},__class__:com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo,__properties__:$extend(com.workinman.display.AnimatedElement.prototype.__properties__,{get_battlePosition:"_getBattlePosition",get_dumpling:"_getDumplingStance"})});com.nick.kung_fu_panda.boss_beat_down.world.elements.effects={}
com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasic=function(inData){if(com.workinman.utils.WorkinCloud.instance.getString(com.workinman.data.ConstantsCloud.STRING_REGION_ID)=="en")com.workinman.display.Element.call(this,inData);else if(inData.asset=="ready_text_back_en"){inData.asset="";com.workinman.display.Element.call(this,inData);this._addElement(new com.workinman.display.TextLocalized(0,0,"round_ready","",{origin:new com.workinman.math.WorkinPoint(.5,.5)}));}else if(inData.asset=="fight_text_back"){inData.asset="";com.workinman.display.Element.call(this,inData);this._addElement(new com.workinman.display.TextLocalized(0,0,"round_start","",{origin:new com.workinman.math.WorkinPoint(.5,.5)}));}
this._lifetime=-1;if(inData.lifetime)this._lifetime=inData.lifetime;};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasic"]=com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasic;com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasic.__name__=["com","nick","kung_fu_panda","boss_beat_down","world","elements","effects","EffectBasic"];com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasic.__super__=com.workinman.display.Element;com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasic.prototype=$extend(com.workinman.display.Element.prototype,{update:function(dt){com.workinman.display.Element.prototype.update.call(this,dt);if(this._lifetime>-1){this._lifetime-=dt;if(this._lifetime<=0)this._setDoDelete(true);}},__class__:com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasic});com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated=function(inData){com.workinman.display.AnimatedElement.call(this,inData);this._lifetime=-1;if(inData.lifetime)this._lifetime=inData.lifetime;if(inData.vX)this._velocity.x=inData.vX;if(inData.vY)this._velocity.y=inData.vY;this._addAnimations();this.animate("idle",1);};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated"]=com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated;com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated.__name__=["com","nick","kung_fu_panda","boss_beat_down","world","elements","effects","EffectBasicAnimated"];com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated.__super__=com.workinman.display.AnimatedElement;com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated.prototype=$extend(com.workinman.display.AnimatedElement.prototype,{_onAnimationComplete:function(){this._setDoDelete(true);},update:function(dt){com.workinman.display.AnimatedElement.prototype.update.call(this,dt);if(this._lifetime>-1){this._lifetime-=dt;if(this._lifetime<=0)this._setDoDelete(true);}
this.updatePositionFromVelocity(dt);},_addAnimations:function(){this.addAnimation("idle",1,24);},__class__:com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated});com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectCountDownText=function(){}
$hxClasses["com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectCountDownText"]=com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectCountDownText;com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectCountDownText.__name__=["com","nick","kung_fu_panda","boss_beat_down","world","elements","effects","EffectCountDownText"];com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectCountDownText.__super__=com.workinman.display.Element;com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectCountDownText.prototype=$extend(com.workinman.display.Element.prototype,{update:function(dt){var deltaScale=this._render.scaleX>this._targetScale?-dt*4:dt*4;this._text._getRenderable().scaleX+=deltaScale;this._text._getRenderable().scaleY+=deltaScale;if(deltaScale>0&&this._text._getRenderable().scaleX>=this._targetScale)this._targetScale=.1;else if(deltaScale<0&&this._text._getRenderable().scaleX<=this._targetScale)this._setDoDelete(true);},__class__:com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectCountDownText});com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectPickup=function(inData){inData.layer=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_FG;inData.library="flump_effects";inData.movie="powerup_poface";com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated.call(this,inData);com.workinman.utils.WorkinCloud.instance._getSound().playSound("skadoosh_intro");};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectPickup"]=com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectPickup;com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectPickup.__name__=["com","nick","kung_fu_panda","boss_beat_down","world","elements","effects","EffectPickup"];com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectPickup.__super__=com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated;com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectPickup.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated.prototype,{_onAnimationComplete:function(){com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated.prototype._onAnimationComplete.call(this);com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_PICKUP_DONE));},update:function(dt){com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectBasicAnimated.prototype.update.call(this,dt);},_addAnimations:function(){this.addAnimation("idle",1,38);},__class__:com.nick.kung_fu_panda.boss_beat_down.world.elements.effects.EffectPickup});com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents={}
com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent=function(pData,eManager,level){this._STATE_SKADOOSHED=7;this._STATE_CHOOSE_ATTACK=6;this._STATE_HIT=5;this._STATE_REACT=4;this._STATE_ATTACK=3;this._STATE_TELEGRAPH_ATTACK=2;this._STATE_IDLE=1;this._STATE_INTRO=0;pData.layer=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_DUMMY;com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D.call(this,pData,eManager);this._render.width=180;this._render.height=400;this.setOrigin(new com.workinman.math.WorkinPoint(.5,.5));this._resetKnockBack();this._dazedForFinisher=false;this._vulnerable=true;this._criticalWindow=[];this._criticalTiming=false;this._state=-1;this._actionPosition=[0,0,0];this._level=level;this._telegraphTimer=0;this._active=false;this._shakeOrigin=new com.workinman.math.WorkinPoint();this._addAnimations();this._setState(this._STATE_INTRO);};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent"]=com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent;com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.__name__=["com","nick","kung_fu_panda","boss_beat_down","world","elements","opponents","Opponent"];com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.__super__=com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D;com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D.prototype,{_activateBehavior:function(inEvent){this._active=true;},_removeEventListeners:function(){com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D.prototype._removeEventListeners.call(this);com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ROUND_START,$bind(this,this._activateBehavior));},_addEventListeners:function(){com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D.prototype._addEventListeners.call(this);com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ROUND_START,$bind(this,this._activateBehavior));},_getVulnerable:function(){return this._vulnerable;},dispose:function(){com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D.prototype.dispose.call(this);this._criticalWindow=null;this._shakeOrigin=null;this._actionPosition=null;},_resetKnockBack:function(){},skadoosh:function(){this._setState(this._STATE_SKADOOSHED);this._velocity.y=-200;},finishingState:function(){this._setState(this._STATE_IDLE);this._dazedForFinisher=true;},hit:function(pDamage,pPower,dumpling){if(dumpling==null)dumpling=false;if(pPower==null)pPower=1;if(pDamage==null)pDamage=10;var criticalHit=false;this._shakeOrigin=this._pos.copy();this._shakeTimer=.25;this._knockbackResistance-=pPower;if(this._dazedForFinisher){if(pDamage>=100){com.workinman.utils.WorkinCloud.instance._getSound().playSound("skadoosh");this.skadoosh();}else if(dumpling)com.workinman.utils.WorkinCloud.instance._getSound().playSound("punch_"+com.workinman.utils.WorkinUtils.getRandom(0,1,true)+"_dumpling");else com.workinman.utils.WorkinCloud.instance._getSound().playSound("punch_kfp_"+com.workinman.utils.WorkinUtils.getRandom(0,2,true));return true;}
if(this._criticalTiming){com.workinman.utils.WorkinCloud.instance._getSound().playSound("punch_2");com.workinman.utils.WorkinCloud.instance.modifyInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT,-pDamage);criticalHit=true;}else{if(dumpling)com.workinman.utils.WorkinCloud.instance._getSound().playSound("punch_"+com.workinman.utils.WorkinUtils.getRandom(0,1,true)+"_dumpling");else com.workinman.utils.WorkinCloud.instance._getSound().playSound("punch_"+com.workinman.utils.WorkinUtils.getRandom(0,1,true));com.workinman.utils.WorkinCloud.instance.modifyInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT,-pDamage);}
if(com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT)>0){if(this._knockbackResistance<=0){this._resetKnockBack();this._setState(this._STATE_REACT);}}
return criticalHit;},block:function(){},_updateState:function(dt){switch(this._state){case this._STATE_IDLE:if(this._shakeTimer>0){this._shakeTimer-=dt;if(this._shakeTimer<=0)this._shakeTimer=0;this._pos=new com.workinman.math.WorkinPoint(this._shakeOrigin.x+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.y+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._pos.z);}
break;case this._STATE_TELEGRAPH_ATTACK:this._pos=new com.workinman.math.WorkinPoint(this._shakeOrigin.x+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.y+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.z+com.workinman.utils.WorkinUtils.getRandom(-2,2));this._telegraphTimer-=dt;if(this._telegraphTimer<=0)this._setState(this._STATE_ATTACK);break;case this._STATE_ATTACK:if(this._actionFrame>-1&&this._currentFrame>=this._actionFrame){this._actionFrame=-1;com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OP_ATTACK,{damage:10,attackArray:this._actionPosition}));this._vulnerable=true;}
break;case this._STATE_REACT:break;case this._STATE_HIT:break;}},update:function(dt){com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D.prototype.update.call(this,dt);this._updateState(dt);},_chooseAttack:function(){},_animateAttack:function(){this.animate(this._attackAnimation,1);},_sendTelegraphAlerts:function(){if(this._actionPosition[0]>0)com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ATTACK_ALERT,{type:this._actionPosition[0],position:-1,time:this._telegraphTimer,attack:"blockable"}));if(this._actionPosition[1]>0)com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ATTACK_ALERT,{type:this._actionPosition[1],position:0,time:this._telegraphTimer,attack:"blockable"}));if(this._actionPosition[2]>0)com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ATTACK_ALERT,{type:this._actionPosition[2],position:1,time:this._telegraphTimer,attack:"blockable"}));},_setState:function(inState){if(this._state==inState)return;this._state=inState;switch(this._state){case this._STATE_INTRO:this.animate("intro",1);this._vulnerable=false;break;case this._STATE_IDLE:this.animate("idle");this._vulnerable=true;break;case this._STATE_TELEGRAPH_ATTACK:this._shakeOrigin=this._pos.copy();this._sendTelegraphAlerts();break;case this._STATE_CHOOSE_ATTACK:this._chooseAttack();this._setState(this._STATE_TELEGRAPH_ATTACK);break;case this._STATE_ATTACK:this._animateAttack();break;case this._STATE_REACT:this.animate("react",1);this._vulnerable=false;break;case this._STATE_HIT:this.animate("react",1);this._vulnerable=false;break;case this._STATE_SKADOOSHED:this._vulnerable=false;this.animate("skadoosh",1);break;}},_addAnimations:function(){this.addAnimation("intro",1,1);this.addAnimation("idle",1,1);this.addAnimation("attack",1,1);this.addAnimation("react",1,1);this.addAnimation("skadoosh",1,1);},__class__:com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent,__properties__:$extend(com.nick.kung_fu_panda.boss_beat_down.world.elements.Element3D.prototype.__properties__,{get_vulnerable:"_getVulnerable"})});com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyAdvanced=function(pData,eManager,level){pData.library="flump_enemies";pData.movie="dummy6";com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.call(this,pData,eManager,level);this._render.width=180;this._render.height=400;this.setOrigin(new com.workinman.math.WorkinPoint(.5,.5));this._setState(this._STATE_INTRO);};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyAdvanced"]=com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyAdvanced;com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyAdvanced.__name__=["com","nick","kung_fu_panda","boss_beat_down","world","elements","opponents","OpponentDummyAdvanced"];com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyAdvanced.__super__=com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent;com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyAdvanced.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.prototype,{dispose:function(){com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.prototype.dispose.call(this);},_onAnimationComplete:function(){switch(this._currentAnimation){case "intro":this._setState(this._STATE_IDLE);com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OPPONENT_READY));break;case "react":case "reactRM":case "reactLM":this._setState(this._STATE_TELEGRAPH_ATTACK);break;case "attack":case "attackLM":case "attackRM":this._setState(this._STATE_IDLE);break;case "dodge":break;case "skadoosh":com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OPPONENT_SKADOOSHED));this._setDoDelete(true);break;}},_resetKnockBack:function(){this._knockbackResistance=com.workinman.utils.WorkinUtils.getRandom(1,2,true);},_updateState:function(dt){switch(this._state){case this._STATE_IDLE:if(this._shakeTimer>0){this._shakeTimer-=dt;if(this._shakeTimer<=0)this._shakeTimer=0;this._pos=new com.workinman.math.WorkinPoint(this._shakeOrigin.x+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.y+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._pos.z);}
break;case this._STATE_TELEGRAPH_ATTACK:this._pos=new com.workinman.math.WorkinPoint(this._shakeOrigin.x+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.y+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.z+com.workinman.utils.WorkinUtils.getRandom(-2,2));this._telegraphTimer-=dt;if(this._telegraphTimer<=0)this._setState(this._STATE_ATTACK);break;case this._STATE_ATTACK:if(this._actionFrame>-1&&this._currentFrame>=this._actionFrame){this._actionFrame=-1;com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OP_ATTACK,{damage:10,attackArray:this._actionPosition}));com.workinman.utils.WorkinCloud.instance._getSound().playSound("swing_0");this._vulnerable=true;}
break;case this._STATE_REACT:break;case this._STATE_HIT:break;case this._STATE_SKADOOSHED:break;}},update:function(dt){com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.prototype.update.call(this,dt);},_chooseAttack:function(){this._telegraphTimer=.3;var upperBound=3;var attackPos=Std["int"](com.workinman.utils.WorkinUtils.getRandom(0,upperBound,true));switch(attackPos){case 0:this._actionPosition=[com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP,0];this._attackAnimation="attackLM";this._actionFrame=156;this.animate("reactLM",1);break;case 1:this._actionPosition=[0,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP];this._attackAnimation="attackRM";this._actionFrame=104;this.animate("reactRM",1);break;case 2:this._actionPosition=[0,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_SHALLOW,0];this._attackAnimation="attack";this._actionFrame=58;this.animate("react",1);break;case 3:this._actionPosition=[0,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP,0];this._attackAnimation="attack";this._actionFrame=58;this.animate("react",1);break;}},_setState:function(inState){if(this._state==inState)return;this._state=inState;switch(this._state){case this._STATE_INTRO:this.animate("intro",1);this._vulnerable=false;break;case this._STATE_IDLE:this.animate("idle");this._vulnerable=true;break;case this._STATE_TELEGRAPH_ATTACK:this._shakeOrigin=this._pos.copy();this._sendTelegraphAlerts();break;case this._STATE_CHOOSE_ATTACK:this._chooseAttack();this._setState(this._STATE_TELEGRAPH_ATTACK);break;case this._STATE_ATTACK:this._animateAttack();break;case this._STATE_REACT:this._chooseAttack();this._vulnerable=false;break;case this._STATE_HIT:this._chooseAttack();this._vulnerable=false;break;case this._STATE_SKADOOSHED:this._vulnerable=false;this.animate("skadoosh",1);break;}},_addAnimations:function(){this.addAnimation("intro",1,36);this.addAnimation("idle",36,36);this.addAnimation("attack",49,72);this.addAnimation("attackRM",94,132);this.addAnimation("attackLM",146,184);this.addAnimation("react",37,48);this.addAnimation("reactRM",81,93);this.addAnimation("reactLM",133,145);this.addAnimation("skadoosh",185,195);},__class__:com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyAdvanced});com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyMedium=function(pData,eManager,level){pData.library="flump_enemies";pData.movie="dummy"+(level+3);com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.call(this,pData,eManager,level);this._render.width=180;this._render.height=400;this.setOrigin(new com.workinman.math.WorkinPoint(.5,.5));this._setState(this._STATE_INTRO);};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyMedium"]=com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyMedium;com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyMedium.__name__=["com","nick","kung_fu_panda","boss_beat_down","world","elements","opponents","OpponentDummyMedium"];com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyMedium.__super__=com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent;com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyMedium.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.prototype,{dispose:function(){com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.prototype.dispose.call(this);},_onAnimationComplete:function(){switch(this._currentAnimation){case "intro":this._setState(this._STATE_IDLE);com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OPPONENT_READY));break;case "react":case "reactRM":case "reactLM":this._setState(this._STATE_TELEGRAPH_ATTACK);break;case "attack":case "attackLM":case "attackRM":this._setState(this._STATE_IDLE);break;case "dodge":break;case "skadoosh":com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OPPONENT_SKADOOSHED));this._setDoDelete(true);break;}},_resetKnockBack:function(){this._knockbackResistance=com.workinman.utils.WorkinUtils.getRandom(2,3,true);},_updateState:function(dt){switch(this._state){case this._STATE_IDLE:if(this._shakeTimer>0){this._shakeTimer-=dt;if(this._shakeTimer<=0)this._shakeTimer=0;this._pos=new com.workinman.math.WorkinPoint(this._shakeOrigin.x+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.y+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._pos.z);}
break;case this._STATE_TELEGRAPH_ATTACK:this._pos=new com.workinman.math.WorkinPoint(this._shakeOrigin.x+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.y+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.z+com.workinman.utils.WorkinUtils.getRandom(-2,2));this._telegraphTimer-=dt;if(this._telegraphTimer<=0)this._setState(this._STATE_ATTACK);break;case this._STATE_ATTACK:if(this._actionFrame>-1&&this._currentFrame>=this._actionFrame){this._actionFrame=-1;com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OP_ATTACK,{damage:10,attackArray:this._actionPosition}));com.workinman.utils.WorkinCloud.instance._getSound().playSound("swing_0");this._vulnerable=true;}
break;case this._STATE_REACT:break;case this._STATE_HIT:break;case this._STATE_SKADOOSHED:this.updatePositionFromVelocity(dt);break;}},update:function(dt){com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.prototype.update.call(this,dt);},_chooseAttack:function(){this._telegraphTimer=.6-.1*this._level;var upperBound=2;if(this._level>2)upperBound=3;var attackPos=Std["int"](com.workinman.utils.WorkinUtils.getRandom(0,upperBound,true));switch(attackPos){case 0:this._actionPosition=[com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_SHALLOW,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_SHALLOW,0];this._attackAnimation="attackLM";this._actionFrame=156;this.animate("reactLM",1);break;case 1:this._actionPosition=[0,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_SHALLOW,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_SHALLOW];this._attackAnimation="attackRM";this._actionFrame=104;this.animate("reactRM",1);break;case 2:this._actionPosition=[0,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_SHALLOW,0];this._attackAnimation="attack";this._actionFrame=58;this.animate("react",1);break;case 3:this._actionPosition=[0,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP,0];this._attackAnimation="attack";this._actionFrame=58;this.animate("react",1);break;}},_setState:function(inState){if(this._state==inState)return;this._state=inState;switch(this._state){case this._STATE_INTRO:this.animate("intro",1);this._vulnerable=false;break;case this._STATE_IDLE:this.animate("idle");this._vulnerable=true;break;case this._STATE_TELEGRAPH_ATTACK:this._shakeOrigin=this._pos.copy();this._sendTelegraphAlerts();break;case this._STATE_CHOOSE_ATTACK:this._setState(this._STATE_TELEGRAPH_ATTACK);break;case this._STATE_ATTACK:this._animateAttack();break;case this._STATE_REACT:this._chooseAttack();this._vulnerable=false;break;case this._STATE_HIT:this._chooseAttack();this._vulnerable=false;break;case this._STATE_SKADOOSHED:this._vulnerable=false;this.animate("skadoosh",1);break;}},_addAnimations:function(){this.addAnimation("intro",1,36);this.addAnimation("idle",36,36);this.addAnimation("attack",49,72);this.addAnimation("attackRM",94,132);this.addAnimation("attackLM",146,184);this.addAnimation("react",37,48);this.addAnimation("reactRM",81,93);this.addAnimation("reactLM",133,145);this.addAnimation("skadoosh",185,195);},__class__:com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyMedium});com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyStandard=function(pData,eManager,level){pData.library="flump_enemies";if(level==1)pData.movie="dummy";else pData.movie="dummy"+level;com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.call(this,pData,eManager,level);this._render.width=180;this._render.height=400;this.setOrigin(new com.workinman.math.WorkinPoint(.5,.5));this._setState(this._STATE_INTRO);};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyStandard"]=com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyStandard;com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyStandard.__name__=["com","nick","kung_fu_panda","boss_beat_down","world","elements","opponents","OpponentDummyStandard"];com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyStandard.__super__=com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent;com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyStandard.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.prototype,{dispose:function(){com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.prototype.dispose.call(this);},_onAnimationComplete:function(){switch(this._currentAnimation){case "intro":this._setState(this._STATE_IDLE);com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OPPONENT_READY));break;case "react":this._setState(this._STATE_CHOOSE_ATTACK);break;case "attack":this._setState(this._STATE_IDLE);break;case "dodge":break;case "skadoosh":com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OPPONENT_SKADOOSHED));this._setDoDelete(true);break;}},_resetKnockBack:function(){this._knockbackResistance=3;},_updateState:function(dt){switch(this._state){case this._STATE_IDLE:if(this._shakeTimer>0){this._shakeTimer-=dt;if(this._shakeTimer<=0)this._shakeTimer=0;this._pos=new com.workinman.math.WorkinPoint(this._shakeOrigin.x+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.y+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._pos.z);}
break;case this._STATE_TELEGRAPH_ATTACK:this._pos=new com.workinman.math.WorkinPoint(this._shakeOrigin.x+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.y+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.z+com.workinman.utils.WorkinUtils.getRandom(-2,2));this._telegraphTimer-=dt;if(this._telegraphTimer<=0)this._setState(this._STATE_ATTACK);break;case this._STATE_ATTACK:if(this._actionFrame>-1&&this._currentFrame>=this._actionFrame){this._actionFrame=-1;com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OP_ATTACK,{damage:10,attackArray:this._actionPosition}));com.workinman.utils.WorkinCloud.instance._getSound().playSound("swing_0");this._vulnerable=true;}
break;case this._STATE_REACT:break;case this._STATE_HIT:break;case this._STATE_SKADOOSHED:this.updatePositionFromVelocity(dt);break;}},update:function(dt){com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.prototype.update.call(this,dt);},_chooseAttack:function(){this._attackAnimation="attack";this._actionFrame=58;this._telegraphTimer=.6-.1*this._level;this._actionPosition=[0,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_SHALLOW,0];},_setState:function(inState){if(this._state==inState)return;this._state=inState;switch(this._state){case this._STATE_INTRO:this.animate("intro",1);this._vulnerable=false;break;case this._STATE_IDLE:this.animate("idle");this._vulnerable=true;break;case this._STATE_TELEGRAPH_ATTACK:this._shakeOrigin=this._pos.copy();this._sendTelegraphAlerts();break;case this._STATE_CHOOSE_ATTACK:this._chooseAttack();this._setState(this._STATE_TELEGRAPH_ATTACK);break;case this._STATE_ATTACK:this._animateAttack();if(!com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_1_COMPLETE))com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_DODGE_1));else if(!com.workinman.utils.WorkinCloud.instance.getBool(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_3_COMPLETE))com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_DODGE_3));break;case this._STATE_REACT:this.animate("react",1);this._vulnerable=false;break;case this._STATE_HIT:this.animate("react",1);this._vulnerable=false;break;case this._STATE_SKADOOSHED:this._vulnerable=false;this.animate("skadoosh",1);break;}},_addAnimations:function(){this.addAnimation("intro",1,36);this.addAnimation("idle",36,36);this.addAnimation("attack",49,72);this.addAnimation("react",37,48);this.addAnimation("skadoosh",81,92);},__class__:com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyStandard});com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyUnblockable=function(pData,eManager,level){pData.library="flump_enemies";pData.movie="dummy7";com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.call(this,pData,eManager,level);this._render.width=180;this._render.height=400;this.setOrigin(new com.workinman.math.WorkinPoint(.5,.5));this._setState(this._STATE_INTRO);};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyUnblockable"]=com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyUnblockable;com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyUnblockable.__name__=["com","nick","kung_fu_panda","boss_beat_down","world","elements","opponents","OpponentDummyUnblockable"];com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyUnblockable.__super__=com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent;com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyUnblockable.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.prototype,{dispose:function(){com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.prototype.dispose.call(this);},_onAnimationComplete:function(){switch(this._currentAnimation){case "intro":this._setState(this._STATE_IDLE);com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OPPONENT_READY));break;case "react":case "reactRM":case "reactLM":this._setState(this._STATE_TELEGRAPH_ATTACK);break;case "attack":case "attackLM":case "attackRM":this._setState(this._STATE_IDLE);break;case "dodge":break;case "skadoosh":com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OPPONENT_SKADOOSHED));this._setDoDelete(true);break;}},_resetKnockBack:function(){this._knockbackResistance=com.workinman.utils.WorkinUtils.getRandom(2,3,true);},_updateState:function(dt){switch(this._state){case this._STATE_IDLE:if(this._shakeTimer>0){this._shakeTimer-=dt;if(this._shakeTimer<=0)this._shakeTimer=0;this._pos=new com.workinman.math.WorkinPoint(this._shakeOrigin.x+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.y+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._pos.z);}
break;case this._STATE_TELEGRAPH_ATTACK:this._pos=new com.workinman.math.WorkinPoint(this._shakeOrigin.x+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.y+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.z+com.workinman.utils.WorkinUtils.getRandom(-2,2));this._telegraphTimer-=dt;if(this._telegraphTimer<=0)this._setState(this._STATE_ATTACK);break;case this._STATE_ATTACK:if(this._actionFrame>-1&&this._currentFrame>=this._actionFrame){this._actionFrame=-1;com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OP_ATTACK,{damage:10,attackArray:this._actionPosition}));com.workinman.utils.WorkinCloud.instance._getSound().playSound("swing_0");this._vulnerable=true;}
break;case this._STATE_REACT:break;case this._STATE_HIT:break;case this._STATE_SKADOOSHED:this.updatePositionFromVelocity(dt);break;}},update:function(dt){com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.prototype.update.call(this,dt);},_chooseAttack:function(){this._telegraphTimer=.2;var upperBound=3;var attackPos=Std["int"](com.workinman.utils.WorkinUtils.getRandom(0,upperBound,true));switch(attackPos){case 0:this._actionPosition=[com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP,0];this._attackAnimation="attackLM";this._actionFrame=156;this.animate("reactLM",1);break;case 1:this._actionPosition=[0,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP];this._attackAnimation="attackRM";this._actionFrame=104;this.animate("reactRM",1);break;case 2:this._actionPosition=[0,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_SHALLOW,0];this._attackAnimation="attack";this._actionFrame=58;this.animate("react",1);break;case 3:this._actionPosition=[0,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP,0];this._attackAnimation="attack";this._actionFrame=58;this.animate("react",1);break;}},_sendTelegraphAlerts:function(){if(this._actionPosition[0]>0)com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ATTACK_ALERT,{type:this._actionPosition[0],position:-1,time:this._telegraphTimer,attack:"unblockable"}));if(this._actionPosition[1]>0)com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ATTACK_ALERT,{type:this._actionPosition[1],position:0,time:this._telegraphTimer,attack:"unblockable"}));if(this._actionPosition[2]>0)com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ATTACK_ALERT,{type:this._actionPosition[2],position:1,time:this._telegraphTimer,attack:"unblockable"}));},_setState:function(inState){if(this._state==inState)return;this._state=inState;switch(this._state){case this._STATE_INTRO:this.animate("intro",1);this._vulnerable=false;break;case this._STATE_IDLE:this.animate("idle");this._vulnerable=true;break;case this._STATE_TELEGRAPH_ATTACK:this._shakeOrigin=this._pos.copy();this._sendTelegraphAlerts();break;case this._STATE_CHOOSE_ATTACK:this._chooseAttack();this._setState(this._STATE_TELEGRAPH_ATTACK);break;case this._STATE_ATTACK:this._animateAttack();break;case this._STATE_REACT:this._chooseAttack();this._vulnerable=false;break;case this._STATE_HIT:this._chooseAttack();this._vulnerable=false;break;case this._STATE_SKADOOSHED:this._vulnerable=false;this.animate("skadoosh",1);break;}},_addAnimations:function(){this.addAnimation("intro",1,36);this.addAnimation("idle",36,36);this.addAnimation("attack",49,72);this.addAnimation("attackRM",94,132);this.addAnimation("attackLM",146,184);this.addAnimation("react",37,48);this.addAnimation("reactRM",81,93);this.addAnimation("reactLM",133,145);this.addAnimation("skadoosh",185,195);},__class__:com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentDummyUnblockable});com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentFung=function(pData,eManager){pData.library="flump_fung";pData.movie="fung";pData.layer=com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_DUMMY;com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.call(this,pData,eManager,1);this._render.width=180;this._render.height=400;this.setOrigin(new com.workinman.math.WorkinPoint(.5,.5));this._attackTimer=100;this._setState(this._STATE_INTRO);};$hxClasses["com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentFung"]=com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentFung;com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentFung.__name__=["com","nick","kung_fu_panda","boss_beat_down","world","elements","opponents","OpponentFung"];com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentFung.__super__=com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent;com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentFung.prototype=$extend(com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.prototype,{dispose:function(){com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.prototype.dispose.call(this);},_onAnimationComplete:function(){switch(this._currentAnimation){case "intro":this._setState(this._STATE_IDLE);com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OPPONENT_READY));break;case "react":case "react_side":case "react_wide":this._setState(this._STATE_TELEGRAPH_ATTACK);break;case "attack":case "attack_side":case "attack_wide":this._setState(this._STATE_IDLE);break;case "block_in":case "block":this.animate("block_idle");break;case "hit1":case "hit2":this._setState(this._STATE_IDLE);break;case "hit3":this._resetKnockBack();if(!this._dazedForFinisher)this._setState(this._STATE_REACT);break;case "skadoosh":com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OPPONENT_SKADOOSHED));this._setDoDelete(true);break;}},_resetKnockBack:function(){this._knockbackResistance=com.workinman.utils.WorkinUtils.getRandom(1,3,true);},_updateState:function(dt){switch(this._state){case this._STATE_INTRO:if(this._actionFrame>-1&&this._currentFrame>=this._actionFrame){this._actionFrame=-1;com.workinman.utils.WorkinCloud.instance._getSound().playSound("fung_slash");}
break;case this._STATE_IDLE:if(this._shakeTimer>0){this._shakeTimer-=dt;if(this._shakeTimer<=0)this._shakeTimer=0;this._pos=new com.workinman.math.WorkinPoint(this._shakeOrigin.x+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.y+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._pos.z);}
if(!this._dazedForFinisher&&this._active){this._attackTimer-=dt;if(this._attackTimer<=0)this._setState(this._STATE_CHOOSE_ATTACK);}
break;case this._STATE_TELEGRAPH_ATTACK:this._pos=new com.workinman.math.WorkinPoint(this._shakeOrigin.x+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.y+com.workinman.utils.WorkinUtils.getRandom(-2,2),this._shakeOrigin.z+com.workinman.utils.WorkinUtils.getRandom(-2,2));this._telegraphTimer-=dt;if(this._telegraphTimer<=0)this._setState(this._STATE_ATTACK);break;case this._STATE_ATTACK:if(this._actionFrame>-1&&this._currentFrame>=this._actionFrame){this._actionFrame=-1;com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OP_ATTACK,{damage:10,attackArray:this._actionPosition}));if(this._attackAnimation=="attack_wide")com.workinman.utils.WorkinCloud.instance._getSound().playSound("fung_slash");else com.workinman.utils.WorkinCloud.instance._getSound().playSound("fung_slash_small");}
break;case this._STATE_REACT:this._attackTimer-=dt;if(this._attackTimer<=0)this._setState(this._STATE_CHOOSE_ATTACK);break;case this._STATE_HIT:break;case this._STATE_SKADOOSHED:break;}},update:function(dt){com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.Opponent.prototype.update.call(this,dt);},_chooseAttack:function(){this._telegraphTimer=.3;var lowerBound=0;var upperBound=3;if(com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT)<com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT_MAX)*.5){lowerBound=1;upperBound=4;}
var attackPos=Std["int"](com.workinman.utils.WorkinUtils.getRandom(0,upperBound,true));switch(attackPos){case 0:this._actionPosition=[0,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_SHALLOW,0];this._attackAnimation="attack";this._actionFrame=169;this._telegraphTimer=.1;this.animate("react",1);break;case 1:this._actionPosition=[com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP,0];this._attackAnimation="attack_side";this._actionFrame=210;this.animate("react_side",1);break;case 2:this._actionPosition=[0,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP];this._attackAnimation="attack_side";this._actionFrame=210;this._render.scaleX=-1;this.animate("react_side",1);break;case 3:this._actionPosition=[0,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP,0];this._attackAnimation="attack";this._actionFrame=169;this._telegraphTimer=.2;this.animate("react",1);break;case 4:this._actionPosition=[com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_SHALLOW,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_SHALLOW,com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_SHALLOW];this._attackAnimation="attack_wide";this._actionFrame=362;this._telegraphTimer=.5;this.animate("react_wide",1);break;}},hit:function(pDamage,pPower,dumpling){if(dumpling==null)dumpling=false;if(pPower==null)pPower=1;if(pDamage==null)pDamage=10;var criticalHit=false;this._shakeOrigin=this._pos.copy();this._shakeTimer=.25;this._knockbackResistance-=pPower;if(this._dazedForFinisher){if(pDamage>=100){com.workinman.utils.WorkinCloud.instance._getSound().playSound("skadoosh");this.skadoosh();}else{if(dumpling)com.workinman.utils.WorkinCloud.instance._getSound().playSound("punch_"+com.workinman.utils.WorkinUtils.getRandom(0,1,true)+"_dumpling");else com.workinman.utils.WorkinCloud.instance._getSound().playSound("punch_kfp_"+com.workinman.utils.WorkinUtils.getRandom(0,2,true));if(this._knockbackResistance<0)this._resetKnockBack();this._setState(this._STATE_HIT);}
return true;}
if(this._criticalTiming){com.workinman.utils.WorkinCloud.instance._getSound().playSound("punch_2");com.workinman.utils.WorkinCloud.instance.modifyInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT,-pDamage);criticalHit=true;}else{if(dumpling)com.workinman.utils.WorkinCloud.instance._getSound().playSound("punch_"+com.workinman.utils.WorkinUtils.getRandom(0,1,true)+"_dumpling");else com.workinman.utils.WorkinCloud.instance._getSound().playSound("punch_"+com.workinman.utils.WorkinUtils.getRandom(0,1,true));com.workinman.utils.WorkinCloud.instance.modifyInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT,-pDamage);}
if(com.workinman.utils.WorkinCloud.instance.getInt(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT)>0){if(this._knockbackResistance<0){this._resetKnockBack();this._setState(this._STATE_REACT);}else this._setState(this._STATE_HIT);}
return criticalHit;},block:function(){if(this._state==this._STATE_REACT){this.animate("block",1);com.workinman.utils.WorkinCloud.instance._getSound().playSound("fung_block");}},_setState:function(inState){if(this._state==inState)return;this._state=inState;switch(this._state){case this._STATE_INTRO:this.animate("intro",1);this._actionFrame=69;this._vulnerable=false;break;case this._STATE_IDLE:this.animate("idle");this._render.scaleX=1;this._attackTimer=com.workinman.utils.WorkinUtils.getRandom(1,2);this._vulnerable=true;break;case this._STATE_TELEGRAPH_ATTACK:this._shakeOrigin=this._pos.copy();this._sendTelegraphAlerts();break;case this._STATE_CHOOSE_ATTACK:this._vulnerable=false;this._chooseAttack();break;case this._STATE_ATTACK:this._animateAttack();break;case this._STATE_REACT:this.animate("block_in",1);this._attackTimer=1.5;this._vulnerable=false;break;case this._STATE_HIT:console.log("animate: "+"hit"+(3-this._knockbackResistance));this.animate("hit"+(3-this._knockbackResistance),1);if(!this._dazedForFinisher)this._vulnerable=false;break;case this._STATE_SKADOOSHED:this._vulnerable=false;this.animate("skadoosh",1);break;}},_addAnimations:function(){this.addAnimation("intro",1,84);this.addAnimation("idle",85,138);this.addAnimation("attack",158,181);this.addAnimation("attack_side",202,229);this.addAnimation("attack_wide",357,374);this.addAnimation("react",139,157);this.addAnimation("react_side",182,201);this.addAnimation("react_wide",332,356);this.addAnimation("hit1",230,236);this.addAnimation("hit2",237,243);this.addAnimation("hit3",244,250);this.addAnimation("block_in",251,255);this.addAnimation("block_idle",256,281);this.addAnimation("block",282,285);this.addAnimation("skadoosh",286,331);},__class__:com.nick.kung_fu_panda.boss_beat_down.world.elements.opponents.OpponentFung});var flambe={}
flambe.util={}
flambe.util.Disposable=function(){}
$hxClasses["flambe.util.Disposable"]=flambe.util.Disposable;flambe.util.Disposable.__name__=["flambe","util","Disposable"];flambe.util.Disposable.prototype={__class__:flambe.util.Disposable}
flambe.Component=function(){}
$hxClasses["flambe.Component"]=flambe.Component;flambe.Component.__name__=["flambe","Component"];flambe.Component.__interfaces__=[flambe.util.Disposable];flambe.Component.prototype={_internal_setNext:function(next){this.next=next;},_internal_init:function(owner,next){this.owner=owner;this.next=next;},get_name:function(){return null;},dispose:function(){if(this.owner!=null)this.owner.remove(this);},onUpdate:function(dt){},onRemoved:function(){},onAdded:function(){},__class__:flambe.Component,__properties__:{get_name:"get_name"}}
com.workinman.components={}
com.workinman.components.ComponentUpdater=function(){this._paused=false;};$hxClasses["com.workinman.components.ComponentUpdater"]=com.workinman.components.ComponentUpdater;com.workinman.components.ComponentUpdater.__name__=["com","workinman","components","ComponentUpdater"];com.workinman.components.ComponentUpdater.__super__=flambe.Component;com.workinman.components.ComponentUpdater.prototype=$extend(flambe.Component.prototype,{setPaused:function(pPaused){this._paused=pPaused;return this._paused;},getPaused:function(){return this._paused;},onUpdate:function(dt){if(this._paused)return;com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventUpdate(dt));},get_name:function(){return "ComponentUpdater_3";},__class__:com.workinman.components.ComponentUpdater});com.workinman.data={}
com.workinman.data.ConstantsCloud=function(){}
$hxClasses["com.workinman.data.ConstantsCloud"]=com.workinman.data.ConstantsCloud;com.workinman.data.ConstantsCloud.__name__=["com","workinman","data","ConstantsCloud"];com.workinman.data.ConstantsCloud.getUniqueId=function(){return Std.string(com.workinman.data.ConstantsCloud._uniqueId++);}
com.workinman.data.ConstantsCloud.getIsAndroid=function(){return js.Lib.window.navigator.userAgent.indexOf("Linux; U; Android 4")>=0;return false;}
com.workinman.display.QueuedAnimation=function(){}
$hxClasses["com.workinman.display.QueuedAnimation"]=com.workinman.display.QueuedAnimation;com.workinman.display.QueuedAnimation.__name__=["com","workinman","display","QueuedAnimation"];com.workinman.display.QueuedAnimation.prototype={_getForce:function(){return this._force;},_getLoops:function(){return this._loops;},_getName:function(){return this._name;},__class__:com.workinman.display.QueuedAnimation,__properties__:{get_name:"_getName",get_loops:"_getLoops",get_force:"_getForce"}}
com.workinman.display.AnimationDef=function(pId,pStartFrame,pEndFrame){this._id=pId;this._startFrame=pStartFrame;this._endFrame=pEndFrame;this._playReverse=false;if(pStartFrame>pEndFrame){this._playReverse=true;this._startFrame=pEndFrame;this._endFrame=pStartFrame;}};$hxClasses["com.workinman.display.AnimationDef"]=com.workinman.display.AnimationDef;com.workinman.display.AnimationDef.__name__=["com","workinman","display","AnimationDef"];com.workinman.display.AnimationDef.prototype={_getId:function(){return this._id;},_getReverse:function(){return this._playReverse;},_getEnd:function(){return this._endFrame;},_getStart:function(){return this._startFrame;},__class__:com.workinman.display.AnimationDef,__properties__:{get_start:"_getStart",get_end:"_getEnd",get_reverse:"_getReverse"}}
com.workinman.display.ElementManager=function(pTimeline,pCameraX,pCameraY,pCameraZ){this._timeline=pTimeline;this._layers=new Hash();this._elements=new Array();this._camera=new com.workinman.math.WorkinCamera(pCameraX,pCameraY,pCameraZ);this._zSortLayers=new Hash();};$hxClasses["com.workinman.display.ElementManager"]=com.workinman.display.ElementManager;com.workinman.display.ElementManager.__name__=["com","workinman","display","ElementManager"];com.workinman.display.ElementManager.prototype={renderElements:function(){var _g=0,_g1=this._elements;while(_g<_g1.length){var e=_g1[_g];++_g;e.renderPosition(this._camera);}},updateElements:function(dt){this._i=this._elements.length;while(this._i>0){this._i--;this._elements[this._i].update(dt);if(this._elements[this._i]._getDoDelete())this.removeElementAtIndex(this._i);}},removeElementAtIndex:function(pIndex){this._elements[pIndex]._getEntity().parent.removeChild(this._elements[pIndex]._getEntity());this._elements[pIndex]._setDoDelete(true);this._elements[pIndex].dispose();this._elements.splice(pIndex,1);},addElement:function(pElement){if(this._layers.exists(pElement._getLayer())==false){com.workinman.utils.WorkinCloud.instance.log("[ElementManager](addElement) Trying to add element to non-existant layer '"+pElement._getLayer()+"'!");return pElement;}
this._i=0;while(this._i<this._elements.length){if(this._elements[this._i]._getUniqueId()==pElement._getUniqueId()){this._layers.get(pElement._getLayer()).addChild(pElement._getEntity());return pElement;}
this._i++;}
this._elements.push(pElement);this._layers.get(pElement._getLayer()).addChild(pElement._getEntity());if(this._zSortLayers.exists(pElement._getLayer()))this._zSortLayers.get(pElement._getLayer()).push(pElement);return pElement;},addLayer:function(pLayerName,pZSortLayer){if(pZSortLayer==null)pZSortLayer=false;if(this._layers.exists(pLayerName)){this._timeline.removeChild(this._layers.get(pLayerName));this._timeline.addChild(this._layers.get(pLayerName));return;}
var tLayer=new flambe.Entity();this._timeline.addChild(tLayer);this._layers.set(pLayerName,tLayer);tLayer=null;if(pZSortLayer){var tElements=new Array();this._zSortLayers.set(pLayerName,tElements);}},_getElements:function(){return this._elements;},_getCamera:function(){return this._camera;},dispose:function(){while(this._elements.length>0)this.removeElementAtIndex(this._elements.length-1);this._elements=null;this._camera.dispose();this._camera=null;var $it0=this._layers.iterator();while($it0.hasNext()){var l=$it0.next();l.dispose();}
this._layers=null;this._timeline=null;},__class__:com.workinman.display.ElementManager,__properties__:{get_camera:"_getCamera"}}
com.workinman.display.PoolManager=function(){this._pools=new Hash();};$hxClasses["com.workinman.display.PoolManager"]=com.workinman.display.PoolManager;com.workinman.display.PoolManager.__name__=["com","workinman","display","PoolManager"];com.workinman.display.PoolManager.prototype={dispose:function(){var $it0=this._pools.iterator();while($it0.hasNext()){var pool=$it0.next();pool.dispose();}
this._pools=null;},__class__:com.workinman.display.PoolManager}
com.workinman.display.PoolData=function(){}
$hxClasses["com.workinman.display.PoolData"]=com.workinman.display.PoolData;com.workinman.display.PoolData.__name__=["com","workinman","display","PoolData"];com.workinman.display.PoolData.prototype={dispose:function(){var i=0;while(i<this._elements.length){this._elements[i]._setIsPooled(false);this._elements[i].dispose();i++;}
this._elements=null;this._class=null;},__class__:com.workinman.display.PoolData}
com.workinman.display.Renderable=function(pWidth,pHeight){if(pHeight==null)pHeight=1;if(pWidth==null)pWidth=1;this.x=0;this.y=0;this.rotation=0;this.scaleX=1;this.scaleY=1;this.width=pWidth;this.height=pHeight;this.alpha=1;this.visible=true;};$hxClasses["com.workinman.display.Renderable"]=com.workinman.display.Renderable;com.workinman.display.Renderable.__name__=["com","workinman","display","Renderable"];com.workinman.display.Renderable.prototype={__class__:com.workinman.display.Renderable}
com.workinman.display.TextBase=function(inX,inY,inText,inFont,inData){if(inFont==null)inFont="";if(inData==null)inData={};inData.x=inX;inData.y=inY;com.workinman.display.Element.call(this,inData);if(inFont=="")inFont=com.workinman.data.ConstantsCloud.FONT_DEFAULT;this._textString=inText;this._fontName=inFont;this._spacing=inData.spacing?inData.spacing:0;this._width=inData.width?inData.width:Math.POSITIVE_INFINITY;this._flagCenter=inData.center?inData.center:false;this._textDisplay=new Array();this._textDisplay.push(new flambe.display.TextSprite(com.workinman.utils.WorkinCloud.instance.getAssets().getFont(this._fontName),""));this.swapTexture(this._textDisplay[0]);this._textDisplay[0].set_pointerEnabled(false);this.renderPositionWithoutCamera();};$hxClasses["com.workinman.display.TextBase"]=com.workinman.display.TextBase;com.workinman.display.TextBase.__name__=["com","workinman","display","TextBase"];com.workinman.display.TextBase.__super__=com.workinman.display.Element;com.workinman.display.TextBase.prototype=$extend(com.workinman.display.Element.prototype,{_cleanUp:function(){while(this._textDisplay.length>1){var element=this._textDisplay.pop();this._textureEntity.removeChild(element._getEntity());}},_renderTextToDisplay:function(){this._textDisplay[0].set_text(this._textString);},_renderFontToDisplay:function(){var _g=0,_g1=this._textDisplay;while(_g<_g1.length){var text=_g1[_g];++_g;text.set_font(com.workinman.utils.WorkinCloud.instance.getAssets().getFont(this._fontName));}},_setText:function(inText){this._textString=inText;this._renderTextToDisplay();return this._textString;},_getText:function(){return this._textString;},_setFont:function(inFont){if(inFont=="")return "";this._fontName=inFont;this._renderFontToDisplay();return this._fontName;},_getFont:function(){return this._fontName;},_updateTextDisplay:function(pString,scale){if(scale==null)scale=1;this._cleanUp();if(pString==""){this._textDisplay[0].set_text(pString);return;}
StringTools.replace(pString,"<br>","\r\n");var textArray=new Array();var glyphs=this._textDisplay[0].get_font().getGlyphs(pString);var tWidth=0;var i=0;var lastIndex=0;while(i<glyphs.length){var glyph=glyphs[i];i++;if(i==glyphs.length)tWidth+=glyph.width*scale;else{var nextGlyph=glyphs[i];tWidth+=glyph.xAdvance*scale+glyph.getKerning(nextGlyph.charCode)*scale;if(i<glyphs.length-1&&glyphs[i-1].charCode==92&&glyphs[i].charCode==114&&glyphs[i+1].charCode==92&&glyphs[i+2].charCode==110){var index=i-1;textArray.push(pString.substring(lastIndex,index));lastIndex=index+4;tWidth=0;}}
if(tWidth>=this._width){var space=true;var index=pString.lastIndexOf(" ",i);if(index==-1){space=false;index=i-1;}else index++;textArray.push(pString.substring(lastIndex,index)+(space?"":"-"));lastIndex=index;tWidth=0;}
if(i==glyphs.length)textArray.push(pString.substring(lastIndex,i));}
var firstText=textArray.shift();this._textDisplay[0].set_text(firstText);this._texture.x.set__(-(this._renderOrigin.x*this._textDisplay[0].getNaturalWidth()));this._texture.y.set__(-(this._renderOrigin.y*this._textDisplay[0].getNaturalHeight()));var _g=0;while(_g<textArray.length){var text=textArray[_g];++_g;this._textDisplay.push(new flambe.display.TextSprite(com.workinman.utils.WorkinCloud.instance.getAssets().getFont(this._fontName),text));this.addTextDisplay(this._textDisplay[this._textDisplay.length-1]);}},addTextDisplay:function(inSprite){if(this._flagCenter)inSprite.x.set__(this._renderOrigin.x*(this._texture.getNaturalWidth()-inSprite.getNaturalWidth()));inSprite.y.set__(this._render.height+inSprite.getNaturalHeight()+this._spacing);this._render.height+=inSprite.getNaturalHeight()+this._spacing;this._render.width=Math.max(this._render.width,inSprite.getNaturalWidth());this._textureEntity.addChild(new flambe.Entity().add(inSprite));},_getTextDisplay:function(){return this._textDisplay;},__class__:com.workinman.display.TextBase,__properties__:$extend(com.workinman.display.Element.prototype.__properties__,{set_font:"_setFont",get_font:"_getFont",set_text:"_setText",get_text:"_getText"})});com.workinman.display.TextInput=function(inX,inY,inText,inFont,inData){if(inFont==null)inFont="";inText="";com.workinman.display.TextBase.call(this,inX,inY,inText,inFont,inData);com.workinman.utils.WorkinCloud.instance.getDispatcher().addEventListener(com.workinman.data.ConstantsCloud.EVENT_INPUT_ARBITRARY_KEY,$bind(this,this._onEventInputArbitraryKey));this._renderTextToDisplay();};$hxClasses["com.workinman.display.TextInput"]=com.workinman.display.TextInput;com.workinman.display.TextInput.__name__=["com","workinman","display","TextInput"];com.workinman.display.TextInput.__super__=com.workinman.display.TextBase;com.workinman.display.TextInput.prototype=$extend(com.workinman.display.TextBase.prototype,{dispose:function(){com.workinman.utils.WorkinCloud.instance.getDispatcher().removeEventListener(com.workinman.data.ConstantsCloud.EVENT_INPUT_ARBITRARY_KEY,$bind(this,this._onEventInputArbitraryKey));com.workinman.display.TextBase.prototype.dispose.call(this);},setOrigin:function(pOrigin){this._renderOrigin.toPoint(pOrigin);this._texture.x.set__(-(this._renderOrigin.x*this._render.width));this._texture.y.set__(-(this._renderOrigin.y*this._render.height));},addCharacter:function(pChar){this._textString=this._textString+pChar;this._updateTextDisplay(this._textString);},backspace:function(){this._textString=HxOverrides.substr(this._textString,0,this._textString.length-1);this._updateTextDisplay(this._textString);},space:function(){this.addCharacter(" ");},_onEventInputArbitraryKey:function(pEvent){if(pEvent._getData().key.toString().toLowerCase()=="backspace")this.backspace();else if(pEvent._getData().key.toString().toLowerCase()=="space")this.space();else if(pEvent._getData().key.toString().toLowerCase().indexOf("number")==0)this.addCharacter(pEvent._getData().key.toString().charAt(6));else if(pEvent._getData().key.toString().toLowerCase()=="enter")com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_INPUT_FIELD_ENTER,{string:this._textString}));else if(pEvent._getData().key.toString().length==1)this.addCharacter(pEvent._getData().key.toString());},__class__:com.workinman.display.TextInput});com.workinman.display.TextLocalized=function(inX,inY,inText,inFont,inData){if(inFont==null)inFont="";com.workinman.display.TextBase.call(this,inX,inY,inText,inFont,inData);this._renderTextToDisplay();};$hxClasses["com.workinman.display.TextLocalized"]=com.workinman.display.TextLocalized;com.workinman.display.TextLocalized.__name__=["com","workinman","display","TextLocalized"];com.workinman.display.TextLocalized.__super__=com.workinman.display.TextBase;com.workinman.display.TextLocalized.prototype=$extend(com.workinman.display.TextBase.prototype,{setOrigin:function(pOrigin){this._renderOrigin.toPoint(pOrigin);this._texture.x.set__(-(this._renderOrigin.x*this._render.width));this._texture.y.set__(-(this._renderOrigin.y*this._render.height));},_renderTextToDisplay:function(){var tData=com.workinman.utils.WorkinCloud.instance._getLocalize().getData(this._textString);this._renderOffset.x=tData._getOffsetX();this._renderOffset.y=tData._getOffsetY();this._render.scaleX=tData._getScale();this._render.scaleY=tData._getScale();if(tData._getFontName()!=this._fontName)this._setFont(tData._getFontName());var tData1=com.workinman.utils.WorkinCloud.instance._getLocalize().getData(this._textString);this._updateTextDisplay(tData1._getString());tData1=null;if(this._textDisplay.length==1){this._render.width=this._textDisplay[0].getNaturalWidth();this._render.height=this._textDisplay[0].getNaturalHeight();}
if(!this._flagCenter)this.setOrigin(this._renderOrigin);this.renderPositionWithoutCamera();},__class__:com.workinman.display.TextLocalized});com.workinman.events.WMEvent=function(pId){this._eventId=pId;};$hxClasses["com.workinman.events.WMEvent"]=com.workinman.events.WMEvent;com.workinman.events.WMEvent.__name__=["com","workinman","events","WMEvent"];com.workinman.events.WMEvent.prototype={getEventId:function(){return this._eventId;},__class__:com.workinman.events.WMEvent,__properties__:{get_eventId:"getEventId"}}
com.workinman.events.WMEventData=function(pEventId,pData){com.workinman.events.WMEvent.call(this,pEventId);this._data=pData;};$hxClasses["com.workinman.events.WMEventData"]=com.workinman.events.WMEventData;com.workinman.events.WMEventData.__name__=["com","workinman","events","WMEventData"];com.workinman.events.WMEventData.__super__=com.workinman.events.WMEvent;com.workinman.events.WMEventData.prototype=$extend(com.workinman.events.WMEvent.prototype,{_getData:function(){return this._data;},__class__:com.workinman.events.WMEventData,__properties__:$extend(com.workinman.events.WMEvent.prototype.__properties__,{get_data:"_getData"})});com.workinman.events._WMEventDispatcher={}
com.workinman.events._WMEventDispatcher.WMEventTracker=function(){this._signalConnection=new Array();this._signal=new flambe.util.Signal1();};$hxClasses["com.workinman.events._WMEventDispatcher.WMEventTracker"]=com.workinman.events._WMEventDispatcher.WMEventTracker;com.workinman.events._WMEventDispatcher.WMEventTracker.__name__=["com","workinman","events","_WMEventDispatcher","WMEventTracker"];com.workinman.events._WMEventDispatcher.WMEventTracker.prototype={dispose:function(){this._signal=null;var _g=0,_g1=this._signalConnection;while(_g<_g1.length){var c=_g1[_g];++_g;c.dispose();}
this._signalConnection=null;},isEmtpy:function(){return!this._signal.hasListeners();},dispatchEvent:function(pEvent){this._signal.emit(pEvent);},removeEventListener:function(pListener){var tI=this._signalConnection.length;while(tI>0){tI--;if(Reflect.compareMethods(this._signalConnection[tI]._getListener(),pListener)){this._signalConnection[tI].dispose();this._signalConnection.splice(tI,1);}}},addEventListener:function(pListener){this._signalConnection.push(new com.workinman.events._WMEventDispatcher.SignalTracker(pListener,this._signal.connect(pListener)));},__class__:com.workinman.events._WMEventDispatcher.WMEventTracker}
com.workinman.events._WMEventDispatcher.SignalTracker=function(pFunction,pConnection){this._function=pFunction;this._connection=pConnection;};$hxClasses["com.workinman.events._WMEventDispatcher.SignalTracker"]=com.workinman.events._WMEventDispatcher.SignalTracker;com.workinman.events._WMEventDispatcher.SignalTracker.__name__=["com","workinman","events","_WMEventDispatcher","SignalTracker"];com.workinman.events._WMEventDispatcher.SignalTracker.prototype={_getListener:function(){return this._function;},dispose:function(){this._function=null;this._connection.dispose();this._connection=null;},__class__:com.workinman.events._WMEventDispatcher.SignalTracker,__properties__:{get_listener:"_getListener"}}
com.workinman.events.WMEventFlow=function(pEventId,pTargetScreen){if(pTargetScreen==null)pTargetScreen=false;this.flowId=pEventId;this.targetScreen=pTargetScreen;com.workinman.events.WMEvent.call(this,com.workinman.events.WMEventFlow.EVENT_FLOW);};$hxClasses["com.workinman.events.WMEventFlow"]=com.workinman.events.WMEventFlow;com.workinman.events.WMEventFlow.__name__=["com","workinman","events","WMEventFlow"];com.workinman.events.WMEventFlow.__super__=com.workinman.events.WMEvent;com.workinman.events.WMEventFlow.prototype=$extend(com.workinman.events.WMEvent.prototype,{__class__:com.workinman.events.WMEventFlow});com.workinman.events.WMEventInput=function(pPhase,pInput,pX,pY,pSwipe){if(pSwipe==null)pSwipe=0;com.workinman.events.WMEvent.call(this,com.workinman.events.WMEventInput.EVENT_INPUT);this.phase=pPhase;this.input=pInput;this.x=pX;this.y=pY;this.swipe=pSwipe;};$hxClasses["com.workinman.events.WMEventInput"]=com.workinman.events.WMEventInput;com.workinman.events.WMEventInput.__name__=["com","workinman","events","WMEventInput"];com.workinman.events.WMEventInput.__super__=com.workinman.events.WMEvent;com.workinman.events.WMEventInput.prototype=$extend(com.workinman.events.WMEvent.prototype,{__class__:com.workinman.events.WMEventInput});com.workinman.events.WMEventInterfaceChange=function(pEventId,pScreenId,pCustomData){if(pScreenId==null)pScreenId="";this.flowId=pEventId;this.screenId=pScreenId;if(pCustomData==null)pCustomData=new Hash();this.customData=pCustomData;com.workinman.events.WMEvent.call(this,com.workinman.events.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT);};$hxClasses["com.workinman.events.WMEventInterfaceChange"]=com.workinman.events.WMEventInterfaceChange;com.workinman.events.WMEventInterfaceChange.__name__=["com","workinman","events","WMEventInterfaceChange"];com.workinman.events.WMEventInterfaceChange.__super__=com.workinman.events.WMEvent;com.workinman.events.WMEventInterfaceChange.prototype=$extend(com.workinman.events.WMEvent.prototype,{__class__:com.workinman.events.WMEventInterfaceChange});com.workinman.events.WMEventScreenOut=function(pEventId,pScreenId){this.flowId=pEventId;this.screenId=pScreenId;com.workinman.events.WMEvent.call(this,com.workinman.events.WMEventScreenOut.EVENT_SCREEN_OUTPUT);};$hxClasses["com.workinman.events.WMEventScreenOut"]=com.workinman.events.WMEventScreenOut;com.workinman.events.WMEventScreenOut.__name__=["com","workinman","events","WMEventScreenOut"];com.workinman.events.WMEventScreenOut.__super__=com.workinman.events.WMEvent;com.workinman.events.WMEventScreenOut.prototype=$extend(com.workinman.events.WMEvent.prototype,{__class__:com.workinman.events.WMEventScreenOut});com.workinman.events.WMEventUpdate=function(pDt){com.workinman.events.WMEvent.call(this,com.workinman.events.WMEventUpdate.EVENT_UPDATE);this._dt=pDt;};$hxClasses["com.workinman.events.WMEventUpdate"]=com.workinman.events.WMEventUpdate;com.workinman.events.WMEventUpdate.__name__=["com","workinman","events","WMEventUpdate"];com.workinman.events.WMEventUpdate.__super__=com.workinman.events.WMEvent;com.workinman.events.WMEventUpdate.prototype=$extend(com.workinman.events.WMEvent.prototype,{getDt:function(){return this._dt;},__class__:com.workinman.events.WMEventUpdate,__properties__:$extend(com.workinman.events.WMEvent.prototype.__properties__,{get_dt:"getDt"})});com.workinman.math={}
com.workinman.math.WorkinCamera=function(pScreenX,pScreenY,pScreenZ){if(pScreenZ==null)pScreenZ=0;this._screenCenterX=pScreenX;this._screenCenterY=pScreenY;this._screenCenterZ=pScreenZ;this._pos=new com.workinman.math.WorkinPoint(pScreenX,pScreenY,pScreenZ);};$hxClasses["com.workinman.math.WorkinCamera"]=com.workinman.math.WorkinCamera;com.workinman.math.WorkinCamera.__name__=["com","workinman","math","WorkinCamera"];com.workinman.math.WorkinCamera.prototype={_getScreenCenterZ:function(){return this._screenCenterZ;},_getScreenCenterY:function(){return this._screenCenterY;},_getScreenCenterX:function(){return this._screenCenterX;},_getPos:function(){return this._pos;},dispose:function(){this._pos=null;},__class__:com.workinman.math.WorkinCamera,__properties__:{get_pos:"_getPos",get_screenCenterX:"_getScreenCenterX",get_screenCenterY:"_getScreenCenterY"}}
com.workinman.math.WorkinLine=function(p0,p1){this._p0=p0.copy();this._p1=p1.copy();this._calcProperties();};$hxClasses["com.workinman.math.WorkinLine"]=com.workinman.math.WorkinLine;com.workinman.math.WorkinLine.__name__=["com","workinman","math","WorkinLine"];com.workinman.math.WorkinLine.prototype={_calcProperties:function(){this._length=Math.round(Math.sqrt((this._p0.x-this._p1.x)*(this._p0.x-this._p1.x)+(this._p0.y-this._p1.y)*(this._p0.y-this._p1.y))*1000)/1000;this._vector=new com.workinman.math.WorkinPoint(this._getP1().x-this._getP0().x,this._getP1().y-this._getP0().y);this._slope=this._vector.y/this._vector.x;if(this._getVector().x==0)this._slope=100000;this._yIntercept=this._getP0().y-this._slope*this._getP0().x;this._parametricDenom=new com.workinman.math.WorkinPoint(this._getP1().x-this._getP0().x,this._getP1().y-this._getP0().y);this._normal=this._vector.pseudoCross();this._normal.normalize();},endToPoint:function(pPoint){this._p1.toPoint(pPoint);this._calcProperties();},originToPoint:function(pPoint){this._p0.toPoint(pPoint);this._calcProperties();},to:function(tp0,tp1){this._p0.toPoint(tp0);this._p1.toPoint(tp1);this._calcProperties();},copy:function(){return new com.workinman.math.WorkinLine(this._p0,this._p1);},_setLength:function(pLen){if(this._getLength()==0)return this._length;this._p1=new com.workinman.math.WorkinPoint(this._p0.x+this._vector.x*(pLen/this._getLength()),this._p0.y+this._vector.y*(pLen/this._getLength()));this._calcProperties();return this._length;},_getLength:function(){return this._length;},_getParametricDenom:function(){return this._parametricDenom;},_getCenterY:function(){return this._p0.y+this._vector.y/2;},_getCenterX:function(){return this._p0.x+this._vector.x/2;},_getCenter:function(){return new com.workinman.math.WorkinPoint(this._p0.x+this._vector.x/2,this._p0.y+this._vector.y/2);},_getVector:function(){return this._vector;},_getNormal:function(){return this._normal;},_getYIntercept:function(){return this._yIntercept;},_getSlope:function(){return this._slope;},_getP1:function(){return this._p1;},_getP0:function(){return this._p0;},dispose:function(){this._p0=null;this._p1=null;this._normal=null;this._vector=null;this._parametricDenom=null;},__class__:com.workinman.math.WorkinLine,__properties__:{get_p0:"_getP0",get_p1:"_getP1",get_vector:"_getVector",set_length:"_setLength",get_length:"_getLength"}}
com.workinman.math.WorkinMath=function(){}
$hxClasses["com.workinman.math.WorkinMath"]=com.workinman.math.WorkinMath;com.workinman.math.WorkinMath.__name__=["com","workinman","math","WorkinMath"];com.workinman.math.WorkinMath.diffBetweenPoints=function(p0,p1){return new com.workinman.math.WorkinPoint(p1.x-p0.x,p1.y-p0.y,p1.z-p0.z);}
com.workinman.math.WorkinMath.distBetweenPoints=function(p0,p1){var dist2D=Math.abs(Math.sqrt((p0.x-p1.x)*(p0.x-p1.x)+(p0.y-p1.y)*(p0.y-p1.y)));if(p1.z==p0.z)return dist2D;else return Math.abs(Math.sqrt(dist2D*dist2D+(p0.z-p1.z)*(p0.z-p1.z)));}
com.workinman.math.WorkinPoint=function(pX,pY,pZ){if(pZ==null)pZ=0;if(pY==null)pY=0;if(pX==null)pX=0;this.x=Math.round(pX*1000)/1000;this.y=Math.round(pY*1000)/1000;this.z=Math.round(pZ*1000)/1000;this.calculateLength();};$hxClasses["com.workinman.math.WorkinPoint"]=com.workinman.math.WorkinPoint;com.workinman.math.WorkinPoint.__name__=["com","workinman","math","WorkinPoint"];com.workinman.math.WorkinPoint.prototype={_getNormalizedMagnitude:function(){var tNormalizedVector=this.normalizeCopy();return Math.sqrt(tNormalizedVector.x*tNormalizedVector.x+tNormalizedVector.y*tNormalizedVector.y);},calculateLength:function(){this._length=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);},pseudoCross:function(){return new com.workinman.math.WorkinPoint(this.y,-this.x,this.z);},normalizeCopy:function(){if(this._length==0)return new com.workinman.math.WorkinPoint(0,0,0);return new com.workinman.math.WorkinPoint(this.x/this._length,this.y/this._length,this.z/this._length);},normalize:function(){if(this._length==0)return;this.x/=this._length;this.y/=this._length;this.z/=this._length;this.calculateLength();},reverseCopy:function(){return new com.workinman.math.WorkinPoint(this.x*-1,this.y*-1,this.z*-1);},_setLength:function(pLen){if(this._length==0||pLen<=0){this.to(0,0);return this._length;}
this.multiply(pLen/this._length);return this._length;},_getLength:function(){return this._length;},copy:function(){return new com.workinman.math.WorkinPoint(this.x,this.y,this.z);},multiplyCopy:function(pScalar){return new com.workinman.math.WorkinPoint(this.x*pScalar,this.y*pScalar,this.z*pScalar);},multiply:function(pScalar){this.x*=pScalar;this.y*=pScalar;this.z*=pScalar;this.clean();this.calculateLength();},subtractPoint:function(pPoint){this.x-=pPoint.x;this.y-=pPoint.y;this.z-=pPoint.z;this.calculateLength();},toPoint:function(pPoint){this.x=pPoint.x;this.y=pPoint.y;this.z=pPoint.z;this.calculateLength();},to:function(pX,pY,pZ){if(pZ==null)pZ=0;this.x=pX;this.y=pY;this.z=pZ;this.calculateLength();},clean:function(){this.x=Math.round(this.x*1000)/1000;this.y=Math.round(this.y*1000)/1000;this.z=Math.round(this.z*1000)/1000;},_getAngle:function(){return Math.atan2(this.y,this.x)*180/Math.PI;},__class__:com.workinman.math.WorkinPoint,__properties__:{set_length:"_setLength",get_length:"_getLength"}}
com.workinman.math.tween={}
com.workinman.math.tween.PennerEasing=function(){}
$hxClasses["com.workinman.math.tween.PennerEasing"]=com.workinman.math.tween.PennerEasing;com.workinman.math.tween.PennerEasing.__name__=["com","workinman","math","tween","PennerEasing"];com.workinman.math.tween.PennerEasing.easeInQuad=function(t,b,c,d){return c*(t/=d)*t+b;}
com.workinman.math.tween.PennerEasing.easeOutQuad=function(t,b,c,d){return-c*(t/=d)*(t-2)+b;}
com.workinman.math.tween.PennerEasing.easeInOutQuad=function(t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*(--t*(t-2)-1)+b;}
com.workinman.math.tween.PennerEasing.easeInExpo=function(t,b,c,d){return t==0?b:c*Math.pow(2,10*(t/d-1))+b;}
com.workinman.math.tween.PennerEasing.easeOutExpo=function(t,b,c,d){return t==d?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;}
com.workinman.math.tween.PennerEasing.easeInOutExpo=function(t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;}
com.workinman.math.tween.PennerEasing.easeInElastic=function(t,b,c,d){return com.workinman.math.tween.PennerEasing.easeInElasticL(t,b,c,d);}
com.workinman.math.tween.PennerEasing.easeInElasticL=function(t,b,c,d,a,p){if(p==null)p=-.123456;if(a==null)a=-.123456;var s;if(t==0)return b;if((t/=d)==1)return b+c;if(p==-.123456)p=d*.3;if(a==-.123456||a<Math.abs(c)){a=c;s=p/4;}else s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;}
com.workinman.math.tween.PennerEasing.easeOutElastic=function(t,b,c,d){return com.workinman.math.tween.PennerEasing.easeOutElasticL(t,b,c,d);}
com.workinman.math.tween.PennerEasing.easeOutElasticL=function(t,b,c,d,a,p){if(p==null)p=-.123456;if(a==null)a=-.123456;var s;if(t==0)return b;if((t/=d)==1)return b+c;if(p==-.123456)p=d*.3;if(a==-.123456||a<Math.abs(c)){a=c;s=p/4;}else s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;}
com.workinman.math.tween.PennerEasing.easeInOutElastic=function(t,b,c,d){return com.workinman.math.tween.PennerEasing.easeInOutElasticL(t,b,c,d);}
com.workinman.math.tween.PennerEasing.easeInOutElasticL=function(t,b,c,d,a,p){if(p==null)p=-.123456;if(a==null)a=-.123456;var s;if(t==0)return b;if((t/=d/2)==2)return b+c;if(p==-.123456)p=d*(.3*1.5);if(a==-.123456||a<Math.abs(c)){a=c;s=p/4;}else s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;}
com.workinman.math.tween.PennerEasing.easeInBack=function(t,b,c,d){return com.workinman.math.tween.PennerEasing.easeInBackL(t,b,c,d);}
com.workinman.math.tween.PennerEasing.easeInBackL=function(t,b,c,d,s){if(s==null)s=-.123456;if(s==-.123456)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;}
com.workinman.math.tween.PennerEasing.easeInOutBack=function(t,b,c,d){return com.workinman.math.tween.PennerEasing.easeInOutBackL(t,b,c,d);}
com.workinman.math.tween.PennerEasing.easeInOutBackL=function(t,b,c,d,s){if(s==null)s=-.123456;if(s==-.123456)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=1.525)+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+b;}
com.workinman.math.tween.PennerEasing.easeOutBounce=function(t,b,c,d){if((t/=d)<1/2.75)return c*(7.5625*t*t)+b;else if(t<2/2.75)return c*(7.5625*(t-=1.5/2.75)*t+.75)+b;else if(t<2.5/2.75)return c*(7.5625*(t-=2.25/2.75)*t+.9375)+b;else return c*(7.5625*(t-=2.625/2.75)*t+.984375)+b;}
com.workinman.math.tween.PennerEasing.easeInBounce=function(t,b,c,d){return c-com.workinman.math.tween.PennerEasing.easeOutBounce(d-t,0,c,d)+b;}
com.workinman.math.tween.PennerEasing.easeInOutBounce=function(t,b,c,d){if(t<d/2)return com.workinman.math.tween.PennerEasing.easeInBounce(t*2,0,c,d)*.5+b;else return com.workinman.math.tween.PennerEasing.easeOutBounce(t*2-d,0,c,d)*.5+c*.5+b;}
com.workinman.math.tween.PennerEasing.easeInCubic=function(t,b,c,d){return c*(t/=d)*t*t+b;}
com.workinman.math.tween.PennerEasing.easeOutCubic=function(t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;}
com.workinman.math.tween.PennerEasing.easeInOutCubic=function(t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;}
com.workinman.math.tween.PennerEasing.easeInQuart=function(t,b,c,d){return c*(t/=d)*t*t*t+b;}
com.workinman.math.tween.PennerEasing.easeOutQuart=function(t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;}
com.workinman.math.tween.PennerEasing.easeInOutQuart=function(t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;}
com.workinman.math.tween.PennerEasing.easeInQuint=function(t,b,c,d){return c*(t/=d)*t*t*t*t+b;}
com.workinman.math.tween.PennerEasing.easeOutQuint=function(t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;}
com.workinman.math.tween.PennerEasing.easeInOutQuint=function(t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;}
com.workinman.math.tween.PennerEasing.easeInSine=function(t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;}
com.workinman.math.tween.PennerEasing.easeOutSine=function(t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;}
com.workinman.math.tween.PennerEasing.easeInOutSine=function(t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;}
com.workinman.math.tween.PennerEasing.easeInCirc=function(t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;}
com.workinman.math.tween.PennerEasing.easeOutCirc=function(t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;}
com.workinman.math.tween.PennerEasing.easeInOutCirc=function(t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;}
com.workinman.math.tween.PennerManager=function(){}
$hxClasses["com.workinman.math.tween.PennerManager"]=com.workinman.math.tween.PennerManager;com.workinman.math.tween.PennerManager.__name__=["com","workinman","math","tween","PennerManager"];com.workinman.math.tween.PennerManager.getEaseFunction=function(pEase){switch(pEase){case com.workinman.math.tween.PennerManager.EASE_IN:case com.workinman.math.tween.PennerManager.EASE_QUAD_IN:return com.workinman.math.tween.PennerManager._tweenEaseIn;case com.workinman.math.tween.PennerManager.EASE_OUT:case com.workinman.math.tween.PennerManager.EASE_QUAD_OUT:return com.workinman.math.tween.PennerManager._tweenEaseOut;case com.workinman.math.tween.PennerManager.EASE:case com.workinman.math.tween.PennerManager.EASE_QUAD:return com.workinman.math.tween.PennerManager._tweenEaseBoth;case com.workinman.math.tween.PennerManager.EASE_EXPO:return com.workinman.math.tween.PennerManager._tweenExpoBoth;case com.workinman.math.tween.PennerManager.EASE_EXPO_IN:return com.workinman.math.tween.PennerManager._tweenExpoIn;case com.workinman.math.tween.PennerManager.EASE_EXPO_OUT:return com.workinman.math.tween.PennerManager._tweenExpoOut;case com.workinman.math.tween.PennerManager.EASE_ELASTIC:return com.workinman.math.tween.PennerManager._tweenElasticBoth;case com.workinman.math.tween.PennerManager.EASE_ELASTIC_IN:return com.workinman.math.tween.PennerManager._tweenElasticIn;case com.workinman.math.tween.PennerManager.EASE_ELASTIC_OUT:return com.workinman.math.tween.PennerManager._tweenElasticOut;case com.workinman.math.tween.PennerManager.EASE_BUMP:return com.workinman.math.tween.PennerManager._tweenBumpBoth;case com.workinman.math.tween.PennerManager.EASE_BUMP_IN:return com.workinman.math.tween.PennerManager._tweenBumpIn;case com.workinman.math.tween.PennerManager.EASE_BUMP_OUT:return com.workinman.math.tween.PennerManager._tweenBumpBoth;case com.workinman.math.tween.PennerManager.EASE_BOUNCE:return com.workinman.math.tween.PennerManager._tweenBounceBoth;case com.workinman.math.tween.PennerManager.EASE_BOUNCE_IN:return com.workinman.math.tween.PennerManager._tweenBounceIn;case com.workinman.math.tween.PennerManager.EASE_BOUNCE_OUT:return com.workinman.math.tween.PennerManager._tweenBounceOut;case com.workinman.math.tween.PennerManager.EASE_CUBIC:return com.workinman.math.tween.PennerManager._tweenCubicBoth;case com.workinman.math.tween.PennerManager.EASE_CUBIC_IN:return com.workinman.math.tween.PennerManager._tweenCubicIn;case com.workinman.math.tween.PennerManager.EASE_CUBIC_OUT:return com.workinman.math.tween.PennerManager._tweenCubicOut;case com.workinman.math.tween.PennerManager.EASE_SPACE:return com.workinman.math.tween.PennerManager._tweenSpaceBoth;case com.workinman.math.tween.PennerManager.EASE_SPACE_IN:return com.workinman.math.tween.PennerManager._tweenSpaceIn;case com.workinman.math.tween.PennerManager.EASE_SPACE_OUT:return com.workinman.math.tween.PennerManager._tweenSpaceOut;case com.workinman.math.tween.PennerManager.EASE_BLAST:return com.workinman.math.tween.PennerManager._tweenBlastBoth;case com.workinman.math.tween.PennerManager.EASE_BLAST_IN:return com.workinman.math.tween.PennerManager._tweenBlastIn;case com.workinman.math.tween.PennerManager.EASE_BLAST_OUT:return com.workinman.math.tween.PennerManager._tweenBlastOut;case com.workinman.math.tween.PennerManager.EASE_WAVE:return com.workinman.math.tween.PennerManager._tweenWaveBoth;case com.workinman.math.tween.PennerManager.EASE_WAVE_IN:return com.workinman.math.tween.PennerManager._tweenWaveIn;case com.workinman.math.tween.PennerManager.EASE_WAVE_OUT:return com.workinman.math.tween.PennerManager._tweenWaveOut;case com.workinman.math.tween.PennerManager.EASE_CIRCLE:return com.workinman.math.tween.PennerManager._tweenCircleBoth;case com.workinman.math.tween.PennerManager.EASE_CIRCLE_IN:return com.workinman.math.tween.PennerManager._tweenCircleIn;case com.workinman.math.tween.PennerManager.EASE_CIRCLE_OUT:return com.workinman.math.tween.PennerManager._tweenCircleOut;case com.workinman.math.tween.PennerManager.EASE_LINEAR:return com.workinman.math.tween.PennerManager._tweenLinear;default:return com.workinman.math.tween.PennerManager._tweenLinear;}}
com.workinman.math.tween.PennerManager._tweenLinear=function(pStartVal,pDiff,pEl,pDur){return pStartVal+pEl/pDur*pDiff;}
com.workinman.math.tween.PennerManager._tweenEaseBoth=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInOutQuad(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenEaseIn=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInQuad(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenEaseOut=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeOutQuad(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenExpoBoth=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInOutExpo(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenExpoIn=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInExpo(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenExpoOut=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeOutExpo(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenElasticBoth=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInOutElastic(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenElasticIn=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInElastic(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenElasticOut=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeOutElastic(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenBumpBoth=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInOutBack(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenBumpIn=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInBack(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenBounceBoth=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInOutBounce(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenBounceIn=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInBounce(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenBounceOut=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeOutBounce(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenCubicBoth=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInOutCubic(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenCubicIn=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInCubic(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenCubicOut=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeOutCubic(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenSpaceBoth=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInOutQuart(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenSpaceIn=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInQuart(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenSpaceOut=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeOutQuart(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenBlastBoth=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInOutQuint(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenBlastIn=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInQuint(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenBlastOut=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeOutQuint(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenWaveBoth=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInOutSine(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenWaveIn=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInSine(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenWaveOut=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeOutSine(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenCircleBoth=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInOutCirc(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenCircleIn=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeInCirc(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.PennerManager._tweenCircleOut=function(pStartVal,pDiff,pEl,pDur){return com.workinman.math.tween.PennerEasing.easeOutCirc(pEl,pStartVal,pDiff,pDur);}
com.workinman.math.tween.WorkinTweener=function(){this._targets=new Array();};$hxClasses["com.workinman.math.tween.WorkinTweener"]=com.workinman.math.tween.WorkinTweener;com.workinman.math.tween.WorkinTweener.__name__=["com","workinman","math","tween","WorkinTweener"];com.workinman.math.tween.WorkinTweener.__properties__={get_instance:"_getInstance"}
com.workinman.math.tween.WorkinTweener._getInstance=function(){if(com.workinman.math.tween.WorkinTweener._instance==null)com.workinman.math.tween.WorkinTweener._instance=new com.workinman.math.tween.WorkinTweener();return com.workinman.math.tween.WorkinTweener._instance;}
com.workinman.math.tween.WorkinTweener.prototype={stop:function(pTarget){var tI=this._targets.length;while(tI>0){tI--;if(this._targets[tI]._getTarget()==pTarget){this._targets[tI].clearTweens();this._targets[tI]._setIsComplete(true);return;}}},tween:function(pTarget,pDur,pDest,pEase,pDelay,pOverWrite,pQueueIndex,pId,pGameplayPause){if(pGameplayPause==null)pGameplayPause=false;if(pId==null)pId="";if(pQueueIndex==null)pQueueIndex=0;if(pOverWrite==null)pOverWrite=false;if(pDelay==null)pDelay=0;if(pEase==null)pEase="linear";var tDef=new com.workinman.math.tween._WorkinTweener.WorkinTweenDef(pTarget,pDur,pDest,pEase,pDelay,pQueueIndex,pId);var tPreExisting=false;var _g=0,_g1=this._targets;while(_g<_g1.length){var t=_g1[_g];++_g;if(t._getTarget()==pTarget){tPreExisting=true;if(pOverWrite)t.clearTweens();t.addTween(tDef,pQueueIndex);}}
if(tPreExisting==false){var tTracker=new com.workinman.math.tween._WorkinTweener.WorkinTweenTracker(pTarget,pGameplayPause);this._targets.push(tTracker);tTracker.addTween(tDef,pQueueIndex);tTracker=null;}
return tDef;},update:function(dt){var tI=this._targets.length;while(tI>0){tI--;this._targets[tI].update(dt);if(this._targets[tI]._getIsComplete()){this._targets[tI].dispose();this._targets.splice(tI,1);}}},__class__:com.workinman.math.tween.WorkinTweener}
com.workinman.math.tween._WorkinTweener={}
com.workinman.math.tween._WorkinTweener.WorkinTweenTracker=function(pTarget,pGameplayPause){this._gameplayPause=pGameplayPause;this._target=pTarget;this._tweens=new Array();this._isComplete=false;};$hxClasses["com.workinman.math.tween._WorkinTweener.WorkinTweenTracker"]=com.workinman.math.tween._WorkinTweener.WorkinTweenTracker;com.workinman.math.tween._WorkinTweener.WorkinTweenTracker.__name__=["com","workinman","math","tween","_WorkinTweener","WorkinTweenTracker"];com.workinman.math.tween._WorkinTweener.WorkinTweenTracker.prototype={_decrementQueueIndeces:function(){var _g=0,_g1=this._tweens;while(_g<_g1.length){var t=_g1[_g];++_g;if(t._getQueueIndex()==0)return;}
var _g=0,_g1=this._tweens;while(_g<_g1.length){var t=_g1[_g];++_g;var _g2=t,_g3=_g2._getQueueIndex();_g2._setQueueIndex(_g3-1);_g3;if(t._getQueueIndex()==0)t.start();}},addTween:function(pDef,pQueueIndex){if(pQueueIndex==null)pQueueIndex=0;this._tweens.push(pDef);},clearTweens:function(){var _g=0,_g1=this._tweens;while(_g<_g1.length){var t=_g1[_g];++_g;t._setIsComplete(true);}},_setGameplayPause:function(pPause){this._gameplayPause=pPause;return this._gameplayPause;},_getGameplayPause:function(){return this._gameplayPause;},_setIsComplete:function(pVal){this._isComplete=pVal;return this._isComplete;},_getIsComplete:function(){return this._isComplete;},_getTarget:function(){return this._target;},_dispatchTweensAllComplete:function(pTarget){com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.workinman.data.ConstantsCloud.EVENT_TWEENS_COMPLETE,{target:pTarget}));},update:function(dt){if(this._gameplayPause&&com.workinman.utils.WorkinCloud.instance.getBool("bool_paused"))return;var tI=this._tweens.length;while(tI>0){tI--;if(this._tweens[tI]._getQueueIndex()==0){this._tweens[tI].update(dt);if(this._tweens[tI]._getIsComplete()){this._tweens[tI].dispose();this._tweens.splice(tI,1);this._decrementQueueIndeces();}}}
if(this._tweens.length<1){this._isComplete=true;this._dispatchTweensAllComplete(this._target);}},dispose:function(){this._target=null;var _g=0,_g1=this._tweens;while(_g<_g1.length){var t=_g1[_g];++_g;t.dispose();}
this._tweens=null;},__class__:com.workinman.math.tween._WorkinTweener.WorkinTweenTracker,__properties__:{get_target:"_getTarget",set_isComplete:"_setIsComplete",get_isComplete:"_getIsComplete"}}
com.workinman.math.tween._WorkinTweener.WorkinTweenDef=function(pTarget,pDur,pDest,pEase,pDelay,pQueueIndex,pId){if(pId==null)pId="";if(pQueueIndex==null)pQueueIndex=0;if(pDelay==null)pDelay=0;if(pEase==null)pEase="linear";this._id=pId;this._target=pTarget;this._duration=pDur;this._delay=pDelay;this._dest=pDest;this._queueIndex=pQueueIndex;this._easeFunction=com.workinman.math.tween.PennerManager.getEaseFunction(pEase);this._isComplete=false;this._completionHandler=null;this._completionArgs=null;this._progress=0;this._origin={};if(pQueueIndex==0)this.start();};$hxClasses["com.workinman.math.tween._WorkinTweener.WorkinTweenDef"]=com.workinman.math.tween._WorkinTweener.WorkinTweenDef;com.workinman.math.tween._WorkinTweener.WorkinTweenDef.__name__=["com","workinman","math","tween","_WorkinTweener","WorkinTweenDef"];com.workinman.math.tween._WorkinTweener.WorkinTweenDef.prototype={onComplete:function(pFunction,pArgs){if(pArgs==null)pArgs=[];this._completionHandler=pFunction;this._completionArgs=pArgs;return this;},ease:function(pEase){this._easeFunction=com.workinman.math.tween.PennerManager.getEaseFunction(pEase);return this;},delay:function(pDelay){this._delay=pDelay;return this;},_getId:function(){return this._id;},_setQueueIndex:function(inIndex){this._queueIndex=inIndex;return this._queueIndex;},_getQueueIndex:function(){return this._queueIndex;},_setIsComplete:function(pVal){this._isComplete=pVal;return this._isComplete;},_getIsComplete:function(){return this._isComplete;},update:function(dt){if(this._delay>0){this._delay-=dt;if(this._delay>0)return;}
this._progress+=dt;if(this._progress>this._duration)this._progress=this._duration;this.ratio=this._progress/this._duration;var tDif;var _g=0,_g1=Reflect.fields(this._dest);while(_g<_g1.length){var p=_g1[_g];++_g;tDif=Reflect.field(this._dest,p)-Reflect.field(this._origin,p);Reflect.setField(this._target,p,this._easeFunction(Reflect.field(this._origin,p),tDif,this._progress,this._duration));}
if(this._progress>=this._duration){if(this._completionHandler!=null)Reflect.callMethod(this._completionHandler,this._completionHandler,this._completionArgs);this._isComplete=true;}},dispose:function(){this._origin=null;this._target=null;this._dest=null;},start:function(){this._isComplete=false;var _g=0,_g1=Reflect.fields(this._dest);while(_g<_g1.length){var p=_g1[_g];++_g;if(Reflect.field(this._target,p)!=null)Reflect.setField(this._origin,p,Reflect.field(this._target,p));}},__class__:com.workinman.math.tween._WorkinTweener.WorkinTweenDef,__properties__:{set_isComplete:"_setIsComplete",get_isComplete:"_getIsComplete",set_queueIndex:"_setQueueIndex",get_queueIndex:"_getQueueIndex"}}
com.workinman.net={}
com.workinman.net.WMSharedObject=function(pSO){com.workinman.events.WMEventDispatcher.call(this);this._data={};this.sharedKey="";};$hxClasses["com.workinman.net.WMSharedObject"]=com.workinman.net.WMSharedObject;com.workinman.net.WMSharedObject.__name__=["com","workinman","net","WMSharedObject"];com.workinman.net.WMSharedObject.getLocalStorage=function(){return js.Lib.window.localStorage;}
com.workinman.net.WMSharedObject.getLocal=function(name,localPath){var url=js.Lib.window.location.href;if(localPath==null)localPath=url;var so=new com.workinman.net.WMSharedObject();so.sharedKey=localPath+":"+name;var rawData=com.workinman.net.WMSharedObject.getLocalStorage().getItem(so.sharedKey);so._setData(rawData==""||rawData==null?{}:haxe.Unserializer.run(rawData));return so;}
com.workinman.net.WMSharedObject.__super__=com.workinman.events.WMEventDispatcher;com.workinman.net.WMSharedObject.prototype=$extend(com.workinman.events.WMEventDispatcher.prototype,{flush:function(){var data=haxe.Serializer.run(this._getData());com.workinman.net.WMSharedObject.getLocalStorage().setItem(this.sharedKey,data);return com.workinman.net.SharedObjectFlushedStatus.FLUSHED;},_setData:function(pData){this._data=pData;return this._data;},_getData:function(){return this._data;},dispose:function(){this._data=null;com.workinman.events.WMEventDispatcher.prototype.dispose.call(this);},__class__:com.workinman.net.WMSharedObject,__properties__:{set_data:"_setData",get_data:"_getData"}});com.workinman.net.SharedObjectFlushedStatus=function(){}
$hxClasses["com.workinman.net.SharedObjectFlushedStatus"]=com.workinman.net.SharedObjectFlushedStatus;com.workinman.net.SharedObjectFlushedStatus.__name__=["com","workinman","net","SharedObjectFlushedStatus"];com.workinman.services={}
com.workinman.services.ServiceAnalytics=function(){var tFuncToInclude=[com.workinman.services.ServiceAnalytics.onAnalyticsLoad];};$hxClasses["com.workinman.services.ServiceAnalytics"]=com.workinman.services.ServiceAnalytics;com.workinman.services.ServiceAnalytics.__name__=["com","workinman","services","ServiceAnalytics"];com.workinman.services.ServiceAnalytics.onAnalyticsLoad=function(){if(com.workinman.services.ServiceAnalytics._flagLoaded)return;com.workinman.utils.WorkinCloud.instance.log("[ServiceAnalytics](onAnalyticsLoad) Load complete");com.workinman.services.ServiceAnalytics._flagLoaded=true;haxe.Timer.delay(com.workinman.services.ServiceAnalytics._runQueuedCommands,1000);}
com.workinman.services.ServiceAnalytics.init=function(inAppId,inSharedObjectId){if(inSharedObjectId==null)inSharedObjectId="";com.workinman.services.ServiceAnalytics._flagInitted=true;com.workinman.services.ServiceAnalytics._queuedCommands=new Array();if(inAppId.toLowerCase()=="x")com.workinman.services.ServiceAnalytics.OPTION_ENABLE_TRACKING=false;if(!com.workinman.services.ServiceAnalytics.OPTION_ENABLE_TRACKING)return;if(inSharedObjectId=="")inSharedObjectId=com.workinman.services.ServiceAnalytics._DEFAULT_SHARED_OBJECT_ID;com.workinman.services.ServiceAnalytics._flagStarted=false;com.workinman.utils.WorkinCloud.instance.log("[ServiceAnalytics](initAnalytics)");com.workinman.services.ServiceAnalytics._appId=inAppId;com.workinman.services.ServiceAnalytics._sharedObjectId=inSharedObjectId;com.workinman.services.ServiceAnalytics._sharedObjectData=com.workinman.utils.WorkinCloud.instance.sharedObjectGetData(com.workinman.services.ServiceAnalytics._sharedObjectId);com.workinman.services.ServiceAnalytics._generateSessionID();if(com.workinman.services.ServiceAnalytics._sharedObjectData.userID==null||Std.string(com.workinman.services.ServiceAnalytics._sharedObjectData.userID).length<14){com.workinman.services.ServiceAnalytics._generateOfflineIDs();com.workinman.services.ServiceAnalytics._sharedObjectData.userID=com.workinman.services.ServiceAnalytics._offlineUserId;com.workinman.services.ServiceAnalytics._sharedObjectData.trackingID=com.workinman.services.ServiceAnalytics._offlineTrackingId;com.workinman.utils.WorkinCloud.instance.sharedObjectSetData(com.workinman.services.ServiceAnalytics._sharedObjectId,com.workinman.services.ServiceAnalytics._sharedObjectData);}else{com.workinman.services.ServiceAnalytics._offlineUserId=com.workinman.services.ServiceAnalytics._sharedObjectData.userID;com.workinman.services.ServiceAnalytics._offlineTrackingId=com.workinman.services.ServiceAnalytics._sharedObjectData.trackingID;}
js.Lib["eval"]("\t\t\t\t\n\t\t\t\twindow._pnConfig = new Array();\n\t\t\t\twindow._pnConfig['userId'] = '"+com.workinman.services.ServiceAnalytics._offlineUserId+"';\n\t\t\t\t\n\t\t\t\tvar _pnAPIURL = document.location.protocol + '//js.a.playnomics.net/v1/api?a="+com.workinman.services.ServiceAnalytics._appId+"';\n\t\t\t\tvar _pnAPI = document.createElement('script');\t\t\t\t\n\t\t\t\t_pnAPI.type = 'text/javascript'; \n\t\t\t\t_pnAPI.async = false; \n\t\t\t\t_pnAPI.src = _pnAPIURL;\n\t\t\t\twindow.pnCallbackReference = _pnAPI;\t\t\t\t\n\t\t\t");js.Lib["eval"]("window.pnCallbackReference").addEventListener("load",com.workinman.services.ServiceAnalytics.onAnalyticsLoad,false);js.Lib["eval"]("document.body.appendChild(window.pnCallbackReference);");com.workinman.services.ServiceAnalytics.sendUserInfo();com.workinman.services.ServiceAnalytics.sendMilestone("custom1");}
com.workinman.services.ServiceAnalytics._runQueuedCommands=function(){while(com.workinman.services.ServiceAnalytics._queuedCommands.length>0){com.workinman.services.ServiceAnalytics.sendPlaynomicsEvent(com.workinman.services.ServiceAnalytics._queuedCommands[0].method,com.workinman.services.ServiceAnalytics._queuedCommands[0].params);com.workinman.services.ServiceAnalytics._queuedCommands.shift();}}
com.workinman.services.ServiceAnalytics.sendUserInfo=function(){var tSource;tSource="html5";com.workinman.services.ServiceAnalytics.sendPlaynomicsEvent("pnUserInfo",["update",null,null,"","",tSource]);}
com.workinman.services.ServiceAnalytics.sendMilestone=function(inMilestoneName){com.workinman.services.ServiceAnalytics.sendPlaynomicsEvent("pnMilestone",[Std.string(Math.floor(6012+Math.random()*999999999)),inMilestoneName]);}
com.workinman.services.ServiceAnalytics.sendPlaynomicsEvent=function(inMethod,inParams){if(!com.workinman.services.ServiceAnalytics.OPTION_ENABLE_TRACKING)return;if(!com.workinman.services.ServiceAnalytics._flagInitted)return;if(!com.workinman.services.ServiceAnalytics._flagLoaded){com.workinman.services.ServiceAnalytics._queuedCommands.push({method:inMethod,params:inParams});return;}
com.workinman.utils.WorkinCloud.instance.log("[ServiceAnalytics](sendPlaynomicsEvent) "+inMethod);var i;var tString="";i=0;while(i<inParams.length){tString+="'"+inParams[i]+"'";i++;if(i<inParams.length)tString+=",";}
js.Lib["eval"](inMethod+"("+tString+")");}
com.workinman.services.ServiceAnalytics.enableCanadaTracking=function(pShowGameTitle){com.workinman.services.ServiceAnalytics._flagCanadaTrackingEnabled=true;com.workinman.services.ServiceAnalytics._canadaShowGameTitle=pShowGameTitle;}
com.workinman.services.ServiceAnalytics.sendCanadaTrackingCall=function(pString){if(!com.workinman.services.ServiceAnalytics._flagCanadaTrackingEnabled)return;try{js.Lib["eval"]("trackFlashEvent('"+com.workinman.services.ServiceAnalytics._canadaShowGameTitle+"', '"+pString+"', 'true');");}catch(err){}}
com.workinman.services.ServiceAnalytics._generateSessionID=function(){var tString="";var tCount=11;while(tCount>-1){tString+=Math.floor(Math.random()*10);tCount--;}
com.workinman.services.ServiceAnalytics._sessionId=tString;}
com.workinman.services.ServiceAnalytics._generateOfflineIDs=function(){com.workinman.services.ServiceAnalytics._offlineUserId="";com.workinman.services.ServiceAnalytics._offlineTrackingId="";var tCount=15;while(tCount>-1){if(Math.random()<.66)com.workinman.services.ServiceAnalytics._offlineUserId+=Std.string(Math.floor(Math.random()*10));else switch(Math.floor(Math.random()*10)){case 0:com.workinman.services.ServiceAnalytics._offlineUserId+="a";break;case 1:com.workinman.services.ServiceAnalytics._offlineUserId+="b";break;case 2:com.workinman.services.ServiceAnalytics._offlineUserId+="c";break;case 3:com.workinman.services.ServiceAnalytics._offlineUserId+="d";break;case 4:com.workinman.services.ServiceAnalytics._offlineUserId+="e";break;case 5:com.workinman.services.ServiceAnalytics._offlineUserId+="f";break;case 6:com.workinman.services.ServiceAnalytics._offlineUserId+="g";break;case 7:com.workinman.services.ServiceAnalytics._offlineUserId+="h";break;case 8:com.workinman.services.ServiceAnalytics._offlineUserId+="i";break;case 9:com.workinman.services.ServiceAnalytics._offlineUserId+="j";break;default:com.workinman.services.ServiceAnalytics._offlineUserId+="z";}
tCount--;}
com.workinman.services.ServiceAnalytics._offlineTrackingId="";tCount=15;while(tCount>-1){com.workinman.services.ServiceAnalytics._offlineTrackingId+=Math.floor(Math.random()*10);tCount--;}}
com.workinman.services.ServiceAnalytics.prototype={__class__:com.workinman.services.ServiceAnalytics}
com.workinman.utils={}
com.workinman.utils.JSEmbedProxy=function(){};$hxClasses["com.workinman.utils.JSEmbedProxy"]=com.workinman.utils.JSEmbedProxy;com.workinman.utils.JSEmbedProxy.__name__=["com","workinman","utils","JSEmbedProxy"];com.workinman.utils.JSEmbedProxy.__properties__={get_isPaused:"getIsPaused",get_canvasHeight:"getCanvasHeight",get_canvasWidth:"getCanvasWidth",get_canvasScale:"getCanvasScale",get_isCrossdomain:"getIsCrossdomain",get_base:"getBase",get_exists:"getExists"}
com.workinman.utils.JSEmbedProxy.alertOn=function(inString){com.workinman.utils.JSEmbedProxy.callJSEmbedMethod("addAlert('"+inString+"', '')");}
com.workinman.utils.JSEmbedProxy.alertOff=function(){com.workinman.utils.JSEmbedProxy.callJSEmbedMethod("removeAlert('')");}
com.workinman.utils.JSEmbedProxy.getExists=function(){return com.workinman.utils.JSEmbedProxy.callJSEmbedMethod("exists()");}
com.workinman.utils.JSEmbedProxy.getParameters=function(){return com.workinman.utils.JSEmbedProxy.callJSEmbedMethod("params()");}
com.workinman.utils.JSEmbedProxy.getAttributes=function(){return com.workinman.utils.JSEmbedProxy.callJSEmbedMethod("attr()");}
com.workinman.utils.JSEmbedProxy.getBase=function(){return com.workinman.utils.JSEmbedProxy.callJSEmbedMethod("baseUrl()");}
com.workinman.utils.JSEmbedProxy.getIsCrossdomain=function(){return com.workinman.utils.JSEmbedProxy.callJSEmbedMethod("isBaseCrossdomain()");}
com.workinman.utils.JSEmbedProxy.getCanvasScale=function(){return Std.parseFloat(com.workinman.utils.JSEmbedProxy.callJSEmbedMethod("canvasScale()"));}
com.workinman.utils.JSEmbedProxy.getCanvasWidth=function(){return Std.parseFloat(com.workinman.utils.JSEmbedProxy.callJSEmbedMethod("canvasWidth()"));}
com.workinman.utils.JSEmbedProxy.getCanvasHeight=function(){return Std.parseFloat(com.workinman.utils.JSEmbedProxy.callJSEmbedMethod("canvasHeight()"));}
com.workinman.utils.JSEmbedProxy.getIsPaused=function(){return com.workinman.utils.JSEmbedProxy.callJSEmbedMethod("isPaused()");}
com.workinman.utils.JSEmbedProxy.pause=function(){com.workinman.utils.JSEmbedProxy.callJSEmbedMethod("pause()");}
com.workinman.utils.JSEmbedProxy.unpause=function(){com.workinman.utils.JSEmbedProxy.callJSEmbedMethod("unpause()");}
com.workinman.utils.JSEmbedProxy.callJSEmbedMethod=function(pRequest){try{var result=js.Lib["eval"]("jsembed."+pRequest);return result==null?"":result;}catch(err){}
return "";}
com.workinman.utils.JSEmbedProxy.prototype={__class__:com.workinman.utils.JSEmbedProxy}
com.workinman.utils.WMAssetManager=function(){this._LOADING_CHANCES=3;this._baseUrl="";this._assets=new Hash();this._defs=new Hash();this._flump=new Hash();this._packs=new Hash();this._chunks=new Hash();this._manifests=new Hash();this._flagBaseIsCrossdomain=false;this._loadingChances=0;this._packsLoaded=this._packsMax=0;this._loadingTotal=0;this._loadingProgress=0;this._loadingPackProgress=new Hash();};$hxClasses["com.workinman.utils.WMAssetManager"]=com.workinman.utils.WMAssetManager;com.workinman.utils.WMAssetManager.__name__=["com","workinman","utils","WMAssetManager"];com.workinman.utils.WMAssetManager.prototype={getFont:function(pId){if(this._assets.exists(pId)==false){com.workinman.utils.WorkinCloud.instance.log("[WMAssetManager](getFont) no asset named "+pId+" exists! Returning null.");return null;}
return new flambe.display.Font(this._assets.get(pId)._getPack(),pId);},getLibrary:function(pId){if(this._flump.exists(pId)==false){com.workinman.utils.WorkinCloud.instance.log("[WMAssetManager](getLibrary) no library named "+pId+" exists! Is it defined in config.xml?");return null;}
return this._flump.get(pId);},getSound:function(pId){if(this._assets.exists(pId)==false){com.workinman.utils.WorkinCloud.instance.log("[AssetManager](getSound) no asset named "+pId+" exists! Returning null.");return null;}
if(this._assets.get(pId)._getConstructed())return this._assets.get(pId)._getData();return this._assets.get(pId)._getPack().getSound(this._assets.get(pId)._getPath(),true);},getXML:function(pId){if(this._assets.exists(pId)==false){com.workinman.utils.WorkinCloud.instance.log("[WMAssetManager](getXML) no asset named "+pId+" exists! Returning null.");return null;}
var tXML=Xml.parse(this.getFile(pId));return new haxe.xml.Fast(tXML.firstElement());},getFile:function(pId){if(this._assets.exists(pId)==false){com.workinman.utils.WorkinCloud.instance.log("[WMAssetManager](getFile) no asset named "+pId+" exists! Returning empty string.");return "";}
if(this._assets.get(pId)._getConstructed())return this._assets.get(pId)._getData();return this._assets.get(pId)._getPack().getFile(this._assets.get(pId)._getPath(),true);},getTexture:function(pId){var tId=pId.split(".")[0];if(this._assets.exists(tId)==false){com.workinman.utils.WorkinCloud.instance.log("[WMAssetManager](getTexture) no asset named "+tId+" exists! Returning null.");return null;}
if(this._assets.get(tId)._getConstructed()==true)return this._assets.get(tId)._getData();return this._assets.get(tId)._getPack().getTexture(this._assets.get(tId)._getPath(),true);},hasAsset:function(pId){return this._assets.exists(pId);},_parseSpritesheet:function(pId){var tXml=this.getXML(pId+".xml");var tImage=this.getTexture(pId);var tName="";var tRect=new flambe.math.Rectangle(0,0,0,0);var tTexture;var $it0=tXml.nodes.resolve("SubTexture").iterator();while($it0.hasNext()){var subNode=$it0.next();tName=subNode.att.resolve("name").toString();tRect.x=Std.parseFloat(subNode.att.resolve("x").toString());tRect.y=Std.parseFloat(subNode.att.resolve("y").toString());tRect.width=Std.parseFloat(subNode.att.resolve("width").toString());tRect.height=Std.parseFloat(subNode.att.resolve("height").toString());tTexture=flambe.System.createTexture(Std["int"](tRect.width),Std["int"](tRect.height));tTexture.get_graphics().drawSubImage(tImage,0,0,Std["int"](tRect.x),Std["int"](tRect.y),Std["int"](tRect.width),Std["int"](tRect.height));this.addConstructedAsset(tName,tTexture);tTexture=null;}
tImage=null;tXml=null;tRect=null;},_onAllLoadComplete:function(){com.workinman.utils.WorkinCloud.instance.log("[WMAssetManager](_onAllLoadComplete) all packs loaded!");com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.workinman.data.ConstantsCloud.EVENT_FILES_LOADED));},isLoading:function(){return this._packsLoaded<this._packsMax;},addConstructedAsset:function(pId,pData){var tPack=new com.workinman.utils._WMAssetManager.AssetDef(pId,this._assets,pData);tPack=null;},addPack:function(pPack){var $it0=pPack.get_manifest().iterator();while($it0.hasNext()){var a=$it0.next();var tPack=new com.workinman.utils._WMAssetManager.AssetDef(a.name,this._assets,pPack);tPack=null;}},isPackLoaded:function(pId){return this._packs.exists(pId);},_loadManifest:function(pManifest,pId,pBasePath,pDoRetry){if(pDoRetry==null)pDoRetry=true;if(pBasePath==null)pBasePath="";var _g=this;var loader=flambe.System.loadAssetPack(pManifest);this._loadingTotal+=loader.get_total();this._loadingPackProgress.set(pId,0);loader.error.connect(function(string){com.workinman.utils.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Loading failed with error: "+string);com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEvent(com.workinman.data.ConstantsCloud.EVENT_FILES_ERROR));_g._loadingChances--;if(pDoRetry==true){if(_g._loadingChances>=0)haxe.Timer.delay(function(){com.workinman.utils.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Retrying. With "+_g._loadingChances+" more chances.");_g.loadPack(pId,pBasePath,false);},500);else com.workinman.utils.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Loading attempts timed out.");}else com.workinman.utils.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Loading failed, not attempting to retry.");});loader.progressChanged.connect(function(){var change=loader.get_progress()-_g._loadingPackProgress.get(pId);_g._loadingPackProgress.set(pId,loader.get_progress());_g._loadingProgress+=change;var ratio=_g._loadingProgress/_g._loadingTotal;var load=Math.round(ratio*100);com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.workinman.data.ConstantsCloud.EVENT_FILES_LOADING,{value:load}));});loader.get(function(pack){_g.addPack(pack);_g._packsLoaded++;var _g1=0,_g2=_g._defs.get(pId)._getFlump();while(_g1<_g2.length){var f=_g2[_g1];++_g1;_g._flump.set(f,new flambe.swf.Library(pack,f));}
var _g1=0,_g2=_g._defs.get(pId)._getTiles();while(_g1<_g2.length){var t=_g2[_g1];++_g1;_g._parseSpritesheet(t);}
_g._packs.set(pId,pack);if(_g._packsLoaded>=_g._packsMax)_g._onAllLoadComplete();});},loadPack:function(pId,pBasePath,pNew){if(pNew==null)pNew=true;if(pBasePath==null)pBasePath="";if(this._defs.exists(pId)==false)com.workinman.utils.WorkinCloud.instance.log("[WMAssetManager](loadPack) Can't load pack "+pId+" , define the pack in config.xml.");com.workinman.utils.WorkinCloud.instance.log("[WMAssetManager](loadPack) "+pId);if(pNew){this._loadingChances=this._LOADING_CHANCES;this._packsMax++;}
var tManifest=flambe.asset.Manifest.build(pId);if(this._baseUrl!=""){if(this._flagBaseIsCrossdomain)tManifest.set_externalBasePath(this._baseUrl);else tManifest.set_relativeBasePath(this._baseUrl);}
this._loadManifest(tManifest,pId,pBasePath);},addPackDef:function(pId,pFlump,pTiles){if(pFlump==null)pFlump=new Array();if(pTiles==null)pTiles=new Array();this._defs.set(pId,new com.workinman.utils._WMAssetManager.PackDef(pId,pFlump,pTiles));pFlump=null;pTiles=null;},_parseChunk:function(pId,pFast){var tChunks=new Array();var tPacks=new Array();var $it0=pFast.nodes.resolve("chunk").iterator();while($it0.hasNext()){var n=$it0.next();tChunks.push(n.getInnerData().toString());}
var $it1=pFast.nodes.resolve("pack").iterator();while($it1.hasNext()){var n=$it1.next();tPacks.push(n.getInnerData().toString());}
var tChunk=new com.workinman.utils._WMAssetManager.ChunkDef(pId,tPacks,tChunks);tChunks=null;tPacks=null;return tChunk;},loadFolder:function(pUrl){com.workinman.utils.WorkinCloud.instance.log("[WMAssetManager](loadFolder) "+pUrl);if(this.isPackLoaded(pUrl))return;this.addPackDef(pUrl);this.loadPack(pUrl);},loadChunk:function(pId){if(this._chunks.exists(pId)==false)com.workinman.utils.WorkinCloud.instance.log("[WMAssetManager](loadChunk) No chunk named "+pId+" defined.");var _g=0,_g1=this._chunks.get(pId)._getChunks();while(_g<_g1.length){var s=_g1[_g];++_g;this.loadChunk(s);}
if(this._packsLoaded>=this._packsMax){this._loadingTotal=0;this._loadingProgress=0;com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.workinman.data.ConstantsCloud.EVENT_FILES_LOADING,{value:0}));}
var _g=0,_g1=this._chunks.get(pId)._getPacks();while(_g<_g1.length){var s=_g1[_g];++_g;if(this.isPackLoaded(s)==false)this.loadPack(s);}},isChunkLoaded:function(pId){if(this._chunks.exists(pId)==false){com.workinman.utils.WorkinCloud.instance.log("[WMAssetManager](isChunkLoaded) No chunk named "+pId+" defined.");return false;}
var _g=0,_g1=this._chunks.get(pId)._getPacks();while(_g<_g1.length){var s=_g1[_g];++_g;if(this.isPackLoaded(s)==false)return false;}
return true;},addChunk:function(pId,pFast){var tChunk=this._parseChunk(pId,pFast);this._chunks.set(pId,tChunk);tChunk=null;},setCrossdomainBaseUrl:function(pBaseUrl){this._flagBaseIsCrossdomain=true;this._setBaseUrl(pBaseUrl);},_setBaseUrl:function(pBaseUrl){this._baseUrl=pBaseUrl;com.workinman.utils.WorkinCloud.instance.log("[WMAssetManager](setBaseUrl) Base Url set to '"+pBaseUrl+"'");return this._baseUrl;},_getBaseUrl:function(){return this._baseUrl;},__class__:com.workinman.utils.WMAssetManager,__properties__:{set_baseUrl:"_setBaseUrl",get_baseUrl:"_getBaseUrl"}}
com.workinman.utils._WMAssetManager={}
com.workinman.utils._WMAssetManager.AssetDef=function(pPath,pHash,pData){this._path=pPath;var tSplit=pPath.split("/");this._id=tSplit[tSplit.length-1].split(".")[0];this._constructed=false;this._pack=null;this._data=null;tSplit=null;if(Std["is"](pData,flambe.asset.AssetPack))this._pack=pData;else{this._constructed=true;this._data=pData;}
this._hash=pHash;this._hash.set(this._path,this);if(this._path!=this._path.split(".")[0])this._hash.set(this._path.split(".")[0],this);if(this._path!=this._id)this._hash.set(this._id,this);};$hxClasses["com.workinman.utils._WMAssetManager.AssetDef"]=com.workinman.utils._WMAssetManager.AssetDef;com.workinman.utils._WMAssetManager.AssetDef.__name__=["com","workinman","utils","_WMAssetManager","AssetDef"];com.workinman.utils._WMAssetManager.AssetDef.prototype={_getPack:function(){return this._pack;},_getPath:function(){return this._path;},_getData:function(){return this._data;},_getConstructed:function(){return this._constructed;},__class__:com.workinman.utils._WMAssetManager.AssetDef,__properties__:{get_constructed:"_getConstructed",get_data:"_getData",get_path:"_getPath",get_pack:"_getPack"}}
com.workinman.utils._WMAssetManager.PackDef=function(pId,pFlump,pTiles){this._id=pId;this._flump=pFlump;this._tiles=pTiles;};$hxClasses["com.workinman.utils._WMAssetManager.PackDef"]=com.workinman.utils._WMAssetManager.PackDef;com.workinman.utils._WMAssetManager.PackDef.__name__=["com","workinman","utils","_WMAssetManager","PackDef"];com.workinman.utils._WMAssetManager.PackDef.prototype={_getTiles:function(){return this._tiles;},_getFlump:function(){return this._flump;},__class__:com.workinman.utils._WMAssetManager.PackDef,__properties__:{get_flump:"_getFlump",get_tiles:"_getTiles"}}
com.workinman.utils._WMAssetManager.ChunkDef=function(pId,pPacks,pChunks){this._id=pId;this._packs=pPacks;this._chunks=pChunks;};$hxClasses["com.workinman.utils._WMAssetManager.ChunkDef"]=com.workinman.utils._WMAssetManager.ChunkDef;com.workinman.utils._WMAssetManager.ChunkDef.__name__=["com","workinman","utils","_WMAssetManager","ChunkDef"];com.workinman.utils._WMAssetManager.ChunkDef.prototype={_getChunks:function(){return this._chunks;},_getPacks:function(){return this._packs;},__class__:com.workinman.utils._WMAssetManager.ChunkDef,__properties__:{get_packIds:"_getPacks",get_chunkIds:"_getChunks"}}
com.workinman.utils.WMInput=function(){this._multiTouchAvail=false;this._keycodes=new Hash();this._virtualkeys=new Hash();this._keydown=new Hash();this._touchList=new Hash();this._touchRemoval=new Array();this._keydown.set("input_click",false);this._scale=1;this._offset=new com.workinman.math.WorkinPoint();this._pointer=new com.workinman.utils.WMPointer("",0);};$hxClasses["com.workinman.utils.WMInput"]=com.workinman.utils.WMInput;com.workinman.utils.WMInput.__name__=["com","workinman","utils","WMInput"];com.workinman.utils.WMInput.prototype={_onPointerUp:function(pEvent){this._keydown.set("input_click",false);var tX=pEvent.viewX/this._scale;var tY=pEvent.viewY/this._scale;tX+=this._offset.x;tY+=this._offset.y;this._pointer.end(tX,tY);if(this._multiTouchAvail==false&&this._touchList.exists("const"))this._touchList.get("const").end(tX,tY);com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventInput(0,"input_click",tX,tY,this._pointer._getSwipe()));},_onPointerMove:function(pEvent){var tX=pEvent.viewX/this._scale;var tY=pEvent.viewY/this._scale;tX+=this._offset.x;tY+=this._offset.y;this._pointer.move(tX,tY);if(this._multiTouchAvail==false&&this._touchList.exists("const"))this._touchList.get("const").move(tX,tY);com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventInput(2,"input_click",tX,tY,this._pointer._getSwipe()));},_onPointerDown:function(pEvent){this._keydown.set("input_click",true);var tX=pEvent.viewX/this._scale;var tY=pEvent.viewY/this._scale;tX+=this._offset.x;tY+=this._offset.y;this._pointer.begin(tX,tY);if(this._multiTouchAvail==false){var tPointer=new com.workinman.utils.WMPointer("const",0);tPointer.begin(tX,tY);this._touchList.set("const",tPointer);}
com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventInput(1,"input_click",tX,tY,this._pointer._getSwipe()));},_onTouchUp:function(pEvent){var tX=pEvent.viewX/this._scale;var tY=pEvent.viewY/this._scale;tX+=this._offset.x;tY+=this._offset.y;this._touchList.get(Std.string(pEvent.id)).end(tX,tY);if(this._touchList.get(Std.string(pEvent.id))._getIndex()>0)com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventInput(0,"input_click",tX,tY,this._touchList.get(Std.string(pEvent.id))._getSwipe()));},_onTouchMove:function(pEvent){var tX=pEvent.viewX/this._scale;var tY=pEvent.viewY/this._scale;tX+=this._offset.x;tY+=this._offset.y;this._touchList.get(Std.string(pEvent.id)).move(tX,tY);if(this._touchList.get(Std.string(pEvent.id))._getIndex()>0)com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventInput(2,"input_click",tX,tY,this._touchList.get(Std.string(pEvent.id))._getSwipe()));},_onTouchDown:function(pEvent){console.log("[WMInput] (_onTouchDown)");var tIndex=0;var tFound=false;do{tFound=true;var $it0=this._touchList.iterator();while($it0.hasNext()){var p=$it0.next();if(tIndex==p._getIndex()){tIndex++;tFound=false;break;}}}while(tFound==false);var tPointer=new com.workinman.utils.WMPointer(Std.string(pEvent.id),tIndex);this._touchList.set(tPointer._getId(),tPointer);var tX=pEvent.viewX/this._scale;var tY=pEvent.viewY/this._scale;tX+=this._offset.x;tY+=this._offset.y;tPointer.begin(tX,tY);if(tIndex>0)com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventInput(1,"input_click",tX,tY,tPointer._getSwipe()));},_onKeyUp:function(pEvent){var tArray;var $it0=this._keycodes.keys();while($it0.hasNext()){var k=$it0.next();tArray=this._keycodes.get(k);var _g=0;while(_g<tArray.length){var i=tArray[_g];++_g;if(i==pEvent.key){this._keydown.set(k,false);com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventInput(0,k,0,0));}}}},_onKeyDown:function(pEvent){var tArray;var $it0=this._keycodes.keys();while($it0.hasNext()){var k=$it0.next();tArray=this._keycodes.get(k);var _g=0;while(_g<tArray.length){var i=tArray[_g];++_g;if(i==pEvent.key){this._keydown.set(k,true);com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventInput(1,k,0,0));}}}
com.workinman.utils.WorkinCloud.instance.getDispatcher().dispatchEvent(new com.workinman.events.WMEventData(com.workinman.data.ConstantsCloud.EVENT_INPUT_ARBITRARY_KEY,{key:pEvent.key,state:1}));},getInput:function(pID){return this._keydown.get(pID);},registerInput:function(pID,pArray,pVirtual){this._keycodes.set(pID,pArray);this._keydown.set(pID,false);if(pVirtual!=null)this._virtualkeys.set(pID,pVirtual);},prime:function(){this._multiTouchAvail=flambe.System.get_touch().get_supported();flambe.System.get_keyboard().down.connect($bind(this,this._onKeyDown));flambe.System.get_keyboard().up.connect($bind(this,this._onKeyUp));if(this._multiTouchAvail){console.log("[WMInput](prime) Multi Touch Enabled");flambe.System.get_touch().down.connect($bind(this,this._onTouchDown));flambe.System.get_touch().move.connect($bind(this,this._onTouchMove));flambe.System.get_touch().up.connect($bind(this,this._onTouchUp));}
flambe.System.get_pointer().down.connect($bind(this,this._onPointerDown));flambe.System.get_pointer().move.connect($bind(this,this._onPointerMove));flambe.System.get_pointer().up.connect($bind(this,this._onPointerUp));},_getMultiTouch:function(){return this._touchList;},_getPointer:function(){return this._pointer;},_setOffset:function(pOffset){return this._offset=pOffset;},_getOffset:function(){return this._offset;},_setScale:function(pScale){this._scale=pScale;if(this._scale==0)this._scale=.01;return this._scale;},_getScale:function(){return this._scale;},update:function(dt){this._pointer.update(dt);var $it0=this._touchList.iterator();while($it0.hasNext()){var p=$it0.next();if(p._getPhase()==com.workinman.events.WMEventInput.PHASE_UP)this._touchRemoval.push(p._getId());else p.update(dt);}
var _g=0,_g1=this._touchRemoval;while(_g<_g1.length){var i=_g1[_g];++_g;this._touchList.get(i).dispose();this._touchList.remove(i);}
while(this._touchRemoval.length>0)this._touchRemoval.pop();},__class__:com.workinman.utils.WMInput,__properties__:{set_scale:"_setScale",get_scale:"_getScale",get_multiTouch:"_getMultiTouch"}}
com.workinman.utils.WMPointer=function(pId,pIndex){this.SWIPE_DOWN=4;this.SWIPE_UP=3;this.SWIPE_RIGHT=2;this.SWIPE_LEFT=1;this.SWIPE_NONE=0;this._resetDeltaLine=true;this._timer=com.workinman.utils.WMPointer._DELTA_TIMEOUT;this._id=pId;this._index=pIndex;this._origin=new com.workinman.math.WorkinPoint(0,0);this._current=new com.workinman.math.WorkinPoint(0,0);this._last=new com.workinman.math.WorkinPoint(0,0);this._delta=new com.workinman.math.WorkinPoint(0,0);this._line=new com.workinman.math.WorkinLine(new com.workinman.math.WorkinPoint(0,0),new com.workinman.math.WorkinPoint(0,0));this._deltaLine=this._line.copy();this._camera=new com.workinman.math.WorkinCamera(0,0);this._phase=com.workinman.events.WMEventInput.PHASE_UP;this._swipe=this.SWIPE_NONE;this._consumed=false;};$hxClasses["com.workinman.utils.WMPointer"]=com.workinman.utils.WMPointer;com.workinman.utils.WMPointer.__name__=["com","workinman","utils","WMPointer"];com.workinman.utils.WMPointer.prototype={update:function(dt){this._resetDeltaLine=true;this._timer-=dt;if(this._timer<0){this._timer=com.workinman.utils.WMPointer._DELTA_TIMEOUT;this._deltaLine.originToPoint(this._current);}},_updateInfo:function(pX,pY){this._last.toPoint(this._current);this._current.to(pX,pY);this._current.x+=this._camera._getPos().x-this._camera._getScreenCenterX();this._current.y+=this._camera._getPos().y-this._camera._getScreenCenterY();this._delta.toPoint(this._current);this._delta.subtractPoint(this._last);},_testSwipe:function(){if(this._consumed==false){var tDeltaX=this._origin.x-this._current.x;var tDeltaY=this._origin.y-this._current.y;if(Math.abs(tDeltaX)>=com.workinman.utils.WMPointer._DELTA_ALLOWANCE&&Math.abs(tDeltaY)<com.workinman.utils.WMPointer._DELTA_ALLOWANCE){if(tDeltaX>0)this._swipe=this.SWIPE_LEFT;else this._swipe=this.SWIPE_RIGHT;}else if(Math.abs(tDeltaY)>=com.workinman.utils.WMPointer._DELTA_ALLOWANCE&&Math.abs(tDeltaX)<com.workinman.utils.WMPointer._DELTA_ALLOWANCE){if(tDeltaY>0)this._swipe=this.SWIPE_UP;else this._swipe=this.SWIPE_DOWN;}else this._swipe=this.SWIPE_NONE;}else this._swipe=this.SWIPE_NONE;},end:function(pX,pY){this._phase=com.workinman.events.WMEventInput.PHASE_UP;this._updateInfo(pX,pY);this._testSwipe();this._line.endToPoint(this._current);},move:function(pX,pY){this._updateInfo(pX,pY);if(com.workinman.utils.WorkinCloud.instance.getInput().getInput("input_click")==false)return;this._phase=com.workinman.events.WMEventInput.PHASE_MOVE;this._testSwipe();this._line.endToPoint(this._current);},begin:function(pX,pY){this._origin.to(pX,pY);this._origin.x+=this._camera._getPos().x-this._camera._getScreenCenterX();this._origin.y+=this._camera._getPos().y-this._camera._getScreenCenterY();this._current.toPoint(this._origin);this._last.toPoint(this._origin);this._delta.to(0,0);this._line.to(this._origin,this._current);this._deltaLine.to(this._origin,this._current);this._consumed=false;this._phase=com.workinman.events.WMEventInput.PHASE_DOWN;this._swipe=this.SWIPE_NONE;},_getDeltaLine:function(){if(this._resetDeltaLine==false)return this._deltaLine;this._deltaLine.endToPoint(this._current);this._resetDeltaLine=false;return this._deltaLine;},_setIndex:function(pIndex){this._index=pIndex;return this._index;},_getIndex:function(){return this._index;},_getId:function(){return this._id;},_setConsumed:function(pConsumed){this._consumed=pConsumed;return this._consumed;},_getConsumed:function(){return this._consumed;},_getSwipe:function(){return this._swipe;},_getLine:function(){return this._line;},_getDeltaPos:function(){return this._delta;},_getLastPos:function(){return this._last;},_getCurrentPos:function(){return this._current;},_getOriginPos:function(){return this._origin;},_getPhase:function(){return this._phase;},dispose:function(){this._origin=null;this._current=null;this._last=null;this._delta=null;this._line.dispose();this._line=null;this._deltaLine.dispose();this._deltaLine=null;this._camera=null;},__class__:com.workinman.utils.WMPointer,__properties__:{get_phase:"_getPhase",get_swipe:"_getSwipe",set_consumed:"_setConsumed",get_consumed:"_getConsumed",get_id:"_getId",set_index:"_setIndex",get_index:"_getIndex"}}
com.workinman.utils.WMLocalize=function(){};$hxClasses["com.workinman.utils.WMLocalize"]=com.workinman.utils.WMLocalize;com.workinman.utils.WMLocalize.__name__=["com","workinman","utils","WMLocalize"];com.workinman.utils.WMLocalize.prototype={getData:function(inId,inXML){if(inXML==null)inXML="";if(inXML=="")inXML=com.workinman.data.ConstantsCloud.LOCALIZATION_XML_PATH+"translation_"+com.workinman.utils.WorkinCloud.instance.getString(com.workinman.data.ConstantsCloud.STRING_REGION_ID)+".xml";var tFast=com.workinman.utils.WorkinCloud.instance.getAssets().getXML(inXML);var $it0=tFast.nodes.resolve("string").iterator();while($it0.hasNext()){var stringNode=$it0.next();if(stringNode.att.resolve("id")==inId)return new com.workinman.utils.WMLocalizedData(stringNode.att.resolve("id"),stringNode.getInnerData(),stringNode.att.resolve("fontName"),Std.parseFloat(stringNode.att.resolve("fontScale")),Std.parseFloat(stringNode.att.resolve("offsetX")),Std.parseFloat(stringNode.att.resolve("offsetX")));}
com.workinman.utils.WorkinCloud.instance.log("[WMLocalize] ERROR: No localization data for : "+inId);return new com.workinman.utils.WMLocalizedData(inId,"","",1,0,0);},__class__:com.workinman.utils.WMLocalize}
com.workinman.utils.WMLocalizedData=function(inId,inString,inFont,inScale,inOffsetX,inOffsetY){this._id=inId;this._string=inString;this._fontName=inFont;this._scale=inScale;this._offsetX=inOffsetX;this._offsetY=inOffsetY;};$hxClasses["com.workinman.utils.WMLocalizedData"]=com.workinman.utils.WMLocalizedData;com.workinman.utils.WMLocalizedData.__name__=["com","workinman","utils","WMLocalizedData"];com.workinman.utils.WMLocalizedData.prototype={_getOffsetY:function(){return this._offsetY;},_getOffsetX:function(){return this._offsetX;},_getScale:function(){return this._scale;},_getFontName:function(){return this._fontName;},_getString:function(){return this._string;},_getId:function(){return this._id;},__class__:com.workinman.utils.WMLocalizedData,__properties__:{get_string:"_getString",get_fontName:"_getFontName",get_scale:"_getScale",get_offsetX:"_getOffsetX",get_offsetY:"_getOffsetY"}}
com.workinman.utils.WMSound=function(){this._musicId="";this._musicGain=1;this._musicPlaying=null;this._flagMuted=false;this._flagSystemMute=false;this._mixer=new flambe.sound.Mixer();this._sounds=new Array();};$hxClasses["com.workinman.utils.WMSound"]=com.workinman.utils.WMSound;com.workinman.utils.WMSound.__name__=["com","workinman","utils","WMSound"];com.workinman.utils.WMSound.prototype={_getMusicPlaying:function(){return this._musicPlaying;},update:function(dt){if(com.workinman.data.ConstantsCloud.getIsAndroid()){if(this._musicPlaying!=null){if(this._musicPlaying._getPlayback().get_position()/this._musicPlaying._getSound().get_duration()>=.95)Reflect.setProperty(this._musicPlaying._getPlayback(),"position",0);}}
var tI=0;while(tI<this._sounds.length){if(this._sounds[tI]._getFade()==com.workinman.utils.WMSound.FADE_OUT){if(this._sounds[tI]._getPlayback().volume.get__()>0){var _g=this._sounds[tI]._getPlayback().volume;_g.set__(_g.get__()-dt*this._sounds[tI]._getFadeSpeed());if(this._sounds[tI]._getPlayback().volume.get__()<=0){this._sounds[tI].setFade(com.workinman.utils.WMSound.FADE_NONE);this._sounds[tI]._getPlayback().volume.set__(0);}}}else if(this._sounds[tI]._getFade()==com.workinman.utils.WMSound.FADE_IN){if(this._sounds[tI]._getPlayback().volume.get__()<this._sounds[tI].volume){var _g=this._sounds[tI]._getPlayback().volume;_g.set__(_g.get__()+dt*this._sounds[tI]._getFadeSpeed());if(this._sounds[tI]._getPlayback().volume.get__()>=this._sounds[tI].volume){this._sounds[tI].setFade(com.workinman.utils.WMSound.FADE_NONE);this._sounds[tI]._getPlayback().volume.set__(this._sounds[tI].volume);}}}
tI++;}
if(this._getMusicPlaying()!=null){if(this._getMusicPlaying()._getFade()==com.workinman.utils.WMSound.FADE_OUT){if(this._getMusicPlaying()._getPlayback().volume.get__()>0){var _g=this._getMusicPlaying()._getPlayback().volume;_g.set__(_g.get__()-dt*this._getMusicPlaying()._getFadeSpeed());if(this._getMusicPlaying()._getPlayback().volume.get__()<=0){this._getMusicPlaying().setFade(com.workinman.utils.WMSound.FADE_NONE);this._getMusicPlaying()._getPlayback().volume.set__(0);}}}else if(this._getMusicPlaying()._getFade()==com.workinman.utils.WMSound.FADE_IN){if(this._getMusicPlaying()._getPlayback().volume.get__()<this._getMusicPlaying().volume){var _g=this._getMusicPlaying()._getPlayback().volume;_g.set__(_g.get__()+dt*this._getMusicPlaying()._getFadeSpeed());if(this._getMusicPlaying()._getPlayback().volume.get__()>=this._getMusicPlaying().volume){this._getMusicPlaying().setFade(com.workinman.utils.WMSound.FADE_NONE);this._getMusicPlaying()._getPlayback().volume.set__(this._getMusicPlaying().volume);}}}}},_muteMusic:function(inMuteState){if(this._musicId=="")return;if(inMuteState)this._musicPlaying=null;else{var tSound=new com.workinman.utils._WMSound.SoundDef(this._musicId,this._mixer.newSound(com.workinman.utils.WorkinCloud.instance.getAssets().getSound(this._musicId),1),true);this._musicPlaying=tSound;tSound.playSound(this._musicGain);}},playMusic:function(pId,pGain){if(pGain==null)pGain=1;if(com.workinman.data.ConstantsCloud.getIsAndroid()){if(this._musicPlaying!=null)return;}
if(this._musicId==pId)return;this._musicId=pId;this._musicGain=pGain;if(this.getMute()||pId=="")return;if(this._musicPlaying!=null)this._musicPlaying.dispose();var tSound=new com.workinman.utils._WMSound.SoundDef(pId,this._mixer.newSound(com.workinman.utils.WorkinCloud.instance.getAssets().getSound(this._musicId),1),true);this._musicPlaying=tSound;tSound.playSound(pGain);},_muteAllToggle:function(inMuteState){if(inMuteState){this._mixer.stopAll();while(this._sounds.length>0)this._sounds.splice(0,1);this._muteMusic(true);}else if(!inMuteState)this._muteMusic(false);},playSound:function(pId,pGain){if(pGain==null)pGain=1;if(com.workinman.data.ConstantsCloud.getIsAndroid())return;if(this.getMute())return;var tI=0;while(tI<this._sounds.length){if(this._sounds[tI].id==pId){this._sounds[tI].playSound(pGain);return;}
tI++;}
var tSound=new com.workinman.utils._WMSound.SoundDef(pId,this._mixer.newSound(com.workinman.utils.WorkinCloud.instance.getAssets().getSound(pId),4),false);this._sounds.push(tSound);tSound.playSound(pGain);},setMute:function(inMuteState){this._flagMuted=inMuteState;if(!this._flagSystemMute)this._muteAllToggle(this._flagMuted);},getMute:function(){return this._flagSystemMute||this._flagMuted;},__class__:com.workinman.utils.WMSound,__properties__:{get_musicPlaying:"_getMusicPlaying"}}
com.workinman.utils._WMSound={}
com.workinman.utils._WMSound.SoundDef=function(pId,pSound,pIsMusic){if(pIsMusic==null)pIsMusic=false;this.id=pId;this.isMusic=pIsMusic;this.volume=1;this._flagHasSound=false;this._flagPlayed=false;this._sound=pSound;this._fade=com.workinman.utils.WMSound.FADE_NONE;this._fadeSpeed=1;};$hxClasses["com.workinman.utils._WMSound.SoundDef"]=com.workinman.utils._WMSound.SoundDef;com.workinman.utils._WMSound.SoundDef.__name__=["com","workinman","utils","_WMSound","SoundDef"];com.workinman.utils._WMSound.SoundDef.prototype={playSound:function(pGain){if(pGain==null)pGain=1;this.volume=pGain;if(com.workinman.data.ConstantsCloud.getIsAndroid()){this._playback=this._sound.play(pGain);return;}
if(this.isMusic)this._playback=this._sound.loop(pGain);else this._playback=this._sound.play(pGain);},setFade:function(fadeType,fadeSpeed){if(fadeSpeed==null)fadeSpeed=1;this._fade=fadeType;this._fadeSpeed=fadeSpeed;},_getFadeSpeed:function(){return this._fadeSpeed;},_getFade:function(){return this._fade;},_setPlayback:function(pPlayback){this._playback=pPlayback;return this._playback;},_getPlayback:function(){return this._playback;},_getSound:function(){return this._sound;},dispose:function(){this._playback.dispose();this._playback=null;},__class__:com.workinman.utils._WMSound.SoundDef,__properties__:{get_sound:"_getSound",set_playback:"_setPlayback",get_playback:"_getPlayback",get_fade:"_getFade",get_fadeSpeed:"_getFadeSpeed"}}
flambe.sound={}
flambe.sound.Mixer=function(){this._sounds=[];};$hxClasses["flambe.sound.Mixer"]=flambe.sound.Mixer;flambe.sound.Mixer.__name__=["flambe","sound","Mixer"];flambe.sound.Mixer.__super__=flambe.Component;flambe.sound.Mixer.prototype=$extend(flambe.Component.prototype,{onRemoved:function(){this.stopAll();this._sounds=[];},stopAll:function(){var _g=0,_g1=this._sounds;while(_g<_g1.length){var sound=_g1[_g];++_g;sound.dispose();}},newSound:function(source,channels){if(channels==null)channels=2147483647;var sound=new flambe.sound._Mixer.MixerSound(source,channels);this._sounds.push(sound);return sound;},get_name:function(){return "Mixer_2";},__class__:flambe.sound.Mixer});com.workinman.utils.WorkinCloud=function(){this._TIMER_STACK=.1;this._values=new Hash();this._defaults=new Hash();this._dispatcher=new com.workinman.events.WMEventDispatcher();this._input=new com.workinman.utils.WMInput();this._assets=new com.workinman.utils.WMAssetManager();this._sound=new com.workinman.utils.WMSound();this._localize=new com.workinman.utils.WMLocalize();this._stack=new Array();this._timerStack=-1;this.setString(com.workinman.data.ConstantsCloud.STRING_REGION_ID,"en");};$hxClasses["com.workinman.utils.WorkinCloud"]=com.workinman.utils.WorkinCloud;com.workinman.utils.WorkinCloud.__name__=["com","workinman","utils","WorkinCloud"];com.workinman.utils.WorkinCloud.prototype={_updateStack:function(dt){if(this._stack.length<1)return;this._timerStack-=dt;if(this._timerStack<0){console.log("[WorkinCloud](runStackMethod) "+Std.string(this._stack[0]));this._stack[0]();this._stack.shift();this._timerStack=this._TIMER_STACK;}},update:function(dt){this._updateStack(dt);this._input.update(dt);},stack:function(pArray){this._timerStack=this._TIMER_STACK;var _g=0;while(_g<pArray.length){var f=pArray[_g];++_g;this._stack.push(f);}
pArray=null;},_updateDisplays:function(inValueID){this._dispatcher.dispatchEvent(new com.workinman.events.WMEventData(com.workinman.display.Display.EVENT_UPDATE_DISPLAY,{valueID:inValueID}));},sharedObjectSetData:function(pId,pData){var tShared=com.workinman.net.WMSharedObject.getLocal(pId);tShared._setData(pData);tShared.flush();tShared.dispose();tShared=null;},sharedObjectGetData:function(pId){var tShared=com.workinman.net.WMSharedObject.getLocal(pId);var tData=tShared._getData();tShared.dispose();tShared=null;return tData;},resetValue:function(inValueID){this._values.set(inValueID,this._defaults.get(inValueID));this._updateDisplays(inValueID);},modifyValue:function(inValueID,inValue){if(inValue==null)inValue=1;this._values.set(inValueID,this.getFloat(inValueID)+inValue);this._updateDisplays(inValueID);return this.getFloat(inValueID);},setValue:function(inValueID,inValue){this._values.set(inValueID,inValue);if(this._defaults.exists(inValueID)==false)this.setDefault(inValueID,inValue);this._updateDisplays(inValueID);},getValue:function(inValueID){return this._values.get(inValueID);},setDefault:function(inValueID,inValue){this._defaults.set(inValueID,inValue);this.resetValue(inValueID);},getString:function(inValueID){return this._values.get(inValueID);},setString:function(inValueID,inValue){this.setValue(inValueID,inValue);},getInt:function(inValueID){return this._values.get(inValueID);},modifyInt:function(pValueId,pValueMod){return Math.floor(this.modifyValue(pValueId,pValueMod));},setInt:function(inValueID,inValue){this.setValue(inValueID,inValue);},getFloat:function(inValueID){return this._values.get(inValueID);},getBool:function(inValueID){return this._values.get(inValueID);},setBool:function(inValueID,inValue){this.setValue(inValueID,inValue);},_getLocalize:function(){return this._localize;},_getSound:function(){return this._sound;},getAssets:function(){return this._assets;},getInput:function(){return this._input;},getDispatcher:function(){return this._dispatcher;},log:function(pString){console.log(pString);},__class__:com.workinman.utils.WorkinCloud,__properties__:{get_dispatcher:"getDispatcher",get_input:"getInput",get_assets:"getAssets",get_sound:"_getSound",get_localize:"_getLocalize"}}
com.workinman.utils.WorkinUtils=function(){}
$hxClasses["com.workinman.utils.WorkinUtils"]=com.workinman.utils.WorkinUtils;com.workinman.utils.WorkinUtils.__name__=["com","workinman","utils","WorkinUtils"];com.workinman.utils.WorkinUtils.getRandom=function(pMin,pMax,pWholeNumbersOnly){if(pWholeNumbersOnly==null)pWholeNumbersOnly=true;var tRand=Math.random();if(tRand==1)tRand=.99;if(pWholeNumbersOnly)return pMin+Math.floor(tRand*(pMax+1-pMin));else return pMin+tRand*(pMax-pMin);}
flambe.Entity=function(){this.firstComponent=null;this.next=null;this.firstChild=null;this.parent=null;this._compMap={};};$hxClasses["flambe.Entity"]=flambe.Entity;flambe.Entity.__name__=["flambe","Entity"];flambe.Entity.__interfaces__=[flambe.util.Disposable];flambe.Entity.prototype={toStringImpl:function(indent){var output="";var p=this.firstComponent;while(p!=null){output+=p.get_name();if(p.next!=null)output+=", ";p=p.next;}
output+="\n";var u2514=String.fromCharCode(9492);var u241c=String.fromCharCode(9500);var u2500=String.fromCharCode(9472);var u2502=String.fromCharCode(9474);var p1=this.firstChild;while(p1!=null){var last=p1.next==null;output+=indent+(last?u2514:u241c)+u2500+u2500+" ";output+=p1.toStringImpl(indent+(last?" ":u2502)+"   ");p1=p1.next;}
return output;},toString:function(){return this.toStringImpl("");},dispose:function(){if(this.parent!=null)this.parent.removeChild(this);while(this.firstComponent!=null)this.firstComponent.dispose();this.disposeChildren();},disposeChildren:function(){while(this.firstChild!=null)this.firstChild.dispose();},removeChild:function(entity){var prev=null,p=this.firstChild;while(p!=null){var next=p.next;if(p==entity){if(prev==null)this.firstChild=next;else prev.next=next;p.parent=null;p.next=null;return;}
prev=p;p=next;}},addChild:function(entity,append){if(append==null)append=true;if(entity.parent!=null)entity.parent.removeChild(entity);entity.parent=this;if(append){var tail=null,p=this.firstChild;while(p!=null){tail=p;p=p.next;}
if(tail!=null)tail.next=entity;else this.firstChild=entity;}else{entity.next=this.firstChild;this.firstChild=entity;}
return this;},getComponent:function(name){return this._compMap[name];},remove:function(component){var prev=null,p=this.firstComponent;while(p!=null){var next=p.next;if(p==component){if(prev==null)this.firstComponent=next;else prev._internal_init(this,next);delete(this._compMap[p.get_name()]);p.onRemoved();p._internal_init(null,null);return;}
prev=p;p=next;}},add:function(component){component.dispose();var name=component.get_name();var prev=this.getComponent(name);if(prev!=null)this.remove(prev);this._compMap[name]=component;var tail=null,p=this.firstComponent;while(p!=null){tail=p;p=p.next;}
if(tail!=null)tail._internal_setNext(component);else this.firstComponent=component;component._internal_init(this,null);component.onAdded();return this;},__class__:flambe.Entity}
flambe.util.PackageLog=function(){}
$hxClasses["flambe.util.PackageLog"]=flambe.util.PackageLog;flambe.util.PackageLog.__name__=["flambe","util","PackageLog"];flambe.platform={}
flambe.platform.Platform=function(){}
$hxClasses["flambe.platform.Platform"]=flambe.platform.Platform;flambe.platform.Platform.__name__=["flambe","platform","Platform"];flambe.platform.Platform.prototype={__class__:flambe.platform.Platform}
flambe.platform.html={}
flambe.platform.html.HtmlPlatform=function(){};$hxClasses["flambe.platform.html.HtmlPlatform"]=flambe.platform.html.HtmlPlatform;flambe.platform.html.HtmlPlatform.__name__=["flambe","platform","html","HtmlPlatform"];flambe.platform.html.HtmlPlatform.__interfaces__=[flambe.platform.Platform];flambe.platform.html.HtmlPlatform.prototype={createRenderer:function(canvas){return new flambe.platform.html.CanvasRenderer(canvas);},getY:function(event,bounds){return this._stage.scaleFactor*(event.clientY-bounds.top);},getX:function(event,bounds){return this._stage.scaleFactor*(event.clientX-bounds.left);},getRenderer:function(){return this._renderer;},getExternal:function(){if(this._external==null)this._external=new flambe.platform.html.HtmlExternal();return this._external;},getWeb:function(){if(this._web==null)this._web=new flambe.platform.html.HtmlWeb(this._container);return this._web;},getKeyboard:function(){return this._keyboard;},getTouch:function(){return this._touch;},getMouse:function(){return this._mouse;},getPointer:function(){return this._pointer;},update:function(now){var dt=(now-this._lastUpdate)/1000;this._lastUpdate=now;if(this._skipFrame){this._skipFrame=false;return;}
this.mainLoop.update(dt);this.mainLoop.render(this._renderer);},getTime:function(){return flambe.platform.html.HtmlUtil.now()/1000;},createLogHandler:function(tag){if(flambe.platform.html.HtmlLogHandler.isSupported())return new flambe.platform.html.HtmlLogHandler(tag);return null;},getLocale:function(){var locale=js.Lib.window.navigator.language;if(locale==null)locale=js.Lib.window.navigator.userLanguage;return locale;},getStorage:function(){if(this._storage==null){var localStorage=null;try{localStorage=js.Lib.window.localStorage;}catch(error){}
if(localStorage!=null)this._storage=new flambe.platform.html.HtmlStorage(localStorage);else{flambe.Log.warn("localStorage is unavailable, falling back to unpersisted storage");this._storage=new flambe.platform.DummyStorage();}}
return this._storage;},getStage:function(){return this._stage;},loadAssetPack:function(manifest){return new flambe.platform.html.HtmlAssetPackLoader(this,manifest).promise;},init:function(){var _g=this;flambe.Log.info("Initializing HTML platform");var canvas=null;try{canvas=js.Lib.window.flambe.canvas;}catch(error){}
flambe.util.Assert.that(canvas!=null,"Could not find a Flambe canvas! Are you embedding with flambe.js?");canvas.setAttribute("tabindex","0");canvas.style.outlineStyle="none";canvas.setAttribute("moz-opaque","true");this._stage=new flambe.platform.html.HtmlStage(canvas);this._pointer=new flambe.platform.BasicPointer();this._mouse=new flambe.platform.html.HtmlMouse(this._pointer,canvas);this._keyboard=new flambe.platform.BasicKeyboard();this._renderer=this.createRenderer(canvas);flambe.System.hasGPU.set__(true);this.mainLoop=new flambe.platform.MainLoop();this._container=canvas.parentNode;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var lastTouchTime=0;var onMouse=function(event){if(event.timeStamp-lastTouchTime<1000)return;var bounds=canvas.getBoundingClientRect();var x=_g.getX(event,bounds);var y=_g.getY(event,bounds);switch(event.type){case "mousedown":if(event.target==canvas){event.preventDefault();_g._mouse.submitDown(x,y,event.button);event.target.focus();}
break;case "mousemove":_g._mouse.submitMove(x,y);break;case "mouseup":_g._mouse.submitUp(x,y,event.button);break;case "mousewheel":case "DOMMouseScroll":var velocity=event.type=="mousewheel"?event.wheelDelta/40:-event.detail;if(_g._mouse.submitScroll(x,y,velocity))event.preventDefault();break;}};window.addEventListener("mousedown",onMouse,false);window.addEventListener("mousemove",onMouse,false);window.addEventListener("mouseup",onMouse,false);canvas.addEventListener("mousewheel",onMouse,false);canvas.addEventListener("DOMMouseScroll",onMouse,false);var standardTouch=typeof(js.Lib.window.ontouchstart)!="undefined";var msTouch='msMaxTouchPoints'in window.navigator&&(window.navigator.msMaxTouchPoints>1);if(standardTouch||msTouch){var basicTouch=new flambe.platform.BasicTouch(this._pointer,msTouch?window.navigator.msMaxTouchPoints:4);this._touch=basicTouch;var onTouch=function(event){var changedTouches=standardTouch?event.changedTouches:[event];var bounds=event.target.getBoundingClientRect();lastTouchTime=event.timeStamp;switch(event.type){case "touchstart":case "MSPointerDown":event.preventDefault();if(flambe.platform.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER)flambe.platform.html.HtmlUtil.hideMobileBrowser();var _g1=0;while(_g1<changedTouches.length){var touch=changedTouches[_g1];++_g1;var x=_g.getX(touch,bounds);var y=_g.getY(touch,bounds);var id=Std["int"](standardTouch?touch.identifier:touch.pointerId);basicTouch.submitDown(id,x,y);}
break;case "touchmove":case "MSPointerMove":event.preventDefault();var _g1=0;while(_g1<changedTouches.length){var touch=changedTouches[_g1];++_g1;var x=_g.getX(touch,bounds);var y=_g.getY(touch,bounds);var id=Std["int"](standardTouch?touch.identifier:touch.pointerId);basicTouch.submitMove(id,x,y);}
break;case "touchend":case "touchcancel":case "MSPointerUp":var _g1=0;while(_g1<changedTouches.length){var touch=changedTouches[_g1];++_g1;var x=_g.getX(touch,bounds);var y=_g.getY(touch,bounds);var id=Std["int"](standardTouch?touch.identifier:touch.pointerId);basicTouch.submitUp(id,x,y);}
break;}};if(standardTouch){canvas.addEventListener("touchstart",onTouch,false);canvas.addEventListener("touchmove",onTouch,false);canvas.addEventListener("touchend",onTouch,false);canvas.addEventListener("touchcancel",onTouch,false);}else{canvas.addEventListener("MSPointerDown",onTouch,false);canvas.addEventListener("MSPointerMove",onTouch,false);canvas.addEventListener("MSPointerUp",onTouch,false);}}else this._touch=new flambe.platform.DummyTouch();var onKey=function(event){switch(event.type){case "keydown":if(_g._keyboard.submitDown(event.keyCode))event.preventDefault();break;case "keyup":_g._keyboard.submitUp(event.keyCode);break;}};canvas.addEventListener("keydown",onKey,false);canvas.addEventListener("keyup",onKey,false);var oldErrorHandler=js.Lib.window.onerror;js.Lib.window.onerror=function(message,url,line){flambe.System.uncaughtError.emit(message);return oldErrorHandler!=null?oldErrorHandler(message,url,line):false;};var hiddenApi=flambe.platform.html.HtmlUtil.loadExtension("hidden",js.Lib.document);if(hiddenApi.value!=null){var onVisibilityChanged=function(){flambe.System.hidden.set__(Reflect.field(js.Lib.document,hiddenApi.field));};onVisibilityChanged();js.Lib.document.addEventListener(hiddenApi.prefix+"visibilitychange",onVisibilityChanged,false);flambe.System.hidden.get_changed().connect(function(hidden,_){if(!hidden)_g._skipFrame=true;});}
this._lastUpdate=flambe.platform.html.HtmlUtil.now();this._skipFrame=false;var requestAnimationFrame=flambe.platform.html.HtmlUtil.loadExtension("requestAnimationFrame").value;if(requestAnimationFrame!=null){var performance=js.Lib.window.performance;var hasPerfNow=performance!=null&&flambe.platform.html.HtmlUtil.polyfill("now",performance);if(hasPerfNow)this._lastUpdate=performance.now();else flambe.Log.warn("No monotonic timer support, falling back to the system date");var updateFrame=null;updateFrame=function(now){_g.update(hasPerfNow?performance.now():now);requestAnimationFrame(updateFrame,canvas);};requestAnimationFrame(updateFrame,canvas);}else{flambe.Log.warn("No requestAnimationFrame support, falling back to setInterval");js.Lib.window.setInterval(function(){_g.update(flambe.platform.html.HtmlUtil.now());},1000/60);}},__class__:flambe.platform.html.HtmlPlatform}
flambe.util.Value=function(value,listener){this._value=value;if(listener!=null)this._changed=new flambe.util.Signal2(listener);};$hxClasses["flambe.util.Value"]=flambe.util.Value;flambe.util.Value.__name__=["flambe","util","Value"];flambe.util.Value.prototype={toString:function(){return this._value;},get_changed:function(){if(this._changed==null)this._changed=new flambe.util.Signal2();return this._changed;},set__:function(newValue){var oldValue=this._value;if(newValue!=oldValue){this._value=newValue;if(this._changed!=null)this._changed.emit(newValue,oldValue);}
return newValue;},get__:function(){return this._value;},watch:function(listener){listener(this._value,this._value);return this.get_changed().connect(listener);},__class__:flambe.util.Value,__properties__:{set__:"set__",get__:"get__",get_changed:"get_changed"}}
flambe.util.SignalConnection=function(signal,listener){this._internal_next=null;this._signal=signal;this._internal_listener=listener;this.stayInList=true;};$hxClasses["flambe.util.SignalConnection"]=flambe.util.SignalConnection;flambe.util.SignalConnection.__name__=["flambe","util","SignalConnection"];flambe.util.SignalConnection.__interfaces__=[flambe.util.Disposable];flambe.util.SignalConnection.prototype={dispose:function(){if(this._signal!=null){this._signal._internal_disconnect(this);this._signal=null;}},once:function(){this.stayInList=false;return this;},__class__:flambe.util.SignalConnection}
flambe.util.SignalBase=function(listener){this._head=listener!=null?new flambe.util.SignalConnection(this,listener):null;this._deferredTasks=null;};$hxClasses["flambe.util.SignalBase"]=flambe.util.SignalBase;flambe.util.SignalBase.__name__=["flambe","util","SignalBase"];flambe.util.SignalBase.prototype={dispatching:function(){return this._head==flambe.util.SignalBase.DISPATCHING_SENTINEL;},listRemove:function(conn){var prev=null,p=this._head;while(p!=null){if(p==conn){var next=p._internal_next;if(prev==null)this._head=next;else prev._internal_next=next;return;}
prev=p;p=p._internal_next;}},listAdd:function(conn,prioritize){if(prioritize){conn._internal_next=this._head;this._head=conn;}else{var tail=null,p=this._head;while(p!=null){tail=p;p=p._internal_next;}
if(tail!=null)tail._internal_next=conn;else this._head=conn;}},didEmit:function(head){this._head=head;while(this._deferredTasks!=null){this._deferredTasks.fn();this._deferredTasks=this._deferredTasks.next;}},willEmit:function(){flambe.util.Assert.that(!this.dispatching(),"Cannot emit while already emitting!");var snapshot=this._head;this._head=flambe.util.SignalBase.DISPATCHING_SENTINEL;return snapshot;},defer:function(fn){var tail=null,p=this._deferredTasks;while(p!=null){tail=p;p=p.next;}
var task=new flambe.util._SignalBase.Task(fn);if(tail!=null)tail.next=task;else this._deferredTasks=task;},emit2:function(arg1,arg2){var head=this.willEmit();var p=head;while(p!=null){p._internal_listener(arg1,arg2);if(!p.stayInList)p.dispose();p=p._internal_next;}
this.didEmit(head);},emit1:function(arg1){var head=this.willEmit();var p=head;while(p!=null){p._internal_listener(arg1);if(!p.stayInList)p.dispose();p=p._internal_next;}
this.didEmit(head);},emit0:function(){var head=this.willEmit();var p=head;while(p!=null){p._internal_listener();if(!p.stayInList)p.dispose();p=p._internal_next;}
this.didEmit(head);},_internal_disconnect:function(conn){var _g=this;if(this.dispatching())this.defer(function(){_g.listRemove(conn);});else this.listRemove(conn);},connectImpl:function(listener,prioritize){var _g=this;var conn=new flambe.util.SignalConnection(this,listener);if(this.dispatching())this.defer(function(){_g.listAdd(conn,prioritize);});else this.listAdd(conn,prioritize);return conn;},hasListeners:function(){return this._head!=null;},__class__:flambe.util.SignalBase}
flambe.util.Signal2=function(listener){flambe.util.SignalBase.call(this,listener);};$hxClasses["flambe.util.Signal2"]=flambe.util.Signal2;flambe.util.Signal2.__name__=["flambe","util","Signal2"];flambe.util.Signal2.__super__=flambe.util.SignalBase;flambe.util.Signal2.prototype=$extend(flambe.util.SignalBase.prototype,{emit:function(arg1,arg2){this.emit2(arg1,arg2);},connect:function(listener,prioritize){if(prioritize==null)prioritize=false;return this.connectImpl(listener,prioritize);},__class__:flambe.util.Signal2});flambe.util.Signal1=function(listener){flambe.util.SignalBase.call(this,listener);};$hxClasses["flambe.util.Signal1"]=flambe.util.Signal1;flambe.util.Signal1.__name__=["flambe","util","Signal1"];flambe.util.Signal1.__super__=flambe.util.SignalBase;flambe.util.Signal1.prototype=$extend(flambe.util.SignalBase.prototype,{emit:function(arg1){this.emit1(arg1);},connect:function(listener,prioritize){if(prioritize==null)prioritize=false;return this.connectImpl(listener,prioritize);},__class__:flambe.util.Signal1});flambe.animation={}
flambe.animation.AnimatedFloat=function(value,listener){flambe.util.Value.call(this,value,listener);};$hxClasses["flambe.animation.AnimatedFloat"]=flambe.animation.AnimatedFloat;flambe.animation.AnimatedFloat.__name__=["flambe","animation","AnimatedFloat"];flambe.animation.AnimatedFloat.__super__=flambe.util.Value;flambe.animation.AnimatedFloat.prototype=$extend(flambe.util.Value.prototype,{set_behavior:function(behavior){this._behavior=behavior;this.update(0);return behavior;},update:function(dt){if(this._behavior!=null){flambe.util.Value.prototype.set__.call(this,this._behavior.update(dt));if(this._behavior.isComplete())this._behavior=null;}},set__:function(value){this._behavior=null;return flambe.util.Value.prototype.set__.call(this,value);},__class__:flambe.animation.AnimatedFloat});flambe.System=function(){}
$hxClasses["flambe.System"]=flambe.System;flambe.System.__name__=["flambe","System"];flambe.System.__properties__={get_keyboard:"get_keyboard",get_touch:"get_touch",get_pointer:"get_pointer",get_stage:"get_stage"}
flambe.System.init=function(){if(!flambe.System._calledInit){flambe.System._platform.init();flambe.System._calledInit=true;}}
flambe.System.loadAssetPack=function(manifest){flambe.System.assertCalledInit();return flambe.System._platform.loadAssetPack(manifest);}
flambe.System.createTexture=function(width,height){flambe.System.assertCalledInit();var texture=flambe.System._platform.getRenderer().createEmptyTexture(width,height);if(texture==null)flambe.Log.warn("Failed to create texture. Is the GPU context unavailable?");return texture;}
flambe.System.createLogger=function(tag){return new flambe.util.Logger(flambe.System._platform.createLogHandler(tag));}
flambe.System.get_stage=function(){flambe.System.assertCalledInit();return flambe.System._platform.getStage();}
flambe.System.get_pointer=function(){flambe.System.assertCalledInit();return flambe.System._platform.getPointer();}
flambe.System.get_touch=function(){flambe.System.assertCalledInit();return flambe.System._platform.getTouch();}
flambe.System.get_keyboard=function(){flambe.System.assertCalledInit();return flambe.System._platform.getKeyboard();}
flambe.System.assertCalledInit=function(){flambe.util.Assert.that(flambe.System._calledInit,"You must call System.init() first");}
flambe.util.Logger=function(handler){this._handler=handler;};$hxClasses["flambe.util.Logger"]=flambe.util.Logger;flambe.util.Logger.__name__=["flambe","util","Logger"];flambe.util.Logger.prototype={log:function(level,text,args){if(this._handler==null)return;if(text==null)text="";if(args!=null)text=flambe.util.Strings.withFields(text,args);this._handler.log(level,text);},warn:function(text,args){this.log(flambe.util.LogLevel.Warn,text,args);},info:function(text,args){this.log(flambe.util.LogLevel.Info,text,args);},__class__:flambe.util.Logger}
flambe.Log=function(){}
$hxClasses["flambe.Log"]=flambe.Log;flambe.Log.__name__=["flambe","Log"];flambe.Log.info=function(text,args){flambe.Log.logger.info(text,args);}
flambe.Log.warn=function(text,args){flambe.Log.logger.warn(text,args);}
flambe.Log.__super__=flambe.util.PackageLog;flambe.Log.prototype=$extend(flambe.util.PackageLog.prototype,{__class__:flambe.Log});flambe.SpeedAdjuster=function(scale){if(scale==null)scale=1;this._internal_realDt=0;this.scale=new flambe.animation.AnimatedFloat(scale);};$hxClasses["flambe.SpeedAdjuster"]=flambe.SpeedAdjuster;flambe.SpeedAdjuster.__name__=["flambe","SpeedAdjuster"];flambe.SpeedAdjuster.getFrom=function(entity){return entity.getComponent("SpeedAdjuster_5");}
flambe.SpeedAdjuster.__super__=flambe.Component;flambe.SpeedAdjuster.prototype=$extend(flambe.Component.prototype,{onUpdate:function(dt){if(this._internal_realDt>0){dt=this._internal_realDt;this._internal_realDt=0;}
this.scale.update(dt);},get_name:function(){return "SpeedAdjuster_5";},__class__:flambe.SpeedAdjuster});flambe.animation.Behavior=function(){}
$hxClasses["flambe.animation.Behavior"]=flambe.animation.Behavior;flambe.animation.Behavior.__name__=["flambe","animation","Behavior"];flambe.animation.Behavior.prototype={__class__:flambe.animation.Behavior}
flambe.animation.Binding=function(){}
$hxClasses["flambe.animation.Binding"]=flambe.animation.Binding;flambe.animation.Binding.__name__=["flambe","animation","Binding"];flambe.animation.Binding.__interfaces__=[flambe.animation.Behavior];flambe.animation.Binding.prototype={isComplete:function(){return false;},update:function(dt){var value=this._target.get__();if(this._fn!=null)return this._fn(value);else return value;},__class__:flambe.animation.Binding}
flambe.asset={}
flambe.asset.AssetType=$hxClasses["flambe.asset.AssetType"]={__ename__:["flambe","asset","AssetType"],__constructs__:["Image","Audio","Data"]}
flambe.asset.AssetType.Image=["Image",0];flambe.asset.AssetType.Image.toString=$estr;flambe.asset.AssetType.Image.__enum__=flambe.asset.AssetType;flambe.asset.AssetType.Audio=["Audio",1];flambe.asset.AssetType.Audio.toString=$estr;flambe.asset.AssetType.Audio.__enum__=flambe.asset.AssetType;flambe.asset.AssetType.Data=["Data",2];flambe.asset.AssetType.Data.toString=$estr;flambe.asset.AssetType.Data.__enum__=flambe.asset.AssetType;flambe.asset.AssetEntry=function(name,url,type,bytes){this.name=name;this.url=url;this.type=type;this.bytes=bytes;};$hxClasses["flambe.asset.AssetEntry"]=flambe.asset.AssetEntry;flambe.asset.AssetEntry.__name__=["flambe","asset","AssetEntry"];flambe.asset.AssetEntry.prototype={getUrlExtension:function(){return flambe.util.Strings.getFileExtension(this.url.split("?")[0]).toLowerCase();},__class__:flambe.asset.AssetEntry}
flambe.asset.AssetPack=function(){}
$hxClasses["flambe.asset.AssetPack"]=flambe.asset.AssetPack;flambe.asset.AssetPack.__name__=["flambe","asset","AssetPack"];flambe.asset.AssetPack.prototype={__class__:flambe.asset.AssetPack,__properties__:{get_manifest:"get_manifest"}}
var js={}
js.Boot=function(){}
$hxClasses["js.Boot"]=js.Boot;js.Boot.__name__=["js","Boot"];js.Boot.isClass=function(o){return o.__name__;}
js.Boot.isEnum=function(e){return e.__ename__;}
js.Boot.getClass=function(o){return o.__class__;}
js.Boot.__string_rec=function(o,s){if(o==null)return "null";if(s.length>=5)return "<...>";var t=typeof(o);if(t=="function"&&(js.Boot.isClass(o)||js.Boot.isEnum(o)))t="object";switch(t){case "object":if(o instanceof Array){if(o.__enum__){if(o.length==2)return o[0];var str=o[0]+"(";s+="\t";var _g1=2,_g=o.length;while(_g1<_g){var i=_g1++;if(i!=2)str+=","+js.Boot.__string_rec(o[i],s);else str+=js.Boot.__string_rec(o[i],s);}
return str+")";}
var l=o.length;var i;var str="[";s+="\t";var _g=0;while(_g<l){var i1=_g++;str+=(i1>0?",":"")+js.Boot.__string_rec(o[i1],s);}
str+="]";return str;}
var tostr;try{tostr=o.toString;}catch(e){return "???";}
if(tostr!=null&&tostr!=Object.toString){var s2=o.toString();if(s2!="[object Object]")return s2;}
var k=null;var str="{\n";s+="\t";var hasp=o.hasOwnProperty!=null;for(var k in o){;if(hasp&&!o.hasOwnProperty(k)){continue;}
if(k=="prototype"||k=="__class__"||k=="__super__"||k=="__interfaces__"||k=="__properties__"){continue;}
if(str.length!=2)str+=", \n";str+=s+k+" : "+js.Boot.__string_rec(o[k],s);}
s=s.substring(1);str+="\n"+s+"}";return str;case "function":return "<function>";case "string":return o;default:return String(o);}}
js.Boot.__interfLoop=function(cc,cl){if(cc==null)return false;if(cc==cl)return true;var intf=cc.__interfaces__;if(intf!=null){var _g1=0,_g=intf.length;while(_g1<_g){var i=_g1++;var i1=intf[i];if(i1==cl||js.Boot.__interfLoop(i1,cl))return true;}}
return js.Boot.__interfLoop(cc.__super__,cl);}
js.Boot.__instanceof=function(o,cl){try{if(o instanceof cl){if(cl==Array)return o.__enum__==null;return true;}
if(js.Boot.__interfLoop(js.Boot.getClass(o),cl))return true;}catch(e){if(cl==null)return false;}
switch(cl){case Int:return Math.ceil(o%2147483648.0)===o;case Float:return typeof(o)=="number";case Bool:return o===true||o===false;case String:return typeof(o)=="string";case Dynamic:return true;default:if(o==null)return false;if(cl==Class&&o.__name__!=null)return true;else null;if(cl==Enum&&o.__ename__!=null)return true;else null;return o.__enum__==cl;}}
js.Boot.__cast=function(o,t){if(js.Boot.__instanceof(o,t))return o;else throw "Cannot cast "+Std.string(o)+" to "+Std.string(t);}
flambe.util.Strings=function(){}
$hxClasses["flambe.util.Strings"]=flambe.util.Strings;flambe.util.Strings.__name__=["flambe","util","Strings"];flambe.util.Strings.getFileExtension=function(fileName){var dot=fileName.lastIndexOf(".");return dot>0?HxOverrides.substr(fileName,dot+1,null):null;}
flambe.util.Strings.removeFileExtension=function(fileName){var dot=fileName.lastIndexOf(".");return dot>0?HxOverrides.substr(fileName,0,dot):fileName;}
flambe.util.Strings.joinPath=function(base,relative){if(StringTools.fastCodeAt(base,base.length-1)!=47)base+="/";return base+relative;}
flambe.util.Strings.withFields=function(message,fields){var ll=fields.length;if(ll>0){message+=message.length>0?" [":"[";var ii=0;while(ii<ll){if(ii>0)message+=", ";var name=fields[ii];var value=fields[ii+1];if(Std["is"](value,Error)){var stack=value.stack;if(stack!=null)value=stack;}
message+=name+"="+Std.string(value);ii+=2;}
message+="]";}
return message;}
js.Lib=function(){}
$hxClasses["js.Lib"]=js.Lib;js.Lib.__name__=["js","Lib"];js.Lib["eval"]=function(code){return eval(code);}
flambe.asset.Manifest=function(){this._entries=[];};$hxClasses["flambe.asset.Manifest"]=flambe.asset.Manifest;flambe.asset.Manifest.__name__=["flambe","asset","Manifest"];flambe.asset.Manifest.build=function(packName,required){if(required==null)required=true;var manifest=flambe.asset.Manifest._buildManifest.get(packName);if(manifest==null){if(required)throw flambe.util.Strings.withFields("Missing asset pack",["name",packName]);return null;}
return manifest.clone();}
flambe.asset.Manifest.inferType=function(url){var extension=flambe.util.Strings.getFileExtension(url.split("?")[0]);if(extension!=null)switch(extension.toLowerCase()){case "png":case "jpg":case "gif":return flambe.asset.AssetType.Image;case "ogg":case "m4a":case "mp3":case "wav":return flambe.asset.AssetType.Audio;}
return flambe.asset.AssetType.Data;}
flambe.asset.Manifest.createBuildManifests=function(){var macroData=new Hash();macroData.set("initial_load",[{name:"ui/splash/splash_title.png",md5:"f3b8087dd3772977dd2343859cc66bfa",bytes:170122},{name:"ui/splash/splash_logo.png",md5:"1ae00a4e629266ec99b8580d07e2eb19",bytes:20865},{name:"ui/splash/splash_bg.jpg",md5:"3915100d99dc2718f088fe07e9b69c9c",bytes:290191},{name:"ui/splash/nick_logo_tiny.png",md5:"2c846fca8ff41f511ce9c9fb79027ccc",bytes:7538},{name:"ui/splash/menu_container.png",md5:"3bc4a11f944b6c7abfe28c9e9be6d2e5",bytes:636640},{name:"ui/splash/help_btn_back.png",md5:"cb3129ca0523f6ba6895177127712047",bytes:15363},{name:"ui/splash/combo_score_back.png",md5:"d1670d9011eb8eebdd6f43961ab9ce12",bytes:12511},{name:"ui/splash/button_bg.png",md5:"d3721b205469d20102ade55661dd3097",bytes:14913},{name:"ui/sound_button/menu_btn_sound_on.png",md5:"0da258586b94299df75e4fdcd15ad1e5",bytes:22277},{name:"ui/sound_button/menu_btn_sound_off.png",md5:"7241c02f11b0655c2897c1addd6fbcd9",bytes:25632},{name:"audio/swing/swing_1.ogg",md5:"c8033d4f1b85fbcb4ce9a62b789adefc",bytes:8603},{name:"audio/swing/swing_1.mp3",md5:"130c63280aadb7fc787929a17aefe312",bytes:4678},{name:"audio/swing/swing_0.ogg",md5:"890de240271c141faa54c7868e8b3a4b",bytes:8248},{name:"audio/swing/swing_0.mp3",md5:"64693e5d29d1e6a5e25c3a19350c5b09",bytes:4260},{name:"audio/music/kungfupanda_pawsomepanda.ogg",md5:"d6c9c84847c4e256522686b27c0ab8f5",bytes:549802},{name:"audio/music/kungfupanda_pawsomepanda.mp3",md5:"3e1e62132b07bf0d9f349d8aeebc67aa",bytes:456448},{name:"audio/hit/skadoosh.ogg",md5:"9d422721c8671e841548d6245a63dfc8",bytes:90073},{name:"audio/hit/skadoosh.mp3",md5:"3f1dd895db4b41aa7574eb3ee761e004",bytes:71544},{name:"audio/hit/punch_kfp_2.ogg",md5:"2a0da761189801afc196044dd22804c0",bytes:19342},{name:"audio/hit/punch_kfp_2.mp3",md5:"38df0a9bb6e13d12a26de32afb5ed0c2",bytes:14443},{name:"audio/hit/punch_kfp_1.ogg",md5:"52cdcfa74b4b03072ec09f1b9445409f",bytes:19032},{name:"audio/hit/punch_kfp_1.mp3",md5:"f27dcd052b39394152b4a5f805de8bb8",bytes:12523},{name:"audio/hit/punch_kfp_0.ogg",md5:"2aa7e2a3509f547b43b6a55eef9c6aeb",bytes:18370},{name:"audio/hit/punch_kfp_0.mp3",md5:"b8df66a95f2785d84ce38820469be486",bytes:13291},{name:"audio/hit/punch_2.ogg",md5:"94920bc7640f0fb03696caed6b67fb26",bytes:13441},{name:"audio/hit/punch_2.mp3",md5:"2c2ab6eeb2b3f5dce5834f1f4ec7649f",bytes:9067},{name:"audio/hit/punch_1_dumpling.ogg",md5:"2c9cc3e41616b9cc67cd517a087b11c6",bytes:13311},{name:"audio/hit/punch_1_dumpling.mp3",md5:"a5886cae1c8edde4102386e00940f658",bytes:6762},{name:"audio/hit/punch_1.ogg",md5:"b783b647c1964b3a1e2135765fa37669",bytes:12917},{name:"audio/hit/punch_1.mp3",md5:"aebe8ffa138e53ab24cb457e8351a2c2",bytes:7915},{name:"audio/hit/punch_0_dumpling.ogg",md5:"d3cb4deb6e8cb9de3816254cfbe31e13",bytes:9270},{name:"audio/hit/punch_0_dumpling.mp3",md5:"993476878f0e3c81638451ce292d3089",bytes:5090},{name:"audio/hit/punch_0.ogg",md5:"91964173bddbcde33e9a2b38785a7550",bytes:11131},{name:"audio/hit/punch_0.mp3",md5:"4459dec8966fd538935032bbe3f500a6",bytes:7915},{name:"audio/hit/po_hit2.ogg",md5:"602d1dc7431f968fa90d731c5dd8b2c9",bytes:14958},{name:"audio/hit/po_hit2.mp3",md5:"792aea19d0806f9856e187ebb262f2e1",bytes:10030},{name:"audio/hit/po_hit1.ogg",md5:"8fb24a28af601c7fa2149b6042acd46a",bytes:10451},{name:"audio/hit/po_hit1.mp3",md5:"1c4bfe7221d8f416b98ecb837ce3ce5b",bytes:5195},{name:"audio/hit/fung_slash_small.ogg",md5:"1459af5c2f78c2d209f605b583e8de1f",bytes:9878},{name:"audio/hit/fung_slash_small.mp3",md5:"247489d4417b4c022e2f23b832c62d67",bytes:10197},{name:"audio/hit/fung_slash.ogg",md5:"f6d5c65915b826c0a2d5929127dffe33",bytes:12244},{name:"audio/hit/fung_slash.mp3",md5:"16e8bf4da59009f5be7fb2f31cdbaa95",bytes:13122},{name:"audio/hit/fung_block.ogg",md5:"670998b261294354480300cabf791333",bytes:7959},{name:"audio/hit/fung_block.mp3",md5:"dcfc00acc3105a9c82e0368dcabe8f4f",bytes:5599},{name:"audio/hit/block.ogg",md5:"8a4ae8f7533d9b1ef1e58ae8c30b3c3c",bytes:6407},{name:"audio/hit/block.mp3",md5:"da6f1cc98a805e8754137151dac63337",bytes:2924},{name:"audio/effects/skadoosh_intro.ogg",md5:"64f13a1d995c0b6dd49eb8cbabbd0c6d",bytes:54844},{name:"audio/effects/skadoosh_intro.mp3",md5:"466cfd39f0b73fe651307ebafa41ea42",bytes:46131},{name:"audio/effects/score_post.ogg",md5:"5db10d1ba1735659e70057a03d102036",bytes:17854},{name:"audio/effects/score_post.mp3",md5:"103fd9370900018dd63916a15111ef46",bytes:14710},{name:"audio/effects/power_up.ogg",md5:"063c4795d16c79ff6911be2a8b86e677",bytes:23356},{name:"audio/effects/power_up.mp3",md5:"46dd23e41a3fd01c8e7c2613ebf943f6",bytes:18160},{name:"audio/effects/pickup_spawn.ogg",md5:"326db9214ffbf30525d0b34b0c707342",bytes:17111},{name:"audio/effects/pickup_spawn.mp3",md5:"40423bc9b5e3a32516462a86c07da857",bytes:15463},{name:"audio/effects/lipsmack.ogg",md5:"0d074dda6bfcd3e2ff0f11c2fea852be",bytes:37253},{name:"audio/effects/lipsmack.mp3",md5:"fc700bf0f83b03dc6c1c53c4b0a9fe18",bytes:32673},{name:"audio/dodge/dodge_0.ogg",md5:"67b756bdc85cb36b2c5400fb85e6c29a",bytes:12536},{name:"audio/dodge/dodge_0.mp3",md5:"de0cb31e63936a745ac5ab830a538c78",bytes:8143}]);macroData.set("gameplay_universal",[{name:"ui/menu/menu_btn_resume.png",md5:"8593a450576a79c5e77b7f6e86c8c383",bytes:17292},{name:"ui/menu/menu_btn_quit.png",md5:"20cdfc614e7969d6a07ad97ac4adafd2",bytes:18015},{name:"ui/menu/menu_btn_help.png",md5:"26cd9e8d316e055f23f1cb27ca6aeb06",bytes:16670},{name:"ui/help/help_space.png",md5:"832c6a3a607ae76fbc4db27a0b630a2f",bytes:14045},{name:"ui/help/help_arrow.png",md5:"b48c34b94341936dd95a701625891b06",bytes:6838},{name:"ui/gameplay_hud/time_text_back.png",md5:"96de98ab9fe9f2a5c59bba5004a0e4ba",bytes:6887},{name:"ui/gameplay_hud/skadoosh_bar.png",md5:"31722fab7ca94e47e5c8c3d9b98462cf",bytes:1834},{name:"ui/gameplay_hud/score_text_back.png",md5:"c23806c918e3bf911767dddfc44e3f3f",bytes:13743},{name:"ui/gameplay_hud/round_text_back_en.png",md5:"22b9fd0299563dcd416e25ebb5046db6",bytes:12399},{name:"ui/gameplay_hud/round_text_back.png",md5:"0f14673da17d96431a925f1ba81a9203",bytes:7762},{name:"ui/gameplay_hud/ready_text_back_en.png",md5:"a295de9829b46ac1baabaaf9a4dc9022",bytes:51411},{name:"ui/gameplay_hud/pause_btn_up.png",md5:"679e2a3af8c3f9c0022d3400ef29acc6",bytes:10852},{name:"ui/gameplay_hud/pause_btn_down.png",md5:"f8733f8341f6f2ae6ad5bf5d1f710a2a",bytes:11201},{name:"ui/gameplay_hud/hud_heart.png",md5:"da86822a47e329a1f428540f24f85498",bytes:7883},{name:"ui/gameplay_hud/health_icon_x.png",md5:"29cb7ae00a5ddaee840b9fa7fb614633",bytes:17725},{name:"ui/gameplay_hud/health_icon.png",md5:"105fa464a975d725ec53987292f35e92",bytes:15706},{name:"ui/gameplay_hud/fight_text_back.png",md5:"01c98513fd472660dcf05ac2e5828a18",bytes:69976},{name:"ui/gameplay_hud/dummy_health_text.png",md5:"4416c1498c8a83780586168da81993c8",bytes:10680},{name:"ui/gameplay_hud/dummy_health_bg_bar.png",md5:"805cc20be354a1e8d970ddbad846eff5",bytes:9854},{name:"ui/gameplay_hud/dummy_health_bar.png",md5:"ce05c6853c6f728995e974b597a79b25",bytes:1856},{name:"ui/gameplay_hud/combo_text_en.png",md5:"aa01717e90fef9b17dd3665e845c4ffb",bytes:19378},{name:"ui/end_screen/kung_fu_panda_game_win.png",md5:"7e1be6ce29520317037d0e09a4cb4172",bytes:68509},{name:"ui/end_screen/game_win_screen.png",md5:"d518ea6dd5e8b5b0be657356682eb08c",bytes:734963},{name:"ui/end_screen/end_screen_text.png",md5:"511683285c8d224b5e83784aaeeb1c12",bytes:87318},{name:"ui/end_screen/end_screen_bg.jpg",md5:"5078fa19b346b37537ed8169b2d59e3a",bytes:92893},{name:"gameplay_mg.jpg",md5:"8e67d80b474e0a4ec8fd60c010efafc5",bytes:110091},{name:"gameplay_bg.jpg",md5:"6fa988d5c3fc07ec64f5fdbb4d73101b",bytes:75722},{name:"flump_po/library.json",md5:"073db0bd7070abb3f47f1976e790a3d5",bytes:431983},{name:"flump_po/atlas0.png",md5:"d85f8f50bcb92d0f9ed4077353bfe6c3",bytes:251543},{name:"flump_fung/library.json",md5:"798606254be169cbab6a966a1e736155",bytes:227793},{name:"flump_fung/atlas0.png",md5:"3420eaa5eb060c3cdac71128759733c7",bytes:4103393},{name:"flump_enemies/library.json",md5:"4d0ec50b4696b3ab3793202f66be4366",bytes:438136},{name:"flump_enemies/atlas3.png",md5:"1847ed0d27bb58ac4b57dbe2da06e268",bytes:185821},{name:"flump_enemies/atlas2.png",md5:"dd35406af928c5ba2ff4b27299d4831a",bytes:193616},{name:"flump_enemies/atlas1.png",md5:"8cfbac16712354b2d5ebafc3c32c814a",bytes:1402161},{name:"flump_enemies/atlas0.png",md5:"98cf01573e9c14262ac5f42ebf5e6a4e",bytes:7085634},{name:"flump_effects/library.json",md5:"edf714dd51d861d8cd5aea9c15244e63",bytes:21776},{name:"flump_effects/atlas2.png",md5:"b48072634d2cdb09498faddd47cc37ba",bytes:103416},{name:"flump_effects/atlas1.png",md5:"f06d5f819021b0310f4feb58d86742ca",bytes:148775},{name:"flump_effects/atlas0.png",md5:"5d6ae3a3226fd4a53734ae72fa21b6f4",bytes:1256784},{name:"elements/player_hit.png",md5:"76fffff2033b961ab1b285b740b3ec8a",bytes:3800},{name:"elements/caution_icon.png",md5:"4230ba30bec84fb11595807f106ba8da",bytes:27272}]);macroData.set("fonts_la",[{name:"KFP_font_la.png",md5:"a27baf018d1a7020971ed87e5e13177a",bytes:327360},{name:"KFP_font_la.fnt",md5:"cc700025a4e7c61ce72a026081a984ef",bytes:25151},{name:"Basic.png",md5:"296bf9298c43a5e3eb77081643341cff",bytes:125938},{name:"Basic.fnt",md5:"aa471ab2eba9161e906b7ce79250149d",bytes:25144}]);macroData.set("fonts_kr",[{name:"KFP_font_kr.png",md5:"a27baf018d1a7020971ed87e5e13177a",bytes:327360},{name:"KFP_font_kr.fnt",md5:"0936a4bd66224871508fa047947eb8c6",bytes:25151},{name:"Basic.png",md5:"296bf9298c43a5e3eb77081643341cff",bytes:125938},{name:"Basic.fnt",md5:"aa471ab2eba9161e906b7ce79250149d",bytes:25144}]);macroData.set("fonts_jp",[{name:"KFP_font_jp.png",md5:"a27baf018d1a7020971ed87e5e13177a",bytes:327360},{name:"KFP_font_jp.fnt",md5:"f4caf1d20360f72abadb9273e1d1fc0a",bytes:25151},{name:"Basic.png",md5:"296bf9298c43a5e3eb77081643341cff",bytes:125938},{name:"Basic.fnt",md5:"aa471ab2eba9161e906b7ce79250149d",bytes:25144}]);macroData.set("fonts_en",[{name:"KFP_font.png",md5:"3a2c352acde2613ef1a2c514bc2dae7d",bytes:145079},{name:"KFP_font.fnt",md5:"8b091af08b1f5cfdb83bce6a67c8a9be",bytes:12021},{name:"Basic.png",md5:"54e9fe36cf396c40b50dacb402429b6f",bytes:61282},{name:"Basic.fnt",md5:"1048d49ad0d761f0387534d982c29290",bytes:12018}]);macroData.set("fonts_cn",[{name:"KFP_font_cn.png",md5:"a27baf018d1a7020971ed87e5e13177a",bytes:327360},{name:"KFP_font_cn.fnt",md5:"45597b3f6b994b8a5f3259c4c9a9d34f",bytes:25151},{name:"Basic.png",md5:"296bf9298c43a5e3eb77081643341cff",bytes:125938},{name:"Basic.fnt",md5:"aa471ab2eba9161e906b7ce79250149d",bytes:25144}]);macroData.set("bootstrap",[{name:"ui/loading_spinner.png",md5:"92ae2a76bb3048b1a15e80336fc5f3bc",bytes:14545},{name:"ui/loading_panel.jpg",md5:"0e6397266cec7cc0b99984a7c431f9ed",bytes:84621},{name:"ui/loading_bar_outline.png",md5:"24ed4245c434688dd30c574f7003486b",bytes:1154},{name:"ui/loading_bar.png",md5:"5f27ff12279062fb3db5e4c902fc928c",bytes:1526},{name:"config/translation_la.xml",md5:"219b87434e46fba65e990e562cc480eb",bytes:12156},{name:"config/translation_kr.xml",md5:"a6ba9ef51fa0f9acb3bb6e5ea928f94b",bytes:12156},{name:"config/translation_jp.xml",md5:"e396fc695e33d7b6f68dce65a64ced92",bytes:12156},{name:"config/translation_en.xml",md5:"20db19a959700a066a47145ed43f6bfb",bytes:11101},{name:"config/translation_cn.xml",md5:"e66dfb4d32f7355d97a067e5c60ecf9d",bytes:12156},{name:"config/config.xml",md5:"48aca2c66909081c12edbf6d77ce78be",bytes:1398},{name:"audio/silent.ogg",md5:"3526550092a0e091f382852de5ef2315",bytes:5514},{name:"audio/silent.mp3",md5:"ba9e6829ba32e427142251a85cbd4fbb",bytes:2114}]);var manifests=new Hash();var $it0=macroData.keys();while($it0.hasNext()){var packName=$it0.next();var manifest=new flambe.asset.Manifest();manifest.set_relativeBasePath("assets");var _g=0,_g1=macroData.get(packName);while(_g<_g1.length){var asset=_g1[_g];++_g;var name=asset.name;var path=packName+"/"+name+"?v="+Std.string(asset.md5);var type=flambe.asset.Manifest.inferType(name);if(type==flambe.asset.AssetType.Image||type==flambe.asset.AssetType.Audio)name=flambe.util.Strings.removeFileExtension(name);manifest.add(name,path,asset.bytes,type);}
manifests.set(packName,manifest);}
return manifests;}
flambe.asset.Manifest.prototype={set_externalBasePath:function(basePath){this._externalBasePath=basePath;if(basePath!=null)flambe.util.Assert.that(StringTools.startsWith(basePath,"http://")||StringTools.startsWith(basePath,"https://"),"externalBasePath must be on an external domain, starting with http(s)://");return basePath;},get_externalBasePath:function(){return this._externalBasePath;},set_relativeBasePath:function(basePath){this._relativeBasePath=basePath;if(basePath!=null)flambe.util.Assert.that(!StringTools.startsWith(basePath,"http://")&&!StringTools.startsWith(basePath,"https://"),"relativeBasePath must be a relative path on the same domain, NOT starting with http(s)://");return basePath;},get_relativeBasePath:function(){return this._relativeBasePath;},getFullURL:function(entry){var restricted=this.get_externalBasePath()!=null&&flambe.asset.Manifest._supportsCrossOrigin?this.get_externalBasePath():this.get_relativeBasePath();var unrestricted=this.get_externalBasePath()!=null?this.get_externalBasePath():this.get_relativeBasePath();var base=unrestricted;if(entry.type==flambe.asset.AssetType.Data)base=restricted;return base!=null?flambe.util.Strings.joinPath(base,entry.url):entry.url;},clone:function(){var copy=new flambe.asset.Manifest();copy.set_relativeBasePath(this.get_relativeBasePath());copy.set_externalBasePath(this.get_externalBasePath());copy._entries=this._entries.slice();return copy;},iterator:function(){return HxOverrides.iter(this._entries);},add:function(name,url,bytes,type){if(bytes==null)bytes=0;if(type==null)type=flambe.asset.Manifest.inferType(url);var entry=new flambe.asset.AssetEntry(name,url,type,bytes);this._entries.push(entry);return entry;},__class__:flambe.asset.Manifest,__properties__:{set_relativeBasePath:"set_relativeBasePath",get_relativeBasePath:"get_relativeBasePath",set_externalBasePath:"set_externalBasePath",get_externalBasePath:"get_externalBasePath"}}
flambe.display={}
flambe.display.BlendMode=$hxClasses["flambe.display.BlendMode"]={__ename__:["flambe","display","BlendMode"],__constructs__:["Normal","Add","CopyExperimental"]}
flambe.display.BlendMode.Normal=["Normal",0];flambe.display.BlendMode.Normal.toString=$estr;flambe.display.BlendMode.Normal.__enum__=flambe.display.BlendMode;flambe.display.BlendMode.Add=["Add",1];flambe.display.BlendMode.Add.toString=$estr;flambe.display.BlendMode.Add.__enum__=flambe.display.BlendMode;flambe.display.BlendMode.CopyExperimental=["CopyExperimental",2];flambe.display.BlendMode.CopyExperimental.toString=$estr;flambe.display.BlendMode.CopyExperimental.__enum__=flambe.display.BlendMode;flambe.math={}
flambe.math.Point=function(x,y){if(y==null)y=0;if(x==null)x=0;this.x=x;this.y=y;};$hxClasses["flambe.math.Point"]=flambe.math.Point;flambe.math.Point.__name__=["flambe","math","Point"];flambe.math.Point.prototype={toString:function(){return "("+this.x+","+this.y+")";},__class__:flambe.math.Point}
flambe.display.Sprite=function(){this.scissor=null;this.blendMode=null;var _g=this;this._flags=1<<0|1<<1|1<<3;this._localMatrix=new flambe.math.Matrix();var dirtyMatrix=function(_,_1){_g._flags=flambe.util.BitSets.add(_g._flags,1<<2|1<<3);};this.x=new flambe.animation.AnimatedFloat(0,dirtyMatrix);this.y=new flambe.animation.AnimatedFloat(0,dirtyMatrix);this.rotation=new flambe.animation.AnimatedFloat(0,dirtyMatrix);this.scaleX=new flambe.animation.AnimatedFloat(1,dirtyMatrix);this.scaleY=new flambe.animation.AnimatedFloat(1,dirtyMatrix);this.anchorX=new flambe.animation.AnimatedFloat(0,dirtyMatrix);this.anchorY=new flambe.animation.AnimatedFloat(0,dirtyMatrix);this.alpha=new flambe.animation.AnimatedFloat(1);};$hxClasses["flambe.display.Sprite"]=flambe.display.Sprite;flambe.display.Sprite.__name__=["flambe","display","Sprite"];flambe.display.Sprite.getFrom=function(entity){return entity.getComponent("Sprite_1");}
flambe.display.Sprite.hitTest=function(entity,x,y){var sprite=flambe.display.Sprite.getFrom(entity);if(sprite!=null){if(!flambe.util.BitSets.containsAll(sprite._flags,1<<0|1<<1))return null;if(sprite.getLocalMatrix().inverseTransform(x,y,flambe.display.Sprite._scratchPoint)){x=flambe.display.Sprite._scratchPoint.x;y=flambe.display.Sprite._scratchPoint.y;}
var scissor=sprite.scissor;if(scissor!=null&&!scissor.contains(x,y))return null;}
var result=flambe.display.Sprite.hitTestBackwards(entity.firstChild,x,y);if(result!=null)return result;return sprite!=null&&sprite.containsLocal(x,y)?sprite:null;}
flambe.display.Sprite.render=function(entity,g){var sprite=flambe.display.Sprite.getFrom(entity);if(sprite!=null){var alpha=sprite.alpha.get__();if(!sprite.get_visible()||alpha<=0)return;g.save();if(alpha<1)g.multiplyAlpha(alpha);if(sprite.blendMode!=null)g.setBlendMode(sprite.blendMode);var matrix=sprite.getLocalMatrix();g.transform(matrix.m00,matrix.m10,matrix.m01,matrix.m11,matrix.m02,matrix.m12);var scissor=sprite.scissor;if(scissor!=null)g.applyScissor(scissor.x,scissor.y,scissor.width,scissor.height);sprite.draw(g);}
var director=flambe.scene.Director.getFrom(entity);if(director!=null){var scenes=director.occludedScenes;var _g=0;while(_g<scenes.length){var scene=scenes[_g];++_g;flambe.display.Sprite.render(scene,g);}}
var p=entity.firstChild;while(p!=null){var next=p.next;flambe.display.Sprite.render(p,g);p=next;}
if(sprite!=null)g.restore();}
flambe.display.Sprite.hitTestBackwards=function(entity,x,y){if(entity!=null){var result=flambe.display.Sprite.hitTestBackwards(entity.next,x,y);return result!=null?result:flambe.display.Sprite.hitTest(entity,x,y);}
return null;}
flambe.display.Sprite.__super__=flambe.Component;flambe.display.Sprite.prototype=$extend(flambe.Component.prototype,{set_pointerEnabled:function(pointerEnabled){this._flags=flambe.util.BitSets.set(this._flags,1<<1,pointerEnabled);return pointerEnabled;},set_visible:function(visible){this._flags=flambe.util.BitSets.set(this._flags,1<<0,visible);return visible;},get_visible:function(){return flambe.util.BitSets.contains(this._flags,1<<0);},get_pointerUp:function(){if(this._internal_pointerUp==null)this._internal_pointerUp=new flambe.util.Signal1();return this._internal_pointerUp;},get_pointerMove:function(){if(this._internal_pointerMove==null)this._internal_pointerMove=new flambe.util.Signal1();return this._internal_pointerMove;},get_pointerDown:function(){if(this._internal_pointerDown==null)this._internal_pointerDown=new flambe.util.Signal1();return this._internal_pointerDown;},draw:function(g){},onUpdate:function(dt){this.x.update(dt);this.y.update(dt);this.rotation.update(dt);this.scaleX.update(dt);this.scaleY.update(dt);this.alpha.update(dt);this.anchorX.update(dt);this.anchorY.update(dt);},getLocalMatrix:function(){if(flambe.util.BitSets.contains(this._flags,1<<2)){this._flags=flambe.util.BitSets.remove(this._flags,1<<2);this._localMatrix.compose(this.x.get__(),this.y.get__(),this.scaleX.get__(),this.scaleY.get__(),flambe.math.FMath.toRadians(this.rotation.get__()));this._localMatrix.translate(-this.anchorX.get__(),-this.anchorY.get__());}
return this._localMatrix;},containsLocal:function(localX,localY){return localX>=0&&localX<this.getNaturalWidth()&&localY>=0&&localY<this.getNaturalHeight();},getNaturalHeight:function(){return 0;},getNaturalWidth:function(){return 0;},get_name:function(){return "Sprite_1";},__class__:flambe.display.Sprite,__properties__:$extend(flambe.Component.prototype.__properties__,{set_visible:"set_visible",get_visible:"get_visible",get_pointerDown:"get_pointerDown",get_pointerUp:"get_pointerUp",set_pointerEnabled:"set_pointerEnabled",get_pointerEnabled:"get_pointerEnabled"})});flambe.display.FillSprite=function(color,width,height){flambe.display.Sprite.call(this);this.color=color;this.width=new flambe.animation.AnimatedFloat(width);this.height=new flambe.animation.AnimatedFloat(height);};$hxClasses["flambe.display.FillSprite"]=flambe.display.FillSprite;flambe.display.FillSprite.__name__=["flambe","display","FillSprite"];flambe.display.FillSprite.__super__=flambe.display.Sprite;flambe.display.FillSprite.prototype=$extend(flambe.display.Sprite.prototype,{onUpdate:function(dt){flambe.display.Sprite.prototype.onUpdate.call(this,dt);this.width.update(dt);this.height.update(dt);},getNaturalHeight:function(){return this.height.get__();},getNaturalWidth:function(){return this.width.get__();},draw:function(g){g.fillRect(this.color,0,0,this.width.get__(),this.height.get__());},__class__:flambe.display.FillSprite});flambe.display.Font=function(pack,name){this.name=name;this._glyphs=new IntHash();var parser=new flambe.display._Font.ConfigParser(pack.getFile(name+".fnt"));var pages=new IntHash();var idx=name.lastIndexOf("/");var basePath=idx>=0?HxOverrides.substr(name,0,idx+1):"";var $it0=parser.keywords();while($it0.hasNext()){var keyword=$it0.next();switch(keyword){case "info":var $it1=parser.pairs();while($it1.hasNext()){var pair=$it1.next();switch(pair.key){case "size":this.size=pair.getInt();break;}}
break;case "page":var pageId=0;var file=null;var $it2=parser.pairs();while($it2.hasNext()){var pair=$it2.next();switch(pair.key){case "id":pageId=pair.getInt();break;case "file":file=pair.getString();break;}}
pages.set(pageId,pack.getTexture(basePath+flambe.util.Strings.removeFileExtension(file)));break;case "char":var glyph=null;var $it3=parser.pairs();while($it3.hasNext()){var pair=$it3.next();switch(pair.key){case "id":glyph=new flambe.display.Glyph(pair.getInt());break;case "x":glyph.x=pair.getInt();break;case "y":glyph.y=pair.getInt();break;case "width":glyph.width=pair.getInt();break;case "height":glyph.height=pair.getInt();break;case "page":glyph.page=pages.get(pair.getInt());break;case "xoffset":glyph.xOffset=pair.getInt();break;case "yoffset":glyph.yOffset=pair.getInt();break;case "xadvance":glyph.xAdvance=pair.getInt();break;}}
this._glyphs.set(glyph.charCode,glyph);break;case "kerning":var first=null;var second=-1;var $it4=parser.pairs();while($it4.hasNext()){var pair=$it4.next();switch(pair.key){case "first":first=this._glyphs.get(pair.getInt());break;case "second":second=pair.getInt();break;case "amount":first._internal_setKerning(second,pair.getInt());break;}}
break;}}};$hxClasses["flambe.display.Font"]=flambe.display.Font;flambe.display.Font.__name__=["flambe","display","Font"];flambe.display.Font.prototype={getGlyphs:function(text){var list=[];var _g1=0,_g=text.length;while(_g1<_g){var ii=_g1++;var charCode=StringTools.fastCodeAt(text,ii);var glyph=this._glyphs.get(charCode);if(glyph!=null)list.push(glyph);else flambe.Log.warn("Requested a missing character from font",["font",this.name,"charCode",charCode]);}
return list;},__class__:flambe.display.Font}
flambe.display.Glyph=function(charCode){this.charCode=charCode;};$hxClasses["flambe.display.Glyph"]=flambe.display.Glyph;flambe.display.Glyph.__name__=["flambe","display","Glyph"];flambe.display.Glyph.prototype={_internal_setKerning:function(nextCharCode,amount){if(this._kernings==null)this._kernings=new IntHash();this._kernings.set(nextCharCode,amount);},getKerning:function(nextCharCode){return this._kernings!=null?Std["int"](this._kernings.get(nextCharCode)):0;},draw:function(g,destX,destY){if(this.width>0)g.drawSubImage(this.page,destX+this.xOffset,destY+this.yOffset,this.x,this.y,this.width,this.height);},__class__:flambe.display.Glyph}
flambe.display._Font={}
flambe.display._Font.ConfigParser=function(config){this._configText=config;this._keywordPattern=new EReg("([a-z]+)(.*)","");this._pairPattern=new EReg("([a-z]+)=(\"[^\"]*\"|[^\\s]+)","");};$hxClasses["flambe.display._Font.ConfigParser"]=flambe.display._Font.ConfigParser;flambe.display._Font.ConfigParser.__name__=["flambe","display","_Font","ConfigParser"];flambe.display._Font.ConfigParser.advance=function(text,expr){var m=expr.matchedPos();return HxOverrides.substr(text,m.pos+m.len,text.length);}
flambe.display._Font.ConfigParser.prototype={pairs:function(){var _g=this;var text=this._pairText;return{next:function(){text=flambe.display._Font.ConfigParser.advance(text,_g._pairPattern);return new flambe.display._Font.ConfigPair(_g._pairPattern.matched(1),_g._pairPattern.matched(2));},hasNext:function(){return _g._pairPattern.match(text);}};},keywords:function(){var _g=this;var text=this._configText;return{next:function(){text=flambe.display._Font.ConfigParser.advance(text,_g._keywordPattern);_g._pairText=_g._keywordPattern.matched(2);return _g._keywordPattern.matched(1);},hasNext:function(){return _g._keywordPattern.match(text);}};},__class__:flambe.display._Font.ConfigParser}
flambe.display._Font.ConfigPair=function(key,value){this.key=key;this._value=value;};$hxClasses["flambe.display._Font.ConfigPair"]=flambe.display._Font.ConfigPair;flambe.display._Font.ConfigPair.__name__=["flambe","display","_Font","ConfigPair"];flambe.display._Font.ConfigPair.prototype={getString:function(){if(StringTools.fastCodeAt(this._value,0)!=34)return null;return HxOverrides.substr(this._value,1,this._value.length-2);},getInt:function(){return Std.parseInt(this._value);},__class__:flambe.display._Font.ConfigPair}
flambe.display.Graphics=function(){}
$hxClasses["flambe.display.Graphics"]=flambe.display.Graphics;flambe.display.Graphics.__name__=["flambe","display","Graphics"];flambe.display.Graphics.prototype={__class__:flambe.display.Graphics}
flambe.display.ImageSprite=function(texture){flambe.display.Sprite.call(this);this.texture=texture;};$hxClasses["flambe.display.ImageSprite"]=flambe.display.ImageSprite;flambe.display.ImageSprite.__name__=["flambe","display","ImageSprite"];flambe.display.ImageSprite.__super__=flambe.display.Sprite;flambe.display.ImageSprite.prototype=$extend(flambe.display.Sprite.prototype,{getNaturalHeight:function(){return this.texture.get_height();},getNaturalWidth:function(){return this.texture.get_width();},draw:function(g){g.drawImage(this.texture,0,0);},__class__:flambe.display.ImageSprite});flambe.display.Orientation=$hxClasses["flambe.display.Orientation"]={__ename__:["flambe","display","Orientation"],__constructs__:["Portrait","Landscape"]}
flambe.display.Orientation.Portrait=["Portrait",0];flambe.display.Orientation.Portrait.toString=$estr;flambe.display.Orientation.Portrait.__enum__=flambe.display.Orientation;flambe.display.Orientation.Landscape=["Landscape",1];flambe.display.Orientation.Landscape.toString=$estr;flambe.display.Orientation.Landscape.__enum__=flambe.display.Orientation;flambe.display.Stage=function(){}
$hxClasses["flambe.display.Stage"]=flambe.display.Stage;flambe.display.Stage.__name__=["flambe","display","Stage"];flambe.display.Stage.prototype={__class__:flambe.display.Stage,__properties__:{get_width:"get_width",get_height:"get_height",get_fullscreenSupported:"get_fullscreenSupported"}}
flambe.display.TextSprite=function(font,text){if(text==null)text="";this._height=0;this._width=0;this._text=null;this._font=null;this._offsets=null;this._glyphs=null;flambe.display.Sprite.call(this);this._font=font;this._text=text;this._flags=flambe.util.BitSets.add(this._flags,1<<5);};$hxClasses["flambe.display.TextSprite"]=flambe.display.TextSprite;flambe.display.TextSprite.__name__=["flambe","display","TextSprite"];flambe.display.TextSprite.__super__=flambe.display.Sprite;flambe.display.TextSprite.prototype=$extend(flambe.display.Sprite.prototype,{updateGlyphs:function(){if(flambe.util.BitSets.contains(this._flags,1<<5)){this._flags=flambe.util.BitSets.remove(this._flags,1<<5);this._glyphs=this.get_font().getGlyphs(this.get_text());this._offsets=[0];this._width=0;this._height=0;var ii=0;var ll=this._glyphs.length;while(ii<ll){var glyph=this._glyphs[ii];++ii;if(ii==ll)this._width+=glyph.width;else{var nextGlyph=this._glyphs[ii];this._width+=glyph.xAdvance+glyph.getKerning(nextGlyph.charCode);this._offsets.push(this._width);}
this._height=flambe.math.FMath.max(this._height,glyph.height+glyph.yOffset);}}},set_font:function(font){this._font=font;this._flags=flambe.util.BitSets.add(this._flags,1<<5);return font;},get_font:function(){return this._font;},set_text:function(text){this._text=text;this._flags=flambe.util.BitSets.add(this._flags,1<<5);return text;},get_text:function(){return this._text;},getNaturalHeight:function(){this.updateGlyphs();return this._height;},getNaturalWidth:function(){this.updateGlyphs();return this._width;},draw:function(g){this.updateGlyphs();var ii=0;var ll=this._glyphs.length;while(ii<ll){var glyph=this._glyphs[ii];var offset=this._offsets[ii];glyph.draw(g,offset,0);++ii;}},__class__:flambe.display.TextSprite,__properties__:$extend(flambe.display.Sprite.prototype.__properties__,{set_text:"set_text",get_text:"get_text",set_font:"set_font",get_font:"get_font"})});flambe.display.Texture=function(){}
$hxClasses["flambe.display.Texture"]=flambe.display.Texture;flambe.display.Texture.__name__=["flambe","display","Texture"];flambe.display.Texture.prototype={__class__:flambe.display.Texture,__properties__:{get_width:"get_width",get_height:"get_height",get_graphics:"get_graphics"}}
flambe.external={}
flambe.external.External=function(){}
$hxClasses["flambe.external.External"]=flambe.external.External;flambe.external.External.__name__=["flambe","external","External"];flambe.external.External.prototype={__class__:flambe.external.External,__properties__:{get_supported:"get_supported"}}
flambe.input={}
flambe.input.Key=$hxClasses["flambe.input.Key"]={__ename__:["flambe","input","Key"],__constructs__:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","Number0","Number1","Number2","Number3","Number4","Number5","Number6","Number7","Number8","Number9","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadDecimal","NumpadDivide","NumpadEnter","NumpadMultiply","NumpadSubtract","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","Left","Up","Right","Down","Alt","Backquote","Backslash","Backspace","CapsLock","Comma","Command","Control","Delete","End","Enter","Equals","Escape","Home","Insert","LeftBracket","Minus","PageDown","PageUp","Period","Quote","RightBracket","Semicolon","Shift","Slash","Space","Tab","Menu","Search","Unknown"]}
flambe.input.Key.A=["A",0];flambe.input.Key.A.toString=$estr;flambe.input.Key.A.__enum__=flambe.input.Key;flambe.input.Key.B=["B",1];flambe.input.Key.B.toString=$estr;flambe.input.Key.B.__enum__=flambe.input.Key;flambe.input.Key.C=["C",2];flambe.input.Key.C.toString=$estr;flambe.input.Key.C.__enum__=flambe.input.Key;flambe.input.Key.D=["D",3];flambe.input.Key.D.toString=$estr;flambe.input.Key.D.__enum__=flambe.input.Key;flambe.input.Key.E=["E",4];flambe.input.Key.E.toString=$estr;flambe.input.Key.E.__enum__=flambe.input.Key;flambe.input.Key.F=["F",5];flambe.input.Key.F.toString=$estr;flambe.input.Key.F.__enum__=flambe.input.Key;flambe.input.Key.G=["G",6];flambe.input.Key.G.toString=$estr;flambe.input.Key.G.__enum__=flambe.input.Key;flambe.input.Key.H=["H",7];flambe.input.Key.H.toString=$estr;flambe.input.Key.H.__enum__=flambe.input.Key;flambe.input.Key.I=["I",8];flambe.input.Key.I.toString=$estr;flambe.input.Key.I.__enum__=flambe.input.Key;flambe.input.Key.J=["J",9];flambe.input.Key.J.toString=$estr;flambe.input.Key.J.__enum__=flambe.input.Key;flambe.input.Key.K=["K",10];flambe.input.Key.K.toString=$estr;flambe.input.Key.K.__enum__=flambe.input.Key;flambe.input.Key.L=["L",11];flambe.input.Key.L.toString=$estr;flambe.input.Key.L.__enum__=flambe.input.Key;flambe.input.Key.M=["M",12];flambe.input.Key.M.toString=$estr;flambe.input.Key.M.__enum__=flambe.input.Key;flambe.input.Key.N=["N",13];flambe.input.Key.N.toString=$estr;flambe.input.Key.N.__enum__=flambe.input.Key;flambe.input.Key.O=["O",14];flambe.input.Key.O.toString=$estr;flambe.input.Key.O.__enum__=flambe.input.Key;flambe.input.Key.P=["P",15];flambe.input.Key.P.toString=$estr;flambe.input.Key.P.__enum__=flambe.input.Key;flambe.input.Key.Q=["Q",16];flambe.input.Key.Q.toString=$estr;flambe.input.Key.Q.__enum__=flambe.input.Key;flambe.input.Key.R=["R",17];flambe.input.Key.R.toString=$estr;flambe.input.Key.R.__enum__=flambe.input.Key;flambe.input.Key.S=["S",18];flambe.input.Key.S.toString=$estr;flambe.input.Key.S.__enum__=flambe.input.Key;flambe.input.Key.T=["T",19];flambe.input.Key.T.toString=$estr;flambe.input.Key.T.__enum__=flambe.input.Key;flambe.input.Key.U=["U",20];flambe.input.Key.U.toString=$estr;flambe.input.Key.U.__enum__=flambe.input.Key;flambe.input.Key.V=["V",21];flambe.input.Key.V.toString=$estr;flambe.input.Key.V.__enum__=flambe.input.Key;flambe.input.Key.W=["W",22];flambe.input.Key.W.toString=$estr;flambe.input.Key.W.__enum__=flambe.input.Key;flambe.input.Key.X=["X",23];flambe.input.Key.X.toString=$estr;flambe.input.Key.X.__enum__=flambe.input.Key;flambe.input.Key.Y=["Y",24];flambe.input.Key.Y.toString=$estr;flambe.input.Key.Y.__enum__=flambe.input.Key;flambe.input.Key.Z=["Z",25];flambe.input.Key.Z.toString=$estr;flambe.input.Key.Z.__enum__=flambe.input.Key;flambe.input.Key.Number0=["Number0",26];flambe.input.Key.Number0.toString=$estr;flambe.input.Key.Number0.__enum__=flambe.input.Key;flambe.input.Key.Number1=["Number1",27];flambe.input.Key.Number1.toString=$estr;flambe.input.Key.Number1.__enum__=flambe.input.Key;flambe.input.Key.Number2=["Number2",28];flambe.input.Key.Number2.toString=$estr;flambe.input.Key.Number2.__enum__=flambe.input.Key;flambe.input.Key.Number3=["Number3",29];flambe.input.Key.Number3.toString=$estr;flambe.input.Key.Number3.__enum__=flambe.input.Key;flambe.input.Key.Number4=["Number4",30];flambe.input.Key.Number4.toString=$estr;flambe.input.Key.Number4.__enum__=flambe.input.Key;flambe.input.Key.Number5=["Number5",31];flambe.input.Key.Number5.toString=$estr;flambe.input.Key.Number5.__enum__=flambe.input.Key;flambe.input.Key.Number6=["Number6",32];flambe.input.Key.Number6.toString=$estr;flambe.input.Key.Number6.__enum__=flambe.input.Key;flambe.input.Key.Number7=["Number7",33];flambe.input.Key.Number7.toString=$estr;flambe.input.Key.Number7.__enum__=flambe.input.Key;flambe.input.Key.Number8=["Number8",34];flambe.input.Key.Number8.toString=$estr;flambe.input.Key.Number8.__enum__=flambe.input.Key;flambe.input.Key.Number9=["Number9",35];flambe.input.Key.Number9.toString=$estr;flambe.input.Key.Number9.__enum__=flambe.input.Key;flambe.input.Key.Numpad0=["Numpad0",36];flambe.input.Key.Numpad0.toString=$estr;flambe.input.Key.Numpad0.__enum__=flambe.input.Key;flambe.input.Key.Numpad1=["Numpad1",37];flambe.input.Key.Numpad1.toString=$estr;flambe.input.Key.Numpad1.__enum__=flambe.input.Key;flambe.input.Key.Numpad2=["Numpad2",38];flambe.input.Key.Numpad2.toString=$estr;flambe.input.Key.Numpad2.__enum__=flambe.input.Key;flambe.input.Key.Numpad3=["Numpad3",39];flambe.input.Key.Numpad3.toString=$estr;flambe.input.Key.Numpad3.__enum__=flambe.input.Key;flambe.input.Key.Numpad4=["Numpad4",40];flambe.input.Key.Numpad4.toString=$estr;flambe.input.Key.Numpad4.__enum__=flambe.input.Key;flambe.input.Key.Numpad5=["Numpad5",41];flambe.input.Key.Numpad5.toString=$estr;flambe.input.Key.Numpad5.__enum__=flambe.input.Key;flambe.input.Key.Numpad6=["Numpad6",42];flambe.input.Key.Numpad6.toString=$estr;flambe.input.Key.Numpad6.__enum__=flambe.input.Key;flambe.input.Key.Numpad7=["Numpad7",43];flambe.input.Key.Numpad7.toString=$estr;flambe.input.Key.Numpad7.__enum__=flambe.input.Key;flambe.input.Key.Numpad8=["Numpad8",44];flambe.input.Key.Numpad8.toString=$estr;flambe.input.Key.Numpad8.__enum__=flambe.input.Key;flambe.input.Key.Numpad9=["Numpad9",45];flambe.input.Key.Numpad9.toString=$estr;flambe.input.Key.Numpad9.__enum__=flambe.input.Key;flambe.input.Key.NumpadAdd=["NumpadAdd",46];flambe.input.Key.NumpadAdd.toString=$estr;flambe.input.Key.NumpadAdd.__enum__=flambe.input.Key;flambe.input.Key.NumpadDecimal=["NumpadDecimal",47];flambe.input.Key.NumpadDecimal.toString=$estr;flambe.input.Key.NumpadDecimal.__enum__=flambe.input.Key;flambe.input.Key.NumpadDivide=["NumpadDivide",48];flambe.input.Key.NumpadDivide.toString=$estr;flambe.input.Key.NumpadDivide.__enum__=flambe.input.Key;flambe.input.Key.NumpadEnter=["NumpadEnter",49];flambe.input.Key.NumpadEnter.toString=$estr;flambe.input.Key.NumpadEnter.__enum__=flambe.input.Key;flambe.input.Key.NumpadMultiply=["NumpadMultiply",50];flambe.input.Key.NumpadMultiply.toString=$estr;flambe.input.Key.NumpadMultiply.__enum__=flambe.input.Key;flambe.input.Key.NumpadSubtract=["NumpadSubtract",51];flambe.input.Key.NumpadSubtract.toString=$estr;flambe.input.Key.NumpadSubtract.__enum__=flambe.input.Key;flambe.input.Key.F1=["F1",52];flambe.input.Key.F1.toString=$estr;flambe.input.Key.F1.__enum__=flambe.input.Key;flambe.input.Key.F2=["F2",53];flambe.input.Key.F2.toString=$estr;flambe.input.Key.F2.__enum__=flambe.input.Key;flambe.input.Key.F3=["F3",54];flambe.input.Key.F3.toString=$estr;flambe.input.Key.F3.__enum__=flambe.input.Key;flambe.input.Key.F4=["F4",55];flambe.input.Key.F4.toString=$estr;flambe.input.Key.F4.__enum__=flambe.input.Key;flambe.input.Key.F5=["F5",56];flambe.input.Key.F5.toString=$estr;flambe.input.Key.F5.__enum__=flambe.input.Key;flambe.input.Key.F6=["F6",57];flambe.input.Key.F6.toString=$estr;flambe.input.Key.F6.__enum__=flambe.input.Key;flambe.input.Key.F7=["F7",58];flambe.input.Key.F7.toString=$estr;flambe.input.Key.F7.__enum__=flambe.input.Key;flambe.input.Key.F8=["F8",59];flambe.input.Key.F8.toString=$estr;flambe.input.Key.F8.__enum__=flambe.input.Key;flambe.input.Key.F9=["F9",60];flambe.input.Key.F9.toString=$estr;flambe.input.Key.F9.__enum__=flambe.input.Key;flambe.input.Key.F10=["F10",61];flambe.input.Key.F10.toString=$estr;flambe.input.Key.F10.__enum__=flambe.input.Key;flambe.input.Key.F11=["F11",62];flambe.input.Key.F11.toString=$estr;flambe.input.Key.F11.__enum__=flambe.input.Key;flambe.input.Key.F12=["F12",63];flambe.input.Key.F12.toString=$estr;flambe.input.Key.F12.__enum__=flambe.input.Key;flambe.input.Key.F13=["F13",64];flambe.input.Key.F13.toString=$estr;flambe.input.Key.F13.__enum__=flambe.input.Key;flambe.input.Key.F14=["F14",65];flambe.input.Key.F14.toString=$estr;flambe.input.Key.F14.__enum__=flambe.input.Key;flambe.input.Key.F15=["F15",66];flambe.input.Key.F15.toString=$estr;flambe.input.Key.F15.__enum__=flambe.input.Key;flambe.input.Key.Left=["Left",67];flambe.input.Key.Left.toString=$estr;flambe.input.Key.Left.__enum__=flambe.input.Key;flambe.input.Key.Up=["Up",68];flambe.input.Key.Up.toString=$estr;flambe.input.Key.Up.__enum__=flambe.input.Key;flambe.input.Key.Right=["Right",69];flambe.input.Key.Right.toString=$estr;flambe.input.Key.Right.__enum__=flambe.input.Key;flambe.input.Key.Down=["Down",70];flambe.input.Key.Down.toString=$estr;flambe.input.Key.Down.__enum__=flambe.input.Key;flambe.input.Key.Alt=["Alt",71];flambe.input.Key.Alt.toString=$estr;flambe.input.Key.Alt.__enum__=flambe.input.Key;flambe.input.Key.Backquote=["Backquote",72];flambe.input.Key.Backquote.toString=$estr;flambe.input.Key.Backquote.__enum__=flambe.input.Key;flambe.input.Key.Backslash=["Backslash",73];flambe.input.Key.Backslash.toString=$estr;flambe.input.Key.Backslash.__enum__=flambe.input.Key;flambe.input.Key.Backspace=["Backspace",74];flambe.input.Key.Backspace.toString=$estr;flambe.input.Key.Backspace.__enum__=flambe.input.Key;flambe.input.Key.CapsLock=["CapsLock",75];flambe.input.Key.CapsLock.toString=$estr;flambe.input.Key.CapsLock.__enum__=flambe.input.Key;flambe.input.Key.Comma=["Comma",76];flambe.input.Key.Comma.toString=$estr;flambe.input.Key.Comma.__enum__=flambe.input.Key;flambe.input.Key.Command=["Command",77];flambe.input.Key.Command.toString=$estr;flambe.input.Key.Command.__enum__=flambe.input.Key;flambe.input.Key.Control=["Control",78];flambe.input.Key.Control.toString=$estr;flambe.input.Key.Control.__enum__=flambe.input.Key;flambe.input.Key.Delete=["Delete",79];flambe.input.Key.Delete.toString=$estr;flambe.input.Key.Delete.__enum__=flambe.input.Key;flambe.input.Key.End=["End",80];flambe.input.Key.End.toString=$estr;flambe.input.Key.End.__enum__=flambe.input.Key;flambe.input.Key.Enter=["Enter",81];flambe.input.Key.Enter.toString=$estr;flambe.input.Key.Enter.__enum__=flambe.input.Key;flambe.input.Key.Equals=["Equals",82];flambe.input.Key.Equals.toString=$estr;flambe.input.Key.Equals.__enum__=flambe.input.Key;flambe.input.Key.Escape=["Escape",83];flambe.input.Key.Escape.toString=$estr;flambe.input.Key.Escape.__enum__=flambe.input.Key;flambe.input.Key.Home=["Home",84];flambe.input.Key.Home.toString=$estr;flambe.input.Key.Home.__enum__=flambe.input.Key;flambe.input.Key.Insert=["Insert",85];flambe.input.Key.Insert.toString=$estr;flambe.input.Key.Insert.__enum__=flambe.input.Key;flambe.input.Key.LeftBracket=["LeftBracket",86];flambe.input.Key.LeftBracket.toString=$estr;flambe.input.Key.LeftBracket.__enum__=flambe.input.Key;flambe.input.Key.Minus=["Minus",87];flambe.input.Key.Minus.toString=$estr;flambe.input.Key.Minus.__enum__=flambe.input.Key;flambe.input.Key.PageDown=["PageDown",88];flambe.input.Key.PageDown.toString=$estr;flambe.input.Key.PageDown.__enum__=flambe.input.Key;flambe.input.Key.PageUp=["PageUp",89];flambe.input.Key.PageUp.toString=$estr;flambe.input.Key.PageUp.__enum__=flambe.input.Key;flambe.input.Key.Period=["Period",90];flambe.input.Key.Period.toString=$estr;flambe.input.Key.Period.__enum__=flambe.input.Key;flambe.input.Key.Quote=["Quote",91];flambe.input.Key.Quote.toString=$estr;flambe.input.Key.Quote.__enum__=flambe.input.Key;flambe.input.Key.RightBracket=["RightBracket",92];flambe.input.Key.RightBracket.toString=$estr;flambe.input.Key.RightBracket.__enum__=flambe.input.Key;flambe.input.Key.Semicolon=["Semicolon",93];flambe.input.Key.Semicolon.toString=$estr;flambe.input.Key.Semicolon.__enum__=flambe.input.Key;flambe.input.Key.Shift=["Shift",94];flambe.input.Key.Shift.toString=$estr;flambe.input.Key.Shift.__enum__=flambe.input.Key;flambe.input.Key.Slash=["Slash",95];flambe.input.Key.Slash.toString=$estr;flambe.input.Key.Slash.__enum__=flambe.input.Key;flambe.input.Key.Space=["Space",96];flambe.input.Key.Space.toString=$estr;flambe.input.Key.Space.__enum__=flambe.input.Key;flambe.input.Key.Tab=["Tab",97];flambe.input.Key.Tab.toString=$estr;flambe.input.Key.Tab.__enum__=flambe.input.Key;flambe.input.Key.Menu=["Menu",98];flambe.input.Key.Menu.toString=$estr;flambe.input.Key.Menu.__enum__=flambe.input.Key;flambe.input.Key.Search=["Search",99];flambe.input.Key.Search.toString=$estr;flambe.input.Key.Search.__enum__=flambe.input.Key;flambe.input.Key.Unknown=function(keyCode){var $x=["Unknown",100,keyCode];$x.__enum__=flambe.input.Key;$x.toString=$estr;return $x;}
flambe.input.Keyboard=function(){}
$hxClasses["flambe.input.Keyboard"]=flambe.input.Keyboard;flambe.input.Keyboard.__name__=["flambe","input","Keyboard"];flambe.input.Keyboard.prototype={__class__:flambe.input.Keyboard,__properties__:{get_supported:"get_supported"}}
flambe.input.KeyboardEvent=function(){this._internal_init(0,null);};$hxClasses["flambe.input.KeyboardEvent"]=flambe.input.KeyboardEvent;flambe.input.KeyboardEvent.__name__=["flambe","input","KeyboardEvent"];flambe.input.KeyboardEvent.prototype={_internal_init:function(id,key){this.id=id;this.key=key;},__class__:flambe.input.KeyboardEvent}
flambe.input.Mouse=function(){}
$hxClasses["flambe.input.Mouse"]=flambe.input.Mouse;flambe.input.Mouse.__name__=["flambe","input","Mouse"];flambe.input.Mouse.prototype={__class__:flambe.input.Mouse,__properties__:{get_supported:"get_supported",get_x:"get_x",get_y:"get_y",set_cursor:"set_cursor",get_cursor:"get_cursor"}}
flambe.input.MouseButton=$hxClasses["flambe.input.MouseButton"]={__ename__:["flambe","input","MouseButton"],__constructs__:["Left","Middle","Right","Unknown"]}
flambe.input.MouseButton.Left=["Left",0];flambe.input.MouseButton.Left.toString=$estr;flambe.input.MouseButton.Left.__enum__=flambe.input.MouseButton;flambe.input.MouseButton.Middle=["Middle",1];flambe.input.MouseButton.Middle.toString=$estr;flambe.input.MouseButton.Middle.__enum__=flambe.input.MouseButton;flambe.input.MouseButton.Right=["Right",2];flambe.input.MouseButton.Right.toString=$estr;flambe.input.MouseButton.Right.__enum__=flambe.input.MouseButton;flambe.input.MouseButton.Unknown=function(buttonCode){var $x=["Unknown",3,buttonCode];$x.__enum__=flambe.input.MouseButton;$x.toString=$estr;return $x;}
flambe.input.MouseCursor=$hxClasses["flambe.input.MouseCursor"]={__ename__:["flambe","input","MouseCursor"],__constructs__:["Default","Button","None"]}
flambe.input.MouseCursor.Default=["Default",0];flambe.input.MouseCursor.Default.toString=$estr;flambe.input.MouseCursor.Default.__enum__=flambe.input.MouseCursor;flambe.input.MouseCursor.Button=["Button",1];flambe.input.MouseCursor.Button.toString=$estr;flambe.input.MouseCursor.Button.__enum__=flambe.input.MouseCursor;flambe.input.MouseCursor.None=["None",2];flambe.input.MouseCursor.None.toString=$estr;flambe.input.MouseCursor.None.__enum__=flambe.input.MouseCursor;flambe.input.MouseEvent=function(){this._internal_init(0,0,0,null);};$hxClasses["flambe.input.MouseEvent"]=flambe.input.MouseEvent;flambe.input.MouseEvent.__name__=["flambe","input","MouseEvent"];flambe.input.MouseEvent.prototype={_internal_init:function(id,viewX,viewY,button){this.id=id;this.viewX=viewX;this.viewY=viewY;this.button=button;},__class__:flambe.input.MouseEvent}
flambe.input.Pointer=function(){}
$hxClasses["flambe.input.Pointer"]=flambe.input.Pointer;flambe.input.Pointer.__name__=["flambe","input","Pointer"];flambe.input.Pointer.prototype={__class__:flambe.input.Pointer,__properties__:{get_supported:"get_supported",get_x:"get_x",get_y:"get_y"}}
flambe.input.EventSource=$hxClasses["flambe.input.EventSource"]={__ename__:["flambe","input","EventSource"],__constructs__:["Mouse","Touch"]}
flambe.input.EventSource.Mouse=function(event){var $x=["Mouse",0,event];$x.__enum__=flambe.input.EventSource;$x.toString=$estr;return $x;}
flambe.input.EventSource.Touch=function(point){var $x=["Touch",1,point];$x.__enum__=flambe.input.EventSource;$x.toString=$estr;return $x;}
flambe.input.PointerEvent=function(){this._internal_init(0,0,0,null,null);};$hxClasses["flambe.input.PointerEvent"]=flambe.input.PointerEvent;flambe.input.PointerEvent.__name__=["flambe","input","PointerEvent"];flambe.input.PointerEvent.prototype={_internal_init:function(id,viewX,viewY,hit,source){this.id=id;this.viewX=viewX;this.viewY=viewY;this.hit=hit;this.source=source;this._internal_stopped=false;},__class__:flambe.input.PointerEvent}
flambe.input.Touch=function(){}
$hxClasses["flambe.input.Touch"]=flambe.input.Touch;flambe.input.Touch.__name__=["flambe","input","Touch"];flambe.input.Touch.prototype={__class__:flambe.input.Touch,__properties__:{get_supported:"get_supported",get_maxPoints:"get_maxPoints",get_points:"get_points"}}
flambe.input.TouchPoint=function(id){this.id=id;this._internal_source=flambe.input.EventSource.Touch(this);};$hxClasses["flambe.input.TouchPoint"]=flambe.input.TouchPoint;flambe.input.TouchPoint.__name__=["flambe","input","TouchPoint"];flambe.input.TouchPoint.prototype={_internal_init:function(viewX,viewY){this.viewX=viewX;this.viewY=viewY;},__class__:flambe.input.TouchPoint}
flambe.math.FMath=function(){}
$hxClasses["flambe.math.FMath"]=flambe.math.FMath;flambe.math.FMath.__name__=["flambe","math","FMath"];flambe.math.FMath.toRadians=function(degrees){return degrees*3.141592653589793/180;}
flambe.math.FMath.max=function(a,b){return a>b?a:b;}
flambe.math.FMath.clamp=function(value,min,max){return value<min?min:value>max?max:value;}
flambe.math.Matrix=function(){this.identity();};$hxClasses["flambe.math.Matrix"]=flambe.math.Matrix;flambe.math.Matrix.__name__=["flambe","math","Matrix"];flambe.math.Matrix.prototype={toString:function(){return this.m00+" "+this.m01+" "+this.m02+" \\ "+this.m10+" "+this.m11+" "+this.m12;},inverseTransform:function(x,y,result){var det=this.determinant();if(det==0)return false;x-=this.m02;y-=this.m12;result.x=(x*this.m11-y*this.m01)/det;result.y=(y*this.m00-x*this.m10)/det;return true;},determinant:function(){return this.m00*this.m11-this.m01*this.m10;},translate:function(x,y){this.m02+=this.m00*x+this.m01*y;this.m12+=this.m11*y+this.m10*x;},compose:function(x,y,scaleX,scaleY,rotation){var sin=Math.sin(rotation);var cos=Math.cos(rotation);this.set(cos*scaleX,sin*scaleX,-sin*scaleY,cos*scaleY,x,y);},identity:function(){this.set(1,0,0,1,0,0);},set:function(m00,m10,m01,m11,m02,m12){this.m00=m00;this.m01=m01;this.m02=m02;this.m10=m10;this.m11=m11;this.m12=m12;},__class__:flambe.math.Matrix}
flambe.math.Rectangle=function(x,y,width,height){if(height==null)height=0;if(width==null)width=0;if(y==null)y=0;if(x==null)x=0;this.set(x,y,width,height);};$hxClasses["flambe.math.Rectangle"]=flambe.math.Rectangle;flambe.math.Rectangle.__name__=["flambe","math","Rectangle"];flambe.math.Rectangle.prototype={toString:function(){return "("+this.x+","+this.y+" "+this.width+"x"+this.height+")";},contains:function(x,y){x-=this.x;y-=this.y;return x>=0&&y>=0&&x<=this.width&&y<=this.height;},set:function(x,y,width,height){this.x=x;this.y=y;this.width=width;this.height=height;},__class__:flambe.math.Rectangle}
flambe.platform.BasicAssetPackLoader=function(platform,manifest){this._platform=platform;this.promise=new flambe.util.Promise();this._bytesLoaded=new Hash();this._pack=new flambe.platform._BasicAssetPackLoader.BasicAssetPack(manifest);var entries=Lambda.array(manifest);if(entries.length==0)this.handleSuccess();else{var bytesTotal=0;var groups=new Hash();var _g=0;while(_g<entries.length){var entry=entries[_g];++_g;var group=groups.get(entry.name);if(group==null){group=[];groups.set(entry.name,group);}
group.push(entry);}
this._assetsRemaining=Lambda.count(groups);var $it0=groups.iterator();while($it0.hasNext()){var group=$it0.next();var bestEntry=group.length>1?this.pickBestEntry(group):group[0];var placeholder=this.createPlaceholder(bestEntry);if(placeholder!=null){flambe.Log.warn("Using an asset placeholder",["name",bestEntry.name,"type",bestEntry.type]);this.handleLoad(bestEntry,placeholder);}else{bytesTotal+=bestEntry.bytes;var url=manifest.getFullURL(bestEntry);try{this.loadEntry(url,bestEntry);}catch(error){this.handleError(bestEntry,"Unexpected error: "+Std.string(error));}}}
this.promise.set_total(bytesTotal);}};$hxClasses["flambe.platform.BasicAssetPackLoader"]=flambe.platform.BasicAssetPackLoader;flambe.platform.BasicAssetPackLoader.__name__=["flambe","platform","BasicAssetPackLoader"];flambe.platform.BasicAssetPackLoader.prototype={handleTextureError:function(entry){this.handleError(entry,"Failed to create texture. Is the GPU context unavailable?");},handleError:function(entry,message){flambe.Log.warn("Error loading asset pack",["error",message,"url",entry.url]);this.promise.error.emit(flambe.util.Strings.withFields(message,["url",entry.url]));},handleSuccess:function(){this.promise.set_result(this._pack);},handleProgress:function(entry,bytesLoaded){this._bytesLoaded.set(entry.name,bytesLoaded);var bytesTotal=0;var $it0=this._bytesLoaded.iterator();while($it0.hasNext()){var bytes=$it0.next();bytesTotal+=bytes;}
this.promise.set_progress(bytesTotal);},handleLoad:function(entry,asset){this.handleProgress(entry,entry.bytes);var name=entry.name;switch((entry.type)[1]){case 0:this._pack.textures.set(name,asset);break;case 1:this._pack.sounds.set(name,asset);break;case 2:this._pack.files.set(name,asset);break;}
this._assetsRemaining-=1;if(this._assetsRemaining<=0)this.handleSuccess();},getAudioFormats:function(){return[];},loadEntry:function(url,entry){},createPlaceholder:function(entry){switch((entry.type)[1]){case 1:if(!Lambda.has(this.getAudioFormats(),entry.getUrlExtension()))return flambe.platform.DummySound.getInstance();break;default:}
return null;},pickBestEntry:function(entries){switch((entries[0].type)[1]){case 1:var extensions=this.getAudioFormats();var _g=0;while(_g<extensions.length){var extension=extensions[_g];++_g;var _g1=0;while(_g1<entries.length){var entry=entries[_g1];++_g1;if(entry.getUrlExtension()==extension)return entry;}}
break;default:}
return entries[0];},__class__:flambe.platform.BasicAssetPackLoader}
flambe.platform._BasicAssetPackLoader={}
flambe.platform._BasicAssetPackLoader.BasicAssetPack=function(manifest){this._manifest=manifest;this.textures=new Hash();this.sounds=new Hash();this.files=new Hash();};$hxClasses["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=flambe.platform._BasicAssetPackLoader.BasicAssetPack;flambe.platform._BasicAssetPackLoader.BasicAssetPack.__name__=["flambe","platform","_BasicAssetPackLoader","BasicAssetPack"];flambe.platform._BasicAssetPackLoader.BasicAssetPack.__interfaces__=[flambe.asset.AssetPack];flambe.platform._BasicAssetPackLoader.BasicAssetPack.warnOnExtension=function(path){var ext=flambe.util.Strings.getFileExtension(path);if(ext!=null&&ext.length==3)flambe.Log.warn("Requested asset \""+path+"\" should not have a file extension,"+" did you mean \""+flambe.util.Strings.removeFileExtension(path)+"\"?");}
flambe.platform._BasicAssetPackLoader.BasicAssetPack.prototype={get_manifest:function(){return this._manifest;},getFile:function(name,required){if(required==null)required=true;var file=this.files.get(name);if(file==null&&required)throw flambe.util.Strings.withFields("Missing file",["name",name]);return file;},getSound:function(name,required){if(required==null)required=true;flambe.platform._BasicAssetPackLoader.BasicAssetPack.warnOnExtension(name);var sound=this.sounds.get(name);if(sound==null&&required)throw flambe.util.Strings.withFields("Missing sound",["name",name]);return sound;},getTexture:function(name,required){if(required==null)required=true;flambe.platform._BasicAssetPackLoader.BasicAssetPack.warnOnExtension(name);var texture=this.textures.get(name);if(texture==null&&required)throw flambe.util.Strings.withFields("Missing texture",["name",name]);return texture;},__class__:flambe.platform._BasicAssetPackLoader.BasicAssetPack,__properties__:{get_manifest:"get_manifest"}}
flambe.platform.BasicKeyboard=function(){this.down=new flambe.util.Signal1();this.up=new flambe.util.Signal1();this.backButton=new flambe.util.Signal0();this._keyStates=new IntHash();};$hxClasses["flambe.platform.BasicKeyboard"]=flambe.platform.BasicKeyboard;flambe.platform.BasicKeyboard.__name__=["flambe","platform","BasicKeyboard"];flambe.platform.BasicKeyboard.__interfaces__=[flambe.input.Keyboard];flambe.platform.BasicKeyboard.prototype={submitUp:function(keyCode){if(this.isCodeDown(keyCode)){this._keyStates.remove(keyCode);flambe.platform.BasicKeyboard._sharedEvent._internal_init(flambe.platform.BasicKeyboard._sharedEvent.id+1,flambe.platform.KeyCodes.toKey(keyCode));this.up.emit(flambe.platform.BasicKeyboard._sharedEvent);}},submitDown:function(keyCode){if(keyCode==16777238){if(this.backButton.hasListeners()){this.backButton.emit();return true;}
return false;}
if(!this.isCodeDown(keyCode)){this._keyStates.set(keyCode,true);flambe.platform.BasicKeyboard._sharedEvent._internal_init(flambe.platform.BasicKeyboard._sharedEvent.id+1,flambe.platform.KeyCodes.toKey(keyCode));this.down.emit(flambe.platform.BasicKeyboard._sharedEvent);}
return true;},isCodeDown:function(keyCode){return this._keyStates.exists(keyCode);},isDown:function(key){return this.isCodeDown(flambe.platform.KeyCodes.toKeyCode(key));},get_supported:function(){return true;},__class__:flambe.platform.BasicKeyboard,__properties__:{get_supported:"get_supported"}}
flambe.platform.BasicMouse=function(pointer){this._pointer=pointer;this._source=flambe.input.EventSource.Mouse(flambe.platform.BasicMouse._sharedEvent);this.down=new flambe.util.Signal1();this.move=new flambe.util.Signal1();this.up=new flambe.util.Signal1();this.scroll=new flambe.util.Signal1();this._x=0;this._y=0;this._cursor=flambe.input.MouseCursor.Default;this._buttonStates=new IntHash();};$hxClasses["flambe.platform.BasicMouse"]=flambe.platform.BasicMouse;flambe.platform.BasicMouse.__name__=["flambe","platform","BasicMouse"];flambe.platform.BasicMouse.__interfaces__=[flambe.input.Mouse];flambe.platform.BasicMouse.prototype={prepare:function(viewX,viewY,button){this._x=viewX;this._y=viewY;flambe.platform.BasicMouse._sharedEvent._internal_init(flambe.platform.BasicMouse._sharedEvent.id+1,viewX,viewY,button);},isCodeDown:function(buttonCode){return this._buttonStates.exists(buttonCode);},submitScroll:function(viewX,viewY,velocity){this._x=viewX;this._y=viewY;if(!this.scroll.hasListeners())return false;this.scroll.emit(velocity);return true;},submitUp:function(viewX,viewY,buttonCode){if(this.isCodeDown(buttonCode)){this._buttonStates.remove(buttonCode);this.prepare(viewX,viewY,flambe.platform.MouseCodes.toButton(buttonCode));this._pointer.submitUp(viewX,viewY,this._source);this.up.emit(flambe.platform.BasicMouse._sharedEvent);}},submitMove:function(viewX,viewY){this.prepare(viewX,viewY,null);this._pointer.submitMove(viewX,viewY,this._source);this.move.emit(flambe.platform.BasicMouse._sharedEvent);},submitDown:function(viewX,viewY,buttonCode){if(!this.isCodeDown(buttonCode)){this._buttonStates.set(buttonCode,true);this.prepare(viewX,viewY,flambe.platform.MouseCodes.toButton(buttonCode));this._pointer.submitDown(viewX,viewY,this._source);this.down.emit(flambe.platform.BasicMouse._sharedEvent);}},isDown:function(button){return this.isCodeDown(flambe.platform.MouseCodes.toButtonCode(button));},set_cursor:function(cursor){return this._cursor=cursor;},get_cursor:function(){return this._cursor;},get_y:function(){return this._y;},get_x:function(){return this._x;},get_supported:function(){return true;},__class__:flambe.platform.BasicMouse,__properties__:{get_supported:"get_supported",get_x:"get_x",get_y:"get_y",set_cursor:"set_cursor",get_cursor:"get_cursor"}}
flambe.platform.BasicPointer=function(x,y,isDown){if(isDown==null)isDown=false;if(y==null)y=0;if(x==null)x=0;this.down=new flambe.util.Signal1();this.move=new flambe.util.Signal1();this.up=new flambe.util.Signal1();this._x=x;this._y=y;this._isDown=isDown;};$hxClasses["flambe.platform.BasicPointer"]=flambe.platform.BasicPointer;flambe.platform.BasicPointer.__name__=["flambe","platform","BasicPointer"];flambe.platform.BasicPointer.__interfaces__=[flambe.input.Pointer];flambe.platform.BasicPointer.prototype={prepare:function(viewX,viewY,hit,source){this._x=viewX;this._y=viewY;flambe.platform.BasicPointer._sharedEvent._internal_init(flambe.platform.BasicPointer._sharedEvent.id+1,viewX,viewY,hit,source);},submitUp:function(viewX,viewY,source){if(!this._isDown)return;this._isDown=false;var chain=[];var hit=flambe.display.Sprite.hitTest(flambe.System.root,viewX,viewY);if(hit!=null){var entity=hit.owner;do{var sprite=flambe.display.Sprite.getFrom(entity);if(sprite!=null)chain.push(sprite);entity=entity.parent;}while(entity!=null);}
this.prepare(viewX,viewY,hit,source);var _g=0;while(_g<chain.length){var sprite=chain[_g];++_g;var signal=sprite._internal_pointerUp;if(signal!=null){signal.emit(flambe.platform.BasicPointer._sharedEvent);if(flambe.platform.BasicPointer._sharedEvent._internal_stopped)return;}}
this.up.emit(flambe.platform.BasicPointer._sharedEvent);},submitMove:function(viewX,viewY,source){var chain=[];var hit=flambe.display.Sprite.hitTest(flambe.System.root,viewX,viewY);if(hit!=null){var entity=hit.owner;do{var sprite=flambe.display.Sprite.getFrom(entity);if(sprite!=null)chain.push(sprite);entity=entity.parent;}while(entity!=null);}
this.prepare(viewX,viewY,hit,source);var _g=0;while(_g<chain.length){var sprite=chain[_g];++_g;var signal=sprite._internal_pointerMove;if(signal!=null){signal.emit(flambe.platform.BasicPointer._sharedEvent);if(flambe.platform.BasicPointer._sharedEvent._internal_stopped)return;}}
this.move.emit(flambe.platform.BasicPointer._sharedEvent);},submitDown:function(viewX,viewY,source){if(this._isDown)return;this._isDown=true;var chain=[];var hit=flambe.display.Sprite.hitTest(flambe.System.root,viewX,viewY);if(hit!=null){var entity=hit.owner;do{var sprite=flambe.display.Sprite.getFrom(entity);if(sprite!=null)chain.push(sprite);entity=entity.parent;}while(entity!=null);}
this.prepare(viewX,viewY,hit,source);var _g=0;while(_g<chain.length){var sprite=chain[_g];++_g;var signal=sprite._internal_pointerDown;if(signal!=null){signal.emit(flambe.platform.BasicPointer._sharedEvent);if(flambe.platform.BasicPointer._sharedEvent._internal_stopped)return;}}
this.down.emit(flambe.platform.BasicPointer._sharedEvent);},isDown:function(){return this._isDown;},get_y:function(){return this._y;},get_x:function(){return this._x;},get_supported:function(){return true;},__class__:flambe.platform.BasicPointer,__properties__:{get_supported:"get_supported",get_x:"get_x",get_y:"get_y"}}
flambe.platform.BasicTouch=function(pointer,maxPoints){if(maxPoints==null)maxPoints=4;this._pointer=pointer;this._maxPoints=maxPoints;this._pointMap=new IntHash();this._points=[];this.down=new flambe.util.Signal1();this.move=new flambe.util.Signal1();this.up=new flambe.util.Signal1();};$hxClasses["flambe.platform.BasicTouch"]=flambe.platform.BasicTouch;flambe.platform.BasicTouch.__name__=["flambe","platform","BasicTouch"];flambe.platform.BasicTouch.__interfaces__=[flambe.input.Touch];flambe.platform.BasicTouch.prototype={submitUp:function(id,viewX,viewY){var point=this._pointMap.get(id);if(point!=null){point._internal_init(viewX,viewY);this._pointMap.remove(id);HxOverrides.remove(this._points,point);if(this._pointerTouch==point){this._pointerTouch=null;this._pointer.submitUp(viewX,viewY,point._internal_source);}
this.up.emit(point);}},submitMove:function(id,viewX,viewY){var point=this._pointMap.get(id);if(point!=null){point._internal_init(viewX,viewY);if(this._pointerTouch==point)this._pointer.submitMove(viewX,viewY,point._internal_source);this.move.emit(point);}},submitDown:function(id,viewX,viewY){if(!this._pointMap.exists(id)){var point=new flambe.input.TouchPoint(id);point._internal_init(viewX,viewY);this._pointMap.set(id,point);this._points.push(point);if(this._pointerTouch==null){this._pointerTouch=point;this._pointer.submitDown(viewX,viewY,point._internal_source);}
this.down.emit(point);}},get_points:function(){return this._points.slice();},get_maxPoints:function(){return this._maxPoints;},get_supported:function(){return true;},__class__:flambe.platform.BasicTouch,__properties__:{get_supported:"get_supported",get_maxPoints:"get_maxPoints",get_points:"get_points"}}
flambe.sound.Sound=function(){}
$hxClasses["flambe.sound.Sound"]=flambe.sound.Sound;flambe.sound.Sound.__name__=["flambe","sound","Sound"];flambe.sound.Sound.prototype={__class__:flambe.sound.Sound,__properties__:{get_duration:"get_duration"}}
flambe.platform.DummySound=function(){this._playback=new flambe.platform.DummyPlayback(this);};$hxClasses["flambe.platform.DummySound"]=flambe.platform.DummySound;flambe.platform.DummySound.__name__=["flambe","platform","DummySound"];flambe.platform.DummySound.__interfaces__=[flambe.sound.Sound];flambe.platform.DummySound.getInstance=function(){if(flambe.platform.DummySound._instance==null)flambe.platform.DummySound._instance=new flambe.platform.DummySound();return flambe.platform.DummySound._instance;}
flambe.platform.DummySound.prototype={get_duration:function(){return 0;},loop:function(volume){if(volume==null)volume=1.0;return this._playback;},play:function(volume){if(volume==null)volume=1.0;return this._playback;},__class__:flambe.platform.DummySound,__properties__:{get_duration:"get_duration"}}
flambe.sound.Playback=function(){}
$hxClasses["flambe.sound.Playback"]=flambe.sound.Playback;flambe.sound.Playback.__name__=["flambe","sound","Playback"];flambe.sound.Playback.__interfaces__=[flambe.util.Disposable];flambe.sound.Playback.prototype={__class__:flambe.sound.Playback,__properties__:{set_paused:"set_paused",get_paused:"get_paused",get_ended:"get_ended",get_position:"get_position",get_sound:"get_sound"}}
flambe.platform.DummyPlayback=function(sound){this._sound=sound;this.volume=new flambe.animation.AnimatedFloat(0);};$hxClasses["flambe.platform.DummyPlayback"]=flambe.platform.DummyPlayback;flambe.platform.DummyPlayback.__name__=["flambe","platform","DummyPlayback"];flambe.platform.DummyPlayback.__interfaces__=[flambe.sound.Playback];flambe.platform.DummyPlayback.prototype={dispose:function(){},get_position:function(){return 0;},get_ended:function(){return true;},set_paused:function(paused){return true;},get_paused:function(){return true;},get_sound:function(){return this._sound;},__class__:flambe.platform.DummyPlayback,__properties__:{set_paused:"set_paused",get_paused:"get_paused",get_ended:"get_ended",get_position:"get_position",get_sound:"get_sound"}}
flambe.storage={}
flambe.storage.Storage=function(){}
$hxClasses["flambe.storage.Storage"]=flambe.storage.Storage;flambe.storage.Storage.__name__=["flambe","storage","Storage"];flambe.storage.Storage.prototype={__class__:flambe.storage.Storage,__properties__:{get_supported:"get_supported"}}
flambe.platform.DummyStorage=function(){this.clear();};$hxClasses["flambe.platform.DummyStorage"]=flambe.platform.DummyStorage;flambe.platform.DummyStorage.__name__=["flambe","platform","DummyStorage"];flambe.platform.DummyStorage.__interfaces__=[flambe.storage.Storage];flambe.platform.DummyStorage.prototype={clear:function(){this._hash=new Hash();},remove:function(key){this._hash.remove(key);},get:function(key,defaultValue){return this._hash.exists(key)?this._hash.get(key):defaultValue;},set:function(key,value){this._hash.set(key,value);return true;},get_supported:function(){return false;},__class__:flambe.platform.DummyStorage,__properties__:{get_supported:"get_supported"}}
flambe.platform.DummyTouch=function(){this.down=new flambe.util.Signal1();this.move=new flambe.util.Signal1();this.up=new flambe.util.Signal1();};$hxClasses["flambe.platform.DummyTouch"]=flambe.platform.DummyTouch;flambe.platform.DummyTouch.__name__=["flambe","platform","DummyTouch"];flambe.platform.DummyTouch.__interfaces__=[flambe.input.Touch];flambe.platform.DummyTouch.prototype={get_points:function(){return[];},get_maxPoints:function(){return 0;},get_supported:function(){return false;},__class__:flambe.platform.DummyTouch,__properties__:{get_supported:"get_supported",get_maxPoints:"get_maxPoints",get_points:"get_points"}}
flambe.platform.EventGroup=function(){this._entries=[];};$hxClasses["flambe.platform.EventGroup"]=flambe.platform.EventGroup;flambe.platform.EventGroup.__name__=["flambe","platform","EventGroup"];flambe.platform.EventGroup.__interfaces__=[flambe.util.Disposable];flambe.platform.EventGroup.prototype={dispose:function(){var _g=0,_g1=this._entries;while(_g<_g1.length){var entry=_g1[_g];++_g;entry.dispatcher.removeEventListener(entry.type,entry.listener,false);}
this._entries=[];},addDisposingListener:function(dispatcher,type,listener){var _g=this;this.addListener(dispatcher,type,function(event){_g.dispose();listener(event);});},addListener:function(dispatcher,type,listener){dispatcher.addEventListener(type,listener,false);this._entries.push(new flambe.platform._EventGroup.Entry(dispatcher,type,listener));},__class__:flambe.platform.EventGroup}
flambe.platform._EventGroup={}
flambe.platform._EventGroup.Entry=function(dispatcher,type,listener){this.dispatcher=dispatcher;this.type=type;this.listener=listener;};$hxClasses["flambe.platform._EventGroup.Entry"]=flambe.platform._EventGroup.Entry;flambe.platform._EventGroup.Entry.__name__=["flambe","platform","_EventGroup","Entry"];flambe.platform._EventGroup.Entry.prototype={__class__:flambe.platform._EventGroup.Entry}
flambe.platform.KeyCodes=function(){}
$hxClasses["flambe.platform.KeyCodes"]=flambe.platform.KeyCodes;flambe.platform.KeyCodes.__name__=["flambe","platform","KeyCodes"];flambe.platform.KeyCodes.toKey=function(keyCode){switch(keyCode){case 65:return flambe.input.Key.A;case 66:return flambe.input.Key.B;case 67:return flambe.input.Key.C;case 68:return flambe.input.Key.D;case 69:return flambe.input.Key.E;case 70:return flambe.input.Key.F;case 71:return flambe.input.Key.G;case 72:return flambe.input.Key.H;case 73:return flambe.input.Key.I;case 74:return flambe.input.Key.J;case 75:return flambe.input.Key.K;case 76:return flambe.input.Key.L;case 77:return flambe.input.Key.M;case 78:return flambe.input.Key.N;case 79:return flambe.input.Key.O;case 80:return flambe.input.Key.P;case 81:return flambe.input.Key.Q;case 82:return flambe.input.Key.R;case 83:return flambe.input.Key.S;case 84:return flambe.input.Key.T;case 85:return flambe.input.Key.U;case 86:return flambe.input.Key.V;case 87:return flambe.input.Key.W;case 88:return flambe.input.Key.X;case 89:return flambe.input.Key.Y;case 90:return flambe.input.Key.Z;case 48:return flambe.input.Key.Number0;case 49:return flambe.input.Key.Number1;case 50:return flambe.input.Key.Number2;case 51:return flambe.input.Key.Number3;case 52:return flambe.input.Key.Number4;case 53:return flambe.input.Key.Number5;case 54:return flambe.input.Key.Number6;case 55:return flambe.input.Key.Number7;case 56:return flambe.input.Key.Number8;case 57:return flambe.input.Key.Number9;case 96:return flambe.input.Key.Numpad0;case 97:return flambe.input.Key.Numpad1;case 98:return flambe.input.Key.Numpad2;case 99:return flambe.input.Key.Numpad3;case 100:return flambe.input.Key.Numpad4;case 101:return flambe.input.Key.Numpad5;case 102:return flambe.input.Key.Numpad6;case 103:return flambe.input.Key.Numpad7;case 104:return flambe.input.Key.Numpad8;case 105:return flambe.input.Key.Numpad9;case 107:return flambe.input.Key.NumpadAdd;case 110:return flambe.input.Key.NumpadDecimal;case 111:return flambe.input.Key.NumpadDivide;case 108:return flambe.input.Key.NumpadEnter;case 106:return flambe.input.Key.NumpadMultiply;case 109:return flambe.input.Key.NumpadSubtract;case 112:return flambe.input.Key.F1;case 113:return flambe.input.Key.F2;case 114:return flambe.input.Key.F3;case 115:return flambe.input.Key.F4;case 116:return flambe.input.Key.F5;case 117:return flambe.input.Key.F6;case 118:return flambe.input.Key.F7;case 119:return flambe.input.Key.F8;case 120:return flambe.input.Key.F9;case 121:return flambe.input.Key.F10;case 122:return flambe.input.Key.F11;case 123:return flambe.input.Key.F12;case 37:return flambe.input.Key.Left;case 38:return flambe.input.Key.Up;case 39:return flambe.input.Key.Right;case 40:return flambe.input.Key.Down;case 18:return flambe.input.Key.Alt;case 192:return flambe.input.Key.Backquote;case 220:return flambe.input.Key.Backslash;case 8:return flambe.input.Key.Backspace;case 20:return flambe.input.Key.CapsLock;case 188:return flambe.input.Key.Comma;case 15:return flambe.input.Key.Command;case 17:return flambe.input.Key.Control;case 46:return flambe.input.Key.Delete;case 35:return flambe.input.Key.End;case 13:return flambe.input.Key.Enter;case 187:return flambe.input.Key.Equals;case 27:return flambe.input.Key.Escape;case 36:return flambe.input.Key.Home;case 45:return flambe.input.Key.Insert;case 219:return flambe.input.Key.LeftBracket;case 189:return flambe.input.Key.Minus;case 34:return flambe.input.Key.PageDown;case 33:return flambe.input.Key.PageUp;case 190:return flambe.input.Key.Period;case 222:return flambe.input.Key.Quote;case 221:return flambe.input.Key.RightBracket;case 186:return flambe.input.Key.Semicolon;case 16:return flambe.input.Key.Shift;case 191:return flambe.input.Key.Slash;case 32:return flambe.input.Key.Space;case 9:return flambe.input.Key.Tab;case 16777234:return flambe.input.Key.Menu;case 16777247:return flambe.input.Key.Search;}
return flambe.input.Key.Unknown(keyCode);}
flambe.platform.KeyCodes.toKeyCode=function(key){var $e=(key);switch($e[1]){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;case 99:return 16777247;case 100:var keyCode=$e[2];return keyCode;}}
flambe.platform.MainLoop=function(){this._tickables=[];};$hxClasses["flambe.platform.MainLoop"]=flambe.platform.MainLoop;flambe.platform.MainLoop.__name__=["flambe","platform","MainLoop"];flambe.platform.MainLoop.updateEntity=function(entity,dt){var speed=flambe.SpeedAdjuster.getFrom(entity);if(speed!=null){speed._internal_realDt=dt;dt*=speed.scale.get__();if(dt<=0){speed.onUpdate(dt);return;}}
var p=entity.firstComponent;while(p!=null){var next=p.next;p.onUpdate(dt);p=next;}
var p1=entity.firstChild;while(p1!=null){var next=p1.next;flambe.platform.MainLoop.updateEntity(p1,dt);p1=next;}}
flambe.platform.MainLoop.prototype={addTickable:function(t){this._tickables.push(t);},render:function(renderer){var graphics=renderer.willRender();if(graphics!=null){flambe.display.Sprite.render(flambe.System.root,graphics);renderer.didRender();}},update:function(dt){if(dt<=0){flambe.Log.warn("Zero or negative time elapsed since the last frame!",["dt",dt]);return;}
if(dt>1)dt=1;var ii=0;while(ii<this._tickables.length){var t=this._tickables[ii];if(t==null||t.update(dt))this._tickables.splice(ii,1);else++ii;}
flambe.System.volume.update(dt);flambe.platform.MainLoop.updateEntity(flambe.System.root,dt);},__class__:flambe.platform.MainLoop}
flambe.platform.ManifestBuilder=function(){}
$hxClasses["flambe.platform.ManifestBuilder"]=flambe.platform.ManifestBuilder;flambe.platform.ManifestBuilder.__name__=["flambe","platform","ManifestBuilder"];flambe.platform.MouseCodes=function(){}
$hxClasses["flambe.platform.MouseCodes"]=flambe.platform.MouseCodes;flambe.platform.MouseCodes.__name__=["flambe","platform","MouseCodes"];flambe.platform.MouseCodes.toButton=function(buttonCode){switch(buttonCode){case 0:return flambe.input.MouseButton.Left;case 1:return flambe.input.MouseButton.Middle;case 2:return flambe.input.MouseButton.Right;}
return flambe.input.MouseButton.Unknown(buttonCode);}
flambe.platform.MouseCodes.toButtonCode=function(button){var $e=(button);switch($e[1]){case 0:return 0;case 1:return 1;case 2:return 2;case 3:var buttonCode=$e[2];return buttonCode;}}
flambe.platform.Renderer=function(){}
$hxClasses["flambe.platform.Renderer"]=flambe.platform.Renderer;flambe.platform.Renderer.__name__=["flambe","platform","Renderer"];flambe.platform.Renderer.prototype={__class__:flambe.platform.Renderer}
flambe.platform.Tickable=function(){}
$hxClasses["flambe.platform.Tickable"]=flambe.platform.Tickable;flambe.platform.Tickable.__name__=["flambe","platform","Tickable"];flambe.platform.Tickable.prototype={__class__:flambe.platform.Tickable}
flambe.platform.html.CanvasGraphics=function(canvas){this._firstDraw=false;this._canvasCtx=canvas.getContext("2d");this.clear();};$hxClasses["flambe.platform.html.CanvasGraphics"]=flambe.platform.html.CanvasGraphics;flambe.platform.html.CanvasGraphics.__name__=["flambe","platform","html","CanvasGraphics"];flambe.platform.html.CanvasGraphics.__interfaces__=[flambe.display.Graphics];flambe.platform.html.CanvasGraphics.prototype={willRender:function(){this._firstDraw=true;},applyScissor:function(x,y,width,height){this._canvasCtx.beginPath();this._canvasCtx.rect(Std["int"](x),Std["int"](y),Std["int"](width),Std["int"](height));this._canvasCtx.clip();},setBlendMode:function(blendMode){var op;switch((blendMode)[1]){case 0:op="source-over";break;case 1:op="lighter";break;case 2:op="source-over";break;}
this._canvasCtx.globalCompositeOperation=op;},setAlpha:function(alpha){this._canvasCtx.globalAlpha=alpha;},multiplyAlpha:function(factor){this._canvasCtx.globalAlpha*=factor;},fillRect:function(color,x,y,width,height){if(this._firstDraw){this._firstDraw=false;this._canvasCtx.globalCompositeOperation="copy";this.fillRect(color,x,y,width,height);this._canvasCtx.globalCompositeOperation="source-over";return;}
this._canvasCtx.fillStyle="#"+("00000"+color.toString(16)).slice(-6);this._canvasCtx.fillRect(Std["int"](x),Std["int"](y),Std["int"](width),Std["int"](height));},drawPattern:function(texture,x,y,width,height){if(this._firstDraw){this._firstDraw=false;this._canvasCtx.globalCompositeOperation="copy";this.drawPattern(texture,x,y,width,height);this._canvasCtx.globalCompositeOperation="source-over";return;}
var texture1=texture;if(texture1.pattern==null)texture1.pattern=this._canvasCtx.createPattern(texture1.image,"repeat");this._canvasCtx.fillStyle=texture1.pattern;this._canvasCtx.fillRect(Std["int"](x),Std["int"](y),Std["int"](width),Std["int"](height));},drawSubImage:function(texture,destX,destY,sourceX,sourceY,sourceW,sourceH){if(this._firstDraw){this._firstDraw=false;this._canvasCtx.globalCompositeOperation="copy";this.drawSubImage(texture,destX,destY,sourceX,sourceY,sourceW,sourceH);this._canvasCtx.globalCompositeOperation="source-over";return;}
var texture1=texture;this._canvasCtx.drawImage(texture1.image,Std["int"](sourceX),Std["int"](sourceY),Std["int"](sourceW),Std["int"](sourceH),Std["int"](destX),Std["int"](destY),Std["int"](sourceW),Std["int"](sourceH));},drawImage:function(texture,x,y){if(this._firstDraw){this._firstDraw=false;this._canvasCtx.globalCompositeOperation="copy";this.drawImage(texture,x,y);this._canvasCtx.globalCompositeOperation="source-over";return;}
var texture1=texture;this._canvasCtx.drawImage(texture1.image,Std["int"](x),Std["int"](y));},restore:function(){this._canvasCtx.restore();},transform:function(m00,m10,m01,m11,m02,m12){this._canvasCtx.transform(m00,m10,m01,m11,Std["int"](m02),Std["int"](m12));},rotate:function(rotation){this._canvasCtx.rotate(flambe.math.FMath.toRadians(rotation));},scale:function(x,y){this._canvasCtx.scale(x,y);},translate:function(x,y){this._canvasCtx.translate(Std["int"](x),Std["int"](y));},save:function(){this._canvasCtx.save();},clear:function(){this._canvasCtx.fillStyle="#000000";this._canvasCtx.fillRect(0,0,this._canvasCtx.canvas.width,this._canvasCtx.canvas.height);},__class__:flambe.platform.html.CanvasGraphics}
flambe.platform.html.CanvasRenderer=function(canvas){this._graphics=new flambe.platform.html.CanvasGraphics(canvas);this._graphics.clear();};$hxClasses["flambe.platform.html.CanvasRenderer"]=flambe.platform.html.CanvasRenderer;flambe.platform.html.CanvasRenderer.__name__=["flambe","platform","html","CanvasRenderer"];flambe.platform.html.CanvasRenderer.__interfaces__=[flambe.platform.Renderer];flambe.platform.html.CanvasRenderer.prototype={didRender:function(){},willRender:function(){this._graphics.willRender();return this._graphics;},createEmptyTexture:function(width,height){return new flambe.platform.html.CanvasTexture(flambe.platform.html.HtmlUtil.createEmptyCanvas(width,height));},createTexture:function(image){return new flambe.platform.html.CanvasTexture(flambe.platform.html.CanvasRenderer.CANVAS_TEXTURES?flambe.platform.html.HtmlUtil.createCanvas(image):image);},__class__:flambe.platform.html.CanvasRenderer}
flambe.platform.html.CanvasTexture=function(image){this._graphics=null;this.image=image;};$hxClasses["flambe.platform.html.CanvasTexture"]=flambe.platform.html.CanvasTexture;flambe.platform.html.CanvasTexture.__name__=["flambe","platform","html","CanvasTexture"];flambe.platform.html.CanvasTexture.__interfaces__=[flambe.display.Texture];flambe.platform.html.CanvasTexture.prototype={getContext2d:function(){if(!Std["is"](this.image,HTMLCanvasElement))this.image=flambe.platform.html.HtmlUtil.createCanvas(this.image);return this.image.getContext("2d");},get_graphics:function(){if(this._graphics==null){this.getContext2d();this._graphics=new flambe.platform.html._CanvasTexture.InternalGraphics(this);}
return this._graphics;},get_height:function(){return this.image.height;},get_width:function(){return this.image.width;},dirtyContents:function(){this.pattern=null;},writePixels:function(pixels,x,y,sourceW,sourceH){var ctx2d=this.getContext2d();var imageData=ctx2d.createImageData(sourceW,sourceH);var data=imageData.data;if(data.set!=null)data.set(pixels.getData());else{var size=4*sourceW*sourceH;var _g=0;while(_g<size){var ii=_g++;data[ii]=pixels.get(ii);}}
ctx2d.putImageData(imageData,x,y);this.dirtyContents();},readPixels:function(x,y,width,height){return haxe.io.Bytes.ofData(this.getContext2d().getImageData(x,y,width,height).data);},__class__:flambe.platform.html.CanvasTexture,__properties__:{get_width:"get_width",get_height:"get_height",get_graphics:"get_graphics"}}
flambe.platform.html._CanvasTexture={}
flambe.platform.html._CanvasTexture.InternalGraphics=function(renderTarget){flambe.platform.html.CanvasGraphics.call(this,renderTarget.image);this._renderTarget=renderTarget;};$hxClasses["flambe.platform.html._CanvasTexture.InternalGraphics"]=flambe.platform.html._CanvasTexture.InternalGraphics;flambe.platform.html._CanvasTexture.InternalGraphics.__name__=["flambe","platform","html","_CanvasTexture","InternalGraphics"];flambe.platform.html._CanvasTexture.InternalGraphics.__super__=flambe.platform.html.CanvasGraphics;flambe.platform.html._CanvasTexture.InternalGraphics.prototype=$extend(flambe.platform.html.CanvasGraphics.prototype,{fillRect:function(color,x,y,width,height){flambe.platform.html.CanvasGraphics.prototype.fillRect.call(this,color,x,y,width,height);this._renderTarget.dirtyContents();},drawPattern:function(texture,x,y,width,height){flambe.platform.html.CanvasGraphics.prototype.drawPattern.call(this,texture,x,y,width,height);this._renderTarget.dirtyContents();},drawSubImage:function(texture,destX,destY,sourceX,sourceY,sourceW,sourceH){flambe.platform.html.CanvasGraphics.prototype.drawSubImage.call(this,texture,destX,destY,sourceX,sourceY,sourceW,sourceH);this._renderTarget.dirtyContents();},drawImage:function(texture,x,y){flambe.platform.html.CanvasGraphics.prototype.drawImage.call(this,texture,x,y);this._renderTarget.dirtyContents();},__class__:flambe.platform.html._CanvasTexture.InternalGraphics});flambe.platform.html.HtmlAssetPackLoader=function(platform,manifest){flambe.platform.BasicAssetPackLoader.call(this,platform,manifest);};$hxClasses["flambe.platform.html.HtmlAssetPackLoader"]=flambe.platform.html.HtmlAssetPackLoader;flambe.platform.html.HtmlAssetPackLoader.__name__=["flambe","platform","html","HtmlAssetPackLoader"];flambe.platform.html.HtmlAssetPackLoader.detectAudioFormats=function(){var element=js.Lib.document.createElement("audio");if(element==null||element.canPlayType==null)return[];var blacklist=new EReg("\\b(iPhone|iPod|iPad|Android)\\b","");if(!flambe.platform.html.WebAudioSound.get_supported()&&blacklist.match(js.Lib.window.navigator.userAgent))return[];var formats=[{extension:"m4a",type:"audio/mp4; codecs=mp4a"},{extension:"mp3",type:"audio/mpeg"},{extension:"ogg",type:"audio/ogg; codecs=vorbis"},{extension:"wav",type:"audio/wav"}];var result=[];var _g=0;while(_g<formats.length){var format=formats[_g];++_g;var canPlayType="";try{canPlayType=element.canPlayType(format.type);}catch(_){}
if(canPlayType!="")result.push(format.extension);}
return result;}
flambe.platform.html.HtmlAssetPackLoader.supportsBlob=function(){if(flambe.platform.html.HtmlAssetPackLoader._detectBlobSupport){flambe.platform.html.HtmlAssetPackLoader._detectBlobSupport=false;try{var xhr=new XMLHttpRequest();xhr.responseType="blob";}catch(_){return false;}
flambe.platform.html.HtmlAssetPackLoader._URL=flambe.platform.html.HtmlUtil.loadExtension("URL").value;}
return flambe.platform.html.HtmlAssetPackLoader._URL!=null&&flambe.platform.html.HtmlAssetPackLoader._URL.createObjectURL!=null;}
flambe.platform.html.HtmlAssetPackLoader.__super__=flambe.platform.BasicAssetPackLoader;flambe.platform.html.HtmlAssetPackLoader.prototype=$extend(flambe.platform.BasicAssetPackLoader.prototype,{sendRequest:function(url,entry,responseType,onLoad){var _g=this;var xhr=new XMLHttpRequest();var lastActivity=0.0;var start=function(){lastActivity=flambe.platform.html.HtmlUtil.now();xhr.open("GET",url,true);xhr.responseType=responseType;if(xhr.responseType=="")xhr.responseType="arraybuffer";xhr.send();};var interval=0;if(typeof(xhr.onprogress)!="undefined"){var attempts=4;xhr.onprogress=function(event){lastActivity=flambe.platform.html.HtmlUtil.now();_g.handleProgress(entry,event.loaded);};interval=js.Lib.window.setInterval(function(){if(xhr.readyState>=1&&flambe.platform.html.HtmlUtil.now()-lastActivity>5000){xhr.abort();--attempts;if(attempts>0)start();else{js.Lib.window.clearInterval(interval);_g.handleError(entry,"Failed to load asset: timeout");}}},1000);}
xhr.onload=function(_){js.Lib.window.clearInterval(interval);var response=xhr.response;if(response==null)response=xhr.responseText;else if(responseType=="blob"&&xhr.responseType=="arraybuffer")response=new Blob([xhr.response]);onLoad(response);};xhr.onerror=function(_){js.Lib.window.clearInterval(interval);_g.handleError(entry,"Failed to load asset: error #"+Std.string(xhr.status));};start();return xhr;},getAudioFormats:function(){if(flambe.platform.html.HtmlAssetPackLoader._audioFormats==null)flambe.platform.html.HtmlAssetPackLoader._audioFormats=flambe.platform.html.HtmlAssetPackLoader.detectAudioFormats();return flambe.platform.html.HtmlAssetPackLoader._audioFormats;},loadEntry:function(url,entry){var _g=this;switch((entry.type)[1]){case 0:var image=new Image();var events=new flambe.platform.EventGroup();events.addDisposingListener(image,"load",function(_){if(image.width>1024||image.height>1024)flambe.Log.warn("Images larger than 1024px on a side will prevent GPU acceleration"+" on some platforms (iOS)",["url",url,"width",image.width,"height",image.height]);if(flambe.platform.html.HtmlAssetPackLoader.supportsBlob())flambe.platform.html.HtmlAssetPackLoader._URL.revokeObjectURL(image.src);var texture=_g._platform.getRenderer().createTexture(image);if(texture!=null)_g.handleLoad(entry,texture);else _g.handleTextureError(entry);});events.addDisposingListener(image,"error",function(_){_g.handleError(entry,"Failed to load image");});if(flambe.platform.html.HtmlAssetPackLoader.supportsBlob())this.sendRequest(url,entry,"blob",function(blob){image.src=flambe.platform.html.HtmlAssetPackLoader._URL.createObjectURL(blob);});else image.src=url;break;case 1:if(flambe.platform.html.WebAudioSound.get_supported())this.sendRequest(url,entry,"arraybuffer",function(buffer){flambe.platform.html.WebAudioSound.ctx.decodeAudioData(buffer,function(decoded){_g.handleLoad(entry,new flambe.platform.html.WebAudioSound(decoded));},function(){flambe.Log.warn("Couldn't decode Web Audio, ignoring this asset",["url",url]);_g.handleLoad(entry,flambe.platform.DummySound.getInstance());});});else{var audio=js.Lib.document.createElement("audio");audio.preload="auto";var ref=++flambe.platform.html.HtmlAssetPackLoader._mediaRefCount;if(flambe.platform.html.HtmlAssetPackLoader._mediaElements==null)flambe.platform.html.HtmlAssetPackLoader._mediaElements=new IntHash();flambe.platform.html.HtmlAssetPackLoader._mediaElements.set(ref,audio);var events=new flambe.platform.EventGroup();events.addDisposingListener(audio,"canplaythrough",function(_){flambe.platform.html.HtmlAssetPackLoader._mediaElements.remove(ref);_g.handleLoad(entry,new flambe.platform.html.HtmlSound(audio));});events.addDisposingListener(audio,"error",function(_){flambe.platform.html.HtmlAssetPackLoader._mediaElements.remove(ref);var code=audio.error.code;if(code==3||code==4){flambe.Log.warn("Couldn't decode HTML5 audio, ignoring this asset",["url",url,"code",code]);_g.handleLoad(entry,flambe.platform.DummySound.getInstance());}else _g.handleError(entry,"Failed to load audio: "+Std.string(audio.error.code));});events.addListener(audio,"progress",function(_){if(audio.buffered.length>0&&audio.duration>0){var progress=audio.buffered.end(0)/audio.duration;_g.handleProgress(entry,Std["int"](progress*entry.bytes));}});audio.src=url;audio.load();}
break;case 2:this.sendRequest(url,entry,"text",function(text){_g.handleLoad(entry,text);});break;}},__class__:flambe.platform.html.HtmlAssetPackLoader});flambe.platform.html.HtmlExternal=function(){};$hxClasses["flambe.platform.html.HtmlExternal"]=flambe.platform.html.HtmlExternal;flambe.platform.html.HtmlExternal.__name__=["flambe","platform","html","HtmlExternal"];flambe.platform.html.HtmlExternal.__interfaces__=[flambe.external.External];flambe.platform.html.HtmlExternal.prototype={bind:function(name,fn){Reflect.setField(js.Lib.window,name,fn);},call:function(name,params){if(params==null)params=[];var method=Reflect.field(js.Lib.window,name);return Reflect.callMethod(null,method,params);},get_supported:function(){return true;},__class__:flambe.platform.html.HtmlExternal,__properties__:{get_supported:"get_supported"}}
flambe.util.LogHandler=function(){}
$hxClasses["flambe.util.LogHandler"]=flambe.util.LogHandler;flambe.util.LogHandler.__name__=["flambe","util","LogHandler"];flambe.util.LogHandler.prototype={__class__:flambe.util.LogHandler}
flambe.platform.html.HtmlLogHandler=function(tag){this._tagPrefix=tag+": ";};$hxClasses["flambe.platform.html.HtmlLogHandler"]=flambe.platform.html.HtmlLogHandler;flambe.platform.html.HtmlLogHandler.__name__=["flambe","platform","html","HtmlLogHandler"];flambe.platform.html.HtmlLogHandler.__interfaces__=[flambe.util.LogHandler];flambe.platform.html.HtmlLogHandler.isSupported=function(){return typeof console=="object"&&console.info!=null;}
flambe.platform.html.HtmlLogHandler.prototype={log:function(level,message){message=this._tagPrefix+message;switch((level)[1]){case 0:console.info(message);break;case 1:console.warn(message);break;case 2:console.error(message);break;}},__class__:flambe.platform.html.HtmlLogHandler}
flambe.platform.html.HtmlMouse=function(pointer,canvas){flambe.platform.BasicMouse.call(this,pointer);this._canvas=canvas;};$hxClasses["flambe.platform.html.HtmlMouse"]=flambe.platform.html.HtmlMouse;flambe.platform.html.HtmlMouse.__name__=["flambe","platform","html","HtmlMouse"];flambe.platform.html.HtmlMouse.__super__=flambe.platform.BasicMouse;flambe.platform.html.HtmlMouse.prototype=$extend(flambe.platform.BasicMouse.prototype,{set_cursor:function(cursor){var name;switch((cursor)[1]){case 0:name="";break;case 1:name="pointer";break;case 2:name="none";break;}
this._canvas.style.cursor=name;return flambe.platform.BasicMouse.prototype.set_cursor.call(this,cursor);},__class__:flambe.platform.html.HtmlMouse});flambe.platform.html.HtmlSound=function(audioElement){this.audioElement=audioElement;};$hxClasses["flambe.platform.html.HtmlSound"]=flambe.platform.html.HtmlSound;flambe.platform.html.HtmlSound.__name__=["flambe","platform","html","HtmlSound"];flambe.platform.html.HtmlSound.__interfaces__=[flambe.sound.Sound];flambe.platform.html.HtmlSound.prototype={get_duration:function(){return this.audioElement.duration;},loop:function(volume){if(volume==null)volume=1.0;return new flambe.platform.html._HtmlSound.HtmlPlayback(this,volume,true);},play:function(volume){if(volume==null)volume=1.0;return new flambe.platform.html._HtmlSound.HtmlPlayback(this,volume,false);},__class__:flambe.platform.html.HtmlSound,__properties__:{get_duration:"get_duration"}}
flambe.platform.html._HtmlSound={}
flambe.platform.html._HtmlSound.HtmlPlayback=function(sound,volume,loop){var _g=this;this._sound=sound;this._tickableAdded=false;this._clonedElement=js.Lib.document.createElement("audio");this._clonedElement.loop=loop;this._clonedElement.src=sound.audioElement.src;this.volume=new flambe.animation.AnimatedFloat(volume,function(_,_1){_g.updateVolume();});this.updateVolume();this.playAudio();};$hxClasses["flambe.platform.html._HtmlSound.HtmlPlayback"]=flambe.platform.html._HtmlSound.HtmlPlayback;flambe.platform.html._HtmlSound.HtmlPlayback.__name__=["flambe","platform","html","_HtmlSound","HtmlPlayback"];flambe.platform.html._HtmlSound.HtmlPlayback.__interfaces__=[flambe.platform.Tickable,flambe.sound.Playback];flambe.platform.html._HtmlSound.HtmlPlayback.prototype={updateVolume:function(){this._clonedElement.volume=flambe.System.volume.get__()*this.volume.get__();},playAudio:function(){var _g=this;this._clonedElement.play();if(!this._tickableAdded){flambe.platform.html.HtmlPlatform.instance.mainLoop.addTickable(this);this._tickableAdded=true;this._volumeBinding=flambe.System.volume.get_changed().connect(function(_,_1){_g.updateVolume();});}},dispose:function(){this.set_paused(true);},update:function(dt){this.volume.update(dt);if(this.get_ended()||this.get_paused()){this._tickableAdded=false;this._volumeBinding.dispose();return true;}
return false;},get_position:function(){return this._clonedElement.currentTime;},get_ended:function(){return this._clonedElement.ended;},set_paused:function(paused){if(this._clonedElement.paused!=paused){if(paused)this._clonedElement.pause();else this.playAudio();}
return paused;},get_paused:function(){return this._clonedElement.paused;},get_sound:function(){return this._sound;},__class__:flambe.platform.html._HtmlSound.HtmlPlayback,__properties__:{set_paused:"set_paused",get_paused:"get_paused",get_ended:"get_ended",get_position:"get_position",get_sound:"get_sound"}}
flambe.platform.html.HtmlStage=function(canvas){var _g=this;this._canvas=canvas;this.resize=new flambe.util.Signal0();this.scaleFactor=flambe.platform.html.HtmlStage.computeScaleFactor();if(this.scaleFactor!=1){flambe.Log.info("Reversing device DPI scaling",["scaleFactor",this.scaleFactor]);flambe.platform.html.HtmlUtil.setVendorStyle(this._canvas,"transform-origin","top left");flambe.platform.html.HtmlUtil.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")");}
if(flambe.platform.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER){window.addEventListener("orientationchange",function(){flambe.platform.html.HtmlUtil.callLater($bind(_g,_g.hideMobileBrowser),200);},false);this.hideMobileBrowser();}
window.addEventListener("resize",$bind(this,this.onWindowResize),false);this.onWindowResize();this.orientation=new flambe.util.Value(null);if(window.orientation!=null){window.addEventListener("orientationchange",$bind(this,this.onOrientationChange),false);this.onOrientationChange();}
this.fullscreen=new flambe.util.Value(false);flambe.platform.html.HtmlUtil.addVendorListener(js.Lib.document,"fullscreenchange",function(_){_g.updateFullscreen();},false);flambe.platform.html.HtmlUtil.addVendorListener(js.Lib.document,"fullscreenerror",function(_){flambe.Log.warn("Error when requesting fullscreen");},false);this.updateFullscreen();};$hxClasses["flambe.platform.html.HtmlStage"]=flambe.platform.html.HtmlStage;flambe.platform.html.HtmlStage.__name__=["flambe","platform","html","HtmlStage"];flambe.platform.html.HtmlStage.__interfaces__=[flambe.display.Stage];flambe.platform.html.HtmlStage.computeScaleFactor=function(){return 1;var devicePixelRatio=window.devicePixelRatio;if(devicePixelRatio==null)devicePixelRatio=1;var canvas=js.Lib.document.createElement("canvas");var ctx=canvas.getContext("2d");var backingStorePixelRatio=flambe.platform.html.HtmlUtil.loadExtension("backingStorePixelRatio",ctx).value;if(backingStorePixelRatio==null)backingStorePixelRatio=1;var scale=devicePixelRatio/backingStorePixelRatio;var screenWidth=screen.width;var screenHeight=screen.height;if(scale*screenWidth>1024||scale*screenHeight>1024)return 1;return scale;}
flambe.platform.html.HtmlStage.prototype={updateFullscreen:function(){var state=flambe.platform.html.HtmlUtil.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],js.Lib.document).value;this.fullscreen.set__(state==true);},onOrientationChange:function(){var value=flambe.platform.html.HtmlUtil.orientation(window.orientation);this.orientation.set__(value);},hideMobileBrowser:function(){var _g=this;var mobileAddressBar=100;var htmlStyle=js.Lib.document.documentElement.style;htmlStyle.height=js.Lib.window.innerHeight+mobileAddressBar+"px";htmlStyle.width=js.Lib.window.innerWidth+"px";htmlStyle.overflow="visible";flambe.platform.html.HtmlUtil.callLater(function(){flambe.platform.html.HtmlUtil.hideMobileBrowser();flambe.platform.html.HtmlUtil.callLater(function(){htmlStyle.height=js.Lib.window.innerHeight+"px";_g.onWindowResize();},100);});},resizeCanvas:function(width,height){var scaledWidth=this.scaleFactor*width;var scaledHeight=this.scaleFactor*height;if(this._canvas.width==scaledWidth&&this._canvas.height==scaledHeight)return false;this._canvas.width=scaledWidth;this._canvas.height=scaledHeight;this.resize.emit();return true;},onWindowResize:function(){var container=this._canvas.parentNode;var rect=container.getBoundingClientRect();this.resizeCanvas(rect.width,rect.height);},requestFullscreen:function(enable){if(enable==null)enable=true;if(enable){var documentElement=js.Lib.document.documentElement;var requestFullscreen=flambe.platform.html.HtmlUtil.loadFirstExtension(["requestFullscreen","requestFullScreen"],documentElement).value;if(requestFullscreen!=null)Reflect.callMethod(documentElement,requestFullscreen,[]);}else{var cancelFullscreen=flambe.platform.html.HtmlUtil.loadFirstExtension(["cancelFullscreen","cancelFullScreen"],js.Lib.document).value;if(cancelFullscreen!=null)Reflect.callMethod(js.Lib.document,cancelFullscreen,[]);}},requestResize:function(width,height){if(this.resizeCanvas(width,height)){var container=this._canvas.parentNode;container.style.width=width+"px";container.style.height=height+"px";}},unlockOrientation:function(){},lockOrientation:function(orient){},get_fullscreenSupported:function(){return flambe.platform.html.HtmlUtil.loadFirstExtension(["fullscreenEnabled","fullScreenEnabled"],js.Lib.document).value==true;},get_height:function(){return this._canvas.height;},get_width:function(){return this._canvas.width;},__class__:flambe.platform.html.HtmlStage,__properties__:{get_width:"get_width",get_height:"get_height",get_fullscreenSupported:"get_fullscreenSupported"}}
flambe.platform.html.HtmlStorage=function(storage){this._storage=storage;};$hxClasses["flambe.platform.html.HtmlStorage"]=flambe.platform.html.HtmlStorage;flambe.platform.html.HtmlStorage.__name__=["flambe","platform","html","HtmlStorage"];flambe.platform.html.HtmlStorage.__interfaces__=[flambe.storage.Storage];flambe.platform.html.HtmlStorage.prototype={clear:function(){try{this._storage.clear();}catch(error){flambe.Log.warn("localStorage.clear failed",["message",error.message]);}},remove:function(key){try{this._storage.removeItem("flambe:"+key);}catch(error){flambe.Log.warn("localStorage.removeItem failed",["message",error.message]);}},get:function(key,defaultValue){var encoded=null;try{encoded=this._storage.getItem("flambe:"+key);}catch(error){flambe.Log.warn("localStorage.getItem failed",["message",error.message]);}
if(encoded!=null)try{return haxe.Unserializer.run(encoded);}catch(error){flambe.Log.warn("Storage unserialization failed",["message",error]);}
return defaultValue;},set:function(key,value){var encoded;try{var serializer=new haxe.Serializer();serializer.useCache=true;serializer.useEnumIndex=false;serializer.serialize(value);encoded=serializer.toString();}catch(error){flambe.Log.warn("Storage serialization failed",["message",error]);return false;}
try{this._storage.setItem("flambe:"+key,encoded);}catch(error){flambe.Log.warn("localStorage.setItem failed",["message",error.message]);return false;}
return true;},get_supported:function(){return true;},__class__:flambe.platform.html.HtmlStorage,__properties__:{get_supported:"get_supported"}}
flambe.platform.html.HtmlUtil=function(){}
$hxClasses["flambe.platform.html.HtmlUtil"]=flambe.platform.html.HtmlUtil;flambe.platform.html.HtmlUtil.__name__=["flambe","platform","html","HtmlUtil"];flambe.platform.html.HtmlUtil.callLater=function(func,delay){if(delay==null)delay=0;js.Lib.window.setTimeout(func,delay);}
flambe.platform.html.HtmlUtil.hideMobileBrowser=function(){js.Lib.window.scrollTo(1,0);}
flambe.platform.html.HtmlUtil.loadExtension=function(name,obj){if(obj==null)obj=js.Lib.window;var extension=Reflect.field(obj,name);if(extension!=null)return{prefix:null,field:name,value:extension};var capitalized=name.charAt(0).toUpperCase()+HxOverrides.substr(name,1,null);var _g=0,_g1=flambe.platform.html.HtmlUtil.VENDOR_PREFIXES;while(_g<_g1.length){var prefix=_g1[_g];++_g;var field=prefix+capitalized;var extension1=Reflect.field(obj,field);if(extension1!=null)return{prefix:prefix,field:field,value:extension1};}
return{prefix:null,field:null,value:null};}
flambe.platform.html.HtmlUtil.loadFirstExtension=function(names,obj){var _g=0;while(_g<names.length){var name=names[_g];++_g;var extension=flambe.platform.html.HtmlUtil.loadExtension(name,obj);if(extension.field!=null)return extension;}
return{prefix:null,field:null,value:null};}
flambe.platform.html.HtmlUtil.polyfill=function(name,obj){if(obj==null)obj=js.Lib.window;var value=flambe.platform.html.HtmlUtil.loadExtension(name,obj).value;if(value==null)return false;Reflect.setField(obj,name,value);return true;}
flambe.platform.html.HtmlUtil.setVendorStyle=function(element,name,value){var style=element.style;var _g=0,_g1=flambe.platform.html.HtmlUtil.VENDOR_PREFIXES;while(_g<_g1.length){var prefix=_g1[_g];++_g;style.setProperty("-"+prefix+"-"+name,value);}
style.setProperty(name,value);}
flambe.platform.html.HtmlUtil.addVendorListener=function(dispatcher,type,listener,useCapture){var _g=0,_g1=flambe.platform.html.HtmlUtil.VENDOR_PREFIXES;while(_g<_g1.length){var prefix=_g1[_g];++_g;dispatcher.addEventListener(prefix+type,listener,useCapture);}
dispatcher.addEventListener(type,listener,useCapture);}
flambe.platform.html.HtmlUtil.orientation=function(angle){switch(angle){case-90:case 90:return flambe.display.Orientation.Landscape;default:return flambe.display.Orientation.Portrait;}}
flambe.platform.html.HtmlUtil.now=function(){return Date.now();}
flambe.platform.html.HtmlUtil.createEmptyCanvas=function(width,height){var canvas=js.Lib.document.createElement("canvas");canvas.width=width;canvas.height=height;return canvas;}
flambe.platform.html.HtmlUtil.createCanvas=function(source){var canvas=flambe.platform.html.HtmlUtil.createEmptyCanvas(source.width,source.height);var ctx=canvas.getContext("2d");ctx.save();ctx.globalCompositeOperation="copy";ctx.drawImage(source,0,0);ctx.restore();return canvas;}
flambe.web={}
flambe.web.Web=function(){}
$hxClasses["flambe.web.Web"]=flambe.web.Web;flambe.web.Web.__name__=["flambe","web","Web"];flambe.web.Web.prototype={__class__:flambe.web.Web,__properties__:{get_supported:"get_supported"}}
flambe.platform.html.HtmlWeb=function(container){this._container=container;};$hxClasses["flambe.platform.html.HtmlWeb"]=flambe.platform.html.HtmlWeb;flambe.platform.html.HtmlWeb.__name__=["flambe","platform","html","HtmlWeb"];flambe.platform.html.HtmlWeb.__interfaces__=[flambe.web.Web];flambe.platform.html.HtmlWeb.prototype={openBrowser:function(url){js.Lib.window.open(url,"_blank");},createView:function(x,y,width,height){var iframe=js.Lib.document.createElement("iframe");iframe.style.position="absolute";iframe.style.border="0";iframe.scrolling="no";this._container.appendChild(iframe);var view=new flambe.platform.html.HtmlWebView(iframe,x,y,width,height);flambe.platform.html.HtmlPlatform.instance.mainLoop.addTickable(view);return view;},get_supported:function(){return true;},__class__:flambe.platform.html.HtmlWeb,__properties__:{get_supported:"get_supported"}}
flambe.web.WebView=function(){}
$hxClasses["flambe.web.WebView"]=flambe.web.WebView;flambe.web.WebView.__name__=["flambe","web","WebView"];flambe.web.WebView.__interfaces__=[flambe.util.Disposable];flambe.web.WebView.prototype={__class__:flambe.web.WebView}
flambe.platform.html.HtmlWebView=function(iframe,x,y,width,height){var _g=this;this.iframe=iframe;var onBoundsChanged=function(_,_1){_g.updateBounds();};this.x=new flambe.animation.AnimatedFloat(x,onBoundsChanged);this.y=new flambe.animation.AnimatedFloat(y,onBoundsChanged);this.width=new flambe.animation.AnimatedFloat(width,onBoundsChanged);this.height=new flambe.animation.AnimatedFloat(height,onBoundsChanged);this.updateBounds();this.url=new flambe.util.Value(null,function(url,_){_g.loadUrl(url);});this.error=new flambe.util.Signal1();};$hxClasses["flambe.platform.html.HtmlWebView"]=flambe.platform.html.HtmlWebView;flambe.platform.html.HtmlWebView.__name__=["flambe","platform","html","HtmlWebView"];flambe.platform.html.HtmlWebView.__interfaces__=[flambe.platform.Tickable,flambe.web.WebView];flambe.platform.html.HtmlWebView.prototype={loadUrl:function(url){if(this.iframe==null)return;this.iframe.src=url;},updateBounds:function(){if(this.iframe==null)return;this.iframe.style.left=this.x.get__()+"px";this.iframe.style.top=this.y.get__()+"px";this.iframe.width=this.width.get__();this.iframe.height=this.height.get__();},update:function(dt){this.x.update(dt);this.y.update(dt);this.width.update(dt);this.height.update(dt);return this.iframe==null;},dispose:function(){if(this.iframe==null)return;this.iframe.parentNode.removeChild(this.iframe);this.iframe=null;},__class__:flambe.platform.html.HtmlWebView}
flambe.platform.html.WebAudioSound=function(buffer){this.buffer=buffer;};$hxClasses["flambe.platform.html.WebAudioSound"]=flambe.platform.html.WebAudioSound;flambe.platform.html.WebAudioSound.__name__=["flambe","platform","html","WebAudioSound"];flambe.platform.html.WebAudioSound.__interfaces__=[flambe.sound.Sound];flambe.platform.html.WebAudioSound.__properties__={get_supported:"get_supported"}
flambe.platform.html.WebAudioSound.get_supported=function(){if(flambe.platform.html.WebAudioSound._detectSupport){flambe.platform.html.WebAudioSound._detectSupport=false;var AudioContext=flambe.platform.html.HtmlUtil.loadExtension("AudioContext").value;if(AudioContext!=null){flambe.platform.html.WebAudioSound.ctx=new AudioContext();flambe.platform.html.WebAudioSound.gain=(flambe.platform.html.WebAudioSound.ctx.createGain)?flambe.platform.html.WebAudioSound.ctx.createGain():flambe.platform.html.WebAudioSound.ctx.createGainNode();flambe.platform.html.WebAudioSound.gain.connect(flambe.platform.html.WebAudioSound.ctx.destination);flambe.System.volume.watch(function(volume,_){flambe.platform.html.WebAudioSound.gain.gain.value=volume;});}}
return flambe.platform.html.WebAudioSound.ctx!=null;}
flambe.platform.html.WebAudioSound.prototype={get_duration:function(){return this.buffer.duration;},loop:function(volume){if(volume==null)volume=1.0;return new flambe.platform.html._WebAudioSound.WebAudioPlayback(this,volume,true);},play:function(volume){if(volume==null)volume=1.0;return new flambe.platform.html._WebAudioSound.WebAudioPlayback(this,volume,false);},__class__:flambe.platform.html.WebAudioSound,__properties__:{get_duration:"get_duration"}}
flambe.platform.html._WebAudioSound={}
flambe.platform.html._WebAudioSound.WebAudioPlayback=function(sound,volume,loop){var _g=this;this._sound=sound;this._head=flambe.platform.html.WebAudioSound.gain;this._sourceNode=flambe.platform.html.WebAudioSound.ctx.createBufferSource();this._sourceNode.buffer=sound.buffer;this._sourceNode.loop=loop;(this._sourceNode.start)?this._sourceNode.start(0):this._sourceNode.noteOn(0);this.playAudio();this.volume=new flambe.animation.AnimatedFloat(volume,function(v,_){_g.setVolume(v);});if(volume!=1)this.setVolume(volume);};$hxClasses["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=flambe.platform.html._WebAudioSound.WebAudioPlayback;flambe.platform.html._WebAudioSound.WebAudioPlayback.__name__=["flambe","platform","html","_WebAudioSound","WebAudioPlayback"];flambe.platform.html._WebAudioSound.WebAudioPlayback.__interfaces__=[flambe.platform.Tickable,flambe.sound.Playback];flambe.platform.html._WebAudioSound.WebAudioPlayback.prototype={playAudio:function(){this._sourceNode.connect(this._head);this._startedAt=flambe.platform.html.WebAudioSound.ctx.currentTime;this._pausedAt=-1;if(!this._tickableAdded){this._tickableAdded=true;flambe.platform.html.HtmlPlatform.instance.mainLoop.addTickable(this);}},insertNode:function(head){if(!this.get_paused()){this._sourceNode.disconnect();this._sourceNode.connect(head);}
head.connect(this._head);this._head=head;},setVolume:function(volume){if(this._gainNode==null){this._gainNode=(flambe.platform.html.WebAudioSound.ctx.createGain)?flambe.platform.html.WebAudioSound.ctx.createGain():flambe.platform.html.WebAudioSound.ctx.createGainNode()
this.insertNode(this._gainNode);}
this._gainNode.gain.value=volume;},dispose:function(){this.set_paused(true);},update:function(dt){this.volume.update(dt);if(this.get_ended()||this.get_paused()){this._tickableAdded=false;return true;}
return false;},get_position:function(){if(this.get_ended())return this._sound.get_duration();else if(this.get_paused())return this._pausedAt;else{var elapsed=flambe.platform.html.WebAudioSound.ctx.currentTime-this._startedAt;return elapsed%this._sound.get_duration();}},get_ended:function(){return this._sourceNode.playbackState==3;},set_paused:function(paused){if(paused!=this.get_paused()){if(paused){this._sourceNode.disconnect();this._pausedAt=this.get_position();}else this.playAudio();}
return paused;},get_paused:function(){return this._pausedAt>=0;},get_sound:function(){return this._sound;},__class__:flambe.platform.html._WebAudioSound.WebAudioPlayback,__properties__:{set_paused:"set_paused",get_paused:"get_paused",get_ended:"get_ended",get_position:"get_position",get_sound:"get_sound"}}
flambe.scene={}
flambe.scene.Director=function(){this._height=-1;this._width=-1;this._transitor=null;this.scenes=[];this.occludedScenes=[];this._root=new flambe.Entity();};$hxClasses["flambe.scene.Director"]=flambe.scene.Director;flambe.scene.Director.__name__=["flambe","scene","Director"];flambe.scene.Director.getFrom=function(entity){return entity.getComponent("Director_0");}
flambe.scene.Director.__super__=flambe.Component;flambe.scene.Director.prototype=$extend(flambe.Component.prototype,{get_height:function(){return this._height<0?flambe.System.get_stage().get_height():this._height;},get_width:function(){return this._width<0?flambe.System.get_stage().get_width():this._width;},completeTransition:function(){if(this._transitor!=null){this._transitor.complete();this._transitor=null;this.invalidateVisibility();}},invalidateVisibility:function(){var ii=this.scenes.length;while(ii>0){var scene=this.scenes[--ii];var comp=flambe.scene.Scene.getFrom(scene);if(comp==null||comp.opaque)break;}
this.occludedScenes=this.scenes.length>0?this.scenes.slice(ii,this.scenes.length-1):[];var scene=this.get_topScene();if(scene!=null)this.show(scene);},show:function(scene){var events=flambe.scene.Scene.getFrom(scene);if(events!=null)events.shown.emit();},get_topScene:function(){var ll=this.scenes.length;return ll>0?this.scenes[ll-1]:null;},onUpdate:function(dt){if(this._transitor!=null&&this._transitor.update(dt))this.completeTransition();},onRemoved:function(){this.completeTransition();var _g=0,_g1=this.scenes;while(_g<_g1.length){var scene=_g1[_g];++_g;scene.dispose();}
this.scenes=[];this.occludedScenes=[];this._root.dispose();},onAdded:function(){this.owner.addChild(this._root);},get_name:function(){return "Director_0";},__class__:flambe.scene.Director});flambe.scene._Director={}
flambe.scene._Director.Transitor=function(){}
$hxClasses["flambe.scene._Director.Transitor"]=flambe.scene._Director.Transitor;flambe.scene._Director.Transitor.__name__=["flambe","scene","_Director","Transitor"];flambe.scene._Director.Transitor.prototype={complete:function(){this._transition.complete();this._onComplete();},update:function(dt){return this._transition.update(dt);},__class__:flambe.scene._Director.Transitor}
flambe.scene.Scene=function(opaque){if(opaque==null)opaque=true;this.opaque=opaque;this.shown=new flambe.util.Signal0();this.hidden=new flambe.util.Signal0();};$hxClasses["flambe.scene.Scene"]=flambe.scene.Scene;flambe.scene.Scene.__name__=["flambe","scene","Scene"];flambe.scene.Scene.getFrom=function(entity){return entity.getComponent("Scene_4");}
flambe.scene.Scene.__super__=flambe.Component;flambe.scene.Scene.prototype=$extend(flambe.Component.prototype,{get_name:function(){return "Scene_4";},__class__:flambe.scene.Scene});flambe.scene.Transition=function(){}
$hxClasses["flambe.scene.Transition"]=flambe.scene.Transition;flambe.scene.Transition.__name__=["flambe","scene","Transition"];flambe.scene.Transition.prototype={complete:function(){},update:function(dt){return true;},__class__:flambe.scene.Transition}
flambe.sound._Mixer={}
flambe.sound._Mixer.MixerSound=function(source,channels){this._source=source;this._channels=channels;this._playbacks=[];};$hxClasses["flambe.sound._Mixer.MixerSound"]=flambe.sound._Mixer.MixerSound;flambe.sound._Mixer.MixerSound.__name__=["flambe","sound","_Mixer","MixerSound"];flambe.sound._Mixer.MixerSound.__interfaces__=[flambe.util.Disposable,flambe.sound.Sound];flambe.sound._Mixer.MixerSound.prototype={dispose:function(){var _g=0,_g1=this._playbacks;while(_g<_g1.length){var playback=_g1[_g];++_g;playback.dispose();}
this._playbacks=[];},get_duration:function(){return this._source.get_duration();},findOpenChannel:function(){var _g1=0,_g=this._channels;while(_g1<_g){var ii=_g1++;var playback=this._playbacks[ii];if(playback==null||playback.get_ended())return ii;}
return-1;},playOrLoop:function(volume,loop){var channel=this.findOpenChannel();if(channel<0)return new flambe.platform.DummyPlayback(this);var playback=loop?this._source.loop(volume):this._source.play(volume);this._playbacks[channel]=playback;return playback;},loop:function(volume){if(volume==null)volume=1.0;return this.playOrLoop(volume,true);},play:function(volume){if(volume==null)volume=1.0;return this.playOrLoop(volume,false);},__class__:flambe.sound._Mixer.MixerSound,__properties__:{get_duration:"get_duration"}}
flambe.swf={}
flambe.swf.BitmapSprite=function(symbol){flambe.display.Sprite.call(this);this.symbol=symbol;this.anchorX.set__(symbol.anchorX);this.anchorY.set__(symbol.anchorY);};$hxClasses["flambe.swf.BitmapSprite"]=flambe.swf.BitmapSprite;flambe.swf.BitmapSprite.__name__=["flambe","swf","BitmapSprite"];flambe.swf.BitmapSprite.__super__=flambe.display.Sprite;flambe.swf.BitmapSprite.prototype=$extend(flambe.display.Sprite.prototype,{getNaturalHeight:function(){return this.symbol.height;},getNaturalWidth:function(){return this.symbol.width;},draw:function(g){g.drawSubImage(this.symbol.atlas,0,0,this.symbol.x,this.symbol.y,this.symbol.width,this.symbol.height);},__class__:flambe.swf.BitmapSprite});flambe.swf.Symbol=function(){}
$hxClasses["flambe.swf.Symbol"]=flambe.swf.Symbol;flambe.swf.Symbol.__name__=["flambe","swf","Symbol"];flambe.swf.Symbol.prototype={__class__:flambe.swf.Symbol,__properties__:{get_name:"get_name"}}
flambe.swf.BitmapSymbol=function(json,atlas){this._name=json.symbol;this.atlas=atlas;var rect=json.rect;this.x=rect[0];this.y=rect[1];this.width=rect[2];this.height=rect[3];var origin=json.origin;if(origin!=null){this.anchorX=origin[0];this.anchorY=origin[1];}else{this.anchorX=0;this.anchorY=0;}};$hxClasses["flambe.swf.BitmapSymbol"]=flambe.swf.BitmapSymbol;flambe.swf.BitmapSymbol.__name__=["flambe","swf","BitmapSymbol"];flambe.swf.BitmapSymbol.__interfaces__=[flambe.swf.Symbol];flambe.swf.BitmapSymbol.prototype={get_name:function(){return this._name;},createSprite:function(){return new flambe.swf.BitmapSprite(this);},__class__:flambe.swf.BitmapSymbol,__properties__:{get_name:"get_name"}}
flambe.swf.Library=function(pack,baseDir){this._symbols=new Hash();var json=haxe.Json.parse(pack.getFile(baseDir+"/library.json"));this.frameRate=json.frameRate;var movies=[];var _g=0,_g1=json.movies;while(_g<_g1.length){var movieObject=_g1[_g];++_g;var movie=new flambe.swf.MovieSymbol(this,movieObject);movies.push(movie);this._symbols.set(movie.get_name(),movie);}
var groups=json.textureGroups;if(groups[0].scaleFactor!=1||groups.length>1)flambe.Log.warn("Flambe doesn't support Flump's Additional Scale Factors. "+"Use Base Scales and load from different asset packs instead.");var atlases=groups[0].atlases;var _g=0;while(_g<atlases.length){var atlasObject=atlases[_g];++_g;var atlas=pack.getTexture(baseDir+"/"+flambe.util.Strings.removeFileExtension(atlasObject.file));var _g1=0,_g2=atlasObject.textures;while(_g1<_g2.length){var textureObject=_g2[_g1];++_g1;var bitmap=new flambe.swf.BitmapSymbol(textureObject,atlas);this._symbols.set(bitmap.get_name(),bitmap);}}
var _g=0;while(_g<movies.length){var movie=movies[_g];++_g;var _g1=0,_g2=movie.layers;while(_g1<_g2.length){var layer=_g2[_g1];++_g1;var _g3=0,_g4=layer.keyframes;while(_g3<_g4.length){var kf=_g4[_g3];++_g3;if(kf.symbolName!=null){var symbol=this._symbols.get(kf.symbolName);flambe.util.Assert.that(symbol!=null);if(layer.lastSymbol==null)layer.lastSymbol=symbol;else if(layer.lastSymbol!=symbol)layer.multipleSymbols=true;kf.symbol=symbol;}}}}};$hxClasses["flambe.swf.Library"]=flambe.swf.Library;flambe.swf.Library.__name__=["flambe","swf","Library"];flambe.swf.Library.prototype={getSymbol:function(symbolName){return this._symbols.get(symbolName);},__class__:flambe.swf.Library}
flambe.swf.MovieSprite=function(symbol){this._looped=null;flambe.display.Sprite.call(this);this.symbol=symbol;this.speed=new flambe.animation.AnimatedFloat(1);this._animators=flambe.util.Arrays.create(symbol.layers.length);var _g1=0,_g=this._animators.length;while(_g1<_g){var ii=_g1++;var layer=symbol.layers[ii];this._animators[ii]=new flambe.swf._MovieSprite.LayerAnimator(layer);}
this._frame=0;this._position=0;this["goto"](1);};$hxClasses["flambe.swf.MovieSprite"]=flambe.swf.MovieSprite;flambe.swf.MovieSprite.__name__=["flambe","swf","MovieSprite"];flambe.swf.MovieSprite.__super__=flambe.display.Sprite;flambe.swf.MovieSprite.prototype=$extend(flambe.display.Sprite.prototype,{get_looped:function(){if(this._looped==null)this._looped=new flambe.util.Signal0();return this._looped;},set_paused:function(paused){this._flags=flambe.util.BitSets.set(this._flags,1<<4,paused);return paused;},get_paused:function(){return flambe.util.BitSets.contains(this._flags,1<<4);},set_position:function(position){return this._position=flambe.math.FMath.clamp(position,0,this.symbol.duration);},'goto':function(newFrame){if(this._frame==newFrame)return;var wrapped=newFrame<this._frame;if(wrapped){var _g=0,_g1=this._animators;while(_g<_g1.length){var animator=_g1[_g];++_g;animator.changedKeyframe=true;animator.keyframeIdx=0;}}
var _g=0,_g1=this._animators;while(_g<_g1.length){var animator=_g1[_g];++_g;animator.composeFrame(newFrame);}
this._frame=newFrame;},onUpdate:function(dt){flambe.display.Sprite.prototype.onUpdate.call(this,dt);this.speed.update(dt);var looped=false;if(!this.get_paused()){this._position+=this.speed.get__()*dt;if(this._position>this.symbol.duration){this._position=this._position%this.symbol.duration;looped=true;}}
var newFrame=this._position*this.symbol.frameRate;this["goto"](newFrame);if(looped&&this._looped!=null)this._looped.emit();},onRemoved:function(){flambe.display.Sprite.prototype.onRemoved.call(this);var _g=0,_g1=this._animators;while(_g<_g1.length){var animator=_g1[_g];++_g;this.owner.removeChild(animator.content);}},onAdded:function(){flambe.display.Sprite.prototype.onAdded.call(this);var _g=0,_g1=this._animators;while(_g<_g1.length){var animator=_g1[_g];++_g;this.owner.addChild(animator.content);}},__class__:flambe.swf.MovieSprite,__properties__:$extend(flambe.display.Sprite.prototype.__properties__,{set_position:"set_position",get_position:"get_position",set_paused:"set_paused",get_paused:"get_paused"})});flambe.swf._MovieSprite={}
flambe.swf._MovieSprite.LayerAnimator=function(layer){this._sprites=null;this.changedKeyframe=false;this.keyframeIdx=0;this.layer=layer;var sprite;if(layer.multipleSymbols){this._sprites=flambe.util.Arrays.create(layer.keyframes.length);var _g1=0,_g=this._sprites.length;while(_g1<_g){var ii=_g1++;var kf=layer.keyframes[ii];this._sprites[ii]=kf.symbol!=null?kf.symbol.createSprite():new flambe.display.Sprite();}
sprite=this._sprites[0];}else if(layer.lastSymbol!=null)sprite=layer.lastSymbol.createSprite();else sprite=new flambe.display.Sprite();this.content=new flambe.Entity().add(sprite);};$hxClasses["flambe.swf._MovieSprite.LayerAnimator"]=flambe.swf._MovieSprite.LayerAnimator;flambe.swf._MovieSprite.LayerAnimator.__name__=["flambe","swf","_MovieSprite","LayerAnimator"];flambe.swf._MovieSprite.LayerAnimator.prototype={composeFrame:function(frame){var keyframes=this.layer.keyframes;var finalFrame=keyframes.length-1;while(this.keyframeIdx<finalFrame&&keyframes[this.keyframeIdx+1].index<=frame){++this.keyframeIdx;this.changedKeyframe=true;}
var sprite;if(this.changedKeyframe&&this._sprites!=null){sprite=this._sprites[this.keyframeIdx];this.content.add(sprite);}else sprite=flambe.display.Sprite.getFrom(this.content);this.changedKeyframe=false;var kf=keyframes[this.keyframeIdx];var visible=kf.visible&&kf.symbol!=null;sprite.set_visible(visible);if(!visible)return;var x=kf.x;var y=kf.y;var scaleX=kf.scaleX;var scaleY=kf.scaleY;var skewX=kf.skewX;var skewY=kf.skewY;var alpha=kf.alpha;if(kf.tweened&&this.keyframeIdx<finalFrame){var interp=(frame-kf.index)/kf.duration;var ease=kf.ease;if(ease!=0){var t;if(ease<0){var inv=1-interp;t=1-inv*inv;ease=-ease;}else t=interp*interp;interp=ease*t+(1-ease)*interp;}
var nextKf=keyframes[this.keyframeIdx+1];x+=(nextKf.x-x)*interp;y+=(nextKf.y-y)*interp;scaleX+=(nextKf.scaleX-scaleX)*interp;scaleY+=(nextKf.scaleY-scaleY)*interp;skewX+=(nextKf.skewX-skewX)*interp;skewY+=(nextKf.skewY-skewY)*interp;alpha+=(nextKf.alpha-alpha)*interp;}
var matrix=sprite.getLocalMatrix();var sinX=Math.sin(skewX),cosX=Math.cos(skewX);var sinY=Math.sin(skewY),cosY=Math.cos(skewY);matrix.set(cosY*scaleX,sinY*scaleX,-sinX*scaleY,cosX*scaleY,x,y);matrix.translate(-kf.pivotX,-kf.pivotY);sprite.alpha.set__(alpha);},__class__:flambe.swf._MovieSprite.LayerAnimator}
flambe.swf.MovieSymbol=function(lib,json){this._name=json.id;this.frameRate=lib.frameRate;this.frames=0;this.layers=flambe.util.Arrays.create(json.layers.length);var _g1=0,_g=this.layers.length;while(_g1<_g){var ii=_g1++;var layer=new flambe.swf.MovieLayer(json.layers[ii]);this.frames=Math.max(layer.get_frames(),this.frames);this.layers[ii]=layer;}
this.duration=this.frames/this.frameRate;};$hxClasses["flambe.swf.MovieSymbol"]=flambe.swf.MovieSymbol;flambe.swf.MovieSymbol.__name__=["flambe","swf","MovieSymbol"];flambe.swf.MovieSymbol.__interfaces__=[flambe.swf.Symbol];flambe.swf.MovieSymbol.prototype={createSprite:function(){return new flambe.swf.MovieSprite(this);},get_name:function(){return this._name;},__class__:flambe.swf.MovieSymbol,__properties__:{get_name:"get_name"}}
flambe.swf.MovieLayer=function(json){this.multipleSymbols=false;this.lastSymbol=null;this.name=json.name;var prevKf=null;this.keyframes=flambe.util.Arrays.create(json.keyframes.length);var _g1=0,_g=this.keyframes.length;while(_g1<_g){var ii=_g1++;prevKf=new flambe.swf.MovieKeyframe(json.keyframes[ii],prevKf);this.keyframes[ii]=prevKf;}};$hxClasses["flambe.swf.MovieLayer"]=flambe.swf.MovieLayer;flambe.swf.MovieLayer.__name__=["flambe","swf","MovieLayer"];flambe.swf.MovieLayer.prototype={get_frames:function(){var lastKf=this.keyframes[this.keyframes.length-1];return lastKf.index+Std["int"](lastKf.duration);},__class__:flambe.swf.MovieLayer,__properties__:{get_frames:"get_frames"}}
flambe.swf.MovieKeyframe=function(json,prevKf){this.ease=0;this.tweened=true;this.visible=true;this.alpha=1;this.pivotY=0;this.pivotX=0;this.skewY=0;this.skewX=0;this.scaleY=1;this.scaleX=1;this.y=0;this.x=0;this.symbol=null;this.index=prevKf!=null?prevKf.index+prevKf.duration:0;this.duration=json.duration;this.label=json.label;this.symbolName=json.ref;var loc=json.loc;if(loc!=null){this.x=loc[0];this.y=loc[1];}
var scale=json.scale;if(scale!=null){this.scaleX=scale[0];this.scaleY=scale[1];}
var skew=json.skew;if(skew!=null){this.skewX=skew[0];this.skewY=skew[1];}
var pivot=json.pivot;if(pivot!=null){this.pivotX=pivot[0];this.pivotY=pivot[1];}
if(json.alpha!=null)this.alpha=json.alpha;if(json.visible!=null)this.visible=json.visible;if(json.tweened!=null)this.tweened=json.tweened;if(json.ease!=null)this.ease=json.ease;};$hxClasses["flambe.swf.MovieKeyframe"]=flambe.swf.MovieKeyframe;flambe.swf.MovieKeyframe.__name__=["flambe","swf","MovieKeyframe"];flambe.swf.MovieKeyframe.prototype={__class__:flambe.swf.MovieKeyframe}
flambe.util.Arrays=function(){}
$hxClasses["flambe.util.Arrays"]=flambe.util.Arrays;flambe.util.Arrays.__name__=["flambe","util","Arrays"];flambe.util.Arrays.create=function(length){return new Array(length);}
flambe.util.Assert=function(){}
$hxClasses["flambe.util.Assert"]=flambe.util.Assert;flambe.util.Assert.__name__=["flambe","util","Assert"];flambe.util.Assert.that=function(condition,message,fields){if(!condition)flambe.util.Assert.fail(message,fields);}
flambe.util.Assert.fail=function(message,fields){var error="Assertion failed!";if(message!=null)error+=" "+message;if(fields!=null)error=flambe.util.Strings.withFields(error,fields);throw error;}
flambe.util.BitSets=function(){}
$hxClasses["flambe.util.BitSets"]=flambe.util.BitSets;flambe.util.BitSets.__name__=["flambe","util","BitSets"];flambe.util.BitSets.add=function(bits,mask){return bits|mask;}
flambe.util.BitSets.remove=function(bits,mask){return bits&~mask;}
flambe.util.BitSets.contains=function(bits,mask){return(bits&mask)!=0;}
flambe.util.BitSets.containsAll=function(bits,mask){return(bits&mask)==mask;}
flambe.util.BitSets.set=function(bits,mask,enabled){return enabled?flambe.util.BitSets.add(bits,mask):flambe.util.BitSets.remove(bits,mask);}
flambe.util.LogLevel=$hxClasses["flambe.util.LogLevel"]={__ename__:["flambe","util","LogLevel"],__constructs__:["Info","Warn","Error"]}
flambe.util.LogLevel.Info=["Info",0];flambe.util.LogLevel.Info.toString=$estr;flambe.util.LogLevel.Info.__enum__=flambe.util.LogLevel;flambe.util.LogLevel.Warn=["Warn",1];flambe.util.LogLevel.Warn.toString=$estr;flambe.util.LogLevel.Warn.__enum__=flambe.util.LogLevel;flambe.util.LogLevel.Error=["Error",2];flambe.util.LogLevel.Error.toString=$estr;flambe.util.LogLevel.Error.__enum__=flambe.util.LogLevel;flambe.util.Promise=function(){this.success=new flambe.util.Signal1();this.error=new flambe.util.Signal1();this.progressChanged=new flambe.util.Signal0();this.hasResult=false;this._progress=0;this._total=0;};$hxClasses["flambe.util.Promise"]=flambe.util.Promise;flambe.util.Promise.__name__=["flambe","util","Promise"];flambe.util.Promise.prototype={get_total:function(){return this._total;},set_total:function(total){if(this._total!=total){this._total=total;this.progressChanged.emit();}
return total;},set_progress:function(progress){if(this._progress!=progress){this._progress=progress;this.progressChanged.emit();}
return progress;},get_progress:function(){return this._progress;},get:function(fn){if(this.hasResult){fn(this._result);return null;}
return this.success.connect(fn).once();},set_result:function(result){if(this.hasResult)throw "Promise result already assigned";this._result=result;this.hasResult=true;this.success.emit(result);return result;},get_result:function(){if(!this.hasResult)throw "Promise result not yet available";return this._result;},__class__:flambe.util.Promise,__properties__:{set_result:"set_result",get_result:"get_result",set_progress:"set_progress",get_progress:"get_progress",set_total:"set_total",get_total:"get_total"}}
flambe.util.Signal0=function(listener){flambe.util.SignalBase.call(this,listener);};$hxClasses["flambe.util.Signal0"]=flambe.util.Signal0;flambe.util.Signal0.__name__=["flambe","util","Signal0"];flambe.util.Signal0.__super__=flambe.util.SignalBase;flambe.util.Signal0.prototype=$extend(flambe.util.SignalBase.prototype,{emit:function(){this.emit0();},connect:function(listener,prioritize){if(prioritize==null)prioritize=false;return this.connectImpl(listener,prioritize);},__class__:flambe.util.Signal0});flambe.util._SignalBase={}
flambe.util._SignalBase.Task=function(fn){this.next=null;this.fn=fn;};$hxClasses["flambe.util._SignalBase.Task"]=flambe.util._SignalBase.Task;flambe.util._SignalBase.Task.__name__=["flambe","util","_SignalBase","Task"];flambe.util._SignalBase.Task.prototype={__class__:flambe.util._SignalBase.Task}
var haxe={}
haxe.Json=function(){};$hxClasses["haxe.Json"]=haxe.Json;haxe.Json.__name__=["haxe","Json"];haxe.Json.parse=function(text){return new haxe.Json().doParse(text);}
haxe.Json.prototype={parseString:function(){var start=this.pos;var buf=new StringBuf();while(true){var c=this.nextChar();if(c==34)break;if(c==92){buf.addSub(this.str,start,this.pos-start-1);c=this.nextChar();switch(c){case 114:buf.addChar(13);break;case 110:buf.addChar(10);break;case 116:buf.addChar(9);break;case 98:buf.addChar(8);break;case 102:buf.addChar(12);break;case 47:case 92:case 34:buf.addChar(c);break;case 117:var uc=Std.parseInt("0x"+HxOverrides.substr(this.str,this.pos,4));this.pos+=4;buf.addChar(uc);break;default:throw "Invalid escape sequence \\"+String.fromCharCode(c)+" at position "+(this.pos-1);}
start=this.pos;}else if(StringTools.isEOF(c))throw "Unclosed string";}
buf.addSub(this.str,start,this.pos-start-1);return buf.toString();},parseRec:function(){while(true){var c=this.nextChar();switch(c){case 32:case 13:case 10:case 9:break;case 123:var obj={},field=null,comma=null;while(true){var c1=this.nextChar();switch(c1){case 32:case 13:case 10:case 9:break;case 125:if(field!=null||comma==false)this.invalidChar();return obj;case 58:if(field==null)this.invalidChar();Reflect.setField(obj,field,this.parseRec());field=null;comma=true;break;case 44:if(comma)comma=false;else this.invalidChar();break;case 34:if(comma)this.invalidChar();field=this.parseString();break;default:this.invalidChar();}}
break;case 91:var arr=[],comma=null;while(true){var c1=this.nextChar();switch(c1){case 32:case 13:case 10:case 9:break;case 93:if(comma==false)this.invalidChar();return arr;case 44:if(comma)comma=false;else this.invalidChar();break;default:if(comma)this.invalidChar();this.pos--;arr.push(this.parseRec());comma=true;}}
break;case 116:var save=this.pos;if(this.nextChar()!=114||this.nextChar()!=117||this.nextChar()!=101){this.pos=save;this.invalidChar();}
return true;case 102:var save=this.pos;if(this.nextChar()!=97||this.nextChar()!=108||this.nextChar()!=115||this.nextChar()!=101){this.pos=save;this.invalidChar();}
return false;case 110:var save=this.pos;if(this.nextChar()!=117||this.nextChar()!=108||this.nextChar()!=108){this.pos=save;this.invalidChar();}
return null;case 34:return this.parseString();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 45:this.pos--;if(!this.reg_float.match(HxOverrides.substr(this.str,this.pos,null)))throw "Invalid float at position "+this.pos;var v=this.reg_float.matched(0);this.pos+=v.length;var f=Std.parseFloat(v);var i=Std["int"](f);return i==f?i:f;default:this.invalidChar();}}},nextChar:function(){return StringTools.fastCodeAt(this.str,this.pos++);},invalidChar:function(){this.pos--;throw "Invalid char "+StringTools.fastCodeAt(this.str,this.pos)+" at position "+this.pos;},doParse:function(str){this.reg_float=new EReg("^-?(0|[1-9][0-9]*)(\\.[0-9]+)?([eE][+-]?[0-9]+)?","");this.str=str;this.pos=0;return this.parseRec();},__class__:haxe.Json}
haxe.Serializer=function(){this.buf=new StringBuf();this.cache=new Array();this.useCache=haxe.Serializer.USE_CACHE;this.useEnumIndex=haxe.Serializer.USE_ENUM_INDEX;this.shash=new Hash();this.scount=0;};$hxClasses["haxe.Serializer"]=haxe.Serializer;haxe.Serializer.__name__=["haxe","Serializer"];haxe.Serializer.run=function(v){var s=new haxe.Serializer();s.serialize(v);return s.toString();}
haxe.Serializer.prototype={serialize:function(v){var $e=(Type["typeof"](v));switch($e[1]){case 0:this.buf.add("n");break;case 1:if(v==0){this.buf.add("z");return;}
this.buf.add("i");this.buf.add(v);break;case 2:if(Math.isNaN(v))this.buf.add("k");else if(!Math.isFinite(v))this.buf.add(v<0?"m":"p");else{this.buf.add("d");this.buf.add(v);}
break;case 3:this.buf.add(v?"t":"f");break;case 6:var c=$e[2];if(c==String){this.serializeString(v);return;}
if(this.useCache&&this.serializeRef(v))return;switch(c){case Array:var ucount=0;this.buf.add("a");var l=v.length;var _g=0;while(_g<l){var i=_g++;if(v[i]==null)ucount++;else{if(ucount>0){if(ucount==1)this.buf.add("n");else{this.buf.add("u");this.buf.add(ucount);}
ucount=0;}
this.serialize(v[i]);}}
if(ucount>0){if(ucount==1)this.buf.add("n");else{this.buf.add("u");this.buf.add(ucount);}}
this.buf.add("h");break;case List:this.buf.add("l");var v1=v;var $it0=v1.iterator();while($it0.hasNext()){var i=$it0.next();this.serialize(i);}
this.buf.add("h");break;case Date:var d=v;this.buf.add("v");this.buf.add(HxOverrides.dateStr(d));break;case Hash:this.buf.add("b");var v1=v;var $it1=v1.keys();while($it1.hasNext()){var k=$it1.next();this.serializeString(k);this.serialize(v1.get(k));}
this.buf.add("h");break;case IntHash:this.buf.add("q");var v1=v;var $it2=v1.keys();while($it2.hasNext()){var k=$it2.next();this.buf.add(":");this.buf.add(k);this.serialize(v1.get(k));}
this.buf.add("h");break;case haxe.io.Bytes:var v1=v;var i=0;var max=v1.length-2;var charsBuf=new StringBuf();var b64=haxe.Serializer.BASE64;while(i<max){var b1=v1.get(i++);var b2=v1.get(i++);var b3=v1.get(i++);charsBuf.add(b64.charAt(b1>>2));charsBuf.add(b64.charAt((b1<<4|b2>>4)&63));charsBuf.add(b64.charAt((b2<<2|b3>>6)&63));charsBuf.add(b64.charAt(b3&63));}
if(i==max){var b1=v1.get(i++);var b2=v1.get(i++);charsBuf.add(b64.charAt(b1>>2));charsBuf.add(b64.charAt((b1<<4|b2>>4)&63));charsBuf.add(b64.charAt(b2<<2&63));}else if(i==max+1){var b1=v1.get(i++);charsBuf.add(b64.charAt(b1>>2));charsBuf.add(b64.charAt(b1<<4&63));}
var chars=charsBuf.toString();this.buf.add("s");this.buf.add(chars.length);this.buf.add(":");this.buf.add(chars);break;default:this.cache.pop();if(v.hxSerialize!=null){this.buf.add("C");this.serializeString(Type.getClassName(c));this.cache.push(v);v.hxSerialize(this);this.buf.add("g");}else{this.buf.add("c");this.serializeString(Type.getClassName(c));this.cache.push(v);this.serializeFields(v);}}
break;case 4:if(this.useCache&&this.serializeRef(v))return;this.buf.add("o");this.serializeFields(v);break;case 7:var e=$e[2];if(this.useCache&&this.serializeRef(v))return;this.cache.pop();this.buf.add(this.useEnumIndex?"j":"w");this.serializeString(Type.getEnumName(e));if(this.useEnumIndex){this.buf.add(":");this.buf.add(v[1]);}else this.serializeString(v[0]);this.buf.add(":");var l=v.length;this.buf.add(l-2);var _g=2;while(_g<l){var i=_g++;this.serialize(v[i]);}
this.cache.push(v);break;case 5:throw "Cannot serialize function";break;default:throw "Cannot serialize "+Std.string(v);}},serializeFields:function(v){var _g=0,_g1=Reflect.fields(v);while(_g<_g1.length){var f=_g1[_g];++_g;this.serializeString(f);this.serialize(Reflect.field(v,f));}
this.buf.add("g");},serializeRef:function(v){var vt=typeof(v);var _g1=0,_g=this.cache.length;while(_g1<_g){var i=_g1++;var ci=this.cache[i];if(typeof(ci)==vt&&ci==v){this.buf.add("r");this.buf.add(i);return true;}}
this.cache.push(v);return false;},serializeString:function(s){var x=this.shash.get(s);if(x!=null){this.buf.add("R");this.buf.add(x);return;}
this.shash.set(s,this.scount++);this.buf.add("y");s=StringTools.urlEncode(s);this.buf.add(s.length);this.buf.add(":");this.buf.add(s);},toString:function(){return this.buf.toString();},__class__:haxe.Serializer}
haxe.Timer=function(time_ms){var me=this;this.id=window.setInterval(function(){me.run();},time_ms);};$hxClasses["haxe.Timer"]=haxe.Timer;haxe.Timer.__name__=["haxe","Timer"];haxe.Timer.delay=function(f,time_ms){var t=new haxe.Timer(time_ms);t.run=function(){t.stop();f();};return t;}
haxe.Timer.prototype={run:function(){},stop:function(){if(this.id==null)return;window.clearInterval(this.id);this.id=null;},__class__:haxe.Timer}
haxe.Unserializer=function(buf){this.buf=buf;this.length=buf.length;this.pos=0;this.scache=new Array();this.cache=new Array();var r=haxe.Unserializer.DEFAULT_RESOLVER;if(r==null){r=Type;haxe.Unserializer.DEFAULT_RESOLVER=r;}
this.setResolver(r);};$hxClasses["haxe.Unserializer"]=haxe.Unserializer;haxe.Unserializer.__name__=["haxe","Unserializer"];haxe.Unserializer.initCodes=function(){var codes=new Array();var _g1=0,_g=haxe.Unserializer.BASE64.length;while(_g1<_g){var i=_g1++;codes[StringTools.fastCodeAt(haxe.Unserializer.BASE64,i)]=i;}
return codes;}
haxe.Unserializer.run=function(v){return new haxe.Unserializer(v).unserialize();}
haxe.Unserializer.prototype={unserialize:function(){switch(this.get(this.pos++)){case 110:return null;case 116:return true;case 102:return false;case 122:return 0;case 105:return this.readDigits();case 100:var p1=this.pos;while(true){var c=this.get(this.pos);if(c>=43&&c<58||c==101||c==69)this.pos++;else break;}
return Std.parseFloat(HxOverrides.substr(this.buf,p1,this.pos-p1));case 121:var len=this.readDigits();if(this.get(this.pos++)!=58||this.length-this.pos<len)throw "Invalid string length";var s=HxOverrides.substr(this.buf,this.pos,len);this.pos+=len;s=StringTools.urlDecode(s);this.scache.push(s);return s;case 107:return Math.NaN;case 109:return Math.NEGATIVE_INFINITY;case 112:return Math.POSITIVE_INFINITY;case 97:var buf=this.buf;var a=new Array();this.cache.push(a);while(true){var c=this.get(this.pos);if(c==104){this.pos++;break;}
if(c==117){this.pos++;var n=this.readDigits();a[a.length+n-1]=null;}else a.push(this.unserialize());}
return a;case 111:var o={};this.cache.push(o);this.unserializeObject(o);return o;case 114:var n=this.readDigits();if(n<0||n>=this.cache.length)throw "Invalid reference";return this.cache[n];case 82:var n=this.readDigits();if(n<0||n>=this.scache.length)throw "Invalid string reference";return this.scache[n];case 120:throw this.unserialize();break;case 99:var name=this.unserialize();var cl=this.resolver.resolveClass(name);if(cl==null)throw "Class not found "+name;var o=Type.createEmptyInstance(cl);this.cache.push(o);this.unserializeObject(o);return o;case 119:var name=this.unserialize();var edecl=this.resolver.resolveEnum(name);if(edecl==null)throw "Enum not found "+name;var e=this.unserializeEnum(edecl,this.unserialize());this.cache.push(e);return e;case 106:var name=this.unserialize();var edecl=this.resolver.resolveEnum(name);if(edecl==null)throw "Enum not found "+name;this.pos++;var index=this.readDigits();var tag=Type.getEnumConstructs(edecl)[index];if(tag==null)throw "Unknown enum index "+name+"@"+index;var e=this.unserializeEnum(edecl,tag);this.cache.push(e);return e;case 108:var l=new List();this.cache.push(l);var buf=this.buf;while(this.get(this.pos)!=104)l.add(this.unserialize());this.pos++;return l;case 98:var h=new Hash();this.cache.push(h);var buf=this.buf;while(this.get(this.pos)!=104){var s=this.unserialize();h.set(s,this.unserialize());}
this.pos++;return h;case 113:var h=new IntHash();this.cache.push(h);var buf=this.buf;var c=this.get(this.pos++);while(c==58){var i=this.readDigits();h.set(i,this.unserialize());c=this.get(this.pos++);}
if(c!=104)throw "Invalid IntHash format";return h;case 118:var d=HxOverrides.strDate(HxOverrides.substr(this.buf,this.pos,19));this.cache.push(d);this.pos+=19;return d;case 115:var len=this.readDigits();var buf=this.buf;if(this.get(this.pos++)!=58||this.length-this.pos<len)throw "Invalid bytes length";var codes=haxe.Unserializer.CODES;if(codes==null){codes=haxe.Unserializer.initCodes();haxe.Unserializer.CODES=codes;}
var i=this.pos;var rest=len&3;var size=(len>>2)*3+(rest>=2?rest-1:0);var max=i+(len-rest);var bytes=haxe.io.Bytes.alloc(size);var bpos=0;while(i<max){var c1=codes[StringTools.fastCodeAt(buf,i++)];var c2=codes[StringTools.fastCodeAt(buf,i++)];bytes.set(bpos++,c1<<2|c2>>4);var c3=codes[StringTools.fastCodeAt(buf,i++)];bytes.set(bpos++,c2<<4|c3>>2);var c4=codes[StringTools.fastCodeAt(buf,i++)];bytes.set(bpos++,c3<<6|c4);}
if(rest>=2){var c1=codes[StringTools.fastCodeAt(buf,i++)];var c2=codes[StringTools.fastCodeAt(buf,i++)];bytes.set(bpos++,c1<<2|c2>>4);if(rest==3){var c3=codes[StringTools.fastCodeAt(buf,i++)];bytes.set(bpos++,c2<<4|c3>>2);}}
this.pos+=len;this.cache.push(bytes);return bytes;case 67:var name=this.unserialize();var cl=this.resolver.resolveClass(name);if(cl==null)throw "Class not found "+name;var o=Type.createEmptyInstance(cl);this.cache.push(o);o.hxUnserialize(this);if(this.get(this.pos++)!=103)throw "Invalid custom data";return o;default:}
this.pos--;throw "Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos;},unserializeEnum:function(edecl,tag){if(this.get(this.pos++)!=58)throw "Invalid enum format";var nargs=this.readDigits();if(nargs==0)return Type.createEnum(edecl,tag);var args=new Array();while(nargs-->0)args.push(this.unserialize());return Type.createEnum(edecl,tag,args);},unserializeObject:function(o){while(true){if(this.pos>=this.length)throw "Invalid object";if(this.get(this.pos)==103)break;var k=this.unserialize();if(!Std["is"](k,String))throw "Invalid object key";var v=this.unserialize();Reflect.setField(o,k,v);}
this.pos++;},readDigits:function(){var k=0;var s=false;var fpos=this.pos;while(true){var c=this.get(this.pos);if(StringTools.isEOF(c))break;if(c==45){if(this.pos!=fpos)break;s=true;this.pos++;continue;}
if(c<48||c>57)break;k=k*10+(c-48);this.pos++;}
if(s)k*=-1;return k;},get:function(p){return StringTools.fastCodeAt(this.buf,p);},setResolver:function(r){if(r==null)this.resolver={resolveClass:function(_){return null;},resolveEnum:function(_){return null;}};else this.resolver=r;},__class__:haxe.Unserializer}
haxe.io={}
haxe.io.Bytes=function(length,b){this.length=length;this.b=b;};$hxClasses["haxe.io.Bytes"]=haxe.io.Bytes;haxe.io.Bytes.__name__=["haxe","io","Bytes"];haxe.io.Bytes.alloc=function(length){var a=new Array();var _g=0;while(_g<length){var i=_g++;a.push(0);}
return new haxe.io.Bytes(length,a);}
haxe.io.Bytes.ofData=function(b){return new haxe.io.Bytes(b.length,b);}
haxe.io.Bytes.prototype={getData:function(){return this.b;},set:function(pos,v){this.b[pos]=v&255;},get:function(pos){return this.b[pos];},__class__:haxe.io.Bytes}
haxe.xml={}
haxe.xml._Fast={}
haxe.xml._Fast.NodeAccess=function(x){this.__x=x;};$hxClasses["haxe.xml._Fast.NodeAccess"]=haxe.xml._Fast.NodeAccess;haxe.xml._Fast.NodeAccess.__name__=["haxe","xml","_Fast","NodeAccess"];haxe.xml._Fast.NodeAccess.prototype={resolve:function(name){var x=this.__x.elementsNamed(name).next();if(x==null){var xname=this.__x.nodeType==Xml.Document?"Document":this.__x.getNodeName();throw xname+" is missing element "+name;}
return new haxe.xml.Fast(x);},__class__:haxe.xml._Fast.NodeAccess}
haxe.xml._Fast.AttribAccess=function(x){this.__x=x;};$hxClasses["haxe.xml._Fast.AttribAccess"]=haxe.xml._Fast.AttribAccess;haxe.xml._Fast.AttribAccess.__name__=["haxe","xml","_Fast","AttribAccess"];haxe.xml._Fast.AttribAccess.prototype={resolve:function(name){if(this.__x.nodeType==Xml.Document)throw "Cannot access document attribute "+name;var v=this.__x.get(name);if(v==null)throw this.__x.getNodeName()+" is missing attribute "+name;return v;},__class__:haxe.xml._Fast.AttribAccess}
haxe.xml._Fast.HasAttribAccess=function(x){this.__x=x;};$hxClasses["haxe.xml._Fast.HasAttribAccess"]=haxe.xml._Fast.HasAttribAccess;haxe.xml._Fast.HasAttribAccess.__name__=["haxe","xml","_Fast","HasAttribAccess"];haxe.xml._Fast.HasAttribAccess.prototype={resolve:function(name){if(this.__x.nodeType==Xml.Document)throw "Cannot access document attribute "+name;return this.__x.exists(name);},__class__:haxe.xml._Fast.HasAttribAccess}
haxe.xml._Fast.HasNodeAccess=function(x){this.__x=x;};$hxClasses["haxe.xml._Fast.HasNodeAccess"]=haxe.xml._Fast.HasNodeAccess;haxe.xml._Fast.HasNodeAccess.__name__=["haxe","xml","_Fast","HasNodeAccess"];haxe.xml._Fast.HasNodeAccess.prototype={resolve:function(name){return this.__x.elementsNamed(name).hasNext();},__class__:haxe.xml._Fast.HasNodeAccess}
haxe.xml._Fast.NodeListAccess=function(x){this.__x=x;};$hxClasses["haxe.xml._Fast.NodeListAccess"]=haxe.xml._Fast.NodeListAccess;haxe.xml._Fast.NodeListAccess.__name__=["haxe","xml","_Fast","NodeListAccess"];haxe.xml._Fast.NodeListAccess.prototype={resolve:function(name){var l=new List();var $it0=this.__x.elementsNamed(name);while($it0.hasNext()){var x=$it0.next();l.add(new haxe.xml.Fast(x));}
return l;},__class__:haxe.xml._Fast.NodeListAccess}
haxe.xml.Fast=function(x){if(x.nodeType!=Xml.Document&&x.nodeType!=Xml.Element)throw "Invalid nodeType "+Std.string(x.nodeType);this.x=x;this.node=new haxe.xml._Fast.NodeAccess(x);this.nodes=new haxe.xml._Fast.NodeListAccess(x);this.att=new haxe.xml._Fast.AttribAccess(x);this.has=new haxe.xml._Fast.HasAttribAccess(x);this.hasNode=new haxe.xml._Fast.HasNodeAccess(x);};$hxClasses["haxe.xml.Fast"]=haxe.xml.Fast;haxe.xml.Fast.__name__=["haxe","xml","Fast"];haxe.xml.Fast.prototype={getElements:function(){var it=this.x.elements();return{hasNext:$bind(it,it.hasNext),next:function(){var x=it.next();if(x==null)return null;return new haxe.xml.Fast(x);}};},getInnerHTML:function(){var s=new StringBuf();var $it0=this.x.iterator();while($it0.hasNext()){var x=$it0.next();s.add(x.toString());}
return s.toString();},getInnerData:function(){var it=this.x.iterator();if(!it.hasNext())throw this.getName()+" does not have data";var v=it.next();var n=it.next();if(n!=null){if(v.nodeType==Xml.PCData&&n.nodeType==Xml.CData&&StringTools.trim(v.getNodeValue())==""){var n2=it.next();if(n2==null||n2.nodeType==Xml.PCData&&StringTools.trim(n2.getNodeValue())==""&&it.next()==null)return n.getNodeValue();}
throw this.getName()+" does not only have data";}
if(v.nodeType!=Xml.PCData&&v.nodeType!=Xml.CData)throw this.getName()+" does not have data";return v.getNodeValue();},getName:function(){return this.x.nodeType==Xml.Document?"Document":this.x.getNodeName();},__class__:haxe.xml.Fast,__properties__:{get_name:"getName",get_innerData:"getInnerData"}}
haxe.xml.Parser=function(){}
$hxClasses["haxe.xml.Parser"]=haxe.xml.Parser;haxe.xml.Parser.__name__=["haxe","xml","Parser"];haxe.xml.Parser.parse=function(str){var doc=Xml.createDocument();haxe.xml.Parser.doParse(str,0,doc);return doc;}
haxe.xml.Parser.doParse=function(str,p,parent){if(p==null)p=0;var xml=null;var state=1;var next=1;var aname=null;var start=0;var nsubs=0;var nbrackets=0;var c=StringTools.fastCodeAt(str,p);while(!StringTools.isEOF(c)){switch(state){case 0:switch(c){case 10:case 13:case 9:case 32:break;default:state=next;continue;}
break;case 1:switch(c){case 60:state=0;next=2;break;default:start=p;state=13;continue;}
break;case 13:if(c==60){var child=Xml.createPCData(HxOverrides.substr(str,start,p-start));parent.addChild(child);nsubs++;state=0;next=2;}
break;case 17:if(c==93&&StringTools.fastCodeAt(str,p+1)==93&&StringTools.fastCodeAt(str,p+2)==62){var child=Xml.createCData(HxOverrides.substr(str,start,p-start));parent.addChild(child);nsubs++;p+=2;state=1;}
break;case 2:switch(c){case 33:if(StringTools.fastCodeAt(str,p+1)==91){p+=2;if(HxOverrides.substr(str,p,6).toUpperCase()!="CDATA[")throw "Expected <![CDATA[";p+=5;state=17;start=p+1;}else if(StringTools.fastCodeAt(str,p+1)==68||StringTools.fastCodeAt(str,p+1)==100){if(HxOverrides.substr(str,p+2,6).toUpperCase()!="OCTYPE")throw "Expected <!DOCTYPE";p+=8;state=16;start=p+1;}else if(StringTools.fastCodeAt(str,p+1)!=45||StringTools.fastCodeAt(str,p+2)!=45)throw "Expected <!--";else{p+=2;state=15;start=p+1;}
break;case 63:state=14;start=p;break;case 47:if(parent==null)throw "Expected node name";start=p+1;state=0;next=10;break;default:state=3;start=p;continue;}
break;case 3:if(!haxe.xml.Parser.isValidChar(c)){if(p==start)throw "Expected node name";xml=Xml.createElement(HxOverrides.substr(str,start,p-start));parent.addChild(xml);state=0;next=4;continue;}
break;case 4:switch(c){case 47:state=11;nsubs++;break;case 62:state=9;nsubs++;break;default:state=5;start=p;continue;}
break;case 5:if(!haxe.xml.Parser.isValidChar(c)){var tmp;if(start==p)throw "Expected attribute name";tmp=HxOverrides.substr(str,start,p-start);aname=tmp;if(xml.exists(aname))throw "Duplicate attribute";state=0;next=6;continue;}
break;case 6:switch(c){case 61:state=0;next=7;break;default:throw "Expected =";}
break;case 7:switch(c){case 34:case 39:state=8;start=p;break;default:throw "Expected \"";}
break;case 8:if(c==StringTools.fastCodeAt(str,start)){var val=HxOverrides.substr(str,start+1,p-start-1);xml.set(aname,val);state=0;next=4;}
break;case 9:p=haxe.xml.Parser.doParse(str,p,xml);start=p;state=1;break;case 11:switch(c){case 62:state=1;break;default:throw "Expected >";}
break;case 12:switch(c){case 62:if(nsubs==0)parent.addChild(Xml.createPCData(""));return p;default:throw "Expected >";}
break;case 10:if(!haxe.xml.Parser.isValidChar(c)){if(start==p)throw "Expected node name";var v=HxOverrides.substr(str,start,p-start);if(v!=parent.getNodeName())throw "Expected </"+parent.getNodeName()+">";state=0;next=12;continue;}
break;case 15:if(c==45&&StringTools.fastCodeAt(str,p+1)==45&&StringTools.fastCodeAt(str,p+2)==62){parent.addChild(Xml.createComment(HxOverrides.substr(str,start,p-start)));p+=2;state=1;}
break;case 16:if(c==91)nbrackets++;else if(c==93)nbrackets--;else if(c==62&&nbrackets==0){parent.addChild(Xml.createDocType(HxOverrides.substr(str,start,p-start)));state=1;}
break;case 14:if(c==63&&StringTools.fastCodeAt(str,p+1)==62){p++;var str1=HxOverrides.substr(str,start+1,p-start-2);parent.addChild(Xml.createProlog(str1));state=1;}
break;}
c=StringTools.fastCodeAt(str,++p);}
if(state==1){start=p;state=13;}
if(state==13){if(p!=start||nsubs==0)parent.addChild(Xml.createPCData(HxOverrides.substr(str,start,p-start)));return p;}
throw "Unexpected end";}
haxe.xml.Parser.isValidChar=function(c){return c>=97&&c<=122||c>=65&&c<=90||c>=48&&c<=57||c==58||c==46||c==95||c==45;}
function $iterator(o){if(o instanceof Array)return function(){return HxOverrides.iter(o);};return typeof(o.iterator)=='function'?$bind(o,o.iterator):o.iterator;};var $_;function $bind(o,m){var f=function(){return f.method.apply(f.scope,arguments);};f.scope=o;f.method=m;return f;};if(Array.prototype.indexOf)HxOverrides.remove=function(a,o){var i=a.indexOf(o);if(i==-1)return false;a.splice(i,1);return true;};else null;Math.__name__=["Math"];Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;$hxClasses.Math=Math;Math.isFinite=function(i){return isFinite(i);};Math.isNaN=function(i){return isNaN(i);};String.prototype.__class__=$hxClasses.String=String;String.__name__=["String"];Array.prototype.__class__=$hxClasses.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=$hxClasses.Date=Date;Date.__name__=["Date"];var Int=$hxClasses.Int={__name__:["Int"]};var Dynamic=$hxClasses.Dynamic={__name__:["Dynamic"]};var Float=$hxClasses.Float=Number;Float.__name__=["Float"];var Bool=$hxClasses.Bool=Boolean;Bool.__ename__=["Bool"];var Class=$hxClasses.Class={__name__:["Class"]};var Enum={};Xml.Element="element";Xml.PCData="pcdata";Xml.CData="cdata";Xml.Comment="comment";Xml.DocType="doctype";Xml.Prolog="prolog";Xml.Document="document";if(typeof document!="undefined")js.Lib.document=document;if(typeof window!="undefined"){js.Lib.window=window;js.Lib.window.onerror=function(msg,url,line){var f=js.Lib.onerror;if(f==null)return false;return f(msg,[url+":"+line]);};}
if(typeof(JSON)!="undefined")haxe.Json=JSON;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.CODE_UNLOCK="dumpling";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_WIDTH=960;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_HEIGHT=560;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_X=480;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.STAGE_CENTER_Y=280;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.TIMER_COMBO=3;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_SHALLOW=1;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.ATTACK_DEEP=2;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_SLOW_DISTANCE=50;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_DODGE_LOCATION_LEFT=-120;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_DODGE_LOCATION_RIGHT=1080;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_DODGE_LOCATION_BACK=150;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_LUNGE_LOCATION_FORWARD=60;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_DODGE_SPEED=.25;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_HEAD_BOB=10;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.FRAME_BUFFER=5;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_POSITION_LEFT=0;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_POSITION_MID=1;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_POSITION_RIGHT=2;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.PO_POSITION_BACK=3;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.FOCAL_LENGTH=100;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_BG="layer_bg";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_DUMMY="layer_dummy";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_PLAYER="layer_player";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.LAYER_FG="layer_fg";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_PAUSE="eventPause";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_UNPAUSE="eventUnpause";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_MUTE_TOGGLE="EVENT_MUTE_TOGGLE";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_WORLD_GENERATION_COMPLETE="EVENT_WORLD_GENERATION_COMPLETE";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_PO_ATTACK="EVENT_PO_ATTACK";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OP_ATTACK="EVENT_OP_ATTACK";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ATTACK_ALERT="EVENT_ATTACK_ALERT";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_PICKUP="EVENT_PICKUP";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_PICKUP_DONE="EVENT_PICKUP_DONE";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_DODGE_1="EVENT_TUTORIAL_DODGE_1";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_DODGE_2="EVENT_TUTORIAL_DODGE_2";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_DODGE_3="EVENT_TUTORIAL_DODGE_3";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_DODGE_4="EVENT_TUTORIAL_DODGE_4";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_TUTORIAL_COMBO="EVENT_TUTORIAL_COMBO";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OPPONENT_SKADOOSHED="EVENT_OPPONENT_SKADOOSHED";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_SKADOOSH_START="EVENT_SKADOOSH_START";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_SUMMARY_COMPLETE="EVENT_SUMMARY_COMPLETE";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ROUND_LOADED="EVENT_ROUND_LOADED";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_ROUND_START="EVENT_ROUND_START";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_OPPONENT_READY="EVENT_OPPONENT_READY";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_INPUT_FIELD_ENTER="EVENT_INPUT_FIELD_ENTER";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_DUMPLING_BURST="EVENT_DUMPLING_BURST";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_DUMPLING_EAT="EVENT_DUMPLING_EAT";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.EVENT_SCREEN_SHAKE="EVENT_SCREEN_SHAKE";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_GAME_LOSE="bool_game_lose";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_GAME_WIN="bool_game_win";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_LEVEL_LOSE="bool_level_lose";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_LEVEL_WIN="bool_level_win";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_GAMEOVER="bool_gameover";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_PAUSED="bool_paused";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_MUTED="bool_muted";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_INPUT_LOCK="bool_inputlock";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TOUCH_DEVICE="bool_touch_device";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_ORIENTATION_ALERT="bool_orientation_alert";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_LOCAL_TEXT_LOADED="bool_local_text_loaded";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_CODE_SCREEN_OPEN="BOOL_CODE_SCREEN_OPEN";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_ATTACK_COMPLETE="bool_tutorial_attack_complete";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_1_COMPLETE="bool_tutorial_dodge_1_complete";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_2_COMPLETE="bool_tutorial_dodge_2_complete";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_3_COMPLETE="BOOL_TUTORIAL_DODGE_3_COMPLETE";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_DODGE_4_COMPLETE="BOOL_TUTORIAL_DODGE_4_COMPLETE";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_COMBO_COMPLETE="bool_tutorial_combo_complete";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_TUTORIAL_SKADOOSH_COMPLETE="bool_tutorial_skadoosh_complete";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.BOOL_CODE_UNLOCK="bool_code_unlock";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH="int_health";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_MAX="int_health_max";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT="int_health_opponent";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HEALTH_OPPONENT_MAX="int_health_opponent_max";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_LIVES="int_lives";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SCORE="int_score";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_ROUND="int_round";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_COMBO="int_combo";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PO_COMBO="int_po_combo";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_PICKUPS="int_pickups";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_HIGHEST_COMBO="int_highest_combo";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SKADOOSH="int_skadoosh";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_SCORE_POOL="score_pool";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INT_LOADING_PROGRESS="int_loading_progress";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_CLICK="input_click";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_SPACE="input_space";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_Z="input_z";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_X="input_x";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_C="input_c";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_P="input_p";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_UP="input_up";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_DOWN="input_down";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_LEFT="input_left";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.INPUT_RIGHT="input_right";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.CONFIG_XML_PATH="config/config.xml";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.OPTION_SILENCE_AUDIO=false;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsApp.scaleFactor=1;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_LOADING="loadpanel";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_LOADING_OVERLAY="loadoverlay";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_SPLASH="splash";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_HELP="help";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_GAMEPLAY_HUD="gameplayhud";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_GAMEPLAY_MENU="gameplaymenu";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_QUIT_CONFIRM="quitconfirm";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_END_GAME="endgame";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_END_GAME_WIN="endgamewin";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_CUTSCENE_BORDERS="cutsceneborders";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_UNLOCK="unlock";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_PAUSE_ALERT="pause";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.SCREEN_END_ROUND="roundend";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_FADE=0;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL=1;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL_DOWN=2;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCROLL_UP=3;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_STAGED=4;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.TRANSITION_SCREENSHOT=5;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CHANGE_OPEN_BEGIN=0;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CHANGE_OPEN_COMPLETE=1;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CHANGE_CLOSE_BEGIN=2;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CHANGE_CLOSE_COMPLETE=3;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.OUTPUT_OPENED=0;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.OUTPUT_CLOSED=1;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_CLOSED_ALL=0;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_CLOSED_SPECIFIC=1;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_TRANSITION_MIDWAY=2;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_TRANSITION_COMPLETE=3;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.CONDITION_IMMEDIATE=4;com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_SPLASH_PLAY="FLOW_SPLASH_PLAY";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_HELP_CLOSE="FLOW_HELP_CLOSE";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_MENU="FLOW_GAMEPLAY_MENU";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE="FLOW_GAMEPLAY_MENU_CLOSE";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP="FLOW_GAMEPLAY_MENU_HELP";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT="FLOW_GAMEPLAY_MENU_QUIT";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES="FLOW_GAMEPLAY_QUIT_YES";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO="FLOW_GAMEPLAY_QUIT_NO";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN="FLOW_END_GAME_PLAY_AGAIN";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_BRANCH_GAME_WIN="FLOW_BRANCH_GAME_WIN";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_BRANCH_GAME_LOSE="FLOW_BRANCH_GAME_LOSE";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_BRANCH_LEVEL_LOSE="FLOW_BRANCH_LEVEL_LOSE";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_ENTER_CODE_CLOSE="FLOW_ENTER_CODE_CLOSE";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_ENTER_CODE_OPEN="FLOW_ENTER_CODE_OPEN";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_END_ROUND="FLOW_END_ROUND";com.nick.kung_fu_panda.boss_beat_down.data.ConstantsScreen.FLOW_END_ROUND_CLOSE="FLOW_END_ROUND_CLOSE";com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.UP="workinBtnUp";com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.DOWN="workinBtnDown";com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.CLICK="workinBtnClick";com.nick.kung_fu_panda.boss_beat_down.ui.buttons.ButtonBase.CANCEL_DRAG="workinBtnCancelDrag";com.workinman.display.Display.EVENT_UPDATE_DISPLAY="event_update_display";com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData.ACTION_STOP=0;com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData.ACTION_OPENED=1;com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData.ACTION_EVENT=2;com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData.ACTION_NEW_STATE=3;com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData.ACTION_CLOSED=4;com.nick.kung_fu_panda.boss_beat_down.ui.screens.data.ScreenStateData.ACTION_FLOW=5;com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_LEFT=-1;com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_RIGHT=1;com.nick.kung_fu_panda.boss_beat_down.world.elements.PlayerPo.DODGE_DIRECTION_BACK=2;com.workinman.data.ConstantsCloud.FONT_DEFAULT="Basic";com.workinman.data.ConstantsCloud.STRING_REGION_ID="cloudregionid";com.workinman.data.ConstantsCloud.LOCALIZATION_XML_PATH="config/";com.workinman.data.ConstantsCloud.EVENT_FILES_LOADED="EVENT_WORKINCLOUD_FILES_LOADED";com.workinman.data.ConstantsCloud.EVENT_FILES_LOADING="EVENT_FILES_LOADING";com.workinman.data.ConstantsCloud.EVENT_FILES_ERROR="EVENT_FILES_ERROR";com.workinman.data.ConstantsCloud.EVENT_TWEENS_COMPLETE="EVENT_TWEENS_COMPLETE";com.workinman.data.ConstantsCloud.EVENT_INPUT_ARBITRARY_KEY="EVENT_INPUT_ARBITRARY_KEY";com.workinman.data.ConstantsCloud._uniqueId=0;com.workinman.events.WMEventFlow.EVENT_FLOW="Nflow";com.workinman.events.WMEventInput.EVENT_INPUT="eventinput";com.workinman.events.WMEventInput.PHASE_DOWN=1;com.workinman.events.WMEventInput.PHASE_UP=0;com.workinman.events.WMEventInput.PHASE_MOVE=2;com.workinman.events.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT="Neio";com.workinman.events.WMEventScreenOut.EVENT_SCREEN_OUTPUT="Neso";com.workinman.events.WMEventUpdate.EVENT_UPDATE="eventupdate";com.workinman.math.tween.PennerManager.EASE_LINEAR="linear";com.workinman.math.tween.PennerManager.EASE="ease";com.workinman.math.tween.PennerManager.EASE_QUAD="quad";com.workinman.math.tween.PennerManager.EASE_IN="easeIn";com.workinman.math.tween.PennerManager.EASE_QUAD_IN="quadIn";com.workinman.math.tween.PennerManager.EASE_OUT="easeOut";com.workinman.math.tween.PennerManager.EASE_QUAD_OUT="quadOut";com.workinman.math.tween.PennerManager.EASE_EXPO="expo";com.workinman.math.tween.PennerManager.EASE_EXPO_IN="expoIn";com.workinman.math.tween.PennerManager.EASE_EXPO_OUT="expoOut";com.workinman.math.tween.PennerManager.EASE_ELASTIC="elastic";com.workinman.math.tween.PennerManager.EASE_ELASTIC_IN="elasticIn";com.workinman.math.tween.PennerManager.EASE_ELASTIC_OUT="elasticOut";com.workinman.math.tween.PennerManager.EASE_BUMP="bump";com.workinman.math.tween.PennerManager.EASE_BUMP_IN="bumpIn";com.workinman.math.tween.PennerManager.EASE_BUMP_OUT="bumpOut";com.workinman.math.tween.PennerManager.EASE_BOUNCE="bounce";com.workinman.math.tween.PennerManager.EASE_BOUNCE_IN="bounceIn";com.workinman.math.tween.PennerManager.EASE_BOUNCE_OUT="bounceOut";com.workinman.math.tween.PennerManager.EASE_CUBIC="cubic";com.workinman.math.tween.PennerManager.EASE_CUBIC_IN="cubicIn";com.workinman.math.tween.PennerManager.EASE_CUBIC_OUT="cubicOut";com.workinman.math.tween.PennerManager.EASE_SPACE="space";com.workinman.math.tween.PennerManager.EASE_SPACE_IN="spaceIn";com.workinman.math.tween.PennerManager.EASE_SPACE_OUT="spaceOut";com.workinman.math.tween.PennerManager.EASE_BLAST="blast";com.workinman.math.tween.PennerManager.EASE_BLAST_IN="blastIn";com.workinman.math.tween.PennerManager.EASE_BLAST_OUT="blastOut";com.workinman.math.tween.PennerManager.EASE_WAVE="wave";com.workinman.math.tween.PennerManager.EASE_WAVE_IN="waveIn";com.workinman.math.tween.PennerManager.EASE_WAVE_OUT="waveOut";com.workinman.math.tween.PennerManager.EASE_CIRCLE="circle";com.workinman.math.tween.PennerManager.EASE_CIRCLE_IN="circleIn";com.workinman.math.tween.PennerManager.EASE_CIRCLE_OUT="circleOut";com.workinman.services.ServiceAnalytics._offlineUserId="";com.workinman.services.ServiceAnalytics._offlineTrackingId="";com.workinman.services.ServiceAnalytics._appId="";com.workinman.services.ServiceAnalytics._sessionId="";com.workinman.services.ServiceAnalytics._canadaShowGameTitle="";com.workinman.services.ServiceAnalytics._flagInitted=false;com.workinman.services.ServiceAnalytics._flagStarted=false;com.workinman.services.ServiceAnalytics._flagLoaded=false;com.workinman.services.ServiceAnalytics._flagCanadaTrackingEnabled=false;com.workinman.services.ServiceAnalytics._DEFAULT_SHARED_OBJECT_ID="nkcimocuresid";com.workinman.services.ServiceAnalytics.OPTION_ENABLE_TRACKING=true;com.workinman.utils.WMPointer._DELTA_ALLOWANCE=30;com.workinman.utils.WMPointer._DELTA_TIMEOUT=.2;com.workinman.utils.WMSound.FADE_NONE=0;com.workinman.utils.WMSound.FADE_IN=1;com.workinman.utils.WMSound.FADE_OUT=-1;com.workinman.utils.WorkinCloud.instance=new com.workinman.utils.WorkinCloud();flambe.platform.html.HtmlPlatform.instance=new flambe.platform.html.HtmlPlatform();flambe.util.SignalBase.DISPATCHING_SENTINEL=new flambe.util.SignalConnection(null,null);flambe.System.root=new flambe.Entity();flambe.System.uncaughtError=new flambe.util.Signal1();flambe.System.hidden=new flambe.util.Value(false);flambe.System.hasGPU=new flambe.util.Value(false);flambe.System.volume=new flambe.animation.AnimatedFloat(1);flambe.System._platform=flambe.platform.html.HtmlPlatform.instance;flambe.System._calledInit=false;flambe.Log.logger=flambe.System.createLogger("flambe");flambe.asset.Manifest._buildManifest=flambe.asset.Manifest.createBuildManifests();flambe.asset.Manifest._supportsCrossOrigin=(function(){var blacklist=new EReg("\\b(Android)\\b","");if(blacklist.match(js.Lib.window.navigator.userAgent))return false;var xhr=new XMLHttpRequest();return xhr.withCredentials!=null;})();flambe.display.Sprite._scratchPoint=new flambe.math.Point();flambe.platform.BasicKeyboard._sharedEvent=new flambe.input.KeyboardEvent();flambe.platform.BasicMouse._sharedEvent=new flambe.input.MouseEvent();flambe.platform.BasicPointer._sharedEvent=new flambe.input.PointerEvent();flambe.platform.html.CanvasRenderer.CANVAS_TEXTURES=(function(){var pattern=new EReg("(iPhone|iPod|iPad)","");return pattern.match(js.Lib.window.navigator.userAgent);})();flambe.platform.html.HtmlAssetPackLoader._mediaRefCount=0;flambe.platform.html.HtmlAssetPackLoader._detectBlobSupport=true;flambe.platform.html.HtmlUtil.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];flambe.platform.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER=js.Lib.window.top==js.Lib.window&&new EReg("Mobile(/.*)? Safari","").match(js.Lib.window.navigator.userAgent);flambe.platform.html.WebAudioSound._detectSupport=true;haxe.Serializer.USE_CACHE=false;haxe.Serializer.USE_ENUM_INDEX=false;haxe.Serializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";haxe.Unserializer.DEFAULT_RESOLVER=Type;haxe.Unserializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";com.nick.kung_fu_panda.boss_beat_down.DocumentApp.main();})();