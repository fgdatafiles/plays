!function(){var a=include("createjs.Tween"),b=include("createjs.Bitmap"),c=include("createjs.Container"),d=function(){this.update=this.update.bind(this),this.stopAnimation=this.stopAnimation.bind(this),this.doFireArr=[],this.fireCountArr=[],this.fireArr=[],this.planetsArr=[]},e=d.prototype;e.startUserDefinedAnimation=function(a,b,c){this.animObj=a,createjs.Tween.removeTweens(a),a.rotation=0,a.x=c||3!=b?a.initX:a.initX-app.config.gameData.padWidth/2+50,a.y=c||3!=b?a.initY:a.initY-app.config.gameData.padHeight/2+50,a.scaleX=a.scaleY=a.initScale;var d,e,f,g;switch(b){case 0:createjs.Tween.get(a,{loop:!0}).to({scaleX:1.5*a.initScale,scaleY:1.5*a.initScale},1e3).to({scaleX:a.initScale,scaleY:a.initScale},1e3);break;case 1:f=c?app.config.scalingSize.maxWidth-a.x:400,d=3*f;var h=f/300*360;createjs.Tween.get(a).to({rotation:h,x:a.x+f},d).call(function(a){a.target.x=-400,a.target.rotation=0;var b="sticker"==a.target.name&&null!=a.target.name?app.config.scalingSize.maxWidth:1.1*app.config.gameData.padWidth,c=200+b,d=3*c,e=c/300*360;createjs.Tween.get(a.target,{loop:!0}).to({x:-200,rotation:0},10).to({x:c,rotation:e},d)});break;case 2:c||(a.x-=80);var i=c?[a.x,a.y,a.x+100,a.y+150,a.x+200,a.y+0,a.x+300,a.y-150,a.x+400,a.y+0,a.x+300,a.y+150,a.x+200,a.y+0,a.x+100,a.y-150,a.x,a.y]:[a.x,a.y,a.x+50,a.y+100,a.x+100,a.y+0,a.x+150,a.y-100,a.x+200,a.y+0,a.x+150,a.y+100,a.x+100,a.y+0,a.x+50,a.y-100,a.x,a.y];createjs.Tween.get(a,{loop:!0}).to({guide:{path:i}},7e3);break;case 3:c||(a.y+=300),f=Math.max(app.config.scalingSize.maxWidth-a.x,500);var j=a.y+100,k=c?[a.x,a.y,a.x+f/2,a.y-j,a.x+f,a.y-j]:[a.x,a.y,a.x+300,a.y-200,a.x+600,a.y-200];d=c?2*f:1200,createjs.Tween.get(a,{loop:!0}).to({guide:{path:k}},d).to({x:a.initX,y:a.initY},0);break;case 4:d=500,createjs.Tween.get(a,{loop:!0}).to({rotation:-30},d).to({rotation:0},d).to({rotation:30},d).to({rotation:0},d);break;case 5:c||(a.x-=180),f=c?1e3:300,d=2*f;var l=c?0:-180;createjs.Tween.get(a,{loop:!0}).to({x:a.x+f},d).to({x:a.initX+l},d);break;case 6:d=1e3,createjs.Tween.get(a,{loop:!0}).to({rotation:360},d);break;case 8:if("beach"==app.selectedScene)createjs.Tween.get(a.note1,{loop:!0}).to({guide:{path:[a.note1.initX,a.note1.initY,a.note1.initX+10,a.note1.initY+10,a.note1.initX+30,a.note1.initY-10,a.note1.initX+50,a.note1.initY-30,a.note1.initX+80,a.note1.initY-50],orient:"auto"}},2e3).wait(1010),createjs.Tween.get(a.note1,{loop:!0}).to({alpha:1},10).to({scaleX:1,scaleY:1},700).wait(800).to({scaleX:0,scaleY:0,alpha:0},500).wait(1e3),createjs.Tween.get(a.note2,{loop:!0}).to({guide:{path:[a.note2.initX,a.note2.initY,a.note2.initX+40,a.note2.initY-10,a.note2.initX+70,a.note2.initY-50],orient:"auto"}},2200).wait(810),createjs.Tween.get(a.note2,{loop:!0}).to({alpha:1},10).to({scaleX:1,scaleY:1},500).wait(1400).to({scaleX:0,scaleY:0,alpha:0},300).wait(500).wait(300),createjs.Tween.get(a.note3,{loop:!0}).wait(500).to({guide:{path:[a.note3.initX,a.note3.initY,a.note3.initX+30,a.note3.initY-30,a.note3.initX+80,a.note3.initY-60],orient:"auto"}},2200).wait(310),createjs.Tween.get(a.note3,{loop:!0}).wait(500).to({alpha:1},10).to({scaleX:1,scaleY:1},500).wait(1400).to({scaleX:0,scaleY:0,alpha:0},300).wait(300),createjs.Tween.get(a.note4,{loop:!0}).wait(800).to({guide:{path:[a.note4.initX,a.note4.initY,a.note4.initX+10,a.note4.initY-8,a.note4.initX+30,a.note4.initY-10,a.note4.initX+50,a.note4.initY-20,a.note4.initX+70,a.note4.initY-30],orient:"auto"}},2210),createjs.Tween.get(a.note4,{loop:!0}).wait(800).to({alpha:1},10).to({scaleX:1,scaleY:1},500).wait(1400).to({scaleX:0,scaleY:0,alpha:0},300),createjs.Tween.get(a.note5,{loop:!0}).wait(1200).to({guide:{path:[a.note5.initX,a.note5.initY,a.note5.initX+15,a.note5.initY-18,a.note5.initX+30,a.note5.initY-40],orient:"auto"}},1810),createjs.Tween.get(a.note5,{loop:!0}).wait(1200).to({alpha:1},10).to({scaleX:.7,scaleY:.7},200).wait(1400).to({scaleX:0,scaleY:0,alpha:0},300),createjs.Tween.get(a.note6,{loop:!0}).wait(900).to({guide:{path:[a.note6.initX,a.note6.initY,a.note6.initX+22,a.note6.initY-20,a.note6.initX+60,a.note6.initY-40],orient:"auto"}},2110),createjs.Tween.get(a.note6,{loop:!0}).wait(900).to({alpha:1},10).to({scaleX:.6,scaleY:.6},10).wait(1600).to({alpha:0},300);else if("carnival"==app.selectedScene)for(d=16e3,createjs.Tween.get(a.wheel,{loop:!0}).to({rotation:360},d),createjs.Tween.get(a.gondolaCont,{loop:!0}).to({rotation:360},d),g=0;g<a.gondolaArr.length;g++)createjs.Tween.get(a.gondolaArr[g],{loop:!0}).to({rotation:-360},d);else if("sky"==app.selectedScene){for(g=0;g<a.planetsArr.length;g++)a.planetsArr[g].currentDegree=a.planetsArr[g].initDegree,a.planetsArr[g].visible=!0;this.planetsArr.push(a),app.on("update",this.update)}else if("icecream"==app.selectedScene)a.rotation=-5,d=400,createjs.Tween.get(a,{loop:!0}).to({rotation:10},d).to({rotation:5},d).to({rotation:20},d).wait(d).to({rotation:5},d).to({rotation:10},d).to({rotation:-5},d).wait(500);else if("garden"==app.selectedScene)for(createjs.Tween.get(a.door,{loop:!0}).wait(100).to({scaleX:-.7},400).wait(2e3).to({scaleX:1},400).wait(400),createjs.Tween.get(a.fairy1,{loop:!0}).wait(500).to({x:a.fairy1.endPt[0],y:a.fairy1.endPt[1]},300).wait(1400).to({x:a.fairy1.initX,y:a.fairy1.initY},300).wait(800),createjs.Tween.get(a.fairy2,{loop:!0}).wait(700).to({x:a.fairy2.endPt[0],y:a.fairy2.endPt[1]},300).wait(2e3).to({x:a.fairy2.initX,y:a.fairy2.initY},300),g=0;g<a.flowersArr.length;g++)createjs.Tween.get(a.flowersArr[g],{loop:!0}).to({rotation:a.flowersArr[g].dir},3e3);break;case 9:if("beach"==app.selectedScene)d=900,e=350,createjs.Tween.get(a,{loop:!0}).to({guide:{path:[a.x,a.y,a.x+200,a.y-400,a.x+400,a.y]},scaleY:a.initScale,rotation:360},d).to({rotation:380,y:a.y-20},e).to({rotation:360,y:a.y},e).to({guide:{path:[a.x+400,a.y,a.x+200,a.y-400,a.x,a.y]},scaleY:a.initScale,rotation:20},d).to({rotation:10,y:a.y-20},e).to({rotation:0,y:a.y},e);else if("sky"==app.selectedScene)for(d=1e3,a.bulb.alpha=1,a.glow.alpha=1,createjs.Tween.get(a.bulb,{loop:!0}).to({alpha:.4},d).to({alpha:1},d).to({alpha:.7},d).to({alpha:1},d).wait(200),createjs.Tween.get(a.glow,{loop:!0}).to({alpha:.4},d).to({alpha:1},d).to({alpha:.7},d).to({alpha:1},d).wait(200),g=0;g<a.bugsArr.length;g++)createjs.Tween.get(a.bugsArr[g],{loop:!0}).to({x:a.bugsArr[g].targetPos[0],y:a.bugsArr[g].targetPos[1]},2e3),d=a.bugsArr[g].waitArr,e=2e3-d[0]-d[1]-600,g==a.bugsArr.length-1&&(a.bugsArr[g].alpha=1),createjs.Tween.get(a.bugsArr[g],{loop:!0}).wait(d[0]).to({alpha:1},300).wait(d[1]).to({alpha:0},300).wait(e);else"carnival"==app.selectedScene?(a.gnome.visible=!0,createjs.Tween.get(a.gnome,{loop:!0}).call(function(){a.gnome.gotoAndStop("carnival1_gnome1")}).to({x:143,y:317},1e3).call(function(){a.gnome.gotoAndStop("carnival1_gnome2")}).to({alpha:0,x:183,y:320},500).wait(700).call(function(){a.gnome.gotoAndStop("carnival1_gnome0"),a.gnome.x=a.gnome.initPos.x,a.gnome.y=a.gnome.initPos.y})):"icecream"==app.selectedScene?a.art.gotoAndPlay("icecream1"):"garden"==app.selectedScene&&(a.art.gotoAndPlay("garden1"),createjs.Tween.get(a,{loop:!0}).to({x:a.initX+200},2e3).to({scaleX:-1},0).to({x:a.initX},2e3).to({scaleX:1},0));break;case 10:if("carnival"==app.selectedScene)d=500,createjs.Tween.get(a.head,{loop:!0}).to({rotation:-10},d).to({rotation:0},d).to({rotation:10},d).to({rotation:0},d),createjs.Tween.get(a.tail,{loop:!0}).wait(500).to({rotation:-3},100).to({rotation:-38},d).to({rotation:-8},d).wait(1500),createjs.Tween.get(a.tail2,{loop:!0}).wait(500).to({rotation:25},100).to({rotation:0},d).to({rotation:-15},d).to({rotation:0},100).wait(1400);else if("icecream"==app.selectedScene){var m=a.cherry.y,n=a.cherry.y-180;a.art.visible=!1,a.rotation=-12,d=300,createjs.Tween.get(a,{loop:!0}).to({rotation:12},2*d).to({y:a.initY-10},300).to({y:a.initY},300).to({rotation:-12},2*d).to({y:a.initY-10},300).to({y:a.initY},300),createjs.Tween.get(a.scoop,{loop:!0}).to({y:-20},d).to({y:0},d).wait(600).to({y:-20},d).to({y:0},d).wait(600),createjs.Tween.get(a.syrup,{loop:!0}).to({y:-50},d).to({y:0},d).wait(600).to({y:-40},d).to({y:0},d).wait(600),createjs.Tween.get(a.cream,{loop:!0}).to({y:-80},d).to({y:0},d).wait(600).to({y:-60},d).to({y:0},d).wait(600),createjs.Tween.get(a.cherry,{loop:!0}).to({rotation:180,y:n},d).to({rotation:360,y:m},d).wait(600).to({rotation:180,y:n},d).to({rotation:0,y:m},d).wait(600)}else if("beach"==app.selectedScene)a.art.gotoAndPlay("beach2"),createjs.Tween.get(a,{loop:!0}).to({x:a.x+300},6e3).to({scaleX:-a.initScale},0).to({x:a.initX},6e3).to({scaleX:a.initScale},0);else if("sky"==app.selectedScene)a.fireIndx=this.fireCountArr.length,this.fireCountArr.push([0,0,0]),this.doFireArr.push([!1,!1,!1]),this.fireArr.push(a.fireArr),createjs.Tween.get(a.machineTop,{loop:!0}).to({rotation:5},100).to({rotation:-5},100).to({rotation:5},100).to({rotation:0},100).wait(2e3),createjs.Tween.get(a.machineBottom,{loop:!0}).to({rotation:5},100).to({rotation:-5},100).to({rotation:5},100).to({rotation:0},100).wait(2e3),createjs.Tween.get(a.firePtArr[0],{loop:!0}).wait(0).to({y:-100},500).to({alpha:0},100).call(function(a){var b=a.target.parent.fireIndx;for(this.doFireArr[b][0]=!0,this.fireCountArr[b][0]=0,a.target.parent.fireContArr[0].visible=!0,g=0;g<this.fireArr[b][0].length;g++)this.fireArr[b][0][g].orbit=this.fireArr[b][0][g].initOrbit,this.fireArr[b][0][g].x=Math.cos(this.fireArr[b][0][g].rad)*this.fireArr[b][0][g].orbit,this.fireArr[b][0][g].y=Math.sin(this.fireArr[b][0][g].rad)*this.fireArr[b][0][g].orbit,this.fireArr[b][0][g].alpha=1,this.fireArr[b][0][g].startFade=!1}.bind(this)).wait(1800).call(function(a){a.target.y=a.target.initY,a.target.alpha=1}),createjs.Tween.get(a.firePtArr[1],{loop:!0}).wait(200).to({x:a.firePtArr[1].initX-10,y:-30},500).to({alpha:0},100).call(function(a){var b=a.target.parent.fireIndx;for(this.doFireArr[b][1]=!0,this.fireCountArr[b][1]=0,a.target.parent.fireContArr[1].visible=!0,g=0;g<this.fireArr[b][1].length;g++)this.fireArr[b][1][g].orbit=this.fireArr[b][1][g].initOrbit,this.fireArr[b][1][g].x=Math.cos(this.fireArr[b][1][g].rad)*this.fireArr[b][1][g].orbit,this.fireArr[b][1][g].y=Math.sin(this.fireArr[b][1][g].rad)*this.fireArr[b][1][g].orbit,this.fireArr[b][1][g].alpha=1,this.fireArr[b][1][g].startFade=!1}.bind(this)).wait(1600).call(function(a){a.target.y=a.target.initY,a.target.alpha=1}),createjs.Tween.get(a.firePtArr[2],{loop:!0}).wait(400).to({x:a.firePtArr[2].initX-10,y:-90},500).to({alpha:0},100).call(function(a){var b=a.target.parent.fireIndx;for(this.doFireArr[b][2]=!0,this.fireCountArr[b][2]=0,a.target.parent.fireContArr[2].visible=!0,g=0;g<this.fireArr[b][2].length;g++)this.fireArr[b][2][g].orbit=this.fireArr[b][2][g].initOrbit,this.fireArr[b][2][g].x=Math.cos(this.fireArr[b][2][g].rad)*this.fireArr[b][2][g].orbit,this.fireArr[b][2][g].y=Math.sin(this.fireArr[b][2][g].rad)*this.fireArr[b][2][g].orbit,this.fireArr[b][2][g].alpha=1,this.fireArr[b][2][g].startFade=!1}.bind(this)).wait(1400).call(function(a){a.target.y=a.target.initY,a.target.alpha=1}),app.on("update",this.update);else if("garden"==app.selectedScene){var o,p,q,r,s=4100;for(createjs.Tween.get(a.can).to({rotation:-48},300),g=0;g<a.flowersArr.length;g++)d=a.flowersArr[g].wait,o=a.flowersArr[g].len,p=.7*o,q=s-d-600-p,r=s-d-o,createjs.Tween.get(a.flowersArr[g],{loop:!0}).wait(d).to({scaleX:a.flowersArr[g].maxScale,scaleY:a.flowersArr[g].maxScale},200).wait(p).to({alpha:0},400).wait(q),createjs.Tween.get(a.flowersArr[g],{loop:!0}).wait(d).to({x:a.flowersArr[g].initX+a.flowersArr[g].offset[0],y:a.flowersArr[g].initY+a.flowersArr[g].offset[1],rotation:a.flowersArr[g].maxRot},o).wait(r).call(function(a){a.target.x=a.target.initX,a.target.y=a.target.initY,a.target.rotation=0});for(g=0;g<a.sparklesArr.length;g++){var t=a.sparklesArr[g];d=t.wait,o=t.len,q=s-d-o,createjs.Tween.get(t,{loop:!0}).wait(d).to({scaleX:t.maxScale,scaleY:t.maxScale,x:t.initX+t.offset[0],y:t.initY+t.offset[1]},o).wait(q),createjs.Tween.get(t,{loop:!0}).wait(d+.5*o).to({alpha:0},.5*o).wait(q).call(function(a){a.target.x=a.target.initX,a.target.y=a.target.initY,a.target.alpha=1})}}break;case 11:if("beach"==app.selectedScene||"icecream"==app.selectedScene)a.art.gotoAndPlay(a.imgName);else if("carnival"==app.selectedScene)createjs.Tween.get(a.hatBodyCont,{loop:!0}).to({y:-50},300).to({y:-45},50).wait(1500).to({y:0},300).wait(1e3),createjs.Tween.get(a.hatLeft,{loop:!0}).wait(350).to({rotation:-58},150).to({rotation:-35},150).wait(1e3).to({rotation:0},300).wait(1200),createjs.Tween.get(a.hatRight,{loop:!0}).wait(350).to({rotation:93},150).to({rotation:75},150).wait(1e3).to({rotation:16},300).wait(1200),createjs.Tween.get(a.hatHeadCont,{loop:!0}).wait(350).to({rotation:6},1500).to({rotation:0},300).wait(1e3);else if("sky"==app.selectedScene){a.propeller.framerate=8,a.propeller.gotoAndPlay("sky3_propeller");var u=[923,690,535,226,-302],v=[0,-10,-60,-50,0],w=[],x=-1,y=0;for(g=0;g<u.length-1;g+=2){if(a.x>u[g]){x=g;break}if(y++,y>10)break}if(-1==x)w=[a.initX,a.initY,0,a.initY+10,u[4],a.initY+v[4]];else for(g=x;g<u.length;g++)w.push(g==x?a.initX:u[g],a.initY+v[g]);f=a.initX+Math.abs(u[4]),f=Math.abs(2.8*f),createjs.Tween.get(a).to({guide:{path:w}},f).call(function(a){a.target.x=1600,a.target.y=a.target.initY,a.target.rotation=11,createjs.Tween.get(a.target,{loop:!0}).to({rotation:11},0).to({guide:{path:[1600,a.target.initY+v[0],u[1],a.target.initY+v[1],u[2],a.target.initY+v[2]]},rotation:0},1500).to({guide:{path:[u[2],a.target.initY+v[2],u[2]-100,a.target.initY+v[2]-30,u[3],a.target.initY+v[3]]},rotation:-12},1e3).to({guide:{path:[u[3],a.target.initY+v[3],u[3]-100,a.target.initY+v[3]+20,u[4],a.target.initY+v[4]]},rotation:-12},1e3)})}else"garden"==app.selectedScene&&createjs.Tween.get(a,{loop:!0}).call(function(a){a.target.art.gotoAndPlay("garden3")}).wait(1600).to({x:a.initX+40,y:a.initY-10},25).to({x:a.initX+80,y:a.initY},250).wait(200).to({scaleX:-1},0).call(function(a){a.target.art.gotoAndPlay("garden3")}).wait(1600).to({x:a.initX+40,y:a.initY-10},250).to({x:a.initX,y:a.initY},250).wait(200).to({scaleX:1},0);break;case 12:if("icecream"==app.selectedScene)d=1e3,e=600,createjs.Tween.get(a,{loop:!0}).to({y:a.initY-20,rotation:7},200).to({rotation:14,y:a.initY},200).wait(300).to({y:a.initY-20,rotation:9},200).to({rotation:-5,y:a.initY},200).wait(100).to({rotation:2},500).to({rotation:0},200),createjs.Tween.get(a.pop7,{loop:!0}).to({x:-27.6,y:-47.9},200).to({x:0,y:0},700).wait(d),createjs.Tween.get(a.pop6,{loop:!0}).to({x:5,y:-35},200).to({x:0,y:0},700).wait(d),createjs.Tween.get(a.pop5,{loop:!0}).to({x:13,y:-64},200).to({x:0,y:0},700).wait(d),createjs.Tween.get(a.pop4,{loop:!0}).to({x:-2,y:-67},200).to({x:0,y:0},700).wait(d),createjs.Tween.get(a.pop1,{loop:!0}).wait(700).to({x:20,y:-30},200).to({x:0,y:0},400).wait(e),createjs.Tween.get(a.pop2,{loop:!0}).wait(700).to({x:-38,y:-40},200).to({x:0,y:0},400).wait(e),createjs.Tween.get(a.pop3,{loop:!0}).wait(700).to({x:-24,y:-50},200).to({x:0,y:0},400).wait(e);else if("beach"==app.selectedScene)createjs.Tween.get(a,{loop:!0}).to({guide:{path:[a.initX,a.initY,a.initX+30,a.initY+10,a.initX+52,a.initY+35]},rotation:11},400).to({guide:{path:[a.initX+52,a.initY+35,a.initX+86,a.initY+25,a.initX+130,a.initY+20]},rotation:-18},400).to({guide:{path:[a.initX+130,a.initY+20,a.initX+52,a.initY-4,a.initX,a.initY]},rotation:0},900);else if("carnival"==app.selectedScene)createjs.Tween.get(a,{loop:!0}).to({y:a.initY-30},1e3).to({y:a.initY},1e3);else if("garden"==app.selectedScene)for(d=200,flowerScale=1.3,this.waitArr=[200,0,300,500,600,400,100],g=0;g<a.flowersArr.length;g++)createjs.Tween.get(a.flowersArr[g],{loop:!0}).wait(this.waitArr[g]).to({scaleX:flowerScale,scaleY:flowerScale},d).to({scaleX:1,scaleY:1},d).wait(2e3).to({scaleX:flowerScale,scaleY:flowerScale},d).to({scaleX:0,scaleY:0},d).wait(2e3+(600-this.waitArr[g]));else if("sky"==app.selectedScene){this.waitArr=[0,60,200,400,700,900,1300,1400,1500];var z;for(g=0;g<a.partsArr.length;g++)z=a.partsArr[g],z.alpha=0,z.scaleX=z.scaleY=0,createjs.Tween.get(z,{loop:!0}).wait(this.waitArr[g]).to({alpha:1,scaleX:z.maxScale,scaleY:z.maxScale},400).to({alpha:0},200).wait(300+(1500-this.waitArr[g]));createjs.Tween.get(a.parts2Arr[0],{loop:!0}).to({scaleX:.9,scaleY:.9},800).to({scaleX:0,scaleY:0},500).wait(900),createjs.Tween.get(a.parts2Arr[1],{loop:!0}).to({scaleX:2,scaleY:2},1800).wait(400),createjs.Tween.get(a.parts2Arr[1],{loop:!0}).to({alpha:.8},1e3).wait(200).to({alpha:0},400).wait(600),createjs.Tween.get(a.parts2Arr[2],{loop:!0}).wait(200).to({scaleX:2,scaleY:2},1800).wait(200),createjs.Tween.get(a.parts2Arr[2],{loop:!0}).wait(200).to({alpha:.5},1e3).wait(200).to({alpha:0},400).wait(400)}break;case 13:a.art.gotoAndPlay(a.imgName);break;case 15:createjs.Tween.get(a.charBodyCont,{loop:!0}).to({rotation:-3},800).to({rotation:0},2500),createjs.Tween.get(a.charEyes,{loop:!0}).wait(900).to({scaleY:0},200).to({scaleY:1},200).wait(1100).to({scaleY:0},200).to({scaleY:1},200).wait(1200),createjs.Tween.get(a.charHeadCont,{loop:!0}).to({rotation:7},2e3).to({rotation:0},2e3),createjs.Tween.get(a.charArmL,{loop:!0}).to({rotation:-5},2e3).to({rotation:-13},2e3),createjs.Tween.get(a.charArmR,{loop:!0}).to({rotation:16},2900).to({rotation:14},1100);break;case 16:createjs.Tween.get(a.charHeadCont,{loop:!0}).wait(500).to({rotation:-5},1200).to({rotation:0},2300),createjs.Tween.get(a.charEyes,{loop:!0}).wait(50).to({scaleY:0},200).to({scaleY:1},200).wait(600).to({scaleY:0},200).to({scaleY:1},200).wait(2550),createjs.Tween.get(a.charArmL,{loop:!0}).to({rotation:-18},2400).to({rotation:-20},1800),createjs.Tween.get(a.charArmR,{loop:!0}).to({rotation:19},1600).to({rotation:22},2400);break;case 17:createjs.Tween.get(a.charBodyCont,{loop:!0}).to({rotation:2},1200).to({rotation:0},1e3).wait(1800),createjs.Tween.get(a.charHeadCont,{loop:!0}).to({rotation:5},900).wait(2200).to({rotation:0},900),createjs.Tween.get(a.charEyes,{loop:!0}).wait(1600).to({scaleY:0},200).to({scaleY:1},200).wait(2e3),createjs.Tween.get(a.charArmR,{loop:!0}).to({rotation:3},1100).to({rotation:0},1100).wait(1800);break;case 18:createjs.Tween.get(a.charBodyCont,{loop:!0}).to({rotation:-2},800).to({rotation:0},2200).wait(1e3),createjs.Tween.get(a.charHeadCont,{loop:!0}).wait(500).to({rotation:-5},500).to({rotation:0},700).wait(2300),createjs.Tween.get(a.charEyes,{loop:!0}).wait(1400).to({scaleY:0},200).to({scaleY:1},200).wait(1600).to({scaleY:0},200).to({scaleY:1},200).wait(200),createjs.Tween.get(a.charArmL,{loop:!0}).to({rotation:0},800).to({rotation:-6},1100).to({rotation:-7},600).wait(1500),createjs.Tween.get(a.charArmR,{loop:!0}).to({rotation:7},1300).to({rotation:9},2e3).wait(700);break;case 19:createjs.Tween.get(a.charBodyCont,{loop:!0}).wait(400).to({rotation:2},1300).to({rotation:0},1400).wait(900),createjs.Tween.get(a.charHeadCont,{loop:!0}).to({rotation:-6},1800).to({rotation:0},2200),createjs.Tween.get(a.charEyes,{loop:!0}).wait(1200).to({scaleY:0},200).to({scaleY:1},200).wait(1600).to({scaleY:0},200).to({scaleY:1},200).wait(400),createjs.Tween.get(a.charArmL,{loop:!0}).to({rotation:0},1500).to({rotation:-6},2300).wait(200),createjs.Tween.get(a.charArmR,{loop:!0}).to({rotation:8},900).to({rotation:10},1800).wait(1300);break;case 20:createjs.Tween.get(a.charBodyCont,{loop:!0}).to({rotation:3},1e3).to({rotation:0},1e3).wait(2e3),createjs.Tween.get(a.charHeadCont,{loop:!0}).to({rotation:5},1e3).to({rotation:-5},1400).to({rotation:0},600).wait(1e3),createjs.Tween.get(a.charHair,{loop:!0}).to({rotation:5},1e3).to({rotation:-5},1400).to({rotation:0},600).wait(1e3),createjs.Tween.get(a.charEyes,{loop:!0}).wait(50).to({scaleY:0},200).to({scaleY:1},200).wait(800).to({scaleY:0},200).to({scaleY:1},200).wait(2350),createjs.Tween.get(a.charArmL,{loop:!0}).to({rotation:-15},1200).to({rotation:-20},1500).wait(1300),createjs.Tween.get(a.charArmR,{loop:!0}).to({rotation:17},600).to({rotation:20},800).wait(2600)}},e.stopAnimation=function(){app.off("update",this.update),this.doFireArr=[],this.fireCountArr=[],this.fireArr=[],this.planetsArr=[]},e.update=function(a){var b,c,d,e,f,g;for(c=0;c<this.planetsArr.length;c++)for(d=0;d<this.planetsArr[c].planetsArr.length;d++)b=this.planetsArr[c].planetsArr[d],b.currentDegree+=b.speed/100,f=b.planetX-Math.cos(b.currentDegree)*b.orbitX,g=b.planetY+Math.sin(b.currentDegree)*b.orbitY,b.x=f,b.y=g;for(c=0;c<this.doFireArr.length;c++){var h=this.doFireArr[c].length;for(d=0;h>d;d++)if(this.doFireArr[c][d]){for(e=0;e<this.fireArr[c][d].length;e++)b=this.fireArr[c][d][e],b.orbit+=4,f=Math.cos(b.degree)*b.orbit,g=Math.sin(b.degree)*b.orbit,b.x=f,b.y=g,b.orbit>80&&!b.startFade&&(b.startFade=!0,createjs.Tween.get(b).to({alpha:0},100));b.orbit>=100&&b.startFade&&(b.startFade=!1,this.fireCountArr[c][d]++),this.fireCountArr[c][d]==this.fireArr[c][d].length&&(this.doFireArr[c][d]=!1)}}},e.sparkleMeMany=function(c,d,f,g){var h=300;images.Sparkle&&(c.spark1=new b(images[f.sparkle?f.sparkle:"Sparkle"]),c.spark1.regX=c.spark1.image.width/2,c.spark1.regY=c.spark1.image.width/2,d.addChild(c.spark1),e.setPosition(c.spark1,f.x,f.y),g||(c.spark1.initScale=f.init_scale?f.init_scale:1,c.spark1.scaleX=c.spark1.scaleY=1.5*c.spark1.initScale,a.get(c.spark1).wait(f.init_pause_fact*h).to({scaleX:0,scaleY:0,rotation:63,x:c.spark1.x+200*Math.random()-100,y:c.spark1.y+200*Math.random()-100},2.5*h).call(function(){f.keep||d.removeChildAt(0)})))},e.sparkle1Simple=function(c,d,f,g){var h=500;images.Sparkle&&(c.spark1=new b(images[f.sparkle?f.sparkle:"Sparkle"]),c.spark1.regX=c.spark1.image.width/2,c.spark1.regY=c.spark1.image.height/2,d.addChild(c.spark1),e.setPosition(c.spark1,f.x,f.y),c.spark1.initScale=f.init_scale?f.init_scale:1,c.spark1.scaleX=c.spark1.scaleY=c.spark1.initScale,g||(c.spark1.scaleX=c.spark1.scaleY=0,a.get(c.spark1).wait(f.init_pause_fact*h).to({scaleX:c.spark1.initScale,scaleY:c.spark1.initScale},2*h).call(function(){f.keep||d.removeChildAt(0)}),a.get(c.spark1).wait(f.init_pause_fact*h+1.5*h).to({alpha:0},.5*h)))},e.sparkle2Simple=function(c,d,f,g){var h=400;images.Sparkle&&(c.spark1=new b(images[f.sparkle?f.sparkle:"Sparkle"]),c.spark1.regX=c.spark1.image.width/2,c.spark1.regY=c.spark1.image.height/2,d.addChild(c.spark1),e.setPosition(c.spark1,f.x,f.y),c.spark1.initScale=f.init_scale?f.init_scale:1,c.spark1.scaleX=c.spark1.scaleY=c.spark1.initScale,g||(c.spark1.scaleX=c.spark1.scaleY=0,a.get(c.spark1).wait(f.init_pause_fact*h).to({scaleX:2*c.spark1.initScale,scaleY:2*c.spark1.initScale,x:f.x+f.endX,y:f.y+f.endY},2*h).call(function(){f.keep||d.removeChildAt(0)}),a.get(c.spark1).wait(f.init_pause_fact*h+1.5*h).to({alpha:0},.5*h)))},e.sparkleMe1=function(d,f,g){var h=300;images.Sparkle&&(d.sparkles=new c,d.spark1=new b(images.Sparkle),d.spark1.regX=d.spark1.image.width/2,d.spark1.regY=d.spark1.image.width/2,d.sparkles.addChild(d.spark1),d.addChild(d.sparkles),e.setPosition(d.spark1,0,0),f.x?e.setPosition(d.sparkles,f.x,f.y):e.setPosition(d.sparkles,940,620),g||(d.spark1.initScale=f.init_scale?f.init_scale:1,d.spark1.scaleX=d.spark1.scaleY=0,a.get(d.spark1).wait(f.init_pause_fact*h).to({scaleX:1*d.spark1.initScale,scaleY:1*d.spark1.initScale,x:75,y:75},0).wait(h).to({scaleX:0,scaleY:0,x:10,y:10},0).to({scaleX:.5*d.spark1.initScale,scaleY:.5*d.spark1.initScale,rotation:21},h).to({scaleX:1*d.spark1.initScale,scaleY:1*d.spark1.initScale,rotation:63},2*h).to({rotation:230},2*h).to({rotation:430,alpha:0,scaleX:1.5*d.spark1.initScale,scaleY:1.5*d.spark1.initScale},h)))},e.sparkleLoop=function(a,b){if(a.scaleX=a.scaleY=a.maxScale,!b){a.scaleX=a.scaleY=0,a.alpha=1;var c=a.maxTime?a.maxTime:4e3,d=c-a.wait1-900;createjs.Tween.get(a,{loop:!0}).wait(a.wait1).to({scaleX:a.maxScale,scaleY:a.maxScale},900).wait(d),createjs.Tween.get(a,{loop:!0}).wait(a.wait1+700).to({alpha:0},200).wait(d)}},e.sparkleMe3=function(d,f,g){var h=300,i=.75,j=.6;images.Sparkle&&(d.sparkles=new c,d.spark1=new b(images.Sparkle),d.spark2=new b(images.Sparkle2),d.spark3=new b(images.Sparkle3),d.spark1.regX=d.spark2.regX=d.spark3.regX=d.spark1.image.width/2,d.spark1.regY=d.spark2.regY=d.spark3.regY=d.spark1.image.width/2,d.spark2.rotation=22,d.spark3.rotation=-10,d.sparkles.addChild(d.spark1,d.spark2,d.spark3),d.addChild(d.sparkles),e.setPosition(d.spark1,0,0),e.setPosition(d.spark2,90,10),e.setPosition(d.spark3,-25,40),f?e.setPosition(d.sparkles,f.x,f.y):e.setPosition(d.sparkles,890,670),g||(d.spark1.scaleX=d.spark1.scaleY=0,d.spark2.scaleX=d.spark2.scaleY=0,d.spark3.scaleX=d.spark3.scaleY=0,a.get(d.spark1).wait(2.6*h).to({scaleX:1,scaleY:1,x:75,y:75},0).wait(h).to({scaleX:0,scaleY:0,x:10,y:10},0).to({scaleX:.5,scaleY:.5,rotation:21},h).to({scaleX:1,scaleY:1,rotation:63},2*h).to({rotation:230},2*h).to({rotation:430,alpha:0,scaleX:1.5,scaleY:1.5},h),a.get(d.spark2).wait(1.5*h).to({scaleX:1,scaleY:1},0).wait(h).to({scaleX:0,scaleY:0},0).to({scaleX:.5*i,scaleY:.5*i,rotation:21},.85*h).to({scaleX:1*i,scaleY:1*i,rotation:63},1.7*h).to({rotation:230},1.7*h).to({rotation:430,alpha:0,scaleX:2*i,scaleY:2*i},.85*h),a.get(d.spark3).to({scaleX:1,scaleY:1},0).wait(h).to({scaleX:0,scaleY:0},0).to({scaleX:.5*j,scaleY:.5*j,rotation:21},1.2*h).to({scaleX:1*j,scaleY:1*j,rotation:63},2.4*h).to({rotation:230},2.4*h).to({rotation:430,alpha:0,scaleX:2*j,scaleY:2*j},1.2*h)))},e.setPosition=function(a,b,c,d){a.x=b,a.y=c,d&&(d.x=b,d.y=c)},e.flashButton=function(a){var b=a.scaleX,c=a.scaleY;createjs.Tween.get(a).to({scaleX:1.1*b,scaleY:1.1*c},300).to({scaleX:1*b,scaleY:1*c},300)},namespace("WGBH").SharedAnimation=d}(),function(){var a=include("createjs.Container"),b=include("springroll.easeljs.Button"),c=function(b){a.call(this),this.chooseColor=this.chooseColor.bind(this),this.setup=this.setup.bind(this),this.startDrawing=this.startDrawing.bind(this),this.paintIt=this.paintIt.bind(this),this.goBack=this.goBack.bind(this),this.checkProgress=this.checkProgress.bind(this),this.animateIt=this.animateIt.bind(this),this.getDrawing=this.getDrawing.bind(this),this.createColoringShape=this.createColoringShape.bind(this),this.setup(b)},d=(a.prototype,extend(c,a));d.setup=function(c){this.panel=c,this.padWidth=app.config.gameData.padWidth,this.padHeight=app.config.gameData.padHeight,this.padOffsetX=app.config.gameData.padOffsetX,this.padOffsetY=app.config.gameData.padOffsetY,this.cirWidth=app.config.gameData.colorButtonWidth,this.strokeWidth=app.config.gameData.colorButtonStroke,this.colorIndx=0,this.coloringIndx=0,this.glitterAlpha=.5,this.outlinesArr=[],this.animateIndx=-1,this.checkIndx=0,this.returnIndx=1,this.sharedAnim=new WGBH.SharedAnimation;var d=new createjs.Bitmap(images.Overlay);this.addChild(d),d.x=-((app.config.scalingSize.maxWidth-app.config.scalingSize.width)/2),this.title=new createjs.Sprite(ss.game,"title_color"),this.addChild(this.title),this.title.x=d.x+10,this.title.y=-10,this.border=new createjs.Sprite(ss.game,"dotted_box"),this.border.x=this.padOffsetX,this.border.y=this.padOffsetY-5,this.border.visible=!1,this.addChild(this.border),this.drawingCanvas=new a,this.addChild(this.drawingCanvas),this.drawingBG=new createjs.Shape,this.drawingBG.graphics.f("white").dr(0,0,this.padWidth,this.padHeight),this.drawingBG.name="bg",this.drawingBG.alpha=.01,this.drawingCanvas.addChild(this.drawingBG),this.maskShape=new createjs.Shape,this.maskShape.graphics.f("#cccccc").dr(this.padOffsetX,this.padOffsetY,this.padWidth,this.padHeight),this.drawingCanvas.mask=this.maskShape,this.drawingCanvas.x=this.padOffsetX,this.drawingCanvas.y=this.padOffsetY,this.drawUICont=new a,this.animateUICont=new a,this.animateUICont.visible=!1,this.finalDrawing=new a,this.animateUICont.addChild(this.finalDrawing),this.finalDrawing.x=this.padOffsetX,this.finalDrawing.y=this.padOffsetY,this.finalDrawing.mask=this.maskShape.clone(),this.addChild(this.drawUICont,this.animateUICont);var e,f=app.config.gameData.color[app.selectedScene];for(e=0;e<f.length;e++)this.createColoringShape(app.selectedScene,e,e);this.createColoringShape("generic",0,3);var g=this.padOffsetX-235,h=this.padOffsetY+this.cirWidth+10;this.colorsArr=["#ffffff","#ff0072","#ffc000","#00a1ec","#ff98c7","#fce16e","#0c9ed9","#6fc4bf"],this.colorShapesArr=[];var i;for(e=0;e<this.colorsArr.length;e++){var j=new a;this.drawUICont.addChild(j);var k=new createjs.Shape,l="white";k.graphics.f(this.colorsArr[e]).ss(this.strokeWidth).s(l).dc(0,0,this.cirWidth);var m=new createjs.Sprite(ss.game,"icon_glitter");m.alpha=this.glitterAlpha,m.x=-this.cirWidth-2,m.y=-this.cirWidth-2,m.scaleX=m.scaleY=.95,m.visible=4>e?!0:!1;var n=new createjs.Shape;n.graphics.f("rgba(0,0,0,0)").ss(this.strokeWidth).s("white").dc(0,0,this.cirWidth),i=new createjs.Shape,i.graphics.f("white").dc(0,0,this.cirWidth),i.shadow=new createjs.Shadow("#000000",app.config.gameData.shadowDist,app.config.gameData.shadowDist,app.config.gameData.shadowBlur),i.alpha=app.config.gameData.shadowAlpha,j.mouseChildren=!1,j.addChild(i,k,m,n),j.x=g,j.y=h,j.indx=e,j.on("mousedown",this.chooseColor),3==e?(g+=125,h=this.padOffsetY+this.cirWidth+10):h+=127,this.colorShapesArr.push(k)}for(this.colorIndicator=new createjs.Shape,this.colorIndicator.graphics.f("rgba(0,0,0,0)").ss(5).s(app.config.gameData.pinkColor).dc(0,0,this.cirWidth+5),this.colorIndicator.x=this.colorShapesArr[this.colorIndx].parent.x,this.colorIndicator.y=this.colorShapesArr[this.colorIndx].parent.y,this.drawUICont.addChild(this.colorIndicator),g=this.padOffsetX-290,h=this.padOffsetY+5,this.animateBtnArr=[],this.animateBtnSelectedArr=[],e=0;8>e;e++){var o=app.config.gameData.animationArr[e],p=new b(images["btn_"+o]);this.animateUICont.addChild(p),p.indx=e,p.x=g,p.y=h,p.on("mousedown",this.animateIt),this.animateBtnArr.push(p),p=new createjs.Sprite(ss.game,"btn_"+o+"_selected"),this.animateUICont.addChild(p),p.x=g+5,p.y=h+5,p.visible=!1,this.animateBtnSelectedArr.push(p),3==e?(g+=124,h=this.padOffsetY+5):h+=125}this.doneBtn=new b(images.DoneButton),this.addChild(this.doneBtn),this.doneBtn.regX=67.5,this.doneBtn.regY=69,this.doneBtn.x=945,this.doneBtn.y=696,this.doneBtn.visible=!1,this.doneBtn.on("mousedown",this.checkProgress),this.backBtn=new b(images.BackButton),this.addChild(this.backBtn),this.backBtn.x=20,this.backBtn.y=80,this.backBtn.on("mousedown",this.goBack),this.sparkleCont=new createjs.Container,this.addChild(this.sparkleCont),app.firstAnimStickers?(this.hand=new createjs.Bitmap(images.tutorial_hand),this.addChild(this.hand),this.hand.x=-200,this.hand.visible=!1,this.tutorialAnim=!0):this.tutorialAnim=!1,this.visible=!1},d.createColoringShape=function(b,c,d){var e,f,g,h,i,j,k,l=app.config.gameData.color[b];j=new a,j.type=b+c,this.drawingCanvas.addChild(j),this.outlinesArr.push(j),f=new createjs.Sprite(ss.game,b+d+"_glitter"),j.addChild(f),f.scaleX=f.scaleY=l[c].scale,f.alpha=this.glitterAlpha,f.name="glitter",k=new lib[l[c].lib],k.x=l[c].offset[0],k.y=l[c].offset[1],k.name="outline",k.scaleX=k.scaleY=l[c].scale,f.x=k.x,f.y=k.y,g=new lib[b+"_color"+d],h=Object.keys(g);var m=0;for(e=0;e<h.length;e++)h[e].indexOf("shape")>=0&&(i=g[h[e]].clone(!0),j.addChild(i),i.graphics._fill?(i.name="fill",i.indx=m,"icecream"==b&&2==d&&m%2!=0&&(i.alpha=.01),i.on("mousedown",this.paintIt),i.graphics._fill.style="white",m++):(i.name="outline",k.visible=!1));j.x=this.padWidth/2-1.1*this.padWidth/2,j.y=this.padHeight/2-1.1*this.padHeight/2,j.scaleX=j.scaleY=1.1,j.addChild(k)},d.goBack=function(a){this.backBtn._stateFlags.over=!1,this.backBtn._updateState(),0==this.checkIndx?(app.voPlayer.stop(),app.sound.play("sfx_click"),this.goBackFunc(),this.panel.coloringPad.stopDrawing(!0)):(this.checkProgress(a),this.backBtn._stateFlags.over=!1,this.backBtn._updateState())},d.paintIt=function(a){this.doneBtn.visible=!0;var b=a.currentTarget,c=a.currentTarget.parent;if("icecream2"==c.type&&b.indx%2!=0)for(var d=0;d<c.numChildren;d++){var e=c.getChildAt(d);if(void 0!=e.indx&&e.indx==b.indx-1){b=e;break}}var f=this.colorIndx<4?0:c.numChildren-2;c.addChildAt(b,f),b.graphics._fill.style=this.colorsArr[this.colorIndx],app.firstDone&&(app.firstDone=!1,app.voPlayer.play([200,"ag_checkmark"]),this.sharedAnim.flashButton(this.doneBtn))},d.closeColoringPad=function(){this.stopDrawing(!0),
this.closeFunc()},d.startDrawing=function(a){this.tutorialAnim=app.firstAnimStickers,this.checkIndx=1,this.drawingCanvas.visible=!0,this.coloringIndx=a,this.checkProgress(),this.animateUICont.visible=!1,this.drawUICont.visible=!0;for(var b=0;b<this.outlinesArr.length;b++){this.outlinesArr[b].visible=b==this.coloringIndx?!0:!1;var c=this.outlinesArr[b].numChildren;if(b==this.coloringIndx){for(var d=0;c>d;d++){var e=this.outlinesArr[b].getChildAt(d);"fill"==e.name&&(e.graphics._fill.style="#f4f4f2",e.visible=!0)}this.outlinesArr[b].addChildAt(this.outlinesArr[b].getChildByName("glitter"),0)}}this.visible=!0,this.doneBtn.visible=!1,this.parent.addChild(this),app.scenesArr[app.selectedSceneIndx].firstColor?(app.scenesArr[app.selectedSceneIndx].firstColor=!1,app.voPlayer.play([200,"ag_tutorial_color_"+app.selectedScene])):(app.voPlayer.play([200,"ag_color_return"+this.returnIndx]),this.returnIndx++,this.returnIndx=this.returnIndx>15?1:this.returnIndx++)},d.checkProgress=function(a){if(!(a&&a.currentTarget==this.doneBtn&&this.doneBtn.alpha<1||this.animateUICont.visible&&this.tutorialAnim)){if(this.backBtn.enabled&&a&&app.sound.play("sfx_click"),a&&a.currentTarget==this.doneBtn&&1==this.checkIndx)return void this.finishedColoringFunc();if(this.checkIndx=0==this.checkIndx?1:0,this.drawUICont.visible=0==this.checkIndx?!0:!1,this.animateUICont.visible=!this.drawUICont.visible,this.animateUICont.visible)if(this.animateIndx=-1,this.border.visible=!0,this.title.gotoAndStop("title_move"),this.stopDrawing(),this.art=this.getDrawing(),this.art.regX=this.padWidth/2,this.art.regY=this.padHeight/2,this.art.x=this.padWidth/2,this.art.y=this.padHeight/2,this.art.initX=this.art.x,this.art.initY=this.art.y,this.art.initScale=.5,this.art.scaleX=this.art.scaleY=this.art.initScale,this.finalDrawing.addChild(this.art),this.drawingCanvas.visible=!1,this.doneBtn.alpha=.5,this.doneBtn.enabled=!1,app.firstAnimStickers){this.animateIt({currentTarget:this.animateBtnArr[0]}),app.firstAnimStickers=!1,this.backBtn.enabled=!1,this.backBtn.alpha=.5,app.voPlayer.stop(),app.voPlayer.play([300,"ag_tutorial_anim",200,"ag_checkmark"]),this.hand.x=0,this.hand.visible=!0;for(var b=0;b<this.animateBtnArr.length;b++)this.animateBtnArr[b].enabled=!1;createjs.Tween.get(this.hand).to({x:60,y:260},300).wait(1500).to({x:180,y:620},300).call(function(){this.animateIt({currentTarget:this.animateBtnArr[this.animateBtnArr.length-1]})}.bind(this)).wait(500).to({x:this.doneBtn.x-20,y:this.doneBtn.y-40},300).wait(2e3).to({y:800},200).call(function(){this.tutorialAnim=!1,this.backBtn.enabled=!0,this.backBtn.alpha=1;for(var a=0;a<this.animateBtnArr.length;a++)this.animateBtnArr[a].enabled=!0,this.animateBtnSelectedArr[a].visible=!1}.bind(this))}else app.voPlayer.stop(),this.animateIt({currentTarget:this.animateBtnArr[this.animateBtnArr.length-1]}),this.animateBtnSelectedArr[this.animateBtnArr.length-1].visible=!1,this.animateBtnArr[this.animateBtnArr.length-1].enabled=!0;else this.doneBtn.alpha=1,this.doneBtn.enabled=!0,this.doneBtn.visible=!0,this.border.visible=!1,this.title.gotoAndStop("title_color"),this.drawingCanvas.visible=!0;for(;this.sparkleCont.numChildren>0;)this.sparkleCont.removeChildAt(0)}},d.setListeners=function(a,b){this.finishedColoringFunc=a,this.goBackFunc=b},d.animateIt=function(a){if(void 0==a.type||!this.tutorialAnim){for(var b=0;b<this.animateBtnArr.length;b++){var c=this.animateBtnArr[b];b==a.currentTarget.indx?(c.enabled=!1,this.animateBtnSelectedArr[b].visible=!0):(c.enabled=this.tutorialAnim?!1:!0,this.animateBtnSelectedArr[b].visible=!1)}if(this.animateIndx!=a.currentTarget.indx){if(app.sound.play("sfx_pick"),a.target){this.doneBtn.alpha=1,this.doneBtn.enabled=!0,createjs.Tween.removeTweens(this.art);var d={x:a.currentTarget.x+this.cirWidth,y:a.currentTarget.y+this.cirWidth,init_pause_fact:0,init_scale:.6};this.sharedAnim.sparkleMeMany(this,this.sparkleCont,d,!1),this.animateIndx=a.currentTarget.indx}return a.currentTarget.indx==this.animateBtnArr.length-1?(createjs.Tween.removeTweens(this.art),this.art.x=this.art.initX,this.art.y=this.art.initY,this.art.scaleX=this.art.scaleY=this.art.initScale,void(this.art.rotation=0)):void this.sharedAnim.startUserDefinedAnimation(this.art,this.animateIndx,!1)}}},d.chooseColor=function(a){a.preventDefault(),app.sound.play("sfx_brush"),this.colorIndx=a.currentTarget.indx;for(var b=0;b<this.colorShapesArr.length;b++){var c=this.colorShapesArr[b],d="white";if(c.graphics.clear().f(this.colorsArr[b]).ss(this.strokeWidth).s(d).dc(0,0,this.cirWidth),b===this.colorIndx){this.colorIndicator.x=c.parent.x,this.colorIndicator.y=c.parent.y;var e={x:c.parent.x,y:c.parent.y,init_pause_fact:0,init_scale:.6};this.sharedAnim.sparkleMeMany(this,this.sparkleCont,e,!1)}}},d.stopDrawing=function(a){a&&(this.visible=!1),this.animateUICont.visible&&this.art&&(createjs.Tween.removeTweens(this.art),this.art.uncache(),this.finalDrawing.removeChild(this.art),this.art=null)},d.getDrawing=function(){this.drawingCanvas.visibe=!0;var a=this.drawingCanvas.clone(!0);return a.mask=null,a.getChildByName("bg").alpha=.01,a.cache(0,0,this.padWidth,this.padHeight),a},namespace("WGBH").ColoringPad=c}(),function(){var a=include("createjs.Container"),b=function(b,c,d,e){a.call(this),this.addHighlight=this.addHighlight.bind(this),this.minScale=.2,this.maxScale=.5,this.setup(b,c,d,e)},c=(a.prototype,extend(b,a));c.setup=function(b,c,d,e){this.shadowDIST=1,this.shadowBLUR=1,this.shadowCOLOR="#999999",this.type=b,this.reg=c,this.padWidth=app.config.gameData.padWidth,this.padHeight=app.config.gameData.padHeight,this.maskShape=new createjs.Shape,this.maskShape.graphics.f("black").dc(0,0,190),this.charShadow=null,this.inactiveName="";var f;if("props"==b||"friends"==b){this.imgName=c?d:"icon_"+d,this.art=new createjs.Sprite(ss.game,this.imgName);var g=ss.game.getAnimation(d).frames[0],h=ss.game.getFrameBounds(g);if(this.dimension={width:h.width,height:h.height},c){if(this.bounds={width:h.width,height:h.height},"friends"==b){this.bounds={width:h.width,height:h.height},this.charShadow=new createjs.Sprite(ss.game,"friends_shadow"),this.charShadow.regX=59,this.charShadow.regY=10,"sky"==app.selectedScene&&(this.charShadow.visible=!1);var i,j;this.art.visible=!1,i=app.config.gameData.friends.animData[e],j="char_"+i.name,this.charShadow.x=i.bodyReg[0],this.charShadow.y=this.bounds.height-3,i.bodyRot&&(this.charLegs=new createjs.Sprite(ss.game,j),this.addChild(this.charLegs)),this.charBodyCont=new a,this.charBodyCont.regX=i.bodyReg[0],this.charBodyCont.regY=i.bodyReg[1],this.charBodyCont.x=this.charBodyCont.regX,this.charBodyCont.y=this.charBodyCont.regY,this.charBodyCont.addChild(this.charShadow),this.charBody=new createjs.Sprite(ss.game,j+"_body"),this.charHeadCont=new a,this.charHeadCont.regX=i.headReg[0],this.charHeadCont.regY=i.headReg[1],this.charHeadCont.x=i.headPos[0],this.charHeadCont.y=i.headPos[1],"lila"==i.name&&(this.charHair=new createjs.Sprite(ss.game,j+"_hair"),this.charBodyCont.addChild(this.charHair),this.charHair.regX=i.headReg[0],this.charHair.regY=i.headReg[1],this.charHair.x=i.headPos[0],this.charHair.y=i.headPos[1]),this.charHead=new createjs.Sprite(ss.game,j+"_head"),this.charEyes=new createjs.Sprite(ss.game,j+"_eyes"),this.charEyes.regX=i.eyesReg[0],this.charEyes.regY=i.eyesReg[1],this.charEyes.x=i.eyesPos[0],this.charEyes.y=i.eyesPos[1],this.charHeadCont.addChild(this.charHead,this.charEyes),this.charArmL=new createjs.Sprite(ss.game,j+"_armL"),this.charArmL.regX=i.armLReg[0],this.charArmL.regY=i.armLReg[1],this.charArmL.x=i.armLPos[0],this.charArmL.y=i.armLPos[1],this.charArmL.rotation=i.armRot[0],this.charArmL.initRotation=this.charArmL.rotation,this.charArmR=new createjs.Sprite(ss.game,j+"_armR"),this.charArmR.regX=i.armRReg[0],this.charArmR.regY=i.armRReg[1],this.charArmR.x=i.armRPos[0],this.charArmR.y=i.armRPos[1],this.charArmR.rotation=i.armRot[1],this.charArmR.initRotation=this.charArmR.rotation,this.charBodyCont.addChild(this.charArmL,this.charArmR,this.charBody,this.charHeadCont),"pink"==i.name?(this.charWings=new createjs.Sprite(ss.game,j+"_wings"),this.charBodyCont.addChildAt(this.charWings,0)):"jasmine"==i.name&&(this.charDress=new createjs.Sprite(ss.game,j+"_dress"),this.charDress.regX=i.dressReg[0],this.charDress.regY=i.dressReg[1],this.charDress.x=this.charDress.regX,this.charDress.y=this.charDress.regY,this.charBodyCont.addChildAt(this.charDress,1)),this.addChild(this.charBodyCont)}}else this.bounds={width:app.config.gameData[b].icon_width,height:app.config.gameData[b].icon_height};f=new createjs.Shape,f.graphics.f("white").dr(0,0,this.bounds.width,this.bounds.height),f.alpha=.01,this.regX=this.bounds.width/2,this.regY=this.bounds.height/2,this.addChild(f,this.art);var k,l,m,n;if("props"==b){if(this.reg)if(this.art.framerate=app.config.gameData.props[this.imgName].framerate,"carnival"==app.selectedScene)if("carnival2"==this.imgName)this.art.visible=!1,this.body=new createjs.Sprite(ss.game,this.imgName+"_body"),this.body.x=4,this.body.y=51,this.tail=new a,this.tail.regX=0,this.tail.regY=14,this.tail.x=65,this.tail.y=129,this.tail.initRotation=-8,this.tail.rotation=-8,this.tail1=new createjs.Sprite(ss.game,this.imgName+"_tail1"),this.tail.addChild(this.tail1),this.tail2=new createjs.Sprite(ss.game,this.imgName+"_tail2"),this.tail.addChild(this.tail2),this.tail2.regX=5,this.tail2.regY=15,this.tail2.x=80,this.tail2.y=15,this.tail2.initRotation=0,this.head=new createjs.Sprite(ss.game,this.imgName+"_head"),this.head.regX=52,this.head.regY=49.5,this.head.x=57,this.head.y=50,this.addChild(this.tail,this.body,this.head);else if("carnival0"==this.imgName){this.art.visible=!1,this.gondolaCont=new a,this.wheel=new createjs.Sprite(ss.game,this.imgName+"_wheel"),this.wheel.regX=this.gondolaCont.regX=181*this.scaleX,this.wheel.regY=this.gondolaCont.regY=146*this.scaleX,this.wheel.x=this.gondolaCont.x=this.wheel.regX,this.wheel.y=this.gondolaCont.y=this.wheel.regY,this.beams=new createjs.Sprite(ss.game,this.imgName+"_beams"),this.addChild(this.gondolaCont,this.wheel,this.beams),this.gondolaCont.addChild(this.gondola),this.gondolaArr=[];var o=[[181,0],[285,47],[325,147],[282,248],[182,290],[82,248],[38,146],[80,46]];for(l=0;8>l;l++)this.gondola=new createjs.Sprite(ss.game,this.imgName+"_gondola"),this.gondola.regX=29.5*this.scaleX,this.gondolaCont.addChild(this.gondola),this.gondolaArr.push(this.gondola),this.gondola.x=o[l][0],this.gondola.y=o[l][1]}else"carnival1"==this.imgName?(this.art.visible=!1,this.back=new createjs.Sprite(ss.game,this.imgName+"_back"),this.front=new createjs.Sprite(ss.game,this.imgName+"_front"),this.gnome=new createjs.Sprite(ss.game,this.imgName+"_gnome0"),this.gnome.scaleX=this.gnome.scaleY=.35,this.gnome.y=291,this.gnome.x=10,this.gnome.visible=!1,this.gnome.initPos={x:this.gnome.x,y:this.gnome.y},this.addChild(this.back,this.gnome,this.front)):"carnival3"==this.imgName&&(this.art.visible=!1,this.hatTop=new createjs.Sprite(ss.game,this.imgName+"_top"),this.hatBottom=new createjs.Sprite(ss.game,this.imgName+"_bottom"),this.hatBodyCont=new a,this.hatBody=new createjs.Sprite(ss.game,this.imgName+"_body"),this.hatHeadCont=new a,this.hatHeadCont.x=56,this.hatHeadCont.y=117,this.hatHead=new createjs.Sprite(ss.game,this.imgName+"_face"),this.hatHead.regX=22,this.hatHead.regY=43,this.hatLeft=new createjs.Sprite(ss.game,this.imgName+"_left"),this.hatLeft.regX=36,this.hatLeft.regY=34,this.hatLeft.x=-10,this.hatLeft.y=-40,this.hatRight=new createjs.Sprite(ss.game,this.imgName+"_right"),this.hatRight.regX=17,this.hatRight.regY=51,this.hatRight.x=10,this.hatRight.y=-33,this.hatRight.rotation=16,this.hatRight.initRotation=this.hatRight.rotation,this.hatHeadCont.addChild(this.hatLeft,this.hatRight,this.hatHead),this.hatBodyCont.addChild(this.hatBody,this.hatHeadCont),this.addChild(this.hatBottom,this.hatBodyCont,this.hatTop));else if("sky"==app.selectedScene){if("sky1"==this.imgName)for(this.art.visible=!1,this.lantern=new createjs.Sprite(ss.game,this.imgName+"_lantern"),this.glow=new createjs.Sprite(ss.game,this.imgName+"_glow"),this.bulb=new createjs.Sprite(ss.game,this.imgName+"_bulb"),this.lantern.x=this.glow.x=this.bulb.x=-5,this.lantern.y=this.glow.y=this.bulb.y=-10,this.addChild(this.bulb,this.lantern,this.glow),this.bugsArr=[],this.posArr=[[50,45],[-20,69],[80,70],[-30,90],[63,25],[4,10]],this.targetPosArr=[[30,50],[-10,45],[57,90],[5,80],[78,75],[57,17]],this.waitArr=[[0,1400],[0,1e3],[200,1200],[0,800],[0,1100],[0,900]],this.scaleArr=[.3,.2,.16,.25,.3,.18],k=0;k<this.posArr.length;k++){var p=new createjs.Sprite(ss.game,this.imgName+"_firefly");p.x=this.posArr[k][0],p.y=this.posArr[k][1],p.initX=p.x,p.initY=p.y,p.scaleX=p.scaleY=this.scaleArr[k],p.initScale=p.scaleX,p.targetPos=this.targetPosArr[k],p.waitArr=this.waitArr[k],p.alpha=0,k==this.posArr.length-1?this.addChildAt(p,0):this.addChild(p),this.bugsArr.push(p)}else if("sky0"==this.imgName){this.art.visible=!1,this.planetsCont=new a,this.addChild(this.planetsCont),this.planetsCont.regX=200,this.planetsCont.regY=86.5,this.planetsCont.x=200,this.planetsCont.y=86.5,this.back=new createjs.Sprite(ss.game,this.imgName),this.front=new createjs.Sprite(ss.game,this.imgName+"_top"),this.planetsCont.addChild(this.back);var q=["#fe8dfc","#f994f2","white","white","#e4ff97","#2dfffa","#e4ff97","#ff43b7","#e4ff97","#f994f2","#2dfffa","white","#2dfdf8","#ffc9fe","#49ffd5","#fe8dfc","#fe8dfc","#f994f2","white","white","#e4ff97","#2dfffa","#e4ff97","#ff43b7","#e4ff97","#f994f2","#2dfffa","white","#2dfdf8","#ffc9fe","#49ffd5"],r=[[150,40],[120,35],[210,33],[130,45],[180,30],[151,38],[129,35],[145,32],[100,21],[110,36],[155,33],[160,37],[134,40],[122,38],[125,40],[134,20],[101,33],[104,41],[140,43],[111,27],[149,53],[156,37],[133,47],[117,23],[210,48],[128,48],[161,30],[152,36],[129,40],[146,32],[138,46]],s=[3,4,2,2,2,2,3,4,3,3,2,3,2,2,3,4,2,2,2,2,2,2,2,3,3,2,2,4,2,3,3],t=[.3,1,.2,.3,.9,.6,.4,.3,1,.7,1.1,.9,.4,.2,.8,.3,.6,.7,.2,.6,.8,1,.3,.5,.6,.7,.8,.9,1.1,.4,.7],u=[0,1,2,3,4,5,6,10,13,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36];for(this.planetsArr=[],l=0;l<q.length;l++){var v=new createjs.Shape;v.graphics.f(q[l]).dc(0,0,s[l]),this.planetsCont.addChild(v),v.orbitX=r[l][0],v.orbitY=r[l][1],v.planetX=155,v.planetY=70,v.speed=t[l],v.currentDegree=u[l],v.visible=!1,v.initDegree=v.currentDegree;var w=v.currentDegree*Math.PI/180,x=v.planetX+Math.cos(w)*v.orbitX,y=v.planetY+Math.sin(w)*v.orbitY;v.x=x,v.y=y,this.planetsArr.push(v)}this.planetsCont.addChild(this.front),this.planetsCont.rotation=18}else if("sky2"==this.imgName){for(this.art.visible=!1,this.machineTop=new createjs.Sprite(ss.game,this.imgName+"_top"),this.machineBottom=new createjs.Sprite(ss.game,this.imgName+"_bottom"),this.machineTop.regX=69,this.machineTop.regY=79,this.machineBottom.regX=69,this.machineBottom.regY=79,this.machineTop.x=this.machineTop.regX,this.machineTop.y=this.machineTop.regY,this.machineBottom.x=this.machineBottom.regX,this.machineBottom.y=this.machineBottom.regY,this.addChild(this.machineBottom),this.fireColorsArr=["#FFF52E","#05EAD2","#EE3EC1"],this.firePosArr=[[97,33],[56,24],[39,15]],this.rotationArr=[0,-10,-5],this.offset=[[0,130],[20,40],[10,120]],this.firePtArr=[],this.fireContArr=[],this.fireArr=[[],[],[]],k=0;k<this.fireColorsArr.length;k++){var z=new a;for(z.regY=0,z.regX=0,m=0;3>m;m++){var A=new createjs.Shape;A.graphics.f(this.fireColorsArr[k]).dc(0,16*m,m+1),A.scaleY=1.5,z.addChild(A)}z.x=this.firePosArr[k][0],z.y=this.firePosArr[k][1],z.initX=z.x,z.initY=z.y,z.rotation=this.rotationArr[k],this.firePtArr.push(z);var B=new a;for(B.x=z.x-this.offset[k][0],B.y=z.y-this.offset[k][1],B.visible=!1,this.fireContArr.push(B),this.addChild(z,B),m=0;5>m;m++){var C=5+6*m;for(l=0;C>l;l++){var D=new createjs.Shape;D.graphics.f(this.fireColorsArr[k]).dc(0,0,2),B.addChild(D);var E=l*(360/C)*Math.PI/180;D.degree=E,D.orbit=8*m,D.initOrbit=D.orbit,D.x=Math.cos(E)*D.orbit,D.y=Math.sin(E)*D.orbit,D.initX=D.x,D.initY=D.y,D.startFade=!1,this.fireArr[k].push(D)}}}this.addChild(this.machineTop)}else if("sky3"==this.imgName)this.art.visible=!1,this.plane=new createjs.Sprite(ss.game,this.imgName+"_plane"),this.plane.rotation=0,this.plane.initRotation=this.plane.rotation,this.propeller=new createjs.Sprite(ss.game,this.imgName+"_propeller"),this.propeller.gotoAndStop(this.imgName+"_propeller"),this.addChild(this.plane,this.propeller);else if("sky4"==this.imgName){this.frameArr=[0,2,1,0,2,0,2,1,1],this.posArr=[[61,142],[96,220],[254,164],[255,164],[270,43],[178,73],[72,173],[177,134],[303,188]],this.scaleArr=[.9,.4,1,.9,.4,.9,.4,1,1],this.regArr=[[24,23],[13,17],[19,17],[24,23]],this.partsArr=[],this.pos2Arr=[[194,131],[82,110],[7,71]],this.scale2Arr=[.2,0,0],this.alpha2Arr=[.6,.5,0],this.parts2Arr=[];var F;for(k=0;k<this.frameArr.length;k++)F=new createjs.Sprite(ss.game,this.imgName+"_sparkle"+this.frameArr[k]),F.x=this.posArr[k][0],F.y=this.posArr[k][1],F.regX=this.regArr[this.frameArr[k]][0],F.regY=this.regArr[this.frameArr[k]][1],F.maxScale=this.scaleArr[k],F.alpha=0,F.scaleX=F.scaleY=0,this.partsArr.push(F),this.addChild(F);for(k=0;k<this.pos2Arr.length;k++)F=new createjs.Sprite(ss.game,this.imgName+"_sparkle3"),F.x=this.pos2Arr[k][0],F.y=this.pos2Arr[k][1],F.regX=this.regArr[3][0],F.regY=this.regArr[3][1],F.scaleX=F.scaleY=this.scale2Arr[k],F.initScale=this.scale2Arr[k],F.alpha=this.alpha2Arr[k],F.initAlpha=F.alpha,this.parts2Arr.push(F),this.addChildAt(F,0)}}else if("icecream"==app.selectedScene)"icecream2"==this.imgName?(this.dish=new createjs.Sprite(ss.game,this.imgName+"_dish"),this.scoop=new createjs.Sprite(ss.game,this.imgName+"_scoop"),this.syrup=new createjs.Sprite(ss.game,this.imgName+"_syrup"),this.cream=new createjs.Sprite(ss.game,this.imgName+"_cream"),this.cherry=new createjs.Sprite(ss.game,this.imgName+"_cherry"),this.cherry.regX=20,this.cherry.regY=53,this.cherry.x=119,this.cherry.y=69,this.cherry.initY=this.cherry.y,this.addChild(this.dish,this.scoop,this.syrup,this.cream,this.cherry)):"icecream4"==this.imgName&&(this.popcornBottom=new createjs.Sprite(ss.game,this.imgName+"_bottom"),this.popcornTop=new createjs.Sprite(ss.game,this.imgName+"_top"),this.pop1=new createjs.Sprite(ss.game,this.imgName+"_pop1"),this.pop2=new createjs.Sprite(ss.game,this.imgName+"_pop2"),this.pop3=new createjs.Sprite(ss.game,this.imgName+"_pop3"),this.pop4=new createjs.Sprite(ss.game,this.imgName+"_pop4"),this.pop5=new createjs.Sprite(ss.game,this.imgName+"_pop5"),this.pop6=new createjs.Sprite(ss.game,this.imgName+"_pop6"),this.pop7=new createjs.Sprite(ss.game,this.imgName+"_pop7"),this.partsArr=[this.pop1,this.pop2,this.pop3,this.pop4,this.pop5,this.pop6,this.pop7],this.addChild(this.popcornBottom,this.pop1,this.pop7,this.pop4,this.pop6,this.pop5,this.pop2,this.pop3,this.popcornTop));else if("beach"==app.selectedScene)"beach0"==this.imgName&&(this.shellTop=new createjs.Sprite(ss.game,this.imgName+"_top"),this.shellBottom=new createjs.Sprite(ss.game,this.imgName+"_bottom"),this.note1=new createjs.Sprite(ss.game,this.imgName+"_note1"),this.note1.x=73,this.note1.y=60,this.note1.regX=6,this.note1.regY=6,this.note1.initX=this.note1.x,this.note1.initY=this.note1.y,this.note1.scaleX=this.note1.scaleY=0,this.note1.rotation=33,this.note2=new createjs.Sprite(ss.game,this.imgName+"_note2"),this.note2.x=63,this.note2.y=70,this.note2.regX=6,this.note2.regY=6,this.note2.initX=this.note2.x,this.note2.initY=this.note2.y,this.note2.scaleX=this.note2.scaleY=0,this.note3=new createjs.Sprite(ss.game,this.imgName+"_note3"),this.note3.x=62,this.note3.y=72,this.note3.regX=6,this.note3.regY=6,this.note3.initX=this.note3.x,this.note3.initY=this.note3.y,this.note3.scaleX=this.note3.scaleY=0,this.note3.rotation=33,this.note4=new createjs.Sprite(ss.game,this.imgName+"_note3"),this.note4.x=62,this.note4.y=72,this.note4.regX=6,this.note4.regY=6,this.note4.initX=this.note4.x,this.note4.initY=this.note4.y,this.note4.scaleX=this.note4.scaleY=0,this.note4.rotation=-50,this.note5=new createjs.Sprite(ss.game,this.imgName+"_note2"),this.note5.x=69,this.note5.y=76,this.note5.regX=6,this.note5.regY=6,this.note5.initX=this.note5.x,this.note5.initY=this.note5.y,this.note5.scaleX=this.note5.scaleY=0,this.note5.rotation=-28,this.note6=new createjs.Sprite(ss.game,this.imgName+"_note1"),this.note6.x=60,this.note6.y=50,this.note6.regX=6,this.note6.regY=6,this.note6.initX=this.note6.x,this.note6.initY=this.note6.y,this.note6.scaleX=this.note6.scaleY=0,this.note6.rotation=-24,this.addChild(this.shellBottom,this.note1,this.note2,this.note3,this.note4,this.note5,this.note6,this.shellTop),this.partsArr=[this.note1,this.note2,this.note3,this.note4,this.note5,this.note6]);else if("garden"==app.selectedScene)if("garden4"==this.imgName)for(this.posArr=[[38,135],[91,95],[72,52],[196,103],[147,49],[117,158],[200,157]],this.regArr=[[22,21],[22,15],[13,11],[14,16],[18,16],[17,11],[15,12]],this.flowersArr=[],k=0;7>k;k++)n=new createjs.Sprite(ss.game,this.imgName+"_flower"+k),this.addChild(n),n.regX=this.regArr[k][0],n.regY=this.regArr[k][1],n.x=this.posArr[k][0],n.y=this.posArr[k][1],n.scaleX=n.scaleY=0,this.flowersArr.push(n);else if("garden2"==this.imgName){for(this.art.visible=!1,this.can=new createjs.Sprite(ss.game,this.imgName),this.can.regX=this.regX,this.can.regY=this.regY,this.can.x=this.can.regX,this.can.y=this.can.regY,this.addChild(this.can),this.frameArr=[1,0,2,0,2,1,0],this.posArr=[[0,67],[0,83],[-10,73],[-5,82],[0,80],[-15,60],[-10,84]],this.regArr=[[13,11],[16,19],[15,15]],this.offsetArr=[[20,120],[1,190],[-5,131],[-1,140],[-20,220],[-18,119],[-1,140]],this.waitArr=[300,500,700,1e3,1100,1200,2100],this.lengthArr=[2e3,1800,1500,1900,1700,1800,2e3],this.scaleArr=[.8,1.1,1.2,1,.5,.75,.5],this.rotArr=[0,149,81,149,81,113,149],this.flowersArr=[],k=0;k<this.frameArr.length;k++)n=new createjs.Sprite(ss.game,this.imgName+"_flower"+this.frameArr[k]),n.regX=this.regArr[this.frameArr[k]][0],n.regY=this.regArr[this.frameArr[k]][1],n.x=this.posArr[k][0],n.y=this.posArr[k][1],n.scaleX=n.scaleY=0,n.initX=n.x,n.initY=n.y,n.wait=this.waitArr[k],n.len=this.lengthArr[k],n.offset=this.offsetArr[k],n.maxScale=this.scaleArr[k],n.maxRot=this.rotArr[k],n.indx=k,this.flowersArr.push(n),this.addChild(n);for(this.pos2Arr=[0,2,3,6,6],this.wait2Arr=[400,700,710,1400,2e3],this.length2Arr=[1600,1600,1600,1600,1600],this.maxScale2Arr=[.6,.5,.6,.4,1],this.rot2Arr=[0,-16,-99,103,-65],this.sparklesArr=[],k=0;k<this.pos2Arr.length;k++)n=new createjs.Sprite(ss.game,this.imgName+"_sparkle"),n.regX=50,n.regY=45,n.x=this.posArr[this.pos2Arr[k]][0],n.y=this.posArr[this.pos2Arr[k]][1],n.initX=n.x,n.initY=n.y,n.wait=this.wait2Arr[k],n.len=this.length2Arr[k],n.offset=this.offsetArr[this.pos2Arr[k]],n.maxScale=this.maxScale2Arr[k],n.scaleX=n.scaleY=0,n.rotation=this.rot2Arr[k],n.indx=k,this.sparklesArr.push(n),this.addChild(n)}else if("garden0"==this.imgName)for(this.art.visible=!1,this.house_top=new createjs.Sprite(ss.game,this.imgName+"_top"),this.house_bottom=new createjs.Sprite(ss.game,this.imgName+"_bottom"),this.door=new createjs.Sprite(ss.game,this.imgName+"_door"),this.door.x=72,this.door.y=257,this.fairy1=new a,this.body1=new createjs.Sprite(ss.game,this.imgName+"_fairy0"),this.head1=new createjs.Sprite(ss.game,this.imgName+"_fairy0_head"),this.head1.x=45,this.head1.y=11,this.head1.regX=20,this.head1.regY=39,this.fairy1.addChild(this.body1,this.head1),this.fairy1.regX=45,this.fairy1.regY=29,this.fairy1.rotation=-40,this.fairy1.x=216,this.fairy1.y=323,this.fairy1.initX=this.fairy1.x,this.fairy1.initY=this.fairy1.y,this.fairy1.endPt=[166,323],this.fairy2=new a,this.body2=new createjs.Sprite(ss.game,this.imgName+"_fairy1"),this.head2=new createjs.Sprite(ss.game,this.imgName+"_fairy1_head"),this.head2.x=36,this.head2.y=12,this.head2.regX=19,this.head2.regY=45,this.fairy2.addChild(this.body2,this.head2),this.fairy2.regX=33,this.fairy2.regY=36,this.fairy2.rotation=-18,this.fairy2.x=122,this.fairy2.y=165,this.fairy2.initX=this.fairy2.x,this.fairy2.initY=this.fairy2.y,this.fairy2.endPt=[90,116],this.addChild(this.house_bottom,this.fairy1,this.fairy2,this.house_top,this.door),this.regArr=[[20,20],[14,14],[18,16]],this.posArr=[[129,192],[88,139],[251,127]],this.dirArr=[-360,360,360],this.flowersArr=[],k=0;3>k;k++)n=new createjs.Sprite(ss.game,this.imgName+"_flower"+k),n.regX=this.regArr[k][0],n.regY=this.regArr[k][1],n.x=this.posArr[k][0],n.y=this.posArr[k][1],n.dir=this.dirArr[k],this.flowersArr.push(n),this.addChild(n);else"garden3"==this.imgName&&(this.art._animation.next=!1);this.art.gotoAndStop(this.imgName)}this.art.x=0,this.art.y=0}else("draw"==b||"color"==b)&&(this.bounds={width:this.padWidth,height:this.padHeight},this.imgName=b,this.art=d,this.art.visible=!0,c?(this.art.mask=null,this.art.cache(0,0,this.padWidth,this.padHeight)):this.shadow=new createjs.Shadow(this.shadowCOLOR,this.shadowDIST,this.shadowDIST,this.shadowBLUR),this.art.x=-this.padWidth/2,this.art.y=-this.padHeight/2,this.addChild(this.art));"props"==b?(c?this.minScale=app.config.gameData.props[d].minScale:this.minScale=app.config.gameData.props.minScale,this.maxScale=app.config.gameData.props[d].maxScale):"color"==b?5>e?(this.maxScale=app.config.gameData.color[app.selectedScene][e].maxScale,this.minScale=app.config.gameData.color[app.selectedScene][e].minScale):(this.maxScale=app.config.gameData.color.generic[e-5].maxScale,this.minScale=app.config.gameData.color.generic[e-5].minScale):(this.maxScale=app.config.gameData[b].maxScale,this.minScale=app.config.gameData[b].minScale),this.mouseChildren=!1,this.visible=!0,this.scaleX=this.scaleY=c?this.maxScale:this.minScale},c.setPosition=function(a,b){this.initPosition={x:a,y:b},this.x=this.initPosition.x,this.y=this.initPosition.y,this.initX=this.x,this.initY=this.y},c.addHighlight=function(){if(this.reg||("friends"==this.type||"props"==this.type)&&(this.art.gotoAndStop(this.imgName),this.art.x=-this.dimension.width/2+this.bounds.width/2,this.art.y=-this.dimension.height/2+this.bounds.height/2),this.nav){this.shadow=null,this.par.addChild(this);var a=100,b=0;"draw"==this.type?(this.art.mask=null,b=-this.bounds.height/2*this.scaleX):"color"==this.type?(this.art.mask=null,b=-this.bounds.height/2*this.scaleX):"friends"==this.type?(a=this.dimension.width,b=this.dimension.height/2):"sky0"==this.imgName&&(this.rotation=15),this.y+=this.cont.parent.y+b,this.x+=this.cont.parent.x+a}else this.parent.addChild(this);createjs.Tween.get(this).to({scaleX:1.1*this.maxScale,scaleY:1.1*this.maxScale},500,createjs.Ease.elasticOut)},c.setInactive=function(){this.disableDrag(),"friends"==this.type&&this.nav&&(this.inactiveName="_inactive",this.art.gotoAndStop("icon_"+this.imgName+"_inactive"))},c.setActive=function(){this.enableDrag(),"friends"==this.type&&this.nav&&(this.inactiveName="",this.art.gotoAndStop("icon_"+this.imgName))},c.removeHighlight=function(){createjs.Tween.removeTweens(this),this.scaleX=this.scaleY=this.initScale},c.resetPosition=function(){createjs.Tween.removeTweens(this),this.alpha=1,this.x=this.initPosition.x,this.y=this.initPosition.y,this.scaleX=this.scaleY=this.minScale,this.nav&&("friends"==this.type||"props"==this.type?(this.art.gotoAndStop("icon_"+this.imgName+this.inactiveName),this.art.x=0,this.art.y=0,this.rotation=0):(this.art.x=-this.padWidth/2,this.art.y=-this.padHeight/2),this.cont.addChild(this),("draw"==this.type||"color"==this.type)&&(this.shadow=new createjs.Shadow(this.shadowCOLOR,this.shadowDIST,this.shadowDIST,this.shadowBLUR)))},c.reset=function(){this.x=this.initX,this.y=this.initY,this.rotation=0,createjs.Tween.removeTweens(this),this.scaleX=this.scaleY=this.initScale,"props"==this.type&&this.reg&&this.art.gotoAndStop(this.imgName);var a=0;if("friends"==this.type&&(createjs.Tween.removeTweens(this.charBodyCont),this.charBodyCont.rotation=0,createjs.Tween.removeTweens(this.charHeadCont),this.charHeadCont.rotation=0,createjs.Tween.removeTweens(this.charEyes),this.charEyes.scaleY=1,createjs.Tween.removeTweens(this.charArmL),this.charArmL.rotation=this.charArmL.initRotation,createjs.Tween.removeTweens(this.charArmR),this.charArmR.rotation=this.charArmR.initRotation,this.charDress&&(createjs.Tween.removeTweens(this.charDress),this.charDress.rotation=0),this.charHair&&(createjs.Tween.removeTweens(this.charHair),this.charHair.rotation=0)),"carnival"==app.selectedScene)if("carnival0"==this.imgName)for(createjs.Tween.removeTweens(this.gondolaCont),createjs.Tween.removeTweens(this.wheel),this.gondolaCont.rotation=0,this.wheel.rotation=0,a=0;a<this.gondolaArr.length;a++)createjs.Tween.removeTweens(this.gondolaArr[a]),this.gondolaArr[a].rotation=0;else"carnival1"==this.imgName?(createjs.Tween.removeTweens(this.gnome),this.gnome.visible=!1,this.gnome.alpha=1,this.gnome.x=this.gnome.initPos.x,this.gnome.y=this.gnome.initPos.y,this.gnome.gotoAndStop(this.imgName+"_gnome0")):"carnival2"==this.imgName?(createjs.Tween.removeTweens(this.head),this.head.rotation=0,createjs.Tween.removeTweens(this.tail),createjs.Tween.removeTweens(this.tail2),this.tail.rotation=this.tail.initRotation,this.tail2.rotation=this.tail2.initRotation):"carnival3"==this.imgName&&(createjs.Tween.removeTweens(this.hatBodyCont),createjs.Tween.removeTweens(this.hatHeadCont),createjs.Tween.removeTweens(this.hatLeft),createjs.Tween.removeTweens(this.hatRight),this.hatBodyCont.y=0,this.hatHeadCont.rotation=0,this.hatLeft.rotation=0,this.hatRight.rotation=this.hatRight.initRotation);else if("sky"==app.selectedScene){if("sky1"==this.imgName)for(createjs.Tween.removeTweens(this.glow),this.glow.alpha=1,createjs.Tween.removeTweens(this.bulb),this.bulb.alpha=1,a=0;a<this.bugsArr.length;a++)createjs.Tween.removeTweens(this.bugsArr[a]),this.bugsArr[a].x=this.bugsArr[a].initX,this.bugsArr[a].y=this.bugsArr[a].initY,this.bugsArr[a].alpha=0;else if("sky0"==this.imgName)for(a=0;a<this.planetsArr.length;a++)this.planetsArr[a].visible=!1;else if("sky3"==this.imgName)this.plane.rotation=this.plane.initRotation,this.propeller.gotoAndStop(this.imgName+"_propeller");else if("sky2"==this.imgName){for(a=0;a<this.firePtArr.length;a++)createjs.Tween.removeTweens(this.machineTop),createjs.Tween.removeTweens(this.machineBottom),this.machineTop.rotation=0,this.machineBottom.rotation=0,createjs.Tween.removeTweens(this.firePtArr[a]),this.firePtArr[a].x=this.firePtArr[a].initX,this.firePtArr[a].y=this.firePtArr[a].initY,this.firePtArr[a].alpha=1,this.fireContArr[a].visible=!1;this.rotation=0}else if("sky4"==this.imgName){for(a=0;a<this.partsArr.length;a++)createjs.Tween.removeTweens(this.partsArr[a]),this.partsArr[a].alpha=0,this.partsArr[a].scaleX=this.partsArr[a].scaleY=this.partsArr[a].initScale;for(a=0;a<this.parts2Arr.length;a++)createjs.Tween.removeTweens(this.parts2Arr[a]),this.parts2Arr[a].alpha=this.parts2Arr[a].initAlpha,this.parts2Arr[a].scaleX=this.parts2Arr[a].scaleY=this.parts2Arr[a].initScale}}else if("icecream"==app.selectedScene){if("icecream0"==this.imgName);else if("icecream1"==this.imgName);else if("icecream2"==this.imgName)createjs.Tween.removeTweens(this.scoop),createjs.Tween.removeTweens(this.syrup),createjs.Tween.removeTweens(this.cream),createjs.Tween.removeTweens(this.cherry),this.scoop.y=this.syrup.y=this.cream.y=0,this.cherry.y=this.cherry.initY,this.cherry.rotation=0;else if("icecream4"==this.imgName)for(a=0;a<this.partsArr.length;a++)createjs.Tween.removeTweens(this.partsArr[a]),this.partsArr[a].x=0,this.partsArr[a].y=0}else if("beach"==app.selectedScene){if("beach0"==this.imgName)for(a=0;a<this.partsArr.length;a++)createjs.Tween.removeTweens(this.partsArr[a]),this.partsArr[a].x=this.partsArr[a].initX,this.partsArr[a].y=this.partsArr[a].initY,this.partsArr[a].alpha=1,this.partsArr[a].scaleX=this.partsArr[a].scaleY=0}else if("garden"==app.selectedScene)if("garden4"==this.imgName)for(a=0;a<this.flowersArr.length;a++)createjs.Tween.removeTweens(this.flowersArr[a]),this.flowersArr[a].scaleX=this.flowersArr[a].scaleY=0;else if("garden2"==this.imgName){for(createjs.Tween.removeTweens(this.can),this.can.rotation=0,a=0;a<this.flowersArr.length;a++)createjs.Tween.removeTweens(this.flowersArr[a]),
this.flowersArr[a].scaleX=this.flowersArr[a].scaleY=0,this.flowersArr[a].x=this.flowersArr[a].initX,this.flowersArr[a].y=this.flowersArr[a].initY,this.flowersArr[a].alpha=1,this.flowersArr[a].rotation=0;for(a=0;a<this.sparklesArr.length;a++)createjs.Tween.removeTweens(this.sparklesArr[a]),this.sparklesArr[a].scaleX=this.sparklesArr[a].scaleY=0,this.sparklesArr[a].x=this.sparklesArr[a].initX,this.sparklesArr[a].y=this.sparklesArr[a].initY,this.sparklesArr[a].alpha=1}else if("garden0"==this.imgName)for(createjs.Tween.removeTweens(this.door),createjs.Tween.removeTweens(this.fairy1),this.fairy1.x=this.fairy1.initX,this.fairy1.y=this.fairy1.initY,createjs.Tween.removeTweens(this.fairy2),this.fairy2.x=this.fairy2.initX,this.fairy2.y=this.fairy2.initY,this.door.scaleX=1,a=0;a<this.flowersArr.length;a++)createjs.Tween.removeTweens(this.flowersArr[a]),this.flowersArr[a].rotation=0},namespace("WGBH").DragSprite=b}(),function(){var a=include("createjs.Container"),b=include("springroll.easeljs.Button");DelayedCall=include("springroll.DelayedCall");var c=function(b){a.call(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.chooseColor=this.chooseColor.bind(this),this.undoDrawing=this.undoDrawing.bind(this),this.setup=this.setup.bind(this),this.startDrawing=this.startDrawing.bind(this),this.checkProgress=this.checkProgress.bind(this),this.animateIt=this.animateIt.bind(this),this.goBack=this.goBack.bind(this),this.chooseStroke=this.chooseStroke.bind(this),this.updateStroke=this.updateStroke.bind(this),this.addBrush=this.addBrush.bind(this),this.minusBrush=this.minusBrush.bind(this),this.getDrawingPrompt=this.getDrawingPrompt.bind(this),this.sparklePink=this.sparklePink.bind(this),this.startIdleTimer=this.startIdleTimer.bind(this),this.playIdle=this.playIdle.bind(this),this.stopIdle=this.stopIdle.bind(this),this.update=this.update.bind(this),this.stopLipSync=this.stopLipSync.bind(this),this.startLipSync=this.startLipSync.bind(this),this.setup(b)},d=(a.prototype,extend(c,a));d.setup=function(c){this.panel=c,this.IDLE_TIME=2e4,this.padWidth=app.config.gameData.padWidth,this.padHeight=app.config.gameData.padHeight,this.padOffsetX=app.config.gameData.padOffsetX,this.padOffsetY=app.config.gameData.padOffsetY,this.cirWidth=app.config.gameData.colorButtonWidth,this.strokeWidth=app.config.gameData.colorButtonStroke,this.brushOffset=0,this.colorIndx=0,this.selectedStroke=1,this.drawingIndx=0,this.didMove=!1,this.strokeStyle=15,this.eraseIt=!1,this.checkIndx=0,this.animateIndx=-1,this.promptIndx=0,this.strokeStyleArr=[70,30,10],this.timePassed=0,this.touchID=0,this.returnIndx=1,this.counter=0,this.delay=null,this.mouthIndx=0,this.currentMouthArr=null,this.waitTime=0,this.didPlayIdle=!1,this.mouthsArr={beach:[[0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,1,0,0,0,0,1,2,3,2,3,3,3,2,2,2,2,1,1,1,1,1,0,0,0,0,0,0,2,2,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,1,1,1,1,2,2,1,0,0,0,1,1,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,5,2,2,3,3,3,3,3,2,1,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,2,3,3,4,5,4,4,3,3,2,1,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,3,3,4,3,3,2,1,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,1,1,1,1,2,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0,1,3,4,4,5,4,2,0,0,0,0,0,0,1,2,1,1,1,0,0,0,0,0,0,1,2,3,3,3,4,3,5,5,2,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,2,1,1,0,0,0,0,0,0,0,1,1,1,0,1,0,0,1,1,1,1,1,0,0,1,1,0,0,1,1,4,4,4,4,5,2,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,2,2,1,1,0,0,1,1,1,2,3,2,1,2,5,4,4,3,2,2,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,2,3,3,2,2,2,3,3,1,2,2,1,1,1,2,2,2,2,2,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,2,3,2,2,2,2,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0]],garden:[[0,0,0,0,0,0,0,0,0,0,1,1,1,2,2,2,2,2,1,0,0,0,0,0,1,2,2,1,1,1,0,0,0,0,1,2,2,3,3,4,4,2,2,1,0,0,0,1,1,1,2,1,1,1,1,1,2,2,1,0,0,0,1,1,0,0,0,0,0,0,1,1,1,3,3,4,5,5,5,6,3,3,2,3,3,2,1,1,0,0,1,1,1,1,1,2,2,1,2,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,5,6,5,5,4,3,3,3,3,2,1,1,1,1,1,1,0,0,0,0,1,1,1,1,2,1,1,1,1,0,0,0,1,1,1,1,1,1,2,2,2,2,2,0,0,0,0,0,1,0,0,0,0,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,3,3,3,3,0,0,0,1,0,0,0,1,1,1,1,1,1,1,2,2,2,2,1,0,0,0,0,1,1,2,3,5,5,4,3,5,4,5,4,4,3,2,2,1,0,1,1,1,2,2,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,2,5,6,5,4,4,4,3,2,1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,2,2,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,2,3,4,4,3,3,2,1,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,2,3,4,4,4,4,2,4,4,3,2,3,3,2,1,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],sky:[[0,0,0,0,0,0,0,0,0,0,1,1,2,3,3,3,2,1,1,0,0,0,1,1,2,1,1,1,1,0,0,0,0,0,0,0,0,1,1,2,2,2,4,5,5,5,5,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,3,4,3,3,2,3,3,3,3,3,3,2,2,1,1,1,1,1,1,2,1,1,1,0,0,0,0,0,0,1,1,1,2,3,4,5,4,5,3,3,3,3,2,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,2,2,1,1,1,1,2,3,5,4,5,5,4,5,5,4,4,3,2,2,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,2,2,2,1,2,3,4,5,5,5,5,4,5,4,4,4,3,3,1,1,1,2,3,2,2,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,3,3,4,4,4,3,3,3,4,4,3,3,2,2,3,2,1,1,1,0,0,0,0,0,0,0,0,0,0,0,2,4,4,3,5,5,4,4,3,3,1,0,0,0,0,1,0,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0]],icecream:[[0,0,0,0,0,0,0,0,1,1,0,1,1,2,3,4,4,4,5,5,4,4,5,5,4,3,2,2,1,0,0,0,0,0,0,1,2,4,5,4,4,2,2,1,1,1,1,0,1,1,1,1,0,0,0,0,1,0,0,1,2,2,2,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,3,4,4,3,4,5,4,3,1,1,1,1,1,0,0,0,1,1,2,3,2,2,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,2,1,3,3,2,2,2,1,1,1,1,0,0,0,0,1,1,2,2,3,2,1,0,0,0,0,0,0,0,0,0,0,1,1,1,3,5,5,5,5,4,4,4,4,5,4,2,3,2,1,0,0,0,1,1,2,2,2,2,1,1,1,1,1,1,1,0,0,0,1,1,1,0,0,0,0,1,1,2,3,2,2,2,3,4,4,4,5,5,4,2,1,0,0,0,0,0,0,1,1,1,2,2,1,2,2,2,2,2,2,2,3,2,2,2,2,2,1,1,1,2,2,1,1,1,1,1,2,3,3,3,3,3,3,2,3,2,2,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,2,3,4,4,3,3,2,0,0,0,0,0,0,2,3,2,3,2,1,1,0,0,0,0,0,0,0,1,2,2,3,3,2,2,4,5,5,3,2,0,0,0,0,1,1,2,3,3,2,2,1,1,2,2,2,3,1,0,0,0,0,0,1,1,0,0,0,1,2,4,5,3,3,4,3,3,2,0,0,0,0,0,1,2,3,2,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,3,3,5,6,5,3,3,3,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],carnival:[[0,0,0,0,0,0,0,0,0,0,1,2,4,4,4,3,1,1,0,0,0,0,1,2,2,2,3,3,1,0,0,0,0,0,0,0,0,0,1,2,2,4,4,3,5,5,5,2,1,0,0,0,0,0,0,1,1,1,1,1,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,2,3,4,5,3,2,1,2,2,3,3,2,2,2,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,1,2,3,3,4,3,0,0,0,0,0,1,1,1,0,0,1,4,4,3,3,3,2,2,3,3,2,2,1,1,0,1,1,2,2,1,1,0,0,0,0,0,0,1,2,2,2,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,1,1,2,3,4,4,5,4,3,3,2,1,0,0,0,0,0,0,1,2,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,2,2,3,2,2,2,1,0,1,1,1,1,0,0,0,0,1,0,0,0,1,2,3,2,2,3,3,2,1,1,1,1,2,2,2,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1,1,3,3,4,3,4,4,3,3,3,3,2,1,1,1,1,2,2,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,5,4,4,3,3,3,2,2,2,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,2,2,2,1,1,0,0,0,1,2,3,2,3,3,3,4,5,1,2,2,2,3,4,4,0,0,0,0,0,1,1,1,0,1,4,4,4,3,3,3,3,3,2,2,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,2,2,2,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],generic:[[0,0,0,0,0,1,2,2,1,1,1,3,4,3,3,2,2,2,1,1,1,2,3,3,3,2,3,3,3,3,3,3,3,1,1,0,0,0,0,0,0,1,4,4,4,4,2,1,1,0,0,0,0,0,0,3,3,3,2,2,1,1,1,1,1,1,1,1,2,2,2,2,1,1,0,0,0,0,0,0,1,1,1,2,2,1,1,2,3,2,1,0,0,0,1,1,1,0,0,0,0,0,1,2,2,1,1,1,2,5,4,1,1,0,0,0,3,5,4,3,4,3,3,3,3,4,2,1,0,0,0,0,0,0,0,1,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,2,1,2,2,1,1,0,0,0,1,1,1,1,2,2,2,3,5,5,4,4,4,5,5,3,2,1,1,0,0,0,0,0,0,1,2,2,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,2,1,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,1,2,4,5,4,4,4,3,3,2,3,3,2,2,2,1,1,1,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,2,2,3,3,3,3,4,4,4,4,2,0,0,0,1,0,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,4,3,4,5,5,3,2,2,2,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,1,1,2,2,2,4,4,5,5,5,5,5,5,5,4,4,3,2,1,1,1,1,1,2,2,3,2,1,1,2,2,2,2,1,0,0,0,0,0,0,0,0,0,0,0,1,2,2,3,2,2,2,2,3,4,4,5,3,1,0,0,0,0,1,1,1,1,1,2,3,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,3,3,3,4,4,3,0,0,1,3,3,4,3,2,1,1,1,1,1,1,1,4,4,4,4,3,2,2,2,2,2,2,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"return":[[0,0,0,0,0,1,2,2,2,1,1,1,1,1,1,1,3,4,2,2,2,3,5,3,3,3,0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,2,3,4,6,5,4,4,4,3,4,4,4,4,4,3,3,3,3,3,2,2,2,2,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,2,1,1,1,1,3,4,4,4,5,5,5,5,4,3,2,1,1,1,1,2,3,3,3,2,1,1,1,1,1,1,1,2,4,4,4,5,5,3,2,1,0,0,0,1,2,2,2,2,2,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,1,1,0,0,0,0,0,1,1,2,3,3,2,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,2,3,3,2,2,1,1,1,0,0,1,2,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,3,4,3,3,3,3,2,2,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,2,3,2,3,5,5,2,1,1,0,1,1,0,1,0,1,0,0,0,1,1,1,1,1,2,3,3,3,2,2,2,2,2,2,2,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,1,2,2,2,1,0,0,0,0,0,1,2,2,1,0,0,0,1,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,1,2,4,5,4,4,3,2,2,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,3,3,3,3,3,3,3,2,3,3,2,2,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],idle:[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,2,3,3,3,2,1,1,2,2,2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,2,3,5,3,3,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,2,2,1,1,1,0,0,0,0,0,0,0,0,0,0,1,2,2,2,2,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,0,0,0,2,5,4,4,4,3,2,3,3,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,2,2,4,5,4,4,4,2,1,1,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,1,2,2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],tutorial:{beach:[0,0,0,0,0,0,1,1,1,2,2,5,5,5,4,2,2,3,3,2,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,3,4,4,5,5,5,4,4,5,2,1,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,2,2,2,2,2,2,1,0,0,0,0,0,0,0,0,1,2,3,2,2,2,2,2,1,2,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0],carnival:[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,2,2,4,4,3,4,3,3,3,2,3,2,1,0,1,1,1,0,0,1,1,0,0,0,0,0,1,2,3,1,2,2,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,1,2,1,0,0,0,0,0,1,3,5,6,4,4,4,3,3,2,2,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,2,1,2,2,1,2,2,3,3,3,4,3,3,3,3,0,0,0,0,0,0,0,1,1,0,0,0,0,0,3,4,5,4,4,3,2,2,2,2,2,1,1,0,0,0,1,2,2,1,1,0,0,0,0,1,2,2,2,2,1,1,1,1,2,2,2,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],garden:[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,2,3,5,5,4,4,3,3,3,4,2,2,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,3,2,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,2,1,0,0,0,0,0,0,2,3,5,5,5,5,4,4,4,4,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,0,0,0,0,0,0,0,0,1,1,2,3,4,3,3,3,3,4,2,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],icecream:[0,0,0,0,0,0,0,0,1,1,1,1,2,3,3,4,4,3,3,3,3,3,3,2,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,2,3,2,2,2,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,2,1,1,0,0,0,0,1,1,2,3,5,5,4,4,3,3,2,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,3,4,5,5,4,2,2,2,1,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,5,5,4,2,2,2,2,1,2,2,1,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,1,2,2,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],sky:[0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,3,4,4,3,3,3,3,3,2,2,1,1,0,1,1,1,0,0,0,0,0,1,0,0,0,0,0,0,1,1,2,2,2,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,2,0,0,0,0,0,0,1,3,5,5,4,5,4,4,3,3,3,2,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,2,3,3,1,1,2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,4,5,3,3,4,4,3,2,2,2,2,2,2,2,2,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},pink:[0,0,0,0,0,0,0,0,0,1,1,0,0,0,2,2,5,4,3,2,3,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,2,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,1,2,2,1,2,2,2,2,2,3,3,1,0,0,1,1,1,1,1,0,0,1,2,2,1,1,2,3,2,1,2,2,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,2,1,3,2,2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],checkmark:[0,0,0,0,0,0,0,1,1,0,0,1,2,5,4,4,3,2,2,2,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,2,4,3,4,5,2,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,2,3,3,4,3,2,2,3,3,2,2,2,2,2,2,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},this.sharedAnim=new WGBH.SharedAnimation;var d=new createjs.Bitmap(images.Overlay);this.addChild(d),d.x=-((app.config.scalingSize.maxWidth-app.config.scalingSize.width)/2),this.title=new createjs.Sprite(ss.game,"title_draw"),this.addChild(this.title),this.title.x=d.x+10,this.title.y=-10,this.border=new createjs.Sprite(ss.game,"dotted_box"),this.border.x=this.padOffsetX,this.border.y=this.padOffsetY-5,this.border.mouseEnabled=!1,this.border.mouseChildren=!1,this.drawingCanvas=new a,this.addChild(this.drawingCanvas),this.maskShape=new createjs.Shape,this.maskShape.graphics.f("#cccccc").rr(this.padOffsetX,this.padOffsetY,this.padWidth,this.padHeight,app.config.gameData.borderRadius),this.drawingBG=new createjs.Shape,this.drawingBG.graphics.f("white").dr(0,0,this.padWidth,this.padHeight),this.drawingBG.name="bg",this.drawingBG.alpha=.01,this.drawingCanvas.addChild(this.drawingBG),this.drawingCanvas.hitArea=new createjs.Shape((new createjs.Graphics).f("#000").dr(0,0,this.padWidth,this.padHeight)),this.drawingCanvas.mouseChildren=!1,this.drawingCanvas.mask=this.maskShape,this.drawingCanvas.x=this.padOffsetX,this.drawingCanvas.y=this.padOffsetY,this.drawUICont=new a,this.animateUICont=new a,this.animateUICont.visible=!1,this.finalDrawing=new a,this.animateUICont.addChild(this.finalDrawing),this.finalDrawing.x=this.padOffsetX,this.finalDrawing.y=this.padOffsetY,this.finalDrawing.mask=this.maskShape.clone(),this.addChild(this.border,this.drawUICont,this.animateUICont);var e,f,g,h=this.padOffsetX-235,i=this.padOffsetY+this.cirWidth+10;this.colorsArr=["#d64195","#ffa08a","#6fc4bf","#905ca6","#ff98c7","#fec544","#0c9ed9","#183495"],this.colorShapesArr=[];for(var j=0;j<this.colorsArr.length;j++){g=new createjs.Shape,g.graphics.f("white").dc(0,0,this.cirWidth),g.shadow=new createjs.Shadow("#000000",app.config.gameData.shadowDist,app.config.gameData.shadowDist,app.config.gameData.shadowBlur),g.x=h,g.y=i,g.alpha=app.config.gameData.shadowAlpha,e=new createjs.Shape;var k="white";e.graphics.f(this.colorsArr[j]).ss(this.strokeWidth).s(k).dc(0,0,this.cirWidth),this.drawUICont.addChild(g,e),e.x=h,e.y=i,e.indx=j,e.on("mousedown",this.chooseColor),3==j?(h+=125,i=this.padOffsetY+this.cirWidth+10):i+=127,this.colorShapesArr.push(e)}for(this.colorIndicator=new createjs.Shape,this.colorIndicator.graphics.f("rgba(0,0,0,0)").ss(5).s(this.colorsArr[0]).dc(0,0,this.cirWidth+5),this.colorIndicator.x=this.colorShapesArr[0].x,this.colorIndicator.y=this.colorShapesArr[0].y,this.drawUICont.addChild(this.colorIndicator),h=this.padOffsetX-290,i=this.padOffsetY+5,this.animateBtnArr=[],this.animateBtnSelectedArr=[],j=0;8>j;j++){var l=app.config.gameData.animationArr[j];f=new b(images["btn_"+l]),this.animateUICont.addChild(f),f.indx=j,f.x=h,f.y=i,f.on("mousedown",this.animateIt),this.animateBtnArr.push(f),f=new createjs.Sprite(ss.game,"btn_"+l+"_selected"),this.animateUICont.addChild(f),f.x=h+5,f.y=i+5,f.visible=!1,this.animateBtnSelectedArr.push(f),3==j?(h+=124,i=this.padOffsetY+5):i+=125}var m=[38,23,10];i=500,this.strokesArr=[];var n=this.padOffsetX+this.padWidth+87,o=230;for(this.brushCont=new createjs.Container,this.drawUICont.addChild(this.brushCont),this.brushCont.x=n,this.brushCont.y=o,this.strokeBG=new createjs.Shape,this.strokeBG.graphics.f(this.colorsArr[0]).rr(0,0,100,380,50),this.strokeBG.alpha=.1,this.brushCont.addChild(this.strokeBG),o=m[0]+100,n=m[0]+13,this.btn_plus_inactive=new createjs.Sprite(ss.game,"btn_plus_inactive"),this.btn_plus=new b(images.PlusButton),this.brushCont.addChild(this.btn_plus,this.btn_plus_inactive),this.btn_plus.x=9,this.btn_plus_inactive.x=9,this.btn_plus.y=10,this.btn_plus_inactive.y=10,this.btn_plus_inactive.visible=!1,j=0;3>j;j++)e=new createjs.Shape,e.graphics.f(j==this.selectedStroke?this.colorsArr[this.colorIndx]:"#cccccc").dc(0,0,m[j]),this.brushCont.addChild(e),e.x=n,e.y=o,e.indx=j,e.cirWidth=m[j],o+=2*m[j],this.strokesArr.push(e),e.on("mousedown",this.chooseStroke);this.btn_minus_inactive=new createjs.Sprite(ss.game,"btn_minus_inactive"),this.btn_minus=new b(images.MinusButton),this.brushCont.addChild(this.btn_minus,this.btn_minus_inactive),this.btn_minus.x=this.btn_minus_inactive.x=this.btn_plus.x,this.btn_minus.y=this.btn_minus_inactive.y=284,this.btn_minus_inactive.visible=!1,this.undoBtn=new b(images.UndoButton),this.drawUICont.addChild(this.undoBtn),this.undoBtn.regX=45,this.undoBtn.regY=45,this.undoBtn.x=this.padOffsetX+this.padWidth,this.undoBtn.y=this.padOffsetY+5,this.undoBtn.alpha=.5,this.undoBtn.enabled=!1,this.undoBtn.visible=!1,this.undoBtn.on("mousedown",this.undoDrawing),this.undoBtnInactive=new createjs.Sprite(ss.game,"btn_undo_inactive"),this.undoBtnInactive.regX=38,this.undoBtnInactive.regY=38,this.undoBtnInactive.x=this.undoBtn.x,this.undoBtnInactive.y=this.undoBtn.y,this.drawUICont.addChild(this.undoBtnInactive),this.doneBtn=new b(images.DoneButton),this.addChild(this.doneBtn),this.doneBtn.regX=67.5,this.doneBtn.regY=69,this.doneBtn.x=945,this.doneBtn.y=696,this.doneBtn.alpha=.5,this.doneBtn.enabled=!1,this.doneBtn.on("mousedown",this.checkProgress),this.askPinkBtn=new a,this.pinkBtn=new createjs.Sprite(ss.game,"btn_askPink"),this.pinkMouth=new createjs.Sprite(ss.game,"btn_askPink_mouth0"),this.pinkMouth.x=50,this.pinkMouth.y=70,this.askPinkBtn.addChild(this.pinkBtn,this.pinkMouth),this.drawUICont.addChild(this.askPinkBtn),this.askPinkBtn.regX=62,this.askPinkBtn.regY=62,this.askPinkBtn.x=this.doneBtn.x,this.askPinkBtn.y=142,this.drawingPrompt=new a,this.drawingPrompt.x=this.askPinkBtn.x-250,this.drawingPrompt.y=this.askPinkBtn.y-100,this.promptMC0=new createjs.Sprite(ss.game,"bubble0"),this.promptMC0.x=160,this.promptMC0.y=115,this.promptMC0.alpha=0,this.promptMC1=new createjs.Sprite(ss.game,"bubble1"),this.promptMC1.x=130,this.promptMC1.y=100,this.promptMC1.alpha=0,this.promptMC2=new createjs.Sprite(ss.game,"bubble2"),this.promptMC2.regX=75,this.promptMC2.regY=60,this.promptMC2.x=75,this.promptMC2.y=60,this.promptMC2.scaleX=this.promptMC2.scale=0;var p=this.promptIndx<3?app.selectedScene:"generic";this.promptDrawingMC=new createjs.Sprite(ss.game,"prompt_"+p+app.config.gameData.prompts[app.selectedScene][this.promptIndx]);var q=ss.game.getAnimation("prompt_"+p+app.config.gameData.prompts[app.selectedScene][this.promptIndx]).frames[0],r=ss.game.getFrameBounds(q);this.promptIndx=-1,this.promptDrawingMC.regX=r.width/2,this.promptDrawingMC.regY=r.height/2,this.promptDrawingMC.x=74,this.promptDrawingMC.y=60,this.promptDrawingMC.scaleX=this.promptDrawingMC.scaleY=0,this.drawingPrompt.addChild(this.promptMC0,this.promptMC1,this.promptMC2,this.promptDrawingMC),this.drawUICont.addChild(this.drawingPrompt),this.backBtn=new b(images.BackButton),this.addChild(this.backBtn),this.backBtn.x=20,this.backBtn.y=80,this.backBtn.on("mousedown",this.goBack),this.sparkleCont=new createjs.Container,this.addChild(this.sparkleCont),app.firstAnimStickers?(this.hand=new createjs.Bitmap(images.tutorial_hand),this.addChild(this.hand),this.hand.x=-200,this.hand.visible=!1,this.tutorialAnim=!0):this.tutorialAnim=!1,this.btn_plus.on("mousedown",this.addBrush),this.btn_minus.on("mousedown",this.minusBrush),this.askPinkBtn.on("mousedown",this.getDrawingPrompt),this.drawingCanvas.addEventListener("mousedown",this.handleMouseDown),app.display.stage.addEventListener("stagemouseup",this.handleMouseUp),app.display.stage.addEventListener("stagemousemove",this.handleMouseMove)},d.getDrawingPrompt=function(a){if(!(this.isDrawing||this.animateUICont.visible&&this.tutorialAnim)){this.stopIdle(),app.sound.play("sfx_pink"),createjs.Tween.removeTweens(this.promptMC0),createjs.Tween.removeTweens(this.promptMC1),createjs.Tween.removeTweens(this.promptMC2),createjs.Tween.removeTweens(this.promptDrawingMC),createjs.Tween.removeTweens(this.drawingPrompt),this.drawingPrompt.alpha=1,this.promptMC0.alpha=0,this.promptMC1.alpha=0,this.promptMC2.scaleX=this.promptMC2.scaleY=0,this.promptDrawingMC.scaleX=this.promptDrawingMC.scaleY=0,this.askPinkBtn.scaleX=this.askPinkBtn.scaleY=1,this.promptIndx++,this.promptIndx>=5&&(this.promptIndx=0),this.drawingPrompt.visible=!0,this.drawingPrompt.alpha=1;var b=this.promptIndx<3?app.selectedScene:"generic";this.promptDrawingMC.gotoAndStop("prompt_"+b+app.config.gameData.prompts[app.selectedScene][this.promptIndx]);var c=ss.game.getAnimation("prompt_"+b+app.config.gameData.prompts[app.selectedScene][this.promptIndx]).frames[0],d=ss.game.getFrameBounds(c);this.promptDrawingMC.regX=d.width/2,this.promptDrawingMC.regY=d.height/2;var e="ag_prompt_"+b+(app.config.gameData.prompts[app.selectedScene][this.promptIndx]+1);this.didPlayIdle=!0,app.voPlayer.play([200,e],this.stopLipSync),this.startLipSync(this.mouthsArr[b][app.config.gameData.prompts[app.selectedScene][this.promptIndx]]),createjs.Tween.get(this.promptMC0).to({alpha:1},10),createjs.Tween.get(this.promptMC1).wait(100).to({alpha:1},10),createjs.Tween.get(this.promptMC2).wait(200).to({scaleX:1.2,scaleY:1.2},100).to({scaleX:1,scaleY:1},100),createjs.Tween.get(this.promptDrawingMC).wait(600).to({alpha:1,scaleX:1.2,scaleY:1.2},100).to({scaleX:1,scaleY:1},100),createjs.Tween.get(this.drawingPrompt).wait(3e3).to({alpha:0},500)}},d.update=function(a){this.currentMouthArr&&app.voPlayer.currentPosition>0&&(this.mouthIndx<this.currentMouthArr.length-1?(this.pinkMouth.gotoAndStop("btn_askPink_mouth"+this.currentMouthArr[this.mouthIndx]),this.mouthIndx++):(this.currentMouthArr=null,this.pinkMouth.gotoAndStop("btn_askPink_mouth0")))},d.goBack=function(a){this.isDrawing||(this.backBtn._stateFlags.over=!1,this.backBtn._updateState(),0==this.checkIndx?(this.stopLipSync(),app.voPlayer.stop(),this.stopIdle(),app.sound.play("sfx_click"),this.goBackFunc(),this.panel.drawingPad.stopDrawing(!0)):this.checkProgress(a))},d.closeDrawingPad=function(){this.stopDrawing(!0),this.closeFunc()},d.startDrawing=function(a){for(app.on("update",this.update),this.didPlayIdle=!1,this.currentMouthArr=null,this.mouthIndx=0,createjs.Tween.removeAllTweens(),this.drawingPrompt.alpha=1,this.promptMC0.alpha=0,this.promptMC1.alpha=0,this.promptMC2.scaleX=this.promptMC2.scaleY=0,this.promptDrawingMC.scaleX=this.promptDrawingMC.scaleY=0,this.askPinkBtn.scaleX=this.askPinkBtn.scaleY=1,this.promptIndx=-1,this.touchID=0,this.isDrawing=!1,this.tutorialAnim=app.firstAnimStickers,this.drawingIndx=a,this.checkIndx=1,this.checkProgress(),this.visible=!0,this.animateIndx=-1,this.animateUICont.visible=!1,this.drawUICont.visible=!0,this.drawingCanvas.visible=!0;this.drawingCanvas.numChildren>1;)this.drawingCanvas.removeChildAt(this.drawingCanvas.numChildren-1);this.undoBtn.alpha=.5,this.undoBtn.enabled=!1,this.undoBtn.visible=!1,this.undoBtnInactive.visible=!0,this.parent.addChild(this),this.doneBtn.alpha=.5,this.doneBtn.enabled=!1,this.didMove=!1,this.counter++,app.scenesArr[app.selectedSceneIndx].firstDraw?(app.scenesArr[app.selectedSceneIndx].firstDraw=!1,app.voPlayer.play([200,"ag_tutorial_draw_"+app.selectedScene],this.sparklePink),this.startLipSync(this.mouthsArr.tutorial[app.selectedScene])):4==this.counter?this.playIdle(0,!0):(app.voPlayer.play([200,"ag_draw_return"+this.returnIndx],this.startIdleTimer),this.startLipSync(this.mouthsArr["return"][this.returnIndx-1]),this.returnIndx++,this.returnIndx=this.returnIndx>4?1:this.returnIndx)},d.sparklePink=function(a){app.voPlayer.play([200,"ag_tutorial_draw_pink"],this.startIdleTimer),this.startLipSync(this.mouthsArr.pink),this.sharedAnim.flashButton(this.askPinkBtn);var b={x:this.askPinkBtn.x,y:this.askPinkBtn.y,init_pause_fact:0};this.sharedAnim.sparkleMeMany(this,this.sparkleCont,b,!1)},d.startIdleTimer=function(){this.didPlayIdle||(this.delay=new DelayedCall(this.playIdle,this.IDLE_TIME))},d.stopIdle=function(){this.delay&&(this.delay.destroy(),this.delay=null,createjs.Tween.removeTweens(this))},d.playIdle=function(a,b){b?app.voPlayer.play([200,"ag_draw_idle"],this.startIdleTimer):(this.didPlayIdle=!0,app.voPlayer.play([200,"ag_draw_idle"])),this.startLipSync(this.mouthsArr.idle),createjs.Tween.get(this).wait(1400).call(function(){this.sharedAnim.flashButton(this.askPinkBtn);var a={x:this.askPinkBtn.x,y:this.askPinkBtn.y,init_pause_fact:0};this.sharedAnim.sparkleMeMany(this,this.sparkleCont,a,!1)}.bind(this))},d.undoDrawing=function(a){a.preventDefault(),1==this.undoBtn.alpha&&this.drawingCanvas.numChildren>1&&(app.sound.play("sfx_brush"),this.drawingCanvas.removeChildAt(this.drawingCanvas.numChildren-1),1==this.drawingCanvas.numChildren&&(this.undoBtn.alpha=.5,this.undoBtn.enabled=!1,this.undoBtn.visible=!1,this.undoBtnInactive.visible=!0,this.doneBtn.alpha=.5,this.doneBtn.enabled=!1))},d.checkProgress=function(a){if(!(a&&a.currentTarget==this.doneBtn&&this.doneBtn.alpha<1||this.isDrawing||this.animateUICont.visible&&this.tutorialAnim)){if(this.backBtn.enabled&&a&&app.sound.play("sfx_click"),this.stopIdle(),a&&a.currentTarget==this.doneBtn&&1==this.checkIndx)return void this.finishedDrawingFunc();if(createjs.Tween.removeAllTweens(),this.drawingPrompt.alpha=1,this.promptMC0.alpha=0,this.promptMC1.alpha=0,this.promptMC2.scaleX=this.promptMC2.scaleY=0,this.promptDrawingMC.scaleX=this.promptDrawingMC.scaleY=0,this.askPinkBtn.scaleX=this.askPinkBtn.scaleY=1,this.checkIndx=0==this.checkIndx?1:0,this.drawUICont.visible=0==this.checkIndx?!0:!1,this.animateUICont.visible=!this.drawUICont.visible,this.animateUICont.visible)if(this.animateIndx=-1,this.stopLipSync(),this.stopDrawing(),this.title.gotoAndStop("title_move"),this.art=this.getDrawing(),this.art.regX=this.padWidth/2,this.art.regY=this.padHeight/2,this.art.x=this.padWidth/2,this.art.y=this.padHeight/2,this.art.initX=this.art.x,this.art.initY=this.art.y,this.art.initScale=.5,this.art.scaleX=this.art.scaleY=.5,this.finalDrawing.addChild(this.art),this.drawingCanvas.visible=!1,this.doneBtn.alpha=.5,this.doneBtn.enabled=!1,app.firstAnimStickers){this.animateIt({currentTarget:this.animateBtnArr[0]}),app.firstAnimStickers=!1,this.backBtn.enabled=!1,this.backBtn.alpha=.5,app.voPlayer.stop(),app.voPlayer.play([300,"ag_tutorial_anim",200,"ag_checkmark"]),this.hand.x=0,this.hand.visible=!0;for(var b=0;b<this.animateBtnArr.length;b++)this.animateBtnArr[b].enabled=!1;createjs.Tween.get(this.hand).to({x:60,y:260},300).wait(1500).to({x:180,y:620},300).call(function(){this.animateIt({currentTarget:this.animateBtnArr[this.animateBtnArr.length-1]})}.bind(this)).wait(500).to({x:this.doneBtn.x-20,y:this.doneBtn.y-40},300).wait(2e3).to({y:800},200).call(function(){this.tutorialAnim=!1,this.backBtn.enabled=!0,this.backBtn.alpha=1;for(var a=0;a<this.animateBtnArr.length;a++)this.animateBtnArr[a].enabled=!0,this.animateBtnSelectedArr[a].visible=!1}.bind(this))}else app.voPlayer.stop(),this.animateIt({currentTarget:this.animateBtnArr[this.animateBtnArr.length-1]}),this.animateBtnSelectedArr[this.animateBtnArr.length-1].visible=!1,this.animateBtnArr[this.animateBtnArr.length-1].enabled=!0;else this.stopLipSync(),createjs.Touch.enable(app.display.stage),this.doneBtn.alpha=this.drawingCanvas.numChildren>1?1:.5,this.title.gotoAndStop("title_draw"),this.drawingCanvas.addEventListener("mousedown",this.handleMouseDown),app.display.stage.addEventListener("stagemouseup",this.handleMouseUp),app.display.stage.addEventListener("stagemousemove",this.handleMouseMove),this.drawingCanvas.visible=!0,this.didMove=!1,null!=this.art&&(createjs.Tween.removeTweens(this.art),this.art.uncache(),this.finalDrawing.removeChild(this.art),this.art=null);for(;this.sparkleCont.numChildren>0;)this.sparkleCont.removeChildAt(0)}},d.startLipSync=function(a){this.waitTime=0,this.currentMouthArr=a,this.mouthIndx=0,this.pinkMouth.gotoAndStop("btn_askPink_mouth0"),app.on("update",this.update)},d.stopLipSync=function(){app.off("update",this.update),this.currentMouthArr=null,this.mouthIndx=0,this.pinkMouth.gotoAndStop("btn_askPink_mouth0")},d.setListeners=function(a,b){this.finishedDrawingFunc=a,this.goBackFunc=b},d.chooseColor=function(a){a.preventDefault(),app.sound.play("sfx_brush"),this.eraseIt=!1,this.colorIndx=a.currentTarget.indx;for(var b=0;b<this.colorsArr.length;b++){var c=this.colorShapesArr[b],d="white";if(c.graphics.clear().f(this.colorsArr[b]).ss(this.strokeWidth).s(d).dc(0,0,this.cirWidth),b==this.colorIndx){this.colorIndicator.x=c.x,this.colorIndicator.y=c.y;var e={x:c.x,y:c.y,init_pause_fact:0,init_scale:.6};this.sharedAnim.sparkleMeMany(this,this.sparkleCont,e,!1)}}this.updateStroke()},d.updateStroke=function(){for(var a=0;a<this.strokesArr.length;a++){var b=this.strokesArr[a],c=(a==this.selectedStroke?"black":"white",a==this.selectedStroke?this.colorsArr[this.colorIndx]:"#cccccc");b.graphics.clear().f(c).dc(0,0,b.cirWidth)}},d.chooseStroke=function(a){a.preventDefault(),app.sound.play("sfx_brush"),this.eraseIt=!1,this.selectedStroke=a.currentTarget.indx,this.strokeStyle=this.strokeStyleArr[this.selectedStroke];var b={x:this.brushCont.x+a.currentTarget.x,y:this.brushCont.y+a.currentTarget.y,init_pause_fact:0,init_scale:.6};this.sharedAnim.sparkleMeMany(this,this.sparkleCont,b,!1),this.updateStroke(),this.btn_plus_inactive.visible=!1,this.btn_plus.visible=!0,this.btn_minus_inactive.visible=!1,this.btn_minus.visible=!0,0==this.selectedStroke?(this.btn_plus_inactive.visible=!0,this.btn_plus.visible=!1):2==this.selectedStroke&&(this.btn_minus_inactive.visible=!0,this.btn_minus.visible=!1)},d.addBrush=function(a){if(this.selectedStroke>0){this.selectedStroke--,this.strokeStyle=this.strokeStyleArr[this.selectedStroke],app.sound.play("sfx_brush"),0==this.selectedStroke?(this.btn_plus_inactive.visible=!0,this.btn_plus.visible=!1):(this.btn_plus_inactive.visible=!1,this.btn_plus.visible=!0),this.btn_minus.visible=!0,this.btn_minus_inactive.visible=!1;var b={x:this.strokesArr[this.selectedStroke].x+this.brushCont.x,y:this.strokesArr[this.selectedStroke].y+this.brushCont.y,init_pause_fact:0,init_scale:.6};this.sharedAnim.sparkleMeMany(this,this.sparkleCont,b,!1),this.updateStroke()}},d.minusBrush=function(a){if(this.selectedStroke<2){this.selectedStroke++,this.strokeStyle=this.strokeStyleArr[this.selectedStroke],app.sound.play("sfx_brush"),2==this.selectedStroke?(this.btn_minus_inactive.visible=!0,this.btn_minus.visible=!1):(this.btn_minus_inactive.visible=!1,this.btn_minus.visible=!0),this.btn_plus.visible=!0,this.btn_plus_inactive.visible=!1;var b={x:this.strokesArr[this.selectedStroke].x+this.brushCont.x,y:this.strokesArr[this.selectedStroke].y+this.brushCont.y,init_pause_fact:0,init_scale:.6};this.sharedAnim.sparkleMeMany(this,this.sparkleCont,b,!1),this.updateStroke()}},d.animateIt=function(a){if(void 0==a.type||!this.tutorialAnim){for(var b=0;b<this.animateBtnArr.length;b++){var c=this.animateBtnArr[b];b==a.currentTarget.indx?(c.enabled=!1,this.animateBtnSelectedArr[b].visible=!0):(c.enabled=this.tutorialAnim?!1:!0,this.animateBtnSelectedArr[b].visible=!1)}if(this.animateIndx!=a.currentTarget.indx){if(app.sound.play("sfx_pick"),a.target){this.doneBtn.alpha=1,
this.doneBtn.enabled=!0;var d={x:a.currentTarget.x+this.cirWidth,y:a.currentTarget.y+this.cirWidth,init_pause_fact:0,init_scale:.6};this.sharedAnim.sparkleMeMany(this,this.sparkleCont,d,!1),this.animateIndx=a.currentTarget.indx}return a.currentTarget.indx==this.animateBtnArr.length-1?(createjs.Tween.removeTweens(this.art),this.art.x=this.art.initX,this.art.y=this.art.initY,this.art.scaleX=this.art.scaleY=this.art.initScale,void(this.art.rotation=0)):void this.sharedAnim.startUserDefinedAnimation(this.art,this.animateIndx,!1)}}},d.handleMouseDown=function(a){if(0===this.touchID){this.stopIdle(),this.touchID=app.hasTouch?a.pointerID:100;var b=this.globalToLocal(a.stageX,a.stageY);this.lastPt={x:b.x-this.padOffsetX-this.brushOffset,y:b.y-this.padOffsetY-this.brushOffset},this.isDrawing=!0,this.didMove=!0,this.currentDrawing=new createjs.Shape,this.currentDrawing.graphics.f(this.colorsArr[this.colorIndx]).dc(this.lastPt.x,this.lastPt.y,this.strokeStyle/2),this.drawingCanvas.addChild(this.currentDrawing),this.startTime=Date.now()}},d.handleMouseUp=function(a){app.hasTouch&&this.touchID!=a.pointerID||(this.touchID=0,this.isDrawing=!1,this.didMove&&(this.drawingCanvas.numChildren>1&&(this.undoBtn.alpha=1,this.doneBtn.alpha=1,this.undoBtn.enabled=!0,this.undoBtn.visible=!0,this.undoBtnInactive.visible=!1,this.doneBtn.enabled=!0),this.timePassed+=Date.now()-this.startTime,this.timePassed>3e3&&app.firstDone&&null==app.voPlayer.currentVO&&null==this.currentMouthArr&&(app.firstDone=!1,app.voPlayer.play([200,"ag_checkmark"]),this.startLipSync(this.mouthsArr.checkmark),this.sharedAnim.flashButton(this.doneBtn))))},d.handleMouseMove=function(a){if((!app.hasTouch||this.touchID==a.pointerID)&&this.isDrawing){var b=this.globalToLocal(a.stageX,a.stageY),c={x:b.x-this.padOffsetX-this.brushOffset,y:b.y-this.padOffsetY-this.brushOffset};this.currentDrawing.graphics.s(this.colorsArr[this.colorIndx]).ss(this.strokeStyle,"round","round").mt(this.lastPt.x,this.lastPt.y).lt(c.x,c.y),this.lastPt=c}},d.stopDrawing=function(a){a&&(this.visible=!1),this.animateUICont.visible&&this.art&&(createjs.Tween.removeTweens(this.art),this.finalDrawing.removeChild(this.art),this.art=null),this.drawingCanvas.removeEventListener("mousedown",this.handleMouseDown),app.display.stage.removeEventListener("stagemouseup",this.handleMouseUp),app.display.stage.removeEventListener("stagemousemove",this.handleMouseMove)},d.getDrawing=function(){this.drawingCanvas.visible=!0;var a=this.drawingCanvas.clone(!0);return a.mask=null,a.cache(0,0,this.padWidth,this.padHeight),a},namespace("WGBH").DrawingPad=c}(),function(){var a=include("createjs.Container"),b=include("springroll.easeljs.Button"),c=function(b,c,d){a.call(this),this.activateDrawing=this.activateDrawing.bind(this),this.activateColoring=this.activateColoring.bind(this),this.changeTab=this.changeTab.bind(this),this.flyoutSelected=this.flyoutSelected.bind(this),this.startMainIdleSparkles=this.startMainIdleSparkles.bind(this),this.stopMainIdleSparkles=this.stopMainIdleSparkles.bind(this),this.startFlyoutIdleSparkles=this.startFlyoutIdleSparkles.bind(this),this.stopFlyoutIdleSparkles=this.stopFlyoutIdleSparkles.bind(this),this.dragManager=b,this.drawingFunc=c,this.coloringFunc=d,this.setup()},d=(a.prototype,extend(c,a));d.setup=function(){this.sparklesArr=[],this.sparklesStaticArr=[],this.flyoutStaticArr=[],this.flyoutSparklesArr=[[],[],[],[]],this.selectedTab=-1;var c,d,e,f=50,g=70;this.sharedAnim=new WGBH.SharedAnimation;var h=new createjs.Sprite(ss.game,"drawer_bg");this.addChild(h),this.mainCont=new a,this.addChild(this.mainCont),this.mainCont.y=130,this.mainCont.x=30,this.tabsArr=[],this.tabsContArr=[];var i=["draw","color","props","friends"],j=0,k=165,l=[-90,-90,-80,40],m=[-30,0,10,20],n=[-50,0,0,-20];for(c=0;c<i.length;c++){var o=new a,p=new createjs.Sprite(ss.game,"sparkles_"+i[c]);this.addChildAt(p,1),this.sparklesStaticArr.push(p);var q=new b(images["btn_"+i[c]]);q.regX=78.5,q.regY=82,q.name="tab",o.addChild(q),q.x=78.5,q.y=j+82,p.x=0,p.y=q.y+m[c],j+=140,k+=5,this.addChildAt(o,1),o.y=80,o.name="tab"+c,o.index=c,this.tabsArr.push(o);var r=new a;this.mainCont.addChild(r),this.tabsContArr.push(r),r.visible=!1,r.x=115,r.y=l[c];var s=new createjs.Sprite(ss.game,"flyout_"+i[c]);r.addChild(s),r.on("mousedown",this.flyoutSelected);var t=new createjs.Sprite(ss.game,"flyout_sparkles");t.y=n[c],r.addChild(t),this.flyoutStaticArr.push(t)}var u=[{sparkle:"Sparkle",maxScale:.4,wait1:0,pos:{x:150,y:123}},{sparkle:"Sparkle2",maxScale:.5,wait1:130,pos:{x:53,y:492}},{sparkle:"Sparkle",maxScale:.4,wait1:333,pos:{x:135,y:635}},{sparkle:"Sparkle2",maxScale:.3,wait1:533,pos:{x:19,y:195}},{sparkle:"Sparkle",maxScale:.4,wait1:850,pos:{x:121,y:364}},{sparkle:"Sparkle3",maxScale:.3,wait1:1200,pos:{x:32,y:400}},{sparkle:"Sparkle3",maxScale:.3,wait1:1400,pos:{x:32,y:615}},{sparkle:"Sparkle2",maxScale:.4,wait1:1400,pos:{x:122,y:252}},{sparkle:"Sparkle",maxScale:.4,wait1:1600,pos:{x:151,y:119}},{sparkle:"Sparkle",maxScale:.4,wait1:2100,pos:{x:123,y:338}},{sparkle:"Sparkle2",maxScale:.4,wait1:3e3,pos:{x:47,y:489}},{sparkle:"Sparkle2",maxScale:.4,wait1:3300,pos:{x:124,y:252}}];for(c=0;c<u.length;c++)e=new createjs.Bitmap(images[u[c].sparkle]),e.regX=e.image.width/2,e.regY=e.image.height/2,e.initX=u[c].pos.x,e.initY=u[c].pos.y,e.x=e.initX,e.y=e.initY,e.wait1=u[c].wait1,e.maxScale=u[c].maxScale,e.scaleX=e.scaleY=e.maxScale,this.sparklesArr.push(e),this.addChild(e);this.deleteBtn=new createjs.Sprite(ss.game,"btn_trash"),this.addChild(this.deleteBtn),this.deleteBtn.x=30,this.deleteBtn.y=655,this.deleteBtn.alpha=.5,this.deleteSparkles=new createjs.Sprite(ss.game,"trash_sparkles"),this.addChild(this.deleteSparkles),this.deleteSparkles.x=this.deleteBtn.x-40,this.deleteSparkles.y=this.deleteBtn.y-20,this.deleteSparkles.alpha=0,g=0;var v,w=[{sparkle:"Sparkle",maxScale:.6,wait1:0,pos:{x:150,y:50}},{sparkle:"Sparkle2",maxScale:.6,wait1:300,pos:{x:35,y:150}},{sparkle:"Sparkle3",maxScale:.5,wait1:700,pos:{x:155,y:250}},{sparkle:"Sparkle2",maxScale:.7,wait1:1200,pos:{x:35,y:430}},{sparkle:"Sparkle",maxScale:.5,wait1:1600,pos:{x:40,y:350}},{sparkle:"Sparkle3",maxScale:.8,wait1:2e3,pos:{x:157,y:450}}];for(c=0;c<this.tabsArr.length;c++){if(this.tabsArr[c].on("mousedown",this.changeTab),0==c)for(d=0;5>d;d++)v=new createjs.Sprite(ss.game,"btn_add"),this.tabsContArr[c].addChild(v),v.x=f-5,v.y=105*d+30,v.name="draw"+d,v.indx=d,v.typeIndx=c,v.on("mousedown",this.activateDrawing),v.cont=this.tabsContArr[c],v.par=this;else if(1==c){var x,y;for(d=0;d<app.config.gameData.color[app.selectedScene].length;d++)v=new a,this.tabsContArr[c].addChild(v),x=new createjs.Shape,x.graphics.f("white").dr(0,0,104,104),x.alpha=.01,y=new createjs.Sprite(ss.game,"icon_"+app.selectedScene+"_color"+d),v.addChild(x,y),v.x=f-6,v.y=110*d+20,v.name="draw"+d,v.indx=d,v.generic=!1,v.mouseChildren=!1,v.typeIndx=c,v.on("mousedown",this.activateColoring),v.cont=this.tabsContArr[c],v.par=this;v=new a,this.tabsContArr[c].addChild(v),x=new createjs.Shape,x.graphics.f("white").dr(0,0,104,104),x.alpha=.01,y=new createjs.Sprite(ss.game,"icon_color3"),v.addChild(x,y),v.x=f-6,v.y=570,v.name="draw"+d,v.indx=5,v.generic=!0,v.mouseChildren=!1,v.typeIndx=c,v.on("mousedown",this.activateColoring),v.cont=this.tabsContArr[c],v.par=this}else if(2==c){var z=100;for(d=0;5>d;d++)v=new WGBH.DragSprite("props",!1,app.selectedScene+d),this.tabsContArr[c].addChild(v),v.setPosition(f+48,(d-1)*z+180),v.name="PropsStickers",v.type="props",v.nav=!0,v.imgName=app.selectedScene+d,v.typeIndx=c,this.dragManager.addObject(v,new createjs.Rectangle(0,0,app.config.scalingSize.maxWidth,app.config.scalingSize.maxHeight),new createjs.Point(0,0)),v.enableDrag(),v.cont=this.tabsContArr[c],v.par=this,v.animateIndx=d+8;v=new WGBH.DragSprite("props",!1,"props3"),this.tabsContArr[c].addChild(v),v.setPosition(f+48,4*z+180),v.name="PropsStickers",v.type="props",v.nav=!0,v.imgName="props3",v.typeIndx=c,this.dragManager.addObject(v,new createjs.Rectangle(0,0,app.config.scalingSize.maxWidth,app.config.scalingSize.maxHeight),new createjs.Point(0,0)),v.enableDrag(),v.cont=this.tabsContArr[c],v.par=this,v.animateIndx=13}else if(3==c)for(d=0;6>d;d++)v=new WGBH.DragSprite("friends",!1,"friends"+d),this.tabsContArr[c].addChild(v),v.setPosition(f+45,90*(d-1)+150),v.name="FriendsSticker",v.type="friends",v.nav=!0,v.typeIndx=c,v.imgName="friends"+d,this.dragManager.addObject(v),v.enableDrag(),v.cont=this.tabsContArr[c],v.par=this,v.indx=d,v.animateIndx=15+d;for(d=0;d<w.length;d++)e=new createjs.Bitmap(images[w[d].sparkle]),e.regX=e.image.width/2,e.regY=e.image.height/2,e.initX=w[d].pos.x,e.initY=w[d].pos.y,e.x=e.initX,e.y=e.initY,e.wait1=w[d].wait1,e.maxScale=w[d].maxScale,e.scaleX=e.scaleY=e.maxScale,this.flyoutSparklesArr[c].push(e),this.tabsContArr[c].addChild(e)}this.sparkleCont=new a,this.addChild(this.sparkleCont)},d.startMainIdleSparkles=function(){var a;for(a=0;a<this.sparklesStaticArr.length;a++)createjs.Tween.get(this.sparklesStaticArr[a],{loop:!0,override:!0}).to({alpha:.5},1e3).to({alpha:1},2100);for(a=0;a<this.sparklesArr.length;a++)this.sharedAnim.sparkleLoop(this.sparklesArr[a],!1)},d.stopMainIdleSparkles=function(){var a;for(a=0;a<this.sparklesStaticArr.length;a++)createjs.Tween.removeTweens(this.sparklesStaticArr[a]),this.sparklesStaticArr[a].alpha=1;for(a=0;a<this.sparklesArr.length;a++)createjs.Tween.removeTweens(this.sparklesArr[a]),this.sparklesArr[a].scaleX=this.sparklesArr[a].scaleY=0,this.sparklesArr[a].alpha=1},d.startFlyoutIdleSparkles=function(){for(i=0;i<this.flyoutSparklesArr.length;i++)if(this.tabsContArr[i].visible)for(createjs.Tween.get(this.flyoutStaticArr[i],{loop:!0,override:!0}).to({alpha:.5},1e3).to({alpha:1},2100),j=0;j<this.flyoutSparklesArr[i].length;j++)this.sharedAnim.sparkleLoop(this.flyoutSparklesArr[i][j])},d.stopFlyoutIdleSparkles=function(){for(i=0;i<this.flyoutSparklesArr.length;i++)for(createjs.Tween.removeTweens(this.flyoutStaticArr[i]),this.flyoutStaticArr[i].alpha=1,j=0;j<this.flyoutSparklesArr[i].length;j++)createjs.Tween.removeTweens(this.flyoutSparklesArr[i][j]),this.flyoutSparklesArr[i][j].scaleX=this.flyoutSparklesArr[i][j].scaleY=0,this.flyoutSparklesArr[i][j].alpha=1},d.flyoutSelected=function(a){a.stopPropagation()},d.toggleTrashBtn=function(a){var b=.5==this.deleteBtn.alpha?!0:!1;this.deleteBtn.alpha=a?1:.5,a&&b&&createjs.Tween.get(this.deleteSparkles).to({alpha:1},500).wait(200).to({alpha:0},500)},d.hideButton=function(a,b,c){1==a?(this.tabsContArr[a].getChildByName("draw"+b).visible=!1,c.setPosition(93,110*b+72)):(this.tabsContArr[a].getChildByName("draw"+b).visible=!1,c.setPosition(93,105*b+75))},d.activateDrawing=function(a){app.sound.play("sfx_select"),this.drawingFunc(a)},d.activateColoring=function(a){app.sound.play("sfx_select"),this.coloringFunc(a)},d.toggleFriends=function(a){for(var b=0;b<this.tabsContArr[3].numChildren;b++){var c=this.tabsContArr[3].getChildAt(b);c.imgName==a.imgName&&c.setActive()}},d.sparkleButton=function(a){var b=this.tabsArr[a].getChildAt(0);this.sharedAnim.flashButton(b);var c={x:b.x-50,y:b.y+this.tabsArr[a].y-20,init_pause_fact:0,init_scale:.6};this.sharedAnim.sparkleMeMany(this,this.sparkleCont,c,!1);var d={x:b.x+50,y:b.y+this.tabsArr[a].y+50,init_pause_fact:0,init_scale:.6};this.sharedAnim.sparkleMeMany(this,this.sparkleCont,d,!1)},d.sparkleSubButton=function(a,b,c){this.sharedAnim.flashButton(a),app.sound.play("sfx_sparkle");var d={x:a.x+this.tabsContArr[b].x,y:a.y+5,init_pause_fact:0,init_scale:.3,sparkle:"Sparkle2"};this.sharedAnim.sparkleMeMany(this,this.sparkleCont,d,!1);var e={x:a.x+this.tabsContArr[b].x+50,y:a.y+50,init_pause_fact:0,init_scale:.6};this.sharedAnim.sparkleMeMany(this,this.sparkleCont,e,!1)},d.stopSparkle=function(){for(;this.sparkleCont.numChildren>0;)createjs.Tween.removeTweens(this.sparkleCont.getChildAt(0)),this.sparkleCont.removeChildAt(0);this.stopMainIdleSparkles(),this.stopFlyoutIdleSparkles()},d.changeTab=function(a){if(this.isActive&&!app.popupOn){app.firstNav&&(app.firstNav=!1,app.voPlayer.stop()),a.target&&app.sound.play("sfx_click");var b;if(void 0!=a.currentTarget.index)for(var c=0;c<this.tabsArr.length;c++)if(this.tabsArr[c].getChildByName("tab").alpha=1,b=this.tabsArr[c].getChildAt(0),c==a.currentTarget.index){if(this.tabsContArr[c].visible=!this.tabsContArr[c].visible,this.tabsContArr[c].visible){b.enabled=!1,b._stateFlags={up:!1,over:!1,down:!0},b._updateState(),this.selectedTab=c;var d={x:b.x+20,y:b.y+120,init_pause_fact:0,sparkle:"Sparkle2",init_scale:.5};this.sharedAnim.sparkleMeMany(this,this.sparkleCont,d,!1);var e={x:b.x-10,y:b.y+30,init_pause_fact:0,sparkle:"Sparkle3",init_scale:.7};this.sharedAnim.sparkleMeMany(this,this.sparkleCont,e,!1);var f={x:b.x,y:b.y+100,init_pause_fact:0,init_scale:.6};this.sharedAnim.sparkleMeMany(this,this.sparkleCont,f,!1),this.startFlyoutIdleSparkles()}else this.stopFlyoutIdleSparkles(),this.selectedTab=-1,b.enabled=!0,b._stateFlags={up:!0,over:!1,down:!1},b._updateState();void 0==a.currentTarget.name&&(this.selectedTab=-1)}else this.tabsContArr[c].visible=!1,b.enabled=!0,b._stateFlags={up:!0,over:!1,down:!1},b._updateState()}},d.closePanels=function(){for(var a=0;a<this.tabsContArr.length;a++){this.tabsContArr[a].visible=!1;var b=this.tabsArr[a].getChildAt(0);b.enabled=!0,b._stateFlags={up:!0,over:!1,down:!1},b._updateState()}this.stopFlyoutIdleSparkles()},d.toggleActive=function(a){this.isActive=a;for(var b=0;b<this.tabsArr.length;b++){var c=this.tabsArr[b].getChildAt(0);c.enabled=this.isActive}},namespace("WGBH").SidebarDrawer=c}(),function(){var a=function(){},b=a.prototype;b.shuffleArray=function(a){for(var b,c,d=a.length;d;b=Math.floor(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a},b.setGAPageview=function(a){var b=window.ga;b&&(b("set","page",a),b("send","pageview"))},namespace("WGBH").Utilities=a}(),function(){var a=include("springroll.easeljs.BasePanel"),b=include("createjs.Container"),c=include("springroll.easeljs.Button"),d=function(){a.call(this)},e=a.prototype,f=extend(d,a);f.setup=function(){this.bg=new createjs.Bitmap(images["bg_"+app.selectedScene]),this.wandButtonCont=new b,this.wandButtonCont.mouseChildren=!1,this.sparkleWandContainer=new b;var a=new createjs.Shape;a.graphics.f("white").dr(-81,-122,162,244),a.alpha=.01,this.wandGlow=new createjs.Sprite(ss.game,"btn_wand_glow"),this.wandGlow.regX=130,this.wandGlow.regY=180,this.wandGlow.alpha=0,this.playButton=new createjs.Sprite(ss.game,"btn_wand"),this.playButton.name="playstopToggle",this.playButton.visible=!0,this.playButton.regX=81,this.playButton.regY=122,this.playButton.alpha=.5,this.playButton.initY=this.playButton.y,this.stopButton=new createjs.Sprite(ss.game,"btn_wand"),this.stopButton.visible=!1,this.stopButton.regX=81,this.stopButton.regY=122,this.stopButton.initY=this.stopButton.y,this.stopButton.name="stopButton",this.wandSparkle=new createjs.Bitmap(images.Sparkle),this.wandSparkle.x=this.playButton.x+5,this.wandSparkle.y=this.playButton.y-10,this.wandSparkle.regX=this.wandSparkle.image.width/2,this.wandSparkle.regY=this.wandSparkle.image.height/2,this.wandSparkle.scaleX=this.wandSparkle.scaleY=0,this.wandSparkle.maxScale=.8,this.wandSparkle.maxTime=1e4,this.wandSparkle.wait1=5e3,this.wandButtonCont.addChild(a,this.wandGlow,this.playButton,this.stopButton,this.wandSparkle),this.uiContainer=new b,this.uiContainer.name="uiContainer",this.scaledContainer=new b,this.scaledContainer.name="scaledContainer",this.scaledTopContainer=new b,this.scaledTopContainer.name="scaledTopContainer",this.homeButton=new c(images.HomeButton),this.uiContainer.addChild(this.homeButton),this.homeButton.x=10,this.homeButton.y=10,this.drawingPad=new WGBH.DrawingPad(this),this.scaledContainer.addChild(this.drawingPad),this.coloringPad=new WGBH.ColoringPad(this),this.scaledContainer.addChild(this.coloringPad),this.sparkleContainer=new b,this.popupContainer=new b;var d=new createjs.Shape;d.graphics.f("black").dr(-256,0,1536,768),d.alpha=.3;var e=411,f=90,g=new createjs.Sprite(ss.game,"exit");g.x=96,g.y=87,this.popupTxt=new createjs.Text("","75px Hooligan","#fc59a7"),this.popupTxt.lineHeight=80,this.popupTxt.textAlign="center",this.popupTxt.textBaseline="bottom",this.popupTxt.x=g.x+e,this.popupTxt.y=g.y+242;var h=new createjs.Text("000","75px Hooligan","black");this.addChild(h),this.popupTxt.text="Start Over?",this.yesButton=new c(images.btn_yes),this.noButton=new c(images.btn_no),this.yesButton.regX=71,this.noButton.regX=71,this.yesButton.y=this.noButton.y=this.popupTxt.y+30,this.yesButton.x=g.x+e+f,this.noButton.x=g.x+e-f,this.popupContainer.addChild(d,g,this.popupTxt,this.yesButton,this.noButton),this.popupContainer.visible=!1,this.addChild(this.bg,this.wandButtonCont,this.scaledContainer,this.uiContainer,this.scaledTopContainer,this.popupContainer,this.sparkleContainer,this.sparkleWandContainer)},f.teardown=function(){e.teardown.call(this),this.bg=null,this.playButton=null,this.stopButton=null,this.homeButton=null,this.uiContainer=null,this.scaledContainer=null,this.drawingPad=null,this.coloringPad=null,this.popupContainer=null},namespace("WGBH").GamePanel=d}(),function(){var a=include("springroll.easeljs.BasePanel"),b=include("createjs.Bitmap"),c=include("springroll.easeljs.Button"),d=function(){a.call(this)},e=a.prototype,f=extend(d,a);f.setup=function(){this.jointAlpha=0,this.background=new b(images.TitleBackground),this.cont=new createjs.Container,this.cont.x=-256,this.background2=new b(images.TitleBackgroundFront),this.pinkContainer=new createjs.Container,this.pinkContainer.x=988,this.pinkContainer.y=382,this.peterContainer=new createjs.Container,this.peterContainer.x=355,this.peterContainer.y=463,this.pinkBody=new createjs.Sprite(ss.game,"pink_body"),this.pinkHeadContainer=new createjs.Container,this.pinkHeadContainer.x=96,this.pinkHeadContainer.y=23,this.pinkHead0=new createjs.Sprite(ss.game,"pink_head0"),this.pinkHead0.x=-170,this.pinkHead0.y=-200,this.pinkMouth0=new createjs.Sprite(ss.game,"pink_side_mouth0"),this.pinkMouth0.x=-52,this.pinkMouth0.y=-59,this.cir00=new createjs.Shape,this.cir00.graphics.f("white").dc(0,0,10),this.cir00.alpha=this.jointAlpha,this.pinkHeadContainer.addChild(this.pinkHead0,this.pinkMouth0,this.cir00),this.pinkHeadFrontContainer=new createjs.Container,this.pinkHeadFrontContainer.x=104,this.pinkHeadFrontContainer.y=25,this.pinkHeadFront0=new createjs.Sprite(ss.game,"pink_head1"),this.pinkHeadFront0.x=-199,this.pinkHeadFront0.y=-200,this.eyesContainer=new createjs.Container,this.eye0=new createjs.Shape,this.eye0.graphics.f("#3C2424").dc(0,-4.25,4.25),this.eye1=new createjs.Shape,this.eye1.graphics.f("#3C2424").dc(77,-4.25,4.25),this.eyesContainer.addChild(this.eye0,this.eye1),this.eyesContainer.x=-37,this.eyesContainer.y=-102,this.pinkMouth1=new createjs.Sprite(ss.game,"pink_front_mouth0"),this.pinkMouth1.x=-38,this.pinkMouth1.y=-62,this.pinkMouth1.scaleX=this.pinkMouth1.scaleY=.9,this.cir11=new createjs.Shape,this.cir11.graphics.f("white").dc(0,0,10),this.cir11.alpha=this.jointAlpha,this.pinkHeadFrontContainer.addChild(this.pinkHeadFront0,this.eyesContainer,this.pinkMouth1,this.cir11),this.pinkHeadFrontContainer.visible=!1,this.pinkArmRContainer=new createjs.Container,this.pinkArmRContainer.x=156,this.pinkArmRContainer.y=38,this.pinkArmRContainer.initY=this.pinkArmRContainer.y,this.pinkArmR0=new createjs.Sprite(ss.game,"pink_arm1_right"),this.pinkArmR0.x=-10,this.pinkArmR0.y=-10,this.pinkArmR1=new createjs.Sprite(ss.game,"pink_arm2_right"),this.pinkArmR1.x=102,this.pinkArmR1.y=153,this.pinkArmR1.regX=20,this.pinkArmR1.regY=20,this.pinkArmRContainer.rotation=20,this.rect1=new createjs.Shape,this.rect1.graphics.f("white").dc(0,0,3),this.rect1.alpha=this.jointAlpha,this.pinkArmRContainer.addChild(this.pinkArmR0,this.pinkArmR1,this.rect1),this.pinkArmLContainer=new createjs.Container,this.pinkArmLContainer.x=74,this.pinkArmLContainer.y=30,this.pinkArmLContainer.initY=this.pinkArmLContainer.y,this.rect=new createjs.Shape,this.rect.graphics.f("white").dc(0,0,5),this.rect.alpha=this.jointAlpha,this.pinkArmL0=new createjs.Sprite(ss.game,"pink_arm1_left"),this.pinkArmL0.x=-106,this.pinkArmL1=new createjs.Container,this.pinkArmL1.x=-90,this.pinkArmL1.y=160,this.pinkArmL01=new createjs.Sprite(ss.game,"pink_arm2_left"),this.pinkArmL01.x=-80,this.pinkArmL01.y=-20,this.pinkArmL02=new createjs.Sprite(ss.game,"pink_hand"),this.pinkArmL02.regX=73,this.pinkArmL02.regY=22,this.pinkArmL02.rotation=-51,this.pinkArmL02.x=-74,this.pinkArmL02.y=105,this.pinkArmL1.addChild(this.pinkArmL01,this.pinkArmL02),this.pinkArmLContainer.rotation=-8,this.rect3=new createjs.Shape,this.rect3.alpha=this.jointAlpha,this.rect3.graphics.f("white").dc(this.pinkArmL02.x,this.pinkArmL02.y,3),this.pinkArmL1.addChild(this.rect3),this.rect2=new createjs.Shape,this.rect2.graphics.f("white").dc(this.pinkArmL1.x,this.pinkArmL1.y,3),this.rect2.alpha=this.jointAlpha,this.pinkArmLContainer.addChild(this.pinkArmL0,this.pinkArmL1,this.rect,this.rect2),this.pinkContainer.addChild(this.pinkArmLContainer,this.pinkBody,this.pinkHeadContainer,this.pinkHeadFrontContainer,this.pinkArmRContainer),this.peterBody=new createjs.Sprite(ss.game,"peter_body"),this.peterHeadContainer=new createjs.Container,this.peterHeadContainer.x=81,this.peterHeadContainer.y=22,this.peterHead0=new createjs.Sprite(ss.game,"peter_head0"),this.peterHead0.x=-150,this.peterHead0.y=-205,this.peterMouth0=new createjs.Sprite(ss.game,"peter_side_mouth0"),this.peterMouth0.x=-15,this.peterMouth0.y=-64,this.cirp00=new createjs.Shape,this.cirp00.graphics.f("white").dc(0,0,10),this.cirp00.alpha=this.jointAlpha,this.peterHeadContainer.addChild(this.peterHead0,this.peterMouth0,this.cirp00),this.peterHeadFrontContainer=new createjs.Container,this.peterHeadFrontContainer.x=80,this.peterHeadFrontContainer.y=25,this.peterHeadFront0=new createjs.Sprite(ss.game,"peter_head1"),this.peterHeadFront0.x=-160,this.peterHeadFront0.y=-205,this.peterEyesContainer=new createjs.Container,this.peterEye0=new createjs.Shape,this.peterEye0.graphics.f("#3C2424").dc(0,-4.25,4.25),this.peterEye1=new createjs.Shape,this.peterEye1.graphics.f("#3C2424").dc(77,-4.25,4.25),this.peterEyesContainer.addChild(this.peterEye0,this.peterEye1),this.peterEyesContainer.x=-40,this.peterEyesContainer.y=-100,this.peterMouth1=new createjs.Sprite(ss.game,"peter_front_mouth0"),this.peterMouth1.x=-41,this.peterMouth1.y=-55,this.cir11p=new createjs.Shape,this.cir11p.graphics.f("pink").dc(0,0,10),this.cir11p.alpha=this.jointAlpha,this.peterHeadFrontContainer.addChild(this.peterHeadFront0,this.peterEyesContainer,this.peterMouth1,this.cir11p),this.peterArmLContainer=new createjs.Container,this.peterArmLContainer.x=36,this.peterArmLContainer.y=69,this.rectp=new createjs.Shape,this.rectp.graphics.f("white").dc(0,0,5),this.rectp.alpha=this.jointAlpha,this.peterArmL0=new createjs.Sprite(ss.game,"peter_arm1_left"),this.peterArmL0.x=-106,this.peterArmL0.y=-10,this.peterArmL1=new createjs.Container,this.peterArmL1.x=-55,this.peterArmL1.y=120,this.peterArmL01=new createjs.Sprite(ss.game,"peter_arm2_left"),this.peterArmL01.x=-65,this.peterArmL01.y=-120,this.peterArmL02=new createjs.Sprite(ss.game,"peter_hand"),this.peterArmL02.regX=76,this.peterArmL02.regY=22,this.peterArmL02.rotation=-82,this.peterArmL02.x=-55,this.peterArmL02.y=115,this.peterArmL1.addChild(this.peterArmL02,this.peterArmL01),this.peterArmLContainer.rotation=-8,this.rect3p=new createjs.Shape,this.rect3p.alpha=this.jointAlpha,this.rect3p.graphics.f("red").dc(this.peterArmL02.x,this.peterArmL02.y,6),this.peterArmL1.addChild(this.rect3p),this.rect2p=new createjs.Shape,this.rect2p.graphics.f("green").dc(this.peterArmL1.x,this.peterArmL1.y,6),this.rect2p.alpha=this.jointAlpha,this.peterArmLContainer.addChild(this.peterArmL0,this.peterArmL1,this.rectp,this.rect2p),this.peterContainer.addChild(this.peterBody,this.peterHeadContainer,this.peterHeadFrontContainer,this.peterArmLContainer),this.cont.addChild(this.pinkContainer,this.peterContainer,this.background2),this.sparkleCont=new createjs.Container,this.nextButton=new c(images.NextButton),this.sparkleCont.addChild(this.nextButton),this.addChild(this.background,this.cont,this.sparkleCont)},f.teardown=function(){e.teardown.call(this),this.background=null,this.background2=null,this.nextButton=null},namespace("WGBH").IntroPanel=d}(),function(){var a=include("springroll.easeljs.BasePanel"),b=include("createjs.Bitmap"),c=include("springroll.easeljs.Button"),d=function(){a.call(this)},e=a.prototype,f=extend(d,a);f.setup=function(){this.cont=new createjs.Container,this.addChild(this.cont),this.background=new b(images.TitleBackground),this.addChildAt(this.background,0),this.btnArr=[];for(var a=5,d=140,e=0;e<app.scenesArr.length;e++){var f,g;f=new c(images[app.scenesArr[e].name+"Button"]),f.name=app.scenesArr[e].name,this.cont.addChild(f),g=1==e?50:0,f.x=a,f.y=d+g,f.indx=e,2==e?(a=160,d+=270):a+=3==e?365:340,this.btnArr.push(f)}},f.teardown=function(){e.teardown.call(this),this.background=null,this.playButton=null},namespace("WGBH").MenuPanel=d}(),function(){var a=include("springroll.easeljs.BasePanel"),b=include("createjs.Bitmap"),c=include("springroll.easeljs.SoundButton"),d=function(){a.call(this)},e=a.prototype,f=extend(d,a);f.setup=function(){this.background=new b(images.TitleBackground),this.addChildAt(this.background,0),this.playButton=new c(images.PlayButton),this.playButton.regX=85.5,this.playButton.regY=86.5,this.sparkleCont=new createjs.Container,this.sparkleCont.addChild(this.playButton),this.addChild(this.sparkleCont)},f.teardown=function(){e.teardown.call(this),this.background=null,this.playButton=null},namespace("WGBH").TitlePanel=d}(),function(){var a=include("springroll.easeljs.BaseState"),b=include("WGBH.GamePanel"),c=include("WGBH.Utilities"),d=include("springroll.easeljs.DragManager"),e=function(c){a.call(this,new b,c),this.soundComplete=this.soundComplete.bind(this),this.finishedDrawing=this.finishedDrawing.bind(this),this.dragStart=this.dragStart.bind(this),this.dragEnd=this.dragEnd.bind(this),this.changeTab=this.changeTab.bind(this),this.activateDrawing=this.activateDrawing.bind(this),this.activateColoring=this.activateColoring.bind(this),this.goHome=this.goHome.bind(this),this.closeDrawingPad=this.closeDrawingPad.bind(this),this.finishedColoring=this.finishedColoring.bind(this),this.closeColoringPad=this.closeColoringPad.bind(this),this.toggleMode=this.toggleMode.bind(this),this.dragging=this.dragging.bind(this),this.addStopListener=this.addStopListener.bind(this),this.goPopup=this.goPopup.bind(this),this.closePopup=this.closePopup.bind(this),this.stopIdleWandSparkle=this.stopIdleWandSparkle.bind(this),this.startIdleWandSparkle=this.startIdleWandSparkle.bind(this)},f=extend(e,a);f.enterDone=function(){this.utils=new c,this.currentModeIndx=0,this.isDrawing=!1,this.stickersArr=[],this.firstStop=!0,this.firstPlay=!0,this.playAnimAudioArr=[1,2,3,4,5,6,7,8],this.playIndx=0,this.playAnimAudioIndx=0,this.playAnimAudioArr=this.utils.shuffleArray(this.playAnimAudioArr),this.sharedAnim=new WGBH.SharedAnimation,this.panel.drawingPad.setListeners(this.finishedDrawing,this.closeDrawingPad),this.panel.coloringPad.setListeners(this.finishedColoring,this.closeColoringPad),this.panel.homeButton.on("mousedown",this.goPopup),this.panel.wandButtonCont.on("mousedown",this.toggleMode),this.panel.wandButtonCont.on("pressup",this.addStopListener),this.panel.yesButton.on("mousedown",this.goHome),this.panel.noButton.on("mousedown",this.closePopup),this.panel.playButton.alpha=.5,this.panel.playButton.visible=!0,this.panel.wandButtonCont.cursor=null,this.dragManager=new d(app.display,this.dragStart,this.dragEnd),this.dragManager.multitouch=!1,this.dragManager.allowStickyClick=!0,this.sidebarContainer=new WGBH.SidebarDrawer(this.dragManager,this.activateDrawing,this.activateColoring),this.panel.drawingPad.visible=!1,this.closeDrawingPad(),this.panel.uiContainer.addChildAt(this.sidebarContainer,0),app.scenesArr[app.selectedSceneIndx].firstTime&&(app.scenesArr[app.selectedSceneIndx].firstTime=!1,app.voPlayer.stop(),app.voPlayer.play([200,"ag_tutorial_scene_"+app.selectedScene,300],this.soundComplete)),app.firstNav?(this.tutIndx=0,this.sidebarContainer.toggleActive(!0)):this.sidebarContainer.toggleActive(!0)},f.soundComplete=function(a){app.firstNav&&(this.tutIndx++,this.tutIndx<=4&&(app.voPlayer.play([200,"ag_tutorial_stickers"+this.tutIndx],this.soundComplete),app.sound.play("sfx_sparkle"),this.sidebarContainer.sparkleButton(this.tutIndx-1),4==this.tutIndx&&(app.firstNav=!1,this.panel.homeButton.enabled=!0,this.sidebarContainer.toggleActive(!0))))},f.goPopup=function(a){app.popupOn||(app.sound.play("sfx_click"),this.disableStickers(),app.firstNav&&(app.firstNav=!1,app.voPlayer.stop()),app.voPlayer.play([200,"ag_home_button"]),app.popupOn=!0,this.panel.homeButton.enabled=!1,this.panel.popupContainer.visible=!0,this.panel.addChild(this.panel.popupContainer),this.sidebarContainer.closePanels(),this.sidebarContainer.toggleActive(!1))},f.closePopup=function(a){this.enableStickers(),app.popupOn=!1,app.voPlayer.stop(),app.sound.play("sfx_click"),this.panel.homeButton.enabled=!0,this.panel.popupContainer.visible=!1,this.sidebarContainer.toggleActive(!0)},f.addStopListener=function(a){0!==this.currentModeIndx&&(this.panel.scaledContainer.mouseChildren=!1,this.panel.addEventListener("mousedown",this.toggleMode))},f.toggleMode=function(a){if(1==this.panel.playButton.alpha&&!app.popupOn){createjs.Tween.removeTweens(this.panel.playButton),createjs.Tween.removeTweens(this.panel.stopButton),createjs.Tween.removeTweens(this.panel.wandGlow),this.panel.stopButton.y=0,this.panel.stopButton.rotation=0,this.panel.playButton.y=0,this.panel.playButton.rotation=0,this.panel.wandGlow.alpha=0,this.panel.wandButtonCont.cursor="pointer",app.sound.play("sfx_sparkle");var b,c;if(a.currentTarget==this.panel&&(this.currentModeIndx=1),0==this.currentModeIndx){this.stopIdleWandSparkle(),this.playIndx++,this.sidebarContainer.closePanels(),this.sidebarContainer.stopSparkle(),app.music="music_"+app.selectedScene,this.disableStickers(),this.currentModeIndx=1,this.sidebarContainer.visible=!1,this.panel.playButton.visible=!1,this.panel.stopButton.visible=!0;var d=!1;if(createjs.Tween.get(this.panel.stopButton).to({rotation:-20},200).to({rotation:0},200).to({y:this.panel.stopButton.y-10},800).to({y:this.panel.stopButton.y},800),createjs.Tween.get(this.panel.wandGlow,{loop:!0}).wait(400).to({alpha:.76},1200).to({alpha:0},1400).wait(1e3),createjs.Tween.get(this.panel.sparkleWandContainer).to({rotation:-20},200).to({rotation:0},200),c={x:25,y:-60,init_pause_fact:0,init_scale:.5,endX:100,endY:-90,sparkle:"Sparkle3"},this.sharedAnim.sparkle2Simple(this.panel,this.panel.sparkleWandContainer,c,d),c={x:-20,y:-120,init_pause_fact:0,init_scale:.4,endX:123,endY:-100},this.sharedAnim.sparkle2Simple(this.panel,this.panel.sparkleWandContainer,c,d),c={x:-80,y:-50,init_pause_fact:.2,init_scale:.6,endX:-100,endY:-100,sparkle:"Sparkle3"},this.sharedAnim.sparkle2Simple(this.panel,this.panel.sparkleWandContainer,c,d),c={x:-110,y:0,init_pause_fact:.2,init_scale:.3,endX:-90,endY:120},this.sharedAnim.sparkle2Simple(this.panel,this.panel.sparkleWandContainer,c,d),c={x:10,y:10,init_pause_fact:.4,init_scale:.7,endX:150,endY:100,sparkle:"Sparkle3"},this.sharedAnim.sparkle2Simple(this.panel,this.panel.sparkleWandContainer,c,d),c={x:-50,y:0,init_pause_fact:.4,init_scale:.5,endX:-50,endY:50},this.sharedAnim.sparkle2Simple(this.panel,this.panel.sparkleWandContainer,c,d),app.firstAnimateScene){app.firstAnimateScene=!1;var e=this.panel.sparkleContainer.globalToLocal(this.panel.stopButton.x-20,this.panel.stopButton.y);c={x:e.x+10,y:e.y,init_pause_fact:0},this.sharedAnim.sparkleMeMany(this.panel,this.panel.sparkleContainer,c,!1),createjs.Tween.removeTweens(this.panel.playButton),app.voPlayer.play([200,"ag_tutorial_play"])}else this.playIndx%3==0&&(app.voPlayer.play([200,"ag_play"+this.playAnimAudioArr[this.playAnimAudioIndx]]),this.playAnimAudioIndx++,this.playAnimAudioIndx==this.playAnimAudioArr.length-1&&(this.playAnimAudioArr=this.utils.shuffleArray(this.playAnimAudioArr),
this.playAnimAudioIndx=0));for(this.panel.addChild(this.panel.wandButtonCont,this.panel.sparkleWandContainer),b=0;b<this.stickersArr.length;b++)void 0!=this.stickersArr[b].animateIndx&&this.sharedAnim.startUserDefinedAnimation(this.stickersArr[b],this.stickersArr[b].animateIndx,!0)}else{for(app.music="",this.panel.scaledContainer.mouseChildren=!0,this.panel.removeEventListener("mousedown",this.toggleMode),this.sharedAnim.stopAnimation(),this.enableStickers(),this.currentModeIndx=0,this.sidebarContainer.visible=!0,this.sidebarContainer.startMainIdleSparkles(),this.sidebarContainer.startFlyoutIdleSparkles(),this.panel.playButton.visible=!0,this.panel.stopButton.visible=!1,createjs.Tween.get(this.panel.playButton).to({rotation:-20},200).to({rotation:0},200),b=0;b<this.stickersArr.length;b++)this.stickersArr[b].reset();this.startIdleWandSparkle()}}},f.goHome=function(a){app.popupOn=!1,app.voPlayer.stop(),app.sound.play("sfx_click"),this.previousState()},f.changeTab=function(a){if(void 0!=a.currentTarget.index)for(var b=0;b<this.panel.tabsArr.length;b++)b==a.currentTarget.index&&a.currentTarget.parent.addChild(a.currentTarget)},f.activateDrawing=function(a){this.panel.playButton.visible=!1,this.disableStickers(!0),this.panel.uiContainer.visible=!1,this.panel.drawingPad.startDrawing(a.currentTarget.indx),this.sidebarContainer.stopSparkle(),this.stopIdleWandSparkle()},f.activateColoring=function(a){this.panel.playButton.visible=!1,this.disableStickers(!0),this.panel.uiContainer.visible=!1,this.panel.coloringPad.startDrawing(a.currentTarget.indx),this.sidebarContainer.stopSparkle(),this.stopIdleWandSparkle()},f.closeDrawingPad=function(a){this.enableStickers(),this.panel.uiContainer.visible=!0,this.panel.addChild(this.panel.wandButtonCont,this.panel.sparkleWandContainer),this.panel.playButton.visible=!0,this.sidebarContainer.startMainIdleSparkles(),this.sidebarContainer.startFlyoutIdleSparkles(),this.startIdleWandSparkle()},f.closeColoringPad=function(a){this.enableStickers(),this.panel.uiContainer.visible=!0,this.panel.coloringPad.stopDrawing(),this.panel.playButton.visible=!0,this.panel.addChild(this.panel.wandButtonCont,this.panel.sparkleWandContainer),this.sidebarContainer.startMainIdleSparkles(),this.sidebarContainer.startFlyoutIdleSparkles(),this.startIdleWandSparkle()},f.disableStickers=function(a){for(var b=0;b<this.panel.scaledContainer.numChildren;b++){var c=this.panel.scaledContainer.getChildAt(b);"sticker"==c.name&&(c.disableDrag(),c.visible=!a)}this.panel.wandButtonCont.visible=!a,this.panel.wandButtonCont.cursor=null,this.stopIdleWandSparkle()},f.enableStickers=function(){for(var a=0;a<this.panel.scaledContainer.numChildren;a++){var b=this.panel.scaledContainer.getChildAt(a);"sticker"==b.name&&(b.enableDrag(),b.visible=!0)}this.panel.wandButtonCont.visible=!0,this.stickersArr.length>0&&(this.panel.playButton.alpha=1,this.panel.wandButtonCont.cursor="pointer",this.startIdleWandSparkle())},f.finishedDrawing=function(a){this.utils.setGAPageview("/drawing-"+app.selectedScene+".html"),this.panel.uiContainer.visible=!0,this.panel.drawingPad.stopDrawing(!0);var b=new WGBH.DragSprite("draw",!1,this.panel.drawingPad.getDrawing(),this.panel.drawingPad.drawingIndx);this.sidebarContainer.tabsContArr[0].addChild(b),b.name="DragSticker",b.type="draw",b.nav=!0,b.par=this.sidebarContainer,b.cont=this.sidebarContainer.tabsContArr[0],b.typeIndx=0,b.animateIndx=this.panel.drawingPad.animateIndx,b.indx=this.panel.drawingPad.drawingIndx,this.dragManager.addObject(b),b.enableDrag(),this.sidebarContainer.hideButton(0,this.panel.drawingPad.drawingIndx,b),this.sidebarContainer.startMainIdleSparkles(),this.sidebarContainer.startFlyoutIdleSparkles(),this.enableStickers(),this.panel.addChild(this.panel.sparkleContainer),this.panel.playButton.visible=!0,createjs.Tween.get(b).wait(500).call(function(){app.firstToolbarSticker&&(app.firstToolbarSticker=!1,app.voPlayer.play([200,"ag_tutorial_first_sticker"])),this.sidebarContainer.sparkleSubButton(b,0,this.panel.drawingPad.drawingIndx)}.bind(this))},f.finishedColoring=function(a){this.utils.setGAPageview("/coloring-"+app.selectedScene+".html"),this.panel.uiContainer.visible=!0,this.panel.coloringPad.stopDrawing(!0);var b=new WGBH.DragSprite("color",!1,this.panel.coloringPad.getDrawing(),this.panel.coloringPad.coloringIndx);this.sidebarContainer.tabsContArr[1].addChild(b),b.name="DragSticker",b.type="color",b.nav=!0,b.par=this.sidebarContainer,b.cont=this.sidebarContainer.tabsContArr[1],b.animateIndx=this.panel.coloringPad.animateIndx,b.indx=this.panel.coloringPad.coloringIndx,b.typeIndx=1,this.dragManager.addObject(b),b.enableDrag(),this.sidebarContainer.hideButton(1,this.panel.coloringPad.coloringIndx,b),this.enableStickers(),this.panel.addChild(this.panel.sparkleContainer),this.panel.playButton.visible=!0,this.sidebarContainer.startMainIdleSparkles(),this.sidebarContainer.startFlyoutIdleSparkles(),createjs.Tween.get(b).wait(500).call(function(){app.firstToolbarSticker&&(app.firstToolbarSticker=!1,app.voPlayer.play([200,"ag_tutorial_first_sticker"])),this.sidebarContainer.sparkleSubButton(b,1,this.panel.coloringPad.coloringIndx)}.bind(this))},f.dragStart=function(a){1!=this.currentModeIndx&&(app.sound.play("sfx_pick"),a.addHighlight(),this.sidebarContainer.toggleTrashBtn(!0),a.nav?(this.panel.addChild(this.panel.wandButtonCont,this.sparkleContainer,this.panel.sparkleWandContainer),this.sidebarContainer.changeTab({currentTarget:{index:a.typeIndx}})):this.panel.scaledTopContainer.addChild(a),this.sidebarContainer.closePanels(),app.on("update",this.dragging),this.dragging())},f.dragging=function(a){var b,c,d,e=a&&isNaN(a)?a:this.dragManager.draggedObj,f=e.parent.localToGlobal(e.x,e.y),g=this.sidebarContainer.localToGlobal(this.sidebarContainer.x+160,this.sidebarContainer.y),h=g.x,i=app.realWidth-.23*app.realHeight,j=app.realHeight-.36*app.realHeight;b=f.x<=h,c=f.x>i,d=f.y>j;var k=e.parent.globalToLocal(i,j);c&&d&&(e.y=k.y),b?e.alpha=.5:e.alpha=1},f.dragEnd=function(a){if(this.dragging(a),app.off("update",this.dragging),1!=this.currentModeIndx){if(this.sidebarContainer.toggleTrashBtn(!1),this.panel.playButton.visible=!0,"sticker"!=a.name)if(1==a.alpha){var b=new WGBH.DragSprite(a.type,!0,"DragSticker"==a.name?a.art.clone(!0):a.imgName,a.indx);this.panel.scaledContainer.addChild(b);var c=(this.panel.scaledContainer.globalToLocal(a.x,a.y),(app.realWidth/app.realHeight*app.config.scalingSize.height-app.config.scalingSize.width)/2),d=0;if("DragSticker"==a.name?(b.animateIndx=a.animateIndx,b.cont=a.cont,b.par=a.par):"friends"==a.type?(b.animateIndx=a.animateIndx,b.indx=a.indx,a.setInactive()):"props"==a.type&&(b.animateIndx=a.animateIndx),b.nav=!1,b.setPosition(a.x-c,a.y+d),b.initScale=b.scaleX,b.name="sticker",a.resetPosition(),this.dragManager.addObject(b,null,new createjs.Point(0,0)),b.enableDrag(),this.stickersArr.push(b),app.sound.play("sfx_drop"),1==this.stickersArr.length&&app.firstPlacedSticker){app.firstPlacedSticker=!1,app.voPlayer.play([200,"ag_tutorial_wand"]);var e,f=!1;e={x:60,y:-20,init_pause_fact:0,init_scale:.5,sparkle:"Sparkle3"},this.sharedAnim.sparkle1Simple(this.panel,this.panel.sparkleWandContainer,e,f),e={x:-80,y:-40,init_pause_fact:.3,init_scale:.55,sparkle:"Sparkle2"},this.sharedAnim.sparkle1Simple(this.panel,this.panel.sparkleWandContainer,e,f),e={x:15,y:30,init_pause_fact:.5,init_scale:.55,sparkle:"Sparkle2"},this.sharedAnim.sparkle1Simple(this.panel,this.panel.sparkleWandContainer,e,f),e={x:-15,y:-50,init_pause_fact:.5,init_scale:.55,sparkle:"Sparkle2"},this.sharedAnim.sparkle1Simple(this.panel,this.panel.sparkleWandContainer,e,f),e={x:-62,y:35,init_pause_fact:.7,init_scale:.55,sparkle:"Sparkle2"},this.sharedAnim.sparkle1Simple(this.panel,this.panel.sparkleWandContainer,e,f),e={x:-33,y:-120,init_pause_fact:.8,init_scale:.5,sparkle:"Sparkle3"},this.sharedAnim.sparkle1Simple(this.panel,this.panel.sparkleWandContainer,e,f),e={x:-33,y:20,init_pause_fact:1.3,init_scale:.5,sparkle:"Sparkle3"},this.sharedAnim.sparkle1Simple(this.panel,this.panel.sparkleWandContainer,e,f),e={x:33,y:-20,init_pause_fact:1.3,init_scale:.5,sparkle:"Sparkle"},this.sharedAnim.sparkle1Simple(this.panel,this.panel.sparkleWandContainer,e,f),e={x:26,y:-103,init_pause_fact:1.5,init_scale:.51,sparkle:"Sparkle3"},this.sharedAnim.sparkle1Simple(this.panel,this.panel.sparkleWandContainer,e,f),createjs.Tween.removeTweens(this.panel.playButton),this.panel.playButton.y=0,createjs.Tween.get(this.panel.playButton).to({y:this.panel.playButton.y-10},800).to({y:this.panel.playButton.y},800),createjs.Tween.removeTweens(this.panel.wandGlow),this.panel.wandGlow.alpha=0,createjs.Tween.get(this.panel.wandGlow).to({alpha:.76},1200).to({alpha:0},1400)}this.stickersArr.length>0}else app.sound.play("sfx_trash"),a.resetPosition();else if(a.initX=a.x,a.initY=a.y,this.panel.scaledContainer.addChild(a),1!=a.alpha){this.dragManager.removeObject(a);for(var g=0;g<this.stickersArr.length;g++)if(this.stickersArr[g]==a){this.stickersArr.splice(g,1);break}app.sound.play("sfx_trash"),this.sidebarContainer.toggleFriends(a),a.parent.removeChild(a),this.sidebarContainer.toggleTrashBtn(!1)}else app.sound.play("sfx_drop"),a.removeHighlight();this.panel.playButton.alpha=0==this.stickersArr.length?.5:1,this.panel.wandButtonCont.cursor=1==this.panel.playButton.alpha?"pointer":null,this.stickersArr.length>0&&!createjs.Tween.hasActiveTweens(this.panel.wandSparkle)?this.startIdleWandSparkle():0==this.stickersArr.length&&this.stopIdleWandSparkle()}},f.startIdleWandSparkle=function(){this.stickersArr.length>0&&(this.stopIdleWandSparkle(),this.sharedAnim.sparkleLoop(this.panel.wandSparkle,!1))},f.stopIdleWandSparkle=function(){createjs.Tween.removeTweens(this.panel.wandSparkle),this.panel.wandSparkle.scaleX=this.panel.wandSparkle.scaleY=0},f.exitStart=function(){createjs.Tween.removeAllTweens(),app.off("update",this.dragging),this.panel.homeButton.off("mousedown",this.goPopup),this.panel.wandButtonCont.off("mousedown",this.toggleMode),this.panel.wandButtonCont.off("pressup",this.addStopListener),this.panel.yesButton.off("mousedown",this.goHome),this.panel.noButton.off("mousedown",this.closePopup)},namespace("WGBH").GameState=e}(),function(){var a=include("springroll.easeljs.BaseState"),b=include("WGBH.Utilities"),c=include("WGBH.IntroPanel"),d=function(b){a.call(this,new c,b),this.onPlay=this.onPlay.bind(this),this.soundComplete=this.soundComplete.bind(this),this.pinkAnimate=this.pinkAnimate.bind(this),this.peterAnimate=this.peterAnimate.bind(this),this.update=this.update.bind(this)},e=extend(d,a);e.enterDone=function(){this.utils=new b,this.introIndx=1,this.pinkIndx=0,this.peterIndx=0,this.mouthIndx=0,this.waitTime=10,this.mouthsArr=[[0,0,0,0,0,0,0,1,2,6,5,4,5,2,3,3,2,2,1,2,2,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,2,4,4,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,2,2,2,2,1,1,1,1,0,0,1,1,1,2,2,1,1,0,0,1,1,2,4,2,1,2,2,1,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,2,1,1,1,1,1,1,1,3,5,4,4,5,4,4,3,3,3,3,2,2,4,4,4,3,3,3,2,2,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,1,2,2,2,2,3,3,2,1,1,1,2,3,3,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,2,1,2,1,1,1,1,1,0,1,1,1,1,1,0,0,0,0,1,3,4,5,5,5,4,0,0,0,0,3,5,3,2,2,4,4,2,1,1,1,1,1,0,0,0,0,1,1,2,2,2,2,2,2,2,1,0,0,0,0,0,1,1,1,1,1,2,4,4,4,3,3,2,2,1,0,0,0,0,0,0,0,0,1,2,5,5,4,3,3,3,3,2,1,0,0,0,1,2,3,2,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,4,4,4,2,3,2,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,4,5,5,5,4,3,4,3,4,4,5,5,4,2,2,2,1,1,0,0,0,0,0,0,0,0,0,0,1,1,3,3,2,2,3,3,2,1,1,1,0,0,0,0,1,1,1,1,0,0,0,1,1,1,1,1,1,0,0,0,1,1,2,2,2,2,2,1,0,0,0,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,3,0,0,0,1,1,1,1,1,1,1,4,4,3,3,4,2,2,1,0,0,1,1,0,1,1,0,1,1,1,1,2,3,3,5,5,4,3,3,3,3,4,4,4,3,2,1,1,1,3,3,3,3,3,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,2,2,2,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,2,1,0,0,0,1,2,3,4,4,4,5,4,1,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,2,2,1,2,2,2,2,2,2,1,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,3,3,3,4,3,3,2,1,1,2,2,1,2,2,2,2,2,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,0,0,1,3,2,2,1,0,0,0,1,1,0,1,1,1,1,1,3,5,4,5,3,2,1,0,0,0,0,0,0,0,1,1,2,2,2,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,2,2,1,2,2,2,0,0,0,0,0,3,3,4,4,4,4,4,4,3,0,0,0,1,1,1,0,0,0,0,0,5,5,2,2,2,2,1,1,1,1,1,1,1,1,1,1,3,3,3,3,2,2,3,1,0,0,0,0,0,0,2,3,3,3,1,1,1,1,1,0,0,0,0,0,0,0,0,0,2,3,3,4,4,4,3,2,2,2,2,2,2,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,2,2,2,2,1,0,0,0,1,1,2,3,2,2,2,2,2,2,2,2,2,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,2,5,5,5,5,5,4,4,4,3,2,2,1,1,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,1,2,3,4,4,4,4,4,4,4,4,4,3,2,2,2,2,1,1,0,0,0,1,1,1,1,2,2,2,2,1,2,1,2,2,2,3,2,1,2,2,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,2,1,1,1,0,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,2,3,3,3,4,4,3,3,3,3,2,2,1,0,0,0,1,1,1,0,1,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,4,5,3,5,5,3,3,4,4,3,2,2,1,1,2,2,2,2,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,2,5,4,4,3,3,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,2,2,2,2,2,2,2,3,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],this.panel.nextButton.addEventListener("mousedown",this.onPlay),app.voPlayer.stop(),this.pinkAnimate()},e.pinkAnimate=function(){this.pinkIndx++,1==this.pinkIndx?(app.voPlayer.play([this.waitTime,"ag_intro"+this.introIndx],this.soundComplete),this.panel.pinkHeadFrontContainer.visible=!0,this.panel.pinkHeadContainer.visible=!1,createjs.Tween.get(this.panel.pinkHeadFrontContainer).to({rotation:2},1060).to({rotation:0},954),createjs.Tween.get(this.panel.pinkArmLContainer).wait(500).to({rotation:19.4},500).wait(1100).to({rotation:-6},1e3).call(function(){this.panel.pinkHeadFrontContainer.visible=!1,this.panel.pinkHeadContainer.visible=!0}.bind(this)),createjs.Tween.get(this.panel.pinkArmL1).wait(100).to({rotaion:114},500).to({rotation:130},500).to({rotation:114},500).to({rotation:130},500).wait(200).to({rotation:0},500),createjs.Tween.get(this.panel.eyesContainer).wait(2e3).to({scaleY:0},200).to({scaleY:1},200),createjs.Tween.get(this.panel.pinkArmL02).wait(100).to({rotation:-90},500).to({rotation:-64},500).to({rotation:-77},500).to({rotation:-61},500),this.panel.peterHeadFrontContainer.visible=!1,this.panel.peterHeadContainer.visible=!0,createjs.Tween.get(this.panel.peterHeadContainer).to({rotation:3},3e3)):2==this.pinkIndx?(app.voPlayer.play([this.waitTime,"ag_intro"+this.introIndx],this.soundComplete),this.panel.pinkHeadFrontContainer.visible=!0,this.panel.pinkHeadContainer.visible=!1,createjs.Tween.get(this.panel.pinkHeadFrontContainer).to({rotation:-2},4e3),createjs.Tween.get(this.panel.eyesContainer).to({scaleY:.2},10).wait(390).to({scaleY:1},10).wait(1e3).to({scaleY:0},200).to({scaleY:1},200).wait(2600).to({scaleY:0},200).to({scaleY:1},200).wait(1800).to({scaleY:0},200).to({scaleY:1},200).wait(2600).to({scaleY:0},200).to({scaleY:1},200).wait(2100).to({scaleY:0},200).to({scaleY:1},200),createjs.Tween.get(this.panel.pinkArmRContainer).to({y:this.panel.pinkArmRContainer.initY-5},100).to({y:this.panel.pinkArmRContainer.y},100).to({y:this.panel.pinkArmRContainer.initY-5},100).to({y:this.panel.pinkArmRContainer.y},100),createjs.Tween.get(this.panel.pinkArmLContainer).to({y:this.panel.pinkArmLContainer.initY-5},100).to({y:this.panel.pinkArmLContainer.y},100).to({y:this.panel.pinkArmLContainer.initY-5},100).to({y:this.panel.pinkArmLContainer.y},100)):3==this.pinkIndx?(app.voPlayer.play([this.waitTime,"ag_intro"+this.introIndx],this.soundComplete),createjs.Tween.get(this.panel.eyesContainer).wait(500).to({scaleY:0},200).to({scaleY:1},200),createjs.Tween.get(this.panel.pinkHeadFrontContainer).to({rotation:2},4e3),createjs.Tween.get(this.panel.peterEyesContainer).to({scaleY:0},200).to({scaleY:1},200).wait(1e3).to({scaleY:0},200).to({scaleY:1},200).wait(1600).to({scaleY:0},200).to({scaleY:1},200)):4==this.pinkIndx?app.voPlayer.play([this.waitTime,"ag_intro"+this.introIndx],this.soundComplete):5==this.pinkIndx&&(app.voPlayer.play([this.waitTime,"ag_intro"+this.introIndx],this.soundComplete),createjs.Tween.get(this.panel.pinkHeadContainer).wait(500).call(function(){this.panel.pinkHeadFrontContainer.visible=!0,this.panel.pinkHeadContainer.visible=!1}.bind(this)),createjs.Tween.get(this.peterHeadContainer).wait(1500).call(function(){this.panel.peterHeadFrontContainer.visible=!0,this.panel.peterHeadContainer.visible=!1}.bind(this)),createjs.Tween.get(this.panel.eyesContainer).wait(1e3).to({scaleY:0},200).to({scaleY:1},200)),this.mouthIndx=0,app.on("update",this.update)},e.peterAnimate=function(){this.peterIndx++,1==this.peterIndx?(app.voPlayer.play([this.waitTime,"ag_intro"+this.introIndx],this.soundComplete),this.panel.peterHeadFrontContainer.visible=!0,this.panel.peterHeadContainer.visible=!1,this.panel.peterHeadContainer.rotation=0,createjs.Tween.get(this.panel.pinkHeadContainer).to({rotation:1},1e3),createjs.Tween.get(this.panel.peterHeadFrontContainer).to({rotation:-2},3e3).to({rotation:2},6e3).to({rotation:-2},4e3),createjs.Tween.get(this.panel.peterArmLContainer).wait(500).to({rotation:10},500).wait(1100).to({rotation:0},1e3).call(function(){}.bind(this)),createjs.Tween.get(this.panel.peterArmL1).wait(10).to({rotaion:139},500).to({rotation:134},500).to({rotation:140},500).to({rotation:134},500).wait(200).to({rotation:-14},500),createjs.Tween.get(this.panel.peterArmL02).wait(10).to({rotation:-90},500).to({rotation:-64},500).to({rotation:-77},500).to({rotation:-61},500),createjs.Tween.get(this.panel.peterEyesContainer).wait(500).to({scaleY:0},200).to({scaleY:1},200).wait(1e3).to({scaleY:0},200).to({scaleY:1},200)):2==this.peterIndx?(app.voPlayer.play([this.waitTime,"ag_intro"+this.introIndx],this.soundComplete),createjs.Tween.get(this.panel.peterEyesContainer).wait(1e3).to({scaleY:0},200).to({scaleY:1},200)):3==this.peterIndx&&(app.voPlayer.play([this.waitTime,"ag_intro"+this.introIndx],this.soundComplete),this.panel.peterHeadFrontContainer.visible=!1,this.panel.peterHeadContainer.visible=!0,createjs.Tween.get(this.panel.peterHeadContainer).to({rotation:0},4e3),createjs.Tween.get(this.panel.pinkHeadContainer).wait(1e3).call(function(){this.panel.pinkHeadFrontContainer.visible=!1,this.panel.pinkHeadContainer.visible=!0}.bind(this)).to({rotation:-2},3800)),this.mouthIndx=0,app.on("update",this.update)},e.soundComplete=function(a){if(app.off("update",this.update),this.mouthIndx=0,this.introIndx++,2==this.introIndx)this.peterAnimate();else if(3==this.introIndx)this.pinkAnimate();else if(4==this.introIndx)this.peterAnimate();else if(5==this.introIndx)this.pinkAnimate();else if(6==this.introIndx)this.peterAnimate();else if(7==this.introIndx)this.pinkAnimate();else if(8==this.introIndx)this.pinkAnimate();else if(9==this.introIndx){createjs.Tween.get(this.panel.pinkHeadContainer).wait(2e3).call(function(){createjs.Tween.get(this.panel.peterEyesContainer,{loop:!0}).wait(500).to({scaleY:0},200).to({scaleY:1},200).wait(2e3),createjs.Tween.get(this.panel.eyesContainer,{loop:!0}).wait(1e3).to({scaleY:0},200).to({scaleY:1},200).wait(2e3),createjs.Tween.get(this.panel.pinkHeadFrontContainer,{loop:!0}).wait(1e3).to({rotation:-2},4e3).wait(2e3).to({rotation:2},4e3),createjs.Tween.get(this.panel.peterHeadFrontContainer,{loop:!0}).wait(2e3).to({rotation:2},4e3).wait(2e3).to({rotation:-2},4e3)}.bind(this));var b=new WGBH.SharedAnimation;b.sparkleMe3(this.panel.sparkleCont,{x:40,y:10},!1)}},e.update=function(a){var b,c;app.voPlayer.currentPosition>0?1==this.introIndx||3==this.introIndx||5==this.introIndx||7==this.introIndx||8==this.introIndx?(b=this.mouthsArr[this.introIndx-1],c=0===b[this.mouthIndx]?0:Math.min(b[this.mouthIndx]+1,5),this.mouthIndx<b.length?(this.panel.pinkMouth0.gotoAndStop("pink_side_mouth"+c),this.panel.pinkMouth1.gotoAndStop("pink_front_mouth"+c),this.mouthIndx++):(this.panel.pinkMouth0.gotoAndStop("pink_side_mouth0"),this.panel.pinkMouth1.gotoAndStop("pink_front_mouth0"))):(b=this.mouthsArr[this.introIndx-1],c=0===b[this.mouthIndx]?0:Math.min(b[this.mouthIndx]+1,5),this.mouthIndx<b.length?(this.panel.peterMouth0.gotoAndStop("peter_side_mouth"+c),this.panel.peterMouth1.gotoAndStop("peter_front_mouth"+c),this.mouthIndx++):(this.panel.peterMouth0.gotoAndStop("peter_side_mouth0"),this.panel.peterMouth1.gotoAndStop("peter_front_mouth0"))):(this.panel.pinkMouth0.gotoAndStop("pink_side_mouth0"),this.panel.pinkMouth1.gotoAndStop("pink_front_mouth0"),this.panel.peterMouth0.gotoAndStop("peter_side_mouth0"),this.panel.peterMouth1.gotoAndStop("peter_front_mouth0"))},e.onPlay=function(){app.voPlayer.stop(),createjs.Tween.removeAllTweens(),app.sound.play("sfx_click"),this.nextState()},e.exit=function(){this.panel.nextButton.removeEventListener("mousedown",this.onPlay)},namespace("WGBH").IntroState=d}(),function(){var a=include("springroll.easeljs.BaseState"),b=include("WGBH.Utilities"),c=include("WGBH.MenuPanel"),d=function(b){a.call(this,new c,b),this.onPlay=this.onPlay.bind(this),this.goNext=this.goNext.bind(this)},e=extend(d,a);e.enterDone=function(){this.gotScene=!1;for(var a=0;a<this.panel.btnArr.length;a++)this.panel.btnArr[a].addEventListener("mousedown",this.onPlay);app.voPlayer.play([200,"ag_menu_choose"])},e.onPlay=function(a){if(!this.gotScene){for(var c=0;c<this.panel.btnArr.length;c++)if(this.panel.btnArr[c].removeEventListener("mousedown",this.onPlay),this.panel.btnArr[c].enabled=!1,c==a.currentTarget.indx){var d=new WGBH.SharedAnimation,e={sparkle:"Sparkle3",init_scale:.5,x:this.panel.btnArr[c].x+170,y:this.panel.btnArr[c].y+119,keep:!0};d.sparkleMeMany(this.panel,this.panel.cont,e,!1),e={sparkle:"Sparkle",init_scale:.5,x:this.panel.btnArr[c].x+90,y:this.panel.btnArr[c].y+149,keep:!0},d.sparkleMeMany(this.panel,this.panel.cont,e,!1),e={sparkle:"Sparkle2",init_scale:.4,x:this.panel.btnArr[c].x+150,y:this.panel.btnArr[c].y+89,keep:!0},d.sparkleMeMany(this.panel,this.panel.cont,e,!1)}var f=new b;this.gotScene=!0,app.selectedSceneIndx=a.currentTarget.indx,app.selectedScene=app.scenesArr[a.currentTarget.indx].name,app.sound.play("sfx_click"),app.voPlayer.play([200,"ag_menu_"+app.selectedScene],this.goNext),f.setGAPageview("/scene-"+app.selectedScene+".html")}},e.goNext=function(a){app.voPlayer.stop(),this.nextState()},e.exit=function(){},namespace("WGBH").MenuState=d}(),function(){var a=include("springroll.easeljs.BaseState"),b=include("WGBH.Utilities"),c=include("WGBH.TitlePanel"),d=function(b){a.call(this,new c,b),this.onPlay=this.onPlay.bind(this)},e=extend(d,a);e.enterDone=function(){var a=new b;a.setGAPageview("/splash.html"),app.voPlayer.play([100,"ag_title"]),this.panel.playButton.addEventListener("mousedown",this.onPlay),createjs.Tween.get(this.panel).wait(200).call(function(){var a=new WGBH.SharedAnimation;a.sparkleMe3(this.panel.sparkleCont,{x:-35,y:-50},!1)}.bind(this))},e.onPlay=function(){createjs.Tween.removeAllTweens(),app.voPlayer.stop(),app.sound.play("sfx_click"),this.panel.playButton.removeEventListener("mousedown",this.onPlay),this.nextState()},e.exit=function(){},namespace("WGBH").TitleState=d}(),function(){var a=include("WGBH.TitleState"),b=include("WGBH.GameState"),c=include("WGBH.IntroState"),d=include("WGBH.MenuState"),e=include("springroll.Application"),f=include("lib.Transition"),g=include("springroll.easeljs.EaselJSDisplay"),h=function(a,b){window.images[b.id]=a},i=function(a,b){ss[b.id]=new createjs.SpriteSheet(a),"game"==b.id},j=new e({fps:60,name:"web_art_game",state:"title",canvasId:"stage",configPath:"assets/config/config.json",manifestsPath:"assets/config/manifests.json",captionsPath:"assets/config/captions.json",audioTypes:["m4a","ogg","mp3"],display:g,displayOptions:{clearView:!0},preload:[{id:"pink_loader_sprite",src:"assets/images/loading/pink_loader_sprite.png",complete:h},{id:"pink_loader_bg",src:"assets/images/loading/pink_loader_bg.jpg",complete:h},{id:"pink_loader_heart",src:"assets/images/loading/pink_loader_heart.png",complete:h},{id:"pink_loader_bee",src:"assets/images/loading/pink_loader_bee.png",complete:h},{id:"game",src:"assets/images/game_sprites.json",complete:i},{id:"Game_atlas_",src:"assets/images/Game_atlas_.json",complete:i}]});j.scenesArr=[{name:"beach",firstTime:!0,firstDraw:!0,firstColor:!0},{name:"garden",firstTime:!0,firstDraw:!0,firstColor:!0},{name:"carnival",firstTime:!0,firstDraw:!0,firstColor:!0},{name:"icecream",firstTime:!0,firstDraw:!0,firstColor:!0},{name:"sky",firstTime:!0,firstDraw:!0,firstColor:!0}],j.firstNav=!0,j.firstDone=!0,j.firstAnimStickers=!0,j.firstPlacedSticker=!0,j.firstAnimateScene=!0,j.firstToolbarSticker=!0,j.popupOn=!1,j.on("init",function(){var e=this.config.assets,g=this.config.scaling;this.manifests;createjs.MotionGuidePlugin.install(),this.transition=new f,this.transition.framerate=30,this.states={title:new a({next:"intro",preload:e.title,scaling:g.title}),intro:new c({next:"menu",preload:e.intro,scaling:g.intro}),menu:new d({next:"game",preload:e.menu,scaling:g.menu}),game:new b({next:"title",previous:"menu",preload:e.game,scaling:g.game})}}),window.app=j}();