!function(){"use strict";var e=function(){this.init()};e.prototype={init:function(){var e=this||t;return e._counter=1e3,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.mobileAutoEnable=!0,e._setup(),e},volume:function(e){var i=this||t;if(e=parseFloat(e),i.ctx||l(),void 0!==e&&e>=0&&e<=1){if(i._volume=e,i._muted)return i;i.usingWebAudio&&i.masterGain.gain.setValueAtTime(e,t.ctx.currentTime);for(var s=0;s<i._howls.length;s++)if(!i._howls[s]._webAudio)for(var o=i._howls[s]._getSoundIds(),a=0;a<o.length;a++){var r=i._howls[s]._soundById(o[a]);r&&r._node&&(r._node.volume=r._volume*e)}return i}return i._volume},mute:function(e){var i=this||t;i.ctx||l(),i._muted=e,i.usingWebAudio&&i.masterGain.gain.setValueAtTime(e?0:i._volume,t.ctx.currentTime);for(var s=0;s<i._howls.length;s++)if(!i._howls[s]._webAudio)for(var o=i._howls[s]._getSoundIds(),a=0;a<o.length;a++){var r=i._howls[s]._soundById(o[a]);r&&r._node&&(r._node.muted=!!e||r._muted)}return i},unload:function(){for(var e=this||t,i=e._howls.length-1;i>=0;i--)e._howls[i].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,l()),e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;if(e.state=e.ctx?e.ctx.state||"running":"running",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(i=new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{var i=new Audio;i.muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,i=null;try{i="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!i||"function"!=typeof i.canPlayType)return e;var s=i.canPlayType("audio/mpeg;").replace(/^no$/,""),o=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),a=o&&parseInt(o[0].split("/")[1],10)<33;return e._codecs={mp3:!(a||!s&&!i.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!s,opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!i.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!i.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(i.canPlayType("audio/x-mp4;")||i.canPlayType("audio/mp4;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!i.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(i.canPlayType("audio/x-flac;")||i.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_enableMobileAudio:function(){var e=this||t,i=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(e._navigator&&e._navigator.userAgent),s=!!("ontouchend"in window||e._navigator&&e._navigator.maxTouchPoints>0||e._navigator&&e._navigator.msMaxTouchPoints>0);if(!e._mobileEnabled&&e.ctx&&(i||s)){e._mobileEnabled=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var o=function(){t._autoResume();var i=e.ctx.createBufferSource();i.buffer=e._scratchBuffer,i.connect(e.ctx.destination),void 0===i.start?i.noteOn(0):i.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),i.onended=function(){i.disconnect(0),e._mobileEnabled=!0,e.mobileAutoEnable=!1,document.removeEventListener("touchstart",o,!0),document.removeEventListener("touchend",o,!0)}};return document.addEventListener("touchstart",o,!0),document.addEventListener("touchend",o,!0),e}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&t.usingWebAudio){for(var i=0;i<e._howls.length;i++)if(e._howls[i]._webAudio)for(var s=0;s<e._howls[i]._sounds.length;s++)if(!e._howls[i]._sounds[s]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&t.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var t=new e,i=function(e){var t=this;e.src&&0!==e.src.length?t.init(e):console.error("An array of source files must be passed with any new Howl.")};i.prototype={init:function(e){var i=this;return t.ctx||l(),i._autoplay=e.autoplay||!1,i._format="string"!=typeof e.format?e.format:[e.format],i._html5=e.html5||!1,i._muted=e.mute||!1,i._loop=e.loop||!1,i._pool=e.pool||5,i._preload="boolean"!=typeof e.preload||e.preload,i._rate=e.rate||1,i._sprite=e.sprite||{},i._src="string"!=typeof e.src?e.src:[e.src],i._volume=void 0!==e.volume?e.volume:1,i._xhrWithCredentials=e.xhrWithCredentials||!1,i._duration=0,i._state="unloaded",i._sounds=[],i._endTimers={},i._queue=[],i._playLock=!1,i._onend=e.onend?[{fn:e.onend}]:[],i._onfade=e.onfade?[{fn:e.onfade}]:[],i._onload=e.onload?[{fn:e.onload}]:[],i._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],i._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],i._onpause=e.onpause?[{fn:e.onpause}]:[],i._onplay=e.onplay?[{fn:e.onplay}]:[],i._onstop=e.onstop?[{fn:e.onstop}]:[],i._onmute=e.onmute?[{fn:e.onmute}]:[],i._onvolume=e.onvolume?[{fn:e.onvolume}]:[],i._onrate=e.onrate?[{fn:e.onrate}]:[],i._onseek=e.onseek?[{fn:e.onseek}]:[],i._onresume=[],i._webAudio=t.usingWebAudio&&!i._html5,void 0!==t.ctx&&t.ctx&&t.mobileAutoEnable&&t._enableMobileAudio(),t._howls.push(i),i._autoplay&&i._queue.push({event:"play",action:function(){i.play()}}),i._preload&&i.load(),i},load:function(){var e=this,i=null;if(t.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var o=0;o<e._src.length;o++){var r,n;if(e._format&&e._format[o])r=e._format[o];else{if("string"!=typeof(n=e._src[o])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(r=/^data:audio\/([^;,]+);/i.exec(n))||(r=/\.([^.]+)$/.exec(n.split("?",1)[0])),r&&(r=r[1].toLowerCase())}if(r||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),r&&t.codecs(r)){i=e._src[o];break}}if(i)return e._src=i,e._state="loading","https:"===window.location.protocol&&"http:"===i.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new s(e),e._webAudio&&a(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,i){var s=this,o=null;if("number"==typeof e)o=e,e=null;else{if("string"==typeof e&&"loaded"===s._state&&!s._sprite[e])return null;if(void 0===e){e="__default";for(var a=0,r=0;r<s._sounds.length;r++)s._sounds[r]._paused&&!s._sounds[r]._ended&&(a++,o=s._sounds[r]._id);1===a?e=null:o=null}}var n=o?s._soundById(o):s._inactiveSound();if(!n)return null;if(o&&!e&&(e=n._sprite||"__default"),"loaded"!==s._state){n._sprite=e,n._ended=!1;var h=n._id;return s._queue.push({event:"play",action:function(){s.play(h)}}),h}if(o&&!n._paused)return i||s._loadQueue("play"),n._id;s._webAudio&&t._autoResume();var l=Math.max(0,n._seek>0?n._seek:s._sprite[e][0]/1e3),p=Math.max(0,(s._sprite[e][0]+s._sprite[e][1])/1e3-l),c=1e3*p/Math.abs(n._rate);n._paused=!1,n._ended=!1,n._sprite=e,n._seek=l,n._start=s._sprite[e][0]/1e3,n._stop=(s._sprite[e][0]+s._sprite[e][1])/1e3,n._loop=!(!n._loop&&!s._sprite[e][2]);var d=n._node;if(s._webAudio){var u=function(){s._refreshBuffer(n);var e=n._muted||s._muted?0:n._volume;d.gain.setValueAtTime(e,t.ctx.currentTime),n._playStart=t.ctx.currentTime,void 0===d.bufferSource.start?n._loop?d.bufferSource.noteGrainOn(0,l,86400):d.bufferSource.noteGrainOn(0,l,p):n._loop?d.bufferSource.start(0,l,86400):d.bufferSource.start(0,l,p),c!==1/0&&(s._endTimers[n._id]=setTimeout(s._ended.bind(s,n),c)),i||setTimeout(function(){s._emit("play",n._id)},0)};"running"===t.state?u():(s.once("resume",u),s._clearTimer(n._id))}else{var g=function(){d.currentTime=l,d.muted=n._muted||s._muted||t._muted||d.muted,d.volume=n._volume*t.volume(),d.playbackRate=n._rate;try{var o=d.play();if("undefined"!=typeof Promise&&o instanceof Promise){s._playLock=!0;var a=function(){s._playLock=!1,i||s._emit("play",n._id)};o.then(a,a)}else i||s._emit("play",n._id);if(d.paused)return void s._emit("playerror",n._id,"Playback was unable to start. This is most commonly an issue on mobile devices where playback was not within a user interaction.");"__default"!==e?s._endTimers[n._id]=setTimeout(s._ended.bind(s,n),c):(s._endTimers[n._id]=function(){s._ended(n),d.removeEventListener("ended",s._endTimers[n._id],!1)},d.addEventListener("ended",s._endTimers[n._id],!1))}catch(e){s._emit("playerror",n._id,e)}},m=window&&window.ejecta||!d.readyState&&t._navigator.isCocoonJS;if(d.readyState>=3||m)g();else{var y=function(){g(),d.removeEventListener(t._canPlayEvent,y,!1)};d.addEventListener(t._canPlayEvent,y,!1),s._clearTimer(n._id)}}return n._id},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var i=t._getSoundIds(e),s=0;s<i.length;s++){t._clearTimer(i[s]);var o=t._soundById(i[s]);if(o&&!o._paused&&(o._seek=t.seek(i[s]),o._rateSeek=0,o._paused=!0,t._stopFade(i[s]),o._node))if(t._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),t._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||t._emit("pause",o?o._id:null)}return t},stop:function(e,t){var i=this;if("loaded"!==i._state)return i._queue.push({event:"stop",action:function(){i.stop(e)}}),i;for(var s=i._getSoundIds(e),o=0;o<s.length;o++){i._clearTimer(s[o]);var a=i._soundById(s[o]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,i._stopFade(s[o]),a._node&&(i._webAudio?a._node.bufferSource&&(void 0===a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),i._cleanBuffer(a._node)):isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause())),t||i._emit("stop",a._id))}return i},mute:function(e,i){var s=this;if("loaded"!==s._state)return s._queue.push({event:"mute",action:function(){s.mute(e,i)}}),s;if(void 0===i){if("boolean"!=typeof e)return s._muted;s._muted=e}for(var o=s._getSoundIds(i),a=0;a<o.length;a++){var r=s._soundById(o[a]);r&&(r._muted=e,r._interval&&s._stopFade(r._id),s._webAudio&&r._node?r._node.gain.setValueAtTime(e?0:r._volume,t.ctx.currentTime):r._node&&(r._node.muted=!!t._muted||e),s._emit("mute",r._id))}return s},volume:function(){var e,i,s=this,o=arguments;if(0===o.length)return s._volume;1===o.length||2===o.length&&void 0===o[1]?s._getSoundIds().indexOf(o[0])>=0?i=parseInt(o[0],10):e=parseFloat(o[0]):o.length>=2&&(e=parseFloat(o[0]),i=parseInt(o[1],10));var a;if(!(void 0!==e&&e>=0&&e<=1))return(a=i?s._soundById(i):s._sounds[0])?a._volume:0;if("loaded"!==s._state)return s._queue.push({event:"volume",action:function(){s.volume.apply(s,o)}}),s;void 0===i&&(s._volume=e),i=s._getSoundIds(i);for(var r=0;r<i.length;r++)(a=s._soundById(i[r]))&&(a._volume=e,o[2]||s._stopFade(i[r]),s._webAudio&&a._node&&!a._muted?a._node.gain.setValueAtTime(e,t.ctx.currentTime):a._node&&!a._muted&&(a._node.volume=e*t.volume()),s._emit("volume",a._id));return s},fade:function(e,i,s,o){var a=this;if("loaded"!==a._state)return a._queue.push({event:"fade",action:function(){a.fade(e,i,s,o)}}),a;a.volume(e,o);for(var r=a._getSoundIds(o),n=0;n<r.length;n++){var h=a._soundById(r[n]);if(h){if(o||a._stopFade(r[n]),a._webAudio&&!h._muted){var l=t.ctx.currentTime,p=l+s/1e3;h._volume=e,h._node.gain.setValueAtTime(e,l),h._node.gain.linearRampToValueAtTime(i,p)}a._startFadeInterval(h,e,i,s,r[n],void 0===o)}}return a},_startFadeInterval:function(e,t,i,s,o,a){var r=this,n=t,h=i-t,l=Math.abs(h/.01),p=Math.max(4,l>0?s/l:s),c=Date.now();e._fadeTo=i,e._interval=setInterval(function(){var o=(Date.now()-c)/s;c=Date.now(),n+=h*o,n=Math.max(0,n),n=Math.min(1,n),n=Math.round(100*n)/100,r._webAudio?e._volume=n:r.volume(n,e._id,!0),a&&(r._volume=n),(i<t&&n<=i||i>t&&n>=i)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,r.volume(i,e._id),r._emit("fade",e._id))},p)},_stopFade:function(e){var i=this,s=i._soundById(e);return s&&s._interval&&(i._webAudio&&s._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(s._interval),s._interval=null,i.volume(s._fadeTo,e),s._fadeTo=null,i._emit("fade",e)),i},loop:function(){var e,t,i,s=this,o=arguments;if(0===o.length)return s._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(i=s._soundById(parseInt(o[0],10)))&&i._loop;e=o[0],s._loop=e}else 2===o.length&&(e=o[0],t=parseInt(o[1],10));for(var a=s._getSoundIds(t),r=0;r<a.length;r++)(i=s._soundById(a[r]))&&(i._loop=e,s._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=e,e&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop)));return s},rate:function(){var e,i,s=this,o=arguments;0===o.length?i=s._sounds[0]._id:1===o.length?s._getSoundIds().indexOf(o[0])>=0?i=parseInt(o[0],10):e=parseFloat(o[0]):2===o.length&&(e=parseFloat(o[0]),i=parseInt(o[1],10));var a;if("number"!=typeof e)return(a=s._soundById(i))?a._rate:s._rate;if("loaded"!==s._state)return s._queue.push({event:"rate",action:function(){s.rate.apply(s,o)}}),s;void 0===i&&(s._rate=e),i=s._getSoundIds(i);for(var r=0;r<i.length;r++)if(a=s._soundById(i[r])){a._rateSeek=s.seek(i[r]),a._playStart=s._webAudio?t.ctx.currentTime:a._playStart,a._rate=e,s._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.setValueAtTime(e,t.ctx.currentTime):a._node&&(a._node.playbackRate=e);var n=s.seek(i[r]),h=1e3*((s._sprite[a._sprite][0]+s._sprite[a._sprite][1])/1e3-n)/Math.abs(a._rate);!s._endTimers[i[r]]&&a._paused||(s._clearTimer(i[r]),s._endTimers[i[r]]=setTimeout(s._ended.bind(s,a),h)),s._emit("rate",a._id)}return s},seek:function(){var e,i,s=this,o=arguments;if(0===o.length?i=s._sounds[0]._id:1===o.length?s._getSoundIds().indexOf(o[0])>=0?i=parseInt(o[0],10):s._sounds.length&&(i=s._sounds[0]._id,e=parseFloat(o[0])):2===o.length&&(e=parseFloat(o[0]),i=parseInt(o[1],10)),void 0===i)return s;if("loaded"!==s._state)return s._queue.push({event:"seek",action:function(){s.seek.apply(s,o)}}),s;var a=s._soundById(i);if(a){if(!("number"==typeof e&&e>=0)){if(s._webAudio){var r=s.playing(i)?t.ctx.currentTime-a._playStart:0,n=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(n+r*Math.abs(a._rate))}return a._node.currentTime}var h=s.playing(i);if(h&&s.pause(i,!0),a._seek=e,a._ended=!1,s._clearTimer(i),h&&s.play(i,!0),!s._webAudio&&a._node&&(a._node.currentTime=e),h&&!s._webAudio){var l=function(){s._playLock?setTimeout(l,0):s._emit("seek",i)};setTimeout(l,0)}else s._emit("seek",i)}return s},playing:function(e){var t=this;if("number"==typeof e){var i=t._soundById(e);return!!i&&!i._paused}for(var s=0;s<t._sounds.length;s++)if(!t._sounds[s]._paused)return!0;return!1},duration:function(e){var t=this,i=t._duration,s=t._soundById(e);return s&&(i=t._sprite[s._sprite][1]/1e3),i},state:function(){return this._state},unload:function(){for(var e=this,i=e._sounds,s=0;s<i.length;s++){i[s]._paused||e.stop(i[s]._id),e._webAudio||(/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent)||(i[s]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),i[s]._node.removeEventListener("error",i[s]._errorFn,!1),i[s]._node.removeEventListener(t._canPlayEvent,i[s]._loadFn,!1)),delete i[s]._node,e._clearTimer(i[s]._id);var a=t._howls.indexOf(e);a>=0&&t._howls.splice(a,1)}var r=!0;for(s=0;s<t._howls.length;s++)if(t._howls[s]._src===e._src){r=!1;break}return o&&r&&delete o[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,i,s){var o=this,a=o["_on"+e];return"function"==typeof t&&a.push(s?{id:i,fn:t,once:s}:{id:i,fn:t}),o},off:function(e,t,i){var s=this,o=s["_on"+e],a=0;if("number"==typeof t&&(i=t,t=null),t||i)for(a=0;a<o.length;a++){var r=i===o[a].id;if(t===o[a].fn&&r||!t&&r){o.splice(a,1);break}}else if(e)s["_on"+e]=[];else{var n=Object.keys(s);for(a=0;a<n.length;a++)0===n[a].indexOf("_on")&&Array.isArray(s[n[a]])&&(s[n[a]]=[])}return s},once:function(e,t,i){var s=this;return s.on(e,t,i,1),s},_emit:function(e,t,i){for(var s=this,o=s["_on"+e],a=o.length-1;a>=0;a--)o[a].id&&o[a].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,i)}.bind(s,o[a].fn),0),o[a].once&&s.off(e,o[a].fn,o[a].id));return s._loadQueue(e),s},_loadQueue:function(e){var t=this;if(t._queue.length>0){var i=t._queue[0];i.event===e&&(t._queue.shift(),t._loadQueue()),e||i.action()}return t},_ended:function(e){var i=this,s=e._sprite;if(!i._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(i._ended.bind(i,e),100),i;var o=!(!e._loop&&!i._sprite[s][2]);if(i._emit("end",e._id),!i._webAudio&&o&&i.stop(e._id,!0).play(e._id),i._webAudio&&o){i._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=t.ctx.currentTime;var a=1e3*(e._stop-e._start)/Math.abs(e._rate);i._endTimers[e._id]=setTimeout(i._ended.bind(i,e),a)}return i._webAudio&&!o&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,i._clearTimer(e._id),i._cleanBuffer(e._node),t._autoSuspend()),i._webAudio||o||i.stop(e._id),i},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var i=t._soundById(e);i&&i._node&&i._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,i=0;i<t._sounds.length;i++)if(e===t._sounds[i]._id)return t._sounds[i];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new s(e)},_drain:function(){var e=this,t=e._pool,i=0,s=0;if(!(e._sounds.length<t)){for(s=0;s<e._sounds.length;s++)e._sounds[s]._ended&&i++;for(s=e._sounds.length-1;s>=0;s--){if(i<=t)return;e._sounds[s]._ended&&(e._webAudio&&e._sounds[s]._node&&e._sounds[s]._node.disconnect(0),e._sounds.splice(s,1),i--)}}},_getSoundIds:function(e){var t=this;if(void 0===e){for(var i=[],s=0;s<t._sounds.length;s++)i.push(t._sounds[s]._id);return i}return[e]},_refreshBuffer:function(e){var i=this;return e._node.bufferSource=t.ctx.createBufferSource(),e._node.bufferSource.buffer=o[i._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,t.ctx.currentTime),i},_cleanBuffer:function(e){var i=this;if(t._scratchBuffer){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=t._scratchBuffer}catch(e){}}return e.bufferSource=null,i}};var s=function(e){this._parent=e,this.init()};s.prototype={init:function(){var e=this,i=e._parent;return e._muted=i._muted,e._loop=i._loop,e._volume=i._volume,e._rate=i._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,i._sounds.push(e),e.create(),e},create:function(){var e=this,i=e._parent,s=t._muted||e._muted||e._parent._muted?0:e._volume;return i._webAudio?(e._node=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),e._node.gain.setValueAtTime(s,t.ctx.currentTime),e._node.paused=!0,e._node.connect(t.masterGain)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(t._canPlayEvent,e._loadFn,!1),e._node.src=i._src,e._node.preload="auto",e._node.volume=s*t.volume(),e._node.load()),e},reset:function(){var e=this,i=e._parent;return e._muted=i._muted,e._loop=i._loop,e._volume=i._volume,e._rate=i._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,i=e._parent;i._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(i._sprite).length&&(i._sprite={__default:[0,1e3*i._duration]}),"loaded"!==i._state&&(i._state="loaded",i._emit("load"),i._loadQueue()),e._node.removeEventListener(t._canPlayEvent,e._loadFn,!1)}};var o={},a=function(e){var t=e._src;if(o[t])return e._duration=o[t].duration,void h(e);if(/^data:[^;]+;base64,/.test(t)){for(var i=atob(t.split(",")[1]),s=new Uint8Array(i.length),a=0;a<i.length;++a)s[a]=i.charCodeAt(a);n(s.buffer,e)}else{var l=new XMLHttpRequest;l.open("GET",t,!0),l.withCredentials=e._xhrWithCredentials,l.responseType="arraybuffer",l.onload=function(){var t=(l.status+"")[0];"0"===t||"2"===t||"3"===t?n(l.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+l.status+".")},l.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete o[t],e.load())},r(l)}},r=function(e){try{e.send()}catch(t){e.onerror()}},n=function(e,i){t.ctx.decodeAudioData(e,function(e){e&&i._sounds.length>0&&(o[i._src]=e,h(i,e))},function(){i._emit("loaderror",null,"Decoding audio data failed.")})},h=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},l=function(){try{"undefined"!=typeof AudioContext?t.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch(e){t.usingWebAudio=!1}var e=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),i=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),s=i?parseInt(i[1],10):null;if(e&&s&&s<9){var o=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());(t._navigator&&t._navigator.standalone&&!o||t._navigator&&!t._navigator.standalone&&!o)&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:1,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:t,Howl:i}}),"undefined"!=typeof exports&&(exports.Howler=t,exports.Howl=i),"undefined"!=typeof window?(window.HowlerGlobal=e,window.Howler=t,window.Howl=i,window.Sound=s):"undefined"!=typeof global&&(global.HowlerGlobal=e,global.Howler=t,global.Howl=i,global.Sound=s)}(),function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var i=t._howls.length-1;i>=0;i--)t._howls[i].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,i){var s=this;return s.ctx&&s.ctx.listener?(t="number"!=typeof t?s._pos[1]:t,i="number"!=typeof i?s._pos[2]:i,"number"!=typeof e?s._pos:(s._pos=[e,t,i],s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]),s)):s},HowlerGlobal.prototype.orientation=function(e,t,i,s,o,a){var r=this;if(!r.ctx||!r.ctx.listener)return r;var n=r._orientation;return t="number"!=typeof t?n[1]:t,i="number"!=typeof i?n[2]:i,s="number"!=typeof s?n[3]:s,o="number"!=typeof o?n[4]:o,a="number"!=typeof a?n[5]:a,"number"!=typeof e?n:(r._orientation=[e,t,i,s,o,a],r.ctx.listener.setOrientation(e,t,i,s,o,a),r)},Howl.prototype.init=function(e){return function(t){var i=this;return i._orientation=t.orientation||[1,0,0],i._stereo=t.stereo||null,i._pos=t.pos||null,i._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},i._onstereo=t.onstereo?[{fn:t.onstereo}]:[],i._onpos=t.onpos?[{fn:t.onpos}]:[],i._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,i){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"stereo",action:function(){s.stereo(t,i)}}),s;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0]}for(var a=s._getSoundIds(i),r=0;r<a.length;r++){var n=s._soundById(a[r]);if(n){if("number"!=typeof t)return n._stereo;n._stereo=t,n._pos=[t,0,0],n._node&&(n._pannerAttr.panningModel="equalpower",n._panner&&n._panner.pan||e(n,o),"spatial"===o?n._panner.setPosition(t,0,0):n._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),s._emit("stereo",n._id)}}return s},Howl.prototype.pos=function(t,i,s,o){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"pos",action:function(){a.pos(t,i,s,o)}}),a;if(i="number"!=typeof i?0:i,s="number"!=typeof s?-.5:s,void 0===o){if("number"!=typeof t)return a._pos;a._pos=[t,i,s]}for(var r=a._getSoundIds(o),n=0;n<r.length;n++){var h=a._soundById(r[n]);if(h){if("number"!=typeof t)return h._pos;h._pos=[t,i,s],h._node&&(h._panner&&!h._panner.pan||e(h,"spatial"),h._panner.setPosition(t,i,s)),a._emit("pos",h._id)}}return a},Howl.prototype.orientation=function(t,i,s,o){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"orientation",action:function(){a.orientation(t,i,s,o)}}),a;if(i="number"!=typeof i?a._orientation[1]:i,s="number"!=typeof s?a._orientation[2]:s,void 0===o){if("number"!=typeof t)return a._orientation;a._orientation=[t,i,s]}for(var r=a._getSoundIds(o),n=0;n<r.length;n++){var h=a._soundById(r[n]);if(h){if("number"!=typeof t)return h._orientation;h._orientation=[t,i,s],h._node&&(h._panner||(h._pos||(h._pos=a._pos||[0,0,-.5]),e(h,"spatial")),h._panner.setOrientation(t,i,s)),a._emit("orientation",h._id)}}return a},Howl.prototype.pannerAttr=function(){var t,i,s,o=this,a=arguments;if(!o._webAudio)return o;if(0===a.length)return o._pannerAttr;if(1===a.length){if("object"!=typeof a[0])return(s=o._soundById(parseInt(a[0],10)))?s._pannerAttr:o._pannerAttr;t=a[0],void 0===i&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),o._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:o._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:o._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:o._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:o._panningModel})}else 2===a.length&&(t=a[0],i=parseInt(a[1],10));for(var r=o._getSoundIds(i),n=0;n<r.length;n++)if(s=o._soundById(r[n])){var h=s._pannerAttr;h={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:h.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:h.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:h.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:h.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:h.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:h.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:h.panningModel};var l=s._panner;l?(l.coneInnerAngle=h.coneInnerAngle,l.coneOuterAngle=h.coneOuterAngle,l.coneOuterGain=h.coneOuterGain,l.distanceModel=h.distanceModel,l.maxDistance=h.maxDistance,l.refDistance=h.refDistance,l.rolloffFactor=h.rolloffFactor,l.panningModel=h.panningModel):(s._pos||(s._pos=o._pos||[0,0,-.5]),e(s,"spatial"))}return o},Sound.prototype.init=function(e){return function(){var t=this,i=t._parent;t._orientation=i._orientation,t._stereo=i._stereo,t._pos=i._pos,t._pannerAttr=i._pannerAttr,e.call(this),t._stereo?i.stereo(t._stereo):t._pos&&i.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,i=t._parent;return t._orientation=i._orientation,t._pos=i._pos,t._pannerAttr=i._pannerAttr,e.call(this)}}(Sound.prototype.reset);var e=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}(),function(e,t){"use strict";function i(i,s){function o(e){return ye.preferFlash&&he&&!ye.ignoreFlash&&ye.flash[e]!==t&&ye.flash[e]}function a(e){return function(t){var i,s=this._s;return s&&s._a?i=e.call(this,t):(s&&s.id?ye._wD(s.id+": Ignoring "+t.type):ye._wD(ke+"Ignoring "+t.type),i=null),i}}this.setupOptions={url:i||null,flashVersion:8,debugMode:!1,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,ignoreMobileRestrictions:!1,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=s||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20150601",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var r,n,h,l,p,c,d,u,g,m,y,f,b,w,v,k,S,x,P,B,T,G,C,A,M,I,L,H,R,D,O,E,F,_,j,W,U,z,V,X,N,q,Y,K,Z,J,Q,$,ee,te,ie,se,oe,ae,re,ne,he,le,pe,ce,de,ue,ge,me,ye=this,fe=null,be=null,we="soundManager",ve=we+": ",ke="HTML5::",Se=navigator.userAgent,xe=e.location.href.toString(),Pe=document,Be=[],Te=!0,Ge=!1,Ce=!1,Ae=!1,Me=!1,Ie=!1,Le=0,He=["log","info","warn","error"],Re=null,De=null,Oe=!1,Ee=!1,Fe=0,_e=null,je=[],We=null,Ue=Array.prototype.slice,ze=!1,Ve=0,Xe=Se.match(/(ipad|iphone|ipod)/i),Ne=Se.match(/android/i),qe=Se.match(/msie/i),Ye=Se.match(/webkit/i),Ke=Se.match(/safari/i)&&!Se.match(/chrome/i),Ze=Se.match(/opera/i),Je=Se.match(/(mobile|pre\/|xoom)/i)||Xe||Ne,Qe=!xe.match(/usehtml5audio/i)&&!xe.match(/sm2\-ignorebadua/i)&&Ke&&!Se.match(/silk/i)&&Se.match(/OS X 10_6_([3-7])/i),$e=e.console!==t&&console.log!==t,et=Pe.hasFocus!==t?Pe.hasFocus():null,tt=Ke&&(Pe.hasFocus===t||!Pe.hasFocus()),it=!tt,st=/(mp3|mp4|mpa|m4a|m4b)/i,ot=Pe.location?Pe.location.protocol.match(/http/i):null,at=ot?"":"http://",rt=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,nt=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],ht=new RegExp("\\.("+nt.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!ot,U={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.hasHTML5=function(){try{return Audio!==t&&(Ze&&opera!==t&&opera.version()<10?new Audio(null):new Audio).canPlayType!==t}catch(e){return!1}}(),this.setup=function(e){var i=!ye.url;return e!==t&&Ae&&We&&ye.ok()&&(e.flashVersion!==t||e.url!==t||e.html5Test!==t)&&N(_("setupLate")),y(e),ze||(Je?ye.setupOptions.ignoreMobileRestrictions&&!ye.setupOptions.forceUseGlobalHTML5Audio||(je.push(T.globalHTML5),ze=!0):ye.setupOptions.forceUseGlobalHTML5Audio&&(je.push(T.globalHTML5),ze=!0)),!me&&Je&&(ye.setupOptions.ignoreMobileRestrictions?je.push(T.ignoreMobile):(ye.setupOptions.useHTML5Audio&&!ye.setupOptions.preferFlash||ye._wD(T.mobileUA),ye.setupOptions.useHTML5Audio=!0,ye.setupOptions.preferFlash=!1,Xe?ye.ignoreFlash=!0:(Ne&&!Se.match(/android\s2\.3/i)||!Ne)&&(ye._wD(T.globalHTML5),ze=!0))),e&&(i&&M&&e.url!==t&&ye.beginDelayedInit(),M||e.url===t||"complete"!==Pe.readyState||setTimeout(C,1)),me=!0,ye},this.ok=function(){return We?Ae&&!Me:ye.useHTML5Audio&&ye.hasHTML5},this.supported=this.ok,this.getMovie=function(t){return n(t)||Pe[t]||e[t]},this.createSound=function(e,i){function s(){return n=V(n),ye.sounds[n.id]=new r(n),ye.soundIDs.push(n.id),ye.sounds[n.id]}var o,a,n,h=null;if(o=we+".createSound(): ",a=o+_(Ae?"notOK":"notReady"),!Ae||!ye.ok())return N(a),!1;if(i!==t&&(e={id:e,url:i}),n=m(e),n.url=J(n.url),n.id===t&&(n.id=ye.setupOptions.idPrefix+Ve++),n.id.toString().charAt(0).match(/^[0-9]$/)&&ye._wD(o+_("badID",n.id),2),ye._wD(o+n.id+(n.url?" ("+n.url+")":""),1),q(n.id,!0))return ye._wD(o+n.id+" exists",1),ye.sounds[n.id];if(ee(n))h=s(),ye.html5Only||ye._wD(n.id+": Using HTML5"),h._setup_html5(n);else{if(ye.html5Only)return ye._wD(n.id+": No HTML5 support for this sound, and no Flash. Exiting."),s();if(ye.html5.usingFlash&&n.url&&n.url.match(/data\:/i))return ye._wD(n.id+": data: URIs not supported via Flash. Exiting."),s();c>8&&(null===n.isMovieStar&&(n.isMovieStar=!!(n.serverURL||n.type&&n.type.match(rt)||n.url&&n.url.match(ht))),n.isMovieStar&&(ye._wD(o+"using MovieStar handling"),n.loops>1&&u("noNSLoop"))),n=X(n,o),h=s(),8===c?be._createSound(n.id,n.loops||1,n.usePolicyFile):(be._createSound(n.id,n.url,n.usePeakData,n.useWaveformData,n.useEQData,n.isMovieStar,!!n.isMovieStar&&n.bufferTime,n.loops||1,n.serverURL,n.duration||null,n.autoPlay,!0,n.autoLoad,n.usePolicyFile),n.serverURL||(h.connected=!0,n.onconnect&&n.onconnect.apply(h))),n.serverURL||!n.autoLoad&&!n.autoPlay||h.load(n)}return!n.serverURL&&n.autoPlay&&h.play(),h},this.destroySound=function(e,t){if(!q(e))return!1;var i,s=ye.sounds[e];for(s.stop(),s._iO={},s.unload(),i=0;i<ye.soundIDs.length;i++)if(ye.soundIDs[i]===e){ye.soundIDs.splice(i,1);break}return t||s.destruct(!0),s=null,delete ye.sounds[e],!0},this.load=function(e,t){return!!q(e)&&ye.sounds[e].load(t)},this.unload=function(e){return!!q(e)&&ye.sounds[e].unload()},this.onPosition=function(e,t,i,s){return!!q(e)&&ye.sounds[e].onposition(t,i,s)},this.onposition=this.onPosition,this.clearOnPosition=function(e,t,i){return!!q(e)&&ye.sounds[e].clearOnPosition(t,i)},this.play=function(e,t){var i=null,s=t&&!(t instanceof Object);if(!Ae||!ye.ok())return N(we+".play(): "+_(Ae?"notOK":"notReady")),!1;if(q(e,s))s&&(t={url:t});else{if(!s)return!1;s&&(t={url:t}),t&&t.url&&(ye._wD(we+'.play(): Attempting to create "'+e+'"',1),t.id=e,i=ye.createSound(t).play())}return null===i&&(i=ye.sounds[e].play(t)),i},this.start=this.play,this.setPosition=function(e,t){return!!q(e)&&ye.sounds[e].setPosition(t)},this.stop=function(e){return!!q(e)&&(ye._wD(we+".stop("+e+")",1),ye.sounds[e].stop())},this.stopAll=function(){var e;ye._wD(we+".stopAll()",1);for(e in ye.sounds)ye.sounds.hasOwnProperty(e)&&ye.sounds[e].stop()},this.pause=function(e){return!!q(e)&&ye.sounds[e].pause()},this.pauseAll=function(){var e;for(e=ye.soundIDs.length-1;e>=0;e--)ye.sounds[ye.soundIDs[e]].pause()},this.resume=function(e){return!!q(e)&&ye.sounds[e].resume()},this.resumeAll=function(){var e;for(e=ye.soundIDs.length-1;e>=0;e--)ye.sounds[ye.soundIDs[e]].resume()},this.togglePause=function(e){return!!q(e)&&ye.sounds[e].togglePause()},this.setPan=function(e,t){return!!q(e)&&ye.sounds[e].setPan(t)},this.setVolume=function(e,i){var s,o;{if(e===t||isNaN(e)||i!==t)return!!q(e)&&ye.sounds[e].setVolume(i);for(s=0,o=ye.soundIDs.length;s<o;s++)ye.sounds[ye.soundIDs[s]].setVolume(e)}},this.mute=function(e){var t=0;if(e instanceof String&&(e=null),e)return!!q(e)&&(ye._wD(we+'.mute(): Muting "'+e+'"'),ye.sounds[e].mute());for(ye._wD(we+".mute(): Muting all sounds"),t=ye.soundIDs.length-1;t>=0;t--)ye.sounds[ye.soundIDs[t]].mute();return ye.muted=!0,!0},this.muteAll=function(){ye.mute()},this.unmute=function(e){var t;if(e instanceof String&&(e=null),e)return!!q(e)&&(ye._wD(we+'.unmute(): Unmuting "'+e+'"'),ye.sounds[e].unmute());for(ye._wD(we+".unmute(): Unmuting all sounds"),t=ye.soundIDs.length-1;t>=0;t--)ye.sounds[ye.soundIDs[t]].unmute();return ye.muted=!1,!0},this.unmuteAll=function(){ye.unmute()},this.toggleMute=function(e){return!!q(e)&&ye.sounds[e].toggleMute()},this.getMemoryUse=function(){var e=0;return be&&8!==c&&(e=parseInt(be._getMemoryUse(),10)),e},this.disable=function(i){var s;if(i===t&&(i=!1),Me)return!1;for(Me=!0,u("shutdown",1),s=ye.soundIDs.length-1;s>=0;s--)O(ye.sounds[ye.soundIDs[s]]);return g(i),re.remove(e,"load",v),!0},this.canPlayMIME=function(e){var t;return ye.hasHTML5&&(t=te({type:e})),!t&&We&&(t=e&&ye.ok()?!!((c>8?e.match(rt):null)||e.match(ye.mimePattern)):null),t},this.canPlayURL=function(e){var t;return ye.hasHTML5&&(t=te({url:e})),!t&&We&&(t=e&&ye.ok()?!!e.match(ye.filePattern):null),t},this.canPlayLink=function(e){return!(e.type===t||!e.type||!ye.canPlayMIME(e.type))||ye.canPlayURL(e.href)},this.getSoundById=function(e,t){if(!e)return null;var i=ye.sounds[e];return i||t||ye._wD(we+'.getSoundById(): Sound "'+e+'" not found.',2),i},this.onready=function(t,i){if("function"!=typeof t)throw _("needFunction","onready");return Ae&&ye._wD(_("queue","onready")),i||(i=e),b("onready",t,i),w(),!0},this.ontimeout=function(t,i){var s="ontimeout";if("function"!=typeof t)throw _("needFunction",s);return Ae&&ye._wD(_("queue",s)),i||(i=e),b(s,t,i),w({type:s}),!0},this._writeDebug=function(e,i){var s,o;return!!ye.setupOptions.debugMode&&(!!($e&&ye.useConsole&&(i&&"object"==typeof i?console.log(e,i):He[i]!==t?console[He[i]](e):console.log(e),ye.consoleOnly))||!!(s=n("soundmanager-debug"))&&(o=Pe.createElement("div"),++Le%2==0&&(o.className="sm2-alt"),i=i===t?0:parseInt(i,10),o.appendChild(Pe.createTextNode(e)),i&&(i>=2&&(o.style.fontWeight="bold"),3===i&&(o.style.color="#ff3333")),s.insertBefore(o,s.firstChild),s=null,!0))},-1!==xe.indexOf("sm2-debug=alert")&&(this._writeDebug=function(t){e.alert(t)}),this._wD=this._writeDebug,this._debug=function(){var e,t;for(u("currentObj",1),e=0,t=ye.soundIDs.length;e<t;e++)ye.sounds[ye.soundIDs[e]]._debug()},this.reboot=function(t,i){ye.soundIDs.length&&ye._wD("Destroying "+ye.soundIDs.length+" SMSound object"+(1!==ye.soundIDs.length?"s":"")+"...");var s,o,a;for(s=ye.soundIDs.length-1;s>=0;s--)ye.sounds[ye.soundIDs[s]].destruct();if(be)try{qe&&(De=be.innerHTML),Re=be.parentNode.removeChild(be)}catch(e){u("badRemove",2)}if(De=Re=We=be=null,ye.enabled=M=Ae=Oe=Ee=Ge=Ce=Me=ze=ye.swfLoaded=!1,ye.soundIDs=[],ye.sounds={},Ve=0,me=!1,t)Be=[];else for(s in Be)if(Be.hasOwnProperty(s))for(o=0,a=Be[s].length;o<a;o++)Be[s][o].fired=!1;return i||ye._wD(we+": Rebooting..."),ye.html5={usingFlash:null},ye.flash={},ye.html5Only=!1,ye.ignoreFlash=!1,e.setTimeout(function(){i||ye.beginDelayedInit()},20),ye},this.reset=function(){return u("reset"),ye.reboot(!0,!0)},this.getMoviePercent=function(){return be&&"PercentLoaded"in be?be.PercentLoaded():null},this.beginDelayedInit=function(){Ie=!0,C(),setTimeout(function(){return!Ee&&(L(),G(),Ee=!0,!0)},20),k()},this.destruct=function(){ye._wD(we+".destruct()"),ye.disable(!0)},r=function(e){var i,s,o,a,r,n,h,l,p,g,y=this,f=!1,b=[],w=0,v=null;p={duration:null,time:null},this.id=e.id,this.sID=this.id,this.url=e.url,this.options=m(e),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,g=!this.url,this.id3={},this._debug=function(){ye._wD(y.id+": Merged options:",y.options)},this.load=function(e){var i;if(e!==t?y._iO=m(e,y.options):(e=y.options,y._iO=e,v&&v!==y.url&&(u("manURL"),y._iO.url=y.url,y.url=null)),y._iO.url||(y._iO.url=y.url),y._iO.url=J(y._iO.url),y.instanceOptions=y._iO,i=y._iO,ye._wD(y.id+": load ("+i.url+")"),!i.url&&!y.url)return ye._wD(y.id+": load(): url is unassigned. Exiting.",2),y;if(y.isHTML5||8!==c||y.url||i.autoPlay||ye._wD(y.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),i.url===y.url&&0!==y.readyState&&2!==y.readyState)return u("onURL",1),3===y.readyState&&i.onload&&ge(y,function(){i.onload.apply(y,[!!y.duration])}),y;if(y.loaded=!1,y.readyState=1,y.playState=0,y.id3={},ee(i))y._setup_html5(i)._called_load?ye._wD(y.id+": Ignoring request to load again"):(y._html5_canplay=!1,y.url!==i.url&&(ye._wD(u("manURL")+": "+i.url),y._a.src=i.url,y.setPosition(0)),y._a.autobuffer="auto",y._a.preload="auto",y._a._called_load=!0);else{if(ye.html5Only)return ye._wD(y.id+": No flash support. Exiting."),y;if(y._iO.url&&y._iO.url.match(/data\:/i))return ye._wD(y.id+": data: URIs not supported via Flash. Exiting."),y;try{y.isHTML5=!1,y._iO=X(V(i)),y._iO.autoPlay&&(y._iO.position||y._iO.from)&&(ye._wD(y.id+": Disabling autoPlay because of non-zero offset case"),y._iO.autoPlay=!1),i=y._iO,8===c?be._load(y.id,i.url,i.stream,i.autoPlay,i.usePolicyFile):be._load(y.id,i.url,!!i.stream,!!i.autoPlay,i.loops||1,!!i.autoLoad,i.usePolicyFile)}catch(e){u("smError",2),d("onload",!1),H({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return y.url=i.url,y},this.unload=function(){return 0!==y.readyState&&(ye._wD(y.id+": unload()"),y.isHTML5?(a(),y._a&&(y._a.pause(),v=se(y._a))):8===c?be._unload(y.id,"about:blank"):be._unload(y.id),i()),y},this.destruct=function(e){ye._wD(y.id+": Destruct"),y.isHTML5?(a(),y._a&&(y._a.pause(),se(y._a),ze||o(),y._a._s=null,y._a=null)):(y._iO.onfailure=null,be._destroySound(y.id)),e||ye.destroySound(y.id,!0)},this.play=function(e,i){var s,o,a,h,p,d,u=!0,b=null;if(s=y.id+": play(): ",i=i===t||i,e||(e={}),y.url&&(y._iO.url=y.url),y._iO=m(y._iO,y.options),y._iO=m(e,y._iO),y._iO.url=J(y._iO.url),y.instanceOptions=y._iO,!y.isHTML5&&y._iO.serverURL&&!y.connected)return y.getAutoPlay()||(ye._wD(s+" Netstream not connected yet - setting autoPlay"),y.setAutoPlay(!0)),y;if(ee(y._iO)&&(y._setup_html5(y._iO),r()),1!==y.playState||y.paused||(y._iO.multiShot?ye._wD(s+"Already playing (multi-shot)",1):(ye._wD(s+"Already playing (one-shot)",1),y.isHTML5&&y.setPosition(y._iO.position),b=y)),null!==b)return b;if(e.url&&e.url!==y.url&&(y.readyState||y.isHTML5||8!==c||!g?y.load(y._iO):g=!1),y.loaded?ye._wD(s.substr(0,s.lastIndexOf(":"))):0===y.readyState?(ye._wD(s+"Attempting to load"),y.isHTML5||ye.html5Only?y.isHTML5?y.load(y._iO):(ye._wD(s+"Unsupported type. Exiting."),b=y):(y._iO.autoPlay=!0,y.load(y._iO)),y.instanceOptions=y._iO):2===y.readyState?(ye._wD(s+"Could not load - exiting",2),b=y):ye._wD(s+"Loading - attempting to play..."),null!==b)return b;if(!y.isHTML5&&9===c&&y.position>0&&y.position===y.duration&&(ye._wD(s+"Sound at end, resetting to position: 0"),e.position=0),y.paused&&y.position>=0&&(!y._iO.serverURL||y.position>0))ye._wD(s+"Resuming from paused state",1),y.resume();else{if(y._iO=m(e,y._iO),(!y.isHTML5&&null!==y._iO.position&&y._iO.position>0||null!==y._iO.from&&y._iO.from>0||null!==y._iO.to)&&0===y.instanceCount&&0===y.playState&&!y._iO.serverURL){if(a=function(){y._iO=m(e,y._iO),y.play(y._iO)},y.isHTML5&&!y._html5_canplay?(ye._wD(s+"Beginning load for non-zero offset case"),y.load({_oncanplay:a}),b=!1):y.isHTML5||y.loaded||y.readyState&&2===y.readyState||(ye._wD(s+"Preloading for non-zero offset case"),y.load({onload:a}),b=!1),null!==b)return b;y._iO=l()}(!y.instanceCount||y._iO.multiShotEvents||y.isHTML5&&y._iO.multiShot&&!ze||!y.isHTML5&&c>8&&!y.getAutoPlay())&&y.instanceCount++,y._iO.onposition&&0===y.playState&&n(y),y.playState=1,y.paused=!1,y.position=y._iO.position===t||isNaN(y._iO.position)?0:y._iO.position,y.isHTML5||(y._iO=X(V(y._iO))),y._iO.onplay&&i&&(y._iO.onplay.apply(y),f=!0),y.setVolume(y._iO.volume,!0),y.setPan(y._iO.pan,!0),y.isHTML5?y.instanceCount<2?(r(),o=y._setup_html5(),y.setPosition(y._iO.position),o.play()):(ye._wD(y.id+": Cloning Audio() for instance #"+y.instanceCount+"..."),h=new Audio(y._iO.url),p=function(){re.remove(h,"ended",p),y._onfinish(y),se(h),h=null},d=function(){re.remove(h,"canplay",d);try{h.currentTime=y._iO.position/1e3}catch(e){N(y.id+": multiShot play() failed to apply position of "+y._iO.position/1e3)}h.play()},re.add(h,"ended",p),y._iO.volume!==t&&(h.volume=Math.max(0,Math.min(1,y._iO.volume/100))),y.muted&&(h.muted=!0),y._iO.position?re.add(h,"canplay",d):h.play()):(u=be._start(y.id,y._iO.loops||1,9===c?y.position:y.position/1e3,y._iO.multiShot||!1),9!==c||u||(ye._wD(s+"No sound hardware, or 32-sound ceiling hit",2),y._iO.onplayerror&&y._iO.onplayerror.apply(y)))}return y},this.start=this.play,this.stop=function(e){var t,i=y._iO;return 1===y.playState&&(ye._wD(y.id+": stop()"),y._onbufferchange(0),y._resetOnPosition(0),y.paused=!1,y.isHTML5||(y.playState=0),h(),i.to&&y.clearOnPosition(i.to),y.isHTML5?y._a&&(t=y.position,y.setPosition(0),y.position=t,y._a.pause(),y.playState=0,y._onTimer(),a()):(be._stop(y.id,e),i.serverURL&&y.unload()),y.instanceCount=0,y._iO={},i.onstop&&i.onstop.apply(y)),y},this.setAutoPlay=function(e){ye._wD(y.id+": Autoplay turned "+(e?"on":"off")),y._iO.autoPlay=e,y.isHTML5||(be._setAutoPlay(y.id,e),e&&(y.instanceCount||1!==y.readyState||(y.instanceCount++,ye._wD(y.id+": Incremented instance count to "+y.instanceCount))))},this.getAutoPlay=function(){return y._iO.autoPlay},this.setPosition=function(e){e===t&&(e=0);var i,s,o=y.isHTML5?Math.max(e,0):Math.min(y.duration||y._iO.duration,Math.max(e,0));if(y.position=o,s=y.position/1e3,y._resetOnPosition(y.position),y._iO.position=o,y.isHTML5){if(y._a){if(y._html5_canplay){if(y._a.currentTime!==s){ye._wD(y.id+": setPosition("+s+")");try{y._a.currentTime=s,(0===y.playState||y.paused)&&y._a.pause()}catch(e){ye._wD(y.id+": setPosition("+s+") failed: "+e.message,2)}}}else if(s)return ye._wD(y.id+": setPosition("+s+"): Cannot seek yet, sound not ready",2),y;y.paused&&y._onTimer(!0)}}else i=9===c?y.position:s,y.readyState&&2!==y.readyState&&be._setPosition(y.id,i,y.paused||!y.playState,y._iO.multiShot);return y},this.pause=function(e){return y.paused||0===y.playState&&1!==y.readyState?y:(ye._wD(y.id+": pause()"),y.paused=!0,y.isHTML5?(y._setup_html5().pause(),a()):(e||e===t)&&be._pause(y.id,y._iO.multiShot),y._iO.onpause&&y._iO.onpause.apply(y),y)},this.resume=function(){var e=y._iO;return y.paused?(ye._wD(y.id+": resume()"),y.paused=!1,y.playState=1,y.isHTML5?(y._setup_html5().play(),r()):(e.isMovieStar&&!e.serverURL&&y.setPosition(y.position),be._pause(y.id,e.multiShot)),!f&&e.onplay?(e.onplay.apply(y),f=!0):e.onresume&&e.onresume.apply(y),y):y},this.togglePause=function(){return ye._wD(y.id+": togglePause()"),0===y.playState?(y.play({position:9!==c||y.isHTML5?y.position/1e3:y.position}),y):(y.paused?y.resume():y.pause(),y)},this.setPan=function(e,i){return e===t&&(e=0),i===t&&(i=!1),y.isHTML5||be._setPan(y.id,e),y._iO.pan=e,i||(y.pan=e,y.options.pan=e),y},this.setVolume=function(e,i){return e===t&&(e=100),i===t&&(i=!1),y.isHTML5?y._a&&(ye.muted&&!y.muted&&(y.muted=!0,y._a.muted=!0),y._a.volume=Math.max(0,Math.min(1,e/100))):be._setVolume(y.id,ye.muted&&!y.muted||y.muted?0:e),y._iO.volume=e,i||(y.volume=e,y.options.volume=e),y},this.mute=function(){return y.muted=!0,y.isHTML5?y._a&&(y._a.muted=!0):be._setVolume(y.id,0),y},this.unmute=function(){y.muted=!1;var e=y._iO.volume!==t;return y.isHTML5?y._a&&(y._a.muted=!1):be._setVolume(y.id,e?y._iO.volume:y.options.volume),y},this.toggleMute=function(){return y.muted?y.unmute():y.mute()},this.onPosition=function(e,i,s){return b.push({position:parseInt(e,10),method:i,scope:s!==t?s:y,fired:!1}),y},this.onposition=this.onPosition,this.clearOnPosition=function(e,t){var i;if(e=parseInt(e,10),isNaN(e))return!1;for(i=0;i<b.length;i++)e===b[i].position&&(t&&t!==b[i].method||(b[i].fired&&w--,b.splice(i,1)))},this._processOnPosition=function(){var e,t,i=b.length;if(!i||!y.playState||w>=i)return!1;for(e=i-1;e>=0;e--)!(t=b[e]).fired&&y.position>=t.position&&(t.fired=!0,w++,t.method.apply(t.scope,[t.position]),i=b.length);return!0},this._resetOnPosition=function(e){var t,i,s=b.length;if(!s)return!1;for(t=s-1;t>=0;t--)(i=b[t]).fired&&e<=i.position&&(i.fired=!1,w--);return!0},l=function(){var e,t,i=y._iO,s=i.from,o=i.to;return t=function(){ye._wD(y.id+': "To" time of '+o+" reached."),y.clearOnPosition(o,t),y.stop()},e=function(){ye._wD(y.id+': Playing "from" '+s),null===o||isNaN(o)||y.onPosition(o,t)},null===s||isNaN(s)||(i.position=s,i.multiShot=!1,e()),i},n=function(){var e,t=y._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&y.onPosition(parseInt(e,10),t[e])},h=function(){var e,t=y._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&y.clearOnPosition(parseInt(e,10))},r=function(){y.isHTML5&&Y(y)},a=function(){y.isHTML5&&K(y)},(i=function(e){e||(b=[],w=0),f=!1,y._hasTimer=null,y._a=null,y._html5_canplay=!1,y.bytesLoaded=null,y.bytesTotal=null,y.duration=y._iO&&y._iO.duration?y._iO.duration:null,y.durationEstimate=null,y.buffered=[],y.eqData=[],y.eqData.left=[],y.eqData.right=[],y.failures=0,y.isBuffering=!1,y.instanceOptions={},y.instanceCount=0,y.loaded=!1,y.metadata={},y.readyState=0,y.muted=!1,y.paused=!1,y.peakData={left:0,right:0},y.waveformData={left:[],right:[]},y.playState=0,y.position=null,y.id3={}})(),this._onTimer=function(e){var t,i,s=!1,o={};if(y._hasTimer||e)return y._a&&(e||(y.playState>0||1===y.readyState)&&!y.paused)&&((t=y._get_html5_duration())!==p.duration&&(p.duration=t,y.duration=t,s=!0),y.durationEstimate=y.duration,(i=1e3*y._a.currentTime||0)!==p.time&&(p.time=i,s=!0),(s||e)&&y._whileplaying(i,o,o,o,o)),s},this._get_html5_duration=function(){var e=y._iO,t=y._a&&y._a.duration?1e3*y._a.duration:e&&e.duration?e.duration:null;return t&&!isNaN(t)&&t!==1/0?t:null},this._apply_loop=function(e,t){!e.loop&&t>1&&ye._wD("Note: Native HTML5 looping is infinite.",1),e.loop=t>1?"loop":""},this._setup_html5=function(e){var t,o=m(y._iO,e),a=ze?fe:y._a,r=decodeURI(o.url);if(ze?r===decodeURI(ne)&&(t=!0):r===decodeURI(v)&&(t=!0),a){if(a._s)if(ze)a._s&&a._s.playState&&!t&&a._s.stop();else if(!ze&&r===decodeURI(v))return y._apply_loop(a,o.loops),a;t||(v&&i(!1),a.src=o.url,y.url=o.url,v=o.url,ne=o.url,a._called_load=!1)}else o.autoLoad||o.autoPlay?(y._a=new Audio(o.url),y._a.load()):y._a=Ze&&opera.version()<10?new Audio(null):new Audio,(a=y._a)._called_load=!1,ze&&(fe=a);return y.isHTML5=!0,y._a=a,a._s=y,s(),y._apply_loop(a,o.loops),o.autoLoad||o.autoPlay?y.load():(a.autobuffer=!1,a.preload="auto"),a},s=function(){if(y._a._added_events)return!1;var e;y._a._added_events=!0;for(e in ce)ce.hasOwnProperty(e)&&function(e,t,i){y._a&&y._a.addEventListener(e,t,i||!1)}(e,ce[e]);return!0},o=function(){var e;ye._wD(y.id+": Removing event listeners"),y._a._added_events=!1;for(e in ce)ce.hasOwnProperty(e)&&function(e,t,i){y._a&&y._a.removeEventListener(e,t,i||!1)}(e,ce[e])},this._onload=function(e){var t,i=!!e||!y.isHTML5&&8===c&&y.duration;return t=y.id+": ",ye._wD(t+(i?"onload()":"Failed to load / invalid sound?"+(y.duration?" -":" Zero-length duration reported.")+" ("+y.url+")"),i?1:2),i||y.isHTML5||(!0===ye.sandbox.noRemote&&ye._wD(t+_("noNet"),1),!0===ye.sandbox.noLocal&&ye._wD(t+_("noLocal"),1)),y.loaded=i,y.readyState=i?3:2,y._onbufferchange(0),y._iO.onload&&ge(y,function(){y._iO.onload.apply(y,[i])}),!0},this._onbufferchange=function(e){return 0!==y.playState&&(!(e&&y.isBuffering||!e&&!y.isBuffering)&&(y.isBuffering=1===e,y._iO.onbufferchange&&(ye._wD(y.id+": Buffer state change: "+e),y._iO.onbufferchange.apply(y,[e])),!0))},this._onsuspend=function(){return y._iO.onsuspend&&(ye._wD(y.id+": Playback suspended"),y._iO.onsuspend.apply(y)),!0},this._onfailure=function(e,t,i){y.failures++,ye._wD(y.id+": Failure ("+y.failures+"): "+e),y._iO.onfailure&&1===y.failures?y._iO.onfailure(e,t,i):ye._wD(y.id+": Ignoring failure")},this._onwarning=function(e,t,i){y._iO.onwarning&&y._iO.onwarning(e,t,i)},this._onfinish=function(){var e=y._iO.onfinish;y._onbufferchange(0),y._resetOnPosition(0),y.instanceCount&&(y.instanceCount--,y.instanceCount||(h(),y.playState=0,y.paused=!1,y.instanceCount=0,y.instanceOptions={},y._iO={},a(),y.isHTML5&&(y.position=0)),y.instanceCount&&!y._iO.multiShotEvents||e&&(ye._wD(y.id+": onfinish()"),ge(y,function(){e.apply(y)})))},this._whileloading=function(e,t,i,s){var o=y._iO;y.bytesLoaded=e,y.bytesTotal=t,y.duration=Math.floor(i),y.bufferLength=s,y.isHTML5||o.isMovieStar?y.durationEstimate=y.duration:o.duration?y.durationEstimate=y.duration>o.duration?y.duration:o.duration:y.durationEstimate=parseInt(y.bytesTotal/y.bytesLoaded*y.duration,10),y.isHTML5||(y.buffered=[{start:0,end:y.duration}]),(3!==y.readyState||y.isHTML5)&&o.whileloading&&o.whileloading.apply(y)},this._whileplaying=function(e,i,s,o,a){var r,n=y._iO;return!isNaN(e)&&null!==e&&(y.position=Math.max(0,e),y._processOnPosition(),!y.isHTML5&&c>8&&(n.usePeakData&&i!==t&&i&&(y.peakData={left:i.leftPeak,right:i.rightPeak}),n.useWaveformData&&s!==t&&s&&(y.waveformData={left:s.split(","),right:o.split(",")}),n.useEQData&&a!==t&&a&&a.leftEQ&&(r=a.leftEQ.split(","),y.eqData=r,y.eqData.left=r,a.rightEQ!==t&&a.rightEQ&&(y.eqData.right=a.rightEQ.split(",")))),1===y.playState&&(y.isHTML5||8!==c||y.position||!y.isBuffering||y._onbufferchange(0),n.whileplaying&&n.whileplaying.apply(y)),!0)},this._oncaptiondata=function(e){ye._wD(y.id+": Caption data received."),y.captiondata=e,y._iO.oncaptiondata&&y._iO.oncaptiondata.apply(y,[e])},this._onmetadata=function(e,t){ye._wD(y.id+": Metadata received.");var i,s,o={};for(i=0,s=e.length;i<s;i++)o[e[i]]=t[i];y.metadata=o,y._iO.onmetadata&&y._iO.onmetadata.call(y,y.metadata)},this._onid3=function(e,t){ye._wD(y.id+": ID3 data received.");var i,s,o=[];for(i=0,s=e.length;i<s;i++)o[e[i]]=t[i];y.id3=m(y.id3,o),y._iO.onid3&&y._iO.onid3.apply(y)},this._onconnect=function(e){e=1===e,ye._wD(y.id+": "+(e?"Connected.":"Failed to connect? - "+y.url),e?1:2),y.connected=e,e&&(y.failures=0,q(y.id)&&(y.getAutoPlay()?y.play(t,y.getAutoPlay()):y._iO.autoLoad&&y.load()),y._iO.onconnect&&y._iO.onconnect.apply(y,[e]))},this._ondataerror=function(e){y.playState>0&&(ye._wD(y.id+": Data error: "+e),y._iO.ondataerror&&y._iO.ondataerror.apply(y))},this._debug()},I=function(){return Pe.body||Pe.getElementsByTagName("div")[0]},n=function(e){return Pe.getElementById(e)},m=function(e,i){var s,o,a=e||{};s=i===t?ye.defaultOptions:i;for(o in s)s.hasOwnProperty(o)&&a[o]===t&&("object"!=typeof s[o]||null===s[o]?a[o]=s[o]:a[o]=m(a[o],s[o]));return a},ge=function(t,i){t.isHTML5||8!==c?i():e.setTimeout(i,0)},f={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},y=function(e,i){var s,o=!0,a=i!==t,r=ye.setupOptions,n=f;if(e===t){o=[];for(s in r)r.hasOwnProperty(s)&&o.push(s);for(s in n)n.hasOwnProperty(s)&&("object"==typeof ye[s]?o.push(s+": {...}"):ye[s]instanceof Function?o.push(s+": function() {...}"):o.push(s));return ye._wD(_("setup",o.join(", "))),!1}for(s in e)if(e.hasOwnProperty(s))if("object"!=typeof e[s]||null===e[s]||e[s]instanceof Array||e[s]instanceof RegExp)a&&n[i]!==t?ye[i][s]=e[s]:r[s]!==t?(ye.setupOptions[s]=e[s],ye[s]=e[s]):n[s]===t?(N(_(ye[s]===t?"setupUndef":"setupError",s),2),o=!1):ye[s]instanceof Function?ye[s].apply(ye,e[s]instanceof Array?e[s]:[e[s]]):ye[s]=e[s];else{if(n[s]!==t)return y(e[s],s);N(_(ye[s]===t?"setupUndef":"setupError",s),2),o=!1}return o},re=function(){function t(e){var t=Ue.call(e),i=t.length;return s?(t[1]="on"+t[1],i>3&&t.pop()):3===i&&t.push(!1),t}function i(e,t){var i=e.shift(),a=[o[t]];s?i[a](e[0],e[1]):i[a].apply(i,e)}var s=e.attachEvent,o={add:s?"attachEvent":"addEventListener",remove:s?"detachEvent":"removeEventListener"};return{add:function(){i(t(arguments),"add")},remove:function(){i(t(arguments),"remove")}}}(),ce={abort:a(function(){ye._wD(this._s.id+": abort")}),canplay:a(function(){var e,i=this._s;if(i._html5_canplay)return!0;if(i._html5_canplay=!0,ye._wD(i.id+": canplay"),i._onbufferchange(0),e=i._iO.position===t||isNaN(i._iO.position)?null:i._iO.position/1e3,this.currentTime!==e){ye._wD(i.id+": canplay: Setting position to "+e);try{this.currentTime=e}catch(t){ye._wD(i.id+": canplay: Setting position of "+e+" failed: "+t.message,2)}}i._iO._oncanplay&&i._iO._oncanplay()}),canplaythrough:a(function(){var e=this._s;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),durationchange:a(function(){var e,t=this._s;e=t._get_html5_duration(),isNaN(e)||e===t.duration||(ye._wD(this._s.id+": durationchange ("+e+")"+(t.duration?", previously "+t.duration:"")),t.durationEstimate=t.duration=e)}),ended:a(function(){var e=this._s;ye._wD(e.id+": ended"),e._onfinish()}),error:a(function(){ye._wD(this._s.id+": HTML5 error, code "+this.error.code),this._s._onload(!1)}),loadeddata:a(function(){var e=this._s;ye._wD(e.id+": loadeddata"),e._loaded||Ke||(e.duration=e._get_html5_duration())}),loadedmetadata:a(function(){ye._wD(this._s.id+": loadedmetadata")}),loadstart:a(function(){ye._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:a(function(){this._s._onbufferchange(0)}),playing:a(function(){ye._wD(this._s.id+": playing "+String.fromCharCode(9835)),this._s._onbufferchange(0)}),progress:a(function(e){var t,i,s,o=this._s,a=0,r="progress"===e.type,n=e.target.buffered,h=e.loaded||0,l=e.total||1;if(o.buffered=[],n&&n.length){for(t=0,i=n.length;t<i;t++)o.buffered.push({start:1e3*n.start(t),end:1e3*n.end(t)});if(a=1e3*(n.end(0)-n.start(0)),h=Math.min(1,a/(1e3*e.target.duration)),r&&n.length>1){for(s=[],i=n.length,t=0;t<i;t++)s.push(1e3*e.target.buffered.start(t)+"-"+1e3*e.target.buffered.end(t));ye._wD(this._s.id+": progress, timeRanges: "+s.join(", "))}r&&!isNaN(h)&&ye._wD(this._s.id+": progress, "+Math.floor(100*h)+"% loaded")}isNaN(h)||(o._whileloading(h,l,o._get_html5_duration()),h&&l&&h===l&&ce.canplaythrough.call(this,e))}),ratechange:a(function(){ye._wD(this._s.id+": ratechange")}),suspend:a(function(e){var t=this._s;ye._wD(this._s.id+": suspend"),ce.progress.call(this,e),t._onsuspend()}),stalled:a(function(){ye._wD(this._s.id+": stalled")}),timeupdate:a(function(){this._s._onTimer()}),waiting:a(function(){var e=this._s;ye._wD(this._s.id+": waiting"),e._onbufferchange(1)})},ee=function(e){return!(!e||!(e.type||e.url||e.serverURL))&&(!(e.serverURL||e.type&&o(e.type))&&(e.type?te({type:e.type}):te({url:e.url})||ye.html5Only||e.url.match(/data\:/i)))},se=function(e){var i;return e&&(i=Ke?"about:blank":ye.html5.canPlayType("audio/wav")?"data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==":"about:blank",e.src=i,e._called_unload!==t&&(e._called_load=!1)),ze&&(ne=null),i},te=function(e){if(!ye.useHTML5Audio||!ye.hasHTML5)return!1;var i,s,a,r,n=e.url||null,h=e.type||null,l=ye.audioFormats;if(h&&ye.html5[h]!==t)return ye.html5[h]&&!o(h);if(!ie){ie=[];for(r in l)l.hasOwnProperty(r)&&(ie.push(r),l[r].related&&(ie=ie.concat(l[r].related)));ie=new RegExp("\\.("+ie.join("|")+")(\\?.*)?$","i")}return(a=n?n.toLowerCase().match(ie):null)&&a.length?a=a[1]:h?a=(-1!==(s=h.indexOf(";"))?h.substr(0,s):h).substr(6):i=!1,a&&ye.html5[a]!==t?i=ye.html5[a]&&!o(a):(h="audio/"+a,i=ye.html5.canPlayType({type:h}),ye.html5[a]=i,i=i&&ye.html5[h]&&!o(h)),i},ae=function(){function e(e){var t,i,s=!1,o=!1;if(!r||"function"!=typeof r.canPlayType)return s;if(e instanceof Array){for(a=0,i=e.length;a<i;a++)(ye.html5[e[a]]||r.canPlayType(e[a]).match(ye.html5Test))&&(o=!0,ye.html5[e[a]]=!0,ye.flash[e[a]]=!!e[a].match(st));s=o}else s=!(!(t=!(!r||"function"!=typeof r.canPlayType)&&r.canPlayType(e))||!t.match(ye.html5Test));return s}if(!ye.useHTML5Audio||!ye.hasHTML5)return ye.html5.usingFlash=!0,We=!0,!1;var i,s,o,a,r=Audio!==t?Ze&&opera.version()<10?new Audio(null):new Audio:null,n={};o=ye.audioFormats;for(i in o)if(o.hasOwnProperty(i)&&(s="audio/"+i,n[i]=e(o[i].type),n[s]=n[i],i.match(st)?(ye.flash[i]=!0,ye.flash[s]=!0):(ye.flash[i]=!1,ye.flash[s]=!1),o[i]&&o[i].related))for(a=o[i].related.length-1;a>=0;a--)n["audio/"+o[i].related[a]]=n[i],ye.html5[o[i].related[a]]=n[i],ye.flash[o[i].related[a]]=n[i];return n.canPlayType=r?e:null,ye.html5=m(ye.html5,n),ye.html5.usingFlash=$(),We=ye.html5.usingFlash,!0},T={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:we+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:ve+"Verify that %s is a valid path.",tryDebug:"Try "+we+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:ve+"Non-HTTP page ("+Pe.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:ve+"Special case: Waiting for SWF to load with window focus...",waitForever:ve+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:ve+"Waiting for 100% SWF load...",needFunction:ve+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:ve+"_debug(): Current sound objects",waitOnload:ve+"Waiting for window.onload()",docLoaded:ve+"Document already loaded",onload:ve+"initComplete(): calling soundManager.onload()",onloadOK:we+".onload() complete",didInit:ve+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:ve+"Failed to remove Flash node.",shutdown:we+".disable(): Shutting down",queue:ve+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+U.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:ve+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:we+".load(): current URL already assigned.",badFV:we+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:ve+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:ve+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:we+".setup(): allowed parameters: %s",setupError:we+'.setup(): "%s" cannot be assigned with this method.',setupUndef:we+'.setup(): Could not find option "%s"',setupLate:we+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:ve+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:we+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device.",ignoreMobile:"Ignoring mobile restrictions for this device."},_=function(){var e,t,i,s,o;if(e=Ue.call(arguments),s=e.shift(),(o=T&&T[s]?T[s]:"")&&e&&e.length)for(t=0,i=e.length;t<i;t++)o=o.replace("%s",e[t]);return o},V=function(e){return 8===c&&e.loops>1&&e.stream&&(u("as2loop"),e.stream=!1),e},X=function(e,t){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(ye._wD((t||"")+_("policy")),e.usePolicyFile=!0),e},N=function(e){$e&&console.warn!==t?console.warn(e):ye._wD(e)},h=function(){return!1},O=function(e){var t;for(t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=h);t=null},E=function(e){e===t&&(e=!1),(Me||e)&&ye.disable(e)},F=function(e){var t;if(e)if(e.match(/\.swf(\?.*)?$/i)){if(e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return t=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+ye.movieURL,ye.noSWFCache&&(t+="?ts="+(new Date).getTime()),t},P=function(){8!==(c=parseInt(ye.flashVersion,10))&&9!==c&&(ye._wD(_("badFV",c,8)),ye.flashVersion=c=8);var e=ye.debugMode||ye.debugFlash?"_debug.swf":".swf";ye.useHTML5Audio&&!ye.html5Only&&ye.audioFormats.mp4.required&&c<9&&(ye._wD(_("needfl9")),ye.flashVersion=c=9),ye.version=ye.versionNumber+(ye.html5Only?" (HTML5-only mode)":9===c?" (AS3/Flash 9)":" (AS2/Flash 8)"),c>8?(ye.defaultOptions=m(ye.defaultOptions,ye.flash9Options),ye.features.buffering=!0,ye.defaultOptions=m(ye.defaultOptions,ye.movieStarOptions),ye.filePatterns.flash9=new RegExp("\\.(mp3|"+nt.join("|")+")(\\?.*)?$","i"),ye.features.movieStar=!0):ye.features.movieStar=!1,ye.filePattern=ye.filePatterns[8!==c?"flash9":"flash8"],ye.movieURL=(8===c?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),ye.features.peakData=ye.features.waveformData=ye.features.eqData=c>8},R=function(e,t){if(!be)return!1;be._setPolling(e,t)},D=function(){if(ye.debugURLParam.test(xe)&&(ye.setupOptions.debugMode=ye.debugMode=!0),n(ye.debugID))return!1;var e,t,i,s,o;if(ye.debugMode&&!n(ye.debugID)&&(!$e||!ye.useConsole||!ye.consoleOnly)){(e=Pe.createElement("div")).id=ye.debugID+"-toggle",s={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},e.appendChild(Pe.createTextNode("-")),e.onclick=z,e.title="Toggle SM2 debug console",Se.match(/msie 6/i)&&(e.style.position="absolute",e.style.cursor="hand");for(o in s)s.hasOwnProperty(o)&&(e.style[o]=s[o]);if(t=Pe.createElement("div"),t.id=ye.debugID,t.style.display=ye.debugMode?"block":"none",ye.debugMode&&!n(e.id)){try{(i=I()).appendChild(e)}catch(e){throw new Error(_("domError")+" \n"+e.toString())}i.appendChild(t)}}i=null},q=this.getSoundById,u=function(e,t){return e?ye._wD(_(e),t):""},z=function(){var e=n(ye.debugID),t=n(ye.debugID+"-toggle");if(!e)return!1;Te?(t.innerHTML="+",e.style.display="none"):(t.innerHTML="-",e.style.display="block"),Te=!Te},d=function(i,s,o){if(e.sm2Debugger!==t)try{sm2Debugger.handleEvent(i,s,o)}catch(e){return!1}return!0},W=function(){var e=[];return ye.debugMode&&e.push(U.sm2Debug),ye.debugFlash&&e.push(U.flashDebug),ye.useHighPerformance&&e.push(U.highPerf),e.join(" ")},j=function(){var e=_("fbHandler"),t=ye.getMoviePercent(),i=U,s={type:"FLASHBLOCK"};if(ye.html5Only)return!1;ye.ok()?(ye.didFlashBlock&&ye._wD(e+": Unblocked"),ye.oMC&&(ye.oMC.className=[W(),i.swfDefault,i.swfLoaded+(ye.didFlashBlock?" "+i.swfUnblocked:"")].join(" "))):(We&&(ye.oMC.className=W()+" "+i.swfDefault+" "+(null===t?i.swfTimedout:i.swfError),ye._wD(e+": "+_("fbTimeout")+(t?" ("+_("fbLoaded")+")":""))),ye.didFlashBlock=!0,w({type:"ontimeout",ignoreInit:!0,error:s}),H(s))},b=function(e,i,s){Be[e]===t&&(Be[e]=[]),Be[e].push({method:i,scope:s||null,fired:!1})},w=function(e){if(e||(e={type:ye.ok()?"onready":"ontimeout"}),!Ae&&e&&!e.ignoreInit)return!1;if("ontimeout"===e.type&&(ye.ok()||Me&&!e.ignoreInit))return!1;var t,i,s={success:e&&e.ignoreInit?ye.ok():!Me},o=e&&e.type?Be[e.type]||[]:[],a=[],r=[s],n=We&&!ye.ok();for(e.error&&(r[0].error=e.error),t=0,i=o.length;t<i;t++)!0!==o[t].fired&&a.push(o[t]);if(a.length)for(t=0,i=a.length;t<i;t++)a[t].scope?a[t].method.apply(a[t].scope,r):a[t].method.apply(this,r),n||(a[t].fired=!0);return!0},v=function(){e.setTimeout(function(){ye.useFlashBlock&&j(),w(),"function"==typeof ye.onload&&(u("onload",1),ye.onload.apply(e),u("onloadOK",1)),ye.waitForWindowLoad&&re.add(e,"load",v)},1)},le=function(){if(he!==t)return he;var i,s,o,a=!1,r=navigator,n=r.plugins,h=e.ActiveXObject;if(n&&n.length)s="application/x-shockwave-flash",(o=r.mimeTypes)&&o[s]&&o[s].enabledPlugin&&o[s].enabledPlugin.description&&(a=!0);else if(h!==t&&!Se.match(/MSAppHost/i)){try{i=new h("ShockwaveFlash.ShockwaveFlash")}catch(e){i=null}a=!!i,i=null}return he=a,a},$=function(){var e,t,i=ye.audioFormats;if(Xe&&!!Se.match(/os (1|2|3_0|3_1)\s/i)?(ye.hasHTML5=!1,ye.html5Only=!0,ye.oMC&&(ye.oMC.style.display="none")):ye.useHTML5Audio&&(ye.html5&&ye.html5.canPlayType||(ye._wD("SoundManager: No HTML5 Audio() support detected."),ye.hasHTML5=!1),Qe&&ye._wD(ve+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(he?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),ye.useHTML5Audio&&ye.hasHTML5){Q=!0;for(t in i)i.hasOwnProperty(t)&&i[t].required&&(ye.html5.canPlayType(i[t].type)?ye.preferFlash&&(ye.flash[t]||ye.flash[i[t].type])&&(e=!0):(Q=!1,e=!0))}return ye.ignoreFlash&&(e=!1,Q=!0),ye.html5Only=ye.hasHTML5&&ye.useHTML5Audio&&!e,!ye.html5Only},J=function(e){var t,i,s,o=0;if(e instanceof Array){for(t=0,i=e.length;t<i;t++)if(e[t]instanceof Object){if(ye.canPlayMIME(e[t].type)){o=t;break}}else if(ye.canPlayURL(e[t])){o=t;break}e[o].url&&(e[o]=e[o].url),s=e[o]}else s=e;return s},Y=function(e){e._hasTimer||(e._hasTimer=!0,!Je&&ye.html5PollingInterval&&(null===_e&&0===Fe&&(_e=setInterval(Z,ye.html5PollingInterval)),Fe++))},K=function(e){e._hasTimer&&(e._hasTimer=!1,!Je&&ye.html5PollingInterval&&Fe--)},Z=function(){var e;if(null!==_e&&!Fe)return clearInterval(_e),_e=null,!1;for(e=ye.soundIDs.length-1;e>=0;e--)ye.sounds[ye.soundIDs[e]].isHTML5&&ye.sounds[ye.soundIDs[e]]._hasTimer&&ye.sounds[ye.soundIDs[e]]._onTimer()},H=function(i){i=i!==t?i:{},"function"==typeof ye.onerror&&ye.onerror.apply(e,[{type:i.type!==t?i.type:null}]),i.fatal!==t&&i.fatal&&ye.disable()},pe=function(){if(!Qe||!le())return!1;var e,t,i=ye.audioFormats;for(t in i)if(i.hasOwnProperty(t)&&("mp3"===t||"mp4"===t)&&(ye._wD(we+": Using flash fallback for "+t+" format"),ye.html5[t]=!1,i[t]&&i[t].related))for(e=i[t].related.length-1;e>=0;e--)ye.html5[i[t].related[e]]=!1},this._setSandboxType=function(e){var i=ye.sandbox;i.type=e,i.description=i.types[i.types[e]!==t?e:"unknown"],"localWithFile"===i.type?(i.noRemote=!0,i.noLocal=!1,u("secNote",2)):"localWithNetwork"===i.type?(i.noRemote=!1,i.noLocal=!0):"localTrusted"===i.type&&(i.noRemote=!1,i.noLocal=!1)},this._externalInterfaceOK=function(e){if(ye.swfLoaded)return!1;var t;if(d("swf",!0),d("flashtojs",!0),ye.swfLoaded=!0,tt=!1,Qe&&pe(),!e||e.replace(/\+dev/i,"")!==ye.versionNumber.replace(/\+dev/i,""))return t=we+': Fatal: JavaScript file build "'+ye.versionNumber+'" does not match Flash SWF build "'+e+'" at '+ye.url+". Ensure both are up-to-date.",setTimeout(function(){throw new Error(t)},0),!1;setTimeout(p,qe?100:1)},L=function(e,i){function s(){var e,t=[],i=[];e="SoundManager "+ye.version+(!ye.html5Only&&ye.useHTML5Audio?ye.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),ye.html5Only?ye.html5PollingInterval&&t.push("html5PollingInterval ("+ye.html5PollingInterval+"ms)"):(ye.preferFlash&&t.push("preferFlash"),ye.useHighPerformance&&t.push("useHighPerformance"),ye.flashPollingInterval&&t.push("flashPollingInterval ("+ye.flashPollingInterval+"ms)"),ye.html5PollingInterval&&t.push("html5PollingInterval ("+ye.html5PollingInterval+"ms)"),ye.wmode&&t.push("wmode ("+ye.wmode+")"),ye.debugFlash&&t.push("debugFlash"),ye.useFlashBlock&&t.push("flashBlock")),t.length&&(i=i.concat([t.join(" + ")])),ye._wD(e+(i.length?" + "+i.join(", "):""),1),de()}function o(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(Ge&&Ce)return!1;if(ye.html5Only)return P(),s(),ye.oMC=n(ye.movieID),p(),Ge=!0,Ce=!0,!1;var a,r,h,l,c,d,u,g,m=i||ye.url,y=ye.altURL||m,f=I(),b=W(),w=null,v=Pe.getElementsByTagName("html")[0];if(w=v&&v.dir&&v.dir.match(/rtl/i),e=e===t?ye.id:e,P(),ye.url=F(ot?m:y),i=ye.url,ye.wmode=!ye.wmode&&ye.useHighPerformance?"transparent":ye.wmode,null!==ye.wmode&&(Se.match(/msie 8/i)||!qe&&!ye.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(je.push(T.spcWmode),ye.wmode=null),a={name:e,id:e,src:i,quality:"high",allowScriptAccess:ye.allowScriptAccess,bgcolor:ye.bgColor,pluginspage:at+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:ye.wmode,hasPriority:"true"},ye.debugFlash&&(a.FlashVars="debug=1"),ye.wmode||delete a.wmode,qe)r=Pe.createElement("div"),l=['<object id="'+e+'" data="'+i+'" type="'+a.type+'" title="'+a.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',o("movie",i),o("AllowScriptAccess",ye.allowScriptAccess),o("quality",a.quality),ye.wmode?o("wmode",ye.wmode):"",o("bgcolor",ye.bgColor),o("hasPriority","true"),ye.debugFlash?o("FlashVars",a.FlashVars):"","</object>"].join("");else{r=Pe.createElement("embed");for(h in a)a.hasOwnProperty(h)&&r.setAttribute(h,a[h])}if(D(),b=W(),f=I())if(ye.oMC=n(ye.movieID)||Pe.createElement("div"),ye.oMC.id)g=ye.oMC.className,ye.oMC.className=(g?g+" ":U.swfDefault)+(b?" "+b:""),ye.oMC.appendChild(r),qe&&((c=ye.oMC.appendChild(Pe.createElement("div"))).className=U.swfBox,c.innerHTML=l),Ce=!0;else{if(ye.oMC.id=ye.movieID,ye.oMC.className=U.swfDefault+" "+b,d=null,c=null,ye.useFlashBlock||(ye.useHighPerformance?d={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(d={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},w&&(d.left=Math.abs(parseInt(d.left,10))+"px"))),Ye&&(ye.oMC.style.zIndex=1e4),!ye.debugFlash)for(u in d)d.hasOwnProperty(u)&&(ye.oMC.style[u]=d[u]);try{qe||ye.oMC.appendChild(r),f.appendChild(ye.oMC),qe&&((c=ye.oMC.appendChild(Pe.createElement("div"))).className=U.swfBox,c.innerHTML=l),Ce=!0}catch(e){throw new Error(_("domError")+" \n"+e.toString())}}return Ge=!0,s(),!0},G=function(){return ye.html5Only?(L(),!1):!be&&(ye.url?((be=ye.getMovie(ye.id))||(Re?(qe?ye.oMC.innerHTML=De:ye.oMC.appendChild(Re),Re=null,Ge=!0):L(ye.id,ye.url),be=ye.getMovie(ye.id)),"function"==typeof ye.oninitmovie&&setTimeout(ye.oninitmovie,1),ue(),!0):(u("noURL"),!1))},k=function(){setTimeout(S,1e3)},x=function(){e.setTimeout(function(){N(ve+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),ye.setup({preferFlash:!1}).reboot(),ye.didFlashBlock=!0,ye.beginDelayedInit()},1)},S=function(){var t,i=!1;return!!ye.url&&(!Oe&&(Oe=!0,re.remove(e,"load",k),he&&tt&&!et?(u("waitFocus"),!1):(Ae||(t=ye.getMoviePercent())>0&&t<100&&(i=!0),void setTimeout(function(){if(t=ye.getMoviePercent(),i)return Oe=!1,ye._wD(_("waitSWF")),e.setTimeout(k,1),!1;Ae||(ye._wD(we+": No Flash response within expected time. Likely causes: "+(0===t?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(ye.debugFlash?" "+_("checkSWF"):""),2),!ot&&t&&(u("localFail",2),ye.debugFlash||u("tryDebug",2)),0===t&&ye._wD(_("swf404",ye.url),1),d("flashtojs",!1,": Timed out"+(ot?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)"))),!Ae&&it&&(null===t?ye.useFlashBlock||0===ye.flashLoadTimeout?(ye.useFlashBlock&&j(),u("waitForever")):!ye.useFlashBlock&&Q?x():(u("waitForever"),w({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===ye.flashLoadTimeout?u("waitForever"):!ye.useFlashBlock&&Q?x():E(!0))},ye.flashLoadTimeout))))},B=function(){function t(){re.remove(e,"focus",B)}return et||!tt?(t(),!0):(it=!0,et=!0,u("gotFocus"),Oe=!1,k(),t(),!0)},ue=function(){je.length&&(ye._wD("SoundManager 2: "+je.join(" "),1),je=[])},de=function(){ue();var e,t=[];if(ye.useHTML5Audio&&ye.hasHTML5){for(e in ye.audioFormats)ye.audioFormats.hasOwnProperty(e)&&t.push(e+" = "+ye.html5[e]+(!ye.html5[e]&&We&&ye.flash[e]?" (using flash)":ye.preferFlash&&ye.flash[e]&&We?" (preferring flash)":ye.html5[e]?"":" ("+(ye.audioFormats[e].required?"required, ":"")+"and no flash support)"));ye._wD("SoundManager 2 HTML5 support: "+t.join(", "),1)}},g=function(t){if(Ae)return!1;if(ye.html5Only)return u("sm2Loaded",1),Ae=!0,v(),d("onload",!0),!0;var i,s=!0;return ye.useFlashBlock&&ye.flashLoadTimeout&&!ye.getMoviePercent()||(Ae=!0),i={type:!he&&We?"NO_FLASH":"INIT_TIMEOUT"},ye._wD("SoundManager 2 "+(Me?"failed to load":"loaded")+" ("+(Me?"Flash security/load error":"OK")+") "+String.fromCharCode(Me?10006:10003),Me?2:1),Me||t?(ye.useFlashBlock&&ye.oMC&&(ye.oMC.className=W()+" "+(null===ye.getMoviePercent()?U.swfTimedout:U.swfError)),w({type:"ontimeout",error:i,ignoreInit:!0}),d("onload",!1),H(i),s=!1):d("onload",!0),Me||(ye.waitForWindowLoad&&!Ie?(u("waitOnload"),re.add(e,"load",v)):(ye.waitForWindowLoad&&Ie&&u("docLoaded"),v())),s},l=function(){var e,i=ye.setupOptions;for(e in i)i.hasOwnProperty(e)&&(ye[e]===t?ye[e]=i[e]:ye[e]!==i[e]&&(ye.setupOptions[e]=ye[e]))},p=function(){function t(){re.remove(e,"load",ye.beginDelayedInit)}if(Ae)return u("didInit"),!1;if(ye.html5Only)return Ae||(t(),ye.enabled=!0,g()),!0;G();try{be._externalInterfaceTest(!1),R(!0,ye.flashPollingInterval||(ye.useHighPerformance?10:50)),ye.debugMode||be._disableDebug(),ye.enabled=!0,d("jstoflash",!0),ye.html5Only||re.add(e,"unload",h)}catch(e){return ye._wD("js/flash exception: "+e.toString()),d("jstoflash",!1),H({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),E(!0),g(),!1}return g(),t(),!0},C=function(){return!M&&(M=!0,l(),D(),!he&&ye.hasHTML5&&(ye._wD("SoundManager 2: No Flash detected"+(ye.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),ye.setup({useHTML5Audio:!0,preferFlash:!1})),ae(),!he&&We&&(je.push(T.needFlash),ye.setup({flashLoadTimeout:1})),Pe.removeEventListener&&Pe.removeEventListener("DOMContentLoaded",C,!1),G(),!0)},oe=function(){return"complete"===Pe.readyState&&(C(),Pe.detachEvent("onreadystatechange",oe)),!0},A=function(){Ie=!0,C(),re.remove(e,"load",A)},le(),re.add(e,"focus",B),re.add(e,"load",k),re.add(e,"load",A),Pe.addEventListener?Pe.addEventListener("DOMContentLoaded",C,!1):Pe.attachEvent?Pe.attachEvent("onreadystatechange",oe):(d("onload",!1),H({type:"NO_DOM2_EVENTS",fatal:!0}))}if(!e||!e.document)throw new Error("SoundManager requires a browser with window and document objects.");var s=null;e.SM2_DEFER!==t&&SM2_DEFER||(s=new i),"object"==typeof module&&module&&"object"==typeof module.exports?(module.exports.SoundManager=i,module.exports.soundManager=s):"function"==typeof define&&define.amd&&define(function(){return{constructor:i,getInstance:function(t){if(!e.soundManager&&t instanceof Function){var s=t(i);s instanceof i&&(e.soundManager=s)}return e.soundManager}}}),e.SoundManager=i,e.soundManager=s}(window);var Stats=function(){function e(e,t,i){var s=document.createElement(e);return s.id=t,s.style.cssText=i,s}function t(t,i,s){var o=e("div",t,"padding:0 0 3px 3px;text-align:left;background:"+s),a=e("div",t+"Text","font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:"+i);a.innerHTML=t.toUpperCase(),o.appendChild(a);var r=e("div",t+"Graph","width:74px;height:30px;background:"+i);o.appendChild(r);for(var n=0;n<74;n++)r.appendChild(e("span","","width:1px;height:30px;float:left;opacity:0.9;background:"+s));return o}function i(e){for(var t=l.children,i=0;i<t.length;i++)t[i].style.display=i===e?"block":"none";h=e}function s(e,t){e.appendChild(e.firstChild).style.height=Math.min(30,30-30*t)+"px"}var o=performance&&performance.now?performance.now.bind(performance):Date.now,a=o(),r=a,n=0,h=0,l=e("div","stats","width:80px;opacity:0.9;cursor:pointer");l.addEventListener("mousedown",function(e){e.preventDefault(),i(++h%l.children.length)},!1);var p=0,c=1/0,d=0,u=t("fps","#0ff","#002"),g=u.children[0],m=u.children[1];l.appendChild(u);var y=0,f=1/0,b=0,w=t("ms","#0f0","#020"),v=w.children[0],k=w.children[1];if(l.appendChild(w),performance&&performance.memory){var S=0,x=1/0,P=0,B=t("mb","#f08","#201"),T=B.children[0],G=B.children[1];l.appendChild(B)}return i(h),{REVISION:14,domElement:l,setMode:i,begin:function(){a=o()},end:function(){var e=o();if(y=e-a,f=Math.min(f,y),b=Math.max(b,y),v.textContent=(0|y)+" MS ("+(0|f)+"-"+(0|b)+")",s(k,y/200),n++,e>r+1e3&&(p=Math.round(1e3*n/(e-r)),c=Math.min(c,p),d=Math.max(d,p),g.textContent=p+" FPS ("+c+"-"+d+")",s(m,p/100),r=e,n=0,void 0!==S)){var t=performance.memory.usedJSHeapSize,i=performance.memory.jsHeapSizeLimit;S=Math.round(9.54e-7*t),x=Math.min(x,S),P=Math.max(P,S),T.textContent=S+" MB ("+x+"-"+P+")",s(G,t/i)}return e},update:function(){a=this.end()}}};"object"==typeof module&&(module.exports=Stats),function(e){"use strict";function t(e){switch(typeof e){case"undefined":return"undefined";case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return null===e?"null":"object"}}function i(e){return Object.prototype.toString.call(e).replace(/^\[object *|\]$/g,"")}function s(e){return"function"==typeof e}function o(e){if(null===e||e===A)throw TypeError();return Object(e)}function a(e){return e>>0}function r(e){return e>>>0}function n(e){if(e.length>M)throw RangeError("Array too large for polyfill");var t;for(t=0;t<e.length;t+=1)!function(t){Object.defineProperty(e,t,{get:function(){return e._getter(t)},set:function(i){e._setter(t,i)},enumerable:!0,configurable:!1})}(t)}function h(e,t){var i=32-t;return e<<i>>i}function l(e,t){var i=32-t;return e<<i>>>i}function p(e){return[255&e]}function c(e){return h(e[0],8)}function d(e){return[255&e]}function u(e){return l(e[0],8)}function g(e){return e=F(Number(e)),[e<0?0:e>255?255:255&e]}function m(e){return[e>>8&255,255&e]}function y(e){return h(e[0]<<8|e[1],16)}function f(e){return[e>>8&255,255&e]}function b(e){return l(e[0]<<8|e[1],16)}function w(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function v(e){return h(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function k(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function S(e){return l(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function x(e,t,i){function s(e){var t=H(e),i=e-t;return i<.5?t:i>.5?t+1:t%2?t+1:t}var o,a,r,n,h,l,p,c=(1<<t-1)-1;for(e!==e?(a=(1<<t)-1,r=E(2,i-1),o=0):e===1/0||e===-1/0?(a=(1<<t)-1,r=0,o=e<0?1:0):0===e?(a=0,r=0,o=1/e==-1/0?1:0):(o=e<0,(e=L(e))>=E(2,1-c)?(a=O(H(R(e)/I),1023),(r=s(e/E(2,a)*E(2,i)))/E(2,i)>=2&&(a+=1,r=1),a>c?(a=(1<<t)-1,r=0):(a+=c,r-=E(2,i))):(a=0,r=s(e/E(2,1-c-i)))),h=[],n=i;n;n-=1)h.push(r%2?1:0),r=H(r/2);for(n=t;n;n-=1)h.push(a%2?1:0),a=H(a/2);for(h.push(o?1:0),h.reverse(),l=h.join(""),p=[];l.length;)p.push(parseInt(l.substring(0,8),2)),l=l.substring(8);return p}function P(e,t,i){var s,o,a,r,n,h,l,p,c=[];for(s=e.length;s;s-=1)for(a=e[s-1],o=8;o;o-=1)c.push(a%2?1:0),a>>=1;return c.reverse(),r=c.join(""),n=(1<<t-1)-1,h=parseInt(r.substring(0,1),2)?-1:1,l=parseInt(r.substring(1,1+t),2),p=parseInt(r.substring(1+t),2),l===(1<<t)-1?0!==p?NaN:h*(1/0):l>0?h*E(2,l-n)*(1+p/E(2,i)):0!==p?h*E(2,-(n-1))*(p/E(2,i)):h<0?-0:0}function B(e){return P(e,11,52)}function T(e){return x(e,11,52)}function G(e){return P(e,8,23)}function C(e){return x(e,8,23)}var A=void 0,M=1e5,I=Math.LN2,L=Math.abs,H=Math.floor,R=Math.log,D=Math.max,O=Math.min,E=Math.pow,F=Math.round;!function(){var e=Object.defineProperty,t=!function(){try{return Object.defineProperty({},"x",{})}catch(e){return!1}}();e&&!t||(Object.defineProperty=function(t,i,s){if(e)try{return e(t,i,s)}catch(e){}if(t!==Object(t))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in s&&Object.prototype.__defineGetter__.call(t,i,s.get),Object.prototype.__defineSetter__&&"set"in s&&Object.prototype.__defineSetter__.call(t,i,s.set),"value"in s&&(t[i]=s.value),t})}(),function(){function h(e){if((e=a(e))<0)throw RangeError("ArrayBuffer size is not a small enough positive integer.");Object.defineProperty(this,"byteLength",{value:e}),Object.defineProperty(this,"_bytes",{value:Array(e)});for(var t=0;t<e;t+=1)this._bytes[t]=0}function l(){if(!arguments.length||"object"!=typeof arguments[0])return function(e){if((e=a(e))<0)throw RangeError("length is not a small enough positive integer.");Object.defineProperty(this,"length",{value:e}),Object.defineProperty(this,"byteLength",{value:e*this.BYTES_PER_ELEMENT}),Object.defineProperty(this,"buffer",{value:new h(this.byteLength)}),Object.defineProperty(this,"byteOffset",{value:0})}.apply(this,arguments);if(arguments.length>=1&&"object"===t(arguments[0])&&arguments[0]instanceof l)return function(e){if(this.constructor!==e.constructor)throw TypeError();var t=e.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new h(t)}),Object.defineProperty(this,"byteLength",{value:t}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:e.length});for(var i=0;i<this.length;i+=1)this._setter(i,e._getter(i))}.apply(this,arguments);if(arguments.length>=1&&"object"===t(arguments[0])&&!(arguments[0]instanceof l)&&!(arguments[0]instanceof h||"ArrayBuffer"===i(arguments[0])))return function(e){var t=e.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new h(t)}),Object.defineProperty(this,"byteLength",{value:t}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:e.length});for(var i=0;i<this.length;i+=1){var s=e[i];this._setter(i,Number(s))}}.apply(this,arguments);if(arguments.length>=1&&"object"===t(arguments[0])&&(arguments[0]instanceof h||"ArrayBuffer"===i(arguments[0])))return function(e,t,i){if((t=r(t))>e.byteLength)throw RangeError("byteOffset out of range");if(t%this.BYTES_PER_ELEMENT)throw RangeError("buffer length minus the byteOffset is not a multiple of the element size.");if(i===A){var s=e.byteLength-t;if(s%this.BYTES_PER_ELEMENT)throw RangeError("length of buffer minus byteOffset not a multiple of the element size");i=s/this.BYTES_PER_ELEMENT}else s=(i=r(i))*this.BYTES_PER_ELEMENT;if(t+s>e.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:e}),Object.defineProperty(this,"byteLength",{value:s}),Object.defineProperty(this,"byteOffset",{value:t}),Object.defineProperty(this,"length",{value:i})}.apply(this,arguments);throw TypeError()}function x(e,t,i){var s=function(){Object.defineProperty(this,"constructor",{value:s}),l.apply(this,arguments),n(this)};"__proto__"in s?s.__proto__=l:(s.from=l.from,s.of=l.of),s.BYTES_PER_ELEMENT=e;var o=function(){};return o.prototype=P,s.prototype=new o,Object.defineProperty(s.prototype,"BYTES_PER_ELEMENT",{value:e}),Object.defineProperty(s.prototype,"_pack",{value:t}),Object.defineProperty(s.prototype,"_unpack",{value:i}),s}e.ArrayBuffer=e.ArrayBuffer||h,Object.defineProperty(l,"from",{value:function(e){return new this(e)}}),Object.defineProperty(l,"of",{value:function(){return new this(arguments)}});var P={};l.prototype=P,Object.defineProperty(l.prototype,"_getter",{value:function(e){if(arguments.length<1)throw SyntaxError("Not enough arguments");if((e=r(e))>=this.length)return A;var t,i,s=[];for(t=0,i=this.byteOffset+e*this.BYTES_PER_ELEMENT;t<this.BYTES_PER_ELEMENT;t+=1,i+=1)s.push(this.buffer._bytes[i]);return this._unpack(s)}}),Object.defineProperty(l.prototype,"get",{value:l.prototype._getter}),Object.defineProperty(l.prototype,"_setter",{value:function(e,t){if(arguments.length<2)throw SyntaxError("Not enough arguments");if(!((e=r(e))>=this.length)){var i,s,o=this._pack(t);for(i=0,s=this.byteOffset+e*this.BYTES_PER_ELEMENT;i<this.BYTES_PER_ELEMENT;i+=1,s+=1)this.buffer._bytes[s]=o[i]}}}),Object.defineProperty(l.prototype,"constructor",{value:l}),Object.defineProperty(l.prototype,"copyWithin",{value:function(e,t){var i=arguments[2],s=o(this),n=r(s.length);n=D(n,0);var h,l=a(e);h=l<0?D(n+l,0):O(l,n);var p,c=a(t);p=c<0?D(n+c,0):O(c,n);var d,u;u=(d=i===A?n:a(i))<0?D(n+d,0):O(d,n);var g,m=O(u-p,n-h);for(p<h&&h<p+m?(g=-1,p=p+m-1,h=h+m-1):g=1;m>0;)s._setter(h,s._getter(p)),p+=g,h+=g,m-=1;return s}}),Object.defineProperty(l.prototype,"every",{value:function(e){if(this===A||null===this)throw TypeError();var t=Object(this),i=r(t.length);if(!s(e))throw TypeError();for(var o=arguments[1],a=0;a<i;a++)if(!e.call(o,t._getter(a),a,t))return!1;return!0}}),Object.defineProperty(l.prototype,"fill",{value:function(e){var t=arguments[1],i=arguments[2],s=o(this),n=r(s.length);n=D(n,0);var h,l=a(t);h=l<0?D(n+l,0):O(l,n);var p,c;for(c=(p=i===A?n:a(i))<0?D(n+p,0):O(p,n);h<c;)s._setter(h,e),h+=1;return s}}),Object.defineProperty(l.prototype,"filter",{value:function(e){if(this===A||null===this)throw TypeError();var t=Object(this),i=r(t.length);if(!s(e))throw TypeError();for(var o=[],a=arguments[1],n=0;n<i;n++){var h=t._getter(n);e.call(a,h,n,t)&&o.push(h)}return new this.constructor(o)}}),Object.defineProperty(l.prototype,"find",{value:function(e){var t=o(this),i=r(t.length);if(!s(e))throw TypeError();for(var a=arguments.length>1?arguments[1]:A,n=0;n<i;){var h=t._getter(n),l=e.call(a,h,n,t);if(Boolean(l))return h;++n}return A}}),Object.defineProperty(l.prototype,"findIndex",{value:function(e){var t=o(this),i=r(t.length);if(!s(e))throw TypeError();for(var a=arguments.length>1?arguments[1]:A,n=0;n<i;){var h=t._getter(n),l=e.call(a,h,n,t);if(Boolean(l))return n;++n}return-1}}),Object.defineProperty(l.prototype,"forEach",{value:function(e){if(this===A||null===this)throw TypeError();var t=Object(this),i=r(t.length);if(!s(e))throw TypeError();for(var o=arguments[1],a=0;a<i;a++)e.call(o,t._getter(a),a,t)}}),Object.defineProperty(l.prototype,"indexOf",{value:function(e){if(this===A||null===this)throw TypeError();var t=Object(this),i=r(t.length);if(0===i)return-1;var s=0;if(arguments.length>0&&((s=Number(arguments[1]))!==s?s=0:0!==s&&s!==1/0&&s!==-1/0&&(s=(s>0||-1)*H(L(s)))),s>=i)return-1;for(var o=s>=0?s:D(i-L(s),0);o<i;o++)if(t._getter(o)===e)return o;return-1}}),Object.defineProperty(l.prototype,"join",{value:function(e){if(this===A||null===this)throw TypeError();for(var t=Object(this),i=r(t.length),s=Array(i),o=0;o<i;++o)s[o]=t._getter(o);return s.join(e===A?",":e)}}),Object.defineProperty(l.prototype,"lastIndexOf",{value:function(e){if(this===A||null===this)throw TypeError();var t=Object(this),i=r(t.length);if(0===i)return-1;var s=i;arguments.length>1&&((s=Number(arguments[1]))!==s?s=0:0!==s&&s!==1/0&&s!==-1/0&&(s=(s>0||-1)*H(L(s))));for(var o=s>=0?O(s,i-1):i-L(s);o>=0;o--)if(t._getter(o)===e)return o;return-1}}),Object.defineProperty(l.prototype,"map",{value:function(e){if(this===A||null===this)throw TypeError();var t=Object(this),i=r(t.length);if(!s(e))throw TypeError();var o=[];o.length=i;for(var a=arguments[1],n=0;n<i;n++)o[n]=e.call(a,t._getter(n),n,t);return new this.constructor(o)}}),Object.defineProperty(l.prototype,"reduce",{value:function(e){if(this===A||null===this)throw TypeError();var t=Object(this),i=r(t.length);if(!s(e))throw TypeError();if(0===i&&1===arguments.length)throw TypeError();var o,a=0;for(o=arguments.length>=2?arguments[1]:t._getter(a++);a<i;)o=e.call(A,o,t._getter(a),a,t),a++;return o}}),Object.defineProperty(l.prototype,"reduceRight",{value:function(e){if(this===A||null===this)throw TypeError();var t=Object(this),i=r(t.length);if(!s(e))throw TypeError();if(0===i&&1===arguments.length)throw TypeError();var o,a=i-1;for(o=arguments.length>=2?arguments[1]:t._getter(a--);a>=0;)o=e.call(A,o,t._getter(a),a,t),a--;return o}}),Object.defineProperty(l.prototype,"reverse",{value:function(){if(this===A||null===this)throw TypeError();for(var e=Object(this),t=r(e.length),i=H(t/2),s=0,o=t-1;s<i;++s,--o){var a=e._getter(s);e._setter(s,e._getter(o)),e._setter(o,a)}return e}}),Object.defineProperty(l.prototype,"set",{value:function(e,t){if(arguments.length<1)throw SyntaxError("Not enough arguments");var i,s,o,a,n,h,l,p,c,d;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(i=arguments[0],(o=r(arguments[1]))+i.length>this.length)throw RangeError("Offset plus length of array is out of range");if(p=this.byteOffset+o*this.BYTES_PER_ELEMENT,c=i.length*this.BYTES_PER_ELEMENT,i.buffer===this.buffer){for(d=[],n=0,h=i.byteOffset;n<c;n+=1,h+=1)d[n]=i.buffer._bytes[h];for(n=0,l=p;n<c;n+=1,l+=1)this.buffer._bytes[l]=d[n]}else for(n=0,h=i.byteOffset,l=p;n<c;n+=1,h+=1,l+=1)this.buffer._bytes[l]=i.buffer._bytes[h]}else{if("object"!=typeof arguments[0]||void 0===arguments[0].length)throw TypeError("Unexpected argument type(s)");if(s=arguments[0],a=r(s.length),(o=r(arguments[1]))+a>this.length)throw RangeError("Offset plus length of array is out of range");for(n=0;n<a;n+=1)h=s[n],this._setter(o+n,Number(h))}}}),Object.defineProperty(l.prototype,"slice",{value:function(e,t){for(var i=o(this),s=r(i.length),n=a(e),h=n<0?D(s+n,0):O(n,s),l=t===A?s:a(t),p=l<0?D(s+l,0):O(l,s),c=p-h,d=new(0,i.constructor)(c),u=0;h<p;){var g=i._getter(h);d._setter(u,g),++h,++u}return d}}),Object.defineProperty(l.prototype,"some",{value:function(e){if(this===A||null===this)throw TypeError();var t=Object(this),i=r(t.length);if(!s(e))throw TypeError();for(var o=arguments[1],a=0;a<i;a++)if(e.call(o,t._getter(a),a,t))return!0;return!1}}),Object.defineProperty(l.prototype,"sort",{value:function(e){if(this===A||null===this)throw TypeError();for(var t=Object(this),i=r(t.length),s=Array(i),o=0;o<i;++o)s[o]=t._getter(o);for(e?s.sort(e):s.sort(),o=0;o<i;++o)t._setter(o,s[o]);return t}}),Object.defineProperty(l.prototype,"subarray",{value:function(e,t){function i(e,t,i){return e<t?t:e>i?i:e}e=a(e),t=a(t),arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=i(e,0,this.length);var s=(t=i(t,0,this.length))-e;return s<0&&(s=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,s)}});var M=x(1,p,c),I=x(1,d,u),R=x(1,g,u),E=x(2,m,y),F=x(2,f,b),_=x(4,w,v),j=x(4,k,S),W=x(4,C,G),U=x(8,T,B);e.Int8Array=e.Int8Array||M,e.Uint8Array=e.Uint8Array||I,e.Uint8ClampedArray=e.Uint8ClampedArray||R,e.Int16Array=e.Int16Array||E,e.Uint16Array=e.Uint16Array||F,e.Int32Array=e.Int32Array||_,e.Uint32Array=e.Uint32Array||j,e.Float32Array=e.Float32Array||W,e.Float64Array=e.Float64Array||U}(),function(){function t(e,t){return s(e.get)?e.get(t):e[t]}function o(e,t,s){if(!(e instanceof ArrayBuffer||"ArrayBuffer"===i(e)))throw TypeError();if((t=r(t))>e.byteLength)throw RangeError("byteOffset out of range");if(s=s===A?e.byteLength-t:r(s),t+s>e.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:e}),Object.defineProperty(this,"byteLength",{value:s}),Object.defineProperty(this,"byteOffset",{value:t})}function a(e){return function(i,s){if((i=r(i))+e.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");i+=this.byteOffset;for(var o=new Uint8Array(this.buffer,i,e.BYTES_PER_ELEMENT),a=[],n=0;n<e.BYTES_PER_ELEMENT;n+=1)a.push(t(o,n));return Boolean(s)===Boolean(h)&&a.reverse(),t(new e(new Uint8Array(a).buffer),0)}}function n(e){return function(i,s,o){if((i=r(i))+e.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");var a,n=new e([s]),l=new Uint8Array(n.buffer),p=[];for(a=0;a<e.BYTES_PER_ELEMENT;a+=1)p.push(t(l,a));Boolean(o)===Boolean(h)&&p.reverse(),new Uint8Array(this.buffer,i,e.BYTES_PER_ELEMENT).set(p)}}var h=function(){var e=new Uint16Array([4660]);return 18===t(new Uint8Array(e.buffer),0)}();Object.defineProperty(o.prototype,"getUint8",{value:a(Uint8Array)}),Object.defineProperty(o.prototype,"getInt8",{value:a(Int8Array)}),Object.defineProperty(o.prototype,"getUint16",{value:a(Uint16Array)}),Object.defineProperty(o.prototype,"getInt16",{value:a(Int16Array)}),Object.defineProperty(o.prototype,"getUint32",{value:a(Uint32Array)}),Object.defineProperty(o.prototype,"getInt32",{value:a(Int32Array)}),Object.defineProperty(o.prototype,"getFloat32",{value:a(Float32Array)}),Object.defineProperty(o.prototype,"getFloat64",{value:a(Float64Array)}),Object.defineProperty(o.prototype,"setUint8",{value:n(Uint8Array)}),Object.defineProperty(o.prototype,"setInt8",{value:n(Int8Array)}),Object.defineProperty(o.prototype,"setUint16",{value:n(Uint16Array)}),Object.defineProperty(o.prototype,"setInt16",{value:n(Int16Array)}),Object.defineProperty(o.prototype,"setUint32",{value:n(Uint32Array)}),Object.defineProperty(o.prototype,"setInt32",{value:n(Int32Array)}),Object.defineProperty(o.prototype,"setFloat32",{value:n(Float32Array)}),Object.defineProperty(o.prototype,"setFloat64",{value:n(Float64Array)}),e.DataView=e.DataView||o}()}(this);var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,i){var s=function(e){var t,i=[],s=e.length;for(t=0;t!==s;i.push(e[t++]));return i},o=function(e,t,i){var s,o,a=e.cycle;for(s in a)o=a[s],e[s]="function"==typeof o?o(i,t[i]):o[i%o.length];delete e.cycle},a=function(e,t,s){i.call(this,e,t,s),this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=a.prototype.render},r=i._internals,n=r.isSelector,h=r.isArray,l=a.prototype=i.to({},.1,{}),p=[];a.version="1.19.1",l.constructor=a,l.kill()._gc=!1,a.killTweensOf=a.killDelayedCallsTo=i.killTweensOf,a.getTweensOf=i.getTweensOf,a.lagSmoothing=i.lagSmoothing,a.ticker=i.ticker,a.render=i.render,l.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},l.updateTo=function(e,t){var s,o=this.ratio,a=this.vars.immediateRender||e.immediateRender;t&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(s in e)this.vars[s]=e[s];if(this._initted||a)if(t)this._initted=!1,a&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var r=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(r,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||a)for(var n,h=1/(1-o),l=this._firstPT;l;)n=l.s+l.c,l.c*=h,l.s=n-l.c,l=l._next;return this},l.render=function(e,t,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var s,o,a,n,h,l,p,c,d=this._dirty?this.totalDuration():this._totalDuration,u=this._time,g=this._totalTime,m=this._cycle,y=this._duration,f=this._rawPrevTime;if(e>=d-1e-7&&e>=0?(this._totalTime=d,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=y,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(s=!0,o="onComplete",i=i||this._timeline.autoRemoveChildren),0===y&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(e=0),(f<0||e<=0&&e>=-1e-7||1e-10===f&&"isPause"!==this.data)&&f!==e&&(i=!0,f>1e-10&&(o="onReverseComplete")),this._rawPrevTime=c=!t||e||f===e?e:1e-10)):e<1e-7?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==g||0===y&&f>0)&&(o="onReverseComplete",s=this._reversed),e<0&&(this._active=!1,0===y&&(this._initted||!this.vars.lazy||i)&&(f>=0&&(i=!0),this._rawPrevTime=c=!t||e||f===e?e:1e-10)),this._initted||(i=!0)):(this._totalTime=this._time=e,0!==this._repeat&&(n=y+this._repeatDelay,this._cycle=this._totalTime/n>>0,0!==this._cycle&&this._cycle===this._totalTime/n&&g<=e&&this._cycle--,this._time=this._totalTime-this._cycle*n,this._yoyo&&0!=(1&this._cycle)&&(this._time=y-this._time),this._time>y?this._time=y:this._time<0&&(this._time=0)),this._easeType?(h=this._time/y,l=this._easeType,p=this._easePower,(1===l||3===l&&h>=.5)&&(h=1-h),3===l&&(h*=2),1===p?h*=h:2===p?h*=h*h:3===p?h*=h*h*h:4===p&&(h*=h*h*h*h),1===l?this.ratio=1-h:2===l?this.ratio=h:this._time/y<.5?this.ratio=h/2:this.ratio=1-h/2):this.ratio=this._ease.getRatio(this._time/y)),u!==this._time||i||m!==this._cycle){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=u,this._totalTime=g,this._rawPrevTime=f,this._cycle=m,r.lazyTweens.push(this),void(this._lazy=[e,t]);this._time&&!s?this.ratio=this._ease.getRatio(this._time/y):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==u&&e>=0&&(this._active=!0),0===g&&(2===this._initted&&e>0&&this._init(),this._startAt&&(e>=0?this._startAt.render(e,t,i):o||(o="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==y||t||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(e<0&&this._startAt&&this._startTime&&this._startAt.render(e,t,i),t||(this._totalTime!==g||o)&&this._callback("onUpdate")),this._cycle!==m&&(t||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),o&&(this._gc&&!i||(e<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,t,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[o]&&this._callback(o),0===y&&1e-10===this._rawPrevTime&&1e-10!==c&&(this._rawPrevTime=0)))}else g!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate"))},a.to=function(e,t,i){return new a(e,t,i)},a.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new a(e,t,i)},a.fromTo=function(e,t,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new a(e,t,s)},a.staggerTo=a.allTo=function(e,t,r,l,c,d,u){l=l||0;var g,m,y,f,b=0,w=[],v=r.cycle,k=r.startAt&&r.startAt.cycle;for(h(e)||("string"==typeof e&&(e=i.selector(e)||e),n(e)&&(e=s(e))),e=e||[],l<0&&((e=s(e)).reverse(),l*=-1),g=e.length-1,y=0;y<=g;y++){m={};for(f in r)m[f]=r[f];if(v&&(o(m,e,y),null!=m.duration&&(t=m.duration,delete m.duration)),k){k=m.startAt={};for(f in r.startAt)k[f]=r.startAt[f];o(m.startAt,e,y)}m.delay=b+(m.delay||0),y===g&&c&&(m.onComplete=function(){r.onComplete&&r.onComplete.apply(r.onCompleteScope||this,arguments),c.apply(u||r.callbackScope||this,d||p)}),w[y]=new a(e[y],t,m),b+=l}return w},a.staggerFrom=a.allFrom=function(e,t,i,s,o,r,n){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,a.staggerTo(e,t,i,s,o,r,n)},a.staggerFromTo=a.allFromTo=function(e,t,i,s,o,r,n,h){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,a.staggerTo(e,t,s,o,r,n,h)},a.delayedCall=function(e,t,i,s,o){return new a(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:s,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:!1,useFrames:o,overwrite:0})},a.set=function(e,t){return new a(e,0,t)},a.isTweening=function(e){return i.getTweensOf(e,!0).length>0};var c=function(e,t){for(var s=[],o=0,a=e._first;a;)a instanceof i?s[o++]=a:(t&&(s[o++]=a),o=(s=s.concat(c(a,t))).length),a=a._next;return s},d=a.getAllTweens=function(t){return c(e._rootTimeline,t).concat(c(e._rootFramesTimeline,t))};a.killAll=function(e,i,s,o){null==i&&(i=!0),null==s&&(s=!0);var a,r,n,h=d(0!=o),l=h.length,p=i&&s&&o;for(n=0;n<l;n++)r=h[n],(p||r instanceof t||(a=r.target===r.vars.onComplete)&&s||i&&!a)&&(e?r.totalTime(r._reversed?0:r.totalDuration()):r._enabled(!1,!1))},a.killChildTweensOf=function(e,t){if(null!=e){var o,l,p,c,d,u=r.tweenLookup;if("string"==typeof e&&(e=i.selector(e)||e),n(e)&&(e=s(e)),h(e))for(c=e.length;--c>-1;)a.killChildTweensOf(e[c],t);else{o=[];for(p in u)for(l=u[p].target.parentNode;l;)l===e&&(o=o.concat(u[p].tweens)),l=l.parentNode;for(d=o.length,c=0;c<d;c++)t&&o[c].totalTime(o[c].totalDuration()),o[c]._enabled(!1,!1)}}};var u=function(e,i,s,o){i=!1!==i,s=!1!==s;for(var a,r,n=d(o=!1!==o),h=i&&s&&o,l=n.length;--l>-1;)r=n[l],(h||r instanceof t||(a=r.target===r.vars.onComplete)&&s||i&&!a)&&r.paused(e)};return a.pauseAll=function(e,t,i){u(!0,e,t,i)},a.resumeAll=function(e,t,i){u(!1,e,t,i)},a.globalTimeScale=function(t){var s=e._rootTimeline,o=i.ticker.time;return arguments.length?(t=t||1e-10,s._startTime=o-(o-s._startTime)*s._timeScale/t,s=e._rootFramesTimeline,o=i.ticker.frame,s._startTime=o-(o-s._startTime)*s._timeScale/t,s._timeScale=e._rootTimeline._timeScale=t,t):s._timeScale},l.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},l.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},l.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!=(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},l.duration=function(t){return arguments.length?e.prototype.duration.call(this,t):this._duration},l.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},l.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},l.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},a},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,i){var s=function(e){t.call(this,e),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,s,o=this.vars;for(s in o)i=o[s],n(i)&&-1!==i.join("").indexOf("{self}")&&(o[s]=this._swapSelfInParams(i));n(o.tweens)&&this.add(o.tweens,0,o.align,o.stagger)},o=i._internals,a=s._internals={},r=o.isSelector,n=o.isArray,h=o.lazyTweens,l=o.lazyRender,p=_gsScope._gsDefine.globals,c=function(e){var t,i={};for(t in e)i[t]=e[t];return i},d=function(e,t,i){var s,o,a=e.cycle;for(s in a)o=a[s],e[s]="function"==typeof o?o(i,t[i]):o[i%o.length];delete e.cycle},u=a.pauseCallback=function(){},g=function(e){var t,i=[],s=e.length;for(t=0;t!==s;i.push(e[t++]));return i},m=s.prototype=new t;return s.version="1.19.1",m.constructor=s,m.kill()._gc=m._forcingPlayhead=m._hasPause=!1,m.to=function(e,t,s,o){var a=s.repeat&&p.TweenMax||i;return t?this.add(new a(e,t,s),o):this.set(e,s,o)},m.from=function(e,t,s,o){return this.add((s.repeat&&p.TweenMax||i).from(e,t,s),o)},m.fromTo=function(e,t,s,o,a){var r=o.repeat&&p.TweenMax||i;return t?this.add(r.fromTo(e,t,s,o),a):this.set(e,o,a)},m.staggerTo=function(e,t,o,a,n,h,l,p){var u,m,y=new s({onComplete:h,onCompleteParams:l,callbackScope:p,smoothChildTiming:this.smoothChildTiming}),f=o.cycle;for("string"==typeof e&&(e=i.selector(e)||e),r(e=e||[])&&(e=g(e)),(a=a||0)<0&&((e=g(e)).reverse(),a*=-1),m=0;m<e.length;m++)(u=c(o)).startAt&&(u.startAt=c(u.startAt),u.startAt.cycle&&d(u.startAt,e,m)),f&&(d(u,e,m),null!=u.duration&&(t=u.duration,delete u.duration)),y.to(e[m],t,u,m*a);return this.add(y,n)},m.staggerFrom=function(e,t,i,s,o,a,r,n){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(e,t,i,s,o,a,r,n)},m.staggerFromTo=function(e,t,i,s,o,a,r,n,h){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,this.staggerTo(e,t,s,o,a,r,n,h)},m.call=function(e,t,s,o){return this.add(i.delayedCall(0,e,t,s),o)},m.set=function(e,t,s){return s=this._parseTimeOrLabel(s,0,!0),null==t.immediateRender&&(t.immediateRender=s===this._time&&!this._paused),this.add(new i(e,0,t),s)},s.exportRoot=function(e,t){null==(e=e||{}).smoothChildTiming&&(e.smoothChildTiming=!0);var o,a,r=new s(e),n=r._timeline;for(null==t&&(t=!0),n._remove(r,!0),r._startTime=0,r._rawPrevTime=r._time=r._totalTime=n._time,o=n._first;o;)a=o._next,t&&o instanceof i&&o.target===o.vars.onComplete||r.add(o,o._startTime-o._delay),o=a;return n.add(r,0),r},m.add=function(o,a,r,h){var l,p,c,d,u,g;if("number"!=typeof a&&(a=this._parseTimeOrLabel(a,0,!0,o)),!(o instanceof e)){if(o instanceof Array||o&&o.push&&n(o)){for(r=r||"normal",h=h||0,l=a,p=o.length,c=0;c<p;c++)n(d=o[c])&&(d=new s({tweens:d})),this.add(d,l),"string"!=typeof d&&"function"!=typeof d&&("sequence"===r?l=d._startTime+d.totalDuration()/d._timeScale:"start"===r&&(d._startTime-=d.delay())),l+=h;return this._uncache(!0)}if("string"==typeof o)return this.addLabel(o,a);if("function"!=typeof o)throw"Cannot add "+o+" into the timeline; it is not a tween, timeline, function, or string.";o=i.delayedCall(0,o)}if(t.prototype.add.call(this,o,a),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(g=(u=this).rawTime()>o._startTime;u._timeline;)g&&u._timeline.smoothChildTiming?u.totalTime(u._totalTime,!0):u._gc&&u._enabled(!0,!1),u=u._timeline;return this},m.remove=function(t){if(t instanceof e){this._remove(t,!1);var i=t._timeline=t.vars.useFrames?e._rootFramesTimeline:e._rootTimeline;return t._startTime=(t._paused?t._pauseTime:i._time)-(t._reversed?t.totalDuration()-t._totalTime:t._totalTime)/t._timeScale,this}if(t instanceof Array||t&&t.push&&n(t)){for(var s=t.length;--s>-1;)this.remove(t[s]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},m._remove=function(e,i){return t.prototype._remove.call(this,e,i),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},m.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},m.insert=m.insertMultiple=function(e,t,i,s){return this.add(e,t||0,i,s)},m.appendMultiple=function(e,t,i,s){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),i,s)},m.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},m.addPause=function(e,t,s,o){var a=i.delayedCall(0,u,s,o||this);return a.vars.onComplete=a.vars.onReverseComplete=t,a.data="isPause",this._hasPause=!0,this.add(a,e)},m.removeLabel=function(e){return delete this._labels[e],this},m.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},m._parseTimeOrLabel=function(t,i,s,o){var a;if(o instanceof e&&o.timeline===this)this.remove(o);else if(o&&(o instanceof Array||o.push&&n(o)))for(a=o.length;--a>-1;)o[a]instanceof e&&o[a].timeline===this&&this.remove(o[a]);if("string"==typeof i)return this._parseTimeOrLabel(i,s&&"number"==typeof t&&null==this._labels[i]?t-this.duration():0,s);if(i=i||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=this.duration());else{if(-1===(a=t.indexOf("=")))return null==this._labels[t]?s?this._labels[t]=this.duration()+i:i:this._labels[t]+i;i=parseInt(t.charAt(a-1)+"1",10)*Number(t.substr(a+1)),t=a>1?this._parseTimeOrLabel(t.substr(0,a-1),0,s):this.duration()}return Number(t)+i},m.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),!1!==t)},m.stop=function(){return this.paused(!0)},m.gotoAndPlay=function(e,t){return this.play(e,t)},m.gotoAndStop=function(e,t){return this.pause(e,t)},m.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var s,o,a,r,n,p,c,d=this._dirty?this.totalDuration():this._totalDuration,u=this._time,g=this._startTime,m=this._timeScale,y=this._paused;if(e>=d-1e-7&&e>=0)this._totalTime=this._time=d,this._reversed||this._hasPausedChild()||(o=!0,r="onComplete",n=!!this._timeline.autoRemoveChildren,0===this._duration&&(e<=0&&e>=-1e-7||this._rawPrevTime<0||1e-10===this._rawPrevTime)&&this._rawPrevTime!==e&&this._first&&(n=!0,this._rawPrevTime>1e-10&&(r="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:1e-10,e=d+1e-4;else if(e<1e-7)if(this._totalTime=this._time=0,(0!==u||0===this._duration&&1e-10!==this._rawPrevTime&&(this._rawPrevTime>0||e<0&&this._rawPrevTime>=0))&&(r="onReverseComplete",o=this._reversed),e<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(n=o=!0,r="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(n=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:1e-10,0===e&&o)for(s=this._first;s&&0===s._startTime;)s._duration||(o=!1),s=s._next;e=0,this._initted||(n=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!t){if(e>=u)for(s=this._first;s&&s._startTime<=e&&!p;)s._duration||"isPause"!==s.data||s.ratio||0===s._startTime&&0===this._rawPrevTime||(p=s),s=s._next;else for(s=this._last;s&&s._startTime>=e&&!p;)s._duration||"isPause"===s.data&&s._rawPrevTime>0&&(p=s),s=s._prev;p&&(this._time=e=p._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=e}if(this._time!==u&&this._first||i||n||p){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==u&&e>0&&(this._active=!0),0===u&&this.vars.onStart&&(0===this._time&&this._duration||t||this._callback("onStart")),(c=this._time)>=u)for(s=this._first;s&&(a=s._next,c===this._time&&(!this._paused||y));)(s._active||s._startTime<=c&&!s._paused&&!s._gc)&&(p===s&&this.pause(),s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(e-s._startTime)*s._timeScale,t,i):s.render((e-s._startTime)*s._timeScale,t,i)),s=a;else for(s=this._last;s&&(a=s._prev,c===this._time&&(!this._paused||y));){if(s._active||s._startTime<=u&&!s._paused&&!s._gc){if(p===s){for(p=s._prev;p&&p.endTime()>this._time;)p.render(p._reversed?p.totalDuration()-(e-p._startTime)*p._timeScale:(e-p._startTime)*p._timeScale,t,i),p=p._prev;p=null,this.pause()}s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(e-s._startTime)*s._timeScale,t,i):s.render((e-s._startTime)*s._timeScale,t,i)}s=a}this._onUpdate&&(t||(h.length&&l(),this._callback("onUpdate"))),r&&(this._gc||g!==this._startTime&&m===this._timeScale||(0===this._time||d>=this.totalDuration())&&(o&&(h.length&&l(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[r]&&this._callback(r)))}},m._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof s&&e._hasPausedChild())return!0;e=e._next}return!1},m.getChildren=function(e,t,s,o){o=o||-9999999999;for(var a=[],r=this._first,n=0;r;)r._startTime<o||(r instanceof i?!1!==t&&(a[n++]=r):(!1!==s&&(a[n++]=r),!1!==e&&(n=(a=a.concat(r.getChildren(!0,t,s))).length))),r=r._next;return a},m.getTweensOf=function(e,t){var s,o,a=this._gc,r=[],n=0;for(a&&this._enabled(!0,!0),o=(s=i.getTweensOf(e)).length;--o>-1;)(s[o].timeline===this||t&&this._contains(s[o]))&&(r[n++]=s[o]);return a&&this._enabled(!1,!0),r},m.recent=function(){return this._recent},m._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},m.shiftChildren=function(e,t,i){i=i||0;for(var s,o=this._first,a=this._labels;o;)o._startTime>=i&&(o._startTime+=e),o=o._next;if(t)for(s in a)a[s]>=i&&(a[s]+=e);return this._uncache(!0)},m._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var i=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),s=i.length,o=!1;--s>-1;)i[s]._kill(e,t)&&(o=!0);return o},m.clear=function(e){var t=this.getChildren(!1,!0,!0),i=t.length;for(this._time=this._totalTime=0;--i>-1;)t[i]._enabled(!1,!1);return!1!==e&&(this._labels={}),this._uncache(!0)},m.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},m._enabled=function(e,i){if(e===this._gc)for(var s=this._first;s;)s._enabled(e,!0),s=s._next;return t.prototype._enabled.call(this,e,i)},m.totalTime=function(t,i,s){this._forcingPlayhead=!0;var o=e.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,o},m.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},m.totalDuration=function(e){if(!arguments.length){if(this._dirty){for(var t,i,s=0,o=this._last,a=999999999999;o;)t=o._prev,o._dirty&&o.totalDuration(),o._startTime>a&&this._sortChildren&&!o._paused?this.add(o,o._startTime-o._delay):a=o._startTime,o._startTime<0&&!o._paused&&(s-=o._startTime,this._timeline.smoothChildTiming&&(this._startTime+=o._startTime/this._timeScale),this.shiftChildren(-o._startTime,!1,-9999999999),a=0),(i=o._startTime+o._totalDuration/o._timeScale)>s&&(s=i),o=t;this._duration=this._totalDuration=s,this._dirty=!1}return this._totalDuration}return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this},m.paused=function(t){if(!t)for(var i=this._first,s=this._time;i;)i._startTime===s&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return e.prototype.paused.apply(this,arguments)},m.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===e._rootFramesTimeline},m.rawTime=function(e){return e&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(e)-this._startTime)*this._timeScale},s},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,i){var s=function(t){e.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},o=t._internals,a=o.lazyTweens,r=o.lazyRender,n=_gsScope._gsDefine.globals,h=new i(null,null,1,0),l=s.prototype=new e;return l.constructor=s,l.kill()._gc=!1,s.version="1.19.1",l.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)},l.addCallback=function(e,i,s,o){return this.add(t.delayedCall(0,e,s,o),i)},l.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var i=this.getTweensOf(e,!1),s=i.length,o=this._parseTimeOrLabel(t);--s>-1;)i[s]._startTime===o&&i[s]._enabled(!1,!1);return this},l.removePause=function(t){return this.removeCallback(e._internals.pauseCallback,t)},l.tweenTo=function(e,i){i=i||{};var s,o,a,r={ease:h,useFrames:this.usesFrames(),immediateRender:!1},l=i.repeat&&n.TweenMax||t;for(o in i)r[o]=i[o];return r.time=this._parseTimeOrLabel(e),s=Math.abs(Number(r.time)-this._time)/this._timeScale||.001,a=new l(this,s,r),r.onStart=function(){a.target.paused(!0),a.vars.time!==a.target.time()&&s===a.duration()&&a.duration(Math.abs(a.vars.time-a.target.time())/a.target._timeScale),i.onStart&&i.onStart.apply(i.onStartScope||i.callbackScope||a,i.onStartParams||[])},a},l.tweenFromTo=function(e,t,i){i=i||{},e=this._parseTimeOrLabel(e),i.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this},i.immediateRender=!1!==i.immediateRender;var s=this.tweenTo(t,i);return s.duration(Math.abs(s.vars.time-e)/this._timeScale||.001)},l.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var s,o,n,h,l,p,c,d,u=this._dirty?this.totalDuration():this._totalDuration,g=this._duration,m=this._time,y=this._totalTime,f=this._startTime,b=this._timeScale,w=this._rawPrevTime,v=this._paused,k=this._cycle;if(e>=u-1e-7&&e>=0)this._locked||(this._totalTime=u,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(o=!0,h="onComplete",l=!!this._timeline.autoRemoveChildren,0===this._duration&&(e<=0&&e>=-1e-7||w<0||1e-10===w)&&w!==e&&this._first&&(l=!0,w>1e-10&&(h="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:1e-10,this._yoyo&&0!=(1&this._cycle)?this._time=e=0:(this._time=g,e=g+1e-4);else if(e<1e-7)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==m||0===g&&1e-10!==w&&(w>0||e<0&&w>=0)&&!this._locked)&&(h="onReverseComplete",o=this._reversed),e<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(l=o=!0,h="onReverseComplete"):w>=0&&this._first&&(l=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=g||!t||e||this._rawPrevTime===e?e:1e-10,0===e&&o)for(s=this._first;s&&0===s._startTime;)s._duration||(o=!1),s=s._next;e=0,this._initted||(l=!0)}else if(0===g&&w<0&&(l=!0),this._time=this._rawPrevTime=e,this._locked||(this._totalTime=e,0!==this._repeat&&(p=g+this._repeatDelay,this._cycle=this._totalTime/p>>0,0!==this._cycle&&this._cycle===this._totalTime/p&&y<=e&&this._cycle--,this._time=this._totalTime-this._cycle*p,this._yoyo&&0!=(1&this._cycle)&&(this._time=g-this._time),this._time>g?(this._time=g,e=g+1e-4):this._time<0?this._time=e=0:e=this._time)),this._hasPause&&!this._forcingPlayhead&&!t&&e<g){if((e=this._time)>=m||this._repeat&&k!==this._cycle)for(s=this._first;s&&s._startTime<=e&&!c;)s._duration||"isPause"!==s.data||s.ratio||0===s._startTime&&0===this._rawPrevTime||(c=s),s=s._next;else for(s=this._last;s&&s._startTime>=e&&!c;)s._duration||"isPause"===s.data&&s._rawPrevTime>0&&(c=s),s=s._prev;c&&(this._time=e=c._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==k&&!this._locked){var S=this._yoyo&&0!=(1&k),x=S===(this._yoyo&&0!=(1&this._cycle)),P=this._totalTime,B=this._cycle,T=this._rawPrevTime,G=this._time;if(this._totalTime=k*g,this._cycle<k?S=!S:this._totalTime+=g,this._time=m,this._rawPrevTime=0===g?w-1e-4:w,this._cycle=k,this._locked=!0,m=S?0:g,this.render(m,t,0===g),t||this._gc||this.vars.onRepeat&&(this._cycle=B,this._locked=!1,this._callback("onRepeat")),m!==this._time)return;if(x&&(this._cycle=k,this._locked=!0,m=S?g+1e-4:-1e-4,this.render(m,!0,!1)),this._locked=!1,this._paused&&!v)return;this._time=G,this._totalTime=P,this._cycle=B,this._rawPrevTime=T}if(this._time!==m&&this._first||i||l||c){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==y&&e>0&&(this._active=!0),0===y&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||t||this._callback("onStart")),(d=this._time)>=m)for(s=this._first;s&&(n=s._next,d===this._time&&(!this._paused||v));)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(c===s&&this.pause(),s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(e-s._startTime)*s._timeScale,t,i):s.render((e-s._startTime)*s._timeScale,t,i)),s=n;else for(s=this._last;s&&(n=s._prev,d===this._time&&(!this._paused||v));){if(s._active||s._startTime<=m&&!s._paused&&!s._gc){if(c===s){for(c=s._prev;c&&c.endTime()>this._time;)c.render(c._reversed?c.totalDuration()-(e-c._startTime)*c._timeScale:(e-c._startTime)*c._timeScale,t,i),c=c._prev;c=null,this.pause()}s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(e-s._startTime)*s._timeScale,t,i):s.render((e-s._startTime)*s._timeScale,t,i)}s=n}this._onUpdate&&(t||(a.length&&r(),this._callback("onUpdate"))),h&&(this._locked||this._gc||f!==this._startTime&&b===this._timeScale||(0===this._time||u>=this.totalDuration())&&(o&&(a.length&&r(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[h]&&this._callback(h)))}else y!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate"))},l.getActive=function(e,t,i){null==e&&(e=!0),null==t&&(t=!0),null==i&&(i=!1);var s,o,a=[],r=this.getChildren(e,t,i),n=0,h=r.length;for(s=0;s<h;s++)(o=r[s]).isActive()&&(a[n++]=o);return a},l.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t,i=this.getLabelsArray(),s=i.length;for(t=0;t<s;t++)if(i[t].time>e)return i[t].name;return null},l.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),i=t.length;--i>-1;)if(t[i].time<e)return t[i].name;return null},l.getLabelsArray=function(){var e,t=[],i=0;for(e in this._labels)t[i++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},l.invalidate=function(){return this._locked=!1,e.prototype.invalidate.call(this)},l.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},l.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},l.totalDuration=function(t){return arguments.length?-1!==this._repeat&&t?this.timeScale(this.totalDuration()/t):this:(this._dirty&&(e.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},l.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!=(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},l.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},l.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},l.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},l.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+1e-8)},s},!0),function(){var e=180/Math.PI,t=[],i=[],s=[],o={},a=_gsScope._gsDefine.globals,r=function(e,t,i,s){i===s&&(i=s-(s-t)/1e6),e===t&&(t=e+(i-e)/1e6),this.a=e,this.b=t,this.c=i,this.d=s,this.da=s-e,this.ca=i-e,this.ba=t-e},n=function(e,t,i,s){var o={a:e},a={},r={},n={c:s},h=(e+t)/2,l=(t+i)/2,p=(i+s)/2,c=(h+l)/2,d=(l+p)/2,u=(d-c)/8;return o.b=h+(e-h)/4,a.b=c+u,o.c=a.a=(o.b+a.b)/2,a.c=r.a=(c+d)/2,r.b=d-u,n.b=p+(s-p)/4,r.c=n.a=(r.b+n.b)/2,[o,a,r,n]},h=function(e,o,a,r,h){var l,p,c,d,u,g,m,y,f,b,w,v,k,S=e.length-1,x=0,P=e[0].a;for(l=0;l<S;l++)p=(u=e[x]).a,c=u.d,d=e[x+1].d,h?(w=t[l],k=((v=i[l])+w)*o*.25/(r?.5:s[l]||.5),y=c-((g=c-(c-p)*(r?.5*o:0!==w?k/w:0))+(((m=c+(d-c)*(r?.5*o:0!==v?k/v:0))-g)*(3*w/(w+v)+.5)/4||0))):y=c-((g=c-(c-p)*o*.5)+(m=c+(d-c)*o*.5))/2,g+=y,m+=y,u.c=f=g,u.b=0!==l?P:P=u.a+.6*(u.c-u.a),u.da=c-p,u.ca=f-p,u.ba=P-p,a?(b=n(p,P,f,c),e.splice(x,1,b[0],b[1],b[2],b[3]),x+=4):x++,P=m;(u=e[x]).b=P,u.c=P+.4*(u.d-P),u.da=u.d-u.a,u.ca=u.c-u.a,u.ba=P-u.a,a&&(b=n(u.a,P,u.c,u.d),e.splice(x,1,b[0],b[1],b[2],b[3]))},l=function(e,s,o,a){var n,h,l,p,c,d,u=[];if(a)for(h=(e=[a].concat(e)).length;--h>-1;)"string"==typeof(d=e[h][s])&&"="===d.charAt(1)&&(e[h][s]=a[s]+Number(d.charAt(0)+d.substr(2)));if((n=e.length-2)<0)return u[0]=new r(e[0][s],0,0,e[n<-1?0:1][s]),u;for(h=0;h<n;h++)l=e[h][s],p=e[h+1][s],u[h]=new r(l,0,0,p),o&&(c=e[h+2][s],t[h]=(t[h]||0)+(p-l)*(p-l),i[h]=(i[h]||0)+(c-p)*(c-p));return u[h]=new r(e[h][s],0,0,e[h+1][s]),u},p=function(e,a,r,n,p,c){var d,u,g,m,y,f,b,w,v={},k=[],S=c||e[0];p="string"==typeof p?","+p+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==a&&(a=1);for(u in e[0])k.push(u);if(e.length>1){for(w=e[e.length-1],b=!0,d=k.length;--d>-1;)if(u=k[d],Math.abs(S[u]-w[u])>.05){b=!1;break}b&&(e=e.concat(),c&&e.unshift(c),e.push(e[1]),c=e[e.length-3])}for(t.length=i.length=s.length=0,d=k.length;--d>-1;)u=k[d],o[u]=-1!==p.indexOf(","+u+","),v[u]=l(e,u,o[u],c);for(d=t.length;--d>-1;)t[d]=Math.sqrt(t[d]),i[d]=Math.sqrt(i[d]);if(!n){for(d=k.length;--d>-1;)if(o[u])for(f=(g=v[k[d]]).length-1,m=0;m<f;m++)y=g[m+1].da/i[m]+g[m].da/t[m]||0,s[m]=(s[m]||0)+y*y;for(d=s.length;--d>-1;)s[d]=Math.sqrt(s[d])}for(d=k.length,m=r?4:1;--d>-1;)g=v[u=k[d]],h(g,a,r,n,o[u]),b&&(g.splice(0,m),g.splice(g.length-m,m));return v},c=function(e,t,i){var s,o,a,n,h,l,p,c,d,u,g,m={},y="cubic"===(t=t||"soft")?3:2,f="soft"===t,b=[];if(f&&i&&(e=[i].concat(e)),null==e||e.length<y+1)throw"invalid Bezier data";for(d in e[0])b.push(d);for(l=b.length;--l>-1;){for(m[d=b[l]]=h=[],u=0,c=e.length,p=0;p<c;p++)s=null==i?e[p][d]:"string"==typeof(g=e[p][d])&&"="===g.charAt(1)?i[d]+Number(g.charAt(0)+g.substr(2)):Number(g),f&&p>1&&p<c-1&&(h[u++]=(s+h[u-2])/2),h[u++]=s;for(c=u-y+1,u=0,p=0;p<c;p+=y)s=h[p],o=h[p+1],a=h[p+2],n=2===y?0:h[p+3],h[u++]=g=3===y?new r(s,o,a,n):new r(s,(2*o+s)/3,(2*o+a)/3,a);h.length=u}return m},d=function(e,t,i){for(var s,o,a,r,n,h,l,p,c,d,u,g=1/i,m=e.length;--m>-1;)for(a=(d=e[m]).a,r=d.d-a,n=d.c-a,h=d.b-a,s=o=0,p=1;p<=i;p++)s=o-(o=((l=g*p)*l*r+3*(c=1-l)*(l*n+c*h))*l),t[u=m*i+p-1]=(t[u]||0)+s*s},u=function(e,t){var i,s,o,a,r=[],n=[],h=0,l=0,p=(t=t>>0||6)-1,c=[],u=[];for(i in e)d(e[i],r,t);for(o=r.length,s=0;s<o;s++)h+=Math.sqrt(r[s]),u[a=s%t]=h,a===p&&(l+=h,c[a=s/t>>0]=u,n[a]=l,h=0,u=[]);return{length:l,lengths:n,segments:c}},g=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.7",API:2,global:!0,init:function(e,t,i){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._mod={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var s,o,a,r,n,h=t.values||[],l={},d=h[0],g=t.autoRotate||i.vars.orientToBezier;this._autoRotate=g?g instanceof Array?g:[["x","y","rotation",!0===g?0:Number(g)||0]]:null;for(s in d)this._props.push(s);for(a=this._props.length;--a>-1;)s=this._props[a],this._overwriteProps.push(s),o=this._func[s]="function"==typeof e[s],l[s]=o?e[s.indexOf("set")||"function"!=typeof e["get"+s.substr(3)]?s:"get"+s.substr(3)]():parseFloat(e[s]),n||l[s]!==h[0][s]&&(n=l);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?p(h,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,n):c(h,t.type,l),this._segCount=this._beziers[s].length,this._timeRes){var m=u(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(g=this._autoRotate)for(this._initialRotations=[],g[0]instanceof Array||(this._autoRotate=g=[g]),a=g.length;--a>-1;){for(r=0;r<3;r++)s=g[a][r],this._func[s]="function"==typeof e[s]&&e[s.indexOf("set")||"function"!=typeof e["get"+s.substr(3)]?s:"get"+s.substr(3)];s=g[a][2],this._initialRotations[a]=(this._func[s]?this._func[s].call(this._target):this._target[s])||0,this._overwriteProps.push(s)}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(t){var i,s,o,a,r,n,h,l,p,c,d=this._segCount,u=this._func,g=this._target,m=t!==this._startRatio;if(this._timeRes){if(p=this._lengths,c=this._curSeg,t*=this._length,o=this._li,t>this._l2&&o<d-1){for(l=d-1;o<l&&(this._l2=p[++o])<=t;);this._l1=p[o-1],this._li=o,this._curSeg=c=this._segments[o],this._s2=c[this._s1=this._si=0]}else if(t<this._l1&&o>0){for(;o>0&&(this._l1=p[--o])>=t;);0===o&&t<this._l1?this._l1=0:o++,this._l2=p[o],this._li=o,this._curSeg=c=this._segments[o],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(i=o,t-=this._l1,o=this._si,t>this._s2&&o<c.length-1){for(l=c.length-1;o<l&&(this._s2=c[++o])<=t;);this._s1=c[o-1],this._si=o}else if(t<this._s1&&o>0){for(;o>0&&(this._s1=c[--o])>=t;);0===o&&t<this._s1?this._s1=0:o++,this._s2=c[o],this._si=o}n=(o+(t-this._s1)/(this._s2-this._s1))*this._prec||0}else n=(t-(i=t<0?0:t>=1?d-1:d*t>>0)*(1/d))*d;for(s=1-n,o=this._props.length;--o>-1;)a=this._props[o],h=(n*n*(r=this._beziers[a][i]).da+3*s*(n*r.ca+s*r.ba))*n+r.a,this._mod[a]&&(h=this._mod[a](h,g)),u[a]?g[a](h):g[a]=h;if(this._autoRotate){var y,f,b,w,v,k,S,x=this._autoRotate;for(o=x.length;--o>-1;)a=x[o][2],k=x[o][3]||0,S=!0===x[o][4]?1:e,r=this._beziers[x[o][0]],y=this._beziers[x[o][1]],r&&y&&(r=r[i],y=y[i],f=r.a+(r.b-r.a)*n,f+=((w=r.b+(r.c-r.b)*n)-f)*n,w+=(r.c+(r.d-r.c)*n-w)*n,b=y.a+(y.b-y.a)*n,b+=((v=y.b+(y.c-y.b)*n)-b)*n,v+=(y.c+(y.d-y.c)*n-v)*n,h=m?Math.atan2(v-b,w-f)*S+k:this._initialRotations[o],this._mod[a]&&(h=this._mod[a](h,g)),u[a]?g[a](h):g[a]=h)}}}),m=g.prototype;g.bezierThrough=p,g.cubicToQuadratic=n,g._autoCSS=!0,g.quadraticToCubic=function(e,t,i){return new r(e,(2*t+e)/3,(2*t+i)/3,i)},g._cssRegister=function(){var e=a.CSSPlugin;if(e){var t=e._internals,i=t._parseToProxy,s=t._setPluginRatio,o=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,a,r,n,h){t instanceof Array&&(t={values:t}),h=new g;var l,p,c,d=t.values,u=d.length-1,m=[],y={};if(u<0)return n;for(l=0;l<=u;l++)c=i(e,d[l],r,n,h,u!==l),m[l]=c.end;for(p in t)y[p]=t[p];return y.values=m,n=new o(e,"bezier",0,0,c.pt,2),n.data=c,n.plugin=h,n.setRatio=s,0===y.autoRotate&&(y.autoRotate=!0),!y.autoRotate||y.autoRotate instanceof Array||(l=!0===y.autoRotate?0:Number(y.autoRotate),y.autoRotate=null!=c.end.left?[["left","top","rotation",l,!1]]:null!=c.end.x&&[["x","y","rotation",l,!1]]),y.autoRotate&&(r._transform||r._enableTransforms(!1),c.autoRotate=r._target._gsTransform,c.proxy.rotation=c.autoRotate.rotation||0,r._overwriteProps.push("rotation")),h._onInitTween(c.proxy,y,r._tween),n}})}},m._mod=function(e){for(var t,i=this._overwriteProps,s=i.length;--s>-1;)(t=e[i[s]])&&"function"==typeof t&&(this._mod[i[s]]=t)},m._kill=function(e){var t,i,s=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],i=s.length;--i>-1;)s[i]===t&&s.splice(i,1);if(s=this._autoRotate)for(i=s.length;--i>-1;)e[s[i][2]]&&s.splice(i,1);return this._super._kill.call(this,e)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(e,t){var i,s,o,a,r=function(){e.call(this,"css"),this._overwriteProps.length=0,this.setRatio=r.prototype.setRatio},n=_gsScope._gsDefine.globals,h={},l=r.prototype=new e("css");l.constructor=r,r.version="1.19.1",r.API=2,r.defaultTransformPerspective=0,r.defaultSkewType="compensated",r.defaultSmoothOrigin=!0,l="px",r.suffixMap={top:l,right:l,bottom:l,left:l,width:l,height:l,fontSize:l,padding:l,margin:l,perspective:l,lineHeight:""};var p,c,d,u,g,m,y,f,b=/(?:\-|\.|\b)(\d|\.|e\-)+/g,w=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,v=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,k=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,S=/(?:\d|\-|\+|=|#|\.)*/g,x=/opacity *= *([^)]*)/i,P=/opacity:([^;]*)/i,B=/alpha\(opacity *=.+?\)/i,T=/^(rgb|hsl)/,G=/([A-Z])/g,C=/-([a-z])/gi,A=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,M=function(e,t){return t.toUpperCase()},I=/(?:Left|Right|Width)/i,L=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,H=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,R=/,(?=[^\)]*(?:\(|$))/gi,D=/[\s,\(]/i,O=Math.PI/180,E=180/Math.PI,F={},_={style:{}},j=_gsScope.document||{createElement:function(){return _}},W=function(e,t){return j.createElementNS?j.createElementNS(t||"http://www.w3.org/1999/xhtml",e):j.createElement(e)},U=W("div"),z=W("img"),V=r._internals={_specialProps:h},X=(_gsScope.navigator||{}).userAgent||"",N=function(){var e=X.indexOf("Android"),t=W("a");return d=-1!==X.indexOf("Safari")&&-1===X.indexOf("Chrome")&&(-1===e||parseFloat(X.substr(e+8,2))>3),g=d&&parseFloat(X.substr(X.indexOf("Version/")+8,2))<6,u=-1!==X.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(X)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(X))&&(m=parseFloat(RegExp.$1)),!!t&&(t.style.cssText="top:1px;opacity:.55;",/^0.55/.test(t.style.opacity))}(),q=function(e){return x.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Y=function(e){_gsScope.console&&console.log(e)},K="",Z="",J=function(e,t){var i,s,o=(t=t||U).style;if(void 0!==o[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),i=["O","Moz","ms","Ms","Webkit"],s=5;--s>-1&&void 0===o[i[s]+e];);return s>=0?(Z=3===s?"ms":i[s],K="-"+Z.toLowerCase()+"-",Z+e):null},Q=j.defaultView?j.defaultView.getComputedStyle:function(){},$=r.getStyle=function(e,t,i,s,o){var a;return N||"opacity"!==t?(!s&&e.style[t]?a=e.style[t]:(i=i||Q(e))?a=i[t]||i.getPropertyValue(t)||i.getPropertyValue(t.replace(G,"-$1").toLowerCase()):e.currentStyle&&(a=e.currentStyle[t]),null==o||a&&"none"!==a&&"auto"!==a&&"auto auto"!==a?a:o):q(e)},ee=V.convertToPixels=function(e,i,s,o,a){if("px"===o||!o)return s;if("auto"===o||!s)return 0;var n,h,l,p=I.test(i),c=e,d=U.style,u=s<0,g=1===s;if(u&&(s=-s),g&&(s*=100),"%"===o&&-1!==i.indexOf("border"))n=s/100*(p?e.clientWidth:e.clientHeight);else{if(d.cssText="border:0 solid red;position:"+$(e,"position")+";line-height:0;","%"!==o&&c.appendChild&&"v"!==o.charAt(0)&&"rem"!==o)d[p?"borderLeftWidth":"borderTopWidth"]=s+o;else{if(c=e.parentNode||j.body,h=c._gsCache,l=t.ticker.frame,h&&p&&h.time===l)return h.width*s/100;d[p?"width":"height"]=s+o}c.appendChild(U),n=parseFloat(U[p?"offsetWidth":"offsetHeight"]),c.removeChild(U),p&&"%"===o&&!1!==r.cacheWidths&&((h=c._gsCache=c._gsCache||{}).time=l,h.width=n/s*100),0!==n||a||(n=ee(e,i,s,o,!0))}return g&&(n/=100),u?-n:n},te=V.calculateOffset=function(e,t,i){if("absolute"!==$(e,"position",i))return 0;var s="left"===t?"Left":"Top",o=$(e,"margin"+s,i);return e["offset"+s]-(ee(e,t,parseFloat(o),o.replace(S,""))||0)},ie=function(e,t){var i,s,o,a={};if(t=t||Q(e,null))if(i=t.length)for(;--i>-1;)-1!==(o=t[i]).indexOf("-transform")&&Ae!==o||(a[o.replace(C,M)]=t.getPropertyValue(o));else for(i in t)-1!==i.indexOf("Transform")&&Ce!==i||(a[i]=t[i]);else if(t=e.currentStyle||e.style)for(i in t)"string"==typeof i&&void 0===a[i]&&(a[i.replace(C,M)]=t[i]);return N||(a.opacity=q(e)),s=ze(e,t,!1),a.rotation=s.rotation,a.skewX=s.skewX,a.scaleX=s.scaleX,a.scaleY=s.scaleY,a.x=s.x,a.y=s.y,Ie&&(a.z=s.z,a.rotationX=s.rotationX,a.rotationY=s.rotationY,a.scaleZ=s.scaleZ),a.filters&&delete a.filters,a},se=function(e,t,i,s,o){var a,r,n,h={},l=e.style;for(r in i)"cssText"!==r&&"length"!==r&&isNaN(r)&&(t[r]!==(a=i[r])||o&&o[r])&&-1===r.indexOf("Origin")&&("number"!=typeof a&&"string"!=typeof a||(h[r]="auto"!==a||"left"!==r&&"top"!==r?""!==a&&"auto"!==a&&"none"!==a||"string"!=typeof t[r]||""===t[r].replace(k,"")?a:0:te(e,r),void 0!==l[r]&&(n=new be(l,r,l[r],n))));if(s)for(r in s)"className"!==r&&(h[r]=s[r]);return{difs:h,firstMPT:n}},oe={width:["Left","Right"],height:["Top","Bottom"]},ae=["marginLeft","marginRight","marginTop","marginBottom"],re=function(e,t,i){if("svg"===(e.nodeName+"").toLowerCase())return(i||Q(e))[t]||0;if(e.getCTM&&je(e))return e.getBBox()[t]||0;var s=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),o=oe[t],a=o.length;for(i=i||Q(e,null);--a>-1;)s-=parseFloat($(e,"padding"+o[a],i,!0))||0,s-=parseFloat($(e,"border"+o[a]+"Width",i,!0))||0;return s},ne=function(e,t){if("contain"===e||"auto"===e||"auto auto"===e)return e+" ";null!=e&&""!==e||(e="0 0");var i,s=e.split(" "),o=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":s[0],a=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":s[1];if(s.length>3&&!t){for(s=e.split(", ").join(",").split(","),e=[],i=0;i<s.length;i++)e.push(ne(s[i]));return e.join(",")}return null==a?a="center"===o?"50%":"0":"center"===a&&(a="50%"),("center"===o||isNaN(parseFloat(o))&&-1===(o+"").indexOf("="))&&(o="50%"),e=o+" "+a+(s.length>2?" "+s[2]:""),t&&(t.oxp=-1!==o.indexOf("%"),t.oyp=-1!==a.indexOf("%"),t.oxr="="===o.charAt(1),t.oyr="="===a.charAt(1),t.ox=parseFloat(o.replace(k,"")),t.oy=parseFloat(a.replace(k,"")),t.v=e),t||e},he=function(e,t){return"function"==typeof e&&(e=e(f,y)),"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0},le=function(e,t){return"function"==typeof e&&(e=e(f,y)),null==e?t:"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0},pe=function(e,t,i,s){var o,a,r,n,h;return"function"==typeof e&&(e=e(f,y)),null==e?n=t:"number"==typeof e?n=e:(o=360,a=e.split("_"),r=((h="="===e.charAt(1))?parseInt(e.charAt(0)+"1",10)*parseFloat(a[0].substr(2)):parseFloat(a[0]))*(-1===e.indexOf("rad")?1:E)-(h?0:t),a.length&&(s&&(s[i]=t+r),-1!==e.indexOf("short")&&(r%=o)!==r%(o/2)&&(r=r<0?r+o:r-o),-1!==e.indexOf("_cw")&&r<0?r=(r+9999999999*o)%o-(r/o|0)*o:-1!==e.indexOf("ccw")&&r>0&&(r=(r-9999999999*o)%o-(r/o|0)*o)),n=t+r),n<1e-6&&n>-1e-6&&(n=0),n},ce={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},de=function(e,t,i){return 255*(6*(e=e<0?e+1:e>1?e-1:e)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)+.5|0},ue=r.parseColor=function(e,t){var i,s,o,a,r,n,h,l,p,c,d;if(e)if("number"==typeof e)i=[e>>16,e>>8&255,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),ce[e])i=ce[e];else if("#"===e.charAt(0))4===e.length&&(e="#"+(s=e.charAt(1))+s+(o=e.charAt(2))+o+(a=e.charAt(3))+a),i=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(i=d=e.match(b),t){if(-1!==e.indexOf("="))return e.match(w)}else r=Number(i[0])%360/360,n=Number(i[1])/100,s=2*(h=Number(i[2])/100)-(o=h<=.5?h*(n+1):h+n-h*n),i.length>3&&(i[3]=Number(e[3])),i[0]=de(r+1/3,s,o),i[1]=de(r,s,o),i[2]=de(r-1/3,s,o);else i=e.match(b)||ce.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),i.length>3&&(i[3]=Number(i[3]))}else i=ce.black;return t&&!d&&(s=i[0]/255,o=i[1]/255,a=i[2]/255,h=((l=Math.max(s,o,a))+(p=Math.min(s,o,a)))/2,l===p?r=n=0:(c=l-p,n=h>.5?c/(2-l-p):c/(l+p),r=l===s?(o-a)/c+(o<a?6:0):l===o?(a-s)/c+2:(s-o)/c+4,r*=60),i[0]=r+.5|0,i[1]=100*n+.5|0,i[2]=100*h+.5|0),i},ge=function(e,t){var i,s,o,a=e.match(me)||[],r=0,n=a.length?"":e;for(i=0;i<a.length;i++)s=a[i],r+=(o=e.substr(r,e.indexOf(s,r)-r)).length+s.length,3===(s=ue(s,t)).length&&s.push(1),n+=o+(t?"hsla("+s[0]+","+s[1]+"%,"+s[2]+"%,"+s[3]:"rgba("+s.join(","))+")";return n+e.substr(r)},me="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(l in ce)me+="|"+l+"\\b";me=new RegExp(me+")","gi"),r.colorStringFilter=function(e){var t,i=e[0]+e[1];me.test(i)&&(t=-1!==i.indexOf("hsl(")||-1!==i.indexOf("hsla("),e[0]=ge(e[0],t),e[1]=ge(e[1],t)),me.lastIndex=0},t.defaultStringFilter||(t.defaultStringFilter=r.colorStringFilter);var ye=function(e,t,i,s){if(null==e)return function(e){return e};var o,a=t?(e.match(me)||[""])[0]:"",r=e.split(a).join("").match(v)||[],n=e.substr(0,e.indexOf(r[0])),h=")"===e.charAt(e.length-1)?")":"",l=-1!==e.indexOf(" ")?" ":",",p=r.length,c=p>0?r[0].replace(b,""):"";return p?o=t?function(e){var t,d,u,g;if("number"==typeof e)e+=c;else if(s&&R.test(e)){for(g=e.replace(R,"|").split("|"),u=0;u<g.length;u++)g[u]=o(g[u]);return g.join(",")}if(t=(e.match(me)||[a])[0],d=e.split(t).join("").match(v)||[],u=d.length,p>u--)for(;++u<p;)d[u]=i?d[(u-1)/2|0]:r[u];return n+d.join(l)+l+t+h+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,a,d;if("number"==typeof e)e+=c;else if(s&&R.test(e)){for(a=e.replace(R,"|").split("|"),d=0;d<a.length;d++)a[d]=o(a[d]);return a.join(",")}if(t=e.match(v)||[],d=t.length,p>d--)for(;++d<p;)t[d]=i?t[(d-1)/2|0]:r[d];return n+t.join(l)+h}:function(e){return e}},fe=function(e){return e=e.split(","),function(t,i,s,o,a,r,n){var h,l=(i+"").split(" ");for(n={},h=0;h<4;h++)n[e[h]]=l[h]=l[h]||l[(h-1)/2>>0];return o.parse(t,n,a,r)}},be=(V._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,i,s,o,a,r=this.data,n=r.proxy,h=r.firstMPT;h;)t=n[h.v],h.r?t=Math.round(t):t<1e-6&&t>-1e-6&&(t=0),h.t[h.p]=t,h=h._next;if(r.autoRotate&&(r.autoRotate.rotation=r.mod?r.mod(n.rotation,this.t):n.rotation),1===e||0===e)for(h=r.firstMPT,a=1===e?"e":"b";h;){if((i=h.t).type){if(1===i.type){for(o=i.xs0+i.s+i.xs1,s=1;s<i.l;s++)o+=i["xn"+s]+i["xs"+(s+1)];i[a]=o}}else i[a]=i.s+i.xs0;h=h._next}},function(e,t,i,s,o){this.t=e,this.p=t,this.v=i,this.r=o,s&&(s._prev=this,this._next=s)}),we=(V._parseToProxy=function(e,t,i,s,o,a){var r,n,h,l,p,c=s,d={},u={},g=i._transform,m=F;for(i._transform=null,F=t,s=p=i.parse(e,t,s,o),F=m,a&&(i._transform=g,c&&(c._prev=null,c._prev&&(c._prev._next=null)));s&&s!==c;){if(s.type<=1&&(n=s.p,u[n]=s.s+s.c,d[n]=s.s,a||(l=new be(s,"s",n,l,s.r),s.c=0),1===s.type))for(r=s.l;--r>0;)h="xn"+r,u[n=s.p+"_"+h]=s.data[h],d[n]=s[h],a||(l=new be(s,h,n,l,s.rxp[h]));s=s._next}return{proxy:d,end:u,firstMPT:l,pt:p}},V.CSSPropTween=function(e,t,s,o,r,n,h,l,p,c,d){this.t=e,this.p=t,this.s=s,this.c=o,this.n=h||t,e instanceof we||a.push(this.n),this.r=l,this.type=n||0,p&&(this.pr=p,i=!0),this.b=void 0===c?s:c,this.e=void 0===d?s+o:d,r&&(this._next=r,r._prev=this)}),ve=function(e,t,i,s,o,a){var r=new we(e,t,i,s-i,o,-1,a);return r.b=i,r.e=r.xs0=s,r},ke=r.parseComplex=function(e,t,i,s,o,a,n,h,l,c){i=i||a||"","function"==typeof s&&(s=s(f,y)),n=new we(e,t,0,0,n,c?2:1,null,!1,h,i,s),s+="",o&&me.test(s+i)&&(s=[i,s],r.colorStringFilter(s),i=s[0],s=s[1]);var d,u,g,m,v,k,S,x,P,B,T,G,C,A=i.split(", ").join(",").split(" "),M=s.split(", ").join(",").split(" "),I=A.length,L=!1!==p;for(-1===s.indexOf(",")&&-1===i.indexOf(",")||(A=A.join(" ").replace(R,", ").split(" "),M=M.join(" ").replace(R,", ").split(" "),I=A.length),I!==M.length&&(I=(A=(a||"").split(" ")).length),n.plugin=l,n.setRatio=c,me.lastIndex=0,d=0;d<I;d++)if(m=A[d],v=M[d],(x=parseFloat(m))||0===x)n.appendXtra("",x,he(v,x),v.replace(w,""),L&&-1!==v.indexOf("px"),!0);else if(o&&me.test(m))G=")"+((G=v.indexOf(")")+1)?v.substr(G):""),C=-1!==v.indexOf("hsl")&&N,m=ue(m,C),v=ue(v,C),(P=m.length+v.length>6)&&!N&&0===v[3]?(n["xs"+n.l]+=n.l?" transparent":"transparent",n.e=n.e.split(M[d]).join("transparent")):(N||(P=!1),C?n.appendXtra(P?"hsla(":"hsl(",m[0],he(v[0],m[0]),",",!1,!0).appendXtra("",m[1],he(v[1],m[1]),"%,",!1).appendXtra("",m[2],he(v[2],m[2]),P?"%,":"%"+G,!1):n.appendXtra(P?"rgba(":"rgb(",m[0],v[0]-m[0],",",!0,!0).appendXtra("",m[1],v[1]-m[1],",",!0).appendXtra("",m[2],v[2]-m[2],P?",":G,!0),P&&(m=m.length<4?1:m[3],n.appendXtra("",m,(v.length<4?1:v[3])-m,G,!1))),me.lastIndex=0;else if(k=m.match(b)){if(!(S=v.match(w))||S.length!==k.length)return n;for(g=0,u=0;u<k.length;u++)T=k[u],B=m.indexOf(T,g),n.appendXtra(m.substr(g,B-g),Number(T),he(S[u],T),"",L&&"px"===m.substr(B+T.length,2),0===u),g=B+T.length;n["xs"+n.l]+=m.substr(g)}else n["xs"+n.l]+=n.l||n["xs"+n.l]?" "+v:v;if(-1!==s.indexOf("=")&&n.data){for(G=n.xs0+n.data.s,d=1;d<n.l;d++)G+=n["xs"+d]+n.data["xn"+d];n.e=G+n["xs"+d]}return n.l||(n.type=-1,n.xs0=n.e),n.xfirst||n},Se=9;for((l=we.prototype).l=l.pr=0;--Se>0;)l["xn"+Se]=0,l["xs"+Se]="";l.xs0="",l._next=l._prev=l.xfirst=l.data=l.plugin=l.setRatio=l.rxp=null,l.appendXtra=function(e,t,i,s,o,a){var r=this,n=r.l;return r["xs"+n]+=a&&(n||r["xs"+n])?" "+e:e||"",i||0===n||r.plugin?(r.l++,r.type=r.setRatio?2:1,r["xs"+r.l]=s||"",n>0?(r.data["xn"+n]=t+i,r.rxp["xn"+n]=o,r["xn"+n]=t,r.plugin||(r.xfirst=new we(r,"xn"+n,t,i,r.xfirst||r,0,r.n,o,r.pr),r.xfirst.xs0=0),r):(r.data={s:t+i},r.rxp={},r.s=t,r.c=i,r.r=o,r)):(r["xs"+n]+=t+(s||""),r)};var xe=function(e,t){t=t||{},this.p=t.prefix?J(e)||e:e,h[e]=h[this.p]=this,this.format=t.formatter||ye(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.pr=t.priority||0},Pe=V._registerComplexSpecialProp=function(e,t,i){"object"!=typeof t&&(t={parser:i});var s,o=e.split(","),a=t.defaultValue;for(i=i||[a],s=0;s<o.length;s++)t.prefix=0===s&&t.prefix,t.defaultValue=i[s]||a,new xe(o[s],t)},Be=V._registerPluginProp=function(e){if(!h[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";Pe(e,{parser:function(e,i,s,o,a,r,l){var p=n.com.greensock.plugins[t];return p?(p._cssRegister(),h[s].parse(e,i,s,o,a,r,l)):(Y("Error: "+t+" js file not loaded."),a)}})}};(l=xe.prototype).parseComplex=function(e,t,i,s,o,a){var r,n,h,l,p,c,d=this.keyword;if(this.multi&&(R.test(i)||R.test(t)?(n=t.replace(R,"|").split("|"),h=i.replace(R,"|").split("|")):d&&(n=[t],h=[i])),h){for(l=h.length>n.length?h.length:n.length,r=0;r<l;r++)t=n[r]=n[r]||this.dflt,i=h[r]=h[r]||this.dflt,d&&(p=t.indexOf(d))!==(c=i.indexOf(d))&&(-1===c?n[r]=n[r].split(d).join(""):-1===p&&(n[r]+=" "+d));t=n.join(", "),i=h.join(", ")}return ke(e,this.p,t,i,this.clrs,this.dflt,s,this.pr,o,a)},l.parse=function(e,t,i,s,a,r,n){return this.parseComplex(e.style,this.format($(e,this.p,o,!1,this.dflt)),this.format(t),a,r)},r.registerSpecialProp=function(e,t,i){Pe(e,{parser:function(e,s,o,a,r,n,h){var l=new we(e,o,0,0,r,2,o,!1,i);return l.plugin=n,l.setRatio=t(e,s,a._tween,o),l},priority:i})},r.useSVGTransformAttr=!0;var Te,Ge="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Ce=J("transform"),Ae=K+"transform",Me=J("transformOrigin"),Ie=null!==J("perspective"),Le=V.Transform=function(){this.perspective=parseFloat(r.defaultTransformPerspective)||0,this.force3D=!(!1===r.defaultForce3D||!Ie)&&(r.defaultForce3D||"auto")},He=_gsScope.SVGElement,Re=function(e,t,i){var s,o=j.createElementNS("http://www.w3.org/2000/svg",e),a=/([a-z])([A-Z])/g;for(s in i)o.setAttributeNS(null,s.replace(a,"$1-$2").toLowerCase(),i[s]);return t.appendChild(o),o},De=j.documentElement||{},Oe=function(){var e,t,i,s=m||/Android/i.test(X)&&!_gsScope.chrome;return j.createElementNS&&!s&&(e=Re("svg",De),i=(t=Re("rect",e,{width:100,height:50,x:100})).getBoundingClientRect().width,t.style[Me]="50% 50%",t.style[Ce]="scaleX(0.5)",s=i===t.getBoundingClientRect().width&&!(u&&Ie),De.removeChild(e)),s}(),Ee=function(e,t,i,s,o,a){var n,h,l,p,c,d,u,g,m,y,f,b,w,v,k=e._gsTransform,S=Ue(e,!0);k&&(w=k.xOrigin,v=k.yOrigin),(!s||(n=s.split(" ")).length<2)&&(0===(u=e.getBBox()).x&&0===u.y&&u.width+u.height===0&&(u={x:parseFloat(e.hasAttribute("x")?e.getAttribute("x"):e.hasAttribute("cx")?e.getAttribute("cx"):0)||0,y:parseFloat(e.hasAttribute("y")?e.getAttribute("y"):e.hasAttribute("cy")?e.getAttribute("cy"):0)||0,width:0,height:0}),n=[(-1!==(t=ne(t).split(" "))[0].indexOf("%")?parseFloat(t[0])/100*u.width:parseFloat(t[0]))+u.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*u.height:parseFloat(t[1]))+u.y]),i.xOrigin=p=parseFloat(n[0]),i.yOrigin=c=parseFloat(n[1]),s&&S!==We&&(d=S[0],u=S[1],g=S[2],m=S[3],y=S[4],f=S[5],(b=d*m-u*g)&&(h=p*(m/b)+c*(-g/b)+(g*f-m*y)/b,l=p*(-u/b)+c*(d/b)-(d*f-u*y)/b,p=i.xOrigin=n[0]=h,c=i.yOrigin=n[1]=l)),k&&(a&&(i.xOffset=k.xOffset,i.yOffset=k.yOffset,k=i),o||!1!==o&&!1!==r.defaultSmoothOrigin?(h=p-w,l=c-v,k.xOffset+=h*S[0]+l*S[2]-h,k.yOffset+=h*S[1]+l*S[3]-l):k.xOffset=k.yOffset=0),a||e.setAttribute("data-svg-origin",n.join(" "))},Fe=function(e){var t,i=W("svg",this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=this.parentNode,o=this.nextSibling,a=this.style.cssText;if(De.appendChild(i),i.appendChild(this),this.style.display="block",e)try{t=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Fe}catch(e){}else this._originalGetBBox&&(t=this._originalGetBBox());return o?s.insertBefore(this,o):s.appendChild(this),De.removeChild(i),this.style.cssText=a,t},_e=function(e){try{return e.getBBox()}catch(t){return Fe.call(e,!0)}},je=function(e){return!(!(He&&e.getCTM&&_e(e))||e.parentNode&&!e.ownerSVGElement)},We=[1,0,0,1,0,0],Ue=function(e,t){var i,s,o,a,r,n,h=e._gsTransform||new Le,l=e.style;if(Ce?s=$(e,Ae,null,!0):e.currentStyle&&(s=(s=e.currentStyle.filter.match(L))&&4===s.length?[s[0].substr(4),Number(s[2].substr(4)),Number(s[1].substr(4)),s[3].substr(4),h.x||0,h.y||0].join(","):""),(i=!s||"none"===s||"matrix(1, 0, 0, 1, 0, 0)"===s)&&Ce&&((n="none"===Q(e).display)||!e.parentNode)&&(n&&(a=l.display,l.display="block"),e.parentNode||(r=1,De.appendChild(e)),i=!(s=$(e,Ae,null,!0))||"none"===s||"matrix(1, 0, 0, 1, 0, 0)"===s,a?l.display=a:n&&qe(l,"display"),r&&De.removeChild(e)),(h.svg||e.getCTM&&je(e))&&(i&&-1!==(l[Ce]+"").indexOf("matrix")&&(s=l[Ce],i=0),o=e.getAttribute("transform"),i&&o&&(-1!==o.indexOf("matrix")?(s=o,i=0):-1!==o.indexOf("translate")&&(s="matrix(1,0,0,1,"+o.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",i=0))),i)return We;for(o=(s||"").match(b)||[],Se=o.length;--Se>-1;)a=Number(o[Se]),o[Se]=(r=a-(a|=0))?(1e5*r+(r<0?-.5:.5)|0)/1e5+a:a;return t&&o.length>6?[o[0],o[1],o[4],o[5],o[12],o[13]]:o},ze=V.getTransform=function(e,i,s,o){if(e._gsTransform&&s&&!o)return e._gsTransform;var a,n,h,l,p,c,d=s?e._gsTransform||new Le:new Le,u=d.scaleX<0,g=Ie?parseFloat($(e,Me,i,!1,"0 0 0").split(" ")[2])||d.zOrigin||0:0,m=parseFloat(r.defaultTransformPerspective)||0;if(d.svg=!(!e.getCTM||!je(e)),d.svg&&(Ee(e,$(e,Me,i,!1,"50% 50%")+"",d,e.getAttribute("data-svg-origin")),Te=r.useSVGTransformAttr||Oe),(a=Ue(e))!==We){if(16===a.length){var y,f,b,w,v,k=a[0],S=a[1],x=a[2],P=a[3],B=a[4],T=a[5],G=a[6],C=a[7],A=a[8],M=a[9],I=a[10],L=a[12],H=a[13],R=a[14],D=a[11],O=Math.atan2(G,I);d.zOrigin&&(L=A*(R=-d.zOrigin)-a[12],H=M*R-a[13],R=I*R+d.zOrigin-a[14]),d.rotationX=O*E,O&&(y=B*(w=Math.cos(-O))+A*(v=Math.sin(-O)),f=T*w+M*v,b=G*w+I*v,A=B*-v+A*w,M=T*-v+M*w,I=G*-v+I*w,D=C*-v+D*w,B=y,T=f,G=b),O=Math.atan2(-x,I),d.rotationY=O*E,O&&(f=S*(w=Math.cos(-O))-M*(v=Math.sin(-O)),b=x*w-I*v,M=S*v+M*w,I=x*v+I*w,D=P*v+D*w,k=y=k*w-A*v,S=f,x=b),O=Math.atan2(S,k),d.rotation=O*E,O&&(k=k*(w=Math.cos(-O))+B*(v=Math.sin(-O)),f=S*w+T*v,T=S*-v+T*w,G=x*-v+G*w,S=f),d.rotationX&&Math.abs(d.rotationX)+Math.abs(d.rotation)>359.9&&(d.rotationX=d.rotation=0,d.rotationY=180-d.rotationY),d.scaleX=(1e5*Math.sqrt(k*k+S*S)+.5|0)/1e5,d.scaleY=(1e5*Math.sqrt(T*T+M*M)+.5|0)/1e5,d.scaleZ=(1e5*Math.sqrt(G*G+I*I)+.5|0)/1e5,d.rotationX||d.rotationY?d.skewX=0:(d.skewX=B||T?Math.atan2(B,T)*E+d.rotation:d.skewX||0,Math.abs(d.skewX)>90&&Math.abs(d.skewX)<270&&(u?(d.scaleX*=-1,d.skewX+=d.rotation<=0?180:-180,d.rotation+=d.rotation<=0?180:-180):(d.scaleY*=-1,d.skewX+=d.skewX<=0?180:-180))),d.perspective=D?1/(D<0?-D:D):0,d.x=L,d.y=H,d.z=R,d.svg&&(d.x-=d.xOrigin-(d.xOrigin*k-d.yOrigin*B),d.y-=d.yOrigin-(d.yOrigin*S-d.xOrigin*T))}else if(!Ie||o||!a.length||d.x!==a[4]||d.y!==a[5]||!d.rotationX&&!d.rotationY){var F=a.length>=6,_=F?a[0]:1,j=a[1]||0,W=a[2]||0,U=F?a[3]:1;d.x=a[4]||0,d.y=a[5]||0,h=Math.sqrt(_*_+j*j),l=Math.sqrt(U*U+W*W),p=_||j?Math.atan2(j,_)*E:d.rotation||0,c=W||U?Math.atan2(W,U)*E+p:d.skewX||0,Math.abs(c)>90&&Math.abs(c)<270&&(u?(h*=-1,c+=p<=0?180:-180,p+=p<=0?180:-180):(l*=-1,c+=c<=0?180:-180)),d.scaleX=h,d.scaleY=l,d.rotation=p,d.skewX=c,Ie&&(d.rotationX=d.rotationY=d.z=0,d.perspective=m,d.scaleZ=1),d.svg&&(d.x-=d.xOrigin-(d.xOrigin*_+d.yOrigin*W),d.y-=d.yOrigin-(d.xOrigin*j+d.yOrigin*U))}d.zOrigin=g;for(n in d)d[n]<2e-5&&d[n]>-2e-5&&(d[n]=0)}return s&&(e._gsTransform=d,d.svg&&(Te&&e.style[Ce]?t.delayedCall(.001,function(){qe(e.style,Ce)}):!Te&&e.getAttribute("transform")&&t.delayedCall(.001,function(){e.removeAttribute("transform")}))),d},Ve=function(e){var t,i,s=this.data,o=-s.rotation*O,a=o+s.skewX*O,r=(Math.cos(o)*s.scaleX*1e5|0)/1e5,n=(Math.sin(o)*s.scaleX*1e5|0)/1e5,h=(Math.sin(a)*-s.scaleY*1e5|0)/1e5,l=(Math.cos(a)*s.scaleY*1e5|0)/1e5,p=this.t.style,c=this.t.currentStyle;if(c){i=n,n=-h,h=-i,t=c.filter,p.filter="";var d,u,g=this.t.offsetWidth,y=this.t.offsetHeight,f="absolute"!==c.position,b="progid:DXImageTransform.Microsoft.Matrix(M11="+r+", M12="+n+", M21="+h+", M22="+l,w=s.x+g*s.xPercent/100,v=s.y+y*s.yPercent/100;if(null!=s.ox&&(w+=(d=(s.oxp?g*s.ox*.01:s.ox)-g/2)-(d*r+(u=(s.oyp?y*s.oy*.01:s.oy)-y/2)*n),v+=u-(d*h+u*l)),b+=f?", Dx="+((d=g/2)-(d*r+(u=y/2)*n)+w)+", Dy="+(u-(d*h+u*l)+v)+")":", sizingMethod='auto expand')",-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?p.filter=t.replace(H,b):p.filter=b+" "+t,0!==e&&1!==e||1===r&&0===n&&0===h&&1===l&&(f&&-1===b.indexOf("Dx=0, Dy=0")||x.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf(t.indexOf("Alpha"))&&p.removeAttribute("filter")),!f){var k,P,B,T=m<8?1:-1;for(d=s.ieOffsetX||0,u=s.ieOffsetY||0,s.ieOffsetX=Math.round((g-((r<0?-r:r)*g+(n<0?-n:n)*y))/2+w),s.ieOffsetY=Math.round((y-((l<0?-l:l)*y+(h<0?-h:h)*g))/2+v),Se=0;Se<4;Se++)B=(i=-1!==(k=c[P=ae[Se]]).indexOf("px")?parseFloat(k):ee(this.t,P,parseFloat(k),k.replace(S,""))||0)!==s[P]?Se<2?-s.ieOffsetX:-s.ieOffsetY:Se<2?d-s.ieOffsetX:u-s.ieOffsetY,p[P]=(s[P]=Math.round(i-B*(0===Se||2===Se?1:T)))+"px"}}},Xe=V.set3DTransformRatio=V.setTransformRatio=function(e){var t,i,s,o,a,r,n,h,l,p,c,d,g,m,y,f,b,w,v,k,S,x=this.data,P=this.t.style,B=x.rotation,T=x.rotationX,G=x.rotationY,C=x.scaleX,A=x.scaleY,M=x.scaleZ,I=x.x,L=x.y,H=x.z,R=x.svg,D=x.perspective,E=x.force3D,F=x.skewY,_=x.skewX;if(F&&(_+=F,B+=F),!((1!==e&&0!==e||"auto"!==E||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&E||H||D||G||T||1!==M)||Te&&R||!Ie)B||_||R?(B*=O,k=_*O,S=1e5,i=Math.cos(B)*C,a=Math.sin(B)*C,s=Math.sin(B-k)*-A,r=Math.cos(B-k)*A,k&&"simple"===x.skewType&&(t=Math.tan(k-F*O),s*=t=Math.sqrt(1+t*t),r*=t,F&&(t=Math.tan(F*O),i*=t=Math.sqrt(1+t*t),a*=t)),R&&(I+=x.xOrigin-(x.xOrigin*i+x.yOrigin*s)+x.xOffset,L+=x.yOrigin-(x.xOrigin*a+x.yOrigin*r)+x.yOffset,Te&&(x.xPercent||x.yPercent)&&(y=this.t.getBBox(),I+=.01*x.xPercent*y.width,L+=.01*x.yPercent*y.height),I<(y=1e-6)&&I>-y&&(I=0),L<y&&L>-y&&(L=0)),v=(i*S|0)/S+","+(a*S|0)/S+","+(s*S|0)/S+","+(r*S|0)/S+","+I+","+L+")",R&&Te?this.t.setAttribute("transform","matrix("+v):P[Ce]=(x.xPercent||x.yPercent?"translate("+x.xPercent+"%,"+x.yPercent+"%) matrix(":"matrix(")+v):P[Ce]=(x.xPercent||x.yPercent?"translate("+x.xPercent+"%,"+x.yPercent+"%) matrix(":"matrix(")+C+",0,0,"+A+","+I+","+L+")";else{if(u&&(C<(y=1e-4)&&C>-y&&(C=M=2e-5),A<y&&A>-y&&(A=M=2e-5),!D||x.z||x.rotationX||x.rotationY||(D=0)),B||_)B*=O,f=i=Math.cos(B),b=a=Math.sin(B),_&&(B-=_*O,f=Math.cos(B),b=Math.sin(B),"simple"===x.skewType&&(t=Math.tan((_-F)*O),f*=t=Math.sqrt(1+t*t),b*=t,x.skewY&&(t=Math.tan(F*O),i*=t=Math.sqrt(1+t*t),a*=t))),s=-b,r=f;else{if(!(G||T||1!==M||D||R))return void(P[Ce]=(x.xPercent||x.yPercent?"translate("+x.xPercent+"%,"+x.yPercent+"%) translate3d(":"translate3d(")+I+"px,"+L+"px,"+H+"px)"+(1!==C||1!==A?" scale("+C+","+A+")":""));i=r=1,s=a=0}p=1,o=n=h=l=c=d=0,g=D?-1/D:0,m=x.zOrigin,y=1e-6,",","0",(B=G*O)&&(f=Math.cos(B),h=-(b=Math.sin(B)),c=g*-b,o=i*b,n=a*b,p=f,g*=f,i*=f,a*=f),(B=T*O)&&(t=s*(f=Math.cos(B))+o*(b=Math.sin(B)),w=r*f+n*b,l=p*b,d=g*b,o=s*-b+o*f,n=r*-b+n*f,p*=f,g*=f,s=t,r=w),1!==M&&(o*=M,n*=M,p*=M,g*=M),1!==A&&(s*=A,r*=A,l*=A,d*=A),1!==C&&(i*=C,a*=C,h*=C,c*=C),(m||R)&&(m&&(I+=o*-m,L+=n*-m,H+=p*-m+m),R&&(I+=x.xOrigin-(x.xOrigin*i+x.yOrigin*s)+x.xOffset,L+=x.yOrigin-(x.xOrigin*a+x.yOrigin*r)+x.yOffset),I<y&&I>-y&&(I="0"),L<y&&L>-y&&(L="0"),H<y&&H>-y&&(H=0)),v=x.xPercent||x.yPercent?"translate("+x.xPercent+"%,"+x.yPercent+"%) matrix3d(":"matrix3d(",v+=(i<y&&i>-y?"0":i)+","+(a<y&&a>-y?"0":a)+","+(h<y&&h>-y?"0":h),v+=","+(c<y&&c>-y?"0":c)+","+(s<y&&s>-y?"0":s)+","+(r<y&&r>-y?"0":r),T||G||1!==M?(v+=","+(l<y&&l>-y?"0":l)+","+(d<y&&d>-y?"0":d)+","+(o<y&&o>-y?"0":o),v+=","+(n<y&&n>-y?"0":n)+","+(p<y&&p>-y?"0":p)+","+(g<y&&g>-y?"0":g)+","):v+=",0,0,0,0,1,0,",v+=I+","+L+","+H+","+(D?1+-H/D:1)+")",P[Ce]=v}};(l=Le.prototype).x=l.y=l.z=l.skewX=l.skewY=l.rotation=l.rotationX=l.rotationY=l.zOrigin=l.xPercent=l.yPercent=l.xOffset=l.yOffset=0,l.scaleX=l.scaleY=l.scaleZ=1,Pe("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,i,s,a,n,h){if(s._lastParsedTransform===h)return a;s._lastParsedTransform=h;var l,p=h.scale&&"function"==typeof h.scale?h.scale:0;"function"==typeof h[i]&&(l=h[i],h[i]=t),p&&(h.scale=p(f,e));var c,d,u,g,m,b,w,v,k,S=e._gsTransform,x=e.style,P=Ge.length,B=h,T={},G=ze(e,o,!0,B.parseTransform),C=B.transform&&("function"==typeof B.transform?B.transform(f,y):B.transform);if(s._transform=G,C&&"string"==typeof C&&Ce)(d=U.style)[Ce]=C,d.display="block",d.position="absolute",j.body.appendChild(U),c=ze(U,null,!1),G.svg&&(b=G.xOrigin,w=G.yOrigin,c.x-=G.xOffset,c.y-=G.yOffset,(B.transformOrigin||B.svgOrigin)&&(C={},Ee(e,ne(B.transformOrigin),C,B.svgOrigin,B.smoothOrigin,!0),b=C.xOrigin,w=C.yOrigin,c.x-=C.xOffset-G.xOffset,c.y-=C.yOffset-G.yOffset),(b||w)&&(v=Ue(U,!0),c.x-=b-(b*v[0]+w*v[2]),c.y-=w-(b*v[1]+w*v[3]))),j.body.removeChild(U),c.perspective||(c.perspective=G.perspective),null!=B.xPercent&&(c.xPercent=le(B.xPercent,G.xPercent)),null!=B.yPercent&&(c.yPercent=le(B.yPercent,G.yPercent));else if("object"==typeof B){if(c={scaleX:le(null!=B.scaleX?B.scaleX:B.scale,G.scaleX),scaleY:le(null!=B.scaleY?B.scaleY:B.scale,G.scaleY),scaleZ:le(B.scaleZ,G.scaleZ),x:le(B.x,G.x),y:le(B.y,G.y),z:le(B.z,G.z),xPercent:le(B.xPercent,G.xPercent),yPercent:le(B.yPercent,G.yPercent),perspective:le(B.transformPerspective,G.perspective)},null!=(m=B.directionalRotation))if("object"==typeof m)for(d in m)B[d]=m[d];else B.rotation=m;"string"==typeof B.x&&-1!==B.x.indexOf("%")&&(c.x=0,c.xPercent=le(B.x,G.xPercent)),"string"==typeof B.y&&-1!==B.y.indexOf("%")&&(c.y=0,c.yPercent=le(B.y,G.yPercent)),c.rotation=pe("rotation"in B?B.rotation:"shortRotation"in B?B.shortRotation+"_short":"rotationZ"in B?B.rotationZ:G.rotation,G.rotation,"rotation",T),Ie&&(c.rotationX=pe("rotationX"in B?B.rotationX:"shortRotationX"in B?B.shortRotationX+"_short":G.rotationX||0,G.rotationX,"rotationX",T),c.rotationY=pe("rotationY"in B?B.rotationY:"shortRotationY"in B?B.shortRotationY+"_short":G.rotationY||0,G.rotationY,"rotationY",T)),c.skewX=pe(B.skewX,G.skewX),c.skewY=pe(B.skewY,G.skewY)}for(Ie&&null!=B.force3D&&(G.force3D=B.force3D,g=!0),G.skewType=B.skewType||G.skewType||r.defaultSkewType,(u=G.force3D||G.z||G.rotationX||G.rotationY||c.z||c.rotationX||c.rotationY||c.perspective)||null==B.scale||(c.scaleZ=1);--P>-1;)((C=c[k=Ge[P]]-G[k])>1e-6||C<-1e-6||null!=B[k]||null!=F[k])&&(g=!0,a=new we(G,k,G[k],C,a),k in T&&(a.e=T[k]),a.xs0=0,a.plugin=n,s._overwriteProps.push(a.n));return C=B.transformOrigin,G.svg&&(C||B.svgOrigin)&&(b=G.xOffset,w=G.yOffset,Ee(e,ne(C),c,B.svgOrigin,B.smoothOrigin),a=ve(G,"xOrigin",(S?G:c).xOrigin,c.xOrigin,a,"transformOrigin"),a=ve(G,"yOrigin",(S?G:c).yOrigin,c.yOrigin,a,"transformOrigin"),b===G.xOffset&&w===G.yOffset||(a=ve(G,"xOffset",S?b:G.xOffset,G.xOffset,a,"transformOrigin"),a=ve(G,"yOffset",S?w:G.yOffset,G.yOffset,a,"transformOrigin")),C="0px 0px"),(C||Ie&&u&&G.zOrigin)&&(Ce?(g=!0,k=Me,C=(C||$(e,k,o,!1,"50% 50%"))+"",(a=new we(x,k,0,0,a,-1,"transformOrigin")).b=x[k],a.plugin=n,Ie?(d=G.zOrigin,C=C.split(" "),G.zOrigin=(C.length>2&&(0===d||"0px"!==C[2])?parseFloat(C[2]):d)||0,a.xs0=a.e=C[0]+" "+(C[1]||"50%")+" 0px",(a=new we(G,"zOrigin",0,0,a,-1,a.n)).b=d,a.xs0=a.e=G.zOrigin):a.xs0=a.e=C):ne(C+"",G)),g&&(s._transformType=G.svg&&Te||!u&&3!==this._transformType?2:3),l&&(h[i]=l),p&&(h.scale=p),a},prefix:!0}),Pe("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Pe("borderRadius",{defaultValue:"0px",parser:function(e,t,i,a,r,n){t=this.format(t);var h,l,p,c,d,u,g,m,y,f,b,w,v,k,S,x,P=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],B=e.style;for(y=parseFloat(e.offsetWidth),f=parseFloat(e.offsetHeight),h=t.split(" "),l=0;l<P.length;l++)this.p.indexOf("border")&&(P[l]=J(P[l])),-1!==(d=c=$(e,P[l],o,!1,"0px")).indexOf(" ")&&(d=(c=d.split(" "))[0],c=c[1]),u=p=h[l],g=parseFloat(d),w=d.substr((g+"").length),(v="="===u.charAt(1))?(m=parseInt(u.charAt(0)+"1",10),u=u.substr(2),m*=parseFloat(u),b=u.substr((m+"").length-(m<0?1:0))||""):(m=parseFloat(u),b=u.substr((m+"").length)),""===b&&(b=s[i]||w),b!==w&&(k=ee(e,"borderLeft",g,w),S=ee(e,"borderTop",g,w),"%"===b?(d=k/y*100+"%",c=S/f*100+"%"):"em"===b?(d=k/(x=ee(e,"borderLeft",1,"em"))+"em",c=S/x+"em"):(d=k+"px",c=S+"px"),v&&(u=parseFloat(d)+m+b,p=parseFloat(c)+m+b)),r=ke(B,P[l],d+" "+c,u+" "+p,!1,"0px",r);return r},prefix:!0,formatter:ye("0px 0px 0px 0px",!1,!0)}),Pe("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,i,s,a,r){return ke(e.style,i,this.format($(e,i,o,!1,"0px 0px")),this.format(t),!1,"0px",a)},prefix:!0,formatter:ye("0px 0px",!1,!0)}),Pe("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,i,s,a,r){var n,h,l,p,c,d,u="background-position",g=o||Q(e,null),y=this.format((g?m?g.getPropertyValue(u+"-x")+" "+g.getPropertyValue(u+"-y"):g.getPropertyValue(u):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),f=this.format(t);if(-1!==y.indexOf("%")!=(-1!==f.indexOf("%"))&&f.split(",").length<2&&(d=$(e,"backgroundImage").replace(A,""))&&"none"!==d){for(n=y.split(" "),h=f.split(" "),z.setAttribute("src",d),l=2;--l>-1;)(p=-1!==(y=n[l]).indexOf("%"))!==(-1!==h[l].indexOf("%"))&&(c=0===l?e.offsetWidth-z.width:e.offsetHeight-z.height,n[l]=p?parseFloat(y)/100*c+"px":parseFloat(y)/c*100+"%");y=n.join(" ")}return this.parseComplex(e.style,y,f,a,r)},formatter:ne}),Pe("backgroundSize",{defaultValue:"0 0",formatter:function(e){return e+="",ne(-1===e.indexOf(" ")?e+" "+e:e)}}),Pe("perspective",{defaultValue:"0px",prefix:!0}),Pe("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Pe("transformStyle",{prefix:!0}),Pe("backfaceVisibility",{prefix:!0}),Pe("userSelect",{prefix:!0}),Pe("margin",{parser:fe("marginTop,marginRight,marginBottom,marginLeft")}),Pe("padding",{parser:fe("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Pe("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,i,s,a,r){var n,h,l;return m<9?(h=e.currentStyle,l=m<8?" ":",",n="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",t=this.format(t).split(",").join(l)):(n=this.format($(e,this.p,o,!1,this.dflt)),t=this.format(t)),this.parseComplex(e.style,n,t,a,r)}}),Pe("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Pe("autoRound,strictUnits",{parser:function(e,t,i,s,o){return o}}),Pe("border",{defaultValue:"0px solid #000",parser:function(e,t,i,s,a,r){var n=$(e,"borderTopWidth",o,!1,"0px"),h=this.format(t).split(" "),l=h[0].replace(S,"");return"px"!==l&&(n=parseFloat(n)/ee(e,"borderTopWidth",1,l)+l),this.parseComplex(e.style,this.format(n+" "+$(e,"borderTopStyle",o,!1,"solid")+" "+$(e,"borderTopColor",o,!1,"#000")),h.join(" "),a,r)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(me)||["#000"])[0]}}),Pe("borderWidth",{parser:fe("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Pe("float,cssFloat,styleFloat",{parser:function(e,t,i,s,o,a){var r=e.style,n="cssFloat"in r?"cssFloat":"styleFloat";return new we(r,n,0,0,o,-1,i,!1,0,r[n],t)}});var Ne=function(e){var t,i=this.t,s=i.filter||$(this.data,"filter")||"",o=this.s+this.c*e|0;100===o&&(-1===s.indexOf("atrix(")&&-1===s.indexOf("radient(")&&-1===s.indexOf("oader(")?(i.removeAttribute("filter"),t=!$(this.data,"filter")):(i.filter=s.replace(B,""),t=!0)),t||(this.xn1&&(i.filter=s=s||"alpha(opacity="+o+")"),-1===s.indexOf("pacity")?0===o&&this.xn1||(i.filter=s+" alpha(opacity="+o+")"):i.filter=s.replace(x,"opacity="+o))};Pe("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,i,s,a,r){var n=parseFloat($(e,"opacity",o,!1,"1")),h=e.style,l="autoAlpha"===i;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+n),l&&1===n&&"hidden"===$(e,"visibility",o)&&0!==t&&(n=0),N?a=new we(h,"opacity",n,t-n,a):((a=new we(h,"opacity",100*n,100*(t-n),a)).xn1=l?1:0,h.zoom=1,a.type=2,a.b="alpha(opacity="+a.s+")",a.e="alpha(opacity="+(a.s+a.c)+")",a.data=e,a.plugin=r,a.setRatio=Ne),l&&((a=new we(h,"visibility",0,0,a,-1,null,!1,0,0!==n?"inherit":"hidden",0===t?"hidden":"inherit")).xs0="inherit",s._overwriteProps.push(a.n),s._overwriteProps.push(i)),a}});var qe=function(e,t){t&&(e.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),e.removeProperty(t.replace(G,"-$1").toLowerCase())):e.removeAttribute(t))},Ye=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,i=this.t.style;t;)t.v?i[t.p]=t.v:qe(i,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Pe("className",{parser:function(e,t,s,a,r,n,h){var l,p,c,d,u,g=e.getAttribute("class")||"",m=e.style.cssText;if(r=a._classNamePT=new we(e,s,0,0,r,2),r.setRatio=Ye,r.pr=-11,i=!0,r.b=g,p=ie(e,o),c=e._gsClassPT){for(d={},u=c.data;u;)d[u.p]=1,u=u._next;c.setRatio(1)}return e._gsClassPT=r,r.e="="!==t.charAt(1)?t:g.replace(new RegExp("(?:\\s|^)"+t.substr(2)+"(?![\\w-])"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),e.setAttribute("class",r.e),l=se(e,p,ie(e),h,d),e.setAttribute("class",g),r.data=l.firstMPT,e.style.cssText=m,r=r.xfirst=a.parse(e,l.difs,r,n)}});var Ke=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,i,s,o,a,r=this.t.style,n=h.transform.parse;if("all"===this.e)r.cssText="",o=!0;else for(s=(t=this.e.split(" ").join("").split(",")).length;--s>-1;)i=t[s],h[i]&&(h[i].parse===n?o=!0:i="transformOrigin"===i?Me:h[i].p),qe(r,i);o&&(qe(r,Ce),(a=this.t._gsTransform)&&(a.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(Pe("clearProps",{parser:function(e,t,s,o,a){return a=new we(e,s,0,0,a,2),a.setRatio=Ke,a.e=t,a.pr=-10,a.data=o._tween,i=!0,a}}),l="bezier,throwProps,physicsProps,physics2D".split(","),Se=l.length;Se--;)Be(l[Se]);(l=r.prototype)._firstPT=l._lastParsedTransform=l._transform=null,l._onInitTween=function(e,t,n,l){if(!e.nodeType)return!1;this._target=y=e,this._tween=n,this._vars=t,f=l,p=t.autoRound,i=!1,s=t.suffixMap||r.suffixMap,o=Q(e,""),a=this._overwriteProps;var u,m,b,w,v,k,S,x,B,T=e.style;if(c&&""===T.zIndex&&("auto"!==(u=$(e,"zIndex",o))&&""!==u||this._addLazySet(T,"zIndex",0)),"string"==typeof t&&(w=T.cssText,u=ie(e,o),T.cssText=w+";"+t,u=se(e,u,ie(e)).difs,!N&&P.test(t)&&(u.opacity=parseFloat(RegExp.$1)),t=u,T.cssText=w),t.className?this._firstPT=m=h.className.parse(e,t.className,"className",this,null,null,t):this._firstPT=m=this.parse(e,t,null),this._transformType){for(B=3===this._transformType,Ce?d&&(c=!0,""===T.zIndex&&("auto"!==(S=$(e,"zIndex",o))&&""!==S||this._addLazySet(T,"zIndex",0)),g&&this._addLazySet(T,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(B?"visible":"hidden"))):T.zoom=1,b=m;b&&b._next;)b=b._next;x=new we(e,"transform",0,0,null,2),this._linkCSSP(x,null,b),x.setRatio=Ce?Xe:Ve,x.data=this._transform||ze(e,o,!0),x.tween=n,x.pr=-1,a.pop()}if(i){for(;m;){for(k=m._next,b=w;b&&b.pr>m.pr;)b=b._next;(m._prev=b?b._prev:v)?m._prev._next=m:w=m,(m._next=b)?b._prev=m:v=m,m=k}this._firstPT=w}return!0},l.parse=function(e,t,i,a){var r,n,l,c,d,u,g,m,b,w,v=e.style;for(r in t)"function"==typeof(u=t[r])&&(u=u(f,y)),(n=h[r])?i=n.parse(e,u,r,this,i,a,t):(d=$(e,r,o)+"",b="string"==typeof u,"color"===r||"fill"===r||"stroke"===r||-1!==r.indexOf("Color")||b&&T.test(u)?(b||(u=((u=ue(u)).length>3?"rgba(":"rgb(")+u.join(",")+")"),i=ke(v,r,d,u,!0,"transparent",i,0,a)):b&&D.test(u)?i=ke(v,r,d,u,!0,null,i,0,a):(g=(l=parseFloat(d))||0===l?d.substr((l+"").length):"",""!==d&&"auto"!==d||("width"===r||"height"===r?(l=re(e,r,o),g="px"):"left"===r||"top"===r?(l=te(e,r,o),g="px"):(l="opacity"!==r?0:1,g="")),(w=b&&"="===u.charAt(1))?(c=parseInt(u.charAt(0)+"1",10),u=u.substr(2),c*=parseFloat(u),m=u.replace(S,"")):(c=parseFloat(u),m=b?u.replace(S,""):""),""===m&&(m=r in s?s[r]:g),u=c||0===c?(w?c+l:c)+m:t[r],g!==m&&""!==m&&(c||0===c)&&l&&(l=ee(e,r,l,g),"%"===m?(l/=ee(e,r,100,"%")/100,!0!==t.strictUnits&&(d=l+"%")):"em"===m||"rem"===m||"vw"===m||"vh"===m?l/=ee(e,r,1,m):"px"!==m&&(c=ee(e,r,c,m),m="px"),w&&(c||0===c)&&(u=c+l+m)),w&&(c+=l),!l&&0!==l||!c&&0!==c?void 0!==v[r]&&(u||u+""!="NaN"&&null!=u)?(i=new we(v,r,c||l||0,0,i,-1,r,!1,0,d,u)).xs0="none"!==u||"display"!==r&&-1===r.indexOf("Style")?u:d:Y("invalid "+r+" tween value: "+t[r]):(i=new we(v,r,l,c-l,i,0,r,!1!==p&&("px"===m||"zIndex"===r),0,d,u)).xs0=m)),a&&i&&!i.plugin&&(i.plugin=a);return i},l.setRatio=function(e){var t,i,s,o=this._firstPT;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;o;){if(t=o.c*e+o.s,o.r?t=Math.round(t):t<1e-6&&t>-1e-6&&(t=0),o.type)if(1===o.type)if(2===(s=o.l))o.t[o.p]=o.xs0+t+o.xs1+o.xn1+o.xs2;else if(3===s)o.t[o.p]=o.xs0+t+o.xs1+o.xn1+o.xs2+o.xn2+o.xs3;else if(4===s)o.t[o.p]=o.xs0+t+o.xs1+o.xn1+o.xs2+o.xn2+o.xs3+o.xn3+o.xs4;else if(5===s)o.t[o.p]=o.xs0+t+o.xs1+o.xn1+o.xs2+o.xn2+o.xs3+o.xn3+o.xs4+o.xn4+o.xs5;else{for(i=o.xs0+t+o.xs1,s=1;s<o.l;s++)i+=o["xn"+s]+o["xs"+(s+1)];o.t[o.p]=i}else-1===o.type?o.t[o.p]=o.xs0:o.setRatio&&o.setRatio(e);else o.t[o.p]=t+o.xs0;o=o._next}else for(;o;)2!==o.type?o.t[o.p]=o.b:o.setRatio(e),o=o._next;else for(;o;){if(2!==o.type)if(o.r&&-1!==o.type)if(t=Math.round(o.s+o.c),o.type){if(1===o.type){for(s=o.l,i=o.xs0+t+o.xs1,s=1;s<o.l;s++)i+=o["xn"+s]+o["xs"+(s+1)];o.t[o.p]=i}}else o.t[o.p]=t+o.xs0;else o.t[o.p]=o.e;else o.setRatio(e);o=o._next}},l._enableTransforms=function(e){this._transform=this._transform||ze(this._target,o,!0),this._transformType=this._transform.svg&&Te||!e&&3!==this._transformType?2:3};var Ze=function(e){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};l._addLazySet=function(e,t,i){var s=this._firstPT=new we(e,t,0,0,this._firstPT,2);s.e=i,s.setRatio=Ze,s.data=this},l._linkCSSP=function(e,t,i,s){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,s=!0),i?i._next=e:s||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=i),e},l._mod=function(e){for(var t=this._firstPT;t;)"function"==typeof e[t.p]&&e[t.p]===Math.round&&(t.r=1),t=t._next},l._kill=function(t){var i,s,o,a=t;if(t.autoAlpha||t.alpha){a={};for(s in t)a[s]=t[s];a.opacity=1,a.autoAlpha&&(a.visibility=1)}for(t.className&&(i=this._classNamePT)&&((o=i.xfirst)&&o._prev?this._linkCSSP(o._prev,i._next,o._prev._prev):o===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,o._prev),this._classNamePT=null),i=this._firstPT;i;)i.plugin&&i.plugin!==s&&i.plugin._kill&&(i.plugin._kill(t),s=i.plugin),i=i._next;return e.prototype._kill.call(this,a)};var Je=function(e,t,i){var s,o,a,r;if(e.slice)for(o=e.length;--o>-1;)Je(e[o],t,i);else for(o=(s=e.childNodes).length;--o>-1;)r=(a=s[o]).type,a.style&&(t.push(ie(a)),i&&i.push(a)),1!==r&&9!==r&&11!==r||!a.childNodes.length||Je(a,t,i)};return r.cascadeTo=function(e,i,s){var o,a,r,n,h=t.to(e,i,s),l=[h],p=[],c=[],d=[],u=t._internals.reservedProps;for(e=h._targets||h.target,Je(e,p,d),h.render(i,!0,!0),Je(e,c),h.render(0,!0,!0),h._enabled(!0),o=d.length;--o>-1;)if((a=se(d[o],p[o],c[o])).firstMPT){a=a.difs;for(r in s)u[r]&&(a[r]=s[r]);n={};for(r in a)n[r]=p[o][r];l.push(t.fromTo(d[o],i,n,a))}return l},e.activate([r]),r},!0),function(){var e=function(e){for(;e;)e.f||e.blob||(e.m=Math.round),e=e._next},t=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(e,t,i){return this._tween=i,!0}}).prototype;t._onInitAllProps=function(){for(var t,i,s,o=this._tween,a=o.vars.roundProps.join?o.vars.roundProps:o.vars.roundProps.split(","),r=a.length,n={},h=o._propLookup.roundProps;--r>-1;)n[a[r]]=Math.round;for(r=a.length;--r>-1;)for(t=a[r],i=o._firstPT;i;)s=i._next,i.pg?i.t._mod(n):i.n===t&&(2===i.f&&i.t?e(i.t._firstPT):(this._add(i.t,t,i.s,i.c),s&&(s._prev=i._prev),i._prev?i._prev._next=s:o._firstPT===i&&(o._firstPT=s),i._next=i._prev=null,o._propLookup[t]=h)),i=s;return!1},t._add=function(e,t,i,s){this._addTween(e,t,i,i+s,t,Math.round),this._overwriteProps.push(t)}}(),_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.6.0",init:function(e,t,i,s){var o,a;if("function"!=typeof e.setAttribute)return!1;for(o in t)"function"==typeof(a=t[o])&&(a=a(s,e)),this._addTween(e,"setAttribute",e.getAttribute(o)+"",a+"",o,!1,o),this._overwriteProps.push(o);return!0}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.3.0",API:2,init:function(e,t,i,s){"object"!=typeof t&&(t={rotation:t}),this.finals={};var o,a,r,n,h,l,p=!0===t.useRadians?2*Math.PI:360;for(o in t)"useRadians"!==o&&("function"==typeof(n=t[o])&&(n=n(s,e)),a=(l=(n+"").split("_"))[0],r=parseFloat("function"!=typeof e[o]?e[o]:e[o.indexOf("set")||"function"!=typeof e["get"+o.substr(3)]?o:"get"+o.substr(3)]()),h=(n=this.finals[o]="string"==typeof a&&"="===a.charAt(1)?r+parseInt(a.charAt(0)+"1",10)*Number(a.substr(2)):Number(a)||0)-r,l.length&&(-1!==(a=l.join("_")).indexOf("short")&&(h%=p)!==h%(p/2)&&(h=h<0?h+p:h-p),-1!==a.indexOf("_cw")&&h<0?h=(h+9999999999*p)%p-(h/p|0)*p:-1!==a.indexOf("ccw")&&h>0&&(h=(h-9999999999*p)%p-(h/p|0)*p)),(h>1e-6||h<-1e-6)&&(this._addTween(e,o,r,r+h,o),this._overwriteProps.push(o)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(e){var t,i,s,o=_gsScope.GreenSockGlobals||_gsScope,a=o.com.greensock,r=2*Math.PI,n=Math.PI/2,h=a._class,l=function(t,i){var s=h("easing."+t,function(){},!0),o=s.prototype=new e;return o.constructor=s,o.getRatio=i,s},p=e.register||function(){},c=function(e,t,i,s,o){var a=h("easing."+e,{easeOut:new t,easeIn:new i,easeInOut:new s},!0);return p(a,e),a},d=function(e,t,i){this.t=e,this.v=t,i&&(this.next=i,i.prev=this,this.c=i.v-t,this.gap=i.t-e)},u=function(t,i){var s=h("easing."+t,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),o=s.prototype=new e;return o.constructor=s,o.getRatio=i,o.config=function(e){return new s(e)},s},g=c("Back",u("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),u("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),u("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),m=h("easing.SlowMo",function(e,t,i){t=t||0===t?t:.7,null==e?e=.7:e>1&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=!0===i},!0),y=m.prototype=new e;return y.constructor=m,y.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},m.ease=new m(.7,.7),y.config=m.config=function(e,t,i){return new m(e,t,i)},t=h("easing.SteppedEase",function(e){e=e||1,this._p1=1/e,this._p2=e+1},!0),y=t.prototype=new e,y.constructor=t,y.getRatio=function(e){return e<0?e=0:e>=1&&(e=.999999999),(this._p2*e>>0)*this._p1},y.config=t.config=function(e){return new t(e)},i=h("easing.RoughEase",function(t){for(var i,s,o,a,r,n,h=(t=t||{}).taper||"none",l=[],p=0,c=0|(t.points||20),u=c,g=!1!==t.randomize,m=!0===t.clamp,y=t.template instanceof e?t.template:null,f="number"==typeof t.strength?.4*t.strength:.4;--u>-1;)i=g?Math.random():1/c*u,s=y?y.getRatio(i):i,o="none"===h?f:"out"===h?(a=1-i)*a*f:"in"===h?i*i*f:i<.5?(a=2*i)*a*.5*f:(a=2*(1-i))*a*.5*f,g?s+=Math.random()*o-.5*o:u%2?s+=.5*o:s-=.5*o,m&&(s>1?s=1:s<0&&(s=0)),l[p++]={x:i,y:s};for(l.sort(function(e,t){return e.x-t.x}),n=new d(1,1,null),u=c;--u>-1;)r=l[u],n=new d(r.x,r.y,n);this._prev=new d(0,0,0!==n.t?n:n.next)},!0),y=i.prototype=new e,y.constructor=i,y.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&e<=t.t;)t=t.prev;return this._prev=t,t.v+(e-t.t)/t.gap*t.c},y.config=function(e){return new i(e)},i.ease=new i,c("Bounce",l("BounceOut",function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),l("BounceIn",function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),l("BounceInOut",function(e){var t=e<.5;return(e=t?1-2*e:2*e-1)<1/2.75?e*=7.5625*e:e=e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),c("Circ",l("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),l("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),l("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),s=function(t,i,s){var o=h("easing."+t,function(e,t){this._p1=e>=1?e:1,this._p2=(t||s)/(e<1?e:1),this._p3=this._p2/r*(Math.asin(1/this._p1)||0),this._p2=r/this._p2},!0),a=o.prototype=new e;return a.constructor=o,a.getRatio=i,a.config=function(e,t){return new o(e,t)},o},c("Elastic",s("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),s("ElasticIn",function(e){return-this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)},.3),s("ElasticInOut",function(e){return(e*=2)<1?this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1},.45)),c("Expo",l("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),l("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),l("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),c("Sine",l("SineOut",function(e){return Math.sin(e*n)}),l("SineIn",function(e){return 1-Math.cos(e*n)}),l("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)})),h("easing.EaseLookup",{find:function(t){return e.map[t]}},!0),p(o.SlowMo,"SlowMo","ease,"),p(i,"RoughEase","ease,"),p(t,"SteppedEase","ease,"),g},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e,t){"use strict";var i={},s=e.document,o=e.GreenSockGlobals=e.GreenSockGlobals||e;if(!o.TweenLite){var a,r,n,h,l,p=function(e){var t,i=e.split("."),s=o;for(t=0;t<i.length;t++)s[i[t]]=s=s[i[t]]||{};return s},c=p("com.greensock"),d=function(e){var t,i=[],s=e.length;for(t=0;t!==s;i.push(e[t++]));return i},u=function(){},g=function(){var e=Object.prototype.toString,t=e.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&e.call(i)===t)}}(),m={},y=function(t,s,a,r){this.sc=m[t]?m[t].sc:[],m[t]=this,this.gsClass=null,this.func=a;var n=[];this.check=function(h){for(var l,c,d,u,g,f=s.length,b=f;--f>-1;)(l=m[s[f]]||new y(s[f],[])).gsClass?(n[f]=l.gsClass,b--):h&&l.sc.push(this);if(0===b&&a){if(c=("com.greensock."+t).split("."),d=c.pop(),u=p(c.join("."))[d]=this.gsClass=a.apply(a,n),r)if(o[d]=i[d]=u,!(g="undefined"!=typeof module&&module.exports)&&"function"==typeof define&&define.amd)define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+t.split(".").pop(),[],function(){return u});else if(g)if("TweenMax"===t){module.exports=i.TweenMax=u;for(f in i)u[f]=i[f]}else i.TweenMax&&(i.TweenMax[d]=u);for(f=0;f<this.sc.length;f++)this.sc[f].check()}},this.check(!0)},f=e._gsDefine=function(e,t,i,s){return new y(e,t,i,s)},b=c._class=function(e,t,i){return t=t||function(){},f(e,[],function(){return t},i),t};f.globals=o;var w=[0,0,1,1],v=b("easing.Ease",function(e,t,i,s){this._func=e,this._type=i||0,this._power=s||0,this._params=t?w.concat(t):w},!0),k=v.map={},S=v.register=function(e,t,i,s){for(var o,a,r,n,h=t.split(","),l=h.length,p=(i||"easeIn,easeOut,easeInOut").split(",");--l>-1;)for(a=h[l],o=s?b("easing."+a,null,!0):c.easing[a]||{},r=p.length;--r>-1;)n=p[r],k[a+"."+n]=k[n+a]=o[n]=e.getRatio?e:e[n]||new e};for((n=v.prototype)._calcEnd=!1,n.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,i=this._power,s=1===t?1-e:2===t?e:e<.5?2*e:2*(1-e);return 1===i?s*=s:2===i?s*=s*s:3===i?s*=s*s*s:4===i&&(s*=s*s*s*s),1===t?1-s:2===t?s:e<.5?s/2:1-s/2},r=(a=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--r>-1;)n=a[r]+",Power"+r,S(new v(null,null,1,r),n,"easeOut",!0),S(new v(null,null,2,r),n,"easeIn"+(0===r?",easeNone":"")),S(new v(null,null,3,r),n,"easeInOut");k.linear=c.easing.Linear.easeIn,k.swing=c.easing.Quad.easeInOut;var x=b("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});(n=x.prototype).addEventListener=function(e,t,i,s,o){o=o||0;var a,r,n=this._listeners[e],p=0;for(this!==h||l||h.wake(),null==n&&(this._listeners[e]=n=[]),r=n.length;--r>-1;)(a=n[r]).c===t&&a.s===i?n.splice(r,1):0===p&&a.pr<o&&(p=r+1);n.splice(p,0,{c:t,s:i,up:s,pr:o})},n.removeEventListener=function(e,t){var i,s=this._listeners[e];if(s)for(i=s.length;--i>-1;)if(s[i].c===t)return void s.splice(i,1)},n.dispatchEvent=function(e){var t,i,s,o=this._listeners[e];if(o)for((t=o.length)>1&&(o=o.slice(0)),i=this._eventTarget;--t>-1;)(s=o[t])&&(s.up?s.c.call(s.s||i,{type:e,target:i}):s.c.call(s.s||i))};var P=e.requestAnimationFrame,B=e.cancelAnimationFrame,T=Date.now||function(){return(new Date).getTime()},G=T();for(r=(a=["ms","moz","webkit","o"]).length;--r>-1&&!P;)P=e[a[r]+"RequestAnimationFrame"],B=e[a[r]+"CancelAnimationFrame"]||e[a[r]+"CancelRequestAnimationFrame"];b("Ticker",function(e,t){var i,o,a,r,n,p=this,c=T(),d=!(!1===t||!P)&&"auto",g=500,m=33,y=function(e){var t,s,h=T()-G;h>g&&(c+=h-m),G+=h,p.time=(G-c)/1e3,t=p.time-n,(!i||t>0||!0===e)&&(p.frame++,n+=t+(t>=r?.004:r-t),s=!0),!0!==e&&(a=o(y)),s&&p.dispatchEvent("tick")};x.call(p),p.time=p.frame=0,p.tick=function(){y(!0)},p.lagSmoothing=function(e,t){g=e||1e10,m=Math.min(t,g,0)},p.sleep=function(){null!=a&&(d&&B?B(a):clearTimeout(a),o=u,a=null,p===h&&(l=!1))},p.wake=function(e){null!==a?p.sleep():e?c+=-G+(G=T()):p.frame>10&&(G=T()-g+5),o=0===i?u:d&&P?P:function(e){return setTimeout(e,1e3*(n-p.time)+1|0)},p===h&&(l=!0),y(2)},p.fps=function(e){if(!arguments.length)return i;r=1/((i=e)||60),n=this.time+r,p.wake()},p.useRAF=function(e){if(!arguments.length)return d;p.sleep(),d=e,p.fps(i)},p.fps(e),setTimeout(function(){"auto"===d&&p.frame<5&&"hidden"!==s.visibilityState&&p.useRAF(!1)},1500)}),(n=c.Ticker.prototype=new c.events.EventDispatcher).constructor=c.Ticker;var C=b("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=!0===t.immediateRender,this.data=t.data,this._reversed=!0===t.reversed,q){l||h.wake();var i=this.vars.useFrames?N:q;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});h=C.ticker=new c.Ticker,(n=C.prototype)._dirty=n._gc=n._initted=n._paused=!1,n._totalTime=n._time=0,n._rawPrevTime=-1,n._next=n._last=n._onUpdate=n._timeline=n.timeline=null,n._paused=!1;var A=function(){l&&T()-G>2e3&&h.wake(),setTimeout(A,2e3)};A(),n.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},n.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},n.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},n.seek=function(e,t){return this.totalTime(Number(e),!1!==t)},n.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,!1!==t,!0)},n.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},n.render=function(e,t,i){},n.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},n.isActive=function(){var e,t=this._timeline,i=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime(!0))>=i&&e<i+this.totalDuration()/this._timeScale},n._enabled=function(e,t){return l||h.wake(),this._gc=!e,this._active=this.isActive(),!0!==t&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},n._kill=function(e,t){return this._enabled(!1,!1)},n.kill=function(e,t){return this._kill(e,t),this},n._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},n._swapSelfInParams=function(e){for(var t=e.length,i=e.concat();--t>-1;)"{self}"===e[t]&&(i[t]=this);return i},n._callback=function(e){var t=this.vars,i=t[e],s=t[e+"Params"],o=t[e+"Scope"]||t.callbackScope||this;switch(s?s.length:0){case 0:i.call(o);break;case 1:i.call(o,s[0]);break;case 2:i.call(o,s[0],s[1]);break;default:i.apply(o,s)}},n.eventCallback=function(e,t,i,s){if("on"===(e||"").substr(0,2)){var o=this.vars;if(1===arguments.length)return o[e];null==t?delete o[e]:(o[e]=t,o[e+"Params"]=g(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,o[e+"Scope"]=s),"onUpdate"===e&&(this._onUpdate=t)}return this},n.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},n.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},n.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},n.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},n.totalTime=function(e,t,i){if(l||h.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(e<0&&!i&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var s=this._totalDuration,o=this._timeline;if(e>s&&!i&&(e=s),this._startTime=(this._paused?this._pauseTime:o._time)-(this._reversed?s-e:e)/this._timeScale,o._dirty||this._uncache(!1),o._timeline)for(;o._timeline;)o._timeline._time!==(o._startTime+o._totalTime)/o._timeScale&&o.totalTime(o._totalTime,!0),o=o._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===e&&0!==this._duration||(R.length&&K(),this.render(e,t,!1),R.length&&K())}return this},n.progress=n.totalProgress=function(e,t){var i=this.duration();return arguments.length?this.totalTime(i*e,t):i?this._time/i:this.ratio},n.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},n.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},n.timeScale=function(e){if(!arguments.length)return this._timeScale;if(e=e||1e-10,this._timeline&&this._timeline.smoothChildTiming){var t=this._pauseTime,i=t||0===t?t:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/e}return this._timeScale=e,this._uncache(!1)},n.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},n.paused=function(e){if(!arguments.length)return this._paused;var t,i,s=this._timeline;return e!=this._paused&&s&&(l||e||h.wake(),i=(t=s.rawTime())-this._pauseTime,!e&&s.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==i&&this._initted&&this.duration()&&(t=s.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this};var M=b("core.SimpleTimeline",function(e){C.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});(n=M.prototype=new C).constructor=M,n.kill()._gc=!1,n._first=n._last=n._recent=null,n._sortChildren=!1,n.add=n.insert=function(e,t,i,s){var o,a;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),o=this._last,this._sortChildren)for(a=e._startTime;o&&o._startTime>a;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=o,this._recent=e,this._timeline&&this._uncache(!0),this},n._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},n.render=function(e,t,i){var s,o=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;o;)s=o._next,(o._active||e>=o._startTime&&!o._paused)&&(o._reversed?o.render((o._dirty?o.totalDuration():o._totalDuration)-(e-o._startTime)*o._timeScale,t,i):o.render((e-o._startTime)*o._timeScale,t,i)),o=s},n.rawTime=function(){return l||h.wake(),this._totalTime};var I=b("TweenLite",function(t,i,s){if(C.call(this,i,s),this.render=I.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:I.selector(t)||t;var o,a,r,n=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?X[I.defaultOverwrite]:"number"==typeof h?h>>0:X[h],(n||t instanceof Array||t.push&&g(t))&&"number"!=typeof t[0])for(this._targets=r=d(t),this._propLookup=[],this._siblings=[],o=0;o<r.length;o++)(a=r[o])?"string"!=typeof a?a.length&&a!==e&&a[0]&&(a[0]===e||a[0].nodeType&&a[0].style&&!a.nodeType)?(r.splice(o--,1),this._targets=r=r.concat(d(a))):(this._siblings[o]=Z(a,this,!1),1===h&&this._siblings[o].length>1&&Q(a,this,null,1,this._siblings[o])):"string"==typeof(a=r[o--]=I.selector(a))&&r.splice(o+1,1):r.splice(o--,1);else this._propLookup={},this._siblings=Z(t,this,!1),1===h&&this._siblings.length>1&&Q(t,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1e-10,this.render(Math.min(0,-this._delay)))},!0),L=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)},H=function(e,t){var i,s={};for(i in e)V[i]||i in t&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!W[i]||W[i]&&W[i]._autoCSS)||(s[i]=e[i],delete e[i]);e.css=s};(n=I.prototype=new C).constructor=I,n.kill()._gc=!1,n.ratio=0,n._firstPT=n._targets=n._overwrittenProps=n._startAt=null,n._notifyPluginsOfEnabled=n._lazy=!1,I.version="1.19.1",I.defaultEase=n._ease=new v(null,null,1,1),I.defaultOverwrite="auto",I.ticker=h,I.autoSleep=120,I.lagSmoothing=function(e,t){h.lagSmoothing(e,t)},I.selector=e.$||e.jQuery||function(t){var i=e.$||e.jQuery;return i?(I.selector=i,i(t)):void 0===s?t:s.querySelectorAll?s.querySelectorAll(t):s.getElementById("#"===t.charAt(0)?t.substr(1):t)};var R=[],D={},O=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,E=function(e){for(var t,i=this._firstPT;i;)t=i.blob?1===e?this.end:e?this.join(""):this.start:i.c*e+i.s,i.m?t=i.m(t,this._target||i.t):t<1e-6&&t>-1e-6&&!i.blob&&(t=0),i.f?i.fp?i.t[i.p](i.fp,t):i.t[i.p](t):i.t[i.p]=t,i=i._next},F=function(e,t,i,s){var o,a,r,n,h,l,p,c=[],d=0,u="",g=0;for(c.start=e,c.end=t,e=c[0]=e+"",t=c[1]=t+"",i&&(i(c),e=c[0],t=c[1]),c.length=0,o=e.match(O)||[],a=t.match(O)||[],s&&(s._next=null,s.blob=1,c._firstPT=c._applyPT=s),h=a.length,n=0;n<h;n++)p=a[n],u+=(l=t.substr(d,t.indexOf(p,d)-d))||!n?l:",",d+=l.length,g?g=(g+1)%5:"rgba("===l.substr(-5)&&(g=1),p===o[n]||o.length<=n?u+=p:(u&&(c.push(u),u=""),r=parseFloat(o[n]),c.push(r),c._firstPT={_next:c._firstPT,t:c,p:c.length-1,s:r,c:("="===p.charAt(1)?parseInt(p.charAt(0)+"1",10)*parseFloat(p.substr(2)):parseFloat(p)-r)||0,f:0,m:g&&g<4?Math.round:0}),d+=p.length;return(u+=t.substr(d))&&c.push(u),c.setRatio=E,c},_=function(e,t,i,s,o,a,r,n,h){"function"==typeof s&&(s=s(h||0,e));var l=typeof e[t],p="function"!==l?"":t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),c="get"!==i?i:p?r?e[p](r):e[p]():e[t],d="string"==typeof s&&"="===s.charAt(1),u={t:e,p:t,s:c,f:"function"===l,pg:0,n:o||t,m:a?"function"==typeof a?a:Math.round:0,pr:0,c:d?parseInt(s.charAt(0)+"1",10)*parseFloat(s.substr(2)):parseFloat(s)-c||0};if(("number"!=typeof c||"number"!=typeof s&&!d)&&(r||isNaN(c)||!d&&isNaN(s)||"boolean"==typeof c||"boolean"==typeof s?(u.fp=r,u={t:F(c,d?u.s+u.c:s,n||I.defaultStringFilter,u),p:"setRatio",s:0,c:1,f:2,pg:0,n:o||t,pr:0,m:0}):(u.s=parseFloat(c),d||(u.c=parseFloat(s)-u.s||0))),u.c)return(u._next=this._firstPT)&&(u._next._prev=u),this._firstPT=u,u},j=I._internals={isArray:g,isSelector:L,lazyTweens:R,blobDif:F},W=I._plugins={},U=j.tweenLookup={},z=0,V=j.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1},X={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},N=C._rootFramesTimeline=new M,q=C._rootTimeline=new M,Y=30,K=j.lazyRender=function(){var e,t=R.length;for(D={};--t>-1;)(e=R[t])&&!1!==e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);R.length=0};q._startTime=h.time,N._startTime=h.frame,q._active=N._active=!0,setTimeout(K,1),C._updateRoot=I.render=function(){var e,t,i;if(R.length&&K(),q.render((h.time-q._startTime)*q._timeScale,!1,!1),N.render((h.frame-N._startTime)*N._timeScale,!1,!1),R.length&&K(),h.frame>=Y){Y=h.frame+(parseInt(I.autoSleep,10)||120);for(i in U){for(e=(t=U[i].tweens).length;--e>-1;)t[e]._gc&&t.splice(e,1);0===t.length&&delete U[i]}if((!(i=q._first)||i._paused)&&I.autoSleep&&!N._first&&1===h._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||h.sleep()}}},h.addEventListener("tick",C._updateRoot);var Z=function(e,t,i){var s,o,a=e._gsTweenID;if(U[a||(e._gsTweenID=a="t"+z++)]||(U[a]={target:e,tweens:[]}),t&&(s=U[a].tweens,s[o=s.length]=t,i))for(;--o>-1;)s[o]===t&&s.splice(o,1);return U[a].tweens},J=function(e,t,i,s){var o,a,r=e.vars.onOverwrite;return r&&(o=r(e,t,i,s)),(r=I.onOverwrite)&&(a=r(e,t,i,s)),!1!==o&&!1!==a},Q=function(e,t,i,s,o){var a,r,n,h;if(1===s||s>=4){for(h=o.length,a=0;a<h;a++)if((n=o[a])!==t)n._gc||n._kill(null,e,t)&&(r=!0);else if(5===s)break;return r}var l,p=t._startTime+1e-10,c=[],d=0,u=0===t._duration;for(a=o.length;--a>-1;)(n=o[a])===t||n._gc||n._paused||(n._timeline!==t._timeline?(l=l||$(t,0,u),0===$(n,l,u)&&(c[d++]=n)):n._startTime<=p&&n._startTime+n.totalDuration()/n._timeScale>p&&((u||!n._initted)&&p-n._startTime<=2e-10||(c[d++]=n)));for(a=d;--a>-1;)if(n=c[a],2===s&&n._kill(i,e,t)&&(r=!0),2!==s||!n._firstPT&&n._initted){if(2!==s&&!J(n,t))continue;n._enabled(!1,!1)&&(r=!0)}return r},$=function(e,t,i){for(var s=e._timeline,o=s._timeScale,a=e._startTime;s._timeline;){if(a+=s._startTime,o*=s._timeScale,s._paused)return-100;s=s._timeline}return(a/=o)>t?a-t:i&&a===t||!e._initted&&a-t<2e-10?1e-10:(a+=e.totalDuration()/e._timeScale/o)>t+1e-10?0:a-t-1e-10};n._init=function(){var e,t,i,s,o,a,r=this.vars,n=this._overwrittenProps,h=this._duration,l=!!r.immediateRender,p=r.ease;if(r.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),o={};for(s in r.startAt)o[s]=r.startAt[s];if(o.overwrite=!1,o.immediateRender=!0,o.lazy=l&&!1!==r.lazy,o.startAt=o.delay=null,this._startAt=I.to(this.target,0,o),l)if(this._time>0)this._startAt=null;else if(0!==h)return}else if(r.runBackwards&&0!==h)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(l=!1),i={};for(s in r)V[s]&&"autoCSS"!==s||(i[s]=r[s]);if(i.overwrite=0,i.data="isFromStart",i.lazy=l&&!1!==r.lazy,i.immediateRender=l,this._startAt=I.to(this.target,0,i),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=p=p?p instanceof v?p:"function"==typeof p?new v(p,r.easeParams):k[p]||I.defaultEase:I.defaultEase,r.easeParams instanceof Array&&p.config&&(this._ease=p.config.apply(p,r.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length,e=0;e<a;e++)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],n?n[e]:null,e)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,n,0);if(t&&I._onPluginEvent("_onInitAllProps",this),n&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),r.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=r.onUpdate,this._initted=!0},n._initProps=function(t,i,s,o,a){var r,n,h,l,p,c;if(null==t)return!1;D[t._gsTweenID]&&K(),this.vars.css||t.style&&t!==e&&t.nodeType&&W.css&&!1!==this.vars.autoCSS&&H(this.vars,t);for(r in this.vars)if(c=this.vars[r],V[r])c&&(c instanceof Array||c.push&&g(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[r]=c=this._swapSelfInParams(c,this));else if(W[r]&&(l=new W[r])._onInitTween(t,this.vars[r],this,a)){for(this._firstPT=p={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:1,n:r,pg:1,pr:l._priority,m:0},n=l._overwriteProps.length;--n>-1;)i[l._overwriteProps[n]]=this._firstPT;(l._priority||l._onInitAllProps)&&(h=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0),p._next&&(p._next._prev=p)}else i[r]=_.call(this,t,r,"get",c,r,0,null,this.vars.stringFilter,a);return o&&this._kill(o,t)?this._initProps(t,i,s,o,a):this._overwrite>1&&this._firstPT&&s.length>1&&Q(t,this,i,this._overwrite,s)?(this._kill(i,t),this._initProps(t,i,s,o,a)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(D[t._gsTweenID]=!0),h)},n.render=function(e,t,i){var s,o,a,r,n=this._time,h=this._duration,l=this._rawPrevTime;if(e>=h-1e-7&&e>=0)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(s=!0,o="onComplete",i=i||this._timeline.autoRemoveChildren),0===h&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(e=0),(l<0||e<=0&&e>=-1e-7||1e-10===l&&"isPause"!==this.data)&&l!==e&&(i=!0,l>1e-10&&(o="onReverseComplete")),this._rawPrevTime=r=!t||e||l===e?e:1e-10);else if(e<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==n||0===h&&l>0)&&(o="onReverseComplete",s=this._reversed),e<0&&(this._active=!1,0===h&&(this._initted||!this.vars.lazy||i)&&(l>=0&&(1e-10!==l||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=r=!t||e||l===e?e:1e-10)),this._initted||(i=!0);else if(this._totalTime=this._time=e,this._easeType){var p=e/h,c=this._easeType,d=this._easePower;(1===c||3===c&&p>=.5)&&(p=1-p),3===c&&(p*=2),1===d?p*=p:2===d?p*=p*p:3===d?p*=p*p*p:4===d&&(p*=p*p*p*p),this.ratio=1===c?1-p:2===c?p:e/h<.5?p/2:1-p/2}else this.ratio=this._ease.getRatio(e/h);if(this._time!==n||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=n,this._rawPrevTime=l,R.push(this),void(this._lazy=[e,t]);this._time&&!s?this.ratio=this._ease.getRatio(this._time/h):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==n&&e>=0&&(this._active=!0),0===n&&(this._startAt&&(e>=0?this._startAt.render(e,t,i):o||(o="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==h||t||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(e<0&&this._startAt&&-1e-4!==e&&this._startAt.render(e,t,i),t||(this._time!==n||s||i)&&this._callback("onUpdate")),o&&(this._gc&&!i||(e<0&&this._startAt&&!this._onUpdate&&-1e-4!==e&&this._startAt.render(e,t,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[o]&&this._callback(o),0===h&&1e-10===this._rawPrevTime&&1e-10!==r&&(this._rawPrevTime=0)))}},n._kill=function(e,t,i){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:I.selector(t)||t;var s,o,a,r,n,h,l,p,c,d=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((g(t)||L(t))&&"number"!=typeof t[0])for(s=t.length;--s>-1;)this._kill(e,t[s],i)&&(h=!0);else{if(this._targets){for(s=this._targets.length;--s>-1;)if(t===this._targets[s]){n=this._propLookup[s]||{},this._overwrittenProps=this._overwrittenProps||[],o=this._overwrittenProps[s]=e?this._overwrittenProps[s]||{}:"all";break}}else{if(t!==this.target)return!1;n=this._propLookup,o=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(n){if(l=e||n,p=e!==o&&"all"!==o&&e!==n&&("object"!=typeof e||!e._tempKill),i&&(I.onOverwrite||this.vars.onOverwrite)){for(a in l)n[a]&&(c||(c=[]),c.push(a));if((c||!e)&&!J(this,i,t,c))return!1}for(a in l)(r=n[a])&&(d&&(r.f?r.t[r.p](r.s):r.t[r.p]=r.s,h=!0),r.pg&&r.t._kill(l)&&(h=!0),r.pg&&0!==r.t._overwriteProps.length||(r._prev?r._prev._next=r._next:r===this._firstPT&&(this._firstPT=r._next),r._next&&(r._next._prev=r._prev),r._next=r._prev=null),delete n[a]),p&&(o[a]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},n.invalidate=function(){return this._notifyPluginsOfEnabled&&I._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],C.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-1e-10,this.render(Math.min(0,-this._delay))),this},n._enabled=function(e,t){if(l||h.wake(),e&&this._gc){var i,s=this._targets;if(s)for(i=s.length;--i>-1;)this._siblings[i]=Z(s[i],this,!0);else this._siblings=Z(this.target,this,!0)}return C.prototype._enabled.call(this,e,t),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&I._onPluginEvent(e?"_onEnable":"_onDisable",this)},I.to=function(e,t,i){return new I(e,t,i)},I.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new I(e,t,i)},I.fromTo=function(e,t,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new I(e,t,s)},I.delayedCall=function(e,t,i,s,o){return new I(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:s,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:o,overwrite:0})},I.set=function(e,t){return new I(e,0,t)},I.getTweensOf=function(e,t){if(null==e)return[];e="string"!=typeof e?e:I.selector(e)||e;var i,s,o,a;if((g(e)||L(e))&&"number"!=typeof e[0]){for(i=e.length,s=[];--i>-1;)s=s.concat(I.getTweensOf(e[i],t));for(i=s.length;--i>-1;)for(a=s[i],o=i;--o>-1;)a===s[o]&&s.splice(i,1)}else for(i=(s=Z(e).concat()).length;--i>-1;)(s[i]._gc||t&&!s[i].isActive())&&s.splice(i,1);return s},I.killTweensOf=I.killDelayedCallsTo=function(e,t,i){"object"==typeof t&&(i=t,t=!1);for(var s=I.getTweensOf(e,t),o=s.length;--o>-1;)s[o]._kill(i,e)};var ee=b("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=ee.prototype},!0);if(n=ee.prototype,ee.version="1.19.0",ee.API=2,n._firstPT=null,n._addTween=_,n.setRatio=E,n._kill=function(e){var t,i=this._overwriteProps,s=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=i.length;--t>-1;)null!=e[i[t]]&&i.splice(t,1);for(;s;)null!=e[s.n]&&(s._next&&(s._next._prev=s._prev),s._prev?(s._prev._next=s._next,s._prev=null):this._firstPT===s&&(this._firstPT=s._next)),s=s._next;return!1},n._mod=n._roundProps=function(e){for(var t,i=this._firstPT;i;)(t=e[this._propName]||null!=i.n&&e[i.n.split(this._propName+"_").join("")])&&"function"==typeof t&&(2===i.f?i.t._applyPT.m=t:i.m=t),i=i._next},I._onPluginEvent=function(e,t){var i,s,o,a,r,n=t._firstPT;if("_onInitAllProps"===e){for(;n;){for(r=n._next,s=o;s&&s.pr>n.pr;)s=s._next;(n._prev=s?s._prev:a)?n._prev._next=n:o=n,(n._next=s)?s._prev=n:a=n,n=r}n=t._firstPT=o}for(;n;)n.pg&&"function"==typeof n.t[e]&&n.t[e]()&&(i=!0),n=n._next;return i},ee.activate=function(e){for(var t=e.length;--t>-1;)e[t].API===ee.API&&(W[(new e[t])._propName]=e[t]);return!0},f.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,i=e.propName,s=e.priority||0,o=e.overwriteProps,a={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},r=b("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){ee.call(this,i,s),this._overwriteProps=o||[]},!0===e.global),n=r.prototype=new ee(i);n.constructor=r,r.API=e.API;for(t in a)"function"==typeof e[t]&&(n[a[t]]=e[t]);return r.version=e.version,ee.activate([r]),r},a=e._gsQueue){for(r=0;r<a.length;r++)a[r]();for(n in m)m[n].func||e.console.log("GSAP encountered missing dependency: "+n)}l=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window);var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),pixi_spine;!function(e){!function(e){var t=function(){function e(e,t,i){if(null==e)throw new Error("name cannot be null.");if(null==t)throw new Error("timelines cannot be null.");this.name=e,this.timelines=t,this.duration=i}return e.prototype.apply=function(e,t,i,s,o,a,r,n){if(null==e)throw new Error("skeleton cannot be null.");s&&0!=this.duration&&(i%=this.duration,t>0&&(t%=this.duration));for(var h=this.timelines,l=0,p=h.length;l<p;l++)h[l].apply(e,t,i,o,a,r,n)},e.binarySearch=function(e,t,i){void 0===i&&(i=1);var s=0,o=e.length/i-2;if(0==o)return i;for(var a=o>>>1;;){if(e[(a+1)*i]<=t?s=a+1:o=a,s==o)return(s+1)*i;a=s+o>>>1}},e.linearSearch=function(e,t,i){for(var s=0,o=e.length-i;s<=o;s+=i)if(e[s]>t)return s;return-1},e}();e.Animation=t;var i;!function(e){e[e.setup=0]="setup",e[e.current=1]="current",e[e.currentLayered=2]="currentLayered"}(i=e.MixPose||(e.MixPose={}));var s;!function(e){e[e.in=0]="in",e[e.out=1]="out"}(s=e.MixDirection||(e.MixDirection={}));var o;!function(e){e[e.rotate=0]="rotate",e[e.translate=1]="translate",e[e.scale=2]="scale",e[e.shear=3]="shear",e[e.attachment=4]="attachment",e[e.color=5]="color",e[e.deform=6]="deform",e[e.event=7]="event",e[e.drawOrder=8]="drawOrder",e[e.ikConstraint=9]="ikConstraint",e[e.transformConstraint=10]="transformConstraint",e[e.pathConstraintPosition=11]="pathConstraintPosition",e[e.pathConstraintSpacing=12]="pathConstraintSpacing",e[e.pathConstraintMix=13]="pathConstraintMix",e[e.twoColor=14]="twoColor"}(o=e.TimelineType||(e.TimelineType={}));var a=function(){function t(i){if(i<=0)throw new Error("frameCount must be > 0: "+i);this.curves=e.Utils.newFloatArray((i-1)*t.BEZIER_SIZE)}return t.prototype.getFrameCount=function(){return this.curves.length/t.BEZIER_SIZE+1},t.prototype.setLinear=function(e){this.curves[e*t.BEZIER_SIZE]=t.LINEAR},t.prototype.setStepped=function(e){this.curves[e*t.BEZIER_SIZE]=t.STEPPED},t.prototype.getCurveType=function(e){var i=e*t.BEZIER_SIZE;if(i==this.curves.length)return t.LINEAR;var s=this.curves[i];return s==t.LINEAR?t.LINEAR:s==t.STEPPED?t.STEPPED:t.BEZIER},t.prototype.setCurve=function(e,i,s,o,a){var r=.03*(2*-i+o),n=.03*(2*-s+a),h=.006*(3*(i-o)+1),l=.006*(3*(s-a)+1),p=2*r+h,c=2*n+l,d=.3*i+r+.16666667*h,u=.3*s+n+.16666667*l,g=e*t.BEZIER_SIZE,m=this.curves;m[g++]=t.BEZIER;for(var y=d,f=u,b=g+t.BEZIER_SIZE-1;g<b;g+=2)m[g]=y,m[g+1]=f,d+=p,u+=c,p+=h,c+=l,y+=d,f+=u},t.prototype.getCurvePercent=function(i,s){s=e.MathUtils.clamp(s,0,1);var o=this.curves,a=i*t.BEZIER_SIZE,r=o[a];if(r==t.LINEAR)return s;if(r==t.STEPPED)return 0;for(var n=0,h=++a,l=a+t.BEZIER_SIZE-1;a<l;a+=2)if((n=o[a])>=s){var p=void 0,c=void 0;return a==h?(p=0,c=0):(p=o[a-2],c=o[a-1]),c+(o[a+1]-c)*(s-p)/(n-p)}var d=o[a-1];return d+(1-d)*(s-n)/(1-n)},t.LINEAR=0,t.STEPPED=1,t.BEZIER=2,t.BEZIER_SIZE=19,t}();e.CurveTimeline=a;var r=function(s){function a(t){var i=s.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t<<1),i}return __extends(a,s),a.prototype.getPropertyId=function(){return(o.rotate<<24)+this.boneIndex},a.prototype.setFrame=function(e,t,i){e<<=1,this.frames[e]=t,this.frames[e+a.ROTATION]=i},a.prototype.apply=function(e,s,o,r,n,h,l){var p=this.frames,c=e.bones[this.boneIndex];if(o<p[0])switch(h){case i.setup:return void(c.rotation=c.data.rotation);case i.current:var d=c.data.rotation-c.rotation;d-=360*(16384-(16384.499999999996-d/360|0)),c.rotation+=d*n}else if(o>=p[p.length-a.ENTRIES])if(h==i.setup)c.rotation=c.data.rotation+p[p.length+a.PREV_ROTATION]*n;else{var u=c.data.rotation+p[p.length+a.PREV_ROTATION]-c.rotation;u-=360*(16384-(16384.499999999996-u/360|0)),c.rotation+=u*n}else{var g=t.binarySearch(p,o,a.ENTRIES),m=p[g+a.PREV_ROTATION],y=p[g],f=this.getCurvePercent((g>>1)-1,1-(o-y)/(p[g+a.PREV_TIME]-y)),b=p[g+a.ROTATION]-m;b=m+(b-=360*(16384-(16384.499999999996-b/360|0)))*f,h==i.setup?(b-=360*(16384-(16384.499999999996-b/360|0)),c.rotation=c.data.rotation+b*n):(b=c.data.rotation+b-c.rotation,b-=360*(16384-(16384.499999999996-b/360|0)),c.rotation+=b*n)}},a.ENTRIES=2,a.PREV_TIME=-2,a.PREV_ROTATION=-1,a.ROTATION=1,a}(a);e.RotateTimeline=r;var n=function(s){function a(t){var i=s.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t*a.ENTRIES),i}return __extends(a,s),a.prototype.getPropertyId=function(){return(o.translate<<24)+this.boneIndex},a.prototype.setFrame=function(e,t,i,s){e*=a.ENTRIES,this.frames[e]=t,this.frames[e+a.X]=i,this.frames[e+a.Y]=s},a.prototype.apply=function(e,s,o,r,n,h,l){var p=this.frames,c=e.bones[this.boneIndex];if(o<p[0])switch(h){case i.setup:return c.x=c.data.x,void(c.y=c.data.y);case i.current:c.x+=(c.data.x-c.x)*n,c.y+=(c.data.y-c.y)*n}else{var d=0,u=0;if(o>=p[p.length-a.ENTRIES])d=p[p.length+a.PREV_X],u=p[p.length+a.PREV_Y];else{var g=t.binarySearch(p,o,a.ENTRIES);d=p[g+a.PREV_X],u=p[g+a.PREV_Y];var m=p[g],y=this.getCurvePercent(g/a.ENTRIES-1,1-(o-m)/(p[g+a.PREV_TIME]-m));d+=(p[g+a.X]-d)*y,u+=(p[g+a.Y]-u)*y}h==i.setup?(c.x=c.data.x+d*n,c.y=c.data.y+u*n):(c.x+=(c.data.x+d-c.x)*n,c.y+=(c.data.y+u-c.y)*n)}},a.ENTRIES=3,a.PREV_TIME=-3,a.PREV_X=-2,a.PREV_Y=-1,a.X=1,a.Y=2,a}(a);e.TranslateTimeline=n;var h=function(a){function r(e){return a.call(this,e)||this}return __extends(r,a),r.prototype.getPropertyId=function(){return(o.scale<<24)+this.boneIndex},r.prototype.apply=function(o,a,n,h,l,p,c){var d=this.frames,u=o.bones[this.boneIndex];if(n<d[0])switch(p){case i.setup:return u.scaleX=u.data.scaleX,void(u.scaleY=u.data.scaleY);case i.current:u.scaleX+=(u.data.scaleX-u.scaleX)*l,u.scaleY+=(u.data.scaleY-u.scaleY)*l}else{var g=0,m=0;if(n>=d[d.length-r.ENTRIES])g=d[d.length+r.PREV_X]*u.data.scaleX,m=d[d.length+r.PREV_Y]*u.data.scaleY;else{var y=t.binarySearch(d,n,r.ENTRIES);g=d[y+r.PREV_X],m=d[y+r.PREV_Y];var f=d[y],b=this.getCurvePercent(y/r.ENTRIES-1,1-(n-f)/(d[y+r.PREV_TIME]-f));g=(g+(d[y+r.X]-g)*b)*u.data.scaleX,m=(m+(d[y+r.Y]-m)*b)*u.data.scaleY}if(1==l)u.scaleX=g,u.scaleY=m;else{var w=0,v=0;p==i.setup?(w=u.data.scaleX,v=u.data.scaleY):(w=u.scaleX,v=u.scaleY),c==s.out?(g=Math.abs(g)*e.MathUtils.signum(w),m=Math.abs(m)*e.MathUtils.signum(v)):(w=Math.abs(w)*e.MathUtils.signum(g),v=Math.abs(v)*e.MathUtils.signum(m)),u.scaleX=w+(g-w)*l,u.scaleY=v+(m-v)*l}}},r}(n);e.ScaleTimeline=h;var l=function(e){function s(t){return e.call(this,t)||this}return __extends(s,e),s.prototype.getPropertyId=function(){return(o.shear<<24)+this.boneIndex},s.prototype.apply=function(e,o,a,r,n,h,l){var p=this.frames,c=e.bones[this.boneIndex];if(a<p[0])switch(h){case i.setup:return c.shearX=c.data.shearX,void(c.shearY=c.data.shearY);case i.current:c.shearX+=(c.data.shearX-c.shearX)*n,c.shearY+=(c.data.shearY-c.shearY)*n}else{var d=0,u=0;if(a>=p[p.length-s.ENTRIES])d=p[p.length+s.PREV_X],u=p[p.length+s.PREV_Y];else{var g=t.binarySearch(p,a,s.ENTRIES);d=p[g+s.PREV_X],u=p[g+s.PREV_Y];var m=p[g],y=this.getCurvePercent(g/s.ENTRIES-1,1-(a-m)/(p[g+s.PREV_TIME]-m));d+=(p[g+s.X]-d)*y,u+=(p[g+s.Y]-u)*y}h==i.setup?(c.shearX=c.data.shearX+d*n,c.shearY=c.data.shearY+u*n):(c.shearX+=(c.data.shearX+d-c.shearX)*n,c.shearY+=(c.data.shearY+u-c.shearY)*n)}},s}(n);e.ShearTimeline=l;var p=function(s){function a(t){var i=s.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t*a.ENTRIES),i}return __extends(a,s),a.prototype.getPropertyId=function(){return(o.color<<24)+this.slotIndex},a.prototype.setFrame=function(e,t,i,s,o,r){e*=a.ENTRIES,this.frames[e]=t,this.frames[e+a.R]=i,this.frames[e+a.G]=s,this.frames[e+a.B]=o,this.frames[e+a.A]=r},a.prototype.apply=function(e,s,o,r,n,h,l){var p=e.slots[this.slotIndex],c=this.frames;if(o<c[0])switch(h){case i.setup:return void p.color.setFromColor(p.data.color);case i.current:var d=p.color,u=p.data.color;d.add((u.r-d.r)*n,(u.g-d.g)*n,(u.b-d.b)*n,(u.a-d.a)*n)}else{var g=0,m=0,y=0,f=0;if(o>=c[c.length-a.ENTRIES]){var b=c.length;g=c[b+a.PREV_R],m=c[b+a.PREV_G],y=c[b+a.PREV_B],f=c[b+a.PREV_A]}else{var w=t.binarySearch(c,o,a.ENTRIES);g=c[w+a.PREV_R],m=c[w+a.PREV_G],y=c[w+a.PREV_B],f=c[w+a.PREV_A];var v=c[w],k=this.getCurvePercent(w/a.ENTRIES-1,1-(o-v)/(c[w+a.PREV_TIME]-v));g+=(c[w+a.R]-g)*k,m+=(c[w+a.G]-m)*k,y+=(c[w+a.B]-y)*k,f+=(c[w+a.A]-f)*k}if(1==n)p.color.set(g,m,y,f);else{d=p.color;h==i.setup&&d.setFromColor(p.data.color),d.add((g-d.r)*n,(m-d.g)*n,(y-d.b)*n,(f-d.a)*n)}}},a.ENTRIES=5,a.PREV_TIME=-5,a.PREV_R=-4,a.PREV_G=-3,a.PREV_B=-2,a.PREV_A=-1,a.R=1,a.G=2,a.B=3,a.A=4,a}(a);e.ColorTimeline=p;var c=function(s){function a(t){var i=s.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t*a.ENTRIES),i}return __extends(a,s),a.prototype.getPropertyId=function(){return(o.twoColor<<24)+this.slotIndex},a.prototype.setFrame=function(e,t,i,s,o,r,n,h,l){e*=a.ENTRIES,this.frames[e]=t,this.frames[e+a.R]=i,this.frames[e+a.G]=s,this.frames[e+a.B]=o,this.frames[e+a.A]=r,this.frames[e+a.R2]=n,this.frames[e+a.G2]=h,this.frames[e+a.B2]=l},a.prototype.apply=function(e,s,o,r,n,h,l){var p=e.slots[this.slotIndex],c=this.frames;if(o<c[0])switch(h){case i.setup:return p.color.setFromColor(p.data.color),void p.darkColor.setFromColor(p.data.darkColor);case i.current:var d=p.color,u=p.darkColor,g=p.data.color,m=p.data.darkColor;d.add((g.r-d.r)*n,(g.g-d.g)*n,(g.b-d.b)*n,(g.a-d.a)*n),u.add((m.r-u.r)*n,(m.g-u.g)*n,(m.b-u.b)*n,0)}else{var y=0,f=0,b=0,w=0,v=0,k=0,S=0;if(o>=c[c.length-a.ENTRIES]){var x=c.length;y=c[x+a.PREV_R],f=c[x+a.PREV_G],b=c[x+a.PREV_B],w=c[x+a.PREV_A],v=c[x+a.PREV_R2],k=c[x+a.PREV_G2],S=c[x+a.PREV_B2]}else{var P=t.binarySearch(c,o,a.ENTRIES);y=c[P+a.PREV_R],f=c[P+a.PREV_G],b=c[P+a.PREV_B],w=c[P+a.PREV_A],v=c[P+a.PREV_R2],k=c[P+a.PREV_G2],S=c[P+a.PREV_B2];var B=c[P],T=this.getCurvePercent(P/a.ENTRIES-1,1-(o-B)/(c[P+a.PREV_TIME]-B));y+=(c[P+a.R]-y)*T,f+=(c[P+a.G]-f)*T,b+=(c[P+a.B]-b)*T,w+=(c[P+a.A]-w)*T,v+=(c[P+a.R2]-v)*T,k+=(c[P+a.G2]-k)*T,S+=(c[P+a.B2]-S)*T}if(1==n)p.color.set(y,f,b,w),p.darkColor.set(v,k,S,1);else{var d=p.color,u=p.darkColor;h==i.setup&&(d.setFromColor(p.data.color),u.setFromColor(p.data.darkColor)),d.add((y-d.r)*n,(f-d.g)*n,(b-d.b)*n,(w-d.a)*n),u.add((v-u.r)*n,(k-u.g)*n,(S-u.b)*n,0)}}},a.ENTRIES=8,a.PREV_TIME=-8,a.PREV_R=-7,a.PREV_G=-6,a.PREV_B=-5,a.PREV_A=-4,a.PREV_R2=-3,a.PREV_G2=-2,a.PREV_B2=-1,a.R=1,a.G=2,a.B=3,a.A=4,a.R2=5,a.G2=6,a.B2=7,a}(a);e.TwoColorTimeline=c;var d=function(){function a(t){this.frames=e.Utils.newFloatArray(t),this.attachmentNames=new Array(t)}return a.prototype.getPropertyId=function(){return(o.attachment<<24)+this.slotIndex},a.prototype.getFrameCount=function(){return this.frames.length},a.prototype.setFrame=function(e,t,i){this.frames[e]=t,this.attachmentNames[e]=i},a.prototype.apply=function(e,o,a,r,n,h,l){var p=e.slots[this.slotIndex];if(l!=s.out||h!=i.setup){var c=this.frames;if(a<c[0]){if(h==i.setup){var d=p.data.attachmentName;p.setAttachment(null==d?null:e.getAttachment(this.slotIndex,d))}}else{var u=0;u=a>=c[c.length-1]?c.length-1:t.binarySearch(c,a,1)-1;var g=this.attachmentNames[u];e.slots[this.slotIndex].setAttachment(null==g?null:e.getAttachment(this.slotIndex,g))}}else{var m=p.data.attachmentName;p.setAttachment(null==m?null:e.getAttachment(this.slotIndex,m))}},a}();e.AttachmentTimeline=d;var u=null,g=function(s){function a(t){var i=s.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t),i.frameVertices=new Array(t),null==u&&(u=e.Utils.newFloatArray(64)),i}return __extends(a,s),a.prototype.getPropertyId=function(){return(o.deform<<27)+ +this.attachment.id+this.slotIndex},a.prototype.setFrame=function(e,t,i){this.frames[e]=t,this.frameVertices[e]=i},a.prototype.apply=function(s,o,a,r,n,h,l){var p=s.slots[this.slotIndex],c=p.getAttachment();if(c instanceof e.VertexAttachment&&c.applyDeform(this.attachment)){var d=p.attachmentVertices,g=this.frameVertices,m=g[0].length,y=e.Utils.setArraySize(d,m),f=this.frames;if(a<f[0]){var b=c;switch(h){case i.setup:var w=void 0;return null==b.bones?w=b.vertices:(w=u).length<m&&(u=w=e.Utils.newFloatArray(m)),void e.Utils.arrayCopy(w,0,y,0,m);case i.current:if(1==n)break;if(null==b.bones)for(var v=b.vertices,k=0;k<m;k++)y[k]+=(v[k]-y[k])*n;else{n=1-n;for(var S=0;S<m;S++)y[S]*=n}}}else if(a>=f[f.length-1]){var x=g[f.length-1];if(1==n)e.Utils.arrayCopy(x,0,y,0,m);else if(h==i.setup)if(null==(b=c).bones)for(var v=b.vertices,P=0;P<m;P++){D=v[P];y[P]=D+(x[P]-D)*n}else for(var B=0;B<m;B++)y[B]=x[B]*n;else for(var T=0;T<m;T++)y[T]+=(x[T]-y[T])*n}else{var G=t.binarySearch(f,a),C=g[G-1],A=g[G],M=f[G],I=this.getCurvePercent(G-1,1-(a-M)/(f[G-1]-M));if(1==n)for(var L=0;L<m;L++){R=C[L];y[L]=R+(A[L]-R)*I}else if(h==i.setup)if(null==(b=c).bones)for(var v=b.vertices,H=0;H<m;H++){var R=C[H],D=v[H];y[H]=D+(R+(A[H]-R)*I-D)*n}else for(var O=0;O<m;O++){R=C[O];y[O]=(R+(A[O]-R)*I)*n}else for(var E=0;E<m;E++){R=C[E];y[E]+=(R+(A[E]-R)*I-y[E])*n}}}},a}(a);e.DeformTimeline=g;var m=function(){function i(t){this.frames=e.Utils.newFloatArray(t),this.events=new Array(t)}return i.prototype.getPropertyId=function(){return o.event<<24},i.prototype.getFrameCount=function(){return this.frames.length},i.prototype.setFrame=function(e,t){this.frames[e]=t.time,this.events[e]=t},i.prototype.apply=function(e,i,s,o,a,r,n){if(null!=o){var h=this.frames,l=this.frames.length;if(i>s)this.apply(e,i,Number.MAX_VALUE,o,a,r,n),i=-1;else if(i>=h[l-1])return;if(!(s<h[0])){var p=0;if(i<h[0])p=0;else for(var c=h[p=t.binarySearch(h,i)];p>0&&h[p-1]==c;)p--;for(;p<l&&s>=h[p];p++)o.push(this.events[p])}}},i}();e.EventTimeline=m;var y=function(){function a(t){this.frames=e.Utils.newFloatArray(t),this.drawOrders=new Array(t)}return a.prototype.getPropertyId=function(){return o.drawOrder<<24},a.prototype.getFrameCount=function(){return this.frames.length},a.prototype.setFrame=function(e,t,i){this.frames[e]=t,this.drawOrders[e]=i},a.prototype.apply=function(o,a,r,n,h,l,p){var c=o.drawOrder,d=o.slots;if(p!=s.out||l!=i.setup){var u=this.frames;if(r<u[0])l==i.setup&&e.Utils.arrayCopy(o.slots,0,o.drawOrder,0,o.slots.length);else{var g=0;g=r>=u[u.length-1]?u.length-1:t.binarySearch(u,r)-1;var m=this.drawOrders[g];if(null==m)e.Utils.arrayCopy(d,0,c,0,d.length);else for(var y=0,f=m.length;y<f;y++)c[y]=d[m[y]]}}else e.Utils.arrayCopy(o.slots,0,o.drawOrder,0,o.slots.length)},a}();e.DrawOrderTimeline=y;var f=function(a){function r(t){var i=a.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t*r.ENTRIES),i}return __extends(r,a),r.prototype.getPropertyId=function(){return(o.ikConstraint<<24)+this.ikConstraintIndex},r.prototype.setFrame=function(e,t,i,s){e*=r.ENTRIES,this.frames[e]=t,this.frames[e+r.MIX]=i,this.frames[e+r.BEND_DIRECTION]=s},r.prototype.apply=function(e,o,a,n,h,l,p){var c=this.frames,d=e.ikConstraints[this.ikConstraintIndex];if(a<c[0])switch(l){case i.setup:return d.mix=d.data.mix,void(d.bendDirection=d.data.bendDirection);case i.current:d.mix+=(d.data.mix-d.mix)*h,d.bendDirection=d.data.bendDirection}else if(a>=c[c.length-r.ENTRIES])l==i.setup?(d.mix=d.data.mix+(c[c.length+r.PREV_MIX]-d.data.mix)*h,d.bendDirection=p==s.out?d.data.bendDirection:c[c.length+r.PREV_BEND_DIRECTION]):(d.mix+=(c[c.length+r.PREV_MIX]-d.mix)*h,p==s.in&&(d.bendDirection=c[c.length+r.PREV_BEND_DIRECTION]));else{var u=t.binarySearch(c,a,r.ENTRIES),g=c[u+r.PREV_MIX],m=c[u],y=this.getCurvePercent(u/r.ENTRIES-1,1-(a-m)/(c[u+r.PREV_TIME]-m));l==i.setup?(d.mix=d.data.mix+(g+(c[u+r.MIX]-g)*y-d.data.mix)*h,d.bendDirection=p==s.out?d.data.bendDirection:c[u+r.PREV_BEND_DIRECTION]):(d.mix+=(g+(c[u+r.MIX]-g)*y-d.mix)*h,p==s.in&&(d.bendDirection=c[u+r.PREV_BEND_DIRECTION]))}},r.ENTRIES=3,r.PREV_TIME=-3,r.PREV_MIX=-2,r.PREV_BEND_DIRECTION=-1,r.MIX=1,r.BEND_DIRECTION=2,r}(a);e.IkConstraintTimeline=f;var b=function(s){function a(t){var i=s.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t*a.ENTRIES),i}return __extends(a,s),a.prototype.getPropertyId=function(){return(o.transformConstraint<<24)+this.transformConstraintIndex},a.prototype.setFrame=function(e,t,i,s,o,r){e*=a.ENTRIES,this.frames[e]=t,this.frames[e+a.ROTATE]=i,this.frames[e+a.TRANSLATE]=s,this.frames[e+a.SCALE]=o,this.frames[e+a.SHEAR]=r},a.prototype.apply=function(e,s,o,r,n,h,l){var p=this.frames,c=e.transformConstraints[this.transformConstraintIndex];if(o<p[0]){v=c.data;switch(h){case i.setup:return c.rotateMix=v.rotateMix,c.translateMix=v.translateMix,c.scaleMix=v.scaleMix,void(c.shearMix=v.shearMix);case i.current:c.rotateMix+=(v.rotateMix-c.rotateMix)*n,c.translateMix+=(v.translateMix-c.translateMix)*n,c.scaleMix+=(v.scaleMix-c.scaleMix)*n,c.shearMix+=(v.shearMix-c.shearMix)*n}}else{var d=0,u=0,g=0,m=0;if(o>=p[p.length-a.ENTRIES]){var y=p.length;d=p[y+a.PREV_ROTATE],u=p[y+a.PREV_TRANSLATE],g=p[y+a.PREV_SCALE],m=p[y+a.PREV_SHEAR]}else{var f=t.binarySearch(p,o,a.ENTRIES);d=p[f+a.PREV_ROTATE],u=p[f+a.PREV_TRANSLATE],g=p[f+a.PREV_SCALE],m=p[f+a.PREV_SHEAR];var b=p[f],w=this.getCurvePercent(f/a.ENTRIES-1,1-(o-b)/(p[f+a.PREV_TIME]-b));d+=(p[f+a.ROTATE]-d)*w,u+=(p[f+a.TRANSLATE]-u)*w,g+=(p[f+a.SCALE]-g)*w,m+=(p[f+a.SHEAR]-m)*w}if(h==i.setup){var v=c.data;c.rotateMix=v.rotateMix+(d-v.rotateMix)*n,c.translateMix=v.translateMix+(u-v.translateMix)*n,c.scaleMix=v.scaleMix+(g-v.scaleMix)*n,c.shearMix=v.shearMix+(m-v.shearMix)*n}else c.rotateMix+=(d-c.rotateMix)*n,c.translateMix+=(u-c.translateMix)*n,c.scaleMix+=(g-c.scaleMix)*n,c.shearMix+=(m-c.shearMix)*n}},a.ENTRIES=5,a.PREV_TIME=-5,a.PREV_ROTATE=-4,a.PREV_TRANSLATE=-3,a.PREV_SCALE=-2,a.PREV_SHEAR=-1,a.ROTATE=1,a.TRANSLATE=2,a.SCALE=3,a.SHEAR=4,a}(a);e.TransformConstraintTimeline=b;var w=function(s){function a(t){var i=s.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t*a.ENTRIES),i}return __extends(a,s),a.prototype.getPropertyId=function(){return(o.pathConstraintPosition<<24)+this.pathConstraintIndex},a.prototype.setFrame=function(e,t,i){e*=a.ENTRIES,this.frames[e]=t,this.frames[e+a.VALUE]=i},a.prototype.apply=function(e,s,o,r,n,h,l){var p=this.frames,c=e.pathConstraints[this.pathConstraintIndex];if(o<p[0])switch(h){case i.setup:return void(c.position=c.data.position);case i.current:c.position+=(c.data.position-c.position)*n}else{var d=0;if(o>=p[p.length-a.ENTRIES])d=p[p.length+a.PREV_VALUE];else{var u=t.binarySearch(p,o,a.ENTRIES);d=p[u+a.PREV_VALUE];var g=p[u],m=this.getCurvePercent(u/a.ENTRIES-1,1-(o-g)/(p[u+a.PREV_TIME]-g));d+=(p[u+a.VALUE]-d)*m}h==i.setup?c.position=c.data.position+(d-c.data.position)*n:c.position+=(d-c.position)*n}},a.ENTRIES=2,a.PREV_TIME=-2,a.PREV_VALUE=-1,a.VALUE=1,a}(a);e.PathConstraintPositionTimeline=w;var v=function(e){function s(t){return e.call(this,t)||this}return __extends(s,e),s.prototype.getPropertyId=function(){return(o.pathConstraintSpacing<<24)+this.pathConstraintIndex},s.prototype.apply=function(e,o,a,r,n,h,l){var p=this.frames,c=e.pathConstraints[this.pathConstraintIndex];if(a<p[0])switch(h){case i.setup:return void(c.spacing=c.data.spacing);case i.current:c.spacing+=(c.data.spacing-c.spacing)*n}else{var d=0;if(a>=p[p.length-s.ENTRIES])d=p[p.length+s.PREV_VALUE];else{var u=t.binarySearch(p,a,s.ENTRIES);d=p[u+s.PREV_VALUE];var g=p[u],m=this.getCurvePercent(u/s.ENTRIES-1,1-(a-g)/(p[u+s.PREV_TIME]-g));d+=(p[u+s.VALUE]-d)*m}h==i.setup?c.spacing=c.data.spacing+(d-c.data.spacing)*n:c.spacing+=(d-c.spacing)*n}},s}(w);e.PathConstraintSpacingTimeline=v;var k=function(s){function a(t){var i=s.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t*a.ENTRIES),i}return __extends(a,s),a.prototype.getPropertyId=function(){return(o.pathConstraintMix<<24)+this.pathConstraintIndex},a.prototype.setFrame=function(e,t,i,s){e*=a.ENTRIES,this.frames[e]=t,this.frames[e+a.ROTATE]=i,this.frames[e+a.TRANSLATE]=s},a.prototype.apply=function(e,s,o,r,n,h,l){var p=this.frames,c=e.pathConstraints[this.pathConstraintIndex];if(o<p[0])switch(h){case i.setup:return c.rotateMix=c.data.rotateMix,void(c.translateMix=c.data.translateMix);case i.current:c.rotateMix+=(c.data.rotateMix-c.rotateMix)*n,c.translateMix+=(c.data.translateMix-c.translateMix)*n}else{var d=0,u=0;if(o>=p[p.length-a.ENTRIES])d=p[p.length+a.PREV_ROTATE],u=p[p.length+a.PREV_TRANSLATE];else{var g=t.binarySearch(p,o,a.ENTRIES);d=p[g+a.PREV_ROTATE],u=p[g+a.PREV_TRANSLATE];var m=p[g],y=this.getCurvePercent(g/a.ENTRIES-1,1-(o-m)/(p[g+a.PREV_TIME]-m));d+=(p[g+a.ROTATE]-d)*y,u+=(p[g+a.TRANSLATE]-u)*y}h==i.setup?(c.rotateMix=c.data.rotateMix+(d-c.data.rotateMix)*n,c.translateMix=c.data.translateMix+(u-c.data.translateMix)*n):(c.rotateMix+=(d-c.rotateMix)*n,c.translateMix+=(u-c.translateMix)*n)}},a.ENTRIES=3,a.PREV_TIME=-3,a.PREV_ROTATE=-2,a.PREV_TRANSLATE=-1,a.ROTATE=1,a.TRANSLATE=2,a}(a);e.PathConstraintMixTimeline=k}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function t(t){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new s(this),this.propertyIDs=new e.IntSet,this.mixingTo=new Array,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new e.Pool(function(){return new i}),this.data=t}return t.prototype.update=function(e){e*=this.timeScale;for(var t=this.tracks,i=0,s=t.length;i<s;i++){var o=t[i];if(null!=o){o.animationLast=o.nextAnimationLast,o.trackLast=o.nextTrackLast;var a=e*o.timeScale;if(o.delay>0){if(o.delay-=a,o.delay>0)continue;a=-o.delay,o.delay=0}var r=o.next;if(null!=r){var n=o.trackLast-r.delay;if(n>=0){for(r.delay=0,r.trackTime=n+e*r.timeScale,o.trackTime+=a,this.setCurrent(i,r,!0);null!=r.mixingFrom;)r.mixTime+=a,r=r.mixingFrom;continue}}else if(o.trackLast>=o.trackEnd&&null==o.mixingFrom){t[i]=null,this.queue.end(o),this.disposeNext(o);continue}if(null!=o.mixingFrom&&this.updateMixingFrom(o,e)){var h=o.mixingFrom;for(o.mixingFrom=null;null!=h;)this.queue.end(h),h=h.mixingFrom}o.trackTime+=a}}this.queue.drain()},t.prototype.updateMixingFrom=function(e,t){var i=e.mixingFrom;if(null==i)return!0;var s=this.updateMixingFrom(i,t);return e.mixTime>0&&(e.mixTime>=e.mixDuration||0==e.timeScale)?(0==i.totalAlpha&&(e.mixingFrom=i.mixingFrom,e.interruptAlpha=i.interruptAlpha,this.queue.end(i)),s):(i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,i.trackTime+=t*i.timeScale,e.mixTime+=t*e.timeScale,!1)},t.prototype.apply=function(i){if(null==i)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var s=this.events,o=this.tracks,a=!1,r=0,n=o.length;r<n;r++){var h=o[r];if(!(null==h||h.delay>0)){a=!0;var l=0==r?e.MixPose.current:e.MixPose.currentLayered,p=h.alpha;null!=h.mixingFrom?p*=this.applyMixingFrom(h,i,l):h.trackTime>=h.trackEnd&&null==h.next&&(p=0);var c=h.animationLast,d=h.getAnimationTime(),u=h.animation.timelines.length,g=h.animation.timelines;if(1==p)for(b=0;b<u;b++)g[b].apply(i,c,d,s,1,e.MixPose.setup,e.MixDirection.in);else{var m=h.timelineData,y=0==h.timelinesRotation.length;y&&e.Utils.setArraySize(h.timelinesRotation,u<<1,null);for(var f=h.timelinesRotation,b=0;b<u;b++){var w=g[b],v=m[b]>=t.FIRST?e.MixPose.setup:l;w instanceof e.RotateTimeline?this.applyRotateTimeline(w,i,d,p,v,f,b<<1,y):w.apply(i,c,d,s,p,v,e.MixDirection.in)}}this.queueEvents(h,d),s.length=0,h.nextAnimationLast=d,h.nextTrackLast=h.trackTime}}return this.queue.drain(),a},t.prototype.applyMixingFrom=function(i,s,o){var a=i.mixingFrom;null!=a.mixingFrom&&this.applyMixingFrom(a,s,o);var r=0;0==i.mixDuration?r=1:(r=i.mixTime/i.mixDuration)>1&&(r=1);var n=r<a.eventThreshold?this.events:null,h=r<a.attachmentThreshold,l=r<a.drawOrderThreshold,p=a.animationLast,c=a.getAnimationTime(),d=a.animation.timelines.length,u=a.animation.timelines,g=a.timelineData,m=a.timelineDipMix,y=0==a.timelinesRotation.length;y&&e.Utils.setArraySize(a.timelinesRotation,d<<1,null);var f,b=a.timelinesRotation,w=a.alpha*i.interruptAlpha,v=w*(1-r),k=0;a.totalAlpha=0;for(var S=0;S<d;S++){var x=u[S];switch(g[S]){case t.SUBSEQUENT:if(!h&&x instanceof e.AttachmentTimeline)continue;if(!l&&x instanceof e.DrawOrderTimeline)continue;f=o,k=v;break;case t.FIRST:f=e.MixPose.setup,k=v;break;case t.DIP:f=e.MixPose.setup,k=w;break;default:f=e.MixPose.setup,k=w;var P=m[S];k*=Math.max(0,1-P.mixTime/P.mixDuration)}a.totalAlpha+=k,x instanceof e.RotateTimeline?this.applyRotateTimeline(x,s,c,k,f,b,S<<1,y):x.apply(s,p,c,n,k,f,e.MixDirection.out)}return i.mixDuration>0&&this.queueEvents(a,c),this.events.length=0,a.nextAnimationLast=c,a.nextTrackLast=a.trackTime,r},t.prototype.applyRotateTimeline=function(t,i,s,o,a,r,n,h){if(h&&(r[n]=0),1!=o){var l=t,p=l.frames,c=i.bones[l.boneIndex];if(s<p[0])a==e.MixPose.setup&&(c.rotation=c.data.rotation);else{var d=0;if(s>=p[p.length-e.RotateTimeline.ENTRIES])d=c.data.rotation+p[p.length+e.RotateTimeline.PREV_ROTATION];else{var u=e.Animation.binarySearch(p,s,e.RotateTimeline.ENTRIES),g=p[u+e.RotateTimeline.PREV_ROTATION],m=p[u],y=l.getCurvePercent((u>>1)-1,1-(s-m)/(p[u+e.RotateTimeline.PREV_TIME]-m));d=p[u+e.RotateTimeline.ROTATION]-g,d=g+(d-=360*(16384-(16384.499999999996-d/360|0)))*y+c.data.rotation,d-=360*(16384-(16384.499999999996-d/360|0))}var f=a==e.MixPose.setup?c.data.rotation:c.rotation,b=0,w=d-f;if(0==w)b=r[n];else{w-=360*(16384-(16384.499999999996-w/360|0));var v=0,k=0;h?(v=0,k=w):(v=r[n],k=r[n+1]);var S=w>0,x=v>=0;e.MathUtils.signum(k)!=e.MathUtils.signum(w)&&Math.abs(k)<=90&&(Math.abs(v)>180&&(v+=360*e.MathUtils.signum(v)),x=S),b=w+v-v%360,x!=S&&(b+=360*e.MathUtils.signum(v)),r[n]=b}r[n+1]=w,f+=b*o,c.rotation=f-360*(16384-(16384.499999999996-f/360|0))}}else t.apply(i,0,s,null,1,a,e.MixDirection.in)},t.prototype.queueEvents=function(e,t){for(var i=e.animationStart,s=e.animationEnd,o=s-i,a=e.trackLast%o,r=this.events,n=0,h=r.length;n<h;n++){var l=r[n];if(l.time<a)break;l.time>s||this.queue.event(e,l)}for((e.loop?a>e.trackTime%o:t>=s&&e.animationLast<s)&&this.queue.complete(e);n<h;n++)r[n].time<i||this.queue.event(e,r[n])},t.prototype.clearTracks=function(){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var t=0,i=this.tracks.length;t<i;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()},t.prototype.clearTrack=function(e){if(!(e>=this.tracks.length)){var t=this.tracks[e];if(null!=t){this.queue.end(t),this.disposeNext(t);for(var i=t;;){var s=i.mixingFrom;if(null==s)break;this.queue.end(s),i.mixingFrom=null,i=s}this.tracks[t.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(e,t,i){var s=this.expandToIndex(e);this.tracks[e]=t,null!=s&&(i&&this.queue.interrupt(s),t.mixingFrom=s,t.mixTime=0,null!=s.mixingFrom&&s.mixDuration>0&&(t.interruptAlpha*=Math.min(1,s.mixTime/s.mixDuration)),s.timelinesRotation.length=0),this.queue.start(t)},t.prototype.setAnimation=function(e,t,i){var s=this.data.skeletonData.findAnimation(t);if(null==s)throw new Error("Animation not found: "+t);return this.setAnimationWith(e,s,i)},t.prototype.setAnimationWith=function(e,t,i){if(null==t)throw new Error("animation cannot be null.");var s=!0,o=this.expandToIndex(e);null!=o&&(-1==o.nextTrackLast?(this.tracks[e]=o.mixingFrom,this.queue.interrupt(o),this.queue.end(o),this.disposeNext(o),o=o.mixingFrom,s=!1):this.disposeNext(o));var a=this.trackEntry(e,t,i,o);return this.setCurrent(e,a,s),this.queue.drain(),a},t.prototype.addAnimation=function(e,t,i,s){var o=this.data.skeletonData.findAnimation(t);if(null==o)throw new Error("Animation not found: "+t);return this.addAnimationWith(e,o,i,s)},t.prototype.addAnimationWith=function(e,t,i,s){if(null==t)throw new Error("animation cannot be null.");var o=this.expandToIndex(e);if(null!=o)for(;null!=o.next;)o=o.next;var a=this.trackEntry(e,t,i,o);if(null==o)this.setCurrent(e,a,!0),this.queue.drain();else if(o.next=a,s<=0){var r=o.animationEnd-o.animationStart;0!=r?s+=r*(1+(o.trackTime/r|0))-this.data.getMix(o.animation,t):s=0}return a.delay=s,a},t.prototype.setEmptyAnimation=function(e,i){var s=this.setAnimationWith(e,t.emptyAnimation,!1);return s.mixDuration=i,s.trackEnd=i,s},t.prototype.addEmptyAnimation=function(e,i,s){s<=0&&(s-=i);var o=this.addAnimationWith(e,t.emptyAnimation,!1,s);return o.mixDuration=i,o.trackEnd=i,o},t.prototype.setEmptyAnimations=function(e){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,s=this.tracks.length;i<s;i++){var o=this.tracks[i];null!=o&&this.setEmptyAnimation(o.trackIndex,e)}this.queue.drainDisabled=t,this.queue.drain()},t.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(e.Utils.ensureArrayCapacity(this.tracks,t-this.tracks.length+1,null),this.tracks.length=t+1,null)},t.prototype.trackEntry=function(e,t,i,s){var o=this.trackEntryPool.obtain();return o.trackIndex=e,o.animation=t,o.loop=i,o.eventThreshold=0,o.attachmentThreshold=0,o.drawOrderThreshold=0,o.animationStart=0,o.animationEnd=t.duration,o.animationLast=-1,o.nextAnimationLast=-1,o.delay=0,o.trackTime=0,o.trackLast=-1,o.nextTrackLast=-1,o.trackEnd=Number.MAX_VALUE,o.timeScale=1,o.alpha=1,o.interruptAlpha=1,o.mixTime=0,o.mixDuration=null==s?0:this.data.getMix(s.animation,t),o},t.prototype.disposeNext=function(e){for(var t=e.next;null!=t;)this.queue.dispose(t),t=t.next;e.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1;var e=this.propertyIDs;e.clear();for(var t=this.mixingTo,i=0,s=this.tracks.length;i<s;i++){var o=this.tracks[i];null!=o&&o.setTimelineData(null,t,e)}},t.prototype.getCurrent=function(e){return e>=this.tracks.length?null:this.tracks[e]},t.prototype.addListener=function(e){if(null==e)throw new Error("listener cannot be null.");this.listeners.push(e)},t.prototype.removeListener=function(e){var t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.prototype.setAnimationByName=function(e,i,s){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(e,i,s)},t.prototype.addAnimationByName=function(e,i,s,o){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(e,i,s,o)},t.prototype.hasAnimation=function(e){return null!==this.data.skeletonData.findAnimation(e)},t.prototype.hasAnimationByName=function(e){return t.deprecatedWarning3||(t.deprecatedWarning3=!0,console.warn("Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(e)},t.emptyAnimation=new e.Animation("<empty>",[],0),t.SUBSEQUENT=0,t.FIRST=1,t.DIP=2,t.DIP_MIX=3,t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t.deprecatedWarning3=!1,t}();e.AnimationState=t;var i=function(){function i(){this.timelineData=new Array,this.timelineDipMix=new Array,this.timelinesRotation=new Array}return i.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.animation=null,this.listener=null,this.timelineData.length=0,this.timelineDipMix.length=0,this.timelinesRotation.length=0},i.prototype.setTimelineData=function(i,s,o){null!=i&&s.push(i);var a=null!=this.mixingFrom?this.mixingFrom.setTimelineData(this,s,o):this;null!=i&&s.pop();var r=s,n=s.length-1,h=this.animation.timelines,l=this.animation.timelines.length,p=e.Utils.setArraySize(this.timelineData,l);this.timelineDipMix.length=0;var c=e.Utils.setArraySize(this.timelineDipMix,l);e:for(var d=0;d<l;d++){var u=h[d].getPropertyId();if(o.add(u))if(null!=i&&i.hasTimeline(u)){for(var g=n;g>=0;g--){var m=r[g];if(!m.hasTimeline(u)&&m.mixDuration>0){p[d]=t.DIP_MIX,c[d]=m;continue e}}p[d]=t.DIP}else p[d]=t.FIRST;else p[d]=t.SUBSEQUENT}return a},i.prototype.hasTimeline=function(e){for(var t=this.animation.timelines,i=0,s=t.length;i<s;i++)if(t[i].getPropertyId()==e)return!0;return!1},i.prototype.getAnimationTime=function(){if(this.loop){var e=this.animationEnd-this.animationStart;return 0==e?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},i.prototype.setAnimationLast=function(e){this.animationLast=e,this.nextAnimationLast=e},i.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},i.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(i.prototype,"time",{get:function(){return i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(e){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"endTime",{get:function(){return i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(e){i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=e},enumerable:!0,configurable:!0}),i.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},i.deprecatedWarning1=!1,i.deprecatedWarning2=!1,i}();e.TrackEntry=i;var s=function(){function t(e){this.objects=[],this.drainDisabled=!1,this.animState=e}return t.prototype.start=function(e){this.objects.push(o.start),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.interrupt=function(e){this.objects.push(o.interrupt),this.objects.push(e)},t.prototype.end=function(e){this.objects.push(o.end),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.dispose=function(e){this.objects.push(o.dispose),this.objects.push(e)},t.prototype.complete=function(e){this.objects.push(o.complete),this.objects.push(e)},t.prototype.event=function(e,t){this.objects.push(o.event),this.objects.push(e),this.objects.push(t)},t.prototype.deprecateStuff=function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,i=this.animState.listeners,s=0;s<t.length;s+=2){var a=t[s],r=t[s+1];switch(a){case o.start:null!=r.listener&&r.listener.start&&r.listener.start(r);for(l=0;l<i.length;l++)i[l].start&&i[l].start(r);r.onStart&&this.deprecateStuff()&&r.onStart(r.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(r.trackIndex);break;case o.interrupt:null!=r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(l=0;l<i.length;l++)i[l].interrupt&&i[l].interrupt(r);break;case o.end:null!=r.listener&&r.listener.end&&r.listener.end(r);for(l=0;l<i.length;l++)i[l].end&&i[l].end(r);r.onEnd&&this.deprecateStuff()&&r.onEnd(r.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(r.trackIndex);case o.dispose:null!=r.listener&&r.listener.dispose&&r.listener.dispose(r);for(l=0;l<i.length;l++)i[l].dispose&&i[l].dispose(r);this.animState.trackEntryPool.free(r);break;case o.complete:null!=r.listener&&r.listener.complete&&r.listener.complete(r);for(l=0;l<i.length;l++)i[l].complete&&i[l].complete(r);var n=e.MathUtils.toInt(r.loopsCount());r.onComplete&&this.deprecateStuff()&&r.onComplete(r.trackIndex,n),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(r.trackIndex,n);break;case o.event:var h=t[2+s++];null!=r.listener&&r.listener.event&&r.listener.event(r,h);for(var l=0;l<i.length;l++)i[l].event&&i[l].event(r,h);r.onEvent&&this.deprecateStuff()&&r.onEvent(r.trackIndex,h),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(r.trackIndex,h)}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t.deprecatedWarning1=!1,t}();e.EventQueue=s;var o;!function(e){e[e.start=0]="start",e[e.interrupt=1]="interrupt",e[e.end=2]="end",e[e.dispose=3]="dispose",e[e.complete=4]="complete",e[e.event=5]="event"}(o=e.EventType||(e.EventType={}));var a=function(){function e(){}return e.prototype.start=function(e){},e.prototype.interrupt=function(e){},e.prototype.end=function(e){},e.prototype.dispose=function(e){},e.prototype.complete=function(e){},e.prototype.event=function(e,t){},e}();e.AnimationStateAdapter2=a}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function e(e){if(this.animationToMixTime={},this.defaultMix=0,null==e)throw new Error("skeletonData cannot be null.");this.skeletonData=e}return e.prototype.setMix=function(e,t,i){var s=this.skeletonData.findAnimation(e);if(null==s)throw new Error("Animation not found: "+e);var o=this.skeletonData.findAnimation(t);if(null==o)throw new Error("Animation not found: "+t);this.setMixWith(s,o,i)},e.prototype.setMixByName=function(t,i,s){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(t,i,s)},e.prototype.setMixWith=function(e,t,i){if(null==e)throw new Error("from cannot be null.");if(null==t)throw new Error("to cannot be null.");var s=e.name+t.name;this.animationToMixTime[s]=i},e.prototype.getMix=function(e,t){var i=e.name+t.name,s=this.animationToMixTime[i];return void 0===s?this.defaultMix:s},e.deprecatedWarning1=!1,e}();e.AnimationStateData=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function t(e){this.atlas=e}return t.prototype.newRegionAttachment=function(t,i,s){var o=this.atlas.findRegion(s);if(null==o)throw new Error("Region not found in atlas: "+s+" (region attachment: "+i+")");var a=new e.RegionAttachment(i);return a.region=o,a},t.prototype.newMeshAttachment=function(t,i,s){var o=this.atlas.findRegion(s);if(null==o)throw new Error("Region not found in atlas: "+s+" (mesh attachment: "+i+")");var a=new e.MeshAttachment(i);return a.region=o,a},t.prototype.newBoundingBoxAttachment=function(t,i){return new e.BoundingBoxAttachment(i)},t.prototype.newPathAttachment=function(t,i){return new e.PathAttachment(i)},t.prototype.newPointAttachment=function(t,i){return new e.PointAttachment(i)},t.prototype.newClippingAttachment=function(t,i){return new e.ClippingAttachment(i)},t}();e.AtlasAttachmentLoader=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){!function(e){e[e.Normal=0]="Normal",e[e.Additive=1]="Additive",e[e.Multiply=2]="Multiply",e[e.Screen=3]="Screen"}(e.BlendMode||(e.BlendMode={}))}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function t(e,t,i){if(this.matrix=new PIXI.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,null==e)throw new Error("data cannot be null.");if(null==t)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=t,this.parent=i,this.setToSetupPose()}return Object.defineProperty(t.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!0,configurable:!0}),t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(i,s,o,a,r,n,h){this.ax=i,this.ay=s,this.arotation=o,this.ascaleX=a,this.ascaleY=r,this.ashearX=n,this.ashearY=h,this.appliedValid=!0;var l=this.parent,p=this.matrix;if(null==l){var c=o+90+h,d=e.MathUtils.cosDeg(o+n)*a,u=e.MathUtils.cosDeg(c)*r,g=e.MathUtils.sinDeg(o+n)*a,m=e.MathUtils.sinDeg(c)*r,y=this.skeleton;return y.flipX&&(i=-i,d=-d,u=-u),y.flipY!==t.yDown&&(s=-s,g=-g,m=-m),p.a=d,p.c=u,p.b=g,p.d=m,p.tx=i+y.x,void(p.ty=s+y.y)}var f=l.matrix.a,b=l.matrix.c,w=l.matrix.b,v=l.matrix.d;switch(p.tx=f*i+b*s+l.matrix.tx,p.ty=w*i+v*s+l.matrix.ty,this.data.transformMode){case e.TransformMode.Normal:var c=o+90+h,d=e.MathUtils.cosDeg(o+n)*a,u=e.MathUtils.cosDeg(c)*r,g=e.MathUtils.sinDeg(o+n)*a,m=e.MathUtils.sinDeg(c)*r;return p.a=f*d+b*g,p.c=f*u+b*m,p.b=w*d+v*g,void(p.d=w*u+v*m);case e.TransformMode.OnlyTranslation:c=o+90+h;p.a=e.MathUtils.cosDeg(o+n)*a,p.c=e.MathUtils.cosDeg(c)*r,p.b=e.MathUtils.sinDeg(o+n)*a,p.d=e.MathUtils.sinDeg(c)*r;break;case e.TransformMode.NoRotationOrReflection:var k=0;(C=f*f+w*w)>1e-4?(b=w*(C=Math.abs(f*v-b*w)/C),v=f*C,k=Math.atan2(w,f)*e.MathUtils.radDeg):(f=0,w=0,k=90-Math.atan2(v,b)*e.MathUtils.radDeg);var S=o+n-k,x=o+h-k+90,d=e.MathUtils.cosDeg(S)*a,u=e.MathUtils.cosDeg(x)*r,g=e.MathUtils.sinDeg(S)*a,m=e.MathUtils.sinDeg(x)*r;p.a=f*d-b*g,p.c=f*u-b*m,p.b=w*d+v*g,p.d=w*u+v*m;break;case e.TransformMode.NoScale:case e.TransformMode.NoScaleOrReflection:var P=e.MathUtils.cosDeg(o),B=e.MathUtils.sinDeg(o),T=f*P+b*B,G=w*P+v*B,C=Math.sqrt(T*T+G*G);C>1e-5&&(C=1/C),T*=C,G*=C,C=Math.sqrt(T*T+G*G);var A=Math.PI/2+Math.atan2(G,T),M=Math.cos(A)*C,I=Math.sin(A)*C,d=e.MathUtils.cosDeg(n)*a,u=e.MathUtils.cosDeg(90+h)*r,g=e.MathUtils.sinDeg(n)*a,m=e.MathUtils.sinDeg(90+h)*r;return p.a=T*d+M*g,p.c=T*u+M*m,p.b=G*d+I*g,p.d=G*u+I*m,void((this.data.transformMode!=e.TransformMode.NoScaleOrReflection?f*v-b*w<0:this.skeleton.flipX!=this.skeleton.flipY!=t.yDown)&&(p.c=-p.c,p.d=-p.d))}this.skeleton.flipX&&(p.a=-p.a,p.c=-p.c),this.skeleton.flipY!=t.yDown&&(p.b=-p.b,p.d=-p.d)},t.prototype.setToSetupPose=function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*e.MathUtils.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*e.MathUtils.radDeg},t.prototype.getWorldScaleX=function(){var e=this.matrix;return Math.sqrt(e.a*e.a+e.c*e.c)},t.prototype.getWorldScaleY=function(){var e=this.matrix;return Math.sqrt(e.b*e.b+e.d*e.d)},t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent,i=this.matrix;if(null==t)return this.ax=i.tx,this.ay=i.ty,this.arotation=Math.atan2(i.b,i.a)*e.MathUtils.radDeg,this.ascaleX=Math.sqrt(i.a*i.a+i.b*i.b),this.ascaleY=Math.sqrt(i.c*i.c+i.d*i.d),this.ashearX=0,void(this.ashearY=Math.atan2(i.a*i.c+i.b*i.d,i.a*i.d-i.b*i.c)*e.MathUtils.radDeg);var s=t.matrix,o=1/(s.a*s.d-s.b*s.c),a=i.tx-s.tx,r=i.ty-s.ty;this.ax=a*s.d*o-r*s.c*o,this.ay=r*s.a*o-a*s.b*o;var n=o*s.d,h=o*s.a,l=o*s.c,p=o*s.b,c=n*i.a-l*i.b,d=n*i.c-l*i.d,u=h*i.b-p*i.a,g=h*i.d-p*i.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+u*u),this.ascaleX>1e-4){var m=c*g-d*u;this.ascaleY=m/this.ascaleX,this.ashearY=Math.atan2(c*d+u*g,m)*e.MathUtils.radDeg,this.arotation=Math.atan2(u,c)*e.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(d*d+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,d)*e.MathUtils.radDeg},t.prototype.worldToLocal=function(e){var t=this.matrix,i=t.a,s=t.c,o=t.b,a=t.d,r=1/(i*a-s*o),n=e.x-t.tx,h=e.y-t.ty;return e.x=n*a*r-h*s*r,e.y=h*i*r-n*o*r,e},t.prototype.localToWorld=function(e){var t=this.matrix,i=e.x,s=e.y;return e.x=i*t.a+s*t.c+t.tx,e.y=i*t.b+s*t.d+t.ty,e},t.prototype.worldToLocalRotation=function(t){var i=e.MathUtils.sinDeg(t),s=e.MathUtils.cosDeg(t),o=this.matrix;return Math.atan2(o.a*i-o.b*s,o.d*s-o.c*i)*e.MathUtils.radDeg},t.prototype.localToWorldRotation=function(t){var i=e.MathUtils.sinDeg(t),s=e.MathUtils.cosDeg(t),o=this.matrix;return Math.atan2(s*o.b+i*o.d,s*o.a+i*o.c)*e.MathUtils.radDeg},t.prototype.rotateWorld=function(t){var i=this.matrix,s=i.a,o=i.c,a=i.b,r=i.d,n=e.MathUtils.cosDeg(t),h=e.MathUtils.sinDeg(t);i.a=n*s-h*a,i.c=n*o-h*r,i.b=h*s+n*a,i.d=h*o+n*r,this.appliedValid=!1},t.yDown=!1,t}();e.Bone=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){return function(e,t,s){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=i.Normal,e<0)throw new Error("index must be >= 0.");if(null==t)throw new Error("name cannot be null.");this.index=e,this.name=t,this.parent=s}}();e.BoneData=t;var i;!function(e){e[e.Normal=0]="Normal",e[e.OnlyTranslation=1]="OnlyTranslation",e[e.NoRotationOrReflection=2]="NoRotationOrReflection",e[e.NoScale=3]="NoScale",e[e.NoScaleOrReflection=4]="NoScaleOrReflection"}(i=e.TransformMode||(e.TransformMode={}))}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){return function(e,t){if(null==t)throw new Error("data cannot be null.");this.time=e,this.data=t}}();e.Event=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){return function(e){this.name=e}}();e.EventData=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function t(e,t){if(this.mix=1,this.bendDirection=0,null==e)throw new Error("data cannot be null.");if(null==t)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.bendDirection=e.bendDirection,this.bones=new Array;for(var i=0;i<e.bones.length;i++)this.bones.push(t.findBone(e.bones[i].name));this.target=t.findBone(e.target.name)}return t.prototype.getOrder=function(){return this.data.order},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var e=this.target,t=this.bones;switch(t.length){case 1:this.apply1(t[0],e.worldX,e.worldY,this.mix);break;case 2:this.apply2(t[0],t[1],e.worldX,e.worldY,this.bendDirection,this.mix)}},t.prototype.apply1=function(t,i,s,o){t.appliedValid||t.updateAppliedTransform();var a=t.parent.matrix,r=1/(a.a*a.d-a.b*a.c),n=i-a.tx,h=s-a.ty,l=(n*a.d-h*a.c)*r-t.ax,p=(h*a.a-n*a.b)*r-t.ay,c=Math.atan2(p,l)*e.MathUtils.radDeg-t.ashearX-t.arotation;t.ascaleX<0&&(c+=180),c>180?c-=360:c<-180&&(c+=360),t.updateWorldTransformWith(t.ax,t.ay,t.arotation+c*o,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY)},t.prototype.apply2=function(t,i,s,o,a,r){if(0!=r){t.appliedValid||t.updateAppliedTransform(),i.appliedValid||i.updateAppliedTransform();var n=t.ax,h=t.ay,l=t.ascaleX,p=t.ascaleY,c=i.ascaleX,d=t.matrix,u=0,g=0,m=0;l<0?(l=-l,u=180,m=-1):(u=0,m=1),p<0&&(p=-p,m=-m),c<0?(c=-c,g=180):g=0;var y=i.ax,f=0,b=0,w=0,v=d.a,k=d.c,S=d.b,x=d.d,P=Math.abs(l-p)<=1e-4;P?(b=v*y+k*(f=i.ay)+d.tx,w=S*y+x*f+d.ty):(f=0,b=v*y+d.tx,w=S*y+d.ty);var B=t.parent.matrix;v=B.a,k=B.c,S=B.b;var T=1/(v*(x=B.d)-k*S),G=s-B.tx,C=o-B.ty,A=(G*x-C*k)*T-n,M=(C*v-G*S)*T-h,I=((G=b-B.tx)*x-(C=w-B.ty)*k)*T-n,L=(C*v-G*S)*T-h,H=Math.sqrt(I*I+L*L),R=i.data.length*c,D=0,O=0;e:if(P){var E=(A*A+M*M-H*H-(R*=l)*R)/(2*H*R);E<-1?E=-1:E>1&&(E=1),O=Math.acos(E)*a,v=H+R*E,k=R*Math.sin(O),D=Math.atan2(M*v-A*k,A*v+M*k)}else{var F=(v=l*R)*v,_=(k=p*R)*k,j=A*A+M*M,W=Math.atan2(M,A),U=-2*_*H,z=_-F;if((x=U*U-4*z*(S=_*H*H+F*j-F*_))>=0){var V=Math.sqrt(x);U<0&&(V=-V);var X=(V=-(U+V)/2)/z,N=S/V,q=Math.abs(X)<Math.abs(N)?X:N;if(q*q<=j){C=Math.sqrt(j-q*q)*a,D=W-Math.atan2(C,q),O=Math.atan2(C/p,(q-H)/l);break e}}var Y=e.MathUtils.PI,K=H-v,Z=K*K,J=0,Q=0,$=H+v,ee=$*$,te=0;(S=-v*H/(F-_))>=-1&&S<=1&&(S=Math.acos(S),(x=(G=v*Math.cos(S)+H)*G+(C=k*Math.sin(S))*C)<Z&&(Y=S,Z=x,K=G,J=C),x>ee&&(Q=S,ee=x,$=G,te=C)),j<=(Z+ee)/2?(D=W-Math.atan2(J*a,K),O=Y*a):(D=W-Math.atan2(te*a,$),O=Q*a)}var ie=Math.atan2(f,y)*m,se=t.arotation;(D=(D-ie)*e.MathUtils.radDeg+u-se)>180?D-=360:D<-180&&(D+=360),t.updateWorldTransformWith(n,h,se+D*r,t.ascaleX,t.ascaleY,0,0),se=i.arotation,(O=((O+ie)*e.MathUtils.radDeg-i.ashearX)*m+g-se)>180?O-=360:O<-180&&(O+=360),i.updateWorldTransformWith(y,f,se+O*r,i.ascaleX,i.ascaleY,i.ashearX,i.ashearY)}else i.updateWorldTransform()},t}();e.IkConstraint=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){return function(e){this.order=0,this.bones=new Array,this.bendDirection=1,this.mix=1,this.name=e}}();e.IkConstraintData=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function t(e,t){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==e)throw new Error("data cannot be null.");if(null==t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(var i=0,s=e.bones.length;i<s;i++)this.bones.push(t.findBone(e.bones[i].name));this.target=t.findSlot(e.target.name),this.position=e.position,this.spacing=e.spacing,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof e.PathAttachment){var i=this.rotateMix,s=this.translateMix,o=i>0;if(s>0||o){var a=this.data,r=a.spacingMode,n=r==e.SpacingMode.Length,h=a.rotateMode,l=h==e.RotateMode.Tangent,p=h==e.RotateMode.ChainScale,c=this.bones.length,d=l?c:c+1,u=this.bones,g=e.Utils.setArraySize(this.spaces,d),m=null,y=this.spacing;if(p||n){p&&(m=e.Utils.setArraySize(this.lengths,c));for(var f=0,b=d-1;f<b;){var w=(A=u[f]).data.length,v=w*A.matrix.a,k=w*A.matrix.b,S=Math.sqrt(v*v+k*k);p&&(m[f]=S),g[++f]=(n?w+y:y)*S/w}}else for(f=1;f<d;f++)g[f]=y;var x=this.computeWorldPositions(t,d,l,a.positionMode==e.PositionMode.Percent,r==e.SpacingMode.Percent),P=x[0],B=x[1],T=a.offsetRotation,G=!1;0==T?G=h==e.RotateMode.Chain:(G=!1,T*=(C=this.target.bone.matrix).a*C.d-C.b*C.c>0?e.MathUtils.degRad:-e.MathUtils.degRad);for(var f=0,C=3;f<c;f++,C+=3){var A=u[f],M=A.matrix;M.tx+=(P-M.tx)*s,M.ty+=(B-M.ty)*s;var I=(v=x[C])-P,L=(k=x[C+1])-B;if(p){var H=m[f];if(0!=H){var R=(Math.sqrt(I*I+L*L)/H-1)*i+1;M.a*=R,M.b*=R}}if(P=v,B=k,o){var D=M.a,O=M.c,E=M.b,F=M.d,_=0,j=0,W=0;if(_=l?x[C-1]:0==g[f+1]?x[C+2]:Math.atan2(L,I),_-=Math.atan2(E,D),G){j=Math.cos(_),W=Math.sin(_);var U=A.data.length;P+=(U*(j*D-W*E)-I)*i,B+=(U*(W*D+j*E)-L)*i}else _+=T;_>e.MathUtils.PI?_-=e.MathUtils.PI2:_<-e.MathUtils.PI&&(_+=e.MathUtils.PI2),_*=i,j=Math.cos(_),W=Math.sin(_),M.a=j*D-W*E,M.c=j*O-W*F,M.b=W*D+j*E,M.d=W*O+j*F}A.appliedValid=!1}}}},t.prototype.computeWorldPositions=function(i,s,o,a,r){var n=this.target,h=this.position,l=this.spaces,p=e.Utils.setArraySize(this.positions,3*s+2),c=null,d=i.closed,u=i.worldVerticesLength,g=u/6,m=t.NONE;if(!i.constantSpeed){var y=i.lengths,f=y[g-=d?1:2];if(a&&(h*=f),r)for(b=0;b<s;b++)l[b]*=f;c=e.Utils.setArraySize(this.world,8);for(var b=0,w=0,v=0;b<s;b++,w+=3){X=h+=V=l[b];if(d)(X%=f)<0&&(X+=f),v=0;else{if(X<0){m!=t.BEFORE&&(m=t.BEFORE,i.computeWorldVertices(n,2,4,c,0,2)),this.addBeforePosition(X,c,0,p,w);continue}if(X>f){m!=t.AFTER&&(m=t.AFTER,i.computeWorldVertices(n,u-6,4,c,0,2)),this.addAfterPosition(X-f,c,0,p,w);continue}}for(;;v++){var k=y[v];if(!(X>k)){0==v?X/=k:X=(X-(K=y[v-1]))/(k-K);break}}v!=m&&(m=v,d&&v==g?(i.computeWorldVertices(n,u-4,4,c,0,2),i.computeWorldVertices(n,0,4,c,4,2)):i.computeWorldVertices(n,6*v+2,8,c,0,2)),this.addCurvePosition(X,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],p,w,o||b>0&&0==V)}return p}d?(u+=2,c=e.Utils.setArraySize(this.world,u),i.computeWorldVertices(n,2,u-4,c,0,2),i.computeWorldVertices(n,0,2,c,u-4,2),c[u-2]=c[0],c[u-1]=c[1]):(g--,u-=4,c=e.Utils.setArraySize(this.world,u),i.computeWorldVertices(n,2,u,c,0,2));for(var S=e.Utils.setArraySize(this.curves,g),x=0,P=c[0],B=c[1],T=0,G=0,C=0,A=0,M=0,I=0,L=0,H=0,R=0,D=0,O=0,E=0,F=0,_=0,b=0,j=2;b<g;b++,j+=6)T=c[j],G=c[j+1],C=c[j+2],A=c[j+3],O=2*(L=.1875*(P-2*T+C))+(R=.09375*(3*(T-C)-P+(M=c[j+4]))),E=2*(H=.1875*(B-2*G+A))+(D=.09375*(3*(G-A)-B+(I=c[j+5]))),F=.75*(T-P)+L+.16666667*R,_=.75*(G-B)+H+.16666667*D,x+=Math.sqrt(F*F+_*_),F+=O,_+=E,O+=R,E+=D,x+=Math.sqrt(F*F+_*_),F+=O,_+=E,x+=Math.sqrt(F*F+_*_),F+=O+R,_+=E+D,x+=Math.sqrt(F*F+_*_),S[b]=x,P=M,B=I;if(a&&(h*=x),r)for(b=0;b<s;b++)l[b]*=x;for(var W=this.segments,U=0,b=0,w=0,v=0,z=0;b<s;b++,w+=3){var V=l[b],X=h+=V;if(d)(X%=x)<0&&(X+=x),v=0;else{if(X<0){this.addBeforePosition(X,c,0,p,w);continue}if(X>x){this.addAfterPosition(X-x,c,u-4,p,w);continue}}for(;;v++){var N=S[v];if(!(X>N)){0==v?X/=N:X=(X-(K=S[v-1]))/(N-K);break}}if(v!=m){m=v;var q=6*v;for(P=c[q],B=c[q+1],T=c[q+2],G=c[q+3],C=c[q+4],A=c[q+5],O=2*(L=.03*(P-2*T+C))+(R=.006*(3*(T-C)-P+(M=c[q+6]))),E=2*(H=.03*(B-2*G+A))+(D=.006*(3*(G-A)-B+(I=c[q+7]))),F=.3*(T-P)+L+.16666667*R,_=.3*(G-B)+H+.16666667*D,U=Math.sqrt(F*F+_*_),W[0]=U,q=1;q<8;q++)F+=O,_+=E,O+=R,E+=D,U+=Math.sqrt(F*F+_*_),W[q]=U;F+=O,_+=E,U+=Math.sqrt(F*F+_*_),W[8]=U,F+=O+R,_+=E+D,U+=Math.sqrt(F*F+_*_),W[9]=U,z=0}for(X*=U;;z++){var Y=W[z];if(!(X>Y)){if(0==z)X/=Y;else{var K=W[z-1];X=z+(X-K)/(Y-K)}break}}this.addCurvePosition(.1*X,P,B,T,G,C,A,M,I,p,w,o||b>0&&0==V)}return p},t.prototype.addBeforePosition=function(e,t,i,s,o){var a=t[i],r=t[i+1],n=t[i+2]-a,h=t[i+3]-r,l=Math.atan2(h,n);s[o]=a+e*Math.cos(l),s[o+1]=r+e*Math.sin(l),s[o+2]=l},t.prototype.addAfterPosition=function(e,t,i,s,o){var a=t[i+2],r=t[i+3],n=a-t[i],h=r-t[i+1],l=Math.atan2(h,n);s[o]=a+e*Math.cos(l),s[o+1]=r+e*Math.sin(l),s[o+2]=l},t.prototype.addCurvePosition=function(e,t,i,s,o,a,r,n,h,l,p,c){(0==e||isNaN(e))&&(e=1e-4);var d=e*e,u=d*e,g=1-e,m=g*g,y=m*g,f=g*e,b=3*f,w=g*b,v=b*e,k=t*y+s*w+a*v+n*u,S=i*y+o*w+r*v+h*u;l[p]=k,l[p+1]=S,c&&(l[p+2]=Math.atan2(S-(i*m+o*f*2+r*d),k-(t*m+s*f*2+a*d)))},t.prototype.getOrder=function(){return this.data.order},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,t}();e.PathConstraint=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){return function(e){this.order=0,this.bones=new Array,this.name=e}}();e.PathConstraintData=t;!function(e){e[e.Fixed=0]="Fixed",e[e.Percent=1]="Percent"}(e.PositionMode||(e.PositionMode={}));!function(e){e[e.Length=0]="Length",e[e.Fixed=1]="Fixed",e[e.Percent=2]="Percent"}(e.SpacingMode||(e.SpacingMode={}));!function(e){e[e.Tangent=0]="Tangent",e[e.Chain=1]="Chain",e[e.ChainScale=2]="ChainScale"}(e.RotateMode||(e.RotateMode={}))}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function t(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.flipX=!1,this.flipY=!1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(l=0;l<t.bones.length;l++){var i=t.bones[l],s=void 0;if(null==i.parent)s=new e.Bone(i,this,null);else{var o=this.bones[i.parent.index];s=new e.Bone(i,this,o),o.children.push(s)}this.bones.push(s)}this.slots=new Array,this.drawOrder=new Array;for(l=0;l<t.slots.length;l++){var a=t.slots[l],s=this.bones[a.boneData.index],r=new e.Slot(a,s);this.slots.push(r),this.drawOrder.push(r)}this.ikConstraints=new Array;for(l=0;l<t.ikConstraints.length;l++){var n=t.ikConstraints[l];this.ikConstraints.push(new e.IkConstraint(n,this))}this.transformConstraints=new Array;for(l=0;l<t.transformConstraints.length;l++){var h=t.transformConstraints[l];this.transformConstraints.push(new e.TransformConstraint(h,this))}this.pathConstraints=new Array;for(var l=0;l<t.pathConstraints.length;l++){var p=t.pathConstraints[l];this.pathConstraints.push(new e.PathConstraint(p,this))}this.color=new e.Color(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var e=this.bones,t=0,i=e.length;t<i;t++)e[t].sorted=!1;var s=this.ikConstraints,o=this.transformConstraints,a=this.pathConstraints,r=s.length,n=o.length,h=a.length,l=r+n+h;e:for(t=0;t<l;t++){for(p=0;p<r;p++)if((c=s[p]).data.order==t){this.sortIkConstraint(c);continue e}for(p=0;p<n;p++)if((c=o[p]).data.order==t){this.sortTransformConstraint(c);continue e}for(var p=0;p<h;p++){var c=a[p];if(c.data.order==t){this.sortPathConstraint(c);continue e}}}for(var t=0,i=e.length;t<i;t++)this.sortBone(e[t])},t.prototype.sortIkConstraint=function(e){var t=e.target;this.sortBone(t);var i=e.bones,s=i[0];if(this.sortBone(s),i.length>1){var o=i[i.length-1];this._updateCache.indexOf(o)>-1||this.updateCacheReset.push(o)}this._updateCache.push(e),this.sortReset(s.children),i[i.length-1].sorted=!0},t.prototype.sortPathConstraint=function(t){var i=t.target,s=i.data.index,o=i.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,s,o),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,s,o);for(var a=0,r=this.data.skins.length;a<r;a++)this.sortPathConstraintAttachment(this.data.skins[a],s,o);var n=i.getAttachment();n instanceof e.PathAttachment&&this.sortPathConstraintAttachmentWith(n,o);for(var h=t.bones,l=h.length,a=0;a<l;a++)this.sortBone(h[a]);this._updateCache.push(t);for(a=0;a<l;a++)this.sortReset(h[a].children);for(a=0;a<l;a++)h[a].sorted=!0},t.prototype.sortTransformConstraint=function(e){this.sortBone(e.target);var t=e.bones,i=t.length;if(e.data.local)for(o=0;o<i;o++){var s=t[o];this.sortBone(s.parent),this._updateCache.indexOf(s)>-1||this.updateCacheReset.push(s)}else for(var o=0;o<i;o++)this.sortBone(t[o]);this._updateCache.push(e);for(a=0;a<i;a++)this.sortReset(t[a].children);for(var a=0;a<i;a++)t[a].sorted=!0},t.prototype.sortPathConstraintAttachment=function(e,t,i){var s=e.attachments[t];if(s)for(var o in s)this.sortPathConstraintAttachmentWith(s[o],i)},t.prototype.sortPathConstraintAttachmentWith=function(t,i){if(t instanceof e.PathAttachment){var s=t.bones;if(null==s)this.sortBone(i);else for(var o=this.bones,a=0;a<s.length;)for(var r=s[a++],n=a+r;a<n;a++){var h=s[a];this.sortBone(o[h])}}},t.prototype.sortBone=function(e){if(!e.sorted){var t=e.parent;null!=t&&this.sortBone(t),e.sorted=!0,this._updateCache.push(e)}},t.prototype.sortReset=function(e){for(var t=0,i=e.length;t<i;t++){var s=e[t];s.sorted&&this.sortReset(s.children),s.sorted=!1}},t.prototype.updateWorldTransform=function(){for(var e=this.updateCacheReset,t=0,i=e.length;t<i;t++){var s=e[t];s.ax=s.x,s.ay=s.y,s.arotation=s.rotation,s.ascaleX=s.scaleX,s.ascaleY=s.scaleY,s.ashearX=s.shearX,s.ashearY=s.shearY,s.appliedValid=!0}for(var o=this._updateCache,t=0,i=o.length;t<i;t++)o[t].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var e=this.bones,t=0,i=e.length;t<i;t++)e[t].setToSetupPose();for(var s=this.ikConstraints,t=0,i=s.length;t<i;t++)(r=s[t]).bendDirection=r.data.bendDirection,r.mix=r.data.mix;for(var o=this.transformConstraints,t=0,i=o.length;t<i;t++){n=(r=o[t]).data;r.rotateMix=n.rotateMix,r.translateMix=n.translateMix,r.scaleMix=n.scaleMix,r.shearMix=n.shearMix}for(var a=this.pathConstraints,t=0,i=a.length;t<i;t++){var r=a[t],n=r.data;r.position=n.position,r.spacing=n.spacing,r.rotateMix=n.rotateMix,r.translateMix=n.translateMix}},t.prototype.setSlotsToSetupPose=function(){var t=this.slots;e.Utils.arrayCopy(t,0,this.drawOrder,0,t.length);for(var i=0,s=t.length;i<s;i++)t[i].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(e){if(null==e)throw new Error("boneName cannot be null.");for(var t=this.bones,i=0,s=t.length;i<s;i++){var o=t[i];if(o.data.name==e)return o}return null},t.prototype.findBoneIndex=function(e){if(null==e)throw new Error("boneName cannot be null.");for(var t=this.bones,i=0,s=t.length;i<s;i++)if(t[i].data.name==e)return i;return-1},t.prototype.findSlot=function(e){if(null==e)throw new Error("slotName cannot be null.");for(var t=this.slots,i=0,s=t.length;i<s;i++){var o=t[i];if(o.data.name==e)return o}return null},t.prototype.findSlotIndex=function(e){if(null==e)throw new Error("slotName cannot be null.");for(var t=this.slots,i=0,s=t.length;i<s;i++)if(t[i].data.name==e)return i;return-1},t.prototype.setSkinByName=function(e){var t=this.data.findSkin(e);if(null==t)throw new Error("Skin not found: "+e);this.setSkin(t)},t.prototype.setSkin=function(e){if(null!=e)if(null!=this.skin)e.attachAll(this,this.skin);else for(var t=this.slots,i=0,s=t.length;i<s;i++){var o=t[i],a=o.data.attachmentName;if(null!=a){var r=e.getAttachment(i,a);null!=r&&o.setAttachment(r)}}this.skin=e},t.prototype.getAttachmentByName=function(e,t){return this.getAttachment(this.data.findSlotIndex(e),t)},t.prototype.getAttachment=function(e,t){if(null==t)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var i=this.skin.getAttachment(e,t);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,t):null},t.prototype.setAttachment=function(e,t){if(null==e)throw new Error("slotName cannot be null.");for(var i=this.slots,s=0,o=i.length;s<o;s++){var a=i[s];if(a.data.name==e){var r=null;if(null!=t&&null==(r=this.getAttachment(s,t)))throw new Error("Attachment not found: "+t+", for slot: "+e);return void a.setAttachment(r)}}throw new Error("Slot not found: "+e)},t.prototype.findIkConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.ikConstraints,i=0,s=t.length;i<s;i++){var o=t[i];if(o.data.name==e)return o}return null},t.prototype.findTransformConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.transformConstraints,i=0,s=t.length;i<s;i++){var o=t[i];if(o.data.name==e)return o}return null},t.prototype.findPathConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.pathConstraints,i=0,s=t.length;i<s;i++){var o=t[i];if(o.data.name==e)return o}return null},t.prototype.getBounds=function(t,i,s){if(null==t)throw new Error("offset cannot be null.");if(null==i)throw new Error("size cannot be null.");for(var o=this.drawOrder,a=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,l=0,p=o.length;l<p;l++){var c=o[l],d=0,u=null,g=c.getAttachment();if(g instanceof e.RegionAttachment)d=8,u=e.Utils.setArraySize(s,d,0),g.computeWorldVertices(c.bone,u,0,2);else if(g instanceof e.MeshAttachment){var m=g;d=m.worldVerticesLength,u=e.Utils.setArraySize(s,d,0),m.computeWorldVertices(c,0,d,u,0,2)}if(null!=u)for(var y=0,f=u.length;y<f;y+=2){var b=u[y],w=u[y+1];a=Math.min(a,b),r=Math.min(r,w),n=Math.max(n,b),h=Math.max(h,w)}}t.set(a,r),i.set(n-a,h-r)},t.prototype.update=function(e){this.time+=e},t}();e.Skeleton=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new e.Pool(function(){return e.Utils.newFloatArray(16)})}return t.prototype.update=function(t,i){if(null==t)throw new Error("skeleton cannot be null.");var s=this.boundingBoxes,o=this.polygons,a=this.polygonPool,r=t.slots,n=r.length;s.length=0,a.freeAll(o),o.length=0;for(var h=0;h<n;h++){var l=r[h],p=l.getAttachment();if(p instanceof e.BoundingBoxAttachment){var c=p;s.push(c);var d=a.obtain();d.length!=c.worldVerticesLength&&(d=e.Utils.newFloatArray(c.worldVerticesLength)),o.push(d),c.computeWorldVertices(l,0,c.worldVerticesLength,d,0,2)}}i?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=this.polygons,a=0,r=o.length;a<r;a++)for(var n=o[a],h=n,l=0,p=n.length;l<p;l+=2){var c=h[l],d=h[l+1];e=Math.min(e,c),t=Math.min(t,d),i=Math.max(i,c),s=Math.max(s,d)}this.minX=e,this.minY=t,this.maxX=i,this.maxY=s},t.prototype.aabbContainsPoint=function(e,t){return e>=this.minX&&e<=this.maxX&&t>=this.minY&&t<=this.maxY},t.prototype.aabbIntersectsSegment=function(e,t,i,s){var o=this.minX,a=this.minY,r=this.maxX,n=this.maxY;if(e<=o&&i<=o||t<=a&&s<=a||e>=r&&i>=r||t>=n&&s>=n)return!1;var h=(s-t)/(i-e),l=h*(o-e)+t;if(l>a&&l<n)return!0;if((l=h*(r-e)+t)>a&&l<n)return!0;var p=(a-t)/h+e;return p>o&&p<r||(p=(n-t)/h+e)>o&&p<r},t.prototype.aabbIntersectsSkeleton=function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},t.prototype.containsPoint=function(e,t){for(var i=this.polygons,s=0,o=i.length;s<o;s++)if(this.containsPointPolygon(i[s],e,t))return this.boundingBoxes[s];return null},t.prototype.containsPointPolygon=function(e,t,i){for(var s=e,o=e.length,a=o-2,r=!1,n=0;n<o;n+=2){var h=s[n+1],l=s[a+1];if(h<i&&l>=i||l<i&&h>=i){var p=s[n];p+(i-h)/(l-h)*(s[a]-p)<t&&(r=!r)}a=n}return r},t.prototype.intersectsSegment=function(e,t,i,s){for(var o=this.polygons,a=0,r=o.length;a<r;a++)if(this.intersectsSegmentPolygon(o[a],e,t,i,s))return this.boundingBoxes[a];return null},t.prototype.intersectsSegmentPolygon=function(e,t,i,s,o){for(var a=e,r=e.length,n=t-s,h=i-o,l=t*o-i*s,p=a[r-2],c=a[r-1],d=0;d<r;d+=2){var u=a[d],g=a[d+1],m=p*g-c*u,y=p-u,f=c-g,b=n*f-h*y,w=(l*y-n*m)/b;if((w>=p&&w<=u||w>=u&&w<=p)&&(w>=t&&w<=s||w>=s&&w<=t)){var v=(l*f-h*m)/b;if((v>=c&&v<=g||v>=g&&v<=c)&&(v>=i&&v<=o||v>=o&&v<=i))return!0}p=u,c=g}return!1},t.prototype.getPolygon=function(e){if(null==e)throw new Error("boundingBox cannot be null.");var t=this.boundingBoxes.indexOf(e);return-1==t?null:this.polygons[t]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},t}();e.SkeletonBounds=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function t(){this.triangulator=new e.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return t.prototype.clipStart=function(i,s){if(null!=this.clipAttachment)return 0;this.clipAttachment=s;var o=s.worldVerticesLength,a=e.Utils.setArraySize(this.clippingPolygon,o);s.computeWorldVertices(i,0,o,a,0,2);var r=this.clippingPolygon;t.makeClockwise(r);for(var n=this.clippingPolygons=this.triangulator.decompose(r,this.triangulator.triangulate(r)),h=0,l=n.length;h<l;h++){var p=n[h];t.makeClockwise(p),p.push(p[0]),p.push(p[1])}return n.length},t.prototype.clipEndWithSlot=function(e){null!=this.clipAttachment&&this.clipAttachment.endSlot==e.data&&this.clipEnd()},t.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},t.prototype.isClipping=function(){return null!=this.clipAttachment},t.prototype.clipTriangles=function(t,i,s,o,a,r,n,h){var l=this.clipOutput,p=this.clippedVertices,c=this.clippedTriangles,d=this.clippingPolygons,u=this.clippingPolygons.length,g=h?12:8,m=0;p.length=0,c.length=0;e:for(var y=0;y<o;y+=3)for(var f=s[y]<<1,b=t[f],w=t[f+1],v=a[f],k=a[f+1],S=t[f=s[y+1]<<1],x=t[f+1],P=a[f],B=a[f+1],T=t[f=s[y+2]<<1],G=t[f+1],C=a[f],A=a[f+1],M=0;M<u;M++){var I=p.length;if(!this.clip(b,w,S,x,T,G,d[M],l)){(j=e.Utils.setArraySize(p,I+3*g))[I]=b,j[I+1]=w,j[I+2]=r.r,j[I+3]=r.g,j[I+4]=r.b,j[I+5]=r.a,h?(j[I+6]=v,j[I+7]=k,j[I+8]=n.r,j[I+9]=n.g,j[I+10]=n.b,j[I+11]=n.a,j[I+12]=S,j[I+13]=x,j[I+14]=r.r,j[I+15]=r.g,j[I+16]=r.b,j[I+17]=r.a,j[I+18]=P,j[I+19]=B,j[I+20]=n.r,j[I+21]=n.g,j[I+22]=n.b,j[I+23]=n.a,j[I+24]=T,j[I+25]=G,j[I+26]=r.r,j[I+27]=r.g,j[I+28]=r.b,j[I+29]=r.a,j[I+30]=C,j[I+31]=A,j[I+32]=n.r,j[I+33]=n.g,j[I+34]=n.b,j[I+35]=n.a):(j[I+6]=v,j[I+7]=k,j[I+8]=S,j[I+9]=x,j[I+10]=r.r,j[I+11]=r.g,j[I+12]=r.b,j[I+13]=r.a,j[I+14]=P,j[I+15]=B,j[I+16]=T,j[I+17]=G,j[I+18]=r.r,j[I+19]=r.g,j[I+20]=r.b,j[I+21]=r.a,j[I+22]=C,j[I+23]=A),I=c.length,(K=e.Utils.setArraySize(c,I+3))[I]=m,K[I+1]=m+1,K[I+2]=m+2,m+=3;continue e}var L=l.length;if(0!=L){for(var H=x-G,R=T-S,D=b-T,O=G-w,E=1/(H*D+R*(w-G)),F=L>>1,_=this.clipOutput,j=e.Utils.setArraySize(p,I+F*g),W=0;W<L;W+=2){var U=_[W],z=_[W+1];j[I]=U,j[I+1]=z,j[I+2]=r.r,j[I+3]=r.g,j[I+4]=r.b,j[I+5]=r.a;var V=U-T,X=z-G,N=(H*V+R*X)*E,q=(O*V+D*X)*E,Y=1-N-q;j[I+6]=v*N+P*q+C*Y,j[I+7]=k*N+B*q+A*Y,h&&(j[I+8]=n.r,j[I+9]=n.g,j[I+10]=n.b,j[I+11]=n.a),I+=g}I=c.length;var K=e.Utils.setArraySize(c,I+3*(F-2));F--;for(W=1;W<F;W++)K[I]=m,K[I+1]=m+W,K[I+2]=m+W+1,I+=3;m+=F+1}}},t.prototype.clip=function(e,t,i,s,o,a,r,n){var h=n,l=!1,p=null;r.length%4>=2?(p=n,n=this.scratch):p=this.scratch,p.length=0,p.push(e),p.push(t),p.push(i),p.push(s),p.push(o),p.push(a),p.push(e),p.push(t),n.length=0;for(var c=r,d=r.length-4,u=0;;u+=2){for(var g=c[u],m=c[u+1],y=c[u+2],f=c[u+3],b=g-y,w=m-f,v=p,k=p.length-2,S=n.length,x=0;x<k;x+=2){var P=v[x],B=v[x+1],T=v[x+2],G=v[x+3],C=b*(G-f)-w*(T-y)>0;if(b*(B-f)-w*(P-y)>0){if(C){n.push(T),n.push(G);continue}I=((M=T-P)*(m-B)-(A=G-B)*(g-P))/(A*(y-g)-M*(f-m));n.push(g+(y-g)*I),n.push(m+(f-m)*I)}else if(C){var A=G-B,M=T-P,I=(M*(m-B)-A*(g-P))/(A*(y-g)-M*(f-m));n.push(g+(y-g)*I),n.push(m+(f-m)*I),n.push(T),n.push(G)}l=!0}if(S==n.length)return h.length=0,!0;if(n.push(n[0]),n.push(n[1]),u==d)break;var L=n;(n=p).length=0,p=L}if(h!=n){h.length=0;for(var u=0,H=n.length-2;u<H;u++)h[u]=n[u]}else h.length=h.length-2;return l},t.makeClockwise=function(e){for(var t=e,i=e.length,s=t[i-2]*t[1]-t[0]*t[i-1],o=0,a=0,r=0,n=0,h=i-3;n<h;n+=2)o=t[n],a=t[n+1],r=t[n+2],s+=o*t[n+3]-r*a;if(!(s<0))for(var n=0,l=i-2,h=i>>1;n<h;n+=2){var p=t[n],c=t[n+1],d=l-n;t[n]=t[d],t[n+1]=t[d+1],t[d]=p,t[d+1]=c}},t}();e.SkeletonClipping=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function e(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return e.prototype.findBone=function(e){if(null==e)throw new Error("boneName cannot be null.");for(var t=this.bones,i=0,s=t.length;i<s;i++){var o=t[i];if(o.name==e)return o}return null},e.prototype.findBoneIndex=function(e){if(null==e)throw new Error("boneName cannot be null.");for(var t=this.bones,i=0,s=t.length;i<s;i++)if(t[i].name==e)return i;return-1},e.prototype.findSlot=function(e){if(null==e)throw new Error("slotName cannot be null.");for(var t=this.slots,i=0,s=t.length;i<s;i++){var o=t[i];if(o.name==e)return o}return null},e.prototype.findSlotIndex=function(e){if(null==e)throw new Error("slotName cannot be null.");for(var t=this.slots,i=0,s=t.length;i<s;i++)if(t[i].name==e)return i;return-1},e.prototype.findSkin=function(e){if(null==e)throw new Error("skinName cannot be null.");for(var t=this.skins,i=0,s=t.length;i<s;i++){var o=t[i];if(o.name==e)return o}return null},e.prototype.findEvent=function(e){if(null==e)throw new Error("eventDataName cannot be null.");for(var t=this.events,i=0,s=t.length;i<s;i++){var o=t[i];if(o.name==e)return o}return null},e.prototype.findAnimation=function(e){if(null==e)throw new Error("animationName cannot be null.");for(var t=this.animations,i=0,s=t.length;i<s;i++){var o=t[i];if(o.name==e)return o}return null},e.prototype.findIkConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.ikConstraints,i=0,s=t.length;i<s;i++){var o=t[i];if(o.name==e)return o}return null},e.prototype.findTransformConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.transformConstraints,i=0,s=t.length;i<s;i++){var o=t[i];if(o.name==e)return o}return null},e.prototype.findPathConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.pathConstraints,i=0,s=t.length;i<s;i++){var o=t[i];if(o.name==e)return o}return null},e.prototype.findPathConstraintIndex=function(e){if(null==e)throw new Error("pathConstraintName cannot be null.");for(var t=this.pathConstraints,i=0,s=t.length;i<s;i++)if(t[i].name==e)return i;return-1},e}();e.SkeletonData=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function t(e){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return t.prototype.readSkeletonData=function(i){var s=this.scale,o=new e.SkeletonData,a="string"==typeof i?JSON.parse(i):i,r=a.skeleton;if(null!=r&&(o.hash=r.hash,o.version=r.spine,o.width=r.width,o.height=r.height,o.fps=r.fps,o.imagesPath=r.images),a.bones)for(G=0;G<a.bones.length;G++){var n=a.bones[G],h=null,l=this.getValue(n,"parent",null);if(null!=l&&null==(h=o.findBone(l)))throw new Error("Parent bone not found: "+l);(u=new e.BoneData(o.bones.length,n.name,h)).length=this.getValue(n,"length",0)*s,u.x=this.getValue(n,"x",0)*s,u.y=this.getValue(n,"y",0)*s,u.rotation=this.getValue(n,"rotation",0),u.scaleX=this.getValue(n,"scaleX",1),u.scaleY=this.getValue(n,"scaleY",1),u.shearX=this.getValue(n,"shearX",0),u.shearY=this.getValue(n,"shearY",0),u.transformMode=t.transformModeFromString(this.getValue(n,"transform","normal")),o.bones.push(u)}if(a.slots)for(G=0;G<a.slots.length;G++){var p=(P=a.slots[G]).name,c=P.bone,d=o.findBone(c);if(null==d)throw new Error("Slot bone not found: "+c);var u=new e.SlotData(o.slots.length,p,d),g=this.getValue(P,"color",null);null!=g&&u.color.setFromString(g);var m=this.getValue(P,"dark",null);null!=m&&(u.darkColor=new e.Color(1,1,1,1),u.darkColor.setFromString(m)),u.attachmentName=this.getValue(P,"attachment",null),u.blendMode=t.blendModeFromString(this.getValue(P,"blend","normal")),o.slots.push(u)}if(a.ik)for(G=0;G<a.ik.length;G++){y=a.ik[G];(u=new e.IkConstraintData(y.name)).order=this.getValue(y,"order",0);for(f=0;f<y.bones.length;f++){c=y.bones[f];if(null==(b=o.findBone(c)))throw new Error("IK bone not found: "+c);u.bones.push(b)}w=y.target;if(u.target=o.findBone(w),null==u.target)throw new Error("IK target bone not found: "+w);u.bendDirection=this.getValue(y,"bendPositive",!0)?1:-1,u.mix=this.getValue(y,"mix",1),o.ikConstraints.push(u)}if(a.transform)for(G=0;G<a.transform.length;G++){y=a.transform[G];(u=new e.TransformConstraintData(y.name)).order=this.getValue(y,"order",0);for(f=0;f<y.bones.length;f++){c=y.bones[f];if(null==(b=o.findBone(c)))throw new Error("Transform constraint bone not found: "+c);u.bones.push(b)}w=y.target;if(u.target=o.findBone(w),null==u.target)throw new Error("Transform constraint target bone not found: "+w);u.local=this.getValue(y,"local",!1),u.relative=this.getValue(y,"relative",!1),u.offsetRotation=this.getValue(y,"rotation",0),u.offsetX=this.getValue(y,"x",0)*s,u.offsetY=this.getValue(y,"y",0)*s,u.offsetScaleX=this.getValue(y,"scaleX",0),u.offsetScaleY=this.getValue(y,"scaleY",0),u.offsetShearY=this.getValue(y,"shearY",0),u.rotateMix=this.getValue(y,"rotateMix",1),u.translateMix=this.getValue(y,"translateMix",1),u.scaleMix=this.getValue(y,"scaleMix",1),u.shearMix=this.getValue(y,"shearMix",1),o.transformConstraints.push(u)}if(a.path)for(G=0;G<a.path.length;G++){var y=a.path[G];(u=new e.PathConstraintData(y.name)).order=this.getValue(y,"order",0);for(var f=0;f<y.bones.length;f++){var c=y.bones[f],b=o.findBone(c);if(null==b)throw new Error("Transform constraint bone not found: "+c);u.bones.push(b)}var w=y.target;if(u.target=o.findSlot(w),null==u.target)throw new Error("Path target slot not found: "+w);u.positionMode=t.positionModeFromString(this.getValue(y,"positionMode","percent")),u.spacingMode=t.spacingModeFromString(this.getValue(y,"spacingMode","length")),u.rotateMode=t.rotateModeFromString(this.getValue(y,"rotateMode","tangent")),u.offsetRotation=this.getValue(y,"rotation",0),u.position=this.getValue(y,"position",0),u.positionMode==e.PositionMode.Fixed&&(u.position*=s),u.spacing=this.getValue(y,"spacing",0),u.spacingMode!=e.SpacingMode.Length&&u.spacingMode!=e.SpacingMode.Fixed||(u.spacing*=s),u.rotateMix=this.getValue(y,"rotateMix",1),u.translateMix=this.getValue(y,"translateMix",1),o.pathConstraints.push(u)}if(a.skins)for(var v in a.skins){var k=a.skins[v],S=new e.Skin(v);for(var p in k){var x=o.findSlotIndex(p);if(-1==x)throw new Error("Slot not found: "+p);var P=k[p];for(var B in P){var T=this.readAttachment(P[B],S,x,B,o);null!=T&&S.addAttachment(x,B,T)}}o.skins.push(S),"default"==S.name&&(o.defaultSkin=S)}for(var G=0,C=this.linkedMeshes.length;G<C;G++){var A=this.linkedMeshes[G];if(null==(S=null==A.skin?o.defaultSkin:o.findSkin(A.skin)))throw new Error("Skin not found: "+A.skin);var M=S.getAttachment(A.slotIndex,A.parent);if(null==M)throw new Error("Parent mesh not found: "+A.parent);A.mesh.setParentMesh(M)}if(this.linkedMeshes.length=0,a.events)for(var I in a.events){var L=a.events[I];(u=new e.EventData(I)).intValue=this.getValue(L,"int",0),u.floatValue=this.getValue(L,"float",0),u.stringValue=this.getValue(L,"string",""),o.events.push(u)}if(a.animations)for(var H in a.animations){var R=a.animations[H];this.readAnimation(R,H,o)}return o},t.prototype.readAttachment=function(t,s,o,a,r){var n=this.scale;switch(a=this.getValue(t,"name",a),this.getValue(t,"type","region")){case"region":var h=this.getValue(t,"path",a),l=this.attachmentLoader.newRegionAttachment(s,a,h);return null==l?null:(l.path=h,l.x=this.getValue(t,"x",0)*n,l.y=this.getValue(t,"y",0)*n,l.scaleX=this.getValue(t,"scaleX",1),l.scaleY=this.getValue(t,"scaleY",1),l.rotation=this.getValue(t,"rotation",0),l.width=t.width*n,l.height=t.height*n,null!=(k=this.getValue(t,"color",null))&&l.color.setFromString(k),l);case"boundingbox":var p=this.attachmentLoader.newBoundingBoxAttachment(s,a);return null==p?null:(this.readVertices(t,p,t.vertexCount<<1),null!=(k=this.getValue(t,"color",null))&&p.color.setFromString(k),p);case"mesh":case"linkedmesh":var h=this.getValue(t,"path",a),c=this.attachmentLoader.newMeshAttachment(s,a,h);if(null==c)return null;c.path=h,null!=(k=this.getValue(t,"color",null))&&c.color.setFromString(k);var d=this.getValue(t,"parent",null);if(null!=d)return c.inheritDeform=this.getValue(t,"deform",!0),this.linkedMeshes.push(new i(c,this.getValue(t,"skin",null),o,d)),c;var u=t.uvs;return this.readVertices(t,c,u.length),c.triangles=t.triangles,c.regionUVs=u,c.hullLength=2*this.getValue(t,"hull",0),c;case"path":if(null==(h=this.attachmentLoader.newPathAttachment(s,a)))return null;h.closed=this.getValue(t,"closed",!1),h.constantSpeed=this.getValue(t,"constantSpeed",!0);v=t.vertexCount;this.readVertices(t,h,v<<1);for(var g=e.Utils.newArray(v/3,0),m=0;m<t.lengths.length;m++)g[m]=t.lengths[m]*n;return h.lengths=g,null!=(k=this.getValue(t,"color",null))&&h.color.setFromString(k),h;case"point":var y=this.attachmentLoader.newPointAttachment(s,a);return null==y?null:(y.x=this.getValue(t,"x",0)*n,y.y=this.getValue(t,"y",0)*n,y.rotation=this.getValue(t,"rotation",0),null!=(k=this.getValue(t,"color",null))&&y.color.setFromString(k),y);case"clipping":var f=this.attachmentLoader.newClippingAttachment(s,a);if(null==f)return null;var b=this.getValue(t,"end",null);if(null!=b){var w=r.findSlot(b);if(null==w)throw new Error("Clipping end slot not found: "+b);f.endSlot=w}var v=t.vertexCount;this.readVertices(t,f,v<<1);var k=this.getValue(t,"color",null);return null!=k&&f.color.setFromString(k),f}return null},t.prototype.readVertices=function(t,i,s){var o=this.scale;i.worldVerticesLength=s;var a=t.vertices;if(s!=a.length){for(var r=new Array,n=new Array,h=0,l=a.length;h<l;){var p=a[h++];n.push(p);for(var c=h+4*p;h<c;h+=4)n.push(a[h]),r.push(a[h+1]*o),r.push(a[h+2]*o),r.push(a[h+3])}i.bones=n,i.vertices=e.Utils.toFloatArray(r)}else{var d=e.Utils.toFloatArray(a);if(1!=o)for(var h=0,l=a.length;h<l;h++)d[h]*=o;i.vertices=d}},t.prototype.readAnimation=function(t,i,s){var o=this.scale,a=new Array,r=0;if(t.slots)for(var n in t.slots){M=t.slots[n];if(-1==(Z=s.findSlotIndex(n)))throw new Error("Slot not found: "+n);for(var h in M){I=M[h];if("attachment"==h){(b=new e.AttachmentTimeline(I.length)).slotIndex=Z;for(var l=0,p=0;p<I.length;p++){c=I[p];b.setFrame(l++,c.time,c.name)}a.push(b),r=Math.max(r,b.frames[b.getFrameCount()-1])}else if("color"==h){(b=new e.ColorTimeline(I.length)).slotIndex=Z;for(var l=0,p=0;p<I.length;p++){var c=I[p],d=new e.Color;d.setFromString(c.color),b.setFrame(l,c.time,d.r,d.g,d.b,d.a),this.readCurve(c,b,l),l++}a.push(b),r=Math.max(r,b.frames[(b.getFrameCount()-1)*e.ColorTimeline.ENTRIES])}else{if("twoColor"!=h)throw new Error("Invalid timeline type for a slot: "+h+" ("+n+")");(b=new e.TwoColorTimeline(I.length)).slotIndex=Z;for(var l=0,p=0;p<I.length;p++){var c=I[p],u=new e.Color,g=new e.Color;u.setFromString(c.light),g.setFromString(c.dark),b.setFrame(l,c.time,u.r,u.g,u.b,u.a,g.r,g.g,g.b),this.readCurve(c,b,l),l++}a.push(b),r=Math.max(r,b.frames[(b.getFrameCount()-1)*e.TwoColorTimeline.ENTRIES])}}}if(t.bones)for(var m in t.bones){var y=t.bones[m],f=s.findBoneIndex(m);if(-1==f)throw new Error("Bone not found: "+m);for(var h in y){I=y[h];if("rotate"===h){(b=new e.RotateTimeline(I.length)).boneIndex=f;for(var l=0,p=0;p<I.length;p++){c=I[p];b.setFrame(l,c.time,c.angle),this.readCurve(c,b,l),l++}a.push(b),r=Math.max(r,b.frames[(b.getFrameCount()-1)*e.RotateTimeline.ENTRIES])}else{if("translate"!==h&&"scale"!==h&&"shear"!==h)throw new Error("Invalid timeline type for a bone: "+h+" ("+m+")");var b=null,w=1;"scale"===h?b=new e.ScaleTimeline(I.length):"shear"===h?b=new e.ShearTimeline(I.length):(b=new e.TranslateTimeline(I.length),w=o),b.boneIndex=f;for(var l=0,p=0;p<I.length;p++){var c=I[p],v=this.getValue(c,"x",0),k=this.getValue(c,"y",0);b.setFrame(l,c.time,v*w,k*w),this.readCurve(c,b,l),l++}a.push(b),r=Math.max(r,b.frames[(b.getFrameCount()-1)*e.TranslateTimeline.ENTRIES])}}}if(t.ik)for(var S in t.ik){var x=t.ik[S],P=s.findIkConstraint(S);(b=new e.IkConstraintTimeline(x.length)).ikConstraintIndex=s.ikConstraints.indexOf(P);for(var l=0,p=0;p<x.length;p++){c=x[p];b.setFrame(l,c.time,this.getValue(c,"mix",1),this.getValue(c,"bendPositive",!0)?1:-1),this.readCurve(c,b,l),l++}a.push(b),r=Math.max(r,b.frames[(b.getFrameCount()-1)*e.IkConstraintTimeline.ENTRIES])}if(t.transform)for(var S in t.transform){var x=t.transform[S],P=s.findTransformConstraint(S);(b=new e.TransformConstraintTimeline(x.length)).transformConstraintIndex=s.transformConstraints.indexOf(P);for(var l=0,p=0;p<x.length;p++){c=x[p];b.setFrame(l,c.time,this.getValue(c,"rotateMix",1),this.getValue(c,"translateMix",1),this.getValue(c,"scaleMix",1),this.getValue(c,"shearMix",1)),this.readCurve(c,b,l),l++}a.push(b),r=Math.max(r,b.frames[(b.getFrameCount()-1)*e.TransformConstraintTimeline.ENTRIES])}if(t.paths)for(var S in t.paths){var x=t.paths[S],B=s.findPathConstraintIndex(S);if(-1==B)throw new Error("Path constraint not found: "+S);var T=s.pathConstraints[B];for(var h in x){I=x[h];if("position"===h||"spacing"===h){var b=null,w=1;"spacing"===h?(b=new e.PathConstraintSpacingTimeline(I.length),T.spacingMode!=e.SpacingMode.Length&&T.spacingMode!=e.SpacingMode.Fixed||(w=o)):(b=new e.PathConstraintPositionTimeline(I.length),T.positionMode==e.PositionMode.Fixed&&(w=o)),b.pathConstraintIndex=B;for(var l=0,p=0;p<I.length;p++){c=I[p];b.setFrame(l,c.time,this.getValue(c,h,0)*w),this.readCurve(c,b,l),l++}a.push(b),r=Math.max(r,b.frames[(b.getFrameCount()-1)*e.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===h){(b=new e.PathConstraintMixTimeline(I.length)).pathConstraintIndex=B;for(var l=0,p=0;p<I.length;p++){c=I[p];b.setFrame(l,c.time,this.getValue(c,"rotateMix",1),this.getValue(c,"translateMix",1)),this.readCurve(c,b,l),l++}a.push(b),r=Math.max(r,b.frames[(b.getFrameCount()-1)*e.PathConstraintMixTimeline.ENTRIES])}}}if(t.deform)for(var G in t.deform){var C=t.deform[G],A=s.findSkin(G);if(null==A)throw new Error("Skin not found: "+G);for(var n in C){var M=C[n];if(-1==(Z=s.findSlotIndex(n)))throw new Error("Slot not found: "+M.name);for(var h in M){var I=M[h],L=A.getAttachment(Z,h);if(null==L)throw new Error("Deform attachment not found: "+I.name);var H=null!=L.bones,R=L.vertices,D=H?R.length/3*2:R.length;(b=new e.DeformTimeline(I.length)).slotIndex=Z,b.attachment=L;for(var l=0,O=0;O<I.length;O++){var c=I[O],E=void 0,F=this.getValue(c,"vertices",null);if(null==F)E=H?e.Utils.newFloatArray(D):R;else{E=e.Utils.newFloatArray(D);var _=this.getValue(c,"offset",0);if(e.Utils.arrayCopy(F,0,E,_,F.length),1!=o)for(var j=(p=_)+F.length;p<j;p++)E[p]*=o;if(!H)for(p=0;p<D;p++)E[p]+=R[p]}b.setFrame(l,c.time,E),this.readCurve(c,b,l),l++}a.push(b),r=Math.max(r,b.frames[b.getFrameCount()-1])}}}var W=t.drawOrder;if(null==W&&(W=t.draworder),null!=W){for(var b=new e.DrawOrderTimeline(W.length),U=s.slots.length,l=0,O=0;O<W.length;O++){var z=W[O],V=null,X=this.getValue(z,"offsets",null);if(null!=X){V=e.Utils.newArray(U,-1);for(var N=e.Utils.newArray(U-X.length,0),q=0,Y=0,p=0;p<X.length;p++){var K=X[p],Z=s.findSlotIndex(K.slot);if(-1==Z)throw new Error("Slot not found: "+K.slot);for(;q!=Z;)N[Y++]=q++;V[q+K.offset]=q++}for(;q<U;)N[Y++]=q++;for(p=U-1;p>=0;p--)-1==V[p]&&(V[p]=N[--Y])}b.setFrame(l++,z.time,V)}a.push(b),r=Math.max(r,b.frames[b.getFrameCount()-1])}if(t.events){for(var b=new e.EventTimeline(t.events.length),l=0,p=0;p<t.events.length;p++){var J=t.events[p],Q=s.findEvent(J.name);if(null==Q)throw new Error("Event not found: "+J.name);var $=new e.Event(e.Utils.toSinglePrecision(J.time),Q);$.intValue=this.getValue(J,"int",Q.intValue),$.floatValue=this.getValue(J,"float",Q.floatValue),$.stringValue=this.getValue(J,"string",Q.stringValue),b.setFrame(l++,$)}a.push(b),r=Math.max(r,b.frames[b.getFrameCount()-1])}if(isNaN(r))throw new Error("Error while parsing animation, duration is NaN");s.animations.push(new e.Animation(i,a,r))},t.prototype.readCurve=function(e,t,i){if(e.curve)if("stepped"===e.curve)t.setStepped(i);else if("[object Array]"===Object.prototype.toString.call(e.curve)){var s=e.curve;t.setCurve(i,s[0],s[1],s[2],s[3])}},t.prototype.getValue=function(e,t,i){return void 0!==e[t]?e[t]:i},t.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return e.BlendMode.Normal;if("additive"==t)return e.BlendMode.Additive;if("multiply"==t)return e.BlendMode.Multiply;if("screen"==t)return e.BlendMode.Screen;throw new Error("Unknown blend mode: "+t)},t.positionModeFromString=function(t){if("fixed"==(t=t.toLowerCase()))return e.PositionMode.Fixed;if("percent"==t)return e.PositionMode.Percent;throw new Error("Unknown position mode: "+t)},t.spacingModeFromString=function(t){if("length"==(t=t.toLowerCase()))return e.SpacingMode.Length;if("fixed"==t)return e.SpacingMode.Fixed;if("percent"==t)return e.SpacingMode.Percent;throw new Error("Unknown position mode: "+t)},t.rotateModeFromString=function(t){if("tangent"==(t=t.toLowerCase()))return e.RotateMode.Tangent;if("chain"==t)return e.RotateMode.Chain;if("chainscale"==t)return e.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+t)},t.transformModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return e.TransformMode.Normal;if("onlytranslation"==t)return e.TransformMode.OnlyTranslation;if("norotationorreflection"==t)return e.TransformMode.NoRotationOrReflection;if("noscale"==t)return e.TransformMode.NoScale;if("noscaleorreflection"==t)return e.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},t}();e.SkeletonJson=t;var i=function(){return function(e,t,i,s){this.mesh=e,this.skin=t,this.slotIndex=i,this.parent=s}}()}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function e(e){if(this.attachments=new Array,null==e)throw new Error("name cannot be null.");this.name=e}return e.prototype.addAttachment=function(e,t,i){if(null==i)throw new Error("attachment cannot be null.");var s=this.attachments;e>=s.length&&(s.length=e+1),s[e]||(s[e]={}),s[e][t]=i},e.prototype.getAttachment=function(e,t){var i=this.attachments[e];return i?i[t]:null},e.prototype.attachAll=function(e,t){for(var i=0,s=0;s<e.slots.length;s++){var o=e.slots[s],a=o.getAttachment();if(a&&i<t.attachments.length){var r=t.attachments[i];for(var n in r)if(a==r[n]){var h=this.getAttachment(i,name);null!=h&&o.setAttachment(h);break}}i++}},e}();e.Skin=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function t(t,i){if(this.attachmentVertices=new Array,null==t)throw new Error("data cannot be null.");if(null==i)throw new Error("bone cannot be null.");this.data=t,this.bone=i,this.color=new e.Color,this.darkColor=null==t.darkColor?null:new e.Color,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(e){this.attachment!=e&&(this.attachment=e,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},t.prototype.setAttachmentTime=function(e){this.attachmentTime=this.bone.skeleton.time-e},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}();e.Slot=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){return function(t,i,s){if(this.color=new e.Color(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==i)throw new Error("name cannot be null.");if(null==s)throw new Error("boneData cannot be null.");this.index=t,this.name=i,this.boneData=s}}();e.SlotData=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function e(e){this._image=e}return e.prototype.getImage=function(){return this._image},e.filterFromString=function(e){switch(e.toLowerCase()){case"nearest":return i.Nearest;case"linear":return i.Linear;case"mipmap":return i.MipMap;case"mipmapnearestnearest":return i.MipMapNearestNearest;case"mipmaplinearnearest":return i.MipMapLinearNearest;case"mipmapnearestlinear":return i.MipMapNearestLinear;case"mipmaplinearlinear":return i.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+e)}},e.wrapFromString=function(e){switch(e.toLowerCase()){case"mirroredtepeat":return s.MirroredRepeat;case"clamptoedge":return s.ClampToEdge;case"repeat":return s.Repeat;default:throw new Error("Unknown texture wrap "+e)}},e}();e.Texture=t;var i;!function(e){e[e.Nearest=9728]="Nearest",e[e.Linear=9729]="Linear",e[e.MipMap=9987]="MipMap",e[e.MipMapNearestNearest=9984]="MipMapNearestNearest",e[e.MipMapLinearNearest=9985]="MipMapLinearNearest",e[e.MipMapNearestLinear=9986]="MipMapNearestLinear",e[e.MipMapLinearLinear=9987]="MipMapLinearLinear"}(i=e.TextureFilter||(e.TextureFilter={}));var s;!function(e){e[e.MirroredRepeat=33648]="MirroredRepeat",e[e.ClampToEdge=33071]="ClampToEdge",e[e.Repeat=10497]="Repeat"}(s=e.TextureWrap||(e.TextureWrap={}));var o=function(){function e(){this.size=null}return Object.defineProperty(e.prototype,"width",{get:function(){var e=this.texture;return"3"==PIXI.VERSION[0]?e.crop.width:e.trim?e.trim.width:e.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var e=this.texture;return"3"==PIXI.VERSION[0]?e.crop.height:e.trim?e.trim.height:e.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetX",{get:function(){var e=this.texture;return e.trim?e.trim.x:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{get:function(){return console.warn("Deprecation Warning: @Hackerham: I guess, if you are using PIXI-SPINE ATLAS region.offsetY, you want a texture, right? Use region.texture from now on."),this.spineOffsetY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixiOffsetY",{get:function(){var e=this.texture;return e.trim?e.trim.y:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spineOffsetY",{get:function(){var e=this.texture;return this.originalHeight-this.height-(e.trim?e.trim.y:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalWidth",{get:function(){var e=this.texture;return"3"==PIXI.VERSION[0]?e.trim?e.trim.width:e.crop.width:e.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalHeight",{get:function(){var e=this.texture;return"3"==PIXI.VERSION[0]?e.trim?e.trim.height:e.crop.height:e.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!0,configurable:!0}),e}();e.TextureRegion=o}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function t(e,t,i){this.pages=new Array,this.regions=new Array,e&&this.addSpineAtlas(e,t,i)}return t.prototype.addTexture=function(t,i){for(var a=this.pages,r=null,n=0;n<a.length;n++)if(a[n].baseTexture===i.baseTexture){r=a[n];break}if(null===r){(r=new s).name="texturePage";var h=i.baseTexture;r.width=h.realWidth,r.height=h.realHeight,r.baseTexture=h,r.minFilter=r.magFilter=e.TextureFilter.Nearest,r.uWrap=e.TextureWrap.ClampToEdge,r.vWrap=e.TextureWrap.ClampToEdge,a.push(r)}var l=new o;return l.name=t,l.page=r,l.texture=i,l.index=-1,this.regions.push(l),l},t.prototype.addTextureHash=function(e,t){for(var i in e)e.hasOwnProperty(i)&&this.addTexture(t&&-1!==i.indexOf(".")?i.substr(0,i.lastIndexOf(".")):i,e[i])},t.prototype.addSpineAtlas=function(e,t,i){return this.load(e,t,i)},t.prototype.load=function(t,a,r){var n=this;if(null==a)throw new Error("textureLoader cannot be null.");var h=new i(t),l=new Array(4),p=null,c=function(){for(;;){var t=h.readLine();if(null==t)return r&&r(n);if(0==(t=t.trim()).length)p=null;else{if(!p){(p=new s).name=t,2==h.readTuple(l)&&(p.width=parseInt(l[0]),p.height=parseInt(l[1]),h.readTuple(l)),h.readTuple(l),p.minFilter=e.Texture.filterFromString(l[0]),p.magFilter=e.Texture.filterFromString(l[1]);var i=h.readValue();p.uWrap=e.TextureWrap.ClampToEdge,p.vWrap=e.TextureWrap.ClampToEdge,"x"==i?p.uWrap=e.TextureWrap.Repeat:"y"==i?p.vWrap=e.TextureWrap.Repeat:"xy"==i&&(p.uWrap=p.vWrap=e.TextureWrap.Repeat),a(t,function(e){p.baseTexture=e,e.hasLoaded||(e.width=p.width,e.height=p.height),n.pages.push(p),p.setFilters(),p.width&&p.height||(p.width=e.realWidth,p.height=e.realHeight,p.width&&p.height||console.log("ERROR spine atlas page "+p.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),c()}),n.pages.push(p);break}var d=new o;d.name=t,d.page=p;var u="true"==h.readValue()?6:0;h.readTuple(l);var g=parseInt(l[0]),m=parseInt(l[1]);h.readTuple(l);var y=parseInt(l[0]),f=parseInt(l[1]),b=p.baseTexture.resolution;g/=b,m/=b,y/=b,f/=b;var w=new PIXI.Rectangle(g,m,u?f:y,u?y:f);4==h.readTuple(l)&&4==h.readTuple(l)&&h.readTuple(l);var v=parseInt(l[0])/b,k=parseInt(l[1])/b;h.readTuple(l);var S=parseInt(l[0])/b,x=parseInt(l[1])/b,P=new PIXI.Rectangle(0,0,v,k),B=new PIXI.Rectangle(S,k-f-x,y,f);if("3"!=PIXI.VERSION[0])d.texture=new PIXI.Texture(d.page.baseTexture,w,P,B,u);else{var T=new PIXI.Rectangle(g,m,y,f),G=T.clone();B.width=v,B.height=k,d.texture=new PIXI.Texture(d.page.baseTexture,T,G,B,u)}d.index=parseInt(h.readValue()),d.texture._updateUvs(),n.regions.push(d)}}};c()},t.prototype.findRegion=function(e){for(var t=0;t<this.regions.length;t++)if(this.regions[t].name==e)return this.regions[t];return null},t.prototype.dispose=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].baseTexture.dispose()},t}();e.TextureAtlas=t;var i=function(){function e(e){this.index=0,this.lines=e.split(/\r\n|\r|\n/)}return e.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},e.prototype.readValue=function(){var e=this.readLine(),t=e.indexOf(":");if(-1==t)throw new Error("Invalid line: "+e);return e.substring(t+1).trim()},e.prototype.readTuple=function(e){var t=this.readLine(),i=t.indexOf(":");if(-1==i)throw new Error("Invalid line: "+t);for(var s=0,o=i+1;s<3;s++){var a=t.indexOf(",",o);if(-1==a)break;e[s]=t.substr(o,a-o).trim(),o=a+1}return e[s]=t.substring(o).trim(),s+1},e}(),s=function(){function t(){}return t.prototype.setFilters=function(){var t=this.baseTexture,i=this.minFilter;i==e.TextureFilter.Linear?t.scaleMode=PIXI.SCALE_MODES.LINEAR:this.minFilter==e.TextureFilter.Nearest?t.scaleMode=PIXI.SCALE_MODES.NEAREST:(t.mipmap=!0,i==e.TextureFilter.MipMapNearestNearest?t.scaleMode=PIXI.SCALE_MODES.NEAREST:t.scaleMode=PIXI.SCALE_MODES.LINEAR)},t}();e.TextureAtlasPage=s;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.TextureRegion);e.TextureAtlasRegion=o}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function t(t,i){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new e.Vector2,null==t)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var s=0;s<t.bones.length;s++)this.bones.push(i.findBone(t.bones[s].name));this.target=i.findBone(t.target.name)}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,i=this.translateMix,s=this.scaleMix,o=this.shearMix,a=this.target,r=a.matrix,n=r.a,h=r.c,l=r.b,p=r.d,c=n*p-h*l>0?e.MathUtils.degRad:-e.MathUtils.degRad,d=this.data.offsetRotation*c,u=this.data.offsetShearY*c,g=this.bones,m=0,y=g.length;m<y;m++){var f=g[m],b=!1,w=f.matrix;if(0!=t){var v=w.a,k=w.c,S=w.b,x=w.d;(M=Math.atan2(l,n)-Math.atan2(S,v)+d)>e.MathUtils.PI?M-=e.MathUtils.PI2:M<-e.MathUtils.PI&&(M+=e.MathUtils.PI2),M*=t;var P=Math.cos(M),B=Math.sin(M);w.a=P*v-B*S,w.c=P*k-B*x,w.b=B*v+P*S,w.d=B*k+P*x,b=!0}if(0!=i){var T=this.temp;a.localToWorld(T.set(this.data.offsetX,this.data.offsetY)),w.tx+=(T.x-w.tx)*i,w.ty+=(T.y-w.ty)*i,b=!0}if(s>0){var G=Math.sqrt(w.a*w.a+w.b*w.b),C=Math.sqrt(n*n+l*l);G>1e-5&&(G=(G+(C-G+this.data.offsetScaleX)*s)/G),w.a*=G,w.b*=G,G=Math.sqrt(w.c*w.c+w.d*w.d),C=Math.sqrt(h*h+p*p),G>1e-5&&(G=(G+(C-G+this.data.offsetScaleY)*s)/G),w.c*=G,w.d*=G,b=!0}if(o>0){var k=w.c,x=w.d,A=Math.atan2(x,k),M=Math.atan2(p,h)-Math.atan2(l,n)-(A-Math.atan2(w.b,w.a));M>e.MathUtils.PI?M-=e.MathUtils.PI2:M<-e.MathUtils.PI&&(M+=e.MathUtils.PI2),M=A+(M+u)*o;G=Math.sqrt(k*k+x*x);w.c=Math.cos(M)*G,w.d=Math.sin(M)*G,b=!0}b&&(f.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,i=this.translateMix,s=this.scaleMix,o=this.shearMix,a=this.target,r=a.matrix,n=r.a,h=r.c,l=r.b,p=r.d,c=n*p-h*l>0?e.MathUtils.degRad:-e.MathUtils.degRad,d=this.data.offsetRotation*c,u=this.data.offsetShearY*c,g=this.bones,m=0,y=g.length;m<y;m++){var f=g[m],b=!1,w=f.matrix;if(0!=t){var v=w.a,k=w.c,S=w.b,x=w.d;(G=Math.atan2(l,n)+d)>e.MathUtils.PI?G-=e.MathUtils.PI2:G<-e.MathUtils.PI&&(G+=e.MathUtils.PI2),G*=t;var P=Math.cos(G),B=Math.sin(G);w.a=P*v-B*S,w.c=P*k-B*x,w.b=B*v+P*S,w.d=B*k+P*x,b=!0}if(0!=i){var T=this.temp;a.localToWorld(T.set(this.data.offsetX,this.data.offsetY)),w.tx+=T.x*i,w.ty+=T.y*i,b=!0}if(s>0){C=(Math.sqrt(n*n+l*l)-1+this.data.offsetScaleX)*s+1;w.a*=C,w.b*=C,C=(Math.sqrt(h*h+p*p)-1+this.data.offsetScaleY)*s+1,w.c*=C,w.d*=C,b=!0}if(o>0){var G=Math.atan2(p,h)-Math.atan2(l,n);G>e.MathUtils.PI?G-=e.MathUtils.PI2:G<-e.MathUtils.PI&&(G+=e.MathUtils.PI2);var k=w.c,x=w.d;G=Math.atan2(x,k)+(G-e.MathUtils.PI/2+u)*o;var C=Math.sqrt(k*k+x*x);w.c=Math.cos(G)*C,w.d=Math.sin(G)*C,b=!0}b&&(f.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var e=this.rotateMix,t=this.translateMix,i=this.scaleMix,s=this.shearMix,o=this.target;o.appliedValid||o.updateAppliedTransform();for(var a=this.bones,r=0,n=a.length;r<n;r++){var h=a[r];h.appliedValid||h.updateAppliedTransform();var l=h.arotation;if(0!=e){m=o.arotation-l+this.data.offsetRotation;l+=(m-=360*(16384-(16384.499999999996-m/360|0)))*e}var p=h.ax,c=h.ay;0!=t&&(p+=(o.ax-p+this.data.offsetX)*t,c+=(o.ay-c+this.data.offsetY)*t);var d=h.ascaleX,u=h.ascaleY;i>0&&(d>1e-5&&(d=(d+(o.ascaleX-d+this.data.offsetScaleX)*i)/d),u>1e-5&&(u=(u+(o.ascaleY-u+this.data.offsetScaleY)*i)/u));var g=h.ashearY;if(s>0){var m=o.ashearY-g+this.data.offsetShearY;m-=360*(16384-(16384.499999999996-m/360|0)),h.shearY+=m*s}h.updateWorldTransformWith(p,c,l,d,u,h.ashearX,g)}},t.prototype.applyRelativeLocal=function(){var e=this.rotateMix,t=this.translateMix,i=this.scaleMix,s=this.shearMix,o=this.target;o.appliedValid||o.updateAppliedTransform();for(var a=this.bones,r=0,n=a.length;r<n;r++){var h=a[r];h.appliedValid||h.updateAppliedTransform();var l=h.arotation;0!=e&&(l+=(o.arotation+this.data.offsetRotation)*e);var p=h.ax,c=h.ay;0!=t&&(p+=(o.ax+this.data.offsetX)*t,c+=(o.ay+this.data.offsetY)*t);var d=h.ascaleX,u=h.ascaleY;i>0&&(d>1e-5&&(d*=(o.ascaleX-1+this.data.offsetScaleX)*i+1),u>1e-5&&(u*=(o.ascaleY-1+this.data.offsetScaleY)*i+1));var g=h.ashearY;s>0&&(g+=(o.ashearY+this.data.offsetShearY)*s),h.updateWorldTransformWith(p,c,l,d,u,h.ashearX,g)}},t.prototype.getOrder=function(){return this.data.order},t}();e.TransformConstraint=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){return function(e){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,null==e)throw new Error("name cannot be null.");this.name=e}}();e.TransformConstraintData=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function t(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new e.Pool(function(){return new Array}),this.polygonIndicesPool=new e.Pool(function(){return new Array})}return t.prototype.triangulate=function(e){var i=e,s=e.length>>1,o=this.indicesArray;o.length=0;for(r=0;r<s;r++)o[r]=r;var a=this.isConcaveArray;a.length=0;for(var r=0,n=s;r<n;++r)a[r]=t.isConcave(r,s,i,o);var h=this.triangles;for(h.length=0;s>3;){for(var l=s-1,r=0,p=1;;){e:if(!a[r]){for(var c=o[l]<<1,d=o[r]<<1,u=o[p]<<1,g=i[c],m=i[c+1],y=i[d],f=i[d+1],b=i[u],w=i[u+1],v=(p+1)%s;v!=l;v=(v+1)%s)if(a[v]){var k=o[v]<<1,S=i[k],x=i[k+1];if(t.positiveArea(b,w,g,m,S,x)&&t.positiveArea(g,m,y,f,S,x)&&t.positiveArea(y,f,b,w,S,x))break e}break}if(0==p){do{if(!a[r])break;r--}while(r>0);break}l=r,r=p,p=(p+1)%s}h.push(o[(s+r-1)%s]),h.push(o[r]),h.push(o[(r+1)%s]),o.splice(r,1),a.splice(r,1);var P=(--s+r-1)%s,B=r==s?0:r;a[P]=t.isConcave(P,s,i,o),a[B]=t.isConcave(B,s,i,o)}return 3==s&&(h.push(o[2]),h.push(o[0]),h.push(o[1])),h},t.prototype.decompose=function(e,i){var s=e,o=this.convexPolygons;this.polygonPool.freeAll(o),o.length=0;var a=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(a),a.length=0;var r=this.polygonIndicesPool.obtain();r.length=0;var n=this.polygonPool.obtain();n.length=0;for(var h=-1,l=0,p=0,c=i.length;p<c;p+=3){var d=i[p]<<1,u=i[p+1]<<1,g=i[p+2]<<1,m=s[d],y=s[d+1],f=s[u],b=s[u+1],w=s[g],v=s[g+1],k=!1;if(h==d){var S=n.length-4,x=t.winding(n[S],n[S+1],n[S+2],n[S+3],w,v),P=t.winding(w,v,n[0],n[1],n[2],n[3]);x==l&&P==l&&(n.push(w),n.push(v),r.push(g),k=!0)}k||(n.length>0?(o.push(n),a.push(r)):(this.polygonPool.free(n),this.polygonIndicesPool.free(r)),(n=this.polygonPool.obtain()).length=0,n.push(m),n.push(y),n.push(f),n.push(b),n.push(w),n.push(v),(r=this.polygonIndicesPool.obtain()).length=0,r.push(d),r.push(u),r.push(g),l=t.winding(m,y,f,b,w,v),h=d)}n.length>0&&(o.push(n),a.push(r));for(var p=0,c=o.length;p<c;p++)if(0!=(r=a[p]).length)for(var B=r[0],T=r[r.length-1],G=(n=o[p])[S=n.length-4],C=n[S+1],A=n[S+2],M=n[S+3],I=n[0],L=n[1],H=n[2],R=n[3],D=t.winding(G,C,A,M,I,L),O=0;O<c;O++)if(O!=p){var E=a[O];if(3==E.length){var F=E[0],_=E[1],j=E[2],W=o[O],w=W[W.length-2],v=W[W.length-1];if(F==B&&_==T){var x=t.winding(G,C,A,M,w,v),P=t.winding(w,v,I,L,H,R);x==D&&P==D&&(W.length=0,E.length=0,n.push(w),n.push(v),r.push(j),G=A,C=M,A=w,M=v,O=0)}}}for(p=o.length-1;p>=0;p--)0==(n=o[p]).length&&(o.splice(p,1),this.polygonPool.free(n),r=a[p],a.splice(p,1),this.polygonIndicesPool.free(r));return o},t.isConcave=function(e,t,i,s){var o=s[(t+e-1)%t]<<1,a=s[e]<<1,r=s[(e+1)%t]<<1;return!this.positiveArea(i[o],i[o+1],i[a],i[a+1],i[r],i[r+1])},t.positiveArea=function(e,t,i,s,o,a){return e*(a-s)+i*(t-a)+o*(s-t)>=0},t.winding=function(e,t,i,s,o,a){var r=i-e,n=s-t;return o*n-a*r+r*t-e*n>=0?1:-1},t}();e.Triangulator=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function e(){this.array=new Array}return e.prototype.add=function(e){var t=this.contains(e);return this.array[0|e]=0|e,!t},e.prototype.contains=function(e){return void 0!=this.array[0|e]},e.prototype.remove=function(e){this.array[0|e]=void 0},e.prototype.clear=function(){this.array.length=0},e}();e.IntSet=t;var i=function(){function e(e,t,i,s){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),this.r=e,this.g=t,this.b=i,this.a=s}return e.prototype.set=function(e,t,i,s){return this.r=e,this.g=t,this.b=i,this.a=s,this.clamp(),this},e.prototype.setFromColor=function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this},e.prototype.setFromString=function(e){return e="#"==e.charAt(0)?e.substr(1):e,this.r=parseInt(e.substr(0,2),16)/255,this.g=parseInt(e.substr(2,2),16)/255,this.b=parseInt(e.substr(4,2),16)/255,this.a=(8!=e.length?255:parseInt(e.substr(6,2),16))/255,this},e.prototype.add=function(e,t,i,s){return this.r+=e,this.g+=t,this.b+=i,this.a+=s,this.clamp(),this},e.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},e.WHITE=new e(1,1,1,1),e.RED=new e(1,0,0,1),e.GREEN=new e(0,1,0,1),e.BLUE=new e(0,0,1,1),e.MAGENTA=new e(1,0,1,1),e}();e.Color=i;var s=function(){function e(){}return e.clamp=function(e,t,i){return e<t?t:e>i?i:e},e.cosDeg=function(t){return Math.cos(t*e.degRad)},e.sinDeg=function(t){return Math.sin(t*e.degRad)},e.signum=function(e){return e>0?1:e<0?-1:0},e.toInt=function(e){return e>0?Math.floor(e):Math.ceil(e)},e.cbrt=function(e){var t=Math.pow(Math.abs(e),1/3);return e<0?-t:t},e.randomTriangular=function(t,i){return e.randomTriangularWith(t,i,.5*(t+i))},e.randomTriangularWith=function(e,t,i){var s=Math.random(),o=t-e;return s<=(i-e)/o?e+Math.sqrt(s*o*(i-e)):t-Math.sqrt((1-s)*o*(t-i))},e.PI=3.1415927,e.PI2=2*e.PI,e.radiansToDegrees=180/e.PI,e.radDeg=e.radiansToDegrees,e.degreesToRadians=e.PI/180,e.degRad=e.degreesToRadians,e}();e.MathUtils=s;var o=function(){function e(){}return e.prototype.apply=function(e,t,i){return e+(t-e)*this.applyInternal(i)},e}();e.Interpolation=o;var a=function(e){function t(t){var i=e.call(this)||this;return i.power=2,i.power=t,i}return __extends(t,e),t.prototype.applyInternal=function(e){return e<=.5?Math.pow(2*e,this.power)/2:Math.pow(2*(e-1),this.power)/(this.power%2==0?-2:2)+1},t}(o);e.Pow=a;var r=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.applyInternal=function(e){return Math.pow(e-1,this.power)*(this.power%2==0?-1:1)+1},t}(a);e.PowOut=r;var n=function(){function e(){}return e.arrayCopy=function(e,t,i,s,o){for(var a=t,r=s;a<t+o;a++,r++)i[r]=e[a]},e.setArraySize=function(e,t,i){void 0===i&&(i=0);var s=e.length;if(s==t)return e;if(e.length=t,s<t)for(var o=s;o<t;o++)e[o]=i;return e},e.ensureArrayCapacity=function(t,i,s){return void 0===s&&(s=0),t.length>=i?t:e.setArraySize(t,i,s)},e.newArray=function(e,t){for(var i=new Array(e),s=0;s<e;s++)i[s]=t;return i},e.newFloatArray=function(t){if(e.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var i=new Array(t),s=0;s<i.length;s++)i[s]=0;return i},e.newShortArray=function(t){if(e.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var i=new Array(t),s=0;s<i.length;s++)i[s]=0;return i},e.toFloatArray=function(t){return e.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},e.toSinglePrecision=function(t){return e.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t},e.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,e}();e.Utils=n;var h=function(){function e(){}return e.logBones=function(e){for(var t=0;t<e.bones.length;t++){var i=e.bones[t],s=i.matrix;console.log(i.data.name+", "+s.a+", "+s.b+", "+s.c+", "+s.d+", "+s.tx+", "+s.ty)}},e}();e.DebugUtils=h;var l=function(){function e(e){this.items=new Array,this.instantiator=e}return e.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},e.prototype.free=function(e){e.reset&&e.reset(),this.items.push(e)},e.prototype.freeAll=function(e){for(var t=0;t<e.length;t++)e[t].reset&&e[t].reset(),this.items[t]=e[t]},e.prototype.clear=function(){this.items.length=0},e}();e.Pool=l;var p=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}return e.prototype.set=function(e,t){return this.x=e,this.y=t,this},e.prototype.length=function(){var e=this.x,t=this.y;return Math.sqrt(e*e+t*t)},e.prototype.normalize=function(){var e=this.length();return 0!=e&&(this.x/=e,this.y/=e),this},e}();e.Vector2=p;var c=function(){function e(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return e.prototype.update=function(){var e=Date.now()/1e3;this.delta=e-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=e,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},e}();e.TimeKeeper=c;var d=function(){function e(e){void 0===e&&(e=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(e)}return e.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},e.prototype.addValue=function(e){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=e,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},e.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var e=0,t=0;t<this.values.length;t++)e+=this.values[t];this.mean=e/this.values.length,this.dirty=!1}return this.mean}return 0},e}();e.WindowedMean=d}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){return function(e){if(null==e)throw new Error("name cannot be null.");this.name=e}}();e.Attachment=t;var i=function(e){function t(i){var s=e.call(this,i)||this;return s.id=(65535&t.nextID++)<<11,s.worldVerticesLength=0,s}return __extends(t,e),t.prototype.computeWorldVerticesOld=function(e,t){this.computeWorldVertices(e,0,this.worldVerticesLength,t,0,2)},t.prototype.computeWorldVertices=function(e,t,i,s,o,a){i=o+(i>>1)*a;var r=e.bone.skeleton,n=e.attachmentVertices,h=this.vertices,l=this.bones;if(null!=l){for(var p=0,c=0,d=0;d<t;d+=2)p+=(b=l[p])+1,c+=b;var u=r.bones;if(0==n.length)for(var g=o,m=3*c;g<i;g+=a){var y=0,f=0,b=l[p++];for(b+=p;p<b;p++,m+=3){var w=u[l[p]].matrix,v=h[m],k=h[m+1],S=h[m+2];y+=(v*w.a+k*w.c+w.tx)*S,f+=(v*w.b+k*w.d+w.ty)*S}s[g]=y,s[g+1]=f}else for(var x=n,g=o,m=3*c,P=c<<1;g<i;g+=a){var y=0,f=0,b=l[p++];for(b+=p;p<b;p++,m+=3,P+=2){var w=u[l[p]].matrix,v=h[m]+x[P],k=h[m+1]+x[P+1],S=h[m+2];y+=(v*w.a+k*w.c+w.tx)*S,f+=(v*w.b+k*w.d+w.ty)*S}s[g]=y,s[g+1]=f}}else{n.length>0&&(h=n);for(var B=(w=e.bone.matrix).tx,T=w.ty,G=w.a,m=w.c,C=w.b,A=w.d,M=t,g=o;g<i;M+=2,g+=a){var v=h[M],k=h[M+1];s[g]=v*G+k*m+B,s[g+1]=v*C+k*A+T}}},t.prototype.applyDeform=function(e){return this==e},t.nextID=0,t}(t);e.VertexAttachment=i}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){!function(e){e[e.Region=0]="Region",e[e.BoundingBox=1]="BoundingBox",e[e.Mesh=2]="Mesh",e[e.LinkedMesh=3]="LinkedMesh",e[e.Path=4]="Path",e[e.Point=5]="Point"}(e.AttachmentType||(e.AttachmentType={}))}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(t){function i(i){var s=t.call(this,i)||this;return s.color=new e.Color(1,1,1,1),s}return __extends(i,t),i}(e.VertexAttachment);e.BoundingBoxAttachment=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(t){function i(i){var s=t.call(this,i)||this;return s.color=new e.Color(.2275,.2275,.8078,1),s}return __extends(i,t),i}(e.VertexAttachment);e.ClippingAttachment=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(t){function i(i){var s=t.call(this,i)||this;return s.color=new e.Color(1,1,1,1),s.inheritDeform=!1,s.tempColor=new e.Color(0,0,0,0),s}return __extends(i,t),i.prototype.updateUVs=function(t,i){var s=this.regionUVs.length;if(i&&i.length==s||(i=e.Utils.newFloatArray(s)),null!=t){for(var o=t.texture._uvs,a=t.width,r=t.height,n=t.originalWidth,h=t.originalHeight,l=t.offsetX,p=t.pixiOffsetY,c=0;c<s;c+=2){var d=this.regionUVs[c],u=this.regionUVs[c+1];d=(d*n-l)/a,u=(u*h-p)/r,i[c]=(o.x0*(1-d)+o.x1*d)*(1-u)+(o.x3*(1-d)+o.x2*d)*u,i[c+1]=(o.y0*(1-d)+o.y1*d)*(1-u)+(o.y3*(1-d)+o.y2*d)*u}return i}},i.prototype.applyDeform=function(e){return this==e||this.inheritDeform&&this.parentMesh==e},i.prototype.getParentMesh=function(){return this.parentMesh},i.prototype.setParentMesh=function(e){this.parentMesh=e,null!=e&&(this.bones=e.bones,this.vertices=e.vertices,this.worldVerticesLength=e.worldVerticesLength,this.regionUVs=e.regionUVs,this.triangles=e.triangles,this.hullLength=e.hullLength,this.worldVerticesLength=e.worldVerticesLength)},i}(e.VertexAttachment);e.MeshAttachment=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(t){function i(i){var s=t.call(this,i)||this;return s.closed=!1,s.constantSpeed=!1,s.color=new e.Color(1,1,1,1),s}return __extends(i,t),i}(e.VertexAttachment);e.PathAttachment=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(t){function i(i){var s=t.call(this,i)||this;return s.color=new e.Color(.38,.94,0,1),s}return __extends(i,t),i.prototype.computeWorldPosition=function(e,t){var i=e.matrix;return t.x=this.x*i.a+this.y*i.c+e.worldX,t.y=this.x*i.b+this.y*i.d+e.worldY,t},i.prototype.computeWorldRotation=function(t){var i=t.matrix,s=e.MathUtils.cosDeg(this.rotation),o=e.MathUtils.sinDeg(this.rotation),a=s*i.a+o*i.c,r=s*i.b+o*i.d;return Math.atan2(r,a)*e.MathUtils.radDeg},i}(e.VertexAttachment);e.PointAttachment=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(t){function i(i){var s=t.call(this,i)||this;return s.x=0,s.y=0,s.scaleX=1,s.scaleY=1,s.rotation=0,s.width=0,s.height=0,s.color=new e.Color(1,1,1,1),s.offset=e.Utils.newFloatArray(8),s.uvs=e.Utils.newFloatArray(8),s.tempColor=new e.Color(1,1,1,1),s}return __extends(i,t),i.prototype.updateOffset=function(){var e=this.width/this.region.originalWidth*this.scaleX,t=this.height/this.region.originalHeight*this.scaleY,s=-this.width/2*this.scaleX+this.region.offsetX*e,o=-this.height/2*this.scaleY+this.region.offsetY*t,a=s+this.region.width*e,r=o+this.region.height*t,n=this.rotation*Math.PI/180,h=Math.cos(n),l=Math.sin(n),p=s*h+this.x,c=s*l,d=o*h+this.y,u=o*l,g=a*h+this.x,m=a*l,y=r*h+this.y,f=r*l,b=this.offset;b[i.OX1]=p-u,b[i.OY1]=d+c,b[i.OX2]=p-f,b[i.OY2]=y+c,b[i.OX3]=g-f,b[i.OY3]=y+m,b[i.OX4]=g-u,b[i.OY4]=d+m},i.prototype.setRegion=function(e){this.region=e;var t=this.uvs;e.rotate?(t[2]=e.u,t[3]=e.v2,t[4]=e.u,t[5]=e.v,t[6]=e.u2,t[7]=e.v,t[0]=e.u2,t[1]=e.v2):(t[0]=e.u,t[1]=e.v2,t[2]=e.u,t[3]=e.v,t[4]=e.u2,t[5]=e.v,t[6]=e.u2,t[7]=e.v2)},i.prototype.computeWorldVertices=function(e,t,s,o){var a=this.offset,r=e.matrix,n=r.tx,h=r.ty,l=r.a,p=r.c,c=r.b,d=r.d,u=0,g=0;u=a[i.OX1],g=a[i.OY1],t[s]=u*l+g*p+n,t[s+1]=u*c+g*d+h,s+=o,u=a[i.OX2],g=a[i.OY2],t[s]=u*l+g*p+n,t[s+1]=u*c+g*d+h,s+=o,u=a[i.OX3],g=a[i.OY3],t[s]=u*l+g*p+n,t[s+1]=u*c+g*d+h,s+=o,u=a[i.OX4],g=a[i.OY4],t[s]=u*l+g*p+n,t[s+1]=u*c+g*d+h},i.OX1=0,i.OY1=1,i.OX2=2,i.OY2=3,i.OX3=4,i.OY3=5,i.OX4=6,i.OY4=7,i.X1=0,i.Y1=1,i.C1R=2,i.C1G=3,i.C1B=4,i.C1A=5,i.U1=6,i.V1=7,i.X2=8,i.Y2=9,i.C2R=10,i.C2G=11,i.C2B=12,i.C2A=13,i.U2=14,i.V2=15,i.X3=16,i.Y3=17,i.C3R=18,i.C3G=19,i.C3B=20,i.C3A=21,i.U3=22,i.V3=23,i.X4=24,i.Y4=25,i.C4R=26,i.C4G=27,i.C4B=28,i.C4A=29,i.U4=30,i.V4=31,i}(e.Attachment);e.RegionAttachment=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function t(e,t){this.jitterX=0,this.jitterY=0,this.jitterX=e,this.jitterY=t}return t.prototype.begin=function(e){},t.prototype.transform=function(t,i,s,o){t.x+=e.MathUtils.randomTriangular(-this.jitterX,this.jitterY),t.y+=e.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}();e.JitterEffect=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){!function(e){var t=function(){function t(e){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=e}return t.prototype.begin=function(e){this.worldX=e.x+this.centerX,this.worldY=e.y+this.centerY},t.prototype.transform=function(i,s,o,a){var r=this.angle*e.MathUtils.degreesToRadians,n=i.x-this.worldX,h=i.y-this.worldY,l=Math.sqrt(n*n+h*h);if(l<this.radius){var p=t.interpolation.apply(0,r,(this.radius-l)/this.radius),c=Math.cos(p),d=Math.sin(p);i.x=c*n-d*h+this.worldX,i.y=d*n+c*h+this.worldY}},t.prototype.end=function(){},t.interpolation=new e.PowOut(2),t}();e.SwirlEffect=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={}));var pixi_spine;!function(e){function t(e){return e.type===PIXI.loaders.Resource.TYPE.JSON}function i(){return function(i,a){if(!i.data||!t(i)||!i.data.bones)return a();var r=i.metadata||{},n=r?i.metadata.spineSkeletonScale:null,h=r?i.metadata.spineAtlas:null;if(!1===h)return a();if(h&&h.pages){var l=new e.core.SkeletonJson(new e.core.AtlasAttachmentLoader(h)).readSkeletonData(i.data);return i.spineData=l,i.spineAtlas=h,a()}var p=r.spineAtlasSuffix||".atlas",c=i.url.substr(0,i.url.lastIndexOf("."))+p;c=c.replace(this.baseUrl,"");var d={crossOrigin:i.crossOrigin,xhrType:PIXI.loaders.Resource.XHR_RESPONSE_TYPE.TEXT,metadata:r.spineMetadata||null,parentResource:i},u={crossOrigin:i.crossOrigin,metadata:r.imageMetadata||null,parentResource:i},g=i.url.substr(0,i.url.lastIndexOf("/")+1);g=g.replace(this.baseUrl,"");var m=r.images?o(r.images):r.image?o({default:r.image}):r.imageLoader?r.imageLoader(this,i.name+"_atlas_page_",g,u):s(this,i.name+"_atlas_page_",g,u);this.add(i.name+"_atlas",c,d,function(t){new e.core.TextureAtlas(t.xhr.responseText,m,function(t){var s=new e.core.SkeletonJson(new e.core.AtlasAttachmentLoader(t));n&&(s.scale=n),i.spineData=s.readSkeletonData(i.data),i.spineAtlas=t,a()})})}}function s(e,t,i,s){return i&&i.lastIndexOf("/")!==i.length-1&&(i+="/"),function(o,a){var r=t+o,n=i+o;e.add(r,n,s,function(e){a(e.texture.baseTexture)})}}function o(e){return function(t,i){var s=e[t]||e.default;i(s&&s.baseTexture?s.baseTexture:s)}}e.atlasParser=i,e.imageLoaderAdapter=s,e.syncImageLoaderAdapter=function(e,t){return e&&e.lastIndexOf("/")!==e.length-1&&(e+="/"),function(e,i){i(PIXI.BaseTexture.fromImage(e,t))}},e.staticImageLoader=o,PIXI.loaders.Loader.addPixiMiddleware(i),PIXI.loader.use(i())}(pixi_spine||(pixi_spine={})),Math.fround||(Math.fround=Math.fround=function(e){return function(t){return e[0]=t,e[0]}}(new Float32Array(1)));var pixi_spine;!function(e){function t(){var e=this.parent.worldTransform,t=this.worldTransform,i=this.localTransform;t.a=i.a*e.a+i.b*e.c,t.b=i.a*e.b+i.b*e.d,t.c=i.c*e.a+i.d*e.c,t.d=i.c*e.b+i.d*e.d,t.tx=i.tx*e.a+i.ty*e.c+e.tx,t.ty=i.tx*e.b+i.ty*e.d+e.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null}e.core.Bone.yDown=!0;var i=[0,0,0],s=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t}(PIXI.Sprite);e.SpineSprite=s;var o=function(e){function t(t,i,s,o,a){return e.call(this,t,i,s,o,a)||this}return __extends(t,e),t}(PIXI.mesh.Mesh);e.SpineMesh=o;var a=function(a){function r(t){var i=a.call(this)||this;if(i.hackTextureBySlotName=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null);var s=this.skeleton.findSlotIndex(e);return-1!=s&&this.hackTextureBySlotIndex(s,t,i)},!t)throw new Error("The spineData param is required.");if("string"==typeof t)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');i.spineData=t,i.skeleton=new e.core.Skeleton(t),i.skeleton.updateWorldTransform(),i.stateData=new e.core.AnimationStateData(t),i.state=new e.core.AnimationState(i.stateData),i.slotContainers=[],i.tempClipContainers=[];for(var s=0,o=i.skeleton.slots.length;s<o;s++){var r=i.skeleton.slots[s],n=r.attachment,h=new PIXI.Container;if(i.slotContainers.push(h),i.addChild(h),i.tempClipContainers.push(null),n instanceof e.core.RegionAttachment){var l=n.region.name,p=i.createSprite(r,n,l);r.currentSprite=p,r.currentSpriteName=l,h.addChild(p)}else if(n instanceof e.core.MeshAttachment){var c=i.createMesh(r,n);r.currentMesh=c,r.currentMeshName=n.name,h.addChild(c)}else{if(!(n instanceof e.core.ClippingAttachment))continue;i.createGraphics(r,n),h.addChild(r.clippingContainer),h.addChild(r.currentGraphics)}}return i.autoUpdate=!0,i.tintRgb=new Float32Array([1,1,1]),i}return __extends(r,a),Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this.updateTransform===r.prototype.autoUpdateTransform},set:function(e){this.updateTransform=e?r.prototype.autoUpdateTransform:PIXI.Container.prototype.updateTransform},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return PIXI.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=PIXI.utils.hex2rgb(e,this.tintRgb)},enumerable:!0,configurable:!0}),r.prototype.update=function(s){this.state.update(s),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var o=this.skeleton.slots,a=this.tintRgb[0],r=this.tintRgb[1],n=this.tintRgb[2],h=0,l=o.length;h<l;h++){var p=(T=o[h]).attachment,c=this.slotContainers[h];if(p){var d=p.color;if(p instanceof e.core.RegionAttachment){var u=p.region;if(u){T.currentMesh&&(T.currentMesh.visible=!1,T.currentMesh=null,T.currentMeshName=void 0);var g=u;if(!T.currentSpriteName||T.currentSpriteName!==g.name){var m=g.name;if(T.currentSprite&&(T.currentSprite.visible=!1),T.sprites=T.sprites||{},void 0!==T.sprites[m])T.sprites[m].visible=!0;else{var y=this.createSprite(T,p,m);c.addChild(y)}T.currentSprite=T.sprites[m],T.currentSpriteName=m}}if(c.transform){var f=c.transform,b=f,w=null;b.matrix2d?(w=b.matrix2d,b._dirtyVersion++,b.version=b._dirtyVersion,b.isStatic=!0,b.operMode=0):PIXI.TransformBase?(b.position&&(f=new PIXI.TransformBase,c.transform=f),w=f.localTransform):b.setFromMatrix(T.bone.matrix),w&&T.bone.matrix.copy(w)}else{w=c.localTransform||new PIXI.Matrix;T.bone.matrix.copy(w),c.localTransform=w,c.displayObjectUpdateTransform=t}i[0]=a*T.color.r*d.r,i[1]=r*T.color.g*d.g,i[2]=n*T.color.b*d.b,T.currentSprite.tint=PIXI.utils.rgb2hex(i),T.currentSprite.blendMode=T.blendMode}else if(p instanceof e.core.MeshAttachment){if(T.currentSprite&&(T.currentSprite.visible=!1,T.currentSprite=null,T.currentSpriteName=void 0,c.transform?c.transform=new PIXI.TransformStatic:(c.localTransform=new PIXI.Matrix,c.displayObjectUpdateTransform=PIXI.DisplayObject.prototype.updateTransform)),!T.currentMeshName||T.currentMeshName!==p.name){var v=p.name;if(T.currentMesh&&(T.currentMesh.visible=!1),T.meshes=T.meshes||{},void 0!==T.meshes[v])T.meshes[v].visible=!0;else{var k=this.createMesh(T,p);c.addChild(k)}T.currentMesh=T.meshes[v],T.currentMeshName=v}if(p.computeWorldVerticesOld(T,T.currentMesh.vertices),"3"!==PIXI.VERSION[0]){var S=T.currentMesh.tintRgb;S[0]=a*T.color.r*d.r,S[1]=r*T.color.g*d.g,S[2]=n*T.color.b*d.b}T.currentMesh.blendMode=T.blendMode}else{if(!(p instanceof e.core.ClippingAttachment)){c.visible=!1;continue}T.currentGraphics||(this.createGraphics(T,p),c.addChild(T.clippingContainer),c.addChild(T.currentGraphics)),this.updateGraphics(T,p)}c.visible=!0,c.alpha=T.color.a}else c.visible=!1}for(var x=this.skeleton.drawOrder,P=null,B=null,h=0,l=x.length;h<l;h++){var T=o[x[h].data.index],c=this.slotContainers[x[h].data.index];if(B||c.parent!==this&&(c.parent.removeChild(c),c.parent=this),T.currentGraphics&&T.attachment)B=T.clippingContainer,P=T.attachment,B.children.length=0,this.children[h]=c,P.endSlot==T.data&&(B.renderable=!1,B=null,P=null);else if(B){var G=this.tempClipContainers[h];G||((G=this.tempClipContainers[h]=new PIXI.Container).visible=!1),this.children[h]=G,c.parent=null,B.addChild(c),P.endSlot==T.data&&(B.renderable=!0,B=null,P=null)}else this.children[h]=c}},r.prototype.setSpriteRegion=function(e,t,i){t.region=i,t.texture=i.texture,i.size?(t.scale.x=i.size.width/i.originalWidth,t.scale.y=-i.size.height/i.originalHeight):(t.scale.x=e.scaleX*e.width/i.originalWidth,t.scale.y=-e.scaleY*e.height/i.originalHeight)},r.prototype.setMeshRegion=function(e,t,i){t.region=i,t.texture=i.texture,e.updateUVs(i,t.uvs),t.dirty++},r.prototype.autoUpdateTransform=function(){if(r.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var e=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(e)}else this.lastTime=0;PIXI.Container.prototype.updateTransform.call(this)},r.prototype.createSprite=function(t,i,o){var a=i.region;t.tempAttachment===i&&(a=t.tempRegion,t.tempAttachment=null,t.tempRegion=null);var r=a.texture,n=new s(r);return n.rotation=i.rotation*e.core.MathUtils.degRad,n.anchor.x=.5,n.anchor.y=.5,n.position.x=i.x,n.position.y=i.y,n.alpha=i.color.a,n.region=i.region,this.setSpriteRegion(i,n,i.region),t.sprites=t.sprites||{},t.sprites[o]=n,n},r.prototype.createMesh=function(e,t){var i=t.region;e.tempAttachment===t&&(i=e.tempRegion,e.tempAttachment=null,e.tempRegion=null);var s=new o(i.texture,new Float32Array(t.regionUVs.length),new Float32Array(t.regionUVs.length),new Uint16Array(t.triangles),PIXI.mesh.Mesh.DRAW_MODES.TRIANGLES);return s.canvasPadding=1.5,s.alpha=t.color.a,s.region=t.region,this.setMeshRegion(t,s,i),e.meshes=e.meshes||{},e.meshes[t.name]=s,s},r.prototype.createGraphics=function(e,t){var i=new PIXI.Graphics,s=new PIXI.Polygon([]);return i.clear(),i.beginFill(16777215,1),i.drawPolygon(s),i.renderable=!1,e.currentGraphics=i,e.clippingContainer=new PIXI.Container,e.clippingContainer.mask=e.currentGraphics,i},r.prototype.updateGraphics=function(e,t){var i=e.currentGraphics.graphicsData[0].shape.points,s=t.worldVerticesLength;i.length=s,t.computeWorldVertices(e,0,s,i,0,2),e.currentGraphics.dirty++,e.currentGraphics.clearDirty++},r.prototype.hackTextureBySlotIndex=function(t,i,s){void 0===i&&(i=null),void 0===s&&(s=null);var o=this.skeleton.slots[t];if(!o)return!1;var a=o.attachment,r=a.region;return i&&((r=new e.core.TextureRegion).texture=i,r.size=s),o.currentSprite&&o.currentSprite.region!=r?(this.setSpriteRegion(a,o.currentSprite,r),o.currentSprite.region=r):o.currentMesh&&o.currentMesh.region!=r?this.setMeshRegion(a,o.currentMesh,r):(o.tempRegion=r,o.tempAttachment=a),!0},r.globalAutoUpdate=!0,r.clippingPolygon=[],r}(PIXI.Container);e.Spine=a}(pixi_spine||(pixi_spine={})),PIXI.spine=pixi_spine;var MinAjax=function(){function e(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}return{minAjax:function(t){if(t.url)if(t.type){t.method||(t.method=!0),t.debugLog||(t.debugLog=!1);var i=e();i.onreadystatechange=function(){4==i.readyState&&200==i.status?(t.success&&t.success(i.responseText,i.readyState),1==t.debugLog&&console.log("SuccessResponse"),1==t.debugLog&&console.log("Response Data:"+i.responseText)):1==t.debugLog&&console.log("FailureResponse --\x3e State:"+i.readyState+"Status:"+i.status)};var s=[],o=t.data;if("string"==typeof o)for(var a=String.prototype.split.call(o,"&"),r=0,n=a.length;r<n;r++){l=a[r].split("=");s.push(encodeURIComponent(l[0])+"="+encodeURIComponent(l[1]))}else if("object"==typeof o&&!(o instanceof String||FormData&&o instanceof FormData))for(var h in o){var l=o[h];if("[object Array]"==Object.prototype.toString.call(l))for(var r=0,n=l.length;r<n;r++)s.push(encodeURIComponent(h)+"[]="+encodeURIComponent(l[r]));else s.push(encodeURIComponent(h)+"="+encodeURIComponent(l))}s=s.join("&"),"GET"==t.type&&(i.open("GET",t.url+"?"+s,t.method),i.send(),1==t.debugLog&&console.log("GET fired at:"+t.url+"?"+s)),"POST"==t.type&&(i.open("POST",t.url,t.method),i.setRequestHeader(t.requestType,t.requestValue),i.send(s),1==t.debugLog&&console.log("POST fired at:"+t.url+" || Data:"+s))}else 1==t.debugLog&&console.log("No Default type (GET/POST) given!");else 1==t.debugLog&&console.log("No Url!")}}};!function(e){if("object"==typeof exports)module.exports=e();else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.p2=e()}}(function(){return function e(t,i,s){function o(r,n){if(!i[r]){if(!t[r]){var h="function"==typeof require&&require;if(!n&&h)return h(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+r+"'")}var l=i[r]={exports:{}};t[r][0].call(l.exports,function(e){var i=t[r][1][e];return o(i||e)},l,l.exports,e,t,i,s)}return i[r].exports}for(var a="function"==typeof require&&require,r=0;r<s.length;r++)o(s[r]);return o}({1:[function(e,t,i){function s(){}var o=e("./Scalar");t.exports=s,s.lineInt=function(e,t,i){i=i||0;var s,a,r,n,h,l,p,c=[0,0];return s=e[1][1]-e[0][1],a=e[0][0]-e[1][0],r=s*e[0][0]+a*e[0][1],n=t[1][1]-t[0][1],h=t[0][0]-t[1][0],l=n*t[0][0]+h*t[0][1],p=s*h-n*a,o.eq(p,0,i)||(c[0]=(h*r-a*l)/p,c[1]=(s*l-n*r)/p),c},s.segmentsIntersect=function(e,t,i,s){var o=t[0]-e[0],a=t[1]-e[1],r=s[0]-i[0],n=s[1]-i[1];if(r*a-n*o==0)return!1;var h=(o*(i[1]-e[1])+a*(e[0]-i[0]))/(r*a-n*o),l=(r*(e[1]-i[1])+n*(i[0]-e[0]))/(n*o-r*a);return h>=0&&h<=1&&l>=0&&l<=1}},{"./Scalar":4}],2:[function(e,t,i){function s(){}t.exports=s,s.area=function(e,t,i){return(t[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(t[1]-e[1])},s.left=function(e,t,i){return s.area(e,t,i)>0},s.leftOn=function(e,t,i){return s.area(e,t,i)>=0},s.right=function(e,t,i){return s.area(e,t,i)<0},s.rightOn=function(e,t,i){return s.area(e,t,i)<=0};var o=[],a=[];s.collinear=function(e,t,i,r){if(r){var n=o,h=a;n[0]=t[0]-e[0],n[1]=t[1]-e[1],h[0]=i[0]-t[0],h[1]=i[1]-t[1];var l=n[0]*h[0]+n[1]*h[1],p=Math.sqrt(n[0]*n[0]+n[1]*n[1]),c=Math.sqrt(h[0]*h[0]+h[1]*h[1]);return Math.acos(l/(p*c))<r}return 0==s.area(e,t,i)},s.sqdist=function(e,t){var i=t[0]-e[0],s=t[1]-e[1];return i*i+s*s}},{}],3:[function(e,t,i){function s(){this.vertices=[]}function o(e,t,i,s,o){o=o||0;var a=t[1]-e[1],r=e[0]-t[0],h=a*e[0]+r*e[1],l=s[1]-i[1],p=i[0]-s[0],c=l*i[0]+p*i[1],d=a*p-l*r;return n.eq(d,0,o)?[0,0]:[(p*h-r*c)/d,(a*c-l*h)/d]}var a=e("./Line"),r=e("./Point"),n=e("./Scalar");t.exports=s,s.prototype.at=function(e){var t=this.vertices,i=t.length;return t[e<0?e%i+i:e%i]},s.prototype.first=function(){return this.vertices[0]},s.prototype.last=function(){return this.vertices[this.vertices.length-1]},s.prototype.clear=function(){this.vertices.length=0},s.prototype.append=function(e,t,i){if(void 0===t)throw new Error("From is not given!");if(void 0===i)throw new Error("To is not given!");if(i-1<t)throw new Error("lol1");if(i>e.vertices.length)throw new Error("lol2");if(t<0)throw new Error("lol3");for(var s=t;s<i;s++)this.vertices.push(e.vertices[s])},s.prototype.makeCCW=function(){for(var e=0,t=this.vertices,i=1;i<this.vertices.length;++i)(t[i][1]<t[e][1]||t[i][1]==t[e][1]&&t[i][0]>t[e][0])&&(e=i);r.left(this.at(e-1),this.at(e),this.at(e+1))||this.reverse()},s.prototype.reverse=function(){for(var e=[],t=0,i=this.vertices.length;t!==i;t++)e.push(this.vertices.pop());this.vertices=e},s.prototype.isReflex=function(e){return r.right(this.at(e-1),this.at(e),this.at(e+1))};var h=[],l=[];s.prototype.canSee=function(e,t){var i,s,o=h,n=l;if(r.leftOn(this.at(e+1),this.at(e),this.at(t))&&r.rightOn(this.at(e-1),this.at(e),this.at(t)))return!1;s=r.sqdist(this.at(e),this.at(t));for(var p=0;p!==this.vertices.length;++p)if((p+1)%this.vertices.length!==e&&p!==e&&r.leftOn(this.at(e),this.at(t),this.at(p+1))&&r.rightOn(this.at(e),this.at(t),this.at(p))&&(o[0]=this.at(e),o[1]=this.at(t),n[0]=this.at(p),n[1]=this.at(p+1),i=a.lineInt(o,n),r.sqdist(this.at(e),i)<s))return!1;return!0},s.prototype.copy=function(e,t,i){var o=i||new s;if(o.clear(),e<t)for(a=e;a<=t;a++)o.vertices.push(this.vertices[a]);else{for(a=0;a<=t;a++)o.vertices.push(this.vertices[a]);for(var a=e;a<this.vertices.length;a++)o.vertices.push(this.vertices[a])}return o},s.prototype.getCutEdges=function(){for(var e=[],t=[],i=[],o=new s,a=Number.MAX_VALUE,r=0;r<this.vertices.length;++r)if(this.isReflex(r))for(var n=0;n<this.vertices.length;++n)if(this.canSee(r,n)){t=this.copy(r,n,o).getCutEdges(),i=this.copy(n,r,o).getCutEdges();for(var h=0;h<i.length;h++)t.push(i[h]);t.length<a&&(e=t,a=t.length,e.push([this.at(r),this.at(n)]))}return e},s.prototype.decomp=function(){var e=this.getCutEdges();return e.length>0?this.slice(e):[this]},s.prototype.slice=function(e){if(0==e.length)return[this];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2==e[0].length&&e[0][0]instanceof Array){for(var t=[this],i=0;i<e.length;i++)for(var s=e[i],o=0;o<t.length;o++){var a=t[o].slice(s);if(a){t.splice(o,1),t.push(a[0],a[1]);break}}return t}var s=e,i=this.vertices.indexOf(s[0]),o=this.vertices.indexOf(s[1]);return-1!=i&&-1!=o&&[this.copy(i,o),this.copy(o,i)]},s.prototype.isSimple=function(){for(var e=this.vertices,t=0;t<e.length-1;t++)for(var i=0;i<t-1;i++)if(a.segmentsIntersect(e[t],e[t+1],e[i],e[i+1]))return!1;for(t=1;t<e.length-2;t++)if(a.segmentsIntersect(e[0],e[e.length-1],e[t],e[t+1]))return!1;return!0},s.prototype.quickDecomp=function(e,t,i,a,n,h){n=n||100,h=h||0,a=a||25,e=void 0!==e?e:[],t=t||[],i=i||[];var l=[0,0],p=[0,0],c=[0,0],d=0,u=0,g=0,m=0,y=0,f=0,b=0,w=new s,v=new s,k=this,S=this.vertices;if(S.length<3)return e;if(++h>n)return console.warn("quickDecomp: max level ("+n+") reached."),e;for(var x=0;x<this.vertices.length;++x)if(k.isReflex(x)){t.push(k.vertices[x]),d=u=Number.MAX_VALUE;for(P=0;P<this.vertices.length;++P)r.left(k.at(x-1),k.at(x),k.at(P))&&r.rightOn(k.at(x-1),k.at(x),k.at(P-1))&&(c=o(k.at(x-1),k.at(x),k.at(P),k.at(P-1)),r.right(k.at(x+1),k.at(x),c)&&(g=r.sqdist(k.vertices[x],c))<u&&(u=g,p=c,f=P)),r.left(k.at(x+1),k.at(x),k.at(P+1))&&r.rightOn(k.at(x+1),k.at(x),k.at(P))&&(c=o(k.at(x+1),k.at(x),k.at(P),k.at(P+1)),r.left(k.at(x-1),k.at(x),c)&&(g=r.sqdist(k.vertices[x],c))<d&&(d=g,l=c,y=P));if(f==(y+1)%this.vertices.length)c[0]=(p[0]+l[0])/2,c[1]=(p[1]+l[1])/2,i.push(c),x<y?(w.append(k,x,y+1),w.vertices.push(c),v.vertices.push(c),0!=f&&v.append(k,f,k.vertices.length),v.append(k,0,x+1)):(0!=x&&w.append(k,x,k.vertices.length),w.append(k,0,y+1),w.vertices.push(c),v.vertices.push(c),v.append(k,f,x+1));else{if(f>y&&(y+=this.vertices.length),m=Number.MAX_VALUE,y<f)return e;for(var P=f;P<=y;++P)r.leftOn(k.at(x-1),k.at(x),k.at(P))&&r.rightOn(k.at(x+1),k.at(x),k.at(P))&&(g=r.sqdist(k.at(x),k.at(P)))<m&&(m=g,b=P%this.vertices.length);x<b?(w.append(k,x,b+1),0!=b&&v.append(k,b,S.length),v.append(k,0,x+1)):(0!=x&&w.append(k,x,S.length),w.append(k,0,b+1),v.append(k,b,x+1))}return w.vertices.length<v.vertices.length?(w.quickDecomp(e,t,i,a,n,h),v.quickDecomp(e,t,i,a,n,h)):(v.quickDecomp(e,t,i,a,n,h),w.quickDecomp(e,t,i,a,n,h)),e}return e.push(this),e},s.prototype.removeCollinearPoints=function(e){for(var t=0,i=this.vertices.length-1;this.vertices.length>3&&i>=0;--i)r.collinear(this.at(i-1),this.at(i),this.at(i+1),e)&&(this.vertices.splice(i%this.vertices.length,1),i--,t++);return t}},{"./Line":1,"./Point":2,"./Scalar":4}],4:[function(e,t,i){function s(){}t.exports=s,s.eq=function(e,t,i){return i=i||0,Math.abs(e-t)<i}},{}],5:[function(e,t,i){t.exports={Polygon:e("./Polygon"),Point:e("./Point")}},{"./Point":2,"./Polygon":3}],6:[function(e,t,i){t.exports={name:"p2",version:"0.7.0",description:"A JavaScript 2D physics engine.",author:"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",keywords:["p2.js","p2","physics","engine","2d"],main:"./src/p2.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/p2.js.git"},bugs:{url:"https://github.com/schteppe/p2.js/issues"},licenses:[{type:"MIT"}],devDependencies:{grunt:"^0.4.5","grunt-contrib-jshint":"^0.11.2","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0"},dependencies:{"poly-decomp":"0.1.0"}}},{}],7:[function(e,t,i){function s(e){this.lowerBound=o.create(),e&&e.lowerBound&&o.copy(this.lowerBound,e.lowerBound),this.upperBound=o.create(),e&&e.upperBound&&o.copy(this.upperBound,e.upperBound)}var o=e("../math/vec2");e("../utils/Utils");t.exports=s;var a=o.create();s.prototype.setFromPoints=function(e,t,i,s){var r=this.lowerBound,n=this.upperBound;"number"!=typeof i&&(i=0),0!==i?o.rotate(r,e[0],i):o.copy(r,e[0]),o.copy(n,r);for(var h=Math.cos(i),l=Math.sin(i),p=1;p<e.length;p++){var c=e[p];if(0!==i){var d=c[0],u=c[1];a[0]=h*d-l*u,a[1]=l*d+h*u,c=a}for(var g=0;g<2;g++)c[g]>n[g]&&(n[g]=c[g]),c[g]<r[g]&&(r[g]=c[g])}t&&(o.add(this.lowerBound,this.lowerBound,t),o.add(this.upperBound,this.upperBound,t)),s&&(this.lowerBound[0]-=s,this.lowerBound[1]-=s,this.upperBound[0]+=s,this.upperBound[1]+=s)},s.prototype.copy=function(e){o.copy(this.lowerBound,e.lowerBound),o.copy(this.upperBound,e.upperBound)},s.prototype.extend=function(e){for(var t=2;t--;){var i=e.lowerBound[t];this.lowerBound[t]>i&&(this.lowerBound[t]=i);var s=e.upperBound[t];this.upperBound[t]<s&&(this.upperBound[t]=s)}},s.prototype.overlaps=function(e){var t=this.lowerBound,i=this.upperBound,s=e.lowerBound,o=e.upperBound;return(s[0]<=i[0]&&i[0]<=o[0]||t[0]<=o[0]&&o[0]<=i[0])&&(s[1]<=i[1]&&i[1]<=o[1]||t[1]<=o[1]&&o[1]<=i[1])},s.prototype.containsPoint=function(e){var t=this.lowerBound,i=this.upperBound;return t[0]<=e[0]&&e[0]<=i[0]&&t[1]<=e[1]&&e[1]<=i[1]},s.prototype.overlapsRay=function(e){var t=1/e.direction[0],i=1/e.direction[1],s=(this.lowerBound[0]-e.from[0])*t,o=(this.upperBound[0]-e.from[0])*t,a=(this.lowerBound[1]-e.from[1])*i,r=(this.upperBound[1]-e.from[1])*i,n=Math.max(Math.max(Math.min(s,o),Math.min(a,r))),h=Math.min(Math.min(Math.max(s,o),Math.max(a,r)));return h<0?-1:n>h?-1:n}},{"../math/vec2":30,"../utils/Utils":57}],8:[function(e,t,i){function s(e){this.type=e,this.result=[],this.world=null,this.boundingVolumeType=s.AABB}var o=e("../math/vec2"),a=e("../objects/Body");t.exports=s,s.AABB=1,s.BOUNDING_CIRCLE=2,s.prototype.setWorld=function(e){this.world=e},s.prototype.getCollisionPairs=function(e){};var r=o.create();s.boundingRadiusCheck=function(e,t){o.sub(r,e.position,t.position);var i=o.squaredLength(r),s=e.boundingRadius+t.boundingRadius;return i<=s*s},s.aabbCheck=function(e,t){return e.getAABB().overlaps(t.getAABB())},s.prototype.boundingVolumeCheck=function(e,t){var i;switch(this.boundingVolumeType){case s.BOUNDING_CIRCLE:i=s.boundingRadiusCheck(e,t);break;case s.AABB:i=s.aabbCheck(e,t);break;default:throw new Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return i},s.canCollide=function(e,t){var i=a.KINEMATIC,s=a.STATIC;return(e.type!==s||t.type!==s)&&(!(e.type===i&&t.type===s||e.type===s&&t.type===i)&&((e.type!==i||t.type!==i)&&((e.sleepState!==a.SLEEPING||t.sleepState!==a.SLEEPING)&&!(e.sleepState===a.SLEEPING&&t.type===s||t.sleepState===a.SLEEPING&&e.type===s))))},s.NAIVE=1,s.SAP=2},{"../math/vec2":30,"../objects/Body":31}],9:[function(e,t,i){function s(){o.call(this,o.NAIVE)}e("../shapes/Circle"),e("../shapes/Plane"),e("../shapes/Shape"),e("../shapes/Particle");var o=e("../collision/Broadphase");e("../math/vec2");t.exports=s,(s.prototype=new o).constructor=s,s.prototype.getCollisionPairs=function(e){var t=e.bodies,i=this.result;i.length=0;for(var s=0,a=t.length;s!==a;s++)for(var r=t[s],n=0;n<s;n++){var h=t[n];o.canCollide(r,h)&&this.boundingVolumeCheck(r,h)&&i.push(r,h)}return i},s.prototype.aabbQuery=function(e,t,i){i=i||[];for(var s=e.bodies,o=0;o<s.length;o++){var a=s[o];a.aabbNeedsUpdate&&a.updateAABB(),a.aabb.overlaps(t)&&i.push(a)}return i}},{"../collision/Broadphase":8,"../math/vec2":30,"../shapes/Circle":39,"../shapes/Particle":43,"../shapes/Plane":44,"../shapes/Shape":45}],10:[function(e,t,i){function s(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.enabledEquations=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.contactEquationPool=new p({size:32}),this.frictionEquationPool=new c({size:64}),this.restitution=0,this.stiffness=u.DEFAULT_STIFFNESS,this.relaxation=u.DEFAULT_RELAXATION,this.frictionStiffness=u.DEFAULT_STIFFNESS,this.frictionRelaxation=u.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new d,this.contactSkinSize=.01}function o(e,t){r.set(e.vertices[0],.5*-t.length,-t.radius),r.set(e.vertices[1],.5*t.length,-t.radius),r.set(e.vertices[2],.5*t.length,t.radius),r.set(e.vertices[3],.5*-t.length,t.radius)}function a(e,t,i,s){for(var o=X,a=N,l=q,p=Y,c=e,d=t.vertices,u=null,g=0;g!==d.length+1;g++){var m=d[g%d.length],y=d[(g+1)%d.length];r.rotate(o,m,s),r.rotate(a,y,s),h(o,o,i),h(a,a,i),n(l,o,c),n(p,a,c);var f=r.crossLength(l,p);if(null===u&&(u=f),f*u<0)return!1;u=f}return!0}var r=e("../math/vec2"),n=r.sub,h=r.add,l=r.dot,p=(e("../utils/Utils"),e("../utils/ContactEquationPool")),c=e("../utils/FrictionEquationPool"),d=e("../utils/TupleDictionary"),u=e("../equations/Equation"),g=(e("../equations/ContactEquation"),e("../equations/FrictionEquation"),e("../shapes/Circle")),m=e("../shapes/Convex"),y=e("../shapes/Shape"),f=(e("../objects/Body"),e("../shapes/Box"));t.exports=s;var b=r.fromValues(0,1),w=r.fromValues(0,0),v=r.fromValues(0,0),k=r.fromValues(0,0),S=r.fromValues(0,0),x=r.fromValues(0,0),P=r.fromValues(0,0),B=r.fromValues(0,0),T=r.fromValues(0,0),G=r.fromValues(0,0),C=r.fromValues(0,0),A=r.fromValues(0,0),M=r.fromValues(0,0),I=r.fromValues(0,0),L=r.fromValues(0,0),H=r.fromValues(0,0),R=r.fromValues(0,0),D=r.fromValues(0,0),O=r.fromValues(0,0),E=[],F=r.create(),_=r.create();s.prototype.bodiesOverlap=function(e,t){for(var i=F,s=_,o=0,a=e.shapes.length;o!==a;o++){var r=e.shapes[o];e.toWorldFrame(i,r.position);for(var n=0,h=t.shapes.length;n!==h;n++){var l=t.shapes[n];if(t.toWorldFrame(s,l.position),this[r.type|l.type](e,r,i,r.angle+e.angle,t,l,s,l.angle+t.angle,!0))return!0}}return!1},s.prototype.collidedLastStep=function(e,t){var i=0|e.id,s=0|t.id;return!!this.collidingBodiesLastStep.get(i,s)},s.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var e=this.contactEquations,t=e.length;t--;){var i=e[t],s=i.bodyA.id,o=i.bodyB.id;this.collidingBodiesLastStep.set(s,o,!0)}for(var a=this.contactEquations,r=this.frictionEquations,n=0;n<a.length;n++)this.contactEquationPool.release(a[n]);for(n=0;n<r.length;n++)this.frictionEquationPool.release(r[n]);this.contactEquations.length=this.frictionEquations.length=0},s.prototype.createContactEquation=function(e,t,i,s){var o=this.contactEquationPool.get();return o.bodyA=e,o.bodyB=t,o.shapeA=i,o.shapeB=s,o.restitution=this.restitution,o.firstImpact=!this.collidedLastStep(e,t),o.stiffness=this.stiffness,o.relaxation=this.relaxation,o.needsUpdate=!0,o.enabled=this.enabledEquations,o.offset=this.contactSkinSize,o},s.prototype.createFrictionEquation=function(e,t,i,s){var o=this.frictionEquationPool.get();return o.bodyA=e,o.bodyB=t,o.shapeA=i,o.shapeB=s,o.setSlipForce(this.slipForce),o.frictionCoefficient=this.frictionCoefficient,o.relativeVelocity=this.surfaceVelocity,o.enabled=this.enabledEquations,o.needsUpdate=!0,o.stiffness=this.frictionStiffness,o.relaxation=this.frictionRelaxation,o.contactEquations.length=0,o},s.prototype.createFrictionFromContact=function(e){var t=this.createFrictionEquation(e.bodyA,e.bodyB,e.shapeA,e.shapeB);return r.copy(t.contactPointA,e.contactPointA),r.copy(t.contactPointB,e.contactPointB),r.rotate90cw(t.t,e.normalA),t.contactEquations.push(e),t},s.prototype.createFrictionFromAverage=function(e){var t=this.contactEquations[this.contactEquations.length-1],i=this.createFrictionEquation(t.bodyA,t.bodyB,t.shapeA,t.shapeB),s=t.bodyA;t.bodyB;r.set(i.contactPointA,0,0),r.set(i.contactPointB,0,0),r.set(i.t,0,0);for(var o=0;o!==e;o++)(t=this.contactEquations[this.contactEquations.length-1-o]).bodyA===s?(r.add(i.t,i.t,t.normalA),r.add(i.contactPointA,i.contactPointA,t.contactPointA),r.add(i.contactPointB,i.contactPointB,t.contactPointB)):(r.sub(i.t,i.t,t.normalA),r.add(i.contactPointA,i.contactPointA,t.contactPointB),r.add(i.contactPointB,i.contactPointB,t.contactPointA)),i.contactEquations.push(t);var a=1/e;return r.scale(i.contactPointA,i.contactPointA,a),r.scale(i.contactPointB,i.contactPointB,a),r.normalize(i.t,i.t),r.rotate90cw(i.t,i.t),i},s.prototype[y.LINE|y.CONVEX]=s.prototype.convexLine=function(e,t,i,s,o,a,r,n,h){return!h&&0},s.prototype[y.LINE|y.BOX]=s.prototype.lineBox=function(e,t,i,s,o,a,r,n,h){return!h&&0};var j=new f({width:1,height:1}),W=r.create();s.prototype[y.CAPSULE|y.CONVEX]=s.prototype[y.CAPSULE|y.BOX]=s.prototype.convexCapsule=function(e,t,i,s,a,n,h,l,p){var c=W;r.set(c,n.length/2,0),r.rotate(c,c,l),r.add(c,c,h);var d=this.circleConvex(a,n,c,l,e,t,i,s,p,n.radius);r.set(c,-n.length/2,0),r.rotate(c,c,l),r.add(c,c,h);var u=this.circleConvex(a,n,c,l,e,t,i,s,p,n.radius);if(p&&(d||u))return!0;var g=j;return o(g,n),this.convexConvex(e,t,i,s,a,g,h,l,p)+d+u},s.prototype[y.CAPSULE|y.LINE]=s.prototype.lineCapsule=function(e,t,i,s,o,a,r,n,h){return!h&&0};var U=r.create(),z=r.create(),V=new f({width:1,height:1});s.prototype[y.CAPSULE|y.CAPSULE]=s.prototype.capsuleCapsule=function(e,t,i,s,a,n,h,l,p){for(var c=U,d=z,u=0,g=0;g<2;g++){r.set(c,(0===g?-1:1)*t.length/2,0),r.rotate(c,c,s),r.add(c,c,i);for(var m=0;m<2;m++){r.set(d,(0===m?-1:1)*n.length/2,0),r.rotate(d,d,l),r.add(d,d,h),this.enableFrictionReduction&&(w=this.enableFriction,this.enableFriction=!1);var y=this.circleCircle(e,t,c,s,a,n,d,l,p,t.radius,n.radius);if(this.enableFrictionReduction&&(this.enableFriction=w),p&&y)return!0;u+=y}}this.enableFrictionReduction&&(w=this.enableFriction,this.enableFriction=!1);var f=V;o(f,t);var b=this.convexCapsule(e,f,i,s,a,n,h,l,p);if(this.enableFrictionReduction&&(this.enableFriction=w),p&&b)return!0;if(u+=b,this.enableFrictionReduction){var w=this.enableFriction;this.enableFriction=!1}o(f,n);var v=this.convexCapsule(a,f,h,l,e,t,i,s,p);return this.enableFrictionReduction&&(this.enableFriction=w),!(!p||!v)||(u+=v,this.enableFrictionReduction&&u&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(u)),u)},s.prototype[y.LINE|y.LINE]=s.prototype.lineLine=function(e,t,i,s,o,a,r,n,h){return!h&&0},s.prototype[y.PLANE|y.LINE]=s.prototype.planeLine=function(e,t,i,s,o,a,p,c,d){var u=w,g=v,m=k,y=S,f=x,C=P,A=B,M=T,I=G,L=E,H=0;r.set(u,-a.length/2,0),r.set(g,a.length/2,0),r.rotate(m,u,c),r.rotate(y,g,c),h(m,m,p),h(y,y,p),r.copy(u,m),r.copy(g,y),n(f,g,u),r.normalize(C,f),r.rotate90cw(I,C),r.rotate(M,b,s),L[0]=u,L[1]=g;for(var R=0;R<L.length;R++){var D=L[R];n(A,D,i);var O=l(A,M);if(O<0){if(d)return!0;var F=this.createContactEquation(e,o,t,a);H++,r.copy(F.normalA,M),r.normalize(F.normalA,F.normalA),r.scale(A,M,O),n(F.contactPointA,D,A),n(F.contactPointA,F.contactPointA,e.position),n(F.contactPointB,D,p),h(F.contactPointB,F.contactPointB,p),n(F.contactPointB,F.contactPointB,o.position),this.contactEquations.push(F),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(F))}}return!d&&(this.enableFrictionReduction||H&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(H)),H)},s.prototype[y.PARTICLE|y.CAPSULE]=s.prototype.particleCapsule=function(e,t,i,s,o,a,r,n,h){return this.circleLine(e,t,i,s,o,a,r,n,h,a.radius,0)},s.prototype[y.CIRCLE|y.LINE]=s.prototype.circleLine=function(e,t,i,s,o,a,p,c,d,u,g){var u=u||0,g=void 0!==g?g:t.radius,m=w,y=v,f=k,b=S,H=x,R=P,D=B,O=T,F=G,_=C,j=A,W=M,U=I,z=L,V=E;r.set(O,-a.length/2,0),r.set(F,a.length/2,0),r.rotate(_,O,c),r.rotate(j,F,c),h(_,_,p),h(j,j,p),r.copy(O,_),r.copy(F,j),n(R,F,O),r.normalize(D,R),r.rotate90cw(H,D),n(W,i,O);var X=l(W,H);n(b,O,p),n(U,i,p);var N=g+u;if(Math.abs(X)<N){r.scale(m,H,X),n(f,i,m),r.scale(y,H,l(H,U)),r.normalize(y,y),r.scale(y,y,u),h(f,f,y);var q=l(D,f),Y=l(D,O),K=l(D,F);if(q>Y&&q<K){if(d)return!0;Q=this.createContactEquation(e,o,t,a);return r.scale(Q.normalA,m,-1),r.normalize(Q.normalA,Q.normalA),r.scale(Q.contactPointA,Q.normalA,g),h(Q.contactPointA,Q.contactPointA,i),n(Q.contactPointA,Q.contactPointA,e.position),n(Q.contactPointB,f,p),h(Q.contactPointB,Q.contactPointB,p),n(Q.contactPointB,Q.contactPointB,o.position),this.contactEquations.push(Q),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Q)),1}}V[0]=O,V[1]=F;for(var Z=0;Z<V.length;Z++){var J=V[Z];if(n(W,J,i),r.squaredLength(W)<Math.pow(N,2)){if(d)return!0;var Q=this.createContactEquation(e,o,t,a);return r.copy(Q.normalA,W),r.normalize(Q.normalA,Q.normalA),r.scale(Q.contactPointA,Q.normalA,g),h(Q.contactPointA,Q.contactPointA,i),n(Q.contactPointA,Q.contactPointA,e.position),n(Q.contactPointB,J,p),r.scale(z,Q.normalA,-u),h(Q.contactPointB,Q.contactPointB,z),h(Q.contactPointB,Q.contactPointB,p),n(Q.contactPointB,Q.contactPointB,o.position),this.contactEquations.push(Q),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Q)),1}}return 0},s.prototype[y.CIRCLE|y.CAPSULE]=s.prototype.circleCapsule=function(e,t,i,s,o,a,r,n,h){return this.circleLine(e,t,i,s,o,a,r,n,h,a.radius)},s.prototype[y.CIRCLE|y.CONVEX]=s.prototype[y.CIRCLE|y.BOX]=s.prototype.circleConvex=function(e,t,i,s,o,l,p,c,d,u){for(var u="number"==typeof u?u:t.radius,g=w,m=v,y=k,f=S,b=x,P=C,B=A,T=I,G=L,M=H,D=R,O=!1,E=Number.MAX_VALUE,F=l.vertices,_=0;_!==F.length+1;_++){var j=F[_%F.length],W=F[(_+1)%F.length];if(r.rotate(g,j,c),r.rotate(m,W,c),h(g,g,p),h(m,m,p),n(y,m,g),r.normalize(f,y),r.rotate90cw(b,f),r.scale(G,b,-t.radius),h(G,G,i),a(G,l,p,c)){r.sub(M,g,G);var U=Math.abs(r.dot(M,b));U<E&&(r.copy(D,G),E=U,r.scale(T,b,U),r.add(T,T,G),O=!0)}}if(O){if(d)return!0;V=this.createContactEquation(e,o,t,l);return r.sub(V.normalA,D,i),r.normalize(V.normalA,V.normalA),r.scale(V.contactPointA,V.normalA,u),h(V.contactPointA,V.contactPointA,i),n(V.contactPointA,V.contactPointA,e.position),n(V.contactPointB,T,p),h(V.contactPointB,V.contactPointB,p),n(V.contactPointB,V.contactPointB,o.position),this.contactEquations.push(V),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(V)),1}if(u>0)for(_=0;_<F.length;_++){var z=F[_];if(r.rotate(B,z,c),h(B,B,p),n(P,B,i),r.squaredLength(P)<Math.pow(u,2)){if(d)return!0;var V=this.createContactEquation(e,o,t,l);return r.copy(V.normalA,P),r.normalize(V.normalA,V.normalA),r.scale(V.contactPointA,V.normalA,u),h(V.contactPointA,V.contactPointA,i),n(V.contactPointA,V.contactPointA,e.position),n(V.contactPointB,B,p),h(V.contactPointB,V.contactPointB,p),n(V.contactPointB,V.contactPointB,o.position),this.contactEquations.push(V),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(V)),1}}return 0};var X=r.create(),N=r.create(),q=r.create(),Y=r.create();s.prototype[y.PARTICLE|y.CONVEX]=s.prototype[y.PARTICLE|y.BOX]=s.prototype.particleConvex=function(e,t,i,s,o,p,c,d,u){var g=w,m=v,y=k,f=S,b=x,T=P,G=B,A=C,M=I,L=D,H=O,R=Number.MAX_VALUE,E=!1,F=p.vertices;if(!a(i,p,c,d))return!u&&0;if(u)return!0;for(var _=0;_!==F.length+1;_++){var j=F[_%F.length],W=F[(_+1)%F.length];r.rotate(g,j,d),r.rotate(m,W,d),h(g,g,c),h(m,m,c),n(y,m,g),r.normalize(f,y),r.rotate90cw(b,f),n(A,i,g);l(A,b);n(T,g,c),n(G,i,c),r.sub(L,g,i);var U=Math.abs(r.dot(L,b));U<R&&(R=U,r.scale(M,b,U),r.add(M,M,i),r.copy(H,b),E=!0)}if(E){var z=this.createContactEquation(e,o,t,p);return r.scale(z.normalA,H,-1),r.normalize(z.normalA,z.normalA),r.set(z.contactPointA,0,0),h(z.contactPointA,z.contactPointA,i),n(z.contactPointA,z.contactPointA,e.position),n(z.contactPointB,M,c),h(z.contactPointB,z.contactPointB,c),n(z.contactPointB,z.contactPointB,o.position),this.contactEquations.push(z),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(z)),1}return 0},s.prototype[y.CIRCLE]=s.prototype.circleCircle=function(e,t,i,s,o,a,l,p,c,d,u){var g=w,d=d||t.radius,u=u||a.radius;n(g,i,l);var m=d+u;if(r.squaredLength(g)>Math.pow(m,2))return 0;if(c)return!0;var y=this.createContactEquation(e,o,t,a);return n(y.normalA,l,i),r.normalize(y.normalA,y.normalA),r.scale(y.contactPointA,y.normalA,d),r.scale(y.contactPointB,y.normalA,-u),h(y.contactPointA,y.contactPointA,i),n(y.contactPointA,y.contactPointA,e.position),h(y.contactPointB,y.contactPointB,l),n(y.contactPointB,y.contactPointB,o.position),this.contactEquations.push(y),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(y)),1},s.prototype[y.PLANE|y.CONVEX]=s.prototype[y.PLANE|y.BOX]=s.prototype.planeConvex=function(e,t,i,s,o,a,p,c,d){var u=w,g=v,m=k,y=0;r.rotate(g,b,s);for(var f=0;f!==a.vertices.length;f++){var S=a.vertices[f];if(r.rotate(u,S,c),h(u,u,p),n(m,u,i),l(m,g)<=0){if(d)return!0;y++;var x=this.createContactEquation(e,o,t,a);n(m,u,i),r.copy(x.normalA,g);var P=l(m,x.normalA);r.scale(m,x.normalA,P),n(x.contactPointB,u,o.position),n(x.contactPointA,u,m),n(x.contactPointA,x.contactPointA,e.position),this.contactEquations.push(x),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(x))}}return this.enableFrictionReduction&&this.enableFriction&&y&&this.frictionEquations.push(this.createFrictionFromAverage(y)),y},s.prototype[y.PARTICLE|y.PLANE]=s.prototype.particlePlane=function(e,t,i,s,o,a,h,p,c){var d=w,u=v;p=p||0,n(d,i,h),r.rotate(u,b,p);var g=l(d,u);if(g>0)return 0;if(c)return!0;var m=this.createContactEquation(o,e,a,t);return r.copy(m.normalA,u),r.scale(d,m.normalA,g),n(m.contactPointA,i,d),n(m.contactPointA,m.contactPointA,o.position),n(m.contactPointB,i,e.position),this.contactEquations.push(m),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(m)),1},s.prototype[y.CIRCLE|y.PARTICLE]=s.prototype.circleParticle=function(e,t,i,s,o,a,l,p,c){var d=w;if(n(d,l,i),r.squaredLength(d)>Math.pow(t.radius,2))return 0;if(c)return!0;var u=this.createContactEquation(e,o,t,a);return r.copy(u.normalA,d),r.normalize(u.normalA,u.normalA),r.scale(u.contactPointA,u.normalA,t.radius),h(u.contactPointA,u.contactPointA,i),n(u.contactPointA,u.contactPointA,e.position),n(u.contactPointB,l,o.position),this.contactEquations.push(u),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(u)),1};var K=new g({radius:1}),Z=r.create(),J=r.create();r.create();s.prototype[y.PLANE|y.CAPSULE]=s.prototype.planeCapsule=function(e,t,i,s,o,a,n,l,p){var c=Z,d=J,u=K;r.set(c,-a.length/2,0),r.rotate(c,c,l),h(c,c,n),r.set(d,a.length/2,0),r.rotate(d,d,l),h(d,d,n),u.radius=a.radius;var g;this.enableFrictionReduction&&(g=this.enableFriction,this.enableFriction=!1);var m=this.circlePlane(o,u,c,0,e,t,i,s,p),y=this.circlePlane(o,u,d,0,e,t,i,s,p);if(this.enableFrictionReduction&&(this.enableFriction=g),p)return m||y;var f=m+y;return this.enableFrictionReduction&&f&&this.frictionEquations.push(this.createFrictionFromAverage(f)),f},s.prototype[y.CIRCLE|y.PLANE]=s.prototype.circlePlane=function(e,t,i,s,o,a,p,c,d){var u=e,g=t,m=i,y=o,f=p,S=c;S=S||0;var x=w,P=v,B=k;n(x,m,f),r.rotate(P,b,S);var T=l(P,x);if(T>g.radius)return 0;if(d)return!0;var G=this.createContactEquation(y,u,a,t);return r.copy(G.normalA,P),r.scale(G.contactPointB,G.normalA,-g.radius),h(G.contactPointB,G.contactPointB,m),n(G.contactPointB,G.contactPointB,u.position),r.scale(B,G.normalA,T),n(G.contactPointA,x,B),h(G.contactPointA,G.contactPointA,f),n(G.contactPointA,G.contactPointA,y.position),this.contactEquations.push(G),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(G)),1},s.prototype[y.CONVEX]=s.prototype[y.CONVEX|y.BOX]=s.prototype[y.BOX]=s.prototype.convexConvex=function(e,t,i,o,a,p,c,d,u,g){var m=w,y=v,f=k,b=S,P=x,C=B,A=T,M=G,I=0,g="number"==typeof g?g:0;if(!s.findSeparatingAxis(t,i,o,p,c,d,m))return 0;n(A,c,i),l(m,A)>0&&r.scale(m,m,-1);var L=s.getClosestEdge(t,o,m,!0),H=s.getClosestEdge(p,d,m);if(-1===L||-1===H)return 0;for(var R=0;R<2;R++){var D=L,O=H,E=t,F=p,_=i,j=c,W=o,U=d,z=e,V=a;if(0===R){var X;X=D,D=O,O=X,X=E,E=F,F=X,X=_,_=j,j=X,X=W,W=U,U=X,X=z,z=V,V=X}for(var N=O;N<O+2;N++){var q=F.vertices[(N+F.vertices.length)%F.vertices.length];r.rotate(y,q,U),h(y,y,j);for(var Y=0,K=D-1;K<D+2;K++){var Z=E.vertices[(K+E.vertices.length)%E.vertices.length],J=E.vertices[(K+1+E.vertices.length)%E.vertices.length];r.rotate(f,Z,W),r.rotate(b,J,W),h(f,f,_),h(b,b,_),n(P,b,f),r.rotate90cw(M,P),r.normalize(M,M),n(A,y,f);$=l(M,A);(K===D&&$<=g||K!==D&&$<=0)&&Y++}if(Y>=3){if(u)return!0;var Q=this.createContactEquation(z,V,E,F);I++;var Z=E.vertices[D%E.vertices.length],J=E.vertices[(D+1)%E.vertices.length];r.rotate(f,Z,W),r.rotate(b,J,W),h(f,f,_),h(b,b,_),n(P,b,f),r.rotate90cw(Q.normalA,P),r.normalize(Q.normalA,Q.normalA),n(A,y,f);var $=l(Q.normalA,A);r.scale(C,Q.normalA,$),n(Q.contactPointA,y,_),n(Q.contactPointA,Q.contactPointA,C),h(Q.contactPointA,Q.contactPointA,_),n(Q.contactPointA,Q.contactPointA,z.position),n(Q.contactPointB,y,j),h(Q.contactPointB,Q.contactPointB,j),n(Q.contactPointB,Q.contactPointB,V.position),this.contactEquations.push(Q),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Q))}}}return this.enableFrictionReduction&&this.enableFriction&&I&&this.frictionEquations.push(this.createFrictionFromAverage(I)),I};var Q=r.fromValues(0,0);s.projectConvexOntoAxis=function(e,t,i,s,o){var a,n,h=null,p=null,c=Q;r.rotate(c,s,-i);for(var d=0;d<e.vertices.length;d++)a=e.vertices[d],n=l(a,c),(null===h||n>h)&&(h=n),(null===p||n<p)&&(p=n);if(p>h){var u=p;p=h,h=u}var g=l(t,s);r.set(o,p+g,h+g)};var $=r.fromValues(0,0),ee=r.fromValues(0,0),te=r.fromValues(0,0),ie=r.fromValues(0,0),se=r.fromValues(0,0),oe=r.fromValues(0,0);s.findSeparatingAxis=function(e,t,i,o,a,h,l){var p=null,c=!1,d=!1,u=$,g=ee,m=te,y=ie,b=se,w=oe;if(e instanceof f&&o instanceof f)for(P=0;2!==P;P++){var v=e,k=i;1===P&&(v=o,k=h);for(B=0;2!==B;B++){0===B?r.set(y,0,1):1===B&&r.set(y,1,0),0!==k&&r.rotate(y,y,k),s.projectConvexOntoAxis(e,t,i,y,b),s.projectConvexOntoAxis(o,a,h,y,w);var S=b,x=w;b[0]>w[0]&&(x=b,S=w,!0),c=(T=x[0]-S[1])<=0,(null===p||T>p)&&(r.copy(l,y),p=T,d=c)}}else for(var P=0;2!==P;P++){var v=e,k=i;1===P&&(v=o,k=h);for(var B=0;B!==v.vertices.length;B++){r.rotate(g,v.vertices[B],k),r.rotate(m,v.vertices[(B+1)%v.vertices.length],k),n(u,m,g),r.rotate90cw(y,u),r.normalize(y,y),s.projectConvexOntoAxis(e,t,i,y,b),s.projectConvexOntoAxis(o,a,h,y,w);var S=b,x=w;b[0]>w[0]&&(x=b,S=w,!0);var T=x[0]-S[1];c=T<=0,(null===p||T>p)&&(r.copy(l,y),p=T,d=c)}}return d};var ae=r.fromValues(0,0),re=r.fromValues(0,0),ne=r.fromValues(0,0);s.getClosestEdge=function(e,t,i,s){var o=ae,a=re,h=ne;r.rotate(o,i,-t),s&&r.scale(o,o,-1);for(var p=-1,c=e.vertices.length,d=-1,u=0;u!==c;u++){n(a,e.vertices[(u+1)%c],e.vertices[u%c]),r.rotate90cw(h,a),r.normalize(h,h);var g=l(h,o);(-1===p||g>d)&&(p=u%c,d=g)}return p};var he=r.create(),le=r.create(),pe=r.create(),ce=r.create(),de=r.create(),ue=r.create(),ge=r.create();s.prototype[y.CIRCLE|y.HEIGHTFIELD]=s.prototype.circleHeightfield=function(e,t,i,s,o,a,l,p,c,d){var u=a.heights,d=d||t.radius,g=a.elementWidth,m=le,y=he,f=de,b=ge,w=ue,v=pe,k=ce,S=Math.floor((i[0]-d-l[0])/g),x=Math.ceil((i[0]+d-l[0])/g);S<0&&(S=0),x>=u.length&&(x=u.length-1);for(var P=u[S],B=u[x],T=S;T<x;T++)u[T]<B&&(B=u[T]),u[T]>P&&(P=u[T]);if(i[1]-d>P)return!c&&0;for(var G=!1,T=S;T<x;T++){r.set(v,T*g,u[T]),r.set(k,(T+1)*g,u[T+1]),r.add(v,v,l),r.add(k,k,l),r.sub(w,k,v),r.rotate(w,w,Math.PI/2),r.normalize(w,w),r.scale(y,w,-d),r.add(y,y,i),r.sub(m,y,v);var C=r.dot(m,w);if(y[0]>=v[0]&&y[0]<k[0]&&C<=0){if(c)return!0;G=!0,r.scale(m,w,-C),r.add(f,y,m),r.copy(b,w);A=this.createContactEquation(o,e,a,t);r.copy(A.normalA,b),r.scale(A.contactPointB,A.normalA,-d),h(A.contactPointB,A.contactPointB,i),n(A.contactPointB,A.contactPointB,e.position),r.copy(A.contactPointA,f),r.sub(A.contactPointA,A.contactPointA,o.position),this.contactEquations.push(A),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(A))}}if(G=!1,d>0)for(T=S;T<=x;T++)if(r.set(v,T*g,u[T]),r.add(v,v,l),r.sub(m,i,v),r.squaredLength(m)<Math.pow(d,2)){if(c)return!0;G=!0;var A=this.createContactEquation(o,e,a,t);r.copy(A.normalA,m),r.normalize(A.normalA,A.normalA),r.scale(A.contactPointB,A.normalA,-d),h(A.contactPointB,A.contactPointB,i),n(A.contactPointB,A.contactPointB,e.position),n(A.contactPointA,v,l),h(A.contactPointA,A.contactPointA,l),n(A.contactPointA,A.contactPointA,o.position),this.contactEquations.push(A),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(A))}return G?1:0};var me=r.create(),ye=r.create(),fe=r.create(),be=new m({vertices:[r.create(),r.create(),r.create(),r.create()]});s.prototype[y.BOX|y.HEIGHTFIELD]=s.prototype[y.CONVEX|y.HEIGHTFIELD]=s.prototype.convexHeightfield=function(e,t,i,s,o,a,n,h,l){var p=a.heights,c=a.elementWidth,d=me,u=ye,g=fe,m=be,y=Math.floor((e.aabb.lowerBound[0]-n[0])/c),f=Math.ceil((e.aabb.upperBound[0]-n[0])/c);y<0&&(y=0),f>=p.length&&(f=p.length-1);for(var b=p[y],w=p[f],v=y;v<f;v++)p[v]<w&&(w=p[v]),p[v]>b&&(b=p[v]);if(e.aabb.lowerBound[1]>b)return!l&&0;for(var k=0,v=y;v<f;v++){r.set(d,v*c,p[v]),r.set(u,(v+1)*c,p[v+1]),r.add(d,d,n),r.add(u,u,n);r.set(g,.5*(u[0]+d[0]),.5*(u[1]+d[1]-100)),r.sub(m.vertices[0],u,g),r.sub(m.vertices[1],d,g),r.copy(m.vertices[2],m.vertices[1]),r.copy(m.vertices[3],m.vertices[0]),m.vertices[2][1]-=100,m.vertices[3][1]-=100,k+=this.convexConvex(e,t,i,s,o,m,g,0,l)}return k}},{"../equations/ContactEquation":21,"../equations/Equation":22,"../equations/FrictionEquation":23,"../math/vec2":30,"../objects/Body":31,"../shapes/Box":37,"../shapes/Circle":39,"../shapes/Convex":40,"../shapes/Shape":45,"../utils/ContactEquationPool":48,"../utils/FrictionEquationPool":49,"../utils/TupleDictionary":56,"../utils/Utils":57}],11:[function(e,t,i){function s(e){e=e||{},this.from=e.from?a.fromValues(e.from[0],e.from[1]):a.create(),this.to=e.to?a.fromValues(e.to[0],e.to[1]):a.create(),this.checkCollisionResponse=void 0===e.checkCollisionResponse||e.checkCollisionResponse,this.skipBackfaces=!!e.skipBackfaces,this.collisionMask=void 0!==e.collisionMask?e.collisionMask:-1,this.collisionGroup=void 0!==e.collisionGroup?e.collisionGroup:-1,this.mode=void 0!==e.mode?e.mode:s.ANY,this.callback=e.callback||function(e){},this.direction=a.create(),this.length=1,this.update()}function o(e,t,i){a.sub(n,i,e);var s=a.dot(n,t);return a.scale(h,t,s),a.add(h,h,e),a.squaredDistance(i,h)}t.exports=s;var a=e("../math/vec2");e("../collision/RaycastResult"),e("../shapes/Shape"),e("../collision/AABB");s.prototype.constructor=s,s.CLOSEST=1,s.ANY=2,s.ALL=4,s.prototype.update=function(){var e=this.direction;a.sub(e,this.to,this.from),this.length=a.length(e),a.normalize(e,e)},s.prototype.intersectBodies=function(e,t){for(var i=0,s=t.length;!e.shouldStop(this)&&i<s;i++){var o=t[i],a=o.getAABB();(a.overlapsRay(this)>=0||a.containsPoint(this.from))&&this.intersectBody(e,o)}};var r=a.create();s.prototype.intersectBody=function(e,t){var i=this.checkCollisionResponse;if(!i||t.collisionResponse)for(var s=r,o=0,n=t.shapes.length;o<n;o++){var h=t.shapes[o];if((!i||h.collisionResponse)&&(0!=(this.collisionGroup&h.collisionMask)&&0!=(h.collisionGroup&this.collisionMask))){a.rotate(s,h.position,t.angle),a.add(s,s,t.position);var l=h.angle+t.angle;if(this.intersectShape(e,h,l,s,t),e.shouldStop(this))break}}},s.prototype.intersectShape=function(e,t,i,s,a){o(this.from,this.direction,s)>t.boundingRadius*t.boundingRadius||(this._currentBody=a,this._currentShape=t,t.raycast(e,this,s,i),this._currentBody=this._currentShape=null)},s.prototype.getAABB=function(e){var t=this.to,i=this.from;a.set(e.lowerBound,Math.min(t[0],i[0]),Math.min(t[1],i[1])),a.set(e.upperBound,Math.max(t[0],i[0]),Math.max(t[1],i[1]))};a.create();s.prototype.reportIntersection=function(e,t,i,o){this.from,this.to;var r=this._currentShape,n=this._currentBody;if(!(this.skipBackfaces&&a.dot(i,this.direction)>0))switch(this.mode){case s.ALL:e.set(i,r,n,t,o),this.callback(e);break;case s.CLOSEST:(t<e.fraction||!e.hasHit())&&e.set(i,r,n,t,o);break;case s.ANY:e.set(i,r,n,t,o)}};var n=a.create(),h=a.create()},{"../collision/AABB":7,"../collision/RaycastResult":12,"../math/vec2":30,"../shapes/Shape":45}],12:[function(e,t,i){function s(){this.normal=o.create(),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1}var o=e("../math/vec2"),a=e("../collision/Ray");t.exports=s,s.prototype.reset=function(){o.set(this.normal,0,0),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1},s.prototype.getHitDistance=function(e){return o.distance(e.from,e.to)*this.fraction},s.prototype.hasHit=function(){return-1!==this.fraction},s.prototype.getHitPoint=function(e,t){o.lerp(e,t.from,t.to,this.fraction)},s.prototype.stop=function(){this.isStopped=!0},s.prototype.shouldStop=function(e){return this.isStopped||-1!==this.fraction&&e.mode===a.ANY},s.prototype.set=function(e,t,i,s,a){o.copy(this.normal,e),this.shape=t,this.body=i,this.fraction=s,this.faceIndex=a}},{"../collision/Ray":11,"../math/vec2":30}],13:[function(e,t,i){function s(){a.call(this,a.SAP),this.axisList=[],this.axisIndex=0;var e=this;this._addBodyHandler=function(t){e.axisList.push(t.body)},this._removeBodyHandler=function(t){var i=e.axisList.indexOf(t.body);-1!==i&&e.axisList.splice(i,1)}}var o=e("../utils/Utils"),a=e("../collision/Broadphase");t.exports=s,(s.prototype=new a).constructor=s,s.prototype.setWorld=function(e){this.axisList.length=0,o.appendArray(this.axisList,e.bodies),e.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),e.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=e},s.sortAxisList=function(e,t){t|=0;for(var i=1,s=e.length;i<s;i++){for(var o=e[i],a=i-1;a>=0&&!(e[a].aabb.lowerBound[t]<=o.aabb.lowerBound[t]);a--)e[a+1]=e[a];e[a+1]=o}return e},s.prototype.sortList=function(){var e=this.axisList,t=this.axisIndex;s.sortAxisList(e,t)},s.prototype.getCollisionPairs=function(e){var t=this.axisList,i=this.result,s=this.axisIndex;i.length=0;for(var o=t.length;o--;){var r=t[o];r.aabbNeedsUpdate&&r.updateAABB()}this.sortList();for(var n=0,h=0|t.length;n!==h;n++)for(var l=t[n],p=n+1;p<h;p++){var c=t[p];if(!(c.aabb.lowerBound[s]<=l.aabb.upperBound[s]))break;a.canCollide(l,c)&&this.boundingVolumeCheck(l,c)&&i.push(l,c)}return i},s.prototype.aabbQuery=function(e,t,i){i=i||[],this.sortList();var s=this.axisIndex,o="x";1===s&&(o="y"),2===s&&(o="z");for(var a=this.axisList,r=(t.lowerBound[o],t.upperBound[o],0);r<a.length;r++){var n=a[r];n.aabbNeedsUpdate&&n.updateAABB(),n.aabb.overlaps(t)&&i.push(n)}return i}},{"../collision/Broadphase":8,"../utils/Utils":57}],14:[function(e,t,i){function s(e,t,i,s){this.type=i,s=o.defaults(s,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=e,this.bodyB=t,this.collideConnected=s.collideConnected,s.wakeUpBodies&&(e&&e.wakeUp(),t&&t.wakeUp())}t.exports=s;var o=e("../utils/Utils");s.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},s.DISTANCE=1,s.GEAR=2,s.LOCK=3,s.PRISMATIC=4,s.REVOLUTE=5,s.prototype.setStiffness=function(e){for(var t=this.equations,i=0;i!==t.length;i++){var s=t[i];s.stiffness=e,s.needsUpdate=!0}},s.prototype.setRelaxation=function(e){for(var t=this.equations,i=0;i!==t.length;i++){var s=t[i];s.relaxation=e,s.needsUpdate=!0}}},{"../utils/Utils":57}],15:[function(e,t,i){function s(e,t,i){i=n.defaults(i,{localAnchorA:[0,0],localAnchorB:[0,0]}),o.call(this,e,t,o.DISTANCE,i),this.localAnchorA=r.fromValues(i.localAnchorA[0],i.localAnchorA[1]),this.localAnchorB=r.fromValues(i.localAnchorB[0],i.localAnchorB[1]);var s=this.localAnchorA,h=this.localAnchorB;if(this.distance=0,"number"==typeof i.distance)this.distance=i.distance;else{var l=r.create(),p=r.create(),c=r.create();r.rotate(l,s,e.angle),r.rotate(p,h,t.angle),r.add(c,t.position,p),r.sub(c,c,l),r.sub(c,c,e.position),this.distance=r.length(c)}var d;d=void 0===i.maxForce?Number.MAX_VALUE:i.maxForce;var u=new a(e,t,-d,d);this.equations=[u],this.maxForce=d;var c=r.create(),g=r.create(),m=r.create(),y=this;u.computeGq=function(){var e=this.bodyA,t=this.bodyB,i=e.position,o=t.position;return r.rotate(g,s,e.angle),r.rotate(m,h,t.angle),r.add(c,o,m),r.sub(c,c,g),r.sub(c,c,i),r.length(c)-y.distance},this.setMaxForce(d),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}var o=e("./Constraint"),a=e("../equations/Equation"),r=e("../math/vec2"),n=e("../utils/Utils");t.exports=s,(s.prototype=new o).constructor=s;var h=r.create(),l=r.create(),p=r.create();s.prototype.update=function(){var e=this.equations[0],t=this.bodyA,i=this.bodyB,s=(this.distance,t.position),o=i.position,a=this.equations[0],n=e.G;r.rotate(l,this.localAnchorA,t.angle),r.rotate(p,this.localAnchorB,i.angle),r.add(h,o,p),r.sub(h,h,l),r.sub(h,h,s),this.position=r.length(h);var c=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(a.maxForce=0,a.minForce=-this.maxForce,this.distance=this.upperLimit,c=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(a.maxForce=this.maxForce,a.minForce=0,this.distance=this.lowerLimit,c=!0),!this.lowerLimitEnabled&&!this.upperLimitEnabled||c){a.enabled=!0,r.normalize(h,h);var d=r.crossLength(l,h),u=r.crossLength(p,h);n[0]=-h[0],n[1]=-h[1],n[2]=-d,n[3]=h[0],n[4]=h[1],n[5]=u}else a.enabled=!1},s.prototype.setMaxForce=function(e){var t=this.equations[0];t.minForce=-e,t.maxForce=e},s.prototype.getMaxForce=function(){return this.equations[0].maxForce}},{"../equations/Equation":22,"../math/vec2":30,"../utils/Utils":57,"./Constraint":14}],16:[function(e,t,i){function s(e,t,i){i=i||{},o.call(this,e,t,o.GEAR,i),this.ratio=void 0!==i.ratio?i.ratio:1,this.angle=void 0!==i.angle?i.angle:t.angle-this.ratio*e.angle,i.angle=this.angle,i.ratio=this.ratio,this.equations=[new a(e,t,i)],void 0!==i.maxTorque&&this.setMaxTorque(i.maxTorque)}var o=e("./Constraint"),a=(e("../equations/Equation"),e("../equations/AngleLockEquation"));e("../math/vec2");t.exports=s,(s.prototype=new o).constructor=s,s.prototype.update=function(){var e=this.equations[0];e.ratio!==this.ratio&&e.setRatio(this.ratio),e.angle=this.angle},s.prototype.setMaxTorque=function(e){this.equations[0].setMaxTorque(e)},s.prototype.getMaxTorque=function(e){return this.equations[0].maxForce}},{"../equations/AngleLockEquation":20,"../equations/Equation":22,"../math/vec2":30,"./Constraint":14}],17:[function(e,t,i){function s(e,t,i){i=i||{},o.call(this,e,t,o.LOCK,i);var s=void 0===i.maxForce?Number.MAX_VALUE:i.maxForce,n=(i.localAngleB,new r(e,t,-s,s)),h=new r(e,t,-s,s),l=new r(e,t,-s,s),p=a.create(),c=a.create(),d=this;n.computeGq=function(){return a.rotate(p,d.localOffsetB,e.angle),a.sub(c,t.position,e.position),a.sub(c,c,p),c[0]},h.computeGq=function(){return a.rotate(p,d.localOffsetB,e.angle),a.sub(c,t.position,e.position),a.sub(c,c,p),c[1]};var u=a.create(),g=a.create();l.computeGq=function(){return a.rotate(u,d.localOffsetB,t.angle-d.localAngleB),a.scale(u,u,-1),a.sub(c,e.position,t.position),a.add(c,c,u),a.rotate(g,u,-Math.PI/2),a.normalize(g,g),a.dot(c,g)},this.localOffsetB=a.create(),i.localOffsetB?a.copy(this.localOffsetB,i.localOffsetB):(a.sub(this.localOffsetB,t.position,e.position),a.rotate(this.localOffsetB,this.localOffsetB,-e.angle)),this.localAngleB=0,"number"==typeof i.localAngleB?this.localAngleB=i.localAngleB:this.localAngleB=t.angle-e.angle,this.equations.push(n,h,l),this.setMaxForce(s)}var o=e("./Constraint"),a=e("../math/vec2"),r=e("../equations/Equation");t.exports=s,(s.prototype=new o).constructor=s,s.prototype.setMaxForce=function(e){for(var t=this.equations,i=0;i<this.equations.length;i++)t[i].maxForce=e,t[i].minForce=-e},s.prototype.getMaxForce=function(){return this.equations[0].maxForce};var n=a.create(),h=a.create(),l=a.create(),p=a.fromValues(1,0),c=a.fromValues(0,1);s.prototype.update=function(){var e=this.equations[0],t=this.equations[1],i=this.equations[2],s=this.bodyA,o=this.bodyB;a.rotate(n,this.localOffsetB,s.angle),a.rotate(h,this.localOffsetB,o.angle-this.localAngleB),a.scale(h,h,-1),a.rotate(l,h,Math.PI/2),a.normalize(l,l),e.G[0]=-1,e.G[1]=0,e.G[2]=-a.crossLength(n,p),e.G[3]=1,t.G[0]=0,t.G[1]=-1,t.G[2]=-a.crossLength(n,c),t.G[4]=1,i.G[0]=-l[0],i.G[1]=-l[1],i.G[3]=l[0],i.G[4]=l[1],i.G[5]=a.crossLength(h,l)}},{"../equations/Equation":22,"../math/vec2":30,"./Constraint":14}],18:[function(e,t,i){function s(e,t,i){i=i||{},o.call(this,e,t,o.PRISMATIC,i);var s=n.fromValues(0,0),l=n.fromValues(1,0),p=n.fromValues(0,0);i.localAnchorA&&n.copy(s,i.localAnchorA),i.localAxisA&&n.copy(l,i.localAxisA),i.localAnchorB&&n.copy(p,i.localAnchorB),this.localAnchorA=s,this.localAnchorB=p,this.localAxisA=l;var c=this.maxForce=void 0!==i.maxForce?i.maxForce:Number.MAX_VALUE,d=new r(e,t,-c,c),u=new n.create,g=new n.create,m=new n.create,y=new n.create;if(d.computeGq=function(){return n.dot(m,y)},d.updateJacobian=function(){var i=this.G,o=e.position,a=t.position;n.rotate(u,s,e.angle),n.rotate(g,p,t.angle),n.add(m,a,g),n.sub(m,m,o),n.sub(m,m,u),n.rotate(y,l,e.angle+Math.PI/2),i[0]=-y[0],i[1]=-y[1],i[2]=-n.crossLength(u,y)+n.crossLength(y,m),i[3]=y[0],i[4]=y[1],i[5]=n.crossLength(g,y)},this.equations.push(d),!i.disableRotationalLock){var f=new h(e,t,-c,c);this.equations.push(f)}this.position=0,this.velocity=0,this.lowerLimitEnabled=void 0!==i.lowerLimit,this.upperLimitEnabled=void 0!==i.upperLimit,this.lowerLimit=void 0!==i.lowerLimit?i.lowerLimit:0,this.upperLimit=void 0!==i.upperLimit?i.upperLimit:1,this.upperLimitEquation=new a(e,t),this.lowerLimitEquation=new a(e,t),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=c,this.motorEquation=new r(e,t),this.motorEnabled=!1,this.motorSpeed=0;var b=this,w=this.motorEquation;w.computeGW;w.computeGq=function(){return 0},w.computeGW=function(){var e=this.G,t=this.bodyA,i=this.bodyB,s=t.velocity,o=i.velocity,a=t.angularVelocity,r=i.angularVelocity;return this.gmult(e,s,a,o,r)+b.motorSpeed}}var o=e("./Constraint"),a=e("../equations/ContactEquation"),r=e("../equations/Equation"),n=e("../math/vec2"),h=e("../equations/RotationalLockEquation");t.exports=s,(s.prototype=new o).constructor=s;var l=n.create(),p=n.create(),c=n.create(),d=n.create(),u=n.create(),g=n.create();s.prototype.update=function(){var e=this.equations,t=e[0],i=this.upperLimit,s=this.lowerLimit,o=this.upperLimitEquation,a=this.lowerLimitEquation,r=this.bodyA,h=this.bodyB,m=this.localAxisA,y=this.localAnchorA,f=this.localAnchorB;t.updateJacobian(),n.rotate(l,m,r.angle),n.rotate(d,y,r.angle),n.add(p,d,r.position),n.rotate(u,f,h.angle),n.add(c,u,h.position);var b=this.position=n.dot(c,l)-n.dot(p,l);if(this.motorEnabled){var w=this.motorEquation.G;w[0]=l[0],w[1]=l[1],w[2]=n.crossLength(l,u),w[3]=-l[0],w[4]=-l[1],w[5]=-n.crossLength(l,d)}if(this.upperLimitEnabled&&b>i?(n.scale(o.normalA,l,-1),n.sub(o.contactPointA,p,r.position),n.sub(o.contactPointB,c,h.position),n.scale(g,l,i),n.add(o.contactPointA,o.contactPointA,g),-1===e.indexOf(o)&&e.push(o)):-1!==(v=e.indexOf(o))&&e.splice(v,1),this.lowerLimitEnabled&&b<s)n.scale(a.normalA,l,1),n.sub(a.contactPointA,p,r.position),n.sub(a.contactPointB,c,h.position),n.scale(g,l,s),n.sub(a.contactPointB,a.contactPointB,g),-1===e.indexOf(a)&&e.push(a);else{var v=e.indexOf(a);-1!==v&&e.splice(v,1)}},s.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},s.prototype.disableMotor=function(){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations.splice(e,1),this.motorEnabled=!1}},s.prototype.setLimits=function(e,t){"number"==typeof e?(this.lowerLimit=e,this.lowerLimitEnabled=!0):(this.lowerLimit=e,this.lowerLimitEnabled=!1),"number"==typeof t?(this.upperLimit=t,this.upperLimitEnabled=!0):(this.upperLimit=t,this.upperLimitEnabled=!1)}},{"../equations/ContactEquation":21,"../equations/Equation":22,"../equations/RotationalLockEquation":24,"../math/vec2":30,"./Constraint":14}],19:[function(e,t,i){function s(e,t,i){i=i||{},o.call(this,e,t,o.REVOLUTE,i);var s=this.maxForce=void 0!==i.maxForce?i.maxForce:Number.MAX_VALUE;this.pivotA=h.create(),this.pivotB=h.create(),i.worldPivot?(h.sub(this.pivotA,i.worldPivot,e.position),h.sub(this.pivotB,i.worldPivot,t.position),h.rotate(this.pivotA,this.pivotA,-e.angle),h.rotate(this.pivotB,this.pivotB,-t.angle)):(h.copy(this.pivotA,i.localPivotA),h.copy(this.pivotB,i.localPivotB));var g=this.equations=[new a(e,t,-s,s),new a(e,t,-s,s)],m=g[0],y=g[1],f=this;m.computeGq=function(){return h.rotate(l,f.pivotA,e.angle),h.rotate(p,f.pivotB,t.angle),h.add(u,t.position,p),h.sub(u,u,e.position),h.sub(u,u,l),h.dot(u,c)},y.computeGq=function(){return h.rotate(l,f.pivotA,e.angle),h.rotate(p,f.pivotB,t.angle),h.add(u,t.position,p),h.sub(u,u,e.position),h.sub(u,u,l),h.dot(u,d)},y.minForce=m.minForce=-s,y.maxForce=m.maxForce=s,this.motorEquation=new r(e,t),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new n(e,t),this.lowerLimitEquation=new n(e,t),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}var o=e("./Constraint"),a=e("../equations/Equation"),r=e("../equations/RotationalVelocityEquation"),n=e("../equations/RotationalLockEquation"),h=e("../math/vec2");t.exports=s;var l=h.create(),p=h.create(),c=h.fromValues(1,0),d=h.fromValues(0,1),u=h.create();(s.prototype=new o).constructor=s,s.prototype.setLimits=function(e,t){"number"==typeof e?(this.lowerLimit=e,this.lowerLimitEnabled=!0):(this.lowerLimit=e,this.lowerLimitEnabled=!1),"number"==typeof t?(this.upperLimit=t,this.upperLimitEnabled=!0):(this.upperLimit=t,this.upperLimitEnabled=!1)},s.prototype.update=function(){var e=this.bodyA,t=this.bodyB,i=this.pivotA,s=this.pivotB,o=this.equations,a=(o[0],o[1],o[0]),r=o[1],n=this.upperLimit,u=this.lowerLimit,g=this.upperLimitEquation,m=this.lowerLimitEquation,y=this.angle=t.angle-e.angle;if(this.upperLimitEnabled&&y>n?(g.angle=n,-1===o.indexOf(g)&&o.push(g)):-1!==(f=o.indexOf(g))&&o.splice(f,1),this.lowerLimitEnabled&&y<u)m.angle=u,-1===o.indexOf(m)&&o.push(m);else{var f=o.indexOf(m);-1!==f&&o.splice(f,1)}h.rotate(l,i,e.angle),h.rotate(p,s,t.angle),a.G[0]=-1,a.G[1]=0,a.G[2]=-h.crossLength(l,c),a.G[3]=1,a.G[4]=0,a.G[5]=h.crossLength(p,c),r.G[0]=0,r.G[1]=-1,r.G[2]=-h.crossLength(l,d),r.G[3]=0,r.G[4]=1,r.G[5]=h.crossLength(p,d)},s.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},s.prototype.disableMotor=function(){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations.splice(e,1),this.motorEnabled=!1}},s.prototype.motorIsEnabled=function(){return!!this.motorEnabled},s.prototype.setMotorSpeed=function(e){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations[t].relativeVelocity=e}},s.prototype.getMotorSpeed=function(){return!!this.motorEnabled&&this.motorEquation.relativeVelocity}},{"../equations/Equation":22,"../equations/RotationalLockEquation":24,"../equations/RotationalVelocityEquation":25,"../math/vec2":30,"./Constraint":14}],20:[function(e,t,i){function s(e,t,i){i=i||{},o.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=i.angle||0,this.ratio="number"==typeof i.ratio?i.ratio:1,this.setRatio(this.ratio)}var o=e("./Equation");e("../math/vec2");t.exports=s,(s.prototype=new o).constructor=s,s.prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},s.prototype.setRatio=function(e){var t=this.G;t[2]=e,t[5]=-1,this.ratio=e},s.prototype.setMaxTorque=function(e){this.maxForce=e,this.minForce=-e}},{"../math/vec2":30,"./Equation":22}],21:[function(e,t,i){function s(e,t){o.call(this,e,t,0,Number.MAX_VALUE),this.contactPointA=a.create(),this.penetrationVec=a.create(),this.contactPointB=a.create(),this.normalA=a.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}var o=e("./Equation"),a=e("../math/vec2");t.exports=s,(s.prototype=new o).constructor=s,s.prototype.computeB=function(e,t,i){var s=this.bodyA,o=this.bodyB,r=this.contactPointA,n=this.contactPointB,h=s.position,l=o.position,p=this.penetrationVec,c=this.normalA,d=this.G,u=a.crossLength(r,c),g=a.crossLength(n,c);d[0]=-c[0],d[1]=-c[1],d[2]=-u,d[3]=c[0],d[4]=c[1],d[5]=g,a.add(p,l,n),a.sub(p,p,h),a.sub(p,p,r);var m,y;return this.firstImpact&&0!==this.restitution?(y=0,m=1/t*(1+this.restitution)*this.computeGW()):(y=a.dot(c,p)+this.offset,m=this.computeGW()),-y*e-m*t-i*this.computeGiMf()}},{"../math/vec2":30,"./Equation":22}],22:[function(e,t,i){function s(e,t,i,o){this.minForce=void 0===i?-Number.MAX_VALUE:i,this.maxForce=void 0===o?Number.MAX_VALUE:o,this.bodyA=e,this.bodyB=t,this.stiffness=s.DEFAULT_STIFFNESS,this.relaxation=s.DEFAULT_RELAXATION,this.G=new a.ARRAY_TYPE(6);for(var r=0;r<6;r++)this.G[r]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}t.exports=s;var o=e("../math/vec2"),a=e("../utils/Utils");e("../objects/Body");s.prototype.constructor=s,s.DEFAULT_STIFFNESS=1e6,s.DEFAULT_RELAXATION=4,s.prototype.update=function(){var e=this.stiffness,t=this.relaxation,i=this.timeStep;this.a=4/(i*(1+4*t)),this.b=4*t/(1+4*t),this.epsilon=4/(i*i*e*(1+4*t)),this.needsUpdate=!1},s.prototype.gmult=function(e,t,i,s,o){return e[0]*t[0]+e[1]*t[1]+e[2]*i+e[3]*s[0]+e[4]*s[1]+e[5]*o},s.prototype.computeB=function(e,t,i){var s=this.computeGW();return-this.computeGq()*e-s*t-this.computeGiMf()*i};var r=o.create(),n=o.create();s.prototype.computeGq=function(){var e=this.G,t=this.bodyA,i=this.bodyB,s=(t.position,i.position,t.angle),o=i.angle;return this.gmult(e,r,s,n,o)+this.offset},s.prototype.computeGW=function(){var e=this.G,t=this.bodyA,i=this.bodyB,s=t.velocity,o=i.velocity,a=t.angularVelocity,r=i.angularVelocity;return this.gmult(e,s,a,o,r)+this.relativeVelocity},s.prototype.computeGWlambda=function(){var e=this.G,t=this.bodyA,i=this.bodyB,s=t.vlambda,o=i.vlambda,a=t.wlambda,r=i.wlambda;return this.gmult(e,s,a,o,r)};var h=o.create(),l=o.create();s.prototype.computeGiMf=function(){var e=this.bodyA,t=this.bodyB,i=e.force,s=e.angularForce,a=t.force,r=t.angularForce,n=e.invMassSolve,p=t.invMassSolve,c=e.invInertiaSolve,d=t.invInertiaSolve,u=this.G;return o.scale(h,i,n),o.multiply(h,e.massMultiplier,h),o.scale(l,a,p),o.multiply(l,t.massMultiplier,l),this.gmult(u,h,s*c,l,r*d)},s.prototype.computeGiMGt=function(){var e=this.bodyA,t=this.bodyB,i=e.invMassSolve,s=t.invMassSolve,o=e.invInertiaSolve,a=t.invInertiaSolve,r=this.G;return r[0]*r[0]*i*e.massMultiplier[0]+r[1]*r[1]*i*e.massMultiplier[1]+r[2]*r[2]*o+r[3]*r[3]*s*t.massMultiplier[0]+r[4]*r[4]*s*t.massMultiplier[1]+r[5]*r[5]*a};var p=o.create(),c=o.create(),d=o.create();o.create(),o.create(),o.create();s.prototype.addToWlambda=function(e){var t=this.bodyA,i=this.bodyB,s=p,a=c,r=d,n=t.invMassSolve,h=i.invMassSolve,l=t.invInertiaSolve,u=i.invInertiaSolve,g=this.G;a[0]=g[0],a[1]=g[1],r[0]=g[3],r[1]=g[4],o.scale(s,a,n*e),o.multiply(s,s,t.massMultiplier),o.add(t.vlambda,t.vlambda,s),t.wlambda+=l*g[2]*e,o.scale(s,r,h*e),o.multiply(s,s,i.massMultiplier),o.add(i.vlambda,i.vlambda,s),i.wlambda+=u*g[5]*e},s.prototype.computeInvC=function(e){return 1/(this.computeGiMGt()+e)}},{"../math/vec2":30,"../objects/Body":31,"../utils/Utils":57}],23:[function(e,t,i){function s(e,t,i){a.call(this,e,t,-i,i),this.contactPointA=o.create(),this.contactPointB=o.create(),this.t=o.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}var o=e("../math/vec2"),a=e("./Equation");e("../utils/Utils");t.exports=s,(s.prototype=new a).constructor=s,s.prototype.setSlipForce=function(e){this.maxForce=e,this.minForce=-e},s.prototype.getSlipForce=function(){return this.maxForce},s.prototype.computeB=function(e,t,i){this.bodyA,this.bodyB;var s=this.contactPointA,a=this.contactPointB,r=this.t,n=this.G;return n[0]=-r[0],n[1]=-r[1],n[2]=-o.crossLength(s,r),n[3]=r[0],n[4]=r[1],n[5]=o.crossLength(a,r),-this.computeGW()*t-i*this.computeGiMf()}},{"../math/vec2":30,"../utils/Utils":57,"./Equation":22}],24:[function(e,t,i){function s(e,t,i){i=i||{},o.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=i.angle||0;var s=this.G;s[2]=1,s[5]=-1}var o=e("./Equation"),a=e("../math/vec2");t.exports=s,(s.prototype=new o).constructor=s;var r=a.create(),n=a.create(),h=a.fromValues(1,0),l=a.fromValues(0,1);s.prototype.computeGq=function(){return a.rotate(r,h,this.bodyA.angle+this.angle),a.rotate(n,l,this.bodyB.angle),a.dot(r,n)}},{"../math/vec2":30,"./Equation":22}],25:[function(e,t,i){function s(e,t){o.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}var o=e("./Equation");e("../math/vec2");t.exports=s,(s.prototype=new o).constructor=s,s.prototype.computeB=function(e,t,i){var s=this.G;s[2]=-1,s[5]=this.ratio;var o=this.computeGiMf();return-this.computeGW()*t-i*o}},{"../math/vec2":30,"./Equation":22}],26:[function(e,t,i){var s=function(){};t.exports=s,s.prototype={constructor:s,on:function(e,t,i){t.context=i||this,void 0===this._listeners&&(this._listeners={});var s=this._listeners;return void 0===s[e]&&(s[e]=[]),-1===s[e].indexOf(t)&&s[e].push(t),this},has:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;if(t){if(void 0!==i[e]&&-1!==i[e].indexOf(t))return!0}else if(void 0!==i[e])return!0;return!1},off:function(e,t){if(void 0===this._listeners)return this;var i=this._listeners,s=i[e].indexOf(t);return-1!==s&&i[e].splice(s,1),this},emit:function(e){if(void 0===this._listeners)return this;var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var i=0,s=t.length;i<s;i++){var o=t[i];o.call(o.context,e)}}return this}}},{}],27:[function(e,t,i){function s(e,t,i){if(i=i||{},!(e instanceof o&&t instanceof o))throw new Error("First two arguments must be Material instances.");this.id=s.idCounter++,this.materialA=e,this.materialB=t,this.friction=void 0!==i.friction?Number(i.friction):.3,this.restitution=void 0!==i.restitution?Number(i.restitution):0,this.stiffness=void 0!==i.stiffness?Number(i.stiffness):a.DEFAULT_STIFFNESS,this.relaxation=void 0!==i.relaxation?Number(i.relaxation):a.DEFAULT_RELAXATION,this.frictionStiffness=void 0!==i.frictionStiffness?Number(i.frictionStiffness):a.DEFAULT_STIFFNESS,this.frictionRelaxation=void 0!==i.frictionRelaxation?Number(i.frictionRelaxation):a.DEFAULT_RELAXATION,this.surfaceVelocity=void 0!==i.surfaceVelocity?Number(i.surfaceVelocity):0,this.contactSkinSize=.005}var o=e("./Material"),a=e("../equations/Equation");t.exports=s,s.idCounter=0},{"../equations/Equation":22,"./Material":28}],28:[function(e,t,i){function s(e){this.id=e||s.idCounter++}t.exports=s,s.idCounter=0},{}],29:[function(e,t,i){var s={};s.GetArea=function(e){if(e.length<6)return 0;for(var t=e.length-2,i=0,s=0;s<t;s+=2)i+=(e[s+2]-e[s])*(e[s+1]+e[s+3]);return.5*-(i+=(e[0]-e[t])*(e[t+1]+e[1]))},s.Triangulate=function(e){var t=e.length>>1;if(t<3)return[];for(var i=[],o=[],a=0;a<t;a++)o.push(a);for(var a=0,r=t;r>3;){var n=o[(a+0)%r],h=o[(a+1)%r],l=o[(a+2)%r],p=e[2*n],c=e[2*n+1],d=e[2*h],u=e[2*h+1],g=e[2*l],m=e[2*l+1],y=!1;if(s._convex(p,c,d,u,g,m)){y=!0;for(var f=0;f<r;f++){var b=o[f];if(b!=n&&b!=h&&b!=l&&s._PointInTriangle(e[2*b],e[2*b+1],p,c,d,u,g,m)){y=!1;break}}}if(y)i.push(n,h,l),o.splice((a+1)%r,1),r--,a=0;else if(a++>3*r)break}return i.push(o[0],o[1],o[2]),i},s._PointInTriangle=function(e,t,i,s,o,a,r,n){var h=r-i,l=n-s,p=o-i,c=a-s,d=e-i,u=t-s,g=h*h+l*l,m=h*p+l*c,y=h*d+l*u,f=p*p+c*c,b=p*d+c*u,w=1/(g*f-m*m),v=(f*y-m*b)*w,k=(g*b-m*y)*w;return v>=0&&k>=0&&v+k<1},s._convex=function(e,t,i,s,o,a){return(t-s)*(o-i)+(i-e)*(a-s)>=0},t.exports=s},{}],30:[function(e,t,i){var s=t.exports={},o=e("../utils/Utils");s.crossLength=function(e,t){return e[0]*t[1]-e[1]*t[0]},s.crossVZ=function(e,t,i){return s.rotate(e,t,-Math.PI/2),s.scale(e,e,i),e},s.crossZV=function(e,t,i){return s.rotate(e,i,Math.PI/2),s.scale(e,e,t),e},s.rotate=function(e,t,i){if(0!==i){var s=Math.cos(i),o=Math.sin(i),a=t[0],r=t[1];e[0]=s*a-o*r,e[1]=o*a+s*r}else e[0]=t[0],e[1]=t[1]},s.rotate90cw=function(e,t){var i=t[0],s=t[1];e[0]=s,e[1]=-i},s.toLocalFrame=function(e,t,i,o){s.copy(e,t),s.sub(e,e,i),s.rotate(e,e,-o)},s.toGlobalFrame=function(e,t,i,o){s.copy(e,t),s.rotate(e,e,o),s.add(e,e,i)},s.vectorToLocalFrame=function(e,t,i){s.rotate(e,t,-i)},s.vectorToGlobalFrame=function(e,t,i){s.rotate(e,t,i)},s.centroid=function(e,t,i,o){return s.add(e,t,i),s.add(e,e,o),s.scale(e,e,1/3),e},s.create=function(){var e=new o.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},s.clone=function(e){var t=new o.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},s.fromValues=function(e,t){var i=new o.ARRAY_TYPE(2);return i[0]=e,i[1]=t,i},s.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},s.set=function(e,t,i){return e[0]=t,e[1]=i,e},s.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e},s.subtract=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e},s.sub=s.subtract,s.multiply=function(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e},s.mul=s.multiply,s.divide=function(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e},s.div=s.divide,s.scale=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e},s.distance=function(e,t){var i=t[0]-e[0],s=t[1]-e[1];return Math.sqrt(i*i+s*s)},s.dist=s.distance,s.squaredDistance=function(e,t){var i=t[0]-e[0],s=t[1]-e[1];return i*i+s*s},s.sqrDist=s.squaredDistance,s.length=function(e){var t=e[0],i=e[1];return Math.sqrt(t*t+i*i)},s.len=s.length,s.squaredLength=function(e){var t=e[0],i=e[1];return t*t+i*i},s.sqrLen=s.squaredLength,s.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},s.normalize=function(e,t){var i=t[0],s=t[1],o=i*i+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o),e},s.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},s.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},s.lerp=function(e,t,i,s){var o=t[0],a=t[1];return e[0]=o+s*(i[0]-o),e[1]=a+s*(i[1]-a),e},s.reflect=function(e,t,i){var s=t[0]*i[0]+t[1]*i[1];e[0]=t[0]-2*i[0]*s,e[1]=t[1]-2*i[1]*s},s.getLineSegmentsIntersection=function(e,t,i,o,a){var r=s.getLineSegmentsIntersectionFraction(t,i,o,a);return!(r<0)&&(e[0]=t[0]+r*(i[0]-t[0]),e[1]=t[1]+r*(i[1]-t[1]),!0)},s.getLineSegmentsIntersectionFraction=function(e,t,i,s){var o,a,r=t[0]-e[0],n=t[1]-e[1],h=s[0]-i[0],l=s[1]-i[1];return o=(-n*(e[0]-i[0])+r*(e[1]-i[1]))/(-h*n+r*l),a=(h*(e[1]-i[1])-l*(e[0]-i[0]))/(-h*n+r*l),o>=0&&o<=1&&a>=0&&a<=1?a:-1}},{"../utils/Utils":57}],31:[function(e,t,i){function s(e){e=e||{},p.call(this),this.id=e.id||++s._idCounter,this.world=null,this.shapes=[],this.mass=e.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!e.fixedRotation,this.fixedX=!!e.fixedX,this.fixedY=!!e.fixedY,this.massMultiplier=o.create(),this.position=o.fromValues(0,0),e.position&&o.copy(this.position,e.position),this.interpolatedPosition=o.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=o.fromValues(0,0),this.previousAngle=0,this.velocity=o.fromValues(0,0),e.velocity&&o.copy(this.velocity,e.velocity),this.vlambda=o.fromValues(0,0),this.wlambda=0,this.angle=e.angle||0,this.angularVelocity=e.angularVelocity||0,this.force=o.create(),e.force&&o.copy(this.force,e.force),this.angularForce=e.angularForce||0,this.damping="number"==typeof e.damping?e.damping:.1,this.angularDamping="number"==typeof e.angularDamping?e.angularDamping:.1,this.type=s.STATIC,void 0!==e.type?this.type=e.type:e.mass?this.type=s.DYNAMIC:this.type=s.STATIC,this.boundingRadius=0,this.aabb=new l,this.aabbNeedsUpdate=!0,this.allowSleep=void 0===e.allowSleep||e.allowSleep,this.wantsToSleep=!1,this.sleepState=s.AWAKE,this.sleepSpeedLimit=void 0!==e.sleepSpeedLimit?e.sleepSpeedLimit:.2,this.sleepTimeLimit=void 0!==e.sleepTimeLimit?e.sleepTimeLimit:1,this.gravityScale=void 0!==e.gravityScale?e.gravityScale:1,this.collisionResponse=void 0===e.collisionResponse||e.collisionResponse,this.idleTime=0,this.timeLastSleepy=0,this.ccdSpeedThreshold=void 0!==e.ccdSpeedThreshold?e.ccdSpeedThreshold:-1,this.ccdIterations=void 0!==e.ccdIterations?e.ccdIterations:10,this.concavePath=null,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}var o=e("../math/vec2"),a=e("poly-decomp"),r=e("../shapes/Convex"),n=e("../collision/RaycastResult"),h=e("../collision/Ray"),l=e("../collision/AABB"),p=e("../events/EventEmitter");t.exports=s,s.prototype=new p,s.prototype.constructor=s,s._idCounter=0,s.prototype.updateSolveMassProperties=function(){this.sleepState===s.SLEEPING||this.type===s.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},s.prototype.setDensity=function(e){var t=this.getArea();this.mass=t*e,this.updateMassProperties()},s.prototype.getArea=function(){for(var e=0,t=0;t<this.shapes.length;t++)e+=this.shapes[t].area;return e},s.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var c=new l,d=o.create();s.prototype.updateAABB=function(){for(var e=this.shapes,t=e.length,i=d,s=this.angle,a=0;a!==t;a++){var r=e[a],n=r.angle+s;o.rotate(i,r.position,s),o.add(i,i,this.position),r.computeAABB(c,i,n),0===a?this.aabb.copy(c):this.aabb.extend(c)}this.aabbNeedsUpdate=!1},s.prototype.updateBoundingRadius=function(){for(var e=this.shapes,t=e.length,i=0,s=0;s!==t;s++){var a=e[s],r=o.length(a.position),n=a.boundingRadius;r+n>i&&(i=r+n)}this.boundingRadius=i},s.prototype.addShape=function(e,t,i){if(e.body)throw new Error("A shape can only be added to one body.");e.body=this,t?o.copy(e.position,t):o.set(e.position,0,0),e.angle=i||0,this.shapes.push(e),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},s.prototype.removeShape=function(e){var t=this.shapes.indexOf(e);return-1!==t&&(this.shapes.splice(t,1),this.aabbNeedsUpdate=!0,e.body=null,!0)},s.prototype.updateMassProperties=function(){if(this.type===s.STATIC||this.type===s.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var e=this.shapes,t=e.length,i=this.mass/t,a=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var r=0;r<t;r++){var n=e[r],h=o.squaredLength(n.position);a+=n.computeMomentOfInertia(i)+i*h}this.inertia=a,this.invInertia=a>0?1/a:0}this.invMass=1/this.mass,o.set(this.massMultiplier,this.fixedX?0:1,this.fixedY?0:1)}};o.create();s.prototype.applyForce=function(e,t){if(o.add(this.force,this.force,e),t){var i=o.crossLength(t,e);this.angularForce+=i}};var u=o.create(),g=o.create(),m=o.create();s.prototype.applyForceLocal=function(e,t){t=t||m;var i=u,s=g;this.vectorToWorldFrame(i,e),this.vectorToWorldFrame(s,t),this.applyForce(i,s)};var y=o.create();s.prototype.applyImpulse=function(e,t){if(this.type===s.DYNAMIC){var i=y;if(o.scale(i,e,this.invMass),o.multiply(i,this.massMultiplier,i),o.add(this.velocity,i,this.velocity),t){var a=o.crossLength(t,e);a*=this.invInertia,this.angularVelocity+=a}}};var f=o.create(),b=o.create(),w=o.create();s.prototype.applyImpulseLocal=function(e,t){t=t||w;var i=f,s=b;this.vectorToWorldFrame(i,e),this.vectorToWorldFrame(s,t),this.applyImpulse(i,s)},s.prototype.toLocalFrame=function(e,t){o.toLocalFrame(e,t,this.position,this.angle)},s.prototype.toWorldFrame=function(e,t){o.toGlobalFrame(e,t,this.position,this.angle)},s.prototype.vectorToLocalFrame=function(e,t){o.vectorToLocalFrame(e,t,this.angle)},s.prototype.vectorToWorldFrame=function(e,t){o.vectorToGlobalFrame(e,t,this.angle)},s.prototype.fromPolygon=function(e,t){t=t||{};for(var i=!1,s=this.shapes.length;s>=0;--s)this.removeShape(this.shapes[s]);var n=new a.Polygon;if(n.vertices=e,n.makeCCW(),"number"==typeof t.removeCollinearPoints&&n.removeCollinearPoints(t.removeCollinearPoints),void 0===t.skipSimpleCheck&&!n.isSimple())return!1;this.concavePath=n.vertices.slice(0);for(s=0;s<this.concavePath.length;s++){d=[0,0];o.copy(d,this.concavePath[s]),this.concavePath[s]=d}var h;h=t.optimalDecomp?n.decomp():n.quickDecomp();for(var l=o.create(),s=0;s!==h.length;s++){for(var p=new r({vertices:h[s].vertices}),c=0;c!==p.vertices.length;c++){var d=p.vertices[c];o.sub(d,d,p.centerOfMass)}o.scale(l,p.centerOfMass,1),p.updateTriangles(),p.updateCenterOfMass(),p.updateBoundingRadius(),this.addShape(p,l)}return"boolean"==typeof t.skipAdjustCenterOfMass&&(i=t.skipAdjustCenterOfMass),0==i&&this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0,!0};o.fromValues(0,0);var v=o.fromValues(0,0),k=o.fromValues(0,0),S=o.fromValues(0,0);s.prototype.adjustCenterOfMass=function(){var e=v,t=k,i=S,s=0;o.set(t,0,0);for(r=0;r!==this.shapes.length;r++){a=this.shapes[r];o.scale(e,a.position,a.area),o.add(t,t,e),s+=a.area}o.scale(i,t,1/s);for(r=0;r!==this.shapes.length;r++){var a=this.shapes[r];o.sub(a.position,a.position,i)}o.add(this.position,this.position,i);for(var r=0;this.concavePath&&r<this.concavePath.length;r++)o.sub(this.concavePath[r],this.concavePath[r],i);this.updateMassProperties(),this.updateBoundingRadius()},s.prototype.setZeroForce=function(){o.set(this.force,0,0),this.angularForce=0},s.prototype.resetConstraintVelocity=function(){var e=this,t=e.vlambda;o.set(t,0,0),e.wlambda=0},s.prototype.addConstraintVelocity=function(){var e=this,t=e.velocity;o.add(t,t,e.vlambda),e.angularVelocity+=e.wlambda},s.prototype.applyDamping=function(e){if(this.type===s.DYNAMIC){var t=this.velocity;o.scale(t,t,Math.pow(1-this.damping,e)),this.angularVelocity*=Math.pow(1-this.angularDamping,e)}},s.prototype.wakeUp=function(){var e=this.sleepState;this.sleepState=s.AWAKE,this.idleTime=0,e!==s.AWAKE&&this.emit(s.wakeUpEvent)},s.prototype.sleep=function(){this.sleepState=s.SLEEPING,this.angularVelocity=0,this.angularForce=0,o.set(this.velocity,0,0),o.set(this.force,0,0),this.emit(s.sleepEvent)},s.prototype.sleepTick=function(e,t,i){if(this.allowSleep&&this.type!==s.SLEEPING){this.wantsToSleep=!1;this.sleepState;o.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2)>=Math.pow(this.sleepSpeedLimit,2)?(this.idleTime=0,this.sleepState=s.AWAKE):(this.idleTime+=i,this.sleepState=s.SLEEPY),this.idleTime>this.sleepTimeLimit&&(t?this.wantsToSleep=!0:this.sleep())}},s.prototype.overlaps=function(e){return this.world.overlapKeeper.bodiesAreOverlapping(this,e)};var x=o.create(),P=o.create();s.prototype.integrate=function(e){var t=this.invMass,i=this.force,s=this.position,a=this.velocity;o.copy(this.previousPosition,this.position),this.previousAngle=this.angle,this.fixedRotation||(this.angularVelocity+=this.angularForce*this.invInertia*e),o.scale(x,i,e*t),o.multiply(x,this.massMultiplier,x),o.add(a,x,a),this.integrateToTimeOfImpact(e)||(o.scale(P,a,e),o.add(s,s,P),this.fixedRotation||(this.angle+=this.angularVelocity*e)),this.aabbNeedsUpdate=!0};var B=new n,T=new h({mode:h.CLOSEST,skipBackfaces:!0}),G=o.create(),C=o.create(),A=o.create();o.create();s.prototype.integrateToTimeOfImpact=function(e){if(this.ccdSpeedThreshold<0||o.squaredLength(this.velocity)<Math.pow(this.ccdSpeedThreshold,2))return!1;o.normalize(G,this.velocity),o.scale(C,this.velocity,e),o.add(C,C,this.position),o.sub(A,C,this.position);this.angularVelocity,o.length(A);return o.copy(T.from,this.position),o.copy(T.to,C),T.update(),this.world.raycast(B,T),hitBody=B.body,hitBody===this&&(hitBody=null),!1},s.prototype.getVelocityAtPoint=function(e,t){return o.crossVZ(e,t,this.angularVelocity),o.subtract(e,this.velocity,e),e},s.sleepyEvent={type:"sleepy"},s.sleepEvent={type:"sleep"},s.wakeUpEvent={type:"wakeup"},s.DYNAMIC=1,s.STATIC=2,s.KINEMATIC=4,s.AWAKE=0,s.SLEEPY=1,s.SLEEPING=2},{"../collision/AABB":7,"../collision/Ray":11,"../collision/RaycastResult":12,"../events/EventEmitter":26,"../math/vec2":30,"../shapes/Convex":40,"poly-decomp":5}],32:[function(e,t,i){function s(e,t,i){i=i||{},a.call(this,e,t,i),this.localAnchorA=o.fromValues(0,0),this.localAnchorB=o.fromValues(0,0),i.localAnchorA&&o.copy(this.localAnchorA,i.localAnchorA),i.localAnchorB&&o.copy(this.localAnchorB,i.localAnchorB),i.worldAnchorA&&this.setWorldAnchorA(i.worldAnchorA),i.worldAnchorB&&this.setWorldAnchorB(i.worldAnchorB);var s=o.create(),r=o.create();this.getWorldAnchorA(s),this.getWorldAnchorB(r);var n=o.distance(s,r);this.restLength="number"==typeof i.restLength?i.restLength:n}var o=e("../math/vec2"),a=e("./Spring");e("../utils/Utils");t.exports=s,(s.prototype=new a).constructor=s,s.prototype.setWorldAnchorA=function(e){this.bodyA.toLocalFrame(this.localAnchorA,e)},s.prototype.setWorldAnchorB=function(e){this.bodyB.toLocalFrame(this.localAnchorB,e)},s.prototype.getWorldAnchorA=function(e){this.bodyA.toWorldFrame(e,this.localAnchorA)},s.prototype.getWorldAnchorB=function(e){this.bodyB.toWorldFrame(e,this.localAnchorB)};var r=o.create(),n=o.create(),h=o.create(),l=o.create(),p=o.create(),c=o.create(),d=o.create(),u=o.create(),g=o.create();s.prototype.applyForce=function(){var e=this.stiffness,t=this.damping,i=this.restLength,s=this.bodyA,a=this.bodyB,m=r,y=n,f=h,b=l,w=g,v=p,k=c,S=d,x=u;this.getWorldAnchorA(v),this.getWorldAnchorB(k),o.sub(S,v,s.position),o.sub(x,k,a.position),o.sub(m,k,v);var P=o.len(m);o.normalize(y,m),o.sub(f,a.velocity,s.velocity),o.crossZV(w,a.angularVelocity,x),o.add(f,f,w),o.crossZV(w,s.angularVelocity,S),o.sub(f,f,w),o.scale(b,y,-e*(P-i)-t*o.dot(f,y)),o.sub(s.force,s.force,b),o.add(a.force,a.force,b);var B=o.crossLength(S,b),T=o.crossLength(x,b);s.angularForce-=B,a.angularForce+=T}},{"../math/vec2":30,"../utils/Utils":57,"./Spring":34}],33:[function(e,t,i){function s(e,t,i){i=i||{},o.call(this,e,t,i),this.restAngle="number"==typeof i.restAngle?i.restAngle:t.angle-e.angle}e("../math/vec2");var o=e("./Spring");t.exports=s,(s.prototype=new o).constructor=s,s.prototype.applyForce=function(){var e=this.stiffness,t=this.damping,i=this.restAngle,s=this.bodyA,o=this.bodyB,a=-e*(o.angle-s.angle-i)-t*(o.angularVelocity-s.angularVelocity)*0;s.angularForce-=a,o.angularForce+=a}},{"../math/vec2":30,"./Spring":34}],34:[function(e,t,i){function s(e,t,i){i=o.defaults(i,{stiffness:100,damping:1}),this.stiffness=i.stiffness,this.damping=i.damping,this.bodyA=e,this.bodyB=t}e("../math/vec2");var o=e("../utils/Utils");t.exports=s,s.prototype.applyForce=function(){}},{"../math/vec2":30,"../utils/Utils":57}],35:[function(e,t,i){function s(e,t){t=t||{},this.chassisBody=e,this.wheels=[],this.groundBody=new h({mass:0}),this.world=null;var i=this;this.preStepCallback=function(){i.update()}}function o(e,t){t=t||{},this.vehicle=e,this.forwardEquation=new n(e.chassisBody,e.groundBody),this.sideEquation=new n(e.chassisBody,e.groundBody),this.steerValue=0,this.engineForce=0,this.setSideFriction(void 0!==t.sideFriction?t.sideFriction:5),this.localForwardVector=a.fromValues(0,1),t.localForwardVector&&a.copy(this.localForwardVector,t.localForwardVector),this.localPosition=a.fromValues(0,0),t.localPosition&&a.copy(this.localPosition,t.localPosition),r.apply(this,e.chassisBody,e.groundBody),this.equations.push(this.forwardEquation,this.sideEquation),this.setBrakeForce(0)}var a=e("../math/vec2"),r=(e("../utils/Utils"),e("../constraints/Constraint")),n=e("../equations/FrictionEquation"),h=e("../objects/Body");t.exports=s,s.prototype.addToWorld=function(e){this.world=e,e.addBody(this.groundBody),e.on("preStep",this.preStepCallback);for(var t=0;t<this.wheels.length;t++){var i=this.wheels[t];e.addConstraint(i)}},s.prototype.removeFromWorld=function(){var e=this.world;e.removeBody(this.groundBody),e.off("preStep",this.preStepCallback);for(var t=0;t<this.wheels.length;t++){var i=this.wheels[t];e.removeConstraint(i)}this.world=null},s.prototype.addWheel=function(e){var t=new o(this,e);return this.wheels.push(t),t},s.prototype.update=function(){for(var e=0;e<this.wheels.length;e++)this.wheels[e].update()},(o.prototype=new r).setBrakeForce=function(e){this.forwardEquation.setSlipForce(e)},o.prototype.setSideFriction=function(e){this.sideEquation.setSlipForce(e)};var l=a.create(),p=a.create();o.prototype.getSpeed=function(){return this.vehicle.chassisBody.vectorToWorldFrame(p,this.localForwardVector),this.vehicle.chassisBody.getVelocityAtPoint(l,p),a.dot(l,p)};var c=a.create();o.prototype.update=function(){this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t,this.localForwardVector),a.rotate(this.sideEquation.t,this.localForwardVector,Math.PI/2),this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t,this.sideEquation.t),a.rotate(this.forwardEquation.t,this.forwardEquation.t,this.steerValue),a.rotate(this.sideEquation.t,this.sideEquation.t,this.steerValue),this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB,this.localPosition),a.copy(this.sideEquation.contactPointB,this.forwardEquation.contactPointB),this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA,this.localPosition),a.copy(this.sideEquation.contactPointA,this.forwardEquation.contactPointA),a.normalize(c,this.forwardEquation.t),a.scale(c,c,this.engineForce),this.vehicle.chassisBody.applyForce(c,this.forwardEquation.contactPointA)}},{"../constraints/Constraint":14,"../equations/FrictionEquation":23,"../math/vec2":30,"../objects/Body":31,"../utils/Utils":57}],36:[function(e,t,i){var s=t.exports={AABB:e("./collision/AABB"),AngleLockEquation:e("./equations/AngleLockEquation"),Body:e("./objects/Body"),Broadphase:e("./collision/Broadphase"),Capsule:e("./shapes/Capsule"),Circle:e("./shapes/Circle"),Constraint:e("./constraints/Constraint"),ContactEquation:e("./equations/ContactEquation"),ContactEquationPool:e("./utils/ContactEquationPool"),ContactMaterial:e("./material/ContactMaterial"),Convex:e("./shapes/Convex"),DistanceConstraint:e("./constraints/DistanceConstraint"),Equation:e("./equations/Equation"),EventEmitter:e("./events/EventEmitter"),FrictionEquation:e("./equations/FrictionEquation"),FrictionEquationPool:e("./utils/FrictionEquationPool"),GearConstraint:e("./constraints/GearConstraint"),GSSolver:e("./solver/GSSolver"),Heightfield:e("./shapes/Heightfield"),Line:e("./shapes/Line"),LockConstraint:e("./constraints/LockConstraint"),Material:e("./material/Material"),Narrowphase:e("./collision/Narrowphase"),NaiveBroadphase:e("./collision/NaiveBroadphase"),Particle:e("./shapes/Particle"),Plane:e("./shapes/Plane"),Pool:e("./utils/Pool"),RevoluteConstraint:e("./constraints/RevoluteConstraint"),PrismaticConstraint:e("./constraints/PrismaticConstraint"),Ray:e("./collision/Ray"),RaycastResult:e("./collision/RaycastResult"),Box:e("./shapes/Box"),RotationalVelocityEquation:e("./equations/RotationalVelocityEquation"),SAPBroadphase:e("./collision/SAPBroadphase"),Shape:e("./shapes/Shape"),Solver:e("./solver/Solver"),Spring:e("./objects/Spring"),TopDownVehicle:e("./objects/TopDownVehicle"),LinearSpring:e("./objects/LinearSpring"),RotationalSpring:e("./objects/RotationalSpring"),Utils:e("./utils/Utils"),World:e("./world/World"),vec2:e("./math/vec2"),version:e("../package.json").version};Object.defineProperty(s,"Rectangle",{get:function(){return console.warn("The Rectangle class has been renamed to Box."),this.Box}})},{"../package.json":6,"./collision/AABB":7,"./collision/Broadphase":8,"./collision/NaiveBroadphase":9,"./collision/Narrowphase":10,"./collision/Ray":11,"./collision/RaycastResult":12,"./collision/SAPBroadphase":13,"./constraints/Constraint":14,"./constraints/DistanceConstraint":15,"./constraints/GearConstraint":16,"./constraints/LockConstraint":17,"./constraints/PrismaticConstraint":18,"./constraints/RevoluteConstraint":19,"./equations/AngleLockEquation":20,"./equations/ContactEquation":21,"./equations/Equation":22,"./equations/FrictionEquation":23,"./equations/RotationalVelocityEquation":25,"./events/EventEmitter":26,"./material/ContactMaterial":27,"./material/Material":28,"./math/vec2":30,"./objects/Body":31,"./objects/LinearSpring":32,"./objects/RotationalSpring":33,"./objects/Spring":34,"./objects/TopDownVehicle":35,"./shapes/Box":37,"./shapes/Capsule":38,"./shapes/Circle":39,"./shapes/Convex":40,"./shapes/Heightfield":41,"./shapes/Line":42,"./shapes/Particle":43,"./shapes/Plane":44,"./shapes/Shape":45,"./solver/GSSolver":46,"./solver/Solver":47,"./utils/ContactEquationPool":48,"./utils/FrictionEquationPool":49,"./utils/Pool":55,"./utils/Utils":57,"./world/World":61}],37:[function(e,t,i){function s(e){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(e={width:arguments[0],height:arguments[1]},console.warn("The Rectangle has been renamed to Box and its constructor signature has changed. Please use the following format: new Box({ width: 1, height: 1, ... })")),e=e||{};var t=this.width=e.width||1,i=this.height=e.height||1,s=[o.fromValues(-t/2,-i/2),o.fromValues(t/2,-i/2),o.fromValues(t/2,i/2),o.fromValues(-t/2,i/2)],n=[o.fromValues(1,0),o.fromValues(0,1)];e.vertices=s,e.axes=n,e.type=a.BOX,r.call(this,e)}var o=e("../math/vec2"),a=e("./Shape"),r=e("./Convex");t.exports=s,(s.prototype=new r).constructor=s,s.prototype.computeMomentOfInertia=function(e){var t=this.width,i=this.height;return e*(i*i+t*t)/12},s.prototype.updateBoundingRadius=function(){var e=this.width,t=this.height;this.boundingRadius=Math.sqrt(e*e+t*t)/2};o.create(),o.create(),o.create(),o.create();s.prototype.computeAABB=function(e,t,i){e.setFromPoints(this.vertices,t,i,0)},s.prototype.updateArea=function(){this.area=this.width*this.height}},{"../math/vec2":30,"./Convex":40,"./Shape":45}],38:[function(e,t,i){function s(e){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(e={length:arguments[0],radius:arguments[1]},console.warn("The Capsule constructor signature has changed. Please use the following format: new Capsule({ radius: 1, length: 1 })")),e=e||{},this.length=e.length||1,this.radius=e.radius||1,e.type=o.CAPSULE,o.call(this,e)}var o=e("./Shape"),a=e("../math/vec2");t.exports=s,(s.prototype=new o).constructor=s,s.prototype.computeMomentOfInertia=function(e){var t=this.radius,i=this.length+t,s=2*t;return e*(s*s+i*i)/12},s.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},s.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var r=a.create();s.prototype.computeAABB=function(e,t,i){var s=this.radius;a.set(r,this.length/2,0),0!==i&&a.rotate(r,r,i),a.set(e.upperBound,Math.max(r[0]+s,-r[0]+s),Math.max(r[1]+s,-r[1]+s)),a.set(e.lowerBound,Math.min(r[0]-s,-r[0]-s),Math.min(r[1]-s,-r[1]-s)),a.add(e.lowerBound,e.lowerBound,t),a.add(e.upperBound,e.upperBound,t)};var n=a.create(),h=a.create(),l=a.create(),p=a.create(),c=a.fromValues(0,1);s.prototype.raycast=function(e,t,i,s){for(var o=t.from,r=t.to,d=(t.direction,n),u=h,g=l,m=p,y=this.length/2,f=0;f<2;f++){var b=this.radius*(2*f-1);if(a.set(g,-y,b),a.set(m,y,b),a.toGlobalFrame(g,g,i,s),a.toGlobalFrame(m,m,i,s),(x=a.getLineSegmentsIntersectionFraction(o,r,g,m))>=0&&(a.rotate(u,c,s),a.scale(u,u,2*f-1),t.reportIntersection(e,x,u,-1),e.shouldStop(t)))return}for(var w=Math.pow(this.radius,2)+Math.pow(y,2),f=0;f<2;f++){a.set(g,y*(2*f-1),0),a.toGlobalFrame(g,g,i,s);var v=Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2),k=2*((r[0]-o[0])*(o[0]-g[0])+(r[1]-o[1])*(o[1]-g[1])),S=Math.pow(o[0]-g[0],2)+Math.pow(o[1]-g[1],2)-Math.pow(this.radius,2),x=Math.pow(k,2)-4*v*S;if(!(x<0))if(0===x){if(a.lerp(d,o,r,x),a.squaredDistance(d,i)>w&&(a.sub(u,d,g),a.normalize(u,u),t.reportIntersection(e,x,u,-1),e.shouldStop(t)))return}else{var P=Math.sqrt(x),B=1/(2*v),T=(-k-P)*B,G=(-k+P)*B;if(T>=0&&T<=1&&(a.lerp(d,o,r,T),a.squaredDistance(d,i)>w&&(a.sub(u,d,g),a.normalize(u,u),t.reportIntersection(e,T,u,-1),e.shouldStop(t))))return;if(G>=0&&G<=1&&(a.lerp(d,o,r,G),a.squaredDistance(d,i)>w&&(a.sub(u,d,g),a.normalize(u,u),t.reportIntersection(e,G,u,-1),e.shouldStop(t))))return}}}},{"../math/vec2":30,"./Shape":45}],39:[function(e,t,i){function s(e){"number"==typeof arguments[0]&&(e={radius:arguments[0]},console.warn("The Circle constructor signature has changed. Please use the following format: new Circle({ radius: 1 })")),e=e||{},this.radius=e.radius||1,e.type=o.CIRCLE,o.call(this,e)}var o=e("./Shape"),a=e("../math/vec2");t.exports=s,(s.prototype=new o).constructor=s,s.prototype.computeMomentOfInertia=function(e){var t=this.radius;return e*t*t/2},s.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},s.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},s.prototype.computeAABB=function(e,t,i){var s=this.radius;a.set(e.upperBound,s,s),a.set(e.lowerBound,-s,-s),t&&(a.add(e.lowerBound,e.lowerBound,t),a.add(e.upperBound,e.upperBound,t))};var r=a.create(),n=a.create();s.prototype.raycast=function(e,t,i,s){var o=t.from,h=t.to,l=this.radius,p=Math.pow(h[0]-o[0],2)+Math.pow(h[1]-o[1],2),c=2*((h[0]-o[0])*(o[0]-i[0])+(h[1]-o[1])*(o[1]-i[1])),d=Math.pow(o[0]-i[0],2)+Math.pow(o[1]-i[1],2)-Math.pow(l,2),u=Math.pow(c,2)-4*p*d,g=r,m=n;if(!(u<0))if(0===u)a.lerp(g,o,h,u),a.sub(m,g,i),a.normalize(m,m),t.reportIntersection(e,u,m,-1);else{var y=Math.sqrt(u),f=1/(2*p),b=(-c-y)*f,w=(-c+y)*f;if(b>=0&&b<=1&&(a.lerp(g,o,h,b),a.sub(m,g,i),a.normalize(m,m),t.reportIntersection(e,b,m,-1),e.shouldStop(t)))return;w>=0&&w<=1&&(a.lerp(g,o,h,w),a.sub(m,g,i),a.normalize(m,m),t.reportIntersection(e,w,m,-1))}}},{"../math/vec2":30,"./Shape":45}],40:[function(e,t,i){function s(e){Array.isArray(arguments[0])&&(e={vertices:arguments[0],axes:arguments[1]},console.warn("The Convex constructor signature has changed. Please use the following format: new Convex({ vertices: [...], ... })")),e=e||{},this.vertices=[];for(var t=void 0!==e.vertices?e.vertices:[],i=0;i<t.length;i++){var s=a.create();a.copy(s,t[i]),this.vertices.push(s)}if(this.axes=[],e.axes)for(i=0;i<e.axes.length;i++){var r=a.create();a.copy(r,e.axes[i]),this.axes.push(r)}else for(i=0;i<this.vertices.length;i++){var n=this.vertices[i],h=this.vertices[(i+1)%this.vertices.length],l=a.create();a.sub(l,h,n),a.rotate90cw(l,l),a.normalize(l,l),this.axes.push(l)}if(this.centerOfMass=a.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,e.type=o.CONVEX,o.call(this,e),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error("Convex vertices must be given in conter-clockwise winding.")}var o=e("./Shape"),a=e("../math/vec2"),r=e("../math/polyk");e("poly-decomp");t.exports=s,(s.prototype=new o).constructor=s;var n=a.create(),h=a.create();s.prototype.projectOntoLocalAxis=function(e,t){for(var i,s,o=null,r=null,e=n,h=0;h<this.vertices.length;h++)i=this.vertices[h],s=a.dot(i,e),(null===o||s>o)&&(o=s),(null===r||s<r)&&(r=s);if(r>o){var l=r;r=o,o=l}a.set(t,r,o)},s.prototype.projectOntoWorldAxis=function(e,t,i,s){var o=h;this.projectOntoLocalAxis(e,s),0!==i?a.rotate(o,e,i):o=e;var r=a.dot(t,o);a.set(s,s[0]+r,s[1]+r)},s.prototype.updateTriangles=function(){this.triangles.length=0;for(var e=[],t=0;t<this.vertices.length;t++){var i=this.vertices[t];e.push(i[0],i[1])}for(var s=r.Triangulate(e),t=0;t<s.length;t+=3){var o=s[t],a=s[t+1],n=s[t+2];this.triangles.push([o,a,n])}};var l=a.create(),p=a.create(),c=a.create(),d=a.create(),u=a.create();a.create(),a.create(),a.create(),a.create();s.prototype.updateCenterOfMass=function(){var e=this.triangles,t=this.vertices,i=this.centerOfMass,o=l,r=c,n=d,h=u,g=p;a.set(i,0,0);for(var m=0,y=0;y!==e.length;y++){var f=e[y],r=t[f[0]],n=t[f[1]],h=t[f[2]];a.centroid(o,r,n,h);var b=s.triangleArea(r,n,h);m+=b,a.scale(g,o,b),a.add(i,i,g)}a.scale(i,i,1/m)},s.prototype.computeMomentOfInertia=function(e){for(var t=0,i=0,s=this.vertices.length,o=s-1,r=0;r<s;o=r,r++){var n=this.vertices[o],h=this.vertices[r],l=Math.abs(a.crossLength(n,h));t+=l*(a.dot(h,h)+a.dot(h,n)+a.dot(n,n)),i+=l}return e/6*(t/i)},s.prototype.updateBoundingRadius=function(){for(var e=this.vertices,t=0,i=0;i!==e.length;i++){var s=a.squaredLength(e[i]);s>t&&(t=s)}this.boundingRadius=Math.sqrt(t)},s.triangleArea=function(e,t,i){return.5*((t[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(t[1]-e[1]))},s.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var e=this.triangles,t=this.vertices,i=0;i!==e.length;i++){var o=e[i],a=t[o[0]],r=t[o[1]],n=t[o[2]],h=s.triangleArea(a,r,n);this.area+=h}},s.prototype.computeAABB=function(e,t,i){e.setFromPoints(this.vertices,t,i,0)};var g=a.create(),m=a.create(),y=a.create();s.prototype.raycast=function(e,t,i,s){var o=g,r=m,n=y,h=this.vertices;a.toLocalFrame(o,t.from,i,s),a.toLocalFrame(r,t.to,i,s);for(var l=h.length,p=0;p<l&&!e.shouldStop(t);p++){var c=h[p],d=h[(p+1)%l],u=a.getLineSegmentsIntersectionFraction(o,r,c,d);u>=0&&(a.sub(n,d,c),a.rotate(n,n,-Math.PI/2+s),a.normalize(n,n),t.reportIntersection(e,u,n,p))}}},{"../math/polyk":29,"../math/vec2":30,"./Shape":45,"poly-decomp":5}],41:[function(e,t,i){function s(e){if(Array.isArray(arguments[0])){if(e={heights:arguments[0]},"object"==typeof arguments[1])for(var t in arguments[1])e[t]=arguments[1][t];console.warn("The Heightfield constructor signature has changed. Please use the following format: new Heightfield({ heights: [...], ... })")}e=e||{},this.heights=e.heights?e.heights.slice(0):[],this.maxValue=e.maxValue||null,this.minValue=e.minValue||null,this.elementWidth=e.elementWidth||.1,void 0!==e.maxValue&&void 0!==e.minValue||this.updateMaxMinValues(),e.type=o.HEIGHTFIELD,o.call(this,e)}var o=e("./Shape"),a=e("../math/vec2");e("../utils/Utils");t.exports=s,(s.prototype=new o).constructor=s,s.prototype.updateMaxMinValues=function(){for(var e=this.heights,t=e[0],i=e[0],s=0;s!==e.length;s++){var o=e[s];o>t&&(t=o),o<i&&(i=o)}this.maxValue=t,this.minValue=i},s.prototype.computeMomentOfInertia=function(e){return Number.MAX_VALUE},s.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},s.prototype.updateArea=function(){for(var e=this.heights,t=0,i=0;i<e.length-1;i++)t+=(e[i]+e[i+1])/2*this.elementWidth;this.area=t};var r=[a.create(),a.create(),a.create(),a.create()];s.prototype.computeAABB=function(e,t,i){a.set(r[0],0,this.maxValue),a.set(r[1],this.elementWidth*this.heights.length,this.maxValue),a.set(r[2],this.elementWidth*this.heights.length,this.minValue),a.set(r[3],0,this.minValue),e.setFromPoints(r,t,i)},s.prototype.getLineSegment=function(e,t,i){var s=this.heights,o=this.elementWidth;a.set(e,i*o,s[i]),a.set(t,(i+1)*o,s[i+1])},s.prototype.getSegmentIndex=function(e){return Math.floor(e[0]/this.elementWidth)},s.prototype.getClampedSegmentIndex=function(e){var t=this.getSegmentIndex(e);return t=Math.min(this.heights.length,Math.max(t,0))};a.create();var n=a.create(),h=a.create(),l=a.create(),p=a.create(),c=a.create();a.fromValues(0,1);s.prototype.raycast=function(e,t,i,s){var o=t.from,r=t.to,d=(t.direction,n),u=h,g=l,m=p,y=c;a.toLocalFrame(m,o,i,s),a.toLocalFrame(y,r,i,s);var f=this.getClampedSegmentIndex(m),b=this.getClampedSegmentIndex(y);if(f>b){var w=f;f=b,b=w}for(var v=0;v<this.heights.length-1;v++){this.getLineSegment(u,g,v);var k=a.getLineSegmentsIntersectionFraction(m,y,u,g);if(k>=0&&(a.sub(d,g,u),a.rotate(d,d,s+Math.PI/2),a.normalize(d,d),t.reportIntersection(e,k,d,-1),e.shouldStop(t)))return}}},{"../math/vec2":30,"../utils/Utils":57,"./Shape":45}],42:[function(e,t,i){function s(e){"number"==typeof arguments[0]&&(e={length:arguments[0]},console.warn("The Line constructor signature has changed. Please use the following format: new Line({ length: 1, ... })")),e=e||{},this.length=e.length||1,e.type=o.LINE,o.call(this,e)}var o=e("./Shape"),a=e("../math/vec2");t.exports=s,(s.prototype=new o).constructor=s,s.prototype.computeMomentOfInertia=function(e){return e*Math.pow(this.length,2)/12},s.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var r=[a.create(),a.create()];s.prototype.computeAABB=function(e,t,i){var s=this.length/2;a.set(r[0],-s,0),a.set(r[1],s,0),e.setFromPoints(r,t,i,0)};a.create();var n=a.create(),h=a.create(),l=a.create(),p=a.fromValues(0,1);s.prototype.raycast=function(e,t,i,s){var o=t.from,r=t.to,c=h,d=l,u=this.length/2;a.set(c,-u,0),a.set(d,u,0),a.toGlobalFrame(c,c,i,s),a.toGlobalFrame(d,d,i,s);var g=a.getLineSegmentsIntersectionFraction(c,d,o,r);if(g>=0){var m=n;a.rotate(m,p,s),t.reportIntersection(e,g,m,-1)}}},{"../math/vec2":30,"./Shape":45}],43:[function(e,t,i){function s(e){(e=e||{}).type=o.PARTICLE,o.call(this,e)}var o=e("./Shape"),a=e("../math/vec2");t.exports=s,(s.prototype=new o).constructor=s,s.prototype.computeMomentOfInertia=function(e){return 0},s.prototype.updateBoundingRadius=function(){this.boundingRadius=0},s.prototype.computeAABB=function(e,t,i){a.copy(e.lowerBound,t),a.copy(e.upperBound,t)}},{"../math/vec2":30,"./Shape":45}],44:[function(e,t,i){function s(e){(e=e||{}).type=o.PLANE,o.call(this,e)}var o=e("./Shape"),a=e("../math/vec2");e("../utils/Utils");t.exports=s,(s.prototype=new o).constructor=s,s.prototype.computeMomentOfInertia=function(e){return 0},s.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},s.prototype.computeAABB=function(e,t,i){var s=i%(2*Math.PI),o=a.set,r=Number.MAX_VALUE,n=e.lowerBound,h=e.upperBound;0===s?(o(n,-r,-r),o(h,r,0)):s===Math.PI/2?(o(n,0,-r),o(h,r,r)):s===Math.PI?(o(n,-r,0),o(h,r,r)):s===3*Math.PI/2?(o(n,-r,-r),o(h,0,r)):(o(n,-r,-r),o(h,r,r)),a.add(n,n,t),a.add(h,h,t)},s.prototype.updateArea=function(){this.area=Number.MAX_VALUE};var r=a.create(),n=(a.create(),a.create(),a.create()),h=a.create();s.prototype.raycast=function(e,t,i,s){var o=t.from,l=t.to,p=t.direction,c=r,d=n,u=h;a.set(d,0,1),a.rotate(d,d,s),a.sub(u,o,i);var g=a.dot(u,d);if(a.sub(u,l,i),!(g*a.dot(u,d)>0||a.squaredDistance(o,l)<g*g)){var m=a.dot(d,p);a.sub(c,o,i);var y=-a.dot(d,c)/m/t.length;t.reportIntersection(e,y,d,-1)}}},{"../math/vec2":30,"../utils/Utils":57,"./Shape":45}],45:[function(e,t,i){function s(e){e=e||{},this.body=null,this.position=o.fromValues(0,0),e.position&&o.copy(this.position,e.position),this.angle=e.angle||0,this.type=e.type||0,this.id=s.idCounter++,this.boundingRadius=0,this.collisionGroup=void 0!==e.collisionGroup?e.collisionGroup:1,this.collisionResponse=void 0===e.collisionResponse||e.collisionResponse,this.collisionMask=void 0!==e.collisionMask?e.collisionMask:1,this.material=e.material||null,this.area=0,this.sensor=void 0!==e.sensor&&e.sensor,this.type&&this.updateBoundingRadius(),this.updateArea()}t.exports=s;var o=e("../math/vec2");s.idCounter=0,s.CIRCLE=1,s.PARTICLE=2,s.PLANE=4,s.CONVEX=8,s.LINE=16,s.BOX=32,Object.defineProperty(s,"RECTANGLE",{get:function(){return console.warn("Shape.RECTANGLE is deprecated, use Shape.BOX instead."),s.BOX}}),s.CAPSULE=64,s.HEIGHTFIELD=128,s.prototype.computeMomentOfInertia=function(e){},s.prototype.updateBoundingRadius=function(){},s.prototype.updateArea=function(){},s.prototype.computeAABB=function(e,t,i){},s.prototype.raycast=function(e,t,i,s){}},{"../math/vec2":30}],46:[function(e,t,i){function s(e){r.call(this,e,r.GS),e=e||{},this.iterations=e.iterations||10,this.tolerance=e.tolerance||1e-7,this.arrayStep=30,this.lambda=new n.ARRAY_TYPE(this.arrayStep),this.Bs=new n.ARRAY_TYPE(this.arrayStep),this.invCs=new n.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=0,this.usedIterations=0}function o(e){for(var t=e.length;t--;)e[t]=0}var a=e("../math/vec2"),r=e("./Solver"),n=e("../utils/Utils"),h=e("../equations/FrictionEquation");t.exports=s,(s.prototype=new r).constructor=s,s.prototype.solve=function(e,t){this.sortEquations();var i=0,r=this.iterations,l=this.frictionIterations,p=this.equations,c=p.length,d=Math.pow(this.tolerance*c,2),u=t.bodies,g=t.bodies.length,m=(a.add,a.set,this.useZeroRHS),y=this.lambda;if(this.usedIterations=0,c)for(w=0;w!==g;w++)(x=u[w]).updateSolveMassProperties();y.length<c&&(y=this.lambda=new n.ARRAY_TYPE(c+this.arrayStep),this.Bs=new n.ARRAY_TYPE(c+this.arrayStep),this.invCs=new n.ARRAY_TYPE(c+this.arrayStep)),o(y);for(var f=this.invCs,b=this.Bs,y=this.lambda,w=0;w!==p.length;w++)((v=p[w]).timeStep!==e||v.needsUpdate)&&(v.timeStep=e,v.update()),b[w]=v.computeB(v.a,v.b,e),f[w]=v.computeInvC(v.epsilon);var v,k,S;if(0!==c){for(w=0;w!==g;w++){var x=u[w];x.resetConstraintVelocity()}if(l){for(i=0;i!==l;i++){for(k=0,S=0;S!==c;S++){v=p[S];G=s.iterateEquation(S,v,v.epsilon,b,f,y,m,e,i);k+=Math.abs(G)}if(this.usedIterations++,k*k<=d)break}for(s.updateMultipliers(p,y,1/e),S=0;S!==c;S++){var P=p[S];if(P instanceof h){for(var B=0,T=0;T!==P.contactEquations.length;T++)B+=P.contactEquations[T].multiplier;B*=P.frictionCoefficient/P.contactEquations.length,P.maxForce=B,P.minForce=-B}}}for(i=0;i!==r;i++){for(k=0,S=0;S!==c;S++){v=p[S];var G=s.iterateEquation(S,v,v.epsilon,b,f,y,m,e,i);k+=Math.abs(G)}if(this.usedIterations++,k*k<=d)break}for(w=0;w!==g;w++)u[w].addConstraintVelocity();s.updateMultipliers(p,y,1/e)}},s.updateMultipliers=function(e,t,i){for(var s=e.length;s--;)e[s].multiplier=t[s]*i},s.iterateEquation=function(e,t,i,s,o,a,r,n,h){var l=s[e],p=o[e],c=a[e],d=t.computeGWlambda(),u=t.maxForce,g=t.minForce;r&&(l=0);var m=p*(l-d-i*c),y=c+m;return y<g*n?m=g*n-c:y>u*n&&(m=u*n-c),a[e]+=m,t.addToWlambda(m),m}},{"../equations/FrictionEquation":23,"../math/vec2":30,"../utils/Utils":57,"./Solver":47}],47:[function(e,t,i){function s(e,t){e=e||{},o.call(this),this.type=t,this.equations=[],this.equationSortFunction=e.equationSortFunction||!1}e("../utils/Utils");var o=e("../events/EventEmitter");t.exports=s,(s.prototype=new o).constructor=s,s.prototype.solve=function(e,t){throw new Error("Solver.solve should be implemented by subclasses!")};var a={bodies:[]};s.prototype.solveIsland=function(e,t){this.removeAllEquations(),t.equations.length&&(this.addEquations(t.equations),a.bodies.length=0,t.getBodies(a.bodies),a.bodies.length&&this.solve(e,a))},s.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},s.prototype.addEquation=function(e){e.enabled&&this.equations.push(e)},s.prototype.addEquations=function(e){for(var t=0,i=e.length;t!==i;t++){var s=e[t];s.enabled&&this.equations.push(s)}},s.prototype.removeEquation=function(e){var t=this.equations.indexOf(e);-1!==t&&this.equations.splice(t,1)},s.prototype.removeAllEquations=function(){this.equations.length=0},s.GS=1,s.ISLAND=2},{"../events/EventEmitter":26,"../utils/Utils":57}],48:[function(e,t,i){function s(){a.apply(this,arguments)}var o=e("../equations/ContactEquation"),a=e("./Pool");t.exports=s,(s.prototype=new a).constructor=s,s.prototype.create=function(){return new o},s.prototype.destroy=function(e){return e.bodyA=e.bodyB=null,this}},{"../equations/ContactEquation":21,"./Pool":55}],49:[function(e,t,i){function s(){a.apply(this,arguments)}var o=e("../equations/FrictionEquation"),a=e("./Pool");t.exports=s,(s.prototype=new a).constructor=s,s.prototype.create=function(){return new o},s.prototype.destroy=function(e){return e.bodyA=e.bodyB=null,this}},{"../equations/FrictionEquation":23,"./Pool":55}],50:[function(e,t,i){function s(){a.apply(this,arguments)}var o=e("../world/IslandNode"),a=e("./Pool");t.exports=s,(s.prototype=new a).constructor=s,s.prototype.create=function(){return new o},s.prototype.destroy=function(e){return e.reset(),this}},{"../world/IslandNode":60,"./Pool":55}],51:[function(e,t,i){function s(){a.apply(this,arguments)}var o=e("../world/Island"),a=e("./Pool");t.exports=s,(s.prototype=new a).constructor=s,s.prototype.create=function(){return new o},s.prototype.destroy=function(e){return e.reset(),this}},{"../world/Island":58,"./Pool":55}],52:[function(e,t,i){function s(){this.overlappingShapesLastState=new o,this.overlappingShapesCurrentState=new o,this.recordPool=new a({size:16}),this.tmpDict=new o,this.tmpArray1=[]}var o=e("./TupleDictionary"),a=(e("./OverlapKeeperRecord"),e("./OverlapKeeperRecordPool"));e("./Utils");t.exports=s,s.prototype.tick=function(){for(var e=this.overlappingShapesLastState,t=this.overlappingShapesCurrentState,i=e.keys.length;i--;){var s=e.keys[i],o=e.getByKey(s);t.getByKey(s);o&&this.recordPool.release(o)}e.reset(),e.copy(t),t.reset()},s.prototype.setOverlapping=function(e,t,i,s){this.overlappingShapesLastState;var o=this.overlappingShapesCurrentState;if(!o.get(t.id,s.id)){var a=this.recordPool.get();a.set(e,t,i,s),o.set(t.id,s.id,a)}},s.prototype.getNewOverlaps=function(e){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,e)},s.prototype.getEndOverlaps=function(e){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,e)},s.prototype.bodiesAreOverlapping=function(e,t){for(var i=this.overlappingShapesCurrentState,s=i.keys.length;s--;){var o=i.keys[s],a=i.data[o];if(a.bodyA===e&&a.bodyB===t||a.bodyA===t&&a.bodyB===e)return!0}return!1},s.prototype.getDiff=function(e,t,i){var s=e,o=t;(i=i||[]).length=0;for(var a=o.keys.length;a--;){var r=o.keys[a],n=o.data[r];if(!n)throw new Error("Key "+r+" had no data!");s.data[r]||i.push(n)}return i},s.prototype.isNewOverlap=function(e,t){var i=0|e.id,s=0|t.id,o=this.overlappingShapesLastState,a=this.overlappingShapesCurrentState;return!o.get(i,s)&&!!a.get(i,s)},s.prototype.getNewBodyOverlaps=function(e){this.tmpArray1.length=0;var t=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(t,e)},s.prototype.getEndBodyOverlaps=function(e){this.tmpArray1.length=0;var t=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(t,e)},s.prototype.getBodyDiff=function(e,t){t=t||[];for(var i=this.tmpDict,s=e.length;s--;){var o=e[s];i.set(0|o.bodyA.id,0|o.bodyB.id,o)}for(s=i.keys.length;s--;)(o=i.getByKey(i.keys[s]))&&t.push(o.bodyA,o.bodyB);return i.reset(),t}},{"./OverlapKeeperRecord":53,"./OverlapKeeperRecordPool":54,"./TupleDictionary":56,"./Utils":57}],53:[function(e,t,i){function s(e,t,i,s){this.shapeA=t,this.shapeB=s,this.bodyA=e,this.bodyB=i}t.exports=s,s.prototype.set=function(e,t,i,o){s.call(this,e,t,i,o)}},{}],54:[function(e,t,i){function s(){a.apply(this,arguments)}var o=e("./OverlapKeeperRecord"),a=e("./Pool");t.exports=s,(s.prototype=new a).constructor=s,s.prototype.create=function(){return new o},s.prototype.destroy=function(e){return e.bodyA=e.bodyB=e.shapeA=e.shapeB=null,this}},{"./OverlapKeeperRecord":53,"./Pool":55}],55:[function(e,t,i){function s(e){e=e||{},this.objects=[],void 0!==e.size&&this.resize(e.size)}t.exports=s,s.prototype.resize=function(e){for(var t=this.objects;t.length>e;)t.pop();for(;t.length<e;)t.push(this.create());return this},s.prototype.get=function(){var e=this.objects;return e.length?e.pop():this.create()},s.prototype.release=function(e){return this.destroy(e),this.objects.push(e),this}},{}],56:[function(e,t,i){function s(){this.data={},this.keys=[]}var o=e("./Utils");t.exports=s,s.prototype.getKey=function(e,t){return e|=0,t|=0,(0|e)==(0|t)?-1:0|((0|e)>(0|t)?e<<16|65535&t:t<<16|65535&e)},s.prototype.getByKey=function(e){return e|=0,this.data[e]},s.prototype.get=function(e,t){return this.data[this.getKey(e,t)]},s.prototype.set=function(e,t,i){if(!i)throw new Error("No data!");var s=this.getKey(e,t);return this.data[s]||this.keys.push(s),this.data[s]=i,s},s.prototype.reset=function(){for(var e=this.data,t=this.keys,i=t.length;i--;)delete e[t[i]];t.length=0},s.prototype.copy=function(e){this.reset(),o.appendArray(this.keys,e.keys);for(var t=e.keys.length;t--;){var i=e.keys[t];this.data[i]=e.data[i]}}},{"./Utils":57}],57:[function(e,t,i){function s(){}t.exports=s,s.appendArray=function(e,t){if(t.length<15e4)e.push.apply(e,t);else for(var i=0,s=t.length;i!==s;++i)e.push(t[i])},s.splice=function(e,t,i){i=i||1;for(var s=t,o=e.length-i;s<o;s++)e[s]=e[s+i];e.length=o},s.ARRAY_TYPE="undefined"!=typeof P2_ARRAY_TYPE?P2_ARRAY_TYPE:"undefined"!=typeof Float32Array?Float32Array:Array,s.extend=function(e,t){for(var i in t)e[i]=t[i]},s.defaults=function(e,t){e=e||{};for(var i in t)i in e||(e[i]=t[i]);return e}},{}],58:[function(e,t,i){function s(){this.equations=[],this.bodies=[]}var o=e("../objects/Body");t.exports=s,s.prototype.reset=function(){this.equations.length=this.bodies.length=0};var a=[];s.prototype.getBodies=function(e){var t=e||[],i=this.equations;a.length=0;for(var s=0;s!==i.length;s++){var o=i[s];-1===a.indexOf(o.bodyA.id)&&(t.push(o.bodyA),a.push(o.bodyA.id)),-1===a.indexOf(o.bodyB.id)&&(t.push(o.bodyB),a.push(o.bodyB.id))}return t},s.prototype.wantsToSleep=function(){for(var e=0;e<this.bodies.length;e++){var t=this.bodies[e];if(t.type===o.DYNAMIC&&!t.wantsToSleep)return!1}return!0},s.prototype.sleep=function(){for(var e=0;e<this.bodies.length;e++)this.bodies[e].sleep();return!0}},{"../objects/Body":31}],59:[function(e,t,i){function s(e){this.nodePool=new o({size:16}),this.islandPool=new a({size:8}),this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}e("../math/vec2"),e("./Island"),e("./IslandNode");var o=e("./../utils/IslandNodePool"),a=e("./../utils/IslandPool"),r=e("../objects/Body");t.exports=s,s.getUnvisitedNode=function(e){for(var t=e.length,i=0;i!==t;i++){var s=e[i];if(!s.visited&&s.body.type===r.DYNAMIC)return s}return!1},s.prototype.visit=function(e,t,i){t.push(e.body);for(var s=e.equations.length,o=0;o!==s;o++){var a=e.equations[o];-1===i.indexOf(a)&&i.push(a)}},s.prototype.bfs=function(e,t,i){var o=this.queue;for(o.length=0,o.push(e),e.visited=!0,this.visit(e,t,i);o.length;)for(var a,n=o.pop();a=s.getUnvisitedNode(n.neighbors);)a.visited=!0,this.visit(a,t,i),a.body.type===r.DYNAMIC&&o.push(a)},s.prototype.split=function(e){for(var t=e.bodies,i=this.nodes,o=this.equations;i.length;)this.nodePool.release(i.pop());for(h=0;h!==t.length;h++){var a=this.nodePool.get();a.body=t[h],i.push(a)}for(var r=0;r!==o.length;r++){var n=o[r],h=t.indexOf(n.bodyA),l=t.indexOf(n.bodyB),p=i[h],c=i[l];p.neighbors.push(c),c.neighbors.push(p),p.equations.push(n),c.equations.push(n)}for(var d=this.islands,h=0;h<d.length;h++)this.islandPool.release(d[h]);d.length=0;for(var u;u=s.getUnvisitedNode(i);){var g=this.islandPool.get();this.bfs(u,g.bodies,g.equations),d.push(g)}return d}},{"../math/vec2":30,"../objects/Body":31,"./../utils/IslandNodePool":50,"./../utils/IslandPool":51,"./Island":58,"./IslandNode":60}],60:[function(e,t,i){function s(e){this.body=e,this.neighbors=[],this.equations=[],this.visited=!1}t.exports=s,s.prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}},{}],61:[function(e,t,i){function s(e){c.apply(this),e=e||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=e.solver||new o,this.narrowphase=new f(this),this.islandManager=new v,this.gravity=a.fromValues(0,-9.78),e.gravity&&a.copy(this.gravity,e.gravity),this.frictionGravity=a.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.broadphase=e.broadphase||new y,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new u,this.defaultContactMaterial=new g(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.accumulator=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.islandSplit=void 0===e.islandSplit||!!e.islandSplit,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=s.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new w}var o=e("../solver/GSSolver"),a=(e("../solver/Solver"),e("../collision/Ray"),e("../math/vec2")),r=e("../shapes/Circle"),n=e("../shapes/Convex"),h=(e("../shapes/Line"),e("../shapes/Plane")),l=e("../shapes/Capsule"),p=e("../shapes/Particle"),c=e("../events/EventEmitter"),d=e("../objects/Body"),u=(e("../shapes/Shape"),e("../objects/LinearSpring"),e("../material/Material")),g=e("../material/ContactMaterial"),m=(e("../constraints/DistanceConstraint"),e("../constraints/Constraint"),e("../constraints/LockConstraint"),e("../constraints/RevoluteConstraint"),e("../constraints/PrismaticConstraint"),e("../constraints/GearConstraint"),e("../../package.json"),e("../collision/Broadphase"),e("../collision/AABB")),y=e("../collision/SAPBroadphase"),f=e("../collision/Narrowphase"),b=e("../utils/Utils"),w=e("../utils/OverlapKeeper"),v=e("./IslandManager");e("../objects/RotationalSpring");t.exports=s,s.prototype=new Object(c.prototype),s.prototype.constructor=s,s.NO_SLEEPING=1,s.BODY_SLEEPING=2,s.ISLAND_SLEEPING=4,s.prototype.addConstraint=function(e){this.constraints.push(e)},s.prototype.addContactMaterial=function(e){this.contactMaterials.push(e)},s.prototype.removeContactMaterial=function(e){var t=this.contactMaterials.indexOf(e);-1!==t&&b.splice(this.contactMaterials,t,1)},s.prototype.getContactMaterial=function(e,t){for(var i=this.contactMaterials,s=0,o=i.length;s!==o;s++){var a=i[s];if(a.materialA.id===e.id&&a.materialB.id===t.id||a.materialA.id===t.id&&a.materialB.id===e.id)return a}return!1},s.prototype.removeConstraint=function(e){var t=this.constraints.indexOf(e);-1!==t&&b.splice(this.constraints,t,1)};a.create(),a.create(),a.create(),a.create(),a.create(),a.create();var k=a.create(),S=a.fromValues(0,0),x=a.fromValues(0,0);a.fromValues(0,0),a.fromValues(0,0);s.prototype.step=function(e,t,i){if(i=i||10,0===(t=t||0))this.internalStep(e),this.time+=e;else{this.accumulator+=t;for(var s=0;this.accumulator>=e&&s<i;)this.internalStep(e),this.time+=e,this.accumulator-=e,s++;for(var o=this.accumulator%e/e,r=0;r!==this.bodies.length;r++){var n=this.bodies[r];a.lerp(n.interpolatedPosition,n.previousPosition,n.position,o),n.interpolatedAngle=n.previousAngle+o*(n.angle-n.previousAngle)}}};var P=[];s.prototype.internalStep=function(e){this.stepping=!0;var t=this.springs.length,i=this.springs,o=this.bodies,r=this.gravity,n=this.solver,h=this.bodies.length,l=this.broadphase,p=this.narrowphase,c=this.constraints,u=k,g=(a.scale,a.add),m=(a.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=e,this.useWorldGravityAsFrictionGravity){var y=a.length(this.gravity);0===y&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=y)}if(this.applyGravity)for(x=0;x!==h;x++){var f=(w=o[x]).force;w.type===d.DYNAMIC&&w.sleepState!==d.SLEEPING&&(a.scale(u,r,w.mass*w.gravityScale),g(f,f,u))}if(this.applySpringForces)for(x=0;x!==t;x++)i[x].applyForce();if(this.applyDamping)for(x=0;x!==h;x++){var w=o[x];w.type===d.DYNAMIC&&w.applyDamping(e)}for(var v=l.getCollisionPairs(this),S=this.disabledBodyCollisionPairs,x=S.length-2;x>=0;x-=2)for(T=v.length-2;T>=0;T-=2)(S[x]===v[T]&&S[x+1]===v[T+1]||S[x+1]===v[T]&&S[x]===v[T+1])&&v.splice(T,2);X=c.length;for(x=0;x!==X;x++){var B=c[x];if(!B.collideConnected)for(var T=v.length-2;T>=0;T-=2)(B.bodyA===v[T]&&B.bodyB===v[T+1]||B.bodyB===v[T]&&B.bodyA===v[T+1])&&v.splice(T,2)}this.postBroadphaseEvent.pairs=v,this.emit(this.postBroadphaseEvent),this.postBroadphaseEvent.pairs=null,p.reset(this);for(var x=0,G=v.length;x!==G;x+=2)for(var C=v[x],A=v[x+1],M=0,I=C.shapes.length;M!==I;M++)for(var L=C.shapes[M],H=L.position,R=L.angle,D=0,O=A.shapes.length;D!==O;D++){var E=A.shapes[D],F=E.position,_=E.angle,j=this.defaultContactMaterial;if(L.material&&E.material){var W=this.getContactMaterial(L.material,E.material);W&&(j=W)}this.runNarrowphase(p,C,L,H,R,A,E,F,_,j,this.frictionGravity)}for(x=0;x!==h;x++)(N=o[x])._wakeUpAfterNarrowphase&&(N.wakeUp(),N._wakeUpAfterNarrowphase=!1);if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(P);for(var U=this.endContactEvent,D=P.length;D--;){var z=P[D];U.shapeA=z.shapeA,U.shapeB=z.shapeB,U.bodyA=z.bodyA,U.bodyB=z.bodyB,this.emit(U)}P.length=0}var V=this.preSolveEvent;V.contactEquations=p.contactEquations,V.frictionEquations=p.frictionEquations,this.emit(V),V.contactEquations=V.frictionEquations=null;var X=c.length;for(x=0;x!==X;x++)c[x].update();if(p.contactEquations.length||p.frictionEquations.length||X)if(this.islandSplit){for(m.equations.length=0,b.appendArray(m.equations,p.contactEquations),b.appendArray(m.equations,p.frictionEquations),x=0;x!==X;x++)b.appendArray(m.equations,c[x].equations);m.split(this);for(x=0;x!==m.islands.length;x++)(K=m.islands[x]).equations.length&&n.solveIsland(e,K)}else{for(n.addEquations(p.contactEquations),n.addEquations(p.frictionEquations),x=0;x!==X;x++)n.addEquations(c[x].equations);this.solveConstraints&&n.solve(e,this),n.removeAllEquations()}for(x=0;x!==h;x++){var N=o[x];N.integrate(e)}for(x=0;x!==h;x++)o[x].setZeroForce();if(this.emitImpactEvent&&this.has("impact"))for(var q=this.impactEvent,x=0;x!==p.contactEquations.length;x++){var Y=p.contactEquations[x];Y.firstImpact&&(q.bodyA=Y.bodyA,q.bodyB=Y.bodyB,q.shapeA=Y.shapeA,q.shapeB=Y.shapeB,q.contactEquation=Y,this.emit(q))}if(this.sleepMode===s.BODY_SLEEPING)for(x=0;x!==h;x++)o[x].sleepTick(this.time,!1,e);else if(this.sleepMode===s.ISLAND_SLEEPING&&this.islandSplit){for(x=0;x!==h;x++)o[x].sleepTick(this.time,!0,e);for(x=0;x<this.islandManager.islands.length;x++){var K=this.islandManager.islands[x];K.wantsToSleep()&&K.sleep()}}this.stepping=!1;for(var Z=this.bodiesToBeRemoved,x=0;x!==Z.length;x++)this.removeBody(Z[x]);Z.length=0,this.emit(this.postStepEvent)},s.prototype.runNarrowphase=function(e,t,i,s,o,r,n,h,l,p,c){if(0!=(i.collisionGroup&n.collisionMask)&&0!=(n.collisionGroup&i.collisionMask)){a.rotate(S,s,t.angle),a.rotate(x,h,r.angle),a.add(S,S,t.position),a.add(x,x,r.position);var u=o+t.angle,g=l+r.angle;e.enableFriction=p.friction>0,e.frictionCoefficient=p.friction;var m;m=t.type===d.STATIC||t.type===d.KINEMATIC?r.mass:r.type===d.STATIC||r.type===d.KINEMATIC?t.mass:t.mass*r.mass/(t.mass+r.mass),e.slipForce=p.friction*c*m,e.restitution=p.restitution,e.surfaceVelocity=p.surfaceVelocity,e.frictionStiffness=p.frictionStiffness,e.frictionRelaxation=p.frictionRelaxation,e.stiffness=p.stiffness,e.relaxation=p.relaxation,e.contactSkinSize=p.contactSkinSize,e.enabledEquations=t.collisionResponse&&r.collisionResponse&&i.collisionResponse&&n.collisionResponse;var y=e[i.type|n.type],f=0;if(y){var b=i.sensor||n.sensor,w=e.frictionEquations.length;f=i.type<n.type?y.call(e,t,i,S,u,r,n,x,g,b):y.call(e,r,n,x,g,t,i,S,u,b);var v=e.frictionEquations.length-w;if(f){if(t.allowSleep&&t.type===d.DYNAMIC&&t.sleepState===d.SLEEPING&&r.sleepState===d.AWAKE&&r.type!==d.STATIC&&a.squaredLength(r.velocity)+Math.pow(r.angularVelocity,2)>=2*Math.pow(r.sleepSpeedLimit,2)&&(t._wakeUpAfterNarrowphase=!0),r.allowSleep&&r.type===d.DYNAMIC&&r.sleepState===d.SLEEPING&&t.sleepState===d.AWAKE&&t.type!==d.STATIC&&a.squaredLength(t.velocity)+Math.pow(t.angularVelocity,2)>=2*Math.pow(t.sleepSpeedLimit,2)&&(r._wakeUpAfterNarrowphase=!0),this.overlapKeeper.setOverlapping(t,i,r,n),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(i,n)){var k=this.beginContactEvent;if(k.shapeA=i,k.shapeB=n,k.bodyA=t,k.bodyB=r,k.contactEquations.length=0,"number"==typeof f)for(P=e.contactEquations.length-f;P<e.contactEquations.length;P++)k.contactEquations.push(e.contactEquations[P]);this.emit(k)}if("number"==typeof f&&v>1)for(var P=e.frictionEquations.length-v;P<e.frictionEquations.length;P++){var B=e.frictionEquations[P];B.setSlipForce(B.getSlipForce()/v)}}}}},s.prototype.addSpring=function(e){this.springs.push(e);var t=this.addSpringEvent;t.spring=e,this.emit(t),t.spring=null},s.prototype.removeSpring=function(e){var t=this.springs.indexOf(e);-1!==t&&b.splice(this.springs,t,1)},s.prototype.addBody=function(e){if(-1===this.bodies.indexOf(e)){this.bodies.push(e),e.world=this;var t=this.addBodyEvent;t.body=e,this.emit(t),t.body=null}},s.prototype.removeBody=function(e){if(this.stepping)this.bodiesToBeRemoved.push(e);else{e.world=null;var t=this.bodies.indexOf(e);-1!==t&&(b.splice(this.bodies,t,1),this.removeBodyEvent.body=e,e.resetConstraintVelocity(),this.emit(this.removeBodyEvent),this.removeBodyEvent.body=null)}},s.prototype.getBodyById=function(e){for(var t=this.bodies,i=0;i<t.length;i++){var s=t[i];if(s.id===e)return s}return!1},s.prototype.disableBodyCollision=function(e,t){this.disabledBodyCollisionPairs.push(e,t)},s.prototype.enableBodyCollision=function(e,t){for(var i=this.disabledBodyCollisionPairs,s=0;s<i.length;s+=2)if(i[s]===e&&i[s+1]===t||i[s+1]===e&&i[s]===t)return void i.splice(s,2)},s.prototype.clear=function(){this.time=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var e=this.constraints,t=e.length-1;t>=0;t--)this.removeConstraint(e[t]);for(var i=this.bodies,t=i.length-1;t>=0;t--)this.removeBody(i[t]);for(var o=this.springs,t=o.length-1;t>=0;t--)this.removeSpring(o[t]);for(var a=this.contactMaterials,t=a.length-1;t>=0;t--)this.removeContactMaterial(a[t]);s.apply(this)};var B=a.create(),T=(a.fromValues(0,0),a.fromValues(0,0));s.prototype.hitTest=function(e,t,i){i=i||0;var s=new d({position:e}),o=new p,c=e,u=B,g=T;s.addShape(o);for(var m=this.narrowphase,y=[],f=0,b=t.length;f!==b;f++)for(var w=t[f],v=0,k=w.shapes.length;v!==k;v++){var S=w.shapes[v];a.rotate(u,S.position,w.angle),a.add(u,u,w.position);var x=S.angle+w.angle;(S instanceof r&&m.circleParticle(w,S,u,x,s,o,c,0,!0)||S instanceof n&&m.particleConvex(s,o,c,0,w,S,u,x,!0)||S instanceof h&&m.particlePlane(s,o,c,0,w,S,u,x,!0)||S instanceof l&&m.particleCapsule(s,o,c,0,w,S,u,x,!0)||S instanceof p&&a.squaredLength(a.sub(g,u,e))<i*i)&&y.push(w)}return y},s.prototype.setGlobalStiffness=function(e){for(var t=this.constraints,i=0;i!==t.length;i++)for(var s=t[i],o=0;o!==s.equations.length;o++){var a=s.equations[o];a.stiffness=e,a.needsUpdate=!0}for(var r=this.contactMaterials,i=0;i!==r.length;i++)(s=r[i]).stiffness=s.frictionStiffness=e;(s=this.defaultContactMaterial).stiffness=s.frictionStiffness=e},s.prototype.setGlobalRelaxation=function(e){for(o=0;o!==this.constraints.length;o++)for(var t=this.constraints[o],i=0;i!==t.equations.length;i++){var s=t.equations[i];s.relaxation=e,s.needsUpdate=!0}for(var o=0;o!==this.contactMaterials.length;o++)(t=this.contactMaterials[o]).relaxation=t.frictionRelaxation=e;(t=this.defaultContactMaterial).relaxation=t.frictionRelaxation=e};var G=new m,C=[];s.prototype.raycast=function(e,t){return t.getAABB(G),this.broadphase.aabbQuery(this,G,C),t.intersectBodies(e,C),C.length=0,e.hasHit()}},{"../../package.json":6,"../collision/AABB":7,"../collision/Broadphase":8,"../collision/Narrowphase":10,"../collision/Ray":11,"../collision/SAPBroadphase":13,"../constraints/Constraint":14,"../constraints/DistanceConstraint":15,"../constraints/GearConstraint":16,"../constraints/LockConstraint":17,"../constraints/PrismaticConstraint":18,"../constraints/RevoluteConstraint":19,"../events/EventEmitter":26,"../material/ContactMaterial":27,"../material/Material":28,"../math/vec2":30,"../objects/Body":31,"../objects/LinearSpring":32,"../objects/RotationalSpring":33,"../shapes/Capsule":38,"../shapes/Circle":39,"../shapes/Convex":40,"../shapes/Line":42,"../shapes/Particle":43,"../shapes/Plane":44,"../shapes/Shape":45,"../solver/GSSolver":46,"../solver/Solver":47,"../utils/OverlapKeeper":52,"../utils/Utils":57,"./IslandManager":59}]},{},[36])(36)});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),DisplayObjectContainer=function(e){function t(){var t=e.call(this)||this;return t.items={},t.neverFlush=!1,t.origX=0,t.origY=0,t.origPivot={x:0,y:0,compensate:!1},t.defaultPivot=!0,t.pooled=!1,t.pooledActive=!1,t}return __extends(t,e),t.prototype.addChild=function(t){e.prototype.addChild.call(this,t),this.addItem(t),1==this.pooled&&(this.pooledActive=!0)},t.prototype.addChildAt=function(t,i){e.prototype.addChildAt.call(this,t,i),this.addItem(t)},t.prototype.addItem=function(e){this.items[e.id]=e},t.prototype.removeFromItems=function(e){delete this.items[e.id]},t.prototype.getSpriteAt=function(e){var t=this.getChildAt(e);return this.resetItem(t)},t.prototype.showOnlyChild=function(e){if(this.children&&this.children.length>1)for(var t=this.children.length-1;t>=0;t--)this.getChildAt(t).visible=t==e},t.prototype.getSprite=function(e){var t=this.items[e];return this.resetItem(t)},t.prototype.getContainer=function(e){var t=this.items[e];return this.resetItem(t)},t.prototype.getSpine=function(e){var t=this.items[e];return this.resetItem(t)},t.prototype.getAnimatedSprite=function(e){var t=this.items[e];return this.resetItem(t)},t.prototype.resetItem=function(e){return null==e?null:(e.scale.x=1,e.scale.y=1,e.rotation=0,"number"==typeof e.origX&&(e.position.x=e.origX),"number"==typeof e.origY&&(e.position.y=e.origY),e.origAnchor&&("number"==typeof e.origAnchor.x&&(e.anchor.x=e.origAnchor.x),"number"==typeof e.origAnchor.y&&(e.anchor.y=e.origAnchor.y)),e.origPivot&&("number"==typeof e.origPivot.x&&(e.pivot.x=e.origPivot.x),"number"==typeof e.origPivot.y&&(e.pivot.y=e.origPivot.y)),"boolean"==typeof e.defaultAnchor&&0==e.defaultAnchor&&e.setRegPoint(e.origAnchor.x,e.origAnchor.y,e.origAnchor.compensate),"boolean"==typeof e.defaultPivot&&0==e.defaultPivot&&e.setRegPoint(e.origPivot.x,e.origPivot.y,e.origPivot.compensate),e)},t.prototype.getItemAt=function(e){return this.getChildAt(e)},t.prototype.destroy=function(){e.prototype.destroy.call(this,!0)},t.prototype.disposeAssets=function(){if(this.children&&this.children.length>0)for(var e=this.children.length-1;e>=0;e--)this.removeChild(this.getChildAt(e));for(var t in this.items)this.items[t]=null,delete this.items[t]},t.prototype.removeAllChildren=function(){for(var e=this.children.length-1;e>=0;e--)this.removeChild(this.getChildAt(e))},t.prototype.setRegPoint=function(e,t,i){var s=this.width*e,o=this.height*t;this.pivot.x=s,this.pivot.y=o,1==i&&(this.position.x+=s,this.position.y+=o,this.origPivot.compensate=!0)},t.prototype.setRegPointPixels=function(e,t,i){var s=this.pivot.x,o=this.pivot.y;if(this.pivot.x=e,this.pivot.y=t,1==i){var a=this.pivot.x-s,r=this.pivot.y-o,n=a*Math.cos(this.rotation)-r*Math.sin(this.rotation),h=r*Math.cos(this.rotation)+a*Math.sin(this.rotation);this.position.x+=n*this.scale.x,this.position.y+=h*this.scale.y}},t}(PIXI.Container);((_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window)._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var e=Math.PI/180,t=function(e,t,i,s,o){this.p=t,this.f="function"==typeof e[t],this.start=this.value=this.f?e[t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3)]():parseFloat(e[t]),this.velocity=i||0,this.v=this.velocity/o,s||0===s?(this.acceleration=s,this.a=this.acceleration/(o*o)):this.acceleration=this.a=0},i=Math.random(),s=_gsScope._gsDefine.globals,o=s.com.greensock.core.Animation._rootFramesTimeline,a=_gsScope._gsDefine.plugin({propName:"physics2D",version:"0.2.0",API:2,init:function(i,s,a,r){"function"==typeof s&&(s=s(r,i)),this._target=i,this._tween=a,this._runBackwards=!0===a.vars.runBackwards,this._step=0;for(var n,h=a._timeline,l=Number(s.angle)||0,p=Number(s.velocity)||0,c=Number(s.acceleration)||0,d=s.xProp||"x",u=s.yProp||"y",g=s.accelerationAngle||0===s.accelerationAngle?Number(s.accelerationAngle):l;h._timeline;)h=h._timeline;return this._stepsPerTimeUnit=n=h===o?1:30,s.gravity&&(c=Number(s.gravity),g=90),l*=e,g*=e,this._friction=1-Number(s.friction||0),this._overwriteProps.push(d),this._overwriteProps.push(u),this._x=new t(i,d,Math.cos(l)*p,Math.cos(g)*c,n),this._y=new t(i,u,Math.sin(l)*p,Math.sin(g)*c,n),this._skipX=this._skipY=!1,!0},set:function(e){var t,i,s,o,a,r,n=this._tween._time,h=this._x,l=this._y;if(!0===this._runBackwards&&(n=this._tween._duration-n),1===this._friction)s=n*n*.5,t=h.start+(h.velocity*n+h.acceleration*s),i=l.start+(l.velocity*n+l.acceleration*s);else{if(n*=this._stepsPerTimeUnit,o=r=(0|n)-this._step,a=n%1,r>=0)for(;--r>-1;)h.v+=h.a,l.v+=l.a,h.v*=this._friction,l.v*=this._friction,h.value+=h.v,l.value+=l.v;else for(r=-r;--r>-1;)h.value-=h.v,l.value-=l.v,h.v/=this._friction,l.v/=this._friction,h.v-=h.a,l.v-=l.a;t=h.value+h.v*a,i=l.value+l.v*a,this._step+=o}this._skipX||(h.m&&(t=h.m(t,this._target)),h.f?this._target[h.p](t):this._target[h.p]=t),this._skipY||(l.m&&(i=l.m(i,this._target)),l.f?this._target[l.p](i):this._target[l.p]=i)}}),r=a.prototype;r._kill=function(e){return null!=e[this._x.p]&&(this._skipX=!0),null!=e[this._y.p]&&(this._skipY=!0),this._super._kill.call(this,e)},r._mod=function(e){var t=e[this._x.p]||e.physics2D;t&&"function"==typeof t&&(this._x.m=t),(t=e[this._y.p]||e.physics2D)&&"function"==typeof t&&(this._y.m=t)},a._autoCSS=!0,a._cssRegister=function(){var e=s.CSSPlugin;if(e){var t=e._internals,o=t._parseToProxy,r=t._setPluginRatio,n=t.CSSPropTween;t._registerComplexSpecialProp("physics2D",{parser:function(e,t,s,h,l,p){p=new a;var c,d=t.xProp||"x",u=t.yProp||"y",g={};return g[d]=g[u]=i++,c=o(e,g,h,l,p),l=new n(e,"physics2D",0,0,c.pt,2),l.data=c,l.plugin=p,l.setRatio=r,p._onInitTween(c.proxy,t,h._tween),l}})}}}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e){"use strict";var t=function(){return(_gsScope.GreenSockGlobals||_gsScope).Physics2DPlugin};"function"==typeof define&&define.amd?define(["TweenLite"],t):"undefined"!=typeof module&&module.exports&&(require("../TweenLite.js"),module.exports=t())}();var visualAssets={"initial-loading-assets":[{id:"preloader/island-1",url:"preloader/island-1.png",anchor:[.5,.5]},{id:"preloader/island-2",url:"preloader/island-2.png",anchor:[.5,.5]},{id:"preloader/island-3",url:"preloader/island-3.png",anchor:[.5,.5]},{id:"preloader/island-4",url:"preloader/island-4.png",anchor:[.5,.5]},{id:"preloader/island-5",url:"preloader/island-5.png",anchor:[.5,.5]},{id:"preloader/island-1-shadow",url:"preloader/island-1-shadow.png",anchor:[.5,.5],pool:2},{id:"preloader/island-2-shadow",url:"preloader/island-2-shadow.png",anchor:[.5,.5],pool:2},{id:"preloader/island-3-shadow",url:"preloader/island-3-shadow.png",anchor:[.5,.5],pool:2},{id:"preloader/island-4-shadow",url:"preloader/island-4-shadow.png",anchor:[.5,.5],pool:2},{id:"preloader/island-5-shadow",url:"preloader/island-5-shadow.png",anchor:[.5,.5]},{id:"preloader/sky",url:"preloader/sky.png",anchor:[0,1]},{id:"preloader/night-sky",url:"preloader/night-sky.png",anchor:[0,1]},{id:"preloader/night-sea",url:"preloader/night-sea.png",anchor:[0,1]},{id:"preloader/day-sea",url:"preloader/day-sea.png",anchor:[0,1]},{id:"preloader/cloud",url:"preloader/cloud.png",anchor:[.5,.5],pool:10},{id:"preloader/stars",url:"preloader/stars.png",anchor:[.5,1]},{id:"preloader/sun-rise",url:"preloader/sun-rise.png",anchor:[.5,1],pool:2},{id:"preloader/sun",url:"preloader/sun.png",anchor:[.5,1]},{id:"preloader/moon-holder",children:[{id:"preloader/moon-background",url:"preloader/moon-background.png",anchor:[.5,1]}]},{id:"preloader/moon",url:"preloader/moon.png",anchor:[.5,.5]},{id:"preloader/loading-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"preloader/loading-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"preloader/loading-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"preloader-bar",anchor:[.5,.5],children:[{url:"preloader/loading-background.png"},{id:"bar-fill",url:"ui/preloader-bar.png",x:47,y:33}]}],"pause-assets-ice":[{id:"pause/pause-bg-left",url:"pause/pause-element-left-ice.png",anchor:[0,1]},{id:"pause/pause-bg-right",url:"pause/pause-element-right-ice.png",anchor:[1,1]}],"pause-assets-volcano":[{id:"pause/pause-bg-left",url:"pause/pause-element-left-volcano.png",anchor:[0,1]},{id:"pause/pause-bg-right",url:"pause/pause-element-right-volcano.png",anchor:[1,1]}],"pause-assets-beach":[{id:"pause/pause-bg-left",url:"pause/pause-element-left-beach.png",anchor:[0,1]},{id:"pause/pause-bg-right",url:"pause/pause-element-right-beach.png",anchor:[1,1]}],"pause-assets-jungle":[{id:"pause/pause-bg-left",url:"pause/pause-element-left-jungle.png",anchor:[0,1]},{id:"pause/pause-bg-right",url:"pause/pause-element-right-jungle.png",anchor:[1,1]}],"pause-assets-asteroid":[{id:"pause/pause-bg-left",url:"pause/pause-element-left-asteroid.png",anchor:[0,1]},{id:"pause/pause-bg-right",url:"pause/pause-element-right-asteroid.png",anchor:[1,1]}],global:[{neverFlush:!0},{id:"help-bg-tile",url:"global/help-bg-tile.png",pool:7},{id:"help-loading-circle",url:"global/help-loading-circle.png",anchor:[.5,.5]},{id:"help-overlay-grid-container",children:[]},{id:"help-overlay-grid-pixel",url:"global/tutorial-element-grid-pixel.png",pool:100},{id:"blank-element",url:"global/blank.png",retina:!1},{id:"pause-screen-overlay-container",children:[{id:"pause-overlay",url:"ui/paused-overlay.png",retina:!1}]},{id:"global/paused-title",url:"global/paused-title.png",anchor:[.5,.5],loc:!0,x:512,y:100},{id:"global/pause-panel-wood",url:"global/pause-panel-wood.png",pool:2},{id:"title-blank-input",url:"global/title-blank-input.png"},{id:"tutorial-element-bg",url:"global/tutorial-element-bg.png"},{id:"global/ticket-holder",children:[],pool:12},{id:"global/ticket",url:"global/ticket.png",anchor:[.5,.5],pool:10},{id:"global/ticket-glow",url:"global/ticket-glow.png",anchor:[.5,.5],pool:12},{id:"global/glow",url:"global/glow.png",anchor:[.5,.5],pool:12,retina:!1},{id:"global/heart",url:"global/heart.png",anchor:[.5,.5],pool:2,retina:!1},{id:"global/confetti-1",url:"global/confetti-1.png",pool:300,anchor:[.2,.2]},{id:"global/confetti-2",url:"global/confetti-2.png",pool:300,anchor:[.5,.5]},{id:"global/confetti-3",url:"global/confetti-3.png",pool:300,anchor:[.7,.7]},{id:"global/confetti-4",url:"global/confetti-4.png",pool:300,anchor:[.8,.3]},{id:"global/heart-confetti-1",url:"global/heart-confetti-1.png",pool:600,anchor:[.8,.3]},{id:"global/heart-confetti-2",url:"global/heart-confetti-2.png",pool:600,anchor:[.8,.3]},{id:"global/pause-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"global/pause-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"global/pause-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"}],"wristband-dialogue-assets":[{id:"global/wristbands/secondchance",url:"global/wristbands/secondchance.png",anchor:[.5,.5]},{id:"global/wristbands/tickets",url:"global/wristbands/tickets.png",anchor:[.5,.5]},{id:"global/wristbands/points",url:"global/wristbands/points.png",anchor:[.5,.5]},{id:"global/wristband-dialogue",children:[{url:"global/wristband-element-bg.png"},{id:"global/dialogue-panel",x:512,y:320,children:[{url:"global/dialogue.png",anchor:[.5,.5]},{url:"global/item-shadow.png",x:-175,y:140,anchor:[.5,.5]},{id:"global/sparkle",x:-180,y:0,children:[{url:"global/sparkle-glow.png",anchor:[.5,.5],retina:!1},{url:"global/sparkle-1.png",anchor:[.5,.5],retina:!1},{url:"global/sparkle-2.png",anchor:[.5,.5],retina:!1}]}]},{id:"global/gameover-sign",x:512,children:[{url:"global/gameover-sign.png",anchor:[.5,0]}]}]},{id:"global-dialogue-text",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"global-dialogue-description-text",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"global-dialogue-title-text",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"global-dialogue-text",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"global-dialogue-description-text",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"global-dialogue-title-text",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"global-dialogue-text",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"global-description-text",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"global-dialogue-title-text",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"}],"title-assets":[{id:"test-dm-filter",url:"title-scene/time-stop-displacement.png",platformspecific:"desktop"},{id:"title-scene/click-area",url:"title-scene/click-area.png",x:0,y:0,retina:!1},{id:"title-scene-main-holder",children:[]},{id:"title-scene/sky",url:"title-scene/sky.png",retina:!1},{id:"title-scene/bg-trees",url:"title-scene/bg-trees.png",x:512,y:285,anchor:[.5,.5],retina:!1},{id:"title-scene/bg-overlay-1",url:"title-scene/bg-overlay-1.png",x:512,y:399,anchor:[1,.5],retina:!1,pool:2},{id:"title-scene/bg-overlay-2",url:"title-scene/bg-overlay-2.png",x:512,y:399,anchor:[1,.5],retina:!1,pool:2},{id:"title-scene-sun-holder",x:512,y:312.5,children:[]},{id:"title-scene/sun",url:"title-scene/sun.png",x:0,y:86.5,anchor:[1,.5],retina:!1,pool:2},{id:"title-scene-sun-shine-large-holder",x:512,y:312.5,children:[]},{id:"title-scene/sun-shine-large",url:"title-scene/sun-shine-large.png",x:0,y:86.5,anchor:[1,.5],retina:!1,pool:2},{id:"title-scene-sun-shine-small-holder",x:512,y:312.5,children:[]},{id:"title-scene/sun-shine-small",url:"title-scene/sun-shine-small.png",x:0,y:86.5,anchor:[1,.5],retina:!1,pool:2},{id:"title-scene/cloud-left-1",url:"title-scene/cloud-left-1.png",x:95.5,y:29,anchor:[.5,.5]},{id:"title-scene/cloud-left-2",url:"title-scene/cloud-left-2.png",x:42.5,y:110,anchor:[.5,.5]},{id:"title-scene/cloud-right-1",url:"title-scene/cloud-right-1.png",x:917,y:-.5,anchor:[.5,.5]},{id:"title-scene/cloud-right-2",url:"title-scene/cloud-right-2.png",x:962.5,y:104,anchor:[.5,.5]},{id:"title-scene/mg-trees-1",url:"title-scene/mg-trees-1.png",x:512,y:312.5,anchor:[.5,.5],retina:!1},{id:"title-scene/mg-trees-2",url:"title-scene/mg-trees-2.png",x:512,y:312.5,anchor:[.5,.5],retina:!1},{id:"title-scene/mg-overlay",url:"title-scene/mg-overlay.png",x:512,y:312.5,anchor:[.5,.5],retina:!1},{id:"title-scene/bg-burst-1",url:"title-scene/bg-burst-1.png",x:383,y:243,anchor:[1,1],retina:!1},{id:"title-scene/bg-burst-2",url:"title-scene/bg-burst-2.png",x:363,y:309.5,anchor:[1,.5],retina:!1},{id:"title-scene/bg-burst-3",url:"title-scene/bg-burst-3.png",x:518,y:385,anchor:[1,0],retina:!1},{id:"title-scene/bg-burst-4",url:"title-scene/bg-burst-4.png",x:520,y:363,anchor:[0,0],retina:!1},{id:"title-scene/bg-burst-5",url:"title-scene/bg-burst-5.png",x:619,y:287.5,anchor:[0,.5],retina:!1},{id:"title-scene/bg-burst-6",url:"title-scene/bg-burst-6.png",x:619,y:219,anchor:[0,1],retina:!1},{id:"title-scene/fg-burst-1",url:"title-scene/fg-burst-1.png",x:442,y:242,anchor:[1,1],retina:!1},{id:"title-scene/fg-burst-2",url:"title-scene/fg-burst-2.png",x:412,y:307,anchor:[1,.5],retina:!1},{id:"title-scene/fg-burst-3",url:"title-scene/fg-burst-3.png",x:511,y:317,anchor:[1,0],retina:!1},{id:"title-scene/fg-burst-4",url:"title-scene/fg-burst-4.png",x:521,y:356,anchor:[0,0],retina:!1},{id:"title-scene/fg-burst-5",url:"title-scene/fg-burst-5.png",x:683,y:295,anchor:[0,.5],retina:!1},{id:"title-scene/fg-burst-6",url:"title-scene/fg-burst-6.png",x:559,y:240,anchor:[0,1],retina:!1},{id:"title-scene-boat-outer-holder",x:512,y:312.5,anchor:[1,0],children:[{id:"title-scene-boat-holder",x:344,y:231.5,anchor:[.7,.75],children:[{id:"title-scene/boat-froth",url:"title-scene/boat-froth.png",x:370,y:289.5,anchor:[.5,.5]},{id:"title-scene-boat-flag-holder",x:349,y:279,anchor:[0,1],children:[{id:"title-scene/boat-flag-pole",url:"title-scene/boat-flag-pole.png",x:0,y:0},{id:"title-scene/boat-flag",url:"title-scene/boat-flag.png",x:79,y:24,anchor:[.5,.5]}]},{id:"title-scene-boat-spongebob-holder",x:250,y:250,anchor:[.3,.8],children:[{id:"title-scene/boat-spongebob-arm-left",url:"title-scene/boat-spongebob-arm-left.png",x:78,y:59,anchor:[1,1]},{id:"title-scene/boat-spongebob-body",url:"title-scene/boat-spongebob-body.png",x:93.5,y:81,anchor:[.5,.5]},{id:"title-scene/boat-spongebob-arm-right",url:"title-scene/boat-spongebob-arm-right.png",x:165,y:72,anchor:[0,1]}]},{id:"title-scene/boat-cannon",url:"title-scene/boat-cannon.png",x:173,y:158,anchor:[.5,.7]},{id:"title-scene/boat",url:"title-scene/boat.png",x:196.5,y:214.5,anchor:[.5,.5]},{id:"title-scene/boat-froth-small",url:"title-scene/boat-froth-small.png",x:219,y:315.5,anchor:[.5,.5]},{id:"title-scene/boat-froth-medium",url:"title-scene/boat-froth-medium.png",x:211,y:296.5,anchor:[.5,.5]},{id:"title-scene/boat-froth-large",url:"title-scene/boat-froth-large.png",x:213,y:286,anchor:[.5,.5]}]}]},{id:"title-scene-buggy-outer-holder",x:512,y:312.5,anchor:[0,0],children:[{id:"title-scene-buggy-holder",x:231,y:226.5,anchor:[.2,.75],children:[{id:"title-scene/buggy-bars-back",url:"title-scene/buggy-bars-back.png",x:114.5,y:188,anchor:[.5,.5]},{id:"title-scene/buggy-seat",url:"title-scene/buggy-seat.png",x:105.5,y:239,anchor:[.5,.5]},{id:"title-scene/buggy-triple-g-arm-back",url:"title-scene/buggy-triple-g-arm-back.png",x:159,y:212.5,anchor:[.5,.5]},{id:"title-scene/buggy-triple-g-head",url:"title-scene/buggy-triple-g-head.png",x:106,y:198,anchor:[.8,.8]},{id:"title-scene/buggy-triple-g-arm-front",url:"title-scene/buggy-triple-g-arm-front.png",x:117.5,y:215.5,anchor:[.5,.5]},{id:"title-scene/buggy-bars-front",url:"title-scene/buggy-bars-front.png",x:158.5,y:187.5,anchor:[.5,.5]},{id:"title-scene/buggy-wheel-3",url:"title-scene/buggy-wheel-3.png",x:358,y:239.5,anchor:[.5,.5]},{id:"title-scene/buggy-wheel-3",url:"title-scene/buggy-wheel-3.png",x:358,y:239.5,anchor:[.5,.5]},{id:"title-scene/buggy",url:"title-scene/buggy.png",x:280.5,y:170.5,anchor:[.5,.5]},{id:"title-scene/buggy-wheel-2",url:"title-scene/buggy-wheel-2.png",x:173,y:301.5,anchor:[.5,.5]},{id:"title-scene/buggy-wheel-1",url:"title-scene/buggy-wheel-1.png",x:43,y:340.5,anchor:[.5,.5]}]}]},{id:"title-scene-ski-outer-holder",x:512,y:312.5,anchor:[1,.5],children:[{id:"title-scene-ski-holder",x:-60,y:155,anchor:[.7,.55],children:[{id:"title-scene/ski-froth-5",url:"title-scene/ski-froth-5.png",x:206.5,y:218.5,anchor:[.5,.5]},{id:"title-scene/ski-froth-6",url:"title-scene/ski-froth-6.png",x:216,y:227,anchor:[.3,.7]},{id:"title-scene/ski-tomika-arm-back",url:"title-scene/ski-tomika-arm-back.png",x:168.5,y:121,anchor:[.85,.85]},{id:"title-scene/ski-tomika-body",url:"title-scene/ski-tomika-body.png",x:180.5,y:138,anchor:[.5,.5]},{id:"title-scene/ski-tomika-hair",url:"title-scene/ski-tomika-hair.png",x:199,y:93.3,anchor:[.2,.25]},{id:"title-scene/ski-tomika-head",url:"title-scene/ski-tomika-head.png",x:187,y:94,anchor:[.45,.65]},{id:"title-scene/ski",url:"title-scene/ski.png",x:134,y:155,anchor:[.5,.5]},{id:"title-scene/ski-tomika-arm-front",url:"title-scene/ski-tomika-arm-front.png",x:201,y:126.5,anchor:[.9,.8]},{id:"title-scene/ski-froth-1",url:"title-scene/ski-froth-1.png",x:91,y:235,anchor:[.5,.5]},{id:"title-scene/ski-froth-2",url:"title-scene/ski-froth-2.png",x:88.5,y:227,anchor:[.5,.5]},{id:"title-scene/ski-froth-3",url:"title-scene/ski-froth-3.png",x:140,y:269,anchor:[.5,.5]},{id:"title-scene/ski-froth-4",url:"title-scene/ski-froth-4.png",x:140,y:260,anchor:[.5,.5]}]}]},{id:"title-scene-bumper-outer-holder",x:512,y:312.5,anchor:[0,.5],children:[{id:"title-scene-bumper-holder",x:364,y:120,anchor:[.4,.85],children:[{id:"title-scene/bumper-wire",url:"title-scene/bumper-wire.png",x:154,y:143,anchor:[1,1]},{id:"title-scene/bumper-back",url:"title-scene/bumper-back.png",x:260,y:132.5,anchor:[.5,.5]},{id:"title-scene/bumper-henry-body",url:"title-scene/bumper-henry-body.png",x:203,y:123,anchor:[.5,.5]},{id:"title-scene/bumper-front",url:"title-scene/bumper-front.png",x:292,y:127,anchor:[.5,.5]},{id:"title-scene/bumper-henry-head",url:"title-scene/bumper-henry-head.png",x:175,y:100,anchor:[.8,.8]},{id:"title-scene/bumper-henry-arm",url:"title-scene/bumper-henry-arm.png",x:189.5,y:106.5,anchor:[.5,.5]}]}]},{id:"title-scene-cart-outer-holder",x:512,y:312.5,anchor:[1,1],children:[{id:"title-scene-cart-holder",x:40,y:103,anchor:[.5,.5],children:[{id:"title-scene-cart-mike-holder",x:235.5,y:140.5,anchor:[.5,.5],children:[{id:"title-scene/cart-mike-body",url:"title-scene/cart-mike-body.png",x:61.5,y:48.5,anchor:[.5,.5]},{id:"title-scene/cart-mike-arm",url:"title-scene/cart-mike-arm.png",x:108,y:76,anchor:[.15,.2]},{id:"title-scene/cart-mike-head",url:"title-scene/cart-mike-head.png",x:102,y:46,anchor:[.4,.7]}]},{id:"title-scene/cart",url:"title-scene/cart.png",x:194.5,y:176,anchor:[.5,.5]},{id:"title-scene/cart-laser-glow",url:"title-scene/cart-laser-glow.png",x:104.5,y:78,anchor:[.5,.5]},{id:"title-scene/cart-laser",url:"title-scene/cart-laser.png",x:107,y:83,anchor:[.5,.5]}]}]},{id:"title-scene-jetpack-outer-holder",x:512,y:312.5,anchor:[0,1],children:[{id:"title-scene-jetpack-holder",x:350,y:-25,anchor:[.5,.5],children:[{id:"title-scene/jetpack-phoebe-hair",url:"title-scene/jetpack-phoebe-hair.png",x:240,y:109,anchor:[.95,.25]},{id:"title-scene/jetpack-water",url:"title-scene/jetpack-water.png",x:115,y:84,anchor:[1,0]},{id:"title-scene/jetpack-back",url:"title-scene/jetpack-back.png",x:122,y:73,anchor:[.5,.5]},{id:"title-scene/jetpack-phoebe-body",url:"title-scene/jetpack-phoebe-body.png",x:181.5,y:121.5,anchor:[.5,.5]},{id:"title-scene/jetpack-phoebe-head",url:"title-scene/jetpack-phoebe-head.png",x:196,y:96.5,anchor:[.6,.6]}]}]},{id:"title-scene-linc-outer-holder",x:512,y:312.5,anchor:[1,1],children:[{id:"title-scene-linc-holder",x:80,y:-60,anchor:[.5,.5],children:[{id:"title-scene/linc-leg-back",url:"title-scene/linc-leg-back.png",x:113.5,y:105.5,anchor:[.1,.1]},{id:"title-scene/linc-body",url:"title-scene/linc-body.png",x:94,y:76.5,anchor:[.5,.5]},{id:"title-scene/linc-leg-front",url:"title-scene/linc-leg-front.png",x:115,y:97,anchor:[0,0]},{id:"title-scene/linc-arm-front",url:"title-scene/linc-arm-front.png",x:100,y:82,anchor:[.7,.4]},{id:"title-scene-linc-head-holder",x:102,y:78,anchor:[.6,.9],children:[{id:"title-scene/linc-hair",url:"title-scene/linc-hair.png",x:75,y:24,anchor:[0,1]},{id:"title-scene/linc-head",url:"title-scene/linc-head.png",x:54,y:44,anchor:[.5,.5]},{id:"title-scene/linc-mouth",url:"title-scene/linc-mouth.png",x:55,y:59.5,anchor:[.5,.5]},{id:"title-scene/linc-eyebrows",url:"title-scene/linc-eyebrows.png",x:54.5,y:16,anchor:[.5,.5]}]}]}]},{id:"title-scene-click-anywhere-holder",x:507.5,y:541,children:[{id:"title-scene/click-anywhere-to-play-wood",url:"title-scene/click-anywhere-to-play-wood.png",x:.5,y:0,anchor:[.5,.5]},{id:"title-scene/click-anywhere-to-play",url:"title-scene/click-anywhere-to-play.png",x:4,y:-3.5,anchor:[.5,.5],loc:!0}]},{id:"title-scene/nick-logo",url:"title-scene/nick-logo.png",x:160,y:540,anchor:[.5,.5]},{id:"title-scene/logo",url:"title-scene/logo.png",x:496,y:301,anchor:[.48,.75]},{id:"title-scene/boat-burst",url:"title-scene/burst-particle-1.png",anchor:[.5,.5],pool:50},{id:"title-scene/boat-burst-holder",x:0,y:0,children:[]},{id:"title-scene/ski-burst",url:"title-scene/burst-particle-1.png",anchor:[.5,.5],pool:50},{id:"title-scene/ski-burst-holder",x:0,y:0,children:[]},{id:"title-scene/cart-burst",url:"title-scene/burst-particle-2.png",anchor:[.5,.5],pool:50},{id:"title-scene/cart-burst-holder",x:0,y:0,children:[]},{id:"title-scene/buggy-burst",url:"title-scene/burst-particle-3.png",anchor:[.5,.5],pool:50},{id:"title-scene/buggy-burst-holder",x:0,y:0,children:[]},{id:"title-scene/bumper-burst",url:"title-scene/burst-particle-2.png",anchor:[.5,.5],pool:50},{id:"title-scene/bumper-burst-holder",x:0,y:0,children:[]},{id:"title-scene/jetpack-burst",url:"title-scene/burst-particle-1.png",anchor:[.5,.5],pool:50},{id:"title-scene/jetpack-burst-holder",x:0,y:0,children:[]}],"hub-assets-full":[{id:"hub-scene/hub-touch-controls-chevron",url:"hub-scene/touch-controls-chevron.png",anchor:[.5,.5],pool:2},{id:"hub-blank-input",url:"hub-scene/hub-blank-input.png"},{id:"hub-scene/fade",url:"hub-scene/fade.png"},{id:"hub-scene/island-sign",x:512,y:60,children:[{url:"hub-scene/island-sign-rope.png",x:-130,y:-90},{url:"hub-scene/island-sign-rope.png",x:125,y:-90},{url:"hub-scene/island-sign.png",anchor:[.5,.5]}]},{id:"hub-scene/small-game-logo-holder",x:512,y:760,children:[{url:"hub-scene/game-logo-post.png",anchor:[.5,0],y:-35},{id:"hub-scene/small-game-logos",children:[{id:"hub-scene/small-game-logos/aqua-jetpack",url:"hub-scene/small-game-logos/aqua-jetpack.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/pin-ball",url:"hub-scene/small-game-logos/arctic-pinball.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/beach-buggy",url:"hub-scene/small-game-logos/beach-buggy-bash.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/coco-nutty",url:"hub-scene/small-game-logos/coco-nutty.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/dodgems",url:"hub-scene/small-game-logos/destruction-dodgems.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/roller-coaster-ice",url:"hub-scene/small-game-logos/ice-blast.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/jet-ski",url:"hub-scene/small-game-logos/jetski-scramble.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/laser-cave",url:"hub-scene/small-game-logos/laser-cave.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/mayan-madness",url:"hub-scene/small-game-logos/mayan-madness.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/river-rangers",url:"hub-scene/small-game-logos/river-rangers.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/roller-coaster-doom",url:"hub-scene/small-game-logos/rollercoaster-of-doom.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/tree-top-gladiators",url:"hub-scene/small-game-logos/treetop-gladiators.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/waterfall-wipeout",url:"hub-scene/small-game-logos/waterfall-wipeout.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/snowball-wars",url:"hub-scene/small-game-logos/snowball-wars.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/hover-drift",url:"hub-scene/small-game-logos/hover-drift.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/volcano-skydive",url:"hub-scene/small-game-logos/volcano-skydive.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/egg-scape",url:"hub-scene/small-game-logos/egg-scape.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/abducktion",url:"hub-scene/small-game-logos/abducktion.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/striker",url:"hub-scene/small-game-logos/striker.png",anchor:[.5,1]},{id:"hub-scene/small-game-logos/crazy-golf",url:"hub-scene/small-game-logos/gravity-golf.png",anchor:[.5,1]}]}]},{id:"hub-scene/intro-message-holder",x:512,y:412,children:[{url:"hub-scene/intro-message.png",anchor:[.5,.5],loc:!0}]},{id:"hub-scene/balloon-holder",children:[],pool:6},{url:"hub-scene/balloon.png",pool:6,anchor:[.5,.9]},{url:"hub-scene/balloon-string.png",pool:6,anchor:[.5,1]},{url:"hub-scene/blurry-cloud-1.png",anchor:[.5,.5],retina:!1,pool:3},{url:"hub-scene/blurry-cloud-2.png",anchor:[.5,.5],retina:!1,pool:3},{url:"hub-scene/blurry-cloud-3.png",anchor:[.5,.5],retina:!1,pool:3},{id:"hub-scene/cloud-holder-back",children:[]},{id:"hub-scene/cloud-holder-front",children:[]},{id:"hub-sign-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"hub-sign-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"hub-sign-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"hub-scene/characters-holder",x:740,y:380,children:[{id:"hub-scene/character-box-shadow",x:0,y:0,url:"hub-scene/character-box.png",anchor:[.5,.5]},{id:"hub-scene/character-box-arrow",x:-10,y:24,url:"hub-scene/character-box-arrow.png",anchor:[.5,.5]},{url:"hub-scene/character-box.png",anchor:[.5,.5]},{id:"hub-scene/characters",children:[{url:"hub-scene/characters/babe.png",anchor:[.5,.5]},{url:"hub-scene/characters/ggg.png",anchor:[.5,.5]},{url:"hub-scene/characters/henry.png",anchor:[.5,.5]},{url:"hub-scene/characters/hudson.png",anchor:[.5,.5]},{url:"hub-scene/characters/kenzie.png",anchor:[.5,.5]},{url:"hub-scene/characters/max.png",anchor:[.5,.5]},{url:"hub-scene/characters/phoebe.png",anchor:[.5,.5]},{url:"hub-scene/characters/spongebob.png",anchor:[.5,.5]},{url:"hub-scene/characters/patrick.png",anchor:[.5,.5]},{url:"hub-scene/characters/linc.png",anchor:[.5,.5]},{url:"hub-scene/characters/freddy.png",anchor:[.5,.5]},{url:"hub-scene/characters/lawrence.png",anchor:[.5,.5]},{url:"hub-scene/characters/summer.png",anchor:[.5,.5]},{url:"hub-scene/characters/tomika.png",anchor:[.5,.5]},{url:"hub-scene/characters/zack.png",anchor:[.5,.5]},{url:"hub-scene/characters/purple.png",anchor:[.5,.5]},{url:"hub-scene/characters/blue.png",anchor:[.5,.5]},{url:"hub-scene/characters/orange.png",anchor:[.5,.5]},{url:"hub-scene/characters/red.png",anchor:[.5,.5]},{url:"hub-scene/characters/nicky.png",anchor:[.5,.5]},{url:"hub-scene/characters/ricky.png",anchor:[.5,.5]},{url:"hub-scene/characters/dicky.png",anchor:[.5,.5]},{url:"hub-scene/characters/dawn.png",anchor:[.5,.5]},{url:"hub-scene/characters/frankie.png",anchor:[.5,.5]},{url:"hub-scene/characters/arc.png",anchor:[.5,.5]},{url:"hub-scene/characters/ciara.png",anchor:[.5,.5]},{url:"hub-scene/characters/prudence.png",anchor:[.5,.5]},{url:"hub-scene/characters/warwick.png",anchor:[.5,.5]},{url:"hub-scene/characters/lena.png",anchor:[.5,.5]},{url:"hub-scene/characters/henri.png",anchor:[.5,.5]},{url:"hub-scene/characters/blank-1.png",anchor:[.5,.5]},{url:"hub-scene/characters/blank-2.png",anchor:[.5,.5]}]}]},{id:"hub-scene/main-holder",x:512,y:312,children:[{id:"hub-scene/layers-holder",x:-512,y:-312,children:[{id:"hub-scene/sky-layer",children:[{id:"hub-scene/sky-chunk-1",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{id:"hub-scene/sun-1",url:"hub-scene/sun.png",x:880,y:120,anchor:[.5,.5]},{url:"hub-scene/cloud-small.png",x:100,y:120},{url:"hub-scene/cloud.png",x:500,y:180}]},{id:"hub-scene/sky-chunk-2",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{url:"hub-scene/cloud.png",x:120,y:200},{url:"hub-scene/cloud-small-tall.png",x:680,y:20}]},{id:"hub-scene/sky-chunk-3",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{id:"hub-scene/sun-2",url:"hub-scene/sun.png",x:880,y:120,anchor:[.5,.5]},{url:"hub-scene/cloud-small.png",x:100,y:120},{url:"hub-scene/cloud.png",x:500,y:180}]},{id:"hub-scene/sky-chunk-4",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{url:"hub-scene/cloud.png",x:120,y:200},{url:"hub-scene/cloud-small-tall.png",x:680,y:20}]},{id:"hub-scene/sky-chunk-5",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{url:"hub-scene/cloud.png",x:120,y:200},{url:"hub-scene/cloud-small-tall.png",x:680,y:20}]}]},{id:"hub-scene/islands-back-layer",children:[{id:"hub-scene/island-ice-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1},{url:"hub-scene/ice-island/back.png",x:580,y:200,anchor:[.5,0]}]},{id:"hub-scene/island-volcano-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1},{url:"hub-scene/volcano-island/back.png",x:525,y:210,anchor:[.5,0]}]},{id:"hub-scene/island-jungle-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1},{url:"hub-scene/jungle-island/back.png",x:490,y:170,anchor:[.5,0]}]},{id:"hub-scene/island-beach-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1},{url:"hub-scene/beach-island/back.png",x:560,y:250,anchor:[.5,0]}]},{id:"hub-scene/island-asteroid-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1},{url:"hub-scene/asteroid-island/back.png",x:470,y:80,anchor:[.5,0]}]}]},{id:"hub-scene/islands-layer",children:[{id:"hub-scene/island-ice",children:[{url:"hub-scene/stage-chunk.png",retina:!1},{id:"hub-scene/island-ice-inner",x:512,y:275,children:[{id:"hub-scene/ice-island/waves-1",url:"hub-scene/ice-island/waves.png",x:-20,y:395,anchor:[.5,0]},{id:"hub-scene/ice-island/waves-2",url:"hub-scene/ice-island/waves.png",x:-20,y:395,anchor:[.5,0]},{url:"hub-scene/ice-island/island.png",anchor:[.5,.5]},{id:"hub-scene/ice-island/hand",x:18,y:405,children:[{url:"hub-scene/ice-island/arm.png",anchor:[.5,1]},{url:"hub-scene/ice-island/hand.png",x:-9,y:-107,anchor:[.05,.8]}]}]}]},{id:"hub-scene/island-volcano",children:[{url:"hub-scene/stage-chunk.png",retina:!1},{id:"hub-scene/island-volcano-inner",x:525,y:325,children:[{id:"hub-scene/volcano-island/waves-1",url:"hub-scene/volcano-island/waves.png",y:300,anchor:[.5,0]},{id:"hub-scene/volcano-island/waves-2",url:"hub-scene/volcano-island/waves.png",y:300,anchor:[.5,0]},{url:"hub-scene/volcano-island/island_01.png",x:-1090,anchor:[0,.5]},{url:"hub-scene/volcano-island/island_02.png",x:-6,anchor:[0,.5]},{id:"hub-scene/volcano-island/hand",x:60,y:334,children:[{url:"hub-scene/volcano-island/arm.png",anchor:[.5,1]},{url:"hub-scene/volcano-island/hand.png",x:0,y:-93,anchor:[.95,.7]}]}]}]},{id:"hub-scene/island-jungle",children:[{url:"hub-scene/stage-chunk.png",retina:!1},{id:"hub-scene/island-jungle-inner",x:512,y:300,children:[{id:"hub-scene/jungle-island/waves-1",url:"hub-scene/jungle-island/waves.png",y:330,anchor:[.5,0]},{id:"hub-scene/jungle-island/waves-2",url:"hub-scene/jungle-island/waves.png",y:330,anchor:[.5,0]},{url:"hub-scene/jungle-island/island.png",anchor:[.5,.5]},{id:"hub-scene/jungle-island/hand",x:547,y:252,children:[{url:"hub-scene/jungle-island/arm.png",anchor:[.5,1]},{url:"hub-scene/jungle-island/hand.png",x:35,y:-99,anchor:[.82,.9]}]}]}]},{id:"hub-scene/island-beach",children:[{url:"hub-scene/stage-chunk.png",retina:!1},{id:"hub-scene/island-beach-inner",x:500,y:334,children:[{id:"hub-scene/beach-island/waves-1",url:"hub-scene/beach-island/waves.png",x:-90,y:110,anchor:[.5,0]},{id:"hub-scene/beach-island/waves-2",url:"hub-scene/beach-island/waves.png",x:-90,y:110,anchor:[.5,0]},{id:"hub-scene/beach-island/rings-1",url:"hub-scene/beach-island/rings.png",anchor:[.5,.5],x:794,y:180},{id:"hub-scene/beach-island/rings-2",url:"hub-scene/beach-island/rings.png",anchor:[.5,.5],x:852,y:174},{id:"hub-scene/beach-island/rings-3",url:"hub-scene/beach-island/rings.png",anchor:[.5,.5],x:900,y:199},{id:"hub-scene/beach-island/rings-4",url:"hub-scene/beach-island/rings.png",anchor:[.5,.5],x:956,y:184},{id:"hub-scene/beach-island/rings-5",url:"hub-scene/beach-island/rings.png",anchor:[.5,.5],x:1002,y:215},{id:"hub-scene/beach-island/rings-6",url:"hub-scene/beach-island/rings.png",anchor:[.5,.5],x:1068,y:192},{url:"hub-scene/beach-island/island_01.png",x:-1100,anchor:[0,.5]},{url:"hub-scene/beach-island/island_02.png",x:-3,anchor:[0,.5]},{id:"hub-scene/beach-island/hand",x:-423,y:127,children:[{url:"hub-scene/beach-island/arm.png",anchor:[.5,1]},{url:"hub-scene/beach-island/hand.png",x:-26,y:-103,anchor:[.1,.9]}]}]}]},{id:"hub-scene/island-asteroid",children:[{url:"hub-scene/stage-chunk.png",retina:!1},{id:"hub-scene/island-asteroid-inner",x:480,y:230,children:[{id:"hub-scene/asteroid-island/portal",y:700,children:[{url:"hub-scene/asteroid-island/portal-ring-2.png",y:20,anchor:[.45,.5]},{url:"hub-scene/asteroid-island/portal-ring-1.png",anchor:[.55,.5]},{url:"hub-scene/asteroid-island/portal-ring-3.png",y:45,anchor:[.45,.5]},{url:"hub-scene/asteroid-island/portal-ring-4.png",y:85,anchor:[.55,.5]}]},{url:"hub-scene/asteroid-island/island-shadow.png",y:740,anchor:[.5,.5]},{url:"hub-scene/asteroid-island/island.png",anchor:[.5,.5]},{id:"hub-scene/asteroid-island/waterfall-splash-left",x:-620,y:820,children:[]},{id:"hub-scene/asteroid-island/waterfall-splash-right",x:900,y:730,children:[]},{url:"hub-scene/asteroid-island/waterfall-left.png",x:-600,y:823,anchor:[.5,1]},{url:"hub-scene/asteroid-island/waterfall-right.png",x:900,y:736,anchor:[.5,1]},{url:"hub-scene/asteroid-island/island-front-left.png",x:-674,y:48},{url:"hub-scene/asteroid-island/island-front-right.png",x:843,y:-15}]}]}]},{id:"hub-scene/foreground-layer-1",children:[{id:"hub-scene/island-ice-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1},{url:"hub-scene/ice-island/foreground-island-1.png",x:80,y:10,anchor:[.5,.5]},{url:"hub-scene/ice-island/foreground-island-3.png",x:970,anchor:[.5,.5]}]},{id:"hub-scene/island-volcano-foreground",y:450,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1},{url:"hub-scene/volcano-island/foreground-island-1.png",x:100,y:0,anchor:[.5,.5]},{url:"hub-scene/volcano-island/foreground-island-2.png",x:970,y:10,anchor:[.5,.5]}]},{id:"hub-scene/island-jungle-foreground",y:470,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1},{url:"hub-scene/jungle-island/foreground-island-2.png",x:950,y:-20,anchor:[.5,.5]},{url:"hub-scene/jungle-island/foreground-island-3.png",x:110,y:10,anchor:[.5,.5]}]},{id:"hub-scene/island-beach-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1},{url:"hub-scene/beach-island/foreground-island-1.png",x:90,anchor:[.5,.5]},{url:"hub-scene/beach-island/foreground-island-2.png",x:940,y:20,anchor:[.5,.5]}]},{id:"hub-scene/island-asteroid-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1},{id:"hub-scene/asteroid-island/foreground-island-1",x:60,y:-120,children:[{url:"hub-scene/asteroid-island/foreground-island-1-shadow.png",y:170,anchor:[.5,.5]},{url:"hub-scene/asteroid-island/foreground-island-1.png",anchor:[.5,.5]}]},{id:"hub-scene/asteroid-island/hand",x:650,y:-90,children:[{id:"hub-scene/asteroid-island/hand-inner",children:[{url:"hub-scene/asteroid-island/hand-island.png",x:-4,y:62,anchor:[.5,.5]},{id:"hub-scene/asteroid-island/hand",children:[{url:"hub-scene/asteroid-island/arm.png",anchor:[.5,1]},{url:"hub-scene/asteroid-island/hand.png",x:25,y:-96,anchor:[.9,.93]}]}]}]},{id:"hub-scene/asteroid-island/foreground-island-3",x:930,y:-100,children:[{url:"hub-scene/asteroid-island/foreground-island-3-shadow.png",y:160,anchor:[.5,.5]},{url:"hub-scene/asteroid-island/foreground-island-3.png",anchor:[.5,.5]}]}]}]},{id:"hub-scene/foreground-layer-2",children:[{id:"hub-scene/island-ice-foreground2",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1},{url:"hub-scene/ice-island/foreground-island-2.png",x:540,y:50,anchor:[.5,.5]}]},{id:"hub-scene/island-volcano-foreground2",y:470,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1},{url:"hub-scene/volcano-island/foreground-island-3.png",x:450,y:50,anchor:[.5,.5]}]},{id:"hub-scene/island-jungle-foreground2",y:490,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1},{url:"hub-scene/jungle-island/foreground-island-1.png",x:520,y:80,anchor:[.5,.5]}]},{id:"hub-scene/island-beach-foreground2",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1},{url:"hub-scene/beach-island/foreground-island-3.png",x:540,y:80,anchor:[.5,.5]}]},{id:"hub-scene/island-asteroid-foreground2",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1},{id:"hub-scene/asteroid-island/foreground-island-2",x:480,y:10,children:[{url:"hub-scene/asteroid-island/foreground-island-2-shadow.png",y:150,anchor:[.5,.5]},{url:"hub-scene/asteroid-island/foreground-island-2.png",anchor:[.5,.5]}]}]}]}]}]},{id:"hub-scene/framed-animations/fish-jump",x:100,y:50,anchor:[.5,.5],type:"spritesheet",dir:"hub-scene/framed-animations/fish-jump",atlas:"fish-jump.json",frames:["fish-f1.png","fish-f2.png","fish-f3.png","fish-f4.png","fish-f5.png","fish-f6.png","fish-f7.png","fish-f8.png","fish-f9.png"]},{id:"hub-scene/framed-animations/whale-surface",x:100,y:50,anchor:[.5,.5],type:"spritesheet",dir:"hub-scene/framed-animations/whale-surface",atlas:"whale-surface.json",frames:["whale-f1.png","whale-f2.png","whale-f3.png","whale-f4.png","whale-f5.png","whale-f6.png","whale-f7.png","whale-f8.png","whale-f9.png","whale-f10.png","whale-f11.png","whale-f12.png","whale-f13.png","whale-f14.png","whale-f15.png","whale-f16.png","whale-f17.png","whale-f18.png","whale-f19.png","whale-f20.png","whale-f21.png","whale-f22.png","whale-f23.png","whale-f24.png"]},{id:"hub-scene/framed-animations/dolphin-jump",x:100,y:50,anchor:[.5,.5],type:"spritesheet",dir:"hub-scene/framed-animations/dolphin-jump",atlas:"dolphin-jump.json",frames:["dolphin-f1.png","dolphin-f2.png","dolphin-f3.png","dolphin-f4.png","dolphin-f5.png","dolphin-f6.png","dolphin-f7.png","dolphin-f8.png"]},{id:"hub-scene/framed-animations/waterfall",x:0,y:0,anchor:[.5,.5],pool:4,type:"spritesheet",dir:"hub-scene/framed-animations/waterfall",atlas:"waterfall.json",frames:["waterfall-frame-1.png","waterfall-frame-2.png","waterfall-frame-3.png","waterfall-frame-4.png"]},{url:"hub-scene/asteroid-island/waterfall-splash.png",pool:10,anchor:[.4,.4]},{id:"hub-scene/marker-holder",children:[],pool:20},{id:"hub-scene/marker",url:"hub-scene/marker.png",anchor:[.5,1],pool:20},{id:"hub-scene/marker-shadow",url:"hub-scene/marker-shadow.png",anchor:[.5,.5],pool:20},{id:"hub-scene/brand-box",url:"hub-scene/brand-box.png",anchor:[.5,1],pool:20},{id:"hub-scene/brand-box-2",url:"hub-scene/brand-box-2.png",anchor:[.5,1],pool:20},{id:"hub-scene/brand-box-back",url:"hub-scene/brand-box-back.png",anchor:[.5,1],pool:20},{id:"hub-scene/brand-box-nail",url:"hub-scene/brand-box-nail.png",x:0,y:0,anchor:[.5,.5],pool:20},{id:"hub-scene/brand-box-coming-soon",url:"hub-scene/brand-box-coming-soon.png",x:0,y:0,anchor:[.5,0],pool:20,loc:!0},{id:"hub-scene/new-star",url:"hub-scene/marker-new-star.png",anchor:[.5,.5],pool:20},{id:"hub-scene/new-star-shadow",url:"hub-scene/marker-new-star-shadow.png",anchor:[.5,.5],pool:20},{id:"hub-scene/new-text",url:"hub-scene/marker-new-text.png",loc:!0,anchor:[.5,.5],pool:20},{id:"hub-scene/new-icon-holder",children:[],pool:20},{id:"hub-scene/brand-logos/game-shakers",url:"hub-scene/brand-logos/game-shakers.png",y:-52,anchor:[.5,1.1],pool:3},{id:"hub-scene/brand-logos/henry-danger",url:"hub-scene/brand-logos/henry-danger.png",y:-53,anchor:[.5,1.1],pool:3},{id:"hub-scene/brand-logos/loud-house",url:"hub-scene/brand-logos/loud-house.png",y:-47,anchor:[.5,1.1],pool:2},{id:"hub-scene/brand-logos/nicky-ricky-dicky-dawn",url:"hub-scene/brand-logos/nicky-ricky-dicky-dawn.png",y:-46,anchor:[.5,1.1],pool:2},{id:"hub-scene/brand-logos/school-of-rock",url:"hub-scene/brand-logos/school-of-rock.png",y:-53,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/spongebob",url:"hub-scene/brand-logos/spongebob.png",y:-53,anchor:[.5,1.1],pool:2},{id:"hub-scene/brand-logos/thundermans",url:"hub-scene/brand-logos/thundermans.png",y:-60,anchor:[.5,1.1],pool:2},{id:"hub-scene/brand-logos/turtles",url:"hub-scene/brand-logos/turtles.png",y:-50,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/i-am-frankie",url:"hub-scene/brand-logos/i-am-frankie.png",y:-53,anchor:[.5,1.1],pool:2},{id:"hub-scene/brand-logos/find-me-in-paris",url:"hub-scene/brand-logos/find-me-in-paris.png",y:-50,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/knight-squad",url:"hub-scene/brand-logos/knight-squad.png",y:-40,pool:4,anchor:[.5,1.1]},{id:"hub-scene/game-logos/logo-holder",x:512,y:145,children:[{id:"hub-scene/game-logos/aqua-jetpack",children:[{id:"hub-scene/game-logos/aqua-jetpack-logo",url:"hub-scene/game-logos/aqua-jetpack.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/aqua-jetpack-shadow",url:"hub-scene/game-logos/aqua-jetpack.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/pin-ball",children:[{id:"hub-scene/game-logos/pin-ball-logo",url:"hub-scene/game-logos/arctic-pinball.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/pin-ball-shadow",url:"hub-scene/game-logos/arctic-pinball.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/beach-buggy",children:[{id:"hub-scene/game-logos/beach-buggy-logo",url:"hub-scene/game-logos/beach-buggy-bash.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/beach-buggy-shadow",url:"hub-scene/game-logos/beach-buggy-bash.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/coco-nutty",children:[{id:"hub-scene/game-logos/coco-nutty-logo",url:"hub-scene/game-logos/coco-nutty.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/coco-nutty-shadow",url:"hub-scene/game-logos/coco-nutty.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/dodgems",children:[{id:"hub-scene/game-logos/dodgems-logo",url:"hub-scene/game-logos/destruction-dodgems.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/dodgems-shadow",url:"hub-scene/game-logos/destruction-dodgems.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/roller-coaster-ice",children:[{id:"hub-scene/game-logos/roller-coaster-ice-logo",url:"hub-scene/game-logos/ice-blast.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/roller-coaster-ice-shadow",url:"hub-scene/game-logos/ice-blast.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/jet-ski",children:[{id:"hub-scene/game-logos/jet-ski-logo",url:"hub-scene/game-logos/jetski-scramble.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/jet-ski-shadow",url:"hub-scene/game-logos/jetski-scramble.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/laser-cave",children:[{id:"hub-scene/game-logos/laser-cave-logo",url:"hub-scene/game-logos/laser-cave.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/laser-cave-shadow",url:"hub-scene/game-logos/laser-cave.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/mayan-madness",children:[{id:"hub-scene/game-logos/mayan-madness-logo",url:"hub-scene/game-logos/mayan-madness.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/mayan-madness-shadow",url:"hub-scene/game-logos/mayan-madness.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/river-rangers",children:[{id:"hub-scene/game-logos/river-rangers-logo",url:"hub-scene/game-logos/river-rangers.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/river-rangers-shadow",url:"hub-scene/game-logos/river-rangers.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/roller-coaster-doom",children:[{id:"hub-scene/game-logos/roller-coaster-doom-logo",url:"hub-scene/game-logos/rollercoaster-of-doom.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/roller-coaster-doom-shadow",url:"hub-scene/game-logos/rollercoaster-of-doom.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/tree-top-gladiators",children:[{id:"hub-scene/game-logos/tree-top-gladiators-logo",url:"hub-scene/game-logos/treetop-gladiators.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/tree-top-gladiators-shadow",url:"hub-scene/game-logos/treetop-gladiators.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/waterfall-wipeout",children:[{id:"hub-scene/game-logos/waterfall-wipeout-logo",url:"hub-scene/game-logos/waterfall-wipeout.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/waterfall-wipeout-shadow",url:"hub-scene/game-logos/waterfall-wipeout.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/snowball-wars",children:[{id:"hub-scene/game-logos/snowball-wars-logo",url:"hub-scene/game-logos/snowball-wars.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/snowball-wars-shadow",url:"hub-scene/game-logos/snowball-wars.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/hover-drift",children:[{id:"hub-scene/game-logos/hover-drift-logo",url:"hub-scene/game-logos/hover-drift.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/hover-drift-shadow",url:"hub-scene/game-logos/hover-drift.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/volcano-skydive",children:[{id:"hub-scene/game-logos/volcano-skydive-logo",url:"hub-scene/game-logos/volcano-skydive.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/volcano-skydive-shadow",url:"hub-scene/game-logos/volcano-skydive.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/egg-scape",children:[{id:"hub-scene/game-logos/egg-scape-logo",url:"hub-scene/game-logos/egg-scape.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/egg-scape-shadow",url:"hub-scene/game-logos/egg-scape.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/striker",children:[{id:"hub-scene/game-logos/striker-logo",url:"hub-scene/game-logos/striker.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/striker-shadow",url:"hub-scene/game-logos/striker.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/abducktion",children:[{id:"hub-scene/game-logos/abducktion-logo",url:"hub-scene/game-logos/abducktion.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/abducktion-shadow",url:"hub-scene/game-logos/abducktion.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/crazy-golf",children:[{id:"hub-scene/game-logos/crazy-golf-logo",url:"hub-scene/game-logos/gravity-golf.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/crazy-golf-shadow",url:"hub-scene/game-logos/gravity-golf.png",anchor:[.5,.5]}]}]},{id:"hub-scene/click-to-play",url:"hub-scene/click-to-play.png",anchor:[.5,1],x:512,y:720}],"hub-assets-ice":[{id:"hub-blank-input",url:"hub-scene/hub-blank-input.png"},{id:"hub-scene/fade",url:"hub-scene/fade.png"},{id:"hub-scene/characters-holder",x:740,y:380,children:[{id:"hub-scene/character-box-shadow",x:0,y:0,url:"hub-scene/character-box.png",anchor:[.5,.5]},{id:"hub-scene/character-box-arrow",x:-10,y:24,url:"hub-scene/character-box-arrow.png",anchor:[.5,.5]},{url:"hub-scene/character-box.png",anchor:[.5,.5]},{id:"hub-scene/characters",children:[{url:"hub-scene/characters/babe.png",anchor:[.5,.5]},{url:"hub-scene/characters/ggg.png",anchor:[.5,.5]},{url:"hub-scene/characters/henry.png",anchor:[.5,.5]},{url:"hub-scene/characters/hudson.png",anchor:[.5,.5]},{url:"hub-scene/characters/kenzie.png",anchor:[.5,.5]},{url:"hub-scene/characters/max.png",anchor:[.5,.5]},{url:"hub-scene/characters/phoebe.png",anchor:[.5,.5]},{url:"hub-scene/characters/spongebob.png",anchor:[.5,.5]},{url:"hub-scene/characters/patrick.png",anchor:[.5,.5]},{url:"hub-scene/characters/linc.png",anchor:[.5,.5]}]}]},{id:"hub-scene/main-holder",x:512,y:312,children:[{id:"hub-scene/layers-holder",x:-512,y:-312,children:[{id:"hub-scene/sky-layer",children:[{id:"hub-scene/sky-chunk-1",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{id:"hub-scene/sun-1",url:"hub-scene/sun.png",x:880,y:120,anchor:[.5,.5]},{url:"hub-scene/cloud-small.png",x:100,y:120},{url:"hub-scene/cloud.png",x:500,y:180}]},{id:"hub-scene/sky-chunk-2",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{url:"hub-scene/cloud.png",x:120,y:200},{url:"hub-scene/cloud-small-tall.png",x:680,y:20}]},{id:"hub-scene/sky-chunk-3",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{id:"hub-scene/sun-2",url:"hub-scene/sun.png",x:880,y:120,anchor:[.5,.5]},{url:"hub-scene/cloud-small.png",x:100,y:120},{url:"hub-scene/cloud.png",x:500,y:180}]},{id:"hub-scene/sky-chunk-4",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{url:"hub-scene/cloud.png",x:120,y:200},{url:"hub-scene/cloud-small-tall.png",x:680,y:20}]}]},{id:"hub-scene/islands-back-layer",children:[{id:"hub-scene/island-ice-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1},{url:"hub-scene/ice-island/back.png",x:580,y:200,anchor:[.5,0]}]},{id:"hub-scene/island-volcano-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]},{id:"hub-scene/island-jungle-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]},{id:"hub-scene/island-beach-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]},{id:"hub-scene/island-asteroid-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]}]},{id:"hub-scene/islands-layer",children:[{id:"hub-scene/island-ice",children:[{url:"hub-scene/stage-chunk.png",retina:!1},{id:"hub-scene/island-ice-inner",x:512,y:275,children:[{id:"hub-scene/ice-island/waves-1",url:"hub-scene/ice-island/waves.png",x:-20,y:395,anchor:[.5,0]},{id:"hub-scene/ice-island/waves-2",url:"hub-scene/ice-island/waves.png",x:-20,y:395,anchor:[.5,0]},{url:"hub-scene/ice-island/island.png",anchor:[.5,.5]},{id:"hub-scene/ice-island/hand",x:18,y:405,children:[{url:"hub-scene/ice-island/arm.png",anchor:[.5,1]},{url:"hub-scene/ice-island/hand.png",x:-9,y:-107,anchor:[.05,.8]}]}]}]},{id:"hub-scene/island-volcano",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]},{id:"hub-scene/island-jungle",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]},{id:"hub-scene/island-beach",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]},{id:"hub-scene/island-asteroid",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]}]},{id:"hub-scene/foreground-layer-1",children:[{id:"hub-scene/island-ice-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1},{url:"hub-scene/ice-island/foreground-island-1.png",x:30,y:0,anchor:[.5,.5]},{url:"hub-scene/ice-island/foreground-island-3.png",x:950,anchor:[.5,.5]}]},{id:"hub-scene/island-volcano-foreground",y:450,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]},{id:"hub-scene/island-jungle-foreground",y:470,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]},{id:"hub-scene/island-beach-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]},{id:"hub-scene/island-asteroid-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]}]},{id:"hub-scene/foreground-layer-2",children:[{id:"hub-scene/island-ice-foreground",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1},{url:"hub-scene/ice-island/foreground-island-2.png",x:600,y:50,anchor:[.5,.5]}]},{id:"hub-scene/island-volcano-foreground",y:470,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]},{id:"hub-scene/island-jungle-foreground",y:490,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]},{id:"hub-scene/island-beach-foreground",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1},{url:"hub-scene/beach-island/foreground-island-3.png",x:400,y:80,anchor:[.5,.5]}]},{id:"hub-scene/island-asteroid-foreground",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1},{url:"hub-scene/asteroid-island/foreground-island-3.png",x:400,y:80,anchor:[.5,.5]}]}]}]}]},{id:"hub-scene/marker-holder",children:[],pool:4},{id:"hub-scene/marker",url:"hub-scene/marker.png",anchor:[.5,1],pool:4},{id:"hub-scene/marker-shadow",url:"hub-scene/marker-shadow.png",anchor:[.5,.5],pool:4},{id:"hub-scene/brand-box",url:"hub-scene/brand-box.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-back",url:"hub-scene/brand-box-back.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-2",url:"hub-scene/brand-box-2.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-back",url:"hub-scene/brand-box-back.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-nail",url:"hub-scene/brand-box-nail.png",x:0,y:0,anchor:[.5,.5],pool:4},{id:"hub-scene/brand-box-coming-soon",url:"hub-scene/brand-box-coming-soon.png",x:0,y:0,anchor:[.5,0],pool:4,loc:!0},{id:"hub-scene/new-star",url:"hub-scene/marker-new-star.png",anchor:[.5,.5],pool:4},{id:"hub-scene/new-star-shadow",url:"hub-scene/marker-new-star-shadow.png",anchor:[.5,.5],pool:4},{id:"hub-scene/new-text",url:"hub-scene/marker-new-text.png",loc:!0,anchor:[.5,.5],pool:4},{id:"hub-scene/new-icon-holder",children:[],pool:4},{id:"hub-scene/brand-logos/game-shakers",url:"hub-scene/brand-logos/game-shakers.png",y:-52,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/henry-danger",url:"hub-scene/brand-logos/henry-danger.png",y:-53,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/spongebob",url:"hub-scene/brand-logos/spongebob.png",y:-53,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/loud-house",url:"hub-scene/brand-logos/loud-house.png",y:-47,anchor:[.5,1.1],pool:2},{id:"hub-scene/game-logos/logo-holder",x:512,y:145,children:[{id:"hub-scene/game-logos/pin-ball",children:[{id:"hub-scene/game-logos/pin-ball-logo",url:"hub-scene/game-logos/arctic-pinball.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/pin-ball-shadow",url:"hub-scene/game-logos/arctic-pinball.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/dodgems",children:[{id:"hub-scene/game-logos/dodgems-logo",url:"hub-scene/game-logos/destruction-dodgems.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/dodgems-shadow",url:"hub-scene/game-logos/destruction-dodgems.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/roller-coaster-ice",children:[{id:"hub-scene/game-logos/roller-coaster-ice-logo",url:"hub-scene/game-logos/ice-blast.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/roller-coaster-ice-shadow",url:"hub-scene/game-logos/ice-blast.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/snowball-wars",children:[{id:"hub-scene/game-logos/snowball-wars-logo",url:"hub-scene/game-logos/snowball-wars.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/snowball-wars-shadow",url:"hub-scene/game-logos/snowball-wars.png",anchor:[.5,.5]}]}]},{id:"hub-scene/click-to-play",url:"hub-scene/click-to-play.png",anchor:[.5,1],x:512,y:720}],"hub-assets-volcano":[{id:"hub-blank-input",url:"hub-scene/hub-blank-input.png"},{id:"hub-scene/fade",url:"hub-scene/fade.png"},{id:"hub-scene/characters-holder",x:740,y:380,children:[{id:"hub-scene/character-box-shadow",x:0,y:0,url:"hub-scene/character-box.png",anchor:[.5,.5]},{id:"hub-scene/character-box-arrow",x:-10,y:24,url:"hub-scene/character-box-arrow.png",anchor:[.5,.5]},{url:"hub-scene/character-box.png",anchor:[.5,.5]},{id:"hub-scene/characters",children:[{url:"hub-scene/characters/babe.png",anchor:[.5,.5]},{url:"hub-scene/characters/ggg.png",anchor:[.5,.5]},{url:"hub-scene/characters/henry.png",anchor:[.5,.5]},{url:"hub-scene/characters/hudson.png",anchor:[.5,.5]},{url:"hub-scene/characters/kenzie.png",anchor:[.5,.5]},{url:"hub-scene/characters/max.png",anchor:[.5,.5]},{url:"hub-scene/characters/phoebe.png",anchor:[.5,.5]},{url:"hub-scene/characters/spongebob.png",anchor:[.5,.5]},{url:"hub-scene/characters/purple.png",anchor:[.5,.5]},{url:"hub-scene/characters/blue.png",anchor:[.5,.5]},{url:"hub-scene/characters/orange.png",anchor:[.5,.5]},{url:"hub-scene/characters/red.png",anchor:[.5,.5]},{url:"hub-scene/characters/lena.png",anchor:[.5,.5]},{url:"hub-scene/characters/henri.png",anchor:[.5,.5]},{url:"hub-scene/characters/blank-1.png",anchor:[.5,.5]},{url:"hub-scene/characters/blank-2.png",anchor:[.5,.5]}]}]},{id:"hub-scene/main-holder",x:512,y:312,children:[{id:"hub-scene/layers-holder",x:-512,y:-312,children:[{id:"hub-scene/sky-layer",children:[{id:"hub-scene/sky-chunk-1",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{id:"hub-scene/sun-1",url:"hub-scene/sun.png",x:880,y:120,anchor:[.5,.5]},{url:"hub-scene/cloud-small.png",x:100,y:120},{url:"hub-scene/cloud.png",x:500,y:180}]},{id:"hub-scene/sky-chunk-2",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{url:"hub-scene/cloud.png",x:120,y:200},{url:"hub-scene/cloud-small-tall.png",x:680,y:20}]},{id:"hub-scene/sky-chunk-3",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{id:"hub-scene/sun-2",url:"hub-scene/sun.png",x:880,y:120,anchor:[.5,.5]},{url:"hub-scene/cloud-small.png",x:100,y:120},{url:"hub-scene/cloud.png",x:500,y:180}]},{id:"hub-scene/sky-chunk-4",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{url:"hub-scene/cloud.png",x:120,y:200},{url:"hub-scene/cloud-small-tall.png",x:680,y:20}]}]},{id:"hub-scene/islands-back-layer",children:[{id:"hub-scene/island-ice-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]},{id:"hub-scene/island-volcano-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1},{url:"hub-scene/volcano-island/back.png",x:525,y:210,anchor:[.5,0]}]},{id:"hub-scene/island-jungle-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]},{id:"hub-scene/island-beach-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]},{id:"hub-scene/island-asteroid-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]}]},{id:"hub-scene/islands-layer",children:[{id:"hub-scene/island-ice",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]},{id:"hub-scene/island-volcano",children:[{url:"hub-scene/stage-chunk.png",retina:!1},{id:"hub-scene/island-volcano-inner",x:525,y:325,children:[{id:"hub-scene/volcano-island/waves-1",url:"hub-scene/volcano-island/waves.png",y:300,anchor:[.5,0]},{id:"hub-scene/volcano-island/waves-2",url:"hub-scene/volcano-island/waves.png",y:300,anchor:[.5,0]},{url:"hub-scene/volcano-island/island_01.png",x:-1090,anchor:[0,.5]},{url:"hub-scene/volcano-island/island_02.png",x:-6,anchor:[0,.5]},{id:"hub-scene/volcano-island/hand",x:60,y:334,children:[{url:"hub-scene/volcano-island/arm.png",anchor:[.5,1]},{url:"hub-scene/volcano-island/hand.png",x:0,y:-93,anchor:[.95,.7]}]}]}]},{id:"hub-scene/island-jungle",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]},{id:"hub-scene/island-beach",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]},{id:"hub-scene/island-asteroid",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]}]},{id:"hub-scene/foreground-layer-1",children:[{id:"hub-scene/island-ice-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]},{id:"hub-scene/island-volcano-foreground",y:450,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1},{url:"hub-scene/volcano-island/foreground-island-1.png",y:0,x:100,anchor:[.5,.5]},{url:"hub-scene/volcano-island/foreground-island-2.png",x:880,y:20,anchor:[.5,.5]}]},{id:"hub-scene/island-jungle-foreground",y:470,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]},{id:"hub-scene/island-beach-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]},{id:"hub-scene/island-asteroid-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]}]},{id:"hub-scene/foreground-layer-2",children:[{id:"hub-scene/island-ice-foreground",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]},{id:"hub-scene/island-volcano-foreground",y:470,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1},{url:"hub-scene/volcano-island/foreground-island-3.png",y:50,x:350,anchor:[.5,.5]}]},{id:"hub-scene/island-jungle-foreground",y:490,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]},{id:"hub-scene/island-beach-foreground",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]},{id:"hub-scene/island-asteroid-foreground",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]}]}]}]},{id:"hub-scene/marker-holder",children:[],pool:4},{id:"hub-scene/marker",url:"hub-scene/marker.png",anchor:[.5,1],pool:4},{id:"hub-scene/marker-shadow",url:"hub-scene/marker-shadow.png",anchor:[.5,.5],pool:4},{id:"hub-scene/brand-box",url:"hub-scene/brand-box.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-back",url:"hub-scene/brand-box-back.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-2",url:"hub-scene/brand-box-2.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-back",url:"hub-scene/brand-box-back.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-nail",url:"hub-scene/brand-box-nail.png",x:0,y:0,anchor:[.5,.5],pool:4},{id:"hub-scene/brand-box-coming-soon",url:"hub-scene/brand-box-coming-soon.png",x:0,y:0,anchor:[.5,0],pool:4,loc:!0},{id:"hub-scene/new-star",url:"hub-scene/marker-new-star.png",anchor:[.5,.5],pool:4},{id:"hub-scene/new-star-shadow",url:"hub-scene/marker-new-star-shadow.png",anchor:[.5,.5],pool:4},{id:"hub-scene/new-text",url:"hub-scene/marker-new-text.png",loc:!0,anchor:[.5,.5],pool:4},{id:"hub-scene/new-icon-holder",children:[],pool:4},{id:"hub-scene/brand-logos/henry-danger",url:"hub-scene/brand-logos/henry-danger.png",y:-53,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/thundermans",url:"hub-scene/brand-logos/thundermans.png",y:-60,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/turtles",url:"hub-scene/brand-logos/turtles.png",y:-50,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/find-me-in-paris",url:"hub-scene/brand-logos/find-me-in-paris.png",y:-50,anchor:[.5,1.1]},{id:"hub-scene/game-logos/logo-holder",x:512,y:145,children:[{id:"hub-scene/game-logos/laser-cave",children:[{id:"hub-scene/game-logos/laser-cave-logo",url:"hub-scene/game-logos/laser-cave.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/laser-cave-shadow",url:"hub-scene/game-logos/laser-cave.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/mayan-madness",children:[{id:"hub-scene/game-logos/mayan-madness-logo",url:"hub-scene/game-logos/mayan-madness.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/mayan-madness-shadow",url:"hub-scene/game-logos/mayan-madness.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/roller-coaster-doom",children:[{id:"hub-scene/game-logos/roller-coaster-doom-logo",url:"hub-scene/game-logos/rollercoaster-of-doom.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/roller-coaster-doom-shadow",url:"hub-scene/game-logos/rollercoaster-of-doom.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/volcano-skydive",children:[{id:"hub-scene/game-logos/volcano-skydive-logo",url:"hub-scene/game-logos/volcano-skydive.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/volcano-skydive-shadow",url:"hub-scene/game-logos/volcano-skydive.png",anchor:[.5,.5]}]}]},{id:"hub-scene/click-to-play",url:"hub-scene/click-to-play.png",anchor:[.5,1],x:512,y:720}],"hub-assets-jungle":[{id:"hub-blank-input",url:"hub-scene/hub-blank-input.png"},{id:"hub-scene/fade",url:"hub-scene/fade.png"},{id:"hub-scene/characters-holder",x:740,y:380,children:[{id:"hub-scene/character-box-shadow",x:0,y:0,url:"hub-scene/character-box.png",anchor:[.5,.5]},{id:"hub-scene/character-box-arrow",x:-10,y:24,url:"hub-scene/character-box-arrow.png",anchor:[.5,.5]},{url:"hub-scene/character-box.png",anchor:[.5,.5]},{id:"hub-scene/characters",children:[{url:"hub-scene/characters/babe.png",anchor:[.5,.5]},{url:"hub-scene/characters/ggg.png",anchor:[.5,.5]},{url:"hub-scene/characters/henry.png",anchor:[.5,.5]},{url:"hub-scene/characters/hudson.png",anchor:[.5,.5]},{url:"hub-scene/characters/kenzie.png",anchor:[.5,.5]},{url:"hub-scene/characters/max.png",anchor:[.5,.5]},{url:"hub-scene/characters/phoebe.png",anchor:[.5,.5]},{url:"hub-scene/characters/spongebob.png",anchor:[.5,.5]},{url:"hub-scene/characters/nicky.png",anchor:[.5,.5]},{url:"hub-scene/characters/ricky.png",anchor:[.5,.5]},{url:"hub-scene/characters/dicky.png",anchor:[.5,.5]},{url:"hub-scene/characters/dawn.png",anchor:[.5,.5]},{url:"hub-scene/characters/linc.png",anchor:[.5,.5]},{url:"hub-scene/characters/frankie.png",anchor:[.5,.5]}]}]},{id:"hub-scene/main-holder",x:512,y:312,children:[{id:"hub-scene/layers-holder",x:-512,y:-312,children:[{id:"hub-scene/sky-layer",children:[{id:"hub-scene/sky-chunk-1",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{id:"hub-scene/sun-1",url:"hub-scene/sun.png",x:880,y:120,anchor:[.5,.5]},{url:"hub-scene/cloud-small.png",x:100,y:120},{url:"hub-scene/cloud.png",x:500,y:180}]},{id:"hub-scene/sky-chunk-2",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{url:"hub-scene/cloud.png",x:120,y:200},{url:"hub-scene/cloud-small-tall.png",x:680,y:20}]},{id:"hub-scene/sky-chunk-3",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{id:"hub-scene/sun-2",url:"hub-scene/sun.png",x:880,y:120,anchor:[.5,.5]},{url:"hub-scene/cloud-small.png",x:100,y:120},{url:"hub-scene/cloud.png",x:500,y:180}]},{id:"hub-scene/sky-chunk-4",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{url:"hub-scene/cloud.png",x:120,y:200},{url:"hub-scene/cloud-small-tall.png",x:680,y:20}]}]},{id:"hub-scene/islands-back-layer",children:[{id:"hub-scene/island-ice-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]},{id:"hub-scene/island-volcano-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]},{id:"hub-scene/island-jungle-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1},{url:"hub-scene/jungle-island/back.png",x:490,y:170,anchor:[.5,0]}]},{id:"hub-scene/island-beach-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]},{id:"hub-scene/island-asteroid-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]}]},{id:"hub-scene/islands-layer",children:[{id:"hub-scene/island-ice",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]},{id:"hub-scene/island-volcano",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]},{id:"hub-scene/island-jungle",children:[{url:"hub-scene/stage-chunk.png",retina:!1},{id:"hub-scene/island-jungle-inner",x:512,y:300,children:[{id:"hub-scene/jungle-island/waves-1",url:"hub-scene/jungle-island/waves.png",y:330,anchor:[.5,0]},{id:"hub-scene/jungle-island/waves-2",url:"hub-scene/jungle-island/waves.png",y:330,anchor:[.5,0]},{url:"hub-scene/jungle-island/island.png",anchor:[.5,.5]},{id:"hub-scene/jungle-island/hand",x:385,y:274,children:[{url:"hub-scene/jungle-island/arm.png",anchor:[.5,1]},{url:"hub-scene/jungle-island/hand.png",x:35,y:-99,anchor:[.82,.9]}]}]}]},{id:"hub-scene/island-beach",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]},{id:"hub-scene/island-asteroid",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]}]},{id:"hub-scene/foreground-layer-1",children:[{id:"hub-scene/island-ice-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]},{id:"hub-scene/island-volcano-foreground",y:450,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]},{id:"hub-scene/island-jungle-foreground",y:470,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1},{url:"hub-scene/jungle-island/foreground-island-2.png",x:900,y:-20,anchor:[.5,.5]},{url:"hub-scene/jungle-island/foreground-island-3.png",x:60,y:10,anchor:[.5,.5]}]},{id:"hub-scene/island-beach-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]},{id:"hub-scene/island-asteroid-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]}]},{id:"hub-scene/foreground-layer-2",children:[{id:"hub-scene/island-ice-foreground",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]},{id:"hub-scene/island-volcano-foreground",y:470,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]},{id:"hub-scene/island-jungle-foreground",y:490,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1},{url:"hub-scene/jungle-island/foreground-island-1.png",x:550,y:80,anchor:[.5,.5]}]},{id:"hub-scene/island-beach-foreground",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]},{id:"hub-scene/island-asteroid-foreground",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]}]}]}]},{id:"hub-scene/marker-holder",children:[],pool:4},{id:"hub-scene/marker",url:"hub-scene/marker.png",anchor:[.5,1],pool:4},{id:"hub-scene/marker-shadow",url:"hub-scene/marker-shadow.png",anchor:[.5,.5],pool:4},{id:"hub-scene/brand-box",url:"hub-scene/brand-box.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-back",url:"hub-scene/brand-box-back.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-2",url:"hub-scene/brand-box-2.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-back",url:"hub-scene/brand-box-back.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-nail",url:"hub-scene/brand-box-nail.png",x:0,y:0,anchor:[.5,.5],pool:4},{id:"hub-scene/brand-box-coming-soon",url:"hub-scene/brand-box-coming-soon.png",x:0,y:0,anchor:[.5,0],pool:4,loc:!0},{id:"hub-scene/new-star",url:"hub-scene/marker-new-star.png",anchor:[.5,.5],pool:4},{id:"hub-scene/new-star-shadow",url:"hub-scene/marker-new-star-shadow.png",anchor:[.5,.5],pool:4},{id:"hub-scene/new-text",url:"hub-scene/marker-new-text.png",loc:!0,anchor:[.5,.5],pool:4},{id:"hub-scene/new-icon-holder",children:[],pool:4},{id:"hub-scene/brand-logos/loud-house",url:"hub-scene/brand-logos/loud-house.png",y:-47,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/nicky-ricky-dicky-dawn",url:"hub-scene/brand-logos/nicky-ricky-dicky-dawn.png",y:-46,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/spongebob",url:"hub-scene/brand-logos/spongebob.png",y:-53,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/i-am-frankie",url:"hub-scene/brand-logos/i-am-frankie.png",y:-53,anchor:[.5,1.1]},{id:"hub-scene/game-logos/logo-holder",x:512,y:145,children:[{id:"hub-scene/game-logos/coco-nutty",children:[{id:"hub-scene/game-logos/coco-nutty-logo",url:"hub-scene/game-logos/coco-nutty.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/coco-nutty-shadow",url:"hub-scene/game-logos/coco-nutty.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/river-rangers",children:[{id:"hub-scene/game-logos/river-rangers-logo",url:"hub-scene/game-logos/river-rangers.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/river-rangers-shadow",url:"hub-scene/game-logos/river-rangers.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/tree-top-gladiators",children:[{id:"hub-scene/game-logos/tree-top-gladiators-logo",url:"hub-scene/game-logos/treetop-gladiators.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/tree-top-gladiators-shadow",url:"hub-scene/game-logos/treetop-gladiators.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/waterfall-wipeout",children:[{id:"hub-scene/game-logos/waterfall-wipeout-logo",url:"hub-scene/game-logos/waterfall-wipeout.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/waterfall-wipeout-shadow",url:"hub-scene/game-logos/waterfall-wipeout.png",anchor:[.5,.5]}]}]},{id:"hub-scene/click-to-play",url:"hub-scene/click-to-play.png",anchor:[.5,1],x:512,y:720}],"hub-assets-beach":[{id:"hub-blank-input",url:"hub-scene/hub-blank-input.png"},{id:"hub-scene/fade",url:"hub-scene/fade.png"},{id:"hub-scene/characters-holder",x:740,y:380,children:[{id:"hub-scene/character-box-shadow",x:0,y:0,url:"hub-scene/character-box.png",anchor:[.5,.5]},{id:"hub-scene/character-box-arrow",x:-10,y:24,url:"hub-scene/character-box-arrow.png",anchor:[.5,.5]},{url:"hub-scene/character-box.png",anchor:[.5,.5]},{id:"hub-scene/characters",children:[{url:"hub-scene/characters/babe.png",anchor:[.5,.5]},{url:"hub-scene/characters/ggg.png",anchor:[.5,.5]},{url:"hub-scene/characters/henry.png",anchor:[.5,.5]},{url:"hub-scene/characters/hudson.png",anchor:[.5,.5]},{url:"hub-scene/characters/kenzie.png",anchor:[.5,.5]},{url:"hub-scene/characters/max.png",anchor:[.5,.5]},{url:"hub-scene/characters/phoebe.png",anchor:[.5,.5]},{url:"hub-scene/characters/spongebob.png",anchor:[.5,.5]},{url:"hub-scene/characters/freddy.png",anchor:[.5,.5]},{url:"hub-scene/characters/lawrence.png",anchor:[.5,.5]},{url:"hub-scene/characters/summer.png",anchor:[.5,.5]},{url:"hub-scene/characters/tomika.png",anchor:[.5,.5]},{url:"hub-scene/characters/zack.png",anchor:[.5,.5]},{url:"hub-scene/characters/nicky.png",anchor:[.5,.5]},{url:"hub-scene/characters/ricky.png",anchor:[.5,.5]},{url:"hub-scene/characters/dicky.png",anchor:[.5,.5]},{url:"hub-scene/characters/dawn.png",anchor:[.5,.5]}]}]},{id:"hub-scene/main-holder",x:512,y:312,children:[{id:"hub-scene/layers-holder",x:-512,y:-312,children:[{id:"hub-scene/sky-layer",children:[{id:"hub-scene/sky-chunk-1",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{id:"hub-scene/sun-1",url:"hub-scene/sun.png",x:880,y:120,anchor:[.5,.5]},{url:"hub-scene/cloud-small.png",x:100,y:120},{url:"hub-scene/cloud.png",x:500,y:180}]},{id:"hub-scene/sky-chunk-2",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{url:"hub-scene/cloud.png",x:120,y:200},{url:"hub-scene/cloud-small-tall.png",x:680,y:20}]},{id:"hub-scene/sky-chunk-3",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{id:"hub-scene/sun-2",url:"hub-scene/sun.png",x:880,y:120,anchor:[.5,.5]},{url:"hub-scene/cloud-small.png",x:100,y:120},{url:"hub-scene/cloud.png",x:500,y:180}]},{id:"hub-scene/sky-chunk-4",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{url:"hub-scene/cloud.png",x:120,y:200},{url:"hub-scene/cloud-small-tall.png",x:680,y:20}]}]},{id:"hub-scene/islands-back-layer",children:[{id:"hub-scene/island-ice-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]},{id:"hub-scene/island-volcano-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]},{id:"hub-scene/island-jungle-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]},{id:"hub-scene/island-beach-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1},{url:"hub-scene/beach-island/back.png",x:560,y:247,anchor:[.5,0]}]},{id:"hub-scene/island-asteroid-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]}]},{id:"hub-scene/islands-layer",children:[{id:"hub-scene/island-ice",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]},{id:"hub-scene/island-volcano",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]},{id:"hub-scene/island-jungle",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]},{id:"hub-scene/island-beach",children:[{url:"hub-scene/stage-chunk.png",retina:!1},{id:"hub-scene/island-beach-inner",x:500,y:334,children:[{id:"hub-scene/beach-island/waves-1",url:"hub-scene/beach-island/waves.png",x:-90,y:110,anchor:[.5,0]},{id:"hub-scene/beach-island/waves-2",url:"hub-scene/beach-island/waves.png",x:-90,y:110,anchor:[.5,0]},{id:"hub-scene/beach-island/rings-1",url:"hub-scene/beach-island/rings.png",anchor:[.5,.5],x:794,y:180},{id:"hub-scene/beach-island/rings-2",url:"hub-scene/beach-island/rings.png",anchor:[.5,.5],x:852,y:174},{id:"hub-scene/beach-island/rings-3",url:"hub-scene/beach-island/rings.png",anchor:[.5,.5],x:900,y:199},{id:"hub-scene/beach-island/rings-4",url:"hub-scene/beach-island/rings.png",anchor:[.5,.5],x:956,y:184},{id:"hub-scene/beach-island/rings-5",url:"hub-scene/beach-island/rings.png",anchor:[.5,.5],x:1002,y:215},{id:"hub-scene/beach-island/rings-6",url:"hub-scene/beach-island/rings.png",anchor:[.5,.5],x:1068,y:192},{url:"hub-scene/beach-island/island_01.png",x:-1100,anchor:[0,.5]},{url:"hub-scene/beach-island/island_02.png",x:-3,anchor:[0,.5]},{id:"hub-scene/beach-island/hand",x:-423,y:127,children:[{url:"hub-scene/beach-island/arm.png",anchor:[.5,1]},{url:"hub-scene/beach-island/hand.png",x:-26,y:-103,anchor:[.1,.9]}]}]}]},{id:"hub-scene/island-asteroid",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]}]},{id:"hub-scene/foreground-layer-1",children:[{id:"hub-scene/island-ice-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]},{id:"hub-scene/island-volcano-foreground",y:450,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]},{id:"hub-scene/island-jungle-foreground",y:470,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]},{id:"hub-scene/island-beach-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1},{url:"hub-scene/beach-island/foreground-island-1.png",x:60,anchor:[.5,.5]},{url:"hub-scene/beach-island/foreground-island-2.png",x:860,y:20,anchor:[.5,.5]}]},{id:"hub-scene/island-asteroid-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]}]},{id:"hub-scene/foreground-layer-2",children:[{id:"hub-scene/island-ice-foreground",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]},{id:"hub-scene/island-volcano-foreground",y:470,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]},{id:"hub-scene/island-jungle-foreground",y:490,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]},{id:"hub-scene/island-beach-foreground",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1},{url:"hub-scene/beach-island/foreground-island-3.png",x:400,y:80,anchor:[.5,.5]}]},{id:"hub-scene/island-asteroid-foreground",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]}]}]}]},{id:"hub-scene/marker-holder",children:[],pool:4},{id:"hub-scene/marker",url:"hub-scene/marker.png",anchor:[.5,1],pool:4},{id:"hub-scene/marker-shadow",url:"hub-scene/marker-shadow.png",anchor:[.5,.5],pool:4},{id:"hub-scene/brand-box",url:"hub-scene/brand-box.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-2",url:"hub-scene/brand-box-2.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-back",url:"hub-scene/brand-box-back.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-nail",url:"hub-scene/brand-box-nail.png",x:0,y:0,anchor:[.5,.5],pool:4},{id:"hub-scene/brand-box-coming-soon",url:"hub-scene/brand-box-coming-soon.png",x:0,y:0,anchor:[.5,0],pool:4,loc:!0},{id:"hub-scene/new-star",url:"hub-scene/marker-new-star.png",anchor:[.5,.5],pool:4},{id:"hub-scene/new-star-shadow",url:"hub-scene/marker-new-star-shadow.png",anchor:[.5,.5],pool:4},{id:"hub-scene/new-text",url:"hub-scene/marker-new-text.png",loc:!0,anchor:[.5,.5],pool:4},{id:"hub-scene/new-icon-holder",children:[],pool:4},{id:"hub-scene/brand-logos/game-shakers",url:"hub-scene/brand-logos/game-shakers.png",y:-52,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/school-of-rock",url:"hub-scene/brand-logos/school-of-rock.png",y:-53,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/thundermans",url:"hub-scene/brand-logos/thundermans.png",y:-60,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/nicky-ricky-dicky-dawn",url:"hub-scene/brand-logos/nicky-ricky-dicky-dawn.png",y:-46,anchor:[.5,1.1]},{id:"hub-scene/game-logos/logo-holder",x:512,y:145,children:[{id:"hub-scene/game-logos/aqua-jetpack",children:[{id:"hub-scene/game-logos/aqua-jetpack-logo",url:"hub-scene/game-logos/aqua-jetpack.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/aqua-jetpack-shadow",url:"hub-scene/game-logos/aqua-jetpack.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/beach-buggy",children:[{id:"hub-scene/game-logos/beach-buggy-logo",url:"hub-scene/game-logos/beach-buggy-bash.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/beach-buggy-shadow",url:"hub-scene/game-logos/beach-buggy-bash.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/jet-ski",children:[{id:"hub-scene/game-logos/jet-ski-logo",url:"hub-scene/game-logos/jetski-scramble.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/jet-ski-shadow",url:"hub-scene/game-logos/jetski-scramble.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/hover-drift",children:[{id:"hub-scene/game-logos/hover-drift-logo",url:"hub-scene/game-logos/hover-drift.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/hover-drift-shadow",url:"hub-scene/game-logos/hover-drift.png",anchor:[.5,.5]}]}]},{id:"hub-scene/click-to-play",url:"hub-scene/click-to-play.png",anchor:[.5,1],x:512,y:720}],"hub-assets-asteroid":[{id:"hub-blank-input",url:"hub-scene/hub-blank-input.png"},{id:"hub-scene/fade",url:"hub-scene/fade.png"},{id:"hub-scene/characters-holder",x:740,y:380,children:[{id:"hub-scene/character-box-shadow",x:0,y:0,url:"hub-scene/character-box.png",anchor:[.5,.5]},{id:"hub-scene/character-box-arrow",x:-10,y:24,url:"hub-scene/character-box-arrow.png",anchor:[.5,.5]},{url:"hub-scene/character-box.png",anchor:[.5,.5]},{id:"hub-scene/characters",children:[{url:"hub-scene/characters/babe.png",anchor:[.5,.5]},{url:"hub-scene/characters/ggg.png",anchor:[.5,.5]},{url:"hub-scene/characters/henry.png",anchor:[.5,.5]},{url:"hub-scene/characters/hudson.png",anchor:[.5,.5]},{url:"hub-scene/characters/kenzie.png",anchor:[.5,.5]},{url:"hub-scene/characters/max.png",anchor:[.5,.5]},{url:"hub-scene/characters/phoebe.png",anchor:[.5,.5]},{url:"hub-scene/characters/spongebob.png",anchor:[.5,.5]},{url:"hub-scene/characters/freddy.png",anchor:[.5,.5]},{url:"hub-scene/characters/lawrence.png",anchor:[.5,.5]},{url:"hub-scene/characters/summer.png",anchor:[.5,.5]},{url:"hub-scene/characters/tomika.png",anchor:[.5,.5]},{url:"hub-scene/characters/zack.png",anchor:[.5,.5]},{url:"hub-scene/characters/nicky.png",anchor:[.5,.5]},{url:"hub-scene/characters/ricky.png",anchor:[.5,.5]},{url:"hub-scene/characters/dicky.png",anchor:[.5,.5]},{url:"hub-scene/characters/dawn.png",anchor:[.5,.5]},{url:"hub-scene/characters/arc.png",anchor:[.5,.5]},{url:"hub-scene/characters/ciara.png",anchor:[.5,.5]},{url:"hub-scene/characters/prudence.png",anchor:[.5,.5]},{url:"hub-scene/characters/warwick.png",anchor:[.5,.5]},{url:"hub-scene/characters/frankie.png",anchor:[.5,.5]}]}]},{id:"hub-scene/main-holder",x:512,y:312,children:[{id:"hub-scene/layers-holder",x:-512,y:-312,children:[{id:"hub-scene/sky-layer",children:[{id:"hub-scene/sky-chunk-1",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{id:"hub-scene/sun-1",url:"hub-scene/sun.png",x:880,y:120,anchor:[.5,.5]},{url:"hub-scene/cloud-small.png",x:100,y:120},{url:"hub-scene/cloud.png",x:500,y:180}]},{id:"hub-scene/sky-chunk-2",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{url:"hub-scene/cloud.png",x:120,y:200},{url:"hub-scene/cloud-small-tall.png",x:680,y:20}]},{id:"hub-scene/sky-chunk-3",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{id:"hub-scene/sun-2",url:"hub-scene/sun.png",x:880,y:120,anchor:[.5,.5]},{url:"hub-scene/cloud-small.png",x:100,y:120},{url:"hub-scene/cloud.png",x:500,y:180}]},{id:"hub-scene/sky-chunk-4",children:[{url:"hub-scene/sky.png",retina:!1,y:0,anchor:[0,1]},{url:"hub-scene/sea.png"},{url:"hub-scene/cloud.png",x:120,y:200},{url:"hub-scene/cloud-small-tall.png",x:680,y:20}]}]},{id:"hub-scene/islands-back-layer",children:[{id:"hub-scene/island-ice-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]},{id:"hub-scene/island-volcano-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]},{id:"hub-scene/island-jungle-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]},{id:"hub-scene/island-beach-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1}]},{id:"hub-scene/island-asteroid-back",children:[{url:"hub-scene/back-stage-chunk.png",retina:!1},{url:"hub-scene/asteroid-island/back.png",x:560,y:247,anchor:[.5,0]}]}]},{id:"hub-scene/islands-layer",children:[{id:"hub-scene/island-ice",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]},{id:"hub-scene/island-volcano",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]},{id:"hub-scene/island-jungle",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]},{id:"hub-scene/island-beach",children:[{url:"hub-scene/stage-chunk.png",retina:!1}]},{id:"hub-scene/island-asteroid",children:[{url:"hub-scene/stage-chunk.png",retina:!1},{id:"hub-scene/island-asteroid-inner",x:480,y:230,children:[{id:"hub-scene/asteroid-island/portal",y:700,children:[{url:"hub-scene/asteroid-island/portal-ring-2.png",y:20,anchor:[.45,.5]},{url:"hub-scene/asteroid-island/portal-ring-1.png",anchor:[.55,.5]},{url:"hub-scene/asteroid-island/portal-ring-3.png",y:45,anchor:[.45,.5]},{url:"hub-scene/asteroid-island/portal-ring-4.png",y:85,anchor:[.55,.5]}]},{url:"hub-scene/asteroid-island/island-shadow.png",y:740,anchor:[.5,.5]},{url:"hub-scene/asteroid-island/island.png",anchor:[.5,.5]},{id:"hub-scene/asteroid-island/waterfall-splash-left",x:-620,y:820,children:[]},{id:"hub-scene/asteroid-island/waterfall-splash-right",x:900,y:730,children:[]},{url:"hub-scene/asteroid-island/waterfall-left.png",x:-600,y:823,anchor:[.5,1]},{url:"hub-scene/asteroid-island/waterfall-right.png",x:900,y:736,anchor:[.5,1]},{url:"hub-scene/asteroid-island/island-front-left.png",x:-674,y:48},{url:"hub-scene/asteroid-island/island-front-right.png",x:843,y:-15}]}]}]},{id:"hub-scene/foreground-layer-1",children:[{id:"hub-scene/island-ice-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]},{id:"hub-scene/island-volcano-foreground",y:450,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]},{id:"hub-scene/island-jungle-foreground",y:470,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]},{id:"hub-scene/island-beach-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1}]},{id:"hub-scene/island-asteroid-foreground",y:460,children:[{url:"hub-scene/stage-chunk-fg1.png",retina:!1},{id:"hub-scene/asteroid-island/foreground-island-1",x:60,y:-120,children:[{url:"hub-scene/asteroid-island/foreground-island-1-shadow.png",y:170,anchor:[.5,.5]},{url:"hub-scene/asteroid-island/foreground-island-1.png",anchor:[.5,.5]}]},{id:"hub-scene/asteroid-island/hand",x:650,y:-90,children:[{id:"hub-scene/asteroid-island/hand-inner",children:[{url:"hub-scene/asteroid-island/hand-island.png",x:-4,y:62,anchor:[.5,.5]},{id:"hub-scene/asteroid-island/hand",children:[{url:"hub-scene/asteroid-island/arm.png",anchor:[.5,1]},{url:"hub-scene/asteroid-island/hand.png",x:25,y:-96,anchor:[.9,.93]}]}]}]},{id:"hub-scene/asteroid-island/foreground-island-3",x:930,y:-100,children:[{url:"hub-scene/asteroid-island/foreground-island-3-shadow.png",y:160,anchor:[.5,.5]},{url:"hub-scene/asteroid-island/foreground-island-3.png",anchor:[.5,.5]}]}]}]},{id:"hub-scene/foreground-layer-2",children:[{id:"hub-scene/island-ice-foreground",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]},{id:"hub-scene/island-volcano-foreground",y:470,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]},{id:"hub-scene/island-jungle-foreground",y:490,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]},{id:"hub-scene/island-beach-foreground",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1}]},{id:"hub-scene/island-asteroid-foreground2",y:480,children:[{url:"hub-scene/stage-chunk-fg2.png",retina:!1},{id:"hub-scene/asteroid-island/foreground-island-2",x:480,y:10,children:[{url:"hub-scene/asteroid-island/foreground-island-2-shadow.png",y:150,anchor:[.5,.5]},{url:"hub-scene/asteroid-island/foreground-island-2.png",anchor:[.5,.5]}]}]}]}]}]},{id:"hub-scene/framed-animations/waterfall",x:0,y:0,anchor:[.5,.5],pool:4,type:"spritesheet",dir:"hub-scene/framed-animations/waterfall",atlas:"waterfall.json",frames:["waterfall-frame-1.png","waterfall-frame-2.png","waterfall-frame-3.png","waterfall-frame-4.png"]},{url:"hub-scene/asteroid-island/waterfall-splash.png",pool:10,anchor:[.4,.4]},{id:"hub-scene/marker-holder",children:[],pool:4},{id:"hub-scene/marker",url:"hub-scene/marker.png",anchor:[.5,1],pool:4},{id:"hub-scene/marker-shadow",url:"hub-scene/marker-shadow.png",anchor:[.5,.5],pool:4},{id:"hub-scene/brand-box",url:"hub-scene/brand-box.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-2",url:"hub-scene/brand-box-2.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-back",url:"hub-scene/brand-box-back.png",anchor:[.5,1],pool:4},{id:"hub-scene/brand-box-nail",url:"hub-scene/brand-box-nail.png",x:0,y:0,anchor:[.5,.5],pool:4},{id:"hub-scene/brand-box-coming-soon",url:"hub-scene/brand-box-coming-soon.png",x:0,y:0,anchor:[.5,0],pool:4,loc:!0},{id:"hub-scene/new-star",url:"hub-scene/marker-new-star.png",anchor:[.5,.5],pool:4},{id:"hub-scene/new-star-shadow",url:"hub-scene/marker-new-star-shadow.png",anchor:[.5,.5],pool:4},{id:"hub-scene/new-text",url:"hub-scene/marker-new-text.png",loc:!0,anchor:[.5,.5],pool:4},{id:"hub-scene/new-icon-holder",children:[],pool:4},{id:"hub-scene/brand-logos/none",url:"hub-scene/brand-logos/none.png",y:-52,pool:4,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/game-shakers",url:"hub-scene/brand-logos/game-shakers.png",y:-52,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/henry-danger",url:"hub-scene/brand-logos/henry-danger.png",y:-53,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/i-am-frankie",url:"hub-scene/brand-logos/i-am-frankie.png",y:-53,anchor:[.5,1.1]},{id:"hub-scene/brand-logos/knight-squad",url:"hub-scene/brand-logos/knight-squad.png",y:-40,pool:4,anchor:[.5,1.1]},{id:"hub-scene/game-logos/logo-holder",x:512,y:145,children:[{id:"hub-scene/game-logos/egg-scape",children:[{id:"hub-scene/game-logos/egg-scape-logo",url:"hub-scene/game-logos/egg-scape.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/egg-scape-shadow",url:"hub-scene/game-logos/egg-scape.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/striker",children:[{id:"hub-scene/game-logos/striker-logo",url:"hub-scene/game-logos/striker.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/striker-shadow",url:"hub-scene/game-logos/striker.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/abducktion",children:[{id:"hub-scene/game-logos/abducktion-logo",url:"hub-scene/game-logos/abducktion.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/abducktion-shadow",url:"hub-scene/game-logos/abducktion.png",anchor:[.5,.5]}]},{id:"hub-scene/game-logos/crazy-golf",children:[{id:"hub-scene/game-logos/crazy-golf-logo",url:"hub-scene/game-logos/gravity-golf.png",anchor:[.5,.5]},{id:"hub-scene/game-logos/crazy-golf-shadow",url:"hub-scene/game-logos/gravity-golf.png",anchor:[.5,.5]}]}]},{id:"hub-scene/click-to-play",url:"hub-scene/click-to-play.png",anchor:[.5,1],x:512,y:720}],"ui-assets":[{neverFlush:!0},{id:"ui-main-container",children:[]},{id:"ui-message-container",children:[]},{id:"ui/hud",children:[{url:"ui/hud/hud-bg.png"},{id:"ui/hud/tickets-icon",url:"ui/hud/tickets-icon.png",anchor:[.5,.5],x:70,y:45},{id:"ui/hud/wristbands",x:148,y:41,children:[{id:"ui/hud/tickets",url:"ui/hud/tickets.png",anchor:[.5,.5]},{id:"ui/hud/points",url:"ui/hud/points.png",anchor:[.5,.5]},{id:"ui/hud/secondchance",url:"ui/hud/secondchance.png",anchor:[.5,.5]}]}]},{id:"ui/enjoy-prompt",url:"ui/enjoy-prompt.png",anchor:[.5,.5],loc:!0},{id:"ui/tutorial-overlay-main-holder",children:[]},{id:"tutorial-pagination-dot",url:"ui/helpscreen-pagination-dot.png",anchor:[.5,.5],pool:9},{id:"tickets-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"wristbands-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"tickets-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"wristbands-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"tickets-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"wristbands-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"click-anim",anchor:[.5,.5],type:"spritesheet",dir:"ui/click-anim",atlas:"small-button.json",frames:["blank-click.png","1-click.png","2-click.png","3-click.png","4-click.png","5-click.png","6-click.png","7-click.png","8-click.png","blank-click.png"]},{id:"large-click-anim",anchor:[.5,.5],type:"spritesheet",dir:"ui/large-click-anim",atlas:"large-click-anim.json",frames:["blank-l-click.png","1-l-click.png","2-l-click.png","3-l-click.png","4-l-click.png","5-l-click.png","6-l-click.png","7-l-click.png","8-l-click.png","blank-l-click.png"]},{id:"wrong-orientation-bg",url:"global/wrong-orientation-bg.png",retina:!1},{id:"scroll-bg",url:"global/iphone-scroll-overlay.png",retina:!1},{id:"white-square",url:"global/white-square.png",pool:3,retina:!1},{id:"transition-holder",children:[{id:"black-area-top",url:"global/black-square.png",retina:!1},{id:"black-area-bottom",url:"global/black-square.png",retina:!1},{id:"black-area-left",url:"global/black-square.png",retina:!1},{id:"black-area-right",url:"global/black-square.png",retina:!1},{id:"transition-mask",children:[{id:"black-corner-top-left",url:"global/transition-mask-corner.png",retina:!1},{id:"black-corner-top-right",url:"global/transition-mask-corner.png",retina:!1},{id:"black-corner-bottom-right",url:"global/transition-mask-corner.png",retina:!1},{id:"black-corner-bottom-left",url:"global/transition-mask-corner.png",retina:!1}]}]},{id:"playbuttonlarge",type:"button",children:[{id:"shadow",url:"ui/ui-button-large-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-large-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-large-play.png"}]}]},{id:"replaybuttonlarge",type:"button",children:[{id:"shadow",url:"ui/ui-button-large-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-large-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-large-replay.png"}]}]},{id:"soundoffbutton",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-sound-off.png"}]}]},{id:"soundonbutton",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-sound-on.png"}]}]},{id:"pause-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-pause.png"}]}]},{id:"play-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-play.png"}]}]},{id:"home-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-home.png"}]}]},{id:"help-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-help.png"}]}]},{id:"tutorial-button-left",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-3.png"},{id:"icon",url:"ui/ui-button-icon-left-tutorial.png"}]}]},{id:"tutorial-button-right",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-3.png"},{id:"icon",url:"ui/ui-button-icon-right-tutorial.png"}]}]},{id:"edit-clothes-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-edit-clothes.png"}]}]},{id:"edit-avatar-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-edit-avatar.png"}]}]},{id:"skip-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-skip.png"}]}]},{id:"right-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-skip.png"}]}]},{id:"hub-left-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-hub-left-shadow.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-hub-left.png"}]}]},{id:"hub-right-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-hub-right-shadow.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-hub-right.png"}]}]},{id:"left-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-back.png"}]}]},{id:"forwards-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-forwards.png"}]}]},{id:"backwards-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-2.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-2.png"},{id:"icon",url:"ui/ui-button-icon-backwards.png"}]}]},{id:"move-left-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-left.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-left.png"},{id:"icon",url:"ui/ui-button-icon-left.png"}]}]},{id:"move-right-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-right.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-right.png"},{id:"icon",url:"ui/ui-button-icon-right.png"}]}]},{id:"right-arrow-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-arrow-right-shadow.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-arrow-right.png"}]}]},{id:"left-arrow-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-arrow-left-shadow.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-arrow-left.png"}]}]},{id:"kickbutton",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-kick.png"}]}]},{id:"back-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-left.png"}]}]},{id:"jump-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"}]}]},{id:"close-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-close.png"}]}]},{id:"powerup-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-powerup-shadow.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-powerup.png"},{id:"glow",url:"ui/ui-button-glow-powerup.png",y:-2,retina:!1,anchor:[.5,.5]},{id:"icon",url:"ui/ui-button-icon-powerup.png"}]}]},{id:"river-rangers-fire-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-kick.png"}]}]},{id:"beach-buggy-flip-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-beach-buggy-flip.png"}]}]},{id:"jet-ski-flip-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-jet-ski-flip.png"}]}]},{id:"back-to-photobooth-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-back-photobooth.png"}]}]},{id:"accept-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-accept.png"}]}]},{id:"share-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-share.png"}]}]},{id:"download-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-download.png"}]}]},{id:"rotate-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-rotate.png"}]}]},{id:"scale-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-scale.png"}]}]},{id:"giftshop-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-giftshop.png"}]}]},{id:"basket-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-basket.png"}]}]},{id:"small-replay-button",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-small-replay.png"}]}]},{id:"photo-button-large",type:"button",children:[{id:"shadow",url:"ui/ui-button-large-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-large-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-large-take-photo.png"}]}]},{id:"ui/powerup-particles-container",children:[],x:512,y:312},{url:"ui/powerup-particle.png",anchor:[.5,.5],pool:100,retina:!1},{id:"ui/powerup-activated",x:512,y:312,children:[{id:"ui/ui-button-glow-powerup",url:"ui/ui-button-glow-powerup.png",anchor:[.5,.5],retina:!1},{url:"ui/power-up-bolt.png",anchor:[.5,.5]},{url:"ui/power-up-text-back.png",anchor:[.5,.5],loc:!0},{url:"ui/power-up-text-front.png",anchor:[.5,.5],loc:!0}]}],"game-over-assets-volcano":[{id:"game-over-board",children:[{id:"game-over-board",url:"gameover/volcano/gameover-board.png",anchor:[.5,.5]}]},{id:"game-over-logo/laser-cave",url:"gameover/volcano/laser-cave.png",anchor:[.5,.5]},{id:"game-over-logo/roller-coaster-doom",url:"gameover/volcano/roller-coaster-doom.png",anchor:[.5,.5]},{id:"game-over-logo/mayan-madness",url:"gameover/volcano/mayan-madness.png",anchor:[.5,.5]},{id:"game-over-logo/volcano-skydive",url:"gameover/volcano/volcano-skydive.png",anchor:[.5,.5]},{id:"game-over-background",children:[{id:"game-over-background/background",url:"gameover/volcano/background.png",anchor:[.5,.5]},{id:"game-over-background/foreground",url:"gameover/volcano/foreground.png",y:50,anchor:[.5,.5]}]}],"game-over-assets-beach":[{id:"game-over-board",children:[{id:"game-over-board",url:"gameover/beach/gameover-board.png",anchor:[.5,.5]}]},{id:"game-over-logo/aqua-jetpack",url:"gameover/beach/aqua-jetpack.png",anchor:[.5,.5]},{id:"game-over-logo/beach-buggy",url:"gameover/beach/beach-buggy.png",anchor:[.5,.5]},{id:"game-over-logo/jet-ski",url:"gameover/beach/jet-ski.png",anchor:[.5,.5]},{id:"game-over-logo/hover-drift",url:"gameover/beach/hover-drift.png",anchor:[.5,.5]},{id:"game-over-background",children:[{id:"game-over-background/background",url:"gameover/beach/background.png",anchor:[.5,.5]},{id:"game-over-background/foreground",url:"gameover/beach/foreground.png",y:50,anchor:[.5,.5]}]}],"game-over-assets-asteroid":[{id:"game-over-board",children:[{id:"game-over-board",url:"gameover/asteroid/gameover-board.png",anchor:[.5,.5]}]},{id:"game-over-logo/egg-scape",url:"gameover/asteroid/egg-scape.png",anchor:[.5,.5]},{id:"game-over-logo/abducktion",url:"gameover/asteroid/abducktion.png",anchor:[.5,.5]},{id:"game-over-logo/striker",url:"gameover/asteroid/striker.png",anchor:[.5,.5]},{id:"game-over-logo/crazy-golf",url:"gameover/asteroid/gravity-golf.png",anchor:[.5,.5]},{id:"game-over-background",children:[{id:"game-over-background/background",url:"gameover/asteroid/background.png",anchor:[.5,.5]},{id:"game-over-background/foreground",url:"gameover/asteroid/foreground.png",y:50,anchor:[.5,.5]}]}],"game-over-assets-ice":[{id:"game-over-board",children:[{id:"game-over-board",url:"gameover/ice/gameover-board.png",anchor:[.5,.5]}]},{id:"game-over-logo/dodgems",url:"gameover/ice/dodgems.png",anchor:[.5,.5]},{id:"game-over-logo/roller-coaster-ice",url:"gameover/ice/ice-blast.png",anchor:[.5,.5]},{id:"game-over-logo/pin-ball",url:"gameover/ice/pin-ball.png",anchor:[.5,.5]},{id:"game-over-logo/snowball-wars",url:"gameover/ice/snowball-wars.png",anchor:[.5,.5]},{id:"game-over-background",children:[{id:"game-over-background/background",url:"gameover/ice/background.png",anchor:[.5,.5]},{id:"game-over-background/foreground",url:"gameover/ice/foreground.png",y:50,anchor:[.5,.5]}]}],"game-over-assets-jungle":[{id:"game-over-board",children:[{id:"game-over-board",url:"gameover/jungle/gameover-board.png",anchor:[.5,.5]}]},{id:"game-over-logo/coco-nutty",url:"gameover/jungle/coco-nutty.png",anchor:[.5,.5]},{id:"game-over-logo/river-rangers",url:"gameover/jungle/river-rangers.png",anchor:[.5,.5]},{id:"game-over-logo/tree-top-gladiators",url:"gameover/jungle/tree-top-gladiators.png",anchor:[.5,.5]},{id:"game-over-logo/waterfall-wipeout",url:"gameover/jungle/waterfall-wipeout.png",anchor:[.5,.5]},{id:"game-over-background",children:[{id:"game-over-background/background",url:"gameover/jungle/background.png",anchor:[.5,.5]},{id:"game-over-background/foreground",url:"gameover/jungle/foreground.png",y:50,anchor:[.5,.5]}]}],"game-over-assets-general":[{id:"game-over/again",url:"gameover/general/replay.png",anchor:[.5,.5]},{id:"game-over/gift-shop",url:"gameover/general/gift-shop-panel.png",anchor:[.5,.5]},{id:"game-over/panel",url:"gameover/general/panel.png",pool:3,anchor:[.5,.5]},{id:"game-over/hand",url:"gameover/general/left-hand.png",pool:2,anchor:[.5,.5]},{id:"game-over/card-hand-front",url:"gameover/general/closed-hand-front.png",pool:3,anchor:[.5,.5]},{id:"game-over/card-hand-back",url:"gameover/general/closed-hand-back.png",pool:3,anchor:[.5,.5]},{id:"game-over-hand-1",children:[]},{id:"game-over-hand-2",children:[]},{id:"game-over-hand-3",children:[]},{id:"game-over/general/confetti-1",url:"gameover/general/confetti-1.png",pool:30,anchor:[.5,.5]},{id:"game-over/general/confetti-2",url:"gameover/general/confetti-2.png",pool:30,anchor:[.5,.5]},{id:"game-over/general/confetti-3",url:"gameover/general/confetti-3.png",pool:30,anchor:[.5,.5]},{id:"game-over/general/confetti-4",url:"gameover/general/confetti-4.png",pool:30,anchor:[.5,.5]},{id:"game-over-score-field",children:[]},{id:"game-over-high-score-field",children:[]},{id:"game-over-tickets-field",children:[]},{id:"game-over/confetti-container",children:[]},{id:"game-over/ticket-particle-container",children:[]},{id:"game-over/score-title-container",children:[]},{id:"game-over/highscore-title-container",children:[]},{id:"game-over/gift-shop-title-container",children:[]},{id:"game-over/replay-title-container",children:[]},{id:"game-over/ticket",url:"gameover/general/ticket.png",anchor:[.5,.5]},{id:"game-over/game-over-title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"game-over/game-over-title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"game-over/game-over-title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"game-over/score-title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"game-over/highscore-title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"game-over/tickets-title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"game-over/gift-shop-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"game-over/replay-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"game-over/score-title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"game-over/highscore-title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"game-over/tickets-title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"game-over/gift-shop-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"game-over/replay-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"game-over/score-title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"game-over/highscore-title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"game-over/tickets-title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"game-over/gift-shop-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"game-over/replay-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"game-over/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"game-over/highscore-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"game-over/tickets-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"game-over/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"game-over/highscore-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"game-over/tickets-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"game-over/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"game-over/highscore-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"game-over/tickets-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"game-over/black",url:"gameover/general/black.png",anchor:[0,0]},{id:"game-over/spark",url:"gameover/general/spark.png",anchor:[.5,.5],pool:80},{id:"game-over/wristband-container",children:[{id:"game-over/sparkle-1",url:"gameover/general/sparkle-1.png",anchor:[.5,.5],retina:!1},{id:"game-over/glow",url:"gameover/general/glow.png",anchor:[.5,.5],retina:!1},{id:"game-over/tickets",url:"gameover/general/tickets.png",anchor:[.5,.5]},{id:"game-over/points",url:"gameover/general/points.png",anchor:[.5,.5]},{id:"game-over/sparkle-2",url:"gameover/general/sparkle-2.png",anchor:[.5,.5],retina:!1}]}],"gift-shop-assets-volcano":[{id:"gift-shop/background-layer",children:[{url:"gift-shop/blank-chunk.png"},{id:"gift-shop/background_01",x:0,children:[{url:"gift-shop/volcano/background_01.png"}]},{id:"gift-shop/background_02",x:400,children:[{url:"gift-shop/volcano/background_02.png"}]},{id:"gift-shop/background_03",x:820,children:[{url:"gift-shop/volcano/background_03.png"}]},{id:"gift-shop/background_04",x:1320,children:[{url:"gift-shop/volcano/background_04.png"}]}]},{id:"gift-shop/store-layer",children:[{url:"gift-shop/blank-chunk.png"},{id:"gift-shop/gift-shop_01",x:0,children:[{url:"gift-shop/volcano/gift-shop_01.png"}]},{id:"gift-shop/gift-shop_02",x:587,children:[{url:"gift-shop/volcano/gift-shop_02.png"}]},{id:"gift-shop/gift-shop_03",x:1174,children:[{url:"gift-shop/volcano/gift-shop_03.png"}]},{id:"gift-shop/gift-shop_04",x:1760,children:[{url:"gift-shop/volcano/gift-shop_04.png"}]}]},{id:"gift-shop/foreground",y:625,children:[{url:"gift-shop/volcano/foreground-1.png",x:100,anchor:[.5,1]},{url:"gift-shop/volcano/foreground-2.png",x:1500,anchor:[.5,1]},{url:"gift-shop/volcano/foreground-3.png",x:2700,anchor:[.5,1]}]},{id:"gift-shop/photo-booth",url:"gift-shop/volcano/photo-booth.png",anchor:[.5,1],x:338,y:560},{id:"gift-shop/claw-machine",url:"gift-shop/volcano/claw-volcano.png",anchor:[.5,1],x:0,y:600}],"gift-shop-assets-ice":[{id:"gift-shop/background-layer",children:[{url:"gift-shop/blank-chunk.png"},{id:"gift-shop/background_01",x:0,children:[{url:"gift-shop/ice/background_01.png"}]},{id:"gift-shop/background_02",x:400,children:[{url:"gift-shop/ice/background_02.png"}]},{id:"gift-shop/background_03",x:820,children:[{url:"gift-shop/ice/background_03.png"}]},{id:"gift-shop/background_04",x:1320,children:[{url:"gift-shop/ice/background_04.png"}]}]},{id:"gift-shop/store-layer",children:[{url:"gift-shop/blank-chunk.png"},{id:"gift-shop/gift-shop_01",x:0,children:[{url:"gift-shop/ice/gift-shop_01.png"}]},{id:"gift-shop/gift-shop_02",x:587,children:[{url:"gift-shop/ice/gift-shop_02.png"}]},{id:"gift-shop/gift-shop_03",x:1174,children:[{url:"gift-shop/ice/gift-shop_03.png"}]},{id:"gift-shop/gift-shop_04",x:1760,children:[{url:"gift-shop/ice/gift-shop_04.png"}]}]},{id:"gift-shop/foreground",y:625,children:[{url:"gift-shop/ice/foreground-1.png",x:100,anchor:[.5,1]},{url:"gift-shop/ice/foreground-2.png",x:1500,anchor:[.5,1]},{url:"gift-shop/ice/foreground-3.png",x:2705,anchor:[.5,1]}]},{id:"gift-shop/photo-booth",url:"gift-shop/ice/photo-booth.png",anchor:[.5,1],x:338,y:560},{id:"gift-shop/claw-machine",url:"gift-shop/ice/claw-ice.png",anchor:[.5,1],x:0,y:600}],"gift-shop-assets-jungle":[{id:"gift-shop/background-layer",children:[{url:"gift-shop/blank-chunk.png"},{id:"gift-shop/background_01",x:0,children:[{url:"gift-shop/jungle/background_01.png"}]},{id:"gift-shop/background_02",x:400,children:[{url:"gift-shop/jungle/background_02.png"}]},{id:"gift-shop/background_03",x:820,children:[{url:"gift-shop/jungle/background_03.png"}]},{id:"gift-shop/background_04",x:1320,children:[{url:"gift-shop/jungle/background_04.png"}]}]},{id:"gift-shop/store-layer",children:[{url:"gift-shop/blank-chunk.png"},{id:"gift-shop/gift-shop_01",x:0,children:[{url:"gift-shop/jungle/gift-shop_01.png"}]},{id:"gift-shop/gift-shop_02",x:587,children:[{url:"gift-shop/jungle/gift-shop_02.png"}]},{id:"gift-shop/gift-shop_03",x:1174,children:[{url:"gift-shop/jungle/gift-shop_03.png"}]},{id:"gift-shop/gift-shop_04",x:1760,children:[{url:"gift-shop/jungle/gift-shop_04.png"}]}]},{id:"gift-shop/foreground",y:625,children:[{url:"gift-shop/jungle/foreground-1.png",x:100,anchor:[.5,1]},{url:"gift-shop/jungle/foreground-2.png",x:1500,anchor:[.5,1]},{url:"gift-shop/jungle/foreground-3.png",x:2700,anchor:[.5,1]}]},{id:"gift-shop/photo-booth",url:"gift-shop/jungle/photo-booth.png",anchor:[.5,1],x:338,y:560},{id:"gift-shop/claw-machine",url:"gift-shop/jungle/claw-jungle.png",anchor:[.5,1],x:0,y:600}],"gift-shop-assets-beach":[{id:"gift-shop/background-layer",children:[{url:"gift-shop/blank-chunk.png"},{id:"gift-shop/background_01",x:0,children:[{url:"gift-shop/beach/background_01.png"}]},{id:"gift-shop/background_02",x:400,children:[{url:"gift-shop/beach/background_02.png"}]},{id:"gift-shop/background_03",x:820,children:[{url:"gift-shop/beach/background_03.png"}]},{id:"gift-shop/background_04",x:1320,children:[{url:"gift-shop/beach/background_04.png"}]}]},{id:"gift-shop/store-layer",children:[{url:"gift-shop/blank-chunk.png"},{id:"gift-shop/gift-shop_01",children:[{url:"gift-shop/beach/gift-shop_01.png"}]},{id:"gift-shop/gift-shop_02",x:587,children:[{url:"gift-shop/beach/gift-shop_02.png"}]},{id:"gift-shop/gift-shop_03",x:1174,children:[{url:"gift-shop/beach/gift-shop_03.png"}]},{id:"gift-shop/gift-shop_04",x:1760,children:[{url:"gift-shop/beach/gift-shop_04.png"}]}]},{id:"gift-shop/foreground",y:625,children:[{url:"gift-shop/beach/foreground-1.png",x:100,anchor:[.5,1]},{url:"gift-shop/beach/foreground-2.png",x:1500,anchor:[.5,1]},{url:"gift-shop/beach/foreground-3.png",x:2700,anchor:[.5,1]}]},{id:"gift-shop/photo-booth",url:"gift-shop/beach/photo-booth.png",anchor:[.5,1],x:338,y:0},{id:"gift-shop/claw-machine",url:"gift-shop/beach/claw-beach.png",anchor:[.5,1],x:0,y:600}],"gift-shop-assets-asteroid":[{id:"gift-shop/background-layer",children:[{url:"gift-shop/blank-chunk.png"},{id:"gift-shop/background_01",x:0,children:[{url:"gift-shop/asteroid/background_01.png"}]},{id:"gift-shop/background_02",x:400,children:[{url:"gift-shop/asteroid/background_02.png"}]},{id:"gift-shop/background_03",x:820,children:[{url:"gift-shop/asteroid/background_03.png"}]},{id:"gift-shop/background_04",x:1320,children:[{url:"gift-shop/asteroid/background_04.png"}]}]},{id:"gift-shop/store-layer",children:[{url:"gift-shop/blank-chunk.png"},{id:"gift-shop/gift-shop_01",children:[{url:"gift-shop/asteroid/gift-shop_01.png"}]},{id:"gift-shop/gift-shop_02",x:587,children:[{url:"gift-shop/asteroid/gift-shop_02.png"}]},{id:"gift-shop/gift-shop_03",x:1174,children:[{url:"gift-shop/asteroid/gift-shop_03.png"}]},{id:"gift-shop/gift-shop_04",x:1760,children:[{url:"gift-shop/asteroid/gift-shop_04.png"}]}]},{id:"gift-shop/foreground",y:625,children:[{url:"gift-shop/asteroid/foreground-1.png",x:100,anchor:[.5,1]},{url:"gift-shop/asteroid/foreground-2.png",x:1500,anchor:[.5,1]},{url:"gift-shop/asteroid/foreground-3.png",x:2700,anchor:[.5,1]}]},{id:"gift-shop/photo-booth",url:"gift-shop/asteroid/photo-booth.png",anchor:[.5,1],x:338,y:0},{id:"gift-shop/claw-machine",url:"gift-shop/asteroid/claw-asteroid.png",anchor:[.5,1],x:0,y:600}],"gift-shop-characters-loud-house":[{id:"gift-shop/loud-house",children:[{id:"gift-shop/characters/lincoln",x:-15,y:40,children:[{url:"gift-shop/characters/lincoln.png"},{url:"gift-shop/characters/lincoln-blink.png",x:25,y:25}]},{id:"gift-shop/characters/luna",x:180,y:0,children:[{url:"gift-shop/characters/luna.png"},{url:"gift-shop/characters/luna-blink.png",x:35,y:19}]}]}],"gift-shop-characters-school-of-rock":[{id:"gift-shop/school-of-rock",children:[{id:"gift-shop/characters/tomika",x:10,y:-15,children:[{url:"gift-shop/characters/tomika.png"},{url:"gift-shop/characters/tomika-blink.png",x:26,y:-.1}]},{id:"gift-shop/characters/zack",x:230,y:-25,children:[{url:"gift-shop/characters/zack.png"},{url:"gift-shop/characters/zack-blink.png",x:17,y:0}]}]}],"gift-shop-characters-tmnt":[{id:"gift-shop/tmnt",children:[{id:"gift-shop/characters/raph",x:5,y:35,children:[{url:"gift-shop/characters/raph.png"},{url:"gift-shop/characters/raph-blink.png",x:26.3,y:0}]},{id:"gift-shop/characters/leo",x:225,y:30,children:[{url:"gift-shop/characters/leo.png"},{url:"gift-shop/characters/leo-blink.png",x:41.3,y:1.3}]}]}],"gift-shop-characters-thundermans":[{id:"gift-shop/thundermans",children:[{id:"gift-shop/characters/phoebe",x:15,y:-25,children:[{url:"gift-shop/characters/phoebe.png"},{url:"gift-shop/characters/phoebe-blink.png",x:24.15,y:0}]},{id:"gift-shop/characters/max",x:230,y:-35,children:[{url:"gift-shop/characters/max.png"},{url:"gift-shop/characters/max-blink.png",x:20,y:0}]}]}],"gift-shop-characters-game-shakers":[{id:"gift-shop/game-shakers",children:[{id:"gift-shop/characters/babe",x:-40,y:-40,children:[{url:"gift-shop/characters/babe.png"},{url:"gift-shop/characters/babe-blink.png",x:87.5,y:25.3}]},{id:"gift-shop/characters/triple-g",x:180,y:0,children:[{url:"gift-shop/characters/triple-g.png"},{url:"gift-shop/characters/triple-g-blink.png",x:94,y:-.2}]}]}],"gift-shop-characters-nicky-ricky-dicky-dawn":[{id:"gift-shop/nicky-ricky-dicky-dawn",children:[{id:"gift-shop/characters/nicky",x:20,y:20,children:[{url:"gift-shop/characters/nicky.png"},{url:"gift-shop/characters/nicky-blink.png",x:16,y:0}]},{id:"gift-shop/characters/dawn",x:235,y:0,children:[{url:"gift-shop/characters/dawn.png"},{url:"gift-shop/characters/dawn-blink.png",x:29.5,y:0}]}]}],"gift-shop-characters-spongebob":[{id:"gift-shop/spongebob",children:[{id:"gift-shop/characters/spongebob",x:0,y:55,children:[{url:"gift-shop/characters/spongebob.png"},{url:"gift-shop/characters/spongebob-blink.png",x:26.5,y:1.5}]},{id:"gift-shop/characters/patrick",x:220,y:0,children:[{url:"gift-shop/characters/patrick.png"},{url:"gift-shop/characters/patrick-blink.png",x:46,y:34}]}]}],"gift-shop-characters-henry-danger":[{id:"gift-shop/henry-danger",children:[{id:"gift-shop/characters/henry",x:0,y:-35,children:[{url:"gift-shop/characters/henry.png"},{url:"gift-shop/characters/henry-blink.png",x:41.3,y:-.1}]},{id:"gift-shop/characters/captain-man",x:225,y:-50,children:[{url:"gift-shop/characters/captain-man.png"},{url:"gift-shop/characters/captain-man-blink.png",x:56.3,y:.1}]}]}],"gift-shop-characters-i-am-frankie":[{id:"gift-shop/i-am-frankie",children:[{id:"gift-shop/characters/dayton",x:-5,y:-30,children:[{url:"gift-shop/characters/dayton.png"},{url:"gift-shop/characters/dayton-blink.png",x:40,y:8}]},{id:"gift-shop/characters/frankie",x:185,y:-60,children:[{url:"gift-shop/characters/frankie.png"},{url:"gift-shop/characters/frankie-blink.png",x:120.5,y:34}]}]}],"gift-shop-characters-find-me-in-paris":[{id:"gift-shop/find-me-in-paris",children:[{id:"gift-shop/characters/henri",x:5,y:-60,children:[{url:"gift-shop/characters/henri.png"},{url:"gift-shop/characters/henri-blink.png",x:34,y:15}]},{id:"gift-shop/characters/lena",x:205,y:-90,children:[{url:"gift-shop/characters/lena.png"},{url:"gift-shop/characters/lena-blink.png",x:67,y:44.5}]}]}],"gift-shop-characters-knight-squad":[{id:"gift-shop/knight-squad",children:[{id:"gift-shop/characters/ciara",x:-17,y:-55,children:[{url:"gift-shop/characters/ciara.png"},{url:"gift-shop/characters/ciara-blink.png",x:64,y:22}]},{id:"gift-shop/characters/arc",x:225,y:-70,children:[{url:"gift-shop/characters/arc.png"},{url:"gift-shop/characters/arc-blink.png",x:35,y:40}]}]}],"gift-shop-assets":[{id:"gift-shop-blank-input",url:"gift-shop/blank-input.png"},{id:"gift-shop/characters",x:175,y:300,children:[]},{id:"gift-shop/layers-holder",children:[{id:"gift-shop/activity-layer",children:[{url:"gift-shop/blank-chunk.png"},{id:"gift-shop/claw-machine",x:310,children:[]},{id:"gift-shop/buy-powerups",x:890,children:[{url:"gift-shop/buy-powerups.png",anchor:[.5,1],x:0,y:570}]},{url:"gift-shop/sign-ropes.png",x:1260,y:0,anchor:[.5,0]},{id:"gift-shop/buy-clothes",x:1230,children:[{url:"gift-shop/buy-clothes.png",anchor:[.5,1],x:420,y:570}]},{id:"gift-shop/photo-booth",x:1870,children:[]}]},{id:"gift-shop/cloud-layer",children:[{url:"gift-shop/blank-chunk.png",x:0,y:0},{url:"gift-shop/cloud-small.png",x:70,y:-30,anchor:[0,0]},{url:"gift-shop/cloud.png",x:500,y:0,anchor:[0,0]},{id:"gift-shop/hand-wristband",x:650,y:435,children:[{url:"gift-shop/hand-support-large.png"},{url:"gift-shop/demo-wristband-back.png",x:151,y:-90,anchor:[.5,0]},{url:"gift-shop/hand-pointing.png",y:10,anchor:[.1,.9]},{url:"gift-shop/demo-wristband-front.png",x:155,y:-90}]},{id:"gift-shop/hand-wristband-thumbs-up",x:1160,y:480,children:[{url:"gift-shop/hand-support-small.png"},{url:"gift-shop/hand-thumbs-up.png",y:10,anchor:[.1,.9]}]},{url:"gift-shop/cloud-small.png",x:900,y:-50,anchor:[0,0]},{url:"gift-shop/cloud.png",x:1570,y:-30,anchor:[0,0]},{id:"gift-shop/hand-clothes",x:1930,y:440,children:[{url:"gift-shop/hand-support-large.png",y:0},{url:"gift-shop/hand-post.png",x:25,y:18,anchor:[.8,.9]}]},{id:"gift-shop/hand-clothes-thumbs-up",x:1540,y:480,children:[{url:"gift-shop/hand-support-small.png"},{url:"gift-shop/hand-thumbs-up.png",y:10,anchor:[.1,.9]}]},{url:"gift-shop/cloud-small.png",x:1860,y:0,anchor:[0,0]},{url:"gift-shop/cloud.png",x:2150,y:-50,anchor:[0,0]}]},{id:"gift-shop/foreground-layer",children:[{url:"gift-shop/blank-chunk.png",x:0,y:0},{id:"gift-shop/wrist-bands-sign-holder",x:985,y:0,children:[{url:"gift-shop/wrist-bands-sign.png",anchor:[.5,0]}]},{id:"gift-shop/clothes-sign-holder",x:1990,y:0,children:[{url:"gift-shop/clothes-sign.png",anchor:[.5,0]}]},{url:"gift-shop/camera.png",x:2700,y:350,anchor:[.5,0]}]}]},{id:"gift-shop/clothes-sign-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/clothes-sign-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/clothes-sign-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/wrist-bands-sign-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/wrist-bands-sign-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/wrist-bands-sign-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/game-logos/aqua-jetpack",url:"gift-shop/game-logos/aqua-jetpack.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/pin-ball",url:"gift-shop/game-logos/arctic-pinball.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/beach-buggy",url:"gift-shop/game-logos/beach-buggy-bash.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/coco-nutty",url:"gift-shop/game-logos/coco-nutty.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/dodgems",url:"gift-shop/game-logos/destruction-dodgems.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/roller-coaster-ice",url:"gift-shop/game-logos/ice-blast.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/jet-ski",url:"gift-shop/game-logos/jetski-scramble.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/laser-cave",url:"gift-shop/game-logos/laser-cave.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/mayan-madness",url:"gift-shop/game-logos/mayan-madness.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/river-rangers",url:"gift-shop/game-logos/river-rangers.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/roller-coaster-doom",url:"gift-shop/game-logos/rollercoaster-of-doom.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/tree-top-gladiators",url:"gift-shop/game-logos/treetop-gladiators.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/waterfall-wipeout",url:"gift-shop/game-logos/waterfall-wipeout.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/snowball-wars",url:"gift-shop/game-logos/snowball-wars.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/volcano-skydive",url:"gift-shop/game-logos/volcano-skydive.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/hover-drift",url:"gift-shop/game-logos/hover-drift.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/egg-scape",url:"gift-shop/game-logos/egg-scape.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/striker",url:"gift-shop/game-logos/striker.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/abducktion",url:"gift-shop/game-logos/abducktion.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/game-logos/crazy-golf",url:"gift-shop/game-logos/gravity-golf.png",pool:2,anchor:[.5,.5]},{id:"gift-shop/marker-holder",children:[],pool:4},{id:"gift-shop/marker",url:"gift-shop/marker.png",anchor:[.5,.5],pool:4},{id:"gift-shop/marker-shadow",url:"gift-shop/marker-shadow.png",anchor:[.5,.5],pool:4},{id:"gift-shop/owned-icon",url:"gift-shop/owned-icon.png",anchor:[.5,.5]},{id:"gift-shop-text",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop-dialogue-text",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop-description-text",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop-dialogue-description-text",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop-title-text",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop-price-text",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop-alert-text",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop-text",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop-dialogue-text",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop-description-text",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop-dialogue-description-text",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop-title-text",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop-price-text",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop-alert-text",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop-text",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop-dialogue-text",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop-description-text",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop-dialogue-description-text",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop-title-text",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop-price-text",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop-alert-text",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop/clothes/t-shirt-white",url:"gift-shop/clothes/t-shirt-white.png",anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/infinity-island-shirt",url:"gift-shop/clothes/infinity-island-shirt.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/dr-colloso-rabbit-shirt",url:"gift-shop/clothes/aqua-jetpack/dr-colloso-rabbit-shirt.png",x:0,y:5,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/wetsuit",url:"gift-shop/clothes/aqua-jetpack/wetsuit.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/pinball-logo-shirt",url:"gift-shop/clothes/arctic-pinball/pinball-logo-shirt.png",x:0,y:5,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/sandy-suit",url:"gift-shop/clothes/arctic-pinball/sandy-suit.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/buggy-bash-logo-shirt",url:"gift-shop/clothes/beach-buggy-bash/buggy-bash-logo-shirt.png",x:0,y:5,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/babe-shirt",url:"gift-shop/clothes/beach-buggy-bash/babe-shirt.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/dawn-jacket",url:"gift-shop/clothes/coco-nutty/dawn-jacket.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/ricky-shirt",url:"gift-shop/clothes/coco-nutty/ricky-shirt.png",x:0,y:10,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/charlotte-denim-jacket",url:"gift-shop/clothes/destruction-dodgems/charlotte-denim-jacket.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/kid-danger-outfit",url:"gift-shop/clothes/destruction-dodgems/kid-danger-outfit.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/hudson-shirt",url:"gift-shop/clothes/ice-blast/hudson-shirt.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/nasty-goats-shirt",url:"gift-shop/clothes/ice-blast/nasty-goats-shirt.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/prep-school-blazer",url:"gift-shop/clothes/jet-ski-scramble/prep-school-blazer.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/tomika-blazer",url:"gift-shop/clothes/jet-ski-scramble/tomika-blazer.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/donatello-shirt",url:"gift-shop/clothes/laser-cave/donatello-shirt.png",x:0,y:10,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/leonardo-shirt",url:"gift-shop/clothes/laser-cave/leonardo-shirt.png",x:0,y:10,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/michelangelo-shirt",url:"gift-shop/clothes/laser-cave/michelangelo-shirt.png",x:0,y:10,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/raphael-shirt",url:"gift-shop/clothes/laser-cave/raphael-shirt.png",x:0,y:10,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/captain-man-outfit",url:"gift-shop/clothes/mayan-madness/captain-man-outfit.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/safari-shirt",url:"gift-shop/clothes/mayan-madness/safari-shirt.png",x:0,y:5,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/hawaiian-shirt",url:"gift-shop/clothes/river-rangers/hawaiian-shirt.png",x:0,y:10,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/spongebob-shirt",url:"gift-shop/clothes/river-rangers/spongebob-shirt.png",x:0,y:10,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/skull-shirt",url:"gift-shop/clothes/rollercoaster-of-doom/skull-shirt.png",x:0,y:10,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/thunderman-shirt",url:"gift-shop/clothes/rollercoaster-of-doom/thunderman-shirt.png",x:0,y:10,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/luan-flower-shirt",url:"gift-shop/clothes/tree-top-gladiators/luan-flower-shirt.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/lynn-shirt",url:"gift-shop/clothes/tree-top-gladiators/lynn-shirt.png",x:0,y:7,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/dark-jacket",url:"gift-shop/clothes/waterfall-wipeout/dark-jacket.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/flower-jacket",url:"gift-shop/clothes/waterfall-wipeout/flower-jacket.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/linc-shirt",url:"gift-shop/clothes/snowball-wars/linc-shirt.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/loud-house-logo",url:"gift-shop/clothes/snowball-wars/loud-house-logo.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/henri-waistcoat",url:"gift-shop/clothes/volcano-skydive/henri-waistcoat.png",x:0,y:18,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/lena-outfit",url:"gift-shop/clothes/volcano-skydive/lena-outfit.png",x:3,y:27,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/gold-jacket",url:"gift-shop/clothes/hover-drift/gold-jacket.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/utility-jacket",url:"gift-shop/clothes/hover-drift/utility-jacket.png",x:0,y:5,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/babe-emoji-shirt",url:"gift-shop/clothes/egg-scape/babe-emoji-shirt.png",x:0,y:10,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/triple-g-jacket",url:"gift-shop/clothes/egg-scape/triple-g-jacket.png",x:0,y:15,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/jasper-hoodie",url:"gift-shop/clothes/striker/jasper-hoodie.png",x:0,y:15,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/toddler-shirt",url:"gift-shop/clothes/striker/toddler-shirt.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/ciara-top",url:"gift-shop/clothes/abducktion/ciara-top.png",x:0,y:10,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/arc-top",url:"gift-shop/clothes/abducktion/arc-top.png",x:0,y:10,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/frankie-jacket",url:"gift-shop/clothes/gravity-golf/frankie-jacket.png",x:0,y:5,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/simone-jacket",url:"gift-shop/clothes/gravity-golf/simone-jacket.png",x:0,y:5,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/accessory-blank",url:"gift-shop/clothes/accessory-blank.png",anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/infinity-island-glasses",url:"gift-shop/clothes/infinity-island-glasses.png",x:9,y:-30,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/dr-colloso-monocle",url:"gift-shop/clothes/aqua-jetpack/dr-colloso-monocle.png",x:50,y:14,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/thundermans-mask",url:"gift-shop/clothes/aqua-jetpack/thundermans-mask.png",x:0,y:3,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/merman-mask",url:"gift-shop/clothes/arctic-pinball/merman-mask.png",x:0,y:30,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/pinball-glasses",url:"gift-shop/clothes/arctic-pinball/pinball-glasses.png",x:0,y:-20,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/scubaroo-goggles",url:"gift-shop/clothes/beach-buggy-bash/scubaroo-goggles.png",y:10,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/triple-g-pixel-glasses",url:"gift-shop/clothes/beach-buggy-bash/triple-g-pixel-glasses.png",y:12,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/3d-glasses",url:"gift-shop/clothes/coco-nutty/3d-glasses.png",x:0,y:5,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/cocnut-glasses",url:"gift-shop/clothes/coco-nutty/cocnut-glasses.png",x:0,y:5,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/captain-man-mask",url:"gift-shop/clothes/destruction-dodgems/captain-man-mask.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/kid-danger-mask",url:"gift-shop/clothes/destruction-dodgems/kid-danger-mask.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/icicle-glasses",url:"gift-shop/clothes/ice-blast/icicle-glasses.png",x:0,y:5,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/ski-goggles",url:"gift-shop/clothes/ice-blast/ski-goggles.png",x:0,y:5,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/lawrence-glasses",url:"gift-shop/clothes/jet-ski-scramble/lawrence-glasses.png",x:0,y:5,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/star-glasses",url:"gift-shop/clothes/jet-ski-scramble/star-glasses.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/donatello-mask",url:"gift-shop/clothes/laser-cave/donatello-mask.png",x:17,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/leonardo-mask",url:"gift-shop/clothes/laser-cave/leonardo-mask.png",x:17,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/michelangelo-mask",url:"gift-shop/clothes/laser-cave/michelangelo-mask.png",x:17,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/raphael-mask",url:"gift-shop/clothes/laser-cave/raphael-mask.png",x:17,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/mayan-madness-glasses",url:"gift-shop/clothes/mayan-madness/mayan-madness-glasses.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/time-jerker-beard",url:"gift-shop/clothes/mayan-madness/time-jerker-beard.png",x:.5,y:75,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/bamboo-glasses",url:"gift-shop/clothes/river-rangers/bamboo-glasses.png",x:0,y:2,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/pineapple-glasses",url:"gift-shop/clothes/river-rangers/pineapple-glasses.png",x:0,y:-20,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/smoke-glasses",url:"gift-shop/clothes/rollercoaster-of-doom/smoke-glasses.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/vortex-glasses",url:"gift-shop/clothes/rollercoaster-of-doom/vortex-glasses.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/luans-prank-glasses",url:"gift-shop/clothes/tree-top-gladiators/luans-prank-glasses.png",x:0,y:20,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/red-shutter-glasses",url:"gift-shop/clothes/tree-top-gladiators/red-shutter-glasses.png",x:0,y:10,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/waterfall-glasses",url:"gift-shop/clothes/waterfall-wipeout/waterfall-glasses.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/wood-glasses",url:"gift-shop/clothes/waterfall-wipeout/wood-glasses.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/lisa-glasses",url:"gift-shop/clothes/snowball-wars/lisa-glasses.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/leni-glasses",url:"gift-shop/clothes/snowball-wars/leni-glasses.png",x:0,y:-60,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/skydive-logo-goggles",url:"gift-shop/clothes/volcano-skydive/skydive-logo-goggles.png",x:0,y:-40,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/skydiving-goggles",url:"gift-shop/clothes/volcano-skydive/skydiving-goggles.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/green-sun-glasses",url:"gift-shop/clothes/hover-drift/green-sun-glasses.png",x:0,y:3,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/colourful-glasses",url:"gift-shop/clothes/hover-drift/colourful-glasses.png",x:0,y:-1,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/egg-glasses",url:"gift-shop/clothes/egg-scape/egg-glasses.png",x:-1,y:-20,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/money-glasses",url:"gift-shop/clothes/egg-scape/money-glasses.png",x:0,y:-15,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/light-glasses",url:"gift-shop/clothes/striker/light-glasses.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/edgy-kid-danger-mask",url:"gift-shop/clothes/striker/dark-henry.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/duckbill",url:"gift-shop/clothes/abducktion/duckbill.png",x:0,y:40,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/eyepatch",url:"gift-shop/clothes/abducktion/eyepatch.png",x:-3,y:12,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/golf-club-ears",url:"gift-shop/clothes/gravity-golf/golf-club-ears.png",x:0,y:-80,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/robot-glasses",url:"gift-shop/clothes/gravity-golf/robot-glasses.png",x:0,y:8,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/hat-blank",url:"gift-shop/clothes/hat-blank.png",anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/infinity-island-hat",url:"gift-shop/clothes/infinity-island-hat.png",x:0,y:-30,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/logo-hat",url:"gift-shop/clothes/aqua-jetpack/logo-hat.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/pink-cowboy-hat",url:"gift-shop/clothes/aqua-jetpack/pink-cowboy-hat.png",x:0,y:0,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/crabby-patty",url:"gift-shop/clothes/arctic-pinball/crabby-patty.png",x:5,y:-60,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/krusty-crab-hat",url:"gift-shop/clothes/arctic-pinball/krusty-crab-hat.png",x:-7,y:-135,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/buggy-bash-helmet",url:"gift-shop/clothes/beach-buggy-bash/buggy-bash-helmet.png",y:50,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/triple-g-cap",url:"gift-shop/clothes/beach-buggy-bash/triple-g-cap.png",x:3,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/coconut-hat",url:"gift-shop/clothes/coco-nutty/coconut-hat.png",x:0,y:-20,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/flower-band",url:"gift-shop/clothes/coco-nutty/flower-band.png",x:-39,y:-11,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/crash-helmet",url:"gift-shop/clothes/destruction-dodgems/crash-helmet.png",x:0,y:17,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/henry-danger-logo-cap",url:"gift-shop/clothes/destruction-dodgems/henry-danger-logo-cap.png",x:0,y:-15,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/sky-whale",url:"gift-shop/clothes/ice-blast/sky-whale.png",x:0,y:-33,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/slushy-drink",url:"gift-shop/clothes/ice-blast/slushy-drink.png",x:3,y:-85,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/ice-cream",url:"gift-shop/clothes/jet-ski-scramble/ice-cream.png",x:0,y:-80,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/snorkle",url:"gift-shop/clothes/jet-ski-scramble/snorkle.png",x:-45,y:55,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/pizza-hat",url:"gift-shop/clothes/laser-cave/pizza-hat.png",x:0,y:-15,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/laser-cave-hat",url:"gift-shop/clothes/laser-cave/laser-cave-hat.png",x:0,y:-20,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/explorer-hat",url:"gift-shop/clothes/mayan-madness/explorer-hat.png",x:0,y:-20,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/mayan-madness-logo-hat",url:"gift-shop/clothes/mayan-madness/mayan-madness-logo-hat.png",x:-5,y:-40,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/drone-hat",url:"gift-shop/clothes/river-rangers/drone-hat.png",x:0,y:-27,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/spongebob-pineapple",url:"gift-shop/clothes/river-rangers/spongebob-pineapple.png",x:13.5,y:-143,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/nora-bow",url:"gift-shop/clothes/rollercoaster-of-doom/nora-bow.png",x:-35,y:-25,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/volcano-hat",url:"gift-shop/clothes/rollercoaster-of-doom/volcano-hat.png",x:0,y:-50,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/gladiator-hat",url:"gift-shop/clothes/tree-top-gladiators/gladiator-hat.png",x:0,y:50,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/lana-cap",url:"gift-shop/clothes/tree-top-gladiators/lana-cap.png",x:55,y:-5,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/log-hat",url:"gift-shop/clothes/waterfall-wipeout/log-hat.png",x:0,y:-75,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/waterfall-logo-hat",url:"gift-shop/clothes/waterfall-wipeout/waterfall-logo-hat.png",x:0,y:-25,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/mortar-hat",url:"gift-shop/clothes/snowball-wars/mortar-hat.png",x:0,y:-120,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/snowball-hat",url:"gift-shop/clothes/snowball-wars/snowball-hat.png",x:0,y:-110,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/hot-air-balloon",url:"gift-shop/clothes/volcano-skydive/hot-air-balloon.png",x:0,y:-110,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/balloon-hat",url:"gift-shop/clothes/volcano-skydive/balloon-hat.png",x:0,y:-120,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/space-cap",url:"gift-shop/clothes/hover-drift/space-cap.png",x:3,y:-2,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/top-hat",url:"gift-shop/clothes/hover-drift/top-hat.png",x:0,y:-42,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/gear-head",url:"gift-shop/clothes/egg-scape/gear-head.png",x:-2,y:-14,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/cave-hat",url:"gift-shop/clothes/egg-scape/cave-hat.png",x:3,y:-37,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/seed-drone",url:"gift-shop/clothes/striker/seed-drone.png",x:0,y:-50,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/striker-bell",url:"gift-shop/clothes/striker/striker-bell.png",x:2,y:-100,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/ship-hat",url:"gift-shop/clothes/abducktion/ship-hat.png",x:0,y:-55,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/fishing-for-ducks",url:"gift-shop/clothes/abducktion/fishing-for-ducks.png",x:0,y:-107,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/golf-ball-hat",url:"gift-shop/clothes/gravity-golf/golf-ball-hat.png",x:0,y:-60,anchor:[.5,.5],pool:2},{id:"gift-shop/clothes/flag-hat",url:"gift-shop/clothes/gravity-golf/flag-hat.png",x:0,y:-90,anchor:[.5,.5],pool:2},{id:"gift-shop/wristbands/wristband-back",url:"gift-shop/wristbands/wristband-back.png",anchor:[.25,0],pool:3},{id:"gift-shop/wristbands/wristband-front",url:"gift-shop/wristbands/wristband-front.png",anchor:[0,.1],pool:3},{id:"gift-shop/wristbands/secondchance",url:"gift-shop/wristbands/secondchance.png",anchor:[.5,.5]},{id:"gift-shop/wristbands/tickets",url:"gift-shop/wristbands/tickets.png",anchor:[.5,.5]},{id:"gift-shop/wristbands/points",url:"gift-shop/wristbands/points.png",anchor:[.5,.5]},{id:"gift-shop/hair/male-1",children:[{url:"gift-shop/hair/male-1-hat.png",x:0,y:9,anchor:[.5,.5]},{url:"gift-shop/hair/male-1.png",x:-1,y:5,anchor:[.5,.5]}]},{id:"gift-shop/hair/male-2",children:[{url:"gift-shop/hair/male-2-hat.png",x:0,y:8,anchor:[.5,.5]},{url:"gift-shop/hair/male-2.png",x:-2,y:6,anchor:[.5,.5]}]},{id:"gift-shop/hair/male-3",children:[{url:"gift-shop/hair/male-3-hat.png",x:0,y:14,anchor:[.5,.5]},{url:"gift-shop/hair/male-3.png",x:0,y:12,anchor:[.5,.5]}]},{id:"gift-shop/hair/male-4",children:[{url:"gift-shop/hair/male-4-hat.png",x:0,y:9,anchor:[.5,.5]},{url:"gift-shop/hair/male-4.png",x:-1,y:5,anchor:[.5,.5]}]},{id:"gift-shop/hair/male-5",children:[{url:"gift-shop/hair/male-5-hat.png",x:0,y:9,anchor:[.5,.5]},{url:"gift-shop/hair/male-5.png",x:0,y:10,anchor:[.5,.5]}]},{id:"gift-shop/hair/male-6",children:[{url:"gift-shop/hair/male-6-hat.png",x:4,y:7,anchor:[.5,.5]},{url:"gift-shop/hair/male-6.png",x:-1,y:5,anchor:[.5,.5]}]},{id:"gift-shop/hair/female-1",children:[{url:"gift-shop/hair/female-1-hat.png",x:2,y:85,anchor:[.5,.5]},{url:"gift-shop/hair/female-1.png",x:0,y:70,anchor:[.5,.5]}]},{id:"gift-shop/hair/female-2",children:[{url:"gift-shop/hair/female-2-hat.png",x:0,y:30,anchor:[.5,.5]},{url:"gift-shop/hair/female-2.png",x:0,y:0,anchor:[.5,.5]}]},{id:"gift-shop/hair/female-3",children:[{url:"gift-shop/hair/female-3-hat.png",x:0,y:45,anchor:[.5,.5]},{url:"gift-shop/hair/female-3.png",x:0,y:40,anchor:[.5,.5]}]},{id:"gift-shop/hair/female-4",children:[{url:"gift-shop/hair/female-4-hat.png",x:0,y:54,anchor:[.5,.5]},{url:"gift-shop/hair/female-4.png",x:0,y:40,anchor:[.5,.5]}]},{id:"gift-shop/hair/female-5",children:[{url:"gift-shop/hair/female-5-hat.png",x:0,y:39,anchor:[.5,.5]},{url:"gift-shop/hair/female-5.png",x:0,y:25,anchor:[.5,.5]}]},{id:"gift-shop/hair/female-6",children:[{url:"gift-shop/hair/female-6-hat.png",x:0,y:57,anchor:[.5,.5]},{url:"gift-shop/hair/female-6.png",x:0,y:7,anchor:[.5,.5]}]},{id:"gift-shop/wristband-store/dialogue",children:[{url:"gift-shop/wristband-store/black.png"},{id:"gift-shop/wristband-store/dialogue-panel",x:512,y:295,children:[{url:"gift-shop/wristband-store/dialogue.png",anchor:[.5,.5]},{url:"gift-shop/wristband-store/item-shadow.png",x:-156,y:140,anchor:[.5,.5]},{id:"gift-shop/wristband-store/sparkle",x:-180,y:0,children:[{url:"gift-shop/wristband-store/glow.png",anchor:[.5,.5],retina:!1},{url:"gift-shop/wristband-store/sparkle-1.png",anchor:[.5,.5],retina:!1},{url:"gift-shop/wristband-store/sparkle-2.png",anchor:[.5,.5],retina:!1}]},{url:"gift-shop/clothes-store/ticket-icon.png",x:10,y:45,anchor:[.5,.5]}]}]},{id:"gift-shop/wristband-store/alert",children:[{url:"gift-shop/wristband-store/black.png"},{id:"gift-shop/wristband-store/alert-panel",x:512,y:295,children:[{url:"gift-shop/wristband-store/alert.png",anchor:[.5,.5]}]}]},{id:"gift-shop/wristband-store/main-holder",children:[{url:"gift-shop/wristband-store/bg.png"},{id:"gift-shop/wristband-store/item-hand-holder",x:150,y:295,children:[{url:"gift-shop/wristband-store/item-hand-support.png",x:30,y:340,anchor:[.5,1]},{id:"gift-shop/wristband-store/item-hand",x:60,children:[{url:"gift-shop/wristband-store/item-hand.png",anchor:[.12,.76]}]}]},{id:"gift-shop/wristband-store/info-board",x:840,y:0,children:[{url:"gift-shop/wristband-store/info-board.png",anchor:[.5,0]},{id:"gift-shop/wristband-store/ticket-icon",url:"gift-shop/wristband-store/ticket-icon.png",y:430,x:-90,anchor:[.5,.5]}]}]},{id:"gift-shop/clothes-store/alert",children:[{url:"gift-shop/clothes-store/black.png"},{id:"gift-shop/clothes-store/alert-panel",x:512,y:295,children:[{url:"gift-shop/clothes-store/alert.png",anchor:[.5,.5]}]}]},{id:"gift-shop/clothes-store/dialogue",children:[{url:"gift-shop/clothes-store/black.png"},{id:"gift-shop/clothes-store/dialogue-panel",x:512,y:295,children:[{url:"gift-shop/clothes-store/dialogue.png",anchor:[.5,.5]},{url:"gift-shop/clothes-store/item-shadow.png",x:-176,y:140,anchor:[.5,.5]},{id:"gift-shop/clothes-store/sparkle",x:-180,y:0,children:[{url:"gift-shop/clothes-store/glow.png",anchor:[.5,.5],retina:!1},{url:"gift-shop/clothes-store/sparkle-1.png",anchor:[.5,.5],retina:!1}]},{url:"gift-shop/clothes-store/ticket-icon.png",x:10,y:45,anchor:[.5,.5]}]}]},{id:"gift-shop/clothes-store/main-holder",children:[{url:"gift-shop/clothes-store/bg.png",x:512,y:312.5,anchor:[.5,.5]},{id:"gift-shop/clothes-store/manikin-hand-holder",x:670,y:0,children:[{url:"gift-shop/clothes-store/manikin-hand-support.png",x:0,y:0,anchor:[1,1]},{id:"gift-shop/clothes-store/item-hand",x:-80,y:-220,children:[{url:"gift-shop/clothes-store/manikin-hand.png",x:0,y:0,anchor:[.9,.8]},{url:"gift-shop/clothes-store/manikin-body.png",x:-131.5,y:-110,anchor:[.5,1]},{url:"gift-shop/clothes-store/manikin-head.png",x:0,y:0,anchor:[.5,.9]}]}]},{id:"gift-shop/clothes-store/info-board",x:840,y:0,children:[{url:"gift-shop/clothes-store/info-board.png",anchor:[.5,0]},{id:"gift-shop/clothes-store/ticket-icon",url:"gift-shop/clothes-store/ticket-icon.png",y:430,x:-90,anchor:[.5,.5]}]}]},{id:"gift-shop/bg-half",url:"gift-shop/bg-half.png",y:625,anchor:[1,1],pool:2},{id:"gift-shop/customise-clothes/main-holder",children:[{id:"gift-shop/customise-clothes/avatar",x:512,y:440,children:[{url:"gift-shop/customise-clothes/avatar-legs.png",x:-7,y:70,anchor:[.5,.5]},{url:"gift-shop/customise-clothes/avatar-arms.png",y:-82,anchor:[.5,.5]},{url:"gift-shop/customise-clothes/dashed-arms.png",y:-82,anchor:[.5,.5]},{url:"gift-shop/customise-clothes/dashed-tshirt.png",y:-138,anchor:[.5,.5]}]},{id:"gift-shop/customise-clothes/face",children:[{url:"gift-shop/customise-clothes/face-shadow.png",y:3,anchor:[.5,.5]},{url:"gift-shop/customise-clothes/blank-face.png",anchor:[.5,.5]},{id:"gift-shop/customise-clothes/user-edit-face-holder",children:[]},{id:"gift-shop/customise-clothes/hair-holder",y:-62,children:[]},{id:"gift-shop/customise-clothes/accessories-holder",y:9,children:[]},{id:"gift-shop/customise-clothes/hat-holder",y:9,children:[]}]},{id:"gift-shop/tshirts-strip",x:512,y:302,children:[]},{id:"gift-shop/accessories-strip",x:512,y:310,children:[]},{id:"gift-shop/hats-strip",x:512,y:315,children:[]},{id:"gift-shop/customise-clothes/tabs",x:350,y:550,children:[{id:"gift-shop/customise-clothes/tshirt-tab",children:[{url:"gift-shop/customise-clothes/tab-bg.png",anchor:[.5,.5]},{url:"gift-shop/customise-clothes/tab-tshirt.png",anchor:[.5,.5]}]},{id:"gift-shop/customise-clothes/accessories-tab",x:150,children:[{url:"gift-shop/customise-clothes/tab-bg.png",anchor:[.5,.5]},{url:"gift-shop/customise-clothes/tab-accessories.png",anchor:[.5,.5]}]},{id:"gift-shop/customise-clothes/hat-tab",x:300,children:[{url:"gift-shop/customise-clothes/tab-bg.png",anchor:[.5,.5]},{url:"gift-shop/customise-clothes/tab-hat.png",anchor:[.5,.5]}]},{url:"gift-shop/customise-clothes/tabs-border.png",x:150,anchor:[.5,.5]}]}]},{id:"gift-shop/customise-avatar/main-holder",children:[{id:"gift-shop/customise-avatar/avatar",x:670,y:570,children:[{url:"gift-shop/customise-avatar/avatar-legs.png",x:-7,y:70,anchor:[.5,.5]},{url:"gift-shop/customise-avatar/avatar-arms.png",y:-82,anchor:[.5,.5]},{url:"gift-shop/customise-avatar/dashed-arms.png",y:-82,anchor:[.5,.5]},{id:"gift-shop/customise-avatar/tshirt-holder",y:-138,children:[{url:"gift-shop/customise-avatar/dashed-tshirt.png",anchor:[.5,.5]}]},{url:"gift-shop/customise-avatar/face-shadow.png",y:-308,anchor:[.5,.5]},{url:"gift-shop/customise-avatar/blank-face.png",y:-310,anchor:[.5,.5]},{id:"gift-shop/customise-avatar/user-edit-face-holder",children:[],y:-310},{id:"gift-shop/customise-avatar/hair-holder",y:-370,children:[]},{id:"gift-shop/customise-avatar/accessory-holder",y:-315,children:[]},{id:"gift-shop/customise-avatar/hat-holder",y:-370,children:[]}]}]},{id:"gift-shop/customise-avatar/skin-colour-pallette",x:35,y:150,children:[{url:"gift-shop/customise-avatar/swatch-pallette.png"},{id:"gift-shop/customise-avatar/skin-swatches-holder",children:[]}]},{id:"gift-shop/customise-avatar/hair-colour-pallette",x:35,y:150,children:[{url:"gift-shop/customise-avatar/swatch-pallette.png"},{id:"gift-shop/customise-avatar/hair-swatches-holder",children:[]}]},{id:"gift-shop/customise-avatar/swatch",url:"gift-shop/customise-avatar/swatch.png",anchor:[.5,.5],pool:18},{id:"gift-shop/customise-avatar/swatch-surround",url:"gift-shop/customise-avatar/swatch-surround.png",anchor:[.5,.5],pool:18},{id:"gift-shop/customise-avatar/swatch-holder",children:[],pool:18},{id:"gift-shop/skin-pallette-text",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/hair-pallette-text",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/hair-style-text",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/skin-pallette-text",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop/hair-pallette-text",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop/hair-style-text",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop/skin-pallette-text",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop/hair-pallette-text",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop/hair-style-text",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop/photo-booth/main-holder",children:[{id:"gift-shop/photo-booth/photo-elements-holder",children:[{id:"gift-shop/photo-booth/bg",x:384,y:290,children:[{id:"gift-shop/photo-booth/volcano-bg",url:"gift-shop/photo-booth/volcano-bg.png",x:60,anchor:[.5,.5]},{id:"gift-shop/photo-booth/jungle-bg",url:"gift-shop/photo-booth/jungle-bg.png",x:60,anchor:[.5,.5]},{id:"gift-shop/photo-booth/ice-bg",url:"gift-shop/photo-booth/ice-bg.png",x:60,anchor:[.5,.5]},{id:"gift-shop/photo-booth/beach-bg",url:"gift-shop/photo-booth/beach-bg.png",x:60,anchor:[.5,.5]},{id:"gift-shop/photo-booth/asteroid-bg",url:"gift-shop/photo-booth/asteroid-bg.png",x:60,anchor:[.5,.5]}]},{url:"gift-shop/photo-booth/black.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/characters",x:175,y:300,children:[]},{id:"gift-shop/photo-booth/avatar-holder",x:384,y:400,children:[{id:"gift-shop/photo-booth/avatar",children:[{url:"gift-shop/photo-booth/avatar-legs.png",x:-10,y:170,anchor:[.5,.5]},{url:"gift-shop/photo-booth/dashed-arms.png",y:16,anchor:[.5,.5]},{url:"gift-shop/photo-booth/avatar-arms.png",y:16,anchor:[.5,.5]},{id:"gift-shop/photo-booth/tshirt-holder",y:-40,children:[]},{url:"gift-shop/photo-booth/avatar-slime.png",x:-124,y:-162},{id:"gift-shop/photo-booth/avatar-head",children:[{url:"gift-shop/photo-booth/face-shadow.png",y:-212,anchor:[.5,.5]},{id:"gift-shop/photo-booth/user-edit-face-holder",children:[],y:-214},{url:"gift-shop/photo-booth/blank-face.png",y:-214,anchor:[.5,.5]},{id:"gift-shop/photo-booth/hair-holder",y:-277,children:[]},{id:"gift-shop/photo-booth/hat-holder",y:-272,children:[]},{id:"gift-shop/photo-booth/accessory-holder",y:-219,children:[]}]},{id:"gift-shop/photo-booth/score-card",y:55,children:[{url:"gift-shop/photo-booth/score-card.png",anchor:[.5,.5]},{url:"gift-shop/photo-booth/hands-dashed.png",y:48,anchor:[.5,.5]},{url:"gift-shop/photo-booth/hands.png",y:48,anchor:[.5,.5]},{url:"gift-shop/photo-booth/sign-slime.png",x:-155,y:-70}]}]}]}]},{id:"gift-shop/photo-booth/photo-booth-flash-element",url:"gift-shop/photo-booth/photo-booth-flash-element.png"},{id:"gift-shop/photo-booth/photo-booth-frame",x:384,y:290,children:[{url:"gift-shop/photo-booth/viewfinder.png",x:0,y:0,anchor:[.5,.5]}]}]},{id:"gift-shop/photo-booth/photo-frame-holder",children:[]},{id:"gift-shop/photo-booth/photo-frame-logo-holder",children:[{id:"gift-shop/photo-booth/beach-buggy",url:"gift-shop/photo-booth/photo-frame-logo-beach-buggy.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/coco-nutty",url:"gift-shop/photo-booth/photo-frame-logo-coco-nutty.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/dodgems",url:"gift-shop/photo-booth/photo-frame-logo-dodgems.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/roller-coaster-doom",url:"gift-shop/photo-booth/photo-frame-logo-doom.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/roller-coaster-ice",url:"gift-shop/photo-booth/photo-frame-logo-ice-blast.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/aqua-jetpack",url:"gift-shop/photo-booth/photo-frame-logo-jet-pack.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/jet-ski",url:"gift-shop/photo-booth/photo-frame-logo-jet-ski.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/mayan-madness",url:"gift-shop/photo-booth/photo-frame-logo-mayan.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/laser-cave",url:"gift-shop/photo-booth/photo-frame-logo-laser-cave.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/pin-ball",url:"gift-shop/photo-booth/photo-frame-logo-pin-ball.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/river-rangers",url:"gift-shop/photo-booth/photo-frame-logo-river-rangers.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/tree-top-gladiators",url:"gift-shop/photo-booth/photo-frame-logo-treetop-gladiators.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/waterfall-wipeout",url:"gift-shop/photo-booth/photo-frame-logo-waterfall-wipeout.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/snowball-wars",url:"gift-shop/photo-booth/photo-frame-logo-snowball-wars.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/volcano-skydive",url:"gift-shop/photo-booth/photo-frame-logo-volcano-skydive.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/hover-drift",url:"gift-shop/photo-booth/photo-frame-logo-hover-drift.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/egg-scape",url:"gift-shop/photo-booth/photo-frame-logo-egg-scape.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/striker",url:"gift-shop/photo-booth/photo-frame-logo-striker.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/abducktion",url:"gift-shop/photo-booth/photo-frame-logo-abducktion.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/crazy-golf",url:"gift-shop/photo-booth/photo-frame-logo-gravity-golf.png",anchor:[.5,.5]}]},{id:"gift-shop/photo-booth/photo-frame-print-layer",url:"gift-shop/photo-booth/photo-frame-print-layer.png"},{id:"gift-shop/photo-booth/photo-frame-print-layer-border",url:"gift-shop/photo-booth/photo-frame-print-layer-border.png",pool:4},{id:"gift-shop/photo-booth/photo-frame-print-layer-border-shadow",url:"gift-shop/photo-booth/photo-frame-print-layer-border-shadow.png",pool:4},{id:"gift-shop/photo-booth/photo-frame-shade-overlay",url:"gift-shop/photo-booth/photo-frame-shade-overlay.png",anchor:[0,1]},{id:"gift-shop/photo-booth/photo-frame-light-overlay",url:"gift-shop/photo-booth/photo-frame-light-overlay.png"},{id:"gift-shop/photo-booth/button-line",url:"gift-shop/photo-booth/button-line.png",anchor:[0,.5],pool:2},{id:"gift-shop/photo-booth/button-line-dashed",url:"gift-shop/photo-booth/button-line-dashed.png",anchor:[0,.5]},{id:"gift-shop/photo-booth/photo-button-line-dashed",url:"gift-shop/photo-booth/photo-button-line-dashed.png"},{id:"gift-shop/photo-booth/photo-button-line",url:"gift-shop/photo-booth/photo-button-line.png"},{url:"gift-shop/photo-booth/photo-booth-frame-left.png"},{url:"gift-shop/photo-booth/photo-booth-frame-top.png"},{url:"gift-shop/photo-booth/photo-booth-frame-right.png"},{url:"gift-shop/photo-booth/photo-booth-frame-bottom.png"},{url:"gift-shop/photo-booth/photo-booth-frame-fill.png",pool:4},{id:"gift-shop/photo-booth/photo-preview-bg-panel",url:"gift-shop/photo-booth/photo-preview-bg-panel.png",pool:2,anchor:[1,.5]},{id:"gift-shop/image-download-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/image-download-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop/image-download-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop/image-submit-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/image-submit-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop/image-submit-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop/photo-booth/text-prompt-holder",children:[]},{id:"gift-shop/photo-booth/photo-submitting-circle",url:"gift-shop/photo-booth/photo-submitting-circle.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/submitting-text-downloading",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/photo-booth/submitting-text-downloading",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop/photo-booth/submitting-text-downloading",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop/photo-booth/submitting-text-submitted",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/photo-booth/submitting-text-submitted",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop/photo-booth/submitting-text-submitted",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop/photo-booth/submitting-text-downloaded-description",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/photo-booth/submitting-text-downloaded-description",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop/photo-booth/submitting-text-downloaded-description",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop/photo-booth/submitting-text-submitted-description",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/photo-booth/submitting-text-submitted-description",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop/photo-booth/submitting-text-submitted-description",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop/photo-booth/photo-submitting-thumbs-up",url:"gift-shop/photo-booth/photo-submitting-thumbs-up.png",anchor:[.5,0]},{id:"gift-shop/photo-booth/score-font",y:-48,dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/photo-booth/score-font",y:-48,dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop/photo-booth/score-font",y:-48,dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop/image-edit-clip-container",children:[{id:"gift-shop/image-holder",children:[]}]},{id:"gift-shop/finger-center-graphic",url:"gift-shop/finger-center-graphic.png",anchor:[.5,.5]},{id:"gift-shop/finger-graphic-guide-1",url:"gift-shop/finger-graphic-guide-1.png",anchor:[.5,.5]},{id:"gift-shop/finger-graphic-guide-2",url:"gift-shop/finger-graphic-guide-2.png",anchor:[.5,.5]},{id:"gift-shop/scale-handle",url:"gift-shop/edit-image/scale-handle.png",anchor:[.5,.5]},{id:"gift-shop/rotation-handle",url:"gift-shop/edit-image/rotation-handle.png",anchor:[.5,.5]},{id:"gift-shop/image-rotate-icon",url:"gift-shop/edit-image/image-rotate-icon.png",anchor:[.5,.5]},{id:"gift-shop/image-scale-icon-large",url:"gift-shop/edit-image/image-scale-icon-large.png",anchor:[.5,.5]},{id:"gift-shop/image-scale-icon-small",url:"gift-shop/edit-image/image-scale-icon-small.png",anchor:[.5,.5]},{id:"gift-shop/rotation-handle-runner",url:"gift-shop/edit-image/rotation-handle-runner.png",anchor:[.5,.5]},{id:"gift-shop/scale-handle-runner",url:"gift-shop/edit-image/scale-handle-runner.png",anchor:[.5,.5]},{id:"gift-shop/upload-frame-shape",url:"gift-shop/edit-image/upload-frame-shape.png",pool:4},{id:"gift-shop/upload-frame-fill",url:"gift-shop/edit-image/upload-frame-fill.png",pool:2},{id:"gift-shop/upload-shape",url:"gift-shop/edit-image/upload-shape.png",pool:4},{id:"gift-shop/eye-line-guide",url:"gift-shop/edit-image/eye-line-guide.png",anchor:[.5,0]},{id:"gift-shop/photo-booth/eye-line-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/photo-booth/eye-line-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop/photo-booth/eye-line-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop/photo-booth/user-photo-warning",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"gift-shop/photo-booth/user-photo-warning",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"gift-shop/photo-booth/user-photo-warning",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"gift-shop/upload-icon",url:"gift-shop/edit-image/upload-icon.png",anchor:[.5,.5]},{id:"gift-shop/upload-message",url:"gift-shop/edit-image/upload-message.png",anchor:[0,1],loc:!0},{id:"gift-shop/edit-image-mobile-instructions",url:"gift-shop/edit-image/edit-image-mobile-instructions.png",anchor:[0,1],loc:!0},{id:"gift-shop/user-photo-preview-holder",children:[]},{id:"gift-shop/user-photo-shadow-holder",children:[]},{id:"gift-shop/photo-booth/photo-preview-overlay",url:"gift-shop/photo-booth/photo-preview-overlay.png",pool:2},{id:"gift-shop/photo-booth/photo-preview-shadow",url:"gift-shop/photo-booth/photo-preview-shadow.png"},{id:"gift-shop/photo-booth/photo-preview-star",url:"gift-shop/photo-booth/photo-preview-star.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/slime-burst-left-1",url:"gift-shop/photo-booth/slime-particle-1.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-left-2",url:"gift-shop/photo-booth/slime-particle-2.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-left-3",url:"gift-shop/photo-booth/slime-particle-3.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-left-holder",x:0,y:0,children:[]},{id:"gift-shop/photo-booth/slime-burst-right-1",url:"gift-shop/photo-booth/slime-particle-1.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-right-2",url:"gift-shop/photo-booth/slime-particle-2.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-right-3",url:"gift-shop/photo-booth/slime-particle-3.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-right-holder",x:0,y:0,children:[]},{id:"gift-shop/photo-booth/slime-burst-center-1",url:"gift-shop/photo-booth/slime-particle-1.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-center-2",url:"gift-shop/photo-booth/slime-particle-2.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-center-3",url:"gift-shop/photo-booth/slime-particle-3.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-center-holder",x:0,y:0,children:[]},{id:"gift-shop/photo-booth/slime-burst-left-back-1",url:"gift-shop/photo-booth/slime-back-particle-1.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-left-back-2",url:"gift-shop/photo-booth/slime-back-particle-2.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-left-back-holder",x:0,y:0,children:[]},{id:"gift-shop/photo-booth/slime-burst-right-back-1",url:"gift-shop/photo-booth/slime-back-particle-1.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-right-back-2",url:"gift-shop/photo-booth/slime-back-particle-2.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-right-back-holder",x:0,y:0,children:[]},{id:"gift-shop/photo-booth/slime-burst-center-back-1",url:"gift-shop/photo-booth/slime-back-particle-1.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-center-back-2",url:"gift-shop/photo-booth/slime-back-particle-2.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-center-back-holder",x:0,y:0,children:[]},{id:"gift-shop/photo-booth/slime-burst-left-small-1",url:"gift-shop/photo-booth/slime-particle-1.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-left-small-2",url:"gift-shop/photo-booth/slime-particle-2.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-left-small-holder",x:0,y:0,children:[]},{id:"gift-shop/photo-booth/slime-burst-left-small2-1",url:"gift-shop/photo-booth/slime-back-particle-1.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-left-small2-2",url:"gift-shop/photo-booth/slime-back-particle-2.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-left-small2-holder",x:0,y:0,children:[]},{id:"gift-shop/photo-booth/slime-burst-right-small-1",url:"gift-shop/photo-booth/slime-particle-1.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-right-small-2",url:"gift-shop/photo-booth/slime-particle-2.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-right-small-holder",x:0,y:0,children:[]},{id:"gift-shop/photo-booth/slime-burst-right-small2-1",url:"gift-shop/photo-booth/slime-back-particle-1.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-right-small2-2",url:"gift-shop/photo-booth/slime-back-particle-2.png",anchor:[.5,.5],pool:45},{id:"gift-shop/photo-booth/slime-burst-right-small2-holder",x:0,y:0,children:[]},{id:"gift-shop/photo-booth/photobooth-splat-1",url:"gift-shop/photo-booth/photobooth-splat-1.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/photobooth-splat-2",url:"gift-shop/photo-booth/photobooth-splat-2.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/photobooth-splat-3",url:"gift-shop/photo-booth/photobooth-splat-3.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/photobooth-splat-4",url:"gift-shop/photo-booth/photobooth-splat-4.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/photobooth-splat-5",url:"gift-shop/photo-booth/photobooth-splat-5.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/photobooth-splat-6",url:"gift-shop/photo-booth/photobooth-splat-6.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/photobooth-splat-7",url:"gift-shop/photo-booth/photobooth-splat-7.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/photobooth-splat-8",url:"gift-shop/photo-booth/photobooth-splat-8.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/frame-slime",url:"gift-shop/photo-booth/frame-slime.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/slime-blob-1",url:"gift-shop/photo-booth/slime-blob-1.png",anchor:[.5,.5],pool:3},{id:"gift-shop/photo-booth/slime-blob-2",url:"gift-shop/photo-booth/slime-blob-2.png",anchor:[.5,.5],pool:3},{id:"gift-shop/photo-booth/slime-blob-3",url:"gift-shop/photo-booth/slime-blob-3.png",anchor:[.5,.5],pool:3},{id:"gift-shop/photo-booth/timer-icon",url:"gift-shop/photo-booth/timer-icon.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/timer-icon-1",url:"gift-shop/photo-booth/timer-icon-1.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/timer-icon-2",url:"gift-shop/photo-booth/timer-icon-2.png",anchor:[.5,.5]},{id:"gift-shop/photo-booth/timer-icon-3",url:"gift-shop/photo-booth/timer-icon-3.png",anchor:[.5,.5]}],"gift-shop-characters-photo-booth-loud-house":[{id:"photo-booth/loud-house",children:[{id:"photo-booth/characters/lincoln",x:-140,y:-250,children:[{url:"gift-shop/characters/photo-booth/lincoln.png"},{url:"gift-shop/characters/photo-booth/lincoln-blink.png",x:65,y:76},{url:"gift-shop/characters/photo-booth/lincoln-slime.png",x:15,y:35,alpha:0}]},{id:"photo-booth/characters/luna",x:270,y:-220,children:[{url:"gift-shop/characters/photo-booth/luna.png"},{url:"gift-shop/characters/photo-booth/luna-blink.png",x:120,y:84},{url:"gift-shop/characters/photo-booth/luna-slime.png",x:60,y:-3,alpha:0}]}]}],"gift-shop-characters-photo-booth-nicky-ricky-dicky-dawn":[{id:"photo-booth/nicky-ricky-dicky-dawn",children:[{id:"photo-booth/characters/nicky",x:-120,y:-190,children:[{url:"gift-shop/characters/photo-booth/nicky.png"},{url:"gift-shop/characters/photo-booth/nicky-blink.png",x:45,y:48},{url:"gift-shop/characters/photo-booth/nicky-slime.png",x:34,y:-2,alpha:0}]},{id:"photo-booth/characters/dawn",x:255,y:-170,children:[{url:"gift-shop/characters/photo-booth/dawn.png"},{url:"gift-shop/characters/photo-booth/dawn-blink.png",x:115,y:45},{url:"gift-shop/characters/photo-booth/dawn-slime.png",x:38,y:18,alpha:0}]}]}],"gift-shop-characters-photo-booth-school-of-rock":[{id:"photo-booth/school-of-rock",children:[{id:"photo-booth/characters/tomika",x:-120,y:-200,children:[{url:"gift-shop/characters/photo-booth/tomika.png"},{url:"gift-shop/characters/photo-booth/tomika-blink.png",x:82,y:30},{url:"gift-shop/characters/photo-booth/tomika-slime.png",x:5,y:-2,alpha:0}]},{id:"photo-booth/characters/zack",x:320,y:-210,children:[{url:"gift-shop/characters/photo-booth/zack.png"},{url:"gift-shop/characters/photo-booth/zack-blink.png",x:59,y:48},{url:"gift-shop/characters/photo-booth/zack-slime.png",x:3,y:0,alpha:0}]}]}],"gift-shop-characters-photo-booth-game-shakers":[{id:"photo-booth/game-shakers",children:[{id:"photo-booth/characters/babe",x:-150,y:-220,children:[{url:"gift-shop/characters/photo-booth/babe.png"},{url:"gift-shop/characters/photo-booth/babe-blink.png",x:172,y:85.3},{url:"gift-shop/characters/photo-booth/babe-slime.png",x:92,y:65,alpha:0}]},{id:"photo-booth/characters/triple-g",x:180,y:-220,children:[{url:"gift-shop/characters/photo-booth/triple-g.png"},{url:"gift-shop/characters/photo-booth/triple-g-blink.png",x:249.5,y:0},{url:"gift-shop/characters/photo-booth/triple-g-slime.png",x:199,y:8,alpha:0}]}]}],"gift-shop-characters-photo-booth-henry-danger":[{id:"photo-booth/henry-danger",children:[{id:"photo-booth/characters/henry",x:-120,y:-220,children:[{url:"gift-shop/characters/photo-booth/henry.png"},{url:"gift-shop/characters/photo-booth/henry-blink.png",x:116,y:37},{url:"gift-shop/characters/photo-booth/henry-slime.png",x:52,y:0,alpha:0}]},{id:"photo-booth/characters/captain-man",x:225,y:-220,children:[{url:"gift-shop/characters/photo-booth/captain-man.png"},{url:"gift-shop/characters/photo-booth/captain-man-blink.png",x:138.7,y:44.65},{url:"gift-shop/characters/photo-booth/captain-man-slime.png",x:15,y:0,alpha:0}]}]}],"gift-shop-characters-photo-booth-thundermans":[{id:"photo-booth/thundermans",children:[{id:"photo-booth/characters/phoebe",x:-80,y:-205,children:[{url:"gift-shop/characters/photo-booth/phoebe.png"},{url:"gift-shop/characters/photo-booth/phoebe-blink.png",x:139,y:29},{url:"gift-shop/characters/photo-booth/phoebe-slime.png",x:75,y:-1,alpha:0}]},{id:"photo-booth/characters/max",x:250,y:-205,children:[{url:"gift-shop/characters/photo-booth/max.png"},{url:"gift-shop/characters/photo-booth/max-blink.png",x:64,y:49},{url:"gift-shop/characters/photo-booth/max-slime.png",x:28,y:0,alpha:0}]}]}],"gift-shop-characters-photo-booth-spongebob":[{id:"photo-booth/spongebob",children:[{id:"photo-booth/characters/spongebob",x:-120,y:-220,children:[{url:"gift-shop/characters/photo-booth/spongebob.png"},{url:"gift-shop/characters/photo-booth/spongebob-blink.png",x:81,y:17},{url:"gift-shop/characters/photo-booth/spongebob-slime.png",x:5,y:0,alpha:0}]},{id:"photo-booth/characters/patrick",x:240,y:-210,children:[{url:"gift-shop/characters/photo-booth/patrick.png"},{url:"gift-shop/characters/photo-booth/patrick-blink.png",x:106,y:40},{url:"gift-shop/characters/photo-booth/patrick-slime.png",x:43,y:-5,alpha:0}]}]}],"gift-shop-characters-photo-booth-tmnt":[{id:"photo-booth/tmnt",children:[{id:"photo-booth/characters/raph",x:-90,y:-210,children:[{url:"gift-shop/characters/photo-booth/raph.png"},{url:"gift-shop/characters/photo-booth/raph-blink.png",x:76,y:9},{url:"gift-shop/characters/photo-booth/raph-slime.png",x:40,y:35,alpha:0}]},{id:"photo-booth/characters/leo",x:210,y:-210,children:[{url:"gift-shop/characters/photo-booth/leo.png"},{url:"gift-shop/characters/photo-booth/leo-blink.png",x:122,y:22},{url:"gift-shop/characters/photo-booth/leo-slime.png",x:100,y:3,alpha:0}]}]}],"gift-shop-characters-photo-booth-i-am-frankie":[{id:"photo-booth/i-am-frankie",children:[{id:"photo-booth/characters/dayton",x:-100,y:55,children:[{url:"gift-shop/characters/photo-booth/dayton.png"},{url:"gift-shop/characters/photo-booth/dayton-blink.png",x:154,y:25},{url:"gift-shop/characters/photo-booth/dayton-slime.png",x:65,y:0,alpha:1}]},{id:"photo-booth/characters/frankie",x:290,y:120,children:[{url:"gift-shop/characters/photo-booth/frankie.png"},{url:"gift-shop/characters/photo-booth/frankie-blink.png",x:170,y:29},{url:"gift-shop/characters/photo-booth/frankie-slime.png",x:20,y:0,alpha:1}]}]}],"gift-shop-characters-photo-booth-find-me-in-paris":[{id:"photo-booth/find-me-in-paris",children:[{id:"photo-booth/characters/henri",x:-120,y:-220,children:[{url:"gift-shop/characters/photo-booth/henri.png"},{url:"gift-shop/characters/photo-booth/henri-blink.png",x:126.5,y:63},{url:"gift-shop/characters/photo-booth/henri-slime.png",x:70,y:2,alpha:0}]},{id:"photo-booth/characters/lena",x:250,y:-220,children:[{url:"gift-shop/characters/photo-booth/lena.png"},{url:"gift-shop/characters/photo-booth/lena-blink.png",x:224.5,y:57.3},{url:"gift-shop/characters/photo-booth/lena-slime.png",x:125,y:130,alpha:0}]}]}],"gift-shop-characters-photo-booth-knight-squad":[{id:"photo-booth/knight-squad",children:[{id:"photo-booth/characters/ciara",x:-140,y:40,children:[{url:"gift-shop/characters/photo-booth/ciara.png"},{url:"gift-shop/characters/photo-booth/ciara-blink.png",x:220.5,y:70.5},{url:"gift-shop/characters/photo-booth/ciara-slime.png",x:150,y:30,alpha:0}]},{id:"photo-booth/characters/arc",x:240,y:40,children:[{url:"gift-shop/characters/photo-booth/arc.png"},{url:"gift-shop/characters/photo-booth/arc-blink.png",x:149.3,y:135.2},{url:"gift-shop/characters/photo-booth/arc-slime.png",x:75,y:73,alpha:0}]}]}],"beach-buggy-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"tutorial/beach-buggy/help-split-vertical-short",url:"beach-buggy/help-split-vertical-short.png",x:0,y:-27,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/beach-buggy/help-split-horizontal",url:"beach-buggy/help-split-horizontal.png",x:0,y:100,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/beach-buggy/help-buggy-motion",url:"beach-buggy/help-buggy-motion.png",x:-170,y:-80,anchor:[.5,.5]},{id:"tutorial/beach-buggy/help-buggy-flip",url:"beach-buggy/help-buggy-flip.png",x:170,y:-100,anchor:[.5,.5]},{id:"tutorial/beach-buggy/help-buggy-desktop-keys-1",url:"beach-buggy/help-buggy-desktop-keys-1.png",x:-145,y:40,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/beach-buggy/help-buggy-desktop-keys-2",url:"beach-buggy/help-buggy-desktop-keys-2.png",x:170,y:40,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/beach-buggy/help-buggy-desktop-keys-3",url:"beach-buggy/help-buggy-desktop-keys-3.png",x:-70,y:145,anchor:[.5,.5],platformspecific:"desktop",loc:!0},{id:"tutorial/beach-buggy/help-buggy-flip-button",url:"beach-buggy/help-buggy-flip-button.png",x:110,y:150,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/beach-buggy/help-split-vertical-long",url:"beach-buggy/help-split-vertical-long.png",x:0,y:0,anchor:[.5,.5],platformspecific:"mobile"},{id:"tutorial/beach-buggy/help-buggy-mobile-keys-1",url:"beach-buggy/help-buggy-mobile-keys-1.png",x:-145,y:80,anchor:[.5,.5],platformspecific:"mobile"},{id:"tutorial/beach-buggy/help-buggy-mobile-keys-2",url:"beach-buggy/help-buggy-mobile-keys-2.png",x:170,y:80,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"tutorial/beach-buggy/help-split-vertical-long",url:"beach-buggy/help-split-vertical-long.png",x:0,y:10,anchor:[.5,.5]},{id:"tutorial/beach-buggy/help-time",url:"beach-buggy/help-time.png",x:-160,y:-120,anchor:[.5,.5]},{id:"tutorial/beach-buggy/help-buggy-checkpoint",url:"beach-buggy/help-buggy-checkpoint.png",x:-160,y:-10,anchor:[.5,.5]},{id:"tutorial/beach-buggy/help-health-bar",url:"beach-buggy/help-health-bar.png",x:160,y:-95,anchor:[.5,.5]},{id:"tutorial/beach-buggy/help-buggy-crash",url:"beach-buggy/help-buggy-crash.png",x:160,y:40,anchor:[.5,.5]},{id:"tutorial/beach-buggy/help-thumbs-up",url:"beach-buggy/help-thumbs-up.png",x:-160,y:170,anchor:[.5,.5]},{id:"tutorial/beach-buggy/help-thumbs-down",url:"beach-buggy/help-thumbs-down.png",x:160,y:170,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"tutorial/beach-buggy/powerup-help",url:"beach-buggy/powerup-help.png",x:10,y:10,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/beach-buggy/powerup-help-2",url:"beach-buggy/powerup-help-2.png",x:10,y:10,anchor:[.5,.5],platformspecific:"mobile"}]}],"beach-buggy-assets":[{id:"main-holder",children:[]},{id:"beach-buggy/blank-input",url:"beach-buggy/blank-input.png"},{id:"beach-buggy/body",children:[{url:"beach-buggy/exhaust.png",x:-162,y:-42,anchor:[-.2,.5]},{url:"beach-buggy/supercharger.png",x:112,y:-30,anchor:[.5,.5]},{url:"beach-buggy/body.png",anchor:[.5,.5]}]},{id:"beach-buggy/character",url:"beach-buggy/buggy-body-character.png",anchor:[.5,.5]},{id:"beach-buggy/ggg-character",url:"beach-buggy/buggy-body-triple-character.png",anchor:[.5,.5]},{id:"beach-buggy/kenzie-character",url:"beach-buggy/buggy-body-kenzie-character.png",anchor:[.5,.5]},{id:"beach-buggy/babe-character",url:"beach-buggy/buggy-body-babe-character.png",anchor:[.5,.5]},{id:"beach-buggy/hudson-character",url:"beach-buggy/buggy-body-hudson-character.png",anchor:[.5,.5]},{id:"beach-buggy/wheel-front",children:[{url:"beach-buggy/wheel-front.png",anchor:[.5,.5]},{url:"beach-buggy/wheel-big.png",anchor:[.5,.5]}]},{id:"beach-buggy/wheel-back",children:[{url:"beach-buggy/wheel-back.png",anchor:[.5,.5]},{url:"beach-buggy/wheel-big.png",anchor:[.5,.5]}]},{id:"beach-buggy/wheel-back-support",url:"beach-buggy/support.png",anchor:[.5,.5]},{id:"beach-buggy/wheel-front-support",url:"beach-buggy/support.png",anchor:[.5,.5]},{id:"beach-buggy/score-bg",url:"beach-buggy/score-bg.png",anchor:[0,.5]},{id:"beach-buggy/dust-particle-2",url:"beach-buggy/dust-particle-2.png",anchor:[.5,.5],pool:50},{id:"beach-buggy/spark",url:"beach-buggy/spark.png",anchor:[.5,.5],pool:30},{id:"beach-buggy/dust-particle",url:"beach-buggy/dust-particle.png",anchor:[.5,.5],pool:30},{id:"beach-buggy/rear-dust-particle",url:"beach-buggy/dust-particle.png",anchor:[.5,.5],pool:30},{id:"beach-buggy/boost-particle",url:"beach-buggy/boost-particle.png",anchor:[.5,.5],pool:30,retina:!1},{id:"beach-buggy/small-track",url:"beach-buggy/small-track.png",anchor:[.5,.5],pool:60},{id:"beach-buggy/large-track",url:"beach-buggy/large-track.png",anchor:[.5,.5],pool:60},{id:"beach-buggy/damage-detector",url:"beach-buggy/damage-detector.png",anchor:[.5,.5],pool:3},{id:"beach-buggy/kenzie-head",url:"beach-buggy/kenzie-head.png",anchor:[.5,.5]},{id:"beach-buggy/babe-head",url:"beach-buggy/babe-head.png",anchor:[.5,.5]},{id:"beach-buggy/hudson-head",url:"beach-buggy/hudson-head.png",anchor:[.5,.5]},{id:"beach-buggy/ggg-head",url:"beach-buggy/triple-head.png",anchor:[.5,.5]},{id:"beach-buggy/health-bar-holder",x:60,y:60,children:[{id:"beach-buggy/health-bar-bg",url:"beach-buggy/health-meter-bar-outer.png",y:2.5,x:39,anchor:[0,.5]},{id:"beach-buggy/health-bar-fg2",url:"beach-buggy/health-meter-fill-2.png",x:50,anchor:[0,.5]},{id:"beach-buggy/health-bar-fg",url:"beach-buggy/health-meter-fill.png",x:50,anchor:[0,.5]},{id:"beach-buggy/health-icon",url:"beach-buggy/health-icon.png",anchor:[.5,.5]}]},{id:"beach-buggy/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"beach-buggy/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"beach-buggy/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"timer-font",dir:"timer-font",fontname:"ocr",fontdata:"timer-text.xml",type:"bitmaptext"},{id:"beach-buggy/timer-holder",children:[{id:"beach-buggy/timer-bg",url:"beach-buggy/timer-bg.png",anchor:[.5,.05]},{id:"beach-buggy/timer-inner",children:[{id:"beach-buggy/timer-icon",url:"beach-buggy/timer-icon.png",anchor:[.5,.05]}]}]},{id:"beach-buggy/terrain-holder",children:[]},{id:"beach-buggy/sky",url:"beach-buggy/sky-background.png",anchor:[0,0],retina:!1},{id:"beach-buggy/dust-holder",children:[]},{id:"beach-buggy/spark-holder",children:[]},{id:"beach-buggy/boost-particles-holder",children:[]},{id:"beach-buggy/confetti-holder",children:[]},{id:"beach-buggy/confetti-1",url:"beach-buggy/confetti-1.png",pool:30,anchor:[.5,.5]},{id:"beach-buggy/confetti-2",url:"beach-buggy/confetti-2.png",pool:30,anchor:[.5,.5]},{id:"beach-buggy/confetti-3",url:"beach-buggy/confetti-3.png",pool:30,anchor:[.5,.5]},{id:"beach-buggy/confetti-4",url:"beach-buggy/confetti-4.png",pool:30,anchor:[.5,.5]},{id:"beach-buggy/terrain-grad-0",url:"beach-buggy/terrain-grad-0.png",pool:12,anchor:[.5,.5]},{id:"beach-buggy/terrain-grad-1",url:"beach-buggy/terrain-grad-1.png",pool:12,anchor:[.5,.5]},{id:"beach-buggy/terrain-grad-2",url:"beach-buggy/terrain-grad-2.png",pool:12,anchor:[.5,.5]},{id:"beach-buggy/terrain-grad-3",url:"beach-buggy/terrain-grad-3.png",pool:12,anchor:[.5,.5]},{id:"beach-buggy/terrain-grad-4",url:"beach-buggy/terrain-grad-4.png",pool:12,anchor:[.5,.5]},{id:"beach-buggy/terrain-grad--1",url:"beach-buggy/terrain-grad--1.png",pool:12,anchor:[.5,.5]},{id:"beach-buggy/terrain-grad--2",url:"beach-buggy/terrain-grad--2.png",pool:12,anchor:[.5,.5]},{id:"beach-buggy/terrain-grad--3",url:"beach-buggy/terrain-grad--3.png",pool:12,anchor:[.5,.5]},{id:"beach-buggy/terrain-grad--4",url:"beach-buggy/terrain-grad--4.png",pool:12,anchor:[.5,.5]},{id:"beach-buggy/under-shape",url:"beach-buggy/terrain-support.png",pool:108,anchor:[.5,0]},{id:"beach-buggy/fg-undershape",url:"beach-buggy/terrain-support-fg.png"},{id:"beach-buggy/wheel-frames",anchor:[1,1],type:"spritesheet",dir:"beach-buggy/wheel-frames",pool:2,atlas:"wheel-frames.json",frames:["bb-wheel-4.png","bb-wheel-3.png","bb-wheel-2.png","bb-wheel-1.png"]},{id:"beach-buggy/flag-frames",anchor:[1,.9],type:"spritesheet",dir:"beach-buggy/flag-frames",atlas:"flag-frames.json",frames:["bb-flag-4.png","bb-flag-3.png","bb-flag-2.png","bb-flag-1.png"]},{id:"beach-buggy/landing-frames",anchor:[.5,1],type:"spritesheet",dir:"beach-buggy/landing-frames",pool:3,atlas:"landing-frames.json",frames:["bb-landing-1.png","bb-landing-2.png","bb-landing-3.png","bb-landing-4.png","bb-landing-5.png","bb-landing-6.png","bb-landing-7.png","bb-landing-blank.png"]},{id:"beach-buggy/layers-holder",children:[{id:"beach-buggy/sky-layer",children:[{url:"beach-buggy/sky/sky_01.png"},{url:"beach-buggy/sky/sky_02.png"},{url:"beach-buggy/sky/sky_03.png"},{url:"beach-buggy/sky/sky_04.png"},{url:"beach-buggy/sky/sky_05.png"},{url:"beach-buggy/sky/sky_06.png"}]},{id:"beach-buggy/bg-layer",y:300,children:[{url:"beach-buggy/bg/bg_01.png"},{url:"beach-buggy/bg/bg_02.png"},{url:"beach-buggy/bg/bg_03.png"},{url:"beach-buggy/bg/bg_04.png"},{url:"beach-buggy/bg/bg_05.png"},{url:"beach-buggy/bg/bg_06.png"},{url:"beach-buggy/bg/bg_07.png"},{url:"beach-buggy/bg/bg_08.png"}]},{id:"beach-buggy/bg-layer-2",y:320,children:[{url:"beach-buggy/bg-2/bg-2_06.png"},{url:"beach-buggy/bg-2/bg-2_07.png"},{url:"beach-buggy/bg-2/bg-2_08.png"},{url:"beach-buggy/bg-2/bg-2_01.png"},{url:"beach-buggy/bg-2/bg-2_02.png"},{url:"beach-buggy/bg-2/bg-2_03.png"},{url:"beach-buggy/bg-2/bg-2_04.png"},{url:"beach-buggy/bg-2/bg-2_05.png"}]}]},{id:"beach-buggy/fg-layer",y:320,children:[{url:"beach-buggy/fg-layer/fg_01.png"},{url:"beach-buggy/fg-layer/fg_02.png"},{url:"beach-buggy/fg-layer/fg_03.png"},{url:"beach-buggy/fg-layer/fg_04.png"},{url:"beach-buggy/fg-layer/fg_05.png"},{url:"beach-buggy/fg-layer/fg_06.png"},{url:"beach-buggy/fg-layer/fg_07.png"},{url:"beach-buggy/fg-layer/fg_08.png"}]}],"jet-ski-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"tutorial/jet-ski/help-jet-ski-moving",url:"jet-ski/help-jet-ski-moving.png",x:-170,y:-80,anchor:[.5,.5]},{id:"tutorial/jet-ski/help-jet-ski-in-air",url:"jet-ski/help-jet-ski-in-air.png",x:170,y:-80,anchor:[.5,.5]},{id:"tutorial/jet-ski/help-key-press-1",url:"jet-ski/help-key-press-1.png",x:-160,y:35,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/jet-ski/help-key-press-2",url:"jet-ski/help-key-press-2.png",x:160,y:35,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/jet-ski/help-split-1-small",url:"jet-ski/help-split-1-small.png",x:0,y:-30,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/jet-ski/help-split-2",url:"jet-ski/help-split-2.png",x:0,y:95,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/jet-ski/help-space-bar",url:"jet-ski/help-space-bar.png",x:0,y:140,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/jet-ski/help-split-1-large",url:"jet-ski/help-split-1-large.png",x:0,y:10,anchor:[.5,.5],platformspecific:"mobile"},{id:"tutorial/jet-ski/help-tap-effect",url:"jet-ski/help-tap-effect.png",x:-160,y:90,anchor:[.5,.5],platformspecific:"mobile"},{id:"tutorial/jet-ski/help-tap-effect-copy-2",url:"jet-ski/help-tap-effect-copy-2.png",x:160,y:90,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"tutorial/jet-ski/help-jet-ski-in-air",url:"jet-ski/help-jet-ski-in-air.png",x:-170,y:-10,anchor:[.5,.5]},{id:"tutorial/jet-ski/help-jet-ski-in-water",url:"jet-ski/help-jet-ski-in-water.png",x:170,y:-10,anchor:[.5,.5]},{id:"tutorial/jet-ski/help-add-time",url:"jet-ski/help-add-time.png",x:-170,y:-110,anchor:[.5,.5]},{id:"tutorial/jet-ski/help-thumbs-up",url:"jet-ski/help-thumbs-up.png",x:-160,y:170,anchor:[.5,.5]},{id:"tutorial/jet-ski/help-thumbs-down",url:"jet-ski/help-thumbs-down.png",x:160,y:170,anchor:[.5,.5]},{id:"tutorial/jet-ski/help-split-1-large",url:"jet-ski/help-split-1-large.png",x:0,y:10,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"tutorial/jet-ski/help-jet-ski-powered-up",url:"jet-ski/help-jet-ski-powered-up.png",x:-50,y:-20,anchor:[.5,.5]},{id:"tutorial/jet-ski/help-tickets",url:"jet-ski/help-tickets.png",x:160,y:0,anchor:[.5,.5]},{id:"tutorial/jet-ski/help-activate-power-up",url:"jet-ski/help-activate-power-up.png",x:0,y:120,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/jet-ski/help-activate-power-up-2",url:"jet-ski/help-activate-power-up-2.png",x:0,y:120,anchor:[.5,.5],platformspecific:"mobile"}]}],"jet-ski-assets":[{id:"main-holder",children:[]},{url:"jet-ski/test-sprite.png",retina:!1,anchor:[.5,.5]},{id:"jet-ski/heart-bg",url:"jet-ski/heart-bg.png",anchor:[.5,.5]},{id:"jet-ski/heart-icon",url:"jet-ski/heart-icon.png",anchor:[.5,.5],pool:3},{id:"timer-font",dir:"timer-font",fontname:"ocr",fontdata:"timer-text.xml",type:"bitmaptext",pool:2},{id:"jet-ski/timer-holder",children:[{id:"jet-ski/timer-bg",url:"jet-ski/timer-bg.png",anchor:[.5,.05]},{id:"jet-ski/timer-inner",children:[{id:"jet-ski/timer-icon",url:"jet-ski/timer-icon.png",anchor:[.5,.05]}]}]},{id:"jet-ski/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"jet-ski/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"jet-ski/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"jet-ski/score-holder",children:[{url:"jet-ski/score-bg.png"}]},{id:"jet-ski/blank-input",url:"jet-ski/blank-input.png"},{id:"jet-ski/body",x:250,y:350,children:[{id:"jet-ski/particle-point",url:"jet-ski/weight.png",x:-145,y:20,anchor:[.5,.5]},{id:"jet-ski/jet-ski",url:"jet-ski/jet-ski.png",anchor:[.5,.5]},{id:"jet-ski/jet-ski-powered-up",url:"jet-ski/jet-ski-powered-up.png",anchor:[.6,.5]},{id:"jet-ski/pu-glow",url:"jet-ski/glow.png",y:0,anchor:[.5,.5],retina:!1},{id:"jet-ski/powerup-effect",children:[{id:"jet-ski/pu-sparkle-1",url:"jet-ski/sparkle-1.png",y:0,anchor:[.5,.5],retina:!1},{id:"jet-ski/pu-sparkle-2",url:"jet-ski/sparkle-2.png",y:0,anchor:[.5,.5],retina:!1}]}]},{id:"jet-ski/ramp-holder",children:[]},{id:"jet-ski/time-bar-holder",x:957,y:410,children:[{id:"jet-ski/time-bar-back",url:"jet-ski/time-bar-back.png",x:0,y:-130,anchor:[.5,.5]},{id:"jet-ski/time-bar-bottom-holder",x:0,y:48,children:[{id:"jet-ski/time-bar-bottom-back",url:"jet-ski/bar-bottom-back.png",x:0,y:0,anchor:[.5,.5]},{id:"jet-ski/time-bar-bottom-clock-holder",x:0,y:0,children:[{id:"jet-ski/time-bar-bottom-clock",url:"jet-ski/bar-bottom-clock.png",x:0,y:0,anchor:[.5,.5]},{id:"jet-ski/time-bar-bottom-handle-1",url:"jet-ski/bar-bottom-handle-1.png",x:15,y:0,anchor:[.5,.9]},{id:"jet-ski/time-bar-bottom-handle-2",url:"jet-ski/bar-bottom-handle-2.png",x:15,y:0,anchor:[.5,.1]}]}]},{id:"jet-ski/time-bar-bit-holder",x:0,y:0,children:[]}]},{id:"jet-ski/time-bar-bit",url:"jet-ski/time-bar-bit.png",anchor:[.5,.5],retina:!1,pool:5},{id:"jet-ski/air-bar-score-multiplier-outer-holder",x:852,y:250,children:[{id:"jet-ski/sparkle-1",url:"jet-ski/sparkle-1.png",y:45,anchor:[.5,.5],retina:!1},{id:"jet-ski/glow",url:"jet-ski/glow.png",y:45,anchor:[.5,.5],retina:!1},{id:"jet-ski/air-bar-score-multiplier-holder",y:45,children:[{id:"jet-ski/score-multiplier-x2",url:"jet-ski/score-multiplier-x2.png",y:0,anchor:[.5,.5]},{id:"jet-ski/score-multiplier-x3",url:"jet-ski/score-multiplier-x3.png",y:0,anchor:[.5,.5]},{id:"jet-ski/score-multiplier-x4",url:"jet-ski/score-multiplier-x4.png",y:0,anchor:[.5,.5]},{id:"jet-ski/score-multiplier-x5",url:"jet-ski/score-multiplier-x5.png",y:0,anchor:[.5,.5]}]},{id:"jet-ski/sparkle-2",url:"jet-ski/sparkle-2.png",y:45,anchor:[.5,.5],retina:!1}]},{id:"jet-ski/sky",url:"jet-ski/sky-background.png",anchor:[0,0],retina:!1},{id:"jet-ski/ramp-1",children:[{url:"jet-ski/ramp-1.png",anchor:[.5,.5]}]},{id:"jet-ski/ramp-2",children:[{url:"jet-ski/ramp-2.png",anchor:[.5,.5]}]},{id:"jet-ski/ramp-3",children:[{url:"jet-ski/ramp-3.png",anchor:[.5,.5]}]},{id:"jet-ski/ramp-4",children:[{url:"jet-ski/ramp-4.png",anchor:[.5,.5]}]},{id:"jet-ski/ramp-0",children:[{url:"jet-ski/ramp-0.png",anchor:[.5,.5]}]},{id:"jet-ski/spray-particle-1",url:"jet-ski/spray-particle-1.png",anchor:[.5,.5],pool:30,retina:!1},{id:"jet-ski/spray-particle-2",url:"jet-ski/spray-particle-2.png",anchor:[.5,.5],pool:30,retina:!1},{id:"jet-ski/spray-particle-3",url:"jet-ski/spray-particle-3.png",anchor:[.5,.5],pool:30,retina:!1},{id:"jet-ski/splash-particle-1",url:"jet-ski/spray-particle-1.png",anchor:[.5,.5],pool:30,retina:!1},{id:"jet-ski/splash-particle-2",url:"jet-ski/spray-particle-2.png",anchor:[.5,.5],pool:30,retina:!1},{id:"jet-ski/splash-particle-3",url:"jet-ski/spray-particle-3.png",anchor:[.5,.5],pool:30,retina:!1},{id:"jet-ski/bubble-particle-1",url:"jet-ski/bubble-particle-1.png",anchor:[.5,.5],pool:10,retina:!1},{id:"jet-ski/spray-particles-holder",children:[]},{id:"jet-ski/splash-particles-holder",children:[]},{id:"jet-ski/bubble-particles-holder",children:[]},{id:"jet-ski/layers-holder",children:[{id:"jet-ski/sky-layer",children:[{url:"jet-ski/sky/sky_01.png"},{url:"jet-ski/sky/sky_02.png"},{url:"jet-ski/sky/sky_03.png"},{url:"jet-ski/sky/sky_04.png"},{url:"jet-ski/sky/sky_05.png"},{url:"jet-ski/sky/sky_06.png"}]},{id:"jet-ski/bg-layer",y:50,children:[{url:"jet-ski/bg/bg_01.png"},{url:"jet-ski/bg/bg_02.png"},{url:"jet-ski/bg/bg_03.png"},{url:"jet-ski/bg/bg_04.png"},{url:"jet-ski/bg/bg_05.png"},{url:"jet-ski/bg/bg_06.png"},{url:"jet-ski/bg/bg_07.png"},{url:"jet-ski/bg/bg_08.png"}]},{id:"jet-ski/mg-layer",y:-10,children:[{url:"jet-ski/mg/mg_01.png"},{url:"jet-ski/mg/mg_02.png"},{url:"jet-ski/mg/mg_03.png"},{url:"jet-ski/mg/mg_04.png"},{url:"jet-ski/mg/mg_05.png"},{url:"jet-ski/mg/mg_06.png"},{url:"jet-ski/mg/mg_07.png"},{url:"jet-ski/mg/mg_08.png"}]},{id:"jet-ski/sea-back-layer",y:350,children:[{url:"jet-ski/sea.png"},{url:"jet-ski/sea.png"},{url:"jet-ski/sea.png"},{url:"jet-ski/sea.png"},{url:"jet-ski/sea.png"},{url:"jet-ski/sea.png"}]},{id:"jet-ski/fg-layer",y:190,children:[{url:"jet-ski/fg/fg_01.png"},{url:"jet-ski/fg/fg_02.png"},{url:"jet-ski/fg/fg_03.png"},{url:"jet-ski/fg/fg_04.png"},{url:"jet-ski/fg/fg_05.png"},{url:"jet-ski/fg/fg_06.png"},{url:"jet-ski/fg/fg_07.png"},{url:"jet-ski/fg/fg_08.png"}]},{id:"jet-ski/sea-middle-layer",y:390,children:[{url:"jet-ski/sea-middle.png"},{url:"jet-ski/sea-middle.png"},{url:"jet-ski/sea-middle.png"},{url:"jet-ski/sea-middle.png"},{url:"jet-ski/sea-middle.png"},{url:"jet-ski/sea-middle.png"}]},{id:"jet-ski/sea-front-layer",y:440,children:[{id:"jet-ski/sea-front-chunk",children:[{url:"jet-ski/sea-front-1.png"},{url:"jet-ski/sea-front-2.png"},{url:"jet-ski/sea-front-3.png"}]},{id:"jet-ski/sea-front-chunk",children:[{url:"jet-ski/sea-front-1.png"},{url:"jet-ski/sea-front-2.png"},{url:"jet-ski/sea-front-3.png"}]},{id:"jet-ski/sea-front-chunk",children:[{url:"jet-ski/sea-front-1.png"},{url:"jet-ski/sea-front-2.png"},{url:"jet-ski/sea-front-3.png"}]},{id:"jet-ski/sea-front-chunk",children:[{url:"jet-ski/sea-front-1.png"},{url:"jet-ski/sea-front-2.png"},{url:"jet-ski/sea-front-3.png"}]},{id:"jet-ski/sea-front-chunk",children:[{url:"jet-ski/sea-front-1.png"},{url:"jet-ski/sea-front-2.png"},{url:"jet-ski/sea-front-3.png"}]},{id:"jet-ski/sea-front-chunk",children:[{url:"jet-ski/sea-front-1.png"},{url:"jet-ski/sea-front-2.png"},{url:"jet-ski/sea-front-3.png"}]}]},{id:"jet-ski/sea-front-bottom-layer",y:740,children:[{url:"jet-ski/sea-front-bottom.png"},{url:"jet-ski/sea-front-bottom.png"},{url:"jet-ski/sea-front-bottom.png"},{url:"jet-ski/sea-front-bottom.png"},{url:"jet-ski/sea-front-bottom.png"},{url:"jet-ski/sea-front-bottom.png"}]}]},{id:"jet-ski/character-tomika-head",url:"jet-ski/character-tomika-head.png",anchor:[.5,.5]},{id:"jet-ski/character-tomika-body-front",url:"jet-ski/character-tomika-body-front.png",x:-60,y:-47,anchor:[.5,.5]},{id:"jet-ski/character-tomika-body-back",url:"jet-ski/character-tomika-body-back.png",x:-35,y:-13,anchor:[.5,.5]},{id:"jet-ski/character-tomika-arm",url:"jet-ski/character-tomika-arm.png",x:-51,y:-59,anchor:[.2,.4]},{id:"jet-ski/character-tomika-leg-bottom",url:"jet-ski/character-tomika-leg-bottom.png",x:-25,y:5,anchor:[.7,.3]},{id:"jet-ski/character-tomika-leg-top",url:"jet-ski/character-tomika-leg-top.png",x:-65,y:-13,anchor:[.2,.45]},{id:"jet-ski/character-freddy-head",url:"jet-ski/character-freddy-head.png",anchor:[.5,.5]},{id:"jet-ski/character-freddy-body-front",url:"jet-ski/character-freddy-body-front.png",x:-60,y:-47,anchor:[.5,.5]},{id:"jet-ski/character-freddy-body-back",url:"jet-ski/character-freddy-body-back.png",x:-35,y:-13,anchor:[.5,.5]},{id:"jet-ski/character-freddy-arm",url:"jet-ski/character-freddy-arm.png",x:-51,y:-59,anchor:[.2,.4]},{id:"jet-ski/character-freddy-leg-bottom",url:"jet-ski/character-freddy-leg-bottom.png",x:-25,y:7,anchor:[.7,.3]},{id:"jet-ski/character-freddy-leg-top",url:"jet-ski/character-freddy-leg-top.png",x:-65,y:-10,anchor:[.2,.45]},{id:"jet-ski/character-lawrence-head",url:"jet-ski/character-lawrence-head.png",anchor:[.5,.5]},{id:"jet-ski/character-lawrence-body-front",url:"jet-ski/character-lawrence-body-front.png",x:-60,y:-47,anchor:[.5,.5]},{id:"jet-ski/character-lawrence-body-back",url:"jet-ski/character-lawrence-body-back.png",x:-35,y:-13,anchor:[.5,.5]},{id:"jet-ski/character-lawrence-arm",url:"jet-ski/character-lawrence-arm.png",x:-51,y:-59,anchor:[.2,.4]},{id:"jet-ski/character-lawrence-leg-bottom",url:"jet-ski/character-lawrence-leg-bottom.png",x:-25,y:7,anchor:[.7,.3]},{id:"jet-ski/character-lawrence-leg-top",url:"jet-ski/character-lawrence-leg-top.png",x:-65,y:-10,anchor:[.2,.45]},{id:"jet-ski/character-summer-head",url:"jet-ski/character-summer-head.png",anchor:[.5,.5]},{id:"jet-ski/character-summer-body-front",url:"jet-ski/character-summer-body-front.png",x:-60,y:-47,anchor:[.5,.5]},{id:"jet-ski/character-summer-body-back",url:"jet-ski/character-summer-body-back.png",x:-35,y:-13,anchor:[.5,.5]},{id:"jet-ski/character-summer-arm",url:"jet-ski/character-summer-arm.png",x:-51,y:-59,anchor:[.2,.4]},{id:"jet-ski/character-summer-leg-bottom",url:"jet-ski/character-summer-leg-bottom.png",x:-25,y:5,anchor:[.7,.3]},{id:"jet-ski/character-summer-leg-top",url:"jet-ski/character-summer-leg-top.png",x:-65,y:-13,anchor:[.2,.45]},{id:"jet-ski/character-zack-head",url:"jet-ski/character-zack-head.png",anchor:[.5,.5]},{id:"jet-ski/character-zack-body-front",url:"jet-ski/character-zack-body-front.png",x:-60,y:-47,anchor:[.5,.5]},{id:"jet-ski/character-zack-body-back",url:"jet-ski/character-zack-body-back.png",x:-35,y:-13,anchor:[.5,.5]},{id:"jet-ski/character-zack-arm",url:"jet-ski/character-zack-arm.png",x:-51,y:-59,anchor:[.2,.4]},{id:"jet-ski/character-zack-leg-bottom",url:"jet-ski/character-zack-leg-bottom.png",x:-25,y:7,anchor:[.7,.3]},{id:"jet-ski/character-zack-leg-top",url:"jet-ski/character-zack-leg-top.png",x:-65,y:-10,anchor:[.2,.45]},{id:"jet-ski/seaweed-animation/seaweed-frames",x:100,y:50,anchor:[.5,.5],type:"spritesheet",dir:"jet-ski/seaweed-animation",atlas:"seaweed-frames.json",frames:["js-seaweed-1.png","js-seaweed-2.png","js-seaweed-3.png","js-seaweed-4.png","js-seaweed-5.png","js-seaweed-6.png","js-seaweed-7.png","js-seaweed-8.png","js-seaweed-9.png","js-seaweed-10.png","js-seaweed-11.png","js-seaweed-12.png","js-seaweed-13.png","js-seaweed-14.png","js-seaweed-15.png","js-seaweed-16.png"],pool:3},{id:"jet-ski/jet-frames-looping",x:0,y:0,anchor:[1,1],pool:2,retina:!1,type:"spritesheet",dir:"jet-ski/jet-frames-looping",atlas:"jet-frames.json",frames:["js-jet-looping-1.png","js-jet-looping-2.png","js-jet-looping-3.png","js-jet-looping-4.png"]},{id:"jet-ski/jet-frames-start",x:0,y:0,anchor:[1,1],pool:2,retina:!1,type:"spritesheet",dir:"jet-ski/jet-frames-start",atlas:"jet-start-frames.json",frames:["js-jet-start-1.png","js-jet-start-2.png","js-jet-start-3.png","js-jet-start-4.png","js-jet-start-5.png","js-jet-start-6.png","js-jet-start-7.png","js-jet-start-8.png","js-jet-start-9.png","js-jet-start-10.png"]},{id:"jet-ski/jet-frames-end",x:0,y:0,anchor:[1,1],pool:2,retina:!1,type:"spritesheet",dir:"jet-ski/jet-frames-start",atlas:"jet-start-frames.json",frames:["js-jet-start-10.png","js-jet-start-9.png","js-jet-start-8.png","js-jet-start-7.png","js-jet-start-6.png","js-jet-start-5.png","js-jet-start-4.png","js-jet-start-3.png","js-jet-start-2.png","js-jet-start-1.png"]},{id:"jet-ski/jet-front-frames-looping",x:0,y:0,anchor:[1,1],retina:!1,type:"spritesheet",dir:"jet-ski/jet-front-frames-looping",atlas:"jet-front-loop-frames.json",frames:["js-jet-front-looping-4.png","js-jet-front-looping-3.png","js-jet-front-looping-2.png","js-jet-front-looping-1.png"]},{id:"jet-ski/jet-front-frames-start",x:0,y:0,anchor:[1,1],pool:2,retina:!1,type:"spritesheet",dir:"jet-ski/jet-front-frames-start",atlas:"jet-front-start-frames.json",frames:["js-jet-front-start-1.png","js-jet-front-start-2.png","js-jet-front-start-3.png","js-jet-front-start-4.png","js-jet-front-start-5.png","js-jet-front-start-6.png","js-jet-front-start-7.png","js-jet-front-start-8.png","js-jet-front-start-9.png","js-jet-front-start-10.png"]},{id:"jet-ski/jet-front-frames-end",x:0,y:0,anchor:[1,1],pool:2,retina:!1,type:"spritesheet",dir:"jet-ski/jet-front-frames-start",atlas:"jet-front-start-frames.json",frames:["js-jet-front-start-10.png","js-jet-front-start-9.png","js-jet-front-start-8.png","js-jet-front-start-7.png","js-jet-front-start-6.png","js-jet-front-start-5.png","js-jet-front-start-4.png","js-jet-front-start-3.png","js-jet-front-start-2.png","js-jet-front-start-1.png"]},{id:"jet-ski/jet-frames-idle",x:0,y:0,anchor:[.5,.5],retina:!1,type:"spritesheet",dir:"jet-ski/jet-frames-idle",atlas:"jet-frames-idle.json",frames:["js-jet-idle-1.png","js-jet-idle-2.png","js-jet-idle-3.png","js-jet-idle-4.png","js-jet-idle-5.png","js-jet-idle-6.png","js-jet-idle-7.png","js-jet-idle-8.png"]},{id:"jet-ski/splash-frames",x:0,y:0,anchor:[.5,1],retina:!1,type:"spritesheet",dir:"jet-ski/splash-frames",atlas:"splash-frames.json",frames:["js-splash-1.png","js-splash-2.png","js-splash-3.png","js-splash-4.png","js-splash-5.png","js-splash-6.png","js-splash-7.png","js-splash-8.png","js-splash-9.png","js-splash-10.png","js-splash-11.png","js-splash-12.png","js-splash-13.png","js-splash-blank.png"]},{id:"jet-ski/score-animation",x:0,y:0,anchor:[1,1],type:"spritesheet",dir:"jet-ski/score-animation",atlas:"score-frames.json",frames:["js-score-1.png","js-score-2.png","js-score-3.png","js-score-4.png","js-score-5.png"]},{id:"jet-ski/jet-front-frames-holder-1",children:[]},{id:"jet-ski/jet-front-frames-holder-2",children:[]},{id:"jet-ski/checkpoint-holder",anchor:[.5,.9],children:[{id:"jet-ski/checkpoint-1",url:"jet-ski/checkpoint-1.png"},{id:"jet-ski/checkpoint-2",url:"jet-ski/checkpoint-2.png"}]},{id:"jet-ski/jetty-back",url:"jet-ski/jetty-back.png",anchor:[.5,.5]},{id:"jet-ski/jetty-front",url:"jet-ski/jetty-front.png",anchor:[.5,.5]},{id:"jet-ski/barrels-1",url:"jet-ski/barrels-1.png",anchor:[.5,.5]},{id:"jet-ski/barrels-2",url:"jet-ski/barrels-2.png",anchor:[.5,.5]},{id:"jet-ski/bg-layer-bottom-slice",url:"jet-ski/bg-layer-bottom-slice.png"},{id:"jet-ski/add-time-timer-bg",url:"jet-ski/add-time-timer-bg.png",anchor:[.5,.5]}],"tree-top-gladiators-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"tree-top-gladiators-controls",url:"tree-top-gladiators/help-desktop-controls.png",x:0,y:15,anchor:[.5,.5],platformspecific:"desktop"},{id:"tree-top-gladiators-controls-mobile",url:"tree-top-gladiators/help-mobile-controls.png",x:0,y:15,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"tree-top-gladiators-how-to-play",url:"tree-top-gladiators/help-how-to-play.png",x:0,y:10,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"tree-top-gladiators/tree-top-gladiators-how-to-play",url:"tree-top-gladiators/help-power-up.png",x:0,y:-15,anchor:[.5,.5]},{id:"tree-top-gladiators/help-power-up-desktop",url:"tree-top-gladiators/help-power-up-desktop.png",anchor:[.5,.5],platformspecific:"desktop",y:130},{id:"tree-top-gladiators/help-power-up-mobile",url:"tree-top-gladiators/help-power-up-mobile.png",anchor:[.5,.5],platformspecific:"mobile",y:130}]}],"tree-top-gladiators-assets":[{id:"tree-top-gladiators/main-holder",children:[]},{id:"tree-top-gladiators/background-rear-holder",children:[]},{id:"tree-top-gladiators/background-mid-holder",children:[]},{id:"tree-top-gladiators/background-fore-holder",children:[]},{id:"tree-top-gladiators/leaf",url:"tree-top-gladiators/leaf.png",pool:30,retina:!1,anchor:[.5,.5]},{id:"tree-top-gladiators/leaf-container",children:[]},{id:"tree-top-gladiators/vine-1",url:"tree-top-gladiators/vine-1.png",anchor:[.5,0]},{id:"tree-top-gladiators/vine-2",url:"tree-top-gladiators/vine-2.png",anchor:[.5,0]},{id:"tree-top-gladiators/jungle-layer-fore",url:"tree-top-gladiators/jungle-layer-fore.png"},{id:"tree-top-gladiators/jungle-layer-mid-top",url:"tree-top-gladiators/jungle-layer-mid-top.png"},{id:"tree-top-gladiators/jungle-layer-fore-top",url:"tree-top-gladiators/jungle-layer-fore-top.png"},{id:"tree-top-gladiators/jungle-layer-mid",url:"tree-top-gladiators/jungle-layer-mid.png"},{id:"tree-top-gladiators/jungle-layer-back-0",url:"tree-top-gladiators/jungle-layer-back-0.png",pool:2},{id:"tree-top-gladiators/blank-input",url:"tree-top-gladiators/blank-input.png"},{id:"tree-top-gladiators/pod-holder-linc",children:[]},{id:"tree-top-gladiators/pod-holder-sister",children:[]},{id:"tree-top-gladiators/pod-backing-linc",url:"tree-top-gladiators/pod-bottom-linc-backing.png",y:-1e3,anchor:[.5,0]},{id:"tree-top-gladiators/pod-backing-sister",url:"tree-top-gladiators/pod-bottom-sister-backing.png",y:-1e3,anchor:[.5,0]},{id:"tree-top-gladiators/pod-bottom-linc",url:"tree-top-gladiators/pod-bottom-linc.png",anchor:[.5,0]},{id:"tree-top-gladiators/pod-bottom-sister",url:"tree-top-gladiators/pod-bottom-sister.png",anchor:[.5,0]},{id:"tree-top-gladiators/pod-linc-windshield",url:"tree-top-gladiators/pod-linc-windshield.png",anchor:[.5,1]},{id:"tree-top-gladiators/pod-sister-windshield",url:"tree-top-gladiators/pod-sister-windshield.png",anchor:[.5,1]},{id:"tree-top-gladiators/linc-head-holder",children:[{id:"tree-top-gladiators/pod-head-linc-hair",url:"tree-top-gladiators/pod-head-linc-hair.png",anchor:[.2,1]},{id:"tree-top-gladiators/pod-head-linc",url:"tree-top-gladiators/pod-head-linc.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-head-linc-eyes",url:"tree-top-gladiators/pod-head-linc-eyes.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-head-linc-eyes-hit",url:"tree-top-gladiators/pod-head-linc-eyes-hit.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-head-linc-blink",url:"tree-top-gladiators/pod-head-linc-blink.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-head-linc-mouth-happy",url:"tree-top-gladiators/pod-head-linc-mouth-happy.png",anchor:[.5,.5],y:10},{id:"tree-top-gladiators/pod-head-linc-mouth-sad",url:"tree-top-gladiators/pod-head-linc-mouth-sad.png",anchor:[.5,.5],y:23},{id:"tree-top-gladiators/pod-head-linc-mouth-neutral",url:"tree-top-gladiators/pod-head-linc-mouth-neutral.png",anchor:[.5,.5],y:25},{id:"tree-top-gladiators/pod-head-linc-mouth-gameover",url:"tree-top-gladiators/pod-head-linc-mouth-gameover.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-head-linc-brow-left",url:"tree-top-gladiators/pod-head-linc-brow-left.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-head-linc-brow-right",url:"tree-top-gladiators/pod-head-linc-brow-right.png",anchor:[.5,.5]}]},{id:"tree-top-gladiators/health-face-holder",children:[{id:"tree-top-gladiators/lori-face",url:"tree-top-gladiators/bar-icon-lori.png",anchor:[.5,.5]},{id:"tree-top-gladiators/lana-face",url:"tree-top-gladiators/bar-icon-lana.png",anchor:[.5,.5]},{id:"tree-top-gladiators/leni-face",url:"tree-top-gladiators/bar-icon-leni.png",anchor:[.5,.5]},{id:"tree-top-gladiators/lisa-face",url:"tree-top-gladiators/bar-icon-lisa.png",anchor:[.5,.5]},{id:"tree-top-gladiators/lola-face",url:"tree-top-gladiators/bar-icon-lola.png",anchor:[.5,.5]},{id:"tree-top-gladiators/lucy-face",url:"tree-top-gladiators/bar-icon-lucy.png",anchor:[.5,.5]},{id:"tree-top-gladiators/luna-face",url:"tree-top-gladiators/bar-icon-luna.png",anchor:[.5,.5]},{id:"tree-top-gladiators/luan-face",url:"tree-top-gladiators/bar-icon-luan.png",anchor:[.5,.5]},{id:"tree-top-gladiators/lynn-face",url:"tree-top-gladiators/bar-icon-lynn.png",anchor:[.5,.5]}]},{id:"tree-top-gladiators/spin-frames",anchor:[.5,.5],type:"spritesheet",dir:"tree-top-gladiators/spin-frames",pool:2,retina:!1,atlas:"spin-frames.json",frames:["ttg-spin-1.png","ttg-spin-2.png","ttg-spin-3.png","ttg-spin-4.png"]},{id:"tree-top-gladiators/lana-head-holder",children:[{id:"tree-top-gladiators/pod-lana-head",url:"tree-top-gladiators/sisters/pod-lana-head.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lana-sad",url:"tree-top-gladiators/sisters/pod-lana-sad.png",y:30,x:-20,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lana-neutral",url:"tree-top-gladiators/sisters/pod-lana-neutral.png",y:25,x:-20,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lana-happy",url:"tree-top-gladiators/sisters/pod-lana-happy.png",y:25,x:-25,anchor:[.5,.5]}],y:-1e3},{id:"tree-top-gladiators/lori-head-holder",children:[{id:"tree-top-gladiators/pod-lori-head",url:"tree-top-gladiators/sisters/pod-lori-head.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lori-sad",url:"tree-top-gladiators/sisters/pod-lori-sad.png",y:30,x:0,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lori-neutral",url:"tree-top-gladiators/sisters/pod-lori-neutral.png",y:25,x:-5,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lori-happy",url:"tree-top-gladiators/sisters/pod-lori-happy.png",y:28,x:-5,anchor:[.5,.5]}],y:-1e3},{id:"tree-top-gladiators/leni-head-holder",children:[{id:"tree-top-gladiators/pod-leni-head",url:"tree-top-gladiators/sisters/pod-leni-head.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-leni-sad",url:"tree-top-gladiators/sisters/pod-leni-sad.png",y:28,x:-15,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-leni-neutral",url:"tree-top-gladiators/sisters/pod-leni-neutral.png",y:28,x:-15,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-leni-happy",url:"tree-top-gladiators/sisters/pod-leni-happy.png",y:25,x:-25,anchor:[.5,.5]}],y:-1e3},{id:"tree-top-gladiators/luna-head-holder",children:[{id:"tree-top-gladiators/pod-luna-head",url:"tree-top-gladiators/sisters/pod-luna-head.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-luna-sad",url:"tree-top-gladiators/sisters/pod-luna-sad.png",y:50,x:0,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-luna-neutral",url:"tree-top-gladiators/sisters/pod-luna-neutral.png",y:45,x:-12,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-luna-happy",url:"tree-top-gladiators/sisters/pod-luna-happy.png",y:60,x:-5,anchor:[.5,.5]}],y:-1e3},{id:"tree-top-gladiators/luan-head-holder",children:[{id:"tree-top-gladiators/pod-luan-head",url:"tree-top-gladiators/sisters/pod-luan-head.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-luan-sad",url:"tree-top-gladiators/sisters/pod-luan-sad.png",y:45,x:-30,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-luan-neutral",url:"tree-top-gladiators/sisters/pod-luan-neutral.png",y:45,x:-30,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-luan-happy",url:"tree-top-gladiators/sisters/pod-luan-happy.png",y:45,x:-20,anchor:[.5,.5]}],y:-1e3},{id:"tree-top-gladiators/lynn-head-holder",children:[{id:"tree-top-gladiators/pod-lynn-head",url:"tree-top-gladiators/sisters/pod-lynn-head.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lynn-sad",url:"tree-top-gladiators/sisters/pod-lynn-sad.png",y:40,x:-30,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lynn-neutral",url:"tree-top-gladiators/sisters/pod-lynn-neutral.png",y:35,x:-25,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lynn-happy",url:"tree-top-gladiators/sisters/pod-lynn-happy.png",y:40,x:-25,anchor:[.5,.5]}],y:-1e3},{id:"tree-top-gladiators/lucy-head-holder",children:[{id:"tree-top-gladiators/pod-lucy-head",url:"tree-top-gladiators/sisters/pod-lucy-head.png",x:-5,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lucy-sad",url:"tree-top-gladiators/sisters/pod-lucy-sad.png",y:30,x:-5,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lucy-neutral",url:"tree-top-gladiators/sisters/pod-lucy-neutral.png",y:30,x:-5,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lucy-happy",url:"tree-top-gladiators/sisters/pod-lucy-happy.png",y:30,x:-5,anchor:[.5,.5]}],y:-1e3},{id:"tree-top-gladiators/lola-head-holder",children:[{id:"tree-top-gladiators/pod-lola-head",url:"tree-top-gladiators/sisters/pod-lola-head.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lola-sad",url:"tree-top-gladiators/sisters/pod-lola-sad.png",y:20,x:-5,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lola-neutral",url:"tree-top-gladiators/sisters/pod-lola-neutral.png",y:20,x:-5,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lola-happy",url:"tree-top-gladiators/sisters/pod-lola-happy.png",y:10,x:-5,anchor:[.5,.5]}],y:-1e3},{id:"tree-top-gladiators/lisa-head-holder",children:[{id:"tree-top-gladiators/pod-lisa-head",url:"tree-top-gladiators/sisters/pod-lisa-head.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lisa-sad",url:"tree-top-gladiators/sisters/pod-lisa-sad.png",y:45,x:-10,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lisa-neutral",url:"tree-top-gladiators/sisters/pod-lisa-neutral.png",y:40,x:-5,anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lisa-happy",url:"tree-top-gladiators/sisters/pod-lisa-happy.png",y:40,x:-5,anchor:[.5,.5]}],y:-1e3},{id:"tree-top-gladiators/pod-lana-body",url:"tree-top-gladiators/sisters/pod-lana-body.png",y:25,x:0,anchor:[.5,1]},{id:"tree-top-gladiators/pod-lori-body",url:"tree-top-gladiators/sisters/pod-lori-body.png",y:30,x:0,anchor:[.5,1]},{id:"tree-top-gladiators/pod-leni-body",url:"tree-top-gladiators/sisters/pod-leni-body.png",y:30,x:0,anchor:[.5,1]},{id:"tree-top-gladiators/pod-luna-body",url:"tree-top-gladiators/sisters/pod-luna-body.png",y:30,x:0,anchor:[.5,1]},{id:"tree-top-gladiators/pod-luan-body",url:"tree-top-gladiators/sisters/pod-luan-body.png",y:30,x:0,anchor:[.5,1]},{id:"tree-top-gladiators/pod-lynn-body",url:"tree-top-gladiators/sisters/pod-lynn-body.png",y:30,x:0,anchor:[.5,1]},{id:"tree-top-gladiators/pod-lucy-body",url:"tree-top-gladiators/sisters/pod-lucy-body.png",y:25,x:20,anchor:[.5,1]},{id:"tree-top-gladiators/pod-lola-body",url:"tree-top-gladiators/sisters/pod-lola-body.png",y:20,x:0,anchor:[.5,1]},{id:"tree-top-gladiators/pod-lisa-body",url:"tree-top-gladiators/sisters/pod-lisa-body.png",y:20,x:10,anchor:[.5,1]},{id:"tree-top-gladiators/pod-leni-head-hair",url:"tree-top-gladiators/sisters/pod-leni-head-hair.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-lola-head-hair",url:"tree-top-gladiators/sisters/pod-lola-head-hair.png",anchor:[.5,.5]},{id:"tree-top-gladiators/blank-hair",url:"tree-top-gladiators/sisters/blank.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-normal-hand-left",url:"tree-top-gladiators/sisters/pod-luan-hand-left.png",anchor:[.5,1]},{id:"tree-top-gladiators/pod-normal-hand-right",url:"tree-top-gladiators/sisters/pod-luan-hand-right.png",anchor:[.5,1]},{id:"tree-top-gladiators/pod-lucy-hand-left",url:"tree-top-gladiators/sisters/pod-lucy-hand-left.png",anchor:[.5,1]},{id:"tree-top-gladiators/pod-lucy-hand-right",url:"tree-top-gladiators/sisters/pod-lucy-hand-right.png",anchor:[.5,1]},{id:"tree-top-gladiators/pod-lola-hand-left",url:"tree-top-gladiators/sisters/pod-lola-hand-left.png",anchor:[.5,1]},{id:"tree-top-gladiators/pod-lola-hand-right",url:"tree-top-gladiators/sisters/pod-lola-hand-right.png",anchor:[.5,1]},{id:"tree-top-gladiators/rope-element",url:"tree-top-gladiators/rope-element.png",anchor:[.5,0],pool:4},{id:"tree-top-gladiators/pod-pugil-linc",url:"tree-top-gladiators/pod-pugil-linc.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-pugil-hinge-linc",url:"tree-top-gladiators/pod-pugil-hinge-linc.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-pugil-sister",url:"tree-top-gladiators/pod-pugil-sister.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-pugil-hinge-sister",url:"tree-top-gladiators/pod-pugil-hinge-sister.png",anchor:[.5,.5]},{id:"tree-top-gladiators/forcemarker",url:"tree-top-gladiators/forcemarker.png",anchor:[.5,.5],pool:2},{id:"tree-top-gladiators/pod-arm-holder-linc",children:[]},{id:"tree-top-gladiators/pod-arm-holder-sister",children:[]},{id:"tree-top-gladiators/pod-linc-arms",url:"tree-top-gladiators/pod-linc-arms.png",anchor:[.5,.5]},{id:"tree-top-gladiators/pod-hand-linc-left",url:"tree-top-gladiators/pod-hand-linc-left.png",anchor:[.5,1]},{id:"tree-top-gladiators/pod-hand-linc-right",url:"tree-top-gladiators/pod-hand-linc-right.png",anchor:[.5,1]},{id:"tree-top-gladiators/pod-hand-holder-linc",children:[]},{id:"tree-top-gladiators/pod-hand-holder-sister",children:[]},{id:"tree-top-gladiators/temp-white-bg-layer",url:"tree-top-gladiators/temp-white-bg-layer.png"},{id:"tree-top-gladiators/top-girder-runner",url:"tree-top-gladiators/top-girder-runner.png",pool:2},{id:"tree-top-gladiators/top-girder-wheel",url:"tree-top-gladiators/top-girder-wheel.png",pool:4,anchor:[.5,.5]},{id:"tree-top-gladiators/impact-pop",anchor:[.5,.5],type:"spritesheet",dir:"tree-top-gladiators/impact-pop",atlas:"impact-pop.json",frames:["ttg-impact-blank.png","ttg-impact-1.png","ttg-impact-2.png","ttg-impact-3.png","ttg-impact-4.png","ttg-impact-5.png","ttg-impact-6.png","ttg-impact-blank.png"]},{id:"tree-top-gladiators/pod-hit-particle",url:"tree-top-gladiators/pod-hit-particle.png",anchor:[.5,.5],pool:10},{id:"tree-top-gladiators/enemy-health-bar-holder",children:[]},{id:"tree-top-gladiators/enemy-health-bar-fill",url:"tree-top-gladiators/enemy-health-bar-fill.png",anchor:[0,.5]},{id:"tree-top-gladiators/enemy-health-bar-bg",url:"tree-top-gladiators/enemy-health-bar-bg.png",anchor:[0,.5]},{id:"tree-top-gladiators/heart-bg",url:"tree-top-gladiators/heart-bg.png",anchor:[0,.5]},{id:"tree-top-gladiators/heart-icon",url:"tree-top-gladiators/heart-icon.png",anchor:[.5,.5],pool:3},{id:"tree-top-gladiators/score-bg",url:"tree-top-gladiators/score-bg.png",anchor:[.5,.5]},{id:"tree-top-gladiators/score-holder",children:[]},{id:"tree-top-gladiators/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"tree-top-gladiators/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"tree-top-gladiators/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"}],"river-rangers-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:4,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:4,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:4,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"tutorial/river-rangers/help-river-desktop-keys-1",url:"river-rangers/help-river-desktop-keys-1.png",x:-160,y:-30,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/river-rangers/help-river-desktop-keys-2",url:"river-rangers/help-river-desktop-keys-2.png",x:-70,y:135,anchor:[.5,.5],platformspecific:"desktop",loc:!0},{id:"tutorial/river-rangers/help-fire-button",url:"river-rangers/help-fire-button.png",x:110,y:145,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/river-rangers/help-split-horizontal",url:"river-rangers/help-split-horizontal.png",x:0,y:90,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/river-rangers/help-boat-controls",url:"river-rangers/help-boat-controls.png",x:90,y:-60,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/river-rangers/help-boat-controls",url:"river-rangers/help-boat-controls.png",x:0,y:-65,anchor:[.5,.5],platformspecific:"mobile"},{id:"tutorial/river-rangers/help-river-mobile-keys-1",url:"river-rangers/help-river-mobile-keys-1.png",x:0,y:110,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"tutorial/river-rangers/help-shooting",url:"river-rangers/help-shooting.png",x:-165,y:-20,anchor:[.5,.5]},{id:"tutorial/river-rangers/help-goo",url:"river-rangers/help-goo.png",x:165,y:-20,anchor:[.5,.5]},{id:"tutorial/river-rangers/help-split-vertical-long",url:"river-rangers/help-split-vertical-long.png",x:0,y:10,anchor:[.5,.5]},{id:"tutorial/river-rangers/help-thumbs-up",url:"river-rangers/help-thumbs-up.png",x:-160,y:170,anchor:[.5,.5]},{id:"tutorial/river-rangers/help-thumbs-down",url:"river-rangers/help-thumbs-down.png",x:160,y:170,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"tutorial/river-rangers/powerup-help",url:"river-rangers/powerup-help.png",x:40,y:0,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/river-rangers/powerup-help-2",url:"river-rangers/powerup-help-2.png",x:0,y:0,anchor:[.5,.5],platformspecific:"mobile"}]}],"river-rangers-assets":[{id:"main-holder",children:[]},{id:"river-rangers/gun-cooldown-meter-holder",children:[{id:"river-rangers/gun-cooldown-meter-bar-outer",url:"river-rangers/gun-cooldown-meter-bar-outer.png",x:23,y:-210},{id:"river-rangers/gun-cooldown-meter-fill",url:"river-rangers/gun-cooldown-meter-fill.png",x:51.5,y:3.5,anchor:[.5,1]},{id:"river-rangers/gun-cooldown-meter-fill-overlay",url:"river-rangers/gun-cooldown-meter-fill-overlay.png",x:51.5,y:3.5,anchor:[.5,1]},{id:"river-rangers/gun-cooldown-meter-icon",url:"river-rangers/gun-cooldown-meter-icon.png",x:-4,y:-4}]},{id:"river-rangers/heart-bg",url:"river-rangers/heart-bg.png",anchor:[.5,.5]},{id:"river-rangers/heart-icon",url:"river-rangers/heart-icon.png",anchor:[.5,.5],pool:3},{id:"river-rangers/drone-body",url:"river-rangers/drone-body.png",anchor:[.5,.5],pool:5},{id:"river-rangers/drone-body-neutral",url:"river-rangers/drone-body-neutral.png",anchor:[.5,.5],pool:5},{id:"river-rangers/drone-body-scared",url:"river-rangers/drone-body-scared.png",anchor:[.5,.5],pool:5},{id:"river-rangers/drone-body-scared-destroyed",url:"river-rangers/drone-body-scared-destroyed.png",anchor:[.5,.5],pool:5},{id:"river-rangers/drone-body-winning",url:"river-rangers/drone-body-winning.png",anchor:[.5,.5],pool:5},{id:"river-rangers/drone-bomb-holder",url:"river-rangers/drone-bomb-holder.png",anchor:[.5,.5],pool:5},{id:"river-rangers/drone-bomb",url:"river-rangers/drone-bomb.png",anchor:[.5,.5],pool:5},{id:"river-rangers/drone-holder",children:[],pool:5},{id:"river-rangers/river-tile",url:"river-rangers/river-tile.png",pool:3},{id:"river-rangers/blank-input",url:"river-rangers/blank-input.png"},{id:"river-rangers/boat-body",url:"river-rangers/boat-body.png",anchor:[.5,.5]},{id:"river-ranger/boat-goo-container",children:[{id:"river-rangers/boat-goo-1",url:"river-rangers/boat-goo-1.png",anchor:[.5,.5]},{id:"river-rangers/boat-goo-2",url:"river-rangers/boat-goo-2.png",anchor:[.5,.5]},{id:"river-rangers/boat-goo-3",url:"river-rangers/boat-goo-3.png",anchor:[.5,.5]}]},{id:"river-rangers/boat-flag",url:"river-rangers/boat-flag.png",anchor:[1,1]},{id:"river-rangers/boat-bullet",url:"river-rangers/boat-bullet.png",anchor:[.5,.5],pool:5},{id:"river-rangers/boat-bullet-hot",url:"river-rangers/boat-bullet-hot.png",anchor:[.5,.5],pool:5},{id:"river-rangers/boat-blunderbuss-bullet",url:"river-rangers/boat-blunderbuss-bullet.png",anchor:[.5,.5],pool:60},{id:"river-rangers/boat-bullet-particle",url:"river-rangers/bullet-particle.png",anchor:[.5,.5],pool:40},{id:"river-rangers/boat-gun-rotate-breech",url:"river-rangers/boat-gun-rotate-breech.png",anchor:[.5,.5]},{id:"river-rangers/boat-gun-barrel",url:"river-rangers/boat-gun-barrel.png",anchor:[.5,.5]},{id:"river-rangers/boat-gun-barrel-recoil",url:"river-rangers/boat-gun-barrel-end.png",anchor:[.5,.5]},{id:"river-rangers/boat-gun-barrel-recoil-blunderbuss",url:"river-rangers/boat-gun-barrel-end-blunderbuss.png",anchor:[.5,.5]},{id:"river-rangers/flintlock",url:"river-rangers/flint-lock.png",anchor:[.5,.8]},{id:"river-rangers/flintlock-pan",url:"river-rangers/flint-lock-pan.png",anchor:[.5,.5]},{id:"river-rangers/flintlock-holder",children:[]},{id:"river-rangers/powerup-gun-particle",url:"river-rangers/powerup-gun-particle.png",anchor:[.5,.5],pool:50},{id:"river-rangers/gun-particle-container",children:[]},{id:"river-rangers/boat-spongebob-body",children:[{id:"river-rangers/boat-spongebob-body-neutral",url:"river-rangers/boat-spongebob-body.png",anchor:[.5,.5]},{id:"river-rangers/boat-spongebob-body-sad",url:"river-rangers/boat-spongebob-body-sad.png",anchor:[.5,.5]},{id:"river-rangers/boat-spongebob-body-happy",url:"river-rangers/boat-spongebob-body-happy.png",anchor:[.5,.5]},{id:"river-rangers/boat-spongebob-body-goo-1",url:"river-rangers/spongebob-body-goo-1.png",anchor:[.5,.5]},{id:"river-rangers/boat-spongebob-body-goo-2",url:"river-rangers/spongebob-body-goo-2.png",anchor:[.5,.5]},{id:"river-rangers/boat-spongebob-body-goo-3",url:"river-rangers/spongebob-body-goo-3.png",anchor:[.5,.5]}]},{id:"river-rangers/boat-spongebob-arm-front",url:"river-rangers/boat-spongebob-arm-front.png",anchor:[.5,.5],pool:2},{id:"river-rangers/river-bank",url:"river-rangers/river-bank.png",pool:2},{id:"river-rangers/river-bank-holder",children:[],pool:2},{id:"river-rangers/jungle-holder",children:[],pool:2},{id:"river-rangers/jungle-holder-mid-layer",children:[],pool:2},{id:"river-rangers/jungle-bg-mid-layer",url:"river-rangers/jungle-bg-mid-layer.png",pool:4},{id:"river-rangers/jungle-back-layer",url:"river-rangers/jungle-back-layer.png",pool:2},{id:"river-rangers/riverside-element-1",url:"river-rangers/riverside-element-1.png",anchor:[.5,.5],pool:2},{id:"river-rangers/riverside-element-2",url:"river-rangers/riverside-element-2.png",anchor:[.5,.5],pool:2},{id:"river-rangers/riverside-element-3",url:"river-rangers/riverside-element-3.png",anchor:[.5,.5],pool:2},{id:"river-rangers/riverside-element-4",url:"river-rangers/riverside-element-4.png",anchor:[.5,.5],pool:2},{id:"river-rangers/riverside-element-5",url:"river-rangers/riverside-element-5.png",anchor:[.5,.5],pool:2},{id:"river-rangers/riverside-element-6",url:"river-rangers/riverside-element-6.png",anchor:[.5,.5],pool:2},{id:"river-rangers/riverside-element-7",url:"river-rangers/riverside-element-7.png",anchor:[.5,.5],pool:2},{id:"river-rangers/riverside-element-8",url:"river-rangers/riverside-element-8.png",anchor:[.5,.5],pool:2},{id:"river-rangers/riverside-element-9",url:"river-rangers/riverside-element-9.png",anchor:[.5,.5],pool:2},{id:"river-rangers/jungle-element-1",url:"river-rangers/jungle-element-1.png",y:600,anchor:[.5,1],pool:2},{id:"river-rangers/jungle-element-2",url:"river-rangers/jungle-element-2.png",y:600,anchor:[.5,1],pool:2},{id:"river-rangers/jungle-element-3",url:"river-rangers/jungle-element-3.png",y:600,anchor:[.5,1],pool:2},{id:"river-rangers/jungle-element-4",url:"river-rangers/jungle-element-4.png",y:600,anchor:[.5,1],pool:2},{id:"river-rangers/jungle-element-5",url:"river-rangers/jungle-element-5.png",anchor:[.5,0],pool:2},{id:"river-rangers/jungle-element-6",url:"river-rangers/jungle-element-6.png",anchor:[.5,0],pool:2},{id:"river-rangers/jungle-element-7",url:"river-rangers/jungle-element-7.png",anchor:[.5,0],pool:2},{id:"river-rangers/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"river-rangers/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"river-rangers/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"river-rangers/score-holder",children:[{id:"river-rangers-score-holder",url:"river-rangers/score-bg.png"}]},{id:"river-rangers-sun",url:"river-rangers/sun.png",anchor:[.5,.5],retina:!1},{id:"river-rangers-sky",url:"river-rangers/sky-background.png",anchor:[0,0],retina:!1},{id:"river-rangers-drone-smoke",url:"river-rangers/drone-smoke.png",anchor:[.5,.5],pool:30},{id:"river-rangers-drone-smoke-1",url:"river-rangers/drone-smoke-1.png",anchor:[.5,.5],pool:30},{id:"river-rangers-river-particle-1",url:"river-rangers/water-particle-1.png",anchor:[.5,.5],pool:25},{id:"river-rangers-river-particle-2",url:"river-rangers/water-particle-2.png",anchor:[.5,.5],pool:25},{id:"river-ranger/sub-container",children:[{id:"river-rangers/sub-base",url:"river-rangers/sub-base.png",y:197.5,anchor:[.5,.5]},{id:"river-rangers/sub-bottom",url:"river-rangers/sub-bottom.png",x:-30,y:163.5,anchor:[.5,.5]},{id:"river-rangers/sub-middle",url:"river-rangers/sub-middle.png",x:-30,y:142.5,anchor:[.5,.5]},{id:"river-rangers/sub-top",url:"river-rangers/sub-top.png",x:0,y:89.5,anchor:[.5,.5]},{id:"river-rangers/sub-blank",url:"river-rangers/sub-blank.png",x:-60,y:101.5,anchor:[.5,.5]},{id:"river-rangers/sub-p-normal",url:"river-rangers/sub-p-normal.png",x:-60,y:101.5,anchor:[.5,.5]},{id:"river-rangers/sub-p-hit",url:"river-rangers/sub-p-hit.png",x:-60,y:101.5,anchor:[.5,.5]},{id:"river-rangers/sub-p-lose",url:"river-rangers/sub-p-lose.png",x:-60,y:101.5,anchor:[.5,.5]},{id:"river-rangers/sub-screen-cover",url:"river-rangers/sub-screen-cover.png",x:-60,y:102,anchor:[.5,.5]}]},{id:"water-splash-frames",anchor:[.5,.5],type:"spritesheet",dir:"river-rangers/water-splash-frames",atlas:"water-splash-frames.json",frames:["rr-splash-blank.png","rr-splash-1.png","rr-splash-2.png","rr-splash-3.png","rr-splash-4.png","rr-splash-5.png","rr-splash-6.png","rr-splash-7.png","rr-splash-blank.png"]},{id:"gunshot-frames",anchor:[.5,.5],type:"spritesheet",dir:"river-rangers/gunshot-frames",atlas:"gunshot-frames.json",frames:["rr-gunshot-blank.png","rr-gunshot-1.png","rr-gunshot-2.png","rr-gunshot-3.png","rr-gunshot-4.png","rr-gunshot-5.png","rr-gunshot-6.png","rr-gunshot-blank.png"]},{id:"bank-frames",anchor:[0,0],type:"spritesheet",dir:"river-rangers/bank-frames",pool:2,atlas:"bank-frames.json",frames:["rr-bank-1.png","rr-bank-2.png","rr-bank-3.png"]},{id:"front-boat-frames",anchor:[.5,.5],type:"spritesheet",dir:"river-rangers/front-boat-frames",pool:2,atlas:"front-boat-frames.json",frames:["rr-front-boat-1.png","rr-front-boat-2.png","rr-front-boat-3.png","rr-front-boat-4.png"]},{id:"rear-boat-frames",anchor:[.5,.5],type:"spritesheet",dir:"river-rangers/rear-boat-frames",pool:2,atlas:"rear-boat-frames.json",frames:["rr-rear-boat-1.png","rr-rear-boat-2.png","rr-rear-boat-3.png","rr-rear-boat-4.png","rr-rear-boat-5.png","rr-rear-boat-6.png"]},{id:"drone-damage-frames",anchor:[.5,.5],type:"spritesheet",dir:"river-rangers/drone-damage-frames",atlas:"drone-damage-frames.json",frames:["rr-drone-damage-blank.png","rr-drone-damage-1.png","rr-drone-damage-2.png","rr-drone-damage-3.png","rr-drone-damage-5.png","rr-drone-damage-blank.png"]},{id:"bomb-pop-frames",anchor:[.5,.5],type:"spritesheet",dir:"river-rangers/bomb-pop-frames",atlas:"bomb-pop-frames.json",frames:["rr-bomb-pop-blank.png","rr-bomb-pop-1.png","rr-bomb-pop-2.png","rr-bomb-pop-3.png","rr-bomb-pop-5.png","rr-bomb-pop-6.png","rr-bomb-pop-7.png","rr-bomb-pop-8.png","rr-bomb-pop-9.png","rr-bomb-pop-blank.png"]},{id:"river-rangers/signal-frames",anchor:[.5,.5],type:"spritesheet",dir:"river-rangers/signal-frames",atlas:"signal-frames.json",frames:["rr-signal-blank.png","rr-signal-1.png","rr-signal-2.png","rr-signal-3.png","rr-signal-4.png","rr-signal-5.png","rr-signal-blank.png"]},{id:"river-rangers/damage-1",url:"river-rangers/damage-1.png",anchor:[.5,.5],pool:5},{id:"river-rangers/damage-2",url:"river-rangers/damage-2.png",anchor:[.5,.5],pool:5},{id:"river-rangers/damage-3",url:"river-rangers/damage-3.png",anchor:[.5,.5],pool:5},{id:"river-rangers/goo-particle-1",url:"river-rangers/goo-particle-1.png",anchor:[.5,.5],pool:5},{id:"river-rangers/goo-particle-2",url:"river-rangers/goo-particle-2.png",anchor:[.5,.5],pool:5},{id:"river-rangers/goo-particle-3",url:"river-rangers/goo-particle-3.png",anchor:[.5,.5],pool:5},{id:"river-rangers/splash-1",url:"river-rangers/splash-1.png",anchor:[.5,.5],pool:5},{id:"river-rangers/splash-2",url:"river-rangers/splash-2.png",anchor:[.5,.5],pool:5},{id:"river-rangers/splash-3",url:"river-rangers/splash-3.png",anchor:[.5,.5],pool:5},{id:"river-rangers/splash-4",url:"river-rangers/splash-4.png",anchor:[.5,.5],pool:5}],"laser-cave-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"tutorial/laser-cave/help-laser-desktop-keys-1",url:"laser-cave/help-controls.png",x:-140,y:-25,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/laser-cave/help-fire-button",url:"laser-cave/help-space.png",x:10,y:145,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/laser-cave/help-split-horizontal",url:"laser-cave/help-split-horizontal.png",x:0,y:90,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/laser-cave/help-laser-controls",url:"laser-cave/help-laser-controls.png",x:90,y:-30,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/laser-cave/help-laser-controls",url:"laser-cave/help-laser-controls.png",x:120,y:-50,anchor:[.5,.5],platformspecific:"mobile"},{id:"tutorial/laser-cave/help-laser-mobile-keys-1",url:"laser-cave/help-mobile-aim.png",x:-160,y:-30,anchor:[.5,.5],platformspecific:"mobile"},{id:"tutorial/laser-cave/help-laser-cave/help-laser-mobile-keys-2",url:"laser-cave/help-fire-mobile.png",x:0,y:130,anchor:[.5,.5],platformspecific:"mobile"},{id:"tutorial/laser-cave/help-split-horizontal",url:"laser-cave/help-split-horizontal.png",x:0,y:75,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"tutorial/laser-cave/help-shooting",url:"laser-cave/help-shoot-drone.png",x:-165,y:0,anchor:[.5,.5]},{id:"tutorial/laser-cave/help-zap",url:"laser-cave/help-turtle-zap.png",x:170,y:-15,anchor:[.5,.5]},{id:"tutorial/laser-cave/help-split-vertical-long",url:"river-rangers/help-split-vertical-long.png",x:0,y:10,anchor:[.5,.5]},{id:"tutorial/laser-cave/help-thumbs-up",url:"laser-cave/help-thumbs-up.png",x:-160,y:170,anchor:[.5,.5]},{id:"tutorial/laser-cave/help-thumbs-down",url:"laser-cave/help-thumbs-down.png",x:160,y:170,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"tutorial/laser-cave/powerup-help",url:"laser-cave/powerup-help.png",x:60,y:0,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/laser-cave/powerup-help-2",url:"laser-cave/powerup-help-2.png",x:40,y:0,anchor:[.5,.5],platformspecific:"mobile"}]}],"laser-cave-assets":[{id:"laser-cave/outer-holder",children:[]},{id:"laser-cave/main-holder",children:[]},{id:"laser-cave/cart-body-holder",children:[]},{id:"laser-cave/blank-input",url:"laser-cave/blank-input.png"},{id:"laser-cave/gun-cooldown-meter-holder",children:[{id:"laser-cave/gun-cooldown-meter-bar-outer",url:"laser-cave/gun-cooldown-meter-bar-outer.png",x:23,y:-210},{id:"laser-cave/gun-cooldown-meter-fill",url:"laser-cave/gun-cooldown-meter-fill.png",x:51.5,y:3.5,anchor:[.5,1]},{id:"laser-cave/gun-cooldown-meter-fill-overlay",url:"laser-cave/gun-cooldown-meter-fill-overlay.png",x:51.5,y:3.5,anchor:[.5,1]}]},{id:"laser-cave/gun-cooldown-meter-icon-blue",url:"laser-cave/gun-cooldown-meter-icon-blue.png",x:-4,y:-4},{id:"laser-cave/gun-cooldown-meter-icon-red",url:"laser-cave/gun-cooldown-meter-icon-red.png",x:-4,y:-4},{id:"laser-cave/gun-cooldown-meter-icon-purple",url:"laser-cave/gun-cooldown-meter-icon-purple.png",x:-4,y:-4},{id:"laser-cave/gun-cooldown-meter-icon-orange",url:"laser-cave/gun-cooldown-meter-icon-orange.png",x:-4,y:-4},{id:"laser-cave/heart-bg",url:"laser-cave/heart-bg.png",anchor:[.5,.5]},{id:"laser-cave/cart-body-red",url:"laser-cave/cart-body-red.png",anchor:[.5,.5]},{id:"laser-cave/cart-body-blue",url:"laser-cave/cart-body-blue.png",anchor:[.5,.5]},{id:"laser-cave/cart-body-purple",url:"laser-cave/cart-body-purple.png",anchor:[.5,.5]},{id:"laser-cave/cart-body-orange",url:"laser-cave/cart-body-orange.png",anchor:[.5,.5]},{id:"laser-cave/cart-wheel",url:"laser-cave/cart-wheel.png",anchor:[.5,.5],pool:2},{id:"laser-cave/gun-breech",url:"laser-cave/gun-breech.png",anchor:[.5,.5]},{id:"laser-cave/gun-barrel",url:"laser-cave/gun-barrel.png",anchor:[.5,.5]},{id:"laser-cave/gun-barrel-upgrade",url:"laser-cave/gun-barrel-upgrade.png",anchor:[.5,.5]},{id:"laser-cave/pu-glow",url:"laser-cave/glow.png",y:0,anchor:[.5,.5],retina:!1},{id:"laser-cave/powerup-effect",children:[{id:"laser-cave/pu-sparkle-1",url:"laser-cave/sparkle-1.png",y:0,anchor:[.5,.5],retina:!1},{id:"laser-cave/pu-sparkle-2",url:"laser-cave/sparkle-2.png",y:0,anchor:[.5,.5],retina:!1}]},{id:"laser-cave/balloon-holder",children:[],pool:3},{id:"laser-cave/balloon",url:"laser-cave/balloon.png",pool:3,anchor:[.5,.5]},{id:"laser-cave/balloon-string",url:"laser-cave/balloon-string.png",pool:3,anchor:[1,0]},{id:"laser-cave/turtle-hand",url:"laser-cave/turtle-hand.png",anchor:[.5,.5]},{id:"laser-cave/turtle-head-red",children:[{id:"laser-cave/turtle-head-1-red",url:"laser-cave/turtle-head-1-red.png",anchor:[.5,.5]},{id:"laser-cave/turtle-head-2-red",url:"laser-cave/turtle-head-2-red.png",anchor:[.5,.5]},{id:"laser-cave/turtle-head-3-red",url:"laser-cave/turtle-head-3-red.png",anchor:[.5,.5]}]},{id:"laser-cave/turtle-head-blue",children:[{id:"laser-cave/turtle-head-1-blue",url:"laser-cave/turtle-head-1-blue.png",anchor:[.5,.5]},{id:"laser-cave/turtle-head-2-blue",url:"laser-cave/turtle-head-2-blue.png",anchor:[.5,.5]},{id:"laser-cave/turtle-head-3-blue",url:"laser-cave/turtle-head-3-blue.png",anchor:[.5,.5]}]},{id:"laser-cave/turtle-head-purple",children:[{id:"laser-cave/turtle-head-1-purple",url:"laser-cave/turtle-head-1-purple.png",anchor:[.5,.5]},{id:"laser-cave/turtle-head-2-purple",url:"laser-cave/turtle-head-2-purple.png",anchor:[.5,.5]},{id:"laser-cave/turtle-head-3-purple",url:"laser-cave/turtle-head-3-purple.png",anchor:[.5,.5]}]},{id:"laser-cave/turtle-head-orange",children:[{id:"laser-cave/turtle-head-1-orange",url:"laser-cave/turtle-head-1-orange.png",anchor:[.5,.5]},{id:"laser-cave/turtle-head-2-orange",url:"laser-cave/turtle-head-2-orange.png",anchor:[.5,.5]},{id:"laser-cave/turtle-head-3-orange",url:"laser-cave/turtle-head-3-orange.png",anchor:[.5,.5]}]},{id:"laser-cave/turtle-1-bandana-tail-1",url:"laser-cave/turtle-1-bandana-tail-1.png",anchor:[.5,.5]},{id:"laser-cave/turtle-1-bandana-tail-2",url:"laser-cave/turtle-1-bandana-tail-2.png",anchor:[.5,.5]},{id:"laser-cave/turtle-leg-orange",url:"laser-cave/turtle-leg-orange.png"},{id:"laser-cave/turtle-leg-purple",url:"laser-cave/turtle-leg-purple.png"},{id:"laser-cave/turtle-leg-red",url:"laser-cave/turtle-leg-red.png"},{id:"laser-cave/turtle-leg-blue",url:"laser-cave/turtle-leg-blue.png"},{id:"laser-cave/slime-particle-1",url:"laser-cave/slime-particle-1.png",pool:10},{id:"laser-cave/lava-glow",url:"laser-cave/lava-glow.png",anchor:[0,1]},{id:"laser-cave/slime-particle-2",url:"laser-cave/slime-particle-2.png",pool:10},{id:"laser-cave/lava-particle-holder",children:[]},{id:"laser-cave/track-rail",url:"laser-cave/track-rail.png",anchor:[0,1],pool:2},{id:"laser-cave/front-spark",url:"laser-cave/spark.png",anchor:[.5,.5],pool:60},{id:"laser-cave/back-spark",url:"laser-cave/spark.png",anchor:[.5,.5],pool:60},{id:"laser-cave/rail-sleeper",url:"laser-cave/rail-sleeper.png",anchor:[.5,1],pool:20},{id:"laser-cave/foreground-holder",children:[],pool:2},{id:"laser-cave/laser-beam",url:"laser-cave/laser-beam.png",anchor:[0,.5]},{id:"laser-cave/laser-beam-power-up",url:"laser-cave/laser-beam-power-up.png",anchor:[.5,.5],pool:20},{id:"laser-cave/laser-muzzle-blast",url:"laser-cave/laser-muzzle-blast.png",anchor:[.5,.5]},{id:"laser-cave/laser-muzzle-lines",url:"laser-cave/laser-muzzle-lines.png",anchor:[.5,.5]},{id:"laser-cave/laser-particle",url:"laser-cave/laser-particle.png",anchor:[.5,.5],pool:20},{id:"laser-cave/drone-holder",children:[],pool:5},{id:"laser-cave/cave-drone-body",url:"laser-cave/cave-drone-body.png",anchor:[.5,.5],pool:5},{id:"laser-cave/central-divider-rock",url:"laser-cave/central-divider-rock.png",pool:2,anchor:[0,1]},{id:"laser-cave/central-divider-rock-holder",children:[],pool:2},{id:"laser-cave/mine-rock-0",url:"laser-cave/mine-rock-0.png",anchor:[.5,.5],pool:2},{id:"laser-cave/mine-rock-1",url:"laser-cave/mine-rock-1.png",anchor:[.5,.5],pool:2},{id:"laser-cave/mine-rock-2",url:"laser-cave/mine-rock-2.png",anchor:[.5,.5],pool:2},{id:"laser-cave/mine-rock-3",url:"laser-cave/mine-rock-3.png",anchor:[.5,.5],pool:2},{id:"laser-cave/mine-rock-4",url:"laser-cave/mine-rock-4.png",anchor:[.5,.5],pool:2},{id:"laser-cave/mine-rock-5",url:"laser-cave/mine-rock-5.png",anchor:[.5,.5],pool:2},{id:"laser-cave/enemy-layer",children:[]},{id:"laser-cave/enemy-holder",children:[]},{id:"laser-cave/enemy-cart",url:"laser-cave/enemy-cart.png",anchor:[.5,.5]},{id:"laser-cave/enemy-head",url:"laser-cave/enemy-head.png",anchor:[.5,.8]},{id:"laser-cave/enemy-torso",url:"laser-cave/enemy-torso.png",anchor:[.5,1]},{id:"laser-cave/enemy-hands",url:"laser-cave/enemy-hands.png",anchor:[.5,1]},{id:"laser-cave/debris-particle-large-0",url:"laser-cave/debris-particle-large-0.png",anchor:[.5,.5],pool:10},{id:"laser-cave/debris-particle-large-1",url:"laser-cave/debris-particle-large-1.png",anchor:[.5,.5],pool:10},{id:"laser-cave/debris-particle-large-2",url:"laser-cave/debris-particle-large-2.png",anchor:[.5,.5],pool:10},{id:"laser-cave/debris-particle-large-3",url:"laser-cave/debris-particle-large-3.png",anchor:[.5,.5],pool:10},{id:"laser-cave/debris-particle-large-4",url:"laser-cave/debris-particle-large-4.png",anchor:[.5,.5],pool:10},{id:"laser-cave/drone-pop",anchor:[.5,.5],type:"spritesheet",dir:"laser-cave/drone-pop",atlas:"drone-pop.json",pool:5,frames:["drone-pop-blank.png","drone-pop-1.png","drone-pop-2.png","drone-pop-3.png","drone-pop-4.png","drone-pop-5.png","drone-pop-6.png","drone-pop-blank.png"]},{id:"laser-cave/drone-zap",anchor:[.5,0],type:"spritesheet",dir:"laser-cave/drone-zap",atlas:"zap-frames.json",pool:5,frames:["zap-frame-0.png","zap-frame-1.png","zap-frame-2.png","zap-frame-3.png"]},{id:"laser-cave/turtle-zap",anchor:[.5,.5],type:"spritesheet",dir:"laser-cave/turtle-zap",atlas:"zap-turtle-frames.json",frames:["zap-turtle-frame-0.png","zap-turtle-frame-1.png","zap-turtle-frame-2.png","zap-turtle-frame-3.png"]},{id:"balloon-frames",anchor:[.5,.5],type:"spritesheet",dir:"laser-cave/balloon-frames",pool:2,atlas:"balloon-frames.json",frames:["balloon-frame-blank.png","balloon-frame-1.png","balloon-frame-2.png","balloon-frame-3.png","balloon-frame-4.png","balloon-frame-5.png","balloon-frame-6.png","balloon-frame-7.png","balloon-frame-8.png","balloon-frame-9.png","balloon-frame-blank.png"]},{id:"laser-cave/signal-frames",anchor:[.5,.5],type:"spritesheet",dir:"laser-cave/signal-frames",pool:2,atlas:"signal-frames.json",frames:["signal-frame-blank.png","signal-frame-1.png","signal-frame-2.png","signal-frame-3.png","signal-frame-4.png","signal-frame-5.png","signal-frame-blank.png"]},{id:"laser-cave/debris-small-particle",url:"laser-cave/debris-small-particle.png",anchor:[.5,.5],pool:40},{id:"laser-cave/debris-small-particle-smoke",url:"laser-cave/debris-small-particle-smoke.png",anchor:[.5,.5],pool:400},{id:"laser-cave/cooldown-bar",url:"laser-cave/cooldown-bar.png",anchor:[0,.5]},{id:"laser-cave/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"laser-cave/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"laser-cave/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"laser-cave/score-holder",children:[{id:"laser-cave-score-holder",url:"laser-cave/score-bg.png",anchor:[.5,.5]}]},{id:"laser-cave/heart-bg",url:"laser-cave/heart-bg.png",anchor:[.5,.5]},{id:"laser-cave/heart-icon",url:"laser-cave/heart-icon.png",anchor:[.5,.5],pool:3},{id:"laser-cave/turtle-zap-star",url:"laser-cave/turtle-zap-star.png",anchor:[.5,.5]},{id:"laser-cave/laser-sight-point",url:"laser-cave/laser-sight-point.png",anchor:[.5,.5]},{id:"laser-cave/laser-sight-beam",url:"laser-cave/laser-sight-beam.png",anchor:[0,.5]},{id:"laser-cave/bg-holder-1",children:[]},{id:"laser-cave/bg-holder-2",children:[]},{id:"laser-cave/bg-rock-0",url:"laser-cave/bg-rock-0.png",anchor:[.5,1],y:550,pool:2},{id:"laser-cave/bg-rock-1",url:"laser-cave/bg-rock-1.png",anchor:[.5,1],y:550,pool:2},{id:"laser-cave/bg-rock-2",url:"laser-cave/bg-rock-2.png",anchor:[.5,1],y:550,pool:2},{id:"laser-cave/bg-rock-3",url:"laser-cave/bg-rock-3.png",anchor:[.5,1],y:550,pool:2},{id:"laser-cave/bg-rock-4",url:"laser-cave/bg-rock-4.png",anchor:[.5,1],y:550,pool:2},{id:"laser-cave/bg-rock-5",url:"laser-cave/bg-rock-5.png",anchor:[.5,1],y:550,pool:2},{id:"laser-cave/bg-holder-far-1",children:[]},{id:"laser-cave/bg-holder-far-2",children:[]},{id:"laser-cave/bg-rock-far-0",url:"laser-cave/bg-rock-far-0.png",anchor:[.5,0],y:-5,pool:2},{id:"laser-cave/bg-rock-far-1",url:"laser-cave/bg-rock-far-1.png",anchor:[.5,0],y:-5,pool:2},{id:"laser-cave/bg-rock-far-2",url:"laser-cave/bg-rock-far-2.png",anchor:[.5,0],y:-5,pool:2},{id:"laser-cave/bg-rock-far-3",url:"laser-cave/bg-rock-far-3.png",anchor:[.5,0],y:-5,pool:2},{id:"laser-cave/bg-rock-far-4",url:"laser-cave/bg-rock-far-4.png",anchor:[.5,0],y:-5,pool:2},{id:"laser-cave/bg-rock-far-5",url:"laser-cave/bg-rock-far-5.png",anchor:[.5,0],y:-5,pool:2},{id:"laser-cave/rear-layer",url:"laser-cave/rear-layer.png",pool:4},{id:"laser-cave/rear-layer-holder",children:[],pool:2},{id:"laser-cave/ground-block",url:"laser-cave/ground-block.png"},{id:"laser-cave/bg-cover",url:"laser-cave/bg-cover.png",pool:2,retina:!1},{id:"laser-cave/bg-far-cover",url:"laser-cave/bg-cover.png",pool:2,retina:!1},{id:"laser-cave/cave-edge",url:"laser-cave/cave-edge.png",pool:2,retina:!1}],"dodgems-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"tutorial/dodgems/help-split-vertical-long",url:"dodgems/help-split-vertical-long.png",x:0,y:10,anchor:[.5,.5]},{id:"tutorial/dodgems/help-motion-desktop",url:"dodgems/help-motion-desktop.png",x:-140,y:-30,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/dodgems/help-turning-desktop",url:"dodgems/help-turning-desktop.png",x:160,y:-50,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/dodgems/help-dodgems-desktop-keys-1",url:"dodgems/help-dodgems-desktop-keys-1.png",x:-160,y:110,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/dodgems/help-dodgems-desktop-keys-2",url:"dodgems/help-dodgems-desktop-keys-2.png",x:160,y:115,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/dodgems/help-motion-mobile",url:"dodgems/help-motion-mobile.png",x:-140,y:0,anchor:[.5,.5],platformspecific:"mobile"},{id:"tutorial/dodgems/help-turning-mobile",url:"dodgems/help-turning-mobile.png",x:140,y:0,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"tutorial/dodgems/help-split-vertical-long",url:"dodgems/help-split-vertical-long.png",x:0,y:10,anchor:[.5,.5]},{id:"tutorial/dodgems/help-bump",url:"dodgems/help-bump.png",x:-160,y:0,anchor:[.5,.5]},{id:"tutorial/dodgems/help-avoid-bump",url:"dodgems/help-avoid-bump.png",x:160,y:0,anchor:[.5,.5]},{id:"tutorial/dodgems/help-thumbs-up",url:"dodgems/help-thumbs-up.png",x:-160,y:170,anchor:[.5,.5]},{id:"tutorial/dodgems/help-thumbs-down",url:"dodgems/help-thumbs-down.png",x:160,y:170,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"tutorial/dodgems/powerup-help",url:"dodgems/powerup-help.png",x:60,y:0,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/dodgems/powerup-help-2",url:"dodgems/powerup-help-2.png",x:0,y:0,anchor:[.5,.5],platformspecific:"mobile"}]}],"dodgems-assets":[{id:"main-holder",x:-512,y:-312,children:[]},{id:"dodgems/arena",x:512,y:470,children:[]},{id:"dodgems/damage-particles-holder",children:[]},{id:"dodgems/boost-particles-holder",children:[]},{id:"dodgems/boost-particle",url:"dodgems/boost-particle.png",anchor:[.5,.5],pool:30,retina:!1},{id:"dodgems/ui-layer",children:[]},{id:"dodgems/blank-input",url:"dodgems/blank-input.png"},{id:"dodgems/skid-particle",url:"dodgems/skid-particle.png",pool:120,anchor:[.5,.5]},{id:"dodgems/dodgem-rear-wheel-marks",url:"dodgems/dodgem-rear-wheel-marks.png",pool:160,anchor:[.5,.5]},{id:"dodgems/crack-1",url:"dodgems/crack-1.png",anchor:[.5,.5],pool:40},{id:"dodgems/confetti-container",children:[]},{id:"dodgems/confetti-1",url:"dodgems/confetti-1.png",anchor:[.5,.5],pool:30},{id:"dodgems/confetti-2",url:"dodgems/confetti-2.png",anchor:[.5,.5],pool:30},{id:"dodgems/confetti-3",url:"dodgems/confetti-3.png",anchor:[.5,.5],pool:30},{id:"dodgems/confetti-4",url:"dodgems/confetti-4.png",anchor:[.5,.5],pool:30},{id:"dodgems/dodgem-container",children:[{url:"dodgems/dodgem-spikes.png",x:0,y:-9,anchor:[.5,.5]},{url:"dodgems/dodgem.png",x:0,y:0,anchor:[.5,.5]}]},{id:"dodgems/cart-particle-1",url:"dodgems/cart-particle-1.png",pool:80,x:0,y:0,anchor:[.5,.5]},{id:"dodgems/cart-particle-2",url:"dodgems/cart-particle-2.png",pool:80,x:0,y:0,anchor:[.5,.5]},{id:"dodgems/cart-particle-3",url:"dodgems/cart-particle-3.png",pool:80,x:0,y:0,anchor:[.5,.5]},{id:"dodgems/character-head",url:"dodgems/character-head.png",x:512,y:335,anchor:[.5,.5]},{id:"dodgems/left-arm",url:"dodgems/left-arm.png",x:0,y:0,anchor:[.5,1]},{id:"dodgems/right-arm",url:"dodgems/right-arm.png",x:0,y:0,anchor:[.5,1]},{id:"dodgems/enemy-holder",children:[],x:-100,y:-100,pool:9},{id:"dodgems/enemy-bumper",url:"dodgems/enemy-bumper.png",anchor:[.5,.5],pool:9},{id:"dodgems/enemy-cart",url:"dodgems/enemy-cart.png",anchor:[.5,.5],pool:9},{id:"dodgems/enemy-player",url:"dodgems/enemy-player.png",anchor:[.5,.5],pool:9},{id:"dodgems/enemy-player-head",url:"dodgems/enemy-player-head.png",anchor:[.5,.5],pool:9},{id:"dodgems/enemy-arm-left",url:"dodgems/left-arm.png",anchor:[.5,1],pool:9},{id:"dodgems/enemy-arm-right",url:"dodgems/right-arm.png",anchor:[.5,1],pool:9},{id:"dodgems/enemy",url:"dodgems/enemy.png",anchor:[.5,.5],pool:9},{id:"dodgems/health-bg",url:"dodgems/health-bg.png",anchor:[0,.5],pool:9},{id:"dodgems/health-fg",url:"dodgems/health-fg.png",x:2.5,anchor:[0,.5],pool:9},{id:"dodgems/health-fg-2",url:"dodgems/health-fg.png",x:2.5,anchor:[0,.5],pool:9},{id:"dodgems/tag",url:"dodgems/tag.png",anchor:[.5,1],pool:9},{id:"dodgems/health-guage",children:[],pool:9},{id:"dodgems/health-guage-layer",children:[]},{id:"dodgems/gate",x:512,y:1857,children:[{id:"dodgems/gate-left",url:"dodgems/door.png",anchor:[.5,.5],x:-45},{id:"dodgems/gate-right",url:"dodgems/door.png",anchor:[.5,.5],x:45}]},{id:"dodgems/repair-arm",children:[{id:"dodgems/repair-arm-shadow",url:"dodgems/repair-arm.png",retina:!1,x:1430,y:50,anchor:[1,.5]},{id:"dodgems/repair-legs-container",children:[]},{id:"dodgems/repair-arm",url:"dodgems/repair-arm.png",x:1430,anchor:[1,.5]},{id:"dodgems/repair-arm-extra-shadow",url:"dodgems/repair-arm-extra.png",anchor:[0,.5]},{id:"dodgems/repair-arm-extra",url:"dodgems/repair-arm-extra.png",anchor:[0,.5]}]},{id:"dodgems/repair-leg",url:"dodgems/repair-leg.png",pool:4,anchor:[.5,.5]},{id:"dodgems/floor",x:512,y:312,children:[]},{id:"dodgems/floor-tile",url:"dodgems/floor-tile.png",pool:16,anchor:[0,0]},{id:"dodgems/floor-tile-shadow-1",url:"dodgems/floor-tile-shadow-1.png",pool:8,anchor:[0,0]},{id:"dodgems/floor-tile-shadow-2",url:"dodgems/floor-tile-shadow-2.png",pool:4,anchor:[0,0]},{id:"dodgems/floor-tile-shadow-corner",url:"dodgems/floor-tile-shadow-corner.png",pool:4,anchor:[0,0]},{id:"dodgems/mini-floor",url:"dodgems/mini-floor.png",retina:!1,anchor:[.5,.5]},{id:"dodgems/score-bg",url:"dodgems/score-bg.png",anchor:[0,.5]},{id:"dodgems/health-bar-holder",x:60,y:60,children:[{id:"dodgems/health-bar-bg",url:"dodgems/health-meter-bar-outer.png",y:2,x:55,anchor:[0,.5]},{id:"dodgems/health-bar-fg2",url:"dodgems/health-meter-fill-2.png",x:50,anchor:[0,.5]},{id:"dodgems/health-bar-fg",url:"dodgems/health-meter-fill.png",x:50,anchor:[0,.5]},{id:"dodgems/player-neutral",url:"dodgems/player-neutral.png",anchor:[.5,.5]}]},{id:"dodgems/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"dodgems/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"dodgems/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"timer-font",dir:"timer-font",fontname:"ocr",fontdata:"timer-text.xml",type:"bitmaptext"},{id:"dodgems/timer-holder",children:[{id:"dodgems/timer-bg",url:"dodgems/timer-bg.png",anchor:[.5,.05]},{id:"dodgems/timer-inner",children:[{id:"dodgems/timer-icon",url:"dodgems/timer-icon.png",anchor:[.5,.05]}]}]},{id:"dodgems/electric-cart-frames",anchor:[.5,.5],y:-12,type:"spritesheet",dir:"dodgems/electric-cart-frames",pool:11,atlas:"electric-cart-frames.json",frames:["electric-cart-frames-blank.png","electric-cart-frames-1.png","electric-cart-frames-2.png","electric-cart-frames-3.png","electric-cart-frames-4.png","electric-cart-frames-1.png","electric-cart-frames-2.png","electric-cart-frames-3.png","electric-cart-frames-4.png","electric-cart-frames-1.png","electric-cart-frames-2.png","electric-cart-frames-3.png","electric-cart-frames-4.png","electric-cart-frames-1.png","electric-cart-frames-2.png","electric-cart-frames-3.png","electric-cart-frames-4.png"]},{id:"dodgems/bang-frames",anchor:[.5,.5],type:"spritesheet",dir:"dodgems/bang-frames",pool:11,atlas:"bang-frames.json",frames:["bang-frames-blank.png","bang-frames-1.png","bang-frames-2.png","bang-frames-3.png","bang-frames-4.png","bang-frames-5.png","bang-frames-6.png","bang-frames-7.png","bang-frames-8.png","bang-frames-blank.png"]},{id:"dodgems/wall",url:"dodgems/wall.png",pool:3,anchor:[.5,.05]},{id:"dodgems/wall-bottom",url:"dodgems/wall-bottom.png",anchor:[.5,.05]},{id:"dodgems/joystick-left",children:[{url:"dodgems/joystick-background.png",anchor:[.5,.5]},{url:"dodgems/joystick-foreground.png",anchor:[.5,.5]}]},{id:"dodgems/joystick-right",children:[{url:"dodgems/joystick-background.png",anchor:[.5,.5]},{url:"dodgems/joystick-foreground.png",anchor:[.5,.5]}]}],"coco-nutty-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"tutorial/coco-nutty/help-launcher",url:"coco-nutty/help-launcher.png",x:100,y:-20,anchor:[.5,.5]},{id:"tutorial/coco-nutty/help-key-press-1",url:"coco-nutty/help-key-press-1.png",x:-120,y:0,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/coco-nutty/help-split-1",url:"coco-nutty/help-split-1.png",x:0,y:100,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/coco-nutty/help-space-bar",url:"coco-nutty/help-space-bar.png",x:0,y:150,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/coco-nutty/help-tablet-controls-1",url:"coco-nutty/help-tablet-controls-1.png",x:-140,y:20,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"tutorial/coco-nutty/help-how-to-play",url:"coco-nutty/help-how-to-play.png",x:0,y:15,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"tutorial/coco-nutty/powerup-help",url:"coco-nutty/powerup-help.png",x:40,y:0,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/coco-nutty/powerup-help-2",url:"coco-nutty/powerup-help-2.png",x:10,y:0,anchor:[.5,.5],platformspecific:"mobile"}]}],"coco-nutty-assets":[{id:"coco-nutty/main-container",children:[]},{id:"coco-nutty/background-container",children:[]},{id:"coco-nutty/mid-container",children:[]},{id:"coco-nutty/foreground-container",children:[]},{id:"coco-nutty/foreground-parallax-container",children:[]},{id:"coco-nutty/blank-input",url:"coco-nutty/blank-input.png"},{id:"coco-nutty/foreground-floor",url:"coco-nutty/foreground-floor.png",anchor:[0,1],pool:5},{id:"coco-nutty/tree-canopy-fg",url:"coco-nutty/tree-canopy-fg.png",pool:5},{id:"coco-nutty/background-tree-element",url:"coco-nutty/background-tree-element.png",pool:10},{id:"coco-nutty/mid-tree-element",url:"coco-nutty/mid-tree-element.png",pool:10},{id:"coco-nutty/chair-stand",url:"coco-nutty/chair-stand.png",anchor:[.5,.5]},{id:"coco-nutty/sky",url:"coco-nutty/sky-background.png",retina:!1},{id:"coco-nutty/character-chair-launcher-holder",children:[]},{id:"coco-nutty/pu-glow",url:"coco-nutty/glow.png",y:0,anchor:[.5,.5],retina:!1},{id:"coco-nutty/powerup-effect",children:[{id:"coco-nutty/pu-sparkle-1",url:"coco-nutty/sparkle-1.png",y:0,anchor:[.5,.5],retina:!1},{id:"coco-nutty/pu-sparkle-2",url:"coco-nutty/sparkle-2.png",y:0,anchor:[.5,.5],retina:!1}]},{id:"coco-nutty/character-chair-dawn",url:"coco-nutty/character-chair-dawn.png",anchor:[.5,.5]},{id:"coco-nutty/character-chair-ricky",url:"coco-nutty/character-chair-ricky.png",anchor:[.5,.5]},{id:"coco-nutty/character-chair-dicky",url:"coco-nutty/character-chair-dicky.png",anchor:[.5,.5]},{id:"coco-nutty/character-chair-nicky",url:"coco-nutty/character-chair-nicky.png",anchor:[.5,.5]},{id:"coco-nutty/magnet-particle",url:"coco-nutty/magnet-particle.png",anchor:[.5,.5],pool:60},{id:"coco-nutty/smoke-particle",url:"coco-nutty/smoke-particle.png",retina:!1,anchor:[.5,.5],pool:50},{id:"coco-nutty/magnet-particle-container",children:[],pool:5,anchor:[.5,.5]},{id:"coco-nutty/ricky-head",url:"coco-nutty/ricky-head.png",anchor:[.5,.5]},{id:"coco-nutty/dicky-head",url:"coco-nutty/dicky-head.png",x:-10,anchor:[.5,.5]},{id:"coco-nutty/nicky-head",url:"coco-nutty/nicky-head.png",anchor:[.5,.5]},{id:"coco-nutty/dawn-head",url:"coco-nutty/dawn-head.png",x:-10,anchor:[.5,.5]},{id:"coco-nutty/score-holder",children:[{id:"coco-nutty/score-holder",url:"coco-nutty/score-bg.png",anchor:[.5,.5]}]},{id:"coco-nutty/character-leg-dawn",url:"coco-nutty/character-leg-dawn.png",anchor:[.3,.2]},{id:"coco-nutty/character-leg-dicky",url:"coco-nutty/character-leg-dicky.png",anchor:[.3,.2]},{id:"coco-nutty/character-leg-nicky",url:"coco-nutty/character-leg-nicky.png",anchor:[.3,.2]},{id:"coco-nutty/character-leg-ricky",url:"coco-nutty/character-leg-ricky.png",anchor:[.3,.2]},{id:"coco-nutty/launcher-wheel",url:"coco-nutty/launcher-wheel.png",anchor:[.5,.5],pool:2},{id:"coco-nutty/projectile-indicator",url:"coco-nutty/projectile-indicator.png",anchor:[.5,.5],pool:50},{id:"coco-nutty/projectile-indicator-trail",url:"coco-nutty/projectile-indicator-trail.png",anchor:[.5,.5],pool:50},{id:"coco-nutty/power-meter-bg",url:"coco-nutty/power-meter-bg.png",anchor:[.5,.5]},{id:"coco-nutty/power-meter-needle",url:"coco-nutty/power-meter-needle.png",anchor:[.5,.5]},{id:"coco-nutty/power-meter-needle-ghost",url:"coco-nutty/power-meter-needle-ghost.png",anchor:[.5,.5]},{id:"coco-nutty/coconut-projectile",url:"coco-nutty/coconut-projectile.png",anchor:[.5,.5]},{id:"coco-nutty/pop-tree-layer",children:[]},{id:"coco-nutty/dirt-particle",url:"coco-nutty/dirt-particle.png",anchor:[.5,.5],pool:20},{id:"coco-nutty/score-backboard",url:"coco-nutty/score-backboard.png",anchor:[.5,.5]},{id:"coco-nutty/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"coco-nutty/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"coco-nutty/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"coco-nutty/ammo-slot-bg",url:"coco-nutty/ammo-slot-bg.png",anchor:[.5,.5],pool:3},{id:"coco-nutty/ammo-slot-coconut",url:"coco-nutty/ammo-slot-coconut.png",anchor:[.5,.5],pool:3},{id:"coco-nutty/target-large",url:"coco-nutty/target-large.png",anchor:[.5,.5]},{id:"coco-nutty/target-hand-arm-pole",url:"coco-nutty/target-hand-arm-pole.png",anchor:[.5,0],pool:3},{id:"coco-nutty/target-large-holder",children:[]},{id:"coco-nutty/target-medium-holder",children:[]},{id:"coco-nutty/target-medium",url:"coco-nutty/target-medium.png",anchor:[.5,.5]},{id:"coco-nutty/target-small-holder",children:[]},{id:"coco-nutty/target-small",url:"coco-nutty/target-small.png",anchor:[.5,.5]},{id:"coco-nutty/launcher-aim-line",url:"coco-nutty/launcher-aim-line.png",anchor:[0,.5]},{id:"coco-nutty/coconut-burst-chunk-0",url:"coco-nutty/coconut-burst-chunk-0.png",anchor:[.5,.5],pool:2},{id:"coco-nutty/coconut-burst-chunk-1",url:"coco-nutty/coconut-burst-chunk-1.png",anchor:[.5,.5],pool:2},{id:"coco-nutty/coconut-burst-chunk-2",url:"coco-nutty/coconut-burst-chunk-2.png",anchor:[.5,.5],pool:2},{id:"coco-nutty/coconut-burst-chunk-3",url:"coco-nutty/coconut-burst-chunk-3.png",anchor:[.5,.5],pool:2},{id:"coco-nutty/coconut-burst-chunk-4",url:"coco-nutty/coconut-burst-chunk-4.png",anchor:[.5,.5],pool:2},{id:"coco-nutty/coconut-burst-chunk-5",url:"coco-nutty/coconut-burst-chunk-5.png",anchor:[.5,.5],pool:2},{id:"coco-nutty/coco-milk-particle",url:"coco-nutty/coco-milk-particle.png",anchor:[.5,.5],pool:100},{id:"coco-nutty/coco-milk-burst",url:"coco-nutty/coco-milk-burst.png",anchor:[.5,.5]},{id:"coco-nutty/tree-bg",url:"coco-nutty/tree-bg.png",anchor:[.5,1]},{id:"coco-nutty/tree-bg-2",url:"coco-nutty/tree-bg-2.png",anchor:[.5,1],pool:2},{id:"coco-nutty/hanging-element-bg-0",url:"coco-nutty/hanging-element-bg-0.png",anchor:[.5,0],pool:2},{id:"coco-nutty/hanging-vine-bg-0",url:"coco-nutty/hanging-vine-bg-0.png",anchor:[.5,0],pool:2},{id:"coco-nutty/hanging-vine-fg-0",url:"coco-nutty/hanging-vine-fg-0.png",anchor:[.5,0]},{id:"coco-nutty/hanging-element-fg-0",url:"coco-nutty/hanging-element-fg-0.png",anchor:[.5,0]},{id:"coco-nutty/bottom-element-fg-0",url:"coco-nutty/bottom-element-fg-0.png",anchor:[.5,1]},{id:"coco-nutty/bottom-element-fg-1",url:"coco-nutty/bottom-element-fg-1.png",anchor:[.5,1]},{id:"coco-nutty/timer-icon-bg",url:"coco-nutty/timer-icon-bg.png",anchor:[.5,.5],pool:20},{id:"coco-nutty/timer-icon-dot",url:"coco-nutty/timer-icon-dot.png",anchor:[.5,.5],pool:20},{id:"coco-nutty/timer-holder",children:[]},{id:"coco-nutty/preview-zone-bg",url:"coco-nutty/preview-zone-bg.png"},{id:"coco-nutty/preview-zone-icon",url:"coco-nutty/preview-zone-icon.png",anchor:[.5,.5]},{id:"coco-nutty/preview-zone-holder",children:[]},{id:"coco-nutty/coconut-hopper",url:"coco-nutty/coconut-hopper.png",anchor:[.5,.5]},{id:"coco-nutty/coconut-hopper-power-up",url:"coco-nutty/coconut-hopper-power-up.png",anchor:[.5,.5]},{id:"coco-nutty/wheel-clamp",url:"coco-nutty/wheel-clamp.png",anchor:[0,.5]},{id:"coco-nutty/coco-nuts-in-hopper",url:"coco-nutty/coco-nuts-in-hopper.png",anchor:[.5,.5]},{id:"coco-nutty/timer-icon",url:"coco-nutty/timer-icon.png",anchor:[.5,.5]},{id:"coco-nutty/coco-nuts-in-hopper-holder",children:[]},{id:"coco-nutty/dropping-magnet",url:"coco-nutty/dropping-magnet.png",anchor:[.5,.5],pool:5},{id:"coco-nutty/dropping-magnet-string",url:"coco-nutty/dropping-magnet-string.png",anchor:[.5,0],pool:5},{id:"coco-nutty/falling-leaf-0",url:"coco-nutty/falling-leaf-0.png",anchor:[.5,.5],pool:10},{id:"coco-nutty/falling-leaf-1",url:"coco-nutty/falling-leaf-1.png",anchor:[.5,.5],pool:10},{id:"coco-nutty/falling-leaf-2",url:"coco-nutty/falling-leaf-2.png",anchor:[.5,.5],pool:10}],"mayan-madness-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"mayan-madness-controls-tutorial",url:"mayan-madness/mayan-help-controls.png",x:0,y:20,anchor:[.5,.5],platformspecific:"desktop"},{id:"mayan0madness-mobile-tutorial",url:"mayan-madness/mayan-help-mobile-controls.png",x:0,y:20,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"mayan-madness-how-to-play",url:"mayan-madness/mayan-help-how-to-play.png",x:0,y:35,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"mayan-madness-power-up",url:"mayan-madness/mayan-help-power-up.png",x:20,y:30,anchor:[.5,.5],platformspecific:"desktop"},{id:"mayan-madness-mobile-power-up",url:"mayan-madness/mayan-help-power-up-mobile.png",x:20,y:30,anchor:[.5,.5],platformspecific:"mobile"}]}],"mayan-madness-assets":[{id:"mayan-madness/main-container",children:[]},{id:"mayan-madness/bg-strip",url:"mayan-madness/bg-strip.png",retina:!1},{id:"timer-font",dir:"timer-font",fontname:"ocr",fontdata:"timer-text.xml",type:"bitmaptext"},{id:"mayan-madness/timer-holder",children:[{id:"mayan-madness/timer-bg",url:"mayan-madness/timer-bg.png",anchor:[.5,.05]},{id:"mayan-madness/timer-inner",children:[{id:"mayan-madness/timer-icon",url:"mayan-madness/timer-icon.png",anchor:[.5,.05]}]}]},{url:"mayan-madness/finger-point.png",anchor:[.5,.5]},{id:"mayan-madness/triangle-puzzle-container",x:-105,y:-110,children:[]},{id:"mayan-madness/square-puzzle-container",x:-125,y:-140,children:[]},{id:"mayan-madness/hexagon-puzzle-container",x:-67,y:-140,children:[]},{id:"mayan-madness/triangle-piece",url:"mayan-madness/triangle-piece.png",pool:12,anchor:[.5,.5]},{id:"mayan-madness/triangle-piece-holder",pool:6,children:[]},{id:"mayan-madness/square-piece",url:"mayan-madness/square-piece.png",pool:9,anchor:[.5,.5]},{id:"mayan-madness/square-piece-holder",pool:9,children:[]},{id:"mayan-madness/hexagon-piece",url:"mayan-madness/hexagon-piece.png",pool:7,anchor:[.5,.5]},{id:"mayan-madness/hexagon-piece-holder",pool:7,children:[]},{id:"mayan-madness/puzzle-pad-container",children:[{id:"mayan-madness/blackout",url:"mayan-madness/black.png",retina:!1},{id:"mayan-madness/puzzle-pad-holder",x:512,y:370,children:[{id:"mayan-madness/interface-bg",url:"mayan-madness/interface-bg.png",anchor:[.5,.5]},{id:"mayan-madness/puzzle-outline-triangle",url:"mayan-madness/puzzle-outline-triangle.png",y:-20,anchor:[.5,.5]},{id:"mayan-madness/puzzle-outline-square",url:"mayan-madness/puzzle-outline-square.png",x:1,y:-14,anchor:[.5,.5]},{id:"mayan-madness/puzzle-outline-hexagon",url:"mayan-madness/puzzle-outline-hexagon.png",x:3,y:-18,anchor:[.5,.5]}]},{id:"mayan-madness/hint-holder",x:950,y:370,children:[{url:"mayan-madness/hint-bg.png",anchor:[.5,.5]},{id:"mayan-madness/hint-glyph-holder",children:[]}]}]},{id:"mayan-madness/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"mayan-madness/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"mayan-madness/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"mayan-madness/score-holder",y:5,children:[{url:"mayan-madness/score-bg.png"}]},{id:"mayan-madness/lift-container",x:230,y:0,children:[{id:"mayan-madness/lift-inner-container",x:0,y:-130,children:[{id:"mayan-madness/lift-rope-1",url:"mayan-madness/lift-rope-1.png",x:268,y:69.5,anchor:[.5,.5]},{id:"mayan-madness/lift-rope-2",url:"mayan-madness/lift-rope-2.png",x:294,y:69.5,anchor:[.5,.5]},{id:"mayan-madness/lift-back-holder",x:0,y:0,children:[{id:"mayan-madness/lift-back-bars",x:0,y:0,children:[{url:"mayan-madness/lift-bar-back-bottom.png",x:282,y:522.5,anchor:[.5,.5]},{url:"mayan-madness/lift-bar-back-top.png",x:282,y:483.5,anchor:[.5,.5]}]},{id:"mayan-madness/lift-back-beams",x:0,y:0,children:[{url:"mayan-madness/lift-back-beam-left.png",x:103,y:441,anchor:[.5,.5]},{url:"mayan-madness/lift-back-beam-right.png",x:455.5,y:441,anchor:[.5,.5]}]}]},{url:"mayan-madness/lift-floor.png",x:281.5,y:575,anchor:[.5,0]},{url:"mayan-madness/lift-back-rope-right.png",x:279,y:178,anchor:[0,0]},{url:"mayan-madness/lift-back-rope-left.png",x:281,y:178,anchor:[1,0]},{id:"mayan-madness/lift-front-holder",x:0,y:0,children:[{id:"mayan-madness/henry-spine",type:"spine",dir:"mayan-madness/henry",url:"skeleton.png",skeleton:"skeleton.json",atlas:"skeleton.txt"},{id:"mayan-madness/lift-front-bars",x:0,y:0,children:[{url:"mayan-madness/lift-bar-front-bottom.png",x:281.5,y:601,anchor:[.5,.5]},{url:"mayan-madness/lift-bar-front-top.png",x:281.5,y:561,anchor:[.5,.5]}]},{id:"mayan-madness/lift-front-beams",x:0,y:0,children:[{url:"mayan-madness/lift-front-beam-left.png",x:48,y:473.5,anchor:[.5,.5]},{url:"mayan-madness/lift-front-beam-right.png",x:512,y:473.5,anchor:[.5,.5]}]}]},{url:"mayan-madness/lift-front-rope-left.png",x:281,y:152,anchor:[1,0]},{url:"mayan-madness/lift-front-rope-right.png",x:278,y:152,anchor:[0,0]},{url:"mayan-madness/lift-pulley.png",x:281,y:152.5,anchor:[.5,.5]}]}]},{id:"mayan-madness/lift-track-object",url:"mayan-madness/screen.png",x:512,anchor:[.5,.5]},{id:"mayan-madness/layers-holder",children:[{id:"mayan-madness/bg",children:[{id:"mayan-madness/bg-stone-texture-holder-1",children:[{id:"mayan-madness/bg-stone-texture",url:"mayan-madness/bg-stone-texture.png",x:0,y:0,retina:!1},{id:"mayan-madness/bg-stone-texture",url:"mayan-madness/bg-stone-texture.png",x:512,y:0,retina:!1},{id:"mayan-madness/bg-stone-texture",url:"mayan-madness/bg-stone-texture.png",x:0,y:313,retina:!1},{id:"mayan-madness/bg-stone-texture",url:"mayan-madness/bg-stone-texture.png",x:512,y:313,retina:!1}]},{id:"mayan-madness/bg-stone-texture-holder-2",children:[{id:"mayan-madness/bg-stone-texture",url:"mayan-madness/bg-stone-texture.png",x:0,y:0,retina:!1},{id:"mayan-madness/bg-stone-texture",url:"mayan-madness/bg-stone-texture.png",x:512,y:0,retina:!1},{id:"mayan-madness/bg-stone-texture",url:"mayan-madness/bg-stone-texture.png",x:0,y:313,retina:!1},{id:"mayan-madness/bg-stone-texture",url:"mayan-madness/bg-stone-texture.png",x:512,y:313,retina:!1}]},{id:"mayan-madness/bg-stone-texture-holder-3",children:[{id:"mayan-madness/bg-stone-texture",url:"mayan-madness/bg-stone-texture.png",x:0,y:0,retina:!1},{id:"mayan-madness/bg-stone-texture",url:"mayan-madness/bg-stone-texture.png",x:512,y:0,retina:!1},{id:"mayan-madness/bg-stone-texture",url:"mayan-madness/bg-stone-texture.png",x:0,y:313,retina:!1},{id:"mayan-madness/bg-stone-texture",url:"mayan-madness/bg-stone-texture.png",x:512,y:313,retina:!1}]}]},{id:"mayan-madness/cliff-far-layer-left",x:160,children:[{url:"mayan-madness/level-1/cliff-far-back-left-4.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-left-5.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-left-6.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-left-1.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-left-2.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-left-3.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-left-4.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-left-5.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-left-6.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-left-1.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-left-2.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-left-3.png",anchor:[.5,0]}]},{id:"mayan-madness/cliff-far-layer-right",x:870,children:[{url:"mayan-madness/level-1/cliff-far-back-right-1.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-right-2.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-right-3.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-right-4.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-right-5.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-right-6.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-right-1.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-right-2.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-right-3.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-right-4.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-right-5.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-far-back-right-6.png",anchor:[.5,0]}]},{id:"mayan-madness/cliff-layer-left",x:100,children:[{url:"mayan-madness/level-1/cliff-back-left-4.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-left-5.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-left-6.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-left-1.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-left-2.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-left-3.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-left-4.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-left-5.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-left-6.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-left-1.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-left-2.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-left-3.png",anchor:[.5,0]}]},{id:"mayan-madness/cliff-layer-right",x:930,children:[{url:"mayan-madness/level-1/cliff-back-right-1.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-right-2.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-right-3.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-right-4.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-right-5.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-right-6.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-right-1.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-right-2.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-right-3.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-right-4.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-right-5.png",anchor:[.5,0]},{url:"mayan-madness/level-1/cliff-back-right-6.png",anchor:[.5,0]}]}]},{id:"mayan-madness/tv-container-1",x:512,y:-430,children:[{id:"mayan-madness/screen-gear-left",url:"mayan-madness/screen-gear-left.png",x:-150,y:5,anchor:[.5,.5]},{id:"mayan-madness/screen-gear-right",url:"mayan-madness/screen-gear-right.png",x:150,y:5,anchor:[.5,.5]},{url:"mayan-madness/screen.png",anchor:[.5,0]},{url:"mayan-madness/screen-static-1.png",anchor:[.5,0]},{url:"mayan-madness/screen-static-2.png",anchor:[.5,0]},{url:"mayan-madness/screen-black.png",anchor:[.5,0]},{url:"mayan-madness/screen-center.png",x:0,y:90,anchor:[.5,.5]},{url:"mayan-madness/screen-bar.png",x:0,y:90,anchor:[.5,.5]},{id:"mayan-madness/screen-door-left",url:"mayan-madness/screen-door-left.png",x:-92,anchor:[.5,0]},{id:"mayan-madness/screen-door-right",url:"mayan-madness/screen-door-right.png",x:92,anchor:[.5,0]}]},{id:"mayan-madness/tv-container-2",x:512,y:-430,children:[{id:"mayan-madness/screen-gear-left",url:"mayan-madness/screen-gear-left.png",x:-150,y:5,anchor:[.5,.5]},{id:"mayan-madness/screen-gear-right",url:"mayan-madness/screen-gear-right.png",x:150,y:5,anchor:[.5,.5]},{url:"mayan-madness/screen.png",anchor:[.5,0]},{url:"mayan-madness/screen-static-1.png",anchor:[.5,0]},{url:"mayan-madness/screen-static-2.png",anchor:[.5,0]},{url:"mayan-madness/screen-black.png",anchor:[.5,0]},{url:"mayan-madness/screen-center.png",x:0,y:90,anchor:[.5,.5]},{url:"mayan-madness/screen-bar.png",x:0,y:90,anchor:[.5,.5]},{id:"mayan-madness/screen-door-left",url:"mayan-madness/screen-door-left.png",x:-92,anchor:[.5,0]},{id:"mayan-madness/screen-door-right",url:"mayan-madness/screen-door-right.png",x:92,anchor:[.5,0]}]},{id:"mayan-madness/door-1-holder",y:-500,children:[{id:"mayan-madness/door-1-left",url:"mayan-madness/door-1-left.png",x:60,anchor:[0,.5]},{id:"mayan-madness/door-1-right",url:"mayan-madness/door-1-right.png",x:964,anchor:[1,.5]},{id:"mayan-madness/cliff-front-left",url:"mayan-madness/cliff-front-left.png",x:100,y:10,anchor:[1,.5]},{id:"mayan-madness/cliff-front-right",url:"mayan-madness/cliff-front-right.png",x:924,y:10,anchor:[0,.5]},{id:"mayan-madness/shadow-holder",x:512,y:-10,children:[{id:"mayan-madness/shadow-left",url:"mayan-madness/shadow-left.png",x:-271,y:0,retina:!1,anchor:[0,.5]},{id:"mayan-madness/shadow-right",url:"mayan-madness/shadow-right.png",x:271,y:0,retina:!1,anchor:[1,.5]}]},{id:"mayan-madness/gear-wood-back-left",url:"mayan-madness/gear-wood-back.png",x:100,y:40,anchor:[.5,.5]},{id:"mayan-madness/gear-wood-back-right",url:"mayan-madness/gear-wood-back.png",x:930,y:40,anchor:[.5,.5]},{id:"mayan-madness/gear-wood-front-left",url:"mayan-madness/gear-wood-front.png",x:0,y:40,anchor:[.5,.5]},{id:"mayan-madness/gear-wood-front-right",url:"mayan-madness/gear-wood-front.png",x:1030,y:40,anchor:[.5,.5]}]},{id:"mayan-madness/door-2-holder",y:-500,children:[{id:"mayan-madness/door-1-left",url:"mayan-madness/door-1-left.png",x:60,anchor:[0,.5]},{id:"mayan-madness/door-1-right",url:"mayan-madness/door-1-right.png",x:964,anchor:[1,.5]},{id:"mayan-madness/cliff-front-left",url:"mayan-madness/cliff-front-left.png",x:100,y:10,anchor:[1,.5]},{id:"mayan-madness/cliff-front-right",url:"mayan-madness/cliff-front-right.png",x:924,y:10,anchor:[0,.5]},{id:"mayan-madness/shadow-holder",x:512,y:-10,children:[{id:"mayan-madness/shadow-left",url:"mayan-madness/shadow-left.png",x:-271,y:0,retina:!1,anchor:[0,.5]},{id:"mayan-madness/shadow-right",url:"mayan-madness/shadow-right.png",x:271,y:0,retina:!1,anchor:[1,.5]}]},{id:"mayan-madness/gear-wood-back-left",url:"mayan-madness/gear-wood-back.png",x:100,y:40,anchor:[.5,.5]},{id:"mayan-madness/gear-wood-back-right",url:"mayan-madness/gear-wood-back.png",x:930,y:40,anchor:[.5,.5]},{id:"mayan-madness/gear-wood-front-left",url:"mayan-madness/gear-wood-front.png",x:0,y:40,anchor:[.5,.5]},{id:"mayan-madness/gear-wood-front-right",url:"mayan-madness/gear-wood-front.png",x:1030,y:40,anchor:[.5,.5]}]},{id:"mayan-madness/glyph-easy-1",url:"mayan-madness/glyph-easy-1.png",pool:10,anchor:[.5,.5]},{id:"mayan-madness/glyph-easy-2",url:"mayan-madness/glyph-easy-2.png",pool:10,anchor:[.5,.5]},{id:"mayan-madness/glyph-easy-3",url:"mayan-madness/glyph-easy-3.png",pool:10,anchor:[.5,.5]},{id:"mayan-madness/glyph-easy-4",url:"mayan-madness/glyph-easy-4.png",pool:10,anchor:[.5,.5]},{id:"mayan-madness/glyph-easy-5",url:"mayan-madness/glyph-easy-5.png",pool:10,anchor:[.5,.5]},{id:"mayan-madness/glyph-medium-1",url:"mayan-madness/glyph-medium-1.png",pool:10,anchor:[.5,.5]},{id:"mayan-madness/glyph-medium-2",url:"mayan-madness/glyph-medium-2.png",pool:10,anchor:[.5,.5]},{id:"mayan-madness/glyph-medium-3",url:"mayan-madness/glyph-medium-3.png",pool:10,anchor:[.5,.5]},{id:"mayan-madness/glyph-medium-4",url:"mayan-madness/glyph-medium-4.png",pool:10,anchor:[.5,.5]},{id:"mayan-madness/glyph-medium-5",url:"mayan-madness/glyph-medium-5.png",pool:10,anchor:[.5,.5]},{id:"mayan-madness/glyph-hard-1",url:"mayan-madness/glyph-hard-1.png",pool:10,anchor:[.5,.5]},{id:"mayan-madness/glyph-hard-2",url:"mayan-madness/glyph-hard-2.png",pool:10,anchor:[.5,.5]},{id:"mayan-madness/glyph-hard-3",url:"mayan-madness/glyph-hard-3.png",pool:10,anchor:[.5,.5]},{id:"mayan-madness/glyph-hard-4",url:"mayan-madness/glyph-hard-4.png",pool:10,anchor:[.5,.5]},{id:"mayan-madness/glyph-hard-5",url:"mayan-madness/glyph-hard-5.png",pool:10,anchor:[.5,.5]},{id:"mayan-madness/puzzle-panel-holder",x:0,y:0,children:[{id:"mayan-madness/hand-support",url:"mayan-madness/hand-support.png",x:378,y:134,anchor:[1,.5]},{id:"mayan-madness/puzzle-panel-hand-holder",x:0,y:0,children:[{id:"mayan-madness/hand",url:"mayan-madness/hand.png",x:140.5,y:89.5,anchor:[.5,.5]},{id:"mayan-madness/puzzle-panel-tablet-holder",x:0,y:0,children:[{id:"mayan-madness/hand-tablet",url:"mayan-madness/hand-tablet.png",x:0,y:0,anchor:[0,0]},{id:"mayan-madness/puzzle-panel-glyph-holder",children:[{id:"mayan-madness/hand-triangle",url:"mayan-madness/hand-triangle.png",x:67,y:71,anchor:[.5,.5]},{id:"mayan-madness/hand-square",url:"mayan-madness/hand-square.png",x:67.5,y:71,anchor:[.5,.5]},{id:"mayan-madness/hand-hexagon",url:"mayan-madness/hand-hexagon.png",x:68,y:70,anchor:[.5,.5]}]}]},{id:"mayan-madness/hand-thumb",url:"mayan-madness/hand-thumb.png",x:162,y:40.5,anchor:[.5,.5]}]}]},{id:"mayan-madness/blank-input",url:"mayan-madness/blank-input.png"},{id:"mayan-madness/puzzle-triangle-completed",url:"mayan-madness/puzzle-triangle-completed.png",x:0,y:0,anchor:[.5,.5]},{id:"mayan-madness/puzzle-square-completed",url:"mayan-madness/puzzle-square-completed.png",x:0,y:0,anchor:[.5,.5]},{id:"mayan-madness/puzzle-hexagon-completed",url:"mayan-madness/puzzle-hexagon-completed.png",x:0,y:0,anchor:[.5,.5]},{id:"tile-frames",anchor:[.5,.5],type:"spritesheet",dir:"mayan-madness/tile-frames",atlas:"tile-frames.json",frames:["blank-tile-mayan.png","1-tile-mayan.png","2-tile-mayan.png","3-tile-mayan.png","4-tile-mayan.png","5-tile-mayan.png","6-tile-mayan.png","7-tile-mayan.png","8-tile-mayan.png","9-tile-mayan.png","blank-tile-mayan.png"]},{id:"mayan-madness/slam-particle-container",children:[],pool:4,anchor:[.5,.5]},{id:"mayan-madness/slam-particles/particle-wood-1",url:"mayan-madness/slam-particles/particle-wood-1.png",anchor:[.5,.5],pool:40},{id:"mayan-madness/slam-particles/particle-wood-2",url:"mayan-madness/slam-particles/particle-wood-2.png",anchor:[.5,.5],pool:40},{id:"mayan-madness/slam-particles/particle-wood-3",url:"mayan-madness/slam-particles/particle-wood-3.png",anchor:[.5,.5],pool:40},{id:"mayan-madness/slam-particles/particle-wood-4",url:"mayan-madness/slam-particles/particle-wood-4.png",anchor:[.5,.5],pool:40},{id:"mayan-madness/slam-particles/particle-wood-5",url:"mayan-madness/slam-particles/particle-wood-5.png",anchor:[.5,.5],pool:40},{id:"mayan-madness/slam-particles/particle-wood-6",url:"mayan-madness/slam-particles/particle-wood-6.png",anchor:[.5,.5],pool:40},{id:"mayan-madness/puzzle-particle-holder",children:[],anchor:[.5,.5]},{id:"mayan-madness/puzzle-particle",url:"mayan-madness/puzzle-particle.png",anchor:[.5,.5],pool:50}],"roller-coaster-doom-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"tutorial/roller-coaster-doom/help-doom-desktop-keys-1",url:"roller-coaster-doom/help-doom-desktop-keys-1.png",x:0,y:120,anchor:[.5,.5],platformspecific:"desktop",loc:!0},{id:"tutorial/roller-coaster-doom/help-control-cart",url:"roller-coaster-doom/help-control-cart.png",x:0,y:-40,anchor:[.5,.5]},{id:"tutorial/roller-coaster-doom/help-doom-mobile-keys-1",url:"roller-coaster-doom/help-doom-mobile-keys-1.png",x:0,y:125,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"tutorial/roller-coaster-doom/help-air",url:"roller-coaster-doom/help-air.png",x:-160,y:-20,anchor:[.5,.5]},{id:"tutorial/roller-coaster-doom/help-track",url:"roller-coaster-doom/help-track.png",x:160,y:-20,anchor:[.5,.5]},{id:"tutorial/roller-coaster-doom/help-split-vertical-long",url:"roller-coaster-doom/help-split-vertical-long.png",x:0,y:10,anchor:[.5,.5]},{id:"tutorial/roller-coaster-doom/help-thumbs-up",url:"roller-coaster-doom/help-thumbs-up.png",x:-160,y:170,anchor:[.5,.5]},{id:"tutorial/roller-coaster-doom/help-thumbs-up",url:"roller-coaster-doom/help-thumbs-up.png",x:160,y:170,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"tutorial/roller-coaster-doom/powerup-help",url:"roller-coaster-doom/powerup-help.png",x:40,y:0,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/roller-coaster-doom/powerup-help-2",url:"roller-coaster-doom/powerup-help-2.png",x:0,y:0,anchor:[.5,.5],platformspecific:"mobile"}]}],"roller-coaster-doom-assets":[{id:"roller-coaster-doom/sky-bg",url:"roller-coaster-doom/sky-background.png",retina:!1},{id:"roller-coaster-doom/sun",url:"roller-coaster-doom/sun.png",retina:!1},{id:"roller-coaster-doom/outer-holder",children:[]},{id:"roller-coaster-doom/main-holder",children:[]},{id:"roller-coaster-doom/bg-holder",children:[]},{id:"roller-coaster-doom/max-heads",children:[{id:"max-neutral",url:"roller-coaster-doom/max-neutral.png",anchor:[.5,1]}]},{id:"roller-coaster-doom/pheobe-heads",children:[{id:"phoebe-neutral",url:"roller-coaster-doom/phoebe-neutral.png",x:-13,anchor:[.5,1]}]},{id:"roller-coaster-doom/boost-particle",url:"roller-coaster-doom/boost-particle.png",anchor:[.5,.5],pool:30,retina:!1},{id:"roller-coaster-doom/boost-particle-holder",children:[]},{id:"roller-coaster-doom/cart-sprite",url:"roller-coaster-doom/cart-sprite.png",anchor:[.5,1]},{id:"roller-coaster-doom/cart-sprite-powered-up",url:"roller-coaster-doom/cart-sprite-powered-up.png",anchor:[.5,1]},{id:"roller-coaster-doom/shield",url:"roller-coaster-doom/shield.png",anchor:[.5,.5]},{id:"roller-coaster-doom/confetti-particle-holder",children:[]},{id:"roller-coaster-doom/confetti-1",url:"roller-coaster-doom/confetti-1.png",anchor:[.5,.5],pool:10},{id:"roller-coaster-doom/confetti-2",url:"roller-coaster-doom/confetti-2.png",anchor:[.5,.5],pool:10},{id:"roller-coaster-doom/confetti-3",url:"roller-coaster-doom/confetti-3.png",anchor:[.5,.5],pool:10},{id:"roller-coaster-doom/confetti-4",url:"roller-coaster-doom/confetti-4.png",anchor:[.5,.5],pool:10},{id:"roller-coaster-doom/cart-goo-1",url:"roller-coaster-doom/cart-goo-1.png",anchor:[.5,1]},{id:"roller-coaster-doom/cart-goo-2",url:"roller-coaster-doom/cart-goo-2.png",anchor:[.5,1]},{id:"roller-coaster-doom/cart-goo-3",url:"roller-coaster-doom/cart-goo-3.png",anchor:[.5,1]},{id:"roller-coaster-doom/screen-cover",url:"roller-coaster-doom/screen-cover.png",anchor:[.5,.5],retina:!1},{id:"roller-coaster-doom/cart-wheels",url:"roller-coaster-doom/cart-wheels.png",anchor:[.5,.5]},{id:"roller-coaster-doom/cart-springs",url:"roller-coaster-doom/cart-springs.png",anchor:[.5,1]},{id:"roller-coaster-doom/rock-base-1",url:"roller-coaster-doom/rock-base-1.png",anchor:[0,0]},{id:"roller-coaster-doom/background-fog",url:"roller-coaster-doom/background-fog.png",anchor:[.5,.5]},{id:"roller-coaster-doom/rock-base-2",url:"roller-coaster-doom/rock-base-2.png",anchor:[0,0]},{id:"roller-coaster-doom/foreground-hill-1",url:"roller-coaster-doom/foreground-hill-1.png",anchor:[0,1],pool:2},{id:"roller-coaster-doom/foreground-hill-0",url:"roller-coaster-doom/foreground-hill-0.png",anchor:[0,1],pool:2},{id:"roller-coaster-doom/foreground-hill-2",url:"roller-coaster-doom/foreground-hill-2.png",anchor:[0,1],pool:2},{id:"roller-coaster-doom/rock-0",url:"roller-coaster-doom/bg-rock-0.png",anchor:[.5,1],pool:2},{id:"roller-coaster-doom/rock-1",url:"roller-coaster-doom/bg-rock-1.png",anchor:[.5,1],pool:2},{id:"roller-coaster-doom/rock-2",url:"roller-coaster-doom/bg-rock-2.png",anchor:[.5,1],pool:2},{id:"roller-coaster-doom/rock-3",url:"roller-coaster-doom/bg-rock-3.png",anchor:[.5,1],pool:2},{id:"roller-coaster-doom/rock-4",url:"roller-coaster-doom/bg-rock-4.png",anchor:[.5,1],pool:2},{id:"roller-coaster-doom/rock-5",url:"roller-coaster-doom/bg-rock-5.png",anchor:[.5,1],pool:2},{id:"roller-coaster-doom/rock-6",url:"roller-coaster-doom/bg-rock-6.png",anchor:[.5,1],pool:2},{id:"roller-coaster-doom/rock-7",url:"roller-coaster-doom/bg-rock-7.png",anchor:[.5,1],pool:2},{id:"roller-coaster-doom/cloud-0",url:"roller-coaster-doom/bg-cloud-0.png",anchor:[.5,.5]},{id:"roller-coaster-doom/cloud-1",url:"roller-coaster-doom/bg-cloud-1.png",anchor:[.5,.5]},{id:"roller-coaster-doom/cloud-2",url:"roller-coaster-doom/bg-cloud-2.png",anchor:[.5,.5]},{id:"roller-coaster-doom/cloud-3",url:"roller-coaster-doom/bg-cloud-3.png",anchor:[.5,.5]},{id:"roller-coaster-doom/cloud-4",url:"roller-coaster-doom/bg-cloud-4.png",anchor:[.5,.5]},{id:"roller-coaster-doom/lava-particle-holder",children:[]},{id:"roller-coaster-doom/lava-1",url:"roller-coaster-doom/lava-1.png",anchor:[.5,.5],pool:15},{id:"roller-coaster-doom/lava-2",url:"roller-coaster-doom/lava-2.png",anchor:[.5,.5],pool:15},{id:"roller-coaster-doom/lava-3",url:"roller-coaster-doom/lava-3.png",anchor:[.5,.5],pool:15},{id:"roller-coaster-doom/lava-4",url:"roller-coaster-doom/lava-4.png",anchor:[.5,.5],pool:15},{id:"roller-coaster-doom/lava-5",url:"roller-coaster-doom/lava-5.png",anchor:[.5,.5],pool:15},{id:"roller-coaster-doom/cart-holder",children:[]},{id:"roller-coaster-doom/cart-inner-holder",children:[]},{id:"roller-coaster-doom/slice-holder",children:[],pool:110},{id:"roller-coaster-doom/heart-bg",url:"roller-coaster-doom/heart-bg.png",anchor:[.5,.5]},{id:"roller-coaster-doom/heart-icon",url:"roller-coaster-doom/heart-icon.png",anchor:[.5,.5],pool:3},{id:"roller-coaster-doom/track-mine",url:"roller-coaster-doom/track-mine.png",anchor:[.5,1],pool:6},{id:"roller-coaster-doom/air-mine",url:"roller-coaster-doom/air-mine.png",anchor:[.5,.5],pool:6},{id:"roller-coaster-doom/air-mine-balloon",url:"roller-coaster-doom/air-mine-balloon.png",anchor:[.5,1],pool:6},{id:"roller-coaster-doom/track-mine-holder",children:[],pool:6},{id:"roller-coaster-doom/air-mine-holder",children:[],pool:6},{id:"roller-coaster-doom/blank-input",url:"roller-coaster-doom/blank-input.png"},{id:"roller-coaster-doom/combo-slice-type-0",url:"roller-coaster-doom/combo-slice-type-0.png",pool:10},{id:"roller-coaster-doom/combo-slice-type-1",url:"roller-coaster-doom/combo-slice-type-1.png",pool:10},{id:"roller-coaster-doom/combo-slice-type-2",url:"roller-coaster-doom/combo-slice-type-2.png",pool:10},{id:"roller-coaster-doom/combo-slice-type-3",url:"roller-coaster-doom/combo-slice-type-3.png",pool:10},{id:"roller-coaster-doom/combo-slice-type-4",url:"roller-coaster-doom/combo-slice-type-4.png",pool:10},{id:"roller-coaster-doom/combo-slice-type-5",url:"roller-coaster-doom/combo-slice-type-5.png",pool:10},{id:"roller-coaster-doom/combo-slice-type-6",url:"roller-coaster-doom/combo-slice-type-6.png",pool:10},{id:"roller-coaster-doom/combo-slice-type-7",url:"roller-coaster-doom/combo-slice-type-7.png",pool:10},{id:"roller-coaster-doom/combo-slice-type-8",url:"roller-coaster-doom/combo-slice-type-8.png",pool:10},{id:"roller-coaster-doom/combo-slice-type-9",url:"roller-coaster-doom/combo-slice-type-9.png",pool:20},{id:"roller-coaster-doom/mine-frames",anchor:[.5,.5],type:"spritesheet",dir:"roller-coaster-doom/mine-frames",atlas:"mine-frames.json",frames:["blank.png","1.png","2.png","3.png","5.png","6.png","7.png","8.png","9.png","blank.png"]},{id:"roller-coaster-doom/slime-particle-1",url:"roller-coaster-doom/slime-particle.png",anchor:[.5,.5],pool:15},{id:"roller-coaster-doom/slime-particle-2",url:"roller-coaster-doom/slime-particle-2.png",anchor:[.5,.5],pool:15},{id:"roller-coaster-doom/slime-particle-3",url:"roller-coaster-doom/slime-particle-3.png",anchor:[.5,.5],pool:15},{id:"roller-coaster-doom/slime-particle-holder",children:[]},{id:"roller-coaster-doom/loop-small",url:"roller-coaster-doom/loop-small.png",anchor:[.5,1],pool:5},{id:"roller-coaster-doom/small-loop-mine",url:"roller-coaster-doom/small-loop-mine.png",anchor:[.5,.5],pool:5},{id:"roller-coaster-doom/large-loop-mine",url:"roller-coaster-doom/large-loop-mine.png",anchor:[.5,.5],pool:5},{id:"roller-coaster-doom/loop-large",url:"roller-coaster-doom/loop-large.png",anchor:[.5,1],pool:5},{id:"roller-coaster-doom/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"roller-coaster-doom/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"roller-coaster-doom/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"roller-coaster-doom/score-holder",children:[{id:"roller-coaster-score-holder",url:"roller-coaster-doom/score-bg.png",anchor:[.5,.5]}]},{id:"roller-coaster-doom/shield-indicator-slot-light-on",url:"roller-coaster-doom/shield-indicator-slot-light-on.png",anchor:[.5,.5],pool:3},{id:"roller-coaster-doom/shield-indicator-slot-light",url:"roller-coaster-doom/shield-indicator-slot-light.png",anchor:[.5,.5],pool:3},{id:"roller-coaster-doom/shield-indicator-slot",url:"roller-coaster-doom/shield-indicator-slot.png",anchor:[.5,.5],pool:3}],"roller-coaster-ice-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"tutorial/roller-coaster-ice/help-up-control-demo",url:"roller-coaster-ice/help-up-demo.png",x:-160,y:-40,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/roller-coaster-ice/help-up-control",url:"roller-coaster-ice/help-up-control.png",x:-150,y:130,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/roller-coaster-ice/help-down-control-demo",url:"roller-coaster-ice/help-down-demo.png",x:160,y:-55,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/roller-coaster-ice/help-down-control",url:"roller-coaster-ice/help-down-control.png",x:100,y:80,anhcor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/roller-coaster-ice/help-vertical-split",url:"roller-coaster-ice/help-split-vertical.png",x:0,y:-150,anhcor:[.5,.5]},{id:"tutorial/roller-coaster-ice/help-up-control-demo-mobile",url:"roller-coaster-ice/help-up-demo.png",x:-160,y:-40,anchor:[.5,.5],platformspecific:"mobile"},{id:"tutorial/roller-coaster-ice/help-up-control-mobile",url:"roller-coaster-ice/help-up-mobile.png",x:-150,y:140,anchor:[.5,.5],platformspecific:"mobile"},{id:"tutorial/roller-coaster-ice.help-down-control-demo-mobile",url:"roller-coaster-ice/help-down-demo.png",x:160,y:-55,anchor:[.5,.5],platformspecific:"mobile"},{id:"tutorial/roller-coaster-ice/help-down-control-mobile",url:"roller-coaster-ice/help-down-mobile.png",x:150,y:140,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"tutorial/roller-coaster-ice/help-how-to-play-good",url:"roller-coaster-ice/help-good-demo.png",x:-10,y:-35,anchor:[.5,.5]},{id:"tutorial/roller-coaster-ice/help-thumbs-up",url:"roller-coaster-ice/help-thumbs-up.png",x:160,y:170,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"tutorial/roller-coaster-ice//powerup-help",url:"roller-coaster-ice/powerup-help.png",x:40,y:0,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/roller-coaster-ice//powerup-help-2",url:"roller-coaster-ice/powerup-help-2.png",x:0,y:0,anchor:[.5,.5],platformspecific:"mobile"}]}],"roller-coaster-ice-assets":[{id:"roller-coaster-ice/outer-holder",children:[]},{id:"roller-coaster-ice/main-holder",children:[]},{id:"roller-coaster-ice/cloud-layer",children:[]},{id:"roller-coaster-ice/cart-seat-holder",children:[]},{id:"roller-coaster-ice/cave-holder",children:[]},{id:"roller-coaster-ice/inner-main-holder",children:[]},{id:"roller-coaster-ice/inner-main-holder",children:[]},{id:"roller-coaster-ice/boost-particle",url:"roller-coaster-ice/boost-particle.png",anchor:[.5,.5],pool:30,retina:!1},{id:"roller-coaster-ice/boost-particle-holder",children:[]},{id:"roller-coaster-ice/pu-glow",url:"roller-coaster-ice/glow.png",y:0,anchor:[.5,.5],retina:!1},{id:"roller-coaster-ice/powerup-effect",children:[{id:"roller-coaster-ice/pu-sparkle-1",url:"roller-coaster-ice/sparkle-1.png",y:0,anchor:[.5,.5],retina:!1},{id:"roller-coaster-ice/pu-sparkle-2",url:"roller-coaster-ice/sparkle-2.png",y:0,anchor:[.5,.5],retina:!1}]},{id:"roller-coaster-ice/red-line",url:"roller-coaster-ice/red-line.png",retina:!1,anchor:[.5,.5],pool:2},{id:"roller-coaster-ice/cart-shadow",url:"roller-coaster-ice/cart-shadow.png",retina:!1,anchor:[.5,.5]},{id:"roller-coaster-ice/shield",url:"roller-coaster-ice/shield.png",anchor:[.5,.5]},{id:"roller-coaster-ice/cave-bottom-container-1",children:[{id:"roller-coaster-ice/cave-bottom-1",url:"roller-coaster-ice/cave-bottom-1.png",x:0,anchor:[0,0]},{id:"roller-coaster-ice/cave-bottom-2",url:"roller-coaster-ice/cave-bottom-2.png",x:530,anchor:[0,0]},{id:"roller-coaster-ice/cave-bottom-3",url:"roller-coaster-ice/cave-bottom-3.png",x:1060,anchor:[0,0]},{id:"roller-coaster-ice/cave-bottom-4",url:"roller-coaster-ice/cave-bottom-4.png",x:1590,anchor:[0,0]}]},{id:"roller-coaster-ice/cave-bottom-container-2",children:[{id:"roller-coaster-ice/cave-bottom-1",url:"roller-coaster-ice/cave-bottom-1.png",x:0,anchor:[0,0]},{id:"roller-coaster-ice/cave-bottom-2",url:"roller-coaster-ice/cave-bottom-2.png",x:530,anchor:[0,0]},{id:"roller-coaster-ice/cave-bottom-3",url:"roller-coaster-ice/cave-bottom-3.png",x:1060,anchor:[0,0]},{id:"roller-coaster-ice/cave-bottom-4",url:"roller-coaster-ice/cave-bottom-4.png",x:1590,anchor:[0,0]}]},{id:"roller-coaster-ice/cave-top-container-1",children:[{id:"roller-coaster-ice/cave-top-1",url:"roller-coaster-ice/cave-top-1.png",x:0,anchor:[0,0]},{id:"roller-coaster-ice/cave-top-2",url:"roller-coaster-ice/cave-top-2.png",x:530,anchor:[0,0]},{id:"roller-coaster-ice/cave-top-3",url:"roller-coaster-ice/cave-top-3.png",x:1060,anchor:[0,0]},{id:"roller-coaster-ice/cave-top-4",url:"roller-coaster-ice/cave-top-4.png",x:1590,anchor:[0,0]}]},{id:"roller-coaster-ice/cave-top-container-2",children:[{id:"roller-coaster-ice/cave-top-1",url:"roller-coaster-ice/cave-top-1.png",x:0,anchor:[0,0]},{id:"roller-coaster-ice/cave-top-2",url:"roller-coaster-ice/cave-top-2.png",x:530,anchor:[0,0]},{id:"roller-coaster-ice/cave-top-3",url:"roller-coaster-ice/cave-top-3.png",x:1060,anchor:[0,0]},{id:"roller-coaster-ice/cave-top-4",url:"roller-coaster-ice/cave-top-4.png",x:1590,anchor:[0,0]}]},{id:"roller-coaster-ice/shield-cooldown-meter-holder",children:[{id:"roller-coaster-ice/shield-cooldown-meter-bar-outer",url:"roller-coaster-ice/shield-cooldown.png",x:23,y:-210},{id:"roller-coaster-ice/shield-cooldown-meter-fill",url:"roller-coaster-ice/shield-cooldown-fill.png",x:51.5,y:3.5,anchor:[.5,1]}]},{id:"roller-coaster-ice/kenzie-head",url:"roller-coaster-ice/kenzie-head.png",anchor:[.5,.5]},{id:"roller-coaster-ice/babe-head",url:"roller-coaster-ice/babe-head.png",anchor:[.5,.5]},{id:"roller-coaster-ice/hudson-head",url:"roller-coaster-ice/hudson-head.png",anchor:[.5,.5]},{id:"roller-coaster-ice/ggg-head",url:"roller-coaster-ice/triple-head.png",anchor:[.5,.5]},{id:"roller-coaster-ice/sun",url:"roller-coaster-ice/sun.png",retina:!1},{id:"roller-coaster-ice/bg-fade",url:"roller-coaster-ice/bg-fade.png",pool:2},{id:"roller-coaster-ice/ice-screen-cover",url:"roller-coaster-ice/ice-screen-half.png",pool:2},{id:"roller-coaster-ice/cart-seat",url:"roller-coaster-ice/cart-seat.png",anchor:[.5,0]},{id:"roller-coaster-ice/cart-seat-power-up",url:"roller-coaster-ice/cart-seat-power-up.png",anchor:[1,0]},{id:"roller-coaster-ice/cart-seat-ggg",url:"roller-coaster-ice/cart-seat-ggg.png",anchor:[.5,0]},{id:"roller-coaster-ice/cart-legs",url:"roller-coaster-ice/cart-legs.png",x:38,y:132,anchor:[.5,.1]},{id:"roller-coaster-ice/track-direction-arrow",url:"roller-coaster-ice/track-direction-arrow.png",anchor:[.5,.5]},{id:"roller-coaster-ice/cart-holder",children:[]},{id:"roller-coaster-ice/bg-holder",children:[]},{id:"roller-coaster-ice/bg-holder-far",children:[]},{id:"roller-coaster-ice/bg-holder-2",children:[]},{id:"roller-coaster-ice/cart-inner-holder",children:[]},{id:"roller-coaster-ice/slice-holder",children:[],pool:100},{id:"roller-coaster-ice/heart-bg",url:"roller-coaster-ice/heart-bg.png",anchor:[.5,.5]},{id:"roller-coaster-ice/heart-icon",url:"roller-coaster-ice/heart-icon.png",anchor:[.5,.5],pool:3},{id:"roller-coaster-ice/blank-input",url:"roller-coaster-ice/blank-input.png"},{id:"roller-coaster-ice/track-slice-type-0",url:"roller-coaster-ice/track-slice-type-0.png",anchor:[0,1],pool:10},{id:"roller-coaster-ice/track-slice-type-1",url:"roller-coaster-ice/track-slice-type-1.png",anchor:[0,1],pool:10},{id:"roller-coaster-ice/track-slice-type-2",url:"roller-coaster-ice/track-slice-type-2.png",anchor:[0,1],pool:10},{id:"roller-coaster-ice/track-slice-type-3",url:"roller-coaster-ice/track-slice-type-3.png",anchor:[0,1],pool:10},{id:"roller-coaster-ice/track-slice-type-4",url:"roller-coaster-ice/track-slice-type-4.png",anchor:[0,1],pool:10},{id:"roller-coaster-ice/track-slice-type-5",url:"roller-coaster-ice/track-slice-type-5.png",anchor:[0,1],pool:10},{id:"roller-coaster-ice/track-slice-type-6",url:"roller-coaster-ice/track-slice-type-6.png",anchor:[0,1],pool:10},{id:"roller-coaster-ice/track-slice-type-7",url:"roller-coaster-ice/track-slice-type-7.png",anchor:[0,1],pool:10},{id:"roller-coaster-ice/track-slice-type-8",url:"roller-coaster-ice/track-slice-type-8.png",anchor:[0,1],pool:10},{id:"roller-coaster-ice/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"roller-coaster-ice/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"roller-coaster-ice/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"roller-coaster-ice/score-holder",children:[{id:"roller-coaster-ice/score-holder",url:"roller-coaster-ice/score-bg.png",anchor:[.5,.5]}]},{id:"roller-coaster-ice/cloud-holder",children:[],pool:30},{id:"roller-coaster-ice/cloud-type-1",url:"roller-coaster-ice/cloud-type-1.png",anchor:[.5,.5],pool:10},{id:"roller-coaster-ice/cloud-type-1-glow",url:"roller-coaster-ice/cloud-type-1-glow.png",anchor:[.5,.5],pool:10},{id:"roller-coaster-ice/cloud-type-2",url:"roller-coaster-ice/cloud-type-2.png",anchor:[.5,.5],pool:10},{id:"roller-coaster-ice/cloud-type-2-glow",url:"roller-coaster-ice/cloud-type-2-glow.png",anchor:[.5,.5],pool:10},{id:"roller-coaster-ice/cloud-type-3",url:"roller-coaster-ice/cloud-type-3.png",anchor:[.5,.5],pool:10},{id:"roller-coaster-ice/cloud-type-3-glow",url:"roller-coaster-ice/cloud-type-3-glow.png",anchor:[.5,.5],pool:10},{id:"roller-coaster-ice/cloud-type-1-crystal-1",url:"roller-coaster-ice/cloud-type-1-crystal-1.png",x:-80,y:10,anchor:[.5,.5],pool:10},{id:"roller-coaster-ice/cloud-type-1-crystal-2",url:"roller-coaster-ice/cloud-type-1-crystal-2.png",x:-60,y:-15,anchor:[.5,.5],pool:10},{id:"roller-coaster-ice/cloud-type-1-crystal-3",url:"roller-coaster-ice/cloud-type-1-crystal-3.png",x:70,y:15,anchor:[0,1],pool:10},{id:"roller-coaster-ice/cloud-type-1-crystal-4",url:"roller-coaster-ice/cloud-type-1-crystal-4.png",x:0,y:-10,anchor:[.5,1],pool:10},{id:"roller-coaster-ice/cloud-type-1-crystal-5",url:"roller-coaster-ice/cloud-type-1-crystal-5.png",x:20,y:15,anchor:[.5,.5],pool:10},{id:"roller-coaster-ice/cloud-type-2-crystal-1",url:"roller-coaster-ice/cloud-type-2-crystal-1.png",x:-80,y:20,anchor:[.5,1],pool:10},{id:"roller-coaster-ice/cloud-type-2-crystal-2",url:"roller-coaster-ice/cloud-type-2-crystal-2.png",x:-30,y:0,anchor:[.5,.5],pool:10},{id:"roller-coaster-ice/cloud-type-2-crystal-3",url:"roller-coaster-ice/cloud-type-2-crystal-3.png",x:30,y:-15,anchor:[.5,.5],pool:10},{id:"roller-coaster-ice/cloud-type-2-crystal-4",url:"roller-coaster-ice/cloud-type-2-crystal-4.png",x:70,y:20,anchor:[.5,0],pool:10},{id:"roller-coaster-ice/cloud-type-3-crystal-1",url:"roller-coaster-ice/cloud-type-3-crystal-1.png",x:-90,y:-2,anchor:[.5,.5],pool:10},{id:"roller-coaster-ice/cloud-type-3-crystal-2",url:"roller-coaster-ice/cloud-type-3-crystal-2.png",x:20,y:0,anchor:[.5,.5],pool:10},{id:"roller-coaster-ice/cloud-type-3-crystal-3",url:"roller-coaster-ice/cloud-type-3-crystal-3.png",x:55,y:10,anchor:[.5,.5],pool:10},{id:"roller-coaster-ice/cloud-type-3-crystal-4",url:"roller-coaster-ice/cloud-type-3-crystal-4.png",x:-45,y:-12,anchor:[.5,1],pool:10},{id:"roller-coaster-ice/cloud-type-3-crystal-5",url:"roller-coaster-ice/cloud-type-3-crystal-5.png",x:-46,y:5,anchor:[.5,0],pool:10},{id:"roller-coaster-ice/cloud-type-3-crystal-6",url:"roller-coaster-ice/cloud-type-3-crystal-6.png",x:65,y:40,anchor:[0,1],pool:10},{id:"roller-coaster-ice/blast-bg-element",url:"roller-coaster-ice/blast-bg-element.png",anchor:[1,.5],pool:30},{id:"roller-coaster-ice/ice-blast-particle-1",url:"roller-coaster-ice/ice-blast-particle-1.png",anchor:[.5,.5],pool:60},{id:"roller-coaster-ice/ice-blast-particle-2",url:"roller-coaster-ice/ice-blast-particle-2.png",anchor:[.5,.5],pool:60},{id:"roller-coaster-ice/ice-blast-particle-3",url:"roller-coaster-ice/ice-blast-particle-3.png",anchor:[.5,.5],pool:60},{id:"roller-coaster-ice/ice-blast-particle-4",url:"roller-coaster-ice/ice-blast-particle-4.png",anchor:[.5,.5],pool:60},{id:"roller-coaster-ice/ice-blast-particle-5",url:"roller-coaster-ice/ice-blast-particle-5.png",anchor:[.5,.5],pool:60},{id:"roller-coaster-ice/ice-blast-line",url:"roller-coaster-ice/ice-blast-line.png",anchor:[.5,1],pool:300},{id:"roller-coaster-ice/rock-0",url:"roller-coaster-ice/bg-rock-0.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/rock-1",url:"roller-coaster-ice/bg-rock-1.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/rock-2",url:"roller-coaster-ice/bg-rock-2.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/rock-3",url:"roller-coaster-ice/bg-rock-3.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/rock-4",url:"roller-coaster-ice/bg-rock-4.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/rock-5",url:"roller-coaster-ice/bg-rock-5.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/rock-6",url:"roller-coaster-ice/bg-rock-6.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/rock-7",url:"roller-coaster-ice/bg-rock-7.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/cloud-0",url:"roller-coaster-ice/bg-cloud-0.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/cloud-1",url:"roller-coaster-ice/bg-cloud-1.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/cloud-2",url:"roller-coaster-ice/bg-cloud-2.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/cloud-3",url:"roller-coaster-ice/bg-cloud-3.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/cloud-4",url:"roller-coaster-ice/bg-cloud-1.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/cloud-5",url:"roller-coaster-ice/bg-cloud-1.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/mountain-0",url:"roller-coaster-ice/bg-mountain-0.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/mountain-1",url:"roller-coaster-ice/bg-mountain-1.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/mountain-2",url:"roller-coaster-ice/bg-mountain-2.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/mountain-3",url:"roller-coaster-ice/bg-mountain-3.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/mountain-4",url:"roller-coaster-ice/bg-mountain-4.png",anchor:[.5,1],pool:2},{id:"roller-coaster-ice/input-marker",url:"roller-coaster-ice/input-marker.png",anchor:[.5,.5]},{id:"roller-coaster-ice/cart-impact-particle",url:"roller-coaster-ice/cart-impact-particle.png",anchor:[.5,.5],pool:10},{id:"roller-coaster-ice/cart-impact-particle-2",url:"roller-coaster-ice/cart-impact-particle-2.png",anchor:[.5,.5],pool:10},{id:"roller-coaster-ice/balloon",url:"roller-coaster-ice/balloon.png",anchor:[.5,.5],pool:10},{id:"roller-coaster-ice/balloon-holder",children:[],pool:10},{id:"roller-coaster-ice/sky",url:"roller-coaster-ice/sky.png"}],"pin-ball-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"tutorial/pin-ball/controls-demo",url:"pin-ball/help-controls.png",x:-2,y:-40,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/pin-ball/mobile-controls-demo",url:"pin-ball/help-mobile-controls.png",x:-2,y:-40,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"tutorial/pin-ball/how-to-play",url:"pin-ball/help-how-to-play.png",x:-325,y:-205,anhcor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"tutorial/pin-ball/power-up",url:"pin-ball/help-power-up.png",x:0,y:0,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/pin-ball/power-up-2",url:"pin-ball/help-mobile-power-up.png",x:0,y:0,anchor:[.5,.5],platformspecific:"mobile"}]}],"pin-ball-assets":[{id:"pin-ball/floor-tile",url:"pin-ball/floor-tile.png",pool:24},{id:"pin-ball/side-test",url:"pin-ball/side-test.png",retina:!1,anchor:[0,0]},{id:"pin-ball/ramp-test",url:"pin-ball/side-test.png",retina:!1,anchor:[.5,.5]},{id:"pin-ball/pivot",url:"pin-ball/pivot.png",pool:2,anchor:[.5,.5],retina:!1},{id:"pin-ball/floor-tile-back",url:"pin-ball/floor-tile-back.png",pool:18},{id:"pin-ball/pinball-shadow",url:"pin-ball/pinball-shadow.png",anchor:[.5,.5]},{id:"pin-ball/boost-particle",url:"pin-ball/boost-particle.png",anchor:[.5,.5],retina:!1,pool:30},{id:"pin-ball/boost-particles-holder",children:[]},{id:"pin-ball/score-glow",url:"pin-ball/score-backing.png",anchor:[.5,.5],pool:10},{id:"pin-ball/100-score",url:"pin-ball/100-score.png",anchor:[.5,.5],pool:10},{id:"pin-ball/200-score",url:"pin-ball/200-score.png",anchor:[.5,.5],pool:10},{id:"pin-ball/50-score",url:"pin-ball/50-score.png",anchor:[.5,.5],pool:10},{id:"pin-ball/500-score",url:"pin-ball/500-score.png",anchor:[.5,.5],pool:10},{id:"pin-ball/1000-score",url:"pin-ball/1000-score.png",anchor:[.5,.5],pool:10},{id:"pin-ball/tickets-upper-container",children:[]},{id:"pin-ball/tickets-lower-container",children:[]},{id:"pin-ball/pip-holder",children:[{id:"pin-ball/pip-glow",url:"pin-ball/glow.png",anchor:[.5,.5],retina:!1},{id:"pin-ball/pip-sparkle-1",url:"pin-ball/sparkle-1.png",anchor:[.5,.5],retina:!1},{id:"pin-ball/pip-sparkle-2",url:"pin-ball/sparkle-2.png",anchor:[.5,.5],retina:!1},{id:"pin-ball/pip-left",url:"pin-ball/pip-left.png",anchor:[.5,.5]},{id:"pin-ball/pip-right",url:"pin-ball/pip-right.png",anchor:[.5,.5]}]},{id:"pin-ball/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"pin-ball/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"pin-ball/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"pin-ball/score-holder",children:[{id:"pin-ball-score-holder",url:"pin-ball/score-bg.png",anchor:[.5,.5]}]},{id:"pin-ball/heart-bg",url:"pin-ball/heart-bg.png",anchor:[.5,.5]},{id:"pin-ball/heart-icon",url:"pin-ball/heart-icon.png",anchor:[.5,.5],pool:3},{id:"pin-ball/floor-holder-front",children:[]},{id:"pin-ball/floor-holder-back",children:[]},{id:"pin-ball/floor-holder1",children:[]},{id:"pin-ball/floor-holder2",children:[]},{id:"pin-ball/floor-holder3",children:[]},{id:"pin-ball/rear-floor-holder1",children:[]},{id:"pin-ball/rear-floor-holder2",children:[]},{id:"pin-ball/rear-floor-holder3",children:[]},{id:"pin-ball/cloud-holder-1",children:[]},{id:"pin-ball/cloud-holder-2",children:[]},{id:"pin-ball/cloud-holder-3",children:[]},{id:"pin-ball/cloud-holder-4",children:[]},{id:"pin-ball/cloud",url:"pin-ball/cloud.png",pool:4},{id:"pin-ball/cloud-shadow",url:"pin-ball/cloud-shadow.png",pool:4},{id:"pin-ball/flag-frames",anchor:[.5,.5],type:"spritesheet",dir:"pin-ball/flag-frames",atlas:"flag-frames.json",pool:5,frames:["flag-frames-1.png","flag-frames-2.png","flag-frames-3.png","flag-frames-4.png","flag-frames-5.png","flag-frames-6.png"]},{id:"pin-ball/ramp-frames",anchor:[.5,.5],type:"spritesheet",dir:"pin-ball/ramp-frames",atlas:"ramp-frames.json",frames:["ramp-frames-1.png","ramp-frames-2.png","ramp-frames-3.png","ramp-frames-4.png","ramp-frames-5.png","ramp-frames-6.png"]},{id:"pin-ball/ramp-frames-add",anchor:[.5,.5],type:"spritesheet",dir:"pin-ball/ramp-frames-add",atlas:"ramp-frames-add.json",frames:["ramp-frames-add-1.png","ramp-frames-add-2.png","ramp-frames-add-3.png","ramp-frames-add-4.png","ramp-frames-add-5.png","ramp-frames-add-6.png"]},{id:"pin-ball/ice-frames",anchor:[.5,.5],type:"spritesheet",dir:"pin-ball/ice-frames",atlas:"ice-wall-frames.json",pool:3,frames:["ice-frames-blank.png","ice-frames-1.png","ice-frames-2.png","ice-frames-3.png","ice-frames-4.png","ice-frames-5.png","ice-frames-6.png","ice-frames-7.png","ice-frames-8.png","ice-frames-9.png","ice-frames-10.png","ice-frames-11.png","ice-frames-12.png","ice-frames-13.png","ice-frames-14.png","ice-frames-15.png","ice-frames-16.png","ice-frames-17.png","ice-frames-18.png","ice-frames-19.png","ice-frames-20.png"]},{id:"pin-ball/ice-frames-reverse",anchor:[.5,.5],type:"spritesheet",dir:"pin-ball/ice-frames",atlas:"ice-wall-frames.json",pool:3,frames:["ice-frames-20.png","ice-frames-19.png","ice-frames-18.png","ice-frames-17.png","ice-frames-16.png","ice-frames-15.png","ice-frames-14.png","ice-frames-13.png","ice-frames-12.png","ice-frames-11.png","ice-frames-10.png","ice-frames-9.png","ice-frames-8.png","ice-frames-7.png","ice-frames-6.png","ice-frames-5.png","ice-frames-4.png","ice-frames-3.png","ice-frames-2.png","ice-frames-1.png","ice-frames-blank.png"]},{id:"pin-ball/gate-light-1",children:[]},{id:"pin-ball/gate-light-2",children:[]},{id:"pin-ball/gate-light-3",children:[]},{id:"pin-ball/upper-light-1",children:[]},{id:"pin-ball/upper-light-2",children:[]},{id:"pin-ball/skid-particle",url:"pin-ball/skid-particle.png",anchor:[.5,.5],pool:120},{id:"pin-ball/skid-powerup",url:"pin-ball/skid-powerup.png",anchor:[.5,.5],pool:120},{id:"pin-ball/green-light",anchor:[.5,.5],url:"pin-ball/green-light.png",pool:5},{id:"pin-ball/red-light",anchor:[.5,.5],url:"pin-ball/red-light.png",pool:5},{id:"main-holder",children:[{id:"pin-ball/side-ramp",url:"pin-ball/side-ramp.png"},{id:"pin-ball/ramp-cover",url:"pin-ball/ramp-cover.png"},{id:"pin-ball/powerup-save",url:"pin-ball/powerup-save.png",anchor:[0,0]},{id:"pin-ball/ice-bottom",url:"pin-ball/ice-bottom.png",anchor:[.5,1]},{id:"pin-ball/left-light-bumper",url:"pin-ball/left-light-bumper.png",anchor:[.5,.5]},{id:"pin-ball/left-angle-bumper",url:"pin-ball/left-bumper.png",anchor:[.5,.5]},{id:"pin-ball/flipper-bracket-left",url:"pin-ball/flipper-bracket.png",retina:!1,anchor:[.5,.5]},{id:"pin-ball/flipper-bracket-right",url:"pin-ball/flipper-bracket.png",retina:!1,anchor:[.5,.5]},{id:"pin-ball/exit-ramp-outer-left",url:"pin-ball/exit-ramp-outer.png",retina:!1,anchor:[.5,.5]},{id:"pin-ball/exit-ramp-outer-right",url:"pin-ball/exit-ramp-outer.png",retina:!1,anchor:[.5,.5]},{id:"pin-ball/upper-divide",url:"pin-ball/upper-divide.png",anchor:[.5,.5]},{id:"pin-ball/upper-bumper",url:"pin-ball/upper-bumper.png",anchor:[.5,.5]},{id:"pin-ball/lower-container",children:[]},{id:"pin-ball/upper-container",children:[]},{id:"pin-ball/launcher-floor",url:"pin-ball/launcher-texture.png",anchor:[.5,1]},{id:"pin-ball/cover-left",url:"pin-ball/cover-left.png",anchor:[.5,.5]},{id:"pin-ball/cover-right",url:"pin-ball/cover-left.png",anchor:[.5,.5]},{id:"pin-ball/bumper-left",url:"pin-ball/bumper.png",anchor:[.5,.5]},{id:"pin-ball/bumper-right",url:"pin-ball/bumper.png",anchor:[.5,.5]},{id:"pin-ball/bumper-glow-left",url:"pin-ball/slant-bumper-glow.png",anhcor:[0,0]},{id:"pin-ball/bumper-glow-right",url:"pin-ball/slant-bumper-glow.png",anhcor:[0,0]},{id:"pin-ball/right-angle-holder",children:[{id:"pin-ball/right-angle",url:"pin-ball/right-angle.png",anchor:[0,0]},{id:"pin-ball/right-angle-top",url:"pin-ball/right-angle-top.png",y:-25,x:5,anchor:[0,0]},{id:"pin-ball/snowman-holder",children:[{id:"pin-ball/snowman-body",url:"pin-ball/snowman-body.png",x:92,y:135,anchor:[.5,1]},{id:"pin-ball/snowman-head",url:"pin-ball/snowman-head.png",x:90,y:75,anchor:[.6,1]}]}]},{id:"pin-ball/ice-upper-holder",children:[{id:"pin-ball/ice-bottom-left",url:"pin-ball/ice-bottom-left.png",x:1,y:538},{id:"pin-ball/ice-top-right",url:"pin-ball/ice-top-right.png",x:561},{id:"pin-ball/ice-top-left",url:"pin-ball/ice-top-left.png"}]},{id:"pin-ball/ice-bottom-right-a",url:"pin-ball/ice-bottom-right-a.png",x:780,y:-677},{id:"pin-ball/ice-bottom-right-b",url:"pin-ball/ice-bottom-right-b.png",x:1019,y:-677},{id:"pin-ball/circle-bumper-1-container",children:[{id:"pin-ball/circle-bumper-1-base",url:"pin-ball/round-bumper.png",anchor:[.5,.5]},{id:"pin-ball/circle-bumper-1-glow",url:"pin-ball/bumper-glow.png",y:15,anchor:[.5,.5]},{id:"pin-ball/circle-bumper-1-trees",url:"pin-ball/bumper-trees.png",x:5,y:-50,anchor:[.5,.5]}]},{id:"pin-ball/circle-bumper-2-container",children:[{id:"pin-ball/circle-bumper-2-base",url:"pin-ball/round-bumper.png",anchor:[.5,.5]},{id:"pin-ball/circle-bumper-2-glow",url:"pin-ball/bumper-glow.png",y:15,anchor:[.5,.5]},{id:"pin-ball/circle-bumper-2-igloo",url:"pin-ball/bumper-igloo.png",y:-20,anchor:[.5,.5]}]},{id:"pin-ball/circle-bumper-3-container",children:[{id:"pin-ball/circle-bumper-3-base",url:"pin-ball/round-bumper.png",anchor:[.5,.5]},{id:"pin-ball/circle-bumper-3-glow",url:"pin-ball/bumper-glow.png",y:15,anchor:[.5,.5]},{id:"pin-ball/circle-bumper-3-ice",url:"pin-ball/bumper-ice.png",y:-30,anchor:[.5,.5]}]},{id:"pin-ball/gate-block-1-container",children:[{id:"pin-ball/gate-block-1",url:"pin-ball/rect-gate-side.png",anchor:[.5,.5]}]},{id:"pin-ball/gate-block-2-container",children:[{id:"pin-ball/gate-block-2",url:"pin-ball/rect-gate-side.png",anchor:[.5,.5]}]},{id:"pin-ball/gate-block-3-container",children:[{id:"pin-ball/gate-block-3",url:"pin-ball/rect-gate-side.png",anchor:[.5,.5]}]},{id:"pin-ball/gate-block-4-container",children:[{id:"pin-ball/gate-block-4",url:"pin-ball/rect-gate-side.png",anchor:[.5,.5]}]},{id:"pin-ball/ice-upper-shadow",url:"pin-ball/ice-shadow.png",anchor:[.5,0]},{id:"pin-ball/left-angle-block",url:"pin-ball/angle-box-left.png",anchor:[0,0]},{id:"pin-ball/exit-slope-left",x:176,y:490,children:[{url:"pin-ball/exit-slope.png",anchor:[.5,.5]},{url:"pin-ball/exit-slope-under.png",x:-.5,y:131,anchor:[.5,.5]}]},{id:"pin-ball/exit-slope-right",x:840,y:490,children:[{url:"pin-ball/exit-slope.png",anchor:[.5,.5]},{url:"pin-ball/exit-slope-under.png",x:-.5,y:131,anchor:[.5,.5]}]}]},{id:"pin-ball/blank-input",url:"pin-ball/blank-input.png"},{id:"pin-ball/spring",url:"pin-ball/spring.png",anchor:[.5,1]},{id:"pin-ball/pinball-container",children:[]},{id:"pin-ball/spongebob-container",children:[{id:"pin-ball/pinball-base",url:"pin-ball/pinball-base-sb.png",anchor:[.5,.5]},{id:"pin-ball/pinball-grin",url:"pin-ball/pinball-grin-sb.png",anchor:[.5,.5]},{id:"pin-ball/pinball-happy",url:"pin-ball/pinball-happy-sb.png",anchor:[.5,.5]},{id:"pin-ball/pinball-nervous",url:"pin-ball/pinball-nervous-sb.png",anchor:[.5,.5]},{id:"pin-ball/pinball-shocked",url:"pin-ball/pinball-shocked-sb.png",anchor:[.5,.5]},{id:"pin-ball/pinball-top",url:"pin-ball/pinball-top.png",anchor:[.5,.5]}]},{id:"pin-ball/patrick-container",children:[{id:"pin-ball/pinball-base",url:"pin-ball/pinball-base-ps.png",anchor:[.5,.5]},{id:"pin-ball/pinball-grin",url:"pin-ball/pinball-grin-ps.png",anchor:[.5,.5]},{id:"pin-ball/pinball-happy",url:"pin-ball/pinball-happy-ps.png",anchor:[.5,.5]},{id:"pin-ball/pinball-nervous",url:"pin-ball/pinball-nervous-ps.png",anchor:[.5,.5]},{id:"pin-ball/pinball-shocked",url:"pin-ball/pinball-shocked-ps.png",anchor:[.5,.5]},{id:"pin-ball/pinball-top",url:"pin-ball/pinball-top.png",anchor:[.5,.5]}]},{id:"pin-ball/pull-back",url:"pin-ball/pull-back.png",anchor:[.5,.5]},{id:"pin-ball/flipper-left",url:"pin-ball/flipper.png",anchor:[.5,.5]},{id:"pin-ball/flipper-right",url:"pin-ball/flipper-right.png",anchor:[.5,.5]},{id:"pin-ball/exit-ramp-inner",url:"pin-ball/exit-ramp-inner-shape.png",anchor:[.5,.5]},{id:"pin-ball/exit-ramp-chunk",url:"pin-ball/exit-ramp-chunk.png",anchor:[.5,.5]},{id:"pin-ball/wall-chunk-left",url:"pin-ball/wall-chunk.png",anchor:[0,0]},{id:"pin-ball/wall-chunk-right",url:"pin-ball/wall-chunk.png",anchor:[0,0]},{id:"pin-ball/wall-chunk-right-upper",url:"pin-ball/wall-chunk.png",anchor:[0,0]},{id:"pin-ball/wall-chunk-right-inner",url:"pin-ball/wall-chunk.png",anchor:[.5,.5]},{id:"pin-ball/wall-chunk-top",url:"pin-ball/wall-chunk.png",anchor:[.5,.5]}],"aqua-jetpack-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"aqua-jetpack/help-controls-vertical-split",url:"aqua-jetpack/help-controls-vertical-split.png",anchor:[.5,.5],y:10},{id:"aqua-jetpack/help-controls-character-left",url:"aqua-jetpack/help-controls-character-left.png",anchor:[.5,.5],x:-175,y:-50},{id:"aqua-jetpack/help-controls-character-right",url:"aqua-jetpack/help-controls-character-right.png",anchor:[.5,.5],x:175,y:-50},{id:"aqua-jetpack/help-controls-left-desktop",url:"aqua-jetpack/help-controls-left-desktop.png",anchor:[.5,.5],platformspecific:"desktop",x:-175,y:130},{id:"aqua-jetpack/help-controls-right-desktop",url:"aqua-jetpack/help-controls-right-desktop.png",anchor:[.5,.5],platformspecific:"desktop",x:175,y:130},{id:"aqua-jetpack/help-controls-left-mobile",url:"aqua-jetpack/help-controls-left-mobile.png",anchor:[.5,.5],platformspecific:"mobile",x:-175,y:130},{id:"aqua-jetpack/help-controls-right-mobile",url:"aqua-jetpack/help-controls-right-mobile.png",anchor:[.5,.5],platformspecific:"mobile",x:175,y:130}]},{id:"tutorial-frame-howtoplay",children:[{id:"aqua-jetpack/help-jetpack-howtoplay",url:"aqua-jetpack/help-jetpack-howtoplay.png",anchor:[.5,.5],y:15},{id:"aqua-jetpack/help-jetpack-thumbs-up",url:"aqua-jetpack/help-jetpack-thumbs-up.png",anchor:[.5,.5],y:110}]},{id:"tutorial-frame-powerups",children:[{id:"aqua-jetpack/help-power-up",url:"aqua-jetpack/help-power-up.png",anchor:[.5,.5],y:-25},{id:"aqua-jetpack/help-power-up-desktop",url:"aqua-jetpack/help-power-up-desktop.png",anchor:[.5,.5],platformspecific:"desktop",y:130},{id:"aqua-jetpack/help-power-up-mobile",url:"aqua-jetpack/help-power-up-mobile.png",anchor:[.5,.5],platformspecific:"mobile",y:130}]}],"aqua-jetpack-assets":[{id:"aqua-jetpack/main-holder",children:[]},{id:"aqua-jetpack/sky",url:"aqua-jetpack/sky.png"},{id:"aqua-jetpack/blank-input",url:"aqua-jetpack/blank-input.png"},{id:"aqua-jetpack/far-back-layer-holder",children:[]},{id:"aqua-jetpack/back-layer-holder",children:[]},{id:"aqua-jetpack/mid-layer-holder",children:[]},{id:"aqua-jetpack/fore-layer-holder",children:[]},{id:"aqua-jetpack/water-front-layer-holder",children:[]},{id:"aqua-jetpack/water-front-layer",url:"aqua-jetpack/water-front-layer.png",anchor:[0,1],pool:6},{id:"aqua-jetpack/beach-front-layer",url:"aqua-jetpack/beach-front-layer.png",anchor:[0,1],pool:6},{id:"aqua-jetpack/mid-layer",url:"aqua-jetpack/mid-layer.png",anchor:[0,1],pool:6},{id:"aqua-jetpack/back-layer",url:"aqua-jetpack/back-layer.png",anchor:[0,1],pool:3},{id:"aqua-jetpack/far-back-layer",url:"aqua-jetpack/far-back-layer.png",anchor:[0,1],pool:2},{id:"aqua-jetpack/character-head-max",url:"aqua-jetpack/character-helmet-max-front.png",anchor:[.5,.5]},{id:"aqua-jetpack/character-head-max-back",url:"aqua-jetpack/character-helmet-max-back.png",anchor:[.5,.5]},{id:"aqua-jetpack/character-body-max",url:"aqua-jetpack/character-body-max.png",anchor:[.5,.5]},{id:"aqua-jetpack/character-back-max",url:"aqua-jetpack/character-back-max.png",anchor:[.5,.5]},{id:"aqua-jetpack/character-leg-right-max",url:"aqua-jetpack/character-leg-right-max.png",anchor:[.5,.5]},{id:"aqua-jetpack/character-leg-left-max",url:"aqua-jetpack/character-leg-left-max.png",anchor:[.5,.5]},{id:"aqua-jetpack/character-torso-max-holder",children:[]},{id:"aqua-jetpack/character-head-phoebe",url:"aqua-jetpack/character-helmet-phoebe-front.png",anchor:[.5,.5]},{id:"aqua-jetpack/character-head-phoebe-back",url:"aqua-jetpack/character-helmet-phoebe-back.png",anchor:[.5,.5]},{id:"aqua-jetpack/character-body-phoebe",url:"aqua-jetpack/character-body-phoebe.png",anchor:[.5,.5]},{id:"aqua-jetpack/character-back-phoebe",url:"aqua-jetpack/character-back-phoebe.png",anchor:[.5,.5]},{id:"aqua-jetpack/character-leg-right-phoebe",url:"aqua-jetpack/character-leg-right-phoebe.png",anchor:[.5,.5]},{id:"aqua-jetpack/character-leg-left-phoebe",url:"aqua-jetpack/character-leg-left-phoebe.png",anchor:[.5,.5]},{id:"aqua-jetpack/character-torso-phoebe-holder",children:[]},{id:"aqua-jetpack/lane-edge-marker",url:"aqua-jetpack/lane-edge-marker.png",anchor:[.5,0],pool:2},{id:"aqua-jetpack/sun",url:"aqua-jetpack/sun.png",anchor:[.5,.5]},{id:"aqua-jetpack/bush-rocks",url:"aqua-jetpack/bush-rocks.png",anchor:[.5,.5]},{id:"aqua-jetpack/bush-and-board",url:"aqua-jetpack/bush-and-board.png",anchor:[.5,.5]},{id:"aqua-jetpack/hut",url:"aqua-jetpack/hut.png",anchor:[.5,.5]},{id:"aqua-jetpack/rock-1",url:"aqua-jetpack/rock-1.png",anchor:[.5,.5]},{id:"aqua-jetpack/rock-2",url:"aqua-jetpack/rock-2.png",anchor:[.5,.5]},{id:"aqua-jetpack/tent",url:"aqua-jetpack/tent.png",anchor:[.5,.5]},{id:"aqua-jetpack/foreground-element",children:[]},{id:"aqua-jetpack/edge-net",url:"aqua-jetpack/edge-net.png",pool:8},{id:"aqua-jetpack/life-ring",url:"aqua-jetpack/life-ring.png",anchor:[.5,.5],pool:2},{id:"aqua-jetpack/cloud-0",url:"aqua-jetpack/cloud-0.png",anchor:[.5,.5],pool:2},{id:"aqua-jetpack/cloud-1",url:"aqua-jetpack/cloud-1.png",anchor:[.5,.5],pool:2},{id:"aqua-jetpack/cloud-2",url:"aqua-jetpack/cloud-2.png",anchor:[.5,.5],pool:2},{id:"aqua-jetpack/cloud-3",url:"aqua-jetpack/cloud-3.png",anchor:[.5,.5],pool:2},{id:"aqua-jetpack/collectible-orb",url:"aqua-jetpack/collectible-orb.png",anchor:[.5,.5]},{id:"aqua-jetpack/pickup-hint-circle",url:"aqua-jetpack/pickup-hint-circle.png",anchor:[.5,.5]},{id:"aqua-jetpack/pickup-hint-chevron",url:"aqua-jetpack/pickup-hint-chevron.png",anchor:[.5,.5]},{id:"aqua-jetpack/pickup-hint-holder",children:[]},{id:"aqua-jetpack/pickup-holder",children:[]},{id:"aqua-jetpack/fish-front-1",url:"aqua-jetpack/fish-front-1.png",anchor:[.5,.5],pool:8},{id:"aqua-jetpack/fish-rear-1",url:"aqua-jetpack/fish-rear-1.png",anchor:[.5,.5],pool:8},{id:"aqua-jetpack/fish-front-2",url:"aqua-jetpack/fish-front-2.png",anchor:[.5,.5],pool:8},{id:"aqua-jetpack/fish-rear-2",url:"aqua-jetpack/fish-rear-2.png",anchor:[.5,.5],pool:8},{id:"aqua-jetpack/fish-front-3",url:"aqua-jetpack/fish-front-3.png",anchor:[.5,.5],pool:8},{id:"aqua-jetpack/fish-rear-3",url:"aqua-jetpack/fish-rear-3.png",anchor:[.5,.5],pool:8},{id:"aqua-jetpack/fish-front-4",url:"aqua-jetpack/fish-front-4.png",anchor:[.5,.5],pool:8},{id:"aqua-jetpack/fish-rear-4",url:"aqua-jetpack/fish-rear-4.png",anchor:[.5,.5],pool:8},{id:"aqua-jetpack/heart-bg",url:"aqua-jetpack/heart-bg.png",anchor:[0,.5]},{id:"aqua-jetpack/heart-icon",url:"aqua-jetpack/heart-icon.png",anchor:[.5,.5],pool:3},{id:"aqua-jetpack/score-bg",url:"aqua-jetpack/score-bg.png",anchor:[.5,.5]},{id:"aqua-jetpack/score-holder",children:[]},{id:"aqua-jetpack/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"aqua-jetpack/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"aqua-jetpack/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"aqua-jetpack/pickup-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"aqua-jetpack/pickup-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"aqua-jetpack/pickup-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"aqua-jetpack/pickup-particle",url:"aqua-jetpack/pickup-particle.png",anchor:[.5,.5],pool:12},{id:"aqua-jetpack/start-platform",url:"aqua-jetpack/start-platform.png",anchor:[.5,.5]},{id:"aqua-jetpack/start-platform-pole",url:"aqua-jetpack/start-platform-pole.png",anchor:[.5,0]},{id:"aqua-jetpack/spray-particle-1",url:"aqua-jetpack/spray-particle-1.png",anchor:[.5,.5],pool:100,retina:!1},{id:"aqua-jetpack/spray-particle-2",url:"aqua-jetpack/spray-particle-2.png",anchor:[.5,.5],pool:100,retina:!1},{id:"aqua-jetpack/spray-particle-3",url:"aqua-jetpack/spray-particle-3.png",anchor:[.5,.5],pool:100,retina:!1},{id:"aqua-jetpack/splash-particle-1",url:"aqua-jetpack/splash-particle-1.png",anchor:[.5,.5],pool:200,retina:!1},{id:"aqua-jetpack/splash-particle-2",url:"aqua-jetpack/splash-particle-2.png",anchor:[.5,.5],pool:200,retina:!1},{id:"aqua-jetpack/splash-particle-3",url:"aqua-jetpack/splash-particle-3.png",anchor:[.5,.5],pool:200,retina:!1},{id:"aqua-jetpack/fish-water-particle-1",url:"aqua-jetpack/fish-water-particle-1.png",anchor:[.5,.5],pool:40,retina:!1},{id:"aqua-jetpack/fish-water-particle-2",url:"aqua-jetpack/fish-water-particle-2.png",anchor:[.5,.5],pool:40,retina:!1},{id:"aqua-jetpack/fish-water-particle-3",url:"aqua-jetpack/fish-water-particle-3.png",anchor:[.5,.5],pool:40,retina:!1},{id:"aqua-jetpack/surface-anim-temp",url:"aqua-jetpack/surface-anim-temp.png",anchor:[.5,.5]},{id:"aqua-jetpack/splash-frames",x:0,y:0,anchor:[.5,1],retina:!1,type:"spritesheet",dir:"aqua-jetpack/splash-frames",atlas:"splash-frames.json",pool:5,frames:["1-splash.png","2-splash.png","3-splash.png","4-splash.png","5-splash.png","6-splash.png","7-splash.png","8-splash.png","9-splash.png","10-splash.png","11-splash.png","12-splash.png","13-splash.png","blank-splash.png"]},{id:"aqua-jetpack/jet-frames",x:0,y:0,anchor:[.5,0],type:"spritesheet",dir:"aqua-jetpack/jet-frames",atlas:"jet-frames.json",pool:2,frames:["1-jet.png","2-jet.png","3-jet.png","4-jet.png"]},{id:"aqua-jetpack/surface-holder",children:[]},{id:"aqua-jetpack/surface-frames",x:0,y:0,anchor:[.5,0],type:"spritesheet",dir:"aqua-jetpack/surface-frames",atlas:"surface-frames.json",pool:12,frames:["1-surface.png","2-surface.png","3-surface.png","4-surface.png"]},{id:"aqua-jetpack/circle-holder",children:[]},{id:"aqua-jetpack/circle-1",url:"aqua-jetpack/circle-1.png",anchor:[.5,.5],pool:2},{id:"aqua-jetpack/circle-2",url:"aqua-jetpack/circle-2.png",anchor:[.5,.5],pool:2},{id:"aqua-jetpack/power-up-bubble-holder",children:[]},{id:"aqua-jetpack/power-up-particle-holder",children:[]},{id:"aqua-jetpack/power-up-particle",url:"aqua-jetpack/power-up-particle.png",anchor:[.5,.5],pool:100},{id:"aqua-jetpack/power-up-bubble",url:"aqua-jetpack/power-up-bubble.png",anchor:[.5,.5]},{id:"aqua-jetpack/score-1",url:"aqua-jetpack/score-1.png",anchor:[.5,.5]},{id:"aqua-jetpack/score-2",url:"aqua-jetpack/score-2.png",anchor:[.5,.5]},{id:"aqua-jetpack/score-4",url:"aqua-jetpack/score-4.png",anchor:[.5,.5]},{id:"aqua-jetpack/score-8",url:"aqua-jetpack/score-8.png",anchor:[.5,.5]},{id:"aqua-jetpack/score-16",url:"aqua-jetpack/score-16.png",anchor:[.5,.5]},{id:"aqua-jetpack/score-32",url:"aqua-jetpack/score-32.png",anchor:[.5,.5]},{id:"aqua-jetpack/score-64",url:"aqua-jetpack/score-64.png",anchor:[.5,.5]},{id:"aqua-jetpack/score-128",url:"aqua-jetpack/score-128.png",anchor:[.5,.5]},{id:"aqua-jetpack/score-256",url:"aqua-jetpack/score-256.png",anchor:[.5,.5]}],"claw-assets":[{url:"claw/blank-input.png"},{id:"claw/main-holder",children:[]},{url:"claw/back-glass.png",x:0,y:-65},{url:"claw/floor-balls-back.png",x:83,y:393,anchor:[0,0]},{url:"claw/pit.png",x:16,y:320},{url:"claw/bang.png",x:25,y:530},{url:"claw/pit-front.png",x:252,y:336},{url:"claw/finger-point.png",anchor:[.5,.5]},{url:"claw/floor-balls-front.png",x:266,y:450,anchor:[0,0]},{url:"claw/dummy-ball.png",anchor:[.5,.5],pool:4},{id:"claw/dummy-balls-holder",children:[]},{id:"claw/particles-holder",children:[]},{id:"claw/points",url:"claw/wristband-points.png",anchor:[.5,.5]},{id:"claw/tickets",url:"claw/wristband-tickets.png",anchor:[.5,.5]},{id:"claw/secondchance",url:"claw/wristband-secondchance.png",anchor:[.5,.5]},{id:"claw/tickets-5",url:"claw/tickets-5.png",anchor:[.5,.5],pool:2},{id:"claw/tickets-3",url:"claw/tickets-3.png",anchor:[.5,.5],pool:2},{id:"claw/tickets-10",url:"claw/tickets-10.png",anchor:[.5,.5],pool:2},{url:"claw/ball-back.png",anchor:[.5,.5],pool:6},{url:"claw/ball-front.png",anchor:[.5,.5],pool:6},{url:"claw/ball-highlight.png",anchor:[.5,.5],pool:6},{id:"claw/ball-holder",children:[],pool:6},{url:"claw/front-glass.png",y:-18},{id:"claw/control-panel",x:512,y:650,children:[{url:"claw/control-panel.png",anchor:[.5,1]},{url:"claw/splat.png",x:70,y:-112,anchor:[.5,.5]},{url:"claw/button-bottom.png",x:70,y:-119,anchor:[.5,0]},{id:"claw/joystick",x:-55,y:-120,children:[{url:"claw/joystick.png",anchor:[.5,.1]},{url:"claw/joystick-head.png",y:37,anchor:[.5,.5]}]},{id:"claw/button",x:70,y:-120,children:[{url:"claw/button.png",anchor:[.5,.5]},{url:"claw/button-bright.png",anchor:[.5,.5]}]}]},{url:"claw/drop-cord.png",anchor:[.5,.5]},{url:"claw/tracker.png",anchor:[.5,.5]},{url:"claw/claw-plunger.png",anchor:[.5,.5]},{url:"claw/claw-body.png",anchor:[.5,.5]},{url:"claw/claw-link.png",anchor:[.5,.5],pool:2},{url:"claw/claw-arm-left.png",anchor:[0,1]},{url:"claw/claw-arm-right.png",anchor:[0,1]},{url:"claw/grid.png",x:146,y:573,anchor:[.5,.5]}],"claw-assets-ice":[{url:"claw/bg-ice.png"}],"claw-assets-jungle":[{url:"claw/bg-jungle.png"}],"claw-assets-volcano":[{url:"claw/bg-volcano.png"}],"claw-assets-beach":[{url:"claw/bg-beach.png"}],"claw-assets-asteroid":[{url:"claw/bg-asteroid.png"}],"waterfall-wipeout-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:4},{id:"tutorial-frame-controls",children:[{id:"waterfall-wipeout/helpscreen-desktop-controls",url:"waterfall-wipeout/helpscreen-desktop-controls.png",x:0,y:20,anchor:[.5,.5],platformspecific:"desktop"},{id:"waterfall-wipeout/helpscreen-mobile-controls",url:"waterfall-wipeout/helpscreen-mobile-controls.png",x:0,y:20,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"waterfall-wipeout/helpscreen-how-to-play",url:"waterfall-wipeout/helpscreen-how-to-play.png",x:0,y:45,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"waterfall-wipeout/helpscreen-desktop-powerup",url:"waterfall-wipeout/helpscreen-desktop-powerup.png",x:10,y:15,anchor:[.5,.5],platformspecific:"desktop"},{id:"waterfall-wipeout/helpscreen-mobile-powerup",url:"waterfall-wipeout/helpscreen-mobile-powerup.png",x:10,y:15,anchor:[.5,.5],platformspecific:"mobile"}]}],"waterfall-wipeout-assets":[{id:"waterfall-wipeout/scale-holder",children:[{id:"waterfall-wipeout/main-holder",children:[]}]},{id:"waterfall-wipeout/river-section",url:"waterfall-wipeout/river-section.png",anchor:[.5,.5],retina:!1,pool:3},{id:"waterfall-wipeout/river-section-hard",url:"waterfall-wipeout/river-section-hard.png",anchor:[.5,.5],retina:!1,pool:3},{id:"waterfall-wipeout/river-triangle-drop",url:"waterfall-wipeout/river-triangle-drop.png",anchor:[0,.5],pool:3},{id:"waterfall-wipeout/river-triangle-drop-front",url:"waterfall-wipeout/river-triangle-drop-front.png",anchor:[0,0],pool:3},{id:"waterfall-wipeout/river-triangle-land",url:"waterfall-wipeout/river-triangle-land.png",anchor:[0,.5],pool:6},{id:"waterfall-wipeout/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"waterfall-wipeout/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"waterfall-wipeout/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"waterfall-wipeout/score-bg",url:"waterfall-wipeout/score-bg.png",anchor:[.5,.5]},{id:"waterfall-wipeout/sky",url:"waterfall-wipeout/sky.png",retina:!1},{id:"waterfall-wipeout/blank-input",url:"waterfall-wipeout/blank-input.png"},{id:"waterfall-wipeout/water-line",url:"waterfall-wipeout/water-line.png",pool:160,retina:!1,anchor:[0,.5]},{id:"waterfall-wipeout/water-line-back-holder",children:[],pool:3},{id:"waterfall-wipeout/water-line-front-holder",children:[],pool:3},{id:"waterfall-wipeout/water-line-river",url:"waterfall-wipeout/water-line.png",pool:120,retina:!1,anchor:[0,.7]},{id:"waterfall-wipeout/river-lines-holder-top",children:[],pool:3},{id:"waterfall-wipeout/river-lines-holder-bottom",children:[],pool:3},{id:"waterfall-wipeout/cloud-holder",children:[]},{id:"waterfall-wipeout/cloud-1",url:"waterfall-wipeout/cloud-1.png",pool:3,anchor:[.5,.5],retina:!1},{id:"waterfall-wipeout/cloud-2",url:"waterfall-wipeout/cloud-2.png",pool:3,anchor:[.5,.5],retina:!1},{id:"waterfall-wipeout/log-flume-front",children:[{url:"waterfall-wipeout/log.png",anchor:[.5,.5]},{url:"waterfall-wipeout/inflatable-front.png",x:-5,y:37,anchor:[.5,.2]}]},{id:"waterfall-wipeout/log-flume-back",children:[{url:"waterfall-wipeout/inflatable-back.png",x:-5,y:25,anchor:[.5,.2]},{url:"waterfall-wipeout/log-bg.png",anchor:[.5,.5]},{id:"waterfall-wipeout/log-flume-motor-holder",x:-135,y:15,anchor:[.9,.4],children:[{id:"waterfall-wipeout/log-water-fan-frames",x:35,y:134,anchor:[1,.5],type:"spritesheet",dir:"waterfall-wipeout/log-water-fan-frames",atlas:"log-water-fan-frames.json",frames:["log-water-powerup-fan-frame-1.png","log-water-powerup-fan-frame-2.png","log-water-powerup-fan-frame-3.png"]},{url:"waterfall-wipeout/powerup-motor-pole.png",x:55,y:54,anchor:[.5,0]},{url:"waterfall-wipeout/powerup-motor.png",x:40,y:30.5,anchor:[.5,.5]}]}]},{id:"waterfall-wipeout/log-water-effects-holder",children:[]},{id:"waterfall-wipeout/dry-house-front",url:"waterfall-wipeout/dry-house-wall-front.png",anchor:[.5,.5],retina:!1},{id:"waterfall-wipeout/dry-house-back",url:"waterfall-wipeout/dry-house-wall-back.png",anchor:[.5,.5],retina:!1},{id:"waterfall-wipeout/dry-house-roof",url:"waterfall-wipeout/dry-house-roof.png",anchor:[.5,.5],retina:!1},{id:"waterfall-wipeout/foreground-square",url:"waterfall-wipeout/foreground-square.png",anchor:[.5,0],retina:!1,pool:3},{id:"waterfall-wipeout/tree-clump-1",url:"waterfall-wipeout/tree-clump-1.png",anchor:[.5,1],pool:9},{id:"waterfall-wipeout/tree-clump-2",url:"waterfall-wipeout/tree-clump-2.png",anchor:[.5,1],pool:9},{id:"waterfall-wipeout/tree-clump-bg-1",url:"waterfall-wipeout/tree-clump-bg-1.png",anchor:[.5,1],pool:9},{id:"waterfall-wipeout/tree-1",url:"waterfall-wipeout/tree-1.png",anchor:[.5,1],pool:3},{id:"waterfall-wipeout/yellow-tree",url:"waterfall-wipeout/yellow-tree.png",anchor:[.5,1],pool:9,retina:!1},{id:"waterfall-wipeout/green-tree",url:"waterfall-wipeout/green-tree.png",anchor:[.5,1],pool:6,retina:!1},{id:"waterfall-wipeout/river-bank-back-holder",children:[],pool:3},{id:"waterfall-wipeout/river-bank-front-holder",children:[],pool:3},{id:"waterfall-wipeout/river-bank-graphics-back-holder",children:[],pool:3},{id:"waterfall-wipeout/river-bank-graphics-front-holder",children:[],pool:3},{id:"waterfall-wipeout/river-bank-green",url:"waterfall-wipeout/river-bank-green.png",anchor:[1,1],pool:36,retina:!1},{id:"waterfall-wipeout/river-bank-back",url:"waterfall-wipeout/river-bank-back.png",anchor:[1,1],pool:36,retina:!1},{id:"waterfall-wipeout/river-bank-front",url:"waterfall-wipeout/river-bank-front.png",anchor:[1,1],pool:36,retina:!1},{id:"waterfall-wipeout/dry-house-fans-front",children:[{id:"waterfall-wipeout/dry-house-fan-front-1",url:"waterfall-wipeout/dry-house-fan-front.png",x:89,y:90,anchor:[.5,.5],retina:!1},{id:"waterfall-wipeout/dry-house-fan-front-2",url:"waterfall-wipeout/dry-house-fan-front.png",x:312,y:90,anchor:[.5,.5],retina:!1},{id:"waterfall-wipeout/dry-house-fan-front-3",url:"waterfall-wipeout/dry-house-fan-front.png",x:535,y:90,anchor:[.5,.5],retina:!1}]},{id:"waterfall-wipeout/dry-house-fans-back",children:[{id:"waterfall-wipeout/dry-house-fan-back-1",url:"waterfall-wipeout/dry-house-fan-back.png",x:89,y:90,anchor:[.5,.5],retina:!1},{id:"waterfall-wipeout/dry-house-fan-back-2",url:"waterfall-wipeout/dry-house-fan-back.png",x:312,y:90,anchor:[.5,.5],retina:!1},{id:"waterfall-wipeout/dry-house-fan-back-3",url:"waterfall-wipeout/dry-house-fan-back.png",x:535,y:90,anchor:[.5,.5],retina:!1}]},{id:"waterfall-wipeout/wake-1",url:"waterfall-wipeout/wake-1.png",anchor:[.9,.9],pool:10,retina:!1},{id:"waterfall-wipeout/wake-2",url:"waterfall-wipeout/wake-2.png",anchor:[.9,.9],pool:10,retina:!1},{id:"waterfall-wipeout/side-splash-1",url:"waterfall-wipeout/wake-1.png",anchor:[.9,.9],pool:10,retina:!1},{id:"waterfall-wipeout/side-splash-2",url:"waterfall-wipeout/wake-2.png",anchor:[.9,.9],pool:10,retina:!1},{id:"waterfall-wipeout/wake-holder",children:[]},{id:"waterfall-wipeout/log-water-edge-frames",x:0,y:0,anchor:[0,0],retina:!1,pool:4,type:"spritesheet",dir:"waterfall-wipeout/log-water-edge-frames",atlas:"log-water-edge-frames.json",frames:["log-water-edge-frame-1.png","log-water-edge-frame-2.png","log-water-edge-frame-3.png","log-water-edge-frame-4.png","log-water-edge-frame-5.png","log-water-edge-frame-6.png","log-water-edge-frame-7.png","log-water-edge-frame-8.png","log-water-edge-frame-9.png","log-water-edge-frame-10.png","log-water-edge-frame-11.png"],retina:!1},{id:"waterfall-wipeout/log-water-edge-front-frames",x:0,y:0,anchor:[0,0],retina:!1,pool:4,type:"spritesheet",dir:"waterfall-wipeout/log-water-edge-front-frames",atlas:"log-water-edge-front-frames.json",frames:["log-water-edge-front-frame-1.png","log-water-edge-front-frame-2.png","log-water-edge-front-frame-3.png","log-water-edge-front-frame-4.png","log-water-edge-front-frame-5.png","log-water-edge-front-frame-6.png","log-water-edge-front-frame-7.png","log-water-edge-front-frame-8.png","log-water-edge-front-frame-9.png","log-water-edge-front-frame-10.png","log-water-edge-front-frame-11.png"],retina:!1},{id:"waterfall-wipeout/log-water-bar-frames",x:0,y:0,anchor:[.5,1],retina:!1,pool:2,type:"spritesheet",dir:"waterfall-wipeout/log-water-bar-frames",atlas:"log-water-bar-frames.json",frames:["log-water-bar-frame-1.png","log-water-bar-frame-2.png","log-water-bar-frame-3.png","log-water-bar-frame-4.png","log-water-bar-frame-5.png","log-water-bar-frame-6.png","log-water-bar-frame-7.png","log-water-bar-frame-8.png","log-water-bar-frame-9.png","log-water-bar-frame-10.png","log-water-bar-frame-11.png","log-water-bar-frame-12.png","log-water-bar-frame-13.png","log-water-bar-frame-14.png","log-water-bar-frame-15.png","log-water-bar-frame-16.png","log-water-bar-frame-17.png","log-water-bar-frame-18.png","log-water-bar-frame-19.png","log-water-bar-frame-20.png"]},{id:"waterfall-wipeout/background-layer-1",children:[]},{id:"waterfall-wipeout/background-layer-2",children:[]},{id:"waterfall-wipeout/river-holder",children:[]},{id:"waterfall-wipeout/river-foreground-layer",children:[]},{id:"waterfall-wipeout/foreground-layer",children:[]},{id:"waterfall-wipeout/river-layer",children:[]},{id:"waterfall-wipeout/river-chunk-holder",children:[],pool:3},{id:"waterfall-wipeout/spray-particles-holder",children:[]},{id:"waterfall-wipeout/splash-particles-holder",children:[]},{id:"waterfall-wipeout/waterfall-particles-holder-back",children:[]},{id:"waterfall-wipeout/waterfall-particles-holder-front",children:[]},{id:"waterfall-wipeout/player-torso",url:"waterfall-wipeout/torso.png",anchor:[.5,.5]},{id:"waterfall-wipeout/player-head",url:"waterfall-wipeout/head.png",anchor:[.5,.5]},{id:"waterfall-wipeout/player-arm",url:"waterfall-wipeout/arm.png",anchor:[.5,.5]},{id:"waterfall-wipeout/player-flat",url:"waterfall-wipeout/player-flat.png",x:185,y:-15,anchor:[.5,.5]},{id:"waterfall-wipeout/spray-particle-1",url:"waterfall-wipeout/spray-particle-1.png",anchor:[.5,.5],pool:30,retina:!1},{id:"waterfall-wipeout/spray-particle-2",url:"waterfall-wipeout/spray-particle-2.png",anchor:[.5,.5],pool:30,retina:!1},{id:"waterfall-wipeout/spray-particle-3",url:"waterfall-wipeout/spray-particle-3.png",anchor:[.5,.5],pool:30,retina:!1},{id:"waterfall-wipeout/splash-particle-1",url:"waterfall-wipeout/spray-particle-1.png",anchor:[.5,.5],pool:30,retina:!1},{id:"waterfall-wipeout/splash-particle-2",url:"waterfall-wipeout/spray-particle-2.png",anchor:[.5,.5],pool:30,retina:!1},{id:"waterfall-wipeout/splash-particle-3",url:"waterfall-wipeout/spray-particle-3.png",anchor:[.5,.5],pool:30,retina:!1},{id:"waterfall-wipeout/waterfall-particle-1",url:"waterfall-wipeout/water-spray-1.png",anchor:[.5,.5],pool:30},{id:"waterfall-wipeout/waterfall-particle-2",url:"waterfall-wipeout/water-spray-2.png",anchor:[.5,.5],pool:30},{id:"waterfall-wipeout/red-square",url:"waterfall-wipeout/red-square.png",anchor:[.5,.5],pool:4},{id:"waterfall-wipeout/grey-square",url:"waterfall-wipeout/grey-square.png",anchor:[.5,.5],pool:6},{id:"waterfall-wipeout/grey-triangle",url:"waterfall-wipeout/grey-triangle.png",anchor:[.5,.5],pool:3},{id:"waterfall-wipeout/river-foreground",url:"waterfall-wipeout/river-foreground.png",anchor:[.5,0],pool:3,retina:!1},{id:"waterfall-wipeout/meter-holder",x:900,y:140,children:[{url:"waterfall-wipeout/bar-bg.png",anchor:[.5,1],x:54,y:231},{id:"waterfall-wipeout/meter-inner-holder",x:0,y:0,children:[{url:"waterfall-wipeout/bar-water.png",anchor:[.5,1],x:55.5,y:226,retina:!1}]},{url:"waterfall-wipeout/bar-overlay.png",anchor:[0,0],x:13,y:0},{url:"waterfall-wipeout/bar-icon-bg.png",anchor:[.5,.5],x:55.5,y:274},{url:"waterfall-wipeout/bar-icon-bg-red.png",anchor:[.5,.5],x:55.5,y:274},{id:"waterfall-wipeout/meter-log-holder",x:55.5,y:274,children:[{url:"waterfall-wipeout/meter-log.png",anchor:[.5,.5]}]},{url:"waterfall-wipeout/bar-flood.png",anchor:[.5,1],x:55,y:293.5},{url:"waterfall-wipeout/bar-flood-bottom.png",anchor:[.5,0],x:55,y:293.5},{url:"waterfall-wipeout/meter-waves.png",anchor:[.5,1],x:55,y:282},{url:"waterfall-wipeout/bar-icon-fg.png",anchor:[.5,.5],x:55.5,y:274}]},{url:"waterfall-wipeout/sign-desktop.png",anchor:[.5,.9]},{url:"waterfall-wipeout/sign-mobile.png",anchor:[.5,.9]},{id:"waterfall-wipeout/foreground-rock-holder",children:[],pool:3},{id:"waterfall-wipeout/foreground-rock-holder-back",children:[],pool:3},{id:"waterfall-wipeout/foreground-objects-holder",children:[],pool:3},{id:"waterfall-wipeout/foreground-objects-holder-2",children:[],pool:3},{id:"waterfall-wipeout/foreground-object-1",url:"waterfall-wipeout/foreground-object-1.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/foreground-object-2",url:"waterfall-wipeout/foreground-object-2.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/foreground-object-3",url:"waterfall-wipeout/foreground-object-3.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/foreground-object-4",url:"waterfall-wipeout/foreground-object-4.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/foreground-object-5",url:"waterfall-wipeout/foreground-object-5.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/foreground-object-6",url:"waterfall-wipeout/foreground-object-6.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/foreground-object-7",url:"waterfall-wipeout/foreground-object-7.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/foreground-object-8",url:"waterfall-wipeout/foreground-object-8.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/foreground-object-9",url:"waterfall-wipeout/foreground-object-9.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/foreground-object-10",url:"waterfall-wipeout/foreground-object-10.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/foreground-object-11",url:"waterfall-wipeout/foreground-object-11.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/foreground-rock-1",url:"waterfall-wipeout/foreground-rock-1.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/foreground-rock-2",url:"waterfall-wipeout/foreground-rock-2.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/foreground-rock-3",url:"waterfall-wipeout/foreground-rock-3.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/foreground-rock-4",url:"waterfall-wipeout/foreground-rock-4.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/foreground-rock-5",url:"waterfall-wipeout/foreground-rock-5.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/foreground-rock-6",url:"waterfall-wipeout/foreground-rock-6.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/foreground-rock-7",url:"waterfall-wipeout/foreground-rock-7.png",anchor:[.5,.5],pool:6,retina:!1},{id:"waterfall-wipeout/waterfall-bottom-back-holder",children:[],pool:3},{id:"waterfall-wipeout/waterfall-bottom-front-holder",children:[],pool:3},{id:"waterfall-wipeout/waterfall-bottom-back",url:"waterfall-wipeout/waterfall-bottom-back.png",anchor:[0,.5],pool:30,retina:!1},{id:"waterfall-wipeout/waterfall-bottom-front",url:"waterfall-wipeout/waterfall-bottom-front.png",anchor:[0,.5],pool:30,retina:!1}],"volcano-skydive-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"volcano-skydive/helpscreen-desktop-controls",url:"volcano-skydive/helpscreen-desktop-controls.png",x:0,y:20,anchor:[.5,.5],platformspecific:"desktop"},{id:"volcano-skydive/helpscreen-mobile-controls",url:"volcano-skydive/helpscreen-mobile-controls.png",x:0,y:20,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"volcano-skydive/helpscreen-how-to-play",url:"volcano-skydive/helpscreen-how-to-play.png",x:-5,y:45,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"volcano-skydive/helpscreen-power-up-desktop",url:"volcano-skydive/helpscreen-power-up-desktop.png",x:55,y:10,anchor:[.5,.5],platformspecific:"desktop"},{id:"volcano-skydive/helpscreen-power-up-mobile",url:"volcano-skydive/helpscreen-power-up-mobile.png",x:55,y:10,anchor:[.5,.5],platformspecific:"mobile"}]}],"volcano-skydive-assets":[{id:"volcano-skydive/main-holder",children:[]},{id:"volcano-skydive/scale-holder",children:[]},{url:"volcano-skydive/hand-left.png",anchor:[.5,.5]},{url:"volcano-skydive/hand-right.png",anchor:[.5,.5]},{url:"volcano-skydive/character-falling-henri-arm-left.png",anchor:[.5,.5]},{url:"volcano-skydive/character-falling-henri-arm-right.png",anchor:[.5,.5]},{url:"volcano-skydive/character-falling-henri-body.png",anchor:[.5,.5]},{url:"volcano-skydive/character-falling-lena-arm-left.png",anchor:[.5,.5]},{url:"volcano-skydive/character-falling-lena-arm-right.png",anchor:[.5,.5]},{url:"volcano-skydive/character-falling-lena-body-back.png",anchor:[.5,.9]},{url:"volcano-skydive/character-falling-lena-body.png",anchor:[.5,.5]},{id:"volcano-skydive/parachute-open-head-holder",children:[]},{url:"volcano-skydive/parachute-open-shadow.png",anchor:[.5,.5]},{url:"volcano-skydive/character-henri-body.png",anchor:[.5,.5]},{url:"volcano-skydive/character-henri-head.png",anchor:[.5,.5]},{url:"volcano-skydive/character-henri-leg-left.png",anchor:[.5,.5]},{url:"volcano-skydive/character-henri-leg-right.png",anchor:[.5,.5]},{url:"volcano-skydive/character-lena-body.png",anchor:[.5,.5]},{url:"volcano-skydive/character-lena-head.png",anchor:[.5,.5]},{url:"volcano-skydive/character-lena-leg-left.png",anchor:[.5,.5]},{url:"volcano-skydive/character-lena-leg-right.png",anchor:[.5,.5]},{url:"volcano-skydive/cloud-0.png",anchor:[.5,.5],pool:20},{url:"volcano-skydive/cloud-1.png",anchor:[.5,.5],pool:20},{url:"volcano-skydive/cloud-2.png",anchor:[.5,.5],pool:20},{url:"volcano-skydive/cloud-3.png",anchor:[.5,.5],pool:20},{url:"volcano-skydive/air-line.png",anchor:[.5,0],pool:20},{id:"volcano-skydive/rear-cloud-holder",children:[]},{id:"volcano-skydive/arrow-holder",children:[]},{url:"volcano-skydive/blank-input.png"},{url:"volcano-skydive/wind-meter-bg.png",anchor:[.5,.5]},{url:"volcano-skydive/wind-arrow-body.png",anchor:[0,.5]},{url:"volcano-skydive/wind-arrowhead.png",anchor:[.5,.5]},{url:"volcano-skydive/obstacle.png",anchor:[.5,.5],pool:10},{url:"volcano-skydive/obstacle-pop-ring.png",anchor:[.5,.5]},{url:"volcano-skydive/obstacle-indicator.png",anchor:[.5,.5],pool:10},{url:"volcano-skydive/landing-zone-target-indicator.png",anchor:[.5,1]},{url:"volcano-skydive/landing-zone-indicator-arrow-left.png",anchor:[.5,.5]},{url:"volcano-skydive/landing-zone-indicator-arrow-right.png",anchor:[.5,.5]},{id:"volcano-skydive/altitude-meter-holder",children:[]},{url:"volcano-skydive/altitude-meter-bg.png"},{url:"volcano-skydive/altitude-meter-needle.png",anchor:[.5,.5]},{url:"volcano-skydive/sea-back-layer.png",anchor:[0,.5]},{url:"volcano-skydive/wind-particle.png",anchor:[.5,.5],pool:20},{url:"volcano-skydive/landing-ring-front-300-radius.png",anchor:[.5,.5]},{url:"volcano-skydive/landing-ring-rear-300-radius.png",anchor:[.5,.5]},{url:"volcano-skydive/jungle-bg.png",anchor:[0,1],pool:10},{url:"volcano-skydive/jungle-land-bg.png"},{id:"volcano-skydive/jungle-holder",children:[]},{url:"volcano-skydive/water-splash-particle.png",anchor:[.5,.5],pool:40},{url:"volcano-skydive/screen-fade-element.png",pool:4},{id:"volcano-skydive/score-holder",children:[]},{id:"volcano-skydive/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"volcano-skydive/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"volcano-skydive/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{url:"volcano-skydive/wave-dm-map.png",anchor:[.5,.5],platformspecific:"desktop"},{url:"volcano-skydive/parachute-line.png",anchor:[0,.5],pool:10},{id:"volcano-skydive/parachute-line-holder",children:[]},{id:"volcano-skydive/parachute-canopy-holder",children:[]},{url:"volcano-skydive/parachute-canopy-top-down.png",anchor:[.5,.5]},{url:"volcano-skydive/parachute-canopy-side-on.png",anchor:[.5,1]},{url:"volcano-skydive/parachute-canopy-side-on-detail.png",anchor:[.5,1]},{url:"volcano-skydive/string-marker.png",anchor:[.5,.5],pool:2},{url:"volcano-skydive/parachute-string.png",anchor:[.5,0],pool:2},{id:"volcano-skydive/jungle-landing-foreground-holder",children:[]},{url:"volcano-skydive/jungle-landing-foreground.png",pool:10},{id:"volcano-skydive/jungle-landing-midground-holder",children:[]},{url:"volcano-skydive/jungle-landing-midground.png",pool:10},{url:"volcano-skydive/landing-pad.png",anchor:[.5,0]},{url:"volcano-skydive/powerup-shield.png",anchor:[.5,.5]},{url:"volcano-skydive/sky.png",retina:!1},{url:"volcano-skydive/sky-overlay.png"},{url:"volcano-skydive/sun.png"},{url:"volcano-skydive/score-bg.png"},{id:"volcano-skydive/fg-holder",children:[]},{id:"volcano-skydive/mg-holder",children:[]},{id:"volcano-skydive/bg-holder",children:[]},{url:"volcano-skydive/hills-1.png",pool:5},{url:"volcano-skydive/hills-2.png",pool:5},{url:"volcano-skydive/hills-3.png",pool:5},{url:"volcano-skydive/hills-1-bottom.png",retina:!1},{url:"volcano-skydive/hills-2-bottom.png",retina:!1},{url:"volcano-skydive/hills-3-bottom.png",retina:!1},{url:"volcano-skydive/stars.png",retina:!1},{id:"volcano-skydive/fg-items-holder",children:[]},{id:"volcano-skydive/mg-items-holder",children:[]},{url:"volcano-skydive/fg-item-1.png",anchor:[.5,1],pool:30},{url:"volcano-skydive/fg-item-2.png",anchor:[.5,1],pool:30},{url:"volcano-skydive/fg-item-3.png",anchor:[.5,1],pool:30},{url:"volcano-skydive/mg-item-1.png",anchor:[.5,1],pool:30},{url:"volcano-skydive/mg-item-2.png",anchor:[.5,1],pool:30},{url:"volcano-skydive/mg-item-3.png",anchor:[.5,1],pool:30},{url:"volcano-skydive/fireworks-particle-1.png",anchor:[.5,.5],pool:3},{url:"volcano-skydive/fireworks-particle-2.png",anchor:[.5,.5],pool:30},{url:"volcano-skydive/fireworks-particle-trail.png",anchor:[.5,.5],pool:100},{id:"volcano-skydive/landing-particle-holder",children:[]},{url:"volcano-skydive/landing-particle-1.png",anchor:[.5,.5],pool:20},{url:"volcano-skydive/landing-particle-2.png",anchor:[.5,.5],pool:20},{url:"volcano-skydive/landing-particle-3.png",anchor:[.5,.5],pool:20},{id:"volcano-skydive/stone-left-holder",children:[]},{id:"volcano-skydive/stone-right-holder",children:[]},{url:"volcano-skydive/stone-1.png",anchor:[.5,1],pool:30},{url:"volcano-skydive/stone-2.png",anchor:[.5,1],pool:30},{url:"volcano-skydive/stone-3.png",anchor:[.5,1],pool:30},{url:"volcano-skydive/stone-4.png",anchor:[.5,1],pool:30},{url:"volcano-skydive/stone-5.png",anchor:[.5,1],pool:30},{url:"volcano-skydive/stone-6.png",anchor:[.5,1],pool:30},{url:"volcano-skydive/stone-7.png",anchor:[.5,1],pool:30},{id:"volcano-skydive/balloon-holder",anchor:[.5,.3],children:[{url:"volcano-skydive/balloon-top.png",x:429.5,y:0,anchor:[.5,0]},{id:"volcano-skydive/balloon-basket-holder",x:429.5,y:992,anchor:[.5,0],children:[{url:"volcano-skydive/balloon-bottom.png",x:80,y:99,anchor:[.5,.5]},{url:"volcano-skydive/balloon-basket.png",x:79.5,y:219.5,anchor:[.5,.5]},{url:"volcano-skydive/balloon-hands.png",x:79.5,y:151.5,anchor:[.5,.5]}]},{url:"volcano-skydive/powerup-shield-balloon.png",x:430,y:1116,anchor:[.5,.5]}]},{url:"volcano-skydive/character-henri-balloon-body.png",x:0,y:0,anchor:[.5,.5]},{url:"volcano-skydive/character-lena-balloon-body.png",x:0,y:0,anchor:[.5,.5]},{url:"volcano-skydive/character-henri-balloon-head.png",x:0,y:0,anchor:[.5,.5]},{url:"volcano-skydive/character-lena-balloon-head.png",x:0,y:0,anchor:[.5,.5]}],"snowball-wars-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"snowball-wars/helpscreen-desktop-controls",url:"snowball-wars/helpscreen-desktop-controls.png",x:5,y:20,anchor:[.5,.5],platformspecific:"desktop"},{id:"snowball-wars/helpscreen-mobile-controls",url:"snowball-wars/helpscreen-mobile-controls.png",x:5,y:20,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"snowball-wars/helpscreen-how-to-play",url:"snowball-wars/helpscreen-how-to-play.png",x:0,y:40,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"snowball-wars/helpscreen-desktop-power-up",url:"snowball-wars/helpscreen-desktop-power-up.png",x:15,y:8,anchor:[.5,.5],platformspecific:"desktop"},{id:"snowball-wars/helpscreen-mobile-power-up",url:"snowball-wars/helpscreen-mobile-power-up.png",x:15,y:8,anchor:[.5,.5],platformspecific:"mobile"}]}],"snowball-wars-assets":[{id:"snowball-wars/round-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"snowball-wars/round-text",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"snowball-wars/vs-text",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"snowball-wars/survived-text",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"snowball-wars/survived-number",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"snowball-wars/bang-frames",anchor:[.5,.5],type:"spritesheet",dir:"laser-cave/balloon-frames",pool:12,atlas:"balloon-frames.json",frames:["balloon-frame-blank.png","balloon-frame-1.png","balloon-frame-2.png","balloon-frame-3.png","balloon-frame-4.png","balloon-frame-5.png","balloon-frame-6.png","balloon-frame-7.png","balloon-frame-8.png","balloon-frame-9.png","balloon-frame-blank.png"]},{id:"snowball-wars/hit-frames",anchor:[.5,.5],type:"spritesheet",dir:"snowball-wars/bang-frames",pool:20,atlas:"bang-frames.json",frames:["bang-frames-blank.png","bang-frames-1.png","bang-frames-2.png","bang-frames-3.png","bang-frames-4.png","bang-frames-5.png","bang-frames-6.png","bang-frames-7.png","bang-frames-8.png","bang-frames-blank.png"]},{id:"snowball-wars/snowball-number",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"snowball-wars/round-sign",url:"snowball-wars/round-sign.png",anchor:[.5,.5]},{id:"snowball-wars/snowball-bg",url:"snowball-wars/snowball-bg.png",anchor:[.5,.5]},{id:"snowball-wars/snowball-icon",url:"snowball-wars/snowball-holder.png",anchor:[.5,.8]},{id:"snowball-wars/floor-target",url:"snowball-wars/floor-target.png",anchor:[.5,.5],retina:!1,pool:10},{id:"snowball-wars/floor-shadow-mortar",url:"snowball-wars/floor-shadow-mortar.png",anchor:[.5,.5],retina:!1,pool:10},{id:"snowball-wars/mortar",url:"snowball-wars/mortar.png",anchor:[.5,.8],pool:10},{id:"snowball-wars/layer-mask",url:"snowball-wars/layer-mask.png",anchor:[.5,1],pool:4},{id:"snowball-wars/score-sign",url:"snowball-wars/score-sign.png",anchor:[.5,1]},{id:"snowball-wars/linc-head",url:"snowball-wars/linc-head.png",anchor:[.5,.5]},{id:"snowball-wars/lynn-head",url:"snowball-wars/lynn-head.png",anchor:[.5,.5]},{id:"snowball-wars/leni-head",url:"snowball-wars/leni-head.png",anchor:[.5,.5]},{id:"snowball-wars/lucy-head",url:"snowball-wars/lucy-head.png",anchor:[.5,.5]},{id:"snowball-wars/luna-head",url:"snowball-wars/luna-head.png",anchor:[.5,.5]},{id:"snowball-wars/luan-head",url:"snowball-wars/luan-head.png",anchor:[.5,.5]},{id:"snowball-wars/lori-head",url:"snowball-wars/lori-head.png",anchor:[.5,.5]},{id:"snowball-wars/lisa-head",url:"snowball-wars/lisa-head.png",anchor:[.5,.5]},{id:"snowball-wars/lola-head",url:"snowball-wars/lola-head.png",anchor:[.5,.5]},{id:"snowball-wars/lana-head",url:"snowball-wars/lana-head.png",anchor:[.5,.5]},{id:"snowball-wars/enemy-head",url:"snowball-wars/enemy-head.png",anchor:[.5,.5],pool:10},{id:"snowball-wars/enemy-snow-death",url:"snowball-wars/snow-pile.png",anchor:[.5,1],pool:12},{id:"snowball-wars/enemy-snow-pile-eyes-open",url:"snowball-wars/snow-pile-eyes-open.png",anchor:[.5,.5],pool:12},{id:"snowball-wars/enemy-snow-pile-eyes-blink",url:"snowball-wars/snow-pile-eyes-blink.png",anchor:[.5,.5],pool:12},{id:"snowball-wars/arena-side",url:"snowball-wars/arena-side.png",anchor:[1,0],pool:2},{id:"snowball-wars/mortar-balls",url:"snowball-wars/mortar-launch.png",anchor:[.5,0],pool:20},{id:"snowball-wars/round-sign-container",children:[]},{id:"snowball-wars/ordering-container",children:[]},{id:"snowball-wars/snow-particle",url:"snowball-wars/snow-particle.png",anchor:[.5,1],retina:!1,pool:300},{id:"snowball-wars/snow-container",children:[]},{id:"snowball-wars/health-ui",children:[]},{id:"snowball-wars/floor-layer",children:[]},{id:"snowball-wars/snowball-ui-holder",children:[]},{id:"snowball-wars/joystick-background",url:"snowball-wars/joystick-background.png",anchor:[.5,.5]},{id:"snowball-wars/joystick",url:"snowball-wars/joystick.png",anchor:[.5,.5]},{id:"snowball-wars/bar-cube",url:"snowball-wars/bar-cube.png",anchor:[0,.5],pool:60},{id:"snowball-wars/health-bar-back",url:"snowball-wars/health-bar-back.png",anchor:[0,0],pool:20},{id:"snowball-wars/health-bar-holder",children:[],anchor:[.5,.5],pool:20},{id:"snowball-wars/bar-cube2",url:"snowball-wars/bar-cube.png",anchor:[.5,1],pool:3},{id:"snowball-wars/round-text-container",children:[]},{id:"snowball-wars/hatch-sister-container",children:[],pool:4},{id:"snowball-wars/hatch-container-0",children:[]},{id:"snowball-wars/hatch-container-1",children:[]},{id:"snowball-wars/hatch-container-2",children:[]},{id:"snowball-wars/hatch-container-3",children:[]},{id:"snowball-wars/mortar-pit",url:"snowball-wars/mortar-pit.png",anchor:[.5,.5],pool:4},{id:"snowball-wars/mortar-front",url:"snowball-wars/mortar-front.png",anchor:[.5,1],pool:4},{id:"snowball-wars/left-hatch-door",url:"snowball-wars/left-hatch-door.png",anchor:[0,.5],pool:4},{id:"snowball-wars/right-hatch-door",url:"snowball-wars/right-hatch-door.png",anchor:[1,.5],pool:4},{id:"snowball-wars/sister-mortar",url:"snowball-wars/sister-mortar.png",anchor:[.5,1]},{id:"snowball-wars/heart-bg",url:"snowball-wars/heart-bg.png",anchor:[.5,.5]},{id:"snowball-wars/heart-icon",url:"snowball-wars/heart-icon.png",anchor:[.5,.5],pool:3},{id:"snowball-wars/snow-front",url:"snowball-wars/front-snow.png",anchor:[0,.5],pool:20},{id:"snowball-wars/front-wall-shadow",url:"snowball-wars/front-wall-shadow.png",anchor:[0,.5],pool:20},{id:"snowball-wars/mortar-particle",url:"snowball-wars/mortar-particle.png",anchor:[.5,.5],pool:50},{id:"snowball-wars/scale-container",children:[]},{id:"snowball-wars/main-container",children:[]},{id:"snowball-wars/ammo",url:"snowball-wars/ammo-pickup.png",pool:20,retina:!1,anchor:[.5,1]},{id:"snowball-wars/sky",url:"snowball-wars/sky.png"},{id:"snowball-wars/blank-input",url:"snowball-wars/blank.png",retina:!1},{id:"snowball-wars/arena-floor",url:"snowball-wars/arena-floor-full.png",anchor:[.5,.5]},{id:"snowball-wars/player",url:"snowball-wars/player-linc.png",anchor:[.5,1]},{id:"snowball-wars/enemy",url:"snowball-wars/enemy.png",pool:10,anchor:[.5,1]},{id:"snowball-wars/enemy-mortar",url:"snowball-wars/enemy-mortar.png",pool:4,anchor:[.5,1]},{id:"snowball-wars/bounding-box-player",url:"snowball-wars/bounding-box.png",anchor:[0,0]},{id:"snowball-wars/bounding-box-enemy",url:"snowball-wars/bounding-box.png",pool:10,anchor:[0,0]},{id:"snowball-wars/enemy-container",children:[],pool:10},{id:"snowball-wars/bounding-box",url:"snowball-wars/bounding-box.png",pool:200,anchor:[0,0]},{id:"snowball-wars/floor-shadow",url:"snowball-wars/floor-shadow.png",anchor:[.5,0]},{id:"snowball-wars/snowball",url:"snowball-wars/snowball.png",pool:60,anchor:[.5,1]},{id:"snowball-wars/side-wall",url:"snowball-wars/side-wall.png",pool:2,anchor:[1,.5]},{id:"snowball-wars/side-snow",url:"snowball-wars/side-snow.png",pool:2,anchor:[1,0]},{id:"snowball-wars/wall-edge",url:"snowball-wars/wall-edge.png",pool:2,anchor:[0,0]},{id:"snowball-wars/snowman-head",url:"snowball-wars/snowman-head.png",anchor:[.5,1]},{id:"snowball-wars/snowman-body",url:"snowball-wars/snowman-body.png",anchor:[.6,1]},{id:"snowball-wars/lilly-head",url:"snowball-wars/lilly-head.png",anchor:[.5,1]},{id:"snowball-wars/lilly-body",url:"snowball-wars/lilly-body.png",anchor:[.5,1]},{id:"snowball-wars/wall",url:"snowball-wars/wall.png",pool:20,anchor:[1,1]},{id:"snowball-wars/snow-trail",url:"snowball-wars/snowball-trail.png",pool:100,anchor:[.5,.5]},{id:"snowball-wars/foot-mark",url:"snowball-wars/foot-mark.png",pool:400,anchor:[.5,.5]},{id:"snowball-wars/collision-particle",url:"snowball-wars/collision-particle.png",pool:100,anchor:[.5,.5]},{id:"snowball-wars/snowball-shadow",url:"snowball-wars/snowball-shadow.png",pool:200,anchor:[.5,.5]},{id:"snowball-wars/crater",url:"snowball-wars/crater.png",pool:10,anchor:[.5,.5]},{id:"snowball-wars/barrier",url:"snowball-wars/barrier.png",pool:2,anchor:[.5,1]},{id:"snowball-wars/shield",url:"snowball-wars/shield.png",anchor:[.5,1]},{id:"snowball-wars/snowball-ammo-pickup-container",children:[],pool:21},{id:"snowball-wars/snowball-pickup",url:"snowball-wars/snowball-pickup.png",pool:200,anchor:[.5,1]},{id:"snowball-wars/snowball-pickup-container",children:[]},{id:"snowball-wars/dark-wall",url:"snowball-wars/dark-wall.png",pool:4,anchor:[0,0]},{id:"snowball-wars/wall-shadow",url:"snowball-wars/wall-shadow.png",pool:4,anchor:[0,0]},{id:"snowball-wars/wall-snow",url:"snowball-wars/wall-snow.png",pool:4,anchor:[0,0]},{id:"snowball-wars/background-container",children:[]},{id:"snowball-wars/background-container-2",children:[]},{id:"snowball-wars/mountain-full",url:"snowball-wars/mountains-full.png",pool:2,anchor:[0,1]},{id:"snowball-wars/trees-full",url:"snowball-wars/trees-full.png",anchor:[0,1]},{id:"snowball-wars/bushes-full",url:"snowball-wars/bushes-full.png",anchor:[0,1]},{id:"snowball-wars/bg-cloud",url:"snowball-wars/bg-cloud.png",pool:10,anchor:[0,1]},{id:"snowball-wars/background-master-container",children:[]},{id:"snowball-wars/hatch-door",url:"snowball-wars/hatch-assets/hatch-door.png",pool:8,anchor:[0,.5]},{id:"snowball-wars/hatch-handle",url:"snowball-wars/hatch-assets/handle.png",pool:8,anchor:[.5,.5]},{id:"snowball-wars/hatch-side",url:"snowball-wars/hatch-assets/hatch-side.png",pool:8,anchor:[0,.5]},{id:"snowball-wars/hatch-front",url:"snowball-wars/hatch-assets/hatch-front.png",pool:4,anchor:[.5,.5]},{id:"snowball-wars/hatch-back",url:"snowball-wars/hatch-assets/hatch-back.png",pool:4,anchor:[.5,.5]},{id:"snowball-wars/hatch-base",url:"snowball-wars/hatch-assets/hatch-base.png",pool:4,anchor:[.5,.5]},{id:"snowball-wars/character-linc/linc-shadow",url:"snowball-wars/character-linc/linc-shadow.png",anchor:[.5,.5]},{id:"snowball-wars/enemy-shadow",url:"snowball-wars/character-linc/linc-shadow.png",pool:10,anchor:[.5,.5]},{id:"snowball-wars/gun-back-panel-holder",pool:13,children:[]},{id:"snowball-wars/gun-0-balls",url:"snowball-wars/gun-0-balls.png",pool:12,anchor:[.5,.5]},{id:"snowball-wars/gun-1-balls",url:"snowball-wars/gun-1-balls.png",pool:12,anchor:[.5,.5]},{id:"snowball-wars/gun-2-balls",url:"snowball-wars/gun-2-balls.png",pool:12,anchor:[.5,.5]},{id:"snowball-wars/gun-3-balls",url:"snowball-wars/gun-3-balls.png",pool:12,anchor:[.5,.5]},{id:"snowball-wars/gun-4-balls",url:"snowball-wars/gun-4-balls.png",pool:12,anchor:[.5,.5]},{id:"snowball-wars/gun-5-balls",url:"snowball-wars/gun-5-balls.png",pool:12,anchor:[.5,.5]},{id:"snowball-wars/gun-6-balls",url:"snowball-wars/gun-6-balls.png",pool:12,anchor:[.5,.5]},{id:"snowball-wars/gun-7-balls",url:"snowball-wars/gun-7-balls.png",pool:12,anchor:[.5,.5]},{id:"snowball-wars/gun-8-balls",url:"snowball-wars/gun-8-balls.png",pool:12,anchor:[.5,.5]},{id:"snowball-wars/gun-9-balls",url:"snowball-wars/gun-9-balls.png",pool:12,anchor:[.5,.5]},{id:"snowball-wars/gun-10-balls",url:"snowball-wars/gun-10-balls.png",pool:12,anchor:[.5,.5]},{id:"snowball-wars/lily-holder",anchor:[.5,1],children:[{id:"snowball-wars/lily/lily-hair",url:"snowball-wars/lily/lily-hair.png",anchor:[.5,1]},{id:"snowball-wars/lily/lily-body",url:"snowball-wars/lily/lily-body.png",anchor:[.5,1]},{id:"snowball-wars/lily/lily-blink",url:"snowball-wars/lily/lily-blink.png",anchor:[.5,1]},{id:"snowball-wars/lily/lily-arm",url:"snowball-wars/lily/lily-arm.png",anchor:[.8,.8]},{id:"snowball-wars/lily/lily-mouth",url:"snowball-wars/lily/lily-mouth.png",anchor:[.5,.5]}]},{id:"snowball-wars/player-container",anchor:[.5,1],children:[]},{id:"snowball-wars/player-holder",anchor:[.5,1],children:[]},{id:"snowball-wars/character-linc/linc-back-leg-idle",url:"snowball-wars/character-linc/linc-back-leg-idle.png",x:14,y:-3,anchor:[.5,1]},{id:"snowball-wars/character-linc/linc-front-leg-idle",url:"snowball-wars/character-linc/linc-front-leg-idle.png",x:-6,y:-3,anchor:[.5,1]},{id:"snowball-wars/character-linc/linc-gun-back",url:"snowball-wars/character-linc/linc-gun-back.png",x:-10,y:-60,anchor:[.5,.5]},{id:"snowball-wars/character-linc/linc-body",url:"snowball-wars/character-linc/linc-body.png",x:-3,y:-50,anchor:[.2,1]},{id:"snowball-wars/character-linc/linc-gun-arm",url:"snowball-wars/character-linc/linc-gun-arm.png",x:-10,y:-84,anchor:[.8,.1]},{id:"snowball-wars/character-linc/linc-gun-front",url:"snowball-wars/character-linc/linc-gun-front.png",x:-20,y:-85,anchor:[.3,.1]},{id:"snowball-wars/character-linc/linc-gun-front-power-up",url:"snowball-wars/character-linc/linc-gun-front-power-up.png",x:0,y:-85,anchor:[.3,.1]},{id:"snowball-wars/player-head-holder",anchor:[.5,1],children:[{id:"snowball-wars/character-linc/linc-hair",url:"snowball-wars/character-linc/linc-hair.png",x:87,y:-13,anchor:[.5,1]},{id:"snowball-wars/character-linc/linc-head",url:"snowball-wars/character-linc/linc-head.png",x:59,y:0,anchor:[.5,.5]},{id:"snowball-wars/character-linc/linc-eyelids",url:"snowball-wars/character-linc/linc-eyelids.png",x:67,y:-2,anchor:[.5,.5]},{id:"snowball-wars/character-linc/linc-mouth-normal",url:"snowball-wars/character-linc/linc-mouth-normal.png",x:57,y:15.5,anchor:[.5,.5]},{id:"snowball-wars/character-linc/linc-mouth-happy",url:"snowball-wars/character-linc/linc-mouth-happy.png",x:56.5,y:18.5,anchor:[.5,.5]},{id:"snowball-wars/character-linc/linc-mouth-sad",url:"snowball-wars/character-linc/linc-mouth-sad.png",x:53,y:21.5,anchor:[.5,.5]}]},{id:"snowball-wars/snowball-wars-linc-legs-frames",anchor:[.5,1],type:"spritesheet",dir:"snowball-wars/character-linc/snowball-wars-linc-legs-frames",atlas:"snowball-wars-linc-legs-frames.json",frames:["snowball-wars-linc-legs-frame-1.png","snowball-wars-linc-legs-frame-2.png","snowball-wars-linc-legs-frame-3.png","snowball-wars-linc-legs-frame-4.png","snowball-wars-linc-legs-frame-5.png","snowball-wars-linc-legs-frame-6.png","snowball-wars-linc-legs-frame-7.png","snowball-wars-linc-legs-frame-8.png","snowball-wars-linc-legs-frame-9.png"]},{id:"snowball-wars/ammo-alert",url:"snowball-wars/ammo-alert.png",pool:13,anchor:[.5,.5]},{id:"snowball-wars/gun-smoke-particle",url:"snowball-wars/gun-smoke-particle.png",pool:60,anchor:[.5,1]},{id:"snowball-wars/ripple",url:"snowball-wars/ripple.png",pool:6,anchor:[.5,.5]},{id:"snowball-wars/mortar-holder",x:0,y:0,pool:3,children:[]},{id:"snowball-wars/mortor-top",url:"snowball-wars/mortor-top.png",pool:3,anchor:[.8,.8]},{id:"snowball-wars/mortor-bottom",url:"snowball-wars/mortor-bottom.png",pool:3,anchor:[.5,.5]},{id:"snowball-wars/sister-lisa-holder",x:0,y:0,children:[{id:"snowball-wars/character-body",url:"snowball-wars/character-lisa/lisa-body.png",anchor:[.5,.5]},{id:"snowball-wars/head-holder",anchor:[.5,1],children:[{id:"snowball-wars/character-head",url:"snowball-wars/character-lisa/lisa-head.png",x:0,y:0,anchor:[0,0]},{id:"snowball-wars/character-blink",url:"snowball-wars/character-lisa/lisa-blink.png",x:23,y:27,anchor:[.5,.5]},{id:"snowball-wars/character-happy",url:"snowball-wars/character-lisa/lisa-happy.png",x:30,y:42.5,anchor:[.5,.5]},{id:"snowball-wars/character-sad",url:"snowball-wars/character-lisa/lisa-sad.png",x:31.5,y:41.5,anchor:[.5,.5]},{id:"snowball-wars/character-normal",url:"snowball-wars/character-lisa/lisa-normal.png",x:31.5,y:41,anchor:[.5,.5]}]}]},{id:"snowball-wars/sister-lana-holder",x:0,y:0,children:[{id:"snowball-wars/character-hair",url:"snowball-wars/character-lana/lana-hair.png",x:0,y:0,anchor:[.5,.5]},{id:"snowball-wars/character-body",url:"snowball-wars/character-lana/lana-body.png",x:0,y:0,anchor:[.5,.5]},{id:"snowball-wars/character-arm-front",url:"snowball-wars/character-lana/lana-arm-front.png",anchor:[1,0]},{id:"snowball-wars/head-holder",anchor:[.5,1],children:[{id:"snowball-wars/character-head",url:"snowball-wars/character-lana/lana-head.png",x:0,y:0,anchor:[0,0]},{id:"snowball-wars/character-blink",url:"snowball-wars/character-lana/lana-blink.png",x:5,y:13,anchor:[0,0]},{id:"snowball-wars/character-happy",url:"snowball-wars/character-lana/lana-happy.png",x:27,y:39,anchor:[.5,.5]},{id:"snowball-wars/character-sad",url:"snowball-wars/character-lana/lana-sad.png",x:29.5,y:38.5,anchor:[.5,.5]},{id:"snowball-wars/character-normal",url:"snowball-wars/character-lana/lana-normal.png",x:28,y:34.5,anchor:[.5,.5]}]}]},{id:"snowball-wars/sister-lola-holder",x:0,y:0,children:[{id:"snowball-wars/character-hair",url:"snowball-wars/character-lola/lola-hair.png",x:0,y:0,anchor:[.5,.5]},{id:"snowball-wars/character-body",url:"snowball-wars/character-lola/lola-body.png",x:0,y:10,anchor:[.5,0]},{id:"snowball-wars/character-arm-front",url:"snowball-wars/character-lola/lola-arm-front.png",anchor:[1,0]},{id:"snowball-wars/head-holder",anchor:[.5,1],children:[{id:"snowball-wars/character-head",url:"snowball-wars/character-lola/lola-head.png",x:0,y:0,anchor:[0,0]},{id:"snowball-wars/character-blink",url:"snowball-wars/character-lola/lola-blink.png",x:24,y:29.5,anchor:[.5,.5]},{id:"snowball-wars/character-happy",url:"snowball-wars/character-lola/lola-happy.png",x:23,y:43,anchor:[.5,.5]},{id:"snowball-wars/character-sad",url:"snowball-wars/character-lola/lola-sad.png",x:28.5,y:43.5,anchor:[.5,.5]},{id:"snowball-wars/character-normal",url:"snowball-wars/character-lola/lola-normal.png",x:23.5,y:39.5,anchor:[.5,.5]}]}]},{id:"snowball-wars/sister-lucy-low-holder",children:[{id:"snowball-wars/character-legs",url:"snowball-wars/character-lucy/lucy-low-legs.png",x:35,y:0,anchor:[.5,1]},{id:"snowball-wars/character-body",url:"snowball-wars/character-lucy/lucy-low-body.png",x:33,y:-25,anchor:[.5,1]}]},{id:"snowball-wars/sister-lynn-low-holder",children:[{id:"snowball-wars/character-legs",url:"snowball-wars/character-lynn/lynn-low-legs.png",x:33,y:0,anchor:[.5,1]},{id:"snowball-wars/character-body",url:"snowball-wars/character-lynn/lynn-low-body.png",x:35,y:-24,anchor:[.5,1]}]},{id:"snowball-wars/sister-luna-low-holder",children:[{id:"snowball-wars/character-legs",url:"snowball-wars/character-luna/luna-low-legs.png",x:35,y:0,anchor:[.5,1]},{id:"snowball-wars/character-body",url:"snowball-wars/character-luna/luna-low-body.png",x:25,y:-40,anchor:[.5,1]}]},{id:"snowball-wars/sister-luan-low-holder",children:[{id:"snowball-wars/character-legs",url:"snowball-wars/character-luan/luan-low-legs.png",x:35,y:0,anchor:[.5,1]},{id:"snowball-wars/character-body",url:"snowball-wars/character-luan/luan-low-body.png",x:37,y:-39,anchor:[.5,1]}]},{id:"snowball-wars/sister-lori-low-holder",children:[{id:"snowball-wars/character-legs",url:"snowball-wars/character-lori/lori-low-legs.png",x:38,y:7,anchor:[.5,1]},{id:"snowball-wars/character-body",url:"snowball-wars/character-lori/lori-low-body.png",x:34,y:-48,anchor:[.5,1]}]},{id:"snowball-wars/sister-leni-low-holder",children:[{id:"snowball-wars/character-legs",url:"snowball-wars/character-leni/leni-low-legs.png",x:35,y:5,anchor:[.5,1]},{id:"snowball-wars/character-body",url:"snowball-wars/character-leni/leni-low-body.png",x:35,y:-35,anchor:[.5,1]}]},{id:"snowball-wars/sister-lucy-holder",children:[{id:"snowball-wars/character-back-leg-idle",url:"snowball-wars/character-lucy/lucy-back-leg-idle.png",x:49.5,y:0,anchor:[.5,1]},{id:"snowball-wars/character-gun-back",url:"snowball-wars/character-lucy/lucy-gun-back.png",x:81.5,y:-50,anchor:[.5,.5]},{id:"snowball-wars/character-hair",url:"snowball-wars/character-lucy/lucy-hair.png",x:56,y:-70,anchor:[.5,.5]},{id:"snowball-wars/character-front-leg-idle",url:"snowball-wars/character-lucy/lucy-front-leg-idle.png",x:62.5,y:4,anchor:[.5,1]},{id:"snowball-wars/character-body",url:"snowball-wars/character-lucy/lucy-body.png",x:61,y:-33,anchor:[.5,1]},{id:"snowball-wars/character-arm-front",url:"snowball-wars/character-lucy/lucy-arm-front.png",x:68,y:-54,anchor:[.5,.5]},{id:"snowball-wars/head-holder",anchor:[.5,1],x:58,y:-25,children:[{id:"snowball-wars/character-head",url:"snowball-wars/character-lucy/lucy-head.png",x:37.5,y:0,anchor:[.5,.5]},{id:"snowball-wars/character-happy",url:"snowball-wars/character-lucy/lucy-happy.png",x:40,y:14,anchor:[.5,.5]},{id:"snowball-wars/character-sad",url:"snowball-wars/character-lucy/lucy-sad.png",x:40,y:14,anchor:[.5,.5]},{id:"snowball-wars/character-normal",url:"snowball-wars/character-lucy/lucy-normal.png",x:40,y:14,anchor:[.5,.5]}]},{id:"snowball-wars/character-gun-front",url:"snowball-wars/character-lucy/lucy-gun-front.png",x:42,y:-55,anchor:[.5,.5]}]},{id:"snowball-wars/snowball-wars-lucy-legs-frames",anchor:[.5,1],x:60,y:3,type:"spritesheet",dir:"snowball-wars/character-lucy/snowball-wars-lucy-legs-frames",atlas:"snowball-wars-lucy-legs-frames.json",frames:["snowball-wars-lucy-legs-frame-1.png","snowball-wars-lucy-legs-frame-2.png","snowball-wars-lucy-legs-frame-3.png","snowball-wars-lucy-legs-frame-4.png","snowball-wars-lucy-legs-frame-5.png","snowball-wars-lucy-legs-frame-6.png","snowball-wars-lucy-legs-frame-7.png","snowball-wars-lucy-legs-frame-8.png","snowball-wars-lucy-legs-frame-9.png"]},{id:"snowball-wars/sister-lynn-holder",children:[{id:"snowball-wars/character-gun-back",url:"snowball-wars/character-lynn/lynn-gun-back.png",x:82,y:-52,anchor:[.5,.5]},{id:"snowball-wars/character-back-leg-idle",url:"snowball-wars/character-lynn/lynn-back-leg-idle.png",x:43.5,y:5,anchor:[.5,1]},{id:"snowball-wars/character-hair",url:"snowball-wars/character-lynn/lynn-hair.png",x:70,y:-68,anchor:[.5,.5]},{id:"snowball-wars/character-front-leg-idle",url:"snowball-wars/character-lynn/lynn-front-leg-idle.png",x:61.5,y:10,anchor:[.5,1]},{id:"snowball-wars/character-body",url:"snowball-wars/character-lynn/lynn-body.png",x:59,y:-28,anchor:[.5,1]},{id:"snowball-wars/character-arm-front",url:"snowball-wars/character-lynn/lynn-arm-front.png",x:68,y:-65,anchor:[.5,0]},{id:"snowball-wars/head-holder",anchor:[.5,1],x:65,y:-68,children:[{id:"snowball-wars/character-head",url:"snowball-wars/character-lynn/lynn-head.png",x:44,y:36,anchor:[.5,.5]},{id:"snowball-wars/character-blink",url:"snowball-wars/character-lynn/lynn-blink.png",x:29,y:46.5,anchor:[.5,.5]},{id:"snowball-wars/character-happy",url:"snowball-wars/character-lynn/lynn-happy.png",x:29,y:61,anchor:[.5,.5]},{id:"snowball-wars/character-sad",url:"snowball-wars/character-lynn/lynn-sad.png",x:31.5,y:60,anchor:[.5,.5]},{id:"snowball-wars/character-normal",url:"snowball-wars/character-lynn/lynn-normal.png",x:32,y:58,anchor:[.5,.5]}]},{id:"snowball-wars/character-gun-front",url:"snowball-wars/character-lynn/lynn-gun-front.png",x:42,y:-52,anchor:[.5,.5]}]},{id:"snowball-wars/snowball-wars-lynn-legs-frames",anchor:[.5,1],x:62,y:10,type:"spritesheet",dir:"snowball-wars/character-lynn/snowball-wars-lynn-legs-frames",atlas:"snowball-wars-lynn-legs-frames.json",frames:["snowball-wars-lynn-legs-frame-1.png","snowball-wars-lynn-legs-frame-2.png","snowball-wars-lynn-legs-frame-3.png","snowball-wars-lynn-legs-frame-4.png","snowball-wars-lynn-legs-frame-5.png","snowball-wars-lynn-legs-frame-6.png","snowball-wars-lynn-legs-frame-7.png","snowball-wars-lynn-legs-frame-8.png","snowball-wars-lynn-legs-frame-9.png"]},{id:"snowball-wars/sister-luan-holder",children:[{id:"snowball-wars/character-gun-back",url:"snowball-wars/character-luan/luan-gun-back.png",x:82,y:-59.5,anchor:[.5,.5]},{id:"snowball-wars/character-back-leg-idle",url:"snowball-wars/character-luan/luan-back-leg-idle.png",x:43,y:-2,anchor:[.5,1]},{id:"snowball-wars/character-front-leg-idle",url:"snowball-wars/character-luan/luan-front-leg-idle.png",x:61.5,y:4,anchor:[.5,1]},{id:"snowball-wars/character-skirt",url:"snowball-wars/character-luan/luan-skirt.png",x:60,y:-35,anchor:[.5,1]},{id:"snowball-wars/character-arm-front",url:"snowball-wars/character-luan/luan-arm-front.png",x:67.5,y:-75,anchor:[.5,0]},{id:"snowball-wars/character-body",url:"snowball-wars/character-luan/luan-body.png",x:59,y:-58,anchor:[.5,1]},{id:"snowball-wars/head-holder",anchor:[.5,1],x:65,y:-76,children:[{id:"snowball-wars/character-head",url:"snowball-wars/character-luan/luan-head.png",x:43.5,y:36,anchor:[.5,.5]},{id:"snowball-wars/character-blink",url:"snowball-wars/character-luan/luan-blink.png",x:27,y:42,anchor:[.5,.5]},{id:"snowball-wars/character-happy",url:"snowball-wars/character-luan/luan-happy.png",x:30.5,y:60,anchor:[.5,.5]},{id:"snowball-wars/character-sad",url:"snowball-wars/character-luan/luan-sad.png",x:30,y:61,anchor:[.5,.5]},{id:"snowball-wars/character-normal",url:"snowball-wars/character-luan/luan-normal.png",x:30,y:58,anchor:[.5,.5]}]},{id:"snowball-wars/character-gun-front",url:"snowball-wars/character-luan/luan-gun-front.png",x:42.5,y:-58.5,anchor:[.5,.5]}]},{id:"snowball-wars/snowball-wars-luan-legs-frames",anchor:[.5,1],x:60,type:"spritesheet",dir:"snowball-wars/character-luan/snowball-wars-luan-legs-frames",atlas:"snowball-wars-luan-legs-frames.json",frames:["snowball-wars-luan-legs-frame-1.png","snowball-wars-luan-legs-frame-2.png","snowball-wars-luan-legs-frame-3.png","snowball-wars-luan-legs-frame-4.png","snowball-wars-luan-legs-frame-5.png","snowball-wars-luan-legs-frame-6.png","snowball-wars-luan-legs-frame-7.png","snowball-wars-luan-legs-frame-8.png","snowball-wars-luan-legs-frame-9.png"]},{id:"snowball-wars/sister-luna-holder",children:[{id:"snowball-wars/character-gun-back",url:"snowball-wars/character-luna/luna-gun-back.png",x:82,y:-61.5,anchor:[.5,.5]},{id:"snowball-wars/character-back-leg-idle",url:"snowball-wars/character-luna/luna-back-leg-idle.png",x:47,y:-2,anchor:[.5,1]},{id:"snowball-wars/character-front-leg-idle",url:"snowball-wars/character-luna/luna-front-leg-idle.png",x:64,y:4,anchor:[.5,1]},{id:"snowball-wars/character-skirt",url:"snowball-wars/character-luna/luna-skirt.png",x:59.5,y:-40,anchor:[.5,1]},{id:"snowball-wars/character-body",url:"snowball-wars/character-luna/luna-body.png",x:58,y:-59.5,anchor:[.5,1]},{id:"snowball-wars/character-arm-front",url:"snowball-wars/character-luna/luna-arm-front.png",x:70,y:-80,anchor:[.5,0]},{id:"snowball-wars/head-holder",anchor:[.5,1],x:47,y:-81,children:[{id:"snowball-wars/character-head",url:"snowball-wars/character-luna/luna-head.png",x:41,y:36,anchor:[.5,.5]},{id:"snowball-wars/character-blink",url:"snowball-wars/character-luna/luna-blink.png",x:44,y:28,anchor:[.5,.5]},{id:"snowball-wars/character-happy",url:"snowball-wars/character-luna/luna-happy.png",x:44,y:56.5,anchor:[.5,.5]},{id:"snowball-wars/character-sad",url:"snowball-wars/character-luna/luna-sad.png",x:45.5,y:57,anchor:[.5,.5]},{id:"snowball-wars/character-normal",url:"snowball-wars/character-luna/luna-normal.png",x:43.5,y:56,anchor:[.5,.5]}]},{id:"snowball-wars/character-gun-front",url:"snowball-wars/character-luna/luna-gun-front.png",x:42.5,y:-62,anchor:[.5,.5]}]},{id:"snowball-wars/snowball-wars-luna-legs-frames",anchor:[.5,1],x:60,type:"spritesheet",dir:"snowball-wars/character-luna/snowball-wars-luna-legs-frames",atlas:"snowball-wars-luna-legs-frames.json",frames:["snowball-wars-luna-legs-frame-1.png","snowball-wars-luna-legs-frame-2.png","snowball-wars-luna-legs-frame-3.png","snowball-wars-luna-legs-frame-4.png","snowball-wars-luna-legs-frame-5.png","snowball-wars-luna-legs-frame-6.png","snowball-wars-luna-legs-frame-7.png","snowball-wars-luna-legs-frame-8.png","snowball-wars-luna-legs-frame-9.png"]},{id:"snowball-wars/sister-leni-holder",children:[{id:"snowball-wars/character-gun-back",url:"snowball-wars/character-leni/leni-gun-back.png",x:82,y:-53,anchor:[.5,.5]},{id:"snowball-wars/character-hair",url:"snowball-wars/character-leni/leni-hair.png",x:62,y:-75,anchor:[.5,0]},{id:"snowball-wars/character-back-leg-idle",url:"snowball-wars/character-leni/leni-back-leg-idle.png",x:51.5,y:10,anchor:[.5,1]},{id:"snowball-wars/character-front-leg-idle",url:"snowball-wars/character-leni/leni-front-leg-idle.png",x:64,y:12,anchor:[.5,1]},{id:"snowball-wars/character-body",url:"snowball-wars/character-leni/leni-body.png",x:57,y:-28,anchor:[.5,1]},{id:"snowball-wars/character-arm-front",url:"snowball-wars/character-leni/leni-arm-front.png",x:69,y:-70,anchor:[.5,0]},{id:"snowball-wars/head-holder",anchor:[.5,1],x:55,y:-76,children:[{id:"snowball-wars/character-head",url:"snowball-wars/character-leni/leni-head.png",x:34.5,y:35.5,anchor:[.5,.5]},{id:"snowball-wars/character-blink",url:"snowball-wars/character-leni/leni-blink.png",x:24.5,y:40.5,anchor:[.5,.5]},{id:"snowball-wars/character-happy",url:"snowball-wars/character-leni/leni-happy.png",x:28.5,y:52,anchor:[.5,.5]},{id:"snowball-wars/character-sad",url:"snowball-wars/character-leni/leni-sad.png",x:32.5,y:53,anchor:[.5,.5]},{id:"snowball-wars/character-normal",url:"snowball-wars/character-leni/leni-normal.png",x:32,y:51,anchor:[.5,.5]}]},{id:"snowball-wars/character-gun-front",url:"snowball-wars/character-leni/leni-gun-front.png",x:42.5,y:-53,anchor:[.5,.5]}]},{id:"snowball-wars/snowball-wars-leni-legs-frames",anchor:[.5,1],x:60,y:15,type:"spritesheet",dir:"snowball-wars/character-leni/snowball-wars-leni-legs-frames",atlas:"snowball-wars-leni-legs-frames.json",frames:["snowball-wars-leni-legs-frame-1.png","snowball-wars-leni-legs-frame-2.png","snowball-wars-leni-legs-frame-3.png","snowball-wars-leni-legs-frame-4.png","snowball-wars-leni-legs-frame-5.png","snowball-wars-leni-legs-frame-6.png","snowball-wars-leni-legs-frame-7.png","snowball-wars-leni-legs-frame-8.png","snowball-wars-leni-legs-frame-9.png"]},{id:"snowball-wars/sister-lori-holder",children:[{id:"snowball-wars/character-gun-back",url:"snowball-wars/character-lori/lori-gun-back.png",x:82,y:-65,anchor:[.5,.5]},{id:"snowball-wars/character-hair",url:"snowball-wars/character-lori/lori-hair.png",x:57,y:-75,anchor:[.5,0]},{id:"snowball-wars/character-back-leg-idle",url:"snowball-wars/character-lori/lori-back-leg-idle.png",x:46.5,y:10,anchor:[.5,1]},{id:"snowball-wars/character-skirt",url:"snowball-wars/character-lori/lori-hips.png",x:58,y:-42,anchor:[.5,.5]},{id:"snowball-wars/character-front-leg-idle",url:"snowball-wars/character-lori/lori-front-leg-idle.png",x:67.5,y:12,anchor:[.5,1]},{id:"snowball-wars/character-body",url:"snowball-wars/character-lori/lori-body.png",x:58,y:-54,anchor:[.5,1]},{id:"snowball-wars/character-arm-front",url:"snowball-wars/character-lori/lori-arm-front.png",x:67,y:-83,anchor:[.5,0]},{id:"snowball-wars/head-holder",anchor:[.5,1],x:57,y:-87,children:[{id:"snowball-wars/character-head",url:"snowball-wars/character-lori/lori-head.png",x:43.5,y:35,anchor:[.5,.5]},{id:"snowball-wars/character-blink",url:"snowball-wars/character-lori/lori-blink.png",x:35.5,y:41.5,anchor:[.5,.5]},{id:"snowball-wars/character-happy",url:"snowball-wars/character-lori/lori-happy.png",x:42,y:56.5,anchor:[.5,.5]},{id:"snowball-wars/character-sad",url:"snowball-wars/character-lori/lori-sad.png",x:45,y:56.5,anchor:[.5,.5]},{id:"snowball-wars/character-normal",url:"snowball-wars/character-lori/lori-normal.png",x:45.5,y:54,anchor:[.5,.5]}]},{id:"snowball-wars/character-gun-front",url:"snowball-wars/character-lori/lori-gun-front.png",x:42.5,y:-65,anchor:[.5,.5]}]},{id:"snowball-wars/snowball-wars-lori-legs-frames",anchor:[.5,1],x:60,y:20,type:"spritesheet",dir:"snowball-wars/character-lori/snowball-wars-lori-legs-frames",atlas:"snowball-wars-lori-legs-frames.json",frames:["snowball-wars-lori-legs-frame-1.png","snowball-wars-lori-legs-frame-2.png","snowball-wars-lori-legs-frame-3.png","snowball-wars-lori-legs-frame-4.png","snowball-wars-lori-legs-frame-5.png","snowball-wars-lori-legs-frame-6.png","snowball-wars-lori-legs-frame-7.png","snowball-wars-lori-legs-frame-8.png","snowball-wars-lori-legs-frame-9.png"]}],"hover-drift-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:3},{id:"tutorial-frame-controls",children:[{id:"hover-drift/helpscreen-desktop-controls",url:"hover-drift/helpscreen-desktop-controls.png",x:10,y:30,anchor:[.5,.5],platformspecific:"desktop"},{id:"hover-drift/helpscreen-mobile-controls",url:"hover-drift/helpscreen-mobile-controls.png",x:10,y:30,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"hover-drift/helpscreen-how-to-play",url:"hover-drift/helpscreen-how-to-play.png",x:7,y:50,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"hover-drift/helpscreen-desktop-power-up",url:"hover-drift/helpscreen-desktop-power-up.png",x:47,y:20,anchor:[.5,.5],platformspecific:"desktop"},{id:"hover-drift/helpscreen-mobile-power-up",url:"hover-drift/helpscreen-mobile-power-up.png",x:47,y:20,anchor:[.5,.5],platformspecific:"mobile"}]}],"hover-drift-assets":[{id:"hover-drift/main-holder",x:0,y:0,children:[]},{id:"hover-drift/scale-holder",x:0,y:0,children:[]},{id:"hover-drift/ui-layer",children:[]},{id:"hover-drift/blank-input",url:"hover-drift/blank-input.png"},{id:"hover-drift/course-container",children:[]},{id:"hover-drift/wake-container",children:[]},{id:"hover-drift/fire-container",children:[]},{id:"hover-drift/fire-top-container",children:[]},{id:"hover-drift/hovercraft-container",children:[{url:"hover-drift/hovercraft.png",x:0,y:0,anchor:[.5,.5]},{url:"hover-drift/fan.png",x:0,y:0,anchor:[.5,.1],y:85},{url:"hover-drift/powerup-hoverboat-body.png",x:0,y:0,anchor:[.5,.5]},{id:"hover-drift/powerup-hoverboat-fan-left-container",children:[{url:"hover-drift/powerup-hoverboat-fan-side-left.png",x:0,y:0,anchor:[.5,.5]}]},{id:"hover-drift/powerup-hoverboat-fan-right-container",children:[{url:"hover-drift/powerup-hoverboat-fan-side-right.png",x:0,y:0,anchor:[.5,.5]}]},{url:"hover-drift/powerup-hoverboat-fan.png",x:0,y:0,anchor:[.5,.1],y:85}]},{id:"hover-drift/powerup-effect",children:[{id:"hover-drift/sparkle-1",url:"hover-drift/sparkle-1.png",y:0,anchor:[.5,.5],retina:!1},{id:"hover-drift/sparkle-2",url:"hover-drift/sparkle-2.png",y:0,anchor:[.5,.5],retina:!1}]},{id:"hover-drift/glow",url:"hover-drift/glow.png",y:0,anchor:[.5,.5],retina:!1},{id:"hover-drift/spray-particle-1",url:"waterfall-wipeout/spray-particle-1.png",anchor:[.5,.5],pool:30,retina:!1},{id:"hover-drift/spray-particle-2",url:"waterfall-wipeout/spray-particle-2.png",anchor:[.5,.5],pool:30,retina:!1},{id:"hover-drift/spray-particle-3",url:"waterfall-wipeout/spray-particle-3.png",anchor:[.5,.5],pool:30,retina:!1},{id:"hover-drift/spray-particles-holder",children:[]},{url:"hover-drift/hovercraft-fin.png",x:0,y:0,anchor:[.5,.3],pool:2},{url:"hover-drift/powerup-hoverboat-fin.png",x:0,y:0,anchor:[.5,.3],pool:4},{id:"hover-drift/character-head-dawn",url:"hover-drift/character-head-1.png",x:512,y:335,anchor:[.5,.5]},{id:"hover-drift/character-head-dicky",url:"hover-drift/character-head-2.png",x:512,y:335,anchor:[.5,.5]},{id:"hover-drift/character-head-nicky",url:"hover-drift/character-head-3.png",x:512,y:335,anchor:[.5,.5]},{id:"hover-drift/character-head-ricky",url:"hover-drift/character-head-4.png",x:512,y:335,anchor:[.5,.5]},{id:"hover-drift/left-arm",url:"hover-drift/left-arm.png",x:0,y:0,anchor:[.5,1]},{id:"hover-drift/right-arm",url:"hover-drift/right-arm.png",x:0,y:0,anchor:[.5,1]},{id:"hover-drift/mini-map-holder",x:512,y:90,children:[{id:"hover-drift/mini-map-circles",children:[]},{id:"hover-drift/hovercraft-mini",url:"hover-drift/hoverboat-mini.png",anchor:[.5,.3]}]},{id:"hover-drift/mini-map-circle",url:"hover-drift/mini-map-circle.png",pool:42,anchor:[.5,.5]},{id:"hover-drift/boundry-circle",url:"hover-drift/boundry-circle.png",pool:40,anchor:[.5,.5]},{id:"hover-drift/boundry-rope",url:"hover-drift/boundry-rope.png",pool:38,anchor:[.5,0]},{id:"hover-drift/checkpoint",children:[],pool:2},{id:"hover-drift/checkpoint-pole-bottom",url:"hover-drift/checkpoint-pole-bottom.png",pool:2,anchor:[.5,.5]},{id:"hover-drift/checkpoint-pole-top",url:"hover-drift/checkpoint-pole-top.png",pool:2,anchor:[.5,.5]},{id:"hover-drift/checkpoint-flash",url:"hover-drift/checkpoint-flash.png",pool:2,anchor:[.5,.5]},{id:"hover-drift/checkpoint-shadow",url:"hover-drift/checkpoint-shadow.png",pool:2,anchor:[.5,.5]},{id:"hover-drift/white-square",url:"hover-drift/white-square.png",anchor:[0,0],retina:!1},{id:"hover-drift/dashed-line",url:"hover-drift/dashed-line.png",pool:9,anchor:[0,.5]},{id:"hover-drift/dashed-line-container",children:[]},{id:"hover-drift/circle",url:"hover-drift/boundry-circle.png",anchor:[.5,.5]},{id:"hover-drift/water-texture-holder",children:[]},{url:"hover-drift/water-mark-1.png",pool:10,anchor:[0,.5]},{url:"hover-drift/water-mark-2.png",pool:10,anchor:[0,.5]},{url:"hover-drift/water-mark-3.png",pool:10,anchor:[0,.5]},{id:"hover-drift/shoreline-holder",children:[]},{id:"hover-drift/boundry-background",children:[]},{id:"hover-drift/wake-particle",url:"hover-drift/wake-particle.png",pool:44,retina:!1,anchor:[.5,.5]},{id:"hover-drift/wake-particle-2",url:"hover-drift/wake-particle-2.png",pool:44,retina:!1,anchor:[.5,.5]},{id:"hover-drift/fire-particle",url:"hover-drift/fire-particle.png",pool:20,retina:!1,anchor:[.5,.5]},{id:"hover-drift/fire-particle-top",url:"hover-drift/fire-particle-top.png",pool:20,retina:!1,anchor:[.5,.5]},{id:"hover-drift/score-bg",url:"hover-drift/score-bg.png",anchor:[0,.5]},{id:"hover-drift/health-bar-holder",children:[{id:"hover-drift/health-bar-bg",url:"hover-drift/health-meter-bar-outer.png",y:2,x:50,anchor:[0,.5]},{id:"hover-drift/health-bar-fg2",url:"hover-drift/health-meter-fill-2.png",x:45,anchor:[0,.5]},{id:"hover-drift/health-bar-fg",url:"hover-drift/health-meter-fill.png",x:45,anchor:[0,.5]}]},{id:"hover-drift/health-bar-icon-dawn",url:"hover-drift/health-bar-icon-dawn.png",anchor:[.5,.5]},{id:"hover-drift/health-bar-icon-dicky",url:"hover-drift/health-bar-icon-dicky.png",y:-4,anchor:[.5,.5]},{id:"hover-drift/health-bar-icon-nicky",url:"hover-drift/health-bar-icon-nicky.png",y:-4,anchor:[.5,.5]},{id:"hover-drift/health-bar-icon-ricky",url:"hover-drift/health-bar-icon-ricky.png",y:-2,anchor:[.5,.5]},{id:"hover-drift/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"hover-drift/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"hover-drift/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"timer-font",dir:"timer-font",fontname:"ocr",fontdata:"timer-text.xml",type:"bitmaptext"},{id:"hover-drift/timer-holder",children:[{id:"hover-drift/timer-bg",url:"hover-drift/timer-bg.png",anchor:[.5,.05]},{id:"hover-drift/timer-inner",children:[{id:"hover-drift/timer-icon",url:"hover-drift/timer-icon.png",anchor:[.5,.05]}]}]}],"egg-scape-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:4},{id:"tutorial-frame-controls",children:[{id:"egg-scape/helpscreen-desktop-controls",url:"egg-scape/egg-scape-help-desktop-controls.png",x:8,y:25,anchor:[.5,.5],platformspecific:"desktop"},{id:"egg-scape/helpscreen-mobile-controls",url:"egg-scape/egg-scape-help-mobile-controls.png",x:6,y:32,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"egg-scape/helpscreen-how-to-play",url:"egg-scape/egg-scape-help-how-to-play.png",x:-10,y:40,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"egg-scape/helpscreen-desktop-power-up",url:"egg-scape/egg-scape-help-desktop-power-up.png",x:22,y:15,anchor:[.5,.5],platformspecific:"desktop"},{id:"egg-scape/helpscreen-mobile-power-up",url:"egg-scape/egg-scape-help-mobile-power-up.png",x:22,y:15,anchor:[.5,.5],platformspecific:"mobile"}]}],"egg-scape-assets":[{url:"egg-scape/blank-input.png",retina:!1},{id:"egg-scape/main-holder",x:0,y:0,children:[{id:"egg-scape/cave-bg",x:260,children:[{url:"egg-scape/cave-bg.png"},{url:"egg-scape/cave-glow.png",anchor:[0,0],retina:!1,x:-45,y:-22}]},{id:"egg-scape/shrooms-floor",x:250,y:480,url:"egg-scape/shrooms-floor.png"},{id:"egg-scape/shrooms-ceiling",x:250,y:0,url:"egg-scape/shrooms-ceiling.png"},{id:"egg-scape/shrooms-blue",x:300,y:570,children:[{url:"egg-scape/shroom-blue-1.png",y:35,anchor:[.5,1]},{url:"egg-scape/shroom-blue-2.png",y:7,anchor:[.5,1]},{url:"egg-scape/shroom-blue-3.png",y:5,anchor:[.5,1]},{url:"egg-scape/shroom-blue-4.png",y:11,anchor:[.5,1]},{url:"egg-scape/shroom-blue-5.png",y:15,anchor:[.5,1]},{url:"egg-scape/shroom-blue-6.png",anchor:[.5,1]},{url:"egg-scape/shroom-blue-7.png",y:7,anchor:[.5,1]},{url:"egg-scape/shroom-blue-8.png",y:16,anchor:[.5,1]},{url:"egg-scape/shroom-blue-9.png",y:10,anchor:[.5,1]},{url:"egg-scape/shroom-blue-10.png",y:7,anchor:[.5,1]}]},{id:"egg-scape/shrooms-red",x:300,y:20,children:[{url:"egg-scape/shroom-red-1.png",y:-15,anchor:[.5,0]},{url:"egg-scape/shroom-red-2.png",y:4,anchor:[.5,0]},{url:"egg-scape/shroom-red-3.png",anchor:[.5,0]},{url:"egg-scape/shroom-red-4.png",y:-8,anchor:[.5,0]},{url:"egg-scape/shroom-red-5.png",y:4,anchor:[.5,0]},{url:"egg-scape/shroom-red-6.png",y:5,anchor:[.5,0]},{url:"egg-scape/shroom-red-7.png",y:6,anchor:[.5,0]},{url:"egg-scape/shroom-red-8.png",y:10,anchor:[.5,0]},{url:"egg-scape/shroom-red-9.png",y:8,anchor:[.5,0]},{url:"egg-scape/shroom-red-10.png",y:5,anchor:[.5,0]}]},{id:"egg-scape/cave-floor",x:190,y:535,children:[{url:"egg-scape/cave-floor.png"},{url:"egg-scape/cave-glow-floor.png",retina:!1,x:-14,y:-30}]},{id:"egg-scape/cave-ceiling",x:210,children:[{url:"egg-scape/cave-ceiling.png"},{url:"egg-scape/cave-glow-ceiling.png",retina:!1,x:-25,y:-2}]}]},{id:"egg-scape/score-bg",url:"egg-scape/score-bg.png"},{id:"egg-scape/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"egg-scape/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"egg-scape/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"egg-scape/spores-holder",children:[],pool:10},{id:"egg-scape/spore-1-blue",url:"egg-scape/spore-1-blue.png",pool:100,retina:!1},{id:"egg-scape/spore-1-red",url:"egg-scape/spore-1-red.png",pool:100,retina:!1},{id:"egg-scape/spore-2-blue",url:"egg-scape/spore-2-blue.png",pool:100,retina:!1},{id:"egg-scape/spore-2-red",url:"egg-scape/spore-2-red.png",pool:100,retina:!1},{id:"egg-scape/egg",pool:10,children:[]},{url:"egg-scape/egg.png",anchor:[.5,.5],pool:10},{url:"egg-scape/egg-cracked.png",anchor:[.5,.5],pool:10},{url:"egg-scape/egg-blue-glow.png",anchor:[.5,.5],retina:!1,pool:10},{url:"egg-scape/egg-red-glow.png",anchor:[.5,.5],retina:!1,pool:10},{id:"egg-scape/egg-fragment-1",pool:100,url:"egg-scape/egg-fragment-1.png",anchor:[.5,.5],retina:!1},{id:"egg-scape/egg-fragment-2",pool:100,url:"egg-scape/egg-fragment-2.png",anchor:[.5,.5],retina:!1},{id:"egg-scape/eggs-holder",children:[]},{id:"egg-scape/cloud-holder",children:[]},{id:"egg-scape/cloud",url:"egg-scape/cloud.png",anchor:[.5,.5],pool:5},{id:"egg-scape/scale-holder",x:0,y:0,children:[]},{id:"egg-scape/player-holder",children:[]},{id:"egg-scape/laser-particle-holder",children:[]},{id:"egg-scape/laser-particle",url:"egg-scape/laser-particle.png",pool:20,retina:!1,anchor:[.4,.4]},{url:"egg-scape/sky.png"},{id:"egg-scape/bg",children:[{url:"egg-scape/bg-1.png",x:15,y:236},{url:"egg-scape/bg-2.png",x:0,y:226},{url:"egg-scape/bg-3.png",x:0,y:162},{url:"egg-scape/bg-4.png",x:60,y:274},{url:"egg-scape/bg-5.png",x:0,y:433}]},{url:"egg-scape/glow-mask.png",x:100,retina:!1},{id:"heart-bg/hearts-holder",x:512,y:50,children:[{id:"egg-scape/heart-bg",url:"egg-scape/heart-bg.png",anchor:[.5,.5]}]},{id:"egg-scape/heart-icon",url:"egg-scape/heart-icon.png",anchor:[.5,.5],pool:3},{id:"egg-scape/rail",children:[{id:"egg-scape/rail-1",url:"egg-scape/rail.png",x:0,y:0,anchor:[.5,0]},{id:"egg-scape/rail-2",url:"egg-scape/rail.png",x:0,y:285,anchor:[.5,0]},{id:"egg-scape/rail-3",url:"egg-scape/rail.png",x:0,y:570,anchor:[.5,0]},{id:"egg-scape/rail-car-back",x:-34,children:[{id:"egg-scape/rail-car-cog-top",url:"egg-scape/player-cog.png",y:-65,anchor:[.5,.5]},{id:"egg-scape/rail-car-cog-bottom",url:"egg-scape/player-cog.png",y:65,anchor:[.5,.5]}]},{id:"egg-scape/rail-car-front",children:[{url:"egg-scape/player-rail-car.png",x:38,anchor:[.5,.5]},{id:"egg-scape/powerup-effect",x:140,y:25,children:[{id:"egg-scape/pu-glow",url:"egg-scape/glow.png",y:0,anchor:[.5,.5],retina:!1},{id:"egg-scape/pu-sparkle-1",url:"egg-scape/sparkle-1.png",y:0,anchor:[.5,.5],retina:!1},{id:"egg-scape/pu-sparkle-2",url:"egg-scape/sparkle-2.png",y:0,anchor:[.5,.5],retina:!1}]},{id:"egg-scape/player-gun",x:115,y:38,children:[{id:"egg-scape/gun",children:[{url:"egg-scape/player-gun.png",anchor:[.5,.5]}]},{id:"egg-scape/gun-powerup",children:[{url:"egg-scape/player-gun-powerup.png",x:5,y:-1,anchor:[.5,.5]}]},{id:"egg-scape/gun-flash",children:[{url:"egg-scape/gun-flash.png",x:23,y:-10,anchor:[.5,.5]},{url:"egg-scape/gun-flash-powerup.png",x:23,y:-9,anchor:[.5,.5]}]}]}]}]},{id:"egg-scape/player-arm-front",children:[{url:"egg-scape/player-arm-front-kenzie.png",anchor:[.1,.1]},{url:"egg-scape/player-arm-front-babe.png",anchor:[.1,.1]},{url:"egg-scape/player-arm-front-hudson.png",anchor:[.1,.1]},{url:"egg-scape/player-arm-front-ggg.png",anchor:[.1,.1]}]},{id:"egg-scape/player-arm-back",children:[{url:"egg-scape/player-arm-front-kenzie.png",anchor:[.1,.1]},{url:"egg-scape/player-arm-front-babe.png",anchor:[.1,.1]},{url:"egg-scape/player-arm-front-hudson.png",anchor:[.1,.1]},{url:"egg-scape/player-arm-front-ggg.png",anchor:[.1,.1]}]},{id:"egg-scape/player-head",children:[{url:"egg-scape/player-head-kenzie.png",x:-8,y:13,anchor:[.5,.5]},{url:"egg-scape/player-head-babe.png",x:-2,y:12,anchor:[.5,.5]},{url:"egg-scape/player-head-hudson.png",x:-3,y:5,anchor:[.5,.5]},{url:"egg-scape/player-head-ggg.png",x:-3,y:2,anchor:[.5,.5]}]},{id:"egg-scape/player-head-front",children:[{url:"egg-scape/player-head-kenzie-front.png",x:-6,y:-15,anchor:[.5,.5]},{url:"egg-scape/player-head-babe-front.png",y:-2,anchor:[.5,.5]}]},{id:"egg-scape/player-head-back",children:[{url:"egg-scape/player-head-kenzie-back.png",x:-5,y:13,anchor:[.5,.5]},{url:"egg-scape/player-head-hudson-back.png",x:4,y:10,anchor:[.5,.5]},{url:"egg-scape/player-head-ggg-back.png",x:-5,y:2,anchor:[.5,.5]}]},{id:"egg-scape/player-leg-front",children:[{url:"egg-scape/player-leg-front-kenzie.png",x:-3,y:-3,anchor:[.5,.5]},{url:"egg-scape/player-leg-front-babe.png",x:-1,y:-4,anchor:[.5,.5]},{url:"egg-scape/player-leg-front-hudson.png",anchor:[.5,.5]},{url:"egg-scape/player-leg-front-ggg.png",anchor:[.5,.5]}]},{id:"egg-scape/player-leg-back",children:[{url:"egg-scape/player-leg-back-kenzie.png",x:-4,y:0,anchor:[.5,.5]},{url:"egg-scape/player-leg-back-babe.png",x:-4,y:0,anchor:[.5,.5]},{url:"egg-scape/player-leg-back-hudson.png",anchor:[.5,.5]},{url:"egg-scape/player-leg-back-ggg.png",anchor:[.5,.5]}]},{id:"egg-scape/player-body",children:[{url:"egg-scape/player-body-kenzie.png",anchor:[.5,.5]},{url:"egg-scape/player-body-babe.png",anchor:[.5,.5]},{url:"egg-scape/player-body-hudson.png",anchor:[.5,.5]},{url:"egg-scape/player-body-ggg.png",anchor:[.5,.5]}]},{id:"egg-scape/rect",children:[{url:"egg-scape/rect.png",anchor:[.5,.5],x:70,y:-35}]},{id:"egg-scape/laser-holder",pool:4,children:[]},{id:"egg-scape/laser",url:"egg-scape/laser.png",anchor:[.5,.5],pool:4,retina:!1},{id:"egg-scape/laser-fire-frames",anchor:[0,.5],x:0,y:0,retina:!1,type:"spritesheet",dir:"egg-scape/laser-fire-animation",atlas:"laser-fire-frames.json",frames:["laser-fire-frame-0.png","laser-fire-frame-1.png","laser-fire-frame-2.png","laser-fire-frame-3.png","laser-fire-frame-4.png","laser-fire-frame-5.png","laser-fire-frame-6.png"]}],"abducktion-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:4},{id:"tutorial-frame-controls",children:[{id:"abducktion/help-controls-desktop",url:"abducktion/help-controls-desktop.png",x:-3,y:10,anchor:[.5,.5],platformspecific:"desktop"},{id:"abducktion/help-controls-mobile",url:"abducktion/help-controls-mobile.png",x:-3,y:10,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"abducktion/help-how-to-play",url:"abducktion/help-how-to-play.png",x:9,y:40,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"abducktion/help-power-up-desktop",url:"abducktion/help-power-up-desktop.png",x:18,y:16,anchor:[.5,.5],platformspecific:"desktop"},{id:"abducktion/help-power-up-mobile",url:"abducktion/help-power-up-mobile.png",x:17,y:15,anchor:[.5,.5],platformspecific:"mobile"}]}],"abducktion-assets":[{id:"laser-emiter",url:"abducktion/laser-emiter.png",pool:4,anchor:[0,.5]},{id:"abducktion/platform-mask",url:"abducktion/platform-mask.png",pool:2,anchor:[0,.5]},{id:"abducktion-pop-frames",anchor:[.5,.5],type:"spritesheet",dir:"abducktion/pop-frames",pool:7,atlas:"balloon-frames.json",frames:["abducktion-pop-frame-blank.png","abducktion-pop-frame-1.png","abducktion-pop-frame-2.png","abducktion-pop-frame-3.png","abducktion-pop-frame-4.png","abducktion-pop-frame-5.png","abducktion-pop-frame-6.png","abducktion-pop-frame-7.png","abducktion-pop-frame-8.png","abducktion-pop-frame-9.png","abducktion-pop-frame-blank.png"]},{id:"abducktion/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"abducktion/heart-bg",url:"abducktion/heart-bg.png",anchor:[.5,.5]},{id:"abducktion/heart-icon",url:"abducktion/heart-icon.png",anchor:[.5,.5],pool:3},{id:"abducktion/score-bg",url:"abducktion/score-bg.png",anchor:[0,.5]},{id:"abducktion/joystick-left",children:[{url:"abducktion/joystick-background.png",anchor:[.5,.5]},{url:"abducktion/joystick-foreground.png",anchor:[.5,.5]}]},{id:"abducktion/blank-input",url:"abducktion/blank-input.png"},{id:"abducktion/splash-particle",url:"abducktion/splash-particle.png",pool:200},{id:"game-background-layer-1-container",children:[]},{id:"game-background-layer-2-container",children:[]},{id:"game-background-layer-3-container",children:[]},{id:"game-foreground-layer-1-container",children:[]},{id:"water-splash-1-container",children:[]},{id:"water-splash-2-container",children:[]},{id:"water-splash-3-container",children:[]},{id:"game-scale-container",children:[]},{id:"game-main-container",children:[]},{id:"game-background-container",children:[]},{id:"game-foreground-container",children:[]},{id:"laser-tower",url:"abducktion/laser-tower.png",anchor:[.5,1],pool:2},{id:"laser-warning",url:"abducktion/laser-warning.png",anchor:[.5,.5],pool:2},{id:"laser-beam",url:"abducktion/laser-beam.png",anchor:[.5,.5],pool:2},{id:"timer-container",children:[],pool:10},{id:"timer-outer",url:"abducktion/timer-outer.png",anchor:[.5,.5],pool:10},{id:"timer-full",url:"abducktion/timer-full.png",anchor:[.5,.5],pool:10},{id:"timer-half",url:"abducktion/timer-half.png",anchor:[.5,.5],pool:30},{id:"ufo-outer-container",children:[]},{id:"ufo-inner-container",children:[]},{id:"ufo-beam-triangle",url:"abducktion/ufo-ship-beam-triangle.png",anchor:[.5,1],pool:15},{id:"red-duck",url:"abducktion/red-duck.png",anchor:[.5,.5],pool:10},{id:"blue-duck",url:"abducktion/blue-duck.png",anchor:[.5,.5],pool:10},{id:"duck-shield",url:"abducktion/duck-shield.png",anchor:[.5,.5],pool:10},{id:"duck-shadow",url:"abducktion/duck-shadow.png",anchor:[.5,.5],pool:20},{id:"blank-square",url:"abducktion/blank-square.png",anchor:[.5,.5],pool:10},{id:"background-layer-1",url:"abducktion/background-layer-1.png",anchor:[0,.5],pool:10},{id:"background-layer-2",url:"abducktion/background-layer-2.png",anchor:[0,.5],pool:10},{id:"background-layer-3",url:"abducktion/background-layer-3.png",anchor:[0,.5],pool:10},{id:"foreground-layer-1",url:"abducktion/foreground-layer-1.png",anchor:[0,0],pool:11},{id:"abducktion/river",url:"abducktion/river-back.png",anchor:[0,.5]},{id:"abducktion/sky",url:"abducktion/sky.png",anchor:[0,0]},{id:"abducktion/cloud-1",url:"abducktion/cloud-1.png",pool:5,anchor:[.5,.5]},{id:"abducktion/cloud-2",url:"abducktion/cloud-2.png",pool:5,anchor:[.5,.5]},{id:"abducktion/red-particle-1",url:"abducktion/red-particle-1.png",pool:7,anchor:[.5,.5]},{id:"abducktion/red-particle-2",url:"abducktion/red-particle-2.png",pool:7,anchor:[.5,.5]},{id:"abducktion/red-particle-3",url:"abducktion/red-particle-3.png",pool:7,anchor:[.5,.5]},{id:"abducktion/blue-particle-1",url:"abducktion/blue-particle-1.png",pool:7,anchor:[.5,.5]},{id:"abducktion/blue-particle-2",url:"abducktion/blue-particle-2.png",pool:7,anchor:[.5,.5]},{id:"abducktion/blue-particle-3",url:"abducktion/blue-particle-3.png",pool:7,anchor:[.5,.5]},{id:"river-back-container",children:[]},{id:"abducktion/river-back",url:"abducktion/back-river.png",anchor:[0,.5],pool:5},{id:"platform-base",url:"abducktion/platform-base.png",anchor:[.5,.5]},{id:"platform-base-dark",url:"abducktion/platform-base-dark.png",anchor:[.5,.5]},{id:"portal-container",pool:2,children:[]},{id:"portal-core-red",url:"abducktion/red-portal-core.png",anchor:[.5,.5]},{id:"portal-core-blue",url:"abducktion/blue-portal-core.png",anchor:[.5,.5]},{id:"portal-core-outer",url:"abducktion/portal-core-outer-1.png",pool:2,anchor:[.5,.5]},{id:"portal-core",url:"abducktion/portal-core.png",pool:2,anchor:[.5,.5]},{id:"portal-outer-1",url:"abducktion/portal-outer-1.png",pool:2,anchor:[.5,.5]},{id:"portal-outer-2",url:"abducktion/portal-outer-2.png",pool:2,anchor:[.5,.5]},{id:"portal-outer-3",url:"abducktion/portal-outer-3.png",pool:2,anchor:[.5,.5]},{id:"platform-portal-1",url:"abducktion/platform-portal-1.png",anchor:[.5,.5],pool:2},{id:"platform-portal-2",url:"abducktion/platform-portal-2.png",anchor:[.5,.5],pool:2},{id:"platform-portal-glow",url:"abducktion/portal-glow.png",anchor:[.5,.9],pool:2},{id:"platform-container-1",children:[]},{id:"platform-container-2",children:[]},{id:"platform-particle",url:"abducktion/floating-particle.png",pool:40,anchor:[.5,.5]},{id:"portal-particle",url:"abducktion/portal-particle.png",pool:105,anchor:[.5,.5]},{id:"river-edge-particle",url:"abducktion/river-edge-particle.png",pool:51,anchor:[.5,.5]},{id:"duck-river-particle",url:"abducktion/river-edge-particle.png",pool:51,anchor:[.5,.5]},{id:"ship-shadow",url:"abducktion/ship-shadow.png",pool:3,anchor:[.5,.5]},{id:"beam-particle",url:"abducktion/beam-particle.png",pool:50,anchor:[.5,.5]},{id:"ufo-beam",url:"abducktion/ufo-beam.png",x:200,anchor:[.5,0]},{id:"ufo-beam-base-back",url:"abducktion/ufo-beam-base-back.png",anchor:[.5,.5]},{id:"ufo-beam-base-front",url:"abducktion/ufo-beam-base-back.png",anchor:[.5,.5]},{id:"ufo-shadow",url:"abducktion/ufo-shadow.png",anchor:[.5,0]},{id:"ufo-ship-body",url:"abducktion/ufo-ship-body.png",anchor:[.5,0]},{id:"ufo-ship-body-back",url:"abducktion/ufo-ship-body-back.png",anchor:[.5,0]},{id:"ufo-ship-top",url:"abducktion/ufo-ship-top.png",anchor:[.5,1]},{id:"ufo-character-head-prudence",url:"abducktion/ufo-character-head-prudence.png",anchor:[.5,1]},{id:"ufo-character-head-arc",url:"abducktion/ufo-character-head-arc.png",anchor:[.5,1]},{id:"ufo-character-head-warwick",url:"abducktion/ufo-character-head-warwick.png",anchor:[.5,1]},{id:"ufo-character-head-ciara",url:"abducktion/ufo-character-head-ciara.png",anchor:[.5,1]},{id:"ufo-character-body-prudence",url:"abducktion/ufo-character-body-prudence.png",anchor:[.5,1]},{id:"ufo-character-body-arc",url:"abducktion/ufo-character-body-arc.png",anchor:[.5,1]},{id:"ufo-character-body-warwick",url:"abducktion/ufo-character-body-warwick.png",anchor:[.5,1]},{id:"ufo-character-body-ciara",url:"abducktion/ufo-character-body-ciara.png",anchor:[.5,1]},{id:"ufo-character-arm-prudence",url:"abducktion/ufo-character-arm-prudence.png",anchor:[1,0],pool:2},{id:"ufo-character-arm-arc",url:"abducktion/ufo-character-arm-arc.png",anchor:[1,0],pool:2},{id:"ufo-character-arm-warwick",url:"abducktion/ufo-character-arm-warwick.png",anchor:[1,0],pool:2},{id:"ufo-character-arm-ciara",url:"abducktion/ufo-character-arm-ciara.png",anchor:[1,0],pool:2},{id:"ufo-ship-control-prudence",url:"abducktion/ufo-ship-control-prudence.png",anchor:[.5,1],pool:2},{id:"ufo-ship-control-arc",url:"abducktion/ufo-ship-control-arc.png",anchor:[.5,1],pool:2},{id:"ufo-ship-control-warwick",url:"abducktion/ufo-ship-control-warwick.png",anchor:[.5,1],pool:2},{id:"ufo-ship-control-ciara",url:"abducktion/ufo-ship-control-ciara.png",anchor:[.5,1],pool:2},{id:"ufo-character-eyes",url:"abducktion/ufo-character-eyes.png",anchor:[.5,.5]},{id:"center-dot",url:"abducktion/center-dot.png",pool:2,anchor:[.5,.5]}],"striker-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:4},{id:"tutorial-frame-controls",children:[{id:"striker/help-desktop-controls",url:"striker/help-desktop-controls.png",x:18,y:30,anchor:[.5,.5],platformspecific:"desktop"},{id:"striker/help-mobile-controls",url:"striker/help-mobile-controls.png",x:-10,y:20,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"striker/help-how-to-play",url:"striker/help-how-to-play.png",x:-17,y:30,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"striker/help-desktop-power-up",url:"striker/help-desktop-power-up.png",x:0,y:20,anchor:[.5,.5],platformspecific:"desktop"},{id:"striker/help-mobile-power-up",url:"striker/help-mobile-power-up.png",x:0,y:20,anchor:[.5,.5],platformspecific:"mobile"}]}],"striker-assets":[{id:"striker/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"striker/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"striker/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"striker/time-add-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"striker/time-add-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"striker/time-add-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"striker/score-bg",url:"striker/score-bg.png"},{id:"striker/time-add-text-holder",children:[]},{url:"striker/sky.png",y:-30,retina:!1},{id:"striker/physics-object-holder",children:[{id:"striker/physics-object",url:"striker/physics-object.png",anchor:[.5,.5]}]},{url:"striker/blank-input.png",retina:!1},{id:"striker/main-holder",children:[]},{id:"striker/scale-holder",children:[]},{id:"striker/bg-layer-4",children:[{url:"striker/bg-4.png",x:512,y:440,anchor:[.5,.5]}]},{id:"striker/bg-layer-3",children:[{url:"striker/bg-3.png",x:512,y:415,anchor:[.5,.5]}]},{id:"striker/bg-layer-2",children:[{url:"striker/bg-2.png",x:512,y:470,anchor:[.5,.5]}]},{id:"striker/bg-layer-1",children:[{url:"striker/bg-1.png",x:512,y:535,anchor:[.5,.5]}]},{id:"striker/bg-layer-0",children:[{url:"striker/bg-0.png",x:512,y:610,anchor:[.5,.5]}]},{id:"striker/pipes",children:[]},{id:"striker/player-layer",children:[{id:"striker/player",x:270,y:330,children:[{url:"striker/henry-arms-back.png",x:60,y:75},{id:"striker/henry-head-back",children:[{url:"striker/henry-head-back.png",x:21,y:20}]},{url:"striker/henry-body.png",x:0,y:41},{url:"striker/henry-arms.png",x:7,y:72},{id:"striker/henry-head-front",children:[{url:"striker/henry-head-front.png",x:21,y:0},{url:"striker/henry-eyes.png",x:56,y:36,anchor:[.5,.5]},{url:"striker/henry-lids-half-closed.png",x:43,y:30},{url:"striker/henry-lids-closed.png",x:43,y:30},{id:"striker/henry-mouth",x:45,y:48,children:[{url:"striker/henry-mouth-normal.png"},{url:"striker/henry-mouth-tense.png",x:3,y:1},{url:"striker/henry-mouth-happy.png",x:1,y:1}]}]}]}]},{id:"striker/pipe",children:[],pool:18},{url:"striker/pipe-bg-1.png",anchor:[.5,.5],pool:9},{url:"striker/pipe-bg-1-lit.png",anchor:[.5,.5],pool:9},{url:"striker/pipe-fg-1.png",anchor:[.5,1],pool:9},{url:"striker/pipe-bg-2.png",anchor:[.5,.5],pool:9},{url:"striker/pipe-bg-2-lit.png",anchor:[.5,.5],pool:9},{url:"striker/pipe-fg-2.png",anchor:[.5,1],pool:9},{url:"striker/pipe-glow.png",anchor:[.5,.5],pool:18},{url:"striker/pipe-decoration-1.png",anchor:[.5,.5],pool:6},{url:"striker/pipe-decoration-2.png",anchor:[.5,.5],pool:6},{url:"striker/pipe-decoration-3.png",anchor:[.5,.5],pool:6},{id:"striker/spores-holder",children:[],pool:10},{id:"striker/spore-1",url:"striker/spore-1.png",pool:100},{id:"striker/spore-2",url:"striker/spore-2.png",pool:100},{id:"timer-font",dir:"timer-font",fontname:"ocr",fontdata:"timer-text.xml",type:"bitmaptext"},{id:"striker/timer-holder",children:[{id:"striker/timer-bg",url:"striker/timer-bg.png",anchor:[.5,.05]},{id:"striker/timer-inner",children:[{id:"striker/timer-icon",url:"striker/timer-icon.png",anchor:[.5,.05]}]}]},{id:"striker/drones-holder",children:[]},{id:"striker/drone-holder",x:-100,y:-100,children:[{id:"striker/drone-frame",url:"striker/drone-frame.png",y:-57,anchor:[.5,.5]},{id:"striker/drone-prop-left",url:"striker/drone-prop.png",x:-50,y:-80,anchor:[.5,.5]},{id:"striker/drone-prop-left-top",url:"striker/drone-prop.png",x:-50,y:-80,anchor:[.5,.5]},{id:"striker/drone-prop-right",url:"striker/drone-prop.png",x:50,y:-80,anchor:[.5,.5]},{id:"striker/drone-prop-right-top",url:"striker/drone-prop.png",x:50,y:-80,anchor:[.5,.5]},{url:"striker/light-blue.png",y:-60,x:21.5,anchor:[.5,.5]},{url:"striker/light-red.png",y:-60,x:27,anchor:[.5,.5]}]},{id:"striker/drone-basket",x:-100,y:-100,children:[{url:"striker/drone-basket.png",y:-5,anchor:[.5,.1]},{url:"striker/drone-basket-powerup.png",y:-5,anchor:[.5,.1]},{url:"striker/drone-rope.png",y:10,anchor:[.5,1]},{id:"striker/powerup-effect",x:0,y:25,children:[{id:"striker/pu-glow",url:"striker/glow.png",y:0,anchor:[.5,.5],retina:!1},{id:"striker/pu-sparkle-1",url:"striker/sparkle-1.png",y:0,anchor:[.5,.5],retina:!1},{id:"striker/pu-sparkle-2",url:"striker/sparkle-2.png",y:0,anchor:[.5,.5],retina:!1}]}]},{url:"striker/drone-bomb.png",x:-100,y:100,anchor:[.5,.5]},{id:"striker/drone-basket-front",children:[{url:"striker/drone-basket-front.png",y:30,anchor:[.5,.5]},{url:"striker/drone-basket-front-powerup.png",y:30,anchor:[.5,.5]},{id:"striker/light-yellow-1",y:30,url:"striker/light-yellow.png",anchor:[.5,.5]},{id:"striker/light-yellow-2",y:36,url:"striker/light-yellow-2.png",anchor:[.5,.5]},{id:"striker/light-yellow-3",y:42,url:"striker/light-yellow-2.png",anchor:[.5,.5]}]},{id:"striker/seed-holder",children:[]},{id:"striker/seed",url:"striker/seed.png",anchor:[.5,.4],pool:10},{id:"striker/cloud-holder",children:[]},{id:"striker/cloud",url:"striker/cloud.png",anchor:[.5,.5],pool:10},{id:"striker/seed",url:"striker/seed.png",anchor:[.5,.3],pool:10},{id:"striker/seed-particle-holder",children:[]},{id:"striker/seed-particle-1",url:"striker/bomb-particle-1.png",anchor:[.5,.5],pool:50,retina:!1},{id:"striker/seed-particle-2",url:"striker/bomb-particle-2.png",anchor:[.5,.5],pool:50,retina:!1},{id:"striker/bomb-particle-holder",children:[]},{id:"striker/bomb-particle-1",url:"striker/bomb-particle-1.png",anchor:[.2,.2],pool:15},{id:"striker/bomb-particle-2",url:"striker/bomb-particle-2.png",anchor:[.2,.2],pool:15},{id:"striker/tower-layer",children:[]},{id:"striker/bell-tower-holder",x:512,y:570,children:[{url:"striker/marker-back.png",x:55,y:0,anchor:[.5,1]},{id:"striker/bell-tower",children:[{url:"striker/bell-tower.png",anchor:[.5,1]},{id:"striker/lights-holder",children:[]}]},{id:"striker/bell-holder",y:-150,children:[{url:"striker/bell-shadow.png",y:25,anchor:[.5,.5]},{url:"striker/bell.png",y:0,anchor:[.5,.5]}]},{id:"striker/marker",x:36,children:[{url:"striker/marker-hammer.png",x:30,y:-49,anchor:[.5,1]},{url:"striker/marker-spring.png",x:34,y:-38,anchor:[.5,1]},{url:"striker/marker.png",x:-33,anchor:[0,1]}]}]},{id:"striker/bell-tower-base",x:512,y:620,children:[{url:"striker/tower-base.png",y:-40,anchor:[.5,.5]},{url:"striker/button-shadow.png",y:-70,anchor:[.5,.5]},{url:"striker/button.png",y:-60,anchor:[.5,1]}]},{id:"striker/tower-glow",children:[],pool:28},{url:"striker/tower-glow-white.png",anchor:[.5,.5],pool:28,retina:!1},{url:"striker/tower-glow.png",anchor:[.5,.5],pool:28,retina:!1}],"crazy-golf-tutorial-assets":[{id:"tutorial/title-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",pool:3,alphabet:"latin"},{id:"tutorial/title-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",pool:3,alphabet:"cyrillic"},{id:"tutorial/title-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",pool:3,alphabet:"greek"},{id:"tutorial-panel-bg",url:"ui/helpscreen-bg.png",anchor:[.5,.5],pool:4},{id:"tutorial-frame-controls",children:[{id:"tutorial/crazy-golf/help-desktop-controls",url:"crazy-golf/help-desktop-controls.png",x:0,y:0,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/crazy-golf/help-mobile-controls",url:"crazy-golf/help-mobile-controls.png",x:0,y:5,anchor:[.5,.5],platformspecific:"mobile"}]},{id:"tutorial-frame-howtoplay",children:[{id:"tutorial/crazy-golf/help-how-to-play",url:"crazy-golf/help-how-to-play.png",x:37,y:42,anchor:[.5,.5]}]},{id:"tutorial-frame-powerups",children:[{id:"tutorial/crazy-golf/help-desktop-power-up",url:"crazy-golf/help-desktop-power-up.png",x:-10,y:10,anchor:[.5,.5],platformspecific:"desktop"},{id:"tutorial/crazy-golf/help-mobile-power-up",url:"crazy-golf/help-mobile-power-up.png",x:-10,y:10,anchor:[.5,.5],platformspecific:"mobile"}]}],"crazy-golf-assets":[{id:"crazy-golf/score-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"crazy-golf/score-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"crazy-golf/score-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"crazy-golf/door-font",dir:"tickets-font-latin",fontname:"bah",fontdata:"tickets-font-latin.xml",type:"bitmaptext",alphabet:"latin"},{id:"crazy-golf/door-font",dir:"tickets-font-cyrillic",fontname:"rex",fontdata:"tickets-font-cyrillic.xml",type:"bitmaptext",alphabet:"cyrillic"},{id:"crazy-golf/door-font",dir:"tickets-font-greek",fontname:"cod",fontdata:"tickets-font-greek.xml",type:"bitmaptext",alphabet:"greek"},{id:"crazy-golf/score-bg",url:"crazy-golf/score-bg.png",x:-90,y:163},{id:"crazy-golf/balls-bg",url:"crazy-golf/score-bg.png",x:-30,y:0},{id:"crazy-golf/cloud",url:"crazy-golf/cloud.png",anchor:[.5,.5],pool:10,retina:!1},{id:"crazy-golf/ceiling-holder",children:[]},{id:"crazy-golf/ceiling-chunk",url:"crazy-golf/ceiling-chunk.png",anchor:[0,.97],pool:15},{id:"crazy-golf/golf-ball-holder",children:[]},{url:"crazy-golf/blank-input.png",retina:!1},{id:"crazy-golf/golf-balls-ui",x:35,y:37,children:[]},{id:"crazy-golf/golf-ball",url:"crazy-golf/golf-ball.png",anchor:[.5,.5],pool:13},{id:"crazy-golf/golf-ball-trail-holder",children:[]},{id:"crazy-golf/golf-ball-trail",x:-100,url:"crazy-golf/golf-ball-trail.png",anchor:[.5,.5],pool:150,retina:!1},{id:"crazy-golf/fire-particle-holder",children:[]},{url:"crazy-golf/fire-particle.png",anchor:[.5,.5],retina:!1,pool:170},{id:"crazy-golf/block-fire-particle-holder",children:[],pool:3},{id:"crazy-golf/water-particle-holder",children:[]},{url:"crazy-golf/water-particle.png",anchor:[.5,.5],retina:!1,pool:20},{id:"crazy-golf/doors",children:[{id:"crazy-golf/door-bottom-holder",children:[{id:"crazy-golf/door-bottom",url:"crazy-golf/door-bottom.png",anchor:[0,0]},{id:"crazy-golf/left-bottom-piston",children:[{id:"crazy-golf/piston-base-bottom-left-back",url:"crazy-golf/piston-base-bottom-back.png"},{id:"crazy-golf/piston-tube-bottom-left",url:"crazy-golf/piston-tube-bottom.png"},{id:"crazy-golf/piston-base-bottom-left",url:"crazy-golf/piston-base-bottom.png"}]},{id:"crazy-golf/right-bottom-piston",children:[{id:"crazy-golf/piston-base-bottom-right-back",url:"crazy-golf/piston-base-bottom-back.png"},{id:"crazy-golf/piston-tube-bottom-right",url:"crazy-golf/piston-tube-bottom.png"},{id:"crazy-golf/piston-base-bottom-right",url:"crazy-golf/piston-base-bottom.png"}]}]},{id:"crazy-golf/door-top-holder",children:[{id:"crazy-golf/door-top",url:"crazy-golf/door-top.png",anchor:[0,1]},{id:"crazy-golf/left-top-piston",children:[{id:"crazy-golf/piston-tube-top-left",url:"crazy-golf/piston-tube-top.png"},{id:"crazy-golf/piston-base-top-left",url:"crazy-golf/piston-base-top.png"}]},{id:"crazy-golf/right-top-piston",children:[{id:"crazy-golf/piston-tube-top-right",url:"crazy-golf/piston-tube-top.png"},{id:"crazy-golf/piston-base-top-right",url:"crazy-golf/piston-base-top.png"}]}]}]},{id:"crazy-golf/input-holder",children:[]},{id:"crazy-golf/ui-holder",children:[]},{id:"crazy-golf/scale-holder",children:[]},{id:"crazy-golf/bg4-holder",children:[{url:"crazy-golf/sky.png",x:512,y:300,anchor:[.5,.5],retina:!1}]},{id:"crazy-golf/bg3-holder",children:[{url:"crazy-golf/bg-3.png",x:600,y:380,anchor:[.5,.5],retina:!1}]},{id:"crazy-golf/bg2-holder",children:[{url:"crazy-golf/bg-2.png",x:850,y:540,anchor:[.5,.5],retina:!1}]},{id:"crazy-golf/bg1-holder",children:[{url:"crazy-golf/back-wall.png",x:400,y:-60},{url:"crazy-golf/back-wall-highlight.png",x:400,y:-60}]},{url:"crazy-golf/shine-mask.png",x:500,y:-500,retina:!1},{id:"crazy-golf/main-holder",children:[]},{id:"crazy-golf/golf-ball",url:"crazy-golf/golf-ball.png",anchor:[.5,.5]},{id:"crazy-golf/player-holder",children:[{id:"crazy-golf/player",children:[{id:"crazy-golf/head-back",url:"crazy-golf/player-head-back.png",x:-1,y:-60,anchor:[.5,.64]},{id:"crazy-golf/legs",url:"crazy-golf/player-legs.png",y:-7,anchor:[.5,.1]},{id:"crazy-golf/body",url:"crazy-golf/player-body.png",y:-8,anchor:[.5,.9]},{id:"crazy-golf/golf-club",url:"crazy-golf/player-golf-club.png",y:-56,anchor:[.5,.1]},{id:"crazy-golf/body-overlay",url:"crazy-golf/player-body-overlay.png",y:-40,anchor:[.5,.9]},{id:"crazy-golf/head-front",url:"crazy-golf/player-head-front.png",x:-1,y:-60,anchor:[.5,.64]}]},{id:"crazy-golf/golf-tee",url:"crazy-golf/tee.png",x:10,y:58,anchor:[.5,1]}]},{id:"crazy-golf/golf-platform",children:[{url:"crazy-golf/golf-platform.png",anchor:[.5,.5]}]},{id:"crazy-golf/aiming-ui",x:200,y:407,children:[{id:"crazy-golf/aim-line",x:-130,children:[{url:"crazy-golf/aim-line-glow.png",anchor:[-.04,.5]},{url:"crazy-golf/aim-line.png",anchor:[-.04,.5]}]},{id:"crazy-golf/aiming-point",children:[{url:"crazy-golf/aiming-ring-fill.png",anchor:[.5,.5]},{url:"crazy-golf/aiming-point.png",anchor:[.5,.5]},{url:"crazy-golf/aiming-ring.png",anchor:[.5,.5]}]},{id:"crazy-golf/hint-arrows",x:30,y:25,children:[{id:"crazy-golf/hint-arrow-up",y:-50,children:[{url:"crazy-golf/hint-arrow-glow.png",anchor:[.5,.5]},{url:"crazy-golf/hint-arrow-line.png",anchor:[.5,.5]}]},{id:"crazy-golf/hint-arrow-down",children:[{url:"crazy-golf/hint-arrow-glow.png",anchor:[.5,.5]},{url:"crazy-golf/hint-arrow-line.png",anchor:[.5,.5]}]}]}]},{id:"crazy-golf/power-ui",x:750,y:548,children:[{id:"crazy-golf/power-fill-back",url:"crazy-golf/power-fill-bg.png",anchor:[.12,.67]},{id:"crazy-golf/power-fill-last",url:"crazy-golf/power-fill-last.png",anchor:[.12,.67]},{id:"crazy-golf/power-fill",url:"crazy-golf/power-fill.png",anchor:[.12,.67]},{url:"crazy-golf/power-line.png",anchor:[.12,.67]}]},{id:"crazy-golf/water-back",y:555,children:[]},{id:"crazy-golf/water-front",y:555,children:[]},{id:"crazy-golf/ceiling",url:"crazy-golf/grey-box.png",anchor:[.5,1]},{id:"crazy-golf/water-bottom",url:"crazy-golf/white-box.png"},{id:"crazy-golf/water-fade",url:"crazy-golf/water-fade.png"},{id:"crazy-golf/back-wall",url:"crazy-golf/grey-box.png",anchor:[1,1]},{id:"crazy-golf/grey-box",url:"crazy-golf/grey-box.png",anchor:[.5,.5]},{id:"crazy-golf/platform-holder-front",children:[]},{id:"crazy-golf/platform-holder-back",children:[]},{id:"crazy-golf/backboard-front",children:[{id:"crazy-golf/backboard-cross-top",url:"crazy-golf/backboard-cross.png",anchor:[.38,.73],x:0,y:-40},{id:"crazy-golf/backboard-cross-bottom",url:"crazy-golf/backboard-cross.png",anchor:[.38,.73],x:0,y:44},{url:"crazy-golf/backboard.png",anchor:[.5,.5]}]},{id:"crazy-golf/backboard-back",children:[{id:"crazy-golf/backboard-back",url:"crazy-golf/backboard-back.png",anchor:[.5,.5]}]},{id:"crazy-golf/gravity-field-chunks-holder",children:[],pool:3},{id:"crazy-golf/gravity-field-chunk",url:"crazy-golf/gravity-field-chunk.png",pool:12,anchor:[.5,.5]},{id:"crazy-golf/orange-box",url:"crazy-golf/orange-box.png",anchor:[.5,.5]},{id:"crazy-golf/shine-mask",url:"crazy-golf/shine-mask.png",anchor:[.5,0],retina:!1},{id:"crazy-golf/block-back",url:"crazy-golf/block.png",pool:3,anchor:[.5,.5]},{id:"crazy-golf/block-glow-back",url:"crazy-golf/block-glow-back.png",pool:3,anchor:[.5,.5]},{id:"crazy-golf/block-glow-back-red",url:"crazy-golf/block-glow-back-red.png",pool:3,anchor:[.5,.5]},{id:"crazy-golf/block-front",url:"crazy-golf/block-front.png",pool:3,anchor:[.5,.5]},{id:"crazy-golf/block-glow-front",url:"crazy-golf/block-glow-front.png",pool:3,anchor:[.5,.5]},{id:"crazy-golf/block-glow-front-red",url:"crazy-golf/block-glow-front-red.png",pool:3,anchor:[.5,.5]},{id:"crazy-golf/block-shadow",url:"crazy-golf/block-shadow.png",pool:3,anchor:[.5,.5]},{id:"crazy-golf/portal-particles-in-holder",children:[]},{id:"crazy-golf/portal-particles-out-holder",children:[]},{id:"crazy-golf/portal-in",x:-1e3,children:[{url:"crazy-golf/portal.png",anchor:[.5,.5]},{url:"crazy-golf/portal-centre.png",x:2,anchor:[.5,.5]}]},{id:"crazy-golf/portal-out",x:-1e3,children:[{url:"crazy-golf/portal.png",anchor:[.5,.5]},{url:"crazy-golf/portal-centre.png",x:2,anchor:[.5,.5]}]},{id:"crazy-golf/goal-platform-back",children:[{url:"crazy-golf/goal-platform-back.png",x:-92,y:-72},{id:"crazy-golf/flag-holder",children:[{url:"crazy-golf/flag.png",anchor:[.5,1]}]}]},{id:"crazy-golf/goal-platform-front",children:[{url:"crazy-golf/goal-platform-front.png",x:-92,y:-54}]},{id:"crazy-golf/block-particle-holder",children:[],pool:3},{id:"crazy-golf/block-particle-1",url:"crazy-golf/block-piece-1.png",anchor:[.5,.5],pool:6},{id:"crazy-golf/block-particle-2",url:"crazy-golf/block-piece-2.png",anchor:[.5,.5],pool:6},{id:"crazy-golf/block-particle-3",url:"crazy-golf/block-piece-3.png",anchor:[.5,.5],pool:6},{url:"crazy-golf/shell-back.png",anchor:[.5,1]},{url:"crazy-golf/shell-front.png",anchor:[.5,1]},{id:"crazy-golf/gravity-particle-holder",children:[],pool:3},{id:"crazy-golf/gravity-field-holder",children:[],pool:3},{id:"crazy-golf/gravity-particle",url:"crazy-golf/gravity-particle.png",pool:400,anchor:[.9,.5],retina:!1},{id:"crazy-golf/anim-water-wave/gravity-golf-water-wave",pool:14,type:"spritesheet",dir:"crazy-golf/anim-water-wave",atlas:"gravity-golf-water-wave.json",frames:["gravity-golf-water-wave-1.png","gravity-golf-water-wave-2.png","gravity-golf-water-wave-3.png","gravity-golf-water-wave-4.png","gravity-golf-water-wave-5.png","gravity-golf-water-wave-6.png","gravity-golf-water-wave-7.png","gravity-golf-water-wave-8.png","gravity-golf-water-wave-9.png","gravity-golf-water-wave-10.png","gravity-golf-water-wave-11.png","gravity-golf-water-wave-12.png","gravity-golf-water-wave-13.png","gravity-golf-water-wave-14.png","gravity-golf-water-wave-15.png","gravity-golf-water-wave-16.png","gravity-golf-water-wave-17.png"]},{id:"crazy-golf/anim-water-wave/gravity-golf-splash",retina:!1,anchor:[.5,.5],type:"spritesheet",dir:"crazy-golf/anim-splash",atlas:"gravity-golf-splash.json",frames:["gravity-golf-splash-0.png","gravity-golf-splash-1.png","gravity-golf-splash-2.png","gravity-golf-splash-3.png","gravity-golf-splash-4.png","gravity-golf-splash-5.png","gravity-golf-splash-6.png","gravity-golf-splash-7.png","gravity-golf-splash-8.png","gravity-golf-splash-9.png","gravity-golf-splash-10.png","gravity-golf-splash-11.png","gravity-golf-splash-12.png","gravity-golf-splash-13.png","gravity-golf-splash-0.png"]}]},audioAssets={"global-audio":[{url:"button-click-ui.mp3"},{url:"enjoy-the-ride-swoosh.mp3"},{url:"enjoy-the-ride-thud.mp3"},{url:"ticket.mp3"},{url:"health.mp3"},{url:"power-up.mp3"},{url:"scale-up.mp3"},{url:"scale-down.mp3"}],"hub-audio":[{url:"hub-scene/hub-music.mp3",loop:!0},{url:"hub-scene/waves-looping.mp3",loop:!0},{url:"hub-scene/game-select-swoosh.mp3"},{url:"hub-scene/game-deselect-swoosh.mp3"},{url:"hub-scene/sign-up.mp3"},{url:"hub-scene/sign-down.mp3"},{url:"hub-scene/tick.mp3"},{url:"hub-scene/game-locked.mp3"}],"hub-volcano-island-audio":[{url:"hub-scene/game-select-roller-coaster-doom.mp3"},{url:"hub-scene/island-volcano.mp3"},{url:"hub-scene/max-enemies.mp3",loc:!0},{url:"hub-scene/phoebe-woop.mp3",loc:!0},{url:"hub-scene/donnie-were-awesome.mp3",loc:!0},{url:"hub-scene/mikey-oh-yeah.mp3",loc:!0},{url:"hub-scene/raph-enough-talk.mp3",loc:!0},{url:"hub-scene/leo-hooowho.mp3",loc:!0}],"hub-jungle-island-audio":[{url:"hub-scene/game-select-river-rangers.mp3"},{url:"hub-scene/island-jungle.mp3"},{url:"hub-scene/spongebob-woah.mp3",loc:!0},{url:"hub-scene/nicky-drumroll.mp3",loc:!0},{url:"hub-scene/ricky-ah-impressive.mp3",loc:!0},{url:"hub-scene/dicky-hey-man.mp3",loc:!0},{url:"hub-scene/dawn-leave-it-to-me.mp3",loc:!0},{url:"hub-scene/linc-awesome.mp3",loc:!0},{url:"hub-scene/i-am-frankie.mp3",loc:!0}],"hub-beach-island-audio":[{url:"hub-scene/game-select-beach-buggy.mp3"},{url:"hub-scene/island-beach.mp3"},{url:"hub-scene/babe-here-i-come.mp3",loc:!0},{url:"hub-scene/hudson-gameshakers.mp3",loc:!0},{url:"hub-scene/kenzie.mp3",loc:!0},{url:"hub-scene/triple-yeyahh.mp3",loc:!0},{url:"hub-scene/freddie-ha-ha.mp3",loc:!0},{url:"hub-scene/lawrence-i-got-this.mp3",loc:!0},{url:"hub-scene/summer-got-this.mp3",loc:!0},{url:"hub-scene/tomika-ready.mp3",loc:!0},{url:"hub-scene/zack-school-of-rock.mp3",loc:!0}],"hub-ice-island-audio":[{url:"hub-scene/game-select-dodgems.mp3"},{url:"hub-scene/island-arctic.mp3"},{url:"hub-scene/henry-lets-go.mp3",loc:!0},{url:"hub-scene/babe-here-i-come.mp3",loc:!0},{url:"hub-scene/hudson-gameshakers.mp3",loc:!0},{url:"hub-scene/kenzie.mp3",loc:!0},{url:"hub-scene/triple-yeyahh.mp3",loc:!0},{url:"hub-scene/patrick-laughing.mp3",loc:!0}],"hub-asteroid-island-audio":[{url:"hub-scene/island-asteroid.mp3"},{url:"hub-scene/henry-lets-go.mp3",loc:!0},{url:"hub-scene/babe-here-i-come.mp3",loc:!0},{url:"hub-scene/hudson-gameshakers.mp3",loc:!0},{url:"hub-scene/kenzie.mp3",loc:!0},{url:"hub-scene/triple-yeyahh.mp3",loc:!0},{url:"hub-scene/henry-lets-go.mp3",loc:!0},{url:"hub-scene/warwick-positive-1.mp3",loc:!0},{url:"hub-scene/prudence-positive-1.mp3",loc:!0},{url:"hub-scene/ciara-positive-1.mp3",loc:!0},{url:"hub-scene/arc-positive-1.mp3",loc:!0},{url:"hub-scene/i-am-frankie.mp3",loc:!0},{url:"hub-scene/lena-i-love-it.mp3",loc:!0}],"gift-shop-audio":[{url:"gift-shop/giftshop-music.mp3",loop:!0},{url:"gift-shop/camera-flash.mp3"},{url:"gift-shop/camera-beep.mp3"},{url:"gift-shop/swoosh-select.mp3"},{url:"gift-shop/swoosh-deselect.mp3"},{url:"gift-shop/photo-ding.mp3"},{url:"gift-shop/sign-down.mp3"},{url:"gift-shop/swish-long-1.mp3"},{url:"gift-shop/swish-long-2.mp3"},{url:"gift-shop/swish-long-3.mp3"},{url:"gift-shop/goop-1.mp3"},{url:"gift-shop/goop-2.mp3"},{url:"gift-shop/splash-1.mp3"},{url:"gift-shop/splash-2.mp3"}],"gift-shop-audio-game-shakers":[{url:"gift-shop/babe-here-i-come.mp3",loc:!0},{url:"gift-shop/babe-woo.mp3",loc:!0},{url:"gift-shop/triple-selfie.mp3",loc:!0},{url:"gift-shop/triple-yeyahh.mp3",loc:!0}],"gift-shop-audio-spongebob":[{url:"gift-shop/spongebob-hungry.mp3",loc:!0},{url:"gift-shop/spongebob-mustard.mp3",loc:!0},{url:"gift-shop/patrick-ketchup.mp3",loc:!0},{url:"gift-shop/patrick-laughing.mp3",loc:!0}],"gift-shop-audio-henry-danger":[{url:"gift-shop/henry-lets-go.mp3",loc:!0},{url:"gift-shop/captain-fun.mp3",loc:!0},{url:"gift-shop/captain-man-starring.mp3",loc:!0},{url:"gift-shop/captain-man-hair.mp3",loc:!0}],"gift-shop-audio-thundermans":[{url:"gift-shop/max-enemies.mp3",loc:!0},{url:"gift-shop/phoebe-woop.mp3",loc:!0},{url:"gift-shop/max-im-the-best.mp3",loc:!0},{url:"gift-shop/phoebe-no-problem-too-small.mp3",loc:!0},{url:"gift-shop/phoebe-step-aside.mp3",loc:!0}],"gift-shop-audio-school-of-rock":[{url:"gift-shop/tomika-ready.mp3",loc:!0},{url:"gift-shop/tomika-nothings-gonna-stop-us-now.mp3",loc:!0},{url:"gift-shop/zack-school-of-rock.mp3",loc:!0}],"gift-shop-audio-loud-house":[{url:"gift-shop/linc-its-go-time.mp3",loc:!0},{url:"gift-shop/linc-yes.mp3",loc:!0},{url:"gift-shop/luna-negative-2.mp3",loc:!0}],"gift-shop-audio-tmnt":[{url:"gift-shop/leo-celebrate.mp3",loc:!0},{url:"gift-shop/leo-hooowho.mp3",loc:!0},{url:"gift-shop/raph-amazing.mp3",loc:!0},{url:"gift-shop/raph-enough-talk.mp3",loc:!0}],"gift-shop-audio-nicky-ricky-dicky-dawn":[{url:"gift-shop/nicky-drumroll.mp3",loc:!0},{url:"gift-shop/nicky-make-it-snappy.mp3",loc:!0},{url:"gift-shop/dawn-leave-it-to-me.mp3",loc:!0},{url:"gift-shop/dawn-ooo.mp3",loc:!0}],"gift-shop-audio-i-am-frankie":[{url:"gift-shop/frankie-making-you-like-me.mp3",loc:!0},{url:"gift-shop/frankie-some-assistance.mp3",loc:!0}],"gift-shop-audio-find-me-in-paris":[{url:"gift-shop/lena-i-love-it.mp3",loc:!0},{url:"gift-shop/lena-laugh.mp3",loc:!0}],"gift-shop-audio-knight-squad":[{url:"gift-shop/arc-positive-4.mp3",loc:!0},{url:"gift-shop/ciara-positive-2.mp3",loc:!0}],"beach-buggy-audio":[{url:"beach-buggy/music.mp3",loop:!0},{url:"beach-buggy/buggy-idle.mp3",loop:!0},{url:"beach-buggy/buggy-accelerating.mp3",loop:!0},{url:"beach-buggy/gravel-looping.mp3",loop:!0},{url:"beach-buggy/crash-1.mp3"},{url:"beach-buggy/crash-2.mp3"},{url:"beach-buggy/checkpoint.mp3"},{url:"beach-buggy/time-running-out.mp3"},{url:"beach-buggy/dirt-land-1.mp3"},{url:"beach-buggy/dirt-land-2.mp3"},{url:"beach-buggy/sand.mp3"},{url:"beach-buggy/buggy-starting.mp3"},{url:"beach-buggy/buggy-slow-down.mp3"},{url:"beach-buggy/buggy-brake-gravel.mp3"},{url:"beach-buggy/buggy-start-gravel.mp3"},{url:"beach-buggy/buggy-power-up-start.mp3"},{url:"beach-buggy/buggy-power-up-duration.mp3"},{url:"beach-buggy/buggy-power-up-slow-down.mp3"},{url:"beach-buggy/buggy-power-up-transform.mp3"},{url:"beach-buggy/buggy-power-down-transform.mp3"},{url:"beach-buggy/thud-1.mp3"},{url:"beach-buggy/thud-2.mp3"},{url:"beach-buggy/triple-cmon.mp3",loc:!0},{url:"beach-buggy/triple-i-lost-a-shoe.mp3",loc:!0},{url:"beach-buggy/triple-selfie.mp3",loc:!0},{url:"beach-buggy/triple-yeyahh.mp3",loc:!0},{url:"beach-buggy/triple-yeah-woo-yeah.mp3",loc:!0},{url:"beach-buggy/hudson-hmmm.mp3",loc:!0},{url:"beach-buggy/hudson-no-way.mp3",loc:!0},{url:"beach-buggy/hudson-hello.mp3",loc:!0},{url:"beach-buggy/hudson-alright-gameshakers.mp3",loc:!0},{url:"beach-buggy/hudson-later-gators.mp3",loc:!0},{url:"beach-buggy/kenzie-aww.mp3",loc:!0},{url:"beach-buggy/kenzie-jeez-louise.mp3",loc:!0},{url:"beach-buggy/kenzie-fully-charged.mp3",loc:!0},{url:"beach-buggy/kenzie-its-kenzie.mp3",loc:!0},{url:"beach-buggy/kenzie-easy-squeezy.mp3",loc:!0},{url:"beach-buggy/babe-problem.mp3",loc:!0},{url:"beach-buggy/babe-upsy-daisy.mp3",loc:!0},{url:"beach-buggy/babe-here-i-come.mp3",loc:!0},{url:"beach-buggy/babe-woo.mp3",loc:!0}],"river-rangers-audio":[{url:"river-rangers/music.mp3",loop:!0},{url:"river-rangers/water-stream.mp3",loop:!0},{url:"river-rangers/boat.mp3",loop:!0},{url:"river-rangers/plankton-laugh.mp3"},{url:"river-rangers/plankton-laugh2.mp3"},{url:"river-rangers/plankton-sad3.mp3"},{url:"river-rangers/pop-cork-1.mp3"},{url:"river-rangers/pop-cork-2.mp3"},{url:"river-rangers/power-pop-1.mp3"},{url:"river-rangers/power-pop-2.mp3"},{url:"river-rangers/sb-gotcha.mp3",loc:!0},{url:"river-rangers/sb-laugh.mp3",loc:!0},{url:"river-rangers/sb-woah.mp3",loc:!0},{url:"river-rangers/swipe.mp3"},{url:"river-rangers/beep.mp3"},{url:"river-rangers/crash.mp3"},{url:"river-rangers/fizz.mp3"},{url:"river-rangers/wing-flaps.mp3"},{url:"river-rangers/water-splash-large-impact.mp3"},{url:"river-rangers/rustle-1.mp3"},{url:"river-rangers/rustle-2.mp3"},{url:"river-rangers/rustle-3.mp3"},{url:"river-rangers/rustle-4.mp3"},{url:"river-rangers/rustle-5.mp3"},{url:"river-rangers/rustle-6.mp3"},{url:"river-rangers/birds-1.mp3"},{url:"river-rangers/birds-2.mp3"},{url:"river-rangers/primed.mp3"},{url:"river-rangers/metal-dink-1.mp3"},{url:"river-rangers/metal-dink-2.mp3"},{url:"river-rangers/hiss.mp3"}],"dodgems-audio":[{url:"dodgems/ice-scrape-looping.mp3",loop:!0},{url:"dodgems/music.mp3",loop:!0},{url:"dodgems/dodgem-idle.mp3",loop:!0},{url:"dodgems/dodgem-moving.mp3",loop:!0},{url:"dodgems/dodgem-start.mp3"},{url:"dodgems/dodgem-stop.mp3"},{url:"dodgems/dodgem-power-up-moving.mp3",loop:!0},{url:"dodgems/dodgem-power-up-start.mp3"},{url:"dodgems/dodgem-power-up-stop.mp3"},{url:"dodgems/ice-scrape-end.mp3"},{url:"dodgems/zap-1.mp3"},{url:"dodgems/zap-2.mp3"},{url:"dodgems/arm-pickup.mp3"},{url:"dodgems/thud-1.mp3"},{url:"dodgems/thud-2.mp3"},{url:"dodgems/thud-3.mp3"},{url:"dodgems/dust-pop.mp3"},{url:"dodgems/ice-crack-1.mp3"},{url:"dodgems/ice-crack-2.mp3"},{url:"dodgems/ice-crack-3.mp3"},{url:"dodgems/ice-crack-4.mp3"},{url:"dodgems/time-running-out.mp3"},{url:"dodgems/dodgem-power-up-transform.mp3"},{url:"dodgems/dodgem-power-down-transform.mp3"},{url:"dodgems/henry-lets-go.mp3",loc:!0},{url:"dodgems/henry-no-1.mp3",loc:!0},{url:"dodgems/henry-no-2.mp3",loc:!0},{url:"dodgems/henry-no-3.mp3",loc:!0},{url:"dodgems/henry-oh.mp3",loc:!0},{url:"dodgems/power-up-jet-loop.mp3",loop:!0},{url:"dodgems/power-up-jet-start.mp3"},{url:"dodgems/power-up-jet-stop.mp3"},{url:"dodgems/crash-1.mp3"},{url:"dodgems/crash-2.mp3"},{url:"dodgems/henry-awesome.mp3",loc:!0},{url:"dodgems/henry-hey.mp3",loc:!0},{url:"dodgems/henry-little-help.mp3",loc:!0},{url:"dodgems/henry-what.mp3",loc:!0},{url:"dodgems/henry-woah.mp3",loc:!0}],"roller-coaster-doom-audio":[{url:"roller-coaster-doom/track-looping.mp3",loop:!0},{url:"roller-coaster-doom/fire.mp3",loop:!0},{url:"roller-coaster-doom/music.mp3",loop:!0},{url:"roller-coaster-doom/track-slow-down.mp3"},{url:"roller-coaster-doom/move-up-1.mp3"},{url:"roller-coaster-doom/move-up-2.mp3"},{url:"roller-coaster-doom/move-up-3.mp3"},{url:"roller-coaster-doom/move-down-1.mp3"},{url:"roller-coaster-doom/move-down-2.mp3"},{url:"roller-coaster-doom/move-down-3.mp3"},{url:"roller-coaster-doom/splash-1.mp3"},{url:"roller-coaster-doom/splash-2.mp3"},{url:"roller-coaster-doom/bounce-up-1.mp3"},{url:"roller-coaster-doom/bounce-up-2.mp3"},{url:"roller-coaster-doom/bounce-up-3.mp3"},{url:"roller-coaster-doom/pop-1.mp3"},{url:"roller-coaster-doom/pop-2.mp3"},{url:"roller-coaster-doom/lava-gloop.mp3"},{url:"roller-coaster-doom/goop-1.mp3"},{url:"roller-coaster-doom/goop-2.mp3"},{url:"roller-coaster-doom/small-loop-sound.mp3"},{url:"roller-coaster-doom/shield-hit.mp3"},{url:"roller-coaster-doom/shield-up.mp3"},{url:"roller-coaster-doom/shield-down.mp3"},{url:"roller-coaster-doom/beep.mp3"},{url:"roller-coaster-doom/doom-power-up.mp3"},{url:"roller-coaster-doom/max-enemies.mp3",loc:!0},{url:"roller-coaster-doom/max-loosers.mp3",loc:!0},{url:"roller-coaster-doom/max-what.mp3",loc:!0},{url:"roller-coaster-doom/phoebe-close.mp3",loc:!0},{url:"roller-coaster-doom/phoebe-happened.mp3",loc:!0},{url:"roller-coaster-doom/phoebe-woop.mp3",loc:!0}],"laser-cave-audio":[{url:"laser-cave/music.mp3",loop:!0},{url:"laser-cave/cart-looping.mp3",loop:!0},{url:"laser-cave/zap-looping-0.mp3",loop:!0},{url:"laser-cave/zap-looping-1.mp3",loop:!0},{url:"laser-cave/zap-looping-2.mp3",loop:!0},{url:"laser-cave/zap-looping-3.mp3",loop:!0},{url:"laser-cave/zap-looping-4.mp3",loop:!0},{url:"laser-cave/footbot-1.mp3"},{url:"laser-cave/footbot-2.mp3"},{url:"laser-cave/footbot-3.mp3"},{url:"laser-cave/footbot-4.mp3"},{url:"laser-cave/footbot-5.mp3"},{url:"laser-cave/footbot-6.mp3"},{url:"laser-cave/footbot-7.mp3"},{url:"laser-cave/footbot-8.mp3"},{url:"laser-cave/drone-pop.mp3"},{url:"laser-cave/fizz.mp3"},{url:"laser-cave/loud-zap.mp3"},{url:"laser-cave/hiss.mp3"},{url:"laser-cave/laser-1.mp3"},{url:"laser-cave/laser-2.mp3"},{url:"laser-cave/laser-3.mp3"},{url:"laser-cave/laser-power-up-1.mp3"},{url:"laser-cave/laser-power-up-2.mp3"},{url:"laser-cave/laser-power-up-3.mp3"},{url:"laser-cave/drone-destroy-1.mp3"},{url:"laser-cave/drone-destroy-2.mp3"},{url:"laser-cave/drone-destroy-3.mp3"},{url:"laser-cave/lava-gloop.mp3"},{url:"laser-cave/power-up-transform.mp3"},{url:"laser-cave/power-down-transform.mp3"},{url:"laser-cave/donnie-awesome.mp3",loc:!0},{url:"laser-cave/donnie-check-it.mp3",loc:!0},{url:"laser-cave/donnie-were-awesome.mp3",loc:!0},{url:"laser-cave/donnie-defend-1.mp3",loc:!0},{url:"laser-cave/donnie-defend-2.mp3",loc:!0},{url:"laser-cave/donnie-defend-3.mp3",loc:!0},{url:"laser-cave/donnie-defend-4.mp3",loc:!0},{url:"laser-cave/donnie-eat-it.mp3",loc:!0},{url:"laser-cave/leo-celebrate.mp3",loc:!0},{url:"laser-cave/leo-lets-go.mp3",loc:!0},{url:"laser-cave/leo-defend-1.mp3",loc:!0},{url:"laser-cave/leo-defend-2.mp3",loc:!0},{url:"laser-cave/leo-defend-3.mp3",loc:!0},{url:"laser-cave/leo-defend-4.mp3",loc:!0},{url:"laser-cave/leo-hooowho.mp3",loc:!0},{url:"laser-cave/mikey-awesome.mp3",loc:!0},{url:"laser-cave/mikey-oh-geez.mp3",loc:!0},{url:"laser-cave/mikey-oh-yeah.mp3",loc:!0},{url:"laser-cave/mikey-strap-your-shells-on-tight-bros.mp3",loc:!0},{url:"laser-cave/mikey-were-under-attack.mp3",loc:!0},{url:"laser-cave/mikey-woohoo.mp3",loc:!0},{url:"laser-cave/mikey-defend-1.mp3",loc:!0},{url:"laser-cave/mikey-defend-2.mp3",loc:!0},{url:"laser-cave/mikey-defend-3.mp3",loc:!0},{url:"laser-cave/mikey-defend-4.mp3",loc:!0},{url:"laser-cave/raph-amazing.mp3",loc:!0},{url:"laser-cave/raph-enough-talk.mp3",loc:!0},{url:"laser-cave/raph-lets-move.mp3",loc:!0},{url:"laser-cave/raph-defend-1.mp3",loc:!0},{url:"laser-cave/raph-defend-2.mp3",loc:!0},{url:"laser-cave/raph-defend-3.mp3",loc:!0},{url:"laser-cave/raph-defend-4.mp3",loc:!0}],"jet-ski-audio":[{url:"jet-ski/music.mp3",loop:!0},{url:"jet-ski/alt-large-splash.mp3"},{url:"jet-ski/ambience-ocean-waves.mp3",loop:!0},{url:"jet-ski/combo-bonus.mp3"},{url:"jet-ski/heavy-wave.mp3"},{url:"jet-ski/howling-wind.mp3"},{url:"jet-ski/hurricane.mp3"},{url:"jet-ski/jetski-accelerate.mp3"},{url:"jet-ski/jetski-constant.mp3",loop:!0},{url:"jet-ski/jetski-constant-in-air.mp3",loop:!0},{url:"jet-ski/jetski-decelerate.mp3"},{url:"jet-ski/jetski-idle.mp3",loop:!0},{url:"jet-ski/jetski-start.mp3"},{url:"jet-ski/jetski-stop.mp3"},{url:"jet-ski/large-splash.mp3"},{url:"jet-ski/deep-splash.mp3"},{url:"jet-ski/loud-splash.mp3"},{url:"jet-ski/small-low-splash.mp3"},{url:"jet-ski/ocean-waves-on-jetski.mp3",loop:!0},{url:"jet-ski/plastic-thunk1.mp3"},{url:"jet-ski/plastic-thunk2.mp3"},{url:"jet-ski/plastic-thunk3.mp3"},{url:"jet-ski/plastic-thunk4.mp3"},{url:"jet-ski/sea-storm.mp3"},{url:"jet-ski/speedboat-accelerate.mp3"},{url:"jet-ski/speedboat-constant.mp3",loop:!0},{url:"jet-ski/speedboat-decelerate.mp3"},{url:"jet-ski/speedboat-idle.mp3",loop:!0},{url:"jet-ski/speedboat-rev.mp3"},{url:"jet-ski/guitar-land-1.mp3"},{url:"jet-ski/time-bar-0.mp3"},{url:"jet-ski/time-bar-1.mp3"},{url:"jet-ski/time-bar-2.mp3"},{url:"jet-ski/time-bar-3.mp3"},{url:"jet-ski/time-bar-4.mp3"},{url:"jet-ski/time-add.mp3"},{url:"jet-ski/time-subtract.mp3"},{url:"jet-ski/tomika-close-call.mp3",loc:!0},{url:"jet-ski/tomika-omg.mp3",loc:!0},{url:"jet-ski/tomika-ready.mp3",loc:!0},{url:"jet-ski/tomika-so-cool.mp3",loc:!0},{url:"jet-ski/tomika-nothings-gonna-stop-us-now.mp3",loc:!0},{url:"jet-ski/freddie-got-this.mp3",loc:!0},{url:"jet-ski/freddie-locked-and-loaded.mp3",loc:!0},{url:"jet-ski/freddie-whats-happening.mp3",loc:!0},{url:"jet-ski/freddie-ha-ha.mp3",loc:!0},{url:"jet-ski/freddie-so-lame.mp3",loc:!0},{url:"jet-ski/lawrence-got-this.mp3",loc:!0},{url:"jet-ski/lawrence-i-got-this.mp3",loc:!0},{url:"jet-ski/lawrence-lets-go.mp3",loc:!0},{url:"jet-ski/lawrence-no-way.mp3",loc:!0},{url:"jet-ski/lawrence-thats-it.mp3",loc:!0},{url:"jet-ski/summer-lose.mp3",loc:!0},{url:"jet-ski/summer-not-impressed.mp3",loc:!0},{url:"jet-ski/summer-totalnonsense.mp3",loc:!0},{url:"jet-ski/summer-on-point.mp3",loc:!0},{url:"jet-ski/summer-lets-do-this.mp3",loc:!0},{url:"jet-ski/summer-got-this.mp3",loc:!0},{url:"jet-ski/zack-amazing.mp3",loc:!0},{url:"jet-ski/zack-getting-weird.mp3",loc:!0},{url:"jet-ski/zack-oh-no.mp3",loc:!0},{url:"jet-ski/zack-school-of-rock.mp3",loc:!0}],"coco-nutty-audio":[{url:"coco-nutty/air-blow.mp3"},{url:"coco-nutty/bike-wheel-turning.mp3",loop:!0},{url:"coco-nutty/bush-cut.mp3"},{url:"coco-nutty/music.mp3",loop:!0},{url:"coco-nutty/leaf-pile.mp3"},{url:"coco-nutty/rock-land.mp3"},{url:"coco-nutty/spinning-wheel.mp3",loop:!0},{url:"coco-nutty/spring.mp3"},{url:"coco-nutty/winding-toy.mp3",loop:!0},{url:"coco-nutty/crack-open.mp3"},{url:"coco-nutty/gun-fire.mp3"},{url:"coco-nutty/impact.mp3"},{url:"coco-nutty/crack.mp3"},{url:"coco-nutty/explode-2.mp3"},{url:"coco-nutty/bush-2.mp3"},{url:"coco-nutty/air-rush.mp3"},{url:"coco-nutty/swish-long-1.mp3"},{url:"coco-nutty/swish-long-2.mp3"},{url:"coco-nutty/success.mp3"},{url:"coco-nutty/target-hit-1.mp3"},{url:"coco-nutty/target-hit-2.mp3"},{url:"coco-nutty/leaves.mp3",loop:!0},{url:"coco-nutty/magnet.mp3",loop:!0},{url:"coco-nutty/thruster.mp3",loop:!0},{url:"coco-nutty/power-up-transform.mp3"},{url:"coco-nutty/power-down-transform.mp3"},{url:"coco-nutty/ricky-game-is-won.mp3",loc:!0},{url:"coco-nutty/ricky-i-cant.mp3",loc:!0},{url:"coco-nutty/ricky-ah-impressive.mp3",loc:!0},{url:"coco-nutty/nicky-drumroll.mp3",loc:!0},{url:"coco-nutty/nicky-freaking-out.mp3",loc:!0},{url:"coco-nutty/nicky-boom.mp3",loc:!0},{url:"coco-nutty/dicky-no-preasure.mp3",loc:!0},{url:"coco-nutty/dicky-so-hard.mp3",loc:!0},{url:"coco-nutty/dicky-boom.mp3",loc:!0},{url:"coco-nutty/dawn-leave-it-to-me.mp3",loc:!0},{url:"coco-nutty/dawn-how-possible.mp3",loc:!0},{url:"coco-nutty/dawn-ooo.mp3",loc:!0}],"roller-coaster-ice-audio":[{url:"roller-coaster-ice/music.mp3",loop:!0},{url:"roller-coaster-ice/power-up-transform.mp3"},{url:"roller-coaster-ice/power-down-transform.mp3"},{url:"roller-coaster-ice/swish-long-1.mp3"},{url:"roller-coaster-ice/swish-long-2.mp3"},{url:"roller-coaster-ice/swish-long-3.mp3"},{url:"roller-coaster-ice/ice-pop-1.mp3"},{url:"roller-coaster-ice/ice-pop-2.mp3"},{url:"roller-coaster-ice/ice-pop-3.mp3"},{url:"roller-coaster-ice/ice-pop-4.mp3"},{url:"roller-coaster-ice/laser-1.mp3"},{url:"roller-coaster-ice/laser-2.mp3"},{url:"roller-coaster-ice/zap-1.mp3"},{url:"roller-coaster-ice/zap-2.mp3"},{url:"roller-coaster-ice/thud-1.mp3"},{url:"roller-coaster-ice/thud-2.mp3"},{url:"roller-coaster-ice/thud-3.mp3"},{url:"roller-coaster-ice/wind.mp3",loop:!0},{url:"roller-coaster-ice/click-1.mp3"},{url:"roller-coaster-ice/click-2.mp3"},{url:"roller-coaster-ice/click-3.mp3"},{url:"roller-coaster-ice/triple-cmon.mp3",loc:!0},{url:"roller-coaster-ice/triple-i-lost-a-shoe.mp3",loc:!0},{url:"roller-coaster-ice/triple-selfie.mp3",loc:!0},{url:"roller-coaster-ice/triple-yeyahh.mp3",loc:!0},{url:"roller-coaster-ice/triple-yeah-woo-yeah.mp3",loc:!0},{url:"roller-coaster-ice/hudson-hmmm.mp3",loc:!0},{url:"roller-coaster-ice/hudson-no-way.mp3",loc:!0},{url:"roller-coaster-ice/hudson-hello.mp3",loc:!0},{url:"roller-coaster-ice/hudson-alright-gameshakers.mp3",loc:!0},{url:"roller-coaster-ice/hudson-later-gators.mp3",loc:!0},{url:"roller-coaster-ice/kenzie-aww.mp3",loc:!0},{url:"roller-coaster-ice/kenzie-jeez-louise.mp3",loc:!0},{url:"roller-coaster-ice/kenzie-fully-charged.mp3",loc:!0},{url:"roller-coaster-ice/kenzie-its-kenzie.mp3",loc:!0},{url:"roller-coaster-ice/kenzie-easy-squeezy.mp3",loc:!0},{url:"roller-coaster-ice/babe-problem.mp3",loc:!0},{url:"roller-coaster-ice/babe-upsy-daisy.mp3",loc:!0},{url:"roller-coaster-ice/babe-here-i-come.mp3",loc:!0},{url:"roller-coaster-ice/babe-woo.mp3",loc:!0}],"pin-ball-audio":[{url:"pin-ball/ball-hit.mp3"},{url:"pin-ball/bell-1.mp3"},{url:"pin-ball/bell-2.mp3"},{url:"pin-ball/bell-3.mp3"},{url:"pin-ball/flipper.mp3"},{url:"pin-ball/flipper-release.mp3"},{url:"pin-ball/bounce-collision.mp3"},{url:"pin-ball/collision-sound-two.mp3"},{url:"pin-ball/lose-wobble.mp3"},{url:"pin-ball/panel-move.mp3"},{url:"pin-ball/spring.mp3"},{url:"pin-ball/launch.mp3"},{url:"pin-ball/lock-load.mp3"},{url:"pin-ball/wind-up-spring2.mp3"},{url:"pin-ball/music.mp3",loop:!0},{url:"pin-ball/ramp.mp3"},{url:"pin-ball/hole.mp3"},{url:"pin-ball/active-gates.mp3"},{url:"pin-ball/ditch-release.mp3"},{url:"pin-ball/gate-sound.mp3"},{url:"pin-ball/upper-gate-sound.mp3"},{url:"pin-ball/thunk-1.mp3"},{url:"pin-ball/thunk-2.mp3"},{url:"pin-ball/spinning.mp3"},{url:"pin-ball/gun-fire.mp3"},{url:"pin-ball/sb-distance.mp3",loc:!0},{url:"pin-ball/sb-gotcha.mp3",loc:!0},{url:"pin-ball/sb-laugh.mp3",loc:!0},{url:"pin-ball/sb-woah.mp3",loc:!0},{url:"pin-ball/patrick-burp.mp3",loc:!0},{url:"pin-ball/patrick-happening.mp3",loc:!0},{url:"pin-ball/patrick-laughing.mp3",loc:!0},{url:"pin-ball/patrick-next.mp3",loc:!0}],"aqua-jetpack-audio":[{url:"aqua-jetpack/music.mp3",loop:!0},{url:"aqua-jetpack/large-splash.mp3"},{url:"aqua-jetpack/loud-splash.mp3"},{url:"aqua-jetpack/water-looping.mp3",loop:!0},{url:"aqua-jetpack/move-down-1.mp3"},{url:"aqua-jetpack/move-down-2.mp3"},{url:"aqua-jetpack/move-down-3.mp3"},{url:"aqua-jetpack/thud-1.mp3"},{url:"aqua-jetpack/thud-2.mp3"},{url:"aqua-jetpack/thud-3.mp3"},{url:"aqua-jetpack/swish-long-1.mp3"},{url:"aqua-jetpack/swish-long-2.mp3"},{url:"aqua-jetpack/swish-long-3.mp3"},{url:"aqua-jetpack/water-jet-1.mp3",loop:!0},{url:"aqua-jetpack/water-jet-2.mp3",loop:!0},{url:"aqua-jetpack/beep.mp3"},{url:"aqua-jetpack/power-up-bubble.mp3"},{url:"aqua-jetpack/max-enemies.mp3",loc:!0},{url:"aqua-jetpack/max-loosers.mp3",loc:!0},{url:"aqua-jetpack/max-what.mp3",loc:!0},{url:"aqua-jetpack/max-im-the-best.mp3",loc:!0},{url:"aqua-jetpack/max-why.mp3",loc:!0},{url:"aqua-jetpack/max-your-welcome.mp3",loc:!0},{url:"aqua-jetpack/phoebe-happened.mp3",loc:!0},{url:"aqua-jetpack/phoebe-close.mp3",loc:!0},{url:"aqua-jetpack/phoebe-woop.mp3",loc:!0},{url:"aqua-jetpack/phoebe-hair.mp3",loc:!0},{url:"aqua-jetpack/phoebe-no-problem-too-small.mp3",loc:!0},{url:"aqua-jetpack/phoebe-step-aside.mp3",loc:!0}],"tree-top-gladiators-audio":[{url:"tree-top-gladiators/music.mp3",loop:!0},{url:"tree-top-gladiators/background.mp3",loop:!0},{url:"tree-top-gladiators/rolling.mp3",loop:!0},{url:"tree-top-gladiators/spin-up.mp3"},{url:"tree-top-gladiators/spin-down.mp3"},{url:"tree-top-gladiators/fire.mp3"},{url:"tree-top-gladiators/rope.mp3"},{url:"tree-top-gladiators/rope-opp.mp3"},{url:"tree-top-gladiators/powerup.mp3",loop:!0},{url:"tree-top-gladiators/primed.mp3"},{url:"tree-top-gladiators/target-hit-1.mp3"},{url:"tree-top-gladiators/target-hit-2.mp3"},{url:"tree-top-gladiators/leaf.mp3"},{url:"tree-top-gladiators/swish-long-1.mp3"},{url:"tree-top-gladiators/swish-long-2.mp3"},{url:"tree-top-gladiators/crank-2.mp3"},{url:"tree-top-gladiators/crank-3.mp3"},{url:"tree-top-gladiators/linc-awesome.mp3",loc:!0},{url:"tree-top-gladiators/linc-celebrate.mp3",loc:!0},{url:"tree-top-gladiators/linc-cut-it-out.mp3",loc:!0},{url:"tree-top-gladiators/linc-dang-it.mp3",loc:!0},{url:"tree-top-gladiators/linc-grrr.mp3",loc:!0},{url:"tree-top-gladiators/linc-i-win.mp3",loc:!0},{url:"tree-top-gladiators/linc-i-wont-give-up.mp3",loc:!0},{url:"tree-top-gladiators/linc-its-go-time.mp3",loc:!0},{url:"tree-top-gladiators/linc-so-close.mp3",loc:!0},{url:"tree-top-gladiators/linc-that-was-close.mp3",loc:!0},{url:"tree-top-gladiators/linc-this-is-bad.mp3",loc:!0},{url:"tree-top-gladiators/linc-yes.mp3",loc:!0},{url:"tree-top-gladiators/lucy-negative.mp3",loc:!0},{url:"tree-top-gladiators/lucy-positive.mp3",loc:!0},{url:"tree-top-gladiators/lucy-positive-2.mp3",loc:!0},{url:"tree-top-gladiators/lucy-intro.mp3",loc:!0},{url:"tree-top-gladiators/lucy-negative-2.mp3",loc:!0},{url:"tree-top-gladiators/lynn-negative.mp3",loc:!0},{url:"tree-top-gladiators/lynn-positive.mp3",loc:!0},{url:"tree-top-gladiators/lynn-positive-2.mp3",loc:!0},{url:"tree-top-gladiators/lynn-intro.mp3",loc:!0},{url:"tree-top-gladiators/lynn-negative-2.mp3",loc:!0},{url:"tree-top-gladiators/luan-negative.mp3",loc:!0},{url:"tree-top-gladiators/luan-negative-2.mp3",loc:!0},{url:"tree-top-gladiators/luan-positive.mp3",loc:!0},{url:"tree-top-gladiators/luan-positive-2.mp3",loc:!0},{url:"tree-top-gladiators/luan-intro.mp3",loc:!0},{url:"tree-top-gladiators/luna-positive.mp3",loc:!0},{url:"tree-top-gladiators/luna-positive-2.mp3",loc:!0},{url:"tree-top-gladiators/luna-negative.mp3",loc:!0},{url:"tree-top-gladiators/luna-negative-2.mp3",loc:!0},{url:"tree-top-gladiators/luna-intro.mp3",loc:!0},{url:"tree-top-gladiators/lana-positive.mp3",loc:!0},{url:"tree-top-gladiators/lana-positive-2.mp3",loc:!0},{url:"tree-top-gladiators/lana-negative.mp3",loc:!0},{url:"tree-top-gladiators/lana-negative-2.mp3",loc:!0},{url:"tree-top-gladiators/lana-intro.mp3",loc:!0},{url:"tree-top-gladiators/lori-positive.mp3",loc:!0},{url:"tree-top-gladiators/lori-positive-2.mp3",loc:!0},{url:"tree-top-gladiators/lori-negative.mp3",loc:!0},{url:"tree-top-gladiators/lori-negative-2.mp3",loc:!0},{url:"tree-top-gladiators/lori-intro.mp3",loc:!0},{url:"tree-top-gladiators/leni-positive.mp3",loc:!0},{url:"tree-top-gladiators/leni-positive-2.mp3",loc:!0},{url:"tree-top-gladiators/leni-negative.mp3",loc:!0},{url:"tree-top-gladiators/leni-negative-2.mp3",loc:!0},{url:"tree-top-gladiators/leni-intro.mp3",loc:!0},{url:"tree-top-gladiators/lola-positive.mp3",loc:!0},{url:"tree-top-gladiators/lola-positive-2.mp3",loc:!0},{url:"tree-top-gladiators/lola-negative.mp3",loc:!0},{url:"tree-top-gladiators/lola-negative-2.mp3",loc:!0},{url:"tree-top-gladiators/lola-intro.mp3",loc:!0},{url:"tree-top-gladiators/lisa-positive.mp3",loc:!0},{url:"tree-top-gladiators/lisa-positive-2.mp3",loc:!0},{url:"tree-top-gladiators/lisa-negative.mp3",loc:!0},{url:"tree-top-gladiators/lisa-negative-2.mp3",loc:!0},{url:"tree-top-gladiators/lisa-intro.mp3",loc:!0}],"mayan-madness-audio":[{url:"mayan-madness/music.mp3",loop:!0},{url:"mayan-madness/stone-1.mp3"},{url:"mayan-madness/stone-2.mp3"},{url:"mayan-madness/stone-3.mp3"},{url:"mayan-madness/scrape-1.mp3"},{url:"mayan-madness/scrape-2.mp3"},{url:"mayan-madness/tv-off.mp3"},{url:"mayan-madness/tv-tune.mp3"},{url:"mayan-madness/puzzle-up.mp3"},{url:"mayan-madness/puzzle-down.mp3"},{url:"mayan-madness/doors-crank.mp3"},{url:"mayan-madness/doors-moving.mp3"},{url:"mayan-madness/lift-moving.mp3",loop:!0},{url:"mayan-madness/wind.mp3",loop:!0},{url:"mayan-madness/thud.mp3"},{url:"mayan-madness/thud-wood-1.mp3"},{url:"mayan-madness/thud-wood-2.mp3"},{url:"mayan-madness/wood-smash-1.mp3"},{url:"mayan-madness/wood-smash-2.mp3"},{url:"mayan-madness/wood-smash-3.mp3"},{url:"mayan-madness/shine-1.mp3"},{url:"mayan-madness/shine-2.mp3"},{url:"mayan-madness/shine-3.mp3"},{url:"mayan-madness/static.mp3"},{url:"mayan-madness/stone-touch.mp3"},{url:"mayan-madness/swish-long-1.mp3"},{url:"mayan-madness/captain-man-hair.mp3",loc:!0},{url:"mayan-madness/captain-man-potato.mp3",loc:!0},{url:"mayan-madness/captain-man-scoop.mp3",loc:!0},{url:"mayan-madness/captain-man-so-henry.mp3",loc:!0},{url:"mayan-madness/captain-man-starring.mp3",loc:!0},{url:"mayan-madness/captain-man-test.mp3",loc:!0},{url:"mayan-madness/captain-man-thats-right.mp3",loc:!0},{url:"mayan-madness/henry-awesome.mp3",loc:!0},{url:"mayan-madness/henry-lets-go.mp3",loc:!0},{url:"mayan-madness/henry-little-help.mp3",loc:!0},{url:"mayan-madness/henry-what.mp3",loc:!0},{url:"mayan-madness/henry-where-am-i.mp3",loc:!0}],"waterfall-wipeout-audio":[{url:"waterfall-wipeout/splash-big-1.mp3"},{url:"waterfall-wipeout/splash-big-2.mp3"},{url:"waterfall-wipeout/splash-big-3.mp3"},{url:"waterfall-wipeout/splash-big-4.mp3"},{url:"waterfall-wipeout/splash-small.mp3"},{url:"waterfall-wipeout/water-stream.mp3",loop:!0},{url:"waterfall-wipeout/speedboat-rev.mp3"},{url:"waterfall-wipeout/speedboat-constant.mp3",loop:!0},{url:"waterfall-wipeout/speedboat-accelerate.mp3"},{url:"waterfall-wipeout/speedboat-decelerate.mp3"},{url:"waterfall-wipeout/waterfall-small.mp3",loop:!0},{url:"waterfall-wipeout/waterfall-big-0.mp3"},{url:"waterfall-wipeout/waterfall-big-1.mp3"},{url:"waterfall-wipeout/waterfall-big-2.mp3"},{url:"waterfall-wipeout/thud-wood-1.mp3"},{url:"waterfall-wipeout/thud-wood-2.mp3"},{url:"waterfall-wipeout/thud-wood-3.mp3"},{url:"waterfall-wipeout/fan.mp3"},{url:"waterfall-wipeout/fan-off.mp3"}],"volcano-skydive-audio":[{url:"volcano-skydive/lena-bonkers.mp3",loc:!0},{url:"volcano-skydive/lena-check-it-out.mp3",loc:!0},{url:"volcano-skydive/lena-clear-throat.mp3",loc:!0},{url:"volcano-skydive/lena-current.mp3",loc:!0},{url:"volcano-skydive/lena-i-love-it.mp3",loc:!0},{url:"volcano-skydive/lena-im-ready.mp3",loc:!0},{url:"volcano-skydive/lena-keep-the-game-going.mp3",loc:!0},{url:"volcano-skydive/lena-laugh.mp3",loc:!0},{url:"volcano-skydive/lena-lets-do-this.mp3",loc:!0},{url:"volcano-skydive/lena-nailed-it-down.mp3",loc:!0},{url:"volcano-skydive/lena-race-you.mp3",loc:!0},{url:"volcano-skydive/lena-rock-this.mp3",loc:!0},{url:"volcano-skydive/background-music.wav",loop:!0},{url:"volcano-skydive/background-wind-looping.wav",loop:!0},{url:"volcano-skydive/wind-looping.wav",loop:!0},{url:"volcano-skydive/pop1.mp3"},{url:"volcano-skydive/pop2.mp3"},{url:"volcano-skydive/pop3.mp3"},{url:"volcano-skydive/pop4.mp3"},{url:"volcano-skydive/pop5.mp3"},{url:"volcano-skydive/swoosh-1.mp3"},{url:"volcano-skydive/swoosh-2.mp3"},{url:"volcano-skydive/thud-1.mp3"},{url:"volcano-skydive/thud-2.mp3"},{url:"volcano-skydive/thud-3.mp3"},{url:"volcano-skydive/shield-hit-1.mp3"},{url:"volcano-skydive/shield-hit-2.mp3"},{url:"volcano-skydive/wind-warning.mp3"}],"hover-drift-audio":[{url:"hover-drift/ambience-ocean-waves.mp3",loop:!0},{url:"hover-drift/checkpoint.mp3"},{url:"hover-drift/thud-wood-1.mp3"},{url:"hover-drift/thud-wood-2.mp3"},{url:"hover-drift/time-add.mp3"},{url:"hover-drift/time-running-out.mp3"},{url:"hover-drift/accelerate.mp3"},{url:"hover-drift/decelerate.mp3"},{url:"hover-drift/constant.mp3",loop:!0},{url:"hover-drift/waterfall-small.mp3",loop:!0},{url:"hover-drift/speedboat-rev.mp3"},{url:"hover-drift/speedboat-accelerate.mp3"},{url:"hover-drift/speedboat-decelerate.mp3"},{url:"hover-drift/speedboat-constant.mp3",loop:!0},{url:"hover-drift/power-up-transform.mp3"},{url:"hover-drift/heavy-switch.mp3"},{url:"hover-drift/thruster.mp3",loop:!0},{url:"hover-drift/music.mp3",loop:!0}],"snowball-wars-audio":[{url:"snowball-wars/linc-awesome.mp3",loc:!0},{url:"snowball-wars/linc-celebrate.mp3",loc:!0},{url:"snowball-wars/linc-cut-it-out.mp3",loc:!0},{url:"snowball-wars/linc-dang-it.mp3",loc:!0},{url:"snowball-wars/linc-grrr.mp3",loc:!0},{url:"snowball-wars/linc-i-win.mp3",loc:!0},{url:"snowball-wars/linc-i-wont-give-up.mp3",loc:!0},{url:"snowball-wars/linc-its-go-time.mp3",loc:!0},{url:"snowball-wars/linc-so-close.mp3",loc:!0},{url:"snowball-wars/linc-this-is-bad.mp3",loc:!0},{url:"snowball-wars/linc-yes.mp3",loc:!0},{url:"snowball-wars/linc-yes-2.mp3",loc:!0},{url:"snowball-wars/linc-woohoo.mp3",loc:!0},{url:"snowball-wars/lucy-negative.mp3",loc:!0},{url:"snowball-wars/lucy-positive.mp3",loc:!0},{url:"snowball-wars/lucy-positive-2.mp3",loc:!0},{url:"snowball-wars/lucy-intro.mp3",loc:!0},{url:"snowball-wars/lucy-negative-2.mp3",loc:!0},{url:"snowball-wars/lynn-negative.mp3",loc:!0},{url:"snowball-wars/lynn-positive.mp3",loc:!0},{url:"snowball-wars/lynn-positive-2.mp3",loc:!0},{url:"snowball-wars/lynn-intro.mp3",loc:!0},{url:"snowball-wars/lynn-negative-2.mp3",loc:!0},{url:"snowball-wars/luan-negative.mp3",loc:!0},{url:"snowball-wars/luan-negative-2.mp3",loc:!0},{url:"snowball-wars/luan-positive.mp3",loc:!0},{url:"snowball-wars/luan-positive-2.mp3",loc:!0},{url:"snowball-wars/luan-intro.mp3",loc:!0},{url:"snowball-wars/luna-positive.mp3",loc:!0},{url:"snowball-wars/luna-positive-2.mp3",loc:!0},{url:"snowball-wars/luna-negative.mp3",loc:!0},{url:"snowball-wars/luna-negative-2.mp3",loc:!0},{url:"snowball-wars/luna-intro.mp3",loc:!0},{url:"snowball-wars/lana-positive.mp3",loc:!0},{url:"snowball-wars/lana-positive-2.mp3",loc:!0},{url:"snowball-wars/lana-negative.mp3",loc:!0},{url:"snowball-wars/lana-negative-2.mp3",loc:!0},{url:"snowball-wars/lana-intro.mp3",loc:!0},{url:"snowball-wars/lori-positive.mp3",loc:!0},{url:"snowball-wars/lori-positive-2.mp3",loc:!0},{url:"snowball-wars/lori-negative.mp3",loc:!0},{url:"snowball-wars/lori-negative-2.mp3",loc:!0},{url:"snowball-wars/lori-intro.mp3",loc:!0},{url:"snowball-wars/leni-positive.mp3",loc:!0},{url:"snowball-wars/leni-positive-2.mp3",loc:!0},{url:"snowball-wars/leni-negative.mp3",loc:!0},{url:"snowball-wars/leni-negative-2.mp3",loc:!0},{url:"snowball-wars/leni-intro.mp3",loc:!0},{url:"snowball-wars/lola-positive.mp3",loc:!0},{url:"snowball-wars/lola-positive-2.mp3",loc:!0},{url:"snowball-wars/lola-negative.mp3",loc:!0},{url:"snowball-wars/lola-negative-2.mp3",loc:!0},{url:"snowball-wars/lola-intro.mp3",loc:!0},{url:"snowball-wars/lisa-positive.mp3",loc:!0},{url:"snowball-wars/lisa-positive-2.mp3",loc:!0},{url:"snowball-wars/lisa-negative.mp3",loc:!0},{url:"snowball-wars/lisa-negative-2.mp3",loc:!0},{url:"snowball-wars/lisa-intro.mp3",loc:!0},{url:"snowball-wars/snowball-pop-1.mp3"},{url:"snowball-wars/snowball-pop-2.mp3"},{url:"snowball-wars/snowball-pop-3.mp3"},{url:"snowball-wars/power-pop-1.mp3"},{url:"snowball-wars/power-pop-2.mp3"},{url:"snowball-wars/swish-long-1.mp3"},{url:"snowball-wars/swish-long-2.mp3"},{url:"snowball-wars/swish-long-3.mp3"},{url:"snowball-wars/swish-long-4.mp3"},{url:"snowball-wars/snowball-impact-1.mp3"},{url:"snowball-wars/snowball-impact-2.mp3"},{url:"snowball-wars/snowball-impact-3.mp3"},{url:"snowball-wars/snowball-impact-4.mp3"},{url:"snowball-wars/snowball-impact-5.mp3"},{url:"snowball-wars/beep-1.mp3"},{url:"snowball-wars/beep-2.mp3"},{url:"snowball-wars/beep-3.mp3"},{url:"snowball-wars/mortar-pop-1.mp3"},{url:"snowball-wars/mortar-pop-2.mp3"},{url:"snowball-wars/mortar-pop-3.mp3"},{url:"snowball-wars/mortar-hit-1.mp3"},{url:"snowball-wars/mortar-hit-2.mp3"},{url:"snowball-wars/mortar-hit-3.mp3"},{url:"snowball-wars/ice-crack-1.mp3"},{url:"snowball-wars/ice-crack-2.mp3"},{url:"snowball-wars/ice-crack-3.mp3"},{url:"snowball-wars/ice-crack-4.mp3"},{url:"snowball-wars/move-down-1.mp3"},{url:"snowball-wars/move-down-2.mp3"},{url:"snowball-wars/move-down-3.mp3"},{url:"snowball-wars/pop-1.mp3"},{url:"snowball-wars/pop-2.mp3"},{url:"snowball-wars/pop-3.mp3"},{url:"snowball-wars/hatch-doors.mp3"},{url:"snowball-wars/shield-hit.mp3"},{url:"snowball-wars/step-1.mp3"},{url:"snowball-wars/step-2.mp3"},{url:"snowball-wars/step-3.mp3"},{url:"snowball-wars/click3.mp3"},{url:"snowball-wars/pickup-tune.mp3"},{url:"snowball-wars/ice-impact.mp3"},{url:"snowball-wars/snow-land.mp3"},{url:"snowball-wars/wind.mp3",loop:!0},{url:"snowball-wars/music.mp3",loop:!0}],"egg-scape-audio":[{url:"egg-scape/laser-fire.mp3"},{url:"egg-scape/pew.mp3"},{url:"egg-scape/laser-fire-powerup.mp3"},{url:"egg-scape/cock-gun.mp3"},{url:"egg-scape/crack-1.mp3"},{url:"egg-scape/crack-2.mp3"},{url:"egg-scape/crack-3.mp3"},{url:"egg-scape/smash-1.mp3"},{url:"egg-scape/smash-2.mp3"},{url:"egg-scape/smash-3.mp3"},{url:"egg-scape/poof-1.mp3"},{url:"egg-scape/poof-2.mp3"},{url:"egg-scape/poof-3.mp3"},{url:"egg-scape/poof-4.mp3"},{url:"egg-scape/cave-ambience.mp3",loop:!0},{url:"egg-scape/tick-up.mp3"},{url:"egg-scape/splat-1.mp3"},{url:"egg-scape/splat-2.mp3"},{url:"egg-scape/splat-3.mp3"},{url:"egg-scape/glass-smash-1.mp3"},{url:"egg-scape/glass-smash-2.mp3"},{url:"egg-scape/glass-smash-3.mp3"},{url:"egg-scape/glass-smash-4.mp3"},{url:"egg-scape/rail.mp3"},{url:"egg-scape/rail-stop.mp3"},{url:"egg-scape/power-up-transform.mp3"},{url:"egg-scape/power-down-transform.mp3"},{url:"egg-scape/miss.mp3"},{url:"egg-scape/music.mp3",loop:!0},{url:"egg-scape/hero-music.mp3"},{url:"egg-scape/triple-cmon.mp3",loc:!0},{url:"egg-scape/triple-i-lost-a-shoe.mp3",loc:!0},{url:"egg-scape/triple-selfie.mp3",loc:!0},{url:"egg-scape/triple-yeyahh.mp3",loc:!0},{url:"egg-scape/triple-yeah-woo-yeah.mp3",loc:!0},{url:"egg-scape/triple-giggling.mp3",loc:!0},{url:"egg-scape/hudson-hmmm.mp3",loc:!0},{url:"egg-scape/hudson-no-way.mp3",loc:!0},{url:"egg-scape/hudson-hello.mp3",loc:!0},{url:"egg-scape/hudson-alright-gameshakers.mp3",loc:!0},{url:"egg-scape/hudson-later-gators.mp3",loc:!0},{url:"egg-scape/hudson-cool.mp3",loc:!0},{url:"egg-scape/kenzie-aww.mp3",loc:!0},{url:"egg-scape/kenzie-jeez-louise.mp3",loc:!0},{url:"egg-scape/kenzie-fully-charged.mp3",loc:!0},{url:"egg-scape/kenzie-its-kenzie.mp3",loc:!0},{url:"egg-scape/kenzie-easy-squeezy.mp3",loc:!0},{url:"egg-scape/kenzie-nice.mp3",loc:!0},{url:"egg-scape/babe-problem.mp3",loc:!0},{url:"egg-scape/babe-upsy-daisy.mp3",loc:!0},{url:"egg-scape/babe-here-i-come.mp3",loc:!0},{url:"egg-scape/babe-woo.mp3",loc:!0},{url:"egg-scape/babe-cool.mp3",loc:!0}],"abducktion-audio":[{url:"abducktion/background-music.wav",loop:!0},{url:"abducktion/powerup-music.mp3"},{url:"abducktion/laser-warning.mp3"},{url:"abducktion/ufo-float.wav",loop:!0},{url:"abducktion/ufo-move.wav"},{url:"abducktion/ufo-stop.wav"},{url:"abducktion/laser.mp3"},{url:"abducktion/teleport-1.mp3"},{url:"abducktion/teleport-2.mp3"},{url:"abducktion/scale-down.mp3"},{url:"abducktion/scale-up.mp3"},{url:"abducktion/correct-1.mp3"},{url:"abducktion/correct-2.mp3"},{url:"abducktion/correct-3.mp3"},{url:"abducktion/error.mp3"},{url:"abducktion/laser-down.mp3"},{url:"abducktion/laser-up.mp3"},{url:"abducktion/water-1.mp3"},{url:"abducktion/water-2.mp3"},{url:"abducktion/duck-move-1.mp3"},{url:"abducktion/duck-move-2.mp3"},{url:"abducktion/duck-move-3.mp3"},{url:"abducktion/expand-1.mp3"},{url:"abducktion/expand-2.mp3"},{url:"abducktion/expand-3.mp3"},{url:"abducktion/pop-1.mp3"},{url:"abducktion/pop-2.mp3"},{url:"abducktion/bang-1.mp3"},{url:"abducktion/bang-2.mp3"},{url:"abducktion/bang-3.mp3"},{url:"abducktion/bang-4.mp3"},{url:"abducktion/arc-positive-1.mp3",loc:!0},{url:"abducktion/arc-positive-2.mp3",loc:!0},{url:"abducktion/arc-positive-3.mp3",loc:!0},{url:"abducktion/arc-positive-4.mp3",loc:!0},{url:"abducktion/arc-negative-1.mp3",loc:!0},{url:"abducktion/arc-negative-2.mp3",loc:!0},{url:"abducktion/ciara-negative-1.mp3",loc:!0},{url:"abducktion/ciara-negative-2.mp3",loc:!0},{url:"abducktion/ciara-negative-3.mp3",loc:!0},{url:"abducktion/ciara-negative-4.mp3",loc:!0},{url:"abducktion/ciara-positive-1.mp3",loc:!0},{url:"abducktion/ciara-positive-2.mp3",loc:!0},{url:"abducktion/prudence-positive-1.mp3",loc:!0},{url:"abducktion/prudence-positive-2.mp3",loc:!0},{url:"abducktion/prudence-negative-1.mp3",loc:!0},{url:"abducktion/prudence-negative-2.mp3",loc:!0},{url:"abducktion/prudence-negative-3.mp3",loc:!0},{url:"abducktion/prudence-negative-4.mp3",loc:!0},{url:"abducktion/warwick-negative-1.mp3",loc:!0},{url:"abducktion/warwick-negative-2.mp3",loc:!0},{url:"abducktion/warwick-negative-3.mp3",loc:!0},{url:"abducktion/warwick-negative-4.mp3",loc:!0},{url:"abducktion/warwick-negative-5.mp3",loc:!0},{url:"abducktion/warwick-negative-6.mp3",loc:!0},{url:"abducktion/warwick-positive-1.mp3",loc:!0},{url:"abducktion/warwick-positive-2.mp3",loc:!0},{url:"abducktion/warwick-positive-3.mp3",loc:!0}],"striker-audio":[{url:"striker/drone-takeoff.mp3"},{url:"striker/drone-fast.wav"},{url:"striker/drone-slow.wav"},{url:"striker/splat-5.mp3"},{url:"striker/splat-4.mp3"},{url:"striker/swoosh-1.mp3"},{url:"striker/blast.mp3"},{url:"striker/robot-move.mp3"},{url:"striker/time-running-out.mp3"},{url:"striker/button-whack.mp3"},{url:"striker/power-up-transform.mp3"},{url:"striker/power-down-transform.mp3"},{url:"striker/bell.mp3"},{url:"striker/gun-fire.mp3"},{url:"striker/marker-hit.mp3"},{url:"striker/step-1.mp3"},{url:"striker/step-2.mp3"},{url:"striker/music-intro.mp3"},{url:"striker/ratchet.mp3"},{url:"striker/metal-bang-2.mp3"},{url:"striker/goop.mp3"},{url:"striker/bubble-pop-1.mp3"},{url:"striker/rail-up.mp3"},{url:"striker/rail-down.mp3"},{url:"striker/tick-up.mp3"},{url:"striker/ramp.mp3"},{url:"striker/pop-1.mp3"},{url:"striker/pop-2.mp3"},{url:"striker/pop-3.mp3"},{url:"striker/poof-1.mp3"},{url:"striker/poof-2.mp3"},{url:"striker/poof-3.mp3"},{url:"striker/poof-4.mp3"},{url:"striker/swoosh-big.mp3"},{url:"striker/hero-music-intro.mp3"},{url:"striker/hero-music-loop.mp3"},{url:"striker/drone-hover.wav",loop:!0},{url:"striker/music-loop.wav",loop:!0},{url:"striker/ambience.mp3",loop:!0},{url:"striker/henry-lets-go.mp3",loc:!0},{url:"striker/henry-no-2.mp3",loc:!0},{url:"striker/henry-er.mp3",loc:!0},{url:"striker/henry-shocked.mp3",loc:!0},{url:"striker/henry-feels-good.mp3",loc:!0},{url:"striker/henry-yeahh.mp3",loc:!0}],"crazy-golf-audio":[{url:"crazy-golf/easy-peasy.mp3",loc:!0},{url:"crazy-golf/incorrect.mp3",loc:!0},{url:"crazy-golf/making-you-like-me.mp3",loc:!0},{url:"crazy-golf/missing-sock.mp3",loc:!0},{url:"crazy-golf/no-cause-for-concern.mp3",loc:!0},{url:"crazy-golf/several-ways.mp3",loc:!0},{url:"crazy-golf/so-easy.mp3",loc:!0},{url:"crazy-golf/some-assistance.mp3",loc:!0},{url:"crazy-golf/splosh-1.mp3"},{url:"crazy-golf/splosh-2.mp3"},{url:"crazy-golf/splosh-3.mp3"},{url:"crazy-golf/hit-ball-1.mp3"},{url:"crazy-golf/hit-ball-2.mp3"},{url:"crazy-golf/hit-ball-3.mp3"},{url:"crazy-golf/ball-ping-1.mp3"},{url:"crazy-golf/ball-ping-2.mp3"},{url:"crazy-golf/ball-ping-3.mp3"},{url:"crazy-golf/pot-ball.mp3"},{url:"crazy-golf/cute-pop.mp3"},{url:"crazy-golf/hiss.mp3"},{url:"crazy-golf/door-open.mp3"},{url:"crazy-golf/robot-move.mp3"},{url:"crazy-golf/arrow.mp3"},{url:"crazy-golf/hit-1.mp3"},{url:"crazy-golf/hit-2.mp3"},{url:"crazy-golf/hit-3.mp3"},{url:"crazy-golf/hit-4.mp3"},{url:"crazy-golf/hit-5.mp3"},{url:"crazy-golf/marker-hit.mp3"},{url:"crazy-golf/smash-vent-1.mp3"},{url:"crazy-golf/smash-vent-2.mp3"},{url:"crazy-golf/smash-vent-3.mp3"},{url:"crazy-golf/space-ambience.mp3",loop:!0},{url:"crazy-golf/tick-up.mp3"},{url:"crazy-golf/touch-start-1.mp3"},{url:"crazy-golf/touch-start-2.mp3"},{url:"crazy-golf/touch-start-3.mp3"},{url:"crazy-golf/teleport-1.mp3"},{url:"crazy-golf/teleport-2.mp3"},{url:"crazy-golf/servo-short.mp3"},{url:"crazy-golf/unlock-bleep.mp3"},{url:"crazy-golf/wind-up.mp3"},{url:"crazy-golf/wind-down.mp3"},{url:"crazy-golf/rocket-1.mp3"},{url:"crazy-golf/rocket-2.mp3"},{url:"crazy-golf/shield-lose.mp3"},{url:"crazy-golf/thruster-loop.wav",loop:!0},{url:"crazy-golf/shield-loop.wav",loop:!0},{url:"crazy-golf/music.wav",loop:!0},{url:"crazy-golf/frankie-theme.mp3"},{url:"crazy-golf/frankie-theme-loop.wav",loop:!0}],"game-over-audio":[{url:"game-over/swish-long-1.mp3"},{url:"game-over/swish-long-2.mp3"},{url:"game-over/swish-long-3.mp3"},{url:"game-over/tick-up.mp3"}],"claw-audio-assets":[{url:"claw/servo-start.mp3"},{url:"claw/servo-loop.mp3",loop:!0},{url:"claw/servo-stop.mp3"},{url:"claw/servo.mp3"},{url:"claw/ratchet.mp3"},{url:"claw/balls-rustle-1.mp3"},{url:"claw/balls-rustle-2.mp3"},{url:"claw/balls-rustle-3.mp3"},{url:"claw/balls-rustle-4.mp3"},{url:"claw/balls-rustle-5.mp3"},{url:"claw/ballpit-land.mp3"},{url:"claw/button-whack.mp3"},{url:"claw/joystick-start.mp3"},{url:"claw/joystick-stop.mp3"},{url:"claw/win.mp3"},{url:"claw/coin-drop.mp3"},{url:"claw/lift.mp3"},{url:"claw/clamp.mp3"},{url:"claw/grid.mp3"},{url:"claw/collect.mp3"},{url:"claw/ball-hit-1.mp3"},{url:"claw/ball-hit-2.mp3"},{url:"claw/turn-off.mp3"},{url:"claw/lose.mp3"}]},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Scene=function(e){function t(t){var i=e.call(this)||this;return i.tweens=new Array,i.render=!1,i.velocity=0,i.game=t,i.interactive=!0,i.container=new DisplayObjectContainer,i.addChild(i.container),i.container.interactive=!0,i.paused=!1,i.interactionLocked=!0,i.keyDownIDs=[],i.wristbandDialogueIsOpen=!1,i}return __extends(t,e),t.prototype.rotatePause=function(){this.pausedRotated=!0},t.prototype.pause=function(e){0!=this.game.initLoaded&&(this.game.ui.pause(),this.game.powerUpManager.pause(),1!=this.transitioning&&1!=this.interactionLocked&&1!=this.paused&&(this.paused=!0,this.game.ui.setUI("pause"),this.transitioning=!1,this.interactionLocked=!0,this.pauseContainer=Game.displayStore.getContainer("pause-screen-overlay-container"),this.pauseBGElementLeft=Game.displayStore.getSprite("pause/pause-bg-left"),this.pauseBGElementRight=Game.displayStore.getSprite("pause/pause-bg-right"),this.pauseBGElementRight.position.x=Game.stageWidth,this.pauseBGElementLeft.position.y=Game.stageHeight,this.pauseBGElementRight.position.y=Game.stageHeight,this.pauseBGElementLeft.scale.y=1.05,this.pauseBGElementRight.scale.y=1.05,this.pauseOverlayBG=this.pauseContainer.getSprite("pause-overlay"),this.pauseOverlayBG.width=Game.stageWidth,this.pauseOverlayBG.height=Game.stageHeight,this.pausedTitle=Game.displayStore.getSprite("global/paused-title"),this.pauseTitle=Game.displayStore.getBitmapText("global/pause-font"),Game.stringsManager.setTextString(this.pauseTitle,"paused"),this.pauseTitle.position.x=Game.stageWidth/2-this.pauseTitle.width/2+Game.stringsManager.getTextOffset("paused").xOffset,this.pauseTitle.position.y=0+Game.stringsManager.getTextOffset("paused").yOffset,this.pauseTitle.tint=3740929,this.pausePanelWoodLeft=Game.displayStore.getSprite("global/pause-panel-wood"),this.pausePanelWoodRight=Game.displayStore.getSprite("global/pause-panel-wood"),this.pausePanelWoodLeft.position.x=Game.stageWidth/2-this.pausePanelWoodLeft.width,this.pausePanelWoodRight.position.x=Game.stageWidth/2+this.pausePanelWoodLeft.width,this.pausePanelWoodRight.scale.x=-1,this.pauseContainer.addChild(this.pauseBGElementLeft),this.pauseContainer.addChild(this.pauseBGElementRight),this.pauseContainer.addChild(this.pausePanelWoodLeft),this.pauseContainer.addChild(this.pausePanelWoodRight),this.pauseContainer.addChild(this.pauseTitle),this.container.addChild(this.pauseContainer),this.pauseResumeTween(this.transitionTween,"pause"),this.pauseTimeline&&this.pauseTimeline.kill(),this.pauseTimeline=new TimelineMax,this.interactionLocked=!1))},t.prototype.unlockInput=function(e){e.interactionLocked=!1},t.prototype.resume=function(){0!=this.game.initLoaded&&(this.game.ui.resume(),this.game.powerUpManager.resume(),this.removePauseElements())},t.prototype.removePauseElements=function(){this.pauseContainer&&(this.container.removeChild(this.pauseContainer),this.pauseContainer.removeChild(this.pauseBGElementLeft),this.pauseContainer.removeChild(this.pauseBGElementRight),this.pauseContainer.removeChild(this.pausePanelWoodLeft),this.pauseContainer.removeChild(this.pausePanelWoodRight),this.pauseContainer.removeChild(this.pausedTitle)),Game.displayStore.returnPooledItem(this.pausePanelWoodLeft),Game.displayStore.returnPooledItem(this.pausePanelWoodRight),this.pauseTimeline=this.killTween(this.pauseTimeline),this.pauseOverlayBG=null,this.pausedRotated=!1,this.paused=!1,this.pauseResumeTween(this.transitionTween,"resume")},t.prototype.restore=function(){this.interactionLocked=!1},t.prototype.destroy=function(){this.interactionLocked=!0;for(var e=this.container.children.length-1;e>=0;e--)this.container.removeChild(this.container.getChildAt(e));this.tweens=[],this.uiContainerRef=null,this.uiMessageContainerRef=null,this.game.powerUpManager.sceneDestroy(this.id),this.game.ui.sceneDestroy(),Game.saveProgress(),Game.ticketPool.resetAllTickets(),this.pauseTimeline=this.killTween(this.pauseTimeline)},t.prototype.init=function(e){this.paused=!1,this.setBackgroundColor(16777215)},t.prototype.setBackgroundColor=function(e){Game.renderer.backgroundColor=e},t.prototype.addUI=function(e,t){e&&(this.addChild(t),this.addChild(e),this.uiMessageContainerRef=t,this.uiContainerRef=e)},t.prototype.uiClicked=function(e){if("soundonbutton"!=e.id&&"soundoffbutton"!=e.id||this.game.ui.soundToggled(),"help-button"==e.id){if(1==this.interactionLocked)return;this.interactionLocked=!0,this.game.setScene("helpScene",!1)}if("powerup-button"==e.id&&3!=this.game.gameLaunchMode&&this.game.powerUpManager.activatePowerUp(),"home-button"==e.id){if(1==this.interactionLocked)return;this.interactionLocked=!0,this.paused=!1;var t=this;Game.assetChunkManager.generateLoadChunkParams("hub"),this.game.loadAssets(Game.assetChunkManager.getLoadAssets(),!0,function(){t.removePauseElements(),t.game.setScene(Game.assetChunkManager.getTargetInitialScene(),!0,[!1])})}},t.prototype.tutorialOverlayClosed=function(){},t.prototype.secondChanceUse=function(){},t.prototype.uiRolledOver=function(e){},t.prototype.uiRolledOut=function(e){},t.prototype.downOnUI=function(e){},t.prototype.upOnUI=function(e){},t.prototype.keyDown=function(e){for(var t=0;t<this.keyDownIDs.length;t++)if(this.keyDownIDs[t]==e)return;this.keyDownIDs.push(e)},t.prototype.keyUp=function(e){3!=this.game.gameLaunchMode&&"x"==e&&this.game.powerUpManager.activatePowerUp();for(var t=0;t<this.keyDownIDs.length;t++)this.keyDownIDs[t]==e&&this.keyDownIDs.splice(this.keyDownIDs.indexOf(e),1)},t.prototype.activatePowerUpEffect=function(){},t.prototype.deactivatePowerUpEffect=function(){},t.prototype.rolloutCustomButtonKeyboard=function(e){},t.prototype.rolloverCustomButtonKeyboard=function(e){},t.prototype.selectCustomButtonKeyboard=function(e){},t.prototype.tick=function(e){0!=this.game.initLoaded&&0==this.interactive&&(this.interactive=!0)},t.prototype.resize=function(e){this.container.scale.x=e,this.container.scale.y=e},t.prototype.initTransitionOut=function(e){if(0==this.game.initLoaded)return this.interactionLocked=!1,void(this.transitioning=!1);this.transitioning=!0,this.interactionLocked=!0,this.setUpTransition(),this.transitionMask.scale.x=this.transitionMask.scale.y=1.2,this.transitionTween=TweenMax.to(this.transitionMask.scale,e,{x:.001,y:.001,ease:Expo.easeOut,onUpdate:this.updateTransition,onUpdateParams:[this]})},t.prototype.initTransitionIn=function(e){if(0==this.game.initLoaded)return this.interactionLocked=!1,void(this.transitioning=!1);this.transitioning=!0,this.interactionLocked=!0,this.setUpTransition(),this.transitionMask.scale.x=this.transitionMask.scale.y=.001,this.transitionTween=TweenMax.to(this.transitionMask.scale,e,{x:1.2,y:1.2,ease:Expo.easeIn,onComplete:this.killTransitionAssets,onCompleteParams:[this],onUpdate:this.updateTransition,onUpdateParams:[this]})},t.prototype.updateTransition=function(e){e.transitionMask.width<Game.stageWidth&&(e.transitionBarLeft.width=(Game.stageWidth-e.transitionMask.width)/2,e.transitionBarRight.width=e.transitionBarLeft.width,e.transitionBarRight.position.x=e.transitionBarLeft.width+e.transitionMask.width),e.transitionMask.height<Game.stageHeight&&(e.transitionBarTop.height=(Game.stageHeight-e.transitionMask.height)/2,e.transitionBarBottom.height=e.transitionBarTop.height,e.transitionBarBottom.position.y=e.transitionBarTop.height+e.transitionMask.height)},t.prototype.setUpTransition=function(){this.transitionHolder=Game.displayStore.getContainer("transition-holder"),1==this.game.initLoaded&&(this.transitionMask=this.transitionHolder.getContainer("transition-mask"),this.transitionBarTop=this.transitionHolder.getSprite("black-area-top"),this.transitionBarLeft=this.transitionHolder.getSprite("black-area-left"),this.transitionBarRight=this.transitionHolder.getSprite("black-area-right"),this.transitionBarBottom=this.transitionHolder.getSprite("black-area-bottom"),this.transitionBarRight.position.x=Game.stageWidth,this.transitionBarBottom.position.y=Game.stageHeight,this.transitionBarTop.width=this.transitionBarBottom.width=Game.stageWidth,this.transitionBarLeft.height=this.transitionBarRight.height=Game.stageHeight,this.transitionMask.setRegPoint(512,512),this.transitionMask.position.x=Game.stageWidth/2,this.transitionMask.position.y=Game.stageHeight/2,this.transitionCornerTopLeft=this.transitionMask.getSprite("black-corner-top-left"),this.transitionCornerTopRight=this.transitionMask.getSprite("black-corner-top-right"),this.transitionCornerBottomRight=this.transitionMask.getSprite("black-corner-bottom-right"),this.transitionCornerBottomLeft=this.transitionMask.getSprite("black-corner-bottom-left"),this.transitionCornerTopLeft.texture.baseTexture.scaleMode=1,this.transitionCornerTopRight.scale.x=-1,this.transitionCornerTopRight.position.x=1024,this.transitionCornerBottomRight.scale.x=-1,this.transitionCornerBottomRight.scale.y=-1,this.transitionCornerBottomRight.position.x=1024,this.transitionCornerBottomRight.position.y=1024,this.transitionCornerBottomLeft.scale.y=-1,this.transitionCornerBottomLeft.position.y=1024),this.uiContainerRef&&this.uiContainerRef.addChild(this.transitionHolder)},t.prototype.killTransitionAssets=function(e){e.transitionHolder.parent&&e.uiContainerRef&&e.uiContainerRef.removeChild(e.transitionHolder),e.transitioning=!1,e.interactionLocked=!1,e.transitionTween&&e.transitionTween.kill()},t.prototype.pauseResumeTween=function(e,t,i){e&&("pause"==t?(e.totalProgress()>0&&e.totalProgress()<1||0*e.totalProgress()!=0)&&0==e.paused()&&e.pause():"resume"==t&&(e.totalProgress()>0&&e.totalProgress()<1||0*e.totalProgress()!=0)&&1==e.paused()&&e.resume())},t.prototype.killTween=function(e){return e&&(e.kill(),e=null),e},t.prototype.shuffleArray=function(e){for(var t,i,s=e.length;s>0;)i=Math.floor(Math.random()*s),t=e[--s],e[s]=e[i],e[i]=t;return e},t.prototype.simpleEase=function(e,t,i){return e+=(t-e)/i,e=Math.round(1e3*e)/1e3},t.prototype.onLoadUpdate=function(e,t){},t.prototype.getPreloaderAssetList=function(){return[]},t}(PIXI.Container),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Sprite=function(e){function t(t){var i=e.call(this,t)||this;return i.neverFlush=!1,i.origX=0,i.origY=0,i.origAnchor={x:0,y:0,compensate:!1},i.defaultAnchor=!0,i.pooled=!1,i.pooledActive=!1,i.disposeAssetsOnDestroy=!1,i}return __extends(t,e),t.prototype.addChild=function(t){e.prototype.addChild.call(this,t),1==this.pooled&&(this.pooledActive=!0)},t.prototype.destroy=function(){1!=this.disposeAssetsOnDestroy?e.prototype.destroy.call(this):e.prototype.destroy.call(this,!0)},t.prototype.disposeAssets=function(){1==Game.displayStore.checkTextureDeletable(this)&&(this.disposeAssetsOnDestroy=!0,PIXI.Texture.removeFromCache(this.texture),PIXI.BaseTexture.removeFromCache(this.texture.baseTexture))},t.prototype.destroyRenderTexture=function(){this.texture.destroy(!0)},t.prototype.resampleTextureLowEndIPad=function(){},t.prototype.setTextureResolution=function(e){this.texture.baseTexture.resolution=e,this.texture.baseTexture.update()},t.prototype.resizeItem=function(){},t.prototype.setWidth=function(e){this._width=e},t.prototype.setHeight=function(e){this._height=e},t.prototype.setRegPoint=function(e,t,i){this.anchor.x=e,this.anchor.y=t,1==i&&(this.position.x=this.width*e+this.position.x,this.position.y=this.height*t+this.position.y)},t}(PIXI.Sprite),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Spine=function(e){function t(t){var i=e.call(this,t)||this;return i.neverFlush=!1,i.origX=0,i.origY=0,i.pooled=!1,i.pooledActive=!1,i.disposeAssetsOnDestroy=!1,i}return __extends(t,e),t.prototype.addChild=function(t){e.prototype.addChild.call(this,t),1==this.pooled&&(this.pooledActive=!0)},t.prototype.setTextureResolution=function(e){this.scale.x=1/e,this.scale.y=1/e},t.prototype.disposeAssets=function(){if(1==Game.displayStore.checkTextureDeletable(this)){this.disposeAssetsOnDestroy=!0;for(var e=0;e<this.children.length;e++){for(var t=this.children[e],i=0;i<t.children.length;i++){var s=t.children[i];s.texture.destroy(!0),s=null}t=null}PIXI.Texture.removeFromCache(this.textureURL),PIXI.BaseTexture.removeFromCache(this.textureURL),PIXI.Texture.removeFromCache(this.atlasTextureRefID),PIXI.BaseTexture.removeFromCache(this.atlasTextureRefID)}this.slotContainers=null,this.spineData=null,this.skeleton=null,this.data=null,this.state=null,this.storedState=null},t.prototype.destroy=function(){1!=this.disposeAssetsOnDestroy?e.prototype.destroy.call(this):e.prototype.destroy.call(this,!0)},t.prototype.setAtlasTextureRefID=function(e){this.atlasTextureRefID=e},t.prototype.changeBaseTexture=function(e){for(s=0;s<this.slotContainers.length;s++)for(var t=this.slotContainers[s],i=0;i<t.children.length;i++)t.children[i].texture.baseTexture=e;for(var s=0;s<this.skeleton.slots.length;s++){var o=this.skeleton.slots[s];o.attachment&&(o.attachment.rendererObject.page.rendererObject=e)}},t.prototype.setAnim=function(e,t){this.lastTime=Date.now(),this.currentAnim=e,this.loop=t,this.state.setAnimation(0,e,t)},t.prototype.setSkin=function(e){this.skeleton.setSkinByName(e),this.skeleton.setSlotsToSetupPose()},t.prototype.pause=function(){this.currentAnim&&(this.currentAnimTime=this.state.currentTime,this.storedState=this.state,this.state.tracks[0]&&(this.storedTime=this.state.tracks[0].trackTime),this.state.clearTracks())},t.prototype.resume=function(){this.currentAnim&&(this.state=this.storedState,this.state.setAnimation(0,this.currentAnim,this.loop),this.state.tracks[0].trackTime=this.storedTime)},t.prototype.rewindAndStop=function(){},t.prototype.resizeItem=function(){},t}(PIXI.spine.Spine),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),AnimatedSprite=function(e){function t(t){var i=e.call(this,t)||this;i.neverFlush=!1,i.origX=0,i.origY=0,i.origAnchor={x:0,y:0,compensate:!1},i.defaultAnchor=!0,i.pooled=!1,i.pooledActive=!1,i.disposeAssetsOnDestroy=!1,i.texturesStore=new Array;for(var s=0;s<t.length;s++)i.texturesStore.push(t[s]);return i}return __extends(t,e),t.prototype.addChild=function(t){e.prototype.addChild.call(this,t),1==this.pooled&&(this.pooledActive=!0)},t.prototype.setJsonBaseTextureRef=function(e){this.jsonBaseTextureRefID=e},t.prototype.setTextureResolution=function(e){var t=PIXI.utils.TextureCache[this.textureURL];t.baseTexture.resolution=e,t.baseTexture.update()},t.prototype.disposeAssets=function(){if(1==Game.displayStore.checkTextureDeletable(this)){this.disposeAssetsOnDestroy=!0,PIXI.Texture.removeFromCache(this.texture),PIXI.BaseTexture.removeFromCache(this.texture.baseTexture);for(var e=0;e<this.texturesStore.length;e++)PIXI.Texture.removeFromCache(this.texturesStore[e]),PIXI.BaseTexture.removeFromCache(this.texturesStore[e].baseTexture);PIXI.Texture.removeFromCache(this.jsonBaseTextureRefID),PIXI.BaseTexture.removeFromCache(this.jsonBaseTextureRefID)}},t.prototype.destroy=function(){1!=this.disposeAssetsOnDestroy?e.prototype.destroy.call(this):e.prototype.destroy.call(this,!0)},t.prototype.resizeItem=function(){},t.prototype.setRegPoint=function(e,t,i){this.anchor.x=e,this.anchor.y=t,1==i&&(this.position.x=this.width*e+this.position.x,this.position.y=this.height*t+this.position.y)},t}(PIXI.extras.AnimatedSprite),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),BitmapText=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.neverFlush=!1,s.origX=0,s.origY=0,s.defaultAnchor=!0,s.pooled=!1,s.pooledActive=!1,s.disposeAssetsOnDestroy=!1,s}return __extends(t,e),t.prototype.addChild=function(t){e.prototype.addChild.call(this,t),1==this.pooled&&(this.pooledActive=!0)},t.prototype.setTextureResolution=function(e){var t=PIXI.utils.TextureCache[this.textureURL];t.baseTexture.resolution=e,t.baseTexture.update()},t.prototype.saveTexture=function(){this.pixiTex=PIXI.Texture.fromImage(this.textureURL)},t.prototype.disposeAssets=function(){1==Game.displayStore.checkTextureDeletable(this)&&(this.disposeAssetsOnDestroy=!0,this.pixiTex.destroy(!0),PIXI.Texture.removeFromCache(this.pixiTex),PIXI.BaseTexture.removeFromCache(this.pixiTex.baseTexture),PIXI.Texture.removeFromCache(this.xmlTextureRefID),PIXI.BaseTexture.removeFromCache(this.xmlTextureRefID))},t.prototype.destroy=function(){1!=this.disposeAssetsOnDestroy?e.prototype.destroy.call(this):e.prototype.destroy.call(this,!0)},t.prototype.setXMLBaseTextureRef=function(e){this.xmlTextureRefID=e},t.prototype.resizeItem=function(){},t.prototype.setRegPoint=function(e,t,i){},t}(PIXI.extras.BitmapText),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),LoadingScene=function(e){function t(t){var i=e.call(this,t)||this;return i.endPreloadTriggered=!1,i.id="loadingScene",i}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.setBackgroundColor(13421772),this.game.ui.setUI("none"),this.ticker=0,this.sky=Game.displayStore.getSprite("preloader/sky"),this.daySea=Game.displayStore.getSprite("preloader/day-sea"),this.nightSky=Game.displayStore.getSprite("preloader/night-sky"),this.nightSea=Game.displayStore.getSprite("preloader/night-sea"),this.sunrise=Game.displayStore.getSprite("preloader/sun-rise"),this.sunriseSea=Game.displayStore.getSprite("preloader/sun-rise"),this.island1=Game.displayStore.getSprite("preloader/island-1"),this.island2=Game.displayStore.getSprite("preloader/island-2"),this.island3=Game.displayStore.getSprite("preloader/island-3"),this.island4=Game.displayStore.getSprite("preloader/island-4"),this.island5=Game.displayStore.getSprite("preloader/island-5"),this.island1Shadow=Game.displayStore.getSprite("preloader/island-1-shadow"),this.island2Shadow=Game.displayStore.getSprite("preloader/island-2-shadow"),this.island3Shadow=Game.displayStore.getSprite("preloader/island-3-shadow"),this.island4Shadow=Game.displayStore.getSprite("preloader/island-4-shadow"),this.island5Shadow=Game.displayStore.getSprite("preloader/island-5-shadow"),this.island1Shadow2=Game.displayStore.getSprite("preloader/island-1-shadow"),this.island2Shadow2=Game.displayStore.getSprite("preloader/island-2-shadow"),this.island3Shadow2=Game.displayStore.getSprite("preloader/island-3-shadow"),this.island4Shadow2=Game.displayStore.getSprite("preloader/island-4-shadow"),this.island5Shadow2=Game.displayStore.getSprite("preloader/island-5-shadow"),this.cloud1=Game.displayStore.getSprite("preloader/cloud"),this.cloud2=Game.displayStore.getSprite("preloader/cloud"),this.cloud3=Game.displayStore.getSprite("preloader/cloud"),this.cloud4=Game.displayStore.getSprite("preloader/cloud"),this.cloud5=Game.displayStore.getSprite("preloader/cloud"),this.cloud6=Game.displayStore.getSprite("preloader/cloud"),this.cloud7=Game.displayStore.getSprite("preloader/cloud"),this.stars=Game.displayStore.getSprite("preloader/stars"),this.moonHolder=Game.displayStore.getContainer("preloader/moon-holder"),this.sun=Game.displayStore.getSprite("preloader/sun"),this.moon=Game.displayStore.getSprite("preloader/moon"),this.moonBackground=this.moonHolder.getSprite("preloader/moon-background"),this.sky.width=Game.stageWidth,this.sky.height=Game.stageHeight/2,this.sky.position.x=0,this.sky.position.y=Game.stageHeight/2,this.sky.alpha=1,this.nightSky.width=Game.stageWidth,this.nightSky.height=Game.stageHeight/2,this.nightSky.position.x=0,this.nightSky.position.y=Game.stageHeight/2,this.nightSky.alpha=0,this.daySea.position.x=0,this.daySea.position.y=Game.stageHeight,this.daySea.width=Game.stageWidth,this.daySea.height=Game.stageHeight/2,this.nightSea.width=Game.stageWidth,this.nightSea.height=Game.stageHeight/2,this.nightSea.position.x=0,this.nightSea.position.y=Game.stageHeight,this.nightSea.alpha=0,this.sunrise.width=Game.stageWidth,this.sunriseSea.width=Game.stageWidth,this.sunrise.alpha=1,this.sunriseSea.rotation=Math.PI,this.sunriseSea.alpha=.7,this.sunrise.position.x=Game.stageWidth/2,this.sunriseSea.position.x=Game.stageWidth/2,this.sunrise.position.y=Game.stageHeight/2,this.sunriseSea.position.y=Game.stageHeight/2,this.island1.position.x=100,this.island2.position.x=300,this.island5.position.x=500,this.island3.position.x=700,this.island4.position.x=900,this.island1.position.y=Game.stageHeight/2,this.island2.position.y=Game.stageHeight/2,this.island3.position.y=Game.stageHeight/2,this.island4.position.y=Game.stageHeight/2,this.island5.position.y=Game.stageHeight/2-20,this.island1Shadow.position.x=this.island1Shadow2.position.x=this.island1.position.x,this.island2Shadow.position.x=this.island2Shadow2.position.x=this.island2.position.x,this.island3Shadow.position.x=this.island3Shadow2.position.x=this.island3.position.x,this.island4Shadow.position.x=this.island4Shadow2.position.x=this.island4.position.x,this.island5Shadow.position.x=this.island5Shadow2.position.x=this.island5.position.x,this.island1Shadow.position.y=Game.stageHeight/2+35,this.island2Shadow.position.y=Game.stageHeight/2+30,this.island3Shadow.position.y=Game.stageHeight/2+30,this.island4Shadow.position.y=Game.stageHeight/2+25,this.island5Shadow.position.y=Game.stageHeight/2+30,this.island1Shadow.scale.x=this.island1Shadow.scale.y=.5,this.island2Shadow.scale.x=this.island2Shadow.scale.y=.5,this.island3Shadow.scale.x=.8,this.island3Shadow.scale.y=.3,this.island4Shadow.scale.x=this.island4Shadow.scale.y=.6,this.island1Shadow.alpha=.5,this.island2Shadow.alpha=.5,this.island3Shadow.alpha=.5,this.island4Shadow.alpha=.5,this.island5Shadow.alpha=.5,this.island1Shadow2.position.y=Game.stageHeight/2+35,this.island2Shadow2.position.y=Game.stageHeight/2+30,this.island3Shadow2.position.y=Game.stageHeight/2+30,this.island4Shadow2.position.y=Game.stageHeight/2+25,this.island1Shadow2.scale.x=this.island1Shadow2.scale.y=.5,this.island2Shadow2.scale.x=this.island2Shadow2.scale.y=.5,this.island3Shadow2.scale.x=.8,this.island3Shadow2.scale.y=.3,this.island4Shadow2.scale.x=this.island4Shadow2.scale.y=.6,this.island1Shadow2.alpha=.5,this.island2Shadow2.alpha=.5,this.island3Shadow2.alpha=.5,this.island4Shadow2.alpha=.5,this.cloud1.position.x=100,this.cloud1.position.y=100,this.cloud1.scale.x=this.cloud1.scale.y=2,this.cloud2.position.x=300,this.cloud2.position.y=80,this.cloud2.scale.x=this.cloud2.scale.y=1.5,this.cloud2.alpha=.9,this.cloud3.position.x=600,this.cloud3.position.y=250,this.cloud3.scale.x=this.cloud3.scale.y=.7,this.cloud3.alpha=.8,this.cloud4.position.x=-300,this.cloud4.position.y=200,this.cloud4.scale.x=this.cloud4.scale.y=2.5,this.cloud4.alpha=1,this.cloud7.position.x=-300,this.cloud7.position.y=100,this.cloud7.scale.x=this.cloud7.scale.y=2,this.cloud7.alpha=.8,this.cloud5.position.x=-100,this.cloud5.position.y=150,this.cloud5.scale.x=this.cloud5.scale.y=1.8,this.cloud5.alpha=.8,this.cloud6.position.x=-400,this.cloud6.position.y=180,this.cloud6.scale.x=this.cloud6.scale.y=2,this.cloud6.alpha=1,this.sun.position.x=Game.stageWidth/2,this.sun.position.y=Game.stageHeight/2,this.sun.rotation=-Math.PI/2,this.moonHolder.position.x=Game.stageWidth/2,this.moonHolder.position.y=Game.stageHeight/2,this.moonHolder.rotation=Math.PI/2,this.stars.position.x=Game.stageWidth/2-10,this.stars.position.y=Game.stageHeight/2,this.stars.height=Game.stageHeight/2,this.stars.width=Game.stageWidth,this.container.addChild(this.sky),this.container.addChild(this.nightSky),this.container.addChild(this.stars),this.container.addChild(this.sun),this.container.addChild(this.moonHolder),this.moonHolder.addChild(this.moon),this.moon.position.y=-250,this.container.addChild(this.sunrise),this.container.addChild(this.cloud1),this.container.addChild(this.cloud2),this.container.addChild(this.cloud3),this.container.addChild(this.cloud4),this.container.addChild(this.cloud5),this.container.addChild(this.cloud6),this.container.addChild(this.cloud7),this.container.addChild(this.daySea),this.container.addChild(this.nightSea),this.container.addChild(this.sunriseSea),this.container.addChild(this.island1Shadow),this.container.addChild(this.island2Shadow),this.container.addChild(this.island3Shadow),this.container.addChild(this.island4Shadow),this.container.addChild(this.island5Shadow),this.container.addChild(this.island1Shadow2),this.container.addChild(this.island2Shadow2),this.container.addChild(this.island3Shadow2),this.container.addChild(this.island4Shadow2),this.container.addChild(this.island1),this.container.addChild(this.island2),this.container.addChild(this.island3),this.container.addChild(this.island4),this.container.addChild(this.island5),this.loadingText=Game.displayStore.getBitmapText("preloader/loading-font"),Game.stringsManager.setTextString(this.loadingText,"loading"),this.loadingText.position.x=Game.stageWidth/2-this.loadingText.width/2+Game.stringsManager.getTextOffset("loading").xOffset,this.loadingText.position.y=390+Game.stringsManager.getTextOffset("loading").yOffset,this.loadingText.tint=16734722,this.container.addChild(this.loadingText),this.animation=new TimelineMax,this.skyTimeline=new TimelineMax({repeat:-1}),this.cloudTimeLine=new TimelineMax;this.animation.add([TweenMax.to(this.sun,5,{rotation:this.sun.rotation+2*Math.PI,repeat:-1,ease:Power0.easeInOut}),TweenMax.to(this.moonHolder,5,{rotation:this.moonHolder.rotation+2*Math.PI,repeat:-1,ease:Power0.easeInOut})],0),this.animation.add(TweenMax.to(this.sunrise,5/4,{alpha:0,repeat:-1,yoyo:!0,ease:Power0.easeInOut}),0),this.animation.add(TweenMax.to(this.sunriseSea,5/4,{alpha:0,repeat:-1,yoyo:!0,ease:Power0.easeInOut}),0),this.cloudTimeLine.add(TweenMax.to(this.cloud1.position,3,{x:1200,ease:Power0.easeInOut}),0),this.cloudTimeLine.add(TweenMax.to(this.cloud2.position,5,{x:1200,ease:Power0.easeInOut}),0),this.cloudTimeLine.add(TweenMax.to(this.cloud3.position,4,{x:1200,ease:Power0.easeInOut}),0),this.cloudTimeLine.add(TweenMax.to(this.cloud4.position,4,{x:1300,repeat:-1,ease:Power0.easeInOut}),1),this.cloudTimeLine.add(TweenMax.to(this.cloud5.position,3,{x:1200,repeat:-1,ease:Power0.easeInOut}),2),this.cloudTimeLine.add(TweenMax.to(this.cloud6.position,4,{x:1400,repeat:-1,ease:Power0.easeInOut}),3),this.cloudTimeLine.add(TweenMax.to(this.cloud7.position,3,{x:1200,repeat:-1,ease:Power0.easeInOut}),5),this.skyTimeline.add([TweenMax.to(this.nightSky,.5,{alpha:1,delay:2,ease:Power0.easeInOut}),TweenMax.to(this.nightSky,.5,{alpha:0,delay:4.5,ease:Power0.easeInOut})],0),this.skyTimeline.add([TweenMax.to(this.nightSea,.5,{alpha:1,delay:2,ease:Power0.easeInOut}),TweenMax.to(this.nightSea,.5,{alpha:0,delay:4.5,ease:Power0.easeInOut})],0),this.animation.add(TweenMax.to(this.island1Shadow,3,{alpha:0,repeat:-1,ease:Power0.easeInOut}),0),this.animation.add(TweenMax.to(this.island1Shadow.scale,3,{x:1.3,y:1.3,repeat:-1,ease:Power0.easeInOut}),0),this.animation.add(TweenMax.to(this.island2Shadow,3,{alpha:0,repeat:-1,ease:Power0.easeInOut}),.2),this.animation.add(TweenMax.to(this.island2Shadow.scale,3,{x:1.3,y:1.3,repeat:-1,ease:Power0.easeInOut}),.2),this.animation.add(TweenMax.to(this.island3Shadow,3,{alpha:0,repeat:-1,ease:Power0.easeInOut}),.1),this.animation.add(TweenMax.to(this.island3Shadow.scale,3,{x:1.3,y:1.3,repeat:-1,ease:Power0.easeInOut}),.1),this.animation.add(TweenMax.to(this.island4Shadow,3,{alpha:0,repeat:-1,ease:Power0.easeInOut}),.3),this.animation.add(TweenMax.to(this.island4Shadow.scale,3,{x:1.3,y:1.3,repeat:-1,ease:Power0.easeInOut}),.3),this.animation.add(TweenMax.to(this.island1Shadow2,3,{alpha:0,repeat:-1,ease:Power0.easeInOut}),1.5),this.animation.add(TweenMax.to(this.island1Shadow2.scale,3,{x:1.3,y:1.3,repeat:-1,ease:Power0.easeInOut}),1.5),this.animation.add(TweenMax.to(this.island2Shadow2,3,{alpha:0,repeat:-1,ease:Power0.easeInOut}),1.7),this.animation.add(TweenMax.to(this.island2Shadow2.scale,3,{x:1.3,y:1.3,repeat:-1,ease:Power0.easeInOut}),1.7),this.animation.add(TweenMax.to(this.island3Shadow2,3,{alpha:0,repeat:-1,ease:Power0.easeInOut}),1.6),this.animation.add(TweenMax.to(this.island3Shadow2.scale,3,{x:1.3,y:1.3,repeat:-1,ease:Power0.easeInOut}),1.6),this.animation.add(TweenMax.to(this.island4Shadow2,3,{alpha:0,repeat:-1,ease:Power0.easeInOut}),1.8),this.animation.add(TweenMax.to(this.island4Shadow2.scale,3,{x:1.3,y:1.3,repeat:-1,ease:Power0.easeInOut}),1.8),this.preloaderBarContainerMain=Game.displayStore.getContainer("preloader-bar"),this.preloaderBarContainerMain.position.x=Game.stageWidth/2,this.preloaderBarContainerMain.position.y=520,this.preloaderBarFillMain=this.preloaderBarContainerMain.getSprite("bar-fill");var t=Game.getRandom(0,5);this.animation.totalTime(t),this.skyTimeline.totalTime(t),this.cloudTimeLine.totalTime(t),this.maskElement=new PIXI.Graphics,this.maskElement.moveTo(0,0),this.maskElement.beginFill(16777215),this.maskElement.lineTo(376,0),this.maskElement.lineTo(376,80),this.maskElement.lineTo(0,80),this.maskElement.lineTo(0,0),this.maskElement.endFill(),this.maskElement.position.x=45,this.maskElement.position.y=18,this.preloaderBarContainerMain.addChild(this.maskElement),this.preloaderBarFillMain.mask=this.maskElement,this.maskElement.scale.x=0,this.currentScale=0,this.container.addChild(this.preloaderBarContainerMain)},t.prototype.positionLoadingText=function(){this.loadingText.position.x=this.preloaderBarFillMain.width/2-this.loadingText.width/2},t.prototype.onLoadUpdate=function(e,t){this.currentScale=e/t},t.prototype.tick=function(t){e.prototype.tick.call(this,t),this.ticker++,this.moon.rotation=-this.moonHolder.rotation,this.maskElement.scale.x+=(this.currentScale-this.maskElement.scale.x)/9,this.island5.position.y=260-5*Math.sin(this.ticker/20),this.island5Shadow.scale.x=this.island5Shadow.scale.y=1-.1*Math.sin(this.ticker/20)},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.container.removeChild(this.loadingText),this.container.removeChild(this.preloaderBarContainerMain),this.preloaderBarFillMain.mask=null,this.maskElement.clear(),this.preloaderBarContainerMain.removeChild(this.maskElement),this.animation=this.killTween(this.animation),this.skyTimeline=this.killTween(this.skyTimeline),this.cloudTimeLine=this.killTween(this.skyTimeline),this.barTween=this.killTween(this.barTween),this.fadeTimeline=this.killTween(this.fadeTimeline),this.currentScale=0,Game.displayStore.returnPooledItem(this.cloud1),Game.displayStore.returnPooledItem(this.cloud2),Game.displayStore.returnPooledItem(this.cloud3),Game.displayStore.returnPooledItem(this.cloud4),Game.displayStore.returnPooledItem(this.cloud5),Game.displayStore.returnPooledItem(this.cloud6),Game.displayStore.returnPooledItem(this.cloud7),Game.displayStore.flush(this.getPreloaderAssetList())},t.prototype.getPreloaderAssetList=function(){return["initial-loading-assets"]},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),TitleScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="titleScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.setBackgroundColor(13421772),this.game.ui.setUI("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("games"),this.mainHolder=Game.displayStore.getContainer("title-scene-main-holder"),this.mainHolder.setRegPointPixels(Game.stageWidth/2,Game.stageHeight/2,!0),this.clickArea=Game.displayStore.getSprite("title-scene/click-area"),this.sky=Game.displayStore.getSprite("title-scene/sky"),this.bgTrees=Game.displayStore.getSprite("title-scene/bg-trees"),this.bgOverlay1Right=Game.displayStore.getSprite("title-scene/bg-overlay-1"),this.bgOverlay1Left=Game.displayStore.getSprite("title-scene/bg-overlay-1"),this.bgOverlay2Right=Game.displayStore.getSprite("title-scene/bg-overlay-2"),this.bgOverlay2Left=Game.displayStore.getSprite("title-scene/bg-overlay-2"),this.sunHolder=Game.displayStore.getContainer("title-scene-sun-holder"),this.sunRight=Game.displayStore.getSprite("title-scene/sun"),this.sunLeft=Game.displayStore.getSprite("title-scene/sun"),this.sunShineSmallHolder=Game.displayStore.getContainer("title-scene-sun-shine-small-holder"),this.sunShineSmallRight=Game.displayStore.getSprite("title-scene/sun-shine-small"),this.sunShineSmallLeft=Game.displayStore.getSprite("title-scene/sun-shine-small"),this.sunShineLargeHolder=Game.displayStore.getContainer("title-scene-sun-shine-large-holder"),this.sunShineLargeRight=Game.displayStore.getSprite("title-scene/sun-shine-large"),this.sunShineLargeLeft=Game.displayStore.getSprite("title-scene/sun-shine-large"),this.cloudLeft1=Game.displayStore.getSprite("title-scene/cloud-left-1"),this.cloudLeft2=Game.displayStore.getSprite("title-scene/cloud-left-2"),this.cloudRight1=Game.displayStore.getSprite("title-scene/cloud-right-1"),this.cloudRight2=Game.displayStore.getSprite("title-scene/cloud-right-2"),this.mgTrees1=Game.displayStore.getSprite("title-scene/mg-trees-1"),this.mgTrees2=Game.displayStore.getSprite("title-scene/mg-trees-2"),this.mgOverlay=Game.displayStore.getSprite("title-scene/mg-overlay"),this.bgBurst1=Game.displayStore.getSprite("title-scene/bg-burst-1"),this.bgBurst2=Game.displayStore.getSprite("title-scene/bg-burst-2"),this.bgBurst3=Game.displayStore.getSprite("title-scene/bg-burst-3"),this.bgBurst4=Game.displayStore.getSprite("title-scene/bg-burst-4"),this.bgBurst5=Game.displayStore.getSprite("title-scene/bg-burst-5"),this.bgBurst6=Game.displayStore.getSprite("title-scene/bg-burst-6"),this.fgBurst1=Game.displayStore.getSprite("title-scene/fg-burst-1"),this.fgBurst2=Game.displayStore.getSprite("title-scene/fg-burst-2"),this.fgBurst3=Game.displayStore.getSprite("title-scene/fg-burst-3"),this.fgBurst4=Game.displayStore.getSprite("title-scene/fg-burst-4"),this.fgBurst5=Game.displayStore.getSprite("title-scene/fg-burst-5"),this.fgBurst6=Game.displayStore.getSprite("title-scene/fg-burst-6"),this.logo=Game.displayStore.getSprite("title-scene/logo"),this.nickLogo=Game.displayStore.getSprite("title-scene/nick-logo"),this.clickToPlay=Game.displayStore.getContainer("title-scene-click-anywhere-holder"),this.clickToPlayText=this.clickToPlay.getSprite("title-scene/click-anywhere-to-play"),this.boatOuter=Game.displayStore.getContainer("title-scene-boat-outer-holder"),this.boat=this.boatOuter.getContainer("title-scene-boat-holder"),this.flag=this.boat.getContainer("title-scene-boat-flag-holder"),this.cannon=this.boat.getSprite("title-scene/boat-cannon"),this.spongebob=this.boat.getContainer("title-scene-boat-spongebob-holder"),this.spongebobArmRight=this.spongebob.getSprite("title-scene/boat-spongebob-arm-right"),this.spongebobArmLeft=this.spongebob.getSprite("title-scene/boat-spongebob-arm-left"),this.boatFroth=this.boat.getSprite("title-scene/boat-froth"),this.boatFrothSmall=this.boat.getSprite("title-scene/boat-froth-small"),this.boatFrothMedium=this.boat.getSprite("title-scene/boat-froth-medium"),this.boatFrothLarge=this.boat.getSprite("title-scene/boat-froth-large"),this.buggyOuter=Game.displayStore.getContainer("title-scene-buggy-outer-holder"),this.buggy=this.buggyOuter.getContainer("title-scene-buggy-holder"),this.buggyWheel1=this.buggy.getSprite("title-scene/buggy-wheel-1"),this.buggyWheel2=this.buggy.getSprite("title-scene/buggy-wheel-2"),this.buggyWheel3=this.buggy.getSprite("title-scene/buggy-wheel-3"),this.buggyHead=this.buggy.getSprite("title-scene/buggy-triple-g-head"),this.buggyBarsFront=this.buggy.getSprite("title-scene/buggy-bars-front"),this.buggyBarsBack=this.buggy.getSprite("title-scene/buggy-bars-back"),this.skiOuter=Game.displayStore.getContainer("title-scene-ski-outer-holder"),this.ski=this.skiOuter.getContainer("title-scene-ski-holder"),this.skiHead=this.ski.getSprite("title-scene/ski-tomika-head"),this.skiHair=this.ski.getSprite("title-scene/ski-tomika-hair"),this.bumperOuter=Game.displayStore.getContainer("title-scene-bumper-outer-holder"),this.bumper=this.bumperOuter.getContainer("title-scene-bumper-holder"),this.bumperHead=this.bumper.getSprite("title-scene/bumper-henry-head"),this.bumperWire=this.bumper.getSprite("title-scene/bumper-wire"),this.cartOuter=Game.displayStore.getContainer("title-scene-cart-outer-holder"),this.cart=this.cartOuter.getContainer("title-scene-cart-holder"),this.mike=this.cart.getContainer("title-scene-cart-mike-holder"),this.mikeArm=this.mike.getSprite("title-scene/cart-mike-arm"),this.mikeHead=this.mike.getSprite("title-scene/cart-mike-head"),this.laserGlow=this.cart.getSprite("title-scene/cart-laser-glow"),this.laser=this.cart.getSprite("title-scene/cart-laser"),this.jetpackOuter=Game.displayStore.getContainer("title-scene-jetpack-outer-holder"),this.jetpack=this.jetpackOuter.getContainer("title-scene-jetpack-holder"),this.jetpackHead=this.jetpack.getSprite("title-scene/jetpack-phoebe-head"),this.jetpackWater=this.jetpack.getSprite("title-scene/jetpack-water"),this.lincOuter=Game.displayStore.getContainer("title-scene-linc-outer-holder"),this.linc=this.lincOuter.getContainer("title-scene-linc-holder"),this.lincHead=this.linc.getContainer("title-scene-linc-head-holder"),this.boatParticleContainer=Game.displayStore.getContainer("title-scene/boat-burst-holder");var i={lowerAngle:280,upperAngle:310,lowerVelocity:1e3,upperVelocity:2e3,lowerStartScale:0,upperStartScale:0,lowerEndScale:.4,upperEndScale:1,friction:.2,XstartRange:60,YstartRange:20,time:.7,gravity:0,stagger:300,cap:50,endAlpha:.5,rotationPower:.5};this.boatMotionBurst=new ParticleBurst(["title-scene/boat-burst"],this.boatParticleContainer,this,i),this.boatMotionBurst.container.position.x=320,this.boatMotionBurst.container.position.y=600,this.skiParticleContainer=Game.displayStore.getContainer("title-scene/ski-burst-holder");var s={lowerAngle:320,upperAngle:350,lowerVelocity:1e3,upperVelocity:2e3,lowerStartScale:0,upperStartScale:0,lowerEndScale:.4,upperEndScale:1,friction:.2,XstartRange:60,YstartRange:20,time:.7,gravity:0,stagger:300,cap:50,endAlpha:.5,rotationPower:.5};this.skiMotionBurst=new ParticleBurst(["title-scene/ski-burst"],this.skiParticleContainer,this,s),this.skiMotionBurst.container.position.x=100,this.skiMotionBurst.container.position.y=400,this.cartParticleContainer=Game.displayStore.getContainer("title-scene/cart-burst-holder");var o={lowerAngle:30,upperAngle:0,lowerVelocity:1100,upperVelocity:2e3,lowerStartScale:0,upperStartScale:0,lowerEndScale:.4,upperEndScale:1,friction:.23,XstartRange:60,YstartRange:20,time:.7,gravity:0,stagger:300,cap:50,endAlpha:1,rotationPower:.5,blendMode:PIXI.BLEND_MODES.ADD};this.cartMotionBurst=new ParticleBurst(["title-scene/cart-burst"],this.cartParticleContainer,this,o),this.cartMotionBurst.container.position.x=100,this.cartMotionBurst.container.position.y=100,this.buggyParticleContainer=Game.displayStore.getContainer("title-scene/buggy-burst-holder");var a={lowerAngle:225,upperAngle:270,lowerVelocity:1e3,upperVelocity:2e3,lowerStartScale:0,upperStartScale:0,lowerEndScale:.4,upperEndScale:1,friction:.2,XstartRange:60,YstartRange:20,time:.5,gravity:0,stagger:300,cap:50,endAlpha:.7,rotationPower:.5};this.buggyMotionBurst=new ParticleBurst(["title-scene/buggy-burst"],this.buggyParticleContainer,this,a),this.buggyMotionBurst.container.position.x=690,this.buggyMotionBurst.container.position.y=600,this.bumperParticleContainer=Game.displayStore.getContainer("title-scene/bumper-burst-holder");var r={lowerAngle:170,upperAngle:200,lowerVelocity:1300,upperVelocity:2e3,lowerStartScale:0,upperStartScale:0,lowerEndScale:.4,upperEndScale:1,friction:.25,XstartRange:60,YstartRange:20,time:.7,gravity:0,stagger:300,cap:50,endAlpha:1,rotationPower:.5,blendMode:PIXI.BLEND_MODES.ADD};this.bumperMotionBurst=new ParticleBurst(["title-scene/bumper-burst"],this.bumperParticleContainer,this,r),this.bumperMotionBurst.container.position.x=960,this.bumperMotionBurst.container.position.y=340,this.jetpackParticleContainer=Game.displayStore.getContainer("title-scene/jetpack-burst-holder");var n={lowerAngle:160,upperAngle:180,lowerVelocity:1e3,upperVelocity:2e3,lowerStartScale:0,upperStartScale:0,lowerEndScale:.4,upperEndScale:1,friction:.2,XstartRange:60,YstartRange:20,time:.7,gravity:0,stagger:300,cap:50,endAlpha:.8,rotationPower:.5};this.jetpackMotionBurst=new ParticleBurst(["title-scene/jetpack-burst"],this.jetpackParticleContainer,this,n),this.jetpackMotionBurst.container.position.x=920,this.jetpackMotionBurst.container.position.y=100,this.sunHolder.scale.x=.7,this.sunHolder.scale.y=.7,this.sunShineLargeHolder.scale.x=.7,this.sunShineLargeHolder.scale.y=.7,this.sunShineSmallHolder.scale.x=.7,this.sunShineSmallHolder.scale.y=.7,this.sky.scale.x=Game.stageWidth,this.sunShineSmallRight.alpha=.8,this.sunShineSmallRight.scale.x=-1,this.sunShineSmallLeft.alpha=.8,this.bgOverlay1Right.scale.x=1.1,this.bgOverlay1Right.scale.y=1.1,this.bgOverlay1Right.scale.x=-1,this.bgOverlay1Left.scale.x=1.1,this.bgOverlay1Left.scale.y=1.1,this.bgOverlay2Right.scale.x=1.1,this.bgOverlay2Right.scale.y=1.1,this.bgOverlay2Right.scale.x=-1,this.bgOverlay2Left.scale.x=1.1,this.bgOverlay2Left.scale.y=1.1,this.sunRight.scale.x=-1,this.sunShineLargeRight.scale.x=-1,this.clickToPlay.rotation=-.03,this.nickLogo.alpha=0,this.laser.alpha=0,this.laserGlow.alpha=0,this.jetpackWater.scale.x=0,this.jetpackWater.scale.y=0,this.clickArea.width=Game.stageWidth,this.clickArea.height=Game.stageHeight,this.container.addChild(this.mainHolder),this.mainHolder.addChild(this.sky),this.mainHolder.addChild(this.bgTrees),this.mainHolder.addChild(this.bgOverlay1Right),this.mainHolder.addChild(this.bgOverlay1Left),this.mainHolder.addChild(this.bgOverlay2Right),this.mainHolder.addChild(this.bgOverlay2Left),this.mainHolder.addChild(this.sunShineSmallHolder),this.sunShineSmallHolder.addChild(this.sunShineSmallRight),this.sunShineSmallHolder.addChild(this.sunShineSmallLeft),this.mainHolder.addChild(this.sunShineLargeHolder),this.sunShineLargeHolder.addChild(this.sunShineLargeRight),this.sunShineLargeHolder.addChild(this.sunShineLargeLeft),this.mainHolder.addChild(this.sunHolder),this.sunHolder.addChild(this.sunRight),this.sunHolder.addChild(this.sunLeft),this.mainHolder.addChild(this.cloudLeft1),this.mainHolder.addChild(this.cloudLeft2),this.mainHolder.addChild(this.cloudRight1),this.mainHolder.addChild(this.cloudRight2),this.mainHolder.addChild(this.mgTrees1),this.mainHolder.addChild(this.mgTrees2),this.mainHolder.addChild(this.mgOverlay),this.mainHolder.addChild(this.bgBurst1),this.mainHolder.addChild(this.bgBurst2),this.mainHolder.addChild(this.bgBurst3),this.mainHolder.addChild(this.bgBurst4),this.mainHolder.addChild(this.bgBurst5),this.mainHolder.addChild(this.bgBurst6),this.mainHolder.addChild(this.fgBurst1),this.mainHolder.addChild(this.fgBurst2),this.mainHolder.addChild(this.fgBurst3),this.mainHolder.addChild(this.fgBurst4),this.mainHolder.addChild(this.fgBurst5),this.mainHolder.addChild(this.fgBurst6),this.mainHolder.addChild(this.boatParticleContainer),this.mainHolder.addChild(this.skiParticleContainer),this.mainHolder.addChild(this.cartParticleContainer),this.mainHolder.addChild(this.buggyParticleContainer),this.mainHolder.addChild(this.bumperParticleContainer),this.mainHolder.addChild(this.jetpackParticleContainer),this.mainHolder.addChild(this.lincOuter),this.mainHolder.addChild(this.jetpackOuter),this.mainHolder.addChild(this.cartOuter),this.mainHolder.addChild(this.skiOuter),this.mainHolder.addChild(this.bumperOuter),this.mainHolder.addChild(this.boatOuter),this.mainHolder.addChild(this.buggyOuter),this.mainHolder.addChild(this.nickLogo),this.mainHolder.addChild(this.logo),this.mainHolder.addChild(this.clickToPlay),this.mainHolder.addChild(this.clickArea),this.initialAnimation=new TimelineMax,this.initialAnimation.add([TweenMax.from(this.mainHolder.scale,.6,{x:1.6,y:1.6,ease:Sine.easeInOut}),TweenMax.from(this.mgTrees1.scale,.6,{x:1.3,y:1.3,ease:Sine.easeInOut}),TweenMax.from(this.mgTrees2.scale,.6,{x:2.3,y:2.3,ease:Sine.easeInOut}),TweenMax.from(this.cloudLeft1.scale,.6,{x:2,y:2,ease:Sine.easeInOut}),TweenMax.from(this.cloudLeft1.position,.6,{x:"-=150",y:"-=50",ease:Sine.easeInOut}),TweenMax.from(this.cloudLeft2.scale,.6,{x:1.5,y:1.5,ease:Sine.easeInOut}),TweenMax.from(this.cloudLeft2.position,.6,{x:"-=200",y:"-=30",ease:Sine.easeInOut}),TweenMax.from(this.cloudRight1.scale,.6,{x:2,y:2,ease:Sine.easeInOut}),TweenMax.from(this.cloudRight1.position,.6,{x:"+=150",y:"-=50",ease:Sine.easeInOut}),TweenMax.from(this.cloudRight2.scale,.6,{x:1.5,y:1.5,ease:Sine.easeInOut}),TweenMax.from(this.cloudRight2.position,.6,{x:"+=200",y:"-=30",ease:Sine.easeInOut}),TweenMax.from(this.sunShineSmallRight,20,{rotation:2*Math.PI,ease:Power0.easeInOut,repeat:-1}),TweenMax.from(this.sunShineSmallLeft,20,{rotation:2*Math.PI,ease:Power0.easeInOut,repeat:-1}),TweenMax.from(this.sunShineLargeRight,40,{rotation:2*-Math.PI,ease:Power0.easeInOut,repeat:-1}),TweenMax.from(this.sunShineLargeLeft,40,{rotation:2*-Math.PI,ease:Power0.easeInOut,repeat:-1}),TweenMax.from(this.bgOverlay1Right,60,{rotation:2*-Math.PI,ease:Power0.easeInOut,repeat:-1}),TweenMax.from(this.bgOverlay1Left,60,{rotation:2*-Math.PI,ease:Power0.easeInOut,repeat:-1}),TweenMax.from(this.bgOverlay2Right,60,{rotation:2*-Math.PI,ease:Power0.easeInOut,repeat:-1}),TweenMax.from(this.bgOverlay2Left,60,{rotation:2*-Math.PI,ease:Power0.easeInOut,repeat:-1}),TweenMax.to(this.sunHolder.scale,.6,{x:1,y:1,ease:Back.easeOut,delay:.5}),TweenMax.from(this.sunHolder.position,.6,{y:"+=150",ease:Back.easeOut,delay:.5}),TweenMax.to(this.sunShineLargeHolder.scale,.7,{x:1,y:1,ease:Back.easeOut,delay:.5}),TweenMax.from(this.sunShineLargeHolder.position,.7,{y:"+=200",ease:Back.easeOut,delay:.5}),TweenMax.to(this.sunShineSmallHolder.scale,.7,{x:1,y:1,ease:Back.easeOut,delay:.5}),TweenMax.from(this.sunShineSmallHolder.position,.7,{y:"+=200",ease:Back.easeOut,delay:.5})],0),this.initialAnimation.add([TweenMax.from(this.logo.scale,2.1,{x:3,y:3,ease:Elastic.easeOut}),TweenMax.from(this.logo.position,2.1,{y:30,ease:Elastic.easeOut})],.2),this.burstAnimation=new TimelineMax,this.burstAnimation.add([TweenMax.from(this.bgBurst3.scale,.6,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.bgBurst4.scale,.6,{x:0,y:0,ease:Back.easeOut})],.5),this.burstAnimation.add([TweenMax.from(this.bgBurst2.scale,.6,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.bgBurst5.scale,.6,{x:0,y:0,ease:Back.easeOut})],.6),this.burstAnimation.add([TweenMax.from(this.bgBurst1.scale,.6,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.bgBurst6.scale,.6,{x:0,y:0,ease:Back.easeOut})],.7),this.burstAnimation.add([TweenMax.from(this.fgBurst3.scale,.6,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.fgBurst4.scale,.6,{x:0,y:0,ease:Back.easeOut})],.6),this.burstAnimation.add([TweenMax.from(this.fgBurst2.scale,.6,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.fgBurst5.scale,.6,{x:0,y:0,ease:Back.easeOut})],.7),this.burstAnimation.add([TweenMax.from(this.fgBurst1.scale,.6,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.fgBurst6.scale,.6,{x:0,y:0,ease:Back.easeOut})],.8),this.clickToPlayAnimation=new TimelineMax,this.clickToPlayAnimation.add([TweenMax.from(this.clickToPlay.scale,1.5,{x:0,y:0,ease:Elastic.easeOut}),TweenMax.to(this.clickToPlay,1.5,{rotation:.03,ease:Sine.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.nickLogo,1.5,{alpha:1,ease:Sine.easeInOut})],2.5),this.boatAnimation=new TimelineMax,this.boatAnimation.add([TweenMax.from(this.boatOuter.scale,.7,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.spongebob,.7,{rotation:.05,ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.spongebobArmRight,.7,{rotation:-.3,ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.spongebobArmLeft,.7,{rotation:.3,ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.flag,.7,{rotation:.3,ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.cannon,.7,{rotation:.3,ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.boat,.7,{rotation:.1,ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.boatFroth.scale,.15,{x:0,y:0,ease:Sine.easeInOut,repeat:4})],1),this.buggyAnimation=new TimelineMax,this.buggyAnimation.add([TweenMax.from(this.buggyOuter.scale,.7,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.buggy,.7,{rotation:-.1,ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.buggyWheel1.position,.7,{x:"-=10",y:"-=10",ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.buggyWheel2.position,.7,{x:"-=10",y:"-=10",ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.buggyWheel3.position,.7,{x:"-=10",y:"-=10",ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.buggyHead,.7,{rotation:-.2,ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.buggyBarsFront.position,.7,{x:"+=2",y:"+=10",ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.buggyBarsBack.position,.7,{x:"+=2",y:"+=10",ease:Sine.easeInOut,yoyo:!0})],1.1),this.skiAnimation=new TimelineMax,this.skiAnimation.add([TweenMax.from(this.skiOuter.scale,.7,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.ski,.7,{rotation:.1,ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.skiHead,.7,{rotation:.1,ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.skiHair,.7,{rotation:.3,ease:Sine.easeInOut,yoyo:!0})],1.2),this.bumperAnimation=new TimelineMax,this.bumperAnimation.add([TweenMax.from(this.bumperOuter.scale,.7,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.bumper,.7,{rotation:.1,ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.bumperHead,.7,{rotation:-.2,ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.bumperWire,.7,{rotation:-.3,ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.bumperWire.scale,.7,{x:.5,y:.5,ease:Sine.easeInOut,yoyo:!0})],1.3),this.cartAnimation=new TimelineMax,this.cartAnimation.add([TweenMax.from(this.cartOuter.scale,.7,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.mike,.7,{rotation:.1,ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.mikeArm,.7,{rotation:.2,ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.mikeHead,.7,{rotation:.2,ease:Sine.easeInOut,yoyo:!0}),TweenMax.to(this.laser,.1,{alpha:1,ease:Sine.easeInOut,yoyo:!0,repeat:6}),TweenMax.to(this.laserGlow,.1,{alpha:1,ease:Sine.easeInOut,yoyo:!0,repeat:6})],1.4),this.lincAnimation=new TimelineMax,this.lincAnimation.add([TweenMax.from(this.lincOuter.scale,.7,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.linc,.7,{rotation:.1,ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.lincHead,.7,{rotation:.1,ease:Sine.easeInOut,yoyo:!0})],1.5),this.jetpackAnimation=new TimelineMax,this.jetpackAnimation.add([TweenMax.from(this.jetpackOuter.scale,.7,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.jetpack,.7,{rotation:-.1,ease:Sine.easeInOut,yoyo:!0}),TweenMax.from(this.jetpackHead,.7,{rotation:-.05,ease:Sine.easeInOut,yoyo:!0}),TweenMax.to(this.jetpackWater.scale,.7,{x:1,y:1,ease:Back.easeOut,yoyo:!0})],1.6),this.setUpHitArea()},t.prototype.setUpHitArea=function(){this.clickArea.interactive=!0,this.clickArea.buttonMode=!0;var e=this;Game.onDesktop?this.clickArea.on("mouseup",function(t){Game.playSound("button-click-ui.mp3"),e.game.trackingEventsManager.trackGameEvent("play","true"),e.game.setScene("hubScene",!1,[!0])}):this.clickArea.on("touchend",function(t){Game.playSound("button-click-ui.mp3"),e.game.trackingEventsManager.trackGameEvent("play","true"),e.game.setScene("hubScene",!1,[!0])})},t.prototype.activatePlayButton=function(e){},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),t.id){case"playbuttonlarge":if(1==this.interactionLocked)return;this.interactionLocked=!0,this.game.setScene("hubScene",!1)}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){e.prototype.tick.call(this)},t.prototype.keyDown=function(e){},t.prototype.keyUp=function(e){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.initialAnimation=this.killTween(this.initialAnimation),this.burstAnimation=this.killTween(this.burstAnimation),this.boatAnimation=this.killTween(this.boatAnimation),this.buggyAnimation=this.killTween(this.buggyAnimation),this.skiAnimation=this.killTween(this.skiAnimation),this.bumperAnimation=this.killTween(this.bumperAnimation),this.cartAnimation=this.killTween(this.cartAnimation),this.jetpackAnimation=this.killTween(this.jetpackAnimation),this.lincAnimation=this.killTween(this.lincAnimation),this.clickToPlayAnimation=this.killTween(this.clickToPlayAnimation),this.boatparticleAnimation=this.killTween(this.boatparticleAnimation),this.skiparticleAnimation=this.killTween(this.skiparticleAnimation),this.cartparticleAnimation=this.killTween(this.cartparticleAnimation),this.buggyparticleAnimation=this.killTween(this.buggyparticleAnimation),this.bumperparticleAnimation=this.killTween(this.bumperparticleAnimation),this.jetpackparticleAnimation=this.killTween(this.jetpackparticleAnimation),this.clickArea.removeAllListeners(),this.boatMotionBurst.destroy(),this.skiMotionBurst.destroy(),this.cartMotionBurst.destroy(),this.buggyMotionBurst.destroy(),this.bumperMotionBurst.destroy(),this.jetpackMotionBurst.destroy()},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),HelpScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="helpScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.loadedHelpAssets=!1,this.gameId=Game.coreData.getCurrentRide(),this.bgTiles=new Array;for(var i=0;i<7;i++){var s=Game.displayStore.getSprite("help-bg-tile");this.bgTiles.push(s),s.position.x=i*s.width,this.container.addChild(s)}this.game.ui.setUI("none"),this.loadingCircle=Game.displayStore.getSprite("help-loading-circle"),this.loadingCircle.position.x=Game.stageWidth/2,this.loadingCircle.position.y=Game.stageHeight/2,this.loadingCircle.visible=!0,this.container.addChild(this.loadingCircle);var o=this;this.game.loadAssets([this.gameId.id+"-tutorial-assets"],!1,function(){o.addTutorialOverlay(o),o.loadedHelpAssets=!0})},t.prototype.addTutorialOverlay=function(e){e.tutorialOverlay=new TutorialOverlay(e),e.tutorialOverlay.buildTutorial(e.gameId.id,!1),e.loadingCircle.visible=!1},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),t.id){case"close-button":case"back-button":this.returnToGame()}},t.prototype.returnToGame=function(){var e;switch(console.log("return to game",this.gameId.id),this.gameId.id){case"river-rangers":e="riverRangersGameplayScene";break;case"roller-coaster-doom":e="rollerCoasterDoomGameplayScene";break;case"beach-buggy":e="beachBuggyGameplayScene";break;case"dodgems":e="dodgemsGameplayScene";break;case"laser-cave":e="laserCaveGameplayScene";break;case"roller-coaster-ice":e="rollerCoasterIceGameplayScene";break;case"coco-nutty":e="cocoNuttyGameplayScene";break;case"jet-ski":e="jetSkiGameplayScene";break;case"pin-ball":e="pinBallGameplayScene";break;case"mayan-madness":e="mayanMadnessGameplayScene";break;case"tree-top-gladiators":e="treeTopGladiatorsGameplayScene";break;case"aqua-jetpack":e="aquaJetpackGameplayScene";break;case"waterfall-wipeout":e="waterfallWipeoutGameplayScene";break;case"snowball-wars":e="snowballWarsGameplayScene";break;case"volcano-skydive":e="volcanoSkydiveGameplayScene";break;case"hover-drift":e="hoverDriftGameplayScene";break;case"egg-scape":e="eggscapeGameplayScene";break;case"striker":e="strikerGameplayScene";break;case"abducktion":e="abducktionGameplayScene";break;case"crazy-golf":e="crazyGolfGameplayScene"}this.tutorialOverlay.remove(),this.game.setScene(e,!1)},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){e.prototype.tick.call(this),1!=this.loadedHelpAssets&&(this.loadingCircle.rotation+=.05)},t.prototype.keyDown=function(e){},t.prototype.keyUp=function(e){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(var t=0;t<this.bgTiles.length;t++)Game.displayStore.returnPooledItem(this.bgTiles[t])},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),HubScene=function(e){function t(t){var i=e.call(this,t)||this;return i.markerFocusThreshold=30,i.fullHubIslandLocations=[4,-1030,-2050,-3060,-4080],i.stopTick=!1,i.dragSensitivity=1,i.fishJumpAnimationPlaying=!0,i.whaleSurfaceAnimationPlaying=!0,i.dolphinJumpAnimationPlaying=!0,i.id="hubScene",i}return __extends(t,e),t.prototype.init=function(i){e.prototype.init.call(this),this.showAsteroid=!1,Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("games"),Game.setSoundVolume("hub-scene/waves-looping.mp3",0),Game.fadeSound("hub-scene/waves-looping.mp3",5,.4),Game.playSound("hub-scene/waves-looping.mp3"),Game.setSoundVolume("hub-scene/hub-music.mp3",0),Game.fadeSound("hub-scene/hub-music.mp3",5,.25),Game.playSound("hub-scene/hub-music.mp3"),t.scope=this,this.showIntro=!1,i&&i[0]&&(this.showIntro=i[0]),1!=this.game.gameLaunchMode&&(this.showIntro=!1),this.setBackgroundColor(9101054),1==this.showIntro?this.game.ui.setUI("none"):this.game.ui.setUI("hub-touch"),this.islandSignShowing=!1,this.tickTally=0,this.clickAllowed=!0,this.viewPos=new PIXI.Point(0,0),this.lastViewPos=new PIXI.Point(0,0),this.lastGyroPos=new PIXI.Point(0,0),this.touching=!1,this.stopTick=!1,this.zoomedIn=!1,this.pressingButton="none",this.smoothing=8,this.buttonLeft=this.game.ui.leftButton,this.buttonRight=this.game.ui.rightButton,this.fadeOverlay=Game.displayStore.getSprite("hub-scene/fade"),this.fadeOverlay.width=Game.stageWidth,this.fadeOverlay.height=450,this.fadeOverlay.alpha=0,this.fadeOverlay.tint=50943,this.fadeOverlay.blendMode=PIXI.BLEND_MODES.MULTIPLY,this.gameLaunchMode=this.game.gameLaunchMode,this.chevronScrollDistanceDisable=100,this.chevronInitialGyroPos=0,1==this.gameLaunchMode&&(this.touchHintChevronLeft=Game.displayStore.getSprite("hub-scene/hub-touch-controls-chevron"),this.touchHintChevronRight=Game.displayStore.getSprite("hub-scene/hub-touch-controls-chevron"),this.touchHintChevronLeft.position.x=70,this.touchHintChevronRight.position.x=Game.stageWidth-70,this.touchHintChevronLeft.position.y=Game.stageHeight/2+40,this.touchHintChevronRight.position.y=Game.stageHeight/2+40,this.touchHintChevronRight.scale.x=-1,this.touchHintChevronLeft.alpha=0,this.touchHintChevronRight.alpha=0),this.markerData=[],this.markers=[];var s=[{id:"beach-buggy",brand:"game-shakers",chunk:3,position:new PIXI.Point(500,343)},{id:"jet-ski",brand:"school-of-rock",chunk:3,position:new PIXI.Point(180,377)},{id:"aqua-jetpack",brand:"thundermans",chunk:3,position:new PIXI.Point(785,363)},{id:"hover-drift",brand:"nicky-ricky-dicky-dawn",chunk:3,position:new PIXI.Point(650,310)}],o=[{id:"egg-scape",brand:"game-shakers",chunk:4,position:new PIXI.Point(470,206)},{id:"abducktion",brand:"knight-squad",chunk:4,position:new PIXI.Point(550,310)},{id:"striker",brand:"henry-danger",chunk:4,position:new PIXI.Point(730,200)},{id:"crazy-golf",brand:"i-am-frankie",chunk:4,position:new PIXI.Point(230,245)}],a=[{id:"roller-coaster-ice",brand:"game-shakers",chunk:0,position:new PIXI.Point(440,260)},{id:"dodgems",chunk:0,brand:"henry-danger",position:new PIXI.Point(660,340)},{id:"pin-ball",chunk:0,brand:"spongebob",position:new PIXI.Point(250,370)},{id:"snowball-wars",brand:"loud-house",chunk:0,position:new PIXI.Point(540,320)}],r=[{id:"tree-top-gladiators",brand:"loud-house",chunk:2,position:new PIXI.Point(770,220)},{id:"river-rangers",brand:"spongebob",chunk:2,position:new PIXI.Point(610,367)},{id:"coco-nutty",brand:"nicky-ricky-dicky-dawn",chunk:2,position:new PIXI.Point(285,297)},{id:"waterfall-wipeout",brand:"i-am-frankie",chunk:2,position:new PIXI.Point(485,415)}],n=[{id:"roller-coaster-doom",chunk:1,brand:"thundermans",position:new PIXI.Point(688,309)},{id:"laser-cave",chunk:1,brand:"turtles",position:new PIXI.Point(360,425)},{id:"mayan-madness",chunk:1,brand:"henry-danger",position:new PIXI.Point(800,414)},{id:"volcano-skydive",chunk:1,brand:"find-me-in-paris",position:new PIXI.Point(515,270)}];if(1==Game.assetChunkManager.getCurrentGameLaunchMode())this.showAsteroid=!0,1==this.showAsteroid?this.addGameMarkers([s,o,a,r,n]):this.addGameMarkers([s,a,r,n]);else switch(Game.assetChunkManager.getCurrentGameId()){case"beach-buggy":case"jet-ski":case"aqua-jetpack":case"hover-drift":this.addGameMarkers([s]);break;case"roller-coaster-ice":case"dodgems":case"pin-ball":case"snowball-wars":this.addGameMarkers([a]);break;case"roller-coaster-doom":case"laser-cave":case"mayan-madness":case"volcano-skydive":this.addGameMarkers([n]);break;case"tree-top-gladiators":case"river-rangers":case"coco-nutty":case"waterfall-wipeout":this.addGameMarkers([r]);break;case"egg-scape":case"abducktion":case"striker":case"crazy-golf":this.showAsteroid=!0,this.addGameMarkers([o])}this.screenHit=Game.displayStore.getSprite("hub-blank-input"),this.screenHit.width=Game.stageWidth,this.screenHit.height=Game.stageHeight,this.characterHolder=Game.displayStore.getContainer("hub-scene/characters-holder");var h=this.characterHolder.getSprite("hub-scene/character-box-shadow");if(h.tint=0,h.alpha=.3,this.characterHolder.scale.x=this.characterHolder.scale.y=0,this.characterHolder.addChild(this.characterHolder.getContainer("hub-scene/characters")),1==this.gameLaunchMode){this.islandSign=Game.displayStore.getContainer("hub-scene/island-sign"),this.islandSign.position.y=-60,this.signText=Game.displayStore.getBitmapText("hub-sign-font"),this.signText.text="",this.islandSign.addChild(this.signText),this.introSign=Game.displayStore.getContainer("hub-scene/intro-message-holder"),this.introSign.position.y=400,this.balloons=[];for(var l=[{x:-290,y:-70,stringHeight:120,front:!0,colour:14823249},{x:-250,y:-140,stringHeight:170,front:!1,colour:16759333},{x:-150,y:-120,stringHeight:120,front:!1,colour:5363676},{x:150,y:-133,stringHeight:40,front:!0,colour:5299612},{x:220,y:-140,stringHeight:180,front:!1,colour:16678978},{x:300,y:-70,stringHeight:150,front:!0,colour:12803297}],p=0;p<6;p++){var c=Game.displayStore.getContainer("hub-scene/balloon-holder"),d=Game.displayStore.getSprite("hub-scene/balloon-string.png");d.height=l[p].stringHeight;var u=Game.displayStore.getSprite("hub-scene/balloon.png");u.tint=l[p].colour,u.alpha=.9,u.position.y=-l[p].stringHeight,c.addChild(d),c.addChild(u),this.balloons.push(c),1==l[p].front?this.introSign.addChild(c):(this.introSign.addChildAt(c,0),c.scale.x=c.scale.y=Game.getRandom(.8,.9)),c.position.x=l[p].x,c.position.y=l[p].y}var g=Game.displayStore.getContainer("hub-scene/cloud-holder-back"),m=Game.displayStore.getContainer("hub-scene/cloud-holder-front");this.clouds=[];for(var y=[{x:250,y:120,scale:-5.5,type:1},{x:950,y:170,scale:3,type:2},{x:460,y:220,scale:3.5,type:3},{x:950,y:250,scale:-6,type:2},{x:250,y:350,scale:5,type:1},{x:900,y:420,scale:6,type:1},{x:700,y:440,scale:3,type:3},{x:100,y:480,scale:6,type:2},{x:850,y:500,scale:5.5,type:3}],p=0;p<9;p++){var f;f=Game.displayStore.getSprite("hub-scene/blurry-cloud-"+y[p].type+".png"),Math.abs(y[p].scale)<4?(f.tint=13421772,g.addChild(f)):m.addChild(f),f.scale.x=y[p].scale/2,f.scale.y=Math.abs(y[p].scale)/2,f.position.x=y[p].x,f.position.y=y[p].y,this.clouds.push(f)}}this.mainHolder=Game.displayStore.getContainer("hub-scene/main-holder"),this.layersHolder=this.mainHolder.getContainer("hub-scene/layers-holder"),this.layersHolder.setRegPoint(.5,.5,!0),this.foregroundLayer=this.layersHolder.getContainer("hub-scene/foreground-layer-1"),this.foregroundLayer2=this.layersHolder.getContainer("hub-scene/foreground-layer-2");var b=this.layersHolder.getContainer("hub-scene/islands-layer"),w=this.layersHolder.getContainer("hub-scene/sky-layer"),v=this.layersHolder.getContainer("hub-scene/islands-back-layer"),k=this.layersHolder.getContainer("hub-scene/foreground-layer-1"),S=this.layersHolder.getContainer("hub-scene/foreground-layer-2");this.volcanoFG2=this.foregroundLayer2.getContainer("hub-scene/island-volcano-foreground2"),this.jungleFG2=this.foregroundLayer2.getContainer("hub-scene/island-jungle-foreground2"),this.iceFG2=this.foregroundLayer2.getContainer("hub-scene/island-ice-foreground2"),this.beachFG2=this.foregroundLayer2.getContainer("hub-scene/island-beach-foreground2"),this.asteroidFG2=this.foregroundLayer2.getContainer("hub-scene/island-asteroid-foreground2"),this.iceBG=w.getContainer("hub-scene/sky-chunk-1"),this.jungleBG=w.getContainer("hub-scene/sky-chunk-2"),this.beachBG=w.getContainer("hub-scene/sky-chunk-3"),this.volcanoBG=w.getContainer("hub-scene/sky-chunk-4"),this.asteroidBG=w.getContainer("hub-scene/sky-chunk-5");for(p=0;p<w.children.length;p++){var x=w.getSpriteAt(p).getSprite("hub-scene/sky.png");x.width=Game.stageWidth,x.height=500,x.position.y=460;var P=w.getSpriteAt(p).getSprite("hub-scene/sea.png");P.width=Game.stageWidth,P.height=580,P.position.y=340}var B,T,G,C;if(this.showAsteroid)var A;if(B=b.getContainer("hub-scene/island-ice"),T=b.getContainer("hub-scene/island-volcano"),G=b.getContainer("hub-scene/island-jungle"),C=b.getContainer("hub-scene/island-beach"),this.showAsteroid&&(A=b.getContainer("hub-scene/island-asteroid")),this.islandBeach=C.getContainer("hub-scene/island-beach-inner"),this.showAsteroid){this.islandAsteroid=A.getContainer("hub-scene/island-asteroid-inner"),this.islandAsteroidHand=this.foregroundLayer.getContainer("hub-scene/island-asteroid-foreground").getContainer("hub-scene/asteroid-island/hand"),this.asteroidWaterfallSplashLeft=this.islandAsteroid.getContainer("hub-scene/asteroid-island/waterfall-splash-left"),this.asteroidWaterfallSplashLeft.scale.x=-1,this.asteroidWaterfallSplashRight=this.islandAsteroid.getContainer("hub-scene/asteroid-island/waterfall-splash-right");for(p=0;p<5;p++){var M=Game.displayStore.getSprite("hub-scene/asteroid-island/waterfall-splash.png"),I=Game.displayStore.getSprite("hub-scene/asteroid-island/waterfall-splash.png");M.scale.x=M.scale.y=0,I.scale.x=I.scale.y=0,this.asteroidWaterfallSplashLeft.addChild(M),this.asteroidWaterfallSplashRight.addChild(I)}}if(this.islandIce=B.getContainer("hub-scene/island-ice-inner"),this.islandJungle=G.getContainer("hub-scene/island-jungle-inner"),this.islandVolcano=T.getContainer("hub-scene/island-volcano-inner"),this.showAsteroid?this.islands=[{container:this.islandBeach,id:"beach"},{container:this.islandAsteroid,id:"asteroid"},{container:this.islandIce,id:"ice"},{container:this.islandJungle,id:"jungle"},{container:this.islandVolcano,id:"volcano"}]:this.islands=[{container:this.islandBeach,id:"beach"},{container:this.islandIce,id:"ice"},{container:this.islandJungle,id:"jungle"},{container:this.islandVolcano,id:"volcano"}],this.idleTimeline=this.killTween(this.idleTimeline),this.idleTimeline=new TimelineMax,this.islandBeach){this.islandBeach.scale=new PIXI.Point(.33,.33);var L=this.islandBeach.getSprite("hub-scene/beach-island/waves-1"),H=this.islandBeach.getSprite("hub-scene/beach-island/waves-2"),R=this.islandBeach.getSprite("hub-scene/beach-island/rings-1"),D=this.islandBeach.getSprite("hub-scene/beach-island/rings-2"),O=this.islandBeach.getSprite("hub-scene/beach-island/rings-3"),E=this.islandBeach.getSprite("hub-scene/beach-island/rings-4"),F=this.islandBeach.getSprite("hub-scene/beach-island/rings-5"),_=this.islandBeach.getSprite("hub-scene/beach-island/rings-6");R.scale.x=R.scale.y=0,D.scale.x=D.scale.y=0,O.scale.x=O.scale.y=0,E.scale.x=E.scale.y=0,F.scale.x=F.scale.y=0,_.scale.x=_.scale.y=0,L.scale.x=H.scale.x=2.7,L.scale.y=H.scale.y=.6*3,L.alpha=H.alpha=0;var j=this.islandBeach.getContainer("hub-scene/beach-island/hand"),W=new TimelineMax({repeat:-1}),U=new TimelineMax({repeat:-1}),z=new TimelineMax({repeat:-1}),V=new TimelineMax;W.add(TweenMax.to(L,.5,{alpha:.5,ease:Power1.easeIn}),0),W.add(TweenMax.to(L,2,{alpha:0,ease:Power1.easeOut}),3),W.add(TweenMax.to(L.scale,5,{x:4.55,y:1.1*3.5,ease:Power1.easeInOut}),0),U.add(TweenMax.to(H,.5,{alpha:.5,ease:Power1.easeIn}),0),U.add(TweenMax.to(H,2,{alpha:0,ease:Power1.easeOut}),3),U.add(TweenMax.to(H.scale,5,{x:4.55,y:1.1*3.5,ease:Power1.easeInOut}),0),z.add([TweenMax.to(j.scale,.9,{y:.8,ease:Power1.easeInOut}),TweenMax.to(j.getSpriteAt(1).scale,.9,{y:1.25,ease:Power1.easeInOut})],.1),z.add([TweenMax.to(j.scale,1,{y:1,ease:Power1.easeInOut}),TweenMax.to(j.getSpriteAt(1).scale,1,{y:1,ease:Power1.easeInOut})]),z.add(TweenMax.to(j.getSpriteAt(1),.9,{rotation:-.6,ease:Power1.easeInOut,repeat:1,yoyo:!0}),0),V.add([TweenMax.to(R,2.3,{alpha:0,ease:Power1.easeOut,repeat:-1}),TweenMax.to(R.scale,2.3,{x:3,y:3,ease:Power1.easeOut,repeat:-1})],0),V.add([TweenMax.to(D,2.3,{alpha:0,ease:Power1.easeOut,repeat:-1}),TweenMax.to(D.scale,2.3,{x:3,y:3,ease:Power1.easeOut,repeat:-1})],.1),V.add([TweenMax.to(O,2.3,{alpha:0,ease:Power1.easeOut,repeat:-1}),TweenMax.to(O.scale,2.3,{x:3,y:3,ease:Power1.easeOut,repeat:-1})],.5),V.add([TweenMax.to(E,2.3,{alpha:0,ease:Power1.easeOut,repeat:-1}),TweenMax.to(E.scale,2.3,{x:3,y:3,ease:Power1.easeOut,repeat:-1})],.6),V.add([TweenMax.to(F,2.3,{alpha:0,ease:Power1.easeOut,repeat:-1}),TweenMax.to(F.scale,2.3,{x:3,y:3,ease:Power1.easeOut,repeat:-1})],1),V.add([TweenMax.to(_,2.3,{alpha:0,ease:Power1.easeOut,repeat:-1}),TweenMax.to(_.scale,2.3,{x:3,y:3,ease:Power1.easeOut,repeat:-1})],1.1);var X=Game.getRandom(-2,0);this.idleTimeline.add(W,X),this.idleTimeline.add(U,X+3),this.idleTimeline.add(V,X+1.3),this.idleTimeline.add(z,Game.getRandom(0,2)),V.timeScale(.93)}if(this.islandAsteroid){this.islandAsteroid.scale=new PIXI.Point(.33,.33),this.islandAsteroidHand.scale=new PIXI.Point(.33,.33);for(var N=new TimelineMax,q=this.islandAsteroid.getSprite("hub-scene/asteroid-island/island-shadow.png"),Y=this.islandAsteroid.getSprite("hub-scene/asteroid-island/island.png"),K=this.islandAsteroid.getSprite("hub-scene/asteroid-island/island-front-left.png"),Z=this.islandAsteroid.getSprite("hub-scene/asteroid-island/island-front-right.png"),J=this.foregroundLayer.getContainer("hub-scene/island-asteroid-foreground"),Q=J.getContainer("hub-scene/asteroid-island/foreground-island-1"),$=J.getContainer("hub-scene/asteroid-island/foreground-island-3"),ee=this.foregroundLayer2.getContainer("hub-scene/island-asteroid-foreground2").getContainer("hub-scene/asteroid-island/foreground-island-2"),te=Q.getSprite("hub-scene/asteroid-island/foreground-island-1.png"),ie=Q.getSprite("hub-scene/asteroid-island/foreground-island-1-shadow.png"),se=$.getSprite("hub-scene/asteroid-island/foreground-island-3.png"),oe=$.getSprite("hub-scene/asteroid-island/foreground-island-3-shadow.png"),ae=ee.getSprite("hub-scene/asteroid-island/foreground-island-2.png"),re=ee.getSprite("hub-scene/asteroid-island/foreground-island-2-shadow.png"),ne=this.islandAsteroid.getSprite("hub-scene/asteroid-island/waterfall-left.png"),he=this.islandAsteroid.getSprite("hub-scene/asteroid-island/waterfall-right.png"),le=[],pe=[],p=0;p<5;p++){var M=this.asteroidWaterfallSplashLeft.getSpriteAt(p),I=this.asteroidWaterfallSplashRight.getSpriteAt(p);M.scale.x=M.scale.y=0,I.scale.x=I.scale.y=0,le.push(M),pe.push(I)}var ce=this.islandAsteroid.getContainer("hub-scene/asteroid-island/portal");this.portalRings=[],ce.scale.x=3.75,ce.scale.y=.7;for(p=0;p<4;p++)this.portalRings.push(ce.getSpriteAt(p));this.asteroidWaterfallAnimations=[];for(p=0;p<4;p++){var de=Game.displayStore.getAnimatedSprite("hub-scene/framed-animations/waterfall");this.asteroidWaterfallAnimations.push(de),de.animationSpeed=.2,de.loop=!0,de.play(),de.tint=16769733,0==p&&(de.position.x=-615,de.position.y=815,de.scale.x=1.8,de.scale.y=2),1==p&&(de.position.x=-605,de.position.y=75,de.scale.x=1.4,de.scale.y=1.5),2==p&&(de.position.x=900,de.position.y=-55,de.scale.x=-1.45,de.scale.y=1.5),3==p&&(de.position.x=910,de.position.y=720,de.scale.x=-1.8,de.scale.y=2),this.islandAsteroid.addChildAt(de,7)}var ue=new TimelineMax({repeat:-1});N.add([TweenMax.to(Y.position,2,{y:"-=15",repeat:-1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.asteroidWaterfallAnimations[1],2,{y:"-=15",repeat:-1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.asteroidWaterfallAnimations[2],2,{y:"-=15",repeat:-1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(K.position,2,{y:"-=15",repeat:-1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(Z.position,2,{y:"-=15",repeat:-1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(q.scale,2,{x:.95,y:.95,repeat:-1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(q,2,{alpha:.5,repeat:-1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(ne.scale,2,{y:1.02,repeat:-1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(he.scale,2,{y:1.02,repeat:-1,yoyo:!0,ease:Sine.easeInOut})]),N.add([TweenMax.to(te.position,1.8,{y:"-=20",repeat:-1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(ie.scale,1.8,{x:.8,y:.8,repeat:-1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(ie,1.8,{alpha:.4,repeat:-1,yoyo:!0,ease:Sine.easeInOut})],-.3),N.add([TweenMax.to(se.position,1.8,{y:"-=20",repeat:-1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(oe.scale,1.8,{x:.8,y:.8,repeat:-1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(oe,1.8,{alpha:.4,repeat:-1,yoyo:!0,ease:Sine.easeInOut})],-.9),N.add([TweenMax.to(ae.position,2,{y:"-=25",repeat:-1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(re.scale,2,{x:.8,y:.8,repeat:-1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(re,2,{alpha:.4,repeat:-1,yoyo:!0,ease:Sine.easeInOut})],-.9),N.add([TweenMax.to(this.islandAsteroidHand.getContainer("hub-scene/asteroid-island/hand-inner").position,1.7,{y:"-=30",repeat:-1,yoyo:!0,ease:Sine.easeInOut})],1),N.add([TweenMax.to(this.portalRings[1].scale,1,{x:1.1,y:1.1,repeat:-1,yoyo:!0,ease:Power1.easeInOut}),TweenMax.to(this.portalRings[0].scale,1,{x:1.1,y:1.1,repeat:-1,yoyo:!0,ease:Power1.easeInOut}),TweenMax.to(this.portalRings[2].scale,1,{x:1.1,y:1.1,repeat:-1,yoyo:!0,ease:Power1.easeInOut}),TweenMax.to(this.portalRings[3].scale,1,{x:1.1,y:1.1,repeat:-1,yoyo:!0,ease:Power1.easeInOut})],0,"start",.2);N.add([TweenMax.to(le[0].scale,3,{x:3,y:3,ease:Power2.easeOut,repeat:-1}),TweenMax.to(le[1].scale,3,{x:3,y:3,ease:Power2.easeOut,repeat:-1}),TweenMax.to(le[2].scale,3,{x:3,y:3,ease:Power2.easeOut,repeat:-1}),TweenMax.to(le[3].scale,3,{x:3,y:3,ease:Power2.easeOut,repeat:-1}),TweenMax.to(le[4].scale,3,{x:3,y:3,ease:Power2.easeOut,repeat:-1})],-2,"start",.6),N.add([TweenMax.to(le[0],3,{alpha:0,ease:Power2.easeOut,repeat:-1}),TweenMax.to(le[1],3,{alpha:0,ease:Power2.easeOut,repeat:-1}),TweenMax.to(le[2],3,{alpha:0,ease:Power2.easeOut,repeat:-1}),TweenMax.to(le[3],3,{alpha:0,ease:Power2.easeOut,repeat:-1}),TweenMax.to(le[4],3,{alpha:0,ease:Power2.easeOut,repeat:-1})],-2,"start",.6),N.add([TweenMax.to(pe[0].scale,3,{x:3,y:3,ease:Power2.easeOut,repeat:-1}),TweenMax.to(pe[1].scale,3,{x:3,y:3,ease:Power2.easeOut,repeat:-1}),TweenMax.to(pe[2].scale,3,{x:3,y:3,ease:Power2.easeOut,repeat:-1}),TweenMax.to(pe[3].scale,3,{x:3,y:3,ease:Power2.easeOut,repeat:-1}),TweenMax.to(pe[4].scale,3,{x:3,y:3,ease:Power2.easeOut,repeat:-1})],-3,"start",.6),N.add([TweenMax.to(pe[0],3,{alpha:0,ease:Power2.easeOut,repeat:-1}),TweenMax.to(pe[1],3,{alpha:0,ease:Power2.easeOut,repeat:-1}),TweenMax.to(pe[2],3,{alpha:0,ease:Power2.easeOut,repeat:-1}),TweenMax.to(pe[3],3,{alpha:0,ease:Power2.easeOut,repeat:-1}),TweenMax.to(pe[4],3,{alpha:0,ease:Power2.easeOut,repeat:-1})],-3,"start",.6);var ge=this.islandAsteroidHand.getContainer("hub-scene/asteroid-island/hand-inner").getContainer("hub-scene/asteroid-island/hand");ue.add([TweenMax.to(ge.scale,.9,{y:.8,ease:Power1.easeInOut}),TweenMax.to(ge.getSpriteAt(1).scale,.9,{y:1.25,ease:Power1.easeInOut})],0),ue.add([TweenMax.to(ge.scale,1,{y:1,ease:Power1.easeInOut}),TweenMax.to(ge.getSpriteAt(1).scale,1,{y:1,ease:Power1.easeInOut})],0),ue.add(TweenMax.to(ge.getSpriteAt(1),.9,{rotation:.4,ease:Power1.easeInOut,repeat:1,yoyo:!0}),0),this.idleTimeline.add(ue,0),this.idleTimeline.add(N,-2)}if(this.islandIce){this.islandIce.scale=new PIXI.Point(.33,.33);var me=this.islandIce.getSprite("hub-scene/ice-island/waves-1"),ye=this.islandIce.getSprite("hub-scene/ice-island/waves-2");me.scale.x=ye.scale.x=2.7,me.scale.y=ye.scale.y=.4*3,me.alpha=ye.alpha=0;var fe=new TimelineMax({repeat:-1}),be=new TimelineMax({repeat:-1}),we=new TimelineMax({repeat:-1});fe.add(TweenMax.to(me,.5,{alpha:.5,ease:Power1.easeIn}),0),fe.add(TweenMax.to(me,2,{alpha:0,ease:Power1.easeOut}),3),fe.add(TweenMax.to(me.scale,5,{x:4.55,y:1.1*3.5,ease:Power1.easeInOut}),0),be.add(TweenMax.to(ye,.5,{alpha:.5,ease:Power1.easeIn}),0),be.add(TweenMax.to(ye,2,{alpha:0,ease:Power1.easeOut}),3),be.add(TweenMax.to(ye.scale,5,{x:4.55,y:1.1*3.5,ease:Power1.easeInOut}),0);var ve=this.islandIce.getContainer("hub-scene/ice-island/hand");we.add([TweenMax.to(ve.scale,.9,{y:.8,ease:Power1.easeInOut}),TweenMax.to(ve.getSpriteAt(1).scale,.9,{y:1.25,ease:Power1.easeInOut})],.1),we.add([TweenMax.to(ve.scale,1,{y:1,ease:Power1.easeInOut}),TweenMax.to(ve.getSpriteAt(1).scale,1,{y:1,ease:Power1.easeInOut})]),we.add(TweenMax.to(ve.getSpriteAt(1),.9,{rotation:-.6,ease:Power1.easeInOut,repeat:1,yoyo:!0}),0);var ke=Game.getRandom(-2,0);this.idleTimeline.add(fe,ke),this.idleTimeline.add(be,ke+3),this.idleTimeline.add(we,Game.getRandom(0,2))}if(this.islandJungle){this.islandJungle.scale=new PIXI.Point(.33,.33);var Se=this.islandJungle.getSprite("hub-scene/jungle-island/waves-1"),xe=this.islandJungle.getSprite("hub-scene/jungle-island/waves-2");Se.scale.x=xe.scale.x=2.7,Se.scale.y=xe.scale.y=.6*3,Se.alpha=xe.alpha=0;var Pe=this.islandJungle.getContainer("hub-scene/jungle-island/hand"),Be=new TimelineMax({repeat:-1}),Te=new TimelineMax({repeat:-1}),Ge=new TimelineMax({repeat:-1});Be.add(TweenMax.to(Se,.5,{alpha:.5,ease:Power1.easeIn}),0),Be.add(TweenMax.to(Se,2,{alpha:0,ease:Power1.easeOut}),3),Be.add(TweenMax.to(Se.scale,5,{x:4.55,y:1.1*3.5,ease:Power1.easeInOut}),0),Te.add(TweenMax.to(xe,.5,{alpha:.5,ease:Power1.easeIn}),0),Te.add(TweenMax.to(xe,2,{alpha:0,ease:Power1.easeOut}),3),Te.add(TweenMax.to(xe.scale,5,{x:4.55,y:1.1*3.5,ease:Power1.easeInOut}),0),Ge.add([TweenMax.to(Pe.scale,.9,{y:.8,ease:Power1.easeInOut}),TweenMax.to(Pe.getSpriteAt(1).scale,.9,{y:1.25,ease:Power1.easeInOut})],.1),Ge.add([TweenMax.to(Pe.scale,1,{y:1,ease:Power1.easeInOut}),TweenMax.to(Pe.getSpriteAt(1).scale,1,{y:1,ease:Power1.easeInOut})]),Ge.add(TweenMax.to(Pe.getSpriteAt(1),.9,{rotation:.6,ease:Power1.easeInOut,repeat:1,yoyo:!0}),0);var Ce=Game.getRandom(-2,0);this.idleTimeline.add(Be,Ce),this.idleTimeline.add(Te,Ce+3),this.idleTimeline.add(Ge,Game.getRandom(0,2))}if(this.islandVolcano){this.islandVolcano.scale=new PIXI.Point(.33,.33);var Ae=this.islandVolcano.getSprite("hub-scene/volcano-island/waves-1"),Me=this.islandVolcano.getSprite("hub-scene/volcano-island/waves-2");Ae.scale.x=Me.scale.x=2.7,Ae.scale.y=Me.scale.y=.6*3,Ae.alpha=Me.alpha=0;var Ie=this.islandVolcano.getContainer("hub-scene/volcano-island/hand"),Le=new TimelineMax({repeat:-1}),He=new TimelineMax({repeat:-1}),Re=new TimelineMax({repeat:-1});Le.add(TweenMax.to(Ae,.5,{alpha:.5,ease:Power1.easeIn}),0),Le.add(TweenMax.to(Ae,2,{alpha:0,ease:Power1.easeOut}),3),Le.add(TweenMax.to(Ae.scale,5,{x:4.55,y:1.1*3.5,ease:Power1.easeInOut}),0),He.add(TweenMax.to(Me,.5,{alpha:.5,ease:Power1.easeIn}),0),He.add(TweenMax.to(Me,2,{alpha:0,ease:Power1.easeOut}),3),He.add(TweenMax.to(Me.scale,5,{x:4.55,y:1.1*3.5,ease:Power1.easeInOut}),0),Re.add([TweenMax.to(Ie.scale,.9,{y:.8,ease:Power1.easeInOut}),TweenMax.to(Ie.getSpriteAt(1).scale,.9,{y:1.25,ease:Power1.easeInOut})],.1),Re.add([TweenMax.to(Ie.scale,1,{y:1,ease:Power1.easeInOut}),TweenMax.to(Ie.getSpriteAt(1).scale,1,{y:1,ease:Power1.easeInOut})]),Re.add(TweenMax.to(Ie.getSpriteAt(1),.9,{rotation:.6,ease:Power1.easeInOut,repeat:1,yoyo:!0}),0);var De=Game.getRandom(-2,0);this.idleTimeline.add(Le,De),this.idleTimeline.add(He,De+3),this.idleTimeline.add(Re,Game.getRandom(0,2))}this.islandsForegroundLayer1=new ParallaxLayer(this,.87,k,!0),this.islandsForegroundLayer2=new ParallaxLayer(this,.722,S,!0),this.islandsLayer=new ParallaxLayer(this,1,b,!0),this.islandsBackgroundLayer=new ParallaxLayer(this,1.11,v,!0),this.skyLayer=new ParallaxLayer(this,2,w,!0),this.islandsLayer.setLimitY(-80,120),this.islandsBackgroundLayer.setLimitY(-80,120),this.islandsForegroundLayer1.setLimitY(-80,120),this.islandsForegroundLayer2.setLimitY(-80,120),this.skyLayer.setLimitY(-80,120),this.clickToPlay=Game.displayStore.getSprite("hub-scene/click-to-play"),this.gameLogosHolder=Game.displayStore.getContainer("hub-scene/game-logos/logo-holder"),1==this.gameLaunchMode&&(this.smallGameLogoHolder=Game.displayStore.getContainer("hub-scene/small-game-logo-holder"),this.smallGameLogoHolder.position.y=780);for(p=0;p<this.gameLogosHolder.children.length;p++){var Oe=this.gameLogosHolder.getSpriteAt(p);Oe.alpha=0,(q=Oe.getSpriteAt(0)).position.x=3,q.position.y=20,q.scale=new PIXI.Point(1.2,1.2),q.tint=0,q.alpha=.3}if(m&&(m.setRegPointPixels(Game.stageWidth/2,300,!0),g.setRegPointPixels(Game.stageWidth/2,300,!0)),this.container.addChild(this.mainHolder),this.smallGameLogoHolder&&this.container.addChild(this.smallGameLogoHolder),this.container.addChild(this.clickToPlay),this.container.addChild(this.gameLogosHolder),this.container.addChild(this.characterHolder),this.islandSign&&this.container.addChild(this.islandSign),1==this.showIntro&&(g&&this.container.addChild(g),this.container.addChild(this.introSign),m&&this.container.addChild(m)),1==this.gameLaunchMode&&0==Game.onDesktop&&(this.container.addChild(this.touchHintChevronLeft),this.container.addChild(this.touchHintChevronRight)),this.container.addChild(this.screenHit),this.addListeners(),this.allowClick(this),this.createMarkers(),this.introTimeline=this.killTween(this.introTimeline),this.introTimeline=new TimelineMax,2==this.gameLaunchMode||3==this.gameLaunchMode)this.removeListeners(),this.skipToMarker(this.game.targetGameString,!0);else{var Ee=this.foregroundLayer.getContainer("hub-scene/island-beach-foreground"),Fe=this.foregroundLayer2.getContainer("hub-scene/island-beach-foreground2"),_e=Ee.getSprite("hub-scene/beach-island/foreground-island-1.png"),je=Ee.getSprite("hub-scene/beach-island/foreground-island-2.png"),We=Fe.getSprite("hub-scene/beach-island/foreground-island-3.png");if(this.showAsteroid)var Ue=this.foregroundLayer.getContainer("hub-scene/island-asteroid-foreground"),ze=this.foregroundLayer2.getContainer("hub-scene/island-asteroid-foreground2"),Ve=Ue.getContainer("hub-scene/asteroid-island/foreground-island-1"),Xe=Ue.getContainer("hub-scene/asteroid-island/foreground-island-3"),Ne=ze.getContainer("hub-scene/asteroid-island/foreground-island-2");var qe=this.foregroundLayer.getContainer("hub-scene/island-ice-foreground"),Ye=this.foregroundLayer2.getContainer("hub-scene/island-ice-foreground2"),Ke=qe.getSprite("hub-scene/ice-island/foreground-island-1.png"),Ze=qe.getSprite("hub-scene/ice-island/foreground-island-3.png"),Je=Ye.getSprite("hub-scene/ice-island/foreground-island-2.png"),Qe=this.foregroundLayer.getContainer("hub-scene/island-volcano-foreground"),$e=this.foregroundLayer2.getContainer("hub-scene/island-volcano-foreground2"),et=Qe.getSprite("hub-scene/volcano-island/foreground-island-1.png"),tt=Qe.getSprite("hub-scene/volcano-island/foreground-island-2.png"),it=$e.getSprite("hub-scene/volcano-island/foreground-island-3.png"),st=this.foregroundLayer.getContainer("hub-scene/island-jungle-foreground"),ot=this.foregroundLayer2.getContainer("hub-scene/island-jungle-foreground2").getSprite("hub-scene/jungle-island/foreground-island-1.png"),at=st.getSprite("hub-scene/jungle-island/foreground-island-2.png"),rt=st.getSprite("hub-scene/jungle-island/foreground-island-3.png"),nt=v.getContainer("hub-scene/island-beach-back").getContainer("hub-scene/beach-island/back.png");if(this.showAsteroid)var ht=v.getContainer("hub-scene/island-asteroid-back").getContainer("hub-scene/asteroid-island/back.png");var lt=v.getContainer("hub-scene/island-ice-back").getContainer("hub-scene/ice-island/back.png"),pt=v.getContainer("hub-scene/island-jungle-back").getContainer("hub-scene/jungle-island/back.png"),ct=v.getContainer("hub-scene/island-volcano-back").getContainer("hub-scene/volcano-island/back.png");this.fishJump=Game.displayStore.getAnimatedSprite("hub-scene/framed-animations/fish-jump"),this.fishJump.animationSpeed=.19,this.fishJump.scale.x=.8,this.fishJump.scale.y=.8,this.fishJump.loop=!1,this.fishJump.alpha=0,this.whaleSurface=Game.displayStore.getAnimatedSprite("hub-scene/framed-animations/whale-surface"),this.whaleSurface.animationSpeed=.15,this.whaleSurface.scale.x=.6,this.whaleSurface.scale.y=.6,this.whaleSurface.loop=!1,this.whaleSurface.alpha=0,this.dolphinJump=Game.displayStore.getAnimatedSprite("hub-scene/framed-animations/dolphin-jump"),this.dolphinJump.animationSpeed=.19,this.dolphinJump.scale.x=.8,this.dolphinJump.scale.y=.8,this.dolphinJump.loop=!1,this.dolphinJump.alpha=0,this.skipToPosition(this.fullHubIslandLocations[4]);if(1==this.showIntro){this.introTimeline.timeScale(.2);for(var dt=new TimelineMax,p=0;p<this.clouds.length;p++)Math.abs(y[p].scale)>4?(this.clouds[p].position.x<512?dt.add(TweenMax.to(this.clouds[p].position,.4,{x:"-=1600",y:"-=900",ease:Power2.easeIn}),p/20):dt.add(TweenMax.to(this.clouds[p].position,.4,{x:"+=1600",y:"-=900",ease:Power2.easeIn}),p/20),dt.add(TweenMax.to(this.clouds[p],.4,{alpha:0,ease:Power2.easeInOut}),p/20),dt.add(TweenMax.to(this.clouds[p].scale,.4,{x:"*=3",y:"*=3",ease:Power2.easeIn}),p/20)):(this.clouds[p].position.x<512?dt.add(TweenMax.to(this.clouds[p].position,.8,{x:"-=1600",y:"-=400",ease:Power2.easeIn}),p/20):dt.add(TweenMax.to(this.clouds[p].position,.8,{x:"+=1600",y:"-=400",ease:Power2.easeIn}),p/20),dt.add(TweenMax.to(this.clouds[p],.8,{alpha:0,ease:Power2.easeIn}),p/20),dt.add(TweenMax.to(this.clouds[p].scale,.8,{x:"*=3",y:"*=3",ease:Power2.easeIn}),p/20));dt.timeScale(1.15),this.introTimeline.add(dt,0)}else this.introTimeline.timeScale(1.1);this.showAsteroid?this.introTimeline.add([TweenMax.from(this.mainHolder.scale,1.5,{ease:Power3.easeInOut,x:.6,y:.6}),TweenMax.from(this.mainHolder.position,1.5,{ease:Power3.easeInOut,y:"+=200"}),TweenMax.from(this.islandVolcano.scale,1.5,{ease:Power3.easeInOut,x:.24,y:.24}),TweenMax.from(this.islandIce.scale,1.5,{ease:Power3.easeInOut,x:.24,y:.24}),TweenMax.from(this.islandJungle.scale,1.5,{ease:Power3.easeInOut,x:.24,y:.24}),TweenMax.from(this.islandBeach.scale,1.5,{ease:Power3.easeInOut,x:.24,y:.24}),TweenMax.from(this.islandAsteroid.scale,1.5,{ease:Power3.easeInOut,x:.24,y:.24}),TweenMax.from(ct.scale,1.5,{ease:Power3.easeInOut,x:.8,y:.8}),TweenMax.from(lt.scale,1.5,{ease:Power3.easeInOut,x:.8,y:.8}),TweenMax.from(pt.scale,1.5,{ease:Power3.easeInOut,x:.8,y:.8}),TweenMax.from(nt.scale,1.5,{ease:Power3.easeInOut,x:.8,y:.8}),TweenMax.from(ht.scale,1.5,{ease:Power3.easeInOut,x:.8,y:.8}),TweenMax.from(ct.position,1.5,{ease:Power3.easeInOut,y:"+=20"}),TweenMax.from(lt.position,1.5,{ease:Power3.easeInOut,y:"+=20"}),TweenMax.from(pt.position,1.5,{ease:Power3.easeInOut,y:"+=20"}),TweenMax.from(nt.position,1.5,{ease:Power3.easeInOut,y:"+=20"}),TweenMax.from(ht.position,1.5,{ease:Power3.easeInOut,y:"+=20"}),TweenMax.from(_e.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(je.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(We.scale,1.5,{ease:Power3.easeInOut,x:.6,y:.6}),TweenMax.from(_e.position,1.5,{ease:Power3.easeInOut,x:"+=140",y:"-=65"}),TweenMax.from(je.position,1.5,{ease:Power3.easeInOut,x:"-=130",y:"-=65"}),TweenMax.from(We.position,1.5,{ease:Power3.easeInOut,x:"-=40",y:"-=105"}),TweenMax.from(Ve.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(Ne.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(Xe.scale,1.5,{ease:Power3.easeInOut,x:.6,y:.6}),TweenMax.from(Ve.position,1.5,{ease:Power3.easeInOut,x:"+=160",y:"-=65"}),TweenMax.from(Ne.position,1.5,{ease:Power3.easeInOut,x:"-=10",y:"-=125"}),TweenMax.from(Xe.position,1.5,{ease:Power3.easeInOut,x:"-=140",y:"-=65"}),TweenMax.from(this.islandAsteroidHand.position,1.5,{ease:Power3.easeInOut,x:"-=60",y:"-=45"}),TweenMax.from(Ke.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(Je.scale,1.5,{ease:Power3.easeInOut,x:.6,y:.6}),TweenMax.from(Ze.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(Ke.position,1.5,{ease:Power3.easeInOut,x:"+=150",y:"-=60"}),TweenMax.from(Je.position,1.5,{ease:Power3.easeInOut,x:"-=35",y:"-=100"}),TweenMax.from(Ze.position,1.5,{ease:Power3.easeInOut,x:"-=150",y:"-=60"}),TweenMax.from(et.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(it.scale,1.5,{ease:Power3.easeInOut,x:.6,y:.6}),TweenMax.from(tt.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(et.position,1.5,{ease:Power3.easeInOut,x:"+=135",y:"-=57"}),TweenMax.from(it.position,1.5,{ease:Power3.easeInOut,x:"+=40",y:"-=100"}),TweenMax.from(tt.position,1.5,{ease:Power3.easeInOut,x:"-=110",y:"-=65"}),TweenMax.from(ot.scale,1.5,{ease:Power3.easeInOut,x:.6,y:.6}),TweenMax.from(rt.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(at.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(ot.position,1.5,{ease:Power3.easeInOut,x:"+=20",y:"-=110"}),TweenMax.from(rt.position,1.5,{ease:Power3.easeInOut,x:"+=150",y:"-=70"}),TweenMax.from(at.position,1.5,{ease:Power3.easeInOut,x:"-=125",y:"-=60"})],0):this.introTimeline.add([TweenMax.from(this.mainHolder.scale,1.5,{ease:Power3.easeInOut,x:.6,y:.6}),TweenMax.from(this.mainHolder.position,1.5,{ease:Power3.easeInOut,y:"+=200"}),TweenMax.from(this.islandVolcano.scale,1.5,{ease:Power3.easeInOut,x:.24,y:.24}),TweenMax.from(this.islandIce.scale,1.5,{ease:Power3.easeInOut,x:.24,y:.24}),TweenMax.from(this.islandJungle.scale,1.5,{ease:Power3.easeInOut,x:.24,y:.24}),TweenMax.from(this.islandBeach.scale,1.5,{ease:Power3.easeInOut,x:.24,y:.24}),TweenMax.from(ct.scale,1.5,{ease:Power3.easeInOut,x:.8,y:.8}),TweenMax.from(lt.scale,1.5,{ease:Power3.easeInOut,x:.8,y:.8}),TweenMax.from(pt.scale,1.5,{ease:Power3.easeInOut,x:.8,y:.8}),TweenMax.from(nt.scale,1.5,{ease:Power3.easeInOut,x:.8,y:.8}),TweenMax.from(ct.position,1.5,{ease:Power3.easeInOut,y:"+=20"}),TweenMax.from(lt.position,1.5,{ease:Power3.easeInOut,y:"+=20"}),TweenMax.from(pt.position,1.5,{ease:Power3.easeInOut,y:"+=20"}),TweenMax.from(nt.position,1.5,{ease:Power3.easeInOut,y:"+=20"}),TweenMax.from(_e.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(je.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(We.scale,1.5,{ease:Power3.easeInOut,x:.6,y:.6}),TweenMax.from(_e.position,1.5,{ease:Power3.easeInOut,x:"+=160",y:"-=65"}),TweenMax.from(je.position,1.5,{ease:Power3.easeInOut,x:"-=140",y:"-=65"}),TweenMax.from(We.position,1.5,{ease:Power3.easeInOut,x:"+=40",y:"-=105"}),TweenMax.from(Ke.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(Je.scale,1.5,{ease:Power3.easeInOut,x:.6,y:.6}),TweenMax.from(Ze.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(Ke.position,1.5,{ease:Power3.easeInOut,x:"+=150",y:"-=60"}),TweenMax.from(Je.position,1.5,{ease:Power3.easeInOut,x:"-=35",y:"-=100"}),TweenMax.from(Ze.position,1.5,{ease:Power3.easeInOut,x:"-=150",y:"-=60"}),TweenMax.from(et.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(it.scale,1.5,{ease:Power3.easeInOut,x:.6,y:.6}),TweenMax.from(tt.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(et.position,1.5,{ease:Power3.easeInOut,x:"+=135",y:"-=57"}),TweenMax.from(it.position,1.5,{ease:Power3.easeInOut,x:"+=80",y:"-=100"}),TweenMax.from(tt.position,1.5,{ease:Power3.easeInOut,x:"-=110",y:"-=65"}),TweenMax.from(ot.scale,1.5,{ease:Power3.easeInOut,x:.6,y:.6}),TweenMax.from(rt.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(at.scale,1.5,{ease:Power3.easeInOut,x:.7,y:.7}),TweenMax.from(ot.position,1.5,{ease:Power3.easeInOut,x:"-=20",y:"-=110"}),TweenMax.from(rt.position,1.5,{ease:Power3.easeInOut,x:"+=150",y:"-=70"}),TweenMax.from(at.position,1.5,{ease:Power3.easeInOut,x:"-=125",y:"-=60"})],0);for(p=0;p<this.balloons.length;p++)this.introTimeline.add(TweenMax.to(this.balloons[p],.2,{rotation:Game.getRandom(-.3,.3),ease:Power1.easeInOut,repeat:5,yoyo:!0}),Game.getRandom(-3,0));this.introSign.scale.x=this.introSign.scale.y=.7,this.introTimeline.add(TweenMax.from(this.introSign,.1,{alpha:0,ease:Power2.easeIn}),0),this.introTimeline.add(TweenMax.to(this.introSign.position,.75,{y:-500,ease:Power3.easeIn}),0),this.introTimeline.add(TweenMax.to(this.introSign.scale,.75,{x:3,y:3,ease:Power3.easeIn}),0)}if(1==this.gameLaunchMode)this.introTimeline.call(function(){1==Game.onDesktop?this.game.ui.setUI("hub"):this.game.ui.setUI("hub-touch");for(var e=0;e<this.markers.length;e++)this.markers[e].open(e/20);0==Game.onDesktop&&this.setUpChevronTimeline()},null,this,"-=0.5");else for(p=0;p<this.markers.length;p++)this.markers[p].open(.3);this.fishJumpAnimationTimer=0,this.fishJumpAnimationLimit=100,this.whaleSurfaceAnimationTimer=0,this.whaleSurfaceAnimationLimit=200,this.dolphinJumpAnimationTimer=0,this.dolphinJumpAnimationLimit=120},t.prototype.addGameMarkers=function(e){for(var t=0;t<e.length;t++)for(var i=0;i<e[t].length;i++)this.markerData.push(e[t][i])},t.prototype.setUpChevronTimeline=function(){this.chevronsOn=!0,this.hintChevronTimeline=new TimelineMax({repeat:-1}),this.hintChevronTimeline.add([TweenMax.to(this.touchHintChevronLeft.position,1,{x:"-=40",ease:Sine.easeIn}),TweenMax.to(this.touchHintChevronLeft,.5,{alpha:1,ease:Sine.easeIn}),TweenMax.to(this.touchHintChevronRight.position,1,{x:"+=40",ease:Sine.easeIn}),TweenMax.to(this.touchHintChevronRight,.5,{alpha:1,ease:Sine.easeIn})],0),this.hintChevronTimeline.add([TweenMax.to(this.touchHintChevronLeft,.2,{alpha:0,ease:Sine.easeOut}),TweenMax.to(this.touchHintChevronRight,.2,{alpha:0,ease:Sine.easeOut})],.8)},t.prototype.selectRandomCharacter=function(e){for(var t=Game.coreData.getRideData(e)[0].characters,i=this.characterHolder.getContainer("hub-scene/characters"),s=t[Game.getRandom(0,t.length-1,!0)],o=i.getSprite("hub-scene/characters/"+s+".png"),a=0;a<i.children.length;a++)i.getChildAt(a).alpha=0;o.alpha=1,TweenMax.delayedCall(1,function(){switch(s){case"ggg":Game.playSound("hub-scene/triple-yeyahh.mp3");break;case"kenzie":Game.playSound("hub-scene/kenzie.mp3");break;case"babe":Game.playSound("hub-scene/babe-here-i-come.mp3");break;case"hudson":Game.playSound("hub-scene/hudson-gameshakers.mp3");break;case"spongebob":Game.playSound("hub-scene/spongebob-woah.mp3");break;case"patrick":Game.playSound("hub-scene/patrick-laughing.mp3");break;case"linc":Game.playSound("hub-scene/linc-awesome.mp3");break;case"henry":Game.playSound("hub-scene/henry-lets-go.mp3");break;case"frankie":Game.playSound("hub-scene/i-am-frankie.mp3");break;case"max":Game.playSound("hub-scene/max-enemies.mp3");break;case"phoebe":Game.playSound("hub-scene/phoebe-woop.mp3");break;case"purple":Game.playSound("hub-scene/donnie-were-awesome.mp3");break;case"orange":Game.playSound("hub-scene/mikey-oh-yeah.mp3");break;case"red":Game.playSound("hub-scene/raph-enough-talk.mp3");break;case"blue":Game.playSound("hub-scene/leo-hooowho.mp3");break;case"nicky":Game.playSound("hub-scene/nicky-drumroll.mp3");break;case"ricky":Game.playSound("hub-scene/ricky-ah-impressive.mp3");break;case"dicky":Game.playSound("hub-scene/dicky-hey-man.mp3");break;case"dawn":Game.playSound("hub-scene/dawn-leave-it-to-me.mp3");break;case"freddy":Game.playSound("hub-scene/freddie-ha-ha.mp3");break;case"lawrence":Game.playSound("hub-scene/lawrence-i-got-this.mp3");break;case"summer":Game.playSound("hub-scene/summer-got-this.mp3");break;case"tomika":Game.playSound("hub-scene/tomika-ready.mp3");break;case"zack":Game.playSound("hub-scene/zack-school-of-rock.mp3");break;case"arc":Game.playSound("hub-scene/arc-positive-1.mp3");break;case"ciara":Game.playSound("hub-scene/ciara-positive-1.mp3");break;case"prudence":Game.playSound("hub-scene/prudence-positive-1.mp3");break;case"warwick":Game.playSound("hub-scene/warwick-positive-1.mp3");break;case"lena":Game.playSound("hub-scene/lena-i-love-it.mp3")}},null,this),Game.coreData.setSelectedCharacter(s)},t.prototype.createMarkers=function(){for(var e=0;e<this.markerData.length;e++){var t=Game.displayStore.getContainer("hub-scene/marker-holder"),i=new Marker(this,t,this.markerData[e],e);this.markers.push(i)}this.islandsLayer.addMarkers(this.markers)},t.prototype.allowClick=function(e){e.clickAllowed=!0},t.prototype.skipToMarker=function(e,t){var i;i=t?1:this.smoothing,this.islandsLayer.removeLimitY(),this.islandsBackgroundLayer.removeLimitY(),this.islandsForegroundLayer1.removeLimitY(),this.islandsForegroundLayer2.removeLimitY();for(var s=0;s<this.markers.length;s++)this.markers[s].id==e&&(this.viewPos.x=-this.markers[s].chunk*Game.stageWidth-this.markers[s].container.position.x+Game.stageWidth/2,this.viewPos.y=85+this.markers[s].container.toLocal(new PIXI.Point(0,Game.stageHeight/2-this.islandsLayer.container.position.y),this.islandsLayer.container).y,this.skyLayer.tick(i,this.viewPos),this.islandsLayer.tick(i,this.viewPos),this.islandsBackgroundLayer.tick(i,this.viewPos),this.islandsForegroundLayer1.tick(i,this.viewPos),this.islandsForegroundLayer2.tick(i,this.viewPos),this.markers[s].engage("instant"))},t.prototype.skipToPosition=function(e){this.viewPos.x=e,this.islandsLayer.setToUpdatedPos(this.viewPos),this.skyLayer.setToUpdatedPos(this.viewPos),this.islandsBackgroundLayer.setToUpdatedPos(this.viewPos),this.islandsForegroundLayer1.setToUpdatedPos(this.viewPos),this.islandsForegroundLayer2.setToUpdatedPos(this.viewPos)},t.prototype.checkTappedMarker=function(e){for(var t=0;t<this.markers.length;t++){var i=this.markers[t].container.position.x+this.markers[t].container.parent.position.x,s=this.markers[t].container.position.y;e.x>i-50&&e.x<i+50&&e.y>s-150&&e.y<s&&this.markers[t].engage("fast")}},t.prototype.zoomInToMarker=function(e,t){switch(this.stopTick=!0,this.zoomedIn=!0,this.introTimeline=this.killTween(this.introTimeline),this.hideSign(),Game.playSound("hub-scene/game-select-swoosh.mp3"),Game.stopSound("hub-scene/game-deselect-swoosh.mp3"),this.hideGameLogo(e),this.selectRandomCharacter(e.id),e.id){case"beach-buggy":Game.playSound("hub-scene/game-select-beach-buggy.mp3");break;case"dodgems":Game.playSound("hub-scene/game-select-dodgems.mp3");break;case"roller-coaster-doom":Game.playSound("hub-scene/game-select-roller-coaster-doom.mp3");break;case"river-rangers":Game.playSound("hub-scene/game-select-river-rangers.mp3",.5)}for(r=0;r<this.gameLogosHolder.children.length;r++){var i=this.gameLogosHolder.getSpriteAt(r);i.alpha=0,(o=i.getSpriteAt(0)).position.x=3,o.position.y=20,o.scale=new PIXI.Point(1.2,1.2),o.tint=0,o.alpha=.3}this.zoomInTimeline=this.killTween(this.zoomInTimeline),this.zoomInTimeline=new TimelineMax,this.islandsLayer.removeLimitY(),this.islandsBackgroundLayer.removeLimitY(),this.islandsForegroundLayer1.removeLimitY(),this.islandsForegroundLayer2.removeLimitY();for(r=0;r<this.gameLogosHolder.children.length;r++)this.gameLogosHolder.getSpriteAt(r).alpha=0;console.log("hub-scene/game-logos/"+e.id);var s=this.gameLogosHolder.getContainer("hub-scene/game-logos/"+e.id);s.scale=new PIXI.Point(0,0),s.rotation=Game.getRandom(-.4,.4),this.currentlyZoomedMarker=e;var o=s.getSpriteAt(0);o.position.x=20,o.position.y=30,o.scale=new PIXI.Point(1.4,1.4);var a=this.characterHolder.getSprite("hub-scene/character-box-shadow");this.zoomInTimeline.add([TweenMax.to(s,.5,{alpha:1,ease:Expo.easeOut}),TweenMax.to(s.scale,.7,{x:1,y:1,ease:Elastic.easeOut}),TweenMax.to(o.scale,.9,{x:1,y:1,ease:Elastic.easeOut}),TweenMax.to(o.position,.9,{x:2,y:7,ease:Elastic.easeOut})],.5),this.zoomInTimeline.add([TweenMax.to(this.characterHolder.scale,1,{x:1,y:1,ease:Elastic.easeOut}),TweenMax.to(a.position,1,{x:2,y:6,ease:Elastic.easeOut}),TweenMax.to(this.characterHolder.getSprite("hub-scene/character-box-arrow").position,1,{x:-66,ease:Elastic.easeOut,delay:.2})],1),this.zoomInTimeline.add(TweenMax.to(s,.4,{rotation:0,ease:Back.easeOut}),.55),"instant"==t?(this.smoothing=1,this.clickToPlay.position.y=622,this.fadeOverlay.alpha=.7,this.zoomInTimeline.add([TweenMax.to(this.mainHolder.scale,1,{x:3,y:3,ease:Quad.easeOut}),TweenMax.to(this.mainHolder.position,1,{y:260,ease:Quad.easeOut})],0),this.game.ui.setUI("hub-touch")):(this.game.ui.setUI("hub-title"),this.zoomInTimeline.add([TweenMax.to(this.mainHolder.scale,1,{x:3,y:3,ease:Expo.easeInOut}),TweenMax.to(this.viewPos,0,{x:e.container.toLocal(new PIXI.Point(Game.stageWidth/2-this.islandsLayer.container.position.x,0),this.islandsLayer.container).x,y:70+e.container.toLocal(new PIXI.Point(0,Game.stageHeight/2-this.islandsLayer.container.position.y),this.islandsLayer.container).y,ease:Power2.easeOut})],0),this.zoomInTimeline.add(TweenMax.to(this.clickToPlay.position,.2,{y:622,ease:Back.easeOut}),.9));for(var r=0;r<this.markers.length;r++)this.markers[r]!=e&&this.markers[r].hide();this.removeListeners(),this.addLaunchMiniGameListeners()},t.prototype.addLaunchMiniGameListeners=function(){var e=this;1==Game.onDesktop?this.screenHit.on("mouseup",function(t){e.initGameLoad(e)}):this.screenHit.on("touchend",function(t){e.initGameLoad(e)})},t.prototype.initGameLoad=function(e){1!=e.interactionLocked&&(e.interactionLocked=!0,Game.assetChunkManager.setCurrentGameId(e.currentlyZoomedMarker.id),Game.assetChunkManager.generateLoadChunkParams("game"),e.game.loadAssets(Game.assetChunkManager.getLoadAssets(),!0,function(){e.game.setScene(Game.assetChunkManager.getTargetInitialScene(),!0)}))},t.prototype.zoomOut=function(){this.removeListeners(),Game.playSound("hub-scene/game-deselect-swoosh.mp3",.7),Game.stopSound("hub-scene/game-select-swoosh.mp3"),this.zoomInTimeline=this.killTween(this.zoomInTimeline),this.zoomInTimeline=new TimelineMax,this.islandsLayer.setLimitY(-80,120),this.islandsBackgroundLayer.setLimitY(-80,120),this.islandsForegroundLayer1.setLimitY(-80,120),this.islandsForegroundLayer2.setLimitY(-80,120);for(t=0;t<this.gameLogosHolder.children.length;t++)this.gameLogosHolder.getSpriteAt(t).alpha=0;1==Game.onDesktop?this.game.ui.setUI("hub"):this.game.ui.setUI("hub-touch"),this.viewPos.x=0,this.viewPos.y=0,this.stopTick=!1,this.addListeners();var e=this.characterHolder.getSprite("hub-scene/character-box-shadow");this.zoomInTimeline.add([TweenMax.to(this.layersHolder.scale,.5,{x:1,y:1,ease:Expo.easeOut}),TweenMax.to(this.skyLayer.container.scale,.5,{y:1,ease:Expo.easeOut}),TweenMax.to(this.clickToPlay.position,.3,{y:730,ease:Expo.easeOut}),TweenMax.to(this.fadeOverlay,.3,{alpha:0,ease:Power3.easeOut})],0),this.zoomInTimeline.add([TweenMax.to(this.characterHolder.scale,.1,{x:0,y:0,ease:Back.easeOut}),TweenMax.to(e.position,.1,{x:0,y:0,ease:Back.easeOut}),TweenMax.to(this.characterHolder.getSprite("hub-scene/character-box-arrow").position,.1,{x:-66,ease:Back.easeOut})],0),this.zoomInTimeline.call(function(){this.zoomedIn=!1},null,this,.3);for(var t=0;t<this.markers.length;t++)this.markers[t].reset()},t.prototype.addListeners=function(){this.screenHit.interactive=!0,this.screenHit.buttonMode=!0,Game.onDesktop?(this.screenHit.on("mousedown",function(e){0!=this.clickAllowed&&(this.inputStart(e),this.mouseDownPos=e.data.getLocalPosition(this.container),this.mouseVelocity=0,this.screenHit.on("mouseup",function(e){0!=this.clickAllowed&&this.inputEnd(e)},this),this.screenHit.on("mouseout",function(e){this.inputEnd(e)},this),this.screenHit.on("mousemove",function(e){this.inputHappening(e)},this))},this),Game.renderer.view.addEventListener&&(this.scrollListenerWebkit=Game.renderer.view.addEventListener("mousewheel",this.mouseWheelHandler,!1),this.scrollListenerFirefox=Game.renderer.view.addEventListener("DOMMouseScroll",this.mouseWheelHandler,!1))):(this.screenHit.on("touchstart",function(e){this.inputStart(e)},this),this.screenHit.on("touchend",function(e){this.inputEnd(e)},this),this.screenHit.on("touchendoutside",function(e){this.inputEnd(e)},this),this.screenHit.on("touchmove",function(e){this.inputHappening(e)},this),window.addEventListener("deviceorientation",this.gyroHandler,!1))},t.prototype.inputStart=function(e){this.touching=!0,this.touchOffset=e.data.getLocalPosition(this.container),this.viewPos.x=this.lastViewPos.x=0,this.viewPos.y=this.lastViewPos.y=0,this.mouseVelocity=0,this.mouseDistance=0,this.lastMousePos=this.mouseDownPos=e.data.getLocalPosition(this.container),this.chevronInitialInputPos=this.mouseDownPos.x,this.islandsLayer.inputStart(),this.islandsBackgroundLayer.inputStart(),this.islandsForegroundLayer1.inputStart(),this.islandsForegroundLayer2.inputStart(),this.skyLayer.inputStart()},t.prototype.inputHappening=function(e){0!=this.touching&&(this.mouseVelocity=this.getDistance(e.data.getLocalPosition(this.container),this.lastMousePos),this.lastMousePos=e.data.getLocalPosition(this.container),this.updatePosition(e.data.getLocalPosition(this.container)))},t.prototype.inputEnd=function(e){if(this.removeListeners(),this.addListeners(),this.touching=!1,this.mouseDistance=this.getDistance(e.data.getLocalPosition(this.container),this.mouseDownPos),this.mouseDistance<10&&this.mouseVelocity<20){var t=e.data.getLocalPosition(this.islandsLayer.container);this.checkTappedMarker(t)}},t.prototype.showSign=function(e){if(1!=this.zoomedIn&&2!=this.gameLaunchMode&&3!=this.gameLaunchMode)switch(this.islandSignShowing=!0,Game.stringsManager.setTextString(this.signText,"island-sign-"+e),this.signText.scale.x=this.signText.scale.y*=.8,this.signText.position.x=-this.signText.width/2+Game.stringsManager.getTextOffset("island-sign-"+e).xOffset,this.signText.position.y=-40+Game.stringsManager.getTextOffset("island-sign-"+e).yOffset,this.showSignTimeline=this.killTween(this.showSignTimeline),this.showSignTimeline=new TimelineMax,this.islandSign.position.y=-60,this.showSignTimeline.add(TweenMax.to(this.islandSign.position,.1,{y:40,ease:Power1.easeIn}),0),this.showSignTimeline.add(TweenMax.to(this.islandSign.position,.7,{y:60,ease:Elastic.easeOut}),.1),this.showSignTimeline.add(TweenMax.to(this.islandSign.position,.5,{y:60,ease:Back.easeOut})),Game.playSound("hub-scene/sign-down.mp3",.2),Game.stopSound("hub-scene/island-arctic.mp3"),Game.stopSound("hub-scene/island-jungle.mp3"),Game.stopSound("hub-scene/island-beach.mp3"),Game.stopSound("hub-scene/island-volcano.mp3"),Game.stopSound("hub-scene/island-asteroid.mp3"),e){case"ice":Game.playSound("hub-scene/island-arctic.mp3",.7);break;case"beach":Game.playSound("hub-scene/island-beach.mp3",.7);break;case"jungle":Game.playSound("hub-scene/island-jungle.mp3",.8);break;case"volcano":Game.playSound("hub-scene/island-volcano.mp3",.75);break;case"asteroid":Game.playSound("hub-scene/island-asteroid.mp3",.75)}},t.prototype.hideSign=function(){2!=this.gameLaunchMode&&3!=this.gameLaunchMode&&(this.islandSignShowing=!1,this.showSignTimeline=this.killTween(this.showSignTimeline),this.showSignTimeline=new TimelineMax,this.showSignTimeline.add(TweenMax.to(this.islandSign.position,.2,{y:-60,ease:Power1.easeIn})),Game.playSound("hub-scene/sign-up.mp3",.2),Game.fadeSound("hub-scene/island-arctic.mp3",.5,0),Game.fadeSound("hub-scene/island-jungle.mp3",.5,0),Game.fadeSound("hub-scene/island-beach.mp3",.5,0),Game.fadeSound("hub-scene/island-volcano.mp3",.5,0),Game.fadeSound("hub-scene/island-asteroid.mp3",.5,0),this.showSignTimeline.call(function(){Game.stopSound("hub-scene/island-arctic.mp3"),Game.stopSound("hub-scene/island-jungle.mp3"),Game.stopSound("hub-scene/island-beach.mp3"),Game.stopSound("hub-scene/island-volcano.mp3"),Game.stopSound("hub-scene/island-asteroid.mp3")},null,this,.4))},t.prototype.killChevrons=function(){0!=this.chevronsOn&&(this.chevronsOn=!1,this.hintChevronTimeline=this.killTween(this.hintChevronTimeline),this.killChevronTimeline=new TimelineMax,this.killChevronTimeline.add([TweenMax.to(this.touchHintChevronLeft,.5,{alpha:0}),TweenMax.to(this.touchHintChevronRight,.5,{alpha:0})],0))},t.prototype.updatePosition=function(e){1!=this.stopTick&&(this.viewPos.x=e.x-this.touchOffset.x,this.viewPos.y=e.y-this.touchOffset.y,Math.abs(this.chevronInitialInputPos-e.x)>=this.chevronScrollDistanceDisable&&this.killChevrons())},t.prototype.uiClicked=function(t){e.prototype.uiClicked.call(this,t),"back-button"==t.id&&this.zoomOut()},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.uiRolledOut=function(t){e.prototype.uiRolledOut.call(this,t),"hub-left-button"==t.id&&(this.pressingButton="none"),"hub-right-button"==t.id&&(this.pressingButton="none")},t.prototype.downOnUI=function(t){e.prototype.downOnUI.call(this,t),"hub-left-button"==t.id&&(this.pressingButton="left"),"hub-right-button"==t.id&&(this.pressingButton="right")},t.prototype.upOnUI=function(t){e.prototype.upOnUI.call(this,t),"hub-left-button"==t.id&&(this.pressingButton="none"),"hub-right-button"==t.id&&(this.pressingButton="none")},t.prototype.showGameLogo=function(e){if(!(this.introTimeline&&this.introTimeline.totalProgress()<1||0==e.active||2==this.gameLaunchMode||3==this.gameLaunchMode||this.zoomInTimeline&&this.zoomInTimeline.totalProgress()<1)){this.showSmallGameLogoTimeline=this.killTween(this.showSmallGameLogoTimeline),this.showSmallGameLogoTimeline=new TimelineMax;var t=this.smallGameLogoHolder.getContainer("hub-scene/small-game-logos");this.smallGameLogoHolder.position.y=780;for(var i=0;i<t.children.length;i++)t.getSpriteAt(i).alpha=0;this.showSmallGameLogoTimeline.add(TweenMax.to(this.smallGameLogoHolder.position,.15,{y:600,ease:Power1.easeIn}),.2),this.showSmallGameLogoTimeline.add(TweenMax.to(this.smallGameLogoHolder.position,.65,{y:580,ease:Elastic.easeOut})),t.getSprite("hub-scene/small-game-logos/"+e.id).alpha=1}},t.prototype.hideGameLogo=function(e){1==this.gameLaunchMode&&(this.showSmallGameLogoTimeline=this.killTween(this.showSmallGameLogoTimeline),this.showSmallGameLogoTimeline=new TimelineMax,this.showSmallGameLogoTimeline.add(TweenMax.to(this.smallGameLogoHolder.position,.1,{y:780,ease:Power2.easeIn})))},t.prototype.playFishJumpAnimation=function(){var e,t=Game.getRandom(1,4,!0),i=[-.8,.8];switch(this.fishJump.alpha=1,this.fishJump.gotoAndPlay(1),this.fishJumpAnimationPlaying=!0,TweenMax.delayedCall(.69,function(){this.fishJump.alpha=0},null,this),t){case 1:e=[{x:700,y:50},{x:500,y:80},{x:100,y:50}],this.volcanoFG2.addChild(this.fishJump);break;case 2:e=[{x:800,y:50},{x:300,y:80},{x:100,y:50}],this.jungleFG2.addChild(this.fishJump);break;case 3:e=[{x:800,y:50},{x:300,y:80},{x:100,y:50}],this.iceFG2.addChild(this.fishJump);break;case 4:e=[{x:700,y:50},{x:550,y:85},{x:100,y:50}],this.beachFG2.addChild(this.fishJump)}this.fishJump.position.x=e[Game.getRandom(0,2,!0)].x,this.fishJump.position.y=e[Game.getRandom(0,2,!0)].y,this.fishJump.scale.x=i[Game.getRandom(0,1,!0)]},t.prototype.playWhaleSurfaceAnimation=function(){var e,t=Game.getRandom(1,4,!0),i=[-.6,.6];switch(this.whaleSurface.alpha=1,this.whaleSurface.gotoAndPlay(1),this.whaleSurfaceAnimationPlaying=!0,TweenMax.delayedCall(2.5,function(){this.whaleSurface.alpha=0},null,this),t){case 1:e=[{x:300,y:330},{x:700,y:330}],this.jungleBG.addChild(this.whaleSurface);break;case 2:e=[{x:300,y:330},{x:700,y:330}],this.volcanoBG.addChild(this.whaleSurface);break;case 3:e=[{x:300,y:330},{x:700,y:330}],this.beachBG.addChild(this.whaleSurface);break;case 4:e=[{x:300,y:330},{x:700,y:330}],this.iceBG.addChild(this.whaleSurface)}this.whaleSurface.position.x=e[Game.getRandom(0,1,!0)].x,this.whaleSurface.position.y=e[Game.getRandom(0,1,!0)].y,this.whaleSurface.scale.x=i[Game.getRandom(0,1,!0)]},t.prototype.playDolphinJumpAnimation=function(){var e,t=Game.getRandom(1,5,!0),i=[-.8,.8];switch(this.dolphinJump.alpha=1,this.dolphinJump.gotoAndPlay(1),this.dolphinJumpAnimationPlaying=!0,TweenMax.delayedCall(.59,function(){this.dolphinJump.alpha=0},null,this),t){case 1:e=[{x:400,y:100},{x:900,y:80}],this.volcanoFG2.addChild(this.dolphinJump);break;case 2:e=[{x:100,y:100},{x:900,y:80}],this.jungleFG2.addChild(this.dolphinJump);break;case 3:e=[{x:400,y:100},{x:900,y:80}],this.iceFG2.addChild(this.dolphinJump);break;case 4:e=[{x:400,y:100},{x:100,y:80}],this.beachFG2.addChild(this.dolphinJump);break;case 5:e=[{x:400,y:100},{x:100,y:80}]}this.dolphinJump.position.x=e[Game.getRandom(0,1,!0)].x,this.dolphinJump.position.y=e[Game.getRandom(0,1,!0)].y,this.dolphinJump.scale.x=i[Game.getRandom(0,1,!0)]},t.prototype.tick=function(){e.prototype.tick.call(this),this.islandsLayer.tick(this.smoothing,this.viewPos),this.skyLayer.tick(this.smoothing,this.viewPos),this.islandsBackgroundLayer.tick(this.smoothing,this.viewPos),this.islandsForegroundLayer1.tick(this.smoothing,this.viewPos),this.islandsForegroundLayer2.tick(this.smoothing,this.viewPos),this.tickTally++,"right"==this.pressingButton?this.viewPos.x-=15:"left"==this.pressingButton&&(this.viewPos.x+=15);var t=3*(this.viewPos.x-this.lastViewPos.x);this.viewPos.y,this.lastViewPos.y;1==this.showAsteroid&&(this.portalRings[1].rotation-=.01,this.portalRings[0].rotation+=.015,this.portalRings[2].rotation-=.02,this.portalRings[3].rotation+=.025);for(s=0;s<this.markers.length;s++){var i=this.markers[s];1!=Game.coreData.getRideData(this.markers[s].id)[0].hidden&&(i.tick(),i.container.toGlobal(new PIXI.Point(0,0)).x/Game.windowScaleFactor>Game.stageWidth/2-this.markerFocusThreshold&&i.container.toGlobal(new PIXI.Point(0,0)).x/Game.windowScaleFactor<Game.stageWidth/2+this.markerFocusThreshold?0==i.focused&&(this.showGameLogo(i),i.focus()):1==i.focused&&(this.hideGameLogo(i),i.unfocus()))}if(1==this.gameLaunchMode){for(var s=0;s<this.islands.length;s++){var o=!0;if(this.islands[s].container.toGlobal(new PIXI.Point(0,0)).x/Game.windowScaleFactor>Game.stageWidth/2-250&&this.islands[s].container.toGlobal(new PIXI.Point(0,0)).x/Game.windowScaleFactor<Game.stageWidth/2+250){0==this.islandSignShowing&&(this.introTimeline?1==this.introTimeline.totalProgress()&&this.showSign(this.islands[s].id):this.showSign(this.islands[s].id)),o=!1;break}}1==this.islandSignShowing&&1==o&&this.hideSign()}var a=1-Math.abs(t/1500);a>1.2&&(a=1.2),0==this.stopTick&&(this.mainHolder.scale.x+=(a-this.mainHolder.scale.x)/this.smoothing,this.mainHolder.scale.y+=(a-this.mainHolder.scale.y)/this.smoothing),this.lastViewPos.x=this.viewPos.x,this.lastViewPos.y=this.viewPos.y,1==this.game.gameLaunchMode&&(1==this.fishJumpAnimationPlaying&&++this.fishJumpAnimationTimer>=this.fishJumpAnimationLimit&&(this.fishJumpAnimationPlaying=!1,this.fishJumpAnimationTimer=0,this.playFishJumpAnimation()),1==this.whaleSurfaceAnimationPlaying&&++this.whaleSurfaceAnimationTimer>=this.whaleSurfaceAnimationLimit&&(this.whaleSurfaceAnimationPlaying=!1,this.whaleSurfaceAnimationTimer=0,this.playWhaleSurfaceAnimation()),1==this.dolphinJumpAnimationPlaying&&++this.dolphinJumpAnimationTimer>=this.dolphinJumpAnimationLimit&&(this.dolphinJumpAnimationPlaying=!1,this.dolphinJumpAnimationTimer=0,this.playDolphinJumpAnimation()))},t.prototype.keyDown=function(e){1!=this.stopTick&&("left"==e&&(this.pressingButton="left"),"right"==e&&(this.pressingButton="right"))},t.prototype.keyUp=function(e){1!=this.stopTick&&("left"==e&&(this.pressingButton="non"),"right"==e&&(this.pressingButton="none"))},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.removeListeners=function(){this.screenHit.removeAllListeners(),1==Game.onDesktop?(Game.renderer.view.removeEventListener("mousewheel",this.mouseWheelHandler),Game.renderer.view.removeEventListener("DOMMouseScroll",this.mouseWheelHandler)):window.removeEventListener("deviceorientation",this.gyroHandler,!1)},t.prototype.getDistance=function(e,t){if(!e||!t)return 0;var i=e.x-t.x,s=e.y-t.y;return Math.sqrt(i*i+s*s)},t.prototype.gyroHandler=function(e){var i=e.alpha,s=e.gamma,o=i-t.scope.lastGyroPos.x,a=s-t.scope.lastGyroPos.y;(o>100||o<-100)&&(o=0),(a>100||a<-100)&&(a=0),t.scope.chevronInitialGyroPos+=12*o,Math.abs(t.scope.chevronInitialGyroPos)>=t.scope.chevronScrollDistanceDisable&&t.scope.killChevrons(),t.scope.lastGyroPos.x=i,t.scope.lastGyroPos.y=s,1!=t.scope.touching&&1!=Game.onAndroid&&(t.scope.viewPos.x+=12*o,t.scope.viewPos.y-=8*a)},t.prototype.mouseWheelHandler=function(e){var i=window.event||e,s=Math.max(-200,Math.min(200,i.wheelDelta||10*-i.detail));t.scope.viewPos.x-=s/3},t.prototype.destroy=function(){e.prototype.destroy.call(this),Game.stopSound("hub-scene/game-deselect-swoosh.mp3"),Game.stopSound("hub-scene/game-locked.mp3"),Game.stopSound("hub-scene/game-select-beach-buggy.mp3"),Game.stopSound("hub-scene/game-select-dodgems.mp3"),Game.stopSound("hub-scene/game-select-river-rangers.mp3"),Game.stopSound("hub-scene/game-select-roller-coaster-doom.mp3"),Game.stopSound("hub-scene/game-select-swoosh.mp3"),Game.stopSound("hub-scene/island-arctic.mp3"),Game.stopSound("hub-scene/island-beach.mp3"),Game.stopSound("hub-scene/island-jungle.mp3"),Game.stopSound("hub-scene/island-volcano.mp3"),Game.stopSound("hub-scene/island-asteroid.mp3"),Game.stopSound("hub-scene/sign-up.mp3"),Game.stopSound("hub-scene/sign-down.mp3"),Game.stopSound("hub-scene/tick.mp3"),Game.stopSound("hub-scene/waves-looping.mp3"),Game.stopSound("hub-scene/hub-music.mp3"),Game.stopSound("hub-scene/triple-yeyahh.mp3"),Game.stopSound("hub-scene/kenzie.mp3"),Game.stopSound("hub-scene/babe-here-i-come.mp3"),Game.stopSound("hub-scene/hudson-gameshakers.mp3"),Game.stopSound("hub-scene/spongebob-woah.mp3"),Game.stopSound("hub-scene/henry-lets-go.mp3"),Game.stopSound("hub-scene/max-enemies.mp3"),Game.stopSound("hub-scene/phoebe-woop.mp3"),Game.stopSound("hub-scene/donnie-were-awesome.mp3"),Game.stopSound("hub-scene/mikey-oh-yeah.mp3"),Game.stopSound("hub-scene/raph-enough-talk.mp3"),Game.stopSound("hub-scene/leo-hooowho.mp3"),Game.stopSound("hub-scene/nicky-drumroll.mp3"),Game.stopSound("hub-scene/ricky-ah-impressive.mp3"),Game.stopSound("hub-scene/dicky-hey-man.mp3"),Game.stopSound("hub-scene/dawn-leave-it-to-me.mp3"),Game.stopSound("hub-scene/freddie-ha-ha.mp3"),Game.stopSound("hub-scene/lawrence-i-got-this.mp3"),Game.stopSound("hub-scene/summer-got-this.mp3"),Game.stopSound("hub-scene/tomika-ready.mp3"),Game.stopSound("hub-scene/zack-school-of-rock.mp3"),this.removeListeners(),this.idleTimeline=this.killTween(this.idleTimeline),this.showSignTimeline=this.killTween(this.showSignTimeline),this.introTimeline=this.killTween(this.introTimeline),this.zoomInTimeline=this.killTween(this.zoomInTimeline),this.showSmallGameLogoTimeline=this.killTween(this.showSmallGameLogoTimeline),this.hintChevronTimeline=this.killTween(this.hintChevronTimeline),this.killChevronTimeline=this.killTween(this.killChevronTimeline),1==this.gameLaunchMode&&0==Game.onDesktop&&(Game.displayStore.returnPooledItem(this.touchHintChevronLeft),Game.displayStore.returnPooledItem(this.touchHintChevronRight));for(t=0;t<this.markers.length;t++)this.markers[t].destroy();if(1==this.showAsteroid){for(t=0;t<this.asteroidWaterfallSplashLeft.children.length;t++)Game.displayStore.returnPooledItem(this.asteroidWaterfallSplashLeft.getSpriteAt(t)),Game.displayStore.returnPooledItem(this.asteroidWaterfallSplashRight.getSpriteAt(t));for(var t=0;t<this.asteroidWaterfallAnimations.length;t++)Game.displayStore.returnPooledItem(this.asteroidWaterfallAnimations[t])}this.islandsLayer.destroy(),this.skyLayer.destroy(),this.islandsBackgroundLayer.destroy(),this.islandsForegroundLayer1.destroy(),this.islandsForegroundLayer2.destroy()},t}(Scene),CoreData=function(){function e(e){this.firstTime=!0,this.tickets=0,this.userSetFace=!1,this.rideData=new Array,this.clothing=new Array,this.wristbands=new Array,this.currentRide={id:null,island:null,startingTickets:0},this.game=e,this.avatarAttributes={skinColour:null,hairColour:2299414,hairStyle:null,faceImage:null},this.rideData=[{id:"jet-ski",island:"beach",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!0,characters:["freddy","lawrence","summer","tomika","zack"]},{id:"beach-buggy",island:"beach",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!0,characters:["babe","ggg","hudson","kenzie"]},{id:"tree-top-gladiators",island:"jungle",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!1,characters:["linc"]},{id:"river-rangers",island:"jungle",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!0,characters:["spongebob"]},{id:"laser-cave",island:"volcano",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!0,characters:["purple","blue","orange","red"]},{id:"dodgems",island:"ice",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!1,characters:["henry"]},{id:"coco-nutty",island:"jungle",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!1,characters:["nicky","ricky","dicky","dawn"]},{id:"mayan-madness",island:"volcano",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!1,characters:["henry"]},{id:"roller-coaster-doom",island:"volcano",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!0,characters:["max","phoebe"]},{id:"roller-coaster-ice",island:"ice",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!0,characters:["babe","ggg","hudson","kenzie"]},{id:"pin-ball",island:"ice",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!1,characters:["spongebob","patrick"]},{id:"aqua-jetpack",island:"beach",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!1,characters:["max","phoebe"]},{id:"snowball-wars",island:"ice",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!1,characters:["linc"]},{id:"hover-drift",island:"beach",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!0,characters:["nicky","ricky","dicky","dawn"]},{id:"volcano-skydive",island:"volcano",active:!0,new:!0,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!1,characters:["lena"]},{id:"waterfall-wipeout",island:"jungle",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!0,characters:["frankie"]},{id:"egg-scape",island:"asteroid",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!1,characters:["kenzie","babe","ggg","hudson"]},{id:"abducktion",island:"asteroid",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!0,characters:["arc","ciara","prudence","warwick"]},{id:"striker",island:"asteroid",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!1,characters:["henry"]},{id:"crazy-golf",island:"asteroid",active:!0,new:!1,hidden:!1,lastScore:0,highScore:0,tutorialViewed:!1,scoreIsDistance:!1,characters:["frankie"]}],this.clothing.push({ride:"none",id:"t-shirt-white",category:"t-shirt",isOwned:!0,isEquipped:!0,topLayer:!1,price:0,offset:null}),this.clothing.push({ride:"none",id:"infinity-island-shirt",category:"t-shirt",isOwned:!1,isEquipped:!0,topLayer:!1,price:100,offset:null}),this.clothing.push({ride:"aqua-jetpack",id:"dr-colloso-rabbit-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:35,offset:null}),this.clothing.push({ride:"aqua-jetpack",id:"wetsuit",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:30,offset:null}),this.clothing.push({ride:"pin-ball",id:"pinball-logo-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:30,offset:null}),this.clothing.push({ride:"pin-ball",id:"sandy-suit",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:60,offset:null}),this.clothing.push({ride:"beach-buggy",id:"buggy-bash-logo-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:30,offset:null}),this.clothing.push({ride:"beach-buggy",id:"babe-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:50,offset:null}),this.clothing.push({ride:"coco-nutty",id:"dawn-jacket",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:40,offset:null}),this.clothing.push({ride:"coco-nutty",id:"ricky-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:40,offset:null}),this.clothing.push({ride:"dodgems",id:"charlotte-denim-jacket",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:35,offset:null}),this.clothing.push({ride:"dodgems",id:"kid-danger-outfit",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:60,offset:null}),this.clothing.push({ride:"roller-coaster-ice",id:"hudson-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:35,offset:null}),this.clothing.push({ride:"ice",id:"nasty-goats-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:30,offset:null}),this.clothing.push({ride:"jet-ski",id:"prep-school-blazer",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:50,offset:null}),this.clothing.push({ride:"jet-ski",id:"tomika-blazer",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:50,offset:null}),this.clothing.push({ride:"laser-cave",id:"donatello-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:50,offset:null}),this.clothing.push({ride:"laser-cave",id:"leonardo-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:60,offset:null}),this.clothing.push({ride:"laser-cave",id:"michelangelo-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:50,offset:null}),this.clothing.push({ride:"laser-cave",id:"raphael-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:60,offset:null}),this.clothing.push({ride:"mayan-madness",id:"captain-man-outfit",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:60,offset:null}),this.clothing.push({ride:"mayan-madness",id:"safari-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:15,offset:null}),this.clothing.push({ride:"river-rangers",id:"hawaiian-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:20,offset:null}),this.clothing.push({ride:"river-rangers",id:"spongebob-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:60,offset:null}),this.clothing.push({ride:"roller-coaster-doom",id:"skull-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:30,offset:null}),this.clothing.push({ride:"roller-coaster-doom",id:"thunderman-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"tree-top-gladiators",id:"luan-flower-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:40,offset:null}),this.clothing.push({ride:"tree-top-gladiators",id:"lynn-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"waterfall-wipeout",id:"dark-jacket",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"waterfall-wipeout",id:"flower-jacket",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"snowball-wars",id:"linc-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"snowball-wars",id:"loud-house-logo",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"volcano-skydive",id:"henri-waistcoat",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"volcano-skydive",id:"lena-outfit",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"hover-drift",id:"gold-jacket",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"hover-drift",id:"utility-jacket",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"egg-scape",id:"babe-emoji-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"egg-scape",id:"triple-g-jacket",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"striker",id:"jasper-hoodie",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"striker",id:"toddler-shirt",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:55,offset:null}),this.clothing.push({ride:"abducktion",id:"ciara-top",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"abducktion",id:"arc-top",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"crazy-golf",id:"frankie-jacket",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"crazy-golf",id:"simone-jacket",category:"t-shirt",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"none",id:"accessory-blank",category:"accessory",isOwned:!0,isEquipped:!1,topLayer:!0,price:0,offset:null}),this.clothing.push({ride:"none",id:"infinity-island-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:100,offset:null}),this.clothing.push({ride:"aqua-jetpack",id:"dr-colloso-monocle",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:15,offset:null}),this.clothing.push({ride:"aqua-jetpack",id:"thundermans-mask",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:20,offset:null}),this.clothing.push({ride:"pin-ball",id:"merman-mask",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:15,offset:null}),this.clothing.push({ride:"pin-ball",id:"pinball-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:10,offset:null}),this.clothing.push({ride:"beach-buggy",id:"scubaroo-goggles",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:15,offset:null}),this.clothing.push({ride:"beach-buggy",id:"triple-g-pixel-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:20,offset:null}),this.clothing.push({ride:"coco-nutty",id:"3d-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:30,offset:null}),this.clothing.push({ride:"coco-nutty",id:"cocnut-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:10,offset:null}),this.clothing.push({ride:"dodgems",id:"captain-man-mask",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:20,offset:null}),this.clothing.push({ride:"dodgems",id:"kid-danger-mask",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:25,offset:null}),this.clothing.push({ride:"roller-coaster-ice",id:"icicle-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:15,offset:null}),this.clothing.push({ride:"roller-coaster-ice",id:"ski-goggles",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:10,offset:null}),this.clothing.push({ride:"jet-ski",id:"lawrence-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:10,offset:null}),this.clothing.push({ride:"jet-ski",id:"star-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:15,offset:null}),this.clothing.push({ride:"laser",id:"donatello-mask",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:20,offset:null}),this.clothing.push({ride:"laser-cave",id:"leonardo-mask",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:30,offset:null}),this.clothing.push({ride:"laser-cave",id:"michelangelo-mask",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:20,offset:null}),this.clothing.push({ride:"laser-cave",id:"raphael-mask",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:30,offset:null}),this.clothing.push({ride:"mayan-madness",id:"mayan-madness-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:10,offset:null}),this.clothing.push({ride:"mayan-madness",id:"time-jerker-beard",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!1,price:20,offset:null}),this.clothing.push({ride:"river-rangers",id:"bamboo-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:10,offset:null}),this.clothing.push({ride:"river-rangers",id:"pineapple-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:15,offset:null}),this.clothing.push({ride:"roller-coaster-doom",id:"smoke-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:10,offset:null}),this.clothing.push({ride:"roller-coaster-doom",id:"vortex-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:25,offset:null}),this.clothing.push({ride:"tree-top-gladiators",id:"luans-prank-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:30,offset:null}),this.clothing.push({ride:"tree-top-gladiators",id:"red-shutter-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:20,offset:null}),this.clothing.push({ride:"waterfall-wipeout",id:"waterfall-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:20,offset:null}),this.clothing.push({ride:"waterfall-wipeout",id:"wood-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:30,offset:null}),this.clothing.push({ride:"snowball-wars",id:"lisa-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:20,offset:null}),this.clothing.push({ride:"snowball-wars",id:"leni-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:30,offset:null}),this.clothing.push({ride:"volcano-skydive",id:"skydive-logo-goggles",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:20,offset:null}),this.clothing.push({ride:"volcano-skydive",id:"skydiving-goggles",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:30,offset:null}),this.clothing.push({ride:"hover-drift",id:"green-sun-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:20,offset:null}),this.clothing.push({ride:"hover-drift",id:"colourful-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:30,offset:null}),this.clothing.push({ride:"egg-scape",id:"egg-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:20,offset:null}),this.clothing.push({ride:"egg-scape",id:"money-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:30,offset:null}),this.clothing.push({ride:"striker",id:"light-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:30,offset:null}),this.clothing.push({ride:"striker",id:"edgy-kid-danger-mask",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:25,offset:null}),this.clothing.push({ride:"abducktion",id:"duckbill",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:20,offset:null}),this.clothing.push({ride:"abducktion",id:"eyepatch",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:30,offset:null}),this.clothing.push({ride:"crazy-golf",id:"golf-club-ears",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:20,offset:null}),this.clothing.push({ride:"crazy-golf",id:"robot-glasses",category:"accessory",isOwned:!1,isEquipped:!1,topLayer:!0,price:30,offset:null}),this.clothing.push({ride:"none",id:"hat-blank",category:"hat",isOwned:!0,isEquipped:!1,topLayer:!1,price:0,offset:null}),this.clothing.push({ride:"none",id:"infinity-island-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:100,offset:null}),this.clothing.push({ride:"aqua-jetpack",id:"logo-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:40,offset:null}),this.clothing.push({ride:"aqua-jetpack",id:"pink-cowboy-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:30,offset:null}),this.clothing.push({ride:"pin-ball",id:"crabby-patty",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:50,offset:null}),this.clothing.push({ride:"pin-ball",id:"krusty-crab-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:50,offset:null}),this.clothing.push({ride:"beach-buggy",id:"buggy-bash-helmet",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:30,offset:null}),this.clothing.push({ride:"beach-buggy",id:"triple-g-cap",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:50,offset:null}),this.clothing.push({ride:"coco-nutty",id:"coconut-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:20,offset:null}),this.clothing.push({ride:"coco-nutty",id:"flower-band",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:15,offset:null}),this.clothing.push({ride:"dodgems",id:"crash-helmet",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:20,offset:null}),this.clothing.push({ride:"dodgems",id:"henry-danger-logo-cap",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:15,offset:null}),this.clothing.push({ride:"roller-coaster-ice",id:"sky-whale",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:30,offset:null}),this.clothing.push({ride:"roller-coaster-ice",id:"slushy-drink",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:40,offset:null}),this.clothing.push({ride:"jet-ski",id:"ice-cream",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:40,offset:null}),this.clothing.push({ride:"jet-ski",id:"snorkle",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:15,offset:null}),this.clothing.push({ride:"laser-cave",id:"pizza-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:20,offset:null}),this.clothing.push({ride:"laser-cave",id:"laser-cave-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:30,offset:null}),this.clothing.push({ride:"mayan-madness",id:"explorer-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!0,price:40,offset:null}),this.clothing.push({ride:"mayan-madness",id:"mayan-madness-logo-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:25,offset:null}),this.clothing.push({ride:"river-rangers",id:"drone-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"river-rangers",id:"spongebob-pineapple",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:40,offset:null}),this.clothing.push({ride:"roller-coaster-doom",id:"nora-bow",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:15,offset:null}),this.clothing.push({ride:"roller-coaster-doom",id:"volcano-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:30,offset:null}),this.clothing.push({ride:"tree-top-gladiators",id:"gladiator-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:50,offset:null}),this.clothing.push({ride:"tree-top-gladiators",id:"lana-cap",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:40,offset:null}),this.clothing.push({ride:"waterfall-wipeout",id:"log-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"waterfall-wipeout",id:"waterfall-logo-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:40,offset:null}),this.clothing.push({ride:"snowball-wars",id:"mortar-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"snowball-wars",id:"snowball-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:30,offset:null}),this.clothing.push({ride:"volcano-skydive",id:"hot-air-balloon",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"volcano-skydive",id:"balloon-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:30,offset:null}),this.clothing.push({ride:"hover-drift",id:"space-cap",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"hover-drift",id:"top-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:30,offset:null}),this.clothing.push({ride:"egg-scape",id:"gear-head",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"egg-scape",id:"cave-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:30,offset:null}),this.clothing.push({ride:"striker",id:"seed-drone",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:60,offset:null}),this.clothing.push({ride:"striker",id:"striker-bell",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:60,offset:null}),this.clothing.push({ride:"abducktion",id:"ship-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"abducktion",id:"fishing-for-ducks",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:30,offset:null}),this.clothing.push({ride:"crazy-golf",id:"golf-ball-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:45,offset:null}),this.clothing.push({ride:"crazy-golf",id:"flag-hat",category:"hat",isOwned:!1,isEquipped:!1,topLayer:!1,price:30,offset:null}),this.wristbands.push({id:"tickets",title:"double tickets!",colour:16278520,isOwned:!1,uses:3,price:50}),this.wristbands.push({id:"points",title:"double points!",colour:16724273,isOwned:!1,uses:3,price:100}),this.wristbands.push({id:"secondchance",title:"second chance!",colour:16773909,isOwned:!1,uses:3,price:25})}return e.prototype.setCurrentRide=function(e){this.currentRide.id=e;for(var t=0;t<this.rideData.length;t++)this.rideData[t].id==e&&(this.currentRide.island=this.rideData[t].island,this.currentRide.startingTickets=this.tickets)},e.prototype.setSelectedCharacter=function(e){this.selectedCharacter=e},e.prototype.getSelectedCharacter=function(){return this.selectedCharacter},e.prototype.getCurrentRide=function(){return this.currentRide},e.prototype.getWristbands=function(){return this.wristbands},e.prototype.setWristbands=function(e){this.wristbands=e},e.prototype.getClothing=function(e){var t;if(t=new Array,e&&e.ride&&e.category)for(i=0;i<this.clothing.length;i++)this.clothing[i].ride==e.ride&&this.clothing[i].category==e.category&&t.push(this.clothing[i]);else if(e&&e.ride)for(i=0;i<this.clothing.length;i++)this.clothing[i].ride==e.ride&&t.push(this.clothing[i]);else for(var i=0;i<this.clothing.length;i++)t.push(this.clothing[i]);return t},e.prototype.setClothing=function(e){for(var t=0;t<this.clothing.length;t++)e[t]&&e[t].id==this.clothing[t].id&&(this.clothing[t].isOwned=e[t].isOwned,this.clothing[t].isOwned=e[t].isEquipped)},e.prototype.getRideData=function(e){for(var t=[],i=0;i<this.rideData.length;i++)e&&e==this.rideData[i].id&&t.push(this.rideData[i]);return e||(t=this.rideData),t},e.prototype.setRideScore=function(e){for(var t=0;t<this.rideData.length;t++)e.id&&this.rideData[t].id==e.id&&(this.rideData[t].lastScore=e.score)},e.prototype.setRideHighScore=function(e){for(var t=0;t<this.rideData.length;t++)e.id&&this.rideData[t].id==e.id&&(this.rideData[t].highScore=e.score)},e.prototype.setRideData=function(e){for(var t=0;t<e.length;t++)this.rideData[t].id=e[t].id,this.rideData[t].island=e[t].island,this.rideData[t].lastScore=e[t].lastScore,this.rideData[t].highScore=e[t].highScore,this.rideData[t].tutorialViewed=e[t].tutorialViewed},e.prototype.getAvatarAttributes=function(){return this.avatarAttributes},e.prototype.setAvatarAttributes=function(e){e.skinColour&&(this.avatarAttributes.skinColour=e.skinColour),e.hairColour&&(this.avatarAttributes.hairColour=e.hairColour),e.hairStyle&&(this.avatarAttributes.hairStyle=e.hairStyle),e.faceImage&&(this.avatarAttributes.faceImage=e.faceImage,this.buildUserFaceSprite())},e.prototype.buildUserFaceSprite=function(){var e=document.createElement("canvas");e.width=295,e.height=360;var t=e.getContext("2d"),i=new Image;i.onload=function(){t.drawImage(i,0,0)},i.src=Game.coreData.getAvatarAttributes().faceImage;var s=PIXI.Texture.fromCanvas(e);this.userImageEdited=new Sprite(s),this.userImageEdited.id="user-face-edited",this.userImageEdited.group="user-face-edited",this.userImageEdited.texture.update(),this.userImageEdited.neverFlush=!0,Game.displayStore.addSprite(this.userImageEdited)},e.prototype.clearUserFaceSprite=function(){this.avatarAttributes.faceImage&&(this.userImageEdited.neverFlush=!1,Game.displayStore.flush(["user-face-edited"]),this.avatarAttributes.faceImage=null)},e.prototype.getGameTutorialViewed=function(e){for(var t=!0,i=0;i<this.rideData.length;i++)if(this.rideData[i].id==e){t=this.rideData[i].tutorialViewed;break}return t},e.prototype.setGameTutorialViewed=function(e){for(var t=0;t<this.rideData.length;t++)if(this.rideData[t].id==e){this.rideData[t].tutorialViewed=!0;break}Game.saveProgress()},e.prototype.getAvatarClothing=function(e){var t;t=new Array;for(var i=0;i<this.clothing.length;i++)1==this.clothing[i].isOwned&&this.clothing[i].category==e&&t.push(this.clothing[i]);return t},e.prototype.getEquippedAvatarClothing=function(e){var t;t=new Array;for(var i=0;i<this.clothing.length;i++)1==this.clothing[i].isOwned&&this.clothing[i].category==e&&1==this.clothing[i].isEquipped&&t.push({id:this.clothing[i].id,topLayer:this.clothing[i].topLayer,offset:this.clothing[i].offset});return t},e.prototype.setAvatarClothing=function(e){for(var t=0;t<this.clothing.length;t++){this.clothing[t].isEquipped=!1;for(var i=0;i<e.length;i++)this.clothing[t].id==e[i]&&(this.clothing[t].isEquipped=!0)}},e.prototype.setClothingOffset=function(e,t){for(var i=0;i<this.clothing.length;i++)this.clothing[i].id==e&&(this.clothing[i].offset=new PIXI.Point,this.clothing[i].offset.x=t.x,this.clothing[i].offset.y=t.y)},e.prototype.buyClothingItem=function(e,t){for(var i=t||!1,s=0;s<this.clothing.length;s++)this.clothing[s].id==e&&(this.clothing[s].isOwned=!0,0==i&&this.removeTickets(this.clothing[s].price))},e.prototype.buyWristband=function(e,t){for(var i=t||!1,s=0;s<this.wristbands.length;s++)this.wristbands[s].id==e&&(this.wristbands[s].isOwned=!0,this.wristbands[s].uses=3,0==i&&this.removeTickets(this.wristbands[s].price));this.game.ui.UIhud.equipWristband()},e.prototype.useWristband=function(e){for(var t=0;t<this.wristbands.length;t++)this.wristbands[t].id==e&&(this.wristbands[t].uses>0&&this.wristbands[t].uses--,0==this.wristbands[t].uses&&(this.wristbands[t].isOwned=!1))},e.prototype.getCurrentWristband=function(){for(var e={id:"none",uses:0},t=0;t<this.wristbands.length;t++)1==this.wristbands[t].isOwned&&(e.id=this.wristbands[t].id,e.uses=this.wristbands[t].uses);return e},e.prototype.addTickets=function(e){this.tickets+=e,this.game.ui.UIhud.addTickets()},e.prototype.removeTickets=function(e){if(!(this.tickets>=e))throw"error - not enough tickets!";this.tickets-=e,this.game.ui.UIhud.removeTickets()},e.prototype.getCurrentTickets=function(){return this.tickets},e.prototype.setCurrentRideScoreFromGame=function(e){for(var t=0;t<this.rideData.length;t++)if(this.rideData[t].id==this.currentRide.id){this.rideData[t].lastScore=e;break}},e.prototype.updateHighScoreFromGameOver=function(e){for(var t=0;t<this.rideData.length;t++)if(this.rideData[t].id==this.currentRide.id){this.rideData[t].highScore=e;break}},e.prototype.getCurrentRideScore=function(e){for(var t,i=0;i<this.rideData.length;i++)this.rideData[i].id==this.currentRide.id&&(t=e?this.rideData[i].highScore:this.rideData[i].lastScore);return t},e.prototype.getPhotoGalleryScore=function(){for(var e,t,i=0;i<this.rideData.length;i++)if(this.rideData[i].id==this.currentRide.id&&(e=this.rideData[i].lastScore,t=String(e),1==this.rideData[i].scoreIsDistance)){t+="m";break}return t},e.prototype.setUserPhotograph=function(e){this.userPhotoGraph=e},e.prototype.getUserPhotograph=function(){return this.userPhotoGraph},e.prototype.setUserPhotographCanvas=function(e){this.userPhotoGraphCanvas=e},e.prototype.getUserPhotographCanvas=function(){return this.userPhotoGraphCanvas},e.prototype.setUserPhotographUID=function(e){this.userPhotoGraphUID=e},e.prototype.getUserPhotographUID=function(){return this.userPhotoGraphUID},e.prototype.clearUserPhotograph=function(){Game.displayStore.flush(["user-photo-edited"])},e.prototype.setFirstTime=function(e){this.firstTime=e},e.prototype.getTickets=function(){return this.tickets},e.prototype.setTickets=function(e){this.tickets=e},e.prototype.getUserName=function(){return this.userName},e.prototype.getAgeConsent=function(){return this.userAgeConsent},e.prototype.getParentalConsent=function(){return this.userParentalConsent},e.prototype.setUserName=function(e){this.userName=e},e.prototype.setAgeConsent=function(e){this.userAgeConsent=e},e.prototype.setParentalConsent=function(e){this.userParentalConsent=e},e}(),TicketPool=function(){function e(t){this.tickets=new Array,this.noParticles=!1;for(var i=0;i<e.maxTickets+2;i++){var s;s=i<e.maxTickets?new Ticket(t,i):new Ticket(t,i,!0),this.tickets.push(s)}}return e.prototype.getTicket=function(){for(var e,t=0;t<this.tickets.length;t++)if(0==this.tickets[t].active){(e=this.tickets[t]).spawn(this.noParticles);break}return e||(e=this.tickets[0]).resetState(),e},e.prototype.getHeart=function(){for(var e,t=0;t<this.tickets.length;t++)if(0==this.tickets[t].active&&1==this.tickets[t].isHeart){(e=this.tickets[t]).spawn(this.noParticles);break}return e||(e=this.getTicket()),e},e.prototype.disdableParticles=function(){this.noParticles=!0},e.prototype.enableParticles=function(){this.noParticles=!1},e.prototype.returnTicket=function(e){e&&e.resetState()},e.prototype.resetAllTickets=function(){for(var e=0;e<this.tickets.length;e++)this.tickets[e].resetState()},e.prototype.tick=function(){for(var e=0;e<this.tickets.length;e++){var t=this.tickets[e];1==t.active&&t.tick()}},e.maxTickets=10,e}(),Ticket=function(){function e(e,t,i){this.isHeart=i||!1,this.paused=!1,this.container=Game.displayStore.getContainer("global/ticket-holder"),0==this.isHeart?this.ticket=Game.displayStore.getSprite("global/ticket"):this.ticket=Game.displayStore.getSprite("global/heart"),this.ticketGlow=Game.displayStore.getSprite("global/ticket-glow"),this.ticketGlow.blendMode=PIXI.BLEND_MODES.ADD,0==this.isHeart?this.ticket.rotation=-.75:this.ticket.rotation=0,this.glow=Game.displayStore.getSprite("global/glow"),this.glow.blendMode=PIXI.BLEND_MODES.ADD,this.glow.scale.x=1.2,this.glow.scale.y=1.2,this.active=!1,this.index=t,this.game=e,this.collected=!1,this.noParticles=!1,this.ticketParticleParams={lowerAngle:0,upperAngle:360,lowerVelocity:800,upperVelocity:2e3,endScale:0,lowerStartScale:1,upperStartScale:3.5,friction:.08,XstartRange:20,YstartRange:20,time:1,gravity:0,cap:60,endAlpha:0,rotationPower:3},this.heartParticleParams={lowerAngle:0,upperAngle:360,lowerVelocity:400,upperVelocity:1e3,endScale:0,lowerStartScale:2,upperStartScale:4,friction:.08,XstartRange:20,YstartRange:20,stagger:500,time:1,gravity:0,cap:60,endAlpha:0,rotationPower:1,blendMode:PIXI.BLEND_MODES.ADD},3==this.game.gameLaunchMode&&1!=this.isHeart||(this.container.addChild(this.glow),this.container.addChild(this.ticket),this.container.addChild(this.ticketGlow))}return e.prototype.collect=function(e){var t=!1;if(this.ticket.alpha=0,this.collected=!0,0==this.isHeart&&3!=this.game.gameLaunchMode&&Game.coreData.addTickets(1),e&&(t=e),0==t&&this.game.powerUpManager.ticketCollected(),!Game.isLowEndIPad&&1!=this.noParticles){this.collectCount=30,0==this.isHeart?3!=this.game.gameLaunchMode&&Game.playSound("ticket.mp3"):Game.playSound("health.mp3",.9),0==this.noParticles&&this.ticketParticles&&(3!=this.game.gameLaunchMode&&0==this.isHeart&&this.ticketParticles.replay(),1==this.isHeart&&this.heartParticles.replay())}},e.prototype.resetState=function(){3==this.game.gameLaunchMode&&0==this.isHeart||(this.container.alpha=1,this.container.position.x=0,this.container.position.y=0,this.container.scale.x=1,this.container.scale.y=1,this.collected=!1,this.collectCount=30,this.active=!1,this.ticket.alpha=1,this.ticket.position.x=0,this.ticket.position.y=0,this.ticket.scale.x=1,0==this.isHeart?this.ticket.rotation=-.75:this.ticket.rotation=0,this.ticket.scale.y=1,this.ticketGlow.alpha=1,this.ticketGlow.position.x=0,this.ticketGlow.position.y=0,this.ticketGlow.scale.x=1,this.ticketGlow.scale.y=1,this.glow.alpha=1,this.glow.position.x=0,this.glow.position.y=0,this.glow.scale.x=1.2,this.glow.scale.y=1.2,this.container.parent&&this.container.parent.removeChild(this.container))},e.prototype.spawn=function(e){this.active=!0,this.ticket.alpha=1,this.noParticles=e,this.container.scale.x=this.container.scale.y=0,TweenMax.to(this.container.scale,.4,{ease:Back.easeOut,x:1,y:1}),0==e&&null==this.ticketParticles&&(this.ticketParticles=new ParticleBurst(["global/confetti-1","global/confetti-2","global/confetti-3","global/confetti-4"],this.container,this.game.currentScene,this.ticketParticleParams),this.ticketParticles.fire(!0),this.heartParticles=new ParticleBurst(["global/heart-confetti-1","global/heart-confetti-2"],this.container,this.game.currentScene,this.heartParticleParams),this.heartParticles.fire(!0))},e.prototype.tick=function(){if(1!=this.paused)if(this.ticketGlow.rotation+=.05,1==this.collected)if(this.collectCount>-50){var e=1-(this.collectCount+50)/80;this.ticket.scale.x>0&&(this.ticket.scale.x=this.ticket.scale.y=this.collectCount/30),this.ticket.alpha>0&&(this.ticket.alpha=this.collectCount/30),this.ticketGlow.alpha>0&&(this.ticketGlow.alpha=this.collectCount/30),this.glow.alpha>0&&(this.glow.alpha=1-2*e),this.glow.scale.x=1.2+3*e,this.glow.scale.y=1.2+3*e,this.collectCount-=2}else this.resetState();else this.ticket.scale.x=.9+.1*Math.sin(3*this.ticketGlow.rotation),this.ticket.scale.y=.9+.1*Math.sin(3*this.ticketGlow.rotation)},e.prototype.pause=function(){this.heartParticles&&this.heartParticles.pause(),this.ticketParticles&&this.ticketParticles.pause(),Game.pauseSound("ticket.mp3"),Game.pauseSound("health.mp3"),this.paused=!0},e.prototype.resume=function(){this.heartParticles&&this.heartParticles.resume(),this.ticketParticles&&this.ticketParticles.resume(),Game.resumeSound("ticket.mp3"),Game.resumeSound("health.mp3"),this.paused=!1},e.prototype.destroy=function(){this.ticketParticles&&(this.ticketParticles.destroy(),this.ticketParticles=null),this.heartParticles&&(this.heartParticles.destroy(),this.heartParticles=null),Game.stopSound("ticket.mp3"),Game.stopSound("health.mp3")},e}(),XMLManager=function(){function e(e){this.game=e}return e.prototype.parseXML=function(e,t){"config"==t?this.parseConfigXML(e):"localization"==t&&this.parseLocalizationXML(e)},e.prototype.parseConfigXML=function(e){for(var t=e,i=t.getElementsByTagName("localization"),s=0;s<i[0].childNodes.length;s++)if("languagecode"==(h=i[0].childNodes[s]).nodeName){this.game.setLanguageCode(h.textContent);break}for(var o,a,r=t.getElementsByTagName("services"),n=null,s=0;s<r[0].childNodes.length;s++){var h=r[0].childNodes[s];if("service"==h.nodeName){for(var l=0;l<h.attributes.length;l++)"type"==h.attributes[l].nodeName&&(o=h.attributes[l].textContent),"enabled"==h.attributes[l].nodeName&&(a=h.attributes[l].textContent),"showGameTitle"==h.attributes[l].nodeName&&(n=h.attributes[l].textContent);if(!o||!a)return;this.setServiceParams(o,a,n)}}},e.prototype.setServiceParams=function(e,t,i){var s;switch("true"==t?s=!0:"false"==t&&(s=!1),e){case"eventReporting":this.game.trackingEventsManager.setTrackingParams(s,i);break;case"localStorage":this.game.setLocalStorageEnabled(s)}},e.prototype.parseLocalizationXML=function(e){for(var t,i=this.game.getCurrentLanguageCode(),s=e.getElementsByTagName("language"),o=0;o<s.length;o++)for(c=0;c<s[o].attributes.length;c++)if("id"==s[o].attributes[c].nodeName&&s[o].attributes[c].textContent==i){t=o;break}for(o=0;o<s[t].attributes.length;o++)"alphabet"==s[t].attributes[o].nodeName&&this.game.setAlphabet(s[t].attributes[o].textContent);for(var a,r,n,h,l,o=0;o<s[t].childNodes.length;o++){var p=s[t].childNodes[o];if(p.attributes){for(var c=0;c<p.attributes.length;c++)"id"==p.attributes[c].nodeName&&(a=p.attributes[c].textContent),"fontScale"==p.attributes[c].nodeName&&(r=Number(p.attributes[c].textContent)),"offsetX"==p.attributes[c].nodeName&&(n=Number(p.attributes[c].textContent)),"offsetY"==p.attributes[c].nodeName&&(h=Number(p.attributes[c].textContent));l=p.textContent,Game.stringsManager.addString({id:a,fontScale:r,offsetX:n,offsetY:h,text:l})}}},e}(),BackEndAPI=function(){function e(e){this.game=e,this.minAjax=new MinAjax}return e.prototype.getValue=function(e){var t=null;switch(e){case"SendKey":t="acb0d9c5-f38d-4f8b-8b99-bea573c2680d";break;case"ReturnKey":t="d5740caf-1a42-47d4-b807-dfb572a0736a";break;case"EndPoint":t="http://ec2-34-251-116-238.eu-west-1.compute.amazonaws.com/api.php";break;case"DebugOptions":t=!1}return t},e.prototype.downloadUserPhoto=function(){this.apiGetAndDownloadImage(Game.coreData.getUserPhotographUID(),"Nickelodeon-Infinity-Islands.png")},e.prototype.saveUserPhoto=function(){var e=this;this.apiSaveImage(Game.coreData.getUserPhotographCanvas().toDataURL("image/jpeg",.9),function(t){Game.coreData.setUserPhotographUID(t),e.game.successfulPhotoSave()})},e.prototype.submitUserPhotoToGallery=function(){var e=this;this.apiSubmitToGallery(Game.coreData.getUserPhotographUID(),Game.coreData.getUserName(),Game.coreData.getAgeConsent(),Game.coreData.getParentalConsent(),function(t){e.game.successfulPhotoGallerySubmission(t)})},e.prototype.apiSaveImage=function(e,t){var i=this.getGameNameString(Game.coreData.getCurrentRide().id);console.log("current game is..... ",i);var s=this.constructJSONPacket("Save",{Image:e,Game:i});this.sendJSONPacket(s,t)},e.prototype.getGameNameString=function(e){var t;switch(e){case"beach-buggy":t="beach buggy bash";break;case"jet-ski":t="jet ski scramble";break;case"tree-top-gladiators":t="tree-top gladiators";break;case"river-rangers":t="river rangers";break;case"laser-cave":t="laser cave";break;case"dodgems":t="destruction dogems";break;case"coco-nutty":t="coco nutty";break;case"mayan-madness":t="mayan madness";break;case"roller-coaster-doom":t="roller coaster of doom";break;case"roller-coaster-ice":t="ice blast";break;case"pin-ball":t="arctic pinball";break;case"aqua-jetpack":t="aqua jetpack";break;case"snowball-wars":t="snowball wars";break;case"waterfall-wipeout":t="waterfall wipeout";break;case"volcano-skydive":t="volcano skydive";break;case"hover-drift":t="hover drift";break;case"egg-scape":t="alien eggscape";break;case"abducktion":t="abducktion";break;case"striker":t="seed striker";break;case"crazy-golf":t="gravity golf"}return t},e.prototype.apiGetImage=function(e,t){var i=this.constructJSONPacket("Get",e);this.sendJSONPacket(i,t)},e.prototype.apiGetAndDownloadImage=function(e,t){this.apiGetImage(e,function(e){var i=document.createElement("a");i.setAttribute("download",t),i.href=e,document.body.appendChild(i),i.click(),document.body.removeChild(i)})},e.prototype.apiSubmitToGallery=function(e,t,i,s,o){if(null!=e){var a=this.constructJSONPacket("Submit",{ID:e,Name:t,AgeConsent:i,ParentalConsent:s});this.sendJSONPacket(a,o)}},e.prototype.apiGetGalleryStatus=function(e,t,i){var s=this.constructJSONPacket("GetAllImagesWithStatus",{Status:e,Limit:t});this.sendJSONPacket(s,i)},e.prototype.apiSetGalleryImageStatus=function(e,t,i){var s=this.constructJSONPacket("SetImageStatus",{ID:e,Status:t});this.sendJSONPacket(s,i)},e.prototype.constructJSONPacket=function(e,t){return{Key:this.getValue("SendKey"),Command:e,Data:t,SessionID:this.getCookie("sessionid"),TimeStamp:Date.now()}},e.prototype.sendJSONPacket=function(e,t){var i=this;this.minAjax.minAjax({url:this.getValue("EndPoint"),data:{Request:JSON.stringify(e)},type:"POST",dataType:"JSON",requestType:"Content-type",requestValue:"application/x-www-form-urlencoded",success:function(e){var s=i.validateJSONResponse(i,e);i.getValue("DebugOptions")&&console.log("Passing '"+s+"' to callback function"),t(s)},error:function(e,t,s){i.getValue("DebugOptions")&&(console.log(e.responseText),console.log(s))}})},e.prototype.validateJSONResponse=function(e,t){this.getValue("DebugOptions")&&console.log(t);try{var i=JSON.parse(t),s=i.Key;if(this.getValue("ReturnKey")!=s)return this.getValue("DebugOptions")&&console.log("API Response Key is not valid"),null;var o=i.ErrorMessages;return null!=o&&o.length>0?(this.getValue("DebugOptions")&&console.log(o),null):(i.ResponseObject>Date.now()&&this.getValue("DebugOptions")&&console.log("Response if from the future, potential validation rule?"),i.ResponseObject)}catch(e){return this.getValue("DebugOptions")&&console.log(e.message),null}},e.prototype.setCookie=function(e,t,i){var s=new Date;s.setTime(s.getTime()+24*i*60*60*1e3);var o="expires="+s.toUTCString();document.cookie=e+"="+t+";"+o+";path=/"},e.prototype.getCookie=function(e){for(var t=e+"=",i=decodeURIComponent(document.cookie).split(";"),s=0;s<i.length;s++){for(var o=i[s];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""},e}(),StringsManager=function(){function e(e){this.game=e,this.strings=new Array}return e.prototype.addString=function(e){if(1==this.checkDuplicate(e.id))throw ReferenceError("Oops! We've detected another string with the same ID: "+e.id);this.strings.push({id:e.id,fontScale:e.fontScale,offsetX:e.offsetX,offsetY:e.offsetY,text:this.replaceLineBreaks(e.text)})},e.prototype.checkDuplicate=function(e){for(var t=!1,i=0;i<this.strings.length;i++)if(this.strings[i].id==e){t=!0;break}return t},e.prototype.setTextString=function(e,t){for(var i=0;i<this.strings.length;i++)if(t==this.strings[i].id){e.text=this.strings[i].text,e.scale.x=this.strings[i].fontScale,e.scale.y=this.strings[i].fontScale;break}},e.prototype.getTextOffset=function(e){for(var t=0,i=0,s=0;s<this.strings.length;s++)if(e==this.strings[s].id){t=this.strings[s].offsetX,i=this.strings[s].offsetY;break}return{xOffset:t,yOffset:i}},e.prototype.getStringTextContent=function(e){for(var t=0;t<this.strings.length;t++)if(e==this.strings[t].id)return this.strings[t].text},e.prototype.replaceLineBreaks=function(e){return e.replace(new RegExp("<br>","g"),"\n")},e}(),PowerUpManager=function(){function e(e){this.game=e,this.powerupTicketsThreshold=10,this.powerUpInUse=!1,this.powerUpButtonEnabled=!1,this.startWaiting=!1,this.betweenRoundPause=!1,this.gameOverCooldown=!1,this.powerUpDurations=new Array,this.powerUpDurations.push({gameID:"beach-buggy",powerUpDuration:12}),this.powerUpDurations.push({gameID:"dodgems",powerUpDuration:12}),this.powerUpDurations.push({gameID:"river-rangers",powerUpDuration:15}),this.powerUpDurations.push({gameID:"roller-coaster-doom",powerUpDuration:4}),this.powerUpDurations.push({gameID:"jet-ski",powerUpDuration:12}),this.powerUpDurations.push({gameID:"roller-coaster-ice",powerUpDuration:4}),this.powerUpDurations.push({gameID:"laser-cave",powerUpDuration:12}),this.powerUpDurations.push({gameID:"coco-nutty",powerUpDuration:12}),this.powerUpDurations.push({gameID:"mayan-madness",powerUpDuration:7}),this.powerUpDurations.push({gameID:"tree-top-gladiators",powerUpDuration:8}),this.powerUpDurations.push({gameID:"pin-ball",powerUpDuration:10}),this.powerUpDurations.push({gameID:"aqua-jetpack",powerUpDuration:10}),this.powerUpDurations.push({gameID:"waterfall-wipeout",powerUpDuration:12}),this.powerUpDurations.push({gameID:"snowball-wars",powerUpDuration:15}),this.powerUpDurations.push({gameID:"volcano-skydive",powerUpDuration:30}),this.powerUpDurations.push({gameID:"hover-drift",powerUpDuration:15}),this.powerUpDurations.push({gameID:"egg-scape",powerUpDuration:15}),this.powerUpDurations.push({gameID:"abducktion",powerUpDuration:17}),this.powerUpDurations.push({gameID:"striker",powerUpDuration:16}),this.powerUpDurations.push({gameID:"crazy-golf",powerUpDuration:20})}return e.prototype.startGame=function(e){if(3!=this.game.gameLaunchMode){this.currentGameID=this.game.currentScene.id,this.startWaiting=!0,this.gameOverCooldown=!1,this.game.ui.hidePowerUpButton();var t=1;e&&(t=e),this.startDelay=TweenMax.delayedCall(t,function(){this.startWaiting=!1,this.resetPowerUpButton()},null,this)}},e.prototype.resumeGame=function(e){3!=this.game.gameLaunchMode&&this.resetPowerUpButton(e)},e.prototype.ticketCollected=function(){3!=this.game.gameLaunchMode&&this.updatePowerUpButtonState()},e.prototype.manuallySetPowerUpButton=function(e){this.resumeGame(e)},e.prototype.setGameOverCooldown=function(e){3!=this.game.gameLaunchMode&&(this.gameOverCooldown=e,1==e&&this.game.ui.hidePowerUpButton())},e.prototype.betweenRoundPowerUpPause=function(){1==this.powerUpInUse&&(this.betweenRoundPause=!0,this.powerUpDurationTween.pause())},e.prototype.betweenRoundPowerUpResume=function(){1==this.powerUpInUse&&(this.betweenRoundPause=!1,this.powerUpDurationTween.resume())},e.prototype.updatePowerUpButtonState=function(){if(3!=this.game.gameLaunchMode)if(Game.coreData.getCurrentTickets()>=this.powerupTicketsThreshold){if(1==this.powerUpButtonEnabled)return;this.enablePowerUpButton()}else this.disablePowerUpButton()},e.prototype.enablePowerUpButton=function(){3!=this.game.gameLaunchMode&&1!=this.powerUpInUse&&(this.powerUpButtonEnabled=!0,this.game.ui.enablePowerupButton(this.powerUpButtonEnabled,!1))},e.prototype.disablePowerUpButton=function(){3!=this.game.gameLaunchMode&&(this.powerUpButtonEnabled=!1,this.game.ui.disablePowerUpButton())},e.prototype.activatePowerUp=function(){if(1!=this.powerUpInUse&&0!=this.powerUpButtonEnabled){Game.coreData.removeTickets(this.powerupTicketsThreshold),this.updatePowerUpButtonState(),Game.playSound("power-up.mp3"),this.game.currentScene.activatePowerUpEffect(),this.game.ui.hidePowerUpButton(),this.game.ui.showActivatePowerup();var e=Game.coreData.getCurrentRide().id;this.powerUpDurationTween=this.killTween(this.powerUpDurationTween),this.powerUpInUse=!0;for(var t=0;t<this.powerUpDurations.length;t++)if(e==this.powerUpDurations[t].gameID){this.powerUpDurationTween=TweenMax.delayedCall(this.powerUpDurations[t].powerUpDuration,this.endPowerUpDuration,null,this);break}}},e.prototype.endPowerUpDuration=function(){this.game.currentScene.deactivatePowerUpEffect(),this.powerUpInUse=!1,this.resetPowerUpButton()},e.prototype.resetPowerUpButton=function(e){if(1!=this.powerUpInUse&&1!=this.gameOverCooldown&&1!=this.startWaiting){var t=!1;e&&(t=e),this.updatePowerUpButtonState(),this.game.ui.enablePowerupButton(this.powerUpButtonEnabled,t)}},e.prototype.killPowerUpUI=function(){this.powerUpButtonEnabled=!1},e.prototype.tick=function(){},e.prototype.pause=function(){1!=this.betweenRoundPause&&(1==this.powerUpInUse&&this.powerUpDurationTween.pause(),1==this.startWaiting&&this.startDelay&&this.startDelay.pause())},e.prototype.resume=function(){1!=this.betweenRoundPause&&1!=this.gameOverCooldown&&(1==this.powerUpInUse&&this.powerUpDurationTween.resume(),1==this.startWaiting?this.startDelay&&this.startDelay.resume():this.updatePowerUpButtonState())},e.prototype.sceneDestroy=function(e){e==this.currentGameID&&(1==this.powerUpInUse&&(this.powerUpDurationTween=this.killTween(this.powerUpDurationTween),this.powerUpInUse=!1),1==this.startWaiting&&(this.startDelay=this.killTween(this.startDelay)))},e.prototype.destroy=function(){},e.prototype.killTween=function(e){return e&&(e.kill(),e=null),e},e}(),AssetChunkManager=function(){function e(e){this.devMode=!1,this.devModeGameID="abducktion",this.game=e,this.firstLoad=!0}return e.prototype.storeInitialAssets=function(e){this.storedInitialAssets=e},e.prototype.generateLoadChunkParams=function(e){if(1==this.firstLoad?this.loadAssets=this.storedInitialAssets:0==this.firstLoad&&(this.loadAssets=new Array),"hub"==e&&(3==this.currentGameLaunchMode?this.targetInitialScene="hubScene":1==this.firstLoad?(this.loadAssets.push("title-assets"),this.targetInitialScene="titleScene"):this.targetInitialScene="hubScene"),"hub"==e&&3==this.currentGameLaunchMode&&(this.targetInitialScene="hubScene"),"hub"!=e&&"game"!=e&&"shop"!=e)throw new ReferenceError("Ooops! Can only generate asset list to load if param is 'hub', 'game', 'shop'.");switch("shop"==e&&(this.loadAssets.push("gift-shop-assets"),this.loadAssets.push("gift-shop-audio"),this.loadAssets.push("claw-assets"),this.loadAssets.push("claw-audio-assets"),this.targetInitialScene="giftShopScene"),1==this.devMode&&1==this.firstLoad&&(e="game"),"game"==e&&(this.game.trackingEventsManager.onLevelStart(this.currentGameId),3!=this.currentGameLaunchMode&&this.loadAssets.push("wristband-dialogue-assets"),2==this.currentGameLaunchMode&&this.game.setLaunchMode(1)),this.game.setLoadingScreen("loadingScene"),this.currentGameId){case"beach-buggy":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&"game"==e&&this.loadAssets.push("beach-buggy-tutorial-assets"),"game"==e&&(this.loadAssets.push("beach-buggy-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-beach"),this.loadAssets.push("pause-assets-beach"),this.loadAssets.push("beach-buggy-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="beachBuggyGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-beach"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-beach-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-beach"),this.loadAssets.push("gift-shop-characters-photo-booth-game-shakers"),this.loadAssets.push("gift-shop-characters-game-shakers"),this.loadAssets.push("gift-shop-audio-game-shakers"),this.loadAssets.push("claw-assets-beach"));break;case"jet-ski":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&"game"==e&&this.loadAssets.push("jet-ski-tutorial-assets"),"game"==e&&(this.loadAssets.push("jet-ski-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-beach"),this.loadAssets.push("pause-assets-beach"),this.loadAssets.push("jet-ski-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="jetSkiGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-beach"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-beach-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-beach"),this.loadAssets.push("gift-shop-characters-photo-booth-school-of-rock"),this.loadAssets.push("gift-shop-characters-school-of-rock"),this.loadAssets.push("gift-shop-audio-school-of-rock"),this.loadAssets.push("claw-assets-beach"));break;case"tree-top-gladiators":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&"game"==e&&this.loadAssets.push("tree-top-gladiators-tutorial-assets"),"game"==e&&(this.loadAssets.push("tree-top-gladiators-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-jungle"),this.loadAssets.push("pause-assets-jungle"),this.loadAssets.push("tree-top-gladiators-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="treeTopGladiatorsGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-jungle"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-jungle-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-jungle"),this.loadAssets.push("gift-shop-characters-photo-booth-loud-house"),this.loadAssets.push("gift-shop-characters-loud-house"),this.loadAssets.push("gift-shop-audio-loud-house"),this.loadAssets.push("claw-assets-jungle"));break;case"river-rangers":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&"game"==e&&this.loadAssets.push("river-rangers-tutorial-assets"),"game"==e&&(this.loadAssets.push("river-rangers-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-jungle"),this.loadAssets.push("pause-assets-jungle"),this.loadAssets.push("river-rangers-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="riverRangersGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-jungle"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-jungle-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-jungle"),this.loadAssets.push("gift-shop-characters-photo-booth-spongebob"),this.loadAssets.push("gift-shop-characters-spongebob"),this.loadAssets.push("gift-shop-audio-spongebob"),this.loadAssets.push("claw-assets-jungle"));break;case"laser-cave":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&"game"==e&&this.loadAssets.push("laser-cave-tutorial-assets"),"game"==e&&(this.loadAssets.push("laser-cave-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-volcano"),this.loadAssets.push("pause-assets-volcano"),this.loadAssets.push("laser-cave-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="laserCaveGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-volcano"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-volcano"),this.loadAssets.push("gift-shop-characters-photo-booth-tmnt"),this.loadAssets.push("gift-shop-characters-tmnt"),this.loadAssets.push("gift-shop-audio-tmnt"),this.loadAssets.push("claw-assets-volcano"));break;case"dodgems":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&"game"==e&&this.loadAssets.push("dodgems-tutorial-assets"),"game"==e&&(this.loadAssets.push("dodgems-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-ice"),this.loadAssets.push("pause-assets-ice"),this.loadAssets.push("dodgems-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="dodgemsGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-ice"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-ice-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-ice"),this.loadAssets.push("gift-shop-characters-photo-booth-henry-danger"),this.loadAssets.push("gift-shop-characters-henry-danger"),this.loadAssets.push("gift-shop-audio-henry-danger"),this.loadAssets.push("claw-assets-ice"));break;case"coco-nutty":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&"game"==e&&(console.log("loading tute assets..."),this.loadAssets.push("coco-nutty-tutorial-assets")),"game"==e&&(this.loadAssets.push("coco-nutty-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-jungle"),this.loadAssets.push("pause-assets-jungle"),this.loadAssets.push("coco-nutty-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="cocoNuttyGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-jungle"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-jungle-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-jungle"),this.loadAssets.push("gift-shop-characters-photo-booth-nicky-ricky-dicky-dawn"),this.loadAssets.push("gift-shop-characters-nicky-ricky-dicky-dawn"),this.loadAssets.push("gift-shop-audio-nicky-ricky-dicky-dawn"),this.loadAssets.push("claw-assets-jungle"));break;case"mayan-madness":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&"game"==e&&this.loadAssets.push("mayan-madness-tutorial-assets"),"game"==e&&(this.loadAssets.push("mayan-madness-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-volcano"),this.loadAssets.push("pause-assets-volcano"),this.loadAssets.push("mayan-madness-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="mayanMadnessGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-volcano"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-volcano"),this.loadAssets.push("gift-shop-characters-photo-booth-henry-danger"),this.loadAssets.push("gift-shop-characters-henry-danger"),this.loadAssets.push("gift-shop-audio-henry-danger"),this.loadAssets.push("claw-assets-volcano"));break;case"roller-coaster-doom":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&"game"==e&&this.loadAssets.push("roller-coaster-doom-tutorial-assets"),"game"==e&&(this.loadAssets.push("roller-coaster-doom-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-volcano"),this.loadAssets.push("pause-assets-volcano"),this.loadAssets.push("roller-coaster-doom-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="rollerCoasterDoomGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-volcano"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-volcano"),this.loadAssets.push("gift-shop-characters-photo-booth-thundermans"),this.loadAssets.push("gift-shop-characters-thundermans"),this.loadAssets.push("gift-shop-audio-thundermans"),this.loadAssets.push("claw-assets-volcano"));break;case"roller-coaster-ice":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&"game"==e&&this.loadAssets.push("roller-coaster-ice-tutorial-assets"),"game"==e&&(this.loadAssets.push("roller-coaster-ice-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-ice"),this.loadAssets.push("pause-assets-ice"),this.loadAssets.push("roller-coaster-ice-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="rollerCoasterIceGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-ice"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-ice-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-ice"),this.loadAssets.push("gift-shop-characters-photo-booth-game-shakers"),this.loadAssets.push("gift-shop-characters-game-shakers"),this.loadAssets.push("gift-shop-audio-game-shakers"),this.loadAssets.push("claw-assets-ice"));break;case"pin-ball":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&this.loadAssets.push("pin-ball-tutorial-assets"),"game"==e&&(this.loadAssets.push("pin-ball-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-ice"),this.loadAssets.push("pause-assets-ice"),this.loadAssets.push("pin-ball-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="pinBallGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-ice"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-ice-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-ice"),this.loadAssets.push("gift-shop-characters-photo-booth-spongebob"),this.loadAssets.push("gift-shop-characters-spongebob"),this.loadAssets.push("gift-shop-audio-spongebob"),this.loadAssets.push("claw-assets-ice"));break;case"aqua-jetpack":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&this.loadAssets.push("aqua-jetpack-tutorial-assets"),"game"==e&&(this.loadAssets.push("aqua-jetpack-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-beach"),this.loadAssets.push("pause-assets-beach"),this.loadAssets.push("aqua-jetpack-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="aquaJetpackGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-beach"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-beach-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-beach"),this.loadAssets.push("gift-shop-characters-photo-booth-thundermans"),this.loadAssets.push("gift-shop-characters-thundermans"),this.loadAssets.push("gift-shop-audio-thundermans"),this.loadAssets.push("claw-assets-beach"));break;case"waterfall-wipeout":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&this.loadAssets.push("waterfall-wipeout-tutorial-assets"),"game"==e&&(this.loadAssets.push("waterfall-wipeout-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-jungle"),this.loadAssets.push("pause-assets-jungle"),this.loadAssets.push("waterfall-wipeout-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="waterfallWipeoutGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-jungle"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-jungle-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-jungle"),this.loadAssets.push("gift-shop-characters-photo-booth-i-am-frankie"),this.loadAssets.push("gift-shop-characters-i-am-frankie"),this.loadAssets.push("gift-shop-audio-i-am-frankie"),this.loadAssets.push("claw-assets-jungle"));break;case"snowball-wars":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&this.loadAssets.push("snowball-wars-tutorial-assets"),"game"==e&&(this.loadAssets.push("snowball-wars-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-ice"),this.loadAssets.push("pause-assets-ice"),this.loadAssets.push("snowball-wars-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="snowballWarsGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-ice"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-ice-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-ice"),this.loadAssets.push("gift-shop-characters-photo-booth-loud-house"),this.loadAssets.push("gift-shop-characters-loud-house"),this.loadAssets.push("gift-shop-audio-loud-house"),this.loadAssets.push("claw-assets-ice"));break;case"volcano-skydive":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&this.loadAssets.push("volcano-skydive-tutorial-assets"),"game"==e&&(this.loadAssets.push("volcano-skydive-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-volcano"),this.loadAssets.push("pause-assets-volcano"),this.loadAssets.push("volcano-skydive-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="volcanoSkydiveGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-volcano"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-volcano"),this.loadAssets.push("gift-shop-characters-photo-booth-find-me-in-paris"),this.loadAssets.push("gift-shop-characters-find-me-in-paris"),this.loadAssets.push("gift-shop-audio-find-me-in-paris"),this.loadAssets.push("claw-assets-volcano"));break;case"hover-drift":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&this.loadAssets.push("hover-drift-tutorial-assets"),"game"==e&&(this.loadAssets.push("hover-drift-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-beach"),this.loadAssets.push("pause-assets-beach"),this.loadAssets.push("hover-drift-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="hoverDriftGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-beach"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-beach-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-beach"),this.loadAssets.push("gift-shop-characters-photo-booth-nicky-ricky-dicky-dawn"),this.loadAssets.push("gift-shop-characters-nicky-ricky-dicky-dawn"),this.loadAssets.push("gift-shop-audio-nicky-ricky-dicky-dawn"),this.loadAssets.push("claw-assets-beach"));break;case"egg-scape":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&this.loadAssets.push("egg-scape-tutorial-assets"),"game"==e&&(this.loadAssets.push("egg-scape-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-asteroid"),this.loadAssets.push("pause-assets-asteroid"),this.loadAssets.push("egg-scape-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="eggscapeGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-asteroid"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-ateroid-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-asteroid-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-asteroid"),this.loadAssets.push("gift-shop-characters-photo-booth-game-shakers"),this.loadAssets.push("gift-shop-characters-game-shakers"),this.loadAssets.push("gift-shop-audio-game-shakers"),this.loadAssets.push("claw-assets-asteroid"));break;case"abducktion":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&this.loadAssets.push("abducktion-tutorial-assets"),"game"==e&&(this.loadAssets.push("abducktion-assets"),this.loadAssets.push("abducktion-audio"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-asteroid"),this.loadAssets.push("pause-assets-asteroid"),this.loadAssets.push("asteroid-game-2-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="abducktionGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-asteroid"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-asteroid-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-asteroid"),this.loadAssets.push("gift-shop-characters-photo-booth-knight-squad"),this.loadAssets.push("gift-shop-characters-knight-squad"),this.loadAssets.push("gift-shop-audio-knight-squad"),this.loadAssets.push("claw-assets-asteroid"));break;case"striker":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&this.loadAssets.push("striker-tutorial-assets"),"game"==e&&(this.loadAssets.push("striker-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-asteroid"),this.loadAssets.push("pause-assets-asteroid"),this.loadAssets.push("striker-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="strikerGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-asteroid"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-asteroid-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-asteroid"),this.loadAssets.push("gift-shop-characters-photo-booth-henry-danger"),this.loadAssets.push("gift-shop-characters-henry-danger"),this.loadAssets.push("gift-shop-audio-henry-danger"),this.loadAssets.push("claw-assets-asteroid"));break;case"crazy-golf":0==Game.coreData.getGameTutorialViewed(this.currentGameId)&&this.loadAssets.push("crazy-golf-tutorial-assets"),"game"==e&&(this.loadAssets.push("crazy-golf-assets"),this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-asteroid"),this.loadAssets.push("pause-assets-asteroid"),this.loadAssets.push("crazy-golf-audio"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="crazyGolfGameplayScene"),"hub"==e&&(2==this.currentGameLaunchMode?(this.loadAssets.push("hub-assets-asteroid"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-asteroid-island-audio")):(this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"))),"shop"==e&&(this.loadAssets.push("gift-shop-assets-asteroid"),this.loadAssets.push("gift-shop-characters-photo-booth-i-am-frankie"),this.loadAssets.push("gift-shop-characters-i-am-frankie"),this.loadAssets.push("gift-shop-audio-i-am-frankie"),this.loadAssets.push("claw-assets-asteroid"));break;case"all-games":case void 0:this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.loadAssets.push("hub-asteroid-island-audio"),this.currentGameLaunchMode=1}if(1==this.firstLoad&&1==this.devMode&&Game.coreData.setCurrentRide(this.devModeGameID),this.firstLoad=!1,1==this.devMode)switch(this.currentGameId){case"gift-shop":this.targetInitialScene="giftShopScene",this.currentGameLaunchMode=1,this.buildDebugGiftShopAssets();break;case"photo-booth":this.targetInitialScene="photoBoothMainScene",this.currentGameLaunchMode=1,this.buildDebugGiftShopAssets();break;case"wristband-shop":this.targetInitialScene="wristBandShopScene",this.currentGameLaunchMode=1,this.buildDebugGiftShopAssets();break;case"clothes-shop":this.targetInitialScene="characterItemShopScene",this.currentGameLaunchMode=1,this.buildDebugGiftShopAssets();break;case"title-scene":this.loadAssets.push("title-assets"),this.targetInitialScene="titleScene",this.currentGameLaunchMode=1;break;case"hub-scene":this.loadAssets.push("hub-assets-full"),this.loadAssets.push("hub-audio"),this.loadAssets.push("hub-volcano-island-audio"),this.loadAssets.push("hub-jungle-island-audio"),this.loadAssets.push("hub-beach-island-audio"),this.loadAssets.push("hub-ice-island-audio"),this.targetInitialScene="hubScene",this.currentGameLaunchMode=1;break;case"gameover-scene":this.loadAssets.push("game-over-assets-general"),this.loadAssets.push("game-over-assets-beach"),this.loadAssets.push("game-over-assets-volcano"),this.loadAssets.push("game-over-assets-jungle"),this.loadAssets.push("game-over-assets-ice"),this.loadAssets.push("game-over-assets-asteroid"),this.loadAssets.push("pause-assets-beach"),this.loadAssets.push("game-over-audio"),this.targetInitialScene="gameoverScene",this.currentGameLaunchMode=1;break;case"claw":this.currentGameLaunchMode=1,this.targetInitialScene="clawGameGameplayScene",this.buildDebugGiftShopAssets();break;case"preloader-test":this.currentGameLaunchMode=1,this.targetInitialScene="s"}},e.prototype.flushAssets=function(e){var t=new Array,i=new Array;if("hub"!=e&&"games"!=e&&"shop"!=e&&"title"!=e)throw new ReferenceError("Ooops! Can only generate asset list to load if param is 'hub', 'games', 'title', 'shop'.");switch(e){case"games":t.push("beach-buggy-assets"),t.push("beach-buggy-tutorial-assets"),t.push("jet-ski-assets"),t.push("jet-ski-tutorial-assets"),t.push("tree-top-gladiators-assets"),t.push("tree-top-gladiators-tutorial-assets"),t.push("river-rangers-assets"),t.push("river-rangers-tutorial-assets"),t.push("laser-cave-assets"),t.push("laser-cave-tutorial-assets"),t.push("dodgems-assets"),t.push("dodgems-tutorial-assets"),t.push("coco-nutty-assets"),t.push("coco-nutty-tutorial-assets"),t.push("mayan-madness-assets"),t.push("mayan-madness-tutorial-assets"),t.push("roller-coaster-doom-assets"),t.push("roller-coaster-doom-tutorial-assets"),t.push("roller-coaster-ice-assets"),t.push("roller-coaster-ice-tutorial-assets"),t.push("pin-ball-assets"),t.push("pin-ball-tutorial-assets"),t.push("aqua-jetpack-assets"),t.push("aqua-jetpack-tutorial-assets"),t.push("waterfall-wipeout-assets"),t.push("waterfall-wipeout-tutorial-assets"),t.push("snowball-wars-assets"),t.push("snowball-wars-tutorial-assets"),t.push("hover-drift-assets"),t.push("hover-drift-tutorial-assets"),t.push("volcano-skydive-assets"),t.push("volcano-skydive-tutorial-assets"),t.push("egg-scape-assets"),t.push("egg-scape-tutorial-assets"),t.push("abducktion-assets"),t.push("abducktion-tutorial-assets"),t.push("striker-assets"),t.push("striker-tutorial-assets"),t.push("crazy-golf-assets"),t.push("crazy-golf-tutorial-assets"),t.push("pause-assets-beach"),t.push("pause-assets-ice"),t.push("pause-assets-jungle"),t.push("pause-assets-volcano"),t.push("game-over-assets-general"),t.push("game-over-assets-ice"),t.push("game-over-assets-jungle"),t.push("game-over-assets-volcano"),t.push("game-over-assets-beach"),t.push("game-over-assets-asteroid"),t.push("wristband-dialogue-assets"),i.push("beach-buggy-audio"),i.push("jet-ski-audio"),i.push("tree-top-gladiators-audio"),i.push("river-rangers-audio"),i.push("laser-cave-audio"),i.push("dodgems-audio"),i.push("coco-nutty-audio"),i.push("mayan-madness-audio"),i.push("roller-coaster-doom-audio"),i.push("roller-coaster-ice-audio"),i.push("pin-ball-audio"),i.push("aqua-jetpack-audio"),i.push("game-over-audio"),i.push("snowball-wars-audio"),i.push("volcano-skydive-audio"),i.push("hover-drift-audio"),i.push("waterfall-wipeout-audio"),i.push("egg-scape-audio"),i.push("abducktion-audio"),i.push("striker-audio"),i.push("crazy-golf-audio");break;case"hub":t.push("hub-assets-full"),t.push("hub-assets-volcano"),t.push("hub-assets-beach"),t.push("hub-assets-ice"),t.push("hub-assets-jungle"),t.push("hub-assets-asteroid"),i.push("hub-audio"),i.push("hub-volcano-island-audio"),i.push("hub-jungle-island-audio"),i.push("hub-beach-island-audio"),i.push("hub-ice-island-audio"),i.push("hub-asteroid-island-audio");break;case"shop":t.push("gift-shop-assets"),t.push("gift-shop-assets-volcano"),t.push("gift-shop-assets-ice"),t.push("gift-shop-assets-jungle"),t.push("gift-shop-assets-beach"),t.push("gift-shop-assets-asteroid"),t.push("gift-shop-characters-photo-booth-thundermans"),t.push("gift-shop-characters-photo-booth-spongebob"),t.push("gift-shop-characters-photo-booth-school-of-rock"),t.push("gift-shop-characters-photo-booth-loud-house"),t.push("gift-shop-characters-photo-booth-game-shakers"),t.push("gift-shop-characters-photo-booth-nicky-ricky-dicky-dawn"),t.push("gift-shop-characters-photo-booth-henry-danger"),t.push("gift-shop-characters-photo-booth-tmnt"),t.push("gift-shop-characters-photo-booth-i-am-frankie"),t.push("gift-shop-characters-photo-booth-find-me-in-paris"),t.push("gift-shop-characters-photo-booth-knight-squad"),t.push("gift-shop-characters-thundermans"),t.push("gift-shop-characters-spongebob"),t.push("gift-shop-characters-school-of-rock"),t.push("gift-shop-characters-loud-house"),t.push("gift-shop-characters-game-shakers"),t.push("gift-shop-characters-nicky-ricky-dicky-dawn"),t.push("gift-shop-characters-henry-danger"),t.push("gift-shop-characters-tmnt"),t.push("gift-shop-characters-i-am-frankie"),t.push("gift-shop-characters-find-me-in-paris"),t.push("gift-shop-characters-knight-squad"),t.push("claw-assets"),i.push("gift-shop-audio"),i.push("gift-shop-audio-henry-danger"),i.push("gift-shop-audio-tmnt"),i.push("gift-shop-audio-loud-house"),i.push("gift-shop-audio-thundermans"),i.push("gift-shop-audio-spongebob"),i.push("gift-shop-audio-game-shakers"),i.push("gift-shop-audio-school-of-rock"),i.push("gift-shop-audio-nicky-ricky-dicky-dawn"),i.push("claw-audio-assets"),i.push("gift-shop-audio-i-am-frankie"),i.push("gift-shop-audio-find-me-in-paris");break;case"title":t.push("title-assets")}Game.displayStore.flush(t);for(var s=0;s<i.length;s++)Game.audioManager.flush(i[s]);1==Game.webGL&&Game.renderer.textureGC.run()},e.prototype.setCurrentGameLaunchMode=function(e){this.currentGameLaunchMode=e},e.prototype.getCurrentGameLaunchMode=function(){return this.currentGameLaunchMode},e.prototype.setCurrentGameId=function(e){this.currentGameId=e},e.prototype.getCurrentGameId=function(){return this.currentGameId},e.prototype.getTargetInitialScene=function(){return this.targetInitialScene},e.prototype.getLoadAssets=function(){return this.loadAssets},e.prototype.buildDebugGiftShopAssets=function(){switch(this.loadAssets.push("claw-assets-beach"),this.loadAssets.push("claw-assets"),this.loadAssets.push("claw-audio-assets"),this.loadAssets.push("gift-shop-assets"),this.loadAssets.push("gift-shop-audio"),this.devModeGameID){case"beach-buggy":this.loadAssets.push("gift-shop-assets-beach"),this.loadAssets.push("gift-shop-characters-photo-booth-game-shakers"),this.loadAssets.push("gift-shop-characters-game-shakers"),this.loadAssets.push("gift-shop-audio-game-shakers");break;case"jet-ski":this.loadAssets.push("gift-shop-assets-beach"),this.loadAssets.push("gift-shop-characters-photo-booth-school-of-rock"),this.loadAssets.push("gift-shop-characters-school-of-rock"),this.loadAssets.push("gift-shop-audio-school-of-rock"),this.loadAssets.push("claw-assets-beach");break;case"tree-top-gladiators":this.loadAssets.push("gift-shop-assets-jungle"),this.loadAssets.push("gift-shop-characters-photo-booth-loud-house"),this.loadAssets.push("gift-shop-characters-loud-house"),this.loadAssets.push("gift-shop-audio-loud-house"),this.loadAssets.push("claw-assets-jungle");break;case"river-rangers":this.loadAssets.push("gift-shop-assets-jungle"),this.loadAssets.push("gift-shop-characters-photo-booth-spongebob"),this.loadAssets.push("gift-shop-characters-spongebob"),this.loadAssets.push("gift-shop-audio-spongebob"),this.loadAssets.push("claw-assets-jungle");break;case"laser-cave":this.loadAssets.push("gift-shop-assets-volcano"),this.loadAssets.push("gift-shop-characters-photo-booth-tmnt"),this.loadAssets.push("gift-shop-characters-tmnt"),this.loadAssets.push("gift-shop-audio-tmnt"),this.loadAssets.push("claw-assets-volcano");break;case"dodgems":this.loadAssets.push("gift-shop-assets-ice"),this.loadAssets.push("gift-shop-characters-photo-booth-henry-danger"),this.loadAssets.push("gift-shop-characters-henry-danger"),this.loadAssets.push("gift-shop-audio-henry-danger"),this.loadAssets.push("claw-assets-ice");break;case"coco-nutty":this.loadAssets.push("gift-shop-assets-jungle"),this.loadAssets.push("gift-shop-characters-photo-booth-nicky-ricky-dicky-dawn"),this.loadAssets.push("gift-shop-characters-nicky-ricky-dicky-dawn"),this.loadAssets.push("gift-shop-audio-nicky-ricky-dicky-dawn"),this.loadAssets.push("claw-assets-jungle");break;case"mayan-madness":this.loadAssets.push("gift-shop-assets-volcano"),this.loadAssets.push("gift-shop-characters-photo-booth-henry-danger"),this.loadAssets.push("gift-shop-characters-henry-danger"),this.loadAssets.push("gift-shop-audio-henry-danger"),this.loadAssets.push("claw-assets-volcano");break;case"roller-coaster-doom":this.loadAssets.push("gift-shop-assets-volcano"),this.loadAssets.push("gift-shop-characters-photo-booth-thundermans"),this.loadAssets.push("gift-shop-characters-thundermans"),this.loadAssets.push("gift-shop-audio-thundermans"),this.loadAssets.push("claw-assets-volcano");break;case"roller-coaster-ice":this.loadAssets.push("gift-shop-assets-ice"),this.loadAssets.push("gift-shop-characters-photo-booth-game-shakers"),this.loadAssets.push("gift-shop-characters-game-shakers"),this.loadAssets.push("gift-shop-audio-game-shakers"),this.loadAssets.push("claw-assets-ice");break;case"pin-ball":this.loadAssets.push("gift-shop-assets-ice"),this.loadAssets.push("gift-shop-characters-photo-booth-spongebob"),this.loadAssets.push("gift-shop-characters-spongebob"),this.loadAssets.push("gift-shop-audio-spongebob"),this.loadAssets.push("claw-assets-ice");break;case"aqua-jetpack":this.loadAssets.push("gift-shop-assets-beach"),this.loadAssets.push("gift-shop-characters-photo-booth-thundermans"),this.loadAssets.push("gift-shop-characters-thundermans"),this.loadAssets.push("gift-shop-audio-thundermans"),this.loadAssets.push("claw-assets-beach");break;case"waterfall-wipeout":this.loadAssets.push("gift-shop-assets-jungle"),this.loadAssets.push("gift-shop-characters-photo-booth-i-am-frankie"),this.loadAssets.push("gift-shop-characters-i-am-frankie"),this.loadAssets.push("gift-shop-audio-i-am-frankie"),this.loadAssets.push("claw-assets-jungle");break;case"snowball-wars":this.loadAssets.push("gift-shop-assets-ice"),this.loadAssets.push("gift-shop-characters-photo-booth-loud-house"),this.loadAssets.push("gift-shop-characters-loud-house"),this.loadAssets.push("gift-shop-audio-loud-house"),this.loadAssets.push("claw-assets-ice");break;case"hover-drift":this.loadAssets.push("gift-shop-assets-beach"),this.loadAssets.push("gift-shop-characters-photo-booth-nicky-ricky-dicky-dawn"),this.loadAssets.push("gift-shop-characters-nicky-ricky-dicky-dawn"),this.loadAssets.push("gift-shop-audio-nicky-ricky-dicky-dawn"),this.loadAssets.push("claw-assets-beach");break;case"volcano-skydive":this.loadAssets.push("gift-shop-assets-volcano"),this.loadAssets.push("gift-shop-characters-photo-booth-find-me-in-paris"),this.loadAssets.push("gift-shop-characters-find-me-in-paris"),this.loadAssets.push("gift-shop-audio-find-me-in-paris"),this.loadAssets.push("claw-assets-volcano");break;case"egg-scape":this.loadAssets.push("gift-shop-assets-asteroid"),this.loadAssets.push("gift-shop-characters-photo-booth-game-shakers"),this.loadAssets.push("gift-shop-characters-game-shakers"),this.loadAssets.push("gift-shop-audio-game-shakers"),this.loadAssets.push("claw-assets-asteroid");break;case"abducktion":this.loadAssets.push("gift-shop-assets-asteroid"),this.loadAssets.push("gift-shop-characters-photo-booth-knight-squad"),this.loadAssets.push("gift-shop-characters-knight-squad"),this.loadAssets.push("gift-shop-audio-knight-squad"),this.loadAssets.push("claw-assets-asteroid");break;case"striker":this.loadAssets.push("gift-shop-assets-asteroid"),this.loadAssets.push("gift-shop-characters-photo-booth-henry-danger"),this.loadAssets.push("gift-shop-characters-henry-danger"),this.loadAssets.push("gift-shop-audio-henry-danger"),this.loadAssets.push("claw-assets-asteroid");break;case"crazy-golf":this.loadAssets.push("gift-shop-assets-asteroid"),this.loadAssets.push("gift-shop-characters-photo-booth-i-am-frankie"),this.loadAssets.push("gift-shop-characters-i-am-frankie"),this.loadAssets.push("gift-shop-audio-i-am-frankie"),this.loadAssets.push("claw-assets-asteroid")}},e}(),TrackingEventsManager=function(){function e(e){this.game=e,this.trackingOn=!1}return e.prototype.setTrackingParams=function(e,t){this.trackingOn=e,this.overallGameTitle=t},e.prototype.trackGameEvent=function(e,t){0!=this.trackingOn&&"function"==typeof window.trackFlashEvent&&window.trackFlashEvent(this.overallGameTitle,e,t)},e.prototype.onLevelStart=function(e){0!=this.trackingOn&&"function"==typeof window.onLevelStart&&window.onLevelStart(e)},e.prototype.onLevelEnd=function(e){0!=this.trackingOn&&"function"==typeof window.onLevelComplete&&window.onLevelComplete(e)},e}(),LocalStorageManager=function(){function e(e){this.game=e,this.enableStorage=!1,this.localStorage=window.localStorage}return e.prototype.setLocalStorageEnabled=function(e){this.enableStorage=e},e.prototype.saveProgress=function(){if(0!=this.isLocalStorageAvailable())if(1==this.enableStorage){this.localStorage.setItem("tickets",Game.coreData.getTickets()),this.localStorage.setItem("firstTime",!1),Game.coreData.setFirstTime(!1);var e=JSON.stringify(Game.coreData.getAvatarAttributes());localStorage.setItem("avatarAttributes",e);var t=JSON.stringify(Game.coreData.getClothing());localStorage.setItem("clothing",t);var i=JSON.stringify(Game.coreData.getWristbands());localStorage.setItem("wristbands",i);var s=JSON.stringify(Game.coreData.getRideData());localStorage.setItem("rideData",s)}else this.localStorage.clear()},e.prototype.restoreProgress=function(){if(0!=this.enableStorage){var e=this.localStorage.getItem("tickets");if(e>0&&Game.coreData.setTickets(Number(e)),"false"==localStorage.getItem("firstTime")&&Game.coreData.setFirstTime(!1),this.localStorage.getItem("avatarAttributes")){var t=localStorage.getItem("avatarAttributes");if(t)var i=JSON.parse(t);Game.coreData.setAvatarAttributes(i)}if(this.localStorage.getItem("clothing")){var s=localStorage.getItem("clothing");if(s)var o=JSON.parse(s);Game.coreData.setClothing(o)}if(this.localStorage.getItem("wristbands")){var a=localStorage.getItem("wristbands");if(a)var r=JSON.parse(a);Game.coreData.setWristbands(r)}if(this.localStorage.getItem("rideData")){var n=localStorage.getItem("rideData");if(n)var h=JSON.parse(n);Game.coreData.setRideData(h)}}},e.prototype.isLocalStorageAvailable=function(){var e=!1;if(void 0!==window.localStorage&&null!=window.localStorage){var t=window.localStorage;try{t.setItem("test","1"),t.removeItem("test"),e=!0}catch(t){e=!1}}else e=!1;return e},e}(),RiverRangersPhysicsManager=function(){function e(e,t){this.physicsEnabled=!0,this.resizeRatio=1,this.scene=e,this.mainContainer=t}return e.prototype.initPhysicsWorld=function(){this.world=new p2.World({gravity:[0,-500]}),this.world.broadphase=new p2.NaiveBroadphase(1),this.waterLiftForce=[0,0],this.waterViscousForce=[0,0],this.centerOfBuoyancy=[0,0],this.shapePos=[0,0],this.startBoat=!1,this.recoilDamping=2.5,this.recoilStiffness=40,this.recoilRestLength=80,this.powerUpOn=!1,this.liftForce=.06,this.viscosity=.6,this.shapeAngle=0,this.aabb=new p2.AABB,this.vel=[0,0],this.gunRotateForce=40,this.gunRotateForceKeyboard=2.5,this.gunRadius=60,this.fireForce=2e3,this.fireForceBlunderbuss=1500,this.boatCruiseForce=8e3,this.boatCruiseForcePowerUp=12e3,this.collisionGroupBoatBody=Math.pow(2,0),this.collisionGroupBoatGun=Math.pow(2,1),this.collisionGroupBullets=Math.pow(2,2),this.collisionGroupBulletSensor=Math.pow(2,3),this.collisionGroupDrone=Math.pow(2,4),this.collisionGroupDroneSensor=Math.pow(2,5),this.collisionGroupBombs=Math.pow(2,6),this.collisionGroupBalloons=Math.pow(2,7),this.collisionGroupWaterParticles=Math.pow(2,8),this.collisionGroupWaterParticlesPlane=Math.pow(2,9),this.world.defaultContactMaterial.restitution=.2,this.world.defaultContactMaterial.friction=.4,this.waterPlane=new p2.Plane,this.waterBody=new p2.Body({mass:0,position:[0,Game.stageHeight-510],angle:0,collisionResponse:!1}),this.waterBody.addShape(this.waterPlane),this.droneResetPlane=new p2.Plane,this.droneResetPlane.sensor=!0,this.droneResetPlane.collisionGroup=this.collisionGroupDroneSensor,this.droneResetPlane.collisionMask=this.collisionGroupDrone,this.droneResetBody=new p2.Body({mass:0,position:[0,Game.stageHeight-700],angle:0}),this.droneResetBody.addShape(this.droneResetPlane),this.world.addBody(this.droneResetBody),this.bulletResetPlane=new p2.Plane,this.bulletResetPlane.sensor=!0,this.bulletResetPlane.collisionGroup=this.collisionGroupBulletSensor,this.bulletResetPlane.collisionMask=this.collisionGroupBullets,this.bulletResetBody=new p2.Body({mass:0,position:[0,Game.stageHeight-700],angle:0}),this.bulletResetBody.addShape(this.bulletResetPlane),this.world.addBody(this.bulletResetBody),this.waterSplashPlane=new p2.Plane,this.waterSplashPlane.sensor=!0,this.waterSplashPlane.collisionGroup=this.collisionGroupDroneSensor,this.waterSplashPlane.collisionMask=this.collisionGroupDrone,this.waterSplashBody=new p2.Body({mass:0,position:[0,Game.stageHeight-570],angle:0}),this.waterSplashBody.addShape(this.waterSplashPlane),this.world.addBody(this.waterSplashBody),this.waterParticlePlane=new p2.Plane,this.waterParticlePlane.sensor=!0,this.waterParticlePlane.collisionGroup=this.collisionGroupWaterParticlesPlane,this.waterParticlePlane.collisionMask=this.collisionGroupWaterParticles,this.waterParticlePlaneBody=new p2.Body({mass:0,position:[0,Game.stageHeight-700],angle:0}),this.waterParticlePlaneBody.addShape(this.waterParticlePlane),this.world.addBody(this.waterParticlePlaneBody),this.boatBodyPhysics=new p2.Body({mass:30,position:[200,Game.stageHeight-450]}),this.boatBodyShapePhysics1=new p2.Box({width:100,height:50}),this.boatBodyShapePhysics1.collisionGroup=this.collisionGroupBoatBody,this.boatBodyShapePhysics1.collisionMask=this.collisionGroupBombs,this.boatBodyShapePhysics2=new p2.Box({width:100,height:50}),this.boatBodyShapePhysics2.collisionGroup=this.collisionGroupBoatBody,this.boatBodyShapePhysics2.collisionMask=this.collisionGroupBombs,this.boatBodyShapePhysics3=new p2.Box({width:300,height:10}),this.boatBodyShapePhysics3.collisionGroup=this.collisionGroupBoatBody,this.boatBodyShapePhysics3.collisionMask=this.collisionGroupBombs,this.boatBodyPhysics.addShape(this.boatBodyShapePhysics1,[-100,0]),this.boatBodyPhysics.addShape(this.boatBodyShapePhysics2,[100,0]),this.boatBodyPhysics.addShape(this.boatBodyShapePhysics3,[0,20]),this.boatBodyPhysics.angularVelocity=.5,this.boatBodyPhysics.damping=.96,this.boatBodyPhysics.angularDamping=.9,this.world.addBody(this.boatBodyPhysics),this.spongeBobBody=new p2.Body({mass:1,position:[200,Game.stageHeight-450]}),this.spongeBobBodyShape=new p2.Box({width:50,height:88}),this.spongeBobBody.addShape(this.spongeBobBodyShape),this.world.addBody(this.spongeBobBody),this.spongeBobArmFront=new p2.Body({mass:1,position:[200,Game.stageHeight-450]}),this.spongeBobArmFrontShape=new p2.Box({width:69,height:19}),this.spongeBobArmFront.addShape(this.spongeBobArmFrontShape),this.world.addBody(this.spongeBobArmFront),this.spongeBobBodyConstraint=new p2.RevoluteConstraint(this.boatBodyPhysics,this.spongeBobBody,{localPivotA:[-50,0],localPivotB:[0,-40],collideConnected:!1}),this.world.addConstraint(this.spongeBobBodyConstraint),this.boatGunRotateBreechBody=new p2.Body({mass:1,position:[200,Game.stageHeight-450]}),this.boatGunRotateBreechShape=new p2.Circle({radius:52}),this.boatGunRotateBreechBody.addShape(this.boatGunRotateBreechShape),this.boatGunRotateBreechBody.angularDamping=.9,this.boatGunRotateBreechBody.damping=.9,this.boatGunRotateBreechShape.collisionGroup=this.collisionGroupBoatGun,this.world.addBody(this.boatGunRotateBreechBody),this.spongeBobArmShoulderConstraint=new p2.RevoluteConstraint(this.spongeBobBody,this.spongeBobArmFront,{localPivotA:[-10,0],localPivotB:[-30,10],collideConnected:!1}),this.world.addConstraint(this.spongeBobArmShoulderConstraint),this.spongeBobHandConstraint=new p2.RevoluteConstraint(this.boatGunRotateBreechBody,this.spongeBobArmFront,{localPivotA:[-20,10],localPivotB:[20,0],collideConnected:!1}),this.world.addConstraint(this.spongeBobHandConstraint),this.boatGunBarrel=new p2.Body({mass:1,position:[200,Game.stageHeight-450]}),this.boatGunBarrelShape=new p2.Box({width:72.5,height:27}),this.boatGunBarrelShape.collisionGroup=this.collisionGroupBoatGun,this.boatGunBarrel.addShape(this.boatGunBarrelShape),this.world.addBody(this.boatGunBarrel),this.boatGunBarrelRecoil=new p2.Body({mass:1,position:[200,Game.stageHeight-450]}),this.boatGunBarrelRecoilShape=new p2.Box({width:40,height:20}),this.boatGunBarrelRecoil.addShape(this.boatGunBarrelRecoilShape),this.boatGunBarrelRecoilShape.collisionGroup=this.collisionGroupBoatGun,this.world.addBody(this.boatGunBarrelRecoil),this.boatGunBarrelRecoilSpring=new p2.LinearSpring(this.boatGunBarrelRecoil,this.boatGunBarrel,{restLength:this.recoilRestLength,stiffness:this.recoilStiffness,damping:this.recoilDamping,localAnchorA:[20,0]}),this.world.addSpring(this.boatGunBarrelRecoilSpring),this.boatGunBarrelRecoilConstraint=new p2.PrismaticConstraint(this.boatGunBarrelRecoil,this.boatGunBarrel,{collideConnected:!1,localAnchorA:[0,0],localAnchorB:[20,0],localAxisA:[1,0],upperLimit:20,lowerLimit:0}),this.world.addConstraint(this.boatGunBarrelRecoilConstraint),this.boatBarrelConstraint=new p2.LockConstraint(this.boatGunRotateBreechBody,this.boatGunBarrel,{collideConnected:!1,localOffsetB:[40,0]}),this.world.addConstraint(this.boatBarrelConstraint),this.boatGunRotateConstraint=new p2.RevoluteConstraint(this.boatBodyPhysics,this.boatGunRotateBreechBody,{localPivotA:[0,30],localPivotB:[0,0],collideConnected:!1}),this.world.addConstraint(this.boatGunRotateConstraint),this.boatGunRotateConstraint.enableMotor();var e=this;this.world.on("beginContact",function(t){e.checkCollision(e,t)}),this.world.on("endContact",function(e){}),this.world.on("postStep",function(e){}),this.physicsEnabled=!0},e.prototype.checkCollision=function(e,t){t.bodyA!=e.bulletResetBody?t.bodyB!=e.bulletResetBody?t.bodyA!=e.droneResetBody?t.bodyB!=e.droneResetBody?t.bodyA!=e.waterSplashBody?t.bodyB!=e.waterSplashBody?t.bodyA!=e.waterParticlePlaneBody?t.bodyB!=e.waterParticlePlaneBody?(e.scene.checkBulletImpact(t.bodyA,t.bodyB),e.scene.checkBulletImpact(t.bodyB,t.bodyA),e.scene.checkBombImpact(t.bodyA,t.bodyB),e.scene.checkBombImpact(t.bodyB,t.bodyA)):e.killWaterParticle(e,t.bodyA):e.killWaterParticle(e,t.bodyB):e.droneSplash(e,t.bodyA):e.droneSplash(e,t.bodyB):e.resetDrone(e,t.bodyA):e.resetDrone(e,t.bodyB):e.resetBullet(e,t.bodyA):e.resetBullet(e,t.bodyB)},e.prototype.droneSplash=function(e,t){e.scene.playWaterSplash(t.position[0])},e.prototype.killWaterParticle=function(e,t){e.scene.killWaterParticle(t)},e.prototype.getSplashPhysicsObj=function(){var e=new p2.Body({mass:5}),t=new p2.Circle({radius:5});return t.collisionGroup=this.collisionGroupWaterParticles,t.collisionMask=this.collisionGroupWaterParticlesPlane,e.damping=.8,e.addShape(t),{body:e,shape:t}},e.prototype.getDroneParticlePhysicsObj=function(){var e=new p2.Body({mass:8}),t=new p2.Circle({radius:5});return t.collisionGroup=this.collisionGroupWaterParticles,t.collisionMask=this.collisionGroupWaterParticlesPlane,e.damping=.8,e.addShape(t),{body:e,shape:t}},e.prototype.getBombGooParticlePhysicsObj=function(){var e=new p2.Body({mass:5}),t=new p2.Circle({radius:5});return t.collisionGroup=this.collisionGroupWaterParticles,t.collisionMask=this.collisionGroupWaterParticlesPlane,e.damping=.8,e.addShape(t),{body:e,shape:t}},e.prototype.checkBoat=function(e){var t=!1;return e==this.boatBodyPhysics&&(t=!0),t},e.prototype.explodeBomb=function(e){this.scene.playBombPop(e.position[0],e.position[1]);var t=this.getAngle(this.boatBodyPhysics.position[0],Game.stageHeight-this.boatBodyPhysics.position[1],e.position[0],Game.stageHeight-e.position[1]),i=500-this.getDistance(this.boatBodyPhysics.position[0],Game.stageHeight-this.boatBodyPhysics.position[1],e.position[0],Game.stageHeight-e.position[1]);i<0&&(i=0);var s=Math.cos(t)*(i/this.boatBodyPhysics.mass),o=Math.sin(t)*(i/this.boatBodyPhysics.mass),a=[1e3*s,1e3*o];if(s||o){e.position[0],this.boatBodyPhysics.position[0];var r=e.position[1]-this.boatBodyPhysics.position[1];this.boatBodyPhysics.applyImpulse(a,[0,r])}},e.prototype.resetBullet=function(e,t){e.world.removeBody(t),e.scene.resetBullet(t)},e.prototype.resetDrone=function(e,t){e.scene.resetDrone(t)},e.prototype.getBulletBody=function(){var e=new p2.Body({mass:2.5,position:[0,Game.stageHeight-1e3]}),t=new p2.Box({width:10,height:10}),i=new p2.Box({width:2,height:2});return t.collisionGroup=this.collisionGroupBullets,i.collisionGroup=this.collisionGroupBullets,t.collisionMask=this.collisionGroupBulletSensor|this.collisionGroupDrone,i.collisionMask=this.collisionGroupBulletSensor|this.collisionGroupDrone,e.addShape(t,[5,0]),e.addShape(i,[-9,0]),{body:e,shape1:t,shape2:i}},e.prototype.getBlunderbussShotBody=function(){var e=new p2.Body({mass:2,position:[0,Game.stageHeight-1e3]}),t=new p2.Box({width:7,height:7});return t.collisionGroup=this.collisionGroupBullets,t.collisionMask=this.collisionGroupBulletSensor|this.collisionGroupDrone,e.addShape(t),{body:e,shape:t}},e.prototype.fireGun=function(e){var t=Math.cos(this.boatGunRotateBreechBody.angle),i=Math.sin(this.boatGunRotateBreechBody.angle),s=this.boatGunRotateBreechBody.position[0]+this.gunRadius*t,o=this.boatGunRotateBreechBody.position[1]+this.gunRadius*i;e.position[0]=s,e.position[1]=o,e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angle=this.boatGunRotateBreechBody.angle,e.velocity=[0,0],e.setZeroForce(),e.applyImpulse([t*this.fireForce,i*this.fireForce]),this.world.addBody(e),this.boatGunBarrelRecoil.applyImpulse([-t*(this.fireForce/2),-i*(this.fireForce/2)])},e.prototype.fireBlunderbuss=function(e){for(var t=0;t<e.length;t++){var i=Game.getRandom(-.3,.3),s=Math.cos(this.boatGunRotateBreechBody.angle+i),o=Math.sin(this.boatGunRotateBreechBody.angle+i),a=this.boatGunRotateBreechBody.position[0]+this.gunRadius*s,r=this.boatGunRotateBreechBody.position[1]+this.gunRadius*o,n=e[t];n.position[0]=a,n.position[1]=r,n.invMass=1/n.mass,n.invInertia=1/n.inertia,n.angle=this.boatGunRotateBreechBody.angle,n.velocity=[0,0],n.setZeroForce();var h=this.fireForceBlunderbuss+Game.getRandom(-this.fireForceBlunderbuss/4,this.fireForceBlunderbuss/4);n.applyImpulse([s*h,o*h]),this.world.addBody(n)}this.boatGunBarrelRecoil.applyImpulse([-s*(this.fireForce/2),-o*(this.fireForce/2)])},e.prototype.applyAABBBuoyancyForces=function(e){for(var t=0;t<e.boatBodyPhysics.shapes.length;t++){var i=e.boatBodyPhysics.shapes[t];e.boatBodyPhysics.vectorToWorldFrame(e.shapePos,i.position),p2.vec2.add(e.shapePos,e.shapePos,e.boatBodyPhysics.position),e.shapeAngle=i.angle+e.boatBodyPhysics.angle,i.computeAABB(e.aabb,e.shapePos,e.shapeAngle);var s;if(e.aabb.upperBound[1]<e.waterBody.position[1])p2.vec2.copy(e.centerOfBuoyancy,e.shapePos),s=i.area;else{if(!(e.aabb.lowerBound[1]<e.waterBody.position[1]))return;var o=e.aabb.upperBound[0]-e.aabb.lowerBound[0],a=e.aabb.upperBound[1]-e.aabb.lowerBound[1];s=o*a,p2.vec2.set(e.centerOfBuoyancy,e.aabb.lowerBound[0]+o/2,e.aabb.lowerBound[1]+a/2)}p2.vec2.subtract(e.waterLiftForce,e.waterBody.position,e.centerOfBuoyancy),p2.vec2.scale(e.waterLiftForce,e.waterLiftForce,s*e.liftForce),e.waterLiftForce[0]=0,p2.vec2.subtract(e.centerOfBuoyancy,e.centerOfBuoyancy,e.boatBodyPhysics.position),e.boatBodyPhysics.getVelocityAtPoint(e.vel,e.centerOfBuoyancy),p2.vec2.scale(e.waterViscousForce,e.vel,-e.viscosity),e.boatBodyPhysics.applyForce(e.waterViscousForce,e.centerOfBuoyancy),e.boatBodyPhysics.applyForce(e.waterLiftForce,e.centerOfBuoyancy)}},e.prototype.getDroneChassis=function(){var e=new p2.Body({mass:10,position:[0,Game.stageHeight-1e3]}),t=new p2.Box({width:125,height:64});e.damping=.9,t.collisionGroup=this.collisionGroupDrone,t.collisionMask=this.collisionGroupBullets|this.collisionGroupDroneSensor,e.gravityScale=0,e.addShape(t);var i=new p2.Body({mass:2,position:[0,Game.stageHeight-1e3]}),s=new p2.Box({width:6,height:42});s.collisionGroup=this.collisionGroupDrone,s.collisionMask=this.collisionGroupDroneSensor,i.addShape(s),i.damping=.99,i.angularDamping=.99;var o=new p2.RevoluteConstraint(i,e,{collideConnected:!1,localPivotA:[0,24],localPivotB:[0,-20]}),a=new p2.Body({mass:2,position:[0,Game.stageHeight-1e3]}),r=new p2.Circle({radius:15});return a.addShape(r),a.damping=.9,{chassisBody:e,chassisShape:t,bombHolderBody:i,bombHolderShape:s,bombHolderConstraint:o,bombBody:a,bombShape:r,bombConstraint:new p2.LockConstraint(a,i,{collideConnected:!1,localOffsetB:[0,32]})}},e.prototype.getBalloonBody=function(){var e=new p2.Body({mass:2,position:[0,0]});e.gravityScale=-1;var t=new p2.Circle({radius:100});t.collisionGroup=this.collisionGroupBalloons,e.addShape(t,[0,-45]);var i=new p2.Body({mass:0,position:[0,0]}),s=new p2.Circle({radius:10});return s.collisionGroup=this.collisionGroupBalloons,i.addShape(s),{balloonBody:e,balloonShape1:t,weightBody:i,weightShape:s,spring:new p2.LinearSpring(e,i,{restLength:100,stiffness:750,damping:50,localAnchorA:[0,-45],localAnchorB:[0,0]})}},e.prototype.addBodyToWorld=function(e){this.world.addBody(e)},e.prototype.removeBodyFromWorld=function(e){this.world.removeBody(e)},e.prototype.removeConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.addConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.removeSpringFromWorld=function(e){this.world.removeSpring(e)},e.prototype.addSpringToWorld=function(e){this.world.addSpring(e)},e.prototype.resizeElements=function(e,t){this.canvasHeight=t,this.canvasWidth=e,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},e.prototype.activatePowerUpEffect=function(){this.powerUpOn=!0},e.prototype.deactivatePowerUpEffect=function(){this.powerUpOn=!1},e.prototype.changeGunAngle=function(e){var t=this.boatGunRotateBreechBody.angle;this.boatGunRotateConstraint.setMotorSpeed(this.gunRotateForce*(t-e))},e.prototype.armBomb=function(e){e.shapes[0].collisionGroup=this.collisionGroupBombs,e.shapes[0].collisionMask=this.collisionGroupBoatBody},e.prototype.disarmBomb=function(e){e.shapes[0].collisionGroup=null,e.shapes[0].collisionMask=null},e.prototype.armDrone=function(e){e.shapes[0].collisionGroup=this.collisionGroupDrone,e.shapes[0].collisionMask=this.collisionGroupBullets|this.collisionGroupDroneSensor},e.prototype.disarmDrone=function(e){e.shapes[0].collisionGroup=null,e.shapes[0].collisionMask=null},e.prototype.startBoatPower=function(){this.startBoat=!0},e.prototype.stepPhysics=function(){if(0!=this.physicsEnabled&&this.world&&(this.world.step(1/30),this.applyAABBBuoyancyForces(this),1==this.startBoat)){var e;e=1==this.powerUpOn?this.boatCruiseForcePowerUp:this.boatCruiseForce,this.boatBodyPhysics.applyForce([e,0])}},e.prototype.killPhysicsWorld=function(e){},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.world.clear(),this.world=null},e}(),RiverRangersInputManager=function(){function e(e,t,i){this.scene=e,this.upKeyOn=!1,this.downKeyOn=!1,this.inputDownPosOrig=new PIXI.Point(0,0),this.inputDownPosMove=new PIXI.Point(0,0),this.differenceRange=100,this.storedInputDifference=0,this.currentInputDifference=0,this.minInputDifference=this.storedInputDifference-this.differenceRange,this.maxInputDifference=this.storedInputDifference+this.differenceRange,this.inputRange=this.maxInputDifference-this.minInputDifference,this.mainHolderRef=i,this.keyboardAngleDuration=.5,this.hitAreaSprite=Game.displayStore.getSprite("river-rangers/blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.gunBreechRef=t,this.currentAngle=0,this.keyBoardModeOn=!1,this.mouseModeOn=!0,this.maxAngleDiff=1.2,this.minAngleDiff=.1,this.keyboardCurrentAngle=this.minAngleDiff,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite),this.mouseDown=!1}return e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mousemove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t)}),e.on("mouseupoutside",function(e){t.inputUp(t)})):(e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchmove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t)}))},e.prototype.inputDown=function(e,t){e.mouseDown=!0,e.keyBoardModeOn=!1,e.mouseModeOn=!0,e.inputDownPosOrig.x=t.x,e.inputDownPosOrig.y=t.y,e.inputDownPosMove.x=t.x,e.inputDownPosMove.y=t.y,e.currentInputDifference=e.storedInputDifference},e.prototype.inputUp=function(e){e.mouseDown=!1,e.storedInputDifference=e.currentInputDifference},e.prototype.inputMove=function(e,t){0!=e.mouseDown&&(t.x>Game.stageWidth-200||(e.inputDownPosMove.y=t.y,e.currentInputDifference=e.storedInputDifference+(e.inputDownPosOrig.y-e.inputDownPosMove.y)))},e.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},e.prototype.getInputAngle=function(){var e=this.currentAngle;return e>this.maxAngleDiff&&(e=this.maxAngleDiff),e<this.minAngleDiff&&(e=this.minAngleDiff),e},e.prototype.getKeyboardInputAngle=function(){return this.keyboardCurrentAngle},e.prototype.upKeyDown=function(){if(1!=this.upKeyOn){0==this.keyBoardModeOn&&(this.keyboardCurrentAngle=this.currentAngle),this.keyBoardModeOn=!0,this.upKeyOn=!0,this.mouseModeOn=!1;var e=this.maxAngleDiff-this.minAngleDiff,t=(this.maxAngleDiff-this.keyboardCurrentAngle)/e,i=this.keyboardAngleDuration*t;this.keyboardAngleTween=TweenMax.to(this,i,{keyboardCurrentAngle:this.maxAngleDiff,ease:Linear.easeNone})}},e.prototype.downKeyDown=function(){if(1!=this.downKeyOn){0==this.keyBoardModeOn&&(this.keyboardCurrentAngle=this.currentAngle),this.keyBoardModeOn=!0,this.downKeyOn=!0,this.mouseModeOn=!1;var e=this.maxAngleDiff-this.minAngleDiff,t=(this.keyboardCurrentAngle-this.minAngleDiff)/e,i=this.keyboardAngleDuration*t;this.keyboardAngleTween=TweenMax.to(this,i,{keyboardCurrentAngle:this.minAngleDiff,ease:Linear.easeNone})}},e.prototype.upKeyUp=function(){this.upKeyOn=!1,this.keyboardAngleTween=this.scene.killTween(this.keyboardAngleTween)},e.prototype.downKeyUp=function(){this.downKeyOn=!1,this.keyboardAngleTween=this.scene.killTween(this.keyboardAngleTween)},e.prototype.tick=function(){this.calculateInputEffect(),this.calcConvertedInputAngle()},e.prototype.calculateInputEffect=function(){1!=this.keyBoardModeOn&&(this.currentInputDifference<=this.minInputDifference&&(this.currentInputDifference=this.minInputDifference),this.currentInputDifference>=this.maxInputDifference&&(this.currentInputDifference=this.maxInputDifference),this.inputDownPosMove.y=this.inputDownPosOrig.y+this.currentInputDifference)},e.prototype.calcConvertedInputAngle=function(){var e=this.maxInputDifference-this.minInputDifference,t=this.inputDownPosOrig.y-e/2,i=(this.inputDownPosOrig.y,(this.inputDownPosMove.y-t)/e),s=(this.maxAngleDiff-this.minAngleDiff)*i;this.currentAngle=this.minAngleDiff+s},e.prototype.pause=function(){this.scene.pauseResumeTween(this.keyboardAngleTween,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.keyboardAngleTween,"resume")},e.prototype.destroy=function(){this.keyboardAngleTween=this.scene.killTween(this.keyboardAngleTween),this.hitAreaSprite.removeAllListeners()},e}(),RiverRangersLevelManager=function(){function e(e,t,i){this.scene=e,this.mainContainer=t,this.riverBankFrames1=Game.displayStore.getAnimatedSprite("bank-frames"),this.riverBankFrames1.scale.x=1.11,this.riverBankFrames1.loop=!0,this.riverBankFrames1.animationSpeed=.1,this.riverBankFrames1.play(),this.riverBankFrames2=Game.displayStore.getAnimatedSprite("bank-frames"),this.riverBankFrames2.scale.x=1.11,this.riverBankFrames2.loop=!0,this.riverBankFrames2.animationSpeed=.1,this.riverBankFrames2.play(),this.bgContainerWidth=Game.stageWidth,this.jungleMidLayerHolder1=Game.displayStore.getContainer("river-rangers/jungle-holder-mid-layer"),this.jungleMidLayerHolder2=Game.displayStore.getContainer("river-rangers/jungle-holder-mid-layer"),this.jungleMidLayerSprite1=Game.displayStore.getSprite("river-rangers/jungle-bg-mid-layer"),this.jungleMidLayerSprite2=Game.displayStore.getSprite("river-rangers/jungle-bg-mid-layer"),this.jungleMidLayerSprite3=Game.displayStore.getSprite("river-rangers/jungle-bg-mid-layer"),this.jungleMidLayerSprite4=Game.displayStore.getSprite("river-rangers/jungle-bg-mid-layer"),this.jungleBackLayer1=Game.displayStore.getSprite("river-rangers/jungle-back-layer"),this.jungleBackLayer2=Game.displayStore.getSprite("river-rangers/jungle-back-layer"),this.jungleBackLayer2.position.x=this.jungleBackLayer1.width+this.jungleBackLayer1.position.x,this.midContainerWidth=2*this.jungleMidLayerSprite1.width,this.midLayerSpeedFactor=.6,this.jungleMidLayerHolder1.addChild(this.jungleMidLayerSprite1),this.jungleMidLayerHolder1.addChild(this.jungleMidLayerSprite2),this.jungleMidLayerHolder2.addChild(this.jungleMidLayerSprite3),this.jungleMidLayerHolder2.addChild(this.jungleMidLayerSprite4),this.jungleMidLayerSprite2.position.x=this.jungleMidLayerSprite1.position.x+this.jungleMidLayerSprite1.width,this.jungleMidLayerSprite4.position.x=this.jungleMidLayerSprite1.position.x+this.jungleMidLayerSprite1.width,this.riverTile1=Game.displayStore.getSprite("river-rangers/river-tile"),this.riverTile2=Game.displayStore.getSprite("river-rangers/river-tile"),this.riverTile1.width=this.riverTile2.width=this.bgContainerWidth,this.riverTile1.height=this.riverTile2.height=60,this.riverTile1.width=this.riverTile2.width=this.bgContainerWidth,this.riverTile1.height=this.riverTile2.height=60,this.riverBankHolder1=Game.displayStore.getContainer("river-rangers/river-bank-holder"),this.riverBankHolder2=Game.displayStore.getContainer("river-rangers/river-bank-holder"),this.riverBankSprite1=Game.displayStore.getSprite("river-rangers/river-bank"),this.riverBankSprite2=Game.displayStore.getSprite("river-rangers/river-bank"),this.jungleHolder1=Game.displayStore.getContainer("river-rangers/jungle-holder"),this.jungleHolder2=Game.displayStore.getContainer("river-rangers/jungle-holder"),this.riverBankHolder1.addChild(this.riverTile1),this.riverBankHolder2.addChild(this.riverTile2),this.riverBankHolder1.addChild(this.riverBankSprite1),this.riverBankHolder2.addChild(this.riverBankSprite2),this.riverBankHolder1.position.y=400,this.riverBankHolder2.position.y=400,this.riverTile1.position.y=104,this.riverTile2.position.y=104,this.jungleBackPos=0,this.riverSideForegroundItems=new Array;for(s=0;s<8;s++)this.riverSideForegroundItems.push({sprite:Game.displayStore.getSprite("river-rangers/riverside-element-"+String(s+1)),active:!1,container:null});for(s=0;s<8;s++)this.riverSideForegroundItems.push({sprite:Game.displayStore.getSprite("river-rangers/riverside-element-"+String(s+1)),active:!1,container:null});this.jungleItems=new Array;for(s=0;s<6;s++)this.jungleItems.push({sprite:Game.displayStore.getSprite("river-rangers/jungle-element-"+String(s+1)),active:!1,container:null});for(var s=0;s<6;s++)this.jungleItems.push({sprite:Game.displayStore.getSprite("river-rangers/jungle-element-"+String(s+1)),active:!1,container:null});this.mainContainer.addChild(this.jungleBackLayer1),this.mainContainer.addChild(this.jungleBackLayer2),this.mainContainer.addChild(this.jungleMidLayerHolder1),this.mainContainer.addChild(this.jungleMidLayerHolder2),this.mainContainer.addChild(this.jungleHolder1),this.mainContainer.addChild(this.jungleHolder2),this.mainContainer.addChild(this.riverBankHolder1),this.mainContainer.addChild(this.riverBankHolder2),this.currentBGOffset=0,this.currentMidLayerOffset=0,this.lastBoatPos=0,this.currentBoatPos=0,this.boatStartPos=i,this.populateBackgroundContainer(this.riverSideForegroundItems,this.riverBankHolder1,!0),this.populateBackgroundContainer(this.riverSideForegroundItems,this.riverBankHolder2,!0),this.populateBackgroundContainer(this.jungleItems,this.jungleHolder1,!1),this.populateBackgroundContainer(this.jungleItems,this.jungleHolder2,!1),this.riverBankHolder1.position.x=this.currentBoatPos-this.boatStartPos,this.riverBankHolder2.position.x=this.riverBankHolder1.position.x+this.riverBankHolder1.width,this.jungleHolder1.position.x=this.riverBankHolder1.position.x,this.jungleHolder2.position.x=this.riverBankHolder2.position.x,this.jungleMidLayerHolder1.position.x=this.riverBankHolder1.position.x,this.jungleMidLayerHolder2.position.x=this.jungleMidLayerHolder1.position.x+this.jungleMidLayerHolder1.width,this.riverBankHolder1.addChild(this.riverBankFrames1),this.riverBankHolder2.addChild(this.riverBankFrames2),this.riverBankFrames1.position.y=108,this.riverBankFrames2.position.y=108}return e.prototype.tick=function(e){this.currentBoatPos=e;var t=this.currentBoatPos-this.lastBoatPos;this.currentBGOffset+=t,this.currentMidLayerOffset+=t-t*this.midLayerSpeedFactor,this.jungleMidLayerHolder1.position.x+=t*this.midLayerSpeedFactor,this.jungleMidLayerHolder2.position.x=this.jungleMidLayerHolder1.position.x+this.jungleMidLayerHolder1.width,this.jungleBackPos=this.currentBoatPos-this.boatStartPos,this.jungleBackLayer1.position.x=this.jungleBackPos,this.jungleBackLayer2.position.x=this.jungleBackLayer1.position.x+this.jungleBackLayer1.width,this.lastBoatPos=this.currentBoatPos,this.positionMidElements(),this.positionBGElements()},e.prototype.positionMidElements=function(){var e;if(this.currentMidLayerOffset>this.midContainerWidth)return e=this.currentMidLayerOffset-this.midContainerWidth,this.currentMidLayerOffset=e,this.jungleMidLayerHolder1.position.x=this.currentBoatPos-this.boatStartPos-e,void(this.jungleMidLayerHolder2.position.x=this.jungleMidLayerHolder1.position.x+this.jungleMidLayerHolder1.width)},e.prototype.positionBGElements=function(){var e;if(this.currentBGOffset>Game.stageWidth)return this.emptyBackgroundContainer(this.riverSideForegroundItems,this.riverBankHolder1),this.emptyBackgroundContainer(this.jungleItems,this.jungleHolder1),this.copyBackgroundContainerItems(this.riverSideForegroundItems,this.riverBankHolder2,this.riverBankHolder1),this.copyBackgroundContainerItems(this.jungleItems,this.jungleHolder2,this.jungleHolder1),e=this.currentBGOffset-Game.stageWidth,this.currentBGOffset=e,this.riverBankHolder1.position.x=this.currentBoatPos-this.boatStartPos-e,this.riverBankHolder2.position.x=this.riverBankHolder1.position.x+this.riverBankHolder1.width,this.jungleHolder1.position.x=this.riverBankHolder1.position.x,this.jungleHolder2.position.x=this.riverBankHolder2.position.x,this.populateBackgroundContainer(this.riverSideForegroundItems,this.riverBankHolder2,!0),void this.populateBackgroundContainer(this.jungleItems,this.jungleHolder2,!1)},e.prototype.shuffleArray=function(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[i],e[i]=t;return e},e.prototype.getItem=function(e){for(var t=0;t<e.length;t++)if(0==e[t].active)return e[t].active=!0,e[t]},e.prototype.emptyBackgroundContainer=function(e,t){for(var i=0;i<e.length;i++)1==e[i].active&&e[i].container==t&&(e[i].active=!1,e[i].container=null,t.removeChild(e[i].sprite))},e.prototype.copyBackgroundContainerItems=function(e,t,i){for(var s=0;s<e.length;s++)1==e[s].active&&e[s].container==t&&(t.removeChild(e[s].sprite),i.addChild(e[s].sprite),e[s].container=i)},e.prototype.populateBackgroundContainer=function(e,t,i){if(1!=Game.isLowEndIPad){e=this.shuffleArray(e);for(var s=Game.getRandom(2,7,!0),o=0;o<s;o++){var a=this.getItem(e);if(a){var r;1==i&&(r=Game.getRandom(50,t.height-100),a.sprite.position.y=r);var n=Game.getRandom(0+a.sprite.width/2,this.bgContainerWidth-a.sprite.width/2);a.sprite.position.x=n,a.container=t,t.addChild(a.sprite)}}}},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){for(e=0;e<this.riverSideForegroundItems.length;e++)Game.displayStore.returnPooledItem(this.riverSideForegroundItems[e].sprite);for(var e=0;e<this.jungleItems.length;e++)Game.displayStore.returnPooledItem(this.jungleItems[e].sprite);this.riverBankHolder1.removeAllChildren(),this.riverBankHolder2.removeAllChildren(),this.jungleMidLayerHolder1.removeAllChildren(),this.jungleMidLayerHolder2.removeAllChildren(),this.jungleHolder1.removeAllChildren(),this.jungleHolder2.removeAllChildren(),Game.displayStore.returnPooledItem(this.jungleMidLayerHolder1),Game.displayStore.returnPooledItem(this.jungleMidLayerHolder2),Game.displayStore.returnPooledItem(this.riverBankFrames1),Game.displayStore.returnPooledItem(this.riverBankFrames2),Game.displayStore.returnPooledItem(this.jungleMidLayerSprite1),Game.displayStore.returnPooledItem(this.jungleMidLayerSprite2),Game.displayStore.returnPooledItem(this.jungleMidLayerSprite3),Game.displayStore.returnPooledItem(this.jungleMidLayerSprite4),Game.displayStore.returnPooledItem(this.jungleBackLayer1),Game.displayStore.returnPooledItem(this.jungleBackLayer2),Game.displayStore.returnPooledItem(this.riverTile1),Game.displayStore.returnPooledItem(this.riverTile2),Game.displayStore.returnPooledItem(this.riverBankHolder1),Game.displayStore.returnPooledItem(this.riverBankHolder2),Game.displayStore.returnPooledItem(this.riverBankSprite1),Game.displayStore.returnPooledItem(this.riverBankSprite2),Game.displayStore.returnPooledItem(this.jungleHolder1),Game.displayStore.returnPooledItem(this.jungleHolder2),console.log("destroying level manager..")},e}(),RiverRangersDroneManager=function(){function e(e,t){this.spongebobAudioPlaying=!1,this.scene=e,this.mainContainer=t,this.maxDronePower=1e5,this.spawnDroneDistance=450,this.startDroneSpawnPos=600,this.removeBehindDistance=500,this.droneRotateEaseAmount=5,this.nextSpawnDistance=this.startDroneSpawnPos,this.allowEmoteReset=!0,this.smokePlaceCounter=0,this.smokePlaceCounterLimit=6,this.createSmoke(),this.droneDistanceAheadHover=[200,600]}return e.prototype.createSmoke=function(){if(1!=Game.isLowEndIPad){this.droneSmoke=new Array;for(var e,t=0;t<30;t++){e=0==Game.getRandom(0,1,!0)?Game.displayStore.getSprite("river-rangers-drone-smoke"):Game.displayStore.getSprite("river-rangers-drone-smoke-1");var i=Game.getRandom(1,2);this.droneSmoke.push({active:!1,sprite:e,alpha:1,scaleX:i,scaleY:i}),this.droneSmoke[t].sprite.position.y=-1e3,this.mainContainer.addChild(this.droneSmoke[t].sprite)}}},e.prototype.createDrones=function(){this.drones=new Array;for(var e=0;e<5;e++){var t=Game.displayStore.getContainer("river-rangers/drone-holder"),i=Game.displayStore.getSprite("river-rangers/drone-body"),s=Game.displayStore.getSprite("river-rangers/drone-body-winning"),o=Game.displayStore.getSprite("river-rangers/drone-body-scared"),a=Game.displayStore.getSprite("river-rangers/drone-body-scared-destroyed"),r=Game.displayStore.getSprite("river-rangers/drone-bomb-holder"),n=Game.displayStore.getSprite("river-rangers/drone-bomb"),h=this.scene.getDroneChassisPhysicsObj();t.addChild(i),t.addChild(s),t.addChild(o),t.addChild(a),n.position.y=-1e3,r.position.y=-1e3,t.position.y=-1e3,this.mainContainer.addChild(n),this.mainContainer.addChild(r),this.mainContainer.addChild(t),this.drones.push({droneHolder:t,droneChassisSprite:i,droneChassisSpriteScared:o,droneChassisSpriteScaredDestroyed:a,droneChassisSpriteWinning:s,droneChassisBody:h.chassisBody,droneChassisShape:h.chassisShape,active:!1,destroyed:!1,shot:!1,bombDroppped:!1,bombHit:!1,shotAngleCounter:0,shotAngleIncrement:Game.getRandom(.2,.7),spawnPos:[new PIXI.Point(0,0)],spawnPosIndex:0,bombHolderSprite:r,bombHolderBody:h.bombHolderBody,bombHolderShape:h.bombHolderShape,bombHolderHinge:h.bombHolderConstraint,bombSprite:n,bombBody:h.bombBody,bombShape:h.bombShape,bombHinge:h.bombConstraint,posChangeCounter:0,posChangeLimit:0,atEndLoc:!1,swipeSoundDelay:null,dropBombPos:0}),this.drones[e].droneChassisSprite.visible=!0,this.drones[e].droneChassisSpriteScared.visible=!1,this.drones[e].droneChassisSpriteScaredDestroyed.visible=!1,this.drones[e].droneChassisSpriteWinning.visible=!1}0==Game.isLowEndIPad&&(this.createSplashParticles(),this.createDroneParticles(),this.createBombGooParticles())},e.prototype.createSplashParticles=function(){this.waterSplashParticles=new Array;for(var e=0;e<4;e++)for(var t=0;t<5;t++){var i=Game.displayStore.getSprite("river-rangers/splash-"+String(e+1)),s=this.scene.getSplashPhysicsObj();this.mainContainer.addChild(i),this.waterSplashParticles.push({sprite:i,active:!1,waterParticleBody:s.body,waterParticleShape:s.shape})}this.waterSplashParticles=this.shuffleArray(this.waterSplashParticles)},e.prototype.createBombGooParticles=function(){this.bombGooParticles=new Array;for(var e=0;e<3;e++)for(var t=0;t<5;t++){var i=Game.displayStore.getSprite("river-rangers/goo-particle-"+String(e+1)),s=this.scene.getBombGooParticlePhysicsObj();this.mainContainer.addChild(i),this.bombGooParticles.push({sprite:i,active:!1,bombGooParticleBody:s.body,bombGooParticleShape:s.shape})}this.bombGooParticles=this.shuffleArray(this.bombGooParticles)},e.prototype.createDroneParticles=function(){this.damageDroneParticles=new Array;for(var e=0;e<3;e++)for(var t=0;t<5;t++){var i=Game.displayStore.getSprite("river-rangers/damage-"+String(e+1)),s=this.scene.getDroneParticlePhysicsObj();this.mainContainer.addChild(i),this.damageDroneParticles.push({sprite:i,active:!1,droneParticleBody:s.body,droneParticleShape:s.shape})}this.damageDroneParticles=this.shuffleArray(this.damageDroneParticles)},e.prototype.checkBomb=function(e){for(var t=!1,i=0;i<this.drones.length;i++)if(e==this.drones[i].bombBody&&0==this.drones[i].bombHit&&1==this.drones[i].bombDroppped){this.drones[i].bombHit=!0,t=!0;break}return t},e.prototype.droneSmokeParticles=function(e,t){if(1!=Game.isLowEndIPad)for(var i=0;i<this.droneSmoke.length;i++)if(0==this.droneSmoke[i].active)return this.droneSmoke[i].active=!0,this.droneSmoke[i].sprite.alpha=1,this.droneSmoke[i].sprite.position.x=e+Game.getRandom(-10,10),this.droneSmoke[i].sprite.position.y=t+Game.getRandom(-10,10),this.droneSmoke[i].sprite.scale.x=1,this.droneSmoke[i].sprite.scale.y=1,void(this.droneSmoke[i].sprite.rotation=Game.getRandom(0,2*Math.PI))},e.prototype.secondChanceUse=function(){for(var e=0;e<this.drones.length;e++)1==this.drones[e].active&&1==this.drones[e].bombDroppped&&this.scene.disarmBomb(this.drones[e].bombBody)},e.prototype.tick=function(e){if(e>this.nextSpawnDistance){this.nextSpawnDistance+=this.spawnDroneDistance,this.spawnDrone(e,this.nextSpawnDistance+Game.getRandom(this.droneDistanceAheadHover[0],this.droneDistanceAheadHover[1]));var t=this.scene.getDifficulty();t>=2&&this.spawnDrone(e,this.nextSpawnDistance+Game.getRandom(this.droneDistanceAheadHover[0],this.droneDistanceAheadHover[1])),t>=4&&this.spawnDrone(e,this.nextSpawnDistance+Game.getRandom(this.droneDistanceAheadHover[0],this.droneDistanceAheadHover[1]))}if(0==Game.isLowEndIPad)for(s=0;s<this.droneSmoke.length;s++)1==this.droneSmoke[s].active&&(this.droneSmoke[s].sprite.alpha<=0&&(this.droneSmoke[s].active=!1),this.droneSmoke[s].sprite.alpha=this.droneSmoke[s].sprite.alpha-.02,this.droneSmoke[s].sprite.position.y-=1,this.droneSmoke[s].sprite.scale.x+=.02,this.droneSmoke[s].sprite.scale.y+=.02,this.droneSmoke[s].sprite.rotation-=.02);for(s=0;s<this.drones.length;s++)if(0!=this.drones[s].active){if(1==this.drones[s].shot&&++this.smokePlaceCounter>=this.smokePlaceCounterLimit&&(this.smokePlaceCounter=0,this.droneSmokeParticles(this.drones[s].droneHolder.position.x,this.drones[s].droneHolder.position.y)),++this.drones[s].posChangeCounter>=this.drones[s].posChangeLimit){this.drones[s].posChangeCounter=0;var i=Game.getRandom(0,this.drones[s].spawnPos.length-1,!0);this.drones[s].spawnPosIndex=i}this.drones[s].droneHolder.position.x=this.drones[s].droneChassisBody.position[0],this.drones[s].droneHolder.position.y=Game.stageHeight-this.drones[s].droneChassisBody.position[1],this.drones[s].droneHolder.rotation=-this.drones[s].droneChassisBody.angle,this.drones[s].bombHolderSprite.position.x=this.drones[s].bombHolderBody.position[0],this.drones[s].bombHolderSprite.position.y=Game.stageHeight-this.drones[s].bombHolderBody.position[1],this.drones[s].bombHolderSprite.rotation=-this.drones[s].bombHolderBody.angle,this.drones[s].bombSprite.position.x=this.drones[s].bombBody.position[0],this.drones[s].bombSprite.position.y=Game.stageHeight-this.drones[s].bombBody.position[1],this.drones[s].bombSprite.rotation=-this.drones[s].bombBody.angle,0==this.drones[s].shot?this.moveDrone(s,e,this.drones[s].droneChassisBody,this.drones[s].droneHolder.position,this.drones[s].spawnPos[this.drones[s].spawnPosIndex]):this.droneFall(s)}if(0==Game.isLowEndIPad){for(s=0;s<this.waterSplashParticles.length;s++)0!=this.waterSplashParticles[s].active&&(this.waterSplashParticles[s].sprite.position.x=this.waterSplashParticles[s].waterParticleBody.position[0],this.waterSplashParticles[s].sprite.position.y=Game.stageHeight-this.waterSplashParticles[s].waterParticleBody.position[1],this.waterSplashParticles[s].sprite.rotation=-this.waterSplashParticles[s].waterParticleBody.angle);for(s=0;s<this.damageDroneParticles.length;s++)0!=this.damageDroneParticles[s].active&&(this.damageDroneParticles[s].sprite.position.x=this.damageDroneParticles[s].droneParticleBody.position[0],this.damageDroneParticles[s].sprite.position.y=Game.stageHeight-this.damageDroneParticles[s].droneParticleBody.position[1],this.damageDroneParticles[s].sprite.rotation=-this.damageDroneParticles[s].droneParticleBody.angle);for(var s=0;s<this.bombGooParticles.length;s++)0!=this.bombGooParticles[s].active&&(this.bombGooParticles[s].sprite.position.x=this.bombGooParticles[s].bombGooParticleBody.position[0],this.bombGooParticles[s].sprite.position.y=Game.stageHeight-this.bombGooParticles[s].bombGooParticleBody.position[1],this.bombGooParticles[s].sprite.rotation=-this.bombGooParticles[s].bombGooParticleBody.angle)}},e.prototype.moveDrone=function(e,t,i,s,o){var a=this.getAngle(s.x,s.y,o.x,o.y),r=this.getDistance(s.x,s.y,o.x,o.y),n=(s.x,o.x,2e3*r);n>this.maxDronePower&&(n=this.maxDronePower);var h=-i.velocity[0]/500;h<.5*-Math.PI&&(h=.5*-Math.PI),h>.5*Math.PI&&(h=.5*Math.PI),i.angle+=(h-i.angle)/this.droneRotateEaseAmount;var l=Math.cos(a)*(n/i.mass),p=Math.sin(a)*(n/i.mass),c=[2*-l,-p];if((l||p)&&(i.applyForce(c),0==this.drones[e].atEndLoc&&Math.abs(this.drones[e].droneHolder.position.x-this.drones[e].spawnPos[this.drones[e].spawnPosIndex].x)<100&&(this.drones[e].atEndLoc=!0,this.scene.armDrone(this.drones[e].droneChassisBody),this.scene.armBomb(this.drones[e].bombBody)),!(Math.abs(this.drones[e].droneHolder.position.x-this.drones[e].spawnPos[this.drones[e].spawnPosIndex].x)>100)))return this.drones[e].droneChassisBody.position[0]<t-this.removeBehindDistance?(this.drones[e].shot=!0,void this.scene.resetDrone(this.drones[e].droneChassisBody)):void(this.drones[e].droneHolder.position.x<t+(this.drones[e].dropBombPos-this.drones[e].droneHolder.position.y)/2&&0==this.drones[e].bombDroppped&&(this.drones[e].bombDroppped=!0,this.drones[e].bombBody.gravityScale=2,this.scene.dropBomb(this.drones[e].bombHinge)))},e.prototype.setPlanktonFace=function(e,t){switch(this.scene.setPlanktonFace(e),e){case"scared":1==this.drones[t].destroyed?(this.drones[t].droneChassisSpriteScared.visible=!1,this.drones[t].droneChassisSpriteScaredDestroyed.visible=!0,this.drones[t].droneChassisSpriteWinning.visible=!1,this.drones[t].droneChassisSprite.visible=!1):(this.drones[t].droneChassisSpriteScared.visible=!0,this.drones[t].droneChassisSpriteWinning.visible=!1,this.drones[t].droneChassisSprite.visible=!1,this.drones[t].droneChassisSpriteScaredDestroyed.visible=!1);break;case"neutral":this.drones[t].droneChassisSpriteScared.visible=!1,this.drones[t].droneChassisSpriteWinning.visible=!1,this.drones[t].droneChassisSprite.visible=!0,this.drones[t].droneChassisSpriteScaredDestroyed.visible=!1;break;case"winning":this.drones[t].droneChassisSpriteScared.visible=!1,this.drones[t].droneChassisSpriteWinning.visible=!0,this.drones[t].droneChassisSprite.visible=!1,this.drones[t].droneChassisSpriteScaredDestroyed.visible=!1}},e.prototype.droneFall=function(e){this.scene.spongebobExpression("happy"),this.drones[e].shotAngleCounter+=this.drones[e].shotAngleIncrement;var t=Math.sin(this.drones[e].shotAngleCounter)/5;this.drones[e].droneChassisBody.angle+=(t-this.drones[e].droneChassisBody.angle)/this.droneRotateEaseAmount},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.spawnDrone=function(e,t){for(var i=0;i<this.drones.length;i++)if(1!=this.drones[i].active){this.setPlanktonFace("neutral",i),this.drones[i].droneChassisBody.gravityScale=0,this.resetBody(this.drones[i].droneChassisBody),this.resetBody(this.drones[i].bombHolderBody),this.drones[i].bombHolderHinge.angle=0,this.drones[i].shotAngleCounter=0,this.drones[i].active=!0,this.drones[i].destroyed=!1,this.drones[i].shot=!1,this.drones[i].bombDroppped=!1,this.drones[i].bombHit=!1,this.drones[i].atEndLoc=!1,this.drones[i].bombSprite.visible=!0,this.drones[i].bombBody.gravityScale=1,this.scene.disarmBomb(this.drones[i].bombBody),this.scene.disarmDrone(this.drones[i].droneChassisBody);var s=this.scene.getDifficulty();s>3&&(s=3);var o=1+Game.getRandom(0,s,!0);this.drones[i].spawnPosIndex=0,this.drones[i].spawnPos=[];for(var a=0;a<o;a++)this.drones[i].spawnPos.push(new PIXI.Point(t,Game.getRandom(Game.stageHeight-200,Game.stageHeight-600)));return this.drones[i].droneChassisBody.position[0]=e-this.removeBehindDistance-Game.getRandom(0,400),this.drones[i].droneChassisBody.position[1]=Game.stageHeight-this.drones[i].spawnPos[this.drones[i].spawnPosIndex].y+Game.getRandom(0,300),this.drones[i].bombHolderBody.position[0]=this.drones[i].droneChassisBody.position[0],this.drones[i].bombHolderBody.position[1]=this.drones[i].droneChassisBody.position[1],this.drones[i].bombBody.position[0]=this.drones[i].droneChassisBody.position[0],this.drones[i].bombBody.position[1]=this.drones[i].droneChassisBody.position[1],this.drones[i].posChangeCounter=0,this.drones[i].posChangeLimit=Game.getRandom(30,120),this.drones[i].dropBombPos=Game.getRandom(300,550),this.scene.addDroneBodyToWorld(this.drones[i].droneChassisBody),this.scene.addDroneBodyToWorld(this.drones[i].bombHolderBody),this.scene.addDroneHingeToWorld(this.drones[i].bombHolderHinge),this.scene.addDroneBodyToWorld(this.drones[i].bombBody),this.scene.addDroneHingeToWorld(this.drones[i].bombHinge),this.drones[i].swipeSoundDelay=this.scene.killTween(this.drones[i].swipeSoundDelay),void(this.drones[i].swipeSoundDelay=TweenMax.delayedCall(.9,this.playDelayedSwipeSound))}},e.prototype.playDelayedSwipeSound=function(){Game.playSound("river-rangers/swipe.mp3")},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angularVelocity=0,e.angularForce=0,e.angle=0,e.velocity=[0,0],e.setZeroForce()},e.prototype.killWaterParticle=function(e){for(t=0;t<this.waterSplashParticles.length;t++)if(e==this.waterSplashParticles[t].waterParticleBody)return this.waterSplashParticles[t].active=!1,this.scene.removeDroneBodyFromWorld(this.waterSplashParticles[t].waterParticleBody),void(this.waterSplashParticles[t].sprite.position.y=-1e3);for(t=0;t<this.damageDroneParticles.length;t++)if(e==this.damageDroneParticles[t].droneParticleBody)return this.damageDroneParticles[t].active=!1,this.scene.removeDroneBodyFromWorld(this.damageDroneParticles[t].droneParticleBody),void(this.damageDroneParticles[t].sprite.position.y=-1e3);for(var t=0;t<this.bombGooParticles.length;t++)if(e==this.bombGooParticles[t].bombGooParticleBody)return this.bombGooParticles[t].active=!1,this.scene.removeDroneBodyFromWorld(this.bombGooParticles[t].bombGooParticleBody),void(this.bombGooParticles[t].sprite.position.y=-1e3)},e.prototype.fireSplashParticles=function(e){if(1!=Game.isLowEndIPad)for(var t=Game.getRandom(8,15,!0),i=0,s=0;s<this.waterSplashParticles.length;s++)if(1!=this.waterSplashParticles[s].active){this.waterSplashParticles[s].active=!0,this.waterSplashParticles[s].waterParticleBody.position[0]=e.x,this.waterSplashParticles[s].waterParticleBody.position[1]=Game.stageHeight-e.y,this.resetBody(this.waterSplashParticles[s].waterParticleBody),this.scene.addDroneBodyToWorld(this.waterSplashParticles[s].waterParticleBody);var o=Game.getRandom(-Math.PI,0),a=Math.cos(o),r=Math.sin(o),n=Game.getRandom(1e3,5e3);if(this.waterSplashParticles[s].waterParticleBody.applyImpulse([a*n,-r*n]),++i>=t)return}},e.prototype.fireDroneParticles=function(e){if(1!=Game.isLowEndIPad)for(var t=Game.getRandom(5,10,!0),i=0,s=0;s<this.damageDroneParticles.length;s++)if(1!=this.damageDroneParticles[s].active){this.damageDroneParticles[s].active=!0,this.damageDroneParticles[s].droneParticleBody.position[0]=e.x,this.damageDroneParticles[s].droneParticleBody.position[1]=Game.stageHeight-e.y,this.resetBody(this.damageDroneParticles[s].droneParticleBody),this.scene.addDroneBodyToWorld(this.damageDroneParticles[s].droneParticleBody);var o=Game.getRandom(0,2*Math.PI),a=Math.cos(o),r=Math.sin(o),n=Game.getRandom(1e3,5e3);if(this.damageDroneParticles[s].droneParticleBody.applyImpulse([a*n,-r*n]),++i>=t)return}},e.prototype.fireBombGooParticles=function(e,t){if(1!=Game.isLowEndIPad)for(var i=Game.getRandom(10,15,!0),s=0,o=0;o<this.bombGooParticles.length;o++)if(1!=this.damageDroneParticles[o].active){this.bombGooParticles[o].active=!0,this.bombGooParticles[o].bombGooParticleBody.position[0]=e,this.bombGooParticles[o].bombGooParticleBody.position[1]=t,this.resetBody(this.bombGooParticles[o].bombGooParticleBody),this.scene.addDroneBodyToWorld(this.bombGooParticles[o].bombGooParticleBody);var a=Game.getRandom(-Math.PI,0),r=Math.cos(a),n=Math.sin(a),h=Game.getRandom(2e3,5e3);if(this.bombGooParticles[o].bombGooParticleBody.applyImpulse([r*h,-n*h]),++s>=i)return}},e.prototype.shuffleArray=function(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[i],e[i]=t;return e},e.prototype.resetDrone=function(e){this.allowEmoteReset=!0;for(var t=0;t<this.drones.length;t++)if(this.drones[t].droneChassisBody==e&&1==this.drones[t].shot)return this.drones[t].active=!1,this.drones[t].destroyed=!1,this.drones[t].droneHolder.position.y=-1e3,this.scene.removeDroneBodyFromWorld(this.drones[t].droneChassisBody),this.scene.removeDroneBodyFromWorld(this.drones[t].bombHolderBody),this.scene.removeDroneHingeFromWorld(this.drones[t].bombHolderHinge),this.scene.removeDroneBodyFromWorld(this.drones[t].bombBody),void this.scene.removeDroneHingeFromWorld(this.drones[t].bombHinge)},e.prototype.explodeBomb=function(e){this.fireBombGooParticles(e.position[0],e.position[1]);for(var t=0;t<this.drones.length;t++)this.drones[t].bombBody==e&&(this.setPlanktonFace("winning",t),this.drones[t].bombSprite.visible=!1,this.scene.removeDroneBodyFromWorld(this.drones[t].bombBody))},e.prototype.checkBulletImpact=function(e){for(var t=0;t<this.drones.length;t++)if(this.drones[t].droneChassisBody==e)return this.droneShot(t),void this.fireDroneParticles(this.drones[t].droneHolder.position)},e.prototype.droneShot=function(e){if(this.scene.playDroneExplosion(this.drones[e].droneHolder.position.x,this.drones[e].droneHolder.position.y),0==this.drones[e].shot&&0==this.spongebobAudioPlaying&&(this.spongebobAudioPlaying=!0,1==(t=Game.getRandom(1,4,!0))?Game.playSound("river-rangers/sb-gotcha.mp3"):2==t?Game.playSound("river-rangers/sb-laugh.mp3"):3==t&&Game.playSound("river-rangers/sb-woah.mp3")),0==this.drones[e].shot){Game.playSound("river-rangers/crash.mp3",.5),Game.playSound("river-rangers/fizz.mp3",.5);var t=Game.getRandom(1,3,!0);1==t&&Game.playSound("river-rangers/plankton-sad3.mp3",.8)}this.drones[e].shot=!0,this.drones[e].destroyed=!0,this.setPlanktonFace("scared",e),this.drones[e].droneChassisBody.gravityScale=1.5,0==this.drones[e].bombDroppped&&this.scene.disarmBomb(this.drones[e].bombBody)},e.prototype.pause=function(){for(var e=0;e<this.drones.length;e++)this.scene.pauseResumeTween(this.drones[e].swipeSoundDelay,"pause")},e.prototype.resume=function(){for(var e=0;e<this.drones.length;e++)this.scene.pauseResumeTween(this.drones[e].swipeSoundDelay,"resume")},e.prototype.destroy=function(){for(e=0;e<this.drones.length;e++)Game.displayStore.returnPooledItem(this.drones[e].bombHolderSprite),Game.displayStore.returnPooledItem(this.drones[e].bombSprite),Game.displayStore.returnPooledItem(this.drones[e].droneHolder),Game.displayStore.returnPooledItem(this.drones[e].droneChassisSprite),Game.displayStore.returnPooledItem(this.drones[e].droneChassisSpriteScared),Game.displayStore.returnPooledItem(this.drones[e].droneChassisSpriteScaredDestroyed),Game.displayStore.returnPooledItem(this.drones[e].droneChassisSpriteWinning),this.drones[e].swipeSoundDelay=this.scene.killTween(this.drones[e].swipeSoundDelay);if(0==Game.isLowEndIPad){for(e=0;e<this.waterSplashParticles.length;e++)Game.displayStore.returnPooledItem(this.waterSplashParticles[e].sprite);for(e=0;e<this.damageDroneParticles.length;e++)Game.displayStore.returnPooledItem(this.damageDroneParticles[e].sprite);for(e=0;e<this.bombGooParticles.length;e++)Game.displayStore.returnPooledItem(this.bombGooParticles[e].sprite);for(var e=0;e<this.droneSmoke.length;e++)Game.displayStore.returnPooledItem(this.droneSmoke[e].sprite)}},e}(),RiverRangersTicketManager=function(){function e(e,t){this.scene=e,this.mainContainer=t,this.removeBehindDistance=500,this.tickets=new Array,this.spawnCounterLimit=240,this.spawnCounter=0,this.spawnAheadPos=800,this.heartSpawnCounter=0,this.heartSpawnCounterLimit=4}return e.prototype.createTickets=function(){this.tickets=new Array;for(var e=0;e<5;e++)this.tickets.push({ticket:null,active:!1})},e.prototype.tick=function(e){++this.spawnCounter>=this.spawnCounterLimit&&(this.spawnCounter=0,this.spawnTicketAhead(e));for(var t=0;t<this.tickets.length;t++)0!=this.tickets[t].active&&this.tickets[t].ticket.container.position.x<e&&this.collectTicket(t)},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.spawnTicketAhead=function(e){var t=!1,i=this.scene.getLives();i.currentLives!=i.totalLives&&++this.heartSpawnCounter>=this.heartSpawnCounterLimit&&(this.heartSpawnCounter=0,t=!0);for(var s=0;s<this.tickets.length;s++)if(0==this.tickets[s].active){var o;if(o=1==t?Game.ticketPool.getHeart():Game.ticketPool.getTicket(),0==t&&3==this.scene.game.gameLaunchMode)return;o.container.position.x=e+this.spawnAheadPos,o.container.position.y=510,this.mainContainer.addChild(o.container),this.tickets[s].ticket=o,this.tickets[s].active=!0;break}},e.prototype.collectTicket=function(e){this.tickets[e].ticket.collect(),1==this.tickets[e].ticket.isHeart&&this.scene.addLife(),this.tickets[e].active=!1,this.tickets[e].ticket=null},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angularVelocity=0,e.angularForce=0,e.angle=0,e.velocity=[0,0],e.setZeroForce()},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){if(0!=this.tickets.length)for(var e=0;e<this.tickets.length;e++)1==this.tickets[e].active&&Game.ticketPool.returnTicket(this.tickets[e].ticket)},e}(),RollerCoasterDoomTrackManager=function(){function e(e,t,i){this.scene=e,this.mainContainer=t,this.spawnAheadDistance=1250,this.removeBehindDistance=1200,this.loopSpacingCounterLimit=4,this.loopSpacingCounter=0,this.powerUpOn=!1,this.ticketOrHeartActive=!1,this.loopGapElapsed=!0,this.cartEnteredLoopSlice=!1,this.checkedBigLoopTopState=!1,this.obstacleAllowedThisSlice=!0,this.gameOverTriggered=!1,this.gameOverStopEaseAmount=20,this.currentTrackUID=0,this.loopRadiusSmall=200,this.loopRadiusLarge=280,this.loopApexAngle=Math.PI/2-Math.PI,this.loopFlatAngle=-Math.PI/2,this.minLoopVel=.02,this.velIndex=0,this.currentTrackLayDirection="flat",this.currentSliceObstacleType=null,this.cartVels=new Array;for(var s=18,o=0;o<30;o++)this.cartVels.push(s),s++;this.cartVelocityPowerUp=100,this.bumpCheckIndex=0,this.cartVelocity=this.cartVels[this.velIndex],this.loopSectionModifier=!1,this.loopSectionMotionID=0,this.motionParams={x:0,y:0,angle:0},this.motionParamsEaseAmount=10,this.firstSliceSet=!1,this.startPos=i,this.startPosCurrentSlice=i,this.currentPos=new PIXI.Point(this.startPos.x,this.startPos.y),this.loopSectionsSmall=new Array;for(o=0;o<1;o++)this.loopSectionsSmall.push({sprite:Game.displayStore.getSprite("roller-coaster-doom/loop-small"),active:!1,mineSprite:Game.displayStore.getSprite("roller-coaster-doom/small-loop-mine"),hit:!1,mineXPos:0,mineYPos:0});this.loopSectionsLarge=new Array;for(o=0;o<1;o++)this.loopSectionsLarge.push({sprite:Game.displayStore.getSprite("roller-coaster-doom/loop-large"),active:!1,mineSprite:Game.displayStore.getSprite("roller-coaster-doom/large-loop-mine"),hit:!1,mineXPos:0,mineYPos:0,mineLoc:null});this.trackSlices=new Array,this.createTrackSlices(0,"flat",0,0,"roller-coaster-doom/combo-slice-type-0",[0]),this.createTrackSlices(1,"up",30,0,"roller-coaster-doom/combo-slice-type-1",[0,1,2]),this.createTrackSlices(2,"up",62,0,"roller-coaster-doom/combo-slice-type-2",[2,1,3]),this.createTrackSlices(3,"up",98,0,"roller-coaster-doom/combo-slice-type-3",[2,3,4]),this.createTrackSlices(4,"up",142,0,"roller-coaster-doom/combo-slice-type-4",[3,4]),this.createTrackSlices(5,"down",0,-142,"roller-coaster-doom/combo-slice-type-5",[5,6]),this.createTrackSlices(6,"down",0,-98,"roller-coaster-doom/combo-slice-type-6",[5,6,7]),this.createTrackSlices(7,"down",0,-62,"roller-coaster-doom/combo-slice-type-7",[6,7,8]),this.createTrackSlices(8,"down",0,-30,"roller-coaster-doom/combo-slice-type-8",[7,8,0]),this.createTrackSlices(9,"loop-small",0,0,"roller-coaster-doom/combo-slice-type-9",[0]),this.createTrackSlices(10,"loop-large",0,0,"roller-coaster-doom/combo-slice-type-9",[0]),this.sliceWidth=170,this.checkObstacleRange=this.sliceWidth/2;for(o=0;o<8;o++)this.spawnSpecificTrackSlice(0,!1)}return e.prototype.createTrackSlices=function(e,t,i,s,o,a){for(var r=0;r<10;r++){var n=Game.displayStore.getContainer("roller-coaster-doom/slice-holder"),h=Game.displayStore.getSprite(o);n.addChild(h),this.trackSlices.push({uid:this.currentTrackUID,trackType:t,holder:n,sprite:h,active:!1,xPos:0,vertOffsetPre:i,vertOffsetPost:s,numID:e,validNextSlices:a,linkedLoopIndex:null,linkedObstacleType:null,linkedObstacleIndex:null,checkedObstacle:!1,checkObstacleXPos:0}),this.currentTrackUID++}},e.prototype.setInitialState=function(e){for(var t=0;t<this.trackSlices.length;t++)if(e>=this.trackSlices[t].xPos&&e<this.trackSlices[t].xPos+this.sliceWidth)return this.currentTrackSliceIndex=this.trackSlices[t].uid,void this.setMotionParams(!1)},e.prototype.spawnSpecificTrackSlice=function(e,t){for(var i=0;i<this.trackSlices.length;i++)if(this.trackSlices[i].numID==e&&0==this.trackSlices[i].active)return void this.layTrackSlice(this.trackSlices[i],t)},e.prototype.layRandomTrackSlice=function(){0==this.loopGapElapsed&&++this.loopSpacingCounter>=this.loopSpacingCounterLimit&&(this.loopGapElapsed=!0);for(var e=new Array,t=0;t<this.trackSlices[this.currentFarAheadSliceIndex].validNextSlices.length;t++)e.push(this.trackSlices[this.currentFarAheadSliceIndex].validNextSlices[t]);if(0==this.trackSlices[this.currentFarAheadSliceIndex].numID&&1==this.loopGapElapsed){var i,s=!1,o=0;if("small"==(i=Game.getRandom(0,1)<.5?"small":"large")){for(t=0;t<this.loopSectionsSmall.length;t++)1==this.loopSectionsSmall[t].active&&o++;o<this.loopSectionsSmall.length&&(s=!0)}else if("large"==i){for(t=0;t<this.loopSectionsLarge.length;t++)1==this.loopSectionsLarge[t].active&&o++;o<this.loopSectionsLarge.length&&(s=!0)}1==s&&(this.loopGapElapsed=!1,this.loopSpacingCounter=0,"small"==i?e.push(9):"large"==i&&e.push(10))}var a=!1;0!=this.trackSlices[this.currentFarAheadSliceIndex].numID&&9!=this.trackSlices[this.currentFarAheadSliceIndex].numID&&10!=this.trackSlices[this.currentFarAheadSliceIndex].numID||(a=!0),1==a&&("up"==this.currentTrackLayDirection&&e.push(8),"down"==this.currentTrackLayDirection&&e.push(1),"flat"==this.currentTrackLayDirection&&(e.push(1),e.push(8)));var r=e[Game.getRandom(0,e.length-1,!0)];this.spawnSpecificTrackSlice(r,!0)},e.prototype.removeLastSlice=function(){this.mainContainer.removeChild(this.trackSlices[this.currentFarBehindSliceIndex].holder),this.trackSlices[this.currentFarBehindSliceIndex].active=!1,"loop-small"!=this.trackSlices[this.currentFarBehindSliceIndex].trackType&&"loop-large"!=this.trackSlices[this.currentFarBehindSliceIndex].trackType||this.removeLoopElement(this.trackSlices[this.currentFarBehindSliceIndex].linkedLoopIndex,this.trackSlices[this.currentFarBehindSliceIndex].trackType),null!=this.trackSlices[this.currentFarBehindSliceIndex].linkedObstacleType&&null!=this.trackSlices[this.currentFarBehindSliceIndex].linkedObstacleIndex&&this.scene.removeObstacle(this.trackSlices[this.currentFarBehindSliceIndex].linkedObstacleType,this.trackSlices[this.currentFarBehindSliceIndex].linkedObstacleIndex);for(var e=new Array,t=0;t<this.trackSlices.length;t++)0!=this.trackSlices[t].active&&e.push({uid:this.trackSlices[t].uid,xPos:this.trackSlices[t].xPos});e=e.sort(function(e,t){return e.xPos-t.xPos}),this.currentFarBehindSliceIndex=e[0].uid},e.prototype.removeLoopElement=function(e,t){"loop-large"==t?(this.loopSectionsLarge[e].active=!1,this.mainContainer.removeChild(this.loopSectionsLarge[e].sprite),this.mainContainer.removeChild(this.loopSectionsLarge[e].mineSprite)):"loop-small"==t&&(this.loopSectionsSmall[e].active=!1,this.mainContainer.removeChild(this.loopSectionsSmall[e].sprite),this.mainContainer.removeChild(this.loopSectionsSmall[e].mineSprite))},e.prototype.layTrackSlice=function(e,t){0==this.firstSliceSet&&(this.firstSliceSet=!0,this.currentFarBehindSliceIndex=e.uid),e.active=!0,e.checkedObstacle=!1;var i=this.currentPos.x,s=this.currentPos.y-e.vertOffsetPre;e.holder.position.x=i,e.holder.position.y=s,e.xPos=i,this.currentPos.x=i+this.sliceWidth,this.currentPos.y=s-e.vertOffsetPost,this.mainContainer.addChild(e.holder),e.checkObstacleXPos=i+this.sliceWidth/2-this.checkObstacleRange/2;var o=this.currentFarAheadSliceIndex;if("loop-small"!=e.trackType&&"loop-large"!=e.trackType||(this.clearPreviousSliceObstacle(this.currentFarAheadSliceIndex),this.createLoopElement(i,s,e.uid,e.trackType)),o&&("up"!=this.trackSlices[o].trackType&&"down"!=this.trackSlices[o].trackType||(this.currentTrackLayDirection=this.trackSlices[o].trackType)),this.currentFarAheadSliceIndex=e.uid,e.linkedObstacleIndex=null,e.linkedObstacleType=null,0!=this.obstacleAllowedThisSlice){if(0!=t&&"loop-small"!=this.trackSlices[o].trackType&&"loop-large"!=this.trackSlices[o].trackType){var a=!1;if("loop-small"!=e.trackType&&"loop-large"!=e.trackType){var r;Game.getRandom(0,1)<.4&&(a=!0),1==a&&(r=Game.getRandom(0,1)<.5?"track":"air")}if(1==a){var n=this.scene.layTicketThisSlice(),h=!1;0==this.ticketOrHeartActive&&1==n&&(h=!0),1==h?(this.ticketOrHeartActive=!0,e.linkedObstacleType="ticket",this.scene.setTicketHandObstacle(i,s,e.numID,this.sliceWidth)):0==h&&(this.obstacleAllowedThisSlice=!1,e.linkedObstacleType=r,e.linkedObstacleIndex=this.scene.setTrackObstacle(e.linkedObstacleType,i,s,e.numID,this.sliceWidth))}}}else this.obstacleAllowedThisSlice=!0},e.prototype.clearPreviousSliceObstacle=function(e){"ticket"==this.trackSlices[e].linkedObstacleType&&(this.ticketOrHeartActive=!1),this.scene.removeObstacle(this.trackSlices[e].linkedObstacleType,this.trackSlices[e].linkedObstacleIndex),this.trackSlices[e].linkedObstacleIndex=null,this.trackSlices[e].linkedObstacleType=null},e.prototype.createLoopElement=function(e,t,i,s){"loop-small"==s?this.createLoopElementSmall(e,t,i):"loop-large"==s&&this.createLoopElementLarge(e,t,i)},e.prototype.collectTicket=function(){this.ticketOrHeartActive=!1,this.scene.collectTicket()},e.prototype.createLoopElementSmall=function(e,t,i){for(var s=0;s<this.loopSectionsSmall.length;s++)if(1!=this.loopSectionsSmall[s].active){this.loopSectionsSmall[s].active=!0;var o=e+this.sliceWidth/2,a=t+20-this.loopRadiusSmall;return this.loopSectionsSmall[s].sprite.position.x=o,this.loopSectionsSmall[s].sprite.position.y=t+20,this.loopSectionsSmall[s].mineSprite.position.x=o,this.loopSectionsSmall[s].mineSprite.position.y=a,this.loopSectionsSmall[s].mineXPos=o,this.loopSectionsSmall[s].mineYPos=a,this.loopSectionsSmall[s].mineSprite.visible=!0,this.mainContainer.addChild(this.loopSectionsSmall[s].sprite),this.mainContainer.addChild(this.loopSectionsSmall[s].mineSprite),void this.recordLoopSliceIndex(s,i)}},e.prototype.createLoopElementLarge=function(e,t,i){for(var s=0;s<this.loopSectionsLarge.length;s++)if(1!=this.loopSectionsLarge[s].active){this.loopSectionsLarge[s].active=!0;var o,a,r=e+this.sliceWidth/2;return"top"==(a=Game.getRandom(0,1)<.5?"top":"bottom")?(o=t-2*this.loopRadiusLarge+30,this.loopSectionsLarge[s].mineSprite.scale.y=1):"bottom"==a&&(o=t-30,this.loopSectionsLarge[s].mineSprite.scale.y=-1),this.loopSectionsLarge[s].mineLoc=a,this.loopSectionsLarge[s].sprite.position.x=r,this.loopSectionsLarge[s].sprite.position.y=t+20,this.loopSectionsLarge[s].mineSprite.position.x=r,this.loopSectionsLarge[s].mineSprite.position.y=o,this.loopSectionsLarge[s].mineXPos=r,this.loopSectionsLarge[s].mineYPos=o,this.loopSectionsLarge[s].mineSprite.visible=!0,this.mainContainer.addChild(this.loopSectionsLarge[s].sprite),this.mainContainer.addChild(this.loopSectionsLarge[s].mineSprite),void this.recordLoopSliceIndex(s,i)}},e.prototype.recordLoopSliceIndex=function(e,t){for(var i=0;i<this.trackSlices.length;i++)if(this.trackSlices[i].uid==t)return void(this.trackSlices[i].linkedLoopIndex=e)},e.prototype.setVeloctyState=function(e){1!=this.gameOverTriggered&&1!=this.powerUpOn&&(this.velIndex=e,this.velIndex>this.cartVels.length-1&&(this.velIndex=this.cartVels.length-1),this.cartVelocity=this.cartVels[this.velIndex])},e.prototype.tick=function(e){if(1==this.gameOverTriggered&&(this.cartVelocity+=(0-this.cartVelocity)/this.gameOverStopEaseAmount,this.loopVel=this.cartVelocity/this.currentLoopRadius,this.cartVelocity<=.1))this.scene.goToGameOver();else if(e>this.bumpPoints[this.bumpCheckIndex].pos&&0==this.bumpPoints[this.bumpCheckIndex].bumped&&(this.scene.toggleBumpCart(),this.bumpPoints[this.bumpCheckIndex].bumped=!0,++this.bumpCheckIndex>this.bumpPoints.length-1&&(this.bumpCheckIndex=this.bumpPoints.length-1)),this.motionParams.x=this.cartVelocity*Math.cos(this.motionParams.angle),this.motionParams.y=this.cartVelocity*Math.sin(this.motionParams.angle),this.scene.setCurrentVelocity(this.cartVelocity),e+this.spawnAheadDistance>this.currentPos.x&&this.layRandomTrackSlice(),e>this.trackSlices[this.currentFarBehindSliceIndex].xPos+this.removeBehindDistance&&this.removeLastSlice(),1==this.loopSectionModifier){if(0==this.loopSectionMotionID&&e>=this.loopSectionChangePos&&(this.loopSectionMotionID=1,this.checkCartHitMineLoopSmall(),this.checkCartHitMineLoopLarge("bottom")),1==this.loopSectionMotionID&&(this.loopAngle>this.loopApexAngle&&(this.loopVel-=this.loopVelModifier,this.loopVel<=this.minLoopVel&&(this.loopVel=this.minLoopVel)),this.loopAngle<this.loopApexAngle&&(this.checkCartHitMineLoopLarge("top"),this.checkedBigLoopTopState=!0,this.loopVel+=this.loopVelModifier),this.loopAngle-=this.loopVel,this.loopAngle<this.loopSectionChangeAngle))return this.loopSectionMotionID=2,this.loopSectionModifier=!1,this.scene.correctCartAnglePostLoop(),this.checkCartHitMineLoopLarge("bottom"),void this.setMotionParams(!0)}else if(0==this.loopSectionModifier){e>this.trackSlices[this.currentTrackSliceIndex].xPos&&this.checkCartTicket();var t=this.trackSlices[this.currentTrackSliceIndex].checkObstacleXPos,i=this.trackSlices[this.currentTrackSliceIndex].checkObstacleXPos+this.checkObstacleRange;if(e>t&&e<i&&this.checkCartState(),e<this.trackSlices[this.currentTrackSliceIndex].xPos+this.sliceWidth)return;for(var s=0;s<this.trackSlices.length;s++)if(0!=this.trackSlices[s].active&&e>=this.trackSlices[s].xPos&&e<this.trackSlices[s].xPos+this.sliceWidth)return this.currentTrackSliceIndex=this.trackSlices[s].uid,void this.setMotionParams(!1)}},e.prototype.triggerGameOver=function(){this.gameOverTriggered=!0},e.prototype.secondChanceUse=function(){this.gameOverTriggered=!1,this.cartVelocity=this.cartVels[this.velIndex]},e.prototype.activatePowerUpEffect=function(){this.powerUpOn=!0,this.cartVelocity=this.cartVelocityPowerUp,this.loopVel=this.cartVelocity/this.currentLoopRadius},e.prototype.deactivatePowerUpEffect=function(){this.powerUpOn=!1,this.cartVelocity=this.cartVels[this.velIndex],this.loopVel=this.cartVelocity/this.currentLoopRadius},e.prototype.checkCartHitMineLoopSmall=function(){var e=this.trackSlices[this.currentTrackSliceIndex].linkedLoopIndex;if("loop-small"==this.trackSlices[this.currentTrackSliceIndex].trackType&&1==this.scene.getLiftedState()){if(0==this.cartEnteredLoopSlice)return;this.cartEnteredLoopSlice=!1,this.loopSectionsSmall[e].mineSprite.visible=!1,this.scene.loopMineHit(new PIXI.Point(this.loopSectionsSmall[e].mineXPos,this.loopSectionsSmall[e].mineYPos))}},e.prototype.checkCartHitMineLoopLarge=function(e){var t=this.trackSlices[this.currentTrackSliceIndex].linkedLoopIndex;this.loopSectionsLarge[t].mineLoc==e&&("top"==e&&1==this.checkedBigLoopTopState||"loop-large"==this.trackSlices[this.currentTrackSliceIndex].trackType&&1==this.cartEnteredLoopSlice&&0==this.scene.getLiftedState()&&(this.cartEnteredLoopSlice=!1,this.loopSectionsLarge[t].mineSprite.visible=!1,this.scene.loopMineHit(new PIXI.Point(this.loopSectionsLarge[t].mineXPos,this.loopSectionsLarge[t].mineYPos))))},e.prototype.checkSpringInSmallLoop=function(e){var t=this.trackSlices[this.currentTrackSliceIndex].linkedLoopIndex;if("loop-small"==this.trackSlices[this.currentTrackSliceIndex].trackType&&1==e){if(0==this.cartEnteredLoopSlice)return;this.cartEnteredLoopSlice=!1,this.loopSectionsSmall[t].mineSprite.visible=!1,this.scene.loopMineHit(new PIXI.Point(this.loopSectionsSmall[t].mineXPos,this.loopSectionsSmall[t].mineYPos))}},e.prototype.checkCartState=function(){1!=this.trackSlices[this.currentTrackSliceIndex].checkedObstacle&&(this.trackSlices[this.currentTrackSliceIndex].checkedObstacle=!0,null!=this.trackSlices[this.currentTrackSliceIndex].linkedObstacleType?this.currentSliceObstacleType=this.trackSlices[this.currentTrackSliceIndex].linkedObstacleType:this.currentSliceObstacleType=null,this.scene.checkObstacleImpact(this.currentSliceObstacleType))},e.prototype.checkCartTicket=function(){1!=this.trackSlices[this.currentTrackSliceIndex].checkedObstacle&&"ticket"==this.trackSlices[this.currentTrackSliceIndex].linkedObstacleType&&(this.trackSlices[this.currentTrackSliceIndex].checkedObstacle=!0,this.collectTicket())},e.prototype.cartInCheckZone=function(e){var t=!1;if(this.trackSlices[this.currentTrackSliceIndex]){var i=this.trackSlices[this.currentTrackSliceIndex].checkObstacleXPos,s=this.trackSlices[this.currentTrackSliceIndex].checkObstacleXPos+this.checkObstacleRange;return null!=this.trackSlices[this.currentTrackSliceIndex].linkedObstacleType&&e>i&&e<s&&(t=!0),t}},e.prototype.getObstacleType=function(){return this.trackSlices[this.currentTrackSliceIndex].linkedObstacleType},e.prototype.getObstacleIndex=function(){return this.trackSlices[this.currentTrackSliceIndex].linkedObstacleIndex},e.prototype.setMotionParams=function(e){this.bumpPoints=new Array;for(var t=0;t<4;t++)this.bumpPoints.push({pos:this.trackSlices[this.currentTrackSliceIndex].xPos+this.sliceWidth/4*t,bumped:!1});this.scene.adjustCamera(this.trackSlices[this.currentTrackSliceIndex].numID),this.bumpCheckIndex=0;var i,s=new PIXI.Point(this.trackSlices[this.currentTrackSliceIndex].xPos,this.trackSlices[this.currentTrackSliceIndex].holder.position.y-this.trackSlices[this.currentTrackSliceIndex].vertOffsetPre),o=new PIXI.Point(this.trackSlices[this.currentTrackSliceIndex].xPos+this.sliceWidth,this.trackSlices[this.currentTrackSliceIndex].holder.position.y-this.trackSlices[this.currentTrackSliceIndex].vertOffsetPost),a=this.scene.getCurrentCartPos();if("up"==this.trackSlices[this.currentTrackSliceIndex].trackType&&(o.x+=s.x-a.x,o.y-=s.y+this.trackSlices[this.currentTrackSliceIndex].vertOffsetPre-(a.y-this.trackSlices[this.currentTrackSliceIndex].vertOffsetPre),i=this.getAngle(o.x,o.y,s.x,s.y),this.motionParams.angle=i),"down"==this.trackSlices[this.currentTrackSliceIndex].trackType&&(o.x+=s.x-a.x,o.y+=s.y-a.y,i=0-this.getAngle(o.x,o.y,s.x,s.y),this.motionParams.angle=i),"flat"!=this.trackSlices[this.currentTrackSliceIndex].trackType&&1!=e||(o.x+=s.x-a.x,o.y+=s.y-a.y,i=0-this.getAngle(o.x,o.y,s.x,s.y),this.motionParams.angle=i),"loop-small"==this.trackSlices[this.currentTrackSliceIndex].trackType||"loop-large"==this.trackSlices[this.currentTrackSliceIndex].trackType){if(1==e)return void(1==this.cartEnteredLoopSlice&&this.scene.missedMineLoop());this.cartEnteredLoopSlice=!0,this.checkedBigLoopTopState=!1,this.startPosCurrentSlice=new PIXI.Point(this.trackSlices[this.currentTrackSliceIndex].xPos,this.trackSlices[this.currentTrackSliceIndex].holder.position.y),this.setCurrentLoopParams(this.startPosCurrentSlice,this.trackSlices[this.currentTrackSliceIndex].trackType),o.x+=s.x-a.x,o.y+=s.y-a.y,i=0-this.getAngle(o.x,o.y,s.x,s.y),this.motionParams.angle=i}},e.prototype.setCurrentLoopParams=function(e,t){var i;"loop-small"==t?(this.currentLoopRadius=this.loopRadiusSmall,i=80):"loop-large"==t&&(this.currentLoopRadius=this.loopRadiusLarge,i=120),this.loopSectionModifier=!0,this.loopSectionMotionID=0,this.loopSectionChangePos=e.x+this.sliceWidth/2,this.loopSectionChangeAngle=1.5*-Math.PI,this.loopCentre=new PIXI.Point(this.loopSectionChangePos,e.y-this.currentLoopRadius),this.loopAngle=0+.5*Math.PI,this.loopVel=this.cartVelocity/this.currentLoopRadius,this.loopVelModifier=this.loopVel/i},e.prototype.getAngle=function(e,t,i,s){var o=e-i,a=s-t;return Math.atan2(a,o)},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){for(e=0;e<this.trackSlices.length;e++)Game.displayStore.returnPooledItem(this.trackSlices[e].holder),Game.displayStore.returnPooledItem(this.trackSlices[e].sprite);for(e=0;e<this.loopSectionsSmall.length;e++)Game.displayStore.returnPooledItem(this.loopSectionsSmall[e].sprite),Game.displayStore.returnPooledItem(this.loopSectionsSmall[e].mineSprite);for(var e=0;e<this.loopSectionsLarge.length;e++)Game.displayStore.returnPooledItem(this.loopSectionsLarge[e].sprite),Game.displayStore.returnPooledItem(this.loopSectionsLarge[e].mineSprite)},e}(),RollerCoasterDoomObstacleManager=function(){function e(e,t){this.scene=e,this.mainContainer=t,this.trackMines=new Array,this.airMines=new Array,this.supportStartingRotation=0,this.supportStartingRotationIncrease=.08,this.ticketCounter=0,this.ticketHeartAmount=3,this.mineFrames=Game.displayStore.getAnimatedSprite("roller-coaster-doom/mine-frames"),this.mineFrames.animationSpeed=.3,this.mineFrames.loop=!1,this.mineFrames.scale.x=2,this.mineFrames.scale.y=2,this.mainContainer.addChild(this.mineFrames);for(var i=0;i<6;i++)this.createTrackMine(i),this.createAirMine(i)}return e.prototype.createTrackMine=function(e){this.trackMines.push({holder:Game.displayStore.getContainer("roller-coaster-doom/track-mine-holder"),sprite:Game.displayStore.getSprite("roller-coaster-doom/track-mine"),active:!1,hit:!1}),this.trackMines[e].holder.addChild(this.trackMines[e].sprite)},e.prototype.createAirMine=function(e){this.airMines.push({holder:Game.displayStore.getContainer("roller-coaster-doom/air-mine-holder"),sprite:Game.displayStore.getSprite("roller-coaster-doom/air-mine"),balloonSprite:Game.displayStore.getSprite("roller-coaster-doom/air-mine-balloon"),active:!1,hit:!1,bopCounter:0,bopIncrement:Game.getRandom(.05,.1)*(Game.fps/60)}),this.airMines[e].holder.addChild(this.airMines[e].balloonSprite),this.airMines[e].holder.addChild(this.airMines[e].sprite)},e.prototype.tick=function(e){for(var t=0;t<this.airMines.length;t++)0!=this.airMines[t].active&&(0==this.airMines[t].hit?(this.airMines[t].bopCounter+=this.airMines[t].bopIncrement,this.airMines[t].holder.position.y+=Math.sin(this.airMines[t].bopCounter)/2):1==this.airMines[t].hit&&(this.airMines[t].balloonSprite.position.y-=2))},e.prototype.setTrackObstacle=function(e,t,i,s,o){var a,r=this.getSliceAngle(s);if(a=Math.tan(Math.abs(r))*(o/2),"air"==e)for(n=0;n<this.airMines.length;n++)if(1!=this.airMines[n].active)return this.airMines[n].active=!0,this.airMines[n].hit=!1,this.airMines[n].holder.position.x=t+o/2,this.airMines[n].holder.position.y=i+a-220,this.mainContainer.addChild(this.airMines[n].holder),this.airMines[n].balloonSprite.position.x=0,this.airMines[n].balloonSprite.position.y=0,this.airMines[n].sprite.visible=!0,this.airMines[n].bopCounter=Game.getRandom(0,2*Math.PI),n;if("track"==e)for(var n=0;n<this.trackMines.length;n++)if(1!=this.trackMines[n].active)return this.trackMines[n].active=!0,this.trackMines[n].hit=!1,this.trackMines[n].holder.position.x=t+o/2,this.trackMines[n].holder.position.y=i+a+40,this.trackMines[n].holder.rotation=r,this.trackMines[n].sprite.visible=!0,this.mainContainer.addChild(this.trackMines[n].holder),n},e.prototype.getSliceAngle=function(e){var t;switch(e){case 0:t=0;break;case 1:t=Math.PI/180*-10;break;case 2:t=Math.PI/180*-20;break;case 3:t=Math.PI/180*-30;break;case 4:t=Math.PI/180*-40;break;case 5:t=Math.PI/180*40;break;case 6:t=Math.PI/180*30;break;case 7:t=Math.PI/180*20;break;case 8:t=Math.PI/180*10}return t},e.prototype.setTrackObstacleTicketHand=function(e,t,i,s){var o,a=this.getSliceAngle(i);o=Math.tan(Math.abs(a))*(s/2);var r=this.scene.getCurrentLives(),n=!1;this.ticketCounter>=this.ticketHeartAmount&&(n=!0,this.ticketCounter=0),r.current!=r.total&&1==n?this.ticket=Game.ticketPool.getHeart():this.ticket=Game.ticketPool.getTicket(),this.ticketCounter++,this.ticket.container.position.x=e+s/2,this.ticket.container.position.y=t+o-50,this.mainContainer.addChild(this.ticket.container)},e.prototype.removeObstacle=function(e,t){"air"==e?(this.airMines[t].active=!1,this.mainContainer.removeChild(this.airMines[t].holder)):"track"==e?(this.trackMines[t].active=!1,this.mainContainer.removeChild(this.trackMines[t].holder)):"ticket"==e&&this.ticket.resetState()},e.prototype.hitObstacle=function(e,t){console.log("HITTING OBSTACLE.............................. >>>>>>>  ",e,t);var i=new PIXI.Point(0,0);if("air"==e){if(0==this.airMines[t].active)return i;this.airMines[t].sprite.visible=!1,i=this.airMines[t].holder.position,this.playMineFrames(i),this.airMines[t].hit=!0}else if("track"==e){if(0==this.trackMines[t].active)return i;this.trackMines[t].sprite.visible=!1,i=this.trackMines[t].holder.position,this.playMineFrames(i),this.trackMines[t].hit=!0}return i},e.prototype.playMineFrames=function(e){this.mineFrames.position.x=e.x,this.mineFrames.position.y=e.y-30,this.mineFrames.gotoAndPlay(1)},e.prototype.collectTicket=function(){1==this.ticket.isHeart&&this.scene.pickedUpHeart(),this.ticket.collect()},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){Game.ticketPool.returnTicket(this.ticket);for(e=0;e<this.trackMines.length;e++)Game.displayStore.returnPooledItem(this.trackMines[e].holder),Game.displayStore.returnPooledItem(this.trackMines[e].sprite);for(var e=0;e<this.airMines.length;e++)Game.displayStore.returnPooledItem(this.airMines[e].sprite),Game.displayStore.returnPooledItem(this.airMines[e].holder),Game.displayStore.returnPooledItem(this.airMines[e].balloonSprite)},e}(),RollerCoasterDoomInputManager=function(){function e(e){this.scene=e,this.hitAreaSprite=Game.displayStore.getSprite("roller-coaster-doom/blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite)}return e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t)}),e.on("mouseupoutside",function(e){t.inputUp(t)})):(e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t)}),e.on("touchendoutside",function(e){t.inputUp(t)}))},e.prototype.inputDown=function(e,t){e.scene.inputActivated()},e.prototype.inputUp=function(e){e.scene.inputDeactivated()},e.prototype.inputMove=function(e,t){},e.prototype.tick=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},e}(),RollerCoasterBackgroundManager=function(){function e(e,t,i){this.scene=e,this.bgContainer=t,this.cartStartYPos=i,this.vertParallaxRange=new PIXI.Point(-200,200),this.cartVelocity=0,this.maxRockVertPos=550,this.maxHillVertPos=850,this.maxFrontHillVertPos=950,this.maxBackHillVertPos=750,this.rockScrollSpeed=60/Game.fps*.5,this.spawnRockPos=Game.stageWidth+300,this.baseHillPos=700,this.createElements(),this.spawnRocksInitial(),this.spawnCloudsInitial(),this.backgroundFog=Game.displayStore.getSprite("roller-coaster-doom/background-fog"),this.backgroundFog.position.x=Game.stageWidth/2,this.backgroundFog.position.y=500,this.bgContainer.addChild(this.backgroundFog),this.frontSpeed=2,this.middleSpeed=1,this.backSpeed=.5,this.hills=new Array,this.hills.push({x:0,y:this.baseHillPos,speed:this.backSpeed,sprite:Game.displayStore.getSprite("roller-coaster-doom/foreground-hill-2"),spawnPos:0,initSpawn:0,isFront:!0}),this.hills.push({x:Game.stageWidth+512,y:this.baseHillPos,speed:this.backSpeed,sprite:Game.displayStore.getSprite("roller-coaster-doom/foreground-hill-2"),spawnPos:1536,initSpawn:1536,isFront:!1}),this.hills.push({x:0,y:this.baseHillPos+50,speed:this.middleSpeed,sprite:Game.displayStore.getSprite("roller-coaster-doom/foreground-hill-1"),spawnPos:0,initSpawn:0,isFront:!0}),this.hills.push({x:Game.stageWidth+512,y:this.baseHillPos+50,speed:this.middleSpeed,sprite:Game.displayStore.getSprite("roller-coaster-doom/foreground-hill-1"),spawnPos:1536,initSpawn:1536,isFront:!1}),this.hills.push({x:0,y:this.baseHillPos+100,speed:this.frontSpeed,sprite:Game.displayStore.getSprite("roller-coaster-doom/foreground-hill-0"),spawnPos:0,initSpawn:0,isFront:!0}),this.hills.push({x:Game.stageWidth+512,y:this.baseHillPos+100,speed:this.frontSpeed,sprite:Game.displayStore.getSprite("roller-coaster-doom/foreground-hill-0"),spawnPos:1536,initSpawn:1536,isFront:!1});for(var s=0;s<this.hills.length;s++)this.bgContainer.addChild(this.hills[s].sprite),this.hills[s].sprite.position.x=this.hills[s].x,this.hills[s].sprite.position.y=this.hills[s].y,this.hills[s].sprite.width=1536}return e.prototype.createElements=function(){this.lastPosRock=0,this.rocks=new Array;for(e=0;e<8;e++)for(t=0;t<2;t++)this.rocks.push({sprite:Game.displayStore.getSprite("roller-coaster-doom/rock-"+String(e)),active:!1,removePos:null});this.clouds=new Array;for(var e=0;e<5;e++)for(var t=0;t<2;t++){var i=Game.getRandom(.5,1.5);this.clouds.push({sprite:Game.displayStore.getSprite("roller-coaster-doom/cloud-"+String(e)),active:!1,removePos:null,floatSpeed:i/40,scale:i})}this.clouds=this.shuffleArray(this.clouds),this.rocks=this.shuffleArray(this.rocks)},e.prototype.spawnRocksInitial=function(){for(var e=0;e<5;e++)this.spawnRock(!0)},e.prototype.spawnCloudsInitial=function(){for(var e=0;e<5;e++)this.spawnCloud(!0)},e.prototype.spawnRock=function(e){for(var t=0;t<this.rocks.length;t++)if(1!=this.rocks[t].active){this.rocks[t].active=!0;var i,s=Game.getRandom(0,3,!0),o=Game.getRandom(this.maxRockVertPos,Game.stageHeight);i=1==e?this.lastPosRock+this.rocks[t].sprite.width/2+Game.getRandom(0,300):this.spawnRockPos+this.rocks[t].sprite.width/2+Game.getRandom(0,300),this.rocks[t].sprite.position.x=i,this.rocks[t].sprite.position.y=o,this.bgContainer.children.length>=3?this.bgContainer.addChildAt(this.rocks[t].sprite,s):this.bgContainer.addChild(this.rocks[t].sprite),this.rocks[t].removePos=-this.rocks[t].sprite.width/2,this.lastPosRock=i,this.currentLastRockIndex=t;break}this.rocks=this.shuffleArray(this.rocks)},e.prototype.spawnCloud=function(e){for(var t=0;t<this.clouds.length;t++)if(1!=this.clouds[t].active){this.clouds[t].active=!0;var i,s=Game.getRandom(0,3,!0),o=Game.getRandom(40,this.maxRockVertPos-50);i=1==e?Game.getRandom(100,Game.stageWidth):Game.getRandom(Game.stageWidth+this.clouds[t].sprite.width/2,Game.stageWidth+this.clouds[t].sprite.width/2+1e3),this.clouds[t].sprite.position.x=i,this.clouds[t].sprite.position.y=o,this.clouds[t].sprite.scale.x=.6,this.clouds[t].sprite.scale.y=.6,this.bgContainer.children.length>=3?this.bgContainer.addChildAt(this.clouds[t].sprite,s):this.bgContainer.addChild(this.clouds[t].sprite),this.clouds[t].removePos=-this.clouds[t].sprite.width/2;break}},e.prototype.shuffleArray=function(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[i],e[i]=t;return e},e.prototype.tick=function(e){this.cartVelocity=this.scene.getCartVelocity(),this.moveClouds(this.cartVelocity),this.moveHills(e),this.moveRocks(this.cartVelocity),this.vertParallax(e.y)},e.prototype.moveRocks=function(e){for(var t=this.rockScrollSpeed*e/10,i=0;i<this.rocks.length;i++)0!=this.rocks[i].active&&(this.rocks[i].sprite.position.x-=t,this.rocks[i].sprite.position.x<this.rocks[i].removePos&&this.removeRock(i));this.rocks[this.currentLastRockIndex].sprite.position.x<=this.spawnRockPos&&this.spawnRock(!1)},e.prototype.moveHills=function(e){for(var t=0;t<this.hills.length;t++){if(this.hills[t].sprite.position.x-=this.hills[t].speed*this.cartVelocity/5,this.hills[t].spawnPos-=this.hills[t].speed*this.cartVelocity/5,this.hills[t].spawnPos<-1791)switch(t){case 0:this.hills[0].sprite.position.x=this.hills[1].sprite.position.x+this.hills[1].sprite.width-20,this.hills[0].initSpawn=this.hills[0].sprite.position.x,this.hills[0].spawnPos=this.hills[0].initSpawn,this.hills[0].isFront=!1,this.hills[1].isFront=!0;break;case 1:this.hills[1].sprite.position.x=this.hills[0].sprite.position.x+this.hills[1].sprite.width-20,this.hills[1].initSpawn=this.hills[1].sprite.position.x,this.hills[1].spawnPos=this.hills[1].initSpawn,this.hills[0].isFront=!0,this.hills[1].isFront=!1;break;case 2:this.hills[2].sprite.position.x=this.hills[3].sprite.position.x+this.hills[2].sprite.width-20,this.hills[2].initSpawn=this.hills[2].sprite.position.x,this.hills[2].spawnPos=this.hills[2].initSpawn,this.hills[2].isFront=!1,this.hills[3].isFront=!0;break;case 3:this.hills[3].sprite.position.x=this.hills[2].sprite.position.x+this.hills[2].sprite.width-20,this.hills[3].initSpawn=this.hills[3].sprite.position.x,this.hills[3].spawnPos=this.hills[3].initSpawn,this.hills[3].isFront=!1,this.hills[2].isFront=!0;break;case 4:this.hills[4].sprite.position.x=this.hills[5].sprite.position.x+this.hills[4].sprite.width-20,this.hills[4].initSpawn=this.hills[4].sprite.position.x,this.hills[4].spawnPos=this.hills[4].initSpawn,this.hills[4].isFront=!1,this.hills[5].isFront=!0;break;case 5:this.hills[5].sprite.position.x=this.hills[4].sprite.position.x+this.hills[5].sprite.width-20,this.hills[5].initSpawn=this.hills[5].sprite.position.x,this.hills[5].spawnPos=this.hills[5].initSpawn,this.hills[5].isFront=!1,this.hills[4].isFront=!0}switch(t){case 0:1==this.hills[0].isFront&&(this.hills[1].sprite.position.x=this.hills[0].sprite.position.x+this.hills[0].sprite.width-20);case 1:1==this.hills[1].isFront&&(this.hills[0].sprite.position.x=this.hills[1].sprite.position.x+this.hills[0].sprite.width-20);break;case 2:1==this.hills[2].isFront&&(this.hills[3].sprite.position.x=this.hills[2].sprite.position.x+this.hills[3].sprite.width-20);break;case 3:1==this.hills[3].isFront&&(this.hills[2].sprite.position.x=this.hills[3].sprite.position.x+this.hills[2].sprite.width-20);break;case 4:1==this.hills[4].isFront&&(this.hills[5].sprite.position.x=this.hills[4].sprite.position.x+this.hills[5].sprite.width-20);break;case 5:1==this.hills[5].isFront&&(this.hills[4].sprite.position.x=this.hills[5].sprite.position.x+this.hills[4].sprite.width-20)}}},e.prototype.moveClouds=function(e){for(var t=0;t<this.clouds.length;t++)0!=this.clouds[t].active&&(this.clouds[t].sprite.position.x-=this.clouds[t].floatSpeed*e,this.clouds[t].sprite.position.x<this.clouds[t].removePos&&this.removeCloud(t))},e.prototype.vertParallax=function(e){var t=(this.cartStartYPos-e)/50;t<this.vertParallaxRange.x&&(t=this.vertParallaxRange.x),t>this.vertParallaxRange.y&&(t=this.vertParallaxRange.y),this.bgContainer.position.y=0+t},e.prototype.removeCloud=function(e){this.clouds[e].active=!1,this.bgContainer.removeChild(this.clouds[e].sprite),this.spawnCloud(!1)},e.prototype.removeRock=function(e){this.rocks[e].active=!1,this.bgContainer.removeChild(this.rocks[e].sprite)},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.bgContainer.removeAllChildren();for(e=0;e<this.clouds.length;e++)Game.displayStore.returnPooledItem(this.clouds[e].sprite);for(e=0;e<this.rocks.length;e++)Game.displayStore.returnPooledItem(this.rocks[e].sprite);for(var e=0;e<this.hills.length;e++)Game.displayStore.returnPooledItem(this.hills[e].sprite)},e}(),RollerCoasterIceTrackManager=function(){function e(e,t,i){this.scene=e,this.mainContainer=t,this.sliceWidth=170,this.powerUpOn=!1,this.createdNextSliceData=!1,this.trackLimitedTop=!1,this.trackLimitedBottom=!1,this.arrowAngles=new Array,this.arrowAngles.push(0),this.arrowAngles.push(Math.PI/180*-10),this.arrowAngles.push(Math.PI/180*-20),this.arrowAngles.push(Math.PI/180*-30),this.arrowAngles.push(Math.PI/180*-40),this.arrowAngles.push(Math.PI/180*40),this.arrowAngles.push(Math.PI/180*30),this.arrowAngles.push(Math.PI/180*20),this.arrowAngles.push(Math.PI/180*10),this.chooseSliceAheadDistance=400,this.fixSliceAheadDistance=this.chooseSliceAheadDistance-this.sliceWidth,this.removeBehindDistance=1e3,this.obstacleAllowedThisSlice=!0,this.slicePlacementDistance=200,this.gameOverTriggered=!1,this.gameOverStopEaseAmount=20,this.swooshSounds=new Array,this.swooshSounds.push("roller-coaster-ice/swish-long-1.mp3"),this.swooshSounds.push("roller-coaster-ice/swish-long-2.mp3"),this.swooshSounds.push("roller-coaster-ice/swish-long-3.mp3"),this.clickSounds=new Array,this.clickSounds.push("roller-coaster-ice/click-1.mp3"),this.clickSounds.push("roller-coaster-ice/click-2.mp3"),this.clickSounds.push("roller-coaster-ice/click-3.mp3"),this.currentTrackUID=0,this.currentTrackAngle=0,this.velIndex=0,this.trackYPos=0,this.currentTrackLayDirection="flat",this.currentSliceObstacleType=null;var s=60/Game.fps;this.cartVels=new Array,this.cartVels.push(18*s),this.powerUpVel=36,this.bumpCheckIndex=0,this.cartVelocity=this.cartVels[this.velIndex],this.trackPlacementEaseAmount=this.cartVelocity/2/(60/Game.fps),this.trackLimitTopSoundPlaying=!1,this.trackLimitBottomSoundPlaying=!1,this.currentAggregateSpeedFactor=1,this.targetAggregateSpeedFactor=1,this.motionParams={x:0,y:0,angle:0},this.motionParamsEaseAmount=10/s,this.aggregateSpeedAdjustAmount=.05,this.maxAggregateSpeedFactor=2,this.firstSliceSet=!1,this.startPos=i,this.startPosCurrentSlice=i,this.currentPos=new PIXI.Point(this.startPos.x,this.startPos.y),this.trackSlices=new Array,this.createTrackSlices(0,"flat",0,0,"roller-coaster-ice/track-slice-type-0",[8,0,1]),this.createTrackSlices(1,"up",0,30,"roller-coaster-ice/track-slice-type-1",[0,1,2]),this.createTrackSlices(2,"up",0,62,"roller-coaster-ice/track-slice-type-2",[1,2,3]),this.createTrackSlices(3,"up",0,98,"roller-coaster-ice/track-slice-type-3",[2,3,4]),this.createTrackSlices(4,"up",0,142,"roller-coaster-ice/track-slice-type-4",[3,4]),this.createTrackSlices(5,"down",-142,0,"roller-coaster-ice/track-slice-type-5",[6,5]),this.createTrackSlices(6,"down",-98,0,"roller-coaster-ice/track-slice-type-6",[7,6,5]),this.createTrackSlices(7,"down",-62,0,"roller-coaster-ice/track-slice-type-7",[8,7,6]),this.createTrackSlices(8,"down",-30,0,"roller-coaster-ice/track-slice-type-8",[8,7,0]),this.checkObstacleRange=this.sliceWidth/2;for(var o=0;o<8;o++)this.spawnSpecificTrackSlice(0,!1);this.currentPossibleSlices=[5,6,7,8,0,1,2,3,4],this.currentPossibleSliceIndex=4}return e.prototype.createTrackSlices=function(e,t,i,s,o,a){for(var r=0;r<10;r++){var n=Game.displayStore.getContainer("roller-coaster-ice/slice-holder"),h=Game.displayStore.getSprite(o);n.addChild(h),this.trackSlices.push({uid:this.currentTrackUID,trackType:t,holder:n,sprite:h,active:!1,xPos:0,targetYPos:0,vertOffsetPre:i,vertOffsetPost:s,numID:e,validNextSlices:a,linkedLoopIndex:null,linkedObstacleType:null,linkedObstacleIndex:null,checkedObstacle:!1,checkObstacleXPos:0}),this.currentTrackUID++}},e.prototype.setInitialState=function(e){for(var t=0;t<this.trackSlices.length;t++)if(e>=this.trackSlices[t].xPos&&e<this.trackSlices[t].xPos+this.sliceWidth)return this.currentTrackSliceIndex=this.trackSlices[t].uid,void this.setMotionParams()},e.prototype.flatTrackCall=function(e){this.spawnSpecificTrackSlice(e,!0)},e.prototype.spawnSpecificTrackSlice=function(e,t){for(var i=0;i<this.trackSlices.length;i++)if(this.trackSlices[i].numID==e&&0==this.trackSlices[i].active)return void this.layTrackSlice(this.trackSlices[i],t)},e.prototype.playTrackSound=function(){var e=Game.getRandom(0,this.swooshSounds.length-1,!0);Game.playSound(this.swooshSounds[e],.2);var t=Game.getRandom(0,this.clickSounds.length-1,!0);Game.playSound(this.clickSounds[t],.1)},e.prototype.layCurrentChosenTrackSlice=function(){var e=this.currentPossibleSlices[this.currentPossibleSliceIndex],t=this.getSliceIDType(e);1==this.trackLimitedTop&&"up"==t&&(e=0),1==this.trackLimitedBottom&&"down"==t&&(e=0),this.spawnSpecificTrackSlice(e,!0)},e.prototype.getSliceIDType=function(e){for(var t=0;t<this.trackSlices.length;t++)if(this.trackSlices[t].numID==e)return this.trackSlices[t].trackType},e.prototype.removeLastSlice=function(){this.mainContainer.removeChild(this.trackSlices[this.currentFarBehindSliceIndex].holder),this.trackSlices[this.currentFarBehindSliceIndex].active=!1;for(var e=new Array,t=0;t<this.trackSlices.length;t++)0!=this.trackSlices[t].active&&e.push({uid:this.trackSlices[t].uid,xPos:this.trackSlices[t].xPos});0!=e.length&&(e=e.sort(function(e,t){return e.xPos-t.xPos}),this.currentFarBehindSliceIndex=e[0].uid)},e.prototype.getTrackAngle=function(){return this.currentTrackAngle},e.prototype.layTrackSlice=function(e,t){this.createdNextSliceData=!1,0==this.firstSliceSet&&(this.firstSliceSet=!0,this.currentFarBehindSliceIndex=e.uid),e.active=!0,this.currentTrackAngle=e.numID,e.checkedObstacle=!1;var i=this.currentPos.x,s=this.currentPos.y-e.vertOffsetPre;if(this.trackYPos=s,s<100){if(0==this.trackLimitedTop&&(this.currentPossibleSliceIndex=4),this.trackLimitedTop=!0,0==this.trackLimitTopSoundPlaying){this.trackLimitTopSoundPlaying=!0;var o=[{id:"roller-coaster-ice/thud-1.mp3"},{id:"roller-coaster-ice/thud-2.mp3"},{id:"roller-coaster-ice/thud-3.mp3"}],a=Game.getRandom(0,2,!0);Game.playSound(o[a].id,o[a].vol||.7)}}else this.trackLimitedTop=!1,this.trackLimitTopSoundPlaying=!1;if(s>1e3){if(0==this.trackLimitedBottom&&(this.currentPossibleSliceIndex=4),this.trackLimitedBottom=!0,0==this.trackLimitBottomSoundPlaying){this.trackLimitBottomSoundPlaying=!0;var o=[{id:"roller-coaster-ice/thud-1.mp3"},{id:"roller-coaster-ice/thud-2.mp3"},{id:"roller-coaster-ice/thud-3.mp3"}],a=Game.getRandom(0,2,!0);Game.playSound(o[a].id,o[a].vol||.7)}}else this.trackLimitedBottom=!1,this.trackLimitBottomSoundPlaying=!1;e.targetYPos=s,e.holder.position.x=i,1==t?(e.holder.position.y=e.targetYPos-this.slicePlacementDistance,this.playTrackSound()):e.holder.position.y=s,e.xPos=i,this.currentPos.x=i+this.sliceWidth,this.currentPos.y=s-e.vertOffsetPost,this.mainContainer.addChild(e.holder),this.scene.trackLayed(),e.checkObstacleXPos=i+this.sliceWidth/2-this.checkObstacleRange/2;var r=this.currentFarAheadSliceIndex;r&&("up"!=this.trackSlices[r].trackType&&"down"!=this.trackSlices[r].trackType||(this.currentTrackLayDirection=this.trackSlices[r].trackType)),this.currentFarAheadSliceIndex=e.uid},e.prototype.clearPreviousSliceObstacle=function(e){this.trackSlices[e].linkedObstacleIndex=null,this.trackSlices[e].linkedObstacleType=null},e.prototype.setVeloctyState=function(e){1!=this.gameOverTriggered&&1!=this.powerUpOn&&(this.velIndex=e,this.velIndex>this.cartVels.length-1&&(this.velIndex=this.cartVels.length-1),this.cartVelocity=this.cartVels[this.velIndex],this.trackPlacementEaseAmount=4)},e.prototype.getCurrentVelocity=function(){return this.cartVelocity},e.prototype.tick=function(e){if(1==this.gameOverTriggered&&(this.cartVelocity+=(0-this.cartVelocity)/this.gameOverStopEaseAmount,this.cartVelocity<=1))return this.cartVelocity=0,this.motionParams.x=0,this.motionParams.y=0,void this.scene.goToGameOver();e>this.bumpPoints[this.bumpCheckIndex].pos&&0==this.bumpPoints[this.bumpCheckIndex].bumped&&(this.scene.toggleBumpCart(),this.bumpPoints[this.bumpCheckIndex].bumped=!0,++this.bumpCheckIndex>this.bumpPoints.length-1&&(this.bumpCheckIndex=this.bumpPoints.length-1)),this.currentAggregateSpeedFactor+=(this.targetAggregateSpeedFactor-this.currentAggregateSpeedFactor)/this.motionParamsEaseAmount,this.motionParams.x=this.cartVelocity*this.currentAggregateSpeedFactor*Math.cos(this.motionParams.angle),this.motionParams.y=this.cartVelocity*this.currentAggregateSpeedFactor*Math.sin(this.motionParams.angle),this.scene.setCurrentVelocity(this.cartVelocity*this.currentAggregateSpeedFactor),e+this.chooseSliceAheadDistance>this.currentPos.x&&0==this.createdNextSliceData&&(this.createdNextSliceData=!0,this.getArrowAngle()),e+this.fixSliceAheadDistance>this.currentPos.x&&this.layCurrentChosenTrackSlice(),e>this.trackSlices[this.currentFarBehindSliceIndex].xPos+this.removeBehindDistance&&this.removeLastSlice(),this.placeSlices();var t=this.trackSlices[this.currentTrackSliceIndex].checkObstacleXPos,i=this.trackSlices[this.currentTrackSliceIndex].checkObstacleXPos+this.checkObstacleRange;if(e>t&&e<i&&this.checkCartState(),!(e<this.trackSlices[this.currentTrackSliceIndex].xPos+this.sliceWidth))for(var s=0;s<this.trackSlices.length;s++)if(0!=this.trackSlices[s].active&&e>=this.trackSlices[s].xPos&&e<this.trackSlices[s].xPos+this.sliceWidth)return this.currentTrackSliceIndex=this.trackSlices[s].uid,void this.setMotionParams()},e.prototype.placeSlices=function(){for(var e=0;e<this.trackSlices.length;e++)0!=this.trackSlices[e].active&&(this.trackSlices[e].holder.position.y+=(this.trackSlices[e].targetYPos-this.trackSlices[e].holder.position.y)/this.trackPlacementEaseAmount)},e.prototype.getArrowAngle=function(){var e=this.currentPossibleSlices[this.currentPossibleSliceIndex],t=this.getSliceIDType(e);1==this.trackLimitedTop&&"up"==t&&(e=0),1==this.trackLimitedBottom&&"down"==t&&(e=0);var i;i=this.arrowAngles[e],this.scene.setArrowAngle(i)},e.prototype.getNearestMouseAngle=function(e){var t,i=0,s=1e3;for(i in this.arrowAngles){var o=Math.abs(e-this.arrowAngles[i]);o<s&&(s=o,t=this.arrowAngles[i],this.setTrackAngleUsingMouse(i))}return t},e.prototype.changeAngleUp=function(){1!=this.trackLimitedTop&&(++this.currentPossibleSliceIndex>=this.currentPossibleSlices.length-1&&(this.currentPossibleSliceIndex=this.currentPossibleSlices.length-1),this.getArrowAngle())},e.prototype.changeAngleDown=function(){1!=this.trackLimitedBottom&&(--this.currentPossibleSliceIndex<0&&(this.currentPossibleSliceIndex=0),this.getArrowAngle())},e.prototype.setTrackAngleUsingMouse=function(e){switch(Number(e)){case 0:this.currentPossibleSliceIndex=4;break;case 1:this.currentPossibleSliceIndex=5;break;case 2:this.currentPossibleSliceIndex=6;break;case 3:this.currentPossibleSliceIndex=7;break;case 4:this.currentPossibleSliceIndex=8;break;case 5:this.currentPossibleSliceIndex=0;break;case 6:this.currentPossibleSliceIndex=1;break;case 7:this.currentPossibleSliceIndex=2;break;case 8:this.currentPossibleSliceIndex=3}},e.prototype.activatePowerUp=function(){this.powerUpOn=!0,this.cartVelocity=this.powerUpVel,this.trackPlacementEaseAmount=2},e.prototype.deactivatePowerUp=function(){this.powerUpOn=!1,this.cartVelocity=this.cartVels[this.velIndex],this.trackPlacementEaseAmount=4},e.prototype.triggerGameOver=function(){this.gameOverTriggered=!0},e.prototype.secondChanceUse=function(){this.gameOverTriggered=!1,this.cartVelocity=this.cartVels[this.velIndex]},e.prototype.checkCartState=function(){1!=this.trackSlices[this.currentTrackSliceIndex].checkedObstacle&&(this.trackSlices[this.currentTrackSliceIndex].checkedObstacle=!0,null!=this.trackSlices[this.currentTrackSliceIndex].linkedObstacleType?this.currentSliceObstacleType=this.trackSlices[this.currentTrackSliceIndex].linkedObstacleType:this.currentSliceObstacleType=null,this.scene.checkObstacleImpact(this.currentSliceObstacleType))},e.prototype.cartInCheckZone=function(e){var t=!1;if(this.trackSlices[this.currentTrackSliceIndex]){var i=this.trackSlices[this.currentTrackSliceIndex].checkObstacleXPos,s=this.trackSlices[this.currentTrackSliceIndex].checkObstacleXPos+this.checkObstacleRange;return null!=this.trackSlices[this.currentTrackSliceIndex].linkedObstacleType&&e>i&&e<s&&(t=!0),t}},e.prototype.getObstacleType=function(){return this.trackSlices[this.currentTrackSliceIndex].linkedObstacleType},e.prototype.getObstacleIndex=function(){return this.trackSlices[this.currentTrackSliceIndex].linkedObstacleIndex},e.prototype.setMotionParams=function(){this.bumpPoints=new Array;for(var e=0;e<4;e++)this.bumpPoints.push({pos:this.trackSlices[this.currentTrackSliceIndex].xPos+this.sliceWidth/4*e,bumped:!1});this.scene.adjustCamera(this.trackSlices[this.currentTrackSliceIndex].numID),this.bumpCheckIndex=0;var t,i=new PIXI.Point(this.trackSlices[this.currentTrackSliceIndex].xPos,this.trackSlices[this.currentTrackSliceIndex].holder.position.y-this.trackSlices[this.currentTrackSliceIndex].vertOffsetPre),s=new PIXI.Point(this.trackSlices[this.currentTrackSliceIndex].xPos+this.sliceWidth,this.trackSlices[this.currentTrackSliceIndex].holder.position.y+this.trackSlices[this.currentTrackSliceIndex].vertOffsetPost),o=this.scene.getCurrentCartPos();"up"==this.trackSlices[this.currentTrackSliceIndex].trackType&&(s.x+=i.x-o.x,s.y-=i.y+this.trackSlices[this.currentTrackSliceIndex].vertOffsetPre-(o.y-this.trackSlices[this.currentTrackSliceIndex].vertOffsetPre),t=this.getAngle(s.x,s.y,i.x,i.y),this.motionParams.angle=t),"down"==this.trackSlices[this.currentTrackSliceIndex].trackType&&(s.x+=i.x-o.x,s.y+=i.y-o.y,t=0-this.getAngle(s.x,s.y,i.x,i.y),this.motionParams.angle=t),"flat"==this.trackSlices[this.currentTrackSliceIndex].trackType&&(s.x+=i.x-o.x,s.y+=i.y-o.y,t=0-this.getAngle(s.x,s.y,i.x,i.y),this.motionParams.angle=t)},e.prototype.getAngle=function(e,t,i,s){var o=e-i,a=s-t;return Math.atan2(a,o)},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){for(var e=0;e<this.trackSlices.length;e++)Game.displayStore.returnPooledItem(this.trackSlices[e].holder),Game.displayStore.returnPooledItem(this.trackSlices[e].sprite)},e}(),RollerCoasterIceInputManager=function(){function e(e,t){this.scene=e,this.holdDelay=0,this.holdDelayLimit=15,this.holdCounter=0,this.holdCounterLimit=10,this.arrowPos=t,this.initialTap=!0,this.mousePos=new PIXI.Point(0,0),this.mouseDown=!1,this.mouseAngle=0,this.hitAreaSprite=Game.displayStore.getSprite("roller-coaster-ice/blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.inputMarker=Game.displayStore.getSprite("roller-coaster-ice/input-marker"),this.scene.container.addChild(this.inputMarker),this.inputMarker.alpha=0,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite)}return e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mousemove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t)})):(e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchmove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t)}))},e.prototype.inputDown=function(e,t){e.scene.inputActivated(),e.mouseDown=!0,this.mousePos=t},e.prototype.increaseAngle=function(e){switch(e){case"up":this.scene.changeAngleUp();break;case"down":this.scene.changeAngleDown()}},e.prototype.inputUp=function(e){e.mouseDown=!1,e.holdCounter=0,e.holdDelay=0,e.initialTap=!0},e.prototype.inputMove=function(e,t){1==e.mouseDown&&(e.mousePos=t),e.mouseAngle=e.getAngle(e.mousePos.x,e.mousePos.y,e.arrowPos.x,e.arrowPos.y)},e.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},e.prototype.tick=function(){this.inputMarker.position.x=this.mousePos.x,this.inputMarker.position.y=this.mousePos.y,1==this.mouseDown&&(this.holdDelay++,1==this.initialTap&&(this.initialTap=!1,this.mousePos.y<Game.stageHeight/2?(this.increaseAngle("up"),console.log("going up!")):(this.increaseAngle("down"),console.log("going down!"))),this.holdDelay>this.holdDelayLimit&&++this.holdCounter>this.holdCounterLimit&&(this.holdCounter=0,this.mousePos.y<Game.stageHeight/2?(this.increaseAngle("up"),console.log("going up!")):(this.increaseAngle("down"),console.log("going down!"))))},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},e}(),RollerCoasterIceCloudManager=function(){function e(e,t,i){this.scene=e,this.cloudContainer=t,this.gameOverTriggered=!1,this.activeClouds=0,this.powerUpOn=!1,this.cloudHittingBlastDistance=0,this.playerHolderRef=i,this.removeBehindDistance=1500,this.blastDistance=1400,this.spawnVertRange=400,this.blastStartEaseAmount=5,this.floatEaseAmount=20,this.firstSpawn=!0,this.createClouds(),this.spawnPositions=[0,100,200,300,400,500,600,700,800,900,1e3,1100],this.activePositions=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],this.iceGrowSounds=new Array,this.iceGrowSounds.push("roller-coaster-ice/ice-pop-1.mp3"),this.iceGrowSounds.push("roller-coaster-ice/ice-pop-2.mp3"),this.iceGrowSounds.push("roller-coaster-ice/ice-pop-3.mp3"),this.iceGrowSounds.push("roller-coaster-ice/ice-pop-4.mp3"),this.laserSounds=new Array,this.laserSounds.push("roller-coaster-ice/laser-1.mp3"),this.laserSounds.push("roller-coaster-ice/laser-2.mp3")}return e.prototype.deactivateCloud=function(e){},e.prototype.createClouds=function(){this.clouds=new Array,this.createCloudTypes(1,5),this.createCloudTypes(2,4),this.createCloudTypes(3,6),this.clouds=this.shuffleArray(this.clouds),this.blastElements=new Array;for(var e=0;e<this.clouds.length;e++){for(var t=new Array,i=new Array,s=0;s<5;s++)for(var o=0;o<2;o++)t.push({sprite:Game.displayStore.getSprite("roller-coaster-ice/ice-blast-particle-"+String(s+1)),flyStart:Game.getRandom(5,50)/(60/Game.fps),moveSpeed:Game.getRandom(10,20)/(60/Game.fps),rotateSpeed:Game.getRandom(.1,.2)/(60/Game.fps),flying:!1,vertOffset:Game.getRandom(-20,20)}),i.push({sprite:Game.displayStore.getSprite("roller-coaster-ice/ice-blast-line"),flyStart:Game.getRandom(5,20)/(60/Game.fps),vertOffset:Game.getRandom(-20,20),moveSpeed:Game.getRandom(10,20)/(60/Game.fps)});var a=Game.displayStore.getSprite("roller-coaster-ice/blast-bg-element");this.blastElements.push({backgroundLayer:a,flyingCrystals:t,flyingCrystalCounter:0,flyingLines:i}),this.blastElements[e].backgroundLayer.alpha=.7,this.blastElements[e].backgroundLayer.height=100,this.blastElements[e].backgroundLayer.blendMode=PIXI.BLEND_MODES.ADD}},e.prototype.createCloudTypes=function(e,t){for(var i=String(e),s=0;s<10;s++){var o=Game.displayStore.getContainer("roller-coaster-ice/cloud-holder"),a=Game.displayStore.getSprite("roller-coaster-ice/cloud-type-"+i),r=Game.displayStore.getSprite("roller-coaster-ice/cloud-type-"+i+"-glow");o.addChild(r),o.addChild(a);for(var n=new Array,h=1;h<=t;h++)n.push({sprite:Game.displayStore.getSprite("roller-coaster-ice/cloud-type-"+i+"-crystal-"+String(h)),easeAmount:Game.getRandom(5,10,!0)/(60/Game.fps),scaleStart:Game.getRandom(5/(60/Game.fps),10/(60/Game.fps),!0)}),o.addChild(n[h-1].sprite);this.clouds.push({cloudHolder:o,cloudSprite:a,glowSprite:r,active:!1,activeSlot:0,pulses:0,pulseReady:!0,pulseCounter:0,pulseTarget:Game.getRandom(10,30),crystals:n,crystalsActivateCounter:0,crystalsActivateLimit:0,crystalsActive:!1,crystalsDelayCounter:0,crystalsBlastCounter:0,crystalsBlastLimit:0,blasting:!1,blastingCollideOn:!1,endBlastCounter:0,endBlastLimit:0,endBlasting:!1,targetDistanceAhead:0,spawnYPos:0,wobbleCounter:0,wobbleIncrement:0,gameOverTriggered:!1}),this.scene.createBlastCollisionData()}},e.prototype.shuffleArray=function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[i],e[i]=s}return e},e.prototype.tick=function(e){this.cartPos=e,this.moveClouds(),this.moveBlasts(),1==this.cloudHitting&&(this.cloudHittingBlastDistance=this.clouds[this.cloudHittingNumber].cloudHolder.position.x-this.playerHolderRef.position.x)},e.prototype.setHittingCloud=function(e){this.cloudHitting=!0,this.cloudHittingNumber=e},e.prototype.endHittingCloud=function(){this.cloudHitting=!1},e.prototype.moveClouds=function(){for(var e=0;e<this.clouds.length;e++)if(0!=this.clouds[e].active){if(this.clouds[e].wobbleCounter+=this.clouds[e].wobbleIncrement,this.clouds[e].cloudHolder.position.y=this.clouds[e].spawnYPos+10*Math.sin(this.clouds[e].wobbleCounter),0==this.clouds[e].endBlasting&&0==this.clouds[e].gameOverTriggered){var t=this.cartPos.x+this.clouds[e].targetDistanceAhead;this.clouds[e].cloudHolder.position.x+=(t-this.clouds[e].cloudHolder.position.x)/this.floatEaseAmount}if(1==this.clouds[e].gameOverTriggered&&(this.clouds[e].cloudHolder.position.x-=5),this.cartPos.x-this.clouds[e].cloudHolder.position.x>=this.removeBehindDistance&&(this.clouds[e].active=!1,this.cloudContainer.removeChild(this.clouds[e].cloudHolder),this.activeClouds--,this.activePositions[this.clouds[e].activeSlot]=!1),1==this.clouds[e].blasting&&0==this.clouds[e].endBlasting&&++this.clouds[e].endBlastCounter>=this.clouds[e].endBlastLimit&&(this.clouds[e].endBlasting=!0,this.scene.endBlastCollisionData(e)),0==this.clouds[e].crystalsActive&&++this.clouds[e].crystalsActivateCounter>=this.clouds[e].crystalsActivateLimit&&(this.clouds[e].crystalsActive=!0,this.playIceGrowSound()),1==this.clouds[e].crystalsActive){this.clouds[e].crystalsBlastCounter++,this.clouds[e].crystalsDelayCounter++,this.clouds[e].crystalsBlastCounter>=this.clouds[e].crystalsBlastLimit&&(this.clouds[e].blasting=!0,0==this.clouds[e].blastingCollideOn&&(this.playLaserSound(),this.clouds[e].blastingCollideOn=!0,this.scene.addBlastCollisionData(e,this.clouds[e].spawnYPos)));for(var i=0;i<this.clouds[e].crystals.length;i++)if(!(this.clouds[e].crystalsDelayCounter<this.clouds[e].crystals[i].scaleStart)){var s=this.clouds[e].crystals[i].sprite,o=this.clouds[e].crystals[i].easeAmount;0==this.clouds[e].endBlasting?(s.scale.x+=(1-s.scale.x)/o,s.scale.y=s.scale.x,this.clouds[e].glowSprite.alpha<1&&(this.clouds[e].glowSprite.alpha+=(1-this.clouds[e].glowSprite.alpha)/20)):(s.scale.x+=(0-s.scale.x)/o,s.scale.y=s.scale.x,this.clouds[e].glowSprite.alpha>0&&(this.clouds[e].glowSprite.alpha+=(0-this.clouds[e].glowSprite.alpha)/20))}}}},e.prototype.playIceGrowSound=function(){var e=Game.getRandom(0,this.iceGrowSounds.length-1,!0);Game.playSound(this.iceGrowSounds[e],.7)},e.prototype.playLaserSound=function(){var e=Game.getRandom(0,this.laserSounds.length-1,!0);Game.playSound(this.laserSounds[e],.9)},e.prototype.moveBlasts=function(){for(var e=0;e<this.clouds.length;e++)if(0!=this.clouds[e].blasting){this.blastElements[e].backgroundLayer.position.x=this.clouds[e].cloudHolder.position.x,this.blastElements[e].backgroundLayer.position.y=this.clouds[e].cloudHolder.position.y,0==this.clouds[e].endBlasting&&(this.cloudHittingNumber==e&&1==this.cloudHitting?this.blastElements[e].backgroundLayer.width=this.cloudHittingBlastDistance:this.blastElements[e].backgroundLayer.width+=(this.blastDistance-this.blastElements[e].backgroundLayer.width)/this.blastStartEaseAmount,this.blastElements[e].backgroundLayer.alpha+=(1-this.blastElements[e].backgroundLayer.alpha)/this.blastStartEaseAmount),1==this.clouds[e].endBlasting&&(this.blastElements[e].backgroundLayer.alpha+=(0-this.blastElements[e].backgroundLayer.alpha)/this.blastStartEaseAmount),this.blastElements[e].flyingCrystalCounter++;for(var t=0;t<this.blastElements[e].flyingCrystals.length;t++)this.blastElements[e].flyingCrystalCounter>this.blastElements[e].flyingCrystals[t].flyStart&&(this.blastElements[e].flyingCrystals[t].flying=!0),0==this.blastElements[e].flyingCrystals[t].flying?(this.blastElements[e].flyingCrystals[t].sprite.position.x=this.clouds[e].cloudHolder.position.x,this.blastElements[e].flyingCrystals[t].sprite.position.y=this.clouds[e].cloudHolder.position.y+this.blastElements[e].flyingCrystals[t].vertOffset,this.blastElements[e].flyingLines[t].sprite.position.y=this.clouds[e].cloudHolder.position.y+this.blastElements[e].flyingLines[t].vertOffset,this.blastElements[e].flyingCrystals[t].sprite.scale.x=this.blastElements[e].flyingCrystals[t].sprite.scale.y=1.8):(this.blastElements[e].flyingCrystals[t].sprite.position.x-=this.blastElements[e].flyingCrystals[t].moveSpeed,this.blastElements[e].flyingCrystals[t].sprite.rotation-=this.blastElements[e].flyingCrystals[t].rotateSpeed,this.blastElements[e].flyingCrystals[t].sprite.position.y=this.clouds[e].cloudHolder.position.y+this.blastElements[e].flyingCrystals[t].vertOffset,this.blastElements[e].flyingLines[t].sprite.position.y=this.clouds[e].cloudHolder.position.y+this.blastElements[e].flyingLines[t].vertOffset,this.blastElements[e].flyingLines[t].sprite.position.x-=this.blastElements[e].flyingLines[t].moveSpeed,this.blastElements[e].flyingLines[t].sprite.scale.x+=.1,this.blastElements[e].flyingCrystals[t].sprite.position.x<this.clouds[e].cloudHolder.position.x-this.blastDistance&&0==this.clouds[e].endBlasting&&(this.blastElements[e].flyingCrystals[t].sprite.position.x=this.clouds[e].cloudHolder.position.x),this.blastElements[e].flyingLines[t].sprite.position.x<this.clouds[e].cloudHolder.position.x-this.blastDistance&&(0==this.clouds[e].endBlasting&&(this.blastElements[e].flyingLines[t].sprite.position.x=this.clouds[e].cloudHolder.position.x),this.blastElements[e].flyingLines[t].sprite.scale.x=1))}},e.prototype.getPosition=function(){if(!(this.activeClouds>5)){var e=this.scene.getPlayerLane();if(0==this.activePositions[e]){if(1==this.firstSpawn)return this.firstSpawn=!1,this.spawnIndividualCloud(this.spawnPositions[e],e),void(this.activePositions[e]=!0);this.spawnIndividualCloud(this.spawnPositions[e],e),this.activePositions[e]=!0,this.activeClouds++}else if(0==Game.getRandom(0,1,!0))if(Game.getRandom(0,1)>.5){if(e-1<0)return;if(0!=this.activePositions[e-1])return;this.spawnIndividualCloud(this.spawnPositions[e-1],e-1),this.activePositions[e-1]=!0,this.activeClouds++}else{if(e-2<0)return;if(0!=this.activePositions[e-2])return;this.spawnIndividualCloud(this.spawnPositions[e-2],e-2),this.activePositions[e-2]=!0,this.activeClouds++}else if(Game.getRandom(0,1)>.5){if(e+1>11)return;if(0!=this.activePositions[e+1])return;this.spawnIndividualCloud(this.spawnPositions[e+1],e+1),this.activePositions[e+1]=!0,this.activeClouds++}else{if(e+2>11)return;if(0!=this.activePositions[e+2])return;this.spawnIndividualCloud(this.spawnPositions[e+2],e+2),this.activePositions[e+2]=!0,this.activeClouds++}}},e.prototype.spawnCloud=function(){1!=this.gameOverTriggered&&1!=this.powerUpOn&&this.getPosition()},e.prototype.spawnIndividualCloud=function(e,t){for(var i=0;i<this.clouds.length;i++)if(1!=this.clouds[i].active){this.clouds[i].activeSlot=t,this.clouds[i].active=!0,this.clouds[i].glowSprite.alpha=0,this.clouds[i].spawnYPos=e,this.clouds[i].cloudHolder.scale.x=this.clouds[i].cloudHolder.scale.y=1,this.clouds[i].cloudHolder.position.x=this.cartPos.x+Game.getRandom(1e3,1200),this.clouds[i].cloudHolder.position.y=e;for(s=0;s<this.blastElements[i].flyingCrystals.length;s++)this.blastElements[i].flyingCrystals[s].sprite.position.x=-1e3,this.blastElements[i].flyingCrystals[s].flying=!1,this.cloudContainer.addChild(this.blastElements[i].flyingCrystals[s].sprite);for(s=0;s<this.blastElements[i].flyingLines.length;s++)this.blastElements[i].flyingLines[s].sprite.position.x=-1e3,this.blastElements[i].flyingLines[s].sprite.scale.x=1,this.cloudContainer.addChild(this.blastElements[i].flyingLines[s].sprite);this.blastElements[i].flyingCrystalCounter=0,this.cloudContainer.addChild(this.blastElements[i].backgroundLayer),this.blastElements[i].backgroundLayer.position.x=-1e3,this.blastElements[i].backgroundLayer.width=1,this.blastElements[i].backgroundLayer.alpha=0,this.cloudContainer.addChild(this.clouds[i].cloudHolder),this.clouds[i].pulses=0,this.clouds[i].pulseReady=!0,this.clouds[i].pulseCounter=0,this.clouds[i].crystalsActive=!1,this.clouds[i].crystalsActivateCounter=0,this.clouds[i].crystalsActivateLimit=Game.getRandom(60,120)/(60/Game.fps),this.clouds[i].targetDistanceAhead=Game.getRandom(600,900),this.clouds[i].crystalsBlastCounter=0,this.clouds[i].crystalsBlastLimit=60,this.clouds[i].endBlastCounter=0,this.clouds[i].endBlastLimit=Game.getRandom(60,60)/(60/Game.fps),this.clouds[i].endBlasting=!1,this.clouds[i].blasting=!1,this.clouds[i].blastingCollideOn=!1,this.clouds[i].wobbleCounter=0,this.clouds[i].wobbleIncrement=Game.getRandom(.05,.2)/(60/Game.fps),this.clouds[i].crystalsDelayCounter=0,this.clouds[i].gameOverTriggered=!1;for(var s=0;s<this.clouds[i].crystals.length;s++)this.clouds[i].crystals[s].sprite.scale.x=0,this.clouds[i].crystals[s].sprite.scale.y=0;return}},e.prototype.powerUpKillAllClouds=function(){this.powerUpOn=!0;for(var e=0;e<this.clouds.length;e++){if(0==this.clouds[e].active)return;this.clouds[e].endBlasting=!0,this.clouds[e].blastingCollideOn=!1,this.clouds[e].blasting=!1,this.clouds[e].active=!1,this.clouds[e].crystalsActive=!1,this.clouds[e].crystalsActive=!1,this.activePositions[this.clouds[e].activeSlot]=!1,this.scene.endBlastCollisionData(e)}},e.prototype.endPowerUp=function(){this.powerUpOn=!1},e.prototype.secondChanceUse=function(){this.gameOverTriggered=!1;for(var e=0;e<this.clouds.length;e++)this.clouds[e].gameOverTriggered=!1},e.prototype.setCartVelocity=function(e){this.cartVel=e,this.cloudSpeed=this.cartVel/1.5},e.prototype.triggerGameOver=function(){this.gameOverTriggered=!0;for(var e=0;e<this.clouds.length;e++)this.clouds[e].gameOverTriggered=!0},e.prototype.getAngle=function(e,t,i,s){var o=e-i,a=s-t;return Math.atan2(a,o)},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){for(e=0;e<this.clouds.length;e++){Game.displayStore.returnPooledItem(this.clouds[e].cloudHolder),Game.displayStore.returnPooledItem(this.clouds[e].cloudSprite),Game.displayStore.returnPooledItem(this.clouds[e].glowSprite);for(t=0;t<this.clouds[e].crystals.length;t++)Game.displayStore.returnPooledItem(this.clouds[e].crystals[t].sprite)}for(var e=0;e<this.blastElements.length;e++){Game.displayStore.returnPooledItem(this.blastElements[e].backgroundLayer);for(var t=0;t<this.blastElements[e].flyingCrystals.length;t++)Game.displayStore.returnPooledItem(this.blastElements[e].flyingCrystals[t].sprite);for(var i=0;i<this.blastElements[e].flyingLines.length;i++)Game.displayStore.returnPooledItem(this.blastElements[e].flyingLines[i].sprite)}},e}(),RollerCoasterIceBackgroundManager=function(){function e(e,t,i,s,o){this.scene=e,this.bgContainerFar=t,this.bgContainer=i,this.bgContainer2=s,this.gameOverTriggered=!1,this.cartStartYPos=o,this.vertParallaxRange=new PIXI.Point(-150,150),this.maxMountVertPos=480,this.maxRockVertPos=500,this.maxCloudVertPos=750,this.maxCaveBottomVertPos=750,this.mountScrollSpeed=.1,this.rockScrollSpeed=.5,this.cloudScrollSpeed=2,this.caveBottomScrollSpeed=2,this.spawnRockPos=Game.stageWidth+300,this.spawnCloudPos=Game.stageWidth+300,this.spawnMountPos=Game.stageWidth+300,this.spawnCaveBottomPos=Game.stageWidth+300,this.createElements(),this.spawnRocksInitial()}return e.prototype.createElements=function(){this.lastPosMount=Game.getRandom(-100,100),this.lastPosRock=Game.getRandom(-100,100),this.lastPosCloud=Game.getRandom(-100,100),this.lastPosCaveBottom=Game.getRandom(-100,100),this.rocks=new Array;for(e=0;e<8;e++)for(t=0;t<2;t++)this.rocks.push({sprite:Game.displayStore.getSprite("roller-coaster-ice/rock-"+String(e)),active:!1,removePos:null});this.mountains=new Array;for(e=0;e<5;e++)for(t=0;t<2;t++)this.mountains.push({sprite:Game.displayStore.getSprite("roller-coaster-ice/mountain-"+String(e)),active:!1,removePos:null});this.clouds=new Array;for(var e=0;e<6;e++)for(var t=0;t<2;t++)this.clouds.push({sprite:Game.displayStore.getSprite("roller-coaster-ice/cloud-"+String(e)),active:!1,removePos:null});this.mountains=this.shuffleArray(this.mountains),this.rocks=this.shuffleArray(this.rocks),this.clouds=this.shuffleArray(this.clouds)},e.prototype.spawnRocksInitial=function(){for(e=0;e<5;e++)this.spawnRock(!0);for(e=0;e<5;e++)this.spawnCloud(!0);for(var e=0;e<5;e++)this.spawnMountain(!0)},e.prototype.spawnRock=function(e){for(var t=0;t<this.rocks.length;t++)if(1!=this.rocks[t].active){this.rocks[t].active=!0;var i=Game.getRandom(0,3,!0),s=Game.getRandom(this.maxRockVertPos,550),o=this.lastPosRock+this.rocks[t].sprite.width/2+Game.getRandom(-50,300);o=1==e?this.lastPosRock+this.rocks[t].sprite.width/2+Game.getRandom(0,300):this.spawnRockPos+this.rocks[t].sprite.width/2+Game.getRandom(0,300),this.rocks[t].sprite.position.x=o,this.rocks[t].sprite.position.y=s,this.bgContainer.children.length>=3?this.bgContainer.addChildAt(this.rocks[t].sprite,i):this.bgContainer.addChild(this.rocks[t].sprite),this.rocks[t].removePos=-this.rocks[t].sprite.width/2,this.lastPosRock=o,this.currentLastRockIndex=t;break}this.rocks=this.shuffleArray(this.rocks)},e.prototype.spawnMountain=function(e){for(var t=0;t<this.mountains.length;t++)if(1!=this.mountains[t].active){this.mountains[t].active=!0;var i,s=Game.getRandom(0,3,!0),o=Game.getRandom(this.maxMountVertPos,520);i=1==e?this.lastPosMount+this.mountains[t].sprite.width/2+Game.getRandom(0,300):this.spawnMountPos+this.mountains[t].sprite.width/2+Game.getRandom(0,300),this.mountains[t].sprite.position.x=i,this.mountains[t].sprite.position.y=o,this.bgContainerFar.children.length>=3?this.bgContainerFar.addChildAt(this.mountains[t].sprite,s):this.bgContainerFar.addChild(this.mountains[t].sprite),this.mountains[t].removePos=-this.mountains[t].sprite.width/2,this.lastPosMount=i,this.currentLastMountIndex=t;break}this.mountains=this.shuffleArray(this.mountains)},e.prototype.spawnCloud=function(e){for(var t=0;t<this.clouds.length;t++)if(1!=this.clouds[t].active){this.clouds[t].active=!0;var i,s=this.maxCloudVertPos;i=1==e?Game.getRandom(100,Game.stageWidth):this.spawnCloudPos+this.clouds[t].sprite.width/2,this.clouds[t].sprite.position.x=i,this.clouds[t].sprite.position.y=s,this.clouds[t].sprite.alpha=1,this.clouds[t].sprite.scale.x=this.clouds[t].sprite.scale.y=Game.getRandom(3,3.5),this.bgContainer2.addChild(this.clouds[t].sprite),this.clouds[t].removePos=-this.clouds[t].sprite.width/2,this.lastPosCloud=i,this.currentLastCloudIndex=t;break}},e.prototype.spawnCaveBottom=function(e){for(var t=0;t<this.caveBottom.length;t++)if(1!=this.caveBottom[t].active){this.caveBottom[t].active=!0;var i,s=this.maxCaveBottomVertPos;i=1==e?0:this.spawnCaveBottomPos+this.caveBottom[t].sprite.width,this.caveBottom[t].sprite.position.x=i,this.caveBottom[t].sprite.position.y=s,this.caveBottom[t].sprite.alpha=1,this.caveBottom[t].removePos=-this.caveBottom[t].sprite.width/2,this.lastPosCaveBottom=i,this.currentLastCaveBottomIndex=t;break}},e.prototype.shuffleArray=function(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[i],e[i]=t;return e},e.prototype.tick=function(e,t){1!=this.gameOverTriggered&&(this.moveClouds(t),this.moveMountains(t),this.moveRocks(t),this.vertParallax(e.y))},e.prototype.moveRocks=function(e){for(var t=this.rockScrollSpeed*e,i=0;i<this.rocks.length;i++)0!=this.rocks[i].active&&(this.rocks[i].sprite.position.x-=t,this.rocks[i].sprite.position.x<this.rocks[i].removePos&&this.removeRock(i));this.rocks[this.currentLastRockIndex].sprite.position.x<=this.spawnRockPos&&this.spawnRock(!1)},e.prototype.moveMountains=function(e){for(var t=this.mountScrollSpeed*e,i=0;i<this.mountains.length;i++)0!=this.mountains[i].active&&(this.mountains[i].sprite.position.x-=t,this.mountains[i].sprite.position.x<this.mountains[i].removePos&&this.removeMountain(i));this.mountains[this.currentLastMountIndex].sprite.position.x<=this.spawnMountPos&&this.spawnMountain(!1)},e.prototype.moveClouds=function(e){for(var t=this.cloudScrollSpeed*e,i=0;i<this.clouds.length;i++)0!=this.clouds[i].active&&(this.clouds[i].sprite.position.x-=t,this.clouds[i].sprite.position.x<this.clouds[i].removePos&&this.removeCloud(i),this.clouds[this.currentLastCloudIndex].sprite.position.x<=this.spawnCloudPos&&this.spawnCloud(!1))},e.prototype.moveCaveBottom=function(e){for(var t=this.caveBottomScrollSpeed*e,i=0;i<this.caveBottom.length;i++)0!=this.caveBottom[i].active&&(this.caveBottom[i].sprite.position.x-=t,this.caveBottom[i].sprite.position.x<this.caveBottom[i].removePos&&this.removeCaveBottom(i),this.caveBottom[this.currentLastCloudIndex].sprite.position.x<=this.spawnCaveBottomPos&&this.spawnCaveBottom(!1))},e.prototype.vertParallax=function(e){var t=(this.cartStartYPos-e)/50;t<this.vertParallaxRange.x&&(t=this.vertParallaxRange.x),t>this.vertParallaxRange.y&&(t=this.vertParallaxRange.y),this.bgContainer.position.y=0+t},e.prototype.triggerGameOver=function(){this.gameOverTriggered=!0},e.prototype.secondChanceUse=function(){this.gameOverTriggered=!1},e.prototype.activatePowerUp=function(){this.mountScrollSpeed=.2,this.rockScrollSpeed=1,this.cloudScrollSpeed=4,this.caveBottomScrollSpeed=4},e.prototype.deactivatePowerUp=function(){this.mountScrollSpeed=.1,this.rockScrollSpeed=.5,this.cloudScrollSpeed=2,this.caveBottomScrollSpeed=2},e.prototype.removeRock=function(e){this.rocks[e].active=!1,this.bgContainer.removeChild(this.rocks[e].sprite)},e.prototype.removeMountain=function(e){this.mountains[e].active=!1,this.bgContainerFar.removeChild(this.mountains[e].sprite)},e.prototype.removeCloud=function(e){this.clouds[e].active=!1,this.bgContainer2.removeChild(this.clouds[e].sprite)},e.prototype.removeCaveBottom=function(e){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.bgContainer.removeAllChildren();for(e=0;e<this.rocks.length;e++)Game.displayStore.returnPooledItem(this.rocks[e].sprite);for(e=0;e<this.clouds.length;e++)Game.displayStore.returnPooledItem(this.clouds[e].sprite);for(var e=0;e<this.mountains.length;e++)Game.displayStore.returnPooledItem(this.mountains[e].sprite)},e}(),RollerCoasterIceTicketManager=function(){function e(e,t,i){this.scene=e,this.mainContainer=t,this.removeBehindDistance=800,this.tickets=new Array,this.spawnCounterLimit=180,this.spawnCounter=0,this.spawnAheadPos=800,this.heartSpawnCounter=0,this.heartSpawnCounterLimit=4}return e.prototype.createTickets=function(){this.tickets=new Array;for(var e=0;e<5;e++)this.tickets.push({ticket:null,active:!1})},e.prototype.shuffleArray=function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[i],e[i]=s}return e},e.prototype.tick=function(e){++this.spawnCounter>=this.spawnCounterLimit&&(this.spawnCounter=0,this.spawnTicketAhead(e.x));for(var t=0;t<this.tickets.length;t++)if(0!=this.tickets[t].active){if(this.getDistance(this.tickets[t].ticket.container.position.x,this.tickets[t].ticket.container.position.y,e.x,e.y)<200)return void this.collectTicket(t);this.tickets[t].ticket.container.position.x<e.x-this.removeBehindDistance&&this.tickets[t].ticket.resetState()}},e.prototype.spawnTicketAhead=function(e){var t=!1,i=this.scene.getLives();i.currentLives!=i.totalLives&&++this.heartSpawnCounter>=this.heartSpawnCounterLimit&&(this.heartSpawnCounter=0,t=!0);for(var s=0;s<this.tickets.length;s++)if(0==this.tickets[s].active){var o;if(o=1==t?Game.ticketPool.getHeart():Game.ticketPool.getTicket(),0==t&&3==this.scene.game.gameLaunchMode)return;o.container.position.x=e+this.spawnAheadPos,o.container.position.y=510,this.mainContainer.addChild(o.container),this.tickets[s].ticket=o,this.tickets[s].active=!0;break}},e.prototype.collectTicket=function(e){this.tickets[e].ticket.collect(),1==this.tickets[e].ticket.isHeart&&this.scene.addLife(),this.tickets[e].active=!1,this.tickets[e].ticket=null},e.prototype.triggerGameOver=function(){this.gameOverTriggered=!0},e.prototype.getAngle=function(e,t,i,s){var o=e-i,a=s-t;return Math.atan2(a,o)},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){if(0!=this.tickets.length)for(var e=0;e<this.tickets.length;e++)1==this.tickets[e].active&&Game.ticketPool.returnTicket(this.tickets[e].ticket)},e}(),BeachBuggyPhysicsManager=function(){function e(e,t){this.physicsEnabled=!0,this.backWheelGrounded=!1,this.resizeRatio=1,this.CHASSIS=Math.pow(2,0),this.WHEELS=Math.pow(2,1),this.LEVEL=Math.pow(2,2),this.scene=e,this.mainContainer=t,this.backWheelCurrentStartedTouchingChunks=[],this.powerupRatio=1}return e.prototype.initPhysicsWorld=function(){this.world=new p2.World({gravity:[0,-440]}),this.flipping=!1,this.world.broadphase=new p2.NaiveBroadphase(1),this.boundBodies=[],this.world.defaultContactMaterial.restitution=.01,this.world.defaultContactMaterial.friction=1.6,this.carBodyBottomShape=new p2.Capsule({length:220,radius:30}),this.carBodyTopShape=new p2.Capsule({length:110,radius:30}),this.carBody=new p2.Body({mass:18,position:[100,Game.stageHeight-200]}),this.carBody.addShape(this.carBodyBottomShape,[-10,5]),this.carBody.addShape(this.carBodyTopShape,[0,28],-.13),this.carBody.angularDamping=.4,this.characterHead=new p2.Body({mass:2,position:[150,Game.stageHeight-200]}),this.characterHeadShape=new p2.Circle({radius:55}),this.characterHead.addShape(this.characterHeadShape),this.carFrontWheelShape=new p2.Circle({radius:48}),this.carFrontWheelBody=new p2.Body({mass:10,position:[100,Game.stageHeight-200]}),this.carFrontWheelBody.addShape(this.carFrontWheelShape,[0,0]),this.carFrontWheelBody.angularDamping=.65,this.carBackWheelShape=new p2.Circle({radius:51}),this.carBackWheelBody=new p2.Body({mass:10,position:[100,Game.stageHeight-200]}),this.carBackWheelBody.addShape(this.carBackWheelShape,[0,0]),this.carBackWheelBody.angularDamping=.65,this.topDamageSensorBody=new p2.Body({mass:.1,position:[-100,Game.stageHeight-210]}),this.topDamageSensorShape=new p2.Box({width:250,height:30}),this.topDamageSensorBody.addShape(this.topDamageSensorShape),this.topDamageSensorShape.sensor=!0,this.topDamageSensorLock=new p2.LockConstraint(this.carBody,this.topDamageSensorBody,{collideConnected:!1,localOffsetB:[0,45]}),this.headConstraint=new p2.PrismaticConstraint(this.carBody,this.characterHead,{localAnchorA:[-35,-60],localAnchorB:[0,0],localAxisA:[0,1],disableRotationalLock:!1}),this.carBody.angularVelocity=0,this.carBody.velocity=[0,0],this.frontWheelSupportConstraint=new p2.PrismaticConstraint(this.carBody,this.carFrontWheelBody,{localAnchorA:[115,-60],localAnchorB:[0,0],localAxisA:[0,1],disableRotationalLock:!0}),this.backWheelSupportConstraint=new p2.PrismaticConstraint(this.carBody,this.carBackWheelBody,{localAnchorA:[-120,-60],localAnchorB:[0,0],localAxisA:[0,1],disableRotationalLock:!0}),this.frontWheelSupportConstraint.setLimits(-10,30),this.backWheelSupportConstraint.setLimits(-10,30),this.headConstraint.setLimits(75,85);this.world.addSpring(new p2.LinearSpring(this.carBody,this.carFrontWheelBody,{restLength:18,stiffness:55,damping:30,localAnchorA:[0,-140],localAnchorB:[0,0]})),this.world.addSpring(new p2.LinearSpring(this.carBody,this.carBackWheelBody,{restLength:18,stiffness:55,damping:30,localAnchorA:[0,-140],localAnchorB:[0,0]})),this.world.addSpring(new p2.LinearSpring(this.carBody,this.characterHead,{restLength:1,stiffness:30,damping:30,localAnchorA:[0,60],localAnchorB:[0,0]})),this.frontWheelSupportConstraint.collideConnected=!1,this.backWheelSupportConstraint.collideConnected=!1,this.world.addBody(this.carBody),this.world.addBody(this.carFrontWheelBody),this.world.addBody(this.carBackWheelBody),this.world.addBody(this.topDamageSensorBody),this.world.addBody(this.characterHead),this.world.addConstraint(this.frontWheelSupportConstraint),this.world.addConstraint(this.backWheelSupportConstraint),this.world.addConstraint(this.topDamageSensorLock),this.world.addConstraint(this.headConstraint),this.carFrontWheelShape.collisionGroup=this.WHEELS,this.carBackWheelShape.collisionGroup=this.WHEELS,this.carBodyBottomShape.collisionGroup=this.CHASSIS,this.carBodyTopShape.collisionGroup=this.CHASSIS,this.topDamageSensorShape.collisionGroup=this.CHASSIS,this.carBodyBottomShape.collisionMask=this.LEVEL,this.carBodyTopShape.collisionMask=this.LEVEL,this.topDamageSensorShape.collisionMask=this.LEVEL,this.carBackWheelShape.collisionMask=this.LEVEL,this.carFrontWheelShape.collisionMask=this.LEVEL;var e=this;this.world.on("beginContact",function(t){e.checkCollision(e,t)}),this.world.on("endContact",function(t){e.checkEndCollision(e,t)}),this.world.on("postStep",function(e){}),this.physicsEnabled=!0},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angularVelocity=0,e.angularForce=0,e.angle=0,e.velocity=[0,0],e.setZeroForce(),e.mass/=2},e.prototype.flipBuggy=function(){this.flipping=!0,this.resetBody(this.carBody),this.resetBody(this.carFrontWheelBody),this.resetBody(this.carBackWheelBody),this.resetBody(this.characterHead),this.carBody.angularDamping=1,this.carBody.position[1]+=600,this.scene.hideBuggy(),TweenMax.delayedCall(.2,function(){this.scene.flashBuggy()},null,this),TweenMax.delayedCall(1,function(){this.carBody.angle=0,this.carBody.mass*=2,this.carFrontWheelBody.mass*=2,this.carBackWheelBody.mass*=2,this.characterHead.mass*=2,this.flipping=!1,this.carBody.angularDamping=.4},null,this)},e.prototype.applyDriveForce=function(e){if(1!=this.flipping){var t=0,i=this.carBody.velocity[0]/2e4;e<0?t=e:(t=e,i<0&&(t=0)),this.carFrontWheelBody.angularForce+=4500*t*this.powerupRatio,this.carBackWheelBody.angularForce+=4500*t*this.powerupRatio,0==this.scene.terrainManager.checkChunkOverlap(this.carFrontWheelBody).contact&&(this.carBody.angularForce+=9e3*-t/this.powerupRatio),this.carFrontWheelBody.angularForce<-2e6&&(this.carFrontWheelBody.angularForce=-2e6),this.carBackWheelBody.angularForce<-2e6&&(this.carBackWheelBody.angularForce=-2e6)}},e.prototype.bindSpriteToBody=function(e,t){this.boundBodies.push({sprite:e,body:t})},e.prototype.unbindSpriteFromBody=function(e){this.boundBodies&&this.boundBodies.splice(this.findIndexByKeyValue(this.boundBodies,"sprite",e),1)},e.prototype.checkCollision=function(e,t){t.bodyA==e.carFrontWheelBody&&t.bodyB.shapes[0].collisionGroup==this.LEVEL&&(this.scene.frontWheelDown=!0),t.bodyB==e.carFrontWheelBody&&t.bodyA.shapes[0].collisionGroup==this.LEVEL&&(this.scene.frontWheelDown=!0),t.bodyA==e.topDamageSensorBody&&t.bodyB.shapes[0].collisionGroup==this.LEVEL&&e.detectDamage(e,t.bodyA),t.bodyB==e.topDamageSensorBody&&t.bodyA.shapes[0].collisionGroup==this.LEVEL&&e.detectDamage(e,t.bodyB)},e.prototype.checkEndCollision=function(e,t){t.bodyA==e.carFrontWheelBody&&t.bodyB.shapes[0].collisionGroup==this.LEVEL&&(this.scene.frontWheelDown=!1),t.bodyB==e.carFrontWheelBody&&t.bodyA.shapes[0].collisionGroup==this.LEVEL&&(this.scene.frontWheelDown=!1)},e.prototype.detectDamage=function(e,t){var i=[];p2.vec2.copy(i,this.carBody.velocity),p2.vec2.scale(i,i,this.carBody.mass);var s=p2.vec2.length(i)/this.powerupRatio/60;this.scene.updateDustParams(s)},e.prototype.addBodyToWorld=function(e){this.world.addBody(e)},e.prototype.removeBodyFromWorld=function(e){this.world.removeBody(e)},e.prototype.removeConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.addConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.resizeElements=function(e,t){this.canvasHeight=t,this.canvasWidth=e,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},e.prototype.activatePowerup=function(){this.world.gravity=[0,-400],this.powerupRatio=3,this.world.defaultContactMaterial.friction=1.6*this.powerupRatio,this.frontWheelSupportConstraint.localAnchorA=[115,0],this.backWheelSupportConstraint.localAnchorA=[-120,0],this.frontWheelSupportConstraint.setLimits(-10,10),this.backWheelSupportConstraint.setLimits(-10,10),this.carFrontWheelBody.removeShape(this.carFrontWheelShape),this.carBackWheelBody.removeShape(this.carBackWheelShape),this.carFrontWheelShape=new p2.Circle({radius:100}),this.carBackWheelShape=new p2.Circle({radius:100}),this.carBackWheelBody.addShape(this.carBackWheelShape,[0,0]),this.carFrontWheelBody.addShape(this.carFrontWheelShape,[0,0]),this.carFrontWheelShape.collisionGroup=this.WHEELS,this.carBackWheelShape.collisionGroup=this.WHEELS,this.carBackWheelShape.collisionMask=this.LEVEL,this.carFrontWheelShape.collisionMask=this.LEVEL},e.prototype.deactivatePowerup=function(){this.world.gravity=[0,-440],this.powerupRatio=1,this.world.defaultContactMaterial.friction=1.6*this.powerupRatio,this.frontWheelSupportConstraint.localAnchorA=[115,-60],this.backWheelSupportConstraint.localAnchorA=[-120,-60],this.frontWheelSupportConstraint.setLimits(-10,30),this.backWheelSupportConstraint.setLimits(-10,30),this.carFrontWheelBody.removeShape(this.carFrontWheelShape),this.carBackWheelBody.removeShape(this.carBackWheelShape),this.carFrontWheelShape=new p2.Circle({radius:48}),this.carBackWheelShape=new p2.Circle({radius:51}),this.carBackWheelBody.addShape(this.carBackWheelShape,[0,0]),this.carFrontWheelBody.addShape(this.carFrontWheelShape,[0,0]),this.carFrontWheelShape.collisionGroup=this.WHEELS,this.carBackWheelShape.collisionGroup=this.WHEELS,this.carBackWheelShape.collisionMask=this.LEVEL,this.carFrontWheelShape.collisionMask=this.LEVEL},e.prototype.stepPhysics=function(){if(0!=this.physicsEnabled&&this.world){this.world.step(1/30);for(var e=0;e<this.boundBodies.length;e++)this.boundBodies[e].sprite.position.x=this.boundBodies[e].body.position[0],this.boundBodies[e].sprite.position.y=Game.stageHeight-this.boundBodies[e].body.position[1],this.boundBodies[e].sprite.rotation=-this.boundBodies[e].body.angle;this.carFrontWheelBody.angularVelocity>0?(this.carFrontWheelBody.angularForce=6e6*-this.carFrontWheelBody.angularVelocity,this.world.defaultContactMaterial.friction=5):this.world.defaultContactMaterial.friction=1.6*this.powerupRatio,this.carBackWheelBody.angularVelocity>0?(this.carBackWheelBody.angularForce=6e6*-this.carBackWheelBody.angularVelocity,this.world.defaultContactMaterial.friction=5):this.world.defaultContactMaterial.friction=1.6*this.powerupRatio}},e.prototype.killPhysicsWorld=function(e){},e.prototype.findIndexByKeyValue=function(e,t,i){for(var s=0;s<e.length;s++)if(e[s][t]==i)return s;return null},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.pause=function(){this.physicsEnabled=!1},e.prototype.resume=function(){this.physicsEnabled=!0},e.prototype.destroy=function(){this.world.clear(),this.world=null},e}(),BeachBuggyInputManager=function(){function e(e,t){this.scene=e,this.mainHolderRef=t,this.hitAreaSprite=Game.displayStore.getSprite("beach-buggy/blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.currentAngle=0,this.maxAngleDiff=1.4,this.minAngleDiff=.1,this.keyboardDown=!1,this.driveForce=0,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite)}return e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mousemove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseupoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))})):(e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchmove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchendoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}))},e.prototype.inputDown=function(e,t){t.x>Game.stageWidth/2?this.keyDown("right"):this.keyDown("left")},e.prototype.inputUp=function(e,t){t.x>Game.stageWidth/2?this.keyUp("right"):this.keyUp("left")},e.prototype.inputMove=function(e,t){},e.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},e.prototype.getInputAngle=function(){var e=this.currentAngle;return e>this.maxAngleDiff&&(e=this.maxAngleDiff),e<this.minAngleDiff&&(e=this.minAngleDiff),e},e.prototype.keyDown=function(e){if(1!=this.scene.tutorialOverlay.isOpen){switch(this.keyboardInput=e,e){case"left":this.driveForce=100;break;case"right":this.driveForce=-170;break;case"down":case"up":this.startAngle=0;break;case"spacebar":this.keyboardInput="spacebar"}this.keyboardDown=!0}},e.prototype.keyUp=function(e){if(1!=this.scene.tutorialOverlay.isOpen){switch(e){case"left":case"right":this.driveForce=0}this.keyboardDown=!1}},e.prototype.tick=function(){this.scene.physicsManager.applyDriveForce(this.driveForce)},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},e}(),BeachBuggyScrollingLayer=function(){function e(e,t,i,s){this.transitioned=!1,this.stripTarget=new PIXI.Point,this.containerTarget=new PIXI.Point,this.lastLayerMovement=new PIXI.Point,this.layerMovement=new PIXI.Point,this.scene=e,this.game=e.game,this.container=s,this.defaultY=i,this.depth=t,this.chunks=[],this.currentChunkIndex=0;for(var o=0;o<this.container.children.length;o++){var a=this.container.getSpriteAt(o);this.chunks.push(a)}this.layoutChunks(),this.upperLimit=0,this.lowerLimit=-this.chunkWidth*this.chunks.length+Game.stageWidth}return e.prototype.layoutChunks=function(){for(var e=0,t=0;t<this.chunks.length;t++)this.chunkWidth=this.chunks[t].width,this.chunks[t].position.x=e-this.chunkWidth*this.currentChunkIndex,e+=this.chunks[t].width},e.prototype.reorderArray=function(e,t){-1==t?e.push(e.shift()):e.unshift(e.pop())},e.prototype.tick=function(e,t){this.smoothing=e,this.layerMovement.x=t.x-this.lastLayerMovement.x,this.layerMovement.y=t.y-this.lastLayerMovement.y,this.lastLayerMovement.x=t.x,this.lastLayerMovement.y=t.y,this.stripTarget.x+=this.layerMovement.x*this.depth,this.stripTarget.y+=this.layerMovement.y*this.depth,this.containerTarget.x+=(this.stripTarget.x-this.containerTarget.x)/this.smoothing,this.containerTarget.y+=(this.stripTarget.y-this.containerTarget.y)/this.smoothing,this.containerTarget.x>this.stripTarget.x+1?this.direction=-1:this.containerTarget.x<this.stripTarget.x-1?this.direction=1:this.direction=0,this.depth<-1&&(this.direction=-1*this.direction),this.container.position.x=-this.containerTarget.x,this.container.position.y=this.defaultY-this.containerTarget.y,this.direction<0?this.container.position.x+t.x<=this.lowerLimit&&(this.currentChunkIndex--,this.reorderArray(this.chunks,-1),this.layoutChunks()):this.direction>0&&this.container.position.x+t.x>=this.upperLimit&&(this.currentChunkIndex++,this.reorderArray(this.chunks,1),this.layoutChunks()),this.upperLimit=this.currentChunkIndex*this.chunkWidth,this.lowerLimit=-this.chunkWidth*this.chunks.length+Game.stageWidth+100+this.currentChunkIndex*this.chunkWidth},e.prototype.destroy=function(){this.chunks=[]},e}(),BeachBuggyTerrainManager=function(){function e(e){this.containerTarget=new PIXI.Point,this.lastLayerMovementX=0,this.layerMovementX=0,this.chunkWidth=100,this.scene=e,this.game=e.game,this.currentChunkIndex=0,this.chunks=[],this.checkpoint=Game.displayStore.getAnimatedSprite("beach-buggy/flag-frames"),this.checkpoint.loop=!0,this.checkpoint.animationSpeed=.3,this.checkpoint.play(),this.ticketOpportunities=0,this.checkpoint.rotation=-.2,this.flagTimeline=new TimelineMax,this.flagTimeline.add(TweenMax.to(this.checkpoint,2,{rotation:.2,yoyo:!0,repeat:-1,ease:Power1.easeInOut,repeatDelay:1})),this.container=Game.displayStore.getContainer("beach-buggy/terrain-holder"),this.container.position.y=0,this.createChunks(),this.upperLimit=0,this.lowerLimit=-this.chunkWidth*this.chunks.length+Game.stageWidth}return e.prototype.createChunks=function(){for(var e=0;e<12;e++){var t=new BeachBuggyTerrainChunk(this.scene,this.container,e);this.chunks.push(t)}this.layoutChunks()},e.prototype.layoutChunks=function(){for(var e=-30,t=0;t<this.chunks.length;t++)this.chunks[t].updatePos(e+100,500,100,100),e=this.chunks[t].xPos,this.chunks[t].endY,this.chunks[t].grad},e.prototype.reorderArray=function(e,t){-1==t?e.push(e.shift()):e.unshift(e.pop())},e.prototype.checkChunkOverlap=function(e){for(var t=!1,i=0;i<this.chunks.length;i++){var s=this.chunks[i].getChunkBody();if(1==e.overlaps(s.body)){t=!0;break}}return{contact:t,chunkAngle:s.angle}},e.prototype.addNextChunk=function(e){var t=e.shift();e.push(t);var i,s,o=e[e.length-2],a=(o.grad,Math.abs(this.currentChunkIndex)),r=BeachBuggyGameplayScene.checkpointDistance;if(a<300&&(s=1),a>=300&&a<600&&(s=2),a>=600&&a<900&&(s=3),a>=900&&(s=Game.getRandom(3,4,!0)),(i=o.altitude<-350?Game.getRandom(-s,0,!0)+o.grad:o.altitude>300?Game.getRandom(0,s,!0)+o.grad:Game.getRandom(-s,s,!0)+o.grad)>4&&(i=4),i<-4&&(i=-4),t.showGradShape(i),this.currentChunkIndex<0&&this.scene.updateScoreText(-this.currentChunkIndex),t.updatePos(o.xPos+100,o.altitude,t.startY,o.endY),(a-BeachBuggyGameplayScene.checkpointDistance/2)%r==0){if(this.ticketOpportunities%5==0&&0!=this.ticketOpportunities){var n=Game.getRandom(0,1);console.log(n,this.scene.health/1500),n>this.scene.health/1e3?this.ticket=Game.ticketPool.getHeart():this.ticket=Game.ticketPool.getTicket()}else this.ticket=Game.ticketPool.getTicket();this.ticket.container.position.x=t.xPos,0!=t.grad?this.ticket.container.position.y=t.altitude-55:this.ticket.container.position.y=t.altitude-150,this.container.addChild(this.ticket.container),this.ticketOpportunities++}a%r==0&&(this.lastCheckpointIndex=a,this.checkpoint.position.x=t.xPos,0!=t.grad?this.checkpoint.position.y=t.altitude+40:this.checkpoint.position.y=t.altitude-35,this.container.addChildAt(this.checkpoint,0)),a==this.lastCheckpointIndex+7&&this.scene.passedCheckpoint(),a==this.lastCheckpointIndex+6+BeachBuggyGameplayScene.checkpointDistance/2&&Math.abs(this.scene.carBody.position.y-this.ticket.container.position.y)<200&&(1==this.ticket.isHeart&&this.scene.addHealth(300),this.ticket.collect())},e.prototype.addPrevChunk=function(e){var t=e.pop();e.unshift(t),t.showGradShape(0);var i=e[1];t.updatePos(i.xPos-100,i.altitude,t.startY,i.startY)},e.prototype.tick=function(e,t){this.smoothing=e,this.layerMovementX=t-this.lastLayerMovementX,this.lastLayerMovementX=t,this.containerTarget.x+=(this.layerMovementX-this.containerTarget.x)/this.smoothing,this.layerMovementX<-1?this.direction=-1:this.layerMovementX>1?this.direction=1:this.direction=0,this.direction<=0?t<=this.lowerLimit&&(this.currentChunkIndex--,this.addNextChunk(this.chunks)):this.direction>0&&t>=this.upperLimit&&(this.currentChunkIndex++,this.addPrevChunk(this.chunks)),this.upperLimit=(this.currentChunkIndex-1)*this.chunkWidth,this.lowerLimit=-this.chunkWidth*this.chunks.length+Game.stageWidth+this.currentChunkIndex*this.chunkWidth},e.prototype.pause=function(){this.checkpoint.stop(),this.scene.pauseResumeTween(this.flagTimeline,"pause")},e.prototype.resume=function(){this.checkpoint.play(),this.scene.pauseResumeTween(this.flagTimeline,"resume")},e.prototype.destroy=function(){for(var e=0;e<this.chunks.length;e++)this.chunks[e].destroy();this.chunks=[],this.container.removeChild(this.checkpoint),this.flagTimeline=this.scene.killTween(this.flagTimeline),Game.ticketPool.returnTicket(this.ticket)},e}(),BeachBuggyTerrainChunk=function(){function e(e,t,i){this.grads=[-4,-3,-2,-1,0,1,2,3,4],this.baselineY=500,this.scene=e,this.game=e.game,this.grad=0,this.xPos=0,this.startY=0,this.endY=0,this.index=i,this.container=t,this.gradShapes=[],this.createGrads(),this.showGradShape(0)}return e.prototype.getChunkBody=function(){return{body:this.gradShapes[this.activeShapeIndex].body,angle:this.currentShapeAngle}},e.prototype.createGrads=function(){for(var e=0;e<9;e++){var t=new p2.Body({mass:0,position:[0,0]}),i=this.getPath(this.grads[e]),s=Game.displayStore.getSprite("beach-buggy/terrain-grad-"+this.grads[e]),o=Game.displayStore.getSprite("beach-buggy/under-shape"),a=new p2.Box({width:100,height:100});t.fromPolygon(i,{skipAdjustCenterOfMass:!0}),t.shapes[0].collisionGroup=this.scene.physicsManager.LEVEL,t.shapes[0].collisionMask=this.scene.physicsManager.WHEELS|this.scene.physicsManager.CHASSIS,a.collisionGroup=this.scene.physicsManager.LEVEL,a.collisionMask=this.scene.physicsManager.WHEELS|this.scene.physicsManager.CHASSIS,t.addShape(a,[0,-100]),this.scene.physicsManager.bindSpriteToBody(s,t),this.gradShapes.push({body:t,shape:t.shapes[0],sprite:s,undersprite:o,grad:this.grads[e],startY:this.getStartEndY(this.grads[e]).startY})}},e.prototype.showGradShape=function(e){for(var t=0;t<this.gradShapes.length;t++)if(this.gradShapes[t].grad==e){this.scene.physicsManager.addBodyToWorld(this.gradShapes[t].body),this.container.addChild(this.gradShapes[t].undersprite),this.container.addChild(this.gradShapes[t].sprite),this.activeShapeIndex=t,this.grad=e;var i=this.getStartEndY(e);this.endY=i.endY,this.startY=i.startY,this.currentShapeAngle=i.angle}else this.gradShapes[t].sprite.parent==this.container&&(this.scene.physicsManager.removeBodyFromWorld(this.gradShapes[t].body),this.container.removeChild(this.gradShapes[t].sprite),this.container.removeChild(this.gradShapes[t].undersprite))},e.prototype.getStartEndY=function(e){var t={startY:0,endY:0,angle:0};switch(e){case-4:t.startY=-50,t.endY=0,t.angle=.453786;break;case-3:t.startY=-37.5,t.endY=0,t.angle=.349066;break;case-2:t.startY=-25,t.endY=0,t.angle=.226893;break;case-1:t.startY=-12.5,t.endY=0,t.angle=.10472;break;case 0:t.startY=-100,t.endY=-100,t.angle=0;break;case 1:t.startY=0,t.endY=-12.5,t.angle=-.10472;break;case 2:t.startY=0,t.endY=-25,t.angle=-.226893;break;case 3:t.startY=0,t.endY=-37.5,t.angle=-.349066;break;case 4:t.startY=0,t.endY=-50,t.angle=-.453786}return t},e.prototype.updatePos=function(e,t,i,s){for(var o=0;o<this.gradShapes.length;o++)this.gradShapes[o].body.position[0]=e,this.gradShapes[o].body.position[1]=Game.stageHeight-t-s+i,this.gradShapes[o].undersprite.position.x=e,this.gradShapes[o].undersprite.position.y=t+s-i+50,this.gradShapes[o].undersprite.height=1e3,this.altitude=this.gradShapes[o].undersprite.position.y-50,this.xPos=this.gradShapes[o].undersprite.position.x},e.prototype.getPath=function(e){var t;switch(e){case-4:t=[[-50,-50],[-50,0],[50,-50]];break;case-3:t=[[-50,-50],[-50,-12.5],[50,-50]];break;case-2:t=[[-50,-50],[-50,-25],[50,-50]];break;case-1:t=[[-50,-50],[-50,-37.5],[50,-50]];break;case 0:t=[[-50,-50],[-50,50],[50,50],[50,-50]];break;case 1:t=[[-50,-50],[50,-37.5],[50,-50]];break;case 2:t=[[-50,-50],[50,-25],[50,-50]];break;case 3:t=[[-50,-50],[50,-12.5],[50,-50]];break;case 4:t=[[-50,-50],[50,0],[50,-50]]}return t},e.prototype.destroy=function(){for(var e=0;e<this.gradShapes.length;e++)Game.displayStore.returnPooledItem(this.gradShapes[e].undersprite),Game.displayStore.returnPooledItem(this.gradShapes[e].sprite);this.gradShapes=[]},e}(),BeachBuggyTimer=function(){function e(e){this.scene=e,this.game=e.game,this.time=0,this.timeText=Game.displayStore.getBitmapText("timer-font"),this.timeText.scale.x=this.timeText.scale.y=.55,this.timeText.text=this.convertSecondsToTime(this.time),this.timeText.position.x=-this.timeText.width/2,this.timeText.tint=16777215,this.container=Game.displayStore.getContainer("beach-buggy/timer-holder"),this.container.position.x=540,this.container.position.y=40,this.container=Game.displayStore.getContainer("beach-buggy/timer-holder"),this.timerInner=this.container.getContainer("beach-buggy/timer-inner"),this.timerIcon=this.timerInner.getSprite("beach-buggy/timer-icon"),this.container.position.x=540,this.container.position.y=40,this.timerInner.addChild(this.timeText),this.timeText.position.x=this.timerIcon.position.x+30,this.timeText.position.y=this.timerIcon.position.y-5,this.timerInner.position.x=-60,this.timerInner.position.y=this.container.height/4}return e.prototype.start=function(){this.addTime(5)},e.prototype.addTime=function(e){function t(){this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.time<s?(this.time++,this.timeText.text=this.convertSecondsToTime(this.time),this.timerTimeline.call(t,null,this,i)):this.timerTimeline.call(this.tickTime,null,this,"+=1")}this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.timeText.tint=6018816;var i=.05;this.timerTimeline.call(t,null,this,i);var s=this.time+e;0==this.time||Game.playSound("beach-buggy/checkpoint.mp3")},e.prototype.pause=function(){this.scene.pauseResumeTween(this.timerTimeline,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.timerTimeline,"resume")},e.prototype.convertSecondsToTime=function(e){var t=Math.floor(e/60),i=Math.ceil(e%60),s=String(t),o=String(i);return i<10&&(o="0"+i),e%60%1==0?s+":"+o:s+" "+o},e.prototype.destroy=function(){this.timerTimeline=this.scene.killTween(this.timerTimeline),this.destroyed=!0},e.prototype.tickTime=function(){1!=this.destroyed&&1!=this.scene.paused&&(this.time>0?(this.time-=.5,this.timeText.text=this.convertSecondsToTime(this.time),this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.timerTimeline.call(this.tickTime,null,this,.5),this.time<=5&&Game.playSound("beach-buggy/time-running-out.mp3",.3),this.time<=5?this.timeText.tint=16711680:this.timeText.tint=16777215):this.scene.endGame(this.scene))},e}(),JetSkiPhysicsManager=function(){function e(e,t){this.physicsEnabled=!0,this.hullShape=[[157,0],[312,62],[293,83],[278,94],[256,103],[231,112],[205,117],[7,118],[0,74],[26,9]],this.headPositions=[{id:"tomika",x:42,y:12},{id:"zack",x:43,y:10},{id:"freddy",x:42,y:10},{id:"lawrence",x:42,y:10},{id:"summer",x:42,y:10}],this.resizeRatio=1,this.HULL=Math.pow(2,0),this.HULLFLOATS=Math.pow(2,1),this.WATER=Math.pow(2,2),this.RAMP=Math.pow(2,3),this.NONE=Math.pow(2,4),this.TICKET=Math.pow(2,5),this.PLAYER=Math.pow(2,6),this.SEAT=Math.pow(2,7),this.jetskiReset=!1,this.scene=e,this.mainContainer=t,this.powerupRatio=1}return e.prototype.initPhysicsWorld=function(){if(this.world=new p2.World({gravity:[0,-450]}),this.stepCount=0,this.isTouchingWater=!0,this.isDrowning=!1,this.hitRampAllowed=!0,this.flipping=!1,this.randomBobCount=0,this.randomBobThreshold=Game.getRandom(5,50,!0),this.randomWaveCount=0,this.randomWaveThreshold=Game.getRandom(10,100,!0),this.hitRampCooldownThreshold=60,this.hitRampCooldownCount=0,this.world.broadphase=new p2.NaiveBroadphase(1),this.boundBodies=[],this.waterLiftForce=[0,0],this.waterViscousForce=[0,0],this.centerOfBuoyancy=[0,0],this.shapePos=[0,0],this.shapeAngle=0,this.aabb=new p2.AABB,this.vel=[0,0],this.startJetski=!1,this.liftForce=7,this.viscosity=15,this.world.defaultContactMaterial.restitution=0,this.world.defaultContactMaterial.friction=.01,this.waterPlane=new p2.Plane,this.waterBody=new p2.Body({mass:0,position:[0,Game.stageHeight-430],angle:0,collisionResponse:!1}),this.waterBody.addShape(this.waterPlane),this.waterPlane.collisionGroup=this.WATER,this.waterPlane.collisionMask=this.HULLFLOATS|this.RAMP,this.waterDetectPlane=new p2.Plane,this.waterDetectBody=new p2.Body({mass:0,position:[0,180],angle:0}),this.waterDetectBody.addShape(this.waterDetectPlane),this.waterDetectPlane.collisionGroup=this.WATER,this.waterDetectPlane.collisionMask=this.HULL|this.HULLFLOATS,this.waterDetectPlane.sensor=!0,this.world.addBody(this.waterDetectBody),this.dockBody=new p2.Body({mass:0,position:[50,210]}),this.dockShape=new p2.Box({width:600,height:100}),this.dockBody.addShape(this.dockShape),this.dockShape.collisionGroup=this.RAMP,this.dockShape.collisionMask=this.HULL,this.jetskiBody=new p2.Body({mass:45,position:[0,Game.stageHeight]}),this.jetskiBodyWeightBalance=new p2.Body({mass:30,position:[0,0]}),this.jetskiShapeWeightBalance=new p2.Box({width:300,height:5}),this.jetskiShapeWeightBalance.collisionGroup=this.NONE,this.jetskiBodyWeightBalance.addShape(this.jetskiShapeWeightBalance),this.jetskiSeatBody=new p2.Body({mass:.1,position:[this.jetskiBody.position[0]-90,this.jetskiBody.position[1]+50],angle:-.25}),this.jetskiSeatShape=new p2.Box({width:110,height:50}),this.jetskiSeatBody.addShape(this.jetskiSeatShape),this.jetskiSeatShape.collisionGroup=this.SEAT,this.jetskiSeatShape.collisionMask=this.PLAYER,this.boatBodyShapePhysics1=new p2.Box({width:10,height:10}),this.boatBodyShapePhysics1.collisionGroup=this.HULLFLOATS,this.boatBodyShapePhysics1.collisionMask=this.WATER,this.boatBodyShapePhysics2=new p2.Box({width:10,height:10}),this.boatBodyShapePhysics2.collisionGroup=this.HULLFLOATS,this.boatBodyShapePhysics2.collisionMask=this.WATER,this.boatBodyShapePhysics3=new p2.Box({width:10,height:10}),this.boatBodyShapePhysics3.collisionGroup=this.HULLFLOATS,this.boatBodyShapePhysics3.collisionMask=this.WATER,this.buoyancyShapes=[],this.buoyancyShapes.push(this.boatBodyShapePhysics1),this.buoyancyShapes.push(this.boatBodyShapePhysics2),this.buoyancyShapes.push(this.boatBodyShapePhysics3),this.jetskiShapeWeightBalanceLock=new p2.LockConstraint(this.jetskiBody,this.jetskiBodyWeightBalance,{collideConnected:!1,localOffsetB:[-20,-50]}),this.jetskiShapeSeatLock=new p2.LockConstraint(this.jetskiBody,this.jetskiSeatBody,{collideConnected:!1,localOffsetB:[-80,-5]}),this.jetskiBody.fromPolygon(this.convertShapeFromPhotoshop(this.hullShape,[157,60]),{skipAdjustCenterOfMass:!0}),this.jetskiBody.addShape(this.boatBodyShapePhysics1,[-170,-15]),this.jetskiBody.addShape(this.boatBodyShapePhysics2,[60,-20]),this.jetskiBody.addShape(this.boatBodyShapePhysics3,[80,-40]),this.jetskiBody.shapes[0].collisionGroup=this.HULL,this.jetskiBody.shapes[0].collisionMask=this.RAMP|this.WATER|this.TICKET,this.jetskiBody.angle=-1,this.jetskiBody.angularVelocity=0,this.jetskiBody.damping=0,this.jetskiBody.angularDamping=0,this.characterHead=new p2.Body({mass:.3,gravityScale:.1,position:[300,300]}),this.characterHeadShape=new p2.Circle({radius:55}),this.characterHead.addShape(this.characterHeadShape),this.characterHead.angularDamping=.999999,this.characterHead.damping=.79,this.characterHeadShape.collisionGroup=this.HULLFLOATS,this.characterHeadShape.collisionMask=this.WATER,0==Game.isLowEndIPad){this.characterBody=new p2.Body({mass:.5,gravityScale:.1,position:[this.jetskiBody.position[0]-45,this.jetskiBody.position[1]+45]}),this.characterBodyShape=new p2.Circle({radius:35}),this.characterBody.addShape(this.characterBodyShape),this.characterBody.angularDamping=.7,this.characterBody.damping=.69,this.characterBodyShape.collisionGroup=this.PLAYER,this.characterBodyShape.collisionMask=this.SEAT,this.characterBodyBack=new p2.Body({mass:.4,gravityScale:.1,position:[this.jetskiBody.position[0],this.jetskiBody.position[1]]}),this.characterBodyBackShape=new p2.Box({width:30,height:10}),this.characterBodyBack.addShape(this.characterBodyBackShape),this.characterBodyBack.angularDamping=.7,this.characterBodyBack.damping=.69,this.characterBodyBackShape.collisionGroup=this.PLAYER,this.characterBodyBackShape.collisionMask=this.SEAT,this.characterArm=new p2.Body({mass:1,gravityScale:.1,position:[this.jetskiBody.position[0]-50,this.jetskiBody.position[1]+59]}),this.characterArmShape=new p2.Box({width:30,height:10}),this.characterArm.addShape(this.characterArmShape),this.characterArm.angularDamping=.7,this.characterArm.damping=.69,this.characterArmShape.collisionGroup=this.NONE,this.characterArmShape.collisionMask=this.WATER,this.characterLegBottom=new p2.Body({mass:1,gravityScale:.1,position:[this.jetskiBody.position[0]-10,this.jetskiBody.position[1]]}),this.characterLegBottomShape=new p2.Box({width:10,height:20}),this.characterLegBottom.addShape(this.characterLegBottomShape),this.characterLegBottom.angularDamping=.7,this.characterLegBottom.damping=.99,this.characterLegBottomShape.collisionGroup=this.NONE,this.characterLegBottomShape.collisionMask=this.WATER,this.characterLegTop=new p2.Body({mass:1,gravityScale:.1,position:[this.jetskiBody.position[0]-10,this.jetskiBody.position[1]]}),this.characterLegTopShape=new p2.Box({width:30,height:15}),this.characterLegTop.addShape(this.characterLegTopShape),this.characterLegTop.angularDamping=.7,this.characterLegTop.damping=.69,this.characterLegTopShape.collisionGroup=this.NONE,this.characterLegTopShape.collisionMask=this.WATER,this.armConstraint=new p2.RevoluteConstraint(this.jetskiBody,this.characterArm,{localPivotA:[-14,53],localPivotB:[41,-9],collideConnected:!1}),this.armSpring=new p2.RotationalSpring(this.jetskiBody,this.characterArm,{restAngle:-1,stiffness:5e3}),this.armConstraint.setLimits(-.8,.8),this.world.addSpring(this.armSpring),this.bodyArmConstraint=new p2.RevoluteConstraint(this.characterArm,this.characterBody,{localPivotA:[-3,3],localPivotB:[20,15],collideConnected:!1}),this.bodyArmSpring=new p2.RotationalSpring(this.characterArm,this.characterBody,{restAngle:.4,stiffness:6e3,damping:99999}),this.bodyArmConstraint.setLimits(-.2,.6),this.world.addSpring(this.bodyArmSpring);for(var e=0;e<this.headPositions.length;e++){var t=this.scene.selectedCharacter;this.headPositions[e].id==t&&(this.headPositionY=this.headPositions[e].y,this.headPositionX=this.headPositions[e].x)}this.headConstraint=new p2.RevoluteConstraint(this.characterBody,this.characterHead,{localPivotA:[this.headPositionX,this.headPositionY+6],localPivotB:[-5,-35],collideConnected:!1}),this.headSpring=new p2.RotationalSpring(this.characterBody,this.characterHead,{restAngle:-.3,stiffness:5e4,damping:99999}),this.world.addSpring(this.headSpring),this.legBodyConstraint=new p2.RevoluteConstraint(this.characterBody,this.characterLegTop,{localPivotA:[0,-47],localPivotB:[-5,-6],collideConnected:!1}),this.legBodySpring=new p2.RotationalSpring(this.characterBody,this.characterLegTop,{restAngle:-.3,stiffness:2e4,damping:99999}),this.legBodyConstraint.setLimits(-.3,0),this.world.addSpring(this.legBodySpring),this.legTopConstraint=new p2.RevoluteConstraint(this.characterLegBottom,this.characterLegTop,{localPivotA:[1,5],localPivotB:[38,-12],collideConnected:!1}),this.legTopSpring=new p2.RotationalSpring(this.characterLegBottom,this.characterLegTop,{restAngle:-.3,stiffness:2e4,damping:99999}),this.world.addSpring(this.legTopSpring),this.legBottomConstraint=new p2.RevoluteConstraint(this.jetskiBody,this.characterLegBottom,{localPivotA:[-9,-18],localPivotB:[-3,-30],collideConnected:!1}),this.legBottomSpring=new p2.RotationalSpring(this.jetskiBody,this.characterLegBottom,{restAngle:0,stiffness:1e5,damping:99999}),this.world.addSpring(this.legBottomSpring),this.backBodyConstraint=new p2.RevoluteConstraint(this.characterBody,this.characterBodyBack,{localPivotA:[12,-18],localPivotB:[-15,19],collideConnected:!1}),this.backBodyJetskiConstraint=new p2.RevoluteConstraint(this.jetskiBody,this.characterBodyBack,{localPivotA:[-13,6],localPivotB:[24,-12],collideConnected:!1})}else this.headConstraint=new p2.RevoluteConstraint(this.jetskiBody,this.characterHead,{localPivotA:[-35,75],localPivotB:[-5,-35],collideConnected:!1}),this.headSpring=new p2.RotationalSpring(this.jetskiBody,this.characterHead,{restAngle:-.3,stiffness:5e4,damping:99999}),this.world.addSpring(this.headSpring);this.jetskiBody.angularVelocity=0,this.jetskiBody.velocity=[0,0],this.world.addConstraint(this.headConstraint),this.world.addConstraint(this.jetskiShapeWeightBalanceLock),this.world.addConstraint(this.jetskiShapeSeatLock),0==Game.isLowEndIPad&&(this.world.addConstraint(this.armConstraint),this.world.addConstraint(this.bodyArmConstraint),this.world.addConstraint(this.legBottomConstraint),this.world.addConstraint(this.legTopConstraint),this.world.addConstraint(this.legBodyConstraint),this.world.addConstraint(this.backBodyConstraint),this.world.addConstraint(this.backBodyJetskiConstraint),this.world.addBody(this.characterArm),this.world.addBody(this.characterBody),this.world.addBody(this.characterBodyBack),this.world.addBody(this.characterLegBottom),this.world.addBody(this.characterLegTop)),this.world.addBody(this.dockBody),this.world.addBody(this.jetskiBody),this.world.addBody(this.jetskiBodyWeightBalance),this.world.addBody(this.waterBody),this.world.addBody(this.characterHead),this.world.addBody(this.jetskiSeatBody);var i=this;this.world.on("beginContact",function(e){i.checkCollision(i,e)}),this.world.on("endContact",function(e){i.checkEndCollision(i,e)}),this.world.on("postStep",function(e){}),this.physicsEnabled=!0},e.prototype.convertShapeFromPhotoshop=function(e,t){for(var i=[],s=0;s<e.length;s++){var o=e[s][0]-t[0],a=e[s][1]-t[1];i.push([o,-a])}return i},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angularVelocity=0,e.angularForce=0,e.angle=0,e.velocity=[0,0],e.setZeroForce(),e.mass/=2},e.prototype.flipJetski=function(){this.flipping=!0,this.resetBody(this.jetskiBody),this.resetBody(this.jetskiBodyWeightBalance),this.resetBody(this.characterHead),this.scene.bubbleParticles.disable(),this.scene.bubbleParticlesHolder.alpha=0,0==Game.isLowEndIPad&&(this.resetBody(this.characterBody),this.resetBody(this.characterArm),this.resetBody(this.characterLegTop),this.resetBody(this.characterLegBottom),this.resetBody(this.characterBodyBack)),this.jetskiBody.position[1]+=500,this.scene.hideJetski(),TweenMax.delayedCall(.2,function(){this.scene.flashJetski(),this.jetskiBody.angle=-.35},null,this),TweenMax.delayedCall(1,function(){this.jetskiBody.mass*=2,this.characterHead.mass*=2,0==Game.isLowEndIPad&&(this.characterBody.mass*=2,this.characterBodyBack.mass*=2,this.characterArm.mass*=2,this.characterLegTop.mass*=2,this.characterLegBottom.mass*=2,this.jetskiBodyWeightBalance.mass*=2),this.flipping=!1},null,this)},e.prototype.applyDriveForce=function(e){if(1!=this.flipping&&1!=this.isDrowning){var t=0,i=this.jetskiBody.velocity[0]/2e4;e<0?t=e:(t=e,i<0&&(t=0));var s,o;1==this.scene.powerupIsActive?(s=Math.cos(this.jetskiBody.angle),o=Math.sin(this.jetskiBody.angle)):(s=Math.cos(this.jetskiBody.angle+.1),o=Math.sin(this.jetskiBody.angle+.1)),0==this.isTouchingWater?(this.jetskiBody.applyForce([100*t*-s,100*t*-o]),this.jetskiBody.angularForce+=t>0?4e4*-t:15e3*-t):(this.jetskiBody.applyForce([-s*(250*t*this.powerupRatio),-o*(250*t*this.powerupRatio)]),this.jetskiBody.angularForce+=8e3*-t/this.powerupRatio)}},e.prototype.bindSpriteToBody=function(e,t){this.boundBodies.push({sprite:e,body:t})},e.prototype.unbindSpriteFromBody=function(e){this.boundBodies&&this.boundBodies.splice(this.findIndexByKeyValue(this.boundBodies,"sprite",e),1)},e.prototype.checkCollision=function(e,t){t.bodyA==e.jetskiBody&&t.bodyB.shapes[0].collisionGroup==this.RAMP&&1==this.hitRampAllowed&&(this.hitRampCooldownCount=0,this.hitRampAllowed=!1,this.scene.hitRamp()),t.bodyB==e.jetskiBody&&t.bodyA.shapes[0].collisionGroup==this.RAMP&&1==this.hitRampAllowed&&(this.hitRampCooldownCount=0,this.hitRampAllowed=!1,this.scene.hitRamp())},e.prototype.checkEndCollision=function(e,t){t.bodyA==e.jetskiBody&&(t.bodyB.shapes[0].collisionGroup,this.RAMP),t.bodyB==e.jetskiBody&&(t.bodyA.shapes[0].collisionGroup,this.RAMP)},e.prototype.addBodyToWorld=function(e){this.world.addBody(e)},e.prototype.removeBodyFromWorld=function(e){this.world.removeBody(e)},e.prototype.removeConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.addConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.addBuoyancyShape=function(e){this.buoyancyShapes.push(e)},e.prototype.removeBuoyancyShape=function(e){this.buoyancyShapes.splice(this.buoyancyShapes.indexOf(e),1)},e.prototype.resizeElements=function(e,t){this.canvasHeight=t,this.canvasWidth=e,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},e.prototype.activatePowerup=function(){this.jetskiBody.gravityScale=.8,this.powerupRatio=2,this.jetskiBody.removeShape(this.boatBodyShapePhysics1),this.jetskiBody.addShape(this.boatBodyShapePhysics1,[-220,-25]),this.jetskiBody.removeShape(this.boatBodyShapePhysics3),this.jetskiBody.addShape(this.boatBodyShapePhysics3,[100,-50])},e.prototype.deactivatePowerup=function(){this.jetskiBody.gravityScale=1,this.powerupRatio=1,this.jetskiBody.removeShape(this.boatBodyShapePhysics1),this.jetskiBody.addShape(this.boatBodyShapePhysics1,[-170,-15]),this.jetskiBody.removeShape(this.boatBodyShapePhysics3),this.jetskiBody.addShape(this.boatBodyShapePhysics3,[80,-40])},e.prototype.calculateHullLevel=function(){var e=this.jetskiBody.shapes[0],t=this.jetskiBody,i=[0,0],s=0,o=new p2.AABB,a=[0,0],r=[0,0];t.vectorToWorldFrame(i,e.position),p2.vec2.add(i,i,t.position),s=e.angle+t.angle,e.computeAABB(o,i,s);var n=o.upperBound[0]-o.lowerBound[0],h=o.upperBound[1]-o.lowerBound[1];p2.vec2.set(a,o.lowerBound[0]+n/2,o.lowerBound[1]+h/2),p2.vec2.subtract(r,this.waterBody.position,a),p2.vec2.subtract(a,a,t.position),r[0]=0,this.submergedHullWidth=n+3*r[1]},e.prototype.applyAABBBuoyancyForces=function(e){for(var t,i=0;i<e.buoyancyShapes.length;i++){var s=e.buoyancyShapes[i];(t=s.body).vectorToWorldFrame(e.shapePos,s.position),p2.vec2.add(e.shapePos,e.shapePos,t.position),e.shapeAngle=s.angle+t.angle,s.computeAABB(e.aabb,e.shapePos,e.shapeAngle);var o;if(e.aabb.upperBound[1]<e.waterBody.position[1])p2.vec2.copy(e.centerOfBuoyancy,e.shapePos),o=s.area;else{if(!(e.aabb.lowerBound[1]<e.waterBody.position[1]))continue;var a=e.aabb.upperBound[0]-e.aabb.lowerBound[0],r=e.aabb.upperBound[1]-e.aabb.lowerBound[1];o=a*r,p2.vec2.set(e.centerOfBuoyancy,e.aabb.lowerBound[0]+a/2,e.aabb.lowerBound[1]+r/2)}p2.vec2.subtract(e.waterLiftForce,e.waterBody.position,e.centerOfBuoyancy),p2.vec2.scale(e.waterLiftForce,e.waterLiftForce,o*e.liftForce),e.waterLiftForce[0]=0,p2.vec2.subtract(e.centerOfBuoyancy,e.centerOfBuoyancy,t.position),t.getVelocityAtPoint(e.vel,e.centerOfBuoyancy),t==e.jetskiBody?0==this.isDrowning?p2.vec2.multiply(e.vel,e.vel,[.6,3.5]):p2.vec2.multiply(e.vel,e.vel,[4,4]):p2.vec2.multiply(e.vel,e.vel,[7,7]),p2.vec2.scale(e.waterViscousForce,e.vel,-e.viscosity),t.applyForce(e.waterViscousForce,e.centerOfBuoyancy),t.applyForce(e.waterLiftForce,e.centerOfBuoyancy)}},e.prototype.stepPhysics=function(){if(0!=this.physicsEnabled&&this.world){this.world.step(1/30),this.applyAABBBuoyancyForces(this),this.calculateHullLevel();for(var e=0;e<this.boundBodies.length;e++)this.boundBodies[e].sprite.position.x=this.boundBodies[e].body.position[0],this.boundBodies[e].sprite.position.y=Game.stageHeight-this.boundBodies[e].body.position[1],this.boundBodies[e].sprite.rotation=-this.boundBodies[e].body.angle;if(this.isTouchingWater=this.jetskiBody.overlaps(this.waterDetectBody),this.isDrowning=this.characterHead.overlaps(this.waterDetectBody),this.randomBobCount<this.randomBobThreshold?this.randomBobCount+=1:(this.randomBobThreshold=Game.getRandom(10,15,!0),this.randomBobCount=0,1==this.isTouchingWater&&this.jetskiBody.applyForce([0,Game.getRandom(4e4,5e4)],[150,0])),this.randomWaveCount<this.randomWaveThreshold)this.randomWaveCount+=1;else{this.randomWaveThreshold=Game.getRandom(15,30,!0),this.randomWaveThreshold/=this.powerupRatio,this.randomWaveCount=0;var t=(5e4+1e4*this.scene.jumpManager.spawnCount)*this.jetskiBody.velocity[0]/500;t>26e4&&(t=26e4),t/=this.powerupRatio,1==this.isTouchingWater&&this.jetskiBody.applyForce([0,Game.getRandom(0,t)],[Game.getRandom(-150,150),0])}this.hitRampCooldownCount<this.hitRampCooldownThreshold?this.hitRampCooldownCount+=1:0==this.hitRampAllowed&&(this.hitRampCooldownCount=0,this.hitRampAllowed=!0),0==this.isTouchingWater&&(this.randomWaveCount=0)}},e.prototype.killPhysicsWorld=function(e){},e.prototype.findIndexByKeyValue=function(e,t,i){for(var s=0;s<e.length;s++)if(e[s][t]==i)return s;return null},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.pause=function(){this.physicsEnabled=!1},e.prototype.resume=function(){this.physicsEnabled=!0},e.prototype.destroy=function(){this.world.clear(),this.world=null},e}(),JetSkiScrollingLayer=function(){function e(e,t,i,s){this.transitioned=!1,this.stripTarget=new PIXI.Point,this.containerTarget=new PIXI.Point,this.lastLayerMovement=new PIXI.Point,this.layerMovement=new PIXI.Point,this.scene=e,this.game=e.game,this.container=s,this.defaultY=i,this.depth=t,this.chunks=[],this.currentChunkIndex=0;for(var o=0;o<this.container.children.length;o++){var a=this.container.getSpriteAt(o);this.chunks.push(a)}this.layoutChunks(),this.upperLimit=0,this.lowerLimit=-this.chunkWidth*this.chunks.length+Game.stageWidth}return e.prototype.layoutChunks=function(){for(var e=0,t=0;t<this.chunks.length;t++)this.chunkWidth=this.chunks[t].width,this.chunks[t].position.x=e-this.chunkWidth*this.currentChunkIndex,e+=this.chunks[t].width},e.prototype.reorderArray=function(e,t){-1==t?e.push(e.shift()):e.unshift(e.pop())},e.prototype.showOnlyChunkChild=function(e,t){for(var i=0;i<this.chunks.length;i++)for(var s=this.chunks[i],o=0;o<s.children.length;o++){var a=s.getSpriteAt(o);o==e?TweenMax.to(a,.5,{alpha:1}):a!=t&&TweenMax.to(a,.5,{alpha:0})}},e.prototype.tick=function(e,t){this.smoothing=e,this.layerMovement.x=t.x-this.lastLayerMovement.x,this.layerMovement.y=t.y-this.lastLayerMovement.y,this.lastLayerMovement.x=t.x,this.lastLayerMovement.y=t.y,this.stripTarget.x+=this.layerMovement.x*this.depth,this.stripTarget.y+=this.layerMovement.y*this.depth,this.containerTarget.x+=(this.stripTarget.x-this.containerTarget.x)/this.smoothing,this.containerTarget.y+=(this.stripTarget.y-this.containerTarget.y)/this.smoothing,this.containerTarget.x>this.stripTarget.x+1?this.direction=-1:this.containerTarget.x<this.stripTarget.x-1?this.direction=1:this.direction=0,this.depth<-1&&(this.direction=-1*this.direction),this.container.position.x=-this.containerTarget.x,this.container.position.y=this.defaultY-this.containerTarget.y,this.direction<0?this.container.position.x+t.x<=this.lowerLimit&&(this.currentChunkIndex--,this.reorderArray(this.chunks,-1),this.layoutChunks()):this.direction>0&&this.container.position.x+t.x>=this.upperLimit&&(this.currentChunkIndex++,this.reorderArray(this.chunks,1),this.layoutChunks()),this.upperLimit=this.currentChunkIndex*this.chunkWidth,this.lowerLimit=-this.chunkWidth*this.chunks.length+Game.stageWidth+100+this.currentChunkIndex*this.chunkWidth},e.prototype.destroy=function(){this.chunks=[]},e}(),JetSkiInputManager=function(){function e(e,t){this.scene=e,this.mainHolderRef=t,this.hitAreaSprite=Game.displayStore.getSprite("jet-ski/blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.currentAngle=0,this.maxAngleDiff=1.4,this.minAngleDiff=.1,this.keyboardDown=!1,this.driveForce=0,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite)}return e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mousemove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseupoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))})):(e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchmove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchendoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}))},e.prototype.inputDown=function(e,t){t.x>Game.stageWidth/2?this.keyDown("right"):this.keyDown("left")},e.prototype.inputUp=function(e,t){t.x>Game.stageWidth/2?this.keyUp("right"):this.keyUp("left")},e.prototype.inputMove=function(e,t){},e.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},e.prototype.getInputAngle=function(){var e=this.currentAngle;return e>this.maxAngleDiff&&(e=this.maxAngleDiff),e<this.minAngleDiff&&(e=this.minAngleDiff),e},e.prototype.keyDown=function(e){if(1!=this.scene.tutorialOverlay.isOpen){switch(this.keyboardInput=e,e){case"left":this.driveForce=50;break;case"right":this.driveForce=-170;break;case"down":case"up":this.startAngle=0;break;case"spacebar":this.keyboardInput="spacebar"}this.keyboardDown=!0}},e.prototype.keyUp=function(e){if(1!=this.scene.tutorialOverlay.isOpen){switch(e){case"left":case"right":this.driveForce=0}this.keyboardDown=!1}},e.prototype.tick=function(){this.scene.physicsManager.applyDriveForce(this.driveForce)},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},e}(),JetSkiTimer=function(){function e(e){this.scene=e,this.game=e.game,this.started=!1,this.time=0,this.timeText=Game.displayStore.getBitmapText("timer-font"),this.timeText.scale.x=this.timeText.scale.y=.55,this.timeText.text=this.convertSecondsToTime(this.time),this.timeText.position.x=-this.timeText.width/2,this.timeText.tint=16777215,this.container=Game.displayStore.getContainer("jet-ski/timer-holder"),this.container.position.x=512,this.container.position.y=20,this.timerInner=this.container.getContainer("jet-ski/timer-inner"),this.timerIcon=this.timerInner.getSprite("jet-ski/timer-icon"),this.timerIcon.position.y=0,this.timerInner.addChild(this.timeText),this.timeText.position.x=this.timerIcon.position.x+30,this.timeText.position.y=this.timerIcon.position.y-5,this.timerInner.position.x=-60,this.timerInner.position.y=this.container.height/4}return e.prototype.start=function(){this.started=!0,this.addTime(10,16777215)},e.prototype.addTime=function(e,t){function i(){this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.time<o?(this.time++,this.timeText.text=this.convertSecondsToTime(this.time),this.timerTimeline.call(i,null,this,s)):this.timerTimeline.call(this.tickTime,null,this,"+=1")}if(0!=this.started){this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.timeText.tint=t;var s=.05;this.timerTimeline.call(i,null,this,s);var o=this.time+e;this.time}},e.prototype.pause=function(){this.scene.pauseResumeTween(this.timerTimeline,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.timerTimeline,"resume")},e.prototype.convertSecondsToTime=function(e){var t=Math.floor(e/60),i=Math.ceil(e%60),s=String(t),o=String(i);return i<10&&(o="0"+i),e%60%1==0?s+":"+o:s+" "+o},e.prototype.destroy=function(){this.timerTimeline=this.scene.killTween(this.timerTimeline),this.destroyed=!0},e.prototype.tickTime=function(){1!=this.destroyed&&1!=this.scene.paused&&(this.time>0?(this.time-=.5,this.timeText.text=this.convertSecondsToTime(this.time),this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.timerTimeline.call(this.tickTime,null,this,.5),this.time,this.time<=5?this.timeText.tint=16711680:this.timeText.tint=16777215):this.scene.checkGameOver())},e}(),Ramp=function(){function e(e,t){this.scene=e,this.game=e.game,this.isAvailable=!0,this.yOffsets=[0,-40,-60,-80,-120]}return e.prototype.spawn=function(e,t){this.grad=e,this.body=new p2.Body({mass:300,position:[-t,200]});var i=this.getPath(e);this.container=Game.displayStore.getContainer("jet-ski/ramp-"+e),this.container.position.x=-t,this.barrel=Game.displayStore.getSprite("jet-ski/barrels-"+Game.getRandom(1,2,!0)),this.barrel.position.y=38-this.yOffsets[e],this.container.addChildAt(this.barrel,0),this.floatShape1=new p2.Box({width:20,height:15}),this.floatShape2=new p2.Box({width:20,height:17}),this.undershape=new p2.Box({width:350,height:100});Game.displayStore.getContainer("jet-ski/ramp-0");this.body.fromPolygon(i,{skipAdjustCenterOfMass:!0}),this.body.shapes[0].collisionGroup=this.scene.physicsManager.RAMP,this.body.shapes[0].collisionMask=this.scene.physicsManager.HULL,this.body.addShape(this.floatShape1,[-150,this.yOffsets[e]]),this.body.addShape(this.floatShape2,[150,this.yOffsets[e]]),this.body.addShape(this.undershape,[0,300]),this.floatShape1.collisionGroup=this.scene.physicsManager.HULLFLOATS,this.floatShape1.collisionMask=this.scene.physicsManager.WATER,this.floatShape2.collisionGroup=this.scene.physicsManager.HULLFLOATS,this.floatShape2.collisionMask=this.scene.physicsManager.WATER,this.undershape.collisionGroup=this.scene.physicsManager.RAMP,this.undershape.collisionMask=this.scene.physicsManager.HULL,this.scene.physicsManager.addBuoyancyShape(this.floatShape1),this.scene.physicsManager.addBuoyancyShape(this.floatShape2),this.scene.physicsManager.addBodyToWorld(this.body),this.scene.physicsManager.bindSpriteToBody(this.container,this.body),this.isAvailable=!1},e.prototype.convertShapeFromPhotoshop=function(e,t){for(var i=[],s=0;s<e.length;s++){var o=e[s][0]-t[0],a=e[s][1]-t[1];i.push([o,-a])}return i},e.prototype.hasPassed=function(){var e=!1;return this.container.toGlobal(new PIXI.Point).x/Game.windowScaleFactor<-200&&(e=!0),e},e.prototype.tick=function(){},e.prototype.getPath=function(e){var t;switch(e){case 0:t=[[-175,-50],[-175,50],[175,50],[175,-50]];break;case 1:t=[[-175,-50],[175,50],[175,-50]];break;case 2:t=[[-175,-75],[175,75],[175,-75]];break;case 3:t=[[-175,-100],[175,90],[175,-100]];break;case 4:t=[[-250,-125],[250,125],[250,-125]]}return t},e.prototype.destroy=function(){this.scene.physicsManager.removeBuoyancyShape(this.floatShape1),this.scene.physicsManager.removeBuoyancyShape(this.floatShape2),this.scene.physicsManager.unbindSpriteFromBody(this.container),this.scene.physicsManager.removeBodyFromWorld(this.body),this.scene.container.removeChild(this.barrel),this.isAvailable=!0},e}(),JetSkiJumpManager=function(){function e(e){this.rampSpacing=-1500,this.scene=e,this.game=e.game,this.currentRampIndex=0,this.spawningRamp=!1,this.ramps=[],this.mainHolderPos=new PIXI.Point,this.allowSpawn=!0,this.container=Game.displayStore.getContainer("jet-ski/ramp-holder"),this.createRamps(),this.spawnCount=0}return e.prototype.createRamps=function(){for(var e=0;e<3;e++){var t=new Ramp(this.scene,e);this.ramps.push(t)}},e.prototype.spawnRamp=function(){this.spawnCount+=1,this.rampSpacing-=Game.getRandom(200,400),this.rampSpacing<-5e3&&(this.rampSpacing=Game.getRandom(-4200,-5e3,!0));for(var e=0;e<this.ramps.length;e++)if(1==this.ramps[e].isAvailable){var t=Math.round(this.spawnCount/10)+1,i=Math.round(this.spawnCount/5)+1;i>3&&(i=3),t>3&&(t=2);var s=Game.getRandom(t,i,!0);this.ramps[e].spawn(s,this.mainHolderPos.x+this.rampSpacing),this.lastSpawnedRamp=this.ramps[e],this.container.addChild(this.ramps[e].container);break}this.allowSpawn=!1},e.prototype.tick=function(e,t){this.mainHolderPos.x=t.x,this.mainHolderPos.y=t.y;for(var i=0;i<this.ramps.length;i++)0==this.ramps[i].isAvailable&&1==this.ramps[i].hasPassed()&&(this.allowSpawn=!0,this.ramps[i].destroy())},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){},e}(),JetSkiTicket=function(){function e(e,t){this.scene=e,this.game=e.game,this.index=t,this.available=!0,this.destroyed=!1,this.magnetise=!1,this.body=new p2.Body,this.shape=new p2.Circle({radius:100,sensor:!0}),this.body.addShape(this.shape),this.shape.collisionGroup=this.scene.physicsManager.TICKET,this.shape.collisionMask=this.scene.physicsManager.HULL}return e.prototype.spawn=function(e,t){if(1!=this.destroyed){this.available=!1;var i=Game.coreData.getCurrentTickets()-Game.coreData.getCurrentRide().startingTickets;i%2==0&&0!=i&&Game.getRandom(0,1)>this.scene.currentLives/3?this.ticket=Game.ticketPool.getHeart():this.ticket=Game.ticketPool.getTicket(),this.mainHolder=e,this.body.position[0]=t.x+Game.getRandom(300,500)+100*this.scene.jumpManager.lastSpawnedRamp.grad,this.body.position[1]=t.y+Game.getRandom(250,280)+150*this.scene.jumpManager.lastSpawnedRamp.grad,this.scene.physicsManager.bindSpriteToBody(this.ticket.container,this.body),this.magnetise=!1,this.scene.physicsManager.addBodyToWorld(this.body),this.mainHolder.addChild(this.ticket.container)}},e.prototype.collect=function(){this.scene.physicsManager.removeBodyFromWorld(this.body),this.magnetise=!0},e.prototype.tick=function(){this.body.overlaps(this.scene.physicsManager.jetskiBody)&&0==this.available&&(this.available=!0,1==this.ticket.isHeart&&this.scene.addLife(),this.ticket.collect())},e.prototype.getDistance=function(e,t){var i=0,s=0;return i=t.x-e.x,i*=i,s=t.y-e.y,s*=s,Math.sqrt(i+s)},e.prototype.pause=function(){this.ticket&&this.ticket.pause()},e.prototype.resume=function(){this.ticket&&this.ticket.resume()},e.prototype.destroy=function(){console.log("destroying ticket"),this.destroyed=!0,this.scene.physicsManager.unbindSpriteFromBody(this.ticket.container),this.scene.physicsManager.removeBodyFromWorld(this.body),this.body=null,this.ticket&&this.ticket.destroy()},e}(),PinBallPhysicsManager=function(){function e(e,t){this.physicsEnabled=!0,this.FLIPPER=Math.pow(2,0),this.BALL=Math.pow(2,1),this.LAUNCHER=Math.pow(2,2),this.ARENA=Math.pow(2,3),this.LOWERTICKET=Math.pow(2,4),this.UPPERTICKET=Math.pow(2,5),this.resizeRatio=1,this.scene=e,this.mainContainer=t,this.powerupRatio=1,this.ballSoundCount=0,this.ballCountThreshold=20,this.ballCollisionSound=!1,this.rampActive=!0,this.rampTimer=0,this.rampTimerLimit=30}return e.prototype.initPhysicsWorld=function(){this.world=new p2.World({gravity:[0,-220]}),this.stepCount=0,this.leftFlipperAngle=0,this.world.broadphase=new p2.NaiveBroadphase(1),this.boundBodies=[],this.targetForce=0,this.leftSaveSensorActivated=!1,this.rightSaveSensorActivated=!1,this.forceMultiplier=1,this.roundBumperForce=5,this.ballSpeedLimit=1e3,this.world.defaultContactMaterial.restitution=.2,this.world.defaultContactMaterial.friction=.8,this.pinballBody=new p2.Body({mass:1.8,position:[Game.stageWidth+45,Game.stageHeight-140],ccdSpeedThreshold:0,ccdIterations:200}),this.pinballShape=new p2.Circle({radius:50}),this.pinballBody.fixedRotation=!1,this.pinballBody.addShape(this.pinballShape),this.pinballShape.collisionGroup=this.BALL,this.pinballShape.collisionMask=this.ARENA|this.FLIPPER|this.LOWERTICKET,1==this.scene.pinDevMode?this.pinballBody.damping=.999999:this.pinballBody.damping=0,this.levelState="lower",this.backgroundBody=new p2.Body({mass:0}),this.floorBody=new p2.Body({mass:0,position:[0,-500]}),this.floorShape=new p2.Plane,this.floorBody.addShape(this.floorShape),this.floorShape.sensor=!0,this.floorShape.collisionGroup=this.ARENA,this.floorShape.collisionMask=this.BALL,this.ceilingBody=new p2.Body({mass:0,position:[0,3*Game.stageHeight],angle:Math.PI}),this.ceilingShape=new p2.Plane,this.ceilingBody.addShape(this.ceilingShape),this.ceilingShape.collisionGroup=this.ARENA,this.ceilingShape.collisionMask=this.BALL,this.leftWallBody=new p2.Body({mass:0,position:[15,0],angle:-Math.PI/2}),this.leftWallShape=new p2.Plane,this.leftWallBody.addShape(this.leftWallShape),this.leftWallShape.collisionGroup=this.ARENA,this.leftWallShape.collisionMask=this.BALL,this.rightWallBody=new p2.Body({mass:0,position:[Game.stageWidth+98,0],angle:Math.PI/2}),this.rightWallShape=new p2.Plane,this.rightWallBody.addShape(this.rightWallShape),this.rightWallShape.collisionGroup=this.ARENA,this.rightWallShape.collisionMask=this.BALL,this.rightWallInnerBody=new p2.Body({mass:0,position:[Game.stageWidth-15,Game.stageHeight-36],ccdSpeedThreshold:0,ccdIterations:150}),this.rightWallInnerShape=new p2.Box({width:15,height:2*Game.stageHeight}),this.rightWallInnerBody.addShape(this.rightWallInnerShape),this.rightWallInnerShape.collisionGroup=this.ARENA,this.rightWallInnerShape.collisionMask=this.BALL,this.circleBumper1Body=new p2.Body({mass:0,position:[Game.stageWidth/2+70,1.5*Game.stageHeight+40]}),this.circleBumper1Shape=new p2.Circle({radius:62}),this.circleBumper1Body.addShape(this.circleBumper1Shape),this.circleBumper1Shape.collisionGroup=this.ARENA,this.circleBumper1Shape.collisionMask=this.BALL,this.circleBumper2Body=new p2.Body({mass:0,position:[Game.stageWidth/2-200,1.5*Game.stageHeight+200]}),this.circleBumper2Shape=new p2.Circle({radius:62}),this.circleBumper2Body.addShape(this.circleBumper2Shape),this.circleBumper2Shape.collisionGroup=this.ARENA,this.circleBumper2Shape.collisionMask=this.BALL,this.circleBumper3Body=new p2.Body({mass:0,position:[Game.stageWidth/2+120,2*Game.stageHeight+20]}),this.circleBumper3Shape=new p2.Circle({radius:62}),this.circleBumper3Body.addShape(this.circleBumper3Shape),this.circleBumper3Shape.collisionGroup=this.ARENA,this.circleBumper3Shape.collisionMask=this.BALL,this.gateSensor1Body=new p2.Body({mass:0,position:[Game.stageWidth/2-200,2.5*Game.stageHeight]}),this.gateSensor1Shape=new p2.Box({width:40,height:40}),this.gateSensor1Body.addShape(this.gateSensor1Shape),this.gateSensor1Shape.collisionGroup=this.ARENA,this.gateSensor1Shape.collisionMask=this.BALL,this.gateSensor1Shape.sensor=!0,this.gateSensor2Body=new p2.Body({mass:0,position:[Game.stageWidth/2-50,2.5*Game.stageHeight]}),this.gateSensor2Shape=new p2.Box({width:40,height:40}),this.gateSensor2Body.addShape(this.gateSensor2Shape),this.gateSensor2Shape.collisionGroup=this.ARENA,this.gateSensor2Shape.collisionMask=this.BALL,this.gateSensor2Shape.sensor=!0,this.gateSensor3Body=new p2.Body({mass:0,position:[Game.stageWidth/2+130,2.5*Game.stageHeight]}),this.gateSensor3Shape=new p2.Box({width:40,height:40}),this.gateSensor3Body.addShape(this.gateSensor3Shape),this.gateSensor3Shape.collisionGroup=this.ARENA,this.gateSensor3Shape.collisionMask=this.BALL,this.gateSensor3Shape.sensor=!0,this.gateBlock1Body=new p2.Body({mass:0,position:[Game.stageWidth/2-270,2.5*Game.stageHeight]}),this.gateBlock1Shape=new p2.Capsule({radius:26,length:120}),this.gateBlock1Body.addShape(this.gateBlock1Shape),this.gateBlock1Shape.collisionGroup=this.ARENA,this.gateBlock1Shape.collisionMask=this.BALL,this.gateBlock2Body=new p2.Body({mass:0,position:[Game.stageWidth/2-90,2.5*Game.stageHeight]}),this.gateBlock2Shape=new p2.Capsule({radius:26,length:120}),this.gateBlock2Body.addShape(this.gateBlock2Shape),this.gateBlock2Shape.collisionGroup=this.ARENA,this.gateBlock2Shape.collisionMask=this.BALL,this.gateBlock3Body=new p2.Body({mass:0,position:[Game.stageWidth/2+90,2.5*Game.stageHeight]}),this.gateBlock3Shape=new p2.Capsule({radius:26,length:120}),this.gateBlock3Body.addShape(this.gateBlock3Shape),this.gateBlock3Shape.collisionGroup=this.ARENA,this.gateBlock3Shape.collisionMask=this.BALL,this.gateBlock4Body=new p2.Body({mass:0,position:[Game.stageWidth/2+270,2.5*Game.stageHeight]}),this.gateBlock4Shape=new p2.Capsule({radius:26,length:120}),this.gateBlock4Body.addShape(this.gateBlock4Shape),this.gateBlock4Shape.collisionGroup=this.ARENA,this.gateBlock4Shape.collisionMask=this.BALL,this.upperPushSensorBody=new p2.Body({mass:0,position:[Game.stageWidth/2+390,2.8*Game.stageHeight]}),this.upperPushSensorShape=new p2.Circle({radius:40}),this.upperPushSensorBody.addShape(this.upperPushSensorShape),this.upperPushSensorShape.collisionGroup=this.ARENA,this.upperPushSensorShape.collisionMask=this.BALL,this.upperPushSensorShape.sensor=!0,this.powerupSaveSensorBody=new p2.Body({mass:0,position:[Game.stageWidth/2,0]}),this.powerupSaveSensorShape=new p2.Circle({radius:20}),this.powerupSaveSensorBody.addShape(this.powerupSaveSensorShape),this.powerupSaveSensorShape.collisionGroup=this.ARENA,this.powerupSaveSensorShape.collisionMask=this.BALL,this.powerupSaveSensorShape.sensor=!0,this.newBallRampBody=new p2.Body({mass:0,position:[Game.stageWidth+130,Game.stageHeight-140]}),this.newBallRampShape=new p2.Box({width:30,height:30}),this.newBallRampBody.addShape(this.newBallRampShape),this.newBallRampShape.collisionGroup=this.ARENA,this.newBallRampShape.collisionMask=this.BALL,this.newBallRampBody.angle=.25*Math.PI,this.newBallSensorBody=new p2.Body({mass:0,position:[Game.stageWidth+45,Game.stageHeight]}),this.newBallSensorShape=new p2.Box({width:20,height:20}),this.newBallSensorBody.addShape(this.newBallSensorShape),this.newBallSensorShape.collisionGroup=this.ARENA,this.newBallSensorShape.collisionMask=this.BALL,this.newBallSensorShape.sensor=!0,this.upperBumperBody=new p2.Body({mass:0,position:[135,2.4*Game.stageHeight]}),this.upperBumperShape=new p2.Circle({radius:15}),this.upperBumperBody.addShape(this.upperBumperShape),this.upperBumperShape.collisionGroup=this.ARENA,this.upperBumperShape.collisionMask=this.BALL,this.upperDivideBody=new p2.Body({mass:0,position:[140,2*Game.stageHeight]}),this.upperDivideShape=new p2.Capsule({radius:10,length:120}),this.upperDivideBody.addShape(this.upperDivideShape),this.upperDivideShape.collisionGroup=this.ARENA,this.upperDivideShape.collisionMask=this.BALL,this.upperDivideBody.angle=Math.PI/2,this.upperLightSensor1Body=new p2.Body({mass:0,position:[70,2*Game.stageHeight]}),this.upperLightSensor1Shape=new p2.Box({width:10,height:10}),this.upperLightSensor1Body.addShape(this.upperLightSensor1Shape),this.upperLightSensor1Shape.collisionGroup=this.ARENA,this.upperLightSensor1Shape.collisionMask=this.BALL,this.upperLightSensor1Shape.sensor=!0,this.upperLightSensor2Body=new p2.Body({mass:0,position:[200,2*Game.stageHeight]}),this.upperLightSensor2Shape=new p2.Box({width:10,height:10}),this.upperLightSensor2Body.addShape(this.upperLightSensor2Shape),this.upperLightSensor2Shape.collisionGroup=this.ARENA,this.upperLightSensor2Shape.collisionMask=this.BALL,this.upperLightSensor2Shape.sensor=!0,this.leftTriggerSpringBody=new p2.Body({mass:0,position:[50,60]}),this.leftTriggerSpringShape=new p2.Box({width:20,height:20}),this.leftTriggerSpringBody.addShape(this.leftTriggerSpringShape),this.leftTriggerSpringShape.sensor=!0,this.leftTriggerSpringShape.collisionGroup=this.ARENA,this.leftTriggerSpringShape.collisionMask=this.BALL,this.rightTriggerSpringBody=new p2.Body({mass:0,position:[Game.stageWidth-50,60]}),this.rightTriggerSpringShape=new p2.Box({width:20,height:20}),this.rightTriggerSpringBody.addShape(this.rightTriggerSpringShape),this.rightTriggerSpringShape.sensor=!0,this.rightTriggerSpringShape.collisionGroup=this.ARENA,this.rightTriggerSpringShape.collisionMask=this.BALL,this.gateBlock1Body.angle=Math.PI/2,this.gateBlock2Body.angle=Math.PI/2,this.gateBlock3Body.angle=Math.PI/2,this.gateBlock4Body.angle=Math.PI/2,this.leftAngleBumperBody=new p2.Body({mass:0,position:[50,1.365*Game.stageHeight]}),this.leftAngleBumperShape=new p2.Box({width:20,height:130}),this.leftAngleBumperBody.addShape(this.leftAngleBumperShape),this.leftAngleBumperShape.collisionGroup=this.ARENA,this.leftAngleBumperShape.collisionMask=this.BALL,this.leftAngleBumperBody.angle=Math.PI/4,this.leftIceCoverBody=new p2.Body({mass:0,position:[75,150]}),this.leftIceCoverShape=new p2.Box({width:20,height:70}),this.leftIceCoverBody.addShape(this.leftIceCoverShape),this.leftIceCoverShape.sensor=!1,this.leftIceCoverShape.collisionGroup=this.ARENA,this.leftIceCoverShape.collisionMask=this.BALL,this.rightIceCoverBody=new p2.Body({mass:0,position:[Game.stageWidth-75,150]}),this.rightIceCoverShape=new p2.Box({width:20,height:70}),this.rightIceCoverBody.addShape(this.rightIceCoverShape),this.rightIceCoverShape.sensor=!1,this.rightIceCoverShape.collisionGroup=this.ARENA,this.rightIceCoverShape.collisionMask=this.BALL,this.rightIceCoverBody.angle=-Math.PI/4,this.leftIceCoverBody.angle=Math.PI/4,this.leftBumperSpringBody=new p2.Body({mass:0,position:[Game.stageWidth/2-210,Game.stageHeight/2+200]}),this.leftBumperSpringShape=new p2.Box({width:20,height:80}),this.leftBumperSpringBody.addShape(this.leftBumperSpringShape),this.leftBumperSpringShape.sensor=!1,this.leftBumperSpringShape.collisionGroup=this.ARENA,this.leftBumperSpringShape.collisionMask=this.BALL,this.rightBumperSpringBody=new p2.Body({mass:0,position:[Game.stageWidth/2+210,Game.stageHeight/2+200]}),this.rightBumperSpringShape=new p2.Box({width:20,height:80}),this.rightBumperSpringBody.addShape(this.rightBumperSpringShape),this.rightBumperSpringShape.sensor=!1,this.rightBumperSpringShape.collisionGroup=this.ARENA,this.rightBumperSpringShape.collisionMask=this.BALL,this.rightBumperSpringBody.angle=-Math.PI/8,this.leftBumperSpringBody.angle=Math.PI/8,this.bumpers=new Array,this.bumpers.push({body:"iceBumper"}),this.bumpers.push({body:"treeBumper"}),this.bumpers.push({body:"iglooBumper"}),this.powerupSaveBody=new p2.Body({mass:0,position:[235,-60]}),this.createComplexShape(this.powerupSaveBody,PinBallPhysicsObjects.powerupSave,this.ARENA,[this.BALL]),this.leftAngleBlockBody=new p2.Body({mass:0,position:[0,Game.stageHeight]}),this.createComplexShape(this.leftAngleBlockBody,PinBallPhysicsObjects.angleBlockLeft,this.ARENA,[this.BALL]),this.leftBumperBody=new p2.Body({mass:0,position:[Game.stageWidth/2-255,Game.stageHeight/2+110]}),this.createComplexShape(this.leftBumperBody,PinBallPhysicsObjects.bumperLeft,this.ARENA,[this.BALL]),this.rightBumperBody=new p2.Body({mass:0,position:[Game.stageWidth/2+160,Game.stageHeight/2+110]}),this.createComplexShape(this.rightBumperBody,PinBallPhysicsObjects.bumperRight,this.ARENA,[this.BALL]),this.exitSlopeLeftBody=new p2.Body({mass:0,position:[0,-50]}),this.createComplexShape(this.exitSlopeLeftBody,PinBallPhysicsObjects.exitLeft,this.ARENA,[this.BALL]),this.IceRampWallBody=new p2.Body({mass:0,position:[Game.stageWidth-240,1.5*Game.stageHeight+270]}),this.createComplexShape(this.IceRampWallBody,PinBallPhysicsObjects.iceRampEntrance,this.ARENA,[this.BALL]),this.iceRampSensorBody=new p2.Body({mass:0,position:[Game.stageWidth-140,1.5*Game.stageHeight+140]}),this.iceRampSensorShape=new p2.Box({width:10,height:250}),this.iceRampSensorBody.addShape(this.iceRampSensorShape),this.iceRampSensorShape.collisionGroup=this.ARENA,this.iceRampSensorShape.collisionMask=this.BALL,this.iceRampSensorShape.sensor=!0,this.rampLowerBody=new p2.Body({mass:0,position:[Game.stageWidth+60,2*Game.stageHeight-180]}),this.rampLowerShape=new p2.Box({width:15,height:120}),this.rampLowerBody.addShape(this.rampLowerShape),this.rampLowerShape.collisionGroup=this.ARENA,this.rampLowerShape.collisionMask=this.BALL,this.rampLowerBody.angle=-Math.PI/5.5,this.iceHoleSensorBody=new p2.Body({mass:0,position:[183,1.37*Game.stageHeight]}),this.iceHoleSensorShape=new p2.Box({width:5,height:5}),this.iceHoleSensorBody.addShape(this.iceHoleSensorShape),this.iceHoleSensorShape.collisionGroup=this.ARENA,this.iceHoleSensorShape.collisionMask=this.BALL,this.iceHoleSensorShape.sensor=!0,this.iceUpperWallBody=new p2.Body({mass:0,position:[-15,Game.stageHeight+25]}),this.createComplexShape(this.iceUpperWallBody,PinBallPhysicsObjects.iceUpperWall,this.ARENA,[this.BALL]),this.exitSlopeLeftUnderShape=new p2.Box({width:20,height:88}),this.exitSlopeLeftBody.addShape(this.exitSlopeLeftUnderShape,[0,-131]),this.exitSlopeLeftUnderShape.collisionGroup=this.ARENA,this.exitSlopeLeftUnderShape.collisionMask=this.BALL,this.exitSlopeRightBody=new p2.Body({mass:0,position:[Game.stageWidth-340,-50]}),this.createComplexShape(this.exitSlopeRightBody,PinBallPhysicsObjects.exitRight,this.ARENA,[this.BALL]),this.rightAngleBody=new p2.Body({mass:0,position:[Game.stageWidth-160,Game.stageHeight+30]}),this.createComplexShape(this.rightAngleBody,PinBallPhysicsObjects.rightAngle,this.ARENA,[this.BALL]),this.exitSlopeRightUnderShape=new p2.Box({width:20,height:88}),this.exitSlopeRightBody.addShape(this.exitSlopeRightUnderShape,[0,-131]),this.exitSlopeRightUnderShape.collisionGroup=this.ARENA,this.exitSlopeRightUnderShape.collisionMask=this.BALL,this.launcherBody=new p2.Body({mass:4,position:[Game.stageWidth+45,350],fixedRotation:!0}),this.launcherShape=new p2.Box({width:105,height:100}),this.launcherBody.addShape(this.launcherShape,[0,-40]),this.launcherShape.collisionGroup=this.ARENA,this.launcherShape.collisionMask=this.BALL,this.launcherBody.damping=.1,this.launcherConstraint=new p2.PrismaticConstraint(this.backgroundBody,this.launcherBody,{collideConnected:!1,localAxisA:[0,1],localAnchorA:[Game.stageWidth+45,0]}),this.launcherSpring=new p2.LinearSpring(this.backgroundBody,this.launcherBody,{localAnchorA:[Game.stageWidth+45,400],restLength:0,stiffness:400,damping:25}),this.leftFlipperBody=new p2.Body({mass:1,position:[280,220],ccdSpeedThreshold:0,ccdIterations:200}),this.createComplexShape(this.leftFlipperBody,PinBallPhysicsObjects.flipperLeftNormal,this.FLIPPER,[this.BALL]),this.leftFlipperBody.shapes[0].collisionGroup=this.FLIPPER,this.leftFlipperBody.shapes[0].collisionMask=this.BALL,this.leftFlipperBody.angularDamping=.99999999999,this.leftFlipperBody.damping=0,this.rightFlipperBody=new p2.Body({mass:1,position:[Game.stageWidth-280,220],ccdSpeedThreshold:0,ccdIterations:200}),this.createComplexShape(this.rightFlipperBody,PinBallPhysicsObjects.flipperRightNormal,this.FLIPPER,[this.BALL]),this.rightFlipperBody.shapes[0].collisionGroup=this.FLIPPER,this.rightFlipperBody.shapes[0].collisionMask=this.BALL,this.rightFlipperBody.angularDamping=.99999999999,this.rightFlipperBody.damping=0,this.leftFlipperConstraint=new p2.RevoluteConstraint(this.backgroundBody,this.leftFlipperBody,{localPivotA:[270,220],localPivotB:[-96,13],collideConnected:!1}),this.leftFlipperConstraint.setStiffness(9999999999),this.leftFlipperConstraint.enableMotor(),this.leftFlipperConstraint.setMotorSpeed(0),this.leftFlipperBody.angle=0,this.rightFlipperConstraint=new p2.RevoluteConstraint(this.backgroundBody,this.rightFlipperBody,{localPivotA:[Game.stageWidth-270,220],localPivotB:[96,13],collideConnected:!1}),this.rightFlipperConstraint.setStiffness(9999999999),this.rightFlipperConstraint.enableMotor(),this.rightFlipperConstraint.setMotorSpeed(0),this.rightFlipperBody.angle=0,this.topRightCurveBody=new p2.Body({mass:0,position:[Game.stageWidth+98-446,3*Game.stageHeight-444],ccdSpeedThreshold:0,ccdIterations:200}),this.createComplexShape(this.topRightCurveBody,PinBallPhysicsObjects.topRightCurve,this.ARENA,[this.BALL]),this.topLeftCurveBody=new p2.Body({mass:0,position:[0,3*Game.stageHeight-444]}),this.createComplexShape(this.topLeftCurveBody,PinBallPhysicsObjects.topLeftCurve,this.ARENA,[this.BALL]),this.flipperBracketLeftBody=new p2.Body({mass:0,position:[125,193],ccdSpeedThreshold:0,ccdIterations:150}),this.createComplexShape(this.flipperBracketLeftBody,PinBallPhysicsObjects.flipperBracketLeft,this.ARENA,[this.BALL]),this.flipperBracketRightBody=new p2.Body({mass:0,position:[Game.stageWidth-278,193],ccdSpeedThreshold:0,ccdIterations:150}),this.createComplexShape(this.flipperBracketRightBody,PinBallPhysicsObjects.flipperBracketRight,this.ARENA,[this.BALL]),this.world.addBody(this.backgroundBody),this.world.addBody(this.pinballBody),this.world.addBody(this.floorBody),this.world.addBody(this.ceilingBody),this.world.addBody(this.leftWallBody),this.world.addBody(this.rightWallBody),this.world.addBody(this.rightWallInnerBody),this.world.addBody(this.exitSlopeLeftBody),this.world.addBody(this.exitSlopeRightBody),this.world.addBody(this.leftFlipperBody),this.world.addBody(this.rightFlipperBody),this.world.addBody(this.launcherBody),this.world.addBody(this.circleBumper1Body),this.world.addBody(this.circleBumper2Body),this.world.addBody(this.circleBumper3Body),this.world.addBody(this.leftAngleBumperBody),this.world.addBody(this.gateBlock1Body),this.world.addBody(this.gateBlock2Body),this.world.addBody(this.gateBlock3Body),this.world.addBody(this.gateBlock4Body),this.world.addBody(this.newBallRampBody),this.world.addBody(this.gateSensor1Body),this.world.addBody(this.gateSensor2Body),this.world.addBody(this.gateSensor3Body),this.world.addBody(this.leftAngleBlockBody),this.world.addBody(this.leftBumperBody),this.world.addBody(this.rightBumperBody),this.world.addBody(this.topRightCurveBody),this.world.addBody(this.topLeftCurveBody),this.world.addBody(this.flipperBracketLeftBody),this.world.addBody(this.flipperBracketRightBody),this.world.addBody(this.leftTriggerSpringBody),this.world.addBody(this.rightTriggerSpringBody),this.world.addBody(this.leftIceCoverBody),this.world.addBody(this.rightIceCoverBody),this.world.addBody(this.leftBumperSpringBody),this.world.addBody(this.rightBumperSpringBody),this.world.addBody(this.IceRampWallBody),this.world.addBody(this.iceRampSensorBody),this.world.addBody(this.newBallSensorBody),this.world.addConstraint(this.leftFlipperConstraint),this.world.addConstraint(this.rightFlipperConstraint),this.world.addConstraint(this.launcherConstraint),this.world.addSpring(this.launcherSpring);var e=this;this.world.on("beginContact",function(t){e.checkCollision(e,t)}),this.world.on("endContact",function(t){e.checkEndCollision(e,t)}),this.world.on("postStep",function(e){}),this.physicsEnabled=!0},e.prototype.setBallInPlay=function(){this.rightWallBody.position[0]=Game.stageWidth-15,this.world.addBody(this.rightAngleBody)},e.prototype.limitVelocity=function(){var e=this.pinballBody.velocity[0],t=this.pinballBody.velocity[1];(e>1200||t>1200)&&(e=e/100*.8,t=t/100*.8)},e.prototype.levelStateChange=function(e){switch(1==e&&("lower"==this.levelState||"reset"==this.levelState?this.levelState="upper":this.levelState="lower"),this.scene.levelStateChange(),this.levelState){case"upper":this.scene.changeFace("grin"),this.pinballShape.collisionMask=this.ARENA|this.FLIPPER|this.UPPERTICKET,this.world.addBody(this.iceUpperWallBody),this.world.addBody(this.iceHoleSensorBody),this.world.addBody(this.rampLowerBody),this.world.addBody(this.upperLightSensor1Body),this.world.addBody(this.upperLightSensor2Body),this.rightWallBody.position[0]=Game.stageWidth+98,this.world.removeBody(this.rightWallInnerBody),this.world.removeBody(this.gateBlock1Body),this.world.removeBody(this.gateBlock2Body),this.world.removeBody(this.gateBlock3Body),this.world.removeBody(this.gateBlock4Body),this.world.removeBody(this.leftAngleBlockBody),this.world.removeBody(this.leftAngleBumperBody),this.world.removeBody(this.circleBumper2Body),this.world.addBody(this.upperBumperBody),this.world.addBody(this.upperDivideBody),this.world.addBody(this.upperPushSensorBody);break;case"lower":this.pinballShape.collisionMask=this.ARENA|this.FLIPPER|this.LOWERTICKET,this.world.removeBody(this.iceUpperWallBody),this.world.removeBody(this.iceHoleSensorBody),this.world.removeBody(this.rampLowerBody),this.world.removeBody(this.upperLightSensor1Body),this.world.removeBody(this.upperLightSensor2Body),this.world.addBody(this.circleBumper2Body),this.rightWallBody.position[0]=Game.stageWidth-15,this.world.addBody(this.rightWallInnerBody),this.world.addBody(this.gateBlock1Body),this.world.addBody(this.gateBlock2Body),this.world.addBody(this.gateBlock3Body),this.world.addBody(this.gateBlock4Body),this.world.addBody(this.leftAngleBumperBody),this.world.addBody(this.leftAngleBlockBody),this.world.removeBody(this.upperBumperBody),this.world.removeBody(this.upperDivideBody),this.world.removeBody(this.upperPushSensorBody),this.world.addBody(this.circleBumper2Body);break;case"reset":this.pinballShape.collisionMask=this.ARENA|this.FLIPPER|this.LOWERTICKET,this.world.removeBody(this.iceUpperWallBody),this.world.removeBody(this.iceHoleSensorBody),this.world.removeBody(this.rightAngleBody),this.world.removeBody(this.rampLowerBody),this.world.removeBody(this.upperLightSensor1Body),this.world.removeBody(this.upperLightSensor2Body),this.world.addBody(this.circleBumper2Body),this.world.addBody(this.rightWallInnerBody),this.world.addBody(this.gateBlock1Body),this.world.addBody(this.gateBlock2Body),this.world.addBody(this.gateBlock3Body),this.world.addBody(this.gateBlock4Body),this.world.addBody(this.leftAngleBumperBody),this.world.addBody(this.leftAngleBlockBody),this.world.removeBody(this.upperBumperBody),this.world.removeBody(this.upperDivideBody),this.world.removeBody(this.upperPushSensorBody)}},e.prototype.resetIceCover=function(e){switch(e){case 1:TweenMax.delayedCall(2,function(){this.rightIceCoverShape.sensor=!1,this.scene.closeGutterGate(2),this.rightSaveSensorActivated=!1},null,this);break;case 2:TweenMax.delayedCall(2,function(){this.leftIceCoverShape.sensor=!1,this.scene.closeGutterGate(1),this.leftSaveSensorActivated=!1},null,this)}},e.prototype.moveFlippers=function(e,t){var i,s,o=110,a=110;e<0&&(o=50),t>0&&(a=50),i=this.leftFlipperBody.angle-e,s=this.rightFlipperBody.angle-t,this.leftFlipperConstraint.setMotorSpeed(i*o),this.rightFlipperConstraint.setMotorSpeed(s*a),this.leftFlipperBody.position[0]=360,this.rightFlipperBody.position[0]=Game.stageWidth-360},e.prototype.setLauncherForce=function(e){var t=14e4*e;this.targetForce>t&&(this.targetForce-=2300+this.targetForce/200),0==e&&(this.targetForce=0),this.launcherBody.applyForce([0,this.targetForce])},e.prototype.activatePowerup=function(){this.world.addBody(this.powerupSaveBody),this.world.addBody(this.powerupSaveSensorBody),this.forceMultiplier=2,this.world.defaultContactMaterial.restitution=.6},e.prototype.deactivatePowerup=function(){this.world.removeBody(this.powerupSaveBody),this.world.removeBody(this.powerupSaveSensorBody),this.forceMultiplier=1,this.world.defaultContactMaterial.restitution=.2},e.prototype.stepPhysics=function(){if(0!=this.physicsEnabled&&this.world){0==this.rampActive&&++this.rampTimer>this.rampTimerLimit&&(this.rampTimer=0,this.rampActive=!0),this.world.step(1/30);for(var e=0;e<this.boundBodies.length;e++)this.boundBodies[e].sprite.position.x=this.boundBodies[e].body.position[0],this.boundBodies[e].sprite.position.y=Game.stageHeight-this.boundBodies[e].body.position[1],this.boundBodies[e].sprite.rotation=-this.boundBodies[e].body.angle;this.ballSoundCount<this.ballCountThreshold&&0==this.ballCollisionSound?this.ballSoundCount++:(this.ballSoundCount=0,this.ballCollisionSound=!0)}},e.prototype.dragBody=function(e,t,i){1==this.scene.pinDevMode?e.applyForce([50*(t-e.position[0]),50*(i+this.scene.mainHolder.position.y-e.position[1])]):e.applyForce([50*(t-e.position[0]),50*(i-e.position[1])])},e.prototype.setBodyPos=function(e,t,i){this.pinballBody.position[0]=t,1==this.scene.pinDevMode?this.pinballBody.position[1]=i+this.scene.mainHolder.position.y:this.pinballBody.position[1]=i},e.prototype.testupper=function(){this.levelState="upper",this.levelStateChange(),this.pinballBody.position[0]=130,this.pinballBody.position[1]=2.8*Game.stageHeight},e.prototype.killPhysicsWorld=function(e){},e.prototype.findIndexByKeyValue=function(e,t,i){for(var s=0;s<e.length;s++)if(e[s][t]==i)return s;return null},e.prototype.addBodyToWorld=function(e){this.world.addBody(e)},e.prototype.removeBodyFromWorld=function(e){this.world.removeBody(e)},e.prototype.removeConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.addConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.resizeElements=function(e,t){this.canvasHeight=t,this.canvasWidth=e,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},e.prototype.bindSpriteToBody=function(e,t){this.boundBodies.push({sprite:e,body:t})},e.prototype.unbindSpriteFromBody=function(e){this.boundBodies&&this.boundBodies.splice(this.findIndexByKeyValue(this.boundBodies,"sprite",e),1)},e.prototype.checkCollisionVolume=function(){var e,t;try{e=Math.abs(this.pinballBody.velocity[0])+Math.abs(this.pinballBody.velocity[1])}catch(e){}return(t=e/1600)>1&&(t=1),t},e.prototype.attractPinball=function(e,t){var i,s=this.getAngle(t.position[0],3*Game.stageHeight-t.position[1],e.position[0],3*Game.stageHeight-e.position[1]),o=(200-this.getDistance(t.position[0],3*Game.stageHeight-t.position[1],e.position[0],3*Game.stageHeight-e.position[1]))*(i=e.position[1]>t.position[1]?7:15);o<0&&(o=0);var a=Math.cos(s)*o,r=Math.sin(s)*o,n=[a,r];(a||r)&&e.applyForce(n)},e.prototype.checkCollision=function(e,t){if(t.bodyA==e.pinballBody){for(i=0;i<this.scene.tickets.length;i++)t.bodyB==this.scene.tickets[i].body&&this.tickets[i].collect();Game.playSound("pin-ball/bounce-collision.mp3",this.checkCollisionVolume()),1==this.ballCollisionSound&&(this.ballCollisionSound=!1,Game.playSound("pin-ball/bounce-collision.mp3",this.checkCollisionVolume())),t.bodyB==this.newBallSensorBody&&(this.rightWallBody.position[0]=Game.stageWidth+98,this.scene.ballReset=!0),t.bodyB==this.upperPushSensorBody&&this.pinballImpulse([-600,200],t.bodyA),t.bodyB==this.leftAngleBumperBody&&(this.pinballImpulse([600,800],t.bodyA),Game.playSound("pin-ball/light-bell.mp3",.5),this.scene.activateBumperLight(0)),t.bodyB==this.powerupSaveSensorBody&&(this.scene.changeFace("shocked"),this.pinballImpulse([0,2e3],t.bodyA,!0,1),this.pinballBody.velocity[0]=0,this.pinballBody.velocity[1]=0,this.pinballBody.position[0]=Game.stageWidth/2-10,this.pinballBody.position[1]=30),t.bodyB==this.floorBody&&(this.scene.losePinball(),this.world.removeBody(this.rightAngleBody),Game.stopSound("pin-ball/bounce-collision.mp3")),t.bodyB==this.gateSensor1Body&&(this.scene.activateLightGate(0),Game.playSound("pin-ball/light-bell.mp3",.5)),t.bodyB==this.gateSensor2Body&&(this.scene.activateLightGate(1),Game.playSound("pin-ball/light-bell.mp3",.5)),t.bodyB==this.gateSensor3Body&&(this.scene.activateLightGate(2),Game.playSound("pin-ball/light-bell.mp3",.5)),t.bodyB==this.upperLightSensor1Body&&(Game.playSound("pin-ball/upper-gate-sound.mp3",.5),this.scene.activateLightGate(3),this.leftIceCoverShape.sensor=!0,this.pinballBody.damping=.5),t.bodyB==this.upperLightSensor2Body&&(Game.playSound("pin-ball/upper-gate-sound.mp3",.5),this.scene.activateLightGate(4),this.rightIceCoverShape.sensor=!0,this.pinballBody.damping=.5),t.bodyB==this.rightTriggerSpringBody&&(this.pinballImpulse([0,1500],t.bodyA,!0,1),Game.playSound("pin-ball/ditch-release.mp3",.3),0==this.scene.soundActive&&(this.scene.soundActive=!0,"patrick"==this.scene.character?Game.playSound("pin-ball/patrick-next.mp3"):Game.playSound("pin-ball/sb-woah.mp3"),this.scene.startSoundTimer()),this.resetIceCover(1),0==this.rightSaveSensorActivated&&(this.rightSaveSensorActivated=!0,this.scene.addScore(500))),t.bodyB==this.leftTriggerSpringBody&&(this.pinballImpulse([0,1500],t.bodyA,!0,1),Game.playSound("pin-ball/ditch-release.mp3",.3),0==this.scene.soundActive&&(this.scene.soundActive=!0,"patrick"==this.scene.character?Game.playSound("pin-ball/patrick-next.mp3"):Game.playSound("pin-ball/sb-woah.mp3"),this.scene.startSoundTimer()),this.resetIceCover(2),0==this.leftSaveSensorActivated&&(this.leftSaveSensorActivated=!0,this.scene.addScore(500))),t.bodyB==this.iceRampSensorBody&&(Game.playSound("pin-ball/ramp.mp3",.5),1==this.rampActive&&(this.levelStateChange(!0),this.rampActive=!1),0==this.scene.soundActive&&(this.scene.soundActive=!0,"patrick"==this.scene.character?Game.playSound("pin-ball/patrick-laughing.mp3",.7):Game.playSound("pin-ball/sb-laugh.mp3"),this.scene.startSoundTimer())),t.bodyB==this.iceHoleSensorBody&&"upper"==this.levelState&&(0==this.scene.soundActive&&(this.scene.soundActive=!0,"patrick"==this.scene.character?Game.playSound("pin-ball/patrick-burp.mp3",.6):Game.playSound("pin-ball/sb-woah.mp3",.8),this.scene.startSoundTimer()),this.scene.changeFace("grin"),Game.playSound("pin-ball/spinning.mp3",.5),TweenMax.delayedCall(1,function(){Game.playSound("pin-ball/thunk-2.mp3",.4),this.levelStateChange(!0),this.pinballBody.velocity[1]=50,this.pinballBody.velocity[0]=0,this.pinballBody.damping=0},null,this))}if(t.bodyB==e.pinballBody){1==this.ballCollisionSound&&(this.ballCollisionSound=!1,Game.playSound("pin-ball/bounce-collision.mp3",this.checkCollisionVolume()));for(var i=0;i<this.scene.tickets.length;i++)t.bodyA==this.scene.tickets[i].body&&0==this.scene.tickets[i].available&&this.scene.tickets[i].collect();t.bodyA==this.iceRampSensorBody&&(Game.playSound("pin-ball/ramp.mp3",.5),1==this.rampActive&&(this.levelStateChange(!0),this.rampActive=!1),0==this.scene.soundActive&&(this.scene.soundActive=!0,"patrick"==this.scene.character?Game.playSound("pin-ball/patrick-laughing.mp3",.7):Game.playSound("pin-ball/sb-laugh.mp3"),this.scene.startSoundTimer())),t.bodyA==this.upperPushSensorBody&&this.pinballImpulse([-1200,200],t.bodyA),t.bodyA==this.powerupSaveSensorBody&&(this.pinballImpulse([0,2e3],t.bodyA,!0,1),this.pinballBody.velocity[0]=0,this.pinballBody.velocity[1]=0,this.pinballBody.position[0]=Game.stageWidth/2-10,this.pinballBody.position[1]=30),t.bodyA==this.leftAngleBumperBody&&(this.pinballImpulse([600,800],t.bodyA),Game.playSound("pin-ball/bell-3.mp3",.3),this.scene.activateBumperLight(0)),t.bodyA==this.gateSensor1Body&&(this.scene.activateLightGate(0),Game.playSound("pin-ball/gate-sound.mp3",.5)),t.bodyA==this.gateSensor2Body&&(this.scene.activateLightGate(1),Game.playSound("pin-ball/gate-sound.mp3",.5)),t.bodyA==this.gateSensor3Body&&(this.scene.activateLightGate(2),Game.playSound("pin-ball/gate-sound.mp3",.5)),t.bodyA==this.upperLightSensor1Body&&(this.scene.activateLightGate(3),Game.playSound("pin-ball/upper-gate-sound.mp3",.5),this.leftIceCoverShape.sensor=!0,this.pinballBody.damping=.8),t.bodyA==this.newBallSensorBody&&(this.rightWallBody.position[0]=Game.stageWidth+98,this.scene.ballReset=!0),t.bodyA==this.upperLightSensor2Body&&(this.scene.activateLightGate(4),Game.playSound("pin-ball/upper-gate-sound.mp3",.5),this.rightIceCoverShape.sensor=!0,this.pinballBody.damping=.8),t.bodyA==this.floorBody&&(this.scene.losePinball(),this.world.removeBody(this.rightAngleBody),Game.stopSound("pin-ball/bounce-collision.mp3")),t.bodyA==this.rightTriggerSpringBody&&(this.scene.changeFace("nervous"),this.pinballImpulse([0,1500],t.bodyA,!0,1),Game.playSound("pin-ball/ditch-release.mp3",.3),this.resetIceCover(1),0==this.rightSaveSensorActivated&&(this.rightSaveSensorActivated=!0,this.scene.addScore(500))),t.bodyA==this.leftTriggerSpringBody&&(this.scene.changeFace("nervous"),this.pinballImpulse([0,1500],t.bodyA,!0,1),Game.playSound("pin-ball/ditch-release.mp3",.3),this.resetIceCover(2),0==this.leftSaveSensorActivated&&(this.leftSaveSensorActivated=!0,this.scene.addScore(500))),t.bodyA==this.iceHoleSensorBody&&"upper"==this.levelState&&(0==this.scene.soundActive&&(this.scene.soundActive=!0,"patrick"==this.scene.character?Game.playSound("pin-ball/patrick-burp.mp3",.6):Game.playSound("pin-ball/sb-laugh.mp3",.7),this.scene.startSoundTimer()),this.scene.changeFace("nervous"),Game.playSound("pin-ball/spinning.mp3",.5),TweenMax.delayedCall(1,function(){Game.playSound("pin-ball/thunk-2.mp3",.4),this.levelStateChange(!0),this.pinballBody.velocity[1]=50,this.pinballBody.velocity[0]=0,this.pinballBody.damping=.25},null,this))}},e.prototype.checkEndCollision=function(e,t){if(t.bodyA==e.pinballBody){if(1==this.ballCollisionSound&&(this.ballCollisionSound=!1,Game.playSound("pin-ball/bounce-collision.mp3",this.checkCollisionVolume())),t.bodyB==this.leftBumperSpringBody&&(Game.playSound("pin-ball/collision-sound-two.mp3",.2),Game.playSound("pin-ball/thunk-1.mp3",.4),(r=this.scene.getPinBallPosition().y)<25?this.pinballImpulse([1e3*this.forceMultiplier,2e3*this.forceMultiplier],t.bodyB):r>85?this.pinballImpulse([1e3*this.forceMultiplier,500*this.forceMultiplier],t.bodyB):this.pinballImpulse([1e3*this.forceMultiplier,1500*this.forceMultiplier],t.bodyB),this.scene.addScore(50),this.scene.bumperEffect(3)),t.bodyB==this.rightBumperSpringBody&&(Game.playSound("pin-ball/collision-sound-two.mp3",.2),Game.playSound("pin-ball/thunk-1.mp3",.4),(r=this.scene.getPinBallPosition().y)<25?this.pinballImpulse([-1e3*this.forceMultiplier,2e3*this.forceMultiplier],t.bodyB):r>85?this.pinballImpulse([-1e3*this.forceMultiplier,500*this.forceMultiplier],t.bodyB):this.pinballImpulse([-1e3*this.forceMultiplier,1500*this.forceMultiplier],t.bodyB),this.scene.addScore(50),this.scene.bumperEffect(4)),t.bodyB==this.circleBumper1Body){Game.playSound("pin-ball/bell-3.mp3",.3),Game.playSound("pin-ball/thunk-1.mp3",.4);var i=this.pinballBody.velocity[0],s=this.pinballBody.velocity[1],o=i*this.roundBumperForce*this.forceMultiplier,a=s*this.roundBumperForce*this.forceMultiplier;o>this.ballSpeedLimit?o=this.ballSpeedLimit:o<-this.ballSpeedLimit&&(o=-this.ballSpeedLimit),a>this.ballSpeedLimit?a=this.ballSpeedLimit:a<-this.ballSpeedLimit&&(a=-this.ballSpeedLimit),this.pinballImpulse([o,a]),this.scene.bumperEffect(0),this.scene.addScore(100),"upper"==this.levelState&&this.levelStateChange(!0)}if(t.bodyB==this.circleBumper2Body){Game.playSound("pin-ball/bell-2.mp3",.3),Game.playSound("pin-ball/thunk-1.mp3",.4);var i=this.pinballBody.velocity[0],s=this.pinballBody.velocity[1],o=i*this.roundBumperForce*this.forceMultiplier,a=s*this.roundBumperForce*this.forceMultiplier;o>this.ballSpeedLimit?o=this.ballSpeedLimit:o<-this.ballSpeedLimit&&(o=-this.ballSpeedLimit),a>this.ballSpeedLimit?a=this.ballSpeedLimit:a<-this.ballSpeedLimit&&(a=-this.ballSpeedLimit),this.pinballImpulse([o,a]),this.scene.bumperEffect(1),this.scene.addScore(100),"upper"==this.levelState&&this.levelStateChange(!0)}if(t.bodyB==this.circleBumper3Body){Game.playSound("pin-ball/bell-1.mp3",.3),Game.playSound("pin-ball/thunk-1.mp3",.4);var i=this.pinballBody.velocity[0],s=this.pinballBody.velocity[1],o=i*this.roundBumperForce*this.forceMultiplier,a=s*this.roundBumperForce*this.forceMultiplier;o>this.ballSpeedLimit?o=this.ballSpeedLimit:o<-this.ballSpeedLimit&&(o=-this.ballSpeedLimit),a>this.ballSpeedLimit?a=this.ballSpeedLimit:a<-this.ballSpeedLimit&&(a=-this.ballSpeedLimit),this.pinballImpulse([o,a]),this.scene.bumperEffect(2),this.scene.addScore(100),"upper"==this.levelState&&this.levelStateChange(!0)}}if(t.bodyB==e.pinballBody){if(1==this.ballCollisionSound&&(this.ballCollisionSound=!1,Game.playSound("pin-ball/bounce-collision.mp3",this.checkCollisionVolume())),t.bodyA==this.rightBumperSpringBody&&(Game.playSound("pin-ball/collision-sound-two.mp3",.2),Game.playSound("pin-ball/thunk-2.mp3",.4),(r=this.scene.getPinBallPosition().y)<25?this.pinballImpulse([-800*this.forceMultiplier,1700*this.forceMultiplier],t.bodyB):r>85?this.pinballImpulse([-800*this.forceMultiplier,350*this.forceMultiplier],t.bodyB):this.pinballImpulse([-800*this.forceMultiplier,1200*this.forceMultiplier],t.bodyB),this.scene.addScore(50),"upper"==this.levelState&&this.levelStateChange(!0),this.scene.bumperEffect(4)),t.bodyA==this.leftBumperSpringBody){Game.playSound("pin-ball/collision-sound-two.mp3",.2),Game.playSound("pin-ball/thunk-2.mp3",.4);var r=this.scene.getPinBallPosition().y;r<25?this.pinballImpulse([800*this.forceMultiplier,1700*this.forceMultiplier],t.bodyB):r>85?this.pinballImpulse([800*this.forceMultiplier,350*this.forceMultiplier],t.bodyB):this.pinballImpulse([800*this.forceMultiplier,1200*this.forceMultiplier],t.bodyB),this.scene.addScore(50),"upper"==this.levelState&&this.levelStateChange(!0),this.scene.bumperEffect(3)}if(t.bodyA==this.circleBumper1Body){Game.playSound("pin-ball/bell-3.mp3",.3),Game.playSound("pin-ball/thunk-1.mp3",.4);var i=this.pinballBody.velocity[0],s=this.pinballBody.velocity[1],o=i*this.roundBumperForce*this.forceMultiplier,a=s*this.roundBumperForce*this.forceMultiplier;o>this.ballSpeedLimit?o=this.ballSpeedLimit:o<-this.ballSpeedLimit&&(o=-this.ballSpeedLimit),a>this.ballSpeedLimit?a=this.ballSpeedLimit:a<-this.ballSpeedLimit&&(a=-this.ballSpeedLimit),this.pinballImpulse([o,a]),this.scene.bumperEffect(2),this.scene.addScore(100),"upper"==this.levelState&&this.levelStateChange(!0)}if(t.bodyA==this.circleBumper2Body){Game.playSound("pin-ball/bell-2.mp3",.3),Game.playSound("pin-ball/thunk-1.mp3",.4);var i=this.pinballBody.velocity[0],s=this.pinballBody.velocity[1],o=i*this.roundBumperForce*this.forceMultiplier,a=s*this.roundBumperForce*this.forceMultiplier;o>this.ballSpeedLimit?o=this.ballSpeedLimit:o<-this.ballSpeedLimit&&(o=-this.ballSpeedLimit),a>this.ballSpeedLimit?a=this.ballSpeedLimit:a<-this.ballSpeedLimit&&(a=-this.ballSpeedLimit),this.pinballImpulse([o,a]),this.scene.bumperEffect(1),this.scene.addScore(100),"upper"==this.levelState&&this.levelStateChange(!0)}if(t.bodyA==this.circleBumper3Body){Game.playSound("pin-ball/bell-1.mp3",.3),Game.playSound("pin-ball/thunk-1.mp3",.4);var i=this.pinballBody.velocity[0],s=this.pinballBody.velocity[1],o=i*this.roundBumperForce*this.forceMultiplier,a=s*this.roundBumperForce*this.forceMultiplier;o>this.ballSpeedLimit?o=this.ballSpeedLimit:o<-this.ballSpeedLimit&&(o=-this.ballSpeedLimit),a>this.ballSpeedLimit?a=this.ballSpeedLimit:a<-this.ballSpeedLimit&&(a=-this.ballSpeedLimit),this.pinballImpulse([o,a]),this.scene.bumperEffect(0),this.scene.addScore(100),"upper"==this.levelState&&this.levelStateChange(!0)}}},e.prototype.pinballImpulse=function(e,t,i,s){0==i?(this.pinballBody.applyImpulse([e[0],e[1]]),t!=this.rightTriggerSpringBody&&t!=this.leftTriggerSpringBody||(Game.playSound("pin-ball/ball-hit.mp3",.3),Game.playSound("pin-ball/spring.mp3",.3))):TweenMax.delayedCall(s,function(){this.pinballBody.velocity[0]=0,this.pinballBody.velocity[1]=0,this.pinballBody.applyImpulse([e[0],e[1]]),Game.playSound("pin-ball/gun-fire.mp3",.3),t!=this.rightTriggerSpringBody&&t!=this.leftTriggerSpringBody||(Game.playSound("pin-ball/ball-hit.mp3",.3),Game.playSound("pin-ball/spring.mp3",.3))},null,this)},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angularVelocity=0,e.angularForce=0,e.angle=0,e.velocity=[0,0],e.setZeroForce(),e.mass/=2},e.prototype.createComplexShape=function(e,t,i,s){for(var o=0;o<t.length;o++){!function(t,s){for(var o=[],a=0;a<t.length;a++)a%2==1&&o.push([t[a-1],t[a]]);var r=new p2.Convex({vertices:o});if(i==s.FLIPPER){var n=new p2.AABB;r.computeAABB(n,[0,0],0),e.addShape(r,[-116,-35])}else e.addShape(r)}(t[o].shape,this),e.shapes[o].collisionGroup=i;for(var a=0;a<s.length;a++)e.shapes[o].collisionMask=s[a]}},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.destroy=function(){this.world.clear(),this.world=null},e}(),PinBallPhysicsObjects=function(){function e(){}return e.topRightCurve=[{shape:[446,444,430,208,446,0]},{shape:[446,444,414,288,430,208]},{shape:[446,444,388,349,414,288]},{shape:[446,444,345,398,388,349]},{shape:[446,444,287,424,345,398]},{shape:[446,444,223,434,287,424]},{shape:[446,444,0,444,223,434]}],e.topLeftCurve=[{shape:[16,208,0,444,0,0]},{shape:[32,288,0,444,16,208]},{shape:[58,349,0,444,32,288]},{shape:[101,398,0,444,58,349]},{shape:[159,424,0,444,101,398]},{shape:[223,434,0,444,159,424]},{shape:[446,444,0,444,223,434]}],e.flipperBracketLeft=[{shape:[148,68,16,167,0,65,116,36,152,53]},{shape:[116,36,0,65,117,4]},{shape:[16,167,15,366,0,367,0,65]}],e.flipperBracketRight=[{shape:[36,36,152,65,136,167,4,68,0,53]},{shape:[152,65,36,36,35,4]},{shape:[152,367,137,366,136,167,152,65]}],e.angleBlockLeft=[{shape:[3,0,128,128,128,140,3,282]}],e.bumperLeft=[{shape:[34,18,109,4,109,14,1,170]}],e.bumperRight=[{shape:[1,14,1,4,76,18,109,170]}],e.exitLeft=[{shape:[0,68,338,68,122,106,0,108]},{shape:[122,106,338,68,121,176]}],e.exitRight=[{shape:[217,104,0,68,338,68,338,108]},{shape:[0,68,217,104,217,176]}],e.rightAngle=[{shape:[142,305,12,187,9,167,142,0]}],e.iceRampEntrance=[{shape:[190,102,119,47,113,18,218,102]},{shape:[65,9,61,0,113,18,119,47]}],e.iceUpperWall=[{shape:[1016,736,1005,855,995,758,997,667,1016,659]},{shape:[874,1007,949,904,1005,855,970,937,930,982]},{shape:[1005,855,973,847,995,758]},{shape:[1005,855,949,904,973,847]},{shape:[267,918,300,903,349,974,346,1016,300,980]},{shape:[26,222,150,109,161,134,26,246]},{shape:[150,109,272,106,256,132,161,134]},{shape:[303,347,280,354,256,132,272,106]},{shape:[874,1007,795,1030,834,982,949,904]},{shape:[795,1030,609,1044,466,1035,609,1001,834,982]},{shape:[466,1035,346,1016,465,997,609,1001]},{shape:[346,1016,349,974,465,997]},{shape:[267,716,280,354,300,720,300,903,267,918]},{shape:[280,354,303,347,300,720]}],e.powerupSave=[{shape:[4,79,263,1,271,1,266,17,6,95]},{shape:[526,80,524,95,266,17,271,1]}],e.flipperLeftNormal=[{shape:[32,8,235,2,237,31,39,70,4,53]}],e.flipperLeftThick=[{shape:[35,21,232,2,237,74,39,113,4,96]}],e.flipperRightThick=[{shape:[202,113,4,74,9,2,206,21,237,96]}],e.flipperRightNormal=[{shape:[202,70,4,31,6,2,209,8,237,53]}],e}(),PinBallInputManager=function(){function e(e,t){this.rightKeyDown=0,this.leftKeyDown=0,this.downKeyDown=0,this.scene=e,this.mainHolderRef=t,this.hitAreaSprite=Game.displayStore.getSprite("pin-ball/blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.currentAngle=0,this.launcherForce=0,this.maxAngleDiff=1.4,this.minAngleDiff=.1,this.keyboardDown=!1,this.mouseIsDown=!1,this.mousePos=new PIXI.Point,this.leftFlipperAngle=-.5,this.rightFlipperAngle=.5,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite)}return e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mousemove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseupoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))})):(e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchmove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchendoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}))},e.prototype.inputDown=function(e,t){this.mouseIsDown=!0;var i;i=1==this.scene.ballInPlay?Game.stageWidth:Game.stageWidth-125,t.x>Game.stageWidth/2&&t.x<i?this.keyDown("right"):t.x>i?this.keyDown("down"):t.x<Game.stageWidth/2&&this.keyDown("left")},e.prototype.inputUp=function(e,t){this.mouseIsDown=!1,this.keyUp("right"),this.keyUp("left"),this.keyUp("down"),t.x>Game.stageWidth/2&&this.keyUp("right")},e.prototype.inputMove=function(e,t){1==this.mouseIsDown&&(this.mousePos.x=t.x,this.mousePos.y=t.y)},e.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},e.prototype.getInputAngle=function(){var e=this.currentAngle;return e>this.maxAngleDiff&&(e=this.maxAngleDiff),e<this.minAngleDiff&&(e=this.minAngleDiff),e},e.prototype.keyDown=function(e){if(1!=this.scene.tutorialOverlay.isOpen){switch(this.keyboardInput=e,e){case"left":this.leftKeyDown=this.leftKeyDown+1,1==this.leftKeyDown&&Game.playSound("pin-ball/flipper.mp3",1),this.leftFlipperAngle=.5;break;case"right":this.rightKeyDown=this.rightKeyDown+1,1==this.rightKeyDown&&Game.playSound("pin-ball/flipper.mp3",1),this.rightFlipperAngle=-.5;break;case"down":this.launcherForce=-1,this.downKeyDown=this.downKeyDown+1,this.downKeyDown<=1&&Game.playSound("pin-ball/wind-up-spring2.mp3",.2);break;case"up":this.startAngle=0;break;case"spacebar":this.keyboardInput="spacebar"}this.keyboardDown=!0}},e.prototype.keyUp=function(e){if(1!=this.scene.tutorialOverlay.isOpen){switch(e){case"left":Game.playSound("pin-ball/flipper-release.mp3",.5),this.leftKeyDown=0,this.leftFlipperAngle=-.5;break;case"right":this.rightKeyDown=0,Game.playSound("pin-ball/flipper-release.mp3",.5),this.rightFlipperAngle=.5;break;case"down":this.launcherForce=0,this.downKeyDown=-1,Game.stopSound("pin-ball/wind-up-spring2.mp3")}this.keyboardDown=!1}},e.prototype.tick=function(){this.scene.physicsManager.moveFlippers(this.leftFlipperAngle,this.rightFlipperAngle),this.scene.physicsManager.setLauncherForce(this.launcherForce),1==this.scene.pinDevMode&&this.mouseIsDown&&this.scene.physicsManager.dragBody(this.scene.physicsManager.pinballBody,this.mousePos.x+200,Game.stageHeight-this.mousePos.y)},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},e}(),PinBallTicket=function(){function e(e,t){this.scene=e,this.game=e.game,this.index=t,this.available=!0,this.destroyed=!1,this.body=new p2.Body,this.shape=new p2.Circle({radius:20,sensor:!0}),this.body.addShape(this.shape),this.shape.collisionMask=this.scene.physicsManager.BALL}return e.prototype.spawn=function(e,t,i,s,o){if(1!=this.destroyed){this.available=!1;var a=Game.coreData.getCurrentTickets()-Game.coreData.getCurrentRide().startingTickets;this.mainHolder=i,this.lowerContainer=e,this.upperContainer=t,a%2==0&&0!=a&&Game.getRandom(0,1)>this.scene.currentLives/3?this.ticket=Game.ticketPool.getHeart():this.ticket=Game.ticketPool.getTicket(),this.body.position[0]=s.x,this.body.position[1]=s.y,this.scene.physicsManager.bindSpriteToBody(this.ticket.container,this.body),this.scene.physicsManager.addBodyToWorld(this.body),1==o?(this.shape.collisionGroup=this.scene.physicsManager.LOWERTICKET,this.lowerContainer.addChild(this.ticket.container)):(this.shape.collisionGroup=this.scene.physicsManager.UPPERTICKET,this.upperContainer.addChild(this.ticket.container))}},e.prototype.collect=function(){this.scene.physicsManager.removeBodyFromWorld(this.body),this.scene.removeTicket(this.index),this.available=!0,1==this.ticket.isHeart&&this.scene.addLife(),this.ticket.collect(),Game.getRandom(0,1)>.5&&("patrick"==this.scene.character?Game.playSound("pin-ball/patrick-burp.mp3"):Game.playSound("pin-ball/sb-gottcha.mp3"))},e.prototype.pause=function(){this.ticket&&this.ticket.pause()},e.prototype.resume=function(){this.ticket&&this.ticket.resume()},e.prototype.destroy=function(){this.destroyed=!0,this.ticket&&(this.scene.physicsManager.unbindSpriteFromBody(this.ticket.container),this.scene.physicsManager.removeBodyFromWorld(this.body),this.body=null,this.ticket.destroy())},e}(),CocoNuttyLevelManager=function(){function e(e,t,i,s,o,a){this.screenLengths=5,this.midParallaxAmount=20,this.backParallaxAmount=5,this.scene=e,this.scrollMax=0,this.scrollMin=0-(this.screenLengths-1)*Game.stageWidth,this.mainContainer=t,this.treeBG=Game.displayStore.getSprite("coco-nutty/tree-bg"),this.treeBG.position.y=Game.stageHeight,this.treeBG.position.x=1500,this.treeBG2=Game.displayStore.getSprite("coco-nutty/tree-bg-2"),this.treeBG2.position.y=Game.stageHeight,this.treeBG2.position.x=2500,this.treeBG3=Game.displayStore.getSprite("coco-nutty/tree-bg-2"),this.treeBG3.position.y=Game.stageHeight,this.treeBG3.position.x=3500,this.treeBG3.scale.x=-1,this.hangingElement0=Game.displayStore.getSprite("coco-nutty/hanging-element-bg-0"),this.hangingElement0.position.y=0,this.hangingElement0.position.x=800,this.hangingVine0=Game.displayStore.getSprite("coco-nutty/hanging-vine-bg-0"),this.hangingVine0.position.y=0,this.hangingVine0.position.x=2e3,this.hangingElement1=Game.displayStore.getSprite("coco-nutty/hanging-element-bg-0"),this.hangingElement1.position.y=0,this.hangingElement1.position.x=2500,this.hangingElement1.scale.x=-1,this.hangingVine1=Game.displayStore.getSprite("coco-nutty/hanging-vine-bg-0"),this.hangingVine1.position.y=0,this.hangingVine1.position.x=0,this.hangingVine1.scale.x=-1,this.foregroundVine0=Game.displayStore.getSprite("coco-nutty/hanging-vine-fg-0"),this.foregroundVine0.position.y=0,this.foregroundVine0.position.x=1e3,this.hangingElementForeground0=Game.displayStore.getSprite("coco-nutty/hanging-element-fg-0"),this.hangingElementForeground0.position.y=0,this.hangingElementForeground0.position.x=2500,this.bottomElementFG0=Game.displayStore.getSprite("coco-nutty/bottom-element-fg-0"),this.bottomElementFG0.position.y=Game.stageHeight,this.bottomElementFG0.position.x=3e3,this.bottomElementFG1=Game.displayStore.getSprite("coco-nutty/bottom-element-fg-1"),this.bottomElementFG1.position.y=Game.stageHeight,this.bottomElementFG1.position.x=1750,this.backgroundContainer=i,this.foregroundContainer=o,this.midContainer=s,this.foregroundParallaxContainer=a,this.foregroundParallaxContainer.addChild(this.foregroundVine0),this.foregroundParallaxContainer.addChild(this.hangingElementForeground0),this.foregroundParallaxContainer.addChild(this.bottomElementFG0),this.foregroundParallaxContainer.addChild(this.bottomElementFG1),this.foregroundFloorElements=new Array;for(r=0;r<this.screenLengths;r++)(n=Game.displayStore.getSprite("coco-nutty/foreground-floor")).position.x=r*n.width,n.position.y=Game.stageHeight,this.foregroundContainer.addChild(n),this.foregroundFloorElements.push(n);this.foregroundTreeCanopyElements=new Array;for(r=0;r<this.screenLengths;r++)(n=Game.displayStore.getSprite("coco-nutty/tree-canopy-fg")).position.x=r*n.width,n.position.y=0,this.foregroundContainer.addChild(n),this.foregroundTreeCanopyElements.push(n);this.backgroundTrees=new Array;for(r=0;r<2*this.screenLengths;r++)(n=Game.displayStore.getSprite("coco-nutty/background-tree-element")).position.x=r*n.width,n.alpha=1,this.backgroundContainer.addChild(n),this.backgroundTrees.push(n);this.midTrees=new Array;for(var r=0;r<2*this.screenLengths;r++){var n=Game.displayStore.getSprite("coco-nutty/mid-tree-element");n.position.x=r*n.width,this.midContainer.addChild(n),this.midTrees.push(n)}this.midContainer.addChild(this.treeBG),this.midContainer.addChild(this.treeBG2),this.midContainer.addChild(this.treeBG3),this.midContainer.addChild(this.hangingElement0),this.midContainer.addChild(this.hangingVine0),this.midContainer.addChild(this.hangingElement1),this.midContainer.addChild(this.hangingVine1)}return e.prototype.tick=function(){this.backgroundContainer.position.x=-this.mainContainer.position.x/this.backParallaxAmount,this.midContainer.position.x=-this.mainContainer.position.x/this.midParallaxAmount},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){for(e=0;e<this.foregroundFloorElements.length;e++)Game.displayStore.returnPooledItem(this.foregroundFloorElements[e]);for(e=0;e<this.foregroundTreeCanopyElements.length;e++)Game.displayStore.returnPooledItem(this.foregroundTreeCanopyElements[e]);for(e=0;e<this.backgroundTrees.length;e++)Game.displayStore.returnPooledItem(this.backgroundTrees[e]);for(var e=0;e<this.midTrees.length;e++)Game.displayStore.returnPooledItem(this.midTrees[e]);Game.displayStore.returnPooledItem(this.treeBG3),Game.displayStore.returnPooledItem(this.treeBG2),Game.displayStore.returnPooledItem(this.hangingElement0),Game.displayStore.returnPooledItem(this.hangingVine0),Game.displayStore.returnPooledItem(this.hangingVine1),Game.displayStore.returnPooledItem(this.hangingElement1)},e}(),CocoNuttyInputManager=function(){function e(e,t,i,s,o){this.currentAimAngle=0,this.beamkillCountLimit=30,this.beamkillCount=0,this.upKeyOn=!1,this.downKeyOn=!1,this.keyboardAngleDuration=.5,this.powerBeamPrimed=!1,this.mainContainerRef=t,this.powerMeterXPos=i,this.powerMeterYPos=s,this.storedPowerSettingPos=i,this.powerMeterNeedleAreaBuffer=40,this.draggingPowerNeedle=!1,this.differenceAimRange=100,this.inputDivideAimScrollVertPos=o,this.scene=e,this.blankInput=Game.displayStore.getSprite("coco-nutty/blank-input"),this.blankInput.width=Game.stageWidth,this.blankInput.height=Game.stageHeight,this.scrollReset=!1,this.scene.container.addChild(this.blankInput),this.inputDownPosOrig=new PIXI.Point(0,0),this.inputDownPosMove=new PIXI.Point(0,0),this.setUpHitArea(this.blankInput),this.inputDividePowerPos=400,this.adjustPowerMode=!1,this.aimLauncherMode=!1,this.panPreviewMode=!1,this.mouseDown=!1,this.keyBoardModeOn=!1,this.mouseModeOn=!0,this.storedScrollInputDifference=0,this.currentScrollInputDifference=0,this.storedAimInputDifference=0,this.currentAimInputDifference=0,this.maxAimAngleDiff=.8,this.minAimAngleDiff=-.2,this.keyboardCurrentAngle=this.minAimAngleDiff,this.minAimInputDifference=this.storedAimInputDifference-this.differenceAimRange,this.maxAimInputDifference=this.storedAimInputDifference+this.differenceAimRange}return e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mousemove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t)}),e.on("mouseupoutside",function(e){t.inputUp(t)})):(e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchmove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t)}),e.on("touchendoutside",function(e){t.inputUp(t)}))},e.prototype.inputDown=function(e,t){e.scrollReset=!1,e.mouseDown=!0,e.keyBoardModeOn=!1,e.mouseModeOn=!0,e.inputDownPosOrig.x=t.x,e.inputDownPosOrig.y=t.y,e.inputDownPosMove.x=t.x,e.inputDownPosMove.y=t.y,Game.playSound("coco-nutty/winding-toy.mp3",.5),e.scene.checkCancelRoundPreview(),t.x<e.inputDivideAimScrollVertPos?e.startAim(e,t):e.startPanPreview(e,t)},e.prototype.startAim=function(e,t){e.adjustPowerMode=!1,e.aimLauncherMode=!0,e.panPreviewMode=!1,e.currentAimInputDifference=e.storedAimInputDifference},e.prototype.startScroll=function(e,t){e.adjustPowerMode=!1,e.aimLauncherMode=!1,e.panPreviewMode=!0,e.currentScrollInputDifference=e.storedScrollInputDifference},e.prototype.startPanPreview=function(e,t){e.adjustPowerMode=!1,e.aimLauncherMode=!1,e.panPreviewMode=!0,e.scene.beginPanPreviewMode()},e.prototype.resetScrollStoredPos=function(e){1!=this.scrollReset&&(this.scrollReset=!0,this.currentScrollInputDifference=e,this.storedScrollInputDifference=e)},e.prototype.startAdjustPower=function(e,t){e.adjustPowerMode=!1,e.aimLauncherMode=!1,e.panPreviewMode=!1,t.x<e.powerMeterXPos+e.powerMeterNeedleAreaBuffer&&t.x>e.powerMeterXPos-e.powerMeterNeedleAreaBuffer&&t.y<e.powerMeterYPos+e.powerMeterNeedleAreaBuffer&&t.y>e.powerMeterYPos-e.powerMeterNeedleAreaBuffer&&(e.adjustPowerMode=!0)},e.prototype.inputUp=function(e){e.mouseDown=!1,1==e.aimLauncherMode&&(e.scene.primeBeamAim(!1),e.storedAimInputDifference=e.currentAimInputDifference),1==e.panPreviewMode&&e.scene.endPanPreviewMode(),1==e.adjustPowerMode&&(e.powerBeamPrimed=!1),e.adjustPowerMode=!1,e.aimLauncherMode=!1,e.panPreviewMode=!1,Game.stopSound("coco-nutty/winding-toy.mp3")},e.prototype.upKeyDown=function(){if(Game.playSound("coco-nutty/winding-toy.mp3",.5),1!=this.upKeyOn){0==this.keyBoardModeOn&&(this.keyboardCurrentAngle=this.currentAimAngle),this.keyBoardModeOn=!0,this.upKeyOn=!0,this.mouseModeOn=!1;var e=this.maxAimAngleDiff-this.minAimAngleDiff,t=(this.maxAimAngleDiff-this.keyboardCurrentAngle)/e,i=this.keyboardAngleDuration*t;this.keyboardAngleTween=TweenMax.to(this,i,{keyboardCurrentAngle:this.maxAimAngleDiff,ease:Linear.easeNone})}},e.prototype.downKeyDown=function(){if(1!=this.downKeyOn){0==this.keyBoardModeOn&&(this.keyboardCurrentAngle=this.currentAimAngle),Game.playSound("coco-nutty/winding-toy.mp3",.5),this.keyBoardModeOn=!0,this.downKeyOn=!0,this.mouseModeOn=!1;var e=this.maxAimAngleDiff-this.minAimAngleDiff,t=(this.keyboardCurrentAngle-this.minAimAngleDiff)/e,i=this.keyboardAngleDuration*t;this.keyboardAngleTween=TweenMax.to(this,i,{keyboardCurrentAngle:this.minAimAngleDiff,ease:Linear.easeNone})}},e.prototype.upKeyUp=function(){this.upKeyOn=!1,Game.stopSound("coco-nutty/winding-toy.mp3"),this.keyboardAngleTween=this.scene.killTween(this.keyboardAngleTween)},e.prototype.downKeyUp=function(){Game.stopSound("coco-nutty/winding-toy.mp3"),this.downKeyOn=!1,this.keyboardAngleTween=this.scene.killTween(this.keyboardAngleTween)},e.prototype.updatePowerNeedlePos=function(e){this.powerMeterXPos=e},e.prototype.resetScrollPointCameraSnap=function(e){this.storedScrollInputDifference=e},e.prototype.inputMove=function(e,t){0!=e.mouseDown&&(1==e.adjustPowerMode&&(e.scene.adjustPowerMeterNeedle(t.x),e.powerBeamPrimed=!0,e.scene.primeBeamAim(!1)),1==e.aimLauncherMode&&(e.inputDownPosMove.y=t.y,e.currentAimInputDifference=e.storedAimInputDifference+(e.inputDownPosOrig.y-e.inputDownPosMove.y),e.scene.primeBeamAim(!0),e.powerBeamPrimed=!1))},e.prototype.tick=function(){this.calculateInputEffect(),this.calcConvertedInputAngle(),this.storedPowerSettingPos==this.powerMeterXPos&&1==this.powerBeamPrimed&&this.scene.resetBeam(),this.mouseDown},e.prototype.getInputAngle=function(){var e=this.currentAimAngle;return e>this.maxAimAngleDiff&&(e=this.maxAimAngleDiff),e<this.minAimAngleDiff&&(e=this.minAimAngleDiff),e},e.prototype.getKeyboardInputAngle=function(){return this.keyboardCurrentAngle},e.prototype.calculateInputEffect=function(){this.currentAimInputDifference<=this.minAimInputDifference&&(this.currentAimInputDifference=this.minAimInputDifference),this.currentAimInputDifference>=this.maxAimInputDifference&&(this.currentAimInputDifference=this.maxAimInputDifference),this.inputDownPosMove.y=this.inputDownPosOrig.y+this.currentAimInputDifference},e.prototype.calcConvertedInputAngle=function(){var e=this.maxAimInputDifference-this.minAimInputDifference,t=this.inputDownPosOrig.y-e/2,i=(this.inputDownPosOrig.y,(this.inputDownPosMove.y-t)/e),s=(this.maxAimAngleDiff-this.minAimAngleDiff)*i;this.currentAimAngle=this.minAimAngleDiff+s},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.blankInput.removeAllListeners(),Game.stopSound("coco-nutty/winding-toy.mp3")},e}(),CocoNuttyPhysicsManager=function(){function e(e,t){this.physicsEnabled=!0,this.resizeRatio=1,this.scene=e,this.characerPosX=t}return e.prototype.initPhysicsWorld=function(){this.world=new p2.World({gravity:[0,-500]}),this.powerUpAngleAdjustCount=0,this.powerUpAngleAdjust=0,this.powerUpLaunchAngle=0,this.powerUpCoconutFlying=!1,this.minFirePower=1500,this.maxFirePower=3e3,this.aimBeamPrimed=!1,this.powerUpOn=!1,this.coconutLandingEndPos=[0,0],this.currentFirePower=this.minFirePower,this.coconutGroundLevel=Game.stageHeight-560,this.launcherRotateForce=10,this.beamkillCountLimit=20,this.beamkillCount=0,this.storedLauncherAngle=0,this.coconutLandedMode=!1,this.launchRadius=50,this.launchOffsetAngle=.6,this.collisionGroupLauncher=Math.pow(2,0),this.collisionGroupProjectileIndicator=Math.pow(2,1),this.collisionGroupProjectileIndicatorSensor=Math.pow(2,2),this.collisionGroupFloor=Math.pow(2,3),this.collisionGroupCoconut=Math.pow(2,4),this.collisionGroupDirtParticle=Math.pow(2,5),this.collisionGroupDirtPlane=Math.pow(2,6),this.collisionGroupTarget=Math.pow(2,7),this.collisionGroupCococnutChunk=Math.pow(2,8),this.collisionGroupCococnutChunkFloor=Math.pow(2,9),this.collisionGroupLeaf=Math.pow(2,10),this.collisionGroupLeafFloor=Math.pow(2,11),this.projectileIndicatorSensorBody=new p2.Body({mass:0,position:[0,Game.stageHeight-600],angle:0}),this.projectileIndicatorSensorShape=new p2.Plane,this.projectileIndicatorSensorShape.sensor=!0,this.projectileIndicatorSensorShape.collisionGroup=this.collisionGroupProjectileIndicatorSensor,this.projectileIndicatorSensorShape.collisionMask=this.collisionGroupProjectileIndicator,this.projectileIndicatorSensorBody.addShape(this.projectileIndicatorSensorShape),this.coconutFloorBody=new p2.Body({mass:0,position:[0,this.coconutGroundLevel],angle:0}),this.coconutFloorShape=new p2.Plane,this.coconutFloorShape.collisionGroup=this.collisionGroupFloor,this.coconutFloorShape.collisionMask=this.collisionGroupCoconut,this.coconutFloorBody.addShape(this.coconutFloorShape),this.leafFloorBody=new p2.Body({mass:0,position:[0,Game.stageHeight-600],angle:0}),this.leafFloorShape=new p2.Plane,this.leafFloorShape.sensor=!0,this.leafFloorShape.collisionGroup=this.collisionGroupLeafFloor,this.leafFloorShape.collisionMask=this.collisionGroupLeaf,this.leafFloorBody.addShape(this.leafFloorShape),this.coconutEndWallBody=new p2.Body({mass:0,position:[5500,0],angle:Math.PI/2}),this.coconutEndWallShape=new p2.Plane,this.coconutEndWallShape.collisionGroup=this.collisionGroupFloor,this.coconutEndWallShape.collisionMask=this.collisionGroupCoconut,this.coconutEndWallBody.addShape(this.coconutEndWallShape),this.dirtParticlesPlaneBody=new p2.Body({mass:0,position:[0,Game.stageHeight-700],angle:0}),this.dirtParticlesPlaneShape=new p2.Plane,this.dirtParticlesPlaneShape.collisionGroup=this.collisionGroupDirtPlane,this.dirtParticlesPlaneShape.collisionMask=this.collisionGroupDirtParticle,this.dirtParticlesPlaneBody.addShape(this.dirtParticlesPlaneShape),this.coconutChunkFloorBody=new p2.Body({mass:0,position:[0,Game.stageHeight-700],angle:0}),this.coconutChunkFloorShape=new p2.Plane,this.coconutChunkFloorShape.sensor=!0,this.coconutChunkFloorShape.collisionGroup=this.collisionGroupCococnutChunkFloor,this.coconutChunkFloorShape.collisionMask=this.collisionGroupCococnutChunk,this.coconutChunkFloorBody.addShape(this.coconutChunkFloorShape),this.world.addBody(this.dirtParticlesPlaneBody),this.world.addBody(this.coconutFloorBody),this.world.addBody(this.leafFloorBody),this.coconutMaterial=new p2.Material,this.groundMaterial=new p2.Material,this.coconutFloorShape.material=this.groundMaterial,this.world.addBody(this.coconutFloorBody),this.world.addBody(this.coconutEndWallBody),this.world.addBody(this.projectileIndicatorSensorBody),this.characerPosY=Game.stageHeight-350,this.world.broadphase=new p2.NaiveBroadphase(1),this.launcherBody=new p2.Body({mass:5,position:[this.characerPosX,this.characerPosY]}),this.launcherShape=new p2.Circle({radius:40}),this.launcherShape.collisionGroup=this.collisionGroupLauncher,this.launcherBody.addShape(this.launcherShape),this.launcherPinBody=new p2.Body({mass:0,position:[this.characerPosX,this.characerPosY]}),this.launcherPinShape=new p2.Circle({radius:10}),this.launcherPinShape.collisionGroup=this.collisionGroupLauncher,this.launcherPinBody.addShape(this.launcherPinShape),this.launcherBody.angularDamping=.9,this.launcherBody.damping=.9,this.launcherPinConstraint=new p2.RevoluteConstraint(this.launcherPinBody,this.launcherBody,{localPivotA:[0,0],localPivotB:[0,0],collideConnected:!1}),this.launcherPinConstraint.enableMotor(),this.world.addBody(this.launcherPinBody),this.world.addBody(this.launcherBody),this.world.addConstraint(this.launcherPinConstraint);var e=this;this.world.on("beginContact",function(t){e.checkCollision(e,t)}),this.world.on("endContact",function(e){}),this.world.on("postStep",function(e){}),this.storedLauncherAngle=this.launcherBody.angle,this.physicsEnabled=!0},e.prototype.checkCollision=function(e,t){t.bodyA!=e.projectileIndicatorSensorBody?t.bodyB!=e.projectileIndicatorSensorBody?(e.targetHitCheck(e,t.bodyA,t.bodyB),t.bodyA!=e.coconutFloorBody?t.bodyB!=e.coconutFloorBody?t.bodyA!=e.coconutEndWallBody?t.bodyB!=e.coconutEndWallBody?t.bodyA!=e.leafFloorBody?t.bodyB!=e.leafFloorBody?t.bodyA!=e.dirtParticlesPlaneBody?t.bodyB!=e.dirtParticlesPlaneBody?t.bodyA!=e.coconutChunkFloorBody?t.bodyB!=e.coconutChunkFloorBody||e.coconutChunkLanded(e,t.bodyA):e.coconutChunkLanded(e,t.bodyB):e.dirtParticleLandedCheck(e,t.bodyA):e.dirtParticleLandedCheck(e,t.bodyB):e.leafLandedCheck(e,t.bodyA):e.leafLandedCheck(e,t.bodyB):e.coconutLandedCheck(e,t.bodyA):e.coconutLandedCheck(e,t.bodyB):e.coconutLandedCheck(e,t.bodyA):e.coconutLandedCheck(e,t.bodyB)):e.resetProjectileIndicatorBeam(e,t.bodyA):e.resetProjectileIndicatorBeam(e,t.bodyB)},e.prototype.explodeCoconut=function(e,t,i){var s,o=this.getAngle(i.position[0],Game.stageHeight-i.position[1],e.position[0],Game.stageHeight-e.position[1]);this.getDistance(i.position[0],Game.stageHeight-i.position[1],e.position[0],Game.stageHeight-e.position[1]);1==this.powerUpOn?s=5e4:0==this.powerUpOn&&(s=1e4);var a=Math.cos(o-t.angle)*s,r=Math.sin(o-t.angle)*s,n=[a,r];(a||r)&&(i.applyImpulse(n),t.applyImpulseLocal([n[0]/4,n[1]/4]),this.world.removeBody(e))},e.prototype.coconutChunkLanded=function(e,t){e.scene.resetCoconutChunk(t)},e.prototype.leafLandedCheck=function(e,t){e.scene.resetLeaf(t)},e.prototype.resetProjectileIndicatorBeam=function(e,t){e.scene.resetProjectileIndicatorBeam(t)},e.prototype.dirtParticleLandedCheck=function(e,t){e.scene.resetDirtPartcile(t)},e.prototype.targetHitCheck=function(e,t,i){e.scene.targetHitCheck(t,i)},e.prototype.coconutLandedCheck=function(e,t){var i=Math.atan(t.velocity[1]/t.velocity[0]);e.scene.coconutLanded(t.position,i),t.damping=.98,t.angularDamping=.98,e.world.removeBody(t)},e.prototype.killProjectileIndicatorBeamPhysics=function(e){this.resetBody(e),e.position[1]=-1e3,this.world.removeBody(e)},e.prototype.addBodyToWorld=function(e){this.world.addBody(e)},e.prototype.removeBodyFromWorld=function(e){this.world.removeBody(e)},e.prototype.removeConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.addConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.removeSpringFromWorld=function(e){this.world.removeSpring(e)},e.prototype.addSpringToWorld=function(e){this.world.addSpring(e)},e.prototype.getProjectileIndicatorObj=function(){var e=new p2.Body({mass:2}),t=new p2.Circle({radius:35});return t.collisionGroup=this.collisionGroupProjectileIndicator,t.collisionMask=this.collisionGroupProjectileIndicatorSensor,t.sensor=!0,e.addShape(t),{body:e,shape:t}},e.prototype.getBlankProjectile=function(){var e=new p2.Body({mass:2}),t=new p2.Circle({radius:35});return t.collisionGroup=this.collisionGroupProjectileIndicator,t.collisionMask=this.collisionGroupProjectileIndicatorSensor,t.sensor=!0,e.addShape(t),{body:e,shape:t}},e.prototype.getDirtParticle=function(){var e=Game.getRandom(.5,1),t=new p2.Body({mass:2*e}),i=new p2.Circle({radius:20*e});return i.collisionGroup=this.collisionGroupDirtParticle,i.collisionMask=this.collisionGroupDirtPlane,t.damping=Game.getRandom(.1,.4),t.addShape(i),{body:t,shape:i,scale:e}},e.prototype.getLeafParticle=function(){var e=Game.getRandom(.3,1),t=new p2.Body({mass:.5*e}),i=new p2.Circle({radius:10*e});return t.damping=Game.getRandom(.2,.6),t.angularDamping=Game.getRandom(.4,.9),t.gravityScale=Game.getRandom(.2,.5),i.sensor=!0,i.collisionGroup=this.collisionGroupLeaf,i.collisionMask=this.collisionGroupLeafFloor,t.addShape(i),{body:t,shape:i,scale:e}},e.prototype.getCoconutProjectile=function(){var e=new p2.Body({mass:2}),t=new p2.Circle({radius:35});return t.collisionGroup=this.collisionGroupCoconut,t.collisionMask=this.collisionGroupFloor|this.collisionGroupTarget,this.coconutProjectileRef=e,t.material=this.coconutMaterial,this.groundContactMaterial=new p2.ContactMaterial(this.groundMaterial,this.coconutMaterial,{friction:1,restitution:.1,stiffness:100}),e.addShape(t),this.world.addContactMaterial(this.groundContactMaterial),{body:e,shape:t}},e.prototype.getCoconutChunkBit=function(){var e=new p2.Body({mass:Game.getRandom(.1,2)}),t=new p2.Circle({radius:2});return t.collisionGroup=this.collisionGroupCococnutChunk,t.collisionMask=this.collisionGroupCococnutChunkFloor,e.addShape(t),{body:e,shape:t}},e.prototype.getDroppingMagnet=function(){var e=new p2.Body({mass:5,position:[0,Game.stageHeight+100]}),t=new p2.Circle({radius:20});t.sensor=!0,e.addShape(t),e.damping=.9;var i=new p2.Body({mass:0,position:[0,Game.stageHeight+1e3]});return{body:e,shape:t,pinBody:i,rope:new p2.DistanceConstraint(e,i,{collideConnected:!1,distance:0})}},e.prototype.fireIndicatorBeam=function(e){this.fireProjectile(e,!1)},e.prototype.launchCoconut=function(){this.world.addBody(this.coconutFloorBody),this.coconutProjectileRef.damping=.1,this.coconutProjectileRef.angularDamping=.1,this.fireProjectile(this.coconutProjectileRef,!1)},e.prototype.launchPowerUpCoconut=function(){1!=this.powerUpCoconutFlying&&(this.world.addBody(this.coconutFloorBody),this.powerUpCoconutFlying=!0,this.coconutProjectileRef.damping=.1,this.coconutProjectileRef.angularDamping=.1,this.powerUpAngleAdjustCount=0,this.powerUpAngleAdjust=0,this.fireProjectile(this.coconutProjectileRef,!0))},e.prototype.attractCoconutMagnet=function(e,t){var i,s=this.getAngle(t.position[0],Game.stageHeight-t.position[1],e.position[0],Game.stageHeight-e.position[1]),o=(200-this.getDistance(t.position[0],Game.stageHeight-t.position[1],e.position[0],Game.stageHeight-e.position[1]))*(i=e.position[1]>t.position[1]?40:80);o<0&&(o=0);var a=Math.cos(s)*o,r=Math.sin(s)*o,n=[a,r];(a||r)&&e.applyForce(n)},e.prototype.endPowerUpCoconutFlying=function(){this.powerUpCoconutFlying=!1},e.prototype.fireDirtParticleHand=function(e,t){var i=-Game.getRandom(1-Math.PI,-1),s=Math.cos(i),o=Math.sin(i),a=t+10*s,r=Game.stageHeight-550+10*o;e.position[0]=a,e.position[1]=r,this.resetBody(e);var n=Game.getRandom(400,600);e.applyImpulse([s*n,o*n]),this.world.addBody(e)},e.prototype.fireDirtParticleTree=function(e,t){var i=-Game.getRandom(1-Math.PI,-1),s=Math.cos(i),o=Math.sin(i),a=t+40*s,r=Game.stageHeight-550+40*o;e.position[0]=a,e.position[1]=r,this.resetBody(e);var n=Game.getRandom(600,800);e.applyImpulse([s*n,o*n]),this.world.addBody(e)},e.prototype.fireCoconutChunk=function(e,t){var i=2e3*Math.abs(Math.atan(e.velocity[1]/e.velocity[0])),s=Math.atan(e.velocity[1]/e.velocity[0]);s-=Math.PI,s+=Game.getRandom(-2,2);var o=Math.cos(s),a=Math.sin(s),r=e.position[0]+40*o,n=e.position[1]+40*a;t.position[0]=r,t.position[1]=n,this.resetBody(t),t.angularVelocity=Game.getRandom(-10,10),t.angle=Game.getRandom(2*-Math.PI,2*Math.PI);var h=Game.getRandom(i/2,i);t.applyImpulse([o*h,a*h]),this.world.addBody(t)},e.prototype.fireDirtParticlesLanding=function(e,t,i){var s=-i+Game.getRandom(-.1,.1),o=Math.cos(s),a=Math.sin(s),r=t[0]+30+5*o,n=t[1]+5*a;e.position[0]=r,e.position[1]=n,this.resetBody(e);var h=Game.getRandom(400,700);e.applyImpulse([o*h,a*h]),this.world.addBody(e)},e.prototype.fireDirtParticleTreeSpawning=function(e,t){var i=-Game.getRandom(1-Math.PI,-1),s=Math.cos(i),o=Math.sin(i),a=t+5*s,r=Game.stageHeight-550+5*o;e.position[0]=a,e.position[1]=r,this.resetBody(e);var n=Game.getRandom(200,400);e.applyImpulse([s*n,o*n]),this.world.addBody(e)},e.prototype.getLargeTargetElements=function(){var e=new p2.Body({mass:1,position:[0,-1e3]}),t=new p2.Box({width:64,height:270});t.collisionGroup=this.collisionGroupTarget,t.collisionMask=this.collisionGroupCoconut,e.addShape(t,[0,40]);var i=new p2.Body({mass:20,position:[0,-1e3]});i.gravityScale=-1;var s=new p2.RevoluteConstraint(i,e,{collideConnected:!1,localPivotA:[0,40],localPivotB:[0,-135]});s.enableMotor(),s.setMotorSpeed(0),e.angularDamping=.9,e.damping=.9,i.angularDamping=.9,i.damping=.9;var o=new p2.Body({mass:0,position:[0,-1e3]}),a=new p2.LinearSpring(o,i,{restLength:200,stiffness:1e3,damping:50,localAnchorA:[0,0],localAnchorB:[0,0]});return this.world.addBody(o),this.world.addBody(e),this.world.addBody(i),this.world.addSpring(a),this.world.addConstraint(s),{body:e,shape:t,targetPinBody:i,targetHinge:s,armPinBody:o,armSpring:a}},e.prototype.getMediumTargetElements=function(){var e=new p2.Body({mass:1,position:[0,-1e3]}),t=new p2.Box({width:64,height:190});t.collisionGroup=this.collisionGroupTarget,t.collisionMask=this.collisionGroupCoconut,e.addShape(t,[0,40]);var i=new p2.Body({mass:20,position:[0,-1e3]});i.gravityScale=-1;var s=new p2.RevoluteConstraint(i,e,{collideConnected:!1,localPivotA:[0,40],localPivotB:[0,-95]});s.enableMotor(),s.setMotorSpeed(0),e.angularDamping=.9,e.damping=.9,i.angularDamping=.9,i.damping=.9;var o=new p2.Body({mass:0,position:[0,-1e3]}),a=new p2.LinearSpring(o,i,{restLength:200,stiffness:1e3,damping:50,localAnchorA:[0,0],localAnchorB:[0,0]});return this.world.addBody(o),this.world.addBody(e),this.world.addBody(i),this.world.addSpring(a),this.world.addConstraint(s),{body:e,shape:t,targetPinBody:i,targetHinge:s,armPinBody:o,armSpring:a}},e.prototype.getSmallTargetElements=function(){var e=new p2.Body({mass:1,position:[0,-1e3]}),t=new p2.Box({width:64,height:134});t.collisionGroup=this.collisionGroupTarget,t.collisionMask=this.collisionGroupCoconut,e.addShape(t,[0,40]);var i=new p2.Body({mass:20,position:[0,-1e3]});i.gravityScale=-1;var s=new p2.RevoluteConstraint(i,e,{collideConnected:!1,localPivotA:[0,40],localPivotB:[0,-67]});s.enableMotor(),s.setMotorSpeed(0),e.angularDamping=.9,e.damping=.9,i.angularDamping=.9,i.damping=.9;var o=new p2.Body({mass:0,position:[0,-1e3]}),a=new p2.LinearSpring(o,i,{restLength:200,stiffness:1e3,damping:50,localAnchorA:[0,0],localAnchorB:[0,0]});return this.world.addBody(o),this.world.addBody(e),this.world.addBody(i),this.world.addSpring(a),this.world.addConstraint(s),{body:e,shape:t,targetPinBody:i,targetHinge:s,armPinBody:o,armSpring:a}},e.prototype.fireProjectile=function(e,t){var i=this.launchOffsetAngle+this.launcherBody.angle,s=Math.cos(i),o=Math.sin(i),a=this.launcherBody.position[0]+this.launchRadius*s,r=this.launcherBody.position[1]+this.launchRadius*o;e.position[0]=a,e.position[1]=r,this.powerUpLaunchAngle=this.launcherBody.angle,this.resetBody(e),e.angle=0;var n,h=Math.cos(this.launcherBody.angle),l=Math.sin(this.launcherBody.angle);0==t?n=this.currentFirePower:1==t&&(n=300),e.applyImpulse([h*n,l*n]),this.world.addBody(e)},e.prototype.resizeElements=function(e,t){this.canvasHeight=t,this.canvasWidth=e,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},e.prototype.activatePowerUpEffect=function(){this.powerUpOn=!0},e.prototype.deactivatePowerUpEffect=function(){this.powerUpOn=!1},e.prototype.changeGunAngle=function(e){var t=this.launcherBody.angle;this.launcherPinConstraint.setMotorSpeed(this.launcherRotateForce*(t-e))},e.prototype.setPhysicsPower=function(e){var t=this.maxFirePower-this.minFirePower;this.currentFirePower=this.minFirePower+t/100*e},e.prototype.stepPhysics=function(){0!=this.physicsEnabled&&this.world&&(1==this.scene.getPowerUpActive()&&this.snakePowerUpCoconut(),Math.round(100-100*this.launcherBody.angle)==this.storedLauncherAngle?this.resetBeamAim():(this.killBeamAim(),this.storedLauncherAngle=Math.round(100-100*this.launcherBody.angle)),this.world.step(1/30))},e.prototype.snakePowerUpCoconut=function(){if(0!=this.powerUpCoconutFlying){this.powerUpAngleAdjustCount+=.2,this.powerUpAngleAdjust=Math.cos(this.powerUpAngleAdjustCount);var e=Math.cos(this.powerUpLaunchAngle)+this.powerUpAngleAdjust,t=Math.sin(this.powerUpLaunchAngle)+this.powerUpAngleAdjust;this.coconutProjectileRef.applyForce([1e3*e,1e3*t])}},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angle=0,e.velocity=[0,0],e.setZeroForce()},e.prototype.primeBeam=function(e){this.aimBeamPrimed=e},e.prototype.resetBeamAim=function(){0!=this.aimBeamPrimed&&this.scene.resetBeam()},e.prototype.killBeamAim=function(){0!=this.aimBeamPrimed&&this.scene.killBeam()},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.world.clear(),this.world=null},e}(),CocoNuttyRoundManager=function(){function e(e,t,i,s,o){this.scene=e,this.timerStarted=!1,this.characterPos=o,this.targetPopped=!1,this.targetPopForce=10,this.treeCanopySlowFactor=5,this.coconutInTrees=!1,this.leafFallCounter=0,this.leafFallCountLimit=4,this.ropeLength=400,this.leafSoundPlaying=!1,this.soundStop=0,this.ticketThisRound=!1,this.ticketRoundCounter=0,this.ticketRoundLimit=2,this.timerIconNum=20,this.updateTimerCount=0,this.updateTimerLimit=20,this.timerTotal=2e3,this.timerIncreaseHitTarget=800,this.currentTime=this.timerTotal,this.targetHitThisRound=!1,this.mainContainerRef=t,this.popTreeLayerRef=i,this.timerContainer=s,this.difficultyIncreaseRoundCounter=0,this.difficultyIncreaseRoundLimit=2,this.screenLengths=4,this.coconutActualLandingPos=0,this.currentDifficultyIndex=0,this.landingVertPos=540,this.pointingHandVertPos=-350,this.lowerSpawnRangeLimit=Game.stageWidth+200,this.maximumSpawnRangeLimit=this.screenLengths*Game.stageWidth-1e3;var a=this.scene.getLargeTargetElements(),r=Game.displayStore.getSprite("coco-nutty/target-large"),n=Game.displayStore.getSprite("coco-nutty/target-hand-arm-pole"),h=Game.displayStore.getContainer("coco-nutty/target-large-holder");h.addChild(n),h.addChild(r),n.position.y=140,h.position.y=-1e3,r.position.x=-15,n.position.x=-32,this.targetLarge={active:!1,targetSprite:r,targetHolder:h,targetPinBody:a.targetPinBody,targetHinge:a.targetHinge,targetShape:a.shape,targetBody:a.body,targetAngle:0,armPinBody:a.armPinBody,armSpring:a.armSpring,targetHandPole:n};var l=this.scene.getMediumTargetElements(),p=Game.displayStore.getSprite("coco-nutty/target-medium"),c=Game.displayStore.getSprite("coco-nutty/target-hand-arm-pole"),d=Game.displayStore.getContainer("coco-nutty/target-medium-holder");d.addChild(c),d.addChild(p),c.position.y=100,d.position.y=-1e3,p.position.x=-22,c.position.x=-32,this.targetMedium={active:!1,targetSprite:p,targetHolder:d,targetPinBody:l.targetPinBody,targetHinge:l.targetHinge,targetShape:l.shape,targetBody:l.body,targetAngle:0,armPinBody:l.armPinBody,armSpring:l.armSpring,targetHandPole:c};var u=this.scene.getSmallTargetElements(),g=Game.displayStore.getSprite("coco-nutty/target-small"),m=Game.displayStore.getSprite("coco-nutty/target-hand-arm-pole"),y=Game.displayStore.getContainer("coco-nutty/target-small-holder");y.addChild(m),y.addChild(g),m.position.y=80,y.position.y=-1e3,g.position.x=-22,m.position.x=-32,this.targetSmall={active:!1,targetSprite:g,targetHolder:y,targetPinBody:u.targetPinBody,targetHinge:u.targetHinge,targetShape:u.shape,targetBody:u.body,targetAngle:0,armPinBody:u.armPinBody,armSpring:u.armSpring,targetHandPole:m},this.droppingLeaves=new Array;for(A=0;A<10;A++){var f=Game.displayStore.getSprite("coco-nutty/falling-leaf-"+Game.getRandom(0,2,!0));f.position.y=-40;var b=this.scene.getLeafPhysicsElement();f.scale.x=b.scale,f.scale.y=b.scale,this.droppingLeaves.push({sprite:f,active:!1,body:b.body,shape:b.shape,scale:b.scale}),this.popTreeLayerRef.addChild(f)}var w=(this.maximumSpawnRangeLimit-500-(this.characterPos+500))/5;this.droppingMagnets=new Array;for(A=0;A<5;A++){var v=this.scene.getDroppingMagnet(),k=Game.displayStore.getSprite("coco-nutty/dropping-magnet"),S=Game.displayStore.getSprite("coco-nutty/dropping-magnet-string"),x=Game.displayStore.getContainer("coco-nutty/magnet-particle-container");x.rotation=Game.getRandom(2*-Math.PI,2*Math.PI),this.droppingMagnets.push({magnetSprite:k,magnetSpriteString:S,active:!1,magnetBody:v.body,magnetShape:v.shape,pinBody:v.pinBody,rope:v.rope,particleContainer:x,particles:[],startZone:this.characterPos+500+A*w,endZone:this.characterPos+500+A*w+w,activeCutoff:0,activeCutoffRadius:50,attract:!1}),this.popTreeLayerRef.addChild(x),this.popTreeLayerRef.addChild(S),this.popTreeLayerRef.addChild(k)}for(A=0;A<this.droppingMagnets.length;A++)this.droppingMagnets[A].magnetSpriteString.visible=!1,this.droppingMagnets[A].magnetSprite.visible=!1,this.droppingMagnets[A].particleContainer.visible=!1;for(A=0;A<this.droppingMagnets.length;A++)for(var P=0;P<10;P++){var B=Game.displayStore.getSprite("coco-nutty/magnet-particle");this.droppingMagnets[A].particles.push({spriteParticle:B}),this.droppingMagnets[A].particleContainer.addChild(B),B.tint=16777215,B.alpha=.8,B.position.x=0,B.y=0,B.scale.x=0,B.scale.y=0}this.magnetParticleData=new Array;for(A=0;A<10;A++){var T=36*A,G=0+200*Math.cos(T),C=0+200*Math.sin(T);this.magnetParticleData.push({particleSpeed:Game.getRandom(20,30,!0),startX:G,startY:C,scaleX:0,scaleY:0,posX:G,posY:C})}this.timerContainer.position.y=40,this.timerIcons=new Array;for(var A=0;A<this.timerIconNum;A++){var M=Game.displayStore.getSprite("coco-nutty/timer-icon-bg"),I=Game.displayStore.getSprite("coco-nutty/timer-icon-dot");this.timerContainer.addChild(M),this.timerContainer.addChild(I),this.timerIcons.push({dot:I,bg:M});var L=34+25*A;I.position.x=L,M.position.x=L,I.visible=!0}this.timerIconGraphic=Game.displayStore.getSprite("coco-nutty/timer-icon"),this.timerIconGraphic.position.x=0,this.timerIconGraphic.position.y=0,this.timerContainer.addChild(this.timerIconGraphic),this.timerContainer.position.x=(Game.stageWidth-this.timerContainer.width)/2,this.popTreeLayerRef.addChild(this.targetLarge.targetHolder),this.popTreeLayerRef.addChild(this.targetMedium.targetHolder),this.popTreeLayerRef.addChild(this.targetSmall.targetHolder),this.ticket=Game.ticketPool.getTicket(),this.ticket.container.position.y=-1e3,this.currentLandingZonePos=0,this.difficultyParams=new Array,this.difficultyParams.push({popZoneRangeRatio:20,angleRange:[0,-.1]}),this.difficultyParams.push({popZoneRangeRatio:40,angleRange:[0,-.5]}),this.difficultyParams.push({popZoneRangeRatio:60,angleRange:[0,-.5]}),this.difficultyParams.push({popZoneRangeRatio:80,angleRange:[0,-.75]}),this.difficultyParams.push({popZoneRangeRatio:100,angleRange:[0,-.75]})}return e.prototype.newTarget=function(){this.targetPopped=!1,this.targetHitThisRound=!1;var e=this.difficultyParams[this.currentDifficultyIndex].popZoneRangeRatio,t=this.maximumSpawnRangeLimit-this.lowerSpawnRangeLimit,i=e/100*t;this.currentLandingZonePos=Game.getRandom(this.lowerSpawnRangeLimit,this.lowerSpawnRangeLimit+i);var s=(this.currentLandingZonePos-this.lowerSpawnRangeLimit)/t;s>0&&s<=.33?this.currentTargetType=0:s>.33&&s<=.66?this.currentTargetType=1:s>.66&&s<=1&&(this.currentTargetType=2),this.scene.panToTarget(this.currentLandingZonePos),this.targetLarge.targetAngle=-Math.PI/2,this.targetMedium.targetAngle=-Math.PI/2,this.targetSmall.targetAngle=-Math.PI/2,++this.ticketRoundCounter>=this.ticketRoundLimit&&(this.ticketRoundCounter=0,this.ticketThisRound=!0,this.plantTicket()),this.dropMagnets()},e.prototype.midRoundDropMagnets=function(){this.dropMagnets()},e.prototype.dropMagnets=function(){var e;if(1!=this.scene.getPowerUpActive()){e=Game.getRandom(0,1)<=.5;for(var t=0;t<this.droppingMagnets.length;t++)if(this.currentLandingZonePos>this.droppingMagnets[t].startZone+80){var i=Game.getRandom(this.droppingMagnets[t].startZone+80,this.droppingMagnets[t].endZone-80);i<this.currentLandingZonePos-200&&(this.dropMagnet(t,i,e),e=1!=e)}}},e.prototype.dropMagnet=function(e,t,i){var s=i;this.droppingMagnets[e].activeCutoff=0,this.droppingMagnets[e].attract=!0,this.droppingMagnets[e].magnetSpriteString.visible=!0,this.droppingMagnets[e].magnetSprite.visible=!0,this.droppingMagnets[e].particleContainer.visible=!0;this.droppingMagnets[e].active=!0,this.droppingMagnets[e].magnetBody.position[0]=t,this.droppingMagnets[e].pinBody.position[0]=t,this.droppingMagnets[e].magnetBody.position[1]=Game.stageHeight+10,this.droppingMagnets[e].pinBody.position[1]=Game.stageHeight+10+this.ropeLength,this.droppingMagnets[e].magnetBody.invMass=1/this.droppingMagnets[e].magnetBody.mass,this.droppingMagnets[e].magnetBody.invInertia=1/this.droppingMagnets[e].magnetBody.inertia,this.droppingMagnets[e].magnetBody.angle=0,this.droppingMagnets[e].magnetBody.velocity=[0,0],this.droppingMagnets[e].magnetBody.setZeroForce(),this.droppingMagnets[e].rope.distance=this.ropeLength;var o,a=this.ropeLength-200;1==s?o=Game.getRandom(Game.stageHeight+a/2,Game.stageHeight+a):0==s&&(o=Game.getRandom(Game.stageHeight,Game.stageHeight+a/2));var r=Game.getRandom(-2e3,2e3);this.droppingMagnets[e].magnetBody.applyImpulse([r,0]),TweenMax.to(this.droppingMagnets[e].pinBody.position,Game.getRandom(.5,1),{1:o,delay:Game.getRandom(0,.5),ease:Back.easeOut}),this.scene.addMagnetPhysicsWorld(this.droppingMagnets[e].magnetBody,this.droppingMagnets[e].pinBody,this.droppingMagnets[e].rope)},e.prototype.plantTicket=function(){this.ticket=Game.ticketPool.getTicket(),this.ticket.container.position.y=Game.stageHeight,TweenMax.to(this.ticket.container.position,1,{y:450,ease:Back.easeOut}),this.popTreeLayerRef.addChild(this.ticket.container),this.ticket.container.position.x=this.currentLandingZonePos},e.prototype.animatePopTarget=function(){for(var e=!1,t=0,i=0;i<this.droppingMagnets.length;i++)1==this.droppingMagnets[i].active&&t++;this.currentLandingZonePos>2500&&t>=this.droppingMagnets.length&&(e=!0),Game.playSound("coco-nutty/spring.mp3",.2);var s=Game.stageHeight-700,o=Game.getRandom(this.difficultyParams[this.currentDifficultyIndex].angleRange[0],this.difficultyParams[this.currentDifficultyIndex].angleRange[1]),a=Game.getRandom(200,300);1==e&&(a=200);var r;0==this.currentTargetType?r=this.targetSmall:1==this.currentTargetType?r=this.targetMedium:2==this.currentTargetType&&(r=this.targetLarge),r.armSpring.restLength=a,r.armPinBody.position[0]=this.currentLandingZonePos,r.armPinBody.position[1]=s,r.targetPinBody.position[0]=r.armPinBody.position[0],r.targetPinBody.position[1]=s+20,r.targetBody.position[0]=r.targetPinBody.position[0],r.targetBody.position[1]=s+20,this.fireDirtParticlesHand(),1==this.ticketThisRound&&this.ticket.collect(!0),r.active=!0,r.targetAngle=o,this.scene.addTargetPhysics(r.targetBody)},e.prototype.fireDirtParticlesHand=function(){this.scene.fireDirtParticlesHandPop(this.currentLandingZonePos)},e.prototype.checkTargetPopped=function(){1!=this.targetPopped&&this.animatePopTarget()},e.prototype.resetLeaf=function(e){for(var t=0;t<this.droppingLeaves.length;t++)if(this.droppingLeaves[t].body==e)return this.droppingLeaves[t].active=!1,void(this.droppingLeaves[t].sprite.position.y=-1e3)},e.prototype.resetMagnetsAttract=function(){for(var e=0;e<this.droppingMagnets.length;e++){if(0==this.droppingMagnets[e].active)return;this.droppingMagnets[e].attract=!0}},e.prototype.retractMagnets=function(){this.retractTargetsTimeline=this.scene.killTween(this.retractTargetsTimeline),this.retractTargetsTimeline=new TimelineMax;for(var e=0;e<this.droppingMagnets.length;e++)this.retractTargetsTimeline.add([TweenMax.to(this.droppingMagnets[e].pinBody.position,.5,{1:Game.stageHeight+1e3,ease:Sine.easeOut})],0)},e.prototype.winRound=function(){this.adjustDifficulty(),this.targetLarge.targetAngle=-Math.PI/2,this.targetMedium.targetAngle=-Math.PI/2,this.targetSmall.targetAngle=-Math.PI/2,this.retractTargetsTimeline=this.scene.killTween(this.retractTargetsTimeline),this.retractTargetsTimeline=new TimelineMax,this.retractTargetsTimeline.add([TweenMax.to(this.targetLarge.armPinBody.position,.5,{1:Game.stageHeight-1e3,ease:Sine.easeOut}),TweenMax.to(this.targetMedium.armPinBody.position,.5,{1:Game.stageHeight-1e3,ease:Sine.easeOut}),TweenMax.to(this.targetSmall.armPinBody.position,.5,{1:Game.stageHeight-1e3,ease:Sine.easeOut})],0),Game.playSound("coco-nutty/spring.mp3",.2),Game.playSound("coco-nutty/swish-long-1.mp3",.2),Game.playSound("coco-nutty/bush-2.mp3",.2),Game.stopSound("coco-nutty/thruster.mp3"),Game.stopSound("coco-nutty/air-rush.mp3");for(var e=0;e<this.droppingMagnets.length;e++)this.retractTargetsTimeline.add([TweenMax.to(this.droppingMagnets[e].pinBody.position,.5,{1:Game.stageHeight+1e3,ease:Sine.easeOut})],0);this.retractTargetsTimeline.call(this.startNextRound,null,this,.5)},e.prototype.startNextRound=function(){for(var e=0;e<this.droppingMagnets.length;e++)1==this.droppingMagnets[e].active&&(this.scene.removeMagnetPhysicsWorld(this.droppingMagnets[e].magnetBody,this.droppingMagnets[e].pinBody,this.droppingMagnets[e].rope),this.droppingMagnets[e].magnetSprite.position.y=-1e3,this.droppingMagnets[e].magnetSpriteString.position.y=-1e3,this.droppingMagnets[e].magnetSpriteString.height=1,this.droppingMagnets[e].active=!1);this.ticket.container.position.y=-1e3,this.ticket.resetState(),this.ticketThisRound=!1,this.nextRoundDelay=this.scene.killTween(this.nextRoundDelay),this.newTarget()},e.prototype.adjustDifficulty=function(){if(++this.difficultyIncreaseRoundCounter>=this.difficultyIncreaseRoundLimit){if(this.difficultyIncreaseRoundCounter=0,this.currentDifficultyIndex>=this.difficultyParams.length-1)return;this.currentDifficultyIndex++}},e.prototype.tick=function(e){if(this.moveTarget(this.targetLarge),this.moveTarget(this.targetMedium),this.moveTarget(this.targetSmall),this.moveMagnets(e),this.slowCoconutInTreeCanopy(e),this.scene.getPowerUpActive(),0!=this.timerStarted){--this.currentTime<0&&(this.currentTime=0,this.scene.timerOutGameOver()),++this.updateTimerCount>=this.updateTimerLimit&&(this.updateTimerCount=0,this.setTimerState());for(t=0;t<this.droppingMagnets.length;t++)this.droppingMagnets[t].particleContainer.position.x=this.droppingMagnets[t].magnetSprite.position.x,this.droppingMagnets[t].particleContainer.position.y=this.droppingMagnets[t].magnetSprite.position.y,this.droppingMagnets[t].particleContainer.rotation+=.03;for(t=0;t<this.droppingLeaves.length;t++)0!=this.droppingLeaves[t].active&&(this.droppingLeaves[t].sprite.position.x=this.droppingLeaves[t].body.position[0],this.droppingLeaves[t].sprite.position.y=Game.stageHeight-this.droppingLeaves[t].body.position[1],this.droppingLeaves[t].sprite.rotation=-this.droppingLeaves[t].body.angle);for(t=0;t<this.magnetParticleData.length;t++)this.magnetParticleData[t].scaleX+=(1.8-this.magnetParticleData[t].scaleX)/this.magnetParticleData[t].particleSpeed,this.magnetParticleData[t].scaleY=this.magnetParticleData[t].scaleX,this.magnetParticleData[t].posX+=(1.8-this.magnetParticleData[t].posX)/this.magnetParticleData[t].particleSpeed,this.magnetParticleData[t].posY+=(1.8-this.magnetParticleData[t].posY)/this.magnetParticleData[t].particleSpeed,this.magnetParticleData[t].scaleX>1.5&&(this.magnetParticleData[t].posX=this.magnetParticleData[t].startX,this.magnetParticleData[t].posY=this.magnetParticleData[t].startY,this.magnetParticleData[t].scaleX=0,this.magnetParticleData[t].scaleY=0);for(var t=0;t<this.droppingMagnets.length;t++)if(0!=this.droppingMagnets[t].active)for(var i=0;i<this.droppingMagnets[t].particles.length;i++){var s=this.droppingMagnets[t].particles[i].spriteParticle;s.scale.x=this.magnetParticleData[i].scaleX,s.scale.y=this.magnetParticleData[i].scaleY,s.position.x=this.magnetParticleData[i].posX,s.position.y=this.magnetParticleData[i].posY}1==this.coconutInTrees&&(0==this.leafSoundPlaying&&(Game.playSound("coco-nutty/leaves.mp3",.3),Game.stopSound("coco-nutty/thruster.mp3"),Game.stopSound("coco-nutty/air-rush.mp3")),this.leafSoundPlaying=!0),0!=this.coconutInTrees?(0==this.leafSoundPlaying&&++this.soundStop>=60&&(this.soundStop=0,Game.stopSound("coco-nutty/leaves.mp3")),++this.leafFallCounter>=this.leafFallCountLimit&&(this.leafFallCounter=0,this.dropLeaf(e))):1==this.leafSoundPlaying&&(this.leafSoundPlaying=!1,Game.fadeSound("coco-nutty/leaves.mp3",1,0))}},e.prototype.dropLeaf=function(e){for(var t=0;t<this.droppingLeaves.length;t++)if(1!=this.droppingLeaves[t].active){this.droppingLeaves[t].active=!0,this.droppingLeaves[t].body.invMass=1/this.droppingLeaves[t].body.mass,this.droppingLeaves[t].body.invInertia=1/this.droppingLeaves[t].body.inertia,this.droppingLeaves[t].body.angle=0,this.droppingLeaves[t].body.velocity=[0,0],this.droppingLeaves[t].body.setZeroForce(),this.droppingLeaves[t].body.position[0]=e.position[0]+Game.getRandom(-50,50),this.droppingLeaves[t].body.position[1]=Game.stageHeight-40,this.droppingLeaves[t].body.angularVelocity=Game.getRandom(-40,40);var i=Game.getRandom(e.velocity[0]/10,e.velocity[0]/2);this.droppingLeaves[t].body.applyImpulse([i,0]),this.scene.addLeafPhysicsWorld(this.droppingLeaves[t].body);break}},e.prototype.slowCoconutInTreeCanopy=function(e){if(e.position[1]<Game.stageHeight-50)this.setCoconutInTrees(!1);else{this.setCoconutInTrees(!0);var t=-1*e.velocity[0]*this.treeCanopySlowFactor,i=-1*e.velocity[1]*this.treeCanopySlowFactor;1==this.scene.getPowerUpActive()&&this.scene.poweredUpStartNewRound(),e.applyForce([t,i])}},e.prototype.setCoconutInTrees=function(e){0==e&&(this.leafFallCounter=0),e!=this.coconutInTrees&&(this.coconutInTrees=e)},e.prototype.activateTimer=function(){this.timerStarted=!0},e.prototype.secondChanceUse=function(){this.currentTime=this.timerTotal/2},e.prototype.setTimerState=function(){for(var e=this.currentTime/this.timerTotal,t=Math.round(this.timerIconNum*e),i=0;i<this.timerIcons.length;i++)this.timerIcons[i].dot.visible=i<t},e.prototype.moveTarget=function(e){e.targetHolder.position.x=e.targetBody.position[0],e.targetHolder.position.y=Game.stageHeight-e.targetBody.position[1],e.targetHolder.rotation=-e.targetBody.angle;var t=this.getAngle(e.targetPinBody.position[0],e.targetPinBody.position[1],e.armPinBody.position[0],e.armPinBody.position[1]),i=this.getDistance(e.targetPinBody.position[0],e.targetPinBody.position[1],e.armPinBody.position[0],e.armPinBody.position[1]);e.targetHandPole.rotation=t+Math.PI/2+e.targetBody.angle,e.targetHandPole.height=i,e.targetHinge.setMotorSpeed(this.targetPopForce*(e.targetBody.angle-e.targetAngle))},e.prototype.moveMagnets=function(e){for(var t=0;t<this.droppingMagnets.length;t++)0!=this.droppingMagnets[t].active&&(this.getDistance(this.droppingMagnets[t].magnetBody.position[0],this.droppingMagnets[t].magnetBody.position[1],e.position[0],e.position[1])<this.droppingMagnets[t].activeCutoffRadius&&++this.droppingMagnets[t].activeCutoff>=20&&(this.droppingMagnets[t].attract=!1),this.droppingMagnets[t].magnetSprite.position.x=this.droppingMagnets[t].magnetBody.position[0],this.droppingMagnets[t].magnetSprite.position.y=Game.stageHeight-this.droppingMagnets[t].magnetBody.position[1],this.droppingMagnets[t].magnetSprite.rotation=-this.droppingMagnets[t].magnetBody.angle,this.droppingMagnets[t].magnetSpriteString.position.x=this.droppingMagnets[t].pinBody.position[0],this.droppingMagnets[t].magnetSpriteString.position.y=Game.stageHeight-this.droppingMagnets[t].pinBody.position[1],this.droppingMagnets[t].magnetSpriteString.rotation=-this.getAngle(this.droppingMagnets[t].pinBody.position[0],Game.stageHeight-this.droppingMagnets[t].pinBody.position[1],this.droppingMagnets[t].magnetBody.position[0],Game.stageHeight-this.droppingMagnets[t].magnetBody.position[1])+Math.PI/2,this.droppingMagnets[t].magnetSpriteString.height=this.getDistance(this.droppingMagnets[t].pinBody.position[0],Game.stageHeight-this.droppingMagnets[t].pinBody.position[1],this.droppingMagnets[t].magnetBody.position[0],Game.stageHeight-this.droppingMagnets[t].magnetBody.position[1])-10,this.droppingMagnets[t].magnetSpriteString.height<0&&(this.droppingMagnets[t].magnetSpriteString.height=0),0!=this.droppingMagnets[t].attract&&this.scene.attractCoconutMagnet(e,this.droppingMagnets[t].magnetBody))},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.checkTargetHit=function(e,t){if(1!=this.targetHitThisRound)switch(e){case this.targetLarge.targetBody:this.targetHitThisRound=!0,this.targetLarge.active=!1,this.addTime(),this.scene.explodeCoconut(t,this.targetLarge.targetBody,this.targetLarge.targetPinBody);break;case this.targetMedium.targetBody:this.targetHitThisRound=!0,this.targetMedium.active=!1,this.addTime(),this.scene.explodeCoconut(t,this.targetMedium.targetBody,this.targetMedium.targetPinBody);break;case this.targetSmall.targetBody:this.targetHitThisRound=!0,this.targetSmall.active=!1,this.addTime(),this.scene.explodeCoconut(t,this.targetSmall.targetBody,this.targetSmall.targetPinBody)}},e.prototype.addTime=function(){this.currentTime+=this.timerIncreaseHitTarget,this.currentTime>=this.timerTotal&&(this.currentTime=this.timerTotal)},e.prototype.checkHitTarget=function(){return this.targetHitThisRound},e.prototype.pause=function(){this.scene.pauseResumeTween(this.handIdleTimeline,"pause"),this.scene.pauseResumeTween(this.wonRoundTimeline,"pause"),this.scene.pauseResumeTween(this.nextRoundDelay,"pause"),this.scene.pauseResumeTween(this.retractTargetsTimeline,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.handIdleTimeline,"resume"),this.scene.pauseResumeTween(this.wonRoundTimeline,"resume"),this.scene.pauseResumeTween(this.nextRoundDelay,"resume"),this.scene.pauseResumeTween(this.retractTargetsTimeline,"resume")},e.prototype.destroy=function(){this.handIdleTimeline=this.scene.killTween(this.handIdleTimeline),this.wonRoundTimeline=this.scene.killTween(this.wonRoundTimeline),this.nextRoundDelay=this.scene.killTween(this.nextRoundDelay),this.retractTargetsTimeline=this.scene.killTween(this.retractTargetsTimeline);for(e=0;e<this.timerIcons.length;e++)Game.displayStore.returnPooledItem(this.timerIcons[e].bg),Game.displayStore.returnPooledItem(this.timerIcons[e].dot);Game.displayStore.returnPooledItem(this.targetLarge.targetHandPole),Game.displayStore.returnPooledItem(this.targetMedium.targetHandPole),Game.displayStore.returnPooledItem(this.targetSmall.targetHandPole);for(e=0;e<this.droppingMagnets.length;e++)Game.displayStore.returnPooledItem(this.droppingMagnets[e].magnetSprite),Game.displayStore.returnPooledItem(this.droppingMagnets[e].magnetSpriteString);for(e=0;e<this.droppingLeaves.length;e++)Game.displayStore.returnPooledItem(this.droppingLeaves[e].sprite);for(e=0;e<this.droppingMagnets.length;e++)this.droppingMagnets[e].particleContainer.removeChildren();for(e=0;e<this.droppingMagnets.length;e++)Game.displayStore.returnPooledItem(this.droppingMagnets[e].particleContainer);for(var e=0;e<this.droppingMagnets.length;e++)for(var t=0;t<this.droppingMagnets[e].particles.length;t++)Game.displayStore.returnPooledItem(this.droppingMagnets[e].particles[t].spriteParticle);Game.ticketPool.returnTicket(this.ticket)},e}(),LaserCavePhysicsManager=function(){function e(e,t){this.physicsEnabled=!0,this.resizeRatio=1,this.scene=e,this.mainContainer=t}return e.prototype.initPhysicsWorld=function(){this.world=new p2.World({gravity:[0,-1e3]}),this.world.broadphase=new p2.NaiveBroadphase(1),this.fireGunNumTimes=3,this.fireGunCounter=0,this.fireGunCounterLimit=5,this.firingGun=!1,this.firedGunCount=0,this.recoilFoce=2e3,this.laserSightPos=p2.vec2.create(),this.gameOverTriggered=!1,this.droneBodies=new Array,this.enemyMovingDistanceSwitch=40,this.maxEnemyCartPower=6e4,this.enemyOnTrack=!1,this.enemyCatchingUp=!1,this.enemyCoasting=!1,this.enemyCatchUpForce=2e3,this.aimRayRadius=2e3,this.rayStartPos=[0,0],this.rayEndPos=[0,0],this.raySightStartPos=[0,0],this.raySightEndPos=[0,0],this.laserPos=new PIXI.Point(0,0),this.enemyTargetPos=0,this.collisionGroupCartBody=Math.pow(2,0),this.collisionGroupCartGun=Math.pow(2,1),this.collisionGroupCartTurtle=Math.pow(2,2),this.collisionGroupEnemyCart=Math.pow(2,3),this.collisionGroupFloor=Math.pow(2,4),this.collisionGroupParticles=Math.pow(2,5),this.collisionGroupParticlesPlane=Math.pow(2,6),this.collisionGroupDrones=Math.pow(2,7),this.collisionGroupLaserRay=Math.pow(2,8),this.collisionGroupLaserBullets=Math.pow(2,9),this.collisionGroupLaserBulletPlane=Math.pow(2,10),this.gunRotateForce=8,this.gunRotateForceKeyboard=2.5,this.headRotateForce=5,this.headRotateForceKeyboard=1.75,this.gunRadius=100,this.wheelDist=60,this.suspensionStiffness=1e3,this.suspensionDamping=30,this.suspensionRestLength=40,this.cartPushForce=5e3,this.enemyCartPushForce=5e3,this.enemyCartPushForceRubberBanding=1e4,this.enemyCartRubberBandingDistance=500,this.world.defaultContactMaterial.restitution=.2,this.world.defaultContactMaterial.friction=.1,this.laserBulletPlane=new p2.Plane,this.laserBulletPlane.collisionGroup=this.collisionGroupLaserBulletPlane,this.laserBulletPlane.collisionMask=this.collisionGroupLaserBullets,this.laserBulletPlane.sensor=!0,this.laserBulletPlaneBody=new p2.Body({mass:0,position:[0,Game.stageHeight+100],angle:Math.PI}),this.laserBulletPlaneBody.addShape(this.laserBulletPlane),this.world.addBody(this.laserBulletPlaneBody),this.vertLaserBulletPlane=new p2.Plane,this.vertLaserBulletPlane.collisionGroup=this.collisionGroupLaserBulletPlane,this.vertLaserBulletPlane.collisionMask=this.collisionGroupLaserBullets,this.vertLaserBulletPlane.sensor=!0,this.vertLaserBulletPlaneBody=new p2.Body({mass:0,position:[Game.stageWidth+500,Game.stageHeight+100],angle:Math.PI-Math.PI/2}),this.vertLaserBulletPlaneBody.addShape(this.vertLaserBulletPlane),this.world.addBody(this.vertLaserBulletPlaneBody),this.floorPlane=new p2.Plane,this.floorPlane.collisionGroup=this.collisionGroupFloor,this.floorPlane.collisionMask=this.collisionGroupCartBody|this.collisionGroupEnemyCart,this.floorBody=new p2.Body({mass:0,position:[0,Game.stageHeight-598],angle:0}),this.floorBody.addShape(this.floorPlane),this.world.addBody(this.floorBody),this.enemyCartBody=new p2.Body({mass:15,position:[900,Game.stageHeight-450]}),this.enemyCartShape=new p2.Box({width:400,height:300}),this.enemyCartShape.collisionGroup=this.collisionGroupEnemyCart,this.enemyCartShape.collisionMask=this.collisionGroupFloor,this.enemyCartBody.addShape(this.enemyCartShape),this.enemyCartBody.damping=.9,this.particleSensorBody=new p2.Body({mass:0,position:[0,Game.stageHeight-700],angle:0}),this.particleSensor=new p2.Plane,this.particleSensor.collisionGroup=this.collisionGroupParticlesPlane,this.particleSensor.collisionMask=this.collisionGroupParticles,this.particleSensor.sensor=!0,this.particleSensorBody.addShape(this.particleSensor),this.world.addBody(this.particleSensorBody),this.cartBodyPhysics=new p2.Body({mass:15,position:[200,Game.stageHeight-500]}),this.cartShapePhysics=new p2.Box({width:238,height:104}),this.cartShapePhysics.collisionGroup=this.collisionGroupCartBody,this.cartShapePhysics.collisionMask=this.collisionGroupFloor,this.cartBodyPhysics.addShape(this.cartShapePhysics),this.cartBodyPhysics.damping=.9,this.world.addBody(this.cartBodyPhysics),this.cartBodyPhysics.angle=Game.getRandom(-.1,.1),this.cartWheelLeftBody=new p2.Body({mass:2,position:[200-this.wheelDist,Game.stageHeight-420]}),this.cartWheelLeftShape=new p2.Circle({radius:20}),this.cartWheelLeftShape.collisionGroup=this.collisionGroupCartBody,this.cartWheelLeftShape.collisionMask=this.collisionGroupFloor,this.cartWheelLeftBody.addShape(this.cartWheelLeftShape),this.world.addBody(this.cartWheelLeftBody),this.cartWheelRightBody=new p2.Body({mass:2,position:[200+this.wheelDist,Game.stageHeight-420]}),this.cartWheelRightShape=new p2.Circle({radius:20}),this.cartWheelRightShape.collisionGroup=this.collisionGroupCartBody,this.cartWheelRightShape.collisionMask=this.collisionGroupFloor,this.cartWheelRightBody.addShape(this.cartWheelRightShape),this.world.addBody(this.cartWheelRightBody),this.leftWheelConstraint=new p2.PrismaticConstraint(this.cartBodyPhysics,this.cartWheelLeftBody,{collideConnected:!1,disableRotationalLock:!0,localAnchorA:[-this.wheelDist,0],localAxisA:[0,1]}),this.world.addConstraint(this.leftWheelConstraint),this.rightWheelConstraint=new p2.PrismaticConstraint(this.cartBodyPhysics,this.cartWheelRightBody,{collideConnected:!1,disableRotationalLock:!0,localAnchorA:[this.wheelDist,0],localAxisA:[0,1]}),this.world.addConstraint(this.rightWheelConstraint),this.leftSuspensionSpring=new p2.LinearSpring(this.cartBodyPhysics,this.cartWheelLeftBody,{restLength:this.suspensionRestLength,stiffness:this.suspensionStiffness,damping:this.suspensionDamping,localAnchorA:[-this.wheelDist,-95]}),this.world.addSpring(this.leftSuspensionSpring),this.rightSuspensionSpring=new p2.LinearSpring(this.cartBodyPhysics,this.cartWheelRightBody,{restLength:this.suspensionRestLength,stiffness:this.suspensionStiffness,damping:this.suspensionDamping,localAnchorA:[this.wheelDist,-95]}),this.world.addSpring(this.rightSuspensionSpring),this.gunBreechBody=new p2.Body({mass:2,position:[250,Game.stageHeight-100]}),this.gunBreechShape=new p2.Circle({radius:24}),this.gunBreechShape.collisionGroup=this.collisionGroupCartGun,this.gunBreechBody.addShape(this.gunBreechShape),this.world.addBody(this.gunBreechBody),this.gunBreechConstraint=new p2.RevoluteConstraint(this.cartBodyPhysics,this.gunBreechBody,{localPivotA:[20,50],localPivotB:[0,0],collideConnected:!1}),this.world.addConstraint(this.gunBreechConstraint),this.gunBreechConstraint.enableMotor(),this.gunBarrelBody=new p2.Body({mass:2,position:[250,Game.stageHeight-100]}),this.gunBarrelShape=new p2.Box({width:74,height:15}),this.gunBarrelShape.collisionGroup=this.collisionGroupCartGun,this.gunBarrelBody.addShape(this.gunBarrelShape),this.world.addBody(this.gunBarrelBody),this.gunBarrelConstraint=new p2.LockConstraint(this.gunBreechBody,this.gunBarrelBody,{collideConnected:!1,localOffsetB:[50,0]}),this.world.addConstraint(this.gunBarrelConstraint),this.turtleHeadBody=new p2.Body({mass:2,position:[250,Game.stageHeight-350]}),this.turtleHeadShape=new p2.Circle({radius:28}),this.turtleHeadShape.collisionGroup=this.collisionGroupCartTurtle,this.turtleHeadBody.addShape(this.turtleHeadShape),this.world.addBody(this.turtleHeadBody),this.turtleHeadConstraint=new p2.RevoluteConstraint(this.cartBodyPhysics,this.turtleHeadBody,{collideConnected:!1,localPivotA:[-84,108],localPivotB:[0,0]}),this.world.addConstraint(this.turtleHeadConstraint),this.turtleHeadConstraint.enableMotor(),this.bandanaTail1Body=new p2.Body({mass:1.5,position:[250,Game.stageHeight-350]}),this.bandanaTail1Body.gravityScale=.1,this.bandanaTail1Shape=new p2.Box({width:70,height:10}),this.bandanaTail1Shape.collisionGroup=this.collisionGroupCartTurtle,this.bandanaTail1Body.addShape(this.bandanaTail1Shape),this.bandanaTail1Body.damping=.5,this.world.addBody(this.bandanaTail1Body),this.bandanaTail2Body=new p2.Body({mass:1,position:[250,Game.stageHeight-350]}),this.bandanaTail2Body.gravityScale=.15,this.bandanaTail2Shape=new p2.Box({width:70,height:10}),this.bandanaTail2Shape.collisionGroup=this.collisionGroupCartTurtle,this.bandanaTail2Body.addShape(this.bandanaTail2Shape),this.bandanaTail2Body.damping=.5,this.world.addBody(this.bandanaTail2Body),this.bandanaConstraint1=new p2.RevoluteConstraint(this.turtleHeadBody,this.bandanaTail1Body,{collideConnected:!1,localPivotA:[-30,8],localPivotB:[35,0]}),this.world.addConstraint(this.bandanaConstraint1),this.bandanaConstraint2=new p2.RevoluteConstraint(this.turtleHeadBody,this.bandanaTail2Body,{collideConnected:!1,localPivotA:[-30,8],localPivotB:[35,0]}),this.world.addConstraint(this.bandanaConstraint2),this.laserRayResult=new p2.RaycastResult;e=this;this.laserRay=new p2.Ray({mode:p2.Ray.ALL,collisionGroup:this.collisionGroupLaserRay,collisionMask:this.collisionGroupDrones,callback:function(t){e.rayHitCallback(e.laserRayResult,e.laserRay)}}),this.laserSightRayResult=new p2.RaycastResult,this.laserSightRay=new p2.Ray({mode:p2.Ray.CLOSEST,collisionGroup:this.collisionGroupLaserRay,collisionMask:this.collisionGroupDrones});var e=this;this.world.on("beginContact",function(t){e.checkCollision(e,t)}),this.world.on("endContact",function(e){}),this.world.on("postStep",function(e){}),this.physicsEnabled=!0,this.cartStarted=!1},e.prototype.getLaserBullet=function(){var e=new p2.Body({mass:2}),t=new p2.Box({width:74,height:20});return t.collisionGroup=this.collisionGroupLaserBullets,t.collisionMask=this.collisionGroupDrones|this.collisionGroupLaserBulletPlane,t.sensor=!0,e.damping=0,e.gravityScale=0,e.addShape(t),{body:e,shape:t}},e.prototype.triggerGameOver=function(){this.gameOverTriggered=!0},e.prototype.triggerSecondChance=function(){this.gameOverTriggered=!1},e.prototype.rayHitCallback=function(e,t){this.scene.laserHitResult(e.body)},e.prototype.checkCollision=function(e,t){t.bodyA!=e.particleSensorBody?t.bodyB!=e.particleSensorBody?t.bodyA!=e.laserBulletPlaneBody?t.bodyB!=e.laserBulletPlaneBody?t.bodyA!=e.vertLaserBulletPlaneBody?t.bodyB!=e.vertLaserBulletPlaneBody?e.checkLaserBulletImpact(e,t.bodyA,t.bodyB):e.killLaserBullet(e,t.bodyA):e.killLaserBullet(e,t.bodyB):e.killLaserBullet(e,t.bodyA):e.killLaserBullet(e,t.bodyB):e.killParticle(e,t.bodyA):e.killParticle(e,t.bodyB)},e.prototype.checkLaserBulletImpact=function(e,t,i){e.scene.checkLaserBulletHit(t,i)},e.prototype.killParticle=function(e,t){e.scene.killDroneParticle(t)},e.prototype.killLaserBullet=function(e,t){e.scene.killLaserBullet(t)},e.prototype.bumpEnemyCart=function(){var e=Game.getRandom(500,750);this.enemyCartBody.applyImpulseLocal([0,e],[Game.getRandom(-150,150),0])},e.prototype.updateEnemyCartTarget=function(e){this.enemyTargetPos=e},e.prototype.startCartsOnTrack=function(){this.enemyCartBody.position[0]=900,this.enemyCartBody.position[1]=Game.stageHeight-500,this.enemyCartBody.invMass=1/this.enemyCartBody.mass,this.enemyCartBody.invInertia=1/this.enemyCartBody.inertia,this.enemyCartBody.angle=0,this.enemyCartBody.velocity=[0,0],this.enemyCartBody.setZeroForce(),this.world.addBody(this.enemyCartBody),this.enemyOnTrack=!0,this.enemyCatchingUp=!0,this.enemyCoasting=!1,this.cartStarted=!0},e.prototype.bumpWheel=function(e,t){"front"==e?this.cartWheelRightBody.applyImpulse([0,t]):"rear"==e&&this.cartWheelLeftBody.applyImpulse([0,t])},e.prototype.getDroneChassisPhysicsObj=function(){var e=new p2.Body({mass:5}),t=new p2.Box({width:80,height:50});return t.collisionGroup=this.collisionGroupDrones,t.collisionMask=this.collisionGroupLaserRay|this.collisionGroupLaserBullets,this.droneBodies.push(e),e.damping=.9,e.gravityScale=0,e.addShape(t),{chassisBody:e,chassisShape:t}},e.prototype.addBodyToWorld=function(e){this.world.addBody(e)},e.prototype.removeBodyFromWorld=function(e){this.world.removeBody(e)},e.prototype.addSpringToWorld=function(e){this.world.addSpring(e)},e.prototype.removeSpringFromWorld=function(e){this.world.removeSpring(e)},e.prototype.removeConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.addConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.resizeElements=function(e,t){this.canvasHeight=t,this.canvasWidth=e,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},e.prototype.changeGunAngle=function(e){var t=this.gunBreechBody.angle;this.gunBreechConstraint.setMotorSpeed(this.gunRotateForce*(t-e))},e.prototype.changeHeadAngle=function(e){var t=this.turtleHeadBody.angle;this.turtleHeadConstraint.setMotorSpeed(this.headRotateForce*(t-e))},e.prototype.fireGun=function(){this.firingGun=!0,this.fireGunCounter=0,this.firedGunCount=0;var e=Math.cos(this.gunBreechBody.angle),t=Math.sin(this.gunBreechBody.angle);this.fireGunParams={xPosStart:this.gunBreechBody.position[0]+this.gunRadius*e,xPosEnd:this.gunBreechBody.position[0]+this.aimRayRadius*e,yPosStart:this.gunBreechBody.position[1]+this.gunRadius*t,yPosEnd:this.gunBreechBody.position[1]+this.aimRayRadius*t,xAngle:e,yAngle:t}},e.prototype.castLaser=function(){1==this.firedGunCount&&this.gunBreechBody.applyImpulse([-this.fireGunParams.xAngle*this.recoilFoce,-this.fireGunParams.yAngle*this.recoilFoce]),this.laserRayResult.reset(),this.rayStartPos=[this.fireGunParams.xPosStart,this.fireGunParams.yPosStart],this.rayEndPos=[this.fireGunParams.xPosEnd,this.fireGunParams.yPosEnd],p2.vec2.copy(this.laserRay.from,this.rayStartPos),p2.vec2.copy(this.laserRay.to,this.rayEndPos),this.laserRay.update(),this.world.raycast(this.laserRayResult,this.laserRay),this.scene.debuggerTraceRay(this.laserRay)},e.prototype.firePowerUpLaserBeam=function(e){var t=Game.getRandom(-.1,.1),i=Math.cos(this.gunBreechBody.angle+t),s=Math.sin(this.gunBreechBody.angle+t),o=this.gunBreechBody.position[0]+this.gunRadius*i,a=this.gunBreechBody.position[1]+this.gunRadius*s;e.position[0]=o,e.position[1]=a,e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angle=this.gunBreechBody.angle,e.velocity=[0,0],e.setZeroForce(),e.applyImpulse([2e3*i,2e3*s]),this.world.addBody(e)},e.prototype.getPhysicsParticleLarge=function(){var e=new p2.Body({mass:Game.getRandom(10,20)}),t=new p2.Box({width:10,height:10});return t.collisionGroup=this.collisionGroupParticles,t.collisionMask=this.collisionGroupParticlesPlane,e.damping=.8,e.angularDamping=.2,e.addShape(t),{body:e,shape:t}},e.prototype.getPhysicsParticleSmall=function(){var e=new p2.Body({mass:Game.getRandom(1,5)}),t=new p2.Circle({radius:4});return t.collisionGroup=this.collisionGroupParticles,t.collisionMask=this.collisionGroupParticlesPlane,e.damping=.3,e.addShape(t),{body:e,shape:t}},e.prototype.getLaserPos=function(){var e=Math.cos(this.gunBreechBody.angle),t=Math.sin(this.gunBreechBody.angle);return this.laserPos.x=this.gunBreechBody.position[0]+this.gunRadius*e,this.laserPos.y=Game.stageHeight-(this.gunBreechBody.position[1]+this.gunRadius*t),{pos:this.laserPos,angle:-this.gunBreechBody.angle}},e.prototype.stepPhysics=function(){0!=this.physicsEnabled&&this.world&&(1==this.firingGun&&++this.fireGunCounter>=this.fireGunCounterLimit&&(this.fireGunCounter=0,this.firedGunCount++,this.castLaser(),this.firedGunCount==this.fireGunNumTimes&&(this.firingGun=!1)),this.world.step(1/30),0==this.gameOverTriggered&&1==this.cartStarted&&this.cartBodyPhysics.applyForce([this.cartPushForce,0]),this.moveEnemyCart(),this.calculateLaserSight(),this.vertLaserBulletPlaneBody.position[0]=this.cartBodyPhysics.position[0]+900)},e.prototype.calculateLaserSight=function(){Game.isLowEndIPad;var e=Math.cos(this.gunBreechBody.angle),t=Math.sin(this.gunBreechBody.angle),i=this.gunBreechBody.position[0]+this.gunRadius*e,s=this.gunBreechBody.position[1]+this.gunRadius*t,o=this.gunBreechBody.position[0]+this.aimRayRadius*e,a=this.gunBreechBody.position[1]+this.aimRayRadius*t;this.laserSightRayResult.reset(),this.raySightStartPos=[i,s],this.raySightEndPos=[o,a],p2.vec2.copy(this.laserSightRay.from,this.raySightStartPos),p2.vec2.copy(this.laserSightRay.to,this.raySightEndPos),this.laserSightRay.update(),this.world.raycast(this.laserSightRayResult,this.laserSightRay),this.scene.debuggerTraceRay(this.laserSightRay),this.laserSightRayResult.getHitPoint(this.laserSightPos,this.laserSightRay),null!=this.laserSightRayResult.body?this.scene.positionLaserSight(this.laserSightPos):this.scene.killLaserSight()},e.prototype.moveEnemyCart=function(){0!=this.enemyOnTrack&&0!=this.cartStarted&&(1==this.enemyCatchingUp&&this.enemyCartCatchUp(),1==this.enemyCoasting&&this.enemyCartCoast())},e.prototype.enemyCartCoast=function(){var e;e=this.enemyCartBody.position[0]-this.cartBodyPhysics.position[0]<this.enemyCartRubberBandingDistance?this.enemyCartPushForceRubberBanding:this.enemyCartPushForce,this.enemyCartBody.applyForce([e,0])},e.prototype.enemyCartCatchUp=function(){var e=(this.enemyTargetPos-this.enemyCartBody.position[0])*this.enemyCatchUpForce/this.enemyCartBody.mass,t=[e,0];e&&(this.enemyCartBody.applyForce(t),this.enemyTargetPos-this.enemyCartBody.position[0]<this.enemyMovingDistanceSwitch&&(this.enemyCatchingUp=!1,this.enemyCoasting=!0))},e.prototype.killPhysicsWorld=function(e){},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.world.clear(),this.world=null},e}(),LaserCaveInputManager=function(){function e(e,t,i,s){this.scene=e,this.upKeyOn=!1,this.downKeyOn=!1,this.inputDownPosOrig=new PIXI.Point(0,0),this.inputDownPosMove=new PIXI.Point(0,0),this.differenceRange=175,this.storedInputDifference=0,this.currentInputDifference=0,this.minInputDifference=this.storedInputDifference-this.differenceRange,this.maxInputDifference=this.storedInputDifference+this.differenceRange,this.inputRange=this.maxInputDifference-this.minInputDifference,this.mainHolderRef=s,this.keyboardAngleDuration=.5,this.hitAreaSprite=Game.displayStore.getSprite("laser-cave/blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.gunBreechRef=t,this.turtleHeadRef=i,this.currentAngle=0,this.currentAngleHead=0,this.keyBoardModeOn=!1,this.mouseModeOn=!0,this.maxAngleDiff=1.4,this.minAngleDiff=.1,this.maxAngleDiffHead=1,this.minAngleDiffHead=.1,this.keyboardCurrentAngle=this.minAngleDiff,this.keyboardCurrentAngleHead=this.minAngleDiffHead,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite),this.mouseDown=!1}return e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mousemove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t)}),e.on("mouseupoutside",function(e){t.inputUp(t)})):(e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchmove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t)}))},e.prototype.inputDown=function(e,t){e.mouseDown=!0,e.keyBoardModeOn=!1,e.mouseModeOn=!0,e.inputDownPosOrig.x=t.x,e.inputDownPosOrig.y=t.y,e.inputDownPosMove.x=t.x,e.inputDownPosMove.y=t.y,e.currentInputDifference=e.storedInputDifference},e.prototype.inputUp=function(e){e.mouseDown=!1,e.storedInputDifference=e.currentInputDifference},e.prototype.inputMove=function(e,t){0!=e.mouseDown&&(t.x>Game.stageWidth-200||(e.inputDownPosMove.y=t.y,e.currentInputDifference=e.storedInputDifference+(e.inputDownPosOrig.y-e.inputDownPosMove.y)))},e.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},e.prototype.getInputAngle=function(){var e=this.currentAngle;return e>this.maxAngleDiff&&(e=this.maxAngleDiff),e<this.minAngleDiff&&(e=this.minAngleDiff),e},e.prototype.getKeyboardInputAngle=function(){return this.keyboardCurrentAngle},e.prototype.getInputAngleHead=function(){var e=this.currentAngleHead;return e>this.maxAngleDiffHead&&(e=this.maxAngleDiffHead),e<this.minAngleDiffHead&&(e=this.minAngleDiffHead),e},e.prototype.getKeyboardInputAngleHead=function(){return this.keyboardCurrentAngleHead},e.prototype.upKeyDown=function(){if(1!=this.upKeyOn){0==this.keyBoardModeOn&&(this.keyboardCurrentAngle=this.currentAngle,this.keyboardCurrentAngleHead=this.currentAngleHead),this.keyBoardModeOn=!0,this.upKeyOn=!0,this.mouseModeOn=!1;var e=this.maxAngleDiff-this.minAngleDiff,t=(this.maxAngleDiff-this.keyboardCurrentAngle)/e,i=this.keyboardAngleDuration*t,s=this.maxAngleDiffHead-this.minAngleDiffHead,o=(this.maxAngleDiffHead-this.keyboardCurrentAngleHead)/s;this.keyboardAngleDuration;this.keyboardAngleTween=TweenMax.to(this,i,{keyboardCurrentAngle:this.maxAngleDiff,ease:Linear.easeNone}),this.keyboardAngleTweenHead=TweenMax.to(this,i,{keyboardCurrentAngleHead:this.maxAngleDiffHead,ease:Linear.easeNone})}},e.prototype.downKeyDown=function(){if(1!=this.downKeyOn){0==this.keyBoardModeOn&&(this.keyboardCurrentAngle=this.currentAngle,this.keyboardCurrentAngleHead=this.currentAngleHead),this.keyBoardModeOn=!0,this.downKeyOn=!0,this.mouseModeOn=!1;var e=this.maxAngleDiff-this.minAngleDiff,t=(this.keyboardCurrentAngle-this.minAngleDiff)/e,i=this.keyboardAngleDuration*t,s=this.maxAngleDiffHead-this.minAngleDiffHead,o=(this.keyboardCurrentAngleHead-this.minAngleDiffHead)/s;this.keyboardAngleDuration;this.keyboardAngleTween=TweenMax.to(this,i,{keyboardCurrentAngle:this.minAngleDiff,ease:Linear.easeNone}),this.keyboardAngleTweenHead=TweenMax.to(this,i,{keyboardCurrentAngleHead:this.minAngleDiffHead,ease:Linear.easeNone})}},e.prototype.upKeyUp=function(){this.upKeyOn=!1,this.keyboardAngleTween=this.scene.killTween(this.keyboardAngleTween),this.keyboardAngleTweenHead=this.scene.killTween(this.keyboardAngleTweenHead)},e.prototype.downKeyUp=function(){this.downKeyOn=!1,this.keyboardAngleTween=this.scene.killTween(this.keyboardAngleTween),this.keyboardAngleTweenHead=this.scene.killTween(this.keyboardAngleTweenHead)},e.prototype.tick=function(){this.calculateInputEffect(),this.calcConvertedInputAngle()},e.prototype.calculateInputEffect=function(){1!=this.keyBoardModeOn&&(this.currentInputDifference<=this.minInputDifference&&(this.currentInputDifference=this.minInputDifference),this.currentInputDifference>=this.maxInputDifference&&(this.currentInputDifference=this.maxInputDifference),this.inputDownPosMove.y=this.inputDownPosOrig.y+this.currentInputDifference)},e.prototype.calcConvertedInputAngle=function(){var e=this.maxInputDifference-this.minInputDifference,t=this.inputDownPosOrig.y-e/2,i=(this.inputDownPosOrig.y,(this.inputDownPosMove.y-t)/e),s=(this.maxAngleDiff-this.minAngleDiff)*i;this.currentAngle=this.minAngleDiff+s,this.currentAngleHead=this.currentAngle/1.5},e.prototype.pause=function(){this.scene.pauseResumeTween(this.keyboardAngleTween,"pause"),this.scene.pauseResumeTween(this.keyboardAngleTweenHead,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.keyboardAngleTween,"resume"),this.scene.pauseResumeTween(this.keyboardAngleTweenHead,"resume")},e.prototype.destroy=function(){this.keyboardAngleTween=this.scene.killTween(this.keyboardAngleTween),this.keyboardAngleTweenHead=this.scene.killTween(this.keyboardAngleTweenHead),this.hitAreaSprite.removeAllListeners()},e}(),LaserCaveForegroundManager=function(){function e(e,t,i,s,o,a,r){this.scene=e,this.mainContainer=t,this.currentFGOffset=0,this.fgPos=0,this.laserActive=!1,this.laserActivePowerUp=!1,this.laserCounter=0,this.fgContainerWidth=Game.stageWidth,this.centralDivideHolderRef1=i,this.centralDivideHolderRef2=s,this.lastCartPos=0,this.currentCartPos=0,this.bumpsPerChunk=10,this.groundBlock=Game.displayStore.getSprite("laser-cave/ground-block"),this.frontWheelRef=a,this.rearWheelRef=r,this.fgHolder1=Game.displayStore.getContainer("laser-cave/foreground-holder"),this.fgHolder2=Game.displayStore.getContainer("laser-cave/foreground-holder"),this.trackRail1=Game.displayStore.getSprite("laser-cave/track-rail"),this.trackRail2=Game.displayStore.getSprite("laser-cave/track-rail"),this.trackRail1.width=this.fgContainerWidth,this.trackRail2.width=this.fgContainerWidth,this.fgHolder1.addChild(this.trackRail1),this.fgHolder2.addChild(this.trackRail2),this.rocks=new Array;for(var n=0;n<6;n++)for(var h=0;h<2;h++)this.rocks.push({sprite:Game.displayStore.getSprite("laser-cave/mine-rock-"+String(n)),active:!1,container:null});this.rocks=this.shuffleArray(this.rocks),this.rockDivide1=Game.displayStore.getSprite("laser-cave/central-divider-rock"),this.rockDivide2=Game.displayStore.getSprite("laser-cave/central-divider-rock"),this.fgCover=Game.displayStore.getSprite("laser-cave/bg-cover"),this.fgCover.blendMode=PIXI.BLEND_MODES.ADD,this.fgCover.alpha=.5,this.fgCover.visible=!1,this.fgCover.width=1.5*Game.stageWidth,this.fgCover.height=1.5*Game.stageHeight,this.fgCover.position.y=-200,this.centralDivideHolderRef1.addChild(this.rockDivide1),this.centralDivideHolderRef2.addChild(this.rockDivide2),this.railSleepers1=new Array,this.createRailSleepers(this.railSleepers1,this.fgHolder1,10),this.railSleepers2=new Array,this.createRailSleepers(this.railSleepers2,this.fgHolder2,10),this.trackRail1.position.x-=this.railSleepers1[0].width/2,this.trackRail2.position.x-=this.railSleepers1[0].width/2,this.trackRail1.position.y=Game.stageHeight,this.trackRail2.position.y=Game.stageHeight,this.groundBlock.width=2*Game.stageWidth,this.groundBlock.height=100,this.groundBlock.position.y=Game.stageHeight,this.mainContainer.addChild(this.fgHolder1),this.mainContainer.addChild(this.fgHolder2),this.mainContainer.addChild(this.groundBlock),this.mainContainer.addChild(this.fgCover),this.cartStartPos=o;var l=this.currentCartPos-this.cartStartPos;this.fgHolder1.position.x=l,this.fgHolder2.position.x=this.fgContainerWidth+this.fgHolder1.position.x,this.centralDivideHolderRef1.position.x=l,this.centralDivideHolderRef2.position.x=this.fgContainerWidth+this.centralDivideHolderRef1.position.x,this.createBumps(l),this.populateRocks(this.rocks,this.centralDivideHolderRef1),this.populateRocks(this.rocks,this.centralDivideHolderRef2)}return e.prototype.setUpTintCover=function(e){this.fgCover.tint=e,this.fgCover.visible=!1},e.prototype.foregroundTint=function(){this.laserActive=!0,this.fgCover.visible=!0},e.prototype.foregroundTintPowerUp=function(){this.laserActivePowerUp=!0},e.prototype.foregroundTintPowerUpEnd=function(){this.fgCover.visible=!1,this.laserActivePowerUp=!1},e.prototype.populateRocks=function(e,t){if(1!=Game.isLowEndIPad)for(var i=Game.getRandom(1,6,!0),s=0;s<i;s++){var o=this.getItem(e),a=Game.getRandom(0+o.sprite.width/2,this.fgContainerWidth-o.sprite.width/2);Game.getRandom(.5,1);o.sprite.position.x=a,o.sprite.position.y=-20,o.container=t,t.addChild(o.sprite)}},e.prototype.getItem=function(e){for(var t=0;t<e.length;t++)if(0==e[t].active)return e[t].active=!0,e[t]},e.prototype.emptyBackgroundContainer=function(e,t){for(var i=0;i<e.length;i++)1==e[i].active&&e[i].container==t&&(e[i].active=!1,e[i].container=null,t.removeChild(e[i].sprite))},e.prototype.copyBackgroundContainerItems=function(e,t,i){for(var s=0;s<e.length;s++)1==e[s].active&&e[s].container==t&&(t.removeChild(e[s].sprite),i.addChild(e[s].sprite),e[s].container=i)},e.prototype.createBumps=function(e){this.bumps=new Array;for(var t=0;t<this.bumpsPerChunk;t++){var i=e+t*(2*this.fgContainerWidth/this.bumpsPerChunk);this.bumps.push({pos:i,bumpedFront:!1,bumpedRear:!1,bumpForce:Game.getRandom(500,750)})}},e.prototype.createRailSleepers=function(e,t,i){for(var s=0;s<i;s++){var o=Game.displayStore.getSprite("laser-cave/rail-sleeper"),a=s*(this.fgContainerWidth/i);o.position.x=a,o.position.y=Game.stageHeight,e.push(o),t.addChild(o)}},e.prototype.tick=function(e){1==this.laserActivePowerUp&&++this.laserCounter>=4&&(this.laserCounter=0,console.log("flash foreground!!!!!!!"),1==this.fgCover.visible?this.fgCover.visible=!1:this.fgCover.visible=!0),1==this.laserActive&&++this.laserCounter>=8&&(this.laserActive=!1,this.laserCounter=0,this.fgCover.visible=!1,console.log("untint foreground")),this.currentCartPos=e,this.fgCover.position.x=this.currentCartPos-300;var t=this.currentCartPos-this.lastCartPos;this.currentFGOffset+=t,this.lastCartPos=this.currentCartPos,this.positionFGElements(),this.checkBumps(),this.groundBlock.position.x=this.centralDivideHolderRef1.position.x},e.prototype.checkBumps=function(){for(var e=0;e<this.bumps.length;e++)this.frontWheelRef.position.x>this.bumps[e].pos&&0==this.bumps[e].bumpedFront&&(this.bumps[e].bumpedFront=!0,this.scene.bumpWheel("front",this.bumps[e].bumpForce)),this.rearWheelRef.position.x>this.bumps[e].pos&&0==this.bumps[e].bumpedRear&&(this.bumps[e].bumpedRear=!0,this.scene.bumpWheel("rear",this.bumps[e].bumpForce))},e.prototype.positionFGElements=function(){var e;if(this.currentFGOffset>this.fgContainerWidth){this.emptyBackgroundContainer(this.rocks,this.centralDivideHolderRef1),this.copyBackgroundContainerItems(this.rocks,this.centralDivideHolderRef2,this.centralDivideHolderRef1),e=this.currentFGOffset-this.fgContainerWidth,this.currentFGOffset=e;var t=this.currentCartPos-this.cartStartPos-e;return this.fgHolder1.position.x=t,this.fgHolder2.position.x=this.fgHolder1.position.x+this.fgContainerWidth,this.centralDivideHolderRef1.position.x=t,this.centralDivideHolderRef2.position.x=this.centralDivideHolderRef1.position.x+this.fgContainerWidth,this.populateRocks(this.rocks,this.centralDivideHolderRef2),void this.createBumps(t)}},e.prototype.shuffleArray=function(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[i],e[i]=t;return e},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.fgHolder1),Game.displayStore.returnPooledItem(this.fgHolder2),Game.displayStore.returnPooledItem(this.trackRail1),Game.displayStore.returnPooledItem(this.trackRail2),Game.displayStore.returnPooledItem(this.rockDivide1),Game.displayStore.returnPooledItem(this.rockDivide2);for(e=0;e<this.rocks.length;e++)Game.displayStore.returnPooledItem(this.rocks[e].sprite);for(e=0;e<this.railSleepers1.length;e++)Game.displayStore.returnPooledItem(this.railSleepers1[e]);for(var e=0;e<this.railSleepers2.length;e++)Game.displayStore.returnPooledItem(this.railSleepers2[e]);Game.displayStore.returnPooledItem(this.fgCover)},e}(),LaserCaveDroneManager=function(){function e(e,t,i){this.turtleAudioPlaying=!1,this.scene=e,this.mainContainer=t,this.cartHolderRef=i,this.droneRotateEaseAmount=10,this.difficultyIndex=0,this.maxDronePower=1e3,this.maxDronePowerTakeOff=2e4,this.explosionParticleRadius=45,this.explosionSmallParticleRadius=60,this.addSmokeCounter=0,this.addSmokeLimit=Game.getRandom(2,10)/(60/Game.fps),this.currentActiveDrones=0,this.droneSpawnLimit=1,this.zapDistance=40,this.spawnDroneDistance=850,this.startDroneSpawnPos=600,this.removeBehindDistance=500,this.nextSpawnDistance=this.startDroneSpawnPos,this.difficultyParams=new Array,this.difficultyParams.push({droneSpawnNum:1,maxVertOffset:0,horizontalForceRange:[4e3,6e3],verticalForceRange:[0,0]}),this.difficultyParams.push({droneSpawnNum:2,maxVertOffset:20,horizontalForceRange:[6e3,8e3],verticalForceRange:[20,40]}),this.difficultyParams.push({droneSpawnNum:2,maxVertOffset:20,horizontalForceRange:[8e3,1e4],verticalForceRange:[20,40]}),this.difficultyParams.push({droneSpawnNum:2,maxVertOffset:40,horizontalForceRange:[8e3,1e4],verticalForceRange:[20,40]}),this.difficultyParams.push({droneSpawnNum:3,maxVertOffset:40,horizontalForceRange:[8e3,1e4],verticalForceRange:[20,40]}),this.difficultyParams.push({droneSpawnNum:3,maxVertOffset:40,horizontalForceRange:[1e4,14e3],verticalForceRange:[20,40]}),this.difficultyParams.push({droneSpawnNum:4,maxVertOffset:40,horizontalForceRange:[1e4,14e3],verticalForceRange:[20,40]})}return e.prototype.createDrones=function(){this.drones=new Array;for(var e=0;e<5;e++){var t=Game.displayStore.getContainer("laser-cave/drone-holder"),i=Game.displayStore.getSprite("laser-cave/cave-drone-body"),s=Game.displayStore.getAnimatedSprite("laser-cave/drone-pop");s.alpha=1,s.loop=!1,s.scale.x=s.scale.y=1.5,s.animationSpeed=.3,s.blendMode=PIXI.BLEND_MODES.ADD,s.position.y=-1e3;var o=Game.displayStore.getAnimatedSprite("laser-cave/drone-zap");o.loop=!0,o.animationSpeed=.3,o.blendMode=PIXI.BLEND_MODES.ADD,o.tint=16755447,o.position.y=-1500;var a=this.scene.getDroneChassisPhysicsObj();t.addChild(i),this.mainContainer.addChild(o),this.mainContainer.addChild(t),this.mainContainer.addChild(s),this.drones.push({droneHolder:t,droneChassisSprite:i,droneChassisBody:a.chassisBody,droneChassisShape:a.chassisShape,explodeAnim:s,zapAnim:o,droneFlyMode:"none",distanceAheadHover:0,droneHForce:0,droneVForce:0,droneFlyHeight:0,hoverPos:[0,0],active:!1,shot:!1,vertFlightOffset:0,vertFlightDir:1,zapping:!1,zappingTurtle:!1,sfx:"none"})}this.createExplosions(),this.createSmallExplosions(),this.createSmokeParticles()},e.prototype.createExplosions=function(){this.explosionLargeParticles=new Array,this.createLargeParticle(0,this.explosionLargeParticles),this.createLargeParticle(1,this.explosionLargeParticles),this.createLargeParticle(2,this.explosionLargeParticles),this.createLargeParticle(3,this.explosionLargeParticles),this.createLargeParticle(4,this.explosionLargeParticles),this.explosionLargeParticles=this.shuffleArray(this.explosionLargeParticles)},e.prototype.createSmallExplosions=function(){this.explosionSmallParticles=new Array;for(var e=0;e<20;e++){var t=Game.displayStore.getSprite("laser-cave/debris-small-particle"),i=this.scene.getPhysicsParticleSmall();t.position.y=-1e3,this.mainContainer.addChild(t),this.explosionSmallParticles.push({sprite:t,active:!1,particleBody:i.body,particleShape:i.shape})}},e.prototype.createSmokeParticles=function(){if(1!=Game.isLowEndIPad){this.smokeParticles=new Array;for(var e=0;e<200;e++)this.smokeParticles.push({sprite:Game.displayStore.getSprite("laser-cave/debris-small-particle-smoke"),active:!1})}},e.prototype.createLargeParticle=function(e,t){var i=Game.displayStore.getSprite("laser-cave/debris-particle-large-"+String(e));i.position.y=-1e3,i.rotation=Game.getRandom(0,2*Math.PI);var s=this.scene.getPhysicsParticleLarge();this.mainContainer.addChild(i),t.push({sprite:i,active:!1,particleBody:s.body,particleShape:s.shape})},e.prototype.shuffleArray=function(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[i],e[i]=t;return e},e.prototype.killDroneParticle=function(e){for(t=0;t<this.explosionLargeParticles.length;t++)e==this.explosionLargeParticles[t].particleBody&&(this.scene.removePhysicsBodyFromWorld(e),this.explosionLargeParticles[t].active=!1,this.explosionLargeParticles[t].sprite.position.y=-1e3);for(var t=0;t<this.explosionSmallParticles.length;t++)e==this.explosionSmallParticles[t].particleBody&&(this.scene.removePhysicsBodyFromWorld(e),this.explosionSmallParticles[t].active=!1,this.explosionSmallParticles[t].sprite.position.y=-1e3)},e.prototype.checkDroneHitLaserBullet=function(e){for(var t=0;t<this.drones.length;t++)if(this.drones[t].droneChassisBody==e)return void this.explodeDrone(t,this.drones[t].droneHolder.position)},e.prototype.triggerGameOver=function(){this.gameOverTriggered=!0},e.prototype.triggerSecondChance=function(){this.gameOverTriggered=!1,this.removeAllActiveDrones()},e.prototype.removeAllActiveDrones=function(){for(var e=0;e<this.drones.length;e++)0!=this.drones[e].active&&(this.drones[e].zappingTurtle=!0,this.drones[e].zapping=!1,this.drones[e].zapAnim.position.y=-1500,this.drones[e].zapAnim.stop(),Game.stopSound("laser-cave/zap-looping-"+e+".mp3"),this.drones[e].hoverPos[1]=Game.stageHeight+200)},e.prototype.tick=function(e){e>this.nextSpawnDistance&&(this.nextSpawnDistance+=this.spawnDroneDistance,this.spawnDrone(e,this.nextSpawnDistance));for(t=0;t<this.drones.length;t++)0!=this.drones[t].active&&(this.drones[t].droneHolder.position.x=this.drones[t].droneChassisBody.position[0],this.drones[t].droneHolder.position.y=Game.stageHeight-this.drones[t].droneChassisBody.position[1],this.drones[t].droneHolder.rotation=-this.drones[t].droneChassisBody.angle,0==this.drones[t].shot&&this.moveDrone(t,e),this.angleDrone(t),this.manageZap(t,e));if(0==Game.isLowEndIPad){for(t=0;t<this.explosionLargeParticles.length;t++)0!=this.explosionLargeParticles[t].active&&(this.explosionLargeParticles[t].sprite.position.x=this.explosionLargeParticles[t].particleBody.position[0],this.explosionLargeParticles[t].sprite.position.y=Game.stageHeight-this.explosionLargeParticles[t].particleBody.position[1],this.explosionLargeParticles[t].sprite.rotation=-this.explosionLargeParticles[t].particleBody.angle);for(t=0;t<this.explosionSmallParticles.length;t++)0!=this.explosionSmallParticles[t].active&&(this.explosionSmallParticles[t].sprite.position.x=this.explosionSmallParticles[t].particleBody.position[0],this.explosionSmallParticles[t].sprite.position.y=Game.stageHeight-this.explosionSmallParticles[t].particleBody.position[1],this.explosionSmallParticles[t].sprite.rotation=-this.explosionSmallParticles[t].particleBody.angle);for(var t=0;t<this.smokeParticles.length;t++)0!=this.smokeParticles[t].active&&(this.smokeParticles[t].sprite.scale.x-=.02,this.smokeParticles[t].sprite.scale.y=this.smokeParticles[t].sprite.scale.x,this.smokeParticles[t].sprite.scale.x<=0&&(this.smokeParticles[t].active=!1,this.mainContainer.removeChild(this.smokeParticles[t].sprite)));++this.addSmokeCounter>=this.addSmokeLimit&&(this.addSmokeCounter=0,this.addSmokeLimit=Game.getRandom(2,10)/(60/Game.fps),this.placeSmokeParticle())}},e.prototype.placeSmokeParticle=function(){for(var e=0;e<this.explosionSmallParticles.length;e++)if(1!=this.explosionSmallParticles[e].active);else{var t=this.getSmokeParticle();t.position.x=this.explosionSmallParticles[e].sprite.x,t.position.y=this.explosionSmallParticles[e].sprite.y;var i=Game.getRandom(.8,1);t.scale.x=i,t.scale.y=i,this.mainContainer.addChild(t)}},e.prototype.flyAwayZappingDrone=function(){for(var e=0;e<this.drones.length;e++)if(1==this.drones[e].zappingTurtle)return this.drones[e].zapping=!1,this.drones[e].zapAnim.position.y=-1500,this.drones[e].zapAnim.stop(),Game.stopSound("laser-cave/zap-looping-"+e+".mp3"),void(this.drones[e].hoverPos[1]=Game.stageHeight+200)},e.prototype.getSmokeParticle=function(){for(var e=null,t=0;t<this.smokeParticles.length;t++)if(0==this.smokeParticles[t].active){this.smokeParticles[t].active=!0,e=this.smokeParticles[t].sprite;break}return e},e.prototype.moveDrone=function(e,t){var i=this.drones[e].droneChassisBody;if("flying"==this.drones[e].droneFlyMode){var s=this.drones[e].droneFlyHeight+this.drones[e].vertFlightDir*this.drones[e].vertFlightOffset-this.drones[e].droneChassisBody.position[1];Math.abs(s)<10&&(this.drones[e].vertFlightDir<0?this.drones[e].vertFlightDir=1:this.drones[e].vertFlightDir>0&&(this.drones[e].vertFlightDir=-1));var o=s*this.drones[e].droneVForce;i.applyForce([this.drones[e].droneHForce,o]),this.drones[e].droneChassisBody.position[0]>t+this.drones[e].distanceAheadHover&&(this.drones[e].droneFlyMode="hovering",this.drones[e].hoverPos=[t+this.drones[e].distanceAheadHover,this.drones[e].droneFlyHeight],this.drones[e].zapping=!0,this.drones[e].zapAnim.play(),Game.playSound("laser-cave/zap-looping-"+e+".mp3",.3))}if("hovering"==this.drones[e].droneFlyMode){if(i.position[0]<t-this.removeBehindDistance)return void(0==this.drones[e].shot&&(this.currentActiveDrones--,this.resetDrone(e)));var a=this.drones[e].hoverPos[0],r=this.getAngle(this.drones[e].droneHolder.x,this.drones[e].droneHolder.y,a,Game.gameHeight-this.drones[e].hoverPos[1]),n=1e3*this.getDistance(this.drones[e].droneHolder.x,this.drones[e].droneHolder.y,a,Game.gameHeight-this.drones[e].hoverPos[1]);0==this.drones[e].zappingTurtle?n>this.maxDronePower&&(n=this.maxDronePower):n>this.maxDronePowerTakeOff&&(n=this.maxDronePowerTakeOff);var h=Math.cos(r)*(n/i.mass),l=Math.sin(r)*(n/i.mass),p=[-h,-l];if(!h&&!l)return;i.applyForce(p)}},e.prototype.angleDrone=function(e){var t=this.drones[e].droneChassisBody,i=-t.velocity[0]/1500;i<.5*-Math.PI&&(i=.5*-Math.PI),i>.5*Math.PI&&(i=.5*Math.PI),t.angle+=(i-t.angle)/this.droneRotateEaseAmount},e.prototype.manageZap=function(e,t){if(0!=this.drones[e].zapping&&(this.drones[e].zapAnim.position.x=this.drones[e].droneHolder.position.x,this.drones[e].zapAnim.position.y=this.drones[e].droneHolder.position.y,Math.abs(this.drones[e].droneHolder.position.x-t)<this.zapDistance)){if(1==this.drones[e].zappingTurtle)return;this.drones[e].zappingTurtle=!0,this.scene.zapTurtle(),this.flyAwayZappingDrone()}},e.prototype.resetDrone=function(e){this.drones[e].active=!1,this.drones[e].droneHolder.position.y=-1e3,this.drones[e].zapAnim.position.y=-1500,this.drones[e].zapAnim.stop(),Game.stopSound("laser-cave/zap-looping-"+e+".mp3"),this.drones[e].zapping=!1,this.scene.removePhysicsBodyFromWorld(this.drones[e].droneChassisBody)},e.prototype.laserHitResult=function(e){if(null!=e)for(var t=0;t<this.drones.length;t++)if(this.drones[t].droneChassisBody==e)return void this.explodeDrone(t,this.drones[t].droneHolder.position)},e.prototype.explodeDrone=function(e,t){if(1!=this.drones[e].shot){this.currentActiveDrones--,this.drones[e].shot=!0,this.drones[e].explodeAnim.position.x=t.x,this.drones[e].explodeAnim.position.y=t.y,this.drones[e].explodeAnim.gotoAndStop(0),this.drones[e].explodeAnim.play(),this.drones[e].explodeAnim.rotation=Game.getRandom(0,2*Math.PI),this.drones[e].explodeAnim.rotation=Game.getRandom(-.5,.5),Game.playSound("laser-cave/hiss.mp3"),Game.playSound("laser-cave/drone-pop.mp3",.8);var i=[{id:"laser-cave/drone-destroy-1.mp3"},{id:"laser-cave/drone-destroy-2.mp3"},{id:"laser-cave/drone-destroy-3.mp3"}],s=Game.getRandom(0,2,!0);if(Game.playSound(i[s].id,i[s].vol||1),0==this.turtleAudioPlaying)switch(this.turtleAudioPlaying=!0,this.scene.turtleColour){case"red":var o=[{id:"laser-cave/raph-amazing.mp3"},{id:"laser-cave/raph-enough-talk.mp3"}];o[s=Game.getRandom(0,3,!0)]&&Game.playSound(o[s].id,o[s].vol||1);break;case"blue":var a=[{id:"laser-cave/leo-hooowho.mp3"},{id:"laser-cave/leo-celebrate.mp3"}];a[s=Game.getRandom(0,3,!0)]&&Game.playSound(a[s].id,a[s].vol||1);break;case"orange":var r=[{id:"laser-cave/mikey-awesome.mp3"},{id:"laser-cave/mikey-oh-yeah.mp3"},{id:"laser-cave/mikey-woohoo.mp3"}];r[s=Game.getRandom(0,4,!0)]&&Game.playSound(r[s].id,r[s].vol||1);break;case"purple":var n=[{id:"laser-cave/donnie-awesome.mp3"},{id:"laser-cave/donnie-eat-it.mp3"}];n[s=Game.getRandom(0,3,!0)]&&Game.playSound(n[s].id,n[s].vol||1)}this.popExplosionParticles(t),this.popExplosionSmallParticles(t),this.resetDrone(e),this.scene.startScreenShake(30),this.scene.turtleFaceTimerActive=!0,this.scene.setTurtleFace("happy")}},e.prototype.popExplosionParticles=function(e){if(1!=Game.isLowEndIPad)for(var t=Game.getRandom(4,8,!0),i=0,s=0;s<this.explosionLargeParticles.length;s++){var o=Game.getRandom(0,2*Math.PI),a=Math.cos(o),r=Math.sin(o),n=e.x+this.explosionParticleRadius*a,h=e.y+this.explosionParticleRadius*r;this.explosionLargeParticles[s].particleBody.position[0]=n,this.explosionLargeParticles[s].particleBody.position[1]=Game.stageHeight-h,this.explosionLargeParticles[s].active=!0,this.resetBody(this.explosionLargeParticles[s].particleBody);var l=Game.getRandom(2500,1e4);if(this.explosionLargeParticles[s].particleBody.angularVelocity=Game.getRandom(-20,20),this.explosionLargeParticles[s].particleBody.applyImpulse([a*l,-r*l]),this.scene.addPhysicsBodyToWorld(this.explosionLargeParticles[s].particleBody),++i>=t)return}},e.prototype.popExplosionSmallParticles=function(e){if(1!=Game.isLowEndIPad)for(var t=Game.getRandom(8,12,!0),i=0,s=0;s<this.explosionSmallParticles.length;s++){var o=Game.getRandom(0,2*Math.PI),a=Math.cos(o),r=Math.sin(o),n=e.x+this.explosionSmallParticleRadius*a,h=e.y+this.explosionSmallParticleRadius*r;this.explosionSmallParticles[s].particleBody.position[0]=n,this.explosionSmallParticles[s].particleBody.position[1]=Game.stageHeight-h,this.explosionSmallParticles[s].active=!0;var l=Game.getRandom(.5,1);this.explosionSmallParticles[s].sprite.scale.x=l,this.explosionSmallParticles[s].sprite.scale.y=l,this.resetBody(this.explosionSmallParticles[s].particleBody);var p=Game.getRandom(1e3,2e3);if(this.explosionSmallParticles[s].particleBody.applyImpulse([a*p,-r*p]),this.scene.addPhysicsBodyToWorld(this.explosionSmallParticles[s].particleBody),++i>=t)return}},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.spawnDrone=function(e,t){if(1!=this.gameOverTriggered){this.droneSpawnLimit=this.difficultyParams[this.difficultyIndex].droneSpawnNum;for(var i=0;i<this.drones.length;i++)if(1!=this.drones[i].active){if(this.currentActiveDrones>=this.droneSpawnLimit)return;this.currentActiveDrones++,this.difficultyIndex=this.scene.getDifficulty(),this.difficultyIndex>this.difficultyParams.length-1&&(this.difficultyIndex=this.difficultyParams.length-1),this.drones[i].droneChassisBody.gravityScale=0,this.resetBody(this.drones[i].droneChassisBody),this.drones[i].active=!0,this.drones[i].shot=!1,this.drones[i].droneFlyHeight=Game.stageHeight-Game.getRandom(100,400),this.drones[i].distanceAheadHover=Game.getRandom(400,600),this.drones[i].droneFlyMode="flying",this.drones[i].droneHForce=Game.getRandom(this.difficultyParams[this.difficultyIndex].horizontalForceRange[0],this.difficultyParams[this.difficultyIndex].horizontalForceRange[1]),this.drones[i].droneVForce=Game.getRandom(this.difficultyParams[this.difficultyIndex].verticalForceRange[0],this.difficultyParams[this.difficultyIndex].verticalForceRange[1]),this.drones[i].vertFlightOffset=Game.getRandom(0,this.difficultyParams[this.difficultyIndex].maxVertOffset),this.drones[i].zappingTurtle=!1;var s;s=Game.getRandom(0,1)<.5?-1:1,this.drones[i].vertFlightDir=s,this.drones[i].droneChassisBody.position[0]=e-this.removeBehindDistance-Game.getRandom(0,200),this.drones[i].droneChassisBody.position[1]=this.drones[i].droneFlyHeight+this.drones[i].vertFlightOffset*this.drones[i].vertFlightDir,this.scene.addPhysicsBodyToWorld(this.drones[i].droneChassisBody),this.drones[i].sfx="laser-cave/zap-looping-"+i}}},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angularVelocity=0,e.angularForce=0,e.angle=0,e.velocity=[0,0],e.setZeroForce()},e.prototype.pause=function(){for(var e=0;e<this.drones.length;e++)1==this.drones[e].zapping&&(this.drones[e].zapAnim.stop(),Game.pauseSound("laser-cave/zap-looping-"+e+".mp3"))},e.prototype.resume=function(){for(var e=0;e<this.drones.length;e++)1==this.drones[e].zapping&&(this.drones[e].zapAnim.play(),Game.resumeSound("laser-cave/zap-looping-"+e+".mp3"))},e.prototype.destroy=function(){for(e=0;e<this.drones.length;e++)Game.displayStore.returnPooledItem(this.drones[e].droneHolder),Game.displayStore.returnPooledItem(this.drones[e].droneChassisSprite),Game.displayStore.returnPooledItem(this.drones[e].explodeAnim),Game.displayStore.returnPooledItem(this.drones[e].zapAnim),Game.stopSound("laser-cave/zap-looping-"+e+".mp3");for(e=0;e<this.explosionLargeParticles.length;e++)Game.displayStore.returnPooledItem(this.explosionLargeParticles[e].sprite);for(e=0;e<this.explosionSmallParticles.length;e++)Game.displayStore.returnPooledItem(this.explosionSmallParticles[e].sprite);for(var e=0;e<this.smokeParticles.length;e++)Game.displayStore.returnPooledItem(this.smokeParticles[e].sprite)},e}(),LaserCaveBackgroundManager=function(){function e(e,t,i){this.scene=e,this.mainContainer=t,this.bgLayerSpeedFactor=.4,this.bgLayerFarSpeedFactor=.8,this.backWallLayerSpeedFactor=.9,this.bgContainerWidth=Game.stageWidth,this.bgCover=Game.displayStore.getSprite("laser-cave/bg-cover"),this.bgCoverFar=Game.displayStore.getSprite("laser-cave/bg-far-cover"),this.caveBGHolder1=Game.displayStore.getContainer("laser-cave/bg-holder-1"),this.caveBGHolder2=Game.displayStore.getContainer("laser-cave/bg-holder-2"),this.caveBGHolderFar1=Game.displayStore.getContainer("laser-cave/bg-holder-far-1"),this.caveBGHolderFar2=Game.displayStore.getContainer("laser-cave/bg-holder-far-2"),0==Game.isLowEndIPad&&(this.lavaGlow=Game.displayStore.getSprite("laser-cave/lava-glow"),this.lavaSpawnCounter=0,this.lavaSpawnCounterLimit=240,this.lavaActive=!1,this.lavaGlow.width=1.5*Game.stageWidth,this.lavaGlow.position.y=Game.stageHeight,this.lavaGlow.scale.y=3.5,this.lavaGlow.tint=16470785,this.lavaGlow.blendMode=PIXI.BLEND_MODES.ADD,this.lavaGlow.alpha=.8),this.caveBackPos=0,this.laserCounter=0,this.laserActive=!1,this.laserActivePowerUp=!1,this.bgItems=new Array;for(s=0;s<6;s++)this.bgItems.push({sprite:Game.displayStore.getSprite("laser-cave/bg-rock-"+String(s)),active:!1,container:null});for(s=0;s<6;s++)this.bgItems.push({sprite:Game.displayStore.getSprite("laser-cave/bg-rock-"+String(s)),active:!1,container:null});this.bgFarItems=new Array;for(s=0;s<6;s++)this.bgFarItems.push({sprite:Game.displayStore.getSprite("laser-cave/bg-rock-far-"+String(s)),active:!1,container:null});for(var s=0;s<6;s++)this.bgFarItems.push({sprite:Game.displayStore.getSprite("laser-cave/bg-rock-far-"+String(s)),active:!1,container:null});if(this.bgItems=this.shuffleArray(this.bgItems),this.bgFarItems=this.shuffleArray(this.bgFarItems),this.rearLayerHolder1=Game.displayStore.getContainer("laser-cave/rear-layer-holder"),this.rearLayerHolder2=Game.displayStore.getContainer("laser-cave/rear-layer-holder"),this.rearLayerSprite1=Game.displayStore.getSprite("laser-cave/rear-layer"),this.rearLayerSprite2=Game.displayStore.getSprite("laser-cave/rear-layer"),this.rearLayerSprite3=Game.displayStore.getSprite("laser-cave/rear-layer"),this.rearLayerSprite4=Game.displayStore.getSprite("laser-cave/rear-layer"),0==Game.isLowEndIPad){this.lavaParticleHolder=Game.displayStore.getContainer("laser-cave/lava-particle-holder"),this.lavaParticles=new Array;for(var o=0;o<10;o++){r=Game.displayStore.getSprite("laser-cave/slime-particle-1");this.lavaParticles.push(r),this.lavaParticleHolder.addChild(r)}for(var a=0;a<10;a++){var r=Game.displayStore.getSprite("laser-cave/slime-particle-2");this.lavaParticles.push(r),this.lavaParticleHolder.addChild(r)}this.lavaParticles=this.shuffleArray(this.lavaParticles),this.lavaParticleHolder.position.y=-500}this.rearLayerHolder1.position.y=-50,this.rearLayerHolder2.position.y=-50,this.rearLayerHolder1.addChild(this.rearLayerSprite1),this.rearLayerHolder1.addChild(this.rearLayerSprite2),this.rearLayerHolder2.addChild(this.rearLayerSprite3),this.rearLayerHolder2.addChild(this.rearLayerSprite4),this.rearLayerSprite2.position.x=this.rearLayerSprite1.position.x+this.rearLayerSprite1.width,this.rearLayerSprite4.position.x=this.rearLayerSprite1.position.x+this.rearLayerSprite1.width,this.backWallContainerWidth=2*this.rearLayerSprite1.width,this.mainContainer.addChild(this.rearLayerHolder1),this.mainContainer.addChild(this.rearLayerHolder2),0==Game.isLowEndIPad&&(this.mainContainer.addChild(this.caveBGHolderFar1),this.mainContainer.addChild(this.caveBGHolderFar2),this.mainContainer.addChild(this.bgCoverFar),this.mainContainer.addChild(this.lavaParticleHolder),this.mainContainer.addChild(this.lavaGlow),this.mainContainer.addChild(this.caveBGHolder1),this.mainContainer.addChild(this.caveBGHolder2),this.mainContainer.addChild(this.bgCover)),this.currentBGOffset=0,this.currentBGFarOffset=0,this.currentBackWallOffset=0,this.lastCartPos=0,this.currentCartPos=0,this.cartStartPos=i,this.populateBackgroundContainer(this.bgFarItems,this.caveBGHolderFar1,!1),this.populateBackgroundContainer(this.bgFarItems,this.caveBGHolderFar2,!1),this.populateBackgroundContainer(this.bgItems,this.caveBGHolder1,!1),this.populateBackgroundContainer(this.bgItems,this.caveBGHolder2,!1),this.caveBGHolder1.position.x=this.currentCartPos-this.cartStartPos,this.caveBGHolder2.position.x=this.caveBGHolder1.position.x+this.bgContainerWidth,this.caveBGHolderFar1.position.x=this.caveBGHolder1.position.x,this.caveBGHolderFar2.position.x=this.caveBGHolder2.position.x,this.bgCover.alpha=.3,this.bgCoverFar.alpha=.5,this.bgCover.width=1.5*Game.stageWidth,this.bgCoverFar.width=1.5*Game.stageWidth,this.bgCover.height=1.5*Game.stageHeight,this.bgCoverFar.height=1.5*Game.stageHeight,this.bgCover.tint=1579032,this.bgCoverFar.tint=1579032,this.bgCover.position.y=-100,this.bgCoverFar.position.y=-100}return e.prototype.explodeLava=function(e){Game.playSound("laser-cave/lava-gloop.mp3",.8),this.lavaParticlesTimeline=this.scene.killTween(this.lavaParticlesTimeline),this.lavaParticlesTimeline=new TimelineMax,this.lavaParticleHolder.position.y=Game.stageHeight,this.lavaParticleHolder.position.x=this.currentCartPos+200;for(var t=0;t<this.lavaParticles.length;t++){TweenMax.killTweensOf(this.lavaParticles[t]);var i=Game.getRandom(0,2*Math.PI),s=Game.getRandom(.5,1.4);this.lavaParticles[t].position.x=0,this.lavaParticles[t].rotation=0,this.lavaParticles[t].position.y=0,this.lavaParticles[t].position.x=40*Math.cos(i),this.lavaParticles[t].position.y=40*Math.sin(i),this.lavaParticles[t].scale.x=s,this.lavaParticles[t].scale.y=s,this.lavaParticles[t].rotation=Game.getRandom(0,2*Math.PI),this.lavaParticlesTimeline.timeline.add([TweenMax.to(this.lavaParticles[t],3,{physics2D:{velocity:Game.getRandom(300,800),angle:Game.getRandom(250,340),gravity:1e3}}),TweenMax.to(this.lavaParticles[t],2,{rotation:Game.getRandom(1,6),ease:Power1.easeIn})],0)}},e.prototype.setUpTintCover=function(e){this.bgCover.tint=e,this.bgCover.blendMode=PIXI.BLEND_MODES.ADD,this.bgCover.visible=!1},e.prototype.backgroundTint=function(){this.laserActive=!0,this.bgCover.visible=!0},e.prototype.backgroundTintPowerUp=function(){this.laserActivePowerUp=!0},e.prototype.backgroundTintPowerUpEnd=function(){this.bgCover.visible=!1,this.laserActivePowerUp=!1},e.prototype.tick=function(e){if(1==this.laserActivePowerUp&&++this.laserCounter>=4){this.laserCounter=0;var t=[{id:"laser-cave/laser-1.mp3"},{id:"laser-cave/laser-2.mp3"},{id:"laser-cave/laser-3.mp3"}],i=Game.getRandom(0,2,!0);Game.playSound(t[i].id,t[i].vol||1),1==this.bgCover.visible?this.bgCover.visible=!1:this.bgCover.visible=!0}if(1==this.laserActive&&++this.laserCounter>=10){this.laserActive=!1,this.laserCounter=0;var t=[{id:"laser-cave/laser-1.mp3"},{id:"laser-cave/laser-2.mp3"},{id:"laser-cave/laser-3.mp3"}],i=Game.getRandom(0,2,!0);Game.playSound(t[i].id,t[i].vol||1),this.bgCover.visible=!1}0==Game.isLowEndIPad&&(this.lavaGlow.alpha=Game.getRandom(.6,.8),this.lavaSpawnCounter<this.lavaSpawnCounterLimit&&++this.lavaSpawnCounter>=this.lavaSpawnCounterLimit&&(this.lavaSpawnCounter=0,Game.getRandom(0,1)>.25&&(this.explodeLava(e),this.lavaActive=!0)),this.lavaGlow.position.x=this.currentCartPos-400),this.currentCartPos=e,this.bgCover.position.x=this.currentCartPos-400,this.bgCoverFar.position.x=this.currentCartPos-400;var s=this.currentCartPos-this.lastCartPos;this.currentBGOffset+=s-s*this.bgLayerSpeedFactor,this.caveBGHolder1.position.x+=s*this.bgLayerSpeedFactor,this.caveBGHolder2.position.x=this.caveBGHolder1.position.x+this.bgContainerWidth,this.currentBGFarOffset+=s-s*this.bgLayerFarSpeedFactor,this.caveBGHolderFar1.position.x+=s*this.bgLayerFarSpeedFactor,this.caveBGHolderFar2.position.x=this.caveBGHolderFar1.position.x+this.bgContainerWidth,this.currentBackWallOffset+=s-s*this.backWallLayerSpeedFactor,this.rearLayerHolder1.position.x+=s*this.backWallLayerSpeedFactor,this.rearLayerHolder2.position.x=this.rearLayerHolder1.position.x+this.backWallContainerWidth,this.lastCartPos=this.currentCartPos,this.positionBGElements(),this.positionBGFarElements(),this.positionBackWallElements()},e.prototype.positionBGElements=function(){var e;if(this.currentBGOffset>Game.stageWidth)return this.emptyBackgroundContainer(this.bgItems,this.caveBGHolder1),this.copyBackgroundContainerItems(this.bgItems,this.caveBGHolder2,this.caveBGHolder1),e=this.currentBGOffset-Game.stageWidth,this.currentBGOffset=e,this.caveBGHolder1.position.x=this.currentCartPos-this.cartStartPos-e,this.caveBGHolder2.position.x=this.caveBGHolder1.position.x+this.bgContainerWidth,void this.populateBackgroundContainer(this.bgItems,this.caveBGHolder2,!1)},e.prototype.positionBGFarElements=function(){var e;if(this.currentBGFarOffset>Game.stageWidth)return this.emptyBackgroundContainer(this.bgFarItems,this.caveBGHolderFar1),this.copyBackgroundContainerItems(this.bgFarItems,this.caveBGHolderFar2,this.caveBGHolderFar1),e=this.currentBGFarOffset-Game.stageWidth,this.currentBGFarOffset=e,this.caveBGHolderFar1.position.x=this.currentCartPos-this.cartStartPos-e,this.caveBGHolderFar2.position.x=this.caveBGHolderFar1.position.x+this.bgContainerWidth,void this.populateBackgroundContainer(this.bgFarItems,this.caveBGHolderFar2,!1)},e.prototype.positionBackWallElements=function(){var e;if(this.backWallLayerSpeedFactor>this.backWallContainerWidth)return e=this.currentBackWallOffset-this.backWallContainerWidth,this.currentBackWallOffset=e,this.rearLayerHolder1.position.x=this.currentCartPos-this.cartStartPos-e,void(this.rearLayerHolder2.position.x=this.rearLayerHolder1.position.x+this.rearLayerHolder1.width)},e.prototype.shuffleArray=function(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[i],e[i]=t;return e},e.prototype.getItem=function(e){for(var t=0;t<e.length;t++)if(0==e[t].active)return e[t].active=!0,e[t]},e.prototype.emptyBackgroundContainer=function(e,t){for(var i=0;i<e.length;i++)1==e[i].active&&e[i].container==t&&(e[i].active=!1,e[i].container=null,t.removeChild(e[i].sprite))},e.prototype.copyBackgroundContainerItems=function(e,t,i){for(var s=0;s<e.length;s++)1==e[s].active&&e[s].container==t&&(t.removeChild(e[s].sprite),i.addChild(e[s].sprite),e[s].container=i)},e.prototype.populateBackgroundContainer=function(e,t,i){e=this.shuffleArray(e);for(var s=Game.getRandom(6,14,!0),o=0;o<s;o++){var a=this.getItem(e);if(a){var r;1==i&&(r=Game.getRandom(50,t.height-100),a.sprite.position.y=r);var n=Game.getRandom(0+a.sprite.width/2,this.bgContainerWidth-a.sprite.width/2);a.sprite.position.x=n,a.container=t,t.addChild(a.sprite)}}},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){for(e=0;e<this.bgItems.length;e++)Game.displayStore.returnPooledItem(this.bgItems[e].sprite);for(e=0;e<this.bgFarItems.length;e++)Game.displayStore.returnPooledItem(this.bgFarItems[e].sprite);if(Game.displayStore.returnPooledItem(this.rearLayerHolder1),Game.displayStore.returnPooledItem(this.rearLayerHolder2),Game.displayStore.returnPooledItem(this.rearLayerSprite1),Game.displayStore.returnPooledItem(this.rearLayerSprite2),Game.displayStore.returnPooledItem(this.rearLayerSprite3),Game.displayStore.returnPooledItem(this.rearLayerSprite4),Game.displayStore.returnPooledItem(this.bgCover),Game.displayStore.returnPooledItem(this.bgCoverFar),0==Game.isLowEndIPad)for(var e=0;e<this.lavaParticles.length;e++)Game.displayStore.returnPooledItem(this.lavaParticles[e])},e}(),LaserCaveTicketManager=function(){function e(e,t){this.scene=e,this.mainContainer=t,this.removeBehindDistance=500,this.tickets=new Array,this.spawnCounterLimit=240,this.spawnCounter=0,this.spawnAheadPos=800,this.heartSpawnCounter=0,this.heartSpawnCounterLimit=4}return e.prototype.createTickets=function(){this.tickets=new Array;for(var e=0;e<5;e++)this.tickets.push({ticket:null,active:!1})},e.prototype.tick=function(e){++this.spawnCounter>=this.spawnCounterLimit&&(this.spawnCounter=0,this.spawnTicketAhead(e));for(var t=0;t<this.tickets.length;t++)0!=this.tickets[t].active&&this.tickets[t].ticket.container.position.x<e+200&&this.collectTicket(t)},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.spawnTicketAhead=function(e){var t=!1,i=this.scene.getLives();i.currentLives!=i.totalLives&&++this.heartSpawnCounter>=this.heartSpawnCounterLimit&&(this.heartSpawnCounter=0,t=!0);for(var s=0;s<this.tickets.length;s++)if(0==this.tickets[s].active){var o;if(o=1==t?Game.ticketPool.getHeart():Game.ticketPool.getTicket(),0==t&&3==this.scene.game.gameLaunchMode)return;o.container.position.x=e+this.spawnAheadPos,o.container.position.y=510,this.mainContainer.addChild(o.container),this.tickets[s].ticket=o,this.tickets[s].active=!0;break}},e.prototype.collectTicket=function(e){this.tickets[e].ticket.collect(),1==this.tickets[e].ticket.isHeart&&this.scene.addLife(),this.tickets[e].active=!1,this.tickets[e].ticket=null},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angularVelocity=0,e.angularForce=0,e.angle=0,e.velocity=[0,0],e.setZeroForce()},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){if(0!=this.tickets.length)for(var e=0;e<this.tickets.length;e++)1==this.tickets[e].active&&Game.ticketPool.returnTicket(this.tickets[e].ticket)},e}(),MayanMadnessScrollingLayer=function(){function e(e,t,i,s){this.transitioned=!1,this.stripTarget=new PIXI.Point,this.containerTarget=new PIXI.Point,this.lastLayerMovement=new PIXI.Point,this.layerMovement=new PIXI.Point,this.scene=e,this.game=e.game,this.container=s,this.defaultX=i,this.depth=t,this.chunks=[],this.currentChunkIndex=0;for(var o=0;o<this.container.children.length;o++){var a=this.container.getSpriteAt(o);this.chunks.push(a)}this.layoutChunks(),this.upperLimit=0,this.lowerLimit=-this.chunkHeight*this.chunks.length+Game.stageHeight}return e.prototype.layoutChunks=function(){for(var e=0,t=0;t<this.chunks.length;t++)this.chunkHeight=this.chunks[t].height,this.chunks[t].position.y=e-this.chunkHeight*this.currentChunkIndex,e+=this.chunks[t].height},e.prototype.reorderArray=function(e,t){-1==t?e.push(e.shift()):e.unshift(e.pop())},e.prototype.showOnlyChunkChild=function(e,t){for(var i=0;i<this.chunks.length;i++)for(var s=this.chunks[i],o=0;o<s.children.length;o++){var a=s.getSpriteAt(o);o==e?TweenMax.to(a,.5,{alpha:1}):a!=t&&TweenMax.to(a,.5,{alpha:0})}},e.prototype.tick=function(e,t){this.smoothing=e,this.layerMovement.x=t.x-this.lastLayerMovement.x,this.layerMovement.y=t.y-this.lastLayerMovement.y,this.lastLayerMovement.x=t.x,this.lastLayerMovement.y=t.y,this.stripTarget.x+=this.layerMovement.x*this.depth,this.stripTarget.y+=this.layerMovement.y*this.depth,this.containerTarget.x+=(this.stripTarget.x-this.containerTarget.x)/this.smoothing,this.containerTarget.y+=(this.stripTarget.y-this.containerTarget.y)/this.smoothing,this.containerTarget.y>this.stripTarget.y+1?this.direction=-1:this.containerTarget.y<this.stripTarget.y-1?this.direction=1:this.direction=0,this.depth<-1&&(this.direction=-1*this.direction),this.container.position.x=this.defaultX-this.containerTarget.x,this.container.position.y=-this.containerTarget.y,this.direction<0?this.container.position.y+t.y<=this.lowerLimit&&(this.currentChunkIndex--,this.reorderArray(this.chunks,-1),this.layoutChunks()):this.direction>0&&this.container.position.y+t.y>=this.upperLimit&&(this.currentChunkIndex++,this.reorderArray(this.chunks,1),this.layoutChunks()),this.upperLimit=this.currentChunkIndex*this.chunkHeight,this.lowerLimit=-this.chunkHeight*this.chunks.length+Game.stageHeight+300+this.currentChunkIndex*this.chunkHeight},e.prototype.destroy=function(){this.chunks=[]},e}(),MayanMadnessInputManager=function(){function e(e,t){this.scene=e,this.mainHolderRef=t,this.hitAreaSprite=Game.displayStore.getSprite("mayan-madness/blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.fingerPoint=Game.displayStore.getSprite("mayan-madness/finger-point.png"),this.scene.physicsManager.bindSpriteToBody(this.fingerPoint,this.scene.physicsManager.fingerPoint),this.currentAngle=0,this.maxAngleDiff=1.4,this.minAngleDiff=.1,this.keyboardDown=!1,this.driveForce=0,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite)}return e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mousemove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseupoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))})):(e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchmove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchendoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}))},e.prototype.inputDown=function(e,t){if(this.scene.physicsManager.setFingerPoint(t),this.scene.physicsManager.stepPhysics(),1==this.scene.puzzlePad.isOpen&&1==this.scene.puzzlePad.allowInteraction){var i=this.scene.physicsManager.checkOverlaps();void 0!=i&&this.scene.puzzlePad.tapStartShape(i)}t.x>Game.stageWidth/2?this.keyDown("right"):this.keyDown("left")},e.prototype.inputUp=function(e,t){0!=this.scene.atDoor&&(0==this.scene.puzzlePad.isOpen&&t.x>800&&t.y>260&&this.scene.puzzlePad.open(),t.x>Game.stageWidth/2?this.keyUp("right"):this.keyUp("left"))},e.prototype.inputMove=function(e,t){},e.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},e.prototype.getInputAngle=function(){var e=this.currentAngle;return e>this.maxAngleDiff&&(e=this.maxAngleDiff),e<this.minAngleDiff&&(e=this.minAngleDiff),e},e.prototype.keyDown=function(e){if(1!=this.scene.tutorialOverlay.isOpen){switch(this.keyboardInput=e,e){case"left":this.driveForce=50;break;case"right":this.driveForce=-170;break;case"down":case"up":this.startAngle=0;break;case"spacebar":this.keyboardInput="spacebar"}this.keyboardDown=!0}},e.prototype.keyUp=function(e){if(1!=this.scene.tutorialOverlay.isOpen){switch(e){case"left":case"right":this.driveForce=0}this.keyboardDown=!1}},e.prototype.tick=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},e}(),MayanMadnessPhysicsManager=function(){function e(e,t){this.physicsEnabled=!0,this.triangleShapeData=[{shape:[0,0,199,0,98,172]}],this.hexagonShapeData=[{shape:[0,38,69,0,135,38,135,118,69,155,0,117]}],this.resizeRatio=1,this.scene=e,this.mainContainer=t,this.powerupRatio=1,this.boundBodies=[]}return e.prototype.initPhysicsWorld=function(){this.world=new p2.World({gravity:[0,0]}),this.stepCount=0,this.world.broadphase=new p2.NaiveBroadphase(1),this.squares=[],this.triangles=[],this.hexagons=[],this.currentShapes=[],this.targetForce=0,this.world.defaultContactMaterial.restitution=.3,this.world.defaultContactMaterial.friction=.2,this.fingerPoint=new p2.Body({mass:1}),this.fingerPointShape=new p2.Circle({radius:2}),this.fingerPointShape.sensor=!0,this.fingerPoint.addShape(this.fingerPointShape),this.world.addBody(this.fingerPoint);var e=this;this.world.on("beginContact",function(t){e.checkCollision(e,t)}),this.world.on("endContact",function(t){e.checkEndCollision(e,t)}),this.world.on("postStep",function(e){}),this.physicsEnabled=!0},e.prototype.createPhysicsObjects=function(){this.createSquares(),this.createTriangles(),this.createHexagons()},e.prototype.createTriangles=function(){for(var e=this.scene.puzzlePad.grid[0].positions,t=this.scene.puzzlePad.trianglePuzzleContainer.toGlobal(new PIXI.Point).x/Game.windowScaleFactor,i=this.scene.puzzlePad.trianglePuzzleContainer.toGlobal(new PIXI.Point).y/Game.windowScaleFactor,s=0;s<e.length;s++){var o=new p2.Body({mass:0,position:[e[s].x+t,Game.stageHeight-(e[s].y+i)]}),a=this.createComplexShape(o,this.triangleShapeData);o.angle=-e[s].rotation,o.angle<0&&(o.position[1]-=58),this.world.addBody(o),this.triangles.push({body:o,shape:a})}},e.prototype.createSquares=function(){for(var e=this.scene.puzzlePad.grid[1].positions,t=this.scene.puzzlePad.squarePuzzleContainer.toGlobal(new PIXI.Point).x/Game.windowScaleFactor,i=this.scene.puzzlePad.squarePuzzleContainer.toGlobal(new PIXI.Point).y/Game.windowScaleFactor,s=0;s<e.length;s++){var o=new p2.Body({mass:0,position:[e[s].x+t,Game.stageHeight-(e[s].y+i)]}),a=new p2.Box({width:121,height:121});o.addShape(a),this.squares.push({body:o,shape:a})}},e.prototype.createHexagons=function(){for(var e=this.scene.puzzlePad.grid[2].positions,t=this.scene.puzzlePad.hexagonPuzzleContainer.toGlobal(new PIXI.Point).x/Game.windowScaleFactor,i=this.scene.puzzlePad.hexagonPuzzleContainer.toGlobal(new PIXI.Point).y/Game.windowScaleFactor,s=0;s<e.length;s++){var o=new p2.Body({mass:0,position:[e[s].x+t,Game.stageHeight-(e[s].y+i)]}),a=this.createComplexShape(o,this.hexagonShapeData);o.angle=-e[s].rotation,this.hexagons.push({body:o,shape:a})}},e.prototype.setFingerPoint=function(e){this.fingerPoint.position[0]=e.x,this.fingerPoint.position[1]=Game.stageHeight-e.y},e.prototype.setGrid=function(e){for(t=0;t<this.triangles.length;t++)this.world.removeBody(this.triangles[t].body);for(t=0;t<this.squares.length;t++)this.world.removeBody(this.squares[t].body);for(t=0;t<this.hexagons.length;t++)this.world.removeBody(this.hexagons[t].body);switch(e){case 0:this.currentShapes=this.triangles;for(t=0;t<this.triangles.length;t++)this.world.addBody(this.triangles[t].body);break;case 1:this.currentShapes=this.squares;for(t=0;t<this.squares.length;t++)this.world.addBody(this.squares[t].body);break;case 2:this.currentShapes=this.hexagons;for(var t=0;t<this.hexagons.length;t++)this.world.addBody(this.hexagons[t].body)}},e.prototype.checkOverlaps=function(){for(var e,t=0;t<this.currentShapes.length;t++)1==this.fingerPoint.overlaps(this.currentShapes[t].body)&&(e=t);return e},e.prototype.activatePowerup=function(){},e.prototype.deactivatePowerup=function(){},e.prototype.stepPhysics=function(){if(0!=this.physicsEnabled&&this.world){this.world.step(1/30);for(var e=0;e<this.boundBodies.length;e++)this.boundBodies[e].sprite.position.x=this.boundBodies[e].body.position[0],this.boundBodies[e].sprite.position.y=Game.stageHeight-this.boundBodies[e].body.position[1],this.boundBodies[e].sprite.rotation=-this.boundBodies[e].body.angle}},e.prototype.findIndexByKeyValue=function(e,t,i){for(var s=0;s<e.length;s++)if(e[s][t]==i)return s;return null},e.prototype.addBodyToWorld=function(e){this.world.addBody(e)},e.prototype.removeBodyFromWorld=function(e){this.world.removeBody(e)},e.prototype.removeConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.addConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.resizeElements=function(e,t){this.canvasHeight=t,this.canvasWidth=e,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},e.prototype.bindSpriteToBody=function(e,t){this.boundBodies.push({sprite:e,body:t})},e.prototype.unbindSpriteFromBody=function(e){this.boundBodies&&this.boundBodies.splice(this.findIndexByKeyValue(this.boundBodies,"sprite",e),1)},e.prototype.checkCollision=function(e,t){},e.prototype.checkEndCollision=function(e,t){},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angularVelocity=0,e.angularForce=0,e.angle=0,e.velocity=[0,0],e.setZeroForce(),e.mass/=2},e.prototype.createComplexShape=function(e,t,i,s){for(var o,a=0;a<t.length;a++)if(function(t){for(var i=[],s=0;s<t.length;s++)s%2==1&&i.push([t[s-1],t[s]]);o=new p2.Convex({vertices:i});var a=new p2.AABB;o.computeAABB(a,[0,0],0),e.addShape(o,[-a.upperBound[0]/2,-a.upperBound[1]/2])}(t[a].shape),i&&(e.shapes[a].collisionGroup=i),i&&s)for(var r=0;r<s.length;r++)e.shapes[a].collisionMask=s[r];return o},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.pause=function(){this.physicsEnabled=!1},e.prototype.resume=function(){this.physicsEnabled=!0},e.prototype.destroy=function(){var e=this;TweenMax.delayedCall(.2,function(){e.world.clear()})},e}(),MayanMadnessPuzzlePad=function(){function e(e){this.allowedShapeRotations=[{type:"triangle",rotations:[0,2.0944,4.18879,2*Math.PI]},{type:"square",rotations:[0,Math.PI/2,Math.PI,1.5*Math.PI,2*Math.PI]},{type:"hexagon",rotations:[0,1.0472,2.0944,Math.PI,4.18879,5.23599,2*Math.PI]}],this.grid=[{type:"triangle",positions:[{x:0,y:29,rotation:0},{x:105,y:-29,rotation:Math.PI},{x:210,y:29,rotation:0},{x:0,y:148,rotation:Math.PI},{x:105,y:206,rotation:0},{x:210,y:148,rotation:Math.PI}]},{type:"square",positions:[{x:0,y:0,rotation:0},{x:126,y:0,rotation:0},{x:252,y:0,rotation:0},{x:0,y:126,rotation:0},{x:126,y:126,rotation:0},{x:252,y:126,rotation:0},{x:0,y:252,rotation:0},{x:126,y:252,rotation:0},{x:252,y:252,rotation:0}]},{type:"hexagon",positions:[{x:0,y:0,rotation:0},{x:141,y:0,rotation:0},{x:-71,y:121,rotation:0},{x:70.5,y:121,rotation:0},{x:211,y:121,rotation:0},{x:0,y:243,rotation:0},{x:141,y:243,rotation:0}]}],this.scene=e,this.game=e.game,this.isOpen=!1,this.container=Game.displayStore.getContainer("mayan-madness/puzzle-pad-container"),this.inner=this.container.getContainer("mayan-madness/puzzle-pad-holder"),this.blackout=this.container.getSprite("mayan-madness/blackout"),this.blackout.alpha=.7,this.blackout.blendMode=PIXI.BLEND_MODES.MULTIPLY,this.blackout.width=Game.stageWidth,this.blackout.height=Game.stageHeight,this.squares=[],this.triangles=[],this.hexagons=[],this.currentShapes=[],this.shapeRotations=[{type:"triangles",shapes:[]},{type:"squares",shapes:[]},{type:"hexagons",shapes:[]}],this.container.alpha=0,this.inner.alpha=1,this.allowInteraction=!0,this.hintHolder=this.container.getContainer("mayan-madness/hint-holder"),this.trianglePuzzleContainer=Game.displayStore.getContainer("mayan-madness/triangle-puzzle-container"),this.squarePuzzleContainer=Game.displayStore.getContainer("mayan-madness/square-puzzle-container"),this.hexagonPuzzleContainer=Game.displayStore.getContainer("mayan-madness/hexagon-puzzle-container"),this.trianglePuzzleGlow=Game.displayStore.getSprite("mayan-madness/puzzle-triangle-completed"),this.squarePuzzleGlow=Game.displayStore.getSprite("mayan-madness/puzzle-square-completed"),this.hexagonPuzzleGlow=Game.displayStore.getSprite("mayan-madness/puzzle-hexagon-completed"),this.inner.addChild(this.scene.puzzleParticleBurstHolder),this.inner.addChild(this.trianglePuzzleContainer),this.inner.addChild(this.squarePuzzleContainer),this.inner.addChild(this.hexagonPuzzleContainer),this.inner.addChild(this.trianglePuzzleGlow),this.inner.addChild(this.squarePuzzleGlow),this.inner.addChild(this.hexagonPuzzleGlow),this.trianglePuzzleContainer.visible=!1,this.squarePuzzleContainer.visible=!1,this.hexagonPuzzleContainer.visible=!1,this.trianglePuzzleGlow.alpha=0,this.squarePuzzleGlow.alpha=0,this.hexagonPuzzleGlow.alpha=0,this.trianglePuzzleGlow.position.y=-20,this.squarePuzzleGlow.position.y=-10,this.hexagonPuzzleGlow.position.y=-22,this.trianglePuzzleGlow.blendMode=PIXI.BLEND_MODES.ADD,this.squarePuzzleGlow.blendMode=PIXI.BLEND_MODES.ADD,this.hexagonPuzzleGlow.blendMode=PIXI.BLEND_MODES.ADD,this.tileDustFrames=Game.displayStore.getAnimatedSprite("tile-frames"),this.tileDustFrames.position.x=0,this.tileDustFrames.position.y=0,this.tileDustFrames.loop=!1,this.tileDustFrames.animationSpeed=.3,this.tileDustFrames.scale.x=2.5,this.tileDustFrames.scale.y=2.5,this.tileDustFrames.tint=15053665,this.tileDustFrames.alpha=.8,this.tileDustFrames.blendMode=PIXI.BLEND_MODES.HUE,this.createGrids()}return e.prototype.open=function(){1!=this.scene.powerupIsActive&&(this.openTimeline=this.scene.killTween(this.openTimeline),this.openTimeline=new TimelineMax,this.scene.henrySpine.setAnim("press",!0),this.isOpen=!0,this.inner.position.y=750,this.inner.scale.x=.5,this.inner.scale.y=.5,this.hintHolder.position.x=1150,this.openTimeline.add([TweenMax.to(this.container,.6,{alpha:1,ease:Power2.easeOut}),TweenMax.to(this.inner.position,.5,{y:400,ease:Back.easeOut}),TweenMax.to(this.inner.scale,.5,{x:1,y:1,ease:Back.easeOut})],.8),this.openTimeline.call(this.scene.startPuzzle,null,this.scene),this.openTimeline.add(TweenMax.to(this.hintHolder.position,.4,{x:960,ease:Back.easeOut}),1.3),this.openTimeline.call(function(){Game.playSound("mayan-madness/stone-touch.mp3",.7)},null,this,.2),this.openTimeline.call(function(){this.scene.henrySpine.setAnim("idle",!0),Game.playSound("mayan-madness/puzzle-up.mp3",1)},null,this,.75))},e.prototype.close=function(){this.closeTimeline=this.scene.killTween(this.closeTimeline),this.closeTimeline=new TimelineMax({delay:.25}),this.isOpen=!1,this.scene.atDoor=!1;for(var e=0;e<this.currentShapes.length;e++)this.closeTimeline.add(TweenMax.to(this.currentShapes[e].spriteHolder.scale,.3,{x:1.05,y:1.05,ease:Power2.easeOut}),0),this.closeTimeline.add(TweenMax.to(this.currentShapes[e].spriteHolder.scale,.1,{x:1,y:1,ease:Bounce.easeOut}),.3);switch(this.closeTimeline.call(function(){this.scene.puzzleParticleBurst.fire();var e=[{id:"mayan-madness/shine-1.mp3"},{id:"mayan-madness/shine-2.mp3"},{id:"mayan-madness/shine-3.mp3"}],t=Game.getRandom(0,2,!0);Game.playSound(e[t].id,e[t].vol||1)},null,this,.35),this.closeTimeline.add(TweenMax.to(this.inner.scale,.3,{x:1.05,y:1.05,ease:Power2.easeOut}),.05),this.closeTimeline.add(TweenMax.to(this.inner.scale,.1,{x:1,y:1,ease:Bounce.easeOut}),.35),this.currentShapeType){case"triangle":this.closeTimeline.add([TweenMax.to(this.trianglePuzzleGlow,.4,{alpha:.8,yoyo:!0,repeat:1,ease:Power3.easeInOut})],.35);break;case"square":this.closeTimeline.add([TweenMax.to(this.squarePuzzleGlow,.4,{alpha:.8,yoyo:!0,repeat:1,ease:Power3.easeInOut})],.35);break;case"hexagon":this.closeTimeline.add([TweenMax.to(this.hexagonPuzzleGlow,.4,{alpha:.8,yoyo:!0,repeat:1,ease:Power3.easeInOut})],.35)}this.closeTimeline.add([TweenMax.to(this.container,.4,{alpha:0,ease:Power2.easeIn}),TweenMax.to(this.inner.position,.4,{y:700,ease:Back.easeIn}),TweenMax.to(this.inner.scale,.4,{x:.5,y:.5,ease:Back.easeIn})],.85),this.closeTimeline.add([TweenMax.to(this.hintHolder.position,.4,{x:1150,ease:Back.easeIn})],.9),this.closeTimeline.call(this.scene.openDoor,null,this.scene),this.scene.timer.addTime(7),this.closeTimeline.call(function(){Game.playSound("mayan-madness/puzzle-down.mp3",1)},null,this,1),this.closeTimeline.call(function(){var e=[{id:"mayan-madness/henry-awesome.mp3"},{id:"mayan-madness/captain-man-thats-right.mp3"},{id:"mayan-madness/henry-lets-go.mp3"}],t=Game.getRandom(0,5,!0);e[t]&&Game.playSound(e[t].id,e[t].vol||1)},null,this,1.2)},e.prototype.tapStartShape=function(e){this.shapeTimeline=this.scene.killTween(this.shapeTimeline),this.shapeTimeline=new TimelineMax,this.allowInteraction=!1,this.shapeRotations[this.currentShapeTypeIndex].shapes[e]<this.allowedShapeRotations[this.currentShapeTypeIndex].rotations.length-1?this.shapeRotations[this.currentShapeTypeIndex].shapes[e]+=1:this.shapeRotations[this.currentShapeTypeIndex].shapes[e]=0,this.currentShapeContainer.addChild(this.currentShapes[e].spriteHolder);var t=this.allowedShapeRotations[this.currentShapeTypeIndex].rotations[this.shapeRotations[this.currentShapeTypeIndex].shapes[e]];0==t&&(this.currentShapes[e].spriteHolder.rotation=0,this.shapeRotations[this.currentShapeTypeIndex].shapes[e]+=1,t=this.allowedShapeRotations[this.currentShapeTypeIndex].rotations[this.shapeRotations[this.currentShapeTypeIndex].shapes[e]]),this.shapeTimeline.add([TweenMax.to(this.currentShapes[e].spriteHolder.scale,.3,{x:1.3,y:1.3,ease:Power2.easeOut}),TweenMax.to(this.currentShapes[e].spriteHolder,.3,{rotation:t,ease:Power2.easeOut})]),this.shapeTimeline.add(TweenMax.to(this.currentShapes[e].spriteHolder.scale,.1,{x:1,y:1,ease:Bounce.easeOut}),"-=0.1"),this.shapeTimeline.call(function(){this.allowInteraction=!0,1==this.checkPatternCorrect()&&this.close()},null,this),this.tileDustFrames.alpha=0,this.tileDustFrames.gotoAndStop(0),TweenMax.delayedCall(.1,function(){this.currentShapes[e].spriteHolder.addChildAt(this.tileDustFrames,0),this.tileDustFrames.alpha=.8,this.tileDustFrames.gotoAndPlay(1),this.shapeTimeline.add(TweenMax.to(this.tileDustFrames,.5,{alpha:0,ease:Sine.easeInOut}))},null,this);var i=[{id:"mayan-madness/stone-1.mp3"},{id:"mayan-madness/stone-2.mp3"},{id:"mayan-madness/stone-3.mp3"}],s=Game.getRandom(0,2,!0);Game.playSound(i[s].id,i[s].vol||.8);var i=[{id:"mayan-madness/scrape-1.mp3"},{id:"mayan-madness/scrape-2.mp3"}],s=Game.getRandom(0,1,!0);Game.playSound(i[s].id,i[s].vol||.3)},e.prototype.checkPatternCorrect=function(){for(var e=!1,t=0,i=0;i<this.shapeRotations[this.currentShapeTypeIndex].shapes.length;i++)this.shapeRotations[this.currentShapeTypeIndex].shapes[i]!=this.allowedShapeRotations[this.currentShapeTypeIndex].rotations.length-1&&0!=this.shapeRotations[this.currentShapeTypeIndex].shapes[i]||(t+=1);return t==this.shapeRotations[this.currentShapeTypeIndex].shapes.length&&(e=!0),e},e.prototype.createGrids=function(){for(var e=this.grid[0].positions,t=this.grid[1].positions,i=this.grid[2].positions,s=0;s<e.length;s++){var o=Game.displayStore.getSprite("mayan-madness/triangle-piece"),a=Game.displayStore.getContainer("mayan-madness/triangle-piece-holder");o.position.x=e[s].x,o.position.y=e[s].y,o.setRegPoint(.5,.667),o.rotation=e[s].rotation;var r=new PIXI.Graphics;r.beginFill(255,.5),r.drawPolygon([new PIXI.Point(199,0),new PIXI.Point(98,-172),new PIXI.Point(0,0)]),r.endFill(),r.position.x=e[s].x-r.width/2,r.position.y=e[s].y+r.height/3,r.rotation=e[s].rotation,r.rotation==Math.PI&&(r.position.x+=r.width,r.position.y-=.666*r.height),this.triangles.push({sprite:o,vector:r,spriteHolder:a,outputSprite:null}),this.shapeRotations[0].shapes.push(0)}for(s=0;s<t.length;s++){var n=Game.displayStore.getSprite("mayan-madness/square-piece"),a=Game.displayStore.getContainer("mayan-madness/square-piece-holder");n.position.x=t[s].x,n.position.y=t[s].y,n.rotation=t[s].rotation;var h=new PIXI.Graphics;h.beginFill(255,.5),h.drawRect(0,0,121,121),h.endFill(),h.position.x=t[s].x-h.width/2,h.position.y=t[s].y-h.height/2,h.rotation=t[s].rotation,this.squares.push({sprite:n,vector:h,spriteHolder:a,outputSprite:null}),this.shapeRotations[1].shapes.push(0)}for(s=0;s<i.length;s++){var l=Game.displayStore.getSprite("mayan-madness/hexagon-piece"),a=Game.displayStore.getContainer("mayan-madness/hexagon-piece-holder");l.position.x=i[s].x,l.position.y=i[s].y,l.rotation=i[s].rotation;var p=new PIXI.Graphics;p.beginFill(255,.5),p.drawPolygon([new PIXI.Point(69,0),new PIXI.Point(135,38),new PIXI.Point(135,118),new PIXI.Point(69,155),new PIXI.Point(0,117),new PIXI.Point(0,38)]),p.endFill(),p.position.x=i[s].x-p.width/2,p.position.y=i[s].y-p.height/2,p.rotation=i[s].rotation,this.hexagons.push({sprite:l,vector:p,spriteHolder:a,outputSprite:null}),this.shapeRotations[2].shapes.push(0)}},e.prototype.setGrid=function(e){this.trianglePuzzleContainer.visible=!1,this.squarePuzzleContainer.visible=!1,this.hexagonPuzzleContainer.visible=!1,this.currentShapeTypeIndex=e,this.scene.physicsManager.setGrid(e),this.inner.getSprite("mayan-madness/puzzle-outline-triangle").alpha=0,this.inner.getSprite("mayan-madness/puzzle-outline-square").alpha=0,this.inner.getSprite("mayan-madness/puzzle-outline-hexagon").alpha=0;var t,i=this.grid[e].positions,s=1+Math.round(this.scene.currentLevel/15*i.length);s>i.length&&(s=i.length),(t=s+2)>i.length&&(t=i.length);for(var o=Game.getRandom(s,t,!0),a=[],r=0;r<i.length;r++)r<o?a.push(!0):a.push(!1);this.scene.shuffleArray(a);var n=Game.getRandom(1,5,!0),h=this.scene.currentLevel/15;h>1&&(h=1);var l=Game.getRandom(-Math.PI*h,Math.PI*h),p=[10027008,39168,153][Game.getRandom(0,2,!0)],c=["easy","medium","hard"],d=Math.round(this.scene.currentLevel/10);d>2&&(d=2);var u=c[d];switch(e){case 0:this.trianglePuzzleContainer.visible=!0;for(r=0;r<i.length;r++){this.currentShapeType="triangle",this.currentShapeContainer=this.trianglePuzzleContainer,this.currentShapes=this.triangles,this.setGlyphInside(r,n,l,p,u),this.inner.getSprite("mayan-madness/puzzle-outline-triangle").alpha=1;g=1==a[r]?Game.getRandom(1,this.allowedShapeRotations[e].rotations.length-2,!0):0,this.triangles[r].spriteHolder.rotation=this.allowedShapeRotations[e].rotations[g],this.shapeRotations[e].shapes[r]=g}break;case 1:this.squarePuzzleContainer.visible=!0;for(r=0;r<i.length;r++){this.currentShapeType="square",this.currentShapeContainer=this.squarePuzzleContainer,this.currentShapes=this.squares,this.setGlyphInside(r,n,l,p,u),this.inner.getSprite("mayan-madness/puzzle-outline-square").alpha=1;g=1==a[r]?Game.getRandom(1,this.allowedShapeRotations[e].rotations.length-1,!0):0,this.squares[r].spriteHolder.rotation=this.allowedShapeRotations[e].rotations[g],this.shapeRotations[e].shapes[r]=g}break;case 2:this.hexagonPuzzleContainer.visible=!0;for(r=0;r<i.length;r++){this.currentShapeType="hexagon",this.currentShapeContainer=this.hexagonPuzzleContainer,this.currentShapes=this.hexagons,this.setGlyphInside(r,n,l,p,u),this.inner.getSprite("mayan-madness/puzzle-outline-hexagon").alpha=1;var g;g=1==a[r]?Game.getRandom(1,this.allowedShapeRotations[e].rotations.length-1,!0):0,this.hexagons[r].spriteHolder.rotation=this.allowedShapeRotations[e].rotations[g],this.shapeRotations[e].shapes[r]=g}}var m=Game.displayStore.getSprite("mayan-madness/glyph-"+u+"-"+n);m.rotation=l,m.tint=p,m.alpha=.75,m.blendMode=PIXI.BLEND_MODES.MULTIPLY,m.position.x=-7,m.scale.x=m.scale.y=.3;for(var y=this.hintHolder.getContainer("mayan-madness/hint-glyph-holder");y.children.length>0;)Game.displayStore.returnPooledItem(y.getChildAt(0)),y.removeChildAt(0);y.addChild(m)},e.prototype.setGlyphInside=function(e,t,i,s,o){var a=this.currentShapes[e],r=Game.displayStore.getSprite("mayan-madness/glyph-"+o+"-"+t);for("square"==this.currentShapeType&&(r.scale.x=r.scale.y=1.25),r.position.x=-this.currentShapeContainer.position.x,r.position.y=-this.currentShapeContainer.position.y-30,r.rotation=i,r.tint=s,r.alpha=.75,r.mask=a.vector,r.blendMode=PIXI.BLEND_MODES.MULTIPLY;a.spriteHolder.children.length>0;)a.spriteHolder.removeChildAt(0);a.spriteHolder.addChild(a.sprite),a.spriteHolder.addChild(r),a.spriteHolder.addChild(a.vector),this.currentShapeContainer.addChild(a.spriteHolder);var n=new PIXI.Point,h=new PIXI.Point,l=new PIXI.Point;n.x=a.sprite.position.x-a.sprite.width/2,l.x=a.sprite.position.x,h.x=-a.sprite.width/2,l.y=a.sprite.position.y,"triangle"!=this.currentShapeType?(n.y=a.sprite.position.y-a.sprite.height/2,h.y=-a.sprite.height/2):0==a.sprite.rotation?(n.y=a.sprite.position.y-.666*a.sprite.height,h.y=.666*-a.sprite.height):(n.y=a.sprite.position.y-.333*a.sprite.height,h.y=.333*-a.sprite.height);var p,c,d=Game.displayStore.getRenderTexture("mayan-madness/puzzle-texture",a.sprite.width,a.sprite.height,"mayan-madness-assets",!1);c=d.renderTexture,p=d.outputSprite;var u=new PIXI.Transform;for(a.spriteHolder.position.x=-n.x,a.spriteHolder.position.y=-n.y,u.position.x=n.x,u.position.y=n.y,Game.renderer.render(a.spriteHolder,c,!0),(p=new Sprite(c)).alpha=1,r.mask=null,a.spriteHolder.position.x=l.x,a.spriteHolder.position.y=l.y,p.position.x+=h.x,p.position.y+=h.y,this.currentShapes[e].outputSprite&&(this.currentShapes[e].outputSprite.destroyRenderTexture(),this.currentShapes[e].outputSprite=null),this.currentShapes[e].outputSprite=p;a.spriteHolder.children.length>0;)a.spriteHolder.removeChildAt(0);a.spriteHolder.addChild(p),Game.displayStore.returnPooledItem(r)},e.prototype.autoComplete=function(){this.shapeTimeline=this.scene.killTween(this.shapeTimeline),this.shapeTimeline=new TimelineMax,this.allowInteraction=!1;for(var e=0;e<this.currentShapes.length;e++)this.shapeTimeline.add(TweenMax.to(this.currentShapes[e].spriteHolder,.3,{rotation:2*Math.PI,ease:Power3.easeOut}),e/20);this.shapeTimeline.call(function(){this.allowInteraction=!0,this.close()},null,this)},e.prototype.pause=function(){this.scene.pauseResumeTween(this.openTimeline,"pause"),this.scene.pauseResumeTween(this.closeTimeline,"pause"),this.scene.pauseResumeTween(this.shapeTimeline,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.openTimeline,"resume"),this.scene.pauseResumeTween(this.closeTimeline,"resume"),this.scene.pauseResumeTween(this.shapeTimeline,"resume")},e.prototype.destroy=function(){this.openTimeline=this.scene.killTween(this.openTimeline),this.closeTimeline=this.scene.killTween(this.closeTimeline),this.shapeTimeline=this.scene.killTween(this.shapeTimeline);for(e=0;e<this.hexagons.length;e++)Game.displayStore.returnPooledItem(this.hexagons[e].sprite),Game.displayStore.returnPooledItem(this.hexagons[e].spriteHolder);for(e=0;e<this.squares.length;e++)Game.displayStore.returnPooledItem(this.squares[e].sprite),Game.displayStore.returnPooledItem(this.squares[e].spriteHolder);for(var e=0;e<this.triangles.length;e++)Game.displayStore.returnPooledItem(this.triangles[e].sprite),Game.displayStore.returnPooledItem(this.triangles[e].spriteHolder)},e}(),MayanMadnessTimer=function(){function e(e){this.scene=e,this.game=e.game,this.started=!1,this.time=0,this.paused=!1,this.timeText=Game.displayStore.getBitmapText("timer-font"),this.timeText.scale.x=this.timeText.scale.y=.55,this.timeText.text=this.convertSecondsToTime(this.time),this.timeText.position.x=-this.timeText.width/2,this.timeText.tint=16777215,this.container=Game.displayStore.getContainer("mayan-madness/timer-holder"),this.container.position.x=512,this.container.position.y=10,this.timerInner=this.container.getContainer("mayan-madness/timer-inner"),this.timerIcon=this.timerInner.getSprite("mayan-madness/timer-icon"),this.timerIcon.position.y=0,this.timerInner.addChild(this.timeText),this.timeText.position.x=this.timerIcon.position.x+30,this.timeText.position.y=this.timerIcon.position.y-5,this.timerInner.position.x=-60,this.timerInner.position.y=this.container.height/4}return e.prototype.start=function(){this.started=!0},e.prototype.addTime=function(e){function t(){this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.time<s?(this.time++,this.timeText.text=this.convertSecondsToTime(this.time),this.timerTimeline.call(t,null,this,i)):(this.timeText.tint=16777215,this.timerTimeline.call(this.tickTime,null,this,"+=1"))}if(0!=this.started){this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.timeText.tint=2873391;var i=.04;this.timerTimeline.call(t,null,this,i);var s=this.time+e;this.time}},e.prototype.pause=function(){this.scene.pauseResumeTween(this.timerTimeline,"pause"),this.paused=!0},e.prototype.resume=function(){this.scene.pauseResumeTween(this.timerTimeline,"resume"),this.paused=!1},e.prototype.convertSecondsToTime=function(e){var t=Math.floor(e/60),i=Math.ceil(e%60),s=String(t),o=String(i);return i<10&&(o="0"+i),e%60%1==0?s+":"+o:s+" "+o},e.prototype.destroy=function(){this.timerTimeline=this.scene.killTween(this.timerTimeline),this.destroyed=!0},e.prototype.tickTime=function(){1!=this.destroyed&&1!=this.scene.paused&&(this.time>0?(this.time-=.5,this.timeText.text=this.convertSecondsToTime(this.time),this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.timerTimeline.call(this.tickTime,null,this,.5),this.time,this.time<=5&&(this.timeText.tint=16711680)):this.scene.checkGameOver())},e}(),TreeTopGladiatorsPhysicsManager=function(){function e(e){this.physicsEnabled=!0,this.resizeRatio=1,this.scene=e}return e.prototype.initPhysicsWorld=function(){this.world=new p2.World({gravity:[0,-500]}),this.world.broadphase=new p2.NaiveBroadphase(1),this.powerUpOn=!1,this.collisionGroupPodLeft=Math.pow(2,0),this.collisionGroupPodRight=Math.pow(2,1),this.collisionGroupPodArmLeft=Math.pow(2,2),this.collisionGroupPodArmRight=Math.pow(2,3),this.collisionGroupBlank=Math.pow(2,4),this.collisionGroupHeadLeft=Math.pow(2,5),this.collisionGroupHeadRight=Math.pow(2,6),this.collisionGroupImpactParticle=Math.pow(2,7),this.collisionGroupImpactPlane=Math.pow(2,8),this.collisionGroupTangled=Math.pow(2,9),this.particlePlaneBody=new p2.Body({mass:0,position:[0,Game.stageHeight-650]}),this.particlePlaneShape=new p2.Plane,this.particlePlaneShape.collisionGroup=this.collisionGroupImpactPlane,this.particlePlaneShape.collisionMask=this.collisionGroupImpactParticle,this.particlePlaneBody.addShape(this.particlePlaneShape),this.world.addBody(this.particlePlaneBody);var e=this;this.world.on("beginContact",function(t){e.checkCollision(e,t)}),this.world.on("endContact",function(e){}),this.world.on("postStep",function(e){}),this.physicsEnabled=!0},e.prototype.checkCollision=function(e,t){t.bodyA!=e.particlePlaneBody?t.bodyB!=e.particlePlaneBody?t.contactEquations[0]&&e.scene.handlePugilHit(t.bodyA,t.bodyB,t.contactEquations[0].contactPointB):e.scene.resetImpactParticle(t.bodyA):e.scene.resetImpactParticle(t.bodyB)},e.prototype.addBodyToWorld=function(e){this.world.addBody(e)},e.prototype.removeBodyFromWorld=function(e){this.world.removeBody(e)},e.prototype.removeConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.addConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.removeSpringFromWorld=function(e){this.world.removeSpring(e)},e.prototype.addSpringToWorld=function(e){this.world.addSpring(e)},e.prototype.resizeElements=function(e,t){this.canvasHeight=t,this.canvasWidth=e,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},e.prototype.activatePowerUpEffect=function(){this.powerUpOn=!0},e.prototype.deactivatePowerUpEffect=function(){this.powerUpOn=!1},e.prototype.stepPhysics=function(){0!=this.physicsEnabled&&this.world&&this.world.step(1/30)},e.prototype.getImpactParticle=function(){var e=new p2.Body({mass:Game.getRandom(.1,.6)}),t=new p2.Circle({radius:2});return e.addShape(t),e.damping=Game.getRandom(.1,.4),t.collisionGroup=this.collisionGroupImpactParticle,t.collisionMask=this.collisionGroupImpactPlane,{body:e,shape:t}},e.prototype.getPodPhysicsElements=function(e){var t=new p2.Body({mass:2}),i=new p2.Circle({radius:110});"left"==e?(i.collisionGroup=this.collisionGroupPodLeft,i.collisionMask=this.collisionGroupPodArmRight):"right"==e&&(i.collisionGroup=this.collisionGroupPodRight,i.collisionMask=this.collisionGroupPodArmLeft),t.damping=.1,t.angularDamping=.5,t.addShape(i);var s=new p2.Body({mass:0}),o=new p2.Box({width:200,height:40});s.addShape(o);var a=new p2.LinearSpring(s,t,{restLength:300,stiffness:100,damping:8,localAnchorA:[0,0],localAnchorB:[0,0]}),r=new p2.Body({mass:.1}),n=new p2.Box({width:66,height:50});r.addShape(n),r.damping=.5,r.angularDamping=.99,n.collisionGroup=this.collisionGroupPodArmHinge,n.collisionMask=this.collisionGroupBlank;var h=new p2.Body({mass:.2}),l=new p2.Box({width:350,height:71});h.addShape(l),h.damping=.99,"left"==e?(l.collisionGroup=this.collisionGroupPodArmLeft,l.collisionMask=this.collisionGroupPodRight):"right"==e&&(l.collisionGroup=this.collisionGroupPodArmRight,l.collisionMask=this.collisionGroupPodLeft);var p,c,d,u;"left"==e?(p=-30,u=40,c=55,d=-55):"right"==e&&(p=30,u=-40,c=55,d=-55);var g=new p2.RevoluteConstraint(r,t,{collideConnected:!1,localPivotA:[0,0],localPivotB:[p,-40]});g.enableMotor();var m=new p2.PrismaticConstraint(r,h,{collideConnected:!1,localAnchorA:[0,0],localAnchorB:[0,0],upperLimit:c,lowerLimit:d,localAxisA:[1,0]}),y=new p2.Body({mass:.1}),f=new p2.Circle({radius:40});"left"==e?f.collisionGroup=this.collisionGroupHeadLeft:"right"==e&&(f.collisionGroup=this.collisionGroupHeadRight),y.addShape(f);var b=new p2.LockConstraint(y,t,{collideConnected:!1,localOffsetB:[u,-100]});return b.setStiffness(14),this.world.addBody(t),this.world.addBody(s),this.world.addBody(r),this.world.addBody(h),this.world.addSpring(a),this.world.addConstraint(g),this.world.addConstraint(m),this.world.addBody(y),this.world.addConstraint(b),{podBody:t,podShape:i,runnerBody:s,runnerShape:o,spring:a,podHingeBody:r,podHingeShape:n,podHingeConstraint:g,podPugilBody:h,podPugilShape:l,podPugilConstraint:m,characterHeadBody:y,characterHeadShape:f,characterHeadMount:b}},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angle=0,e.velocity=[0,0],e.setZeroForce()},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.world.clear(),this.world=null},e}(),TreeTopGladiatorsBackgroundManager=function(){function e(e,t){this.scene=e,this.mainContainerRef=t,this.leafCounter=0,this.leafCounterLimit=60,this.targetVine1Rotation=.5,this.targetVine2Rotation=.5,this.leafContainer=Game.displayStore.getContainer("tree-top-gladiators/leaf-container"),this.leafArray=new Array;for(var i=0;i<30;i++){var s=Game.displayStore.getSprite("tree-top-gladiators/leaf");this.leafArray.push({sprite:s,Active:!1,rotationDir:Game.getRandom(Game.getRandom(-.08,-.04),Game.getRandom(.04,.08)),dropSpeed:Game.getRandom(1,2)}),this.leafContainer.addChild(this.leafArray[i].sprite)}this.leafColours=new Array,this.leafColours.push({colour:2448710}),this.leafColours.push({colour:3127668}),this.leafColours.push({colour:943161}),this.mainContainerStartPos=280,this.mainContainerEndPos=0,this.backStartPos=50,this.midStartPos=120,this.foreStartPos=600,this.backEndPos=0,this.midEndPos=20,this.foreEndPos=400,this.backgroundRearContainer=Game.displayStore.getContainer("tree-top-gladiators/background-rear-holder"),this.backgroundMidContainer=Game.displayStore.getContainer("tree-top-gladiators/background-mid-holder"),this.backgroundForeContainer=Game.displayStore.getContainer("tree-top-gladiators/background-fore-holder"),this.jungleLayerTreesFore=Game.displayStore.getSprite("tree-top-gladiators/jungle-layer-fore"),this.jungleLayerTreesMidTop=Game.displayStore.getSprite("tree-top-gladiators/jungle-layer-mid-top"),this.jungleLayerTreesForeTop=Game.displayStore.getSprite("tree-top-gladiators/jungle-layer-fore-top"),this.jungleLayerTreesMid=Game.displayStore.getSprite("tree-top-gladiators/jungle-layer-mid"),this.jungleLayerTreesBackLeft=Game.displayStore.getSprite("tree-top-gladiators/jungle-layer-back-0"),this.jungleLayerTreesBackRight=Game.displayStore.getSprite("tree-top-gladiators/jungle-layer-back-0"),this.jungleLayerTreesMidTop.position.y=-270,this.jungleLayerTreesForeTop.position.y=-880,this.tempWhiteLayer=Game.displayStore.getSprite("tree-top-gladiators/temp-white-bg-layer"),this.tempWhiteLayer.width=Game.stageWidth,this.tempWhiteLayer.height=1400,this.tempWhiteLayer.position.y=-300,this.tempWhiteLayer.alpha=.05,this.jungleLayerTreesBackRight.scale.x=-1,this.jungleLayerTreesBackRight.position.x=Game.stageWidth,this.backgroundForeContainer.addChild(this.jungleLayerTreesFore),this.backgroundForeContainer.addChild(this.jungleLayerTreesForeTop),this.backgroundMidContainer.addChild(this.jungleLayerTreesMidTop),this.backgroundMidContainer.addChild(this.jungleLayerTreesMid),this.backgroundRearContainer.addChild(this.jungleLayerTreesBackLeft),this.backgroundRearContainer.addChild(this.jungleLayerTreesBackRight),this.backgroundMidContainer.addChild(this.leafContainer),this.mainContainerRef.addChild(this.backgroundRearContainer),this.mainContainerRef.addChild(this.backgroundMidContainer),this.mainContainerRef.addChild(this.backgroundForeContainer),this.mainContainerRef.addChild(this.tempWhiteLayer),this.backgroundRearContainer.position.y=this.backStartPos,this.backgroundMidContainer.position.y=this.midStartPos,this.backgroundForeContainer.position.y=this.foreStartPos,this.mainContainerRef.position.y=this.mainContainerStartPos,this.positionStartLeaves(15)}return e.prototype.startPanLevelDown=function(){this.startPanTimeline=this.scene.killTween(this.startPanTimeline),this.startPanTimeline=new TimelineMax({delay:1}),this.startPanTimeline.add([TweenMax.to(this.mainContainerRef.position,3,{y:this.mainContainerEndPos,ease:Quad.easeOut}),TweenMax.to(this.backgroundRearContainer.position,3,{y:this.backEndPos,ease:Quad.easeOut}),TweenMax.to(this.backgroundMidContainer.position,3,{y:this.midEndPos,ease:Quad.easeOut}),TweenMax.to(this.backgroundForeContainer.position,3,{y:this.foreEndPos,ease:Quad.easeOut})])},e.prototype.startNewRound=function(){this.resetRoundTimeline=this.scene.killTween(this.resetRoundTimeline),this.resetRoundTimeline=new TimelineMax,this.resetRoundTimeline.add([TweenMax.to(this.mainContainerRef.position,3,{y:this.mainContainerStartPos,ease:Quad.easeOut}),TweenMax.to(this.backgroundRearContainer.position,3,{y:this.backStartPos,ease:Quad.easeOut}),TweenMax.to(this.backgroundMidContainer.position,3,{y:this.midStartPos,ease:Quad.easeOut}),TweenMax.to(this.backgroundForeContainer.position,3,{y:this.foreStartPos,ease:Quad.easeOut})],0),this.removeSisterSound=TweenMax.delayedCall(2,function(){Game.playSound("tree-top-gladiators/crank-2.mp3",.2)},null,this),this.resetRoundTimeline.add([TweenMax.to(this.mainContainerRef.position,3,{y:this.mainContainerEndPos,ease:Quad.easeOut}),TweenMax.to(this.backgroundRearContainer.position,3,{y:this.backEndPos,ease:Quad.easeOut}),TweenMax.to(this.backgroundMidContainer.position,3,{y:this.midEndPos,ease:Quad.easeOut}),TweenMax.to(this.backgroundForeContainer.position,3,{y:this.foreEndPos,ease:Quad.easeOut})],5)},e.prototype.dropLeaf=function(){for(var e=0;e<this.leafArray.length;e++)if(0==this.leafArray[e].Active){Game.playSound("tree-top-gladiators/leaf.mp3",.05);var t=this.leafArray[e];return t.sprite.position.x=Game.getRandom(0,Game.stageWidth),t.sprite.position.y=Game.getRandom(-100,-200),t.sprite.rotation=Game.getRandom(0,2*Math.PI),t.Active=!0,t.sprite.scale.x=t.sprite.scale.y=Game.getRandom(.3,1),void(t.sprite.tint=this.leafColours[Game.getRandom(0,2,!0)].colour)}},e.prototype.positionStartLeaves=function(e){for(var t=0;t<e;t++)if(0==this.leafArray[t].Active){var i=this.leafArray[t];i.sprite.position.x=Game.getRandom(0,Game.stageWidth),i.sprite.position.y=Game.getRandom(-200,600),i.sprite.rotation=Game.getRandom(0,2*Math.PI),i.Active=!0,i.sprite.scale.x=i.sprite.scale.y=Game.getRandom(.3,1),i.sprite.tint=this.leafColours[Game.getRandom(0,2,!0)].colour}},e.prototype.tick=function(){for(var e=0;e<this.leafArray.length;e++)if(1==this.leafArray[e].Active){var t=this.leafArray[e];t.sprite.position.y+=t.dropSpeed,t.sprite.rotation-=t.rotationDir,t.sprite.position.y>=600&&(t.Active=!1)}if(++this.leafCounter>=this.leafCounterLimit)return this.dropLeaf(),this.leafCounter=0,void(this.leafCounterLimit=Game.getRandom(60,90,!0))},e.prototype.pause=function(){this.scene.pauseResumeTween(this.startPanTimeline,"pause"),this.scene.pauseResumeTween(this.resetRoundTimeline,"pause"),this.scene.pauseResumeTween(this.removeSisterSound,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.startPanTimeline,"resume"),this.scene.pauseResumeTween(this.resetRoundTimeline,"resume"),this.scene.pauseResumeTween(this.removeSisterSound,"resume")},e.prototype.destroy=function(){this.startPanTimeline=this.scene.killTween(this.startPanTimeline),this.resetRoundTimeline=this.scene.killTween(this.resetRoundTimeline),this.removeSisterSound=this.scene.killTween(this.removeSisterSound),Game.displayStore.returnPooledItem(this.jungleLayerTreesBackLeft),Game.displayStore.returnPooledItem(this.jungleLayerTreesBackRight);for(var e=0;e<this.leafArray.length;e++)Game.displayStore.returnPooledItem(this.leafArray[e].sprite)},e}(),TreeTopGladiatorsInputManager=function(){function e(e,t){this.mainContainerRef=t,this.keyboardMode=!1,this.scene=e,this.blankInput=Game.displayStore.getSprite("tree-top-gladiators/blank-input"),this.blankInput.width=Game.stageWidth,this.blankInput.height=Game.stageHeight,this.scene.container.addChild(this.blankInput),this.inputDownPosOrig=new PIXI.Point(0,0),this.inputDownPosMove=new PIXI.Point(0,0),this.setUpHitArea(this.blankInput),this.storedDragDiffX=0,this.storedDragDiffY=0,this.currentDragInputDifferenceX=0,this.currentDragInputDifferenceY=0,this.lastDragInputDifferenceX=0,this.lastDragInputDifferenceY=0,this.mouseDown=!1}return e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mousemove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t)}),e.on("mouseupoutside",function(e){t.inputUp(t)})):(e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchmove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t)}))},e.prototype.inputDown=function(e,t){0!=e.scene.getRoundStarted()&&(e.mouseDown=!0,e.endKeyboardMode(e),e.scene.newClickUnlock(),e.inputDownPosOrig.x=t.x,e.inputDownPosOrig.y=t.y,e.inputDownPosMove.x=t.x,e.inputDownPosMove.y=t.y,e.currentDragInputDifferenceX=e.storedDragDiffX,e.currentDragInputDifferenceY=e.storedDragDiffY)},e.prototype.inputUp=function(e){e.mouseDown=!1,e.storedDragDiffX=e.currentDragInputDifferenceX,e.storedDragDiffY=e.currentDragInputDifferenceY},e.prototype.inputMove=function(e,t){0!=e.mouseDown&&(e.inputDownPosMove.y=t.y,e.inputDownPosMove.x=t.x,e.currentDragInputDifferenceX=e.storedDragDiffX+(e.inputDownPosMove.x-e.inputDownPosOrig.x),e.currentDragInputDifferenceY=e.storedDragDiffY+(e.inputDownPosMove.y-e.inputDownPosOrig.y))},e.prototype.upKeyDown=function(){},e.prototype.downKeyDown=function(){},e.prototype.upKeyUp=function(){},e.prototype.downKeyUp=function(){},e.prototype.startKeyboardMode=function(){this.keyboardMode=!0},e.prototype.endKeyboardMode=function(e){1==e.keyboardMode&&(e.storedDragDiffX=e.scene.getInputDiffX(),e.storedDragDiffY=0),e.keyboardMode=!1},e.prototype.tick=function(){0!=this.mouseDown&&0!=this.scene.getRoundStarted()&&(this.currentDragInputDifferenceX<this.lastDragInputDifferenceX&&(0==this.scene.getRunnerLockedLeft("linc")?this.lastDragInputDifferenceX=this.currentDragInputDifferenceX:this.currentDragInputDifferenceX=this.lastDragInputDifferenceX),this.currentDragInputDifferenceX>this.lastDragInputDifferenceX&&(0==this.scene.getRunnerLockedRight("linc")?this.lastDragInputDifferenceX=this.currentDragInputDifferenceX:this.currentDragInputDifferenceX=this.lastDragInputDifferenceX),this.scene.moveRunner("linc",this.currentDragInputDifferenceX),this.currentDragInputDifferenceY<this.lastDragInputDifferenceY&&(0==this.scene.getRopeLockedUp("linc")?this.lastDragInputDifferenceY=this.currentDragInputDifferenceY:this.currentDragInputDifferenceY=this.lastDragInputDifferenceY),this.currentDragInputDifferenceY>this.lastDragInputDifferenceY&&(0==this.scene.getRopeLockedDown("linc")?this.lastDragInputDifferenceY=this.currentDragInputDifferenceY:this.currentDragInputDifferenceY=this.lastDragInputDifferenceY),this.scene.activateRope("linc",this.currentDragInputDifferenceY))},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.blankInput.removeAllListeners()},e}(),TreeTopGladiatorPod=function(){function e(e,t,i){this.scene=e,this.podID=i,this.forcedFireCooldownOn=!1,this.forcedFireCooldownCount=0,this.forcedFireCooldownLimit=0,this.mainHolderRef=t,this.ropeSpacing=40,this.powerUpSpinSpeed=12,this.powerUpOn=!1,this.crossedOverPods=!1,this.girderTopStartPos=0,this.girderTopEndPos=0,this.runnerLockedLeft=!1,this.runnerLockedRight=!1,this.ropeLockedUp=!1,this.ropeLockedDown=!1,this.landedPugilHit=!1,this.changeHandAngleCount=0,this.changeHandAngleCountLimit=Game.getRandom(10,60,!0),this.handLeftTargetAngle=0,this.handRightTargetAngle=0,this.offstageForce=10,this.enemyRopeLength=0,this.handsEaseAmount=5,this.popPugilCooldownLock=!1,this.popPugilCooldownCount=0,this.popPugilCooldownCountLimit=25,this.keyboardRunnerMoveAmount=0,this.keyboardRopeMoveAmount=0,this.lastKeyboardRunnerMoveAmount=0,this.lastKeyboardRopeMoveAmount=0,this.inputDiffX=0,this.inputDiffY=0,this.targetRopeLength=0,this.targetRunnerPos=0,this.inputDiffKeyboardRunner=0,this.runnerMotionEase=5,this.ropeLengthEase=5,this.hitRecoilForce=500,this.endPopPugilCount=0,this.endPopPugilCountLimit=10,this.armRetractedRadius=-45,this.armExtendedRadius=45,this.armExtended=!1,this.armPosForcePop=20,this.armPosForceBack=10,this.keyboardRopeActive=!1,this.keyboardRunnerActive=!1,this.armForceLoc=[0,0],this.runnerMotionRange=180,this.rotateLevelEaseAmount=10,this.ropeLength=300,this.keyboardRunnerMotionSpeed=30,this.keyboardRopeMotionSpeed=20,this.armRotateForce=5}return e.prototype.buildPod=function(e,t){this.getPodPhysicsElements(e,t),this.offstagePos=t,this.ropeElementFront=Game.displayStore.getSprite("tree-top-gladiators/rope-element"),this.ropeElementRear=Game.displayStore.getSprite("tree-top-gladiators/rope-element"),this.girderTopRunner=Game.displayStore.getSprite("tree-top-gladiators/top-girder-runner"),this.girderRunnerWheel=Game.displayStore.getSprite("tree-top-gladiators/top-girder-wheel"),"left"==e?(this.ropeElementFront.position.x=this.runnerPhysicsBody.position[0]-this.ropeSpacing,this.ropeElementRear.position.x=this.runnerPhysicsBody.position[0]+this.ropeSpacing,this.armDefaultPos=0,this.girderTopEndPos=0,this.girderTopStartPos=-this.girderTopRunner.width,this.girderTopRunner.position.y=-10):"right"==e&&(this.ropeElementFront.position.x=this.runnerPhysicsBody.position[0]+this.ropeSpacing,this.ropeElementRear.position.x=this.runnerPhysicsBody.position[0]-this.ropeSpacing,this.armDefaultPos=0,this.girderTopEndPos=Game.stageWidth,this.girderTopStartPos=Game.stageWidth+this.girderTopRunner.width,this.girderTopRunner.position.y=-10,this.girderTopRunner.scale.x=-1),this.girderTopRunner.position.x=this.girderTopStartPos,this.girderRunnerWheel.position.x=this.ropeElementFront.position.x,this.girderRunnerWheel.position.y=15,this.girderRunnerWheel.scale.y=this.girderRunnerWheel.scale.x=1.1,this.ropeElementFront.position.y=Game.stageHeight-this.runnerPhysicsBody.position[1],this.ropeElementRear.position.y=Game.stageHeight-this.runnerPhysicsBody.position[1],this.runnerPos=t,this.ropeLengthLowerLimit=200,this.ropeLengthUpperLimit=550},e.prototype.bringInPod=function(){this.beginGameTimelineMax=this.scene.killTween(this.beginGameTimelineMax),this.beginGameTimelineMax=new TimelineMax,this.beginGameTimelineMax.add([TweenMax.to(this.girderTopRunner.position,2,{x:this.girderTopEndPos,ease:Sine.easeOut}),TweenMax.to(this,2,{runnerPos:this.beginRoundPos,ease:Sine.easeOut,delay:Game.getRandom(0,1)})])},e.prototype.resetPosParams=function(){var e;"linc"==this.podID?e=200:"sister"==this.podID&&(e=Game.stageWidth-200),this.inputDiffX=0,this.inputDiffY=0,this.resetEndRoundTimelineMax=this.scene.killTween(this.resetEndRoundTimelineMax),this.resetEndRoundTimelineMax=new TimelineMax,this.resetEndRoundTimelineMax.add([TweenMax.to(this,2,{targetRopeLength:300,ease:Sine.easeInOut}),TweenMax.to(this,2,{runnerPos:e,ease:Sine.easeInOut})],0),"sister"==this.podID&&(this.resetEndRoundTimelineMax.add([TweenMax.to(this.girderTopRunner.position,2,{x:this.girderTopStartPos,ease:Sine.easeOut}),TweenMax.to(this,2,{runnerPos:this.offstagePos,ease:Sine.easeOut})],2),this.resetEndRoundTimelineMax.call(this.swapSisterNextRound,null,this,4))},e.prototype.swapSisterNextRound=function(){"sister"==this.podID&&this.scene.sisterInvisible(),this.scene.getNewSister(),this.resetEndRoundTimelineMax=this.scene.killTween(this.resetEndRoundTimelineMax),this.bringInPod(),this.scene.newSisterStartRound()},e.prototype.addPodElements=function(){this.characterArmHolder.addChild(this.podBacking),this.characterHandLeft.position.x=this.handPositions[0][0],this.characterHandLeft.position.y=this.handPositions[0][1],this.characterHandRight.position.x=this.handPositions[1][0],this.characterHandRight.position.y=this.handPositions[1][1],this.mainHolderRef.addChild(this.ropeElementRear),"sister"==this.podID&&(this.podCharacterHead.position.x=0),this.mainHolderRef.addChild(this.girderTopRunner),this.mainHolderRef.addChild(this.girderRunnerWheel),this.mainHolderRef.addChild(this.characterArmHolder),"linc"==this.podID&&this.characterArmHolder.addChild(this.characterArms),this.mainHolderRef.addChild(this.podCharacterHead),this.characterHandHolder.addChild(this.characterHandLeft),this.characterHandHolder.addChild(this.characterHandRight),this.mainHolderRef.addChild(this.characterHandHolder),this.podHolder.addChild(this.podWindshield),this.podHolder.addChild(this.podBottom),this.mainHolderRef.addChild(this.podHolder),this.mainHolderRef.addChild(this.ropeElementFront),"linc"==this.podID&&(this.mainHolderRef.addChild(this.powerUpFrames),this.mainHolderRef.addChild(this.lincHitFrames)),this.mainHolderRef.addChild(this.pugilStick),this.mainHolderRef.addChild(this.pugilHinge),this.podBottom.position.y=-30,this.podWindshield.position.y=30,this.characterHandLeft.rotation=this.handLeftBaseAngle,this.characterHandRight.rotation=this.handRightBaseAngle,this.podBacking.visible=!0},e.prototype.removePodElements=function(){this.podCharacterHead.visible=!1,this.podBacking.visible=!1,this.podHolder.visible=!1,this.characterHandHolder.removeChildren(),this.podHolder.removeChildren()},e.prototype.getPodPhysicsElements=function(e,t){var i=this.scene.getPodPhysicsElements(e);this.characterHeadBody=i.characterHeadBody,this.characterHeadShape=i.characterHeadShape,this.characterHeadMount=i.characterHeadMount,this.podPhysicsBody=i.podBody,this.podPhysicsShape=i.podShape,this.runnerPhysicsBody=i.runnerBody,this.runnerPhysicsShape=i.runnerShape,this.hangConstraint=i.constraint,this.hangSpring=i.spring,this.podPhysicsHingeBody=i.podHingeBody,this.podHingeConstraint=i.podHingeConstraint,this.podPugilBody=i.podPugilBody,this.podPugilShape=i.podPugilShape,this.podPhysicsBody.position[0]=t,this.runnerPhysicsBody.position[0]=t,this.podPhysicsBody.position[1]=Game.stageHeight-200,this.podPugilBody.position[0]=this.podPhysicsBody.position[0],this.podPugilBody.position[1]=this.podPhysicsBody.position[1],this.characterHeadBody.position[0]=this.podPhysicsBody.position[0],this.characterHeadBody.position[1]=this.podPhysicsBody.position[1]+100,this.podPhysicsHingeBody.position[0]=this.podPhysicsBody.position[0],this.podPhysicsHingeBody.position[1]=this.podPhysicsBody.position[1],this.runnerPhysicsBody.position[1]=Game.stageHeight-15},e.prototype.setCoolDownFireFrames=function(e){this.forcedFireCooldownLimit=e},e.prototype.movePodBetweenRounds=function(e){this.runnerPos=e},e.prototype.tick=function(e,t){1==this.forcedFireCooldownOn&&++this.forcedFireCooldownCount>=this.forcedFireCooldownLimit&&(this.forcedFireCooldownCount=0,this.forcedFireCooldownOn=!1),1==this.armExtended&&++this.endPopPugilCount>=this.endPopPugilCountLimit&&(this.armExtended=!1,this.landedPugilHit=!1),1==this.popPugilCooldownLock&&++this.popPugilCooldownCount>=this.popPugilCooldownCountLimit&&(this.popPugilCooldownLock=!1,this.popPugilCooldownCount=0,Game.playSound("tree-top-gladiators/primed.mp3",.05)),this.podHolder.position.x=this.podPhysicsBody.position[0],this.podHolder.position.y=Game.stageHeight-this.podPhysicsBody.position[1],this.podHolder.rotation=-this.podPhysicsBody.angle,this.characterArmHolder.position.x=this.podHolder.position.x,this.characterArmHolder.position.y=this.podHolder.position.y,this.characterArmHolder.rotation=this.podHolder.rotation,this.characterHandHolder.position.x=this.podHolder.position.x,this.characterHandHolder.position.y=this.podHolder.position.y,this.characterHandHolder.rotation=this.podHolder.rotation;var i;"linc"==this.podID&&(this.ropeElementFront.position.x=this.runnerPhysicsBody.position[0]-this.ropeSpacing,this.ropeElementRear.position.x=this.runnerPhysicsBody.position[0]+this.ropeSpacing,i=-20,this.powerUpFrames.position.x=this.pugilHinge.position.x,this.powerUpFrames.position.y=this.pugilHinge.position.y,this.lincHitFrames.position.x=this.podCharacterHead.position.x,this.lincHitFrames.position.y=this.podCharacterHead.position.y-50,this.lincHitFrames.rotation=this.podCharacterHead.rotation),"sister"==this.podID&&(this.ropeElementFront.position.x=this.runnerPhysicsBody.position[0]+this.ropeSpacing,this.ropeElementRear.position.x=this.runnerPhysicsBody.position[0]-this.ropeSpacing,i=20),this.girderRunnerWheel.position.x=this.ropeElementFront.position.x,this.girderRunnerWheel.rotation=this.ropeElementFront.position.x/10,this.ropeElementFront.rotation=-this.getAngle(this.girderRunnerWheel.position.x,this.girderRunnerWheel.position.y,this.podHolder.position.x+i,this.podHolder.position.y)+Math.PI/2,this.ropeElementFront.height=this.getDistance(this.girderRunnerWheel.position.x,this.girderRunnerWheel.position.y,this.podHolder.position.x+i,this.podHolder.position.y),this.ropeElementRear.rotation=this.ropeElementFront.rotation,this.ropeElementRear.height=this.ropeElementFront.height,this.pugilHinge.position.x=this.podPhysicsHingeBody.position[0],this.pugilHinge.position.y=Game.stageHeight-this.podPhysicsHingeBody.position[1],this.pugilHinge.rotation=-this.podPhysicsHingeBody.angle,this.podCharacterHead.position.x=this.characterHeadBody.position[0],this.podCharacterHead.position.y=Game.stageHeight-this.characterHeadBody.position[1],this.pugilStick.position.x=this.podPugilBody.position[0],this.pugilStick.position.y=Game.stageHeight-this.podPugilBody.position[1],this.pugilStick.rotation=-this.podPugilBody.angle;var s=10*(0-this.podPhysicsBody.angle);this.podPhysicsBody.angularVelocity+=(s-this.podPhysicsBody.angularVelocity)/this.rotateLevelEaseAmount,0==this.crossedOverPods&&(this.podCharacterHead.rotation=t/2),this.calculatePugilForcePos(),this.moveHands(),this.offStageManage(),this.moveRunnerManage(),this.activateRopeManage(),this.calculateKeyboardMovement()},e.prototype.setCrossedOverPods=function(e){this.crossedOverPods!=e&&(this.crossedOverPods=e,1==e?(this.podPhysicsShape.sensor=!0,this.podPugilShape.sensor=!0):(this.podPhysicsShape.sensor=!1,this.podPugilShape.sensor=!1))},e.prototype.newClickUnlock=function(){this.runnerLockedLeft=!1,this.runnerLockedRight=!1,this.ropeLockedUp=!1,this.ropeLockedDown=!1},e.prototype.changeHandAngles=function(){},e.prototype.moveHands=function(){},e.prototype.receiveDifficultyParams=function(e){},e.prototype.offStageManage=function(){if(0!=this.scene.getRoundStarted()){var e=[0,0],t=!1;this.podPhysicsBody.position[0]<0&&(e=[(0-this.podPhysicsBody.position[0])*this.offstageForce,0]),this.podPhysicsBody.position[0]>Game.stageWidth&&(e=[-(this.podPhysicsBody.position[0]-Game.stageWidth)*this.offstageForce,0]),this.podPhysicsBody.position[1]>Game.stageHeight&&(e=[0,-(this.podPhysicsBody.position[1]-Game.stageHeight)*this.offstageForce],"sister"==this.podID&&(t=!0)),1==t&&this.scene.opponentOffStageTop(),this.podPhysicsBody.applyForce(e)}},e.prototype.calculateKeyboardMovement=function(){0!=this.scene.getRoundStarted()&&(1==this.keyboardRopeActive&&(this.keyboardRopeMoveAmount<this.lastKeyboardRopeMoveAmount&&0==this.ropeLockedUp&&(this.inputDiffY+=this.keyboardRopeMoveAmount),this.keyboardRopeMoveAmount>this.lastKeyboardRopeMoveAmount&&0==this.ropeLockedDown&&(this.inputDiffY+=this.keyboardRopeMoveAmount)),1==this.keyboardRunnerActive&&(this.keyboardRunnerMoveAmount<this.lastKeyboardRunnerMoveAmount&&0==this.runnerLockedLeft&&(this.inputDiffX+=this.keyboardRunnerMoveAmount),this.keyboardRunnerMoveAmount>this.lastKeyboardRunnerMoveAmount&&0==this.runnerLockedRight&&(this.inputDiffX+=this.keyboardRunnerMoveAmount)))},e.prototype.moveRunnerManage=function(){this.targetRunnerPos=this.runnerPos+this.inputDiffX/2,1==this.scene.getRoundStarted()&&(this.targetRunnerPos<this.runnerPosLowerLimit?(this.targetRunnerPos=this.runnerPosLowerLimit,this.runnerLockedLeft=!0):this.targetRunnerPos>this.runnerPosUpperLimit?(this.targetRunnerPos=this.runnerPosUpperLimit,this.runnerLockedRight=!0):(this.runnerLockedLeft=!1,this.runnerLockedRight=!1)),this.runnerPhysicsBody.position[0]+=(this.targetRunnerPos-this.runnerPhysicsBody.position[0])/this.runnerMotionEase},e.prototype.activateRopeManage=function(){var e=Math.cos(this.ropeElementFront.rotation);this.targetRopeLength=this.ropeLength+e*this.inputDiffY,this.targetRopeLength<this.ropeLengthLowerLimit?(this.targetRopeLength=this.ropeLengthLowerLimit,this.ropeLockedUp=!0):this.targetRopeLength>this.ropeLengthUpperLimit?(this.targetRopeLength=this.ropeLengthUpperLimit,this.ropeLockedDown=!0):(this.ropeLockedUp=!1,this.ropeLockedDown=!1),this.hangSpring.restLength+=(this.targetRopeLength-this.hangSpring.restLength)/this.ropeLengthEase},e.prototype.getRunnerLockedLeft=function(){return this.runnerLockedLeft},e.prototype.getRunnerLockedRight=function(){return this.runnerLockedRight},e.prototype.getRopeLockedUp=function(){return this.ropeLockedUp},e.prototype.getRopeLockedDown=function(){return this.ropeLockedDown},e.prototype.getInputDiffX=function(){return this.inputDiffX},e.prototype.getInputDiffY=function(){return this.inputDiffY},e.prototype.popPugil=function(){1!=this.forcedFireCooldownOn&&1!=this.powerUpOn&&1!=this.armExtended&&1!=this.popPugilCooldownLock&&(Game.playSound("tree-top-gladiators/fire.mp3",.2),this.armExtended=!0,this.endPopPugilCount=0,this.popPugilCooldownCount=0,this.popPugilCooldownLock=!0)},e.prototype.calculatePugilForcePos=function(){var e,t,i=1;"sister"==this.podID&&(i=-1),1==this.armExtended?(e=this.armExtendedRadius+this.armDefaultPos,t=this.armPosForcePop):(e=this.armRetractedRadius+this.armDefaultPos,t=this.armPosForceBack),e*=i;var s=this.podPhysicsHingeBody.position[0]+Math.cos(this.podPhysicsHingeBody.angle)*e,o=this.podPhysicsHingeBody.position[1]+Math.sin(this.podPhysicsHingeBody.angle)*e,a=s-this.podPugilBody.position[0],r=o-this.podPugilBody.position[1];this.podPugilBody.applyForce([a*t,r*t])},e.prototype.activateRope=function(e){this.inputDiffY=e},e.prototype.moveRunner=function(e){this.inputDiffX=e},e.prototype.activateRopeKeyboard=function(e){var t;"up"==e?(t=-1,0==this.ropeLockedUp&&Game.playSound("tree-top-gladiators/rope.mp3",.4)):"down"==e&&(t=1,0==this.ropeLockedDown&&Game.playSound("tree-top-gladiators/rope.mp3",.4)),this.keyboardRopeMoveAmount=this.keyboardRopeMotionSpeed*t,this.keyboardRopeActive=!0},e.prototype.deactivateRopeKeyboard=function(){Game.stopSound("tree-top-gladiators/rope.mp3"),this.keyboardRopeActive=!1},e.prototype.activateRunnerKeyboard=function(e){var t;"left"==e?(t=-1,0==this.runnerLockedLeft&&(Game.playSound("tree-top-gladiators/spin-up.mp3",.05),TweenMax.delayedCall(.3,function(){Game.playSound("tree-top-gladiators/rolling.mp3",.05)},null,this))):"right"==e&&(t=1,0==this.runnerLockedRight&&(Game.playSound("tree-top-gladiators/spin-up.mp3",.05),TweenMax.delayedCall(.3,function(){Game.playSound("tree-top-gladiators/rolling.mp3",.05)},null,this))),this.keyboardRunnerMoveAmount=this.keyboardRunnerMotionSpeed*t,this.keyboardRunnerActive=!0},e.prototype.deactivateRunnerKeyboard=function(){this.keyboardRunnerActive=!1,TweenMax.delayedCall(.3,function(){Game.stopSound("tree-top-gladiators/rolling.mp3"),Game.playSound("tree-top-gladiators/spin-down.mp3",.05)},null,this)},e.prototype.getRunnerStatus=function(){return{currentRunnerPos:this.runnerPhysicsBody.position[0],targetRunnerPos:this.targetRunnerPos}},e.prototype.getRopeStatus=function(){return{currentRopeLength:this.hangSpring.restLength,targetRopeLength:this.targetRopeLength}},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.powerUpActivate=function(e){0==e&&(this.podHingeConstraint.setMotorSpeed(0),this.podPhysicsHingeBody.invMass=1/this.podPhysicsHingeBody.mass,this.podPhysicsHingeBody.invInertia=1/this.podPhysicsHingeBody.inertia,this.podPhysicsHingeBody.angle=0,this.podPhysicsHingeBody.velocity=[0,0],this.podPhysicsHingeBody.setZeroForce(),this.powerUpFrames.visible=!1,Game.stopSound("tree-top-gladiators/powerup.mp3"),this.podPugilBody.invMass=1/this.podPugilBody.mass,this.podPugilBody.invInertia=1/this.podPugilBody.inertia,this.podPugilBody.angle=0,this.podPugilBody.velocity=[0,0],this.podPugilBody.setZeroForce()),1==e&&(this.podHingeConstraint.setMotorSpeed(-this.powerUpSpinSpeed),this.powerUpFrames.visible=!0,Game.playSound("tree-top-gladiators/powerup.mp3",.5)),this.powerUpOn=e},e.prototype.getArmExtended=function(){return this.armExtended},e.prototype.getLandedPugilHit=function(){return this.landedPugilHit},e.prototype.getPugilAngle=function(){return this.podPhysicsHingeBody.angle},e.prototype.landedAPugilHit=function(){this.landedPugilHit=!0},e.prototype.recoilPod=function(e){var t;t=["tree-top-gladiators/swish-long-1.mp3","tree-top-gladiators/swish-long-2.mp3"],Game.playSound(t[Game.getRandom(0,1,!0)],1),this.podPhysicsBody.applyImpulse([e[0]*this.hitRecoilForce,e[1]*this.hitRecoilForce])},e.prototype.pause=function(){this.powerUpFrames&&this.powerUpFrames.stop(),this.scene.pauseResumeTween(this.resetEndRoundTimelineMax,"pause"),this.scene.pauseResumeTween(this.beginGameTimelineMax,"pause")},e.prototype.resume=function(){this.powerUpFrames&&this.powerUpFrames.play(),this.scene.pauseResumeTween(this.resetEndRoundTimelineMax,"resume"),this.scene.pauseResumeTween(this.beginGameTimelineMax,"resume")},e.prototype.destroy=function(){this.resetEndRoundTimelineMax=this.scene.killTween(this.resetEndRoundTimelineMax),this.beginGameTimelineMax=this.scene.killTween(this.beginGameTimelineMax),Game.displayStore.returnPooledItem(this.ropeElementFront),Game.displayStore.returnPooledItem(this.ropeElementRear),Game.displayStore.returnPooledItem(this.girderTopRunner),Game.displayStore.returnPooledItem(this.girderRunnerWheel),Game.stopSound("tree-top-gladiators/spin-down.mp3"),Game.stopSound("tree-top-gladiators/spin-up.mp3"),Game.stopSound("tree-top-gladiators/rolling.mp3"),Game.displayStore.returnPooledItem(this.powerUpFrames),Game.displayStore.returnPooledItem(this.lincHitFrames)},e}(),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),TreeTopGladiatorPodSister=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.buildPod=function(t,i){e.prototype.buildPod.call(this,t,i),this.sisterArray=new Array,this.expressionTimer=0,this.newAssetsReady=!1,this.sisterArray.push({id:0,name:"leni",available:!0,body:Game.displayStore.getSprite("tree-top-gladiators/pod-leni-body"),hair:Game.displayStore.getSprite("tree-top-gladiators/pod-leni-head-hair")}),this.sisterArray.push({id:1,name:"lana",available:!0,body:Game.displayStore.getSprite("tree-top-gladiators/pod-lana-body")}),this.sisterArray.push({id:2,name:"lori",available:!0,body:Game.displayStore.getSprite("tree-top-gladiators/pod-lori-body")}),this.sisterArray.push({id:3,name:"luna",available:!0,body:Game.displayStore.getSprite("tree-top-gladiators/pod-luna-body")}),this.sisterArray.push({id:4,name:"luan",available:!0,body:Game.displayStore.getSprite("tree-top-gladiators/pod-luan-body")}),this.sisterArray.push({id:5,name:"lynn",available:!0,body:Game.displayStore.getSprite("tree-top-gladiators/pod-lynn-body")}),this.sisterArray.push({id:6,name:"lucy",available:!0,body:Game.displayStore.getSprite("tree-top-gladiators/pod-lucy-body")}),this.sisterArray.push({id:7,name:"lola",available:!0,body:Game.displayStore.getSprite("tree-top-gladiators/pod-lola-body"),hair:Game.displayStore.getSprite("tree-top-gladiators/pod-lola-head-hair")}),this.sisterArray.push({id:8,name:"lisa",available:!0,body:Game.displayStore.getSprite("tree-top-gladiators/pod-lisa-body")}),this.sisterArray=this.shuffleArray(this.sisterArray),this.beginRoundPos=Game.stageWidth-200,this.handLeftBaseAngle=1,this.handRightBaseAngle=.5,this.handPositions=[[-20,-20],[-40,-20]],this.podHolder=Game.displayStore.getContainer("tree-top-gladiators/pod-holder-sister"),this.podBacking=Game.displayStore.getSprite("tree-top-gladiators/pod-backing-sister"),this.podBottom=Game.displayStore.getSprite("tree-top-gladiators/pod-bottom-sister"),this.podWindshield=Game.displayStore.getSprite("tree-top-gladiators/pod-sister-windshield"),this.pugilHinge=Game.displayStore.getSprite("tree-top-gladiators/pod-pugil-hinge-sister"),this.pugilStick=Game.displayStore.getSprite("tree-top-gladiators/pod-pugil-sister"),this.characterHandHolder=Game.displayStore.getContainer("tree-top-gladiators/pod-hand-holder-sister"),this.characterArmHolder=Game.displayStore.getContainer("tree-top-gladiators/pod-arm-holder-sister"),this.podBottom.position.y=-18,this.podWindshield.position.x=-30,this.podWindshield.position.y=15,this.podBacking.position.y=-14,this.podBacking.scale.x=.9,this.podHolder.position.x=Game.stageWidth/2+Game.stageWidth/4,this.podHolder.position.y=Game.stageHeight/2,this.runnerPosLowerLimit=this.podHolder.position.x-this.runnerMotionRange,this.runnerPosUpperLimit=this.podHolder.position.x+this.runnerMotionRange;for(var s=0;s<this.sisterArray.length;s++)this.sisterArray[s].body.visible=!1,this.sisterArray[s].hair&&(this.sisterArray[s].hair.visible=!1),this.characterArmHolder.addChild(this.sisterArray[s].body);this.assignNewSister(),e.prototype.addPodElements.call(this)},t.prototype.shuffleArray=function(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[i],e[i]=t;return e},t.prototype.assignNewSister=function(e){for(var t=0;t<this.sisterArray.length;t++){if(1==this.sisterArray[t].available)return this.currentSister=this.sisterArray[t].name,this.sisterArray[t].available=!1,this.sisterArray[t].body.visible=!0,this.sisterId=this.sisterArray[t].id,this.getAssets(this.sisterArray[t].name,e),void this.scene.setHealthBarFace();if(t==this.sisterArray.length-1)return void this.reenableAllSisters()}},t.prototype.reenableAllSisters=function(){for(var e=0;e<this.sisterArray.length;e++)this.sisterArray[e].available=!0;this.sisterArray=this.shuffleArray(this.sisterArray),this.assignNewSister(!0)},t.prototype.getAssets=function(e,t){for(i=0;i<this.sisterArray.length;i++)this.sisterArray[i].name==this.currentSister&&(this.sisterArray[i].body.visible=!0,this.sisterArray[i].hair&&(this.sisterArray[i].hair.visible=!0));this.podCharacterHead=Game.displayStore.getContainer("tree-top-gladiators/"+e+"-head-holder");for(i=0;i<this.sisterArray.length;i++)this.sisterArray[i].hair&&this.mainHolderRef.addChild(this.sisterArray[i].hair);switch(this.sisterHappy=this.podCharacterHead.getSprite("tree-top-gladiators/pod-"+e+"-happy"),this.sisterSad=this.podCharacterHead.getSprite("tree-top-gladiators/pod-"+e+"-sad"),this.sisterNeutral=this.podCharacterHead.getSprite("tree-top-gladiators/pod-"+e+"-neutral"),this.sisterSad.visible=!1,this.sisterHappy.visible=!1,this.sisterNeutral.visible=!0,e){case"lola":this.characterHandLeft=Game.displayStore.getSprite("tree-top-gladiators/pod-lola-hand-right"),this.characterHandRight=Game.displayStore.getSprite("tree-top-gladiators/pod-lola-hand-left");break;case"lucy":this.characterHandLeft=Game.displayStore.getSprite("tree-top-gladiators/pod-lucy-hand-right"),this.characterHandRight=Game.displayStore.getSprite("tree-top-gladiators/pod-lucy-hand-left");break;default:this.characterHandLeft=Game.displayStore.getSprite("tree-top-gladiators/pod-normal-hand-right"),this.characterHandRight=Game.displayStore.getSprite("tree-top-gladiators/pod-normal-hand-left")}if(1==t){for(var i=0;i<this.sisterArray.length;i++)this.sisterArray[i].name!=this.currentSister&&(this.sisterArray[i].body.visible=!1,this.sisterArray[i].hair&&(this.sisterArray[i].hair.visible=!1));this.characterArmHolder.addChild(this.podBacking),this.characterHandLeft.position.x=this.handPositions[0][0],this.characterHandLeft.position.y=this.handPositions[0][1],this.characterHandRight.position.x=this.handPositions[1][0],this.characterHandRight.position.y=this.handPositions[1][1],this.mainHolderRef.addChild(this.characterArmHolder),this.mainHolderRef.addChild(this.podCharacterHead),this.characterHandHolder.addChild(this.characterHandLeft),this.characterHandHolder.addChild(this.characterHandRight),this.mainHolderRef.addChild(this.characterHandHolder),this.podBacking.position.y=-14,this.podBacking.scale.x=.9,this.podHolder.addChild(this.podWindshield),this.podHolder.addChild(this.podBottom),this.mainHolderRef.addChild(this.podHolder),this.mainHolderRef.addChild(this.ropeElementFront),this.mainHolderRef.addChild(this.pugilStick),this.mainHolderRef.addChild(this.pugilHinge),this.podBottom.position.y=-30,this.podWindshield.position.y=30,this.characterHandLeft.rotation=this.handLeftBaseAngle,this.characterHandRight.rotation=this.handRightBaseAngle,this.podHolder.visible=!0,this.podCharacterHead.position.x=0}this.newAssetsReady=!0},t.prototype.sisterVisible=function(){this.podBacking.visible=!0,this.podCharacterHead.visible=!0},t.prototype.sisterInvisible=function(){this.podBacking.visible=!1,this.podCharacterHead.visible=!1},t.prototype.changeExpression=function(e){switch(e){case"sad":this.sisterSad.visible=!0,this.sisterHappy.visible=!1,this.sisterNeutral.visible=!1;break;case"happy":this.sisterSad.visible=!1,this.sisterHappy.visible=!0,this.sisterNeutral.visible=!1;break;case"neutral":this.sisterSad.visible=!1,this.sisterHappy.visible=!1,this.sisterNeutral.visible=!0}"neutral"!=e&&(this.expressionTimerActive=!0)},t.prototype.tick=function(t,i){if(e.prototype.tick.call(this,t,i),"leni"==this.currentSister||"lola"==this.currentSister)for(var s=0;s<this.sisterArray.length;s++)this.sisterArray[s].hair&&(this.sisterArray[s].hair.position.x=this.podCharacterHead.position.x,this.sisterArray[s].hair.position.y=this.podCharacterHead.position.y,this.sisterArray[s].hair.rotation=this.podCharacterHead.rotation);if(1!=this.crossedOverPods){var o=this.armRotateForce*(this.podHingeConstraint.angle-i);this.podHingeConstraint.setMotorSpeed(o),1==this.expressionTimerActive&&++this.expressionTimer>120&&(this.expressionTimerActive=!1,this.changeExpression("neutral"),this.expressionTimer=0)}else this.podHingeConstraint.setMotorSpeed(0)},t.prototype.moveHands=function(){e.prototype.moveHands.call(this);var t=Game.stageWidth-this.runnerPhysicsBody.position[0];this.characterHandRight.rotation=this.handRightBaseAngle-Math.sin(t/150),this.characterHandLeft.rotation=this.handLeftBaseAngle-Math.sin(this.targetRopeLength/150)},t.prototype.recoilPod=function(t){e.prototype.recoilPod.call(this,t),this.scene.sisterHit()},t.prototype.popPugil=function(){e.prototype.popPugil.call(this),this.forcedFireCooldownOn=!0},t.prototype.pause=function(){e.prototype.pause.call(this)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(TreeTopGladiatorPod),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),TreeTopGladiatorPodLinc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.buildPod=function(t,i){e.prototype.buildPod.call(this,t,i),this.handLeftBaseAngle=-.5,this.handRightBaseAngle=-1,this.beginRoundPos=200,this.lincHitFrames=Game.displayStore.getAnimatedSprite("tree-top-gladiators/spin-frames"),this.powerUpFrames=Game.displayStore.getAnimatedSprite("tree-top-gladiators/spin-frames"),this.powerUpFrames.blendMode=PIXI.BLEND_MODES.ADD,this.powerUpFrames.animationSpeed=.3,this.powerUpFrames.loop=!0,this.powerUpFrames.play(),this.powerUpFrames.visible=!1,this.powerUpFrames.alpha=.6,this.lincHitFrames.animationSpeed=.3,this.lincHitFrames.loop=!0,this.lincHitFrames.play(),this.lincHitFrames.visible=!1,this.lincHitFrames.tint=0,this.lincHitFrames.scale.x=.3,this.lincHitFrames.scale.y=.1,this.blinkCounter=0,this.blinkLimit=120,this.linHitCounter=0,this.expressionTimer=0,this.expressionTimerActive=!1,this.targetEyePosition=0,this.handPositions=[[40,-20],[10,-20]],this.podHolder=Game.displayStore.getContainer("tree-top-gladiators/pod-holder-linc"),this.podBacking=Game.displayStore.getSprite("tree-top-gladiators/pod-backing-linc"),this.podBottom=Game.displayStore.getSprite("tree-top-gladiators/pod-bottom-linc"),this.podWindshield=Game.displayStore.getSprite("tree-top-gladiators/pod-linc-windshield"),this.podCharacterHead=Game.displayStore.getContainer("tree-top-gladiators/linc-head-holder"),this.lincBlinc=this.podCharacterHead.getSprite("tree-top-gladiators/pod-head-linc-blink"),this.lincBlinc.visible=!1,this.hair=this.podCharacterHead.getSprite("tree-top-gladiators/pod-head-linc-hair"),this.hair.position.x=30,this.hair.position.y=-30,this.hairRotation=.5,this.hairTargetRotation=0,this.hair.rotation=-.5,this.lincEyes=this.podCharacterHead.getSprite("tree-top-gladiators/pod-head-linc-eyes"),this.lincEyes.position.x=15,this.lincEyes.position.y=-5,this.lincEyesHit=this.podCharacterHead.getSprite("tree-top-gladiators/pod-head-linc-eyes-hit"),this.lincEyesHit.position.x=10,this.lincEyesHit.position.y=-5,this.leftBrow=this.podCharacterHead.getSprite("tree-top-gladiators/pod-head-linc-brow-left"),this.rightBrow=this.podCharacterHead.getSprite("tree-top-gladiators/pod-head-linc-brow-right"),this.leftBrow.position.x=-15,this.leftBrow.position.y=-30,this.rightBrow.position.x=15,this.rightBrow.position.y=-45,this.currentExpression=new Array,this.currentExpression.push({expression:"neutral",active:!0,sprite:this.podCharacterHead.getSprite("tree-top-gladiators/pod-head-linc-mouth-neutral")}),this.currentExpression.push({expression:"sad",active:!1,sprite:this.podCharacterHead.getSprite("tree-top-gladiators/pod-head-linc-mouth-sad")}),this.currentExpression.push({expression:"happy",active:!1,sprite:this.podCharacterHead.getSprite("tree-top-gladiators/pod-head-linc-mouth-happy")}),this.currentExpression.push({expression:"gameover",active:!1,sprite:this.podCharacterHead.getSprite("tree-top-gladiators/pod-head-linc-mouth-gameover")}),this.currentExpression[0].sprite.visible=!0,this.currentExpression[1].sprite.visible=!1,this.currentExpression[2].sprite.visible=!1,this.currentExpression[3].sprite.visible=!1,this.lincMouth=this.podCharacterHead.getSprite("tree-top-gladiators/pod-head-linc-mouth-happy"),this.lincMouth.position.y=20,this.pugilHinge=Game.displayStore.getSprite("tree-top-gladiators/pod-pugil-hinge-linc"),this.pugilStick=Game.displayStore.getSprite("tree-top-gladiators/pod-pugil-linc"),this.characterArmHolder=Game.displayStore.getContainer("tree-top-gladiators/pod-arm-holder-linc"),this.characterArms=Game.displayStore.getSprite("tree-top-gladiators/pod-linc-arms"),this.characterHandLeft=Game.displayStore.getSprite("tree-top-gladiators/pod-hand-linc-left"),this.characterHandRight=Game.displayStore.getSprite("tree-top-gladiators/pod-hand-linc-right"),this.characterHandHolder=Game.displayStore.getContainer("tree-top-gladiators/pod-hand-holder-linc"),this.characterArms.position.x=-14,this.characterArms.position.y=-16,this.podBottom.position.y=-18,this.podWindshield.position.x=30,this.podWindshield.position.y=0,this.podBacking.position.y=-14,this.podBacking.scale.x=.9,this.lincEyesHit.visible=!1,this.lincEyes.visible=!0,this.podHolder.position.x=Game.stageWidth/2-Game.stageWidth/4,this.podHolder.position.y=Game.stageHeight/2,this.runnerPosLowerLimit=this.podHolder.position.x-this.runnerMotionRange,this.runnerPosUpperLimit=this.podHolder.position.x+this.runnerMotionRange,e.prototype.addPodElements.call(this)},t.prototype.activateRope=function(t){var i=t;0==Game.onDesktop&&(i*=3),e.prototype.activateRope.call(this,i)},t.prototype.changeExpression=function(e){for(var t=0;t<this.currentExpression.length;t++)t!=e&&(this.currentExpression[t].active=!1,this.currentExpression[t].sprite.visible=!1);1==e&&(this.lincEyes.visible=!1,this.lincEyesHit.visible=!0),0==e&&(this.lincEyes.visible=!0,this.lincEyesHit.visible=!1),this.currentExpression[e].active=!0,this.currentExpression[e].sprite.visible=!0,0!=e&&(this.expressionTimerActive=!0)},t.prototype.moveRunner=function(t){var i=t;0==Game.onDesktop&&(i*=3),e.prototype.moveRunner.call(this,i)},t.prototype.recoilPod=function(t){e.prototype.recoilPod.call(this,t),this.scene.lincHit()},t.prototype.tick=function(t,i){if(e.prototype.tick.call(this,t,i),++this.blinkCounter>this.blinkLimit&&(this.lincBlinc.visible=!0,this.blinkCounter>=this.blinkLimit+10&&(this.blinkCounter=0,this.blinkLimit=Game.getRandom(90,180,!0),this.lincBlinc.visible=!1)),this.hair.rotation<-.49?(this.hairRotation=.5,this.hairTargetRotation+=.01):this.hair.rotation>.49&&(this.hairRotation=-.5,this.hairTargetRotation-=-.01),this.hair.rotation=(this.hairRotation-this.hair.rotation)/10,t.podPhysicsBody.position[1]>this.podPhysicsBody.position[1]?(this.targetEyePosition=-10,this.lincEyes.position.y>this.targetEyePosition&&this.lincEyes.position.y--):(this.targetEyePosition=-5,this.lincEyes.position.y<this.targetEyePosition&&this.lincEyes.position.y++),this.leftBrow.position.y+=(this.lincEyes.position.y-25-this.leftBrow.position.y)/10,this.rightBrow.position.y+=(this.lincEyes.position.y-40-this.rightBrow.position.y)/10,1==this.expressionTimerActive&&++this.expressionTimer>120&&(this.expressionTimerActive=!1,this.changeExpression(0),this.expressionTimer=0),1==this.lincHitActive&&(this.linHitCounter++,this.lincHitFrames.visible=!0,this.linHitCounter>180&&(this.linHitCounter=0,this.lincHitFrames.visible=!1,this.lincHitActive=!1)),1!=this.powerUpOn){var s=this.armRotateForce*(this.podHingeConstraint.angle-i);this.podHingeConstraint.setMotorSpeed(s)}},t.prototype.moveHands=function(){e.prototype.moveHands.call(this),this.characterHandLeft.rotation=this.handLeftBaseAngle+Math.sin(this.runnerPhysicsBody.position[0]/150),this.characterHandRight.rotation=this.handRightBaseAngle+Math.sin(this.targetRopeLength/150)},t.prototype.pause=function(){e.prototype.pause.call(this)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(TreeTopGladiatorPod),TreeTopGladiatorsOpponentManager=function(){function e(e,t,i,s,o){this.scene=e,this.currentDifficultyIndex=0,this.changeDifficultyCount=0,this.changeDifficultyCountLimit=2,this.difficultyParams=new Array,this.ropeSoundPlaying=!1,this.difficultyParams.push({level:1,health:100,fireCoolDownFrames:60,pugilAggressiveness:.2,moveAggressiveness:.2,attackAggressiveness:.2,moveDefensiveness:.5,yoyoness:.5,dodgeLikelihood:.5,jitteryness:.2}),this.difficultyParams.push({level:2,health:125,fireCoolDownFrames:60,pugilAggressiveness:.4,moveAggressiveness:.2,attackAggressiveness:.2,moveDefensiveness:.5,yoyoness:.5,dodgeLikelihood:.8,jitteryness:.4}),this.difficultyParams.push({level:3,health:150,fireCoolDownFrames:60,pugilAggressiveness:.2,moveAggressiveness:.2,attackAggressiveness:.3,moveDefensiveness:.7,yoyoness:.5,dodgeLikelihood:.5,jitteryness:.2}),this.difficultyParams.push({level:4,health:200,fireCoolDownFrames:60,pugilAggressiveness:.2,moveAggressiveness:.3,attackAggressiveness:.2,moveDefensiveness:.5,yoyoness:.6,dodgeLikelihood:.5,jitteryness:.3}),this.difficultyParams.push({level:5,health:225,fireCoolDownFrames:60,pugilAggressiveness:.3,moveAggressiveness:.4,attackAggressiveness:.4,moveDefensiveness:.6,yoyoness:.8,dodgeLikelihood:.6,jitteryness:.3}),this.difficultyParams.push({level:6,health:250,fireCoolDownFrames:40,pugilAggressiveness:.3,moveAggressiveness:.5,attackAggressiveness:.5,moveDefensiveness:.2,yoyoness:.7,dodgeLikelihood:.7,jitteryness:.5}),this.difficultyParams.push({level:7,health:300,fireCoolDownFrames:40,pugilAggressiveness:.4,moveAggressiveness:.5,attackAggressiveness:.5,moveDefensiveness:.2,yoyoness:.7,dodgeLikelihood:.7,jitteryness:.5}),this.coolDownFireFrames=0,this.healthReduceEaseAmount=5,this.killed=!1,this.hitDamageAmount=20,this.currentHealth=0,this.healthBarHolder=s,this.healthBarFill=o,this.healthBarWidthOriginal=this.healthBarFill.width,this.healthBarWidth=this.healthBarWidthOriginal,this.opponentPodRef=i,this.lincPodRef=t,this.opponentCurrentState="none",this.withinHitDistance=!1,this.hitDistance=300,this.withinDodgeDistance=!1,this.dodgeDistance=500,this.measureLincCount=0,this.measureLincCountLimit=10,this.readLincMotionState="none",this.readLincRopeState="none",this.podSeperationDistance=1e3,this.opponentMoveMaxSpeed=30,this.opponentMoveDirection=0,this.opponentRopeMaxSpeed=20,this.opponentRopeDirection=0,this.opponentCurrentMoveSpeed=0,this.opponentCurrentRopeSpeed=0,this.currentMoveDifferenceX=0,this.currentMoveDifferenceY=0,this.lastMoveDifferenceX=0,this.lastMoveDifferenceY=0}return e.prototype.setRoundParams=function(){this.tintHealth(1),this.killed=!1,this.changeDifficultyCount>=this.changeDifficultyCountLimit&&(this.changeDifficultyCount=0,this.currentDifficultyIndex++),this.changeDifficultyCount++,this.currentDifficultyIndex>this.difficultyParams.length-1&&(this.currentDifficultyIndex=this.difficultyParams.length-1),this.currentHealth=this.difficultyParams[this.currentDifficultyIndex].health,this.coolDownFireFrames=this.difficultyParams[this.currentDifficultyIndex].fireCoolDownFrames,this.pugilAggressiveness=this.difficultyParams[this.currentDifficultyIndex].pugilAggressiveness,this.moveAggressiveness=this.difficultyParams[this.currentDifficultyIndex].moveAggressiveness,this.attackAggressiveness=this.difficultyParams[this.currentDifficultyIndex].attackAggressiveness,this.moveDefensiveness=this.difficultyParams[this.currentDifficultyIndex].moveDefensiveness,this.yoyoness=this.difficultyParams[this.currentDifficultyIndex].yoyoness,this.dodgeLikelihood=this.difficultyParams[this.currentDifficultyIndex].dodgeLikelihood,this.jitteryness=this.difficultyParams[this.currentDifficultyIndex].jitteryness,this.opponentPodRef.setCoolDownFireFrames(this.coolDownFireFrames),this.healthBarWidth=this.healthBarWidthOriginal},e.prototype.tick=function(){this.manageHealthBar(),0!=this.scene.getRoundStarted()&&1!=this.killed&&(++this.measureLincCount>=this.measureLincCountLimit&&(this.measureLincCount=0,this.takeNewLincMotionMeasurement(),this.takeNewLincRopeMeasurement(),this.takeNewDistanceMeasurement(),this.updateOpponentBehaviour()),this.opponentMoveManage(),Math.abs(this.opponentPodRef.podPhysicsBody.velocity[1])>30?0==this.ropeSoundPlaying&&(this.ropeSoundPlaying=!0,Game.playSound("tree-top-gladiators/rope-opp.mp3",.5)):(Game.stopSound("tree-top-gladiators/rope-opp.mp3"),this.ropeSoundPlaying=!1))},e.prototype.manageHealthBar=function(){this.healthBarFill.width+=(this.healthBarWidth-this.healthBarFill.width)/this.healthReduceEaseAmount},e.prototype.takeNewDistanceMeasurement=function(){this.podSeperationDistance=this.getDistance(this.lincPodRef.podPhysicsBody.position[0],this.lincPodRef.podPhysicsBody.position[1],this.opponentPodRef.podPhysicsBody.position[0],this.opponentPodRef.podPhysicsBody.position[1]),this.podSeperationDistance<=this.hitDistance?this.withinHitDistance=!0:this.withinHitDistance=!1,this.podSeperationDistance<=this.dodgeDistance?this.withinDodgeDistance=!0:this.withinDodgeDistance=!1,this.opponentPopPugil()},e.prototype.opponentPopPugil=function(){Game.getRandom(0,1)<1-this.pugilAggressiveness||1!=this.scene.getLincLifeCooldownActive()&&1==this.withinHitDistance&&this.opponentPodRef.popPugil()},e.prototype.opponentOffStageTop=function(){this.changeHeight("down")},e.prototype.receiveDamage=function(){1!=this.killed&&(this.currentHealth-=this.hitDamageAmount,this.currentHealth<=0&&(this.currentHealth=0,this.killed=!0,this.endRoundDelay=this.scene.killTween(this.endRoundDelay),this.endRoundDelay=TweenMax.delayedCall(1,this.endRound,[this])),this.healthBarWidth=this.currentHealth/this.difficultyParams[this.currentDifficultyIndex].health*this.healthBarWidthOriginal,this.healthBarFill.tint=6018816,this.tintHealth(this.currentHealth/this.difficultyParams[this.currentDifficultyIndex].health))},e.prototype.tintHealth=function(e){this.healthBarFill.tint=e>.7?6018816:e<.7&&e>.4?14122496:14090240},e.prototype.newSister=function(){this.killed=!1},e.prototype.endRound=function(e){e.endRoundDelay=e.scene.killTween(e.endRoundDelay),e.scene.endRound()},e.prototype.takeNewLincMotionMeasurement=function(){var e=this.lincPodRef.getRunnerStatus(),t=Math.round(10*e.currentRunnerPos)/10,i=Math.round(10*e.targetRunnerPos)/10;i<t?this.setLincMotionStatus("retreating"):i>t?this.setLincMotionStatus("advancing"):this.setLincMotionStatus("still")},e.prototype.takeNewLincRopeMeasurement=function(){var e=this.lincPodRef.getRopeStatus(),t=Math.round(10*e.currentRopeLength)/10,i=Math.round(10*e.targetRopeLength)/10;i<t?this.setLincRopeStatus("retracting"):i>t?this.setLincRopeStatus("extending"):this.setLincRopeStatus("still")},e.prototype.setLincMotionStatus=function(e){this.readLincMotionState!=e&&(this.readLincMotionState=e)},e.prototype.setLincRopeStatus=function(e){this.readLincRopeState!=e&&(this.readLincRopeState=e)},e.prototype.updateOpponentBehaviour=function(){if(!(Game.getRandom(0,1)<1-this.jitteryness))if(Game.getRandom(0,1)<this.attackAggressiveness)this.opponentAttack();else if(Game.getRandom(0,1)<this.yoyoness)this.opponentChangeHeight();else if(1!=this.opponentPodRef.getRunnerLockedRight()){if("advancing"==this.readLincMotionState||"still"==this.readLincMotionState){if(Game.getRandom(0,1)<this.moveAggressiveness)return void this.opponentAdvance();if(Game.getRandom(0,1)<this.moveDefensiveness)return void this.opponentRetreat();if(Game.getRandom(0,1)<this.dodgeLikelihood)return void this.opponentDodge()}if("retreating"==this.readLincMotionState){if(Game.getRandom(0,1)<this.attackAggressiveness)return void this.opponentAttack();if(Game.getRandom(0,1)<this.moveAggressiveness)return void this.opponentAdvance();if(Game.getRandom(0,1)<this.moveDefensiveness)return void this.opponentRetreat();if(Game.getRandom(0,1)<this.yoyoness)return void this.opponentChangeHeight()}}else this.opponentAdvance()},e.prototype.opponentChangeHeight=function(){var e="up";Game.getRandom(0,1)<.5&&(e="down"),e=this.checkRopeLength(e),this.changeHeight(e)},e.prototype.opponentAttack=function(){var e="up";Game.getRandom(0,1)<.5&&(e="down"),e=this.checkRopeLength(e),this.attack(e)},e.prototype.checkRopeLength=function(e){var t=e;return 1==this.scene.getRopeLockedDown("sister")&&(t="up"),1==this.scene.getRopeLockedUp("sister")&&(t="down"),t},e.prototype.opponentDodge=function(){if(0!=this.withinDodgeDistance){this.opponentCurrentState="dodging";var e="up";Game.getRandom(0,1)<.5&&(e="down"),this.moveDodge(e)}},e.prototype.opponentRetreat=function(){"retreating"!=this.opponentCurrentState&&(this.opponentCurrentState="retreating",this.moveRetreat())},e.prototype.opponentAdvance=function(){"advancing"!=this.opponentCurrentState&&(this.opponentCurrentState="advancing",this.moveAdvance())},e.prototype.opponentMoveManage=function(){this.currentMoveDifferenceY+=this.opponentCurrentRopeSpeed,this.currentMoveDifferenceX+=this.opponentCurrentMoveSpeed,this.currentMoveDifferenceX<this.lastMoveDifferenceX&&(0==this.scene.getRunnerLockedLeft("sister")?this.lastMoveDifferenceX=this.currentMoveDifferenceX:this.currentMoveDifferenceX=this.lastMoveDifferenceX),this.currentMoveDifferenceX>this.lastMoveDifferenceX&&(0==this.scene.getRunnerLockedRight("linc")?this.lastMoveDifferenceX=this.currentMoveDifferenceX:this.currentMoveDifferenceX=this.lastMoveDifferenceX),this.scene.moveRunner("sister",this.currentMoveDifferenceX),this.currentMoveDifferenceY<this.lastMoveDifferenceY&&(0==this.scene.getRopeLockedDown("linc")?this.lastMoveDifferenceY=this.currentMoveDifferenceY:this.currentMoveDifferenceY=this.lastMoveDifferenceY),this.currentMoveDifferenceY>this.lastMoveDifferenceY&&(0==this.scene.getRopeLockedUp("linc")?this.lastMoveDifferenceY=this.currentMoveDifferenceY:this.currentMoveDifferenceY=this.lastMoveDifferenceY),this.scene.activateRope("sister",this.currentMoveDifferenceY)},e.prototype.moveAdvance=function(){this.opponentMoveDirection=-1,this.opponentCurrentMoveSpeed=Game.getRandom(this.opponentMoveMaxSpeed/2,this.opponentMoveMaxSpeed)*this.opponentMoveDirection},e.prototype.moveRetreat=function(){this.opponentMoveDirection=1,this.opponentCurrentMoveSpeed=Game.getRandom(this.opponentRopeMaxSpeed/2,this.opponentRopeMaxSpeed)*this.opponentMoveDirection},e.prototype.moveDodge=function(e){"down"==e?this.opponentRopeDirection=1:"up"==e&&(this.opponentRopeDirection=-1),this.opponentCurrentRopeSpeed=Game.getRandom(this.opponentRopeMaxSpeed/2,this.opponentRopeMaxSpeed)*this.opponentRopeDirection,this.moveRetreat()},e.prototype.attack=function(e){this.changeHeight(e),this.moveAdvance()},e.prototype.changeHeight=function(e){"down"==e?this.opponentRopeDirection=1:"up"==e&&(this.opponentRopeDirection=-1),this.opponentCurrentRopeSpeed=Game.getRandom(this.opponentRopeMaxSpeed/2,this.opponentRopeMaxSpeed)*this.opponentRopeDirection},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.pause=function(){this.scene.pauseResumeTween(this.endRoundDelay,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.endRoundDelay,"resume")},e.prototype.destroy=function(){this.endRoundDelay=this.scene.killTween(this.endRoundDelay)},e}(),DodgemsPhysicsManager=function(){function e(e,t){this.physicsEnabled=!0,this.backWheelGrounded=!1,this.resizeRatio=1,this.DODGEM=Math.pow(2,0),this.WHEELS=Math.pow(2,1),this.LEVEL=Math.pow(2,2),this.HEAD=Math.pow(2,3),this.DISABLED=Math.pow(2,4),this.TICKET=Math.pow(2,5),this.PLAYER=Math.pow(2,6),this.scene=e,this.mainContainer=t,this.backWheelCurrentStartedTouchingChunks=[]}return e.prototype.initPhysicsWorld=function(){this.world=new p2.World({gravity:[0,0]}),this.world.broadphase=new p2.NaiveBroadphase(1),this.powerupRatio=1,this.boundBodies=[],this.enemyVehicles=[],this.world.defaultContactMaterial.restitution=.7,this.world.defaultContactMaterial.friction=.01,this.carBodyShape=new p2.Capsule({length:110,radius:80}),this.carBodyShape.angle=-Math.PI/2,this.carBody=new p2.Body({mass:1,position:[Game.stageWidth/2,Game.stageHeight/2]}),this.carBody.addShape(this.carBodyShape,[0,5],-Math.PI/2),this.headrestShape=new p2.Box({width:40,height:40}),this.headrestShapeFront=new p2.Box({width:40,height:40}),this.carBody.addShape(this.headrestShape,[0,-115]),this.carBody.addShape(this.headrestShapeFront,[0,112]),this.vehicle=new p2.TopDownVehicle(this.carBody),this.topWallBody=new p2.Body({mass:0,position:[0,2*Game.stageWidth-240],angle:Math.PI}),this.topWallShape=new p2.Plane,this.topWallBody.addShape(this.topWallShape),this.bottomWallBody=new p2.Body({mass:0,position:[0,-Game.stageWidth-250],angle:0}),this.bottomWallLeftShape=new p2.Box({width:1300,height:100}),this.bottomWallRightShape=new p2.Box({width:1300,height:100}),this.bottomWallBody.addShape(this.bottomWallLeftShape,[-300,0]),this.bottomWallBody.addShape(this.bottomWallRightShape,[1400,0]),this.bottomGateBody=new p2.Body({mass:0,position:[0,-Game.stageWidth-250],angle:0}),this.bottomGateShape=new p2.Box({width:500,height:100}),this.bottomGateBody.addShape(this.bottomGateShape,[500,0]),this.leftWallBody=new p2.Body({mass:0,position:[-Game.stageWidth,0],angle:-Math.PI/2}),this.leftWallShape=new p2.Plane,this.leftWallBody.addShape(this.leftWallShape),this.rightWallBody=new p2.Body({mass:0,position:[2*Game.stageWidth-20,0],angle:Math.PI/2}),this.rightWallShape=new p2.Plane,this.rightWallBody.addShape(this.rightWallShape),this.characterHead=new p2.Body({mass:.5,position:[Game.stageWidth/2,Game.stageHeight-335]}),this.characterHeadShape=new p2.Circle({radius:60}),this.characterHead.addShape(this.characterHeadShape),this.frontWheel=this.vehicle.addWheel({localPosition:[0,200]}),this.frontWheel.setSideFriction(540),this.backWheel=this.vehicle.addWheel({localPosition:[0,-170]}),this.backWheel.setSideFriction(330),this.vehicle.addToWorld(this.world),this.headConstraint=new p2.LockConstraint(this.carBody,this.characterHead,{maxForce:5e3}),this.world.addBody(this.carBody),this.world.addBody(this.characterHead),this.world.addConstraint(this.headConstraint),this.world.addBody(this.topWallBody),this.world.addBody(this.bottomWallBody),this.world.addBody(this.leftWallBody),this.world.addBody(this.rightWallBody),this.world.addBody(this.bottomGateBody),this.carBodyShape.collisionGroup=this.PLAYER,this.characterHeadShape.collisionGroup=this.HEAD,this.headrestShape.collisionGroup=this.HEAD,this.headrestShapeFront.collisionGroup=this.HEAD,this.bottomWallLeftShape.collisionGroup=this.LEVEL,this.bottomWallRightShape.collisionGroup=this.LEVEL,this.bottomGateShape.collisionGroup=this.LEVEL,this.leftWallShape.collisionGroup=this.LEVEL,this.rightWallShape.collisionGroup=this.LEVEL,this.topWallShape.collisionGroup=this.LEVEL,this.bottomWallLeftShape.collisionMask=this.DODGEM|this.DISABLED|this.PLAYER,this.bottomWallRightShape.collisionMask=this.DODGEM|this.DISABLED|this.PLAYER,this.bottomGateShape.collisionMask=this.DODGEM|this.PLAYER,this.leftWallShape.collisionMask=this.DODGEM|this.DISABLED|this.PLAYER,this.rightWallShape.collisionMask=this.DODGEM|this.DISABLED|this.PLAYER,this.topWallShape.collisionMask=this.DODGEM|this.DISABLED|this.PLAYER,this.carBodyShape.collisionMask=this.LEVEL|this.DODGEM|this.TICKET,this.headrestShape.collisionMask=this.HEAD,this.headrestShapeFront.collisionMask=this.HEAD,this.characterHeadShape.collisionMask=this.HEAD;var e=this;this.world.on("beginContact",function(t){e.checkCollision(e,t)}),this.world.on("endContact",function(t){e.checkEndCollision(e,t)}),this.world.on("postStep",function(e){}),this.physicsEnabled=!0},e.prototype.getParticlePhysicsObj=function(){var e=new p2.Body({mass:8}),t=new p2.Circle({radius:5});return e.damping=.9,t.sensor=!0,e.addShape(t),{body:e,shape:t}},e.prototype.activatePowerup=function(){this.powerupRatio=4,this.carBody.mass=1*this.powerupRatio,this.frontWheel.setSideFriction(3200),this.backWheel.setSideFriction(1800),this.carBody.removeShape(this.carBodyShape),this.carBodyShape=new p2.Capsule({length:140,radius:125}),this.carBodyShape.angle=-Math.PI/2,this.carBody.addShape(this.carBodyShape,[0,5],-Math.PI/2);for(var e=0;e<this.scene.keyDownIDs.length;e++)"up"==this.scene.keyDownIDs[e]&&this.applyDriveForce(200),"down"==this.scene.keyDownIDs[e]&&this.applyDriveForce(-200);this.carBodyShape.collisionGroup=this.PLAYER,this.carBodyShape.collisionMask=this.LEVEL|this.DODGEM|this.TICKET},e.prototype.deactivatePowerup=function(){this.powerupRatio=1,this.carBody.mass=1,this.frontWheel.setSideFriction(540),this.backWheel.setSideFriction(330),this.carBody.removeShape(this.carBodyShape),this.carBodyShape=new p2.Capsule({length:110,radius:80}),this.carBody.addShape(this.carBodyShape,[0,5],-Math.PI/2);for(var e=0;e<this.scene.keyDownIDs.length;e++)"up"==this.scene.keyDownIDs[e]&&this.applyDriveForce(200),"down"==this.scene.keyDownIDs[e]&&this.applyDriveForce(-200);this.carBodyShape.collisionGroup=this.PLAYER,this.carBodyShape.collisionMask=this.LEVEL|this.DODGEM|this.TICKET},e.prototype.applyDriveForce=function(e){this.backWheel.engineForce=3.7*e*this.powerupRatio},e.prototype.applyBrakeForce=function(e){this.backWheel.setBrakeForce(e)},e.prototype.steer=function(e){this.frontWheel.steerValue=1*e,this.scene.setArmDirection(e)},e.prototype.getSteerAmount=function(){return this.frontWheel.steerValue},e.prototype.bindSpriteToBody=function(e,t){this.boundBodies.push({sprite:e,body:t})},e.prototype.unbindSpriteFromBody=function(e){this.boundBodies&&this.boundBodies.splice(this.findIndexByKeyValue(this.boundBodies,"sprite",e),1)},e.prototype.checkCollision=function(e,t){for(i=0;i<this.scene.dodgemsManager.dodgems.length;i++)t.bodyA==this.scene.dodgemsManager.dodgems[i].body&&(t.bodyB==this.carBody&&e.playerEnemyImpact(this.scene.dodgemsManager.dodgems[i],t),t.bodyB.shapes[0].collisionGroup==this.LEVEL&&e.enemyWallImpact(this.scene.dodgemsManager.dodgems[i],t)),t.bodyB==this.scene.dodgemsManager.dodgems[i].body&&(t.bodyA==this.carBody&&e.playerEnemyImpact(this.scene.dodgemsManager.dodgems[i],t),t.bodyA.shapes[0].collisionGroup==this.LEVEL&&e.enemyWallImpact(this.scene.dodgemsManager.dodgems[i],t));t.bodyA==this.carBody&&t.bodyB.shapes[0].collisionGroup==this.LEVEL&&e.playerWallImpact(t,t.bodyA),t.bodyB==this.carBody&&t.bodyA.shapes[0].collisionGroup==this.LEVEL&&e.playerWallImpact(t,t.bodyB);for(var i=0;i<this.scene.tickets.length;i++)1!=this.scene.tickets[i].available&&(t.bodyA==this.carBody&&t.bodyB==this.scene.tickets[i].body&&e.collectTicket(this.scene.tickets[i]),t.bodyB==this.carBody&&t.bodyA==this.scene.tickets[i].body&&e.collectTicket(this.scene.tickets[i]))},e.prototype.checkEndCollision=function(e,t){},e.prototype.collectTicket=function(e){e.collect()},e.prototype.playerWallImpact=function(e,t){var i=[];p2.vec2.copy(i,t.velocity),p2.vec2.scale(i,i,t.mass);var s=p2.vec2.length(i)/80;0==this.scene.powerupIsActive&&(this.scene.playerTakeDamage(s),Game.stopSound("dodgems/dodgem-moving.mp3"),Game.stopSound("dodgems/power-up-jet-loop.mp3"),Game.stopSound("dodgems/dodgem-power-up-moving.mp3"),Game.getRandom(0,1)<.5?Game.playSound("dodgems/crash-1.mp3",.4):Game.playSound("dodgems/crash-2.mp3",.4))},e.prototype.enemyWallImpact=function(e,t){var i=[];p2.vec2.copy(i,e.body.velocity),p2.vec2.scale(i,i,e.body.mass);var s=p2.vec2.length(i)/80;e.doDamage(s)},e.prototype.playerEnemyImpact=function(e,t){if(this.scene.bounceSound=!0,1==this.scene.bounceSound&&0==this.scene.bounceSoundTimer){var i=Game.getRandom(1,3,!0);1==i?Game.playSound("dodgems/thud-1.mp3",.5):2==i?Game.playSound("dodgems/thud-2.mp3",.5):3==i&&Game.playSound("dodgems/thud-3.mp3",.5),++this.scene.bounceSoundTimer>=this.scene.bounceSoundLimit&&(Game.stopSound("dodgems/thud-1.mp3"),Game.stopSound("dodgems/thud-2.mp3"),Game.stopSound("dodgems/thud-3.mp3"),this.scene.bounceSoundTimer=0,this.scene.bounceSound=!1)}var s=[],o=[];p2.vec2.copy(s,this.carBody.velocity),p2.vec2.scale(s,s,this.carBody.mass);var a=p2.vec2.length(s);p2.vec2.copy(o,e.body.velocity),p2.vec2.scale(o,o,e.body.mass);var r=p2.vec2.length(o),n=[];p2.vec2.subtract(n,s,o);var h=p2.vec2.length(n);a>r?(h>100&&this.scene.setCollisionAngle("player",e.container.position,this.scene.dodgemContainer.position,h/25*this.powerupRatio),this.scene.doDamage(e,h/25*this.powerupRatio)):(0==this.scene.powerupIsActive&&h>100&&this.scene.setCollisionAngle("enemy",this.scene.dodgemContainer.position,e.container.position,h/10),this.scene.playerTakeDamage(h/4))},e.prototype.detectDamage=function(e,t){Math.abs(e.velocity[0]),Math.abs(e.velocity[1])},e.prototype.addBodyToWorld=function(e){this.world.addBody(e)},e.prototype.removeBodyFromWorld=function(e){this.world.removeBody(e)},e.prototype.removeConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.addConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.resizeElements=function(e,t){this.canvasHeight=t,this.canvasWidth=e,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},e.prototype.stepPhysics=function(){if(0!=this.physicsEnabled&&this.world){this.world.step(1/30);for(var e=0;e<this.boundBodies.length;e++)this.boundBodies[e].sprite.position.x=this.boundBodies[e].body.position[0],this.boundBodies[e].sprite.position.y=Game.stageHeight-this.boundBodies[e].body.position[1],this.boundBodies[e].sprite.rotation=-this.boundBodies[e].body.angle}},e.prototype.killPhysicsWorld=function(e){},e.prototype.findIndexByKeyValue=function(e,t,i){for(var s=0;s<e.length;s++)if(e[s][t]==i)return s;return null},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.getDodgemSpeed=function(){return Math.round(Math.abs(this.vehicle.wheels[1].getSpeed()))/100},e.prototype.pause=function(){this.physicsEnabled=!1},e.prototype.resume=function(){this.physicsEnabled=!0},e.prototype.destroy=function(){this.boundBodies=[],this.world.clear(),this.world=null},e}(),DodgemsInputManager=function(){function e(e,t){this.scene=e,this.mainHolderRef=t,this.hitAreaSprite=Game.displayStore.getSprite("dodgems/blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.currentAngle=0,this.maxAngleDiff=1.4,this.minAngleDiff=.1,this.keyboardDown=!1,this.driveForce=0,this.steeringForce=0,this.targetSteeringForce=0,this.joystickLeftActive=!1,this.joystickRightActive=!1,this.currentTouches=[],this.currentTouches[0]=new PIXI.Point,this.currentTouches[1]=new PIXI.Point,this.joystickLeft=Game.displayStore.getContainer("dodgems/joystick-left"),this.joystickLeftControl=this.joystickLeft.getSpriteAt(1),this.joystickRight=Game.displayStore.getContainer("dodgems/joystick-right"),this.joystickRightControl=this.joystickRight.getSpriteAt(1),this.joystickRight.rotation=.5*Math.PI,this.joystickLeft.position=new PIXI.Point(180,480),this.joystickRight.position=new PIXI.Point(900,380),0==Game.onDesktop&&(this.scene.uiLayer.addChild(this.joystickLeft),this.scene.uiLayer.addChild(this.joystickRight)),this.joystickRight.visible=!1,this.startTouchPos=new PIXI.Point(0,0),this.currentTouchPos=new PIXI.Point(0,0),this.rightKeyPos=new PIXI.Point(Game.stageWidth/2,Game.stageHeight/2),this.leftKeyPos=new PIXI.Point(Game.stageWidth/2,Game.stageHeight/2),this.keyboardInput="none",this.startAngle=0,this.currentAngle=0,this.lastAngle=0,this.keyboardDown=!1,this.angleDir=0,this.lastAngleDir=0,this.walkForce=0,this.mouseDistance=0,this.angleLimit=.7,this.multipleEventFixBoolean=!1,this.scene.uiLayer.addChild(this.hitAreaSprite)}return e.prototype.initControls=function(){this.setUpHitArea(this.hitAreaSprite)},e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){}),e.on("mousemove",function(e){}),e.on("mouseup",function(e){}),e.on("mouseupoutside",function(e){})):(e.on("touchstart",function(e){t.inputDown(t,e.data.originalEvent.touches)}),e.on("touchmove",function(e){t.inputMove(t,e.data.originalEvent.touches)}),e.on("touchend",function(e){t.inputUp(t,e.data.originalEvent.touches)}),e.on("touchendoutside",function(e){t.inputUp(t,e.data.originalEvent.touches)}))},e.prototype.inputDown=function(e,t){for(var i=0;i<t.length;i++)t[i].clientX/Game.windowScaleFactor<Game.stageWidth/2&&0==e.joystickLeftActive&&(e.joystickLeftActive=!0,e.leftTouchIndex=i,e.currentTouches[i].x=e.joystickLeft.position.x,e.currentTouches[i].y=e.joystickLeft.position.y),t[i].clientX/Game.windowScaleFactor>Game.stageWidth/2&&e.joystickRightActive;e.mouseDown=!0},e.prototype.inputUp=function(e,t){t[0]||(e.mouseDown=!1,e.walkForce=0,e.mouseDistance=0,e.leftTouchIndex=null,e.rightTouchIndex=null,e.joystickLeftActive=!1,e.joystickRightActive=!1),t[0]&&(t[0].clientX/Game.windowScaleFactor>Game.stageWidth/2&&(e.joystickLeftActive=!1),t[0].clientX/Game.windowScaleFactor<Game.stageWidth/2&&(1==e.leftTouchIndex&&(e.currentTouches[0].x=e.currentTouches[1].x,e.currentTouches[0].y=e.currentTouches[1].y),e.mouseDistance=0,e.joystickRightActive=!1,e.leftTouchIndex=0,e.rightTouchIndex=null))},e.prototype.inputMove=function(e,t){e.currentTouches[0].x=(t[0].clientX-Game.gameOffset.x)/Game.windowScaleFactor,e.currentTouches[0].y=(t[0].clientY-Game.gameOffset.y)/Game.windowScaleFactor,t.length>1&&(e.currentTouches[1].x=(t[1].clientX-Game.gameOffset.x)/Game.windowScaleFactor,e.currentTouches[1].y=(t[1].clientY-Game.gameOffset.y)/Game.windowScaleFactor)},e.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},e.prototype.getInputAngle=function(){var e=this.currentAngle;return e>this.maxAngleDiff&&(e=this.maxAngleDiff),e<this.minAngleDiff&&(e=this.minAngleDiff),e},e.prototype.keyDown=function(e){switch(this.keyboardInput=e,e){case"left":this.targetSteeringForce=1;break;case"right":this.targetSteeringForce=-1;break;case"down":this.driveForce=-200,this.scene.physicsManager.applyDriveForce(-200),this.scene.physicsManager.applyBrakeForce(400);break;case"up":this.driveForce=200,this.scene.physicsManager.applyDriveForce(200),this.scene.physicsManager.applyBrakeForce(400);break;case"spacebar":this.keyboardInput="spacebar"}this.keyboardDown=!0},e.prototype.keyUp=function(e){switch(e){case"left":case"right":this.targetSteeringForce=0;break;case"down":case"up":this.driveForce=0,this.scene.physicsManager.applyDriveForce(0)}this.keyboardDown=!1},e.prototype.tick=function(){if(0==Game.onDesktop){var e=0;1==this.joystickLeftActive?(this.joystickLeftControl.position.x=e=this.currentTouches[this.leftTouchIndex].x-this.joystickLeft.position.x,this.joystickLeftControl.position.x>85&&(this.joystickLeftControl.position.x=85),this.joystickLeftControl.position.x<-85&&(this.joystickLeftControl.position.x=-85),this.steeringForce=this.joystickLeftControl.position.x/85,console.log(this.steeringForce),this.scene.physicsManager.steer(-this.steeringForce)):(this.steeringForce=0,this.scene.physicsManager.steer(this.steeringForce)),1==this.joystickRightActive&&(this.joystickRightControl.position.x=this.currentTouches[this.rightTouchIndex].y-this.joystickRight.position.y,this.joystickRightControl.position.x>85&&(this.joystickRightControl.position.x=85),this.joystickRightControl.position.x<-85&&(this.joystickRightControl.position.x=-85))}else this.steeringForce+=(this.targetSteeringForce-this.steeringForce)/2,this.scene.physicsManager.steer(this.steeringForce);this.joystickLeftControl.position.x+=(e-this.joystickLeftControl.position.x)/7},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},e}(),DodgemsEnemy=function(){function e(e,t,i,s,o){this.scene=t,this.destroyed=!1,this.game=t.game,this.health=50,this.fullHealth=50,this.disabled=!1,this.tag=s,this.onScreen=!1,this.dodgemsManager=e,this.index=o,this.seeking=!1,this.toughness=this.scene.toughness,this.active=!1,this.enemyElectricFrames=!1,this.zapSoundPlaying=!1,this.zapSoundTimer=0,this.zapSoundLimit=1e3,this.enemyElectricFrames=!1,this.enemyElectricCounter=0,this.enemyElectricCounterLimit=60,this.smokeCounter=0,this.smokeCounterLimit=10,this.electricFrames=Game.displayStore.getAnimatedSprite("dodgems/electric-cart-frames"),this.electricFrames.blendMode=PIXI.BLEND_MODES.ADD,this.electricFrames.animationSpeed=.3,this.electricFrames.loop=!0,this.electricFrames.gotoAndStop(0),this.healthGuageBack=Game.displayStore.getSprite("dodgems/health-bg"),this.healthGuageFront=Game.displayStore.getSprite("dodgems/health-fg"),this.healthGuageFront2=Game.displayStore.getSprite("dodgems/health-fg-2"),this.healthGuage=Game.displayStore.getContainer("dodgems/health-guage"),this.healthGuageBack.scale.x=this.toughness+.02,this.healthGuageFront2.tint=16733525,this.healthGuageFront.scale.x=this.healthGuageFront2.scale.x=this.health/100,this.healthGuage.alpha=0,this.container=Game.displayStore.getContainer("dodgems/enemy-holder"),this.bumper=Game.displayStore.getSprite("dodgems/enemy-bumper"),this.car=Game.displayStore.getSprite("dodgems/enemy-cart"),this.player=Game.displayStore.getSprite("dodgems/enemy-player"),this.head=Game.displayStore.getSprite("dodgems/enemy-player-head"),this.leftArm=Game.displayStore.getSprite("dodgems/enemy-arm-left"),this.rightArm=Game.displayStore.getSprite("dodgems/enemy-arm-right"),this.container.addChild(this.bumper),this.container.addChild(this.car),this.container.addChild(this.player),this.container.addChild(this.leftArm),this.container.addChild(this.rightArm),this.container.addChild(this.head),this.container.addChild(this.electricFrames),this.leftArm.position.y+=12,this.rightArm.position.y+=12,this.leftArm.position.x-=15,this.rightArm.position.x+=15,this.leftArm.rotation=.15,this.rightArm.rotation=-.15,this.head.position.y=27,this.setCarColour(),this.healthGuage.addChild(this.healthGuageBack),this.healthGuage.addChild(this.healthGuageFront2),this.healthGuage.addChild(this.healthGuageFront),this.healthLayer=i,this.targetSteerAmount=0,this.shape=new p2.Capsule({length:110,radius:80}),this.shape.collisionGroup=this.scene.physicsManager.DODGEM,this.shape.collisionMask=this.scene.physicsManager.DODGEM|this.scene.physicsManager.LEVEL|this.scene.physicsManager.PLAYER,this.body=new p2.Body({mass:.5,position:[100*o,3*-Game.stageHeight]}),this.body.addShape(this.shape,[0,5],-Math.PI/2),this.vehicle=new p2.TopDownVehicle(this.body),this.scene.physicsManager.addBodyToWorld(this.body),this.frontWheel=this.vehicle.addWheel({localPosition:[0,120]}),this.frontWheel.setSideFriction(50),this.backWheel=this.vehicle.addWheel({localPosition:[0,-120]}),this.backWheel.setSideFriction(50),this.vehicle.addToWorld(this.scene.physicsManager.world),this.backWheel.setBrakeForce(150)}return e.prototype.stopElectric=function(){this.electricFrames.stop()},e.prototype.initialSpawn=function(){this.active=!0,this.container.alpha=0,this.healthLayer.addChild(this.healthGuage),this.healthGuage.alpha=0,this.body.angle=Game.getRandom(0,2*Math.PI),this.car.scale.x=this.car.scale.y=1,this.healthGuageFront.tint=6018816,this.body.position[0]=Game.stageWidth/2,this.body.position[1]=2.4*-Game.stageHeight,this.body.angle=0,this.body.mass=.3,this.electricFrames.gotoAndStop(0),this.shape.collisionGroup=this.scene.physicsManager.DODGEM,this.seeking=!1,this.toughness=this.scene.toughness,this.scene.physicsManager.bindSpriteToBody(this.container,this.body),this.scene.openGate(),this.drive(50),this.backWheel.setBrakeForce(50),this.healthGuageFront.tint=6018816,this.shape.collisionGroup=this.scene.physicsManager.DISABLED,this.drivingTimeline=this.scene.killTween(this.drivingTimeline),this.drivingTimeline=new TimelineMax,this.drivingTimeline.add(TweenMax.to(this.container,.1,{alpha:1}),.5),this.drivingTimeline.add(TweenMax.to(this.container,.01,{alpha:.3,repeat:19,repeatDelay:.12,yoyo:!0}),.5),this.drivingTimeline.call(function(){this.enable(),this.container.alpha=1},null,this,.2),this.drivingTimeline.call(function(){this.drive(0),this.shape.collisionGroup=this.scene.physicsManager.DODGEM,this.shape.collisionMask=this.scene.physicsManager.DODGEM|this.scene.physicsManager.LEVEL|this.scene.physicsManager.PLAYER,this.chooseRandomDriveMode(),this.container.alpha=1},null,this,2)},e.prototype.setCarColour=function(){switch(Game.getRandom(1,5,!0)){case 1:this.car.tint=16733525,this.cartTint=16733525;break;case 2:this.car.tint=54071,this.cartTint=54071;break;case 3:this.car.tint=13041875,this.cartTint=13041875;break;case 4:this.car.tint=13876480,this.cartTint=13876480;break;case 5:this.car.tint=3327,this.cartTint=3327}},e.prototype.startDriving=function(){this.chooseRandomDriveMode()},e.prototype.chooseRandomDriveMode=function(){Game.getRandom(0,1)>.5?this.randomDriving():this.seekerDriving()},e.prototype.setArmDirection=function(e){var t,i;e<-.3?(t=.25,i=.15):e>-.3&&e<.3?(t=.15,i=-.15):e>.3&&(t=-.15,i=-.25),this.leftArm.rotation+=(t-this.leftArm.rotation)/8,this.rightArm.rotation+=(i-this.rightArm.rotation)/8},e.prototype.randomDriving=function(){if(1!=this.destroyed){if(this.seeking=!1,this.drivingTimeline=this.scene.killTween(this.drivingTimeline),1==this.disabled)return this.steer(0),this.drive(0),void this.backWheel.setBrakeForce(150);this.drivingTimeline=new TimelineMax,this.drivingTimeline.call(function(){this.steer(Game.getRandom(-1,1)),this.setArmDirection(this.targetSteerAmount);var e=[-1,1];this.drive(40*e[Game.getRandom(0,1,!0)]+30*this.toughness)},null,this,0),this.drivingTimeline.call(function(){this.chooseRandomDriveMode()},null,this,Game.getRandom(3,5))}},e.prototype.seekerDriving=function(){if(1!=this.destroyed)return 1==this.disabled?(this.steer(0),this.drive(0),void this.backWheel.setBrakeForce(550)):void(this.container&&(this.drivingTimeline=this.scene.killTween(this.drivingTimeline),this.seeking=!0,this.drivingTimeline=new TimelineMax,this.drive(Game.getRandom(30,60)+30*this.toughness),this.body.angle=-this.getAngle(this.container.position.x,this.container.position.y,this.scene.dodgemContainer.position.x,this.scene.dodgemContainer.position.y)-Math.PI/2,this.drivingTimeline.call(function(){this.getDistance(this.container.position.x,this.container.position.y,this.scene.dodgemContainer.position.x,this.scene.dodgemContainer.position.y)<310&&this.doRam()},null,this,1.5),this.drivingTimeline.call(function(){this.randomDriving()},null,this,Game.getRandom(4,5))))},e.prototype.doRam=function(){this.ramTimeline=this.scene.killTween(this.ramTimeline),this.ramTimeline=new TimelineMax,this.drive(-80),this.ramTimeline.call(function(){this.drive(80)},null,this,1.4),this.drivingTimeline=this.scene.killTween(this.drivingTimeline),this.drivingTimeline=new TimelineMax,this.drivingTimeline.call(function(){this.randomDriving()},null,this,Game.getRandom(4,5))},e.prototype.drive=function(e){this.backWheel.engineForce=3*e},e.prototype.steer=function(e){this.targetSteerAmount=e},e.prototype.doDamage=function(e){e>this.health&&(e=this.health),this.health-=e,this.health>.75*this.fullHealth?this.healthGuageFront.tint=6018816:this.health>.5*this.fullHealth&&.75*this.fullHealth?this.healthGuageFront.tint=14122496:this.health<.5*this.fullHealth&&this.health>.25*this.fullHealth?this.healthGuageFront.tint=14090240:this.health<.25*this.fullHealth&&(this.healthGuageFront.tint=14090240),0==this.health&&this.disable()},e.prototype.hide=function(){this.container.alpha=0},e.prototype.spawn=function(){this.container.alpha=0,this.body.position[0]=Game.stageWidth/2,this.body.position[1]=2.4*-Game.stageHeight,this.body.angle=0,this.body.mass=.3,this.electricFrames.gotoAndStop(0),this.shape.collisionGroup=this.scene.physicsManager.DODGEM,this.seeking=!1,this.toughness=this.scene.toughness,this.scene.physicsManager.bindSpriteToBody(this.container,this.body),this.drive(60),this.backWheel.setBrakeForce(50),this.healthGuageFront.tint=6018816,this.scene.openGate(),this.shape.collisionGroup=this.scene.physicsManager.DISABLED,this.drivingTimeline=this.scene.killTween(this.drivingTimeline),this.drivingTimeline=new TimelineMax,this.drivingTimeline.add(TweenMax.to(this.container,.1,{alpha:1}),.5),this.drivingTimeline.add(TweenMax.to(this.container,.01,{alpha:.3,repeat:19,repeatDelay:.12,yoyo:!0}),.5),this.drivingTimeline.call(function(){this.enable(),this.container.alpha=1},null,this,.2),this.drivingTimeline.call(function(){this.drive(0),this.shape.collisionGroup=this.scene.physicsManager.DODGEM,this.shape.collisionMask=this.scene.physicsManager.DODGEM|this.scene.physicsManager.LEVEL|this.scene.physicsManager.PLAYER,this.chooseRandomDriveMode(),this.container.alpha=1},null,this,2)},e.prototype.playElectricFrame=function(){this.electricFrames.gotoAndPlay(0),this.enemyElectricFrames=!0},e.prototype.disable=function(){this.smokeCounter=this.smokeCounterLimit,1!=this.disabled&&(this.healthGuage.alpha=0,this.playElectricFrame(),this.disabled=!0,this.tag.alpha=0,this.seeking=!1,this.scene.disableDodgem(),this.backWheel.setBrakeForce(1e5),this.steer(0),this.drive(0),this.healthGuage.alpha=0,this.disabledTimeline=this.scene.killTween(this.disabledTimeline),this.disabledTimeline=new TimelineMax,this.disabledTimeline.call(this.dodgemsManager.tryDisableDodgem,[this,this.dodgemsManager],this.dodgemsManager,.5))},e.prototype.enable=function(){this.healthGuage.alpha=1,this.stopElectric(),this.healthGuage.alpha=1,this.disabledTimeline=this.scene.killTween(this.disabledTimeline),this.car.alpha=1,this.container.alpha=1,this.car.scale.x=this.car.scale.y=1,this.container.scale.x=this.container.scale.y=1,this.disabled=!1,this.tag.alpha=1,this.health=100*this.toughness,this.fullHealth=100*this.toughness,this.healthGuageBack.scale.x=this.toughness+.02},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=i-e,a=s-t;return Math.atan2(a,o)}},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.pause=function(){this.scene.pauseResumeTween(this.drivingTimeline,"pause"),this.scene.pauseResumeTween(this.ramTimeline,"pause"),this.scene.pauseResumeTween(this.disabledTimeline,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.drivingTimeline,"resume"),this.scene.pauseResumeTween(this.ramTimeline,"resume"),this.scene.pauseResumeTween(this.disabledTimeline,"resume")},e.prototype.tick=function(){1==this.disabled&&++this.smokeCounter>=this.smokeCounterLimit&&(this.smokeCounter=0),1==this.enemyElectricFrames&&(0==this.zapSoundTimer&&(Game.getRandom(0,1)<.5?Game.playSound("dodgems/zap-1.mp3",.4):Game.playSound("dodgems/zap-2.mp3",.4),this.zapSoundPlaying=!0,++this.zapSoundTimer>=this.zapSoundLimit&&(Game.stopSound("dodgems/zap-1.mp3"),Game.stopSound("dodgems/zap-2.mp3"),this.zapSoundTimer=0,this.zapSoundPlaying=!1)),++this.enemyElectricCounter>this.enemyElectricCounterLimit&&(this.enemyElectricFrames=!1,this.enemyElectricCounter=0,this.zapSoundTimer=0,this.zapSoundPlaying=!1)),this.healthGuageFront.scale.x=this.health/100,this.healthGuageFront2.scale.x+=(this.health/100-this.healthGuageFront2.scale.x)/30;var e=this.container.toGlobal(new PIXI.Point);if(this.healthGuage.position.x=e.x/Game.windowScaleFactor-this.healthGuage.width/2,this.healthGuage.position.y=e.y/Game.windowScaleFactor-this.healthGuage.height/2-110,this.frontWheel.steerValue+=(this.targetSteerAmount-this.frontWheel.steerValue)/10,this.onScreen=!1,e.x/Game.windowScaleFactor>-100&&e.x/Game.windowScaleFactor<Game.stageWidth+100&&e.y/Game.windowScaleFactor>-100&&e.y/Game.windowScaleFactor<Game.stageHeight+100&&(this.onScreen=!0),1==this.seeking){var t=-this.getAngle(this.container.position.x,this.container.position.y,this.scene.dodgemContainer.position.x,this.scene.dodgemContainer.position.y)-Math.PI/2;this.body.angle+=(t-this.body.angle)/15}this.setArmDirection(this.targetSteerAmount),this.tag.visible=!this.onScreen},e.prototype.destroy=function(){this.seeking=!1,this.destroyed=!0,this.drivingTimeline=this.scene.killTween(this.drivingTimeline),this.ramTimeline=this.scene.killTween(this.ramTimeline),this.disabledTimeline=this.scene.killTween(this.disabledTimeline),Game.displayStore.returnPooledItem(this.healthGuageBack),Game.displayStore.returnPooledItem(this.healthGuageFront),Game.displayStore.returnPooledItem(this.healthGuageFront2),Game.displayStore.returnPooledItem(this.healthGuage),Game.displayStore.returnPooledItem(this.container),Game.displayStore.returnPooledItem(this.car),Game.displayStore.returnPooledItem(this.electricFrames),Game.displayStore.returnPooledItem(this.rightArm),Game.displayStore.returnPooledItem(this.leftArm),Game.displayStore.returnPooledItem(this.head),Game.displayStore.returnPooledItem(this.car),Game.displayStore.returnPooledItem(this.bumper),Game.displayStore.returnPooledItem(this.player),this.container.parent&&this.container.parent.removeChild(this.container)},e}(),DodgemsTicket=function(){function e(e,t){this.scene=e,this.game=e.game,this.index=t,this.available=!0,this.destroyed=!1,this.magnetise=!1,this.body=new p2.Body,this.shape=new p2.Circle({radius:400,sensor:!0}),this.body.addShape(this.shape),this.shape.collisionGroup=this.scene.physicsManager.TICKET,this.shape.collisionMask=this.scene.physicsManager.PLAYER}return e.prototype.spawn=function(e,t){if(1!=this.destroyed){this.available=!1;var i=Game.coreData.getCurrentTickets()-Game.coreData.getCurrentRide().startingTickets;i%3==0&&0!=i&&Game.getRandom(0,1)>this.scene.health/1e3?this.ticket=Game.ticketPool.getHeart():this.ticket=Game.ticketPool.getTicket(),this.mainHolder=e,this.body.position[0]=t.x,this.body.position[1]=Game.stageHeight-t.y,this.ticket.container.position.x=t.x,this.ticket.container.position.y=t.y,this.magnetise=!1,this.scene.physicsManager.addBodyToWorld(this.body),this.mainHolder.addChildAt(this.ticket.container,this.mainHolder.children.length-2)}},e.prototype.collect=function(){this.scene.physicsManager.removeBodyFromWorld(this.body),this.magnetise=!0},e.prototype.tick=function(){1==this.magnetise&&0==this.available&&(this.getDistance(this.ticket.container.position,this.scene.dodgemContainer.position)>100?(this.ticket.container.position.x+=(this.scene.dodgemContainer.position.x-this.ticket.container.position.x)/10,this.ticket.container.position.y+=(this.scene.dodgemContainer.position.y-this.ticket.container.position.y)/10):(this.magnetise=!1,this.available=!0,1==this.ticket.isHeart&&this.scene.addHealth(300),this.ticket.collect(),this.scene.collectTicket()))},e.prototype.getDistance=function(e,t){var i=0,s=0;return i=t.x-e.x,i*=i,s=t.y-e.y,s*=s,Math.sqrt(i+s)},e.prototype.pause=function(){this.ticket&&this.ticket.pause()},e.prototype.resume=function(){this.ticket&&this.ticket.resume()},e.prototype.destroy=function(){this.destroyed=!0,this.scene.physicsManager.removeBodyFromWorld(this.body),this.body=null,this.ticket&&this.ticket.destroy()},e}(),DodgemsTimer=function(){function e(e){this.scene=e,this.game=e.game,this.time=0,this.destroyed=!1,this.timeText=Game.displayStore.getBitmapText("timer-font"),this.timeText.scale.x=this.timeText.scale.y=.55,this.timeText.text=this.convertSecondsToTime(this.time),this.timeText.position.x=-this.timeText.width/2,this.timeText.tint=16777215,this.container=Game.displayStore.getContainer("dodgems/timer-holder"),this.timerInner=this.container.getContainer("dodgems/timer-inner"),this.timerIcon=this.timerInner.getSprite("dodgems/timer-icon"),this.container.position.x=540,this.container.position.y=40,this.timerInner.addChild(this.timeText),this.timeText.position.x=this.timerIcon.position.x+30,this.timeText.position.y=this.timerIcon.position.y-5,this.timerInner.position.x=-60,this.timerInner.position.y=this.container.height/4,this.isPaused=!1}return e.prototype.start=function(){this.addTime(15)},e.prototype.addTime=function(e){function t(){this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.time<s?(this.time++,this.timeText.text=this.convertSecondsToTime(this.time),this.timerTimeline.call(t,null,this,i)):this.timerTimeline.call(this.tickTime,null,this,"+=1")}this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.timeText.tint=16777215;var i=.05;this.timerTimeline.call(t,null,this,i);var s=this.time+e},e.prototype.pause=function(){this.isPaused=!0,this.scene.pauseResumeTween(this.timerTimeline,"pause")},e.prototype.resume=function(){this.isPaused=!1,this.scene.pauseResumeTween(this.timerTimeline,"resume")},e.prototype.convertSecondsToTime=function(e){var t=Math.floor(e/60),i=e%60,s=String(t),o=String(i);return i<10&&(o="0"+i),s+":"+o},e.prototype.destroy=function(){this.timerTimeline=this.scene.killTween(this.timerTimeline),this.destroyed=!0},e.prototype.tickTime=function(){1!=this.destroyed&&1!=this.isPaused&&(this.time>0?(this.time--,this.timeText.text=this.convertSecondsToTime(this.time),this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.timerTimeline.call(this.tickTime,null,this,1),this.time<=5&&Game.playSound("dodgems/time-running-out.mp3",.3),this.time<=5?this.timeText.tint=16711680:this.timeText.tint=16777215):this.scene.endGame(this.scene))},e}(),DodgemsManager=function(){function e(e,t){this.scene=e,this.game=e.game,this.container=t,this.dodgems=[],this.activeDodgems=[],this.waitingDisabledDodgems=[],this.disabledDodgems=[],this.tags=[],this.armIsReady=!0,this.movingToPickUp=!1,this.spawnCount=0,this.spawnCounter=0,this.spawnCounterThreshold=360,this.armCounter=0,this.armCounterThreshold=180,this.healthLayer=Game.displayStore.getContainer("dodgems/health-guage-layer"),this.repairArm=Game.displayStore.getContainer("dodgems/repair-arm"),this.repairLegHolder=this.repairArm.getContainer("dodgems/repair-legs-container"),this.repairArm.rotation=Math.PI/2,this.repairArm.position.x=4*Game.stageWidth,this.repairArmShadow=this.repairArm.getSprite("dodgems/repair-arm-shadow"),this.repairArmExtra=this.repairArm.getSprite("dodgems/repair-arm-extra"),this.repairArmExtraShadow=this.repairArm.getSprite("dodgems/repair-arm-extra-shadow"),this.repairArmMain=this.repairArm.getSprite("dodgems/repair-arm"),this.repairArmExtra.scale.x=25,this.repairArmExtraShadow.scale.x=25,this.repairArmExtraShadow.tint=0,this.repairArmExtra.position.x=this.repairArmMain.width-356,this.repairArmExtraShadow.position.x=this.repairArmMain.width-356,this.repairArmExtraShadow.position.y=this.repairArmShadow.position.y,this.repairArmShadow.tint=0,this.leg1=Game.displayStore.getSprite("dodgems/repair-leg"),this.leg2=Game.displayStore.getSprite("dodgems/repair-leg"),this.leg3=Game.displayStore.getSprite("dodgems/repair-leg"),this.leg4=Game.displayStore.getSprite("dodgems/repair-leg"),this.repairArmShadow.alpha=.13,this.repairArmExtraShadow.alpha=.13,this.repairLegHolder.addChild(this.leg1),this.repairLegHolder.addChild(this.leg2),this.repairLegHolder.addChild(this.leg3),this.repairLegHolder.addChild(this.leg4),this.leg2.rotation=Math.PI/2,this.leg3.rotation=Math.PI,this.leg4.rotation=1.5*Math.PI,this.leg1.position.x=50,this.leg2.position.y=50,this.leg3.position.x=-50,this.leg4.position.y=-50,this.repairLegHolder.position.x=-15,this.repairLegHolder.position.y=15,this.repairLegHolder.rotation=Math.PI/4}return e.prototype.startDodgemsDriving=function(){for(var e=0;e<this.activeDodgems.length;e++)this.activeDodgems[e].startDriving()},e.prototype.createDodgems=function(){for(var t=0;t<e.MAX_DODGEMS;t++){var i=Game.displayStore.getSprite("dodgems/tag");i.position.x=500,i.position.y=300,i.visible=!1,this.tags.push(i),this.scene.uiLayer.addChild(i);var s=new DodgemsEnemy(this,this.scene,this.healthLayer,i,t);this.dodgems.push(s)}this.scene.container.addChildAt(this.healthLayer,1),this.container.addChild(this.repairArm)},e.prototype.addActiveDodgem=function(){for(var e=0;e<this.dodgems.length;e++)if(0==this.dodgems[e].active){this.dodgems[e].initialSpawn(),this.container.addChild(this.dodgems[e].container),this.scene.container.addChildAt(this.healthLayer,1),this.container.addChild(this.repairArm),this.activeDodgems.push(this.dodgems[e]);break}},e.prototype.tryDisableDodgem=function(e){this.scene.disableEnemy(),this.waitingDisabledDodgems.push(e)},e.prototype.disableDodgem=function(e,t){t.currentlyPickUpDodgem=e,t.movingToPickUp=!0,t.disabledDodgems.push(e),t.armIsReady=!1,t.disableDodgemTimeline=t.scene.killTween(t.disableDodgemTimeline),t.disableDodgemTimeline=new TimelineMax,t.pickupTween=TweenMax.to(t.repairArm.position,1,{x:e.container.position.x,y:e.container.position.y,ease:Sine.easeInOut}),t.disableDodgemTimeline.add([TweenMax.to(t.repairArm,1,{ease:Back.easeOut,rotation:0}),t.pickupTween]),t.disableDodgemTimeline.call(function(){t.movingToPickUp=!1,t.currentlyPickUpDodgem=null,t.scene.physicsManager.unbindSpriteFromBody(e.container),t.repairArm.addChildAt(e.container,0),e.container.position.x=0,e.container.position.y=0,e.shape.collisionGroup=t.scene.physicsManager.DISABLED,e.shape.collisionMask=t.scene.physicsManager.LEVEL},null,t),t.disableDodgemTimeline.call(function(){Game.playSound("dodgems/arm-pickup.mp3",.8)},null,t,.5),t.disableDodgemTimeline.add([TweenMax.to(t.repairArm,1,{ease:Sine.easeIn,rotation:Math.PI/2}),TweenMax.to(t.repairArm.position,1,{x:2.5*Game.stageWidth,ease:Sine.easeInOut})],"+=0.5"),t.disableDodgemTimeline.call(function(){e.hide(),t.container.addChild(t.repairArm),t.armIsReady=!0},null,t,3),t.disableDodgemTimeline.add(TweenMax.to(e.container.scale,.3,{ease:Power2.easeInOut,x:1.3,y:1.3}),1),t.disableDodgemTimeline.add(TweenMax.to(this.leg1.position,.2,{ease:Back.easeOut,x:110}),.9),t.disableDodgemTimeline.add(TweenMax.to(this.leg2.position,.2,{ease:Back.easeOut,y:110}),.9),t.disableDodgemTimeline.add(TweenMax.to(this.leg3.position,.2,{ease:Back.easeOut,x:-110}),.9),t.disableDodgemTimeline.add(TweenMax.to(this.leg4.position,.2,{ease:Back.easeOut,y:-110}),.9),t.disableDodgemTimeline.add(TweenMax.to(this.leg1.position,.3,{ease:Back.easeOut,x:80}),1.2),t.disableDodgemTimeline.add(TweenMax.to(this.leg2.position,.3,{ease:Back.easeOut,y:80}),1.2),t.disableDodgemTimeline.add(TweenMax.to(this.leg3.position,.3,{ease:Back.easeOut,x:-80}),1.2),t.disableDodgemTimeline.add(TweenMax.to(this.leg4.position,.3,{ease:Back.easeOut,y:-80}),1.2),t.disableDodgemTimeline.call(t.scene.collectEnemy,[e.container.position],t.scene,.5)},e.prototype.checkSpawn=function(){this.disabledDodgems[0]&&(this.disabledDodgems[0].spawn(),this.spawnCount++,this.container.addChild(this.disabledDodgems[0].container),this.container.addChild(this.repairArm),this.disabledDodgems.splice(0,1),this.spawnCount%3==0&&this.spawnCount>0&&this.activeDodgems.length<e.MAX_DODGEMS&&this.addActiveDodgem())},e.prototype.checkArm=function(){this.waitingDisabledDodgems[0]&&1==this.armIsReady&&(this.disableDodgem(this.waitingDisabledDodgems[0],this),this.waitingDisabledDodgems.splice(0,1))},e.prototype.tick=function(){1==this.movingToPickUp&&this.pickupTween.updateTo({x:this.currentlyPickUpDodgem.container.position.x,y:this.currentlyPickUpDodgem.container.position.y},!1);for(var e=0;e<this.activeDodgems.length;e++){this.activeDodgems[e].tick();var t,i=this.activeDodgems[e].container.toGlobal(new PIXI.Point(0,0)).x/Game.windowScaleFactor,s=this.activeDodgems[e].container.toGlobal(new PIXI.Point(0,0)).y/Game.windowScaleFactor;"left"==this.getDodgemSide(this.activeDodgems[e])&&(this.tags[e].position.x=0,this.tags[e].position.y+=(s-this.tags[e].position.y)/5,t=s<0?this.roundDecimal(Math.PI/2+Math.PI/4,2):s>Game.stageHeight?this.roundDecimal(Math.PI/2-Math.PI/4,2):this.roundDecimal(Math.PI/2,2)),"right"==this.getDodgemSide(this.activeDodgems[e])&&(this.tags[e].position.x=Game.stageWidth,this.tags[e].position.y+=(s-this.tags[e].position.y)/5,s<0?(this.roundDecimal(this.tags[e].rotation,2)==this.roundDecimal(1.25*Math.PI,2)&&(this.tags[e].rotation=this.roundDecimal(-Math.PI/2-Math.PI/4,2)),t=this.roundDecimal(-Math.PI/2-Math.PI/4,2)):t=s>Game.stageHeight?this.roundDecimal(-Math.PI/2+Math.PI/4,2):this.roundDecimal(-Math.PI/2,2)),"top"==this.getDodgemSide(this.activeDodgems[e])&&(this.tags[e].position.x+=(i-this.tags[e].position.x)/5,this.tags[e].position.y=0,i<0?t=this.roundDecimal(.75*Math.PI,2):i>Game.stageWidth?(this.roundDecimal(this.tags[e].rotation,2)==this.roundDecimal(-Math.PI/2-Math.PI/4,2)&&(this.tags[e].rotation=this.roundDecimal(1.25*Math.PI,2)),t=this.roundDecimal(1.25*Math.PI,2)):t=this.roundDecimal(Math.PI,2)),"bottom"==this.getDodgemSide(this.activeDodgems[e])&&(this.tags[e].position.x+=(i-this.tags[e].position.x)/5,this.tags[e].position.y=Game.stageHeight,t=i<0?this.roundDecimal(Math.PI/4,2):i>Game.stageWidth?this.roundDecimal(-Math.PI/4,2):0),this.tags[e].rotation+=(t-this.tags[e].rotation)/5,this.tags[e].position.x<0&&(this.tags[e].position.x=0),this.tags[e].position.x>Game.stageWidth&&(this.tags[e].position.x=Game.stageWidth),this.tags[e].position.y<0&&(this.tags[e].position.y=0),this.tags[e].position.y>Game.stageHeight&&(this.tags[e].position.y=Game.stageHeight);var o;(o=1.6-this.getDistance(new PIXI.Point(this.activeDodgems[e].container.toGlobal(new PIXI.Point(0,0)).x/Game.windowScaleFactor,this.activeDodgems[e].container.toGlobal(new PIXI.Point(0,0)).y/Game.windowScaleFactor),new PIXI.Point(Game.stageWidth/2,Game.stageHeight/2))/1200)<.5&&(o=.5),o>1.2&&(o=1.2),this.tags[e].scale.x=this.tags[e].scale.y=1.2*o}this.spawnCounter<this.spawnCounterThreshold?this.spawnCounter++:(this.spawnCounter=0,this.checkSpawn()),this.armCounter<this.armCounterThreshold?this.armCounter++:(this.armCounter=0,this.checkArm())},e.prototype.roundDecimal=function(e,t){return Math.round(e*(10*t))/(10*t)},e.prototype.getDodgemSide=function(e){var t,i=Math.PI+this.getAngle(e.container.toGlobal(new PIXI.Point(0,0)).x/Game.windowScaleFactor,e.container.toGlobal(new PIXI.Point(0,0)).y/Game.windowScaleFactor,Game.stageWidth/2,Game.stageHeight/2);return i>0&&i<Math.PI/4?t="left":i>2*Math.PI-Math.PI/4&&i<2*Math.PI?t="left":i<2*Math.PI-Math.PI/4&&i>Math.PI+Math.PI/4?t="top":i<Math.PI+Math.PI/4&&i>Math.PI-Math.PI/4?t="right":i<Math.PI-Math.PI/4&&i>Math.PI/4&&(t="bottom"),t},e.prototype.getDistance=function(e,t){var i=0,s=0;return i=t.x-e.x,i*=i,s=t.y-e.y,s*=s,Math.sqrt(i+s)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.pause=function(){for(var e=0;e<this.activeDodgems.length;e++)this.activeDodgems[e].pause();this.scene.pauseResumeTween(this.disableDodgemTimeline,"pause")},e.prototype.resume=function(){for(var e=0;e<this.activeDodgems.length;e++)this.activeDodgems[e].resume();this.scene.pauseResumeTween(this.disableDodgemTimeline,"resume")},e.prototype.destroy=function(){for(e=0;e<this.dodgems.length;e++)this.dodgems[e].destroy();this.dodgems=[],this.activeDodgems=[],this.waitingDisabledDodgems=[],this.disabledDodgems=[];for(var e=0;e<this.tags.length;e++)Game.displayStore.returnPooledItem(this.tags[e]);Game.displayStore.returnPooledItem(this.leg1),Game.displayStore.returnPooledItem(this.leg2),Game.displayStore.returnPooledItem(this.leg3),Game.displayStore.returnPooledItem(this.leg4),this.disableDodgemTimeline=this.scene.killTween(this.disableDodgemTimeline),this.spawnDodgemTimeline=this.scene.killTween(this.disableDodgemTimeline),this.pickupTween=this.scene.killTween(this.pickupTween)},e.MAX_DODGEMS=8,e}(),AquaJetpackPhysicsManager=function(){function e(e,t){this.physicsEnabled=!0,this.resizeRatio=1,this.scene=e,this.mainContainer=t}return e.prototype.initPhysicsWorld=function(e,t,i){this.world=new p2.World({gravity:[0,-150]}),this.particleFireCount=0,this.particleFireCountLimit=2,this.autoRotateEaseAmount=10,this.autoLevelStrength=80,this.laneLimitOffset=10,1==Game.onDesktop?this.rayCastCountLimit=1:this.rayCastCountLimit=10,this.rayCastCount=0,this.leftLaneLimit=t,this.rightLaneLimit=i,this.world.broadphase=new p2.NaiveBroadphase(1),this.liftedOffStart=!1,this.checkStartState=!1,this.underwaterBuffer=50,this.collisionGroupCharacter=Math.pow(2,0),this.collisionGroupRunners=Math.pow(2,1),this.collisionGroupPickups=Math.pow(2,2),this.collisionGroupFish=Math.pow(2,3),this.collisionGroupStartPlatform=Math.pow(2,4),this.collisionGroupLaneLimits=Math.pow(2,5),this.collisionGroupWaterLevel=Math.pow(2,6),this.collisionGroupTickets=Math.pow(2,7),this.collisionGroupSplashParticles=Math.pow(2,8),this.collisionGroupSplashPlane=Math.pow(2,9),this.leftNozzleParticlePos=[0,0],this.rightNozzleParticlePos=[0,0],this.nozzleParticleRadius=96,this.leftNozzleBaseAngle=.5*Math.PI+1.8,this.rightNozzleBaseAngle=.5*Math.PI-1.8,this.leftNozzleCurrentAngle=0,this.rightNozzleCurrentAngle=0,this.underWater=!1,this.nozzleForce=0,this.nozzlePowerFactor=.5,this.nozzleSpinForce=90,this.floatRotateEaseAmount=10,this.nozzleSpacing=90,this.torsoShapeHeight=100,this.endPowerHeightBuffer=50,this.waterParticlesPlane=new p2.Plane,this.waterParticlesPlane.sensor=!0,this.waterParticlesPlaneBody=new p2.Body({mass:0,position:[0,Game.stageHeight-520]}),this.waterParticlesPlaneBody.addShape(this.waterParticlesPlane),this.world.addBody(this.waterParticlesPlaneBody),this.waterPlane=new p2.Plane,this.waterPlane.sensor=!0,this.waterBody=new p2.Body({mass:0,position:[0,Game.stageHeight-540],angle:0,collisionResponse:!1}),this.waterBody.addShape(this.waterPlane),this.world.addBody(this.waterBody),this.waterSplashPlaneShape=new p2.Plane,this.waterSplashPlaneShape.sensor=!0,this.waterSplashPlaneShape.collisionGroup=this.collisionGroupSplashPlane,this.waterSplashPlaneShape.collisionMask=this.collisionGroupSplashParticles|this.collisionGroupFish,this.waterSplashPlaneBody=new p2.Body({mass:0,position:[0,Game.stageHeight-700],angle:0}),this.waterSplashPlaneBody.addShape(this.waterSplashPlaneShape),this.world.addBody(this.waterSplashPlaneBody),this.skyPlaneBody=new p2.Body({mass:0,position:[0,Game.stageHeight+500],angle:Math.PI}),this.skyPlaneShape=new p2.Plane,this.skyPlaneShape.collisionGroup=this.collisionGroupLaneLimits,this.skyPlaneShape.collisionMask=this.collisionGroupCharacter,this.skyPlaneBody.addShape(this.skyPlaneShape),this.world.addBody(this.skyPlaneBody),this.startPlatform=new p2.Body({mass:0,position:[e,Game.stageHeight-510]}),this.startPlatformShape=new p2.Box({width:148,height:48}),this.startPlatformShape.collisionGroup=this.collisionGroupStartPlatform,this.startPlatformShape.collisionMask=this.collisionGroupCharacter,this.startPlatform.addShape(this.startPlatformShape),this.world.addBody(this.startPlatform),this.leftLaneLimitPlaneBody=new p2.Body({mass:0,position:[this.leftLaneLimit-this.laneLimitOffset,0],angle:.5*-Math.PI}),this.leftLaneLimitPlaneShape=new p2.Plane,this.leftLaneLimitPlaneShape.collisionGroup=this.collisionGroupLaneLimits,this.leftLaneLimitPlaneShape.collisionMask=this.collisionGroupCharacter,this.leftLaneLimitPlaneBody.addShape(this.leftLaneLimitPlaneShape),this.world.addBody(this.leftLaneLimitPlaneBody),this.rightLaneLimitPlaneBody=new p2.Body({mass:0,position:[this.rightLaneLimit+this.laneLimitOffset,0],angle:.5*Math.PI}),this.rightLaneLimitPlaneShape=new p2.Plane,this.rightLaneLimitPlaneShape.collisionGroup=this.collisionGroupLaneLimits,this.rightLaneLimitPlaneShape.collisionMask=this.collisionGroupCharacter,this.rightLaneLimitPlaneBody.addShape(this.rightLaneLimitPlaneShape),this.world.addBody(this.rightLaneLimitPlaneBody),this.waterLevelRayResult=new p2.RaycastResult;s=this;this.waterLevelRay=new p2.Ray({mode:p2.Ray.ALL,collisionGroup:this.collisionGroupWaterLevel,collisionMask:this.collisionGroupCharacter|this.collisionGroupFish|this.collisionGroupSplashParticles,callback:function(e){s.rayHitCallback(s.waterLevelRayResult,s.waterLevelRay)}}),this.waterLiftForce=[0,0],this.waterViscousForce=[0,0],this.centerOfBuoyancy=[0,0],this.shapePos=[0,0],this.liftForce=4e-4,this.viscosity=.6,this.shapeAngle=0,this.aabb=new p2.AABB,this.vel=[0,0];var s=this;this.world.on("beginContact",function(e){s.checkCollision(s,e)}),this.world.on("endContact",function(e){}),this.world.on("postStep",function(e){}),this.physicsEnabled=!0},e.prototype.startStateDelay=function(){this.checkStartStateDelay=TweenMax.delayedCall(1,this.enableStartStateCheck,null,this)},e.prototype.enableStartStateCheck=function(){this.checkStartState=!0,this.checkStartStateDelay=this.scene.killTween(this.checkStartStateDelay)},e.prototype.rayHitCallback=function(e,t){var i;e.body.shapes[0].collisionGroup==this.collisionGroupCharacter&&(i="character"),e.body.shapes[0].collisionGroup==this.collisionGroupFish&&(i="fish"),this.scene.waterSurfaceBroken(e.body,e.body.position,i)},e.prototype.checkWaterLevelBroken=function(){if(1!=Game.isLowEndIPad){this.scene.resetWaterLevelBroken(),this.waterLevelRayResult.reset();var e=[this.leftLaneLimit,Game.stageHeight-520],t=[this.rightLaneLimit,Game.stageHeight-520];p2.vec2.copy(this.waterLevelRay.from,e),p2.vec2.copy(this.waterLevelRay.to,t),this.waterLevelRay.update(),this.world.raycast(this.waterLevelRayResult,this.waterLevelRay)}},e.prototype.checkCollision=function(e,t){t.bodyA!=e.leftLaneLimitPlaneBody&&t.bodyA!=e.rightLaneLimitPlaneBody&&t.bodyB!=e.leftLaneLimitPlaneBody&&t.bodyB!=e.rightLaneLimitPlaneBody?t.bodyA!=e.waterSplashPlaneBody?t.bodyB!=e.waterSplashPlaneBody?(e.scene.checkOrbPickup(t.bodyA),e.scene.checkOrbPickup(t.bodyB),e.scene.checkTicketPickup(t.bodyA),e.scene.checkTicketPickup(t.bodyB)):e.scene.resetSplashParticle(t.bodyA):e.scene.resetSplashParticle(t.bodyB):e.scene.hitWall()},e.prototype.getCharacterPhysicsElements=function(e){var t=Game.stageHeight-380,i=new p2.Body({mass:.1,position:[e,t+80]}),s=new p2.Circle({radius:38});s.collisionGroup=this.collisionGroupCharacter,s.collisionMask=this.collisionGroupPickups|this.collisionGroupFish|this.collisionGroupStartPlatform|this.collisionGroupLaneLimits|this.collisionGroupWaterLevel|this.collisionGroupTickets,i.addShape(s);var o=new p2.Body({mass:1,position:[e,t]}),a=new p2.Box({width:50,height:this.torsoShapeHeight}),r=new p2.Box({width:50,height:this.torsoShapeHeight});this.torsoBodyRef=o,a.collisionGroup=this.collisionGroupCharacter,a.collisionMask=this.collisionGroupPickups|this.collisionGroupFish|this.collisionGroupStartPlatform|this.collisionGroupLaneLimits|this.collisionGroupWaterLevel|this.collisionGroupTickets,r.collisionGroup=this.collisionGroupCharacter,r.collisionMask=this.collisionGroupPickups|this.collisionGroupFish|this.collisionGroupStartPlatform|this.collisionGroupLaneLimits|this.collisionGroupWaterLevel|this.collisionGroupTickets,o.addShape(a,[-50,0]),o.addShape(r,[50,0]);var n=new p2.Body({mass:.1,position:[e,t-40]}),h=new p2.Box({widht:28,height:66});this.leftLegRef=n,n.angle=Math.PI,h.collisionGroup=this.collisionGroupCharacter,h.collisionMask=this.collisionGroupPickups|this.collisionGroupFish|this.collisionGroupStartPlatform|this.collisionGroupLaneLimits|this.collisionGroupWaterLevel|this.collisionGroupTickets,n.addShape(h);var l=new p2.Body({mass:.1,position:[e,t-40]}),p=new p2.Box({widht:28,height:66});this.rightLegRef=l,l.angle=Math.PI,p.collisionGroup=this.collisionGroupCharacter,p.collisionMask=this.collisionGroupPickups|this.collisionGroupFish|this.collisionGroupStartPlatform|this.collisionGroupLaneLimits|this.collisionGroupWaterLevel|this.collisionGroupTickets,l.addShape(p);var c=new p2.LockConstraint(i,o,{collideConnected:!1,localOffsetB:[0,-90]});c.setStiffness(9);var d=new p2.RevoluteConstraint(o,n,{collideConnected:!1,localPivotA:[-20,-36],localPivotB:[0,-50]});d.setLimits(Math.PI,Math.PI),this.leftLegHingeRef=d;var u=new p2.RevoluteConstraint(o,l,{collideConnected:!1,localPivotA:[20,-36],localPivotB:[0,-50]});return u.setLimits(Math.PI,Math.PI),this.rightLegHingeRef=u,this.world.addBody(i),this.world.addBody(o),this.world.addBody(n),this.world.addBody(l),this.world.addConstraint(c),this.world.addConstraint(d),this.world.addConstraint(u),{characterHeadBody:i,characterHeadShape:s,characterJetpackTorsoBody:o,characterJetpackTorsoShape1:a,characterJetpackTorsoShape2:r,characterLeftLegBody:n,characterLeftLegShape:h,characterRightLegBody:l,characterRightLegShape:p,characterHeadConstraint:c,characterLeftLegConstraint:d,characterLeftRightConstraint:u}},e.prototype.getWaterParticles=function(){var e=new p2.Body({mass:Game.getRandom(.1,.4)}),t=new p2.Circle({radius:5});return e.damping=Game.getRandom(.2,.4),t.collisionGroup=this.collisionGroupSplashParticles,t.collisionMask=this.collisionGroupSplashPlane,t.sensor=!0,e.addShape(t),{body:e,shape:t}},e.prototype.getSplashParticles=function(){var e=new p2.Body({mass:Game.getRandom(.1,.4)}),t=new p2.Circle({radius:5});return e.damping=Game.getRandom(.2,.4),t.collisionGroup=this.collisionGroupSplashParticles,t.collisionMask=this.collisionGroupSplashPlane,t.sensor=!0,e.addShape(t),{body:e,shape:t}},e.prototype.getTicketPhysicsElements=function(){var e=new p2.Body({mass:.2}),t=new p2.Circle({radius:42});return e.gravityScale=0,t.collisionGroup=this.collisionGroupTickets,t.collisionMask=this.collisionGroupCharacter,t.sensor=!0,e.addShape(t),{body:e,shape:t}},e.prototype.getFishParticleElements=function(){var e=new p2.Body({mass:Game.getRandom(15,25)}),t=new p2.Circle({radius:5});return e.damping=Game.getRandom(.2,.6),t.sensor=!0,t.collisionGroup=this.collisionGroupSplashParticles,t.collisionMask=this.collisionGroupSplashPlane,e.addShape(t),{body:e,shape:t}},e.prototype.getPickupPhysicsElement=function(){var e=new p2.Body({mass:.2}),t=new p2.Circle({radius:42});return e.gravityScale=0,t.collisionGroup=this.collisionGroupPickups,t.collisionMask=this.collisionGroupCharacter,t.sensor=!0,e.addShape(t),{body:e,shape:t}},e.prototype.getPickupParticleElements=function(){var e=new p2.Body({mass:Game.getRandom(.2,.6)}),t=new p2.Circle({radius:5});return e.damping=Game.getRandom(.2,.4),t.collisionGroup=this.collisionGroupSplashParticles,t.collisionMask=this.collisionGroupSplashPlane,t.sensor=!0,e.addShape(t),{body:e,shape:t}},e.prototype.getFishPhysicsElements=function(){var e=new p2.Body({mass:.25}),t=new p2.Box({width:65,height:28});e.addShape(t),t.collisionGroup=this.collisionGroupFish,t.collisionMask=this.collisionGroupSplashPlane|this.collisionGroupCharacter|this.collisionGroupWaterLevel;var i=new p2.Body({mass:.25}),s=new p2.Box({width:65,height:28});i.addShape(s),s.collisionGroup=this.collisionGroupFish,s.collisionMask=this.collisionGroupSplashPlane|this.collisionGroupCharacter|this.collisionGroupWaterLevel;var o=new p2.RevoluteConstraint(e,i,{collideConnected:!1,localPivotA:[-22,0],localPivotB:[22,0]});return o.setLimits(-.5,.5),o.enableMotor(),o.setMotorSpeed(0),{frontBody:e,frontShape:t,rearBody:i,rearShape:s,constraint:o}},e.prototype.addBodyToWorld=function(e){this.world.addBody(e)},e.prototype.removeBodyFromWorld=function(e){this.world.removeBody(e)},e.prototype.removeConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.addConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.removeSpringFromWorld=function(e){this.world.removeSpring(e)},e.prototype.addSpringToWorld=function(e){this.world.addSpring(e)},e.prototype.resizeElements=function(e,t){this.canvasHeight=t,this.canvasWidth=e,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},e.prototype.stepPhysics=function(e,t){0!=this.physicsEnabled&&this.world&&(this.leftNozzleOn=e,this.rightNozzleOn=t,this.checkLiftOff(),this.autoLevel(),this.calcNozzlePower(),this.manageNozzleParticlePositionLeft(),this.manageNozzleParticlePositionRight(),this.fireNozzles(),this.manageFloat(),this.manageUnderwater(),this.world.step(1/30),1!=Game.isLowEndIPad&&(++this.rayCastCount>=this.rayCastCountLimit&&(this.checkWaterLevelBroken(),this.rayCastCount=0),++this.particleFireCount>=this.particleFireCountLimit&&(this.particleFireCount=0,this.fireSingleWaterParticle("left"),this.fireSingleWaterParticle("right"))))},e.prototype.autoLevel=function(){this.torsoBodyRef.angularVelocity+=(0-this.torsoBodyRef.angularVelocity)/this.autoLevelStrength},e.prototype.checkLiftOff=function(){0!=this.checkStartState&&1!=this.liftedOffStart&&1!=this.startPlatform.overlaps(this.rightLegRef)&&1!=this.startPlatform.overlaps(this.leftLegRef)&&(this.liftedOffStart=!0,this.world.removeBody(this.startPlatform),this.rightLegHingeRef.setLimits(Math.PI-.5,Math.PI+1),this.leftLegHingeRef.setLimits(Math.PI-1,Math.PI+.5),this.scene.updateLiftOffState())},e.prototype.fireSingleWaterParticle=function(e){"left"!=e?"right"!=e||this.scene.fireWaterParticle(e,this.rightNozzleParticlePos,this.torsoBodyRef.angle+.5*Math.PI):this.scene.fireWaterParticle(e,this.leftNozzleParticlePos,this.torsoBodyRef.angle+.5*Math.PI)},e.prototype.manageNozzleParticlePositionLeft=function(){this.leftNozzleCurrentAngle=this.leftNozzleBaseAngle+this.torsoBodyRef.angle;var e=Math.cos(this.leftNozzleCurrentAngle),t=Math.sin(this.leftNozzleCurrentAngle),i=this.torsoBodyRef.position[0]+this.nozzleParticleRadius*e+Game.getRandom(-10,10),s=this.torsoBodyRef.position[1]+this.nozzleParticleRadius*t+Game.getRandom(-10,10);this.leftNozzleParticlePos[0]=i,this.leftNozzleParticlePos[1]=s},e.prototype.manageNozzleParticlePositionRight=function(){this.rightNozzleCurrentAngle=this.rightNozzleBaseAngle+this.torsoBodyRef.angle;var e=Math.cos(this.rightNozzleCurrentAngle),t=Math.sin(this.rightNozzleCurrentAngle),i=this.torsoBodyRef.position[0]+this.nozzleParticleRadius*e+Game.getRandom(-10,10),s=this.torsoBodyRef.position[1]+this.nozzleParticleRadius*t+Game.getRandom(-10,10);this.rightNozzleParticlePos[0]=i,this.rightNozzleParticlePos[1]=s},e.prototype.calcNozzlePower=function(){var e=Game.stageHeight-this.endPowerHeightBuffer-this.torsoBodyRef.position[1];this.nozzleForce=this.nozzlePowerFactor*e},e.prototype.manageFloat=function(){for(var e=0;e<this.torsoBodyRef.shapes.length;e++){var t=this.torsoBodyRef.shapes[e];this.torsoBodyRef.vectorToWorldFrame(this.shapePos,t.position),p2.vec2.add(this.shapePos,this.shapePos,this.torsoBodyRef.position),this.shapeAngle=t.angle+this.torsoBodyRef.angle,t.computeAABB(this.aabb,this.shapePos,this.shapeAngle);var i;if(this.aabb.upperBound[1]<this.waterBody.position[1])p2.vec2.copy(this.centerOfBuoyancy,this.shapePos),i=t.area;else{if(!(this.aabb.lowerBound[1]<this.waterBody.position[1]))return;var s=this.aabb.upperBound[0]-this.aabb.lowerBound[0],o=this.aabb.upperBound[1]-this.aabb.lowerBound[1];i=s*o,p2.vec2.set(this.centerOfBuoyancy,this.aabb.lowerBound[0]+s/2,this.aabb.lowerBound[1]+o/2)}p2.vec2.subtract(this.waterLiftForce,this.waterBody.position,this.centerOfBuoyancy),p2.vec2.scale(this.waterLiftForce,this.waterLiftForce,i*this.liftForce),this.waterLiftForce[0]=0,p2.vec2.subtract(this.centerOfBuoyancy,this.centerOfBuoyancy,this.torsoBodyRef.position),this.torsoBodyRef.getVelocityAtPoint(this.vel,this.centerOfBuoyancy),p2.vec2.scale(this.waterViscousForce,this.vel,-this.viscosity),this.torsoBodyRef.applyForce(this.waterViscousForce,this.centerOfBuoyancy),this.torsoBodyRef.applyForce(this.waterLiftForce,this.centerOfBuoyancy)}},e.prototype.manageUnderwater=function(){this.torsoBodyRef.position[1]<this.waterBody.position[1]-this.underwaterBuffer&&this.setUnderwater(!0),this.torsoBodyRef.position[1]>this.waterBody.position[1]+this.underwaterBuffer&&this.setUnderwater(!1)},e.prototype.setUnderwater=function(e){e!=this.underWater&&(this.underWater=e,this.scene.setUnderwater(this.underWater))},e.prototype.fireNozzles=function(){1==this.underWater&&(0==this.leftNozzleOn||this.rightNozzleOn),1==this.leftNozzleOn&&this.fireNozzle("left"),1==this.rightNozzleOn&&this.fireNozzle("right")},e.prototype.fireNozzle=function(e){var t;"left"==e&&(t=-this.nozzleSpacing,this.scene.nozzleLeftSoundPlaying=!0,1==this.scene.nozzleLeftSoundPlaying&&0==this.scene.nozzleLeftSoundTimer&&(Game.setSoundVolume("aqua-jetpack/water-jet-1.mp3",0),Game.playSound("aqua-jetpack/water-jet-1.mp3"),Game.fadeSound("aqua-jetpack/water-jet-1.mp3",.4,.65))),"right"==e&&(t=this.nozzleSpacing,this.scene.nozzleRightSoundPlaying=!0,1==this.scene.nozzleRightSoundPlaying&&0==this.scene.nozzleRightSoundTimer&&(Game.setSoundVolume("aqua-jetpack/water-jet-2.mp3",0),Game.playSound("aqua-jetpack/water-jet-2.mp3"),Game.fadeSound("aqua-jetpack/water-jet-2.mp3",.4,.65)));var i=Math.cos(this.torsoBodyRef.angle+.5*Math.PI),s=Math.sin(this.torsoBodyRef.angle+.5*Math.PI);this.torsoBodyRef.applyForceLocal([0,this.nozzleSpinForce],[t,0]),this.torsoBodyRef.applyForce([i*this.nozzleForce,s*this.nozzleForce])},e.prototype.killPhysicsWorld=function(e){},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.pause=function(){this.scene.pauseResumeTween(this.checkStartStateDelay,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.checkStartStateDelay,"resume")},e.prototype.destroy=function(){this.checkStartStateDelay=this.scene.killTween(this.checkStartStateDelay),this.world.clear(),this.world=null},e}(),AquaJetpackInputManager=function(){function e(e,t){this.scene=e,this.leftInputDown=!1,this.rightInputDown=!1,this.hitAreaSprite=Game.displayStore.getSprite("aqua-jetpack/blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite),this.mouseDown=!1}return e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mousemove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseupoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))})):(e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchmove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchendoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}))},e.prototype.inputDown=function(e,t){e.mouseDown=!0,e.keyBoardModeOn=!1,e.mouseModeOn=!0,t.x<Game.stageWidth/2&&(e.leftInputDown=!0),t.x>Game.stageWidth/2&&(e.rightInputDown=!0),e.scene.updateInputState(e.leftInputDown,e.rightInputDown)},e.prototype.inputUp=function(e,t){e.mouseDown=!1,t.x<Game.stageWidth/2&&(e.leftInputDown=!1),t.x>Game.stageWidth/2&&(e.rightInputDown=!1),e.scene.updateInputState(e.leftInputDown,e.rightInputDown)},e.prototype.inputMove=function(e,t){e.mouseDown},e.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},e.prototype.upKeyDown=function(){},e.prototype.downKeyDown=function(){},e.prototype.upKeyUp=function(){},e.prototype.downKeyUp=function(){},e.prototype.tick=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},e}(),AquaJetpackBackgroundManager=function(){function e(e,t,i){this.scene=e,this.mainContainer=t,this.currentCharacterPos=0,this.lastCharacterPos=0,this.levelScreenWidths=i,this.sunParallaxAmount=1.05,this.farBackParallaxAmount=1.2,this.backParallaxAmount=2,this.midParallaxAmount=8,this.foreParallaxAmount=10,this.farBackLayer=Game.displayStore.getContainer("aqua-jetpack/far-back-layer-holder"),this.backLayer=Game.displayStore.getContainer("aqua-jetpack/back-layer-holder"),this.midLayer=Game.displayStore.getContainer("aqua-jetpack/mid-layer-holder"),this.foreLayer=Game.displayStore.getContainer("aqua-jetpack/fore-layer-holder"),this.foregroundElementsHolder=Game.displayStore.getContainer("aqua-jetpack/foreground-element"),this.clouds=new Array;for(o=0;o<=3;o++)for(var s=0;s<2;s++)this.createCloud(o);this.beachFrontLayers=new Array;for(o=0;o<this.levelScreenWidths;o++)(a=Game.displayStore.getSprite("aqua-jetpack/beach-front-layer")).position.y=Game.stageHeight,a.position.x=o*a.width,this.foreLayer.addChild(a),this.beachFrontLayers.push(a);this.midLayers=new Array;for(o=0;o<this.levelScreenWidths;o++)(a=Game.displayStore.getSprite("aqua-jetpack/mid-layer")).position.y=Game.stageHeight-100,a.position.x=o*a.width,this.midLayer.addChild(a),this.midLayers.push(a);this.backLayers=new Array;for(o=0;o<3;o++)(a=Game.displayStore.getSprite("aqua-jetpack/back-layer")).position.y=Game.stageHeight-100,a.position.x=o*a.width,this.backLayer.addChild(a),this.backLayers.push(a);this.farBackLayers=new Array;for(var o=0;o<2;o++){var a=Game.displayStore.getSprite("aqua-jetpack/far-back-layer");a.position.y=Game.stageHeight-100,a.position.x=o*a.width,this.farBackLayer.addChild(a),this.farBackLayers.push(a)}this.sun=Game.displayStore.getSprite("aqua-jetpack/sun"),this.mainContainer.addChild(this.sun),this.sun.position.y=150,this.sun.position.x=3500,this.hut=Game.displayStore.getSprite("aqua-jetpack/hut"),this.foregroundElementsHolder.addChild(this.hut),this.hut.position.x=2750,this.hut.position.y=320,this.bush=Game.displayStore.getSprite("aqua-jetpack/bush-rocks"),this.foregroundElementsHolder.addChild(this.bush),this.bush.position.x=2100,this.bush.position.y=360,this.boardBush=Game.displayStore.getSprite("aqua-jetpack/bush-and-board"),this.foregroundElementsHolder.addChild(this.boardBush),this.boardBush.position.x=4500,this.boardBush.position.y=370,this.rock1=Game.displayStore.getSprite("aqua-jetpack/rock-1"),this.foregroundElementsHolder.addChild(this.rock1),this.rock1.position.x=3e3,this.rock1.position.y=400,this.rock2=Game.displayStore.getSprite("aqua-jetpack/rock-2"),this.foregroundElementsHolder.addChild(this.rock2),this.rock2.position.x=3400,this.rock2.position.y=420,this.tent=Game.displayStore.getSprite("aqua-jetpack/tent"),this.foregroundElementsHolder.addChild(this.tent),this.tent.position.x=3900,this.tent.position.y=360,this.mainContainer.addChild(this.farBackLayer),this.mainContainer.addChild(this.backLayer),this.mainContainer.addChild(this.midLayer),this.mainContainer.addChild(this.foreLayer),this.mainContainer.addChild(this.foregroundElementsHolder)}return e.prototype.createCloud=function(e){var t,i,s,o,a="aqua-jetpack/cloud-"+String(e),r=Game.displayStore.getSprite(a);switch(e){case 0:i=Game.getRandom(.2,.3);break;case 1:i=Game.getRandom(.4,.5);break;case 2:i=Game.getRandom(.6,.7);break;case 3:i=Game.getRandom(.8,1)}t=this.farBackLayer,s=3*i,o=[Game.getRandom(-300,Game.stageWidth+300),Game.getRandom(10,200)],r.position.x=o[0],r.position.y=o[1],t.addChild(r),this.clouds.push({sprite:r,scale:i,speed:s,container:t})},e.prototype.tick=function(e){this.characterPos=e;for(var t=0;t<this.clouds.length;t++)this.clouds[t].sprite.position.x-=this.clouds[t].speed,this.clouds[t].sprite.position.x<-300&&(this.clouds[t].sprite.position.x=Game.stageWidth*this.levelScreenWidths+300);this.sun.position.x=this.characterPos/this.sunParallaxAmount,this.farBackLayer.position.x=this.characterPos/this.farBackParallaxAmount-500,this.backLayer.position.x=this.characterPos/this.backParallaxAmount,this.midLayer.position.x=this.characterPos/this.midParallaxAmount,this.foreLayer.position.x=this.characterPos/this.foreParallaxAmount},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){for(e=0;e<this.beachFrontLayers.length;e++)Game.displayStore.returnPooledItem(this.beachFrontLayers[e]);for(e=0;e<this.backLayers.length;e++)Game.displayStore.returnPooledItem(this.backLayers[e]);for(e=0;e<this.midLayers.length;e++)Game.displayStore.returnPooledItem(this.midLayers[e]);for(e=0;e<this.farBackLayers.length;e++)Game.displayStore.returnPooledItem(this.farBackLayers[e]);for(var e=0;e<this.clouds.length;e++)Game.displayStore.returnPooledItem(this.clouds[e].sprite)},e}(),AquaJetpackPickupManager=function(){function e(e,t,i,s,o,a){this.scene=e,this.mainContainer=t,this.powerUpOn=!1,this.difficultyIndex=0,this.circleEaseAmount=50,this.circleEaseAlphaAmount=10,this.pickupAttractRange=300,this.pickupAttractPower=120,this.beaconEffectAlpha=.75,this.pickupActive=!1,this.levelScreenWidths=i,this.levelWidth=Game.stageWidth*this.levelScreenWidths,this.levelLeftLimit=o,this.levelRightLimit=a,this.levelMidPoint=this.levelLeftLimit+(this.levelRightLimit-this.levelLeftLimit)/2,this.pickupHintTargetChevronAngle=0,this.pickupHintMoveEaseAmount=4,this.pickupHintRotateEaseAmount=8,this.pickupHintTargetPos=0,this.characterRef=s,this.pickupPulseCount=0,this.pickupPulseSpeed=.05,this.pickupHintSideBuffer=100,this.currentPickupScoreSprites=new Array;for(var r=1,n=0;n<9;n++){h=Game.displayStore.getSprite("aqua-jetpack/score-"+String(r));this.currentPickupScoreSprites.push({sprite:h,score:r}),r*=2}this.pickupParticles=new Array;for(n=0;n<12;n++){var h=Game.displayStore.getSprite("aqua-jetpack/pickup-particle"),l=this.scene.getPickupParticleElements();h.position.y=-200,this.mainContainer.addChild(h),this.pickupParticles.push({sprite:h,active:!1,scaleDownSpeed:Game.getRandom(.01,.02),body:l.body,shape:l.shape})}var p=Game.displayStore.getContainer("aqua-jetpack/pickup-holder");p.position.y=-1e3;var h=Game.displayStore.getSprite("aqua-jetpack/collectible-orb"),c=this.scene.getPickupPhysicsElement(),d=Game.displayStore.getSprite("aqua-jetpack/circle-1"),u=Game.displayStore.getSprite("aqua-jetpack/circle-2"),g=Game.displayStore.getSprite("aqua-jetpack/circle-1"),m=Game.displayStore.getSprite("aqua-jetpack/circle-2");d.scale.x=d.scale.y=2,u.scale.x=u.scale.y=1.5,g.scale.x=g.scale.y=1,m.scale.x=m.scale.y=.5,u.rotation=2*Math.PI*.25,g.rotation=2*Math.PI*.5,m.rotation=2*Math.PI*.75,d.alpha=this.beaconEffectAlpha,u.alpha=this.beaconEffectAlpha,g.alpha=this.beaconEffectAlpha,m.alpha=this.beaconEffectAlpha,this.mainContainer.addChild(p),p.addChild(d),p.addChild(u),p.addChild(g),p.addChild(m),p.addChild(h);for(n=0;n<this.currentPickupScoreSprites.length;n++)p.addChild(this.currentPickupScoreSprites[n].sprite),this.currentPickupScoreSprites[n].sprite.visible=!1;this.pickup={holder:p,sprite:h,body:c.body,shape:c.shape,circle1:{targetAlpha:this.beaconEffectAlpha,targetScale:0,sprite:d},circle2:{targetAlpha:this.beaconEffectAlpha,targetScale:0,sprite:u},circle3:{targetAlpha:this.beaconEffectAlpha,targetScale:0,sprite:g},circle4:{targetAlpha:this.beaconEffectAlpha,targetScale:0,sprite:m},triggeredMagnet:!1},this.pickupHintHolder=Game.displayStore.getContainer("aqua-jetpack/pickup-hint-holder"),this.pickupHintCircle=Game.displayStore.getSprite("aqua-jetpack/pickup-hint-circle"),this.pickupHintChevron=Game.displayStore.getSprite("aqua-jetpack/pickup-hint-chevron"),this.pickupHintHolder.addChild(this.pickupHintCircle),this.pickupHintHolder.addChild(this.pickupHintChevron),this.pickupHintHolder.position.y=545,this.scene.container.addChild(this.pickupHintHolder)}return e.prototype.resetOrbParticles=function(e){for(var t=0;t<this.pickupParticles.length;t++)if(e==this.pickupParticles[t].body)return this.pickupParticles[t].active=!1,this.scene.removePhysicsBodyFromWorld(this.pickupParticles[t].body),void(this.pickupParticles[t].sprite.position.y=-1e3)},e.prototype.spawnPickup=function(){var e,t=this.characterRef.position[0]-this.levelLeftLimit,i=this.levelRightLimit-this.characterRef.position[0];e=t>i?Game.getRandom(this.levelLeftLimit+200,this.levelMidPoint-200):i>t?Game.getRandom(this.levelMidPoint+200,this.levelRightLimit-200):Game.getRandom(0,1)<.5?Game.getRandom(this.levelLeftLimit+200,this.levelMidPoint-400):Game.getRandom(this.levelMidPoint+400,this.levelRightLimit-200);var s=Game.getRandom(Game.stageHeight-100,Game.stageHeight-400),o=this.pickup.body;o.invMass=1/o.mass,o.invInertia=1/o.inertia,o.angle=0,o.velocity=[0,0],o.setZeroForce(),o.position[0]=e,o.position[1]=s,this.pickup.triggeredMagnet=!1,this.setPickupScoreLabel(this.difficultyIndex),this.scene.addPhysicsBodyToWorld(o),this.pickUpTimeline=this.scene.killTween(this.pickUpTimeline),this.pickUpTimeline=new TimelineMax({onComplete:this.pickupIsActive,onCompleteParams:[this]}),this.pickUpTimeline.add([TweenMax.to(this.pickup.holder.scale,.2,{x:1,y:1,ease:Back.easeOut})],0)},e.prototype.setPickupScoreLabel=function(e){for(var t=0;t<this.currentPickupScoreSprites.length;t++)this.currentPickupScoreSprites[t].sprite.visible=!1;this.currentPickupScoreSprites[e].sprite.visible=!0},e.prototype.pickupIsActive=function(e){e.pickupActive=!0,e.pickUpTimeline=e.scene.killTween(e.pickUpTimeline)},e.prototype.tick=function(){if(this.pickupPulseCount+=this.pickupPulseSpeed,this.pickupPulseCount>=2*Math.PI&&(this.pickupPulseCount=2*-Math.PI),this.pickup.holder.position.x=this.pickup.body.position[0],this.pickup.holder.position.y=Game.stageHeight-this.pickup.body.position[1],this.pickup.holder.rotation=-this.pickup.body.angle,this.manageHintParams(),this.manageHintMotion(),this.manageParticles(),this.managePowerUpEffect(),this.animateCircle(this.pickup.circle1.sprite,this.pickup.circle1.targetAlpha,this.pickup.circle1.targetScale,.05),this.animateCircle(this.pickup.circle2.sprite,this.pickup.circle2.targetAlpha,this.pickup.circle2.targetScale,-.04),this.animateCircle(this.pickup.circle3.sprite,this.pickup.circle3.targetAlpha,this.pickup.circle3.targetScale,.03),this.animateCircle(this.pickup.circle4.sprite,this.pickup.circle4.targetAlpha,this.pickup.circle4.targetScale,-.06),0!=this.pickupActive){var e=1+Math.sin(this.pickupPulseCount)/10;this.pickup.holder.scale.x=e,this.pickup.holder.scale.y=e,this.pickupHintHolder.scale.x=e,this.pickupHintHolder.scale.y=e}},e.prototype.animateCircle=function(e,t,i,s){e.rotation+=s,1!=Game.isLowEndIPad&&(e.scale.x+=(i-e.scale.x)/this.circleEaseAmount,e.alpha+=(t-e.alpha)/this.circleEaseAlphaAmount,e.scale.y=e.scale.x,e.scale.x<=.2&&(e.scale.x=e.scale.y=2,e.alpha=0))},e.prototype.managePowerUpEffect=function(){if(0!=this.powerUpOn){var e=this.getDistance(this.pickup.body.position[0],this.pickup.body.position[1],this.characterRef.position[0],this.characterRef.position[1]),t=this.getAngle(this.pickup.body.position[0],Game.stageHeight-this.pickup.body.position[1],this.characterRef.position[0],Game.stageHeight-this.characterRef.position[1]);if(!(e>this.pickupAttractRange&&0==this.pickup.triggeredMagnet)){this.pickup.triggeredMagnet=!0;var i=this.pickupAttractRange-e;i<0&&(i=0);var s=Math.cos(t),o=Math.sin(t),a=[-s*this.pickupAttractPower,-o*this.pickupAttractPower];(s||o)&&this.pickup.body.applyForce(a)}}},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.manageParticles=function(){if(1!=Game.isLowEndIPad)for(var e=0;e<this.pickupParticles.length;e++)0!=this.pickupParticles[e].active&&(this.pickupParticles[e].sprite.position.x=this.pickupParticles[e].body.position[0],this.pickupParticles[e].sprite.position.y=Game.stageHeight-this.pickupParticles[e].body.position[1],this.pickupParticles[e].sprite.rotation=-this.pickupParticles[e].body.angle)},e.prototype.fireParticles=function(){if(1!=Game.isLowEndIPad)for(var e=Game.getRandom(5,8),t=0,i=0;i<this.pickupParticles.length;i++)if(1!=this.pickupParticles[i].active){this.resetBody(this.pickupParticles[i].body),this.pickupParticles[i].body.position[0]=this.pickup.body.position[0],this.pickupParticles[i].body.position[1]=this.pickup.body.position[1],this.pickupParticles[i].sprite.blendMode=PIXI.BLEND_MODES.ADD;var s=Game.getRandom(1,2);this.pickupParticles[i].sprite.scale.x=s,this.pickupParticles[i].sprite.scale.y=s;var o=Game.getRandom(2*-Math.PI,2*Math.PI),a=Game.getRandom(10,80),r=Math.cos(o),n=Math.sin(o);if(this.pickupParticles[i].body.applyImpulse([r*a,n*a]),this.scene.addPhysicsBodyToWorld(this.pickupParticles[i].body),this.pickupParticles[i].active=!0,++t>=e)return}},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angle=0,e.velocity=[0,0],e.setZeroForce()},e.prototype.manageHintParams=function(){var e=this.scene.container.toLocal(this.pickup.holder.position,this.mainContainer),t=e.x;return t<this.pickupHintSideBuffer?(this.pickupHintTargetPos=this.pickupHintSideBuffer,void(this.pickupHintTargetChevronAngle=.5*-Math.PI)):t>Game.stageWidth-this.pickupHintSideBuffer?(this.pickupHintTargetPos=Game.stageWidth-this.pickupHintSideBuffer,void(this.pickupHintTargetChevronAngle=.5*Math.PI)):(this.pickupHintTargetPos=e.x,void(this.pickupHintTargetChevronAngle=0))},e.prototype.manageHintMotion=function(){this.pickupHintHolder.position.x+=(this.pickupHintTargetPos-this.pickupHintHolder.position.x)/this.pickupHintMoveEaseAmount,this.pickupHintChevron.rotation+=(this.pickupHintTargetChevronAngle-this.pickupHintChevron.rotation)/this.pickupHintRotateEaseAmount},e.prototype.checkOrbPickup=function(e){if(this.pickup.body==e)switch(this.pickupActive=!1,this.scene.removePhysicsBodyFromWorld(e),this.animatePickupOut(),this.scene.updateScore(this.currentPickupScoreSprites[this.difficultyIndex].score),this.updateOrbParams(),this.fireParticles(),Game.playSound("aqua-jetpack/beep.mp3",.9),this.scene.selectedCharacter){case"max":var t=[{id:"aqua-jetpack/max-enemies.mp3"},{id:"aqua-jetpack/max-im-the-best.mp3"},{id:"aqua-jetpack/max-your-welcome.mp3"}];t[s=Game.getRandom(0,5,!0)]&&Game.playSound(t[s].id,t[s].vol||1);break;case"phoebe":var i=[{id:"aqua-jetpack/phoebe-woop.mp3"},{id:"aqua-jetpack/phoebe-step-aside.mp3"},{id:"aqua-jetpack/phoebe-no-problem-too-small.mp3"}],s=Game.getRandom(0,5,!0);i[s]&&Game.playSound(i[s].id,i[s].vol||1)}},e.prototype.updateOrbParams=function(){++this.difficultyIndex>=this.currentPickupScoreSprites.length-1&&(this.difficultyIndex=this.currentPickupScoreSprites.length-1),this.scene.increaseFishDifficulty(this.difficultyIndex)},e.prototype.resetPointValues=function(){this.difficultyIndex=0,this.setPickupScoreLabel(this.difficultyIndex),this.scene.increaseFishDifficulty(this.difficultyIndex)},e.prototype.animatePickupOut=function(){this.pickUpTimeline=this.scene.killTween(this.pickUpTimeline),this.pickUpTimeline=new TimelineMax({onComplete:this.newPickup,onCompleteParams:[this]}),this.pickUpTimeline.add([TweenMax.to(this.pickup.holder.scale,.2,{x:0,y:0,ease:Back.easeIn})],0)},e.prototype.powerUpToggle=function(e){this.powerUpOn=e},e.prototype.newPickup=function(e){e.spawnPickup(),e.scene.spawnTicket()},e.prototype.pause=function(){this.scene.pauseResumeTween(this.pickUpTimeline,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.pickUpTimeline,"resume")},e.prototype.destroy=function(){for(var e=0;e<this.pickupParticles.length;e++)Game.displayStore.returnPooledItem(this.pickupParticles[e].sprite);Game.displayStore.returnPooledItem(this.pickup.circle1.sprite),Game.displayStore.returnPooledItem(this.pickup.circle2.sprite),Game.displayStore.returnPooledItem(this.pickup.circle3.sprite),Game.displayStore.returnPooledItem(this.pickup.circle4.sprite),this.pickUpTimeline=this.scene.killTween(this.pickUpTimeline)},e}(),AquaJetpackFishManager=function(){function e(e,t,i,s,o,a){this.scene=e,this.mainContainer=t,this.jumpFishCountLimit=60,this.jumpFishCount=0,this.fishDripCount=0,this.fishDripCountLimit=20,this.powerUpOn=!1,this.fishRepelRange=200,this.fishRepelForce=1e3,this.waterAlphaEaseAmount=6,this.dripFishThisFrame=!1,this.breakSurfaceAnimLimit=20,this.difficultyParamsIndex=0,this.waterLevel=0,this.currentFishCount=0,this.levelScreenWidths=i,this.levelWidth=Game.stageWidth*this.levelScreenWidths,this.levelLeftLimit=o,this.levelRightLimit=a,this.levelMidPoint=this.levelLeftLimit+(this.levelRightLimit-this.levelLeftLimit)/2,this.characterRef=s,this.difficultyParams=new Array,this.difficultyParams.push({fishFireCount:1,minPower:4e3,maxPower:4e3}),this.difficultyParams.push({fishFireCount:1,minPower:4e3,maxPower:5e3}),this.difficultyParams.push({fishFireCount:2,minPower:4e3,maxPower:5e3}),this.difficultyParams.push({fishFireCount:3,minPower:5e3,maxPower:6e3}),this.difficultyParams.push({fishFireCount:5,minPower:5500,maxPower:6500}),this.difficultyParams.push({fishFireCount:6,minPower:6e3,maxPower:8e3}),this.difficultyParams.push({fishFireCount:7,minPower:6e3,maxPower:8e3}),this.difficultyParams.push({fishFireCount:8,minPower:6e3,maxPower:8e3}),this.fishParticles=new Array;for(l=0;l<30;l++){var r=Game.displayStore.getSprite("aqua-jetpack/fish-water-particle-"+Game.getRandom(1,3,!0));r.position.y=-200;var n=Game.getRandom(.5,1);r.scale.x=n,r.scale.y=n,this.mainContainer.addChild(r);var h=this.scene.getFishParticleElements();this.fishParticles.push({sprite:r,body:h.body,shape:h.shape,active:!1})}this.fish=new Array;for(var l=0;l<5;l++){var p=Game.getRandom(1,4,!0),c=Game.displayStore.getSprite("aqua-jetpack/fish-front-"+p),d=Game.displayStore.getSprite("aqua-jetpack/fish-rear-"+p),u=Game.displayStore.getAnimatedSprite("aqua-jetpack/surface-frames");u.alpha=.8,u.loop=!0,u.animationSpeed=.25,u.scale.x=.4,u.scale.y=1,c.position.y=-100,d.position.y=-100,this.mainContainer.addChild(c),this.mainContainer.addChild(d);var g=this.scene.getFishPhysicsElements();this.fish.push({frontBody:g.frontBody,frontShape:g.frontShape,rearBody:g.rearBody,rearShape:g.rearShape,constraint:g.constraint,frontSprite:c,rearSprite:d,active:!1,flopCount:0,flopSpeed:Game.getRandom(.4,.8),flopScale:Game.getRandom(4,6),breakSurfaceAnim:u,fadeTween:null,brokenWater:!1})}}return e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.addFishAnims=function(){for(var e=0;e<this.fish.length;e++)this.mainContainer.addChild(this.fish[e].breakSurfaceAnim)},e.prototype.increaseFishDifficulty=function(e){this.difficultyParamsIndex=e,this.difficultyParamsIndex>this.difficultyParams.length-1&&(this.difficultyParamsIndex=this.difficultyParams.length-1)},e.prototype.shuffleArray=function(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[i],e[i]=t;return e},e.prototype.fishBrokeWater=function(e){if(1!=Game.isLowEndIPad)for(var t=0;t<this.fish.length;t++)if(this.fish[t].frontBody==e){if(1==this.fish[t].brokenWater)return;this.fish[t].brokenWater=!0,this.scene.fireSplashParticlesFish(this.fish[t].frontBody.position[0],Game.stageHeight-500),this.fish[t].breakSurfaceAnim.stop(),this.fish[t].breakSurfaceAnim.alpha=1,this.fish[t].breakSurfaceAnim.position.x=this.fish[t].frontBody.position[0],this.fish[t].breakSurfaceAnim.position.y=this.waterLevel,this.fish[t].breakSurfaceAnim.gotoAndPlay(0),this.fish[t].fadeTween=this.scene.killTween(this.fish[t].fadeTween),this.fish[t].fadeTween=TweenMax.to(this.fish[t].breakSurfaceAnim,.4,{alpha:0,delay:.2,ease:Sine.easeOut,onComplete:this.endFadeSurfaceAnim,onCompleteParams:[this,t]}),1==Game.getRandom(1,2,!0)?Game.playSound("aqua-jetpack/large-splash.mp3",.1):Game.playSound("aqua-jetpack/loud-splash.mp3",.1);var i=[{id:"aqua-jetpack/swish-long-1.mp3"},{id:"aqua-jetpack/swish-long-2.mp3"},{id:"aqua-jetpack/swish-long-3.mp3"}],s=Game.getRandom(0,2,!0);return void Game.playSound(i[s].id,i[s].vol||.7)}},e.prototype.endFadeSurfaceAnim=function(e,t){e.fish[t].brokenWater=!1,e.fish[t].breakSurfaceAnim.stop()},e.prototype.tick=function(e){this.waterLevel=e,++this.fishDripCount>=this.fishDripCountLimit&&(this.fishDripCount=0,this.dripFishThisFrame=!0),++this.jumpFishCount>=this.jumpFishCountLimit&&(this.jumpFishCount=0,this.jumpFish());for(a=0;a<this.fish.length;a++)if(0!=this.fish[a].active){if(1==this.powerUpOn){var t=this.getDistance(this.fish[a].frontBody.position[0],this.fish[a].frontBody.position[1],this.characterRef.position[0],this.characterRef.position[1]),i=this.getAngle(this.fish[a].frontBody.position[0],Game.stageHeight-this.fish[a].frontBody.position[1],this.characterRef.position[0],Game.stageHeight-this.characterRef.position[1]);if(t<=this.fishRepelRange){var s=Math.cos(i),o=Math.sin(i);this.fish[a].frontBody.applyForce([s*this.fishRepelForce,o*this.fishRepelForce])}}this.fish[a].frontSprite.position.x=this.fish[a].frontBody.position[0],this.fish[a].frontSprite.position.y=Game.stageHeight-this.fish[a].frontBody.position[1],this.fish[a].frontSprite.rotation=-this.fish[a].frontBody.angle,this.fish[a].rearSprite.position.x=this.fish[a].rearBody.position[0],this.fish[a].rearSprite.position.y=Game.stageHeight-this.fish[a].rearBody.position[1],this.fish[a].rearSprite.rotation=-this.fish[a].rearBody.angle,1==this.dripFishThisFrame&&(this.addFishDrips(this.fish[a].frontBody),this.dripFishThisFrame=!1),this.fish[a].flopCount+=this.fish[a].flopSpeed,this.fish[a].flopCount>=2*Math.PI&&(this.fish[a].flopCount=2*-Math.PI),this.fish[a].constraint.setMotorSpeed(Math.sin(this.fish[a].flopCount)*this.fish[a].flopScale)}for(var a=0;a<this.fishParticles.length;a++)0!=this.fishParticles[a].active&&(this.fishParticles[a].sprite.position.x=this.fishParticles[a].body.position[0],this.fishParticles[a].sprite.position.y=Game.stageHeight-this.fishParticles[a].body.position[1],this.fishParticles[a].sprite.rotation=-this.fishParticles[a].body.angle)},e.prototype.addFishDrips=function(e){if(1!=Game.isLowEndIPad&&!(Game.getRandom(0,1)<.5))for(var t=0;t<this.fishParticles.length;t++)if(0==this.fishParticles[t].active)return this.fishParticles[t].body.position[0]=e.position[0],this.fishParticles[t].body.position[1]=e.position[1],this.resetBody(this.fishParticles[t].body),this.fishParticles[t].active=!0,this.scene.addPhysicsBodyToWorld(this.fishParticles[t].body),void this.fishParticles[t].body.applyImpulse([e.force[0]+Game.getRandom(-10,10),e.force[1]+Game.getRandom(-10,10)])},e.prototype.jumpFish=function(){if(1!=this.scene.getUnderwater()&&0!=this.scene.getLiftedOffPlatform()&&!(this.currentFishCount>=this.difficultyParams[this.difficultyParamsIndex].fishFireCount)){var e,t=Game.getRandom(this.levelLeftLimit,this.levelRightLimit);t<this.levelMidPoint?e=Game.getRandom(.5*Math.PI-.4,.5*Math.PI-.8):t>=this.levelMidPoint&&(e=Game.getRandom(.5*Math.PI+.4,.5*Math.PI+.8));for(var i=Game.getRandom(this.difficultyParams[this.difficultyParamsIndex].minPower,this.difficultyParams[this.difficultyParamsIndex].maxPower),s=0;s<this.fish.length;s++)if(1!=this.fish[s].active){this.currentFishCount++,this.fish[s].active=!0,this.fish[s].frontBody.position[0]=t,this.fish[s].frontBody.position[1]=Game.stageHeight-600,this.fish[s].rearBody.position[0]=t,this.fish[s].rearBody.position[1]=Game.stageHeight-600,this.fish[s].brokenWater=!1,this.resetBody(this.fish[s].frontBody),this.resetBody(this.fish[s].rearBody);var o=Math.cos(e),a=Math.sin(e);return this.fish[s].frontBody.angle=e,this.fish[s].rearBody.angle=e,this.fireFishParticles(t,Game.stageHeight-600,o,a,i),this.fish[s].frontBody.applyForce([o*i,a*i]),this.scene.addPhysicsBodyToWorld(this.fish[s].frontBody),this.scene.addPhysicsBodyToWorld(this.fish[s].rearBody),this.scene.addPhysicsConstraintToWorld(this.fish[s].constraint),void(this.fish=this.shuffleArray(this.fish))}}},e.prototype.fireFishParticles=function(e,t,i,s,o){if(1!=Game.isLowEndIPad)for(var a=Game.getRandom(4,6,!0),r=0,n=0;n<this.fishParticles.length;n++)if(1!=this.fishParticles[n].active){this.resetBody(this.fishParticles[n].body),this.fishParticles[n].active=!0,this.fishParticles[n].body.position[0]=e+Game.getRandom(-10,10),this.fishParticles[n].body.position[1]=t+Game.getRandom(-10,10),this.fishParticles[n].body.angularVelocity=Game.getRandom(-10,10),this.scene.addPhysicsBodyToWorld(this.fishParticles[n].body),this.fishParticles[n].sprite.scale.x=.5,this.fishParticles[n].sprite.scale.y=.5,this.fishParticles[n].sprite.alpha=.5,this.fishParticles[n].sprite.blendMode=PIXI.BLEND_MODES.ADD;var h=i+Game.getRandom(-.1,.1),l=s+Game.getRandom(-.1,.1);if(this.fishParticles[n].body.applyImpulse([h*o,l*o]),++r>=a)return}},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angle=0,e.velocity=[0,0],e.setZeroForce()},e.prototype.resetFishOrFishParticle=function(e){for(t=0;t<this.fish.length;t++){if(e==this.fish[t].frontBody)return void this.killFish(t);if(e==this.fish[t].rearBody)return void this.killFish(t)}for(var t=0;t<this.fishParticles.length;t++)if(this.fishParticles[t].body==e)return this.fishParticles[t].active=!1,void this.scene.removePhysicsBodyFromWorld(this.fishParticles[t].body)},e.prototype.powerUpToggle=function(e){this.powerUpOn=e},e.prototype.killFish=function(e){0!=this.fish[e].active&&(this.currentFishCount--,this.fish[e].active=!1,this.scene.removePhysicsBodyFromWorld(this.fish[e].frontBody),this.scene.removePhysicsBodyFromWorld(this.fish[e].rearBody),this.scene.removePhysicsConstraintFromWorld(this.fish[e].constraint),this.fish[e].frontSprite.position.y=-200,this.fish[e].rearSprite.position.y=-200)},e.prototype.pause=function(){for(var e=0;e<this.fish.length;e++)this.scene.pauseResumeTween(this.fish[e].fadeTween,"pause")},e.prototype.resume=function(){for(var e=0;e<this.fish.length;e++)this.scene.pauseResumeTween(this.fish[e].fadeTween,"resume")},e.prototype.destroy=function(){for(e=0;e<this.fish.length;e++)Game.displayStore.returnPooledItem(this.fish[e].frontSprite),Game.displayStore.returnPooledItem(this.fish[e].rearSprite),Game.displayStore.returnPooledItem(this.fish[e].breakSurfaceAnim);for(e=0;e<this.fishParticles.length;e++)Game.displayStore.returnPooledItem(this.fishParticles[e].sprite);for(var e=0;e<this.fish.length;e++)this.fish[e].fadeTween=this.scene.killTween(this.fish[e].fadeTween)},e}(),AquaJetpackTicketManager=function(){function e(e,t,i,s,o,a){this.scene=e,this.mainContainer=t,this.levelScreenWidths=i,this.levelWidth=Game.stageWidth*this.levelScreenWidths,this.levelLeftLimit=o,this.levelRightLimit=a,this.characterRef=s;var r=this.scene.getTicketPhysicsElements();this.ticket={ticket:Game.ticketPool.getTicket(),posX:0,posY:0,active:!1,body:r.body,shape:r.shape};var n=this.scene.getTicketPhysicsElements();this.heart={ticket:Game.ticketPool.getHeart(),posX:0,posY:0,active:!1,body:n.body,shape:n.shape}}return e.prototype.spawnTicket=function(e,t){if(3!=this.scene.game.gameLaunchMode&&(e<t&&this.spawnHeart(),1!=this.ticket.active)){var i=Game.getRandom(this.levelLeftLimit+200,this.levelRightLimit-200),s=Game.getRandom(40,450);this.ticket.ticket=Game.ticketPool.getTicket(),this.ticket.ticket.container.position.x=i,this.ticket.ticket.container.position.y=s,this.ticket.body.position[0]=i,this.ticket.body.position[1]=Game.stageHeight-s,this.scene.addPhysicsBodyToWorld(this.ticket.body),this.ticket.ticket.container.scale.x=0,this.ticket.ticket.container.scale.y=0,this.ticketOnTween=this.scene.killTween(this.ticketOnTween),this.ticketOnTween=TweenMax.to(this.ticket.ticket.container.scale,.5,{x:1,y:1,ease:Back.easeOut}),this.mainContainer.addChild(this.ticket.ticket.container),this.ticket.active=!0}},e.prototype.spawnHeart=function(){if(!(Game.getRandom(0,1)<.5)&&1!=this.heart.active){this.heart.active=!0;var e=Game.getRandom(this.levelLeftLimit+200,this.levelRightLimit-200),t=Game.getRandom(40,450);this.heart.ticket=Game.ticketPool.getHeart(),this.heart.ticket.container.position.x=e,this.heart.ticket.container.position.y=t,this.heart.body.position[0]=e,this.heart.body.position[1]=Game.stageHeight-t,this.scene.addPhysicsBodyToWorld(this.heart.body),this.heart.ticket.container.scale.x=0,this.heart.ticket.container.scale.y=0,this.heartOnTween=this.scene.killTween(this.heartOnTween),this.heartOnTween=TweenMax.to(this.heart.ticket.container.scale,.5,{x:1,y:1,ease:Back.easeOut}),this.mainContainer.addChild(this.heart.ticket.container)}},e.prototype.checkTicketPickup=function(e){return this.heart.body==e?(this.heart.active=!1,this.heart.ticket.collect(),this.scene.removePhysicsBodyFromWorld(this.heart.body),void this.scene.addLife()):this.ticket.body==e?(this.ticket.ticket.collect(),this.ticket.active=!1,void this.scene.removePhysicsBodyFromWorld(this.ticket.body)):void 0},e.prototype.tick=function(){},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angle=0,e.velocity=[0,0],e.setZeroForce()},e.prototype.pause=function(){this.scene.pauseResumeTween(this.heartOnTween,"pause"),this.scene.pauseResumeTween(this.ticketOnTween,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.heartOnTween,"resume"),this.scene.pauseResumeTween(this.ticketOnTween,"resume")},e.prototype.destroy=function(){this.heartOnTween=this.scene.killTween(this.heartOnTween),this.ticketOnTween=this.scene.killTween(this.ticketOnTween),Game.ticketPool.returnTicket(this.heart.ticket),Game.ticketPool.returnTicket(this.ticket.ticket)},e}(),VolcanoSkydivePhysicsManager=function(){function e(e,t){this.physicsEnabled=!0,this.resizeRatio=1,this.scene=e,this.mainContainer=t}return e.prototype.initPhysicsWorld=function(){this.waterLiftForce=[0,0],this.waterViscousForce=[0,0],this.centerOfBuoyancy=[0,0],this.shapePos=[0,0],this.armRotateForce=2,this.powerUpActive=!1,this.obstaclePopForce=200,this.leftArmWobbleCount=0,this.rightArmWobbleCount=0,this.leftArmWobbleRate=.2,this.rightArmWobbleRate=.2,this.liftForce=.01,this.viscosity=.4,this.shapeAngle=0,this.aabb=new p2.AABB,this.vel=[0,0],this.world=new p2.World({gravity:[0,-150]}),this.world.broadphase=new p2.NaiveBroadphase(1),this.world.defaultContactMaterial.friction=.8,this.collisionGroupCharacter=Math.pow(2,0),this.collisionGroupObstacles=Math.pow(2,1),this.collisionGroupParachuteCharacter=Math.pow(2,2),this.collisionGroupGround=Math.pow(2,3);var e=this;this.world.on("beginContact",function(t){e.checkCollision(e,t)}),this.world.on("endContact",function(e){}),this.world.on("postStep",function(e){}),this.waterPlane=new p2.Plane,this.waterBody=new p2.Body({mass:0,position:[0,0],angle:0,collisionResponse:!1}),this.waterBody.addShape(this.waterPlane),this.floorPlaneBody=new p2.Body({mass:0,position:[0,0],angle:0}),this.floorPlaneShape=new p2.Plane,this.floorPlaneShape.collisionGroup=this.collisionGroupGround,this.floorPlaneShape.collisionMask=this.collisionGroupParachuteCharacter,this.floorPlaneBody.addShape(this.floorPlaneShape),this.unhookPlaneBody=new p2.Body({mass:0,position:[0,0],angle:0}),this.unhookPlaneShape=new p2.Plane,this.unhookPlaneShape.sensor=!0,this.unhookPlaneBody.addShape(this.unhookPlaneShape),this.unhookPlaneShape.collisionGroup=this.collisionGroupGround,this.unhookPlaneShape.collisionMask=this.collisionGroupParachuteCharacter,this.manageLegsPlaneBody=new p2.Body({mass:0,position:[0,0],angle:0}),this.manageLegsPlaneShape=new p2.Plane,this.manageLegsPlaneShape.sensor=!0,this.manageLegsPlaneBody.addShape(this.manageLegsPlaneShape),this.manageLegsPlaneShape.collisionGroup=this.collisionGroupGround,this.manageLegsPlaneShape.collisionMask=this.collisionGroupParachuteCharacter,this.powerUpShieldBody=new p2.Body({mass:0,position:[0,0]}),this.powerUpShieldShape=new p2.Circle({radius:200}),this.powerUpShieldBody.addShape(this.powerUpShieldShape),this.powerUpShieldBody.gravityScale=0,this.powerUpShieldShape.collisionGroup=this.collisionGroupCharacter,this.powerUpShieldShape.collisionMask=this.collisionGroupObstacles,this.physicsEnabled=!0},e.prototype.getCharacterPhysicsElements=function(e){this.diveCharHelmet=new p2.Body({mass:1,position:[0,0]});var t=new p2.Circle({radius:45});this.diveCharHelmet.angularDamping=.8,t.collisionGroup=this.collisionGroupCharacter,t.collisionMask=this.collisionGroupObstacles,this.diveCharHelmet.addShape(t),this.diveCharArmLeft=new p2.Body({mass:.05,position:[0,0]});var i=new p2.Box({width:70,height:20});i.collisionGroup=this.collisionGroupCharacter,i.collisionMask=this.collisionGroupObstacles,this.diveCharArmLeft.addShape(i),this.diveCharArmRight=new p2.Body({mass:.05,position:[0,0]});var s=new p2.Box({width:70,height:20});s.collisionGroup=this.collisionGroupCharacter,s.collisionMask=this.collisionGroupObstacles,this.diveCharArmRight.addShape(s);var o=new p2.RevoluteConstraint(this.diveCharArmLeft,this.diveCharHelmet,{collideConnected:!1,localPivotA:[-46,0],localPivotB:[50,0]}),a=new p2.RevoluteConstraint(this.diveCharArmRight,this.diveCharHelmet,{collideConnected:!1,localPivotA:[46,0],localPivotB:[-50,0]}),r=new p2.Body({mass:.1,position:[0,0]}),n=new p2.Box({width:25,height:25});n.collisionGroup=this.collisionGroupCharacter,n.collisionMask=this.collisionGroupObstacles,r.damping=.8,r.addShape(n);var h=new p2.Body({mass:.1,position:[0,0]}),l=new p2.Box({width:25,height:25});l.collisionGroup=this.collisionGroupCharacter,l.collisionMask=this.collisionGroupObstacles,h.damping=.8,h.addShape(l);var p=new p2.LockConstraint(h,this.diveCharArmLeft,{collideConnected:!1,localOffsetB:[-45,0]}),c=new p2.LockConstraint(r,this.diveCharArmRight,{collideConnected:!1,localOffsetB:[45,0]}),d=new p2.RotationalSpring(this.diveCharArmLeft,this.diveCharHelmet,{restAngle:0,stiffness:1e4,damping:.5}),u=new p2.RotationalSpring(this.diveCharArmRight,this.diveCharHelmet,{restAngle:0,stiffness:1e4,damping:.5});return{characterHeadBody:this.diveCharHelmet,characterHeadShape:t,characterLeftArmBody:this.diveCharArmLeft,characterLeftArmShape:i,characterRightArmBody:this.diveCharArmRight,characterRightArmShape:s,armLeftConstraint:o,armRightConstraint:a,characterLeftHandBody:h,characterLeftHandShape:i,characterRightHandBody:r,characterRightHandShape:s,handLeftConstraint:p,handRightConstraint:c,armLeftSpring:d,armRightSpring:u}},e.prototype.getCharacterPhysicsElementsParachuteOpen=function(){var e=new p2.Body({mass:.2,position:[0,0]}),t=new p2.Circle({radius:60});t.collisionGroup=this.collisionGroupParachuteCharacter,t.collisionMask=this.collisionGroupGround,e.angularDamping=.8,e.addShape(t),this.parachuteCharBody=new p2.Body({mass:.05,position:[0,0]});var i=new p2.Box({width:100,height:110});i.collisionGroup=this.collisionGroupParachuteCharacter,i.collisionMask=this.collisionGroupGround,this.parachuteCharBody.addShape(i);var s=new p2.Body({mass:.05,position:[0,0]}),o=new p2.Box({width:600,height:200});o.sensor=!0,s.addShape(o),s.damping=.999;var a=new p2.Body({mass:.05,position:[0,0]}),r=new p2.Box({width:40,height:80});r.collisionGroup=this.collisionGroupParachuteCharacter,r.collisionMask=this.collisionGroupGround,a.addShape(r);var n=new p2.Body({mass:.05,position:[0,0]}),h=new p2.Box({width:40,height:80});h.collisionGroup=this.collisionGroupParachuteCharacter,h.collisionMask=this.collisionGroupGround,n.addShape(h);var l=new p2.LockConstraint(e,this.parachuteCharBody,{collideConnected:!1,localOffsetB:[0,-100]}),p=new p2.LinearSpring(s,e,{restLength:200,stiffness:40,damping:1.2,localAnchorA:[0,0],localAnchorB:[0,0]}),c=new p2.RevoluteConstraint(this.parachuteCharBody,a,{collideConnected:!1,localPivotA:[-20,-36],localPivotB:[0,45]});c.setLimits(-.2,.2);var d=new p2.RevoluteConstraint(this.parachuteCharBody,n,{collideConnected:!1,localPivotA:[20,-36],localPivotB:[0,45]});return d.setLimits(-.2,.2),{characterHeadBody:e,characterHeadShape:t,characterLegLeftBody:a,characterLegLeftShape:r,characterLegRightBody:n,characterLegRightShape:h,legLeftConstraint:c,legRightConstraint:d,parachuteCanopyBody:s,parachuteCanopyShape:o,torsoElementBody:this.parachuteCharBody,torsoElementShape:i,headConstraint:l,canopySpring:p}},e.prototype.getObstaclePhysics=function(){var e=new p2.Body({mass:1}),t=new p2.Circle({radius:50});return t.collisionGroup=this.collisionGroupObstacles,t.collisionMask=this.collisionGroupCharacter,e.gravityScale=0,e.addShape(t),{body:e,shape:t}},e.prototype.checkCollision=function(e,t){e.scene.obstacleCollisionCheck(t.bodyA,t.bodyB),t.bodyA!=e.unhookPlaneBody&&t.bodyB!=e.unhookPlaneBody?t.bodyA!=e.manageLegsPlaneBody&&t.bodyB!=e.manageLegsPlaneBody?t.bodyA!=e.floorPlaneBody&&t.bodyB!=e.floorPlaneBody||e.scene.calculateLanding():e.scene.manageCharacterLegs():e.scene.unhookCharacter()},e.prototype.handleObstacleHit=function(e){var t=this.getAngle(this.diveCharHelmet.position[0],this.diveCharHelmet.position[1],e.position[0],e.position[1]),i=Math.cos(t),s=Math.sin(t);this.diveCharHelmet.applyImpulse([this.obstaclePopForce*i,this.obstaclePopForce*s]),this.diveCharArmLeft.applyImpulse([this.obstaclePopForce*i,this.obstaclePopForce*s]),this.diveCharArmRight.applyImpulse([this.obstaclePopForce*i,this.obstaclePopForce*s])},e.prototype.unhookCharacter=function(e){this.world.removeSpring(e)},e.prototype.setCharacterLegs=function(e,t,i){e.setStiffness(5),t.setStiffness(5),i.setStiffness(8),e.enableMotor(),t.enableMotor()},e.prototype.setGroundLevel=function(e){this.floorPlaneBody.position[1]=e,this.world.addBody(this.floorPlaneBody),this.unhookPlaneBody.position[1]=e+50,this.world.addBody(this.unhookPlaneBody),this.manageLegsPlaneBody.position[1]=e+70,this.world.addBody(this.manageLegsPlaneBody)},e.prototype.killFloor=function(e,t,i){this.world.removeBody(this.floorPlaneBody),this.world.removeBody(this.unhookPlaneBody),this.world.removeBody(this.manageLegsPlaneBody),e.setStiffness(1e6),t.setStiffness(1e6),i.setStiffness(1e6),e.disableMotor(),t.disableMotor()},e.prototype.getWaterSplashParticle=function(){var e=new p2.Circle({radius:10}),t=new p2.Body({mass:Game.getRandom(.1,.4),collisionResponse:!1});return t.addShape(e),t},e.prototype.addBodyToWorld=function(e){this.world.addBody(e)},e.prototype.removeBodyFromWorld=function(e){this.world.removeBody(e)},e.prototype.removeConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.addConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.removeSpringFromWorld=function(e){this.world.removeSpring(e)},e.prototype.addSpringToWorld=function(e){this.world.addSpring(e)},e.prototype.resizeElements=function(e,t){this.canvasHeight=t,this.canvasWidth=e,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},e.prototype.stepPhysics=function(){0!=this.physicsEnabled&&this.world&&(1==this.powerUpActive&&(this.powerUpShieldBody.position[0]=this.diveCharHelmet.position[0],this.powerUpShieldBody.position[1]=this.diveCharHelmet.position[1]),this.world.step(1/30),Game.isLowEndIPad)},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.activatePowerUpShield=function(){this.powerUpActive=!0,this.world.addBody(this.powerUpShieldBody)},e.prototype.deactivatePowerUpShield=function(){this.powerUpActive=!1,this.world.removeBody(this.powerUpShieldBody)},e.prototype.getFireworkPrimaryElement=function(){var e=new p2.Body({mass:Game.getRandom(.02,.04),position:[0,0]}),t=new p2.Circle({radius:2});return t.collisionResponse=!1,e.addShape(t),e},e.prototype.getFireworkExplodeElement=function(){var e=new p2.Body({mass:Game.getRandom(.04,.06),position:[0,0]}),t=new p2.Circle({radius:2});return t.collisionResponse=!1,e.damping=.8,e.addShape(t),e},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.world.clear(),this.world=null,this.popOutOfWaterTween=this.scene.killTween(this.popOutOfWaterTween)},e}(),VolcanoSkydiveCloudManager=function(){function e(e,t,i){this.scene=e,this.mainContainer=t,this.rearCloudHolder=i,this.cloudsActiveTotal=10,this.cloudsActive=0,this.gameState=0,this.noSpawnBufferDistance=100,this.spawnLineCounter=0,this.spawnLineCounterLimit=10,this.currentBGOffset=0,this.rearCloudSpeedAdjust=-2e3,this.midCloudSpeedAdjust=-1e3,this.removeCloudBuffer=400,this.spawnCloudAheadBuffer=600,this.spawnCloudCounterLimits=[10,40],this.spawnCloudCounterLimit=Game.getRandom(this.spawnCloudCounterLimits[0],this.spawnCloudCounterLimits[1]),this.spawnCloudCounter=0,this.characterPos=[Game.stageWidth/2,-600],this.clouds=new Array,this.createClouds(0),this.createClouds(1),this.createClouds(2),this.createClouds(3),this.airLines=new Array;for(var s=0;s<20;s++){var o=Game.displayStore.getSprite("volcano-skydive/air-line.png");this.airLines.push({sprite:o,active:!1,speed:0}),o.position.y=-3e3,this.mainContainer.addChild(o)}}return e.prototype.resetClouds=function(){this.spawnAllowed=!0,this.gameState=0;for(e=0;e<this.clouds.length;e++)0!=this.clouds[e].active&&(this.clouds[e].active=!1,this.clouds[e].sprite.parent.removeChild(this.clouds[e].sprite));for(var e=0;e<this.airLines.length;e++)this.airLines[e].active=!1,this.airLines[e].sprite.position.y=-3e3},e.prototype.spawnInitialClouds=function(e){this.spawnAllowed=!0,this.startVertOffset=-e;for(var t=0;t<30;t++)this.spawnSingleCloud(!0)},e.prototype.lockSpawn=function(e){this.spawnAllowed=!1,this.lockSpawnHeight=e},e.prototype.spawnSingleCloud=function(e){var t,i,s=Game.getRandom(0,2,!0);switch(s){case 0:i=Game.getRandom(.2,.4),t=this.rearCloudHolder;break;case 1:i=Game.getRandom(.5,.6),t=this.rearCloudHolder;break;case 2:i=Game.getRandom(.75,1),t=this.mainContainer}var o,a=this.characterPos[0]+Game.getRandom(-600,600);if(!((o=1==e?Game.getRandom(this.startVertOffset,1e3):this.characterPos[1]+this.spawnCloudAheadBuffer)>this.lockSpawnHeight))for(var r=0;r<this.clouds.length;r++)if(1!=this.clouds[r].active)return this.clouds[r].initCloud=1==e,this.clouds[r].spawnPos[0]=a,this.clouds[r].spawnPos[1]=o,this.clouds[r].sprite.position.x=a,this.clouds[r].sprite.position.y=o,this.clouds[r].sprite.scale.x=i,this.clouds[r].sprite.scale.y=i,this.clouds[r].active=!0,this.clouds[r].layer=s,this.cloudsActive++,void t.addChild(this.clouds[r].sprite)},e.prototype.setGameState=function(e){this.gameState=e;for(var t=0;t<this.clouds.length;t++)this.clouds[t].active=!1;this.cloudsActive=0},e.prototype.createClouds=function(e){for(var t=0;t<20;t++){var i=Game.displayStore.getSprite("volcano-skydive/cloud-"+String(e)+".png");this.clouds.push({sprite:i,active:!1,layer:0,spawnPos:[0,0],initCloud:!1})}},e.prototype.updateCharacterPosition=function(e){this.characterPos[0]=e.x,this.characterPos[1]=e.y},e.prototype.tick=function(e,t,i){if(0!=this.gameState){this.manageLines(this.characterPos);for(var s=0;s<this.clouds.length;s++)if(0!=this.clouds[s].active){0==this.clouds[s].layer&&1==this.spawnAllowed&&(this.clouds[s].sprite.position.y+=t/1.5,this.clouds[s].sprite.position.x+=e/1.5),1==this.clouds[s].layer&&1==this.spawnAllowed&&(this.clouds[s].sprite.position.y+=t/2,this.clouds[s].sprite.position.x+=e/2),this.clouds[s].sprite.position.y<this.characterPos[1]-this.removeCloudBuffer&&(this.clouds[s].active=!1,this.cloudsActive--)}this.cloudsActive>=this.cloudsActiveTotal||this.characterPos[1]<this.noSpawnBufferDistance||++this.spawnCloudCounter>=this.spawnCloudCounterLimit&&(this.spawnCloudCounter=0,this.spawnCloudCounterLimit=Game.getRandom(this.spawnCloudCounterLimits[0],this.spawnCloudCounterLimits[1]),this.spawnSingleCloud(!1))}else this.manageInitialClouds(t,i)},e.prototype.manageInitialClouds=function(e,t){for(var i,s=Game.stageWidth/2,o=e/10,a=0;a<this.clouds.length;a++)0!=this.clouds[a].active&&(i=(this.clouds[a].sprite.position.x-s)/500,0==this.clouds[a].layer?(this.clouds[a].sprite.position.y+=.5*o,this.clouds[a].sprite.position.x+=.5*i):1==this.clouds[a].layer?(this.clouds[a].sprite.position.y+=1*o,this.clouds[a].sprite.position.x+=1*i):2==this.clouds[a].layer&&(this.clouds[a].sprite.position.y+=1.5*o,this.clouds[a].sprite.position.x+=1.5*i))},e.prototype.manageLines=function(e){if(!(e[1]<this.noSpawnBufferDistance)){++this.spawnLineCounter>=this.spawnLineCounterLimit&&(this.spawnLineCounter=0,this.spawnLine());for(var t=0;t<this.airLines.length;t++)0!=this.airLines[t].active&&(this.airLines[t].sprite.position.y-=this.airLines[t].speed,this.airLines[t].sprite.position.y<this.characterPos[1]-800&&(this.airLines[t].active=!1))}},e.prototype.spawnLine=function(){if(0!=this.spawnAllowed)for(var e=0;e<this.airLines.length;e++)if(1!=this.airLines[e].active){var t=this.characterPos[0]+Game.getRandom(-600,600),i=Game.getRandom(10,60);return this.airLines[e].speed=i,this.airLines[e].active=!0,this.airLines[e].sprite.position.x=t,void(this.airLines[e].sprite.position.y=this.characterPos[1]+500)}},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){for(e=0;e<this.clouds.length;e++)Game.displayStore.returnPooledItem(this.clouds[e].sprite);for(var e=0;e<this.airLines.length;e++)Game.displayStore.returnPooledItem(this.airLines[e].sprite)},e}(),VolcanoSkydiveWindManager=function(){function e(e,t,i,s,o,a){this.windBarColourArray=[{colour:4580424},{colour:14973974},{colour:14955286}],this.scene=e,this.mainContainer=i,this.sceneContainer=t,this.windParticleCount=0,this.windParticleLimit=5,this.windPoints=new Array,this.powerUpActive=!1,this.windKilled=!1,this.arrowFlashing=!1,this.arrowDisappearing=!1,this.betweenRoundDisable=!1,this.arrowDisappearCount=0,this.arrowDisappearLimit=120,this.gustCountLimit=90,this.gustCounter=0,this.gustBaseStrength=150,this.gustStrength=0,this.gustBlowing=!1,this.startArrowOffset=5,this.fullArrowWidth=220,this.currentArrowWidth=0,this.arrowHeadOffset=9,this.arrowFlashCountLimit=4,this.arrowFlashCounter=0,this.arrowAlphaTarget=0,this.arrowCurrentAlpha=0,this.arrowAlphaChangeFrameCount=0,this.arrowAlphaChangeFrameLimit=10,this.arrowHolder=Game.displayStore.getContainer("volcano-skydive/arrow-holder"),this.arrowHolder.alpha=0,this.windWarningOn=!1,this.windSequenceOn=!1,this.arrowEndLoc=0,this.currentArrowEndLoc=0,this.arrowWidth=0,this.meterYPos=40,this.currentWindStrength=0,this.characterHead=s,this.characterArmLeft=o,this.characterArmRight=a,this.windMeterBG=Game.displayStore.getSprite("volcano-skydive/wind-meter-bg.png"),this.windMeterBG.position.x=Game.stageWidth/2,this.windMeterBG.position.y=this.meterYPos,this.windMeterBG.alpha=0,this.windArrowBody=Game.displayStore.getSprite("volcano-skydive/wind-arrow-body.png"),this.windArrowHead=Game.displayStore.getSprite("volcano-skydive/wind-arrowhead.png"),this.sceneContainer.addChild(this.windMeterBG),this.arrowHolder.position.x=Game.stageWidth/2,this.arrowHolder.position.y=this.meterYPos,this.arrowHolder.addChild(this.windArrowBody),this.arrowHolder.addChild(this.windArrowHead),this.sceneContainer.addChild(this.arrowHolder),this.windParticles=new Array;for(var r=0;r<20;r++){var n=Game.displayStore.getSprite("volcano-skydive/wind-particle.png");this.windParticles.push({sprite:n,speed:0,active:!1}),this.windParticles[r].sprite.alpha=1}}return e.prototype.makeMeterVisible=function(){this.betweenRoundDisable=!1,this.meterAppearTimeline=new TimelineMax,this.meterAppearTimeline.add([TweenMax.to(this.windMeterBG,.5,{alpha:1,ease:Sine.easeOut})])},e.prototype.tick=function(e){if(1!=this.betweenRoundDisable){if(e>this.startPos+this.windPoints[this.currentWindPointIndex].point&&0==this.passedLastWindPoint){this.createWindGust(),++this.currentWindPointIndex>=this.windPoints.length&&(this.passedLastWindPoint=!0,this.currentWindPointIndex=this.windPoints.length-1);for(var t=0;t<this.windParticles.length;t++)this.windParticles[t].sprite.alpha=1}0!=this.windWarningOn&&(this.manageGust(),this.manageArrowDisappearing(),this.manageWindParticles(),this.currentArrowEndLoc=this.scene.simpleEase(this.currentArrowEndLoc,this.arrowEndLoc,20),this.currentArrowWidth=this.scene.simpleEase(this.currentArrowWidth,this.arrowWidth,20),this.windArrowHead.position.x=Math.round(this.currentArrowEndLoc+this.arrowHeadOffset),this.windArrowBody.width=Math.round(this.currentArrowWidth),this.arrowCurrentAlpha=this.scene.simpleEase(this.arrowCurrentAlpha,this.arrowAlphaTarget,3),this.arrowHolder.alpha=this.arrowCurrentAlpha,0!=this.arrowFlashing&&++this.arrowAlphaChangeFrameCount>=this.arrowAlphaChangeFrameLimit&&(this.arrowAlphaChangeFrameCount=0,0==this.arrowAlphaTarget?(this.arrowAlphaTarget=1,this.arrowFlashCounter++):1==this.arrowAlphaTarget&&(this.arrowAlphaTarget=0,Game.playSound("volcano-skydive/wind-warning.mp3",.7)),this.arrowFlashCounter>=this.arrowFlashCountLimit&&(this.arrowFlashing=!1,this.arrowAlphaTarget=1,this.gustBlowing=!0)))}},e.prototype.killWind=function(){this.windSequenceOn=!1,this.windKilled=!0,this.gustBlowing=!1,this.arrowAlphaTarget=0,this.arrowDisappearing=!0,this.windWarningOn=!1,this.arrowFlashing=!1;for(var e=0;e<this.windParticles.length;e++)this.windParticles[e].sprite.visible=!1;this.meterAppearTimeline=this.scene.killTween(this.meterAppearTimeline),this.meterAppearTimeline=new TimelineMax,this.meterAppearTimeline.add([TweenMax.to(this.windMeterBG,.5,{alpha:0,ease:Sine.easeOut}),TweenMax.to(this.arrowHolder,.5,{alpha:0,ease:Sine.easeOut})],0)},e.prototype.setWindParams=function(e,t,i,s){this.windRange=[.2,e],this.currentDropRange=i,this.startPos=s,this.currentWindPointIndex=0,this.passedLastWindPoint=!1,this.windPoints=new Array;for(var o=0;o<t.length;o++)this.windPoints.push({point:this.currentDropRange*t[o]})},e.prototype.resetWind=function(){this.arrowFlashing=!1,this.arrowDisappearing=!1,this.gustBlowing=!1,this.windWarningOn=!1,this.windSequenceOn=!1,this.windKilled=!1;for(var e=0;e<this.windParticles.length;e++)this.windParticles[e].sprite.position.x=-this.windParticles[e].sprite.width,this.windParticles[e].sprite.visible=!0,this.windParticles[e].sprite.alpha=1;this.betweenRoundDisable=!0},e.prototype.manageGust=function(){if(0!=this.gustBlowing){++this.gustCounter>=this.gustCountLimit&&(this.gustBlowing=!1,this.arrowAlphaTarget=0,this.arrowDisappearing=!0,this.windSequenceOn=!1,Game.fadeSound("volcano-skydive/wind-looping.wav",.5,0));var e=this.gustStrength;1==this.powerUpActive&&(e=this.gustStrength/10),this.characterArmLeft.applyForce([e,0]),this.characterArmRight.applyForce([e,0]),this.characterHead.applyForce([e,0])}},e.prototype.setPowerUpActive=function(e){this.powerUpActive=e},e.prototype.manageWindParticles=function(){for(var e=0;e<this.windParticles.length;e++)0!=this.windParticles[e].active&&(this.windParticles[e].sprite.position.x+=this.windParticles[e].speed,this.windParticles[e].sprite.alpha>0&&(this.windParticles[e].sprite.alpha-=.02),-1==this.windDirection?this.windParticles[e].sprite.position.x<-this.windParticles[e].sprite.width&&(this.windParticles[e].active=!1):this.windParticles[e].sprite.position.x>Game.stageWidth+this.windParticles[e].sprite.width&&(this.windParticles[e].active=!1));0!=this.gustBlowing&&++this.windParticleCount>=this.windParticleLimit&&(this.windParticleCount=0,this.spawnWindParticle())},e.prototype.spawnWindParticle=function(){var e,t=Game.getRandom(.5,1);e=-1==this.windDirection?Game.stageWidth+553:-553;for(var i=t*this.gustStrength,s=2*t,o=Game.getRandom(0,Game.stageHeight),a=0;a<this.windParticles.length;a++)if(1!=this.windParticles[a].active)return this.windParticles[a].active=!0,this.windParticles[a].sprite.position.x=e,this.windParticles[a].sprite.position.y=o,this.windParticles[a].sprite.scale.x=s,this.windParticles[a].sprite.scale.y=s,this.windParticles[a].speed=i,void this.sceneContainer.addChildAt(this.windParticles[a].sprite,10)},e.prototype.manageArrowDisappearing=function(){0!=this.arrowDisappearing&&++this.arrowDisappearCount>=this.arrowDisappearLimit&&(this.windWarningOn=!1)},e.prototype.tintWindArrow=function(){var e=0;this.currentWindStrength>=.35&&this.currentWindStrength<=.65?e=1:this.currentWindStrength>=.65&&(e=2),this.windArrowHead.tint=this.windBarColourArray[e].colour,this.windArrowBody.tint=this.windBarColourArray[e].colour},e.prototype.createWindGust=function(){1!=this.windKilled&&1!=this.windSequenceOn&&(this.windSequenceOn=!0,this.windWarningOn=!0,this.arrowFlashing=!0,this.gustBlowing=!1,this.gustCounter=0,this.arrowDisappearCount=0,this.arrowDisappearing=!1,this.currentArrowEndLoc=0,this.currentArrowWidth=0,this.arrowStartPos=0,this.arrowEndLoc=0,this.arrowFlashCounter=0,this.arrowAlphaTarget=1,Game.getRandom(0,1)<.5?this.windDirection=1:this.windDirection=-1,this.arrowStartPos=this.windDirection*this.startArrowOffset,this.arrowHolder.position.x=Game.stageWidth/2+this.arrowStartPos,this.arrowHolder.scale.x=this.windDirection,this.currentWindStrength=Game.getRandom(this.windRange[0],this.windRange[1]),this.gustStrength=this.gustBaseStrength*this.currentWindStrength*this.windDirection,this.arrowWidth=this.currentWindStrength*this.fullArrowWidth,this.arrowEndLoc=this.arrowWidth,this.tintWindArrow(),Game.setSoundVolume("volcano-skydive/wind-looping.wav",0),Game.fadeSound("volcano-skydive/wind-looping.wav",.7,this.currentWindStrength/1.5),Game.playSound("volcano-skydive/wind-looping.wav"))},e.prototype.pause=function(){this.scene.pauseResumeTween(this.meterAppearTimeline,"pause"),Game.pauseSound("olcano-skydive/wind-looping.wav")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.meterAppearTimeline,"resume"),Game.resumeSound("olcano-skydive/wind-looping.wav")},e.prototype.destroy=function(){for(var e=0;e<this.windParticles.length;e++)Game.displayStore.returnPooledItem(this.windParticles[e].sprite);this.meterAppearTimeline=this.scene.killTween(this.meterAppearTimeline),Game.stopSound("olcano-skydive/wind-looping.wav")},e}(),VolcanoSkydiveInputManager=function(){function e(e,t){this.scene=e,this.mainHolderRef=t,this.hitAreaSprite=Game.displayStore.getSprite("volcano-skydive/blank-input.png"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.hitAreaSprite.interactiveChildren=!1,this.hitAreaSprite.hitArea=new PIXI.Rectangle(0,0,200,200),this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite),this.mouseDown=!1}return e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseupoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))})):(e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}))},e.prototype.inputDown=function(e,t){e.mouseDown=!0,t.x<Game.stageWidth/2?e.scene.leftInputDown():t.x>=Game.stageWidth/2&&e.scene.rightInputDown()},e.prototype.inputUp=function(e,t){e.mouseDown=!1,t.x<Game.stageWidth/2?e.scene.leftInputUp():t.x>=Game.stageWidth/2&&e.scene.rightInputUp()},e.prototype.tick=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},e}(),VolcanoSkydiveObstacleManager=function(){function e(e,t){this.obstacleColourArray=[{colour:1769365},{colour:16718551},{colour:16776218},{colour:16743194},{colour:16725274},{colour:1965906},{colour:12000767},{colour:13565725},{colour:16757789},{colour:16736797}],this.scene=e,this.mainContainer=t,this.obstacleLimit=2,this.lockObstacleSpawn=!1,this.currentObstacleAggressiveness=0,this.characterPos=new PIXI.Point(0,0),this.obstacleTotal=10,this.flashStartDistance=2e3,this.obstaclesActive=0,this.spawnAheadDistance=4e3,this.removeBehindDistance=600,this.obstacles=new Array;for(var i=0;i<this.obstacleTotal;i++){var s=this.scene.getObstaclePhysics(),o=Game.displayStore.getSprite("volcano-skydive/obstacle.png");o.position.y=-3e3;var a=Game.getRandom(0,this.obstacleColourArray.length-1,!0);o.tint=this.obstacleColourArray[a].colour;var r=Game.displayStore.getSprite("volcano-skydive/obstacle-indicator.png");r.position.x=-1e3,r.position.y=Game.stageHeight-30,this.scene.container.addChild(r),this.mainContainer.addChild(o),this.obstacles.push({sprite:o,body:s.body,shape:s.shape,active:!1,indicatorSprite:r,indicatorAppearTween:null,indicatorActive:!1,indicatorFlashing:!1,flashCounter:0,flashCounterLimit:10,hit:!1})}}return e.prototype.tick=function(e){++this.currentObstacleFrame>=this.currentObstacleAggressiveness&&(this.currentObstacleFrame=0,this.spawnObstacle()),this.characterPos=e;for(var t=0;t<this.obstacles.length;t++)if(0!=this.obstacles[t].active){this.obstacles[t].sprite.position.x=this.obstacles[t].body.position[0],this.obstacles[t].sprite.position.y=Game.stageHeight-this.obstacles[t].body.position[1],this.obstacles[t].sprite.rotation=-this.obstacles[t].body.angle;var i=this.scene.container.toLocal(this.obstacles[t].sprite.position,this.mainContainer);this.obstacles[t].indicatorSprite.position.x=i.x,this.obstacles[t].sprite.position.y<this.characterPos.y-this.removeBehindDistance&&this.removeObstacle(t),this.obstacles[t].sprite.position.y<this.characterPos.y+this.flashStartDistance&&(this.obstacles[t].indicatorFlashing=!0),1==this.obstacles[t].indicatorFlashing&&++this.obstacles[t].flashCounter>=this.obstacles[t].flashCounterLimit&&(this.obstacles[t].flashCounter=0,1==this.obstacles[t].indicatorSprite.visible?this.obstacles[t].indicatorSprite.visible=!1:this.obstacles[t].indicatorSprite.visible=!0),0!=this.obstacles[t].indicatorActive&&this.obstacles[t].sprite.position.y<this.characterPos.y&&this.removeIndicator(t)}},e.prototype.removeRemainingObstacles=function(){for(var e=0;e<this.obstacles.length;e++)0!=this.obstacles[e].active&&(this.obstacles[e].body.applyForce([0,20]),this.obstacles[e].sprite.position.x=this.obstacles[e].body.position[0],this.obstacles[e].sprite.position.y=Game.stageHeight-this.obstacles[e].body.position[1],this.obstacles[e].sprite.rotation=-this.obstacles[e].body.angle,this.obstacles[e].sprite.position.y<this.characterPos.y-this.removeBehindDistance&&this.removeObstacle(e))},e.prototype.removeObstacle=function(e){this.obstacles[e].active=!1,this.obstacles[e].sprite.position.y=-2e3,this.scene.removePhysicsBodyFromWorld(this.obstacles[e].body),this.resetBody(this.obstacles[e].body)},e.prototype.removeIndicator=function(e){this.obstacles[e].indicatorActive=!1,this.obstacles[e].indicatorAppearTween=this.scene.killTween(this.obstacles[e].indicatorAppearTween),this.obstacles[e].indicatorAppearTween=TweenMax.to(this.obstacles[e].indicatorSprite.scale,.2,{x:0,y:0,ease:Sine.easeOut})},e.prototype.killObstacles=function(){this.lockObstacleSpawn=!0;for(var e=0;e<this.obstacles.length;e++)0!=this.obstacles[e].active&&this.removeIndicator(e)},e.prototype.obstacleCollisionCheck=function(e,t,i){for(var s=0;s<this.obstacles.length;s++)if(0!=this.obstacles[s].active&&(e==this.obstacles[s].body||t==this.obstacles[s].body)&&0==this.obstacles[s].hit){if(this.obstacles[s].hit=!0,0==i)return this.obstacles[s].active=!1,this.scene.handleObstacleHit(e),this.scene.removePhysicsBodyFromWorld(e),this.obstacles[s].sprite.position.y=-3e3,this.obstacles[s].indicatorSprite.position.x=-1e3,void((o=[{id:"volcano-skydive/pop1.mp3"},{id:"volcano-skydive/pop2.mp3"},{id:"volcano-skydive/pop3.mp3"},{id:"volcano-skydive/pop4.mp3"},{id:"volcano-skydive/pop5.mp3"}])[a=Game.getRandom(0,4,!0)]&&Game.playSound(o[a].id,o[a].vol||1));var o=[{id:"volcano-skydive/shield-hit-1.mp3"},{id:"volcano-skydive/shield-hit-2.mp3"}],a=Game.getRandom(0,1,!0);return void(o[a]&&Game.playSound(o[a].id,o[a].vol||1))}},e.prototype.spawnObstacle=function(){if(1!=this.lockObstacleSpawn&&!(this.obstaclesActive>=this.obstacleTotal))for(var e=0;e<this.obstacles.length;e++)if(0==this.obstacles[e].active)return this.obstacles[e].active=!0,this.obstacles[e].indicatorActive=!0,this.obstacles[e].indicatorFlashing=!1,this.obstacles[e].sprite.visible=!0,this.obstacles[e].hit=!1,this.obstacles[e].body.position[1]=Game.stageHeight-(this.characterPos.y+this.spawnAheadDistance),this.obstacles[e].body.position[0]=this.characterPos.x+Game.getRandom(-600,600),this.obstacles[e].indicatorSprite.scale.x=0,this.obstacles[e].indicatorSprite.scale.y=0,this.obstacles[e].indicatorAppearTween=this.scene.killTween(this.obstacles[e].indicatorAppearTween),this.obstacles[e].indicatorAppearTween=TweenMax.to(this.obstacles[e].indicatorSprite.scale,.2,{x:1,y:1,ease:Sine.easeOut}),void this.scene.addPhysicsBodyToWorld(this.obstacles[e].body)},e.prototype.setObstacleParams=function(e){this.currentObstacleAggressiveness=e,this.currentObstacleFrame=0,this.lockObstacleSpawn=!1},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angle=0,e.velocity=[0,0],e.setZeroForce()},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){for(var e=0;e<this.obstacles.length;e++)Game.displayStore.returnPooledItem(this.obstacles[e].sprite),Game.displayStore.returnPooledItem(this.obstacles[e].indicatorSprite)},e}(),VolcanoSkydiveAltitudeMeter=function(){function e(e,t,i,s){this.scene=e,this.mainContainer=t,this.maxAltitude=i,this.landingBuffer=s,this.altitudeMeterHolder=Game.displayStore.getContainer("volcano-skydive/altitude-meter-holder"),this.altitudeMeterBG=Game.displayStore.getSprite("volcano-skydive/altitude-meter-bg.png"),this.altitudeMeterNeedle=Game.displayStore.getSprite("volcano-skydive/altitude-meter-needle.png"),this.altitudeMeterHolder.position.x=Game.stageWidth-97,this.altitudeMeterHolder.position.y=135,this.needleRange=[20,this.altitudeMeterBG.height-20],this.altitudeMeterHolder.addChild(this.altitudeMeterBG),this.altitudeMeterHolder.addChild(this.altitudeMeterNeedle),this.mainContainer.addChild(this.altitudeMeterHolder),this.altitudeMeterHolder.alpha=0}return e.prototype.makeMeterVisible=function(e){this.meterAppearTimeline=this.scene.killTween(this.meterAppearTimeline),this.meterAppearTimeline=new TimelineMax,this.meterAppearTimeline.add([TweenMax.to(this.altitudeMeterHolder,.5,{alpha:e,ease:Sine.easeOut})],0)},e.prototype.setHeightRange=function(e,t){this.currentAltitudeHeight=e,this.startYPos=t,this.floorYPos=this.startYPos+this.currentAltitudeHeight,this.altitudeMeterNeedle.position.y=this.needleRange[0],this.meterKilled=!1,this.scene.setSkyOverlayAlpha((this.currentAltitudeHeight+this.landingBuffer)/(this.maxAltitude+this.landingBuffer)),this.scene.manageHillsProgress((this.currentAltitudeHeight+this.landingBuffer)/(this.maxAltitude+this.landingBuffer))},e.prototype.tick=function(e){var t=e.y,i=(t-this.startYPos)/this.currentAltitudeHeight;this.setNeedlePos(i);var s=(this.floorYPos-t+this.landingBuffer)/(this.maxAltitude+this.landingBuffer);this.scene.setSkyOverlayAlpha(s),this.scene.manageHillsProgress(s)},e.prototype.setNeedlePos=function(e){if(!(e<0||e>1)){e>.9&&this.scene.lockCloudSpawn(),e>=.98&&this.killMeter();var t=e*(this.needleRange[1]-this.needleRange[0]);this.altitudeMeterNeedle.position.y=this.needleRange[0]+t}},e.prototype.killMeter=function(){1!=this.meterKilled&&(this.meterKilled=!0,this.makeMeterVisible(0))},e.prototype.pause=function(){this.scene.pauseResumeTween(this.meterAppearTimeline,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.meterAppearTimeline,"resume")},e.prototype.destroy=function(){this.meterAppearTimeline=this.scene.killTween(this.meterAppearTimeline)},e}(),SnowballWarsCharacterBase=function(){function e(e){this.scene=e}return e.prototype.tick=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){},e}(),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),SnowballWarsPlayer=function(e){function t(t,i){var s=e.call(this,t)||this;s.mainScene=t,s.arenaManager=i,s.fireHeld=!1,s.footsoundTick=0,s.collisionTick=0,s.backPanelArray=new Array,s.backPanelArray.push({number:0,panel:Game.displayStore.getSprite("snowball-wars/gun-0-balls")}),s.backPanelArray.push({number:1,panel:Game.displayStore.getSprite("snowball-wars/gun-1-balls")}),s.backPanelArray.push({number:2,panel:Game.displayStore.getSprite("snowball-wars/gun-2-balls")}),s.backPanelArray.push({number:3,panel:Game.displayStore.getSprite("snowball-wars/gun-3-balls")}),s.backPanelArray.push({number:4,panel:Game.displayStore.getSprite("snowball-wars/gun-4-balls")}),s.backPanelArray.push({number:5,panel:Game.displayStore.getSprite("snowball-wars/gun-5-balls")}),s.backPanelArray.push({number:6,panel:Game.displayStore.getSprite("snowball-wars/gun-6-balls")}),s.backPanelArray.push({number:7,panel:Game.displayStore.getSprite("snowball-wars/gun-7-balls")}),s.backPanelArray.push({number:8,panel:Game.displayStore.getSprite("snowball-wars/gun-8-balls")}),s.backPanelArray.push({number:9,panel:Game.displayStore.getSprite("snowball-wars/gun-9-balls")}),s.backPanelArray.push({number:10,panel:Game.displayStore.getSprite("snowball-wars/gun-10-balls")}),s.gunBackPanelHolder=Game.displayStore.getContainer("snowball-wars/gun-back-panel-holder");for(o=0;o<s.backPanelArray.length;o++)s.gunBackPanelHolder.addChild(s.backPanelArray[o].panel),s.backPanelArray[o].panel.visible=!1,10==s.backPanelArray[o].number&&(s.backPanelArray[o].panel.visible=!0);if(0==Game.isLowEndIPad){s.gunSmokeParticle=new Array;for(var o=0;o<60;o++)s.gunSmokeParticle.push({decay:Game.getRandom(1,2),active:!1,sprite:Game.displayStore.getSprite("snowball-wars/gun-smoke-particle")}),s.mainScene.floorLayer.addChild(s.gunSmokeParticle[o].sprite)}s.ammoAlert=Game.displayStore.getSprite("snowball-wars/ammo-alert"),s.ammoAlertTimer=0,s.ammoAlert.scale.x=s.ammoAlert.scale.y=0,s.ammoAlert.visible=!1,s.ammoAlertActive=!1,s.mainScene.healthUILayer.addChild(s.ammoAlert),s.playerContainer=Game.displayStore.getContainer("snowball-wars/player-container"),s.playerHolder=Game.displayStore.getContainer("snowball-wars/player-holder"),s.lincShadow=Game.displayStore.getSprite("snowball-wars/character-linc/linc-shadow"),s.runningLegs=Game.displayStore.getAnimatedSprite("snowball-wars/snowball-wars-linc-legs-frames"),s.idleBackLeg=Game.displayStore.getSprite("snowball-wars/character-linc/linc-back-leg-idle"),s.idleFrontLeg=Game.displayStore.getSprite("snowball-wars/character-linc/linc-front-leg-idle"),s.playerHead=Game.displayStore.getContainer("snowball-wars/player-head-holder"),s.lincEyelids=s.playerHead.getSprite("snowball-wars/character-linc/linc-eyelids"),s.lincHair=s.playerHead.getSprite("snowball-wars/character-linc/linc-hair"),s.snowPile=Game.displayStore.getSprite("snowball-wars/enemy-snow-death"),s.snowPileBlinkOpen=Game.displayStore.getSprite("snowball-wars/enemy-snow-pile-eyes-open"),s.snowPileBlink=Game.displayStore.getSprite("snowball-wars/enemy-snow-pile-eyes-blink"),s.snowGun=Game.displayStore.getSprite("snowball-wars/character-linc/linc-gun-front"),s.lincGunArm=Game.displayStore.getSprite("snowball-wars/character-linc/linc-gun-arm"),s.lincBody=Game.displayStore.getSprite("snowball-wars/character-linc/linc-body"),s.gunBack=Game.displayStore.getSprite("snowball-wars/character-linc/linc-gun-back"),s.powerUpGun=Game.displayStore.getSprite("snowball-wars/character-linc/linc-gun-front-power-up"),s.playerContainer.addChild(s.lincShadow),s.playerContainer.addChild(s.playerHolder),s.playerHolder.addChild(s.runningLegs),s.playerHolder.addChild(s.idleBackLeg),s.playerHolder.addChild(s.idleFrontLeg),s.playerHolder.addChild(s.gunBack),s.playerHolder.addChild(s.lincBody),s.playerHolder.addChild(s.lincGunArm),s.playerHolder.addChild(s.snowGun),s.playerHolder.addChild(s.powerUpGun),s.powerUpGun.visible=!1,s.shield=Game.displayStore.getSprite("snowball-wars/shield"),s.playerHead.position.y=-30,s.playerHead.position.x=0,s.icedFrames=Game.displayStore.getAnimatedSprite("snowball-wars/bang-frames"),s.icedFrames.loop=!1,s.icedFrames.stop(),s.icedFrames.animationSpeed=.3,s.icedFrames.visible=!1,s.hitFrames=Game.displayStore.getAnimatedSprite("snowball-wars/hit-frames"),s.hitFrames.loop=!1,s.hitFrames.stop(),s.hitFrames.animationSpeed=.5,s.hitFrames.visible=!1,s.playerIdle=!1,s.runningLegs.visible=!1,s.lincShadow.alpha=.3,s.headEaseCounter=0,s.testNumber=0,s.gameOverTriggered=!1,s.shield.visible=!1,s.shield.scale.x=s.shield.scale.y=.9,s.runningBounceDown=!1,s.expressionTimer=0,s.expressionTimerActive=!1,s.blinkTimer=0,s.blinkTimerLimit=60,s.currentExpression=new Array,s.currentExpression.push({expression:"neutral",active:!0,sprite:s.playerHead.getSprite("snowball-wars/character-linc/linc-mouth-normal")}),s.currentExpression.push({expression:"sad",active:!1,sprite:s.playerHead.getSprite("snowball-wars/character-linc/linc-mouth-sad")}),s.currentExpression.push({expression:"happy",active:!1,sprite:s.playerHead.getSprite("snowball-wars/character-linc/linc-mouth-happy")}),s.currentExpression.push({expression:"gameover",active:!1,sprite:s.playerHead.getSprite("snowball-wars/character-linc/linc-mouth-sad")}),s.currentExpression[0].sprite.visible=!0,s.currentExpression[1].sprite.visible=!1,s.currentExpression[2].sprite.visible=!1,s.currentExpression[3].sprite.visible=!1,s.boundingBox=Game.displayStore.getSprite("snowball-wars/bounding-box-player"),s.playerHolder.scale.x=s.playerHolder.scale.y=.8,s.runningLegs.scale.x=s.runningLegs.scale.y=.85,s.playerHead.scale.x=s.playerHead.scale.y=.8,s.playerHolder.addChildAt(s.gunBackPanelHolder,0),s.playerContainer.addChild(s.playerHead),s.playerContainer.addChild(s.shield),s.playerContainer.addChild(s.snowPile),s.playerContainer.addChild(s.snowPileBlinkOpen),s.playerContainer.addChild(s.snowPileBlink),s.playerContainer.addChild(s.hitFrames),s.playerContainer.addChild(s.icedFrames),s.icedFrames.visible=!1,s.hitFrames.visible=!1,s.hitFrames.scale.x=s.hitFrames.scale.y=2.7,s.lincBody.visible=!0,s.snowGun.visible=!0,s.playerHead.visible=!0,s.idleBackLeg.visible=!0,s.idleFrontLeg.visible=!0,s.runningLegs.visible=!0,s.gunBack.visible=!0,s.snowPile.visible=!1,s.snowPileBlinkOpen.visible=!1,s.snowPileBlink.visible=!1,s.runningLegs.play(),s.runningLegs.animationSpeed=.25,s.runningLegs.position.y=2,s.runningLegs.position.x=-8,s.lincShadow.position.x=s.runningLegs.position.x+13,s.lincShadow.position.y=s.runningLegs.position.y-4,s.lincShadow.scale.y=1.1,s.mainScene.orderingContainer.addChild(s.playerContainer),1==s.mainScene.debugSprites&&s.mainScene.floorLayer.addChild(s.boundingBox);var a=s.arenaManager.getAvailablePosition("player",!1);return s.playerContainer.position.x=a.posX,s.playerContainer.position.y=a.posY,s.playerBoundingBox={topX:0,topY:0,bottomX:0,bottomY:0,width:0,height:0},s.playerPotentialBoundingBox={topX:0,topY:0,bottomX:0,bottomY:0,width:0,height:0},s.lincEyelids.visible=!1,s}return __extends(t,e),t.prototype.spawn=function(){if(this.icedFrames.visible=!1,this.hitFrames.visible=!1,this.powerUpActive=!1,this.lincShadow.visible=!0,this.gunBackPanelHolder.position.x=this.gunBack.position.x,this.gunBackPanelHolder.position.y=this.gunBack.position.y,this.playerHit=!1,this.ammo=10,this.gameOverTriggered=!1,this.powerUpGun.visible=!1,this.xVelocity=0,this.yVelocity=0,this.xVelocityTarget=0,this.yVelocityTarget=0,this.maximumSpeed=5,this.playerHitTimer=0,this.playerHitLimit=60,this.roundEndLock=!0,this.shotCoolDown=0,this.shotCoolDownLimit=20,this.shotAllowed=!0,this.playerHolder.position.x=0,this.snowPile.visible=!1,this.snowPileBlinkOpen.visible=!1,this.snowPileBlink.visible=!1,this.mainScene.mainDisplayOrder.push({objectType:"player",object:this.playerContainer,objectID:1,yPosition:this.playerContainer.position.y}),0==Game.isLowEndIPad){this.footMarkTick=0,this.footMarkArray=new Array;for(var e=0;e<90;e++)this.footMarkArray.push({active:!1,sprite:Game.displayStore.getSprite("snowball-wars/foot-mark")}),this.footMarkArray[e].sprite.visible=!1,this.mainScene.floorLayer.addChild(this.footMarkArray[e].sprite)}else this.snowGun.position.x=7,this.lincGunArm.rotation=-.5,this.gunBack.position.x=-20},t.prototype.playIcedFrames=function(){this.icedFrames.position.y=-65,this.icedFrames.position.x=0,this.icedFrames.scale.x=this.icedFrames.scale.y=2.5,this.icedFrames.visible=!0,this.icedFrames.gotoAndPlay(1)},t.prototype.fireGunSmoke=function(){for(var e=0;e<10;e++){var t=this.gunSmokeParticle[e];0==t.active&&(t.active=!0,t.decay=Game.getRandom(.5,1.5),t.sprite.scale.x=t.sprite.scale.y=Game.getRandom(.5,1.5),t.sprite.alpha=Game.getRandom(.6,1),t.sprite.rotation=Game.getRandom(0,2*Math.PI),t.sprite.position.x=this.playerContainer.position.x+Game.getRandom(32,36),t.sprite.position.y=this.playerContainer.position.y+this.snowGun.position.y+Game.getRandom(25,35))}},t.prototype.secondChanceReset=function(){this.gameOverTriggered=!1,this.snowPile.visible=!1,this.snowPileBlink.visible=!1,this.snowPileBlinkOpen.visible=!1,this.lincShadow.visible=!0,this.snowPile.position.x=this.runningLegs.position.x,this.snowPile.position.y=this.runningLegs.position.y,this.snowPileBlink.position.x=this.runningLegs.position.x,this.snowPileBlink.position.y=this.runningLegs.position.y-100,this.snowPileBlinkOpen.position.x=this.runningLegs.position.x,this.snowPileBlinkOpen.position.y=this.runningLegs.position.y-100,this.lincBody.visible=!0,this.snowGun.visible=!0,this.playerHead.visible=!0,this.idleBackLeg.visible=!0,this.idleFrontLeg.visible=!0,this.runningLegs.visible=!0,this.gunBack.visible=!0},t.prototype.triggerGameover=function(){this.playIcedFrames(),this.gameOverTriggered=!0,this.snowPile.visible=!0,this.snowPileBlink.visible=!0,this.snowPileBlinkOpen.visible=!0,this.lincShadow.visible=!1,Game.playSound("snowball-wars/snow-land.mp3"),this.snowPile.position.x=this.runningLegs.position.x,this.snowPile.position.y=this.runningLegs.position.y,this.snowPileBlink.position.x=this.runningLegs.position.x,this.snowPileBlink.position.y=this.runningLegs.position.y-100,this.snowPileBlinkOpen.position.x=this.runningLegs.position.x,this.snowPileBlinkOpen.position.y=this.runningLegs.position.y-100,this.lincBody.visible=!1,this.snowGun.visible=!1,this.playerHead.visible=!1,this.idleBackLeg.visible=!1,this.idleFrontLeg.visible=!1,this.runningLegs.visible=!1,this.gunBack.visible=!1},t.prototype.changeExpression=function(e){for(var t=0;t<this.currentExpression.length;t++)t!=e&&(this.currentExpression[t].active=!1,this.currentExpression[t].sprite.visible=!1);this.currentExpression[e].active=!0,this.currentExpression[e].sprite.visible=!0,0!=e&&(this.expressionTimerActive=!0)},t.prototype.happyLinc=function(){this.changeExpression(2)},t.prototype.endRoundReset=function(){this.changeExpression(2),this.roundEndLock=!0},t.prototype.roundUnlock=function(){this.roundEndLock=!1},t.prototype.activatePlayerPowerup=function(){this.shield.visible=!0,this.snowGun.visible=!1,this.powerUpGun.visible=!0},t.prototype.deactivatePlayerPowerup=function(){this.shield.visible=!1,this.snowGun.visible=!0,this.powerUpGun.visible=!1},t.prototype.getPlayerPosition=function(){return{x:this.playerContainer.position.x,y:this.playerContainer.position.y}},t.prototype.changeVelocity=function(e){switch(e){case"left":this.xVelocityTarget=-this.maximumSpeed;break;case"right":this.xVelocityTarget=this.maximumSpeed;break;case"up":this.yVelocityTarget=-this.maximumSpeed;break;case"down":this.yVelocityTarget=this.maximumSpeed;break;case"yRelease":this.yVelocityTarget=0;break;case"xRelease":this.xVelocityTarget=0}},t.prototype.changeHealth=function(e){this.changeExpression(1),e<0&&(0==this.powerUpActive?(this.mainScene.loseLife(),this.playerHit=!0,Game.playSound("snowball-wars/ice-impact.mp3"),this.hitFrames.gotoAndPlay(0),this.hitFrames.visible=!0,this.hitFrames.position.y=-50,this.hitFrames.position.x=20,0==Game.isLowEndIPad&&(this.playerHead.rotation-=.2,this.mainScene.shakeContainer()),this.playerContainer.position.x-=10):(this.playerHit=!0,this.shield.alpha=1,this.shield.tint=16736609,Game.playSound("snowball-wars/shield-hit.mp3",.8)))},t.prototype.handleCollision=function(e){switch(e){case"snowball":this.changeHealth(-1);break;case"ammo":this.collectAmmo(10);break;case"wall":this.xVelocity=0,this.yVelocity=0}},t.prototype.movePlayer=function(){if(1!=this.gameOverTriggered){var e=this.playerContainer.position.x,t=this.playerContainer.position.y,i=e+=this.xVelocity,s=t+=this.yVelocity;this.setPotentialBoundingBox(i,s);var o=this.mainScene.checkForCollisions("player",1,this.playerPotentialBoundingBox);1!=o.collisionResult?(this.playerContainer.position.x+=this.xVelocity,this.playerContainer.position.y+=this.yVelocity,this.gunBackPanelHolder.position.x=this.gunBack.position.x,this.gunBackPanelHolder.position.y=this.gunBack.position.y,this.gunBackPanelHolder.rotation=this.gunBack.rotation):this.handleCollision(o.collidedWith)}},t.prototype.setPotentialBoundingBox=function(e,t){this.playerPotentialBoundingBox.topX=e-25+10,this.playerPotentialBoundingBox.topY=t-17,this.playerPotentialBoundingBox.bottomX=e+25-20,this.playerPotentialBoundingBox.bottomY=t+3,this.playerPotentialBoundingBox.width=this.boundingBox.width,this.playerPotentialBoundingBox.height=this.boundingBox.height},t.prototype.fireSnowball=function(){if(!this.roundEndLock&&1!=this.gameOverTriggered&&this.shotAllowed)if(this.powerUpActive)this.mainScene.fireSnowBall("player",this.playerContainer.position.x+30,this.playerContainer.position.y),this.shotCoolDown=0,this.shotAllowed=!1,(t=[{id:"snowball-wars/power-pop-1.mp3"},{id:"snowball-wars/power-pop-2.mp3"}])[i=Game.getRandom(0,1,!0)]&&Game.playSound(t[i].id,t[i].vol||.3);else if(this.ammo>0){this.mainScene.fireSnowBall("player",this.playerContainer.position.x+45,this.playerContainer.position.y),this.ammo--;for(var e=0;e<this.backPanelArray.length;e++)if(this.backPanelArray[e].number==this.ammo?this.backPanelArray[e].panel.visible=!0:this.backPanelArray[e].panel.visible=!1,this.ammo>=10){this.backPanelArray[10].panel.visible=!0;break}0==Game.isLowEndIPad&&(this.snowGun.position.x-=15,this.powerUpGun.position.x-=15,this.fireGunSmoke(),this.gunBack.position.x-=3,this.gunBack.position.y+=2,this.gunBack.rotation=.1,this.lincBody.rotation=-.2,this.playerHead.rotation=-.05,this.lincGunArm.rotation=0,this.lincGunArm.position.x-=4),this.shotCoolDown=0,this.shotAllowed=!1,(t=[{id:"snowball-wars/snowball-pop-1.mp3"},{id:"snowball-wars/snowball-pop-2.mp3"},{id:"snowball-wars/snowball-pop-3.mp3"}])[i=Game.getRandom(0,2,!0)]&&Game.playSound(t[i].id,t[i].vol||.3)}else{this.shotAllowed=!1,Game.playSound("snowball-wars/click3.mp3");var t=[{id:"snowball-wars/linc-dang-it.mp3"}],i=Game.getRandom(0,4,!0);t[i]&&Game.playSound(t[i].id,t[i].vol||.5)}},t.prototype.collectAmmo=function(e){this.ammo+=e,this.mainScene.snowballCounterTarget+=10,this.mainScene.snowballAtTarget=!1,this.ammoAlertTimer=0,this.ammoAlertActive=!0,this.ammoAlert.position.y=this.playerContainer.position.y-2.1*this.playerHead.height,this.ammoAlert.position.x=this.playerContainer.position.x,this.ammoAlert.scale.x=this.ammoAlert.scale.y=0,Game.playSound("snowball-wars/pickup-tune.mp3",.5),this.ammoAlert.visible=!0,this.ammoAlert.alpha=1;for(var t=0;t<this.backPanelArray.length;t++)if(this.backPanelArray[t].number==this.ammo?this.backPanelArray[t].panel.visible=!0:this.backPanelArray[t].panel.visible=!1,this.ammo>=10){this.backPanelArray[10].panel.visible=!0;break}},t.prototype.placeFootMark=function(){if(this.footMarkTick++,++this.footsoundTick>10){this.footsoundTick=0;var e=[{id:"snowball-wars/step-1.mp3"},{id:"snowball-wars/step-2.mp3"},{id:"snowball-wars/step-3.mp3"}],t=Game.getRandom(0,2,!0);e[t]&&Game.playSound(e[t].id,e[t].vol||.3)}if(this.footMarkTick>10){this.footMarkTick=0;for(var i=0;i<this.footMarkArray.length;i++)if(0==this.footMarkArray[i].active){this.footMarkArray[i].sprite.visible=!0,this.footMarkArray[i].active=!0,this.footMarkArray[i].sprite.position.x=this.playerContainer.position.x,this.footMarkArray[i].sprite.position.y=this.playerContainer.position.y-10+Game.getRandom(-10,10),this.footMarkArray[i].sprite.alpha=1,this.footMarkArray[i].sprite.scale.x=this.footMarkArray[i].sprite.scale.y=2;break}}},t.prototype.tick=function(){if(1==this.ammoAlertActive&&(1==this.ammoAlert.alpha&&(this.ammoAlert.scale.x=this.ammoAlert.scale.y=this.mainScene.simpleEase(this.ammoAlert.scale.x,2.5,2)),(this.ammoAlert.scale.x>2.3||1!=this.ammoAlert.alpha)&&(this.ammoAlert.scale.x=this.ammoAlert.scale.y=this.mainScene.simpleEase(this.ammoAlert.scale.x,1,5),this.ammoAlert.position.y-=.8,this.ammoAlert.alpha=this.mainScene.simpleEase(this.ammoAlert.alpha,0,45)),this.ammoAlert.alpha<0&&(this.ammoAlertActive=!1)),0==Game.isLowEndIPad){for(var e=0;e<this.footMarkArray.length;e++)1==this.footMarkArray[e].active&&(this.footMarkArray[e].sprite.alpha-=.01,this.footMarkArray[e].sprite.alpha<=0&&(this.footMarkArray[e].active=!1));for(var t=0;t<this.gunSmokeParticle.length;t++)if(1==this.gunSmokeParticle[t].active){var i=this.gunSmokeParticle[t];i.sprite.position.x+=1+i.decay,i.sprite.alpha-=.04,i.sprite.scale.x+=.01,i.sprite.scale.y+=.02,i.sprite.rotation+=.01,i.decay>.1?i.decay-=.1:i.decay=.1,(i.sprite.scale.x<0||i.sprite.alpha<0)&&(i.active=!1)}++this.blinkTimer>=this.blinkTimerLimit&&(1==this.gameOverTriggered?(this.snowPileBlinkOpen.visible=!0,this.snowPileBlink.visible=!1):this.lincEyelids.visible=!0,this.blinkTimer>=this.blinkTimerLimit+15&&(this.blinkTimer=0,this.blinkTimerLimit=Game.getRandom(60,200),1==this.gameOverTriggered?(this.snowPileBlinkOpen.visible=!1,this.snowPileBlink.visible=!0):this.lincEyelids.visible=!1)),this.playerContainer.scale.y>.98&&(this.playerIdle=!1),this.playerContainer.scale.y<.95&&(this.playerIdle=!0),1==this.playerIdle&&(this.playerContainer.scale.y=this.mainScene.simpleEase(this.playerContainer.scale.y,1,30)),0==this.playerIdle&&(this.playerContainer.scale.y=this.mainScene.simpleEase(this.playerContainer.scale.y,.9,30)),(this.shotCoolDown>5||1==this.shotAllowed)&&(this.snowGun.position.x=this.mainScene.simpleEase(this.snowGun.position.x,-2,5),this.powerUpGun.position.x=this.mainScene.simpleEase(this.powerUpGun.position.x,-2,5),this.gunBack.position.x=this.mainScene.simpleEase(this.gunBack.position.x,-28,5),this.lincGunArm.position.x=this.mainScene.simpleEase(this.lincGunArm.position.x,-12,5),this.gunBack.position.y=this.mainScene.simpleEase(this.gunBack.position.y,-60,5),this.gunBack.rotation=this.mainScene.simpleEase(this.gunBack.rotation,0,5),this.lincBody.rotation=this.mainScene.simpleEase(this.lincBody.rotation,0,5),this.snowGun.rotation=this.mainScene.simpleEase(this.snowGun.rotation,0,5),this.powerUpGun.rotation=this.mainScene.simpleEase(this.powerUpGun.rotation,0,5),this.lincGunArm.rotation=this.mainScene.simpleEase(this.lincGunArm.rotation,-.2,5),this.playerHead.rotation=this.mainScene.simpleEase(this.playerHead.rotation,0,5)),this.shotCoolDown<5&&0==this.shotAllowed&&(this.snowGun.rotation=this.mainScene.simpleEase(this.snowGun.rotation,-.3,5),this.powerUpGun.rotation=this.mainScene.simpleEase(this.powerUpGun.rotation,-.3,5)),(Math.abs(this.xVelocity)>1||Math.abs(this.yVelocity)>1)&&(this.playerHead.position.y>-29&&(this.runningBounceDown=!1),this.playerHead.position.y<-32&&(this.runningBounceDown=!0),1==this.runningBounceDown&&(this.playerHead.position.y=this.mainScene.simpleEase(this.playerHead.position.y,-28,10),this.lincGunArm.position.y=this.mainScene.simpleEase(this.lincGunArm.position.y,-84,10),this.snowGun.position.y=this.mainScene.simpleEase(this.snowGun.position.y,-85,10),this.powerUpGun.position.y=this.mainScene.simpleEase(this.powerUpGun.position.y,-85,10),this.gunBack.position.y=this.mainScene.simpleEase(this.gunBack.position.y,-63,10),this.lincShadow.scale.x=this.mainScene.simpleEase(this.lincShadow.scale.x,1.1,15),this.playerHead.rotation=this.mainScene.simpleEase(this.playerHead.rotation,-.05,30),this.lincHair.rotation=this.mainScene.simpleEase(this.lincHair.rotation,.5,30),this.lincHair.position.y=this.mainScene.simpleEase(this.lincHair.position.y,-10,10),this.snowGun.rotation=this.mainScene.simpleEase(this.snowGun.rotation,-.08,5),this.powerUpGun.rotation=this.mainScene.simpleEase(this.powerUpGun.rotation,-.08,5),this.lincGunArm.rotation=this.mainScene.simpleEase(this.lincGunArm.rotation,-.08,5),this.gunBack.rotation=this.mainScene.simpleEase(this.gunBack.rotation,.08,5),this.lincBody.rotation=this.mainScene.simpleEase(this.lincBody.rotation,-.1,30)),0==this.runningBounceDown&&(this.playerHead.position.y=this.mainScene.simpleEase(this.playerHead.position.y,-35,10),this.lincGunArm.position.y=this.mainScene.simpleEase(this.lincGunArm.position.y,-83,10),this.snowGun.position.y=this.mainScene.simpleEase(this.snowGun.position.y,-84,10),this.powerUpGun.position.y=this.mainScene.simpleEase(this.powerUpGun.position.y,-84,10),this.gunBack.position.y=this.mainScene.simpleEase(this.gunBack.position.y,-60,10),this.gunBack.rotation=this.mainScene.simpleEase(this.gunBack.rotation,-.08,5),this.lincBody.rotation=this.mainScene.simpleEase(this.lincBody.rotation,.1,30),this.lincShadow.scale.x=this.mainScene.simpleEase(this.lincShadow.scale.x,.9,15),this.playerHead.rotation=this.mainScene.simpleEase(this.playerHead.rotation,.05,30),this.lincHair.rotation=this.mainScene.simpleEase(this.lincHair.rotation,-.4,30),this.lincHair.position.y=this.mainScene.simpleEase(this.lincHair.position.y,-13,10),this.snowGun.rotation=this.mainScene.simpleEase(this.snowGun.rotation,.08,5),this.powerUpGun.rotation=this.mainScene.simpleEase(this.powerUpGun.rotation,.08,5),this.lincGunArm.rotation=this.mainScene.simpleEase(this.lincGunArm.rotation,.08,5))),(Math.abs(this.yVelocity)>.5||Math.abs(this.xVelocity)>.5)&&this.placeFootMark()}if(Math.abs(this.xVelocity)>1||Math.abs(this.yVelocity)>1?0==this.gameOverTriggered&&(this.idleBackLeg.visible=!1,this.idleFrontLeg.visible=!1,this.runningLegs.visible=!0):0==this.gameOverTriggered&&(this.idleBackLeg.visible=!0,this.idleFrontLeg.visible=!0,this.runningLegs.visible=!1),1==this.expressionTimerActive&&++this.expressionTimer>120&&(this.expressionTimerActive=!1,0==this.gameOverTriggered&&this.changeExpression(0),this.expressionTimer=0),1==this.roundEndLock)return this.runningLegs.visible=!1,this.idleBackLeg.visible=!0,this.idleFrontLeg.visible=!0,this.xVelocity=0,this.yVelocity=0,this.playerContainer.position.x=this.mainScene.simpleEase(this.playerContainer.position.x,this.arenaManager.arenaBounds.playArenaMaxX/2-400,30),this.playerContainer.position.y=this.mainScene.simpleEase(this.playerContainer.position.y,this.arenaManager.arenaBounds.playArenaMinY+300,30),this.shield.position.x=this.runningLegs.position.x,void(this.shield.position.y=this.runningLegs.position.y+30);this.powerUpActive?(this.shield.position.x=this.runningLegs.position.x,this.shield.position.y=this.runningLegs.position.y+30,this.shotCoolDownLimit=5,this.shield.alpha-=.1,this.shield.alpha<.4&&(this.shield.alpha=Game.getRandom(.5,.9))):this.shotCoolDownLimit=20,1==this.fireHeld&&this.fireSnowball(),0==this.shotAllowed&&++this.shotCoolDown>=this.shotCoolDownLimit&&(this.shotCoolDown=0,this.shotAllowed=!0),this.xVelocity=this.mainScene.simpleEase(this.xVelocity,this.xVelocityTarget,15),this.yVelocity=this.mainScene.simpleEase(this.yVelocity,this.yVelocityTarget,15),this.movePlayer(),1==this.playerHit&&++this.playerHitTimer>this.playerHitLimit&&(this.playerHitTimer=0,this.playerHit=!1,this.shield.tint=16777215)},t.prototype.pause=function(){this.runningLegs.stop()},t.prototype.resume=function(){this.runningLegs.play()},t.prototype.destroy=function(){if(0==Game.isLowEndIPad){for(t=0;t<this.footMarkArray.length;t++)Game.displayStore.returnPooledItem(this.footMarkArray[t].sprite);for(var e=0;e<this.gunSmokeParticle.length;e++)Game.displayStore.returnPooledItem(this.gunSmokeParticle[e].sprite)}for(var t=0;t<this.backPanelArray.length;t++)Game.displayStore.returnPooledItem(this.backPanelArray[t].panel);this.playerContainer.removeAllChildren(),this.playerHolder.removeAllChildren(),Game.displayStore.returnPooledItem(this.icedFrames),Game.displayStore.returnPooledItem(this.hitFrames),Game.displayStore.returnPooledItem(this.snowPile),Game.displayStore.returnPooledItem(this.snowPileBlink),Game.displayStore.returnPooledItem(this.snowPileBlinkOpen),Game.displayStore.returnPooledItem(this.icedFrames),Game.displayStore.returnPooledItem(this.hitFrames)},t}(SnowballWarsCharacterBase),SnowballWarsWallManager=function(){function e(e,t){this.scene=e,this.wallArray=new Array,this.fullWallHealth=10,this.wallPhysWidth=30,this.wallPhysDepth=30,this.arenaManager=t;for(var i=0,s=0;s<20;s++)this.wallArray.push({active:!1,xPos:0,yPos:0,health:3,side:"player",sprite:Game.displayStore.getSprite("snowball-wars/wall"),boundingBoxSprite:Game.displayStore.getSprite("snowball-wars/bounding-box"),boundingBox:{topX:0,topY:0,bottomX:0,bottomY:0},chunkNumber:0,wallID:i,slotID:0}),this.wallArray[s].sprite.visible=!1,this.scene.mainDisplayOrder.push({objectType:"wall",object:this.wallArray[s].sprite,objectID:this.wallArray[s].wallID,yPosition:this.wallArray[s].yPos}),i++}return e.prototype.getYPosition=function(e){for(var t=0;t<this.wallArray.length;t++)if(e==this.wallArray[t].wallID)return this.wallArray[t].yPos},e.prototype.spawnWalls=function(e,t){for(var i=0,s=0,o=0;o<this.wallArray.length;o++){r=this.wallArray[o];if(i==e)break;if(0!=r.active);else{n=this.arenaManager.getAvailablePosition("player");r.active=!0,r.xPos=n.posX,r.yPos=n.posY+this.wallPhysDepth/2,r.sprite.visible=!0,r.sprite.scale.x=1,r.side="player",r.health=this.fullWallHealth,r.sprite.position.x=r.xPos,r.sprite.position.y=r.yPos,this.scene.mainContainer.addChild(r.sprite),this.scene.mainContainer.addChild(r.boundingBoxSprite),r.slotID=n.id,r.boundingBox.topX=r.xPos-this.wallPhysWidth,r.boundingBox.topY=r.yPos-this.wallPhysDepth,r.boundingBox.bottomX=r.xPos,r.boundingBox.bottomY=r.yPos,r.boundingBoxSprite.width=r.boundingBox.bottomX-r.boundingBox.topX,r.boundingBoxSprite.height=Math.abs(r.boundingBox.topY-r.boundingBox.bottomY),r.boundingBoxSprite.position.x=r.boundingBox.topX,r.boundingBoxSprite.position.y=r.boundingBox.topY,i++,r.chunkNumber=this.scene.getArenaChunkNumber(r.boundingBox.topX,r.boundingBox.topY)}}for(var a=0;a<this.wallArray.length;a++){var r=this.wallArray[a];if(s==t)break;if(0!=r.active);else{var n=this.arenaManager.getAvailablePosition("enemy");r.active=!0,r.xPos=n.posX,r.yPos=n.posY+this.wallPhysDepth/2,r.sprite.visible=!0,r.health=this.fullWallHealth,r.sprite.scale.x=-1,r.side="enemy",r.sprite.position.x=r.xPos,r.sprite.position.y=r.yPos,r.slotID=n.id,s++,this.scene.mainContainer.addChild(r.sprite),this.scene.mainContainer.addChild(r.boundingBoxSprite),r.boundingBox.topX=r.xPos,r.boundingBox.topY=r.yPos-this.wallPhysDepth,r.boundingBox.bottomX=r.xPos+this.wallPhysWidth,r.boundingBox.bottomY=r.yPos,r.boundingBoxSprite.width=r.boundingBox.bottomX-r.boundingBox.topX,r.boundingBoxSprite.height=Math.abs(r.boundingBox.topY-r.boundingBox.bottomY),r.boundingBoxSprite.position.x=r.boundingBox.topX,r.boundingBoxSprite.position.y=r.boundingBox.topY,r.chunkNumber=this.scene.getArenaChunkNumber(r.boundingBox.topX,r.boundingBox.topY)}}},e.prototype.checkWallCollision=function(e,t,i){for(var s={collisionResult:!1,collidedWith:"none"},o=0;o<this.wallArray.length;o++){var a=this.wallArray[o];1==a.active&&t==a.chunkNumber&&i.topX<a.boundingBox.topX+this.wallPhysWidth&&i.topX+i.width>a.boundingBox.topX&&i.topY<a.boundingBox.topY+this.wallPhysDepth&&i.topY+i.height>a.boundingBox.topY&&(s={collisionResult:!0,collidedWith:"wall"},"snowball"==e&&a.health<=0&&this.demolishWall(o))}return s},e.prototype.demolishWall=function(e){var t=this.wallArray[e];t.active=!1,t.sprite.visible=!1,t.boundingBoxSprite.visible=!1,this.arenaManager.makeSlotAvailable(t.side,t.slotID)},e.prototype.tick=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){for(var e=0;e<this.wallArray.length;e++)Game.displayStore.returnPooledItem(this.wallArray[e].sprite),Game.displayStore.returnPooledItem(this.wallArray[e].boundingBoxSprite)},e}(),SnowballWarsAmmoManager=function(){function e(e,t){this.scene=e,this.ammoArray=new Array,this.ammoPhysWidth=100,this.ammoPhysDepth=30,this.playerAmmo=0,this.enemyAmmo=0,this.arenaManager=t,this.ammoMultiplyer=1,this.playerAmmoSpawnDelay=240,this.enemyAmmoSpawnDelay=240,this.playerAmmoSpawnCounter=0,this.enemyAmmoSpawnCounter=0;for(var i=0,s=0;s<=1;s++)console.log("making ammo!"),this.ammoArray.push({active:!1,xPos:0,yPos:0,side:"player",boundingBoxSprite:Game.displayStore.getSprite("snowball-wars/bounding-box"),boundingBox:{topX:0,topY:0,bottomX:0,bottomY:0},chunkNumber:0,ammoID:i,slotID:0,ammoStack:new SnowballWarsAmmoStack(this.scene,i)}),i++}return e.prototype.getRoundSettings=function(e){switch(e){case 1:this.ammoMultiplyer=1;break;case 2:this.ammoMultiplyer=1.1;break;case 3:this.ammoMultiplyer=1.3;break;case 4:this.ammoMultiplyer=1.5;break;case 5:this.ammoMultiplyer=1.7}},e.prototype.getStackYPos=function(e){return this.ammoArray[e].yPos},e.prototype.newRoundCall=function(){this.getRoundSettings(this.scene.difficultyCounter)},e.prototype.getYPosition=function(e){return this.ammoArray[e].yPos},e.prototype.getAmmoPosition=function(){for(var e={available:!1,posX:0,posY:0},t=0;t<this.ammoArray.length;t++)if(1==this.ammoArray[t].active&&this.ammoArray[t].xPos>this.scene.arenaBounds.playArenaMaxX/2)return e={available:!0,posX:this.ammoArray[t].xPos,posY:this.ammoArray[t].yPos};return e},e.prototype.getPlayerAmmoPosition=function(){for(var e={available:!1,posX:0,posY:0},t=0;t<this.ammoArray.length;t++)if(1==this.ammoArray[t].active&&this.ammoArray[t].xPos<this.scene.arenaBounds.playArenaMaxX/2)return e={available:!0,posX:this.ammoArray[t].xPos,posY:this.ammoArray[t].yPos};return e},e.prototype.spawnAmmo=function(e){for(var t=0;t<this.ammoArray.length;t++){var i=this.ammoArray[t];if(0==i.active&&0==i.ammoStack.pileActive){if("left"==e){s=this.arenaManager.getAvailablePosition("player");i.xPos=s.posX-50,i.yPos=s.posY+Game.getRandom(-5,5),i.slotID=s.id,this.playerAmmoSpawnCounter=0,i.side="player",i.ammoStack.spawnPile(i.xPos,i.yPos)}if("right"==e){var s=this.arenaManager.getAvailablePosition("enemy");i.xPos=s.posX+50,i.yPos=s.posY+20,i.slotID=s.id,i.side="enemy",this.enemyAmmoSpawnCounter=0,i.ammoStack.spawnPile(i.xPos,i.yPos)}i.active=!0,i.boundingBox.topX=i.xPos+20-this.ammoPhysWidth,i.boundingBox.topY=i.yPos-this.ammoPhysDepth,i.boundingBox.bottomX=i.xPos,i.boundingBox.bottomY=i.yPos,i.boundingBoxSprite.width=i.boundingBox.bottomX-i.boundingBox.topX,i.boundingBoxSprite.height=Math.abs(i.boundingBox.topY-i.boundingBox.bottomY),i.boundingBoxSprite.position.x=i.boundingBox.topX,i.boundingBoxSprite.position.y=i.boundingBox.topY,i.chunkNumber=this.scene.getArenaChunkNumber(i.boundingBox.topX,i.boundingBox.topY);break}}},e.prototype.checkAmmoCollision=function(e,t,i,s){var o={collisionResult:!1,collidedWith:"none"};if("player"==e&&this.playerAmmo<1)return o;if("enemy"==e&&this.enemyAmmo<1)return o;for(var a=0;a<this.ammoArray.length;a++){var r=this.ammoArray[a];if(1==r.active&&i==r.chunkNumber&&s.topX<r.boundingBox.topX+this.ammoPhysWidth&&s.topX+s.width>r.boundingBox.topX&&s.topY<r.boundingBox.topY+this.ammoPhysDepth&&s.topY+s.height>r.boundingBox.topY&&(o={collisionResult:!0,collidedWith:"ammo"},"player"==e||"enemy"==e)){r.active=!1,r.ammoStack.available=!1,r.ammoStack.collected=!0,r.boundingBoxSprite.visible=!1,r.ammoStack.collector=e,r.ammoStack.collectorID=t;for(var n=0;n<r.ammoStack.ballArray.length;n++)r.ammoStack.ballArray[n].counter=0;switch(e){case"player":this.playerAmmo--;break;case"enemy":this.enemyAmmo--}this.arenaManager.makeSlotAvailable(e,r.slotID)}}return o},e.prototype.tick=function(){for(var e=0;e<this.ammoArray.length;e++)1==this.ammoArray[e].ammoStack.pileActive&&this.ammoArray[e].ammoStack.tick();this.playerAmmo<=0&&++this.playerAmmoSpawnCounter>this.playerAmmoSpawnDelay*this.ammoMultiplyer&&(this.playerAmmo++,this.playerAmmoSpawnCounter=0,this.spawnAmmo("left")),this.enemyAmmo<=0&&++this.enemyAmmoSpawnCounter>this.enemyAmmoSpawnDelay&&(this.spawnAmmo("right"),this.enemyAmmo++,this.enemyAmmoSpawnCounter=0)},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){for(var e=0;e<this.ammoArray.length;e++)Game.displayStore.returnPooledItem(this.ammoArray[e].boundingBoxSprite),this.ammoArray[e].ammoStack.destroy()},e}(),SnowballWarsAmmoStack=function(){function e(e,t){this.scene=e,this.ballArray=new Array,this.pileActive=!1,this.collected=!1,this.available=!1,this.maximumSpeed=10,this.stackContainer=Game.displayStore.getContainer("snowball-wars/snowball-ammo-pickup-container"),this.stackID=t,this.sineY=0,this.sineCounter=0;for(var t=0,i=0;i<5;i++)this.ballArray.push({active:!1,xpos:Game.getRandom(-40,40),ypos:3*i,ballSprite:Game.displayStore.getSprite("snowball-wars/snowball-pickup"),shadowSprite:Game.displayStore.getSprite("snowball-wars/snowball-shadow"),delay:Game.getRandom(0,20),counter:0,targetY:Game.getRandom(-30,0),targetScale:Game.getRandom(1.5,1.8),xVelocity:0,yVelocity:0,hoverY:0,spawnY:0,rate:Game.getRandom(.3,.6),ballSpeed:0,ballTargetSpeed:.3,ballTargetAlpha:1,ballAlpha:1}),this.ballArray[i].ballSprite.visible=!1,this.ballArray[i].shadowSprite.visible=!1,this.ballArray[i].ballSprite.alpha=0,this.ballArray[i].ballSprite.scale.x=this.ballArray[i].ballSprite.scale.y=0,this.ballArray[i].shadowSprite.alpha=0,this.scene.floorLayer.addChild(this.ballArray[i].shadowSprite),this.stackContainer.addChild(this.ballArray[i].ballSprite);this.scene.orderingContainer.addChild(this.stackContainer),this.scene.mainDisplayOrder.push({objectType:"ammo-stack",object:this.stackContainer,objectID:this.stackID,yPosition:this.stackContainer.position.y}),console.log("pushed to main display order"),console.log(this.scene.mainDisplayOrder)}return e.prototype.getYPosition=function(){return this.stackContainer.position.y},e.prototype.spawnPile=function(e,t){this.pileActive=!0,this.collected=!1,this.available=!0,this.xPosition=e,this.yPosition=t,this.maximumSpeed=10,this.stackContainer.position.x=this.xPosition,this.stackContainer.position.y=this.yPosition;for(var i=0;i<this.ballArray.length;i++){var s=this.ballArray[i];s.active=!0,s.xVelocity=0,s.yVelocity=0,s.ballSprite.scale.x=s.ballSprite.scale.y=0,s.ballSprite.visible=!0,s.shadowSprite.visible=!0,s.counter=0,s.shadowSprite.position.x=this.xPosition+s.xpos,s.shadowSprite.position.y=this.yPosition+s.ypos,s.ballSprite.position.y=s.ypos,s.ballSprite.position.x=s.xpos,s.targetY=Game.getRandom(20,45),s.spawnY=s.ballSprite.position.y-10,s.shadowSprite.alpha=.2,s.hoverY=s.ballSprite.position.y}},e.prototype.tick=function(){if(1==this.available)for(a=0;a<this.ballArray.length;a++)1==(r=this.ballArray[a]).active&&(0==Game.isLowEndIPad&&(r.ballSprite.position.y<=r.spawnY-r.targetY&&(r.ballTargetSpeed=2.5,r.hoverY=r.spawnY),r.ballSprite.position.y>=r.spawnY&&(r.ballTargetSpeed=-2.5,r.hoverY=r.spawnY-r.targetY),r.ballSpeed+=(r.ballTargetSpeed-r.ballSpeed)/40,r.ballSprite.position.y+=r.ballSpeed),r.counter++,r.counter>=r.delay&&(r.ballSprite.alpha=1,r.shadowSprite.alpha=this.scene.simpleEase(r.shadowSprite.alpha,.2,5),r.ballSprite.scale.x=r.ballSprite.scale.y=this.scene.simpleEase(r.ballSprite.scale.x,r.targetScale,5)));if(1==this.collected&&0==this.available){if("player"==this.collector)var e=this.scene.getPlayerPosition(),t=-this.stackContainer.position.x+(e.x-20),i=-this.stackContainer.position.y+(e.y-65);else var s=this.scene.getEnemyPosition(this.collectorID),t=-this.stackContainer.position.x+(s.x+20),i=-this.stackContainer.position.y+(s.y-60);for(var o=!0,a=0;a<this.ballArray.length;a++){var r=this.ballArray[a];if(r.counter++,r.counter>r.delay&&(r.ballSprite.position.x<t?r.xVelocity=this.scene.simpleEase(r.xVelocity,this.maximumSpeed,8):r.xVelocity=this.scene.simpleEase(r.xVelocity,-this.maximumSpeed,8),r.ballSprite.position.y<i?r.yVelocity=this.scene.simpleEase(r.yVelocity,2*this.maximumSpeed,8):r.yVelocity=this.scene.simpleEase(r.yVelocity,2*-this.maximumSpeed,8),Math.abs(t-r.ballSprite.position.x)<20&&Math.abs(i-r.ballSprite.position.y)<20&&1==r.active?(r.ballSprite.scale.x=r.ballSprite.scale.y-=.3,this.maximumSpeed=8):this.maximumSpeed=10,r.ballSprite.position.x+=r.xVelocity,r.ballSprite.position.y+=r.yVelocity,r.shadowSprite.position.x=this.scene.simpleEase(r.shadowSprite.position.x,this.stackContainer.position.x+r.ballSprite.position.x,5),r.shadowSprite.position.y=this.scene.simpleEase(r.shadowSprite.position.y,this.stackContainer.position.y+r.ballSprite.position.y+50,5)),r.ballSprite.scale.x<1&&r.ballSprite.scale.x>=0&&1==r.active){r.ballSprite.visible=!1,r.ballSprite.scale.x=r.ballSprite.scale.y=0,r.active=!1;var n=[{id:"snowball-wars/pop-1.mp3"},{id:"snowball-wars/pop-2.mp3"},{id:"snowball-wars/pop-3.mp3"}],h=Game.getRandom(0,2,!0);n[h]&&Game.playSound(n[h].id,n[h].vol||.5),r.shadowSprite.alpha=0}else 1==r.active&&(o=!1)}1==o&&(this.collected=!1,this.available=!1,this.pileActive=!1)}},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){for(var e=0;e<this.ballArray.length;e++)Game.displayStore.returnPooledItem(this.ballArray[e].ballSprite),Game.displayStore.returnPooledItem(this.ballArray[e].shadowSprite);Game.displayStore.returnPooledItem(this.stackContainer)},e}(),SnowballWarsRoundManager=function(){function e(e,t){this.scene=e,this.arenaManager=t,this.currentRound=1,this.difficulty=1,this.activeSisters=this.scene.getRoundSisters(),this.soundActive=!1,this.activateHeads=!1,this.headDelay=0,this.vsText=Game.displayStore.getBitmapText("snowball-wars/vs-text"),this.roundSign=Game.displayStore.getSprite("snowball-wars/round-sign"),this.lincHead=Game.displayStore.getSprite("snowball-wars/linc-head"),this.lincHead.position.x=-180,this.lincHead.position.y=-80,this.roundSign.position.y=-200,this.roundSignContainer=Game.displayStore.getContainer("snowball-wars/round-sign-container"),this.vsText.text="VS",this.roundSignContainer.addChild(this.roundSign),this.roundSignContainer.addChild(this.lincHead),this.roundSignContainer.addChild(this.vsText),this.roundHeads=new Array,this.positionText(),this.scene.container.addChild(this.roundSignContainer),this.sisterHeads=new Array,this.sisterHeads.push({active:!1,head:Game.displayStore.getSprite("snowball-wars/lori-head"),name:"lori"}),this.sisterHeads.push({active:!1,head:Game.displayStore.getSprite("snowball-wars/leni-head"),name:"leni"}),this.sisterHeads.push({active:!1,head:Game.displayStore.getSprite("snowball-wars/luna-head"),name:"luna"}),this.sisterHeads.push({active:!1,head:Game.displayStore.getSprite("snowball-wars/luan-head"),name:"luan"}),this.sisterHeads.push({active:!1,head:Game.displayStore.getSprite("snowball-wars/lynn-head"),name:"lynn"}),this.sisterHeads.push({active:!1,head:Game.displayStore.getSprite("snowball-wars/lucy-head"),name:"lucy"}),this.sisterHeads.push({active:!1,head:Game.displayStore.getSprite("snowball-wars/lana-head"),name:"lana"}),this.sisterHeads.push({active:!1,head:Game.displayStore.getSprite("snowball-wars/lola-head"),name:"lola"}),this.sisterHeads.push({active:!1,head:Game.displayStore.getSprite("snowball-wars/lisa-head"),name:"lisa"});for(var i=0;i<this.sisterHeads.length;i++)this.roundSignContainer.addChild(this.sisterHeads[i].head),this.sisterHeads[i].head.visible=!1}return e.prototype.updateRoundStart=function(){this.updateRounds()},e.prototype.positionText=function(){this.roundSign.scale.x=1.3,this.vsText.position.y=-130,this.vsText.scale.x=this.vsText.scale.y=1,this.vsText.position.x=-this.vsText.width,this.roundSignContainer.position.x=Game.stageWidth/2,this.roundSignContainer.position.y=-300,this.roundSignContainer.scale.x=this.roundSignContainer.scale.y=.8},e.prototype.newRound=function(){this.currentRound++,this.positionText(),this.scene.endRound(),this.currentRound<=3?this.difficulty=1:this.currentRound>3&&this.currentRound<=6?this.difficulty=2:this.currentRound>6&&this.currentRound<=10?this.difficulty=3:this.currentRound>10&&this.currentRound<=15?this.difficulty=4:this.currentRound>15&&(this.difficulty=5),this.scene.setGameCamera(!0),this.updateRounds(),console.log("ROUND: ",this.currentRound),console.log("DIFFICULTY: ",this.difficulty)},e.prototype.updateRounds=function(){this.scene.setRoundDifficulty(this.currentRound,this.difficulty),this.scene.removeOldSisters(),this.scene.markNewSisters(),this.activeSisters=[],this.activeSisters=this.scene.getRoundSisters(),console.log("sisters",this.activeSisters),this.setSignHeads(),this.animateSign()},e.prototype.setSignHeads=function(){this.roundHeads=[];for(t=0;t<this.sisterHeads.length;t++)this.roundHeads.pop(),this.sisterHeads[t].active=!1,this.sisterHeads[t].head.visible=!1;for(var e=0;e<this.activeSisters.length;e++)for(var t=0;t<this.sisterHeads.length;t++)this.activeSisters[e].name==this.sisterHeads[t].name&&(this.sisterHeads[t].active=!0,this.sisterHeads[t].head.visible=!1,this.roundHeads.push({head:this.sisterHeads[t].head,name:this.sisterHeads[t].name,placed:!1}));switch(this.activeSisters.length){case 1:this.roundHeads[0].head.position.x=180,this.roundHeads[0].head.position.y=-80;break;case 2:this.roundHeads[0].head.position.x=115,this.roundHeads[0].head.position.y=-80,this.roundHeads[1].head.position.x=245,this.roundHeads[1].head.position.y=-80;break;case 3:this.roundHeads[0].head.position.x=115,this.roundHeads[0].head.position.y=-125,this.roundHeads[1].head.position.x=175,this.roundHeads[1].head.position.y=-25,this.roundHeads[2].head.position.x=245,this.roundHeads[2].head.position.y=-125;break;case 4:this.roundHeads[0].head.position.x=115,this.roundHeads[0].head.position.y=-125,this.roundHeads[1].head.position.x=115,this.roundHeads[1].head.position.y=-25,this.roundHeads[2].head.position.x=245,this.roundHeads[2].head.position.y=-125,this.roundHeads[3].head.position.x=245,this.roundHeads[3].head.position.y=-25;break;case 5:this.roundHeads[0].head.position.x=75,this.roundHeads[0].head.position.y=-125,this.roundHeads[1].head.position.x=75,this.roundHeads[1].head.position.y=-25,this.roundHeads[2].head.position.x=285,this.roundHeads[2].head.position.y=-125,this.roundHeads[3].head.position.x=285,this.roundHeads[3].head.position.y=-25,this.roundHeads[4].head.position.x=180,this.roundHeads[4].head.position.y=-75;break;case 6:this.roundHeads[0].head.position.x=105,this.roundHeads[0].head.position.y=-125,this.roundHeads[1].head.position.x=105,this.roundHeads[1].head.position.y=-25,this.roundHeads[2].head.position.x=255,this.roundHeads[2].head.position.y=-125,this.roundHeads[3].head.position.x=255,this.roundHeads[3].head.position.y=-25,this.roundHeads[4].head.position.x=175,this.roundHeads[4].head.position.y=-75}},e.prototype.animateSign=function(){this.signTimeline&&(this.signTimeline=this.scene.killTween(this.signTimeline)),this.signTimeline=new TimelineMax,this.signTimeline.add([TweenMax.to(this.roundSignContainer,1,{ease:Elastic.easeOut.config(1,.75),y:230}),TweenMax.to(this.roundSignContainer,1,{delay:1.5,ease:Elastic.easeOut.config(1,.75),y:-30})],2),this.signTimeline.call(function(){if(0==this.soundActive){this.soundActive=!0;var e=[{id:"snowball-wars/"+this.activeSisters[Game.getRandom(0,this.activeSisters.length-1,!0)].name+"-intro.mp3"}];e[0]&&Game.playSound(e[0].id,e[0].vol||.5);var t=[{id:"game-over/swish-long-1.mp3"},{id:"game-over/swish-long-2.mp3"},{id:"game-over/swish-long-3.mp3"}],i=Game.getRandom(0,2,!0);t[i]&&Game.playSound(t[i].id,t[i].vol||.8)}},null,this,2),this.signTimeline.call(function(){this.activateHeads=!0,this.headDelay=0,Game.playSound("game-over/swish-long-2.mp3",.5)},null,this,2.5),this.signTimeline.call(function(){this.scene.setGameCamera(!1),this.scene.spawnNewSisters()},null,this,3.5),this.signTimeline.call(function(){this.scene.roundUnlock();for(var e=0;e<this.sisterHeads.length;e++);this.soundActive=!1,this.activateHeads=!1},null,this,5)},e.prototype.animateHeads=function(){for(var e=0;e<this.roundHeads.length;e++)if(this.headDelay>10*e)for(var t=0;t<this.sisterHeads.length;t++)1==this.sisterHeads[t].active&&this.sisterHeads[t].name==this.roundHeads[e].name&&(0==this.sisterHeads[t].head.visible&&(this.sisterHeads[t].head.visible=!0,this.sisterHeads[t].head.scale.x=2,this.sisterHeads[t].head.scale.y=2,this.sisterHeads[t].head.rotation=Game.getRandom(-.3,.3)),this.sisterHeads[t].head.scale.x=this.sisterHeads[t].head.scale.y=this.scene.simpleEase(this.sisterHeads[t].head.scale.x,1,3),this.sisterHeads[t].head.rotation=this.scene.simpleEase(this.sisterHeads[t].head.rotation,0,10),this.sisterHeads[t].head.scale.x<1.1&&(0==this.roundHeads[e].placed&&Game.playSound("enjoy-the-ride-thud.mp3",.5),this.roundHeads[e].placed=!0))},e.prototype.tick=function(){1==this.activateHeads&&(this.animateHeads(),this.headDelay++)},e.prototype.pause=function(){this.scene.pauseResumeTween(this.signTimeline,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.signTimeline,"resume")},e.prototype.destroy=function(){this.signTimeline=this.scene.killTween(this.signTimeline)},e}(),SnowballWarsMortarManager=function(){function e(e){this.scene=e,this.mortarArray=new Array,this.snowballSpeed=10,this.mortarCounter=0,this.mortarCounterLimit=300,this.roundDelayCounter=60,this.anyMortarsActive=0,this.mortarParticles=new Array;for(var t=0,i=0;i<50;i++)this.mortarParticles.push({active:!1,yVelocity:0,xVelocity:0,ySpawn:0,sprite:Game.displayStore.getSprite("snowball-wars/mortar-particle"),particleNumber:t}),this.mortarParticles[i].sprite.visible=!1,0==Game.isLowEndIPad?(this.scene.orderingContainer.addChild(this.mortarParticles[i].sprite),this.scene.mainDisplayOrder.push({objectType:"mortar-particle",object:this.mortarParticles[i].sprite,objectID:t,yPosition:this.mortarParticles[i].sprite.position.y})):this.scene.mainContainer.addChild(this.mortarParticles[i].sprite),t++;for(var s=0,i=0;i<6;i++)this.mortarArray.push({active:!1,xPos:0,yPos:0,delay:0,shadow:Game.displayStore.getSprite("snowball-wars/floor-shadow-mortar"),target:Game.displayStore.getSprite("snowball-wars/floor-target"),snowball:Game.displayStore.getSprite("snowball-wars/mortar"),crater:Game.displayStore.getSprite("snowball-wars/crater"),fired:!1,hatchID:0,mortarNumber:s,ripple:Game.displayStore.getSprite("snowball-wars/ripple")}),this.mortarArray[i].shadow.scale.x=this.mortarArray[i].shadow.scale.y=.5,this.mortarArray[i].target.scale.x=this.mortarArray[i].target.scale.y=.5,this.mortarArray[i].shadow.visible=!1,this.mortarArray[i].target.visible=!1,this.mortarArray[i].snowball.visible=!1,this.scene.orderingContainer.addChild(this.mortarArray[i].snowball),this.scene.mainDisplayOrder.push({objectType:"mortar-ball",object:this.mortarArray[i].snowball,objectID:s,yPosition:this.mortarArray[i].snowball.position.y}),s++}return e.prototype.getMortarYPos=function(e){for(var t=0;t<this.mortarArray.length;t++)if(e==this.mortarArray[t].mortarNumber)return this.scene.getPlayerPosition().y<this.mortarArray[t].target.position.y?this.mortarArray[t].snowball.position.y+160:this.mortarArray[t].snowball.position.y},e.prototype.getParticleYPos=function(e){for(var t=0;t<this.mortarParticles.length;t++)if(e==this.mortarParticles[t].particleNumber)return this.scene.getPlayerPosition().y<this.mortarParticles[t].ySpawn?this.mortarParticles[t].sprite.position.y+160:this.mortarParticles[t].sprite.position.y},e.prototype.fireMortarParticles=function(e,t){if(this.scene.shakeContainer(),1==Game.isLowEndIPad)i=5;else var i=30;for(var s=0;s<i;s++)for(var o=0;o<this.mortarParticles.length;o++)if(0==this.mortarParticles[o].active){this.mortarParticles[o].active=!0,this.mortarParticles[o].xVelocity=Game.getRandom(-3,3),this.mortarParticles[o].yVelocity=Game.getRandom(-9,-12),this.mortarParticles[o].sprite.position.x=e+Game.getRandom(-10,10),this.mortarParticles[o].sprite.position.y=t+Game.getRandom(-40,20),this.mortarParticles[o].ySpawn=this.mortarParticles[o].sprite.position.y,this.mortarParticles[o].sprite.visible=!0,this.mortarParticles[o].sprite.scale.x=this.mortarParticles[o].sprite.scale.y=Game.getRandom(.8,1.8,!0),this.mortarParticles[o].sprite.alpha=1,this.mortarParticles[o].sprite.visible=!0;break}},e.prototype.resetRound=function(){this.mortarsThisRound=0,this.mortarRoundLimit=10},e.prototype.spawnMortar=function(e){this.anyMortarsActive++;for(var t=this.scene.getPlayerPosition(),i=0;i<this.mortarArray.length;i++){var s=this.mortarArray[i];if(0==s.active){s.hatchID=e,s.target.visible=!0,s.target.alpha=1,s.shadow.visible=!0,s.snowball.visible=!0,s.fired=!1,s.active=!0,s.xPos=t.x,s.yPos=t.y,s.snowball.position.x=s.xPos+70,s.target.position.x=s.xPos,s.shadow.position.x=s.xPos,s.target.position.y=s.yPos,s.shadow.position.y=s.yPos,s.snowball.position.y=s.yPos-600,s.snowball.rotation=.1,s.target.scale.x=0,s.target.scale.y=0,s.target.alpha=.1,s.crater.position.x=s.xPos,s.crater.position.y=s.yPos,s.target.alpha=0,s.ripple.position.x=s.xPos,s.ripple.position.y=s.yPos,s.ripple.alpha=0,this.scene.floorLayer.addChild(s.crater),this.scene.floorLayer.addChild(s.ripple),this.scene.floorLayer.addChild(s.target),this.scene.floorLayer.addChild(s.shadow),s.shadow.alpha=0,s.shadow.scale.x=s.shadow.scale.y=.1;var o=[{id:"snowball-wars/move-down-1.mp3"},{id:"snowball-wars/move-down-2.mp3"},{id:"snowball-wars/move-down-3.mp3"}],a=Game.getRandom(0,2,!0);o[a]&&Game.playSound(o[a].id,o[a].vol||.9);var r=[{id:"snowball-wars/beep-1.mp3"},{id:"snowball-wars/beep-2.mp3"},{id:"snowball-wars/beep-3.mp3"}],n=Game.getRandom(0,2,!0);r[n]&&Game.playSound(r[n].id,r[n].vol||.8),Game.playSound("snowball-wars/swish-long-4.mp3",.9);break}}},e.prototype.checkCollision=function(e,t){this.anyMortarsActive--,this.fireMortarParticles(e,t);var i=this.scene.getPlayerPosition();Math.abs(i.x-e)<60&&Math.abs(i.y-t)<60&&this.scene.changePlayerHealth()},e.prototype.tick=function(){for(t=0;t<this.mortarParticles.length;t++)if(1==this.mortarParticles[t].active){var e=this.mortarParticles[t];e.sprite.position.y<e.ySpawn+5&&(e.yVelocity+=.4,e.sprite.position.x+=e.xVelocity,e.sprite.position.y+=e.yVelocity),e.sprite.scale.y=e.sprite.scale.x-=.01,e.sprite.alpha-=.01,e.sprite.scale.y<0&&(e.active=!1,e.sprite.visible=!1)}for(var t=0;t<this.mortarArray.length;t++){var i=this.mortarArray[t];if(i.crater.alpha>0&&(i.crater.alpha-=.01,i.target.alpha-=.02,i.ripple.scale.x=i.ripple.scale.y=this.scene.simpleEase(i.ripple.scale.x,1.5,10),i.ripple.alpha-=.04),i.crater.alpha<0&&1==i.fired&&(i.active=!1,i.fired=!1),1==i.active&&0==i.fired&&(i.target.scale.x=i.target.scale.y=this.scene.simpleEase(i.target.scale.x,.5,20),i.target.alpha=this.scene.simpleEase(i.target.alpha,.8,20),i.delay++,i.delay>=this.roundDelayCounter&&(i.snowball.position.x>i.xPos&&(i.snowball.position.x-=1.2),i.snowball.position.y+=10,i.snowball.position.y>=i.shadow.position.y-25))){i.shadow.visible=!1,i.snowball.visible=!1,i.crater.alpha=1,i.crater.visible=!0,i.fired=!0,i.ripple.scale.x=.5,i.ripple.scale.y=.5,i.ripple.alpha=1,i.ripple.visible=!0,i.delay=0,this.checkCollision(i.snowball.position.x,i.snowball.position.y);var s=[{id:"snowball-wars/snowball-impact-1.mp3"},{id:"snowball-wars/snowball-impact-2.mp3"},{id:"snowball-wars/snowball-impact-3.mp3"},{id:"snowball-wars/snowball-impact-4.mp3"},{id:"snowball-wars/snowball-impact-5.mp3"}],o=Game.getRandom(0,4,!0);s[o]&&Game.playSound(s[o].id,s[o].vol||.6);var a=[{id:"snowball-wars/mortar-hit-1.mp3"},{id:"snowball-wars/mortar-hit-2.mp3"},{id:"snowball-wars/mortar-hit-3.mp3"}],r=Game.getRandom(0,2,!0);a[r]&&Game.playSound(a[r].id,a[r].vol||.6);var n=[{id:"snowball-wars/ice-crack-1.mp3"},{id:"snowball-wars/ice-crack-2.mp3"},{id:"snowball-wars/ice-crack-3.mp3"},{id:"snowball-wars/ice-crack-4.mp3"}],h=Game.getRandom(0,3,!0);n[h]&&Game.playSound(n[h].id,n[h].vol||.6)}var l=i.snowball.position.y/i.shadow.position.y;i.shadow.alpha=this.scene.simpleEase(i.shadow.alpha,l,10),i.shadow.scale.x=i.shadow.scale.y=this.scene.simpleEase(i.shadow.scale.x,l,10),i.shadow.scale.x<.2&&(i.shadow.scale.x=i.shadow.scale.y=.2)}},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){for(e=0;e<this.mortarArray.length;e++)Game.displayStore.returnPooledItem(this.mortarArray[e].snowball),Game.displayStore.returnPooledItem(this.mortarArray[e].target),Game.displayStore.returnPooledItem(this.mortarArray[e].shadow),Game.displayStore.returnPooledItem(this.mortarArray[e].crater),Game.displayStore.returnPooledItem(this.mortarArray[e].ripple);for(var e=0;e<this.mortarParticles.length;e++)Game.displayStore.returnPooledItem(this.mortarParticles[e].sprite)},e}(),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),SnowballWarsMortarEnemy=function(e){function t(t,i,s,o){var a=e.call(this,o)||this;a.mainScene=o,a.name=s,"lisa"==a.name?(a.hasArms=!1,a.hasHair=!1):(a.hasArms=!0,a.hasHair=!0),a.aiManager=i,a.arenaManager=t,a.soundActive=!1,a.enemyKilled=!1,a.idleTimer=0,a.idleTimerLimit=0,a.enemyContainer=Game.displayStore.getContainer("snowball-wars/sister-"+a.name+"-holder"),a.enemySprite=a.enemyContainer.getSprite("snowball-wars/character-body"),a.boundingBox=Game.displayStore.getSprite("snowball-wars/bounding-box-enemy"),a.healthBar=Game.displayStore.getSprite("snowball-wars/bar-cube"),a.healthBarScale=Game.displayStore.getSprite("snowball-wars/bar-cube"),a.characterHeadHolder=a.enemyContainer.getContainer("snowball-wars/head-holder"),a.healthBarHolder=Game.displayStore.getContainer("snowball-wars/health-bar-holder"),a.mortarGunHolder=Game.displayStore.getContainer("snowball-wars/mortar-holder"),a.mortarGun=Game.displayStore.getSprite("snowball-wars/mortor-top"),a.mortarGunBase=Game.displayStore.getSprite("snowball-wars/mortor-bottom"),a.icedFrames=Game.displayStore.getAnimatedSprite("snowball-wars/bang-frames"),a.icedFrames.loop=!1,a.icedFrames.stop(),a.icedFrames.animationSpeed=.3,a.icedFrames.visible=!1,a.hitFrames=Game.displayStore.getAnimatedSprite("snowball-wars/hit-frames"),a.hitFrames.loop=!1,a.hitFrames.stop(),a.hitFrames.animationSpeed=.4,a.hitFrames.visible=!1,a.enemyContainer.addChild(a.mortarGunHolder),a.mortarGunHolder.addChild(a.mortarGun),a.mortarGunHolder.addChild(a.mortarGunBase),1==a.hasArms&&(a.frontArm=a.enemyContainer.getSprite("snowball-wars/character-arm-front"),a.frontArm.scale.x=a.frontArm.scale.y=1,a.enemyContainer.addChild(a.frontArm)),1==a.hasHair&&(a.backHair=a.enemyContainer.getSprite("snowball-wars/character-hair"),a.backHair.scale.x=a.backHair.scale.y=1),a.eyeLids=a.characterHeadHolder.getSprite("snowball-wars/character-blink"),a.blinkTimer=0,a.blinkTimerLimit=60,a.healthBarBacking=Game.displayStore.getSprite("snowball-wars/health-bar-back"),a.healthBarHighlight=Game.displayStore.getSprite("snowball-wars/bar-cube"),a.mortarBalls=new Array;for(var r=0;r<4;r++)a.mortarBalls.push({active:!1,sprite:Game.displayStore.getSprite("snowball-wars/mortar-balls")}),a.mortarBalls[r].sprite.visible=!1,a.mainScene.healthUILayer.addChild(a.mortarBalls[r].sprite);return a.enemyBoundingBox={topX:0,topY:0,bottomX:0,bottomY:0,width:0,height:0},a.enemyPotentialBoundingBox={topX:0,topY:0,bottomX:0,bottomY:0,width:0,height:0},a.currentExpression=new Array,a.currentExpression.push({expression:"neutral",active:!0,sprite:a.characterHeadHolder.getSprite("snowball-wars/character-normal")}),a.currentExpression.push({expression:"sad",active:!1,sprite:a.characterHeadHolder.getSprite("snowball-wars/character-sad")}),a.currentExpression.push({expression:"happy",active:!1,sprite:a.characterHeadHolder.getSprite("snowball-wars/character-happy")}),a.enemySnowDeath=Game.displayStore.getSprite("snowball-wars/enemy-snow-death"),a.enemySnowDeathEyes=Game.displayStore.getSprite("snowball-wars/enemy-snow-pile-eyes-open"),a.enemySnowDeathBlink=Game.displayStore.getSprite("snowball-wars/enemy-snow-pile-eyes-blink"),a.enemySnowDeath.visible=!1,a.enemySnowDeathEyes.visible=!1,a.enemySnowDeathBlink.visible=!1,a.enemyContainer.addChild(a.enemySnowDeath),a.enemyContainer.addChild(a.enemySnowDeathEyes),a.enemyContainer.addChild(a.enemySnowDeathBlink),a.enemyContainer.addChild(a.hitFrames),a.mainScene.mainContainer.addChild(a.icedFrames),a.icedFrames.visible=!1,a.hitFrames.visible=!1,a.hitFrames.scale.x=a.hitFrames.scale.y=1.7,a.enemySnowDeath.visible=!1,a.enemySnowDeathEyes.scale.x=a.enemySnowDeathEyes.scale.y=.75,a.enemySnowDeathBlink.scale.x=a.enemySnowDeathBlink.scale.y=.75,a.enemySnowDeath.scale.x=a.enemySnowDeath.scale.y=.75,a.enemySnowDeath.position.x=a.mortarGunBase.position.x-5,a.enemySnowDeath.position.y=a.mortarGunBase.position.y+20,a.enemySnowDeathEyes.position.x=0,a.enemySnowDeathBlink.position.x=0,a.enemySnowDeathEyes.position.y=a.enemySnowDeath.y-70,a.enemySnowDeathBlink.position.y=a.enemySnowDeath.y-70,a.aiStatus="hidden",a}return __extends(t,e),t.prototype.getRoundSettings=function(e){switch(e){case 1:case 2:this.afterShotTimerLimit=300;break;case 3:this.afterShotTimerLimit=250;break;case 4:this.afterShotTimerLimit=200;break;case 5:this.afterShotTimerLimit=100}},t.prototype.newRoundCall=function(){this.getRoundSettings(this.mainScene.difficultyCounter)},t.prototype.spawn=function(e){this.enemyKilled=!1,this.changeExpression(0),this.enemyID=e,this.roundEndLock=!0,this.enemyContainer.visible=!0,this.enemySnowDeath.visible=!1,this.enemySnowDeathEyes.visible=!1,this.mortarGunBase.visible=!0,this.mortarGun.visible=!0,this.enemySprite.visible=!0,1==this.hasHair&&(this.backHair.visible=!0),this.enemySnowDeath.position.x=this.mortarGunBase.position.x-5,this.enemySnowDeath.position.y=this.mortarGunBase.position.y+20,this.enemySnowDeathEyes.position.x=0,this.enemySnowDeathBlink.position.x=0,this.enemySnowDeathEyes.position.y=this.enemySnowDeath.y-70,this.enemySnowDeathBlink.position.y=this.enemySnowDeath.y-70;var t=this.arenaManager.getAvailablePosition("enemy",!1);this.enemyContainer.position.x=t.posX,this.enemyContainer.position.y=t.posY;var i=this.enemyContainer.position.x+this.enemySprite.position.x;this.enemyContainer.position.y,this.enemySprite.position.y;switch(this.hiddenTimer=0,this.hiddenTimerLimit=240,this.deathTimer=0,this.enemyDead=!1,this.afterShotTimer=0,this.afterShotTimerLimit=300,this.mainScene.orderingContainer.addChild(this.enemyContainer),1==this.mainScene.debugSprites&&this.enemyContainer.addChild(this.boundingBox),this.health=3,this.maxHealth=3,this.aiStatus="hidden",this.isAggressive=!1,this.isAtTagret=!1,this.hasTargetCoord=!1,this.fireDelay=0,this.fireDelayLimit=80,this.canFire=!0,this.healthBar.tint=458496,this.healthBarScale.tint=9764864,this.healthBarWidth=100,this.healthBar.width=this.healthBarWidth,this.healthBarScale.width=this.healthBarWidth,this.healthBar.height=10,this.healthBarScale.height=10,this.healthBarHighlight.height=4,this.healthBarHighlight.tint=16777215,this.healthBarHighlight.alpha=.6,this.targetBarWidth=this.healthBarWidth,this.healthBarHolder.addChild(this.healthBarBacking),this.healthBarHolder.addChild(this.healthBarScale),this.healthBarHolder.addChild(this.healthBar),this.healthBarHolder.addChild(this.healthBarHighlight),this.mainScene.healthUILayer.addChild(this.healthBarHolder),this.healthBarBacking.position.x=0-this.healthBarBacking.width/2,this.healthBarBacking.position.y=0-this.healthBarBacking.height/2,this.healthBar.position.x=this.healthBarBacking.position.x+5,this.healthBarScale.position.x=this.healthBarBacking.position.x+5,this.healthBarHighlight.position.x=this.healthBar.position.x,this.healthBarHighlight.position.y=this.healthBar.position.y-3,this.healthBarHolder.position.x=i,this.healthBarHolder.position.y=this.enemyContainer.position.y-40,this.healthBarHolder.scale.x=this.healthBarHolder.scale.y=this.healthBarHolder.alpha=0,this.enemySprite.visible=!0,this.enemyHit=!1,this.xVelocity=0,this.yVelocity=0,this.enemyBoundingBox={topX:0,topY:0,bottomX:0,bottomY:0,width:0,height:0},this.enemyPotentialBoundingBox={topX:0,topY:0,bottomX:0,bottomY:0,width:0,height:0},this.enemyHitTimer=0,this.enemyHitLimit=10,this.mainScene.mainDisplayOrder.push({objectType:"enemy",object:this.enemyContainer,objectID:this.enemyID,yPosition:this.enemyContainer.position.y}),this.tempMask=new PIXI.Graphics,this.tempMask.drawRect(0,0,200,-150),this.enemyContainer.mask=this.tempMask,this.tempMask.visible=!1,this.mainScene.floorLayer.addChild(this.enemyContainer),this.mainScene.mainContainer.addChild(this.tempMask),this.name){case"lana":this.enemySprite.position.x=1,this.enemySprite.position.y=0,this.characterHeadHolder.position.y=-17,this.characterHeadHolder.position.x=13,this.frontArm.position.y=-18,this.frontArm.position.x=10,this.frontArm.rotation=.4,this.backHair.position.x=this.characterHeadHolder.position.x-9,this.backHair.position.y=this.characterHeadHolder.position.y;break;case"lola":this.enemySprite.position.x=15,this.enemySprite.position.y=-10,this.characterHeadHolder.position.y=-7,this.characterHeadHolder.position.x=8,this.frontArm.position.y=-5,this.frontArm.position.x=14.5,this.frontArm.rotation=.4,this.backHair.position.x=this.characterHeadHolder.position.x,this.backHair.position.y=this.characterHeadHolder.position.y;break;case"lisa":this.enemySprite.position.x=7,this.enemySprite.position.y=5,this.characterHeadHolder.position.y=-8,this.characterHeadHolder.position.x=8}this.mortarGunHolder.position.y=10,this.mortarGun.rotation=.3},t.prototype.getPlayerPosition=function(){return{x:this.enemySprite.position.x,y:this.enemySprite.position.y}},t.prototype.getMortarFireDelay=function(){var e=this.mainScene.currentRound;e<5&&(this.fireDelayLimit=600),e>=5&&(this.fireDelayLimit=200)},t.prototype.deSpawnEnemy=function(){Game.displayStore.returnPooledItem(this.boundingBox),Game.displayStore.returnPooledItem(this.enemySprite),Game.displayStore.returnPooledItem(this.enemyContainer),Game.displayStore.returnPooledItem(this.healthBar),Game.displayStore.returnPooledItem(this.healthBarScale),Game.displayStore.returnPooledItem(this.healthBarHighlight),Game.displayStore.returnPooledItem(this.healthBarHolder),Game.displayStore.returnPooledItem(this.healthBarBacking)},t.prototype.playIcedFrames=function(){this.icedFrames.position.y=this.enemyContainer.position.y-40,this.icedFrames.position.x=this.enemyContainer.position.x,this.icedFrames.scale.x=this.icedFrames.scale.y=2.5,this.icedFrames.visible=!0,this.icedFrames.gotoAndPlay(1)},t.prototype.changeHealth=function(e){if(!(this.health<=0)){if(this.changeExpression(1),Game.playSound("snowball-wars/ice-impact.mp3"),0==this.soundActive){this.soundActive=!0;var t=[{id:"snowball-wars/"+this.name+"-negative.mp3"},{id:"snowball-wars/"+this.name+"-negative.mp3"},{id:"snowball-wars/"+this.name+"-negative-2.mp3"},{id:"snowball-wars/"+this.name+"-negative-2.mp3"},{id:"snowball-wars/linc-awesome.mp3"},{id:"snowball-wars/linc-yes.mp3"},{id:"snowball-wars/linc-yes-2.mp3"},{id:"snowball-wars/linc-woohoo.mp3"}],i=Game.getRandom(0,7,!0);t[i]&&Game.playSound(t[i].id,t[i].vol||.5)}switch(this.health+=e,this.healthBarWidth=this.health/this.maxHealth*100,this.targetBarWidth=this.healthBarWidth,this.health){case 3:this.healthBar.tint=458496;break;case 2:this.healthBar.tint=16753152;break;case 1:this.healthBar.tint=16713479}}},t.prototype.handleCollision=function(e){if(1!=this.enemyHit)switch(e){case"snowball":this.changeHealth(-1),this.enemyHit=!0}},t.prototype.moveEnemy=function(){this.enemySprite.width;var e=this.enemyContainer.position.x+this.enemySprite.position.x,t=this.enemyContainer.position.y+this.enemySprite.position.y;this.healthBarHolder.position.x=e,this.healthBarHolder.position.y=this.enemyContainer.position.y-100;var i=e,s=t;if(this.setPotentialBoundingBox(i,s),"hidden"!=this.aiStatus){var o=this.mainScene.checkForCollisions("enemy",this.enemyID,this.enemyPotentialBoundingBox);1==o.collisionResult&&this.handleCollision(o.collidedWith)}},t.prototype.setPotentialBoundingBox=function(e,t){this.enemyPotentialBoundingBox.topX=e-this.enemySprite.width+25,this.enemyPotentialBoundingBox.topY=t-20,this.enemyPotentialBoundingBox.bottomX=e+this.enemySprite.width-20,this.enemyPotentialBoundingBox.bottomY=t+20,this.enemyPotentialBoundingBox.width=this.boundingBox.width,this.enemyPotentialBoundingBox.height=this.boundingBox.height},t.prototype.setBoundingBox=function(){this.enemyBoundingBox.topX=this.enemySprite.position.x-this.enemySprite.width+25,this.enemyBoundingBox.topY=this.enemySprite.position.y-20,this.enemyBoundingBox.bottomX=this.enemySprite.position.x+this.enemySprite.width-20,this.enemyBoundingBox.bottomY=this.enemySprite.position.y+20,this.boundingBox.position.x=this.enemyBoundingBox.topX,this.boundingBox.position.y=this.enemyBoundingBox.topY,this.boundingBox.width=this.enemyBoundingBox.bottomX-this.enemyBoundingBox.topX,this.boundingBox.height=Math.abs(this.enemyBoundingBox.topY-this.enemyBoundingBox.bottomY),this.enemyBoundingBox.width=this.boundingBox.width,this.enemyBoundingBox.height=this.boundingBox.height},t.prototype.getTargetPosition=function(){this.mainScene.getPlayerPosition()},t.prototype.changeExpression=function(e){for(var t=0;t<this.currentExpression.length;t++)t!=e&&(this.currentExpression[t].active=!1,this.currentExpression[t].sprite.visible=!1);this.currentExpression[e].active=!0,this.currentExpression[e].sprite.visible=!0,0!=e&&(this.expressionTimerActive=!0)},t.prototype.killEnemy=function(){if(!this.enemyKilled){this.enemyKilled=!0,this.enemySnowDeath.visible=!0,this.enemySnowDeathEyes.visible=!0,Game.playSound("snowball-wars/snow-land.mp3"),this.mortarGunBase.visible=!1,this.mortarGun.visible=!1,this.enemySprite.visible=!1,1==this.hasHair&&(this.backHair.visible=!1);var e=[{id:"snowball-wars/ice-crack-1.mp3"},{id:"snowball-wars/ice-crack-2.mp3"},{id:"snowball-wars/ice-crack-3.mp3"},{id:"snowball-wars/ice-crack-4.mp3"}],t=Game.getRandom(0,3,!0);e[t]&&Game.playSound(e[t].id,e[t].vol||.5)}},t.prototype.tick=function(){if(this.hasHair&&(this.backHair.position.y=this.characterHeadHolder.position.y+2),this.healthBarHolder.position.x=this.boundingBox.position.x-this.boundingBox.width/2,1==this.expressionTimerActive&&++this.expressionTimer>120&&(this.expressionTimerActive=!1,this.changeExpression(0),this.expressionTimer=0,this.soundActive=!1),++this.blinkTimer>=this.blinkTimerLimit&&(this.eyeLids.visible=!0,this.blinkTimer>=this.blinkTimerLimit+15&&(this.blinkTimer=0,this.blinkTimerLimit=Game.getRandom(30,180),this.eyeLids.visible=!1)),1!=this.roundEndLock){for(var e=0;e<this.mortarBalls.length;e++)1==this.mortarBalls[e].active&&(this.mortarBalls[e].sprite.position.x-=2,this.mortarBalls[e].sprite.position.y-=13,this.mortarBalls[e].sprite.position.y<-200&&(this.mortarBalls[e].active=!1,this.mortarBalls[e].sprite.visible=!1));this.aiLogic(),this.moveEnemy(),this.setBoundingBox(),this.healthBarScale.width=this.mainScene.simpleEase(this.healthBarScale.width,this.targetBarWidth,10),this.healthBar.width=this.targetBarWidth,this.healthBarHighlight.width=this.healthBar.width,1==this.isIdle&&++this.idleTimer>=this.idleTimerLimit&&(this.isIdle=!1,this.idleTimer=0,this.hasTargetCoord=!1,this.isAtTagret=!1),1==this.enemyHit&&++this.enemyHitTimer>this.enemyHitLimit&&(this.enemyHitTimer=0,this.enemyHit=!1),this.health<=0&&0==this.enemyDead&&(this.killEnemy(),this.deathTimer++,this.aiStatus="disapearing",this.changeExpression(1),1==this.deathTimer&&this.playIcedFrames(),this.deathTimer>=120&&(this.enemyDead=!0,this.mainScene.closeHatch(this.mortarHatch),this.healthBarBacking.visible=!1,this.healthBar.visible=!1,this.healthBarScale.visible=!1,this.enemySprite.visible=!1,this.enemyContainer.visible=!1,this.enemyContainer.mask=null,this.enemyDead=!0,this.tempMask.visible=!1,Game.displayStore.returnPooledItem(this.boundingBox),Game.displayStore.returnPooledItem(this.enemySprite),Game.displayStore.returnPooledItem(this.healthBar),Game.displayStore.returnPooledItem(this.healthBarScale),Game.displayStore.returnPooledItem(this.healthBarBacking),this.aiManager.activeMortarSisters--,this.aiManager.makeSisterInactive(this.name),console.log("mortars active:",this.aiManager.activeMortarSisters)))}},t.prototype.removeFromStage=function(){this.enemySnowDeath.visible=!1,this.enemySnowDeathEyes.visible=!1,this.enemySnowDeathBlink.visible=!1},t.prototype.enemyHappy=function(){if(this.changeExpression(2),0==this.soundActive){this.soundActive=!0;var e=[{id:"snowball-wars/"+this.name+"-positive.mp3"},{id:"snowball-wars/"+this.name+"-positive.mp3"},{id:"snowball-wars/"+this.name+"-positive-2.mp3"},{id:"snowball-wars/"+this.name+"-positive-2.mp3"},{id:"snowball-wars/linc-so-close.mp3"},{id:"snowball-wars/linc-this-is-bad.mp3"},{id:"snowball-wars/linc-grrr.mp3"},{id:"snowball-wars/linc-dang-it.mp3"},{id:"snowball-wars/linc-i-wont-give-up.mp3"},{id:"snowball-wars/linc-cut-it-out.mp3"}],t=Game.getRandom(0,9,!0);e[t]&&Game.playSound(e[t].id,e[t].vol||.5)}},t.prototype.endRoundReset=function(){this.roundEndLock=!0},t.prototype.roundUnlock=function(){this.roundEndLock=!1},t.prototype.getHatchPosition=function(e){return this.mainScene.getHatchPosition(e)},t.prototype.selectHatch=function(){if(this.mortarHatch=Game.getRandom(0,3,!0),0==this.mainScene.checkHatchStatus(this.mortarHatch)){this.mainScene.openHatch(this.mortarHatch);var e=this.getHatchPosition(this.mortarHatch);this.enemyContainer.position.x=e.frontPanel.position.x,this.enemyContainer.position.y=e.frontPanel.position.y,this.tempMask.position.x=e.frontPanel.position.x-100,this.tempMask.position.y=e.frontPanel.position.y-e.frontPanel.height+8,Game.playSound("snowball-wars/hatch-doors.mp3",.9),this.aiStatus="appearing"}else this.selectHatch()},t.prototype.spawnMortarBall=function(){for(var e=0;e<this.mortarBalls.length;e++)if(0==this.mortarBalls[e].active){this.mortarBalls[e].active=!0,this.mortarBalls[e].sprite.position.x=this.enemyContainer.position.x-15,this.mortarBalls[e].sprite.position.y=this.enemyContainer.position.y-100,this.mortarBalls[e].sprite.visible=!0,this.mortarBalls[e].sprite.rotation=-.1,this.mortarBalls[e].sprite.scale.x=this.mortarBalls[e].sprite.scale.y=1.5;break}},t.prototype.aiLogic=function(){this.mainScene.getPlayerPosition(),this.mainScene.arenaBounds;switch(this.aiStatus){case"hidden":this.healthBarBacking.visible=!1,this.healthBar.visible=!1,this.healthBarScale.visible=!1,this.healthBarHighlight.visible=!1,++this.hiddenTimer>=this.hiddenTimerLimit&&(this.hiddenTimer=0,this.selectHatch());break;case"appearing":this.healthBarBacking.visible=!0,this.healthBar.visible=!0,this.healthBarScale.visible=!0,this.healthBarHighlight.visible=!0,this.changeExpression(0),this.healthBarHolder.scale.x<1&&(this.healthBarHolder.scale.x+=.1,this.healthBarHolder.scale.y+=.1,this.healthBarHolder.alpha+=.1),this.enemySprite.position.y>-18?(this.enemySprite.position.y--,this.characterHeadHolder.position.y--,this.mortarGunHolder.position.y--,this.hasArms&&this.frontArm.position.y--,this.enemySnowDeath.position.y--,this.enemySnowDeathBlink.position.y--,this.enemySnowDeathEyes.position.y--):this.aiStatus="firing";break;case"firing":var e=this.mortarHatch;if(this.mortarGun.rotation=this.mainScene.simpleEase(this.mortarGun.rotation,.1,10),this.characterHeadHolder.rotation=this.mainScene.simpleEase(this.characterHeadHolder.rotation,0,10),this.hasArms&&(this.frontArm.rotation=this.mainScene.simpleEase(this.frontArm.rotation,0,10)),++this.fireDelay>=this.fireDelayLimit){this.changeExpression(2),this.canFire=!0,this.fireDelay=0,this.mortarGun.rotation=.4,this.characterHeadHolder.rotation=.1,this.hasArms&&(this.frontArm.rotation=.2),this.mainScene.spawnMortar(e),this.spawnMortarBall();var t=[{id:"snowball-wars/mortar-pop-1.mp3"},{id:"snowball-wars/mortar-pop-2.mp3"},{id:"snowball-wars/mortar-pop-3.mp3"}],i=Game.getRandom(0,2,!0);t[i]&&Game.playSound(t[i].id,t[i].vol||.5)}++this.afterShotTimer>=this.afterShotTimerLimit&&(this.afterShotTimer=0,this.aiStatus="disapearing");break;case"disapearing":this.enemySprite.position.y<=100?(this.enemySprite.position.y+=2,this.mortarGunHolder.position.y+=2,this.characterHeadHolder.position.y+=2,this.enemySnowDeath.position.y+=2,this.enemySnowDeathBlink.position.y+=2,this.enemySnowDeathEyes.position.y+=2,this.healthBarHolder.scale.x>=0&&(this.healthBarHolder.scale.x-=.1,this.healthBarHolder.scale.y-=.1,this.healthBarHolder.alpha-=.1),this.hasArms&&(this.frontArm.position.y+=2),this.mortarGun.rotation=this.mainScene.simpleEase(this.mortarGun.rotation,.3,5)):(this.aiStatus="hidden",this.mainScene.closeHatch(this.mortarHatch))}},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.destroy=function(){console.log("destorying mortar enemy"),Game.displayStore.returnPooledItem(this.enemyContainer),Game.displayStore.returnPooledItem(this.enemySprite),Game.displayStore.returnPooledItem(this.healthBar),Game.displayStore.returnPooledItem(this.healthBarScale),Game.displayStore.returnPooledItem(this.healthBarHighlight),Game.displayStore.returnPooledItem(this.enemySnowDeathBlink),Game.displayStore.returnPooledItem(this.enemySnowDeath),Game.displayStore.returnPooledItem(this.enemySnowDeathEyes),Game.displayStore.returnPooledItem(this.icedFrames),Game.displayStore.returnPooledItem(this.hitFrames),Game.displayStore.returnPooledItem(this.healthBarBacking),Game.displayStore.returnPooledItem(this.healthBarHolder),Game.displayStore.returnPooledItem(this.mortarGunHolder),Game.displayStore.returnPooledItem(this.boundingBox),Game.displayStore.returnPooledItem(this.mortarGunBase),Game.displayStore.returnPooledItem(this.mortarGun);for(var e=0;e<this.mortarBalls.length;e++)Game.displayStore.returnPooledItem(this.mortarBalls[e].sprite),console.log("balls be gone!")},t}(SnowballWarsCharacterBase),SnowballWarsHatchManager=function(){function e(e){this.scene=e,this.hatchArray=new Array;for(var t=0;t<4;t++){switch(this.hatchArray.push({open:!1,containsEnemy:!1,xPos:0,yPos:0,hatchContainer:Game.displayStore.getContainer("snowball-wars/hatch-container-"+t),active:!1,frontPanel:Game.displayStore.getSprite("snowball-wars/hatch-front"),backPanel:Game.displayStore.getSprite("snowball-wars/hatch-back"),leftDoor:Game.displayStore.getSprite("snowball-wars/hatch-door"),rightDoor:Game.displayStore.getSprite("snowball-wars/hatch-door"),leftSide:Game.displayStore.getSprite("snowball-wars/hatch-side"),rightSide:Game.displayStore.getSprite("snowball-wars/hatch-side"),background:Game.displayStore.getSprite("snowball-wars/hatch-base")}),t){case 0:i=this.scene.getArenaPos(0);break;case 1:i=this.scene.getArenaPos(2);break;case 2:i=this.scene.getArenaPos(6);break;case 3:var i=this.scene.getArenaPos(8)}var s=this.hatchArray[t];s.xPos=i.posX,s.yPos=i.posY,s.background.position.x=s.xPos,s.background.position.y=s.yPos+1,s.rightDoor.scale.x=-1,this.hatchArray[t].leftDoor.width=this.hatchArray[t].background.width/2-10,this.hatchArray[t].rightDoor.width=this.hatchArray[t].leftDoor.width,s.rightDoor.position.x=s.background.position.x+s.background.width/2-10,s.rightDoor.position.y=s.background.position.y-1,s.leftDoor.position.x=s.background.position.x-s.background.width/2+10,s.leftDoor.position.y=s.background.position.y-1,s.frontPanel.position.x=s.background.position.x,s.frontPanel.position.y=s.background.position.y+s.background.height/2-12,s.backPanel.position.x=s.background.position.x,s.backPanel.position.y=s.background.position.y-s.background.height/2+20,s.leftSide.position.x=s.background.position.x-s.background.width/2+7,s.leftSide.position.y=s.background.position.y-3,s.rightSide.position.x=s.background.position.x+s.background.width/2-18,s.rightSide.position.y=s.background.position.y-3,s.hatchContainer.addChild(s.background),s.hatchContainer.addChild(s.rightDoor),s.hatchContainer.addChild(s.leftDoor),s.hatchContainer.addChild(s.leftSide),s.hatchContainer.addChild(s.rightSide),s.hatchContainer.addChild(s.backPanel),s.hatchContainer.addChild(s.frontPanel),this.scene.floorLayer.addChild(s.hatchContainer)}}return e.prototype.getHatchPosition=function(e){return this.hatchArray[e]},e.prototype.addSister=function(e,t){t.position.x=this.hatchArray[e].background.position.x,t.position.y=this.hatchArray[e].background.position.y+t.height,this.hatchArray[e].containsEnemy=!0},e.prototype.removeSister=function(e){this.hatchArray[e].containsEnemy=!1},e.prototype.openHatch=function(e){this.hatchArray[e].active=!0},e.prototype.deactivateHatch=function(e){this.hatchArray[e].active=!1},e.prototype.tick=function(){for(var e=0;e<this.hatchArray.length;e++){var t=this.hatchArray[e];1==t.active&&(t.leftDoor.width>20?(t.leftDoor.width-=2,t.rightDoor.width-=2):t.open=!0),1==this.hatchArray[e].open&&0==this.hatchArray[e].active&&this.hatchArray[e].leftDoor.width<this.hatchArray[e].background.width/2-10&&(this.hatchArray[e].leftDoor.width+=1,this.hatchArray[e].rightDoor.width+=1),this.hatchArray[e].leftDoor.width>=this.hatchArray[e].background.width/2-10&&(this.hatchArray[e].active=!1,this.hatchArray[e].open=!1,this.removeSister(e))}},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){console.log("destroying!");for(var e=0;e<this.hatchArray.length;e++)Game.displayStore.returnPooledItem(this.hatchArray[e].frontPanel),Game.displayStore.returnPooledItem(this.hatchArray[e].leftDoor),Game.displayStore.returnPooledItem(this.hatchArray[e].rightDoor),Game.displayStore.returnPooledItem(this.hatchArray[e].background),Game.displayStore.returnPooledItem(this.hatchArray[e].backPanel),Game.displayStore.returnPooledItem(this.hatchArray[e].leftSide),Game.displayStore.returnPooledItem(this.hatchArray[e].rightSide),console.log("hatch gone!")},e}(),SnowballWarsAIManager=function(){function e(e,t,i){this.scene=e,this.arenaBounds=t,this.aggroPlayers=0,this.maxAggressivePlayers=1,this.activeSisters=0,this.maxMortarSisters=0,this.activeMortarSisters=0,this.enemyPlayersArray=new Array,this.sistersNames=new Array,this.arenaManager=i,this.aggressiveTimer=0,this.aggressiveTimerLimit=300,this.aggressiveChance=1,this.roundActive=!1,this.roundReset=!1,this.maxSisters=0,this.roundEndLock=!0,this.sistersNames.push({name:"luna"}),this.sistersNames.push({name:"luan"}),this.sistersNames.push({name:"lucy"}),this.sistersNames.push({name:"lynn"}),this.sistersNames.push({name:"lori"}),this.sistersNames.push({name:"leni"}),this.sistersNames.push({name:"lisa"}),this.sistersNames.push({name:"lola"}),this.sistersNames.push({name:"lana"}),this.tempSisterArray=new Array;for(var s=0;s<this.sistersNames.length;s++){if("lola"==this.sistersNames[s].name||"lana"==this.sistersNames[s].name||"lisa"==this.sistersNames[s].name){this.enemy=new SnowballWarsMortarEnemy(this.arenaManager,this,this.sistersNames[s].name,e);o="mortar"}else{this.enemy=new SnowballWarsEnemy(this.arenaManager,this,this.sistersNames[s].name,e,s);var o="normal"}this.enemyPlayersArray.push({name:this.sistersNames[s].name,type:o,active:!1,ammo:10,status:"running",enemyID:s,enemySister:this.enemy})}this.enemyPlayersArray=this.scene.shuffleArray(this.enemyPlayersArray)}return e.prototype.setEnemyHappy=function(e){for(var t=0;t<this.enemyPlayersArray.length;t++)this.enemyPlayersArray[t].name==e&&this.enemyPlayersArray[t].enemySister.enemyHappy()},e.prototype.getTotalSisters=function(){this.tempSisterArray=[];for(var e=0;e<this.enemyPlayersArray.length;e++)1==this.enemyPlayersArray[e].active&&this.tempSisterArray.push({name:this.enemyPlayersArray[e].name});return this.tempSisterArray},e.prototype.getRoundSettings=function(e){switch(console.log("difficulty is: ",e),e){case 1:this.maxSisters=1,this.aggressiveChance=this.maxMortarSisters=0;break;case 2:this.maxSisters=2,this.aggressiveChance=1.5,this.maxMortarSisters=0;break;case 3:this.maxSisters=2,this.aggressiveChance=2,this.maxMortarSisters=1;break;case 4:this.maxSisters=3,this.aggressiveChance=2.5,this.maxMortarSisters=1;break;case 5:this.maxSisters=4,this.aggressiveChance=2.5,this.maxMortarSisters=1}},e.prototype.removeOldSisters=function(){console.log("removing old sisters");for(var e=0;e<this.enemyPlayersArray.length;e++)this.enemyPlayersArray[e].enemySister.removeFromStage(),this.enemyPlayersArray[e].active=!1},e.prototype.setNewSisters=function(){this.getRoundSettings(this.scene.difficultyCounter);for(e=0;e<this.maxSisters;e++)this.markForSpawn();for(var e=0;e<this.maxMortarSisters;e++)this.markMortarForSpawn()},e.prototype.startRound=function(){this.spawnSister(),this.spawnMortarSister(),this.aggroPlayers=0,this.roundActive=!0,this.roundReset=!1},e.prototype.markForSpawn=function(){var e=Game.getRandom(0,this.enemyPlayersArray.length-1,!0);0==this.enemyPlayersArray[e].active&&"normal"==this.enemyPlayersArray[e].type?this.enemyPlayersArray[e].active=!0:this.markForSpawn()},e.prototype.markMortarForSpawn=function(){var e=Game.getRandom(0,this.enemyPlayersArray.length-1,!0);0==this.enemyPlayersArray[e].active&&"mortar"==this.enemyPlayersArray[e].type?this.enemyPlayersArray[e].active=!0:this.markMortarForSpawn()},e.prototype.getEnemyPosition=function(e){for(var t=0;t<this.enemyPlayersArray.length;t++)if(this.enemyPlayersArray[t].enemySister.enemyID==e)return{x:this.enemyPlayersArray[t].enemySister.enemyContainer.position.x,y:this.enemyPlayersArray[t].enemySister.enemyContainer.position.y}},e.prototype.getEnemyPositionSorting=function(e){for(var t=0;t<this.enemyPlayersArray.length;t++)if(this.enemyPlayersArray[t].enemySister.enemyID==e)return this.enemyPlayersArray[t].enemySister.enemyContainer.position.y},e.prototype.makeSisterInactive=function(e){for(var t=0;t<this.enemyPlayersArray.length;t++)this.enemyPlayersArray[t].name==e&&(this.enemyPlayersArray[t].active=!1);0==this.activeSisters&&0==this.activeMortarSisters&&1==this.roundActive&&0==this.roundReset&&0==this.scene.checkActiveHazards()&&(this.roundReset=!0,this.roundActive=!1,this.scene.requestNewRound())},e.prototype.spawnSister=function(){for(var e=0;e<this.enemyPlayersArray.length;e++)1==this.enemyPlayersArray[e].active&&"normal"==this.enemyPlayersArray[e].type&&(this.activeSisters++,this.enemyPlayersArray[e].enemySister.spawn(this.enemyPlayersArray[e].enemyID),console.log("spawning: ",this.enemyPlayersArray[e].name,this.enemyPlayersArray[e].enemyID))},e.prototype.spawnMortarSister=function(){for(var e=0;e<this.enemyPlayersArray.length;e++)1==this.enemyPlayersArray[e].active&&"mortar"==this.enemyPlayersArray[e].type&&(this.activeMortarSisters++,this.enemyPlayersArray[e].enemySister.spawn(this.enemyPlayersArray[e].enemyID))},e.prototype.getAggressiveSisters=function(){return console.log("getting an aggressive sister"),this.activeSisters},e.prototype.removeSister=function(e){for(var t=0;t<this.enemyPlayersArray.length;t++)this.enemyPlayersArray[t].enemyID},e.prototype.getAmmoPosition=function(){return this.scene.getAmmoPosition()},e.prototype.getPlayerAmmoPosition=function(){return this.scene.getPlayerAmmoPosition()},e.prototype.tick=function(){if(1!=this.roundEndLock){for(e=0;e<this.enemyPlayersArray.length;e++)1==this.enemyPlayersArray[e].active&&this.enemyPlayersArray[e].enemySister.tick();if(this.aggroPlayers<this.maxAggressivePlayers&&++this.aggressiveTimer>=this.aggressiveTimerLimit){this.aggressiveTimer=0;for(var e=0;e<this.enemyPlayersArray.length;e++){1==this.enemyPlayersArray[e].active&&"normal"==this.enemyPlayersArray[e].type&&"tracking"!=this.enemyPlayersArray[e].enemySister.aiStatus&&(this.aggroPlayers++,this.enemyPlayersArray[e].enemySister.aiStatus="tracking");break}}}},e.prototype.endRoundReset=function(){this.roundEndLock=!0;for(var e=0;e<this.enemyPlayersArray.length;e++)this.enemyPlayersArray[e].enemySister.endRoundReset()},e.prototype.roundUnlock=function(){this.roundEndLock=!1;for(var e=0;e<this.enemyPlayersArray.length;e++)this.enemyPlayersArray[e].enemySister.roundUnlock(),this.enemyPlayersArray[e].enemySister.newRoundCall()},e.prototype.pause=function(){for(var e=0;e<this.enemyPlayersArray.length;e++)1==this.enemyPlayersArray[e].active&&this.enemyPlayersArray[e].enemySister.pause()},e.prototype.resume=function(){for(var e=0;e<this.enemyPlayersArray.length;e++)1==this.enemyPlayersArray[e].active&&this.enemyPlayersArray[e].enemySister.resume()},e.prototype.destroy=function(){for(var e=0;e<this.enemyPlayersArray.length;e++)this.enemyPlayersArray[e].enemySister.destroy()},e}(),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),SnowballWarsEnemy=function(e){function t(t,i,s,o,a){var r=e.call(this,o)||this;r.mainScene=o,r.name=s,r.aiManager=i,r.arenaManager=t,r.soundActive=!1,r.footsoundTick=0,r.rangeCheck=0,console.log("making the sister"),r.backPanelArray=new Array,r.backPanelArray.push({number:0,panel:Game.displayStore.getSprite("snowball-wars/gun-0-balls")}),r.backPanelArray.push({number:1,panel:Game.displayStore.getSprite("snowball-wars/gun-1-balls")}),r.backPanelArray.push({number:2,panel:Game.displayStore.getSprite("snowball-wars/gun-2-balls")}),r.backPanelArray.push({number:3,panel:Game.displayStore.getSprite("snowball-wars/gun-3-balls")}),r.backPanelArray.push({number:4,panel:Game.displayStore.getSprite("snowball-wars/gun-4-balls")}),r.backPanelArray.push({number:5,panel:Game.displayStore.getSprite("snowball-wars/gun-5-balls")}),r.backPanelArray.push({number:6,panel:Game.displayStore.getSprite("snowball-wars/gun-6-balls")}),r.backPanelArray.push({number:7,panel:Game.displayStore.getSprite("snowball-wars/gun-7-balls")}),r.backPanelArray.push({number:8,panel:Game.displayStore.getSprite("snowball-wars/gun-8-balls")}),r.backPanelArray.push({number:9,panel:Game.displayStore.getSprite("snowball-wars/gun-9-balls")}),r.backPanelArray.push({number:10,panel:Game.displayStore.getSprite("snowball-wars/gun-10-balls")}),r.gunBackPanelHolder=Game.displayStore.getContainer("snowball-wars/gun-back-panel-holder");for(n=0;n<r.backPanelArray.length;n++)r.gunBackPanelHolder.addChild(r.backPanelArray[n].panel),r.backPanelArray[n].panel.scale.x=-1,r.backPanelArray[n].panel.visible=!1,10==r.backPanelArray[n].number&&(r.backPanelArray[n].panel.visible=!0);if(r.icedFrames=Game.displayStore.getAnimatedSprite("snowball-wars/bang-frames"),r.icedFrames.loop=!1,r.icedFrames.stop(),r.icedFrames.animationSpeed=.3,r.icedFrames.visible=!1,r.hitFrames=Game.displayStore.getAnimatedSprite("snowball-wars/hit-frames"),r.hitFrames.loop=!1,r.hitFrames.stop(),r.hitFrames.animationSpeed=.4,r.hitFrames.visible=!1,r.startingFrontArmPositionX=0,r.shootingRange=50,r.idleTimer=0,r.idleTimerLimit=0,r.triggerDelay=0,r.triggerDelayLimit=60,r.playerSpotted=!1,r.footMarkTick=0,r.runningLegs=Game.displayStore.getAnimatedSprite("snowball-wars/snowball-wars-"+r.name+"-legs-frames"),r.runningLegs.visible=!1,r.enemySnowDeath=Game.displayStore.getSprite("snowball-wars/enemy-snow-death"),r.enemySnowDeathEyes=Game.displayStore.getSprite("snowball-wars/enemy-snow-pile-eyes-open"),r.enemySnowDeathBlink=Game.displayStore.getSprite("snowball-wars/enemy-snow-pile-eyes-blink"),0==Game.isLowEndIPad){switch(r.enemyContainer=Game.displayStore.getContainer("snowball-wars/sister-"+r.name+"-holder"),r.enemyHead=r.enemyContainer.getContainer("snowball-wars/head-holder"),r.snowGun=r.enemyContainer.getSprite("snowball-wars/character-gun-front"),r.enemyGunArm=r.enemyContainer.getSprite("snowball-wars/character-arm-front"),r.enemyBody=r.enemyContainer.getSprite("snowball-wars/character-body"),r.gunBack=r.enemyContainer.getSprite("snowball-wars/character-gun-back"),r.enemyShadow=Game.displayStore.getSprite("snowball-wars/enemy-shadow"),r.enemyShadow.alpha=.3,r.enemyShadow.scale.y=1.2,r.expressionTimer=0,r.expressionTimerActive=!1,r.blinkTimer=0,r.blinkTimerLimit=60,r.idleBackLeg=r.enemyContainer.getSprite("snowball-wars/character-back-leg-idle"),r.idleFrontLeg=r.enemyContainer.getSprite("snowball-wars/character-front-leg-idle"),r.enemyContainer.addChild(r.enemyShadow),r.enemyContainer.addChild(r.idleBackLeg),r.enemyContainer.addChild(r.runningLegs),r.enemyContainer.addChild(r.idleFrontLeg),r.enemyContainer.addChildAt(r.gunBackPanelHolder,0),r.enemyContainer.addChild(r.gunBack),r.enemyContainer.addChild(r.enemyBody),r.name){case"luna":case"luan":case"lori":r.hasSkirt=!0;break;default:r.hasSkirt=!1}r.hasSkirt&&(r.enemySkirt=r.enemyContainer.getSprite("snowball-wars/character-skirt"),r.enemyContainer.addChild(r.enemySkirt)),r.enemyContainer.addChild(r.enemyHead),r.enemyContainer.addChild(r.enemyGunArm),r.enemyContainer.addChild(r.snowGun),"lucy"!=r.name&&(r.enemyEyelids=r.enemyHead.getSprite("snowball-wars/character-blink"),r.enemyHair=r.enemyContainer.getSprite("snowball-wars/character-hair")),"lynn"!=r.name&&(r.enemyHair=r.enemyContainer.getSprite("snowball-wars/character-hair")),"lori"!=r.name&&"leni"!=r.name||(r.enemyHair=r.enemyContainer.getSprite("snowball-wars/character-hair")),r.gunBack.visible=!0,r.enemyGunArm.visible=!0,r.snowGun.visible=!0,r.enemyShadow.position.x=r.idleFrontLeg.position.x,r.enemyShadow.position.y=r.idleFrontLeg.position.y-5,r.currentExpression=new Array,r.currentExpression.push({expression:"neutral",active:!0,sprite:r.enemyHead.getSprite("snowball-wars/character-normal")}),r.currentExpression.push({expression:"sad",active:!1,sprite:r.enemyHead.getSprite("snowball-wars/character-sad")}),r.currentExpression.push({expression:"happy",active:!1,sprite:r.enemyHead.getSprite("snowball-wars/character-happy")}),r.currentExpression.push({expression:"gameover",active:!1,sprite:r.enemyHead.getSprite("snowball-wars/character-sad")}),r.currentExpression[0].sprite.visible=!0,r.currentExpression[1].sprite.visible=!1,r.currentExpression[2].sprite.visible=!1,r.currentExpression[3].sprite.visible=!1,r.footMarkArray=new Array;for(var n=0;n<30;n++)r.footMarkArray.push({active:!1,sprite:Game.displayStore.getSprite("snowball-wars/foot-mark")}),r.footMarkArray[n].sprite.visible=!1,r.mainScene.floorLayer.addChild(r.footMarkArray[n].sprite);r.startingFrontArmPositionX=r.enemyGunArm.position.x,r.startingFrontArmPositionY=r.enemyGunArm.position.y,r.startingGunBackY=r.gunBack.position.y,r.startingGunBackX=r.gunBack.position.x,r.startingGunY=r.snowGun.position.y,r.startingGunX=r.snowGun.position.x,r.startingHeadY=r.enemyHead.position.y,r.startingHeadX=r.enemyHead.position.x,r.enemyContainer.scale.x=r.enemyContainer.scale.y=.95,r.healthBarOffset=2.5*r.enemyHead.height}else r.enemyContainer=Game.displayStore.getContainer("snowball-wars/sister-"+r.name+"-low-holder"),r.enemyBody=r.enemyContainer.getSprite("snowball-wars/character-body"),r.idleLowLegs=r.enemyContainer.getSprite("snowball-wars/character-legs"),r.enemyContainer.addChild(r.runningLegs),r.enemyContainer.addChild(r.idleLowLegs),r.enemyContainer.addChild(r.enemyBody),r.enemyContainer.scale.x=r.enemyContainer.scale.y=.9,r.healthBarOffset=1.5*r.enemyBody.height,r.runningLegs.position.x=r.enemyBody.position.x,r.runningLegs.position.y=r.enemyBody.position.y+r.runningLegs.height/2;return r.enemyContainer.addChild(r.enemySnowDeath),r.enemyContainer.addChild(r.enemySnowDeathEyes),r.enemyContainer.addChild(r.enemySnowDeathBlink),r.enemyContainer.addChild(r.hitFrames),r.enemyContainer.addChild(r.icedFrames),r.healthBar=Game.displayStore.getSprite("snowball-wars/bar-cube"),r.healthBarScale=Game.displayStore.getSprite("snowball-wars/bar-cube"),r.healthBarHolder=Game.displayStore.getContainer("snowball-wars/health-bar-holder"),r.enemyIdle=!1,r.runningLegs.play(),r.runningLegs.animationSpeed=.25,r.healthBarBacking=Game.displayStore.getSprite("snowball-wars/health-bar-back"),r.healthBarHighlight=Game.displayStore.getSprite("snowball-wars/bar-cube"),r.boundingBox=Game.displayStore.getSprite("snowball-wars/bounding-box-enemy"),r.healthBarBacking.position.x=0-r.healthBarBacking.width/2,r.healthBarBacking.position.y=0-r.healthBarBacking.height/2,r.healthBarHolder.addChild(r.healthBarBacking),r.healthBarHolder.addChild(r.healthBarScale),r.healthBarHolder.addChild(r.healthBar),r.healthBarHolder.addChild(r.healthBarHighlight),r.mainScene.healthUILayer.addChild(r.healthBarHolder),r.healthBarHolder.visible=!1,r.enemyID=a,r.mainScene.mainDisplayOrder.push({objectType:"enemy",object:r.enemyContainer,objectID:r.enemyID,yPosition:r.enemyContainer.position.y}),r.enemyContainer.position.x=-1e3,r.enemyContainer.position.y=-1e3,r.enemySnowDeath.position.x=r.runningLegs.position.x-5,r.enemySnowDeath.position.y=r.runningLegs.position.y+5,r.enemySnowDeathEyes.position.x=r.enemyBody.position.x,r.enemySnowDeathBlink.position.x=r.enemyBody.position.x,r.enemySnowDeathEyes.position.y=r.enemySnowDeath.y-100,r.enemySnowDeathBlink.position.y=r.enemySnowDeath.y-100,r.enemyBoundingBox={topX:0,topY:0,bottomX:0,bottomY:0,width:0,height:0},r.enemyPotentialBoundingBox={topX:0,topY:0,bottomX:0,bottomY:0,width:0,height:0},r.startingHeight=r.enemyContainer.height,r}return __extends(t,e),t.prototype.removeFromStage=function(){if(0==Game.isLowEndIPad){this.enemyHair&&(this.enemyHair.visible=!1),this.enemyGunArm.visible=!1;for(var e=0;e<this.footMarkArray.length;e++)this.footMarkArray[e].sprite.visible=!1}this.enemySnowDeath.visible=!1,this.enemySnowDeathEyes.visible=!1,this.enemySnowDeathBlink.visible=!1},t.prototype.spawn=function(e){0==Game.isLowEndIPad?(this.enemyHead.visible=!0,this.gunBack.visible=!0,this.snowGun.visible=!0,this.runningLegs.visible=!1,this.idleBackLeg.visible=!0,this.idleFrontLeg.visible=!0,this.enemyShadow.visible=!0,this.enemyGunArm.visible=!0,this.gunBackPanelHolder.position.x=this.gunBack.position.x,this.gunBackPanelHolder.position.y=this.gunBack.position.y,this.gunBackPanelHolder.rotation=this.gunBack.rotation,this.hasSkirt&&(this.enemySkirt.visible=!0),"lori"!=this.name&&"leni"!=this.name||(this.enemyHair.visible=!0),this.gunBackPanelHolder.visible=!0,"lori"!=this.name&&"leni"!=this.name||(this.enemyHair.position.y=this.enemyHead.position.y-8,this.enemyHair.rotation=this.enemyHead.rotation)):this.idleLowLegs.visible=!0,this.enemyBody.visible=!0,this.enemySnowDeath.visible=!1,this.enemySnowDeathEyes.visible=!1,this.enemySnowDeathBlink.visible=!1,this.roundEndLock=!0,this.icedFrames.visible=!1,this.hitFrames.visible=!1;var t=this.arenaManager.getAvailablePosition("enemy",!1);this.enemyContainer.position.x=t.posX,this.enemyContainer.position.y=t.posY,this.healthBarHolder.position.x=this.enemyContainer.position.x,this.healthBarHolder.position.y=this.enemyContainer.position.y,this.healthBarHolder.visible=!0,this.healthBar.position.x=this.healthBarBacking.position.x+5,this.healthBarScale.position.x=this.healthBarBacking.position.x+5,this.healthBarHighlight.position.x=this.healthBar.position.x,this.healthBarHighlight.position.y=this.healthBar.position.y-3,this.deathTimer=0,this.enemyDead=!1,1==this.mainScene.debugSprites&&this.mainScene.floorLayer.addChild(this.boundingBox),this.health=3,this.maxHealth=3,this.aiStatus="neutral",this.isAggressive=!1,this.withinFireRange=!1,this.isAtTagret=!1,this.hasTargetCoord=!1,this.fireDelay=0,this.fireDelayLimit=80,this.canFire=!0,this.runChance=.2,this.healthBar.tint=458496,this.healthBarHighlight.tint=16777215,this.healthBarScale.tint=9764864,this.healthBarHighlight.alpha=.6,this.healthBarWidth=100,this.healthBar.width=this.healthBarWidth,this.healthBarScale.width=this.healthBarWidth,this.healthBar.height=10,this.healthBarScale.height=10,this.healthBarHighlight.height=4,this.targetBarWidth=this.healthBarWidth,this.healthBar.visible=!0,this.healthBarHighlight.visible=!0,this.healthBarScale.visible=!0,this.healthBarBacking.visible=!0,this.hitFrames.scale.x=this.hitFrames.scale.y=2.7,this.healthBarHolder.scale.x=this.healthBarHolder.scale.y=this.healthBarHolder.alpha=0,this.enemyHit=!1,this.ammo=10,this.xVelocity=0,this.yVelocity=0,this.xVelocityTarget=0,this.yVelocityTarget=0,this.maximumSpeed=4,this.enemyHitTimer=0,this.enemyHitLimit=60,this.trackingTimer=0,this.trackingTimerLimit=300,this.mainScene.orderingContainer.addChild(this.enemyContainer),this.setBoundingBox()},t.prototype.placeFootMark=function(){if(this.footMarkTick++,++this.footsoundTick>5&&(this.footsoundTick=0),this.footMarkTick>10){this.footMarkTick=0;for(var e=0;e<this.footMarkArray.length;e++)if(0==this.footMarkArray[e].active){this.footMarkArray[e].sprite.visible=!0,this.footMarkArray[e].active=!0,this.footMarkArray[e].sprite.position.x=this.enemyContainer.position.x+this.enemyContainer.width/2,this.footMarkArray[e].sprite.position.y=this.enemyContainer.position.y-10,this.footMarkArray[e].sprite.alpha=1,this.footMarkArray[e].sprite.scale.x=this.footMarkArray[e].sprite.scale.y=2;break}}},t.prototype.getPlayerPosition=function(){return{x:this.enemyContainer.position.x,y:this.enemyContainer.position.y}},t.prototype.changeVelocity=function(e){switch(e){case"left":this.xVelocityTarget=-this.maximumSpeed;break;case"right":this.xVelocityTarget=this.maximumSpeed;break;case"up":this.yVelocityTarget=-this.maximumSpeed;break;case"down":this.yVelocityTarget=this.maximumSpeed;break;case"yRelease":this.yVelocityTarget=0;break;case"xRelease":this.xVelocityTarget=0}},t.prototype.changeHealth=function(e){if(this.mainScene.happyLinc(),e>0);else{if(Game.playSound("snowball-wars/ice-impact.mp3"),this.health+=e,this.hitFrames.gotoAndPlay(0),this.hitFrames.visible=!0,this.hitFrames.position.y=-50,this.hitFrames.position.x=20,0==Game.isLowEndIPad&&(this.changeExpression(1),this.enemyContainer.position.x+=10,this.enemyHead.rotation+=.2,this.mainScene.shakeContainer()),0==this.soundActive){this.soundActive=!0;var t=[{id:"snowball-wars/"+this.name+"-negative.mp3"},{id:"snowball-wars/"+this.name+"-negative.mp3"},{id:"snowball-wars/"+this.name+"-negative-2.mp3"},{id:"snowball-wars/"+this.name+"-negative-2.mp3"},{id:"snowball-wars/linc-awesome.mp3"},{id:"snowball-wars/linc-yes.mp3"},{id:"snowball-wars/linc-yes-2.mp3"},{id:"snowball-wars/linc-woohoo.mp3"}],i=Game.getRandom(0,7,!0);t[i]&&Game.playSound(t[i].id,t[i].vol||.5)}switch(this.health){case 3:this.healthBar.tint=458496,this.runChance=.2;break;case 2:this.healthBar.tint=16753152,this.runChance=.4;break;case 1:this.healthBar.tint=16713479,this.runChance=.6}this.healthBarWidth=this.health/this.maxHealth*100,this.targetBarWidth=this.healthBarWidth}},t.prototype.handleCollision=function(e){switch(e){case"snowball":this.changeHealth(-1),this.enemyHit=!0;break;case"ammo":this.collectAmmo(10);break;case"wall":this.xVelocity=0,this.yVelocity=0,this.isAtTagret=!1,this.hasTargetCoord=!1}},t.prototype.getRoundSettings=function(e){switch(e){case 1:this.triggerDelayLimit=60;break;case 2:this.triggerDelayLimit=50;break;case 3:this.triggerDelayLimit=40;break;case 4:this.triggerDelayLimit=30;break;case 5:this.triggerDelayLimit=10}},t.prototype.newRoundCall=function(){this.icedFrames.stop(),this.getRoundSettings(this.mainScene.difficultyCounter)},t.prototype.enemyHappy=function(){if(0==Game.isLowEndIPad&&this.changeExpression(2),0==this.soundActive){this.soundActive=!0;var e=[{id:"snowball-wars/"+this.name+"-positive.mp3"},{id:"snowball-wars/"+this.name+"-positive.mp3"},{id:"snowball-wars/"+this.name+"-positive-2.mp3"},{id:"snowball-wars/"+this.name+"-positive-2.mp3"},{id:"snowball-wars/linc-so-close.mp3"},{id:"snowball-wars/linc-this-is-bad.mp3"},{id:"snowball-wars/linc-grrr.mp3"},{id:"snowball-wars/linc-dang-it.mp3"},{id:"snowball-wars/linc-i-wont-give-up.mp3"},{id:"snowball-wars/linc-cut-it-out.mp3"}],t=Game.getRandom(0,9,!0);e[t]&&Game.playSound(e[t].id,e[t].vol||.5)}},t.prototype.enemyFire=function(){if(0!=this.canFire&&this.ammo>0){this.canFire=!1,this.fireDelay=0,this.mainScene.fireSnowBall("enemy",this.enemyContainer.position.x-(this.enemyContainer.width/2+20),this.enemyContainer.position.y,this.name),this.ammo--,this.aiManager.enemyPlayersArray[this.enemyID].ammo--;for(var e=0;e<this.backPanelArray.length;e++)if(this.backPanelArray[e].number==this.ammo?this.backPanelArray[e].panel.visible=!0:this.backPanelArray[e].panel.visible=!1,this.ammo>=10){this.backPanelArray[10].panel.visible=!0;break}0==Game.isLowEndIPad&&(this.snowGun.position.x+=15,this.gunBack.position.x+=3,this.gunBack.position.y+=2,this.gunBack.rotation=.1,this.enemyBody.rotation=.2,this.enemyHead.rotation=.05,this.enemyGunArm.rotation=.6,this.enemyGunArm.position.x+=4);var t=[{id:"snowball-wars/snowball-pop-1.mp3"},{id:"snowball-wars/snowball-pop-2.mp3"},{id:"snowball-wars/snowball-pop-3.mp3"}],i=Game.getRandom(0,2,!0);t[i]&&Game.playSound(t[i].id,t[i].vol||.2),this.ammo<8&&(this.aiStatus="seeking")}},t.prototype.collisionChecking=function(){var e=this.mainScene.checkForCollisions("enemy",this.enemyID,this.enemyPotentialBoundingBox);1==e.collisionResult?this.handleCollision(e.collidedWith):(this.enemyContainer.position.x+=this.xVelocity,this.enemyContainer.position.y+=this.yVelocity)},t.prototype.moveEnemy=function(){0==Game.isLowEndIPad&&(this.gunBackPanelHolder.position.x=this.gunBack.position.x,this.gunBackPanelHolder.position.y=this.gunBack.position.y,this.gunBackPanelHolder.rotation=this.gunBack.rotation),this.healthBarHolder.scale.x<1&&(this.healthBarHolder.scale.x+=.1,this.healthBarHolder.scale.y+=.1,this.healthBarHolder.alpha+=.1);this.enemyContainer.width;var e=this.enemyContainer.position.x,t=this.enemyContainer.position.y,i=e+=this.xVelocity,s=t+=this.yVelocity;this.setPotentialBoundingBox(i,s),this.collisionChecking(),++this.rangeCheck<30&&(this.rangeCheck=0,e>this.targetCoord.posX&&this.changeVelocity("left"),e<this.targetCoord.posX&&this.changeVelocity("right"),t>this.targetCoord.posY&&this.changeVelocity("up"),t<this.targetCoord.posY&&this.changeVelocity("down"),1==this.hasTargetCoord&&this.checkRangeToTarget())},t.prototype.setPotentialBoundingBox=function(e,t){this.enemyPotentialBoundingBox.topX=this.enemyContainer.position.x+this.runningLegs.position.x-20,this.enemyPotentialBoundingBox.topY=t-15,this.enemyPotentialBoundingBox.bottomX=this.enemyContainer.position.x+this.runningLegs.position.x+20,this.enemyPotentialBoundingBox.bottomY=t+15,this.enemyPotentialBoundingBox.width=this.boundingBox.width,this.enemyPotentialBoundingBox.height=this.boundingBox.height,this.boundingBox.position.x=this.enemyPotentialBoundingBox.topX-this.boundingBox.width/2,this.boundingBox.position.y=this.enemyPotentialBoundingBox.topY},t.prototype.setBoundingBox=function(){this.enemyBoundingBox.topX=this.enemyContainer.position.x+this.runningLegs.position.x-20,this.enemyBoundingBox.topY=this.enemyContainer.position.y-15,this.enemyBoundingBox.bottomX=this.enemyContainer.position.x+this.runningLegs.position.x+20,this.enemyBoundingBox.bottomY=this.enemyContainer.position.y+15,this.boundingBox.width=this.enemyBoundingBox.bottomX-this.enemyBoundingBox.topX,this.boundingBox.height=Math.abs(this.enemyBoundingBox.topY-this.enemyBoundingBox.bottomY),this.boundingBox.position.x=this.enemyBoundingBox.topX-this.boundingBox.width/2,this.boundingBox.position.y=this.enemyBoundingBox.topY,this.enemyBoundingBox.width=this.boundingBox.width,this.enemyBoundingBox.height=this.boundingBox.height},t.prototype.collectAmmo=function(e){this.ammo+=e;for(var t=0;t<this.backPanelArray.length;t++)if(this.backPanelArray[t].number==this.ammo?this.backPanelArray[t].panel.visible=!0:this.backPanelArray[t].panel.visible=!1,this.ammo>=10){this.backPanelArray[10].panel.visible=!0;break}},t.prototype.getTargetPosition=function(){this.mainScene.getPlayerPosition()},t.prototype.checkRangeToTarget=function(){var e=!1,t=!1;if(Math.abs(this.enemyContainer.position.x-this.targetCoord.posX)<10&&(e=!0),Math.abs(this.enemyContainer.position.y-this.targetCoord.posY)<10&&(t=!0),e&&t){if(1==this.isAggressive)return;this.isAtTagret=!0,this.hasTargetCoord=!1,1==Game.getRandom(0,1,!0)?(this.isIdle=!0,this.idleTimerLimit=Game.getRandom(60,200),this.aiStatus="idle",this.isAggressive&&(this.isAggressive=!1,this.aiManager.aggroPlayers--)):this.checkRunningChance()}},t.prototype.killEnemy=function(){this.enemySnowDeath.visible=!0,this.enemySnowDeathEyes.visible=!0,Game.playSound("snowball-wars/snow-land.mp3"),0==Game.isLowEndIPad?(this.enemyHead.visible=!1,this.enemyBody.visible=!1,this.gunBack.visible=!1,this.snowGun.visible=!1,this.idleBackLeg.visible=!1,this.idleFrontLeg.visible=!1,this.enemyShadow.visible=!1,this.hasSkirt&&(this.enemySkirt.visible=!1),"lori"!=this.name&&"leni"!=this.name||(this.enemyHair.visible=!1)):(this.enemyBody.visible=!1,this.idleLowLegs.visible=!1),this.runningLegs.visible=!1,this.gunBackPanelHolder.visible=!1;var e=[{id:"snowball-wars/ice-crack-1.mp3"},{id:"snowball-wars/ice-crack-2.mp3"},{id:"snowball-wars/ice-crack-3.mp3"},{id:"snowball-wars/ice-crack-4.mp3"}],t=Game.getRandom(0,3,!0);e[t]&&Game.playSound(e[t].id,e[t].vol||.5)},t.prototype.playIcedFrames=function(){this.icedFrames.position.y=-65,this.icedFrames.position.x=60,this.icedFrames.scale.x=this.icedFrames.scale.y=2.5,this.icedFrames.visible=!0,this.icedFrames.gotoAndPlay(1)},t.prototype.changeExpression=function(e){for(var t=0;t<this.currentExpression.length;t++)t!=e&&(this.currentExpression[t].active=!1,this.currentExpression[t].sprite.visible=!1);this.currentExpression[e].active=!0,this.currentExpression[e].sprite.visible=!0,0!=e&&(this.expressionTimerActive=!0)},t.prototype.tick=function(){if(1!=this.roundEndLock){if(this.healthBarHolder.position.x=this.boundingBox.position.x+this.boundingBox.width/2,this.healthBarHolder.position.y=this.enemyContainer.position.y-this.healthBarOffset,0==Game.isLowEndIPad){1==this.expressionTimerActive&&++this.expressionTimer>120&&(this.expressionTimerActive=!1,this.changeExpression(0),this.expressionTimer=0,this.soundActive=!1),"lucy"!=this.name&&++this.blinkTimer>=this.blinkTimerLimit&&(this.enemyEyelids.visible=!0,this.health<=0&&(this.enemySnowDeathBlink.visible=!0),this.blinkTimer>=this.blinkTimerLimit+15&&(this.blinkTimer=0,this.blinkTimerLimit=Game.getRandom(60,200),this.enemyEyelids.visible=!1,this.health<=0&&(this.enemySnowDeathBlink.visible=!1))),this.enemyContainer.scale.y>.94&&(this.enemyIdle=!1),this.enemyContainer.scale.y<.93&&(this.enemyIdle=!0),1==this.enemyIdle&&(this.enemyContainer.scale.y=this.mainScene.simpleEase(this.enemyContainer.scale.y,.95,30)),0==this.enemyIdle&&(this.enemyContainer.scale.y=this.mainScene.simpleEase(this.enemyContainer.scale.y,.92,30)),(this.fireDelay>5||1==this.canFire)&&(this.snowGun.position.x=this.mainScene.simpleEase(this.snowGun.position.x,this.startingGunX,5),this.gunBack.position.x=this.mainScene.simpleEase(this.gunBack.position.x,this.startingGunBackX,5),this.enemyGunArm.position.x=this.mainScene.simpleEase(this.enemyGunArm.position.x,this.startingFrontArmPositionX,5),this.gunBack.position.y=this.mainScene.simpleEase(this.gunBack.position.y,this.startingGunBackY,5),this.gunBack.rotation=this.mainScene.simpleEase(this.gunBack.rotation,0,5),this.enemyBody.rotation=this.mainScene.simpleEase(this.enemyBody.rotation,0,5),this.snowGun.rotation=this.mainScene.simpleEase(this.snowGun.rotation,0,5),this.enemyGunArm.rotation=this.mainScene.simpleEase(this.enemyGunArm.rotation,0,5),this.enemyHead.rotation=this.mainScene.simpleEase(this.enemyHead.rotation,0,5)),this.fireDelay<5&&0==this.canFire&&(this.snowGun.rotation=this.mainScene.simpleEase(this.snowGun.rotation,.3,5)),(Math.abs(this.yVelocity)>.5||Math.abs(this.xVelocity)>.5)&&this.placeFootMark();for(var e=0;e<this.footMarkArray.length;e++)1==this.footMarkArray[e].active&&(this.footMarkArray[e].sprite.alpha-=.01,this.footMarkArray[e].sprite.alpha<=0&&(this.footMarkArray[e].active=!1));Math.abs(this.xVelocity)>2||Math.abs(this.yVelocity)>2?(this.health>0&&(this.idleBackLeg.visible=!1,this.idleFrontLeg.visible=!1,this.runningLegs.visible=!0,this.hasSkirt&&(this.enemySkirt.visible=!1)),0==Game.isLowEndIPad?(this.enemyHead.position.y>this.startingHeadY+6&&(this.runningBounceDown=!1),this.enemyHead.position.y<this.startingHeadY+2&&(this.runningBounceDown=!0),1==this.runningBounceDown&&(this.enemyHead.position.y=this.mainScene.simpleEase(this.enemyHead.position.y,this.startingHeadY+8,10),this.enemyGunArm.position.y=this.mainScene.simpleEase(this.enemyGunArm.position.y,this.startingFrontArmPositionY,10),this.snowGun.position.y=this.mainScene.simpleEase(this.snowGun.position.y,this.startingGunY,10),this.gunBack.position.y=this.mainScene.simpleEase(this.gunBack.position.y,this.startingGunBackY,10),this.enemyShadow.scale.x=this.mainScene.simpleEase(this.enemyShadow.scale.x,1.1,15),this.enemyHead.rotation=this.mainScene.simpleEase(this.enemyHead.rotation,-.05,30),this.snowGun.rotation=this.mainScene.simpleEase(this.snowGun.rotation,-.08,5),this.enemyGunArm.rotation=this.mainScene.simpleEase(this.enemyGunArm.rotation,.2,5),this.gunBack.rotation=this.mainScene.simpleEase(this.gunBack.rotation,.08,5),this.enemyBody.rotation=this.mainScene.simpleEase(this.enemyBody.rotation,-.1,30)),0==this.runningBounceDown&&(this.enemyHead.position.y=this.mainScene.simpleEase(this.enemyHead.position.y,this.startingHeadY,10),this.enemyGunArm.position.y=this.mainScene.simpleEase(this.enemyGunArm.position.y,this.startingFrontArmPositionY,10),this.snowGun.position.y=this.mainScene.simpleEase(this.snowGun.position.y,this.startingGunY,10),this.gunBack.position.y=this.mainScene.simpleEase(this.gunBack.position.y,this.startingGunBackY,10),this.gunBack.rotation=this.mainScene.simpleEase(this.gunBack.rotation,-.08,5),this.enemyBody.rotation=this.mainScene.simpleEase(this.enemyBody.rotation,.1,30),this.enemyHead.rotation=this.mainScene.simpleEase(this.enemyHead.rotation,.05,30),this.snowGun.rotation=this.mainScene.simpleEase(this.snowGun.rotation,.08,5),this.enemyGunArm.rotation=this.mainScene.simpleEase(this.enemyGunArm.rotation,0,5)),"lori"!=this.name&&"leni"!=this.name||(this.enemyHair.position.y=this.enemyHead.position.y-8,this.enemyHair.rotation=this.enemyHead.rotation)):this.health>0&&(this.idleBackLeg.visible=!0,this.idleFrontLeg.visible=!0,this.runningLegs.visible=!1,this.hasSkirt&&(this.enemySkirt.visible=!0))):this.health>0&&(this.idleBackLeg.visible=!0,this.idleFrontLeg.visible=!0,this.runningLegs.visible=!1,this.hasSkirt&&(this.enemySkirt.visible=!0))}else Math.abs(this.xVelocity)>2||Math.abs(this.yVelocity)>2?this.health>0&&(this.idleLowLegs.visible=!1,this.runningLegs.visible=!0):this.health>0&&(this.idleLowLegs.visible=!0,this.runningLegs.visible=!1);this.health<=0&&0==this.enemyDead&&(1==this.deathTimer&&this.playIcedFrames(),10==++this.deathTimer&&this.killEnemy(),this.deathTimer>0&&this.healthBarHolder.scale.x>=0&&(this.healthBarHolder.scale.x-=.1,this.healthBarHolder.scale.y-=.1,this.healthBarHolder.alpha-=.1),this.deathTimer>=120&&(this.enemyDead=!0,this.aiManager.activeSisters--,this.healthBarBacking.visible=!1,this.healthBar.visible=!1,this.healthBarScale.visible=!1,this.aiManager.makeSisterInactive(this.name))),this.xVelocity=this.mainScene.simpleEase(this.xVelocity,this.xVelocityTarget,30),this.yVelocity=this.mainScene.simpleEase(this.yVelocity,this.yVelocityTarget,30),this.health>0&&(this.aiLogic(),this.moveEnemy()),this.healthBarScale.width=this.mainScene.simpleEase(this.healthBarScale.width,this.targetBarWidth,20),this.healthBar.width=this.targetBarWidth,this.healthBarHighlight.width=this.targetBarWidth,1==this.isIdle&&++this.idleTimer>=this.idleTimerLimit&&(this.isIdle=!1,this.idleTimer=0,this.hasTargetCoord=!1,this.isAtTagret=!1,this.checkRunningChance()),0==this.canFire&&++this.fireDelay>=this.fireDelayLimit&&(this.canFire=!0,this.fireDelay=0),1==this.enemyHit&&++this.enemyHitTimer>this.enemyHitLimit&&(this.enemyHitTimer=0,this.enemyHit=!1)}},t.prototype.shouldEnemyFire=function(){var e;this.mainScene.getPlayerPosition();return e=!1,this.isAggressive?(1,e=!0):Game.getRandom(0,1)>.3&&(e=!0),e},t.prototype.endRoundReset=function(){this.roundEndLock=!0},t.prototype.roundUnlock=function(){this.roundEndLock=!1},t.prototype.aiLogic=function(){var e=this.mainScene.getPlayerPosition(),t=this.mainScene.arenaBounds;Math.abs(this.enemyContainer.position.y-e.y)<this.shootingRange?this.ammo>0&&1==this.canFire&&this.shouldEnemyFire&&(this.playerSpotted=!0):(this.playerSpotted=!1,this.triggerDelay=0),1==this.playerSpotted&&++this.triggerDelay>=this.triggerDelayLimit&&(this.enemyFire(),this.canFire=!1);var i=[1,3,4,5],s=[3,4,5,7];switch(this.aiStatus){case"running":if(0==this.hasTargetCoord)if(this.isAggressive&&(this.isAggressive=!1,this.aiManager.aggroPlayers--),this.isAtTagret=!1,e.y>t.playArenaMaxY/2){var o=i[Game.getRandom(0,i.length-1,!0)],a=this.arenaManager.getArenaPosition(o);this.targetCoord={posX:a.posX,posY:a.posY+Game.getRandom(-100,100)},this.hasTargetCoord=!0}else{var r=s[Game.getRandom(0,i.length-1,!0)],a=this.arenaManager.getArenaPosition(r);this.targetCoord={posX:a.posX,posY:a.posY+Game.getRandom(-100,100)},this.hasTargetCoord=!0}break;case"neutral":if(0==this.hasTargetCoord){this.isAggressive&&(this.isAggressive=!1,this.aiManager.aggroPlayers--),this.isAtTagret=!1;var n=i[Game.getRandom(0,i.length-1,!0)],a=this.arenaManager.getArenaPosition(n);this.targetCoord={posX:a.posX,posY:a.posY+Game.getRandom(-100,100)},this.hasTargetCoord=!0}break;case"seeking":var h=this.aiManager.getAmmoPosition();if(0==h.available||this.ammo>5)return this.checkRunningChance(),void(this.hasTargetCoord=!1);this.isAtTagret=!1,this.targetCoord={posX:h.posX,posY:h.posY},this.hasTargetCoord=!0;break;case"tracking":var l=this.mainScene.getPlayerPosition();if(0==this.isAggressive&&(this.isAggressive=!0,this.isAtTagret=!1,this.hasTargetCoord=!1),++this.trackingTimer>this.trackingTimerLimit){this.trackingTimer=0,this.checkRunningChance(),this.isAggressive=!1,this.aiManager.aggroPlayers--,this.isAtTagret=!1,this.hasTargetCoord=!1;break}0==this.hasTargetCoord&&(this.isAtTagret=!1,this.targetCoord={posX:Game.getRandom(t.playArenaMaxX/2,t.playArenaMaxX-this.enemyContainer.width),posY:l.y},this.hasTargetCoord=!0),this.targetCoord={posX:Game.getRandom(t.playArenaMaxX/2,t.playArenaMaxX-this.enemyContainer.width),posY:l.y}}},t.prototype.checkRunningChance=function(){Game.getRandom(0,1)<=this.runChance?this.aiStatus="running":this.aiStatus="neutral"},t.prototype.pause=function(){this.runningLegs.stop()},t.prototype.resume=function(){this.runningLegs.play()},t.prototype.destroy=function(){if(console.log("destroy the enemy!!!!"),Game.displayStore.returnPooledItem(this.enemyShadow),Game.displayStore.returnPooledItem(this.enemySnowDeath),Game.displayStore.returnPooledItem(this.enemySnowDeathEyes),Game.displayStore.returnPooledItem(this.enemySnowDeathBlink),this.healthBarHolder.removeAllChildren(),Game.displayStore.returnPooledItem(this.healthBar),Game.displayStore.returnPooledItem(this.healthBarScale),Game.displayStore.returnPooledItem(this.healthBarBacking),Game.displayStore.returnPooledItem(this.healthBarHolder),Game.displayStore.returnPooledItem(this.healthBarHighlight),Game.displayStore.returnPooledItem(this.boundingBox),Game.displayStore.returnPooledItem(this.icedFrames),Game.displayStore.returnPooledItem(this.hitFrames),0==Game.isLowEndIPad)for(var e=0;e<this.footMarkArray.length;e++)Game.displayStore.returnPooledItem(this.footMarkArray[e].sprite);Game.displayStore.returnPooledItem(this.gunBackPanelHolder);for(var t=0;t<this.backPanelArray.length;t++)Game.displayStore.returnPooledItem(this.backPanelArray[t].panel)},t}(SnowballWarsCharacterBase),SnowballWarsArenaManager=function(){function e(e,t){this.scene=e,this.arenaBounds=t,this.boundHeight=30,this.boundWidth=30,this.topBoundSprite=Game.displayStore.getSprite("snowball-wars/bounding-box"),this.bottomBoundSprite=Game.displayStore.getSprite("snowball-wars/bounding-box"),this.leftBoundSprite=Game.displayStore.getSprite("snowball-wars/bounding-box"),this.rightBoundSprite=Game.displayStore.getSprite("snowball-wars/bounding-box"),this.centerLeftBoundSprite=Game.displayStore.getSprite("snowball-wars/bounding-box"),this.centerRightBoundSprite=Game.displayStore.getSprite("snowball-wars/bounding-box"),this.playerObjectPositions=new Array,this.enemyObjectPositions=new Array,this.createBounds(),this.createPositions()}return e.prototype.createBounds=function(){this.arenaHeight=this.arenaBounds.playArenaMaxY-this.arenaBounds.playArenaMinY,this.arenaWidth=this.arenaBounds.playArenaMaxX-this.arenaBounds.playArenaMinX,this.topBound={topX:this.arenaBounds.playArenaMinX,topY:this.arenaBounds.playArenaMinY-this.boundHeight,width:this.arenaBounds.playArenaMaxX-this.arenaBounds.playArenaMinX,height:this.boundHeight},this.bottomBound={topX:this.arenaBounds.playArenaMinX,topY:this.arenaBounds.playArenaMaxY,width:this.arenaBounds.playArenaMaxX-this.arenaBounds.playArenaMinX,height:this.boundHeight},this.leftBound={topX:this.arenaBounds.playArenaMinX-this.boundWidth,topY:this.arenaBounds.playArenaMinY,width:this.boundWidth,height:this.arenaBounds.playArenaMaxY-this.arenaBounds.playArenaMinY},this.rightBound={topX:this.arenaBounds.playArenaMaxX,topY:this.arenaBounds.playArenaMinY,width:this.boundWidth,height:this.arenaBounds.playArenaMaxY-this.arenaBounds.playArenaMinY},this.centerRightBound={topX:this.arenaBounds.playArenaMinX+this.arenaWidth/2,topY:this.arenaBounds.playArenaMinY,width:this.boundWidth,height:this.arenaBounds.playArenaMaxY-this.arenaBounds.playArenaMinY},this.centerLeftBound={topX:this.arenaBounds.playArenaMaxX/2-this.boundWidth,topY:this.arenaBounds.playArenaMinY,width:this.boundWidth,height:this.arenaBounds.playArenaMaxY-this.arenaBounds.playArenaMinY},this.rowHeight=this.arenaHeight/3,this.topBoundSprite.position.x=this.topBound.topX,this.topBoundSprite.position.y=this.topBound.topY,this.topBoundSprite.width=this.topBound.width,this.topBoundSprite.height=this.topBound.height,this.bottomBoundSprite.position.x=this.bottomBound.topX,this.bottomBoundSprite.position.y=this.bottomBound.topY,this.bottomBoundSprite.width=this.bottomBound.width,this.bottomBoundSprite.height=this.bottomBound.height,this.leftBoundSprite.position.x=this.leftBound.topX,this.leftBoundSprite.position.y=this.leftBound.topY,this.leftBoundSprite.width=this.leftBound.width,this.leftBoundSprite.height=this.leftBound.height,this.rightBoundSprite.position.x=this.rightBound.topX,this.rightBoundSprite.position.y=this.rightBound.topY,this.rightBoundSprite.width=this.rightBound.width,this.rightBoundSprite.height=this.rightBound.height,this.centerRightBoundSprite.position.x=this.centerRightBound.topX,this.centerRightBoundSprite.position.y=this.centerRightBound.topY,this.centerRightBoundSprite.width=this.centerRightBound.width,this.centerRightBoundSprite.height=this.centerRightBound.height},e.prototype.makeSlotAvailable=function(e,t){if("player"==e)i=this.playerObjectPositions;else var i=this.enemyObjectPositions;for(var s=0;s<i.length;s++)t==i[s].id&&(i[s].active=!1)},e.prototype.getAvailablePosition=function(e,t){var i;if(i=new Array,i.length=0,"player"!=e){var s=[1,3,4,5,7];return(o=this.enemyObjectPositions)[s[Game.getRandom(0,s.length-1,!0)]]}for(var o=this.playerObjectPositions,a=0;a<o.length;a++)0==o[a].active&&i.push({index:a});if(0!=i.length){var r=i[Game.getRandom(0,i.length-1,!0)].index;return o[r].active=0!=t,o[r]}console.log("none")},e.prototype.getArenaPosition=function(e){return this.enemyObjectPositions[e]},e.prototype.createPositions=function(){for(var e=this.rowHeight/2,t=(this.arenaWidth/2-60)/3,i=0,s=0,o=0;o<3;o++)for(a=0;a<3;a++)this.playerObjectPositions.push({active:!1,posX:this.arenaBounds.playArenaMinX+t*(a+1),posY:this.arenaBounds.playArenaMinY+o*this.rowHeight+e,id:i}),i++;for(o=0;o<3;o++)for(var a=0;a<3;a++)this.enemyObjectPositions.push({active:!1,posX:this.arenaBounds.playArenaMaxX/2+t*a+80,posY:this.arenaBounds.playArenaMinY+o*this.rowHeight+e,id:s}),s++},e.prototype.getArenaChunk=function(e,t){return t<this.arenaBounds.playArenaMinY+this.arenaHeight/3?e<this.arenaBounds.playArenaMaxX/2?1:4:t>this.arenaBounds.playArenaMinY+this.arenaHeight/3&&t<this.arenaBounds.playArenaMinY+this.arenaHeight/3*2?e<this.arenaBounds.playArenaMaxX/2?2:5:e<this.arenaBounds.playArenaMaxX/2?3:6},e.prototype.arenaBoundCheck=function(e,t){var i={collisionResult:!1,collidedWith:"none"};switch(t){case"top":if(e.topX<this.topBound.topX+this.topBound.width&&e.topX+e.width>this.topBound.topX&&e.topY<this.topBound.topY+this.boundHeight&&e.topY+e.height>this.topBound.topY)return i={collisionResult:!0,collidedWith:"wall"};if(e.topX<this.leftBound.topX+this.leftBound.width&&e.topX+e.width>this.leftBound.topX&&e.topY<this.leftBound.topY+this.leftBound.height&&e.topY+e.height>this.leftBound.topY)return i={collisionResult:!0,collidedWith:"wall"};if(e.topX<this.centerRightBound.topX+this.centerRightBound.width&&e.topX+e.width>this.centerRightBound.topX&&e.topY<this.centerRightBound.topY+this.centerRightBound.height&&e.topY+e.height>this.centerRightBound.topY)return i={collisionResult:!0,collidedWith:"wall"};break;case"middle":if(e.topX<this.leftBound.topX+this.leftBound.width&&e.topX+e.width>this.leftBound.topX&&e.topY<this.leftBound.topY+this.leftBound.height&&e.topY+e.height>this.leftBound.topY)return i={collisionResult:!0,collidedWith:"wall"};if(e.topX<this.centerRightBound.topX+this.centerRightBound.width&&e.topX+e.width>this.centerRightBound.topX&&e.topY<this.centerRightBound.topY+this.centerRightBound.height&&e.topY+e.height>this.centerRightBound.topY)return i={collisionResult:!0,collidedWith:"wall"};break;case"bottom":if(e.topX<this.bottomBound.topX+this.bottomBound.width&&e.topX+e.width>this.bottomBound.topX&&e.topY<this.bottomBound.topY+this.boundHeight&&e.topY+e.height>this.bottomBound.topY)return i={collisionResult:!0,collidedWith:"wall"};if(e.topX<this.leftBound.topX+this.leftBound.width&&e.topX+e.width>this.leftBound.topX&&e.topY<this.leftBound.topY+this.leftBound.height&&e.topY+e.height>this.leftBound.topY)return i={collisionResult:!0,collidedWith:"wall"};if(e.topX<this.centerRightBound.topX+this.centerRightBound.width&&e.topX+e.width>this.centerRightBound.topX&&e.topY<this.centerRightBound.topY+this.centerRightBound.height&&e.topY+e.height>this.centerRightBound.topY)return i={collisionResult:!0,collidedWith:"wall"}}return i},e.prototype.checkCollisions=function(e,t,i){if("snowball"==e)return{collisionResult:!1,collidedWith:"none"};var s={collisionResult:!1,collidedWith:"none"},o=i.topY,a=i.topX,r=this.getArenaChunk(a,o);switch(r){case 1:if((s=this.scene.checkSnowballCollision(e,r,i)).collisionResult)return s;if((s=this.scene.checkAmmoCollision(e,t,r,i)).collisionResult)return s;if((s=this.arenaBoundCheck(i,"top")).collisionResult)return s;break;case 2:if((s=this.scene.checkSnowballCollision(e,r,i)).collisionResult)return s;if((s=this.scene.checkAmmoCollision(e,t,r,i)).collisionResult)return s;if(1==(s=this.arenaBoundCheck(i,"middle")).collisionResult)return s;break;case 3:if((s=this.scene.checkSnowballCollision(e,r,i)).collisionResult)return s;if((s=this.scene.checkAmmoCollision(e,t,r,i)).collisionResult)return s;if((s=this.arenaBoundCheck(i,"bottom")).collisionResult)return s;break;case 4:if((s=this.scene.checkAmmoCollision(e,t,r,i)).collisionResult)return s;if((s=this.scene.checkSnowballCollision(e,r,i)).collisionResult)return s;if((s=this.arenaBoundCheck(i,"top")).collisionResult)return s;break;case 5:if((s=this.scene.checkAmmoCollision(e,t,r,i)).collisionResult)return s;if((s=this.scene.checkSnowballCollision(e,r,i)).collisionResult)return s;if((s=this.arenaBoundCheck(i,"middle")).collisionResult)return s;break;case 6:if((s=this.scene.checkAmmoCollision(e,t,r,i)).collisionResult)return s;if((s=this.scene.checkSnowballCollision(e,r,i)).collisionResult)return s;if((s=this.arenaBoundCheck(i,"bottom")).collisionResult)return s}return s},e.prototype.tick=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.topBoundSprite),Game.displayStore.returnPooledItem(this.bottomBoundSprite),Game.displayStore.returnPooledItem(this.leftBoundSprite),Game.displayStore.returnPooledItem(this.rightBoundSprite),Game.displayStore.returnPooledItem(this.centerLeftBoundSprite),Game.displayStore.returnPooledItem(this.centerRightBoundSprite)},e}(),SnowballWarsProjectileManager=function(){function e(e){this.scene=e,this.projectileArray=new Array,this.snowballsize=25,this.snowballHeight=15,this.particleTick=0,this.collisionParticles=new Array,this.snowballSpeed=13;for(t=0;t<60;t++)this.projectileArray.push({active:!1,xPos:0,yPos:0,direction:"right",sprite:Game.displayStore.getSprite("snowball-wars/snowball"),boundingBoxSprite:Game.displayStore.getSprite("snowball-wars/bounding-box"),boundingBox:{topX:0,topY:0,width:0,height:0},arenaChunkNumber:0,ID:0,firedBy:"na"}),this.projectileArray[t].sprite.visible=!1,this.scene.mainDisplayOrder.push({objectType:"snowball",object:this.projectileArray[t].sprite,objectID:this.projectileArray[t].ID,yPosition:this.projectileArray[t].yPos}),0;if(0==Game.isLowEndIPad){this.snowTrailParticles=new Array;for(t=0;t<90;t++)this.snowTrailParticles.push({active:!1,sprite:Game.displayStore.getSprite("snowball-wars/snow-trail")}),this.snowTrailParticles[t].sprite.visible=!1,this.scene.mainContainer.addChild(this.snowTrailParticles[t].sprite);this.collisionParticles=new Array;for(var t=0;t<90;t++)this.collisionParticles.push({active:!1,sprite:Game.displayStore.getSprite("snowball-wars/collision-particle"),direction:"none",movement:1,yValue:Game.getRandom(-1,1)}),this.collisionParticles[t].sprite.visible=!1,this.scene.mainContainer.addChild(this.collisionParticles[t].sprite)}}return e.prototype.getYPosition=function(e){if(0!=this.projectileArray[e].active)return this.projectileArray[e].yPos},e.prototype.spawnSnowball=function(e,t,i,s){for(var o=0;o<this.projectileArray.length;o++){var a=this.projectileArray[o];if(0==a.active){a.sprite.visible=!0,a.active=!0,a.xPos=t,a.yPos=i-2,a.sprite.position.x=t,a.sprite.position.y=i-2,a.arenaChunkNumber=this.scene.getArenaChunkNumber(a.xPos,a.yPos),a.boundingBoxSprite.width=a.sprite.width,a.boundingBoxSprite.height=this.snowballHeight,"player"==e?(a.direction="right",a.firedBy="player",a.boundingBox={topX:a.sprite.position.x-a.sprite.width/2,topY:a.sprite.position.y-this.snowballHeight,width:20,height:this.snowballHeight}):(a.direction="left",a.firedBy=s,a.boundingBox={topX:a.sprite.position.x-a.sprite.width/2,topY:a.sprite.position.y-this.snowballHeight,width:20,height:this.snowballHeight}),this.scene.mainContainer.addChild(a.sprite),1==this.scene.debugSprites&&this.scene.floorLayer.addChild(a.boundingBoxSprite);break}}},e.prototype.checkSnowballCollision=function(e,t,i){for(var s=!1,o=0;o<this.projectileArray.length;o++){var a=this.projectileArray[o];if(1==a.active){if("enemy"==e&&"left"==a.direction)continue;if("player"==e&&"right"==a.direction)continue;if(!(i.topX<a.boundingBox.topX+this.snowballsize&&i.topX+i.width>a.boundingBox.topX))continue;i.topY<a.boundingBox.topY+this.snowballHeight&&i.topY+i.height>a.boundingBox.topY&&(s=!0,a.active=!1,a.sprite.visible=!1,this.scene.mainContainer.removeChild(a.sprite),this.fireCollision(a.direction,a.sprite.position.x,a.sprite.position.y),"player"!=a.firedBy&&"player"==e&&this.scene.enemyShotPlayer(a.firedBy))}}return{collisionResult:s,collidedWith:"snowball"}},e.prototype.fireCollision=function(e,t,i){if(1!=Game.isLowEndIPad){for(var s=0;s<10;s++)for(var o=0;o<this.collisionParticles.length;o++){var a=this.collisionParticles[o];if(0==a.active){a.active=!0,a.sprite.visible=!0,a.sprite.position.x=t+Game.getRandom(-20,-10),a.sprite.position.y=i-50+Game.getRandom(-30,30),a.sprite.rotation=Game.getRandom(0,2*Math.PI),a.sprite.alpha=1,a.direction=e,a.movement=Game.getRandom(2,3),a.sprite.scale.x=a.sprite.scale.y=Game.getRandom(1,3);break}}var r=[{id:"snowball-wars/snowball-impact-1.mp3"},{id:"snowball-wars/snowball-impact-2.mp3"},{id:"snowball-wars/snowball-impact-3.mp3"},{id:"snowball-wars/snowball-impact-4.mp3"},{id:"snowball-wars/snowball-impact-5.mp3"}],n=Game.getRandom(0,4,!0);r[n]&&Game.playSound(r[n].id,.8)}},e.prototype.tick=function(){if(0==Game.isLowEndIPad){for(i=0;i<this.collisionParticles.length;i++){var e=this.collisionParticles[i];1==e.active&&(e.sprite.position.y+=e.yValue,e.sprite.scale.x=e.sprite.scale.y-=.1,"left"==e.direction?e.sprite.position.x+=e.movement:e.sprite.position.x-=e.movement,e.sprite.alpha-=.05,e.sprite.alpha<0&&(e.active=!1))}for(var t=0;t<this.snowTrailParticles.length;t++)1==this.snowTrailParticles[t].active&&(this.snowTrailParticles[t].sprite.alpha-=.03,this.snowTrailParticles[t].sprite.scale.x=this.snowTrailParticles[t].sprite.scale.y-=.02,this.snowTrailParticles[t].sprite.position.y+=.2,this.snowTrailParticles[t].sprite.alpha<=0&&(this.snowTrailParticles[t].active=!1))}for(var i=0;i<this.projectileArray.length;i++){var s=this.projectileArray[i];if(1==s.active){if("right"==s.direction?s.xPos+=this.snowballSpeed:s.xPos-=this.snowballSpeed,s.sprite.position.x=s.xPos,s.boundingBoxSprite.position.x=s.boundingBox.topX,s.boundingBoxSprite.position.y=s.boundingBox.topY,s.boundingBox.topX=s.sprite.position.x-s.sprite.width/2,s.boundingBox.topY=s.sprite.position.y-this.snowballHeight+5,s.xPos>this.scene.arenaBounds.playArenaMaxX){s.active=!1,s.sprite.visible=!1,this.fireCollision(s.direction,s.sprite.position.x,s.sprite.position.y);break}if(s.xPos<this.scene.arenaBounds.playArenaMinX){s.active=!1,s.sprite.visible=!1,this.fireCollision(s.direction,s.sprite.position.x,s.sprite.position.y);break}}}},e.prototype.addToScene=function(e){for(var t=0;t<this.projectileArray.length;t++)e==this.projectileArray[t].ID&&this.scene.orderingContainer.addChild(this.projectileArray[t].sprite)},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){for(var e=0;e<this.projectileArray.length;e++)Game.displayStore.returnPooledItem(this.projectileArray[e].sprite),Game.displayStore.returnPooledItem(this.projectileArray[e].boundingBoxSprite);if(0==Game.isLowEndIPad){for(t=0;t<this.snowTrailParticles.length;t++)Game.displayStore.returnPooledItem(this.snowTrailParticles[t].sprite);for(var t=0;t<this.collisionParticles.length;t++)Game.displayStore.returnPooledItem(this.collisionParticles[t].sprite)}},e}(),SnowballWarsInputManager=function(){function e(e){this.scene=e,this.touchActive=!1,this.blankInput=Game.displayStore.getSprite("snowball-wars/blank-input"),this.blankInput.width=Game.stageWidth/2,this.blankInput.height=Game.stageHeight,this.blankInput.position.x=Game.stageWidth/2,this.scene.container.addChild(this.blankInput),this.setUpFireArea(this.blankInput),0==Game.onDesktop&&(this.joyAngle=0,this.joyBackground=Game.displayStore.getSprite("snowball-wars/joystick-background"),this.joyStick=Game.displayStore.getSprite("snowball-wars/joystick"),this.scene.container.addChild(this.joyBackground),this.scene.container.addChild(this.joyStick),this.joyBackground.scale.x=this.joyBackground.scale.y=1.4,this.joyStick.scale.x=this.joyStick.scale.y=1.4,this.joyBackground.position.x=10+this.joyBackground.width/2,this.joyBackground.position.y=Game.stageHeight-this.joyBackground.height/2-30,this.joyStick.position.x=this.joyBackground.position.x,this.joyStick.position.y=this.joyBackground.position.y,this.setUpHitArea(this.joyBackground))}return e.prototype.setUpFireArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;e.on("touchstart",function(e){t.scene.playerfire()}),e.on("touchend",function(e){t.scene.releaseFire()})},e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t)}),e.on("touchmove",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))})},e.prototype.buttonDown=function(e){switch(e){case"left-button":this.scene.changePlayerVelocity("left");break;case"right-button":this.scene.changePlayerVelocity("right");break;case"up-button":this.scene.changePlayerVelocity("up");break;case"down-button":this.scene.changePlayerVelocity("down");break;case"spacebar":this.scene.playerfire()}},e.prototype.buttonUp=function(e){switch(e){case"left-button":case"right-button":this.scene.changePlayerVelocity("xRelease");break;case"up-button":case"down-button":this.scene.changePlayerVelocity("yRelease");break;case"spacebar":this.scene.releaseFire()}},e.prototype.fireGun=function(e,t){this.scene.playerfire()},e.prototype.inputDown=function(e,t){this.touchActive=!0,this.touchPosition=t},e.prototype.inputUp=function(e){this.touchActive=!1},e.prototype.calculateDirection=function(){var e=this.touchPosition;e.x>this.joyBackground.position.x+this.joyBackground.width/2||e.y<this.joyBackground.position.y-this.joyBackground.height/2||(this.joyStick.position.x=e.x,this.joyStick.position.y=e.y,e.x<this.joyBackground.position.x?this.scene.changePlayerVelocity("left"):this.scene.changePlayerVelocity("right"),e.y<this.joyBackground.position.y?this.scene.changePlayerVelocity("up"):this.scene.changePlayerVelocity("down"))},e.prototype.tick=function(){0==Game.onDesktop&&(1==this.touchActive?this.calculateDirection():(this.scene.changePlayerVelocity("yRelease"),this.scene.changePlayerVelocity("xRelease"),this.joyStick.position.x=this.joyBackground.position.x,this.joyStick.position.y=this.joyBackground.position.y))},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){},e}(),WaterfallWipeoutPhysicsManager=function(){function e(e){this.physicsEnabled=!0,this.resizeRatio=1,this.HULL=Math.pow(2,9),this.HULLFLOATS=Math.pow(2,1),this.WATER=Math.pow(2,2),this.NONE=Math.pow(2,4),this.TICKET=Math.pow(2,5),this.PLAYER=Math.pow(2,6),this.SEAT=Math.pow(2,7),this.HARD=Math.pow(2,8),this.logFlumeReset=!1,this.scene=e}return e.prototype.initPhysicsWorld=function(){this.world=new p2.World({gravity:[0,-500]}),this.stepCount=0,this.logFlumeChangeInYVelocity=0,this.lastLogFlumeVelocityY=0,this.isTouchingWater=!0,this.isDrowning=!1,this.hitRampAllowed=!0,this.isTouchingSlope=!1,this.targetTorsoAngle=0,this.torsoMotorPower=2,this.targetHeadAngle=.1,this.headMotorPower=1,this.bobLeftSide=!0,this.shouldBob=!1,this.flipping=!1,this.angleBasedViscocityMultiplier=1,this.liftForceMultiplier=1,this.randomBobCount=0,this.randomBobThreshold=Game.getRandom(5,50,!0),this.shouldBob=!1,this.randomWaveCount=0,this.randomWaveThreshold=Game.getRandom(10,100,!0),this.world.broadphase=new p2.NaiveBroadphase(1),this.boundBodies=[],this.waterChunks=[],this.waterLiftForce=[0,0],this.waterViscousForce=[0,0],this.centerOfBuoyancy=[0,0],this.shapePos=[0,0],this.shapeAngle=0,this.aabb=new p2.AABB,this.vel=[0,0],this.baseLiftForce=.11,this.viscosity=28,this.liftForce=this.baseLiftForce,this.world.defaultContactMaterial.restitution=.5,this.world.defaultContactMaterial.friction=.01,this.logFlumeBody=new p2.Body({mass:35,position:[0,20]}),this.logFlumeBody.angularDamping=.95,this.logFlumeShape=new p2.Box({width:285,height:78}),this.logFlumeBody.addShape(this.logFlumeShape),this.logFlumeShape.collisionGroup=this.HULL,this.logFlumeShape.collisionMask=this.TICKET|this.WATER|this.HARD,this.seatShape=new p2.Box({width:20,height:20}),this.seatShape.collisionGroup=this.SEAT,this.seatShape.collisionMask=this.PLAYER|this.TICKET,this.logFlumeBody.addShape(this.seatShape,[-115,50]),this.logFlumePowerupShape=new p2.Box({width:320,height:40}),this.logFlumePowerupShape.collisionGroup=this.HULL,this.logFlumePowerupShape.collisionMask=this.WATER|this.HARD,0==Game.isLowEndIPad&&(this.torsoBody=new p2.Body({mass:5}),this.torsoShape=new p2.Box({width:60,height:100}),this.torsoBody.addShape(this.torsoShape),this.torsoBody.angularDamping=.6,this.torsoBody.damping=.6,this.torsoShape.collisionGroup=this.PLAYER,this.torsoShape.collisionMask=this.TICKET|this.SEAT,this.torsoLock=new p2.RevoluteConstraint(this.logFlumeBody,this.torsoBody,{collideConnected:!1,localPivotA:[-20,-20],localPivotB:[0,-40]}),this.torsoSpring=new p2.RotationalSpring(this.logFlumeBody,this.torsoBody,{restAngle:-.3,stiffness:3e5,damping:9999999999}),this.torsoLock.enableMotor(),this.armBody=new p2.Body({mass:2}),this.armShape=new p2.Box({width:60,height:60}),this.armShape.collisionGroup=this.NONE,this.armBody.addShape(this.armShape),this.armBody.angularDamping=.5,this.armBody.damping=.5,this.armBodyLock=new p2.RevoluteConstraint(this.torsoBody,this.armBody,{collideConnected:!1,localPivotA:[12,22],localPivotB:[-10,20]}),this.armLogLock=new p2.PrismaticConstraint(this.armBody,this.logFlumeBody,{collideConnected:!1,localAnchorA:[10,-10],localAnchorB:[20,15],localAxisA:[1,0],lowerLimit:-30,upperLimit:120}),this.armBodyLock.setRelaxation(10),this.headBody=new p2.Body({mass:2}),this.headShape=new p2.Circle({radius:55}),this.headShape.collisionGroup=this.PLAYER,this.headShape.collisionMask=this.TICKET|this.SEAT,this.headBody.addShape(this.headShape),this.headBody.angularDamping=.993,this.headBody.damping=.4,this.headLock=new p2.RevoluteConstraint(this.torsoBody,this.headBody,{localPivotA:[20,40],localPivotB:[0,-17],collideConnected:!1}),this.headSpring=new p2.RotationalSpring(this.torsoBody,this.headBody,{restAngle:-.1,stiffness:35e4,damping:1e17}));var e=6,t=-15;1==Game.isLowEndIPad&&(e=18,t=-15),this.logFlumeBodyWeightBalance=new p2.Body({mass:e}),this.logFlumeShapeWeightBalance=new p2.Box({width:10,height:10}),this.logFlumeShapeWeightBalance.collisionGroup=this.NONE,this.logFlumeBodyWeightBalance.addShape(this.logFlumeShapeWeightBalance),this.boatBodyShapePhysics1=new p2.Box({width:100,height:26}),this.boatBodyShapePhysics1.collisionGroup=this.HULLFLOATS,this.boatBodyShapePhysics1.collisionMask=this.WATER,this.boatBodyShapePhysics2=new p2.Box({width:100,height:26}),this.boatBodyShapePhysics2.collisionGroup=this.HULLFLOATS,this.boatBodyShapePhysics2.collisionMask=this.WATER,this.boatBodyShapePhysics3=new p2.Box({width:100,height:26}),this.boatBodyShapePhysics3.collisionGroup=this.HULLFLOATS,this.boatBodyShapePhysics3.collisionMask=this.WATER,this.boatBodyShapePhysics4=new p2.Box({width:40,height:30}),this.boatBodyShapePhysics4.collisionGroup=this.HULLFLOATS,this.boatBodyShapePhysics4.collisionMask=this.WATER,this.buoyancyShapes=[],this.buoyancyShapes.push(this.boatBodyShapePhysics1),this.buoyancyShapes.push(this.boatBodyShapePhysics2),this.buoyancyShapes.push(this.boatBodyShapePhysics3),this.buoyancyShapes.push(this.boatBodyShapePhysics4),this.logFlumeShapeWeightBalanceLock=new p2.LockConstraint(this.logFlumeBody,this.logFlumeBodyWeightBalance,{collideConnected:!1,localOffsetB:[t,-100]}),this.logFlumeBody.addShape(this.boatBodyShapePhysics1,[-110,-55]),this.logFlumeBody.addShape(this.boatBodyShapePhysics2,[0,-55]),this.logFlumeBody.addShape(this.boatBodyShapePhysics3,[100,-60]),this.logFlumeBody.addShape(this.boatBodyShapePhysics4,[15,15]),this.logFlumeBody.angle=0,this.logFlumeBody.angularVelocity=0,this.logFlumeBody.damping=0,this.logFlumeBody.velocity=[0,0],this.world.addBody(this.logFlumeBody),this.world.addBody(this.logFlumeBodyWeightBalance),0==Game.isLowEndIPad&&(this.world.addBody(this.torsoBody),this.world.addBody(this.headBody),this.world.addBody(this.armBody),this.world.addSpring(this.torsoSpring),this.world.addConstraint(this.torsoLock),this.world.addSpring(this.headSpring),this.world.addConstraint(this.headLock),this.world.addConstraint(this.armBodyLock),this.world.addConstraint(this.armLogLock)),this.world.addConstraint(this.logFlumeShapeWeightBalanceLock);var i=this;this.world.on("beginContact",function(e){i.checkCollision(i,e)}),this.physicsEnabled=!0},e.prototype.updateBuoyancy=function(e){this.liftForce=this.baseLiftForce-e/20},e.prototype.sinkBoat=function(){this.logFlumeBody.removeShape(this.boatBodyShapePhysics1),this.logFlumeBody.addShape(this.boatBodyShapePhysics1,[-75,-12]),this.logFlumeBody.removeShape(this.boatBodyShapePhysics2),this.logFlumeBody.addShape(this.boatBodyShapePhysics2,[0,-15]),this.logFlumeBody.removeShape(this.boatBodyShapePhysics3),this.logFlumeBody.addShape(this.boatBodyShapePhysics3,[100,-35]),this.baseLiftForce=.1},e.prototype.floatBoat=function(){this.logFlumeBody.removeShape(this.boatBodyShapePhysics1),this.logFlumeBody.removeShape(this.boatBodyShapePhysics2),this.logFlumeBody.removeShape(this.boatBodyShapePhysics3),this.logFlumeBody.addShape(this.boatBodyShapePhysics1,[-110,-55]),this.logFlumeBody.addShape(this.boatBodyShapePhysics2,[0,-55]),this.logFlumeBody.addShape(this.boatBodyShapePhysics3,[100,-60]),this.baseLiftForce=.11},e.prototype.addWaterChunk=function(e){this.world.addBody(e.waterBody),this.world.addBody(e.slopeBody),this.world.addBody(e.riverBedBody),this.waterChunks.push(e),this.currentWaterBody=e.waterBody,this.currentSlopeBody=e.slopeBody},e.prototype.convertShapeFromPhotoshop=function(e,t){for(var i=[],s=0;s<e.length;s++){var o=e[s][0]-t[0],a=e[s][1]-t[1];i.push([o,-a])}return i},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angularVelocity=0,e.angularForce=0,e.angle=0,e.velocity=[0,0],e.setZeroForce(),e.mass/=2},e.prototype.applyDriveForce=function(e){if(1!=this.flipping){var t,i,s,o=0,a=this.logFlumeBody.velocity[0]/2e4;e<0?o=e:(o=e,a<0&&(o=0)),o*=5*this.liftForce,1==this.scene.endingGame&&(o=0),i=.1;if(1==this.scene.powerupIsActive?(Math.cos(this.logFlumeBody.angle),Math.sin(this.logFlumeBody.angle)):(Math.cos(this.logFlumeBody.angle+.1),Math.sin(this.logFlumeBody.angle+.1)),1==this.scene.goingSlow?(s=(i=1)-this.logFlumeBody.angle,this.liftForceMultiplier=(s-this.liftForceMultiplier)/5,0==this.scene.endingGame&&this.logFlumeBody.applyForce([0,1e5*this.liftForceMultiplier],[100,0]),0==Game.isLowEndIPad&&(this.torsoMotorPower=2,this.targetTorsoAngle=-2,this.headMotorPower=1,this.targetHeadAngle=.2,this.headLock.enableMotor())):0==Game.isLowEndIPad&&(this.torsoMotorPower=1,this.targetTorsoAngle=.3,this.headMotorPower=1,this.targetHeadAngle=-.1,this.headLock.disableMotor()),0==this.isTouchingWater){if(0==this.scene.goingSlow){i=-.9/this.scene.powerupRatio,t=11e5,(s=Math.abs(i-this.logFlumeBody.angle))>.7&&(s=.7);r=-s*t;this.logFlumeBody.angularForce+=(r-this.logFlumeBody.angularForce)/2}}else if(0==this.scene.goingSlow){t=5e6;var r=(s=i-this.logFlumeBody.angle)*t;this.logFlumeBody.angularForce+=(r-this.logFlumeBody.angularForce)/3}var n;(n=1==this.scene.powerupIsActive?-23*o:-10*o)>18e3&&(n=18e3),this.logFlumeBody.velocity[0]<50&&(n+=1e4-200*this.logFlumeBody.velocity[0]),0==this.isTouchingSlope&&0==this.isTouchingWater&&(n/=2),this.logFlumeBody.applyForce([n,0]);var h=[];p2.vec2.copy(h,this.logFlumeBody.velocity),this.playerVelocityMagnitude=p2.vec2.length(h)}},e.prototype.bindSpriteToBody=function(e,t){this.boundBodies.push({sprite:e,body:t})},e.prototype.unbindSpriteFromBody=function(e){this.boundBodies&&this.boundBodies.splice(this.findIndexByKeyValue(this.boundBodies,"sprite",e),1)},e.prototype.checkCollision=function(e,t){t.bodyA==e.logFlumeBody&&t.bodyB.shapes[0].collisionGroup==this.HARD&&e.logFlumeImpact(t.bodyA),t.bodyB==e.logFlumeBody&&t.bodyA.shapes[0].collisionGroup==this.HARD&&e.logFlumeImpact(t.bodyB)},e.prototype.logFlumeImpact=function(e){var t=[];p2.vec2.copy(t,this.logFlumeBody.velocity),Math.abs(this.logFlumeBody.velocity[1]),this.scene.player.triggerImpact()},e.prototype.checkEndCollision=function(e,t){},e.prototype.addBodyToWorld=function(e){this.world.addBody(e)},e.prototype.removeBodyFromWorld=function(e){this.world.removeBody(e)},e.prototype.removeConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.addConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.addBuoyancyShape=function(e){this.buoyancyShapes.push(e)},e.prototype.removeBuoyancyShape=function(e){this.buoyancyShapes.splice(this.buoyancyShapes.indexOf(e),1)},e.prototype.resizeElements=function(e,t){this.canvasHeight=t,this.canvasWidth=e,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},e.prototype.activatePowerup=function(){this.scene.powerupRatio=2,this.baseLiftForce=.12,this.logFlumeBody.removeShape(this.boatBodyShapePhysics1),this.logFlumeBody.removeShape(this.boatBodyShapePhysics2),this.logFlumeBody.removeShape(this.boatBodyShapePhysics3),this.logFlumeBody.addShape(this.boatBodyShapePhysics1,[-138,-92]),this.logFlumeBody.addShape(this.boatBodyShapePhysics2,[0,-92]),this.logFlumeBody.addShape(this.boatBodyShapePhysics3,[118,-92]),this.logFlumeBody.addShape(this.logFlumePowerupShape,[0,-50])},e.prototype.deactivatePowerup=function(){this.scene.powerupRatio=1,this.baseLiftForce=.11,this.logFlumeBody.removeShape(this.boatBodyShapePhysics1),this.logFlumeBody.removeShape(this.boatBodyShapePhysics2),this.logFlumeBody.removeShape(this.boatBodyShapePhysics3),this.logFlumeBody.addShape(this.boatBodyShapePhysics1,[-110,-55]),this.logFlumeBody.addShape(this.boatBodyShapePhysics2,[0,-55]),this.logFlumeBody.addShape(this.boatBodyShapePhysics3,[100,-60]),this.logFlumeBody.removeShape(this.logFlumePowerupShape)},e.prototype.applyAABBBuoyancyForces=function(e){for(var t,i=0;i<e.buoyancyShapes.length;i++){var s=e.buoyancyShapes[i];(t=s.body).vectorToWorldFrame(e.shapePos,s.position),p2.vec2.add(e.shapePos,e.shapePos,t.position),e.shapeAngle=s.angle+t.angle,s.computeAABB(e.aabb,e.shapePos,e.shapeAngle);var o;if(e.aabb.upperBound[0]>e.currentWaterBody.getAABB().upperBound[0])o=0;else{if(e.aabb.upperBound[1]<e.currentWaterBody.position[1])p2.vec2.copy(e.centerOfBuoyancy,e.shapePos),o=s.area;else{if(!(e.aabb.lowerBound[1]<e.currentWaterBody.position[1]))continue;var a=e.aabb.upperBound[0]-e.aabb.lowerBound[0],r=e.aabb.upperBound[1]-e.aabb.lowerBound[1];o=a*r,p2.vec2.set(e.centerOfBuoyancy,e.aabb.lowerBound[0]+a/2,e.aabb.lowerBound[1]+r/2)}if(i==e.buoyancyShapes.length-1&&this.scene.takeOnWater(o/80),p2.vec2.subtract(e.waterLiftForce,e.currentWaterBody.position,e.centerOfBuoyancy),p2.vec2.scale(e.waterLiftForce,e.waterLiftForce,o*e.liftForce),e.waterLiftForce[0]=0,p2.vec2.subtract(e.centerOfBuoyancy,e.centerOfBuoyancy,t.position),t.getVelocityAtPoint(e.vel,e.centerOfBuoyancy),t==e.logFlumeBody){var n=1*this.scene.powerupRatio,h=0,l=0;l=Math.abs(.1-this.logFlumeBody.angle)<.15?0:Math.abs(.1-this.logFlumeBody.angle),-this.logFlumeBody.velocity[1]/150>.2&&(h=-this.logFlumeBody.velocity[1]/95),h*=1-10*l/(10*this.scene.powerupRatio),l>1.5&&(l=1.5);var p=n-4*l+h;p<.1&&(p=.1),this.angleBasedViscocityMultiplier+=(p-this.angleBasedViscocityMultiplier)/7;var c=.1-this.logFlumeBody.angle;if(c<0&&(c=0),c<.3&&(c=0),1==Game.isLowEndIPad)d=.15+1.6*c;else var d=.1+1.6*c;d<.1&&(d=.1),2==this.scene.powerupRatio&&(d=.1),this.liftForce=this.baseLiftForce-c/23,0==this.scene.endingGame?p2.vec2.multiply(e.vel,e.vel,[d,this.angleBasedViscocityMultiplier]):p2.vec2.multiply(e.vel,e.vel,[.7,1.6])}p2.vec2.scale(e.waterViscousForce,e.vel,-e.viscosity),i<3&&(t.applyForce(e.waterViscousForce,e.centerOfBuoyancy),t.applyForce(e.waterLiftForce,e.centerOfBuoyancy))}}},e.prototype.setCurrentWaterBody=function(e){this.currentWaterBody=e},e.prototype.setCurrentSlopeBody=function(e){this.currentSlopeBody=e},e.prototype.stepPhysics=function(){if(0!=this.physicsEnabled&&this.world){this.world.step(1/30),this.applyAABBBuoyancyForces(this);for(var e=0;e<this.boundBodies.length;e++)this.boundBodies[e].sprite.position.x=this.boundBodies[e].body.position[0],this.boundBodies[e].sprite.position.y=Game.stageHeight-this.boundBodies[e].body.position[1],this.boundBodies[e].sprite.rotation=-this.boundBodies[e].body.angle;if(this.isTouchingWater=this.logFlumeBody.overlaps(this.currentWaterBody),this.isTouchingSlope=this.logFlumeBody.overlaps(this.currentSlopeBody),this.randomBobCount<this.randomBobThreshold)this.randomBobCount+=1;else{this.randomBobThreshold=4,this.randomBobCount=0,this.bobLeftSide=!this.bobLeftSide;var t;t=1==this.bobLeftSide?1:-1,1==this.shouldBob&&this.logFlumeBody.applyForce([0,-5e4],[140*t,0])}if(this.randomWaveCount<this.randomWaveThreshold)this.randomWaveCount+=1;else{var i=this.scene.riverManager.currentChunkIndex/10;this.randomWaveThreshold=Game.getRandom(15-3*i,20-3*i,!0),this.randomWaveThreshold/=this.scene.powerupRatio,this.randomWaveCount=0,this.randomWaveThreshold<3&&(this.randomWaveThreshold=3);var s=(5e4+2500*this.scene.riverManager.currentChunkIndex)*this.logFlumeBody.velocity[0]/450;s>1e5&&(s=1e5),s/=this.scene.powerupRatio,1==this.isTouchingWater&&this.logFlumeBody.applyForce([0,Game.getRandom(-s,s)],[Game.getRandom(-120,120),0])}if(0==this.isTouchingWater&&(this.randomWaveCount=0),0==Game.isLowEndIPad){var o=this.torsoBody.angle-this.targetTorsoAngle;this.torsoLock.setMotorSpeed(o*this.torsoMotorPower);var a=this.headBody.angle-this.targetHeadAngle;this.headLock.setMotorSpeed(a*this.headMotorPower)}this.logFlumeChangeInYVelocity=this.lastLogFlumeVelocityY-this.logFlumeBody.velocity[1],this.lastLogFlumeVelocityY=this.logFlumeBody.velocity[1],this.shouldBob=!1,this.playerVelocity=this.logFlumeBody.velocity}},e.prototype.killPhysicsWorld=function(e){},e.prototype.findIndexByKeyValue=function(e,t,i){for(var s=0;s<e.length;s++)if(e[s][t]==i)return s;return null},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.pause=function(){this.physicsEnabled=!1},e.prototype.resume=function(){this.physicsEnabled=!0},e.prototype.destroy=function(){this.world.clear(),this.world=null,Game.displayStore.returnPooledItem(this.red1),Game.displayStore.returnPooledItem(this.red2),Game.displayStore.returnPooledItem(this.red3),Game.displayStore.returnPooledItem(this.red4)},e}(),WaterfallWipeoutInputManager=function(){function e(e){this.scene=e,this.hitAreaSprite=Game.displayStore.getSprite("waterfall-wipeout/blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.currentAngle=0,this.maxAngleDiff=1.4,this.minAngleDiff=.1,this.keyboardDown=!1,this.baseDriveForce=-550,this.driveForce=this.baseDriveForce,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite)}return e.prototype.startGame=function(){this.baseDriveForce=-550},e.prototype.updateBaseDriveForce=function(e){this.baseDriveForce>-2e3&&(this.baseDriveForce-=e,this.driveForce=this.baseDriveForce)},e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mousemove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseupoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))})):(e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchmove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchendoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}))},e.prototype.inputDown=function(e,t){1!=this.scene.paused&&1!=this.scene.starting&&this.keyDown("spacebar")},e.prototype.inputUp=function(e,t){1!=this.scene.paused&&1!=this.scene.starting&&this.keyUp("spacebar")},e.prototype.inputMove=function(e,t){},e.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},e.prototype.getInputAngle=function(){var e=this.currentAngle;return e>this.maxAngleDiff&&(e=this.maxAngleDiff),e<this.minAngleDiff&&(e=this.minAngleDiff),e},e.prototype.keyDown=function(e){if(1!=this.scene.tutorialOverlay.isOpen){switch(this.keyboardInput=e,e){case"spacebar":this.driveForce=-370*this.scene.powerupRatio,this.keyboardInput="spacebar",this.scene.goingSlow=!0}this.keyboardDown=!0}},e.prototype.keyUp=function(e){if(1!=this.scene.tutorialOverlay.isOpen){switch(e){case"spacebar":this.driveForce=this.baseDriveForce,this.keyboardInput="spacebar",this.scene.goingSlow=!1}this.keyboardDown=!1}},e.prototype.tick=function(){1!=this.scene.endingGame&&this.scene.physicsManager.applyDriveForce(this.driveForce)},e.prototype.pause=function(){},e.prototype.resume=function(){this.driveForce=this.baseDriveForce},e.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},e}(),WaterfallWipeoutRiverManager=function(){function e(e){this.roundLength=3,this.scene=e,this.game=e.game,this.currentChunkIndex=0,this.currentRound=0,this.currentChunkInRound=0,this.dryHouseFanRotationSpeed=0,this.ticketOpportunities=0,this.chunks=[],this.ticket=new WaterfallWipeoutTicket(this.scene,0),this.nextDropHeight=100,this.container=Game.displayStore.getContainer("waterfall-wipeout/river-holder"),this.container.position.y=0,1==Game.onDesktop?this.sign=Game.displayStore.getSprite("waterfall-wipeout/sign-desktop.png"):this.sign=Game.displayStore.getSprite("waterfall-wipeout/sign-mobile.png"),this.sign.position.x=1750,this.sign.position.y=525,this.waterfallParticlesHolderBack=Game.displayStore.getContainer("waterfall-wipeout/waterfall-particles-holder-back"),this.waterfallParticlesHolderFront=Game.displayStore.getContainer("waterfall-wipeout/waterfall-particles-holder-front"),this.waterfallParticlesHolderBack.scale.x=this.waterfallParticlesHolderBack.scale.y=.8,this.riverForegroundLayer=Game.displayStore.getContainer("waterfall-wipeout/river-foreground-layer"),this.riverLayer=Game.displayStore.getContainer("waterfall-wipeout/river-layer"),this.foregroundLayer=Game.displayStore.getContainer("waterfall-wipeout/foreground-layer"),this.backgroundLayer1=Game.displayStore.getContainer("waterfall-wipeout/background-layer-1"),this.backgroundLayer2=Game.displayStore.getContainer("waterfall-wipeout/background-layer-2"),this.dryHouseFront=Game.displayStore.getSprite("waterfall-wipeout/dry-house-front"),this.dryHouseFront.position.x=-500,this.dryHouseBack=Game.displayStore.getSprite("waterfall-wipeout/dry-house-back"),this.dryHouseBack.position.x=-500,this.dryHouseRoof=Game.displayStore.getSprite("waterfall-wipeout/dry-house-roof"),this.dryHouseRoof.position.x=-500,this.dryHouseFanFrontHolder=Game.displayStore.getContainer("waterfall-wipeout/dry-house-fans-front"),this.dryHouseFanFrontHolder.position.x=-500,this.dryHouseFanBackHolder=Game.displayStore.getContainer("waterfall-wipeout/dry-house-fans-back"),this.dryHouseFanBackHolder.position.x=-500;for(var t=0;t<this.dryHouseFanFrontHolder.children.length;t++)this.dryHouseFanFrontHolder.children[t].rotation=Game.getRandom(0,1),this.dryHouseFanBackHolder.children[t].rotation=Game.getRandom(0,1);if(this.dryHouseFanRotationSpeedTarget=.05,this.scrollingLayer1={layer:this.backgroundLayer1,speed:10,children:[]},this.scrollingLayer2={layer:this.backgroundLayer2,speed:4,children:[]},this.container.addChild(this.backgroundLayer2),this.container.addChild(this.backgroundLayer1),this.createChunks(),this.riverLayer.addChild(this.sign),this.container.addChild(this.riverLayer),this.container.addChild(this.riverForegroundLayer),this.container.addChild(this.foregroundLayer),this.waterfallparticleCount=20,0==Game.isLowEndIPad){var i={cap:this.waterfallparticleCount,time:.6,lowerAngle:250,upperAngle:360,XstartRange:35,YstartRange:50,gravity:2e3,startAlpha:.9,endAlpha:0,fadeOutTime:1.5,scaleOutTime:1.5,xPos:0,yPos:0,lowerVelocity:150,upperVelocity:800,friction:.02,lowerStartScale:4,upperStartScale:6,rotationPower:1};this.waterfallParticlesBack=new ParticleStream(["waterfall-wipeout/waterfall-particle-1","waterfall-wipeout/waterfall-particle-2"],this.waterfallParticlesHolderBack,this.scene,i),this.waterfallParticlesFront=new ParticleStream(["waterfall-wipeout/waterfall-particle-1","waterfall-wipeout/waterfall-particle-2"],this.waterfallParticlesHolderFront,this.scene,i),this.waterfallParticlesBack.enable(),this.waterfallParticlesFront.enable()}}return e.prototype.createChunks=function(){for(var e=0;e<3;e++){var t=new WaterfallWipeoutRiverChunk(this.scene,e,this);this.chunks.push(t),this.scene.physicsManager.addWaterChunk(t),this.container.addChild(this.dryHouseBack),this.container.addChild(this.dryHouseFanBackHolder),this.riverLayer.addChild(t.container),this.riverForegroundLayer.addChild(t.waterSurfaceFront),this.riverForegroundLayer.addChild(t.riverTriangleDropFront),this.riverLayer.addChild(this.waterfallParticlesHolderBack),this.riverForegroundLayer.addChild(t.waterfallLinesFrontHolder);var i,s,o,a=150*(e+1),r=!1,n=.3+Game.getRandom(.2,.3),h=a/n;0==e?(r=!0,i=4e3+h,a=200+50*this.currentChunkIndex):i=h+Game.getRandom(1e3,2e3,!0),this.lastChunk?(s=this.lastChunk.waterBody.position[0]+this.lastChunk.width/2+i/2,o=this.lastChunk.waterBody.position[1]-a):s=o=0,t.spawn({x:s,y:o,width:i,isFirstInRound:r,dropHeight:a,slopeSeverity:n}),this.riverForegroundLayer.addChild(t.slopeSectionFront),this.riverForegroundLayer.addChild(t.waterEdgeFrontFrames),this.riverForegroundLayer.addChild(t.waterfallBottomFrontHolder),this.riverForegroundLayer.addChild(this.waterfallParticlesHolderFront),this.riverForegroundLayer.addChild(t.waterfallLinesFrontHolder),this.riverForegroundLayer.addChild(t.riverLinesHolderFront),this.riverLayer.addChild(this.waterfallParticlesHolderBack),this.riverLayer.addChild(t.waterEdgeBackFrames),this.lastChunk=t,this.addForegroundSprites(t)}this.currentChunk=this.chunks[0],this.nextChunk=this.chunks[0],this.scene.physicsManager.setCurrentWaterBody(this.chunks[0].waterBody),this.scene.physicsManager.setCurrentSlopeBody(this.chunks[0].slopeBody)},e.prototype.addLogFlumeSprites=function(e){for(var t=0;t<e.length;t++)this.riverLayer.addChild(e[t])},e.prototype.addForegroundSprites=function(e){this.foregroundLayer.addChild(e.foregroundSquare),this.foregroundLayer.addChild(e.riverBankFrontHolder),this.foregroundLayer.addChild(e.foregroundHolder),this.foregroundLayer.addChild(e.foregroundHolder2),this.foregroundLayer.addChild(this.dryHouseRoof),this.foregroundLayer.addChild(this.dryHouseFanFrontHolder),this.foregroundLayer.addChild(this.dryHouseFront),this.foregroundLayer.addChild(e.foregroundTexture.outputSprite),this.foregroundLayer.addChild(e.foregroundRockHolder)},e.prototype.addBackgroundSprite=function(e,t){1==t&&(this.scrollingLayer1.layer.addChild(e),this.scrollingLayer1.children.push(e)),2==t&&(this.scrollingLayer2.layer.addChild(e),this.scrollingLayer2.children.push(e))},e.prototype.tick=function(){Math.abs(this.dryHouseFront.toLocal(new PIXI.Point,this.scene.player.container).x)<this.dryHouseFront.width/2&&this.scene.dryout(),1==this.scene.meter.dryingOut&&this.dryHouseFanRotationSpeedTarget,0==this.scene.meter.dryingOut&&.3==this.dryHouseFanRotationSpeedTarget&&Game.stopSound("waterfall-wipeout/fan.mp3"),1==this.scene.meter.dryingOut?this.dryHouseFanRotationSpeedTarget=.3:this.dryHouseFanRotationSpeedTarget=.05,this.dryHouseFanRotationSpeed+=(this.dryHouseFanRotationSpeedTarget-this.dryHouseFanRotationSpeed)/20;for(e=0;e<this.dryHouseFanFrontHolder.children.length;e++)this.dryHouseFanFrontHolder.children[e].rotation-=this.dryHouseFanRotationSpeed,this.dryHouseFanBackHolder.children[e].rotation+=this.dryHouseFanRotationSpeed;for(var e=0;e<this.chunks.length;e++){var t=this.chunks[e];if(t.tick(),this.scene.container.toLocal(new PIXI.Point(-t.width/2,0),t.container).x<200&&this.scene.container.toLocal(new PIXI.Point,t.container).x>0&&0==t.isCurrent&&(this.currentChunkIndex++,this.currentChunkInRound++,t.makeCurrent(),this.currentChunk=t,this.chunks[e+1]?(this.nextChunk=this.chunks[e+1],this.nextDropHeight=this.nextChunk.dropHeight):(this.nextChunk=this.chunks[0],this.nextDropHeight=this.nextChunk.dropHeight),this.scene.physicsManager.setCurrentWaterBody(t.waterBody),this.scene.physicsManager.setCurrentSlopeBody(t.slopeBody),this.currentChunkInRound==this.roundLength&&this.nextRound()),this.scene.container.toLocal(new PIXI.Point(-t.width/2+t.slopeSprite.width-120,0),t.container).x<Game.stageWidth&&0==t.isCurrentWaterfall&&1==t.inUse){t.isCurrentWaterfall=!0,this.waterfallParticlesHolderFront.position.x=t.container.position.x-t.width/2+t.slopeSprite.width-90,this.waterfallParticlesHolderFront.position.y=t.container.position.y+30,this.waterfallParticlesHolderBack.position.x=t.container.position.x-t.width/2+t.slopeSprite.width-20,this.waterfallParticlesHolderBack.position.y=t.container.position.y-30;var i={cap:this.waterfallparticleCount,time:.6,lowerAngle:250,upperAngle:360,XstartRange:35,YstartRange:50,gravity:1200,startAlpha:.9,endAlpha:0,fadeOutTime:1.5,scaleOutTime:1.5,xPos:0,yPos:0,lowerVelocity:100+150*t.dropHeight/500,upperVelocity:400+400*t.dropHeight/500,friction:.02,lowerStartScale:2*(1.5+t.dropHeight/700),upperStartScale:2*(2.5+t.dropHeight/700),rotationPower:.5+t.dropHeight/1e3,blendMode:PIXI.BLEND_MODES.NORMAL};if(this.waterfallParticlesFront&&this.waterfallParticlesFront.updateParams(i,this.waterfallParticlesFront),this.ticketOpportunities%2==1){var s=new PIXI.Point(t.container.x+t.width/2-250,t.container.y-50);this.ticket.spawn(this.riverLayer,s)}this.ticketOpportunities++}if(0==t.inUse){var o=.3+Game.getRandom(this.currentRound/8,this.currentRound/3),a=100+(this.currentChunkInRound+1)*(this.currentChunkInRound+1)*30+8*this.currentChunkIndex;a>1500&&(a=1500);var r=!1,n=a/o,h=n+Game.getRandom(1.5*a,3*a,!0);0==this.currentChunkInRound&&((a=200+50*this.currentChunkIndex)>1500&&(a=1500),r=!0,h=3e3+(n=a/(o=.3+Game.getRandom(this.currentRound/10,this.currentRound/5)))),t.spawn({x:this.lastChunk.waterBody.position[0]+this.lastChunk.width/2+h/2,slopeSeverity:o,y:this.lastChunk.waterBody.position[1]-a,width:h,isFirstInRound:r,dropHeight:a}),1==r&&this.currentChunkIndex>1&&(this.dryHouseFront.position.x=t.container.position.x+t.width/2-500,this.dryHouseFront.position.y=t.container.position.y-49,this.dryHouseBack.position.x=this.dryHouseFront.position.x+90,this.dryHouseBack.position.y=this.dryHouseFront.position.y-150,this.dryHouseRoof.position.x=this.dryHouseFront.position.x+59,this.dryHouseRoof.position.y=this.dryHouseFront.position.y-220,this.dryHouseFanFrontHolder.position.x=this.dryHouseFront.position.x-this.dryHouseFront.width/2+60,this.dryHouseFanFrontHolder.position.y=this.dryHouseFront.position.y-85,this.dryHouseFanBackHolder.position.x=this.dryHouseBack.position.x-this.dryHouseBack.width/2+60,this.dryHouseFanBackHolder.position.y=this.dryHouseBack.position.y-85),this.riverForegroundLayer.addChild(t.slopeSectionFront),this.riverForegroundLayer.addChild(t.waterEdgeFrontFrames),this.riverForegroundLayer.addChild(t.waterfallBottomFrontHolder),this.riverForegroundLayer.addChild(t.waterfallLinesFrontHolder),this.riverForegroundLayer.addChild(t.riverLinesHolderFront),this.riverForegroundLayer.addChild(this.waterfallParticlesHolderFront),this.riverLayer.addChildAt(t.waterEdgeBackFrames,8),this.lastChunk=t,this.addForegroundSprites(t)}}this.scrollingLayer1.layer.position.x=-this.scene.mainHolder.position.x/this.scrollingLayer1.speed,this.scrollingLayer2.layer.position.x=-this.scene.mainHolder.position.x/this.scrollingLayer2.speed,this.waterfallParticlesFront&&this.waterfallParticlesFront.tick(),this.waterfallParticlesBack&&this.waterfallParticlesBack.tick(),this.ticket.body&&0==this.ticket.available&&this.ticket.tick()},e.prototype.updateSpritePosition=function(e,t,i){var s,o=t.parent;o==this.scrollingLayer1.layer&&(s=this.scrollingLayer1.speed),o==this.scrollingLayer2.layer&&(s=this.scrollingLayer2.speed);var a=new PIXI.Point(this.scene.mainHolderPos.x,this.scene.mainHolderPos.y);t.position.x=e.container.x-o.position.x+i[0],t.position.y=e.container.y+i[1];var r=this.scene.scaleHolder.toLocal(a,t).x;this.scene.scaleHolder.toLocal(a,t).y;t.position.x-=r/s},e.prototype.nextRound=function(){this.currentRound++,this.currentChunkInRound=0,this.roundLength=Game.getRandom(5,6+Math.round(this.currentRound/4),!0),console.log("****ROUND "+this.currentRound+"****","length = "+this.roundLength),this.scene.nextRound(this.currentRound)},e.prototype.pause=function(){for(var e=0;e<this.chunks.length;e++)this.chunks[e].pause();Game.pauseSound("waterfall-wipeout/fan.mp3")},e.prototype.resume=function(){for(var e=0;e<this.chunks.length;e++)this.chunks[e].resume();Game.pauseSound("waterfall-wipeout/fan.mp3")},e.prototype.destroy=function(){for(var e=0;e<this.chunks.length;e++)this.chunks[e].destroy();this.chunks=[],this.waterfallParticlesBack&&this.waterfallParticlesBack.destroy(),this.waterfallParticlesFront&&this.waterfallParticlesFront.destroy(),this.ticket.destroy(),Game.stopSound("waterfall-wipeout/fan.mp3")},e}(),WaterfallWipeoutRiverChunk=function(){function e(e,t,i){this.scene=e,this.game=e.game,1==Game.isLowEndIPad?this.renderSpriteScale=4:this.renderSpriteScale=2,this.index=t,this.container=Game.displayStore.getContainer("waterfall-wipeout/river-chunk-holder"),this.inUse=!0,this.isCurrent=!1,this.isCurrentWaterfall=!1,this.riverManager=i,this.riverBankFrontChunks=[],this.riverBankBackChunks=[],this.waterBoxSprite=Game.displayStore.getSprite("waterfall-wipeout/grey-square"),this.slopeSprite=Game.displayStore.getSprite("waterfall-wipeout/grey-triangle"),this.riverBedSprite=Game.displayStore.getSprite("waterfall-wipeout/grey-square"),this.riverBankBackHolder=Game.displayStore.getContainer("waterfall-wipeout/river-bank-back-holder"),this.riverBankFrontHolder=Game.displayStore.getContainer("waterfall-wipeout/river-bank-front-holder"),Game.displayStore.isItemInDisplayStore("foreground-texture-"+this.index)?(this.foregroundTexture={outputSprite:null,renderTexture:null},this.foregroundTexture.outputSprite=Game.displayStore.isItemInDisplayStore("foreground-texture-"+this.index),this.foregroundTexture.renderTexture=Game.displayStore.isItemInDisplayStore("foreground-texture-"+this.index).texture):this.foregroundTexture=Game.displayStore.getRenderTexture("foreground-texture",2800/this.renderSpriteScale,1800/this.renderSpriteScale,"waterfall-wipeout-assets",!1),Game.displayStore.isItemInDisplayStore("background-texture-"+this.index)?(this.backgroundTexture={outputSprite:null,renderTexture:null},this.backgroundTexture.outputSprite=Game.displayStore.isItemInDisplayStore("background-texture-"+this.index),this.backgroundTexture.renderTexture=Game.displayStore.isItemInDisplayStore("background-texture-"+this.index).texture):this.backgroundTexture=Game.displayStore.getRenderTexture("background-texture-"+this.index,2800/this.renderSpriteScale,1800/this.renderSpriteScale,"waterfall-wipeout-assets",!1);for(d=0;d<11;d++){var s=Game.displayStore.getSprite("waterfall-wipeout/river-bank-back");if(s.position.x=-d*(s.width-18),this.riverBankBackHolder.addChild(s),this.riverBankBackChunks.push(s),0==Game.isLowEndIPad){var o=Game.displayStore.getSprite("waterfall-wipeout/river-bank-green");o.position.x=-d*(o.width-Game.getRandom(10,100))-30,o.position.y=Game.getRandom(-25,-5);var a=2*Game.getRandom(0,1,!0)-1;o.scale.x=a,o.scale.x<0&&(o.position.x-=o.width),this.riverBankBackHolder.addChildAt(o,0)}var r=Game.displayStore.getSprite("waterfall-wipeout/river-bank-front");r.position.x=-d*(r.width-32),this.riverBankFrontHolder.addChild(r),this.riverBankFrontChunks.push(r)}this.riverBankBackHolder.position.y=-42,this.riverBankFrontHolder.position.y=this.container.position.y,this.waterSurfaceBack=Game.displayStore.getSprite("waterfall-wipeout/river-section-hard"),this.waterSurfaceFront=Game.displayStore.getSprite("waterfall-wipeout/river-section"),this.waterSurfaceFront.alpha=.9,this.waterSurfaceBack.height+=this.waterSurfaceFront.height/2,this.riverTriangleDropBack=Game.displayStore.getSprite("waterfall-wipeout/river-triangle-drop"),this.riverTriangleDropFront=Game.displayStore.getSprite("waterfall-wipeout/river-triangle-drop-front"),this.riverTriangleDropFront.alpha=.9;var n={cap:10,time:1,lowerAngle:.01,upperAngle:.01,XstartRange:0,YstartRange:35,gravity:0,startAlpha:1,endAlpha:1,startScaleX:0,endScaleX:2,fadeInTime:50,fadeOutTime:50,scaleInTime:3,scaleOutTime:2,xPos:0,yPos:0,lowerVelocity:100,upperVelocity:500,lowerStartScale:1,upperStartScale:2,rotationPower:0};if(this.waterfallLinesFrontHolder=Game.displayStore.getContainer("waterfall-wipeout/water-line-front-holder"),this.waterfallLinesBackHolder=Game.displayStore.getContainer("waterfall-wipeout/water-line-back-holder"),0==Game.isLowEndIPad&&(this.waterfallLinesFront=new ParticleStream(["waterfall-wipeout/water-line"],this.waterfallLinesFrontHolder,this.scene,n),this.waterfallLinesBack=new ParticleStream(["waterfall-wipeout/water-line"],this.waterfallLinesBackHolder,this.scene,n),this.waterfallLinesFront.enable(),this.waterfallLinesBack.enable()),this.foregroundHolder=Game.displayStore.getContainer("waterfall-wipeout/foreground-objects-holder"),this.foregroundHolder2=Game.displayStore.getContainer("waterfall-wipeout/foreground-objects-holder-2"),this.foregroundRockHolder=Game.displayStore.getContainer("waterfall-wipeout/foreground-rock-holder"),this.backgroundRockHolder=Game.displayStore.getContainer("waterfall-wipeout/foreground-rock-holder-back"),this.foregroundSquare=Game.displayStore.getSprite("waterfall-wipeout/foreground-square"),this.foregroundObjectsArray=new Array,this.foregroundObjectsArray2=new Array,this.foregroundRockArray=new Array,this.backgroundRockArray=new Array,this.yellowTreeArray=new Array,this.greenTreeArray=new Array,0==Game.isLowEndIPad){for(d=0;d<1;d++)this.foregroundObjectsArray.push(Game.displayStore.getSprite("waterfall-wipeout/foreground-object-1"),Game.displayStore.getSprite("waterfall-wipeout/foreground-object-2"),Game.displayStore.getSprite("waterfall-wipeout/foreground-object-3"),Game.displayStore.getSprite("waterfall-wipeout/foreground-object-4"),Game.displayStore.getSprite("waterfall-wipeout/foreground-object-5"),Game.displayStore.getSprite("waterfall-wipeout/foreground-object-6")),this.foregroundObjectsArray2.push(Game.displayStore.getSprite("waterfall-wipeout/foreground-object-7"),Game.displayStore.getSprite("waterfall-wipeout/foreground-object-8"),Game.displayStore.getSprite("waterfall-wipeout/foreground-object-9"),Game.displayStore.getSprite("waterfall-wipeout/foreground-object-10"),Game.displayStore.getSprite("waterfall-wipeout/foreground-object-11"));for(d=0;d<1;d++)this.foregroundRockArray.push(Game.displayStore.getSprite("waterfall-wipeout/foreground-rock-1"),Game.displayStore.getSprite("waterfall-wipeout/foreground-rock-2"),Game.displayStore.getSprite("waterfall-wipeout/foreground-rock-3"),Game.displayStore.getSprite("waterfall-wipeout/foreground-rock-4"),Game.displayStore.getSprite("waterfall-wipeout/foreground-rock-5"),Game.displayStore.getSprite("waterfall-wipeout/foreground-rock-6"),Game.displayStore.getSprite("waterfall-wipeout/foreground-rock-7")),this.backgroundRockArray.push(Game.displayStore.getSprite("waterfall-wipeout/foreground-rock-1"),Game.displayStore.getSprite("waterfall-wipeout/foreground-rock-2"),Game.displayStore.getSprite("waterfall-wipeout/foreground-rock-3"),Game.displayStore.getSprite("waterfall-wipeout/foreground-rock-4"),Game.displayStore.getSprite("waterfall-wipeout/foreground-rock-5"),Game.displayStore.getSprite("waterfall-wipeout/foreground-rock-6"),Game.displayStore.getSprite("waterfall-wipeout/foreground-rock-7"));for(d=0;d<3;d++){var h=Game.displayStore.getSprite("waterfall-wipeout/yellow-tree");this.yellowTreeArray.push(h),this.riverBankBackHolder.addChild(h)}for(d=0;d<this.foregroundObjectsArray.length;d++)this.foregroundHolder.addChild(this.foregroundObjectsArray[d]);for(d=0;d<this.foregroundObjectsArray2.length;d++)this.foregroundHolder2.addChild(this.foregroundObjectsArray2[d]);for(d=0;d<this.foregroundRockArray.length;d++)this.foregroundRockHolder.addChild(this.foregroundRockArray[d]);for(d=0;d<this.backgroundRockArray.length;d++)this.backgroundRockHolder.addChild(this.backgroundRockArray[d]);for(d=0;d<2;d++){var l=Game.displayStore.getSprite("waterfall-wipeout/green-tree");this.greenTreeArray.push(l),this.backgroundRockHolder.addChildAt(l,0)}}if(this.riverLinesBackArray=[],this.riverLinesFrontArray=[],this.riverLinesHolderBack=Game.displayStore.getContainer("waterfall-wipeout/river-lines-holder-top"),this.riverLinesHolderFront=Game.displayStore.getContainer("waterfall-wipeout/river-lines-holder-bottom"),0==Game.isLowEndIPad)for(d=0;d<10;d++){var p=Game.displayStore.getSprite("waterfall-wipeout/water-line-river"),c=Game.displayStore.getSprite("waterfall-wipeout/water-line-river");this.riverLinesBackArray.push(p),this.riverLinesFrontArray.push(c),this.riverLinesHolderBack.addChild(p),this.riverLinesHolderFront.addChild(c),p.position.y=Game.getRandom(-40,0),c.position.y=Game.getRandom(0,90)}if(this.riverLinesHolderBack.position.x=0,this.riverLinesHolderFront.position.x=this.container.x,this.riverLinesHolderFront.position.y=this.container.y,this.waterEdgeBackFrames=Game.displayStore.getAnimatedSprite("waterfall-wipeout/log-water-edge-frames"),this.waterEdgeBackFrames.alpha=1,this.waterEdgeBackFrames.loop=!0,this.waterEdgeBackFrames.animationSpeed=.2,this.waterEdgeBackFrames.play(),this.waterEdgeBackFrames.scale.x=1,this.waterEdgeBackFrames.scale.y=1,this.waterEdgeFrontFrames=Game.displayStore.getAnimatedSprite("waterfall-wipeout/log-water-edge-front-frames"),this.waterEdgeFrontFrames.alpha=1,this.waterEdgeFrontFrames.loop=!0,this.waterEdgeFrontFrames.animationSpeed=.2,this.waterEdgeFrontFrames.play(),this.waterEdgeFrontFrames.scale.x=1,this.waterEdgeFrontFrames.scale.y=1,this.waterfallBottomBackHolder=Game.displayStore.getContainer("waterfall-wipeout/waterfall-bottom-back-holder"),this.waterfallBottomFrontHolder=Game.displayStore.getContainer("waterfall-wipeout/waterfall-bottom-front-holder"),this.waterfallBottomBackArray=new Array,this.waterfallBottomFrontArray=new Array,this.layer1Trees=new Array,this.layer2Trees=new Array,0==Game.isLowEndIPad)for(d=0;d<10;d++)this.waterfallBottomBackArray.push({sprite:Game.displayStore.getSprite("waterfall-wipeout/waterfall-bottom-back"),speed:Game.getRandom(.1,2),limit:Game.getRandom(1.1,1.9)}),this.waterfallBottomFrontArray.push({sprite:Game.displayStore.getSprite("waterfall-wipeout/waterfall-bottom-front"),speed:Game.getRandom(.1,2),limit:Game.getRandom(1.1,1.9)}),this.waterfallBottomBackHolder.addChild(this.waterfallBottomBackArray[d].sprite),this.waterfallBottomFrontHolder.addChild(this.waterfallBottomFrontArray[d].sprite);for(d=1;d<5;d++)(u=Game.displayStore.getSprite("waterfall-wipeout/tree-clump-"+(1+d%2))).scale.x=u.scale.y=1.5,this.layer1Trees.push({sprite:u,offset:[d*-Game.getRandom(450,600),Game.getRandom(100,100)],align:"right"}),this.riverManager.addBackgroundSprite(u,1);if(this.bigTree=Game.displayStore.getSprite("waterfall-wipeout/tree-1"),this.bigTree.scale.x=this.bigTree.scale.y=1.5,this.riverManager.addBackgroundSprite(this.bigTree,1),this.layer1Trees.push({sprite:this.bigTree,offset:[0,0],align:"ramp-end"}),0==Game.isLowEndIPad)for(var d=1;d<4;d++){var u=Game.displayStore.getSprite("waterfall-wipeout/tree-clump-bg-1");u.scale.x=u.scale.y=1.5,this.layer2Trees.push({sprite:u,offset:[-800*d,Game.getRandom(70,140)],align:"right"}),this.riverManager.addBackgroundSprite(u,2)}this.waterBody=new p2.Body({mass:0,position:[0,0],angle:0,collisionResponse:!1}),this.slopeBody=new p2.Body({mass:0,position:[0,0],angle:0}),this.riverBedBody=new p2.Body({mass:0,position:[0,0],angle:0}),this.scene.physicsManager.bindSpriteToBody(this.container,this.waterBody),this.scene.physicsManager.bindSpriteToBody(this.slopeSprite,this.slopeBody),this.container.addChild(this.riverTriangleDropBack),this.container.addChild(this.backgroundRockHolder),0==Game.isLowEndIPad&&(this.container.addChild(this.waterfallLinesBackHolder),this.container.addChild(this.riverLinesHolderBack)),this.slopeSectionBack=new PIXI.Graphics,this.slopeForeground=new PIXI.Graphics,this.slopeSectionFront=new PIXI.Graphics,this.slopeSectionBankBack=new PIXI.Graphics,this.slopeSectionBankFront=new PIXI.Graphics}return e.prototype.spawn=function(e){this.waterfallSoundIsPlaying=!1,this.inUse=!0,this.width=e.width,this.dropHeight=e.dropHeight,this.isFirstInRound=e.isFirstInRound,this.waterBody.position[0]=e.x,this.waterBody.position[1]=e.y,this.riverBedBody.position[0]=e.x,this.riverBedBody.position[1]=e.y-250,this.riverBedBody.angle=.04,this.riverBedBody.removeShape(this.riverBedBox),this.riverBedBox=new p2.Box({width:this.width,height:100}),this.riverBedBox.collisionGroup=this.scene.physicsManager.HARD,this.riverBedBox.collisionMask=this.scene.physicsManager.HULL,this.riverBedBody.addShape(this.riverBedBox),this.riverBedSprite.width=this.width,this.riverBedSprite.height=this.riverBedBox.height,this.riverBedSprite.position.x=this.riverBedBody.position[0],this.riverBedSprite.position.y=Game.stageHeight-this.riverBedBody.position[1];var t=1;e.slopeSeverity&&(t=e.slopeSeverity);var i=[[-this.dropHeight/t/2,-this.dropHeight/2],[-this.dropHeight/t/2-400,+this.dropHeight/2-200],[-this.dropHeight/t/2,+this.dropHeight/2],[this.dropHeight/t/2,-this.dropHeight/2]];this.slopeBody.position[0]=e.x-this.width/2+this.dropHeight/t/2-60,this.slopeBody.position[1]=e.y+this.dropHeight/2+10,this.slopeBody.fromPolygon(i,{skipAdjustCenterOfMass:!0}),this.slopeBody.shapes[0].collisionGroup=this.scene.physicsManager.HARD,this.slopeBody.shapes[0].collisionMask=this.scene.physicsManager.HULL,this.container.position.x=this.waterBody.position[0],this.container.position.y=Game.stageHeight-this.waterBody.position[1],this.container.rotation=-this.waterBody.angle,this.waterBody.removeShape(this.waterBox),this.waterBox=new p2.Box({width:this.width,height:100}),this.waterBox.collisionGroup=this.scene.physicsManager.WATER,this.waterBox.collisionMask=this.scene.physicsManager.HULLFLOATS,this.waterBoxSprite.width=this.waterBox.width,this.waterSurfaceFront.position.x=this.container.position.x,this.waterSurfaceFront.position.y=this.container.position.y+this.waterSurfaceFront.height/2,this.waterSurfaceBack.width=this.width-50-2*this.riverTriangleDropBack.width,this.waterSurfaceFront.width=this.width-10-2*this.riverTriangleDropBack.width,this.waterSurfaceBack.position.x=this.waterBoxSprite.position.x,this.waterSurfaceBack.position.y=this.waterBoxSprite.position.y+this.waterSurfaceFront.height/4,this.riverTriangleDropBack.position.x=this.waterSurfaceBack.position.x+this.waterSurfaceBack.width/2,this.riverTriangleDropBack.position.y=this.waterSurfaceBack.position.y,this.waterEdgeBackFrames.x=this.container.position.x-this.width/2-280,this.waterEdgeBackFrames.y=this.container.position.y-this.dropHeight-79,this.waterEdgeFrontFrames.x=this.waterEdgeBackFrames.x,this.waterEdgeFrontFrames.y=this.waterEdgeBackFrames.y,this.riverTriangleDropFront.position.x=this.container.position.x+this.waterSurfaceBack.width/2,this.riverTriangleDropFront.position.y=this.container.position.y,this.waterfallLinesFrontHolder.position.x=this.container.position.x-this.width/2-130,this.waterfallLinesFrontHolder.position.y=this.container.position.y-this.dropHeight+60,this.waterfallLinesBackHolder.position.x=-this.width/2-90,this.waterfallLinesBackHolder.position.y=-this.dropHeight,this.waterBody.addShape(this.waterBox,[0,-60]),this.slopeSprite.height=this.dropHeight,this.slopeSprite.width=this.dropHeight/t;var s=Math.atan(this.slopeSprite.width/this.slopeSprite.height);this.waterfallLinesFrontHolder.rotation=Math.PI/2-s,this.waterfallLinesBackHolder.rotation=Math.PI/2-s,this.waterfallLinesBackHolder.position.y-=70*this.waterfallLinesBackHolder.rotation,this.waterfallLinesFrontHolder.position.y-=70*this.waterfallLinesBackHolder.rotation,this.riverBankBackHolder.position.x=this.width/2,this.riverBankFrontHolder.position.x=this.container.position.x+this.width/2-115,this.riverBankFrontHolder.position.y=this.container.position.y+147,this.riverLinesHolderFront.position.x=this.container.x,this.riverLinesHolderFront.position.y=this.container.y;for(var o=this.riverBankFrontChunks[0].width,a=this.riverBankBackChunks[0].width,r=Math.floor((this.width-this.slopeSprite.width)/o)-1,n=Math.ceil((this.width-this.slopeSprite.width)/a),h=0;h<this.riverBankFrontChunks.length;h++)this.riverBankFrontHolder.addChild(this.riverBankFrontChunks[h]),this.riverBankBackHolder.addChild(this.riverBankBackChunks[h]),h>r&&this.riverBankFrontHolder.removeChild(this.riverBankFrontChunks[h]),h>n&&this.riverBankBackHolder.removeChild(this.riverBankBackChunks[h]);this.width,this.slopeSprite.width,this.riverBankFrontHolder.width;this.slopeSectionBack.position.x=100,this.slopeSectionBack.position.y=this.dropHeight+24,this.slopeSectionBack.beginFill(5293251,1),this.slopeSectionBack.moveTo(this.slopeSprite.width,4),this.slopeSectionBack.lineTo(this.slopeSprite.width-90,143),this.slopeSectionBack.lineTo(-90,143-this.slopeSprite.height),this.slopeSectionBack.lineTo(0,-this.slopeSprite.height),this.slopeSectionBack.lineTo(this.slopeSprite.width,4),this.slopeSectionBack.endFill(),this.slopeSectionBankBack.position.x=this.slopeSectionBack.position.x+20,this.slopeSectionBankBack.position.y=this.slopeSectionBack.position.y+3,this.slopeSectionBankBack.beginFill(16509770,1),this.slopeSectionBankBack.moveTo(this.slopeSprite.width+20,-21),this.slopeSectionBankBack.lineTo(this.slopeSprite.width-30,-5),this.slopeSectionBankBack.lineTo(-30,10-this.slopeSprite.height),this.slopeSectionBankBack.lineTo(-4,-this.slopeSprite.height-27),this.slopeSectionBankBack.lineTo(this.slopeSprite.width+20,-21),this.slopeSectionBankBack.endFill(),this.slopeSectionFront.position.x=this.container.position.x-this.width/2-50,this.slopeSectionFront.position.y=this.container.position.y,this.slopeSectionFront.beginFill(5293251,.9),this.slopeSectionFront.moveTo(this.slopeSprite.width,0),this.slopeSectionFront.lineTo(this.slopeSprite.width-90*.67,95.81),this.slopeSectionFront.lineTo(.67*-90,95.81-this.slopeSprite.height),this.slopeSectionFront.lineTo(0,-this.slopeSprite.height),this.slopeSectionFront.lineTo(this.slopeSprite.width,0),this.slopeSectionFront.endFill(),this.slopeSectionBankFront.position.x=this.width+30,this.slopeSectionBankFront.position.y=this.dropHeight+216,this.slopeSectionBankFront.beginFill(16509770,1),this.slopeSectionBankFront.moveTo(40-this.riverBankFrontHolder.width,-54),this.slopeSectionBankFront.lineTo(2-this.riverBankFrontHolder.width,-4),this.slopeSectionBankFront.lineTo(-this.width+this.slopeSprite.width-30,-4),this.slopeSectionBankFront.lineTo(-this.width-32,-this.slopeSprite.height-4),this.slopeSectionBankFront.lineTo(-this.width-3,-this.slopeSprite.height-55),this.slopeSectionBankFront.lineTo(-this.width+this.slopeSprite.width,-70),this.slopeSectionBankFront.lineTo(40-this.riverBankFrontHolder.width,-54),this.slopeSectionBankFront.endFill(),this.foregroundSquare.width=this.width,this.foregroundSquare.height=2e3,this.foregroundSquare.position.x=this.container.position.x-115,this.foregroundSquare.position.y=this.container.position.y+96,this.foregroundHolder.position.x=this.foregroundSquare.position.x,this.foregroundHolder.position.y=this.foregroundSquare.position.y,this.foregroundHolder2.position.x=this.foregroundSquare.position.x-this.width/2,this.foregroundHolder2.position.y=this.foregroundSquare.position.y-this.slopeSprite.height+150,this.foregroundRockHolder.position.x=this.container.position.x-115,this.foregroundRockHolder.position.y=this.container.position.y+96,this.backgroundRockHolder.position.x=this.riverBankBackHolder.position.x,this.backgroundRockHolder.position.y=this.riverBankBackHolder.position.y,0==Game.isLowEndIPad&&(this.placeForegroundRocks(),this.placeForegroundTrees()),this.waterfallBottomBackHolder.x=-this.width/2+this.slopeSprite.width-130,this.waterfallBottomBackHolder.y=this.waterSurfaceBack.y,this.waterfallBottomFrontHolder.x=this.container.x+this.waterfallBottomBackHolder.x,this.waterfallBottomFrontHolder.y=this.container.y+this.waterfallBottomBackHolder.y,this.slopeForeground.position.x=this.slopeSectionBack.position.x-40,this.slopeForeground.position.y=this.slopeSectionBack.position.y+50,this.slopeForeground.beginFill(3097179,1),this.slopeForeground.moveTo(this.slopeSprite.width-90*.67,95.81),this.slopeForeground.lineTo(this.slopeSprite.width-90*.67,134),this.slopeForeground.lineTo(.67*-90,134),this.slopeForeground.lineTo(.67*-90,95.81),this.slopeForeground.lineTo(.67*-90,-this.slopeSprite.height+210*.67),this.slopeForeground.lineTo(-33.5,95.81-this.slopeSprite.height),this.slopeForeground.lineTo(this.slopeSprite.width-90*.67,95.81),this.slopeForeground.endFill();for(h=0;h<this.riverLinesBackArray.length;h++)this.riverLinesBackArray[h].position.x=Game.getRandom(-this.width/2+this.slopeSprite.width,this.width/2),this.riverLinesBackArray[h].scale.x=Game.getRandom(.5,1),this.riverLinesBackArray[h].scale.y=Game.getRandom(.5,1),this.riverLinesBackArray[h].alpha=Game.getRandom(.5,1);for(h=0;h<this.riverLinesFrontArray.length;h++)this.riverLinesFrontArray[h].position.x=Game.getRandom(-this.width/2+this.slopeSprite.width,this.width/2),this.riverLinesFrontArray[h].scale.x=Game.getRandom(.5,1),this.riverLinesFrontArray[h].scale.y=Game.getRandom(.5,1),this.riverLinesFrontArray[h].alpha=Game.getRandom(.5,1);this.container.addChild(this.waterSurfaceBack),this.container.addChild(this.waterfallBottomBackHolder),this.container.addChild(this.riverBankBackHolder),this.container.addChild(this.backgroundRockHolder),this.container.addChild(this.riverLinesHolderBack);var l=this.foregroundTexture.renderTexture,p=this.foregroundTexture.outputSprite,c=this.backgroundTexture.renderTexture,d=this.backgroundTexture.outputSprite;d.position.x=-this.width/2-120,d.position.y=-this.dropHeight-70,p.position.x=this.container.position.x-this.width/2-145,p.position.y=this.container.position.y-this.dropHeight-70;var u=new PIXI.Matrix;u.scale(1/this.renderSpriteScale,1/this.renderSpriteScale),Game.renderer.render(this.slopeSectionBack,c,!0,u),Game.renderer.render(this.slopeSectionBankBack,c,!1,u),Game.renderer.render(this.slopeForeground,l,!0,u),Game.renderer.render(this.slopeSectionBankFront,l,!1,u),d.scale.x=d.scale.y=this.renderSpriteScale,p.scale.x=p.scale.y=this.renderSpriteScale,this.slopeSectionBack.clear(),this.slopeForeground.clear(),this.slopeSectionBankFront.clear(),this.slopeSectionBankBack.clear(),this.container.addChild(d),this.container.addChild(this.waterfallLinesBackHolder);var g=2*Game.getRandom(0,1,!0)-1;if(this.bigTree&&(this.bigTree.scale.x=g),0==Game.isLowEndIPad){var m=this.layer1Trees.pop();m.offset=[Game.getRandom(0,(this.width-this.slopeSprite.width)/4),0],this.layer1Trees.push(m)}for(h=0;h<this.layer1Trees.length;h++){y=[];"right"==this.layer1Trees[h].align&&(y[0]=this.width/2+this.layer1Trees[h].offset[0]+300),"ramp-end"==this.layer1Trees[h].align&&(y[0]=-this.width/2+this.slopeSprite.width+this.layer1Trees[h].offset[0]),y[1]=this.layer1Trees[h].offset[1],"left"==this.layer1Trees[h].align&&(y[0]=-this.width/2+this.layer1Trees[h].offset[0],y[1]=-this.slopeSprite.width+this.layer1Trees[h].offset[1]),this.riverManager.updateSpritePosition(this,this.layer1Trees[h].sprite,y)}for(h=0;h<this.layer2Trees.length;h++){var y=[];"right"==this.layer2Trees[h].align&&(y[0]=this.width/2+this.layer2Trees[h].offset[0]+300),"ramp-end"==this.layer2Trees[h].align&&(y[0]=-this.width/2+this.slopeSprite.width+this.layer2Trees[h].offset[0]),y[1]=this.layer2Trees[h].offset[1],this.riverManager.updateSpritePosition(this,this.layer2Trees[h].sprite,y)}},e.prototype.placeForegroundRocks=function(){for(t=0;t<this.foregroundObjectsArray.length;t++)this.foregroundObjectsArray[t].scale.x=Math.random()<.5?-1.25:1.25,this.foregroundObjectsArray[t].scale.y=1.25,this.foregroundObjectsArray[t].position.x=Game.getRandom(-this.width/2+this.slopeSprite.width,this.width/2-this.foregroundObjectsArray[t].width),this.foregroundObjectsArray[t].position.y=Game.getRandom(this.foregroundObjectsArray[t].height/2+40,550);for(t=0;t<this.foregroundObjectsArray2.length;t++){var e=this.slopeSprite.width/this.slopeSprite.height;this.foregroundObjectsArray2[t].scale.x=Math.random()<.5?-1.25:1.25,this.foregroundObjectsArray2[t].scale.y=1.25,this.foregroundObjectsArray2[t].position.x=Game.getRandom(0,this.slopeSprite.width),this.foregroundObjectsArray2[t].position.y=Game.getRandom(this.foregroundObjectsArray2[t].position.x/e,this.foregroundObjectsArray2[t].position.x/e+this.slopeSprite.height/2)}for(var t=0;t<this.foregroundRockArray.length;t++)this.foregroundRockArray[t].scale.x=Math.random()<.5?-1:1,this.foregroundRockArray[t].scale.y=1,this.foregroundRockArray[t].position.x=Game.getRandom(-this.width/2+this.slopeSprite.width,this.width/2-this.foregroundRockArray[t].width),this.foregroundRockArray[t].position.y=Game.getRandom(-10,15),this.backgroundRockArray[t].scale.x=Math.random()<.5?-.8:.8,this.backgroundRockArray[t].scale.y=.8,this.backgroundRockArray[t].position.x=Game.getRandom(-this.width+this.slopeSprite.width,-50),this.backgroundRockArray[t].position.y=Game.getRandom(-40,-25)},e.prototype.placeForegroundTrees=function(){for(t=0;t<this.yellowTreeArray.length;t++){var e=this.yellowTreeArray[t];e.position.x=Game.getRandom(-this.width+this.slopeSprite.width/2,-50),e.position.y=Game.getRandom(-25,-10)}for(var t=0;t<this.greenTreeArray.length;t++){var i=this.greenTreeArray[t];0==Game.isLowEndIPad?i.position.x=this.backgroundRockArray[t].position.x:i.position.x=Game.getRandom(-this.width+this.slopeSprite.width/2,-50),i.position.y=Game.getRandom(-25,-15),i.alpha=Game.getRandom(0,1,!0)}},e.prototype.makeCurrent=function(){0==this.isFirstInRound?this.waterBoxSprite.tint=16711680:this.waterBoxSprite.tint=65280,this.isCurrent=!0},e.prototype.makeNotCurrent=function(){this.waterBoxSprite.tint=16777215,this.isCurrent=!1,this.isCurrentWaterfall=!1},e.prototype.tick=function(){0==Game.isLowEndIPad&&(this.waterfallLinesFront.tick(),this.waterfallLinesBack.tick()),this.scene.container.toLocal(new PIXI.Point(this.width/2,0),this.container).x<-500&&1==this.inUse&&this.remove();for(o=0;o<this.waterfallBottomBackArray.length;o++){var e=this.dropHeight/180;e>4&&(e=4),0==Game.isLowEndIPad&&(this.waterfallBottomBackArray[o].sprite.scale.x+=this.waterfallBottomBackArray[o].speed/120,this.waterfallBottomBackArray[o].sprite.alpha-=this.waterfallBottomBackArray[o].limit/100,this.waterfallBottomBackArray[o].sprite.position.x+=this.waterfallBottomBackArray[o].speed*e,this.waterfallBottomFrontArray[o].sprite.scale.x=this.waterfallBottomBackArray[o].sprite.scale.x,this.waterfallBottomFrontArray[o].sprite.alpha=this.waterfallBottomBackArray[o].sprite.alpha,this.waterfallBottomFrontArray[o].sprite.position.x=this.waterfallBottomBackArray[o].sprite.position.x,this.waterfallBottomBackArray[o].sprite.alpha<=0&&(this.waterfallBottomBackArray[o].sprite.scale.x=1,this.waterfallBottomBackArray[o].sprite.alpha=1,this.waterfallBottomFrontArray[o].sprite.scale.x=1,this.waterfallBottomFrontArray[o].sprite.alpha=1,this.waterfallBottomFrontArray[o].sprite.position.x=0,this.waterfallBottomBackArray[o].sprite.position.x=0))}for(o=0;o<this.riverLinesBackArray.length;o++){var t=10*(a=(this.width/2-this.riverLinesBackArray[o].width-this.riverLinesBackArray[o].position.x)/this.width),i=(this.riverLinesBackArray[o].position.y+40)/40,s=this.riverManager.currentChunkIndex/5;this.riverLinesBackArray[o].position.x+=s+i+t,this.riverLinesBackArray[o].scale.x+=a/100,this.riverLinesBackArray[o].scale.y-=this.riverLinesBackArray[o].scale.y/7,this.riverLinesBackArray[o].scale.y<.2&&(this.riverLinesBackArray[o].scale.y=.2),this.riverLinesBackArray[o].position.x>this.width/2-this.riverLinesBackArray[o].width&&(this.riverLinesBackArray[o].position.x=-this.width/2+this.slopeSprite.width,this.riverLinesBackArray[o].scale.x=Game.getRandom(.5,1.5),this.riverLinesBackArray[o].scale.y=Game.getRandom(5,9),this.riverLinesBackArray[o].alpha=Game.getRandom(.5,1))}for(var o=0;o<this.riverLinesFrontArray.length;o++){var a=(this.width/2-this.riverLinesFrontArray[o].width-this.riverLinesFrontArray[o].position.x)/this.width,t=10*a,i=(this.riverLinesFrontArray[o].position.y+40)/40,s=this.riverManager.currentChunkIndex/5;this.riverLinesFrontArray[o].position.x+=s+i+t,this.riverLinesFrontArray[o].scale.x+=a/100,this.riverLinesFrontArray[o].scale.y-=this.riverLinesFrontArray[o].scale.y/7,this.riverLinesFrontArray[o].scale.y<.3&&(this.riverLinesFrontArray[o].scale.y=.3),this.riverLinesFrontArray[o].position.x>this.width/2-this.riverLinesFrontArray[o].width&&(this.riverLinesFrontArray[o].position.x=-this.width/2+this.slopeSprite.width,this.riverLinesFrontArray[o].scale.x=Game.getRandom(1,2),this.riverLinesFrontArray[o].scale.y=Game.getRandom(7,10),this.riverLinesFrontArray[o].alpha=Game.getRandom(.5,1))}this.setWaterfallVolume()},e.prototype.setWaterfallVolume=function(){var e=Math.abs(this.container.toLocal(new PIXI.Point(this.width/2-this.slopeSprite.width,0),this.scene.player.container).x),t=Math.round(100*(.9-e/1200))/100;t>0&&0==this.waterfallSoundIsPlaying&&(Game.playSound("waterfall-wipeout/waterfall-big-"+this.index+".mp3"),Game.setSoundVolume("waterfall-wipeout/waterfall-big-"+this.index+".mp3",0),this.waterfallSoundIsPlaying=!0),t<0&&(t=0),t>.9&&(t=.9),Game.setSoundVolume("waterfall-wipeout/waterfall-big-"+this.index+".mp3",t)},e.prototype.pause=function(){this.waterEdgeBackFrames.stop(),this.waterEdgeFrontFrames.stop(),Game.pauseSound("waterfall-wipeout/waterfall-big-"+this.index+".mp3"),0==Game.isLowEndIPad&&(this.waterfallLinesFront.pause(),this.waterfallLinesBack.pause())},e.prototype.resume=function(){this.waterEdgeBackFrames.gotoAndPlay(0),this.waterEdgeFrontFrames.gotoAndPlay(0),Game.resumeSound("waterfall-wipeout/waterfall-big-"+this.index+".mp3"),0==Game.isLowEndIPad&&(this.waterfallLinesFront.resume(),this.waterfallLinesBack.resume())},e.prototype.remove=function(){Game.stopSound("waterfall-wipeout/waterfall-big-"+this.index+".mp3"),this.inUse=!1,this.isCurrentWaterfall=!1,this.slopeSectionBack.clear(),this.slopeSectionFront.clear(),this.slopeForeground.clear(),this.slopeSectionBankFront.clear(),this.slopeSectionBankBack.clear(),this.makeNotCurrent()},e.prototype.destroy=function(){this.remove(),this.slopeSectionBack.destroy(),this.slopeSectionFront.destroy(),this.slopeForeground.destroy(),this.slopeSectionBankFront.destroy(),this.slopeSectionBankBack.destroy(),Game.stopSound("waterfall-wipeout/waterfall-big-"+this.index+".mp3"),Game.displayStore.returnPooledItem(this.container),Game.displayStore.returnPooledItem(this.waterBoxSprite),Game.displayStore.returnPooledItem(this.slopeSprite),Game.displayStore.returnPooledItem(this.waterSurfaceFront),Game.displayStore.returnPooledItem(this.waterSurfaceBack),Game.displayStore.returnPooledItem(this.riverBedSprite),Game.displayStore.returnPooledItem(this.riverTriangleDropBack),Game.displayStore.returnPooledItem(this.riverTriangleDropFront),Game.displayStore.returnPooledItem(this.foregroundSquare);for(i=0;i<this.layer1Trees.length;i++)Game.displayStore.returnPooledItem(this.layer1Trees[i].sprite);for(i=0;i<this.layer2Trees.length;i++)Game.displayStore.returnPooledItem(this.layer2Trees[i].sprite);0==Game.isLowEndIPad&&(this.waterfallLinesFront.destroy(),this.waterfallLinesBack.destroy());for(i=0;i<this.riverBankBackChunks.length;i++){var e=this.riverBankBackChunks[i];Game.displayStore.returnPooledItem(e)}for(i=0;i<this.riverBankBackHolder.children.length;i++)Game.displayStore.returnPooledItem(this.riverBankBackHolder.children[i]);for(i=0;i<this.riverBankFrontChunks.length;i++){var t=this.riverBankFrontChunks[i];Game.displayStore.returnPooledItem(t)}Game.displayStore.returnPooledItem(this.foregroundHolder);for(i=0;i<this.foregroundObjectsArray.length;i++)Game.displayStore.returnPooledItem(this.foregroundObjectsArray[i]);Game.displayStore.returnPooledItem(this.foregroundHolder2);for(i=0;i<this.foregroundObjectsArray2.length;i++)Game.displayStore.returnPooledItem(this.foregroundObjectsArray2[i]);Game.displayStore.returnPooledItem(this.backgroundRockHolder),Game.displayStore.returnPooledItem(this.foregroundRockHolder);for(i=0;i<this.foregroundRockArray.length;i++)Game.displayStore.returnPooledItem(this.foregroundRockArray[i]),Game.displayStore.returnPooledItem(this.backgroundRockArray[i]);Game.displayStore.returnPooledItem(this.waterfallBottomBackHolder),Game.displayStore.returnPooledItem(this.waterfallBottomFrontHolder);for(i=0;i<this.waterfallBottomBackArray.length;i++)Game.displayStore.returnPooledItem(this.waterfallBottomFrontArray[i].sprite),Game.displayStore.returnPooledItem(this.waterfallBottomBackArray[i].sprite);Game.displayStore.returnPooledItem(this.riverBankBackHolder),Game.displayStore.returnPooledItem(this.riverBankFrontHolder),Game.displayStore.returnPooledItem(this.waterfallLinesBackHolder),Game.displayStore.returnPooledItem(this.waterfallLinesFrontHolder),Game.displayStore.returnPooledItem(this.waterEdgeBackFrames),Game.displayStore.returnPooledItem(this.waterEdgeFrontFrames),Game.displayStore.returnPooledItem(this.riverLinesHolderBack),Game.displayStore.returnPooledItem(this.riverLinesHolderFront);for(i=0;i<this.riverLinesBackArray.length;i++)Game.displayStore.returnPooledItem(this.riverLinesBackArray[i]);for(i=0;i<this.riverLinesFrontArray.length;i++)Game.displayStore.returnPooledItem(this.riverLinesFrontArray[i]);for(i=0;i<this.greenTreeArray.length;i++)Game.displayStore.returnPooledItem(this.greenTreeArray[i]);for(var i=0;i<this.yellowTreeArray.length;i++)Game.displayStore.returnPooledItem(this.yellowTreeArray[i])},e}(),WaterfallWipeoutMeter=function(){function e(e){this.easing=5,this.yCount=1,this.rotationCount=1,this.scene=e,this.game=e.game,this.targetScale=0,this.dryingOut=!1,this.drySpeed=5e-4,this.container=Game.displayStore.getContainer("waterfall-wipeout/meter-holder"),this.innerContainer=this.container.getContainer("waterfall-wipeout/meter-inner-holder"),this.bar=this.innerContainer.getSprite("waterfall-wipeout/bar-water.png"),this.bar.scale.y=0,this.red=this.container.getSprite("waterfall-wipeout/bar-icon-bg-red.png"),this.red.alpha=0,this.waves=this.container.getSprite("waterfall-wipeout/meter-waves.png"),this.flood=this.container.getSprite("waterfall-wipeout/bar-flood.png"),this.iconHolder=this.container.getContainer("waterfall-wipeout/meter-log-holder"),this.icon=this.iconHolder.getSprite("waterfall-wipeout/meter-log.png"),this.wavesMask=new PIXI.Graphics,this.wavesMask.beginFill(16711680),this.wavesMask.drawRect(3,-10,104,12),this.waves.mask=this.wavesMask,this.wavesMask.position.y=this.waves.position.y,0==Game.isLowEndIPad&&(this.waterTopFrames=Game.displayStore.getAnimatedSprite("waterfall-wipeout/log-water-bar-frames"),this.waterTopFrames.alpha=0,this.waterTopFrames.loop=!0,this.waterTopFrames.animationSpeed=.43,this.waterTopFrames.gotoAndPlay(0),this.waterTopFrames.scale.x=1,this.waterTopFrames.scale.y=1,this.waterTopFrames.position.x=this.bar.x,this.waterTopFrames.position.y=this.bar.y,this.waterTopFramesBack=Game.displayStore.getAnimatedSprite("waterfall-wipeout/log-water-bar-frames"),this.waterTopFramesBack.alpha=0,this.waterTopFramesBack.loop=!0,this.waterTopFramesBack.animationSpeed=.4,this.waterTopFramesBack.gotoAndPlay(11),this.waterTopFramesBack.scale.x=-1.3,this.waterTopFramesBack.scale.y=1.3,this.waterTopFramesBack.position.x=this.bar.x,this.waterTopFramesBack.position.y=this.bar.y,this.innerContainer.addChild(this.waterTopFramesBack),this.innerContainer.addChild(this.waterTopFrames)),this.container.addChild(this.wavesMask),this.positionStuff()}return e.prototype.dry=function(e){this.dryingOut=!0,this.drySpeed=.004,this.fully=e||!1},e.prototype.addWater=function(e){e<0||(this.easing=5,this.targetScale+=e/1e3,this.targetScale>1&&(this.targetScale=1))},e.prototype.pause=function(){0==Game.isLowEndIPad&&(this.waterTopFrames.stop(),this.waterTopFramesBack.stop())},e.prototype.resume=function(){0==Game.isLowEndIPad&&(this.waterTopFrames.play(),this.waterTopFramesBack.play())},e.prototype.tick=function(){this.rotationCount+=.07,this.yCount+=.06,this.targetScale>0?this.targetScale-=this.drySpeed:this.fully=!1,0==this.fully&&(this.dryingOut=!1,this.drySpeed=4e-4),this.bar.scale.y+=(this.targetScale-this.bar.scale.y)/this.easing,this.scene.physicsManager.updateBuoyancy(this.bar.scale.y),0==Game.isLowEndIPad&&(this.waterTopFrames.position.y=this.bar.y-this.bar.height+1,this.waterTopFramesBack.position.y=this.waterTopFrames.position.y-1,this.bar.scale.y<=0?this.waterTopFrames.alpha>0&&(this.waterTopFrames.alpha-=.05,this.waterTopFramesBack.alpha-=.05):(this.waterTopFrames.alpha=1,this.waterTopFramesBack.alpha=.5)),this.bar.scale.y>=.99&&0==this.dryingOut&&this.scene.endGame(),this.positionStuff()},e.prototype.positionStuff=function(){this.flood.height=Math.abs(20*this.bar.scale.y),this.waves.position.y=this.flood.position.y-this.flood.height,this.icon.rotation=-.05-.2*this.bar.scale.y+Math.sin(this.rotationCount)/18,this.icon.position.y=5-7*this.bar.scale.y+2*Math.sin(this.yCount),this.waves.position.x=55+5*Math.sin(this.yCount),this.wavesMask.position.y=this.waves.position.y,0==this.scene.endingGame?this.red.alpha=((Math.sin(2*this.yCount)+1)/2-.5)*this.bar.scale.y*2:this.red.alpha=1},e.prototype.destroy=function(){this.wavesMask.clear(),this.wavesMask=null,Game.displayStore.returnPooledItem(this.waterTopFrames),Game.displayStore.returnPooledItem(this.waterTopFramesBack)},e}(),WaterfallWipeoutPlayer=function(){function e(e){if(this.scene=e,this.game=e.game,Game.playSound("waterfall-wipeout/waterfall-small.mp3",1e-5),this.firingSplashParticles=!1,this.sprayActive=!1,this.rotationBasedXFactor=0,this.sprayVolume=0,this.targetSprayVolume=0,this.logFlumeBack=Game.displayStore.getContainer("waterfall-wipeout/log-flume-back"),this.container=Game.displayStore.getContainer("waterfall-wipeout/log-flume-front"),0==Game.isLowEndIPad?(this.playerTorso=Game.displayStore.getSprite("waterfall-wipeout/player-torso"),this.playerHead=Game.displayStore.getSprite("waterfall-wipeout/player-head"),this.playerArm=Game.displayStore.getSprite("waterfall-wipeout/player-arm")):this.playerFlat=Game.displayStore.getSprite("waterfall-wipeout/player-flat"),this.inflatableFront=this.container.getSprite("waterfall-wipeout/inflatable-front.png"),this.inflatableBack=this.logFlumeBack.getSprite("waterfall-wipeout/inflatable-back.png"),this.motorHolder=this.logFlumeBack.getContainer("waterfall-wipeout/log-flume-motor-holder"),this.motorTop=this.motorHolder.getSprite("waterfall-wipeout/powerup-motor.png"),this.motorPole=this.motorHolder.getSprite("waterfall-wipeout/powerup-motor-pole.png"),this.motorFan=this.motorHolder.getAnimatedSprite("waterfall-wipeout/log-water-fan-frames"),this.motorFan.alpha=1,this.motorFan.loop=!0,this.motorFan.animationSpeed=.8,this.motorFan.scale.x=0,this.motorFan.scale.y=1,this.motorTop.scale.x=0,this.motorTop.scale.y=0,this.motorPole.scale.y=0,this.inflatableFront.scale.x=0,this.inflatableFront.scale.y=0,this.inflatableBack.scale.x=0,this.inflatableBack.scale.y=0,this.scene.physicsManager.bindSpriteToBody(this.container,this.scene.physicsManager.logFlumeBody),0==Game.isLowEndIPad?(this.scene.physicsManager.bindSpriteToBody(this.playerTorso,this.scene.physicsManager.torsoBody),this.scene.physicsManager.bindSpriteToBody(this.playerHead,this.scene.physicsManager.headBody),this.scene.physicsManager.bindSpriteToBody(this.playerArm,this.scene.physicsManager.armBody)):this.container.addChildAt(this.playerFlat,0),this.wakeSprites=[],this.sideSplashSprites=[],this.wakeHolder=Game.displayStore.getContainer("waterfall-wipeout/wake-holder"),this.logWaterEffectsHolder=Game.displayStore.getContainer("waterfall-wipeout/log-water-effects-holder"),0==Game.isLowEndIPad)for(i=0;i<10;i++){var t;t=i<5?Game.displayStore.getSprite("waterfall-wipeout/wake-1"):Game.displayStore.getSprite("waterfall-wipeout/wake-2"),this.wakeSprites=this.scene.shuffleArray(this.wakeSprites),this.wakeSprites.push(t),this.wakeHolder.addChild(t)}for(var i=0;i<10;i++){var s;s=i<5?Game.displayStore.getSprite("waterfall-wipeout/side-splash-1"):Game.displayStore.getSprite("waterfall-wipeout/side-splash-2"),this.sideSplashSprites=this.scene.shuffleArray(this.sideSplashSprites),this.sideSplashSprites.push(s),this.logWaterEffectsHolder.addChild(s)}if(0==Game.isLowEndIPad?this.scene.riverManager.addLogFlumeSprites([this.wakeHolder,this.logFlumeBack,this.playerTorso,this.playerHead,this.container,this.playerArm]):this.scene.riverManager.addLogFlumeSprites([this.wakeHolder,this.logFlumeBack,this.container]),0==Game.isLowEndIPad){this.sprayParticlesHolder=Game.displayStore.getContainer("waterfall-wipeout/spray-particles-holder"),this.splashParticlesHolder=Game.displayStore.getContainer("waterfall-wipeout/splash-particles-holder");var o={time:.6,lowerAngle:-180,upperAngle:-150,XstartRange:15,YstartRange:5,gravity:1500,startAlpha:.9,endAlpha:0,fadeOutTime:2,scaleOutTime:2,xPos:0,yPos:0,lowerVelocity:50,upperVelocity:500,endScaleX:0,fadeInTime:100,lowerStartScale:.1,upperStartScale:1.2,rotationPower:1},a={lowerAngle:340,upperAngle:360,lowerVelocity:500,upperVelocity:1e3,endScale:0,lowerStartScale:1,scaleOutTime:2,scaleInTime:10,upperStartScale:2,friction:.04,XstartRange:120,YstartRange:10,gravity:1200,stagger:400,endAlpha:0,rotationPower:2,overridable:!0};this.sprayParticles=new ParticleStream(["waterfall-wipeout/spray-particle-1","waterfall-wipeout/spray-particle-2","waterfall-wipeout/spray-particle-3"],this.sprayParticlesHolder,this.scene,o),this.splashParticles=new ParticleBurst(["waterfall-wipeout/splash-particle-1","waterfall-wipeout/splash-particle-2","waterfall-wipeout/splash-particle-3"],this.splashParticlesHolder,this.scene,a),this.splashParticles.container.position.y=440}}return e.prototype.addSprites=function(){this.scene.riverManager.riverForegroundLayer.addChild(this.logWaterEffectsHolder),this.splashParticlesHolder&&(this.scene.riverManager.riverForegroundLayer.addChild(this.sprayParticlesHolder),this.scene.riverManager.riverForegroundLayer.addChild(this.splashParticlesHolder))},e.prototype.tick=function(){this.impactTimeout>0&&(this.impactTimeout-=1),this.changeInVelocityMagnitude=Math.abs(this.previousVelocityMagnitude-this.scene.physicsManager.playerVelocityMagnitude),this.previousVelocityMagnitude=this.scene.physicsManager.playerVelocityMagnitude,this.logFlumeBack.position.x=this.container.position.x,this.logFlumeBack.position.y+=(this.container.position.y-this.logFlumeBack.position.y)/1.5;var e=37+this.scene.physicsManager.logFlumeChangeInYVelocity/5,t=1+this.scene.physicsManager.logFlumeChangeInYVelocity/130;this.inflatableFront.position.y+=(e-this.inflatableFront.position.y)/8,this.inflatableBack.scale.y+=(t-this.inflatableBack.scale.y)/8;var i=17+this.scene.physicsManager.logFlumeChangeInYVelocity/2;this.motorHolder.position.y+=(i-this.motorHolder.position.y)/8,this.container.scale.y=1+(this.container.position.y-this.logFlumeBack.position.y)/110,this.logFlumeBack.rotation=this.container.rotation,1==this.scene.physicsManager.isTouchingWater&&(this.container.rotation<-.35||this.container.rotation>.35?this.logWaterFramesWakeTargetAlpha>0?this.logWaterFramesWakeTargetAlpha-=.05:this.logWaterFramesWakeTargetAlpha<0&&(this.logWaterFramesWakeTargetAlpha=0):this.container.rotation>-.35&&this.container.rotation<.35&&(this.logWaterFramesWakeTargetAlpha<1?this.logWaterFramesWakeTargetAlpha+=.05:this.logWaterFramesWakeTargetAlpha>1&&(this.logWaterFramesWakeTargetAlpha=1)));var s=.1*this.scene.powerupRatio+Math.abs(this.scene.physicsManager.logFlumeBody.velocity[0])/350;s>2&&(s=2);var o=.7*this.scene.powerupRatio+Math.abs(this.scene.physicsManager.logFlumeChangeInYVelocity)/10;o>3*this.scene.powerupRatio&&(o=3*this.scene.powerupRatio),this.container.rotation<0?this.rotationBasedXFactor+=(430*this.container.rotation-this.rotationBasedXFactor)/5:this.rotationBasedXFactor+=(-70*this.container.rotation-this.rotationBasedXFactor)/5,this.rotationBasedXFactor<-100&&(this.rotationBasedXFactor=-100),1==this.scene.endingGame&&(this.rotationBasedXFactor=0),this.streamOffsetX=140+this.rotationBasedXFactor;var a=this.scene.riverManager.currentChunk.waterSurfaceFront.width+100;a/2-this.scene.riverManager.currentChunk.container.toLocal(new PIXI.Point(0,0),this.container).x<this.streamOffsetX&&(this.streamOffsetX=a/2-this.scene.riverManager.currentChunk.container.toLocal(new PIXI.Point(0,0),this.container).x),this.streamOffsetX>140&&(this.streamOffsetX=140),this.sprayParticlesHolder&&this.sprayParticles.updatePos(new PIXI.Point(this.streamOffsetX+this.container.position.x,this.scene.mainHolder.toLocal(new PIXI.Point,this.scene.riverManager.currentChunk.container).y+5)),this.scene.container.toLocal(new PIXI.Point(0,0),this.container).x>this.scene.mainHolderPos.x&&1==this.scene.starting&&this.scene.startCameraTracking(),this.logAnimationCheck()},e.prototype.logAnimationCheck=function(){var e=!1,t=this.scene.physicsManager.logFlumeBody.velocity[0]/400;if(1==this.scene.physicsManager.isTouchingWater){e=!0,t>1&&(t=1);var i={lowerAngle:30*t-90,upperAngle:50*t-90,startAlpha:Game.getRandom(.6,1),time:.1+.4*t,fadeOutTime:2,fadeInTime:10,YstartRange:2*this.scene.powerupRatio,lowerVelocity:250*t,upperVelocity:750*t,endScale:0,lowerStartScale:.4+.2*this.scene.powerupRatio*t,upperStartScale:1.7+1*this.scene.powerupRatio*t,scaleInTime:40,scaleOutTime:20,rotationPower:1+1*t};this.targetSprayVolume=t,this.sprayParticles&&this.sprayParticles.updateParams(i,this.sprayParticles)}else 0==this.scene.physicsManager.isTouchingSlope?this.targetSprayVolume=0:this.targetSprayVolume=t;this.sprayVolume+=(this.targetSprayVolume-this.sprayVolume)/6,Game.setSoundVolume("waterfall-wipeout/waterfall-small.mp3",.9*this.sprayVolume),e!=this.sprayActive&&(this.showSpray(e),this.sprayActive=e),1==this.scene.endingGame&&this.showSpray(!1),1==this.scene.physicsManager.isTouchingWater&&0==this.firingSplashParticles&&this.fireSplashParticles(),0==this.scene.physicsManager.isTouchingWater&&(this.firingSplashParticles=!1),0==Game.isLowEndIPad&&this.showWakeSprites(),this.showSideSplashSprites()},e.prototype.showWakeSprites=function(){for(var e=0;e<this.wakeSprites.length;e++){var t=this.wakeSprites[e],i=-t.rotation;if(t.alpha-=.06,0==this.scene.physicsManager.isTouchingSlope&&(t.rotation+=i/6),t.scale.y-=.04,t.alpha<0){var s=Game.getRandom(1,3)*this.scene.physicsManager.playerVelocityMagnitude/300;t.scale.x=s,t.scale.y=s,t.position.x=this.container.position.x-100;var o=this.scene.riverManager.currentChunk;if(1==this.scene.physicsManager.isTouchingSlope){t.alpha=Game.getRandom(.8,1);var a=o.dropHeight/o.slopeSprite.width,r=this.container.position.x-o.container.position.x+o.width/2,n=o.dropHeight-r*a,h=Math.atan(o.slopeSprite.height/o.slopeSprite.width);t.position.y=o.container.position.y-n-10,t.rotation=h}else 1==this.scene.physicsManager.isTouchingWater&&(t.alpha=Game.getRandom(.8,1),t.rotation=Game.getRandom(-.3,.3),t.position.y=o.container.position.y+10);break}}},e.prototype.showSideSplashSprites=function(){for(var e=0;e<this.sideSplashSprites.length;e++){var t=this.sideSplashSprites[e],i=-t.rotation;if(t.alpha-=.04,0==this.scene.physicsManager.isTouchingSlope&&(t.rotation+=i/6),t.scale.y+=Game.getRandom(-.01,-.03),t.alpha<0){var s=.2+Game.getRandom(.6,2)*this.scene.physicsManager.playerVelocityMagnitude/300;t.scale.x=s*Game.getRandom(.9,1.3),t.scale.y=s;var o=this.scene.riverManager.currentChunk;if(1==this.scene.physicsManager.isTouchingSlope){t.alpha=Game.getRandom(.8,1);var a=Math.atan(o.slopeSprite.height/o.slopeSprite.width)+.1,r=90-260*(a-this.container.rotation);t.position.x=this.container.position.x+r;var n=o.dropHeight/o.slopeSprite.width,h=this.container.position.x-o.container.position.x+o.width/2+r+60,l=o.dropHeight-h*n;t.rotation=a-Game.getRandom(0,.1),t.position.y=o.container.position.y-l}else 1==this.scene.physicsManager.isTouchingWater&&(t.alpha=Game.getRandom(.8,1),0==Game.isLowEndIPad?t.position.x=this.streamOffsetX+this.container.position.x-30:t.position.x=this.streamOffsetX+this.container.position.x,t.position.y=this.scene.riverManager.currentChunk.container.position.y+7);break}}},e.prototype.showSpray=function(e){1==e?0==Game.isLowEndIPad&&this.sprayParticles&&0==this.sprayParticles.enabled&&this.sprayParticles.enable():0==Game.isLowEndIPad&&this.sprayParticles.disable()},e.prototype.fireSplashParticles=function(){if(this.firingSplashParticles=!0,this.splashParticles&&0==this.scene.starting){var e=180+this.scene.physicsManager.logFlumeBody.velocity[0]/7;e>270&&(e=270);var t=200*this.scene.physicsManager.playerVelocityMagnitude/120*(1.6-Math.abs(this.container.rotation));t>1500&&(t=1500);var i=180+this.scene.physicsManager.logFlumeBody.velocity[0]/6;i>310&&(i=310),t>900?Game.playSound("waterfall-wipeout/splash-big-"+Game.getRandom(1,4,!0)+".mp3"):Game.playSound("waterfall-wipeout/splash-small.mp3");var s={lowerAngle:i,upperAngle:360,lowerVelocity:100*this.scene.physicsManager.playerVelocityMagnitude/120*(1.3-this.container.rotation),upperVelocity:t,endScale:0,lowerStartScale:.1+this.scene.physicsManager.playerVelocityMagnitude/250*(1.3-this.container.rotation),upperStartScale:2+this.scene.physicsManager.playerVelocityMagnitude/250*(1.3-this.container.rotation),friction:.07,XstartRange:130-100*Math.abs(this.container.rotation),YstartRange:10,stagger:500,endAlpha:0,startAlpha:Game.getRandom(.7,1),scaleInTime:10,fadeInTime:15,rotationPower:3,time:1};this.splashParticles.updateParams(s,this.splashParticles),this.splashParticles.fire(),this.splashParticles.container.position.x=this.container.position.x+30+this.scene.physicsManager.logFlumeBody.velocity[0]/6+20*this.container.rotation,this.splashParticles.container.position.y=this.scene.riverManager.currentChunk.container.position.y}},e.prototype.pause=function(){this.sprayParticles&&this.sprayParticles.pause(),this.splashParticles&&this.splashParticles.pause(),1==this.scene.powerupIsActive&&this.motorFan.stop(),this.scene.pauseResumeTween(this.activatePowerupTimeline,"pause"),Game.pauseSound("waterfall-wipeout/speedboat-constant.mp3"),Game.pauseSound("waterfall-wipeout/waterfall-small.mp3")},e.prototype.resume=function(){this.sprayParticles&&this.sprayParticles.resume(),this.splashParticles&&this.splashParticles.resume(),1==this.scene.powerupIsActive&&this.motorFan.gotoAndPlay(0),Game.resumeSound("waterfall-wipeout/waterfall-small.mp3"),Game.resumeSound("waterfall-wipeout/speedboat-constant.mp3")},e.prototype.activatePowerup=function(){this.motorTop.position.x=100,0==Game.isLowEndIPad?this.scene.riverManager.addLogFlumeSprites([this.wakeHolder,this.logFlumeBack,this.playerTorso,this.playerHead,this.container,this.playerArm]):this.scene.riverManager.addLogFlumeSprites([this.wakeHolder,this.logFlumeBack,this.container]),this.addSprites(),Game.playSound("waterfall-wipeout/speedboat-rev.mp3"),this.activatePowerupTimeline=this.scene.killTween(this.activatePowerupTimeline),this.activatePowerupTimeline=new TimelineMax,this.activatePowerupTimeline.add([TweenMax.to([this.inflatableFront.scale,this.inflatableBack.scale],.4,{ease:Elastic.easeOut,x:1}),TweenMax.to(this.motorTop.scale,.4,{ease:Elastic.easeOut,x:1,y:1}),TweenMax.to(this.motorTop.position,.4,{ease:Elastic.easeOut,x:40}),TweenMax.to(this.motorHolder,.6,{rotation:.25,ease:Back.easeOut})]),this.activatePowerupTimeline.call(Game.playSound,["waterfall-wipeout/speedboat-accelerate.mp3"],this,.2),this.activatePowerupTimeline.call(Game.playSound,["waterfall-wipeout/speedboat-constant.mp3"],this,1.55),this.activatePowerupTimeline.add([TweenMax.to([this.inflatableFront.scale,this.inflatableBack.scale],.4,{ease:Elastic.easeOut,y:1}),TweenMax.to([this.motorPole.scale,this.motorPole.scale],.3,{ease:Back.easeOut,y:1})],.1),this.activatePowerupTimeline.add(TweenMax.to([this.motorFan.scale,this.motorFan.scale],.3,{ease:Back.easeOut,x:1}),.4),this.activatePowerupTimeline.add(TweenMax.to([this.motorTop.position],.05,{ease:Back.easeInOut,y:"-=2",yoyo:!0,repeat:-1})),this.motorFan.gotoAndPlay(0)},e.prototype.deactivatePowerup=function(){Game.stopSound("waterfall-wipeout/speedboat-constant.mp3"),Game.playSound("waterfall-wipeout/speedboat-decelerate.mp3"),0==Game.isLowEndIPad?this.scene.riverManager.addLogFlumeSprites([this.wakeHolder,this.logFlumeBack,this.playerTorso,this.playerHead,this.container,this.playerArm]):this.scene.riverManager.addLogFlumeSprites([this.wakeHolder,this.logFlumeBack,this.container]),this.scene.riverManager.container.addChild(this.logWaterEffectsHolder),this.activatePowerupTimeline=this.scene.killTween(this.activatePowerupTimeline),this.activatePowerupTimeline=new TimelineMax,this.activatePowerupTimeline.add([TweenMax.to([this.inflatableFront.scale,this.inflatableBack.scale],.2,{ease:Back.easeIn,y:0}),TweenMax.to([this.motorHolder],.4,{ease:Back.easeIn,rotation:0}),TweenMax.to([this.motorFan.scale,this.motorFan.scale],.2,{ease:Back.easeIn,x:0})]),this.activatePowerupTimeline.add(TweenMax.to([this.inflatableFront.scale,this.inflatableBack.scale],.2,{ease:Back.easeIn,x:0}),.1),this.activatePowerupTimeline.add(TweenMax.to(this.motorPole.scale,.2,{ease:Back.easeIn,y:0})),this.activatePowerupTimeline.add([TweenMax.to(this.motorTop.scale,.2,{ease:Back.easeIn,x:0,y:0}),TweenMax.to(this.motorTop.position,.2,{ease:Back.easeIn,x:100})]),this.motorFan.stop()},e.prototype.triggerImpact=function(){var e=this.changeInVelocityMagnitude/15;e>1&&(e=1),e<.1||this.impactTimeout>0||(Game.playSound("waterfall-wipeout/thud-wood-"+Game.getRandom(1,3,!0)+".mp3",e),this.impactTimeout=10)},e.prototype.destroy=function(){this.sprayParticles&&this.sprayParticles.destroy(),this.splashParticles&&this.splashParticles.destroy(),Game.stopSound("waterfall-wipeout/speedboat-constant.mp3"),Game.stopSound("waterfall-wipeout/waterfall-small.mp3");for(e=0;e<this.wakeSprites.length;e++)Game.displayStore.returnPooledItem(this.wakeSprites[e]);for(var e=0;e<this.sideSplashSprites.length;e++)Game.displayStore.returnPooledItem(this.sideSplashSprites[e]);Game.displayStore.returnPooledItem(this.logWaterFramesMask)},e}(),WaterfallWipeoutTicket=function(){function e(e,t){this.scene=e,this.game=e.game,this.index=t,this.available=!0,this.destroyed=!1,this.magnetise=!1,this.body=new p2.Body,this.shape=new p2.Circle({radius:70,sensor:!0}),this.body.addShape(this.shape),this.shape.collisionGroup=this.scene.physicsManager.TICKET,this.shape.collisionMask=this.scene.physicsManager.PLAYER|this.scene.physicsManager.SEAT|this.scene.physicsManager.HULL}return e.prototype.spawn=function(e,t){if(1!=this.destroyed){this.available=!1;Game.coreData.getCurrentTickets(),Game.coreData.getCurrentRide().startingTickets;this.ticket=Game.ticketPool.getTicket(),this.mainHolder=e,this.body.position[0]=t.x,this.body.position[1]=Game.stageHeight-t.y,this.scene.physicsManager.bindSpriteToBody(this.ticket.container,this.body),this.magnetise=!1,this.scene.physicsManager.addBodyToWorld(this.body),this.mainHolder.addChild(this.ticket.container)}},e.prototype.collect=function(){this.scene.physicsManager.removeBodyFromWorld(this.body),this.magnetise=!0},e.prototype.tick=function(){var e;e=0==Game.isLowEndIPad?this.scene.physicsManager.torsoBody:this.scene.physicsManager.logFlumeBody,this.body.overlaps(e)&&0==this.available&&(this.available=!0,this.ticket.collect())},e.prototype.getDistance=function(e,t){var i=0,s=0;return i=t.x-e.x,i*=i,s=t.y-e.y,s*=s,Math.sqrt(i+s)},e.prototype.pause=function(){this.ticket&&this.ticket.pause()},e.prototype.resume=function(){this.ticket&&this.ticket.resume()},e.prototype.destroy=function(){this.destroyed=!0,this.ticket?(this.ticket.container&&this.scene.physicsManager.unbindSpriteFromBody(this.ticket.container),this.body&&(this.scene.physicsManager.removeBodyFromWorld(this.body),this.body=null),this.ticket&&this.ticket.destroy()):this.body=null},e}(),HoverDriftCourseManager=function(){function e(e){this.scene=e,this.trackWidth=1800,this.trackCentrePoint=0,this.waveFrequency=2e3,this.waveAmplitude=500,this.skewChangeThreshold=100,this.trackWidthVariance=0,this.skew=0,this.ticker=0,this.renderSpriteScale=2,1==Game.isLowEndIPad&&(this.renderSpriteScale=5),this.currentSkewAmount=0,this.targetSkewAmount=0,this.skewTimer=0,this.spawnIndex=0,this.distanceToNextCheckpoint=1e3,this.ticketOpportunities=0,this.whiteSquare=Game.displayStore.getSprite("hover-drift/white-square"),this.whiteSquare.width=2e3,this.whiteSquare.tint=3061876,this.currentTyre=0,this.boundrybackground=Game.displayStore.getContainer("hover-drift/boundry-background"),this.dashedLineContainer=Game.displayStore.getContainer("hover-drift/dashed-line-container");for(l=0;l<9;l++){var t=Game.displayStore.getSprite("hover-drift/dashed-line");t.position.x=t.width*l,this.dashedLineContainer.addChild(t)}this.container=Game.displayStore.getContainer("hover-drift/course-container"),this.boundryCirclesLeft=[],this.boundryCirclesRight=[],0==Game.isLowEndIPad&&(this.boundryCircleRopeLeft=[],this.boundryCircleRopeRight=[]),this.ticket=new HoverDriftTicket(this.scene,0),this.waterTextureHolder=Game.displayStore.getContainer("hover-drift/water-texture-holder"),this.shorelineHolder=Game.displayStore.getContainer("hover-drift/shoreline-holder"),this.container.addChild(this.waterTextureHolder),this.container.addChild(this.shorelineHolder),this.container.addChild(this.boundrybackground);var i;i=1==Game.isLowEndIPad?15:20;var s=1;if(1==Game.isLowEndIPad&&(s=0),this.waterMarksArray=new Array,0==Game.isLowEndIPad)for(l=0;l<10;l++){var o=Game.getRandom(10,200),a=Game.getRandom(.4,1);this.waterMarksArray.push({sprite:Game.displayStore.getSprite("hover-drift/water-mark-1.png"),active:!1,delay:o,speed:a}),this.waterMarksArray.push({sprite:Game.displayStore.getSprite("hover-drift/water-mark-2.png"),active:!1,delay:o,speed:a}),this.waterMarksArray.push({sprite:Game.displayStore.getSprite("hover-drift/water-mark-3.png"),active:!1,delay:o,speed:a})}for(l=0;l<this.waterMarksArray.length;l++){var r=this.waterMarksArray[l].sprite;r.position.x=Game.getRandom(2*-Game.stageWidth,-Game.stageWidth),r.position.y=Game.getRandom(0,3*Game.stageHeight)+300,r.scale.x=r.scale.y=2,this.waterTextureHolder.addChild(this.waterMarksArray[l].sprite)}if(0==Game.isLowEndIPad)for(l=0;l<i-1;l++){var n=Game.displayStore.getSprite("hover-drift/boundry-rope");this.container.addChild(n);var h=Game.displayStore.getSprite("hover-drift/boundry-rope");this.container.addChild(h),this.boundryCircleRopeLeft.push(n),this.boundryCircleRopeRight.push(h)}for(var l=0;l<i;l++){var p=new HoverDriftBoundryCircle(this.scene,s,l,"left"),c=new HoverDriftBoundryCircle(this.scene,s,l,"right");this.boundryCirclesLeft.push(p),this.boundryCirclesRight.push(c),p.wakeSprite1&&(this.boundrybackground.addChild(p.wakeSprite1),this.boundrybackground.addChild(p.wakeSprite2)),this.container.addChild(p.sprite),this.container.addChild(c.sprite)}this.container.addChild(this.dashedLineContainer),this.checkpointLeft=new HoverDriftCheckpoint(this.scene,"left",this.boundrybackground),this.checkpointRight=new HoverDriftCheckpoint(this.scene,"right",this.boundrybackground),this.container.addChild(this.checkpointLeft.container),this.container.addChild(this.checkpointRight.container),this.shorelineGraphics=new PIXI.Graphics,this.beachGraphics=new PIXI.Graphics,this.beachLightGraphics=new PIXI.Graphics,this.waterEdgeGraphics=new PIXI.Graphics,Game.displayStore.isItemInDisplayStore("shoreline-texture-1")?(this.shorelineTexture={outputSprite:null,renderTexture:null},this.shorelineTexture.outputSprite=Game.displayStore.isItemInDisplayStore("shoreline-texture-1"),this.shorelineTexture.renderTexture=Game.displayStore.isItemInDisplayStore("shoreline-texture-1").texture):this.shorelineTexture=Game.displayStore.getRenderTexture("shoreline-texture-1",2800/this.renderSpriteScale,2500/this.renderSpriteScale,"hoverdrift-wipeout-assets",!1),this.shorelineHolder.addChild(this.shorelineTexture.outputSprite),this.shorelineHolder.addChild(this.whiteSquare),this.positionBoundry(),this.drawShoreline(),this.checkpointLeft.spawn([this.boundryCirclesLeft[this.boundryCirclesLeft.length-1].body.position[0]+220,this.boundryCirclesLeft[this.boundryCirclesLeft.length-1].body.position[1]]),this.checkpointRight.spawn([this.boundryCirclesLeft[this.boundryCirclesLeft.length-1].body.position[0]+220+this.trackWidth-440,this.boundryCirclesLeft[this.boundryCirclesLeft.length-1].body.position[1]]),this.dashedLineContainer.position.x=this.checkpointLeft.body.position[0],this.dashedLineContainer.position.y=Game.stageHeight-this.checkpointLeft.body.position[1],this.dashedLineContainer.width=this.checkpointRight.body.position[0]-this.checkpointLeft.body.position[0]}return e.prototype.positionBoundry=function(){for(p=0;p<this.boundryCirclesLeft.length;p++){var e=this.boundryCirclesLeft[p],t=this.boundryCirclesLeft[p-1],i=this.boundryCirclesRight[p],s=this.boundryCirclesRight[p-1];e.body.position[1]=210*p,i.body.position[1]=210*p,this.trackCentrePoint=Math.sin(e.body.position[1]/this.waveFrequency)*this.waveAmplitude,e.body.position[0]=this.trackCentrePoint-this.trackWidth/2,i.body.position[0]=this.trackCentrePoint+this.trackWidth/2,e.spawnedX=e.body.position[0],i.spawnedX=i.body.position[0];var o=new p2.LockConstraint(e.body,this.scene.physicsManager.levelBody,{collideConnected:!1,maxForce:600}),a=new p2.LockConstraint(i.body,this.scene.physicsManager.levelBody,{collideConnected:!1,maxForce:600});if(this.boundryCirclesLeft[p].lock=o,this.boundryCirclesRight[p].lock=a,t){var r=new p2.LinearSpring(e.body,t.body,{restLength:210,stiffness:40,damping:4});if(this.boundryCirclesLeft[p].spring=r,0==Game.isLowEndIPad){var n=this.boundryCircleRopeLeft[p-1];this.positionRope(e,t,n),this.scene.physicsManager.addSpringToWorld(r)}}if(s){var h=new p2.LinearSpring(i.body,s.body,{restLength:210,stiffness:40,damping:4});if(this.boundryCirclesRight[p].spring=h,0==Game.isLowEndIPad){var l=this.boundryCircleRopeRight[p-1];this.positionRope(i,s,l),this.scene.physicsManager.addSpringToWorld(h)}}0==Game.isLowEndIPad&&(this.scene.physicsManager.addConstraintToWorld(o),this.scene.physicsManager.addConstraintToWorld(a))}this.scene.physicsManager.stepPhysics();for(var p=0;p<this.boundryCirclesLeft.length;p++)this.boundryCirclesLeft[p].updateWakespritePos()},e.prototype.drawShoreline=function(){this.waterEdgeGraphics.clear(),this.waterEdgeGraphics.beginFill(16642275,.3),this.beachLightGraphics.clear(),this.beachLightGraphics.beginFill(16642275,1),this.beachGraphics.clear(),this.beachGraphics.beginFill(16505529,1),this.shorelineGraphics.clear(),this.shorelineGraphics.beginFill(3061876,1);var e=this.boundryCirclesRight[0].sprite.x,t=this.boundryCirclesRight[0].sprite.x;this.shorelineGraphics.position.x=0,this.shorelineGraphics.position.y=0,this.beachGraphics.position.x=0,this.beachGraphics.position.y=0,this.beachLightGraphics.position.x=0,this.beachLightGraphics.position.y=0,this.waterEdgeGraphics.position.x=0,this.waterEdgeGraphics.position.y=0,this.waterEdgeGraphics.moveTo(this.boundryCirclesRight[0].sprite.x+-350,this.boundryCirclesRight[0].sprite.y),this.beachLightGraphics.moveTo(this.boundryCirclesRight[0].sprite.x+-150,this.boundryCirclesRight[0].sprite.y),this.beachGraphics.moveTo(this.boundryCirclesRight[0].sprite.x+-50,this.boundryCirclesRight[0].sprite.y),this.shorelineGraphics.moveTo(this.boundryCirclesRight[0].sprite.x+300,this.boundryCirclesRight[0].sprite.y);for(var i=0;i<=12;i++){var s=this.boundryCirclesRight[i].randomShorelineDistance;this.waterEdgeGraphics.lineTo(this.boundryCirclesRight[i].sprite.x+-350+.25*s,this.boundryCirclesRight[i].sprite.y),this.beachLightGraphics.lineTo(this.boundryCirclesRight[i].sprite.x+-150+.5*s,this.boundryCirclesRight[i].sprite.y),this.beachGraphics.lineTo(this.boundryCirclesRight[i].sprite.x+-50+.75*s,this.boundryCirclesRight[i].sprite.y),this.shorelineGraphics.lineTo(this.boundryCirclesRight[i].sprite.x+300+s,this.boundryCirclesRight[i].sprite.y),this.boundryCirclesRight[i].sprite.x+300+s>e&&(e=this.boundryCirclesRight[i].sprite.x+300+s),this.boundryCirclesRight[i].sprite.x+-350+s<t&&(t=this.boundryCirclesRight[i].sprite.x+-350+s)}this.waterEdgeGraphics.lineTo(e+-350,this.boundryCirclesRight[12].sprite.y),this.beachLightGraphics.lineTo(e+-150,this.boundryCirclesRight[12].sprite.y),this.beachGraphics.lineTo(e+-50+150,this.boundryCirclesRight[12].sprite.y),this.shorelineGraphics.lineTo(e+300,this.boundryCirclesRight[12].sprite.y),this.waterEdgeGraphics.lineTo(e+-350,this.boundryCirclesRight[0].sprite.y),this.beachLightGraphics.lineTo(e+-150,this.boundryCirclesRight[0].sprite.y),this.beachGraphics.lineTo(e+-50+150,this.boundryCirclesRight[0].sprite.y),this.shorelineGraphics.lineTo(e+300,this.boundryCirclesRight[0].sprite.y),this.waterEdgeGraphics.moveTo(this.boundryCirclesRight[0].sprite.x+-350,this.boundryCirclesRight[0].sprite.y),this.beachLightGraphics.moveTo(this.boundryCirclesRight[0].sprite.x+-150,this.boundryCirclesRight[0].sprite.y),this.beachGraphics.moveTo(this.boundryCirclesRight[0].sprite.x+-50,this.boundryCirclesRight[0].sprite.y),this.shorelineGraphics.moveTo(this.boundryCirclesRight[0].sprite.x+300,this.boundryCirclesRight[0].sprite.y),this.waterEdgeGraphics.position.x-=t,this.waterEdgeGraphics.position.y-=this.boundryCirclesRight[12].sprite.y,this.beachLightGraphics.position.x-=t,this.beachLightGraphics.position.y-=this.boundryCirclesRight[12].sprite.y,this.beachGraphics.position.x-=t,this.beachGraphics.position.y-=this.boundryCirclesRight[12].sprite.y,this.shorelineGraphics.position.x-=t,this.shorelineGraphics.position.y-=this.boundryCirclesRight[12].sprite.y;var o=new PIXI.Matrix;o.scale(1/this.renderSpriteScale,1/this.renderSpriteScale),Game.renderer.render(this.waterEdgeGraphics,this.shorelineTexture.renderTexture,!0,o),Game.renderer.render(this.beachLightGraphics,this.shorelineTexture.renderTexture,!1,o),Game.renderer.render(this.beachGraphics,this.shorelineTexture.renderTexture,!1,o),Game.renderer.render(this.shorelineGraphics,this.shorelineTexture.renderTexture,!1,o),this.shorelineTexture.outputSprite.scale.x=this.shorelineTexture.outputSprite.scale.y=this.renderSpriteScale,this.shorelineTexture.outputSprite.position.x=t,this.shorelineTexture.outputSprite.position.y=this.boundryCirclesRight[12].sprite.y,this.whiteSquare.height=this.shorelineTexture.outputSprite.height,this.whiteSquare.position.x=e,this.whiteSquare.position.y=this.shorelineTexture.outputSprite.position.y},e.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},e.prototype.positionRope=function(e,t,i){var s=e,o=t,a=i,r=this.scene.physicsManager.getDistance(s.body.position[0],s.body.position[1],o.body.position[0],o.body.position[1]),n=this.getAngle(s.body.position[0],s.body.position[1],o.body.position[0],o.body.position[1]);a.height=r,a.rotation=-n+Math.PI/2,a.position.x=s.body.position[0],a.position.y=Game.stageHeight-s.body.position[1]},e.prototype.tick=function(){this.checkpointLeft.tick(this.ticker),this.checkpointRight.tick(this.ticker);for(t=0;t<this.boundryCirclesLeft.length;t++)this.boundryCirclesLeft[t].tick(),this.boundryCirclesRight[t].tick(),this.boundryCirclesLeft[t].lock.localOffsetB[0]=-this.boundryCirclesLeft[t].spawnedX+20*Math.cos(this.ticker/(this.boundryCirclesLeft[t].index+15));this.scene.container.toLocal(new PIXI.Point,this.boundryCirclesLeft[0].sprite).y-this.boundryCirclesLeft[0].sprite.height/2>Game.stageHeight&&this.scene.physicsManager.craftBody.velocity[1]>80&&this.spawnBoundryCircle(this.boundryCirclesLeft,0),this.scene.container.toLocal(new PIXI.Point,this.boundryCirclesRight[0].sprite).y-this.boundryCirclesRight[0].sprite.height/2>Game.stageHeight&&this.scene.physicsManager.craftBody.velocity[1]>80&&this.spawnBoundryCircle(this.boundryCirclesRight,0),this.checkpointLeft.body.position[1]-this.scene.physicsManager.craftBody.position[1]<160&&0==this.checkpointLeft.passed&&(this.checkpointLeft.pass(),this.checkpointRight.pass()),this.trackWidth=1800+Math.sin(this.boundryCirclesLeft[this.boundryCirclesLeft.length-1].body.position[1]/1e3)*this.trackWidthVariance,this.checkpointWidth=this.trackWidth,this.scene.miniMap.update(),this.ticket.body&&0==this.ticket.available&&this.ticket.tick(),this.ticket.body&&0==this.ticket.available&&this.ticket.body.position[1]<this.scene.player.container.position.y-500&&this.ticket.destroy(),this.scene.container.toLocal(new PIXI.Point,this.shorelineTexture.outputSprite).y>0&&this.drawShoreline(),this.waterTextureHolder.position.x=this.scene.player.container.position.x,this.waterTextureHolder.position.y=this.scene.player.container.position.y-3*Game.stageHeight-300;for(t=0;t<this.waterMarksArray.length;t++){var e=this.waterMarksArray[t];e.sprite.position.x-=this.scene.physicsManager.craftBody.velocity[0]/30,e.sprite.position.y+=this.scene.physicsManager.craftBody.velocity[1]/30,e.sprite.position.x+=5*e.speed,e.sprite.alpha-=e.speed/450,e.sprite.scale.x+=e.speed/350,e.sprite.scale.y+=e.speed/150,e.sprite.position.y>2400&&(e.sprite.position.x=Game.getRandom(2*-Game.stageWidth,Game.stageWidth),e.sprite.position.y=0-2*e.sprite.height,e.sprite.alpha=Game.getRandom(.7,1),e.sprite.scale.x=2,e.sprite.scale.y=2),(e.sprite.position.x>2*Game.stageWidth||e.sprite.alpha<=0)&&(e.sprite.position.x=2*-Game.stageWidth,e.sprite.alpha=Game.getRandom(.7,1),e.sprite.scale.x=2,e.sprite.scale.y=2)}if(0==Game.isLowEndIPad)for(var t=0;t<this.boundryCircleRopeLeft.length;t++){var i=this.boundryCirclesLeft[t+1],s=this.boundryCirclesLeft[t],o=this.boundryCircleRopeLeft[t],a=this.boundryCirclesRight[t+1],r=this.boundryCirclesRight[t],n=this.boundryCircleRopeRight[t];this.positionRope(i,s,o),this.positionRope(a,r,n)}this.ticker++},e.prototype.spawnBoundryCircle=function(e,t){var i;this.spawnIndex+=1,i=e==this.boundryCirclesLeft?"left":"right",this.currentSkewAmount+=(this.targetSkewAmount-this.currentSkewAmount)/100,this.skew+=this.currentSkewAmount;var s;if(this.spawnIndex%120==0){this.checkpointLeft.spawn([this.boundryCirclesLeft[this.boundryCirclesLeft.length-1].body.position[0]+220,this.boundryCirclesLeft[this.boundryCirclesLeft.length-1].body.position[1]]),this.checkpointRight.spawn([this.boundryCirclesLeft[this.boundryCirclesLeft.length-1].body.position[0]+220+this.trackWidth-440,this.boundryCirclesLeft[this.boundryCirclesLeft.length-1].body.position[1]]),this.dashedLineContainer.position.x=this.checkpointLeft.body.position[0],this.dashedLineContainer.position.y=Game.stageHeight-this.checkpointLeft.body.position[1],this.dashedLineContainer.width=this.checkpointRight.body.position[0]-this.checkpointLeft.body.position[0];var o=new PIXI.Point(this.trackCentrePoint,this.boundryCirclesRight[this.boundryCirclesRight.length-1].sprite.position.y-550);this.ticket=new HoverDriftTicket(this.scene,0),this.ticket.spawn(this.container,o)}s=e[e.length-1];var a=e[t+1].spring;e[t+1].spring=null,this.scene.physicsManager.removeSpringFromWorld(a);var r=e[t].lock;if(this.scene.physicsManager.removeConstraintFromWorld(r),this.waveAmplitude<1e3&&(this.waveAmplitude+=.5),this.waveFrequency=2e3-Math.round(300*Math.sin((s.body.position[1]+210)/4e4)),this.scene.physicsManager.updateBottomWallPosition(e[t].body.position[1]+400),this.trackCentrePoint=Math.sin((s.body.position[1]+210)/this.waveFrequency)*this.waveAmplitude,this.trackCentrePoint+=this.skew,"left"==i?(e[t].body.position[0]=this.trackCentrePoint-this.trackWidth/2,e[t].body.position[1]=s.body.position[1]+210):(e[t].body.position[0]=this.trackCentrePoint+this.trackWidth/2,e[t].body.position[1]=s.body.position[1]+210),e[t].spawnedX=e[t].body.position[0],this.scene.physicsManager.resetBody(e[t].body),e[t].sprite.position.x=e[t].body.position[0],e[t].sprite.position.y=Game.stageHeight-e[t].body.position[1],0==Game.isLowEndIPad){e[t].lock=new p2.LockConstraint(e[t].body,this.scene.physicsManager.levelBody,{collideConnected:!1,maxForce:600*this.scene.powerupRatio}),this.scene.physicsManager.addConstraintToWorld(e[t].lock);var n=this.scene.physicsManager.getDistance(e[t].body.position[0],e[t].body.position[1],s.body.position[0],s.body.position[1]);e[t].spring=new p2.LinearSpring(e[t].body,s.body,{restLength:n,stiffness:40*this.scene.powerupRatio,damping:3*this.scene.powerupRatio}),this.scene.physicsManager.addSpringToWorld(e[t].spring)}e.push(e.shift()),this.skewTimer++,this.trackWidthVariance<400&&(this.trackWidthVariance+=.5),this.skewTimer==this.skewChangeThreshold&&(this.skewTimer=0,this.getNewSkewAmount()),"left"==i&&this.scene.updateScore(1)},e.prototype.getNewSkewAmount=function(){this.targetSkewAmount=Game.getRandom(-20,60,!0),this.skewChangeThreshold=Game.getRandom(80,140,!0)},e.prototype.pause=function(){this.checkpointLeft.pause(),this.checkpointRight.pause()},e.prototype.resume=function(){this.checkpointLeft.resume(),this.checkpointRight.resume()},e.prototype.destroy=function(){if(this.ticket.destroy(),Game.displayStore.returnPooledItem(this.checkpointLeft.wakeSprite1),Game.displayStore.returnPooledItem(this.checkpointLeft.wakeSprite2),Game.displayStore.returnPooledItem(this.checkpointRight.wakeSprite1),Game.displayStore.returnPooledItem(this.checkpointRight.wakeSprite2),0==Game.isLowEndIPad){for(e=0;e<this.boundryCircleRopeLeft.length;e++)Game.displayStore.returnPooledItem(this.boundryCircleRopeLeft[e]);for(e=0;e<this.boundryCircleRopeRight.length;e++)Game.displayStore.returnPooledItem(this.boundryCircleRopeRight[e])}for(e=0;e<this.checkpointLeft.container.children.length;e++)Game.displayStore.returnPooledItem(this.checkpointLeft.container.getChildAt(e));Game.displayStore.returnPooledItem(this.checkpointLeft.container);for(e=0;e<this.checkpointRight.container.children.length;e++)Game.displayStore.returnPooledItem(this.checkpointRight.container.getChildAt(e));Game.displayStore.returnPooledItem(this.checkpointRight.container);for(e=0;e<this.boundryCirclesLeft.length;e++)this.boundryCirclesLeft[e].destroy(),this.boundryCirclesRight[e].destroy();for(e=0;e<this.dashedLineContainer.children.length;e++)Game.displayStore.returnPooledItem(this.dashedLineContainer.getSpriteAt(e));for(var e=0;e<this.waterMarksArray.length;e++)Game.displayStore.returnPooledItem(this.waterMarksArray[e].sprite);this.checkpointLeft.destroy(),this.checkpointRight.destroy()},e}(),HoverDriftInputManager=function(){function e(e,t){this.scene=e,this.mainHolderRef=t,this.hitAreaSprite=Game.displayStore.getSprite("hover-drift/blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.currentAngle=0,this.enginePlaying=!1,this.maxAngleDiff=1.4,this.minAngleDiff=.1,this.keyboardDown=!1,this.driveForce=0,this.targetDriveForce=0,this.steeringForce=0,this.targetSteeringForce=0,this.joystickLeftActive=!1,this.joystickRightActive=!1,this.currentTouches=[],this.currentTouches[0]=new PIXI.Point,this.currentTouches[1]=new PIXI.Point,this.startTouchPos=new PIXI.Point(0,0),this.currentTouchPos=new PIXI.Point(0,0),this.rightKeyPos=new PIXI.Point(Game.stageWidth/2,Game.stageHeight/2),this.leftKeyPos=new PIXI.Point(Game.stageWidth/2,Game.stageHeight/2),this.keyboardInput="none",this.startAngle=0,this.currentAngle=0,this.lastAngle=0,this.keyboardDown=!1,this.angleDir=0,this.lastAngleDir=0,this.walkForce=0,this.mouseDistance=0,this.angleLimit=.7,this.multipleEventFixBoolean=!1,this.scene.uiLayer.addChild(this.hitAreaSprite),this.scene.physicsManager.steer(this.steeringForce)}return e.prototype.initControls=function(){},e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mousemove",function(e){t.mouseMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseupoutside",function(e){})):(e.on("touchstart",function(e){t.inputDown(t,e.data.originalEvent.touches)}),e.on("touchmove",function(e){t.inputMove(t,e.data.originalEvent.touches)}),e.on("touchend",function(e){t.inputUp(t,e.data.originalEvent.touches)}),e.on("touchendoutside",function(e){t.inputUp(t,e.data.originalEvent.touches)}))},e.prototype.inputDown=function(e,t){for(var i=0;i<t.length;i++)t[i].clientX/Game.windowScaleFactor<Game.stageWidth/2&&0==e.joystickLeftActive&&(e.joystickLeftActive=!0,e.leftTouchIndex=i,e.currentTouches[i].x=e.joystickLeft.position.x,e.currentTouches[i].y=e.joystickLeft.position.y),t[i].clientX/Game.windowScaleFactor>Game.stageWidth/2&&e.joystickRightActive;e.mouseDown=!0},e.prototype.mouseMove=function(e,t){},e.prototype.inputUp=function(e,t){t[0]||(e.mouseDown=!1,e.walkForce=0,e.mouseDistance=0,e.leftTouchIndex=null,e.rightTouchIndex=null,e.joystickRightActive=!1),t[0]&&(t[0].clientX/Game.windowScaleFactor>Game.stageWidth/2&&(e.joystickLeftActive=!1),t[0].clientX/Game.windowScaleFactor<Game.stageWidth/2&&(1==e.leftTouchIndex&&(e.currentTouches[0].x=e.currentTouches[1].x,e.currentTouches[0].y=e.currentTouches[1].y),e.mouseDistance=0,e.joystickRightActive=!1,e.leftTouchIndex=0,e.rightTouchIndex=null))},e.prototype.inputMove=function(e,t){e.currentTouches[0].x=(t[0].clientX-Game.gameOffset.x)/Game.windowScaleFactor,e.currentTouches[0].y=(t[0].clientY-Game.gameOffset.y)/Game.windowScaleFactor,t.length>1&&(e.currentTouches[1].x=(t[1].clientX-Game.gameOffset.x)/Game.windowScaleFactor,e.currentTouches[1].y=(t[1].clientY-Game.gameOffset.y)/Game.windowScaleFactor)},e.prototype.keyOut=function(e){"left"!=e&&"right"!=e||(this.targetSteeringForce=0),"up"!=e&&"down"!=e||(this.targetDriveForce=0)},e.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},e.prototype.getInputAngle=function(){var e=this.currentAngle;return e>this.maxAngleDiff&&(e=this.maxAngleDiff),e<this.minAngleDiff&&(e=this.minAngleDiff),e},e.prototype.keyDown=function(e){switch(this.keyboardInput=e,e){case"left":.5!=this.targetSteeringForce&&(this.targetSteeringForce=.5,Game.playSound("hover-drift/heavy-switch.mp3",.5));break;case"right":-.5!=this.targetSteeringForce&&(this.targetSteeringForce=-.5,Game.playSound("hover-drift/heavy-switch.mp3",.5));break;case"down":this.targetDriveForce=-100;break;case"up":130!=this.targetDriveForce&&(this.targetDriveForce=130);break;case"spacebar":this.keyboardInput="spacebar"}this.keyboardDown=!0},e.prototype.keyUp=function(e){if(1!=this.scene.tutorialOverlayOn){switch(e){case"left":case"right":this.targetSteeringForce=0,Game.playSound("hover-drift/heavy-switch.mp3",.5);break;case"down":this.targetDriveForce=0;break;case"up":if(this.targetDriveForce=0,this.engineSoundDelay=this.scene.killTween(this.engineSoundDelay),1==this.scene.paused)return}this.keyboardDown=!1}},e.prototype.activatePowerup=function(){Game.stopSound("hover-drift/constant.mp3"),this.targetDriveForce>100&&(Game.playSound("hover-drift/thruster.mp3",.8),Game.playSound("hover-drift/speedboat-constant.mp3",.8))},e.prototype.deactivatePowerup=function(){Game.stopSound("hover-drift/thruster.mp3"),Game.stopSound("hover-drift/speedboat-constant.mp3"),this.targetDriveForce>100&&Game.playSound("hover-drift/constant.mp3",.7)},e.prototype.tick=function(){this.targetDriveForce>100&&0==this.enginePlaying&&(this.enginePlaying=!0,1==this.scene.powerupIsActive?(Game.playSound("hover-drift/speedboat-accelerate.mp3",.8),Game.playSound("hover-drift/thruster.mp3",.8),this.engineSoundDelay=TweenMax.delayedCall(1.1,Game.playSound,["hover-drift/speedboat-constant.mp3",.8],this)):(Game.playSound("hover-drift/accelerate.mp3",.7),this.engineSoundDelay=TweenMax.delayedCall(.6,Game.playSound,["hover-drift/constant.mp3",.7],this))),0==this.targetDriveForce&&1==this.enginePlaying&&(this.enginePlaying=!1,1==this.scene.powerupIsActive?(Game.stopSound("hover-drift/speedboat-accelerate.mp3"),Game.stopSound("hover-drift/speedboat-constant.mp3"),Game.stopSound("hover-drift/thruster.mp3"),Game.playSound("hover-drift/speedboat-decelerate.mp3",.8)):(Game.stopSound("hover-drift/accelerate.mp3"),Game.stopSound("hover-drift/constant.mp3"),Game.playSound("hover-drift/decelerate.mp3",.7))),this.steeringForce+=(this.targetSteeringForce-this.steeringForce)/1,this.scene.physicsManager.steer(this.targetSteeringForce),this.driveForce+=(this.targetDriveForce-this.driveForce)/10,this.scene.physicsManager.applyDriveForce(this.driveForce)},e.prototype.pause=function(){Game.pauseSound("hover-drift/constant.mp3"),Game.pauseSound("hover-drift/speedboat-constant.mp3"),Game.pauseSound("hover-drift/thruster.mp3"),this.scene.pauseResumeTween(this.engineSoundDelay,"pause")},e.prototype.resume=function(){Game.resumeSound("hover-drift/constant.mp3"),Game.resumeSound("hover-drift/speedboat-constant.mp3"),Game.resumeSound("hover-drift/thruster.mp3"),this.scene.pauseResumeTween(this.engineSoundDelay,"resume")},e.prototype.destroy=function(){Game.stopSound("hover-drift/constant.mp3"),Game.stopSound("hover-drift/speedboat-constant.mp3"),Game.stopSound("hover-drift/thruster.mp3"),this.hitAreaSprite.removeAllListeners()},e}(),HoverDriftPhysicsManager=function(){function e(e,t){this.physicsEnabled=!0,this.resizeRatio=1,this.HOVERCRAFT=Math.pow(2,0),this.WHEELS=Math.pow(2,1),this.LEVEL=Math.pow(2,2),this.HEAD=Math.pow(2,3),this.DISABLED=Math.pow(2,4),this.TICKET=Math.pow(2,5),this.PLAYER=Math.pow(2,6),this.scene=e,this.mainContainer=t}return e.prototype.initPhysicsWorld=function(){this.world=new p2.World({gravity:[0,0]}),this.craftForce=[],this.fanAngle=0,this.fanPower=0,this.damageTimeout=0,this.lastPlayerVelocityMagnitude=0,this.world.broadphase=new p2.NaiveBroadphase(1),this.boundBodies=[],this.world.defaultContactMaterial.restitution=.01,this.world.defaultContactMaterial.friction=.1,this.levelBody=new p2.Body({position:[0,Game.stageHeight/2]}),this.bottomWallBody=new p2.Body({position:[0,Game.stageHeight/2]}),this.bottomWallShape=new p2.Plane,this.bottomWallBody.addShape(this.bottomWallShape,[0,-Game.stageHeight/2]),this.craftBodyShape=new p2.Circle({radius:100}),this.craftBodyShape.angle=-Math.PI/2,this.craftBody=new p2.Body({mass:.8,position:[0,Game.stageHeight/2]}),this.craftBody.addShape(this.craftBodyShape,[0,0]),this.headrestShape=new p2.Box({width:40,height:40}),this.headrestShapeFront=new p2.Box({width:40,height:40}),this.craftBody.addShape(this.headrestShape,[0,-115]),this.craftBody.addShape(this.headrestShapeFront,[0,112]),this.craftBody.damping=.3,this.craftBody.angularDamping=.2,this.craftBody.applyForce([0,100]),this.characterHead=new p2.Body({mass:.4,position:[0,Game.stageHeight-335]}),this.characterHeadShape=new p2.Circle({radius:60}),this.characterHead.addShape(this.characterHeadShape),this.vehicle=new p2.TopDownVehicle(this.craftBody),this.headConstraint=new p2.LockConstraint(this.craftBody,this.characterHead,{localOffsetB:[0,-5],maxForce:2e3}),this.frontWheel=this.vehicle.addWheel({localPosition:[0,150]}),this.frontWheel.setSideFriction(40),this.backWheel=this.vehicle.addWheel({localPosition:[0,-150]}),this.backWheel.setSideFriction(60),this.vehicle.addToWorld(this.world),this.world.addBody(this.levelBody),this.world.addBody(this.bottomWallBody),this.world.addBody(this.craftBody),this.world.addBody(this.characterHead),this.world.addConstraint(this.headConstraint),this.craftBodyShape.collisionGroup=this.HOVERCRAFT,this.characterHeadShape.collisionGroup=this.HEAD,this.headrestShape.collisionGroup=this.HEAD,this.headrestShapeFront.collisionGroup=this.HEAD,this.craftBodyShape.collisionMask=this.LEVEL|this.HOVERCRAFT|this.TICKET,this.headrestShape.collisionMask=this.HEAD,this.headrestShapeFront.collisionMask=this.HEAD,this.characterHeadShape.collisionMask=this.HEAD;var e=this;this.world.on("beginContact",function(t){e.checkCollision(e,t)}),this.world.on("endContact",function(t){e.checkEndCollision(e,t)}),this.world.on("postStep",function(e){}),this.physicsEnabled=!0},e.prototype.getParticlePhysicsObj=function(){var e=new p2.Body({mass:7}),t=new p2.Circle({radius:5});return e.damping=.9,t.sensor=!0,e.addShape(t),{body:e,shape:t}},e.prototype.activatePowerup=function(){this.frontWheel.localPosition=[0,150],this.backWheel.localPosition=[0,-150],this.frontWheel.setSideFriction(60),this.backWheel.setSideFriction(90);for(var e=0;e<this.scene.keyDownIDs.length;e++)"up"==this.scene.keyDownIDs[e]&&this.applyDriveForce(130*this.scene.powerupRatio),"down"==this.scene.keyDownIDs[e]&&this.applyDriveForce(-100);this.craftBody.damping=.4,this.craftBody.angularDamping=.8,this.world.defaultContactMaterial.restitution=.3,this.world.defaultContactMaterial.friction=.1},e.prototype.deactivatePowerup=function(){this.frontWheel.localPosition=[0,150],this.backWheel.localPosition=[0,-150],this.frontWheel.setSideFriction(40),this.backWheel.setSideFriction(60);for(var e=0;e<this.scene.keyDownIDs.length;e++)"up"==this.scene.keyDownIDs[e]&&this.applyDriveForce(130),"down"==this.scene.keyDownIDs[e]&&this.applyDriveForce(-100);this.craftBody.damping=.3,this.craftBody.angularDamping=.2,this.world.defaultContactMaterial.restitution=.01,this.world.defaultContactMaterial.friction=.1},e.prototype.updateBottomWallPosition=function(e){this.bottomWallBody.position[1]=e},e.prototype.applyDriveForce=function(e){this.backWheel.engineForce=e*this.scene.powerupRatio,this.frontWheel.engineForce=e*this.scene.powerupRatio,this.fanPower=e*this.scene.powerupRatio},e.prototype.steer=function(e){this.fanAngle=Math.PI/2-2*e,this.frontWheel.steerValue=.4*e,this.scene.player.setArmDirection(e)},e.prototype.getSteerAmount=function(){return this.fanAngle},e.prototype.bindSpriteToBody=function(e,t){this.boundBodies.push({sprite:e,body:t})},e.prototype.unbindSpriteFromBody=function(e){this.boundBodies&&this.boundBodies.splice(this.findIndexByKeyValue(this.boundBodies,"sprite",e),1)},e.prototype.checkCollision=function(e,t){if(this.scene.courseManager){var i=this.scene.courseManager.ticket;t.bodyA==this.craftBody&&t.bodyB==i.body&&i.collect(),t.bodyB==this.craftBody&&t.bodyA==i.body&&i.collect()}},e.prototype.checkEndCollision=function(e,t){},e.prototype.addBodyToWorld=function(e){this.world.addBody(e)},e.prototype.removeBodyFromWorld=function(e){this.world.removeBody(e)},e.prototype.removeConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.addConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.addDistanceConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.removeDistanceConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.removeSpringFromWorld=function(e){this.world.removeSpring(e)},e.prototype.addSpringToWorld=function(e){this.world.addSpring(e)},e.prototype.resizeElements=function(e,t){this.canvasHeight=t,this.canvasWidth=e,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},e.prototype.stepPhysics=function(){if(0!=this.physicsEnabled&&this.world){this.world.step(1/30);for(var e=0;e<this.boundBodies.length;e++)this.boundBodies[e].sprite.position.x=this.boundBodies[e].body.position[0],this.boundBodies[e].sprite.position.y=Game.stageHeight-this.boundBodies[e].body.position[1],this.boundBodies[e].sprite.rotation=-this.boundBodies[e].body.angle;this.craftBody.applyForce([500*this.frontWheel.steerValue*this.scene.powerupRatio,this.fanPower],[0,-100]);var t=[];p2.vec2.copy(t,this.craftBody.velocity),this.playerVelocityMagnitude=p2.vec2.length(t),this.changeInPlayerVelocity=Math.abs(this.lastPlayerVelocityMagnitude-this.playerVelocityMagnitude),this.changeInPlayerVelocity>50&&this.damageTimeout>50&&0==this.scene.powerupIsActive&&(this.scene.player.takeDamage(this.changeInPlayerVelocity-50),this.damageTimeout=0),this.damageTimeout++,this.lastPlayerVelocityMagnitude=this.playerVelocityMagnitude}},e.prototype.killPhysicsWorld=function(e){},e.prototype.findIndexByKeyValue=function(e,t,i){for(var s=0;s<e.length;s++)if(e[s][t]==i)return s;return null},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.getDodgemSpeed=function(){},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angularVelocity=0,e.angularForce=0,e.angle=0,e.velocity=[0,0],e.setZeroForce()},e.prototype.pause=function(){this.physicsEnabled=!1},e.prototype.resume=function(){this.physicsEnabled=!0},e.prototype.destroy=function(){this.boundBodies=[],this.world.clear(),this.world=null},e}(),HoverDriftPlayer=function(){function e(e){this.scene=e,this.game=e.game,this.bobTick=0,Game.playSound("hover-drift/waterfall-small.mp3",.01),this.container=Game.displayStore.getContainer("hover-drift/hovercraft-container"),this.hovercraft=this.container.getSprite("hover-drift/hovercraft.png"),this.fan=this.container.getSprite("hover-drift/fan.png"),this.hovercraftFinLeft=Game.displayStore.getSprite("hover-drift/hovercraft-fin.png"),this.hovercraftFinRight=Game.displayStore.getSprite("hover-drift/hovercraft-fin.png"),this.powerupHovercraft=this.container.getSprite("hover-drift/powerup-hoverboat-body.png"),this.powerupFan=this.container.getSprite("hover-drift/powerup-hoverboat-fan.png"),this.powerupFan.scale.x=this.powerupFan.scale.y=0,this.powerupFanLeftHolder=this.container.getContainer("hover-drift/powerup-hoverboat-fan-left-container"),this.powerupFanRightHolder=this.container.getContainer("hover-drift/powerup-hoverboat-fan-right-container"),this.powerupFin1=Game.displayStore.getSprite("hover-drift/powerup-hoverboat-fin.png"),this.powerupFin2=Game.displayStore.getSprite("hover-drift/powerup-hoverboat-fin.png"),this.powerupFin3=Game.displayStore.getSprite("hover-drift/powerup-hoverboat-fin.png"),this.powerupFin4=Game.displayStore.getSprite("hover-drift/powerup-hoverboat-fin.png"),this.powerupFanLeftHolder.scale.x=this.powerupFanLeftHolder.scale.y=0,this.powerupFanLeftHolder.position.x=0,this.powerupFanLeftHolder.position.y=80,this.powerupFanRightHolder.scale.x=this.powerupFanRightHolder.scale.y=0,this.powerupFanRightHolder.position.x=0,this.powerupFanRightHolder.position.y=80,this.powerupFanLeftHolder.addChildAt(this.powerupFin1,0),this.powerupFanRightHolder.addChildAt(this.powerupFin4,0),this.powerUpEffectHolder=Game.displayStore.getContainer("hover-drift/powerup-effect"),this.powerUpEffectHolder.scale.x=this.powerUpEffectHolder.scale.y=0,this.sparkle1=this.powerUpEffectHolder.getSprite("hover-drift/sparkle-1"),this.sparkle2=this.powerUpEffectHolder.getSprite("hover-drift/sparkle-2"),this.glow=Game.displayStore.getSprite("hover-drift/glow"),this.sparkle1.blendMode=PIXI.BLEND_MODES.ADD,this.sparkle2.blendMode=PIXI.BLEND_MODES.ADD,this.glow.blendMode=PIXI.BLEND_MODES.ADD,this.glow.scale.x=this.glow.scale.y=0,this.leftArm=Game.displayStore.getSprite("hover-drift/left-arm"),this.rightArm=Game.displayStore.getSprite("hover-drift/right-arm"),this.characterHead=Game.displayStore.getSprite("hover-drift/character-head-"+this.scene.selectedCharacter),this.scene.physicsManager.bindSpriteToBody(this.container,this.scene.physicsManager.craftBody),this.scene.physicsManager.bindSpriteToBody(this.characterHead,this.scene.physicsManager.characterHead),this.leftArm.position.y+=10,this.rightArm.position.y+=10,this.leftArm.position.x-=15,this.rightArm.position.x+=15,this.leftArm.rotation=.15,this.rightArm.rotation=-.15,this.hovercraftFinLeft.position.x=-40,this.hovercraftFinRight.position.x=40,this.hovercraftFinLeft.position.y=126,this.hovercraftFinRight.position.y=126,this.powerupFin1.position.x=-15,this.powerupFin1.position.y=5,this.powerupFin2.position.x=this.hovercraftFinLeft.position.x,this.powerupFin2.position.y=this.hovercraftFinLeft.position.y,this.powerupFin4.position.x=15,this.powerupFin4.position.y=5,this.powerupFin3.position.x=this.hovercraftFinRight.position.x,this.powerupFin3.position.y=this.hovercraftFinRight.position.y,this.container.addChildAt(this.hovercraftFinLeft,0),this.container.addChildAt(this.hovercraftFinRight,0),this.container.addChildAt(this.powerupFin2,0),this.container.addChildAt(this.powerupFin3,0),this.container.addChild(this.leftArm),this.container.addChild(this.rightArm),this.powerupHovercraft.visible=!1,this.powerupFin2.visible=!1,this.powerupFin3.visible=!1,this.wakeSprites=[],this.wakeHolder=Game.displayStore.getContainer("hover-drift/wake-container");var t=20;1==Game.isLowEndIPad&&(t=10);for(o=0;o<t;o++){var i;(i=o<t/2?Game.displayStore.getSprite("hover-drift/wake-particle"):Game.displayStore.getSprite("hover-drift/wake-particle-2")).alpha=0,this.wakeSprites=this.scene.shuffleArray(this.wakeSprites),this.wakeSprites.push(i),this.wakeHolder.addChild(i)}this.fireSpritesArray=[],this.fireHolder=Game.displayStore.getContainer("hover-drift/fire-container"),this.fireTopHolder=Game.displayStore.getContainer("hover-drift/fire-top-container");var s=40;1==Game.isLowEndIPad&&(s=20);for(var o=0;o<s;o++){var a;o<s/2?a=Game.displayStore.getSprite("hover-drift/fire-particle"):(a=Game.displayStore.getSprite("hover-drift/fire-particle-top")).blendMode=PIXI.BLEND_MODES.ADD,this.fireSpritesArray.push({sprite:a,active:!1,XIncrement:0,YIncrement:0,speed:this.scene.physicsManager.playerVelocityMagnitude/500}),this.fireSpritesArray[o].sprite.scale.x=Math.random()<.5?-1.25:1.25,this.fireSpritesArray[o].sprite.position.x=-1e4,this.fireSpritesArray[o].sprite.alpha=1/o,o<s/2?this.fireHolder.addChild(this.fireSpritesArray[o].sprite):this.fireTopHolder.addChild(this.fireSpritesArray[o].sprite),this.fireSpritesArray=this.scene.shuffleArray(this.fireSpritesArray)}0==Game.isLowEndIPad&&(this.sprayParticlesHolder=Game.displayStore.getContainer("hover-drift/spray-particles-holder"))}return e.prototype.addSprites=function(){this.scene.mainHolder.addChild(this.wakeHolder),this.scene.mainHolder.addChild(this.fireHolder),this.scene.mainHolder.addChild(this.fireTopHolder),this.scene.mainHolder.addChild(this.container),this.scene.mainHolder.addChild(this.characterHead),this.scene.mainHolder.addChild(this.powerUpEffectHolder),this.scene.mainHolder.addChild(this.glow),0==Game.isLowEndIPad&&this.scene.mainHolder.addChild(this.sprayParticlesHolder)},e.prototype.setArmDirection=function(e){var t,i;e<-.3?(t=.25,i=.15):e>-.3&&e<.3?(t=.15,i=-.15):e>.3&&(t=-.15,i=-.25),this.leftArm.rotation+=(t-this.leftArm.rotation)/8,this.rightArm.rotation+=(i-this.rightArm.rotation)/8},e.prototype.takeDamage=function(e){var t=e/this.scene.powerupRatio;t>100/this.scene.powerupRatio&&(t=100/this.scene.powerupRatio),this.scene.updateHealth(t)},e.prototype.tick=function(){if(this.impactTimeout>0&&(this.impactTimeout-=1),1==this.scene.powerupIsActive){this.powerUpEffectHolder.position.x=this.glow.position.x=this.container.position.x,this.powerUpEffectHolder.position.y=this.glow.position.y=this.container.position.y;e=(-this.scene.physicsManager.fanAngle+Math.PI/2)/2;this.powerupFin1.rotation+=(e-this.powerupFin1.rotation)/3,this.powerupFin2.rotation+=(e-this.powerupFin2.rotation)/3,this.powerupFin3.rotation+=(e-this.powerupFin3.rotation)/3,this.powerupFin4.rotation+=(e-this.powerupFin4.rotation)/3,this.sparkle1.rotation+=.1,this.sparkle2.rotation-=.06,this.showFireSprites()}else{var e=(-this.scene.physicsManager.fanAngle+Math.PI/2)/2;this.hovercraftFinLeft.rotation+=(e-this.hovercraftFinLeft.rotation)/3,this.hovercraftFinRight.rotation+=(e-this.hovercraftFinRight.rotation)/3}this.changeInVelocityMagnitude=Math.abs(this.previousVelocityMagnitude-this.scene.physicsManager.playerVelocityMagnitude),this.previousVelocityMagnitude=this.scene.physicsManager.playerVelocityMagnitude;var t=.05+this.scene.physicsManager.playerVelocityMagnitude/1e3;t>.3&&(t=.3),Game.setSoundVolume("hover-drift/waterfall-small.mp3",t),this.scene.physicsManager.playerVelocityMagnitude&&(this.bobTick+=.1+this.scene.physicsManager.playerVelocityMagnitude/1300),this.container.scale.x=this.container.scale.y=1+Math.sin(this.bobTick)/90,this.characterHead.scale.x=this.characterHead.scale.y=1+Math.sin(this.bobTick)/90,0==Game.isLowEndIPad&&this.showWakeSprites()},e.prototype.showWakeSprites=function(){for(var e=0;e<this.wakeSprites.length;e++){var t=this.wakeSprites[e];if(t.alpha-=.01+this.scene.physicsManager.playerVelocityMagnitude/12e3,t.scale.x+=.02+this.scene.physicsManager.playerVelocityMagnitude/3e3,t.scale.y+=.02+this.scene.physicsManager.playerVelocityMagnitude/3e3,t.alpha<.02){var i=Game.getRandom(.7,2)+this.scene.physicsManager.playerVelocityMagnitude/800;t.scale.x=i,t.scale.y=i,t.position.x=this.container.position.x,t.position.y=this.container.position.y,t.alpha=Game.getRandom(.6,1),t.rotation=Game.getRandom(-3.3,3.3)}}},e.prototype.positionFireSprite=function(e){var t=e,i=this.container.x,s=this.container.y,o=i+160*Math.cos(Math.PI/2+this.container.rotation),a=s+160*Math.sin(Math.PI/2+this.container.rotation);0==t.active&&(t.sprite.position.x=o,t.sprite.position.y=a,t.sprite.visible=!0,t.active=!0,t.sprite.alpha=1,t.sprite.rotation=this.container.rotation,t.speed=Game.getRandom(10,15)+this.scene.physicsManager.playerVelocityMagnitude/500,t.XIncrement=Math.cos(Math.PI/2+t.sprite.rotation)*t.speed,t.YIncrement=Math.sin(Math.PI/2+t.sprite.rotation)*t.speed)},e.prototype.showFireSprites=function(){for(var e=0;e<this.fireSpritesArray.length;e++){var t=this.fireSpritesArray[e];if(t.sprite.alpha-=.05,t.sprite.scale.x-=.06,t.sprite.scale.y+=.06,t.sprite.position.x+=t.XIncrement,t.sprite.parent==this.fireTopHolder?t.sprite.position.y+=t.YIncrement/2:t.sprite.position.y+=t.YIncrement/4,t.sprite.alpha<.01&&this.scene.inputManager.driveForce>40){this.positionFireSprite(t),t.active=!1;var i=Game.getRandom(2,4)+this.scene.physicsManager.playerVelocityMagnitude/500;t.sprite.scale.x=i,t.sprite.scale.y=i,t.sprite.alpha=Game.getRandom(.4,1)}}},e.prototype.pause=function(){Game.setSoundVolume("hover-drift/waterfall-small.mp3",0),this.scene.pauseResumeTween(this.activatePowerupTimeline,"pause")},e.prototype.resume=function(){},e.prototype.activatePowerup=function(){Game.playSound("hover-drift/speedboat-rev.mp3"),Game.setSoundVolume("hover-drift/music.mp3",1),this.hovercraft.tint=16711680,this.fan.tint=16711680,this.powerupHovercraft.visible=!0,this.powerupFin2.visible=!0,this.powerupFin3.visible=!0,this.hovercraftFinLeft.visible=!1,this.hovercraftFinRight.visible=!1,this.activatePowerupTimeline=this.scene.killTween(this.activatePowerupTimeline),this.activatePowerupTimeline=new TimelineMax,this.activatePowerupTimeline.add([TweenMax.to(this.powerUpEffectHolder.scale,.2,{x:2,y:2,ease:Power2.easeIn}),TweenMax.to(this.glow.scale,.2,{x:3,y:3,ease:Power2.easeIn}),TweenMax.to(this.powerupFan.scale,0,{ease:Sine.easeInOut,x:1,y:1})],0),this.activatePowerupTimeline.add([TweenMax.to(this.powerUpEffectHolder.scale,.5,{x:0,y:0,ease:Power2.easeOut}),TweenMax.to(this.glow.scale,.5,{x:0,y:0,ease:Power2.easeOut})]),this.activatePowerupTimeline.add([TweenMax.to(this.powerupFanLeftHolder.position,.4,{ease:Elastic.easeOut,x:-90}),TweenMax.to(this.powerupFanLeftHolder.scale,.4,{ease:Elastic.easeOut,x:1,y:1}),TweenMax.to(this.powerupFanRightHolder.position,.4,{ease:Elastic.easeOut,x:90}),TweenMax.to(this.powerupFanRightHolder.scale,.4,{ease:Elastic.easeOut,x:1,y:1})],0)},e.prototype.deactivatePowerup=function(){this.hovercraft.tint=16777215,this.fan.tint=16777215,Game.setSoundVolume("hover-drift/music.mp3",.5),this.powerupHovercraft.visible=!1,this.powerupFin2.visible=!1,this.powerupFin3.visible=!1,this.hovercraftFinLeft.visible=!0,this.hovercraftFinRight.visible=!0,this.activatePowerupTimeline=this.scene.killTween(this.activatePowerupTimeline),this.activatePowerupTimeline=new TimelineMax,this.activatePowerupTimeline.add([TweenMax.to(this.powerupFanLeftHolder.position,.2,{ease:Back.easeIn,x:0}),TweenMax.to(this.powerupFanLeftHolder.scale,.2,{ease:Back.easeIn,x:0,y:0}),TweenMax.to(this.powerupFanRightHolder.position,.2,{ease:Back.easeIn,x:0}),TweenMax.to(this.powerupFanRightHolder.scale,.2,{ease:Back.easeIn,x:0,y:0})],0),this.activatePowerupTimeline.add([TweenMax.to(this.powerupFan.scale,0,{ease:Sine.easeInOut,x:0,y:0,delay:.1})],0);for(var e=0;e<this.fireSpritesArray.length;e++)this.fireSpritesArray[e].sprite.alpha=0},e.prototype.triggerImpact=function(){var e=this.changeInVelocityMagnitude/10;e>1&&(e=1),console.log(e),e<.1||this.impactTimeout>0||(console.log(e),Game.playSound("waterfall-wipeout/thud-wood-"+Game.getRandom(1,3,!0)+".mp3",e),this.impactTimeout=10)},e.prototype.destroy=function(){Game.stopSound("hover-drift/waterfall-small.mp3"),Game.displayStore.returnPooledItem(this.hovercraftFinLeft),Game.displayStore.returnPooledItem(this.hovercraftFinRight),this.scene.physicsManager.unbindSpriteFromBody(this.hovercraft),this.scene.physicsManager.unbindSpriteFromBody(this.characterHead),Game.displayStore.returnPooledItem(this.hovercraftFinLeft),Game.displayStore.returnPooledItem(this.hovercraftFinRight),Game.displayStore.returnPooledItem(this.powerupFin1),Game.displayStore.returnPooledItem(this.powerupFin2),Game.displayStore.returnPooledItem(this.powerupFin3),Game.displayStore.returnPooledItem(this.powerupFin4);for(e=0;e<this.wakeSprites.length;e++)Game.displayStore.returnPooledItem(this.wakeSprites[e]);for(var e=0;e<this.fireSpritesArray.length;e++)Game.displayStore.returnPooledItem(this.fireSpritesArray[e].sprite)},e}(),HoverDriftMiniMap=function(){function e(e){this.scaleRatio=.04,this.iconYOffset=60,this.yOffset=40,this.scene=e,this.course=this.scene.courseManager,this.trackWidth=this.course.trackWidth,this.trackCentrePoint=this.course.trackCentrePoint,this.waveFrequency=this.course.waveFrequency,this.waveAmplitude=this.course.waveAmplitude,this.xOffset=0,this.scene=e,this.game=e.game,this.container=Game.displayStore.getContainer("hover-drift/mini-map-holder"),this.circlesHolder=this.container.getContainer("hover-drift/mini-map-circles"),this.bg=this.container.getSprite("hover-drift/mini-map-bg"),this.boundryCirclesLeft=[],this.boundryCirclesRight=[],1==Game.isLowEndIPad&&(this.iconYOffset=20,this.yOffset=0),this.hovercraftIcon=this.container.getSprite("hover-drift/hovercraft-mini"),this.hovercraftIcon.y=this.iconYOffset;for(var t=0;t<this.course.boundryCirclesLeft.length;t++){var i=Game.displayStore.getSprite("hover-drift/mini-map-circle"),s=Game.displayStore.getSprite("hover-drift/mini-map-circle");this.boundryCirclesLeft.push(i),this.boundryCirclesRight.push(s),this.circlesHolder.addChild(i),this.circlesHolder.addChild(s)}this.checkpointLeft=Game.displayStore.getSprite("hover-drift/mini-map-circle"),this.checkpointRight=Game.displayStore.getSprite("hover-drift/mini-map-circle"),this.circlesHolder.addChild(this.checkpointLeft),this.circlesHolder.addChild(this.checkpointRight),this.checkpointLeft.tint=16711680,this.checkpointRight.tint=16711680,this.positionBoundry(this.scene.courseManager.boundryCirclesLeft,this.scene.courseManager.boundryCirclesRight)}return e.prototype.positionBoundry=function(e,t){for(var i=0;i<this.boundryCirclesLeft.length;i++){var s=this.boundryCirclesLeft[i],o=this.boundryCirclesRight[i];s.y=e[i].sprite.y*this.scaleRatio,o.y=t[i].sprite.y*this.scaleRatio,s.x=e[i].sprite.x*this.scaleRatio,o.x=t[i].sprite.x*this.scaleRatio,s.alpha=3.5-(s.y+250)/80,o.alpha=3.5-(o.y+250)/80}},e.prototype.tick=function(){this.xOffset=-this.boundryCirclesLeft[0].x-this.course.trackWidth/2*this.scaleRatio,this.circlesHolder.position.x+=(this.xOffset-this.circlesHolder.position.x)/15,this.circlesHolder.position.y=this.yOffset+this.scene.mainHolder.position.y*this.scaleRatio},e.prototype.update=function(){this.hovercraftIcon.rotation=this.scene.player.container.rotation;for(var e=0;e<this.boundryCirclesLeft.length;e++){var t=this.boundryCirclesLeft[e],i=this.boundryCirclesRight[e];t.y=this.course.boundryCirclesLeft[e].sprite.y*this.scaleRatio,i.y=this.course.boundryCirclesRight[e].sprite.y*this.scaleRatio,t.x=this.course.boundryCirclesLeft[e].sprite.x*this.scaleRatio,i.x=this.course.boundryCirclesRight[e].sprite.x*this.scaleRatio,0==Game.isLowEndIPad?(t.alpha=1-(t.y+this.circlesHolder.position.y)/80,i.alpha=1-(i.y+this.circlesHolder.position.y)/80):(t.alpha=1-(t.y+this.circlesHolder.position.y)/30,i.alpha=1-(i.y+this.circlesHolder.position.y)/30)}this.checkpointLeft.x=this.course.checkpointLeft.container.x*this.scaleRatio,this.checkpointLeft.y=this.course.checkpointLeft.container.y*this.scaleRatio,this.checkpointRight.x=this.course.checkpointRight.container.x*this.scaleRatio,this.checkpointRight.y=this.course.checkpointRight.container.y*this.scaleRatio,0==Game.isLowEndIPad?(this.checkpointLeft.alpha=1-(this.checkpointLeft.y+this.circlesHolder.position.y)/80,this.checkpointRight.alpha=1-(this.checkpointRight.y+this.circlesHolder.position.y)/80):(this.checkpointLeft.alpha=1-(this.checkpointLeft.y+this.circlesHolder.position.y)/30,this.checkpointRight.alpha=1-(this.checkpointRight.y+this.circlesHolder.position.y)/30)},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){for(e=0;e<this.boundryCirclesLeft.length;e++)Game.displayStore.returnPooledItem(this.boundryCirclesLeft[e]);for(var e=0;e<this.boundryCirclesRight.length;e++)Game.displayStore.returnPooledItem(this.boundryCirclesRight[e]);Game.displayStore.returnPooledItem(this.checkpointLeft),Game.displayStore.returnPooledItem(this.checkpointRight)},e}(),HoverDriftTicket=function(){function e(e,t){this.scene=e,this.game=e.game,this.index=t,this.available=!0,this.destroyed=!1,this.magnetise=!1,this.spawnTally=0,this.body=new p2.Body,this.shape=new p2.Circle({radius:500,sensor:!0}),this.body.addShape(this.shape),this.shape.collisionGroup=this.scene.physicsManager.TICKET,this.shape.collisionMask=this.scene.physicsManager.HOVERCRAFT}return e.prototype.spawn=function(e,t){if(1!=this.destroyed){this.available=!1;var i=Game.coreData.getCurrentTickets()-Game.coreData.getCurrentRide().startingTickets;this.spawnTally%3==0&&0!=i&&Game.getRandom(.3,1)>this.scene.health/1e3?this.ticket=Game.ticketPool.getHeart():this.ticket=Game.ticketPool.getTicket(),this.mainHolder=e,this.body.position[0]=t.x,this.body.position[1]=Game.stageHeight-t.y,this.ticket.container.position.x=t.x,this.ticket.container.position.y=t.y,this.ticket.container.scale.x=this.ticket.container.scale.y=1.5,this.magnetise=!1,this.scene.physicsManager.addBodyToWorld(this.body),this.mainHolder.addChildAt(this.ticket.container,this.mainHolder.children.length-2),this.spawnTally++}},e.prototype.collect=function(){this.scene.physicsManager.removeBodyFromWorld(this.body),this.magnetise=!0},e.prototype.tick=function(){if(1==this.magnetise&&0==this.available){var e=this.getDistance(this.ticket.container.position,this.scene.player.container.position),t=(550-e)/(9/this.scene.powerupRatio);if(e>100){var i=this.getAngle(this.ticket.container.position.x,this.ticket.container.position.y,this.scene.player.container.position.x,this.scene.player.container.position.y);this.ticket.container.position.x+=Math.cos(i)*-t,this.ticket.container.position.y+=Math.sin(i)*t}else this.magnetise=!1,this.available=!0,1==this.ticket.isHeart&&this.scene.addHealth(300),this.ticket.collect(),this.scene.collectTicket()}},e.prototype.getDistance=function(e,t){var i=0,s=0;return i=t.x-e.x,i*=i,s=t.y-e.y,s*=s,Math.sqrt(i+s)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.pause=function(){this.ticket&&this.ticket.pause()},e.prototype.resume=function(){this.ticket&&this.ticket.resume()},e.prototype.destroy=function(){this.destroyed=!0,this.body=null,this.ticket&&this.ticket.destroy()},e}(),HoverDriftTimer=function(){function e(e){this.scene=e,this.game=e.game,this.time=0,this.timeText=Game.displayStore.getBitmapText("timer-font"),this.timeText.scale.x=this.timeText.scale.y=.55,this.timeText.text=this.convertSecondsToTime(this.time),this.timeText.position.x=-this.timeText.width/2,this.timeText.tint=16777215,this.container=Game.displayStore.getContainer("hover-drift/timer-holder"),this.timerInner=this.container.getContainer("hover-drift/timer-inner"),this.timerIcon=this.timerInner.getSprite("hover-drift/timer-icon"),this.container.position.x=750,this.container.position.y=20,this.timerInner.addChild(this.timeText),this.timeText.position.x=this.timerIcon.position.x+30,this.timeText.position.y=this.timerIcon.position.y-5,this.timerInner.position.x=-60,this.timerInner.position.y=this.container.height/4}return e.prototype.start=function(){this.addTime(10)},e.prototype.addTime=function(e){function t(){this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.time<s?(this.time++,this.timeText.text=this.convertSecondsToTime(this.time),this.timerTimeline.call(t,null,this,i)):this.timerTimeline.call(this.tickTime,null,this,"+=1")}this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.timeText.tint=6018816;var i=.05;this.timerTimeline.call(t,null,this,i);var s=this.time+e;Game.playSound("hover-drift/time-add.mp3"),this.time},e.prototype.pause=function(){this.scene.pauseResumeTween(this.timerTimeline,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.timerTimeline,"resume")},e.prototype.convertSecondsToTime=function(e){var t=Math.floor(e/60),i=Math.ceil(e%60),s=String(t),o=String(i);return i<10&&(o="0"+i),e%60%1==0?s+":"+o:s+" "+o},e.prototype.destroy=function(){this.timerTimeline=this.scene.killTween(this.timerTimeline),this.destroyed=!0},e.prototype.tickTime=function(){1!=this.destroyed&&1!=this.scene.paused&&(this.time>0?(this.time-=.5,this.timeText.text=this.convertSecondsToTime(this.time),this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.timerTimeline.call(this.tickTime,null,this,.5),this.time<=5&&this.time%1==0&&Game.playSound("hover-drift/time-running-out.mp3",.9),this.time<=5?this.timeText.tint=16711680:this.timeText.tint=16777215):this.scene.endGame(this.scene))},e}(),HoverDriftBoundryCircle=function(){function e(e,t,i,s){this.scene=e,this.game=e.game,this.sprite=Game.displayStore.getSprite("hover-drift/boundry-circle"),this.body=new p2.Body({position:[0,0],mass:t}),this.body.damping=.3,this.shape=new p2.Circle({radius:105}),this.shape.collisionGroup=this.scene.physicsManager.LEVEL,this.shape.collisionMask=this.scene.physicsManager.HOVERCRAFT|this.scene.physicsManager.LEVEL,this.scene.physicsManager.addBodyToWorld(this.body),this.scene.physicsManager.bindSpriteToBody(this.sprite,this.body),this.index=i,this.randomShorelineDistance=Game.getRandom(-100,100),this.body.addShape(this.shape),"left"==s&&0==Game.isLowEndIPad&&(this.wakeSprite1=Game.displayStore.getSprite("hover-drift/wake-particle"),this.wakeSprite2=Game.displayStore.getSprite("hover-drift/wake-particle-2"),this.wakeSprite1.alpha=Game.getRandom(.5,1),this.wakeSprite2.alpha=Game.getRandom(.5,1))}return e.prototype.updateWakespritePos=function(){this.wakeSprite1&&(this.wakeSprite1.x=this.sprite.x,this.wakeSprite1.y=this.sprite.y,this.wakeSprite2.x=this.sprite.x,this.wakeSprite2.y=this.sprite.y)},e.prototype.remove=function(e){var t=e.spring;this.spring=null,this.scene.physicsManager.removeSpringFromWorld(t);var i=this.lock;this.scene.physicsManager.removeConstraintFromWorld(i)},e.prototype.tick=function(){this.wakeSprite1&&(this.wakeSprite1.scale.x+=.02,this.wakeSprite1.scale.y+=.02,this.wakeSprite1.alpha-=.018,this.wakeSprite2.scale.x+=.03,this.wakeSprite2.scale.y+=.03,this.wakeSprite2.alpha-=.018,this.wakeSprite1.alpha<.001&&(this.wakeSprite1.alpha=Game.getRandom(.6,1),this.wakeSprite1.scale.x=this.wakeSprite1.scale.y=1.7,this.wakeSprite1.x=this.sprite.x,this.wakeSprite1.y=this.sprite.y),this.wakeSprite2.alpha<.001&&(this.wakeSprite2.alpha=Game.getRandom(.6,1),this.wakeSprite2.scale.x=this.wakeSprite2.scale.y=1.7,this.wakeSprite2.x=this.sprite.x,this.wakeSprite2.y=this.sprite.y))},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.wakeSprite1&&(Game.displayStore.returnPooledItem(this.wakeSprite1),Game.displayStore.returnPooledItem(this.wakeSprite2)),Game.displayStore.returnPooledItem(this.sprite)},e}(),HoverDriftCheckpoint=function(){function e(e,t,i){this.scene=e,this.game=e.game,this.passed=!1,this.side=t,this.body=new p2.Body({mass:2.5}),this.container=Game.displayStore.getContainer("hover-drift/checkpoint"),this.top=Game.displayStore.getSprite("hover-drift/checkpoint-pole-top"),this.bottom=Game.displayStore.getSprite("hover-drift/checkpoint-pole-bottom"),this.flash=Game.displayStore.getSprite("hover-drift/checkpoint-flash");var s=Game.displayStore.getSprite("hover-drift/checkpoint-shadow");s.alpha=.3,this.flash.scale.x=this.flash.scale.y=0,this.flash.blendMode=PIXI.BLEND_MODES.ADD,this.spawnedPos=[0,0],this.container.addChild(s),this.container.addChild(this.bottom),this.container.addChild(this.flash),this.container.addChild(this.top),this.wakeSprite1=Game.displayStore.getSprite("hover-drift/wake-particle"),this.wakeSprite2=Game.displayStore.getSprite("hover-drift/wake-particle-2"),this.wakeSprite1.scale.x=this.wakeSprite1.scale.y=2;var o=new p2.Circle({radius:105});o.collisionGroup=this.scene.physicsManager.LEVEL,o.collisionMask=this.scene.physicsManager.HOVERCRAFT|this.scene.physicsManager.LEVEL,this.body.addShape(o),i.addChild(this.wakeSprite1),i.addChild(this.wakeSprite2),this.scene.physicsManager.addBodyToWorld(this.body),this.scene.physicsManager.bindSpriteToBody(this.container,this.body)}return e.prototype.spawn=function(e){this.scene.physicsManager.resetBody(this.body),this.passed=!1,this.lock&&this.scene.physicsManager.removeConstraintFromWorld(this.lock),this.body.position[0]=e[0],this.body.position[1]=e[1],this.lock=new p2.LockConstraint(this.body,this.scene.physicsManager.levelBody,{collideConnected:!1}),this.scene.physicsManager.addConstraintToWorld(this.lock),this.spawnedPos[0]=this.body.position[0],this.spawnedPos[1]=this.body.position[1],this.wakeSprite1.x=this.spawnedPos[0],this.wakeSprite1.y=Game.stageHeight-this.spawnedPos[1],this.wakeSprite2.x=this.spawnedPos[0],this.wakeSprite2.y=Game.stageHeight-this.spawnedPos[1]},e.prototype.pass=function(){this.passed=!0,this.scene.passCheckpoint(),this.checkpointTimeline=this.scene.killTween(this.checkpointTimeline),this.checkpointTimeline=new TimelineMax,this.checkpointTimeline.add([TweenMax.to(this.flash.scale,.15,{x:5,y:5,ease:Power1.easeOut,repeat:!0,yoyo:!0}),TweenMax.to(this.flash.scale,.15,{x:5,y:5,ease:Power1.easeOut,repeat:!0,yoyo:!0})],.1),this.checkpointTimeline.add([TweenMax.to(this.bottom,.15,{rotation:Math.PI,ease:Power1.easeIn,repeat:!0,yoyo:!0}),TweenMax.to(this.bottom,.15,{rotation:Math.PI,ease:Power1.easeIn,repeat:!0,yoyo:!0})],0)},e.prototype.tick=function(e){if(this.wakeSprite1.alpha-=.02,this.wakeSprite1.scale.x+=.03,this.wakeSprite1.scale.y+=.03,this.wakeSprite2.alpha-=.02,this.wakeSprite2.scale.x+=.03,this.wakeSprite2.scale.y+=.03,this.wakeSprite1.alpha<.01){t=Game.getRandom(1.4,2);this.wakeSprite1.alpha=Game.getRandom(.6,1),this.wakeSprite1.scale.x=t,this.wakeSprite1.scale.y=t}if(this.wakeSprite2.alpha<.01){var t=Game.getRandom(1.4,2);this.wakeSprite2.alpha=Game.getRandom(.6,1),this.wakeSprite2.scale.x=t,this.wakeSprite2.scale.y=t}this.lock.localOffsetB[0]=-this.spawnedPos[0]+20*Math.sin(e/20),"left"==this.side?this.bottom.rotation=Math.sin(e/25)/2:this.bottom.rotation=Math.cos(e/23)/2},e.prototype.pause=function(){this.scene.pauseResumeTween(this.checkpointTimeline,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.checkpointTimeline,"resume")},e.prototype.destroy=function(){this.wakeSprite1&&(Game.displayStore.returnPooledItem(this.wakeSprite1),Game.displayStore.returnPooledItem(this.wakeSprite2)),this.checkpointTimeline=this.scene.killTween(this.checkpointTimeline),Game.displayStore.returnPooledItem(this.container)},e}(),EggscapeEggManager=function(){function e(e){this.maxEggSpeed=45,this.scene=e,this.game=e.game,this.container=Game.displayStore.getContainer("egg-scape/eggs-holder"),this.spawnTimer=100,this.timerSpeed=0,this.spawnIncrement=220,this.eggSpeed=25,this.impactEggTicker=0,this.createEggs()}return e.prototype.start=function(){this.timerSpeed=1},e.prototype.createEggs=function(){this.eggs=[];for(var e=0;e<10;e++){var t=new EggscapeEgg(this.scene,this,e);this.eggs.push(t),this.container.addChild(t.container)}},e.prototype.spawnEgg=function(){this.eggSpeed<this.maxEggSpeed&&(this.eggSpeed+=1);for(var e=0;e<this.eggs.length;e++){if(0==this.eggs[e].active){this.eggs[e].spawn(this.eggSpeed);break}}},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.removeEgg=function(e){for(var t=0;t<this.eggs.length;t++)e==this.eggs[t].body&&this.eggs[t].remove(this.eggs[t])},e.prototype.sporeBoostEgg=function(e){for(var t=0;t<this.eggs.length;t++)e==this.eggs[t].body&&this.eggs[t].sporeBoost()},e.prototype.impactEgg=function(e){for(var t=0;t<this.eggs.length;t++)e==this.eggs[t].body&&(this.eggs[t].impact(),0==this.eggs[t].health&&this.impactEggTicker<30&&this.scene.player.goodShot());this.impactEggTicker=0},e.prototype.tick=function(){this.spawnTimer+=this.timerSpeed,this.impactEggTicker++,this.spawnTimer==this.spawnIncrement&&(this.spawnEgg(),this.spawnIncrement>70&&(this.spawnIncrement-=3),this.spawnTimer=0);for(var e=0;e<this.eggs.length;e++)this.eggs[e].tick()},e.prototype.destroy=function(){for(var e=0;e<this.eggs.length;e++)this.eggs[e].destroy()},e}(),EggscapeEgg=function(){function e(e,t,i){this.scene=e,this.game=e.game,this.manager=t,this.sporesHolder=Game.displayStore.getContainer("egg-scape/spores-holder"),this.allowSporeBoost=!0,0==Game.isLowEndIPad?this.sporeCap=20:this.sporeCap=5,this.manager.container.addChild(this.sporesHolder),this.sporeParams={lowerAngle:-120,upperAngle:-60,lowerVelocity:100,upperVelocity:600,endScale:0,lowerStartScale:2,upperStartScale:5,friction:0,XstartRange:0,YstartRange:5,time:1,gravity:600,cap:this.sporeCap,endAlpha:0,rotationPower:2,blendMode:PIXI.BLEND_MODES.ADD},this.body=new p2.Body({mass:1,position:[Game.stageWidth+100,Game.stageHeight/2]}),this.shape=new p2.Circle({radius:20}),this.body.damping=.1,this.targetDamping=.1,this.shape.collisionGroup=this.scene.physicsManager.EGG,this.shape.collisionMask=this.scene.physicsManager.EGG|this.scene.physicsManager.LEVEL|this.scene.physicsManager.LASER,this.body.addShape(this.shape),this.container=Game.displayStore.getContainer("egg-scape/egg"),this.redGlow=Game.displayStore.getSprite("egg-scape/egg-red-glow.png"),this.blueGlow=Game.displayStore.getSprite("egg-scape/egg-blue-glow.png"),this.egg=Game.displayStore.getSprite("egg-scape/egg.png"),this.eggCracked=Game.displayStore.getSprite("egg-scape/egg-cracked.png"),this.redGlow.blendMode=PIXI.BLEND_MODES.ADD,this.blueGlow.blendMode=PIXI.BLEND_MODES.ADD,this.container.addChild(this.redGlow),this.container.addChild(this.blueGlow),this.container.addChild(this.eggCracked),this.container.addChild(this.egg),this.scene.physicsManager.bindSpriteToBody(this.container,this.body),this.active=!1,this.index=i,0==Game.isLowEndIPad&&this.createSmashFragments()}return e.prototype.createSmashFragments=function(){this.smashFragments=[];for(var e=0;e<20;e++){var t;t=e<10?Game.displayStore.getSprite("egg-scape/egg-fragment-1"):Game.displayStore.getSprite("egg-scape/egg-fragment-2");var i=new p2.Circle({radius:4}),s=new p2.Body({mass:2,position:[this.body[0],this.body[1]]});s.mass=Game.getRandom(.1,1),s.damping=.3,s.angularDamping=.3,i.collisionGroup=this.scene.physicsManager.FRAG,i.collisionMask=this.scene.physicsManager.FRAG|this.scene.physicsManager.EGG,s.addShape(i),this.manager.container.addChild(t),this.scene.physicsManager.bindSpriteToBody(t,s),this.smashFragments.push({sprite:t,shape:i,body:s}),this.smashFragments[e].sprite.blendMode=PIXI.BLEND_MODES.ADD}},e.prototype.spawn=function(e){this.active=!0,this.container.alpha=1,this.health=2;var t=Game.getRandom(-200,200,!0),i=["bottom","top"];this.escapeSpeed=e+Game.getRandom(-5,5),this.setAttraction(i[Game.getRandom(0,1,!0)]),this.egg.alpha=1,this.eggCracked.alpha=1,this.blueGlow.scale.x=this.blueGlow.scale.y=1,this.redGlow.scale.x=this.redGlow.scale.y=1,this.scene.physicsManager.resetBody(this.body),this.body.position=[Game.stageWidth+50,Game.stageHeight/2+t],this.scene.physicsManager.addBodyToWorld(this.body),this.body.angularVelocity=Game.getRandom(-10,10)},e.prototype.sporeBoost=function(){0!=this.allowSporeBoost&&(Game.playSound("egg-scape/splat-"+Game.getRandom(1,3,!0)+".mp3",.3),this.allowSporeBoost=!1,this.sporeResetDelay=TweenMax.delayedCall(1,function(){this.allowSporeBoost=!0},null,this),"bottom"==this.attractedTo&&this.body.position[1]<Game.stageHeight/2?(this.scene.fireShroom(this.container.position.x,!1),this.sporeDelay=TweenMax.delayedCall(.25,function(){Game.playSound("egg-scape/poof-"+Game.getRandom(1,4,!0)+".mp3",Game.getRandom(.1,.3)),this.spores&&(this.spores.container.position.x=this.body.position[0],this.spores.container.position.y=Game.stageHeight-this.body.position[1]+30,this.spores.container.scale.y=1,this.spores.replay()),this.body.applyImpulse([50,Game.getRandom(200,500)]),this.sporeDelay=null},null,this)):"top"==this.attractedTo&&this.body.position[1]>Game.stageHeight/2&&(this.scene.fireShroom(this.container.position.x,!0),this.sporeDelay=TweenMax.delayedCall(.25,function(){Game.playSound("egg-scape/poof-"+Game.getRandom(1,4,!0)+".mp3",Game.getRandom(.1,.3)),this.spores&&(this.spores.container.position.x=this.body.position[0],this.spores.container.position.y=Game.stageHeight-this.body.position[1]-30,this.spores.container.scale.y=-1,this.spores.replay()),this.body.applyImpulse([50,-Game.getRandom(200,500)]),this.sporeDelay=null},null,this)),this.body.damping=.8,this.targetDamping=.1)},e.prototype.setAttraction=function(e){if(this.attractedTo=e,"bottom"==this.attractedTo){if(this.body.gravityScale=1,this.redGlow.alpha=0,this.blueGlow.alpha=1,this.egg.tint=65532,this.eggCracked.tint=65532,0==Game.isLowEndIPad){for(t=0;t<this.smashFragments.length;t++)this.smashFragments[t].sprite.tint=65532;this.spores=new ParticleBurst(["egg-scape/spore-1-blue","egg-scape/spore-2-blue"],this.sporesHolder,this.game.currentScene,this.sporeParams),this.spores.fire(!0)}}else if("top"==this.attractedTo&&(this.body.gravityScale=-1,this.redGlow.alpha=1,this.blueGlow.alpha=0,this.egg.tint=16722810,this.eggCracked.tint=16722810,0==Game.isLowEndIPad)){for(var t=0;t<this.smashFragments.length;t++)this.smashFragments[t].sprite.tint=16722810;this.spores=new ParticleBurst(["egg-scape/spore-1-red","egg-scape/spore-2-red"],this.sporesHolder,this.game.currentScene,this.sporeParams),this.spores.fire(!0)}},e.prototype.impact=function(){this.health>0&&(this.health-=1),this.body.applyImpulse([120,0]),this.body.angularVelocity=Game.getRandom(-6,6),0==Game.isLowEndIPad&&this.fireSmashParticles(this.smashFragments.length-15*this.health),this.egg.alpha=0;var e;e="bottom"==this.attractedTo?this.blueGlow:this.redGlow,this.container.scale.x=this.container.scale.y=3,TweenMax.to(this.container.scale,.5,{ease:Elastic.easeOut,x:1,y:1}),e.scale.x=e.scale.y=2,TweenMax.to(e.scale,.6,{ease:Elastic.easeOut,x:1,y:1}),0==this.health?(this.eggCracked.alpha=0,TweenMax.to(e.scale,.5,{ease:Back.easeOut,x:0,y:0,onComplete:this.remove,onCompleteParams:[this]}),Game.playSound("egg-scape/smash-"+Game.getRandom(1,3,!0)+".mp3",1),Game.playSound("egg-scape/glass-smash-"+Game.getRandom(1,4,!0)+".mp3",1)):Game.playSound("egg-scape/crack-"+Game.getRandom(1,3,!0)+".mp3",1)},e.prototype.fireSmashParticles=function(e){for(var t=0;t<e;t++){var i=this.smashFragments[t];this.scene.physicsManager.resetBody(i.body),i.body.position[0]=this.body.position[0],i.body.position[1]=this.body.position[1],i.sprite.scale.x=i.sprite.scale.y=Game.getRandom(.5,1.5),i.body.mass=i.sprite.scale.x,i.body.gravityScale=2,this.scene.physicsManager.addBodyToWorld(i.body),i.body.angularVelocity=Game.getRandom(-50,50),i.body.applyImpulse([Game.getRandom(-150,150),Game.getRandom(0,200)])}},e.prototype.remove=function(e){e.container.position.x=Game.stageWidth+100,e.container.alpha=0,e.scene.physicsManager.resetBody(e.body),e.scene.physicsManager.removeBodyFromWorld(e.body),e.active=!1,e.scene.updateScore(10),e.spores&&(e.spores.destroy(),e.spores=null)},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.tick=function(){0!=this.active&&(this.body.applyForce([-this.escapeSpeed,0]),this.body.damping+=(this.targetDamping-this.body.damping)/50)},e.prototype.destroy=function(){if(Game.displayStore.returnPooledItem(this.container),Game.displayStore.returnPooledItem(this.egg),Game.displayStore.returnPooledItem(this.eggCracked),Game.displayStore.returnPooledItem(this.blueGlow),Game.displayStore.returnPooledItem(this.redGlow),Game.displayStore.returnPooledItem(this.sporesHolder),this.sporeDelay=this.scene.killTween(this.sporeDelay),0==Game.isLowEndIPad)for(var e=0;e<this.smashFragments.length;e++)Game.displayStore.returnPooledItem(this.smashFragments[e].sprite)},e}(),EggscapeInputManager=function(){function e(e){this.scene=e,this.hitAreaSprite=Game.displayStore.getSprite("egg-scape/blank-input.png"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.fireEnabled=!0,this.moveEnabled=!0,this.currentAngle=0,this.maxAngleDiff=1.4,this.minAngleDiff=.1,this.keyboardDown=!1,this.driveForce=0,this.railSpeed=0,this.targetRailSpeed=0,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite)}return e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mousemove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseupoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))})):(e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchmove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchendoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}))},e.prototype.inputDown=function(e,t){1!=this.scene.paused&&t.x>Game.stageWidth/2&&this.keyDown("spacebar")},e.prototype.inputUp=function(e,t){1!=this.scene.paused&&this.keyUp("spacebar")},e.prototype.inputMove=function(e,t){},e.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},e.prototype.getInputAngle=function(){var e=this.currentAngle;return e>this.maxAngleDiff&&(e=this.maxAngleDiff),e<this.minAngleDiff&&(e=this.minAngleDiff),e},e.prototype.keyDown=function(e){if(1!=this.scene.tutorialOverlay.isOpen){switch("spacebar"==e&&1==this.fireEnabled&&(this.fireEnabled=!1,this.scene.player.fire()),this.keyboardInput=e,e){case"up":1==this.moveEnabled&&(this.moveEnabled=!1,this.scene.player.startMoving("up"),this.targetRailSpeed=-8);break;case"down":1==this.moveEnabled&&(this.moveEnabled=!1,this.scene.player.startMoving("down"),this.targetRailSpeed=8)}this.keyboardDown=!0}},e.prototype.keyUp=function(e){if(1!=this.scene.tutorialOverlay.isOpen){switch(this.keyboardInput="none",e){case"spacebar":this.fireEnabled=!0;break;case"up":this.moveEnabled=!0,this.targetRailSpeed=0,this.scene.player.stopMoving("up");break;case"down":this.moveEnabled=!0,this.targetRailSpeed=0,this.scene.player.stopMoving("down")}this.keyboardDown=!1}},e.prototype.tick=function(){1!=this.scene.endingGame&&(this.railSpeed+=(this.targetRailSpeed-this.railSpeed)/10,this.scene.player.setRailSpeed(this.railSpeed))},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},e}(),EggscapeLaser=function(){function e(e,t){this.scene=e,this.game=e.game,this.body=new p2.Body({mass:.1,position:[200,Game.stageHeight/2]}),this.shape=new p2.Box({width:200,height:35}),this.shape.sensor=!0,this.shape.collisionGroup=this.scene.physicsManager.LASER,this.shape.collisionMask=this.scene.physicsManager.EGG|this.scene.physicsManager.LEVEL,this.body.addShape(this.shape),this.body.gravityScale=0,this.body.damping=0,this.container=Game.displayStore.getContainer("egg-scape/laser-holder"),this.laser=Game.displayStore.getSprite("egg-scape/laser"),this.container.addChild(this.laser),this.laser.blendMode=PIXI.BLEND_MODES.ADD,this.container.scale.y=0,this.scene.physicsManager.bindSpriteToBody(this.container,this.body),this.active=!1,this.index=t}return e.prototype.fire=function(e){this.active=!0,this.container.scale.y=1,this.scene.physicsManager.resetBody(this.body),this.body.position=[200,Game.stageHeight-e],this.scene.physicsManager.addBodyToWorld(this.body),this.scene.physicsManager.stepPhysics(),this.body.applyImpulse([200,0])},e.prototype.activatePowerup=function(){this.body.removeShape(this.shape),this.shape=new p2.Box({width:200,height:70}),this.shape.sensor=!0,this.shape.collisionGroup=this.scene.physicsManager.LASER,this.shape.collisionMask=this.scene.physicsManager.EGG|this.scene.physicsManager.LEVEL,this.body.addShape(this.shape),this.laser.scale.x=2,this.laser.scale.y=2},e.prototype.deactivatePowerup=function(){this.body.removeShape(this.shape),this.shape=new p2.Box({width:200,height:35}),this.shape.sensor=!0,this.shape.collisionGroup=this.scene.physicsManager.LASER,this.shape.collisionMask=this.scene.physicsManager.EGG|this.scene.physicsManager.LEVEL,this.body.addShape(this.shape),this.laser.scale.x=1,this.laser.scale.y=1},e.prototype.stop=function(){this.remove()},e.prototype.remove=function(){this.container.scale.y=0,this.scene.physicsManager.resetBody(this.body),this.scene.physicsManager.removeBodyFromWorld(this.body),this.active=!1},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.tick=function(){this.active},e.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.container),Game.displayStore.returnPooledItem(this.laser)},e}(),EggscapePhysicsManager=function(){function e(e,t){this.physicsEnabled=!0,this.resizeRatio=1,this.EGG=Math.pow(2,0),this.LEVEL=Math.pow(2,1),this.LASER=Math.pow(2,2),this.FRAG=Math.pow(2,3),this.PLAYER=Math.pow(2,4),this.TICKET=Math.pow(2,5),this.NONE=Math.pow(2,6),this.SEAT=Math.pow(2,7),this.BLOCKERS=Math.pow(2,8),this.scene=e,this.mainContainer=t,this.powerupRatio=1}return e.prototype.initPhysicsWorld=function(){this.world=new p2.World({gravity:[0,-150]}),this.world.broadphase=new p2.NaiveBroadphase(1),this.boundBodies=[],this.world.defaultContactMaterial.restitution=.1,this.world.defaultContactMaterial.friction=10,this.world.defaultContactMaterial.contactSkinSize=1,this.world.defaultContactMaterial.stiffness=999,this.world.defaultContactMaterial.relaxation=1.5,this.floorBody=new p2.Body({mass:0,position:[0,80]}),this.ceilingBody=new p2.Body({mass:0,position:[0,Game.stageHeight-80],angle:Math.PI}),this.escapedBody=new p2.Body({mass:0,position:[-50,0],angle:-Math.PI/2}),this.farWallBody=new p2.Body({mass:0,position:[Game.stageWidth+300,0],angle:Math.PI/2}),this.floorShape=new p2.Plane,this.ceilingShape=new p2.Plane,this.escapedShape=new p2.Plane,this.farWallShape=new p2.Plane,this.floorShape.collisionGroup=this.LEVEL,this.floorShape.collisionMask=this.EGG|this.FRAG,this.ceilingShape.collisionGroup=this.LEVEL,this.ceilingShape.collisionMask=this.EGG,this.farWallShape.collisionGroup=this.LEVEL,this.farWallShape.collisionMask=this.LASER,this.floorBody.addShape(this.floorShape),this.ceilingBody.addShape(this.ceilingShape),this.escapedBody.addShape(this.escapedShape),this.farWallBody.addShape(this.farWallShape),this.addBodyToWorld(this.floorBody),this.addBodyToWorld(this.ceilingBody),this.addBodyToWorld(this.escapedBody),this.addBodyToWorld(this.farWallBody);var e=this;this.world.on("beginContact",function(t){e.checkCollision(e,t)}),this.world.on("endContact",function(t){e.checkEndCollision(e,t)}),this.physicsEnabled=!0},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angularVelocity=0,e.angularForce=0,e.angle=0,e.velocity=[0,0],e.setZeroForce()},e.prototype.bindSpriteToBody=function(e,t){this.boundBodies.push({sprite:e,body:t})},e.prototype.unbindSpriteFromBody=function(e){this.boundBodies&&this.boundBodies.splice(this.findIndexByKeyValue(this.boundBodies,"sprite",e),1)},e.prototype.checkCollision=function(e,t){t.bodyA==e.escapedBody&&t.bodyB.shapes[0].collisionGroup==this.EGG&&(this.scene.loseLife(),this.scene.eggManager.removeEgg(t.bodyB)),t.bodyB==e.escapedBody&&t.bodyA.shapes[0].collisionGroup==this.EGG&&(this.scene.loseLife(),this.scene.eggManager.removeEgg(t.bodyA)),t.bodyA.shapes[0].collisionGroup==this.LEVEL&&t.bodyB.shapes[0].collisionGroup==this.EGG&&this.scene.eggManager.sporeBoostEgg(t.bodyB),t.bodyB.shapes[0].collisionGroup==this.LEVEL&&t.bodyA.shapes[0].collisionGroup==this.EGG&&this.scene.eggManager.sporeBoostEgg(t.bodyA),t.bodyA.shapes[0].collisionGroup==this.LEVEL&&t.bodyB.shapes[0].collisionGroup==this.LASER&&this.scene.player.resetLaser(t.bodyB),t.bodyB.shapes[0].collisionGroup==this.LEVEL&&t.bodyA.shapes[0].collisionGroup==this.LASER&&this.scene.player.resetLaser(t.bodyA),t.bodyA.shapes[0].collisionGroup==this.EGG&&t.bodyB.shapes[0].collisionGroup==this.LASER&&this.scene.eggManager.impactEgg(t.bodyA),t.bodyB.shapes[0].collisionGroup==this.EGG&&t.bodyA.shapes[0].collisionGroup==this.LASER&&this.scene.eggManager.impactEgg(t.bodyB)},e.prototype.checkEndCollision=function(e,t){},e.prototype.addBodyToWorld=function(e){this.world.addBody(e)},e.prototype.removeBodyFromWorld=function(e){this.world.removeBody(e)},e.prototype.removeConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.addConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.addSpringToWorld=function(e){this.world.addSpring(e)},e.prototype.resizeElements=function(e,t){this.canvasHeight=t,this.canvasWidth=e,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},e.prototype.activatePowerup=function(){this.powerupRatio=2},e.prototype.deactivatePowerup=function(){this.powerupRatio=1},e.prototype.stepPhysics=function(){if(0!=this.physicsEnabled&&this.world){this.world.step(1/30);for(var e=0;e<this.boundBodies.length;e++)this.boundBodies[e].sprite.position.x=this.boundBodies[e].body.position[0],this.boundBodies[e].sprite.position.y=Game.stageHeight-this.boundBodies[e].body.position[1],this.boundBodies[e].sprite.rotation=-this.boundBodies[e].body.angle}},e.prototype.findIndexByKeyValue=function(e,t,i){for(var s=0;s<e.length;s++)if(e[s][t]==i)return s;return null},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.pause=function(){this.physicsEnabled=!1},e.prototype.resume=function(){this.physicsEnabled=!0},e.prototype.destroy=function(){this.boundBodies=[],this.world.clear(),this.world=null},e}(),EggscapePlayer=function(){function e(e){this.verticalMovementmargin=140,this.scene=e,this.game=e.game,this.hitLimit="none",this.direction="none",this.firing=!1,this.characterSpeakTicker=0,this.characterSpeakLimit=50,this.characterVO={},this.characterVO.kenzie=["egg-scape/kenzie-aww.mp3","egg-scape/kenzie-jeez-louise.mp3","egg-scape/kenzie-its-kenzie.mp3","egg-scape/kenzie-nice.mp3","egg-scape/kenzie-fully-charged.mp3","egg-scape/kenzie-easy-squeezy.mp3"],this.characterVO.babe=["egg-scape/babe-problem.mp3","egg-scape/babe-upsy-daisy.mp3","egg-scape/babe-here-i-come.mp3","egg-scape/babe-cool.mp3","egg-scape/babe-here-i-come.mp3","egg-scape/babe-woo.mp3"],this.characterVO.hudson=["egg-scape/hudson-hmmm.mp3","egg-scape/hudson-no-way.mp3","egg-scape/hudson-alright-gameshakers.mp3","egg-scape/hudson-hello.mp3","egg-scape/hudson-alright-gameshakers.mp3","egg-scape/hudson-cool.mp3"],this.characterVO.ggg=["egg-scape/triple-cmon.mp3","egg-scape/triple-i-lost-a-shoe.mp3","egg-scape/triple-selfie.mp3","egg-scape/triple-giggling.mp3","egg-scape/triple-yeah-woo-yeah.mp3","egg-scape/triple-yeyahh.mp3"],this.container=Game.displayStore.getContainer("egg-scape/player-holder"),this.rail=Game.displayStore.getContainer("egg-scape/rail"),this.rail.position.x=140,this.railCarBack=this.rail.getContainer("egg-scape/rail-car-back"),this.railCarBack.position.y=350,this.railCarFront=this.rail.getContainer("egg-scape/rail-car-front"),this.railCarFront.position.x=-34,this.railCarFront.position.y=350,this.wheelTop=this.railCarBack.getSprite("egg-scape/rail-car-cog-top"),this.wheelBottom=this.railCarBack.getSprite("egg-scape/rail-car-cog-bottom"),this.gunHolder=this.railCarFront.getContainer("egg-scape/player-gun"),this.gunHolder.showOnlyChild(0),this.puEffectHolder=this.railCarFront.getContainer("egg-scape/powerup-effect"),this.puEffectHolder.scale.x=this.puEffectHolder.scale.y=0,this.puEffectSparkle1=this.puEffectHolder.getSprite("egg-scape/pu-sparkle-1"),this.puEffectSparkle2=this.puEffectHolder.getSprite("egg-scape/pu-sparkle-2"),this.puEffectGlow=this.puEffectHolder.getSprite("egg-scape/pu-glow"),this.puEffectSparkle1.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectSparkle2.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectGlow.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectGlow.scale.x=0,this.puEffectGlow.scale.y=0,this.laserArray=[];for(i=0;i<2;i++){var t=new EggscapeLaser(this.scene,i);this.laserArray.push(t),this.container.addChild(t.container)}switch(this.gunFlash=this.gunHolder.getContainer("egg-scape/gun-flash"),this.gunHolder.getContainer("egg-scape/gun-flash").getSprite("egg-scape/gun-flash.png").blendMode=PIXI.BLEND_MODES.ADD,this.gunHolder.getContainer("egg-scape/gun-flash").getSprite("egg-scape/gun-flash-powerup.png").blendMode=PIXI.BLEND_MODES.ADD,this.gunFlash.showOnlyChild(0),this.gunFlash.alpha=0,this.gunFlash.visible=!0,this.gunHolder.getContainer("egg-scape/gun").addChild(this.gunFlash),this.laserFire=Game.displayStore.getAnimatedSprite("egg-scape/laser-fire-frames"),this.laserFire.animationSpeed=.5,this.laserFire.position.x=130,this.laserFire.position.y=30,this.laserFire.scale.x=.7,this.laserFire.scale.y=.7,this.laserFire.loop=!1,this.laserFire.blendMode=PIXI.BLEND_MODES.ADD,this.railCarFront.addChildAt(this.laserFire,0),this.container.addChild(this.rail),this.playerBodySprite=Game.displayStore.getContainer("egg-scape/player-body"),this.container.addChildAt(this.playerBodySprite,1),this.playerHeadSprite=Game.displayStore.getContainer("egg-scape/player-head"),this.container.addChildAt(this.playerHeadSprite,1),this.playerHeadBackSprite=Game.displayStore.getContainer("egg-scape/player-head-back"),this.container.addChildAt(this.playerHeadBackSprite,0),this.playerHeadFrontSprite=Game.displayStore.getContainer("egg-scape/player-head-front"),this.container.addChild(this.playerHeadFrontSprite),this.playerLegBackSprite=Game.displayStore.getContainer("egg-scape/player-leg-back"),this.container.addChildAt(this.playerLegBackSprite,0),this.playerLegFrontSprite=Game.displayStore.getContainer("egg-scape/player-leg-front"),this.container.addChildAt(this.playerLegFrontSprite,1),this.playerArmFrontSprite=Game.displayStore.getContainer("egg-scape/player-arm-front"),this.container.addChildAt(this.playerArmFrontSprite,8),this.playerArmBackSprite=Game.displayStore.getContainer("egg-scape/player-arm-back"),this.playerArmBackSprite.rotation=0,this.scene.selectedCharacter){case"kenzie":this.playerHeadSprite.showOnlyChild(0),this.playerHeadBackSprite.showOnlyChild(0),this.playerHeadFrontSprite.showOnlyChild(0),this.playerLegFrontSprite.showOnlyChild(0),this.playerLegBackSprite.showOnlyChild(0),this.playerArmFrontSprite.showOnlyChild(0),this.playerArmBackSprite.showOnlyChild(0),this.playerBodySprite.showOnlyChild(0);break;case"babe":this.playerHeadSprite.showOnlyChild(1),this.playerHeadFrontSprite.showOnlyChild(1),this.playerHeadBackSprite.alpha=0,this.playerLegFrontSprite.showOnlyChild(1),this.playerLegBackSprite.showOnlyChild(1),this.playerArmFrontSprite.showOnlyChild(1),this.playerArmBackSprite.showOnlyChild(1),this.playerBodySprite.showOnlyChild(1);break;case"hudson":this.playerHeadSprite.showOnlyChild(2),this.playerHeadBackSprite.showOnlyChild(1),this.playerHeadFrontSprite.alpha=0,this.playerLegFrontSprite.showOnlyChild(2),this.playerLegBackSprite.showOnlyChild(2),this.playerArmFrontSprite.showOnlyChild(2),this.playerArmBackSprite.showOnlyChild(2),this.playerBodySprite.showOnlyChild(2);break;case"ggg":this.playerHeadSprite.showOnlyChild(3),this.playerHeadBackSprite.showOnlyChild(2),this.playerHeadFrontSprite.alpha=0,this.playerLegFrontSprite.showOnlyChild(3),this.playerLegBackSprite.showOnlyChild(3),this.playerArmFrontSprite.showOnlyChild(3),this.playerArmBackSprite.showOnlyChild(3),this.playerBodySprite.showOnlyChild(3)}for(var i=0;i<4;i++)this.playerArmBackSprite.getSpriteAt(i).tint=13421772;if(this.container.addChildAt(this.playerArmBackSprite,1),0==Game.isLowEndIPad){this.laserParticleHolder=Game.displayStore.getContainer("egg-scape/laser-particle-holder"),this.container.addChildAt(this.laserParticleHolder,3),this.laserParticleHolder.position.x=250;var s={lowerAngle:-40,upperAngle:40,lowerVelocity:100,upperVelocity:800,endScale:0,lowerStartScale:.25,upperStartScale:2,friction:.2,XstartRange:0,YstartRange:0,time:.6,gravity:0,cap:20,endAlpha:1,rotationPower:0,blendMode:PIXI.BLEND_MODES.ADD};this.laserParticles=new ParticleBurst(["egg-scape/laser-particle"],this.laserParticleHolder,this.scene,s),this.laserParticles.fire(!0),this.seatBody=new p2.Body({mass:0,position:[this.rail.position.x+20,Game.stageHeight-this.railCarBack.position.y]}),this.scene.physicsManager.addBodyToWorld(this.seatBody),this.seatBaseShape=new p2.Box({width:200,height:25}),this.seatBaseShape.collisionGroup=this.scene.physicsManager.SEAT,this.seatBaseShape.collisionMask=this.scene.physicsManager.PLAYER,this.seatBody.addShape(this.seatBaseShape,[0,-10]),this.seatBackShape=new p2.Box({width:40,height:80}),this.seatBackShape.collisionGroup=this.scene.physicsManager.SEAT,this.seatBackShape.collisionMask=this.scene.physicsManager.PLAYER,this.seatBody.addShape(this.seatBackShape,[-5,50]),this.seatFrontShape=new p2.Box({width:30,height:40}),this.seatFrontShape.collisionGroup=this.scene.physicsManager.BLOCKERS,this.seatFrontShape.collisionMask=this.scene.physicsManager.PLAYER,this.seatBody.addShape(this.seatFrontShape,[70,35]),this.seatTopShape=new p2.Box({width:50,height:50}),this.seatTopShape.collisionGroup=this.scene.physicsManager.BLOCKERS,this.seatTopShape.collisionMask=this.scene.physicsManager.PLAYER,this.seatBody.addShape(this.seatTopShape,[25,95]);var o=Game.displayStore.getContainer("egg-scape/rect"),a=o.getSprite("egg-scape/rect.png");a.width=20,a.height=20,this.scene.physicsManager.bindSpriteToBody(o,this.seatBody),this.playerBodyBody=new p2.Body({mass:1,position:[this.rail.position.x+58,Game.stageHeight-this.railCarBack.position.y]}),this.playerBodyBody.damping=.4,this.playerBodyBody.angularDamping=.4,this.playerBodyBody.gravityScale=2,this.scene.physicsManager.addBodyToWorld(this.playerBodyBody),this.playerBodyShape=new p2.Box({width:35,height:72}),this.playerBodyShape.collisionGroup=this.scene.physicsManager.PLAYER,this.playerBodyShape.collisionMask=this.scene.physicsManager.SEAT|this.scene.physicsManager.BLOCKERS,this.playerBodyBody.addShape(this.playerBodyShape,[0,-10]),this.scene.physicsManager.bindSpriteToBody(this.playerBodySprite,this.playerBodyBody),this.playerHeadBody=new p2.Body({mass:1,position:[this.rail.position.x+58,Game.stageHeight-this.railCarBack.position.y+54]}),this.playerHeadBody.damping=.7,this.playerHeadBody.angularDamping=.999,this.playerHeadBody.gravityScale=1,this.scene.physicsManager.addBodyToWorld(this.playerHeadBody),this.playerHeadShape=new p2.Circle({radius:30}),this.playerHeadShape.collisionGroup=this.scene.physicsManager.NONE,this.playerHeadShape.collisionMask=this.scene.physicsManager.NONE,this.playerHeadBody.addShape(this.playerHeadShape),this.scene.physicsManager.bindSpriteToBody(this.playerHeadSprite,this.playerHeadBody),this.playerLegFrontBody=new p2.Body({mass:1,position:[this.rail.position.x+58,Game.stageHeight-this.railCarBack.position.y-55]}),this.playerLegFrontBody.damping=.999,this.playerLegFrontBody.angularDamping=.9999,this.playerLegFrontBody.gravityScale=1,this.scene.physicsManager.addBodyToWorld(this.playerLegFrontBody),this.playerLegFrontShape=new p2.Box({width:30,height:45}),this.playerLegFrontShape.collisionGroup=this.scene.physicsManager.PLAYER,this.playerLegFrontShape.collisionMask=this.scene.physicsManager.BLOCKERS,this.playerLegFrontBody.addShape(this.playerLegFrontShape),this.scene.physicsManager.bindSpriteToBody(this.playerLegFrontSprite,this.playerLegFrontBody),this.headConstraint=new p2.RevoluteConstraint(this.playerBodyBody,this.playerHeadBody,{localPivotA:[5,32],localPivotB:[-5,-25]}),this.scene.physicsManager.addConstraintToWorld(this.headConstraint),this.headSpring=new p2.RotationalSpring(this.playerBodyBody,this.playerHeadBody,{restAngle:.1,stiffness:8e4,damping:1e17}),this.scene.physicsManager.addSpringToWorld(this.headSpring),this.legFrontConstraint=new p2.RevoluteConstraint(this.playerBodyBody,this.playerLegFrontBody,{localPivotA:[20,-32],localPivotB:[-23,10]}),this.scene.physicsManager.addConstraintToWorld(this.legFrontConstraint),this.legFrontSpring=new p2.RotationalSpring(this.playerBodyBody,this.playerLegFrontBody,{restAngle:0,stiffness:5e4,damping:1e28}),this.scene.physicsManager.addSpringToWorld(this.legFrontSpring),this.playerLock=new p2.LockConstraint(this.seatBody,this.playerBodyBody,{localOffsetB:[35,45],maxForce:400}),this.scene.physicsManager.addConstraintToWorld(this.playerLock)}else this.playerBodySprite.position.x=192,this.playerHeadSprite.position.x=205,this.playerArmBackSprite.position.x=198,this.playerLegBackSprite.position.x=220,this.playerLegFrontSprite.position.x=232;this.fireAnimation=new TimelineMax,this.fireAnimation.add([TweenMax.to(this.gunHolder.position,.1,{x:"-=15",ease:Power1.easeOut}),TweenMax.to(this.playerArmFrontSprite,.1,{rotation:.2,ease:Power1.easeOut}),TweenMax.to(this.playerArmBackSprite,.1,{rotation:.35,ease:Power1.easeOut}),TweenMax.to(this.gunFlash,.01,{alpha:1,ease:Power3.easeOut})],0),this.fireAnimation.add([TweenMax.to(this.gunHolder.position,.2,{x:115,ease:Back.easeOut}),TweenMax.to(this.playerArmFrontSprite,.2,{rotation:0,ease:Back.easeOut}),TweenMax.to(this.playerArmBackSprite,.2,{rotation:0,ease:Back.easeOut}),TweenMax.to(this.gunFlash,.5,{alpha:0,ease:Power3.easeOut})]),1==Game.isLowEndIPad&&(this.fireAnimation.add([TweenMax.to(this.playerBodySprite.position,.1,{x:"-=7",ease:Power1.easeOut}),TweenMax.to(this.playerHeadSprite,.1,{x:"-=7",delay:.03,ease:Power2.easeOut})],0),this.fireAnimation.add([TweenMax.to(this.playerBodySprite.position,.2,{x:192,ease:Back.easeOut}),TweenMax.to(this.playerHeadSprite,.2,{x:205,delay:.03,ease:Back.easeOut})],.1)),this.fireAnimation.call(function(){this.firing=!1},null,this),this.fireAnimation.timeScale(1.3),this.fireAnimation.pause(),this.activatePowerupTimeline=new TimelineMax,this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.3,{x:1.5,y:1.5,ease:Power3.easeIn}),TweenMax.to(this.puEffectGlow.scale,.3,{x:2.5,y:2.5,ease:Power3.easeIn}),TweenMax.to(this.puEffectSparkle1,.3,{rotation:4,ease:Power3.easeIn}),TweenMax.to(this.puEffectSparkle2,.3,{rotation:-4,ease:Power3.easeIn}),TweenMax.to(this.gunHolder.scale,.3,{x:1.2,y:1.2,ease:Power3.easeIn})],0),this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.5,{x:0,y:0,ease:Power3.easeOut}),TweenMax.to(this.puEffectGlow.scale,.5,{x:0,y:0,ease:Power3.easeOut}),TweenMax.to(this.puEffectSparkle1,.3,{rotation:0,ease:Power3.easeOut}),TweenMax.to(this.puEffectSparkle2,.3,{rotation:0,ease:Power3.easeOut}),TweenMax.to(this.gunHolder.scale,.3,{x:1,y:1,ease:Elastic.easeOut})]),this.activatePowerupTimeline.pause()}return e.prototype.start=function(){Game.playSound(this.characterVO[this.scene.selectedCharacter][2],.8)},e.prototype.goodShot=function(){this.characterSpeakTicker>this.characterSpeakLimit&&(Game.playSound(this.characterVO[this.scene.selectedCharacter][5],.8),this.characterSpeakTicker=0)},e.prototype.collectTicket=function(){0==Game.isLowEndIPad&&this.playerBodyBody.applyImpulse([0,-300]),this.characterSpeakTicker>this.characterSpeakLimit&&(Game.playSound(this.characterVO[this.scene.selectedCharacter][3],.8),this.characterSpeakTicker=0)},e.prototype.pause=function(){Game.pauseSound("egg-scape/rail.mp3"),Game.pauseSound("egg-scape/hero-music.mp3")},e.prototype.resume=function(){Game.resumeSound("egg-scape/rail.mp3"),Game.resumeSound("egg-scape/hero-music.mp3")},e.prototype.stopLaser=function(e){for(var t=0;t<this.laserArray.length;t++){var i=this.laserArray[t];i.body&&i.stop()}},e.prototype.setRailSpeed=function(e){this.railSpeed=1.2*e},e.prototype.loseLife=function(){Game.playSound(this.characterVO[this.scene.selectedCharacter][1],.8)},e.prototype.fire=function(){if(1!=this.firing){this.firing=!0,this.scene.lightCave(),1==this.scene.powerupRatio?Game.playSound("egg-scape/laser-fire.mp3",.7):Game.playSound("egg-scape/laser-fire-powerup.mp3",.8),Game.playSound("egg-scape/pew.mp3"),this.fireAnimation.restart(),this.scene.fireGun(),this.laserFire.gotoAndPlay(0),0==Game.isLowEndIPad&&(this.laserParticles.container.position.y=this.railCarFront.position.y+20,this.laserParticles.replay(),this.playerBodyBody.applyImpulse([-400*this.scene.powerupRatio,-100]));for(var e=0;e<this.laserArray.length;e++){var t=this.laserArray[e];if(0==t.active){t.fire(this.railCarFront.position.y+30);break}}}},e.prototype.resetLaser=function(e){for(var t=0;t<this.laserArray.length;t++){var i=this.laserArray[t];i.body==e&&i.remove()}},e.prototype.startMoving=function(e){this.direction=e,this.hitLimit="none",this.stopMovingTween=this.scene.killTween(this.stopMovingTween),this.stopMovingTween=null,Game.playSound("egg-scape/rail.mp3",.8)},e.prototype.stopMoving=function(e){"none"==this.hitLimit&&(this.stopMovingTween=this.scene.killTween(this.stopMovingTween),this.stopMovingTween="up"==e?new TweenMax(this.railCarFront.position,.6,{ease:Elastic.easeOut,y:"-=10"}):new TweenMax(this.railCarFront.position,.6,{ease:Elastic.easeOut,y:"+=10"}),Game.stopSound("egg-scape/rail.mp3"),Game.playSound("egg-scape/rail-stop.mp3",.3))},e.prototype.activatePowerup=function(){this.activatePowerupTimeline.restart(),TweenMax.delayedCall(.3,function(){if(Game.playSound(this.characterVO[this.scene.selectedCharacter][4],.8),Game.stopSound("egg-scape/music.mp3"),Game.playSound("egg-scape/hero-music.mp3",1),this.laserFire.scale.x=1.5,this.laserFire.scale.y=1.5,this.laserFire.x=110,this.gunHolder.showOnlyChild(1),this.gunFlash.showOnlyChild(1),Game.playSound("egg-scape/cock-gun.mp3"),Game.playSound("egg-scape/power-up-transform.mp3"),this.gunHolder.getContainer("egg-scape/gun-powerup").addChild(this.gunFlash),this.laserFire.animationSpeed=.7,0==Game.isLowEndIPad){var e={lowerAngle:-50,upperAngle:50,lowerVelocity:100,upperVelocity:1500,endScale:0,lowerStartScale:.25,upperStartScale:3,friction:.2,XstartRange:0,YstartRange:0,time:.6,gravity:0,cap:20,endAlpha:1,rotationPower:0,blendMode:PIXI.BLEND_MODES.ADD};this.laserParticles.updateParams(e,this.laserParticles),this.laserParticles.fire(!0)}this.fireAnimation.timeScale(2.5);for(var t=0;t<this.laserArray.length;t++)this.laserArray[t].activatePowerup()},null,this)},e.prototype.deactivatePowerup=function(){this.activatePowerupTimeline.restart(),Game.playSound(this.characterVO[this.scene.selectedCharacter][0],.8),Game.playSound("egg-scape/power-down-transform.mp3"),TweenMax.delayedCall(.3,function(){if(this.laserFire.scale.x=this.laserFire.scale.y=1,this.gunHolder.showOnlyChild(0),this.gunFlash.showOnlyChild(0),this.gunHolder.getContainer("egg-scape/gun").addChild(this.gunFlash),Game.playSound("egg-scape/music.mp3"),this.laserFire.x=130,this.laserFire.animationSpeed=.5,0==Game.isLowEndIPad){var e={lowerAngle:-40,upperAngle:40,lowerVelocity:100,upperVelocity:800,endScale:0,lowerStartScale:.25,upperStartScale:2,friction:.2,XstartRange:0,YstartRange:0,time:.6,gravity:0,cap:20,endAlpha:1,rotationPower:0,blendMode:PIXI.BLEND_MODES.ADD};this.laserParticles.updateParams(e,this.laserParticles),this.laserParticles.fire(!0)}this.fireAnimation.timeScale(1.3);for(var t=0;t<this.laserArray.length;t++)this.laserArray[t].deactivatePowerup()},null,this)},e.prototype.tick=function(){this.characterSpeakTicker++,this.stopMovingTween||"none"!=this.hitLimit||(this.railCarFront.position.y+=this.railSpeed*this.scene.powerupRatio);for(var e=0;e<this.laserArray.length;e++){var t=this.laserArray[e];1==t.active&&t.tick()}this.wheelTop.rotation=.23+this.railCarFront.position.y/-22.7,this.wheelBottom.rotation=.25+this.railCarFront.position.y/-22.7,this.railCarBack.position.y=this.railCarFront.position.y,0==Game.isLowEndIPad?(this.seatBody.position[1]=Game.stageHeight-this.railCarFront.position.y-50,this.playerLegBackSprite.position.x=this.playerLegFrontSprite.position.x-9,this.playerLegBackSprite.position.y=this.railCarFront.position.y+52,this.playerLegBackSprite.rotation+=(this.playerLegFrontSprite.rotation-this.playerLegBackSprite.rotation)/7,this.playerArmFrontSprite.position.x=this.playerBodySprite.position.x,this.playerArmFrontSprite.position.y=this.railCarFront.position.y-12,this.playerArmBackSprite.position.x=this.playerBodySprite.position.x+5,this.playerArmBackSprite.position.y=this.railCarFront.position.y-12):(this.playerBodySprite.position.y=this.railCarFront.position.y+5,this.playerHeadSprite.position.y=this.railCarFront.position.y-52,this.playerArmFrontSprite.position.x=this.playerBodySprite.position.x,this.playerArmFrontSprite.position.y=this.railCarFront.position.y-12,this.playerArmBackSprite.position.x=this.playerBodySprite.position.x+6,this.playerArmBackSprite.position.y=this.railCarFront.position.y-8,this.playerLegFrontSprite.position.x=this.playerBodySprite.position.x+40,this.playerLegFrontSprite.position.y=this.railCarFront.position.y+50,this.playerLegBackSprite.position.x=this.playerBodySprite.position.x+28,this.playerLegBackSprite.position.y=this.railCarFront.position.y+48),this.playerHeadBackSprite.position.x=this.playerBodySprite.position.x+9,this.playerHeadBackSprite.position.y=this.railCarFront.position.y-58,this.playerHeadFrontSprite.position.x=this.playerHeadSprite.position.x-3,this.playerHeadFrontSprite.position.y=this.playerHeadSprite.position.y+26,this.playerHeadFrontSprite.rotation=-this.playerHeadSprite.rotation/2,this.container.position.y=-this.railCarFront.position.y/20,this.railCarFront.position.y>Game.stageHeight-this.verticalMovementmargin+20&&"none"==this.hitLimit&&"down"==this.direction&&(this.stopMoving("up"),this.hitLimit="bottom"),this.railCarFront.position.y<this.verticalMovementmargin-60&&"none"==this.hitLimit&&"up"==this.direction&&(this.stopMoving("down"),this.hitLimit="top")},e.prototype.destroy=function(){this.stopMovingTween=this.scene.killTween(this.stopMovingTween),this.fireAnimation=this.scene.killTween(this.fireAnimation);for(var e=0;e<this.laserArray.length;e++)this.laserArray[e].destroy();0==Game.isLowEndIPad&&this.laserParticles.destroy(),Game.stopSound("egg-scape/rail.mp3"),Game.stopSound("egg-scape/hero-music.mp3")},e}(),EggscapeTicket=function(){function e(e,t){this.scene=e,this.game=e.game,this.index=t,this.available=!0,this.destroyed=!1}return e.prototype.spawn=function(e,t){if(1!=this.destroyed){this.available=!1;var i=Game.coreData.getCurrentTickets()-Game.coreData.getCurrentRide().startingTickets;i%2==0&&0!=i&&Game.getRandom(.1,1)>this.scene.getHearts()/3?this.ticket=Game.ticketPool.getHeart():this.ticket=Game.ticketPool.getTicket(),this.mainHolder=e,this.ticket.container.position.x=t.x,this.ticket.container.position.y=t.y,this.spawnedY=t.y,this.mainHolder.addChildAt(this.ticket.container,this.mainHolder.children.length-2)}},e.prototype.collect=function(){},e.prototype.tick=function(){0==this.available&&(this.getDistance(this.ticket.container.position,new PIXI.Point(this.mainHolder.toLocal(new PIXI.Point,this.scene.player.railCarFront).x,this.mainHolder.toLocal(new PIXI.Point,this.scene.player.railCarFront).y))>150?(this.ticket.container.position.x-=4,this.ticket.container.position.y=this.spawnedY+100*Math.sin(this.ticket.container.position.x/70)):(this.available=!0,1==this.ticket.isHeart&&this.scene.addLife(),this.ticket.collect(),this.scene.collectTicket()))},e.prototype.getDistance=function(e,t){var i=0,s=0;return i=t.x-e.x,i*=i,s=t.y-e.y,s*=s,Math.sqrt(i+s)},e.prototype.pause=function(){this.ticket&&this.ticket.pause()},e.prototype.resume=function(){this.ticket&&this.ticket.resume()},e.prototype.destroy=function(){this.destroyed=!0,this.ticket&&this.ticket.destroy()},e}(),StrikerPhysicsManager=function(){function e(e,t){this.physicsEnabled=!0,this.resizeRatio=1,this.SEED=Math.pow(2,0),this.COLLECT=Math.pow(2,1),this.BOMB=Math.pow(2,2),this.PLAYER=Math.pow(2,3),this.TICKET=Math.pow(2,4),this.LEVEL=Math.pow(2,5),this.NONE=Math.pow(2,6),this.BASKET=Math.pow(2,7),this.BUTTON=Math.pow(2,8),this.scene=e,this.mainContainer=t,this.powerupRatio=1}return e.prototype.initPhysicsWorld=function(){this.world=new p2.World({gravity:[0,-350]}),this.world.broadphase=new p2.NaiveBroadphase(1),this.boundBodies=[],this.world.defaultContactMaterial.restitution=0,this.world.defaultContactMaterial.friction=1,this.world.defaultContactMaterial.contactSkinSize=1,this.world.defaultContactMaterial.stiffness=999,this.world.defaultContactMaterial.relaxation=.5,this.floorBody=new p2.Body({mass:0,position:[0,-40]}),this.floorShape=new p2.Plane,this.floorShape.collisionGroup=this.LEVEL,this.floorShape.collisionMask=this.SEED|this.BOMB,this.floorBody.addShape(this.floorShape),this.buttonBody=new p2.Body({mass:0,position:[512,50]}),this.buttonBox=new p2.Box({width:140,height:40}),this.buttonBox.collisionGroup=this.BUTTON,this.buttonBox.collisionMask=this.SEED|this.BOMB,this.buttonBody.addShape(this.buttonBox),this.addBodyToWorld(this.buttonBody);var e=this;this.world.on("beginContact",function(t){e.checkCollision(e,t)}),this.world.on("endContact",function(t){e.checkEndCollision(e,t)}),this.physicsEnabled=!0},e.prototype.addFloor=function(){this.addBodyToWorld(this.floorBody)},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angularVelocity=0,e.angularForce=0,e.angle=0,e.velocity=[0,0],e.setZeroForce()},e.prototype.bindSpriteToBody=function(e,t){this.boundBodies.push({sprite:e,body:t})},e.prototype.unbindSpriteFromBody=function(e){this.boundBodies&&this.boundBodies.splice(this.findIndexByKeyValue(this.boundBodies,"sprite",e),1)},e.prototype.checkCollision=function(e,t){if(t.bodyA==e.floorBody&&(t.bodyB.shapes[0].collisionGroup==this.SEED&&this.scene.seedManager.removeSeed(t.bodyB),t.bodyB.shapes[0].collisionGroup==this.BOMB)){i=Math.round(Math.abs(t.bodyB.mass*t.bodyB.velocity[1]));this.scene.drone.bombHit(t.bodyB.position[0],i),this.scene.drone.miss()}if(t.bodyB==e.floorBody&&(t.bodyA.shapes[0].collisionGroup==this.SEED&&this.scene.seedManager.removeSeed(t.bodyA),t.bodyA.shapes[0].collisionGroup==this.BOMB)){var i=Math.round(Math.abs(t.bodyA.mass*t.bodyA.velocity[1]));this.scene.drone.bombHit(t.bodyA.position[0],i),this.scene.drone.miss()}t.bodyA==this.scene.drone.collectBody&&t.bodyB.shapes[0].collisionGroup==this.SEED&&(this.scene.drone.eatSeed(),this.scene.seedManager.removeSeed(t.bodyB)),t.bodyB==this.scene.drone.collectBody&&t.bodyA.shapes[0].collisionGroup==this.SEED&&(this.scene.drone.eatSeed(),this.scene.seedManager.removeSeed(t.bodyA)),t.bodyA==this.scene.drone.basketBody&&t.bodyB.shapes[0].collisionGroup==this.SEED&&Game.playSound("striker/step-"+Game.getRandom(1,2,!0)+".mp3"),t.bodyB==this.scene.drone.basketBody&&t.bodyA.shapes[0].collisionGroup==this.SEED&&Game.playSound("striker/step-"+Game.getRandom(1,2,!0)+".mp3"),t.bodyA==this.buttonBody&&t.bodyB.shapes[0].collisionGroup==this.BOMB&&this.hitButton(t.bodyB),t.bodyB==this.buttonBody&&t.bodyA.shapes[0].collisionGroup==this.BOMB&&this.hitButton(t.bodyA)},e.prototype.hitButton=function(e){var t=Math.round(Math.abs(e.mass*e.velocity[1]));0==this.scene.drone.allowDropBomb&&(this.scene.tower.impact(t),this.scene.drone.bombHit(e.position[0],t))},e.prototype.checkEndCollision=function(e,t){},e.prototype.addBodyToWorld=function(e){this.world.addBody(e)},e.prototype.removeBodyFromWorld=function(e){this.world.removeBody(e)},e.prototype.removeConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.addConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.addSpringToWorld=function(e){this.world.addSpring(e)},e.prototype.resizeElements=function(e,t){this.canvasHeight=t,this.canvasWidth=e,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},e.prototype.activatePowerup=function(){this.powerupRatio=2},e.prototype.deactivatePowerup=function(){this.powerupRatio=1},e.prototype.stepPhysics=function(){if(0!=this.physicsEnabled&&this.world){this.world.step(1/30);for(var e=0;e<this.boundBodies.length;e++)this.boundBodies[e].sprite.position.x=this.boundBodies[e].body.position[0],this.boundBodies[e].sprite.position.y=Game.stageHeight-this.boundBodies[e].body.position[1],this.boundBodies[e].sprite.rotation=-this.boundBodies[e].body.angle}},e.prototype.findIndexByKeyValue=function(e,t,i){for(var s=0;s<e.length;s++)if(e[s][t]==i)return s;return null},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.getAngleBetweenBodies=function(e,t){return this.getAngle(e.position[0],Game.stageHeight-e.position[1],t.position[0],Game.stageHeight-t.position[1])},e.prototype.pause=function(){this.physicsEnabled=!1},e.prototype.resume=function(){this.physicsEnabled=!0},e.prototype.destroy=function(){this.boundBodies=[],this.world.clear(),this.world=null},e}(),StrikerDrone=function(){function e(e){this.targetBasketAngle=0,this.bombScale=.5,this.scene=e,this.game=e.game,this.targetPos=[],this.keyboardMoveForce=[0,0],this.maxSpeed=250,this.xForceMult=30,this.yForceMult=30,this.ticker=0,this.allowDropBomb=!0,this.horizontalSpeed=8,this.verticalSpeed=6,this.powerupIsActive=!1,this.powerupRatio=1,this.wobbleFrequency=20,this.powerupActive=!1,this.phrases=["striker/henry-no-2.mp3","striker/henry-er.mp3","striker/henry-shocked.mp3"],this.body=new p2.Body({mass:5,position:[-200,Game.stageHeight+200]}),this.body.damping=.95,this.body.angularDamping=.95,this.scene.physicsManager.addBodyToWorld(this.body),this.droneShape=new p2.Circle({radius:1}),this.body.addShape(this.droneShape,[0,-50]),this.droneShape.collisionGroup=this.scene.physicsManager.NONE,this.basketBody=new p2.Body({mass:.1,position:[-200,Game.stageHeight+100]}),this.basketBody.damping=.9,this.basketBody.angularDamping=.9,this.scene.physicsManager.addBodyToWorld(this.basketBody),this.collectBody=new p2.Body({mass:.1,position:[-200,Game.stageHeight+140]}),this.collectBody.damping=0,this.collectBody.angularDamping=0,this.scene.physicsManager.addBodyToWorld(this.collectBody),this.bombBody=new p2.Body({mass:1,position:[-200,Game.stageHeight+140]}),this.bombBody.damping=.5,this.bombBody.angularDamping=.5,this.bombBody.gravityScale=2,this.scene.physicsManager.addBodyToWorld(this.bombBody),this.collectConstraint=new p2.LockConstraint(this.basketBody,this.collectBody,{localOffsetB:[0,-45]}),this.scene.physicsManager.addConstraintToWorld(this.collectConstraint),this.bombConstraint=new p2.LockConstraint(this.basketBody,this.bombBody,{localOffsetB:[0,-60]}),this.scene.physicsManager.addConstraintToWorld(this.bombConstraint),this.basketConstraint=new p2.RevoluteConstraint(this.body,this.basketBody,{collideConnected:!1,localPivotA:[0,27],localPivotB:[0,45]}),this.scene.physicsManager.addConstraintToWorld(this.basketConstraint),this.basketConstraint.setStiffness(999999),this.basketConstraint.setRelaxation(.9),this.basketConstraint.enableMotor(),this.basketShapeLeft=new p2.Box({width:50,height:15}),this.basketShapeRight=new p2.Box({width:50,height:15}),this.basketEdgeBottom=new p2.Box({width:45,height:20}),this.bombShape=new p2.Circle({radius:25*this.bombScale}),this.bombShape.collisionGroup=this.scene.physicsManager.BOMB,this.bombShape.collisionMask=this.scene.physicsManager.SEED|this.scene.physicsManager.BUTTON|this.scene.physicsManager.LEVEL,this.basketSeedSensor=new p2.Box({width:30,height:10}),this.basketSeedSensor.sensor=!0,this.basketBody.addShape(this.basketShapeLeft,[-40,-18],-.55),this.basketBody.addShape(this.basketShapeRight,[40,-18],.55),this.basketBody.addShape(this.basketEdgeBottom,[0,-45]),this.collectBody.addShape(this.basketSeedSensor,[0,25]),this.bombBody.addShape(this.bombShape,[0,0]),this.basket=Game.displayStore.getContainer("striker/drone-basket"),this.bomb=Game.displayStore.getSprite("striker/drone-bomb.png"),this.bomb.scale.x=this.bomb.scale.y=this.bombScale,this.powerupBasket=this.basket.getSpriteAt(1),this.standardBasket=this.basket.getSpriteAt(0),this.puEffectHolder=this.basket.getContainer("striker/powerup-effect"),this.puEffectHolder.scale.x=this.puEffectHolder.scale.y=0,this.puEffectSparkle1=this.puEffectHolder.getSprite("striker/pu-sparkle-1"),this.puEffectSparkle2=this.puEffectHolder.getSprite("striker/pu-sparkle-2"),this.puEffectGlow=this.puEffectHolder.getSprite("striker/pu-glow"),this.puEffectSparkle1.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectSparkle2.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectGlow.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectGlow.scale.x=0,this.puEffectGlow.scale.y=0,this.basketShapeLeft.collisionGroup=this.basketShapeRight.collisionGroup=this.basketEdgeBottom.collisionGroup=this.scene.physicsManager.BASKET,this.basketSeedSensor.collisionGroup=this.scene.physicsManager.COLLECT,this.basketShapeLeft.collisionMask=this.basketShapeRight.collisionMask=this.basketEdgeBottom.collisionMask=this.scene.physicsManager.SEED,this.basketSeedSensor.collisionMask=this.scene.physicsManager.SEED,this.scene.physicsManager.bindSpriteToBody(this.basket,this.basketBody),this.scene.physicsManager.bindSpriteToBody(this.bomb,this.bombBody),this.container=Game.displayStore.getContainer("striker/drone-holder"),this.frame=this.container.getSprite("striker/drone-frame"),this.blueLight=this.container.getSprite("striker/light-blue.png"),this.redLight=this.container.getSprite("striker/light-red.png"),0==Game.isLowEndIPad?(this.blueLight.blendMode=PIXI.BLEND_MODES.ADD,this.redLight.blendMode=PIXI.BLEND_MODES.ADD,this.blueLight.alpha=0,this.redLight.alpha=1):(this.blueLight.alpha=0,this.redLight.alpha=0),this.propLeft=this.container.getSprite("striker/drone-prop-left"),this.propLeftTop=this.container.getSprite("striker/drone-prop-left-top"),this.propLeftTop.scale.x=0,this.propRight=this.container.getSprite("striker/drone-prop-right"),this.propRightTop=this.container.getSprite("striker/drone-prop-right-top"),this.propRightTop.scale.x=0,this.basketFront=Game.displayStore.getContainer("striker/drone-basket-front"),this.basketFront.position.x=-500,this.droneRope=Game.displayStore.getSprite("striker/drone-rope.png"),this.standardBasketFront=this.basketFront.getSpriteAt(0),this.powerupBasketFront=this.basketFront.getSpriteAt(1),this.standardBasket.alpha=1,this.standardBasketFront.alpha=1,this.powerupBasket.alpha=0,this.powerupBasketFront.alpha=0,this.yellowLight1=this.basketFront.getSprite("striker/light-yellow-1"),this.yellowLight2=this.basketFront.getSprite("striker/light-yellow-2"),this.yellowLight3=this.basketFront.getSprite("striker/light-yellow-3"),this.yellowLight2.alpha=0,this.yellowLight3.alpha=0,this.scene.mainHolder.addChild(this.basket),this.scene.physicsManager.bindSpriteToBody(this.container,this.body),this.active=!1,this.flying=!1,this.container.alpha=0,this.bombParticleHolder=Game.displayStore.getContainer("striker/bomb-particle-holder");var t,i={lowerAngle:-110,upperAngle:-70,lowerVelocity:500,upperVelocity:1300,endScale:0,lowerStartScale:1,upperStartScale:4,friction:.02,XstartRange:0,YstartRange:0,time:2,gravity:1400,cap:t=1==Game.isLowEndIPad?10:30,endAlpha:0,rotationPower:2};this.bombParticles=new ParticleBurst(["striker/bomb-particle-1","striker/bomb-particle-2"],this.bombParticleHolder,this.scene,i),this.scene.mainHolder.addChild(this.bombParticleHolder),this.bombSpawnAnimation=new TimelineMax,this.bombSpawnAnimation.add(TweenMax.to(this.bomb.scale,1,{x:this.bombScale,y:this.bombScale,ease:Elastic.easeOut})),this.bombSpawnAnimation.call(function(){this.allowDropBomb=!0},null,this),this.bombSpawnAnimation.pause(),0==Game.isLowEndIPad&&(this.lightsAnimation=new TimelineMax({repeat:-1}),this.lightsAnimation.add([TweenMax.to(this.blueLight,.5,{alpha:1,ease:Power3.easeOut}),TweenMax.to(this.redLight,.5,{alpha:0,ease:Power3.easeOut})]),this.lightsAnimation.add([TweenMax.to(this.blueLight,.5,{alpha:0,ease:Power3.easeOut}),TweenMax.to(this.redLight,.5,{alpha:1,ease:Power3.easeOut})]),this.lightsAnimation.add([TweenMax.to(this.yellowLight1,.33,{alpha:0,ease:Power3.easeOut}),TweenMax.to(this.yellowLight2,.33,{alpha:1,ease:Power3.easeOut})],0),this.lightsAnimation.add([TweenMax.to(this.yellowLight2,.33,{alpha:0,ease:Power3.easeOut}),TweenMax.to(this.yellowLight3,.33,{alpha:1,ease:Power3.easeOut})],.33),this.lightsAnimation.add([TweenMax.to(this.yellowLight3,.33,{alpha:0,ease:Power3.easeOut}),TweenMax.to(this.yellowLight1,.33,{alpha:1,ease:Power3.easeOut})],.66)),this.powerupTimeline=new TimelineMax,this.powerupTimeline.add([TweenMax.to(this.propLeftTop.scale,.5,{x:.5,ease:Back.easeInOut}),TweenMax.to(this.propRightTop.scale,.5,{x:.5,ease:Back.easeInOut}),TweenMax.to(this.propLeftTop.position,.4,{y:-88,ease:Back.easeOut}),TweenMax.to(this.propRightTop.position,.4,{y:-88,ease:Back.easeOut})]),this.powerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.3,{x:1.5,y:1.5,ease:Power3.easeIn}),TweenMax.to(this.puEffectGlow.scale,.3,{x:2.5,y:2.5,ease:Power3.easeIn}),TweenMax.to(this.puEffectSparkle1,.3,{rotation:4,ease:Power3.easeIn}),TweenMax.to(this.puEffectSparkle2,.3,{rotation:-4,ease:Power3.easeIn}),TweenMax.to(this.basket.scale,.3,{x:1.3,y:1.3,ease:Power3.easeIn}),TweenMax.to(this.basketFront.scale,.3,{x:1.3,y:1.3,ease:Power3.easeIn})],0),this.powerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.5,{x:0,y:0,ease:Power3.easeOut}),TweenMax.to(this.puEffectGlow.scale,.5,{x:0,y:0,ease:Power3.easeOut}),TweenMax.to(this.puEffectSparkle1,.3,{rotation:0,ease:Power3.easeOut}),TweenMax.to(this.puEffectSparkle2,.3,{rotation:0,ease:Power3.easeOut}),TweenMax.to(this.basket.scale,.3,{x:1,y:1,ease:Elastic.easeOut}),TweenMax.to(this.basketFront.scale,.3,{x:1,y:1,ease:Elastic.easeOut})],.3),this.powerupTimeline.call(function(){this.powerupIsActive=!1,this.powerupRatio=1,this.standardBasket.alpha=1,this.standardBasketFront.alpha=1,this.powerupBasket.alpha=0,this.powerupBasketFront.alpha=0},null,this,.2),this.powerupTimeline.call(function(){this.powerupIsActive=!0,this.powerupRatio=1.4,this.standardBasket.alpha=0,this.standardBasketFront.alpha=0,this.powerupBasket.alpha=1,this.powerupBasketFront.alpha=1},null,this,.3),this.powerupTimeline.pause()}return e.prototype.spawn=function(e){Game.playSound("striker/henry-lets-go.mp3"),this.active=!0,this.flying=!0,this.targetPos[0]=e[0],this.targetPos[1]=e[1],this.container.alpha=1,this.scene.physicsManager.resetBody(this.body),this.scene.physicsManager.resetBody(this.basketBody),TweenMax.delayedCall(1,this.scene.physicsManager.addFloor,null,this.scene.physicsManager)},e.prototype.updateFlyState=function(e){switch(e){case"takeoff":Game.playSound("striker/drone-takeoff.mp3",.4*this.powerupRatio),this.slowHoverDelay=TweenMax.delayedCall(2,this.updateFlyState,["hover"],this),this.flyState=e;break;case"hover":Game.stopSound("striker/drone-hover.wav"),this.slowHoverDelay=this.scene.killTween(this.slowHoverDelay),Game.stopSound("striker/drone-slow.wav"),Game.stopSound("striker/drone-fast.wav"),Game.playSound("striker/drone-hover.wav",.4*this.powerupRatio),1==this.powerupActive&&TweenMax.delayedCall(.1,Game.playSound,["striker/drone-hover.wav",.5]),this.flyState=e;break;case"fast":this.slowHoverDelay=this.scene.killTween(this.slowHoverDelay),Game.stopSound("striker/drone-slow.wav"),Game.stopSound("striker/drone-hover.wav"),Game.stopSound("striker/drone-takeoff.mp3"),Game.playSound("striker/drone-fast.wav",.4*this.powerupRatio),this.slowHoverDelay=TweenMax.delayedCall(5,this.updateFlyState,["slow"],this),1==this.powerupActive&&TweenMax.delayedCall(.1,Game.playSound,["striker/drone-fast.wav",.5]),TweenMax.delayedCall(.5,function(){this.flyState=e},null,this);break;case"slow":"hover"!=this.flyState&&"slow"!=this.flyState&&(this.slowHoverDelay=this.scene.killTween(this.slowHoverDelay),Game.stopSound("striker/drone-fast.wav"),Game.stopSound("striker/drone-hover.wav"),Game.playSound("striker/drone-slow.wav",.3*this.powerupRatio),this.slowHoverDelay=TweenMax.delayedCall(1.2,this.updateFlyState,["hover"],this),1==this.powerupActive&&TweenMax.delayedCall(.1,Game.playSound,["striker/drone-slow.wav",.5]),this.flyState=e)}},e.prototype.addMoveForce=function(e){switch(e){case"right":this.keyboardMoveForce[0]+=this.horizontalSpeed;break;case"left":this.keyboardMoveForce[0]-=this.horizontalSpeed;break;case"down":this.keyboardMoveForce[1]-=this.verticalSpeed;break;case"up":this.keyboardMoveForce[1]+=this.verticalSpeed}this.updateFlyState("fast")},e.prototype.dropBomb=function(){1==this.allowDropBomb&&(this.scene.physicsManager.removeConstraintFromWorld(this.bombConstraint),this.allowDropBomb=!1,Game.playSound("striker/button-whack.mp3"),Game.playSound("striker/swoosh-1.mp3"))},e.prototype.removeMoveForce=function(e){switch("fast"==this.flyState?this.updateFlyState("slow"):this.updateFlyState("hover"),e){case"right":this.keyboardMoveForce[0]-=this.horizontalSpeed;break;case"left":this.keyboardMoveForce[0]+=this.horizontalSpeed;break;case"down":this.keyboardMoveForce[1]+=this.verticalSpeed;break;case"up":this.keyboardMoveForce[1]-=this.verticalSpeed}},e.prototype.moveTo=function(e){this.targetPos[0]=e.x,this.targetPos[1]=e.y},e.prototype.eatSeed=function(){if(0!=this.allowDropBomb){this.bombScale+=.2,Game.playSound("striker/goop.mp3"),this.bombBody.mass=2*this.bombScale,this.bombBody.updateMassProperties(),this.bombBody.removeShape(this.bombShape),this.scene.physicsManager.removeConstraintFromWorld(this.bombConstraint),this.bombBody.damping=.5,this.bombBody.angularDamping=.5;var e=25*this.bombScale;this.bombShape=new p2.Circle({radius:e}),this.bombShape.collisionGroup=this.scene.physicsManager.BOMB,this.bombShape.collisionMask=this.scene.physicsManager.SEED|this.scene.physicsManager.BUTTON|this.scene.physicsManager.LEVEL,this.bombBody.addShape(this.bombShape,[0,0]),this.bombConstraint=new p2.LockConstraint(this.basketBody,this.bombBody,{localOffsetB:[0,-60-e+4]}),this.scene.physicsManager.addConstraintToWorld(this.bombConstraint),TweenMax.to(this.bomb.scale,.5,{y:this.bombScale,ease:Elastic.easeOut}),TweenMax.to(this.bomb.scale,.4,{x:this.bombScale,delay:.05,ease:Elastic.easeOut})}},e.prototype.miss=function(){var e;this.phrases.length<1&&(this.phrases=["striker/henry-er.mp3","striker/henry-shocked.mp3"],this.scene.shuffleArray(this.phrases)),this.scene.playerFace(1,3),this.bombParticleHolder.position.y=600,e=this.phrases.splice(0,1)[0],TweenMax.delayedCall(.3,Game.playSound,[e],this)},e.prototype.bombHit=function(e,t){if(!(this.body.position[1]<120)){if(e&&t){this.bombParticleHolder.position.y=540,this.bombParticleHolder.position.x=e;var i={lowerAngle:-110,upperAngle:-70,lowerVelocity:200,upperVelocity:100+1.1*t,endScale:0,lowerStartScale:1,upperStartScale:t/140,friction:.02,XstartRange:t/60,YstartRange:t/60,time:2,gravity:1400,cap:30,endAlpha:0,rotationPower:1};this.bombParticles.updateParams(i,this.bombParticles),this.bombParticles.fire(),Game.playSound("striker/splat-4.mp3")}this.resetBomb(),this.delayedSpawn=TweenMax.delayedCall(.6,function(){this.spawnBomb(),this.delayedSpawn=this.scene.killTween(this.delayedSpawn)},null,this)}},e.prototype.spawnBomb=function(){Game.playSound("striker/bubble-pop-1.mp3");var e=25*this.bombScale;this.bombShape=new p2.Circle({radius:e}),this.bombShape.collisionGroup=this.scene.physicsManager.BOMB,this.bombShape.collisionMask=this.scene.physicsManager.SEED|this.scene.physicsManager.BUTTON|this.scene.physicsManager.LEVEL,this.bombBody.addShape(this.bombShape,[0,0]),this.bombConstraint=new p2.LockConstraint(this.basketBody,this.bombBody,{localOffsetB:[0,-60-e+5]}),this.bombBody.position[0]=this.collectBody.position[0],this.bombBody.position[1]=this.collectBody.position[1]+60,this.scene.physicsManager.addConstraintToWorld(this.bombConstraint),this.bombSpawnAnimation.restart()},e.prototype.resetBomb=function(){this.allowDropBomb=!1,this.bombScale=.5,this.bombBody.mass=1,this.bombBody.updateMassProperties(),this.scene.physicsManager.resetBody(this.bombBody),this.bombBody.removeShape(this.bombShape),this.bomb.scale.x=this.bomb.scale.y=0},e.prototype.activatePowerup=function(){this.powerupActive=!0,Game.playSound("striker/power-up-transform.mp3"),this.basketBody.removeShape(this.basketShapeLeft),this.basketBody.removeShape(this.basketShapeRight),this.basketBody.removeShape(this.basketEdgeBottom),this.collectBody.removeShape(this.basketSeedSensor),this.basketEdgeBottom=new p2.Box({width:80,height:15}),this.basketSeedSensor=new p2.Box({width:80,height:5}),this.basketSeedSensor.sensor=!0,this.basketSeedSensor.collisionGroup=this.scene.physicsManager.COLLECT,this.basketSeedSensor.collisionMask=this.scene.physicsManager.SEED,this.basketEdgeBottom.collisionGroup=this.scene.physicsManager.BASKET,this.basketEdgeBottom.collisionMask=this.scene.physicsManager.SEED,this.basketBody.addShape(this.basketShapeLeft,[-70,-18],-.55),this.basketBody.addShape(this.basketShapeRight,[70,-18],.55),this.collectBody.addShape(this.basketSeedSensor,[0,0]),this.basketBody.addShape(this.basketEdgeBottom,[0,-65]),this.powerupTimeline.restart(),this.updateFlyState(this.flyState)},e.prototype.deactivatePowerup=function(){this.powerupRatio=1,this.powerupActive=!1,Game.playSound("striker/power-down-transform.mp3"),this.basketBody.removeShape(this.basketShapeLeft),this.basketBody.removeShape(this.basketShapeRight),this.collectBody.removeShape(this.basketEdgeBottom),this.collectBody.removeShape(this.basketSeedSensor),this.basketEdgeBottom=new p2.Box({width:45,height:20}),this.basketSeedSensor=new p2.Box({width:30,height:10}),this.basketSeedSensor.sensor=!0,this.basketSeedSensor.collisionGroup=this.scene.physicsManager.COLLECT,this.basketSeedSensor.collisionMask=this.scene.physicsManager.SEED,this.basketEdgeBottom.collisionGroup=this.scene.physicsManager.BASKET,this.basketEdgeBottom.collisionMask=this.scene.physicsManager.SEED,this.basketBody.addShape(this.basketShapeLeft,[-40,-18],-.55),this.basketBody.addShape(this.basketShapeRight,[40,-18],.55),this.collectBody.addShape(this.basketSeedSensor,[0,20]),this.basketBody.addShape(this.basketEdgeBottom,[0,-45]),this.powerupTimeline.reverse(),this.updateFlyState(this.flyState)},e.prototype.pause=function(){this.scene.pauseResumeTween(this.bombSpawnAnimation,"pause"),this.scene.pauseResumeTween(this.powerupTimeline,"pause"),this.scene.pauseResumeTween(this.delayedSpawn,"pause"),this.scene.pauseResumeTween(this.slowHoverDelay,"pause"),Game.pauseSound("striker/drone-hover.wav"),Game.pauseSound("striker/drone-fast.wav"),Game.pauseSound("striker/drone-slow.wav"),Game.pauseSound("striker/drone-takeoff.mp3")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.bombSpawnAnimation,"resume"),this.scene.pauseResumeTween(this.powerupTimeline,"resume"),this.scene.pauseResumeTween(this.delayedSpawn,"resume"),this.scene.pauseResumeTween(this.slowHoverDelay,"resume"),Game.resumeSound("striker/drone-hover.wav"),Game.resumeSound("striker/drone-fast.wav"),Game.resumeSound("striker/drone-slow.wav"),Game.resumeSound("striker/drone-takeoff.mp3")},e.prototype.tick=function(){if(0!=this.flying){this.targetPos[0]+=this.keyboardMoveForce[0]*this.powerupRatio,this.targetPos[1]+=this.keyboardMoveForce[1]*this.powerupRatio,this.targetPos[1]<350&&(this.targetPos[1]=350),this.targetPos[1]>700&&(this.targetPos[1]=700),this.targetPos[0]<-100&&(this.targetPos[0]=-100),this.targetPos[0]>Game.stageWidth+100&&(this.targetPos[0]=Game.stageWidth+100);var e=this.targetPos[0]-this.body.position[0],t=this.targetPos[1]-this.body.position[1],i=e/-450,s=500*Math.sin(this.ticker/this.wobbleFrequency),o=4e4*Math.sin((this.ticker+50)/(.1*this.wobbleFrequency));i>.6&&(i=.6),i<-.6&&(i=-.6),e>this.maxSpeed&&(e=this.maxSpeed),e<-this.maxSpeed&&(e=-this.maxSpeed),t>this.maxSpeed&&(t=this.maxSpeed),t<-this.maxSpeed&&(t=-this.maxSpeed);var a=i-this.body.angle;this.body.applyForce([e*this.xForceMult,t*this.yForceMult+s]),this.body.angularForce=5e5*a+o;this.basketConstraint.setMotorSpeed(3*(this.basketBody.angle-this.targetBasketAngle)),this.propLeft.scale.x=Math.sin(this.ticker),this.propRight.scale.x=Math.sin(this.ticker),1==this.powerupIsActive&&(this.propLeftTop.scale.x=Math.cos(this.ticker),this.propRightTop.scale.x=Math.cos(this.ticker)),this.basketFront.position.x=this.basket.position.x,this.basketFront.position.y=this.basket.position.y,this.basketFront.rotation=this.basket.rotation;var r=this.scene.physicsManager.getDistance(this.basketBody.position[0],this.basketBody.position[1],this.body.position[0],this.body.position[1]);this.droneRope.height=45+r,this.ticker++}},e.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.container),this.bombParticles.destroy(),this.delayedSpawn=this.scene.killTween(this.delayedSpawn),this.bombSpawnAnimation=this.scene.killTween(this.bombSpawnAnimation),this.lightsAnimation=this.scene.killTween(this.lightsAnimation),this.powerupTimeline=this.scene.killTween(this.powerupTimeline),Game.stopSound("striker/drone-hover.wav"),Game.stopSound("striker/drone-fast.wav"),Game.stopSound("striker/drone-slow.wav"),Game.stopSound("striker/drone-takeoff.mp3"),this.slowHoverDelay=this.scene.killTween(this.slowHoverDelay)},e}(),StrikerSeedManager=function(){function e(e){this.scene=e,this.game=e.game,this.container=Game.displayStore.getContainer("striker/seed-holder"),this.spawnTimer=0,this.timerSpeed=0,this.spawnIncrement=70,this.currentRound=0,this.ticker=0,this.pipesArray=[],this.createPipes(),this.createSeeds()}return e.prototype.start=function(){this.newRound(),this.beginFiring()},e.prototype.createPipes=function(){if(this.pipesHolder=Game.displayStore.getContainer("striker/pipes"),this.pipeDecorations=[],0==Game.isLowEndIPad){for(o=0;o<6;o++){var e=Game.displayStore.getSprite("striker/pipe-decoration-1.png"),t=Game.displayStore.getSprite("striker/pipe-decoration-2.png"),i=Game.displayStore.getSprite("striker/pipe-decoration-3.png");this.pipeDecorations.push(e),this.pipeDecorations.push(t),this.pipeDecorations.push(i)}this.scene.shuffleArray(this.pipeDecorations)}for(o=0;o<16;o++){var s=new StrikerPipe(this.scene,o);this.pipesHolder.addChild(s.container),this.pipesArray.push(s)}this.scene.shuffleArray(this.pipesArray);for(var o=0;o<this.pipesArray.length;o++)if(this.pipesArray[o].container.position.x=o<8?72*o+Game.getRandom(-5,5)-150:72*o+Game.getRandom(-5,5)+80,0==Game.isLowEndIPad){var a=this.pipeDecorations[o];a.position.x=Game.getRandom(-20,-10),a.position.y=Game.getRandom(-180,-80),this.pipesArray[o].container.addChild(a)}this.pipesHolder.setRegPointPixels(.5*Game.stageWidth,.5*Game.stageHeight,!0),this.pipesHolder.scale.x=this.pipesHolder.scale.y=9},e.prototype.createSeeds=function(){this.seeds=[];for(var e=0;e<10;e++){var t=new StrikerSeed(this.scene,this,e);this.seeds.push(t),this.container.addChild(t.sprite)}},e.prototype.newRound=function(){this.currentRound++,this.spawnIncrement>40&&(this.spawnIncrement-=2)},e.prototype.spawnSeed=function(){this.scene.shuffleArray(this.pipesArray);for(e=0;e<this.pipesArray.length;e++)if(0==this.pipesArray[e].active&&this.pipesArray[e].index>1&&this.pipesArray[e].index<this.pipesArray.length-1){this.currentPipe=this.pipesArray[e];break}this.power=Game.getRandom(650,900);for(var e=0;e<this.seeds.length;e++){var t=this.seeds[e];if(0==t.active){t.spawn(),this.currentPipe.fire(this.power,t);break}}},e.prototype.pause=function(){this.scene.pauseResumeTween(this.spawnTimeline,"pause");for(var e=0;e<this.pipesArray.length;e++)this.pipesArray[e].pause()},e.prototype.resume=function(){this.scene.pauseResumeTween(this.spawnTimeline,"resume");for(var e=0;e<this.pipesArray.length;e++)this.pipesArray[e].resume()},e.prototype.removeSeed=function(e){for(var t=0;t<this.seeds.length;t++)e==this.seeds[t].body&&this.seeds[t].remove(this.seeds[t])},e.prototype.impactSeed=function(e){},e.prototype.activatePowerup=function(){this.timerSpeed=6},e.prototype.deactivatePowerup=function(){this.timerSpeed=1},e.prototype.beginFiring=function(){this.timerSpeed=1,this.spawnTimer=0},e.prototype.endRound=function(){this.timerSpeed=0},e.prototype.tick=function(){if(1!=this.scene.paused&&1!=this.scene.endingGame){if(this.spawnTimer+=this.timerSpeed,this.spawnTimer>=this.spawnIncrement&&(this.spawnSeed(),this.spawnTimer=0),0==Game.isLowEndIPad)for(e=0;e<this.pipesArray.length;e++)this.pipesArray[e].tick();for(var e=0;e<this.seeds.length;e++)this.seeds[e].tick();this.ticker++}},e.prototype.destroy=function(){for(e=0;e<this.seeds.length;e++)this.seeds[e].destroy();for(e=0;e<this.pipesArray.length;e++)this.pipesArray[e].destroy();this.spawnTimeline=this.scene.killTween(this.spawnTimeline);for(var e=0;e<this.pipeDecorations.length;e++)Game.displayStore.returnPooledItem(this.pipeDecorations[e])},e}(),StrikerSeed=function(){function e(e,t,i){this.scene=e,this.game=e.game,this.manager=t,this.index=i,this.lastBodyPos=[],this.removing=!1,this.active=!1,this.physicsActive=!1,this.particles=[],this.ticker=0,this.currentSeedTrailIndex=0,this.sporesHolder=Game.displayStore.getContainer("striker/spores-holder");if(0==Game.isLowEndIPad){var s={lowerAngle:-120,upperAngle:-60,lowerVelocity:200,upperVelocity:900,endScale:0,lowerStartScale:1,upperStartScale:2,friction:.07,XstartRange:10,YstartRange:0,time:2,gravity:900,cap:20,endAlpha:0,rotationPower:2,blendMode:PIXI.BLEND_MODES.ADD};this.manager.container.addChild(this.sporesHolder),this.spores=new ParticleBurst(["striker/spore-1","striker/spore-2"],this.sporesHolder,this.game.currentScene,s),this.spores.fire(!0)}if(0==Game.isLowEndIPad){this.particleHolder=Game.displayStore.getContainer("striker/seed-particle-holder");for(var o=0;o<5;o++){var a=Game.displayStore.getSprite("striker/seed-particle-1"),r=Game.displayStore.getSprite("striker/seed-particle-2");a.blendMode=PIXI.BLEND_MODES.ADD,r.blendMode=PIXI.BLEND_MODES.ADD,this.particles.push(a),this.particles.push(r),this.particleHolder.addChild(a),this.particleHolder.addChild(r),this.manager.container.addChildAt(this.particleHolder,0)}this.scene.shuffleArray(this.particles)}this.body=new p2.Body({mass:1,position:[Game.stageWidth+100,Game.stageHeight/2]}),this.shape=new p2.Circle({radius:7}),this.body.damping=.5,this.body.angularDamping=.1,this.shape.collisionGroup=this.scene.physicsManager.SEED,this.shape.collisionMask=this.scene.physicsManager.SEED|this.scene.physicsManager.BOMB|this.scene.physicsManager.BASKET|this.scene.physicsManager.LEVEL|this.scene.physicsManager.COLLECT,this.body.addShape(this.shape,[0,0]),this.sprite=Game.displayStore.getSprite("striker/seed"),this.sprite.alpha=0,this.scene.physicsManager.bindSpriteToBody(this.sprite,this.body)}return e.prototype.spawn=function(){this.active=!0},e.prototype.fire=function(e,t,i){this.physicsActive=!0,this.sprite.scale.x=this.sprite.scale.y=1,this.sprite.alpha=1,this.spores&&this.spores.replay(),this.body.position=[e,100],this.lastBodyPos[0]=this.body.position[0],this.lastBodyPos[1]=this.body.position[1]-10,this.sporesHolder.position.x=this.body.position[0],this.sporesHolder.position.y=Game.stageHeight-100,this.scene.physicsManager.addBodyToWorld(this.body),this.sprite.position.x=this.body.position[0],this.sprite.position.y=Game.stageHeight-this.body.position[1];var s=Math.cos(-i+Math.PI/2)*t,o=Math.sin(-i+Math.PI/2)*t;this.body.applyImpulse([s,o])},e.prototype.remove=function(e){e.removing=!1,e.sprite.scale.x=e.sprite.scale.y=0,e.sprite.alpha=0,e.scene.physicsManager.resetBody(e.body),e.scene.physicsManager.removeBodyFromWorld(e.body),e.active=!1,e.physicsActive=!1},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.tick=function(){if(0==Game.isLowEndIPad)for(var e=0;e<this.particles.length;e++)this.particles[e].alpha>0&&(this.particles[e].alpha-=.04,this.particles[e].scale.x-=.04,this.particles[e].scale.y-=.04,this.particles[e].position.y+=2,this.particles[e].rotation+=.2);if(0!=this.physicsActive){var t=Math.PI/2-this.scene.physicsManager.getAngle(this.lastBodyPos[0],this.lastBodyPos[1],this.body.position[0],this.body.position[1]);if(this.body.angle+=(t-this.body.angle)/2,this.lastBodyPos[0]=this.body.position[0],this.lastBodyPos[1]=this.body.position[1],0==Game.isLowEndIPad&&2==this.ticker){this.ticker=0,this.currentSeedTrailIndex<this.particles.length-1?this.currentSeedTrailIndex++:this.currentSeedTrailIndex=0;var i=this.particles[this.currentSeedTrailIndex];i.position.x=this.body.position[0],i.position.y=Game.stageHeight-this.body.position[1],i.scale.x=1.5,i.scale.y=1.5,i.alpha=1}this.ticker++}},e.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.sprite),Game.displayStore.returnPooledItem(this.sporesHolder),this.spores&&(this.spores.destroy(),this.spores=null);for(var e=0;e<this.particles.length;e++)Game.displayStore.returnPooledItem(this.particles[e])},e}(),StrikerTower=function(){function e(e){this.scene=e,this.game=e.game,this.ringingBell=!1,this.started=!1,this.power=0,this.container=Game.displayStore.getContainer("striker/bell-tower-holder"),this.containerFront=Game.displayStore.getContainer("striker/bell-tower-base"),this.towerMask=new PIXI.Graphics,this.towerMask.beginFill(16711935,.5),this.towerMask.drawRect(-100,-150,200,150),this.towerMask.position.y=0,this.bellHolder=this.container.getContainer("striker/bell-holder"),this.bell=this.bellHolder.getSprite("striker/bell.png"),this.bellShadow=this.bellHolder.getSprite("striker/bell-shadow.png"),this.tower=this.container.getContainer("striker/bell-tower"),this.button=this.containerFront.getSprite("striker/button.png"),this.marker=this.container.getContainer("striker/marker"),this.markerBack=this.container.getSprite("striker/marker-back.png"),this.buttonShadow=this.containerFront.getSprite("striker/button-shadow.png"),this.hammer=this.marker.getSprite("striker/marker-hammer.png"),this.spring=this.marker.getSprite("striker/marker-spring.png"),this.lightsHolder=this.tower.getContainer("striker/lights-holder"),this.container.addChild(this.towerMask),this.tower.mask=this.towerMask,this.bellTimeline=new TimelineMax,this.bellTimeline.add(TweenMax.to(this.bell.scale,.05,{x:1.5,y:1.5,ease:Power2.easeOut})),this.bellTimeline.add(TweenMax.to(this.bell.scale,.5,{x:1,y:1,ease:Elastic.easeOut})),this.bellTimeline.pause(),this.glows1=[],this.glows2=[],this.glowsLeft=[],this.glowsRight=[];var t=[32454,16766976,15400999,3583744,12779738,16745472];if(0==Game.isLowEndIPad){for(var i=0;i<28;i++){var s=Game.displayStore.getContainer("striker/tower-glow"),o=Game.displayStore.getSprite("striker/tower-glow.png"),a=Game.displayStore.getSprite("striker/tower-glow-white.png");o.tint=t[i%6],s.addChild(o),s.addChild(a),i%2==0?(this.glows1.push(s),s.alpha=0):this.glows2.push(s),this.lightsHolder.addChild(s),o.blendMode=PIXI.BLEND_MODES.ADD,i<15?(this.glowsLeft.push(s),s.position.x=-57-.6*i,s.position.y=-32.7*i-85):(this.glowsRight.push(s),s.position.x=57+.6*(i-15),s.position.y=-32.7*(i-15)-85)}this.lightsTimeline=new TimelineMax({repeat:-1}),this.lightsTimeline.add([TweenMax.to(this.glows1,.5,{alpha:1,repeat:-1,yoyo:!0,ease:Power3.easeInOut}),TweenMax.to(this.glows2,.5,{alpha:0,repeat:-1,yoyo:!0,ease:Power3.easeInOut})]),this.lightsTimeline.pause(),this.victoryLightsTimeline=new TimelineMax,this.victoryLightsTimeline.add([TweenMax.to(this.glows1,.1,{alpha:0,ease:Power3.easeOut}),TweenMax.to(this.glows2,.1,{alpha:0,ease:Power3.easeOut})]),this.victoryLightsTimeline.add([TweenMax.staggerTo(this.glowsLeft,.2,{alpha:1,ease:Power3.easeInOut},.07),TweenMax.staggerTo(this.glowsRight,.2,{alpha:1,ease:Power3.easeInOut},.07)]),this.victoryLightsTimeline.add([TweenMax.to(this.glows1,.1,{alpha:0,ease:Power3.easeInOut,repeat:5,yoyo:!0}),TweenMax.to(this.glows2,.1,{alpha:0,ease:Power3.easeInOut,repeat:3,yoyo:!0})]),this.victoryLightsTimeline.pause(),this.startLightsFlashing()}}return e.prototype.showVictoryLights=function(){1!=Game.isLowEndIPad&&(Game.playSound("striker/ramp.mp3"),this.victoryLightsTimeline.restart())},e.prototype.startLightsFlashing=function(){if(1!=Game.isLowEndIPad){for(var e=0;e<this.glows1.length;e++)this.glows1[e].alpha=0,this.glows2[e].alpha=1;this.lightsTimeline.restart()}},e.prototype.start=function(){this.setHeight(60)},e.prototype.setHeight=function(e){this.bellHeight=e,this.bellHeight>340&&(this.bellHeight=340),Game.playSound("striker/robot-move.mp3",.7),this.setheightTimeline=this.scene.killTween(this.setheightTimeline),this.setheightTimeline=new TimelineMax,this.setheightTimeline.add([TweenMax.to(this.towerMask,.7,{height:200+e,ease:Power3.easeInOut}),TweenMax.to(this.bellHolder.position,.7,{y:-200-e,ease:Power3.easeInOut}),TweenMax.to(this.marker.position,.7,{delay:.1,y:-50,ease:Power3.easeInOut}),TweenMax.to(this.markerBack.position,.7,{delay:.1,y:-50,ease:Power3.easeInOut})]),this.setheightTimeline.call(function(){this.started=!0},null,this)},e.prototype.impact=function(e){this.scene.shakeScreen(e),this.hitButton(e/2)},e.prototype.hitButton=function(e){var t=-80-this.bellHeight,i=-60-e/4;this.power=e,Game.playSound("striker/rail-up.mp3"),Game.playSound("striker/ratchet.mp3"),this.hitButtonTimeline=this.scene.killTween(this.hitButtonTimeline),this.hitButtonTimeline=new TimelineMax,this.hitButtonTimeline.add([TweenMax.to(this.button.scale,.1,{y:.5,ease:Power3.easeOut}),TweenMax.to(this.buttonShadow.position,.1,{y:-74,ease:Power3.easeOut})]),this.hitButtonTimeline.add([TweenMax.to(this.button.scale,.3,{y:1,ease:Back.easeOut}),TweenMax.to(this.buttonShadow.position,.3,{y:-70,ease:Back.easeOut})]),this.hitButtonTimeline.add([TweenMax.to(this.marker.position,.5,{y:i,ease:Power3.easeOut}),TweenMax.to(this.markerBack.position,.5,{y:i,ease:Power3.easeOut}),TweenMax.to(this.spring.scale,.2,{y:.7,ease:Power3.easeOut}),TweenMax.to(this.spring,.2,{rotation:-.1,ease:Power3.easeOut}),TweenMax.to(this.hammer,.2,{rotation:-.1,delay:.02,ease:Power3.easeOut}),TweenMax.to(this.hammer.position,.3,{x:30,y:-44,ease:Power3.easeOut})],0),i>t?(Game.playSound("striker/splat-4.mp3",Math.abs(i/t)),Game.playSound("striker/gun-fire.mp3",Math.abs(i/t)),this.hitButtonTimeline.call(this.scene.updateScore,[Math.round(e/50)],this.scene),this.hitButtonTimeline.call(Game.playSound,["striker/rail-down.mp3"],this,.6),this.hitButtonTimeline.call(Game.playSound,["striker/henry-no-2.mp3"],this,.4),this.hitButtonTimeline.call(this.scene.playerFace,[1,3],this.scene,.4),this.hitButtonTimeline.add([TweenMax.to(this.marker.position,.4,{y:-80,ease:Power2.easeIn}),TweenMax.to(this.markerBack.position,.4,{y:-80,ease:Power2.easeIn}),TweenMax.to(this.spring.scale,.4,{y:1,ease:Power2.easeIn}),TweenMax.to(this.hammer.position,.4,{x:30,y:-49,ease:Power2.easeIn}),TweenMax.to(this.spring,.4,{rotation:0,ease:Power2.easeIn}),TweenMax.to(this.hammer,.4,{rotation:0,ease:Power2.easeIn})],.5),this.hitButtonTimeline.add([TweenMax.to(this.marker.position,.4,{y:-50,ease:Bounce.easeOut}),TweenMax.to(this.markerBack.position,.4,{y:-50,ease:Bounce.easeOut})],.8),this.hitButtonTimeline.call(function(){this.hammer.position.y=-42,this.spring.scale.y=.5},null,this,1.05),this.hitButtonTimeline.add([TweenMax.to(this.spring.scale,.8,{y:1,ease:Elastic.easeOut}),TweenMax.to(this.hammer.position,.8,{x:30,y:-49,ease:Elastic.easeOut})],1.051),this.hitButtonTimeline.call(Game.playSound,["striker/metal-bang-2.mp3"],this,.87)):(Game.playSound("striker/splat-5.mp3"),Game.playSound("striker/blast.mp3",.3),Game.playSound("striker/gun-fire.mp3"))},e.prototype.ringBell=function(){this.hitButtonTimeline=this.scene.killTween(this.hitButtonTimeline),this.hitButtonTimeline=new TimelineMax,this.ringingBell=!0,this.lightsTimeline&&this.lightsTimeline.pause(),this.showVictoryLights(),this.scene.playerFace(2,2),this.scene.timer.addTime(15),this.hitButtonTimeline.call(this.scene.updateScore,[Math.round(this.power/50)],this.scene),this.hitButtonTimeline.call(Game.playSound,["striker/henry-yeahh.mp3"],this,.3),this.hitButtonTimeline.add([]),this.hitButtonTimeline.call(Game.playSound,["striker/rail-down.mp3"],this),this.hitButtonTimeline.add([TweenMax.to(this.marker.position,.4,{y:-80,ease:Power2.easeIn}),TweenMax.to(this.markerBack.position,.4,{y:-80,ease:Power2.easeIn}),TweenMax.to(this.spring,.6,{rotation:0,ease:Elastic.easeOut}),TweenMax.to(this.hammer,.6,{rotation:0,ease:Elastic.easeOut}),TweenMax.to(this.spring.scale,.6,{y:1,ease:Elastic.easeOut}),TweenMax.to(this.hammer.position,.6,{x:30,y:-49,ease:Elastic.easeOut})],.1),this.hitButtonTimeline.add([TweenMax.to(this.marker.position,.4,{y:-50,ease:Bounce.easeOut}),TweenMax.to(this.markerBack.position,.4,{y:-50,ease:Bounce.easeOut})],.45),this.hitButtonTimeline.call(function(){this.hammer.position.y=-42,this.spring.scale.y=.54},null,this,.72),this.hitButtonTimeline.add([TweenMax.to(this.spring.scale,.8,{y:1,ease:Elastic.easeOut}),TweenMax.to(this.hammer.position,.8,{x:30,y:-49,ease:Elastic.easeOut}),TweenMax.from(this.spring,.4,{rotation:-.1,ease:Elastic.easeOut}),TweenMax.from(this.hammer,.4,{rotation:-.1,ease:Elastic.easeOut})],.721),this.hitButtonTimeline.call(function(){this.ringingBell=!1,this.power=0,this.scene.spawnTicket(new PIXI.Point(this.container.position.x-120,280))},null,this),this.hitButtonTimeline.call(function(){this.scene.spawnTicket(new PIXI.Point(this.container.position.x+120,280))},null,this,"+=0.2"),this.hitButtonTimeline.call(function(){this.scene.seedManager.newRound(),this.setHeight(this.bellHeight+20)},null,this,"+=0.2"),this.hitButtonTimeline.call(this.startLightsFlashing,null,this,"+=0.2"),this.hitButtonTimeline.add([TweenMax.to(this.button.scale,.3,{y:1,ease:Back.easeOut}),TweenMax.to(this.buttonShadow.position,.3,{y:-70,ease:Back.easeOut})],0),this.hitButtonTimeline.call(Game.playSound,["striker/metal-bang-2.mp3"],this,.57),Game.playSound("striker/bell.mp3"),this.bellTimeline.restart()},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.tick=function(){0!=this.started&&this.marker.position.y<this.bellHolder.position.y+135&&0==this.ringingBell&&this.ringBell()},e.prototype.destroy=function(){this.hitButtonTimeline=this.scene.killTween(this.hitButtonTimeline),this.bellTimeline=this.scene.killTween(this.bellTimeline),this.setheightTimeline=this.scene.killTween(this.setheightTimeline),this.lightsTimeline=this.scene.killTween(this.lightsTimeline),this.victoryLightsTimeline=this.scene.killTween(this.victoryLightsTimeline),this.towerMask.clear();for(var e=0;e<this.glows1.length;e++)Game.displayStore.returnPooledItem(this.glows1[e].getSpriteAt(0)),Game.displayStore.returnPooledItem(this.glows1[e].getSpriteAt(1)),Game.displayStore.returnPooledItem(this.glows1[e]),Game.displayStore.returnPooledItem(this.glows2[e].getSpriteAt(0)),Game.displayStore.returnPooledItem(this.glows2[e].getSpriteAt(1)),Game.displayStore.returnPooledItem(this.glows2[e])},e}(),StrikerInputManager=function(){function e(e){this.scene=e,this.hitAreaSprite=Game.displayStore.getSprite("striker/blank-input.png"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.keys={},this.keys.up=!1,this.keys.down=!1,this.keys.left=!1,this.keys.right=!1,this.currentAngle=0,this.inputPos=new PIXI.Point,this.maxAngleDiff=1.4,this.minAngleDiff=.1,this.driveForce=0,this.inputIsDown=!1,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite)}return e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mousemove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseupoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))})):(e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchmove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchendoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}))},e.prototype.inputDown=function(e,t){1!=this.scene.paused&&(this.inputIsDown=!0)},e.prototype.inputUp=function(e,t){1!=this.scene.paused&&(1==this.inputIsDown&&(this.inputIsDown=!1),this.keyUp("spacebar"))},e.prototype.inputMove=function(e,t){this.inputPos.x=t.x,this.inputPos.y=t.y},e.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},e.prototype.getInputAngle=function(){var e=this.currentAngle;return e>this.maxAngleDiff&&(e=this.maxAngleDiff),e<this.minAngleDiff&&(e=this.minAngleDiff),e},e.prototype.keyDown=function(e){1!=this.scene.tutorialOverlay.isOpen&&(0==this.keys[e]&&("up"!=e&&"down"!=e&&"left"!=e&&"right"!=e||this.scene.drone.addMoveForce(e),this.keys[e]=!0),"spacebar"==e&&this.scene.drone.dropBomb())},e.prototype.keyUp=function(e){1!=this.scene.tutorialOverlay.isOpen&&1==this.keys[e]&&("up"!=e&&"down"!=e&&"left"!=e&&"right"!=e||this.scene.drone.removeMoveForce(e),this.keys[e]=!1)},e.prototype.tick=function(){this.scene.endingGame},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},e}(),StrikerTimer=function(){function e(e){this.scene=e,this.game=e.game,this.time=0,this.timeText=Game.displayStore.getBitmapText("timer-font"),this.timeText.scale.x=this.timeText.scale.y=.55,this.timeText.text=this.convertSecondsToTime(this.time),this.timeText.position.x=-this.timeText.width/2,this.timeText.tint=16777215,this.container=Game.displayStore.getContainer("striker/timer-holder"),this.timerInner=this.container.getContainer("striker/timer-inner"),this.timerIcon=this.timerInner.getSprite("striker/timer-icon"),this.container.position.x=Game.stageWidth/2,this.container.position.y=7,this.timerInner.addChild(this.timeText),this.timeText.position.x=this.timerIcon.position.x+30,this.timeText.position.y=this.timerIcon.position.y-5,this.timerInner.position.x=-60,this.timerInner.position.y=this.container.height/4,this.timeAddText=Game.displayStore.getBitmapText("striker/time-add-font"),this.timeAddText.text="0000",this.timeAddText.tint=16777215,this.timeAddTextHolder=Game.displayStore.getContainer("striker/time-add-text-holder"),this.timeAddTextHolder.position.x=150,this.timeAddTextHolder.position.y=50,this.timeAddTextHolder.alpha=0,this.timeAddTextHolder.scale.x=this.timeAddTextHolder.scale.y=0,this.timeAddTextHolder.rotation=-.15,this.timeAddTextHolder.addChild(this.timeAddText),this.container.addChild(this.timeAddTextHolder),this.timeAddTimeline=new TimelineMax,this.timeAddTimeline.call(Game.playSound,["striker/marker-hit.mp3"],this,.5),this.timeAddTimeline.add([TweenMax.to(this.timeAddTextHolder,.2,{alpha:1,ease:Power2.easeOut}),TweenMax.to(this.timeAddTextHolder.scale,1,{x:1,y:1,ease:Elastic.easeOut})]),this.timeAddTimeline.add([TweenMax.to(this.timeAddTextHolder,1,{alpha:0,ease:Power2.easeIn}),TweenMax.to(this.timeAddTextHolder.scale,.3,{x:0,y:0,ease:Power3.easeIn})],"+=0.5"),this.timeAddTimeline.pause()}return e.prototype.start=function(){this.addTime(40)},e.prototype.addTime=function(e){function t(){this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.time<s?(this.time++,Game.playSound("striker/tick-up.mp3",.5),this.timeText.text=this.convertSecondsToTime(this.time),this.timerTimeline.call(t,null,this,i)):this.timerTimeline.call(this.tickTime,null,this,"+=1")}this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.timeText.tint=6018816,this.timeAddText.text="+"+String(e),this.timeAddText.position.x=-this.timeAddText.width/2,this.timeAddText.position.y=-this.timeAddText.height/2,this.timeAddTimeline.restart();var i=.05;this.timerTimeline.call(t,null,this,i);var s=this.time+e;this.time},e.prototype.pause=function(){this.scene.pauseResumeTween(this.timerTimeline,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.timerTimeline,"resume")},e.prototype.convertSecondsToTime=function(e){var t=Math.floor(e/60),i=Math.ceil(e%60),s=String(t),o=String(i);return i<10&&(o="0"+i),e%60%1==0?s+":"+o:s+" "+o},e.prototype.destroy=function(){this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timeAddTimeline=this.scene.killTween(this.timeAddTimeline),this.destroyed=!0},e.prototype.tickTime=function(){1!=this.destroyed&&1!=this.scene.paused&&(this.time>0?(this.time-=.5,this.timeText.text=this.convertSecondsToTime(this.time),this.timerTimeline=this.scene.killTween(this.timerTimeline),this.timerTimeline=new TimelineMax,this.timerTimeline.call(this.tickTime,null,this,.5),this.time<=10&&this.time%1==0&&Game.playSound("striker/time-running-out.mp3",.9),this.time<=10?this.timeText.tint=16711680:this.timeText.tint=16777215):this.scene.endGame(this.scene))},e}(),StrikerPipe=function(){function e(e,t){this.scene=e,this.game=e.game,this.index=t,this.active=!1,this.ticker=0,this.rotateSpeed=Game.getRandom(20,60),this.rotateAmount=Game.getRandom(10,20),this.container=Game.displayStore.getContainer("striker/pipe"),this.pipeGlow=Game.displayStore.getSprite("striker/pipe-glow.png"),this.pipeGlow.blendMode=PIXI.BLEND_MODES.ADD,t<8?(this.pipeBG=Game.displayStore.getSprite("striker/pipe-bg-1.png"),this.pipeBGLit=Game.displayStore.getSprite("striker/pipe-bg-1-lit.png"),this.pipeFG=Game.displayStore.getSprite("striker/pipe-fg-1.png"),this.pipeBG.position.y=-203,this.pipeBGLit.position.y=-203,this.pipeFG.position.x=3,this.pipeGlow.position.y=-205,this.pipeGlow.rotation=-.15):(this.pipeBG=Game.displayStore.getSprite("striker/pipe-bg-2.png"),this.pipeBGLit=Game.displayStore.getSprite("striker/pipe-bg-2-lit.png"),this.pipeFG=Game.displayStore.getSprite("striker/pipe-fg-2.png"),this.pipeBG.position.y=-203,this.pipeBGLit.position.y=-203,this.pipeFG.position.x=-3,this.pipeGlow.position.x=0,this.pipeGlow.position.y=-205,this.pipeGlow.rotation=.4);var i=new RoughEase({strength:2,points:9,randomize:!1,clamp:!0});this.fireTimeline=this.scene.killTween(this.fireTimeline),this.fireTimeline=new TimelineMax,this.fireTimeline.add([TweenMax.to(this.container.scale,.8,{y:.5,ease:Power3.easeOut})]),this.fireTimeline.add([TweenMax.to(this.container.scale,.8,{y:.6,ease:i}),TweenMax.to(this.pipeBGLit,.5,{alpha:1,delay:.3,ease:Power3.easeIn})]),this.fireTimeline.call(function(){Game.playSound("striker/pop-"+Game.getRandom(1,3,!0)+".mp3"),Game.playSound("striker/pop-"+Game.getRandom(1,3,!0)+".mp3"),Game.playSound("striker/poof-"+Game.getRandom(1,4,!0)+".mp3",.2)},null,this),this.fireTimeline.add([TweenMax.to(this.container.scale,.8,{y:1,ease:Elastic.easeOut}),TweenMax.to(this.pipeBGLit,1,{alpha:0,ease:Power2.easeOut}),TweenMax.to(this.pipeGlow.scale,.5,{x:1.5,y:1.5,ease:Expo.easeOut}),TweenMax.to(this.pipeGlow,.5,{alpha:0,ease:Power2.easeOut})]),this.fireTimeline.call(function(){this.active=!1},null,this),this.fireTimeline.pause(),this.pipeGlow.scale.x=this.pipeGlow.scale.y=0,this.pipeBGLit.alpha=0,this.container.addChild(this.pipeBG),this.container.addChild(this.pipeBGLit),this.container.addChild(this.pipeFG),this.container.addChild(this.pipeGlow),Game.getRandom(0,1)>.5&&(this.container.scale.x=-1),this.container.position.y=Game.getRandom(660,690)}return e.prototype.fire=function(e,t){this.active=!0,this.pipeGlow.alpha=1,this.pipeGlow.scale.x=this.pipeGlow.scale.y=0,TweenMax.delayedCall(1.6,t.fire,[this.container.position.x+100*this.container.rotation,e,this.container.rotation],t),this.fireTimeline.restart()},e.prototype.pause=function(){this.scene.pauseResumeTween(this.fireTimeline,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.fireTimeline,"resume")},e.prototype.tick=function(){0==Game.isLowEndIPad&&(this.container.rotation=Math.sin(this.ticker/this.rotateSpeed)/this.rotateAmount),this.ticker++},e.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.pipeFG),Game.displayStore.returnPooledItem(this.pipeBG),Game.displayStore.returnPooledItem(this.container),Game.displayStore.returnPooledItem(this.pipeGlow),Game.displayStore.returnPooledItem(this.pipeBGLit)},e}(),StrikerTicket=function(){function e(e,t){this.scene=e,this.game=e.game,this.index=t,this.available=!0,this.destroyed=!1,this.ticker=0}return e.prototype.spawn=function(e,t){if(1!=this.destroyed){this.available=!1;Game.coreData.getCurrentTickets(),Game.coreData.getCurrentRide().startingTickets;this.ticket=Game.ticketPool.getTicket(),this.mainHolder=e,this.ticket.container.position.x=t.x,this.ticket.container.position.y=t.y,this.spawnedY=t.y,this.mainHolder.addChildAt(this.ticket.container,this.mainHolder.children.length-2)}},e.prototype.collect=function(){},e.prototype.tick=function(){0==this.available&&(this.getDistance(this.ticket.container.position,new PIXI.Point(this.mainHolder.toLocal(new PIXI.Point,this.scene.drone.container).x,this.mainHolder.toLocal(new PIXI.Point,this.scene.drone.container).y))>150||(this.available=!0,this.scene.shakeScreen(500),this.ticket.collect())),this.ticker++},e.prototype.getDistance=function(e,t){var i=0,s=0;return i=t.x-e.x,i*=i,s=t.y-e.y,s*=s,Math.sqrt(i+s)},e.prototype.pause=function(){this.ticket&&this.ticket.pause()},e.prototype.resume=function(){this.ticket&&this.ticket.resume()},e.prototype.destroy=function(){this.destroyed=!0,this.ticket&&this.ticket.destroy()},e}(),CrazyGolfTicket=function(){function e(e,t){this.scene=e,this.game=e.game,this.index=t,this.available=!0,this.destroyed=!1,this.ticker=0,this.ticket=Game.ticketPool.getTicket()}return e.prototype.spawn=function(e,t){if(1!=this.destroyed){this.available=!1,this.ticket.spawn(!1);Game.coreData.getCurrentTickets(),Game.coreData.getCurrentRide().startingTickets;this.mainHolder=e,this.ticket.container.position.x=t.x,this.ticket.container.position.y=t.y,this.spawnedY=t.y,this.mainHolder.addChildAt(this.ticket.container,0)}},e.prototype.collect=function(){},e.prototype.remove=function(){Game.ticketPool.returnTicket(this.ticket)},e.prototype.tick=function(){0==this.available&&(this.getDistance(this.ticket.container.position,new PIXI.Point(this.mainHolder.toLocal(new PIXI.Point,this.scene.ballManager.currentBall.sprite).x,this.mainHolder.toLocal(new PIXI.Point,this.scene.ballManager.currentBall.sprite).y))>70||(this.available=!0,this.ticket.collect())),this.ticker++},e.prototype.getDistance=function(e,t){var i=0,s=0;return i=t.x-e.x,i*=i,s=t.y-e.y,s*=s,Math.sqrt(i+s)},e.prototype.pause=function(){this.ticket&&this.ticket.pause()},e.prototype.resume=function(){this.ticket&&this.ticket.resume()},e.prototype.destroy=function(){this.destroyed=!0,this.ticket&&this.ticket.destroy()},e}(),CrazyGolfPlayer=function(){function e(e){this.scene=e,this.game=e.game,this.container=Game.displayStore.getContainer("crazy-golf/player-holder"),this.container.position.x=66,this.container.position.y=360,this.player=this.container.getContainer("crazy-golf/player"),this.head=this.player.getSprite("crazy-golf/head-front"),this.headBack=this.player.getSprite("crazy-golf/head-back"),this.body=this.player.getSprite("crazy-golf/body"),this.legs=this.player.getSprite("crazy-golf/legs"),this.golfClub=this.player.getSprite("crazy-golf/golf-club"),this.platformSprite=Game.displayStore.getSprite("crazy-golf/golf-platform"),this.platformBody=new p2.Body({mass:0,position:[59,130]}),this.platformShape=new p2.Box({width:95,height:50}),this.platformShape.collisionGroup=this.scene.physicsManager.PLAYER,this.platformShape.collisionMask=this.scene.physicsManager.BALL,this.platformBody.addShape(this.platformShape,[0,34]),this.scene.physicsManager.addBodyToWorld(this.platformBody),this.scene.physicsManager.bindSpriteToBody(this.platformSprite,this.platformBody),this.resetTimeline=new TimelineMax,this.resetTimeline.add([TweenMax.to(this.golfClub,.5,{rotation:0,ease:Elastic.easeOut}),TweenMax.to(this.head,.3,{rotation:0,ease:Back.easeOut}),TweenMax.to(this.headBack,.3,{rotation:0,ease:Back.easeOut})]),this.resetTimeline.pause(),this.platformSprite.position.x=40,this.platformSprite.position.y=Game.stageHeight-140}return e.prototype.remove=function(e){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.raiseArm=function(e){this.golfClub.rotation=e,this.head.rotation=-e/5,this.headBack.rotation=-e/5},e.prototype.strikeBall=function(e){this.resetTimeline.restart();var t=Math.round(e/.33);t<1&&(t=1),Game.playSound("crazy-golf/hit-ball-"+t+".mp3"),1==this.scene.powerupIsActive&&Game.playSound("crazy-golf/rocket-"+Game.getRandom(1,2,!0)+".mp3")},e.prototype.tick=function(){},e.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.container),this.resetTimeline=this.scene.killTween(this.resetTimeline)},e}(),CrazyGolfPhysicsManager=function(){function e(e,t){this.physicsEnabled=!0,this.resizeRatio=1,this.BALL=Math.pow(2,0),this.WATER=Math.pow(2,1),this.PORTAL=Math.pow(2,2),this.PLAYER=Math.pow(2,3),this.TICKET=Math.pow(2,4),this.LEVEL=Math.pow(2,5),this.NONE=Math.pow(2,6),this.GRAVITY_FIELD=Math.pow(2,7),this.GOAL=Math.pow(2,8),this.BLOCK=Math.pow(2,9),this.scene=e,this.mainContainer=t,this.powerupRatio=1}return e.prototype.initPhysicsWorld=function(){this.world=new p2.World({gravity:[0,-300]}),this.world.broadphase=new p2.NaiveBroadphase(1),this.boundBodies=[],this.world.defaultContactMaterial.restitution=.2,this.world.defaultContactMaterial.contactSkinSize=1,this.world.defaultContactMaterial.relaxation=5,this.floorBody=new p2.Body({mass:0,position:[0,55]}),this.floorShape=new p2.Plane,this.floorShape.collisionGroup=this.WATER,this.floorShape.collisionMask=this.BALL,this.floorBody.addShape(this.floorShape),this.addBodyToWorld(this.floorBody),this.floorShape.sensor=!0,this.ceilingBody=new p2.Body({mass:0,position:[0,800]}),this.ceilingShape=new p2.Plane,this.ceilingShape.collisionGroup=this.LEVEL,this.ceilingShape.collisionMask=this.BALL,this.ceilingBody.addShape(this.ceilingShape,[0,0],Math.PI);var e=this;this.world.on("beginContact",function(t){e.checkCollision(e,t)}),this.world.on("endContact",function(t){e.checkEndCollision(e,t)}),this.physicsEnabled=!0},e.prototype.enableCeiling=function(e){this.addBodyToWorld(this.ceilingBody),this.ceilingBody.position[1]=e},e.prototype.disableCeiling=function(){this.removeBodyFromWorld(this.ceilingBody)},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angularVelocity=0,e.angularForce=0,e.angle=0,e.velocity=[0,0],e.setZeroForce()},e.prototype.bindSpriteToBody=function(e,t){this.boundBodies.push({sprite:e,body:t})},e.prototype.unbindSpriteFromBody=function(e){this.boundBodies&&this.boundBodies.splice(this.findIndexByKeyValue(this.boundBodies,"sprite",e),1)},e.prototype.checkCollision=function(e,t){if(t.bodyA.shapes[0].collisionGroup==e.LEVEL&&t.bodyB.shapes[0].collisionGroup==e.BALL){i=[];p2.vec2.copy(i,t.bodyB.velocity),(s=p2.vec2.length(i)/700)>1&&(s=1),s<.2&&(s=.2),t.bodyA!=e.floorBody&&Game.playSound("crazy-golf/ball-ping-"+Game.getRandom(1,3,!0)+".mp3",s)}if(t.bodyB.shapes[0].collisionGroup==e.LEVEL&&t.bodyA.shapes[0].collisionGroup==e.BALL){var i=[];p2.vec2.copy(i,t.bodyA.velocity);var s=p2.vec2.length(i)/700;s>1&&(s=1),s<.2&&(s=.2),t.bodyB!=e.floorBody&&Game.playSound("crazy-golf/ball-ping-"+Game.getRandom(1,3,!0)+".mp3",s)}t.bodyA==e.floorBody&&t.bodyB.shapes[0].collisionGroup==e.BALL&&(e.scene.levelManager.waterSplash(t.bodyB.position[0]),e.scene.ballManager.removeBall(t.bodyB,!0)),t.bodyB==e.floorBody&&t.bodyA.shapes[0].collisionGroup==e.BALL&&(e.scene.levelManager.waterSplash(t.bodyA.position[0]),e.scene.ballManager.removeBall(t.bodyA,!0)),t.bodyA.shapes[0].collisionGroup==e.BLOCK&&t.bodyB.shapes[0].collisionGroup==e.BALL&&e.scene.levelManager.hitBlock(t.bodyA),t.bodyB.shapes[0].collisionGroup==e.BLOCK&&t.bodyA.shapes[0].collisionGroup==e.BALL&&e.scene.levelManager.hitBlock(t.bodyB),t.bodyA==this.scene.levelManager.shellBody&&t.bodyB.shapes[0].collisionGroup==e.BALL&&1==this.scene.powerupIsActive&&e.scene.levelManager.disableShell(),t.bodyB==this.scene.levelManager.shellBody&&t.bodyA.shapes[0].collisionGroup==e.BALL&&1==this.scene.powerupIsActive&&e.scene.levelManager.disableShell(),t.bodyA.shapes[0].collisionGroup==e.GOAL&&t.bodyB.shapes[0].collisionGroup==e.BALL&&e.scene.pottedBall(t.bodyB),t.bodyB.shapes[0].collisionGroup==e.GOAL&&t.bodyA.shapes[0].collisionGroup==e.BALL&&e.scene.pottedBall(t.bodyA),t.bodyA.shapes[0].collisionGroup==e.GRAVITY_FIELD&&t.bodyB.shapes[0].collisionGroup==e.BALL&&e.scene.ballManager.startGravityEffect(t.bodyB,t.bodyA),t.bodyB.shapes[0].collisionGroup==e.GRAVITY_FIELD&&t.bodyA.shapes[0].collisionGroup==e.BALL&&e.scene.ballManager.startGravityEffect(t.bodyA,t.bodyB),t.bodyA.shapes[0].collisionGroup==e.PORTAL&&t.bodyB.shapes[0].collisionGroup==e.BALL&&e.scene.levelManager.ballInPortal(t.bodyB),t.bodyB.shapes[0].collisionGroup==e.PORTAL&&t.bodyA.shapes[0].collisionGroup==e.BALL&&e.scene.levelManager.ballInPortal(t.bodyA)},e.prototype.checkEndCollision=function(e,t){t.bodyA.shapes[0].collisionGroup==e.GRAVITY_FIELD&&t.bodyB.shapes[0].collisionGroup==e.BALL&&e.scene.ballManager.stopGravityEffect(t.bodyB),t.bodyB.shapes[0].collisionGroup==e.GRAVITY_FIELD&&t.bodyA.shapes[0].collisionGroup==e.BALL&&e.scene.ballManager.stopGravityEffect(t.bodyA)},e.prototype.addBodyToWorld=function(e){this.world.addBody(e)},e.prototype.removeBodyFromWorld=function(e){this.world.removeBody(e)},e.prototype.removeConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.addConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.addSpringToWorld=function(e){this.world.addSpring(e)},e.prototype.resizeElements=function(e,t){this.canvasHeight=t,this.canvasWidth=e,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},e.prototype.activatePowerup=function(){this.powerupRatio=2},e.prototype.deactivatePowerup=function(){this.powerupRatio=1},e.prototype.createComplexShape=function(e,t,i,s,o,a){for(var r=o||[0,0],n=0|a,h=0;h<t.length;h++){!function(t,i,s){for(var o=[],a=0;a<t.length;a++)a%2==1&&o.push([t[a-1],t[a]]);var r=new p2.Convex({vertices:o});e.addShape(r,i,s)}(t[h].shape,r,n),e.shapes[h].collisionGroup=i;for(var l=0;l<s.length;l++)e.shapes[h].collisionMask=s[l]}},e.prototype.stepPhysics=function(){if(0!=this.physicsEnabled&&this.world){this.world.step(1/30);for(var e=0;e<this.boundBodies.length;e++)this.boundBodies[e].sprite.position.x=this.boundBodies[e].body.position[0],this.boundBodies[e].sprite.position.y=Game.stageHeight-this.boundBodies[e].body.position[1],this.boundBodies[e].sprite.rotation=-this.boundBodies[e].body.angle;if(1==this.scene.powerupIsActive){var t=this.scene.ballManager.currentBall.body,i=this.scene.levelManager.goalPlatformBody,s=this.getAngle(i.position[0],Game.stageHeight-i.position[1],t.position[0],Game.stageHeight-t.position[1]),o=20,a=(320-this.getDistance(i.position[0],Game.stageHeight-i.position[1],t.position[0],Game.stageHeight-t.position[1]))*(o=t.position[1]>i.position[1]?8:0);a<0&&(a=0);var r=Math.cos(s)*a,n=Math.sin(s)*a,h=[r,n];if(!r&&!n)return;t.applyForce(h)}}},e.prototype.findIndexByKeyValue=function(e,t,i){for(var s=0;s<e.length;s++)if(e[s][t]==i)return s;return null},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.getAngleBetweenBodies=function(e,t){return this.getAngle(e.position[0],Game.stageHeight-e.position[1],t.position[0],Game.stageHeight-t.position[1])},e.prototype.pause=function(){this.physicsEnabled=!1},e.prototype.resume=function(){this.physicsEnabled=!0},e.prototype.destroy=function(){this.boundBodies=[],this.world.clear(),this.world=null},e}(),CrazyGolfBallManager=function(){function e(e){this.scene=e,this.game=e.game,this.container=Game.displayStore.getContainer("crazy-golf/golf-ball-holder"),this.ballMaterial=new p2.Material,this.ticker=0,this.ballsArray=[],this.ballsRemaining=10,this.createBallsRemainingUI(),this.createBalls(),TweenMax.delayedCall(1,this.spawnBall,null,this)}return e.prototype.createBalls=function(){for(var e=0;e<1;e++){var t=new CrazyGolfBall(this.scene,this.ballMaterial,e);this.container.addChild(t.trailHolder),this.container.addChild(t.sprite),this.ballsArray.push(t)}this.currentBall=this.ballsArray[0]},e.prototype.createBallsRemainingUI=function(){this.ballsRemainingUIArray=[],this.ballsRemainingUIHolder=Game.displayStore.getContainer("crazy-golf/golf-balls-ui");for(var e=0;e<2;e++)for(var t=0;t<5;t++){var i=Game.displayStore.getSprite("crazy-golf/golf-ball");i.position.x=25*t,i.position.y=20*e,i.scale.x=i.scale.y=0,i.alpha=1,this.ballsRemainingUIHolder.addChild(i),this.ballsRemainingUIArray.push(i)}this.addAllBalls()},e.prototype.spawnBall=function(){for(var e=0;e<this.ballsArray.length;e++)if(0==this.ballsArray[e].active){this.currentBall=this.ballsArray[e],this.currentBall.spawn();break}this.scene.inputManager.enableFire(),this.scene.levelManager.enableShell()},e.prototype.hitBall=function(e,t){this.currentBall.hit(e,t)},e.prototype.ballInPortal=function(){TweenMax.to(this.currentBall.sprite.scale,.4,{x:0,y:0,ease:Power3.easeOut})},e.prototype.ballOutPortal=function(){TweenMax.to(this.currentBall.sprite.scale,.2,{x:1,y:1,ease:Power3.easeOut})},e.prototype.pause=function(){this.scene.pauseResumeTween(this.spawnTimeline,"pause");for(var e=0;e<this.ballsArray.length;e++)this.ballsArray[e].pause()},e.prototype.resume=function(){this.scene.pauseResumeTween(this.spawnTimeline,"resume");for(var e=0;e<this.ballsArray.length;e++)this.ballsArray[e].resume()},e.prototype.removeBall=function(e,t){for(var i=0;i<this.ballsArray.length;i++)e==this.ballsArray[i].body&&(this.ballsArray[i].remove(this.ballsArray[i]),this.ballsRemaining>0&&1==t&&(this.ballsRemaining--,TweenMax.to(this.ballsRemainingUIArray[this.ballsRemaining].scale,.3,{x:0,y:0,ease:Back.easeInOut}),this.scene.levelManager.holeInOne=!1));t&&(this.ballsRemaining>0?TweenMax.delayedCall(.3,this.spawnBall,null,this):this.scene.endGame())},e.prototype.addBall=function(){this.ballsRemaining<10&&(Game.playSound("crazy-golf/cute-pop.mp3",.5),TweenMax.to(this.ballsRemainingUIArray[this.ballsRemaining].scale,.3,{x:1,y:1,ease:Back.easeInOut}),this.ballsRemaining++)},e.prototype.addAllBalls=function(){this.ballsRemaining=10;for(var e=0;e<this.ballsRemaining;e++)TweenMax.to(this.ballsRemainingUIArray[e].scale,.3,{delay:.5+e/10,x:1,y:1,ease:Back.easeOut,onStart:Game.playSound,onStartParams:["crazy-golf/cute-pop.mp3",.5]}),1==this.scene.powerupIsActive&&(this.ballsRemainingUIArray[e].tint=16711680)},e.prototype.startGravityEffect=function(e,t){for(var i=0;i<this.ballsArray.length;i++)e==this.ballsArray[i].body&&this.ballsArray[i].startGravityEffect(this.ballsArray[i],this.scene.levelManager.getGravityFieldDirection(t))},e.prototype.stopGravityEffect=function(e){for(var t=0;t<this.ballsArray.length;t++)e==this.ballsArray[t].body&&this.ballsArray[t].stopGravityEffect(this.ballsArray[t])},e.prototype.activatePowerup=function(){this.currentBall.activatePowerup()},e.prototype.deactivatePowerup=function(){this.currentBall.deactivatePowerup();for(var e=0;e<10;e++)this.ballsRemainingUIArray[e].tint=16777215},e.prototype.newRound=function(e){},e.prototype.endRound=function(){},e.prototype.tick=function(){if(1!=this.scene.paused&&1!=this.scene.endingGame){for(var e=0;e<this.ballsArray.length;e++)this.ballsArray[e].tick();this.ticker++}},e.prototype.destroy=function(){for(e=0;e<this.ballsArray.length;e++)console.log("destroying balls...",e),this.ballsArray[e].destroy();for(var e=0;e<this.ballsRemainingUIArray.length;e++)Game.displayStore.returnPooledItem(this.ballsRemainingUIArray[e]);this.ballsArray=[],this.spawnTimeline=this.scene.killTween(this.spawnTimeline)},e}(),CrazyGolfInputManager=function(){function e(e){this.scene=e,this.container=Game.displayStore.getContainer("crazy-golf/input-holder"),this.aimingUI=Game.displayStore.getContainer("crazy-golf/aiming-ui"),this.powerUI=Game.displayStore.getContainer("crazy-golf/power-ui"),this.uiHolder=Game.displayStore.getContainer("crazy-golf/ui-holder"),this.hitAreaSprite=Game.displayStore.getSprite("crazy-golf/blank-input.png"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.container.addChild(this.aimingUI),this.uiHolder.addChild(this.powerUI),this.powerFill=this.powerUI.getSprite("crazy-golf/power-fill"),this.powerFill.alpha=1,this.powerFill.scale.x=this.powerFill.scale.y=0,this.powerFill.blendMode=PIXI.BLEND_MODES.ADD,this.poweringUp=!0,this.powerFillLast=this.powerUI.getSprite("crazy-golf/power-fill-last"),this.powerFillLast.alpha=1,this.powerFillLast.scale.x=this.powerFill.scale.y=0,this.aimingPoint=this.aimingUI.getContainer("crazy-golf/aiming-point"),this.aimingFill=this.aimingPoint.getSprite("crazy-golf/aiming-ring-fill.png"),this.aimingFill.alpha=.75,this.aimingPoint.alpha=0,this.aimingRing=this.aimingPoint.getSprite("crazy-golf/aiming-ring.png"),this.aimLine=this.aimingUI.getContainer("crazy-golf/aim-line"),this.aimLine.getSprite("crazy-golf/aim-line-glow.png").blendMode=PIXI.BLEND_MODES.ADD,this.hintArrows=this.aimingUI.getContainer("crazy-golf/hint-arrows"),this.hintArrowDown=this.hintArrows.getContainer("crazy-golf/hint-arrow-down"),this.hintArrowUp=this.hintArrows.getContainer("crazy-golf/hint-arrow-up"),this.hintArrows.alpha=0,this.hintArrowUp.scale.y=-1,this.hintArrowUp.getSprite("crazy-golf/hint-arrow-glow.png").blendMode=PIXI.BLEND_MODES.ADD,this.hintArrowDown.getSprite("crazy-golf/hint-arrow-glow.png").blendMode=PIXI.BLEND_MODES.ADD,this.hintArrowsTimeline=new TimelineMax({delay:2,repeat:2,repeatDelay:.4}),this.hintArrowsTimeline.call(Game.playSound,["crazy-golf/arrow.mp3"],this),this.hintArrowsTimeline.add(TweenMax.to(this.hintArrows,.3,{alpha:1,repeat:1,yoyo:!0,ease:Power3.easeOut})),this.hintArrowsTimeline.add(TweenMax.to(this.hintArrowUp.position,.6,{y:"-=30",repeat:1,ease:Back.easeOut}),0),this.hintArrowsTimeline.add(TweenMax.to(this.hintArrowDown.position,.6,{y:"+=30",repeat:1,ease:Back.easeOut}),0),this.hintArrowsTimeline.pause(),this.bezierLine=new PIXI.Graphics,this.bezierLine.lineStyle(5,16711680,.5),this.bezierLine.position.x=80,this.bezierLine.position.y=407,this.isEngaged=!1,this.fireEnabled=!1,this.startedHit=!1,this.moveEnabled=!0,this.currentAngle=0,this.firePower=0,this.firePowerIncrease=0,this.maxAngleDiff=1.4,this.minAngleDiff=.1,this.keyboardDown=!1,this.touchPointY=0,this.touchDownPointY=0,this.railSpeed=0,this.targetRailSpeed=0,this.aimingFill.scale.x=this.aimingFill.scale.y=0,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite),1==Game.onDesktop?this.aimingRing.alpha=0:this.aimingRing.alpha=1}return e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mousemove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseupoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))})):(e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchmove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchendoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}))},e.prototype.inputDown=function(e,t){1!=this.scene.paused&&(this.hintArrowsTimeline.totalProgress(0),this.hintArrowsTimeline.pause(),t.x>700?1==this.fireEnabled&&0==Game.onDesktop&&(this.fireEnabled=!1,this.startHit()):(this.isEngaged=!0,this.touchDownPointY=t.y-this.aimingUI.position.y-this.aimingPoint.position.y,this.aimingFill.alpha=1))},e.prototype.inputUp=function(e,t){1!=this.scene.paused&&(this.isEngaged=!1,0==this.fireEnabled&&this.endHit())},e.prototype.inputMove=function(e,t){1==this.isEngaged&&(this.touchPointY=t.y-this.aimingUI.position.y-this.touchDownPointY)},e.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},e.prototype.getInputAngle=function(){var e=this.currentAngle;return e>this.maxAngleDiff&&(e=this.maxAngleDiff),e<this.minAngleDiff&&(e=this.minAngleDiff),e},e.prototype.startGame=function(){this.hintArrowsTimeline.restart()},e.prototype.enableFire=function(){this.fireEnabled=!0},e.prototype.disableFire=function(){this.fireEnabled=!1},e.prototype.isFireEnabled=function(){return this.fireEnabled},e.prototype.keyDown=function(e){if(1!=this.scene.tutorialOverlay.isOpen){switch(this.hintArrowsTimeline.totalProgress(0),this.hintArrowsTimeline.pause(),"spacebar"==e&&1==this.fireEnabled&&this.startHit(),this.keyboardInput=e,e){case"up":1==this.moveEnabled&&(this.moveEnabled=!1,this.targetRailSpeed=-3);break;case"down":1==this.moveEnabled&&(this.moveEnabled=!1,this.targetRailSpeed=3)}this.keyboardDown=!0}},e.prototype.keyUp=function(e){if(1!=this.scene.tutorialOverlay.isOpen){switch(this.keyboardInput="none",e){case"spacebar":1==this.fireEnabled&&this.endHit();break;case"up":case"down":this.moveEnabled=!0,this.targetRailSpeed=0}this.keyboardDown=!1}},e.prototype.downOnButton=function(e){},e.prototype.upOnButton=function(e){},e.prototype.startHit=function(){0==this.startedHit&&Game.playSound("crazy-golf/wind-up.mp3"),this.startedHit=!0,this.firePowerIncrease=.017},e.prototype.endHit=function(){if(0!=this.startedHit){Game.stopSound("crazy-golf/wind-up.mp3"),Game.stopSound("crazy-golf/wind-down.mp3"),this.poweringUp=!0,this.startedHit=!1,this.fireEnabled=!1,this.firePowerIncrease=0;e=new RoughEase({strength:2,points:5,randomize:!1,clamp:!0});this.scene.ballManager.hitBall(this.firePower,this.currentAngle),this.powerFillLast.scale.x=this.powerFillLast.scale.y=this.powerFill.scale.x;var e=new RoughEase({strength:2,points:10,randomize:!1,clamp:!0});this.powerFill.alpha=0,TweenMax.to(this.powerFill,.5,{ease:e,alpha:1}),TweenMax.delayedCall(1,function(){this.firePowerIncrease=-.03},null,this),this.scene.player.strikeBall(this.firePower)}},e.prototype.tick=function(){if(1!=this.scene.endingGame){this.touchPointY+=this.railSpeed,this.touchPointY>0&&(this.touchPointY=0),this.touchPointY<-350&&(this.touchPointY=-350),this.railSpeed+=(this.targetRailSpeed-this.railSpeed)/5,1==this.poweringUp?this.firePower+=this.firePowerIncrease:this.firePower-=this.firePowerIncrease,this.firePower<0&&0==this.poweringUp&&(this.poweringUp=!0,this.firePower=0,Game.playSound("crazy-golf/wind-up.mp3")),this.firePower>1&&(this.firePower=1,this.poweringUp=!1,Game.playSound("crazy-golf/wind-down.mp3")),this.firePower<0&&(this.firePower=0),this.powerFill.scale.x=this.powerFill.scale.y=this.firePower,this.aimingPoint.position.y+=(this.touchPointY-this.aimingPoint.position.y)/3;var e=Math.atan(this.aimingPoint.position.y/120);this.aimLine.rotation=e;this.firePower,this.firePower;this.bezierLine.rotation=e,this.currentAngle=e+Math.PI/2,this.firePowerIncrease>0&&this.scene.player.raiseArm(this.firePower),this.railSpeed+=(this.targetRailSpeed-this.railSpeed)/10}},e.prototype.newRound=function(){TweenMax.to(this.powerFillLast.scale,.5,{ease:Power2.easeOut,x:0,y:0})},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){},e}(),CrazyGolfLevelManager=function(){function e(e){this.difficultyMap={1:4,2:6,3:8,4:20},this.motorPower=10,this.blockGrid=[{x:350,y:150,inUse:!1},{x:350,y:400,inUse:!1},{x:350,y:650,inUse:!1},{x:600,y:150,inUse:!1},{x:600,y:400,inUse:!1},{x:600,y:650,inUse:!1},{x:850,y:150,inUse:!1},{x:850,y:400,inUse:!1},{x:850,y:650,inUse:!1}],this.gravityFieldGrid=[{x:350,y:0,inUse:!1},{x:600,y:0,inUse:!1},{x:850,y:0,inUse:!1}],this.goalPlatform=[{shape:[45,19,111,87,90,86,4,44,17,17]},{shape:[111,87,144,17,168,16,184,44,165,140,133,137,109,119]},{shape:[69,138,9,140,4,130,4,44,90,86,91,118]},{shape:[111,87,45,19,144,17]}],this.shellShape=[{shape:[178,176,128,205,60,187,13,122,4,13,164,15]}],this.scene=e,this.game=e.game,this.container=Game.displayStore.getContainer("crazy-golf/golf-ball-holder"),this.currentRound=0,this.ticker=0,this.currentDifficulty=1,this.holeInOne=!0,this.targetPlatformY=240,this.waterChunks=[],this.blockHitCount=1,this.shellEnabled=!1,this.positiveFrankie=[],this.negativeFrankie=[],this.platformHolderBack=Game.displayStore.getContainer("crazy-golf/platform-holder-back"),this.platformHolderFront=Game.displayStore.getContainer("crazy-golf/platform-holder-front"),this.goalPlatformFront=Game.displayStore.getContainer("crazy-golf/goal-platform-front"),this.goalPlatformBack=Game.displayStore.getContainer("crazy-golf/goal-platform-back"),this.fireParticleHolder=Game.displayStore.getContainer("crazy-golf/fire-particle-holder"),this.waterParticleHolder=Game.displayStore.getContainer("crazy-golf/water-particle-holder"),this.goalPlatformBody=new p2.Body({mass:0,position:[Game.stageWidth-140,240]}),this.goalPlatformBody.angle=-.04,this.scene.physicsManager.createComplexShape(this.goalPlatformBody,this.goalPlatform,this.scene.physicsManager.LEVEL,[this.scene.physicsManager.BALL],[-93,-101]),this.blockMaterial=new p2.Material,this.blocksArray=[];for(n=0;n<3;n++){var t=new CrazyGolfBlock(this.scene,this,this.blockMaterial,n);this.blocksArray.push(t)}this.gravityFieldsArray=[];for(n=0;n<2;n++){var i=new CrazyGolfGravityField(this.scene,n);this.gravityFieldsArray.push(i)}if(this.blockContactMaterial=new p2.ContactMaterial(this.blockMaterial,this.scene.ballManager.ballMaterial,{restitution:1,surfaceVelocity:-200,friction:1,relaxation:.5}),this.scene.physicsManager.world.addContactMaterial(this.blockContactMaterial),this.scene.physicsManager.addBodyToWorld(this.goalPlatformBody),0==Game.isLowEndIPad){var s={cap:15,time:.3,lowerAngle:90,upperAngle:90,XstartRange:5,YstartRange:0,gravity:0,startAlpha:0,endAlpha:0,fadeInTime:4,scaleInTime:10,fadeOutTime:1.5,scaleOutTime:1.5,xPos:0,yPos:0,lowerVelocity:300,upperVelocity:1e3,friction:.15,lowerStartScale:1.5,upperStartScale:2,rotationPower:0,blendMode:PIXI.BLEND_MODES.ADD};this.fireParticlesLeft=new ParticleStream(["crazy-golf/fire-particle.png"],this.fireParticleHolder,this.scene,s),this.fireParticlesRight=new ParticleStream(["crazy-golf/fire-particle.png"],this.fireParticleHolder,this.scene,s),this.fireParticlesLeft.enable(),this.fireParticlesRight.enable();var o={lowerAngle:-120,upperAngle:-60,lowerVelocity:100,upperVelocity:600,endScale:0,lowerStartScale:1,upperStartScale:3,friction:.03,XstartRange:0,YstartRange:0,time:2,gravity:1e3,cap:20,endAlpha:0,rotationPower:2,stagger:250};this.splashParticles=new ParticleBurst(["crazy-golf/water-particle.png"],this.waterParticleHolder,this.scene,o)}this.shellSprite=Game.displayStore.getSprite("crazy-golf/shell-front.png"),this.shellSpriteBack=Game.displayStore.getSprite("crazy-golf/shell-back.png"),this.shellSprite.alpha=0,this.shellSpriteBack.alpha=0,this.scene.physicsManager.bindSpriteToBody(this.goalPlatformFront,this.goalPlatformBody),this.waterHolderBack=Game.displayStore.getContainer("crazy-golf/water-back"),this.waterHolderFront=Game.displayStore.getContainer("crazy-golf/water-front"),this.waterBottom=Game.displayStore.getSprite("crazy-golf/water-bottom"),this.waterFade=Game.displayStore.getSprite("crazy-golf/water-fade"),this.waterParticleHolder.position.y=this.waterHolderBack.position.y;for(n=0;n<7;n++){var a=Game.displayStore.getAnimatedSprite("crazy-golf/anim-water-wave/gravity-golf-water-wave");a.animationSpeed=.4,a.gotoAndPlay(5),a.tint=11790145,a.position.x=a.width*n,a.position.y=-20,this.waterHolderBack.addChild(a);var r=Game.displayStore.getAnimatedSprite("crazy-golf/anim-water-wave/gravity-golf-water-wave");r.scale.x=1.2,r.scale.y=1.3,r.animationSpeed=.5,r.gotoAndPlay(0),r.tint=9225791,r.position.x=r.width*n-20,r.position.y=0,this.waterHolderFront.addChild(r),this.waterChunks.push(a),this.waterChunks.push(r)}this.waterHolderBack.scale.x=this.waterHolderBack.scale.y=1.4,this.waterHolderFront.scale.x=this.waterHolderFront.scale.y=1.4,this.waterBottom.width=this.waterFade.width=2e3,this.waterBottom.height=200,this.waterFade.height=120,this.waterBottom.position.y=20,this.waterFade.position.y=-20,this.waterBottom.tint=9225791,this.waterHolderFront.addChild(this.waterBottom),this.waterHolderFront.addChild(this.waterFade),this.waterSplashAnimation=Game.displayStore.getAnimatedSprite("crazy-golf/anim-water-wave/gravity-golf-splash"),this.waterSplashAnimation.animationSpeed=.25,this.waterSplashAnimation.loop=!1,this.waterSplashAnimation.tint=11790145,this.waterSplashAnimation.position.y=500,this.flagHolder=this.goalPlatformBack.getContainer("crazy-golf/flag-holder"),this.flagHolder.rotation=-.04,this.flag=this.flagHolder.getSprite("crazy-golf/flag.png"),this.scene.mainHolder.addChild(this.waterParticleHolder),this.scene.mainHolder.addChild(this.waterSplashAnimation),this.ceilingSprite=Game.displayStore.getSprite("crazy-golf/ceiling"),this.ceilingSprite.width=2400,this.ceilingSprite.height=500,this.ceilingSprite.position.x=1e3,this.ceilingSprite.alpha=0,this.scene.mainHolder.addChild(this.ceilingSprite),this.ceilingHolder=Game.displayStore.getContainer("crazy-golf/ceiling-holder"),this.ceilingHolder.alpha=0,this.scene.mainHolder.addChild(this.ceilingHolder);for(var n=0;n<15;n++){var h=Game.displayStore.getSprite("crazy-golf/ceiling-chunk");h.position.x=120*n,this.ceilingHolder.addChild(h)}this.backWallSprite=Game.displayStore.getSprite("crazy-golf/back-wall"),this.backWallSprite.width=100,this.backWallSprite.height=1500,this.backWallSprite.position.x=10,this.backWallSprite.position.y=Game.stageHeight+500,this.scene.mainHolder.addChildAt(this.backWallSprite,0),this.scene.mainHolder.addChildAt(this.waterHolderBack,0),this.backboardBody=new p2.Body({mass:5,position:[],damping:.99}),this.backboardShape=new p2.Box({width:40,height:120}),this.backboardShape.collisionGroup=this.scene.physicsManager.LEVEL,this.backboardShape.collisionMask=this.scene.physicsManager.BALL,this.backboardBody.addShape(this.backboardShape,[10,10]),this.scene.physicsManager.addBodyToWorld(this.backboardBody),this.backboardSprite=Game.displayStore.getContainer("crazy-golf/backboard-front"),this.backboardBackSprite=Game.displayStore.getContainer("crazy-golf/backboard-back"),this.backboardCrossTopSprite=this.backboardSprite.getSprite("crazy-golf/backboard-cross-top"),this.backboardCrossBottomSprite=this.backboardSprite.getSprite("crazy-golf/backboard-cross-bottom"),this.scene.physicsManager.bindSpriteToBody(this.backboardSprite,this.backboardBody),this.wallLeftBody=new p2.Body({mass:0,position:[10,0]}),this.wallLeftShape=new p2.Plane,this.wallLeftShape.collisionGroup=this.scene.physicsManager.LEVEL,this.wallLeftShape.collisionMask=this.scene.physicsManager.BALL,this.wallLeftShape.material=this.blockMaterial,this.wallLeftBody.addShape(this.wallLeftShape,[0,0],-Math.PI/2),this.scene.physicsManager.addBodyToWorld(this.wallLeftBody),this.platformHolderFront.addChild(this.backboardBackSprite),this.platformHolderFront.addChild(this.backboardSprite),this.platformHolderBack.addChild(this.fireParticleHolder),this.platformHolderBack.addChild(this.goalPlatformBack),this.platformHolderFront.addChild(this.waterHolderFront),this.platformHolderBack.addChild(this.shellSpriteBack),this.platformHolderBack.addChild(this.flagHolder),this.platformHolderFront.addChild(this.goalPlatformFront),this.platformHolderFront.addChild(this.shellSprite),this.backboardJoint=new p2.RevoluteConstraint(this.goalPlatformBody,this.backboardBody,{collideConnected:!1,localPivotA:[63,38],localPivotB:[0,-32]}),this.backboardJoint.enableMotor(),this.backboardJoint.setRelaxation(1),this.scene.physicsManager.addConstraintToWorld(this.backboardJoint),this.goalDetectBody=new p2.Body({mass:0,position:[]}),this.goalDetectShape=new p2.Box({width:50,height:50}),this.goalDetectBody.addShape(this.goalDetectShape),this.scene.physicsManager.addBodyToWorld(this.goalDetectBody),this.goalDetectShape.collisionGroup=this.scene.physicsManager.GOAL,this.goalDetectShape.collisionMask=this.scene.physicsManager.BALL,this.goalDetectShape.sensor=!0,this.portalSet=new CrazyGolfPortalSet(this.scene),this.shellBody=new p2.Body({mass:0,position:this.goalPlatformBody.position}),this.shellBody.angle=-.04,this.scene.physicsManager.createComplexShape(this.shellBody,this.shellShape,this.scene.physicsManager.LEVEL,[this.scene.physicsManager.BALL],[-90,0]),this.scene.physicsManager.bindSpriteToBody(this.shellSprite,this.shellBody),this.setPositions()}return e.prototype.getRandomVO=function(e){var t;return 0==this.positiveFrankie.length&&(this.positiveFrankie=["crazy-golf/easy-peasy.mp3","crazy-golf/making-you-like-me.mp3","crazy-golf/so-easy.mp3"]),0==this.negativeFrankie.length&&(this.negativeFrankie=["crazy-golf/incorrect.mp3","crazy-golf/missing-sock.mp3","crazy-golf/several-ways.mp3","crazy-golf/no-cause-for-concern.mp3"]),"positive"==e&&(t=this.positiveFrankie.splice(Game.getRandom(0,this.positiveFrankie.length-1,!0),1)[0]),"negative"==e&&(t=this.negativeFrankie.splice(Game.getRandom(0,this.negativeFrankie.length-1,!0),1)[0]),t},e.prototype.setPositions=function(){this.backboardBody.position[0]=this.goalPlatformBody.position[0]+90,this.backboardBody.position[1]=this.goalPlatformBody.position[1]+100,this.goalDetectBody.position[0]=this.goalPlatformBody.position[0]-10,this.goalDetectBody.position[1]=this.goalPlatformBody.position[1],this.flagHolder.position.x=this.goalPlatformBody.position[0],this.flagHolder.position.y=Game.stageHeight-this.goalPlatformBody.position[1]+10,this.shellBody.position[0]=this.goalPlatformBody.position[0],this.shellBody.position[1]=this.goalPlatformBody.position[1]},e.prototype.moveCeiling=function(e){this.scene.physicsManager.ceilingBody.position[1]+=e,this.ceilingSprite.position.y-=e,this.ceilingHolder.position.y=this.ceilingSprite.position.y},e.prototype.pottedBall=function(){Game.playSound("crazy-golf/pot-ball.mp3"),TweenMax.to(this.flag.position,.15,{ease:Power3.easeOut,y:"-=35"}),TweenMax.to(this.flag.position,.25,{ease:Bounce.easeOut,y:0,delay:.15,onComplete:Game.playSound,onCompleteParams:[this.getRandomVO("positive")],onCompleteScope:this}),this.blockHitCount=1},e.prototype.ballInPortal=function(e){this.portalSet.ballIn(e)},e.prototype.waterSplash=function(e){this.waterParticleHolder.position.x=e,0==Game.isLowEndIPad&&this.splashParticles.fire(),this.waterSplashAnimation.position.x=e,this.waterSplashAnimation.gotoAndPlay(0),Game.playSound("crazy-golf/splosh-"+Game.getRandom(1,3,!0)+".mp3"),TweenMax.delayedCall(.4,Game.playSound,[this.getRandomVO("negative")],this),this.blockHitCount=1},e.prototype.enableShell=function(){if(0!=this.portalSet.active){this.shellEnabled=!0,this.scene.physicsManager.addBodyToWorld(this.shellBody);var e=new RoughEase({strength:4,points:10,randomize:!1,clamp:!0});TweenMax.to(this.shellSprite,.3,{ease:e,alpha:.7}),TweenMax.to(this.shellSpriteBack,.3,{delay:.1,ease:e,alpha:.7})}},e.prototype.disableShell=function(){if(0!=this.shellEnabled){this.shellEnabled=!1,this.scene.physicsManager.removeBodyFromWorld(this.shellBody);var e=new RoughEase({strength:4,points:10,randomize:!1,clamp:!0});TweenMax.to(this.shellSprite,.3,{ease:e,alpha:0}),TweenMax.to(this.shellSpriteBack,.3,{delay:.1,ease:e,alpha:0}),Game.playSound("crazy-golf/unlock-bleep.mp3")}},e.prototype.getGravityFieldDirection=function(e){for(var t=[],i=0;i<this.gravityFieldsArray.length;i++)if(this.gravityFieldsArray[i].body==e){t[0]=this.gravityFieldsArray[i].currentGravityField[0],t[1]=this.gravityFieldsArray[i].currentGravityField[1];break}return t},e.prototype.newRound=function(){this.currentRound++,this.scene.ballManager.addBall(),1==this.holeInOne&&this.scene.ballManager.addAllBalls(),this.holeInOne=!0,this.currentDifficulty=1,this.currentRound>this.difficultyMap[1]&&(this.currentDifficulty=2),this.currentRound>this.difficultyMap[1]+this.difficultyMap[2]&&(this.currentDifficulty=3),this.currentRound>this.difficultyMap[1]+this.difficultyMap[2]+this.difficultyMap[3]&&(this.currentDifficulty=4);var e;this.buildLevel(),this.scene.mainHolder.addChild(this.ceilingSprite),this.scene.mainHolder.addChild(this.ceilingHolder),e=850/this.scene.physicsManager.getDistance(40,140,this.goalPlatformBody.position[0],140);var t=this.scene.scaleHolder.toLocal(new PIXI.Point(0,0),this.ceilingSprite).y,i=1;return t<0&&(i=1-t/-370),i<e&&(e=i),e<.7&&(e=.7),this.setPositions(),this.scene.ballManager.spawnBall(),this.AnimateCeiling(),e},e.prototype.AnimateCeiling=function(){for(var e=0;e<this.ceilingHolder.children.length;e++){var t=this.ceilingHolder.getSpriteAt(e);t.position.x=120*e,t.position.y=-60,TweenMax.to(t.position,.7,{y:0,ease:Bounce.easeOut,delay:.5+e/10,onStart:Game.playSound,onStartParams:["crazy-golf/servo-short.mp3",.2]})}},e.prototype.buildLevel=function(){for(var e,t=0;t<this.scene.levelData.data.length;t++){if((i=this.scene.levelData.data[t]).difficulty==this.currentDifficulty&&1==i.available){(e=i).available=!1;break}}if(!e){for(t=0;t<this.scene.levelData.data.length;t++){var i;i.available=!0}return this.scene.shuffleArray(this.scene.levelData.data),void this.buildLevel()}this.setPlatformPosition(e.platform),this.spawnGravityFields(e.fields),this.spawnBlocks(e.blocks),this.portalSet.spawn(e.portals,e.blocks),e.ceiling?this.addCeiling(e.ceiling):this.addCeiling(800),1==this.portalSet.active?this.enableShell():this.disableShell()},e.prototype.setPlatformPosition=function(e){var t=[e.x,e.y];this.goalPlatformBody.position[0]=t[0],TweenMax.to(this,2,{targetPlatformY:t[1],ease:Power2.easeInOut})},e.prototype.addCeiling=function(e){this.scene.physicsManager.enableCeiling(e),this.ceilingHolder.alpha=1,this.ceilingSprite.position.y=Game.stageHeight-e,this.ceilingHolder.position.y=this.ceilingSprite.position.y},e.prototype.getLevelData=function(){var e="'ceiling':"+(Game.stageHeight-this.ceilingSprite.position.y)+", 'platform':{x:"+Math.round(this.goalPlatformBody.position[0]);e=(e=e.concat(", y:"+Math.round(this.goalPlatformBody.position[1])+"},")).concat("'blocks':[");for(t=0;t<this.blocksArray.length;t++)1==this.blocksArray[t].active&&(e=(e=e.concat("{x:"+this.blocksArray[t].body.position[0]+",")).concat("y:"+this.blocksArray[t].body.position[1]+"}"),t<this.blocksArray.length-1&&(e=e.concat(",")));e=(e=e.concat("],")).concat("'fields':[");for(var t=0;t<this.gravityFieldsArray.length;t++)1==this.gravityFieldsArray[t].active&&(e=(e=e.concat("{x:"+this.gravityFieldsArray[t].body.position[0]+",")).concat("direction:'"+this.gravityFieldsArray[t].direction+"'}"),t<this.gravityFieldsArray.length-1&&(e=e.concat(",")));return e=e.concat("],"),e=e.concat("'portals':["),1==this.portalSet.active&&(e=(e=(e=(e=(e=(e=e.concat("{x:"+this.portalSet.bodyIn.position[0]+",")).concat("y:"+Math.round(this.portalSet.bodyIn.position[1])+",")).concat("angle:"+this.portalSet.bodyIn.angle+"},")).concat("{x:"+this.portalSet.bodyOut.position[0]+",")).concat("y:"+Math.round(this.portalSet.bodyOut.position[1])+",")).concat("angle:"+this.portalSet.bodyOut.angle+"}")),e=e.concat("]")},e.prototype.spawnGravityFields=function(e){for(var t=0;t<this.gravityFieldGrid.length;t++)this.gravityFieldGrid[t].inUse=!1;for(var i=0;i<this.gravityFieldsArray.length;i++)this.gravityFieldsArray[i].remove(this.gravityFieldsArray[i]);for(var s=0;s<e.length;s++)this.gravityFieldsArray[s].spawn(e[s].x,e[s].direction);e.length>0&&Game.playSound("crazy-golf/shield-loop.wav")},e.prototype.spawnBlocks=function(e){for(var t=0;t<this.blockGrid.length;t++)this.blockGrid[t].inUse=!1;for(var i=0;i<this.blocksArray.length;i++)this.blocksArray[i].remove(this.blocksArray[i]);for(var s=0;s<e.length;s++)this.blocksArray[s].spawn(e[s].x,e[s].y)},e.prototype.spawnRandomGravityFields=function(e){for(var t=0;t<this.gravityFieldGrid.length;t++)this.gravityFieldGrid[t].inUse=!1;this.scene.shuffleArray(this.gravityFieldGrid);for(var i=0;i<e;i++){for(var s,o=["backwards","forwards","up","down"][Game.getRandom(0,3,!0)],a=0;a<this.gravityFieldGrid.length;a++)if(0==this.gravityFieldGrid[a].inUse&&this.gravityFieldGrid[a].x<this.goalPlatformBody.position[0]-200){s=this.gravityFieldGrid[a].x,this.gravityFieldGrid[a].inUse=!0;break}this.gravityFieldsArray[i].spawn(s,o)}},e.prototype.spawnRandomBlocks=function(e){for(var t=0;t<this.blockGrid.length;t++)this.blockGrid[t].inUse=!1;this.scene.shuffleArray(this.blockGrid);for(var i=0;i<e;i++){for(var s,o=0;o<this.blockGrid.length;o++)if(0==this.blockGrid[o].inUse&&this.blockGrid[o].x<this.goalPlatformBody.position[0]-200){(s=this.blockGrid[o]).inUse=!0;break}this.blocksArray[i].spawn(s.x,s.y)}},e.prototype.markBlockWithPortal=function(e){for(var t=0;t<this.blocksArray.length;t++)this.blocksArray[t].body.position[0]==e.x&&this.blocksArray[t].body.position[1]==e.y&&this.blocksArray[t].markWithPortal()},e.prototype.removePortals=function(){this.portalSet.remove(this.portalSet),this.disableShell()},e.prototype.pause=function(){this.fireParticlesLeft&&this.fireParticlesLeft.pause(),this.fireParticlesRight&&this.fireParticlesRight.pause(),this.splashParticles&&this.splashParticles.pause(),this.portalSet&&this.portalSet.pause()},e.prototype.resume=function(){this.fireParticlesLeft&&this.fireParticlesLeft.resume(),this.fireParticlesRight&&this.fireParticlesRight.resume(),this.splashParticles&&this.splashParticles.resume(),this.portalSet&&this.portalSet.resume()},e.prototype.hitBlock=function(e){for(var t=0;t<this.blocksArray.length;t++)e==this.blocksArray[t].body&&(this.blocksArray[t].hit(),Game.playSound("crazy-golf/ball-ping-"+Game.getRandom(1,3,!0)+".mp3"),Game.playSound("crazy-golf/touch-start-"+this.blockHitCount+".mp3"),this.blockHitCount<3?this.blockHitCount++:this.blockHitCount=1)},e.prototype.activatePowerup=function(){for(var e=0;e<this.blocksArray.length;e++)this.blocksArray[e].activatePowerup();this.shellBody.shapes[0].sensor=!0},e.prototype.deactivatePowerup=function(){for(var e=0;e<this.blocksArray.length;e++)this.blocksArray[e].deactivatePowerup();this.shellBody.shapes[0].sensor=!1},e.prototype.endRound=function(){},e.prototype.tick=function(){if(1!=this.scene.paused&&1!=this.scene.endingGame){this.ticker++;for(e=0;e<this.blocksArray.length;e++)this.blocksArray[e].tick();for(var e=0;e<this.gravityFieldsArray.length;e++)this.gravityFieldsArray[e].tick();0==Game.isLowEndIPad&&(this.fireParticlesLeft.tick(),this.fireParticlesRight.tick()),1==this.portalSet.active&&this.portalSet.tick();var t=this.targetPlatformY+=.5*Math.sin(this.ticker/25);this.goalPlatformBody.position[1]=t,this.goalPlatformBody.angle+=.001*Math.sin(this.ticker/20),this.flagHolder.rotation+=5e-4*Math.sin(this.ticker/33),this.goalPlatformBack.position.x=this.goalPlatformFront.position.x,this.goalPlatformBack.position.y=this.goalPlatformFront.position.y,this.flagHolder.position.x=this.goalPlatformBody.position[0]-12,this.flagHolder.position.y=this.goalPlatformBack.position.y+10,this.backboardBackSprite.position.x=this.backboardSprite.position.x+7,this.backboardBackSprite.position.y=this.backboardSprite.position.y-15,this.backboardBackSprite.rotation=this.backboardSprite.rotation,this.backboardCrossTopSprite.rotation=-this.backboardSprite.rotation,this.backboardCrossBottomSprite.rotation=-this.backboardSprite.rotation;var i=new PIXI.Point(this.goalPlatformBack.position.x-62,this.goalPlatformBack.position.y+60),s=new PIXI.Point(this.goalPlatformBack.position.x+62,this.goalPlatformBack.position.y+60);0==Game.isLowEndIPad&&(this.fireParticlesLeft.updatePos(i),this.fireParticlesRight.updatePos(s));var o=(this.backboardJoint.angle-0)*this.motorPower;this.backboardJoint.setMotorSpeed(o),this.goalDetectBody.position[0]=this.goalPlatformBody.position[0]-10,this.goalDetectBody.position[1]=this.goalPlatformBody.position[1],this.goalPlatformBack.rotation=this.goalPlatformFront.rotation,this.shellBody.position[0]=this.goalPlatformBody.position[0]+3,this.shellBody.position[1]=this.goalPlatformBody.position[1]+18,this.shellBody.angle=this.goalPlatformBody.angle,this.shellSpriteBack.position.x=this.shellSprite.position.x+5,this.shellSpriteBack.position.y=this.shellSprite.position.y-26,this.shellSpriteBack.rotation=this.shellSprite.rotation}},e.prototype.destroy=function(){for(e=0;e<this.blocksArray.length;e++)this.blocksArray[e].destroy();for(e=0;e<this.gravityFieldsArray.length;e++)this.gravityFieldsArray[e].destroy();this.fireParticlesLeft&&this.fireParticlesLeft.destroy(),this.fireParticlesRight&&this.fireParticlesRight.destroy(),this.splashParticles&&this.splashParticles.destroy(),this.portalSet&&this.portalSet.destroy();for(e=0;e<this.waterChunks.length;e++)Game.displayStore.returnPooledItem(this.waterChunks[e]);for(var e=0;e<this.ceilingHolder.children.length;e++)Game.displayStore.returnPooledItem(this.ceilingHolder.getChildAt(e))},e}(),CrazyGolfBall=function(){function e(e,t,i){this.stuckTimeout=120,this.scene=e,this.game=e.game,this.trailActive=!1,this.body=new p2.Body({mass:1,position:[-50,200]}),this.shape=new p2.Circle({radius:6}),this.body.damping=.3,this.currentTrailIndex=0,this.shape.collisionGroup=this.scene.physicsManager.BALL,this.shape.collisionMask=this.scene.physicsManager.BALL|this.scene.physicsManager.LEVEL|this.scene.physicsManager.WATER|this.scene.physicsManager.GOAL|this.scene.physicsManager.PLAYER|this.scene.physicsManager.GRAVITY_FIELD|this.scene.physicsManager.PORTAL|this.scene.physicsManager.BLOCK,this.body.addShape(this.shape),this.gravityFieldForce=[0,0],this.shape.material=t,this.sprite=Game.displayStore.getSprite("crazy-golf/golf-ball"),this.sprite.alpha=1,this.sprite.scale.x=this.sprite.scale.y=1,this.trailHolder=Game.displayStore.getContainer("crazy-golf/golf-ball-trail-holder"),this.scene.physicsManager.bindSpriteToBody(this.sprite,this.body),this.active=!1,this.index=i,this.createTrailBalls()}return e.prototype.createTrailBalls=function(){this.particles=[];var e;e=1==Game.isLowEndIPad?20:50;for(var t=0;t<e;t++){var i=Game.displayStore.getSprite("crazy-golf/golf-ball-trail");i.alpha=1,i.blendMode=PIXI.BLEND_MODES.ADD,this.particles.push(i),this.trailHolder.addChild(i)}},e.prototype.spawn=function(){this.active=!0,this.sprite.alpha=1,this.ticker=0,this.sprite.scale.x=this.sprite.scale.y=0,TweenMax.to(this.sprite.scale,1,{x:1,y:1,ease:Expo.easeOut}),this.scene.physicsManager.resetBody(this.body),this.body.position=[76,225],this.scene.physicsManager.addBodyToWorld(this.body),this.body.angularVelocity=0},e.prototype.activatePowerup=function(){this.sprite.tint=16711680},e.prototype.deactivatePowerup=function(){this.sprite.tint=16777215},e.prototype.startGravityEffect=function(e,t){e.gravityFieldForce[0]=t[0],e.gravityFieldForce[1]=t[1]},e.prototype.stopGravityEffect=function(e){e.gravityFieldForce[0]=0,e.gravityFieldForce[1]=0},e.prototype.hit=function(e,t){var i=Math.cos(-t+Math.PI/2)*(1200*e),s=Math.sin(-t+Math.PI/2)*(1200*e);this.body.applyImpulse([i,s])},e.prototype.remove=function(e){e.sprite.alpha=0,this.trailActive=!1,e.scene.physicsManager.resetBody(e.body),e.scene.physicsManager.removeBodyFromWorld(e.body),e.active=!1},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.tick=function(){for(var e=0;e<this.particles.length;e++)this.particles[e].alpha>0&&(this.particles[e].alpha+=(0-this.particles[e].alpha)/15,this.particles[e].scale.x+=(0-this.particles[e].scale.x)/70,this.particles[e].scale.y+=(0-this.particles[e].scale.y)/70);if(0!=this.active){this.body.applyForce(this.gravityFieldForce);var t=[];if(p2.vec2.copy(t,this.body.velocity),this.currentVelocityMagnitude=p2.vec2.length(t),this.currentVelocityMagnitude>200&&0==this.trailActive&&(this.trailActive=!0),this.currentVelocityMagnitude<10&&0==this.scene.inputManager.isFireEnabled()&&this.ticker++,this.ticker>this.stuckTimeout&&(this.scene.ballManager.removeBall(this.body,!0),this.ticker=0),1==this.trailActive){this.currentTrailIndex<this.particles.length-1?this.currentTrailIndex++:this.currentTrailIndex=0;var i=this.particles[this.currentTrailIndex];i.position.x=this.body.position[0],i.position.y=Game.stageHeight-this.body.position[1],1==this.scene.powerupIsActive?(i.scale.x=2.5,i.scale.y=2.5,i.alpha=1,i.blendMode=PIXI.BLEND_MODES.ADD,i.tint=16684288):(i.scale.x=1.5,i.scale.y=1.5,i.alpha=1,i.blendMode=PIXI.BLEND_MODES.ADD,i.tint=8639999)}}},e.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.sprite);for(var e=0;e<this.particles.length;e++)Game.displayStore.returnPooledItem(this.particles[e])},e}(),CrazyGolfBlock=function(){function e(e,t,i,s){this.scene=e,this.game=e.game,this.levelManager=t,this.body=new p2.Body({mass:0,position:[-500,0]}),this.shape=new p2.Box({width:150,height:150}),this.shape.collisionGroup=this.scene.physicsManager.BLOCK,this.shape.collisionMask=this.scene.physicsManager.BALL,this.body.addShape(this.shape,[0,0]),this.shape.material=i,this.blockBack=Game.displayStore.getSprite("crazy-golf/block-back"),this.blockFront=Game.displayStore.getSprite("crazy-golf/block-front"),this.blockBackGlow=Game.displayStore.getSprite("crazy-golf/block-glow-back"),this.blockFrontGlow=Game.displayStore.getSprite("crazy-golf/block-glow-front"),this.blockBackGlow.blendMode=PIXI.BLEND_MODES.ADD,this.blockFrontGlow.blendMode=PIXI.BLEND_MODES.ADD,this.blockBackGlowRed=Game.displayStore.getSprite("crazy-golf/block-glow-back-red"),this.blockFrontGlowRed=Game.displayStore.getSprite("crazy-golf/block-glow-front-red"),this.blockBackGlowRed.blendMode=PIXI.BLEND_MODES.ADD,this.blockFrontGlowRed.blendMode=PIXI.BLEND_MODES.ADD,this.blockShadow=Game.displayStore.getSprite("crazy-golf/block-shadow"),this.blockShadow.alpha=.6,this.blockShadow.blendMode=PIXI.BLEND_MODES.MULTIPLY,this.fireParticleHolder=Game.displayStore.getContainer("crazy-golf/block-fire-particle-holder"),this.particleHolder=Game.displayStore.getContainer("crazy-golf/block-particle-holder");var o={lowerAngle:0,upperAngle:360,lowerVelocity:200,upperVelocity:1e3,endScale:.5,lowerStartScale:1,upperStartScale:1,friction:0,XstartRange:40,YstartRange:40,time:2.5,gravity:2e3,cap:6,endAlpha:1,rotationPower:3};this.smashParticles=new ParticleBurst(["crazy-golf/block-particle-1","crazy-golf/block-particle-2","crazy-golf/block-particle-3"],this.particleHolder,this.scene,o);var a,r={lowerAngle:0,upperAngle:360,lowerVelocity:500,upperVelocity:2e3,endScale:0,lowerStartScale:2,upperStartScale:3,friction:.12,XstartRange:0,YstartRange:0,time:1,gravity:2e3,cap:a=0==Game.isLowEndIPad?10:30,endAlpha:1,rotationPower:0,blendMode:PIXI.BLEND_MODES.ADD};this.fireParticles=new ParticleBurst(["crazy-golf/fire-particle.png"],this.fireParticleHolder,this.scene,r),this.scene.physicsManager.bindSpriteToBody(this.blockBack,this.body),this.active=!1,this.index=s}return e.prototype.spawn=function(e,t){this.active=!0,this.markedWithPortal=!1,this.blockBack.alpha=1,this.blockFront.alpha=1,this.blockBackGlowRed.alpha=0,this.blockFrontGlowRed.alpha=0,this.levelManager.platformHolderBack.addChild(this.blockShadow),this.levelManager.platformHolderBack.addChild(this.blockBack),this.levelManager.platformHolderBack.addChild(this.blockBackGlow),this.levelManager.platformHolderBack.addChild(this.blockBackGlowRed),this.levelManager.platformHolderFront.addChild(this.fireParticleHolder),this.levelManager.platformHolderFront.addChild(this.blockFront),this.levelManager.platformHolderFront.addChild(this.blockFrontGlow),this.levelManager.platformHolderFront.addChild(this.blockFrontGlowRed),this.scene.mainHolder.addChild(this.particleHolder),this.scene.physicsManager.resetBody(this.body),this.fireParticles.fire(!0),this.smashParticles.fire(!0),this.scene.physicsManager.addBodyToWorld(this.body),this.body.position=[e,t],this.particleHolder.position.x=this.fireParticleHolder.position.x=this.body.position[0],this.particleHolder.position.y=this.fireParticleHolder.position.y=Game.stageHeight-this.body.position[1],this.scene.physicsManager.addBodyToWorld(this.body),this.blockBack.position.x=this.body.position[0],this.blockFront.position.x=this.blockBack.position.x-6,this.blockBack.position.y=Game.stageHeight-this.body.position[1],this.blockFront.position.y=this.blockBack.position.y+16,this.blockBackGlow.position.x=this.blockBackGlowRed.position.x=this.blockBack.position.x,this.blockBackGlow.position.y=this.blockBackGlowRed.position.y=this.blockBack.position.y-28,this.blockFrontGlow.position.x=this.blockFrontGlowRed.position.x=this.blockFront.position.x,this.blockFrontGlow.position.y=this.blockFrontGlowRed.position.y=this.blockFront.position.y,this.blockShadow.position.x=this.blockBack.position.x,this.blockShadow.position.y=this.blockFront.position.y+85,this.blockFrontGlow.alpha=this.blockBackGlow.alpha=0,this.blockShadow.visible=t<180,1==this.scene.powerupIsActive?this.shape.sensor=!0:this.shape.sensor=!1},e.prototype.activatePowerup=function(){if(0!=this.active){this.blockFrontGlow.alpha=0,this.blockBackGlow.alpha=0,this.shape.sensor=!0,console.log("is sensor",this.shape.sensor);var e=new RoughEase({strength:5,points:12,randomize:!1,clamp:!0,template:Power4.easeInOut});TweenMax.to(this.blockFrontGlowRed,1,{alpha:1,ease:e}),TweenMax.to(this.blockBackGlowRed,1,{alpha:1,ease:e})}},e.prototype.deactivatePowerup=function(){this.blockFrontGlowRed.alpha=0,this.blockBackGlowRed.alpha=0,this.shape.sensor=!1,console.log("is sensor (off)",this.shape.sensor)},e.prototype.markWithPortal=function(){this.markedWithPortal=!0},e.prototype.hit=function(e){1==this.scene.powerupIsActive?(this.blockBack.alpha=0,this.blockFront.alpha=0,this.blockShadow.visible=!1,this.blockFrontGlowRed.alpha=0,this.blockBackGlowRed.alpha=0,this.fireParticles.replay(),this.smashParticles.replay(),this.scene.physicsManager.removeBodyFromWorld(this.body),Game.playSound("crazy-golf/hit-"+Game.getRandom(1,5,!0)+".mp3"),Game.playSound("crazy-golf/smash-vent-"+Game.getRandom(1,3,!0)+".mp3"),1==this.markedWithPortal&&this.scene.levelManager.removePortals()):(this.blockFrontGlow.alpha=this.blockBackGlow.alpha=1,TweenMax.to(this.blockFrontGlow,.5,{alpha:0,ease:Power4.easeInOut}),TweenMax.to(this.blockBackGlow,.5,{alpha:0,ease:Power4.easeInOut}))},e.prototype.remove=function(e){this.blockBack.alpha=0,this.blockFront.alpha=0,this.blockShadow.visible=!1,this.blockFrontGlowRed.alpha=0,this.blockBackGlowRed.alpha=0,this.levelManager.platformHolderBack.removeChild(this.blockBack),this.levelManager.platformHolderFront.removeChild(this.blockFront),e.scene.physicsManager.resetBody(e.body),e.scene.physicsManager.removeBodyFromWorld(e.body),e.active=!1},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.tick=function(){this.active},e.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.blockBack),Game.displayStore.returnPooledItem(this.blockShadow),Game.displayStore.returnPooledItem(this.blockFront),Game.displayStore.returnPooledItem(this.blockBackGlow),Game.displayStore.returnPooledItem(this.blockFrontGlow),Game.displayStore.returnPooledItem(this.blockBackGlowRed),Game.displayStore.returnPooledItem(this.blockFrontGlowRed),Game.displayStore.returnPooledItem(this.particleHolder),Game.displayStore.returnPooledItem(this.fireParticleHolder),this.smashParticles.destroy(),this.fireParticles.destroy()},e}(),CrazyGolfGravityField=function(){function e(e,t){this.scene=e,this.game=e.game,this.body=new p2.Body({mass:0,position:[-600,0]}),this.shape=new p2.Box({width:200,height:700}),this.container=Game.displayStore.getContainer("crazy-golf/gravity-field-holder"),this.chunksHolder=Game.displayStore.getContainer("crazy-golf/gravity-field-chunks-holder"),this.shape.collisionGroup=this.scene.physicsManager.GRAVITY_FIELD,this.shape.collisionMask=this.scene.physicsManager.BALL,this.body.addShape(this.shape),this.shape.sensor=!0,1==Game.isLowEndIPad?this.particleRatio=10:this.particleRatio=1,this.chunks=[];for(var i=0;i<6;i++){var s=Game.displayStore.getSprite("crazy-golf/gravity-field-chunk");s.blendMode=PIXI.BLEND_MODES.ADD,s.position.y=i*s.height,this.chunksHolder.addChild(s),this.chunks.push(s)}this.chunksHolder.position.y=-300,this.chunksHolder.height=1200,this.scene.physicsManager.bindSpriteToBody(this.container,this.body),this.active=!1,this.index=t,this.currentGravityField=[0,0],this.gravityParticlesHolder=Game.displayStore.getContainer("crazy-golf/gravity-particle-holder");var o={cap:200/this.particleRatio,time:1,lowerAngle:.01,upperAngle:.01,XstartRange:0,YstartRange:600,gravity:0,startAlpha:1,endAlpha:1,startScaleX:0,endScaleX:2,fadeInTime:50,fadeOutTime:50,tint:16776960,blendMode:PIXI.BLEND_MODES.ADD,scaleInTime:3,scaleOutTime:2,xPos:0,yPos:0,lowerVelocity:50,upperVelocity:300,lowerStartScale:1,upperStartScale:3,rotationPower:0};this.gravityParticles=new ParticleStream(["crazy-golf/gravity-particle"],this.gravityParticlesHolder,this.scene,o),this.container.addChild(this.chunksHolder),this.container.addChild(this.gravityParticlesHolder),this.gravityParticles.enable()}return e.prototype.spawn=function(e,t){switch(this.active=!0,this.container.alpha=1,this.direction=t,this.scene.mainHolder.addChildAt(this.container,4),this.scene.physicsManager.resetBody(this.body),this.body.position=[e,Game.stageHeight],this.scene.physicsManager.addBodyToWorld(this.body),t){case"forwards":i={cap:200/this.particleRatio,time:.7,lowerAngle:1,upperAngle:1,XstartRange:20,YstartRange:350,gravity:0,startAlpha:0,endAlpha:0,startScaleX:0,endScaleX:2,fadeInTime:2,fadeOutTime:2,spriteAngle:0,tint:16777215,scaleInTime:20,scaleOutTime:20,xPos:-80,yPos:200,lowerVelocity:100,upperVelocity:400,lowerStartScale:.5,upperStartScale:2,rotationPower:0,blendMode:PIXI.BLEND_MODES.ADD};this.currentGravityField=[500,10];break;case"backwards":i={cap:200/this.particleRatio,time:.7,lowerAngle:1,upperAngle:1,XstartRange:20,YstartRange:350,gravity:0,startAlpha:0,endAlpha:0,startScaleX:0,endScaleX:2,fadeInTime:2,fadeOutTime:2,spriteAngle:Math.PI,tint:16777215,scaleInTime:20,scaleOutTime:20,xPos:80,yPos:200,lowerVelocity:-100,upperVelocity:-400,lowerStartScale:.5,upperStartScale:2,rotationPower:0,blendMode:PIXI.BLEND_MODES.ADD};this.currentGravityField=[-500,10];break;case"up":i={cap:150/this.particleRatio,time:1.3,lowerAngle:90,upperAngle:90,XstartRange:80,YstartRange:0,gravity:0,startAlpha:0,endAlpha:0,startScaleX:0,endScaleX:2,fadeInTime:20,fadeOutTime:3,spriteAngle:-Math.PI/2,tint:16777215,scaleInTime:10,scaleOutTime:40,xPos:1,yPos:630,lowerVelocity:-150,upperVelocity:-700,lowerStartScale:.5,upperStartScale:2,rotationPower:0,blendMode:PIXI.BLEND_MODES.ADD};this.currentGravityField=[10,800];break;case"down":var i={cap:150/this.particleRatio,time:1.3,lowerAngle:-90,upperAngle:-90,XstartRange:80,YstartRange:0,gravity:0,startAlpha:0,endAlpha:0,startScaleX:0,endScaleX:2,fadeInTime:20,fadeOutTime:3,spriteAngle:Math.PI/2,tint:16777215,scaleInTime:10,scaleOutTime:40,xPos:1,yPos:-180,lowerVelocity:-150,upperVelocity:-700,lowerStartScale:.5,upperStartScale:2,rotationPower:0,blendMode:PIXI.BLEND_MODES.ADD};this.currentGravityField=[10,-800]}this.gravityParticles.updateParams(i,this.gravityParticles),console.log(this.body.position,this.container.position,this.chunksHolder.position)},e.prototype.hit=function(e,t){},e.prototype.remove=function(e){e.container.alpha=0,e.scene.mainHolder.removeChild(e.container),e.body&&(e.scene.physicsManager.resetBody(e.body),e.scene.physicsManager.removeBodyFromWorld(e.body)),e.active=!1},e.prototype.pause=function(){this.gravityParticles.pause()},e.prototype.resume=function(){this.gravityParticles.resume()},e.prototype.tick=function(){if(0!=this.active){this.chunks[0].position.y>-this.chunks[0].height?this.chunks[0].position.y-=2:this.chunks[0].position.y=0;for(var e=1;e<this.chunks.length;e++){var t=this.chunks[e];t.position.y=this.chunks[0].position.y+t.height*e}this.gravityParticles.tick()}},e.prototype.destroy=function(){for(var e=0;e<this.chunks.length;e++)Game.displayStore.returnPooledItem(this.chunks[e]);Game.displayStore.returnPooledItem(this.chunksHolder),Game.displayStore.returnPooledItem(this.container),this.gravityParticles.destroy()},e}(),CrazyGolfLevelData=function(){return function(){this.data=[{available:!0,difficulty:1,ceiling:760,platform:{x:1033,y:409},blocks:[{x:600,y:650}],fields:[],portals:[]},{available:!0,difficulty:1,ceiling:800,platform:{x:952,y:190},blocks:[{x:600,y:400}],fields:[],portals:[]},{available:!0,difficulty:2,ceiling:800,platform:{x:1050,y:360},blocks:[{x:350,y:400}],fields:[],portals:[]},{available:!0,difficulty:1,ceiling:760,platform:{x:1113,y:564},blocks:[{x:350,y:150},{x:350,y:650}],fields:[],portals:[]},{available:!0,difficulty:1,ceiling:680,platform:{x:979,y:145},blocks:[{x:600,y:400},{x:600,y:150}],fields:[],portals:[]},{available:!0,difficulty:1,ceiling:800,platform:{x:1164,y:562},blocks:[{x:350,y:150},{x:850,y:400}],fields:[],portals:[]},{available:!0,difficulty:1,ceiling:740,platform:{x:921,y:320},blocks:[{x:600,y:400},{x:600,y:150}],fields:[],portals:[]},{available:!0,difficulty:2,ceiling:800,platform:{x:1100,y:439},blocks:[{x:600,y:150},{x:350,y:400}],fields:[],portals:[]},{available:!0,difficulty:1,ceiling:760,platform:{x:988,y:337},blocks:[{x:350,y:150},{x:350,y:650}],fields:[],portals:[]},{available:!0,difficulty:2,ceiling:800,platform:{x:944,y:261},blocks:[{x:600,y:650},{x:600,y:400}],fields:[]},{available:!0,difficulty:1,ceiling:780,platform:{x:1039,y:327},blocks:[{x:350,y:150},{x:600,y:650}],fields:[]},{available:!0,difficulty:1,ceiling:780,platform:{x:1096,y:173},blocks:[{x:850,y:150},{x:600,y:650}],fields:[]},{available:!0,difficulty:2,ceiling:800,platform:{x:927,y:406},blocks:[{x:600,y:650}],fields:[]},{available:!0,difficulty:2,ceiling:660,platform:{x:1046,y:309},blocks:[{x:350,y:150},{x:350,y:400}],fields:[]},{available:!0,difficulty:1,ceiling:560,platform:{x:993,y:221},blocks:[{x:600,y:150},{x:600,y:400}],fields:[]},{available:!0,difficulty:1,ceiling:420,platform:{x:988,y:197},blocks:[{x:350,y:150},{x:600,y:150}],fields:[]},{available:!0,difficulty:2,platform:{x:1269,y:206},blocks:[{x:850,y:650},{x:350,y:650},{x:350,y:150}],fields:[]},{available:!0,difficulty:3,platform:{x:1045,y:182},blocks:[{x:350,y:650},{x:600,y:150},{x:350,y:400}],fields:[]},{available:!0,difficulty:2,platform:{x:1167,y:402},blocks:[{x:600,y:650},{x:600,y:400},{x:600,y:150}],fields:[]},{available:!0,difficulty:2,ceiling:560,platform:{x:1132,y:241},blocks:[{x:600,y:400},{x:850,y:400},{x:600,y:150}],fields:[]},{available:!0,difficulty:2,platform:{x:1184,y:341},blocks:[{x:600,y:650},{x:350,y:150},{x:600,y:400}],fields:[]},{available:!0,difficulty:3,platform:{x:907,y:423},blocks:[{x:350,y:400},{x:350,y:650},{x:600,y:150}],fields:[]},{available:!0,difficulty:3,platform:{x:1061,y:368},blocks:[{x:350,y:650},{x:600,y:400},{x:600,y:650}],fields:[]},{available:!0,difficulty:2,ceiling:400,platform:{x:1047,y:145},blocks:[],fields:[{x:350,direction:"up"}]},{available:!0,difficulty:2,ceiling:400,platform:{x:1141,y:184},blocks:[],fields:[{x:600,direction:"backwards"}]},{available:!0,difficulty:2,ceiling:720,platform:{x:1198,y:472},blocks:[],fields:[{x:350,direction:"forwards"}]},{available:!0,difficulty:2,ceiling:580,platform:{x:982,y:334},blocks:[],fields:[{x:600,direction:"backwards"}]},{available:!0,difficulty:2,ceiling:580,platform:{x:1182,y:347},blocks:[],fields:[{x:600,direction:"up"}]},{available:!0,difficulty:2,ceiling:780,platform:{x:1133,y:145},blocks:[],fields:[{x:850,direction:"up"}]},{available:!0,difficulty:2,ceiling:780,platform:{x:1127,y:542},blocks:[],fields:[{x:850,direction:"down"}]},{available:!0,difficulty:2,ceiling:560,platform:{x:946,y:213},blocks:[{x:600,y:400}],fields:[{x:350,direction:"up"}]},{available:!0,difficulty:2,ceiling:520,platform:{x:1098,y:145},blocks:[{x:350,y:400}],fields:[{x:850,direction:"up"}]},{available:!0,difficulty:2,ceiling:680,platform:{x:1111,y:463},blocks:[{x:600,y:400}],fields:[{x:850,direction:"up"}]},{available:!0,difficulty:2,ceiling:680,platform:{x:1080,y:464},blocks:[{x:850,y:150}],fields:[{x:600,direction:"down"}]},{available:!0,difficulty:2,ceiling:600,platform:{x:892,y:383},blocks:[{x:600,y:400}],fields:[{x:350,direction:"forwards"}]},{available:!0,difficulty:2,ceiling:760,platform:{x:1074,y:174},blocks:[{x:600,y:650}],fields:[{x:600,direction:"down"}]},{available:!0,difficulty:2,ceiling:760,platform:{x:1155,y:145},blocks:[{x:600,y:650},{x:600,y:400}],fields:[{x:350,direction:"up"}]},{available:!0,difficulty:3,platform:{x:1152,y:509},blocks:[{x:850,y:400},{x:600,y:150}],fields:[{x:600,direction:"up"}]},{available:!0,difficulty:3,ceiling:680,platform:{x:946,y:482},blocks:[{x:350,y:400},{x:600,y:400}],fields:[{x:600,direction:"down"}]},{available:!0,difficulty:3,platform:{x:1320,y:197},blocks:[{x:600,y:400},{x:600,y:150}],fields:[{x:850,direction:"forwards"}]},{available:!0,difficulty:3,ceiling:520,platform:{x:824,y:145},blocks:[{x:350,y:150},{x:350,y:400}],fields:[{x:350,direction:"backwards"}]},{available:!0,difficulty:3,ceiling:520,platform:{x:1223,y:190},blocks:[{x:350,y:400},{x:850,y:150}],fields:[{x:850,direction:"up"}]},{available:!0,difficulty:3,platform:{x:973,y:145},blocks:[{x:350,y:650},{x:600,y:650}],fields:[{x:350,direction:"up"}]},{available:!0,difficulty:3,platform:{x:1278,y:447},blocks:[{x:350,y:650},{x:600,y:150}],fields:[{x:350,direction:"forwards"}]},{available:!0,difficulty:3,ceiling:540,platform:{x:1193,y:321},blocks:[{x:600,y:150},{x:600,y:400}],fields:[{x:350,direction:"forwards"}]},{available:!0,difficulty:3,ceiling:760,platform:{x:1192,y:492},blocks:[{x:350,y:650},{x:600,y:150}],fields:[{x:350,direction:"backwards"}]},{available:!0,difficulty:3,ceiling:720,platform:{x:1064,y:518},blocks:[{x:600,y:150},{x:850,y:400}],fields:[{x:850,direction:"up"}]},{available:!0,difficulty:3,platform:{x:917,y:145},blocks:[{x:350,y:650},{x:350,y:150},{x:600,y:400}],fields:[{x:600,direction:"backwards"}]},{available:!0,difficulty:3,ceiling:620,platform:{x:1282,y:350},blocks:[{x:600,y:150},{x:350,y:400},{x:600,y:400}],fields:[{x:850,direction:"forwards"}]},{available:!0,difficulty:2,ceiling:780,platform:{x:974,y:174},blocks:[{x:350,y:150},{x:600,y:150},{x:350,y:650}],fields:[{x:600,direction:"backwards"}]},{available:!0,difficulty:3,ceiling:640,platform:{x:1345,y:232},blocks:[{x:350,y:400},{x:850,y:400},{x:600,y:150}],fields:[{x:850,direction:"forwards"}]},{available:!0,difficulty:3,platform:{x:965,y:122},blocks:[{x:600,y:400},{x:600,y:650},{x:350,y:400}],fields:[{x:350,direction:"up"}]},{available:!0,difficulty:2,ceiling:540,platform:{x:1108,y:145},blocks:[{x:850,y:150},{x:350,y:400},{x:600,y:150}],fields:[{x:600,direction:"forwards"}]},{available:!0,difficulty:2,ceiling:760,platform:{x:1250,y:145},blocks:[{x:350,y:650},{x:850,y:650},{x:850,y:150}],fields:[{x:600,direction:"forwards"}]},{available:!0,difficulty:2,platform:{x:1264,y:149},blocks:[{x:850,y:650},{x:600,y:400},{x:850,y:400}],fields:[{x:850,direction:"forwards"}]},{available:!0,difficulty:3,platform:{x:1153,y:272},blocks:[{x:600,y:650},{x:600,y:150},{x:350,y:150}],fields:[{x:850,direction:"up"}]},{available:!0,difficulty:4,platform:{x:1267,y:480},blocks:[{x:350,y:400},{x:600,y:650},{x:600,y:150}],fields:[{x:600,direction:"up"}]},{available:!0,difficulty:4,platform:{x:1064,y:571},blocks:[{x:600,y:150},{x:600,y:400},{x:600,y:650}],fields:[{x:350,direction:"forwards"}]},{available:!0,difficulty:4,platform:{x:883,y:426},blocks:[{x:350,y:400},{x:350,y:650},{x:350,y:150}],fields:[{x:350,direction:"forwards"}]},{available:!0,difficulty:3,ceiling:540,platform:{x:924,y:145},blocks:[{x:600,y:150},{x:350,y:400},{x:350,y:150}],fields:[{x:600,direction:"backwards"}]},{available:!0,difficulty:4,ceiling:780,platform:{x:1314,y:326},blocks:[{x:850,y:650},{x:850,y:150},{x:350,y:650}],fields:[{x:350,direction:"up"},{x:850,direction:"up"}]},{available:!0,difficulty:4,ceiling:700,platform:{x:1242,y:395},blocks:[{x:350,y:150},{x:600,y:150},{x:350,y:400}],fields:[{x:850,direction:"up"},{x:350,direction:"forwards"}]},{available:!0,difficulty:4,platform:{x:1308,y:539},blocks:[{x:850,y:400},{x:850,y:650},{x:600,y:150}],fields:[{x:850,direction:"backwards"},{x:600,direction:"forwards"}]},{available:!0,difficulty:4,ceiling:780,platform:{x:934,y:164},blocks:[{x:600,y:150},{x:350,y:400},{x:600,y:650}],fields:[{x:600,direction:"down"},{x:350,direction:"down"}]},{available:!0,difficulty:4,platform:{x:1328,y:505},blocks:[{x:850,y:150},{x:850,y:400},{x:350,y:150}],fields:[{x:600,direction:"down"},{x:850,direction:"down"}]},{available:!0,difficulty:4,platform:{x:1032,y:327},blocks:[{x:350,y:650},{x:600,y:650},{x:350,y:150}],fields:[{x:350,direction:"up"},{x:600,direction:"backwards"}]},{available:!0,difficulty:4,ceiling:780,platform:{x:1317,y:240},blocks:[{x:350,y:150},{x:350,y:400},{x:350,y:650}],fields:[{x:850,direction:"forwards"},{x:350,direction:"up"}]},{available:!0,difficulty:4,ceiling:760,platform:{x:975,y:145},blocks:[{x:600,y:150},{x:350,y:150},{x:600,y:650}],fields:[{x:600,direction:"backwards"},{x:350,direction:"forwards"}]},{available:!0,difficulty:4,platform:{x:1374,y:518},blocks:[{x:350,y:150},{x:600,y:150},{x:600,y:400}],fields:[{x:600,direction:"forwards"},{x:850,direction:"backwards"}]},{available:!0,difficulty:4,platform:{x:889,y:296},blocks:[{x:350,y:400},{x:600,y:400},{x:350,y:150}],fields:[{x:350,direction:"up"},{x:600,direction:"down"}]},{available:!0,difficulty:4,ceiling:760,platform:{x:1015,y:201},blocks:[{x:600,y:650},{x:350,y:650},{x:350,y:150}],fields:[{x:600,direction:"forwards"},{x:350,direction:"backwards"}]},{available:!0,difficulty:4,ceiling:520,platform:{x:1205,y:323},blocks:[{x:850,y:150},{x:350,y:400},{x:600,y:150}],fields:[{x:350,direction:"up"},{x:850,direction:"forwards"}]},{available:!0,difficulty:4,ceiling:720,platform:{x:869,y:366},blocks:[{x:350,y:650},{x:350,y:150},{x:600,y:150}],fields:[{x:600,direction:"down"},{x:350,direction:"backwards"}]},{available:!0,difficulty:4,platform:{x:1396,y:543},blocks:[{x:600,y:400},{x:600,y:150},{x:350,y:650}],fields:[{x:350,direction:"forwards"},{x:850,direction:"forwards"}]},{available:!0,difficulty:4,platform:{x:882,y:491},blocks:[{x:350,y:650},{x:600,y:400},{x:350,y:150}],fields:[{x:350,direction:"down"},{x:600,direction:"forwards"}]},{available:!0,difficulty:4,platform:{x:1208,y:145},blocks:[{x:600,y:650},{x:350,y:150},{x:850,y:650}],fields:[{x:350,direction:"down"},{x:850,direction:"forwards"}]},{available:!0,difficulty:3,platform:{x:1046,y:311},blocks:[{x:350,y:150},{x:350,y:400},{x:600,y:650}],fields:[],portals:[{x:350,y:150,angle:-Math.PI},{x:600,y:650,angle:0}]},{available:!0,difficulty:3,ceiling:740,platform:{x:1132,y:240},blocks:[{x:350,y:400},{x:600,y:400},{x:600,y:650}],fields:[],portals:[{x:350,y:400,angle:-Math.PI},{x:600,y:650,angle:0}]},{available:!0,difficulty:3,platform:{x:1108,y:145},blocks:[{x:600,y:650},{x:600,y:400},{x:600,y:150}],fields:[],portals:[{x:600,y:650,angle:-Math.PI},{x:600,y:150,angle:0}]},{available:!0,difficulty:3,platform:{x:973,y:145},blocks:[{x:350,y:400},{x:600,y:150},{x:600,y:650}],fields:[],portals:[{x:350,y:400,angle:-Math.PI},{x:600,y:650,angle:0}]},{available:!0,difficulty:3,platform:{x:1321,y:416},blocks:[{x:350,y:400},{x:600,y:400},{x:850,y:650}],fields:[],portals:[{x:350,y:400,angle:-Math.PI},{x:850,y:650,angle:0}]},{available:!0,difficulty:3,platform:{x:1269,y:228},blocks:[{x:600,y:400},{x:350,y:650},{x:850,y:650}],fields:[],portals:[{x:600,y:400,angle:-Math.PI},{x:850,y:650,angle:0}]},{available:!0,difficulty:3,platform:{x:1235,y:458},blocks:[{x:600,y:150},{x:350,y:650},{x:850,y:650}],fields:[],portals:[{x:600,y:150,angle:-Math.PI},{x:850,y:650,angle:0}]},{available:!0,difficulty:4,platform:{x:929,y:381},blocks:[{x:350,y:400},{x:600,y:650},{x:350,y:150}],fields:[],portals:[{x:350,y:400,angle:-Math.PI},{x:350,y:150,angle:0}]},{available:!0,difficulty:3,platform:{x:1200,y:144},blocks:[{x:350,y:150},{x:600,y:400},{x:600,y:650}],fields:[],portals:[{x:350,y:150,angle:-Math.PI},{x:600,y:650,angle:0}]},{available:!0,difficulty:4,platform:{x:1400,y:413},blocks:[{x:600,y:150},{x:850,y:150},{x:350,y:400}],fields:[{x:600,direction:"down"},{x:850,direction:"up"}],portals:[{x:600,y:150,angle:-Math.PI},{x:350,y:400,angle:0}]},{available:!0,difficulty:3,platform:{x:1180,y:492},blocks:[{x:350,y:400},{x:600,y:400},{x:350,y:650}],fields:[],portals:[{x:350,y:400,angle:-Math.PI},{x:600,y:400,angle:Math.PI/2}]},{available:!0,difficulty:4,platform:{x:1127,y:540},blocks:[{x:350,y:650},{x:850,y:150},{x:350,y:400}],fields:[{x:850,direction:"up"}],portals:[{x:350,y:650,angle:-Math.PI},{x:350,y:400,angle:0}]},{available:!0,difficulty:4,platform:{x:1064,y:400},blocks:[{x:600,y:150},{x:350,y:400},{x:600,y:650}],fields:[{x:850,direction:"backwards"}],portals:[{x:600,y:150,angle:-Math.PI},{x:600,y:650,angle:0}]},{available:!0,difficulty:4,ceiling:760,platform:{x:1155,y:316},blocks:[{x:350,y:400},{x:850,y:650},{x:600,y:150}],fields:[{x:350,direction:"backwards"},{x:600,direction:"forwards"}],portals:[{x:350,y:400,angle:-3.141592653589793},{x:600,y:150,angle:1.5707963267948966}]},{available:!0,difficulty:4,platform:{x:1308,y:477},blocks:[{x:350,y:400},{x:600,y:650},{x:850,y:400}],fields:[{x:350,direction:"backwards"},{x:850,direction:"forwards"}],portals:[{x:350,y:400,angle:-3.141592653589793},{x:850,y:400,angle:1.5707963267948966}]},{available:!0,difficulty:4,platform:{x:1164,y:538},blocks:[{x:350,y:650},{x:600,y:150},{x:850,y:400}],fields:[{x:600,direction:"up"},{x:350,direction:"forwards"}],portals:[{x:350,y:650,angle:-3.141592653589793},{x:850,y:400,angle:1.5707963267948966}]},{available:!0,difficulty:4,platform:{x:952,y:345},blocks:[{x:350,y:400},{x:350,y:650},{x:600,y:400}],fields:[{x:350,direction:"forwards"},{x:600,direction:"down"}],portals:[{x:350,y:400,angle:-3.141592653589793},{x:600,y:400,angle:1.5707963267948966}]},{available:!0,difficulty:4,platform:{x:1392,y:176},blocks:[{x:350,y:650},{x:850,y:150},{x:600,y:400}],fields:[{x:600,direction:"forwards"}],portals:[{x:350,y:650,angle:-3.141592653589793},{x:600,y:400,angle:1.5707963267948966}]},{available:!0,difficulty:4,ceiling:720,platform:{x:887,y:452},blocks:[{x:600,y:150},{x:350,y:400}],fields:[{x:350,direction:"up"},{x:600,direction:"up"}],portals:[{x:600,y:150,angle:-3.141592653589793},{x:350,y:400,angle:0}]},{available:!0,difficulty:4,platform:{x:1026,y:485},blocks:[{x:600,y:400},{x:350,y:650}],fields:[{x:350,direction:"backwards"},{x:600,direction:"forwards"}],portals:[{x:600,y:400,angle:-3.141592653589793},{x:350,y:650,angle:0}]},{available:!0,difficulty:4,platform:{x:1105,y:568},blocks:[{x:350,y:400},{x:350,y:150}],fields:[{x:600,direction:"up"}],portals:[{x:350,y:400,angle:-3.141592653589793},{x:350,y:150,angle:0}]},{available:!0,difficulty:4,platform:{x:1020,y:374},blocks:[{x:350,y:400},{x:600,y:150}],fields:[{x:350,direction:"forwards"},{x:600,direction:"up"}],portals:[{x:350,y:400,angle:-3.141592653589793},{x:600,y:150,angle:1.5707963267948966}]},{available:!0,difficulty:4,platform:{x:1003,y:339},blocks:[{x:600,y:400},{x:350,y:150}],fields:[{x:600,direction:"forwards"},{x:350,direction:"up"}],portals:[{x:600,y:400,angle:-3.141592653589793},{x:350,y:150,angle:1.5707963267948966}]},{available:!0,difficulty:4,platform:{x:878,y:438},blocks:[{x:350,y:650},{x:600,y:650}],fields:[{x:600,direction:"up"},{x:350,direction:"up"}],portals:[{x:350,y:650,angle:-3.141592653589793},{x:600,y:650,angle:1.5707963267948966}]}]}}(),CrazyGolfPortalSet=function(){function e(e){this.scene=e,this.game=e.game,this.bodyIn=new p2.Body({mass:0,position:[0,0]}),this.bodyOut=new p2.Body({mass:0,position:[0,0]}),this.shapeIn=new p2.Box({width:20,height:110}),this.shapeOut=new p2.Box({width:20,height:110}),this.shapeIn.sensor=!0,this.shapeOut.sensor=!0,this.shapeIn.collisionGroup=this.scene.physicsManager.PORTAL,this.shapeIn.collisionMask=this.scene.physicsManager.BALL,this.bodyIn.addShape(this.shapeIn),this.shapeOut.collisionGroup=this.scene.physicsManager.NONE,this.bodyOut.addShape(this.shapeOut),1==Game.isLowEndIPad?this.ipadRatio=2:this.ipadRatio=1,this.spriteIn=Game.displayStore.getContainer("crazy-golf/portal-in"),this.spriteOut=Game.displayStore.getContainer("crazy-golf/portal-out"),this.particlesInHolder=Game.displayStore.getContainer("crazy-golf/portal-particles-in-holder"),this.particlesOutHolder=Game.displayStore.getContainer("crazy-golf/portal-particles-out-holder");var t=this.spriteIn.getSprite("crazy-golf/portal-centre.png"),i=this.spriteOut.getSprite("crazy-golf/portal-centre.png");t.blendMode=PIXI.BLEND_MODES.ADD,i.blendMode=PIXI.BLEND_MODES.ADD,this.spriteIn.alpha=.5,this.spriteOut.alpha=.5,this.scene.physicsManager.bindSpriteToBody(this.spriteIn,this.bodyIn),this.scene.physicsManager.bindSpriteToBody(this.spriteOut,this.bodyOut),this.active=!1;var s={cap:20/this.ipadRatio,time:1,lowerAngle:180,upperAngle:180,XstartRange:0,YstartRange:30,gravity:0,startAlpha:1,endAlpha:1,endScale:0,fadeInTime:8,fadeOutTime:50,tint:16776960,blendMode:PIXI.BLEND_MODES.ADD,scaleInTime:8,scaleOutTime:50,lowerVelocity:150,upperVelocity:250,lowerStartScale:.6,upperStartScale:1,rotationPower:0},o={cap:20/this.ipadRatio,time:1,lowerAngle:-5,upperAngle:5,XstartRange:0,YstartRange:30,gravity:0,startAlpha:1,endAlpha:1,endScale:0,fadeInTime:50,fadeOutTime:3,tint:16776960,blendMode:PIXI.BLEND_MODES.ADD,scaleInTime:50,scaleOutTime:2,lowerVelocity:200,upperVelocity:300,lowerStartScale:.6,upperStartScale:1,rotationPower:0,friction:.03};this.particlesIn=new ParticleStream(["crazy-golf/fire-particle.png"],this.particlesInHolder,this.scene,s),this.particlesOut=new ParticleStream(["crazy-golf/fire-particle.png"],this.particlesOutHolder,this.scene,o)}return e.prototype.spawn=function(e,t){if(this.active=!1,this.spriteIn.alpha=0,this.spriteOut.alpha=0,this.scene.physicsManager.removeBodyFromWorld(this.bodyIn),this.scene.physicsManager.removeBodyFromWorld(this.bodyOut),e&&0!=e.length){this.particlesIn.enable(),this.particlesOut.enable(),this.active=!0,this.spriteIn.alpha=1,this.spriteOut.alpha=1,this.spriteIn.scale.x=this.spriteIn.scale.y=1,this.spriteOut.scale.x=this.spriteOut.scale.y=1,this.scene.mainHolder.addChild(this.spriteIn),this.scene.mainHolder.addChild(this.spriteOut),this.scene.mainHolder.addChild(this.particlesInHolder),this.scene.mainHolder.addChild(this.particlesOutHolder),this.scene.mainHolder.addChild(this.scene.ballManager.currentBall.sprite),this.scene.mainHolder.addChild(this.scene.levelManager.platformHolderFront),this.scene.physicsManager.resetBody(this.bodyIn),this.scene.physicsManager.resetBody(this.bodyOut),this.bodyIn.angle=e[0].angle,this.bodyOut.angle=e[1].angle,this.bodyIn.position=[e[0].x+77*Math.cos(e[0].angle),e[0].y+77*Math.sin(e[0].angle)],this.bodyOut.position=[e[1].x+77*Math.cos(e[1].angle),e[1].y+77*Math.sin(e[1].angle)],this.setPortalStyle(e[0].angle,this.spriteIn),this.setPortalStyle(e[1].angle,this.spriteOut),this.scene.physicsManager.addBodyToWorld(this.bodyIn),this.scene.physicsManager.addBodyToWorld(this.bodyOut),this.particlesInHolder.position.x=this.bodyIn.position[0]-160,this.particlesInHolder.position.y=Game.stageHeight-this.bodyIn.position[1],this.particlesInHolder.rotation=-this.bodyIn.angle,this.particlesOutHolder.position.x=this.bodyOut.position[0]-10,this.particlesOutHolder.position.y=Game.stageHeight-this.bodyOut.position[1],this.particlesOutHolder.rotation=-this.bodyOut.angle;for(var i=0;i<t.length;i++)for(var s=0;s<2;s++)t[i].x==e[s].x&&t[i].y==e[s].y&&this.scene.levelManager.markBlockWithPortal(t[i])}},e.prototype.setPortalStyle=function(e,t){t.alpha=1,0==e&&(t.scale.x=.7),e<-3&&(t.scale.x=.7)},e.prototype.ballIn=function(e){if(!(e.velocity[0]<1)&&1!=this.scene.powerupIsActive){TweenMax.from(this.spriteIn.scale,.5,{x:1.2,ease:Power4.easeOut}),this.scene.ballManager.ballInPortal(),Game.playSound("crazy-golf/teleport-1.mp3");var t=Math.atan2(e.velocity[1],e.velocity[0]),i=this.bodyOut.angle-(this.bodyIn.angle+Math.PI)+t,s=[];s[0]=e.velocity[0],s[1]=e.velocity[1];var o=[];p2.vec2.copy(o,e.velocity);var a=p2.vec2.length(o);this.scene.physicsManager.resetBody(e),this.scene.physicsManager.removeBodyFromWorld(e),TweenMax.delayedCall(.5,function(){TweenMax.from(this.spriteOut.scale,.5,{x:1.4,ease:Power4.easeOut}),Game.playSound("crazy-golf/teleport-2.mp3"),this.scene.physicsManager.addBodyToWorld(e),e.position[0]=this.bodyOut.position[0],e.position[1]=this.bodyOut.position[1],e.velocity[0]=Math.cos(i)*a,e.velocity[1]=Math.sin(i)*a,this.scene.ballManager.ballOutPortal(),this.scene.levelManager.disableShell()},null,this)}},e.prototype.remove=function(e){TweenMax.to(this.spriteIn.scale,.3,{x:0,y:0,ease:Power4.easeOut}),TweenMax.to(this.spriteOut.scale,.3,{x:0,y:0,ease:Power4.easeOut,onComplete:function(e){e.scene.mainHolder.removeChild(e.spriteIn),e.scene.mainHolder.removeChild(e.spriteOut)},onCompleteParams:[this]}),e.scene.physicsManager.resetBody(e.bodyIn),e.scene.physicsManager.removeBodyFromWorld(e.bodyIn),e.scene.physicsManager.resetBody(e.bodyOut),e.scene.physicsManager.removeBodyFromWorld(e.bodyOut),e.active=!1,this.particlesIn.disable(),this.particlesOut.disable()},e.prototype.pause=function(){this.particlesIn.pause(),this.particlesOut.pause()},e.prototype.resume=function(){this.particlesIn.resume(),this.particlesOut.resume()},e.prototype.tick=function(){0!=this.active&&(this.particlesIn.tick(),this.particlesOut.tick())},e.prototype.destroy=function(){this.particlesIn.destroy(),this.particlesOut.destroy()},e}(),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),AbducktionGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="abducktionGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.wristbandOverlay=new WristbandOverlay(this),3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),Game.coreData.setCurrentRide("abducktion"),this.tutorialViewed=Game.coreData.getGameTutorialViewed("abducktion"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.character=Game.coreData.getSelectedCharacter()||"ciara",this.sky=Game.displayStore.getSprite("abducktion/sky"),this.container.addChild(this.sky),this.waterParticleTimer=0,this.shipShadow=Game.displayStore.getSprite("ship-shadow"),this.leftPlatformShadow=Game.displayStore.getSprite("ship-shadow"),this.rightPlatformShadow=Game.displayStore.getSprite("ship-shadow"),this.shipIdle=!0,this.shipMoving=!1,this.shipStopping=!1,this.shipStatus="idle",this.sky.width=Game.stageWidth,this.sky.height=Game.stageHeight,this.leftDown=!1,this.rightDown=!1,this.targetBeamBaseAlpha=1,this.ducksCollected=0,this.powerUpActive=!1,this.spawningTickets=!1,this.ticketDelay=0,this.ticketX=0,this.ticketY=0,this.ticketsPlaced=0,this.score=0,this.lives=3,this.difficultyLevel=1,this.gameOverTriggered=!1,this.playAreaWidth=2*Game.stageWidth,this.mainContainer=Game.displayStore.getContainer("game-main-container"),this.scaleContainer=Game.displayStore.getContainer("game-scale-container"),this.backgroundLeft=Game.displayStore.getSprite("background-layer-3"),this.backgroundRight=Game.displayStore.getSprite("background-layer-3"),this.backgroundRight.scale.x=-1,this.background1Assets=new Array,this.background2Assets=new Array,this.background3Assets=new Array,this.foreground1Assets=new Array;for(o=0;o<3;o++)this.background1Assets.push({Sprite:Game.displayStore.getSprite("background-layer-1")}),this.background1Assets[o].Sprite.position.x=o*this.background1Assets[o].Sprite.width;for(o=0;o<6;o++)this.background2Assets.push({Sprite:Game.displayStore.getSprite("background-layer-2")}),this.background2Assets[o].Sprite.position.x=o*this.background2Assets[o].Sprite.width;this.riverBackContainer=Game.displayStore.getContainer("river-back-container"),this.riverAssets=new Array;for(o=0;o<4;o++)this.riverAssets.push({Sprite:Game.displayStore.getSprite("abducktion/river-back")}),this.riverAssets[o].Sprite.position.x=o*this.riverAssets[o].Sprite.width,this.riverBackContainer.addChild(this.riverAssets[o].Sprite);this.leftWater=Game.displayStore.getSprite("blank-square"),this.leftWater.width=400,this.leftWater.height=180,this.leftWater.position.x=200,this.leftWater.position.y=Game.stageHeight,this.leftWater.tint=9605778,this.leftWater.alpha=.8,this.rightWater=Game.displayStore.getSprite("blank-square"),this.rightWater.width=400,this.rightWater.height=180,this.rightWater.position.x=this.playAreaWidth-200,this.rightWater.position.y=Game.stageHeight,this.rightWater.tint=9605778,this.rightWater.alpha=.8,this.tempWater=Game.displayStore.getSprite("blank-square"),this.tempWater.width=1248,this.tempWater.height=80,this.tempWater.position.x=this.playAreaWidth/2,this.tempWater.position.y=Game.stageHeight,this.tempWater.tint=16294221,this.tempWater.alpha=.9,this.backWater=Game.displayStore.getSprite("abducktion/river"),this.backWater.width=this.playAreaWidth,this.backWater.height=230,this.backWater.position.y=Game.stageHeight,this.tempFloor=Game.displayStore.getSprite("blank-square"),this.tempFloor.width=1248,this.tempFloor.height=100,this.tempFloor.position.x=this.playAreaWidth/2,this.tempFloor.position.y=Game.stageHeight,this.tempFloor.tint=16294221,this.tempFloorLeft=Game.displayStore.getSprite("blank-square"),this.tempFloorLeft.width=400,this.tempFloorLeft.height=100,this.tempFloorLeft.position.x=200,this.tempFloorLeft.position.y=Game.stageHeight,this.tempFloorLeft.tint=16294221,this.tempFloorRight=Game.displayStore.getSprite("blank-square"),this.tempFloorRight.width=400,this.tempFloorRight.height=100,this.tempFloorRight.position.x=this.playAreaWidth-200,this.tempFloorRight.position.y=Game.stageHeight,this.tempFloorRight.tint=16294221,this.beamBaseBack=Game.displayStore.getSprite("ufo-beam-base-back"),this.beamBaseFront=Game.displayStore.getSprite("ufo-beam-base-front"),this.beamBaseBack.position.x=this.playAreaWidth/2,this.beamBaseFront.position.x=this.playAreaWidth/2,this.foregroundLayerContainer1=Game.displayStore.getContainer("game-foreground-layer-1-container"),this.backgroundLayerContainer1=Game.displayStore.getContainer("game-background-layer-1-container"),this.backgroundLayerContainer2=Game.displayStore.getContainer("game-background-layer-2-container"),this.backgroundLayerContainer3=Game.displayStore.getContainer("game-background-layer-3-container");for(o=0;o<this.background1Assets.length;o++)this.backgroundLayerContainer1.addChild(this.background1Assets[o].Sprite);for(o=0;o<this.background2Assets.length;o++)this.backgroundLayerContainer2.addChild(this.background2Assets[o].Sprite);for(var i=0;i<10;i++)this.foreground1Assets.push({Sprite:Game.displayStore.getSprite("foreground-layer-1")}),this.foregroundLayerContainer1.addChild(this.foreground1Assets[i].Sprite),this.foreground1Assets[i].Sprite.position.x=i*this.foreground1Assets[i].Sprite.width;this.waterSplashContainers=new Array,this.waterSplashContainers.push({active:!1,container:Game.displayStore.getContainer("water-splash-1-container"),timer:0}),this.waterSplashContainers.push({active:!1,container:Game.displayStore.getContainer("water-splash-2-container"),timer:0}),this.waterSplashContainers.push({active:!1,container:Game.displayStore.getContainer("water-splash-3-container"),timer:0});for(o=0;o<this.waterSplashContainers.length;o++)this.waterSplashContainers[o].container.position.x=Game.stageWidth/2;var t={lowerAngle:230,upperAngle:310,lowerVelocity:200,upperVelocity:500,lowerStartScale:2,upperStartScale:4,lowerEndScale:0,upperEndScale:1,friction:.03,XstartRange:20,YstartRange:0,time:1,gravity:1e3,cap:30,startAlpha:1,endAlpha:1,endScale:1,rotationPower:1};this.waterSplash1=new ParticleBurst(["abducktion/splash-particle"],this.waterSplashContainers[0].container,this,t),this.waterSplash2=new ParticleBurst(["abducktion/splash-particle"],this.waterSplashContainers[1].container,this,t),this.waterSplash3=new ParticleBurst(["abducktion/splash-particle"],this.waterSplashContainers[2].container,this,t),this.waterSplash1.fire(!0),this.waterSplash2.fire(!0),this.waterSplash3.fire(!0),this.backgroundLayerContainer1.setRegPoint(.5,0),this.backgroundLayerContainer1.position.x=Game.stageWidth,this.backgroundLayerContainer2.setRegPoint(.5,0),this.backgroundLayerContainer2.position.x=Game.stageWidth,this.backgroundLayerContainer3.setRegPoint(.5,0),this.backgroundLayerContainer3.scale.x=this.backgroundLayerContainer3.scale.y=1,this.backgroundLayerContainer3.addChild(this.backgroundLeft),this.backgroundLayerContainer3.addChild(this.backgroundRight),this.backgroundLeft.position.x=-this.backgroundLeft.width,this.backgroundRight.position.x=this.backgroundRight.width,this.backgroundLayerContainer3.position.x=Game.stageWidth/2,this.backgroundLayerContainer2.position.x=Game.stageWidth/2,this.backgroundLayerContainer1.position.x=Game.stageWidth/2,this.container.addChild(this.backgroundLayerContainer3),this.clouds=new Array;for(o=0;o<8;o++)o<5?this.clouds.push({cloud:Game.displayStore.getSprite("abducktion/cloud-1")}):this.clouds.push({cloud:Game.displayStore.getSprite("abducktion/cloud-2")}),this.container.addChild(this.clouds[o].cloud),this.clouds[o].cloud.position.x=Game.getRandom(-100,this.playAreaWidth+100),this.clouds[o].cloud.position.y=Game.getRandom(50,150),this.clouds[o].cloud.scale.x=this.clouds[o].cloud.scale.y=Game.getRandom(.8,1.2);if(this.container.addChild(this.backgroundLayerContainer2),this.container.addChild(this.backgroundLayerContainer1),this.mainContainer.addChild(this.riverBackContainer),this.mainContainer.addChild(this.backWater),this.riverParticles=new Array,0==Game.isLowEndIPad)for(o=0;o<50;o++)this.riverParticles.push({sprite:Game.displayStore.getSprite("river-edge-particle"),active:!1}),this.riverParticles[o].sprite.position.x=Game.getRandom(200,this.playAreaWidth-200),this.riverParticles[o].sprite.position.y=this.backWater.position.y-this.backWater.height/2,this.mainContainer.addChild(this.riverParticles[o].sprite),o<25?(this.riverParticles[o].sprite.alpha=1,this.riverParticles[o].active=!0):this.riverParticles[o].sprite.alpha=0;this.poppingParticles=new Array;for(o=0;o<6;o++)this.poppingParticles.push({sprite:Game.displayStore.getSprite("abducktion/red-particle-1"),active:!1,type:"red",xVelocity:0,yVelocity:0,rotationForce:0});for(o=0;o<6;o++)this.poppingParticles.push({sprite:Game.displayStore.getSprite("abducktion/red-particle-2"),active:!1,type:"red",xVelocity:0,yVelocity:0,rotationForce:0});for(o=0;o<6;o++)this.poppingParticles.push({sprite:Game.displayStore.getSprite("abducktion/red-particle-3"),active:!1,type:"red",xVelocity:0,yVelocity:0,rotationForce:0});for(o=0;o<6;o++)this.poppingParticles.push({sprite:Game.displayStore.getSprite("abducktion/blue-particle-1"),active:!1,type:"blue",xVelocity:0,yVelocity:0,rotationForce:0});for(o=0;o<6;o++)this.poppingParticles.push({sprite:Game.displayStore.getSprite("abducktion/blue-particle-2"),active:!1,type:"blue",xVelocity:0,yVelocity:0,rotationForce:0});for(o=0;o<6;o++)this.poppingParticles.push({sprite:Game.displayStore.getSprite("abducktion/blue-particle-3"),active:!1,type:"blue",xVelocity:0,yVelocity:0,rotationForce:0});this.poppingParticles=this.shuffleArray(this.poppingParticles);for(o=0;o<this.poppingParticles.length;o++)this.mainContainer.addChild(this.poppingParticles[o].sprite),this.poppingParticles[o].sprite.alpha=0,this.poppingParticles[o].sprite.position.x=Game.stageWidth;this.leftPlatformShadow.position.x=255,this.rightPlatformShadow.position.x=this.playAreaWidth-255,this.leftPlatformShadow.position.y=Game.stageHeight-30,this.rightPlatformShadow.position.y=Game.stageHeight-30,this.mainContainer.addChild(this.leftPlatformShadow),this.mainContainer.addChild(this.rightPlatformShadow),this.portalPlatform=new AbducktionPlatform(this,"red"),this.portalPlatform2=new AbducktionPlatform(this,"blue"),this.beamBaseBack.blendMode=PIXI.BLEND_MODES.ADD,this.beamBaseFront.blendMode=PIXI.BLEND_MODES.ADD,this.duckManager=new AbducktionDuckManager(this),this.mainContainer.addChild(this.beamBaseBack),this.popFrames=new Array;for(o=0;o<7;o++)this.popFrames.push({movieClip:Game.displayStore.getAnimatedSprite("abducktion-pop-frames"),active:!1,timer:0}),this.mainContainer.addChild(this.popFrames[o].movieClip),this.popFrames[o].movieClip.position.x=Game.stageWidth,this.popFrames[o].movieClip.animationSpeed=.4,this.popFrames[o].movieClip.loop=!1,this.popFrames[o].movieClip.scale.x=this.popFrames[o].movieClip.scale.y=2;if(this.mainContainer.addChild(this.waterSplashContainers[0].container),this.mainContainer.addChild(this.waterSplashContainers[1].container),this.mainContainer.addChild(this.waterSplashContainers[2].container),this.mainContainer.addChild(this.tempWater),this.duckParticles=new Array,0==Game.isLowEndIPad)for(o=0;o<50;o++)this.duckParticles.push({sprite:Game.displayStore.getSprite("duck-river-particle"),active:!1}),this.duckParticles[o].sprite.position.x=Game.getRandom(200,this.playAreaWidth-200),this.mainContainer.addChild(this.duckParticles[o].sprite),this.duckParticles[o].sprite.alpha=0;this.mainContainer.addChild(this.beamBaseFront),this.beamManager=new AbducktionBeamManager(this),this.shipManager=new AbducktionShipManager(this,this.character),this.laserManager=new AbducktionLaserManager(this),this.inputManager=new AbducktionInputManager(this),this.timerManager=new AbducktionTimerManager(this),this.foregroundLayerContainer1.setRegPoint(.5,0),this.riverBackContainer.position.y=Game.stageHeight-150,this.foregroundLayerContainer1.position.y=Game.stageHeight-50,this.foregroundLayerContainer1.scale.x=this.foregroundLayerContainer1.scale.y=1,this.foregroundLayerContainer1.position.x=Game.stageWidth/2,this.backgroundLayerContainer1.scale.x=this.backgroundLayerContainer1.scale.y=.7,this.backgroundLayerContainer2.scale.x=this.backgroundLayerContainer2.scale.y=.8,this.backgroundLayerContainer1.position.y=Game.stageHeight-290,this.backgroundLayerContainer2.position.y=Game.stageHeight-320,this.backgroundLayerContainer3.position.y=Game.stageHeight-450,this.mainContainer.position.x=0,this.mainContainer.position.y=60,this.shipShadow.position.x=Game.stageWidth/2,this.shipShadow.position.y=Game.stageHeight-100,this.scaleContainer.addChild(this.mainContainer),this.scaleContainer.setRegPoint(.5,.5),this.scaleContainer.position.x=Game.stageWidth/2,this.scaleContainer.position.y=Game.stageHeight/2+100,this.scaleContainer.scale.x=.7,this.scaleContainer.scale.y=.7,this.container.addChild(this.scaleContainer),this.container.addChild(this.foregroundLayerContainer1),this.heartBG=Game.displayStore.getSprite("abducktion/heart-bg"),this.container.addChild(this.heartBG),this.heartBG.position.x=109,this.heartBG.position.y=50,this.heartIcons=new Array;for(o=0;o<3;o++)this.heartIcons.push({heart:Game.displayStore.getSprite("abducktion/heart-icon"),active:!0}),this.container.addChild(this.heartIcons[o].heart),this.heartIcons[o].heart.position.x=100,this.heartIcons[o].heart.position.y=50,this.heartIcons[o].heart.visible=!0,this.heartIcons[o].heart.scale.x=1,this.heartIcons[o].heart.scale.y=1;this.heartIcons[0].heart.position.x-=70,this.heartIcons[2].heart.position.x+=70,this.scoreBG=Game.displayStore.getSprite("abducktion/score-bg"),this.scoreBG.position.y=205,this.scoreBG.position.x=-75,this.scoreText=Game.displayStore.getBitmapText("abducktion/score-font"),this.scoreText.position.x=50,this.scoreText.position.y=167,this.scoreText.scale.x=this.scoreText.scale.y=.75,this.scoreText.text="0",this.container.addChild(this.scoreBG),this.container.addChild(this.scoreText),this.ticketNum=2;this.tickets=new Array;for(o=0;o<this.ticketNum;o++)this.tickets.push({ticket:Game.ticketPool.getTicket(),posX:150*o,posY:-250,collectDelay:null,active:!1});for(var s=(Game.stageWidth-this.tickets[this.tickets.length-1].posX)/2,o=0;o<this.tickets.length;o++)this.tickets[o].posX+=s;this.timerManager.addTimersToScene(),this.tutorialOverlay=new TutorialOverlay(this),1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("abducktion",!0),this.setDifficulty(),this.setShipStatus()},t.prototype.popParticles=function(e,t,i){for(var s=0;s<this.poppingParticles.length;s++){var o=this.poppingParticles[s];if(0==o.active&&o.type==e){o.active=!0,o.sprite.alpha=1,o.sprite.position.x=t+Game.getRandom(-5,5),o.sprite.position.y=i+Game.getRandom(-5,5),o.xVelocity=Game.getRandom(-20,20),o.yVelocity=Game.getRandom(-30,10),o.sprite.scale.x=Game.getRandom(1,2),o.sprite.scale.y=o.sprite.scale.x,o.rotationForce=Game.getRandom(-.3,.3),o.sprite.rotation=Game.getRandom(0,3);break}}},t.prototype.placeWaterParticle=function(){var e=Game.getRandom(0,this.riverParticles.length-1,!0),t=this.riverParticles[e];0==t.active?(t.active=!0,t.sprite.position.x=Game.getRandom(0,this.playAreaWidth),t.sprite.position.y=this.backWater.position.y-this.backWater.height/2-2,t.sprite.alpha=.7,t.sprite.scale.x=Game.getRandom(.8,1.2)):this.placeWaterParticle()},t.prototype.placeDuckParticle=function(e,t){var i=Game.getRandom(0,this.duckParticles.length-1,!0),s=this.duckParticles[i];0==s.active?(s.active=!0,s.sprite.position.x=e,s.sprite.position.y=Game.stageHeight-40,s.sprite.alpha=1,s.sprite.scale.x=s.sprite.scale.y=Game.getRandom(.3,.5)):this.placeWaterParticle()},t.prototype.resetShipBeam=function(){this.beamManager.resetBeam()},t.prototype.setShipStatus=function(){if(1==this.shipIdle){if("idle"==this.shipStatus)return;this.shipStatus="idle",Game.playSound("abducktion/ufo-float.wav",.5)}else Game.stopSound("abducktion/ufo-float.wav");if(1==this.shipMoving){if("moving"==this.shipStatus)return;this.shipStatus="moving",Game.playSound("abducktion/ufo-move.wav",.6)}else Game.stopSound("abducktion/ufo-move.wav");if(1==this.shipStopping){if("stopping"==this.shipStatus)return;this.shipStatus="stopping",Game.playSound("abducktion/ufo-stop.wav",.6),Game.playSound("abducktion/ufo-float.wav",.5)}else Game.stopSound("abducktion/ufo-stop.wav"),Game.playSound("abducktion/ufo-float.wav",0),Game.fadeSound("abducktion/ufo-float.wav",.4,.5)},t.prototype.platformDuckCheck=function(e,t,i){"left"==t?this.portalPlatform.platformDuckCheck(e,i):this.portalPlatform2.platformDuckCheck(e,i)},t.prototype.popAnimation=function(e,t,i){var s;s=1==Game.isLowEndIPad?5:15;for(o=0;o<s;o++)this.popParticles(e,t,i);for(var o=0;o<this.popFrames.length;o++)if(0==this.popFrames[o].active){this.popFrames[o].active=!0,this.popFrames[o].movieClip.gotoAndPlay(0),this.popFrames[o].timer=0,this.popFrames[o].movieClip.position.x=t,this.popFrames[o].movieClip.position.y=i;break}},t.prototype.getSplash=function(e){for(var t=0;t<this.waterSplashContainers.length;t++)if(0==this.waterSplashContainers[t].active){switch(this.waterSplashContainers[t].container.position.x=e,this.waterSplashContainers[t].container.position.y=Game.stageHeight-40,this.waterSplashContainers[t].active=!0,t){case 0:this.waterSplash1.replay();break;case 1:this.waterSplash2.replay();break;case 2:this.waterSplash3.replay()}break}Game.playSound("abducktion/water-"+Game.getRandom(1,2,!0)+".mp3",.5)},t.prototype.endGame=function(e){e.wristbandOverlay.endGame(e.score)},t.prototype.removeLife=function(){this.lives--,this.loseLife(),this.lives<=0&&this.endGame(this)},t.prototype.getLaserLevel=function(){return this.laserManager.activeBeamNumber},t.prototype.addScore=function(e){this.score++,++this.ducksCollected>=3&&(this.ducksCollected=0,this.populateTickets(e,Game.stageHeight-100)),this.scoreText.text=String(this.score),this.score<5&&(this.difficultyLevel=1),this.score>=5&&this.score<10&&(this.difficultyLevel=2),this.score>=10&&this.score<15&&(this.difficultyLevel=3),this.score>=15&&this.score<20&&(this.difficultyLevel=4),this.setDifficulty()},t.prototype.shakeCamera=function(e){this.cameraShake=TweenMax.to(e.scaleContainer.scale,.1,{x:1.1,yoyo:!0,repeat:1,ease:Power1.easeIn}),this.cameraShake=TweenMax.to(e.scaleContainer.scale,.1,{y:1.1,yoyo:!0,repeat:1,ease:Power1.easeIn})},t.prototype.setDifficulty=function(){this.laserManager.setDifficulty(this.difficultyLevel),this.duckManager.setDifficulty(this.difficultyLevel),this.timerManager.setDifficulty(this.difficultyLevel)},t.prototype.pauseTimer=function(e){this.timerManager.pauseTimer(e)},t.prototype.resumeTimer=function(e){this.timerManager.resumeTimer(e)},t.prototype.removeDuck=function(e,t){this.duckManager.removeDuck(e,t)},t.prototype.portalDuck=function(e,t,i){this.duckManager.portalDuck(e,t,i)},t.prototype.populateTickets=function(e,t){this.spawningTickets=!0,this.ticketX=e,this.ticketY=t},t.prototype.placeTicket=function(){++this.ticketsPlaced>=this.ticketNum&&(this.characterVoiceLine("positive"),this.ticketsPlaced=0,this.spawningTickets=!1);for(var e=0;e<this.tickets.length;e++)if(0==this.tickets[e].active)return this.tickets[e].ticket=Game.ticketPool.getTicket(),this.tickets[e].ticket.container.position.x=this.ticketX,this.tickets[e].ticket.container.position.y=this.ticketY,this.tickets[e].active=!0,void this.mainContainer.addChild(this.tickets[e].ticket.container)},t.prototype.collectTicket=function(e,t){e.tickets[t].ticket.collect(),e.tickets[t].active=!1},t.prototype.positionCamera=function(){if(this.distanceFromCenter=this.playAreaWidth/2-this.shipXpos,this.distanceFromCenterGlobal=this.playAreaWidth/2-this.mainContainer.position.x,this.shipXpos>512&&this.shipXpos<this.playAreaWidth-512)return this.mainContainer.position.x=this.distanceFromCenter,this.foregroundLayerContainer1.position.x=Game.stageWidth/2+1.3*this.distanceFromCenter,this.backgroundLayerContainer1.position.x=Game.stageWidth/2+.5*this.distanceFromCenter,this.backgroundLayerContainer2.position.x=Game.stageWidth/2+.3*this.distanceFromCenter,this.backgroundLayerContainer3.position.x=Game.stageWidth/2+.1*this.distanceFromCenter,void(this.shipSide="middle");this.shipXpos<512?this.shipSide="left":this.shipXpos>this.playAreaWidth-520&&(this.shipSide="right")},t.prototype.loseLife=function(){if(1!=this.gameOverTriggered)for(var e=this.heartIcons.length-1;e>=0;e--)if(0!=this.heartIcons[e].active)return this.heartIcons[e].active=!1,this.heartIcons[e].heart.visible=!1,void this.checkGameOver()},t.prototype.getLives=function(){for(var e=0,t=0;t<this.heartIcons.length;t++)1==this.heartIcons[t].active&&e++;return{currentLives:e,totalLives:this.heartIcons.length}},t.prototype.checkGameOver=function(){for(var e=0,t=0;t<this.heartIcons.length;t++)0==this.heartIcons[t].active&&e++,e==this.heartIcons.length&&(this.gameOverTriggered=!0)},t.prototype.startGameplay=function(){this.game.ui.triggerEnjoyTheRide(),Game.playSound("abducktion/background-music.wav",.4),Game.playSound("abducktion/ufo-float.wav",0),Game.fadeSound("abducktion/ufo-float.wav",.4,.5),0==Game.onDesktop?this.game.ui.setUI("gameplay-abducktion-touch"):this.game.ui.setUI("gameplay-abducktion"),this.sceneAnimations=new TimelineMax,this.sceneAnimations.add([TweenMax.to(this.scaleContainer.scale,1,{x:1,ease:Power1.easeInOut}),TweenMax.to(this.scaleContainer.scale,1,{y:1,ease:Power1.easeInOut}),TweenMax.to(this.foregroundLayerContainer1.scale,1,{x:1.2,ease:Power1.easeInOut}),TweenMax.to(this.foregroundLayerContainer1.scale,1,{y:1.2,ease:Power1.easeInOut}),TweenMax.to(this.backgroundLayerContainer1.scale,1,{x:1,ease:Power1.easeInOut}),TweenMax.to(this.backgroundLayerContainer1.scale,1,{y:1,ease:Power1.easeInOut}),TweenMax.to(this.backgroundLayerContainer2.scale,1,{x:1,ease:Power1.easeInOut}),TweenMax.to(this.backgroundLayerContainer2.scale,1,{y:1,ease:Power1.easeInOut}),TweenMax.to(this.foregroundLayerContainer1.position,1,{y:Game.stageHeight-60,ease:Sine.easeInOut})]),this.repeatingAnimations=new TimelineMax,this.repeatingAnimations.add([TweenMax.to(this.leftPlatformShadow.scale,1.5,{x:.8,yoyo:!0,repeat:-1,ease:Power1.easeInOut}),TweenMax.to(this.leftPlatformShadow.scale,1.5,{y:.8,yoyo:!0,repeat:-1,ease:Power1.easeInOut}),TweenMax.to(this.rightPlatformShadow.scale,1.5,{x:.8,yoyo:!0,repeat:-1,ease:Power1.easeInOut}),TweenMax.to(this.rightPlatformShadow.scale,1.5,{y:.8,yoyo:!0,repeat:-1,ease:Power1.easeInOut}),TweenMax.to(this.shipShadow.scale,2,{x:.8,yoyo:!0,repeat:-1,ease:Power1.easeInOut}),TweenMax.to(this.shipShadow.scale,2,{y:.8,yoyo:!0,repeat:-1,ease:Power1.easeInOut})]),this.game.powerUpManager.startGame()},t.prototype.characterVoiceLine=function(e){"positive"==e?Game.playSound("abducktion/"+this.character+"-"+e+"-"+Game.getRandom(1,4,!0)+".mp3"):Game.playSound("abducktion/"+this.character+"-"+e+"-"+Game.getRandom(1,6,!0)+".mp3")},t.prototype.startTimer=function(e,t,i){this.timerManager.startTimer(e,t,i)},t.prototype.getDuckPosition=function(e){return this.duckManager.returnDuckPosition(e)},t.prototype.stopTimer=function(e){this.timerManager.stopTimer(e)},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"playbuttonlarge":this.resume();break;case"pause-button":this.pause(!1)}},t.prototype.downOnUI=function(t){1!=this.tutorialOverlay.isOpen&&(e.prototype.downOnUI.call(this,t),"forwards-button"==t.id&&this.pullDuckUp(),"backwards-button"==t.id&&this.dropDuckLevel(),"move-left-button"==t.id&&(this.leftDown=!0,this.rightDown=!1),"move-right-button"==t.id&&(this.leftDown=!1,this.rightDown=!0))},t.prototype.upOnUI=function(t){e.prototype.upOnUI.call(this,t),t.id,t.id,"move-left-button"==t.id&&(this.leftDown=!1,this.shipManager.moveShip("none")),"move-right-button"==t.id&&(this.rightDown=!1,this.shipManager.moveShip("none"))},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.shipMove=function(e){this.shipManager.moveShip(e)},t.prototype.laserCheckDuck=function(e){return this.duckManager.laserCheckDuck(e)},t.prototype.pullDuckUp=function(){var e=this.beamManager.getBeamStatus();0==e.active&&this.checkForDuck(this.shipManager.shipOuterContainer.position.x),1==e.active&&(this.beamManager.increaseDuckLevel(),this.duckManager.increaseDuckLevel())},t.prototype.checkForDuck=function(e){this.duckManager.returnCloseDuck(e)},t.prototype.duckGrabSuccess=function(){this.beamManager.setBeamLevel(1)},t.prototype.dropDuckLevel=function(){this.beamManager.dropDuckLevel(),this.duckManager.dropDuckLevel()},t.prototype.getBeamStatus=function(){return this.beamManager.getBeamStatus()},t.prototype.getShipPosition=function(){return this.shipXpos},t.prototype.gameOver=function(e){e.wristbandOverlay.endGame(e.score)},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&("left"==t&&(this.leftDown=!0,this.rightDown=!1),"right"==t&&(this.rightDown=!0,this.leftDown=!1),"up"==t&&this.pullDuckUp(),"down"==t&&this.dropDuckLevel())},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&("left"==t?this.leftKeyUp():"right"==t&&this.rightKeyUp())},t.prototype.leftKeyDown=function(){this.shipXpos>200?(this.shipManager.moveShip("left"),this.shipMoving=!0,this.shipIdle=!1,this.shipStopping=!1):(this.shipManager.moveShip("none"),this.shipMoving=!1,this.shipStopping=!0,this.shipIdle=!1),this.setShipStatus()},t.prototype.leftKeyUp=function(){this.leftDown=!1,this.shipManager.moveShip("none"),this.shipMoving=!1,this.shipStopping=!0,this.shipIdle=!1,this.setShipStatus()},t.prototype.rightKeyDown=function(){this.shipXpos<this.playAreaWidth-200?(this.shipManager.moveShip("right"),this.shipMoving=!0,this.shipIdle=!1,this.shipStopping=!1):(this.shipManager.moveShip("none"),this.shipMoving=!1,this.shipStopping=!0,this.shipIdle=!1),this.setShipStatus()},t.prototype.rightKeyUp=function(){this.rightDown=!1,this.shipManager.moveShip("none"),this.shipMoving=!1,this.shipStopping=!0,this.shipIdle=!1,this.setShipStatus()},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause")},t.prototype.activatePowerUpEffect=function(){Game.pauseSound("abducktion/background-music.wav"),Game.playSound("abducktion/powerup-music.mp3",1),this.powerUpActive=!0,this.duckManager.activatePowerUp(),this.portalPlatform.setPowerUpActive(),this.portalPlatform2.setPowerUpActive(),this.portalPlatform2.setPowerUpActive()},t.prototype.deactivatePowerUpEffect=function(){Game.resumeSound("abducktion/background-music.wav"),this.powerUpActive=!1,this.duckManager.deactivatePowerUp(),this.portalPlatform.setPowerUpInactive(),this.portalPlatform2.setPowerUpInactive()},t.prototype.secondChanceUse=function(){},t.prototype.popDuck=function(e,t){this.duckManager.popDuck(e,t)},t.prototype.getAngleToMove=function(e,t){var i={x:e,y:t},s={x:this.shipManager.shipOuterContainer.x,y:this.shipManager.shipOuterContainer.y},o=(Math.atan2(s.y-i.y,s.x-i.x),180*Math.atan2(s.y-i.y,s.x-i.x)/Math.PI);return{x:Math.cos(o),y:Math.sin(o)}},t.prototype.tick=function(t){if(e.prototype.tick.call(this,t),1!=this.paused&&1!=this.tutorialOverlay.isOpen&&1!=this.wristbandOverlay.isOpen){this.shipXpos<380||this.shipXpos>this.playAreaWidth-380?this.targetBeamBaseAlpha=0:this.targetBeamBaseAlpha=1,this.shipManager.tick(),this.duckManager.tick(),this.timerManager.tick(),this.laserManager.tick(),this.beamManager.tick(),this.portalPlatform.tick(),this.portalPlatform2.tick(),this.beamBaseBack.alpha=this.simpleEase(this.beamBaseBack.alpha,this.targetBeamBaseAlpha/4,10),this.beamBaseFront.alpha=this.simpleEase(this.beamBaseFront.alpha,this.targetBeamBaseAlpha/4+.2,10),this.shipXpos<420||this.shipXpos>this.playAreaWidth-420?(this.beamBaseBack.alpha=this.simpleEase(this.beamBaseBack.alpha,0,2),this.beamBaseFront.alpha=this.simpleEase(this.beamBaseFront.alpha,0,2)):(this.beamBaseBack.alpha=this.simpleEase(this.beamBaseBack.alpha,this.targetBeamBaseAlpha/4,10),this.beamBaseFront.alpha=this.simpleEase(this.beamBaseFront.alpha,this.targetBeamBaseAlpha/4+.2,10));for(o=0;o<this.poppingParticles.length;o++){var i=this.poppingParticles[o];1==i.active&&(i.sprite.position.x+=i.xVelocity/2,i.sprite.position.y+=i.yVelocity/2,i.xVelocity=this.simpleEase(i.xVelocity,0,30),i.yVelocity=this.simpleEase(i.yVelocity,20,30),i.sprite.scale.x-=.01,i.sprite.scale.y-=.01,i.sprite.rotation+=i.rotationForce,i.sprite.scale.x<0&&(i.active=!1))}for(o=0;o<this.waterSplashContainers.length;o++)1==this.waterSplashContainers[o].active&&++this.waterSplashContainers[o].timer>=60&&(this.waterSplashContainers[o].active=!1,this.waterSplashContainers[o].timer=0);1==this.leftDown&&this.leftKeyDown(),1==this.rightDown&&this.rightKeyDown();for(o=0;o<this.tickets.length;o++)1==this.tickets[o].active&&(this.tickets[o].ticket.container.position.x=this.simpleEase(this.tickets[o].ticket.container.position.x,this.shipManager.shipOuterContainer.position.x,25),this.tickets[o].ticket.container.position.y=this.simpleEase(this.tickets[o].ticket.container.position.y,this.shipManager.shipOuterContainer.position.y,25),Math.abs(this.shipManager.shipOuterContainer.position.x-this.tickets[o].ticket.container.position.x)<70&&Math.abs(this.shipManager.shipOuterContainer.position.y-this.tickets[o].ticket.container.position.y)<50&&this.collectTicket(this,o));1==this.spawningTickets&&++this.ticketDelay>30&&(this.ticketDelay=0,this.placeTicket());for(o=0;o<this.clouds.length;o++)this.clouds[o].cloud.position.x+=1*this.clouds[o].cloud.scale.x,this.clouds[o].cloud.position.x>this.playAreaWidth+100&&(this.clouds[o].cloud.position.x=-100);0==Game.isLowEndIPad&&++this.waterParticleTimer>6&&(this.waterParticleTimer=0,this.placeWaterParticle());for(o=0;o<this.riverParticles.length;o++){var s=this.riverParticles[o];1==s.active&&(s.sprite.position.y+=s.sprite.scale.x/4,s.sprite.scale.x+=.02,s.sprite.alpha-=.01,s.sprite.alpha<0&&(s.active=!1))}for(var o=0;o<this.duckParticles.length;o++){var a=this.duckParticles[o];1==a.active&&(a.sprite.position.y+=a.sprite.scale.x/4,a.sprite.scale.x+=.01,a.sprite.alpha-=.01,a.sprite.alpha<0&&(a.active=!1))}this.shipXpos=this.shipManager.shipNoThrust,this.positionCamera(),this.beamBaseBack.position.y=Game.stageHeight-30,this.beamBaseBack.position.x=this.beamManager.beam.position.x,this.beamBaseBack.scale.y=this.beamBaseFront.scale.y=.7,this.beamBaseFront.position.y=Game.stageHeight-35,this.beamBaseFront.position.x=this.beamManager.beam.position.x,this.shipShadow.position.x=this.beamBaseBack.position.x,this.shipShadow.position.y=this.beamBaseFront.position.y,this.shipShadow.alpha=.8}},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t);for(var i=0;i<this.tickets.length;i++)this.tickets[i].ticket.pause(),this.pauseResumeTween(this.tickets[i].collectDelay,"pause");this.game.powerUpManager.pause(),this.laserManager.pause(),Game.pauseSound("abducktion/background-music.wav"),Game.pauseSound("abducktion/ufo-float.wav"),Game.pauseSound("abducktion/ufo-stop.wav"),Game.pauseSound("abducktion/ufo-move.wav")},t.prototype.resume=function(){e.prototype.resume.call(this),this.laserManager.resume(),this.setBackgroundColor(15724527),0==Game.onDesktop?this.game.ui.setUI("gameplay-abducktion-touch"):this.game.ui.setUI("gameplay-abducktion");for(var t=0;t<this.tickets.length;t++)this.tickets[t].ticket.resume(),this.pauseResumeTween(this.tickets[t].collectDelay,"resume");Game.resumeSound("abducktion/background-music.wav"),Game.resumeSound("abducktion/ufo-float.wav"),Game.resumeSound("abducktion/ufo-stop.wav"),Game.resumeSound("abducktion/ufo-move.wav"),this.game.powerUpManager.resume()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tutorialOverlay.destroy(),this.portalPlatform.destroy(),this.portalPlatform2.destroy(),this.duckManager.destroy(),this.timerManager.destroy(),this.laserManager.destroy(),this.beamManager.destroy(),this.mainContainer.removeAllChildren(),this.mainContainer=null,this.shipManager.destroy(),Game.displayStore.returnPooledItem(this.tempFloor),this.scaleContainer.removeAllChildren(),this.scaleContainer=null,this.backgroundLayerContainer3.removeAllChildren(),Game.displayStore.returnPooledItem(this.backgroundLeft),Game.displayStore.returnPooledItem(this.backgroundRight),Game.stopSound("abducktion/background-music.wav"),Game.stopSound("abducktion/ufo-float.wav"),Game.stopSound("abducktion/ufo-stop.wav"),Game.stopSound("abducktion/ufo-move.wav"),this.backgroundLayerContainer3=null,Game.displayStore.returnPooledItem(this.shipShadow),Game.displayStore.returnPooledItem(this.leftPlatformShadow),Game.displayStore.returnPooledItem(this.rightPlatformShadow);for(t=0;t<this.clouds.length;t++)Game.displayStore.returnPooledItem(this.clouds[t].cloud);if(0==Game.isLowEndIPad){for(t=0;t<this.riverParticles.length;t++)Game.displayStore.returnPooledItem(this.riverParticles[t].sprite);for(t=0;t<this.duckParticles.length;t++)Game.displayStore.returnPooledItem(this.duckParticles[t].sprite)}for(t=0;t<this.poppingParticles.length;t++)Game.displayStore.returnPooledItem(this.poppingParticles[t].sprite);for(t=0;t<this.popFrames.length;t++)Game.displayStore.returnPooledItem(this.popFrames[t].movieClip);for(t=0;t<this.background1Assets.length;t++)Game.displayStore.returnPooledItem(this.background1Assets[t].Sprite);for(t=0;t<this.background2Assets.length;t++)Game.displayStore.returnPooledItem(this.background2Assets[t].Sprite);for(t=0;t<this.background3Assets.length;t++)Game.displayStore.returnPooledItem(this.background3Assets[t].Sprite);for(t=0;t<this.foreground1Assets.length;t++)Game.displayStore.returnPooledItem(this.foreground1Assets[t].Sprite);for(t=0;t<this.heartIcons.length;t++)Game.displayStore.returnPooledItem(this.heartIcons[t].heart);for(t=0;t<this.riverAssets.length;t++)Game.displayStore.returnPooledItem(this.riverAssets[t].Sprite);Game.displayStore.returnPooledItem(this.leftWater),Game.displayStore.returnPooledItem(this.rightWater),Game.displayStore.returnPooledItem(this.backWater),Game.displayStore.returnPooledItem(this.tempWater),Game.displayStore.returnPooledItem(this.tempFloor),Game.displayStore.returnPooledItem(this.tempFloorLeft),Game.displayStore.returnPooledItem(this.tempFloorRight),this.waterSplash1.destroy(),this.waterSplash2.destroy(),this.waterSplash3.destroy(),this.foregroundLayerContainer1.removeAllChildren(),this.foregroundLayerContainer1=null,this.sceneAnimations=this.killTween(this.sceneAnimations),this.repeatingAnimations=this.killTween(this.repeatingAnimations);for(var t=0;t<this.tickets.length;t++)this.tickets[t].collectDelay=this.killTween(this.tickets[t].collectDelay),Game.ticketPool.returnTicket(this.tickets[t].ticket)},t}(Scene),AbducktionShipManager=function(){function e(e,t){this.scene=e,this.shipDirection="none",this.movementRate=0,this.thrustTarget={target:0},this.character=t,this.shipOuterContainer=Game.displayStore.getContainer("ufo-outer-container"),this.shipInnerContainer=Game.displayStore.getContainer("ufo-inner-container"),this.shipBody=Game.displayStore.getSprite("ufo-ship-body"),this.shipBodyBack=Game.displayStore.getSprite("ufo-ship-body-back"),this.shipTop=Game.displayStore.getSprite("ufo-ship-top"),this.shipBeam=Game.displayStore.getSprite("ufo-beam"),this.shipShadow=Game.displayStore.getSprite("ufo-shadow"),this.shipControlLeft=Game.displayStore.getSprite("ufo-ship-control-"+String(this.character)),this.shipControlRight=Game.displayStore.getSprite("ufo-ship-control-"+String(this.character)),this.shipCharacterArmLeft=Game.displayStore.getSprite("ufo-character-arm-"+String(this.character)),this.shipCharacterArmRight=Game.displayStore.getSprite("ufo-character-arm-"+String(this.character)),this.shipCharacterBody=Game.displayStore.getSprite("ufo-character-body-"+String(this.character)),this.shipCharacterHead=Game.displayStore.getSprite("ufo-character-head-"+String(this.character)),this.shipInnerContainer.addChild(this.shipBodyBack),this.shipInnerContainer.addChild(this.shipCharacterArmLeft),this.shipInnerContainer.addChild(this.shipCharacterArmRight),this.shipInnerContainer.addChild(this.shipCharacterBody),this.shipInnerContainer.addChild(this.shipCharacterHead),this.shipInnerContainer.addChild(this.shipControlLeft),this.shipInnerContainer.addChild(this.shipControlRight),this.shipInnerContainer.addChild(this.shipBody),this.shipInnerContainer.addChild(this.shipTop),this.shipBeamTriangle=new Array;for(var i=0;i<10;i++)this.shipBeamTriangle.push(Game.displayStore.getSprite("ufo-beam-triangle")),this.shipBeamTriangle[i].position.y=this.shipBody.position.y+this.shipBody.height-21,this.shipBeamTriangle[i].position.x=this.shipBody.position.x/2-63+20*i,this.shipBeamTriangle[i].tint=15686177,this.shipBeamTriangle[i].position.x>this.shipBody.position.x/2+70&&(this.shipBeamTriangle[i].visible=!1),this.shipInnerContainer.addChild(this.shipBeamTriangle[i]);this.shipCharacterHead.position.y=-20,this.shipCharacterBody.position.y=40,this.shipCharacterBody.scale.x=.9,this.shipCharacterHead.position.x=0,this.shipCharacterArmLeft.position.y=-22,this.shipCharacterArmRight.position.y=-22,this.shipCharacterArmRight.scale.x=-1,this.shipCharacterArmLeft.position.x=-10,this.shipCharacterArmRight.position.x=10,this.shipControlLeft.position.x=-50,this.shipControlRight.position.x=50,this.shipControlLeft.position.y=5,this.shipControlRight.position.y=5,this.shipInnerContainer.rotation=-.1,this.shipBody.position.y=-20,this.shipBodyBack.position.y=-30,this.shipOuterContainer.position.x=Game.stageWidth,this.shipOuterContainer.position.y=Game.stageHeight/2-150,this.shipOuterContainer.addChild(this.shipInnerContainer),this.scene.mainContainer.addChild(this.shipOuterContainer),this.animation=new TimelineMax,this.animation.add([TweenMax.to(this.shipOuterContainer.position,2,{y:"-=20",ease:Sine.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.shipInnerContainer,4,{rotation:.1,ease:Sine.easeInOut,yoyo:!0,repeat:-1})])}return e.prototype.moveShip=function(e){switch(this.shipDirection=e,e){case"left":1==this.scene.powerUpActive?this.thrustRate=TweenMax.to(this.thrustTarget,1,{target:-15,ease:Power1.easeOut}):this.thrustRate=TweenMax.to(this.thrustTarget,1,{target:-10,ease:Power1.easeOut});break;case"right":1==this.scene.powerUpActive?this.thrustRate=TweenMax.to(this.thrustTarget,1,{target:15,ease:Power1.easeOut}):this.thrustRate=TweenMax.to(this.thrustTarget,1,{target:10,ease:Power1.easeOut});break;case"none":this.thrustRate=TweenMax.to(this.thrustTarget,2.5,{target:0,ease:Elastic.easeOut.config(1,.75)})}},e.prototype.tick=function(){switch(this.shipOuterContainer.position.x+=this.thrustTarget.target,this.shipNoThrust=this.shipOuterContainer.position.x-this.thrustTarget.target,this.scene.shipThrust=this.thrustTarget.target,this.shipDirection){case"left":this.shipControlLeft.rotation=this.scene.simpleEase(this.shipControlLeft.rotation,-.4,20),this.shipControlRight.rotation=this.scene.simpleEase(this.shipControlRight.rotation,-.4,20),this.shipCharacterBody.position.x=this.scene.simpleEase(this.shipCharacterBody.position.x,2,15),this.shipOuterContainer.rotation=this.scene.simpleEase(this.shipOuterContainer.rotation,-.15,20);break;case"right":this.shipControlLeft.rotation=this.scene.simpleEase(this.shipControlLeft.rotation,.4,20),this.shipControlRight.rotation=this.scene.simpleEase(this.shipControlRight.rotation,.4,20),this.shipCharacterBody.position.x=this.scene.simpleEase(this.shipCharacterBody.position.x,-2,15),this.shipOuterContainer.rotation=this.scene.simpleEase(this.shipOuterContainer.rotation,.15,20);break;case"none":this.shipControlLeft.rotation=this.scene.simpleEase(this.shipControlLeft.rotation,0,20),this.shipControlRight.rotation=this.scene.simpleEase(this.shipControlRight.rotation,0,20),this.shipCharacterBody.position.x=this.scene.simpleEase(this.shipCharacterBody.position.x,0,15),this.shipOuterContainer.rotation=this.scene.simpleEase(this.shipOuterContainer.rotation,0,20)}for(var e=0;e<this.shipBeamTriangle.length;e++){var t=this.shipBeamTriangle[e];t.position.x++,t.position.x>this.shipBody.position.x/2+60&&(t.position.x=this.shipBody.position.x/2-60)}},e.prototype.pause=function(){this.scene.pauseResumeTween(this.animation,"pause")},e.prototype.resume=function(){this.scene.pauseResumeTween(this.animation,"resume")},e.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.shipControlLeft),Game.displayStore.returnPooledItem(this.shipControlRight),Game.displayStore.returnPooledItem(this.shipCharacterArmLeft),Game.displayStore.returnPooledItem(this.shipCharacterArmRight);for(var e=0;e<this.shipBeamTriangle.length;e++)Game.displayStore.returnPooledItem(this.shipBeamTriangle[e]);Game.displayStore.returnPooledItem(this.shipCharacterArmLeft),Game.displayStore.returnPooledItem(this.shipCharacterArmRight),Game.displayStore.returnPooledItem(this.shipControlLeft),Game.displayStore.returnPooledItem(this.shipControlRight),this.animation=this.scene.killTween(this.animation)},e}(),AbducktionInputManager=function(){function e(e){this.scene=e,this.hitAreaSprite=Game.displayStore.getSprite("abducktion/blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.currentAngle=0,this.enginePlaying=!1,this.maxAngleDiff=1.4,this.minAngleDiff=.1,this.keyboardDown=!1,this.driveForce=0,this.targetDriveForce=0,this.steeringForce=0,this.targetSteeringForce=0,this.joystickLeftActive=!1,this.joystickRightActive=!1,this.currentTouches=[],this.currentTouches[0]=new PIXI.Point,this.currentTouches[1]=new PIXI.Point,this.startTouchPos=new PIXI.Point(0,0),this.currentTouchPos=new PIXI.Point(0,0),this.rightKeyPos=new PIXI.Point(Game.stageWidth/2,Game.stageHeight/2),this.leftKeyPos=new PIXI.Point(Game.stageWidth/2,Game.stageHeight/2),this.keyboardInput="none",this.startAngle=0,this.currentAngle=0,this.lastAngle=0,this.keyboardDown=!1,this.angleDir=0,this.lastAngleDir=0,this.walkForce=0,this.mouseDistance=0,this.angleLimit=.7,this.multipleEventFixBoolean=!1,this.scene.container.addChild(this.hitAreaSprite)}return e.prototype.initControls=function(){},e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;0==Game.onDesktop&&(e.on("touchstart",function(e){t.inputDown(t,e.data.originalEvent.touches)}),e.on("touchmove",function(e){t.inputMove(t,e.data.originalEvent.touches)}),e.on("touchend",function(e){t.inputUp(t,e.data.originalEvent.touches)}),e.on("touchendoutside",function(e){t.inputUp(t,e.data.originalEvent.touches)}))},e.prototype.inputDown=function(e,t){for(var i=0;i<t.length;i++)t[i].clientX/Game.windowScaleFactor<Game.stageWidth/2&&0==e.joystickLeftActive&&(e.joystickLeftActive=!0,e.leftTouchIndex=i,e.currentTouches[i].x=e.joystickLeft.position.x,e.currentTouches[i].y=e.joystickLeft.position.y),t[i].clientX/Game.windowScaleFactor>Game.stageWidth/2&&e.joystickRightActive;e.mouseDown=!0},e.prototype.mouseMove=function(e,t){},e.prototype.inputUp=function(e,t){t[0]||(e.mouseDown=!1,e.walkForce=0,e.mouseDistance=0,e.leftTouchIndex=null,e.rightTouchIndex=null,e.joystickRightActive=!1),t[0]&&(t[0].clientX/Game.windowScaleFactor>Game.stageWidth/2&&(e.joystickLeftActive=!1),t[0].clientX/Game.windowScaleFactor<Game.stageWidth/2&&(1==e.leftTouchIndex&&(e.currentTouches[0].x=e.currentTouches[1].x,e.currentTouches[0].y=e.currentTouches[1].y),e.mouseDistance=0,e.joystickRightActive=!1,e.leftTouchIndex=0,e.rightTouchIndex=null))},e.prototype.inputMove=function(e,t){e.currentTouches[0].x=(t[0].clientX-Game.gameOffset.x)/Game.windowScaleFactor,e.currentTouches[0].y=(t[0].clientY-Game.gameOffset.y)/Game.windowScaleFactor,t.length>1&&(e.currentTouches[1].x=(t[1].clientX-Game.gameOffset.x)/Game.windowScaleFactor,e.currentTouches[1].y=(t[1].clientY-Game.gameOffset.y)/Game.windowScaleFactor)},e.prototype.keyOut=function(e){"left"!=e&&"right"!=e||(this.targetSteeringForce=0),"up"!=e&&"down"!=e||(this.targetDriveForce=0)},e.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},e.prototype.getInputAngle=function(){var e=this.currentAngle;return e>this.maxAngleDiff&&(e=this.maxAngleDiff),e<this.minAngleDiff&&(e=this.minAngleDiff),e},e.prototype.keyDown=function(e){switch(this.keyboardInput=e,e){case"left":.5!=this.targetSteeringForce&&(this.targetSteeringForce=.5);break;case"right":-.5!=this.targetSteeringForce&&(this.targetSteeringForce=-.5);break;case"down":this.targetDriveForce=-100;break;case"up":130!=this.targetDriveForce&&(this.targetDriveForce=130);break;case"spacebar":this.keyboardInput="spacebar"}this.keyboardDown=!0},e.prototype.keyUp=function(e){switch(e){case"left":case"right":this.targetSteeringForce=0;break;case"down":this.targetDriveForce=0;break;case"up":if(this.targetDriveForce=0,this.engineSoundDelay=this.scene.killTween(this.engineSoundDelay),1==this.scene.paused)return}this.keyboardDown=!1},e.prototype.activatePowerup=function(){this.targetDriveForce},e.prototype.deactivatePowerup=function(){},e.prototype.tick=function(){this.targetDriveForce>100&&0==this.enginePlaying&&(this.enginePlaying=!0),0==this.targetDriveForce&&1==this.enginePlaying&&(this.enginePlaying=!1),this.steeringForce+=(this.targetSteeringForce-this.steeringForce)/1,this.driveForce+=(this.targetDriveForce-this.driveForce)/10},e.prototype.pause=function(){},e.prototype.resume=function(){this.scene.pauseResumeTween(this.engineSoundDelay,"resume")},e.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},e}(),AbducktionDuckManager=function(){function e(e){this.scene=e,this.powerupActive=!1,this.duckArray=new Array,this.activeDucks=0,this.duckRange=30,this.hookedDuck=!1,this.hasHookedSingleDuck=!1,this.spawnTimer=60,this.spawnTimerDefault=60,this.maximumActiveDucks=1,this.totalDucks=10,this.minSpawnX=480,this.maxSpawnX=this.scene.playAreaWidth-480,this.duckHeights=[Game.stageHeight-30,Game.stageHeight-190,Game.stageHeight-290];for(var t=0;t<this.totalDucks;t++){t>=this.totalDucks/2?this.duckArray.push({active:!1,sprite:Game.displayStore.getSprite("red-duck"),shield:Game.displayStore.getSprite("duck-shield"),status:"inactive",level:0,type:"red",timeline:new TimelineMax,duckDying:!1,waterParticleTimer:0}):this.duckArray.push({active:!1,sprite:Game.displayStore.getSprite("blue-duck"),shield:Game.displayStore.getSprite("duck-shield"),status:"inactive",level:0,type:"blue",timeline:new TimelineMax,duckDying:!1,waterParticleTimer:0});var i=Game.getRandom(0,1,!0);this.duckArray[t].sprite.scale.x=1==i?1:-1,this.duckArray[t].sprite.rotation=.1,this.duckArray[t].sprite.position.x=Game.getRandom(this.minSpawnX,this.maxSpawnX),this.duckArray[t].sprite.position.y=Game.stageHeight+250,this.duckArray[t].shield.visible=!1,this.scene.mainContainer.addChild(this.duckArray[t].sprite),this.scene.mainContainer.addChild(this.duckArray[t].shield)}this.duckArray=this.scene.shuffleArray(this.duckArray)}return e.prototype.setDifficulty=function(e){switch(e){case 1:this.spawnTimer=220,this.spawnTimerDefault=220,this.maximumActiveDucks=2;break;case 2:this.spawnTimer=200,this.spawnTimerDefault=200,this.maximumActiveDucks=4;break;case 3:this.spawnTimer=180,this.spawnTimerDefault=180,this.maximumActiveDucks=5;break;case 4:this.spawnTimer=160,this.spawnTimerDefault=160,this.maximumActiveDucks=7}},e.prototype.returnDuckPosition=function(e){return this.duckArray[e].sprite.position.x},e.prototype.returnCloseDuck=function(e){for(var t=0;t<this.duckArray.length;t++)if(1==this.duckArray[t].active&&this.duckArray[t].sprite.position.x<e+this.duckRange&&this.duckArray[t].sprite.position.x>e-this.duckRange){if("inactive"==this.duckArray[t].status)break;this.duckArray[t].status="hooked",this.scene.pauseTimer(t),this.hookedDuck=!0,0==this.hasHookedSingleDuck&&(this.hasHookedSingleDuck=!0),this.currentHookedDuckID=t,this.scene.duckGrabSuccess(),this.increaseDuckLevel();break}},e.prototype.laserCheckDuck=function(e){if(1==this.powerupActive)return!1;if(0==this.hookedDuck)return!1;switch(e){case 1:if(this.isBetween(this.duckArray[this.currentHookedDuckID].sprite.position.y,this.duckHeights[1]-15,this.duckHeights[1]+15))return 1!=this.duckArray[this.currentHookedDuckID].duckDying&&(this.duckArray[this.currentHookedDuckID].duckDying=!0,this.popDuck("laser",this.currentHookedDuckID),this.scene.removeLife(),this.scene.stopTimer(this.currentHookedDuckID),this.scene.resetShipBeam(),!0);break;case 2:if(this.isBetween(this.duckArray[this.currentHookedDuckID].sprite.position.y,this.duckHeights[2]-15,this.duckHeights[2]+15))return 1!=this.duckArray[this.currentHookedDuckID].duckDying&&(this.duckArray[this.currentHookedDuckID].duckDying=!0,this.popDuck("laser",this.currentHookedDuckID),this.scene.removeLife(),this.scene.stopTimer(this.currentHookedDuckID),this.scene.resetShipBeam(),!0)}},e.prototype.removeDuck=function(e,t,i){switch(i.duckArray[t].status="inactive",i=i||this,i.activeDucks--,e){case"portal":break;case"pop":i.scene.stopTimer(t),i.scene.removeLife();break;case"laser":break;case"timer":i.scene.removeLife(),i.scene.stopTimer(t)}"hooked"==i.duckArray[t].status&&(i.hookedDuck=!1),i.duckArray[t].timeline=i.scene.killTween(i.duckArray[t].timeline),i.duckArray[t].timeline=new TimelineMax,i.duckArray[t].sprite.position.y=Game.stageHeight+250,i.duckArray[t].sprite.rotation=0,i.duckArray[t].level=0,i.duckArray[t].sprite.alpha=1,i.duckArray[t].sprite.scale.x=i.duckArray[t].sprite.scale.y=1,i.duckArray[t].sprite.position.x=Game.getRandom(i.minSpawnX,i.maxSpawnX),i.duckArray[t].active=!1},e.prototype.activatePowerUp=function(){this.powerupActive=!0;for(var e=0;e<this.duckArray.length;e++)this.duckArray[e].shield.visible=!0},e.prototype.deactivatePowerUp=function(){this.powerupActive=!1;for(var e=0;e<this.duckArray.length;e++)this.duckArray[e].shield.visible=!1},e.prototype.addScore=function(e){this.scene.addScore(e)},e.prototype.portalDuck=function(e,t,i){switch(this.scene.stopTimer(t),this.duckArray[t].timeline=this.scene.killTween(this.duckArray[t].timeline),this.duckArray[t].timeline=new TimelineMax,e){case"portal":this.duckArray[t].status="inactive",this.duckArray[t].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.duckArray[t].timeline.add([TweenMax.to(this.duckArray[t].sprite.position,.2,{y:Game.stageHeight-110,ease:Power1.easeInOut}),TweenMax.to(this.duckArray[t].sprite.position,.2,{x:i,ease:Power1.easeInOut}),TweenMax.to(this.duckArray[t].sprite,.3,{rotation:0,ease:Power0.easeOut}),TweenMax.to(this.duckArray[t].sprite,.3,{alpha:0,ease:Power0.easeOut,delay:.2}),TweenMax.to(this.duckArray[t].sprite.scale,.2,{x:0,ease:Power2.easeIn,delay:.2}),TweenMax.to(this.duckArray[t].sprite.scale,.2,{y:0,ease:Power2.easeIn,delay:.2}),TweenMax.delayedCall(.4,function(){this.addScore(i)},[this],this)]);break;case"pop":this.duckArray[t].sprite.scale.x<0?this.duckArray[t].timeline.add([TweenMax.to(this.duckArray[t].sprite.position,.2,{y:Game.stageHeight-110,ease:Power1.easeInOut}),TweenMax.to(this.duckArray[t].sprite.position,.2,{x:i,ease:Power1.easeInOut}),TweenMax.to(this.duckArray[t].sprite,1,{rotation:0,ease:Power0.easeOut}),TweenMax.to(this.duckArray[t].sprite.scale,.5,{x:-2,ease:Power2.easeIn,delay:.1}),TweenMax.to(this.duckArray[t].sprite.scale,.5,{y:2,ease:Power2.easeIn,delay:.1}),TweenMax.to(this.duckArray[t].sprite,.05,{alpha:0,ease:Power0.easeOut,delay:.5}),TweenMax.delayedCall(.3,this.scene.shakeCamera,[this.scene]),TweenMax.delayedCall(.4,this.requestPop,[this.duckArray[t].type,this.duckArray[t].sprite.position.x,this.duckArray[t].sprite.position.y],this)]):this.duckArray[t].timeline.add([TweenMax.to(this.duckArray[t].sprite.position,.4,{y:Game.stageHeight-110,ease:Power1.easeInOut}),TweenMax.to(this.duckArray[t].sprite.position,.4,{x:i,ease:Power1.easeInOut}),TweenMax.to(this.duckArray[t].sprite,1,{rotation:0,ease:Power0.easeOut}),TweenMax.to(this.duckArray[t].sprite.scale,.5,{x:2,ease:Power2.easeIn,delay:.1}),TweenMax.to(this.duckArray[t].sprite.scale,.5,{y:2,ease:Power2.easeIn,delay:0}),TweenMax.to(this.duckArray[t].sprite,.05,{alpha:0,ease:Power0.easeOut,delay:.5}),TweenMax.delayedCall(.3,this.scene.shakeCamera,[this.scene]),TweenMax.delayedCall(.4,this.requestPop,[this.duckArray[t].type,this.duckArray[t].sprite.position.x,this.duckArray[t].sprite.position.y],this)])}this.removeDelay=TweenMax.delayedCall(1,this.removeDuck,[e,t,this])},e.prototype.requestPop=function(e,t,i){this.scene.popAnimation(e,t,i),Game.playSound("abducktion/bang-"+Game.getRandom(1,4,!0)+".mp3",.8),this.scene.characterVoiceLine("negative")},e.prototype.isBetween=function(e,t,i){return e<i&&e>t},e.prototype.popDuck=function(e,t){this.scene.stopTimer(t),this.scene.popAnimation(this.duckArray[t].type,this.duckArray[t].sprite.position.x,this.duckArray[t].sprite.position.y-20),Game.playSound("abducktion/expand-"+Game.getRandom(1,2,!0)+".mp3"),Game.playSound("abducktion/bang-"+Game.getRandom(1,4,!0)+".mp3"),this.duckArray[t].status="inactive",this.duckArray[t].timeline=this.scene.killTween(this.duckArray[t].timeline),this.duckArray[t].timeline=new TimelineMax,this.duckArray[t].sprite.scale.x<0?this.duckArray[t].timeline.add([TweenMax.to(this.duckArray[t].sprite,1,{rotation:0,ease:Power0.easeOut}),TweenMax.to(this.duckArray[t].sprite.scale,.2,{x:-2,ease:Power2.easeIn}),TweenMax.to(this.duckArray[t].sprite.scale,.2,{y:2,ease:Power2.easeIn}),TweenMax.to(this.duckArray[t].sprite,.05,{alpha:0,ease:Power0.easeOut,delay:.25}),TweenMax.delayedCall(.1,this.scene.shakeCamera,[this.scene])]):this.duckArray[t].timeline.add([TweenMax.to(this.duckArray[t].sprite,1,{rotation:0,ease:Power0.easeOut}),TweenMax.to(this.duckArray[t].sprite.scale,.2,{x:2,ease:Power2.easeIn}),TweenMax.to(this.duckArray[t].sprite.scale,.2,{y:2,ease:Power2.easeIn}),TweenMax.to(this.duckArray[t].sprite,.05,{alpha:0,ease:Power0.easeOut,delay:.25}),TweenMax.delayedCall(.1,this.scene.shakeCamera,[this.scene])]),this.removeDelay=TweenMax.delayedCall(1,this.removeDuck,[e,t,this])},e.prototype.setDuckHeight=function(e,t){switch(this.duckArray[e].timeline=this.scene.killTween(this.duckArray[e].timeline),this.duckArray[e].timeline=new TimelineMax,t){case 0:if(this.duckArray[e].status="water",this.duckArray[e].waterParticleTimer=-10,this.duckArray[e].sprite.position.x<360)return this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite.position,.3,{y:Game.stageHeight-140,ease:Power1.easeOut}),0),this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite.position,1,{y:Game.stageHeight-110,ease:Back.easeOut})),this.scene.resetShipBeam(),void this.duckArray[e].timeline.add(TweenMax.delayedCall(.2,function(){this.scene.platformDuckCheck(this.duckArray[e].type,"left",e),this.hookedDuck=!1},[this],this),0);if(this.duckArray[e].sprite.position.x>this.scene.playAreaWidth-360)return this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite.position,.3,{y:Game.stageHeight-140,ease:Power1.easeOut}),0),this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite.position,1,{y:Game.stageHeight-110,ease:Back.easeOut})),this.scene.resetShipBeam(),void this.duckArray[e].timeline.add(TweenMax.delayedCall(.2,function(){this.scene.platformDuckCheck(this.duckArray[e].type,"right",e),this.hookedDuck=!1},[this],this),0);this.scene.resumeTimer(e),this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite.position,.3,{y:this.duckHeights[0]+30,ease:Power1.easeOut}),0),this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite.position,1,{y:this.duckHeights[0],ease:Back.easeOut})),this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite,1,{rotation:.1,ease:Power0.easeOut}),0),this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite.position,2,{y:"+=7",yoyo:!0,repeat:-1,ease:Power1.easeOut}),1.3),this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite,1.5,{rotation:-.1,ease:Power1.easeOut,yoyo:!0,repeat:-1}),1.3),this.hookedDuck=!1,this.scene.getSplash(this.duckArray[e].sprite.position.x),this.duckArray[e].sprite.setRegPoint(.5,1);for(var i=0;i<this.duckArray.length;i++)i!=e&&1==this.duckArray[i].active&&this.duckArray[i].sprite.position.x>this.duckArray[e].sprite.position.x-30&&this.duckArray[i].sprite.position.x<this.duckArray[e].sprite.position.x+30&&(this.duckArray[e].sprite.position.x<this.scene.playAreaWidth/2?this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite.position,1,{x:"+=40",ease:Back.easeOut}),0):this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite.position,1,{x:"-=40",ease:Back.easeOut}),0));break;case 1:this.duckArray[e].sprite.setRegPoint(.5,.5),this.duckArray[e].status="hooked",this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite.position,.3,{y:this.duckHeights[1]-10,ease:Power1.easeOut}),0),this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite.position,1,{y:this.duckHeights[1],ease:Back.easeOut})),this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite.position,2,{y:"+=20",repeat:-1,yoyo:!0,ease:Power1.easeInOut}));break;case 2:this.duckArray[e].sprite.setRegPoint(.5,.5),this.duckArray[e].status="hooked",this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite.position,.3,{y:this.duckHeights[2]-10,ease:Power1.easeOut}),0),this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite.position,1,{y:this.duckHeights[2],ease:Back.easeOut})),this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite.position,2,{y:"+=20",repeat:-1,yoyo:!0,ease:Power1.easeInOut}))}this.duckArray[e].sprite.position.y},e.prototype.dropDuckLevel=function(){if(0!=this.hasHookedSingleDuck&&1!=this.duckArray[this.currentHookedDuckID].duckDying)for(var e=0;e<this.duckArray.length;e++)"hooked"==this.duckArray[e].status&&(this.duckArray[e].level--,this.setDuckHeight(e,this.duckArray[e].level),Game.playSound("abducktion/duck-move-"+Game.getRandom(1,3,!0)+".mp3"))},e.prototype.increaseDuckLevel=function(){for(var e=0;e<this.duckArray.length;e++)if("hooked"==this.duckArray[e].status){if(2==this.duckArray[e].level)return;this.duckArray[e].level++,this.setDuckHeight(e,this.duckArray[e].level),Game.playSound("abducktion/duck-move-"+Game.getRandom(1,3,!0)+".mp3")}},e.prototype.activateDuck=function(){var e=Game.getRandom(0,this.totalDucks-1,!0),t=Game.getRandom(0,1);0==this.duckArray[e].active?(this.duckArray[e].active=!0,this.duckArray[e].duckDying=!1,this.duckArray[e].sprite.blendMode=PIXI.BLEND_MODES.NORMAL,this.duckArray[e].waterParticleTimer=-20,this.duckArray[e].level=0,this.duckArray[e].sprite.setRegPoint(.5,1),this.duckArray[e].status="active",this.activeDucks++,this.duckArray[e].sprite.scale.x=t>=.5?-1:1,this.duckArray[e].sprite.scale.y=1,this.duckArray[e].sprite.alpha=1,this.scene.startTimer(e,this.duckArray[e].sprite.position.x,this.duckArray[e].sprite.position.y),this.duckArray[e].timeline=this.scene.killTween(this.duckArray[e].timeline),this.duckArray[e].timeline=new TimelineMax,this.duckArray[e].timeline.add([TweenMax.to(this.duckArray[e].sprite.position,.8,{y:this.duckHeights[0]+10,ease:Power1.easeOut}),TweenMax.to(this.duckArray[e].sprite.position,.7,{y:this.duckHeights[0],ease:Elastic.easeOut}),TweenMax.to(this.duckArray[e].sprite.position,.8,{y:this.duckHeights[0],ease:Back.easeOut})]),this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite.position,2,{y:"+=7",yoyo:!0,repeat:-1,ease:Power1.easeInOut}),1),this.duckArray[e].timeline.add(TweenMax.to(this.duckArray[e].sprite,1.5,{rotation:-.1,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),1),this.scene.getSplash(this.duckArray[e].sprite.position.x),Game.playSound("abducktion/scale-up.mp3")):this.activateDuck()},e.prototype.tick=function(){this.activeDucks<this.maximumActiveDucks&&--this.spawnTimer<=0&&(this.activateDuck(),this.spawnTimer=this.spawnTimerDefault);for(var e=0;e<this.duckArray.length;e++)1==this.powerupActive&&(this.duckArray[e].shield.position.x=this.duckArray[e].sprite.position.x,"hooked"==this.duckArray[e].status?this.duckArray[e].shield.position.y=this.duckArray[e].sprite.position.y:this.duckArray[e].shield.position.y=this.duckArray[e].sprite.position.y-this.duckArray[e].sprite.height/2,this.duckArray[e].shield.alpha=this.duckArray[e].sprite.alpha),1==this.duckArray[e].active&&("hooked"==this.duckArray[e].status&&(this.duckArray[e].sprite.rotation+=.02,this.duckArray[e].sprite.rotation>2*Math.PI&&(this.duckArray[e].sprite.rotation=0),this.duckArray[e].sprite.position.x+=(this.scene.getShipPosition()-this.duckArray[e].sprite.position.x)/2),0==Game.isLowEndIPad&&"hooked"!=this.duckArray[e].status&&++this.duckArray[e].waterParticleTimer>30&&this.duckArray[e].sprite.position.x>420&&this.duckArray[e].sprite.position.x<this.scene.playAreaWidth-420&&(this.duckArray[e].waterParticleTimer=0,this.scene.placeDuckParticle(this.duckArray[e].sprite.position.x,this.duckArray[e].sprite.position.y-15)))},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){for(var e=0;e<this.duckArray.length;e++)Game.displayStore.returnPooledItem(this.duckArray[e].sprite),Game.displayStore.returnPooledItem(this.duckArray[e].shield),this.duckArray[e].timeline=this.scene.killTween(this.duckArray[e].timeline)},e}(),AbducktionBeamManager=function(){function e(e){if(this.scene=e,this.beamActive=!1,this.beamLevel=0,this.targetAlpha=.1,this.beam=Game.displayStore.getSprite("ufo-beam"),this.beam.scale.x=0,this.beamTimer=0,this.scene.mainContainer.addChild(this.beam),this.targetLength=Game.stageHeight-210,0==Game.isLowEndIPad){this.beamParticles=new Array;for(var t=0;t<30;t++)this.beamParticles.push({sprite:Game.displayStore.getSprite("beam-particle"),active:!1,scaleTarget:1,xOffset:0}),this.beamParticles[t].sprite.position.x=Game.stageWidth/2,this.beamParticles[t].sprite.alpha=0,this.scene.mainContainer.addChild(this.beamParticles[t].sprite)}this.beamScale(),this.targetLength=Game.stageHeight-210,this.beam.blendMode=PIXI.BLEND_MODES.ADD}return e.prototype.getBeamStatus=function(){return{active:this.beamActive,level:this.beamLevel}},e.prototype.resetBeam=function(){this.beamActive=!1,this.beamLevel=0,this.beamScale()},e.prototype.dropDuckLevel=function(){this.beamLevel>0&&this.beamLevel--,0==this.beamLevel&&(this.beamActive=!1),this.beamScale()},e.prototype.beamScale=function(){switch(this.beamLevel){case 0:this.targetAlpha=.6,this.targetScale=.4;break;case 1:this.targetAlpha=.8,this.targetScale=.8;break;case 2:this.targetAlpha=.9,this.targetScale=1}},e.prototype.increaseDuckLevel=function(){this.beamLevel<=1&&this.beamLevel++,this.beamScale()},e.prototype.setBeamLevel=function(e){this.beamLevel=e,0==this.beamLevel?this.beamActive=!1:this.beamActive=!0,this.beamScale()},e.prototype.placeParticle=function(){for(var e=0;e<this.beamParticles.length;e++){var t=this.beamParticles[e];if(0==t.active){t.active=!0,t.xOffset=Game.getRandom(-this.beam.width/2,this.beam.width/2),t.sprite.position.x=this.beam.position.x+t.xOffset,t.sprite.position.y=this.beam.position.y+this.beam.height,t.scaleTarget=Game.getRandom(.8,1.5),t.sprite.scale.x=0,t.sprite.scale.y=0,t.sprite.alpha=1;break}}},e.prototype.tick=function(){if(this.beam.position.y=200,this.beam.position.x=this.scene.shipXpos,this.scene.shipXpos<420||this.scene.shipXpos>this.scene.playAreaWidth-420?this.targetLength=Game.stageHeight-305:this.targetLength=Game.stageHeight-210,this.beam.height=this.scene.simpleEase(this.beam.height,this.targetLength,5),this.beam.alpha=this.scene.simpleEase(this.beam.alpha,this.targetAlpha,20),this.beam.scale.x=this.scene.simpleEase(this.beam.scale.x,this.targetScale,10),this.scene.beamBaseBack.scale.x=this.scene.simpleEase(this.scene.beamBaseBack.scale.x,this.targetScale+.2,10),this.scene.beamBaseFront.scale.x=this.scene.simpleEase(this.scene.beamBaseFront.scale.x,this.targetScale+.2,10),this.beam.alpha=Game.getRandom(this.beam.alpha-.05,this.beam.alpha+.05),0==Game.isLowEndIPad){++this.beamTimer>5&&(this.placeParticle(),this.beamTimer=0);for(var e=0;e<this.beamParticles.length;e++){var t=this.beamParticles[e];1==t.active&&(t.sprite.scale.x=this.scene.simpleEase(t.sprite.scale.x,t.scaleTarget,30),t.sprite.scale.y=this.scene.simpleEase(t.sprite.scale.y,t.scaleTarget,40),t.xOffset=this.scene.simpleEase(t.xOffset,0,70),t.sprite.position.x=this.beam.position.x+t.xOffset,t.sprite.position.y=this.scene.simpleEase(t.sprite.position.y,this.beam.position.y-50,50),t.sprite.position.y<this.beam.position.y+10&&(t.active=!1,t.sprite.alpha=0))}}},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){if(0==Game.isLowEndIPad)for(var e=0;e<this.beamParticles.length;e++)Game.displayStore.returnPooledItem(this.beamParticles[e].sprite)},e}(),AbducktionPlatform=function(){function e(e,t){switch(this.scene=e,this.type=t,this.platformPortal1=Game.displayStore.getSprite("platform-portal-1"),this.platformPortal2=Game.displayStore.getSprite("platform-portal-2"),this.powerUpActive=!1,this.placeParticleTimer=0,this.portalParticlesPop=0,this.particleTimer=0,this.particleTimerLimit=5,this.platformPortal1.position.y=-40,this.platformPortal2.position.y=-40,this.portalTimeline=new TimelineMax,this.portalContainer=Game.displayStore.getContainer("portal-container"),this.portalCore=Game.displayStore.getSprite("portal-core"),this.portalCoreOuter=Game.displayStore.getSprite("portal-core-outer"),this.portalOuter1=Game.displayStore.getSprite("portal-outer-1"),this.portalOuter2=Game.displayStore.getSprite("portal-outer-2"),this.portalOuter3=Game.displayStore.getSprite("portal-outer-3"),this.portalGlow=Game.displayStore.getSprite("platform-portal-glow"),this.floatingParticleLeft=new Array,this.floatingParticleRight=new Array,this.portalParticles=new Array,this.type){case"red":this.portalCoreColour=Game.displayStore.getSprite("portal-core-red"),this.platformContainer=Game.displayStore.getContainer("platform-container-1"),this.platformBase=Game.displayStore.getSprite("platform-base"),this.platformContainer.position.x=250,this.platformPortal1.tint=16765440,this.platformPortal2.tint=16765440,this.defaultTint=16729413,this.portalGlow.tint=16741235;break;case"blue":this.portalCoreColour=Game.displayStore.getSprite("portal-core-blue"),this.platformContainer=Game.displayStore.getContainer("platform-container-2"),this.platformBase=Game.displayStore.getSprite("platform-base-dark"),this.platformContainer.position.x=this.scene.playAreaWidth-250,this.platformPortal1.tint=5419263,this.platformPortal2.tint=5419263,this.defaultTint=5419263,this.portalGlow.tint=4376575}for(i=0;i<5;i++)this.floatingParticleLeft.push({sprite:Game.displayStore.getSprite("platform-particle"),active:!1}),this.platformContainer.addChild(this.floatingParticleLeft[i].sprite),this.floatingParticleLeft[i].sprite.blendMode=PIXI.BLEND_MODES.ADD;for(i=0;i<5;i++)this.floatingParticleRight.push({sprite:Game.displayStore.getSprite("platform-particle"),active:!1}),this.platformContainer.addChild(this.floatingParticleRight[i].sprite),this.floatingParticleRight[i].sprite.blendMode=PIXI.BLEND_MODES.ADD;if(this.platformContainer.addChild(this.platformBase),this.portalContainer.addChild(this.portalCoreColour),this.portalContainer.addChild(this.portalOuter3),this.portalContainer.addChild(this.portalOuter2),this.portalContainer.addChild(this.portalOuter3),this.portalContainer.addChild(this.portalCoreOuter),this.portalContainer.addChild(this.portalCore),this.platformContainer.addChild(this.portalContainer),this.platformContainer.addChild(this.portalGlow),this.portalGlow.blendMode=PIXI.BLEND_MODES.ADD,0==Game.isLowEndIPad)for(var i=0;i<50;i++)this.portalParticles.push({particle:Game.displayStore.getSprite("portal-particle"),active:!1,yVelocity:0,xVelocity:0}),this.platformContainer.addChild(this.portalParticles[i].particle),this.portalParticles[i].particle.visible=!1,this.portalParticles[i].particle.blendMode=PIXI.BLEND_MODES.ADD;this.portalCore.blendMode=PIXI.BLEND_MODES.ADD,this.portalCoreColour.blendMode=PIXI.BLEND_MODES.ADD,this.portalContainer.scale.y=.2,this.portalContainer.position.y=-45,this.portalGlow.position.y=-30,this.portalGlow.alpha=.3,this.portalGlow.scale.y=.7,this.portalTimeline.add([TweenMax.to(this.portalCore,1,{rotation:2*Math.PI,ease:Linear.easeNone,repeat:-1}),TweenMax.to(this.portalOuter3,2,{rotation:2*Math.PI,ease:Linear.easeNone,repeat:-1}),TweenMax.to(this.portalOuter2,1.8,{rotation:2*Math.PI,ease:Linear.easeNone,repeat:-1}),TweenMax.to(this.portalOuter1,1.6,{rotation:2*Math.PI,ease:Linear.easeNone,repeat:-1}),TweenMax.to(this.portalCoreOuter,1.5,{rotation:2*-Math.PI,ease:Linear.easeNone,repeat:-1}),TweenMax.to(this.portalContainer.scale,2,{x:1.1,yoyo:!0,repeat:-1,ease:Back.easeInOut}),TweenMax.to(this.portalCore.scale,1,{x:.8,yoyo:!0,repeat:-1,ease:Sine.easeInOut}),TweenMax.to(this.portalCore.scale,1,{y:.8,yoyo:!0,repeat:-1,ease:Sine.easeInOut}),TweenMax.to(this.portalCoreColour,1,{alpha:.8,yoyo:!0,repeat:-1,ease:Sine.easeInOut}),TweenMax.to(this.portalGlow.scale,2,{y:.9,yoyo:!0,repeat:-1,ease:Sine.easeInOut}),TweenMax.to(this.portalGlow,1,{alpha:.5,yoyo:!0,repeat:-1,ease:Sine.easeInOut})],0),this.portalGlowTween=TweenMax.to(this.portalGlow,1,{alpha:.5,yoyo:!0,repeat:-1,ease:Sine.easeInOut}),this.scene.mainContainer.addChild(this.platformContainer),this.platformContainer.position.y=Game.stageHeight-90,this.platformTween=TweenMax.to(this.platformContainer.position,1,{y:"+=10",repeat:-1,yoyo:!0,ease:Power1.easeInOut})}return e.prototype.setPowerUpActive=function(){this.powerUpActive=!0},e.prototype.setPowerUpInactive=function(){this.powerUpActive=!1,this.platformPortal1.tint=this.defaultTint,this.platformPortal2.tint=this.defaultTint},e.prototype.platformDuckCheck=function(e,t){if(1==this.scene.powerUpActive)return this.portalGlowTween=this.scene.killTween(this.portalGlowTween),this.portalGlow.alpha=1.3,this.glowResetDelay=TweenMax.delayedCall(1,function(){this.portalGlowTween=TweenMax.to(this.portalGlow,1,{alpha:.3,yoyo:!0,repeat:-1,ease:Sine.easeInOut})},[null],this),this.scene.portalDuck("portal",t,this.platformContainer.position.x),this.portalParticlesPop=0,void(0==Game.isLowEndIPad&&this.placePortalParticle(!0));e==this.type?(this.portalGlowTween=this.scene.killTween(this.portalGlowTween),this.portalGlow.alpha=1.3,this.glowResetDelay=TweenMax.delayedCall(1,function(){this.portalGlowTween=TweenMax.to(this.portalGlow,1,{alpha:.3,yoyo:!0,repeat:-1,ease:Sine.easeInOut})},[null],this),this.scene.portalDuck("portal",t,this.platformContainer.position.x),this.portalParticlesPop=0,0==Game.isLowEndIPad&&this.placePortalParticle(!0),Game.playSound("abducktion/teleport-"+Game.getRandom(1,2,!0)+".mp3",1),Game.playSound("abducktion/correct-"+Game.getRandom(1,3,!0)+".mp3",.3)):(this.scene.portalDuck("pop",t,this.platformContainer.position.x),Game.playSound("abducktion/teleport-"+Game.getRandom(1,2,!0)+".mp3",1),Game.playSound("abducktion/error.mp3",.3)),this.scene.stopTimer(t)},e.prototype.placeFloatParticle=function(){for(e=0;e<this.floatingParticleLeft.length;e++)if(0==(t=this.floatingParticleLeft[e]).active){t.active=!0,t.sprite.scale.x=t.sprite.scale.y=1.1,t.sprite.position.x=this.platformBase.position.x-this.platformBase.width/2+20,t.sprite.position.y=this.platformBase.position.y+30;break}for(var e=0;e<this.floatingParticleRight.length;e++){var t=this.floatingParticleRight[e];if(0==t.active){t.active=!0,t.sprite.scale.x=t.sprite.scale.y=1.1,t.sprite.position.x=this.platformBase.position.x+this.platformBase.width/2-20,t.sprite.position.y=this.platformBase.position.y+30;break}}},e.prototype.placePortalParticle=function(e){for(var t=0;t<this.portalParticles.length;t++){var i=this.portalParticles[t];if(0==i.active){if(1==e){i.active=!0,i.xVelocity=Game.getRandom(-10,10),i.yVelocity=Game.getRandom(-6,-10),i.particle.position.x=this.platformBase.position.x+Game.getRandom(-30,30),i.particle.position.y=this.platformBase.position.y-50,i.particle.visible=!0,i.particle.tint=this.defaultTint,i.particle.scale.x=i.particle.scale.y=Game.getRandom(1.5,3),++this.portalParticlesPop<15&&this.placePortalParticle(!0);break}i.active=!0,i.xVelocity=Game.getRandom(-7,7),i.yVelocity=Game.getRandom(-3,-6),i.particle.position.x=this.platformBase.position.x+Game.getRandom(-30,30),i.particle.position.y=this.platformBase.position.y-50,i.particle.visible=!0,i.particle.tint=this.defaultTint,i.particle.scale.x=i.particle.scale.y=Game.getRandom(.8,1.2);break}}},e.prototype.tick=function(){0==Game.isLowEndIPad&&++this.particleTimer>this.particleTimerLimit&&(this.particleTimer=0,this.particleTimerLimit=Game.getRandom(0,6),this.placePortalParticle()),this.portalGlow.alpha>.55&&(this.portalGlow.alpha-=.02);for(t=0;t<this.portalParticles.length;t++){var e=this.portalParticles[t];1==e.active&&(e.particle.position.x+=e.xVelocity/2,e.particle.position.y+=e.yVelocity/2,e.xVelocity=this.scene.simpleEase(e.xVelocity,0,30),e.yVelocity=this.scene.simpleEase(e.yVelocity,5,30),e.particle.scale.x-=.02,e.particle.scale.y-=.02,e.particle.scale.x<0&&(e.active=!1))}++this.placeParticleTimer>30&&(this.placeFloatParticle(),this.placeParticleTimer=0);for(t=0;t<this.floatingParticleLeft.length;t++)1==this.floatingParticleLeft[t].active&&(this.floatingParticleLeft[t].sprite.position.y+=.3,this.floatingParticleLeft[t].sprite.scale.y-=.01,this.floatingParticleLeft[t].sprite.scale.x-=.01,this.floatingParticleLeft[t].sprite.scale.x<0&&(this.floatingParticleLeft[t].active=!1));for(var t=0;t<this.floatingParticleRight.length;t++)1==this.floatingParticleRight[t].active&&(this.floatingParticleRight[t].sprite.position.y+=.3,this.floatingParticleRight[t].sprite.scale.y-=.01,this.floatingParticleRight[t].sprite.scale.x-=.01,this.floatingParticleRight[t].sprite.scale.x<0&&(this.floatingParticleRight[t].active=!1));0!=this.powerUpActive&&(1==Game.getRandom(0,1,!0)?(this.platformPortal1.tint=16765440,this.platformPortal2.tint=16765440):(this.platformPortal1.tint=37119,this.platformPortal2.tint=37119))},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){if(Game.displayStore.returnPooledItem(this.platformPortal1),Game.displayStore.returnPooledItem(this.platformPortal2),this.portalGlowTween=this.scene.killTween(this.portalGlowTween),this.glowResetDelay=this.scene.killTween(this.glowResetDelay),this.portalTimeline=this.scene.killTween(this.portalTimeline),Game.displayStore.returnPooledItem(this.portalContainer),Game.displayStore.returnPooledItem(this.portalCore),Game.displayStore.returnPooledItem(this.portalCoreOuter),Game.displayStore.returnPooledItem(this.portalOuter1),Game.displayStore.returnPooledItem(this.portalOuter2),Game.displayStore.returnPooledItem(this.portalOuter3),Game.displayStore.returnPooledItem(this.portalGlow),0==Game.isLowEndIPad){for(e=0;e<this.portalParticles.length;e++)Game.displayStore.returnPooledItem(this.portalParticles[e].particle);for(e=0;e<this.floatingParticleLeft.length;e++)Game.displayStore.returnPooledItem(this.floatingParticleLeft[e].sprite);for(var e=0;e<this.floatingParticleRight.length;e++)Game.displayStore.returnPooledItem(this.floatingParticleRight[e].sprite)}},e}(),AbducktionTimerManager=function(){function e(e){this.scene=e,this.backTint=15345704,this.frontTint=7981123,this.timerSpeed=.001,this.timerMultiplier=1,this.leftOffscreen=0,this.rightOffscreen=0,this.timerArray=new Array;for(var t=0;t<10;t++){this.timerArray.push({active:!1,container:Game.displayStore.getContainer("timer-container"),back:Game.displayStore.getSprite("timer-full"),backOuter:Game.displayStore.getSprite("timer-outer"),leftHalf:Game.displayStore.getSprite("timer-half"),rightHalf:Game.displayStore.getSprite("timer-half"),coverHalf:Game.displayStore.getSprite("timer-half"),status:"active",side:"none",offscreen:!1,targetX:0,targetY:0,targetScale:0});var i=this.timerArray[t];i.back.tint=this.backTint,i.leftHalf.tint=this.frontTint,i.rightHalf.tint=this.frontTint,i.coverHalf.tint=this.backTint,i.container.addChild(i.backOuter),i.container.addChild(i.back),i.container.addChild(i.leftHalf),i.container.addChild(i.rightHalf),i.container.addChild(i.coverHalf),i.coverHalf.visible=!1,i.leftHalf.scale.x=-1,i.container.visible=!1,i.container.position.y=Game.stageHeight-50,i.container.position.x=Game.stageWidth/2}}return e.prototype.setDifficulty=function(e){switch(e){case 1:this.timerSpeed=.004;break;case 2:this.timerSpeed=.0045;break;case 3:this.timerSpeed=.005;break;case 4:this.timerSpeed=.006}},e.prototype.startTimer=function(e,t,i){var s=this.timerArray[e];0==s.active&&(s.active=!0,s.container.visible=!0,s.container.position.x=t,s.container.position.y=i+100)},e.prototype.resetClock=function(e){var t=this.timerArray[e];t.container.visible=!1,t.status="active",t.active=!1,t.leftHalf.rotation=0,t.rightHalf.rotation=0,t.coverHalf.visible=!1},e.prototype.stopTimer=function(e){this.resetClock(e)},e.prototype.timerRanOut=function(e){this.resetClock(e),this.scene.popDuck("timer",e)},e.prototype.pauseTimer=function(e){this.timerArray[e].status="paused"},e.prototype.resumeTimer=function(e){this.timerArray[e].status="active"},e.prototype.goOffscreen=function(e,t){var i=this.timerArray[e];i.offscreen=!0,i.side=t,"left"==i.side?this.leftOffscreen++:this.rightOffscreen++,this.setSideHeights()},e.prototype.goOnscreen=function(e){var t=this.timerArray[e];t.offscreen=!1,"left"==t.side?this.leftOffscreen--:"right"==t.side&&this.rightOffscreen--,t.side="none",this.setSideHeights()},e.prototype.setSideHeights=function(){for(var e=1,t=1,i=0;i<this.timerArray.length;i++){var s=this.timerArray[i];if(1==s.offscreen)switch(s.side){case"left":s.targetY=Game.stageHeight-50*e-5*(e-1),e++;break;case"right":s.targetY=Game.stageHeight-50*t-5*(t-1),t++}}},e.prototype.addTimersToScene=function(){for(var e=0;e<this.timerArray.length;e++){var t=this.timerArray[e];this.scene.container.addChild(t.container),t.container.position.y=Game.stageHeight+40,t.container.position.x=Game.stageWidth/2,t.container.scale.x=t.container.scale.y=0}},e.prototype.tick=function(){for(var e=0;e<this.timerArray.length;e++){var t=this.timerArray[e];if(1==t.active){switch(t.container.position.x+=(t.targetX-t.container.position.x)/2,t.container.position.y+=(t.targetY-t.container.position.y)/3,t.container.scale.y=t.container.scale.x+=(t.targetScale-t.container.scale.x)/3,this.scene.shipSide){case"left":0==t.offscreen&&this.scene.getDuckPosition(e)>Game.stageWidth-50+0&&this.goOffscreen(e,"right"),1==t.offscreen&&this.scene.getDuckPosition(e)<Game.stageWidth-50+0&&this.goOnscreen(e);break;case"right":0==t.offscreen&&this.scene.getDuckPosition(e)>this.scene.playAreaWidth-(Game.stageWidth-50)&&this.goOffscreen(e,"right"),1==t.offscreen&&this.scene.getDuckPosition(e)>this.scene.playAreaWidth-(Game.stageWidth-50)&&this.goOnscreen(e);break;case"middle":0==t.offscreen&&(this.scene.getDuckPosition(e)<this.scene.shipXpos-Game.stageWidth/2+50&&this.goOffscreen(e,"left"),this.scene.getDuckPosition(e)>this.scene.shipXpos+(Game.stageWidth/2-50)&&this.goOffscreen(e,"right")),1==t.offscreen&&this.scene.getDuckPosition(e)>this.scene.shipXpos-Game.stageWidth/2+50&&this.scene.getDuckPosition(e)<this.scene.shipXpos+Game.stageWidth/2-50&&this.goOnscreen(e)}switch("paused"!=t.status&&(t.rightHalf.rotation+=this.timerSpeed*this.timerMultiplier,t.rightHalf.rotation>=Math.PI&&(0==t.coverHalf.visible&&(t.coverHalf.visible=!0),t.leftHalf.rotation+=this.timerSpeed*this.timerMultiplier),t.leftHalf.rotation>=Math.PI&&(t.active=!1,t.container.visible=!1,this.timerRanOut(e))),t.side){case"left":t.targetX=50,t.targetScale=.5;break;case"right":t.targetX=Game.stageWidth-50,t.targetScale=.5;break;case"none":"middle"==this.scene.shipSide?t.targetX=this.scene.getDuckPosition(e)+Game.stageWidth/2-(this.scene.distanceFromCenterGlobal+4*this.scene.shipThrust):t.targetX=this.scene.getDuckPosition(e)+Game.stageWidth/2-(this.scene.distanceFromCenterGlobal+0*this.scene.shipThrust),t.targetY=Game.stageHeight-35,t.targetScale=.7}}}},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){for(var e=0;e<this.timerArray.length;e++)Game.displayStore.returnPooledItem(this.timerArray[e].container),Game.displayStore.returnPooledItem(this.timerArray[e].back),Game.displayStore.returnPooledItem(this.timerArray[e].backOuter),Game.displayStore.returnPooledItem(this.timerArray[e].leftHalf),Game.displayStore.returnPooledItem(this.timerArray[e].rightHalf),Game.displayStore.returnPooledItem(this.timerArray[e].coverHalf)},e}(),AbducktionLaserManager=function(){function e(e){this.scene=e,this.beamHeights=[Game.stageHeight-200,Game.stageHeight-300],this.beamSelected=!1,this.activeBeamNumber=1,this.beamDelay=120,this.warningTimer=150,this.activeTimer=100,this.laserBeam=new Array,this.firstLaser=!0,this.laserBeam.push({laserBeam:Game.displayStore.getSprite("laser-beam"),warningBeam:Game.displayStore.getSprite("laser-warning"),warningActive:!1,beamActive:!1,activeTimer:this.activeTimer,warningTimer:this.warningTimer}),this.laserBeam.push({laserBeam:Game.displayStore.getSprite("laser-beam"),warningBeam:Game.displayStore.getSprite("laser-warning"),warningActive:!1,beamActive:!1,activeTimer:this.activeTimer,warningTimer:this.warningTimer}),this.beamCollision=!1,this.leftTower=Game.displayStore.getSprite("laser-tower"),this.rightTower=Game.displayStore.getSprite("laser-tower"),this.leftTower.scale.x=-1,this.leftTower.position.x=50,this.rightTower.position.x=this.scene.playAreaWidth-50,this.leftTower.position.y=Game.stageHeight+20,this.rightTower.position.y=Game.stageHeight+20,this.laserBeam[0].warningBeam.width=this.scene.playAreaWidth-80,this.laserBeam[1].warningBeam.width=this.scene.playAreaWidth-80,this.laserBeam[0].laserBeam.width=this.scene.playAreaWidth-80,this.laserBeam[1].laserBeam.width=this.scene.playAreaWidth-80,this.laserBeam[0].laserBeam.blendMode=PIXI.BLEND_MODES.ADD,this.laserBeam[1].laserBeam.blendMode=PIXI.BLEND_MODES.ADD,this.laserBeam[0].warningBeam.position.x=this.scene.playAreaWidth/2,this.laserBeam[1].warningBeam.position.x=this.scene.playAreaWidth/2,this.laserBeam[0].laserBeam.position.x=this.scene.playAreaWidth/2,this.laserBeam[1].laserBeam.position.x=this.scene.playAreaWidth/2,this.laserBeam[0].laserBeam.position.y=this.beamHeights[0],this.laserBeam[0].warningBeam.position.y=this.beamHeights[0],this.laserBeam[1].laserBeam.position.y=this.beamHeights[1],this.laserBeam[1].warningBeam.position.y=this.beamHeights[1],this.laserBeam[0].laserBeam.visible=!1,this.laserBeam[1].laserBeam.visible=!1,this.laserBeam[1].warningBeam.visible=!1,this.laserBeam[0].warningBeam.visible=!1,this.laserBeam[0].warningBeam.tint=9162231,this.laserBeam[1].warningBeam.tint=9162231,this.laserBeam[0].warningBeam.blendMode=PIXI.BLEND_MODES.ADD,this.laserBeam[1].warningBeam.blendMode=PIXI.BLEND_MODES.ADD,this.leftBottomEmiter=Game.displayStore.getSprite("laser-emiter"),this.leftTopEmiter=Game.displayStore.getSprite("laser-emiter"),this.rightBottomEmiter=Game.displayStore.getSprite("laser-emiter"),this.rightTopEmiter=Game.displayStore.getSprite("laser-emiter"),this.leftTopEmiter.position.x=this.leftTower.position.x,this.leftBottomEmiter.position.x=this.leftTower.position.x,this.rightTopEmiter.position.x=this.rightTower.position.x,this.rightBottomEmiter.position.x=this.rightTower.position.x,this.rightTopEmiter.scale.x=-1,this.rightBottomEmiter.scale.x=-1,this.leftTopEmiter.position.y=this.beamHeights[1],this.rightTopEmiter.position.y=this.beamHeights[1],this.leftBottomEmiter.position.y=this.beamHeights[0],this.rightBottomEmiter.position.y=this.beamHeights[0],this.scene.mainContainer.addChild(this.laserBeam[0].laserBeam),this.scene.mainContainer.addChild(this.laserBeam[0].warningBeam),this.scene.mainContainer.addChild(this.laserBeam[1].laserBeam),this.scene.mainContainer.addChild(this.laserBeam[1].warningBeam),this.scene.mainContainer.addChild(this.rightBottomEmiter),this.scene.mainContainer.addChild(this.rightTopEmiter),this.scene.mainContainer.addChild(this.leftBottomEmiter),this.scene.mainContainer.addChild(this.leftTopEmiter),this.scene.mainContainer.addChild(this.leftTower),this.scene.mainContainer.addChild(this.rightTower)}return e.prototype.setDifficulty=function(e){switch(e){case 1:case 2:case 3:case 4:this.warningTimer=150,this.activeTimer=100}},e.prototype.fireLaser=function(e){1!=this.beamCollision&&this.scene.laserCheckDuck(this.activeBeamNumber)},e.prototype.tick=function(){if(1==this.laserBeam[this.activeBeamNumber-1].beamActive&&(this.fireLaser(this.laserBeam[this.activeBeamNumber-1].activeTimer),this.laserBeam[this.activeBeamNumber-1].laserBeam.visible=!0,this.laserBeam[this.activeBeamNumber-1].warningBeam.visible=!1),--this.beamDelay<=0){0==this.beamSelected&&(Game.getRandom(0,1)>.5?(this.activeBeamNumber=1,this.beamSelected=!0):(this.activeBeamNumber=2,this.beamSelected=!0));var e=this.laserBeam[this.activeBeamNumber-1];0==e.warningActive&&0==e.beamActive&&(e.warningActive=!0,this.firstLaser=!1,Game.playSound("abducktion/laser-warning.mp3",.3)),e.warningTimer--,e.warningTimer<0&&(e.warningActive=!1,0==e.beamActive&&(e.beamActive=!0,Game.playSound("abducktion/laser-up.mp3",.6),Game.playSound("abducktion/laser.mp3",0),Game.fadeSound("abducktion/laser.mp3",.2,.3)),e.activeTimer--),e.activeTimer<0&&(Game.playSound("abducktion/laser-down.mp3",.6),Game.fadeSound("abducktion/laser.mp3",.3,0),e.activeTimer=this.activeTimer,e.warningTimer=this.warningTimer,e.beamActive=!1,e.warningActive=!1,e.laserBeam.visible=!1,e.warningBeam.visible=!1,this.beamSelected=!1,this.beamDelay=120,this.beamCollision=!1),1==e.warningActive&&(e.laserBeam.visible=!1,e.warningBeam.visible=!0,e.warningBeam.alpha-=2/e.warningTimer,e.warningBeam.alpha<.3&&(e.warningBeam.alpha=.8))}},e.prototype.pause=function(){0==this.firstLaser&&(1==this.laserBeam[this.activeBeamNumber-1].warningActive&&Game.pauseSound("abducktion/laser-warning.mp3"),1==this.laserBeam[this.activeBeamNumber-1].beamActive&&Game.pauseSound("abducktion/laser.mp3"))},e.prototype.resume=function(){0==this.firstLaser&&(1==this.laserBeam[this.activeBeamNumber-1].warningActive&&Game.resumeSound("abducktion/laser-warning.mp3"),1==this.laserBeam[this.activeBeamNumber-1].beamActive&&Game.resumeSound("abducktion/laser.mp3"))},e.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.laserBeam[0].laserBeam),Game.displayStore.returnPooledItem(this.laserBeam[0].warningBeam),Game.displayStore.returnPooledItem(this.laserBeam[1].laserBeam),Game.displayStore.returnPooledItem(this.laserBeam[1].warningBeam),Game.displayStore.returnPooledItem(this.leftTower),Game.displayStore.returnPooledItem(this.rightTower),Game.displayStore.returnPooledItem(this.rightBottomEmiter),Game.displayStore.returnPooledItem(this.rightTopEmiter),Game.displayStore.returnPooledItem(this.leftBottomEmiter),Game.displayStore.returnPooledItem(this.leftTopEmiter),Game.stopSound("abducktion/laser-warning.mp3")},e}(),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),RiverRangersGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.splashAudioPlaying=!1,i.id="riverRangersGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),Game.coreData.setCurrentRide("river-rangers"),Game.playSound("river-rangers/music.mp3",.2),this.blunderbussShotLoad=8,this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),this.tutorialViewed=Game.coreData.getGameTutorialViewed("river-rangers"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.gunCoolDownLimit=50,this.gunCoolDownCounter=this.gunCoolDownLimit,this.riverParticleCounter=0,this.riverParticleCounterLimit=30,this.gunshotRadius=100,this.bulletParticleCounter=0,this.bulletParticleCounterLimit=2,this.blunderbussPowerUpOn=!1,this.losingHeart=!1,this.heartNumber=2,this.targetHeartScale=0,this.flintLockHolder=Game.displayStore.getContainer("river-rangers/flintlock-holder"),this.flintLock=Game.displayStore.getSprite("river-rangers/flintlock"),this.flintLockPan=Game.displayStore.getSprite("river-rangers/flintlock-pan"),this.flintLockHolder.addChild(this.flintLock),this.flintLockHolder.addChild(this.flintLockPan),this.flintLockPan.position.x=5,this.flintLockPan.position.y=-18,this.flintLock.position.x=-25,this.waterSplash=Game.displayStore.getAnimatedSprite("water-splash-frames"),this.waterSplash.position.x=100,this.waterSplash.position.y=100,this.waterSplash.loop=!1,this.waterSplash.animationSpeed=.2,this.bombPopFrames=Game.displayStore.getAnimatedSprite("bomb-pop-frames"),this.bombPopFrames.position.x=100,this.bombPopFrames.position.y=100,this.bombPopFrames.loop=!1,this.bombPopFrames.animationSpeed=.3,this.bombPopFrames.scale.x=1.3,this.bombPopFrames.scale.y=1.3,this.frontBoatWake=Game.displayStore.getAnimatedSprite("front-boat-frames"),this.frontBoatWake.position.x=300,this.frontBoatWake.position.y=553,this.frontBoatWake.loop=!0,this.frontBoatWake.animationSpeed=.2,this.frontBoatWake.play(),this.subFrontWake=Game.displayStore.getAnimatedSprite("front-boat-frames"),this.subFrontWake.position.y=553,this.subFrontWake.loop=!0,this.subFrontWake.animationSpeed=.22,this.subFrontWake.play(),this.subRearWake=Game.displayStore.getAnimatedSprite("rear-boat-frames"),this.subRearWake.position.y=550,this.subRearWake.loop=!0,this.subRearWake.animationSpeed=.21,this.subRearWake.play(),this.gunshotFrames=Game.displayStore.getAnimatedSprite("gunshot-frames"),this.gunshotFrames.loop=!1,this.gunshotFrames.animationSpeed=.3,this.rearBoatWake=Game.displayStore.getAnimatedSprite("rear-boat-frames"),this.rearBoatWake.position.x=300,this.rearBoatWake.position.y=550,this.rearBoatWake.loop=!0,this.rearBoatWake.animationSpeed=.2,this.rearBoatWake.play(),this.droneDamageFrames=Game.displayStore.getAnimatedSprite("drone-damage-frames"),this.droneDamageFrames.position.x=300,this.droneDamageFrames.position.y=100,this.droneDamageFrames.loop=!1,this.droneDamageFrames.animationSpeed=.2,this.boatGooContainer=Game.displayStore.getContainer("river-ranger/boat-goo-container"),this.boatGoo1=this.boatGooContainer.getSprite("river-rangers/boat-goo-1"),this.boatGoo2=this.boatGooContainer.getSprite("river-rangers/boat-goo-2"),this.boatGoo3=this.boatGooContainer.getSprite("river-rangers/boat-goo-3"),this.boatGoo1.visible=!1,this.boatGoo2.visible=!1,this.boatGoo3.visible=!1,this.objectGooLevel=0,this.barrelPosition=0,this.barrelReloading=!1,this.barrelReturning=!1,this.spongebobExpressionCounter=0,this.spongebobExpressionCounterLimit=60,this.spongebobExpressionActive=!1,this.cameraMotionEaseAmount=5,this.gameOverTriggered=!1,this.boatHPos=250,this.mainHolderPos=new PIXI.Point(this.boatHPos,0),this.distance=0,this.displayDistance=0,this.distanceString="0m",this.difficultyLevel=0,this.difficultyLevelCounter=0,this.difficultyLevelLimit=1e3,this.coolDownFillIncrement=2,this.calcDistanceCounter=0,this.calcDistanceCounterLimit=Game.fps/2,this.spongebobAudioTimer=0,this.spongebobAudioLimit=150,this.splashAudioTimer=0,this.splashAudioLimit=50,this.scoreHolder=Game.displayStore.getContainer("river-rangers/score-holder"),this.scoreText=Game.displayStore.getBitmapText("river-rangers/score-font"),this.scoreText.scale.x=this.scoreText.scale.y=.8,this.scoreText.position.x=this.scoreHolder.position.x+70,this.scoreText.position.y=this.scoreHolder.position.y+7,this.scoreHolder.addChild(this.scoreText),this.scoreText.text=this.distanceString,this.fireAllowed=!0,this.setBackgroundColor(15395562),this.mainHolder=Game.displayStore.getContainer("main-holder"),this.gunCooldownMeterHolder=Game.displayStore.getContainer("river-rangers/gun-cooldown-meter-holder"),this.coolDownMeterBG=this.gunCooldownMeterHolder.getSprite("river-rangers/gun-cooldown-meter-bg"),this.coolDownMeterIcon=this.gunCooldownMeterHolder.getSprite("river-rangers/gun-cooldown-meter-icon"),this.coolDownMeterFill=this.gunCooldownMeterHolder.getSprite("river-rangers/gun-cooldown-meter-fill"),this.coolDownMeterFillOverlay=this.gunCooldownMeterHolder.getSprite("river-rangers/gun-cooldown-meter-fill-overlay"),this.physicsManager=new RiverRangersPhysicsManager(this,this.mainHolder),this.physicsManager.initPhysicsWorld(),this.physicsDebugger=new PhysicsDebugger(this,this.mainHolder,this.physicsManager.world),this.levelManager=new RiverRangersLevelManager(this,this.mainHolder,this.boatHPos),this.ticketManager=new RiverRangersTicketManager(this,this.mainHolder),this.ticketManager.createTickets(),this.mainHolder.addChild(this.droneDamageFrames),this.droneManager=new RiverRangersDroneManager(this,this.mainHolder),this.droneManager.createDrones(),this.boatFlagStartingRotation=0,this.boatFlagStartingRotationIncrease=.1,this.bullets=new Array;for(n=0;n<5;n++){var i=this.physicsManager.getBulletBody();this.bullets.push({sprite:Game.displayStore.getSprite("river-rangers/boat-bullet"),particleAlpha:1,body:i.body,shape1:i.shape1,shape2:i.shape2,active:!1,hotSprite:Game.displayStore.getSprite("river-rangers/boat-bullet-hot"),deactivateCounter:0,shotHot:!1}),this.bullets[n].sprite.position.y=-500,this.bullets[n].hotSprite.position.y=-500,this.mainHolder.addChild(this.bullets[n].sprite),this.mainHolder.addChild(this.bullets[n].hotSprite),this.bullets[n].hotSprite.blendMode=PIXI.BLEND_MODES.ADD}if(this.bulletParticle=new Array,0==Game.isLowEndIPad)for(n=0;n<40;n++){var s=Game.displayStore.getSprite("river-rangers/boat-bullet-particle");this.bulletParticle.push({active:!1,sprite:s}),this.mainHolder.addChild(this.bulletParticle[n].sprite)}this.blunderbussShot=new Array;for(n=0;n<60;n++){var o=this.physicsManager.getBlunderbussShotBody();this.blunderbussShot.push({sprite:Game.displayStore.getSprite("river-rangers/boat-blunderbuss-bullet"),body:o.body,shape:o.shape,active:!1}),this.blunderbussShot[n].sprite.blendMode=PIXI.BLEND_MODES.ADD;var a=Game.getRandom(1,3);this.blunderbussShot[n].sprite.position.y=-500,this.blunderbussShot[n].sprite.scale.x=a,this.blunderbussShot[n].sprite.scale.y=a,this.mainHolder.addChild(this.blunderbussShot[n].sprite)}this.backgroundSun=Game.displayStore.getSprite("river-rangers-sun"),this.skyBackground=Game.displayStore.getSprite("river-rangers-sky"),this.boatBody=Game.displayStore.getSprite("river-rangers/boat-body"),this.boatFlag=Game.displayStore.getSprite("river-rangers/boat-flag"),this.boatGunRotateBreech=Game.displayStore.getSprite("river-rangers/boat-gun-rotate-breech"),this.boatGunBarrel=Game.displayStore.getSprite("river-rangers/boat-gun-barrel"),this.boatGunBarrelRecoil=Game.displayStore.getSprite("river-rangers/boat-gun-barrel-recoil"),this.boatGunBarrelRecoilBlunderbuss=Game.displayStore.getSprite("river-rangers/boat-gun-barrel-recoil-blunderbuss"),this.boatSpongeBobBody=Game.displayStore.getContainer("river-rangers/boat-spongebob-body"),this.boatSpongeBobArmFront=Game.displayStore.getSprite("river-rangers/boat-spongebob-arm-front"),this.boatSpongeBobArmBack=Game.displayStore.getSprite("river-rangers/boat-spongebob-arm-front"),this.boatGunBarrelRecoilBlunderbuss.visible=!1,this.container.addChild(this.skyBackground),this.container.addChild(this.backgroundSun),this.skyBackground.position.x=0,this.skyBackground.position.y=0,this.skyBackground.height=Game.stageHeight,this.skyBackground.width=Game.stageWidth,this.backgroundSun.position.x=600,this.backgroundSun.position.y=100,this.mainHolder.addChild(this.gunshotFrames),this.mainHolder.addChild(this.boatGunBarrelRecoil),this.mainHolder.addChild(this.boatGunBarrelRecoilBlunderbuss),this.mainHolder.addChild(this.boatGunBarrel),this.mainHolder.addChild(this.flintLockHolder),this.mainHolder.addChild(this.boatSpongeBobArmBack),this.mainHolder.addChild(this.boatSpongeBobBody),this.mainHolder.addChild(this.boatGunRotateBreech),this.mainHolder.addChild(this.boatSpongeBobArmFront),this.boatGunBarrelRecoil.visible=!0,this.planktonSubAheadDistance=680,this.planktonSubVertLevel=390,this.planktonSailEaseAmount=60,this.planktonSubBopCounter=0,this.planktonSubHolder=Game.displayStore.getContainer("river-ranger/sub-container"),this.planktonSubHolder.position.x=this.boatBody.position.x+this.planktonSubAheadDistance,this.planktonSubHolder.position.y=this.planktonSubVertLevel,this.planktonSubHolder.scale.x=this.planktonSubHolder.scale.y=.8,this.planktonFaces=new Array,this.planktonFaces.push({sprite:this.planktonSubHolder.getSprite("river-rangers/sub-p-normal"),id:"neutral"}),this.planktonFaces.push({sprite:this.planktonSubHolder.getSprite("river-rangers/sub-p-hit"),id:"scared"}),this.planktonFaces.push({sprite:this.planktonSubHolder.getSprite("river-rangers/sub-p-lose"),id:"winning"}),this.enemySignalFrames=Game.displayStore.getAnimatedSprite("river-rangers/signal-frames"),this.enemySignalFrames.loop=!0,this.enemySignalFrames.animationSpeed=.3,this.enemySignalFrames.play(),this.enemySignalFrames.position.x=8,this.enemySignalFrames.position.y=42,this.enemySignalFrames.blendMode=PIXI.BLEND_MODES.ADD,this.mainHolder.addChild(this.planktonSubHolder),this.planktonSubHolder.addChild(this.enemySignalFrames),this.flintLockHolder.visible=!1,this.mainHolder.addChild(this.boatFlag),this.mainHolder.addChild(this.boatBody),this.mainHolder.addChild(this.boatGooContainer),this.mainHolder.addChild(this.bombPopFrames),this.boatSpongeBobBodyHappy=this.boatSpongeBobBody.getSprite("river-rangers/boat-spongebob-body-happy"),this.boatSpongeBobBodyNeutral=this.boatSpongeBobBody.getSprite("river-rangers/boat-spongebob-body-neutral"),this.boatSpongeBobBodySad=this.boatSpongeBobBody.getSprite("river-rangers/boat-spongebob-body-sad"),this.sponebobBodyGoo1=this.boatSpongeBobBody.getSprite("river-rangers/boat-spongebob-body-goo-1"),this.sponebobBodyGoo2=this.boatSpongeBobBody.getSprite("river-rangers/boat-spongebob-body-goo-2"),this.sponebobBodyGoo3=this.boatSpongeBobBody.getSprite("river-rangers/boat-spongebob-body-goo-3"),this.sponebobBodyGoo1.visible=!1,this.sponebobBodyGoo2.visible=!1,this.sponebobBodyGoo3.visible=!1,this.boatSpongeBobBodyHappy.visible=!1,this.boatSpongeBobBodySad.visible=!1,this.boatSpongeBobBodyNeutral.visible=!0,this.container.addChild(this.mainHolder),this.riverTileFG=Game.displayStore.getSprite("river-rangers/river-tile"),this.riverTileFG.width=Game.stageWidth,this.riverTileFG.height=40,this.riverTileFG.position.y=560,this.container.addChild(this.riverTileFG),this.mainHolder.addChild(this.frontBoatWake),this.mainHolder.addChild(this.rearBoatWake),this.mainHolder.addChild(this.subFrontWake),this.mainHolder.addChild(this.subRearWake),this.frontBoatWake.scale.y=1.1,this.rearBoatWake.scale.y=1.2,this.rearBoatWake.scale.x=1.5;var r={lowerAngle:0,upperAngle:360,lowerVelocity:200,upperVelocity:600,endScale:0,lowerStartScale:.5,upperStartScale:3,friction:.1,XstartRange:10,YstartRange:10,time:2,stagger:300,gravity:100,cap:50,endAlpha:0,rotationPower:0,blendMode:PIXI.BLEND_MODES.ADD};this.gunParticleHolder=Game.displayStore.getContainer("river-rangers/gun-particle-container"),this.mainHolder.addChild(this.gunParticleHolder),this.powerUpGunBurst=new ParticleBurst(["river-rangers/powerup-gun-particle"],this.gunParticleHolder,this,r),this.gunCooldownMeterHolder.position.x=Game.stageWidth-120,this.gunCooldownMeterHolder.position.y=360,this.container.addChild(this.gunCooldownMeterHolder),this.container.addChild(this.scoreHolder),this.scoreHolder.scale.x=this.scoreHolder.scale.y=1,this.scoreHolder.position.y=85,this.scoreHolder.position.x=-20,this.inputManager=new RiverRangersInputManager(this,this.boatGunRotateBreech,this.mainHolder),this.heartBG=Game.displayStore.getSprite("river-rangers/heart-bg"),this.heartBG.position.x=109,this.heartBG.position.y=50,this.heartIcons=new Array,this.randomSounds=new Array,this.randomSounds.push("river-rangers/rustle-1.mp3"),this.randomSounds.push("river-rangers/rustle-2.mp3"),this.randomSounds.push("river-rangers/rustle-3.mp3"),this.randomSounds.push("river-rangers/rustle-4.mp3"),this.randomSounds.push("river-rangers/rustle-5.mp3"),this.randomSounds.push("river-rangers/rustle-6.mp3"),this.randomSounds.push("river-rangers/birds-1.mp3"),this.randomSounds.push("river-rangers/birds-2.mp3"),this.createRiverParticles(),this.container.addChild(this.heartBG);for(var n=0;n<3;n++)this.heartIcons.push({heart:Game.displayStore.getSprite("river-rangers/heart-icon"),active:!0}),this.container.addChild(this.heartIcons[n].heart),this.heartIcons[n].heart.position.x=100,this.heartIcons[n].heart.position.y=50,this.heartIcons[n].heart.visible=!0,this.heartIcons[n].heart.scale.x=0,this.heartIcons[n].heart.scale.y=0;this.heartIcons[0].heart.position.x-=70,this.heartIcons[2].heart.position.x+=70,this.mainHolder.addChild(this.waterSplash),this.setPlanktonFace("neutral"),1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("river-rangers",!0)},t.prototype.startGameplay=function(){this.game.ui.triggerEnjoyTheRide(),this.physicsManager.startBoatPower(),this.game.ui.setUI("gameplay-river-rangers"),Game.playSound("river-rangers/water-stream.mp3",.3),Game.playSound("river-rangers/boat.mp3"),this.randomSoundTimer=TweenMax.delayedCall(Game.getRandom(4,12),this.playRandomSound,[this]),this.game.powerUpManager.startGame(),this.heartTimeline&&(this.heartTimeline=this.killTween(this.heartTimeline)),0==Game.isLowEndIPad?(this.heartTimeline=new TimelineMax,this.heartTimeline.add([TweenMax.to(this.heartIcons[0].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:0}),TweenMax.to(this.heartIcons[1].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:.1}),TweenMax.to(this.heartIcons[2].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:.2})],.5)):(this.heartIcons[0].heart.scale.x=this.heartIcons[0].heart.scale.y=1,this.heartIcons[1].heart.scale.x=this.heartIcons[1].heart.scale.y=1,this.heartIcons[2].heart.scale.x=this.heartIcons[2].heart.scale.y=1)},t.prototype.setPlanktonFace=function(e){for(var t=0;t<this.planktonFaces.length;t++)this.planktonFaces[t].sprite.visible=!1,this.planktonFaces[t].id==e&&(this.planktonFaces[t].sprite.visible=!0)},t.prototype.playRandomSound=function(e){var t=Game.getRandom(0,e.randomSounds.length-1,!0);Game.playSound(e.randomSounds[t]),e.randomSoundTimer=TweenMax.delayedCall(Game.getRandom(4,12),e.playRandomSound,[e])},t.prototype.createRiverParticles=function(){if(1!=Game.isLowEndIPad){this.riverParticles=new Array;for(var e=0;e<20;e++){if(0==Game.getRandom(0,1,!0))t=Game.displayStore.getSprite("river-rangers-river-particle-1");else var t=Game.displayStore.getSprite("river-rangers-river-particle-2");Game.getRandom(1,2);this.riverParticles.push({active:!1,sprite:t,positionX:Game.getRandom(0,Game.stageWidth+100),positionY:Game.getRandom(560,590)}),this.container.addChild(this.riverParticles[e].sprite)}this.placeStarterRiverParticles()}},t.prototype.placeStarterRiverParticles=function(){for(var e=0;e<this.riverParticles.length;e++)this.riverParticles[e].active=!0,this.riverParticles[e].sprite.position.x=this.riverParticles[e].positionX,this.riverParticles[e].sprite.position.y=this.riverParticles[e].positionY},t.prototype.setObjectGoo=function(){switch(this.objectGooLevel){case 0:this.boatGoo1.visible=!1,this.boatGoo2.visible=!1,this.boatGoo3.visible=!1,this.sponebobBodyGoo1.visible=!1,this.sponebobBodyGoo2.visible=!1,this.sponebobBodyGoo3.visible=!1;break;case 1:this.boatGoo1.visible=!0,this.boatGoo2.visible=!1,this.boatGoo3.visible=!1,this.sponebobBodyGoo1.visible=!0,this.sponebobBodyGoo2.visible=!1,this.sponebobBodyGoo3.visible=!1;break;case 2:this.boatGoo1.visible=!1,this.boatGoo2.visible=!0,this.boatGoo3.visible=!1,this.sponebobBodyGoo1.visible=!1,this.sponebobBodyGoo2.visible=!0,this.sponebobBodyGoo3.visible=!1;break;case 3:this.boatGoo1.visible=!1,this.boatGoo2.visible=!1,this.boatGoo3.visible=!0,this.sponebobBodyGoo1.visible=!1,this.sponebobBodyGoo2.visible=!1,this.sponebobBodyGoo3.visible=!0}},t.prototype.spongebobExpression=function(e){switch(e){case"neutral":this.boatSpongeBobBodyHappy.visible=!1,this.boatSpongeBobBodySad.visible=!1,this.boatSpongeBobBodyNeutral.visible=!0;break;case"sad":this.spongebobExpressionActive=!0,this.boatSpongeBobBodyHappy.visible=!1,this.boatSpongeBobBodySad.visible=!0,this.boatSpongeBobBodyNeutral.visible=!1;break;case"happy":this.spongebobExpressionActive=!0,this.boatSpongeBobBodyHappy.visible=!0,this.boatSpongeBobBodySad.visible=!1,this.boatSpongeBobBodyNeutral.visible=!1}},t.prototype.playBombPop=function(e,t){this.bombPopFrames.position.x=e,this.bombPopFrames.position.y=Game.stageHeight-t,this.bombPopFrames.gotoAndPlay(1)},t.prototype.playDroneExplosion=function(e,t){this.droneDamageFrames.position.x=e,this.droneDamageFrames.position.y=t+20,this.droneDamageFrames.gotoAndPlay(1)},t.prototype.armBomb=function(e){this.physicsManager.armBomb(e)},t.prototype.disarmBomb=function(e){this.physicsManager.disarmBomb(e)},t.prototype.armDrone=function(e){this.physicsManager.armDrone(e)},t.prototype.disarmDrone=function(e){this.physicsManager.disarmDrone(e)},t.prototype.playWaterSplash=function(e){this.waterSplash.position.x=e,this.waterSplash.position.y=555,this.waterSplash.gotoAndPlay(1),this.droneManager.fireSplashParticles(this.waterSplash.position),0==this.splashAudioPlaying&&(this.splashAudioPlaying=!0,Game.playSound("river-rangers/water-splash-large-impact.mp3",.25))},t.prototype.getSplashPhysicsObj=function(){return this.physicsManager.getSplashPhysicsObj()},t.prototype.getDroneParticlePhysicsObj=function(){return this.physicsManager.getDroneParticlePhysicsObj()},t.prototype.getBombGooParticlePhysicsObj=function(){return this.physicsManager.getBombGooParticlePhysicsObj()},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"pause-button":this.pause(!1);break;case"playbuttonlarge":this.resume();break;case"river-rangers-fire-button":this.fireGun()}},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.secondChanceUse=function(){this.droneManager.secondChanceUse(),this.game.powerUpManager.setGameOverCooldown(!1),this.gameOverTriggered=!1,this.addLife()},t.prototype.killWaterParticle=function(e){this.droneManager.killWaterParticle(e)},t.prototype.playGunshotFrames=function(){this.gunshotFrames.gotoAndPlay(1),0==this.blunderbussPowerUpOn&&(Game.getRandom(0,1)<.5?Game.playSound("river-rangers/pop-cork-1.mp3",.3):Game.playSound("river-rangers/pop-cork-2.mp3",.4)),1==this.blunderbussPowerUpOn&&(Game.getRandom(0,1)<.5?Game.playSound("river-rangers/power-pop-1.mp3",.6):Game.playSound("river-rangers/power-pop-2.mp3",.6)),Game.playSound("river-rangers/hiss.mp3",.9)},t.prototype.fireGun=function(){if(0!=this.fireAllowed&&1!=this.tutorialOverlay.isOpen){this.barrelReloading=!0,this.fireAllowed=!1,this.coolDownMeterFill.alpha=1,this.gunCoolDownCounter=0;var e=new Array;this.gunshotFrames.scale.x=1,this.gunshotFrames.scale.y=1,this.playGunshotFrames();var t=0;if(1!=this.blunderbussPowerUpOn){for(i=0;i<this.bullets.length;i++)if(0==this.bullets[i].active){this.bullets[i].active=!0,this.bullets[i].sprite.visible=!1,this.bullets[i].hotSprite.visible=!0,this.bullets[i].deactivateCounter=50,this.bullets[i].shotHot=!0,this.physicsManager.fireGun(this.bullets[i].body);break}}else{this.gunshotFrames.scale.x=2.5,this.gunshotFrames.scale.y=2.5;for(var i=0;i<this.blunderbussShot.length&&!(1!=this.blunderbussShot[i].active&&(t++,this.blunderbussShot[i].active=!0,e.push(this.blunderbussShot[i].body),t>=this.blunderbussShotLoad));i++);e.length>0&&this.physicsManager.fireBlunderbuss(e)}}},t.prototype.resetBullet=function(e){for(t=0;t<this.bullets.length;t++)if(this.bullets[t].body==e){this.bullets[t].active=!1,this.bullets[t].particleAlpha=1;break}for(var t=0;t<this.blunderbussShot.length;t++)if(this.blunderbussShot[t].body==e){this.blunderbussShot[t].active=!1;break}},t.prototype.resetDrone=function(e){this.droneManager.resetDrone(e)},t.prototype.collectTicket=function(){this.spongebobExpression("happy")},t.prototype.getDifficulty=function(){return this.difficultyLevel},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.placeBulletParticle=function(e,t,i){for(var s=0;s<this.bulletParticle.length;s++)if(0==this.bulletParticle[s].active)return this.bulletParticle[s].active=!0,this.bulletParticle[s].sprite.alpha=this.bullets[e].particleAlpha,this.bulletParticle[s].sprite.position.x=t,this.bulletParticle[s].sprite.position.y=Game.stageHeight-i,this.bulletParticle[s].sprite.scale.x=1,this.bulletParticle[s].sprite.scale.y=1,void(this.bulletParticle[s].sprite.rotation=Game.getRandom(0,2*Math.PI))},t.prototype.moveBarrel=function(){1==this.barrelReloading&&(this.barrelPosition<0&&1==this.barrelReturning?(this.boatGunBarrelRecoil.position.x+=.5,this.barrelPosition+=.5):0==this.barrelReturning&&(this.boatGunBarrelRecoil.position.x-=1,this.barrelPosition-=1),0==this.barrelPosition&&(this.barrelReloading=!1,this.barrelReturning=!1))},t.prototype.spongebobExpressionTimer=function(){++this.spongebobExpressionCounter>=this.spongebobExpressionCounterLimit&&(this.spongebobExpressionActive=!1,this.spongebobExpressionCounter=0,this.spongebobExpression("neutral"))},t.prototype.moveRiverParticles=function(){for(var e=0;e<this.riverParticles.length;e++)if(0==this.riverParticles[e].active)return this.riverParticles[e].active=!0,this.riverParticles[e].sprite.alpha=1,this.riverParticles[e].sprite.position.x=Game.stageWidth+100,void(this.riverParticles[e].sprite.position.y=this.riverParticles[e].positionY)},t.prototype.tick=function(){if(e.prototype.tick.call(this),1!=this.paused&&1!=this.wristbandOverlay.isOpen){1==this.losingHeart&&this.scaleDownHeart(this.heartNumber,this.targetHeartScale),this.planktonSubBopCounter+=.05,this.planktonSubBopCounter>=2*Math.PI&&(this.planktonSubBopCounter=2*-Math.PI),this.planktonSubHolder.position.y=this.planktonSubVertLevel+10*Math.sin(this.planktonSubBopCounter);var t=this.boatBody.position.x+this.planktonSubAheadDistance;if(this.planktonSubHolder.position.x+=(t-this.planktonSubHolder.position.x)/this.planktonSailEaseAmount,this.subFrontWake.position.x=this.planktonSubHolder.position.x+75,this.subRearWake.position.x=this.planktonSubHolder.position.x-110,0==this.fireAllowed&&++this.gunCoolDownCounter>=this.gunCoolDownLimit&&(this.fireAllowed=!0,Game.playSound("river-rangers/primed.mp3",.4)),1==this.droneManager.spongebobAudioPlaying&&++this.spongebobAudioTimer>=this.spongebobAudioLimit&&(this.droneManager.spongebobAudioPlaying=!1,this.spongebobAudioTimer=0),1==this.splashAudioPlaying&&++this.splashAudioTimer>=this.splashAudioLimit&&(this.splashAudioPlaying=!1,this.splashAudioTimer=0),0==Game.isLowEndIPad)for(i=0;i<this.bullets.length;i++)0!=this.bullets[i].active&&1==this.bullets[i].active&&(this.bullets[i].particleAlpha-=.02,++this.bulletParticleCounter>=this.bulletParticleCounterLimit&&(this.bulletParticleCounter=0,this.placeBulletParticle(i,this.bullets[i].body.position[0],this.bullets[i].body.position[1])));if(0==Game.isLowEndIPad&&++this.riverParticleCounter>=this.riverParticleCounterLimit&&(this.riverParticleCounter=0,this.moveRiverParticles()),1==this.spongebobExpressionActive&&this.spongebobExpressionTimer(),++this.calcDistanceCounter>=this.calcDistanceCounterLimit&&(this.calcDistanceCounter=0,this.calculateDistanceTravelled()),0==this.tutorialOverlay.isOpen&&++this.difficultyLevelCounter>=this.difficultyLevelLimit&&(this.difficultyLevelCounter=0,this.difficultyLevel++),this.physicsManager.stepPhysics(),1==this.inputManager.mouseModeOn&&this.angleGun(),1==this.inputManager.keyBoardModeOn&&this.angleGunKeyboard(),this.coolDownMeterFill.scale.y=this.gunCoolDownCounter/this.gunCoolDownLimit,this.coolDownMeterFillOverlay.scale.y=this.gunCoolDownCounter/this.gunCoolDownLimit,this.coolDownMeterFillOverlay.alpha=this.gunCoolDownCounter/this.gunCoolDownLimit,this.coolDownMeterFill.alpha=this.gunCoolDownCounter/this.gunCoolDownLimit,this.flintLock.rotation=1-this.gunCoolDownCounter/this.gunCoolDownLimit,0==Game.isLowEndIPad){for(i=0;i<this.riverParticles.length;i++)1==this.riverParticles[i].active&&(this.riverParticles[i].sprite.position.x<-100&&(this.riverParticles[i].active=!1),this.riverParticles[i].sprite.position.x-=3);for(i=0;i<this.bulletParticle.length;i++)1==this.bulletParticle[i].active&&(this.bulletParticle[i].sprite.alpha<=0&&(this.bulletParticle[i].active=!1),this.bulletParticle[i].sprite.alpha=this.bulletParticle[i].sprite.alpha-.02,this.bulletParticle[i].sprite.position.y-=1,this.bulletParticle[i].sprite.scale.x+=.03,this.bulletParticle[i].sprite.scale.y+=.03,this.bulletParticle[i].sprite.rotation-=.02)}this.boatBody.position.x=this.physicsManager.boatBodyPhysics.position[0],this.boatBody.position.y=Game.stageHeight-this.physicsManager.boatBodyPhysics.position[1],this.boatBody.rotation=-this.physicsManager.boatBodyPhysics.angle,this.boatGooContainer.position.x=this.physicsManager.boatBodyPhysics.position[0],this.boatGooContainer.position.y=Game.stageHeight-this.physicsManager.boatBodyPhysics.position[1],this.boatGooContainer.rotation=-this.physicsManager.boatBodyPhysics.angle,this.frontBoatWake.position.x=this.boatBody.position.x+90,this.rearBoatWake.position.x=this.boatBody.position.x-200,this.boatFlag.position.x=this.physicsManager.boatBodyPhysics.position[0]-110,this.boatFlag.position.y=Game.stageHeight-this.physicsManager.boatBodyPhysics.position[1]+20,this.boatFlag.rotation=-this.physicsManager.boatBodyPhysics.angle,this.boatFlagStartingRotation+=this.boatFlagStartingRotationIncrease,this.boatFlagStartingRotation>=2*Math.PI&&(this.boatFlagStartingRotation=2*-Math.PI),this.boatFlag.rotation=0+Math.sin(this.boatFlagStartingRotation)/15,this.boatGunRotateBreech.position.x=this.physicsManager.boatGunRotateBreechBody.position[0],this.boatGunRotateBreech.position.y=Game.stageHeight-this.physicsManager.boatGunRotateBreechBody.position[1],this.boatGunRotateBreech.rotation=-this.physicsManager.boatGunRotateBreechBody.angle,this.boatGunBarrel.position.x=this.physicsManager.boatGunBarrel.position[0],this.boatGunBarrel.position.y=Game.stageHeight-this.physicsManager.boatGunBarrel.position[1],this.boatGunBarrel.rotation=-this.physicsManager.boatGunBarrel.angle,this.flintLockHolder.position.x=this.boatGunBarrel.position.x,this.flintLockHolder.position.y=this.boatGunBarrel.position.y,this.flintLockHolder.rotation=this.boatGunBarrel.rotation,this.boatGunBarrelRecoil.position.x=this.physicsManager.boatGunBarrelRecoil.position[0],this.boatGunBarrelRecoil.position.y=Game.stageHeight-this.physicsManager.boatGunBarrelRecoil.position[1],this.boatGunBarrelRecoil.rotation=-this.physicsManager.boatGunBarrelRecoil.angle,this.boatGunBarrelRecoilBlunderbuss.position.x=this.boatGunBarrelRecoil.position.x,this.boatGunBarrelRecoilBlunderbuss.position.y=this.boatGunBarrelRecoil.position.y,this.boatGunBarrelRecoilBlunderbuss.rotation=this.boatGunBarrelRecoil.rotation,this.boatSpongeBobBody.position.x=this.physicsManager.spongeBobBody.position[0],this.boatSpongeBobBody.position.y=Game.stageHeight-this.physicsManager.spongeBobBody.position[1],this.boatSpongeBobBody.rotation=-this.physicsManager.spongeBobBody.angle,this.boatSpongeBobArmFront.position.x=this.physicsManager.spongeBobArmFront.position[0],this.boatSpongeBobArmFront.position.y=Game.stageHeight-this.physicsManager.spongeBobArmFront.position[1],this.boatSpongeBobArmFront.rotation=-this.physicsManager.spongeBobArmFront.angle,this.boatSpongeBobArmBack.position.x=this.boatSpongeBobArmFront.position.x+5,this.boatSpongeBobArmBack.position.y=this.boatSpongeBobArmFront.position.y-5,this.boatSpongeBobArmBack.rotation=this.boatSpongeBobArmFront.rotation;for(i=0;i<this.bullets.length;i++)0!=this.bullets[i].active&&(--this.bullets[i].deactivateCounter<0&&(this.bullets[i].sprite.visible=!0,this.bullets[i].hotSprite.visible=!1,this.bullets[i].shotHot=!1),this.bullets[i].sprite.position.x=this.bullets[i].body.position[0],this.bullets[i].sprite.position.y=Game.stageHeight-this.bullets[i].body.position[1],this.bullets[i].sprite.rotation=-this.bullets[i].body.angle,this.bullets[i].hotSprite.position.x=this.bullets[i].sprite.position.x,this.bullets[i].hotSprite.position.y=this.bullets[i].sprite.position.y,this.bullets[i].hotSprite.rotation=this.bullets[i].sprite.rotation);for(var i=0;i<this.blunderbussShot.length;i++)0!=this.blunderbussShot[i].active&&(this.blunderbussShot[i].sprite.position.x=this.blunderbussShot[i].body.position[0],this.blunderbussShot[i].sprite.position.y=Game.stageHeight-this.blunderbussShot[i].body.position[1],this.blunderbussShot[i].sprite.rotation=-this.blunderbussShot[i].body.angle);this.levelManager.tick(this.boatBody.position.x),this.droneManager.tick(this.boatBody.position.x),0==this.tutorialOverlay.isOpen&&this.ticketManager.tick(this.boatBody.position.x),this.inputManager.tick(),this.positionViewport(),this.positionGunSmoke()}},t.prototype.getLives=function(){for(var e=0,t=0;t<this.heartIcons.length;t++)1==this.heartIcons[t].active&&e++;return{currentLives:e,totalLives:this.heartIcons.length}},t.prototype.positionGunSmoke=function(){var e;1==this.blunderbussPowerUpOn?e=this.gunshotRadius+40:0==this.blunderbussPowerUpOn&&(e=this.gunshotRadius);var t=Math.cos(this.boatGunRotateBreech.rotation),i=Math.sin(this.boatGunRotateBreech.rotation),s=this.boatGunRotateBreech.position.x+e*t,o=this.boatGunRotateBreech.position.y+e*i;this.gunshotFrames.position.x=s,this.gunshotFrames.position.y=o,this.gunshotFrames.rotation=this.boatGunRotateBreech.rotation},t.prototype.angleGun=function(){var e=this.inputManager.getInputAngle();this.physicsManager.changeGunAngle(e)},t.prototype.angleGunKeyboard=function(){var e=this.inputManager.getKeyboardInputAngle();this.physicsManager.changeGunAngle(e)},t.prototype.checkBulletImpact=function(e,t){for(i=0;i<this.bullets.length;i++)if(this.bullets[i].body==e)return void(1==this.bullets[i].shotHot?this.droneManager.checkBulletImpact(t):1==(i=Game.getRandom(1,2,!0))?Game.playSound("river-rangers/metal-dink-1.mp3"):2==i&&Game.playSound("river-rangers/metal-dink-2.mp3"));for(var i=0;i<this.blunderbussShot.length;i++)if(this.blunderbussShot[i].body==e)return void this.droneManager.checkBulletImpact(t)},t.prototype.checkBombImpact=function(e,t){0!=this.droneManager.checkBomb(e)&&0!=this.physicsManager.checkBoat(t)&&(this.loseLife(),this.droneManager.explodeBomb(e),this.physicsManager.explodeBomb(e))},t.prototype.loseLife=function(){if(this.spongebobExpression("sad"),this.objectGooLevel++,this.setObjectGoo(),Game.getRandom(0,1)<.5?Game.playSound("river-rangers/plankton-laugh.mp3"):Game.playSound("river-rangers/plankton-laugh2.mp3"),Game.playSound("river-rangers/water-splash-large-impact.mp3",1),1!=this.gameOverTriggered)for(var e=this.heartIcons.length-1;e>=0;e--)if(0!=this.heartIcons[e].active)return this.heartIcons[e].active=!1,0==Game.isLowEndIPad?(this.losingHeart=!0,this.heartNumber=e,this.targetHeartScale=0):this.heartIcons[e].heart.visible=!1,void this.checkGameOver()},t.prototype.scaleDownHeart=function(e,t){switch(this.heartIcons[e].heart.scale.x+=(t-this.heartIcons[e].heart.scale.x)/5,this.heartIcons[e].heart.scale.y+=(t-this.heartIcons[e].heart.scale.y)/5,t){case 0:this.heartIcons[e].heart.scale.x<=t&&(this.losingHeart=!1,this.heartIcons[e].heart.scale.x=0,this.heartIcons[e].heart.scale.y=0);break;case 1:this.heartIcons[e].heart.scale.x>=t&&(this.losingHeart=!1,this.heartIcons[e].heart.scale.x=1,this.heartIcons[e].heart.scale.y=1)}},t.prototype.checkGameOver=function(){for(var e=0,t=0;t<this.heartIcons.length;t++)0==this.heartIcons[t].active&&e++,e==this.heartIcons.length&&(this.gameOverTriggered=!0,this.game.powerUpManager.setGameOverCooldown(!0),this.gameOverDelay=TweenMax.delayedCall(1,this.endGame,[this]),Game.coreData.setCurrentRideScoreFromGame(this.displayDistance))},t.prototype.addLife=function(){if(1!=this.gameOverTriggered)for(var e=0;e<this.heartIcons.length;e++)if(0==this.heartIcons[e].active)return this.heartIcons[e].active=!0,void(0==Game.isLowEndIPad?(this.losingHeart=!0,this.heartNumber=e,this.targetHeartScale=1):this.heartIcons[e].heart.visible=!0)},t.prototype.endGame=function(e){e.gameOverDelay=e.killTween(e.gameOverDelay),e.wristbandOverlay.endGame(e.displayDistance)},t.prototype.calculateDistanceTravelled=function(){this.distance=this.boatBody.position.x,this.displayDistance=Math.round(this.distance/400),this.distanceString=String(this.displayDistance)+"m",this.scoreText.text=this.distanceString},t.prototype.positionViewport=function(){var e=(-this.boatBody.position.x-this.mainHolder.position.x+this.mainHolderPos.x)/this.cameraMotionEaseAmount;this.mainHolder.position.x=this.mainHolder.position.x+e},t.prototype.getDroneChassisPhysicsObj=function(){return this.physicsManager.getDroneChassis()},t.prototype.getBalloonPhysicsObj=function(){return this.physicsManager.getBalloonBody()},t.prototype.addDroneBodyToWorld=function(e){this.physicsManager.addBodyToWorld(e)},t.prototype.addBalloonBodyToWorld=function(e){this.physicsManager.addBodyToWorld(e)},t.prototype.addBalloonConstraintToWorld=function(e){this.physicsManager.addConstraintToWorld(e)},t.prototype.addBalloonSpringToWorld=function(e){this.physicsManager.addSpringToWorld(e)},t.prototype.addDroneHingeToWorld=function(e){this.physicsManager.addConstraintToWorld(e)},t.prototype.removeDroneBodyFromWorld=function(e){this.physicsManager.removeBodyFromWorld(e)},t.prototype.removeBalloonBodyFromWorld=function(e){this.physicsManager.removeBodyFromWorld(e)},t.prototype.removeBalloonConstraintFromWorld=function(e){this.physicsManager.removeConstraintFromWorld(e)},t.prototype.removeBalloonSpringFromWorld=function(e){this.physicsManager.removeSpringFromWorld(e)},t.prototype.removeDroneHingeFromWorld=function(e){this.physicsManager.removeConstraintFromWorld(e)},t.prototype.dropBomb=function(e){this.physicsManager.removeConstraintFromWorld(e),Game.playSound("river-rangers/beep.mp3")},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&("up"==t?this.upKeyDown():"down"==t?this.downKeyDown():"spacebar"==t&&this.spaceKeyDown())},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&("up"==t?this.upKeyUp():"down"==t&&this.downKeyUp())},t.prototype.spaceKeyDown=function(){this.fireGun()},t.prototype.upKeyDown=function(){this.inputManager.upKeyDown()},t.prototype.downKeyDown=function(){this.inputManager.downKeyDown()},t.prototype.upKeyUp=function(){this.inputManager.upKeyUp()},t.prototype.downKeyUp=function(){this.inputManager.downKeyUp()},t.prototype.activatePowerUpEffect=function(){this.blunderbussPowerUpOn=!0,this.boatGunBarrelRecoil.visible=!1,this.boatGunBarrelRecoilBlunderbuss.visible=!0,this.flintLockHolder.visible=!0,this.gunParticleHolder.position.x=this.boatGunBarrelRecoil.position.x,this.gunParticleHolder.position.y=this.boatGunBarrelRecoil.position.y,this.rearBoatWake.scale.x=2.5,this.rearBoatWake.scale.y=2.2,0==Game.isLowEndIPad&&this.powerUpGunBurst.fire(),this.physicsManager.activatePowerUpEffect()},t.prototype.deactivatePowerUpEffect=function(){this.blunderbussPowerUpOn=!1,this.boatGunBarrelRecoil.visible=!0,this.boatGunBarrelRecoilBlunderbuss.visible=!1,this.flintLockHolder.visible=!1,this.gunParticleHolder.position.x=this.boatGunBarrelRecoil.position.x,this.gunParticleHolder.position.y=this.boatGunBarrelRecoil.position.y,this.powerUpGunBurst.fire(),this.rearBoatWake.scale.x=1.5,this.rearBoatWake.scale.y=1.2,this.physicsManager.deactivatePowerUpEffect()},t.prototype.pause=function(t){0==t&&(Game.pauseSound("river-rangers/music.mp3"),e.prototype.pause.call(this,t)),Game.pauseSound("river-rangers/water-stream.mp3"),Game.pauseSound("river-rangers/sb-laugh.mp3"),Game.pauseSound("river-rangers/sb-woah.mp3"),Game.pauseSound("river-rangers/sb-gotcha.mp3"),Game.pauseSound("river-rangers/plankton-sad3.mp3"),Game.pauseSound("river-rangers/crash.mp3"),Game.pauseSound("river-rangers/fizz.mp3"),Game.pauseSound("river-rangers/plankton-laugh.mp3"),Game.pauseSound("river-rangers/plankton-laugh2.mp3"),Game.pauseSound("river-rangers/water-splash-large-impact.mp3"),Game.pauseSound("river-rangers/pop-cork-1.mp3"),Game.pauseSound("river-rangers/pop-cork-2.mp3"),Game.pauseSound("river-rangers/beep.mp3"),Game.pauseSound("river-rangers/boat.mp3"),Game.pauseSound("river-rangers/swipe.mp3"),Game.pauseSound("river-rangers/rustle-1.mp3"),Game.pauseSound("river-rangers/rustle-2.mp3"),Game.pauseSound("river-rangers/rustle-3.mp3"),Game.pauseSound("river-rangers/rustle-4.mp3"),Game.pauseSound("river-rangers/rustle-5.mp3"),Game.pauseSound("river-rangers/rustle-6.mp3"),Game.pauseSound("river-rangers/birds-1.mp3"),Game.pauseSound("river-rangers/birds-2.mp3"),Game.pauseSound("river-rangers/primed.mp3"),Game.pauseSound("river-rangers/hiss.mp3"),Game.pauseSound("river-rangers/metal-dink-1.mp3"),Game.pauseSound("river-rangers/metal-dink-2.mp3"),this.pauseResumeTween(this.gameOverDelay,"pause"),this.pauseResumeTween(this.randomSoundTimer,"pause"),this.game.powerUpManager.pause()},t.prototype.resume=function(){e.prototype.resume.call(this),Game.resumeSound("river-rangers/music.mp3"),Game.resumeSound("river-rangers/water-stream.mp3"),Game.resumeSound("river-rangers/sb-laugh.mp3"),Game.resumeSound("river-rangers/sb-woah.mp3"),Game.resumeSound("river-rangers/sb-gotcha.mp3"),Game.resumeSound("river-rangers/plankton-sad3.mp3"),Game.resumeSound("river-rangers/crash.mp3"),Game.resumeSound("river-rangers/fizz.mp3"),Game.resumeSound("river-rangers/plankton-laugh.mp3"),Game.resumeSound("river-rangers/plankton-laugh2.mp3"),Game.resumeSound("river-rangers/water-splash-large-impact.mp3"),Game.resumeSound("river-rangers/pop-cork-1.mp3"),Game.resumeSound("river-rangers/pop-cork-2.mp3"),Game.resumeSound("river-rangers/beep.mp3"),Game.resumeSound("river-rangers/boat.mp3"),Game.resumeSound("river-rangers/swipe.mp3"),Game.resumeSound("river-rangers/rustle-1.mp3"),Game.resumeSound("river-rangers/rustle-2.mp3"),Game.resumeSound("river-rangers/rustle-3.mp3"),Game.resumeSound("river-rangers/rustle-4.mp3"),Game.resumeSound("river-rangers/rustle-5.mp3"),Game.resumeSound("river-rangers/rustle-6.mp3"),Game.resumeSound("river-rangers/birds-1.mp3"),Game.resumeSound("river-rangers/birds-2.mp3"),Game.resumeSound("river-rangers/primed.mp3"),Game.resumeSound("river-rangers/hiss.mp3"),Game.resumeSound("river-rangers/metal-dink-1.mp3"),Game.resumeSound("river-rangers/metal-dink-2.mp3"),this.pauseResumeTween(this.gameOverDelay,"resume"),this.pauseResumeTween(this.randomSoundTimer,"resume"),this.game.ui.setUI("gameplay-river-rangers"),this.game.powerUpManager.resumeGame()},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause")},t.prototype.destroy=function(){e.prototype.destroy.call(this),Game.stopSound("river-rangers/boat.mp3"),Game.stopSound("river-rangers/water-stream.mp3"),Game.stopSound("river-rangers/sb-laugh.mp3"),Game.stopSound("river-rangers/sb-woah.mp3"),Game.stopSound("river-rangers/sb-gotcha.mp3"),Game.stopSound("river-rangers/plankton-sad3.mp3"),Game.stopSound("river-rangers/crash.mp3"),Game.stopSound("river-rangers/fizz.mp3"),Game.stopSound("river-rangers/plankton-laugh.mp3"),Game.stopSound("river-rangers/plankton-laugh2.mp3"),Game.stopSound("river-rangers/water-splash-large-impact.mp3"),Game.stopSound("river-rangers/pop-cork-1.mp3"),Game.stopSound("river-rangers/pop-cork-2.mp3"),Game.stopSound("river-rangers/beep.mp3"),Game.stopSound("river-rangers/swipe.mp3"),Game.stopSound("river-rangers/rustle-1.mp3"),Game.stopSound("river-rangers/rustle-2.mp3"),Game.stopSound("river-rangers/rustle-3.mp3"),Game.stopSound("river-rangers/rustle-4.mp3"),Game.stopSound("river-rangers/rustle-5.mp3"),Game.stopSound("river-rangers/rustle-6.mp3"),Game.stopSound("river-rangers/birds-1.mp3"),Game.stopSound("river-rangers/birds-2.mp3"),Game.stopSound("river-rangers/primed.mp3"),Game.stopSound("river-rangers/hiss.mp3"),Game.stopSound("river-rangers/metal-dink-1.mp3"),Game.stopSound("river-rangers/metal-dink-2.mp3"),this.physicsManager.destroy(),this.inputManager.destroy(),this.levelManager.destroy(),this.droneManager.destroy(),this.ticketManager.destroy(),Game.displayStore.returnPooledItem(this.boatSpongeBobArmBack),Game.displayStore.returnPooledItem(this.boatSpongeBobArmFront),Game.displayStore.returnPooledItem(this.subFrontWake),Game.displayStore.returnPooledItem(this.subRearWake),Game.displayStore.returnPooledItem(this.frontBoatWake),Game.displayStore.returnPooledItem(this.rearBoatWake),Game.displayStore.returnPooledItem(this.riverTileFG),this.gameOverDelay=this.killTween(this.gameOverDelay),this.randomSoundTimer=this.killTween(this.randomSoundTimer),this.tutorialOverlay.destroy();for(t=0;t<this.heartIcons.length;t++)Game.displayStore.returnPooledItem(this.heartIcons[t].heart);for(t=0;t<this.bullets.length;t++)Game.displayStore.returnPooledItem(this.bullets[t].sprite),Game.displayStore.returnPooledItem(this.bullets[t].hotSprite);for(t=0;t<this.blunderbussShot.length;t++)Game.displayStore.returnPooledItem(this.blunderbussShot[t].sprite);if(this.powerUpGunBurst.destroy(),0==Game.isLowEndIPad){for(t=0;t<this.riverParticles.length;t++)Game.displayStore.returnPooledItem(this.riverParticles[t].sprite);for(var t=0;t<this.bulletParticle.length;t++)Game.displayStore.returnPooledItem(this.bulletParticle[t].sprite)}},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),BeachBuggyGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="beachBuggyGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),Game.playSound("beach-buggy/music.mp3",.13),Game.coreData.setCurrentRide("beach-buggy"),this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),this.allowDamage=!0,this.damageCooldown=0,this.tutorialViewed=Game.coreData.getGameTutorialViewed("beach-buggy"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.selectedCharacter=Game.coreData.getSelectedCharacter()||"ggg",this.getPlayerHead(),this.health=1e3,this.healthCooledDown=!0,this.flipEnabled=!1,this.flipping=!1,this.wheelRotation=0,this.frontWheelRotation=0,this.powerupIsActive=!1,this.showRearFrames=!1,this.showFrontFrames=!1,this.skyBackground=Game.displayStore.getSprite("beach-buggy/sky"),this.skyBackground.width=Game.stageWidth,this.skyBackground.height=Game.stageHeight,this.frontWheelFrames=Game.displayStore.getAnimatedSprite("beach-buggy/wheel-frames"),this.rearWheelFrames=Game.displayStore.getAnimatedSprite("beach-buggy/wheel-frames"),this.frontWheelFrames.tint=14663071,this.rearWheelFrames.tint=14663071,this.frontWheelFrames.animationSpeed=.4,this.rearWheelFrames.animationSpeed=.4,this.frontWheelFrames.alpha=.7,this.rearWheelFrames.alpha=.7,this.frontWheelFrames.scale.x=this.frontWheelFrames.scale.y=.8,this.rearWheelFrames.play(),this.frontWheelFrames.play(),this.frontLandingPlaying=!1,this.rearLandingPlaying=!1,this.bodyLandingPlaying=!1,this.frontLandingTimer=0,this.frontLandingLimit=30,this.rearLandingTimer=0,this.rearLandingLimit=30,this.bodyLandingTimer=0,this.bodyLandingLimit=60,this.buggyDrivingSoundPlaying=!1,this.buggyDrivingSoundTimer=0,this.buggyDrivingSoundLimit=80,this.buggyDrivingPowerUpSoundLimit=1500,this.dustParticlesContainer=Game.displayStore.getContainer("beach-buggy/dust-holder"),this.sparkParticlesContainer=Game.displayStore.getContainer("beach-buggy/spark-holder"),this.boostParticlesContainer=Game.displayStore.getContainer("beach-buggy/boost-particles-holder");var i={lowerAngle:180,upperAngle:360,lowerVelocity:200,upperVelocity:1200,endScale:8,lowerStartScale:2,upperStartScale:5,friction:.04,XstartRange:20,YstartRange:20,time:1.5,gravity:-110,stagger:400,cap:20,endAlpha:0,rotationPower:2},s={lowerAngle:180,upperAngle:360,lowerVelocity:500,upperVelocity:2e3,endScale:0,lowerStartScale:1,upperStartScale:2,friction:.09,XstartRange:60,YstartRange:20,time:1.5,gravity:1200,stagger:200,cap:30,endAlpha:0,rotationPower:2};this.dustBurst=new ParticleBurst(["beach-buggy/dust-particle-2"],this.dustParticlesContainer,this,i),this.sparkBurst=new ParticleBurst(["beach-buggy/spark"],this.sparkParticlesContainer,this,s),this.dustBurst.container.position.x=412,this.dustBurst.container.position.y=312,this.sparkBurst.container.position.x=412,this.sparkBurst.container.position.y=312,this.frontWheelBang=Game.displayStore.getAnimatedSprite("beach-buggy/landing-frames"),this.rearWheelBang=Game.displayStore.getAnimatedSprite("beach-buggy/landing-frames"),this.bodyBang=Game.displayStore.getAnimatedSprite("beach-buggy/landing-frames"),this.frontWheelBang.position.x=-5e3,this.rearWheelBang.position.x=-5e3,this.bodyBang.position.x=-5e3,this.frontWheelBang.animationSpeed=.3,this.rearWheelBang.animationSpeed=.3,this.bodyBang.animationSpeed=.3,this.frontWheelBang.loop=!1,this.rearWheelBang.loop=!1,this.bodyBang.loop=!1,this.frontWheelBang.scale.x=this.frontWheelBang.scale.y=1.5,this.rearWheelBang.scale.x=this.rearWheelBang.scale.y=1.5,this.bodyBang.scale.x=3,this.bodyBang.scale.y=3,this.frontWheelBang.alpha=.8,this.rearWheelBang.alpha=.8,this.bodyBang.alpha=1,this.container.addChild(this.skyBackground),this.setBackgroundColor(13421772),this.game.ui.setUI("skip"),this.timer=new BeachBuggyTimer(this),this.physicsManager=new BeachBuggyPhysicsManager(this,this.mainHolder),this.physicsManager.initPhysicsWorld(),this.terrainManager=new BeachBuggyTerrainManager(this),this.inputManager=new BeachBuggyInputManager(this,this.mainHolder),this.mainHolder=Game.displayStore.getContainer("main-holder"),this.container.addChild(this.mainHolder),this.physicsDebugger=new PhysicsDebugger(this,this.mainHolder,this.physicsManager.world),this.layersHolder=Game.displayStore.getContainer("beach-buggy/layers-holder"),this.bgLayer=new BeachBuggyScrollingLayer(this,.8,250,this.layersHolder.getContainer("beach-buggy/bg-layer")),this.bgLayer2=new BeachBuggyScrollingLayer(this,.6,50,this.layersHolder.getContainer("beach-buggy/bg-layer-2")),this.skyLayer=new BeachBuggyScrollingLayer(this,1,0,this.layersHolder.getContainer("beach-buggy/sky-layer")),1!=Game.isLowEndIPad&&(this.fgLayer=new BeachBuggyScrollingLayer(this,-1.1,500,Game.displayStore.getContainer("beach-buggy/fg-layer"))),this.frontWheelCounter=0,this.rearWheelCounter=0,this.boostParticlesCounter=0,this.carBody=Game.displayStore.getContainer("beach-buggy/body"),this.exhaust=this.carBody.getSprite("beach-buggy/exhaust.png"),this.supercharger=this.carBody.getSprite("beach-buggy/supercharger.png"),this.frontWheel=Game.displayStore.getContainer("beach-buggy/wheel-front"),this.backWheel=Game.displayStore.getContainer("beach-buggy/wheel-back"),this.bigFrontWheel=this.frontWheel.getSprite("beach-buggy/wheel-big.png"),this.bigBackWheel=this.backWheel.getSprite("beach-buggy/wheel-big.png"),this.exhaust.position.x=-100,this.exhaust.position.y=30,this.supercharger.position.y=10,this.bigFrontWheel.alpha=0,this.bigBackWheel.alpha=0,this.bigFrontWheel.scale.x=this.bigFrontWheel.scale.y=0,this.bigBackWheel.scale.x=this.bigBackWheel.scale.y=0,this.damageDetectorFront=Game.displayStore.getSprite("beach-buggy/damage-detector"),this.damageDetectorBack=Game.displayStore.getSprite("beach-buggy/damage-detector"),this.damageDetectorTop=Game.displayStore.getSprite("beach-buggy/damage-detector"),this.damageDetectorFront.height=30,this.damageDetectorBack.height=30,this.damageDetectorTop.height=30,this.healthBarHolder=Game.displayStore.getContainer("beach-buggy/health-bar-holder"),this.healthBar=this.healthBarHolder.getSprite("beach-buggy/health-bar-fg"),this.healthBar2=this.healthBarHolder.getSprite("beach-buggy/health-bar-fg2"),this.healthBar.width=200,this.healthBar2.width=200,this.healthBar2.tint=16733525,this.healthBar.tint=6018816,this.healthBarHolder.getSprite("beach-buggy/health-bar-bg").width=220,this.healthBarHolder.position.x=80,this.healthBarHolder.position.y=80,this.scoreBG=Game.displayStore.getSprite("beach-buggy/score-bg"),this.scoreBG.position.y=190,this.scoreBG.position.x=-30,this.scoreText=Game.displayStore.getBitmapText("beach-buggy/score-font"),this.scoreText.position.x=50,this.scoreText.position.y=152,this.scoreText.scale.x=this.scoreText.scale.y=.75,this.scoreText.text="0m",this.container.addChild(this.scoreBG),this.mainHolder.addChild(this.layersHolder),this.container.addChild(this.scoreText),this.container.addChild(this.healthBarHolder),this.container.addChild(this.timer.container),this.physicsManager.bindSpriteToBody(this.head,this.physicsManager.characterHead),this.physicsManager.bindSpriteToBody(this.carCharacter,this.physicsManager.carBody),this.physicsManager.bindSpriteToBody(this.carBody,this.physicsManager.carBody),this.physicsManager.bindSpriteToBody(this.frontWheel,this.physicsManager.carFrontWheelBody),this.physicsManager.bindSpriteToBody(this.backWheel,this.physicsManager.carBackWheelBody),this.physicsManager.bindSpriteToBody(this.damageDetectorTop,this.physicsManager.topDamageSensorBody),this.mainHolderPos=new PIXI.Point(300,0),this.initialiseGameElements(),1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("beach-buggy",!0)},t.prototype.initialiseGameElements=function(){if(this.mainHolder.addChild(this.terrainManager.container),1!=Game.isLowEndIPad){this.frontWheelTracks=new Array;for(e=0;e<60;e++){t=Game.displayStore.getSprite("beach-buggy/small-track");this.frontWheelTracks.push({active:!1,sprite:t}),this.frontWheelTracks[e].sprite.position.y=-5e3,this.mainHolder.addChild(this.frontWheelTracks[e].sprite)}this.rearWheelTracks=new Array;for(e=0;e<60;e++){t=Game.displayStore.getSprite("beach-buggy/large-track");this.rearWheelTracks.push({active:!1,sprite:t}),this.rearWheelTracks[e].sprite.position.y=-5e3,this.mainHolder.addChild(this.rearWheelTracks[e].sprite)}this.boostParticles=new Array;for(e=0;e<30;e++){t=Game.displayStore.getSprite("beach-buggy/boost-particle");this.boostParticles.push({active:!1,sprite:t}),this.boostParticles[e].sprite.position.y=-5e3,this.boostParticles[e].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.boostParticlesContainer.addChild(this.boostParticles[e].sprite)}}if(this.mainHolder.addChild(this.carCharacter),this.mainHolder.addChild(this.head),this.mainHolder.addChild(this.boostParticlesContainer),this.mainHolder.addChild(this.carBody),this.mainHolder.addChild(this.frontWheel),this.mainHolder.addChild(this.backWheel),this.mainHolder.addChild(this.dustParticlesContainer),this.mainHolder.addChild(this.sparkParticlesContainer),1!=Game.isLowEndIPad){this.dustParticles=new Array;for(e=0;e<30;e++){t=Game.displayStore.getSprite("beach-buggy/dust-particle");this.dustParticles.push({active:!1,sprite:t}),this.dustParticles[e].sprite.position.y=-5e3,this.mainHolder.addChild(this.dustParticles[e].sprite),this.dustParticles[e].sprite.tint=14663071}this.rearDustParticles=new Array;for(var e=0;e<30;e++){var t=Game.displayStore.getSprite("beach-buggy/rear-dust-particle");this.rearDustParticles.push({active:!1,sprite:t}),this.rearDustParticles[e].sprite.position.y=-5e3,this.mainHolder.addChild(this.rearDustParticles[e].sprite),this.rearDustParticles[e].sprite.tint=14663071}this.fgUndershape=Game.displayStore.getSprite("beach-buggy/fg-undershape"),this.fgUndershape.width=2*Game.stageWidth,this.fgUndershape.height=Game.stageWidth}this.mainHolder.addChild(this.frontWheelFrames),this.mainHolder.addChild(this.rearWheelFrames),this.mainHolder.addChild(this.rearWheelBang),this.mainHolder.addChild(this.frontWheelBang),this.mainHolder.addChild(this.bodyBang),1!=Game.isLowEndIPad&&(this.mainHolder.addChild(this.fgLayer.container),this.mainHolder.addChild(this.fgUndershape)),this.currentWheelRotation=this.backWheel.rotation,this.oldWheelRotation=this.backWheel.rotation,this.currentFrontWheelRotation=this.frontWheel.rotation,this.oldFrontWheelRotation=this.frontWheel.rotation,this.previousRearTrackPos=this.backWheel.position.x},t.prototype.startGameplay=function(){switch(this.game.ui.triggerEnjoyTheRide(),this.game.ui.setUI("gameplay-beach-buggy"),Game.playSound("beach-buggy/buggy-starting.mp3",.6),Game.playSound("beach-buggy/buggy-idle.mp3",.3),Game.coreData.getSelectedCharacter()){case"ggg":Game.getRandom(0,1)<.5?Game.playSound("beach-buggy/triple-selfie.mp3",1):Game.playSound("beach-buggy/triple-yeyahh.mp3",1);break;case"hudson":Game.getRandom(0,1)<.5?Game.playSound("beach-buggy/hudson-hello.mp3",1):Game.playSound("beach-buggy/hudson-alright-gameshakers.mp3",1);break;case"kenzie":Game.getRandom(0,1)<.5?Game.playSound("beach-buggy/kenzie-its-kenzie.mp3",1):Game.playSound("beach-buggy/kenzie-fully-charged.mp3",1);break;case"babe":Game.getRandom(0,1)<.5?Game.playSound("beach-buggy/babe-woo.mp3",1):Game.playSound("beach-buggy/babe-here-i-come.mp3",1)}this.timer.start(),this.game.powerUpManager.startGame()},t.prototype.endGame=function(e){e.wristbandOverlay.endGame(e.score)},t.prototype.hideBuggy=function(){this.carBody.alpha=0,this.carCharacter.alpha=0,this.frontWheel.alpha=0,this.backWheel.alpha=0,this.bigBackWheel.alpha=0,this.bigFrontWheel.alpha=0,this.head.alpha=0,this.exhaust.alpha=0,this.supercharger.alpha=0,this.fgUndershape.alpha=0},t.prototype.flashBuggy=function(){var e=new RoughEase({template:Power0.easeOut,strength:10,points:6,taper:"none",randomize:!1,clamp:!0});TweenMax.to([this.carBody,this.carCharacter,this.frontWheel,this.backWheel,this.bigBackWheel,this.bigFrontWheel,this.head,this.exhaust,this.supercharger,this.fgUndershape],1,{alpha:1,ease:e})},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.secondChanceUse=function(){this.health<500&&(this.health=500),this.healthBar.tint=14122496,this.timer.addTime(5),this.physicsManager.flipBuggy()},t.prototype.activatePowerUpEffect=function(){switch(Game.stopSound("beach-buggy/buggy-idle.mp3"),this.powerupIsActive=!0,this.physicsManager.activatePowerup(),this.frontWheelFrames.scale.x=this.frontWheelFrames.scale.y=2,this.rearWheelFrames.scale.x=this.rearWheelFrames.scale.y=2,this.rearWheelBang.scale.x=this.rearWheelBang.scale.y=2,this.frontWheelBang.scale.x=this.frontWheelBang.scale.y=2,this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.activatePowerupTimeline=new TimelineMax,this.activatePowerupTimeline.add([TweenMax.to(this.bigFrontWheel.scale,.3,{x:1.3,y:1.3,ease:Back.easeOut}),TweenMax.to(this.bigBackWheel.scale,.3,{x:1.3,y:1.3,ease:Back.easeOut}),TweenMax.to(this.bigFrontWheel,.1,{alpha:1}),TweenMax.to(this.bigBackWheel,.1,{alpha:1})],0),this.activatePowerupTimeline.add(TweenMax.to(this.exhaust.position,.5,{x:-172,y:-42,ease:Elastic.easeOut}),.1),this.activatePowerupTimeline.add(TweenMax.to(this.supercharger.position,.5,{x:112,y:-30,ease:Elastic.easeOut}),.2),this.activatePowerupTimeline.call(function(){Game.playSound("beach-buggy/buggy-power-up-start.mp3",.5),Game.setSoundVolume("beach-buggy/buggy-power-up-start.mp3",.5)},null,this,0),Game.playSound("beach-buggy/buggy-power-up-transform.mp3",1),Game.coreData.getSelectedCharacter()){case"ggg":Game.getRandom(0,1)<.5?Game.playSound("beach-buggy/triple-yeah-woo-yeah.mp3",1):Game.playSound("beach-buggy/triple-yeyahh.mp3",1);break;case"hudson":Game.getRandom(0,1)<.5?Game.playSound("beach-buggy/hudson-later-gators.mp3",1):Game.playSound("beach-buggy/hudson-alright-gameshakers.mp3",1);break;case"kenzie":Game.getRandom(0,1)<.5?Game.playSound("beach-buggy/kenzie-easy-squeezy.mp3",1):Game.playSound("beach-buggy/kenzie-fully-charged.mp3",1);break;case"babe":Game.getRandom(0,1)<.5?Game.playSound("beach-buggy/babe-woo.mp3",1):Game.playSound("beach-buggy/babe-here-i-come.mp3",1)}},t.prototype.deactivatePowerUpEffect=function(){this.frontWheelFrames.scale.x=this.frontWheelFrames.scale.y=1,this.rearWheelFrames.scale.x=this.rearWheelFrames.scale.y=1,this.rearWheelBang.scale.x=this.rearWheelBang.scale.y=1,this.frontWheelBang.scale.x=this.frontWheelBang.scale.y=1,this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.activatePowerupTimeline=new TimelineMax,this.physicsManager.deactivatePowerup(),this.powerupIsActive=!1,this.activatePowerupTimeline.add([TweenMax.to(this.bigFrontWheel.scale,.3,{x:0,y:0,ease:Back.easeOut}),TweenMax.to(this.bigBackWheel.scale,.3,{x:0,y:0,ease:Back.easeOut}),TweenMax.to(this.bigFrontWheel,.3,{alpha:0}),TweenMax.to(this.bigBackWheel,.3,{alpha:0}),TweenMax.to(this.exhaust.position,.5,{x:-150,y:30,ease:Power2.easeInOut}),TweenMax.to(this.supercharger.position,.5,{y:10,ease:Power2.easeInOut})],0),Game.stopSound("beach-buggy/buggy-power-up-duration.mp3"),Game.playSound("beach-buggy/buggy-power-up-slow-down.mp3",.5),Game.playSound("beach-buggy/buggy-power-down-transform.mp3",1)},t.prototype.positionViewport=function(){var e=new PIXI.Point((-this.carBody.position.x-this.mainHolder.position.x+this.mainHolderPos.x)/t.cameraMotionEaseAmount,(300-this.carBody.position.y-this.mainHolder.position.y+this.mainHolderPos.y)/t.cameraMotionEaseAmount);this.mainHolder.position.x=this.mainHolder.position.x+e.x,this.mainHolder.position.y=this.mainHolder.position.y+e.y},t.prototype.restoreHealth=function(){this.health=1e3,this.healthBar.tint=6018816},t.prototype.updateDustParams=function(e){if(0!=this.allowDamage){var t=e/1e3*100,i={lowerAngle:180,upperAngle:360,lowerVelocity:t/100*500,upperVelocity:t/100*2e3,endScale:3+t/20*7,lowerStartScale:.3,upperStartScale:.8,friction:.05,XstartRange:120,YstartRange:20,time:2,gravity:-500,stagger:30,cap:50,endAlpha:0,rotationPower:.01};this.dustBurst.updateParams(i,this.dustBurst),this.updateHealth(e),console.log(e),this.allowDamage=!1}},t.prototype.getPlayerHead=function(){this.head=Game.displayStore.getSprite("beach-buggy/"+this.selectedCharacter+"-head"),this.carCharacter=Game.displayStore.getSprite("beach-buggy/"+this.selectedCharacter+"-character")},t.prototype.addHealth=function(e){this.health+=e,this.health>1e3&&(this.health=1e3),this.health>750?this.healthBar.tint=6018816:this.health>500&&this.health<750?this.healthBar.tint=14122496:this.health<500&&this.health>250?this.healthBar.tint=14090240:this.health<250&&(this.healthBar.tint=14090240)},t.prototype.updateHealth=function(e){if(0==this.bodyLandingPlaying)switch(this.dustBurst.container.position.x=this.carBody.position.x,this.dustBurst.container.position.y=this.carBody.position.y+this.carBody.height/2,this.dustBurst.fire(),this.sparkBurst.container.position.x=this.carBody.position.x,this.sparkBurst.container.position.y=this.carBody.position.y+this.carBody.height/2,this.sparkBurst.fire(),this.bodyLandingPlaying=!0,Game.getRandom(0,1)<.5?Game.playSound("beach-buggy/crash-1.mp3",.7):Game.playSound("beach-buggy/crash-2.mp3",.7),Game.coreData.getSelectedCharacter()){case"ggg":Game.getRandom(0,1)<.5?Game.playSound("beach-buggy/triple-cmon.mp3",1):Game.playSound("beach-buggy/triple-i-lost-a-shoe.mp3",1);break;case"hudson":Game.getRandom(0,1)<.5?Game.playSound("beach-buggy/hudson-hmmm.mp3",1):Game.playSound("beach-buggy/hudson-no-way.mp3",1);break;case"kenzie":Game.getRandom(0,1)<.5?Game.playSound("beach-buggy/kenzie-aww.mp3",1):Game.playSound("beach-buggy/kenzie-jeez-louise.mp3",1);break;case"babe":Game.getRandom(0,1)<.5?Game.playSound("beach-buggy/babe-problem.mp3",1):Game.playSound("beach-buggy/babe-upsy-daisy.mp3",1)}0!=this.healthCooledDown&&(this.health>750?this.healthBar.tint=6018816:this.health>500&&this.health<750?this.healthBar.tint=14122496:this.health<500&&this.health>250?this.healthBar.tint=14090240:this.health<250&&(this.healthBar.tint=14090240),this.health>20?e>8&&(this.health-=1.6*e):this.health=20,this.healthCooledDown=!1,this.healthCoolDownTimer=this.killTween(this.healthCoolDownTimer),this.healthCoolDownTimer=TweenMax.delayedCall(.5,function(){this.healthCooledDown=!0,this.health<=20&&this.endGame(this)},null,this))},t.prototype.placeRearWheelTrack=function(e,t){if(1!=Game.isLowEndIPad)for(var i=0;i<this.rearWheelTracks.length;i++)if(0==this.rearWheelTracks[i].active)return this.rearWheelTracks[i].active=!0,this.rearWheelTracks[i].sprite.alpha=1,this.rearWheelTracks[i].sprite.position.x=e.x,this.rearWheelTracks[i].sprite.position.y=e.y+this.backWheel.height/2-5,this.rearWheelTracks[i].sprite.scale.x=3.5+1.5*this.physicsManager.powerupRatio,this.rearWheelTracks[i].sprite.scale.y=.5+.5*this.physicsManager.powerupRatio,void(this.rearWheelTracks[i].sprite.rotation=t)},t.prototype.placeFrontWheelTrack=function(e,t){if(1!=Game.isLowEndIPad)for(var i=0;i<this.frontWheelTracks.length;i++)if(0==this.frontWheelTracks[i].active)return this.frontWheelTracks[i].active=!0,this.frontWheelTracks[i].sprite.alpha=1,this.frontWheelTracks[i].sprite.position.x=e.x,this.frontWheelTracks[i].sprite.position.y=e.y+this.frontWheel.height/2-3,this.frontWheelTracks[i].sprite.scale.x=3.5+1.5*this.physicsManager.powerupRatio,this.frontWheelTracks[i].sprite.scale.y=.5+.5*this.physicsManager.powerupRatio,void(this.frontWheelTracks[i].sprite.rotation=t)},t.prototype.updateScoreText=function(e){this.score=e,this.scoreText.text=e.toString()+"m"},t.prototype.passedCheckpoint=function(){switch(this.timer.addTime(4),Game.coreData.getSelectedCharacter()){case"ggg":if(1==(e=Game.getRandom(1,7,!0)))Game.playSound("beach-buggy/triple-selfie.mp3",1);else if(2==e)Game.playSound("beach-buggy/triple-yeyahh.mp3",1);else if(e>=3)return;break;case"hudson":if(1==(e=Game.getRandom(1,7,!0)))Game.playSound("beach-buggy/hudson-hello.mp3",1);else if(2==e)Game.playSound("beach-buggy/hudson-alright-gameshakers.mp3",1);else if(e>=3)return;break;case"kenzie":if(1==(e=Game.getRandom(1,7,!0)))Game.playSound("beach-buggy/kenzie-easy-squeezy.mp3",1);else if(2==e)Game.playSound("beach-buggy/kenzie-fully-charged.mp3",1);else if(e>=3)return;break;case"babe":var e=Game.getRandom(1,7,!0);if(1==e)Game.playSound("beach-buggy/babe-woo.mp3",1);else if(2==e)Game.playSound("beach-buggy/babe-here-i-come.mp3",1);else if(e>=3)return}},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"pause-button":this.pause(!1);break;case"playbuttonlarge":this.resume()}},t.prototype.downOnUI=function(t){switch(e.prototype.downOnUI.call(this,t),t.id){case"beach-buggy-brake-button":this.inputManager.keyDown("left");break;case"beach-buggy-accelerate-button":this.inputManager.keyDown("right")}},t.prototype.flipAction=function(){1==this.flipEnabled&&0==this.flipping&&0==this.wristbandOverlay.isOpen&&(this.flipping=!0,this.physicsManager.flipBuggy(),this.game.ui.setUI("gameplay-beach-buggy"),this.game.powerUpManager.resumeGame(),this.flipEnableDelay=this.killTween(this.flipEnableDelay),this.flipEnableDelay=TweenMax.delayedCall(1,function(){this.flipEnabled=!1,this.flipping=!1},null,this))},t.prototype.upOnUI=function(t){switch(e.prototype.upOnUI.call(this,t),t.id){case"beach-buggy-brake-button":this.inputManager.keyUp("left");break;case"beach-buggy-accelerate-button":this.inputManager.keyUp("right");break;case"beach-buggy-flip-button":this.flipAction()}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){if(e.prototype.tick.call(this),1!=this.paused){0==this.allowDamage&&(this.damageCooldown<100?this.damageCooldown++:(this.damageCooldown=0,this.allowDamage=!0,console.log("reallowing damage"))),1==this.bodyLandingPlaying&&++this.bodyLandingTimer>=this.bodyLandingLimit&&(this.bodyLandingTimer=0,this.bodyLandingPlaying=!1);var i=this.terrainManager.checkChunkOverlap(this.physicsManager.carFrontWheelBody).contact,s=this.terrainManager.checkChunkOverlap(this.physicsManager.carBackWheelBody).contact;if(1==this.buggyDrivingSoundPlaying&&0==this.powerupIsActive&&(++this.buggyDrivingSoundTimer>=this.buggyDrivingSoundLimit&&(this.buggyDrivingSoundTimer=0,this.buggyDrivingSoundPlaying=!1,Game.fadeSound("beach-buggy/buggy-accelerating.mp3",.5,0),Game.stopSound("beach-buggy/gravel-looping.mp3")),this.physicsManager.carBackWheelBody.angularVelocity<-10&&1==s&&(this.buggyDrivingSoundTimer=0)),0==this.buggyDrivingSoundPlaying&&this.physicsManager.carBackWheelBody.angularVelocity<-10&&0==this.powerupIsActive&&this.physicsManager.carBody.velocity>[20]&&(Game.stopSound("beach-buggy/buggy-idle.mp3"),Game.stopSound("beach-buggy/buggy-slow-down.mp3"),Game.stopSound("beach-buggy/buggy-starting.mp3"),Game.stopSound("beach-buggy/buggy-accelerating.mp3"),Game.setSoundVolume("beach-buggy/buggy-accelerating.mp3",0),Game.fadeSound("beach-buggy/buggy-accelerating.mp3",.5,.55),Game.playSound("beach-buggy/buggy-accelerating.mp3"),1==s?(Game.playSound("beach-buggy/buggy-start-gravel.mp3",.2),Game.playSound("beach-buggy/gravel-looping.mp3",.7)):1==i&&(Game.playSound("beach-buggy/buggy-start-gravel.mp3",.2),Game.playSound("beach-buggy/gravel-looping.mp3",.7)),this.buggyDrivingSoundPlaying=!0),1==this.buggyDrivingSoundPlaying&&0==this.powerupIsActive&&this.physicsManager.carBackWheelBody.angularVelocity>-10&&(Game.playSound("beach-buggy/buggy-slow-down.mp3",.4),Game.playSound("beach-buggy/buggy-idle.mp3",.3),Game.fadeSound("beach-buggy/buggy-accelerating.mp3",.5,0),Game.stopSound("beach-buggy/gravel-looping.mp3"),1==i&&Game.playSound("beach-buggy/buggy-brake-gravel.mp3",.1),1==s&&Game.playSound("beach-buggy/buggy-brake-gravel.mp3",.1),this.buggyDrivingSoundPlaying=!1),1==this.buggyDrivingSoundPlaying&&1==this.powerupIsActive&&++this.buggyDrivingSoundTimer>=this.buggyDrivingPowerUpSoundLimit&&(this.buggyDrivingSoundTimer=0,this.buggyDrivingSoundPlaying=!1),0==this.buggyDrivingSoundPlaying&&this.physicsManager.carBackWheelBody.angularVelocity<-10&&1==this.powerupIsActive&&(Game.playSound("beach-buggy/buggy-power-up-duration.mp3",.4),1==s&&(Game.playSound("beach-buggy/buggy-start-gravel.mp3",.3),Game.playSound("beach-buggy/gravel-looping.mp3",.9)),this.buggyDrivingSoundPlaying=!0),1==this.buggyDrivingSoundPlaying&&1==this.powerupIsActive&&this.physicsManager.carBackWheelBody.angularVelocity>-10&&(Game.stopSound("beach-buggy/buggy-power-up-duration.mp3"),Game.playSound("beach-buggy/buggy-power-up-slow-down.mp3",.4),Game.stopSound("beach-buggy/gravel-looping.mp3"),1==i&&Game.playSound("beach-buggy/buggy-brake-gravel.mp3",.1),1==s&&Game.playSound("beach-buggy/buggy-brake-gravel.mp3",.1),this.buggyDrivingSoundPlaying=!1),1!=Game.isLowEndIPad){for(h=0;h<this.rearWheelTracks.length;h++)0!=this.rearWheelTracks[h].active?1==this.rearWheelTracks[h].active&&(this.rearWheelTracks[h].sprite.alpha-=.01,this.rearWheelTracks[h].sprite.alpha<=0&&(this.rearWheelTracks[h].active=!1,this.rearWheelTracks[h].sprite.position.y=-5e3)):this.rearWheelTracks[h].sprite.alpha=0;for(h=0;h<this.frontWheelTracks.length;h++)0!=this.frontWheelTracks[h].active?1==this.frontWheelTracks[h].active&&(this.frontWheelTracks[h].sprite.alpha-=.01,this.frontWheelTracks[h].sprite.alpha<=0&&(this.frontWheelTracks[h].active=!1,this.frontWheelTracks[h].sprite.position.y=-5e3)):this.frontWheelTracks[h].sprite.alpha=0}this.oldWheelRotation=this.currentWheelRotation,this.currentWheelRotation=this.backWheel.rotation,this.wheelRotation+=this.currentWheelRotation-this.oldWheelRotation;var o=this.terrainManager.checkChunkOverlap(this.physicsManager.carBackWheelBody);if(1==o.contact&&this.physicsManager.carBackWheelBody.angularVelocity<-8/this.physicsManager.powerupRatio){switch(this.showRearFrames=!0,o.chunkAngle){case.453786:this.rearWheelFrames.position.x=this.backWheel.position.x,this.rearWheelFrames.position.y=this.backWheel.position.y+this.backWheel.height/2+15;break;case.349066:this.rearWheelFrames.position.x=this.backWheel.position.x+5,this.rearWheelFrames.position.y=this.backWheel.position.y+this.backWheel.height/2+15;break;case.226893:case.10472:this.rearWheelFrames.position.x=this.backWheel.position.x+10,this.rearWheelFrames.position.y=this.backWheel.position.y+this.backWheel.height/2+10;break;case 0:case-.10472:this.rearWheelFrames.position.x=this.backWheel.position.x+20,this.rearWheelFrames.position.y=this.backWheel.position.y+this.backWheel.height/2+10;break;case-.226893:this.rearWheelFrames.position.x=this.backWheel.position.x+25,this.rearWheelFrames.position.y=this.backWheel.position.y+this.backWheel.height/2+5;break;case-.349066:this.rearWheelFrames.position.x=this.backWheel.position.x+30,this.rearWheelFrames.position.y=this.backWheel.position.y+this.backWheel.height/2+5;break;case-.453786:this.rearWheelFrames.position.x=this.backWheel.position.x+40,this.rearWheelFrames.position.y=this.backWheel.position.y+this.backWheel.height/2}if(this.rearWheelFrames.rotation=o.chunkAngle,this.rearWheelFrames.scale.x=this.rearWheelFrames.scale.y=1,1!=Game.isLowEndIPad)if(this.rearWheelCounter<this.rearDustParticles.length){var a=this.rearDustParticles[this.rearWheelCounter];a.active=!0,a.sprite.position.x=this.rearWheelFrames.position.x-10,a.sprite.position.y=this.rearWheelFrames.position.y-15,a.sprite.alpha=Game.getRandom(.7,1),a.sprite.scale.x=a.sprite.scale.y=Game.getRandom(.3,.4),a.sprite.rotation=Game.getRandom(0,2*Math.PI),this.rearWheelCounter++}else this.rearWheelCounter=0}else this.rearWheelFrames.alpha-=.1,this.showRearFrames=!1,this.rearWheelFrames.scale.x<=0&&(this.rearWheelFrames.scale.x=this.rearWheelFrames.scale.y=0),this.rearWheelFrames.alpha<=0&&(this.rearWheelFrames.alpha=0);this.wheelRotation>.5&&1==o.contact&&(this.wheelRotation=0,this.placeRearWheelTrack(this.backWheel.position,o.chunkAngle)),1==this.showFrontFrames&&(this.frontWheelFrames.alpha+=.1,this.frontWheelFrames.alpha>=1&&(this.frontWheelFrames.alpha=1)),1==this.showRearFrames&&(this.rearWheelFrames.alpha+=.1,this.rearWheelFrames.alpha>=1&&(this.rearWheelFrames.alpha=1)),this.oldFrontWheelRotation=this.currentFrontWheelRotation,this.currentFrontWheelRotation=this.frontWheel.rotation,this.frontWheelRotation+=this.currentFrontWheelRotation-this.oldFrontWheelRotation;var r=this.terrainManager.checkChunkOverlap(this.physicsManager.carFrontWheelBody);if(1==r.contact&&this.physicsManager.carBackWheelBody.angularVelocity<-8/this.physicsManager.powerupRatio){switch(this.showFrontFrames=!0,r.chunkAngle){case.453786:case.349066:case.226893:case.10472:this.frontWheelFrames.position.x=this.frontWheel.position.x-10,this.frontWheelFrames.position.y=this.frontWheel.position.y+this.frontWheel.height/2+10;break;case 0:this.frontWheelFrames.position.x=this.frontWheel.position.x+10,this.frontWheelFrames.position.y=this.frontWheel.position.y+this.frontWheel.height/2+10;break;case-.10472:this.frontWheelFrames.position.x=this.frontWheel.position.x+20,this.frontWheelFrames.position.y=this.frontWheel.position.y+this.frontWheel.height/2+10;break;case-.226893:this.frontWheelFrames.position.x=this.frontWheel.position.x+25,this.frontWheelFrames.position.y=this.frontWheel.position.y+this.frontWheel.height/2+5;break;case-.349066:case-.453786:this.frontWheelFrames.position.x=this.frontWheel.position.x+30,this.frontWheelFrames.position.y=this.frontWheel.position.y+this.frontWheel.height/2+5}1==r.contact&&this.physicsManager.carBody.velocity[1]<-110&&0==this.frontLandingPlaying&&(this.frontWheelBang.position.x=this.frontWheel.position.x,this.frontWheelBang.position.y=this.frontWheel.position.y+this.frontWheel.height/2+5,this.frontWheelBang.rotation=r.chunkAngle,this.frontWheelBang.gotoAndPlay(0),this.frontLandingPlaying=!0),1==o.contact&&this.physicsManager.carBody.velocity[1]<-110&&0==this.rearLandingPlaying&&(this.rearWheelBang.position.x=this.backWheel.position.x,this.rearWheelBang.position.y=this.backWheel.position.y+this.backWheel.height/2+5,this.rearWheelBang.rotation=o.chunkAngle,this.rearWheelBang.gotoAndPlay(0),this.rearLandingPlaying=!0,Game.playSound("beach-buggy/dirt-land-2.mp3",.4),Game.playSound("beach-buggy/thud-2.mp3",.4)),1==this.rearLandingPlaying&&++this.rearLandingTimer>=this.rearLandingLimit&&(this.rearLandingTimer=0,this.rearLandingPlaying=!1),1==this.frontLandingPlaying&&++this.frontLandingTimer>=this.frontLandingLimit&&(this.frontLandingTimer=0,this.frontLandingPlaying=!1),this.frontWheelFrames.rotation=r.chunkAngle,this.frontWheelFrames.scale.x=this.frontWheelFrames.scale.y=.8,1!=Game.isLowEndIPad&&(this.frontWheelCounter<this.dustParticles.length?((n=this.dustParticles[this.frontWheelCounter]).active=!0,n.sprite.position.x=this.frontWheelFrames.position.x-10,n.sprite.position.y=this.frontWheelFrames.position.y-15,n.sprite.alpha=Game.getRandom(.5,1),n.sprite.scale.x=n.sprite.scale.y=Game.getRandom(.2,.5),n.sprite.rotation=Game.getRandom(0,2*Math.PI),this.frontWheelCounter++):this.frontWheelCounter=0)}else this.frontWheelFrames.alpha-=.1,this.showFrontFrames=!1,this.frontWheelFrames.alpha<=0&&(this.frontWheelFrames.alpha=0);if(this.frontWheelRotation>.5&&1==r.contact&&(this.frontWheelRotation=0,this.placeFrontWheelTrack(this.frontWheel.position,r.chunkAngle)),1!=Game.isLowEndIPad){for(h=0;h<this.dustParticles.length;h++)1==this.dustParticles[h].active&&(this.dustParticles[h].sprite.alpha<=0&&(this.dustParticles[h].active=!1),this.dustParticles[h].sprite.alpha=this.dustParticles[h].sprite.alpha-.02,this.dustParticles[h].sprite.position.y-=1,this.dustParticles[h].sprite.scale.x+=.05*this.physicsManager.powerupRatio,this.dustParticles[h].sprite.scale.y+=.05*this.physicsManager.powerupRatio,this.dustParticles[h].sprite.rotation-=h/30*.03);for(h=0;h<this.rearDustParticles.length;h++)1==this.rearDustParticles[h].active&&(this.rearDustParticles[h].sprite.alpha<=0&&(this.rearDustParticles[h].active=!1),this.rearDustParticles[h].sprite.alpha-=.02,this.rearDustParticles[h].sprite.position.y-=1,this.rearDustParticles[h].sprite.scale.x+=.07*this.physicsManager.powerupRatio,this.rearDustParticles[h].sprite.scale.y+=.07*this.physicsManager.powerupRatio,this.rearDustParticles[h].sprite.rotation-=h/30*.03);if(1==this.powerupIsActive&&this.inputManager.driveForce<-150)if(this.boostParticlesCounter<this.boostParticles.length){var n=this.boostParticles[this.boostParticlesCounter];n.active=!0,n.sprite.position.x=this.mainHolder.toLocal(new PIXI.Point(20,0),this.exhaust).x,n.sprite.position.y=this.mainHolder.toLocal(new PIXI.Point,this.exhaust).y,n.sprite.alpha=Game.getRandom(.6,1),n.sprite.scale.x=n.sprite.scale.y=Game.getRandom(.5,1),this.boostParticlesCounter++}else this.boostParticlesCounter=0;for(var h=0;h<this.boostParticles.length;h++)1==this.boostParticles[h].active&&(this.boostParticles[h].sprite.alpha<=0&&(this.boostParticles[h].active=!1),this.boostParticles[h].sprite.alpha-=.05,this.boostParticles[h].sprite.scale.x+=.1,this.boostParticles[h].sprite.scale.y+=.1)}this.physicsManager.stepPhysics(),this.inputManager.tick(),this.positionViewport();var l=Math.round(this.health/1e3*200);l<0&&(l=0),this.healthBar.width=l,this.healthBar2.width+=(l-this.healthBar2.width)/30;Math.abs(this.carBody.rotation%(2*Math.PI)/(2*Math.PI));this.terrainManager.tick(t.smoothing,this.mainHolder.position.x),this.bgLayer.tick(t.smoothing,this.mainHolder.position),this.bgLayer2.tick(t.smoothing,this.mainHolder.position),this.skyLayer.tick(t.smoothing,this.mainHolder.position),1!=Game.isLowEndIPad&&(this.fgLayer.tick(t.smoothing,this.mainHolder.position),this.fgUndershape.position.x=this.fgLayer.container.position.x-this.fgLayer.currentChunkIndex*Game.stageWidth/4,this.fgUndershape.position.y=this.fgLayer.container.position.y+700),1==this.terrainManager.checkChunkOverlap(this.physicsManager.carBody).contact?0==this.flipEnabled&&(this.flipEnabled=!0,this.flipping=!1,this.flipEnableDelay=this.killTween(this.flipEnableDelay),this.flipEnableDelay=TweenMax.delayedCall(.5,function(){"gameplay-beach-buggy-flip"!=this.game.ui.mode&&this.game.ui.setUI("gameplay-beach-buggy-flip")},null,this)):1==this.flipEnabled&&(this.flipEnabled=!1,this.flipEnableDelay=this.killTween(this.flipEnableDelay),this.flipEnableDelay=TweenMax.delayedCall(.5,function(){"gameplay-beach-buggy"!=this.game.ui.mode&&(this.game.ui.setUI("gameplay-beach-buggy"),this.game.powerUpManager.resumeGame())},null,this))}},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&this.inputManager.keyDown(t)},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&(this.inputManager.keyUp(t),"spacebar"==t&&this.flipAction())},t.prototype.pause=function(t){0==t&&(Game.pauseSound("beach-buggy/music.mp3"),e.prototype.pause.call(this,t)),this.pauseResumeTween(this.healthCoolDownTimer,"pause"),this.pauseResumeTween(this.flipEnableDelay,"pause"),this.pauseResumeTween(this.checkpointTimer,"pause"),Game.pauseSound("beach-buggy/checkpoint.mp3"),Game.pauseSound("beach-buggy/crash-1.mp3"),Game.pauseSound("beach-buggy/crash-2.mp3"),Game.pauseSound("beach-buggy/buggy-idle.mp3"),Game.pauseSound("beach-buggy/dirt-land-1.mp3"),Game.pauseSound("beach-buggy/dirt-land-2.mp3"),Game.pauseSound("beach-buggy/time-running-out.mp3"),Game.pauseSound("beach-buggy/buggy-power-up-start.mp3"),Game.pauseSound("beach-buggy/buggy-power-up-duration.mp3"),Game.pauseSound("beach-buggy/buggy-starting.mp3"),Game.pauseSound("beach-buggy/buggy-power-up-slow-down.mp3"),Game.pauseSound("beach-buggy/buggy-slow-down.mp3"),Game.pauseSound("beach-buggy/buggy-brake-gravel.mp3"),Game.pauseSound("beach-buggy/buggy-start-gravel.mp3"),Game.pauseSound("beach-buggy/buggy-power-up-transform.mp3"),Game.pauseSound("beach-buggy/buggy-power-down-transform.mp3"),Game.pauseSound("beach-buggy/buggy-accelerating.mp3"),Game.pauseSound("beach-buggy/gravel-looping.mp3"),Game.pauseSound("beach-buggy/thud-1.mp3"),Game.pauseSound("beach-buggy/thud-2.mp3"),Game.pauseSound("beach-buggy/triple-selfie.mp3"),Game.pauseSound("beach-buggy/triple-yeyahh.mp3"),Game.pauseSound("beach-buggy/hudson-hello.mp3"),Game.pauseSound("beach-buggy/hudson-alright-gameshakers.mp3"),Game.pauseSound("beach-buggy/kenzie-its-kenzie.mp3"),Game.pauseSound("beach-buggy/kenzie-fully-charged.mp3"),Game.pauseSound("beach-buggy/babe-woo.mp3"),Game.pauseSound("beach-buggy/babe-here-i-come.mp3"),Game.pauseSound("beach-buggy/triple-cmon.mp3"),Game.pauseSound("beach-buggy/triple-i-lost-a-shoe.mp3"),Game.pauseSound("beach-buggy/hudson-hmmm.mp3"),Game.pauseSound("beach-buggy/hudson-no-way.mp3"),Game.pauseSound("beach-buggy/kenzie-aww.mp3"),Game.pauseSound("beach-buggy/kenzie-jeez-louise.mp3"),Game.pauseSound("beach-buggy/babe-problem.mp3"),Game.pauseSound("beach-buggy/babe-upsy-daisy.mp3"),Game.pauseSound("beach-buggy/triple-yeah-woo-yeah.mp3"),Game.pauseSound("beach-buggy/hudson-later-gators.mp3"),Game.pauseSound("beach-buggy/kenzie-easy-squeezy.mp3"),this.timer.pause(),this.rearWheelFrames.stop(),this.frontWheelFrames.stop(),this.terrainManager.pause(),this.game.powerUpManager.pause(),this.physicsManager.pause()},t.prototype.resume=function(){e.prototype.resume.call(this),this.pauseResumeTween(this.healthCoolDownTimer,"resume"),this.pauseResumeTween(this.flipEnableDelay,"resume"),this.pauseResumeTween(this.checkpointTimer,"resume"),Game.resumeSound("beach-buggy/music.mp3"),Game.resumeSound("beach-buggy/checkpoint.mp3"),Game.resumeSound("beach-buggy/crash-1.mp3"),Game.resumeSound("beach-buggy/crash-2.mp3"),Game.resumeSound("beach-buggy/buggy-idle.mp3"),Game.resumeSound("beach-buggy/dirt-land-1.mp3"),Game.resumeSound("beach-buggy/dirt-land-2.mp3"),Game.resumeSound("beach-buggy/time-running-out.mp3"),Game.resumeSound("beach-buggy/buggy-power-up-start.mp3"),Game.resumeSound("beach-buggy/buggy-power-up-duration.mp3"),Game.resumeSound("beach-buggy/buggy-starting.mp3"),Game.resumeSound("beach-buggy/buggy-power-up-slow-down.mp3"),Game.resumeSound("beach-buggy/buggy-slow-down.mp3"),Game.resumeSound("beach-buggy/buggy-brake-gravel.mp3"),Game.resumeSound("beach-buggy/buggy-start-gravel.mp3"),Game.resumeSound("beach-buggy/buggy-power-up-transform.mp3"),Game.resumeSound("beach-buggy/buggy-power-down-transform.mp3"),Game.resumeSound("beach-buggy/buggy-accelerating.mp3"),Game.resumeSound("beach-buggy/gravel-looping.mp3"),Game.resumeSound("beach-buggy/thud-1.mp3"),Game.resumeSound("beach-buggy/thud-2.mp3"),Game.resumeSound("beach-buggy/triple-selfie.mp3"),Game.resumeSound("beach-buggy/triple-yeyahh.mp3"),Game.resumeSound("beach-buggy/hudson-hello.mp3"),Game.resumeSound("beach-buggy/hudson-alright-gameshakers.mp3"),Game.resumeSound("beach-buggy/kenzie-its-kenzie.mp3"),Game.resumeSound("beach-buggy/kenzie-fully-charged.mp3"),Game.resumeSound("beach-buggy/babe-woo.mp3"),Game.resumeSound("beach-buggy/babe-here-i-come.mp3"),Game.resumeSound("beach-buggy/triple-cmon.mp3"),Game.resumeSound("beach-buggy/triple-i-lost-a-shoe.mp3"),Game.resumeSound("beach-buggy/hudson-hmmm.mp3"),Game.resumeSound("beach-buggy/hudson-no-way.mp3"),Game.resumeSound("beach-buggy/kenzie-aww.mp3"),Game.resumeSound("beach-buggy/kenzie-jeez-louise.mp3"),Game.resumeSound("beach-buggy/babe-problem.mp3"),Game.resumeSound("beach-buggy/babe-upsy-daisy.mp3"),Game.resumeSound("beach-buggy/triple-yeah-woo-yeah.mp3"),Game.resumeSound("beach-buggy/hudson-later-gators.mp3"),Game.resumeSound("beach-buggy/kenzie-easy-squeezy.mp3"),this.timer.resume(),this.rearWheelFrames.play(),this.frontWheelFrames.play(),this.physicsManager.resume(),this.terrainManager.resume(),this.game.powerUpManager.resume(),this.game.ui.setUI("gameplay-beach-buggy"),this.game.powerUpManager.resumeGame()},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause")},t.prototype.destroy=function(){e.prototype.destroy.call(this),Game.stopSound("beach-buggy/checkpoint.mp3"),Game.stopSound("beach-buggy/crash-1.mp3"),Game.stopSound("beach-buggy/crash-2.mp3"),Game.stopSound("beach-buggy/buggy-idle.mp3"),Game.stopSound("beach-buggy/dirt-land-1.mp3"),Game.stopSound("beach-buggy/dirt-land-2.mp3"),Game.stopSound("beach-buggy/time-running-out.mp3"),Game.stopSound("beach-buggy/buggy-power-up-start.mp3"),Game.stopSound("beach-buggy/buggy-starting.mp3"),Game.stopSound("beach-buggy/buggy-power-up-duration.mp3"),Game.stopSound("beach-buggy/buggy-slow-down.mp3"),Game.stopSound("beach-buggy/buggy-power-up-slow-down.mp3"),Game.stopSound("beach-buggy/buggy-brake-gravel.mp3"),Game.stopSound("beach-buggy/buggy-start-gravel.mp3"),Game.stopSound("beach-buggy/buggy-power-up-transform.mp3"),Game.stopSound("beach-buggy/buggy-power-down-transform.mp3"),Game.stopSound("beach-buggy/buggy-accelerating.mp3"),Game.stopSound("beach-buggy/gravel-looping.mp3"),Game.stopSound("beach-buggy/thud-1.mp3"),Game.stopSound("beach-buggy/thud-2.mp3"),Game.stopSound("beach-buggy/triple-selfie.mp3"),Game.stopSound("beach-buggy/triple-yeyahh.mp3"),Game.stopSound("beach-buggy/hudson-hello.mp3"),Game.stopSound("beach-buggy/hudson-alright-gameshakers.mp3"),Game.stopSound("beach-buggy/kenzie-its-kenzie.mp3"),Game.stopSound("beach-buggy/kenzie-fully-charged.mp3"),Game.stopSound("beach-buggy/babe-woo.mp3"),Game.stopSound("beach-buggy/babe-here-i-come.mp3"),Game.stopSound("beach-buggy/triple-cmon.mp3"),Game.stopSound("beach-buggy/triple-i-lost-a-shoe.mp3"),Game.stopSound("beach-buggy/hudson-hmmm.mp3"),Game.stopSound("beach-buggy/hudson-no-way.mp3"),Game.stopSound("beach-buggy/kenzie-aww.mp3"),Game.stopSound("beach-buggy/kenzie-jeez-louise.mp3"),Game.stopSound("beach-buggy/babe-problem.mp3"),Game.stopSound("beach-buggy/babe-upsy-daisy.mp3"),Game.stopSound("beach-buggy/triple-yeah-woo-yeah.mp3"),Game.stopSound("beach-buggy/hudson-later-gators.mp3"),Game.stopSound("beach-buggy/kenzie-easy-squeezy.mp3"),this.mainHolder.removeChild(this.head),this.mainHolder.removeChild(this.carBody),this.mainHolder.removeChild(this.frontWheel),this.mainHolder.removeChild(this.backWheel),this.mainHolder.removeChild(this.frontWheelFrames),this.mainHolder.removeChild(this.rearWheelFrames),this.mainHolder.removeChild(this.rearWheelBang),this.mainHolder.removeChild(this.frontWheelBang),this.mainHolder.removeChild(this.bodyBang),Game.displayStore.returnPooledItem(this.damageDetectorBack),Game.displayStore.returnPooledItem(this.damageDetectorFront),Game.displayStore.returnPooledItem(this.damageDetectorTop),Game.displayStore.returnPooledItem(this.frontWheelFrames),Game.displayStore.returnPooledItem(this.rearWheelFrames),Game.displayStore.returnPooledItem(this.frontWheelBang),Game.displayStore.returnPooledItem(this.rearWheelBang),Game.displayStore.returnPooledItem(this.bodyBang),this.flipEnableDelay=this.killTween(this.flipEnableDelay),this.healthCoolDownTimer=this.killTween(this.healthCoolDownTimer),this.checkpointTimer=this.killTween(this.checkpointTimer),this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.terrainManager.destroy(),this.physicsManager.destroy(),this.inputManager.destroy(),this.timer.destroy(),console.log("destroying beach buggy"),this.dustBurst.destroy(),this.sparkBurst.destroy(),this.tutorialOverlay.destroy();for(t=0;t<this.frontWheelTracks.length;++t)Game.displayStore.returnPooledItem(this.frontWheelTracks[t].sprite);for(t=0;t<this.rearWheelTracks.length;++t)Game.displayStore.returnPooledItem(this.rearWheelTracks[t].sprite);for(t=0;t<this.dustParticles.length;++t)Game.displayStore.returnPooledItem(this.dustParticles[t].sprite);for(t=0;t<this.rearDustParticles.length;++t)Game.displayStore.returnPooledItem(this.rearDustParticles[t].sprite);for(var t=0;t<this.boostParticles.length;++t)Game.displayStore.returnPooledItem(this.boostParticles[t].sprite)},t.checkpointDistance=50,t.checkpointTimeWindow=8,t.smoothing=5,t.cameraMotionEaseAmount=5,t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),VolcanoSkydiveGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.fireworkColourArray=[{colour:16776218},{colour:2048255},{colour:16725274},{colour:16718551},{colour:1965906}],i.id="volcanoSkydiveGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.setBackgroundColor(13421772),this.calcDistanceCounter=0,this.calcDistanceCounterLimit=30,this.characterRotateLimits=[-1.2,1.2],this.fallCurrentPos=0,this.fallLastPos=0,this.fallPointDistance=10,this.hitLandingTarget=!1,this.shieldPulseCount=0,this.shieldPulseIteration=.08,this.shieldTweenActive=!1,this.paraRotationMax=.5,this.paraRotationEaseAmount=200,this.cameraTrackDivePos=50,this.lastCharPosY=0,this.charPosDiffY=0,this.lastCharPosX=0,this.charPosDiffX=0,this.currentDistance=0,this.landingGlideLeft=!1,this.landingGlideRight=!1,this.islandVertOffset=1250,this.maxAltitude=3e4,this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),this.cameraPanEaseAmountY=10,this.cameraPanEaseAmountX=20,this.cameraPanEaseAmountYLanding=10,this.cameraPanEaseAmountXLanding=10,this.indicatorState=1,this.indicatorStatePrevious=1,this.rotateCorrectStrength=6,this.difficultyIndex=0,this.parachuteOpen=!1,this.difficultyParams=new Array,this.difficultyParams.push({landingRadius:300,dropHeight:1e4,windRange:.4,obstacleAggressiveness:300,landingRingRange:100,windPoints:[.4]}),this.difficultyParams.push({landingRadius:300,dropHeight:15e3,windRange:.6,obstacleAggressiveness:300,landingRingRange:400,windPoints:[.2,.6]}),this.difficultyParams.push({landingRadius:300,dropHeight:2e4,windRange:1,obstacleAggressiveness:200,landingRingRange:800,windPoints:[.2,.5,.7]}),this.difficultyParams.push({landingRadius:300,dropHeight:this.maxAltitude,windRange:1,obstacleAggressiveness:100,landingRingRange:1200,windPoints:[.1,.3,.5,.7,.9]}),this.landed=!1,this.cloudAndWindSpawnAllowed=!0,this.currentZoomScale=1,this.scaleEaseAmount=5,1==Game.useFilters&&(this.waveDMSprite=Game.displayStore.getSprite("volcano-skydive/wave-dm-map.png"),this.waveDMFilter=new PIXI.filters.DisplacementFilter(this.waveDMSprite),this.waveDMFilter.scale.x=0,this.waveDMFilter.scale.y=0),this.popRing=Game.displayStore.getSprite("volcano-skydive/obstacle-pop-ring.png"),this.characterStartYPos=100,this.screenFadeElementTop=Game.displayStore.getSprite("volcano-skydive/screen-fade-element.png"),this.screenFadeElementLeft=Game.displayStore.getSprite("volcano-skydive/screen-fade-element.png"),this.screenFadeElementRight=Game.displayStore.getSprite("volcano-skydive/screen-fade-element.png"),this.screenFadeElementBottom=Game.displayStore.getSprite("volcano-skydive/screen-fade-element.png"),this.landingZoneIndicatorLimits=[80,Game.stageWidth-80],this.characterStartPos=[Game.stageWidth/2,this.characterStartYPos],this.characterPosLanded=[Game.stageWidth/2,Game.stageHeight/2],this.waterRearLayer=Game.displayStore.getSprite("volcano-skydive/sea-back-layer.png"),this.landingRingFront=Game.displayStore.getSprite("volcano-skydive/landing-ring-front-300-radius.png"),this.landingRingRear=Game.displayStore.getSprite("volcano-skydive/landing-ring-rear-300-radius.png"),this.jungleHolder=Game.displayStore.getContainer("volcano-skydive/jungle-holder"),this.jungleForegroundHolder=Game.displayStore.getContainer("volcano-skydive/jungle-landing-foreground-holder"),this.jungleMidgroundHolder=Game.displayStore.getContainer("volcano-skydive/jungle-landing-midground-holder"),this.jungleForegroundItemsHolder=Game.displayStore.getContainer("volcano-skydive/fg-items-holder"),this.jungleMidgroundItemsHolder=Game.displayStore.getContainer("volcano-skydive/mg-items-holder"),this.jungleTiles=new Array;for(l=0;l<10;l++){p=Game.displayStore.getSprite("volcano-skydive/jungle-bg.png");this.jungleTiles.push(p),this.jungleHolder.addChild(p),p.position.x=0-10*p.width/2+l*p.width}this.waterRearLayer.width=10*this.jungleTiles[0].width,this.waterRearLayer.position.x=this.jungleTiles[0].position.x,this.jungleMidgroundTiles=new Array;for(l=0;l<10;l++){p=Game.displayStore.getSprite("volcano-skydive/jungle-landing-midground.png");this.jungleMidgroundTiles.push(p),this.jungleMidgroundHolder.addChild(p),p.position.x=0-10*p.width/2+l*p.width}this.jungleForegroundTiles=new Array;for(l=0;l<10;l++){p=Game.displayStore.getSprite("volcano-skydive/jungle-landing-foreground.png");this.jungleForegroundTiles.push(p),this.jungleForegroundHolder.addChild(p),p.position.x=0-10*p.width/2+l*p.width}this.parachuteLineHolder=Game.displayStore.getContainer("volcano-skydive/parachute-line-holder"),this.parachuteLines=new Array;for(l=0;l<10;l++){p=Game.displayStore.getSprite("volcano-skydive/parachute-line.png");this.parachuteLines.push(p),this.parachuteLineHolder.addChild(p),p.position.x=0-10*p.width/2+l*p.width}this.jungleForegroundItems=new Array;for(l=0;l<30;l++)this.jungleForegroundItems.push(Game.displayStore.getSprite("volcano-skydive/fg-item-1.png"),Game.displayStore.getSprite("volcano-skydive/fg-item-2.png"),Game.displayStore.getSprite("volcano-skydive/fg-item-3.png")),this.jungleForegroundItemsHolder.addChild(this.jungleForegroundItems[l]);this.jungleMidgroundItems=new Array;for(l=0;l<30;l++)this.jungleMidgroundItems.push(Game.displayStore.getSprite("volcano-skydive/mg-item-1.png"),Game.displayStore.getSprite("volcano-skydive/mg-item-2.png"),Game.displayStore.getSprite("volcano-skydive/mg-item-3.png")),this.jungleMidgroundItemsHolder.addChild(this.jungleMidgroundItems[l]);for(l=0;l<this.jungleForegroundItems.length;l++)this.jungleForegroundItems[l].scale.x=Math.random()<.5?-1:1,this.jungleForegroundItems[l].scale.y=1,this.jungleForegroundItems[l].position.x=Game.getRandom(-this.jungleForegroundHolder.width,this.jungleForegroundHolder.width),this.jungleForegroundItems[l].position.y=90,this.jungleMidgroundItems[l].scale.x=Math.random()<.5?-1:1,this.jungleMidgroundItems[l].scale.y=1,this.jungleMidgroundItems[l].position.x=Game.getRandom(-this.jungleMidgroundHolder.width,this.jungleMidgroundHolder.width),this.jungleMidgroundItems[l].position.y=70;this.landingParticlesHolder=Game.displayStore.getContainer("volcano-skydive/landing-particle-holder"),this.landingParticles=new Array;for(l=0;l<20;l++)this.landingParticles.push({dust:Game.displayStore.getSprite("volcano-skydive/landing-particle-1.png"),active:!1,delay:0}),this.landingParticles[l].dust.scale.x=1,this.landingParticles[l].dust.scale.y=1,this.landingParticles[l].dust.alpha=0,this.landingParticles[l].dust.position.x=Game.getRandom(-60,60),this.landingParticles[l].dust.position.y=Game.getRandom(-7,7),this.landingParticles[l].dust.rotation=Game.getRandom(0,2*Math.PI),this.landingParticles[l].dust.tint=9459759,this.landingParticles[l].dust.visible=!1,this.landingParticlesHolder.addChild(this.landingParticles[l].dust);this.jungleLandBG=Game.displayStore.getSprite("volcano-skydive/jungle-land-bg.png"),this.jungleLandBG.width=3*this.jungleTiles[0].width,this.jungleLandBG.height=300,this.jungleLandBG.position.x=this.jungleTiles[0].position.x,this.jungleHolder.addChild(this.jungleLandBG),this.jungleHolder.addChild(this.waterRearLayer),this.currentRotateStrength=0,this.currentGlideStrength=0,this.sidewaysForce=80,this.airResistance=10,this.wobbleTickerCounter=0,this.wobbleRate=.6,this.rotateStrength=20,this.rotateEaseAmount=5,this.glideStrength=20,this.glideEaseAmount=5,3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),this.rotatingLeft=!1,this.rotatingRight=!1,this.leftKeyIsDown=!1,this.rightKeyIsDown=!1,Game.coreData.setCurrentRide("volcano-skydive"),this.tutorialViewed=Game.coreData.getGameTutorialViewed("volcano-skydive"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.mainHolder=Game.displayStore.getContainer("volcano-skydive/main-holder"),this.sky=Game.displayStore.getSprite("volcano-skydive/sky.png"),this.sky.scale.x=Game.stageWidth/5,this.skyOverlay=Game.displayStore.getSprite("volcano-skydive/sky-overlay.png"),this.stars=Game.displayStore.getSprite("volcano-skydive/stars.png"),this.skyOverlay.scale.x=Game.stageWidth/5,this.sun=Game.displayStore.getSprite("volcano-skydive/sun.png"),this.sun.position.x=730,this.sun.position.y=30,this.container.addChild(this.sky),this.container.addChild(this.skyOverlay),this.container.addChild(this.sun),this.container.addChild(this.stars),this.hill0Holder=Game.displayStore.getContainer("volcano-skydive/fg-holder"),this.hill1Holder=Game.displayStore.getContainer("volcano-skydive/bg-holder"),this.hill2Holder=Game.displayStore.getContainer("volcano-skydive/mg-holder"),this.hill0Bottom=Game.displayStore.getSprite("volcano-skydive/hills-3-bottom.png"),this.hill1Bottom=Game.displayStore.getSprite("volcano-skydive/hills-1-bottom.png"),this.hill2Bottom=Game.displayStore.getSprite("volcano-skydive/hills-2-bottom.png"),this.hill0Bottom.height=Game.stageHeight,this.hill1Bottom.height=Game.stageHeight,this.hill2Bottom.height=Game.stageHeight;this.hill0Tiles=new Array;for(l=0;l<5;l++){p=Game.displayStore.getSprite("volcano-skydive/hills-3.png");this.hill0Tiles.push(p),this.hill0Holder.addChild(p),p.position.x=0-5*p.width/2+l*p.width}this.hill1Tiles=new Array;for(l=0;l<5;l++){p=Game.displayStore.getSprite("volcano-skydive/hills-1.png");this.hill1Tiles.push(p),this.hill1Holder.addChild(p),p.position.x=0-5*p.width/2+l*p.width}this.hill2Tiles=new Array;for(l=0;l<5;l++){p=Game.displayStore.getSprite("volcano-skydive/hills-2.png");this.hill2Tiles.push(p),this.hill2Holder.addChild(p),p.position.x=0-5*p.width/2+l*p.width}if(this.container.addChild(this.hill2Holder),this.container.addChild(this.hill2Bottom),this.container.addChild(this.hill1Holder),this.container.addChild(this.hill1Bottom),this.container.addChild(this.hill0Holder),this.container.addChild(this.hill0Bottom),this.physicsManager=new VolcanoSkydivePhysicsManager(this,this.mainHolder),this.physicsManager.initPhysicsWorld(),this.physicsDebugger=new PhysicsDebugger(this,this.mainHolder,this.physicsManager.world),this.rearCloudHolder=Game.displayStore.getContainer("volcano-skydive/rear-cloud-holder"),this.mainHolder.addChild(this.rearCloudHolder),1==Game.useFilters&&(this.mainHolder.filters=[this.waveDMFilter]),this.mainHolder.addChild(this.parachuteLineHolder),this.mainHolder.addChild(this.jungleHolder),this.obstacleManager=new VolcanoSkydiveObstacleManager(this,this.mainHolder),this.cloudManager=new VolcanoSkydiveCloudManager(this,this.mainHolder,this.rearCloudHolder),0==Game.isLowEndIPad){this.fireworkElements=new Array;for(l=0;l<3;l++){var i=Game.displayStore.getSprite("volcano-skydive/fireworks-particle-1.png"),s=this.physicsManager.getFireworkPrimaryElement();i.position.x=-1e3,i.blendMode=PIXI.BLEND_MODES.ADD;var o=new Array;this.mainHolder.addChild(i);for(var a=0;a<10;a++){var r=Game.displayStore.getSprite("volcano-skydive/fireworks-particle-2.png"),n=this.physicsManager.getFireworkExplodeElement();r.position.x=-1e3,r.blendMode=PIXI.BLEND_MODES.ADD,o.push({sprite:r,body:n,active:!1}),this.mainHolder.addChild(r)}this.fireworkElements.push({primarySprite:i,primaryBody:s,active:!1,explodedElements:o})}this.fireworkTrails=new Array;for(l=0;l<100;l++){p=Game.displayStore.getSprite("volcano-skydive/fireworks-particle-trail.png");this.fireworkTrails.push({sprite:p,active:!1}),p.position.x=-1e3,p.blendMode=PIXI.BLEND_MODES.ADD,this.mainHolder.addChild(p)}}this.selectedCharacter=Game.coreData.getSelectedCharacter()||"lena","lena"==this.selectedCharacter&&(this.characterBack=Game.displayStore.getSprite("volcano-skydive/character-falling-lena-body-back.png"),this.mainHolder.addChild(this.characterBack)),this.characterArmLeft=Game.displayStore.getSprite("volcano-skydive/character-falling-"+this.selectedCharacter+"-arm-left.png"),this.mainHolder.addChild(this.characterArmLeft),this.characterArmRight=Game.displayStore.getSprite("volcano-skydive/character-falling-"+this.selectedCharacter+"-arm-right.png"),this.mainHolder.addChild(this.characterArmRight),this.characterHelmet=Game.displayStore.getSprite("volcano-skydive/character-falling-"+this.selectedCharacter+"-body.png"),this.mainHolder.addChild(this.characterHelmet),this.currentCharacterDropElement=this.characterHelmet,this.characterHandLeft=Game.displayStore.getSprite("volcano-skydive/hand-left.png"),this.mainHolder.addChild(this.characterHandLeft),this.characterHandLeft.alpha=0,this.characterHandRight=Game.displayStore.getSprite("volcano-skydive/hand-right.png"),this.mainHolder.addChild(this.characterHandRight),this.characterHandRight.alpha=0,this.parachuteString1=Game.displayStore.getSprite("volcano-skydive/parachute-string.png"),this.parachuteString2=Game.displayStore.getSprite("volcano-skydive/parachute-string.png"),this.parachuteStringCanopyPos1=[0,0],this.parachuteStringCanopyPos2=[0,0],this.parachuteStringCharacterPos1=[0,0],this.parachuteStringCharacterPos2=[0,0];this.tickets=new Array;for(l=0;l<2;l++){var h=Game.ticketPool.getTicket();this.tickets.push({ticket:h})}this.jungleForegroundHolder.addChild(this.jungleForegroundItemsHolder),this.jungleMidgroundHolder.addChild(this.jungleMidgroundItemsHolder),this.mainHolder.addChild(this.jungleMidgroundHolder),this.mainHolder.addChild(this.jungleForegroundHolder),this.mainHolder.addChild(this.parachuteString1),this.mainHolder.addChild(this.parachuteString2),this.landingPad=Game.displayStore.getSprite("volcano-skydive/landing-pad.png"),this.mainHolder.addChild(this.landingPad),this.characterParachuteOpenHead=Game.displayStore.getSprite("volcano-skydive/character-"+this.selectedCharacter+"-head.png"),this.characterParachuteOpenHeadHolder=Game.displayStore.getContainer("volcano-skydive/parachute-open-head-holder"),this.characterParachuteOpenTorso=Game.displayStore.getSprite("volcano-skydive/character-"+this.selectedCharacter+"-body.png"),this.characterParachuteOpenLegLeft=Game.displayStore.getSprite("volcano-skydive/character-"+this.selectedCharacter+"-leg-left.png"),this.characterParachuteOpenLegRight=Game.displayStore.getSprite("volcano-skydive/character-"+this.selectedCharacter+"-leg-right.png"),this.characterParachuteOpenShadow=Game.displayStore.getSprite("volcano-skydive/parachute-open-shadow.png"),this.characterParachuteOpenShadow.scale.x=this.characterParachuteOpenShadow.scale.y=3.5,this.characterParachuteOpenShadow.alpha=0,this.mainHolder.addChild(this.characterParachuteOpenShadow),this.mainHolder.addChild(this.characterParachuteOpenLegLeft),this.mainHolder.addChild(this.characterParachuteOpenLegRight),this.mainHolder.addChild(this.characterParachuteOpenTorso),this.characterParachuteOpenHeadHolder.addChild(this.characterParachuteOpenHead),this.mainHolder.addChild(this.characterParachuteOpenHeadHolder),this.mainHolder.addChild(this.landingParticlesHolder),this.powerUpShield=Game.displayStore.getSprite("volcano-skydive/powerup-shield.png"),this.powerUpShield.blendMode=PIXI.BLEND_MODES.ADD,this.mainHolder.addChild(this.powerUpShield),this.powerUpShield.visible=!1,this.powerUpActive=!1,this.parachuteCanopyHolder=Game.displayStore.getContainer("volcano-skydive/parachute-canopy-holder"),this.parachuteCanopyTopDown=Game.displayStore.getSprite("volcano-skydive/parachute-canopy-top-down.png"),this.parachuteCanopySideOn=Game.displayStore.getSprite("volcano-skydive/parachute-canopy-side-on.png"),this.parachuteCanopyHolder.addChild(this.parachuteCanopyTopDown),this.parachuteCanopyHolder.addChild(this.parachuteCanopySideOn),this.parachuteCanopySideOn.position.y=38,this.parachuteCanopyHolder.visible=!1,this.mainHolder.addChild(this.parachuteCanopyHolder),this.popRing.position.x=-3e3,this.mainHolder.addChild(this.popRing),1==Game.useFilters&&this.mainHolder.addChild(this.waveDMSprite),this.airBalloon=Game.displayStore.getContainer("volcano-skydive/balloon-holder"),this.airBalloonBasket=this.airBalloon.getContainer("volcano-skydive/balloon-basket-holder"),this.airBalloonTop=this.airBalloon.getSprite("volcano-skydive/balloon-top.png"),this.airBalloonBody=Game.displayStore.getSprite("volcano-skydive/character-"+this.selectedCharacter+"-balloon-body.png"),this.airBalloonHead=Game.displayStore.getSprite("volcano-skydive/character-"+this.selectedCharacter+"-balloon-head.png"),this.airBalloonBasket.addChildAt(this.airBalloonBody,0),this.airBalloonBasket.addChild(this.airBalloonHead),this.airBalloonBody.position.x=75.5,this.airBalloonBody.position.y=154.5,this.airBalloonHead.position.x=79.5,this.airBalloonHead.position.y=72.5,this.airBalloonBasket.rotation=.035,this.airBalloon.rotation=-.035,this.mainHolder.addChild(this.airBalloon),this.powerUpShieldBalloon=this.airBalloon.getSprite("volcano-skydive/powerup-shield-balloon.png"),this.powerUpShieldBalloon.visible=!1,this.powerUpShieldBalloon.blendMode=PIXI.BLEND_MODES.ADD,this.scaleHolder=Game.displayStore.getContainer("volcano-skydive/scale-holder"),this.scaleHolder.addChild(this.mainHolder),this.container.addChild(this.scaleHolder),this.inputManager=new VolcanoSkydiveInputManager(this,this.mainHolder),this.characterPhysicsElements=this.physicsManager.getCharacterPhysicsElements(this.characterStartPos),this.characterPhysicsElementsParachuteOpen=this.physicsManager.getCharacterPhysicsElementsParachuteOpen(),this.windManager=new VolcanoSkydiveWindManager(this,this.container,this.mainHolder,this.characterPhysicsElements.characterHeadBody,this.characterPhysicsElements.characterLeftArmBody,this.characterPhysicsElements.characterRightArmBody),this.landingZoneIndicator=Game.displayStore.getSprite("volcano-skydive/landing-zone-target-indicator.png"),this.container.addChild(this.landingZoneIndicator),this.landingZoneIndicatorArrowLeft=Game.displayStore.getSprite("volcano-skydive/landing-zone-indicator-arrow-left.png"),this.landingZoneIndicatorArrowRight=Game.displayStore.getSprite("volcano-skydive/landing-zone-indicator-arrow-right.png"),this.container.addChild(this.landingZoneIndicatorArrowLeft),this.container.addChild(this.landingZoneIndicatorArrowRight),this.altitudeMeter=new VolcanoSkydiveAltitudeMeter(this,this.container,this.maxAltitude,this.islandVertOffset),this.hill0Object={startPos:1600,endPos:70,posTween:null,currentPos:0},this.hill0Object.currentPos=this.hill0Object.startPos,this.hill0Object.posTween=TweenMax.to(this.hill0Object,1,{currentPos:this.hill0Object.endPos,ease:Expo.easeIn}),this.hill0Object.posTween.pause(),this.hill1Object={startPos:900,endPos:50,posTween:null,currentPos:0},this.hill1Object.currentPos=this.hill1Object.startPos,this.hill1Object.posTween=TweenMax.to(this.hill1Object,1,{currentPos:this.hill1Object.endPos,ease:Expo.easeIn}),this.hill1Object.posTween.pause(),this.hill2Object={startPos:700,endPos:0,posTween:null,currentPos:0},this.hill2Object.currentPos=this.hill2Object.startPos,this.hill2Object.posTween=TweenMax.to(this.hill2Object,1,{currentPos:this.hill2Object.endPos,ease:Expo.easeIn}),this.hill2Object.posTween.pause(),this.newRound(!0),this.splashParticles=new Array;for(var l=0;l<40;l++){var p=Game.displayStore.getSprite("volcano-skydive/water-splash-particle.png"),c=this.physicsManager.getWaterSplashParticle();p.position.x=-2e3,this.mainHolder.addChild(p),this.splashParticles.push({body:c,sprite:p,active:!1})}this.scoreHolder=Game.displayStore.getContainer("volcano-skydive/score-holder"),this.scoreBg=Game.displayStore.getSprite("volcano-skydive/score-bg.png"),this.scoreHolder.position.y=60,this.scoreText=Game.displayStore.getBitmapText("volcano-skydive/score-font"),this.scoreText.scale.x=this.scoreText.scale.y=.8,this.scoreText.position.x=this.scoreHolder.position.x+20,this.scoreText.position.y=this.scoreHolder.position.y+7,this.scoreBg.position.x=this.scoreHolder.position.x-40,this.scoreBg.position.y=this.scoreHolder.position.y+16,this.scoreHolder.addChild(this.scoreBg),this.scoreHolder.addChild(this.scoreText),this.scoreText.text="0",this.container.addChild(this.scoreHolder),1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("volcano-skydive",!0),Game.setSoundVolume("volcano-skydive/background-music.wav",0),Game.fadeSound("volcano-skydive/background-music.wav",3,.4),Game.playSound("volcano-skydive/background-music.wav")},t.prototype.manageHillsProgress=function(e){this.hill0Holder.position.x-=this.charPosDiffX/10,this.hill1Holder.position.x-=this.charPosDiffX/20,this.hill2Holder.position.x-=this.charPosDiffX/40,this.hill0Object.posTween.time(1-e),this.hill1Object.posTween.time(1-e),this.hill2Object.posTween.time(1-e),this.hill0Holder.position.y=this.hill0Object.currentPos,this.hill1Holder.position.y=this.hill1Object.currentPos,this.hill2Holder.position.y=this.hill2Object.currentPos,this.hill0Bottom.position.y=this.hill0Holder.position.y+this.hill0Holder.height,this.hill1Bottom.position.y=this.hill1Holder.position.y+this.hill1Holder.height,this.hill2Bottom.position.y=this.hill2Holder.position.y+this.hill2Holder.height},t.prototype.setSkyOverlayAlpha=function(e){this.skyOverlay.alpha=e,this.stars.alpha=e/2},t.prototype.getObstaclePhysics=function(){return this.physicsManager.getObstaclePhysics()},t.prototype.startGameplay=function(){this.game.ui.triggerEnjoyTheRide(),this.game.ui.setUI("gameplay-volcano-skydive"),this.startGameIntro()},t.prototype.obstacleCollisionCheck=function(e,t){this.obstacleManager.obstacleCollisionCheck(e,t,this.powerUpActive)},t.prototype.handleObstacleHit=function(e){1!=this.powerUpActive&&(this.physicsManager.handleObstacleHit(e),this.currentDistanceString=String(this.currentDistance),this.scoreText.text=this.currentDistanceString,this.obstaclePopAnimation(e))},t.prototype.obstaclePopAnimation=function(e){var t=[e.position[0],Game.stageHeight-e.position[1]];1==Game.useFilters&&(this.waveDMFilter.scale.x=50,this.waveDMFilter.scale.y=50,this.waveDMSprite.scale.x=.5,this.waveDMSprite.scale.y=.5,this.waveDMSprite.position.x=t[0],this.waveDMSprite.position.y=t[1],this.filterTimeline=this.killTween(this.filterTimeline),this.filterTimeline=new TimelineMax,this.filterTimeline.add([TweenMax.to(this.waveDMFilter.scale,.5,{x:0,y:0,ease:Quad.easeOut}),TweenMax.to(this.waveDMSprite.scale,.5,{x:4,y:4,ease:Quad.easeOut})],0)),this.popRing.position.x=t[0],this.popRing.position.y=t[1],this.popRing.scale.x=0,this.popRing.scale.y=0,this.popRing.alpha=.4,this.obstaclePopRingTimeline=this.killTween(this.obstaclePopRingTimeline),this.obstaclePopRingTimeline=new TimelineMax,this.obstaclePopRingTimeline.add([TweenMax.to(this.popRing.scale,.2,{x:3,y:3,ease:Quad.easeOut}),TweenMax.to(this.popRing,.2,{alpha:0,ease:Quad.easeOut})],0)},t.prototype.startGameIntro=function(){this.game.powerUpManager.startGame(5),this.introTimeline=this.killTween(this.introTimeline),this.introTimeline=new TimelineMax({onComplete:this.startDive,onCompleteParams:[this]}),this.introTimeline.add([TweenMax.to(this.mainHolder.position,5,{y:this.introScrollEndPos,ease:Sine.easeInOut}),TweenMax.to(this.scaleHolder.scale,5,{x:1,y:1,ease:Sine.easeOut}),TweenMax.to(this.airBalloon,5/3,{rotation:.035,yoyo:!0,repeat:2,ease:Sine.easeInOut}),TweenMax.to(this.airBalloonHead.position,5/8,{y:"+=6",yoyo:!0,repeat:3,ease:Sine.easeInOut}),TweenMax.to(this.airBalloonBasket,5/3,{rotation:-.035,yoyo:!0,repeat:1,delay:5/3,ease:Sine.easeInOut})],0);var e=[{id:"volcano-skydive/lena-current.mp3"},{id:"volcano-skydive/lena-lets-do-this.mp3"},{id:"volcano-skydive/lena-race-you.mp3"},{id:"volcano-skydive/lena-im-ready.mp3"}],t=Game.getRandom(0,3,!0);e[t]&&this.introTimeline.call(Game.playSound,[e[t].id,e[t].vol||1],this,2),Game.setSoundVolume("volcano-skydive/background-wind-looping.wav",0),Game.fadeSound("volcano-skydive/background-wind-looping.wav",1,.1),Game.playSound("volcano-skydive/background-wind-looping.wav")},t.prototype.startDive=function(e){e.currentCharacterDropElement=e.characterHelmet,e.gameState=1,e.game.powerUpManager.betweenRoundPowerUpResume(),e.windManager.makeMeterVisible(),e.altitudeMeter.makeMeterVisible(1),e.cloudManager.setGameState(1),e.launchCharacter(e);var t=e.characterStartPos[1]+500;e.addPhysicsBodyToWorld(e.characterPhysicsElements.characterHeadBody),e.addPhysicsBodyToWorld(e.characterPhysicsElements.characterLeftArmBody),e.addPhysicsBodyToWorld(e.characterPhysicsElements.characterLeftHandBody),e.addPhysicsBodyToWorld(e.characterPhysicsElements.characterRightArmBody),e.addPhysicsBodyToWorld(e.characterPhysicsElements.characterRightHandBody),e.addPhysicsConstraintToWorld(e.characterPhysicsElements.armLeftConstraint),e.addPhysicsConstraintToWorld(e.characterPhysicsElements.handLeftConstraint),e.addPhysicsConstraintToWorld(e.characterPhysicsElements.armRightConstraint),e.addPhysicsConstraintToWorld(e.characterPhysicsElements.handRightConstraint),e.addPhysicsSpringToWorld(e.characterPhysicsElements.armLeftSpring),e.addPhysicsSpringToWorld(e.characterPhysicsElements.armRightSpring),e.characterPhysicsElements.characterHeadBody.position[0]=e.characterStartPos[0],e.characterPhysicsElements.characterHeadBody.position[1]=t,e.characterPhysicsElements.characterLeftArmBody.position[0]=e.characterStartPos[0]-100,e.characterPhysicsElements.characterLeftArmBody.position[1]=t,e.characterPhysicsElements.characterRightArmBody.position[0]=e.characterStartPos[0]+100,e.characterPhysicsElements.characterRightArmBody.position[1]=t,e.characterPhysicsElements.characterLeftHandBody.position[0]=e.characterStartPos[0]+110,e.characterPhysicsElements.characterLeftHandBody.position[1]=t,e.characterPhysicsElements.characterRightHandBody.position[0]=e.characterStartPos[0]-110,e.characterPhysicsElements.characterRightHandBody.position[1]=t,TweenMax.to(e.landingZoneIndicator,.4,{alpha:1,ease:Sine.easeOut}),e.resetBody(e.characterPhysicsElements.characterHeadBody),e.resetBody(e.characterPhysicsElements.characterLeftArmBody),e.resetBody(e.characterPhysicsElements.characterRightArmBody),e.resetBody(e.characterPhysicsElements.characterLeftHandBody),e.resetBody(e.characterPhysicsElements.characterRightHandBody),e.characterArmLeft.visible=!0,e.characterArmRight.visible=!0,e.characterHelmet.visible=!0,e.characterHandLeft.visible=!0,e.characterHandRight.visible=!0},t.prototype.launchCharacter=function(e){e.characterPhysicsElements.characterHeadBody.applyImpulse([0,-200]),e.characterPhysicsElements.characterLeftArmBody.applyImpulse([0,-200]),e.characterPhysicsElements.characterRightArmBody.applyImpulse([0,-200])},t.prototype.calculateDistanceFallen=function(){this.fallCurrentPos=this.characterHelmet.position.y,this.fallCurrentPos-this.fallLastPos>this.fallPointDistance&&(this.currentDistance++,this.currentDistanceString=String(this.currentDistance),this.scoreText.text=this.currentDistanceString),this.fallLastPos=this.fallCurrentPos},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"playbuttonlarge":this.resume();break;case"pause-button":this.pause(!1)}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(t){if(e.prototype.tick.call(this,t),1!=this.paused&&1!=this.tutorialOverlay.isOpen&&1!=this.wristbandOverlay.isOpen){switch(this.gameState){case 0:this.manageIntro(),this.moveCamera();break;case 1:this.manageDive(),this.moveCamera(),this.manageLandingZoneIndicator(),this.manageShieldPosition();break;case 2:this.manageParachuteLanding(),this.moveCameraParachuteLanding(),this.manageLandingZoneIndicator(),this.manageShieldPosition(),this.manageFireworks(),this.landedParticles()}this.manageShieldPulse(),this.charPosDiffY=this.currentCharacterDropElement.position.y-this.lastCharPosY,this.charPosDiffX=this.currentCharacterDropElement.position.x-this.lastCharPosX,2==this.gameState&&this.manageParallax(),++this.calcDistanceCounter>=this.calcDistanceCounterLimit&&(this.calcDistanceCounter=0,this.calculateDistanceFallen()),this.windManager.tick(this.currentCharacterDropElement.position.y),this.cloudManager.updateCharacterPosition(this.currentCharacterDropElement.position),this.cloudManager.tick(this.charPosDiffX,this.charPosDiffY,this.scaleHolder.scale.x),this.lastCharPosY=this.currentCharacterDropElement.position.y,this.lastCharPosX=this.currentCharacterDropElement.position.x}},t.prototype.manageIntro=function(){},t.prototype.manageDive=function(){this.wobbleTickerCounter+=this.wobbleRate,this.wobbleTickerCounter>=2*Math.PI&&(this.wobbleTickerCounter=2*-Math.PI),this.physicsManager.stepPhysics(),this.characterHelmet.position.x=this.characterPhysicsElements.characterHeadBody.position[0],this.characterHelmet.position.y=Game.stageHeight-this.characterPhysicsElements.characterHeadBody.position[1],this.characterHelmet.rotation=-this.characterPhysicsElements.characterHeadBody.angle,"lena"==this.selectedCharacter&&(this.characterBack.position.x=this.characterHelmet.position.x,this.characterBack.position.y=this.characterHelmet.position.y-15,this.characterBack.rotation=this.characterHelmet.rotation),this.characterArmLeft.position.x=this.characterPhysicsElements.characterLeftArmBody.position[0],this.characterArmLeft.position.y=Game.stageHeight-this.characterPhysicsElements.characterLeftArmBody.position[1],this.characterArmLeft.rotation=-this.characterPhysicsElements.characterLeftArmBody.angle,this.characterArmRight.position.x=this.characterPhysicsElements.characterRightArmBody.position[0],this.characterArmRight.position.y=Game.stageHeight-this.characterPhysicsElements.characterRightArmBody.position[1],this.characterArmRight.rotation=-this.characterPhysicsElements.characterRightArmBody.angle,this.characterHandLeft.position.x=this.characterPhysicsElements.characterLeftHandBody.position[0],this.characterHandLeft.position.y=Game.stageHeight-this.characterPhysicsElements.characterLeftHandBody.position[1],this.characterHandLeft.rotation=-this.characterPhysicsElements.characterLeftHandBody.angle,this.characterHandRight.position.x=this.characterPhysicsElements.characterRightHandBody.position[0],this.characterHandRight.position.y=Game.stageHeight-this.characterPhysicsElements.characterRightHandBody.position[1],this.characterHandRight.rotation=-this.characterPhysicsElements.characterRightHandBody.angle,this.obstacleManager.tick(this.currentCharacterDropElement.position),this.characterHelmet.position.y>=this.cameraTrackDivePos&&this.altitudeMeter.tick(this.currentCharacterDropElement.position),1==this.leftKeyIsDown&&0==this.rightKeyIsDown&&(this.rotatingLeft=!0,this.rotatingRight=!1),0==this.leftKeyIsDown&&1==this.rightKeyIsDown&&(this.rotatingRight=!0,this.rotatingLeft=!1),0==this.leftKeyIsDown&&0==this.rightKeyIsDown&&(this.rotatingRight=!1,this.rotatingLeft=!1),this.rotateCharacter()},t.prototype.landedParticles=function(){if(1==this.landed)for(var e=0;e<this.landingParticles.length-1;e++){var t=this.landingParticles[e];1==t.active&&(t.delay++,t.delay<60&&(t.dust.alpha<.5&&(t.dust.alpha+=.03),t.dust.scale.x+=.07,t.dust.scale.y+=.07,t.dust.position.y-=.3),t.delay>70&&(t.dust.alpha-=.09,t.dust.scale.x>0&&(t.dust.scale.x-=.08,t.dust.scale.y-=.08,t.dust.position.y-=.2)),t.dust.alpha<=0&&(t.active=!1,t.dust.visible=!1),t.dust.position.x>0?(t.dust.rotation-=Game.getRandom(.02,.04),t.dust.position.x+=.7):t.dust.position.x<0&&(t.dust.rotation+=Game.getRandom(.02,.04),t.dust.position.x-=.7))}},t.prototype.manageLandingZoneIndicator=function(){if(1!=this.landed){var e=this.container.toLocal(this.landingZonePos,this.mainHolder);e.x<this.landingZoneIndicatorLimits[0]?(e.x=this.landingZoneIndicatorLimits[0],this.indicatorState=0):e.x>this.landingZoneIndicatorLimits[1]?(e.x=this.landingZoneIndicatorLimits[1],this.indicatorState=2):this.indicatorState=1,this.landingZoneIndicator.position.x=e.x,this.indicatorState!=this.indicatorStatePrevious&&this.setIndicatorStateVisuals(this.indicatorState),this.indicatorStatePrevious=this.indicatorState}},t.prototype.setIndicatorStateVisuals=function(e){switch(e){case 0:this.landingZoneIndicatorArrowLeft.visible=!0,this.landingZoneIndicatorArrowRight.visible=!1;break;case 1:this.landingZoneIndicatorArrowLeft.visible=!1,this.landingZoneIndicatorArrowRight.visible=!1;break;case 2:this.landingZoneIndicatorArrowLeft.visible=!1,this.landingZoneIndicatorArrowRight.visible=!0}},t.prototype.leftInputDown=function(){this.leftKeyIsDown=!0,this.rightKeyIsDown=!1},t.prototype.leftInputUp=function(){this.leftKeyIsDown=!1,this.rightKeyIsDown=!1},t.prototype.rightInputDown=function(){this.leftKeyIsDown=!1,this.rightKeyIsDown=!0},t.prototype.rightInputUp=function(){this.leftKeyIsDown=!1,this.rightKeyIsDown=!1},t.prototype.manageShieldPulse=function(){if(0!=this.powerUpActive&&1!=this.shieldTweenActive){this.shieldPulseCount+=this.shieldPulseIteration,this.shieldPulseCount>=2*Math.PI&&(this.shieldPulseCount=2*-Math.PI);var e=Math.sin(this.shieldPulseCount)/20;0==this.gameState?(this.powerUpShieldBalloon.scale.x=1+e,this.powerUpShieldBalloon.scale.y=1+e):(this.powerUpShield.scale.x=1+e,this.powerUpShield.scale.y=1+e)}},t.prototype.rotateCharacter=function(){1==this.rotatingLeft&&(this.currentRotateStrength=this.simpleEase(this.currentRotateStrength,this.rotateStrength,this.rotateEaseAmount)),1==this.rotatingRight&&(this.currentRotateStrength=this.simpleEase(this.currentRotateStrength,-this.rotateStrength,this.rotateEaseAmount)),0==this.rotatingLeft&&0==this.rotatingRight&&(this.currentRotateStrength=this.simpleEase(this.currentRotateStrength,0,this.rotateEaseAmount));var e=this.characterPhysicsElements.characterHeadBody.angle;e<=this.characterRotateLimits[0]-.1&&(this.characterPhysicsElements.characterHeadBody.angularVelocity=(this.characterRotateLimits[0]-e)*this.rotateCorrectStrength,this.currentRotateStrength=0),e>=this.characterRotateLimits[1]+.1&&(this.characterPhysicsElements.characterHeadBody.angularVelocity=(this.characterRotateLimits[1]-e)*this.rotateCorrectStrength,this.currentRotateStrength=0);var t=4*Math.sin(this.wobbleTickerCounter);this.characterPhysicsElements.characterLeftArmBody.angularVelocity=this.currentRotateStrength+t,this.characterPhysicsElements.characterRightArmBody.angularVelocity=this.currentRotateStrength+t;var i=Math.abs(Math.cos(this.characterHelmet.rotation)*this.airResistance),s=Math.sin(this.characterHelmet.rotation)*this.sidewaysForce;this.characterPhysicsElements.characterHeadBody.applyForce([s,i]),this.characterPhysicsElements.characterLeftArmBody.applyForce([s,i]),this.characterPhysicsElements.characterRightArmBody.applyForce([s,i])},t.prototype.moveCamera=function(){if(!(this.characterHelmet.position.y<this.cameraTrackDivePos)){if(this.characterHelmet.position.y>this.dropHeight&&0==this.parachuteOpen)return this.gameState=2,this.parachuteOpen=!0,this.game.powerUpManager.betweenRoundPowerUpPause(),this.swapOutParachuteCharacter(),void this.placeTickets(this.landingZonePos.x);this.jungleHolder.position.x=this.currentCharacterDropElement.position.x,this.jungleForegroundHolder.position.x=this.currentCharacterDropElement.position.x,this.jungleMidgroundHolder.position.x=this.currentCharacterDropElement.position.x,this.parachuteLineHolder.position.x=this.currentCharacterDropElement.position.x;var e=0-this.characterHelmet.position.x+this.characterStartPos[0];this.mainHolder.position.x+=(e-this.mainHolder.position.x)/this.cameraPanEaseAmountX;var t=0-this.characterHelmet.position.y+this.characterStartPos[1];this.mainHolder.position.y+=(t-this.mainHolder.position.y)/this.cameraPanEaseAmountY}},t.prototype.calculateLanding=function(){if(1!=this.landed){this.landed=!0;for(var e=0;e<this.landingParticles.length-1;e++)this.landingParticles[e].active=!0,this.landingParticles[e].delay=Game.getRandom(0,40),this.landingParticles[e].dust.alpha=0,this.landingParticles[e].dust.scale.x=this.landingParticles[e].dust.scale.y=Game.getRandom(.3,.5),this.landingParticles[e].dust.visible=!0;var t=this.landingZonePos.x,i=Math.abs(this.currentCharacterDropElement.position.x-t),s=[{id:"volcano-skydive/thud-1.mp3"},{id:"volcano-skydive/thud-2.mp3"},{id:"volcano-skydive/thud-3.mp3"}],o=Game.getRandom(0,2,!0);if(s[o]&&Game.playSound(s[o].id,s[o].vol||.7),i<this.difficultyParams[this.difficultyIndex].landingRadius)console.log("Landing success!!!!"),this.hitLandingTarget=!0,this.launchFireworks(),this.beginScreenFade(!1),this.collectTickets(),(a=[{id:"volcano-skydive/lena-bonkers.mp3"},{id:"volcano-skydive/lena-i-love-it.mp3"},{id:"volcano-skydive/lena-laugh.mp3"},{id:"volcano-skydive/lena-nailed-it-down.mp3"},{id:"volcano-skydive/lena-keep-the-game-going.mp3"}])[o=Game.getRandom(0,4,!0)]&&Game.playSound(a[o].id,a[o].vol||1);else{console.log("Langing failed.........."),this.hitLandingTarget=!1,this.beginGameOverDelay();var a=[{id:"volcano-skydive/lena-clear-throat.mp3"},{id:"volcano-skydive/lena-keep-the-game-going.mp3"}];a[o=Game.getRandom(0,1,!0)]&&Game.playSound(a[o].id,a[o].vol||1)}this.game.powerUpManager.setGameOverCooldown(!0);this.currentCharacterDropElement.position.y}},t.prototype.launchFireworks=function(){if(1!=Game.isLowEndIPad){this.fireworksOn=!0,this.fireworksLaunchTimeline=this.killTween(this.fireworksLaunchTimeline),this.fireworksLaunchTimeline=new TimelineMax;var e=Game.getRandom(0,.6),t=Game.getRandom(0,.6),i=Game.getRandom(0,.6);this.fireworksLaunchTimeline.call(this.launchSingleFirework,[0,1.5],this,e),this.fireworksLaunchTimeline.call(this.launchSingleFirework,[1,.8],this,t),this.fireworksLaunchTimeline.call(this.launchSingleFirework,[2,2.3],this,i),this.fireworksLaunchTimeline.call(this.popSingleFirework,[0],this,e+.3),this.fireworksLaunchTimeline.call(this.popSingleFirework,[1],this,t+.3),this.fireworksLaunchTimeline.call(this.popSingleFirework,[2],this,i+.3)}},t.prototype.launchSingleFirework=function(e,t){this.fireworkElements[e].active=!0,this.fireworkElements[e].primarySprite.visible=!0,this.fireworkElements[e].primaryBody.position[0]=this.landingZonePos.x,this.fireworkElements[e].primaryBody.position[1]=this.characterPhysicsElementsParachuteOpen.characterHeadBody.position[1];var i=Game.getRandom(0,this.fireworkColourArray.length-1,!0);this.fireworkElements[e].primarySprite.tint=this.fireworkColourArray[i].colour;for(var s=0;s<10;s++)this.fireworkElements[e].explodedElements[s].sprite.tint=this.fireworkElements[e].primarySprite.tint;this.resetBody(this.fireworkElements[e].primaryBody);Math.PI;var o=Math.cos(t),a=Math.sin(t),r=Game.getRandom(10,14);this.fireworkElements[e].primaryBody.applyImpulse([r*o,r*a]),this.physicsManager.addBodyToWorld(this.fireworkElements[e].primaryBody)},t.prototype.popSingleFirework=function(e){var t=new Array;t[0]=this.fireworkElements[e].primaryBody.position[0],t[1]=this.fireworkElements[e].primaryBody.position[1],this.fireworkElements[e].primarySprite.visible=!1,this.physicsManager.removeBodyFromWorld(this.fireworkElements[e].primaryBody);for(var i=0;i<10;i++){var s=2*Math.PI/10*i,o=Math.cos(s),a=Math.sin(s),r=Game.getRandom(10,15);this.resetBody(this.fireworkElements[e].explodedElements[i].body),this.fireworkElements[e].explodedElements[i].active=!0,this.fireworkElements[e].explodedElements[i].sprite.scale.x=1.2,this.fireworkElements[e].explodedElements[i].sprite.scale.y=1.2,this.fireworkElements[e].explodedElements[i].sprite.visible=!0,this.fireworkElements[e].explodedElements[i].body.position[0]=t[0],this.fireworkElements[e].explodedElements[i].body.position[1]=t[1],this.fireworkElements[e].explodedElements[i].body.applyImpulse([r*o,r*a]),this.physicsManager.addBodyToWorld(this.fireworkElements[e].explodedElements[i].body)}},t.prototype.manageFireworks=function(){if(1!=Game.isLowEndIPad&&0!=this.hitLandingTarget){this.placeTrail(),this.manageFireworksTrails();for(var e=0;e<this.fireworkElements.length;e++)if(0!=this.fireworkElements[e].active){var t=this.fireworkElements[e].primarySprite,i=this.fireworkElements[e].primaryBody;t.position.x=i.position[0],t.position.y=Game.stageHeight-i.position[1],t.rotation=-i.angle;for(var s=0;s<this.fireworkElements[e].explodedElements.length;s++)if(0!=this.fireworkElements[e].explodedElements[s].active){var o=this.fireworkElements[e].explodedElements[s].sprite,a=this.fireworkElements[e].explodedElements[s].body;o.position.x=a.position[0],o.position.y=Game.stageHeight-a.position[1],o.rotation=-a.angle,o.scale.x-=.01,o.scale.y-=.01,o.scale.x<=0&&(this.physicsManager.removeBodyFromWorld(a),o.visible=!1)}}}},t.prototype.placeTrail=function(){var e,t,i=Game.getRandom(0,this.fireworkElements.length-1,!0),s=!1;if(1==this.fireworkElements[i].primarySprite.visible)s=!0,e=[this.fireworkElements[i].primarySprite.position.x+Game.getRandom(-2,2),this.fireworkElements[i].primarySprite.position.y+Game.getRandom(-2,2)],t=this.fireworkElements[i].primarySprite.tint;else{var o=Game.getRandom(0,this.fireworkElements[i].explodedElements.length-1,!0);1==this.fireworkElements[i].explodedElements[o].active&&(s=!0,e=[this.fireworkElements[i].explodedElements[o].sprite.position.x+Game.getRandom(-2,2),this.fireworkElements[i].explodedElements[o].sprite.position.y+Game.getRandom(-2,2)],t=this.fireworkElements[i].explodedElements[o].sprite.tint)}if(1==s)for(var a=0;a<this.fireworkTrails.length;a++)if(1!=this.fireworkTrails[a].active)return this.fireworkTrails[a].active=!0,this.fireworkTrails[a].sprite.visible=!0,this.fireworkTrails[a].sprite.position.x=e[0],this.fireworkTrails[a].sprite.position.y=e[1],this.fireworkTrails[a].sprite.tint=t,this.fireworkTrails[a].sprite.scale.x=1,this.fireworkTrails[a].sprite.scale.y=1,void(this.fireworkTrails[a].sprite.alpha=1)},t.prototype.manageFireworksTrails=function(){for(var e=0;e<this.fireworkTrails.length;e++)1==this.fireworkTrails[e].active&&(this.fireworkTrails[e].sprite.scale.x-=.01,this.fireworkTrails[e].sprite.scale.y-=.01,this.fireworkTrails[e].sprite.alpha-=.01,this.fireworkTrails[e].sprite.scale.x<=0&&(this.fireworkTrails[e].active=!1,this.fireworkTrails[e].sprite.visible=!1))},t.prototype.placeTickets=function(e){for(var t=0;t<this.tickets.length;t++)this.tickets[t].ticket=Game.ticketPool.getTicket(),this.tickets[t].ticket.container.position.x=e-150+300*t,this.mainHolder.addChild(this.tickets[t].ticket.container)},t.prototype.collectTickets=function(){this.collectTicketsTimeline=this.killTween(this.collectTicketsTimeline),this.collectTicketsTimeline=new TimelineMax;for(var e=0;e<this.tickets.length;e++)this.collectTicketsTimeline.call(this.tickets[e].ticket.collect,null,this.tickets[e].ticket,.5*e)},t.prototype.swapOutParachuteCharacter=function(){var e=[0,0];e[0]=this.characterPhysicsElements.characterHeadBody.position[0],e[1]=this.characterPhysicsElements.characterHeadBody.position[1],this.parachuteCanopyHolder.position.x=e[0],this.parachuteCanopyHolder.position.y=Game.stageHeight-e[1],this.parachuteCanopyHolder.scale.x=.25,this.parachuteCanopyHolder.scale.y=.25,this.parachuteCanopyHolder.visible=!0,this.characterParachuteOpenTorso.position.x=this.characterHelmet.position.x,this.characterParachuteOpenTorso.position.y=this.characterHelmet.position.y,this.currentCharacterDropElement=this.characterParachuteOpenTorso,this.parachuteString1.visible=!0,this.parachuteString2.visible=!0;this.physicsManager.setGroundLevel(Game.stageHeight-(this.dropHeight+this.islandVertOffset+100)),this.removePhysicsBodyFromWorld(this.characterPhysicsElements.characterHeadBody),this.removePhysicsBodyFromWorld(this.characterPhysicsElements.characterLeftArmBody),this.removePhysicsBodyFromWorld(this.characterPhysicsElements.characterRightArmBody),this.removePhysicsConstraintFromWorld(this.characterPhysicsElements.armLeftConstraint),this.removePhysicsConstraintFromWorld(this.characterPhysicsElements.armRightConstraint),this.removePhysicsBodyFromWorld(this.characterPhysicsElements.characterLeftHandBody),this.removePhysicsBodyFromWorld(this.characterPhysicsElements.characterRightHandBody),this.removePhysicsConstraintFromWorld(this.characterPhysicsElements.handLeftConstraint),this.removePhysicsConstraintFromWorld(this.characterPhysicsElements.handRightConstraint),this.removePhysicsSpringFromWorld(this.characterPhysicsElements.armLeftSpring),this.removePhysicsSpringFromWorld(this.characterPhysicsElements.armRightSpring),this.characterArmLeft.visible=!1,this.characterArmRight.visible=!1,this.characterHelmet.visible=!1,this.characterHandLeft.visible=!1,this.characterHandRight.visible=!1,this.characterParachuteOpenHeadHolder.visible=!0,this.characterParachuteOpenHead.visible=!0,this.characterParachuteOpenTorso.visible=!0,this.characterParachuteOpenLegLeft.visible=!0,this.characterParachuteOpenLegRight.visible=!0,this.characterPhysicsElementsParachuteOpen.characterHeadBody.position[0]=e[0],this.characterPhysicsElementsParachuteOpen.characterHeadBody.position[1]=e[1]-10,this.characterPhysicsElementsParachuteOpen.torsoElementBody.position[0]=e[0],this.characterPhysicsElementsParachuteOpen.torsoElementBody.position[1]=e[1]+30,this.characterPhysicsElementsParachuteOpen.parachuteCanopyBody.position[0]=e[0],this.characterPhysicsElementsParachuteOpen.parachuteCanopyBody.position[1]=e[1],this.characterPhysicsElementsParachuteOpen.characterLegLeftBody.position[0]=e[0]-20,this.characterPhysicsElementsParachuteOpen.characterLegLeftBody.position[1]=e[1]+50,this.characterPhysicsElementsParachuteOpen.characterLegRightBody.position[0]=e[0]+20,this.characterPhysicsElementsParachuteOpen.characterLegRightBody.position[1]=e[1]+50,this.resetBody(this.characterPhysicsElementsParachuteOpen.characterHeadBody),this.resetBody(this.characterPhysicsElementsParachuteOpen.torsoElementBody),this.resetBody(this.characterPhysicsElementsParachuteOpen.parachuteCanopyBody),this.resetBody(this.characterPhysicsElementsParachuteOpen.characterLegLeftBody),this.resetBody(this.characterPhysicsElementsParachuteOpen.characterLegRightBody),this.addPhysicsBodyToWorld(this.characterPhysicsElementsParachuteOpen.characterHeadBody),this.addPhysicsBodyToWorld(this.characterPhysicsElementsParachuteOpen.torsoElementBody),this.addPhysicsBodyToWorld(this.characterPhysicsElementsParachuteOpen.parachuteCanopyBody),this.addPhysicsBodyToWorld(this.characterPhysicsElementsParachuteOpen.characterLegLeftBody),this.addPhysicsBodyToWorld(this.characterPhysicsElementsParachuteOpen.characterLegRightBody),this.addPhysicsConstraintToWorld(this.characterPhysicsElementsParachuteOpen.headConstraint),this.addPhysicsConstraintToWorld(this.characterPhysicsElementsParachuteOpen.legLeftConstraint),this.addPhysicsConstraintToWorld(this.characterPhysicsElementsParachuteOpen.legRightConstraint),this.addPhysicsSpringToWorld(this.characterPhysicsElementsParachuteOpen.canopySpring),this.characterPhysicsElementsParachuteOpen.characterHeadBody.velocity[0]=this.characterPhysicsElements.characterHeadBody.velocity[0],this.characterPhysicsElementsParachuteOpen.characterHeadBody.velocity[1]=this.characterPhysicsElements.characterHeadBody.velocity[1],this.characterPhysicsElementsParachuteOpen.characterHeadBody.angularVelocity=10*this.characterPhysicsElements.characterHeadBody.angularVelocity,this.characterPhysicsElementsParachuteOpen.torsoElementBody.velocity[0]=this.characterPhysicsElements.characterHeadBody.velocity[0],this.characterPhysicsElementsParachuteOpen.torsoElementBody.velocity[1]=this.characterPhysicsElements.characterHeadBody.velocity[1],this.characterPhysicsElementsParachuteOpen.torsoElementBody.angularVelocity=10*this.characterPhysicsElements.characterHeadBody.angularVelocity,this.landingParticlesHolder.position.x=e[0],this.characterParachuteOpenShadow.position.x=e[0],this.jungleHolder.position.x=e[0],this.jungleForegroundHolder.position.x=e[0],this.jungleMidgroundHolder.position.x=e[0],this.parachuteLineHolder.position.x=e[0],this.parachuteCanopySideOn.scale.y=.2,this.parachuteCanopyTopDown.scale.x=1,this.parachuteCanopyTopDown.scale.y=1,this.parachuteOpenTimeline=this.killTween(this.parachuteOpenTimeline),this.parachuteOpenTimeline=new TimelineMax,this.parachuteOpenTimeline.add([TweenMax.to(this.parachuteCanopyHolder.scale,.3,{x:1,y:1,ease:Back.easeOut})],0),this.parachuteOpenTimeline.add([TweenMax.to(this.parachuteCanopyTopDown.scale,1,{y:.2,ease:Back.easeOut}),TweenMax.to(this.parachuteCanopySideOn.scale,1.2,{y:1,ease:Back.easeOut})],.2),this.parachuteOpenTimeline.add([TweenMax.to(this.parachuteCanopyTopDown.scale,.1,{x:0,y:0,ease:Sine.easeInOut})],.8);var t=[{id:"volcano-skydive/swoosh-1.mp3"},{id:"volcano-skydive/swoosh-2.mp3"}],i=Game.getRandom(0,1,!0);t[i]&&Game.playSound(t[i].id,t[i].vol||1)},t.prototype.manageParachuteLanding=function(){if(1==this.leftKeyIsDown&&0==this.rightKeyIsDown&&(this.landingGlideLeft=!0,this.landingGlideRight=!1),0==this.leftKeyIsDown&&1==this.rightKeyIsDown&&(this.landingGlideLeft=!1,this.landingGlideRight=!0),0==this.leftKeyIsDown&&0==this.rightKeyIsDown&&(this.landingGlideLeft=!1,this.landingGlideRight=!1),this.glideCharacter(),this.obstacleManager.removeRemainingObstacles(),this.altitudeMeter.tick(this.currentCharacterDropElement.position),1==this.setLegsLanding){var e=this.characterPhysicsElementsParachuteOpen.characterLegLeftBody.angle,t=this.characterPhysicsElementsParachuteOpen.characterLegRightBody.angle,i=.5*Math.PI;this.characterPhysicsElementsParachuteOpen.legLeftConstraint.setMotorSpeed(2*(e-i+.5*Math.PI)),this.characterPhysicsElementsParachuteOpen.legRightConstraint.setMotorSpeed(2*(t-i+.5*Math.PI));var s=this.characterPhysicsElementsParachuteOpen.torsoElementBody.angle,i=0;this.characterPhysicsElementsParachuteOpen.torsoElementBody.angularVelocity=2*(i-s)}this.physicsManager.stepPhysics();var o;o=0==this.unhooked?30:60,0==this.parachuteKilled&&(this.characterPhysicsElementsParachuteOpen.parachuteCanopyBody.applyForce([0,o]),this.parachuteCanopyHolder.position.x=this.characterPhysicsElementsParachuteOpen.parachuteCanopyBody.position[0],this.parachuteCanopyHolder.position.y=Game.stageHeight-this.characterPhysicsElementsParachuteOpen.parachuteCanopyBody.position[1]),this.characterParachuteOpenHeadHolder.position.x=this.characterPhysicsElementsParachuteOpen.characterHeadBody.position[0],this.characterParachuteOpenHeadHolder.position.y=Game.stageHeight-this.characterPhysicsElementsParachuteOpen.characterHeadBody.position[1],this.characterParachuteOpenHeadHolder.rotation=-this.characterPhysicsElementsParachuteOpen.characterHeadBody.angle,this.characterParachuteOpenTorso.position.x=this.characterPhysicsElementsParachuteOpen.torsoElementBody.position[0],this.characterParachuteOpenTorso.position.y=Game.stageHeight-this.characterPhysicsElementsParachuteOpen.torsoElementBody.position[1],this.characterParachuteOpenTorso.rotation=-this.characterPhysicsElementsParachuteOpen.torsoElementBody.angle,this.characterParachuteOpenLegRight.position.x=this.characterPhysicsElementsParachuteOpen.characterLegRightBody.position[0],this.characterParachuteOpenLegRight.position.y=Game.stageHeight-this.characterPhysicsElementsParachuteOpen.characterLegRightBody.position[1],this.characterParachuteOpenLegRight.rotation=-this.characterPhysicsElementsParachuteOpen.characterLegRightBody.angle,this.characterParachuteOpenLegLeft.position.x=this.characterPhysicsElementsParachuteOpen.characterLegLeftBody.position[0],this.characterParachuteOpenLegLeft.position.y=Game.stageHeight-this.characterPhysicsElementsParachuteOpen.characterLegLeftBody.position[1],this.characterParachuteOpenLegLeft.rotation=-this.characterPhysicsElementsParachuteOpen.characterLegLeftBody.angle;var a=Math.cos(-Math.PI+this.parachuteCanopyHolder.rotation),r=Math.sin(-Math.PI+this.parachuteCanopyHolder.rotation),n=Math.cos(-Math.PI+.25*Math.PI+this.characterParachuteOpenTorso.rotation),h=Math.sin(-Math.PI+.25*Math.PI+this.characterParachuteOpenTorso.rotation);this.parachuteStringCanopyPos1[0]=this.parachuteCanopyHolder.position.x+300*a,this.parachuteStringCanopyPos1[1]=this.parachuteCanopyHolder.position.y+300*r,this.parachuteStringCharacterPos1[0]=this.characterParachuteOpenTorso.x+60*n,this.parachuteStringCharacterPos1[1]=this.characterParachuteOpenTorso.y+60*h,this.parachuteString1.position.x=this.parachuteStringCanopyPos1[0],this.parachuteString1.position.y=this.parachuteStringCanopyPos1[1],this.parachuteString1.rotation=-this.getAngle(this.parachuteStringCanopyPos1[0],this.parachuteStringCanopyPos1[1],this.parachuteStringCharacterPos1[0],this.parachuteStringCharacterPos1[1])+Math.PI/2,0==this.unhooked?this.parachuteString1.height=this.getDistance(this.parachuteStringCanopyPos1[0],this.parachuteStringCanopyPos1[1],this.parachuteStringCharacterPos1[0],this.parachuteStringCharacterPos1[1]):this.parachuteString1.height-=2;var l=Math.cos(0+this.parachuteCanopyHolder.rotation),p=Math.sin(0+this.parachuteCanopyHolder.rotation),c=Math.cos(.25*-Math.PI+this.characterParachuteOpenTorso.rotation),d=Math.sin(.25*-Math.PI+this.characterParachuteOpenTorso.rotation);this.parachuteStringCanopyPos2[0]=this.parachuteCanopyHolder.position.x+300*l,this.parachuteStringCanopyPos2[1]=this.parachuteCanopyHolder.position.y+300*p,this.parachuteStringCharacterPos2[0]=this.characterParachuteOpenTorso.x+60*c,this.parachuteStringCharacterPos2[1]=this.characterParachuteOpenTorso.y+60*d,this.parachuteString2.position.x=this.parachuteStringCanopyPos2[0],this.parachuteString2.position.y=this.parachuteStringCanopyPos2[1],this.parachuteString2.rotation=-this.getAngle(this.parachuteStringCanopyPos2[0],this.parachuteStringCanopyPos2[1],this.parachuteStringCharacterPos2[0],this.parachuteStringCharacterPos2[1])+Math.PI/2,0==this.unhooked?this.parachuteString2.height=this.getDistance(this.parachuteStringCanopyPos2[0],this.parachuteStringCanopyPos2[1],this.parachuteStringCharacterPos2[0],this.parachuteStringCharacterPos2[1]):this.parachuteString2.height-=2},t.prototype.manageShieldPosition=function(){1==this.powerUpActive&&(this.powerUpShield.position.x=this.currentCharacterDropElement.position.x,this.powerUpShield.position.y=this.currentCharacterDropElement.position.y)},t.prototype.manageParallax=function(){if(this.charPosDiffY>0&&(this.jungleHolder.position.y+=this.charPosDiffY/3),this.jungleHolder.position.x+=this.charPosDiffX/5,this.jungleForegroundHolder.position.y-=this.charPosDiffY/4.7,this.jungleMidgroundHolder.position.y-=this.charPosDiffY/5,this.landingPad.position.y-=this.charPosDiffY/5,this.characterParachuteOpenShadow.position.x=this.characterParachuteOpenTorso.position.x,this.characterParachuteOpenShadow.position.y-=this.charPosDiffY/5,this.landingParticlesHolder.position.x=this.characterParachuteOpenShadow.position.x,this.landingParticlesHolder.position.y=this.characterParachuteOpenShadow.position.y,this.characterParachuteOpenShadow.scale.x>1){var e=this.charPosDiffY/1e3*2;this.characterParachuteOpenShadow.scale.x=this.characterParachuteOpenShadow.scale.y-=e,this.characterParachuteOpenShadow.alpha<1&&(this.characterParachuteOpenShadow.alpha+=e/2.5)}for(var t=0;t<this.tickets.length;t++)this.tickets[t].ticket.container.position.y=this.jungleForegroundHolder.position.y-100},t.prototype.moveCameraParachuteLanding=function(){var e=0-this.characterParachuteOpenHeadHolder.position.x+this.characterPosLanded[0];this.mainHolder.position.x+=(e-this.mainHolder.position.x)/this.cameraPanEaseAmountXLanding;var t=0-this.characterParachuteOpenHeadHolder.position.y+this.characterPosLanded[1];this.mainHolder.position.y+=(t-this.mainHolder.position.y)/this.cameraPanEaseAmountYLanding},t.prototype.glideCharacter=function(){1!=this.setLegsLanding&&(1==this.landingGlideLeft&&(this.currentGlideStrength=this.simpleEase(this.currentGlideStrength,this.glideStrength,this.glideEaseAmount),this.currentParaRotation=this.simpleEase(this.currentParaRotation,-this.paraRotationMax,this.paraRotationEaseAmount)),1==this.landingGlideRight&&(this.currentGlideStrength=this.simpleEase(this.currentGlideStrength,-this.glideStrength,this.glideEaseAmount),this.currentParaRotation=this.simpleEase(this.currentParaRotation,this.paraRotationMax,this.paraRotationEaseAmount)),0==this.landingGlideLeft&&0==this.landingGlideRight&&(this.currentGlideStrength=this.simpleEase(this.currentGlideStrength,0,this.glideEaseAmount),this.currentParaRotation=this.simpleEase(this.currentParaRotation,0,this.paraRotationEaseAmount)),this.characterPhysicsElementsParachuteOpen.parachuteCanopyBody.applyForce([-this.currentGlideStrength,0]),this.parachuteCanopyHolder.rotation=this.currentParaRotation)},t.prototype.unhookCharacter=function(){1!=this.unhooked&&(this.unhooked=!0,this.physicsManager.unhookCharacter(this.characterPhysicsElementsParachuteOpen.canopySpring),this.killParachuteDelay=this.killTween(this.killParachuteDelay),this.killParachuteDelay=TweenMax.delayedCall(3,this.killParachute,null,this))},t.prototype.killParachute=function(){this.parachuteKilled=!0,this.physicsManager.removeBodyFromWorld(this.characterPhysicsElementsParachuteOpen.parachuteCanopyBody)},t.prototype.manageCharacterLegs=function(){1!=this.setLegsLanding&&(this.setLegsLanding=!0,this.landingZoneIndicator.visible=!1,this.landingZoneIndicatorArrowLeft.visible=!1,this.landingZoneIndicatorArrowRight.visible=!1,this.physicsManager.setCharacterLegs(this.characterPhysicsElementsParachuteOpen.legLeftConstraint,this.characterPhysicsElementsParachuteOpen.legRightConstraint,this.characterPhysicsElementsParachuteOpen.headConstraint))},t.prototype.beginGameOverDelay=function(){this.gameOverDelay=this.killTween(this.gameOverDelay),this.gameOverDelay=TweenMax.delayedCall(2,this.gameOver,[this])},t.prototype.beginScreenFade=function(e){var t;t=1==e?0:2,Game.fadeSound("volcano-skydive/background-music.wav",1,.2),Game.fadeSound("volcano-skydive/background-wind-looping.wav",1,0),this.game.powerUpManager.betweenRoundPowerUpPause(),this.screenFadeElementLeft.position.x=0,this.screenFadeElementLeft.position.y=0,this.screenFadeElementLeft.width=0,this.screenFadeElementLeft.height=Game.stageHeight,this.screenFadeElementLeft.setRegPoint(0,0),this.screenFadeElementRight.position.x=Game.stageWidth,this.screenFadeElementRight.position.y=0,this.screenFadeElementRight.width=0,this.screenFadeElementRight.height=Game.stageHeight,this.screenFadeElementRight.setRegPoint(1,0),this.screenFadeElementTop.position.x=0,this.screenFadeElementTop.position.y=0,this.screenFadeElementTop.width=Game.stageWidth,this.screenFadeElementTop.height=0,this.screenFadeElementTop.setRegPoint(0,0),this.screenFadeElementBottom.position.x=0,this.screenFadeElementBottom.position.y=Game.stageHeight,this.screenFadeElementBottom.width=Game.stageWidth,this.screenFadeElementBottom.height=0,this.screenFadeElementBottom.setRegPoint(0,1),this.container.addChild(this.screenFadeElementBottom),this.container.addChild(this.screenFadeElementTop),this.container.addChild(this.screenFadeElementRight),this.container.addChild(this.screenFadeElementLeft),this.screenFadeTimeline=this.killTween(this.screenFadeTimeline),this.screenFadeTimeline=new TimelineMax({onComplete:this.killScreenFade,onCompleteParams:[this]}),this.screenFadeTimeline.add([TweenMax.to(this.screenFadeElementLeft,1,{width:Game.stageWidth/2,ease:Quad.easeOut}),TweenMax.to(this.screenFadeElementRight,1,{width:Game.stageWidth/2,ease:Quad.easeOut}),TweenMax.to(this.screenFadeElementTop,1,{height:Game.stageHeight/2,ease:Quad.easeOut}),TweenMax.to(this.screenFadeElementBottom,1,{height:Game.stageHeight/2,ease:Quad.easeOut})],t),this.screenFadeTimeline.call(this.newRound,[!1],this),this.screenFadeTimeline.add([TweenMax.to(this.screenFadeElementLeft,1,{width:0,ease:Quad.easeOut}),TweenMax.to(this.screenFadeElementRight,1,{width:0,ease:Quad.easeOut}),TweenMax.to(this.screenFadeElementTop,1,{height:0,ease:Quad.easeOut}),TweenMax.to(this.screenFadeElementBottom,1,{height:0,ease:Quad.easeOut})],t+2)},t.prototype.killScreenFade=function(e){e.screenFadeTimeline=e.killTween(e.screenFadeTimeline)},t.prototype.newRound=function(e){this.cloudManager.resetClouds(),Game.fadeSound("volcano-skydive/background-music.wav",1,.4),this.newRoundTriggered=!1,this.parachuteOpen=!1,this.unhooked=!1,this.setLegsLanding=!1,this.hitLandingTarget=!1,this.parachuteKilled=!1,this.currentRotateStrength=0,this.currentGlideStrength=0,this.currentParaRotation=0,this.gameState=0,this.charPosDiffY=0,this.lastCharPosY=0,this.mainHolder.position.x=0,this.mainHolder.position.y=0,this.scaleHolder.position.x=0,this.scaleHolder.position.y=0,1==Game.useFilters&&(this.waveDMFilter.scale.x=0,this.waveDMFilter.scale.y=0),this.characterHelmet.position.x=this.characterStartPos[0],this.characterPhysicsElements.characterHeadBody.position[0]=this.characterStartPos[0],this.characterParachuteOpenShadow.scale.x=this.characterParachuteOpenShadow.scale.y=3.5,this.characterParachuteOpenShadow.alpha=0,this.characterArmLeft.visible=!1,this.characterArmRight.visible=!1,this.characterHelmet.visible=!1,this.characterHandLeft.visible=!1,this.characterHandRight.visible=!1,this.characterParachuteOpenHeadHolder.visible=!1,this.characterParachuteOpenTorso.visible=!1,this.characterParachuteOpenLegLeft.visible=!1,this.characterParachuteOpenLegRight.visible=!1,this.characterHelmet.position.y=0,this.airBalloon.position.x=Game.stageWidth/2,this.airBalloon.position.y=-this.airBalloon.height,this.airBalloonBasket.rotation=.035,this.airBalloon.rotation=-.035,1==this.powerUpActive?this.powerUpShieldBalloon.visible=!0:0==this.powerUpActive&&(this.powerUpShieldBalloon.visible=!1),this.landingGlideRight=!1,this.landingGlideLeft=!1,this.scaleHolder.setRegPointPixels(Game.stageWidth/2,Game.stageHeight/2),this.scaleHolder.position.x=Game.stageWidth/2,this.scaleHolder.position.y=Game.stageHeight/2,this.scaleHolder.scale.x=.4,this.scaleHolder.scale.y=.4,this.landingZoneIndicator.position.x=Game.stageWidth/2,this.landingZoneIndicator.position.y=Game.stageHeight-10,this.landingZoneIndicator.alpha=0,this.landingZoneIndicator.visible=!0,this.landingZoneIndicatorArrowLeft.position.x=20,this.landingZoneIndicatorArrowLeft.position.y=Game.stageHeight-80,this.landingZoneIndicatorArrowRight.position.x=Game.stageWidth-20,this.landingZoneIndicatorArrowRight.position.y=Game.stageHeight-80,this.landingZoneIndicatorArrowLeft.visible=!1,this.landingZoneIndicatorArrowRight.visible=!1,this.parachuteCanopySideOn.position.y=38,this.parachuteCanopyHolder.visible=!1,this.parachuteString1.visible=!1,this.parachuteString2.visible=!1,this.parachuteString1.height=0,this.parachuteString2.height=0,this.parachuteString1.rotation=0,this.parachuteString2.rotation=0,this.introScrollHeight=this.airBalloon.height+100,this.introScrollEndPos=-100,this.hill0Holder.position.y=this.hill0Object.startPos,this.hill1Holder.position.y=this.hill1Object.startPos,this.hill2Holder.position.y=this.hill2Object.startPos,this.mainHolder.position.y=this.introScrollHeight,this.cloudManager.updateCharacterPosition(this.currentCharacterDropElement.position),this.cloudManager.spawnInitialClouds(this.introScrollHeight),this.cloudAndWindSpawnAllowed=!0,this.landed=!1,this.fireworksOn=!1,this.windManager.resetWind(),this.removePhysicsBodyFromWorld(this.characterPhysicsElementsParachuteOpen.characterHeadBody),this.removePhysicsBodyFromWorld(this.characterPhysicsElementsParachuteOpen.torsoElementBody),this.removePhysicsBodyFromWorld(this.characterPhysicsElementsParachuteOpen.parachuteCanopyBody),this.removePhysicsConstraintFromWorld(this.characterPhysicsElementsParachuteOpen.headConstraint),this.removePhysicsConstraintFromWorld(this.characterPhysicsElementsParachuteOpen.legRightConstraint),this.removePhysicsConstraintFromWorld(this.characterPhysicsElementsParachuteOpen.legLeftConstraint),this.removePhysicsSpringFromWorld(this.characterPhysicsElementsParachuteOpen.canopySpring),this.removePhysicsBodyFromWorld(this.characterPhysicsElementsParachuteOpen.characterLegLeftBody),this.removePhysicsBodyFromWorld(this.characterPhysicsElementsParachuteOpen.characterLegRightBody),this.physicsManager.killFloor(this.characterPhysicsElementsParachuteOpen.legLeftConstraint,this.characterPhysicsElementsParachuteOpen.legRightConstraint,this.characterPhysicsElementsParachuteOpen.headConstraint),this.characterPhysicsElementsParachuteOpen.characterHeadBody.position[1]=0,this.introTimeline=this.killTween(this.introTimeline),this.gameOverDelay=this.killTween(this.gameOverDelay),this.obstaclePopRingTimeline=this.killTween(this.obstaclePopRingTimeline),this.filterTimeline=this.killTween(this.filterTimeline),this.shieldTween=this.killTween(this.shieldTween),this.parachuteOpenTimeline=this.killTween(this.parachuteOpenTimeline),this.fireworksLaunchTimeline=this.killTween(this.fireworksLaunchTimeline),this.killParachuteDelay=this.killTween(this.killParachuteDelay),0==e&&this.startGameIntro(),console.log("setting new difficulty params...","wind range = "+this.difficultyParams[this.difficultyIndex].windRange,"wind points = "+this.difficultyParams[this.difficultyIndex].windPoints,"drop height = "+this.difficultyParams[this.difficultyIndex].dropHeight,"obstacle aggressiveness = "+this.difficultyParams[this.difficultyIndex].obstacleAggressiveness),this.windManager.setWindParams(this.difficultyParams[this.difficultyIndex].windRange,this.difficultyParams[this.difficultyIndex].windPoints,this.difficultyParams[this.difficultyIndex].dropHeight,this.characterStartYPos),this.obstacleManager.setObstacleParams(this.difficultyParams[this.difficultyIndex].obstacleAggressiveness),this.dropHeight=this.difficultyParams[this.difficultyIndex].dropHeight,this.landingRingRange=this.difficultyParams[this.difficultyIndex].landingRingRange;var t=Game.getRandom(-this.difficultyParams[this.difficultyIndex].landingRingRange,this.difficultyParams[this.difficultyIndex].landingRingRange);if(this.landingZonePos=new PIXI.Point(this.characterStartPos[0]+t,0),this.altitudeMeter.setHeightRange(this.dropHeight,this.cameraTrackDivePos),this.waterRearLayer.position.y=195,this.landingPad.position.x=this.landingZonePos.x,this.jungleHolder.position.y=this.dropHeight+this.islandVertOffset-400,this.jungleForegroundHolder.position.y=this.dropHeight+this.islandVertOffset+250,this.jungleMidgroundHolder.position.y=this.dropHeight+this.islandVertOffset+200,this.landingPad.position.y=this.dropHeight+this.islandVertOffset+295,this.characterParachuteOpenShadow.position.y=this.dropHeight+this.islandVertOffset+350,this.landingParticlesHolder.position.y=this.dropHeight+this.islandVertOffset+350,this.parachuteLineHolder.position.y=this.dropHeight,this.parachuteLineHolder.visible=!1,++this.difficultyIndex>=this.difficultyParams.length-1&&(this.difficultyIndex=this.difficultyParams.length-1),0==Game.isLowEndIPad){for(s=0;s<this.fireworkTrails.length;s++)this.fireworkTrails[s].sprite.position.y=0,this.fireworkTrails[s].sprite.position.x=-1e3,this.fireworkTrails[s].sprite.visible=!1;for(s=0;s<this.fireworkElements.length;s++){this.fireworkElements[s].primarySprite.position.y=0,this.fireworkElements[s].primarySprite.position.x=-1e3,this.fireworkElements[s].primarySprite.visible=!1;for(var i=0;i<this.fireworkElements[s].explodedElements.length;i++)this.fireworkElements[s].explodedElements[i].sprite.position.y=0,this.fireworkElements[s].explodedElements[i].sprite.position.x=-1e3,this.fireworkElements[s].explodedElements[i].sprite.visible=!1}}for(s=0;s<this.landingParticles.length-1;s++)this.landingParticles[s].dust.scale.x=Game.getRandom(.5,1),this.landingParticles[s].dust.scale.y=this.landingParticles[s].dust.scale.x,this.landingParticles[s].dust.alpha=Game.getRandom(0,.4),this.landingParticles[s].dust.position.x=Game.getRandom(-60,60),this.landingParticles[s].dust.position.y=Game.getRandom(-7,7);for(var s=0;s<this.tickets.length;s++)this.tickets[s].ticket.resetState()},t.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angle=0,e.velocity=[0,0],e.setZeroForce()},t.prototype.addPhysicsBodyToWorld=function(e){this.physicsManager.addBodyToWorld(e)},t.prototype.addPhysicsConstraintToWorld=function(e){this.physicsManager.addConstraintToWorld(e)},t.prototype.addPhysicsSpringToWorld=function(e){this.physicsManager.addSpringToWorld(e)},t.prototype.removePhysicsBodyFromWorld=function(e){this.physicsManager.removeBodyFromWorld(e)},t.prototype.removePhysicsConstraintFromWorld=function(e){this.physicsManager.removeConstraintFromWorld(e)},t.prototype.removePhysicsSpringFromWorld=function(e){this.physicsManager.removeSpringFromWorld(e)},t.prototype.gameOver=function(e){e.wristbandOverlay.endGame(e.currentDistance)},t.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},t.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&("left"==t?this.leftKeyDown():"right"==t&&this.rightKeyDown())},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&("left"==t?this.leftKeyUp():"right"==t&&this.rightKeyUp())},t.prototype.leftKeyDown=function(){this.leftKeyIsDown=!0},t.prototype.leftKeyUp=function(){this.leftKeyIsDown=!1},t.prototype.rightKeyDown=function(){this.rightKeyIsDown=!0},t.prototype.rightKeyUp=function(){this.rightKeyIsDown=!1},t.prototype.lockCloudSpawn=function(){0!=this.cloudAndWindSpawnAllowed&&(this.cloudAndWindSpawnAllowed=!1,this.cloudManager.lockSpawn(this.dropHeight+this.islandVertOffset-400),this.windManager.killWind(),this.obstacleManager.killObstacles())},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause")},t.prototype.activatePowerUpEffect=function(){this.powerUpActive=!0,this.shieldTweenActive=!0,this.windManager.setPowerUpActive(!0),this.powerUpShield.visible=!0,this.powerUpShield.scale.x=0,this.powerUpShield.scale.y=0,this.shieldTween=this.killTween(this.shieldTween),this.shieldTween=TweenMax.to(this.powerUpShield.scale,.4,{x:1,y:1,ease:Back.easeOut,onComplete:this.endShieldTween,onCompleteParams:[this]}),this.physicsManager.activatePowerUpShield()},t.prototype.endShieldTween=function(e){e.shieldTweenActive=!1},t.prototype.deactivatePowerUpEffect=function(){this.shieldTween=this.killTween(this.shieldTween),this.shieldTween=TweenMax.to(this.powerUpShield.scale,.4,{x:0,y:0,ease:Back.easeOut,onComplete:this.killShield,onCompleteParams:[this]})},t.prototype.killShield=function(e){e.powerUpActive=!1,e.powerUpShield.visible=!1,e.windManager.setPowerUpActive(!1),e.physicsManager.deactivatePowerUpShield()},t.prototype.secondChanceUse=function(){console.log("Second chance.."),this.gameOverDelay=this.killTween(this.gameOverDelay),this.hitLandingTarget=!0,this.beginScreenFade(!0),this.characterParachuteOpenHead.visible=!0},t.prototype.pause=function(t){0==t&&(Game.pauseSound("volcano-skydive/background-music.wav"),Game.pauseSound("volcano-skydive/background-wind-looping.wav"),e.prototype.pause.call(this,t)),this.game.powerUpManager.pause(),this.pauseResumeTween(this.screenFadeTimeline,"pause"),this.pauseResumeTween(this.introTimeline,"pause"),this.pauseResumeTween(this.gameOverDelay,"pause"),this.pauseResumeTween(this.filterTimeline,"pause"),this.pauseResumeTween(this.obstaclePopRingTimeline,"pause"),this.pauseResumeTween(this.shieldTween,"pause"),this.pauseResumeTween(this.parachuteOpenTimeline,"pause"),this.pauseResumeTween(this.fireworksLaunchTimeline,"pause"),this.pauseResumeTween(this.killParachuteDelay,"pause");for(var i=0;i<this.tickets.length;i++)this.tickets[i].ticket.pause()},t.prototype.resume=function(){e.prototype.resume.call(this),this.setBackgroundColor(13421772),this.game.ui.setUI("gameplay-volcano-skydive"),Game.resumeSound("volcano-skydive/background-music.wav"),Game.resumeSound("volcano-skydive/background-wind-looping.wav"),this.game.powerUpManager.resume(),this.pauseResumeTween(this.screenFadeTimeline,"resume"),this.pauseResumeTween(this.introTimeline,"resume"),this.pauseResumeTween(this.gameOverDelay,"resume"),this.pauseResumeTween(this.filterTimeline,"resume"),this.pauseResumeTween(this.obstaclePopRingTimeline,"resume"),this.pauseResumeTween(this.shieldTween,"resume"),this.pauseResumeTween(this.parachuteOpenTimeline,"resume"),this.pauseResumeTween(this.fireworksLaunchTimeline,"resume"),this.pauseResumeTween(this.killParachuteDelay,"resume");for(var t=0;t<this.tickets.length;t++)this.tickets[t].ticket.resume()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tutorialOverlay.destroy(),this.introTimeline=this.killTween(this.introTimeline),this.screenFadeTimeline=this.killTween(this.screenFadeTimeline),this.gameOverDelay=this.killTween(this.gameOverDelay),this.obstaclePopRingTimeline=this.killTween(this.obstaclePopRingTimeline),this.filterTimeline=this.killTween(this.filterTimeline),this.shieldTween=this.killTween(this.shieldTween),this.parachuteOpenTimeline=this.killTween(this.parachuteOpenTimeline),this.fireworksLaunchTimeline=this.killTween(this.fireworksLaunchTimeline),this.killParachuteDelay=this.killTween(this.killParachuteDelay),this.collectTicketsTimeline=this.killTween(this.collectTicketsTimeline),this.cloudManager.destroy(),this.obstacleManager.destroy(),this.physicsManager.destroy(),this.windManager.destroy(),this.inputManager.destroy();for(i=0;i<this.landingParticles.length;i++)Game.displayStore.returnPooledItem(this.landingParticles[i].dust);for(i=0;i<this.splashParticles.length;i++)Game.displayStore.returnPooledItem(this.splashParticles[i].sprite);for(i=0;i<this.jungleTiles.length;i++)Game.displayStore.returnPooledItem(this.jungleTiles[i]);for(i=0;i<this.jungleMidgroundTiles.length;i++)Game.displayStore.returnPooledItem(this.jungleMidgroundTiles[i]);for(i=0;i<this.jungleForegroundTiles.length;i++)Game.displayStore.returnPooledItem(this.jungleForegroundTiles[i]);for(i=0;i<this.hill1Tiles.length;i++)Game.displayStore.returnPooledItem(this.hill0Tiles[i]),Game.displayStore.returnPooledItem(this.hill1Tiles[i]),Game.displayStore.returnPooledItem(this.hill2Tiles[i]);for(i=0;i<this.landingParticles.length;i++)Game.displayStore.returnPooledItem(this.landingParticles[i]);if(0==Game.isLowEndIPad)for(i=0;i<this.fireworkTrails.length;i++)Game.displayStore.returnPooledItem(this.fireworkTrails[i].sprite);for(i=0;i<this.jungleForegroundItems.length;i++)Game.displayStore.returnPooledItem(this.jungleForegroundItems[i]),Game.displayStore.returnPooledItem(this.jungleMidgroundItems[i]);Game.displayStore.returnPooledItem(this.screenFadeElementBottom),Game.displayStore.returnPooledItem(this.screenFadeElementTop),Game.displayStore.returnPooledItem(this.screenFadeElementLeft),Game.displayStore.returnPooledItem(this.screenFadeElementRight);for(i=0;i<this.parachuteLines.length;i++)Game.displayStore.returnPooledItem(this.parachuteLines[i]);if(0==Game.isLowEndIPad)for(i=0;i<this.fireworkElements.length;i++){Game.displayStore.returnPooledItem(this.fireworkElements[i].primarySprite);for(var t=0;t<this.fireworkElements[i].explodedElements.length;t++)Game.displayStore.returnPooledItem(this.fireworkElements[i].explodedElements[t].sprite)}Game.displayStore.returnPooledItem(this.parachuteString1),Game.displayStore.returnPooledItem(this.parachuteString2);for(var i=0;i<this.tickets.length;i++)Game.ticketPool.returnTicket(this.tickets[i].ticket);0==Game.useFilters&&(this.mainHolder.filters=null)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),AquaJetpackGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="aquaJetpackGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.sky=Game.displayStore.getSprite("aqua-jetpack/sky"),this.sky.width=Game.stageWidth,this.selectedCharacter=Game.coreData.getSelectedCharacter()||"phoebe",this.loadCharacter(),Game.playSound("aqua-jetpack/music.mp3",.3),this.levelScreenWidths=6,this.powerUpOn=!1,this.characterBreakingAlphaEaseAmount=5,this.characterBreakingWaterTargetAlpha=0,this.powerUpParticleEaseAmount=10,this.characterBreakingWater=!1,this.characterWaterBreakAnim=Game.displayStore.getAnimatedSprite("aqua-jetpack/surface-frames"),this.powerUpBubbleHolder=Game.displayStore.getContainer("aqua-jetpack/power-up-bubble-holder"),this.powerUpBubble=Game.displayStore.getSprite("aqua-jetpack/power-up-bubble"),this.powerUpBubbleHolder.position.y=-1e3,this.powerUpBubbleParticleHolder=Game.displayStore.getContainer("aqua-jetpack/power-up-particle-holder"),this.powerUpParticleRadius=150,this.powerUpParticles=new Array;for(p=0;p<40;p++){var i=Game.displayStore.getSprite("aqua-jetpack/power-up-particle"),s=Game.getRandom(10,this.powerUpParticleRadius),o=p*(2*Math.PI/40);i.blendMode=PIXI.BLEND_MODES.ADD,this.powerUpParticles.push({sprite:i,active:!1,radius:s,speed:Game.getRandom(20,50),startAngle:o});var a=0+s*Math.cos(o),r=0+s*Math.sin(o);i.position.x=a,i.position.y=r,this.powerUpBubbleParticleHolder.addChild(i)}this.powerUpBubble.blendMode=PIXI.BLEND_MODES.ADD,0==Game.isLowEndIPad&&this.powerUpBubbleHolder.addChild(this.powerUpBubbleParticleHolder),this.powerUpBubbleHolder.addChild(this.powerUpBubble),this.nozzleAlphaEaseAmount=4,this.powerUpPulseCount=0,this.upsideDownAngleRange=1,this.correctedInWaterAngleRange=.2,this.waterSurfaceAnimDistanceLimit=200,this.waterSurfaceAnimEaseAmount=10,this.waterSurfaceAlphaEaseAmount=5,this.leftNozzleAnimTargetAlpha=0,this.rightNozzleAnimTargetAlpha=0,this.roundGameplayOn=!1,this.gameEnded=!1,this.initInputApplied=!1,this.liftedOffPlatform=!1,this.score=0,this.lifeRingSpacing=250,this.waterLevelLockSingleNozzle=520,this.waterBopCount=0,this.waterBopSpeed=.05,this.waterBopHorizontalCount=0,this.waterBopHorizontalSpeed=.04,this.cameraPanEaseAmount=10,this.waterParallaxAmount=15,this.waterLayerParallaxAmount=3,this.halfRange=1500,this.thudSoundPlaying=!1,this.thudSoundTimer=0,this.thudSoundLimit=100,this.nozzleLeftSoundPlaying=!1,this.nozzleLeftSoundTimer=0,this.nozzleLeftSoundLimit=100,this.nozzleRightSoundPlaying=!1,this.nozzleRightSoundTimer=0,this.nozzleRightSoundLimit=100,this.edgeLimitLeft=Game.stageWidth*this.levelScreenWidths/2-this.halfRange,this.edgeLimitRight=Game.stageWidth*this.levelScreenWidths/2+this.halfRange,this.nozzleAnimLeft=Game.displayStore.getAnimatedSprite("aqua-jetpack/jet-frames"),this.nozzleAnimLeft.loop=!0,this.nozzleAnimLeft.animationSpeed=.7,this.nozzleAnimLeft.scale.x=1.19,this.nozzleAnimLeft.scale.y=1.6,this.nozzleAnimRight=Game.displayStore.getAnimatedSprite("aqua-jetpack/jet-frames"),this.nozzleAnimRight.loop=!0,this.nozzleAnimRight.animationSpeed=.7,this.nozzleAnimRight.scale.x=1.19,this.nozzleAnimRight.scale.y=1.6,this.nozzleAnimRight.play(),this.nozzleAnimLeft.play(),this.characterTorsoHolder.addChild(this.nozzleAnimLeft),this.characterTorsoHolder.addChild(this.nozzleAnimRight),this.nozzleAnimLeft.position.x=-95,this.nozzleAnimRight.position.x=95,this.nozzleAnimLeft.position.y=23,this.nozzleAnimRight.position.y=23,this.underWater=!1,this.leftNozzleOn=!1,this.rightNozzleOn=!1,this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),this.mainHolder=Game.displayStore.getContainer("aqua-jetpack/main-holder");var n=(Game.stageWidth*this.levelScreenWidths-Game.stageWidth)/2;this.mainHolder.position.x=-n,this.characterTorsoHolder.addChild(this.characterTorsoJetpackSprite),this.characterBack.position.y=-20,this.backgroundManager=new AquaJetpackBackgroundManager(this,this.mainHolder,this.levelScreenWidths),this.physicsManager=new AquaJetpackPhysicsManager(this,this.mainHolder),this.physicsManager.initPhysicsWorld(Game.stageWidth*this.levelScreenWidths/2,this.edgeLimitLeft,this.edgeLimitRight),this.physicsDebugger=new PhysicsDebugger(this,this.mainHolder,this.physicsManager.world),this.gamePhysicsElements=this.physicsManager.getCharacterPhysicsElements(Game.stageWidth*this.levelScreenWidths/2),this.fishManager=new AquaJetpackFishManager(this,this.mainHolder,this.levelScreenWidths,this.gamePhysicsElements.characterJetpackTorsoBody,this.edgeLimitLeft,this.edgeLimitRight),this.container.addChild(this.sky),this.container.addChild(this.mainHolder),this.startPlatformPole=Game.displayStore.getSprite("aqua-jetpack/start-platform-pole"),this.startPlatformPole.position.x=Game.stageWidth*this.levelScreenWidths/2,this.startPlatformPole.position.y=510,this.mainHolder.addChild(this.startPlatformPole),this.startPlatform=Game.displayStore.getSprite("aqua-jetpack/start-platform"),this.startPlatform.position.x=Game.stageWidth*this.levelScreenWidths/2,this.startPlatform.position.y=510,this.mainHolder.addChild(this.startPlatform),this.nozzleWaterParticles=new Array;for(p=0;p<50;p++){(i=Game.displayStore.getSprite("aqua-jetpack/spray-particle-"+Game.getRandom(1,3,!0))).position.y=-100,i.blendMode=PIXI.BLEND_MODES.ADD,this.mainHolder.addChild(i);var h=this.physicsManager.getWaterParticles();this.nozzleWaterParticles.push({sprite:i,body:h.body,circle:h.shape,active:!1})}this.splashParticles=new Array;for(p=0;p<40;p++){(i=Game.displayStore.getSprite("aqua-jetpack/splash-particle-"+Game.getRandom(1,3,!0))).position.y=-100,i.blendMode=PIXI.BLEND_MODES.ADD,this.mainHolder.addChild(i);var l=this.physicsManager.getSplashParticles();this.splashParticles.push({sprite:i,body:l.body,circle:l.shape,active:!1})}this.mainHolder.addChild(this.characterBack),this.mainHolder.addChild(this.characterHeadBack),this.mainHolder.addChild(this.characterLegLeft),this.mainHolder.addChild(this.characterLegRight),this.mainHolder.addChild(this.characterTorsoHolder),this.mainHolder.addChild(this.characterHead),this.mainHolder.addChild(this.powerUpBubbleHolder),this.pickupManager=new AquaJetpackPickupManager(this,this.mainHolder,this.levelScreenWidths,this.gamePhysicsElements.characterJetpackTorsoBody,this.edgeLimitLeft,this.edgeLimitRight),this.ticketManager=new AquaJetpackTicketManager(this,this.mainHolder,this.levelScreenWidths,this.gamePhysicsElements.characterJetpackTorsoBody,this.edgeLimitLeft,this.edgeLimitRight),this.inputManager=new AquaJetpackInputManager(this,this.mainHolder),3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),Game.coreData.setCurrentRide("aqua-jetpack"),this.tutorialViewed=Game.coreData.getGameTutorialViewed("aqua-jetpack"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.waterFrontYPos=Game.stageHeight+30,this.waterFrontLayersHolder=Game.displayStore.getContainer("aqua-jetpack/water-front-layer-holder"),this.rightNets=new Array;for(p=0;p<4;p++)(i=Game.displayStore.getSprite("aqua-jetpack/edge-net")).position.y=40,i.position.x=this.edgeLimitRight+p*i.width,this.mainHolder.addChild(i),this.rightNets.push(i);this.leftNets=new Array;for(p=0;p<4;p++)(i=Game.displayStore.getSprite("aqua-jetpack/edge-net")).position.y=40,i.position.x=this.edgeLimitLeft-(1+p)*i.width,this.mainHolder.addChild(i),this.leftNets.push(i);this.leftLaneLimitMarker=Game.displayStore.getSprite("aqua-jetpack/lane-edge-marker"),this.rightLaneLimitMarker=Game.displayStore.getSprite("aqua-jetpack/lane-edge-marker"),this.mainHolder.addChild(this.leftLaneLimitMarker),this.mainHolder.addChild(this.rightLaneLimitMarker),this.leftLifeRing=Game.displayStore.getSprite("aqua-jetpack/life-ring"),this.rightLifeRing=Game.displayStore.getSprite("aqua-jetpack/life-ring"),this.leftLifeRing.position.x=this.edgeLimitLeft-this.lifeRingSpacing,this.rightLifeRing.position.x=this.edgeLimitRight+this.lifeRingSpacing,this.leftLifeRing.position.y=280,this.rightLifeRing.position.y=280,this.mainHolder.addChild(this.leftLifeRing),this.mainHolder.addChild(this.rightLifeRing),this.mainHolder.addChild(this.waterFrontLayersHolder),this.waterFrontLayersHolder.position.y=this.waterFrontYPos,this.characterWaterBreakAnim.position.y=-100,this.mainHolder.addChild(this.characterWaterBreakAnim),this.waterSurfaceAnimHolder=Game.displayStore.getContainer("aqua-jetpack/surface-holder"),this.waterSurfaceAnim=Game.displayStore.getSprite("aqua-jetpack/surface-anim-temp"),this.waterSurfaceAnimLeft=Game.displayStore.getAnimatedSprite("aqua-jetpack/surface-frames"),this.waterSurfaceAnimYOffset=-120,this.waterSurfaceAnimLeft.loop=!0,this.waterSurfaceAnimLeft.animationSpeed=.4,this.waterSurfaceAnimLeft.scale.x=.5,this.waterSurfaceAnimLeft.scale.y=1.5,this.waterSurfaceAnimLeft.position.x=-90,this.waterSurfaceAnimRight=Game.displayStore.getAnimatedSprite("aqua-jetpack/surface-frames"),this.waterSurfaceAnimRight.loop=!0,this.waterSurfaceAnimRight.animationSpeed=.4,this.waterSurfaceAnimRight.scale.x=.5,this.waterSurfaceAnimRight.scale.y=1.5,this.waterSurfaceAnimRight.position.x=90,this.waterSurfaceAnimRight.play(),this.waterSurfaceAnimLeft.play(),this.waterSurfaceAnimHolder.addChild(this.waterSurfaceAnimRight),this.waterSurfaceAnimHolder.addChild(this.waterSurfaceAnimLeft),this.mainHolder.addChild(this.waterSurfaceAnimHolder),this.splashFrames=Game.displayStore.getAnimatedSprite("aqua-jetpack/splash-frames"),this.splashFrames.alpha=0,this.splashFrames.loop=!1,this.splashFrames.animationSpeed=.4,this.splashFrames.scale.x=.8,this.splashFrames.scale.y=.7,this.mainHolder.addChild(this.splashFrames),this.leftLaneLimitMarker.position.x=this.edgeLimitLeft,this.rightLaneLimitMarker.position.x=this.edgeLimitRight,this.leftLaneLimitMarker.position.y=40,this.rightLaneLimitMarker.position.y=40,this.waterFrontLayers=new Array;for(p=0;p<this.levelScreenWidths;p++)(i=Game.displayStore.getSprite("aqua-jetpack/water-front-layer")).position.x=p*i.width,i.alpha=.7,this.waterFrontLayersHolder.addChild(i),this.waterFrontLayers.push(i);this.fishManager.addFishAnims(),this.heartIconBG=Game.displayStore.getSprite("aqua-jetpack/heart-bg"),this.heartIconBG.position.y=45,this.container.addChild(this.heartIconBG),this.heartLives=new Array;for(var p=0;p<3;p++)(i=Game.displayStore.getSprite("aqua-jetpack/heart-icon")).position.y=45,i.position.x=40+60*p,this.container.addChild(i),this.heartLives.push({icon:i,active:!0});this.scoreHolder=Game.displayStore.getContainer("aqua-jetpack/score-holder"),this.scoreBG=Game.displayStore.getSprite("aqua-jetpack/score-bg"),this.scoreText=Game.displayStore.getBitmapText("aqua-jetpack/score-font"),this.scoreHolder.position.x=Game.stageWidth/2,this.scoreHolder.position.y=45,this.scoreHolder.addChild(this.scoreBG),this.scoreHolder.addChild(this.scoreText),this.scoreText.text="0",this.scoreText.scale.x=this.scoreText.scale.y=.8,this.scoreText.position.x=-this.scoreText.width/2,this.scoreText.position.y=-this.scoreText.height/2-18,this.container.addChild(this.scoreHolder),this.nozzleAnimLeft.alpha=0,this.nozzleAnimRight.alpha=0,1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("aqua-jetpack",!0)},t.prototype.startGameplay=function(){switch(this.game.ui.triggerEnjoyTheRide(),this.game.ui.setUI("gameplay-aqua-jetpack"),this.game.powerUpManager.startGame(),this.pickupManager.spawnPickup(),this.spawnTicket(),this.physicsManager.startStateDelay(),Game.playSound("aqua-jetpack/water-looping.mp3",.4),this.selectedCharacter){case"max":var e=[{id:"aqua-jetpack/max-enemies.mp3"},{id:"aqua-jetpack/max-im-the-best.mp3"},{id:"aqua-jetpack/max-your-welcome.mp3"}];e[i=Game.getRandom(0,4,!0)]&&Game.playSound(e[i].id,e[i].vol||1);break;case"phoebe":var t=[{id:"aqua-jetpack/phoebe-woop.mp3"},{id:"aqua-jetpack/phoebe-step-aside.mp3"},{id:"aqua-jetpack/phoebe-no-problem-too-small.mp3"}],i=Game.getRandom(0,4,!0);t[i]&&Game.playSound(t[i].id,t[i].vol||1)}},t.prototype.spawnTicket=function(){for(var e=0,t=0;t<this.heartLives.length;t++)1==this.heartLives[t].active&&e++;this.ticketManager.spawnTicket(e,this.heartLives.length)},t.prototype.addLife=function(){this.heartTimeline=this.killTween(this.heartTimeline),this.heartTimeline=new TimelineMax;for(var e=0;e<this.heartLives.length;e++)if(0==this.heartLives[e].active)return this.heartLives[e].active=!0,void this.heartTimeline.add([TweenMax.to(this.heartLives[e].icon.scale,.5,{x:1,y:1,ease:Quad.easeIn})],0)},t.prototype.updateLiftOffState=function(){if(1!=this.liftedOffPlatform){this.liftedOffPlatform=!0,this.roundGameplayOn=!0,this.removeStartPlatformTimeline=this.killTween(this.removeStartPlatformTimeline),this.removeStartPlatformTimeline=new TimelineMax,this.removeStartPlatformTimeline.add([TweenMax.to(this.startPlatform.position,.5,{y:650,ease:Sine.easeIn}),TweenMax.to(this.startPlatformPole.position,.5,{y:650,ease:Sine.easeIn})],0);var e=[{id:"aqua-jetpack/move-down-1.mp3"},{id:"aqua-jetpack/move-down-2.mp3"},{id:"aqua-jetpack/move-down-3.mp3"}],t=Game.getRandom(0,2,!0);Game.playSound(e[t].id,e[t].vol||1)}},t.prototype.resetWaterLevelBroken=function(){this.characterBreakingWater=!1,this.characterBreakingWaterTargetAlpha=0},t.prototype.waterSurfaceBroken=function(e,t,i){if(1!=Game.isLowEndIPad)if("fish"!=i){if("character"==i){if(this.characterWaterBreakAnim.position.x=t[0],1==this.characterBreakingWater)return;return this.characterBreakingWaterTargetAlpha=.8,this.characterBreakingWater=!0,this.characterWaterBreakAnim.loop=!0,this.characterWaterBreakAnim.animationSpeed=.25,this.characterWaterBreakAnim.gotoAndPlay(0),this.characterWaterBreakAnim.scale.x=1,void(this.characterWaterBreakAnim.scale.y=1)}}else this.fishManager.fishBrokeWater(e)},t.prototype.getLiftedOffPlatform=function(){return this.liftedOffPlatform},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.loadCharacter=function(){this.characterTorsoHolder=Game.displayStore.getContainer("aqua-jetpack/character-torso-"+this.selectedCharacter+"-holder"),this.characterTorsoJetpackSprite=Game.displayStore.getSprite("aqua-jetpack/character-body-"+this.selectedCharacter),this.characterHead=Game.displayStore.getSprite("aqua-jetpack/character-head-"+this.selectedCharacter),this.characterHeadBack=Game.displayStore.getSprite("aqua-jetpack/character-head-"+this.selectedCharacter+"-back"),this.characterLegLeft=Game.displayStore.getSprite("aqua-jetpack/character-leg-left-"+this.selectedCharacter),this.characterLegRight=Game.displayStore.getSprite("aqua-jetpack/character-leg-right-"+this.selectedCharacter),this.characterBack=Game.displayStore.getSprite("aqua-jetpack/character-back-"+this.selectedCharacter)},t.prototype.resetWaterParticle=function(e){for(var t=0;t<this.nozzleWaterParticles.length;t++)if(e==this.nozzleWaterParticles[t].body)return this.nozzleWaterParticles[t].active=!1,this.nozzleWaterParticles[t].sprite.position.y=-1e3,void this.physicsManager.removeBodyFromWorld(this.nozzleWaterParticles[t].body)},t.prototype.addPhysicsBodyToWorld=function(e){this.physicsManager.addBodyToWorld(e)},t.prototype.addPhysicsConstraintToWorld=function(e){this.physicsManager.addConstraintToWorld(e)},t.prototype.removePhysicsBodyFromWorld=function(e){this.physicsManager.removeBodyFromWorld(e)},t.prototype.removePhysicsConstraintFromWorld=function(e){this.physicsManager.removeConstraintFromWorld(e)},t.prototype.increaseFishDifficulty=function(e){this.fishManager.increaseFishDifficulty(e)},t.prototype.getUnderwater=function(){return this.underWater},t.prototype.fireWaterParticle=function(e,t,i){if(i+=Math.PI,"left"==e&&0==this.leftNozzleOn)return Game.stopSound("aqua-jetpack/water-jet-1.mp3"),this.nozzleLeftSoundPlaying=!1,void(this.nozzleLeftSoundTimer=0);if("right"==e&&0==this.rightNozzleOn)return Game.stopSound("aqua-jetpack/water-jet-2.mp3"),this.nozzleRightSoundPlaying=!1,void(this.nozzleRightSoundTimer=0);for(var s=0;s<this.nozzleWaterParticles.length;s++)if(1!=this.nozzleWaterParticles[s].active){this.nozzleWaterParticles[s].active=!0,this.nozzleWaterParticles[s].sprite.alpha=.9;var o=Game.getRandom(1.5,2);this.nozzleWaterParticles[s].sprite.scale.x=o,this.nozzleWaterParticles[s].sprite.scale.y=o;var a=this.nozzleWaterParticles[s].body;a.invMass=1/a.mass,a.invInertia=1/a.inertia,a.angle=0,a.velocity=[0,0],a.setZeroForce(),a.position[0]=t[0],a.position[1]=t[1],this.physicsManager.addBodyToWorld(a),a.angularVelocity=Game.getRandom(-10,10);var r=Game.getRandom(-.05,.05),n=Math.cos(i+r),h=Math.sin(i+r),l=Game.getRandom(50,100);return a.velocity=[this.gamePhysicsElements.characterJetpackTorsoBody.velocity[0],this.gamePhysicsElements.characterJetpackTorsoBody.velocity[1]],void a.applyImpulse([n*l,h*l])}},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"playbuttonlarge":this.resume();break;case"pause-button":this.pause(!1)}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.hitWall=function(){if(0==this.thudSoundPlaying){this.thudSoundPlaying=!0;var e=[{id:"aqua-jetpack/thud-1.mp3"},{id:"aqua-jetpack/thud-2.mp3"},{id:"aqua-jetpack/thud-3.mp3"}],t=Game.getRandom(0,2,!0);Game.playSound(e[t].id,e[t].vol||.4)}},t.prototype.tick=function(t){if(e.prototype.tick.call(this,t),1!=this.paused&&1!=this.tutorialOverlay.isOpen&&1!=this.wristbandOverlay.isOpen){1==this.thudSoundPlaying&&++this.thudSoundTimer>=this.thudSoundLimit&&(this.thudSoundTimer=0,this.thudSoundPlaying=!1),1==this.nozzleLeftSoundPlaying&&++this.nozzleLeftSoundTimer>=this.nozzleLeftSoundLimit&&(this.nozzleLeftSoundPlaying=!1),1==this.nozzleRightSoundPlaying&&++this.nozzleRightSoundTimer>=this.nozzleRightSoundLimit&&(this.nozzleRightSoundPlaying=!1),this.waterBopCount+=this.waterBopSpeed*t,this.waterBopCount>=2*Math.PI&&(this.waterBopCount=2*-Math.PI),this.waterBopHorizontalCount+=this.waterBopHorizontalSpeed*t,this.waterBopHorizontalCount>=2*Math.PI&&(this.waterBopHorizontalCount=2*-Math.PI),this.waterFrontLayersHolder.position.y=this.waterFrontYPos+5*Math.sin(this.waterBopCount),0==Game.isLowEndIPad&&(this.nozzleAnimLeft.alpha+=(this.leftNozzleAnimTargetAlpha-this.nozzleAnimLeft.alpha)/this.nozzleAlphaEaseAmount,this.nozzleAnimRight.alpha+=(this.rightNozzleAnimTargetAlpha-this.nozzleAnimRight.alpha)/this.nozzleAlphaEaseAmount),this.backgroundManager.tick(this.characterTorsoHolder.position.x),this.inputManager.tick(),this.physicsManager.stepPhysics(this.leftNozzleOn,this.rightNozzleOn),this.pickupManager.tick(),this.waterFrontLayersHolder.position.x=this.characterTorsoHolder.position.x/this.waterParallaxAmount+11*Math.cos(this.waterBopHorizontalCount),this.characterHead.position.x=this.gamePhysicsElements.characterHeadBody.position[0],this.characterHead.position.y=Game.stageHeight-this.gamePhysicsElements.characterHeadBody.position[1],this.characterHead.rotation=-this.gamePhysicsElements.characterHeadBody.angle,this.characterHeadBack.position.x=this.characterHead.position.x,this.characterHeadBack.position.y=this.characterHead.position.y,this.characterHeadBack.rotation=this.characterHead.rotation,this.characterBack.position.x=this.characterTorsoHolder.position.x,this.characterBack.position.y=this.characterTorsoHolder.position.y,this.characterBack.rotation=this.characterTorsoHolder.rotation,this.characterTorsoHolder.position.x=this.gamePhysicsElements.characterJetpackTorsoBody.position[0],this.characterTorsoHolder.position.y=Game.stageHeight-this.gamePhysicsElements.characterJetpackTorsoBody.position[1],this.characterTorsoHolder.rotation=-this.gamePhysicsElements.characterJetpackTorsoBody.angle,this.characterLegLeft.position.x=this.gamePhysicsElements.characterLeftLegBody.position[0],this.characterLegLeft.position.y=Game.stageHeight-this.gamePhysicsElements.characterLeftLegBody.position[1],this.characterLegLeft.rotation=-this.gamePhysicsElements.characterLeftLegBody.angle,this.characterLegRight.position.x=this.gamePhysicsElements.characterRightLegBody.position[0],this.characterLegRight.position.y=Game.stageHeight-this.gamePhysicsElements.characterRightLegBody.position[1],this.characterLegRight.rotation=-this.gamePhysicsElements.characterRightLegBody.angle,1==this.powerUpOn&&this.animatePowerUpEffect();var i=0-this.characterTorsoHolder.position.x+Game.stageWidth/2;if(this.mainHolder.position.x+=(i-this.mainHolder.position.x)/this.cameraPanEaseAmount,this.characterWaterBreakAnim.alpha+=(this.characterBreakingWaterTargetAlpha-this.characterWaterBreakAnim.alpha)/this.characterBreakingAlphaEaseAmount,this.characterWaterBreakAnim.alpha<=0&&this.characterWaterBreakAnim.stop(),0==Game.isLowEndIPad){this.waterSurfaceAnimHolder.position.y=this.waterFrontLayersHolder.position.y+this.waterSurfaceAnimYOffset;var s=this.waterSurfaceAnimHolder.position.y-this.characterTorsoHolder.position.y,o=Math.tan(this.characterTorsoHolder.rotation)*s,a=this.characterTorsoHolder.position.x-o;this.waterSurfaceAnimHolder.position.x+=(a-this.waterSurfaceAnimHolder.position.x)/this.waterSurfaceAnimEaseAmount,this.setWaterSurfaceAnimAlpha(this.waterSurfaceAnimDistanceLimit-Math.abs(this.waterSurfaceAnimHolder.x-this.characterTorsoHolder.position.x))}if(this.fishManager.tick(this.waterSurfaceAnimHolder.position.y),this.splashFrames.position.y=this.waterSurfaceAnimHolder.position.y+10,this.characterWaterBreakAnim.position.y=this.waterSurfaceAnimHolder.position.y,0==Game.isLowEndIPad){for(r=0;r<this.nozzleWaterParticles.length;r++)0!=this.nozzleWaterParticles[r].active&&(this.nozzleWaterParticles[r].sprite.position.x=this.nozzleWaterParticles[r].body.position[0],this.nozzleWaterParticles[r].sprite.position.y=Game.stageHeight-this.nozzleWaterParticles[r].body.position[1],this.nozzleWaterParticles[r].sprite.rotation=-this.nozzleWaterParticles[r].body.angle,this.nozzleWaterParticles[r].sprite.alpha-=.02,this.nozzleWaterParticles[r].sprite.scale.x+=.14,this.nozzleWaterParticles[r].sprite.scale.y+=.14);for(var r=0;r<this.splashParticles.length;r++)0!=this.splashParticles[r].active&&(this.splashParticles[r].sprite.position.x=this.splashParticles[r].body.position[0],this.splashParticles[r].sprite.position.y=Game.stageHeight-this.splashParticles[r].body.position[1],this.splashParticles[r].sprite.rotation=-this.splashParticles[r].body.angle,this.splashParticles[r].sprite.alpha-=.005,this.splashParticles[r].sprite.scale.x+=.04,this.splashParticles[r].sprite.scale.y+=.04)}if(0!=this.underWater){var n=Math.floor(this.gamePhysicsElements.characterJetpackTorsoBody.angle/(2*Math.PI)),h=this.gamePhysicsElements.characterJetpackTorsoBody.angle-n*(2*Math.PI);h<=0+this.correctedInWaterAngleRange&&h>=0-this.correctedInWaterAngleRange||(h>=Math.PI-this.upsideDownAngleRange?this.gamePhysicsElements.characterJetpackTorsoBody.angularForce=8e3:h<=Math.PI+this.upsideDownAngleRange&&(this.gamePhysicsElements.characterJetpackTorsoBody.angularForce=-8e3))}}},t.prototype.animatePowerUpEffect=function(){this.powerUpBubbleHolder.position.x=this.characterTorsoHolder.position.x,this.powerUpBubbleHolder.position.y=this.characterTorsoHolder.position.y,this.powerUpPulseCount+=.1,this.powerUpPulseCount>=2*Math.PI&&(this.powerUpPulseCount=2*-Math.PI);var e=1.2+Math.sin(this.powerUpPulseCount)/10;if(this.powerUpBubbleHolder.scale.x=this.powerUpBubbleHolder.scale.y=e,this.powerUpBubbleParticleHolder.rotation+=.05,1!=Game.isLowEndIPad)for(var t=0;t<this.powerUpParticles.length;t++){var i=this.powerUpParticles[t].sprite;if(i.position.x+=(0-i.position.x)/this.powerUpParticles[t].speed,i.position.y+=(0-i.position.y)/this.powerUpParticles[t].speed,i.scale.x+=(0-i.scale.x)/this.powerUpParticles[t].speed,i.scale.y=i.scale.x,i.scale.x<=.1){var s=0+this.powerUpParticleRadius*Math.cos(this.powerUpParticles[t].startAngle),o=0+this.powerUpParticleRadius*Math.sin(this.powerUpParticles[t].startAngle);i.position.x=s,i.position.y=o,i.scale.x=1,i.scale.y=1}}},t.prototype.setWaterSurfaceAnimAlpha=function(e){var t=e/this.waterSurfaceAnimDistanceLimit,i=e/this.waterSurfaceAnimDistanceLimit;t<0&&(t=0),i<0&&(i=0),0==this.leftNozzleOn&&(t=0),0==this.rightNozzleOn&&(i=0),this.waterSurfaceAnimLeft.alpha+=(t-this.waterSurfaceAnimLeft.alpha)/this.waterSurfaceAlphaEaseAmount,this.waterSurfaceAnimRight.alpha+=(i-this.waterSurfaceAnimRight.alpha)/this.waterSurfaceAlphaEaseAmount},t.prototype.fireSplashParticlesFish=function(e,t){this.fireSplashParticles(e,t)},t.prototype.fireSplashParticles=function(e,t){for(var i=Game.getRandom(4,10,!0),s=0,o=0;o<this.splashParticles.length;o++)if(1!=this.splashParticles[o].active){this.splashParticles[o].active=!0,this.splashParticles[o].sprite.alpha=.6,this.splashParticles[o].sprite.scale.x=this.splashParticles[o].sprite.scale.y=2;var a=Game.getRandom(1,Math.PI-1),r=Math.cos(a),n=Math.sin(a),h=Game.getRandom(10,50),l=this.splashParticles[o].body;if(l.invMass=1/l.mass,l.invInertia=1/l.inertia,l.angle=0,l.velocity=[0,0],l.setZeroForce(),this.addPhysicsBodyToWorld(this.splashParticles[o].body),this.splashParticles[o].body.angularVelocity=Game.getRandom(-10,10),this.splashParticles[o].body.position[0]=e,this.splashParticles[o].body.position[1]=t,this.splashParticles[o].body.applyImpulse([r*h,n*h]),++s>=i)return}},t.prototype.resetSplashParticle=function(e){for(t=0;t<this.splashParticles.length;t++)if(e==this.splashParticles[t].body)return this.splashParticles[t].active=!1,this.splashParticles[t].sprite.y=-1e3,void this.removePhysicsBodyFromWorld(this.splashParticles[t].body);for(var t=0;t<this.nozzleWaterParticles.length;t++)if(e==this.nozzleWaterParticles[t].body)return this.nozzleWaterParticles[t].active=!1,this.nozzleWaterParticles[t].sprite.y=-1e3,void this.removePhysicsBodyFromWorld(this.nozzleWaterParticles[t].body);this.pickupManager.resetOrbParticles(e),this.fishManager.resetFishOrFishParticle(e)},t.prototype.setUnderwater=function(e){if(this.underWater=e,0==this.underWater)0==this.roundGameplayOn&&(this.roundGameplayOn=!0);else if(1==this.underWater&&1==this.roundGameplayOn)switch(this.roundGameplayOn=!1,0==this.powerUpOn&&(this.loseLife(),this.pickupManager.resetPointValues()),this.splashFrames.position.x=this.characterTorsoHolder.position.x,this.splashFrames.gotoAndPlay(0),this.splashFrames.alpha=.85,this.fireSplashParticles(this.gamePhysicsElements.characterJetpackTorsoBody.position[0],Game.stageHeight-500),1==Game.getRandom(1,2,!0)?Game.playSound("aqua-jetpack/large-splash.mp3",.8):Game.playSound("aqua-jetpack/loud-splash.mp3",.8),this.selectedCharacter){case"max":var t=[{id:"aqua-jetpack/max-what.mp3"},{id:"aqua-jetpack/max-why.mp3"}];t[s=Game.getRandom(0,3,!0)]&&Game.playSound(t[s].id,t[s].vol||1);break;case"phoebe":var i=[{id:"aqua-jetpack/phoebe-happened.mp3"},{id:"aqua-jetpack/phoebe-hair.mp3"}],s=Game.getRandom(0,3,!0);i[s]&&Game.playSound(i[s].id,i[s].vol||1)}},t.prototype.getFishParticleElements=function(){return this.physicsManager.getFishParticleElements()},t.prototype.loseLife=function(){this.heartTimeline=this.killTween(this.heartTimeline),this.heartTimeline=new TimelineMax({onComplete:this.checkGameOver,onCompleteParams:[this]});for(var e=this.heartLives.length-1;e>=0;e--)if(1==this.heartLives[e].active)return this.heartLives[e].active=!1,void this.heartTimeline.add([TweenMax.to(this.heartLives[e].icon.scale,.5,{x:0,y:0,ease:Quad.easeIn})],0)},t.prototype.checkGameOver=function(e){for(var t=0,i=0;i<e.heartLives.length;i++)1==e.heartLives[i].active&&t++;t>0||1!=e.gameEnded&&(e.gameEnded=!0,e.gameOverDelay=e.killTween(e.gameOverDelay),e.gameOverDelay=TweenMax.delayedCall(1.5,e.gameOver,[e]))},t.prototype.gameOver=function(e){e.gameOverDelay=e.killTween(e.gameOverDelay),e.wristbandOverlay.endGame(e.score)},t.prototype.checkOrbPickup=function(e){this.pickupManager.checkOrbPickup(e)},t.prototype.checkTicketPickup=function(e){this.ticketManager.checkTicketPickup(e)},t.prototype.updateScore=function(e){this.score+=e,TweenMax.to(this.scoreText.scale,.2,{x:1,y:1,ease:Sine.easeOut,repeat:1,yoyo:!0}),this.scoreText.text=String(this.score),this.scoreText.position.x=-this.scoreText.width/2,this.scoreText.position.y=-this.scoreText.height/2-18},t.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},t.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},t.prototype.updateInputState=function(e,t){this.leftNozzleOn=e,this.rightNozzleOn=t,this.updateNozzleAnims(),this.initInputApplied=!0},t.prototype.getPickupPhysicsElement=function(){return this.physicsManager.getPickupPhysicsElement()},t.prototype.getPickupParticleElements=function(){return this.physicsManager.getPickupParticleElements()},t.prototype.getFishPhysicsElements=function(){return this.physicsManager.getFishPhysicsElements()},t.prototype.getTicketPhysicsElements=function(){return this.physicsManager.getTicketPhysicsElements()},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&("left"==t?this.leftKeyDown():"right"==t&&this.rightKeyDown())},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&("left"==t?this.leftKeyUp():"right"==t&&this.rightKeyUp())},t.prototype.leftKeyDown=function(){1!=this.leftNozzleOn&&(this.leftNozzleOn=!0,this.updateNozzleAnims())},t.prototype.leftKeyUp=function(){0!=this.leftNozzleOn&&(this.leftNozzleOn=!1,this.updateNozzleAnims())},t.prototype.rightKeyDown=function(){1!=this.rightNozzleOn&&(this.rightNozzleOn=!0,this.updateNozzleAnims())},t.prototype.rightKeyUp=function(){0!=this.rightNozzleOn&&(this.rightNozzleOn=!1,this.updateNozzleAnims())},t.prototype.updateNozzleAnims=function(){1==this.leftNozzleOn?this.leftNozzleAnimTargetAlpha=1:this.leftNozzleAnimTargetAlpha=0,1==this.rightNozzleOn?this.rightNozzleAnimTargetAlpha=1:this.rightNozzleAnimTargetAlpha=0,1==Game.isLowEndIPad&&(this.nozzleAnimLeft.alpha=this.leftNozzleAnimTargetAlpha,this.nozzleAnimRight.alpha=this.rightNozzleAnimTargetAlpha)},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause")},t.prototype.activatePowerUpEffect=function(){this.powerUpOn=!0,this.fishManager.powerUpToggle(!0),this.pickupManager.powerUpToggle(!0),this.powerUpBubble.scale.x=0,this.powerUpBubble.scale.y=0,this.powerUpBubbleHolder.alpha=1,this.powerUpOnOffTimeline=this.killTween(this.powerUpOnOffTimeline),this.powerUpOnOffTimeline=new TimelineMax,this.powerUpOnOffTimeline.add([TweenMax.to(this.powerUpBubble.scale,.5,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.powerUpBubble,.5,{alpha:1,ease:Sine.easeOut}),TweenMax.to(this.powerUpBubbleParticleHolder.scale,.5,{x:1,y:1,ease:Back.easeOut})],0),Game.setSoundVolume("aqua-jetpack/power-up-bubble.mp3",0),Game.fadeSound("aqua-jetpack/power-up-bubble.mp3",.4,.6),Game.playSound("aqua-jetpack/power-up-bubble.mp3")},t.prototype.deactivatePowerUpEffect=function(){this.powerUpOnOffTimeline=this.killTween(this.powerUpOnOffTimeline),this.powerUpOnOffTimeline=new TimelineMax({onComplete:this.killPowerUp,onCompleteParams:[this]}),this.powerUpOnOffTimeline.add([TweenMax.to(this.powerUpBubbleHolder,.1,{alpha:0,repeat:30,yoyo:!0})],0),this.powerUpOnOffTimeline.add([TweenMax.to(this.powerUpBubble.scale,.5,{x:0,y:0,ease:Sine.easeOut}),TweenMax.to(this.powerUpBubble,.5,{alpha:0,ease:Sine.easeOut}),TweenMax.to(this.powerUpBubbleParticleHolder.scale,.5,{x:0,y:0,ease:Sine.easeOut})]),Game.fadeSound("aqua-jetpack/power-up-bubble.mp3",.4,0),Game.stopSound("aqua-jetpack/power-up-bubble.mp3")},t.prototype.killPowerUp=function(e){e.powerUpOn=!1,e.fishManager.powerUpToggle(!1),e.pickupManager.powerUpToggle(!1),e.powerUpOnOffTimeline=e.killTween(e.powerUpOnOffTimeline)},t.prototype.secondChanceUse=function(){this.gameEnded=!1,this.addLife()},t.prototype.pause=function(t){0==t&&(Game.pauseSound("aqua-jetpack/music.mp3"),e.prototype.pause.call(this,t)),this.game.powerUpManager.pause(),Game.pauseSound("aqua-jetpack/large-splash.mp3"),Game.pauseSound("aqua-jetpack/loud-splash.mp3"),Game.pauseSound("aqua-jetpack/water-looping.mp3"),Game.pauseSound("aqua-jetpack/move-down-1.mp3"),Game.pauseSound("aqua-jetpack/move-down-2.mp3"),Game.pauseSound("aqua-jetpack/move-down-3.mp3"),Game.pauseSound("aqua-jetpack/swish-long-1.mp3"),Game.pauseSound("aqua-jetpack/swish-long-2.mp3"),Game.pauseSound("aqua-jetpack/swish-long-3.mp3"),Game.pauseSound("aqua-jetpack/power-up-bubble.mp3"),Game.pauseSound("aqua-jetpack/water-jet-1.mp3"),Game.pauseSound("aqua-jetpack/water-jet-2.mp3"),Game.pauseSound("aqua-jetpack/max-enemies.mp3"),Game.pauseSound("aqua-jetpack/phoebe-woop.mp3"),Game.pauseSound("aqua-jetpack/max-loosers.mp3"),Game.pauseSound("aqua-jetpack/phoebe-close.mp3"),Game.pauseSound("aqua-jetpack/max-what.mp3"),Game.pauseSound("aqua-jetpack/phoebe-happened.mp3"),this.pauseResumeTween(this.removeStartPlatformTimeline,"pause"),this.pauseResumeTween(this.heartTimeline,"pause"),this.pauseResumeTween(this.gameOverDelay,"pause"),this.pauseResumeTween(this.powerUpOnOffTimeline,"pause")},t.prototype.resume=function(){e.prototype.resume.call(this),this.setBackgroundColor(15724527),this.game.ui.setUI("gameplay-aqua-jetpack"),Game.resumeSound("aqua-jetpack/music.mp3"),this.game.powerUpManager.resume(),Game.resumeSound("aqua-jetpack/large-splash.mp3"),Game.resumeSound("aqua-jetpack/loud-splash.mp3"),Game.resumeSound("aqua-jetpack/water-looping.mp3"),Game.resumeSound("aqua-jetpack/move-down-1.mp3"),Game.resumeSound("aqua-jetpack/move-down-2.mp3"),Game.resumeSound("aqua-jetpack/move-down-3.mp3"),Game.resumeSound("aqua-jetpack/swish-long-1.mp3"),Game.resumeSound("aqua-jetpack/swish-long-2.mp3"),Game.resumeSound("aqua-jetpack/swish-long-3.mp3"),Game.resumeSound("aqua-jetpack/power-up-bubble.mp3"),Game.resumeSound("aqua-jetpack/water-jet-1.mp3"),Game.resumeSound("aqua-jetpack/water-jet-2.mp3"),Game.resumeSound("aqua-jetpack/max-enemies.mp3"),Game.resumeSound("aqua-jetpack/phoebe-woop.mp3"),Game.resumeSound("aqua-jetpack/max-loosers.mp3"),Game.resumeSound("aqua-jetpack/phoebe-close.mp3"),Game.resumeSound("aqua-jetpack/max-what.mp3"),Game.resumeSound("aqua-jetpack/phoebe-happened.mp3"),this.pauseResumeTween(this.removeStartPlatformTimeline,"resume"),this.pauseResumeTween(this.heartTimeline,"resume"),this.pauseResumeTween(this.gameOverDelay,"resume"),this.pauseResumeTween(this.powerUpOnOffTimeline,"resume")},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tutorialOverlay.destroy(),Game.stopSound("aqua-jetpack/large-splash.mp3"),Game.stopSound("aqua-jetpack/loud-splash.mp3"),Game.stopSound("aqua-jetpack/water-looping.mp3"),Game.stopSound("aqua-jetpack/move-down-1.mp3"),Game.stopSound("aqua-jetpack/move-down-2.mp3"),Game.stopSound("aqua-jetpack/move-down-3.mp3"),Game.stopSound("aqua-jetpack/swish-long-1.mp3"),Game.stopSound("aqua-jetpack/swish-long-2.mp3"),Game.stopSound("aqua-jetpack/swish-long-3.mp3"),Game.stopSound("aqua-jetpack/power-up-bubble.mp3"),Game.stopSound("aqua-jetpack/water-jet-1.mp3"),Game.stopSound("aqua-jetpack/water-jet-2.mp3"),Game.stopSound("aqua-jetpack/max-enemies.mp3"),Game.stopSound("aqua-jetpack/phoebe-woop.mp3"),Game.stopSound("aqua-jetpack/max-loosers.mp3"),Game.stopSound("aqua-jetpack/phoebe-close.mp3"),Game.stopSound("aqua-jetpack/max-what.mp3"),Game.stopSound("aqua-jetpack/phoebe-happened.mp3");for(t=0;t<this.waterFrontLayers.length;t++)Game.displayStore.returnPooledItem(this.waterFrontLayers[t]);for(t=0;t<this.nozzleWaterParticles.length;t++)Game.displayStore.returnPooledItem(this.nozzleWaterParticles[t].sprite);for(t=0;t<this.splashParticles.length;t++)Game.displayStore.returnPooledItem(this.splashParticles[t].sprite);for(t=0;t<this.leftNets.length;t++)Game.displayStore.returnPooledItem(this.leftNets[t]);for(t=0;t<this.rightNets.length;t++)Game.displayStore.returnPooledItem(this.rightNets[t]);Game.displayStore.returnPooledItem(this.leftLifeRing),Game.displayStore.returnPooledItem(this.rightLifeRing),Game.displayStore.returnPooledItem(this.leftLaneLimitMarker),Game.displayStore.returnPooledItem(this.rightLaneLimitMarker);for(t=0;t<this.heartLives.length;t++)Game.displayStore.returnPooledItem(this.heartLives[t].icon);for(t=0;t<this.powerUpParticles.length;t++)Game.displayStore.returnPooledItem(this.powerUpParticles[t].sprite);Game.displayStore.returnPooledItem(this.nozzleAnimLeft),Game.displayStore.returnPooledItem(this.nozzleAnimRight),Game.displayStore.returnPooledItem(this.waterSurfaceAnimLeft),Game.displayStore.returnPooledItem(this.waterSurfaceAnimRight),this.backgroundManager.destroy(),this.fishManager.destroy(),this.inputManager.destroy(),this.physicsManager.destroy(),this.pickupManager.destroy(),this.ticketManager.destroy(),this.removeStartPlatformTimeline=this.killTween(this.removeStartPlatformTimeline),this.heartTimeline=this.killTween(this.heartTimeline),this.gameOverDelay=this.killTween(this.gameOverDelay),this.powerUpOnOffTimeline=this.killTween(this.powerUpOnOffTimeline),Game.displayStore.returnPooledItem(this.characterWaterBreakAnim),Game.displayStore.returnPooledItem(this.splashFrames);for(var t=0;t<this.powerUpParticles.length;t++)Game.displayStore.returnPooledItem(this.powerUpParticles[t].sprite)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),SnowballWarsGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="snowballWarsGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.orderingContainer=Game.displayStore.getContainer("snowball-wars/ordering-container"),this.mainDisplayOrder=new Array,this.debugSprites=!1,this.randomSnowball=0,this.gameStarted=!1,this.gameOverTriggered=!1,this.losingHeart=!1,this.difficultyCounter=1,this.currentRound=1,this.lilyBlinkTimer=0,this.lilyBlinkLimit=60,this.snowRate=1,this.snowSpeed=1,this.snowballScaling=!1,this.leftSideWall=Game.displayStore.getSprite("snowball-wars/side-wall"),this.rightSideWall=Game.displayStore.getSprite("snowball-wars/side-wall"),this.leftSideSnow=Game.displayStore.getSprite("snowball-wars/side-snow"),this.rightSideSnow=Game.displayStore.getSprite("snowball-wars/side-snow"),this.lilySucking=!0,this.wallEdge1=Game.displayStore.getSprite("snowball-wars/wall-edge"),this.wallEdge2=Game.displayStore.getSprite("snowball-wars/wall-edge"),this.roundEndZoom=!0,this.sky=Game.displayStore.getSprite("snowball-wars/sky"),this.sky.width=Game.stageWidth,this.sky.height=Game.stageHeight,this.container.addChild(this.sky),this.sky.interactive=!1,console.log("sky is not interactive"),this.reorderCounter=0,this.backgroundBushes=Game.displayStore.getSprite("snowball-wars/bushes-full"),this.backgroundTrees=Game.displayStore.getSprite("snowball-wars/trees-full"),this.lilyHolder=Game.displayStore.getContainer("snowball-wars/lily-holder"),this.lilyBody=this.lilyHolder.getSprite("snowball-wars/lily/lily-body"),this.lilyArm=this.lilyHolder.getSprite("snowball-wars/lily/lily-arm"),this.lilyHair=this.lilyHolder.getSprite("snowball-wars/lily/lily-hair"),this.lilyMouth=this.lilyHolder.getSprite("snowball-wars/lily/lily-mouth"),this.lilyBlink=this.lilyHolder.getSprite("snowball-wars/lily/lily-blink"),this.snowmanBody=Game.displayStore.getSprite("snowball-wars/snowman-body"),this.snowmanHead=Game.displayStore.getSprite("snowball-wars/snowman-head"),this.arenaLeft=Game.displayStore.getSprite("snowball-wars/arena-side"),this.arenaRight=Game.displayStore.getSprite("snowball-wars/arena-side"),this.frontBarrier=Game.displayStore.getSprite("snowball-wars/barrier"),this.backBarrier=Game.displayStore.getSprite("snowball-wars/barrier"),this.healthUILayer=Game.displayStore.getContainer("snowball-wars/health-ui"),this.mainContainer=Game.displayStore.getContainer("snowball-wars/main-container"),this.scaleContainer=Game.displayStore.getContainer("snowball-wars/scale-container"),this.floorLayer=Game.displayStore.getContainer("snowball-wars/floor-layer"),this.backgroundLayer=Game.displayStore.getContainer("snowball-wars/background-container"),this.backgroundLayer2=Game.displayStore.getContainer("snowball-wars/background-container-2"),this.backgroundMaster=Game.displayStore.getContainer("snowball-wars/background-master-container"),0==Game.isLowEndIPad&&(this.cloud1=Game.displayStore.getSprite("snowball-wars/bg-cloud"),this.cloud2=Game.displayStore.getSprite("snowball-wars/bg-cloud"),this.cloud3=Game.displayStore.getSprite("snowball-wars/bg-cloud"),this.cloud4=Game.displayStore.getSprite("snowball-wars/bg-cloud"),this.backgroundLayer.addChild(this.cloud1),this.backgroundLayer2.addChild(this.cloud2),this.backgroundLayer.addChild(this.cloud3),this.backgroundLayer2.addChild(this.cloud4),this.cloud1.position.x=0,this.cloud1.position.y=-80,this.cloud1.scale.x=this.cloud1.scale.y=.3,this.cloud2.position.x=300,this.cloud2.position.y=-60,this.cloud2.scale.x=this.cloud2.scale.y=.35,this.cloud3.position.x=500,this.cloud3.position.y=-90,this.cloud3.scale.x=this.cloud3.scale.y=.3,this.cloud4.position.x=800,this.cloud4.position.y=-70,this.cloud4.scale.x=this.cloud4.scale.y=.4),this.scaleContainer.setRegPointPixels(Game.stageWidth/2,Game.stageHeight/2,!0),this.defaultScaleContainerPos=this.scaleContainer.position.x,this.snowballCounterTarget=10,this.snowballAtTarget=!0,this.snowballIncreaseDelay=0,this.survivedText=Game.displayStore.getBitmapText("snowball-wars/survived-text"),Game.stringsManager.setTextString(this.survivedText,"snowball-wars-sign"),this.survivedNumber=Game.displayStore.getBitmapText("snowball-wars/survived-number"),this.survivedNumber.text="0",this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),this.arenaFloor=Game.displayStore.getSprite("snowball-wars/arena-floor"),this.arenaFloor.position.x=Game.stageWidth/2,this.arenaFloor.position.y=Game.stageHeight/2,this.arenaFloor.scale.y=1,this.arenaLeft.position.x=this.arenaFloor.position.x-this.arenaFloor.width/2+20,this.arenaLeft.position.y=this.arenaFloor.position.y-this.arenaFloor.height/2-100,this.arenaRight.scale.x=-1,this.arenaRight.position.x=this.arenaFloor.position.x+this.arenaFloor.width/2-20,this.arenaRight.position.y=this.arenaFloor.position.y-this.arenaFloor.height/2-100,this.arenaBounds={playArenaMinX:this.arenaFloor.position.x-this.arenaFloor.width/2,playArenaMaxX:this.arenaFloor.position.x+this.arenaFloor.width/2,playArenaMaxY:this.arenaFloor.position.y+this.arenaFloor.height/2,playArenaMinY:this.arenaFloor.position.y-this.arenaFloor.height/2},this.backWall=Game.displayStore.getSprite("snowball-wars/dark-wall"),this.backWall.position.x=this.arenaFloor.position.x-this.arenaFloor.width/2-this.arenaLeft.width,this.backWall.height=100,this.backWall.position.y=this.arenaBounds.playArenaMinY-this.backWall.height,this.backWall.width=this.arenaFloor.width+2*this.arenaLeft.width,this.wallTop=Game.displayStore.getSprite("snowball-wars/wall-snow"),this.wallTop.position.x=this.arenaFloor.position.x-this.arenaFloor.width/2-this.arenaLeft.width,this.wallTop.height=50,this.wallTop.position.y=this.backWall.position.y-this.wallTop.height,this.wallTop.width=this.arenaFloor.width+2*this.arenaLeft.width,this.frontWall=Game.displayStore.getSprite("snowball-wars/dark-wall"),this.frontWall.position.x=this.arenaFloor.position.x-this.arenaFloor.width/2,this.frontWall.height=200,this.frontWall.position.y=this.arenaBounds.playArenaMaxY,this.frontWall.width=this.arenaFloor.width,this.arenaManager=new SnowballWarsArenaManager(this,this.arenaBounds),this.backgroundMountainsArray=new Array,this.backgroundMountainsArray2=new Array,this.scoreSign=Game.displayStore.getSprite("snowball-wars/score-sign"),this.scoreSign.position.x=this.arenaBounds.playArenaMaxX/2-40,this.scoreSign.position.y=this.arenaBounds.playArenaMinY+15,this.scoreSign.scale.x=this.scoreSign.scale.y=.8,this.snowFront=new Array,this.backgroundMountainFull1=Game.displayStore.getSprite("snowball-wars/mountain-full"),this.backgroundMountainFull2=Game.displayStore.getSprite("snowball-wars/mountain-full"),this.backgroundMountainFull1.tint=7584992,this.backgroundMountainFull2.tint=8966652,this.backgroundLayer.addChild(this.backgroundMountainFull1),this.backgroundLayer2.addChild(this.backgroundMountainFull2),this.lilyHolder.scale.x=this.lilyHolder.scale.y=.55,this.lilyMouth.position.x=-35,this.lilyMouth.position.y=-83,this.lilyMouth.alpha=1,this.lilyArm.position.x=-48,this.lilyArm.position.y=-62,this.lilyHair.position.x=10,this.lilyHair.position.y=-120,this.lilyBlink.visible=!1,this.lilyHolder.position.x=803,this.lilyHolder.position.y=80,this.snowmanBody.position.x=this.scoreSign.position.x-250,this.snowmanHead.position.x=this.scoreSign.position.x-240,this.snowmanHead.scale.x=this.snowmanHead.scale.y=1.1,this.snowmanBody.position.y=this.wallTop.position.y+50,this.snowmanHead.position.y=this.wallTop.position.y-20,this.backgroundBushes.position.y=this.wallTop.position.y+10,this.backgroundTrees.position.y=this.wallTop.position.y+40,this.backgroundTrees.scale.x=this.backgroundTrees.scale.y=1.2,this.backgroundBushes.position.x=this.wallTop.position.x+this.arenaLeft.width,this.backgroundTrees.position.x=this.wallTop.position.x+this.arenaLeft.width-30,3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),Game.coreData.setCurrentRide("snowball-wars"),this.tutorialViewed=Game.coreData.getGameTutorialViewed("snowball-wars"),this.floorShadow=Game.displayStore.getSprite("snowball-wars/floor-shadow"),this.floorShadow.position.x=this.arenaFloor.position.x,this.floorShadow.position.y=this.arenaBounds.playArenaMinY-10,this.floorShadow.width=this.arenaFloor.width,this.backgroundLayer.position.x=-180.101,this.backgroundLayer2.position.x=-376.482,this.backgroundLayer.position.y=-20,this.backgroundLayer2.position.y=-30,this.backgroundLayer2.scale.x=this.backgroundLayer2.scale.y=1.3,this.backgroundLayer.scale.x=this.backgroundLayer.scale.y=1.1,this.mainContainer.addChild(this.backgroundLayer2),this.mainContainer.addChild(this.backgroundLayer),this.mainContainer.addChild(this.backgroundBushes),this.frontBarrier.position.x=this.arenaFloor.position.x,this.frontBarrier.position.y=this.arenaFloor.position.y+this.arenaFloor.height/2,this.backBarrier.position.x=this.arenaFloor.position.x,this.backBarrier.position.y=this.arenaFloor.position.y-this.arenaFloor.height/2+5,this.mainContainer.addChild(this.backWall),this.mainContainer.addChild(this.frontWall),this.mainContainer.addChild(this.wallTop),this.mainContainer.addChild(this.arenaFloor),this.mainContainer.addChild(this.floorShadow),this.leftSideWall.position.x=this.arenaFloor.position.x-this.arenaFloor.width/2+10,this.leftSideWall.position.y=this.arenaFloor.position.y+this.arenaFloor.height-180,this.leftSideSnow.position.x=this.arenaFloor.position.x-this.arenaFloor.width/2+20,this.leftSideSnow.position.y=this.wallTop.position.y,this.rightSideWall.scale.x=-1,this.rightSideWall.position.x=this.arenaFloor.position.x+this.arenaFloor.width/2-10,this.rightSideWall.position.y=this.arenaFloor.position.y+this.arenaFloor.height-180,this.rightSideSnow.scale.x=-1,this.rightSideSnow.position.x=this.arenaFloor.position.x+this.arenaFloor.width/2-20,this.rightSideSnow.position.y=this.wallTop.position.y,this.wallEdge1.position.x=this.wallTop.position.x,this.wallEdge2.position.x=this.wallEdge1.position.x+this.wallEdge1.width+2*this.arenaLeft.width,this.wallEdge1.position.y=this.wallTop.position.y+40,this.wallEdge2.position.y=this.wallTop.position.y+40,this.mainContainer.addChild(this.wallEdge1),this.mainContainer.addChild(this.wallEdge2),this.mainContainer.addChild(this.backgroundTrees),this.mainContainer.addChild(this.lilyHolder),this.mainContainer.addChild(this.snowmanBody),this.mainContainer.addChild(this.snowmanHead),this.mainContainer.addChild(this.floorLayer),this.mainContainer.addChild(this.backBarrier),this.mainContainer.addChild(this.scoreSign),this.mainContainer.addChild(this.survivedText),this.mainContainer.addChild(this.survivedNumber),this.mainContainer.addChild(this.arenaLeft),this.mainContainer.addChild(this.arenaRight),this.mainContainer.addChild(this.orderingContainer),this.mainContainer.addChild(this.frontBarrier),this.survivedText.scale.x=this.survivedText.scale.y=.65,this.survivedText.position.x=this.scoreSign.position.x-this.survivedText.width/2,this.survivedText.position.y=this.scoreSign.position.y-240,this.survivedNumber.position.x=this.scoreSign.position.x-this.survivedNumber.width/2-10,this.survivedNumber.position.y=this.scoreSign.position.y-190,this.hatchManager=new SnowballWarsHatchManager(this),this.ammoManager=new SnowballWarsAmmoManager(this,this.arenaManager),this.aiManager=new SnowballWarsAIManager(this,this.arenaBounds,this.arenaManager);for(o=0;o<7;o++)this.snowFront.push({sprite:Game.displayStore.getSprite("snowball-wars/snow-front"),shadow:Game.displayStore.getSprite("snowball-wars/front-wall-shadow")}),this.floorLayer.addChild(this.snowFront[o].shadow),this.floorLayer.addChild(this.snowFront[o].sprite),this.snowFront[o].shadow.scale.x=this.snowFront[o].shadow.scale.y=1.03,this.snowFront[o].sprite.scale.x=this.snowFront[o].sprite.scale.y=1.03,this.snowFront[o].sprite.position.x=this.frontWall.position.x+this.snowFront[o].sprite.width*o,this.snowFront[o].sprite.position.y=this.frontWall.position.y+5,this.snowFront[o].shadow.position.x=this.frontWall.position.x+this.snowFront[o].shadow.width*o,this.snowFront[o].shadow.position.y=this.frontWall.position.y+8;this.projectileManager=new SnowballWarsProjectileManager(this),this.player=new SnowballWarsPlayer(this,this.arenaManager),this.player.spawn(),this.scaleContainer.addChild(this.mainContainer),this.container.addChild(this.scaleContainer),this.mainContainer.position.x=132.478,this.mainContainer.position.y=60.383,Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.heartBG=Game.displayStore.getSprite("snowball-wars/heart-bg"),this.container.addChild(this.heartBG),this.heartBG.position.x=109,this.heartBG.position.y=50,this.heartIcons=new Array;for(o=0;o<3;o++)this.heartIcons.push({heart:Game.displayStore.getSprite("snowball-wars/heart-icon"),active:!0}),this.container.addChild(this.heartIcons[o].heart),this.heartIcons[o].heart.position.x=100,this.heartIcons[o].heart.position.y=50,this.heartIcons[o].heart.visible=!0,this.heartIcons[o].heart.scale.x=1,this.heartIcons[o].heart.scale.y=1;if(this.heartIcons[0].heart.position.x-=70,this.heartIcons[2].heart.position.x+=70,this.gameStarted=!0,this.roundManager=new SnowballWarsRoundManager(this,this.arenaManager),this.snowballBG=Game.displayStore.getSprite("snowball-wars/snowball-bg"),this.snowballIcon=Game.displayStore.getSprite("snowball-wars/snowball-icon"),this.snowballCount=10,this.snowballTextNumber=Game.displayStore.getBitmapText("snowball-wars/snowball-number"),this.snowballTextNumber.tint=15751715,this.snowballTextNumber.text=String(this.snowballCount),this.snowballUIHolder=Game.displayStore.getContainer("snowball-wars/snowball-ui-holder"),3==Game.assetChunkManager.getCurrentGameLaunchMode()?(this.snowballBG.position.y=130,this.snowballBG.position.x=40,this.snowballIcon.position.y=160,this.snowballIcon.position.x=50,this.snowballTextNumber.position.y=this.snowballIcon.position.y-this.snowballTextNumber.height-20,this.snowballTextNumber.position.x=this.snowballIcon.position.x-this.snowballTextNumber.width/2-10,this.snowballTextNumber.rotation=-.2):(this.snowballBG.position.y=230,this.snowballBG.position.x=40,this.snowballIcon.position.y=260,this.snowballIcon.position.x=50,this.snowballTextNumber.position.y=this.snowballIcon.position.y-this.snowballTextNumber.height-20,this.snowballTextNumber.position.x=this.snowballIcon.position.x-this.snowballTextNumber.width/2-10,this.snowballTextNumber.rotation=-.2),this.snowballTextNumber.setRegPoint(.5,.5),this.snowballUIHolder.addChild(this.snowballIcon),this.snowballUIHolder.addChild(this.snowballTextNumber),this.container.addChild(this.snowballBG),this.container.addChild(this.snowballUIHolder),this.inputManager=new SnowballWarsInputManager(this),this.mortarManager=new SnowballWarsMortarManager(this),this.mainContainer.addChild(this.healthUILayer),this.currentRound=1,this.survivedNumber.text=String(this.currentRound-1),0==Game.isLowEndIPad){console.log("making snowflakes"),this.snowTimer=0,this.snowParticles=new Array,this.snowContainer=Game.displayStore.getContainer("snowball-wars/snow-container"),this.mainContainer.addChild(this.snowContainer);for(o=0;o<250;o++){this.snowParticles.push({active:!1,sprite:Game.displayStore.getSprite("snowball-wars/snow-particle"),speed:1,direction:Game.getRandom(-1,1)}),this.snowContainer.addChild(this.snowParticles[o].sprite),this.snowParticles[o].sprite.visible=!1;var i=15*this.currentRound;i>=150&&(i=150),o<i&&(this.snowParticles[o].sprite.position.x=Game.getRandom(0,1e3),this.snowParticles[o].sprite.position.y=Game.getRandom(-240,400),this.snowParticles[o].active=!0,this.snowParticles[o].sprite.visible=!0,this.snowParticles[o].sprite.scale.x=this.snowParticles[o].sprite.scale.y=Game.getRandom(.5,1.5))}}this.tickets=new Array;for(o=0;o<2;o++)this.tickets.push({ticket:Game.ticketPool.getTicket(),posX:150*o,posY:-250,collectDelay:null});for(var s=(Game.stageWidth-this.tickets[this.tickets.length-1].posX)/2,o=0;o<this.tickets.length;o++)this.tickets[o].posX+=s;1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("snowball-wars",!0)},t.prototype.setRoundDifficulty=function(e,t){switch(this.currentRound=e,this.difficultyCounter=t,this.difficultyCounter){case 1:this.snowRate=8,this.snowSpeed=1;break;case 2:this.snowRate=6,this.snowSpeed=2;break;case 3:this.snowRate=4,this.snowSpeed=3;break;case 4:this.snowRate=2,this.snowSpeed=4;break;case 5:this.snowRate=0,this.snowSpeed=4}this.survivedNumber.text=String(this.currentRound-1)},t.prototype.removeOldSisters=function(){this.aiManager.removeOldSisters()},t.prototype.spawnNewSisters=function(){this.aiManager.startRound()},t.prototype.markNewSisters=function(){this.aiManager.setNewSisters()},t.prototype.getRoundSisters=function(){return this.aiManager.getTotalSisters()},t.prototype.requestNewRound=function(){this.roundManager.newRound()},t.prototype.getArenaPos=function(e){return this.arenaManager.getArenaPosition(e)},t.prototype.sortCharacters=function(){if(1==Game.isLowEndIPad){if(++this.reorderCounter<120)return;this.reorderCounter=0}else if(2==++this.reorderCounter){for(var e=0;e<this.mainDisplayOrder.length;e++)this.mainDisplayOrder[e].yPosition=this.mainDisplayOrder[e].object.y,"mortar-ball"==this.mainDisplayOrder[e].objectType?this.mainDisplayOrder[e].yPosition=this.mortarManager.getMortarYPos(this.mainDisplayOrder[e].objectID):"mortar-particle"==this.mainDisplayOrder[e].objectType&&0==Game.isLowEndIPad&&(this.mainDisplayOrder[e].yPosition=this.mortarManager.getParticleYPos(this.mainDisplayOrder[e].objectID));this.sortDisplayArray(),this.reorderCounter=0}},t.prototype.sortDisplayArray=function(){this.mainDisplayOrder.sort(function(e,t){return e.yPosition-t.yPosition}),this.addMainDisplayObjects()},t.prototype.addMainDisplayObjects=function(){this.orderingContainer.removeAllChildren();for(var e=0;e<this.mainDisplayOrder.length;e++)this.orderingContainer.addChild(this.mainDisplayOrder[e].object)},t.prototype.startGameplay=function(){this.game.ui.triggerEnjoyTheRide(),this.game.ui.setUI("gameplay-snowball-wars"),this.game.powerUpManager.startGame(),this.roundManager.updateRoundStart(),Game.setSoundVolume("snowball-wars/wind.mp3",0),Game.fadeSound("snowball-wars/wind.mp3",5,.1),Game.playSound("snowball-wars/wind.mp3"),Game.stopSound("snowball-wars/music.mp3"),Game.setSoundVolume("snowball-wars/music.mp3",0),Game.fadeSound("snowball-wars/music.mp3",5,.3),Game.playSound("snowball-wars/music.mp3")},t.prototype.spawnMortar=function(e){return this.mortarManager.spawnMortar(e),this.getHatchPosition(e)},t.prototype.loseLife=function(){if(1!=this.gameOverTriggered){console.log("LOSE LIFE!");for(var e=this.heartIcons.length-1;e>=0;e--)if(0!=this.heartIcons[e].active)return this.heartIcons[e].active=!1,this.heartIcons[e].heart.visible=!1,void this.checkGameOver()}},t.prototype.getLives=function(){for(var e=0,t=0;t<this.heartIcons.length;t++)1==this.heartIcons[t].active&&e++;return{currentLives:e,totalLives:this.heartIcons.length}},t.prototype.checkGameOver=function(){for(var e=0,t=0;t<this.heartIcons.length;t++)0==this.heartIcons[t].active&&e++,e==this.heartIcons.length&&(this.gameOverTriggered=!0,this.player.triggerGameover(),this.gameOverDelay=TweenMax.delayedCall(2,this.endGame,[this]))},t.prototype.endGame=function(e){e.gameOverDelay=e.killTween(e.gameOverDelay),e.wristbandOverlay.endGame(e.currentRound)},t.prototype.changePlayerVelocity=function(e){this.player.changeVelocity(e)},t.prototype.getAmmoPosition=function(){return this.ammoManager.getAmmoPosition()},t.prototype.getPlayerAmmoPosition=function(){return this.ammoManager.getPlayerAmmoPosition()},t.prototype.checkForCollisions=function(e,t,i){return this.arenaManager.checkCollisions(e,t,i)},t.prototype.checkSnowballCollision=function(e,t,i){return this.projectileManager.checkSnowballCollision(e,t,i)},t.prototype.checkAmmoCollision=function(e,t,i,s){return this.ammoManager.checkAmmoCollision(e,t,i,s)},t.prototype.fireSnowBall=function(e,t,i,s){this.projectileManager.spawnSnowball(e,t,i,s),"player"==e&&(0==this.player.powerUpActive&&this.snowballCounterTarget--,this.snowballAtTarget=!1,this.snowballScaling=!0)},t.prototype.enemyShotPlayer=function(e){this.aiManager.setEnemyHappy(e)},t.prototype.closeHatch=function(e){this.hatchManager.deactivateHatch(e)},t.prototype.openHatch=function(e){this.hatchManager.openHatch(e)},t.prototype.checkHatchStatus=function(e){return this.hatchManager.hatchArray[e].open},t.prototype.addSisterToHatch=function(e,t){this.hatchManager.addSister(e,t)},t.prototype.playerfire=function(){this.player.fireHeld=!0,this.player.fireSnowball()},t.prototype.releaseFire=function(){this.player.fireHeld=!1},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"playbuttonlarge":this.resume();break;case"pause-button":this.pause(!1)}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.getPlayerPosition=function(){return this.player.getPlayerPosition()},t.prototype.getEnemyPosition=function(e){return this.aiManager.getEnemyPosition(e)},t.prototype.getHatchPosition=function(e){return this.hatchManager.getHatchPosition(e)},t.prototype.setGameCamera=function(e){this.roundEndZoom=e},t.prototype.checkActiveHazards=function(){if(0==this.mortarManager.anyMortarsActive)var e=!1;return e},t.prototype.spawnSnowParticle=function(){for(var e=0;e<this.snowParticles.length;e++)if(0==this.snowParticles[e].active){this.snowParticles[e].active=!0,this.snowParticles[e].sprite.visible=!0,this.snowParticles[e].sprite.alpha=1,this.snowParticles[e].sprite.position.x=Game.getRandom(-200,1400),this.snowParticles[e].sprite.position.y=Game.getRandom(-350,-300),this.snowParticles[e].sprite.scale.x=this.snowParticles[e].sprite.scale.y=Game.getRandom(.5,1.5),this.snowParticles[e].speed=this.snowParticles[e].sprite.scale.x;break}},t.prototype.changePlayerHealth=function(){this.player.changeHealth(-1)},t.prototype.positionCamera=function(){if(1==this.roundEndZoom)return this.mainContainer.position.x=this.simpleEase(this.mainContainer.position.x,0,20),this.mainContainer.position.y=this.simpleEase(this.mainContainer.position.y,480,20),void(this.scaleContainer.scale.x=this.scaleContainer.scale.y=this.simpleEase(this.scaleContainer.scale.x,1.5,20));this.scaleContainer.scale.x=this.scaleContainer.scale.y=this.simpleEase(this.scaleContainer.scale.x,1,20);var e=this.player.getPlayerPosition(),t=e.x+200,i=e.y,s=i-Game.stageHeight/2,o=t-Game.stageWidth/2,a=(this.arenaBounds.playArenaMinY,t/15-200),r=t/15-400;o>107&&(o=107),o<-180&&(o=-180),t<380?(t>Game.stageWidth/2?this.mainContainer.position.x=this.simpleEase(this.mainContainer.position.x,-Math.abs(o),20):this.mainContainer.position.x=this.simpleEase(this.mainContainer.position.x,Math.abs(o),20),0==Game.isLowEndIPad&&(this.backgroundLayer.position.x=this.simpleEase(this.backgroundLayer.position.x,-Math.abs(a),20),this.backgroundLayer2.position.x=this.simpleEase(this.backgroundLayer2.position.x,-Math.abs(r),25))):this.mainContainer.position.x=t>380?this.simpleEase(this.mainContainer.position.x,-100,40):this.simpleEase(this.mainContainer.position.x,132,20),i<this.arenaBounds.playArenaMaxY-270?i>Game.stageHeight/2?this.mainContainer.position.y=this.simpleEase(this.mainContainer.position.y,-Math.abs(s),1):this.mainContainer.position.y=this.simpleEase(this.mainContainer.position.y,Math.abs(s),1):this.mainContainer.position.y=this.simpleEase(this.mainContainer.position.y,60,20)},t.prototype.collisionChecking=function(){},t.prototype.getArenaChunkNumber=function(e,t){return this.arenaManager.getArenaChunk(e,t)},t.prototype.endRound=function(){this.player.endRoundReset(),this.aiManager.endRoundReset(),this.populateTickets(),this.game.powerUpManager.betweenRoundPowerUpPause();for(var e=0;e<this.heartIcons.length;e++)0==this.heartIcons[e].active&&(this.heartIcons[e].active=!0,this.heartIcons[e].heart.visible=!0)},t.prototype.populateTickets=function(){for(var e=0;e<this.tickets.length;e++){this.tickets[e].ticket=Game.ticketPool.getTicket(),this.tickets[e].ticket.container.position.x=this.tickets[e].posX,this.tickets[e].ticket.container.position.y=this.tickets[e].posY,this.mainContainer.addChild(this.tickets[e].ticket.container);var t=1+.5*e;this.tickets[e].collectDelay=TweenMax.delayedCall(t,this.collectTicket,[this,e])}},t.prototype.collectTicket=function(e,t){e.tickets[t].ticket.collect(),e.tickets[t].collectDelay=e.killTween(e.tickets[t].collectDelay)},t.prototype.roundUnlock=function(){this.player.roundUnlock(),this.aiManager.roundUnlock(),this.ammoManager.newRoundCall(),this.game.powerUpManager.betweenRoundPowerUpResume()},t.prototype.tick=function(t){if(e.prototype.tick.call(this,t),1!=this.paused&&1!=this.tutorialOverlay.isOpen&&1!=this.wristbandOverlay.isOpen&&(1==this.gameStarted&&this.sortCharacters(),this.positionCamera(),this.player.tick(),this.ammoManager.tick(),this.projectileManager.tick(),this.aiManager.tick(),this.mortarManager.tick(),this.hatchManager.tick(),this.roundManager.tick(),this.inputManager.tick(),0==Game.isLowEndIPad&&(0==Game.isLowEndIPad&&(this.cloud1.position.x++,this.cloud2.position.x++,this.cloud3.position.x++,this.cloud4.position.x++,this.cloud1.position.x>1.7*Game.stageWidth&&(this.cloud1.position.x=300),this.cloud2.position.x>1.7*Game.stageWidth&&(this.cloud2.position.x=300),this.cloud3.position.x>1.7*Game.stageWidth&&(this.cloud3.position.x=300),this.cloud4.position.x>1.7*Game.stageWidth&&(this.cloud4.position.x=300)),++this.lilyBlinkTimer>=this.lilyBlinkLimit&&(this.lilyBlink.visible=!0,this.lilyBlinkTimer>=this.lilyBlinkLimit+15&&(this.lilyBlinkTimer=0,this.lilyBlinkLimit=Game.getRandom(60,200),this.lilyBlink.visible=!1)),this.lilyArm.position.x>-41&&(this.lilySucking=!1),this.lilyArm.position.x<-47&&(this.lilySucking=!0),1==this.lilySucking&&(this.lilyArm.position.x=this.simpleEase(this.lilyArm.position.x,-40,10),this.lilyHair.rotation=this.simpleEase(this.lilyHair.rotation,-.1,20),this.lilyBody.scale.x=this.lilyBody.scale.y=this.simpleEase(this.lilyBody.scale.x,.98,30)),0==this.lilySucking&&(this.lilyArm.position.x=this.simpleEase(this.lilyArm.position.x,-48,10),this.lilyHair.rotation=this.simpleEase(this.lilyHair.rotation,.1,20),this.lilyBody.scale.x=this.lilyBody.scale.y=this.simpleEase(this.lilyBody.scale.x,1,30)),this.snowballIcon.scale.x>1.18&&(this.snowballScaling=!1),1==this.snowballScaling&&(this.snowballIcon.scale.x=this.simpleEase(this.snowballIcon.scale.x,1.2,5),this.snowballIcon.scale.y=this.simpleEase(this.snowballIcon.scale.y,1.2,5)),0==this.snowballScaling&&(this.snowballIcon.scale.x=this.simpleEase(this.snowballIcon.scale.x,1,5),this.snowballIcon.scale.y=this.simpleEase(this.snowballIcon.scale.y,1,5))),0==this.snowballAtTarget&&++this.snowballIncreaseDelay>=7&&(this.snowballIncreaseDelay=0,this.snowballCounterTarget<this.snowballCount&&this.snowballCount--,this.snowballCounterTarget>this.snowballCount&&this.snowballCount++,this.snowballCounterTarget==this.snowballCount&&(this.snowballAtTarget=!0),this.snowballTextNumber.text=String(this.snowballCount),this.snowballTextNumber.position.y=this.snowballIcon.position.y-this.snowballTextNumber.height-20,this.snowballTextNumber.position.x=this.snowballIcon.position.x-this.snowballTextNumber.width/2-10,this.snowballCount<=0?this.snowballTextNumber.tint=16711680:this.snowballTextNumber.tint=15751715),0==Game.isLowEndIPad)){++this.snowTimer>=this.snowRate&&(this.snowTimer=0,this.spawnSnowParticle(),this.spawnSnowParticle());for(var i=0;i<this.snowParticles.length;i++){var s=this.snowParticles[i];1==s.active&&(s.sprite.position.y>0+350*s.sprite.scale.x?s.sprite.alpha-=.05:(s.sprite.position.y+=this.snowSpeed*s.speed,s.sprite.position.x+=s.direction*s.speed,s.sprite.rotation+=.05),s.sprite.alpha<=0&&(s.active=!1,s.sprite.visible=!1))}}},t.prototype.gameOver=function(e){e.wristbandOverlay.endGame(e.score)},t.prototype.shakeContainer=function(){this.scaleContainer.position.x=this.defaultScaleContainerPos,this.shakeTimeline=this.killTween(this.shakeTimeline),this.shakeTimeline=new TimelineMax;var e=new RoughEase({strength:1,points:50,template:Strong.easeInOut,randomize:!0});this.shakeTimeline.add(TweenMax.to(this.scaleContainer.position,.1,{x:"-=15"}),0),this.shakeTimeline.add(TweenMax.to(this.scaleContainer.position,.3,{x:"+=15",ease:e}),.2)},t.prototype.happyLinc=function(){this.player.happyLinc()},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&("left"==t?this.leftKeyDown():"right"==t?this.rightKeyDown():"up"==t?this.upKeyDown():"down"==t?this.downKeyDown():"spacebar"==t&&this.spacebarKeyDown())},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&("left"==t?this.leftKeyUp():"right"==t?this.rightKeyUp():"up"==t?this.upKeyUp():"down"==t?this.downKeyUp():"spacebar"==t&&this.spacebarKeyUp())},t.prototype.spacebarKeyDown=function(){this.inputManager.buttonDown("spacebar")},t.prototype.spacebarKeyUp=function(){this.inputManager.buttonUp("spacebar")},t.prototype.leftKeyDown=function(){this.inputManager.buttonDown("left-button")},t.prototype.leftKeyUp=function(){this.inputManager.buttonUp("left-button")},t.prototype.rightKeyDown=function(){this.inputManager.buttonDown("right-button")},t.prototype.rightKeyUp=function(){this.inputManager.buttonUp("right-button")},t.prototype.upKeyDown=function(){this.inputManager.buttonDown("up-button")},t.prototype.upKeyUp=function(){this.inputManager.buttonUp("up-button")},t.prototype.downKeyDown=function(){this.inputManager.buttonDown("down-button")},t.prototype.downKeyUp=function(){this.inputManager.buttonUp("down-button")},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause")},t.prototype.activatePowerUpEffect=function(){this.player.powerUpActive=!0,this.player.activatePlayerPowerup()},t.prototype.deactivatePowerUpEffect=function(){console.log("called for power up END"),this.player.powerUpActive=!1,this.player.deactivatePlayerPowerup()},t.prototype.secondChanceUse=function(){this.player.secondChanceReset(),this.gameOverTriggered=!1;for(var e=0;e<this.heartIcons.length;e++)0==this.heartIcons[e].active&&(this.heartIcons[e].active=!0,this.heartIcons[e].heart.visible=!0);Game.playSound("snowball-wars/linc-i-wont-give-up.mp3")},t.prototype.pause=function(t){0==t&&(Game.pauseSound("snowball-wars/wind.mp3"),Game.pauseSound("snowball-wars/music.mp3"),e.prototype.pause.call(this,t)),this.game.powerUpManager.pause(),this.player.pause(),this.aiManager.pause(),this.roundManager.pause();for(var i=0;i<this.tickets.length;i++)this.tickets[i].ticket.pause(),this.pauseResumeTween(this.tickets[i].collectDelay,"pause");this.pauseResumeTween(this.gameOverDelay,"pause"),this.pauseResumeTween(this.shakeTimeline,"pause")},t.prototype.resume=function(){e.prototype.resume.call(this),this.setBackgroundColor(15724527),this.player.resume(),this.aiManager.resume(),this.roundManager.resume(),this.game.ui.setUI("gameplay-snowball-wars"),Game.resumeSound("snowball-wars/wind.mp3"),Game.resumeSound("snowball-wars/music.mp3"),this.game.powerUpManager.resume(),this.pauseResumeTween(this.gameOverDelay,"resume"),this.pauseResumeTween(this.shakeTimeline,"resume");for(var t=0;t<this.tickets.length;t++)this.tickets[t].ticket.resume(),this.pauseResumeTween(this.tickets[t].collectDelay,"resume")},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tutorialOverlay.destroy(),this.aiManager.destroy(),this.player.destroy(),this.projectileManager.destroy(),this.ammoManager.destroy(),this.arenaManager.destroy(),this.mortarManager.destroy(),this.hatchManager.destroy(),this.roundManager.destroy(),this.inputManager.destroy(),this.gameOverDelay=this.killTween(this.gameOverDelay),this.shakeTimeline=this.killTween(this.shakeTimeline),Game.displayStore.returnPooledItem(this.wallEdge1),Game.displayStore.returnPooledItem(this.wallEdge2),Game.displayStore.returnPooledItem(this.arenaLeft),Game.displayStore.returnPooledItem(this.arenaRight);for(t=0;t<this.tickets.length;t++)this.tickets[t].collectDelay=this.killTween(this.tickets[t].collectDelay),Game.ticketPool.returnTicket(this.tickets[t].ticket);Game.displayStore.returnPooledItem(this.backgroundMountainFull1),Game.displayStore.returnPooledItem(this.backgroundMountainFull2);for(t=0;t<this.heartIcons.length;t++)Game.displayStore.returnPooledItem(this.heartIcons[t].heart);Game.displayStore.returnPooledItem(this.backWall),Game.displayStore.returnPooledItem(this.frontWall),Game.displayStore.returnPooledItem(this.wallTop),Game.displayStore.returnPooledItem(this.frontBarrier),Game.displayStore.returnPooledItem(this.backBarrier),Game.displayStore.returnPooledItem(this.cloud1),Game.displayStore.returnPooledItem(this.cloud2),Game.displayStore.returnPooledItem(this.cloud3),Game.displayStore.returnPooledItem(this.cloud4),Game.displayStore.returnPooledItem(this.leftSideWall),Game.displayStore.returnPooledItem(this.rightSideWall),Game.displayStore.returnPooledItem(this.leftSideSnow),Game.displayStore.returnPooledItem(this.rightSideSnow);for(t=0;t<this.snowFront.length;t++)Game.displayStore.returnPooledItem(this.snowFront[t].sprite),Game.displayStore.returnPooledItem(this.snowFront[t].shadow);if(0==Game.isLowEndIPad)for(var t=0;t<this.snowParticles.length;t++)Game.displayStore.returnPooledItem(this.snowParticles[t].sprite)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),WaterfallWipeoutGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="waterfallWipeoutGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){if(e.prototype.init.call(this),this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),this.powerupIsActive=!1,this.goingSlow=!1,this.endingGame=!1,this.powerupRatio=1,this.starting=!0,this.introCameraSpeed=.1,3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),Game.coreData.setCurrentRide("waterfall-wipeout"),this.mainHolderPos=new PIXI.Point(180,250),this.tutorialViewed=Game.coreData.getGameTutorialViewed("waterfall-wipeout"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.scaleHolder=Game.displayStore.getContainer("waterfall-wipeout/scale-holder"),this.mainHolder=this.scaleHolder.getContainer("waterfall-wipeout/main-holder"),this.inputManager=new WaterfallWipeoutInputManager(this),this.physicsManager=new WaterfallWipeoutPhysicsManager(this),this.physicsManager.initPhysicsWorld(),this.riverManager=new WaterfallWipeoutRiverManager(this),this.meter=new WaterfallWipeoutMeter(this),this.player=new WaterfallWipeoutPlayer(this),this.physicsDebugger=new PhysicsDebugger(this,this.mainHolder,this.physicsManager.world),this.scaleHolder.interactive=!1,this.scaleHolder.interactiveChildren=!1,this.scoreBG=Game.displayStore.getSprite("waterfall-wipeout/score-bg"),this.scoreBG.position.y=55,this.scoreBG.position.x=500,this.sky=Game.displayStore.getSprite("waterfall-wipeout/sky"),this.sky.width=Game.stageWidth,this.cloudHolder=Game.displayStore.getContainer("waterfall-wipeout/cloud-holder"),this.cloudHolder.position.x=512,this.cloudHolder.position.y=100,this.cloudArray=new Array,0==Game.isLowEndIPad)for(i=0;i<3;i++)this.cloudArray.push({sprite:Game.displayStore.getSprite("waterfall-wipeout/cloud-1"),scale:Game.getRandom(1,1.4),speed:0}),this.cloudArray.push({sprite:Game.displayStore.getSprite("waterfall-wipeout/cloud-2"),scale:Game.getRandom(1,1.4),speed:0});for(var i=0;i<this.cloudArray.length;i++)this.cloudArray[i].sprite.scale.x=this.cloudArray[i].scale,this.cloudArray[i].sprite.scale.y=this.cloudArray[i].scale,this.cloudHolder.addChild(this.cloudArray[i].sprite),this.cloudArray[i].sprite.position.x=Game.getRandom(-Game.stageWidth/2-this.cloudArray[i].sprite.width/2,Game.stageWidth/2-this.cloudArray[i].sprite.width/2),this.cloudArray[i].sprite.position.y=Game.getRandom(-100,200),this.cloudArray[i].speed=this.cloudArray[i].speed+this.cloudArray[i].scale;this.scoreText=Game.displayStore.getBitmapText("waterfall-wipeout/score-font"),this.scoreText.position.x=500,this.scoreText.position.y=17,this.scoreText.scale.x=this.scoreText.scale.y=.75,this.scoreText.text="0m",this.container.addChild(this.sky),this.container.addChild(this.cloudHolder),this.mainHolder.addChild(this.riverManager.container),this.scaleHolder.setRegPointPixels(Game.stageWidth/2,Game.stageHeight/2,!0),this.container.addChild(this.scaleHolder),this.container.addChild(this.meter.container),this.container.addChild(this.scoreBG),this.container.addChild(this.scoreText),this.player.addSprites(),this.mainHolder.position.y=-300,this.mainHolder.position.x=-160,1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("waterfall-wipeout",!0)},t.prototype.startGameplay=function(){Game.playSound("waterfall-wipeout/water-stream.mp3",.5),this.game.ui.setUI("gameplay-waterfall-wipeout"),this.game.powerUpManager.startGame()},t.prototype.startCameraTracking=function(){this.game.ui.triggerEnjoyTheRide(),this.starting=!1},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"playbuttonlarge":this.resume();break;case"pause-button":this.pause(!1)}},t.prototype.takeOnWater=function(e){this.meter.addWater(e)},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.dryout=function(){this.meter.dry(),this.physicsManager.shouldBob=!0},t.prototype.tick=function(t){if(e.prototype.tick.call(this,t),1!=this.paused&&1!=this.tutorialOverlay.isOpen&&1!=this.wristbandOverlay.isOpen){for(var i=0;i<this.cloudArray.length;i++)this.cloudArray[i].sprite.position.x-=this.cloudArray[i].speed,this.cloudArray[i].sprite.position.x<=-Game.stageWidth/2-this.cloudArray[i].sprite.width/2&&(this.cloudArray[i].sprite.position.x=Game.stageWidth/2+this.cloudArray[i].sprite.width/2,this.cloudArray[i].sprite.position.y=Game.getRandom(-100,200));this.inputManager.tick(),this.physicsManager.stepPhysics(),this.player.tick(),this.riverManager.tick(),this.meter.tick(),this.positionViewport(),this.updateScoreText(Math.round(this.player.container.position.x/150))}},t.prototype.positionViewport=function(){if(1==this.starting)return this.mainHolder.x-=this.introCameraSpeed,void(this.introCameraSpeed<4&&(this.introCameraSpeed+=.015));var e=new PIXI.Point((-this.player.container.position.x-this.mainHolder.position.x+this.mainHolderPos.x)/t.cameraMotionEaseAmount,(-this.player.container.position.y-this.mainHolder.position.y+this.mainHolderPos.y)/t.cameraMotionEaseAmount);this.mainHolder.position.y=this.mainHolder.position.y+e.y,this.mainHolder.position.x=this.mainHolder.position.x+e.x;this.physicsManager.playerVelocityMagnitude;var i=1.1-this.riverManager.nextDropHeight/2e3,s=180-500*(1-i),o=250-500*(1-i);i>.1&&(this.scaleHolder.scale.x+=(i-this.scaleHolder.scale.x)/100,this.scaleHolder.scale.y+=(i-this.scaleHolder.scale.y)/100,this.mainHolderPos.x+=(s-this.mainHolderPos.x)/100,this.mainHolderPos.y+=(o-this.mainHolderPos.y)/100)},t.prototype.endGame=function(){1!=this.endingGame&&(this.endingGame=!0,this.physicsManager.sinkBoat(),this.gameOverTimeline=new TimelineMax,this.gameOverTimeline.call(this.gameOver,[this],this,2))},t.prototype.nextRound=function(e){this.inputManager.updateBaseDriveForce(180)},t.prototype.gameOver=function(e){e.wristbandOverlay.endGame(e.score)},t.prototype.secondChanceUse=function(){this.endingGame=!1,this.physicsManager.floatBoat(),this.meter.dry(!0),console.log("doing second chance")},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&1!=this.starting&&this.inputManager.keyDown(t)},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&1!=this.starting&&this.inputManager.keyUp(t)},t.prototype.updateScoreText=function(e){this.score=e,this.scoreText.text=e.toString()+"m",this.scoreText.position.x=500-this.scoreText.width/2},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause")},t.prototype.activatePowerUpEffect=function(){this.powerupIsActive=!0,this.physicsManager.activatePowerup(),this.powerupRatio=2,this.player.activatePowerup(),this.meter.dry(!0)},t.prototype.deactivatePowerUpEffect=function(){this.powerupIsActive=!1,this.physicsManager.deactivatePowerup(),this.player.deactivatePowerup(),this.powerupRatio=1},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t),this.game.powerUpManager.pause(),this.player.pause(),this.riverManager.pause(),this.meter.pause(),Game.pauseSound("waterfall-wipeout/water-stream.mp3"),this.pauseResumeTween(this.gameOverTimeline,"pause"),this.pauseResumeTween(this.activatePowerupTimeline,"pause")},t.prototype.resume=function(){e.prototype.resume.call(this),this.setBackgroundColor(15724527),Game.resumeSound("waterfall-wipeout/water-stream.mp3"),this.game.ui.setUI("gameplay-waterfall-wipeout"),this.player.resume(),this.riverManager.resume(),this.game.powerUpManager.resume(),this.meter.resume(),this.pauseResumeTween(this.gameOverTimeline,"resume"),this.pauseResumeTween(this.activatePowerupTimeline,"resume")},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tutorialOverlay.destroy(),this.riverManager.destroy(),this.physicsManager.destroy(),this.player.destroy(),this.meter.destroy(),Game.stopSound("waterfall-wipeout/water-stream.mp3"),this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline);for(var t=0;t<this.cloudArray.length;t++)Game.displayStore.returnPooledItem(this.cloudHolder.children[t])},t.smoothing=8,t.cameraMotionEaseAmount=8,t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),HoverDriftGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.score=0,i.id="hoverDriftGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.viewScale=1,Game.coreData.setCurrentRide("hover-drift"),this.powerupIsActive=!1,this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),this.tutorialOverlayOn,this.tutorialViewed=Game.coreData.getGameTutorialViewed("hover-drift"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.setBackgroundColor(565451),this.selectedCharacter=Game.coreData.getSelectedCharacter()||"dawn",this.score=0,this.health=1e3,this.healthCooledDown=!0,this.toughness=.5,this.powerupRatio=1,this.uiLayer=Game.displayStore.getContainer("hover-drift/ui-layer"),this.mainHolderPos=new PIXI.Point(Game.stageWidth/2,Game.stageHeight-110),this.mainHolder=Game.displayStore.getContainer("hover-drift/main-holder"),this.scaleHolder=Game.displayStore.getContainer("hover-drift/scale-holder"),this.mainHolder.position.x=Game.stageWidth/2,this.controlsOverlayOn=!0,this.physicsManager=new HoverDriftPhysicsManager(this,this.mainHolder),this.physicsManager.initPhysicsWorld(),this.physicsDebugger=new PhysicsDebugger(this,this.mainHolder,this.physicsManager.world),this.player=new HoverDriftPlayer(this),this.courseManager=new HoverDriftCourseManager(this),this.inputManager=new HoverDriftInputManager(this,this.mainHolder),this.miniMap=new HoverDriftMiniMap(this),this.timer=new HoverDriftTimer(this),this.scoreBG=Game.displayStore.getSprite("hover-drift/score-bg"),this.scoreBG.position.y=180,this.scoreBG.position.x=-30,this.healthBarHolder=Game.displayStore.getContainer("hover-drift/health-bar-holder"),this.healthBar=this.healthBarHolder.getSprite("hover-drift/health-bar-fg"),this.healthBar2=this.healthBarHolder.getSprite("hover-drift/health-bar-fg2"),this.healthBarCharacter=Game.displayStore.getSprite("hover-drift/health-bar-icon-"+this.selectedCharacter),this.healthBarHolder.addChild(this.healthBarCharacter),this.healthBar.width=200,this.healthBar2.width=200,this.healthBar2.tint=16733525,this.healthBarHolder.getSprite("hover-drift/health-bar-bg").width=203,this.healthBarHolder.position.x=70,this.healthBarHolder.position.y=70,this.scoreText=Game.displayStore.getBitmapText("hover-drift/score-font"),this.scoreText.position.x=50,this.scoreText.position.y=142,this.scoreText.scale.x=this.scoreText.scale.y=.75,this.scoreText.text="0m",this.mainHolder.addChild(this.courseManager.container),this.uiLayer.addChild(this.healthBarHolder),this.uiLayer.addChild(this.scoreBG),this.uiLayer.addChild(this.scoreText),this.uiLayer.addChild(this.miniMap.container),this.uiLayer.addChild(this.timer.container),this.player.addSprites(),Game.playSound("hover-drift/ambience-ocean-waves.mp3",.25),Game.playSound("hover-drift/music.mp3",.5),this.healthBar.tint=6018816,this.scaleHolder.addChild(this.mainHolder),this.scaleHolder.setRegPointPixels(this.mainHolderPos.x,Game.stageHeight,!0),this.container.addChild(this.scaleHolder),this.inputManager.initControls(),this.tick(),1==this.tutorialViewed?this.startGameplay():(this.tutorialOverlayOn=!0,this.tutorialOverlay.buildTutorial("hover-drift",!0))},t.prototype.startGameplay=function(){this.game.ui.triggerEnjoyTheRide(),this.tutorialOverlayOn=!1,1==Game.onDesktop?this.game.ui.setUI("gameplay-hoverdrift"):this.game.ui.setUI("gameplay-hoverdrift-touch"),this.timer.start(),this.game.powerUpManager.startGame(),this.container.addChild(this.uiLayer)},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.activatePowerUpEffect=function(){this.powerupIsActive=!0,this.powerupRatio=2,Game.playSound("hover-drift/power-up-transform.mp3"),this.physicsManager.activatePowerup(),this.player.activatePowerup(),this.inputManager.activatePowerup(),this.restoreHealth(),this.mainHolderPos.y=Game.stageHeight-150},t.prototype.deactivatePowerUpEffect=function(){Game.playSound("hover-drift/power-up-transform.mp3"),this.mainHolderPos.y=Game.stageHeight-110,this.powerupIsActive=!1,this.powerupRatio=1,this.physicsManager.deactivatePowerup(),this.player.deactivatePowerup(),this.inputManager.deactivatePowerup()},t.prototype.restoreHealth=function(){this.health=1e3,this.healthBar.tint=6018816},t.prototype.addHealth=function(e){this.health+=e,this.health>1e3&&(this.health=1e3),this.health>750?this.healthBar.tint=6018816:this.health>500&&this.health<750?this.healthBar.tint=14122496:this.health<500&&this.health>250?this.healthBar.tint=14090240:this.health<250&&(this.healthBar.tint=14090240)},t.prototype.collectTicket=function(){},t.prototype.downOnUI=function(t){1!=this.tutorialOverlay.isOpen&&(e.prototype.downOnUI.call(this,t),"forwards-button"==t.id&&this.inputManager.keyDown("up"),"backwards-button"==t.id&&this.inputManager.keyDown("down"),"move-left-button"==t.id&&this.inputManager.keyDown("left"),"move-right-button"==t.id&&this.inputManager.keyDown("right"))},t.prototype.upOnUI=function(t){e.prototype.upOnUI.call(this,t),"forwards-button"==t.id&&this.inputManager.keyUp("up"),"backwards-button"==t.id&&this.inputManager.keyUp("down"),"move-left-button"==t.id&&this.inputManager.keyUp("left"),"move-right-button"==t.id&&this.inputManager.keyUp("right")},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"pause-button":this.pause(!1);break;case"playbuttonlarge":this.resume()}},t.prototype.uiRolledOut=function(t){e.prototype.uiRolledOut.call(this,t),"forwards-button"==t.id&&this.inputManager.keyOut("up"),"backwards-button"==t.id&&this.inputManager.keyOut("down"),"move-left-button"==t.id&&this.inputManager.keyOut("left"),"move-right-button"==t.id&&this.inputManager.keyOut("right")},t.prototype.endGame=function(e){e.wristbandOverlay.endGame(e.score)},t.prototype.secondChanceUse=function(){this.health<500&&this.addHealth(500),this.timer.addTime(10)},t.prototype.tick=function(){if(e.prototype.tick.call(this),1!=this.paused&&(this.player.tick(),1!=this.tutorialOverlayOn)){this.inputManager.tick(),this.courseManager.tick(),this.miniMap.tick(),this.physicsManager.stepPhysics(),this.positionViewport();var t=Math.round(this.health/1e3*200);t<0&&(t=0),this.healthBar.width=t,this.healthBar2.width+=(t-this.healthBar2.width)/30,this.scoreText.text=String(Math.ceil(this.score))+"m"}},t.prototype.positionViewport=function(){var e=new PIXI.Point((-this.player.container.position.x-this.mainHolder.position.x+this.mainHolderPos.x)/t.cameraMotionEaseAmount,(-this.player.container.position.y-this.mainHolder.position.y+this.mainHolderPos.y)/t.cameraMotionEaseAmount),i=this.mainHolder.position.x+e.x,s=this.mainHolder.position.y+e.y;this.player.container.rotation;this.mainHolder.position.y=s,this.mainHolder.position.x=i;var o=.8-this.physicsManager.playerVelocityMagnitude/2100;this.viewScale+=(o-this.viewScale)/7,this.viewScale<.3&&(this.viewScale=.3),this.scaleHolder.scale.x=this.viewScale,this.scaleHolder.scale.y=this.viewScale},t.prototype.updateHealth=function(e){0!=this.healthCooledDown&&this.healthBar&&(Game.playSound("hover-drift/thud-wood-"+Game.getRandom(1,2,!0)+".mp3",1),this.health>660?this.healthBar.tint=6018816:this.health>330&&this.health<660?this.healthBar.tint=15895808:this.health<330&&(this.healthBar.tint=14090240),this.health>20?e>5&&(this.health-=2*e):this.health=20,this.healthCooledDown=!1,this.healthCoolDownTimeline=this.killTween(this.healthCoolDownTimeline),this.healthCoolDownTimeline=new TimelineMax,this.healthCoolDownTimeline.call(function(){this.healthCooledDown=!0,this.health<=20&&this.endGame(this)},null,this,.5))},t.prototype.updateScore=function(e){this.score+=e},t.prototype.passCheckpoint=function(){Game.playSound("hover-drift/checkpoint.mp3"),this.timer.addTime(7)},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&1!=this.tutorialOverlay.isOpen&&this.inputManager.keyDown(t)},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),this.inputManager.keyUp(t)},t.prototype.pause=function(t){Game.pauseSound("hover-drift/ambience-ocean-waves.mp3"),Game.pauseSound("hover-drift/music.mp3"),0==t&&e.prototype.pause.call(this,t),this.physicsManager.pause(),this.player.pause(),this.timer.pause(),this.inputManager.pause(),this.pauseResumeTween(this.healthCoolDownTimeline,"pause"),this.pauseResumeTween(this.activatePowerupTimeline,"pause"),this.pauseResumeTween(this.armTimeline,"pause")},t.prototype.resume=function(){e.prototype.resume.call(this),Game.resumeSound("hover-drift/ambience-ocean-waves.mp3"),Game.resumeSound("hover-drift/music.mp3"),this.physicsManager.resume(),this.player.resume(),this.timer.resume(),this.inputManager.resume(),1==Game.onDesktop?this.game.ui.setUI("gameplay-hoverdrift"):this.game.ui.setUI("gameplay-hoverdrift-touch"),this.pauseResumeTween(this.healthCoolDownTimeline,"resume"),this.pauseResumeTween(this.activatePowerupTimeline,"resume"),this.pauseResumeTween(this.armTimeline,"resume"),this.game.powerUpManager.resumeGame()},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause"),this.setBackgroundColor(565451)},t.prototype.destroy=function(){e.prototype.destroy.call(this),Game.stopSound("hover-drift/ambience-ocean-waves.mp3"),Game.stopSound("hover-drift/music.mp3"),this.timer.destroy(),this.physicsManager.destroy(),this.inputManager.destroy(),this.player.destroy(),this.tutorialOverlay.destroy(),this.courseManager.destroy(),this.miniMap.destroy(),this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.armTimeline=this.killTween(this.armTimeline),this.uiLayer.removeChild(this.healthBarHolder),this.uiLayer.removeChild(this.scoreText),this.uiLayer.removeChild(this.timer.container),this.scaleHolder.removeChild(this.mainHolder),this.container.removeChild(this.scaleHolder),this.healthCoolDownTimeline=this.killTween(this.healthCoolDownTimeline)},t.cameraMotionEaseAmount=4,t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),CrazyGolfGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="crazyGolfGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),this.endingGame=!1,this.score=0,this.ticker=0,this.powerupIsActive=!1,this.waitingToDeactivatePowerup=!1,this.cameraMotionEaseAmount=15,this.levelData=new CrazyGolfLevelData,this.shuffleArray(this.levelData.data),this.clouds=new Array;for(a=0;a<8;a++){var i=Game.displayStore.getSprite("crazy-golf/cloud");i.scale.x=i.scale.y=Game.getRandom(.3,.9),i.alpha=i.scale.x,i.position.x=Game.getRandom(-100,Game.stageWidth),i.position.y=Game.getRandom(0,200),this.clouds.push(i)}this.setBackgroundColor(15658734),this.mainHolderPos=new PIXI.Point(900,500),3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),Game.playSound("crazy-golf/thruster-loop.wav",.4),Game.coreData.setCurrentRide("crazy-golf"),this.tutorialViewed=Game.coreData.getGameTutorialViewed("crazy-golf"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.scaleHolder=Game.displayStore.getContainer("crazy-golf/scale-holder"),this.mainHolder=Game.displayStore.getContainer("crazy-golf/main-holder"),this.bg1Holder=Game.displayStore.getContainer("crazy-golf/bg1-holder");var s=this.bg1Holder.getSprite("crazy-golf/back-wall.png"),o=this.bg1Holder.getSprite("crazy-golf/back-wall-highlight.png");s.alpha=.7,s.scale.x=s.scale.y=1.8,o.scale.x=o.scale.y=1.8,o.blendMode=PIXI.BLEND_MODES.ADD,o.alpha=1,this.physicsManager=new CrazyGolfPhysicsManager(this,this.mainHolder),this.physicsManager.initPhysicsWorld(),this.physicsDebugger=new PhysicsDebugger(this,this.mainHolder,this.physicsManager.world),this.ballManager=new CrazyGolfBallManager(this),this.levelManager=new CrazyGolfLevelManager(this),this.inputManager=new CrazyGolfInputManager(this),this.player=new CrazyGolfPlayer(this),this.ticket=new CrazyGolfTicket(this,0),this.cameraFollowObject=this.ballManager.currentBall.sprite,this.scoreBG=Game.displayStore.getSprite("crazy-golf/score-bg"),this.ballsBG=Game.displayStore.getSprite("crazy-golf/balls-bg"),this.scoreText=Game.displayStore.getBitmapText("crazy-golf/score-font"),this.scoreText.position.x=25,this.scoreText.position.y=172,this.scoreText.scale.x=this.scoreText.scale.y=.75,this.scoreText.text="0",this.doors=Game.displayStore.getContainer("crazy-golf/doors"),this.doorTop=this.doors.getContainer("crazy-golf/door-top-holder"),this.doorBottom=this.doors.getContainer("crazy-golf/door-bottom-holder"),this.doorBottom.position.y=Game.stageHeight,this.pistonTopLeft=this.doorTop.getContainer("crazy-golf/left-top-piston"),this.pistonTopRight=this.doorTop.getContainer("crazy-golf/right-top-piston"),this.pistonTopLeftTube=this.pistonTopLeft.getSprite("crazy-golf/piston-tube-top-left"),this.pistonTopRightTube=this.pistonTopRight.getSprite("crazy-golf/piston-tube-top-right"),this.pistonBottomLeft=this.doorBottom.getContainer("crazy-golf/left-bottom-piston"),this.pistonBottomRight=this.doorBottom.getContainer("crazy-golf/right-bottom-piston"),this.pistonBottomLeftTube=this.pistonBottomLeft.getSprite("crazy-golf/piston-tube-bottom-left"),this.pistonBottomRightTube=this.pistonBottomRight.getSprite("crazy-golf/piston-tube-bottom-right"),this.pistonBottomLeft.setRegPoint(.5,.95),this.pistonBottomRight.setRegPoint(.5,.95),this.pistonTopLeft.setRegPoint(.5,.05),this.pistonTopRight.setRegPoint(.5,.05),this.pistonBottomLeft.position.x=290,this.pistonBottomLeft.position.y=Game.stageHeight/2+75,this.pistonBottomRight.position.x=Game.stageWidth-290,this.pistonBottomRight.position.y=Game.stageHeight/2+80,this.pistonBottomRightTube.position.y=-150,this.pistonBottomRightTube.position.x=-4,this.pistonBottomLeftTube.position.y=-150,this.pistonBottomLeftTube.position.x=-4,this.pistonTopLeft.position.x=250,this.pistonTopLeft.position.y=-(Game.stageHeight/2+85),this.pistonTopRight.position.x=Game.stageWidth-245,this.pistonTopRight.position.y=-(Game.stageHeight/2+85),this.pistonTopRightTube.position.y=150,this.pistonTopRightTube.position.x=-4,this.pistonTopLeftTube.position.y=150,this.pistonTopLeftTube.position.x=-4,this.doorText=Game.displayStore.getBitmapText("crazy-golf/door-font"),this.doorText.position.x=470,this.doorText.position.y=-190,this.doorText.tint=16777215,this.doorText.scale.x=this.doorText.scale.y=1.4,this.doorText.text="#1",this.doorTop.addChild(this.doorText),this.bg1Holder=Game.displayStore.getContainer("crazy-golf/bg1-holder"),this.bg1Holder.setRegPointPixels(.5*Game.stageWidth,.5*Game.stageHeight,!0),this.bg2Holder=Game.displayStore.getContainer("crazy-golf/bg2-holder"),this.bg2Holder.setRegPointPixels(.5*Game.stageWidth,.5*Game.stageHeight,!0),this.bg3Holder=Game.displayStore.getContainer("crazy-golf/bg3-holder"),this.bg3Holder.setRegPointPixels(.5*Game.stageWidth,.5*Game.stageHeight,!0),this.bg4Holder=Game.displayStore.getContainer("crazy-golf/bg4-holder"),this.bg4Holder.setRegPointPixels(.5*Game.stageWidth,.5*Game.stageHeight,!0),0==Game.isLowEndIPad&&(this.shineMask=Game.displayStore.getSprite("crazy-golf/shine-mask.png"),this.shineMask.scale.x=1.8,this.shineMask.scale.y=3,this.shineMask.rotation=.5,o.mask=this.shineMask),this.bg2Holder.scale.x=this.bg2Holder.scale.y=2,this.bg3Holder.scale.x=this.bg3Holder.scale.y=2,this.bg4Holder.getSprite("crazy-golf/sky.png").width=2e3,this.pistonTopLeft.rotation=.8,this.pistonTopRight.rotation=-.8,this.pistonBottomLeft.rotation=-1.05,this.pistonBottomRight.rotation=1.05,this.ticket.spawn(this.mainHolder,new PIXI.Point(this.levelManager.goalPlatformBody.position[0],Game.stageHeight-this.levelManager.goalPlatformBody.position[1]-80)),this.gameOverTimeline=new TimelineMax,this.container.addChild(this.bg4Holder);for(var a=0;a<this.clouds.length;a++)this.bg4Holder.addChild(this.clouds[a]);this.mainHolder.addChildAt(this.player.container,3),this.mainHolder.addChildAt(this.player.platformSprite,3),this.mainHolder.addChild(this.levelManager.platformHolderBack),this.mainHolder.addChild(this.ballManager.container),this.mainHolder.addChild(this.levelManager.platformHolderFront),this.scaleHolder.addChild(this.bg3Holder),this.scaleHolder.addChild(this.bg2Holder),this.scaleHolder.addChild(this.bg1Holder),0==Game.isLowEndIPad&&this.scaleHolder.addChild(this.shineMask),this.scaleHolder.addChild(this.mainHolder),this.mainHolder.addChild(this.inputManager.container),this.scaleHolder.setRegPointPixels(0,400,!0),this.container.addChild(this.scaleHolder),this.container.addChild(this.inputManager.uiHolder),this.container.addChild(this.doors),this.container.addChild(this.scoreBG),this.container.addChild(this.ballsBG),this.container.addChild(this.scoreText),this.container.addChild(this.ballManager.ballsRemainingUIHolder),1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("crazy-golf",!0)},t.prototype.recordLevelDifficulty=function(e){console.log("{'available':true, 'difficulty':"+e+",",this.levelManager.getLevelData()+"},")},t.prototype.startGameplay=function(){this.game.ui.triggerEnjoyTheRide(),1==Game.onDesktop?this.game.ui.setUI("gameplay-crazy-golf"):this.game.ui.setUI("gameplay-crazy-golf-touch"),this.game.powerUpManager.startGame(),this.ballManager.newRound(10),this.inputManager.startGame(),TweenMax.delayedCall(1,Game.playSound,["crazy-golf/some-assistance.mp3"]),Game.playSound("crazy-golf/music.wav",.6),this.inputManager.enableFire()},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.pottedBall=function(e){this.inputManager.disableFire(),this.levelManager.pottedBall(),this.ballManager.removeBall(e),this.ticket.remove(),TweenMax.delayedCall(1,this.newRound,null,this)},t.prototype.newRound=function(){this.checkPowerupDeactivate(),this.updateScore(5*this.ballManager.ballsRemaining);var e=1;Game.fadeSound("crazy-golf/thruster-loop.wav",.6,0),this.doorText.text="#"+String(this.levelManager.currentRound+2),this.newRoundTimeline=this.killTween(this.newRoundTimeline),this.newRoundTimeline=new TimelineMax,Game.stopSound("crazy-golf/shield-loop.wav"),this.newRoundTimeline.add([TweenMax.to(this.doorTop.position,.5,{y:Game.stageHeight/2+70,ease:Power2.easeOut}),TweenMax.to(this.doorBottom.position,.5,{y:Game.stageHeight/2-70,ease:Power2.easeOut}),TweenMax.to(this.pistonBottomLeftTube.position,.5,{y:"-150",ease:Power2.easeOut}),TweenMax.to(this.pistonBottomLeft,.5,{rotation:-1.05,ease:Power2.easeOut}),TweenMax.to(this.pistonBottomLeft.position,.5,{y:Game.stageHeight/2+75,ease:Power2.easeOut}),TweenMax.to(this.pistonBottomRightTube.position,.5,{y:"-150",ease:Power2.easeOut}),TweenMax.to(this.pistonBottomRight,.5,{rotation:1.05,ease:Power2.easeOut}),TweenMax.to(this.pistonBottomRight.position,.5,{y:Game.stageHeight/2+75,ease:Power2.easeOut}),TweenMax.to(this.pistonTopLeftTube.position,.5,{y:"150",ease:Power2.easeOut}),TweenMax.to(this.pistonTopLeft,.5,{rotation:.8,ease:Power2.easeOut}),TweenMax.to(this.pistonTopLeft.position,.5,{y:-(Game.stageHeight/2+85),ease:Power2.easeOut}),TweenMax.to(this.pistonTopRightTube.position,.5,{y:"150",ease:Power2.easeOut}),TweenMax.to(this.pistonTopRight,.5,{rotation:-.8,ease:Power2.easeOut}),TweenMax.to(this.pistonTopRight.position,.5,{y:-(Game.stageHeight/2+85),ease:Power2.easeOut})]),this.newRoundTimeline.call(function(){e=this.levelManager.newRound(),this.inputManager.newRound(),TweenMax.to(this.scaleHolder.scale,2.5,{x:e,y:e,ease:Power4.easeInOut})},null,this),this.newRoundTimeline.add([TweenMax.to(this.doorTop.position,.5,{y:0,ease:Power2.easeIn}),TweenMax.to(this.doorBottom.position,.5,{y:Game.stageHeight,ease:Power2.easeIn}),TweenMax.to(this.pistonBottomLeftTube.position,.5,{y:"-50",ease:Power2.easeIn}),TweenMax.to(this.pistonBottomLeft,.45,{rotation:-Math.PI/2,ease:Power2.easeIn}),TweenMax.to(this.pistonBottomLeft.position,.5,{y:Game.stageHeight/2-200,ease:Power2.easeIn}),TweenMax.to(this.pistonBottomRightTube.position,.5,{y:"-50",ease:Power2.easeIn}),TweenMax.to(this.pistonBottomRight,.45,{rotation:Math.PI/2,ease:Power2.easeIn}),TweenMax.to(this.pistonBottomRight.position,.5,{y:Game.stageHeight/2-200,ease:Power2.easeIn}),TweenMax.to(this.pistonTopLeftTube.position,.5,{y:"60",ease:Power2.easeIn}),TweenMax.to(this.pistonTopLeft,.55,{rotation:Math.PI/2,ease:Power2.easeIn}),TweenMax.to(this.pistonTopLeft.position,.5,{y:-(Game.stageHeight/2+45),ease:Power2.easeIn}),TweenMax.to(this.pistonTopRightTube.position,.5,{y:"60",ease:Power2.easeIn}),TweenMax.to(this.pistonTopRight,.55,{rotation:-Math.PI/2,ease:Power2.easeIn}),TweenMax.to(this.pistonTopRight.position,.5,{y:-(Game.stageHeight/2+45),ease:Power2.easeIn})],"+=0.4"),this.newRoundTimeline.call(function(){this.cameraMotionEaseAmount=15},null,this,"+=0.8"),this.newRoundTimeline.call(function(){this.ticket.spawn(this.mainHolder,new PIXI.Point(this.levelManager.goalPlatformBody.position[0],Game.stageHeight-this.levelManager.goalPlatformBody.position[1]-80))},null,this),this.newRoundTimeline.call(Game.playSound,["crazy-golf/robot-move.mp3"],this,0),this.newRoundTimeline.call(Game.playSound,["crazy-golf/smash-vent-4.mp3"],this,.5),this.newRoundTimeline.call(Game.playSound,["crazy-golf/door-open.mp3"],this,.7),this.newRoundTimeline.call(Game.playSound,["crazy-golf/hiss.mp3"],this,.8),this.newRoundTimeline.call(this.inputManager.enableFire,null,this,2),this.newRoundTimeline.call(Game.fadeSound,["crazy-golf/thruster-loop.wav",.6,.4],this,1)},t.prototype.positionViewport=function(){var e=new PIXI.Point((-this.cameraFollowObject.position.x-this.mainHolder.position.x+this.mainHolderPos.x)/this.cameraMotionEaseAmount,(-this.cameraFollowObject.position.y-this.mainHolder.position.y+this.mainHolderPos.y)/this.cameraMotionEaseAmount),t=this.mainHolder.position.x+e.x,i=this.mainHolder.position.y+e.y;t>0&&(t=0),i<-50&&(i=-50),this.mainHolder.position.x=.9*t,this.mainHolder.position.y=.9*i,0==Game.isLowEndIPad&&(this.shineMask.position.x=Game.stageWidth-.5*t-600),this.bg1Holder.position.x=.7*t,this.bg1Holder.position.y=.7*i,this.bg2Holder.position.x=.2*t,this.bg2Holder.position.y=.2*i},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"playbuttonlarge":this.resume();break;case"pause-button":this.pause(!1)}},t.prototype.downOnUI=function(e){this.inputManager.downOnButton(e.id)},t.prototype.upOnUI=function(e){this.inputManager.upOnButton(e.id)},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(t){if(e.prototype.tick.call(this,t),1!=this.paused&&1!=this.tutorialOverlay.isOpen&&1!=this.wristbandOverlay.isOpen){for(var i=0;i<this.clouds.length;i++)this.clouds[i].position.x+=this.clouds[i].scale.x/4,this.clouds[i].position.x>Game.stageWidth+200&&(this.clouds[i].position.x=0);this.score>Number(this.scoreText.text)&&(this.ticker%2==0&&Game.playSound("crazy-golf/tick-up.mp3",.5),this.scoreText.text=String(Number(this.scoreText.text)+1)),this.physicsManager.stepPhysics(),this.inputManager.tick(),this.player.tick(),this.ballManager.tick(),this.levelManager.tick(),this.ticket.tick(),this.positionViewport(),this.ticker++}},t.prototype.endGame=function(){this.gameOverTimeline=new TimelineMax,this.gameOverTimeline.call(this.gameOver,[this],this,1)},t.prototype.gameOver=function(e){e.wristbandOverlay.endGame(e.score)},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&this.inputManager.keyDown(t)},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&this.inputManager.keyUp(t)},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause")},t.prototype.activatePowerUpEffect=function(){this.powerupIsActive=!0,this.ballManager.addAllBalls(),this.ballManager.activatePowerup(),this.levelManager.activatePowerup(),Game.playSound("crazy-golf/frankie-theme.mp3",.7),Game.stopSound("crazy-golf/music.wav"),this.delayedPlayTheme=TweenMax.delayedCall(16.9,Game.playSound,["crazy-golf/frankie-theme-loop.wav",.7],this)},t.prototype.deactivatePowerUpEffect=function(){this.waitingToDeactivatePowerup=!0},t.prototype.checkPowerupDeactivate=function(){1==this.waitingToDeactivatePowerup&&(this.powerupIsActive=!1,this.ballManager.deactivatePowerup(),this.levelManager.deactivatePowerup(),this.waitingToDeactivatePowerup=!1,this.delayedPlayTheme=this.killTween(this.delayedPlayTheme),Game.stopSound("crazy-golf/frankie-theme.mp3"),Game.stopSound("crazy-golf/frankie-theme-loop.wav"),Game.playSound("crazy-golf/shield-lose.mp3"),Game.playSound("crazy-golf/music.wav",.6))},t.prototype.secondChanceUse=function(){},t.prototype.updateScore=function(e){this.score+=e},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t),this.game.powerUpManager.pause(),this.ticket.pause(),Game.pauseSound("crazy-golf/space-ambience.mp3"),Game.pauseSound("crazy-golf/thruster-loop.wav"),Game.pauseSound("crazy-golf/frankie-theme.mp3"),Game.pauseSound("crazy-golf/frankie-theme-loop.wav"),Game.pauseSound("crazy-golf/shield-loop.wav"),Game.pauseSound("crazy-golf/music.wav"),this.pauseResumeTween(this.delayedPlayTheme,"pause")},t.prototype.resume=function(){e.prototype.resume.call(this),this.setBackgroundColor(15724527),1==Game.onDesktop?this.game.ui.setUI("gameplay-crazy-golf"):this.game.ui.setUI("gameplay-crazy-golf-touch"),this.game.powerUpManager.resume(),this.ticket.resume(),Game.resumeSound("crazy-golf/space-ambience.mp3"),Game.resumeSound("crazy-golf/thruster-loop.wav"),Game.resumeSound("crazy-golf/frankie-theme.mp3"),Game.resumeSound("crazy-golf/frankie-theme-loop.wav"),Game.resumeSound("crazy-golf/shield-loop.wav"),Game.resumeSound("crazy-golf/music.wav"),this.pauseResumeTween(this.delayedPlayTheme,"resume")},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tutorialOverlay.destroy(),this.physicsManager.destroy(),this.player.destroy(),this.ballManager.destroy(),this.levelManager.destroy(),this.ticket.destroy(),this.gameOverTimeline=this.killTween(this.gameOverTimeline),this.delayedPlayTheme=this.killTween(this.delayedPlayTheme);for(var t=0;t<this.clouds.length;t++)Game.displayStore.returnPooledItem(this.clouds[t]);Game.stopSound("crazy-golf/space-ambience.mp3"),Game.stopSound("crazy-golf/thruster-loop.wav"),Game.stopSound("crazy-golf/frankie-theme.mp3"),Game.stopSound("crazy-golf/frankie-theme-loop.wav"),Game.stopSound("crazy-golf/shield-loop.wav"),Game.stopSound("crazy-golf/music.wav")},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),CocoNuttyGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="cocoNuttyGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.unlockFirstShot=!1,Game.stopSound("coco-nutty/music.mp3"),Game.playSound("coco-nutty/music.mp3",.1),Game.coreData.setCurrentRide("coco-nutty"),this.selectedCharacter=Game.coreData.getSelectedCharacter()||"nicky",this.selectCharacter(),this.characterPos=250,this.smokeCounter=0,this.powerUpOn=!1,this.hopperCoconutAngle=0,this.hopperCoconutJiggleCount=0,this.spacebarDown=!1,this.cocoBurstAlphaEaseAmount=10,this.cocoBurstScaleEaseAmount=5,this.coconutJiggleEaseAmount=5,this.previewZoneHideEaseAmount=5,this.previewZoneEnabled=!1,this.coconutExploded=!1,this.buildingLaunchPower=!1,this.skyBackground=Game.displayStore.getSprite("coco-nutty/sky"),this.skyBackground.width=Game.stageWidth,this.skyBackground.height=Game.stageHeight,this.smokeParticles=new Array;for(a=0;a<50;a++){var i=Game.displayStore.getSprite("coco-nutty/smoke-particle");this.smokeParticles.push({sprite:i,active:!1})}this.buildLaunchPower=2,this.currentLaunchPowerPercentage=0,this.score=0,this.gameEnded=!1,this.currentRotationSpeed=0,this.gameStartDelayTime=2,this.trackProjectileEaseAmount=5,this.inputDivideAimScrollVertPos=Game.stageWidth-220,this.uiPreviewMode=!1,this.firingCoconut=!1,this.snapScrollEaseAmount=30,this.levelScrollSnapDistance=500,this.roundPreviewOn=!1,this.panPreviewModeOn=!1,this.panPreviewTargetPos=0,this.beamAlphaInterval=.05,this.targetPanPos=0,this.beamStartDelayCounter=0,this.beamStartDelayCounterLimit=10,this.beamFired=!1,this.beamReset=!1,this.beamTrailCounter=0,this.beamTrailCounterLimit=1,this.powerMeterYPos=520,this.powerMeterHidePos=700,this.powerMeterHideEaseAmount=10,this.beamKill=!1,this.minWheelRotationSpeed=0,this.maxWheelRotationSpeed=.5,this.indicatorIntervalCounter=0,this.indicatorIntervalLimit=10,this.headRotateEaseAmount=12,this.legRotateEaseAmount=8,this.puEffectHolder=Game.displayStore.getContainer("coco-nutty/powerup-effect"),this.puEffectHolder.scale.x=this.puEffectHolder.scale.y=0,this.puEffectSparkle1=this.puEffectHolder.getSprite("coco-nutty/pu-sparkle-1"),this.puEffectSparkle2=this.puEffectHolder.getSprite("coco-nutty/pu-sparkle-2"),this.puEffectGlow=Game.displayStore.getSprite("coco-nutty/pu-glow"),this.puEffectSparkle1.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectSparkle2.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectGlow.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectGlow.scale.x=0,this.puEffectGlow.scale.y=0,this.powerMeterLimitMinPos=Game.stageWidth/2-265,this.powerMeterLimitMaxPos=Game.stageWidth/2+265,this.currentPowerNeedlePos=this.powerMeterLimitMinPos,this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),this.tutorialViewed=Game.coreData.getGameTutorialViewed("coco-nutty"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.backgroundSceneryContainer=Game.displayStore.getContainer("coco-nutty/background-container"),this.midSceneryContainer=Game.displayStore.getContainer("coco-nutty/mid-container"),this.foregroundSceneryContainer=Game.displayStore.getContainer("coco-nutty/foreground-container"),this.foregroundParallaxContainer=Game.displayStore.getContainer("coco-nutty/foreground-parallax-container"),this.chairPost=Game.displayStore.getSprite("coco-nutty/chair-stand"),this.launcherHolder=Game.displayStore.getContainer("coco-nutty/character-chair-launcher-holder"),this.hopper=Game.displayStore.getSprite("coco-nutty/coconut-hopper"),this.powerupHopper=Game.displayStore.getSprite("coco-nutty/coconut-hopper-power-up"),this.hopper.position.y=-106,this.powerupHopper.position.y=-106,this.wheelClamp=Game.displayStore.getSprite("coco-nutty/wheel-clamp"),this.wheelClamp.position.y=-26,this.wheelClamp.position.x=30,this.hopperCoconutsHolder=Game.displayStore.getContainer("coco-nutty/coco-nuts-in-hopper-holder"),this.coconutsInHopper=Game.displayStore.getSprite("coco-nutty/coco-nuts-in-hopper"),this.hopperCoconutsHolder.addChild(this.coconutsInHopper),this.coconutsInHopper.position.x=30,this.coconutsInHopper.position.y=105,this.hopperCoconutsHolder.position.y=-290,this.aimLine=Game.displayStore.getSprite("coco-nutty/launcher-aim-line"),this.launcherWheelBottom=Game.displayStore.getSprite("coco-nutty/launcher-wheel"),this.launcherWheelTop=Game.displayStore.getSprite("coco-nutty/launcher-wheel"),this.launcherWheelBottom.position.x=100,this.launcherWheelTop.position.x=100,this.launcherWheelBottom.position.y=28,this.launcherWheelTop.position.y=-76,this.characterHead.position.x=-44,this.characterHead.position.y=-86,this.characterHead.scale.x=this.characterHead.scale.y=1.2,this.characterLeg.position.x=30,this.characterLeg.position.y=24,this.characterLeg.scale.x=this.characterLeg.scale.y=.8,this.aimLine.position.y=-26,this.container.addChild(this.skyBackground),this.launcherHolder.addChild(this.aimLine),this.launcherHolder.addChild(this.launcherWheelBottom),this.launcherHolder.addChild(this.launcherWheelTop),this.launcherHolder.addChild(this.hopperCoconutsHolder),this.launcherHolder.addChild(this.hopper),this.launcherHolder.addChild(this.powerupHopper),this.launcherHolder.addChild(this.wheelClamp),this.powerupHopper.visible=!1,this.hopper.visible=!0,this.launcherWheelBottom.visible=!0,this.launcherWheelTop.visible=!0,this.wheelClamp.visible=!0,this.launcherHolder.addChild(this.characterLeg),this.launcherHolder.addChild(this.characterHead),this.launcherHolder.addChild(this.characterChair),this.launcherHolder.addChild(this.puEffectGlow),this.launcherHolder.addChild(this.puEffectHolder),this.puEffectHolder.position.y=-20,this.puEffectGlow.position.y=-20,this.puEffectHolder.position.x=10,this.puEffectGlow.position.x=10,this.mainContainer=Game.displayStore.getContainer("coco-nutty/main-container"),this.mainContainer.addChild(this.backgroundSceneryContainer),this.mainContainer.addChild(this.midSceneryContainer),this.chairPost.position.x=this.characterPos,this.chairPost.position.y=460,this.launcherHolder.position.x=this.characterPos,this.launcherHolder.position.y=250,this.physicsManager=new CocoNuttyPhysicsManager(this,this.characterPos),this.physicsManager.initPhysicsWorld(),this.physicsDebugger=new PhysicsDebugger(this,this.mainContainer,this.physicsManager.world),this.popTreeLayer=Game.displayStore.getContainer("coco-nutty/pop-tree-layer"),this.mainContainer.addChild(this.popTreeLayer);var s=Game.displayStore.getSprite("coco-nutty/coconut-projectile"),o=this.physicsManager.getCoconutProjectile();this.coconutProjectile={sprite:s,body:o.body,shape:o.shape},this.coconutProjectile.sprite.position.y=-500,this.mainContainer.addChild(this.coconutProjectile.sprite),this.mainContainer.addChild(this.chairPost),this.mainContainer.addChild(this.launcherHolder);for(a=0;a<this.smokeParticles.length;a++)this.mainContainer.addChild(this.smokeParticles[a].sprite),this.smokeParticles[a].sprite.position.x=-500;this.cocoMilkBurst=Game.displayStore.getSprite("coco-nutty/coco-milk-burst"),this.mainContainer.addChild(this.cocoMilkBurst),this.cocoMilkBurst.position.y=-1e3,this.cocoMilkParticles=new Array;for(a=0;a<100;a++){n=Game.displayStore.getSprite("coco-nutty/coco-milk-particle");this.mainContainer.addChild(n),n.position.y=-100,this.cocoMilkParticles.push({sprite:n,active:!1,scaleReduction:Game.getRandom(.02,.05),initialScale:Game.getRandom(1,2)})}this.coconutChunkBits=new Array;for(var a=0;a<5;a++)for(var r=0;r<2;r++){var n=Game.displayStore.getSprite("coco-nutty/coconut-burst-chunk-"+String(a)),h=this.physicsManager.getCoconutChunkBit();this.coconutChunkBits.push({sprite:n,body:h.body,shape:h.shape,active:!1}),n.position.y=-1e3,this.mainContainer.addChild(n)}this.createDirtParticles(),this.mainContainer.addChild(this.foregroundSceneryContainer),this.mainContainer.addChild(this.foregroundParallaxContainer),this.levelManager=new CocoNuttyLevelManager(this,this.mainContainer,this.backgroundSceneryContainer,this.midSceneryContainer,this.foregroundSceneryContainer,this.foregroundParallaxContainer),this.inputManager=new CocoNuttyInputManager(this,this.midSceneryContainer,this.powerMeterLimitMinPos,this.powerMeterYPos,this.inputDivideAimScrollVertPos),this.timerContainer=Game.displayStore.getContainer("coco-nutty/timer-holder"),this.roundManager=new CocoNuttyRoundManager(this,this.mainContainer,this.popTreeLayer,this.timerContainer,this.characterPos),this.powerMeterBG=Game.displayStore.getSprite("coco-nutty/power-meter-bg"),this.powerMeterBG.position.x=Game.stageWidth/2,this.powerMeterBG.position.y=this.powerMeterYPos,this.powerMeterNeedle=Game.displayStore.getSprite("coco-nutty/power-meter-needle"),this.powerMeterNeedle.position.x=this.powerMeterLimitMinPos,this.powerMeterNeedle.position.y=this.powerMeterYPos,this.powerMeterNeedleGhost=Game.displayStore.getSprite("coco-nutty/power-meter-needle-ghost"),this.powerMeterNeedleGhost.position.x=this.powerMeterLimitMinPos,this.powerMeterNeedleGhost.position.y=this.powerMeterYPos,this.powerMeterNeedleGhost.visible=!1,this.container.addChild(this.mainContainer),this.container.addChild(this.powerMeterBG),this.container.addChild(this.powerMeterNeedle),this.container.addChild(this.powerMeterNeedleGhost),this.container.addChild(this.timerContainer),this.previewZoneHolder=Game.displayStore.getContainer("coco-nutty/preview-zone-holder"),this.previewZoneBG=Game.displayStore.getSprite("coco-nutty/preview-zone-bg"),this.previewZoneIcon=Game.displayStore.getSprite("coco-nutty/preview-zone-icon");var l=Game.stageWidth-this.inputDivideAimScrollVertPos;this.previewZoneBG.width=l,this.previewZoneBG.height=Game.stageHeight,this.previewZoneBG.alpha=.4,this.previewZoneBG.position.x=-l/2,this.previewZoneBG.position.y=-Game.stageHeight/2,this.previewZoneHolder.position.x=Game.stageWidth-l/2,this.previewZoneHolder.position.y=Game.stageHeight/2,this.previewZoneHolder.addChild(this.previewZoneBG),this.previewZoneHolder.addChild(this.previewZoneIcon),this.previewZoneHolder.alpha=0,this.container.addChild(this.previewZoneHolder),this.scoreHolder=Game.displayStore.getContainer("coco-nutty/score-holder"),this.scoreText=Game.displayStore.getBitmapText("coco-nutty/score-font"),this.scoreHolder.scale.x=this.scoreHolder.scale.y=1,this.scoreHolder.position.y=50,this.scoreHolder.position.x=90,this.scoreText.scale.x=this.scoreText.scale.y=.75,this.scoreText.position.x=this.scoreHolder.position.x-90,this.scoreText.position.y=this.scoreHolder.position.y-88,this.container.addChild(this.scoreHolder),this.updateScore(),this.scoreHolder.addChild(this.scoreText),1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("coco-nutty",!0)},t.prototype.selectCharacter=function(){this.characterHead=Game.displayStore.getSprite("coco-nutty/"+this.selectedCharacter+"-head"),this.characterChair=Game.displayStore.getSprite("coco-nutty/character-chair-"+this.selectedCharacter),this.characterLeg=Game.displayStore.getSprite("coco-nutty/character-leg-"+this.selectedCharacter)},t.prototype.updateScore=function(){this.scoreText.text=String(this.score),this.scoreText.position.x=0-this.scoreText.width/2*this.scoreText.scale.x},t.prototype.startGameplay=function(){switch(this.game.ui.triggerEnjoyTheRide(),this.game.powerUpManager.startGame(),this.game.ui.setUI("gameplay-coconutty-level-preview"),this.initialGameStartDelay=TweenMax.delayedCall(this.gameStartDelayTime,this.popInitialTarget,null,this),this.selectedCharacter){case"nicky":Game.playSound("coco-nutty/nicky-drumroll.mp3");break;case"ricky":Game.playSound("coco-nutty/ricky-game-is-won.mp3");break;case"dicky":Game.playSound("coco-nutty/dicky-no-preasure.mp3");break;case"dawn":Game.playSound("coco-nutty/dawn-leave-it-to-me.mp3")}},t.prototype.createDirtParticles=function(){this.dirtParticleProjectiles=new Array;for(var e=0;e<20;e++){var t=Game.displayStore.getSprite("coco-nutty/dirt-particle");t.position.y=-500,this.mainContainer.addChild(t);var i=this.physicsManager.getDirtParticle();t.scale.x=i.scale,t.scale.y=i.scale,this.dirtParticleProjectiles.push({sprite:t,body:i.body,shape:i.shape,active:!1})}},t.prototype.popInitialTarget=function(){this.previewZoneEnabled=!0,this.roundManager.activateTimer(),this.roundManager.newTarget()},t.prototype.addTargetPhysics=function(e){this.physicsManager.addBodyToWorld(e)},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"pause-button":this.pause(!1);break;case"river-rangers-fire-button":break;case"playbuttonlarge":this.resume()}},t.prototype.downOnUI=function(t){switch(e.prototype.downOnUI.call(this,t),t.id){case"river-rangers-fire-button":this.startLaunchCoconutPower()}},t.prototype.upOnUI=function(t){switch(e.prototype.upOnUI.call(this,t),t.id){case"river-rangers-fire-button":this.endLaunchCoconutPower()}},t.prototype.startLaunchCoconutPower=function(){if(0!=this.unlockFirstShot){if(this.game.ui.hidePowerUpButton(),1==this.powerUpOn){if(console.log("firing....",this.firingCoconut),1==this.firingCoconut)return;return this.firingCoconut=!0,this.coconutExploded=!1,this.physicsManager.launchPowerUpCoconut(),this.spacebarDown=!1,Game.playSound("coco-nutty/air-blow.mp3",.2),Game.playSound("coco-nutty/gun-fire.mp3",.3),Game.playSound("coco-nutty/air-rush.mp3",1),void Game.playSound("coco-nutty/thruster.mp3",1)}Game.playSound("coco-nutty/spinning-wheel.mp3",.3),Game.playSound("coco-nutty/bike-wheel-turning.mp3",.3),this.buildingLaunchPower=!0,this.currentLaunchPowerPercentage=0}},t.prototype.endLaunchCoconutPower=function(){0!=this.unlockFirstShot&&(this.buildingLaunchPower=!1,Game.stopSound("coco-nutty/spinning-wheel.mp3"),Game.stopSound("coco-nutty/bike-wheel-turning.mp3"),this.storedNeedleReleasePos=this.currentPowerNeedlePos,this.physicsManager.setPhysicsPower(this.currentLaunchPowerPercentage),this.launchCoconut())},t.prototype.getLargeTargetElements=function(){return this.physicsManager.getLargeTargetElements()},t.prototype.getMediumTargetElements=function(){return this.physicsManager.getMediumTargetElements()},t.prototype.getSmallTargetElements=function(){return this.physicsManager.getSmallTargetElements()},t.prototype.getLeafPhysicsElement=function(){return this.physicsManager.getLeafParticle()},t.prototype.addLeafPhysicsWorld=function(e){this.physicsManager.addBodyToWorld(e)},t.prototype.launchCoconut=function(){1!=this.roundPreviewOn&&1!=this.uiPreviewMode&&1!=this.firingCoconut&&(this.firingCoconut=!0,this.coconutExploded=!1,Game.playSound("coco-nutty/air-blow.mp3",.1),Game.playSound("coco-nutty/gun-fire.mp3",.3),Game.playSound("coco-nutty/air-rush.mp3",1),this.physicsManager.launchCoconut())},t.prototype.coconutLanded=function(e,t){switch(this.selectedCharacter){case"nicky":Game.getRandom(0,1)>.7&&Game.playSound("coco-nutty/nicky-feaking-out.mp3");break;case"ricky":Game.getRandom(0,1)>.7&&Game.playSound("coco-nutty/ricky-i-cant.mp3");break;case"dicky":Game.getRandom(0,1)>.7&&Game.playSound("coco-nutty/dicky-so-hard.mp3");break;case"dawn":Game.getRandom(0,1)>.7&&Game.playSound("coco-nutty/dawn-how-possible.mp3")}Game.playSound("coco-nutty/rock-land.mp3"),Game.stopSound("coco-nutty/air-rush.mp3"),Game.stopSound("coco-nutty/thruster.mp3"),this.endRoundCheckDelay=this.killTween(this.endRoundCheckDelay),this.endRoundCheckDelay=TweenMax.delayedCall(.25,this.startNextRound,null,this);for(var i=Game.getRandom(4,8,!0),s=0,o=0;o<this.dirtParticleProjectiles.length;o++)if(1!=this.dirtParticleProjectiles[o].active&&(s++,this.dirtParticleProjectiles[o].active=!0,this.physicsManager.fireDirtParticlesLanding(this.dirtParticleProjectiles[o].body,e,t),s>=i))return},t.prototype.winRound=function(){this.roundManager.winRound(),this.powerMeterNeedleGhost.visible=!1,this.resetRoundParams(),this.score++,this.updateScore(),1==this.powerUpOn&&TweenMax.delayedCall(1,function(){this.firingCoconut=!1},null,this)},t.prototype.poweredUpStartNewRound=function(){this.startNextRound()},t.prototype.startNextRound=function(){this.firingCoconut=!1,this.resetRoundParams(),this.roundManager.resetMagnetsAttract(),this.physicsManager.endPowerUpCoconutFlying(),this.powerMeterNeedleGhost.visible=!0,this.powerMeterNeedleGhost.position.x=this.storedNeedleReleasePos},t.prototype.resetRoundParams=function(){this.currentLaunchPowerPercentage=0,this.currentPowerNeedlePos=this.powerMeterLimitMinPos,this.powerMeterNeedle.position.x=this.powerMeterLimitMinPos,this.currentRotationSpeed=0},t.prototype.fireDirtParticlesHandPop=function(e){Game.playSound("coco-nutty/bush-cut.mp3"),Game.playSound("coco-nutty/spring.mp3",.1),Game.playSound("coco-nutty/swish-long-2.mp3",.2);for(var t=Game.getRandom(4,8,!0),i=0,s=0;s<this.dirtParticleProjectiles.length;s++)if(1!=this.dirtParticleProjectiles[s].active&&(this.dirtParticleProjectiles[s].active=!0,i++,this.physicsManager.fireDirtParticleHand(this.dirtParticleProjectiles[s].body,e),i>=t))return},t.prototype.targetHitCheck=function(e,t){e==this.coconutProjectile.body&&this.roundManager.checkTargetHit(t,e),t==this.coconutProjectile.body&&this.roundManager.checkTargetHit(e,t)},t.prototype.explodeCoconut=function(e,t,i){switch(this.physicsManager.explodeCoconut(e,t,i),this.coconutExploded=!0,this.coconutProjectile.sprite.position.y=-1e3,Game.playSound("coco-nutty/crack.mp3",.2),Game.playSound("coco-nutty/crack-open.mp3",.8),Game.stopSound("coco-nutty/air-rush.mp3"),Game.playSound("coco-nutty/success.mp3"),Game.stopSound("coco-nutty/thruster.mp3"),Game.stopSound("coco-nutty/air-rush.mp3"),this.selectedCharacter){case"nicky":Game.getRandom(0,1)>.7&&Game.playSound("coco-nutty/nicky-boom.mp3");break;case"ricky":Game.getRandom(0,1)>.7&&Game.playSound("coco-nutty/ricky-ah-impressive.mp3");break;case"dicky":Game.getRandom(0,1)>.7&&Game.playSound("coco-nutty/dicky-boom.mp3");break;case"dawn":Game.getRandom(0,1)>.7&&Game.playSound("coco-nutty/dawn-ooo.mp3")}Game.getRandom(0,1,!0)>.5?Game.playSound("coco-nutty/target-hit-1.mp3"):Game.playSound("coco-nutty/target-hit-2.mp3"),this.endRoundCheckDelay=this.killTween(this.endRoundCheckDelay),this.endRoundCheckDelay=TweenMax.delayedCall(1,this.winRound,null,this),this.cocoMilkBurst.position.x=e.position[0],this.cocoMilkBurst.position.y=Game.stageHeight-e.position[1],this.cocoMilkBurst.scale.x=0,this.cocoMilkBurst.scale.y=0,this.cocoMilkBurst.alpha=1;for(var s=0;s<this.coconutChunkBits.length;s++)this.coconutChunkBits[s].active=!0,this.physicsManager.fireCoconutChunk(e,this.coconutChunkBits[s].body)},t.prototype.resetCoconutChunk=function(e){for(var t=0;t<this.coconutChunkBits.length;t++)1==this.coconutChunkBits[t].active&&(this.coconutChunkBits[t].active=!1,this.physicsManager.removeBodyFromWorld(this.coconutChunkBits[t].body),this.coconutChunkBits[t].sprite.position.y=-1e3)},t.prototype.resetLeaf=function(e){this.physicsManager.removeBodyFromWorld(e),this.roundManager.resetLeaf(e)},t.prototype.addHitTargetPhysics=function(e){this.physicsManager.addConstraintToWorld(e)},t.prototype.panToTarget=function(e){this.roundPreviewOn=!0,this.panPreviewModeOn=!0,this.firingCoconut=!1,this.physicsManager.endPowerUpCoconutFlying(),this.targetPanPos=0-e+Game.stageWidth/2,this.panPreviewTargetPos=this.targetPanPos,this.cameraPanTimeline=this.killTween(this.cameraPanTimeline),this.cameraPanTimeline=new TimelineMax,this.cameraPanTimeline.call(this.activatePopTarget,null,this,.5),this.cameraPanTimeline.call(this.endCameraPan,null,this,1)},t.prototype.getDroppingMagnet=function(){return this.physicsManager.getDroppingMagnet()},t.prototype.checkCancelRoundPreview=function(){},t.prototype.addMagnetPhysicsWorld=function(e,t,i){this.physicsManager.addBodyToWorld(e),this.physicsManager.addBodyToWorld(t),this.physicsManager.addConstraintToWorld(i)},t.prototype.removeMagnetPhysicsWorld=function(e,t,i){this.physicsManager.removeBodyFromWorld(e),this.physicsManager.removeBodyFromWorld(t),this.physicsManager.removeConstraintFromWorld(i)},t.prototype.endPanPreviewMode=function(){this.panPreviewModeOn=!1},t.prototype.beginPanPreviewMode=function(){1!=this.roundPreviewOn&&(this.panPreviewModeOn=!0)},t.prototype.timerOutGameOver=function(){Game.coreData.setCurrentRideScoreFromGame(this.score),this.wristbandOverlay.endGame(this.score)},t.prototype.secondChanceUse=function(){this.roundManager.secondChanceUse()},t.prototype.activatePopTarget=function(){this.initialGameStartDelay=this.killTween(this.initialGameStartDelay),this.roundManager.animatePopTarget()},t.prototype.endCameraPan=function(){this.unlockFirstShot=!0,this.cameraPanTimeline=this.killTween(this.cameraPanTimeline),this.roundPreviewOn=!1,this.panPreviewModeOn=!1},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){if(e.prototype.tick.call(this),1!=this.paused&&1!=this.tutorialOverlay.isOpen&&1!=this.wristbandOverlay.isOpen){if(1==this.powerUpOn&&1==this.firingCoconut)for(t=0;t<this.smokeParticles.length;t++)if(1!=this.smokeParticles[t].active){this.smokeParticles[t].active=!0,this.smokeParticles[t].sprite.position.x=this.coconutProjectile.sprite.position.x,this.smokeParticles[t].sprite.position.y=this.coconutProjectile.sprite.position.y+Game.getRandom(-20,20),this.smokeParticles[t].sprite.alpha=1,this.smokeParticles[t].sprite.scale.x=Game.getRandom(.4,.8),this.smokeParticles[t].sprite.scale.y=this.smokeParticles[t].sprite.scale.x,this.smokeParticles[t].sprite.rotation=Game.getRandom(0,2*Math.PI);break}1==this.powerUpOn&&(this.puEffectHolder.rotation+=.1);for(t=0;t<this.smokeParticles.length;t++)0!=this.smokeParticles[t].active&&(this.smokeParticles[t].sprite.alpha-=.02,this.smokeParticles[t].sprite.position.y-=Game.getRandom(1,2),this.smokeParticles[t].sprite.scale.x+=.01,this.smokeParticles[t].sprite.scale.y+=.01,this.smokeParticles[t].sprite.alpha<=0&&(this.smokeParticles[t].active=!1));this.foregroundParallaxContainer.position.x=this.mainContainer.position.x/2,this.physicsManager.stepPhysics(),this.inputManager.tick(),this.levelManager.tick(),this.roundManager.tick(this.coconutProjectile.body),this.launcherWheelBottom.rotation+=this.currentRotationSpeed,this.launcherWheelTop.rotation-=this.currentRotationSpeed,this.launcherHolder.position.x=this.physicsManager.launcherBody.position[0],this.launcherHolder.position.y=Game.stageHeight-this.physicsManager.launcherBody.position[1],this.launcherHolder.rotation=-this.physicsManager.launcherBody.angle,this.characterHead.rotation+=(this.launcherHolder.rotation-this.characterHead.rotation)/this.headRotateEaseAmount,this.characterLeg.rotation+=(-this.launcherHolder.rotation-this.characterLeg.rotation)/this.legRotateEaseAmount,this.characterHead.rotation<-.33&&(this.characterHead.rotation=-.33),this.hopperCoconutAngle=-this.launcherHolder.rotation,this.hopperCoconutsHolder.rotation+=(this.hopperCoconutAngle-this.hopperCoconutsHolder.rotation)/this.coconutJiggleEaseAmount,1==this.inputManager.mouseModeOn&&this.aimLauncher(),1==this.inputManager.keyBoardModeOn&&this.aimLauncherKeyboard(),this.positionPowerNeedle(),this.positionPowerMeter(),this.positionSnappingCamera(),this.trackCoconutProjectile();for(t=0;t<this.coconutChunkBits.length;t++)0!=this.coconutChunkBits[t].active&&(this.coconutChunkBits[t].sprite.position.x=this.coconutChunkBits[t].body.position[0],this.coconutChunkBits[t].sprite.position.y=Game.stageHeight-this.coconutChunkBits[t].body.position[1],this.coconutChunkBits[t].sprite.rotation=-this.coconutChunkBits[t].body.angle);for(t=0;t<this.dirtParticleProjectiles.length;t++)0!=this.dirtParticleProjectiles[t].active&&(this.dirtParticleProjectiles[t].sprite.position.x=this.dirtParticleProjectiles[t].body.position[0],this.dirtParticleProjectiles[t].sprite.position.y=Game.stageHeight-this.dirtParticleProjectiles[t].body.position[1],this.dirtParticleProjectiles[t].sprite.rotation=-this.dirtParticleProjectiles[t].body.angle);1==this.buildingLaunchPower&&this.currentLaunchPowerPercentage<100&&(this.currentLaunchPowerPercentage+=this.buildLaunchPower),1==this.coconutExploded&&(this.placeMilkParticle(),this.cocoMilkBurst.scale.x+=(1.5-this.cocoMilkBurst.scale.x)/this.cocoBurstScaleEaseAmount,this.cocoMilkBurst.scale.y=this.cocoMilkBurst.scale.x,this.cocoMilkBurst.alpha+=(0-this.cocoMilkBurst.alpha)/this.cocoBurstAlphaEaseAmount);for(var t=0;t<this.cocoMilkParticles.length;t++)0!=this.cocoMilkParticles[t].active&&(this.cocoMilkParticles[t].sprite.scale.x-=this.cocoMilkParticles[t].scaleReduction,this.cocoMilkParticles[t].sprite.scale.y-=this.cocoMilkParticles[t].scaleReduction,this.cocoMilkParticles[t].sprite.position.y+=2*this.cocoMilkParticles[t].scaleReduction,this.cocoMilkParticles[t].sprite.scale.x<=0&&(this.cocoMilkParticles[t].active=!1))}},t.prototype.placeMilkParticle=function(){for(var e=0;e<this.cocoMilkParticles.length;e++)if(1!=this.cocoMilkParticles[e].active){this.cocoMilkParticles[e].active=!0,this.cocoMilkParticles[e].sprite.scale.x=this.cocoMilkParticles[e].initialScale,this.cocoMilkParticles[e].sprite.scale.y=this.cocoMilkParticles[e].initialScale;var t=Game.getRandom(0,this.coconutChunkBits.length-1,!0);return this.cocoMilkParticles[e].sprite.position.x=this.coconutChunkBits[t].sprite.position.x,void(this.cocoMilkParticles[e].sprite.position.y=this.coconutChunkBits[t].sprite.position.y)}},t.prototype.attractCoconutMagnet=function(e,t){this.physicsManager.attractCoconutMagnet(e,t)},t.prototype.trackCoconutProjectile=function(){if(0!=this.firingCoconut&&1!=this.coconutExploded){this.coconutProjectile.sprite.position.x=this.coconutProjectile.body.position[0],this.coconutProjectile.sprite.position.y=Game.stageHeight-this.coconutProjectile.body.position[1],this.coconutProjectile.sprite.rotation=-this.coconutProjectile.body.angle;var e=0-this.coconutProjectile.sprite.position.x+Game.stageWidth/2;e<=-4e3&&(e=-4e3),this.coconutProjectile.sprite.position.x>this.inputDivideAimScrollVertPos&&(this.mainContainer.position.x+=(e-this.mainContainer.position.x)/this.trackProjectileEaseAmount)}},t.prototype.primeBeamAim=function(e){this.beamReset=!1,this.physicsManager.primeBeam(e)},t.prototype.resetBeam=function(){},t.prototype.killBeam=function(){},t.prototype.getPowerUpActive=function(){return this.powerUpOn},t.prototype.fireIndicatorBeam=function(){},t.prototype.activatePowerUpEffect=function(){this.powerUpOn=!0,this.physicsManager.activatePowerUpEffect(),this.coconutProjectile.body.gravityScale=0,this.roundManager.retractMagnets(),Game.playSound("coco-nutty/power-up-transform.mp3",1),this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.activatePowerupTimeline=new TimelineMax,this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.3,{x:2.5,y:2.5,ease:Power2.easeIn}),TweenMax.to(this.puEffectGlow.scale,.3,{x:5,y:3.2,ease:Power2.easeIn})],0),this.activatePowerupTimeline.call(function(){this.powerupHopper.visible=!0,this.hopper.visible=!1,this.launcherWheelBottom.visible=!1,this.launcherWheelTop.visible=!1,this.wheelClamp.visible=!1},null,this),this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.5,{x:0,y:0,ease:Power2.easeOut}),TweenMax.to(this.puEffectGlow.scale,.5,{x:0,y:0,ease:Power2.easeOut})])},t.prototype.deactivatePowerUpEffect=function(){this.powerUpOn=!1,this.roundManager.midRoundDropMagnets(),this.physicsManager.deactivatePowerUpEffect(),this.coconutProjectile.body.gravityScale=1,Game.playSound("coco-nutty/power-down-transform.mp3",1),this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.activatePowerupTimeline=new TimelineMax,this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.2,{x:2.5,y:2.5,ease:Power2.easeIn}),TweenMax.to(this.puEffectGlow.scale,.2,{x:5,y:3.2,ease:Power2.easeIn})],0),this.activatePowerupTimeline.call(function(){this.powerupHopper.visible=!1,this.hopper.visible=!0,this.launcherWheelBottom.visible=!0,this.launcherWheelTop.visible=!0,this.wheelClamp.visible=!0},null,this),this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.5,{x:0,y:0,ease:Power2.easeOut}),TweenMax.to(this.puEffectGlow.scale,.5,{x:0,y:0,ease:Power2.easeOut})])},t.prototype.resetProjectileIndicatorBeam=function(e){},t.prototype.resetDirtPartcile=function(e){for(var t=0;t<this.dirtParticleProjectiles.length;t++)this.dirtParticleProjectiles[t].body==e&&(this.dirtParticleProjectiles[t].active=!1,this.physicsManager.removeBodyFromWorld(e))},t.prototype.killProjectileIndicatorBeamPhysics=function(e){this.physicsManager.killProjectileIndicatorBeamPhysics(e)},t.prototype.aimLauncher=function(){var e=this.inputManager.getInputAngle();this.physicsManager.changeGunAngle(e)},t.prototype.aimLauncherKeyboard=function(){var e=this.inputManager.getKeyboardInputAngle();this.physicsManager.changeGunAngle(e)},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&("up"==t?this.upKeyDown():"down"==t?this.downKeyDown():"spacebar"==t?this.spaceKeyDown():"right"==t&&this.rightKeyDown())},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&("up"==t?this.upKeyUp():"down"==t?this.downKeyUp():"spacebar"==t?this.spaceKeyUp():"right"==t&&this.rightKeyUp())},t.prototype.rightKeyDown=function(){this.beginPanPreviewMode()},t.prototype.rightKeyUp=function(){this.endPanPreviewMode()},t.prototype.spaceKeyUp=function(){0!=this.spacebarDown&&(this.spacebarDown=!1,1!=this.powerUpOn&&this.endLaunchCoconutPower())},t.prototype.spaceKeyDown=function(){1!=this.panPreviewModeOn&&1!=this.spacebarDown&&(this.spacebarDown=!0,this.startLaunchCoconutPower())},t.prototype.firePowerUpCoconut=function(){},t.prototype.resetScrollStoredPos=function(e){this.inputManager.resetScrollStoredPos(e)},t.prototype.adjustPowerMeterNeedle=function(e){e<this.powerMeterLimitMinPos&&(e=this.powerMeterLimitMinPos),e>this.powerMeterLimitMaxPos&&(e=this.powerMeterLimitMaxPos),this.currentPowerNeedlePos=e},t.prototype.positionPowerNeedle=function(){if(0!=this.buildingLaunchPower){var e=(this.powerMeterLimitMaxPos-this.powerMeterLimitMinPos)/100*this.currentLaunchPowerPercentage;this.powerMeterLimitMinPos;this.powerMeterNeedle.position.x=this.powerMeterLimitMinPos+e,this.currentPowerNeedlePos=this.powerMeterLimitMinPos+e;var t=this.maxWheelRotationSpeed-this.minWheelRotationSpeed;this.currentRotationSpeed=this.minWheelRotationSpeed+t/100*this.currentLaunchPowerPercentage}},t.prototype.positionSnappingCamera=function(){if(1!=this.firingCoconut){var e;e=1==this.panPreviewModeOn?this.panPreviewTargetPos:0,this.mainContainer.position.x+=(e-this.mainContainer.position.x)/this.snapScrollEaseAmount,this.inputManager.resetScrollPointCameraSnap(this.mainContainer.position.x)}},t.prototype.positionPowerMeter=function(){var e,t;1!=this.roundPreviewOn&&1!=this.panPreviewModeOn&&1!=this.firingCoconut||(e=this.powerMeterHidePos,t=0,this.updateUI(!0)),0==this.roundPreviewOn&&0==this.panPreviewModeOn&&0==this.firingCoconut&&(e=this.powerMeterYPos,t=1,this.updateUI(!1)),this.powerMeterBG.position.y+=(e-this.powerMeterBG.position.y)/this.powerMeterHideEaseAmount,this.powerMeterNeedle.position.y=this.powerMeterBG.position.y,this.powerMeterNeedleGhost.position.y=this.powerMeterBG.position.y,0!=this.previewZoneEnabled&&(this.previewZoneHolder.alpha+=(t-this.previewZoneHolder.alpha)/this.previewZoneHideEaseAmount)},t.prototype.updateUI=function(e){if(1==e){if(1==this.uiPreviewMode)return;this.game.ui.setUI("gameplay-coconutty-level-preview"),this.uiPreviewMode=!0}else if(0==e){if(0==this.uiPreviewMode)return;this.gameEnded,this.game.ui.setUI("gameplay-coconutty"),this.uiPreviewMode=!1,this.game.powerUpManager.manuallySetPowerUpButton(!0)}},t.prototype.adjustWheelSpeed=function(e){var t=this.maxWheelRotationSpeed-this.minWheelRotationSpeed;this.currentRotationSpeed=this.minWheelRotationSpeed+t*e},t.prototype.upKeyDown=function(){this.inputManager.upKeyDown()},t.prototype.downKeyDown=function(){this.inputManager.downKeyDown()},t.prototype.upKeyUp=function(){this.inputManager.upKeyUp()},t.prototype.downKeyUp=function(){this.inputManager.downKeyUp()},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t),this.game.powerUpManager.pause(),this.pauseResumeTween(this.cameraPanTimeline,"pause"),this.pauseResumeTween(this.initialGameStartDelay,"pause"),this.pauseResumeTween(this.endRoundCheckDelay,"pause"),this.levelManager.pause(),this.roundManager.pause(),Game.pauseSound("coco-nutty/music.mp3")},t.prototype.resume=function(){e.prototype.resume.call(this),1!=this.panPreviewModeOn&&1!=this.roundPreviewOn||this.game.ui.setUI("gameplay-coconutty-level-preview"),0!=this.panPreviewModeOn&&0!=this.roundPreviewOn||this.game.ui.setUI("gameplay-coconutty"),this.game.powerUpManager.resume(),this.pauseResumeTween(this.cameraPanTimeline,"resume"),this.pauseResumeTween(this.initialGameStartDelay,"resume"),this.pauseResumeTween(this.endRoundCheckDelay,"resume"),this.levelManager.resume(),this.roundManager.resume()},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause")},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tutorialOverlay.destroy(),this.cameraPanTimeline=this.killTween(this.cameraPanTimeline),this.initialGameStartDelay=this.killTween(this.initialGameStartDelay),this.endRoundCheckDelay=this.killTween(this.endRoundCheckDelay),this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.levelManager.destroy(),this.roundManager.destroy(),this.inputManager.destroy(),this.physicsManager.destroy();for(t=0;t<this.dirtParticleProjectiles.length;t++)Game.displayStore.returnPooledItem(this.dirtParticleProjectiles[t].sprite);for(t=0;t<this.coconutChunkBits.length;t++)Game.displayStore.returnPooledItem(this.coconutChunkBits[t].sprite);for(t=0;t<this.cocoMilkParticles.length;t++)Game.displayStore.returnPooledItem(this.cocoMilkParticles[t].sprite);for(var t=0;t<this.smokeParticles.length;t++)Game.displayStore.returnPooledItem(this.smokeParticles[t].sprite);Game.displayStore.returnPooledItem(this.launcherWheelTop),Game.displayStore.returnPooledItem(this.launcherWheelBottom),Game.stopSound("coco-nutty/air-rush.mp3"),Game.stopSound("coco-nutty/music.mp3"),Game.stopSound("coco-nutty/thruster.mp3")},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),DodgemsGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.score=0,i.id="dodgemsGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),Game.playSound("dodgems/music.mp3",.3),Game.coreData.setCurrentRide("dodgems"),this.powerupIsActive=!1,this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),this.tutorialViewed=Game.coreData.getGameTutorialViewed("dodgems"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.setBackgroundColor(4473924),this.score=0,this.currentEmote="neutral",this.backWheelTrailCounter=0,this.backWheelTrailCounterLimit=2,this.particleTimer=0,this.particleTimerLimit=60,this.health=1e3,this.healthCooledDown=!0,this.toughness=.5,this.disabledDodgems=0,this.boostParticlesCounter=0,this.skidDurationCounter=0,this.skidDurationLimit=60,this.currentSteerAngle=0,this.skidParticleCounter=0,this.skidParticleLimit=30,this.skidSampleCounter=0,this.skidSampleCounterLimit=20,this.damageParticleCounter=0,this.damageParticleLimit=10,this.playerSmoke=!1,this.playerElectricFrames=!1,this.playerElectricCounter=0,this.playerElectricCounterLimit=60,this.bumperDriftSoundPlaying=!1,this.bumperDriftSoundTimer=0,this.bumperDriftSoundLimit=5e3,this.zapSoundPlaying=!1,this.zapSoundTimer=0,this.zapSoundLimit=1e3,this.bounceSound=!1,this.bounceSoundTimer=0,this.bounceSoundLimit=40,this.iceSoundPlaying=!1,this.iceSoundTimer=0,this.iceSoundLimit=40,this.dodgemDrivingSoundPlaying=!1,this.dodgemDrivingSoundTimer=0,this.dodgemDrivingSoundLimit=100,this.powerDodgemDrivingSoundPlaying=!1,this.powerDodgemDrivingSoundTimer=0,this.powerDodgemDrivingSoundLimit=100,this.tickets=[],this.mainHolderPos=new PIXI.Point(0,-Game.stageHeight/2),this.controlsOverlayOn=!0,this.physicsManager=new DodgemsPhysicsManager(this,this.mainHolder),this.physicsManager.initPhysicsWorld(),this.timer=new DodgemsTimer(this),this.uiLayer=Game.displayStore.getContainer("dodgems/ui-layer"),this.inputManager=new DodgemsInputManager(this,this.mainHolder),this.mainHolder=Game.displayStore.getContainer("main-holder"),this.arena=Game.displayStore.getContainer("dodgems/arena"),this.physicsDebugger=new PhysicsDebugger(this,this.mainHolder,this.physicsManager.world),this.dodgemsManager=new DodgemsManager(this,this.mainHolder),this.dodgemContainer=Game.displayStore.getContainer("dodgems/dodgem-container"),this.dodgem=this.dodgemContainer.getSprite("dodgems/dodgem.png"),this.spikes=this.dodgemContainer.getSprite("dodgems/dodgem-spikes.png"),this.spikes.scale.x=this.spikes.scale.y=.6,this.boostParticlesContainer=Game.displayStore.getContainer("dodgems/boost-particles-holder"),this.damageParticlesHolder=Game.displayStore.getContainer("dodgems/damage-particles-holder"),this.leftArm=Game.displayStore.getSprite("dodgems/left-arm"),this.rightArm=Game.displayStore.getSprite("dodgems/right-arm"),this.characterHead=Game.displayStore.getSprite("dodgems/character-head"),this.physicsManager.bindSpriteToBody(this.dodgemContainer,this.physicsManager.carBody),this.physicsManager.bindSpriteToBody(this.characterHead,this.physicsManager.characterHead),this.leftArm.position.y+=10,this.rightArm.position.y+=10,this.leftArm.position.x-=15,this.rightArm.position.x+=15,this.leftArm.rotation=.15,this.rightArm.rotation=-.15,this.floorTiles=[],this.floor=Game.displayStore.getContainer("dodgems/floor");for(a=0;a<4;a++)for(var i=0;i<4;i++){var s=Game.displayStore.getSprite("dodgems/floor-tile");s.position.x=s.width*i-768.75,s.position.y=s.width*a-768.75,this.floor.addChild(s),this.floorTiles.push(s)}this.floor.scale.x=2,this.floor.scale.y=2,this.topWall=Game.displayStore.getSprite("dodgems/wall"),this.bottomWall=Game.displayStore.getSprite("dodgems/wall-bottom"),this.leftWall=Game.displayStore.getSprite("dodgems/wall"),this.rightWall=Game.displayStore.getSprite("dodgems/wall"),this.scoreBG=Game.displayStore.getSprite("dodgems/score-bg"),this.scoreBG.position.y=190,this.scoreBG.position.x=-30,this.topWall.scale.x=4,this.topWall.scale.y=4,this.bottomWall.scale.x=4,this.bottomWall.scale.y=4,this.leftWall.scale.x=4,this.leftWall.scale.y=4,this.rightWall.scale.x=4,this.rightWall.scale.y=4,this.bottomWall.position.y=this.floor.position.y+this.floor.height/2,this.bottomWall.position.x=this.floor.position.x,this.topWall.position.y=this.floor.position.y-this.floor.height/2,this.topWall.scale.y=-4,this.leftWall.rotation=Math.PI/2,this.rightWall.rotation=-Math.PI/2,this.leftWall.position.x=this.floor.position.x-this.floor.width/2,this.leftWall.position.y=this.floor.position.y,this.topWall.position.x=this.floor.position.x,this.rightWall.position.x=this.floor.position.x+this.floor.width/2,this.rightWall.position.y=this.floor.position.y,this.healthBarHolder=Game.displayStore.getContainer("dodgems/health-bar-holder"),this.healthBar=this.healthBarHolder.getSprite("dodgems/health-bar-fg"),this.healthBar2=this.healthBarHolder.getSprite("dodgems/health-bar-fg2"),this.playerNeutral=this.healthBarHolder.getSprite("dodgems/player-neutral"),this.healthBar.width=200,this.healthBar2.width=200,this.healthBar2.tint=16733525,this.healthBarHolder.getSprite("dodgems/health-bar-bg").width=203,this.healthBarHolder.position.x=80,this.healthBarHolder.position.y=80,this.scoreText=Game.displayStore.getBitmapText("dodgems/score-font"),this.scoreText.position.x=50,this.scoreText.position.y=152,this.scoreText.scale.x=this.scoreText.scale.y=.75,this.scoreText.text="0",this.gate=Game.displayStore.getContainer("dodgems/gate"),this.gateLeft=this.gate.getSprite("dodgems/gate-left"),this.gateRight=this.gate.getSprite("dodgems/gate-right"),this.devicePerformanceMultiplier=1;for(a=0;a<10;a++){var o=new DodgemsTicket(this,a);this.tickets.push(o)}if(this.uiLayer.addChild(this.healthBarHolder),this.uiLayer.addChild(this.scoreBG),this.uiLayer.addChild(this.scoreText),this.uiLayer.addChild(this.timer.container),this.mainHolder.addChild(this.floor),this.mainHolder.addChild(this.damageParticlesHolder),0==Game.isLowEndIPad){this.backWheelTrailParticle=new Array;for(a=0;a<160;a++)(r=Game.displayStore.getSprite("dodgems/dodgem-rear-wheel-marks")).blendMode=PIXI.BLEND_MODES.MULTIPLY,this.backWheelTrailParticle.push({active:!1,sprite:r}),this.backWheelTrailParticle[a].sprite.position.y=-5e3,this.mainHolder.addChild(this.backWheelTrailParticle[a].sprite);this.skidParticle=new Array;for(a=0;a<120;a++){r=Game.displayStore.getSprite("dodgems/skid-particle");this.skidParticle.push({active:!1,sprite:r}),this.skidParticle[a].sprite.position.y=-5e3,this.mainHolder.addChild(this.skidParticle[a].sprite)}this.boostParticles=new Array;for(a=0;a<30;a++){r=Game.displayStore.getSprite("dodgems/boost-particle");this.boostParticles.push({active:!1,sprite:r}),this.boostParticles[a].sprite.position.y=-5e3,this.boostParticles[a].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.boostParticlesContainer.addChild(this.boostParticles[a].sprite)}}this.iceCracks=new Array;for(var a=0;a<40;a++){var r=Game.displayStore.getSprite("dodgems/crack-1");this.iceCracks.push({active:!1,sprite:r}),this.iceCracks[a].sprite.position.y=-5e3,this.iceCracks[a].sprite.blendMode=PIXI.BLEND_MODES.OVERLAY,this.mainHolder.addChild(this.iceCracks[a].sprite)}this.bumpFrames=Game.displayStore.getAnimatedSprite("dodgems/bang-frames"),this.bumpFrames.tint=16777215,this.bumpFrames.animationSpeed=.45,this.bumpFrames.scale.x=this.bumpFrames.scale.y=4,this.bumpFrames.loop=!1,this.mainHolder.addChild(this.boostParticlesContainer),this.mainHolder.addChild(this.dodgemContainer),this.dodgemContainer.addChild(this.leftArm),this.dodgemContainer.addChild(this.rightArm),this.mainHolder.addChild(this.characterHead),this.mainHolder.addChild(this.bumpFrames),this.electricFrames=Game.displayStore.getAnimatedSprite("dodgems/electric-cart-frames"),this.electricFrames.blendMode=PIXI.BLEND_MODES.ADD,this.dodgemContainer.addChild(this.electricFrames),this.electricFrames.animationSpeed=.3,this.electricFrames.loop=!0,this.electricFrames.gotoAndStop(0),0==Game.isLowEndIPad&&this.createDamageParticles(),this.healthBar.tint=6018816,this.mainHolder.addChild(this.bottomWall),this.mainHolder.addChild(this.leftWall),this.mainHolder.addChild(this.rightWall),this.mainHolder.addChild(this.topWall),this.mainHolder.addChild(this.gate),this.arena.addChild(this.mainHolder),this.container.addChild(this.arena),this.inputManager.initControls(),1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("dodgems",!0),this.dodgemsManager.createDodgems()},t.prototype.startGameplay=function(){this.game.ui.triggerEnjoyTheRide(),Game.playSound("dodgems/dodgem-idle.mp3",.2),Game.playSound("dodgems/henry-lets-go.mp3"),1==Game.onDesktop?this.game.ui.setUI("gameplay-dodgems"):this.game.ui.setUI("gameplay-dodgems-touch"),TweenMax.delayedCall(1,this.dodgemsManager.addActiveDodgem,null,this.dodgemsManager),TweenMax.delayedCall(2,this.dodgemsManager.addActiveDodgem,null,this.dodgemsManager),this.dodgemsManager.addActiveDodgem(),this.timer.start(),this.game.powerUpManager.startGame(),this.container.addChild(this.uiLayer)},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.activatePowerUpEffect=function(){this.powerupIsActive=!0,Game.stopSound("dodgems/dodgem-moving.mp3"),Game.stopSound("dodgems/dodgem-idle.mp3"),this.physicsManager.activatePowerup(),this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.activatePowerupTimeline=new TimelineMax,this.activatePowerupTimeline.add([TweenMax.to(this.spikes.scale,1,{x:1,y:1,ease:Elastic.easeOut})],.1),this.activatePowerupTimeline.add([TweenMax.to(this.dodgem.scale,1,{x:1.1,y:1.1,ease:Elastic.easeOut}),TweenMax.to(this.characterHead.scale,.4,{x:1.1,y:1.1,ease:Power2.easeInOut})],0),Game.playSound("dodgems/dodgem-power-up-transform.mp3",1),TweenMax.delayedCall(.5,function(){Game.playSound("dodgems/henry-awesome.mp3",.7)},null,this)},t.prototype.deactivatePowerUpEffect=function(){Game.stopSound("dodgems/dodgem-idle.mp3"),Game.stopSound("dodgems/dodgem-power-up-moving.mp3"),Game.stopSound("dodgems/power-up-jet-loop.mp3"),this.powerupIsActive=!1,this.physicsManager.deactivatePowerup(),this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.activatePowerupTimeline=new TimelineMax,this.activatePowerupTimeline.add([TweenMax.to(this.spikes.scale,.4,{x:.6,y:.6,ease:Power2.easeInOut})],.1),this.activatePowerupTimeline.add([TweenMax.to(this.dodgem.scale,.4,{x:1,y:1,ease:Power2.easeInOut}),TweenMax.to(this.characterHead.scale,.4,{x:1,y:1,ease:Power2.easeInOut})],0),Game.playSound("dodgems/dodgem-power-down-transform.mp3",1),Game.playSound("dodgems/power-up-jet-stop.mp3",.5),TweenMax.delayedCall(.5,function(){Game.stopSound("dodgems/dodgem-power-up-moving.mp3"),Game.stopSound("dodgems/power-up-jet-loop.mp3")},null,this)},t.prototype.playElectricFrame=function(e,t){this.electricFrames.gotoAndPlay(0)},t.prototype.playBumpFrames=function(e,t,i){this.bumpFrames.position.x=t,this.bumpFrames.position.y=i,this.bumpFrames.gotoAndPlay(0),this.bumpFrames.rotation=e-this.dodgemContainer.rotation,Game.playSound("dodgems/dust-pop.mp3",.4),this.mainHolder.addChild(this.bumpFrames)},t.prototype.getBumpFramePos=function(e,t){e.x,e.y,t.x,t.y},t.prototype.createDamageParticles=function(){this.damageParticles=new Array;for(i=0;i<80;i++){var e=Game.displayStore.getSprite("dodgems/cart-particle-1"),t=this.getParticlePhysicsObj();this.damageParticlesHolder.addChild(e),this.damageParticles.push({sprite:e,active:!1,ParticleBody:t.body,ParticleShape:t.shape}),this.damageParticles[i].ParticleBody.position[1]=-5e3,this.damageParticles[i].sprite.position.y=-5e3,this.damageParticles[i].sprite.alpha=0}for(i=0;i<80;i++){var e=Game.displayStore.getSprite("dodgems/cart-particle-2"),t=this.getParticlePhysicsObj();this.damageParticlesHolder.addChild(e),this.damageParticles.push({sprite:e,active:!1,ParticleBody:t.body,ParticleShape:t.shape}),this.damageParticles[i].ParticleBody.position[1]=-5e3,this.damageParticles[i].sprite.position.y=-5e3,this.damageParticles[i].sprite.alpha=0}for(var i=0;i<80;i++){var e=Game.displayStore.getSprite("dodgems/cart-particle-3"),t=this.getParticlePhysicsObj();this.damageParticlesHolder.addChild(e),this.damageParticles.push({sprite:e,active:!1,ParticleBody:t.body,ParticleShape:t.shape}),this.damageParticles[i].ParticleBody.position[1]=-5e3,this.damageParticles[i].sprite.position.y=-5e3,this.damageParticles[i].sprite.alpha=0}this.damageParticles=this.shuffleArray(this.damageParticles)},t.prototype.getParticlePhysicsObj=function(){return this.physicsManager.getParticlePhysicsObj()},t.prototype.setArmDirection=function(e){var t,i;e<-.3?(t=.25,i=.15):e>-.3&&e<.3?(t=.15,i=-.15):e>.3&&(t=-.15,i=-.25),this.leftArm.rotation+=(t-this.leftArm.rotation)/8,this.rightArm.rotation+=(i-this.rightArm.rotation)/8},t.prototype.detectSkid=function(){this.currentSteerAngle=this.physicsManager.getSteerAmount(),this.physicsManager.getDodgemSpeed()<4||(this.currentSteerAngle>.5&&(this.skidActive=!0,this.skidDurationCounter=0,this.skidSide="left"),this.currentSteerAngle<-.5&&(this.skidActive=!0,this.skidDurationCounter=0,this.skidSide="right"))},t.prototype.placeRearWheelParticle=function(e,t){for(var i=0;i<this.backWheelTrailParticle.length;i++)if(0==this.backWheelTrailParticle[i].active)return this.backWheelTrailParticle[i].active=!0,this.backWheelTrailParticle[i].sprite.alpha=.2,this.backWheelTrailParticle[i].sprite.position.x=e,this.backWheelTrailParticle[i].sprite.position.y=t,this.backWheelTrailParticle[i].sprite.scale.x=1,this.backWheelTrailParticle[i].sprite.scale.y=1,void(this.backWheelTrailParticle[i].sprite.rotation=this.dodgemContainer.rotation)},t.prototype.placeSkidParticle=function(e,t){for(var i=0;i<this.skidParticle.length;i++)if(0==this.skidParticle[i].active)return this.skidParticle[i].active=!0,this.skidParticle[i].sprite.alpha=1,this.skidParticle[i].sprite.rotation=Game.getRandom(0,2*Math.PI),this.skidParticle[i].sprite.position.x=Game.getRandom(e-20,e+20),this.skidParticle[i].sprite.position.y=Game.getRandom(t-20,t+20),void(this.skidParticle[i].sprite.scale.x=this.skidParticle[i].sprite.scale.y=Game.getRandom(1,3))},t.prototype.placeIceParticle=function(e,t,i){for(var s=0;s<this.iceCracks.length;s++)if(0==this.iceCracks[s].active)return i>=100&&(i=100),this.iceCracks[s].active=!0,this.iceCracks[s].sprite.alpha=i/100,this.iceCracks[s].sprite.position.x=e,this.iceCracks[s].sprite.position.y=t,this.iceCracks[s].sprite.scale.x=i/100,this.iceCracks[s].sprite.scale.y=i/100,this.iceCracks[s].sprite.rotation=Game.getRandom(0,2*Math.PI),void(this.iceSoundPlaying=!0)},t.prototype.setCollisionAngle=function(e,t,i,s){var o=t.x,a=t.y,r=i.x,n=i.y,h=r+(o-r)/2,l=n+(a-n)/2,p={x:t.x,y:t.y},c={x:i.x,y:i.y},d=s/4;d>10&&(d=10),this.bumpFrames.scale.x=this.bumpFrames.scale.y=d;var u=Math.atan2(c.y-p.y,c.x-p.x);this.playBumpFrames(u,h,l)},t.prototype.disableDodgem=function(){++this.disabledDodgems%10==0&&this.disabledDodgems>1&&this.toughness<1.2&&(this.toughness+=.15),this.toughness>3&&(this.toughness=3)},t.prototype.openGate=function(){this.openGateTimeline=this.killTween(this.openGateTimeline),this.openGateTimeline=new TimelineMax,this.openGateTimeline.add([TweenMax.to(this.gateLeft.position,.5,{ease:Power2.easeInOut,x:-150}),TweenMax.to(this.gateRight.position,.5,{ease:Power2.easeInOut,x:150})]),this.openGateTimeline.add([TweenMax.to(this.gateLeft.position,1,{ease:Bounce.easeOut,x:-45}),TweenMax.to(this.gateRight.position,1,{ease:Bounce.easeOut,x:45})],1.2)},t.prototype.restoreHealth=function(){this.health=1e3,this.healthBar.tint=6018816},t.prototype.addHealth=function(e){this.health+=e,this.health>1e3&&(this.health=1e3),this.health>750?this.healthBar.tint=6018816:this.health>500&&this.health<750?this.healthBar.tint=14122496:this.health<500&&this.health>250?this.healthBar.tint=14090240:this.health<250&&(this.healthBar.tint=14090240)},t.prototype.playerTakeDamage=function(e){if(e>20&&this.fireCartParticles(this.dodgemContainer.position,16744469,e/4),e>100*this.toughness&&(e=100*this.toughness),e>30){Game.stopSound("dodgems/henry-no-2.mp3"),Game.stopSound("dodgems/henry-oh.mp3"),Game.stopSound("dodgems/henry-little-help.mp3"),Game.stopSound("dodgems/henry-hey.mp3"),Game.stopSound("dodgems/henry-woah.mp3");var t=Game.getRandom(1,7,!0);1==t?Game.playSound("dodgems/henry-little-help.mp3"):2==t?Game.playSound("dodgems/henry-no-2.mp3"):3==t?Game.playSound("dodgems/henry-hey.mp3"):4==t?Game.playSound("dodgems/henry-oh.mp3"):5==t&&Game.playSound("dodgems/henry-woah.mp3")}this.updateHealth(e),this.placeIceParticle(this.dodgemContainer.position.x,this.dodgemContainer.position.y+this.dodgemContainer.height/2,e),this.emoteTimeline=this.killTween(this.emoteTimeline),this.emoteTimeline=new TimelineMax,this.emoteTimeline.add(TweenMax.fromTo(this.playerNeutral,.02,{rotation:.1},{rotation:0,clearProps:"x",repeat:19}))},t.prototype.doDamage=function(e,t){1!=e.disabled&&(t>15&&this.fireCartParticles(e.container.position,16744469,t),this.updateScore(Math.round(t/3)),e.doDamage(t),this.placeIceParticle(this.dodgemContainer.position.x,this.dodgemContainer.position.y,t))},t.prototype.disableEnemy=function(){this.timer.addTime(4/this.toughness)},t.prototype.collectEnemy=function(e){this.spawnTicket(e)},t.prototype.collectTicket=function(){},t.prototype.downOnUI=function(t){1!=this.tutorialOverlay.isOpen&&(e.prototype.downOnUI.call(this,t),"forwards-button"==t.id&&this.inputManager.keyDown("up"),"backwards-button"==t.id&&this.inputManager.keyDown("down"))},t.prototype.upOnUI=function(t){e.prototype.upOnUI.call(this,t),"forwards-button"==t.id&&this.inputManager.keyUp("up"),"backwards-button"==t.id&&this.inputManager.keyUp("down")},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"pause-button":this.pause(!1);break;case"playbuttonlarge":this.resume()}},t.prototype.spawnTicket=function(e){for(var t,i=0;i<20;i++)if(1==this.tickets[i].available){t=this.tickets[i];break}t.spawn(this.mainHolder,e)},t.prototype.fireCartParticles=function(e,t,i){if(1!=this.tutorialOverlay.isOpen&&1!=Game.isLowEndIPad){var s=Math.abs(i/20);s>1.5&&(s=1.5),s<.4&&(s=.4);for(var o=0;o<30;o++)if(1!=this.damageParticles[o].active){this.damageParticles[o].active=!0,this.damageParticles[o].ParticleBody.position[0]=e.x,this.damageParticles[o].ParticleBody.position[1]=e.y,this.damageParticles[o].sprite.tint=7984383,this.damageParticles[o].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.damageParticles[o].sprite.alpha=1,this.damageParticles[o].sprite.scale.x=Game.getRandom(1*s,2.5*s),this.damageParticles[o].sprite.scale.y=this.damageParticles[o].sprite.scale.x,this.damageParticles[o].sprite.rotation=Game.getRandom(0,2*Math.PI),this.resetBody(this.damageParticles[o].ParticleBody),this.physicsManager.addBodyToWorld(this.damageParticles[o].ParticleBody);var a=Game.getRandom(0,2*Math.PI),r=Math.cos(a),n=Math.sin(a),h=Game.getRandom(2e3*s,8e3*s);this.damageParticles[o].ParticleBody.damping=Game.getRandom(.5,.9),this.damageParticles[o].ParticleBody.angularVelocity=Game.getRandom(-10*s,10*s),this.damageParticles[o].ParticleBody.applyImpulse([r*h,-n*h])}}},t.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angularVelocity=0,e.angularForce=0,e.angle=0,e.velocity=[0,0],e.setZeroForce()},t.prototype.stopPlayerElectric=function(){this.electricFrames.gotoAndStop(0)},t.prototype.endGame=function(e){e.wristbandOverlay.endGame(e.score)},t.prototype.secondChanceUse=function(){this.health<500&&this.addHealth(500),this.timer.addTime(10)},t.prototype.tick=function(){if(e.prototype.tick.call(this),1!=this.paused){if(1==this.bounceSound&&++this.bounceSoundTimer>=this.bounceSoundLimit&&(this.bounceSoundTimer=0,this.bounceSound=!1),1==this.iceSoundPlaying&&++this.iceSoundTimer>=this.iceSoundLimit&&(this.iceSoundTimer=0,this.iceSoundPlaying=!1),1==this.playerElectricFrames&&(0==this.zapSoundTimer&&(Game.getRandom(0,1)<.5?Game.playSound("dodgems/zap-1.mp3",.7):Game.playSound("dodgems/zap-2.mp3",.7)),++this.playerElectricCounter>this.playerElectricCounterLimit&&(this.stopPlayerElectric(),this.playerElectricFrames=!1,this.playerElectricCounter=0,this.zapSoundTimer=0,this.zapSoundPlaying=!1),this.zapSoundPlaying=!0,++this.zapSoundTimer>=this.zapSoundLimit&&(Game.stopSound("dodgems/zap-1.mp3"),Game.stopSound("dodgems/zap-2.mp3"),this.zapSoundTimer=0,this.zapSoundPlaying=!1)),1==this.iceSoundPlaying&&1==this.iceSoundTimer&&(1==(s=Game.getRandom(1,3,!0))?Game.playSound("dodgems/ice-crack-1.mp3",.8):2==s?Game.playSound("dodgems/ice-crack-2.mp3",.8):3==s&&Game.playSound("dodgems/ice-crack-3.mp3",.8),++this.iceSoundTimer>=this.iceSoundLimit&&(Game.stopSound("dodgems/ice-crack-1.mp3"),Game.stopSound("dodgems/ice-crack-2.mp3"),Game.stopSound("dodgems/ice-crack-3.mp3"),this.iceSoundTimer=0,this.iceSoundPlaying=!1)),1==this.dodgemDrivingSoundPlaying&&0==this.powerupIsActive&&(++this.dodgemDrivingSoundTimer>=this.dodgemDrivingSoundLimit&&(this.dodgemDrivingSoundTimer=0,this.dodgemDrivingSoundPlaying=!1,Game.stopSound("dodgems/dodgem-moving.mp3"),Game.stopSound("dodgems/power-up-jet-loop.mp3")),this.physicsManager.getDodgemSpeed()>.02&&(this.dodgemDrivingSoundTimer=0)),0==this.dodgemDrivingSoundPlaying&&this.physicsManager.getDodgemSpeed()>1&&0==this.powerupIsActive&&(Game.stopSound("dodgems/dodgem-idle.mp3"),Game.stopSound("dodgems/dodgem-stop.mp3"),Game.stopSound("dodgems/dodgem-start.mp3"),Game.playSound("dodgems/dodgem-moving.mp3",.2),0==this.dodgemDrivingSoundPlaying&&Game.playSound("dodgems/dodgem-start.mp3",.2),this.dodgemDrivingSoundPlaying=!0),1==this.dodgemDrivingSoundPlaying&&this.physicsManager.getDodgemSpeed()<2&&0==this.powerupIsActive&&(Game.playSound("dodgems/dodgem-stop.mp3",.2),Game.playSound("dodgems/dodgem-idle.mp3",.2),Game.stopSound("dodgems/dodgem-start.mp3"),Game.stopSound("dodgems/dodgem-moving.mp3"),this.dodgemDrivingSoundPlaying=!1),1==this.powerDodgemDrivingSoundPlaying&&this.physicsManager.getDodgemSpeed()<1&&0==this.powerupIsActive&&Game.stopSound("dodgems/dodgem-moving.mp3"),1==this.powerDodgemDrivingSoundPlaying&&1==this.powerupIsActive&&(++this.powerDodgemDrivingSoundTimer>=this.powerDodgemDrivingSoundLimit&&(this.powerDodgemDrivingSoundTimer=0,this.powerDodgemDrivingSoundPlaying=!1,Game.stopSound("dodgems/dodgem-power-up-moving.mp3"),Game.stopSound("dodgems/power-up-jet-loop.mp3")),this.physicsManager.getDodgemSpeed()>.02&&(this.powerDodgemDrivingSoundTimer=0)),0==this.powerDodgemDrivingSoundPlaying&&this.physicsManager.getDodgemSpeed()>3&&1==this.powerupIsActive&&(Game.stopSound("dodgems/dodgem-idle.mp3"),Game.stopSound("dodgems/dodgem-power-up-stop.mp3"),Game.stopSound("dodgems/dodgem-power-up-start.mp3"),Game.stopSound("dodgems/power-up-jet-start.mp3"),Game.stopSound("dodgems/power-up-jet-stop.mp3"),TweenMax.delayedCall(.8,function(){Game.playSound("dodgems/dodgem-power-up-moving.mp3",.3),Game.playSound("dodgems/power-up-jet-loop.mp3",.5)},null,this),0==this.powerDodgemDrivingSoundPlaying&&(Game.playSound("dodgems/dodgem-power-up-start.mp3",.3),Game.playSound("dodgems/power-up-jet-start.mp3",.5)),this.powerDodgemDrivingSoundPlaying=!0),1==this.powerDodgemDrivingSoundPlaying&&this.physicsManager.getDodgemSpeed()<2&&1==this.powerupIsActive&&(Game.playSound("dodgems/dodgem-power-up-stop.mp3",.3),Game.playSound("dodgems/power-up-jet-stop.mp3",.5),Game.playSound("dodgems/dodgem-idle.mp3",.3),Game.stopSound("dodgems/dodgem-power-up-start.mp3"),Game.stopSound("dodgems/power-up-jet-start.mp3"),Game.fadeSound("dodgems/dodgem-power-up-moving.mp3",.1,0),Game.fadeSound("dodgems/power-up-jet-loop.mp3",.1,0),Game.stopSound("dodgems/dodgem-power-up-moving.mp3"),Game.stopSound("dodgems/power-up-jet-loop.mp3"),this.powerDodgemDrivingSoundPlaying=!1),1==this.powerDodgemDrivingSoundPlaying&&this.physicsManager.getDodgemSpeed()<1&&1==this.powerupIsActive&&(Game.stopSound("dodgems/dodgem-power-up-moving.mp3"),Game.stopSound("dodgems/power-up-jet-loop.mp3"),this.powerDodgemDrivingSoundPlaying=!1),0==this.powerupIsActive&&Game.stopSound("dodgems/power-up-jet-loop.mp3"),0==Game.isLowEndIPad){if(1==this.skidActive&&(this.skidDurationCounter++,0==this.bumperDriftSoundTimer&&(Game.playSound("dodgems/ice-scrape-looping.mp3",.4),Game.stopSound("dodgems/ice-scrape-end.mp3"),this.bumperDriftSoundPlaying=!0,++this.bumperDriftSoundTimer>=this.bumperDriftSoundLimit&&(Game.stopSound("dodgems/ice-scrape-looping.mp3"),this.bumperDriftSoundTimer=0,this.bumperDriftSoundPlaying=!1)),this.placeSkidParticle(this.dodgemContainer.position.x,this.dodgemContainer.position.y),this.skidDurationCounter>=this.skidDurationLimit&&(this.skidActive=!1,Game.stopSound("dodgems/ice-scrape-looping.mp3"),Game.playSound("dodgems/ice-scrape-end.mp3",.4),this.bumperDriftSoundTimer=0,this.bumperDriftSoundPlaying=!1)),++this.backWheelTrailCounter>=this.backWheelTrailCounterLimit&&this.placeRearWheelParticle(this.dodgemContainer.position.x,this.dodgemContainer.position.y),this.skidSampleCounter<this.skidSampleCounterLimit?this.skidSampleCounter++:(this.skidSampleCounter=0,this.detectSkid()),this.inputManager.driveForce>100&&1==this.powerupIsActive)if(this.boostParticlesCounter<this.boostParticles.length){var t=this.boostParticles[this.boostParticlesCounter];t.active=!0,t.sprite.position.x=this.mainHolder.toLocal(new PIXI.Point(0,0),this.dodgemContainer).x,t.sprite.position.y=this.mainHolder.toLocal(new PIXI.Point(0,0),this.dodgemContainer).y,t.sprite.alpha=Game.getRandom(.6,1),t.sprite.scale.x=t.sprite.scale.y=Game.getRandom(2.5,3.5),t.sprite.rotation=Game.getRandom(-.2,.2)+this.dodgemContainer.rotation-Math.PI/2,this.boostParticlesCounter++}else this.boostParticlesCounter=0;for(s=0;s<this.boostParticles.length;s++)1==this.boostParticles[s].active&&(this.boostParticles[s].sprite.alpha<=0&&(this.boostParticles[s].active=!1),this.boostParticles[s].sprite.alpha-=.05,this.boostParticles[s].sprite.scale.x-=.02,this.boostParticles[s].sprite.scale.y-=.02);for(s=0;s<this.damageParticles.length;s++)0!=this.damageParticles[s].active?1==this.damageParticles[s].active&&(this.damageParticles[s].sprite.alpha-=.01,this.damageParticles[s].sprite.position.x=this.damageParticles[s].ParticleBody.position[0],this.damageParticles[s].sprite.position.y=this.damageParticles[s].ParticleBody.position[1],this.damageParticles[s].sprite.rotation=-this.damageParticles[s].ParticleBody.angle,this.damageParticles[s].sprite.alpha<=0&&(this.physicsManager.removeBodyFromWorld(this.damageParticles[s].ParticleBody),this.damageParticles[s].active=!1,this.damageParticles[s].sprite.position.y=-5e3,this.damageParticles[s].ParticleBody.position[1]=-5e3)):this.damageParticles[s].sprite.alpha=0}this.inputManager.tick(),this.physicsManager.stepPhysics(),this.dodgemsManager.tick(),this.positionViewport();var i=Math.round(this.health/1e3*200);i<0&&(i=0),this.healthBar.width=i,this.healthBar2.width+=(i-this.healthBar2.width)/30,this.score>Number(this.scoreText.text)&&(this.scoreText.text=String(Number(this.scoreText.text)+1));for(s=0;s<this.tickets.length;s++)this.tickets[s].tick();if(1!=Game.isLowEndIPad){for(s=0;s<this.backWheelTrailParticle.length;s++)1==this.backWheelTrailParticle[s].active&&(this.backWheelTrailParticle[s].sprite.alpha<=0&&(this.backWheelTrailParticle[s].active=!1),this.backWheelTrailParticle[s].sprite.alpha=this.backWheelTrailParticle[s].sprite.alpha-.004);for(s=0;s<this.skidParticle.length;s++)1==this.skidParticle[s].active&&(this.skidParticle[s].sprite.alpha<=0&&(this.skidParticle[s].active=!1),this.skidParticle[s].sprite.alpha=this.skidParticle[s].sprite.alpha-.01,this.skidParticle[s].sprite.scale.x+=.07,this.skidParticle[s].sprite.scale.y+=.07,this.skidParticle[s].sprite.rotation-=.02)}for(var s=0;s<this.iceCracks.length;s++)1==this.iceCracks[s].active&&(this.iceCracks[s].sprite.alpha<=0&&(this.iceCracks[s].active=!1),this.iceCracks[s].sprite.alpha=this.iceCracks[s].sprite.alpha-.001)}},t.prototype.positionViewport=function(){var e=new PIXI.Point((-this.dodgemContainer.position.x-this.mainHolder.position.x+this.mainHolderPos.x)/t.cameraMotionEaseAmount,(-this.dodgemContainer.position.y+Game.stageHeight/2-this.mainHolder.position.y+this.mainHolderPos.y)/t.cameraMotionEaseAmount),i=this.mainHolder.position.x+e.x,s=this.mainHolder.position.y+e.y,o=-this.dodgemContainer.rotation;s<920&&s>-1560&&(this.mainHolder.position.y=s),i<530&&i>-1560&&(this.mainHolder.position.x=i),this.arena.rotation+=(o-this.arena.rotation)/7;var a=.7;a+=(1-this.physicsManager.getDodgemSpeed()/2-a)/20,this.arena.scale.x=a,this.arena.scale.y=a},t.prototype.updateHealth=function(e){0!=this.healthCooledDown&&(this.health>750?(this.playerSmoke=!1,this.damageParticleLimit=30,this.healthBar.tint=6018816):this.health>500&&this.health<750?(this.damageParticleLimit=18,this.playerSmoke=!0,this.healthBar.tint=14122496):this.health<500&&this.health>250?(this.playerSmoke=!0,this.damageParticleLimit=8,this.healthBar.tint=14090240):this.health<250&&(this.playerSmoke=!0,this.damageParticleLimit=2,this.healthBar.tint=14090240),this.health>20?e>5&&(this.health-=2*e):this.health=20,this.healthCooledDown=!1,this.dodgem.alpha=1,this.playElectricFrame(this.dodgemContainer.position,this.dodgemContainer.rotation),this.playerElectricFrames=!0,this.healthCoolDownTimeline=this.killTween(this.healthCoolDownTimeline),this.healthCoolDownTimeline=new TimelineMax,this.healthCoolDownTimeline.call(function(){this.healthCooledDown=!0,this.health<=20&&this.endGame(this),this.dodgem.alpha=1},null,this,.5))},t.prototype.updateScore=function(e){this.score+=e},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&1!=this.tutorialOverlay.isOpen&&this.inputManager.keyDown(t)},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&this.inputManager.keyUp(t)},t.prototype.pause=function(t){0==t&&(Game.pauseSound("dodgems/music.mp3"),e.prototype.pause.call(this,t)),Game.pauseSound("dodgems/crash-1.mp3"),Game.pauseSound("dodgems/crash-2.mp3"),Game.pauseSound("dodgems/ice-scrape-looping.mp3"),Game.pauseSound("dodgems/ice-scrape-end.mp3"),Game.pauseSound("dodgems/zap-1.mp3"),Game.pauseSound("dodgems/zap-2.mp3"),Game.pauseSound("dodgems/arm-pickup.mp3"),Game.pauseSound("dodgems/dust-pop.mp3"),Game.pauseSound("dodgems/dodgem-idle.mp3"),Game.pauseSound("dodgems/dodgem-moving.mp3"),Game.pauseSound("dodgems/dodgem-start.mp3"),Game.pauseSound("dodgems/dodgem-stop.mp3"),Game.pauseSound("dodgems/thud-1.mp3"),Game.pauseSound("dodgems/thud-2.mp3"),Game.pauseSound("dodgems/thud-3.mp3"),Game.pauseSound("dodgems/ice-crack-1.mp3"),Game.pauseSound("dodgems/ice-crack-2.mp3"),Game.pauseSound("dodgems/ice-crack-3.mp3"),Game.pauseSound("dodgems/ice-crack-4.mp3"),Game.pauseSound("dodgems/henry-no-1.mp3"),Game.pauseSound("dodgems/henry-no-2.mp3"),Game.pauseSound("dodgems/henry-no-3.mp3"),Game.pauseSound("dodgems/henry-oh.mp3"),Game.pauseSound("dodgems/dodgem-power-up-transform.mp3"),Game.pauseSound("dodgems/dodgem-power-up-stop.mp3"),Game.pauseSound("dodgems/dodgem-power-up-start.mp3"),Game.pauseSound("dodgems/dodgem-power-up-moving.mp3"),Game.pauseSound("dodgems/power-up-jet-loop.mp3"),Game.pauseSound("dodgems/power-up-jet-start.mp3"),Game.pauseSound("dodgems/power-up-jet-stop.mp3"),Game.pauseSound("dodgems/henry-little-help.mp3"),Game.pauseSound("dodgems/henry-hey.mp3"),Game.pauseSound("dodgems/henry-woah.mp3"),Game.pauseSound("dodgems/henry-awesome.mp3");for(var i=0;i<this.tickets.length;i++)this.tickets[i].pause();this.physicsManager.pause(),this.dodgemsManager.pause(),this.timer.pause(),this.pauseResumeTween(this.openGateTimeline,"pause"),this.pauseResumeTween(this.healthCoolDownTimeline,"pause"),this.pauseResumeTween(this.activatePowerupTimeline,"pause"),this.pauseResumeTween(this.armTimeline,"pause"),this.pauseResumeTween(this.emoteTimeline,"pause")},t.prototype.resume=function(){e.prototype.resume.call(this),Game.resumeSound("dodgems/crash-1.mp3"),Game.resumeSound("dodgems/crash-2.mp3"),Game.resumeSound("dodgems/ice-scrape-looping.mp3"),Game.resumeSound("dodgems/ice-scrape-end.mp3"),Game.resumeSound("dodgems/zap-1.mp3"),Game.resumeSound("dodgems/zap-2.mp3"),Game.resumeSound("dodgems/arm-pickup.mp3"),Game.resumeSound("dodgems/dust-pop.mp3"),Game.resumeSound("dodgems/dodgem-idle.mp3"),Game.resumeSound("dodgems/dodgem-moving.mp3"),Game.resumeSound("dodgems/dodgem-start.mp3"),Game.resumeSound("dodgems/dodgem-stop.mp3"),Game.resumeSound("dodgems/thud-1.mp3"),Game.resumeSound("dodgems/thud-2.mp3"),Game.resumeSound("dodgems/thud-3.mp3"),Game.resumeSound("dodgems/ice-crack-1.mp3"),Game.resumeSound("dodgems/ice-crack-2.mp3"),Game.resumeSound("dodgems/ice-crack-3.mp3"),Game.resumeSound("dodgems/ice-crack-4.mp3"),Game.resumeSound("dodgems/music.mp3"),Game.resumeSound("dodgems/henry-no-1.mp3"),Game.resumeSound("dodgems/henry-no-2.mp3"),Game.resumeSound("dodgems/henry-no-3.mp3"),Game.resumeSound("dodgems/henry-oh.mp3"),Game.resumeSound("dodgems/dodgem-power-up-transform.mp3"),Game.resumeSound("dodgems/dodgem-power-up-stop.mp3"),Game.resumeSound("dodgems/dodgem-power-up-start.mp3"),Game.resumeSound("dodgems/dodgem-power-up-moving.mp3"),Game.resumeSound("dodgems/power-up-jet-loop.mp3"),Game.resumeSound("dodgems/power-up-jet-start.mp3"),Game.resumeSound("dodgems/power-up-jet-stop.mp3"),Game.resumeSound("dodgems/henry-little-help.mp3"),Game.resumeSound("dodgems/henry-hey.mp3"),Game.resumeSound("dodgems/henry-woah.mp3"),Game.resumeSound("dodgems/henry-awesome.mp3");for(var t=0;t<this.tickets.length;t++)this.tickets[t].resume();this.physicsManager.resume(),this.dodgemsManager.resume(),this.timer.resume(),1==Game.onDesktop?this.game.ui.setUI("gameplay-dodgems"):this.game.ui.setUI("gameplay-dodgems-touch"),this.pauseResumeTween(this.openGateTimeline,"resume"),this.pauseResumeTween(this.healthCoolDownTimeline,"resume"),this.pauseResumeTween(this.activatePowerupTimeline,"resume"),this.pauseResumeTween(this.armTimeline,"resume"),this.pauseResumeTween(this.emoteTimeline,"resume"),this.game.powerUpManager.resumeGame()},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause")},t.prototype.destroy=function(){e.prototype.destroy.call(this),Game.stopSound("dodgems/crash-1.mp3"),Game.stopSound("dodgems/crash-2.mp3"),Game.stopSound("dodgems/ice-scrape-looping.mp3"),Game.stopSound("dodgems/ice-scrape-end.mp3"),Game.stopSound("dodgems/zap-1.mp3"),Game.stopSound("dodgems/zap-2.mp3"),Game.stopSound("dodgems/arm-pickup.mp3"),Game.stopSound("dodgems/dust-pop.mp3"),Game.stopSound("dodgems/dodgem-idle.mp3"),Game.stopSound("dodgems/dodgem-moving.mp3"),Game.stopSound("dodgems/dodgem-start.mp3"),Game.stopSound("dodgems/dodgem-stop.mp3"),Game.stopSound("dodgems/thud-1.mp3"),Game.stopSound("dodgems/thud-2.mp3"),Game.stopSound("dodgems/thud-3.mp3"),Game.stopSound("dodgems/ice-crack-1.mp3"),Game.stopSound("dodgems/ice-crack-2.mp3"),Game.stopSound("dodgems/ice-crack-3.mp3"),Game.stopSound("dodgems/ice-crack-4.mp3"),Game.stopSound("dodgems/henry-no-1.mp3"),Game.stopSound("dodgems/henry-no-2.mp3"),Game.stopSound("dodgems/henry-no-3.mp3"),Game.stopSound("dodgems/henry-oh.mp3"),Game.stopSound("dodgems/dodgem-power-up-transform.mp3"),Game.stopSound("dodgems/dodgem-power-up-stop.mp3"),Game.stopSound("dodgems/dodgem-power-up-start.mp3"),Game.stopSound("dodgems/dodgem-power-up-moving.mp3"),Game.stopSound("dodgems/power-up-jet-loop.mp3"),Game.stopSound("dodgems/power-up-jet-start.mp3"),Game.stopSound("dodgems/power-up-jet-stop.mp3"),Game.stopSound("dodgems/henry-little-help.mp3"),Game.stopSound("dodgems/henry-hey.mp3"),Game.stopSound("dodgems/henry-woah.mp3"),Game.stopSound("dodgems/henry-awesome.mp3");for(t=0;t<this.tickets.length;t++)this.tickets[t].destroy();this.physicsManager.unbindSpriteFromBody(this.dodgem),this.physicsManager.unbindSpriteFromBody(this.characterHead),this.timer.destroy(),this.physicsManager.destroy(),this.dodgemsManager.destroy(),this.inputManager.destroy(),this.tutorialOverlay.destroy(),this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.armTimeline=this.killTween(this.armTimeline),this.emoteTimeline=this.killTween(this.emoteTimeline),this.uiLayer.removeChild(this.healthBarHolder),this.uiLayer.removeChild(this.scoreText),this.uiLayer.removeChild(this.timer.container),this.mainHolder.removeChild(this.floor),this.mainHolder.removeChild(this.dodgem),this.mainHolder.removeChild(this.characterHead),this.mainHolder.removeChild(this.gate),this.arena.removeChild(this.mainHolder),this.container.removeChild(this.arena),this.healthCoolDownTimeline=this.killTween(this.healthCoolDownTimeline),this.openGateTimeline=this.killTween(this.openGateTimeline);for(t=0;t<this.floorTiles.length;t++)Game.displayStore.returnPooledItem(this.floorTiles[t]);Game.displayStore.returnPooledItem(this.topWall),Game.displayStore.returnPooledItem(this.bottomWall),Game.displayStore.returnPooledItem(this.leftWall),Game.displayStore.returnPooledItem(this.rightWall);for(t=0;t<this.backWheelTrailParticle.length;++t)Game.displayStore.returnPooledItem(this.backWheelTrailParticle[t].sprite);for(t=0;t<this.skidParticle.length;++t)Game.displayStore.returnPooledItem(this.skidParticle[t].sprite);for(t=0;t<this.iceCracks.length;++t)Game.displayStore.returnPooledItem(this.iceCracks[t].sprite);for(t=0;t<this.damageParticles.length;++t)Game.displayStore.returnPooledItem(this.damageParticles[t].sprite);for(var t=0;t<this.boostParticles.length;++t)Game.displayStore.returnPooledItem(this.boostParticles[t].sprite);Game.displayStore.returnPooledItem(this.bumpFrames),Game.displayStore.returnPooledItem(this.electricFrames)},t.cameraMotionEaseAmount=5,t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),JetSkiGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.rampSpawnBuffer=300,i.jetskiAccelSoundPlaying=!1,i.timeBarBitsPosY=[-234.5,-182,-130.5,-79,-27],i.multiplierColours=[38655,2873391,13238016,16731904,12456447],i.id="jetSkiGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.seaRoughness=0,this.powerupIsActive=!1,this.controlsOverlayOn=!0,this.timeBarReset=!1,this.landedCorrectly=!1,this.jetSkiInMotion=!1,this.flipEnabled=!1,this.flipping=!1,this.gameOverTriggered=!1,this.ableToLoseHeart=!0,this.countingAir=!1,this.airCount=0,this.spinCount=0,this.landingAllowed=!0,this.landingAllowedCounter=0,this.spinMultiplier=1,this.airBarActive=!0,this.landedPosX=0,this.blockIndex=0,this.currentLives=3,this.jetSkiAnimationPlaying=!1,this.jetSkiAnimationIdlePlaying=!1,this.jetSkiAnimationLoopingPlaying=!1,this.performingPUeffect=!1,this.airGuitarPlaying=!1,this.timeBarSoundPlaying=!1,this.timeBarSoundTimer=0,this.timeBarSoundLimit=30,this.tickets=[],this.timeBarBits=[],this.setBackgroundColor(9101054),Game.coreData.setCurrentRide("jet-ski"),this.selectedCharacter=Game.coreData.getSelectedCharacter()||"tomika",this.loadCharacter(),Game.playSound("jet-ski/music.mp3",.45),this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),this.physicsManager=new JetSkiPhysicsManager(this,this.mainHolder),this.physicsManager.initPhysicsWorld(),this.jumpManager=new JetSkiJumpManager(this),this.losingHeart=!1,this.heartNumber=2,this.targetHeartScale=0,this.heartBG=Game.displayStore.getSprite("jet-ski/heart-bg"),this.heartBG.position.x=109,this.heartBG.position.y=50,this.heartIcons=new Array,this.distanceString="0m",this.scoreHolder=Game.displayStore.getContainer("jet-ski/score-holder"),this.scoreText=Game.displayStore.getBitmapText("jet-ski/score-font"),this.scoreText.scale.x=this.scoreText.scale.y=.8,this.scoreText.position.x=this.scoreHolder.position.x+70,this.scoreText.position.y=this.scoreHolder.position.y+7,this.scoreHolder.scale.x=this.scoreHolder.scale.y=1,this.scoreHolder.addChild(this.scoreText),this.scoreText.text=this.distanceString,this.addTimeTextBack=Game.displayStore.getSprite("jet-ski/add-time-timer-bg"),this.addTimeTextBack.position.x=0,this.addTimeTextBack.position.y=40,this.addTimeTextBack.scale.x=.6,this.addTimeTextBack.scale.y=.8,this.addTimeText=Game.displayStore.getBitmapText("timer-font"),this.addTimeText.position.x=-9,this.addTimeText.position.y=-24,this.addTimeText.tint=30975,this.addTimeText.scale.x=.8,this.addTimeText.scale.y=.6,this.addTimeText.text="0",this.addTimeText.alpha=1,this.addTimeTextBack.addChild(this.addTimeText);for(r=0;r<5;r++){var i=new JetSkiTicket(this,r);this.tickets.push(i)}if(3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),this.timer=new JetSkiTimer(this),this.inputManager=new JetSkiInputManager(this,this.mainHolder),this.tutorialViewed=Game.coreData.getGameTutorialViewed("jet-ski"),this.mainHolder=Game.displayStore.getContainer("main-holder"),this.bgLayerBottomSlice=Game.displayStore.getSprite("jet-ski/bg-layer-bottom-slice"),this.bgLayerBottomSlice.width=Game.stageWidth,this.bgLayerBottomSlice.height=180,this.bgLayerBottomSlice.position.y=400,this.physicsDebugger=new PhysicsDebugger(this,this.mainHolder,this.physicsManager.world),this.jetskiBody=Game.displayStore.getContainer("jet-ski/body"),this.jetskiSprite=this.jetskiBody.getSprite("jet-ski/jet-ski"),this.jetskiPoweredUpSprite=this.jetskiBody.getSprite("jet-ski/jet-ski-powered-up"),this.jetskiSeat=this.jetskiBody.getSprite("jet-ski/seat"),this.puEffectHolder=this.jetskiBody.getContainer("jet-ski/powerup-effect"),this.puEffectHolder.scale.x=this.puEffectHolder.scale.y=0,this.puEffectSparkle1=this.puEffectHolder.getSprite("jet-ski/pu-sparkle-1"),this.puEffectSparkle2=this.puEffectHolder.getSprite("jet-ski/pu-sparkle-2"),this.puEffectGlow=this.jetskiBody.getSprite("jet-ski/pu-glow"),this.puEffectSparkle1.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectSparkle2.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectGlow.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectGlow.scale.x=0,this.puEffectGlow.scale.y=0,this.jetskiPoweredUpSprite.alpha=0,this.jetskiSprite.alpha=1,this.showLoopingWaterSpray=!1,this.showStartWaterSpray=!1,this.startWaterSprayTimer=0,this.startWaterSprayLimit=26,this.jetFramesLooping=Game.displayStore.getAnimatedSprite("jet-ski/jet-frames-looping"),this.jetFramesLooping.position.x=-120,this.jetFramesLooping.position.y=70,this.jetFramesLooping.alpha=0,this.jetFramesLooping.loop=!0,this.jetFramesLooping.animationSpeed=.4,this.jetFramesLooping.play(),this.jetFramesStart=Game.displayStore.getAnimatedSprite("jet-ski/jet-frames-start"),this.jetFramesStart.position.x=-120,this.jetFramesStart.position.y=68,this.jetFramesStart.alpha=0,this.jetFramesStart.loop=!1,this.jetFramesStart.animationSpeed=.4,this.jetFramesEnd=Game.displayStore.getAnimatedSprite("jet-ski/jet-frames-end"),this.jetFramesEnd.position.x=-120,this.jetFramesEnd.position.y=68,this.jetFramesEnd.alpha=0,this.jetFramesEnd.loop=!1,this.jetFramesEnd.animationSpeed=.4,this.jetFramesLoopingFront=Game.displayStore.getAnimatedSprite("jet-ski/jet-frames-looping"),this.jetFramesLoopingFront.position.x=-115,this.jetFramesLoopingFront.position.y=70,this.jetFramesLoopingFront.alpha=0,this.jetFramesLoopingFront.loop=!0,this.jetFramesLoopingFront.animationSpeed=.4,this.jetFramesLoopingFront.play(),this.jetFramesLoopingFront.scale.x=1.5,this.jetFramesLoopingFront.scale.y=.5,this.jetFramesStartFront=Game.displayStore.getAnimatedSprite("jet-ski/jet-frames-start"),this.jetFramesStartFront.position.x=-115,this.jetFramesStartFront.position.y=68,this.jetFramesStartFront.alpha=0,this.jetFramesStartFront.loop=!1,this.jetFramesStartFront.animationSpeed=.4,this.jetFramesStartFront.scale.x=1.5,this.jetFramesStartFront.scale.y=.5,this.jetFramesEndFront=Game.displayStore.getAnimatedSprite("jet-ski/jet-frames-end"),this.jetFramesEndFront.position.x=-115,this.jetFramesEndFront.position.y=68,this.jetFramesEndFront.alpha=0,this.jetFramesEndFront.loop=!1,this.jetFramesEndFront.animationSpeed=.4,this.jetFramesEndFront.scale.x=1.5,this.jetFramesEndFront.scale.y=.5,this.jetFramesLoopingFront2=Game.displayStore.getAnimatedSprite("jet-ski/jet-front-frames-looping"),this.jetFramesLoopingFront2.position.x=95,this.jetFramesLoopingFront2.position.y=50,this.jetFramesLoopingFront2.alpha=0,this.jetFramesLoopingFront2.loop=!0,this.jetFramesLoopingFront2.play(),this.jetFramesLoopingFront2.animationSpeed=.4,this.jetFramesLoopingFront2.scale.x=1,this.jetFramesLoopingFront2.scale.y=1,this.jetFramesStartFront2=Game.displayStore.getAnimatedSprite("jet-ski/jet-front-frames-start"),this.jetFramesStartFront2.position.x=95,this.jetFramesStartFront2.position.y=50,this.jetFramesStartFront2.alpha=0,this.jetFramesStartFront2.loop=!1,this.jetFramesStartFront2.animationSpeed=.4,this.jetFramesStartFront2.scale.x=1,this.jetFramesStartFront2.scale.y=1,this.jetFramesEndFront2=Game.displayStore.getAnimatedSprite("jet-ski/jet-front-frames-end"),this.jetFramesEndFront2.position.x=95,this.jetFramesEndFront2.position.y=50,this.jetFramesEndFront2.alpha=0,this.jetFramesEndFront2.loop=!1,this.jetFramesEndFront2.animationSpeed=.4,this.jetFramesEndFront2.scale.x=1,this.jetFramesEndFront2.scale.y=1,this.jetFramesIdle=Game.displayStore.getAnimatedSprite("jet-ski/jet-frames-idle"),this.jetFramesIdle.position.x=0,this.jetFramesIdle.position.y=69,this.jetFramesIdle.alpha=0,this.jetFramesIdle.loop=!0,this.jetFramesIdle.animationSpeed=.2,this.jetFramesIdle.play(),this.jetFramesIdle.scale.x=.85,this.jetFramesIdle.scale.y=1,this.splashFrames=Game.displayStore.getAnimatedSprite("jet-ski/splash-frames"),this.splashFrames.position.x=30,this.splashFrames.position.y=69,this.splashFrames.alpha=0,this.splashFrames.loop=!1,this.splashFrames.animationSpeed=.4,this.splashFrames.scale.x=.85,this.splashFrames.scale.y=1,this.jetFramesFrontHolder1=Game.displayStore.getContainer("jet-ski/jet-front-frames-holder-1"),this.jetFramesFrontHolder2=Game.displayStore.getContainer("jet-ski/jet-front-frames-holder-2"),this.jetFramesFrontHolder1.addChild(this.jetFramesLoopingFront),this.jetFramesFrontHolder1.addChild(this.jetFramesStartFront),this.jetFramesFrontHolder1.addChild(this.jetFramesEndFront),this.jetFramesFrontHolder2.addChild(this.jetFramesLoopingFront2),this.jetFramesFrontHolder2.addChild(this.jetFramesStartFront2),this.jetFramesFrontHolder2.addChild(this.jetFramesEndFront2),this.jetFramesFrontHolder1.addChild(this.jetFramesIdle),this.jetFramesFrontHolder1.addChild(this.splashFrames),this.layersHolder=Game.displayStore.getContainer("jet-ski/layers-holder"),this.seaFront=this.layersHolder.getContainer("jet-ski/sea-front-layer"),this.seaFrontBottom=this.layersHolder.getContainer("jet-ski/sea-front-bottom-layer"),this.seaMiddle=this.layersHolder.getContainer("jet-ski/sea-middle-layer"),this.seaBack=this.layersHolder.getContainer("jet-ski/sea-back-layer"),this.seaBack.height=400,this.seaFront.alpha=.7,this.seaFrontBottom.alpha=.9,this.seaFrontBottom.height=400,this.seaweedAnimation1=Game.displayStore.getAnimatedSprite("jet-ski/seaweed-animation/seaweed-frames"),this.seaweedAnimation1.tint=1927222,this.seaweedAnimation1.position.x=100,this.seaweedAnimation1.position.y=160,this.seaweedAnimation1.loop=!0,this.seaweedAnimation1.animationSpeed=.13,this.seaweedAnimation1.alpha=.6,this.seaweedAnimation1.play(),this.seaweedAnimation2=Game.displayStore.getAnimatedSprite("jet-ski/seaweed-animation/seaweed-frames"),this.seaweedAnimation2.tint=7779210,this.seaweedAnimation2.position.x=100,this.seaweedAnimation2.position.y=160,this.seaweedAnimation2.loop=!0,this.seaweedAnimation2.alpha=.4,this.seaweedAnimation2.scale.x=.5,this.seaweedAnimation2.animationSpeed=.12,this.seaweedAnimation2.play(),this.seaweedAnimation3=Game.displayStore.getAnimatedSprite("jet-ski/seaweed-animation/seaweed-frames"),this.seaweedAnimation3.tint=7779210,this.seaweedAnimation3.position.x=100,this.seaweedAnimation3.position.y=160,this.seaweedAnimation3.loop=!0,this.seaweedAnimation3.alpha=.4,this.seaweedAnimation3.scale.x=.5,this.seaweedAnimation3.animationSpeed=.12,this.seaweedAnimation3.play(),0==Game.isLowEndIPad){this.sprayParticlesHolder=Game.displayStore.getContainer("jet-ski/spray-particles-holder"),this.splashParticlesHolder=Game.displayStore.getContainer("jet-ski/splash-particles-holder");var t={cap:90,time:1,lowerAngle:-120,upperAngle:-110,XstartRange:7,YstartRange:5,gravity:1500,startAlpha:.9,xPos:0,yPos:0,lowerVelocity:700,upperVelocity:1e3,endScale:0,lowerStartScale:.75,upperStartScale:2,rotationPower:1},s={lowerAngle:340,upperAngle:360,lowerVelocity:500,upperVelocity:1e3,endScale:0,lowerStartScale:2,upperStartScale:5,friction:.04,XstartRange:120,YstartRange:10,time:1,gravity:800,stagger:400,cap:90,endAlpha:0,rotationPower:2};this.sprayParticles=new ParticleStream(["jet-ski/spray-particle-1","jet-ski/spray-particle-2","jet-ski/spray-particle-3"],this.sprayParticlesHolder,this,t),this.splashParticles=new ParticleBurst(["jet-ski/splash-particle-1","jet-ski/splash-particle-2","jet-ski/splash-particle-3"],this.splashParticlesHolder,this,s),this.splashParticles.container.position.y=440}this.bubbleParticlesHolder=Game.displayStore.getContainer("jet-ski/bubble-particles-holder");var o={cap:10,time:1.8,lowerAngle:140,upperAngle:320,XstartRange:5,YstartRange:5,gravity:-70,startAlpha:1,friction:.03,xPos:0,yPos:0,endScale:1,lowerVelocity:0,upperVelocity:50,lowerStartScale:.2,upperStartScale:.5,fadeInTime:5,fadeOutTime:10,scaleOutTime:1.5,rotationPower:1};this.bubbleParticles=new ParticleStream(["jet-ski/bubble-particle-1"],this.bubbleParticlesHolder,this,o),this.bgLayer=new JetSkiScrollingLayer(this,.9,67,this.layersHolder.getContainer("jet-ski/bg-layer")),this.mgLayer=new JetSkiScrollingLayer(this,.78,-30,this.layersHolder.getContainer("jet-ski/mg-layer")),this.fgLayer=new JetSkiScrollingLayer(this,.7,190,this.layersHolder.getContainer("jet-ski/fg-layer")),this.skyLayer=new JetSkiScrollingLayer(this,1,0,this.layersHolder.getContainer("jet-ski/sky-layer")),this.seaBackLayer=new JetSkiScrollingLayer(this,.7,350,this.seaBack),this.seaMiddleLayer=new JetSkiScrollingLayer(this,.5,390,this.seaMiddle),this.seaFrontLayer=new JetSkiScrollingLayer(this,.2,440,this.seaFront),this.seaFrontBottomLayer=new JetSkiScrollingLayer(this,.2,740,this.seaFrontBottom),this.seaFrontLayer.showOnlyChunkChild(0),this.skyBackground=Game.displayStore.getSprite("jet-ski/sky"),this.skyBackground.width=Game.stageWidth,this.skyBackground.height=Game.stageHeight,this.jettyBack=Game.displayStore.getSprite("jet-ski/jetty-back"),this.jettyFront=Game.displayStore.getSprite("jet-ski/jetty-front"),this.jettyBack.position.y=480,this.jettyFront.position.y=280,this.jettyFront.position.x=100,this.checkpointHolder=Game.displayStore.getContainer("jet-ski/checkpoint-holder"),this.checkpointHolder.position.x=1e3,this.checkpointHolder.rotation=-.15,this.checkpointHolder.scale.x=.8,this.checkpointHolder.scale.y=.8,this.checkpoint1=this.checkpointHolder.getSprite("jet-ski/checkpoint-1"),this.checkpoint1.position.x=25,this.checkpoint1.position.y=34,this.checkpoint1.alpha=1,this.checkpoint2=this.checkpointHolder.getSprite("jet-ski/checkpoint-2"),this.checkpoint2.alpha=0,this.airBarHolder=Game.displayStore.getContainer("jet-ski/time-bar-holder"),this.airBar=this.airBarHolder.getContainer("jet-ski/air-bar-inner-holder"),this.scoreMultiplierOuterHolder=Game.displayStore.getContainer("jet-ski/air-bar-score-multiplier-outer-holder"),this.scoreMultiplierHolder=this.scoreMultiplierOuterHolder.getContainer("jet-ski/air-bar-score-multiplier-holder"),this.scoreMultiplierHolder.alpha=0,this.sparkle1=this.scoreMultiplierOuterHolder.getSprite("jet-ski/sparkle-1"),this.sparkle2=this.scoreMultiplierOuterHolder.getSprite("jet-ski/sparkle-2"),this.glow=this.scoreMultiplierOuterHolder.getSprite("jet-ski/glow"),this.glow.scale.x=this.glow.scale.y=2,this.sparkle1.blendMode=PIXI.BLEND_MODES.ADD,this.sparkle2.blendMode=PIXI.BLEND_MODES.ADD,this.glow.blendMode=PIXI.BLEND_MODES.ADD,this.glow.scale.x=this.glow.scale.y=0,this.sparkle1.scale.x=this.sparkle1.scale.y=0,this.sparkle2.scale.x=this.sparkle2.scale.y=0,this.timeBarBitHolder=this.airBarHolder.getContainer("jet-ski/time-bar-bit-holder");for(r=0;r<5;r++){var a=Game.displayStore.getSprite("jet-ski/time-bar-bit");a.alpha=0,a.tint=30975,a.position.y=this.timeBarBitsPosY[r],this.timeBarBitHolder.addChild(a),this.timeBarBits.push(a)}this.timeBarBottom=this.airBarHolder.getContainer("jet-ski/time-bar-bottom-holder"),this.timeBarBottomClockHolder=this.timeBarBottom.getContainer("jet-ski/time-bar-bottom-clock-holder"),this.timeBarBottomHandle1=this.timeBarBottomClockHolder.getSprite("jet-ski/time-bar-bottom-handle-1"),this.timeBarBottomHandle2=this.timeBarBottomClockHolder.getSprite("jet-ski/time-bar-bottom-handle-2"),this.particlePoint=this.jetskiBody.getSprite("jet-ski/particle-point"),this.particlePoint.alpha=0,this.particlePoint.position.x=-145,this.jetskiBody.addChild(this.jetFramesStart),this.jetskiBody.addChild(this.jetFramesEnd),this.jetskiBody.addChild(this.jetFramesLooping),this.jetskiBody.addChild(this.jetskiSprite),this.jetskiBody.addChild(this.puEffectGlow),this.jetskiBody.addChild(this.jetskiPoweredUpSprite),this.jetskiBody.addChild(this.puEffectHolder),this.physicsManager.bindSpriteToBody(this.jetskiBody,this.physicsManager.jetskiBody),this.seaMiddleLayer.container.addChildAt(this.checkpointHolder,0),this.container.addChild(this.skyBackground),this.container.addChild(this.bgLayerBottomSlice),this.mainHolder.addChild(this.layersHolder),this.mainHolder.addChild(this.jumpManager.container),this.seaFrontLayer.chunks[2].addChild(this.seaweedAnimation1),this.seaMiddleLayer.chunks[4].addChild(this.seaweedAnimation2),this.seaMiddleLayer.chunks[1].addChild(this.seaweedAnimation3),this.mainHolder.addChild(this.jettyBack),0==Game.isLowEndIPad&&(this.mainHolder.addChild(this.sprayParticlesHolder),this.mainHolder.addChild(this.characterBodyBack)),this.mainHolder.addChild(this.jetskiBody),this.container.addChild(this.mainHolder),this.container.addChild(this.timer.container),this.characterHead.position.x=300,this.characterHead.position.y=300,this.jetskiBody.position.x=300,this.physicsManager.bindSpriteToBody(this.characterHead,this.physicsManager.characterHead),0==Game.isLowEndIPad?(this.physicsManager.bindSpriteToBody(this.characterBodyFront,this.physicsManager.characterBody),this.physicsManager.bindSpriteToBody(this.characterBodyBack,this.physicsManager.characterBodyBack),this.physicsManager.bindSpriteToBody(this.characterArm,this.physicsManager.characterArm),this.physicsManager.bindSpriteToBody(this.characterLegBottom,this.physicsManager.characterLegBottom),this.physicsManager.bindSpriteToBody(this.characterLegTop,this.physicsManager.characterLegTop),this.mainHolder.addChild(this.characterLegTop),this.mainHolder.addChild(this.characterLegBottom),this.mainHolder.addChild(this.characterBodyFront),this.mainHolder.addChild(this.characterArm),this.mainHolder.addChild(this.splashParticlesHolder)):(this.jetskiBody.addChildAt(this.characterBodyBack,0),this.jetskiBody.addChild(this.characterLegTop),this.jetskiBody.addChild(this.characterLegBottom),this.jetskiBody.addChild(this.characterBodyFront),this.jetskiBody.addChild(this.characterArm)),this.mainHolder.addChild(this.characterHead),this.mainHolderPos=new PIXI.Point(300,0),this.mainHolder.addChild(this.jettyFront),this.mainHolder.addChild(this.seaFront),this.mainHolder.addChild(this.seaFrontBottom),this.mainHolder.addChild(this.bubbleParticlesHolder),this.mainHolder.addChild(this.jetFramesFrontHolder1),this.mainHolder.addChild(this.jetFramesFrontHolder2),this.container.addChild(this.heartBG),this.container.addChild(this.scoreHolder),this.container.addChild(this.airBarHolder),this.timer.container.addChildAt(this.addTimeTextBack,0),this.airBarHolder.addChild(this.timeBarBottom),this.airBarHolder.addChild(this.timeBarBitHolder),this.container.addChild(this.scoreMultiplierOuterHolder),this.scoreHolder.position.y=85,this.scoreHolder.position.x=-20;for(var r=0;r<3;r++)this.heartIcons.push({heart:Game.displayStore.getSprite("jet-ski/heart-icon"),active:!0}),this.container.addChild(this.heartIcons[r].heart),this.heartIcons[r].heart.position.x=100,this.heartIcons[r].heart.position.y=50,this.heartIcons[r].heart.visible=!0,this.heartIcons[r].heart.scale.x=0,this.heartIcons[r].heart.scale.y=0;this.heartIcons[0].heart.position.x-=70,this.heartIcons[2].heart.position.x+=70,1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("jet-ski",!0),this.checkpointTimeline=new TimelineMax,this.checkpointTimeline.add([TweenMax.to(this.checkpointHolder,3,{rotation:.15,yoyo:!0,repeat:-1,ease:Power1.easeInOut}),TweenMax.to(this.checkpointHolder.position,1,{y:20,yoyo:!0,repeat:-1,ease:Power1.easeInOut})]),this.checkpointTimeline.add([TweenMax.to(this.checkpoint2,.01,{alpha:1,yoyo:!0,ease:Power1.easeInOut})],3)},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.startGameplay=function(){switch(this.controlsOverlayOn=!1,this.game.ui.triggerEnjoyTheRide(),this.game.ui.setUI("gameplay-jetski"),Game.playSound("jet-ski/ambience-ocean-waves.mp3",.3),Game.playSound("jet-ski/jetski-start.mp3",.4),this.game.powerUpManager.startGame(),this.selectedCharacter){case"tomika":Game.playSound("jet-ski/tomika-ready.mp3",1);break;case"summer":Game.playSound("jet-ski/summer-lets-do-this.mp3",1);break;case"freddy":Game.playSound("jet-ski/freddie-got-this.mp3",1);break;case"lawrence":Game.playSound("jet-ski/lawrence-i-got-this.mp3",1);break;case"zack":Game.playSound("jet-ski/zack-school-of-rock.mp3",1)}this.heartTimeline&&(this.heartTimeline=this.killTween(this.heartTimeline)),0==Game.isLowEndIPad?(this.heartTimeline=new TimelineMax,this.heartTimeline.add([TweenMax.to(this.heartIcons[0].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:0}),TweenMax.to(this.heartIcons[1].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:.1}),TweenMax.to(this.heartIcons[2].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:.2})],.5)):(this.heartIcons[0].heart.scale.x=this.heartIcons[0].heart.scale.y=1,this.heartIcons[1].heart.scale.x=this.heartIcons[1].heart.scale.y=1,this.heartIcons[2].heart.scale.x=this.heartIcons[2].heart.scale.y=1)},t.prototype.spawnTicket=function(e){for(var t,i=0;i<this.tickets.length;i++)if(1==this.tickets[i].available){t=this.tickets[i];break}t&&t.spawn(this.mainHolder,e)},t.prototype.updateScore=function(e){this.distance=e,this.distanceString=this.distance.toString()+"m",this.scoreText.text=this.distanceString,this.distance>150&&0==this.seaRoughness&&(this.seaRoughness=1,this.seaFrontLayer.showOnlyChunkChild(this.seaRoughness,this.seaweedAnimation1),this.seaweedAnimation1.position.y+=100),this.distance>300&&1==this.seaRoughness&&(this.seaRoughness=2,this.seaFrontLayer.showOnlyChunkChild(this.seaRoughness,this.seaweedAnimation1),this.seaweedAnimation1.position.y+=100)},t.prototype.addLife=function(){if(1!=this.gameOverTriggered){this.currentLives<3&&(this.currentLives+=1);for(var e=0;e<this.heartIcons.length;e++)if(1!=this.heartIcons[e].active)return this.heartIcons[e].active=!0,void(0==Game.isLowEndIPad?(this.heartTimeline=this.killTween(this.heartTimeline),this.heartTimeline=new TimelineMax,this.heartTimeline.add(TweenMax.to(this.heartIcons[e].heart.scale,.3,{x:1,y:1,ease:Back.easeOut})),this.heartNumber=e,this.targetHeartScale=0):this.heartIcons[e].heart.visible=!0)}},t.prototype.loseLife=function(){if(1!=this.gameOverTriggered&&0!=this.ableToLoseHeart){this.ableToLoseHeart=!1,this.currentLives>0&&(this.currentLives-=1);for(var e=this.heartIcons.length-1;e>=0;e--)if(0!=this.heartIcons[e].active){if(this.heartIcons[e].active=!1,0==Game.isLowEndIPad)switch(this.heartTimeline=this.killTween(this.heartTimeline),this.heartTimeline=new TimelineMax,this.heartTimeline.add(TweenMax.to(this.heartIcons[e].heart.scale,.3,{x:0,y:0,ease:Back.easeIn})),this.heartNumber=e,this.targetHeartScale=0,this.selectedCharacter){case"tomika":Game.getRandom(0,1)<.5&&Game.playSound("jet-ski/tomika-close-call.mp3",1);break;case"summer":Game.getRandom(0,1)<.5&&Game.playSound("jet-ski/summer-lose.mp3",1);break;case"freddy":Game.getRandom(0,1)<.5&&Game.playSound("jet-ski/freddie-whats-happening.mp3",1);break;case"lawrence":Game.getRandom(0,1)<.5&&Game.playSound("jet-ski/lawrence-no-way.mp3",1);break;case"zack":Game.getRandom(0,1)<.5&&Game.playSound("jet-ski/zack-oh-no.mp3",1)}else this.heartIcons[e].heart.visible=!1;return void this.checkGameOver()}}},t.prototype.checkGameOver=function(){0!=this.currentLives&&0!=this.timer.time||(this.gameOverTriggered=!0,this.game.powerUpManager.setGameOverCooldown(!0),this.endGame(this))},t.prototype.endGame=function(e){e.wristbandOverlay.endGame(e.distance)},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause")},t.prototype.secondChanceUse=function(){this.currentLives<1&&this.addLife(),this.timer.addTime(10,16777215),this.physicsManager.isDrowning&&this.physicsManager.flipJetski()},t.prototype.activatePowerUpEffect=function(){switch(this.particlePoint.position.x=-170,this.performingPUeffect=!0,this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.activatePowerupTimeline=new TimelineMax,this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.3,{x:2.5,y:2.5,ease:Power2.easeIn}),TweenMax.to(this.puEffectGlow.scale,.3,{x:5,y:3.2,ease:Power2.easeIn})],0),this.activatePowerupTimeline.call(function(){this.powerupIsActive=!0,this.jetFramesIdle.scale.x=1,this.jetskiPoweredUpSprite.alpha=1,this.jetskiSprite.alpha=0,this.jetFramesIdle.position.x=-30,this.physicsManager.activatePowerup(),this.jetFramesLoopingFront.scale.x=2.5,this.jetFramesLoopingFront.scale.y=1,this.jetFramesLoopingFront.position.x=-165,this.jetFramesStartFront.scale.x=2.5,this.jetFramesStartFront.scale.y=1,this.jetFramesStartFront.position.x=-165,this.jetFramesEndFront.scale.x=2.5,this.jetFramesEndFront.scale.y=1,this.jetFramesEndFront.position.x=-165,this.jetFramesLoopingFront2.scale.x=1.4,this.jetFramesLoopingFront2.scale.y=1.4,this.jetFramesStartFront2.scale.x=1.4,this.jetFramesStartFront2.scale.y=1.4,this.jetFramesEndFront2.scale.x=1.4,this.jetFramesEndFront2.scale.y=1.4,this.jetFramesLooping.scale.x=1.4,this.jetFramesLooping.scale.y=1.4,this.jetFramesStart.scale.x=1.4,this.jetFramesStart.scale.y=1.4,this.jetFramesEnd.scale.x=1.4,this.jetFramesEnd.scale.y=1.4},null,this),this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.5,{x:0,y:0,ease:Power2.easeOut}),TweenMax.to(this.puEffectGlow.scale,.5,{x:0,y:0,ease:Power2.easeOut})]),this.selectedCharacter){case"tomika":Game.playSound("jet-ski/tomika-nothings-gonna-stop-us-now.mp3",1);break;case"summer":Game.playSound("jet-ski/summer-on-point.mp3",1);break;case"freddy":Game.playSound("jet-ski/freddie-locked-and-loaded.mp3",1);break;case"lawrence":Game.playSound("jet-ski/lawrence-lets-go.mp3",1);break;case"zack":Game.playSound("jet-ski/zack-amazing.mp3",1)}Game.playSound("jet-ski/speedboat-rev.mp3")},t.prototype.deactivatePowerUpEffect=function(){this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.activatePowerupTimeline=new TimelineMax,this.particlePoint.position.x=-145,this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.2,{x:2.5,y:2.5,ease:Power2.easeIn}),TweenMax.to(this.puEffectGlow.scale,.2,{x:5,y:3.2,ease:Power2.easeIn})],0),this.activatePowerupTimeline.call(function(){this.powerupIsActive=!1,this.jetskiPoweredUpSprite.alpha=0,this.jetskiSprite.alpha=1,this.jetFramesIdle.scale.x=.85,this.jetFramesIdle.position.x=0,this.physicsManager.deactivatePowerup(),this.jetFramesLoopingFront.scale.x=1.5,this.jetFramesLoopingFront.scale.y=.5,this.jetFramesLoopingFront.position.x=-115,this.jetFramesStartFront.scale.x=1.5,this.jetFramesStartFront.scale.y=.5,this.jetFramesStartFront.position.x=-115,this.jetFramesEndFront.scale.x=1.5,this.jetFramesEndFront.scale.y=.5,this.jetFramesEndFront.position.x=-115,this.jetFramesLooping.scale.x=1,this.jetFramesLooping.scale.y=1,this.jetFramesStart.scale.x=1,this.jetFramesStart.scale.y=1,this.jetFramesEnd.scale.x=1,this.jetFramesEnd.scale.y=1,this.jetFramesLoopingFront2.scale.x=1,this.jetFramesLoopingFront2.scale.y=1,this.jetFramesStartFront2.scale.x=1,this.jetFramesStartFront2.scale.y=1,this.jetFramesEndFront2.scale.x=1,this.jetFramesEndFront2.scale.y=1},null,this),this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.5,{x:0,y:0,ease:Power2.easeOut}),TweenMax.to(this.puEffectGlow.scale,.5,{x:0,y:0,ease:Power2.easeOut})])},t.prototype.jetSkiHasLanded=function(){if(0!=this.landingAllowed){this.landingAllowed=!1,this.landingAllowedCounter=0,this.airBarActive=!1,Game.fadeSound("jet-ski/guitar-land-1.mp3",1,0),this.airGuitarPlaying=!1;var e,t=!1;0==this.physicsManager.isDrowning&&Math.abs(this.physicsManager.jetskiBody.angularVelocity)<5&&this.physicsManager.jetskiBody.angle%Math.PI<1&&this.physicsManager.jetskiBody.angle%Math.PI>-.8&&(t=!0),e=1==t?0:.8,TweenMax.delayedCall(e,function(){if(0==this.physicsManager.isDrowning&&1==this.timer.started){switch(this.selectedCharacter){case"tomika":1==(e=Game.getRandom(1,4,!0))?Game.playSound("jet-ski/tomika-so-cool.mp3",1):2==e&&Game.playSound("jet-ski/tomika-nothings-gonna-stop-us-now.mp3",1);break;case"summer":1==(e=Game.getRandom(1,4,!0))?Game.playSound("jet-ski/summer-on-point.mp3",1):2==e&&Game.playSound("jet-ski/summer-got-this.mp3",1);break;case"freddy":1==(e=Game.getRandom(1,4,!0))?Game.playSound("jet-ski/freddie-locked-and-loaded.mp3",1):2==e&&Game.playSound("jet-ski/freddie-ha-ha.mp3",1);break;case"lawrence":1==(e=Game.getRandom(1,4,!0))?Game.playSound("jet-ski/lawrence-lets-go.mp3",1):2==e&&Game.playSound("jet-ski/lawrence-got-this.mp3",1);break;case"zack":var e=Game.getRandom(1,4,!0);1==e?Game.playSound("jet-ski/zack-amazing.mp3",1):2==e&&Game.playSound("jet-ski/zack-school-of-rock.mp3",1)}this.landedCorrectly=!0}else this.landedCorrectly=!1;1==this.timer.started&&this.timeBarAnimation()},null,this),this.landedPosX=this.jetskiBody.position.x,this.landedPosX<2500&&(this.landedPosX=2500)}},t.prototype.timeBarAnimation=function(){this.resetScoreMultiplier(.5);var e=this.blockIndex*this.spinMultiplier;this.timeBarTimeline=this.killTween(this.timeBarTimeline),this.timeBarTimeline=new TimelineMax,1==this.landedCorrectly&&1==this.timer.started&&(this.addTimeText.tint=this.multiplierColours[this.spinMultiplier-1],this.addTimeText.text="+"+e.toString(),this.addTimeText.position.x=17-this.addTimeText.width/2,this.timeBarTimeline.add(TweenMax.to(this.addTimeTextBack.position,.2,{y:94,ease:Back.easeOut}),0));for(var t=0;t<this.timeBarBits.length;t++)1==this.landedCorrectly?this.timeBarTimeline.add([TweenMax.to(this.timeBarBits[t].position,.2,{x:-440,y:-233,ease:Sine.easeInOut}),TweenMax.to(this.timeBarBits[t].scale,.2,{x:2,y:2,ease:Sine.easeInOut}),TweenMax.to(this.timeBarBits[t],.2,{alpha:0,ease:Sine.easeInOut,delay:.05}),TweenMax.to(this.timeBarBits[t],.2,{rotation:Game.getRandom(-1,1),ease:Sine.easeInOut})],t/10):(this.timeBarTimeline.call(function(e){e.tint=16711680},[this.timeBarBits[t]],this,.4),this.timeBarTimeline.add([TweenMax.to(this.timeBarBits[t].position,.4,{y:150,ease:Sine.easeOut}),TweenMax.to(this.timeBarBits[t],.4,{alpha:0,ease:Sine.easeOut}),TweenMax.to(this.timeBarBits[t],.4,{rotation:Game.getRandom(-1,1),ease:Sine.easeOut})],t/10));1==this.landedCorrectly&&1==this.timer.started?(this.timeBarTimeline.call(this.resetTimeBarBits,null,this),this.timeBarTimeline.add([TweenMax.to(this.timeBarBottomHandle1,.5,{rotation:0,ease:Sine.easeInOut}),TweenMax.to(this.timeBarBottomHandle2,.5,{rotation:0,ease:Sine.easeInOut})],0),this.timeBarTimeline.add(TweenMax.to(this.addTimeTextBack.position,.5,{y:40,ease:Back.easeIn})),this.timer.addTime(e,this.addTimeText.tint),Game.playSound("jet-ski/time-add.mp3",1)):(Game.playSound("jet-ski/time-subtract.mp3",1),this.timeBarTimeline.call(this.resetTimeBarBits,null,this),this.timeBarTimeline.add([TweenMax.to(this.timeBarBottomHandle1,.7,{rotation:0,ease:Sine.easeInOut}),TweenMax.to(this.timeBarBottomHandle2,.7,{rotation:0,ease:Sine.easeInOut})],0))},t.prototype.resetScoreMultiplier=function(e){TweenMax.to(this.scoreMultiplierHolder,e,{alpha:0,ease:Back.easeOut}),TweenMax.to(this.scoreMultiplierHolder.scale,e,{x:0,y:0,ease:Back.easeOut}),TweenMax.to(this.sparkle1.scale,e,{x:0,y:0,ease:Back.easeOut}),TweenMax.to(this.sparkle2.scale,e,{x:0,y:0,ease:Back.easeOut}),TweenMax.to(this.glow.scale,e,{x:0,y:0,ease:Back.easeOut})},t.prototype.completedInAirSpin=function(){if(1!=this.physicsManager.isTouchingWater)if(this.spinCount+=1,this.scoreMultiplierHolder.alpha=1,this.spinCount<0?this.spinMultiplier=2*Math.abs(this.spinCount+1):this.spinMultiplier=this.spinCount+1,this.spinMultiplier>5)this.spinMultiplier=5;else{for(var e=0;e<this.timeBarBits.length;e++)this.timeBarBits[e].tint=this.multiplierColours[this.spinMultiplier-1];this.resetScoreMultiplier(0),this.scoreMultiplierHolder.showOnlyChild(this.spinMultiplier-2),this.scoreMultiplierTimeline=this.killTween(this.scoreMultiplierTimeline),this.scoreMultiplierTimeline=new TimelineMax,this.scoreMultiplierHolder.scale.x=this.scoreMultiplierHolder.scale.y=4,this.scoreMultiplierHolder.rotation=3*Game.getRandom(-1,1,!0),this.scoreMultiplierTimeline.add([TweenMax.to(this.scoreMultiplierHolder,1,{rotation:0,ease:Elastic.easeOut}),TweenMax.to(this.scoreMultiplierHolder.scale,1,{x:2,y:2,ease:Elastic.easeOut}),TweenMax.to(this.scoreMultiplierHolder,.1,{alpha:1,ease:Power1.easeInOut}),TweenMax.to(this.sparkle1.scale,.9,{x:1,y:1,ease:Elastic.easeOut}),TweenMax.to(this.sparkle2.scale,.9,{x:1,y:1,ease:Elastic.easeOut,delay:.1}),TweenMax.to(this.glow.scale,.9,{x:1,y:1,ease:Elastic.easeOut,delay:.2})]),Game.playSound("jet-ski/combo-bonus.mp3",.7),0==this.airGuitarPlaying&&(Game.stopSound("jet-ski/guitar-land-1.mp3"),Game.playSound("jet-ski/guitar-land-1.mp3",.7),this.airGuitarPlaying=!0)}},t.prototype.loadCharacter=function(){this.characterHead=Game.displayStore.getSprite("jet-ski/character-"+this.selectedCharacter+"-head"),this.characterBodyFront=Game.displayStore.getSprite("jet-ski/character-"+this.selectedCharacter+"-body-front"),this.characterBodyBack=Game.displayStore.getSprite("jet-ski/character-"+this.selectedCharacter+"-body-back"),this.characterArm=Game.displayStore.getSprite("jet-ski/character-"+this.selectedCharacter+"-arm"),this.characterLegTop=Game.displayStore.getSprite("jet-ski/character-"+this.selectedCharacter+"-leg-top"),this.characterLegBottom=Game.displayStore.getSprite("jet-ski/character-"+this.selectedCharacter+"-leg-bottom")},t.prototype.hitRamp=function(){Game.stopSound("jet-ski/speedboat-decelerate.mp3"),Game.stopSound("jet-ski/jetski-decelerate.mp3");var e=[{id:"jet-ski/plastic-thunk1.mp3"},{id:"jet-ski/plastic-thunk2.mp3"},{id:"jet-ski/plastic-thunk3.mp3"},{id:"jet-ski/plastic-thunk4.mp3"}],t=Game.getRandom(0,3,!0);Game.playSound(e[t].id,e[t].vol||1)},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"pause-button":this.pause(!1);break;case"playbuttonlarge":this.resume()}},t.prototype.upOnUI=function(t){switch(e.prototype.upOnUI.call(this,t),t.id){case"jet-ski-flip-button":this.flipAction()}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){if(e.prototype.tick.call(this),1!=this.wristbandOverlay.isOpen&&1!=this.controlsOverlayOn){1==this.showStartWaterSpray&&++this.startWaterSprayTimer>=this.startWaterSprayLimit&&(this.showStartWaterSpray=!1),this.mainHolder.position.x<-1200&&0==this.timer.started&&this.timer.start(),1==this.timeBarSoundPlaying&&++this.timeBarSoundTimer>=this.timeBarSoundLimit&&(this.timeBarSoundTimer=0,this.timeBarSoundPlaying=!1),this.bgLayer.tick(t.smoothing,this.mainHolder.position),this.mgLayer.tick(t.smoothing,this.mainHolder.position),this.fgLayer.tick(t.smoothing,this.mainHolder.position),this.skyLayer.tick(t.smoothing,this.mainHolder.position),this.seaBackLayer.tick(t.smoothing,this.mainHolder.position),this.seaMiddleLayer.tick(t.smoothing,this.mainHolder.position),this.seaFrontLayer.tick(t.smoothing,this.mainHolder.position),this.seaFrontBottomLayer.tick(t.smoothing,this.mainHolder.position),this.physicsManager.stepPhysics(),this.jumpManager.tick(t.smoothing,this.mainHolder.position),this.inputManager.tick(),this.positionViewport(),this.jetSkiAnimationCheck(),this.timeBar(),this.sparkle1.rotation+=.03,this.sparkle2.rotation-=.02,1==this.performingPUeffect&&(this.puEffectSparkle1.rotation+=.1,this.puEffectSparkle2.rotation-=.06,this.puEffectHolder.rotation=-this.jetskiBody.rotation),this.jetFramesFrontHolder1.position.x=this.jetskiBody.position.x-20,this.jetFramesFrontHolder1.position.y=this.seaFrontLayer.container.position.y-60;new PIXI.Point(this.mainHolder.toLocal(new PIXI.Point,this.particlePoint).y);this.sprayParticlesHolder&&(this.sprayParticlesHolder.position.x=this.mainHolder.toLocal(new PIXI.Point,this.particlePoint).x,this.sprayParticlesHolder.position.y=this.mainHolder.toLocal(new PIXI.Point,this.particlePoint).y),this.bubbleParticlesHolder&&1==this.bubbleParticles.enabled&&(this.bubbleParticlesHolder.position.x=this.mainHolder.toLocal(new PIXI.Point(35,0),this.characterHead).x,this.bubbleParticlesHolder.position.y=this.mainHolder.toLocal(new PIXI.Point(0,35),this.characterHead).y);var i;this.jetFramesFrontHolder2.position.y=this.seaFrontLayer.container.position.y-42,this.physicsManager.submergedHullWidth-270>-130&&this.physicsManager.submergedHullWidth-270<30&&(i=this.physicsManager.submergedHullWidth-270),0==this.powerupIsActive?this.jetFramesFrontHolder2.position.x=this.jetskiBody.position.x+i:this.jetFramesFrontHolder2.position.x=this.jetskiBody.position.x+i+30;for(var s=0;s<this.tickets.length;s++){var o=this.tickets[s];o.body&&0==o.available&&o.tick(),o.body&&0==o.available&&o.body.position[0]<this.jetskiBody.position.x-500&&o.destroy()}if(this.updateScore(Math.round(Math.abs(this.mainHolder.position.x/350))),this.jetskiBody.position.x>this.landedPosX+this.rampSpawnBuffer&&1==this.physicsManager.isTouchingWater&&1==this.jumpManager.allowSpawn&&(this.jumpManager.spawnRamp(),this.spawnTicket(this.jumpManager.lastSpawnedRamp.container.position)),this.landingAllowedCounter<150&&0==this.landingAllowed?this.landingAllowedCounter+=1:this.landingAllowed=!0,0==this.physicsManager.isTouchingWater&&this.physicsManager.jetskiBody.velocity[0]>100){0==this.countingAir&&1==this.landingAllowed&&(this.airborneStartingRotation=this.jetskiBody.rotation,this.spinCount=0,this.airCount=0,this.spinMultiplier=1,this.countingAir=!0,this.airBarActive=!0);var a=Math.round((this.airborneStartingRotation-this.jetskiBody.rotation)/(1.7*Math.PI));this.spinCount<a&&this.completedInAirSpin(),1==this.timer.started&&(this.airCount+=1)}else if(1==this.countingAir){Math.round((this.airborneStartingRotation-this.jetskiBody.rotation)/(1.7*Math.PI));this.jetSkiHasLanded(),this.airCount=0,this.countingAir=!1}1==this.physicsManager.isDrowning?0==this.flipEnabled&&(this.flipEnabled=!0,this.flipping=!1,this.landedCorrectly=!1,this.resetScoreMultiplier(.5),this.uiModeSwitchDelay=this.killTween(this.uiModeSwitchDelay),this.uiModeSwitchDelay=TweenMax.delayedCall(.75,function(){"gameplay-jetski-flip"!=this.game.ui.mode&&(this.loseLife(),this.bubbleParticlesHolder.alpha=1,this.bubbleParticles.enable(),this.heartNumber>0&&this.game.ui.setUI("gameplay-jetski-flip"))},null,this)):1==this.flipEnabled&&(this.flipEnabled=!1,this.uiModeSwitchDelay=this.killTween(this.uiModeSwitchDelay),this.uiModeSwitchDelay=TweenMax.delayedCall(.5,function(){"gameplay-jetski"!=this.game.ui.mode&&(this.game.ui.setUI("gameplay-jetski"),this.ableToLoseHeart=!0,this.game.powerUpManager.resumeGame())},null,this))}},t.prototype.resetTimeBarBits=function(){this.airBarActive=!0;for(var e=0;e<this.timeBarBits.length;e++)this.timeBarBits[e].tint=this.multiplierColours[0],this.timeBarBits[e].position.x=0,this.timeBarBits[e].position.y=this.timeBarBitsPosY[e],this.timeBarBits[e].scale.x=this.timeBarBits[e].scale.y=1,this.timeBarBits[e].alpha=0,this.timeBarBits[e].rotation=0},t.prototype.timeBar=function(){if(0!=this.airBarActive&&(this.blockIndex=Math.ceil(this.airCount/22),this.blockIndex>5&&(this.blockIndex=5),0==this.blockIndex&&1==this.timeBarReset&&0==this.physicsManager.isDrowning&&(this.resetTimeBarBits(),this.timeBarReset=!1),this.blockIndex>0&&(this.timeBarReset=!0),0==this.physicsManager.isDrowning&&1==this.countingAir)){for(var e=0;e<this.timeBarBits.length;e++)if(this.blockIndex>4-e&&0==this.timeBarBits[e].alpha)switch(this.timeBarBits[e].alpha=1,this.blockIndex){case 1:Game.playSound("jet-ski/time-bar-0.mp3",1);break;case 2:Game.playSound("jet-ski/time-bar-1.mp3",1);break;case 3:Game.playSound("jet-ski/time-bar-2.mp3",1);break;case 4:Game.playSound("jet-ski/time-bar-3.mp3",1);break;case 5:Game.playSound("jet-ski/time-bar-4.mp3",1)}this.timeBarBottomHandle1.rotation+=.4,this.timeBarBottomHandle2.rotation+=.1}},t.prototype.jetSkiAnimationCheck=function(){var e=!1;this.physicsManager.jetskiBody.force[0]>=100&&1==this.physicsManager.isTouchingWater&&this.physicsManager.jetskiBody.velocity[0]>0&&0==this.physicsManager.isDrowning&&(e=!0),e!=this.jetSkiAnimationPlaying&&(this.jetSkiAnimationPlay(e),this.jetSkiAnimationPlaying=e);var t=!1;1==this.physicsManager.isTouchingWater&&(t=!0),t!=this.jetSkiAnimationIdlePlaying&&(this.jetSkiAnimationIdlePlay(t),this.jetSkiAnimationIdlePlaying=t);var i=!1;this.startWaterSprayTimer>=this.startWaterSprayLimit&&(i=!0),i!=this.jetSkiAnimationLoopingPlaying&&(this.jetSkiAnimationLoopingPlay(i),this.jetSkiAnimationLoopingPlaying=i),this.physicsManager.jetskiBody.angularForce<=0&&Game.stopSound("jet-ski/jetski-constant-in-air.mp3")},t.prototype.jetSkiAnimationIdlePlay=function(e){if(1==e){if(this.splashFrames.alpha=1,this.splashFrames.play(),Game.stopSound("jet-ski/jetski-constant-in-air.mp3"),this.splashParticles){var t={lowerAngle:260+this.physicsManager.jetskiBody.velocity[0]/20,upperAngle:360,lowerVelocity:100*this.physicsManager.jetskiBody.velocity[0]/80,upperVelocity:200*this.physicsManager.jetskiBody.velocity[0]/80,endScale:0,lowerStartScale:2+this.physicsManager.jetskiBody.velocity[0]/180,upperStartScale:2.5+this.physicsManager.jetskiBody.velocity[0]/180,friction:.04,XstartRange:120,YstartRange:10,time:1,gravity:1e3,stagger:400,cap:90,endAlpha:0,rotationPower:2};this.splashParticles.updateParams(t,this.splashParticles),this.splashParticles.fire(),this.splashParticles.container.position.x=this.jetskiBody.position.x+this.physicsManager.jetskiBody.velocity[0]/5}this.jetFramesIdle.alpha=1;var i=[{id:"jet-ski/small-low-splash.mp3"},{id:"jet-ski/deep-splash.mp3"},{id:"jet-ski/large-splash.mp3"}],s=Game.getRandom(0,2,!0);Game.playSound(i[s].id,1),Game.stopSound("jet-ski/jetski-idle.mp3"),Game.stopSound("jet-ski/speedboat-idle.mp3"),Game.fadeSound("jet-ski/howling-wind.mp3",.2,0),1==this.powerupIsActive?Game.playSound("jet-ski/speedboat-idle.mp3",.7):Game.playSound("jet-ski/jetski-idle.mp3",.5)}else this.jetFramesEnd.alpha=0,this.jetFramesEndFront.alpha=0,this.jetFramesEndFront2.alpha=0,this.jetFramesLooping.alpha=0,this.jetFramesLoopingFront.alpha=0,this.jetFramesIdle.alpha=0,this.splashFrames.gotoAndStop(0),this.splashFrames.alpha=0,0==Game.isLowEndIPad&&this.sprayParticles.disable(),Game.stopSound("jet-ski/howling-wind.mp3"),Game.setSoundVolume("jet-ski/howling-wind.mp3",0),Game.fadeSound("jet-ski/howling-wind.mp3",.2,1),Game.playSound("jet-ski/howling-wind.mp3")},t.prototype.jetSkiAnimationLoopingPlay=function(e){1==e&&(this.jetFramesLooping.alpha=1,this.jetFramesLoopingFront.alpha=1,this.jetFramesLoopingFront2.alpha=1,this.jetFramesStart.alpha=0,this.jetFramesStartFront.alpha=0,this.jetFramesStartFront2.alpha=0,1==this.powerupIsActive?Game.playSound("jet-ski/speedboat-constant.mp3",.8):Game.playSound("jet-ski/jetski-constant.mp3",.8))},t.prototype.jetSkiAnimationPlay=function(e){if(1==e){if(this.showStartWaterSpray=!0,0==Game.isLowEndIPad&&this.sprayParticles&&0==this.sprayParticles.enabled){var t;t=1==this.powerupIsActive?{cap:90,time:.3,lowerAngle:-125,upperAngle:-105,XstartRange:7,YstartRange:5,gravity:1500,startAlpha:.9,xPos:0,yPos:0,lowerVelocity:800,upperVelocity:1100,endScale:0,lowerStartScale:1,upperStartScale:2.5,rotationPower:1}:{cap:90,time:1,lowerAngle:-120,upperAngle:-110,XstartRange:7,YstartRange:5,gravity:1500,startAlpha:.9,xPos:0,yPos:0,lowerVelocity:700,upperVelocity:1e3,endScale:0,lowerStartScale:.75,upperStartScale:2,rotationPower:1},this.sprayParticles.updateParams(t,this.sprayParticles),this.sprayParticles.enable()}this.jetFramesStart.play(),this.jetFramesStartFront.play(),this.jetFramesStartFront2.play(),this.jetFramesStart.alpha=1,this.jetFramesStartFront.alpha=1,this.jetFramesStartFront2.alpha=1,this.jetFramesEnd.gotoAndStop(0),this.jetFramesEndFront.gotoAndStop(0),this.jetFramesEndFront2.gotoAndStop(0),this.jetFramesEnd.alpha=0,this.jetFramesEndFront.alpha=0,this.jetFramesEndFront2.alpha=0,Game.stopSound("jet-ski/jetski-accelerate.mp3"),Game.stopSound("jet-ski/speedboat-accelerate.mp3"),Game.stopSound("jet-ski/jetski-idle.mp3"),Game.stopSound("jet-ski/speedboat-idle.mp3"),Game.stopSound("jet-ski/ocean-waves-on-jetski.mp3"),Game.fadeSound("jet-ski/ocean-waves-on-jetski.mp3",0,0),1==this.powerupIsActive?(Game.playSound("jet-ski/speedboat-accelerate.mp3",1),Game.playSound("jet-ski/ocean-waves-on-jetski.mp3",1)):(Game.playSound("jet-ski/jetski-accelerate.mp3",.8),Game.playSound("jet-ski/ocean-waves-on-jetski.mp3",.8))}else this.jetFramesStart.alpha=0,this.jetFramesStartFront.alpha=0,this.jetFramesStartFront2.alpha=0,this.jetFramesLooping.alpha=0,this.jetFramesLoopingFront.alpha=0,this.jetFramesLoopingFront2.alpha=0,this.showStartWaterSpray=!1,this.jetFramesStart.alpha<=0&&(this.jetFramesStart.alpha=0,this.jetFramesStartFront.alpha=0,this.jetFramesStartFront2.alpha=0,this.startWaterSprayTimer>=15&&(this.jetFramesEnd.play(),this.jetFramesEndFront.play(),this.jetFramesEndFront2.play(),this.jetFramesEnd.alpha=1,this.jetFramesEndFront.alpha=1,this.jetFramesEndFront2.alpha=1,1==this.powerupIsActive?(Game.playSound("jet-ski/speedboat-decelerate.mp3",1),Game.playSound("jet-ski/speedboat-idle.mp3",.7)):(Game.playSound("jet-ski/jetski-decelerate.mp3",.8),Game.playSound("jet-ski/jetski-idle.mp3",.5)),this.physicsManager.jetskiBody.angularForce>2e3&&Game.playSound("jet-ski/jetski-constant-in-air.mp3",.8),Game.stopSound("jet-ski/jetski-constant.mp3"),Game.stopSound("jet-ski/speedboat-constant.mp3"),Game.stopSound("jet-ski/ocean-waves-on-jetski.mp3"),0==Game.isLowEndIPad&&this.sprayParticles.disable()),this.startWaterSprayTimer=0,this.jetFramesStart.gotoAndStop(0),this.jetFramesStartFront.gotoAndStop(0),this.jetFramesStartFront2.gotoAndStop(0),0==Game.isLowEndIPad&&this.sprayParticles.disable())},t.prototype.positionViewport=function(){if(1!=this.physicsManager.flipping){var e=new PIXI.Point((-this.jetskiBody.position.x-70-this.mainHolder.position.x+this.mainHolderPos.x)/t.cameraMotionEaseAmount,(400-this.jetskiBody.position.y-this.mainHolder.position.y+this.mainHolderPos.y)/t.cameraMotionEaseAmount);this.mainHolder.position.y=this.mainHolder.position.y+e.y,this.mainHolder.position.x=this.mainHolder.position.x+e.x}},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&("up"==t?this.upKeyDown():"down"==t?this.downKeyDown():"spacebar"==t&&this.spaceKeyDown(),this.inputManager.keyDown(t))},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&("up"==t?this.upKeyUp():"down"==t&&this.downKeyUp(),this.inputManager.keyUp(t),"spacebar"==t&&"gameplay-jetski-flip"==this.game.ui.mode&&this.flipAction())},t.prototype.spaceKeyDown=function(){},t.prototype.upKeyDown=function(){},t.prototype.downKeyDown=function(){},t.prototype.upKeyUp=function(){},t.prototype.downKeyUp=function(){},t.prototype.hideJetski=function(){this.jetskiBody.alpha=0,this.characterHead.alpha=0},t.prototype.flashJetski=function(){var e=new RoughEase({template:Power0.easeOut,strength:10,points:6,taper:"none",randomize:!1,clamp:!0});TweenMax.to([this.jetskiBody,this.characterHead],1,{alpha:1,ease:e})},t.prototype.flipAction=function(){1==this.flipEnabled&&0==this.flipping&&0==this.wristbandOverlay.isOpen&&(this.resetScoreMultiplier(0),this.airBarActive=!1,this.flipping=!0,this.physicsManager.flipJetski(),this.game.ui.setUI("gameplay-jetski"),this.game.powerUpManager.resumeGame(),this.ableToLoseHeart=!0,this.flipEnableDelay=this.killTween(this.flipEnableDelay),this.flipEnableDelay=TweenMax.delayedCall(1,function(){this.flipEnabled=!1,this.flipping=!1,this.airBarActive=!0},null,this))},t.prototype.pause=function(t){0==t&&(Game.pauseSound("jet-ski/music.mp3"),e.prototype.pause.call(this,t),this.pauseResumeTween(this.scoreMultiplierTimeline,"pause"),this.pauseResumeTween(this.checkpointTimeline,"pause"),this.pauseResumeTween(this.gameOverDelay,"pause"),this.pauseResumeTween(this.flipEnableDelay,"pause"),this.pauseResumeTween(this.uiModeSwitchDelay,"pause"),this.pauseResumeTween(this.healthCoolDownTimer,"pause"),this.pauseResumeTween(this.checkpointTimer,"pause"),this.pauseResumeTween(this.activatePowerupTimeline,"pause"),this.pauseResumeTween(this.addingTimeTimeline,"pause"),this.pauseResumeTween(this.timeBarTimeline,"pause"),this.pauseResumeTween(this.airBarActiveDelay,"pause")),Game.pauseSound("jet-ski/jetski-idle.mp3"),Game.pauseSound("jet-ski/small-low-splash.mp3"),Game.pauseSound("jet-ski/deep-splash.mp3"),Game.pauseSound("jet-ski/large-splash.mp3"),Game.pauseSound("jet-ski/ambience-ocean-waves.mp3"),Game.pauseSound("jet-ski/combo-bonus.mp3"),Game.pauseSound("jet-ski/howling-wind.mp3"),Game.pauseSound("jet-ski/jetski-constant.mp3"),Game.pauseSound("jet-ski/jetski-constant-in-air.mp3"),Game.pauseSound("jet-ski/jetski-accelerate.mp3"),Game.pauseSound("jet-ski/jetski-idle.mp3"),Game.pauseSound("jet-ski/jetski-decelerate.mp3"),Game.pauseSound("jet-ski/ocean-waves-on-jetski.mp3"),Game.pauseSound("jet-ski/jetski-start.mp3"),Game.pauseSound("jet-ski/guitar-land-1.mp3"),Game.pauseSound("jet-ski/time-add.mp3"),Game.pauseSound("jet-ski/time-subtract.mp3"),Game.pauseSound("jet-ski/time-bar-1.mp3"),Game.pauseSound("jet-ski/time-bar-2.mp3"),Game.pauseSound("jet-ski/time-bar-3.mp3"),Game.pauseSound("jet-ski/time-bar-4.mp3"),Game.pauseSound("jet-ski/speedboat-idle.mp3"),Game.pauseSound("jet-ski/speedboat-accelerate.mp3"),Game.pauseSound("jet-ski/speedboat-constant.mp3"),Game.pauseSound("jet-ski/speedboat-decelerate.mp3"),Game.pauseSound("jet-ski/tomika-ready.mp3"),Game.pauseSound("jet-ski/tomika-close-call.mp3"),Game.pauseSound("jet-ski/tomika-so-cool.mp3"),Game.pauseSound("jet-ski/tomika-nothings-gonna-stop-us-now.mp3"),Game.pauseSound("jet-ski/summer-lets-do-this.mp3"),Game.pauseSound("jet-ski/summer-lose.mp3"),Game.pauseSound("jet-ski/summer-on-point.mp3"),Game.pauseSound("jet-ski/summer-got-this.mp3"),Game.pauseSound("jet-ski/freddie-got-this.mp3"),Game.pauseSound("jet-ski/freddie-whats-happening.mp3"),Game.pauseSound("jet-ski/freddie-locked-and-loaded.mp3"),Game.pauseSound("jet-ski/freddie-ha-ha.mp3"),Game.pauseSound("jet-ski/lawrence-i-got-this.mp3"),Game.pauseSound("jet-ski/lawrence-no-way.mp3"),Game.pauseSound("jet-ski/lawrence-lets-go.mp3"),Game.pauseSound("jet-ski/lawrence-got-this.mp3"),Game.pauseSound("jet-ski/zack-oh-no.mp3"),Game.pauseSound("jet-ski/zack-amazing.mp3"),Game.pauseSound("jet-ski/zack-school-of-rock.mp3"),this.seaweedAnimation1.stop(),this.seaweedAnimation2.stop(),this.seaweedAnimation3.stop(),this.jetFramesLooping.stop(),this.jetFramesLoopingFront.stop(),this.jetFramesLoopingFront2.stop(),this.jetFramesIdle.stop(),this.timer.pause(),this.physicsManager.pause(),this.sprayParticles&&this.sprayParticles.pause(),this.splashParticles&&this.splashParticles.pause(),this.bubbleParticles&&this.bubbleParticles.pause()},t.prototype.resume=function(){e.prototype.resume.call(this),this.pauseResumeTween(this.checkpointTimeline,"resume"),this.pauseResumeTween(this.flipEnableDelay,"resume"),this.pauseResumeTween(this.uiModeSwitchDelay,"resume"),this.pauseResumeTween(this.scoreMultiplierTimeline,"resume"),this.pauseResumeTween(this.checkpointTimeline,"resume"),this.pauseResumeTween(this.gameOverDelay,"resume"),this.pauseResumeTween(this.flipEnableDelay,"resume"),this.pauseResumeTween(this.uiModeSwitchDelay,"resume"),this.pauseResumeTween(this.healthCoolDownTimer,"resume"),this.pauseResumeTween(this.checkpointTimer,"resume"),this.pauseResumeTween(this.activatePowerupTimeline,"resume"),this.pauseResumeTween(this.addingTimeTimeline,"resume"),this.pauseResumeTween(this.timeBarTimeline,"resume"),this.pauseResumeTween(this.airBarActiveDelay,"resume"),Game.resumeSound("jet-ski/small-low-splash.mp3"),Game.resumeSound("jet-ski/deep-splash.mp3"),Game.resumeSound("jet-ski/large-splash.mp3"),Game.resumeSound("jet-ski/ambience-ocean-waves.mp3"),Game.resumeSound("jet-ski/combo-bonus.mp3"),Game.resumeSound("jet-ski/howling-wind.mp3"),Game.resumeSound("jet-ski/jetski-constant.mp3"),Game.resumeSound("jet-ski/jetski-constant-in-air.mp3"),Game.resumeSound("jet-ski/jetski-accelerate.mp3"),Game.resumeSound("jet-ski/jetski-idle.mp3"),Game.resumeSound("jet-ski/jetski-decelerate.mp3"),Game.resumeSound("jet-ski/ocean-waves-on-jetski.mp3"),Game.resumeSound("jet-ski/music.mp3"),Game.resumeSound("jet-ski/jetski-start.mp3"),Game.resumeSound("jet-ski/guitar-land-1.mp3"),Game.resumeSound("jet-ski/time-add.mp3"),Game.resumeSound("jet-ski/time-subtract.mp3"),Game.resumeSound("jet-ski/time-bar-1.mp3"),Game.resumeSound("jet-ski/time-bar-2.mp3"),Game.resumeSound("jet-ski/time-bar-3.mp3"),Game.resumeSound("jet-ski/time-bar-4.mp3"),Game.resumeSound("jet-ski/speedboat-idle.mp3"),Game.resumeSound("jet-ski/speedboat-accelerate.mp3"),Game.resumeSound("jet-ski/speedboat-constant.mp3"),Game.resumeSound("jet-ski/speedboat-decelerate.mp3"),Game.resumeSound("jet-ski/tomika-ready.mp3"),Game.resumeSound("jet-ski/tomika-close-call.mp3"),Game.resumeSound("jet-ski/tomika-so-cool.mp3"),Game.resumeSound("jet-ski/tomika-nothings-gonna-stop-us-now.mp3"),Game.resumeSound("jet-ski/summer-lets-do-this.mp3"),Game.resumeSound("jet-ski/summer-lose.mp3"),Game.resumeSound("jet-ski/summer-on-point.mp3"),Game.resumeSound("jet-ski/summer-got-this.mp3"),Game.resumeSound("jet-ski/freddie-got-this.mp3"),Game.resumeSound("jet-ski/freddie-whats-happening.mp3"),Game.resumeSound("jet-ski/freddie-locked-and-loaded.mp3"),Game.resumeSound("jet-ski/freddie-ha-ha.mp3"),Game.resumeSound("jet-ski/lawrence-i-got-this.mp3"),Game.resumeSound("jet-ski/lawrence-no-way.mp3"),Game.resumeSound("jet-ski/lawrence-lets-go.mp3"),Game.resumeSound("jet-ski/lawrence-got-this.mp3"),Game.resumeSound("jet-ski/zack-oh-no.mp3"),Game.resumeSound("jet-ski/zack-amazing.mp3"),Game.resumeSound("jet-ski/zack-school-of-rock.mp3"),this.seaweedAnimation1.play(),this.seaweedAnimation2.play(),this.seaweedAnimation3.play(),this.jetFramesLooping.play(),this.jetFramesLoopingFront.play(),this.jetFramesLoopingFront2.play(),this.jetFramesIdle.play(),this.timer.resume(),this.physicsManager.resume(),this.game.ui.setUI("gameplay-jetski"),this.sprayParticles&&this.sprayParticles.resume(),this.splashParticles&&this.splashParticles.resume(),this.bubbleParticles&&this.bubbleParticles.resume()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tutorialOverlay.destroy(),this.scoreMultiplierTimeline=this.killTween(this.scoreMultiplierTimeline),this.checkpointTimeline=this.killTween(this.checkpointTimeline),this.gameOverDelay=this.killTween(this.gameOverDelay),this.flipEnableDelay=this.killTween(this.flipEnableDelay),this.uiModeSwitchDelay=this.killTween(this.uiModeSwitchDelay),this.healthCoolDownTimer=this.killTween(this.healthCoolDownTimer),this.checkpointTimer=this.killTween(this.checkpointTimer),this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.addingTimeTimeline=this.killTween(this.addingTimeTimeline),this.timeBarTimeline=this.killTween(this.timeBarTimeline),this.airBarActiveDelay=this.killTween(this.airBarActiveDelay),this.sprayParticles&&this.sprayParticles.destroy(),this.splashParticles&&this.splashParticles.destroy(),this.bubbleParticles&&this.bubbleParticles.destroy(),Game.stopSound("jet-ski/small-low-splash.mp3"),Game.stopSound("jet-ski/deep-splash.mp3"),Game.stopSound("jet-ski/large-splash.mp3"),Game.stopSound("jet-ski/ambience-ocean-waves.mp3"),Game.stopSound("jet-ski/combo-bonus.mp3"),Game.stopSound("jet-ski/howling-wind.mp3"),Game.stopSound("jet-ski/jetski-constant.mp3"),Game.stopSound("jet-ski/jetski-constant-in-air.mp3"),Game.stopSound("jet-ski/jetski-accelerate.mp3"),Game.stopSound("jet-ski/jetski-idle.mp3"),Game.stopSound("jet-ski/jetski-decelerate.mp3"),Game.stopSound("jet-ski/ocean-waves-on-jetski.mp3"),Game.stopSound("jet-ski/jetski-start.mp3"),Game.stopSound("jet-ski/guitar-land-1.mp3"),Game.stopSound("jet-ski/time-add.mp3"),Game.stopSound("jet-ski/time-subtract.mp3"),Game.stopSound("jet-ski/time-bar-1.mp3"),Game.stopSound("jet-ski/time-bar-2.mp3"),Game.stopSound("jet-ski/time-bar-3.mp3"),Game.stopSound("jet-ski/time-bar-4.mp3"),Game.stopSound("jet-ski/speedboat-idle.mp3"),Game.stopSound("jet-ski/speedboat-accelerate.mp3"),Game.stopSound("jet-ski/speedboat-constant.mp3"),Game.stopSound("jet-ski/speedboat-decelerate.mp3"),Game.stopSound("jet-ski/tomika-ready.mp3"),Game.stopSound("jet-ski/tomika-close-call.mp3"),Game.stopSound("jet-ski/tomika-so-cool.mp3"),Game.stopSound("jet-ski/tomika-nothings-gonna-stop-us-now.mp3"),Game.stopSound("jet-ski/summer-lets-do-this.mp3"),Game.stopSound("jet-ski/summer-lose.mp3"),Game.stopSound("jet-ski/summer-on-point.mp3"),Game.stopSound("jet-ski/summer-got-this.mp3"),Game.stopSound("jet-ski/freddie-got-this.mp3"),Game.stopSound("jet-ski/freddie-whats-happening.mp3"),Game.stopSound("jet-ski/freddie-locked-and-loaded.mp3"),Game.stopSound("jet-ski/freddie-ha-ha.mp3"),Game.stopSound("jet-ski/lawrence-i-got-this.mp3"),Game.stopSound("jet-ski/lawrence-no-way.mp3"),Game.stopSound("jet-ski/lawrence-lets-go.mp3"),Game.stopSound("jet-ski/lawrence-got-this.mp3"),Game.stopSound("jet-ski/zack-oh-no.mp3"),Game.stopSound("jet-ski/zack-amazing.mp3"),Game.stopSound("jet-ski/zack-school-of-rock.mp3"),Game.displayStore.returnPooledItem(this.jetFramesLooping),Game.displayStore.returnPooledItem(this.jetFramesStart),Game.displayStore.returnPooledItem(this.jetFramesEnd),Game.displayStore.returnPooledItem(this.jetFramesLoopingFront),Game.displayStore.returnPooledItem(this.jetFramesStartFront),Game.displayStore.returnPooledItem(this.jetFramesEndFront),Game.displayStore.returnPooledItem(this.jetFramesLoopingFront2),Game.displayStore.returnPooledItem(this.jetFramesStartFront2),Game.displayStore.returnPooledItem(this.jetFramesEndFront2);for(t=0;t<this.timeBarBits.length;t++)Game.displayStore.returnPooledItem(this.timeBarBits[t]);Game.displayStore.returnPooledItem(this.addTimeText),Game.displayStore.returnPooledItem(this.timer.timeText),this.seaMiddleLayer.container.removeChild(this.checkpointHolder),this.seaFrontLayer.chunks[2].removeChild(this.seaweedAnimation1),this.seaMiddleLayer.chunks[4].removeChild(this.seaweedAnimation2),this.seaMiddleLayer.chunks[1].removeChild(this.seaweedAnimation3),Game.displayStore.returnPooledItem(this.seaweedAnimation1),Game.displayStore.returnPooledItem(this.seaweedAnimation2),Game.displayStore.returnPooledItem(this.seaweedAnimation3),this.physicsManager.destroy(),this.inputManager.destroy(),this.timer.destroy();for(var t=0;t<this.heartIcons.length;t++)Game.displayStore.returnPooledItem(this.heartIcons[t].heart)},t.smoothing=5,t.cameraMotionEaseAmount=3,t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),LaserCaveGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="laserCaveGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){switch(e.prototype.init.call(this),Game.coreData.setCurrentRide("laser-cave"),this.turtleColour=Game.coreData.getSelectedCharacter()||"purple",Game.playSound("laser-cave/music.mp3",.6),this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),this.tutorialViewed=Game.coreData.getGameTutorialViewed("laser-cave"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.enemySignalFrames=Game.displayStore.getAnimatedSprite("laser-cave/signal-frames"),this.enemySignalFrames.loop=!0,this.enemySignalFrames.animationSpeed=.3,this.enemySignalFrames.play(),this.powerupOn=!1,this.powerupLaserFiring=!1,this.powerupLaserFireCount=0,this.powerupLaserFireLimit=5,this.rearSparkCounter=0,this.fireAllowed=!0,this.allowLaserFade=!1,this.laserSightContact=!1,this.gameOverTriggered=!1,this.turtleZapping=!1,this.turtleZappingCounter=0,this.turtleZappingLimit=60,this.zapAnimOn=!1,this.screenShaking=!1,this.screenShakingCounter=0,this.screenShakeChangeLocCounter=0,this.screenShakeChangeLocLimit=5,this.screenShakeEaseAmount=8,this.screenShakeTargetPos=new PIXI.Point(0,0),this.calcDistanceCounter=0,this.calcDistanceCounterLimit=30,this.gunCoolDownLimit=50,this.gunCoolDownCounter=this.gunCoolDownLimit,this.fadeLaserDelayCounter=0,this.fadeLaserDelayLimit=10,this.particleAlpha=0,this.laserSightConactPos=[0,0],this.distance=0,this.displayDistance=0,this.distanceString="0m",this.difficultyLevel=0,this.difficultyLevelCounter=0,this.difficultyLevelLimit=Game.fps/60*600,this.laserSightPoint=Game.displayStore.getSprite("laser-cave/laser-sight-point"),this.laserSightPoint.scale.x=2,this.laserSightPoint.scale.y=2,this.scoreHolder=Game.displayStore.getContainer("laser-cave/score-holder"),this.scoreText=Game.displayStore.getBitmapText("laser-cave/score-font"),this.scoreHolder=Game.displayStore.getContainer("laser-cave/score-holder"),this.scoreText=Game.displayStore.getBitmapText("laser-cave/score-font"),this.puEffectHolder=Game.displayStore.getContainer("laser-cave/powerup-effect"),this.puEffectHolder.scale.x=this.puEffectHolder.scale.y=0,this.puEffectSparkle1=this.puEffectHolder.getSprite("laser-cave/pu-sparkle-1"),this.puEffectSparkle2=this.puEffectHolder.getSprite("laser-cave/pu-sparkle-2"),this.puEffectGlow=Game.displayStore.getSprite("laser-cave/pu-glow"),this.puEffectSparkle1.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectSparkle2.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectGlow.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectGlow.scale.x=0,this.puEffectGlow.scale.y=0,this.scoreText.scale.x=this.scoreText.scale.y=.75,this.scoreText.position.x=this.scoreHolder.position.x-30,this.scoreText.position.y=this.scoreHolder.position.y-37,this.container.addChild(this.scoreHolder),this.scoreHolder.addChild(this.scoreText),this.scoreHolder.scale.x=this.scoreHolder.scale.y=1,this.scoreHolder.position.y=130,this.scoreHolder.position.x=this.scoreHolder.width/2-20,this.turtleAudioTimer=0,this.turtleAudioLimit=200,this.scoreText.text=this.distanceString,this.gunCooldownMeterHolder=Game.displayStore.getContainer("laser-cave/gun-cooldown-meter-holder"),this.coolDownMeterBG=this.gunCooldownMeterHolder.getSprite("laser-cave/gun-cooldown-meter-bg"),this.coolDownMeterIcon=Game.displayStore.getSprite("laser-cave/gun-cooldown-meter-icon-"+this.turtleColour),this.gunCooldownMeterHolder.addChild(this.coolDownMeterIcon),this.coolDownMeterFill=this.gunCooldownMeterHolder.getSprite("laser-cave/gun-cooldown-meter-fill"),this.coolDownMeterFillOverlay=this.gunCooldownMeterHolder.getSprite("laser-cave/gun-cooldown-meter-fill-overlay"),this.turtleZapAnimation=Game.displayStore.getAnimatedSprite("laser-cave/turtle-zap"),this.turtleZapAnimation.loop=!0,this.turtleZapAnimation.animationSpeed=.4,this.turtleZapStar=Game.displayStore.getSprite("laser-cave/turtle-zap-star"),this.turtleZapStar.visible=!1,this.turtleZapAnimation.tint=16755447,this.turtleZapStar.tint=16755447,this.turtleZapStar.scale.x=this.turtleZapStar.scale.y=2,this.turtleZapStar.alpha=.75,this.turtleZapAnimation.visible=!1,this.turtleZapAnimation.scale.x=1.2,this.turtleZapAnimation.scale.y=1.2,this.enemyBodyEaseAmountTorso=15,this.enemyBodyEaseAmountHead=10,this.enemyBodyEaseAmountArms=12,this.enemyBodyEaseAmountCart=6,this.bumpEnemyCartCounter=0,this.bumpEnemyCartLimit=Game.getRandom(30,90)/(60/Game.fps),this.bumpEnemyBodyCounter=0,this.bumpEnemyBodyLimit=Game.getRandom(5,20)/(60/Game.fps),this.setBackgroundColor(1582130),this.footBotTargetAheadPos=0,this.footBotTargetAheadRange=600,this.laserAlphaEaseAmount=5,this.laserParticleAlphaEaseAmount=50,this.mainHolder=Game.displayStore.getContainer("laser-cave/main-holder"),this.outerHolder=Game.displayStore.getContainer("laser-cave/outer-holder"),this.cartHPos=250,this.turtleColour){case"red":this.turtleTintColour=15075840;break;case"blue":this.turtleTintColour=41956;break;case"orange":this.turtleTintColour=15754496;break;case"purple":this.turtleTintColour=11637956}this.turtleFaceCounter=0,this.turtleFaceLimit=100,this.turtleFaceTimerActive=!1,this.backgroundManager=new LaserCaveBackgroundManager(this,this.mainHolder,this.cartHPos),this.backgroundManager.setUpTintCover(this.turtleTintColour),this.laserSightBeam=Game.displayStore.getSprite("laser-cave/laser-sight-beam"),this.laserSightBeam.alpha=.5,this.centralDivideHolder1=Game.displayStore.getContainer("laser-cave/central-divider-rock-holder"),this.centralDivideHolder1.position.y=Game.stageHeight,this.centralDivideHolder2=Game.displayStore.getContainer("laser-cave/central-divider-rock-holder"),this.centralDivideHolder2.position.y=Game.stageHeight,this.enemyHolder=Game.displayStore.getContainer("laser-cave/enemy-holder"),this.enemyHead=Game.displayStore.getSprite("laser-cave/enemy-head"),this.enemyCart=Game.displayStore.getSprite("laser-cave/enemy-cart"),this.enemyHands=Game.displayStore.getSprite("laser-cave/enemy-hands"),this.enemyTorso=Game.displayStore.getSprite("laser-cave/enemy-torso"),this.enemyHolder.addChild(this.enemyTorso),this.enemyHolder.addChild(this.enemyHead),this.enemyHolder.addChild(this.enemyHands),this.enemyHolder.addChild(this.enemySignalFrames),this.enemyHolder.addChild(this.enemyCart),this.enemyCart.position.y=0,this.enemyTargetCartPosOrig=0,this.enemyTargetCartPos=0,this.enemyTargetTorsoPosOrig=-20,this.enemyTargetHeadPosOrig=-80,this.enemyTargetArmsPosOrig=-20,this.enemyTargetArmsPos=this.enemyTargetArmsPosOrig,this.enemyTargetTorsoPos=this.enemyTargetTorsoPosOrig,this.enemyTargetHeadPos=this.enemyTargetHeadPosOrig,this.enemyTorso.position.x=10,this.enemyTorso.position.y=this.enemyTargetTorsoPosOrig,this.enemyHands.position.x=0,this.enemyHands.position.y=this.enemyTargetArmsPosOrig,this.enemySignalFrames.position.x=-20,this.enemySignalFrames.position.y=this.enemyTargetArmsPosOrig-80,this.enemyHead.position.x=10,this.enemyHead.position.y=this.enemyTargetHeadPosOrig,this.enemySignalFrames.blendMode=PIXI.BLEND_MODES.ADD,this.enemyHolder.position.x=400,this.enemyHolder.position.y=480,this.turtleHandPosX=10,this.turtleHand=Game.displayStore.getSprite("laser-cave/turtle-hand"),this.turtleHand.position.x=this.turtleHandPosX,this.turtleHand.position.y=-60,this.turtleBandanaEnd1=Game.displayStore.getSprite("laser-cave/turtle-1-bandana-tail-1"),this.turtleBandanaEnd2=Game.displayStore.getSprite("laser-cave/turtle-1-bandana-tail-2"),this.turtleHeadHolder=Game.displayStore.getContainer("laser-cave/turtle-head-"+this.turtleColour),this.turtleFaces=new Array,this.turtleFaces.push({sprite:this.turtleHeadHolder.getSprite("laser-cave/turtle-head-1-"+this.turtleColour),id:"neutral"}),this.turtleFaces.push({sprite:this.turtleHeadHolder.getSprite("laser-cave/turtle-head-2-"+this.turtleColour),id:"happy"}),this.turtleFaces.push({sprite:this.turtleHeadHolder.getSprite("laser-cave/turtle-head-3-"+this.turtleColour),id:"sad"}),this.setTurtleFace("neutral"),this.turtleLeg=Game.displayStore.getSprite("laser-cave/turtle-leg-"+this.turtleColour),this.turtleLeg.position.x=55,this.turtleLeg.position.y=-105,this.cartBodyHolder=Game.displayStore.getContainer("laser-cave/cart-body-holder"),this.cartBody=Game.displayStore.getSprite("laser-cave/cart-body-"+this.turtleColour),this.cartBody.position.y=-20,this.gunBreech=Game.displayStore.getSprite("laser-cave/gun-breech"),this.gunBarrel=Game.displayStore.getSprite("laser-cave/gun-barrel"),this.gunBarrelUpgrade=Game.displayStore.getSprite("laser-cave/gun-barrel-upgrade"),this.laserBeam=Game.displayStore.getSprite("laser-cave/laser-beam"),this.laserBeam.width=1e3,this.laserBeam.position.y=-100,this.gunBarrelUpgrade.visible=!1,this.gunBarrel.visible=!0,this.laserMuzzleBlast=Game.displayStore.getSprite("laser-cave/laser-muzzle-blast"),this.laserMuzzleLines=Game.displayStore.getSprite("laser-cave/laser-muzzle-lines"),this.laserBeam.alpha=0,this.cartBodyHolder.addChild(this.turtleHand),this.cartBodyHolder.addChild(this.cartBody),this.cartBodyHolder.addChild(this.turtleLeg),this.cartWheelLeft=Game.displayStore.getSprite("laser-cave/cart-wheel"),this.cartWheelRight=Game.displayStore.getSprite("laser-cave/cart-wheel"),this.enemyLayerHolder=Game.displayStore.getContainer("laser-cave/enemy-layer"),this.enemyLayerHolder.addChild(this.enemyHolder),this.physicsManager=new LaserCavePhysicsManager(this,this.mainHolder),this.physicsManager.initPhysicsWorld(),this.physicsDebugger=new PhysicsDebugger(this,this.mainHolder,this.physicsManager.world),this.inputManager=new LaserCaveInputManager(this,this.gunBreech,this.turtleHead1,this.mainHolder),this.mainHolderPos=new PIXI.Point(this.cartHPos,0),this.cameraMotionEaseAmount=5,this.caveShadowLeft=Game.displayStore.getSprite("laser-cave/cave-edge"),this.caveShadowRight=Game.displayStore.getSprite("laser-cave/cave-edge"),this.caveShadowRight.scale.x=-1,this.caveShadowRight.position.x=Game.stageWidth,this.container.addChild(this.outerHolder),this.container.addChild(this.caveShadowLeft),this.container.addChild(this.caveShadowRight),this.outerHolder.addChild(this.mainHolder),this.outerHolder.setRegPointPixels(this.mainHolderPos.x,this.mainHolderPos.y),this.outerHolder.position.x=this.mainHolderPos.x,this.outerHolder.position.y=this.mainHolderPos.y,this.screenShakeTargetPos.x=this.mainHolderPos.x,this.screenShakeTargetPos.y=this.mainHolderPos.y,this.droneManager=new LaserCaveDroneManager(this,this.mainHolder,this.cartBodyHolder),this.mainHolder.addChild(this.enemyLayerHolder),this.mainHolder.addChild(this.centralDivideHolder1),this.mainHolder.addChild(this.centralDivideHolder2),this.ticketManager=new LaserCaveTicketManager(this,this.mainHolder),this.ticketManager.createTickets(),this.droneManager.createDrones(),this.laserBullets=new Array;for(a=0;a<20;a++){var i=Game.displayStore.getSprite("laser-cave/laser-beam-power-up"),s=this.physicsManager.getLaserBullet();i.position.y=-1e3,i.tint=this.turtleTintColour,i.blendMode=PIXI.BLEND_MODES.ADD,this.mainHolder.addChild(i),this.laserBullets.push({sprite:i,body:s.body,shape:s.shape,active:!1})}this.mainHolder.addChild(this.turtleBandanaEnd1),this.mainHolder.addChild(this.turtleBandanaEnd2),this.mainHolder.addChild(this.cartBodyHolder),this.mainHolder.addChild(this.turtleHeadHolder),this.mainHolder.addChild(this.laserSightBeam),this.mainHolder.addChild(this.laserBeam),this.mainHolder.addChild(this.gunBreech),this.mainHolder.addChild(this.gunBarrel),this.mainHolder.addChild(this.gunBarrelUpgrade),this.mainHolder.addChild(this.puEffectGlow),this.mainHolder.addChild(this.puEffectHolder),this.mainHolder.addChild(this.laserMuzzleBlast),this.mainHolder.addChild(this.laserMuzzleLines),this.mainHolder.addChild(this.laserSightPoint),this.rearSparkParticles=new Array;for(a=0;a<30;a++){i=Game.displayStore.getSprite("laser-cave/back-spark");this.rearSparkParticles.push({active:!1,sprite:i}),this.rearSparkParticles[a].sprite.position.y=-5e3,this.rearSparkParticles[a].sprite.tint=16760832,this.rearSparkParticles[a].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.container.addChild(this.rearSparkParticles[a].sprite)}if(this.mainHolder.addChild(this.cartWheelLeft),this.mainHolder.addChild(this.cartWheelRight),this.mainHolder.addChild(this.turtleZapAnimation),this.mainHolder.addChild(this.turtleZapStar),this.gunCooldownMeterHolder.position.x=Game.stageWidth-120,this.gunCooldownMeterHolder.position.y=360,this.container.addChild(this.gunCooldownMeterHolder),this.container.addChild(this.scoreHolder),this.laserParticles=new Array,0==Game.isLowEndIPad)for(a=0;a<20;a++){var i=Game.displayStore.getSprite("laser-cave/laser-particle"),o=Game.getRandom(.05,.2);this.laserParticles.push({sprite:i,rotateSpeed:o}),i.position.y=-400,this.laserParticles[a].sprite.tint=this.turtleTintColour,this.laserParticles[a].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.mainHolder.addChild(i)}this.laserSightBeam.tint=8322816,this.laserBeam.tint=this.turtleTintColour,this.laserMuzzleBlast.tint=this.turtleTintColour,this.laserMuzzleLines.tint=this.turtleTintColour,this.turtleZapStar.tint=16266726,this.laserSightPoint.tint=8322816,this.turtleBandanaEnd1.tint=this.turtleTintColour,this.turtleBandanaEnd2.tint=this.turtleTintColour,this.laserSightBeam.blendMode=PIXI.BLEND_MODES.ADD,this.laserBeam.blendMode=PIXI.BLEND_MODES.ADD,this.laserMuzzleBlast.blendMode=PIXI.BLEND_MODES.ADD,this.laserMuzzleLines.blendMode=PIXI.BLEND_MODES.ADD,this.turtleZapStar.blendMode=PIXI.BLEND_MODES.ADD,this.laserSightPoint.blendMode=PIXI.BLEND_MODES.ADD,this.turtleZapAnimation.blendMode=PIXI.BLEND_MODES.ADD,this.foregroundManager=new LaserCaveForegroundManager(this,this.mainHolder,this.centralDivideHolder1,this.centralDivideHolder2,this.cartHPos,this.cartWheelRight,this.cartWheelLeft),this.foregroundManager.setUpTintCover(this.turtleTintColour),this.heartBG=Game.displayStore.getSprite("laser-cave/heart-bg"),this.container.addChild(this.heartBG),this.heartBG.position.x=109,this.heartBG.position.y=50,this.heartIcons=new Array;for(var a=0;a<3;a++)this.heartIcons.push({heart:Game.displayStore.getSprite("laser-cave/heart-icon"),active:!0}),this.container.addChild(this.heartIcons[a].heart),this.heartIcons[a].heart.position.x=100,this.heartIcons[a].heart.position.y=50,this.heartIcons[a].heart.visible=!0,this.heartIcons[a].heart.scale.x=0,this.heartIcons[a].heart.scale.y=0;this.heartIcons[0].heart.position.x-=70,this.heartIcons[2].heart.position.x+=70,1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("laser-cave",!0)},t.prototype.startGameplay=function(){switch(this.game.ui.triggerEnjoyTheRide(),this.physicsManager.startCartsOnTrack(),this.game.ui.setUI("gameplay-laser-cave"),Game.playSound("laser-cave/cart-looping.mp3",.2),this.game.powerUpManager.startGame(),this.heartTimeline&&(this.heartTimeline=this.killTween(this.heartTimeline)),0==Game.isLowEndIPad?(this.heartTimeline=new TimelineMax,this.heartTimeline.add([TweenMax.to(this.heartIcons[0].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:0}),TweenMax.to(this.heartIcons[1].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:.1}),TweenMax.to(this.heartIcons[2].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:.2})],.5)):(this.heartIcons[0].heart.scale.x=this.heartIcons[0].heart.scale.y=1,this.heartIcons[1].heart.scale.x=this.heartIcons[1].heart.scale.y=1,this.heartIcons[2].heart.scale.x=this.heartIcons[2].heart.scale.y=1),this.turtleColour){case"red":Game.playSound("laser-cave/raph-lets-move.mp3",1);break;case"blue":Game.playSound("laser-cave/leo-lets-go.mp3",1);break;case"orange":Game.playSound("laser-cave/mikey-strap-your-shells-on-tight-bros.mp3",1);break;case"purple":Game.playSound("laser-cave/donnie-check-it.mp3",1)}},t.prototype.setTurtleFace=function(e){for(var t=0;t<this.turtleFaces.length;t++)this.turtleFaces[t].sprite.visible=!1,this.turtleFaces[t].id==e&&(this.turtleFaces[t].sprite.visible=!0)},t.prototype.turtleFaceTimer=function(){++this.turtleFaceCounter>=this.turtleFaceLimit&&(this.turtleFaceTimerActive=!1,this.turtleFaceCounter=0,this.setTurtleFace("neutral"))},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.killDroneParticle=function(e){this.droneManager.killDroneParticle(e)},t.prototype.killLaserBullet=function(e){for(var t=0;t<this.laserBullets.length;t++)if(this.laserBullets[t].body==e){this.laserBullets[t].active=!1,this.laserBullets[t].sprite.position.y=-500,this.physicsManager.removeBodyFromWorld(e);break}},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"pause-button":this.pause(!1);break;case"playbuttonlarge":this.resume()}},t.prototype.downOnUI=function(e){switch(e.id){case"river-rangers-fire-button":this.fireGun()}},t.prototype.upOnUI=function(e){switch(e.id){case"river-rangers-fire-button":this.endFireGun()}},t.prototype.startScreenShake=function(e){this.screenShakingLimit=e/(60/Game.fps),this.screenShaking=!0,this.screenShakingCounter=0,this.screenShakeChangeLocCounter=0},t.prototype.zapTurtle=function(){if(1!=this.zapAnimOn){if(this.turtleZapping=!0,this.turtleZappingCounter=0,this.zapAnimOn=!0,this.startScreenShake(60),Game.playSound("laser-cave/loud-zap.mp3",.6),this.loseLife(),0==this.droneManager.turtleAudioPlaying)switch(this.droneManager.turtleAudioPlaying=!0,this.turtleColour){case"red":var e=[{id:"laser-cave/raph-defend-1.mp3"},{id:"laser-cave/raph-defend-2.mp3"},{id:"laser-cave/raph-defend-3.mp3"},{id:"laser-cave/raph-defend-4.mp3"}],t=Game.getRandom(0,3,!0);Game.playSound(e[t].id,e[t].vol||1);break;case"blue":var i=[{id:"laser-cave/leo-defend-1.mp3"},{id:"laser-cave/leo-defend-2.mp3"},{id:"laser-cave/leo-defend-3.mp3"},{id:"laser-cave/leo-defend-4.mp3"}],t=Game.getRandom(0,3,!0);Game.playSound(i[t].id,i[t].vol||1);break;case"orange":var s=[{id:"laser-cave/mikey-defend-1.mp3"},{id:"laser-cave/mikey-defend-2.mp3"},{id:"laser-cave/mikey-defend-3.mp3"},{id:"laser-cave/mikey-defend-4.mp3"}],t=Game.getRandom(0,3,!0);Game.playSound(s[t].id,s[t].vol||1);break;case"purple":var o=[{id:"laser-cave/donnie-defend-1.mp3"},{id:"laser-cave/donnie-defend-2.mp3"},{id:"laser-cave/donnie-defend-3.mp3"},{id:"laser-cave/donnie-defend-4.mp3"}],t=Game.getRandom(0,3,!0);Game.playSound(o[t].id,o[t].vol||1)}var a=[{id:"laser-cave/footbot-1.mp3"},{id:"laser-cave/footbot-2.mp3"},{id:"laser-cave/footbot-3.mp3"},{id:"laser-cave/footbot-4.mp3"},{id:"laser-cave/footbot-5.mp3"},{id:"laser-cave/footbot-6.mp3"},{id:"laser-cave/footbot-7.mp3"},{id:"laser-cave/footbot-8.mp3"}],t=Game.getRandom(0,7,!0);Game.playSound(a[t].id,a[t].vol||.6),this.turtleZapAnimation.visible=!0,this.turtleZapAnimation.play(),this.turtleZapStar.alpha=1,this.turtleZapAnimation.alpha=1,this.turtleZapStar.visible=!0,this.turtleFaceTimerActive=!0,this.setTurtleFace("sad")}},t.prototype.loseLife=function(){if(1!=this.gameOverTriggered)for(var e=this.heartIcons.length-1;e>=0;e--)if(0!=this.heartIcons[e].active)return this.heartIcons[e].active=!1,0==Game.isLowEndIPad?(this.losingHeart=!0,this.heartNumber=e,this.targetHeartScale=0):this.heartIcons[e].heart.visible=!1,void this.checkGameOver()},t.prototype.addLife=function(){for(var e=0;e<this.heartIcons.length;e++)if(1!=this.heartIcons[e].active)return this.heartIcons[e].active=!0,void(0==Game.isLowEndIPad?(this.losingHeart=!0,this.heartNumber=e,this.targetHeartScale=1):this.heartIcons[e].heart.visible=!0)},t.prototype.getLives=function(){for(var e=0,t=0;t<this.heartIcons.length;t++)1==this.heartIcons[t].active&&e++;return{currentLives:e,totalLives:this.heartIcons.length}},t.prototype.scaleDownHeart=function(e,t){switch(this.heartIcons[e].heart.scale.x+=(t-this.heartIcons[e].heart.scale.x)/5,this.heartIcons[e].heart.scale.y+=(t-this.heartIcons[e].heart.scale.y)/5,t){case 0:this.heartIcons[e].heart.scale.x<=t&&(this.losingHeart=!1,this.heartIcons[e].heart.scale.x=0,this.heartIcons[e].heart.scale.y=0);break;case 1:this.heartIcons[e].heart.scale.x>=t&&(this.losingHeart=!1,this.heartIcons[e].heart.scale.x=1,this.heartIcons[e].heart.scale.y=1)}},t.prototype.checkGameOver=function(){for(var e=0,t=0;t<this.heartIcons.length;t++)0==this.heartIcons[t].active&&e++,e==this.heartIcons.length&&(this.gameOverTriggered=!0,this.physicsManager.triggerGameOver(),this.droneManager.triggerGameOver(),this.gameOverDelay=TweenMax.delayedCall(2,this.endGame,[this]))},t.prototype.secondChanceUse=function(){this.addLife(),this.gameOverTriggered=!1,this.droneManager.triggerSecondChance(),this.physicsManager.triggerSecondChance(),console.log("second chance....",this.gameOverTriggered)},t.prototype.positionLaserSight=function(e){this.laserSightConactPos[0]=e[0],this.laserSightConactPos[1]=Game.stageHeight-e[1],1!=this.laserSightContact&&(this.laserSightContact=!0)},t.prototype.killLaserSight=function(){0!=this.laserSightContact&&(this.laserSightContact=!1,this.laserSightPoint.position.x=-100,this.laserSightPoint.position.y=-100)},t.prototype.endGame=function(e){e.gameOverDelay=e.killTween(e.gameOverDelay),e.wristbandOverlay.endGame(e.displayDistance)},t.prototype.collectTicket=function(){Game.coreData.addTickets(1)},t.prototype.addPhysicsBodyToWorld=function(e){this.physicsManager.addBodyToWorld(e)},t.prototype.removePhysicsBodyFromWorld=function(e){this.physicsManager.removeBodyFromWorld(e)},t.prototype.addPhysicsSpringToWorld=function(e){this.physicsManager.addSpringToWorld(e)},t.prototype.removePhysicsSpringFromWorld=function(e){this.physicsManager.removeSpringFromWorld(e)},t.prototype.bumpWheel=function(e,t){this.physicsManager.bumpWheel(e,t)},t.prototype.getDroneChassisPhysicsObj=function(){return this.physicsManager.getDroneChassisPhysicsObj()},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){if(e.prototype.tick.call(this),1!=this.paused&&1!=this.wristbandOverlay.isOpen){if(1==this.powerupOn&&(this.puEffectHolder.rotation+=.1,this.puEffectHolder.position.x=this.cartBodyHolder.position.x+110,this.puEffectGlow.position.x=this.cartBodyHolder.position.x+110),1==this.losingHeart&&this.scaleDownHeart(this.heartNumber,this.targetHeartScale),Game.getRandom(0,1)<.1&&0==this.zapAnimOn)for(o=0;o<this.rearSparkParticles.length;o++){var t=this.rearSparkParticles[o];if(0==t.active){t.active=!0,t.sprite.position.x=203+Game.getRandom(-3,3),t.sprite.position.y=614+Game.getRandom(-3,3),t.sprite.alpha=1,t.sprite.scale.x=t.sprite.scale.y=Game.getRandom(.5,1),t.sprite.rotation=Game.getRandom(0,2*Math.PI);break}}1==this.turtleFaceTimerActive&&this.turtleFaceTimer();for(o=0;o<this.rearSparkParticles.length;o++)1==this.rearSparkParticles[o].active&&(this.rearSparkParticles[o].sprite.scale.x<=0&&(this.rearSparkParticles[o].active=!1,this.rearSparkParticles[o].sprite.alpha=0),this.rearSparkParticles[o].sprite.position.y-=.5,this.rearSparkParticles[o].sprite.position.x-=2,this.rearSparkParticles[o].sprite.scale.x-=.05,this.rearSparkParticles[o].sprite.scale.y-=.05,this.rearSparkParticles[o].sprite.rotation-=.05);if(1==this.droneManager.turtleAudioPlaying&&++this.turtleAudioTimer>=this.turtleAudioLimit&&(this.droneManager.turtleAudioPlaying=!1,this.turtleAudioTimer=0),1==this.inputManager.mouseModeOn&&this.angleGun(),1==this.inputManager.keyBoardModeOn&&this.angleGunKeyboard(),1==this.laserSightContact&&(this.laserSightPoint.position.x=this.laserSightConactPos[0],this.laserSightPoint.position.y=this.laserSightConactPos[1],this.laserSightPoint.rotation+=.1),this.foregroundManager.tick(this.cartBodyHolder.position.x),this.droneManager.tick(this.cartBodyHolder.position.x),0==this.tutorialOverlay.isOpen&&this.ticketManager.tick(this.cartBodyHolder.position.x),this.turtleZapAnimation.position.x=this.cartBodyHolder.position.x,this.turtleZapAnimation.position.y=this.cartBodyHolder.position.y-40,this.turtleZapStar.position.x=this.turtleZapAnimation.position.x,this.turtleZapStar.position.y=this.turtleZapAnimation.position.y,1==this.zapAnimOn&&(this.turtleZapStar.rotation+=.05),this.positionViewport(),this.physicsManager.stepPhysics(),this.cartBodyHolder.position.x=this.physicsManager.cartBodyPhysics.position[0],this.cartBodyHolder.position.y=Game.stageHeight-this.physicsManager.cartBodyPhysics.position[1],this.cartBodyHolder.rotation=-this.physicsManager.cartBodyPhysics.angle,this.cartWheelLeft.position.x=this.physicsManager.cartWheelLeftBody.position[0],this.cartWheelLeft.position.y=Game.stageHeight-this.physicsManager.cartWheelLeftBody.position[1],this.cartWheelLeft.rotation=-this.physicsManager.cartWheelLeftBody.angle,this.cartWheelRight.position.x=this.physicsManager.cartWheelRightBody.position[0],this.cartWheelRight.position.y=Game.stageHeight-this.physicsManager.cartWheelRightBody.position[1],this.cartWheelRight.rotation=-this.physicsManager.cartWheelRightBody.angle,this.gunBreech.position.x=this.physicsManager.gunBreechBody.position[0],this.gunBreech.position.y=Game.stageHeight-this.physicsManager.gunBreechBody.position[1],this.gunBreech.rotation=-this.physicsManager.gunBreechBody.angle,this.laserSightBeam.position.x=this.gunBreech.position.x,this.laserSightBeam.position.y=this.gunBreech.position.y,this.laserSightBeam.rotation=this.gunBreech.rotation,this.gunBarrel.position.x=this.physicsManager.gunBarrelBody.position[0],this.gunBarrel.position.y=Game.stageHeight-this.physicsManager.gunBarrelBody.position[1],this.gunBarrel.rotation=-this.physicsManager.gunBarrelBody.angle,this.gunBarrelUpgrade.position.x=this.physicsManager.gunBarrelBody.position[0],this.gunBarrelUpgrade.position.y=Game.stageHeight-this.physicsManager.gunBarrelBody.position[1],this.gunBarrelUpgrade.rotation=-this.physicsManager.gunBarrelBody.angle,this.turtleHeadHolder.position.x=this.physicsManager.turtleHeadBody.position[0],this.turtleHeadHolder.position.y=Game.stageHeight-this.physicsManager.turtleHeadBody.position[1],this.turtleHeadHolder.rotation=-this.physicsManager.turtleHeadBody.angle,this.turtleBandanaEnd1.position.x=this.physicsManager.bandanaTail1Body.position[0],this.turtleBandanaEnd1.position.y=Game.stageHeight-this.physicsManager.bandanaTail1Body.position[1],this.turtleBandanaEnd1.rotation=-this.physicsManager.bandanaTail1Body.angle,this.turtleBandanaEnd2.position.x=this.physicsManager.bandanaTail2Body.position[0],this.turtleBandanaEnd2.position.y=Game.stageHeight-this.physicsManager.bandanaTail2Body.position[1],this.turtleBandanaEnd2.rotation=-this.physicsManager.bandanaTail2Body.angle,this.enemyHolder.position.x=this.physicsManager.enemyCartBody.position[0],this.enemyHolder.position.y=Game.stageHeight-this.physicsManager.enemyCartBody.position[1],this.enemyHolder.rotation=-this.physicsManager.enemyCartBody.angle,this.turtleHand.position.x=this.turtleHandPosX+10*this.gunBreech.rotation,this.turtleHand.rotation=this.gunBreech.rotation/3,0==this.allowLaserFade&&++this.fadeLaserDelayCounter>=this.fadeLaserDelayLimit&&(this.allowLaserFade=!0),1==this.allowLaserFade&&(this.laserBeam.alpha+=(0-this.laserBeam.alpha)/this.laserAlphaEaseAmount,this.particleAlpha+=(0-this.particleAlpha)/this.laserParticleAlphaEaseAmount),this.laserPos=this.physicsManager.getLaserPos(),0==Game.isLowEndIPad)for(o=0;o<this.laserParticles.length;o++)this.laserParticles[o].sprite.rotation-=this.laserParticles[o].rotateSpeed,this.laserParticles[o].sprite.alpha=this.particleAlpha;if(this.laserMuzzleLines.position.x=this.laserPos.pos.x,this.laserMuzzleLines.position.y=this.laserPos.pos.y,this.laserMuzzleBlast.position.x=this.laserPos.pos.x,this.laserMuzzleBlast.position.y=this.laserPos.pos.y,this.laserMuzzleLines.rotation+=.05,0==this.powerupOn&&(this.laserMuzzleBlast.alpha=this.laserBeam.alpha,this.laserMuzzleLines.alpha=this.laserBeam.alpha),this.footBotTargetAheadPos=this.cartBodyHolder.position.x+this.footBotTargetAheadRange,this.physicsManager.updateEnemyCartTarget(this.footBotTargetAheadPos),this.backgroundManager.tick(this.cartBodyHolder.position.x),this.inputManager.tick(),++this.bumpEnemyCartCounter>this.bumpEnemyCartLimit&&(this.bumpEnemyCartLimit=Game.getRandom(30,90)/(60/Game.fps),this.bumpEnemyCartCounter=0,this.physicsManager.bumpEnemyCart()),++this.bumpEnemyBodyCounter>this.bumpEnemyBodyLimit){this.bumpEnemyBodyCounter=0;var i=Game.getRandom(-5,5),s=Game.getRandom(-2,2);Game.getRandom(0,1)<.5&&(this.enemyTargetArmsPos=this.enemyTargetArmsPosOrig+i),Game.getRandom(0,1)<.5&&(this.enemyTargetTorsoPos=this.enemyTargetTorsoPosOrig+i,this.enemyTargetHeadPos=this.enemyTargetHeadPosOrig+i),this.enemyTargetCartPos=this.enemyTargetCartPosOrig+s}this.enemyHands.position.y+=(this.enemyTargetArmsPos-this.enemyHands.position.y)/this.enemyBodyEaseAmountArms,this.enemyTorso.position.y+=(this.enemyTargetTorsoPos-this.enemyTorso.position.y)/this.enemyBodyEaseAmountTorso,this.enemyHead.position.y+=(this.enemyTargetHeadPos-this.enemyHead.position.y)/this.enemyBodyEaseAmountHead,this.enemyCart.position.y+=(this.enemyTargetCartPos-this.enemyCart.position.y)/this.enemyBodyEaseAmountCart,this.coolDownMeterFill.scale.y=this.gunCoolDownCounter/this.gunCoolDownLimit,this.coolDownMeterFillOverlay.scale.y=this.gunCoolDownCounter/this.gunCoolDownLimit,this.coolDownMeterFillOverlay.alpha=this.gunCoolDownCounter/this.gunCoolDownLimit,this.coolDownMeterFill.alpha=this.gunCoolDownCounter/this.gunCoolDownLimit,0==this.fireAllowed&&++this.gunCoolDownCounter>=this.gunCoolDownLimit&&(this.fireAllowed=!0),1==this.screenShaking&&(++this.screenShakeChangeLocCounter>=this.screenShakeChangeLocLimit&&(this.screenShakeChangeLocCounter=0,this.screenShakeTargetPos.x=this.mainHolderPos.x+Game.getRandom(-40,40),this.screenShakeTargetPos.y=this.mainHolderPos.y+Game.getRandom(-40,40)),++this.screenShakingCounter>=this.screenShakingLimit&&(this.screenShaking=!1,this.screenShakeTargetPos.x=this.mainHolderPos.x,this.screenShakeTargetPos.y=this.mainHolderPos.y)),this.outerHolder.position.x+=(this.screenShakeTargetPos.x-this.outerHolder.position.x)/this.screenShakeEaseAmount,this.outerHolder.position.y+=(this.screenShakeTargetPos.y-this.outerHolder.position.y)/this.screenShakeEaseAmount,++this.calcDistanceCounter>=this.calcDistanceCounterLimit&&(this.calcDistanceCounter=0,this.calculateDistanceTravelled()),0==this.tutorialOverlay.isOpen&&++this.difficultyLevelCounter>=this.difficultyLevelLimit&&(this.difficultyLevelCounter=0,this.difficultyLevel++),1==this.turtleZapping&&++this.turtleZappingCounter>=this.turtleZappingLimit&&(this.turtleZapping=!1),0==this.turtleZapping&&1==this.zapAnimOn&&(this.turtleZapAnimation.alpha-=.1,this.turtleZapStar.alpha-=.2,this.turtleZapAnimation.alpha<=0&&(this.zapAnimOn=!1,this.turtleZapAnimation.stop(),this.turtleZapAnimation.visible=!1,this.turtleZapStar.visible=!1));for(var o=0;o<this.laserBullets.length;o++)0!=this.laserBullets[o].active&&(this.laserBullets[o].sprite.position.x=this.laserBullets[o].body.position[0],this.laserBullets[o].sprite.position.y=Game.stageHeight-this.laserBullets[o].body.position[1],this.laserBullets[o].sprite.rotation=-this.laserBullets[o].body.angle);0!=this.powerupOn&&1==this.powerupLaserFiring&&++this.powerupLaserFireCount>=this.powerupLaserFireLimit&&(this.powerupLaserFireCount=0,this.firePowerUpLaser())}},t.prototype.firePowerUpLaser=function(){for(var e=0;e<this.laserBullets.length;e++)if(0==this.laserBullets[e].active){this.laserBullets[e].active=!0,this.physicsManager.firePowerUpLaserBeam(this.laserBullets[e].body);break}},t.prototype.checkLaserBulletHit=function(e,t){for(var i=0;i<this.laserBullets.length;i++){if(this.laserBullets[i].body==e)return void this.droneManager.checkDroneHitLaserBullet(t);if(this.laserBullets[i].body==t)return void this.droneManager.checkDroneHitLaserBullet(e)}},t.prototype.debuggerTraceRay=function(e){this.physicsDebugger.traceRay(e)},t.prototype.getDifficulty=function(){return this.difficultyLevel},t.prototype.calculateDistanceTravelled=function(){this.distance=this.cartBodyHolder.position.x,this.displayDistance=Math.round(this.distance/400),this.distanceString=String(this.displayDistance)+"m",this.scoreText.text=this.distanceString},t.prototype.angleGun=function(){var e=this.inputManager.getInputAngle(),t=this.inputManager.getInputAngleHead();this.physicsManager.changeGunAngle(e),this.physicsManager.changeHeadAngle(t)},t.prototype.angleGunKeyboard=function(){var e=this.inputManager.getKeyboardInputAngle(),t=this.inputManager.getKeyboardInputAngleHead();this.physicsManager.changeGunAngle(e),this.physicsManager.changeHeadAngle(t)},t.prototype.positionViewport=function(){var e=(-this.cartBodyHolder.position.x-this.mainHolder.position.x+this.mainHolderPos.x)/this.cameraMotionEaseAmount;this.mainHolder.position.x=this.mainHolder.position.x+e},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&("up"==t?this.upKeyDown():"down"==t?this.downKeyDown():"spacebar"==t&&this.spaceKeyDown())},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&("up"==t?this.upKeyUp():"down"==t?this.downKeyUp():"spacebar"==t&&this.spaceKeyUp())},t.prototype.spaceKeyDown=function(){this.fireGun()},t.prototype.spaceKeyUp=function(){this.endFireGun()},t.prototype.fireGun=function(){if(1==this.powerupOn)return this.laserMuzzleBlast.alpha=1,this.laserMuzzleLines.alpha=1,this.foregroundManager.foregroundTintPowerUp(),this.backgroundManager.backgroundTintPowerUp(),void(this.powerupLaserFiring=!0);if(0!=this.fireAllowed&&1!=this.tutorialOverlay.isOpen){this.fireAllowed=!1,this.backgroundManager.backgroundTint(),this.foregroundManager.foregroundTint(),this.allowLaserFade=!1,this.fadeLaserDelayCounter=0,this.physicsManager.fireGun(),this.coolDownMeterFill.alpha=0,this.gunCoolDownCounter=0,this.laserBeam.position.x=this.laserPos.pos.x,this.laserBeam.position.y=this.laserPos.pos.y,this.laserBeam.rotation=this.laserPos.angle,this.laserBeam.alpha=1,this.particleAlpha=1;for(var e=1e3/this.laserParticles.length,t=0;t<this.laserParticles.length;t++){var i=Math.cos(this.laserPos.angle),s=Math.sin(this.laserPos.angle),o=Game.getRandom(.4,1);this.laserParticles[t].sprite.rotation=Game.getRandom(0,2*Math.PI),this.laserParticles[t].sprite.alpha=1,this.laserParticles[t].sprite.scale.x=o,this.laserParticles[t].sprite.scale.y=o,this.laserParticles[t].sprite.position.x=this.laserPos.pos.x+e*t*i+Game.getRandom(-10,10),this.laserParticles[t].sprite.position.y=this.laserPos.pos.y+e*t*s+Game.getRandom(-10,10)}}},t.prototype.endFireGun=function(){0!=this.powerupLaserFiring&&(this.powerupLaserFiring=!1,this.laserMuzzleBlast.alpha=0,this.laserMuzzleLines.alpha=0,this.backgroundManager.backgroundTintPowerUpEnd(),this.foregroundManager.foregroundTintPowerUpEnd())},t.prototype.laserHitResult=function(e){this.droneManager.laserHitResult(e)},t.prototype.getPhysicsParticleLarge=function(){return this.physicsManager.getPhysicsParticleLarge()},t.prototype.getPhysicsParticleSmall=function(){return this.physicsManager.getPhysicsParticleSmall()},t.prototype.upKeyDown=function(){this.inputManager.upKeyDown()},t.prototype.downKeyDown=function(){this.inputManager.downKeyDown()},t.prototype.upKeyUp=function(){this.inputManager.upKeyUp()},t.prototype.downKeyUp=function(){this.inputManager.downKeyUp()},t.prototype.activatePowerUpEffect=function(){this.powerupOn=!0,Game.playSound("laser-cave/power-up-transform.mp3",1),this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.activatePowerupTimeline=new TimelineMax,this.puEffectHolder.position.x=this.cartBodyHolder.position.x+110,this.puEffectHolder.position.y=this.cartBodyHolder.position.y-80,this.puEffectGlow.position.y=this.cartBodyHolder.position.y-80,this.puEffectGlow.position.x=this.cartBodyHolder.position.x+110,this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.3,{x:2.5,y:2.5,ease:Power2.easeIn}),TweenMax.to(this.puEffectGlow.scale,.3,{x:5,y:3.2,ease:Power2.easeIn})],0),this.activatePowerupTimeline.call(function(){this.gunBarrel.visible=!1,this.gunBarrelUpgrade.visible=!0},null,this),this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.5,{x:0,y:0,ease:Power2.easeOut}),TweenMax.to(this.puEffectGlow.scale,.5,{x:0,y:0,ease:Power2.easeOut})])},t.prototype.deactivatePowerUpEffect=function(){this.powerupOn=!1,this.backgroundManager.backgroundTintPowerUpEnd(),this.foregroundManager.foregroundTintPowerUpEnd(),Game.playSound("laser-cave/power-down-transform.mp3",1),this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.activatePowerupTimeline=new TimelineMax,this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.2,{x:2.5,y:2.5,ease:Power2.easeIn}),TweenMax.to(this.puEffectGlow.scale,.2,{x:5,y:3.2,ease:Power2.easeIn})],0),this.activatePowerupTimeline.call(function(){this.gunBarrel.visible=!0,this.gunBarrelUpgrade.visible=!1},null,this),this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.5,{x:0,y:0,ease:Power2.easeOut}),TweenMax.to(this.puEffectGlow.scale,.5,{x:0,y:0,ease:Power2.easeOut})])},t.prototype.pause=function(t){0==t&&(Game.pauseSound("laser-cave/music.mp3"),e.prototype.pause.call(this,t)),Game.pauseSound("laser-cave/cart-looping.mp3"),Game.pauseSound("laser-cave/hiss.mp3"),Game.pauseSound("laser-cave/drone-pop.mp3"),Game.pauseSound("laser-cave/fizz.mp3"),Game.pauseSound("laser-cave/laser-1.mp3"),Game.pauseSound("laser-cave/laser-2.mp3"),Game.pauseSound("laser-cave/laser-3.mp3"),Game.pauseSound("laser-cave/laser-power-up-1.mp3"),Game.pauseSound("laser-cave/laser-power-up-2.mp3"),Game.pauseSound("laser-cave/laser-power-up-3.mp3"),Game.pauseSound("laser-cave/loud-zap.mp3"),Game.pauseSound("laser-cave/drone-destroy-1.mp3"),Game.pauseSound("laser-cave/drone-destroy-2.mp3"),Game.pauseSound("laser-cave/drone-destroy-3.mp3"),Game.pauseSound("laser-cave/footbot-1.mp3"),Game.pauseSound("laser-cave/footbot-2.mp3"),Game.pauseSound("laser-cave/footbot-3.mp3"),Game.pauseSound("laser-cave/footbot-4.mp3"),Game.pauseSound("laser-cave/footbot-5.mp3"),Game.pauseSound("laser-cave/footbot-6.mp3"),Game.pauseSound("laser-cave/footbot-7.mp3"),Game.pauseSound("laser-cave/footbot-8.mp3"),Game.pauseSound("laser-cave/power-up-transform.mp3"),Game.pauseSound("laser-cave/power-down-transform.mp3"),Game.pauseSound("laser-cave/donnie-awesome.mp3"),Game.pauseSound("laser-cave/donnie-check-it.mp3"),Game.pauseSound("laser-cave/donnie-defend-1.mp3"),Game.pauseSound("laser-cave/donnie-defend-2.mp3"),Game.pauseSound("laser-cave/donnie-defend-3.mp3"),Game.pauseSound("laser-cave/donnie-defend-4.mp3"),Game.pauseSound("laser-cave/donnie-eat-it.mp3"),Game.pauseSound("laser-cave/donnie-were-awesome.mp3"),Game.pauseSound("laser-cave/leo-celebrate.mp3"),Game.pauseSound("laser-cave/leo-defend-1.mp3"),Game.pauseSound("laser-cave/leo-defend-2.mp3"),Game.pauseSound("laser-cave/leo-defend-3.mp3"),Game.pauseSound("laser-cave/leo-defend-4.mp3"),Game.pauseSound("laser-cave/leo-lets-go.mp3"),Game.pauseSound("laser-cave/leo-hooowho.mp3"),Game.pauseSound("laser-cave/mikey-awesome.mp3"),Game.pauseSound("laser-cave/mikey-defend-1.mp3"),Game.pauseSound("laser-cave/mikey-defend-2.mp3"),Game.pauseSound("laser-cave/mikey-defend-3.mp3"),Game.pauseSound("laser-cave/mikey-defend-4.mp3"),Game.pauseSound("laser-cave/mikey-oh-geez.mp3"),Game.pauseSound("laser-cave/mikey-oh-yeah.mp3"),Game.pauseSound("laser-cave/mikey-strap-your-shells-on-tight-bros.mp3"),Game.pauseSound("laser-cave/mikey-were-under-attack.mp3"),Game.pauseSound("laser-cave/mikey-woohoo.mp3"),Game.pauseSound("laser-cave/raph-amazing.mp3"),Game.pauseSound("laser-cave/raph-defend-1.mp3"),Game.pauseSound("laser-cave/raph-defend-2.mp3"),Game.pauseSound("laser-cave/raph-defend-3.mp3"),Game.pauseSound("laser-cave/raph-defend-4.mp3"),Game.pauseSound("laser-cave/raph-enough-talk.mp3"),Game.pauseSound("laser-cave/raph-lets-move.mp3"),this.droneManager.pause(),this.pauseResumeTween(this.gameOverDelay,"pause"),this.game.powerUpManager.pause()},t.prototype.resume=function(){e.prototype.resume.call(this),Game.resumeSound("laser-cave/music.mp3"),Game.resumeSound("laser-cave/cart-looping.mp3"),Game.resumeSound("laser-cave/hiss.mp3"),Game.resumeSound("laser-cave/drone-pop.mp3"),Game.resumeSound("laser-cave/fizz.mp3"),Game.resumeSound("laser-cave/laser-1.mp3"),Game.resumeSound("laser-cave/laser-2.mp3"),Game.resumeSound("laser-cave/laser-3.mp3"),Game.resumeSound("laser-cave/footbot-1.mp3"),Game.resumeSound("laser-cave/footbot-2.mp3"),Game.resumeSound("laser-cave/footbot-3.mp3"),Game.resumeSound("laser-cave/footbot-4.mp3"),Game.resumeSound("laser-cave/footbot-5.mp3"),Game.resumeSound("laser-cave/footbot-6.mp3"),Game.resumeSound("laser-cave/footbot-7.mp3"),Game.resumeSound("laser-cave/footbot-8.mp3"),Game.resumeSound("laser-cave/power-up-transform.mp3"),Game.resumeSound("laser-cave/power-down-transform.mp3"),Game.resumeSound("laser-cave/laser-power-up-1.mp3"),Game.resumeSound("laser-cave/laser-power-up-2.mp3"),Game.resumeSound("laser-cave/laser-power-up-3.mp3"),Game.resumeSound("laser-cave/donnie-awesome.mp3"),Game.resumeSound("laser-cave/donnie-check-it.mp3"),Game.resumeSound("laser-cave/donnie-defend-1.mp3"),Game.resumeSound("laser-cave/donnie-defend-2.mp3"),Game.resumeSound("laser-cave/donnie-defend-3.mp3"),Game.resumeSound("laser-cave/donnie-defend-4.mp3"),Game.resumeSound("laser-cave/donnie-eat-it.mp3"),Game.resumeSound("laser-cave/donnie-were-awesome.mp3"),Game.resumeSound("laser-cave/leo-celebrate.mp3"),Game.resumeSound("laser-cave/leo-defend-1.mp3"),Game.resumeSound("laser-cave/leo-defend-2.mp3"),Game.resumeSound("laser-cave/leo-defend-3.mp3"),Game.resumeSound("laser-cave/leo-defend-4.mp3"),Game.resumeSound("laser-cave/leo-lets-go.mp3"),Game.resumeSound("laser-cave/leo-hooowho.mp3"),Game.resumeSound("laser-cave/mikey-awesome.mp3"),Game.resumeSound("laser-cave/mikey-defend-1.mp3"),Game.resumeSound("laser-cave/mikey-defend-2.mp3"),Game.resumeSound("laser-cave/mikey-defend-3.mp3"),Game.resumeSound("laser-cave/mikey-defend-4.mp3"),Game.resumeSound("laser-cave/mikey-oh-geez.mp3"),Game.resumeSound("laser-cave/mikey-oh-yeah.mp3"),Game.resumeSound("laser-cave/mikey-strap-your-shells-on-tight-bros.mp3"),Game.resumeSound("laser-cave/mikey-were-under-attack.mp3"),Game.resumeSound("laser-cave/mikey-woohoo.mp3"),Game.resumeSound("laser-cave/raph-amazing.mp3"),Game.resumeSound("laser-cave/raph-defend-1.mp3"),Game.resumeSound("laser-cave/raph-defend-2.mp3"),Game.resumeSound("laser-cave/raph-defend-3.mp3"),Game.resumeSound("laser-cave/raph-defend-4.mp3"),Game.resumeSound("laser-cave/raph-enough-talk.mp3"),Game.resumeSound("laser-cave/raph-lets-move.mp3"),this.droneManager.resume(),this.pauseResumeTween(this.gameOverDelay,"resume"),this.game.ui.setUI("gameplay-laser-cave"),this.game.powerUpManager.resume()},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause"),this.setBackgroundColor(1582130)},t.prototype.destroy=function(){e.prototype.destroy.call(this),Game.stopSound("laser-cave/cart-looping.mp3"),Game.stopSound("laser-cave/hiss.mp3"),Game.stopSound("laser-cave/drone-pop.mp3"),Game.stopSound("laser-cave/fizz.mp3"),Game.stopSound("laser-cave/laser-1.mp3"),Game.stopSound("laser-cave/laser-2.mp3"),Game.stopSound("laser-cave/laser-3.mp3"),Game.stopSound("laser-cave/laser-power-up-1.mp3"),Game.stopSound("laser-cave/laser-power-up-2.mp3"),Game.stopSound("laser-cave/laser-power-up-3.mp3"),Game.stopSound("laser-cave/footbot-1.mp3"),Game.stopSound("laser-cave/footbot-2.mp3"),Game.stopSound("laser-cave/footbot-3.mp3"),Game.stopSound("laser-cave/footbot-4.mp3"),Game.stopSound("laser-cave/footbot-5.mp3"),Game.stopSound("laser-cave/footbot-6.mp3"),Game.stopSound("laser-cave/footbot-7.mp3"),Game.stopSound("laser-cave/footbot-8.mp3"),Game.stopSound("laser-cave/power-up-transform.mp3"),Game.stopSound("laser-cave/power-down-transform.mp3"),Game.stopSound("laser-cave/donnie-awesome.mp3"),Game.stopSound("laser-cave/donnie-check-it.mp3"),Game.stopSound("laser-cave/donnie-defend-1.mp3"),Game.stopSound("laser-cave/donnie-defend-2.mp3"),Game.stopSound("laser-cave/donnie-defend-3.mp3"),Game.stopSound("laser-cave/donnie-defend-4.mp3"),Game.stopSound("laser-cave/donnie-eat-it.mp3"),Game.stopSound("laser-cave/donnie-were-awesome.mp3"),Game.stopSound("laser-cave/leo-celebrate.mp3"),Game.stopSound("laser-cave/leo-defend-1.mp3"),Game.stopSound("laser-cave/leo-defend-2.mp3"),Game.stopSound("laser-cave/leo-defend-3.mp3"),Game.stopSound("laser-cave/leo-defend-4.mp3"),Game.stopSound("laser-cave/leo-lets-go.mp3"),Game.stopSound("laser-cave/leo-hooowho.mp3"),Game.stopSound("laser-cave/mikey-awesome.mp3"),Game.stopSound("laser-cave/mikey-defend-1.mp3"),Game.stopSound("laser-cave/mikey-defend-2.mp3"),Game.stopSound("laser-cave/mikey-defend-3.mp3"),Game.stopSound("laser-cave/mikey-defend-4.mp3"),Game.stopSound("laser-cave/mikey-oh-geez.mp3"),Game.stopSound("laser-cave/mikey-oh-yeah.mp3"),Game.stopSound("laser-cave/mikey-strap-your-shells-on-tight-bros.mp3"),Game.stopSound("laser-cave/mikey-were-under-attack.mp3"),Game.stopSound("laser-cave/mikey-woohoo.mp3"),Game.stopSound("laser-cave/raph-amazing.mp3"),Game.stopSound("laser-cave/raph-defend-1.mp3"),Game.stopSound("laser-cave/raph-defend-2.mp3"),Game.stopSound("laser-cave/raph-defend-3.mp3"),Game.stopSound("laser-cave/raph-defend-4.mp3"),Game.stopSound("laser-cave/raph-enough-talk.mp3"),Game.stopSound("laser-cave/raph-lets-move.mp3");for(t=0;t<this.laserParticles.length;t++)Game.displayStore.returnPooledItem(this.laserParticles[t].sprite);for(t=0;t<this.heartIcons.length;t++)Game.displayStore.returnPooledItem(this.heartIcons[t].heart);for(t=0;t<this.laserBullets.length;t++)Game.displayStore.returnPooledItem(this.laserBullets[t].sprite);for(var t=0;t<this.rearSparkParticles.length;t++)Game.displayStore.returnPooledItem(this.rearSparkParticles[t].sprite);Game.displayStore.returnPooledItem(this.enemySignalFrames),Game.displayStore.returnPooledItem(this.centralDivideHolder1),Game.displayStore.returnPooledItem(this.centralDivideHolder2),Game.displayStore.returnPooledItem(this.cartWheelLeft),Game.displayStore.returnPooledItem(this.cartWheelRight),Game.displayStore.returnPooledItem(this.caveShadowLeft),Game.displayStore.returnPooledItem(this.caveShadowRight),this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.backgroundManager.destroy(),this.foregroundManager.destroy(),this.droneManager.destroy(),this.inputManager.destroy(),this.ticketManager.destroy(),this.tutorialOverlay.destroy()},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),MayanMadnessGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.cameraMotionEaseAmount=3,i.rateOfIncrease=20,i.id="mayanMadnessGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.mainHolderPos=new PIXI.Point(0,0),this.currentLevel=0,this.atDoor=!1,this.hasReachedLevel=!1,this.gameOverTriggered=!1,this.score=0,this.interpolatedScore=0,this.lastSolveTime=0,this.powerupIsActive=!1,this.checkItems=[],this.nextDoorHolderPositonY=-500,this.tvIsOpen=!1,Game.coreData.setCurrentRide("mayan-madness"),Game.playSound("mayan-madness/music.mp3",.25),this.physicsManager=new MayanMadnessPhysicsManager(this,this.container),this.physicsManager.initPhysicsWorld(),this.controlsOverlayOn=!0,this.doTracking=!1,this.trackerObject=Game.displayStore.getSprite("mayan-madness/lift-track-object"),this.trackerObject.alpha=0,this.layersHolder=Game.displayStore.getContainer("mayan-madness/layers-holder"),this.mainHolder=Game.displayStore.getContainer("mayan-madness/main-container"),this.bgStrip=Game.displayStore.getSprite("mayan-madness/bg-strip"),this.bgStrip.height=Game.stageHeight,this.bgStrip.alpha=.8,this.liftHolder=Game.displayStore.getContainer("mayan-madness/lift-container"),this.liftInnerHolder=this.liftHolder.getContainer("mayan-madness/lift-inner-container"),this.liftBackRopeLeft=this.liftInnerHolder.getSprite("mayan-madness/lift-back-rope-left.png"),this.liftBackRopeRight=this.liftInnerHolder.getSprite("mayan-madness/lift-back-rope-right.png"),this.liftFrontRopeLeft=this.liftInnerHolder.getSprite("mayan-madness/lift-front-rope-left.png"),this.liftFrontRopeRight=this.liftInnerHolder.getSprite("mayan-madness/lift-front-rope-right.png"),this.liftFrontHolder=this.liftInnerHolder.getContainer("mayan-madness/lift-front-holder"),this.liftBackHolder=this.liftInnerHolder.getContainer("mayan-madness/lift-back-holder"),this.liftFloor=this.liftInnerHolder.getSprite("mayan-madness/lift-floor.png"),this.henrySpine=this.liftFrontHolder.getSpine("mayan-madness/henry-spine"),this.henrySpine.setAnim("idle",!0),this.henrySpine.scale.x=.94,this.henrySpine.scale.y=.94,this.henrySpine.position.x=400,this.henrySpine.position.y=625,this.door1Holder=Game.displayStore.getContainer("mayan-madness/door-1-holder"),this.door2Holder=Game.displayStore.getContainer("mayan-madness/door-2-holder"),this.slamLeftBurstContainer1=Game.displayStore.getContainer("mayan-madness/slam-particle-container");var i={lowerAngle:0,upperAngle:70,lowerVelocity:400,upperVelocity:1200,endScale:0,lowerStartScale:2,upperStartScale:5,XstartRange:20,YstartRange:20,time:.6,gravity:150,cap:20,endAlpha:1,rotationPower:3};this.slamLeftBurst1=new ParticleBurst(["mayan-madness/slam-particles/particle-wood-1","mayan-madness/slam-particles/particle-wood-2","mayan-madness/slam-particles/particle-wood-3","mayan-madness/slam-particles/particle-wood-4","mayan-madness/slam-particles/particle-wood-5","mayan-madness/slam-particles/particle-wood-6"],this.slamLeftBurstContainer1,this,i),this.slamLeftBurst1.container.position.x=100,this.slamLeftBurst1.container.position.y=50,this.slamRightBurstContainer1=Game.displayStore.getContainer("mayan-madness/slam-particle-container");var s={lowerAngle:110,upperAngle:180,lowerVelocity:400,upperVelocity:1200,endScale:0,lowerStartScale:2,upperStartScale:5,XstartRange:20,YstartRange:20,time:.6,gravity:150,cap:20,endAlpha:1,rotationPower:3};this.slamRightBurst1=new ParticleBurst(["mayan-madness/slam-particles/particle-wood-1","mayan-madness/slam-particles/particle-wood-2","mayan-madness/slam-particles/particle-wood-3","mayan-madness/slam-particles/particle-wood-4","mayan-madness/slam-particles/particle-wood-5","mayan-madness/slam-particles/particle-wood-6"],this.slamRightBurstContainer1,this,s),this.slamRightBurst1.container.position.x=900,this.slamRightBurst1.container.position.y=50,this.puzzleParticleBurstHolder=Game.displayStore.getContainer("mayan-madness/puzzle-particle-holder");var o={lowerAngle:0,upperAngle:360,lowerVelocity:800,upperVelocity:2400,endScale:0,lowerStartScale:1,upperStartScale:4,friction:.1,XstartRange:20,YstartRange:20,time:1,stagger:300,gravity:100,cap:50,endAlpha:0,rotationPower:0,blendMode:PIXI.BLEND_MODES.ADD};this.puzzleParticleBurst=new ParticleBurst(["mayan-madness/puzzle-particle"],this.puzzleParticleBurstHolder,this,o),this.puzzleParticleBurst.container.position.x=0,this.puzzleParticleBurst.container.position.y=0,this.leadDoorHolder=this.door1Holder,this.followDoorHolder=this.door2Holder,this.gearWoodBackLeft1=this.leadDoorHolder.getSprite("mayan-madness/gear-wood-back-left"),this.gearWoodBackRight1=this.leadDoorHolder.getSprite("mayan-madness/gear-wood-back-right"),this.gearWoodFrontLeft1=this.leadDoorHolder.getSprite("mayan-madness/gear-wood-front-left"),this.gearWoodFrontRight1=this.leadDoorHolder.getSprite("mayan-madness/gear-wood-front-right"),this.tv1Holder=Game.displayStore.getContainer("mayan-madness/tv-container-1"),this.tv2Holder=Game.displayStore.getContainer("mayan-madness/tv-container-2"),this.puzzlePanel=Game.displayStore.getContainer("mayan-madness/puzzle-panel-holder"),this.puzzlePanel.setRegPointPixels(this.puzzlePanel.width,this.puzzlePanel.height/2,!0),this.puzzlePanelSupport=this.puzzlePanel.getSprite("mayan-madness/hand-support"),this.puzzlePanelHandHolder=this.puzzlePanel.getContainer("mayan-madness/puzzle-panel-hand-holder"),this.puzzlePanelHandHolder.setRegPointPixels(this.puzzlePanelHandHolder.width-20,this.puzzlePanelHandHolder.height/2+30,!0),this.puzzlePanelHandTablet=this.puzzlePanelHandHolder.getContainer("mayan-madness/puzzle-panel-tablet-holder"),this.puzzlePanelGlyphs=this.puzzlePanelHandTablet.getContainer("mayan-madness/puzzle-panel-glyph-holder"),this.puzzlePad=new MayanMadnessPuzzlePad(this),this.timer=new MayanMadnessTimer(this),this.scoreHolder=Game.displayStore.getContainer("mayan-madness/score-holder"),this.scoreText=Game.displayStore.getBitmapText("mayan-madness/score-font"),this.scoreText.scale.x=this.scoreText.scale.y=.8,this.scoreText.position.x=70,this.scoreText.position.y=7,this.scoreHolder.scale.x=this.scoreHolder.scale.y=1,this.scoreHolder.addChild(this.scoreText),this.scoreText.text=String(this.score),this.trackerObject.position.y=0,this.liftHolder.position.y=-550,this.liftHolder.rotation=.05,this.liftFloor.scale.y=1,this.puzzlePanel.position.x=1450;for(var a=this.layersHolder.getContainer("mayan-madness/bg"),r=0;r<a.children.length;r++)for(var n=a.getChildAt(r),h=0;h<n.children.length;h++)n.getChildAt(h).blendMode=PIXI.BLEND_MODES.MULTIPLY,n.getChildAt(h).alpha=.7;this.cliffBackLayerLeft=new MayanMadnessScrollingLayer(this,.5,160,this.layersHolder.getContainer("mayan-madness/cliff-far-layer-left")),this.cliffBackLayerRight=new MayanMadnessScrollingLayer(this,.5,Game.stageWidth-160,this.layersHolder.getContainer("mayan-madness/cliff-far-layer-right")),this.cliffLayerLeft=new MayanMadnessScrollingLayer(this,.2,100,this.layersHolder.getContainer("mayan-madness/cliff-layer-left")),this.cliffLayerRight=new MayanMadnessScrollingLayer(this,.2,Game.stageWidth-100,this.layersHolder.getContainer("mayan-madness/cliff-layer-right")),this.bgLayer=new MayanMadnessScrollingLayer(this,.7,0,this.layersHolder.getContainer("mayan-madness/bg")),this.mainHolder.addChild(this.layersHolder),this.mainHolder.addChild(this.door1Holder),this.mainHolder.addChild(this.door2Holder),this.layersHolder.addChildAt(this.tv1Holder,1),this.layersHolder.addChildAt(this.tv2Holder,1),this.mainHolder.addChild(this.puzzlePanel),this.mainHolder.addChild(this.liftHolder),this.mainHolder.addChild(this.trackerObject),this.container.addChild(this.bgStrip),this.container.addChild(this.mainHolder),this.container.addChild(this.puzzlePad.container),this.container.addChild(this.timer.container),this.container.addChild(this.scoreHolder),this.container.addChild(this.slamRightBurstContainer1),this.container.addChild(this.slamLeftBurstContainer1),this.inputManager=new MayanMadnessInputManager(this,this.mainHolder),this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),this.tutorialViewed=Game.coreData.getGameTutorialViewed("mayan-madness"),1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("mayan-madness",!0)},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.startGameplay=function(){this.controlsOverlayOn=!1,this.game.ui.triggerEnjoyTheRide(),this.game.ui.setUI("gameplay-mayan"),this.physicsManager.createPhysicsObjects(),this.timer.start(),this.timer.addTime(15),this.leadTVHolder=this.tv1Holder,this.followTVHolder=this.tv2Holder,this.henrySpine.setAnim("brace-loop",!0);var e=this.leadDoorHolder.getContainer("mayan-madness/shadow-holder");this.setNextDoor(0,!0),this.introTimeline=this.killTween(this.introTimeline),this.introTimeline=new TimelineMax,this.introTimeline.add([TweenMax.to(this.trackerObject.position,2,{y:3*Game.stageHeight+20,ease:Power0.easeInOut}),TweenMax.to(this.liftHolder.position,2,{y:3*Game.stageHeight+20,ease:Power0.easeInOut}),TweenMax.to(this.liftHolder,.7,{rotation:-.05,repeat:1,yoyo:!0,ease:Sine.easeInOut})]),this.introTimeline.add([TweenMax.to(this.trackerObject.position,.2,{y:3*Game.stageHeight,ease:Power2.easeOut}),TweenMax.to(this.liftHolder.position,.2,{y:3*Game.stageHeight,ease:Power2.easeOut})],2),this.introTimeline.add([TweenMax.to(this.liftBackRopeLeft,.9,{rotation:.0075,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackRopeRight,.9,{rotation:-.0075,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackRopeRight.position,.9,{x:270.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackRopeLeft.position,.9,{x:272.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeLeft,.9,{rotation:.02,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeRight,.9,{rotation:-.02,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeRight.position,.9,{x:286.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeLeft.position,.9,{x:289.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontHolder.position,.9,{x:8.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackHolder.position,.9,{x:-8.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFloor.position,.9,{x:290,repeat:1,yoyo:!0,ease:Sine.easeInOut})],0),this.introTimeline.call(function(){this.atDoor=!0,this.setNextDoor()},null,this),this.introTimeline.add([TweenMax.to(e,.5,{alpha:.4,ease:Power1.easeIn}),TweenMax.to(e.scale,.5,{x:1,y:1,ease:Power1.easeIn})],1.6),this.introTimeline.add(TweenMax.to(this.liftHolder,.6,{rotation:0,ease:Sine.easeInOut}),1.6),this.introTimeline.call(function(){this.timer.pause(),this.doTracking=!0},null,this,1.7),this.openCurrentTV(2),this.introTimeline.call(this.henrySpine.setAnim,["brace-stop",!0],this.henrySpine,2),this.introTimeline.call(this.henrySpine.setAnim,["idle",!0],this.henrySpine,2.5),this.introTimeline.call(function(){Game.fadeSound("mayan-madness/wind.mp3",.4,0),Game.fadeSound("mayan-madness/lift-moving.mp3",.4,0),Game.playSound("mayan-madness/thud.mp3",1);var e=[{id:"mayan-madness/thud-wood-1.mp3"},{id:"mayan-madness/thud-wood-2.mp3"}],t=Game.getRandom(0,1,!0);Game.playSound(e[t].id,e[t].vol||.7)},null,this,1.9),this.puzzlePanelHandHolder.rotation=.5,this.introTimeline.add([TweenMax.to(this.puzzlePanel.position,.8,{x:1150,ease:Back.easeOut}),TweenMax.to(this.puzzlePanelHandHolder,.8,{rotation:0,ease:Back.easeOut}),TweenMax.to(this.puzzlePanelHandTablet.position,.4,{x:-5,yoyo:!0,repeat:1,ease:Back.easeInOut})],2.5),this.introTimeline.call(Game.playSound,["mayan-madness/swish-long-1.mp3"],null,2.5),this.game.powerUpManager.startGame(),Game.playSound("mayan-madness/wind.mp3",.4),Game.playSound("mayan-madness/lift-moving.mp3",.4)},t.prototype.startPuzzle=function(){this.timer.resume(),this.puzzleStartTime=this.timer.time},t.prototype.nextLevel=function(){this.hasReachedLevel=!1,this.progressTimeline=this.killTween(this.progressTimeline),this.progressTimeline=new TimelineMax;var e=this.followDoorHolder.getContainer("mayan-madness/shadow-holder");e.getSprite("mayan-madness/shadow-left"),e.getSprite("mayan-madness/shadow-right");e.alpha=0,e.scale.x=e.scale.y=0,this.timer.pause(),this.progressTimeline.add(TweenMax.to(this.liftHolder,.9,{delay:.3,rotation:-.03,ease:Sine.easeInOut})),this.progressTimeline.add(TweenMax.to(this.liftHolder,.9,{rotation:.03,ease:Sine.easeInOut})),this.progressTimeline.add(TweenMax.to(this.liftHolder,.6,{rotation:0,ease:Sine.easeInOut})),this.progressTimeline.add([TweenMax.to(e,.6,{alpha:.4,ease:Power1.easeOut}),TweenMax.to(e.scale,.6,{x:1,y:1,ease:Power1.easeOut})],1.8),this.progressTimeline.add(TweenMax.to(this.trackerObject.position,.2,{y:"-=40",ease:Power1.easeIn}),0),this.progressTimeline.add(TweenMax.to(this.trackerObject.position,1.7,{y:"+="+String(3*Game.stageHeight+80),ease:Power1.easeIn}),.2),this.progressTimeline.add(TweenMax.to(this.trackerObject.position,.3,{y:"-=40",ease:Power1.easeOut}),1.9),this.progressTimeline.add([TweenMax.to(this.liftBackRopeLeft,.35,{rotation:.0075,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackRopeRight,.35,{rotation:-.0075,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeLeft,.35,{rotation:.015,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeRight,.35,{rotation:-.015,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontHolder.position,.35,{y:-10,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackHolder.position,.35,{y:-10,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFloor.scale,.35,{y:1.1,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFloor.position,.35,{y:558,repeat:1,yoyo:!0,ease:Sine.easeInOut})],.2),this.progressTimeline.add([TweenMax.to(this.liftBackRopeLeft,.9,{rotation:.0075,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackRopeRight,.9,{rotation:-.0075,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackRopeRight.position,.9,{x:270.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackRopeLeft.position,.9,{x:272.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeLeft,.9,{rotation:.02,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeRight,.9,{rotation:-.02,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeRight.position,.9,{x:286.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeLeft.position,.9,{x:289.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontHolder.position,.9,{x:8.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackHolder.position,.9,{x:-8.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFloor.position,.9,{x:290,repeat:1,yoyo:!0,ease:Sine.easeInOut})],.9),this.progressTimeline.call(function(){this.atDoor=!0,this.openCurrentTV(.5),this.setNextDoor()},null,this),this.progressTimeline.call(this.ticket.collect,null,this.ticket,1.8),this.progressTimeline.add([TweenMax.to(this.puzzlePanel.position,.8,{x:1150,ease:Back.easeOut}),TweenMax.to(this.puzzlePanelHandHolder,.8,{rotation:0,ease:Back.easeOut}),TweenMax.to(this.puzzlePanelHandTablet.position,.4,{x:-5,yoyo:!0,repeat:1,ease:Back.easeInOut})],2.5),this.progressTimeline.call(Game.playSound,["mayan-madness/swish-long-1.mp3"],null,2.5),this.progressTimeline.call(this.henrySpine.setAnim,["brace-stop",!0],this.henrySpine,2),this.progressTimeline.call(this.henrySpine.setAnim,["idle",!0],this.henrySpine,2.5),this.progressTimeline.call(function(){Game.fadeSound("mayan-madness/wind.mp3",.4,0),Game.fadeSound("mayan-madness/lift-moving.mp3",.4,0)},null,this,1.9),this.progressTimeline.call(function(){Game.playSound("mayan-madness/thud.mp3",1);var e=[{id:"mayan-madness/thud-wood-1.mp3"},{id:"mayan-madness/thud-wood-2.mp3"}],t=Game.getRandom(0,1,!0);Game.playSound(e[t].id,e[t].vol||.7)},null,this,2)},t.prototype.openDoor=function(){if(!(this.progressTimeline&&this.progressTimeline.totalProgress()<1||this.introTimeline&&this.introTimeline.totalProgress()<1||this.openDoorTimeline&&this.openDoorTimeline.totalProgress()<1)){this.gearSpinAnimation(),this.closeCurrentTV(),this.lastSolveTime=this.puzzleStartTime-this.timer.time;var e=4*Math.round(25-this.lastSolveTime);if(e<10&&(e=10),this.updateScore(e),1!=this.powerupIsActive){this.openDoorTimeline=this.killTween(this.openDoorTimeline),this.openDoorTimeline=new TimelineMax;var t=this.leadDoorHolder.getSprite("mayan-madness/door-1-left"),i=this.leadDoorHolder.getSprite("mayan-madness/door-1-right"),s=this.leadDoorHolder.getContainer("mayan-madness/shadow-holder"),o=s.getSprite("mayan-madness/shadow-left"),a=s.getSprite("mayan-madness/shadow-right");this.openDoorTimeline.call(function(){this.nextLevel()},null,this),this.openDoorTimeline.add([TweenMax.to(t.position,1,{x:-512,ease:Sine.easeIn}),TweenMax.to(i.position,1,{x:Game.stageWidth+512,ease:Sine.easeIn}),TweenMax.to(o.scale,.72,{x:0,ease:Sine.easeIn}),TweenMax.to(a.scale,.72,{x:0,ease:Sine.easeIn})]),Game.playSound("mayan-madness/doors-crank.mp3",1),Game.playSound("mayan-madness/doors-moving.mp3",1),Game.fadeSound("mayan-madness/wind.mp3",.5,.4),Game.fadeSound("mayan-madness/lift-moving.mp3",.6,.4)}}},t.prototype.smashDoor=function(e){if(0!=this.powerupIsActive){var t=e.getSprite("mayan-madness/door-1-left"),i=e.getSprite("mayan-madness/door-1-right");this.slamRightBurst1.fire(),this.slamLeftBurst1.fire(),t.rotation=0,i.rotation=0,this.smashTimeline=this.killTween(this.smashTimeline),this.smashTimeline=new TimelineMax,this.smashTimeline.add([TweenMax.to(t,.5,{rotation:Math.PI/2,ease:Bounce.easeOut}),TweenMax.to(i,.5,{rotation:-Math.PI/2,ease:Bounce.easeOut})]);var s=new RoughEase({strength:3,points:50,template:Strong.easeInOut,randomize:!0});this.smashTimeline.add(TweenMax.to(this.mainHolder.position,.1,{x:-10}),0),this.smashTimeline.add(TweenMax.to(this.mainHolder.position,.3,{x:10,ease:s}),.1),this.smashTimeline.add(TweenMax.to(this.mainHolder.position,.1,{x:0}),1.1),this.updateScore(175),this.timer.addTime(2);var o=[{id:"mayan-madness/wood-smash-1.mp3"},{id:"mayan-madness/wood-smash-2.mp3"},{id:"mayan-madness/wood-smash-3.mp3"}],a=Game.getRandom(0,2,!0);Game.playSound(o[a].id,o[a].vol||.9)}},t.prototype.setNextDoor=function(e,t){var i=this.currentLevel/this.rateOfIncrease,s=Game.getRandom(i/2,.33+i);1!=t&&(s<.33?(this.puzzlePad.setGrid(0),this.puzzlePanelGlyphs.showOnlyChild(0)):s>=.33&&s<.66?(this.puzzlePad.setGrid(1),this.puzzlePanelGlyphs.showOnlyChild(1)):(this.puzzlePad.setGrid(2),this.puzzlePanelGlyphs.showOnlyChild(2))),this.currentLevel>0&&(this.ticket=Game.ticketPool.getTicket(),this.ticket.container.position.x=Game.stageWidth/2,this.ticket.container.position.y=this.trackerObject.position.y+1600,this.checkItems.push({y:this.ticket.container.position.y+160,callback:function(e){e.ticket.collect()}}),this.mainHolder.addChild(this.ticket.container)),0==this.powerupIsActive&&(this.currentLevel+=1);var o=e||0;this.leadDoorHolder.position.y=this.trackerObject.position.y+4*Game.stageHeight-50+o,this.puzzlePanel.position.y=this.followDoorHolder.position.y-200,this.prevDoorHolderPositonY=this.nextDoorHolderPositonY,this.nextDoorHolderPositonY=this.leadDoorHolder.position.y*(1-.7),this.checkItems.push({y:this.leadDoorHolder.position.y+290,callback:function(e){var t;(t=e.leadDoorHolder.toGlobal(new PIXI.Point).y/Game.windowScaleFactor>0?e.leadDoorHolder:e.followDoorHolder).toGlobal(new PIXI.Point).y/Game.windowScaleFactor>0&&t.toGlobal(new PIXI.Point).y/Game.windowScaleFactor<Game.stageHeight&&e.smashDoor(t)}});var a=this.leadDoorHolder.getSprite("mayan-madness/door-1-left"),r=this.leadDoorHolder.getSprite("mayan-madness/door-1-right"),n=this.leadDoorHolder.getContainer("mayan-madness/shadow-holder"),h=n.getSprite("mayan-madness/shadow-left"),l=n.getSprite("mayan-madness/shadow-right");a.position.x=60,r.position.x=Game.stageWidth-60,a.rotation=0,r.rotation=0,n.alpha=0,n.scale.x=n.scale.y=0,h.scale.x=l.scale.x=1,this.leadDoorHolder==this.door1Holder?(this.leadDoorHolder=this.door2Holder,this.followDoorHolder=this.door1Holder,this.leadTVHolder=this.tv2Holder,this.followTVHolder=this.tv1Holder):(this.leadDoorHolder=this.door1Holder,this.followDoorHolder=this.door2Holder,this.leadTVHolder=this.tv1Holder,this.followTVHolder=this.tv2Holder),this.tvDoorLeft=this.leadTVHolder.getSprite("mayan-madness/screen-door-left"),this.tvDoorRight=this.leadTVHolder.getSprite("mayan-madness/screen-door-right"),this.tvStatic1=this.leadTVHolder.getSprite("mayan-madness/screen-static-1.png"),this.tvStatic2=this.leadTVHolder.getSprite("mayan-madness/screen-static-2.png"),this.tvGearLeft=this.leadTVHolder.getSprite("mayan-madness/screen-gear-left"),this.tvGearRight=this.leadTVHolder.getSprite("mayan-madness/screen-gear-right"),this.tvBlack=this.leadTVHolder.getSprite("mayan-madness/screen-black.png"),this.tvCenter=this.leadTVHolder.getSprite("mayan-madness/screen-center.png"),this.tvBar=this.leadTVHolder.getSprite("mayan-madness/screen-bar.png"),this.tvBlack.alpha=0,this.tvCenter.alpha=0,this.tvBar.alpha=0},t.prototype.activatePowerUpEffect=function(){this.powerupIsActive=!0,this.cameraMotionEaseAmount=2,this.powerupTimeline=this.killTween(this.powerupTimeline),this.powerupTimeline=new TimelineMax,this.currentLevel+=5,this.hasReachedLevel=!1,this.timer.pause(),this.progressTimeline=this.killTween(this.progressTimeline),1==this.puzzlePad.isOpen?(this.puzzlePad.autoComplete(),this.powerupTimeline.call(this.slamDown,[2],this,2)):this.slamDown()},t.prototype.gearSpinAnimation=function(){this.gearWoodBackLeft1=this.leadDoorHolder.getSprite("mayan-madness/gear-wood-back-left"),this.gearWoodBackRight1=this.leadDoorHolder.getSprite("mayan-madness/gear-wood-back-right"),this.gearWoodFrontLeft1=this.leadDoorHolder.getSprite("mayan-madness/gear-wood-front-left"),this.gearWoodFrontRight1=this.leadDoorHolder.getSprite("mayan-madness/gear-wood-front-right"),this.gearWoodBackLeft1.rotation=0,this.gearWoodBackRight1.rotation=0,this.gearWoodFrontLeft1.rotation=0,this.gearWoodFrontRight1.rotation=0,this.gearSpinTimeline=this.killTween(this.gearSpinTimeline),this.gearSpinTimeline=new TimelineMax,this.gearSpinTimeline.add([TweenMax.to(this.puzzlePanel.position,1,{x:1450,ease:Back.easeIn}),TweenMax.to(this.puzzlePanelHandHolder,.8,{rotation:.5,ease:Back.easeIn})],0),Game.playSound("mayan-madness/swish-long-1.mp3"),this.henrySpine.setAnim("brace-start",!0),this.gearSpinTimeline.call(function(){this.henrySpine.setAnim("brace-loop",!0),this.tvBlack.alpha=0,this.tvCenter.alpha=0,this.tvBar.alpha=0,this.tvBar.scale.x=1,this.tvBar.scale.y=3,this.tvCenter.scale.x=1,this.tvCenter.scale.y=1},null,this,.5)},t.prototype.openCurrentTV=function(e){var t=e||0;this.openTVTimeline=this.killTween(this.openTVTimeline),this.openTVTimeline=new TimelineMax,this.tvGearLeft.rotation=0,this.tvGearRight.rotation=0,this.openTVTimeline.add([TweenMax.to(this.tvDoorLeft.position,.5,{x:-245,ease:Power2.easeInOut}),TweenMax.to(this.tvDoorRight.position,.5,{x:245,ease:Power2.easeInOut}),TweenMax.to(this.tvGearLeft,.5,{rotation:2*-Math.PI,ease:Power2.easeInOut}),TweenMax.to(this.tvGearRight,.5,{rotation:2*Math.PI,ease:Power2.easeInOut})],.1+t),this.tvStatic1.alpha=0,this.tvStatic2.alpha=0,this.openTVTimeline.add(TweenMax.to(this.tvStatic1,.14,{alpha:0,ease:Power0.easeInOut}),0+t),this.openTVTimeline.add(TweenMax.to(this.tvStatic2,.14,{alpha:1,ease:Power0.easeInOut}),0+t),this.openTVTimeline.add(TweenMax.to(this.tvStatic1,.14,{alpha:1,ease:Power0.easeInOut}),.14+t),this.openTVTimeline.add(TweenMax.to(this.tvStatic2,.14,{alpha:0,ease:Power0.easeInOut}),.14+t),this.openTVTimeline.add(TweenMax.to(this.tvStatic1,.14,{alpha:0,ease:Power0.easeInOut}),.28+t),this.openTVTimeline.add(TweenMax.to(this.tvStatic2,.14,{alpha:1,ease:Power0.easeInOut}),.28+t),this.openTVTimeline.add(TweenMax.to(this.tvStatic1,.14,{alpha:1,ease:Power0.easeInOut}),.42+t),this.openTVTimeline.add(TweenMax.to(this.tvStatic2,.14,{alpha:0,ease:Power0.easeInOut}),.42+t),this.openTVTimeline.add(TweenMax.to(this.tvStatic1,.14,{alpha:0,ease:Power0.easeInOut}),.56+t),this.openTVTimeline.call(function(){this.tvIsOpen=!0},null,this),this.openTVTimeline.call(function(){Game.playSound("mayan-madness/static.mp3",.7)},null,this,.4+t),this.openTVTimeline.call(function(){Game.playSound("mayan-madness/tv-tune.mp3",.7)},null,this,.55+t),this.openTVTimeline.call(function(){var e=[{id:"mayan-madness/captain-man-hair.mp3"},{id:"mayan-madness/captain-man-potato.mp3"},{id:"mayan-madness/captain-man-scoop.mp3"},{id:"mayan-madness/captain-man-so-henry.mp3"},{id:"mayan-madness/captain-man-starring.mp3"},{id:"mayan-madness/captain-man-test.mp3"}],t=Game.getRandom(0,7,!0);e[t]&&Game.playSound(e[t].id,e[t].vol||.8)},null,this,.7+t)},t.prototype.closeCurrentTV=function(){if(0!=this.tvIsOpen){this.tvIsOpen=!1,this.closeTVTimeline=this.killTween(this.closeTVTimeline),this.closeTVTimeline=new TimelineMax;var e=this.followTVHolder.getSprite("mayan-madness/screen-door-left"),t=this.followTVHolder.getSprite("mayan-madness/screen-door-right"),i=this.followTVHolder.getSprite("mayan-madness/screen-static-1.png"),s=this.followTVHolder.getSprite("mayan-madness/screen-static-2.png"),o=this.followTVHolder.getSprite("mayan-madness/screen-gear-left"),a=this.followTVHolder.getSprite("mayan-madness/screen-gear-right");this.followTVHolder.getSprite("mayan-madness/screen-black.png"),this.followTVHolder.getSprite("mayan-madness/screen-center.png"),this.followTVHolder.getSprite("mayan-madness/screen-bar.png");e.position.x=-245,t.position.x=245,o.rotation=2*-Math.PI,a.rotation=2*Math.PI,i.alpha=0,s.alpha=0,this.closeTVTimeline.add([TweenMax.to(o,.5,{rotation:1*Math.PI,ease:Power2.easeInOut}),TweenMax.to(a,.5,{rotation:1*-Math.PI,ease:Power2.easeInOut}),TweenMax.to(e.position,.5,{x:-92,ease:Bounce.easeOut}),TweenMax.to(t.position,.5,{x:92,ease:Bounce.easeOut})],0),this.closeTVTimeline.add(TweenMax.to(i,.14,{alpha:0,ease:Power0.easeInOut}),0),this.closeTVTimeline.add(TweenMax.to(s,.14,{alpha:1,ease:Power0.easeInOut}),0),this.closeTVTimeline.add(TweenMax.to(i,.14,{alpha:1,ease:Power0.easeInOut}),.14),this.closeTVTimeline.add(TweenMax.to(s,.14,{alpha:0,ease:Power0.easeInOut}),.14),this.closeTVTimeline.add(TweenMax.to(i,.14,{alpha:0,ease:Power0.easeInOut}),.28),this.closeTVTimeline.add(TweenMax.to(s,.14,{alpha:1,ease:Power0.easeInOut}),.28),this.closeTVTimeline.add(TweenMax.to(i,.14,{alpha:1,ease:Power0.easeInOut}),.42),this.closeTVTimeline.add(TweenMax.to(s,.14,{alpha:0,ease:Power0.easeInOut}),.42),Game.playSound("mayan-madness/tv-off.mp3",.4),Game.playSound("mayan-madness/static.mp3",.7)}},t.prototype.slamDown=function(e){var t=e||0;this.gearSpinAnimation(),this.closeCurrentTV();var i=new TimelineMax;i.add(TweenMax.to(this.liftHolder,.9,{rotation:-.03,ease:Sine.easeInOut})),i.add(TweenMax.to(this.liftHolder,.9,{rotation:.03,ease:Sine.easeInOut})),i.add(TweenMax.to(this.liftHolder,.6,{rotation:0,ease:Sine.easeInOut})),i.add([TweenMax.to(this.leadDoorHolder.getContainer("mayan-madness/shadow-holder"),1,{alpha:.4,ease:Power1.easeOut}),TweenMax.to(this.leadDoorHolder.getContainer("mayan-madness/shadow-holder"),1,{x:1,y:1,ease:Power1.easeOut})],2+t),this.powerupTimeline.add([TweenMax.to(this.trackerObject.position,.2,{y:"-=100",ease:Sine.easeIn}),TweenMax.to(this.leadDoorHolder.getContainer("mayan-madness/shadow-holder"),.2,{alpha:.1,ease:Sine.easeIn}),TweenMax.to(this.leadDoorHolder.getContainer("mayan-madness/shadow-holder").scale,.2,{x:.85,y:.85,ease:Sine.easeIn})]),this.powerupTimeline.add(TweenMax.to(this.trackerObject.position,.5,{y:"+="+String(Game.stageHeight),ease:Power1.easeIn})),this.powerupTimeline.add(TweenMax.to(this.trackerObject.position,4,{y:"+="+String(14*Game.stageHeight+170),ease:Power0.easeIn})),this.powerupTimeline.add(TweenMax.to(this.trackerObject.position,.5,{y:"-=100",ease:Back.easeOut})),this.checkItems.push({y:this.trackerObject.position.y+4*Game.stageHeight,callback:function(e){e.setNextDoor()}}),this.checkItems.push({y:this.trackerObject.position.y+7*Game.stageHeight,callback:function(e){e.setNextDoor()}}),this.checkItems.push({y:this.trackerObject.position.y+10*Game.stageHeight,callback:function(e){e.setNextDoor()}}),this.checkItems.push({y:this.trackerObject.position.y+13*Game.stageHeight,callback:function(e){e.setNextDoor(),e.openCurrentTV(1.5)}}),this.checkItems.push({y:this.trackerObject.position.y+16*Game.stageHeight,callback:function(e){e.atDoor=!0,e.timer.pause(),e.setNextDoor()}}),i.add([TweenMax.to(this.liftBackRopeLeft,.35,{rotation:.0075,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackRopeRight,.35,{rotation:-.0075,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeLeft,.35,{rotation:.015,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeRight,.35,{rotation:-.015,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontHolder.position,.35,{y:-10,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackHolder.position,.35,{y:-10,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFloor.scale,.35,{y:1.1,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFloor.position,.35,{y:558,repeat:1,yoyo:!0,ease:Sine.easeInOut})],0),i.add([TweenMax.to(this.liftBackRopeLeft,.8,{rotation:.0075,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackRopeRight,.8,{rotation:-.0075,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackRopeRight.position,.8,{x:270.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackRopeLeft.position,.8,{x:272.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeLeft,.8,{rotation:.02,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeRight,.8,{rotation:-.02,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeRight.position,.8,{x:286.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeLeft.position,.8,{x:289.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontHolder.position,.8,{x:8.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackHolder.position,.8,{x:-8.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFloor.position,.8,{x:290,repeat:1,yoyo:!0,ease:Sine.easeInOut})],0),i.add([TweenMax.to(this.liftBackRopeLeft,.8,{rotation:-.0075,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackRopeRight,.8,{rotation:-.0075,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackRopeRight.position,.8,{x:287.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackRopeLeft.position,.8,{x:289.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeLeft,.8,{rotation:.02,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeRight,.8,{rotation:-.02,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeRight.position,.8,{x:269.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontRopeLeft.position,.8,{x:272.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFrontHolder.position,.8,{x:-8.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftBackHolder.position,.8,{x:8.5,repeat:1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(this.liftFloor.position,.8,{x:273,repeat:1,yoyo:!0,ease:Sine.easeInOut})],1.6),this.powerupTimeline.add(i,t),this.powerupTimeline.add([TweenMax.to(this.puzzlePanel.position,.8,{x:1150,ease:Back.easeOut}),TweenMax.to(this.puzzlePanelHandHolder,.8,{rotation:0,ease:Back.easeOut}),TweenMax.to(this.puzzlePanelHandTablet.position,.4,{x:-5,yoyo:!0,repeat:1,ease:Back.easeInOut})],5.5+t),Game.fadeSound("mayan-madness/wind.mp3",.5,.4),Game.fadeSound("mayan-madness/lift-moving.mp3",.6,.4),this.powerupTimeline.call(function(){Game.playSound("mayan-madness/thud.mp3",1);var e=[{id:"mayan-madness/thud-wood-1.mp3"},{id:"mayan-madness/thud-wood-2.mp3"}],t=Game.getRandom(0,1,!0);Game.playSound(e[t].id,e[t].vol||.7)},null,this,4.7),this.powerupTimeline.call(function(){this.henrySpine.setAnim("brace-stop",!0),Game.fadeSound("mayan-madness/wind.mp3",.4,0),Game.fadeSound("mayan-madness/lift-moving.mp3",.4,0);var e=[{id:"mayan-madness/henry-where-am-i.mp3"}],t=Game.getRandom(0,3,!0);e[t]&&Game.playSound(e[t].id,e[t].vol||1)},null,this,5+t),this.powerupTimeline.call(function(){this.henrySpine.setAnim("idle",!0)},null,this,5.5+t),this.powerupTimeline.add([TweenMax.to(this.followDoorHolder.getContainer("mayan-madness/shadow-holder"),.5,{alpha:.4,ease:Back.easeOut}),TweenMax.to(this.followDoorHolder.getContainer("mayan-madness/shadow-holder").scale,.5,{x:1,y:1,ease:Back.easeOut})],3.45+t)},t.prototype.deactivatePowerUpEffect=function(){this.powerupIsActive=!1,this.cameraMotionEaseAmount=3},t.prototype.updateScore=function(e){this.score+=e},t.prototype.checkGameOver=function(){0==this.timer.time&&(this.gameOverTriggered=!0,this.game.powerUpManager.setGameOverCooldown(!0),this.endGame(this))},t.prototype.endGame=function(e){e.wristbandOverlay.endGame(e.score)},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause"),this.setBackgroundColor(3355443)},t.prototype.secondChanceUse=function(){this.timer.addTime(15)},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"pause-button":this.pause(!1);break;case"playbuttonlarge":this.resume();break;case"skipbutton":this.removeControlsOverlay()}},t.prototype.removeControlsOverlay=function(){1==this.controlsOverlayOn&&(this.controlsOverlayOn=!1,this.game.ui.setUI(""))},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){if(e.prototype.tick.call(this),1!=this.paused&&1!=this.controlsOverlayOn){this.physicsManager.stepPhysics(),this.cliffBackLayerLeft.tick(t.smoothing,this.mainHolder.position),this.cliffBackLayerRight.tick(t.smoothing,this.mainHolder.position),this.cliffLayerLeft.tick(t.smoothing,this.mainHolder.position),this.cliffLayerRight.tick(t.smoothing,this.mainHolder.position),this.bgLayer.tick(t.smoothing,this.mainHolder.position),this.interpolatedScore+=(this.score-this.interpolatedScore)/30,this.scoreText.text=String(Math.round(this.interpolatedScore)),this.positionViewport(),1==this.doTracking&&(this.liftHolder.position.y+=(this.trackerObject.position.y-this.liftHolder.position.y)/8),this.leadTVHolder.position.y=this.bgLayer.container.position.y+this.nextDoorHolderPositonY,this.followTVHolder.position.y=this.bgLayer.container.position.y+this.prevDoorHolderPositonY;for(var i=0;i<this.checkItems.length;i++)this.checkPosition(this.checkItems[i])}},t.prototype.checkPosition=function(e){this.trackerObject.position.y+this.liftHolder.height>e.y&&(e.callback(this),this.checkItems.splice(this.checkItems.indexOf(e),1))},t.prototype.positionViewport=function(){var e=new PIXI.Point((-this.trackerObject.position.x-this.trackerObject.position.x+this.mainHolderPos.x)/this.cameraMotionEaseAmount,(-this.trackerObject.position.y-this.mainHolder.position.y+this.mainHolderPos.y)/this.cameraMotionEaseAmount);this.mainHolder.position.y=this.mainHolder.position.y+e.y},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&("up"==t?this.upKeyDown():"down"==t?this.downKeyDown():"spacebar"==t&&this.spaceKeyDown())},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&("up"==t?this.upKeyUp():"down"==t&&this.downKeyUp())},t.prototype.spaceKeyDown=function(){},t.prototype.upKeyDown=function(){},t.prototype.downKeyDown=function(){},t.prototype.upKeyUp=function(){},t.prototype.downKeyUp=function(){},t.prototype.pause=function(t){0==t&&(Game.pauseSound("mayan-madness/music.mp3"),e.prototype.pause.call(this,t)),Game.pauseSound("mayan-madness/stone-1.mp3"),Game.pauseSound("mayan-madness/stone-2.mp3"),Game.pauseSound("mayan-madness/stone-3.mp3"),Game.pauseSound("mayan-madness/scrape-1.mp3"),Game.pauseSound("mayan-madness/scrape-2.mp3"),Game.pauseSound("mayan-madness/tv-off.mp3"),Game.pauseSound("mayan-madness/tv-tune.mp3"),Game.pauseSound("mayan-madness/puzzle-up.mp3"),Game.pauseSound("mayan-madness/puzzle-down.mp3"),Game.pauseSound("mayan-madness/doors-crank.mp3"),Game.pauseSound("mayan-madness/doors-moving.mp3"),Game.pauseSound("mayan-madness/lift-moving.mp3"),Game.pauseSound("mayan-madness/wind.mp3"),Game.pauseSound("mayan-madness/lift-moving.mp3"),Game.pauseSound("mayan-madness/wind.mp3"),Game.pauseSound("mayan-madness/thud.mp3"),Game.pauseSound("mayan-madness/thud-wood-1.mp3"),Game.pauseSound("mayan-madness/thud-wood-2.mp3"),Game.pauseSound("mayan-madness/wood-smash-1.mp3"),Game.pauseSound("mayan-madness/wood-smash-2.mp3"),Game.pauseSound("mayan-madness/wood-smash-3.mp3"),Game.pauseSound("mayan-madness/shine-1.mp3"),Game.pauseSound("mayan-madness/shine-2.mp3"),Game.pauseSound("mayan-madness/shine-3.mp3"),this.puzzlePad.pause(),this.pauseResumeTween(this.openDoorTimeline,"pause"),this.pauseResumeTween(this.introTimeline,"pause"),this.pauseResumeTween(this.progressTimeline,"pause"),this.pauseResumeTween(this.powerupTimeline,"pause"),this.pauseResumeTween(this.smashTimeline,"pause"),this.pauseResumeTween(this.gearSpinTimeline,"pause"),this.pauseResumeTween(this.closeTVTimeline,"pause"),this.pauseResumeTween(this.openTVTimeline,"pause"),this.timer.pause()},t.prototype.resume=function(){e.prototype.resume.call(this),Game.resumeSound("mayan-madness/music.mp3"),Game.resumeSound("mayan-madness/stone-1.mp3"),Game.resumeSound("mayan-madness/stone-2.mp3"),Game.resumeSound("mayan-madness/stone-3.mp3"),Game.resumeSound("mayan-madness/scrape-1.mp3"),Game.resumeSound("mayan-madness/scrape-2.mp3"),Game.resumeSound("mayan-madness/tv-off.mp3"),Game.resumeSound("mayan-madness/tv-tune.mp3"),Game.resumeSound("mayan-madness/puzzle-up.mp3"),Game.resumeSound("mayan-madness/puzzle-down.mp3"),Game.resumeSound("mayan-madness/doors-crank.mp3"),Game.resumeSound("mayan-madness/doors-moving.mp3"),Game.resumeSound("mayan-madness/lift-moving.mp3"),Game.resumeSound("mayan-madness/wind.mp3"),Game.resumeSound("mayan-madness/lift-moving.mp3"),Game.resumeSound("mayan-madness/wind.mp3"),Game.resumeSound("mayan-madness/thud.mp3"),Game.resumeSound("mayan-madness/thud-wood-1.mp3"),Game.resumeSound("mayan-madness/thud-wood-2.mp3"),Game.resumeSound("mayan-madness/wood-smash-1.mp3"),Game.resumeSound("mayan-madness/wood-smash-2.mp3"),Game.resumeSound("mayan-madness/wood-smash-3.mp3"),Game.resumeSound("mayan-madness/shine-1.mp3"),Game.resumeSound("mayan-madness/shine-2.mp3"),Game.resumeSound("mayan-madness/shine-3.mp3"),this.puzzlePad.resume(),this.pauseResumeTween(this.openDoorTimeline,"resume"),this.pauseResumeTween(this.introTimeline,"resume"),this.pauseResumeTween(this.progressTimeline,"resume"),this.pauseResumeTween(this.powerupTimeline,"resume"),this.pauseResumeTween(this.smashTimeline,"resume"),this.pauseResumeTween(this.gearSpinTimeline,"resume"),this.pauseResumeTween(this.closeTVTimeline,"resume"),this.pauseResumeTween(this.openTVTimeline,"resume"),1==this.puzzlePad.isOpen&&this.timer.resume(),this.game.ui.setUI("gameplay-mayan"),this.game.powerUpManager.resumeGame()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.puzzlePad.destroy(),this.physicsManager.destroy(),this.inputManager.destroy(),this.timer.destroy(),this.puzzleParticleBurst.destroy(),this.slamLeftBurst1.destroy(),this.slamRightBurst1.destroy(),this.introTimeline=this.killTween(this.introTimeline),this.progressTimeline=this.killTween(this.progressTimeline),this.openDoorTimeline=this.killTween(this.openDoorTimeline),this.powerupTimeline=this.killTween(this.powerupTimeline),this.smashTimeline=this.killTween(this.smashTimeline),this.gearSpinTimeline=this.killTween(this.gearSpinTimeline),this.closeTVTimeline=this.killTween(this.closeTVTimeline),this.openTVTimeline=this.killTween(this.openTVTimeline),Game.displayStore.returnPooledItem(this.slamRightBurstContainer1),Game.displayStore.returnPooledItem(this.slamLeftBurstContainer1),Game.stopSound("mayan-madness/stone-1.mp3"),Game.stopSound("mayan-madness/stone-2.mp3"),Game.stopSound("mayan-madness/stone-3.mp3"),Game.stopSound("mayan-madness/scrape-1.mp3"),Game.stopSound("mayan-madness/scrape-2.mp3"),Game.stopSound("mayan-madness/tv-off.mp3"),Game.stopSound("mayan-madness/tv-tune.mp3"),Game.stopSound("mayan-madness/puzzle-up.mp3"),Game.stopSound("mayan-madness/puzzle-down.mp3"),Game.stopSound("mayan-madness/doors-crank.mp3"),Game.stopSound("mayan-madness/doors-moving.mp3"),Game.stopSound("mayan-madness/lift-moving.mp3"),Game.stopSound("mayan-madness/wind.mp3"),Game.stopSound("mayan-madness/lift-moving.mp3"),Game.stopSound("mayan-madness/wind.mp3"),Game.stopSound("mayan-madness/thud.mp3"),Game.stopSound("mayan-madness/thud-wood-1.mp3"),Game.stopSound("mayan-madness/thud-wood-2.mp3"),Game.stopSound("mayan-madness/wood-smash-1.mp3"),Game.stopSound("mayan-madness/wood-smash-2.mp3"),Game.stopSound("mayan-madness/wood-smash-3.mp3"),Game.stopSound("mayan-madness/shine-1.mp3"),Game.stopSound("mayan-madness/shine-2.mp3"),Game.stopSound("mayan-madness/shine-3.mp3")},t.smoothing=5,t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),PinBallGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.loadedSpring=!1,i.launcherNumber=0,i.id="pinBallGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){if(e.prototype.init.call(this),Game.coreData.setCurrentRide("pin-ball"),this.ballTrailCounter=0,this.ballTrailCounterLimit=10,this.character=Game.coreData.getSelectedCharacter()||"spongebob",this.setUpPinBall(this.character),this.expressionActive=!1,this.changeFace("neutral"),this.leftPipAvailable=!0,this.rightPipAvailable=!0,this.soundActive=!1,this.pinDevMode=!1,this.ballReset=!0,this.boostParticlesCounter=0,this.boostParticlesContainer=Game.displayStore.getContainer("pin-ball/boost-particles-holder"),0==Game.isLowEndIPad){this.boostParticles=new Array;for(m=0;m<30;m++){d=Game.displayStore.getSprite("pin-ball/boost-particle");this.boostParticles.push({active:!1,sprite:d}),this.boostParticles[m].sprite.position.y=-5e3,this.boostParticles[m].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.boostParticlesContainer.addChild(this.boostParticles[m].sprite)}}Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.sampleRate=0,this.targetHeadRotation=.5,this.gameOverTriggered=!1,this.bottomLeftFlag=Game.displayStore.getAnimatedSprite("pin-ball/flag-frames"),this.bottomRightFlag=Game.displayStore.getAnimatedSprite("pin-ball/flag-frames"),this.bottomLeftFlag.animationSpeed=.3,this.bottomLeftFlag.play(),this.gate1Active=!1,this.gate2Active=!1,this.gate3Active=!1,this.gate4Active=!1,this.gate5Active=!1,this.rampFrames=Game.displayStore.getAnimatedSprite("pin-ball/ramp-frames"),this.rampFrames.loop=!0,this.rampFrames.animationSpeed=.2,this.rampFramesAdd=Game.displayStore.getAnimatedSprite("pin-ball/ramp-frames-add"),this.rampFramesAdd.loop=!0,this.rampFramesAdd.animationSpeed=.2,this.powerUpisActive=!1,this.ticketsUpperContainer=Game.displayStore.getContainer("pin-ball/tickets-upper-container"),this.ticketsLowerContainer=Game.displayStore.getContainer("pin-ball/tickets-lower-container"),this.bottomRightFlag.animationSpeed=.3,this.bottomRightFlag.gotoAndPlay(4),this.bottomLeftFlag.position.x=Game.stageWidth/2-220,this.bottomLeftFlag.position.y=Game.stageHeight-80,this.bottomRightFlag.position.x=Game.stageWidth/2+280,this.bottomRightFlag.position.y=Game.stageHeight-80,this.bottomLeftFlag.scale.x=this.bottomLeftFlag.scale.y=.5,this.bottomRightFlag.scale.x=this.bottomRightFlag.scale.y=.5,this.oldPosX=0,this.oldPosY=0,this.newPosX=0,this.newPosY=0,this.ballAngle=0,this.bumper1Animate=!1,this.bumper2Animate=!1,this.bumper3Animate=!1,this.ticketCounter=0,this.ticketCounterLimit=60,this.currentTickets=0,this.currentTicketsLimit=7,this.scoreBackingArray=new Array;for(m=0;m<10;m++){var i=Game.displayStore.getSprite("pin-ball/score-glow");this.scoreBackingArray.push({active:!1,sprite:i})}this.score100Array=new Array;for(m=0;m<10;m++){var s=Game.displayStore.getSprite("pin-ball/100-score");this.score100Array.push({active:!1,sprite:s})}this.score200Array=new Array;for(m=0;m<10;m++){var o=Game.displayStore.getSprite("pin-ball/200-score");this.score200Array.push({active:!1,sprite:o})}this.score1000Array=new Array;for(m=0;m<10;m++){var a=Game.displayStore.getSprite("pin-ball/1000-score");this.score1000Array.push({active:!1,sprite:a})}this.score50Array=new Array;for(m=0;m<10;m++){var r=Game.displayStore.getSprite("pin-ball/50-score");this.score50Array.push({active:!1,sprite:r})}this.score500Array=new Array;for(m=0;m<10;m++){var n=Game.displayStore.getSprite("pin-ball/500-score");this.score500Array.push({active:!1,sprite:n})}this.pipHolder=Game.displayStore.getContainer("pin-ball/pip-holder"),this.pipLeft=this.pipHolder.getSprite("pin-ball/pip-left"),this.pipRight=this.pipHolder.getSprite("pin-ball/pip-right"),this.pipGlow=this.pipHolder.getSprite("pin-ball/pip-glow"),this.pipSparkle1=this.pipHolder.getSprite("pin-ball/pip-sparkle-1"),this.pipSparkle2=this.pipHolder.getSprite("pin-ball/pip-sparkle-2"),this.pipGateReverse=Game.displayStore.getAnimatedSprite("pin-ball/ice-frames-reverse"),this.pipLeft.visible=!1,this.pipRight.visible=!1,this.pipCounterActive=!1,this.pipCounter=0,this.pipCounterLimit=120,this.pipGlow.blendMode=PIXI.BLEND_MODES.ADD,this.pipSparkle1.blendMode=PIXI.BLEND_MODES.ADD,this.pipSparkle2.blendMode=PIXI.BLEND_MODES.ADD,this.pipHolder.addChild(this.pipGateReverse),this.pipHolder.position.x=Game.stageWidth-this.pipLeft.width/2-10,this.pipHolder.position.y=Game.stageHeight-this.pipLeft.height/2-10,this.pipHolder.scale.x=this.pipHolder.scale.y=0,this.floorHolderFront=Game.displayStore.getContainer("pin-ball/floor-holder-front"),this.floorHolderBack=Game.displayStore.getContainer("pin-ball/floor-holder-back"),this.floorTiles1=new Array,this.floorTiles2=new Array,this.floorTiles3=new Array,this.floorHolder1=Game.displayStore.getContainer("pin-ball/floor-holder1"),this.floorHolder2=Game.displayStore.getContainer("pin-ball/floor-holder2"),this.floorHolder3=Game.displayStore.getContainer("pin-ball/floor-holder3"),this.rearFloorTiles1=new Array,this.rearFloorTiles2=new Array,this.rearFloorTiles3=new Array,this.rearFloorHolder1=Game.displayStore.getContainer("pin-ball/rear-floor-holder1"),this.rearFloorHolder2=Game.displayStore.getContainer("pin-ball/rear-floor-holder2"),this.rearFloorHolder3=Game.displayStore.getContainer("pin-ball/rear-floor-holder3"),this.floorHolderFront.addChild(this.floorHolder1),this.floorHolderFront.addChild(this.floorHolder2),this.floorHolderFront.addChild(this.floorHolder3),this.floorHolderBack.addChild(this.rearFloorHolder1),this.floorHolderBack.addChild(this.rearFloorHolder2),this.floorHolderBack.addChild(this.rearFloorHolder3),Game.playSound("pin-ball/music.mp3",.25);for(m=0;m<8;m++){p=Game.displayStore.getSprite("pin-ball/floor-tile");if(m>3)var h=Game.stageHeight/2,l=m*Game.stageWidth/4-Game.stageWidth;else var h=0,l=m*Game.stageWidth/4;this.floorTiles1.push({sprite:p,x:l,y:h}),this.floorHolder1.addChild(this.floorTiles1[m].sprite),this.floorTiles1[m].sprite.position.x=this.floorTiles1[m].x,this.floorTiles1[m].sprite.position.y=this.floorTiles1[m].y}for(m=0;m<8;m++){p=Game.displayStore.getSprite("pin-ball/floor-tile");if(m>3)var h=Game.stageHeight/2,l=m*Game.stageWidth/4-Game.stageWidth;else var h=0,l=m*Game.stageWidth/4;this.floorTiles2.push({sprite:p,x:l,y:h}),this.floorHolder2.addChild(this.floorTiles2[m].sprite),this.floorTiles2[m].sprite.position.x=this.floorTiles2[m].x,this.floorTiles2[m].sprite.position.y=this.floorTiles2[m].y}for(m=0;m<8;m++){var p=Game.displayStore.getSprite("pin-ball/floor-tile");if(m>3)var h=Game.stageHeight/2,l=m*Game.stageWidth/4-Game.stageWidth;else var h=0,l=m*Game.stageWidth/4;this.floorTiles3.push({sprite:p,x:l,y:h}),this.floorHolder3.addChild(this.floorTiles3[m].sprite),this.floorTiles3[m].sprite.position.x=this.floorTiles3[m].x,this.floorTiles3[m].sprite.position.y=this.floorTiles3[m].y}this.floorHolder1.position.y=0,this.floorHolder1.position.x=0,this.floorHolder2.position.y=-Game.stageHeight,this.floorHolder2.position.x=0,this.floorHolder3.position.y=2*-Game.stageHeight,this.floorHolder3.position.x=0;for(m=0;m<6;m++){c=Game.displayStore.getSprite("pin-ball/floor-tile-back");if(m>2)var h=Game.stageHeight/2,l=Math.ceil(m*Game.stageWidth/3-Game.stageWidth);else var h=0,l=Math.ceil(m*Game.stageWidth/3);this.rearFloorTiles1.push({sprite:c,x:l,y:h}),this.rearFloorHolder1.addChild(this.rearFloorTiles1[m].sprite),this.rearFloorTiles1[m].sprite.position.x=this.rearFloorTiles1[m].x,this.rearFloorTiles1[m].sprite.position.y=this.rearFloorTiles1[m].y}for(m=0;m<6;m++){c=Game.displayStore.getSprite("pin-ball/floor-tile-back");if(m>2)var h=Game.stageHeight/2,l=Math.ceil(m*Game.stageWidth/3-Game.stageWidth);else var h=0,l=Math.ceil(m*Game.stageWidth/3);this.rearFloorTiles2.push({sprite:c,x:l,y:h}),this.rearFloorHolder2.addChild(this.rearFloorTiles2[m].sprite),this.rearFloorTiles2[m].sprite.position.x=this.rearFloorTiles2[m].x,this.rearFloorTiles2[m].sprite.position.y=this.rearFloorTiles2[m].y}for(m=0;m<6;m++){var c=Game.displayStore.getSprite("pin-ball/floor-tile-back");if(m>2)var h=Game.stageHeight/2,l=Math.ceil(m*Game.stageWidth/3-Game.stageWidth);else var h=0,l=Math.ceil(m*Game.stageWidth/3);this.rearFloorTiles3.push({sprite:c,x:l,y:h}),this.rearFloorHolder3.addChild(this.rearFloorTiles3[m].sprite),this.rearFloorTiles3[m].sprite.position.x=this.rearFloorTiles3[m].x,this.rearFloorTiles3[m].sprite.position.y=this.rearFloorTiles3[m].y}this.rearFloorHolder1.position.y=0,this.rearFloorHolder1.position.x=0,this.rearFloorHolder2.position.y=-Game.stageHeight,this.rearFloorHolder2.position.x=0,this.rearFloorHolder3.position.y=2*-Game.stageHeight,this.rearFloorHolder3.position.x=0,0==Game.isLowEndIPad&&(this.clouds=new Array,this.cloudHolder1=Game.displayStore.getContainer("pin-ball/cloud-holder-1"),this.cloudHolder2=Game.displayStore.getContainer("pin-ball/cloud-holder-2"),this.cloudHolder3=Game.displayStore.getContainer("pin-ball/cloud-holder-3"),this.cloudHolder4=Game.displayStore.getContainer("pin-ball/cloud-holder-3"),this.cloud1=Game.displayStore.getSprite("pin-ball/cloud"),this.cloud2=Game.displayStore.getSprite("pin-ball/cloud"),this.cloud3=Game.displayStore.getSprite("pin-ball/cloud"),this.cloud4=Game.displayStore.getSprite("pin-ball/cloud"),this.cloudShadow1=Game.displayStore.getSprite("pin-ball/cloud-shadow"),this.cloudShadow2=Game.displayStore.getSprite("pin-ball/cloud-shadow"),this.cloudShadow3=Game.displayStore.getSprite("pin-ball/cloud-shadow"),this.cloudShadow4=Game.displayStore.getSprite("pin-ball/cloud-shadow"),this.cloudHolder1.addChild(this.cloud1),this.cloudHolder1.addChild(this.cloudShadow1),this.cloudShadow1.position.x=-100,this.cloudShadow1.position.y=200,this.cloudHolder2.addChild(this.cloud2),this.cloudHolder2.addChild(this.cloudShadow2),this.cloudShadow2.position.x=-100,this.cloudShadow2.position.y=200,this.cloudHolder3.addChild(this.cloud3),this.cloudHolder3.addChild(this.cloudShadow3),this.cloudShadow3.position.x=-100,this.cloudShadow3.position.y=200,this.cloudHolder4.addChild(this.cloud4),this.cloudHolder4.addChild(this.cloudShadow4),this.cloudShadow4.position.x=-100,this.cloudShadow4.position.y=200,this.cloudShadow1.alpha=.4,this.cloudShadow2.alpha=.4,this.cloudShadow3.alpha=.4,this.cloudShadow4.alpha=.4,this.clouds.push({cloud:this.cloudHolder1,speed:Game.getRandom(0,1.5)}),this.clouds.push({cloud:this.cloudHolder2,speed:Game.getRandom(0,1.5)}),this.clouds.push({cloud:this.cloudHolder3,speed:Game.getRandom(0,1.5)}),this.clouds.push({cloud:this.cloudHolder4,speed:Game.getRandom(0,1.5)}),this.cloudHolder1.position.y=Game.getRandom(2*-Game.stageHeight,Game.stageHeight),this.cloudHolder2.position.y=Game.getRandom(2*-Game.stageHeight,Game.stageHeight),this.cloudHolder3.position.y=Game.getRandom(2*-Game.stageHeight,Game.stageHeight),this.cloudHolder4.position.y=Game.getRandom(2*-Game.stageHeight,Game.stageHeight),this.cloudHolder1.position.x=Game.getRandom(-this.cloudHolder1.width,2*-this.cloudHolder1.width),this.cloudHolder2.position.x=Game.getRandom(-this.cloudHolder2.width,2*-this.cloudHolder2.width),this.cloudHolder3.position.x=Game.getRandom(-this.cloudHolder3.width,2*-this.cloudHolder3.width),this.cloudHolder4.position.x=Game.getRandom(-this.cloudHolder4.width,2*-this.cloudHolder4.width)),this.ballInPlay=!1,this.mainHolderPos=new PIXI.Point(Game.stageWidth/2,Game.stageHeight/2),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),this.physicsManager=new PinBallPhysicsManager(this,this.mainHolder),this.inputManager=new PinBallInputManager(this,this.mainHolder),this.tutorialViewed=Game.coreData.getGameTutorialViewed("pin-ball"),3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),this.physicsManager.initPhysicsWorld(),this.mainHolder=Game.displayStore.getContainer("main-holder"),this.physicsDebugger=new PhysicsDebugger(this,this.mainHolder,this.physicsManager.world),this.sideRamp=this.mainHolder.getSprite("pin-ball/side-ramp"),this.rampTest=this.mainHolder.getSprite("pin-ball/ramp-ramp"),this.sideRamp.position.x=Game.stageWidth+98,this.sideRamp.position.y=-250,this.sideRamp.scale.y=.7,this.rampCover=this.mainHolder.getSprite("pin-ball/ramp-cover"),this.rampCover.position.x=Game.stageWidth+98,this.rampCover.position.y=-250,this.rampCover.scale.y=.7,this.iceBottom=this.mainHolder.getSprite("pin-ball/ice-bottom"),this.powerupSave=this.mainHolder.getSprite("pin-ball/powerup-save"),this.bumperAngleLeft=this.mainHolder.getSprite("pin-ball/left-angle-bumper"),this.bumperAngleLight=this.mainHolder.getSprite("pin-ball/left-light-bumper"),this.lowerContainer=this.mainHolder.getContainer("pin-ball/lower-container"),this.upperContainer=this.mainHolder.getContainer("pin-ball/upper-container"),this.rightAngleHolder=this.mainHolder.getContainer("pin-ball/right-angle-holder"),this.snowmanHolder=this.rightAngleHolder.getContainer("pin-ball/snowman-holder"),this.snowmanHead=this.snowmanHolder.getSprite("pin-ball/snowman-head"),this.snowmanBody=this.snowmanHolder.getSprite("pin-ball/snowman-body"),this.iceContainer=this.mainHolder.getContainer("pin-ball/ice-upper-holder"),this.iceBottomLeft=this.iceContainer.getSprite("pin-ball/ice-bottom-left"),this.iceTopLeft=this.iceContainer.getSprite("pin-ball/ice-top-left"),this.iceTopRight=this.iceContainer.getSprite("pin-ball/ice-top-right"),this.iceBottomRightA=this.mainHolder.getSprite("pin-ball/ice-bottom-right-a"),this.iceBottomRightB=this.mainHolder.getSprite("pin-ball/ice-bottom-right-b"),this.iceContainer.position.y=2*-Game.stageHeight-20,this.iceContainer.position.x=10,this.iceContainer.alpha=.8,this.upperDivide=this.mainHolder.getSprite("pin-ball/upper-divide"),this.upperBumper=this.mainHolder.getSprite("pin-ball/upper-bumper"),this.lowerContainer.addChild(this.iceContainer),this.pinball=this.pinballContainer,this.launcherFloor=this.mainHolder.getSprite("pin-ball/launcher-floor"),this.coverLeft=Game.displayStore.getAnimatedSprite("pin-ball/ice-frames"),this.coverRight=Game.displayStore.getAnimatedSprite("pin-ball/ice-frames"),this.coverLeft.animationSpeed=.3,this.coverRight.animationSpeed=.3,this.coverRight.loop=!1,this.coverLeft.loop=!1,this.coverLeft.scale.x=-1,this.coverRight.visible=!1,this.coverLeft.visible=!1,this.coverLeftReverse=Game.displayStore.getAnimatedSprite("pin-ball/ice-frames-reverse"),this.coverRightReverse=Game.displayStore.getAnimatedSprite("pin-ball/ice-frames-reverse"),this.coverLeftReverse.animationSpeed=.3,this.coverLeftReverse.scale.x=-1,this.coverRightReverse.loop=!1,this.coverLeftReverse.loop=!1,this.coverRightReverse.animationSpeed=.3,this.ballShadow=Game.displayStore.getSprite("pin-ball/pinball-shadow"),this.physicsManager.bindSpriteToBody(this.pinball,this.physicsManager.pinballBody),this.wallChunkLeft=Game.displayStore.getSprite("pin-ball/wall-chunk-left"),this.wallChunkLeft.position.y=2*-Game.stageHeight-8,this.wallChunkLeft.height=3*Game.stageHeight+80,this.wallChunkRight=Game.displayStore.getSprite("pin-ball/wall-chunk-right"),this.wallChunkRight.position.x=Game.stageWidth+98,this.wallChunkRight.position.y=2*-Game.stageHeight-8,this.wallChunkRight.height=3*Game.stageHeight+80,this.wallChunkRightUpper=Game.displayStore.getSprite("pin-ball/wall-chunk-right-upper"),this.wallChunkRightUpper.position.x=Game.stageWidth+98,this.wallChunkRightUpper.position.y=2*-Game.stageHeight-8,this.wallChunkRightUpper.height=2*Game.stageHeight+80,this.wallChunkRightInner=Game.displayStore.getSprite("pin-ball/wall-chunk-right-inner"),this.wallChunkRightInner.position.x=Game.stageWidth-15,this.wallChunkRightInner.position.y=0,this.wallChunkRightInner.height=3.2*Game.stageHeight,this.iceShadow=this.mainHolder.getSprite("pin-ball/ice-upper-shadow"),this.iceShadow.position.y=2*-Game.stageHeight-50,this.iceShadow.position.x=Game.stageWidth/2+60,this.wallChunkTop=Game.displayStore.getSprite("pin-ball/wall-chunk-top"),this.wallChunkTop.position.x=Game.stageWidth/2+52,this.wallChunkTop.position.y=2*-Game.stageHeight,this.wallChunkTop.width=Game.stageWidth+120,this.circleBumper1=this.mainHolder.getContainer("pin-ball/circle-bumper-1-container"),this.circleBumper1.position.x=Game.stageWidth/2+70,this.circleBumper1.position.y=-Game.stageHeight/2-40,this.circleBumper2=this.mainHolder.getContainer("pin-ball/circle-bumper-2-container"),this.circleBumper2.position.x=Game.stageWidth/2-200,this.circleBumper2.position.y=-Game.stageHeight/2-200,this.circleBumper3=this.mainHolder.getContainer("pin-ball/circle-bumper-3-container"),this.circleBumper3.position.x=Game.stageWidth/2+120,this.circleBumper3.position.y=-Game.stageHeight-20,this.iceCircle=this.circleBumper3.getSprite("pin-ball/circle-bumper-3-base"),this.treeCircle=this.circleBumper2.getSprite("pin-ball/circle-bumper-2-base"),this.iglooCircle=this.circleBumper1.getSprite("pin-ball/circle-bumper-1-base"),this.bumperGlow1=this.circleBumper3.getSprite("pin-ball/circle-bumper-3-glow"),this.bumperGlow2=this.circleBumper2.getSprite("pin-ball/circle-bumper-2-glow"),this.bumperGlow3=this.circleBumper1.getSprite("pin-ball/circle-bumper-1-glow"),this.bumperGlow1.blendMode=PIXI.BLEND_MODES.ADD,this.bumperGlow2.blendMode=PIXI.BLEND_MODES.ADD,this.bumperGlow3.blendMode=PIXI.BLEND_MODES.ADD,this.bumperGlow1.visible=!1,this.bumperGlow2.visible=!1,this.bumperGlow3.visible=!1,this.bumpers=new Array,this.bumpers.push({body:this.iceCircle,glow:this.bumperGlow1}),this.bumpers.push({body:this.treeCircle,glow:this.bumperGlow2}),this.bumpers.push({body:this.iglooCircle,glow:this.bumperGlow3}),this.gateLight1=Game.displayStore.getContainer("pin-ball/gate-light-1"),this.gateLight2=Game.displayStore.getContainer("pin-ball/gate-light-2"),this.gateLight3=Game.displayStore.getContainer("pin-ball/gate-light-3"),this.upperLight1=Game.displayStore.getContainer("pin-ball/upper-light-1"),this.upperLight2=Game.displayStore.getContainer("pin-ball/upper-light-2"),this.lightGateSets=new Array,this.lightGateSets.push({greenLight:Game.displayStore.getSprite("pin-ball/green-light"),redLight:Game.displayStore.getSprite("pin-ball/red-light")}),this.lightGateSets.push({greenLight:Game.displayStore.getSprite("pin-ball/green-light"),redLight:Game.displayStore.getSprite("pin-ball/red-light")}),this.lightGateSets.push({greenLight:Game.displayStore.getSprite("pin-ball/green-light"),redLight:Game.displayStore.getSprite("pin-ball/red-light")}),this.lightGateSets.push({greenLight:Game.displayStore.getSprite("pin-ball/green-light"),redLight:Game.displayStore.getSprite("pin-ball/red-light")}),this.lightGateSets.push({greenLight:Game.displayStore.getSprite("pin-ball/green-light"),redLight:Game.displayStore.getSprite("pin-ball/red-light")}),this.gateLight1.addChild(this.lightGateSets[0].redLight),this.gateLight1.addChild(this.lightGateSets[0].greenLight),this.gateLight2.addChild(this.lightGateSets[1].redLight),this.gateLight2.addChild(this.lightGateSets[1].greenLight),this.gateLight3.addChild(this.lightGateSets[2].redLight),this.gateLight3.addChild(this.lightGateSets[2].greenLight),this.upperLight1.addChild(this.lightGateSets[3].redLight),this.upperLight1.addChild(this.lightGateSets[3].greenLight),this.upperLight2.addChild(this.lightGateSets[4].redLight),this.upperLight2.addChild(this.lightGateSets[4].greenLight),this.gateLight1.position.x=Game.stageWidth/2-180,this.gateLight2.position.x=Game.stageWidth/2,this.gateLight3.position.x=Game.stageWidth/2+180,this.gateLight1.position.y=1.5*-Game.stageHeight,this.gateLight2.position.y=1.5*-Game.stageHeight,this.gateLight3.position.y=1.5*-Game.stageHeight,this.upperLight1.position.y=1*-Game.stageHeight,this.upperLight2.position.y=1*-Game.stageHeight,this.upperLight1.position.x=70,this.upperLight2.position.x=200,this.lightGateSets[0].greenLight.visible=!1,this.lightGateSets[1].greenLight.visible=!1,this.lightGateSets[2].greenLight.visible=!1,this.lightGateSets[3].greenLight.visible=!1,this.lightGateSets[4].greenLight.visible=!1,this.lightGateSets[0].redLight.visible=!0,this.lightGateSets[1].redLight.visible=!0,this.lightGateSets[2].redLight.visible=!0,this.lightGateSets[3].redLight.visible=!0,this.lightGateSets[4].redLight.visible=!0;for(m=0;m<this.lightGateSets.length;m++)this.lightGateSets[m].greenLight.blendMode=PIXI.BLEND_MODES.ADD,this.lightGateSets[m].redLight.blendMode=PIXI.BLEND_MODES.ADD;if(this.gateBlock1=this.mainHolder.getContainer("pin-ball/gate-block-1-container"),this.gateBlock1.position.x=Game.stageWidth/2-270,this.gateBlock1.position.y=1.5*-Game.stageHeight,this.gateBlock2=this.mainHolder.getContainer("pin-ball/gate-block-2-container"),this.gateBlock2.position.x=Game.stageWidth/2-90,this.gateBlock2.position.y=1.5*-Game.stageHeight,this.gateBlock3=this.mainHolder.getContainer("pin-ball/gate-block-3-container"),this.gateBlock3.position.x=Game.stageWidth/2+90,this.gateBlock3.position.y=1.5*-Game.stageHeight,this.gateBlock4=this.mainHolder.getContainer("pin-ball/gate-block-4-container"),this.gateBlock4.position.x=Game.stageWidth/2+270,this.gateBlock4.position.y=1.5*-Game.stageHeight,this.angleBlockLeft=this.mainHolder.getSprite("pin-ball/left-angle-block"),this.angleBlockLeft.position.x=0,this.angleBlockLeft.position.y=0-this.angleBlockLeft.height,this.rightBumper=this.mainHolder.getSprite("pin-ball/bumper-right"),this.rightBumper.position.x=Game.stageWidth/2+210,this.rightBumper.position.y=Game.stageHeight/2-200,this.rightBumper.scale.x=-1,this.leftBumper=this.mainHolder.getSprite("pin-ball/bumper-left"),this.leftBumper.position.x=Game.stageWidth/2-210,this.leftBumper.position.y=Game.stageHeight/2-200,this.rightBumperGlow=this.mainHolder.getSprite("pin-ball/bumper-glow-right"),this.rightBumperGlow.position.x=Game.stageWidth/2+295,this.rightBumperGlow.position.y=Game.stageHeight/2-320,this.rightBumperGlow.scale.x=-1,this.leftBumperGlow=this.mainHolder.getSprite("pin-ball/bumper-glow-left"),this.leftBumperGlow.position.x=Game.stageWidth/2-295,this.leftBumperGlow.position.y=Game.stageHeight/2-320,this.leftBumperGlow.blendMode=PIXI.BLEND_MODES.ADD,this.rightBumperGlow.blendMode=PIXI.BLEND_MODES.ADD,this.leftBumperGlow.alpha=0,this.rightBumperGlow.alpha=0,this.mainHolder.position.y=0,this.exitSlopeLeft=this.mainHolder.getContainer("pin-ball/exit-slope-left"),this.exitSlopeRight=this.mainHolder.getContainer("pin-ball/exit-slope-right"),this.exitSlopeRight.scale.x=-1,this.flipperLeft=Game.displayStore.getSprite("pin-ball/flipper-left"),this.flipperRight=Game.displayStore.getSprite("pin-ball/flipper-right"),this.physicsManager.bindSpriteToBody(this.flipperLeft,this.physicsManager.leftFlipperBody),this.physicsManager.bindSpriteToBody(this.flipperRight,this.physicsManager.rightFlipperBody),this.launcher=Game.displayStore.getSprite("pin-ball/pull-back"),this.physicsManager.bindSpriteToBody(this.launcher,this.physicsManager.launcherBody),this.launcherSpring=Game.displayStore.getSprite("pin-ball/spring"),this.launcherSpring.position.x=Game.stageWidth+45,this.launcherSpring.position.y=Game.stageHeight+70,this.launcherSpring.scale.y=2.15,this.topCurveLeft=this.mainHolder.getSprite("pin-ball/exit-ramp-outer-left"),this.topCurveRight=this.mainHolder.getSprite("pin-ball/exit-ramp-outer-right"),this.topCurveLeft.scale.x=-1,this.topCurveLeft.position.x=this.topCurveLeft.width/2+14,this.topCurveRight.position.x=Game.stageWidth-this.topCurveLeft.width/2+100,this.topCurveLeft.position.y=2*-Game.stageHeight+this.topCurveLeft.height/2,this.topCurveRight.position.y=2*-Game.stageHeight+this.topCurveRight.height/2,this.leftFlipperBracket=this.mainHolder.getSprite("pin-ball/flipper-bracket-left"),this.leftFlipperBracket.position.x=202,this.leftFlipperBracket.position.y=218,this.rightFlipperBracket=this.mainHolder.getSprite("pin-ball/flipper-bracket-right"),this.rightFlipperBracket.position.x=Game.stageWidth-202,this.rightFlipperBracket.scale.x=-1,this.rightFlipperBracket.position.y=218,this.launcherFloor.scale.y=2.5*Game.stageHeight,this.launcherFloor.position.x=Game.stageWidth+40,this.launcherFloor.position.y=Game.stageHeight+100,this.coverLeft.position.x=75,this.coverLeft.position.y=Game.stageHeight-150,this.coverRight.position.x=Game.stageWidth-75,this.coverRight.position.y=Game.stageHeight-150,this.coverLeftReverse.position.x=75,this.coverLeftReverse.position.y=Game.stageHeight-150,this.coverLeftReverse.visible=!0,this.coverRightReverse.visible=!0,this.coverLeftReverse.gotoAndStop(0),this.coverRightReverse.gotoAndStop(0),this.coverRightReverse.position.x=Game.stageWidth-75,this.coverRightReverse.position.y=Game.stageHeight-150,this.rightAngleHolder.position.x=Game.stageWidth-160,this.rightAngleHolder.position.y=-Game.stageHeight/2-30,this.upperBumper.position.x=135,this.upperDivide.position.x=135,this.upperBumper.position.y=1.4*-Game.stageHeight,this.upperDivide.position.y=-Game.stageHeight,this.lowerContainer.addChild(this.upperLight1),this.lowerContainer.addChild(this.upperLight2),this.iceBottom.position.x=Game.stageWidth/2,this.iceBottom.position.y=Game.stageHeight+this.iceBottom.height,this.powerupSave.position.x=Game.stageWidth/2-this.powerupSave.width/2-10,this.powerupSave.position.y=Game.stageHeight-55,this.powerupSave.visible=!1,this.rampFrames.position.x=Game.stageWidth-180,this.rampFrames.position.y=-Game.stageHeight/2-80,this.rampFrames.play(),this.rampFrames.rotation=.05,this.rampFramesAdd.position.x=Game.stageWidth-180,this.rampFramesAdd.position.y=-Game.stageHeight/2-80,this.rampFramesAdd.play(),this.rampFramesAdd.rotation=.05,this.rampFramesAdd.blendMode=PIXI.BLEND_MODES.ADD,this.floorHolder1.alpha=.8,this.floorHolder2.alpha=.8,this.floorHolder3.alpha=.8,this.sideTest=Game.displayStore.getSprite("pin-ball/side-test"),this.sideTest.width=4*Game.stageHeight,this.sideTest.height=100,this.physicsManager.bindSpriteToBody(this.sideTest,this.physicsManager.rightWallBody),this.rampTest=Game.displayStore.getSprite("pin-ball/ramp-test"),this.rampTest.width=10,this.rampTest.height=250,this.physicsManager.bindSpriteToBody(this.rampTest,this.physicsManager.iceRampSensorBody),this.mainHolder.addChild(this.floorHolderBack),this.mainHolder.addChild(this.floorHolderFront),this.mainHolder.addChild(this.iceBottom),this.mainHolder.addChild(this.powerupSave),this.mainHolder.addChild(this.launcherFloor),this.mainHolder.addChild(this.boostParticlesContainer),this.mainHolder.addChild(this.wallChunkRightInner),this.mainHolder.addChild(this.gateBlock1),this.mainHolder.addChild(this.gateBlock2),this.mainHolder.addChild(this.gateBlock3),this.mainHolder.addChild(this.gateBlock4),this.mainHolder.addChild(this.gateLight1),this.mainHolder.addChild(this.gateLight2),this.mainHolder.addChild(this.gateLight3),this.mainHolder.addChild(this.ticketsLowerContainer),this.mainHolder.addChild(this.bumperAngleLeft),this.mainHolder.addChild(this.bumperAngleLight),this.bumperAngleLight.alpha=0,this.bumperAngleLight.blendMode=PIXI.BLEND_MODES.ADD,this.bumperAngleLeft.position.x=70,this.bumperAngleLight.position.x=70,this.bumperAngleLeft.position.y=-210,this.bumperAngleLight.position.y=-210,this.mainHolder.addChild(this.iceShadow),this.mainHolder.addChild(this.angleBlockLeft),this.mainHolder.addChild(this.upperContainer),this.mainHolder.addChild(this.iceBottomRightA),this.mainHolder.addChild(this.iceBottomRightB),0==Game.isLowEndIPad){this.ballParticles=new Array;for(m=0;m<60;m++){var d=Game.displayStore.getSprite("pin-ball/skid-particle"),u=Game.displayStore.getSprite("pin-ball/skid-powerup");this.ballParticles.push({active:!1,sprite:d,powerUpSprite:u}),this.ballParticles[m].sprite.position.y=-5e3,this.ballParticles[m].powerUpSprite.position.y=-5e3,this.mainHolder.addChild(this.ballParticles[m].sprite),this.mainHolder.addChild(this.ballParticles[m].powerUpSprite),this.ballParticles[m].powerUpSprite.blendMode=PIXI.BLEND_MODES.ADD}}this.tickets=[];for(m=0;m<6;m++){var g=new PinBallTicket(this,m);this.tickets.push(g)}this.mainHolder.addChild(this.rampFrames),this.mainHolder.addChild(this.rampFramesAdd),this.mainHolder.addChild(this.wallChunkRight),this.mainHolder.addChild(this.sideRamp),this.mainHolder.addChild(this.ballShadow),this.mainHolder.addChild(this.pinball),this.mainHolder.addChild(this.rampCover),this.mainHolder.addChild(this.coverLeft),this.mainHolder.addChild(this.coverRight),this.mainHolder.addChild(this.coverLeftReverse),this.mainHolder.addChild(this.coverRightReverse),this.mainHolder.addChild(this.rightAngleHolder),this.mainHolder.addChild(this.rightFlipperBracket),this.mainHolder.addChild(this.leftFlipperBracket),this.mainHolder.addChild(this.circleBumper1),this.mainHolder.addChild(this.circleBumper2),this.mainHolder.addChild(this.circleBumper3),this.mainHolder.addChild(this.rightBumper),this.mainHolder.addChild(this.leftBumper),this.mainHolder.addChild(this.leftBumperGlow),this.mainHolder.addChild(this.rightBumperGlow),this.mainHolder.addChild(this.wallChunkTop),this.mainHolder.addChild(this.flipperLeft),this.mainHolder.addChild(this.flipperRight),this.mainHolder.addChild(this.launcherSpring),this.mainHolder.addChild(this.launcher),this.mainHolder.addChild(this.topCurveLeft),this.mainHolder.addChild(this.topCurveRight),this.mainHolder.addChild(this.exitSlopeLeft),this.mainHolder.addChild(this.exitSlopeRight),this.mainHolder.addChild(this.bottomLeftFlag),this.mainHolder.addChild(this.bottomRightFlag),this.mainHolder.addChild(this.lowerContainer),this.mainHolder.addChild(this.upperBumper),this.mainHolder.addChild(this.upperDivide),this.mainHolder.addChild(this.iceBottomRightB),this.mainHolder.addChild(this.wallChunkLeft);for(m=0;m<this.scoreBackingArray.length;m++)this.mainHolder.addChild(this.scoreBackingArray[m].sprite),this.scoreBackingArray[m].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.scoreBackingArray[m].sprite.position.x=-5e3;for(m=0;m<this.score100Array.length;m++)this.mainHolder.addChild(this.score100Array[m].sprite),this.score100Array[m].sprite.position.x=-5e3;for(m=0;m<this.score50Array.length;m++)this.mainHolder.addChild(this.score50Array[m].sprite),this.score50Array[m].sprite.position.x=-5e3;for(m=0;m<this.score500Array.length;m++)this.mainHolder.addChild(this.score500Array[m].sprite),this.score500Array[m].sprite.position.x=-5e3;for(m=0;m<this.score200Array.length;m++)this.mainHolder.addChild(this.score200Array[m].sprite),this.score200Array[m].sprite.position.x=-5e3;for(m=0;m<this.score1000Array.length;m++)this.mainHolder.addChild(this.score1000Array[m].sprite),this.score1000Array[m].sprite.position.x=-5e3;this.mainHolder.addChild(this.ticketsUpperContainer),this.mainHolder.addChild(this.wallChunkRightUpper),0==Game.isLowEndIPad&&(this.mainHolder.addChild(this.cloudHolder1),this.mainHolder.addChild(this.cloudHolder2),this.mainHolder.addChild(this.cloudHolder3),this.mainHolder.addChild(this.cloudHolder4)),this.container.addChild(this.mainHolder),this.container.addChild(this.pipHolder),this.ticketPositions=new Array,this.ticketPositions.push({position:new PIXI.Point(Game.stageWidth/2,Game.stageHeight/2+250),active:!1,lower:!0}),this.ticketPositions.push({position:new PIXI.Point(Game.stageWidth/2+70,1.8*Game.stageHeight),active:!1,lower:!0}),this.ticketPositions.push({position:new PIXI.Point(80,1.5*Game.stageHeight),active:!1,lower:!0}),this.ticketPositions.push({position:new PIXI.Point(Game.stageWidth/2+560,3*Game.stageHeight-350),active:!1,lower:!1}),this.ticketPositions.push({position:new PIXI.Point(Game.stageWidth/2+300,3*Game.stageHeight-80),active:!1,lower:!1}),this.ticketPositions.push({position:new PIXI.Point(Game.stageWidth/2+500,3*Game.stageHeight-150),active:!1,lower:!1}),this.currentLives=3,this.heartBG=Game.displayStore.getSprite("pin-ball/heart-bg"),this.container.addChild(this.heartBG),this.heartBG.position.x=109,this.heartBG.position.y=50,this.heartIcons=new Array;for(var m=0;m<3;m++)this.heartIcons.push({heart:Game.displayStore.getSprite("pin-ball/heart-icon"),active:!0}),this.container.addChild(this.heartIcons[m].heart),this.heartIcons[m].heart.position.x=100,this.heartIcons[m].heart.position.y=50,this.heartIcons[m].heart.visible=!0,this.heartIcons[m].heart.scale.x=0,this.heartIcons[m].heart.scale.y=0;this.heartIcons[0].heart.position.x-=70,this.heartIcons[2].heart.position.x+=70,this.scoreHolder=Game.displayStore.getContainer("pin-ball/score-holder"),this.scoreText=Game.displayStore.getBitmapText("pin-ball/score-font"),this.scoreText.scale.x=this.scoreText.scale.y=.75,this.scoreText.position.x=this.scoreHolder.position.x-40,this.scoreText.position.y=this.scoreHolder.position.y-37,this.container.addChild(this.scoreHolder),this.scoreHolder.addChild(this.scoreText),this.scoreHolder.scale.x=this.scoreHolder.scale.y=1,this.scoreHolder.position.y=130,this.scoreHolder.position.x=this.scoreHolder.width/2-20,this.score=0,this.interpolatedScore=0,this.scoreText.text=String(this.score),1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("pin-ball",!0)},t.prototype.setUpPinBall=function(e){this.pinballContainer=Game.displayStore.getContainer("pin-ball/pinball-container"),"spongebob"==this.character?this.characterContainer=Game.displayStore.getContainer("pin-ball/spongebob-container"):this.characterContainer=Game.displayStore.getContainer("pin-ball/patrick-container"),this.happyFace=this.characterContainer.getSprite("pin-ball/pinball-happy"),this.shockedFace=this.characterContainer.getSprite("pin-ball/pinball-shocked"),this.grinFace=this.characterContainer.getSprite("pin-ball/pinball-grin"),this.nervousFace=this.characterContainer.getSprite("pin-ball/pinball-nervous"),this.pinBallTop=this.characterContainer.getSprite("pin-ball/pinball-top"),this.pinballContainer.addChild(this.characterContainer)},t.prototype.activatePowerUpEffect=function(){if(this.powerUpisActive=!0,this.powerupSave.visible=!0,this.physicsManager.activatePowerup(),0==Game.isLowEndIPad)for(var e=0;e<this.ballParticles.length;e++)this.ballParticles[e].sprite.visible=!1,this.ballParticles[e].powerUpSprite.visible=!0},t.prototype.deactivatePowerUpEffect=function(){if(this.powerUpisActive=!1,this.powerupSave.visible=!1,this.physicsManager.deactivatePowerup(),0==Game.isLowEndIPad)for(var e=0;e<this.ballParticles.length;e++)this.ballParticles[e].sprite.visible=!0,this.ballParticles[e].powerUpSprite.visible=!1},t.prototype.placeBallParticle=function(e,t){if(Math.abs(this.physicsManager.pinballBody.velocity[0]+this.physicsManager.pinballBody.velocity[1])>50)for(var i=0;i<this.ballParticles.length;i++)if(0==this.ballParticles[i].active)return this.ballParticles[i].active=!0,void(0==this.powerUpisActive?(this.ballParticles[i].sprite.alpha=.8,this.ballParticles[i].powerUpSprite.visible=!1,this.ballParticles[i].sprite.visible=!0,this.ballParticles[i].sprite.position.x=e,this.ballParticles[i].sprite.position.y=t,this.ballParticles[i].sprite.scale.x=Game.getRandom(1,2),this.ballParticles[i].sprite.scale.y=this.ballParticles[i].sprite.scale.x,this.ballParticles[i].sprite.rotation=Game.getRandom(0,2*Math.PI)):(this.ballParticles[i].powerUpSprite.alpha=.9,this.ballParticles[i].sprite.visible=!1,this.ballParticles[i].powerUpSprite.visible=!0,this.ballParticles[i].powerUpSprite.position.x=e,this.ballParticles[i].powerUpSprite.position.y=t,this.ballParticles[i].powerUpSprite.scale.x=Game.getRandom(1.5,2.5),this.ballParticles[i].powerUpSprite.scale.y=this.ballParticles[i].powerUpSprite.scale.x,this.ballParticles[i].powerUpSprite.rotation=Game.getRandom(0,2*Math.PI)))},t.prototype.spawnTicket=function(){for(var e,t=0;t<this.tickets.length;t++)if(1==this.tickets[t].available){e=this.tickets[t];break}if(e){var i=this.getNewTicketPositon();e.spawn(this.ticketsLowerContainer,this.ticketsUpperContainer,this.mainHolder,i.position,i.lower),this.currentTickets++}},t.prototype.moveClouds=function(){for(var e=0;e<this.clouds.length;e++){var t=this.clouds[e].cloud;t.position.x+=this.clouds[e].speed,t.position.x>Game.stageWidth+200&&(t.position.x=0-t.width,t.position.y=Game.getRandom(2*-Game.stageHeight,Game.stageHeight),t.scale.x=t.scale.y=Game.getRandom(.6,1))}},t.prototype.addScore=function(e){if(0==this.soundActive){this.soundActive=!0;var t;Game.getRandom(0,1)>.6&&(t="patrick"==this.character?["pin-ball/patrick-burp.mp3","pin-ball/patrick-laughing.mp3"]:["pin-ball/sb-gotcha.mp3","pin-ball/sb-laugh.mp3"],Game.playSound(t[Game.getRandom(0,1,!0)],.5)),this.startSoundTimer()}this.changeFace("grin"),this.placeScoreBackingAsset(),1==this.powerUpisActive?(this.score+=2*e,this.placeScoreAsset(2*e)):(this.placeScoreAsset(e),this.score+=e)},t.prototype.changeFace=function(e){if(1!=this.expressionActive)switch(e){case"neutral":this.happyFace.visible=!0,this.shockedFace.visible=!1,this.nervousFace.visible=!1,this.grinFace.visible=!1;break;case"shocked":this.expressionActive=!0,this.happyFace.visible=!1,this.shockedFace.visible=!0,this.nervousFace.visible=!1,this.grinFace.visible=!1,this.expressionDelay=TweenMax.delayedCall(1.5,function(){this.expressionActive=!1,this.changeFace("neutral"),this.expressionDelay=this.killTween(this.expressionDelay)},null,this);break;case"nervous":this.expressionActive=!0,this.happyFace.visible=!1,this.shockedFace.visible=!1,this.nervousFace.visible=!0,this.grinFace.visible=!1,this.expressionDelay=TweenMax.delayedCall(1.5,function(){this.expressionActive=!1,this.changeFace("neutral"),this.expressionDelay=this.killTween(this.expressionDelay)},null,this);break;case"grin":this.expressionActive=!0,this.happyFace.visible=!1,this.shockedFace.visible=!1,this.nervousFace.visible=!1,this.grinFace.visible=!0,this.expressionDelay=TweenMax.delayedCall(1.5,function(){this.expressionActive=!1,this.changeFace("neutral"),this.expressionDelay=this.killTween(this.expressionDelay)},null,this)}},t.prototype.placeScoreBackingAsset=function(){for(var e=this.pinball.position.x,t=this.pinball.position.y,i=0;i<this.scoreBackingArray.length;i++)if(0==this.scoreBackingArray[i].active){this.scoreBackingArray[i].active=!0,this.scoreBackingArray[i].sprite.alpha=1,this.scoreBackingArray[i].sprite.position.x=e,this.scoreBackingArray[i].sprite.position.y=t,this.scoreBackingArray[i].sprite.scale.x=1,this.scoreBackingArray[i].sprite.scale.y=1;break}},t.prototype.placeScoreAsset=function(e){var t=this.pinball.position.x,i=this.pinball.position.y;switch(e){case 100:for(s=0;s<this.score100Array.length;s++)if(0==this.score100Array[s].active){this.score100Array[s].active=!0,this.score100Array[s].sprite.alpha=1,this.score100Array[s].sprite.position.x=t,this.score100Array[s].sprite.position.y=i,this.score100Array[s].sprite.tint=5177088,this.score100Array[s].sprite.scale.x=1,this.score100Array[s].sprite.scale.y=1;break}break;case 200:for(s=0;s<this.score200Array.length;s++)if(0==this.score200Array[s].active){this.score200Array[s].active=!0,this.score200Array[s].sprite.alpha=1,this.score200Array[s].sprite.position.x=t,this.score200Array[s].sprite.position.y=i,this.score200Array[s].sprite.tint=5177088,this.score200Array[s].sprite.scale.x=1,this.score200Array[s].sprite.scale.y=1;break}break;case 1e3:for(s=0;s<this.score1000Array.length;s++)if(0==this.score200Array[s].active){this.score1000Array[s].active=!0,this.score1000Array[s].sprite.alpha=1,this.score1000Array[s].sprite.position.x=t,this.score1000Array[s].sprite.position.y=i,this.score1000Array[s].sprite.tint=13436927,this.score1000Array[s].sprite.scale.x=1,this.score1000Array[s].sprite.scale.y=1;break}break;case 50:for(s=0;s<this.score50Array.length;s++)if(0==this.score50Array[s].active){this.score50Array[s].active=!0,this.score50Array[s].sprite.alpha=1,this.score50Array[s].sprite.position.x=t,this.score50Array[s].sprite.position.y=i,this.score50Array[s].sprite.tint=5177088,this.score50Array[s].sprite.scale.x=1,this.score50Array[s].sprite.scale.y=1;break}break;case 500:0==this.soundActive&&(this.soundActive=!0,"patrick"==this.character?Game.playSound("pin-ball/patrick-burp.mp3"):Game.playSound("pin-ball/sb-woah.mp3"),this.startSoundTimer());for(var s=0;s<this.score500Array.length;s++)if(0==this.score500Array[s].active){this.score500Array[s].active=!0,this.score500Array[s].sprite.alpha=1,this.score500Array[s].sprite.position.x=t,this.score500Array[s].sprite.position.y=i,this.score500Array[s].sprite.tint=13436927,this.score500Array[s].sprite.scale.x=1,this.score500Array[s].sprite.scale.y=1;break}}},t.prototype.levelStateChange=function(){"upper"==this.physicsManager.levelState&&(this.lowerContainer.removeChild(this.iceContainer),this.lowerContainer.removeChild(this.upperLight1),this.lowerContainer.removeChild(this.upperLight2),this.upperContainer.addChild(this.iceContainer),this.upperContainer.addChild(this.upperLight1),this.upperContainer.addChild(this.upperLight2)),"lower"!=this.physicsManager.levelState&&"reset"!=this.physicsManager.levelState||(this.upperContainer.removeChild(this.iceContainer),this.upperContainer.removeChild(this.upperLight1),this.upperContainer.removeChild(this.upperLight2),this.lowerContainer.addChild(this.iceContainer),this.lowerContainer.addChild(this.upperLight1),this.lowerContainer.addChild(this.upperLight2))},t.prototype.bumperEffect=function(e){switch(e){case 0:this.bumper1Animate=!0;break;case 1:this.bumper2Animate=!0;break;case 2:this.bumper3Animate=!0;break;case 3:this.bumper4Animate=!0;break;case 4:this.bumper5Animate=!0}},t.prototype.showPip=function(e){"left"==e&&0==this.leftPipAvailable||"right"==e&&0==this.rightPipAvailable||(this.pipHolder.visible=!0,"left"==e?(this.leftPipAvailable=!1,this.pipLeft.visible=!0,this.pipRight.visible=!1,this.pipGateReverse.position.x=-150,this.pipGateReverse.position.y=-40,this.pipGateReverse.scale.x=-1.3,this.pipGateReverse.loop=!1,this.pipGateReverse.animationSpeed=.7,this.pipGateReverse.scale.y=1.3,this.pipDelayTween=TweenMax.delayedCall(.7,function(){this.pipGateReverse.gotoAndPlay(0)},null,this)):(this.rightPipAvailable=!1,this.pipRight.visible=!0,this.pipLeft.visible=!1,this.pipGateReverse.position.x=150,this.pipGateReverse.position.y=-40,this.pipGateReverse.scale.x=1.3,this.pipGateReverse.loop=!1,this.pipGateReverse.animationSpeed=.3,this.pipGateReverse.scale.y=1.3,this.pipDelayTween=TweenMax.delayedCall(.7,function(){this.pipGateReverse.gotoAndPlay(0)},null,this)),this.pipSparkle1.rotation=0,this.pipSparkle2.rotation=0,this.showPipAnimation=this.killTween(this.showPipAnimation),this.showPipAnimation=new TimelineMax,this.showPipAnimation.add([TweenMax.to(this.pipHolder.scale,.4,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.pipGlow.scale,.4,{x:6,y:6,ease:Back.easeOut}),TweenMax.to(this.pipSparkle1.scale,.4,{x:3,y:3,ease:Back.easeOut}),TweenMax.to(this.pipSparkle1,10,{rotation:2*-Math.PI,repeat:-1,ease:Power0.easeIn}),TweenMax.to(this.pipSparkle2.scale,.4,{x:3,y:3,ease:Back.easeOut}),TweenMax.to(this.pipSparkle2,10,{rotation:2*Math.PI,repeat:-1,ease:Power0.easeIn})],0),this.pipCounterActive=!0,this.pipCounter=0)},t.prototype.hidePip=function(){this.hidePipAnimation=this.killTween(this.hidePipAnimation),this.hidePipAnimation=new TimelineMax,this.hidePipAnimation.add([TweenMax.to(this.pipHolder.scale,.4,{x:0,y:0,ease:Back.easeIn}),TweenMax.to(this.pipSparkle1.scale,.4,{x:0,y:0,ease:Back.easeIn}),TweenMax.to(this.pipGlow.scale,.4,{x:0,y:0,ease:Back.easeIn}),TweenMax.to(this.pipSparkle2.scale,.4,{x:0,y:0,ease:Back.easeIn})],0),this.hidePipAnimation.add([TweenMax.delayedCall(.5,function(){this.pipGateReverse.gotoAndStop(0)},null,this)])},t.prototype.activateBumperLight=function(e){switch(e){case 0:this.gate6Active=!0,this.addScore(100)}},t.prototype.activateLightGate=function(e){switch(this.addScore(50),e){case 0:this.gate1Active=!0;break;case 1:this.gate2Active=!0;break;case 2:this.gate3Active=!0;break;case 3:this.gate4Active=!0,this.openGutterGate(1),this.showPip("left");break;case 4:this.gate5Active=!0,this.openGutterGate(2),this.showPip("right")}1==this.gate1Active&&1==this.gate2Active&&1==this.gate3Active&&(Game.playSound("pin-ball/active-gates.mp3",.8),this.deactivateLightDelay=TweenMax.delayedCall(1,function(){this.addScore(500),this.deactivateLightGate(0),this.deactivateLightGate(1),this.deactivateLightGate(2),this.gate1Active=!1,this.gate2Active=!1,this.gate3Active=!1},null,this)),this.lightGateSets[e].greenLight.visible=!0,this.lightGateSets[e].redLight.visible=!1},t.prototype.deactivateLightGate=function(e){switch(this.lightGateSets[e].greenLight.visible=!1,this.lightGateSets[e].redLight.visible=!0,e){case 0:this.gate1Active=!1;break;case 1:this.gate2Active=!1;break;case 2:this.gate3Active=!1;break;case 3:this.gate4Active=!1,this.closeGutterGate(1);break;case 4:this.gate5Active=!1,this.closeGutterGate(2)}},t.prototype.loseLife=function(){if(1!=this.gameOverTriggered){this.currentLives--,this.changeFace("shocked"),0==this.soundActive&&(this.soundActive=!0,"patrick"==this.character?Game.playSound("pin-ball/patrick-happening.mp3",.5):Game.playSound("pin-ball/sb-distance.mp3"),this.startSoundTimer());for(var e=this.heartIcons.length-1;e>=0;e--)if(0!=this.heartIcons[e].active)return this.heartIcons[e].active=!1,0==Game.isLowEndIPad?(this.losingHeart=!0,this.heartNumber=e,this.targetHeartScale=0):this.heartIcons[e].heart.visible=!1,void this.checkGameOver()}},t.prototype.checkGameOver=function(){0==this.currentLives&&(this.gameOverTriggered=!0,this.endGame(this))},t.prototype.endGame=function(e){e.wristbandOverlay.endGame(e.score)},t.prototype.secondChanceUse=function(){this.currentLives<1&&this.addLife(),this.gameOverTriggered=!1},t.prototype.addLife=function(){this.currentLives<3&&this.currentLives++,0==this.soundActive&&(this.soundActive=!0,"patrick"==this.character?Game.playSound("pin-ball/patrick-laughing.mp3"):Game.playSound("pin-ball/sb-woah.mp3"),this.startSoundTimer());for(var e=0;e<this.heartIcons.length;e++)if(1!=this.heartIcons[e].active)return this.heartIcons[e].active=!0,void(0==Game.isLowEndIPad?(this.losingHeart=!0,this.heartNumber=e,this.targetHeartScale=1):this.heartIcons[e].heart.visible=!0)},t.prototype.openGutterGate=function(e){switch(e){case 1:this.coverLeftReverse.play(),this.coverLeft.visible=!1,this.coverLeftReverse.visible=!0,this.lightGateSets[3].greenLight.visible=!0,this.lightGateSets[3].redLight.visible=!1;break;case 2:this.coverRightReverse.play(),this.coverRight.visible=!1,this.coverRightReverse.visible=!0,this.lightGateSets[4].greenLight.visible=!0,this.lightGateSets[4].redLight.visible=!1}},t.prototype.closeGutterGate=function(e){1==e?(this.gate4Active=!1,this.coverLeft.play(),this.coverLeft.visible=!0,this.coverLeftReverse.visible=!1,this.lightGateSets[3].greenLight.visible=!1,this.lightGateSets[3].redLight.visible=!0,this.leftPipAvailable=!0):(this.gate5Active=!1,this.coverRight.play(),this.coverRight.visible=!0,this.coverRightReverse.visible=!1,this.lightGateSets[4].greenLight.visible=!1,this.lightGateSets[4].redLight.visible=!0,this.rightPipAvailable=!0)},t.prototype.losePinball=function(){Game.stopSound("pin-ball/bounce-collision.mp3"),Game.playSound("pin-ball/lose-wobble.mp3",.5),this.loadedSpring=!1,this.ballInPlay=!1,this.upperContainer.removeChild(this.iceBottomRightB),this.lowerContainer.addChild(this.iceBottomRightB),this.loseLife(),this.ballReset=!1,this.physicsManager.pinballBody.damping=0,this.respawnDelay=TweenMax.delayedCall(1,function(){this.physicsManager.levelState="reset",this.physicsManager.levelStateChange(),this.physicsManager.pinballBody.velocity[0]=0,this.physicsManager.pinballBody.velocity[1]=0,this.physicsManager.rightWallBody.position[0]=Game.stageWidth+148,this.physicsManager.setBodyPos(this.physicsManager.pinballBody,Game.stageWidth+130,Game.stageHeight+100),this.physicsManager.pinballBody.velocity[0]=0,this.physicsManager.pinballBody.velocity[1]=0,this.respawnDelay=this.killTween(this.respawnDelay)},null,this)},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause")},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"pause-button":this.pause(!1);break;case"playbuttonlarge":this.resume()}},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.startGameplay=function(){this.game.ui.triggerEnjoyTheRide(),this.game.ui.setUI("gameplay-pinball"),this.game.powerUpManager.startGame(),this.heartTimeline=this.killTween(this.heartTimeline),0==Game.isLowEndIPad?(this.heartTimeline=new TimelineMax,this.heartTimeline.add([TweenMax.to(this.heartIcons[0].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:0}),TweenMax.to(this.heartIcons[1].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:.1}),TweenMax.to(this.heartIcons[2].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:.2})],.5)):(this.heartIcons[0].heart.scale.x=this.heartIcons[0].heart.scale.y=1,this.heartIcons[1].heart.scale.x=this.heartIcons[1].heart.scale.y=1,this.heartIcons[2].heart.scale.x=this.heartIcons[2].heart.scale.y=1)},t.prototype.removeTicket=function(e){this.ticketPositions[e].active=!1,this.currentTickets--,this.ticketCounter=0},t.prototype.getNewTicketPositon=function(){for(var e=0;e<this.ticketPositions.length;e++)if(0==this.ticketPositions[e].active)return this.ticketPositions[e].active=!0,this.ticketPositions[e]},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.sampleBallPosition=function(){this.oldPosX=this.newPosX,this.oldPosY=this.newPosY,this.newPosX=this.pinball.position.x,this.newPosY=this.pinball.position.y,this.ballDirectionAngle()},t.prototype.ballDirectionAngle=function(){this.ballAngle=180*Math.atan2(this.oldPosY-this.newPosY,this.oldPosX-this.newPosX)/Math.PI},t.prototype.getPinBallPosition=function(){return this.pinball.position},t.prototype.getLives=function(){for(var e=0,t=0;t<this.heartIcons.length;t++)1==this.heartIcons[t].active&&e++;return{currentLives:e,totalLives:this.heartIcons.length}},t.prototype.scaleDownHeart=function(e,t){switch(this.heartIcons[e].heart.scale.x+=(t-this.heartIcons[e].heart.scale.x)/5,this.heartIcons[e].heart.scale.y+=(t-this.heartIcons[e].heart.scale.y)/5,t){case 0:this.heartIcons[e].heart.scale.x<=t&&(this.losingHeart=!1,this.heartIcons[e].heart.scale.x=0,this.heartIcons[e].heart.scale.y=0);break;case 1:this.heartIcons[e].heart.scale.x>=t&&(this.losingHeart=!1,this.heartIcons[e].heart.scale.x=1,this.heartIcons[e].heart.scale.y=1)}},t.prototype.startSoundTimer=function(){this.soundTimer=TweenMax.delayedCall(2,function(){this.soundActive=!1,this.soundTimer=this.killTween(this.soundTimer)},null,this)},t.prototype.tick=function(){if(e.prototype.tick.call(this),1!=this.paused&&(this.floorHolderBack.position.y=-this.mainHolder.position.y/2.5,1!=this.tutorialOverlay.isOpen&&1!=this.wristbandOverlay.isOpen)){if(1==this.pipCounterActive&&++this.pipCounter>=this.pipCounterLimit&&(this.pipCounterActive=!1,this.pipCounter=0,this.hidePip()),0==Game.isLowEndIPad){if(1==this.powerUpisActive)if(this.boostParticlesCounter<this.boostParticles.length){var t=this.boostParticles[this.boostParticlesCounter];t.active=!0,t.sprite.position.x=this.mainHolder.toLocal(new PIXI.Point(0,0),this.pinballContainer).x,t.sprite.position.y=this.mainHolder.toLocal(new PIXI.Point(0,0),this.pinballContainer).y,t.sprite.alpha=Game.getRandom(.6,1),t.sprite.scale.x=t.sprite.scale.y=Game.getRandom(2,3),t.sprite.rotation=(this.ballAngle+180)%360,this.boostParticlesCounter++}else this.boostParticlesCounter=0;for(i=0;i<this.boostParticles.length;i++)1==this.boostParticles[i].active&&(this.boostParticles[i].sprite.alpha<=0&&(this.boostParticles[i].active=!1),this.boostParticles[i].sprite.alpha-=.05,this.boostParticles[i].sprite.scale.x-=.02,this.boostParticles[i].sprite.scale.y-=.02)}if(this.ticketCounter<this.ticketCounterLimit?this.ticketCounter++:(this.spawnTicket(),this.ticketCounter=0),0==Game.isLowEndIPad){++this.ballTrailCounter>=this.ballTrailCounterLimit&&this.placeBallParticle(this.pinball.position.x,this.pinball.position.y);for(i=0;i<this.ballParticles.length;i++)1==this.ballParticles[i].active&&(0==this.powerUpisActive?(this.ballParticles[i].sprite.alpha<=0&&(this.ballParticles[i].active=!1),this.ballParticles[i].sprite.alpha=this.ballParticles[i].sprite.alpha-.02,this.ballParticles[i].sprite.scale.x=this.ballParticles[i].sprite.scale.y-=.02):(this.ballParticles[i].powerUpSprite.alpha<=0&&(this.ballParticles[i].active=!1),this.ballParticles[i].powerUpSprite.alpha=this.ballParticles[i].powerUpSprite.alpha-.02,this.ballParticles[i].powerUpSprite.scale.x=this.ballParticles[i].powerUpSprite.scale.y+=.02))}this.interpolatedScore+=(this.score-this.interpolatedScore)/30,this.scoreText.text=String(Math.round(this.interpolatedScore));for(i=0;i<this.scoreBackingArray.length;i++)1==(s=this.scoreBackingArray[i]).active&&(s.sprite.alpha-=.02,s.sprite.scale.x+=.02,s.sprite.scale.y+=.02,s.sprite.position.y-=1,s.sprite.alpha<=0&&(s.active=!1));for(i=0;i<this.score500Array.length;i++)1==(s=this.score500Array[i]).active&&(s.sprite.alpha-=.02,s.sprite.position.y-=1,s.sprite.scale.x+=.02,s.sprite.scale.y+=.02,s.sprite.alpha<=0&&(s.active=!1));for(i=0;i<this.score1000Array.length;i++)1==(s=this.score1000Array[i]).active&&(s.sprite.alpha-=.02,s.sprite.position.y-=1,s.sprite.scale.x+=.02,s.sprite.scale.y+=.02,s.sprite.alpha<=0&&(s.active=!1));for(i=0;i<this.score200Array.length;i++)1==(s=this.score200Array[i]).active&&(s.sprite.alpha-=.02,s.sprite.position.y-=1,s.sprite.scale.x+=.02,s.sprite.scale.y+=.02,s.sprite.alpha<=0&&(s.active=!1));for(i=0;i<this.score50Array.length;i++)1==(s=this.score50Array[i]).active&&(s.sprite.alpha-=.02,s.sprite.position.y-=1,s.sprite.scale.x+=.02,s.sprite.scale.y+=.02,s.sprite.alpha<=0&&(s.active=!1));for(var i=0;i<this.score100Array.length;i++){var s=this.score100Array[i];1==s.active&&(s.sprite.alpha-=.02,s.sprite.position.y-=1,s.sprite.scale.x+=.02,s.sprite.scale.y+=.02,s.sprite.alpha<=0&&(s.active=!1))}"upper"==this.physicsManager.levelState&&this.physicsManager.attractPinball(this.physicsManager.pinballBody,this.physicsManager.iceHoleSensorBody),1==this.losingHeart&&this.scaleDownHeart(this.heartNumber,this.targetHeartScale),"upper"==this.physicsManager.levelState&&this.physicsManager.pinballBody.position[1]<600&&this.physicsManager.levelStateChange(!0),0==Game.isLowEndIPad&&this.moveClouds(),++this.sampleRate>10&&(this.sampleBallPosition(),this.sampleRate=0);1==this.bumper1Animate&&(this.bumperGlow1.visible=!0,this.bumpers[0].body.scale.x=this.bumpers[0].body.scale.y+=.08,this.bumpers[0].glow.scale.x=this.bumpers[0].glow.scale.y+=.08,this.bumpers[0].body.scale.x>=1.3&&(this.bumper1Animate=!1,this.bumperGlow1.visible=!1)),0==this.bumper1Animate&&this.bumpers[0].body.scale.x>1&&(this.bumpers[0].body.scale.x=this.bumpers[0].body.scale.y-=.05,this.bumpers[0].glow.scale.x=this.bumpers[0].glow.scale.y-=.05),1==this.bumper2Animate&&(this.bumperGlow2.visible=!0,this.bumpers[1].body.scale.x=this.bumpers[1].body.scale.y+=.08,this.bumpers[1].glow.scale.x=this.bumpers[1].glow.scale.y+=.08,this.bumpers[1].body.scale.x>=1.3&&(this.bumper2Animate=!1,this.bumperGlow2.visible=!1)),0==this.bumper2Animate&&this.bumpers[1].body.scale.x>1&&(this.bumpers[1].body.scale.x=this.bumpers[1].body.scale.y-=.05,this.bumpers[1].glow.scale.x=this.bumpers[1].glow.scale.y-=.05),1==this.bumper3Animate&&(this.bumperGlow3.visible=!0,this.bumpers[2].body.scale.x=this.bumpers[2].body.scale.y+=.08,this.bumpers[2].glow.scale.x=this.bumpers[2].glow.scale.y+=.08,this.bumpers[2].body.scale.x>=1.3&&(this.bumper3Animate=!1,this.bumperGlow3.visible=!1)),0==this.bumper3Animate&&this.bumpers[2].body.scale.x>1&&(this.bumpers[2].body.scale.x=this.bumpers[2].body.scale.y-=.05,this.bumpers[2].glow.scale.x=this.bumpers[2].glow.scale.y-=.05),1==this.bumper4Animate&&(this.leftBumperGlow.visible=!0,this.leftBumperGlow.alpha<1&&(this.leftBumperGlow.alpha+=.05),this.leftBumperGlow.alpha>=1&&(this.bumper4Animate=!1)),0==this.bumper4Animate&&this.leftBumperGlow.alpha>0&&(this.leftBumperGlow.alpha-=.01),1==this.bumper5Animate&&(this.rightBumperGlow.visible=!0,this.rightBumperGlow.alpha<1&&(this.rightBumperGlow.alpha+=.05),this.rightBumperGlow.alpha>=1&&(this.bumper5Animate=!1)),0==this.bumper5Animate&&this.rightBumperGlow.alpha>0&&(this.rightBumperGlow.alpha-=.01),1==this.gate6Active&&(this.bumperAngleLight.visible=!0,this.bumperAngleLight.alpha<1&&(this.bumperAngleLight.alpha+=.05),this.bumperAngleLight.alpha>=1&&(this.gate6Active=!1)),0==this.gate6Active&&this.bumperAngleLight.alpha>0&&(this.bumperAngleLight.alpha-=.01),this.snowmanHead.rotation<-.39?this.targetHeadRotation=.4:this.snowmanHead.rotation>.39&&(this.targetHeadRotation=-.4),this.snowmanHead.rotation+=(this.targetHeadRotation-this.snowmanHead.rotation)/40,this.inputManager.tick(),this.physicsManager.stepPhysics(),this.ballShadow.position.x=this.pinball.position.x,this.ballShadow.position.y=this.pinball.position.y,this.ballShadow.rotation=this.pinball.rotation*Math.PI/180,this.launcherSpring.scale.y=.45+(this.physicsManager.launcherBody.position[1]-40)/358*1.75,this.positionViewport(),0==this.ballInPlay&&1==this.ballReset&&this.pinball.position.x<this.wallChunkRightInner.position.x&&(this.ballInPlay=!0,this.upperContainer.addChild(this.iceBottomRightB),this.physicsManager.setBallInPlay())}},t.prototype.testUpper=function(){this.physicsManager.testupper()},t.prototype.positionViewport=function(){if(1!=this.pinDevMode){var e=new PIXI.Point((-this.pinball.position.x-this.mainHolder.position.x+this.mainHolderPos.x)/t.cameraMotionEaseAmount,(-this.pinball.position.y-this.mainHolder.position.y+this.mainHolderPos.y)/t.cameraMotionEaseAmount);this.mainHolder.position.y=this.mainHolder.position.y+e.y,this.mainHolder.position.y<-60&&(this.mainHolder.position.y=-60),this.mainHolder.position.y>2*Game.stageHeight+8&&(this.mainHolder.position.y=2*Game.stageHeight+8),this.mainHolder.position.x=this.mainHolder.position.x+e.x,this.mainHolder.position.x<-112&&(this.mainHolder.position.x=-112),this.mainHolder.position.x>0&&(this.mainHolder.position.x=0)}},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&("up"==t?this.upKeyDown():"down"==t?this.downKeyDown():"spacebar"==t&&this.spaceKeyDown(),this.inputManager.keyDown(t))},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&("up"==t?this.upKeyUp():"down"==t&&this.downKeyUp(),this.inputManager.keyUp(t))},t.prototype.spaceKeyDown=function(){},t.prototype.upKeyDown=function(){},t.prototype.downKeyDown=function(){this.launcherSpring.scale.y<=.5&&0==this.loadedSpring&&(Game.playSound("pin-ball/lock-load.mp3",1),0==this.soundActive&&(this.soundActive=!0,"patrick"==this.character?Game.playSound("pin-ball/patrick-next.mp3",.8):Game.playSound("pin-ball/sb-woah.mp3"),this.startSoundTimer()),this.loadedSpring=!0)},t.prototype.rightKeyDown=function(){Game.playSound("pin-ball/flipper.mp3",.4),this.coverRightReverse.play(),this.coverRight.visible=!1,this.coverRightReverse.visible=!0},t.prototype.leftKeyDown=function(){Game.playSound("pin-ball/flipper.mp3",.4),this.coverRight.play(),this.coverRight.visible=!0,this.coverRightReverse.visible=!1},t.prototype.upKeyUp=function(){},t.prototype.downKeyUp=function(){Game.playSound("pin-ball/launch.mp3",.4),this.launcherNumber=0},t.prototype.rightKeyUp=function(){Game.playSound("pin-ball/flipper-release.mp3")},t.prototype.leftKeyUp=function(){Game.playSound("pin-ball/flipper-release.mp3")},t.prototype.pause=function(t){Game.pauseSound("pin-ball/music.mp3"),0==t&&e.prototype.pause.call(this,t),this.game.powerUpManager.pause(),this.pauseResumeTween(this.heartTimeline,"pause"),this.pauseResumeTween(this.pipDelayTween,"pause"),this.pauseResumeTween(this.showPipAnimation,"pause"),this.pauseResumeTween(this.hidePipAnimation,"pause"),this.pauseResumeTween(this.deactivateLightDelay,"pause"),this.pauseResumeTween(this.expressionDelay,"pause"),this.pauseResumeTween(this.soundTimer,"pause"),this.pauseResumeTween(this.respawnDelay,"pause")},t.prototype.resume=function(){e.prototype.resume.call(this),Game.resumeSound("pin-ball/music.mp3"),this.game.ui.setUI("gameplay-pinball"),this.game.powerUpManager.resume(),this.pauseResumeTween(this.heartTimeline,"resume"),this.pauseResumeTween(this.pipDelayTween,"resume"),this.pauseResumeTween(this.showPipAnimation,"resume"),this.pauseResumeTween(this.hidePipAnimation,"resume"),this.pauseResumeTween(this.deactivateLightDelay,"resume"),this.pauseResumeTween(this.expressionDelay,"resume"),this.pauseResumeTween(this.soundTimer,"resume"),this.pauseResumeTween(this.respawnDelay,"resume")},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tutorialOverlay.destroy();for(t=0;t<this.scoreBackingArray.length;t++)Game.displayStore.returnPooledItem(this.scoreBackingArray[t].sprite);if(0==Game.isLowEndIPad)for(t=0;t<this.ballParticles.length;t++)Game.displayStore.returnPooledItem(this.ballParticles[t].sprite),Game.displayStore.returnPooledItem(this.ballParticles[t].powerUpSprite);for(t=0;t<this.score200Array.length;t++)Game.displayStore.returnPooledItem(this.score200Array[t].sprite);for(t=0;t<this.score100Array.length;t++)Game.displayStore.returnPooledItem(this.score100Array[t].sprite);for(t=0;t<this.score50Array.length;t++)Game.displayStore.returnPooledItem(this.score50Array[t].sprite);for(t=0;t<this.score500Array.length;t++)Game.displayStore.returnPooledItem(this.score500Array[t].sprite);for(t=0;t<this.score1000Array.length;t++)Game.displayStore.returnPooledItem(this.score1000Array[t].sprite);for(t=0;t<this.floorTiles1.length;t++)Game.displayStore.returnPooledItem(this.floorTiles1[t].sprite);for(t=0;t<this.floorTiles2.length;t++)Game.displayStore.returnPooledItem(this.floorTiles2[t].sprite);for(t=0;t<this.floorTiles3.length;t++)Game.displayStore.returnPooledItem(this.floorTiles3[t].sprite);for(t=0;t<this.rearFloorTiles1.length;t++)Game.displayStore.returnPooledItem(this.rearFloorTiles1[t].sprite);for(t=0;t<this.rearFloorTiles2.length;t++)Game.displayStore.returnPooledItem(this.rearFloorTiles2[t].sprite);for(t=0;t<this.rearFloorTiles3.length;t++)Game.displayStore.returnPooledItem(this.rearFloorTiles3[t].sprite);if(0==Game.isLowEndIPad)for(t=0;t<this.clouds.length;t++)Game.displayStore.returnPooledItem(this.clouds[t].cloud);for(t=0;t<this.lightGateSets.length;t++)Game.displayStore.returnPooledItem(this.lightGateSets[t].greenLight),Game.displayStore.returnPooledItem(this.lightGateSets[t].redLight);for(t=0;t<this.heartIcons.length;t++)Game.displayStore.returnPooledItem(this.heartIcons[t].heart);for(t=0;t<this.tickets.length;t++)this.tickets[t].destroy();if(0==Game.isLowEndIPad){for(var t=0;t<this.boostParticles.length;++t)Game.displayStore.returnPooledItem(this.boostParticles[t].sprite);Game.displayStore.returnPooledItem(this.cloudShadow1),Game.displayStore.returnPooledItem(this.cloudShadow2),Game.displayStore.returnPooledItem(this.cloudShadow3),Game.displayStore.returnPooledItem(this.cloudShadow4),Game.displayStore.returnPooledItem(this.cloud1),Game.displayStore.returnPooledItem(this.cloud2),Game.displayStore.returnPooledItem(this.cloud3),Game.displayStore.returnPooledItem(this.cloud4)}Game.displayStore.returnPooledItem(this.coverLeft),Game.displayStore.returnPooledItem(this.coverRight),Game.displayStore.returnPooledItem(this.coverLeftReverse),Game.displayStore.returnPooledItem(this.coverRightReverse),Game.displayStore.returnPooledItem(this.bottomLeftFlag),Game.displayStore.returnPooledItem(this.bottomRightFlag),Game.displayStore.returnPooledItem(this.pipGateReverse),this.heartTimeline=this.killTween(this.heartTimeline),this.pipDelayTween=this.killTween(this.pipDelayTween),this.showPipAnimation=this.killTween(this.showPipAnimation),this.hidePipAnimation=this.killTween(this.hidePipAnimation),this.deactivateLightDelay=this.killTween(this.deactivateLightDelay),this.expressionDelay=this.killTween(this.expressionDelay),this.soundTimer=this.killTween(this.soundTimer),this.respawnDelay=this.killTween(this.respawnDelay),this.physicsManager.destroy(),this.inputManager.destroy()},t.smoothing=5,t.cameraMotionEaseAmount=3,t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),RollerCoasterDoomGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="rollerCoasterDoomGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.setBackgroundColor(15395562),Game.playSound("roller-coaster-doom/music.mp3",.2),Game.coreData.setCurrentRide("roller-coaster-doom"),this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),this.tutorialViewed=Game.coreData.getGameTutorialViewed("roller-coaster-doom"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.objectGooLevel=0,this.cartVelocityRead=0,this.powerUpCoolDownOn=!1,this.powerUpOn=!1,this.flashLimit=30,this.flashLimitPowerUpCoolDown=10,this.flashTimer=0,this.flashActive=!1,this.flashTimerPowerUpCoolDown=0,this.shieldOn=!1,this.shieldFull=!0,this.shieldCombo=0,this.shieldComboLimit=3,this.lavaSpawnCounter=0,this.lavaSpawnCounterLimit=240,this.lavaActive=!1,this.boostParticlesCounter=0,this.skyBG=Game.displayStore.getSprite("roller-coaster-doom/sky-bg"),this.sunBG=Game.displayStore.getSprite("roller-coaster-doom/sun"),this.container.addChild(this.skyBG),this.container.addChild(this.sunBG),this.screenCover=Game.displayStore.getSprite("roller-coaster-doom/screen-cover"),this.screenCover.width=1.5*Game.stageWidth,this.screenCover.height=1.5*Game.stageHeight,this.skyBG.width=Game.stageWidth,this.skyBG.height=Game.stageHeight,this.sunBG.position.x=600,this.sunBG.position.y=0,this.cameraMotionEaseAmountX=1,this.cameraMotionEaseAmountY=1,this.zoomCameraEaseAmount=30,this.targetCameraScale=1,this.ticketSpawnIntervalDistance=10,this.ticketSpawnLastIntervalDistance=0,this.spawnTicket=!1,this.currentVelocityLevel=0,this.bumped=!1,this.cartTargetBumpPos=0,this.cartTargetBumpAngle=0,this.cartBumpEaseAmount=10,this.cartSpringUpHeight=90,this.springTargetBumpScale=0,this.gameOverTriggered=!1,this.calcDistanceCounter=0,this.calcDistanceCounterLimit=30,this.currentCartVel=0,this.cartLifted=!1,this.gameEnded=!1,this.difficultyCounter=0,this.difficultyCounterLimit=600,this.distance=0,this.displayDistance=0,this.distanceString="0m",this.playerInSmallLoop=!1,this.smallLoopSoundPlaying=!1,this.smallLoopSoundTimer=0,this.smallLoopSoundLimit=130,this.cartPos=new PIXI.Point(0,-5),this.angleEaseAmount=6,this.startTrackPos=new PIXI.Point(0,500),this.mainHolderPos=new PIXI.Point(250,400),this.lavaBurstHolder=Game.displayStore.getContainer("roller-coaster-doom/slime-particle-holder"),this.lavaParticleHolder=Game.displayStore.getContainer("roller-coaster-doom/lava-particle-holder");var i={lowerAngle:0,upperAngle:360,lowerVelocity:700,upperVelocity:2200,endScale:0,lowerStartScale:1,upperStartScale:2,friction:.09,XstartRange:60,YstartRange:20,time:1.5,gravity:1200,stagger:200,cap:45,endAlpha:0,rotationPower:2};this.lavaBurst=new ParticleBurst(["roller-coaster-doom/slime-particle-1","roller-coaster-doom/slime-particle-2","roller-coaster-doom/slime-particle-3"],this.lavaBurstHolder,this,i),this.lavaParticles=new Array;for(var s=0;s<5;s++){r=Game.displayStore.getSprite("roller-coaster-doom/lava-1");this.lavaParticles.push(r),this.lavaParticleHolder.addChild(r)}for(var o=0;o<5;o++){r=Game.displayStore.getSprite("roller-coaster-doom/lava-2");this.lavaParticles.push(r),this.lavaParticleHolder.addChild(r)}for(var a=0;a<5;a++){r=Game.displayStore.getSprite("roller-coaster-doom/lava-3");this.lavaParticles.push(r),this.lavaParticleHolder.addChild(r)}this.lavaParticles=this.shuffleArray(this.lavaParticles),this.mainHolder=Game.displayStore.getContainer("roller-coaster-doom/main-holder"),this.outerHolder=Game.displayStore.getContainer("roller-coaster-doom/outer-holder"),this.trackManager=new RollerCoasterDoomTrackManager(this,this.mainHolder,this.startTrackPos),this.bgHolder=Game.displayStore.getContainer("roller-coaster-doom/bg-holder"),this.bgManager=new RollerCoasterBackgroundManager(this,this.bgHolder,this.startTrackPos.y),this.obstacleManager=new RollerCoasterDoomObstacleManager(this,this.mainHolder),this.cartHolder=Game.displayStore.getContainer("roller-coaster-doom/cart-holder"),this.cartInnerHolder=Game.displayStore.getContainer("roller-coaster-doom/cart-inner-holder"),this.cartSprite=Game.displayStore.getSprite("roller-coaster-doom/cart-sprite"),this.cartSpritePowerUp=Game.displayStore.getSprite("roller-coaster-doom/cart-sprite-powered-up"),this.cartWheels=Game.displayStore.getSprite("roller-coaster-doom/cart-wheels"),this.cartSprings=Game.displayStore.getSprite("roller-coaster-doom/cart-springs"),this.boostParticlesContainer=Game.displayStore.getContainer("roller-coaster-doom/boost-particle-holder"),this.boostParticles=new Array;for(n=0;n<5;n++){var r=Game.displayStore.getSprite("roller-coaster-doom/boost-particle");this.boostParticles.push({active:!1,sprite:r}),this.boostParticles[n].sprite.position.y=-5e3,this.boostParticles[n].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.boostParticlesContainer.addChild(this.boostParticles[n].sprite)}this.origSpringHeight=this.cartSprings.height,this.cartInnerHolder.position.y=this.cartPos.y,this.cartWheels.position.y=this.cartPos.y,this.cartSprings.position.y=this.cartPos.y,this.springScaleOpen=1.1,this.springScaleClosed=.2,this.cartInnerHolder.addChild(this.boostParticlesContainer),this.cartInnerHolder.addChild(this.cartSprite),this.cartInnerHolder.addChild(this.cartSpritePowerUp),this.cartHolder.addChild(this.cartSprings),this.cartHolder.addChild(this.cartWheels),this.cartHolder.addChild(this.cartInnerHolder),this.mainHolder.addChild(this.cartHolder),this.shield=Game.displayStore.getSprite("roller-coaster-doom/shield"),this.lavaParticleHolder.position.y=-500,this.mainHolder.addChild(this.lavaParticleHolder),this.mainHolder.addChild(this.lavaBurstHolder),this.cartSprings.scale.y=this.springScaleClosed,this.cartHolder.position.x=2*this.trackManager.sliceWidth,this.cartHolder.position.y=this.startTrackPos.y,this.cartLastXPos=this.cartHolder.position.x,this.container.addChild(this.bgHolder),this.container.addChild(this.outerHolder),this.outerHolder.addChild(this.mainHolder),this.mainHolder.addChild(this.lavaParticleHolder),this.outerHolder.setRegPointPixels(this.mainHolderPos.x,this.mainHolderPos.y),this.outerHolder.position.x=this.mainHolderPos.x,this.outerHolder.position.y=this.mainHolderPos.y,this.scoreHolder=Game.displayStore.getContainer("roller-coaster-doom/score-holder"),this.scoreText=Game.displayStore.getBitmapText("roller-coaster-doom/score-font"),this.scoreText.scale.x=this.scoreText.scale.y=.8,this.scoreText.position.x=this.scoreHolder.position.x-30,this.scoreText.position.y=this.scoreHolder.position.y-40,this.container.addChild(this.screenCover),this.screenCover.blendMode=PIXI.BLEND_MODES.ADD,this.screenCover.tint=16717824,this.screenCover.alpha=0,this.screenCover.position.x=Game.stageWidth/2,this.screenCover.position.y=Game.stageHeight/2,this.container.addChild(this.scoreHolder),this.scoreHolder.addChild(this.scoreText),this.scoreText.text=this.distanceString,this.scoreHolder.scale.x=this.scoreHolder.scale.y=1,this.scoreHolder.position.y=50,this.scoreHolder.position.x=Game.stageWidth/2,this.heartBG=Game.displayStore.getSprite("roller-coaster-doom/heart-bg"),this.container.addChild(this.heartBG),this.heartBG.position.x=109,this.heartBG.position.y=50,this.heartIcons=new Array;for(n=0;n<3;n++)this.heartIcons.push({heart:Game.displayStore.getSprite("roller-coaster-doom/heart-icon"),active:!0}),this.container.addChild(this.heartIcons[n].heart),this.heartIcons[n].heart.position.x=100,this.heartIcons[n].heart.position.y=50,this.heartIcons[n].heart.visible=!0,this.heartIcons[n].heart.scale.x=0,this.heartIcons[n].heart.scale.y=0;this.heartIcons[0].heart.position.x-=70,this.heartIcons[2].heart.position.x+=70,this.inputManager=new RollerCoasterDoomInputManager(this),this.positionViewport(),this.selectedCharacter=Game.coreData.getSelectedCharacter(),this.selectedCharacter||(this.selectedCharacter="max"),this.getPlayerHead(),this.cartGoo1=Game.displayStore.getSprite("roller-coaster-doom/cart-goo-1"),this.cartGoo2=Game.displayStore.getSprite("roller-coaster-doom/cart-goo-2"),this.cartGoo3=Game.displayStore.getSprite("roller-coaster-doom/cart-goo-3"),this.cartGoo1.position.y=3,this.cartGoo2.position.y=3,this.cartGoo3.position.y=3,this.cartGoo1.position.x=2,this.cartGoo2.position.x=2,this.cartGoo3.position.x=2,this.cartGoo1.visible=!1,this.cartGoo2.visible=!1,this.cartGoo3.visible=!1,this.cartInnerHolder.addChild(this.playerHead),this.cartInnerHolder.addChild(this.cartSprite),this.cartInnerHolder.addChild(this.cartSpritePowerUp),this.cartInnerHolder.addChild(this.cartGoo1),this.cartInnerHolder.addChild(this.cartGoo2),this.cartInnerHolder.addChild(this.cartGoo3),this.cartSpritePowerUp.visible=!0,this.cartSprite.visible=!0,this.shieldIndicatorElements=new Array;for(var n=0;n<3;n++)this.shieldIndicatorElements.push({slot:Game.displayStore.getSprite("roller-coaster-doom/shield-indicator-slot"),light:Game.displayStore.getSprite("roller-coaster-doom/shield-indicator-slot-light"),lightOn:Game.displayStore.getSprite("roller-coaster-doom/shield-indicator-slot-light-on")});this.setUpShieldIndicator(),this.turnOnShieldLights(),this.cartHolder.addChild(this.shield),this.shield.blendMode=PIXI.BLEND_MODES.ADD,this.shield.alpha=.8,this.shield.scale.x=1.2,this.shield.scale.y=1.2,1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("roller-coaster-doom",!0),this.toggleShield(!0),this.turnShieldOn=!0},t.prototype.setUpShieldIndicator=function(){for(var e=Game.stageWidth/2-60,t=0;t<this.shieldIndicatorElements.length;t++)this.shieldIndicatorElements[t].slot.position.y=140,this.shieldIndicatorElements[t].light.position.y=140,this.shieldIndicatorElements[t].lightOn.position.y=140,this.shieldIndicatorElements[t].slot.position.x=e+60*t,this.shieldIndicatorElements[t].light.position.x=e+60*t,this.shieldIndicatorElements[t].lightOn.position.x=e+60*t,this.shieldIndicatorElements[t].lightOn.blendMode=PIXI.BLEND_MODES.ADD,this.shieldIndicatorElements[t].lightOn.scale.x=1.5,this.shieldIndicatorElements[t].lightOn.scale.y=1.5,this.shieldIndicatorElements[t].lightOn.alpha=.75,this.container.addChild(this.shieldIndicatorElements[t].slot),this.container.addChild(this.shieldIndicatorElements[t].light);for(t=0;t<this.shieldIndicatorElements.length;t++)this.container.addChild(this.shieldIndicatorElements[t].lightOn)},t.prototype.startGameplay=function(){switch(this.game.ui.triggerEnjoyTheRide(),this.game.ui.setUI("gameplay-doom"),this.trackManager.setInitialState(this.cartHolder.position.x),Game.playSound("roller-coaster-doom/track-looping.mp3",.5),Game.playSound("roller-coaster-doom/fire.mp3",.1),this.heartTimeline&&(this.heartTimeline=this.killTween(this.heartTimeline)),0==Game.isLowEndIPad?(this.heartTimeline=new TimelineMax,this.heartTimeline.add([TweenMax.to(this.heartIcons[0].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:0}),TweenMax.to(this.heartIcons[1].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:.1}),TweenMax.to(this.heartIcons[2].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:.2})],.5)):(this.heartIcons[0].heart.scale.x=this.heartIcons[0].heart.scale.y=1,this.heartIcons[1].heart.scale.x=this.heartIcons[1].heart.scale.y=1,this.heartIcons[2].heart.scale.x=this.heartIcons[2].heart.scale.y=1),this.selectedCharacter){case"max":Game.playSound("roller-coaster-doom/max-enemies.mp3",1);break;case"phoebe":Game.playSound("roller-coaster-doom/phoebe-woop.mp3",1)}this.game.powerUpManager.startGame()},t.prototype.shuffleArray=function(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[i],e[i]=t;return e},t.prototype.getCartVelocity=function(){return this.cartVelocityRead},t.prototype.setObjectGoo=function(){switch(this.objectGooLevel){case 0:this.cartGoo1.visible=!1,this.cartGoo2.visible=!1,this.cartGoo3.visible=!1;break;case 1:this.cartGoo1.visible=!0,this.cartGoo2.visible=!1,this.cartGoo3.visible=!1;break;case 2:this.cartGoo1.visible=!1,this.cartGoo2.visible=!0,this.cartGoo3.visible=!1;break;case 3:this.cartGoo1.visible=!1,this.cartGoo2.visible=!1,this.cartGoo3.visible=!0}},t.prototype.activatePowerUpEffect=function(){this.powerUpEndDelay=this.killTween(this.powerUpEndDelay),this.powerUpCoolDownOn=!1,this.powerUpOn=!0,this.trackManager.activatePowerUpEffect(),this.startScreenShakePowerUp(),this.shieldCombo=this.shieldComboLimit,this.updateShieldMeter(),this.turnOnShieldLights(),this.toggleShield(!0),Game.stopSound("roller-coaster-doom/doom-power-up.mp3"),Game.playSound("roller-coaster-doom/doom-power-up.mp3",.9)},t.prototype.deactivatePowerUpEffect=function(){this.powerUpCoolDownOn=!0,this.powerUpOn=!1,this.flashTimerPowerUpCoolDown=0,this.trackManager.deactivatePowerUpEffect(),this.endScreenShakePowerUp(),this.powerUpEndDelay=TweenMax.delayedCall(2,this.endPowerUpActiveDelay,[this]),Game.fadeSound("roller-coaster-doom/doom-power-up.mp3",.9,0)},t.prototype.endPowerUpActiveDelay=function(e){e.powerUpCoolDownOn=!1},t.prototype.getPlayerHead=function(){switch(this.selectedCharacter){case"max":this.playerHead=Game.displayStore.getContainer("roller-coaster-doom/max-heads"),this.playerNeutral=this.playerHead.getSprite("max-neutral"),this.playerHead.position.x=-13,this.playerHead.position.y=0;break;case"phoebe":this.playerHead=Game.displayStore.getContainer("roller-coaster-doom/pheobe-heads"),this.playerHead.position.y=0,this.playerNeutral=this.playerHead.getSprite("pheobe-neutral")}},t.prototype.toggleShield=function(e){1==e?(this.shieldOn=!0,this.shield.visible=!0,this.turnShieldOn=!0,Game.playSound("roller-coaster-doom/shield-up.mp3",.8)):(this.shieldOn=!1,this.shieldFull=!1,this.turnShieldOn=!1,this.shield.alpha=0,Game.playSound("roller-coaster-doom/shield-down.mp3",.8))},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"pause-button":this.pause(!1);break;case"playbuttonlarge":this.resume()}},t.prototype.secondChanceUse=function(){this.addLife(),this.gameOverTriggered=!1,this.updateShieldMeter(),this.turnOnShieldLights(),this.toggleShield(!0),this.trackManager.secondChanceUse(),this.game.powerUpManager.setGameOverCooldown(!1),this.gameEnded=!1},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.inputActivated=function(){this.springCartWheelsUp()},t.prototype.inputDeactivated=function(){this.springCartWheelsDown()},t.prototype.calculateDistanceTravelled=function(){if(this.distance=this.cartHolder.position.x-this.mainHolderPos.x,this.displayDistance=Math.round(this.distance/400),this.distanceString=String(this.displayDistance)+"m",this.scoreText.text=this.distanceString,this.displayDistance-this.ticketSpawnLastIntervalDistance>=this.ticketSpawnIntervalDistance)return this.ticketSpawnLastIntervalDistance=this.displayDistance,void(this.spawnTicket=!0)},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.setTrackObstacle=function(e,t,i,s,o){return this.obstacleManager.setTrackObstacle(e,t,i,s,o)},t.prototype.setTicketHandObstacle=function(e,t,i,s){this.obstacleManager.setTrackObstacleTicketHand(e,t,i,s)},t.prototype.removeObstacle=function(e,t){this.obstacleManager.removeObstacle(e,t)},t.prototype.layTicketThisSlice=function(){var e=!1;return 1==this.spawnTicket&&(this.spawnTicket=!1,e=!0),e},t.prototype.tick=function(){if(e.prototype.tick.call(this),1!=this.paused&&1!=this.gameEnded&&1!=this.tutorialOverlay.isOpen&&1!=this.wristbandOverlay.isOpen){1==this.losingHeart&&this.scaleDownHeart(this.heartNumber,this.targetHeartScale),1==this.flashActive&&0==this.powerUpCoolDownOn&&(this.screenCover.alpha=Game.getRandom(.1,.5),this.shield.alpha=Game.getRandom(.1,.5),this.flashTimer++,this.shield.tint=16717824,this.flashTimer>=this.flashLimit&&(this.flashActive=!1,this.flashTimer=0,this.screenCover.alpha=0,this.shield.alpha=0,this.shield.tint=16777215)),1==this.powerUpCoolDownOn&&++this.flashTimerPowerUpCoolDown>=this.flashLimitPowerUpCoolDown&&(this.flashTimerPowerUpCoolDown=0,1==this.shield.visible?this.shield.visible=!1:0==this.shield.visible&&(this.shield.visible=!0)),1==this.smallLoopSoundPlaying&&(this.playerInSmallLoop=!1,++this.smallLoopSoundTimer>=this.smallLoopSoundLimit&&(this.smallLoopSoundTimer=0,this.smallLoopSoundPlaying=!1)),1==this.playerInSmallLoop&&0==this.smallLoopSoundTimer&&(Game.playSound("roller-coaster-doom/small-loop-sound.mp3",.8),this.smallLoopSoundPlaying=!0,this.playerInSmallLoop=!1),this.smallLoopSoundTimer>=128&&0==this.playerInSmallLoop&&(Game.stopSound("roller-coaster-doom/small-loop-sound.mp3"),this.smallLoopSoundTimer=0,this.smallLoopSoundPlaying=!1,this.playerInSmallLoop=!1),this.cartVelocityRead=this.cartHolder.position.x-this.cartLastXPos,1==this.shieldFull&&(this.shield.alpha=Game.getRandom(.5,1)),1==this.turnShieldOn&&(this.shield.alpha+=(.8-this.shield.alpha)/5),this.shield.alpha>.55&&1==this.shieldOn&&(this.shieldFull=!0),this.lavaSpawnCounter<this.lavaSpawnCounterLimit&&++this.lavaSpawnCounter>=this.lavaSpawnCounterLimit&&(this.lavaSpawnCounter=0,1==Game.getRandom(0,1,!0)&&(this.explodeLava(this.getCurrentCartPos()),this.lavaActive=!0)),++this.calcDistanceCounter>=this.calcDistanceCounterLimit&&(this.calcDistanceCounter=0,this.calculateDistanceTravelled()),++this.difficultyCounter>=this.difficultyCounterLimit&&(this.difficultyCounter=0,this.increaseDifficulty()),this.cartSprings.scale.y=-this.springScaleOpen/this.cartSpringUpHeight*(this.cartInnerHolder.position.y-this.cartPos.y),this.cartLastXPos=this.cartHolder.position.x,this.stepMotion(),this.obstacleManager.tick(this.cartHolder.position.x),this.bgManager.tick(this.cartHolder.position),this.shield.position.x=this.cartInnerHolder.position.x+0,this.shield.position.y=this.cartInnerHolder.position.y-50,this.shield.rotation=-this.cartHolder.rotation,this.boostParticlesContainer.position.x=this.cartInnerHolder.position.x+0;var t,i;if(1==this.powerUpOn?(t=Game.getRandom(.4,.8),i=10):(t=Game.getRandom(.1,.3),i=2),this.boostParticlesCounter<this.boostParticles.length){var s=this.boostParticles[this.boostParticlesCounter];s.active=!0,s.sprite.position.x=this.cartSprite.position.x-this.cartSprite.width/2-10,s.sprite.position.y=this.cartSprite.y-30,s.sprite.alpha=Game.getRandom(.6,1),s.sprite.scale.x=s.sprite.scale.y=t,this.boostParticlesCounter++}else this.boostParticlesCounter=0;for(var o=0;o<this.boostParticles.length;o++)1==this.boostParticles[o].active&&(this.boostParticles[o].sprite.alpha<=0&&(this.boostParticles[o].active=!1),this.boostParticles[o].sprite.alpha-=.05,this.boostParticles[o].sprite.scale.x+=.1,this.boostParticles[o].sprite.scale.y+=.1,this.boostParticles[o].sprite.position.x-=i)}},t.prototype.setCurrentVelocity=function(e){this.currentCartVel=e},t.prototype.increaseDifficulty=function(){this.currentVelocityLevel++,this.trackManager.setVeloctyState(this.currentVelocityLevel)},t.prototype.adjustCamera=function(e){switch(e){case 0:this.targetCameraScale=1;break;case 1:this.targetCameraScale=.9;break;case 2:this.targetCameraScale=.8;break;case 3:this.targetCameraScale=.7;break;case 4:case 5:this.targetCameraScale=.6;break;case 6:this.targetCameraScale=.7;break;case 7:this.targetCameraScale=.8;break;case 8:this.targetCameraScale=.9;break;case 9:this.targetCameraScale=1}},t.prototype.stepMotion=function(){this.trackManager.tick(this.cartHolder.position.x),this.positionViewport(),this.moveCartBumped(),0==this.trackManager.loopSectionModifier&&(this.moveCartAlongTrack(),this.playerInSmallLoop=!1),1==this.trackManager.loopSectionModifier&&(0!=this.trackManager.loopSectionMotionID&&2!=this.trackManager.loopSectionMotionID||this.moveCartAlongTrack(),1==this.trackManager.loopSectionMotionID&&(this.moveCartInLoop(),this.playerInSmallLoop=!0))},t.prototype.moveCartAlongTrack=function(){this.cartHolder.position.x+=this.trackManager.motionParams.x,this.cartHolder.position.y+=this.trackManager.motionParams.y,this.cartHolder.rotation+=(this.trackManager.motionParams.angle-this.cartHolder.rotation)/this.angleEaseAmount},t.prototype.moveCartInLoop=function(){this.cartHolder.position.x=this.trackManager.loopCentre.x+this.trackManager.currentLoopRadius*Math.cos(this.trackManager.loopAngle),this.cartHolder.position.y=this.trackManager.loopCentre.y+this.trackManager.currentLoopRadius*Math.sin(this.trackManager.loopAngle),this.cartHolder.rotation=this.trackManager.loopAngle-.5*Math.PI},t.prototype.correctCartAnglePostLoop=function(){this.cartHolder.rotation=0},t.prototype.positionViewport=function(){this.mainHolder.position.x=this.mainHolderPos.x-this.cartHolder.position.x,this.mainHolder.position.y=this.mainHolderPos.y-this.cartHolder.position.y,this.outerHolder.scale.x+=(this.targetCameraScale-this.outerHolder.scale.x)/this.zoomCameraEaseAmount,this.outerHolder.scale.y=this.outerHolder.scale.x},t.prototype.getCurrentCartPos=function(){return new PIXI.Point(this.cartHolder.position.x,this.cartHolder.position.y)},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&("up"==t?this.upKeyDown():"down"==t?this.downKeyDown():"spacebar"==t&&this.spaceKeyDown())},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&("up"==t?this.upKeyUp():"down"==t?this.downKeyUp():"spacebar"==t&&this.spaceKeyUp())},t.prototype.spaceKeyDown=function(){this.springCartWheelsUp()},t.prototype.spaceKeyUp=function(){this.springCartWheelsDown()},t.prototype.upKeyDown=function(){},t.prototype.downKeyDown=function(){},t.prototype.upKeyUp=function(){},t.prototype.downKeyUp=function(){},t.prototype.springCartWheelsUp=function(){if(1!=this.tutorialOverlay.isOpen&&1!=this.cartLifted&&1!=this.paused){var e=Game.getRandom(1,3,!0);1==e?(Game.playSound("roller-coaster-doom/move-up-1.mp3"),Game.playSound("roller-coaster-doom/bounce-up-1.mp3")):2==e?(Game.playSound("roller-coaster-doom/move-up-2.mp3"),Game.playSound("roller-coaster-doom/bounce-up-2.mp3")):3==e&&(Game.playSound("roller-coaster-doom/move-up-3.mp3"),Game.playSound("roller-coaster-doom/bounce-up-3.mp3")),Game.stopSound("roller-coaster-doom/move-down-1.mp3"),Game.stopSound("roller-coaster-doom/move-down-2.mp3"),Game.stopSound("roller-coaster-doom/move-down-3.mp3"),this.cartLifted=!0,this.springWheelsTimeline=this.killTween(this.springWheelsTimeline),this.springWheelsTimeline=new TimelineMax,this.springWheelsTimeline.add([TweenMax.to(this.cartInnerHolder.position,.5,{y:-this.cartSpringUpHeight,ease:Elastic.easeOut})]),this.trackManager.checkSpringInSmallLoop(this.cartLifted),this.checkObstacleImpactCartStateChange(),this.unBumpCart()}},t.prototype.springCartWheelsDown=function(){if(1!=this.tutorialOverlay.isOpen&&0!=this.cartLifted&&1!=this.paused){var e=Game.getRandom(1,3,!0);1==e?Game.playSound("roller-coaster-doom/move-down-1.mp3"):2==e?Game.playSound("roller-coaster-doom/move-down-2.mp3"):3==e&&Game.playSound("roller-coaster-doom/move-down-3.mp3"),Game.stopSound("roller-coaster-doom/move-up-1.mp3"),Game.stopSound("roller-coaster-doom/move-up-2.mp3"),Game.stopSound("roller-coaster-doom/move-up-3.mp3"),Game.stopSound("roller-coaster-doom/bounce-up-1.mp3"),Game.stopSound("roller-coaster-doom/bounce-up-2.mp3"),Game.stopSound("roller-coaster-doom/bounce-up-3.mp3"),this.cartLifted=!1,this.springWheelsTimeline=this.killTween(this.springWheelsTimeline),this.springWheelsTimeline=new TimelineMax,this.springWheelsTimeline.add([TweenMax.to(this.cartInnerHolder.position,.2,{y:this.cartPos.y,ease:Sine.easeOut})]),this.checkObstacleImpactCartStateChange(),this.unBumpCart()}},t.prototype.getLiftedState=function(){return this.cartLifted},t.prototype.missedMineLoop=function(){this.missComboIncrease()},t.prototype.missComboIncrease=function(){1!=this.shieldOn&&(this.shieldCombo++,this.updateShieldMeter(),this.shieldCombo>=this.shieldComboLimit&&(this.turnOnShieldLights(),this.toggleShield(!0)))},t.prototype.updateShieldMeter=function(){for(var e=0;e<this.shieldIndicatorElements.length;e++)this.shieldCombo<=e?this.shieldIndicatorElements[e].light.visible=!1:this.shieldIndicatorElements[e].light.visible=!0},t.prototype.killShieldLights=function(){for(var e=0;e<this.shieldIndicatorElements.length;e++)this.shieldIndicatorElements[e].lightOn.visible=!1,this.shieldIndicatorElements[e].light.visible=!1},t.prototype.turnOnShieldLights=function(){for(var e=0;e<this.shieldIndicatorElements.length;e++)this.shieldIndicatorElements[e].lightOn.visible=!0,this.shieldIndicatorElements[e].light.visible=!0,this.shieldIndicatorElements[e].lightOn.scale.x=0,this.shieldIndicatorElements[e].lightOn.scale.y=0,TweenMax.to(this.shieldIndicatorElements[e].lightOn.scale,.5,{x:1.5,y:1.5,ease:Sine.easeOut})},t.prototype.resetMissCombo=function(){this.shieldCombo=0,this.killShieldLights()},t.prototype.checkObstacleImpact=function(e){switch(e){case"track":if(1==this.powerUpCoolDownOn||1==this.powerUpOn)return;0==this.cartLifted?(this.hitObstacle(),this.resetMissCombo()):this.missComboIncrease();break;case"air":if(1==this.powerUpCoolDownOn||1==this.powerUpOn)return;1==this.cartLifted?(this.hitObstacle(),this.resetMissCombo()):this.missComboIncrease()}},t.prototype.collectTicket=function(){1!=this.gameOverTriggered&&this.obstacleManager.collectTicket()},t.prototype.pickedUpHeart=function(){this.addLife()},t.prototype.checkObstacleImpactCartStateChange=function(){0!=this.trackManager.cartInCheckZone(this.cartHolder.position.x)&&1!=this.powerUpCoolDownOn&&1!=this.powerUpOn&&(1==this.cartLifted?"air"==this.trackManager.currentSliceObstacleType&&this.hitObstacle():0==this.cartLifted&&"track"==this.trackManager.currentSliceObstacleType&&this.hitObstacle())},t.prototype.bumpCart=function(){var e=Game.getRandom(4,8);1==this.cartLifted?this.cartTargetBumpPos=-this.cartSpringUpHeight:0==this.cartLifted&&(this.cartTargetBumpPos=this.cartPos.y),this.cartTargetBumpPos=this.cartTargetBumpPos-e,this.cartTargetBumpAngle=Game.getRandom(-.1,.1)},t.prototype.unBumpCart=function(){1==this.cartLifted?this.cartTargetBumpPos=-this.cartSpringUpHeight:0==this.cartLifted&&(this.cartTargetBumpPos=this.cartPos.y),this.cartTargetBumpAngle=0},t.prototype.toggleBumpCart=function(){1==this.bumped?(this.bumped=!1,this.unBumpCart()):0==this.bumped&&(this.bumped=!0,this.bumpCart())},t.prototype.moveCartBumped=function(){this.cartInnerHolder.position.y+=(this.cartTargetBumpPos-this.cartInnerHolder.position.y)/this.cartBumpEaseAmount,this.cartSprite.rotation+=(this.cartTargetBumpAngle-this.cartSprite.rotation)/this.cartBumpEaseAmount,this.cartSpritePowerUp.rotation+=(this.cartTargetBumpAngle-this.cartSprite.rotation)/this.cartBumpEaseAmount,this.cartGoo1.rotation=this.cartSprite.rotation,this.cartGoo2.rotation=this.cartSprite.rotation,this.cartGoo3.rotation=this.cartSprite.rotation,this.cartSprings.rotation=this.cartSprite.rotation,this.cartInnerHolder.position.x=Math.tan(this.cartSprite.rotation)*(this.cartPos.y-this.cartTargetBumpPos)},t.prototype.hitObstacle=function(){var e=this.trackManager.getObstacleType(),t=this.trackManager.getObstacleIndex(),i=this.obstacleManager.hitObstacle(e,t);0!=i.x&&this.impactEffect(i)},t.prototype.loopMineHit=function(e){1!=this.powerUpCoolDownOn&&1!=this.powerUpOn&&this.impactEffect(e)},t.prototype.impactEffect=function(e){if(Game.playSound("roller-coaster-doom/beep.mp3",.5),this.resetMissCombo(),1!=this.shieldOn){var t=Game.getRandom(1,2,!0);1==t?Game.playSound("roller-coaster-doom/splash-1.mp3",.8):2==t&&Game.playSound("roller-coaster-doom/splash-2.mp3",.8),1==(t=Game.getRandom(1,2,!0))?Game.playSound("roller-coaster-doom/pop-1.mp3"):2==t&&Game.playSound("roller-coaster-doom/pop-2.mp3"),1==(t=Game.getRandom(1,2,!0))?Game.playSound("roller-coaster-doom/goop-1.mp3"):2==t&&Game.playSound("roller-coaster-doom/goop-2.mp3"),this.objectGooLevel++,this.setObjectGoo(),this.explodeSlime(e),this.loseLife(),this.shakeScreen()}else switch(Game.playSound("roller-coaster-doom/shield-hit.mp3"),this.shakeScreen(),this.toggleShield(!1),this.flashActive=!0,this.explodeSlime(e),this.selectedCharacter){case"max":if(1==(t=Game.getRandom(1,5,!0)))Game.playSound("roller-coaster-doom/max-loosers.mp3",1);else if(t>=2)return;break;case"phoebe":if(1==(t=Game.getRandom(1,5,!0)))Game.playSound("roller-coaster-doom/phoebe-close.mp3",1);else if(t>=2)return}},t.prototype.explodeSlime=function(e){this.lavaBurst.fire(),this.lavaBurstHolder.position.x=e.x,this.lavaBurstHolder.position.y=e.y},t.prototype.explodeLava=function(e){this.lavaParticlesTimeline=this.killTween(this.lavaParticlesTimeline),this.lavaParticlesTimeline=new TimelineMax,Game.playSound("roller-coaster-doom/lava-gloop.mp3",.8),this.lavaParticleHolder.position.x=e.x+Game.getRandom(700,900),this.lavaParticleHolder.position.y=e.y+250;for(var t=0;t<this.lavaParticles.length;t++){TweenMax.killTweensOf(this.lavaParticles[t]);var i=Game.getRandom(0,2*Math.PI),s=Game.getRandom(.5,.9);this.lavaParticles[t].position.x=0,this.lavaParticles[t].rotation=0,this.lavaParticles[t].position.y=0,this.lavaParticles[t].position.x=40*Math.cos(i),this.lavaParticles[t].position.y=40*Math.sin(i),this.lavaParticles[t].scale.x=s,this.lavaParticles[t].scale.y=s,this.lavaParticles[t].rotation=Game.getRandom(0,2*Math.PI),this.lavaParticlesTimeline.timeline.add([TweenMax.to(this.lavaParticles[t],3,{physics2D:{velocity:Game.getRandom(300,700),angle:Game.getRandom(200,340),gravity:1e3}}),TweenMax.to(this.lavaParticles[t],2,{rotation:Game.getRandom(6,12),ease:Power1.easeIn})],0)}},t.prototype.shakeScreen=function(){this.shakeScreenTimeline=this.killTween(this.shakeScreenTimeline),this.shakeScreenTimeline=new TimelineMax;for(var e=Game.getRandom(5,7,!0),t=0;t<e;t++)this.shakeScreenTimeline.add(TweenMax.to(this.outerHolder.position,Game.getRandom(.05,.1),{x:this.mainHolderPos.x+Game.getRandom(-40,40),y:this.mainHolderPos.y+Game.getRandom(-40,40)}));this.shakeScreenTimeline.add(TweenMax.to(this.outerHolder.position,Game.getRandom(.05,.1),{x:this.mainHolderPos.x,y:this.mainHolderPos.y}))},t.prototype.startScreenShakePowerUp=function(){this.shakeScreenTimelinePowerUp=this.killTween(this.shakeScreenTimelinePowerUp),this.shakeScreenTimelinePowerUp=new TimelineMax({repeat:-1});for(var e=Game.getRandom(5,7,!0),t=0;t<e;t++)this.shakeScreenTimelinePowerUp.add(TweenMax.to(this.outerHolder.position,Game.getRandom(.05,.1),{x:this.mainHolderPos.x+Game.getRandom(-40,40),y:this.mainHolderPos.y+Game.getRandom(-40,40)}))},t.prototype.endScreenShakePowerUp=function(){this.shakeScreenTimelinePowerUp=this.killTween(this.shakeScreenTimelinePowerUp),this.shakeScreenTimelinePowerUp=new TimelineMax,this.shakeScreenTimelinePowerUp.add(TweenMax.to(this.outerHolder.position,Game.getRandom(.05,.1),{x:this.mainHolderPos.x,y:this.mainHolderPos.y}))},t.prototype.loseLife=function(){for(var e=this.heartIcons.length-1;e>=0;e--)if(0!=this.heartIcons[e].active){switch(this.heartIcons[e].active=!1,0==Game.isLowEndIPad?(this.losingHeart=!0,this.heartNumber=e,this.targetHeartScale=0):this.heartIcons[e].heart.visible=!1,this.checkGameOver(),this.selectedCharacter){case"max":if(1==(e=Game.getRandom(1,3,!0)))Game.playSound("roller-coaster-doom/max-what.mp3",1);else if(e>=2)return;break;case"phoebe":if(1==(e=Game.getRandom(1,3,!0)))Game.playSound("roller-coaster-doom/phoebe-happened.mp3",1);else if(e>=2)return}return}},t.prototype.scaleDownHeart=function(e,t){switch(this.heartIcons[e].heart.scale.x+=(t-this.heartIcons[e].heart.scale.x)/5,this.heartIcons[e].heart.scale.y+=(t-this.heartIcons[e].heart.scale.y)/5,t){case 0:this.heartIcons[e].heart.scale.x<=t&&(this.losingHeart=!1,this.heartIcons[e].heart.scale.x=0,this.heartIcons[e].heart.scale.y=0);break;case 1:this.heartIcons[e].heart.scale.x>=t&&(this.losingHeart=!1,this.heartIcons[e].heart.scale.x=1,this.heartIcons[e].heart.scale.y=1)}},t.prototype.addLife=function(){for(var e=0;e<this.heartIcons.length;e++)if(1!=this.heartIcons[e].active)return this.heartIcons[e].active=!0,void(0==Game.isLowEndIPad?(this.losingHeart=!0,this.heartNumber=e,this.targetHeartScale=1):this.heartIcons[e].heart.visible=!0)},t.prototype.checkGameOver=function(){if(1!=this.gameOverTriggered){for(var e=0,t=0;t<this.heartIcons.length;t++)1==this.heartIcons[t].active&&e++;0==e&&(Game.coreData.setCurrentRideScoreFromGame(this.displayDistance),Game.stopSound("roller-coaster-doom/track-looping.mp3"),Game.playSound("roller-coaster-doom/track-slow-down.mp3"),this.gameOverTriggered=!0,this.game.powerUpManager.setGameOverCooldown(!0),this.trackManager.triggerGameOver())}},t.prototype.getCurrentLives=function(){for(var e=0,t=0;t<this.heartIcons.length;t++)1==this.heartIcons[t].active&&e++;return{total:this.heartIcons.length,current:e}},t.prototype.goToGameOver=function(){1!=this.gameEnded&&(this.gameEnded=!0,this.wristbandOverlay.endGame(this.displayDistance))},t.prototype.pause=function(t){0==t&&(Game.pauseSound("roller-coaster-doom/music.mp3"),e.prototype.pause.call(this,t)),Game.pauseSound("roller-coaster-doom/move-down-1.mp3"),Game.pauseSound("roller-coaster-doom/move-down-2.mp3"),Game.pauseSound("roller-coaster-doom/move-down-3.mp3"),Game.pauseSound("roller-coaster-doom/move-up-1.mp3"),Game.pauseSound("roller-coaster-doom/move-up-2.mp3"),Game.pauseSound("roller-coaster-doom/move-up-3.mp3"),Game.pauseSound("roller-coaster-doom/splash-1.mp3"),Game.pauseSound("roller-coaster-doom/splash-2.mp3"),Game.pauseSound("roller-coaster-doom/track-looping.mp3"),Game.pauseSound("roller-coaster-doom/track-slow-down.mp3"),Game.pauseSound("roller-coaster-doom/bounce-up-1.mp3"),Game.pauseSound("roller-coaster-doom/bounce-up-2.mp3"),Game.pauseSound("roller-coaster-doom/bounce-up-3.mp3"),Game.pauseSound("roller-coaster-doom/pop-1.mp3"),Game.pauseSound("roller-coaster-doom/pop-2.mp3"),Game.pauseSound("roller-coaster-doom/lava-gloop.mp3"),Game.pauseSound("roller-coaster-doom/small-loop-sound.mp3"),Game.pauseSound("roller-coaster-doom/fire.mp3"),Game.pauseSound("roller-coaster-doom/shield-hit.mp3"),Game.pauseSound("roller-coaster-doom/shield-up.mp3"),Game.pauseSound("roller-coaster-doom/shield-down.mp3"),Game.pauseSound("roller-coaster-doom/beep.mp3"),Game.pauseSound("roller-coaster-doom/max-enemies.mp3"),Game.pauseSound("roller-coaster-doom/phoebe-woop.mp3"),Game.pauseSound("roller-coaster-doom/max-loosers.mp3"),Game.pauseSound("roller-coaster-doom/phoebe-close.mp3"),Game.pauseSound("roller-coaster-doom/max-what.mp3"),Game.pauseSound("roller-coaster-doom/phoebe-happened.mp3"),Game.pauseSound("roller-coaster-doom/doom-power-up.mp3"),this.lavaBurst.pause(),this.game.powerUpManager.pause(),this.pauseResumeTween(this.shakeScreenTimeline,"pause"),this.pauseResumeTween(this.powerUpEndDelay,"pause"),this.pauseResumeTween(this.shakeScreenTimelinePowerUp,"pause"),this.pauseResumeTween(this.springWheelsTimeline,"pause"),this.pauseResumeTween(this.lavaParticlesTimeline,"pause")},t.prototype.resume=function(){e.prototype.resume.call(this),Game.resumeSound("roller-coaster-doom/move-down-1.mp3"),Game.resumeSound("roller-coaster-doom/move-down-2.mp3"),Game.resumeSound("roller-coaster-doom/move-down-3.mp3"),Game.resumeSound("roller-coaster-doom/move-up-1.mp3"),Game.resumeSound("roller-coaster-doom/move-up-2.mp3"),Game.resumeSound("roller-coaster-doom/move-up-3.mp3"),Game.resumeSound("roller-coaster-doom/splash-1.mp3"),Game.resumeSound("roller-coaster-doom/splash-2.mp3"),Game.resumeSound("roller-coaster-doom/track-looping.mp3"),Game.resumeSound("roller-coaster-doom/track-slow-down.mp3"),Game.resumeSound("roller-coaster-doom/bounce-up-1.mp3"),Game.resumeSound("roller-coaster-doom/bounce-up-2.mp3"),Game.resumeSound("roller-coaster-doom/bounce-up-3.mp3"),Game.resumeSound("roller-coaster-doom/pop-1.mp3"),Game.resumeSound("roller-coaster-doom/pop-2.mp3"),Game.resumeSound("roller-coaster-doom/lava-gloop.mp3"),Game.resumeSound("roller-coaster-doom/small-loop-sound.mp3"),Game.resumeSound("roller-coaster-doom/fire.mp3"),Game.resumeSound("roller-coaster-doom/music.mp3"),Game.resumeSound("roller-coaster-doom/shield-hit.mp3"),Game.resumeSound("roller-coaster-doom/shield-up.mp3"),Game.resumeSound("roller-coaster-doom/shield-down.mp3"),Game.resumeSound("roller-coaster-doom/beep.mp3"),Game.resumeSound("roller-coaster-doom/max-enemies.mp3"),Game.resumeSound("roller-coaster-doom/phoebe-woop.mp3"),Game.resumeSound("roller-coaster-doom/max-loosers.mp3"),Game.resumeSound("roller-coaster-doom/phoebe-close.mp3"),Game.resumeSound("roller-coaster-doom/max-what.mp3"),Game.resumeSound("roller-coaster-doom/phoebe-happened.mp3"),Game.resumeSound("roller-coaster-doom/doom-power-up.mp3"),this.game.ui.setUI("gameplay-doom"),this.game.powerUpManager.resumeGame(),this.lavaBurst.resume(),this.pauseResumeTween(this.powerUpEndDelay,"resume"),this.pauseResumeTween(this.shakeScreenTimeline,"resume"),this.pauseResumeTween(this.shakeScreenTimelinePowerUp,"resume"),this.pauseResumeTween(this.springWheelsTimeline,"resume"),this.pauseResumeTween(this.lavaParticlesTimeline,"resume")},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause")},t.prototype.destroy=function(){e.prototype.destroy.call(this),Game.stopSound("roller-coaster-doom/move-down-1.mp3"),Game.stopSound("roller-coaster-doom/move-down-2.mp3"),Game.stopSound("roller-coaster-doom/move-down-3.mp3"),Game.stopSound("roller-coaster-doom/move-up-1.mp3"),Game.stopSound("roller-coaster-doom/move-up-2.mp3"),Game.stopSound("roller-coaster-doom/move-up-3.mp3"),Game.stopSound("roller-coaster-doom/splash-1.mp3"),Game.stopSound("roller-coaster-doom/splash-2.mp3"),Game.stopSound("roller-coaster-doom/track-looping.mp3"),Game.stopSound("roller-coaster-doom/track-slow-down.mp3"),Game.stopSound("roller-coaster-doom/bounce-up-1.mp3"),Game.stopSound("roller-coaster-doom/bounce-up-2.mp3"),Game.stopSound("roller-coaster-doom/bounce-up-3.mp3"),Game.stopSound("roller-coaster-doom/pop-1.mp3"),Game.stopSound("roller-coaster-doom/pop-2.mp3"),Game.stopSound("roller-coaster-doom/lava-gloop.mp3"),Game.stopSound("roller-coaster-doom/small-loop-sound.mp3"),Game.stopSound("roller-coaster-doom/fire.mp3"),Game.stopSound("roller-coaster-doom/shield-hit.mp3"),Game.stopSound("roller-coaster-doom/shield-up.mp3"),Game.stopSound("roller-coaster-doom/shield-down.mp3"),Game.stopSound("roller-coaster-doom/beep.mp3"),Game.stopSound("roller-coaster-doom/max-enemies.mp3"),Game.stopSound("roller-coaster-doom/phoebe-woop.mp3"),Game.stopSound("roller-coaster-doom/max-loosers.mp3"),Game.stopSound("roller-coaster-doom/phoebe-close.mp3"),Game.stopSound("roller-coaster-doom/max-what.mp3"),Game.stopSound("roller-coaster-doom/phoebe-happened.mp3"),Game.stopSound("roller-coaster-doom/doom-power-up.mp3"),this.trackManager.destroy(),this.obstacleManager.destroy(),this.bgManager.destroy(),this.inputManager.destroy(),this.tutorialOverlay.destroy(),this.lavaBurst.destroy(),this.shakeScreenTimeline=this.killTween(this.shakeScreenTimeline),this.heartTimeline=this.killTween(this.heartTimeline),this.shakeScreenTimelinePowerUp=this.killTween(this.shakeScreenTimelinePowerUp),this.springWheelsTimeline=this.killTween(this.springWheelsTimeline),this.lavaParticlesTimeline=this.killTween(this.lavaParticlesTimeline),this.powerUpEndDelay=this.killTween(this.powerUpEndDelay);for(t=0;t<this.heartIcons.length;t++)Game.displayStore.returnPooledItem(this.heartIcons[t].heart);for(t=0;t<this.lavaParticles.length;t++)Game.displayStore.returnPooledItem(this.lavaParticles[t]);for(t=0;t<this.boostParticles.length;t++)Game.displayStore.returnPooledItem(this.boostParticles[t].sprite);for(var t=0;t<this.shieldIndicatorElements.length;t++)Game.displayStore.returnPooledItem(this.shieldIndicatorElements[t].light),Game.displayStore.returnPooledItem(this.shieldIndicatorElements[t].slot),Game.displayStore.returnPooledItem(this.shieldIndicatorElements[t].lightOn)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),RollerCoasterIceGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="rollerCoasterIceGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.setBackgroundColor(15395562),this.game.ui.setUI("gameplay-ice"),this.selectedCharacter=Game.coreData.getSelectedCharacter()||"ggg",Game.playSound("roller-coaster-ice/music.mp3",.35),Game.coreData.setCurrentRide("roller-coaster-ice"),this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),this.tutorialViewed=Game.coreData.getGameTutorialViewed("roller-coaster-ice"),this.setTrackFlat=!0,this.gameEnded=!1,this.playerLane=0,this.iceOffTimerActive=!1,this.iceOffTimer=0,this.boostParticlesCounter=0,Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.topLimit=0,this.bottomLimit=1e3,this.trackTimer=0,this.lockedBottom=!1,this.lockedTop=!1,this.playerShadow=Game.displayStore.getSprite("roller-coaster-ice/cart-shadow"),this.playerShadow.position.y=this.bottomLimit+250,this.innerMainHolder=Game.displayStore.getContainer("roller-coaster-ice/inner-main-holder"),this.getPlayerHead(),this.sky=Game.displayStore.getSprite("roller-coaster-ice/sky"),this.sun=Game.displayStore.getSprite("roller-coaster-ice/sun"),this.cartSeatUpgrade=Game.displayStore.getSprite("roller-coaster-ice/cart-seat-power-up"),this.bgFade1=Game.displayStore.getSprite("roller-coaster-ice/bg-fade"),this.bgFade2=Game.displayStore.getSprite("roller-coaster-ice/bg-fade"),this.shield=Game.displayStore.getSprite("roller-coaster-ice/shield"),this.shieldCounterLimit=300,this.shield.position.y=100,this.shieldPause=0,this.iceHalfLeft=Game.displayStore.getSprite("roller-coaster-ice/ice-screen-cover"),this.iceHalfRight=Game.displayStore.getSprite("roller-coaster-ice/ice-screen-cover"),this.iceScreenActive=!1,this.iceScreenCounter=0,this.iceHalfLeft.scale.x=-1,this.iceHalfLeft.position.x=Game.stageWidth/2,this.iceHalfRight.position.x=Game.stageWidth/2,this.bgFade1.tint=4426177,this.bgFade2.tint=11661311,this.sky.width=Game.stageWidth,this.sky.height=Game.stageHeight,this.bgFade1.width=Game.stageWidth,this.bgFade2.width=Game.stageWidth,this.bgFade1.position.y=300,this.sun.position.x=600,this.sun.position.y=0,this.sun.scale.x=this.sun.scale.y=.75,this.container.addChild(this.sky),this.container.addChild(this.sun),this.targetLegRotation=.5,this.screenShakeCounter=0,this.screenShakeLimit=Game.getRandom(5,15),this.screenShakeEaseAmount=10,this.cameraScaleFactor=12,this.cartImpactCounter=0,this.playerHit=!1,this.hittingBlast=!1,this.collisionDistanceBuffer=42,this.collisionVertOffset=80,this.targetArrowAngle=0,this.allowDownKey=!0,this.allowUpKey=!0,this.inputAngle=0,this.mouseControl=!1,this.blastCollisionData=new Array,this.cameraMotionEaseAmountX=1,this.cameraMotionEaseAmountY=1,this.spawnCloudCounter=0,this.spawnCloudLimit=120,this.arrowAngleEaseAmount=5,this.zoomCameraEaseAmount=30,this.targetCameraScale=1,this.powerUpOn=!1,this.puEffectHolder=Game.displayStore.getContainer("roller-coaster-ice/powerup-effect"),this.puEffectHolder.scale.x=this.puEffectHolder.scale.y=0,this.puEffectSparkle1=this.puEffectHolder.getSprite("roller-coaster-ice/pu-sparkle-1"),this.puEffectSparkle2=this.puEffectHolder.getSprite("roller-coaster-ice/pu-sparkle-2"),this.puEffectGlow=Game.displayStore.getSprite("roller-coaster-ice/pu-glow"),this.puEffectSparkle1.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectSparkle2.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectGlow.blendMode=PIXI.BLEND_MODES.ADD,this.puEffectGlow.scale.x=0,this.puEffectGlow.scale.y=0,this.spawnTicket=!1,this.currentVelocityLevel=0,this.bumped=!1,this.cartTargetBumpPos=0,this.cartTargetBumpAngle=0,this.cartBumpEaseAmount=10,this.cartSpringUpHeight=90,this.springTargetBumpScale=0,this.gameOverTriggered=!1,this.calcDistanceCounter=0,this.calcDistanceCounterLimit=30,this.currentCartVel=0,this.cartLifted=!1,this.difficultyCounter=0,this.difficultyCounterLimit=40,this.distance=0,this.displayDistance=0,this.distanceString="0m",this.cartPos=new PIXI.Point(0,-12),this.angleEaseAmount=6,this.startTrackPos=new PIXI.Point(-200,500),this.mainHolderPos=new PIXI.Point(450,250),this.screenShakeTarget=new PIXI.Point(0,0),this.screenShakeTarget.x=this.mainHolderPos.x,this.screenShakeTarget.y=this.mainHolderPos.y,this.cartHolder=Game.displayStore.getContainer("roller-coaster-ice/cart-holder"),this.cartSeatHolder=Game.displayStore.getContainer("roller-coaster-ice/cart-seat-holder"),this.cartInnerHolder=Game.displayStore.getContainer("roller-coaster-ice/cart-inner-holder"),this.cartLegs=Game.displayStore.getSprite("roller-coaster-ice/cart-legs"),this.cartLegs.rotation=-.5,this.cloudHolderLayer=Game.displayStore.getContainer("roller-coaster-ice/cloud-layer"),this.mainHolder=Game.displayStore.getContainer("roller-coaster-ice/main-holder"),this.outerHolder=Game.displayStore.getContainer("roller-coaster-ice/outer-holder"),this.trackManager=new RollerCoasterIceTrackManager(this,this.innerMainHolder,this.startTrackPos),this.bgHolderFar=Game.displayStore.getContainer("roller-coaster-ice/bg-holder-far"),this.bgHolder=Game.displayStore.getContainer("roller-coaster-ice/bg-holder"),this.caveContainer=Game.displayStore.getContainer("roller-coaster-ice/cave-holder"),this.bgHolder2=Game.displayStore.getContainer("roller-coaster-ice/bg-holder-2"),this.bgManager=new RollerCoasterIceBackgroundManager(this,this.bgHolderFar,this.bgHolder,this.bgHolder2,this.startTrackPos.y),this.caveElements=new Array,this.cartSeatUpgrade.visible=!1,this.cartSeat.visible=!0,this.caveElements.push({sprite:Game.displayStore.getContainer("roller-coaster-ice/cave-bottom-container-1"),posX:0,posY:this.bottomLimit+100,isFront:!0}),this.caveElements.push({sprite:Game.displayStore.getContainer("roller-coaster-ice/cave-bottom-container-2"),posX:this.caveElements[0].sprite.width,posY:this.bottomLimit+100,isFront:!1}),this.caveElements.push({sprite:Game.displayStore.getContainer("roller-coaster-ice/cave-top-container-1"),posX:0,posY:this.topLimit-500,isFront:!0}),this.caveElements.push({sprite:Game.displayStore.getContainer("roller-coaster-ice/cave-top-container-2"),posX:this.caveElements[2].sprite.width,posY:this.topLimit-500,isFront:!1});for(s=0;s<this.caveElements.length;s++)this.caveContainer.addChild(this.caveElements[s].sprite),this.caveElements[s].sprite.position.x=this.caveElements[s].posX,this.caveElements[s].sprite.position.y=this.caveElements[s].posY;this.boostParticlesContainer=Game.displayStore.getContainer("roller-coaster-ice/boost-particle-holder"),this.boostParticles=new Array;for(s=0;s<5;s++){var i=Game.displayStore.getSprite("roller-coaster-ice/boost-particle");this.boostParticles.push({active:!1,sprite:i}),this.boostParticles[s].sprite.position.y=-5e3,this.boostParticles[s].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.boostParticlesContainer.addChild(this.boostParticles[s].sprite)}this.boostParticlesContainer.visible=!1,this.bgFade2.position.y=this.bgHolder.position.y+this.bgFade2.height-150,this.cloudManager=new RollerCoasterIceCloudManager(this,this.cloudHolderLayer,this.cartHolder),this.cloudManager.setCartVelocity(this.trackManager.getCurrentVelocity()),this.ticketManager=new RollerCoasterIceTicketManager(this,this.mainHolder,this.collisionVertOffset),this.ticketManager.createTickets(),this.trackDirectionArrow=Game.displayStore.getSprite("roller-coaster-ice/track-direction-arrow"),this.trackDirectionArrow.scale.x=this.trackDirectionArrow.scale.y=.6,this.cartSeat.position.y=this.cartPos.y,this.cartSeatUpgrade.position.y=this.cartPos.y+80,this.cartSeatUpgrade.position.x=this.cartPos.x+28,this.springScaleOpen=1.1,this.springScaleClosed=.2,this.cartHolder.addChild(this.cartInnerHolder),this.cartSeatHolder.addChild(this.cartSeatUpgrade),this.cartSeatHolder.addChild(this.head),this.cartSeatHolder.addChild(this.cartSeat),this.cartSeatHolder.addChild(this.cartLegs),this.cartSeatHolder.addChild(this.puEffectGlow),this.cartSeatHolder.addChild(this.puEffectHolder),this.puEffectHolder.position.y=60,this.puEffectGlow.position.y=60,this.puEffectHolder.position.x=-10,this.puEffectGlow.position.x=-10,this.cartInnerHolder.addChild(this.boostParticlesContainer),this.cartInnerHolder.addChild(this.cartSeatHolder),this.shieldActive=!1,this.shieldCounter=100,this.head.position.x=0,this.head.position.y=55,this.shieldChargeHolder=Game.displayStore.getContainer("roller-coaster-ice/shield-cooldown-meter-holder"),this.shieldChargeFill=this.shieldChargeHolder.getSprite("roller-coaster-ice/shield-cooldown-meter-fill"),this.shieldChargeHolder.position.x=Game.stageWidth/2-this.shieldChargeHolder.height/2+10,this.shieldChargeHolder.position.y=70,this.shieldChargeHolder.rotation=Math.PI/2,this.cartInnerHolder.position.y=this.cartPos.y,this.mainHolder.addChild(this.cartHolder),this.cartHolder.position.x=2*this.trackManager.sliceWidth,this.cartHolder.position.y=this.startTrackPos.y,this.container.addChild(this.bgHolderFar),this.container.addChild(this.bgFade1),this.container.addChild(this.bgHolder),this.container.addChild(this.bgFade2),this.container.addChild(this.outerHolder),this.outerHolder.addChild(this.mainHolder),this.outerHolder.addChild(this.cloudHolderLayer),this.outerHolder.setRegPointPixels(this.mainHolderPos.x,this.mainHolderPos.y),this.outerHolder.position.x=this.mainHolderPos.x,this.outerHolder.position.y=this.mainHolderPos.y,this.scoreHolder=Game.displayStore.getContainer("roller-coaster-ice/score-holder"),this.scoreText=Game.displayStore.getBitmapText("roller-coaster-ice/score-font"),this.scoreText.scale.x=this.scoreText.scale.y=.8,this.scoreText.position.x=this.scoreHolder.position.x-30,this.scoreText.position.y=this.scoreHolder.position.y-40,this.scoreText.text=this.distanceString,this.scoreHolder.scale.x=this.scoreHolder.scale.y=1,this.scoreHolder.position.y=50,this.scoreHolder.position.x=Game.stageWidth/2,this.heartIcons=new Array,this.cartImpactParticles=new Array;for(s=0;s<10;s++)s<6?this.cartImpactParticles.push({sprite:Game.displayStore.getSprite("roller-coaster-ice/cart-impact-particle"),delayStart:0,angle:0,speed:0,active:!1}):this.cartImpactParticles.push({sprite:Game.displayStore.getSprite("roller-coaster-ice/cart-impact-particle-2"),delayStart:0,angle:0,speed:0,active:!1}),this.cartImpactParticles[s].sprite.position.x=-300,this.mainHolder.addChild(this.cartImpactParticles[s].sprite);this.container.addChild(this.iceHalfLeft),this.container.addChild(this.iceHalfRight),this.container.addChild(this.bgHolder2),this.container.addChild(this.scoreHolder),this.scoreHolder.addChild(this.scoreText),this.iceHalfLeft.blendMode=PIXI.BLEND_MODES.ADD,this.iceHalfRight.blendMode=PIXI.BLEND_MODES.ADD,this.iceHalfLeft.height=Game.stageHeight,this.iceHalfRight.height=Game.stageHeight,this.iceHalfLeft.alpha=0,this.iceHalfRight.alpha=0,this.heartBG=Game.displayStore.getSprite("roller-coaster-ice/heart-bg"),this.container.addChild(this.heartBG),this.heartBG.position.x=109,this.heartBG.position.y=50;for(var s=0;s<3;s++)this.heartIcons.push({heart:Game.displayStore.getSprite("roller-coaster-ice/heart-icon"),active:!0}),this.container.addChild(this.heartIcons[s].heart),this.heartIcons[s].heart.position.x=100,this.heartIcons[s].heart.position.y=50,this.heartIcons[s].heart.visible=!0,this.heartIcons[s].heart.scale.x=0,this.heartIcons[s].heart.scale.y=0;this.heartIcons[0].heart.position.x-=70,this.heartIcons[2].heart.position.x+=70,this.inputManager=new RollerCoasterIceInputManager(this,this.trackDirectionArrow.position),this.positionViewport(),this.container.addChild(this.trackDirectionArrow),this.trackDirectionArrow.position.x=Game.stageWidth/3*2,this.trackDirectionArrow.position.y=Game.stageHeight/2,this.mainHolder.addChild(this.innerMainHolder),this.mainHolder.addChild(this.caveContainer),this.mainHolder.addChild(this.playerShadow),1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("roller-coaster-ice",!0)},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"pause-button":this.pause(!1);break;case"playbuttonlarge":this.resume()}},t.prototype.inputActivated=function(){this.mouseControl=!0},t.prototype.removeShield=function(e){this.shieldActive=!1,this.cloudManager.deactivateCloud(e),this.shield.alpha=0,this.shieldChargeFill.scale.y=0,this.shieldCounter=0,this.shieldPause=0,this.shieldChargeFill.alpha=.4},t.prototype.moveCaveElements=function(){if(1!=this.gameOverTriggered)for(var e=0;e<this.caveElements.length;e++)this.powerUpOn?this.caveElements[e].sprite.position.x-=40:this.caveElements[e].sprite.position.x-=20,this.caveElements[e].sprite.position.x<-this.caveElements[e].sprite.width&&(this.caveElements[e].sprite.position.x+=2*this.caveElements[e].sprite.width)},t.prototype.getPlayerHead=function(){this.head=Game.displayStore.getSprite("roller-coaster-ice/"+this.selectedCharacter+"-head"),"ggg"==this.selectedCharacter?this.cartSeat=Game.displayStore.getSprite("roller-coaster-ice/cart-seat-ggg"):this.cartSeat=Game.displayStore.getSprite("roller-coaster-ice/cart-seat")},t.prototype.calculateDistanceTravelled=function(){this.distance=this.cartHolder.position.x-this.mainHolderPos.x,this.displayDistance=Math.round(this.distance/400),this.distanceString=String(this.displayDistance)+"m",this.scoreText.text=this.distanceString},t.prototype.getPlayerPosition=function(){return this.cartHolder.position.y},t.prototype.startGameplay=function(){switch(this.game.ui.triggerEnjoyTheRide(),this.game.ui.setUI("gameplay"),this.trackManager.setInitialState(this.cartHolder.position.x),this.game.powerUpManager.startGame(),this.selectedCharacter){case"ggg":var e=[{id:"roller-coaster-ice/triple-selfie.mp3"},{id:"roller-coaster-ice/triple-yeyahh.mp3"}];e[o=Game.getRandom(0,2,!0)]&&Game.playSound(e[o].id,e[o].vol||1);break;case"hudson":var t=[{id:"roller-coaster-ice/hudson-hello.mp3"},{id:"roller-coaster-ice/hudson-alright-gameshakers.mp3"}];t[o=Game.getRandom(0,2,!0)]&&Game.playSound(t[o].id,t[o].vol||1);break;case"kenzie":var i=[{id:"roller-coaster-ice/kenzie-its-kenzie.mp3"},{id:"roller-coaster-ice/kenzie-fully-charged.mp3"}];i[o=Game.getRandom(0,2,!0)]&&Game.playSound(i[o].id,i[o].vol||1);break;case"babe":var s=[{id:"roller-coaster-ice/babe-woo.mp3"},{id:"roller-coaster-ice/babe-here-i-come.mp3"}],o=Game.getRandom(0,2,!0);s[o]&&Game.playSound(s[o].id,s[o].vol||1)}Game.playSound("roller-coaster-ice/wind.mp3",.25),this.heartTimeline&&(this.heartTimeline=this.killTween(this.heartTimeline)),0==Game.isLowEndIPad?(this.heartTimeline=new TimelineMax,this.heartTimeline.add([TweenMax.to(this.heartIcons[0].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:0}),TweenMax.to(this.heartIcons[1].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:.1}),TweenMax.to(this.heartIcons[2].heart.scale,.8,{x:1,y:1,ease:Elastic.easeOut,delay:.2})],.5)):(this.heartIcons[0].heart.scale.x=this.heartIcons[0].heart.scale.y=1,this.heartIcons[1].heart.scale.x=this.heartIcons[1].heart.scale.y=1,this.heartIcons[2].heart.scale.x=this.heartIcons[2].heart.scale.y=1)},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.addBlastCollisionData=function(e,t){this.blastCollisionData[e].yPos=t,this.blastCollisionData[e].active=!0},t.prototype.endBlastCollisionData=function(e){this.blastCollisionData[e].active=!1},t.prototype.createBlastCollisionData=function(){this.blastCollisionData.push({yPos:0,active:!1})},t.prototype.updateBlastCollisionData=function(e,t){this.blastCollisionData[e].yPos=t},t.prototype.layTicketThisSlice=function(){var e=!1;return 1==this.spawnTicket&&(this.spawnTicket=!1,e=!0),e},t.prototype.getPlayerLane=function(){var e=this.cartHolder.position.y,t=100*Math.ceil(e/100);return this.playerLane=t/100,this.playerLane},t.prototype.trackLayed=function(){this.mainHolder.addChild(this.cartHolder)},t.prototype.tick=function(){if(e.prototype.tick.call(this),1!=this.paused&&1!=this.wristbandOverlay.isOpen&&(1==this.iceOffTimerActive&&++this.iceOffTimer>=60&&(this.iceOffTimerActive=!1,this.iceScreenActive=!1),this.displayDistance>100&&(this.spawnCloudLimit=90),this.displayDistance>200&&(this.spawnCloudLimit=60),this.displayDistance>300&&(this.spawnCloudLimit=30),this.moveCaveElements(),1==this.powerUpOn&&(this.puEffectHolder.rotation+=.1),this.playerShadow.position.x=this.cartHolder.position.x,this.playerShadow.alpha=this.cartHolder.position.y/this.bottomLimit,this.playerShadow.alpha>1&&(this.playerShadow.alpha=1),this.bgHolder2.alpha=-this.cartHolder.position.y/this.bottomLimit+1,this.bgHolder2.alpha>.95&&(this.bgHolder2.alpha=.95),this.bgHolder2.alpha<.5&&(this.bgHolder2.alpha=.5),this.caveContainer.position.x=this.cartHolder.position.x-800,1==this.losingHeart&&this.scaleDownHeart(this.heartNumber,this.targetHeartScale),this.bgFade2.position.y=this.bgHolder.position.y+this.bgFade2.height-170,this.bgFade2.scale.y=1.2,this.cartLegs.rotation<-.49?this.targetLegRotation=.5:this.cartLegs.rotation>.49&&(this.targetLegRotation=-.5),this.cartLegs.rotation+=(this.targetLegRotation-this.cartLegs.rotation)/20,1!=this.tutorialOverlay.isOpen)){1==this.iceScreenActive&&(this.iceHalfLeft.alpha+=(1-this.iceHalfLeft.alpha)/10,this.iceHalfRight.alpha+=(1-this.iceHalfRight.alpha)/10),0==this.iceScreenActive&&(this.iceHalfLeft.alpha+=(0-this.iceHalfLeft.alpha)/40,this.iceHalfRight.alpha+=(0-this.iceHalfRight.alpha)/40),++this.spawnCloudCounter>=this.spawnCloudLimit&&(this.spawnCloudCounter=0,this.cloudManager.spawnCloud()),++this.calcDistanceCounter>=this.calcDistanceCounterLimit&&(this.calcDistanceCounter=0,this.calculateDistanceTravelled()),++this.difficultyCounter>=this.difficultyCounterLimit&&(this.difficultyCounter=0,this.increaseDifficulty()),this.stepMotion();var t,i;if(1==this.powerUpOn?(t=Game.getRandom(.4,.8),i=10):(t=Game.getRandom(.1,.3),i=2),this.boostParticlesCounter<this.boostParticles.length){var s=this.boostParticles[this.boostParticlesCounter];s.active=!0,s.sprite.position.x=this.cartSeatUpgrade.position.x-this.cartSeatUpgrade.width/2-40,s.sprite.position.y=this.cartSeatUpgrade.y+45,s.sprite.alpha=Game.getRandom(.6,1),s.sprite.scale.x=s.sprite.scale.y=t,this.boostParticlesCounter++}else this.boostParticlesCounter=0;for(var o=0;o<this.boostParticles.length;o++)1==this.boostParticles[o].active&&(this.boostParticles[o].sprite.alpha<=0&&(this.boostParticles[o].active=!1),this.boostParticles[o].sprite.alpha-=.05,this.boostParticles[o].sprite.scale.x+=.1,this.boostParticles[o].sprite.scale.y+=.1,this.boostParticles[o].sprite.position.x-=i)}},t.prototype.setCurrentVelocity=function(e){this.currentCartVel=e,0==this.hittingBlast?this.targetCameraScale=.75:this.targetCameraScale=1.75},t.prototype.increaseDifficulty=function(){this.currentVelocityLevel++,this.trackManager.setVeloctyState(this.currentVelocityLevel),this.cloudManager.setCartVelocity(this.trackManager.getCurrentVelocity())},t.prototype.adjustCamera=function(e){},t.prototype.setArrowAngle=function(e){this.targetArrowAngle=e},t.prototype.stepMotion=function(){this.trackManager.tick(this.cartHolder.position.x),this.cloudManager.tick(this.cartHolder.position),this.bgManager.tick(this.cartHolder.position,this.currentCartVel),this.inputManager.tick(),this.cloudHolderLayer.position.x=this.mainHolder.position.x,this.cloudHolderLayer.position.y=this.mainHolder.position.y,this.checkBlastCollisions(),this.positionViewport(),this.moveCartBumped(),this.moveCartAlongTrack(),this.angleArrow(),this.shakeScreen(),1!=this.tutorialOverlay.isOpen&&this.ticketManager.tick(this.cartHolder.position)},t.prototype.checkBlastCollisions=function(){for(var e,t=!1,i=0;i<this.blastCollisionData.length;i++){var s=!1,o=!1;this.cartHolder.position.y+this.collisionVertOffset>this.blastCollisionData[i].yPos-this.collisionDistanceBuffer-30&&(s=!0),this.cartHolder.position.y+this.collisionVertOffset<this.blastCollisionData[i].yPos+this.collisionDistanceBuffer+30&&(o=!0),1==s&&1==o&&1==this.blastCollisionData[i].active&&(t=!0,e=i)}0==t?this.endCollision():1==t&&this.startCollision(e)},t.prototype.shakeScreen=function(){1==this.hittingBlast&&(++this.screenShakeCounter>=this.screenShakeLimit&&(this.screenShakeCounter=0,this.screenShakeLimit=Game.getRandom(5,15)/(60/Game.fps),this.screenShakeTarget.x=this.mainHolderPos.x+Game.getRandom(-50,50),this.screenShakeTarget.y=this.mainHolderPos.y+Game.getRandom(-50,50)),this.cartImpactCounter++);for(var e=0;e<this.cartImpactParticles.length;e++)this.cartImpactCounter<this.cartImpactParticles[e].delayStart||0!=this.cartImpactParticles[e].active&&(0==this.cartImpactParticles[e].sprite.alpha&&(this.cartImpactParticles[e].sprite.alpha=1),this.cartImpactParticles[e].sprite.position.x=this.cartImpactParticles[e].sprite.position.x+this.cartImpactParticles[e].speed*Math.cos(this.cartImpactParticles[e].angle),this.cartImpactParticles[e].sprite.position.y=this.cartImpactParticles[e].sprite.position.y+this.cartImpactParticles[e].speed*Math.sin(this.cartImpactParticles[e].angle),this.cartImpactParticles[e].sprite.scale.x-=.05,this.cartImpactParticles[e].sprite.scale.y-=.05,this.cartImpactParticles[e].sprite.scale.x<=0&&this.resetCartImpactParticle(e));this.outerHolder.position.x+=(this.screenShakeTarget.x-this.outerHolder.position.x)/this.screenShakeEaseAmount,this.outerHolder.position.y+=(this.screenShakeTarget.y-this.outerHolder.position.y)/this.screenShakeEaseAmount},t.prototype.startCollision=function(e){0==this.hittingBlast&&(this.cloudManager.setHittingCloud(e),this.hittingBlast=!0,this.beginCartImpactAnim(),0==this.playerHit&&(this.playerHit=!0,this.loseLife(),this.shieldCounter=0,this.iceScreenActive=!0))},t.prototype.endCollision=function(){1==this.hittingBlast&&(this.hittingBlast=!1,this.screenShakeTarget.x=this.mainHolderPos.x,this.screenShakeTarget.y=this.mainHolderPos.y,this.playerHit=!1,this.iceOffTimerActive=!0,this.cloudManager.endHittingCloud())},t.prototype.getLives=function(){for(var e=0,t=0;t<this.heartIcons.length;t++)1==this.heartIcons[t].active&&e++;return{currentLives:e,totalLives:this.heartIcons.length}},t.prototype.beginCartImpactAnim=function(){this.cartImpactCounter=0;for(var e=0;e<this.cartImpactParticles.length;e++){var t=Game.getRandom(.5,1);this.cartImpactParticles[e].active=!0,this.cartImpactParticles[e].sprite.scale.x=t,this.cartImpactParticles[e].sprite.scale.y=t,this.cartImpactParticles[e].sprite.position.x=this.cartHolder.position.x,this.cartImpactParticles[e].sprite.position.y=this.cartHolder.position.y+this.collisionVertOffset,this.cartImpactParticles[e].sprite.alpha=0,this.cartImpactParticles[e].delayStart=Game.getRandom(0,60,!0),this.cartImpactParticles[e].angle=Game.getRandom(.5*Math.PI,1.5*Math.PI),this.cartImpactParticles[e].speed=Game.getRandom(5,10)}},t.prototype.resetCartImpactParticle=function(e){if(0!=this.hittingBlast){if(1!=this.gameOverTriggered){var t=Game.getRandom(.5,1);this.cartImpactParticles[e].sprite.scale.x=t,this.cartImpactParticles[e].sprite.scale.y=t,this.cartImpactParticles[e].sprite.position.x=this.cartHolder.position.x,this.cartImpactParticles[e].sprite.position.y=this.cartHolder.position.y+this.collisionVertOffset,this.cartImpactParticles[e].angle=Game.getRandom(.5*Math.PI,1.5*Math.PI),this.cartImpactParticles[e].speed=Game.getRandom(5,10)}}else this.cartImpactParticles[e].active=!1},t.prototype.setMouseInputAngle=function(e){this.inputAngle=e,1==this.mouseControl&&(this.targetArrowAngle=this.trackManager.getNearestMouseAngle(e))},t.prototype.moveCartAlongTrack=function(){this.cartHolder.position.x+=this.trackManager.motionParams.x,this.cartHolder.position.y+=this.trackManager.motionParams.y,this.cartHolder.rotation+=(this.trackManager.motionParams.angle-this.cartHolder.rotation)/this.angleEaseAmount},t.prototype.correctCartAnglePostLoop=function(){this.cartHolder.rotation=0},t.prototype.positionViewport=function(){this.mainHolder.position.x=this.mainHolderPos.x-this.cartHolder.position.x,this.mainHolder.position.y=this.mainHolderPos.y-this.cartHolder.position.y,this.outerHolder.scale.x+=(this.targetCameraScale-this.outerHolder.scale.x)/this.zoomCameraEaseAmount,this.outerHolder.scale.y=this.outerHolder.scale.x},t.prototype.angleArrow=function(){this.trackDirectionArrow.rotation+=(this.targetArrowAngle-this.trackDirectionArrow.rotation)/this.arrowAngleEaseAmount},t.prototype.getCurrentCartPos=function(){return new PIXI.Point(this.cartHolder.position.x,this.cartHolder.position.y)},t.prototype.activatePowerUpEffect=function(){switch(this.powerUpOn=!0,this.trackManager.activatePowerUp(),this.bgManager.activatePowerUp(),this.cloudManager.powerUpKillAllClouds(),Game.playSound("roller-coaster-ice/power-up-transform.mp3",1),this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.activatePowerupTimeline=new TimelineMax,this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.3,{x:2.5,y:2.5,ease:Power2.easeIn}),TweenMax.to(this.puEffectGlow.scale,.3,{x:5,y:3.2,ease:Power2.easeIn})],0),this.activatePowerupTimeline.call(function(){this.cartSeatUpgrade.visible=!0,this.boostParticlesContainer.visible=!0},null,this),this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.5,{x:0,y:0,ease:Power2.easeOut}),TweenMax.to(this.puEffectGlow.scale,.5,{x:0,y:0,ease:Power2.easeOut})]),this.cartSeatUpgrade.visible=!0,this.selectedCharacter){case"ggg":var e=[{id:"roller-coaster-ice/triple-yeah-woo-yeah.mp3"},{id:"roller-coaster-ice/triple-yeyahh.mp3"}];e[o=Game.getRandom(0,1,!0)]&&Game.playSound(e[o].id,e[o].vol||1);break;case"hudson":var t=[{id:"roller-coaster-ice/hudson-later-gators.mp3"},{id:"roller-coaster-ice/hudson-alright-gameshakers.mp3"}];t[o=Game.getRandom(0,1,!0)]&&Game.playSound(t[o].id,t[o].vol||1);break;case"kenzie":var i=[{id:"roller-coaster-ice/kenzie-easy-squeezy.mp3"},{id:"roller-coaster-ice/kenzie-fully-charged.mp3"}];i[o=Game.getRandom(0,1,!0)]&&Game.playSound(i[o].id,i[o].vol||1);break;case"babe":var s=[{id:"roller-coaster-ice/babe-woo.mp3"},{id:"roller-coaster-ice/babe-here-i-come.mp3"}],o=Game.getRandom(0,1,!0);s[o]&&Game.playSound(s[o].id,s[o].vol||1)}},t.prototype.deactivatePowerUpEffect=function(){this.powerUpOn=!1,this.trackManager.deactivatePowerUp(),this.bgManager.deactivatePowerUp(),this.cloudManager.endPowerUp(),Game.playSound("roller-coaster-ice/power-down-transform.mp3",1),this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.activatePowerupTimeline=new TimelineMax,this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.2,{x:2.5,y:2.5,ease:Power2.easeIn}),TweenMax.to(this.puEffectGlow.scale,.2,{x:5,y:3.2,ease:Power2.easeIn})],0),this.activatePowerupTimeline.call(function(){this.cartSeatUpgrade.visible=!1,this.boostParticlesContainer.visible=!1},null,this),this.activatePowerupTimeline.add([TweenMax.to(this.puEffectHolder.scale,.5,{x:0,y:0,ease:Power2.easeOut}),TweenMax.to(this.puEffectGlow.scale,.5,{x:0,y:0,ease:Power2.easeOut})])},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&(this.mouseControl=!1,"up"==t?this.upKeyDown():"down"==t&&this.downKeyDown())},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&(this.mouseControl=!1,"up"==t?this.upKeyUp():"down"==t&&this.downKeyUp())},t.prototype.upKeyDown=function(){0!=this.allowUpKey&&(this.allowUpKey=!1,this.changeAngleUp())},t.prototype.downKeyDown=function(){0!=this.allowDownKey&&(this.allowDownKey=!1,this.changeAngleDown())},t.prototype.upKeyUp=function(){this.allowUpKey=!0},t.prototype.downKeyUp=function(){this.allowDownKey=!0},t.prototype.changeAngleUp=function(){this.trackManager.changeAngleUp()},t.prototype.changeAngleDown=function(){this.trackManager.changeAngleDown()},t.prototype.checkObstacleImpact=function(e){"track"==e?0==this.cartLifted&&this.hitObstacle():"air"==e?1==this.cartLifted&&this.hitObstacle():"ticket-hand"==e&&this.collectTicket()},t.prototype.collectTicket=function(){},t.prototype.secondChanceUse=function(){this.addLife(),this.gameOverTriggered=!1,this.trackManager.secondChanceUse(),this.cloudManager.secondChanceUse(),this.bgManager.secondChanceUse(),this.game.powerUpManager.setGameOverCooldown(!1),this.gameEnded=!1},t.prototype.bumpCart=function(){var e=Game.getRandom(4,8);1==this.cartLifted?this.cartSpringUpHeight:0==this.cartLifted&&this.cartPos.y,this.cartTargetBumpPos=this.cartTargetBumpPos-e,this.cartTargetBumpAngle=Game.getRandom(-.1,.1)},t.prototype.unBumpCart=function(){1==this.cartLifted?this.cartTargetBumpPos=-this.cartSpringUpHeight:0==this.cartLifted&&(this.cartTargetBumpPos=this.cartPos.y),this.cartTargetBumpAngle=0},t.prototype.toggleBumpCart=function(){1==this.bumped?(this.bumped=!1,this.unBumpCart()):0==this.bumped&&(this.bumped=!0,this.bumpCart())},t.prototype.moveCartBumped=function(){this.cartInnerHolder.position.y+=(this.cartTargetBumpPos-this.cartInnerHolder.position.y)/this.cartBumpEaseAmount,this.cartSeatHolder.rotation+=(this.cartTargetBumpAngle-this.cartSeatHolder.rotation)/this.cartBumpEaseAmount,this.cartInnerHolder.position.x=Math.tan(this.cartSeatHolder.rotation)*(this.cartPos.y-this.cartTargetBumpPos)},t.prototype.hitObstacle=function(){this.trackManager.getObstacleType(),this.trackManager.getObstacleIndex()},t.prototype.loseLife=function(){if(1!=this.gameOverTriggered)for(var e=this.heartIcons.length-1;e>=0;e--)if(0!=this.heartIcons[e].active){switch(this.heartIcons[e].active=!1,this.selectedCharacter){case"ggg":var t=[{id:"roller-coaster-ice/triple-cmon.mp3"},{id:"roller-coaster-ice/triple-i-lost-a-shoe.mp3"}];t[r=Game.getRandom(0,3,!0)]&&Game.playSound(t[r].id,t[r].vol||1);break;case"hudson":var i=[{id:"roller-coaster-ice/hudson-hmmm.mp3"},{id:"roller-coaster-ice/hudson-no-way.mp3"}];i[r=Game.getRandom(0,3,!0)]&&Game.playSound(i[r].id,i[r].vol||1);break;case"kenzie":var s=[{id:"roller-coaster-ice/kenzie-aww.mp3"},{id:"roller-coaster-ice/kenzie-jeez-louise.mp3"}];s[r=Game.getRandom(0,3,!0)]&&Game.playSound(s[r].id,s[r].vol||1);break;case"babe":var o=[{id:"roller-coaster-ice/babe-problem.mp3"},{id:"roller-coaster-ice/babe-upsy-daisy.mp3"}];o[r=Game.getRandom(0,3,!0)]&&Game.playSound(o[r].id,o[r].vol||1)}var a=[{id:"roller-coaster-ice/zap-1.mp3"},{id:"roller-coaster-ice/zap-2.mp3"}],r=Game.getRandom(0,1,!0);return Game.playSound(a[r].id,a[r].vol||1),0==Game.isLowEndIPad?(this.losingHeart=!0,this.heartNumber=e,this.targetHeartScale=0):this.heartIcons[e].heart.visible=!1,void this.checkGameOver()}},t.prototype.addLife=function(){for(var e=0;e<this.heartIcons.length;e++)if(1!=this.heartIcons[e].active)return this.heartIcons[e].active=!0,void(0==Game.isLowEndIPad?(this.losingHeart=!0,this.heartNumber=e,this.targetHeartScale=1):this.heartIcons[e].heart.visible=!0)},t.prototype.scaleDownHeart=function(e,t){switch(this.heartIcons[e].heart.scale.x+=(t-this.heartIcons[e].heart.scale.x)/5,this.heartIcons[e].heart.scale.y+=(t-this.heartIcons[e].heart.scale.y)/5,t){case 0:this.heartIcons[e].heart.scale.x<=t&&(this.losingHeart=!1,this.heartIcons[e].heart.scale.x=0,this.heartIcons[e].heart.scale.y=0);break;case 1:this.heartIcons[e].heart.scale.x>=t&&(this.losingHeart=!1,this.heartIcons[e].heart.scale.x=1,this.heartIcons[e].heart.scale.y=1)}},t.prototype.checkGameOver=function(){if(1!=this.gameOverTriggered){for(var e=0,t=0;t<this.heartIcons.length;t++)1==this.heartIcons[t].active&&e++;0==e&&(this.gameOverTriggered=!0,this.trackManager.triggerGameOver(),this.cloudManager.triggerGameOver(),this.bgManager.triggerGameOver(),this.game.powerUpManager.setGameOverCooldown(!0))}},t.prototype.goToGameOver=function(){1!=this.gameEnded&&(this.gameEnded=!0,console.log("going to game over..."),this.wristbandOverlay.endGame(this.displayDistance))},t.prototype.pause=function(t){0==t&&(Game.pauseSound("roller-coaster-ice/music.mp3"),e.prototype.pause.call(this,t)),Game.pauseSound("roller-coaster-ice/power-up-transform.mp3"),Game.pauseSound("roller-coaster-ice/power-down-transform.mp3"),Game.pauseSound("roller-coaster-ice/swish-long-1.mp3"),Game.pauseSound("roller-coaster-ice/swish-long-2.mp3"),Game.pauseSound("roller-coaster-ice/swish-long-3.mp3"),Game.pauseSound("roller-coaster-ice/ice-pop-1.mp3"),Game.pauseSound("roller-coaster-ice/ice-pop-2.mp3"),Game.pauseSound("roller-coaster-ice/ice-pop-3.mp3"),Game.pauseSound("roller-coaster-ice/ice-pop-4.mp3"),Game.pauseSound("roller-coaster-ice/laser-1.mp3"),Game.pauseSound("roller-coaster-ice/laser-2.mp3"),Game.pauseSound("roller-coaster-ice/wind.mp3"),Game.pauseSound("roller-coaster-ice/click-1.mp3"),Game.pauseSound("roller-coaster-ice/click-2.mp3"),Game.pauseSound("roller-coaster-ice/click-3.mp3"),Game.pauseSound("roller-coaster-ice/thud-1.mp3"),Game.pauseSound("roller-coaster-ice/thud-2.mp3"),Game.pauseSound("roller-coaster-ice/thud-3.mp3"),Game.pauseSound("roller-coaster-ice/zap-1.mp3"),Game.pauseSound("roller-coaster-ice/zap-2.mp3"),this.game.powerUpManager.pause()},t.prototype.resume=function(){e.prototype.resume.call(this),Game.resumeSound("roller-coaster-ice/power-up-transform.mp3"),Game.resumeSound("roller-coaster-ice/power-down-transform.mp3"),Game.resumeSound("roller-coaster-ice/music.mp3"),Game.resumeSound("roller-coaster-ice/swish-long-1.mp3"),Game.resumeSound("roller-coaster-ice/swish-long-2.mp3"),Game.resumeSound("roller-coaster-ice/swish-long-3.mp3"),Game.resumeSound("roller-coaster-ice/ice-pop-1.mp3"),Game.resumeSound("roller-coaster-ice/ice-pop-2.mp3"),Game.resumeSound("roller-coaster-ice/ice-pop-3.mp3"),Game.resumeSound("roller-coaster-ice/ice-pop-4.mp3"),Game.resumeSound("roller-coaster-ice/laser-1.mp3"),Game.resumeSound("roller-coaster-ice/laser-2.mp3"),Game.resumeSound("roller-coaster-ice/wind.mp3"),Game.resumeSound("roller-coaster-ice/click-1.mp3"),Game.resumeSound("roller-coaster-ice/click-2.mp3"),Game.resumeSound("roller-coaster-ice/click-3.mp3"),Game.resumeSound("roller-coaster-ice/thud-1.mp3"),Game.resumeSound("roller-coaster-ice/thud-2.mp3"),Game.resumeSound("roller-coaster-ice/thud-3.mp3"),Game.resumeSound("roller-coaster-ice/zap-1.mp3"),Game.resumeSound("roller-coaster-ice/zap-2.mp3"),this.game.ui.setUI("gameplay"),this.game.powerUpManager.resume()},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause"),this.setBackgroundColor(15395562)},t.prototype.destroy=function(){e.prototype.destroy.call(this),Game.stopSound("roller-coaster-ice/triple-selfie.mp3"),Game.stopSound("roller-coaster-ice/triple-yeyahh.mp3"),Game.stopSound("roller-coaster-ice/hudson-hello.mp3"),Game.stopSound("roller-coaster-ice/hudson-alright-gameshakers.mp3"),Game.stopSound("roller-coaster-ice/kenzie-its-kenzie.mp3"),Game.stopSound("roller-coaster-ice/kenzie-fully-charged.mp3"),Game.stopSound("roller-coaster-ice/babe-woo.mp3"),Game.stopSound("roller-coaster-ice/babe-here-i-come.mp3"),Game.stopSound("roller-coaster-ice/triple-cmon.mp3"),Game.stopSound("roller-coaster-ice/triple-i-lost-a-shoe.mp3"),Game.stopSound("roller-coaster-ice/hudson-hmmm.mp3"),Game.stopSound("roller-coaster-ice/hudson-no-way.mp3"),Game.stopSound("roller-coaster-ice/kenzie-aww.mp3"),Game.stopSound("roller-coaster-ice/kenzie-jeez-louise.mp3"),Game.stopSound("roller-coaster-ice/babe-problem.mp3"),Game.stopSound("roller-coaster-ice/babe-upsy-daisy.mp3"),Game.stopSound("roller-coaster-ice/triple-yeah-woo-yeah.mp3"),Game.stopSound("roller-coaster-ice/hudson-later-gators.mp3"),Game.stopSound("roller-coaster-ice/kenzie-easy-squeezy.mp3"),Game.stopSound("roller-coaster-ice/power-up-transform.mp3"),Game.stopSound("roller-coaster-ice/power-down-transform.mp3"),Game.stopSound("roller-coaster-ice/swish-long-1.mp3"),Game.stopSound("roller-coaster-ice/swish-long-2.mp3"),Game.stopSound("roller-coaster-ice/swish-long-3.mp3"),Game.stopSound("roller-coaster-ice/ice-pop-1.mp3"),Game.stopSound("roller-coaster-ice/ice-pop-2.mp3"),Game.stopSound("roller-coaster-ice/ice-pop-3.mp3"),Game.stopSound("roller-coaster-ice/ice-pop-4.mp3"),Game.stopSound("roller-coaster-ice/laser-1.mp3"),Game.stopSound("roller-coaster-ice/laser-2.mp3"),Game.stopSound("roller-coaster-ice/wind.mp3"),Game.stopSound("roller-coaster-ice/click-1.mp3"),Game.stopSound("roller-coaster-ice/click-2.mp3"),Game.stopSound("roller-coaster-ice/click-3.mp3"),Game.stopSound("roller-coaster-ice/thud-1.mp3"),Game.stopSound("roller-coaster-ice/thud-2.mp3"),Game.stopSound("roller-coaster-ice/thud-3.mp3"),Game.stopSound("roller-coaster-ice/zap-1.mp3"),Game.stopSound("roller-coaster-ice/zap-2.mp3"),this.trackManager.destroy(),this.bgManager.destroy(),this.inputManager.destroy(),this.cloudManager.destroy(),this.ticketManager.destroy(),this.tutorialOverlay.destroy();for(t=0;t<this.cartImpactParticles.length;t++)Game.displayStore.returnPooledItem(this.cartImpactParticles[t].sprite);for(t=0;t<this.heartIcons.length;t++)Game.displayStore.returnPooledItem(this.heartIcons[t].heart);for(t=0;t<this.caveElements.length;t++)Game.displayStore.returnPooledItem(this.caveElements[t].sprite);for(var t=0;t<this.boostParticles.length;t++)Game.displayStore.returnPooledItem(this.boostParticles[t].sprite);Game.displayStore.returnPooledItem(this.bgFade1),Game.displayStore.returnPooledItem(this.bgFade2),this.heartTimeline=this.killTween(this.heartTimeline),this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),Game.displayStore.returnPooledItem(this.iceHalfLeft),Game.displayStore.returnPooledItem(this.iceHalfRight),Game.displayStore.returnPooledItem(this.redLineBottom),Game.displayStore.returnPooledItem(this.redLineTop)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),TreeTopGladiatorsGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="treeTopGladiatorsGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.setBackgroundColor(16250871),Game.playSound("tree-top-gladiators/music.mp3",.1),Game.playSound("tree-top-gladiators/background.mp3",.03),this.keyboardFireLocked=!1,this.firstRound=!0,this.score=0,this.soundActive=!1,this.loseLifeCooldownActive=!1,this.roundStarted=!1,this.podsCrossedOver=!1,this.offstagePodDistance=500,this.gameEnded=!1,this.powerUpOn=!1,this.healthBarOffscreenPos=Game.stageHeight+100,this.healthBarOnscreenPos=520,this.healthBarMoveEaseAmount=10,this.healthBarTargetPos=this.healthBarOffscreenPos,this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),this.healthFacesHolder=Game.displayStore.getContainer("tree-top-gladiators/health-face-holder"),this.healthFaces=new Array,this.healthFaces.push({name:"lana",sprite:this.healthFacesHolder.getSprite("tree-top-gladiators/lana-face")}),this.healthFaces.push({name:"lori",sprite:this.healthFacesHolder.getSprite("tree-top-gladiators/lori-face")}),this.healthFaces.push({name:"leni",sprite:this.healthFacesHolder.getSprite("tree-top-gladiators/leni-face")}),this.healthFaces.push({name:"lisa",sprite:this.healthFacesHolder.getSprite("tree-top-gladiators/lisa-face")}),this.healthFaces.push({name:"lola",sprite:this.healthFacesHolder.getSprite("tree-top-gladiators/lola-face")}),this.healthFaces.push({name:"lucy",sprite:this.healthFacesHolder.getSprite("tree-top-gladiators/lucy-face")}),this.healthFaces.push({name:"luna",sprite:this.healthFacesHolder.getSprite("tree-top-gladiators/luna-face")}),this.healthFaces.push({name:"luan",sprite:this.healthFacesHolder.getSprite("tree-top-gladiators/luan-face")}),this.healthFaces.push({name:"lynn",sprite:this.healthFacesHolder.getSprite("tree-top-gladiators/lynn-face")});for(r=0;r<this.healthFaces.length;r++)this.healthFaces[r].sprite.visible=!1;Game.coreData.setCurrentRide("tree-top-gladiators"),this.tutorialViewed=Game.coreData.getGameTutorialViewed("tree-top-gladiators"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.mainContainer=Game.displayStore.getContainer("tree-top-gladiators/main-holder"),this.mainContainer.position.y=-200,this.container.addChild(this.mainContainer),this.backgroundManager=new TreeTopGladiatorsBackgroundManager(this,this.mainContainer),this.physicsManager=new TreeTopGladiatorsPhysicsManager(this),this.physicsManager.initPhysicsWorld(),this.physicsDebugger=new PhysicsDebugger(this,this.mainContainer,this.physicsManager.world),this.podLinc=new TreeTopGladiatorPodLinc(this,this.mainContainer,"linc"),this.podSister=new TreeTopGladiatorPodSister(this,this.mainContainer,"sister"),this.inputManager=new TreeTopGladiatorsInputManager(this,this.mainContainer),this.lincPodBetweenRoundPos=-this.offstagePodDistance,this.sisterPodBetweenRoundPos=Game.stageWidth+this.offstagePodDistance,this.podLinc.buildPod("left",this.lincPodBetweenRoundPos),this.podSister.buildPod("right",this.sisterPodBetweenRoundPos),this.podLinc.tick(this.podSister,0),this.podSister.tick(this.podLinc,0),this.impactPop=Game.displayStore.getAnimatedSprite("tree-top-gladiators/impact-pop"),this.impactPop.position.x=-500,this.impactPop.loop=!1,this.impactPop.scale.x=this.impactPop.scale.y=1.5,this.impactPop.animationSpeed=.3,this.impactPop.blendMode=PIXI.BLEND_MODES.ADD,this.impactParticles=new Array;for(r=0;r<10;r++){var i=Game.displayStore.getSprite("tree-top-gladiators/pod-hit-particle"),s=this.physicsManager.getImpactParticle(),o=Game.getRandom(.5,1);i.position.x=-500,i.scale.x=o,i.scale.y=o,this.mainContainer.addChild(i),this.impactParticles.push({sprite:i,body:s.body,shape:s.shape,active:!1})}this.mainContainer.addChild(this.impactPop),this.healthBarHolder=Game.displayStore.getContainer("tree-top-gladiators/enemy-health-bar-holder"),this.healthBarFill=Game.displayStore.getSprite("tree-top-gladiators/enemy-health-bar-fill"),this.healthBarBG=Game.displayStore.getSprite("tree-top-gladiators/enemy-health-bar-bg"),this.healthBarHolder.addChild(this.healthBarBG),this.healthBarHolder.addChild(this.healthBarFill),this.container.addChild(this.healthBarHolder),this.healthBarHolder.addChild(this.healthFacesHolder),this.healthBarFill.position.x=10,this.healthBarFill.position.y=0,this.healthBarFill.scale.x=.6,this.healthBarBG.scale.x=.6,this.healthBarHolder.position.x=(Game.stageWidth-this.healthBarBG.width)/2,this.healthBarHolder.position.y=Game.stageHeight+100,this.healthFacesHolder.position.x=this.healthBarHolder.position.x+this.healthBarBG.width/2-40,this.healthFacesHolder.position.y=0,this.healthBarFill.tint=6018816,this.opponentManager=new TreeTopGladiatorsOpponentManager(this,this.podLinc,this.podSister,this.healthBarHolder,this.healthBarFill),this.heartIconBG=Game.displayStore.getSprite("tree-top-gladiators/heart-bg"),this.heartIconBG.position.y=45,this.container.addChild(this.heartIconBG),this.heartLives=new Array;for(r=0;r<3;r++)(i=Game.displayStore.getSprite("tree-top-gladiators/heart-icon")).position.y=45,i.position.x=40+60*r,this.container.addChild(i),this.heartLives.push({icon:i,active:!0});this.scoreHolder=Game.displayStore.getContainer("tree-top-gladiators/score-holder"),this.scoreBG=Game.displayStore.getSprite("tree-top-gladiators/score-bg"),this.scoreText=Game.displayStore.getBitmapText("tree-top-gladiators/score-font"),this.scoreHolder.position.x=Game.stageWidth/2,this.scoreHolder.position.y=45,this.scoreHolder.addChild(this.scoreBG),this.scoreHolder.addChild(this.scoreText),this.scoreText.text="0",this.scoreText.scale.x=this.scoreText.scale.y=.8,this.scoreText.position.x=-this.scoreText.width/2,this.scoreText.position.y=-this.scoreText.height/2-18,this.container.addChild(this.scoreHolder);this.tickets=new Array;for(r=0;r<2;r++)this.tickets.push({ticket:Game.ticketPool.getTicket(),posX:150*r,posY:-100,collectDelay:null});for(var a=(Game.stageWidth-this.tickets[this.tickets.length-1].posX)/2,r=0;r<this.tickets.length;r++)this.tickets[r].posX+=a;1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("tree-top-gladiators",!0)},t.prototype.startSoundTimer=function(){this.soundTimer=TweenMax.delayedCall(2,function(){this.soundActive=!1,this.soundTimer=this.killTween(this.soundTimer)},null,this)},t.prototype.startGameplay=function(){this.game.ui.triggerEnjoyTheRide(),this.game.ui.setUI("gameplay-gladiators"),this.game.powerUpManager.startGame(),this.backgroundManager.startPanLevelDown(),this.podSister.sisterVisible(),this.podLinc.bringInPod(),this.podSister.bringInPod(),this.setHealthBarFace(),Game.playSound("tree-top-gladiators/crank-2.mp3",.2),this.startFirstRoundDelay=TweenMax.delayedCall(3.5,this.startRound,null,this),0==this.soundActive&&(this.soundActive=!0,Game.playSound("tree-top-gladiators/linc-its-go-time.mp3",.5),this.startSoundTimer())},t.prototype.setHealthBarFace=function(){for(var e=0;e<this.healthFaces.length;e++)this.healthFaces[e].name==this.podSister.currentSister?this.healthFaces[e].sprite.visible=!0:this.healthFaces[e].sprite.visible=!1},t.prototype.newSisterStartRound=function(){this.podSister.sisterVisible(),Game.playSound("tree-top-gladiators/crank-3.mp3",.2),this.startFirstRoundDelay=TweenMax.delayedCall(3.5,this.startRound,null,this)},t.prototype.startRound=function(){if(this.podSister.sisterVisible(),this.game.powerUpManager.betweenRoundPowerUpResume(),this.startFirstRoundDelay=this.killTween(this.startFirstRoundDelay),this.roundStarted=!0,this.opponentManager.setRoundParams(),this.healthBarTargetPos=this.healthBarOnscreenPos,0==this.firstRound&&this.game.powerUpManager.manuallySetPowerUpButton(!0),this.firstRound=!1,0==this.soundActive){this.soundActive=!0;var e;e=Game.getRandom(0,1)>.5?["tree-top-gladiators/linc-its-go-time.mp3"]:["tree-top-gladiators/"+this.podSister.currentSister+"-intro.mp3"],Game.playSound(e[0],.5),this.startSoundTimer()}},t.prototype.resetImpactParticle=function(e){for(var t=0;t<this.impactParticles.length;t++)if(this.impactParticles[t].body==e)return this.impactParticles[t].active=!1,void this.physicsManager.removeBodyFromWorld(this.impactParticles[t].body)},t.prototype.getPodPhysicsElements=function(e){return this.physicsManager.getPodPhysicsElements(e)},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.handlePugilHit=function(e,t,i){this.handlePugilImpactElements(t,e,this.podSister,this.podLinc,i),this.handlePugilImpactElements(e,t,this.podSister,this.podLinc,i),this.handlePugilImpactElements(e,t,this.podLinc,this.podSister,i),this.handlePugilImpactElements(t,e,this.podLinc,this.podSister,i)},t.prototype.endRound=function(){this.populateTickets(),Game.stopSound("tree-top-gladiators/rolling.mp3"),this.podSister.changeExpression("sad"),this.podSister.newAssetsReady=!1,this.game.powerUpManager.betweenRoundPowerUpPause(),this.game.ui.hidePowerUpButton(),this.wonRoundRefillLives(),this.updateScore(),this.podLinc.resetPosParams(),this.podSister.resetPosParams(),this.healthBarTargetPos=this.healthBarOffscreenPos,this.backgroundManager.startNewRound(),this.roundStarted=!1},t.prototype.sisterInvisible=function(){this.podSister.sisterInvisible()},t.prototype.getNewSister=function(){Game.playSound("tree-top-gladiators/crank-2.mp3",.2),this.podSister.removePodElements(),this.podSister.assignNewSister(!0)},t.prototype.populateTickets=function(){for(var e=0;e<this.tickets.length;e++){this.tickets[e].ticket=Game.ticketPool.getTicket(),this.tickets[e].ticket.container.position.x=this.tickets[e].posX,this.tickets[e].ticket.container.position.y=this.tickets[e].posY,this.mainContainer.addChild(this.tickets[e].ticket.container);var t=2.5+.5*e;this.tickets[e].collectDelay=TweenMax.delayedCall(t,this.collectTicket,[this,e])}},t.prototype.collectTicket=function(e,t){e.tickets[t].ticket.collect(),e.tickets[t].collectDelay=e.killTween(e.tickets[t].collectDelay)},t.prototype.updateScore=function(){this.score++,TweenMax.to(this.scoreText.scale,.2,{x:1,y:1,ease:Sine.easeOut,repeat:1,yoyo:!0}),this.scoreText.text=String(this.score),this.scoreText.position.x=-this.scoreText.width/2,this.scoreText.position.y=-this.scoreText.height/2-18},t.prototype.handlePugilImpactElements=function(e,t,i,s,o){if(1!=this.powerUpOn){if(e==i.podPhysicsBody){if(0==s.getArmExtended())return;if(1==s.getLandedPugilHit())return;i==this.podLinc&&this.lincLoseLife(),this.recoilPod(i,o),this.setContactLocation(i,t.position,o)}}else e==i.podPhysicsBody&&(this.recoilPod(i,o),this.setContactLocation(i,t.position,o))},t.prototype.lincLoseLife=function(){if(1!=this.loseLifeCooldownActive){this.loseLifeCooldownActive=!0,this.podLinc.lincHitActive=!0;var e;if(e=["tree-top-gladiators/target-hit-1.mp3","tree-top-gladiators/target-hit-2.mp3"],Game.playSound(e[Game.getRandom(0,1,!0)],.5),this.podLinc.changeExpression(1),this.podSister.changeExpression("happy"),0==this.soundActive){this.soundActive=!0;var t;t=Game.getRandom(0,1)>.5?["tree-top-gladiators/linc-grrr.mp3","tree-top-gladiators/linc-dang-it.mp3"]:["tree-top-gladiators/"+this.podSister.currentSister+"-positive.mp3","tree-top-gladiators/"+this.podSister.currentSister+"-positive-2.mp3"],Game.playSound(t[Game.getRandom(0,1,!0)],.3),this.startSoundTimer()}this.heartTimeline=this.killTween(this.heartTimeline),this.heartTimeline=new TimelineMax({onComplete:this.checkGameOver,onCompleteParams:[this]});for(var i=this.heartLives.length-1;i>=0;i--)if(1==this.heartLives[i].active)return this.heartLives[i].active=!1,void this.heartTimeline.add([TweenMax.to(this.heartLives[i].icon.scale,.5,{x:0,y:0,ease:Quad.easeIn})],0)}},t.prototype.wonRoundRefillLives=function(){this.podLinc.changeExpression(2),this.heartTimeline=this.killTween(this.heartTimeline),this.heartTimeline=new TimelineMax({delay:2});for(var e=0;e<this.heartLives.length;e++)this.heartLives[e].active=!0,this.heartTimeline.add([TweenMax.to(this.heartLives[e].icon.scale,.5,{x:1,y:1,ease:Quad.easeIn})],.5*e)},t.prototype.checkGameOver=function(e){e.loseLifeCooldownActive=!1;for(var t=0,i=0;i<e.heartLives.length;i++)1==e.heartLives[i].active&&t++;t>0||1!=e.gameEnded&&(e.gameEnded=!0,e.gameOverDelay=e.killTween(e.gameOverDelay),e.gameOverDelay=TweenMax.delayedCall(1.5,e.gameOver,[e]))},t.prototype.gameOver=function(e){e.gameOverDelay=e.killTween(e.gameOverDelay),e.wristbandOverlay.endGame(e.score)},t.prototype.setContactLocation=function(e,t,i){var s=[0,0];p2.vec2.add(s,t,i),this.impactPop.position.x=s[0],this.impactPop.position.y=Game.stageHeight-s[1],this.impactPop.gotoAndStop(0),this.impactPop.play(),this.recoilPod(e,i),this.popImpactParticles(s,i)},t.prototype.getLincLifeCooldownActive=function(){return this.loseLifeCooldownActive},t.prototype.recoilPod=function(e,t){var i=[0,0];p2.vec2.normalize(i,t),e.recoilPod(i)},t.prototype.sisterHit=function(){var e;if(e=["tree-top-gladiators/target-hit-1.mp3","tree-top-gladiators/target-hit-2.mp3"],Game.playSound(e[Game.getRandom(0,1,!0)],.3),0==this.soundActive){this.soundActive=!0;var t;t=Game.getRandom(0,1)>.5?["tree-top-gladiators/linc-awesome.mp3","tree-top-gladiators/linc-yes.mp3"]:["tree-top-gladiators/"+this.podSister.currentSister+"-negative.mp3","tree-top-gladiators/"+this.podSister.currentSister+"-negative-2.mp3"],Game.playSound(t[Game.getRandom(0,1,!0)],.5),this.startSoundTimer()}this.podSister.changeExpression("sad"),this.podLinc.changeExpression(2),this.opponentManager.receiveDamage()},t.prototype.lincHit=function(){},t.prototype.popImpactParticles=function(e,t){var i=Game.getRandom(2,8,!0),s=0,o=[20,100],a=[0,0];p2.vec2.normalize(a,t);for(var r=0;r<this.impactParticles.length;r++)if(0==this.impactParticles[r].active){s++;var n=this.impactParticles[r].body;this.physicsManager.addBodyToWorld(n);var h=a[0]+Game.getRandom(-1.5,1.5),l=a[1]+Game.getRandom(-1.5,1.5);if(n.position[0]=e[0],n.position[1]=e[1],n.invMass=1/n.mass,n.invInertia=1/n.inertia,n.angle=0,n.velocity=[0,0],n.setZeroForce(),n.applyImpulse([h*Game.getRandom(o[0],o[1]),l*Game.getRandom(o[0],o[1])]),this.impactParticles[r].active=!0,s>=i)return}},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"playbuttonlarge":this.resume();break;case"pause-button":this.pause(!1)}},t.prototype.downOnUI=function(t){switch(e.prototype.downOnUI.call(this,t),t.id){case"river-rangers-fire-button":this.popPugil()}},t.prototype.popPugil=function(){0!=this.roundStarted&&this.podLinc.popPugil()},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.getRoundStarted=function(){return this.roundStarted},t.prototype.tick=function(){if(e.prototype.tick.call(this),1!=this.paused&&1!=this.tutorialOverlay.isOpen&&1!=this.wristbandOverlay.isOpen){this.backgroundManager.tick(),this.physicsManager.stepPhysics();var t=this.getAngle(this.podSister.podPhysicsBody.position[0],this.podSister.podPhysicsBody.position[1],this.podLinc.podPhysicsBody.position[0],this.podLinc.podPhysicsBody.position[1]);this.podLinc.tick(this.podSister,t),this.podSister.tick(this.podLinc,t),this.inputManager.tick(),this.opponentManager.tick();for(var i=0;i<this.impactParticles.length;i++)0!=this.impactParticles[i].active&&(this.impactParticles[i].sprite.position.x=this.impactParticles[i].body.position[0],this.impactParticles[i].sprite.position.y=Game.stageHeight-this.impactParticles[i].body.position[1],this.impactParticles[i].sprite.rotation=-this.impactParticles[i].body.angle);this.podLinc.podHolder.position.x>this.podSister.podHolder.position.x?this.podsCrossed(!0):this.podsCrossed(!1),this.moveHealthBar()}},t.prototype.toggleHealthBarOn=function(e){1==e?this.healthBarTargetPos=this.healthBarOnscreenPos:0==e&&(this.healthBarTargetPos=this.healthBarOffscreenPos)},t.prototype.moveHealthBar=function(){this.healthBarHolder.position.y+=(this.healthBarTargetPos-this.healthBarHolder.position.y)/this.healthBarMoveEaseAmount},t.prototype.podsCrossed=function(e){this.podsCrossedOver!=e&&(this.podsCrossedOver=e,this.podLinc.setCrossedOverPods(e),this.podSister.setCrossedOverPods(e))},t.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},t.prototype.moveRunner=function(e,t){"linc"==e?this.podLinc.moveRunner(t):"sister"==e&&this.podSister.moveRunner(t)},t.prototype.activateRope=function(e,t){"linc"==e?this.podLinc.activateRope(t):"sister"==e&&this.podSister.activateRope(t)},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&0!=this.roundStarted&&("up"==t?this.upKeyDown():"down"==t&&this.downKeyDown(),"left"==t?this.leftKeyDown():"right"==t?this.rightKeyDown():"spacebar"==t&&this.spaceKeyDown())},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&0!=this.roundStarted&&("up"==t?this.upKeyUp():"down"==t?this.downKeyUp():"left"==t?this.leftKeyUp():"right"==t?this.rightKeyUp():"spacebar"==t&&this.spaceKeyUp())},t.prototype.spaceKeyDown=function(){1!=this.keyboardFireLocked&&(this.keyboardFireLocked=!0,this.popPugil())},t.prototype.spaceKeyUp=function(){this.keyboardFireLocked=!1},t.prototype.upKeyDown=function(){this.inputManager.startKeyboardMode(),this.podLinc.activateRopeKeyboard("up")},t.prototype.downKeyDown=function(){this.inputManager.startKeyboardMode(),this.podLinc.activateRopeKeyboard("down")},t.prototype.leftKeyDown=function(){this.inputManager.startKeyboardMode(),this.podLinc.activateRunnerKeyboard("left")},t.prototype.leftKeyUp=function(){this.podLinc.deactivateRunnerKeyboard()},t.prototype.rightKeyDown=function(){this.inputManager.startKeyboardMode(),this.podLinc.activateRunnerKeyboard("right")},t.prototype.rightKeyUp=function(){this.podLinc.deactivateRunnerKeyboard()},t.prototype.upKeyUp=function(){this.podLinc.deactivateRopeKeyboard()},t.prototype.downKeyUp=function(){this.podLinc.deactivateRopeKeyboard()},t.prototype.getInputDiffX=function(){return this.podLinc.getInputDiffX()},t.prototype.getInputDiffY=function(){return this.podLinc.getInputDiffY()},t.prototype.newClickUnlock=function(){this.podLinc.newClickUnlock(),this.podSister.newClickUnlock()},t.prototype.getRunnerLockedLeft=function(e){return"linc"==e?this.podLinc.getRunnerLockedLeft():"sister"==e?this.podSister.getRunnerLockedLeft():void 0},t.prototype.getRunnerLockedRight=function(e){return"linc"==e?this.podLinc.getRunnerLockedRight():"sister"==e?this.podSister.getRunnerLockedRight():void 0},t.prototype.getRopeLockedDown=function(e){return"linc"==e?this.podLinc.getRopeLockedDown():"sister"==e?this.podSister.getRopeLockedDown():void 0},t.prototype.getRopeLockedUp=function(e){return"linc"==e?this.podLinc.getRopeLockedUp():"sister"==e?this.podSister.getRopeLockedUp():void 0},t.prototype.opponentOffStageTop=function(){this.opponentManager.opponentOffStageTop()},t.prototype.secondChanceUse=function(){this.gameEnded=!1,this.loseLifeCooldownActive=!0,this.heartTimeline=this.killTween(this.heartTimeline),this.heartTimeline=new TimelineMax({onComplete:this.unlockLincCooldown,onCompleteParams:[this]});for(var e=0;e<this.heartLives.length;e++)this.heartLives[e].active=!0,this.heartTimeline.add([TweenMax.to(this.heartLives[e].icon.scale,.5,{x:1,y:1,ease:Quad.easeIn})],0)},t.prototype.unlockLincCooldown=function(e){e.loseLifeCooldownActive=!1},t.prototype.activatePowerUpEffect=function(){this.powerUpOn=!0,this.podLinc.powerUpActivate(!0)},t.prototype.deactivatePowerUpEffect=function(){this.powerUpOn=!1,this.podLinc.powerUpActivate(!1)},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t),this.game.powerUpManager.pause(),this.backgroundManager.pause(),this.opponentManager.pause(),this.podLinc.pause(),this.podSister.pause();for(var i=0;i<this.tickets.length;i++)this.tickets[i].ticket.pause(),this.pauseResumeTween(this.tickets[i].collectDelay,"pause");Game.pauseSound("tree-top-gladiators/music.mp3"),Game.pauseSound("tree-top-gladiators/background.mp3"),this.pauseResumeTween(this.startFirstRoundDelay,"pause"),this.pauseResumeTween(this.heartTimeline,"pause"),this.pauseResumeTween(this.gameOverDelay,"pause"),this.pauseResumeTween(this.soundTimer,"pause")},t.prototype.resume=function(){e.prototype.resume.call(this),this.setBackgroundColor(16250871),this.backgroundManager.resume(),this.opponentManager.resume(),this.podLinc.resume(),this.podSister.resume();for(var t=0;t<this.tickets.length;t++)this.tickets[t].ticket.resume(),this.pauseResumeTween(this.tickets[t].collectDelay,"resume");Game.resumeSound("tree-top-gladiators/music.mp3"),Game.resumeSound("tree-top-gladiators/background.mp3"),this.pauseResumeTween(this.startFirstRoundDelay,"resume"),this.pauseResumeTween(this.heartTimeline,"resume"),this.pauseResumeTween(this.gameOverDelay,"resume"),this.pauseResumeTween(this.soundTimer,"resume"),this.game.ui.setUI("gameplay-gladiators"),this.game.powerUpManager.resume(),0==this.roundStarted&&this.game.ui.hidePowerUpButton()},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause")},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tutorialOverlay.destroy(),this.startFirstRoundDelay=this.killTween(this.startFirstRoundDelay),this.heartTimeline=this.killTween(this.heartTimeline),this.gameOverDelay=this.killTween(this.gameOverDelay),this.podLinc.destroy(),this.podSister.destroy(),this.backgroundManager.destroy(),this.opponentManager.destroy(),this.physicsManager.destroy();for(t=0;t<this.heartLives.length;t++)Game.displayStore.returnPooledItem(this.heartLives[t].icon);for(t=0;t<this.impactParticles.length;t++)Game.displayStore.returnPooledItem(this.impactParticles[t].sprite);for(var t=0;t<this.tickets.length;t++)this.tickets[t].collectDelay=this.killTween(this.tickets[t].collectDelay),Game.ticketPool.returnTicket(this.tickets[t].ticket);this.soundTimer=this.killTween(this.soundTimer)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),EggscapeGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.score=0,i.id="eggscapeGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),this.endingGame=!1,this.score=0,this.ticker=0,this.ticketCount=0,this.ticketSpawnInterval=600,this.powerupRatio=1,this.tickets=[],3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),Game.coreData.setCurrentRide("egg-scape"),this.tutorialViewed=Game.coreData.getGameTutorialViewed("egg-scape"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub");var i=["kenzie","babe","ggg","hudson"];this.selectedCharacter=Game.coreData.getSelectedCharacter()||i[Game.getRandom(0,3,!0)],this.bg=Game.displayStore.getContainer("egg-scape/bg"),this.mainHolder=Game.displayStore.getContainer("egg-scape/main-holder"),this.scaleHolder=Game.displayStore.getContainer("egg-scape/scale-holder"),this.caveFloor=this.mainHolder.getContainer("egg-scape/cave-floor"),this.caveCeiling=this.mainHolder.getContainer("egg-scape/cave-ceiling"),this.shroomsFloor=this.mainHolder.getSprite("egg-scape/shrooms-floor"),this.shroomsCeiling=this.mainHolder.getSprite("egg-scape/shrooms-ceiling"),this.caveBg=this.mainHolder.getContainer("egg-scape/cave-bg"),this.caveGlow=this.caveBg.getSprite("egg-scape/cave-glow.png"),this.caveGlowFloor=this.caveFloor.getSprite("egg-scape/cave-glow-floor.png"),this.caveGlowCeiling=this.caveCeiling.getSprite("egg-scape/cave-glow-ceiling.png"),this.caveGlow.blendMode=PIXI.BLEND_MODES.ADD,this.caveGlowFloor.blendMode=PIXI.BLEND_MODES.ADD,this.caveGlowCeiling.blendMode=PIXI.BLEND_MODES.ADD,this.caveGlow.alpha=0,this.caveGlowFloor.alpha=0,this.caveGlowCeiling.alpha=0,1==Game.onDesktop&&(this.caveGlowMask=Game.displayStore.getSprite("egg-scape/glow-mask.png"),this.caveGlow.mask=this.caveGlowMask),this.shroomsBlue=[],this.shroomsRed=[],this.shroomsHolderBlue=this.mainHolder.getContainer("egg-scape/shrooms-blue"),this.shroomsHolderRed=this.mainHolder.getContainer("egg-scape/shrooms-red");for(l=0;l<10;l++){var s=this.shroomsHolderBlue.getSprite("egg-scape/shroom-blue-"+(l+1)+".png"),o=this.shroomsHolderRed.getSprite("egg-scape/shroom-red-"+(l+1)+".png");s.position.x=75*l,o.position.x=75*l,o.blendMode=PIXI.BLEND_MODES.ADD,s.blendMode=PIXI.BLEND_MODES.ADD,this.shroomsBlue.push(s),this.shroomsRed.push(o)}this.cloudHolder=Game.displayStore.getContainer("egg-scape/cloud-holder"),this.clouds=[];for(l=0;l<5;l++){var a=Game.displayStore.getSprite("egg-scape/cloud"),r=Game.getRandom(.3,1),n=Game.getRandom(0,1);a.scale.x=n>.5?-1*r:r,a.scale.y=r,a.position.x=Game.getRandom(-100,500),a.position.y=Game.getRandom(0,220),this.cloudHolder.addChild(a),this.clouds.push(a)}this.sky=Game.displayStore.getSprite("egg-scape/sky.png"),this.sky.width=Game.stageWidth,this.scaleHolder.addChild(this.sky),this.scaleHolder.addChild(this.cloudHolder),this.scaleHolder.addChild(this.bg),this.scaleHolder.addChild(this.mainHolder),1==Game.onDesktop&&this.scaleHolder.addChild(this.caveGlowMask),this.scaleHolder.setRegPointPixels(Game.stageWidth/2,Game.stageHeight/2,!0),this.container.addChild(this.scaleHolder),this.physicsManager=new EggscapePhysicsManager(this,this.mainHolder),this.physicsManager.initPhysicsWorld(),this.physicsDebugger=new PhysicsDebugger(this,this.mainHolder,this.physicsManager.world),this.inputManager=new EggscapeInputManager(this),this.player=new EggscapePlayer(this),this.eggManager=new EggscapeEggManager(this);for(l=0;l<5;l++){var h=new EggscapeTicket(this,l);this.tickets.push(h)}this.mainHolder.addChildAt(this.eggManager.container,3),this.mainHolder.addChild(this.player.container),this.scoreBG=Game.displayStore.getSprite("egg-scape/score-bg"),this.scoreBG.position.y=0,this.scoreBG.position.x=-30,this.scoreText=Game.displayStore.getBitmapText("egg-scape/score-font"),this.scoreText.position.x=50,this.scoreText.position.y=10,this.scoreText.scale.x=this.scoreText.scale.y=.75,this.scoreText.text="0",this.heartsHolder=Game.displayStore.getContainer("heart-bg/hearts-holder"),this.container.addChild(this.heartsHolder),this.container.addChild(this.scoreBG),this.container.addChild(this.scoreText),this.fireTimeline=new TimelineMax,this.fireTimeline.add([TweenMax.from(this.mainHolder.position,.6,{ease:Elastic.easeOut,delay:.03,x:-2}),TweenMax.from(this.player.container.position,.6,{ease:Elastic.easeOut,x:-3})]),this.heartIcons=[];for(var l=0;l<3;l++)this.heartIcons.push({heart:Game.displayStore.getSprite("egg-scape/heart-icon"),active:!0}),this.heartIcons[l].heart.position.x=70*l-70,this.heartIcons[l].heart.position.y=0,this.heartIcons[l].heart.alpha=1,this.heartIcons[l].heart.scale.x=0,this.heartIcons[l].heart.scale.y=0,this.heartsHolder.addChild(this.heartIcons[l].heart),TweenMax.to(this.heartIcons[l].heart.scale,1,{ease:Elastic.easeOut,x:1,y:1,delay:1+l/10});this.currentHearts=3,1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("egg-scape",!0),this.gameOverTimeline=new TimelineMax,Game.playSound("egg-scape/cave-ambience.mp3",.4)},t.prototype.startGameplay=function(){this.game.ui.triggerEnjoyTheRide(),1==Game.onDesktop?this.game.ui.setUI("gameplay-eggscape"):this.game.ui.setUI("gameplay-eggscape-touch"),this.game.powerUpManager.startGame(),this.eggManager.start(),this.player.start(),Game.playSound("egg-scape/music.mp3",.8)},t.prototype.collectTicket=function(){this.player.collectTicket()},t.prototype.spawnTicket=function(e){for(var t,i=0;i<this.tickets.length;i++)if(1==this.tickets[i].available){t=this.tickets[i];break}t.spawn(this.mainHolder,e)},t.prototype.lightCave=function(){this.caveGlow.alpha=this.caveGlowFloor.alpha=this.caveGlowCeiling.alpha=-.3+this.powerupRatio,1==Game.onDesktop?(this.caveGlowMask.position.x=0,this.caveGlowMask.position.y=this.player.railCarFront.position.y-300,TweenMax.to([this.caveGlowFloor,this.caveGlowCeiling],.3,{alpha:0,ease:Expo.easeOut}),TweenMax.to(this.caveGlowMask.position,.2,{x:1e3,ease:Linear.easeNone})):TweenMax.to([this.caveGlow,this.caveGlowFloor,this.caveGlowCeiling],.3,{alpha:0,ease:Expo.easeOut})},t.prototype.updateScore=function(e){this.score+=e},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.downOnUI=function(t){1!=this.tutorialOverlay.isOpen&&(e.prototype.downOnUI.call(this,t),"forwards-button"==t.id&&this.inputManager.keyDown("up"),"backwards-button"==t.id&&this.inputManager.keyDown("down"))},t.prototype.upOnUI=function(t){e.prototype.upOnUI.call(this,t),"forwards-button"==t.id&&this.inputManager.keyUp("up"),"backwards-button"==t.id&&this.inputManager.keyUp("down")},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"playbuttonlarge":this.resume();break;case"pause-button":this.pause(!1)}},t.prototype.loseLife=function(){if(1!=this.endingGame){Game.playSound("egg-scape/miss.mp3"),this.player.loseLife(),this.heartTimeline=this.killTween(this.heartTimeline),this.heartTimeline=new TimelineMax;for(var e=this.heartIcons.length-1;e>=0;e--)if(1==this.heartIcons[e].active){this.heartTimeline.add([TweenMax.to(this.heartIcons[e].heart.scale,.3,{ease:Back.easeIn,x:0,y:0}),TweenMax.to(this.heartIcons[e].heart,.4,{ease:Power2.easeIn,alpha:0})]),this.heartTimeline.call(function(e){e.active=!1,this.currentHearts--},[this.heartIcons[e]],this);break}this.heartTimeline.call(function(){0==this.currentHearts&&this.gameOver(this)},null,this,1)}},t.prototype.addLife=function(){this.currentHearts++,this.heartTimeline=this.killTween(this.heartTimeline),this.heartTimeline=new TimelineMax;for(var e=0;e<this.heartIcons.length;e++)if(0==this.heartIcons[e].active){this.heartIcons[e].active=!0,this.heartTimeline.add([TweenMax.to(this.heartIcons[e].heart.scale,1,{ease:Elastic.easeOut,x:1,y:1}),TweenMax.to(this.heartIcons[e].heart,.4,{ease:Power2.easeOut,alpha:1})]);break}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(t){if(e.prototype.tick.call(this,t),1!=this.paused&&1!=this.tutorialOverlay.isOpen&&1!=this.wristbandOverlay.isOpen){++this.ticketCount==this.ticketSpawnInterval&&(this.ticketCount=0,this.ticketSpawnInterval>450&&(this.ticketSpawnInterval-=15),this.spawnTicket(new PIXI.Point(Game.stageWidth+100,Game.getRandom(200,400)))),this.inputManager.tick(),this.player.tick(),this.eggManager.tick();for(o=0;o<this.tickets.length;o++)this.tickets[o].tick();this.physicsManager.stepPhysics(),this.score>Number(this.scoreText.text)&&this.ticker%3==0&&(Game.playSound("egg-scape/tick-up.mp3",.6),this.scoreText.text=String(Number(this.scoreText.text)+1)),this.caveCeiling.position.y=-this.player.railCarFront.position.y/20,this.caveFloor.position.y=550-this.player.railCarFront.position.y/20,this.shroomsHolderRed.position.y=30-this.player.railCarFront.position.y/25,this.shroomsHolderBlue.position.y=575-this.player.railCarFront.position.y/25,this.shroomsFloor.position.y=490-this.player.railCarFront.position.y/30,this.shroomsCeiling.position.y=6-this.player.railCarFront.position.y/30,this.caveBg.position.y=-this.player.railCarFront.position.y/45,this.bg.getSpriteAt(1).position.y=226-this.player.railCarFront.position.y/100,this.bg.getSpriteAt(2).position.y=162-this.player.railCarFront.position.y/80,this.bg.getSpriteAt(3).position.y=274-this.player.railCarFront.position.y/70,this.bg.getSpriteAt(4).position.y=433-this.player.railCarFront.position.y/60;for(o=0;o<10;o++){var i=this.shroomsBlue[o],s=this.shroomsRed[o];i.y+=.1*Math.sin((this.ticker+30*o)/15),s.y-=.1*Math.sin((this.ticker+30*o)/15)}for(var o=0;o<this.clouds.length;o++){var a=this.clouds[o];a.position.x<600?a.position.x+=a.scale.y/2:a.position.x=-100}this.ticker++}},t.prototype.fireShroom=function(e,t){var i,s,o=[];i=1==t?this.shroomsRed:this.shroomsBlue;for(var a=0;a<i.length;a++){var r=i[a],n=Math.abs(e-this.eggManager.container.toLocal(new PIXI.Point,r).x);o.push({shroom:r,distance:n})}o.sort(function(e,t){return e.distance-t.distance}),o[0].distance<50&&(s=o[0].shroom,TweenMax.to(s.scale,.2,{y:.8,ease:Power2.easeOut}),TweenMax.to(s.scale,.5,{y:1.5,ease:Elastic.easeOut,delay:.3}),TweenMax.to(s.scale,.3,{y:1,ease:Power2.easeOut,delay:.8}))},t.prototype.fireGun=function(){this.fireTimeline.restart()},t.prototype.getHearts=function(){return this.currentHearts},t.prototype.gameOver=function(e){this.endingGame=!0,e.wristbandOverlay.endGame(e.score)},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&this.inputManager.keyDown(t)},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&this.inputManager.keyUp(t)},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause")},t.prototype.activatePowerUpEffect=function(){this.player.activatePowerup(),this.powerupRatio=1.5},t.prototype.deactivatePowerUpEffect=function(){this.player.deactivatePowerup(),this.powerupRatio=1},t.prototype.secondChanceUse=function(){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t),this.game.powerUpManager.pause(),this.player.pause(),Game.pauseSound("egg-scape/cave-ambience.mp3"),Game.pauseSound("egg-scape/music.mp3")},t.prototype.resume=function(){e.prototype.resume.call(this),this.setBackgroundColor(15724527),this.game.ui.setUI("gameplay-blank"),1==Game.onDesktop?this.game.ui.setUI("gameplay-eggscape"):this.game.ui.setUI("gameplay-eggscape-touch"),this.game.powerUpManager.resume(),this.player.resume(),Game.resumeSound("egg-scape/cave-ambience.mp3"),Game.resumeSound("egg-scape/music.mp3")},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(t=0;t<this.heartIcons.length;t++)Game.displayStore.returnPooledItem(this.heartIcons[t].heart);for(t=0;t<this.clouds.length;t++)Game.displayStore.returnPooledItem(this.clouds[t]);this.tutorialOverlay.destroy(),this.physicsManager.destroy(),this.player.destroy(),this.eggManager.destroy(),this.heartTimeline=this.killTween(this.heartTimeline),this.fireTimeline=this.killTween(this.fireTimeline),this.gameOverTimeline=this.killTween(this.gameOverTimeline);for(var t=0;t<this.tickets.length;t++)this.tickets[t].destroy();Game.stopSound("egg-scape/cave-ambience.mp3"),Game.stopSound("egg-scape/music.mp3")},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),StrikerGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.cameraMotionEaseAmount=12,i.id="strikerGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){if(e.prototype.init.call(this),this.ticker=0,this.score=0,Game.playSound("striker/ambience.mp3",.7),this.mainHolderPos=new PIXI.Point(Game.stageWidth/2,Game.stageHeight/2-150),this.tutorialOverlay=new TutorialOverlay(this),this.wristbandOverlay=new WristbandOverlay(this),this.endingGame=!1,this.enableViewportPositioning=!1,3!=this.game.gameLaunchMode&&this.wristbandOverlay.build(),Game.coreData.setCurrentRide("striker"),this.tutorialViewed=Game.coreData.getGameTutorialViewed("striker"),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("shop"),Game.assetChunkManager.flushAssets("hub"),this.mainHolder=Game.displayStore.getContainer("striker/main-holder"),this.scaleHolder=Game.displayStore.getContainer("striker/scale-holder"),this.cloudHolder=Game.displayStore.getContainer("striker/cloud-holder"),this.clouds=[],0==Game.isLowEndIPad)for(a=0;a<5;a++){var i=Game.displayStore.getSprite("striker/cloud"),s=Game.getRandom(.2,1),o=Game.getRandom(0,1);i.scale.x=o>.5?-1*s:s,i.scale.y=s,i.position.x=Game.getRandom(-100,1200),i.position.y=Game.getRandom(-50,320),this.cloudHolder.addChild(i),i.tint=15122387,this.clouds.push(i)}this.sky=Game.displayStore.getSprite("striker/sky.png"),this.sky.width=Game.stageWidth,this.sky.height=Game.stageHeight,this.scaleHolder.addChild(this.sky),this.physicsManager=new StrikerPhysicsManager(this,this.mainHolder),this.physicsManager.initPhysicsWorld(),this.physicsDebugger=new PhysicsDebugger(this,this.mainHolder,this.physicsManager.world),this.inputManager=new StrikerInputManager(this),this.tower=new StrikerTower(this),this.seedManager=new StrikerSeedManager(this),this.drone=new StrikerDrone(this),this.timer=new StrikerTimer(this),this.playerLayer=Game.displayStore.getContainer("striker/player-layer"),this.player=this.playerLayer.getContainer("striker/player"),this.playerArmsFront=this.player.getSprite("striker/henry-arms.png"),this.playerArmsBack=this.player.getSprite("striker/henry-arms-back.png"),this.playerHeadFront=this.player.getContainer("striker/henry-head-front"),this.playerHeadBack=this.player.getContainer("striker/henry-head-back"),this.eyes=this.playerHeadFront.getSprite("striker/henry-eyes.png"),this.playerMouth=this.playerHeadFront.getContainer("striker/henry-mouth"),this.eyelidsClosed=this.playerHeadFront.getSprite("striker/henry-lids-closed.png"),this.eyelidsClosed.scale.y=0,this.eyelidsHalfClosed=this.playerHeadFront.getSprite("striker/henry-lids-half-closed.png"),this.playerArmsFront.setRegPoint(.2,.1,!0),this.playerArmsBack.setRegPoint(.5,.1,!0),this.playerHeadBack.setRegPointPixels(45,54,!0),this.playerHeadFront.setRegPointPixels(45,54,!0),this.playerMouth.showOnlyChild(0),this.eyesTimeline=new TimelineMax({repeat:-1}),this.eyesTimeline.add(TweenMax.to(this.eyelidsClosed.scale,.07,{y:1,ease:Power3.easeOut,yoyo:!0,repeat:1}),4),this.eyesTimeline.add(TweenMax.to(this.eyelidsClosed.scale,.07,{y:1,ease:Power3.easeOut,yoyo:!0,repeat:1}),5),this.eyesTimeline.add(TweenMax.to(this.eyelidsClosed.scale,.07,{y:1,ease:Power3.easeOut,yoyo:!0,repeat:1}),8),this.eyesTimeline.add(TweenMax.to(this.eyelidsClosed.scale,.07,{y:1,ease:Power3.easeOut,yoyo:!0,repeat:1}),8.5),this.cameraFollowObject=this.drone.container,this.mainHolder.addChild(this.drone.container),this.mainHolder.addChild(this.seedManager.container),this.scoreBG=Game.displayStore.getSprite("striker/score-bg"),this.scoreBG.position.y=0,this.scoreBG.position.x=-30,this.scoreText=Game.displayStore.getBitmapText("striker/score-font"),this.scoreText.position.x=50,this.scoreText.position.y=10,this.scoreText.scale.x=this.scoreText.scale.y=.75,this.scoreText.text="0",0==Game.isLowEndIPad&&(this.bg0=Game.displayStore.getContainer("striker/bg-layer-0"),this.bg0.setRegPointPixels(.5*Game.stageWidth,.5*Game.stageHeight,!0),this.bg2=Game.displayStore.getContainer("striker/bg-layer-2"),this.bg2.setRegPointPixels(.5*Game.stageWidth,.5*Game.stageHeight,!0),this.bg4=Game.displayStore.getContainer("striker/bg-layer-4"),this.bg4.setRegPointPixels(.5*Game.stageWidth,.5*Game.stageHeight,!0)),this.bg1=Game.displayStore.getContainer("striker/bg-layer-1"),this.bg1.setRegPointPixels(.5*Game.stageWidth,.5*Game.stageHeight,!0),this.bg3=Game.displayStore.getContainer("striker/bg-layer-3"),this.bg3.setRegPointPixels(.5*Game.stageWidth,.5*Game.stageHeight,!0),this.playerLayer.setRegPointPixels(.5*Game.stageWidth,.5*Game.stageHeight,!0),this.towerLayer=Game.displayStore.getContainer("striker/tower-layer"),this.towerLayer.addChild(this.tower.container),this.towerLayer.setRegPointPixels(.5*Game.stageWidth,.5*Game.stageHeight,!0),this.playerLayer.scale.x=this.playerLayer.scale.y=5,this.towerLayer.scale.x=this.towerLayer.scale.y=4,this.bg1.scale.x=this.bg1.scale.y=3,this.bg3.scale.x=this.bg3.scale.y=1.7,0==Game.isLowEndIPad&&(this.bg0.scale.x=this.bg0.scale.y=4,this.bg2.scale.x=this.bg2.scale.y=2,this.bg3.scale.x=this.bg3.scale.y=1.5,this.bg4.scale.x=this.bg4.scale.y=1.2),this.seedManager.pipesHolder.addChild(this.tower.containerFront),this.mainHolder.addChild(this.drone.bomb),this.mainHolder.addChild(this.drone.basketFront),this.mainHolder.addChild(this.drone.container),this.mainHolder.addChild(this.seedManager.pipesHolder),0==Game.isLowEndIPad&&(this.bg4.addChildAt(this.cloudHolder,0),this.scaleHolder.addChild(this.bg4)),this.scaleHolder.addChild(this.bg3),0==Game.isLowEndIPad&&this.scaleHolder.addChild(this.bg2),this.scaleHolder.addChild(this.bg1),0==Game.isLowEndIPad&&this.scaleHolder.addChild(this.bg0),this.scaleHolder.addChild(this.playerLayer),this.scaleHolder.addChild(this.towerLayer),this.scaleHolder.addChild(this.mainHolder),this.container.addChild(this.scaleHolder),this.container.addChild(this.timer.container),this.container.addChild(this.scoreBG),this.container.addChild(this.scoreText),this.tickets=[];for(var a=0;a<2;a++){var r=new StrikerTicket(this,a);this.tickets.push(r)}this.introTimeline=new TimelineMax,0==Game.isLowEndIPad?this.introTimeline.add([TweenMax.to(this.seedManager.pipesHolder.scale,1,{x:1,y:1,ease:Power3.easeInOut}),TweenMax.to(this.bg0.scale,1,{x:1,y:1,ease:Power3.easeInOut}),TweenMax.to(this.bg1.scale,1,{x:1,y:1,ease:Power3.easeInOut}),TweenMax.to(this.bg2.scale,1,{x:1,y:1,ease:Power3.easeInOut}),TweenMax.to(this.bg3.scale,1,{x:1,y:1,ease:Power3.easeInOut}),TweenMax.to(this.bg4.scale,1,{x:1,y:1,ease:Power3.easeInOut}),TweenMax.to(this.playerLayer.scale,1,{x:1,y:1,ease:Power3.easeInOut}),TweenMax.to(this.towerLayer.scale,1,{x:1,y:1,ease:Power3.easeInOut})]):this.introTimeline.add([TweenMax.to(this.seedManager.pipesHolder.scale,1,{x:1,y:1,ease:Power3.easeInOut}),TweenMax.to(this.bg1.scale,1,{x:1,y:1,ease:Power3.easeInOut}),TweenMax.to(this.bg3.scale,1,{x:1,y:1,ease:Power3.easeInOut}),TweenMax.to(this.playerLayer.scale,1,{x:1,y:1,ease:Power3.easeInOut}),TweenMax.to(this.towerLayer.scale,1,{x:1,y:1,ease:Power3.easeInOut})]),this.introTimeline.call(this.drone.updateFlyState,["takeoff"],this.drone),this.introTimeline.call(function(){this.tower.start(),this.drone.spawn([280,450])},null,this,"+=0.3"),this.introTimeline.call(function(){this.mainHolder.addChildAt(this.tower.containerFront,0),this.enableViewportPositioning=!0},null,this,1.5),this.introTimeline.call(Game.playSound,["striker/swoosh-big.mp3"],this,.5),this.introTimeline.timeScale(.5),this.introTimeline.pause(),1==this.tutorialViewed?this.startGameplay():this.tutorialOverlay.buildTutorial("striker",!0)},t.prototype.startGameplay=function(){this.game.ui.triggerEnjoyTheRide(),Game.playSound("striker/music-intro.mp3",.5),this.musicDelay=TweenMax.delayedCall(14.1,function(){this.musicDelay=this.killTween(this.musicDelay),Game.playSound("striker/music-loop.wav",.5)},null,this),1==Game.onDesktop?this.game.ui.setUI("gameplay-striker"):this.game.ui.setUI("gameplay-striker-touch"),this.game.powerUpManager.startGame(),this.seedManager.start(),this.introTimeline.play(),this.timer.start()},t.prototype.tutorialOverlayClosed=function(){this.startGameplay()},t.prototype.downOnUI=function(t){1!=this.tutorialOverlay.isOpen&&(e.prototype.downOnUI.call(this,t),"forwards-button"==t.id&&this.inputManager.keyDown("up"),"backwards-button"==t.id&&this.inputManager.keyDown("down"),"move-left-button"==t.id&&this.inputManager.keyDown("left"),"move-right-button"==t.id&&this.inputManager.keyDown("right"),"river-rangers-fire-button"==t.id&&this.drone.dropBomb())},t.prototype.upOnUI=function(t){e.prototype.upOnUI.call(this,t),"forwards-button"==t.id&&this.inputManager.keyUp("up"),"backwards-button"==t.id&&this.inputManager.keyUp("down"),"move-left-button"==t.id&&this.inputManager.keyUp("left"),"move-right-button"==t.id&&this.inputManager.keyUp("right")},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),this.tutorialOverlay.uiClicked(t),this.wristbandOverlay.uiClicked(t),t.id){case"playbuttonlarge":this.resume();break;case"pause-button":this.pause(!1)}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.shakeScreen=function(e){this.eyelidsHalfClosed.alpha=0,TweenMax.delayedCall(1,function(){this.eyelidsHalfClosed.alpha=1},null,this);var t=e/40;t>30&&(t=30);var i=new RoughEase({strength:4,points:Math.round(t/5),randomize:!1,clamp:!0});TweenMax.from(this.scaleHolder.position,.2,{y:t,ease:i})},t.prototype.tick=function(t){if(e.prototype.tick.call(this,t),1!=this.paused&&1!=this.tutorialOverlay.isOpen&&1!=this.wristbandOverlay.isOpen){this.ticker%5==0&&this.inputManager.tick(),this.physicsManager.stepPhysics(),this.drone.tick(),this.seedManager.tick(),this.tower.tick(),1==this.enableViewportPositioning&&this.positionViewport(),this.ticker++,this.score>Number(this.scoreText.text)&&this.ticker%3==0&&(this.scoreText.text=String(Number(this.scoreText.text)+1));for(i=0;i<this.tickets.length;i++)this.tickets[i].tick();for(var i=0;i<this.clouds.length;i++){var s=this.clouds[i];s.position.x<Game.stageWidth+100?s.position.x+=s.scale.y/2:s.position.x=-100}}},t.prototype.positionViewport=function(){var e=new PIXI.Point((-this.cameraFollowObject.position.x-this.mainHolder.position.x+this.mainHolderPos.x)/this.cameraMotionEaseAmount,(-this.cameraFollowObject.position.y-this.mainHolder.position.y+this.mainHolderPos.y)/this.cameraMotionEaseAmount),t=this.mainHolder.position.x+e.x,i=this.mainHolder.position.y+e.y;t>200&&(t=200),t<-200&&(t=-200),i<-10&&(i=-10),this.mainHolder.position.x=.9*t,this.mainHolder.position.y=.9*i,this.towerLayer.position.x=.85*t+.5*Game.stageWidth,this.towerLayer.position.y=.85*i+.5*Game.stageHeight,this.playerLayer.position.x=.75*t+.5*Game.stageWidth,this.playerLayer.position.y=.75*i+.5*Game.stageHeight,this.bg0&&(this.bg0.position.x=.7*t+.5*Game.stageWidth,this.bg0.position.y=.7*i+.5*Game.stageHeight),this.bg1.position.x=.5*t+.5*Game.stageWidth,this.bg1.position.y=.5*i+.5*Game.stageHeight,this.bg2&&(this.bg2.position.x=.4*t+.5*Game.stageWidth,this.bg2.position.y=.4*i+.5*Game.stageHeight),this.bg3.position.x=.25*t+.5*Game.stageWidth,this.bg3.position.y=.25*i+.5*Game.stageHeight,this.bg4&&(this.bg4.position.x=.1*t+.5*Game.stageWidth,this.bg4.position.y=.1*i+.5*Game.stageHeight),0==Game.isLowEndIPad&&this.positionCharacter(t,i)},t.prototype.positionCharacter=function(e,t){this.eyes.position.x=36-.02*e+.02*Game.stageWidth,this.eyes.position.y=15-.02*t+.02*Game.stageWidth,this.eyes.position.x<53&&(this.eyes.position.x=53),this.eyes.position.x>56&&(this.eyes.position.x=56),this.eyes.position.y<35&&(this.eyes.position.y=35),this.eyelidsHalfClosed.position.y=this.eyes.position.y-6;var i=-35.6+this.eyes.position.y;this.playerHeadBack.rotation+=(i-this.playerHeadBack.rotation)/10,this.playerHeadFront.rotation=this.playerHeadBack.rotation,this.playerArmsFront.rotation+=(i/2-this.playerArmsFront.rotation)/10,this.playerArmsBack.rotation=this.playerArmsFront.rotation/2},t.prototype.endGame=function(e){this.endingGame=!0,this.gameOverDelay=TweenMax.delayedCall(.5,this.gameOver,[this])},t.prototype.gameOver=function(e){e.wristbandOverlay.endGame(e.score)},t.prototype.playerFace=function(e,t){this.playerMouth.showOnlyChild(e),this.faceResetDelay=this.killTween(this.faceResetDelay),this.faceResetDelay=TweenMax.delayedCall(t,this.playerMouth.showOnlyChild,[0],this.playerMouth)},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&(this.inputManager.keyDown(t),"left"==t?this.leftKeyDown():"right"==t&&this.rightKeyDown())},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&(this.inputManager.keyUp(t),"left"==t?this.leftKeyUp():"right"==t&&this.rightKeyUp())},t.prototype.leftKeyDown=function(){},t.prototype.leftKeyUp=function(){},t.prototype.rightKeyDown=function(){},t.prototype.rightKeyUp=function(){},t.prototype.spawnTicket=function(e){for(var t,i=0;i<this.tickets.length;i++)if(1==this.tickets[i].available){t=this.tickets[i];break}t&&t.spawn(this.mainHolder,e)},t.prototype.restore=function(){e.prototype.restore.call(this),this.game.ui.setUI("pause")},t.prototype.activatePowerUpEffect=function(){console.log("activate powerup"),this.drone.activatePowerup(),this.seedManager.activatePowerup(),Game.stopSound("striker/music-loop.wav"),Game.stopSound("striker/music-intro.mp3"),Game.playSound("striker/hero-music-intro.mp3",.9),TweenMax.delayedCall(.3,Game.playSound,["striker/hero-music-loop.mp3",.9],this),TweenMax.delayedCall(.6,Game.playSound,["striker/henry-feels-good.mp3"],this),this.playerFace(2,5)},t.prototype.deactivatePowerUpEffect=function(){console.log("powerup deactivated"),this.drone.deactivatePowerup(),this.seedManager.deactivatePowerup(),Game.playSound("striker/music-loop.wav"),Game.stopSound("striker/hero-music-loop.mp3")},t.prototype.secondChanceUse=function(){},t.prototype.updateScore=function(e){this.score+=e},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t),this.drone.pause(),this.timer.pause(),this.seedManager.pause(),this.game.powerUpManager.pause(),this.pauseResumeTween(this.eyesTimeline,"pause"),this.pauseResumeTween(this.musicDelay,"pause"),Game.pauseSound("striker/music-intro.mp3"),Game.pauseSound("striker/music-loop.wav"),Game.pauseSound("striker/hero-music-loop.mp3"),Game.pauseSound("striker/ambience.mp3")},t.prototype.resume=function(){e.prototype.resume.call(this),this.setBackgroundColor(15724527),1==Game.onDesktop?this.game.ui.setUI("gameplay-striker"):this.game.ui.setUI("gameplay-striker-touch"),this.drone.resume(),this.timer.resume(),this.seedManager.resume(),this.pauseResumeTween(this.eyesTimeline,"resume"),this.pauseResumeTween(this.musicDelay,"resume"),this.game.powerUpManager.resume(),Game.resumeSound("striker/music-intro.mp3"),Game.resumeSound("striker/music-loop.wav"),Game.resumeSound("striker/hero-music-loop.mp3"),Game.resumeSound("striker/ambience.mp3")},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tutorialOverlay.destroy(),this.seedManager.destroy(),this.drone.destroy(),this.inputManager.destroy(),this.tower.destroy(),this.timer.destroy(),Game.stopSound("striker/music-intro.mp3"),Game.stopSound("striker/music-loop.wav"),Game.stopSound("striker/hero-music-loop.mp3"),Game.stopSound("striker/ambience.mp3"),this.eyesTimeline=this.killTween(this.eyesTimeline),this.introTimeline=this.killTween(this.introTimeline),this.musicDelay=this.killTween(this.musicDelay);for(var t=0;t<this.clouds.length;t++)Game.displayStore.returnPooledItem(this.clouds[t])},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),PhotoBoothCustomiseClothesScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="photoBoothCustomiseClothesScene",i}return __extends(t,e),t.prototype.init=function(t){if(e.prototype.init.call(this),this.setBackgroundColor(3294302),this.game.ui.setUI("customise-clothes"),this.buttonsLocked=!1,this.tshirtsStripIndex=0,this.accessoriesStripIndex=0,this.hatsStripIndex=0,this.currentStripIndex=0,this.currentTabIndex=0,this.mainHolder=Game.displayStore.getContainer("gift-shop/customise-clothes/main-holder"),this.bg1=Game.displayStore.getSprite("gift-shop/bg-half"),this.bg2=Game.displayStore.getSprite("gift-shop/bg-half"),this.bg1.tint=3953519,this.bg2.tint=3953519,this.mainHolder.addChildAt(this.bg1,0),this.mainHolder.addChildAt(this.bg2,0),this.bg1.position.x=Game.stageWidth/2,this.bg2.position.x=Game.stageWidth/2,this.tabsHolder=this.mainHolder.getContainer("gift-shop/customise-clothes/tabs"),this.tshirtTab=this.tabsHolder.getContainer("gift-shop/customise-clothes/tshirt-tab"),this.accessoriesTab=this.tabsHolder.getContainer("gift-shop/customise-clothes/accessories-tab"),this.hatsTab=this.tabsHolder.getContainer("gift-shop/customise-clothes/hat-tab"),this.tshirtTabBG=this.tshirtTab.getSprite("gift-shop/customise-clothes/tab-bg.png"),this.accessoriesTabBG=this.accessoriesTab.getSprite("gift-shop/customise-clothes/tab-bg.png"),this.hatsTabBG=this.hatsTab.getSprite("gift-shop/customise-clothes/tab-bg.png"),this.tshirtsStrip=this.mainHolder.getContainer("gift-shop/tshirts-strip"),this.accessoriesStrip=this.mainHolder.getContainer("gift-shop/accessories-strip"),this.hatsStrip=this.mainHolder.getContainer("gift-shop/hats-strip"),this.avatar=this.mainHolder.getContainer("gift-shop/customise-clothes/avatar"),this.avatar.position.y=490,this.dashedTshirt=this.avatar.getSprite("gift-shop/customise-clothes/dashed-tshirt.png"),this.dashedTshirt.alpha=0,this.avatarFaceHolder=this.mainHolder.getContainer("gift-shop/customise-clothes/face"),this.blankFace=this.avatarFaceHolder.getSprite("gift-shop/customise-clothes/blank-face.png"),this.userSetFaceHolder=this.avatarFaceHolder.getContainer("gift-shop/customise-clothes/user-edit-face-holder"),this.avatarArms=this.avatar.getSprite("gift-shop/customise-clothes/avatar-arms.png"),this.dashedArms=this.avatar.getSprite("gift-shop/customise-clothes/dashed-arms.png"),this.hairHolder=this.avatarFaceHolder.getContainer("gift-shop/customise-clothes/hair-holder"),this.accessoriesHolder=this.avatarFaceHolder.getContainer("gift-shop/customise-clothes/accessories-holder"),this.hatHolder=this.avatarFaceHolder.getContainer("gift-shop/customise-clothes/hat-holder"),Game.coreData.getAvatarAttributes().hairStyle&&(this.hairSprite=Game.displayStore.getContainer("gift-shop/hair/"+Game.coreData.getAvatarAttributes().hairStyle),this.hairSprite.getSpriteAt(0).tint=Game.coreData.getAvatarAttributes().hairColour,this.hairSprite.getSpriteAt(1).tint=Game.coreData.getAvatarAttributes().hairColour,this.hairHolder.addChild(this.hairSprite)),Game.coreData.getAvatarAttributes().skinColour?(this.avatarArms.tint=Game.coreData.getAvatarAttributes().skinColour,this.avatarArms.alpha=1,this.dashedArms.alpha=0):(this.avatarArms.alpha=0,this.dashedArms.alpha=1),Game.coreData.getAvatarAttributes().faceImage){this.blankFace.visible=!1;var i=Game.displayStore.getSprite("user-face-edited");i.setRegPoint(.5,.5),i.scale.x=.5,i.scale.y=.5,this.userSetFaceHolder.addChild(i)}else this.blankFace.visible=!0,this.blankFace.tint=16777215;this.container.addChild(this.mainHolder),this.tabsArray=[this.tshirtTab,this.accessoriesTab,this.hatsTab],this.addListeners(),this.bg1.position.y=650,this.bg2.position.y=650,this.tabsHolder.position.y=700,this.introTimeline=this.killTween(this.introTimeline),this.introTimeline=new TimelineMax,this.introTimeline.add([TweenMax.to(this.tabsHolder.position,1,{y:550,ease:Power4.easeOut}),TweenMax.to(this.avatar.position,1,{y:440,ease:Power4.easeOut}),TweenMax.to(this.bg1.position,1,{y:625,ease:Power4.easeOut}),TweenMax.to(this.bg2.position,1,{y:625,ease:Power4.easeOut})],.2),this.populateTabs(),this.addAlreadyEquippedItemsToAvatar(),this.selectTab(0)},t.prototype.addListeners=function(){for(var e=this,t=0;t<this.tabsArray.length;t++)this.addListenerToTab(e,t)},t.prototype.removeListeners=function(){for(var e=0;e<this.tabsArray.length;e++)this.tabsArray[e].getSpriteAt(0).removeAllListeners()},t.prototype.addListenerToTab=function(e,t){var i=this.tabsArray[t].getSpriteAt(0);i.interactive=!0,i.buttonMode=!0,Game.onDesktop?i.on("mousedown",function(s){e.inputDown(e,t),i.on("mouseup",function(i){e.inputUp(e,t)}),i.on("mouseupoutside",function(i){e.inputOut(e,t)})}):i.on("touchstart",function(s){e.inputDown(e,t),i.on("touchend",function(i){e.inputUp(e,t)}),i.on("touchendoutside",function(i){e.inputOut(e,t)})})},t.prototype.inputDown=function(e,t){t!=this.currentTabIndex&&(this.tabsArray[t].getSpriteAt(0).tint=4348532)},t.prototype.inputUp=function(e,t){t!=this.currentTabIndex&&e.selectTab(t)},t.prototype.inputOut=function(e,t){t!=this.currentTabIndex&&(this.tabsArray[t].getSpriteAt(0).tint=3228766,this.tabsArray[t].getSpriteAt(0).position.y=0)},t.prototype.populateTabs=function(){this.tshirtsArray=this.populateTab("t-shirt"),this.accessoriesArray=this.populateTab("accessory"),this.hatsArray=this.populateTab("hat");this.getEquippedItemIndex(this.tshirtsArray),this.getEquippedItemIndex(this.accessoriesArray),this.getEquippedItemIndex(this.hatsArray);this.activeItemsArray=this.tshirtsArray},t.prototype.getEquippedItemIndex=function(e){for(var t=0,i=0;i<e.length;i++)1==e[i].isEquipped&&(t=i);return t},t.prototype.addAlreadyEquippedItemsToAvatar=function(){for(var e,t,i,s=0;s<this.tshirtsArray.length;s++)1==this.tshirtsArray[s].isEquipped&&((e=this.tshirtsArray[s].sprite).scale.x=e.scale.y=1,e.position.x=this.tshirtsArray[s].offset.x,e.position.y=this.tshirtsArray[s].offset.y,this.avatar.addChild(e));for(s=0;s<this.accessoriesArray.length;s++)1==this.accessoriesArray[s].isEquipped&&((t=this.accessoriesArray[s].sprite).scale.x=t.scale.y=1,t.position.x=this.accessoriesArray[s].offset.x,t.position.y=(this.accessoriesArray[s].offset.y-10)/1.2,this.avatarFaceHolder.getContainer("gift-shop/customise-clothes/accessories-holder").addChild(t));for(s=0;s<this.hatsArray.length;s++)1==this.hatsArray[s].isEquipped&&((i=this.hatsArray[s].sprite).scale.x=i.scale.y=1,i.position.x=this.hatsArray[s].offset.x,i.position.y=(this.hatsArray[s].offset.y-80)/1.3,this.avatarFaceHolder.getContainer("gift-shop/customise-clothes/hat-holder").addChild(i))},t.prototype.populateTab=function(e){var t,i,s=new Array,o=Game.coreData.getAvatarClothing(e);switch(e){case"t-shirt":t=this.tshirtsStrip,i=200;break;case"accessory":t=this.accessoriesStrip,i=200;break;case"hat":t=this.hatsStrip,i=250}for(var a=0;a<o.length;a++){var r=new CustomiseScrollingItem(o[a],i,a,this,t);s.push(r)}return s},t.prototype.selectTab=function(e){var t,i;this.selectTabTimeline=this.killTween(this.selectTabTimeline),this.selectTabTimeline=new TimelineMax,this.writeLocalStripIndex(),this.currentTabIndex=e;for(var s=0;s<this.tabsArray.length;s++)s!=e&&(this.tabsArray[s].getSpriteAt(0).tint=3228766,this.selectTabTimeline.add(TweenMax.to(this.tabsArray[s].getSpriteAt(1).position,.2,{y:0,ease:Power2.easeOut}),0));if(t=this.tabsArray[e].getSpriteAt(0),i=this.tabsArray[e].getSpriteAt(1),t.tint=14243875,this.selectTabTimeline.add(TweenMax.to(i.position,.25,{y:-8,ease:Back.easeOut}),0),this.activeItemsArray&&this.activeItemsArray==this.tshirtsArray&&this.activeItemsArray[this.currentStripIndex]){var o=this.activeItemsArray[this.currentStripIndex];this.avatar.addChild(o.sprite),o.sprite.position.x=o.offset.x/this.avatar.scale.x,o.sprite.position.y=(o.offset.y-138)/this.avatar.scale.x}this.activeItemsArray&&this.activeItemsArray!=this.tshirtsArray&&this.activeItemsArray[this.currentStripIndex]&&((o=this.activeItemsArray[this.currentStripIndex]).sprite.scale.x=o.sprite.scale.y=1,this.activeItemsArray==this.accessoriesArray&&(o.sprite.position.x=o.offset.x/this.avatar.scale.x,o.sprite.position.y=(o.offset.y-10)/this.avatar.scale.x,this.accessoriesHolder.addChild(o.sprite),1==this.activeItemsArray[this.currentStripIndex].topLayer&&0==this.hatsArray[this.hatsStripIndex].topLayer?this.avatarFaceHolder.addChild(this.accessoriesHolder):this.avatarFaceHolder.addChild(this.hatHolder)),this.activeItemsArray==this.hatsArray&&(o.sprite.position.x=o.offset.x/this.avatar.scale.x,o.sprite.position.y=(o.offset.y-80)/this.avatar.scale.x,1==this.activeItemsArray[this.currentStripIndex].topLayer&&this.avatarFaceHolder.addChild(this.hatHolder),this.hatHolder.addChild(o.sprite))),this.avatar.addChild(this.avatarFaceHolder),this.avatarFaceHolder.scale.x=this.avatarFaceHolder.scale.y=1,this.avatarFaceHolder.position.x=0,this.avatarFaceHolder.position.y=-309,0==e&&(this.selectTabTimeline.add(TweenMax.to(this.avatar.position,.5,{y:440,ease:Power3.easeOut}),0),this.selectTabTimeline.add(TweenMax.to(this.avatar.scale,.5,{x:1,y:1,ease:Power3.easeOut}),0),this.selectTabTimeline.add(TweenMax.to(this.bg1.scale,.5,{x:1,y:1,ease:Power3.easeOut}),0),this.selectTabTimeline.add(TweenMax.to(this.bg2.scale,.5,{x:-1,y:1,ease:Power3.easeOut}),0),this.selectTabTimeline.add(TweenMax.to(this.accessoriesStrip,.25,{alpha:0,ease:Power3.easeOut}),0),this.selectTabTimeline.add(TweenMax.to(this.hatsStrip,.25,{alpha:0,ease:Power3.easeOut}),0),this.activeItemsArray=this.tshirtsArray,this.activeStrip=this.tshirtsStrip,this.currentStripIndex=this.tshirtsStripIndex),1==e&&(this.selectTabTimeline.add(TweenMax.to(this.avatar.position,.5,{y:680,ease:Power3.easeOut}),0),this.selectTabTimeline.add(TweenMax.to(this.avatar.scale,.5,{x:1.2,y:1.2,ease:Power3.easeOut}),0),this.selectTabTimeline.add(TweenMax.to(this.bg1.scale,.5,{x:1.4,y:1.4,ease:Power3.easeOut}),0),this.selectTabTimeline.add(TweenMax.to(this.bg2.scale,.5,{x:-1.4,y:1.4,ease:Power3.easeOut}),0),this.selectTabTimeline.add(TweenMax.to(this.tshirtsStrip,.25,{alpha:0,ease:Power3.easeOut}),0),this.selectTabTimeline.add(TweenMax.to(this.hatsStrip,.25,{alpha:0,ease:Power3.easeOut}),0),this.activeItemsArray=this.accessoriesArray,this.activeStrip=this.accessoriesStrip,this.currentStripIndex=this.accessoriesStripIndex),2==e&&(this.selectTabTimeline.add(TweenMax.to(this.avatar.position,.5,{y:785,ease:Power3.easeOut}),0),this.selectTabTimeline.add(TweenMax.to(this.avatar.scale,.5,{x:1.3,y:1.3,ease:Power3.easeOut}),0),this.selectTabTimeline.add(TweenMax.to(this.bg1.scale,.5,{x:1.5,y:1.5,ease:Power3.easeOut}),0),this.selectTabTimeline.add(TweenMax.to(this.bg2.scale,.5,{x:-1.5,y:1.5,ease:Power3.easeOut}),0),this.selectTabTimeline.add(TweenMax.to(this.accessoriesStrip,.25,{alpha:0,ease:Power3.easeOut}),0),this.selectTabTimeline.add(TweenMax.to(this.tshirtsStrip,.25,{alpha:0,ease:Power3.easeOut}),0),this.activeItemsArray=this.hatsArray,this.activeStrip=this.hatsStrip,this.currentStripIndex=this.hatsStripIndex),this.selectTabTimeline.add(TweenMax.to(this.activeStrip,.3,{alpha:1,ease:Power3.easeOut}),0),this.selectTabTimeline.call(function(){this.putAvatarItemsBackOnStrip(e)},null,this),this.currentStripIndex==this.activeItemsArray.length-1?this.game.ui.setUI("customise-clothes-left"):0==this.currentStripIndex?this.game.ui.setUI("customise-clothes-right"):this.game.ui.setUI("customise-clothes"),1==this.activeItemsArray.length&&this.game.ui.setUI("customise-clothes-no-arrows"),this.activeItemsArray.length<2&&this.activeItemsArray==this.tshirtsArray&&this.game.ui.setUI("customise-clothes-no-arrows"),console.log(this.activeItemsArray)},t.prototype.putAvatarItemsBackOnStrip=function(e){for(var t=0;t<this.activeItemsArray.length;t++)this.activeItemsArray[t].sprite.position.x=this.activeItemsArray[t].origPosition.x,this.activeItemsArray[t].sprite.position.y=this.activeItemsArray[t].origPosition.y,this.activeItemsArray[t].container.addChild(this.activeItemsArray[t].sprite);this.mainHolder.addChild(this.avatarFaceHolder),this.mainHolder.addChild(this.accessoriesStrip),this.mainHolder.addChild(this.hatsStrip),this.mainHolder.addChild(this.tabsHolder),0==e&&(this.avatarFaceHolder.position.x=512,this.avatarFaceHolder.position.y=131),1==e&&(this.avatarFaceHolder.position.x=512,this.avatarFaceHolder.position.y=309),2==e&&(this.avatarFaceHolder.position.x=512,this.avatarFaceHolder.position.y=383),this.avatarFaceHolder.scale.x=this.avatar.scale.x,this.avatarFaceHolder.scale.y=this.avatar.scale.y,this.tick()},t.prototype.scrollToItem=function(e,t,i){this.currentStripIndex=t,this.scrollItemsTimeline=this.killTween(this.scrollItemsTimeline),this.scrollItemsTimeline=new TimelineMax;var s;e==this.tshirtsStrip&&(this.tshirtsStripIndex=t,s=this.tshirtsArray),e==this.accessoriesStrip&&(this.accessoriesStripIndex=t,s=this.accessoriesArray),e==this.hatsStrip&&(this.hatsStripIndex=t,s=this.hatsArray),console.log("scrolling to item",e);var o=s[t].spacing;0==this.currentTabIndex&&(this.dashedTshirt.alpha=1),this.game.ui.setUI("customise-clothes"),this.buttonsLocked=!0,1==i?(e.position.x=Game.stageWidth/2-this.currentStripIndex*o,this.buttonsLocked=!1,this.dashedTshirt.alpha=0):(this.scrollItemsTimeline.add(TweenMax.to(e.position,.25,{x:Game.stageWidth/2-this.currentStripIndex*o,ease:Back.easeOut}),0),0==this.currentTabIndex&&this.scrollItemsTimeline.add(TweenMax.to(this.dashedTshirt,.25,{alpha:0,ease:Power3.easeIn}),0),this.scrollItemsTimeline.call(function(){this.buttonsLocked=!1},null,this)),0==this.currentStripIndex?this.game.ui.setUI("customise-clothes-left"):this.currentStripIndex==this.activeItemsArray.length-1?this.game.ui.setUI("customise-clothes-right"):this.game.ui.setUI("customise-clothes"),this.activeItemsArray==this.hatsArray&&(0==this.currentStripIndex?this.showHatHair(!1):this.showHatHair(!0))},t.prototype.scrollLeft=function(){if(1!=this.buttonsLocked){this.game.ui.setUI("customise-clothes-right"),this.scrollItemsTimeline=this.killTween(this.scrollItemsTimeline),this.scrollItemsTimeline=new TimelineMax;var e=this.activeItemsArray[this.currentStripIndex].spacing;this.activeStrip.position.x=Game.stageWidth/2-this.currentStripIndex*e,0==this.currentTabIndex&&(this.dashedTshirt.alpha=1),this.currentStripIndex>0&&(this.game.ui.setUI("customise-clothes"),this.buttonsLocked=!0,this.currentStripIndex--,this.scrollItemsTimeline.add(TweenMax.to(this.activeStrip.position,.25,{x:Game.stageWidth/2-this.currentStripIndex*e,ease:Back.easeOut}),0),0==this.currentTabIndex&&this.scrollItemsTimeline.add(TweenMax.to(this.dashedTshirt,.25,{alpha:0,ease:Power3.easeIn}),0),this.scrollItemsTimeline.call(function(){this.buttonsLocked=!1},null,this),this.currentStripIndex>0?this.game.ui.setUI("customise-clothes"):this.game.ui.setUI("customise-clothes-right")),this.activeItemsArray==this.hatsArray&&(0==this.currentStripIndex?this.showHatHair(!1):this.showHatHair(!0))}},t.prototype.scrollRight=function(){if(1!=this.buttonsLocked){this.scrollItemsTimeline=this.killTween(this.scrollItemsTimeline),this.scrollItemsTimeline=new TimelineMax;var e=this.activeItemsArray[this.currentStripIndex].spacing;this.activeStrip.position.x=Game.stageWidth/2-this.currentStripIndex*e,0==this.currentTabIndex&&(this.dashedTshirt.alpha=1),this.currentStripIndex<this.activeItemsArray.length-1&&(this.buttonsLocked=!0,this.currentStripIndex++,this.scrollItemsTimeline.add(TweenMax.to(this.activeStrip.position,.25,{x:Game.stageWidth/2-this.currentStripIndex*e,ease:Back.easeOut}),0),0==this.currentTabIndex&&this.scrollItemsTimeline.add(TweenMax.to(this.dashedTshirt,.25,{alpha:0,ease:Power3.easeIn}),0),this.scrollItemsTimeline.call(function(){this.buttonsLocked=!1},null,this),this.currentStripIndex<this.activeItemsArray.length-1?this.game.ui.setUI("customise-clothes"):this.game.ui.setUI("customise-clothes-left")),this.activeItemsArray==this.hatsArray&&(0==this.currentStripIndex?this.showHatHair(!1):this.showHatHair(!0))}},t.prototype.writeLocalStripIndex=function(){0==this.currentTabIndex&&(this.tshirtsStripIndex=this.currentStripIndex),1==this.currentTabIndex&&(this.accessoriesStripIndex=this.currentStripIndex),2==this.currentTabIndex&&(this.hatsStripIndex=this.currentStripIndex)},t.prototype.showHatHair=function(e){this.hairSprite&&(1==e?(TweenMax.to(this.hairSprite.getSpriteAt(0),.1,{alpha:1}),TweenMax.to(this.hairSprite.getSpriteAt(1),.1,{alpha:0})):(TweenMax.to(this.hairSprite.getSpriteAt(0),.1,{alpha:0}),TweenMax.to(this.hairSprite.getSpriteAt(1),.1,{alpha:1})))},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),t.id){case"playbuttonlarge":this.game.setScene("hubScene",!1);break;case"back-button":this.writeLocalStripIndex();var i=[];this.tshirtsArray[this.tshirtsStripIndex]&&i.push(this.tshirtsArray[this.tshirtsStripIndex].id),this.accessoriesArray[this.accessoriesStripIndex]&&"accessory-blank"!=this.accessoriesArray[this.accessoriesStripIndex].id&&i.push(this.accessoriesArray[this.accessoriesStripIndex].id),this.hatsArray[this.hatsStripIndex]&&"hat-blank"!=this.hatsArray[this.hatsStripIndex].id&&i.push(this.hatsArray[this.hatsStripIndex].id),Game.coreData.setAvatarClothing(i),this.game.setScene("photoBoothMainScene",!0);break;case"left-arrow-button":this.scrollLeft();break;case"right-arrow-button":this.scrollRight()}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){if(this.activeItemsArray)for(var e=0;e<this.activeItemsArray.length;e++)this.activeItemsArray[e].tick()},t.prototype.keyDown=function(e){},t.prototype.keyUp=function(e){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(t=0;t<this.tshirtsArray.length;t++)this.tshirtsArray[t].destroy();for(t=0;t<this.accessoriesArray.length;t++)this.accessoriesArray[t].destroy();for(var t=0;t<this.hatsArray.length;t++)this.hatsArray[t].destroy();this.removeListeners(),this.hairSprite&&(this.hairHolder.removeChild(this.hairSprite),Game.displayStore.returnPooledItem(this.hairSprite)),Game.displayStore.returnPooledItem(this.bg1),Game.displayStore.returnPooledItem(this.bg2)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),PhotoBoothCustomiseAvatarScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="photoBoothCustomiseAvatarScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.setBackgroundColor(3294302),this.game.ui.setUI("customise-avatar"),this.skinColours=[16767416,16764308,14198631,16769951,16756064,10908504,9328975,5977649,3811368],this.hairColours=[2299414,4663583,7683618,14859865,15060892,15577974,14445628,10171930,7151391],this.hairStyles=["male-1","male-2","male-3","male-4","male-5","male-6","female-1","female-2","female-3","female-4","female-5","female-6"],this.hasSetSkinColour=!1,this.hasSetHairColour=!1,this.mainHolder=Game.displayStore.getContainer("gift-shop/customise-avatar/main-holder"),this.bg1=Game.displayStore.getSprite("gift-shop/bg-half"),this.bg2=Game.displayStore.getSprite("gift-shop/bg-half"),this.mainHolder.addChildAt(this.bg1,0),this.mainHolder.addChildAt(this.bg2,0),this.bg1.position.x=Game.stageWidth/2,this.bg2.position.x=Game.stageWidth/2,this.bg1.tint=3953519,this.bg2.tint=3953519,this.avatar=this.mainHolder.getContainer("gift-shop/customise-avatar/avatar"),this.userEditedFaceHolder=this.avatar.getContainer("gift-shop/customise-avatar/user-edit-face-holder"),this.blankFace=this.avatar.getSprite("gift-shop/customise-avatar/blank-face.png"),this.dashedArms=this.avatar.getSprite("gift-shop/customise-avatar/dashed-arms.png"),this.dashedArms.alpha=1,this.arms=this.avatar.getSprite("gift-shop/customise-avatar/avatar-arms.png"),this.arms.alpha=0,this.tshirtHolder=this.avatar.getContainer("gift-shop/customise-avatar/tshirt-holder"),this.accessoryHolder=this.avatar.getContainer("gift-shop/customise-avatar/accessory-holder"),this.hatHolder=this.avatar.getContainer("gift-shop/customise-avatar/hat-holder"),this.container.addChild(this.mainHolder),this.hairStyleText=Game.displayStore.getBitmapText("gift-shop/hair-style-text"),Game.stringsManager.setTextString(this.hairStyleText,"hair-style"),this.hairStyleText.position.x=590+Game.stringsManager.getTextOffset("hair-style").xOffset,this.hairStyleText.position.y=-50+Game.stringsManager.getTextOffset("hair-style").yOffset,this.hairStyleText.tint=14244132,this.container.addChild(this.hairStyleText),this.hairStyleText.alpha=0,this.mainHolder.addChild(this.hairStyleText),this.setClothes(),this.skinColourPallette=new CustomisePallette("skin",this,this.skinColours,"skin colour"),this.hairColourPallette=new CustomisePallette("hair",this,this.hairColours,"hair colour"),this.skinColourPallette.container.scale.x=this.skinColourPallette.container.scale.y=.95,this.hairColourPallette.container.scale.x=this.hairColourPallette.container.scale.y=.95,this.hairHolder=this.avatar.getContainer("gift-shop/customise-avatar/hair-holder"),this.buildHairStrip(),this.avatar.position.x=700,this.avatar.position.y=760,this.avatar.scale.x=1.3,this.avatar.scale.y=1.3,this.bg1.scale.x=1.05,this.bg1.scale.y=1.05,this.bg2.scale.x=-1.05,this.bg2.scale.y=1.05,Game.coreData.getAvatarAttributes().skinColour&&this.setSkinColour(),16777215!=Game.coreData.getAvatarAttributes().hairColour&&this.setHairColour(),Game.coreData.getAvatarAttributes().hairStyle&&this.setHairStyle(),Game.coreData.getAvatarAttributes().faceImage&&this.setUserEditedFace(),this.skinColourStep(!0)},t.prototype.setClothes=function(){var e=Game.coreData.getEquippedAvatarClothing("t-shirt")[0],t=Game.coreData.getEquippedAvatarClothing("hat")[0],i=Game.coreData.getEquippedAvatarClothing("accessory")[0];e&&(this.tshirtHolder.getChildAt(0).alpha=0,this.tshirtSprite=Game.displayStore.getSprite("gift-shop/clothes/"+e.id),this.tshirtHolder.addChild(this.tshirtSprite)),i&&(this.accessorySprite=Game.displayStore.getSprite("gift-shop/clothes/"+i.id),this.accessoryHolder.addChild(this.accessorySprite),this.accessoryHolder.alpha=1,this.accessoryHolder.scale=new PIXI.Point(1,1),1==i.topLayer?this.avatar.addChild(this.accessoryHolder):this.avatar.addChild(this.hatHolder)),t&&(this.hatSprite=Game.displayStore.getSprite("gift-shop/clothes/"+t.id),this.hatHolder.addChild(this.hatSprite),this.hatHolder.alpha=1,this.hatHolder.position.y=-370)},t.prototype.setSkinColour=function(){Game.coreData.getAvatarAttributes().skinColour&&(0==this.hasSetSkinColour&&this.game.ui.setUI("customise-avatar-accept"),this.blankFace.tint=Game.coreData.getAvatarAttributes().skinColour,this.arms.tint=Game.coreData.getAvatarAttributes().skinColour,this.dashedArms.alpha=0,this.arms.alpha=1,this.skinColourPallette.setColour(Game.coreData.getAvatarAttributes().skinColour),this.hasSetSkinColour=!0)},t.prototype.setHairColour=function(){16777215!=Game.coreData.getAvatarAttributes().hairColour&&this.game.ui.setUI("customise-avatar-arrows-accept"),this.hairColourPallette.setColour(Game.coreData.getAvatarAttributes().hairColour);for(var e=0;e<this.hairSprites.length;e++){var t=this.hairSprites[e],i=t.getSpriteAt(1),s=t.getSpriteAt(0);i.tint=Game.coreData.getAvatarAttributes().hairColour,s.tint=Game.coreData.getAvatarAttributes().hairColour}this.hasSetHairColour=!0},t.prototype.setHairStyle=function(){console.log("setting hair style",Game.coreData.getAvatarAttributes().hairStyle),Game.coreData.getAvatarAttributes().hairStyle||this.setHairColour();for(var e=0;e<this.hairStyles.length;e++){var t=this.hairSprites[e];this.hairStyles[e]==Game.coreData.getAvatarAttributes().hairStyle?(this.chosenHairStyle=this.hairStyles[e],this.chosenHair=t,this.currentHairStyleIndex=e):TweenMax.to(t,.2,{alpha:0,ease:Expo.easeOut})}if(this.hasSetHairStyle=!0,"skin"==this.currentStep)null!=this.chosenHairStyle&&TweenMax.to(this.chosenHair,.2,{alpha:1,ease:Expo.easeOut});else{if(null==this.chosenHairStyle){this.chosenHair=this.hairSprites[0],this.chosenHairStyle=this.hairStyles[0],this.currentHairStyleIndex=0}TweenMax.to(this.chosenHair,.2,{alpha:1,ease:Expo.easeOut}),Game.coreData.setAvatarAttributes({hairStyle:this.chosenHairStyle})}this.hairStyleText.text=Game.stringsManager.getStringTextContent("hair-style")+" "+(this.currentHairStyleIndex+1)+"/"+this.hairStyles.length,this.hairStyleText.position.x=710-this.hairStyleText.width/2},t.prototype.setUserEditedFace=function(){this.blankFace.visible=!1;var e=Game.displayStore.getSprite("user-face-edited");e.setRegPoint(.5,.5),e.scale.x=.5,e.scale.y=.5,this.userEditedFaceHolder.addChild(e)},t.prototype.changeHairStyle=function(e){e>0?this.currentHairStyleIndex==this.hairStyles.length-1?this.currentHairStyleIndex=0:this.currentHairStyleIndex++:e<0&&(0==this.currentHairStyleIndex?this.currentHairStyleIndex=this.hairStyles.length-1:this.currentHairStyleIndex--),Game.coreData.setAvatarAttributes({hairStyle:this.hairStyles[this.currentHairStyleIndex]}),this.setHairStyle()},t.prototype.showHatHair=function(e){this.chosenHair&&(1==e?(TweenMax.to(this.chosenHair.getSpriteAt(0),.1,{alpha:1}),TweenMax.to(this.chosenHair.getSpriteAt(1),.1,{alpha:0})):(TweenMax.to(this.chosenHair.getSpriteAt(0),.1,{alpha:0}),TweenMax.to(this.chosenHair.getSpriteAt(1),.1,{alpha:1})))},t.prototype.buildHairStrip=function(){this.hairSprites=[];for(var e=0;e<this.hairStyles.length;e++){var t=Game.displayStore.getContainer("gift-shop/hair/"+this.hairStyles[e]);t.alpha=0,t.getSpriteAt(0).alpha=0,this.hairSprites.push(t),this.hairHolder.addChild(t)}},t.prototype.skinColourStep=function(e){if(this.mainHolder.addChild(this.skinColourPallette.container),0==this.hasSetSkinColour?this.game.ui.setUI("customise-avatar"):this.game.ui.setUI("customise-avatar-accept"),0==this.hasSetHairColour){this.chosenHairStyle=null,this.chosenHair=null,this.currentHairStyleIndex=null,Game.coreData.setAvatarAttributes({hairStyle:null});for(var t=0;t<this.hairStyles.length;t++){var i=this.hairSprites[t];TweenMax.to(i,.2,{alpha:0,ease:Expo.easeOut})}}this.currentStep="skin",this.skinColourPallette.container.position.x=-370,this.introAnimation=this.killTween(this.introAnimation),this.introAnimation=new TimelineMax,1==e?(this.introAnimation.add(TweenMax.to(this.avatar.scale,1,{x:1,y:1,ease:Expo.easeInOut}),0),this.introAnimation.add(TweenMax.to(this.avatar.position,1,{x:670,y:570,ease:Expo.easeInOut}),0),this.introAnimation.add(TweenMax.to(this.bg1.scale,1,{x:1,y:1,ease:Expo.easeInOut}),0),this.introAnimation.add(TweenMax.to(this.bg2.scale,1,{x:-1,y:1,ease:Expo.easeInOut}),0),this.introAnimation.add(TweenMax.to(this.skinColourPallette.container.position,.4,{x:35,ease:Back.easeOut}),.4)):(this.introAnimation.add(TweenMax.to(this.avatar.scale,.4,{x:1,y:1,ease:Expo.easeOut}),0),this.introAnimation.add(TweenMax.to(this.avatar.position,.4,{x:670,y:570,ease:Expo.easeOut}),0),this.introAnimation.add(TweenMax.to(this.bg1.scale,.4,{x:1,y:1,ease:Expo.easeOut}),0),this.introAnimation.add(TweenMax.to(this.bg2.scale,.4,{x:-1,y:1,ease:Expo.easeOut}),0),this.introAnimation.add(TweenMax.to(this.skinColourPallette.container.position,.4,{x:35,ease:Back.easeOut}),0),this.introAnimation.add(TweenMax.to(this.hairColourPallette.container.position,.2,{x:-370,ease:Expo.easeOut}),0),this.introAnimation.add(TweenMax.to(this.hairStyleText.position,.2,{y:-50,ease:Expo.easeOut}),0),this.introAnimation.add(TweenMax.to(this.hairStyleText,.2,{alpha:0,ease:Expo.easeOut}),0),this.introAnimation.add(TweenMax.to(this.hatHolder.position,.5,{y:-370,ease:Expo.easeOut}),0),this.introAnimation.add(TweenMax.to(this.hatHolder,.5,{alpha:1,ease:Expo.easeOut}),0)),this.hatSprite&&this.showHatHair(!0)},t.prototype.hairColourStep=function(){16777215!=Game.coreData.getAvatarAttributes().hairColour?this.game.ui.setUI("customise-avatar-arrows-accept"):this.game.ui.setUI("customise-avatar-arrows"),this.mainHolder.removeChild(this.skinColourPallette.container),this.mainHolder.addChild(this.hairColourPallette.container),this.currentStep="hair",this.introAnimation=this.killTween(this.introAnimation),this.introAnimation=new TimelineMax,this.introAnimation.add(TweenMax.to(this.avatar.scale,.4,{x:1.2,y:1.2,ease:Expo.easeOut}),0),this.introAnimation.add(TweenMax.to(this.avatar.position,.4,{x:710,y:730,ease:Expo.easeOut}),0),this.introAnimation.add(TweenMax.to(this.bg1.scale,.4,{x:1.2,y:1.2,ease:Expo.easeOut}),0),this.introAnimation.add(TweenMax.to(this.bg2.scale,.4,{x:-1.2,y:1.2,ease:Expo.easeOut}),0),this.introAnimation.add(TweenMax.to(this.hairColourPallette.container.position,.4,{x:35,ease:Back.easeOut}),0),this.introAnimation.add(TweenMax.to(this.hairStyleText.position,.4,{y:130,ease:Expo.easeOut}),0),this.introAnimation.add(TweenMax.to(this.hairStyleText,.4,{alpha:1,ease:Expo.easeOut}),0),this.introAnimation.add(TweenMax.to(this.hatHolder.position,.4,{y:-500,ease:Expo.easeOut}),0),this.introAnimation.add(TweenMax.to(this.hatHolder,.4,{alpha:0,ease:Expo.easeOut}),0),this.setHairStyle(),this.showHatHair(!1)},t.prototype.progressSection=function(){"skin"==this.currentStep?this.hairColourStep():"hair"==this.currentStep&&(this.introAnimation=this.killTween(this.introAnimation),this.introAnimation=new TimelineMax,this.hatSprite&&(this.introAnimation.add(TweenMax.to(this.hatHolder.position,.5,{y:-370,ease:Bounce.easeOut}),0),this.introAnimation.add(TweenMax.to(this.hatHolder,.5,{alpha:1,ease:Expo.easeOut}),0),this.introAnimation.call(function(){this.showHatHair(!0)},null,this,.1)),this.introAnimation.call(function(){this.game.setScene("photoBoothMainScene",!0)},null,this))},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),t.id){case"playbuttonlarge":this.game.setScene("hubScene",!1);break;case"back-button":"skin"==this.currentStep&&(Game.coreData.clearUserFaceSprite(),this.game.setScene("photoBoothUploadFaceScene",!0)),"hair"==this.currentStep&&this.skinColourStep(!1);break;case"accept-button":this.progressSection();break;case"left-arrow-button":this.changeHairStyle(-1);break;case"right-arrow-button":this.changeHairStyle(1)}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){e.prototype.tick.call(this)},t.prototype.keyDown=function(e){},t.prototype.keyUp=function(e){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.skinColourPallette.destroy(),this.hairColourPallette.destroy(),this.tshirtSprite&&(Game.displayStore.returnPooledItem(this.tshirtSprite),this.tshirtHolder.removeChild(this.tshirtSprite),this.tshirtSprite=null),this.hatSprite&&(Game.displayStore.returnPooledItem(this.hatSprite),this.hatHolder.removeChild(this.hatSprite),this.hatSprite=null),this.accessorySprite&&(Game.displayStore.returnPooledItem(this.accessorySprite),this.accessoryHolder.removeChild(this.accessorySprite),this.accessorySprite=null),Game.displayStore.returnPooledItem(this.bg1),Game.displayStore.returnPooledItem(this.bg2)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),PhotoBoothEditFaceScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="photoBoothEditFaceScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.setBackgroundColor(3228766),this.game.ui.setUI("edit-photo"),this.centreAngleHandle=152,this.scaleDragHandleOffset=0,this.angleDragHandleOffset=0,this.origMaskedImageHeight=480,this.origMaskedImageWidth=390,this.targetMaskedImageHeight=360,this.targetMaskedImageWidth=292.5,this.imageMaskRatio=this.targetMaskedImageHeight/this.origMaskedImageHeight,this.currentImageAngle=0,this.visualDebugElements=!1,this.bg1=Game.displayStore.getSprite("gift-shop/bg-half"),this.bg2=Game.displayStore.getSprite("gift-shop/bg-half"),this.bg1.position.x=Game.stageWidth/2,this.bg2.position.x=Game.stageWidth/2,this.bg2.scale.x=-1,this.bg1.tint=8229547,this.bg2.tint=8229547,this.dragging=!1,this.scaleDragging=!1,this.angleDragging=!1,this.currentFingerAngle=0,this.currentRealFingerAngle=0,this.initialRealFingerAngle=0,this.userHitArea=Game.displayStore.getSprite("gift-shop-blank-input"),this.imageEditClipContainer=Game.displayStore.getContainer("gift-shop/image-edit-clip-container"),this.imageEditClipInner=this.imageEditClipContainer.getContainer("gift-shop/image-holder"),this.imageEditClipContainer.mask=null,this.imageEditClipContainer.position.x=Game.stageWidth/2,this.imageEditClipContainer.position.y=Game.stageHeight/2,this.imageEditClipInner.position.x=0,this.imageEditClipInner.position.y=0,this.angleMiddlePoint=this.centreAngleHandle,this.angleFinetuneMax=.5,this.currentFineTuneAngle=0,this.currentMainAngle=0,this.imageScale=1,this.lockInput=!1,this.finger1ID=0,this.remainingTouchID=0,this.touchZooming=!1,this.fingerDistance=0,this.lastFingerDistance=1,this.initialFingerDistance=0,this.pinchZoomOffset=new PIXI.Point(0,0),this.imagePos=new PIXI.Point(Game.stageWidth/2,Game.stageHeight/2),this.imageStartPos=new PIXI.Point(Game.stageWidth/2,Game.stageHeight/2),this.mouseDragPos=new PIXI.Point(0,0),this.mouseStartPos=new PIXI.Point(0,0),this.recordedImagePos=new PIXI.Point(0,0);this.angleHandleLimits=new PIXI.Point(this.centreAngleHandle-40,this.centreAngleHandle+40),this.angleLimits=new PIXI.Point(-1,1),this.scaleHandleLimits=new PIXI.Point(220,400),this.scalingLimits=new PIXI.Point(.2,2.5),this.finger1Pos=new PIXI.Point(0,0),this.finger2Pos=new PIXI.Point(0,0),this.finger1PosGlobal=new PIXI.Point(0,0),this.finger2PosGlobal=new PIXI.Point(0,0),this.fingerCenterPos=new PIXI.Point(0,0),this.frameAlpha=.85,this.shapeFrameTopLeft=Game.displayStore.getSprite("gift-shop/upload-frame-shape"),this.shapeFrameTopRight=Game.displayStore.getSprite("gift-shop/upload-frame-shape"),this.shapeFrameBottomLeft=Game.displayStore.getSprite("gift-shop/upload-frame-shape"),this.shapeFrameBottomRight=Game.displayStore.getSprite("gift-shop/upload-frame-shape"),this.frameCornerDimensions=[this.shapeFrameTopLeft.width,this.shapeFrameTopLeft.height],this.shapeFrameTopLeft.position.x=Game.stageWidth/2-this.frameCornerDimensions[0],this.shapeFrameTopLeft.position.y=Game.stageHeight/2-this.frameCornerDimensions[1],this.shapeFrameTopRight.scale.x=-1,this.shapeFrameTopRight.position.x=Game.stageWidth/2+this.frameCornerDimensions[0],this.shapeFrameTopRight.position.y=Game.stageHeight/2-this.frameCornerDimensions[1],this.shapeFrameBottomLeft.scale.y=-1,this.shapeFrameBottomLeft.position.x=Game.stageWidth/2-this.frameCornerDimensions[0],this.shapeFrameBottomLeft.position.y=Game.stageHeight/2+this.frameCornerDimensions[1],this.shapeFrameBottomRight.scale.x=-1,this.shapeFrameBottomRight.scale.y=-1,this.shapeFrameBottomRight.position.x=Game.stageWidth/2+this.frameCornerDimensions[0],this.shapeFrameBottomRight.position.y=Game.stageHeight/2+this.frameCornerDimensions[1],this.shapeFrameFillLeft=Game.displayStore.getSprite("gift-shop/upload-frame-fill"),this.shapeFrameFillRight=Game.displayStore.getSprite("gift-shop/upload-frame-fill"),this.shapeFrameFillLeft.width=Game.stageWidth/2-this.frameCornerDimensions[0],this.shapeFrameFillLeft.height=Game.stageHeight,this.shapeFrameFillRight.width=Game.stageWidth/2-this.frameCornerDimensions[0],this.shapeFrameFillRight.height=Game.stageHeight,this.shapeFrameFillRight.position.x=Game.stageWidth/2+this.frameCornerDimensions[0],this.shapeTopLeft=Game.displayStore.getSprite("gift-shop/upload-shape"),this.shapeTopRight=Game.displayStore.getSprite("gift-shop/upload-shape"),this.shapeBottomLeft=Game.displayStore.getSprite("gift-shop/upload-shape"),this.shapeBottomRight=Game.displayStore.getSprite("gift-shop/upload-shape"),this.shapeCornerDimensions=[this.shapeTopLeft.width,this.shapeTopLeft.height],this.shapeTopLeft.position.x=Game.stageWidth/2-this.shapeCornerDimensions[0],this.shapeTopLeft.position.y=Game.stageHeight/2-this.shapeCornerDimensions[1],this.shapeTopRight.scale.x=-1,this.shapeTopRight.position.x=Game.stageWidth/2+this.shapeCornerDimensions[0],this.shapeTopRight.position.y=Game.stageHeight/2-this.shapeCornerDimensions[1],this.shapeBottomLeft.scale.y=-1,this.shapeBottomLeft.position.x=Game.stageWidth/2-this.shapeCornerDimensions[0],this.shapeBottomLeft.position.y=Game.stageHeight/2+this.shapeCornerDimensions[1],this.shapeBottomRight.scale.x=-1,this.shapeBottomRight.scale.y=-1,this.shapeBottomRight.position.x=Game.stageWidth/2+this.shapeCornerDimensions[0],this.shapeBottomRight.position.y=Game.stageHeight/2+this.shapeCornerDimensions[1],this.userImageUnedited=Game.displayStore.getSprite("user-image-unedited"),this.userImageUnedited.setRegPoint(.5,.5),this.userImageUnedited.position.x=0,this.userImageUnedited.position.y=0,this.imageEditClipInner.addChild(this.userImageUnedited),this.shapeTopLeft.alpha=this.frameAlpha,this.shapeTopRight.alpha=this.frameAlpha,this.shapeBottomLeft.alpha=this.frameAlpha,this.shapeBottomRight.alpha=this.frameAlpha,this.shapeFrameTopLeft.alpha=this.frameAlpha,this.shapeFrameTopRight.alpha=this.frameAlpha,this.shapeFrameBottomLeft.alpha=this.frameAlpha,this.shapeFrameBottomRight.alpha=this.frameAlpha,this.shapeFrameFillLeft.alpha=this.frameAlpha,this.shapeFrameFillRight.alpha=this.frameAlpha,this.container.addChild(this.bg1),this.container.addChild(this.bg2),this.container.addChild(this.shapeTopLeft),this.container.addChild(this.shapeTopRight),this.container.addChild(this.shapeBottomLeft),this.container.addChild(this.shapeBottomRight),this.container.addChild(this.imageEditClipContainer),this.container.addChild(this.shapeFrameTopLeft),this.container.addChild(this.shapeFrameTopRight),this.container.addChild(this.shapeFrameBottomLeft),this.container.addChild(this.shapeFrameBottomRight),this.container.addChild(this.shapeFrameFillLeft),this.container.addChild(this.shapeFrameFillRight),this.eyeLineGuide=Game.displayStore.getSprite("gift-shop/eye-line-guide"),this.eyeLineGuide.position.x=Game.stageWidth/2,this.eyeLineGuide.position.y=280,this.container.addChild(this.eyeLineGuide),this.fingerCenterGraphic=Game.displayStore.getSprite("gift-shop/finger-center-graphic"),this.fingerCenterGraphic.position.x=-100,this.fingerCenterGraphic.position.y=-100,this.fingerCenterGraphic.visible=!1,this.fingerGraphicGuide1=Game.displayStore.getSprite("gift-shop/finger-graphic-guide-1"),this.fingerGraphicGuide1.position.x=-100,this.fingerGraphicGuide1.position.y=-100,this.fingerGraphicGuide1.visible=!1,this.fingerGraphicGuide2=Game.displayStore.getSprite("gift-shop/finger-graphic-guide-2"),this.fingerGraphicGuide2.position.x=-100,this.fingerGraphicGuide2.position.y=-100,this.fingerGraphicGuide2.visible=!1,1==this.visualDebugElements&&(this.fingerCenterGraphic.visible=!0,this.fingerGraphicGuide1.visible=!0,this.fingerGraphicGuide2.visible=!0),this.mobileInstructions=Game.displayStore.getSprite("gift-shop/edit-image-mobile-instructions"),this.scaleButton=Game.displayStore.getSprite("gift-shop/scale-handle"),this.angleButton=Game.displayStore.getSprite("gift-shop/rotation-handle"),this.imageRotateIcon=Game.displayStore.getSprite("gift-shop/image-rotate-icon"),this.scaleSmallIcon=Game.displayStore.getSprite("gift-shop/image-scale-icon-small"),this.scaleLargeIcon=Game.displayStore.getSprite("gift-shop/image-scale-icon-large"),this.angleButtonRunner=Game.displayStore.getSprite("gift-shop/rotation-handle-runner"),this.scaleButtonRunner=Game.displayStore.getSprite("gift-shop/scale-handle-runner"),this.eyeLineText=Game.displayStore.getBitmapText("gift-shop/photo-booth/eye-line-font"),Game.stringsManager.setTextString(this.eyeLineText,"eye-line"),this.eyeLineText.position.x=Game.stageWidth/2-this.eyeLineText.width/2+Game.stringsManager.getTextOffset("eye-line").xOffset,this.eyeLineText.position.y=200+Game.stringsManager.getTextOffset("eye-line").yOffset,this.eyeLineText.tint=16734722,this.container.addChild(this.eyeLineText),this.ovalClipShape=new PIXI.Graphics,this.ovalClipShape.beginFill(3447003),this.ovalClipShape.drawEllipse(0,0,this.origMaskedImageWidth/2,this.origMaskedImageHeight/2),this.ovalClipShape.endFill(),this.ovalClipShape.alpha=0,this.imageEditClipContainer.addChild(this.ovalClipShape),this.addControls(),Game.onDesktop&&(this.container.addChild(this.angleButton),this.container.addChild(this.scaleButton),this.setUpAngleDrag(),this.setUpScaleDrag()),this.container.addChild(this.fingerCenterGraphic),this.container.addChild(this.fingerGraphicGuide1),this.container.addChild(this.fingerGraphicGuide2),this.mobileInstructions.position.x=20,this.mobileInstructions.position.y=Game.stageHeight-20,0==Game.onDesktop&&this.container.addChild(this.mobileInstructions)},t.prototype.addControls=function(){this.userHitArea.width=Game.stageWidth,this.userHitArea.height=Game.stageHeight,this.userHitArea.position=new PIXI.Point(0,0),this.userHitArea.alpha=0,this.userHitArea.interactive=!0,this.userHitArea.buttonMode=!0,this.container.addChild(this.userHitArea);var e=this;1==Game.onDesktop?(e.userHitArea.on("mousedown",function(t){e.beginImageDrag(e,t)}),e.userHitArea.on("mousemove",function(t){e.imageDragging(e,t)}),e.userHitArea.on("mouseup",function(t){e.endImageDrag(e,t)}),e.userHitArea.on("mouseupoutside",function(t){e.endImageDrag(e,t)})):(e.userHitArea.on("touchstart",function(t){var i=t.data.originalEvent.touches.length;console.log("fingers...",i),1==i?(e.beginImageDrag(e,t),e.finger1ID=t.data.originalEvent.touches[0].identifier,e.calcInitialInput(e,t)):2==i&&(e.currentFingerAngle=0,e.finger1ID!=e.remainingTouchID&&0!=e.remainingTouchID?(e.finger1ID=t.data.originalEvent.touches[1].identifier,e.finger2ID=t.data.originalEvent.touches[0].identifier):(e.finger1ID=t.data.originalEvent.touches[0].identifier,e.finger2ID=t.data.originalEvent.touches[1].identifier),e.calcInitialInput(e,t),e.endImageDrag(e,t),e.takeInitialDistance=!0,e.imageScale=e.imageEditClipInner.scale.x,e.calcFingerLocs(e,t),0==e.touchZooming&&(e.touchZooming=!0))}),e.userHitArea.on("touchmove",function(t){1==t.data.originalEvent.touches.length&&e.imageDragging(e,t),e.calcFingerLocs(e,t)}),e.userHitArea.on("touchend",function(t){var i=t.data.originalEvent.touches.length;if(e.touchZooming=!1,e.imageScale=e.imageEditClipInner.scale.x,0==i)e.remainingTouchID=0,e.endImageDrag(e,t);else if(1==i){var s=t.data.originalEvent.touches[0].identifier;e.remainingTouchID=s,e.touchZooming=!1,e.imageScale=e.imageEditClipInner.scale.x}}))},t.prototype.calcFingerLocs=function(e,t){e.setFingerLocs(e,t),e.currentRealFingerAngle=e.getAngle(e.finger1PosGlobal.x,e.finger1PosGlobal.y,e.finger2PosGlobal.x,e.finger2PosGlobal.y),e.fingerDistance=e.getDistance(e.finger1PosGlobal.x,e.finger1PosGlobal.y,e.finger2PosGlobal.x,e.finger2PosGlobal.y)},t.prototype.calcInitialInput=function(e,t){e.setFingerLocs(e,t),e.initialFingerDistance=e.getDistance(e.finger1PosGlobal.x,e.finger1PosGlobal.y,e.finger2PosGlobal.x,e.finger2PosGlobal.y),e.initialRealFingerAngle=e.getAngle(e.finger1PosGlobal.x,e.finger1PosGlobal.y,e.finger2PosGlobal.x,e.finger2PosGlobal.y),e.initialImageAngle=e.imageEditClipInner.rotation},t.prototype.setFingerLocs=function(e,t){for(var i=t.data.identifier,s=0;s<t.data.originalEvent.touches.length;s++)i==e.finger1ID?(e.finger1Pos=new PIXI.Point(t.data.originalEvent.touches[s].clientX,t.data.originalEvent.touches[s].clientY),e.finger1PosGlobal=t.data.getLocalPosition(e.container,e.finger1Pos)):i==e.finger2ID&&(e.finger2Pos=new PIXI.Point(t.data.originalEvent.touches[s].clientX,t.data.originalEvent.touches[s].clientY),e.finger2PosGlobal=t.data.getLocalPosition(e.container,e.finger2Pos))},t.prototype.setUpScaleDrag=function(){this.container.addChild(this.scaleSmallIcon),this.scaleSmallIcon.position.x=850,this.scaleSmallIcon.position.y=440,this.container.addChild(this.scaleLargeIcon),this.scaleLargeIcon.position.x=850,this.scaleLargeIcon.position.y=180,this.container.addChild(this.scaleButtonRunner),this.scaleButtonRunner.position.x=850,this.scaleButtonRunner.position.y=this.scaleHandleLimits.x+(this.scaleHandleLimits.y-this.scaleHandleLimits.x)/2,this.container.addChild(this.scaleButton),this.scaleHandleDragPos=new PIXI.Point(850,342),this.changeDragScale(),this.scaleButton.position.x=this.scaleHandleDragPos.x,this.scaleButton.position.y=this.scaleHandleDragPos.y,this.scaleButton.interactive=!0,this.scaleButton.buttonMode=!0;var e=this;this.scaleButton.on("mousedown",function(t){e.scaleDragging=!0,e.scaleDragHandleOffset=t.data.getLocalPosition(e.container).y-e.scaleButton.position.y,e.dragAdjustScale(e,t)}),this.scaleButton.on("mousemove",function(t){e.dragAdjustScale(e,t)}),this.scaleButton.on("mouseup",function(t){e.endScaleDrag(e,t)}),this.scaleButton.on("mouseupoutside",function(t){e.endScaleDrag(e,t)})},t.prototype.setUpAngleDrag=function(){this.container.addChild(this.imageRotateIcon),this.imageRotateIcon.position.x=this.centreAngleHandle,this.imageRotateIcon.position.y=420,this.angleButtonRunner.position.x=this.centreAngleHandle,this.angleButtonRunner.position.y=512,this.container.addChild(this.angleButtonRunner),this.container.addChild(this.angleButton),this.angleHandleDragPos=new PIXI.Point(this.centreAngleHandle,512),this.angleButton.position.x=this.angleHandleDragPos.x,this.angleButton.position.y=this.angleHandleDragPos.y,this.angleButton.interactive=!0,this.angleButton.buttonMode=!0;var e=this;this.angleButton.on("mousedown",function(t){e.angleDragging=!0,e.angleDragHandleOffset=t.data.getLocalPosition(e.container).x-e.angleButton.position.x,e.dragAdjustAngle(e,t)}),this.angleButton.on("mousemove",function(t){e.dragAdjustAngle(e,t)}),this.angleButton.on("mouseup",function(t){e.endAngleDrag(e,t)}),this.angleButton.on("mouseupoutside",function(t){e.endAngleDrag(e,t)})},t.prototype.dragAdjustAngle=function(e,t){e.angleHandleDragPos.x=t.data.getLocalPosition(e.container).x,e.angleHandleDragPos.x>e.angleHandleLimits.y+e.angleDragHandleOffset&&(e.angleHandleDragPos.x=e.angleHandleLimits.y+e.angleDragHandleOffset),e.angleHandleDragPos.x<e.angleHandleLimits.x+e.angleDragHandleOffset&&(e.angleHandleDragPos.x=e.angleHandleLimits.x+e.angleDragHandleOffset)},t.prototype.dragAdjustScale=function(e,t){e.scaleHandleDragPos.y=t.data.getLocalPosition(e.container).y,e.scaleHandleDragPos.y<e.scaleHandleLimits.x+e.scaleDragHandleOffset&&(e.scaleHandleDragPos.y=e.scaleHandleLimits.x+e.scaleDragHandleOffset),e.scaleHandleDragPos.y>e.scaleHandleLimits.y+e.scaleDragHandleOffset&&(e.scaleHandleDragPos.y=e.scaleHandleLimits.y+e.scaleDragHandleOffset)},t.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},t.prototype.endScaleDrag=function(e,t){e.scaleDragging=!1},t.prototype.endAngleDrag=function(e,t){e.angleDragging=!1},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),t.id){case"skip-button":this.prepareImage();break;case"back-button":this.userImageUnedited&&Game.displayStore.flush(["user-image-unedited"]),this.game.setScene("photoBoothUploadFaceScene",!1);break;case"rotate-button":this.rotateImage();break;case"button-large-help":this.game.setScene("helpSetupScene",!1,[this.id])}},t.prototype.rotateImage=function(){this.currentMainAngle+=.5*Math.PI,this.imageEditClipInner.rotation=this.currentMainAngle+this.currentFineTuneAngle,this.currentImageAngle=this.currentMainAngle+this.currentFineTuneAngle},t.prototype.beginImageDrag=function(e,t){e.mouseDragPos.x=t.data.getLocalPosition(e.container).x,e.mouseDragPos.y=t.data.getLocalPosition(e.container).y,e.mouseStartPos.x=t.data.getLocalPosition(e.container).x,e.mouseStartPos.y=t.data.getLocalPosition(e.container).y,e.imageStartPos.x=e.userImageUnedited.position.x,e.imageStartPos.y=e.userImageUnedited.position.y,e.dragging=!0},t.prototype.imageDragging=function(e,t){e.mouseDragPos.x=t.data.getLocalPosition(e.container).x,e.mouseDragPos.y=t.data.getLocalPosition(e.container).y},t.prototype.endImageDrag=function(e,t){e.dragging=!1,e.imageStartPos.x=e.userImageUnedited.position.x,e.imageStartPos.y=e.userImageUnedited.position.y},t.prototype.prepareImage=function(){this.imageEditClipContainer.mask=this.ovalClipShape,this.userImageRenderTexture=PIXI.RenderTexture.create(Math.round(this.targetMaskedImageWidth),Math.round(this.targetMaskedImageHeight)),this.userImageRenderSprite=new Sprite(this.userImageRenderTexture),this.imageEditClipContainer.position.x=this.targetMaskedImageWidth/2,this.imageEditClipContainer.position.y=this.targetMaskedImageHeight/2,this.imageEditClipContainer.scale.x=this.imageMaskRatio,this.imageEditClipContainer.scale.y=this.imageMaskRatio,Game.renderer.render(this.imageEditClipContainer,this.userImageRenderTexture,!1),this.renderingCanvas=Game.renderer.extract.canvas(this.userImageRenderTexture),Game.coreData.setAvatarAttributes({faceImage:this.renderingCanvas.toDataURL()}),Game.displayStore.flush(["user-image-unedited"]),Game.saveProgress(),this.game.setScene("photoBoothCustomiseAvatarScene",!0)},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){if(e.prototype.tick.call(this),1==this.dragging){var t=this.mouseDragPos.x-this.mouseStartPos.x,i=this.mouseDragPos.y-this.mouseStartPos.y,s=this.currentImageAngle+.5*Math.PI,o=t*Math.sin(s)-i*Math.cos(s),a=t*Math.cos(s)+i*Math.sin(s);this.imagePos.x=this.imageStartPos.x+o/this.imageScale,this.imagePos.y=this.imageStartPos.y+a/this.imageScale,this.userImageUnedited.position.x=this.imagePos.x,this.userImageUnedited.position.y=this.imagePos.y,this.updateDebugElementsPos()}if(1==Game.onDesktop&&1==this.scaleDragging&&(this.scaleButton.position.y=this.scaleHandleDragPos.y-this.scaleDragHandleOffset,this.changeDragScale()),1==this.angleDragging&&(this.angleButton.position.x=this.angleHandleDragPos.x-this.angleDragHandleOffset,this.changeDragAngle()),1==this.touchZooming){this.fingerDistance!=this.lastFingerDistance&&(this.lastFingerDistance=this.fingerDistance),this.fingerCenterPos.x=(this.finger1PosGlobal.x+this.finger2PosGlobal.x)/2,this.fingerCenterPos.y=(this.finger1PosGlobal.y+this.finger2PosGlobal.y)/2,this.updateDebugElementsPos();var r=this.imageScale,n=this.imageEditClipInner.scale.x,h=r+(this.initialFingerDistance-this.fingerDistance)/(500/n)*-1;h<this.scalingLimits.x&&(h=this.scalingLimits.x),h>this.scalingLimits.y&&(h=this.scalingLimits.y),this.imageEditClipInner.scale.x=h,this.imageEditClipInner.scale.y=h,this.currentFingerAngle=this.initialRealFingerAngle-this.currentRealFingerAngle,this.imageEditClipInner.rotation=this.initialImageAngle-this.currentFingerAngle,this.currentImageAngle=this.initialImageAngle-this.currentFingerAngle}},t.prototype.updateDebugElementsPos=function(){0!=this.visualDebugElements&&(this.fingerCenterGraphic.position.x=this.fingerCenterPos.x,this.fingerCenterGraphic.position.y=this.fingerCenterPos.y,this.fingerGraphicGuide1.position.x=this.finger1PosGlobal.x,this.fingerGraphicGuide1.position.y=this.finger1PosGlobal.y,this.fingerGraphicGuide2.position.x=this.finger2PosGlobal.x,this.fingerGraphicGuide2.position.y=this.finger2PosGlobal.y)},t.prototype.changeDragScale=function(){var e=this.scaleHandleLimits.y-this.scaleHandleLimits.x,t=(this.scaleHandleDragPos.y-this.scaleDragHandleOffset-this.scaleHandleLimits.x)/e*(this.scalingLimits.y-this.scalingLimits.x),i=this.scalingLimits.y-this.scalingLimits.x-t,s=this.scalingLimits.x+i;this.imageEditClipInner.scale.x=s,this.imageEditClipInner.scale.y=s,this.imageScale=s},t.prototype.changeDragAngle=function(){var e=this.angleMiddlePoint-this.angleHandleLimits.x,t=(this.angleHandleDragPos.x-this.angleDragHandleOffset-this.angleMiddlePoint)/e*this.angleFinetuneMax*-1;this.currentFineTuneAngle=t,this.imageEditClipInner.rotation=this.currentMainAngle+this.currentFineTuneAngle,this.currentImageAngle=this.currentMainAngle+this.currentFineTuneAngle},t.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},t.prototype.keyDown=function(e){},t.prototype.keyUp=function(e){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.ovalClipShape.clear(),this.userHitArea.removeAllListeners(),this.angleButton.removeAllListeners(),this.scaleButton.removeAllListeners(),Game.displayStore.returnPooledItem(this.shapeTopLeft),Game.displayStore.returnPooledItem(this.shapeTopRight),Game.displayStore.returnPooledItem(this.shapeBottomLeft),Game.displayStore.returnPooledItem(this.shapeBottomRight),Game.displayStore.returnPooledItem(this.shapeFrameTopLeft),Game.displayStore.returnPooledItem(this.shapeFrameTopRight),Game.displayStore.returnPooledItem(this.shapeFrameBottomLeft),Game.displayStore.returnPooledItem(this.shapeFrameBottomRight),Game.displayStore.returnPooledItem(this.shapeFrameFillLeft),Game.displayStore.returnPooledItem(this.shapeFrameFillRight),Game.displayStore.returnPooledItem(this.bg1),Game.displayStore.returnPooledItem(this.bg2)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),PhotoBoothMainScene=function(e){function t(t){var i=e.call(this,t)||this;return i.showSlime=!1,i.id="photoBoothMainScene",i}return __extends(t,e),t.prototype.init=function(t){switch(e.prototype.init.call(this),this.userPhotoDimensions=[664,540],this.photoFrameOffset=[52,32],this.mainHolder=Game.displayStore.getContainer("gift-shop/photo-booth/main-holder"),this.photoElementsHolder=this.mainHolder.getContainer("gift-shop/photo-booth/photo-elements-holder"),this.photoFrameBorderThickness=30,this.photoFrameBorderShadowThickness=2,this.photoFrameBorderShadowAlpha=.5,this.cropFrameOuterWidth=0,this.photoContentsZoomFactor=.92,this.timerIcon=Game.displayStore.getSprite("gift-shop/photo-booth/timer-icon"),this.timerNumber1=Game.displayStore.getSprite("gift-shop/photo-booth/timer-icon-1"),this.timerNumber2=Game.displayStore.getSprite("gift-shop/photo-booth/timer-icon-2"),this.timerNumber3=Game.displayStore.getSprite("gift-shop/photo-booth/timer-icon-3"),this.frameCropShape=new PIXI.Graphics,this.frameCropShape.beginFill(16776960),this.frameCropShape.lineStyle(0,16711680),this.frameCropShape.drawRect(2*this.cropFrameOuterWidth/this.photoContentsZoomFactor,2*this.cropFrameOuterWidth/this.photoContentsZoomFactor,(this.userPhotoDimensions[0]-2*this.cropFrameOuterWidth)/this.photoContentsZoomFactor-2,(this.userPhotoDimensions[1]-2*this.cropFrameOuterWidth)/this.photoContentsZoomFactor-2),this.photoTaken=!1,this.container.addChild(this.mainHolder),this.setBackgroundColor(13421772),Game.coreData.getAvatarAttributes().faceImage?this.game.ui.setUI("photobooth-main-clear-face"):this.game.ui.setUI("photobooth-main"),this.background=this.photoElementsHolder.getContainer("gift-shop/photo-booth/bg"),Game.coreData.getCurrentRide().island){case"volcano":this.currentBackground=this.background.getContainer("gift-shop/photo-booth/volcano-bg");break;case"ice":this.currentBackground=this.background.getContainer("gift-shop/photo-booth/ice-bg");break;case"beach":this.currentBackground=this.background.getContainer("gift-shop/photo-booth/beach-bg");break;case"jungle":this.currentBackground=this.background.getContainer("gift-shop/photo-booth/jungle-bg");case"asteroid":this.currentBackground=this.background.getContainer("gift-shop/photo-booth/asteroid-bg")}for(var i=0;i<this.background.children.length;i++)this.background.children[i].alpha=0;switch(this.currentBackground.alpha=1,this.frame=this.mainHolder.getContainer("gift-shop/photo-booth/photo-booth-frame"),this.viewfinder=this.frame.getSprite("gift-shop/photo-booth/viewfinder.png"),this.photoFlash=this.mainHolder.getSprite("gift-shop/photo-booth/photo-booth-flash-element"),this.photoFlash.width=Game.stageWidth,this.photoFlash.height=Game.stageHeight,this.photoFlash.blendMode=PIXI.BLEND_MODES.ADD,this.photoFlash.alpha=0,this.charactersHolder=this.photoElementsHolder.getContainer("gift-shop/photo-booth/characters"),Game.coreData.getCurrentRide().id){case"river-rangers":case"pin-ball":this.characters=Game.displayStore.getContainer("photo-booth/spongebob"),(s=[{id:"gift-shop/spongebob-hungry.mp3"},{id:"gift-shop/patrick-ketchup.mp3"},{id:"gift-shop/spongebob-mustard.mp3"},{id:"gift-shop/patrick-laughing.mp3"}])[o=Game.getRandom(0,5,!0)]&&Game.playSound(s[o].id,s[o].vol||.8);break;case"roller-coaster-doom":case"aqua-jetpack":this.characters=Game.displayStore.getContainer("photo-booth/thundermans"),(s=[{id:"gift-shop/max-enemies.mp3"},{id:"gift-shop/phoebe-woop.mp3"},{id:"gift-shop/max-im-the-best.mp3"},{id:"gift-shop/phoebe-no-problem-too-small.mp3"},{id:"gift-shop/phoebe-step-aside.mp3"}])[o=Game.getRandom(0,6,!0)]&&Game.playSound(s[o].id,s[o].vol||1);break;case"laser-cave":this.characters=Game.displayStore.getContainer("photo-booth/tmnt"),(s=[{id:"gift-shop/leo-celebrate.mp3"},{id:"gift-shop/leo-hooowho.mp3"},{id:"gift-shop/raph-amazing.mp3"},{id:"gift-shop/raph-enough-talk.mp3"}])[o=Game.getRandom(0,5,!0)]&&Game.playSound(s[o].id,s[o].vol||1);break;case"mayan-madness":case"dodgems":this.characters=Game.displayStore.getContainer("photo-booth/henry-danger"),(s=[{id:"gift-shop/henry-lets-go.mp3"},{id:"gift-shop/captain-fun.mp3"},{id:"gift-shop/captain-man-starring.mp3"},{id:"gift-shop/captain-man-hair.mp3"}])[o=Game.getRandom(0,5,!0)]&&Game.playSound(s[o].id,s[o].vol||1);break;case"roller-coaster-ice":case"beach-buggy":this.characters=Game.displayStore.getContainer("photo-booth/game-shakers"),(s=[{id:"gift-shop/babe-here-i-come.mp3"},{id:"gift-shop/babe-woo.mp3",vol:.9},{id:"gift-shop/triple-selfie.mp3"},{id:"gift-shop/triple-yeyahh.mp3"}])[o=Game.getRandom(0,5,!0)]&&Game.playSound(s[o].id,s[o].vol||1);break;case"jet-ski":this.characters=Game.displayStore.getContainer("photo-booth/school-of-rock"),(s=[{id:"gift-shop/tomika-ready.mp3"},{id:"gift-shop/tomika-nothings-gonna-stop-us-now.mp3"},{id:"gift-shop/zack-school-of-rock.mp3"}])[o=Game.getRandom(0,4,!0)]&&Game.playSound(s[o].id,s[o].vol||1);break;case"tree-top-gladiators":this.characters=Game.displayStore.getContainer("photo-booth/loud-house"),(s=[{id:"gift-shop/linc-its-go-time.mp3"},{id:"gift-shop/linc-yes.mp3"},{id:"gift-shop/luna-negative-2.mp3"}])[o=Game.getRandom(0,4,!0)]&&Game.playSound(s[o].id,s[o].vol||1);break;case"coco-nutty":this.characters=Game.displayStore.getContainer("photo-booth/nicky-ricky-dicky-dawn"),(s=[{id:"gift-shop/nicky-drumroll.mp3"},{id:"gift-shop/nicky-make-it-snappy.mp3"},{id:"gift-shop/dawn-leave-it-to-me.mp3"},{id:"gift-shop/dawn-ooo.mp3"}])[o=Game.getRandom(0,5,!0)]&&Game.playSound(s[o].id,s[o].vol||1);break;case"waterfall-wipeout":this.characters=Game.displayStore.getContainer("photo-booth/i-am-frankie"),(s=[{id:"gift-shop/frankie-making-you-like-me.mp3"},{id:"gift-shop/frankie-some-assistance.mp3"}])[o=Game.getRandom(0,3,!0)]&&Game.playSound(s[o].id,s[o].vol||1);break;case"snowball-wars":this.characters=Game.displayStore.getContainer("photo-booth/loud-house"),(s=[{id:"gift-shop/linc-its-go-time.mp3"},{id:"gift-shop/linc-yes.mp3"},{id:"gift-shop/luna-negative-2.mp3"}])[o=Game.getRandom(0,4,!0)]&&Game.playSound(s[o].id,s[o].vol||1);break;case"volcano-skydive":this.characters=Game.displayStore.getContainer("photo-booth/find-me-in-paris"),(s=[{id:"gift-shop/lena-i-love-it.mp3"},{id:"gift-shop/lena-laugh.mp3"}])[o=Game.getRandom(0,3,!0)]&&Game.playSound(s[o].id,s[o].vol||1);break;case"hover-drift":this.characters=Game.displayStore.getContainer("photo-booth/nicky-ricky-dicky-dawn"),(s=[{id:"gift-shop/nicky-drumroll.mp3"},{id:"gift-shop/nicky-make-it-snappy.mp3"},{id:"gift-shop/dawn-leave-it-to-me.mp3"},{id:"gift-shop/dawn-ooo.mp3"}])[o=Game.getRandom(0,5,!0)]&&Game.playSound(s[o].id,s[o].vol||1);break;case"egg-scape":this.characters=Game.displayStore.getContainer("photo-booth/game-shakers"),(s=[{id:"gift-shop/babe-here-i-come.mp3"},{id:"gift-shop/babe-woo.mp3",vol:.9},{id:"gift-shop/triple-selfie.mp3"},{id:"gift-shop/triple-yeyahh.mp3"}])[o=Game.getRandom(0,5,!0)]&&Game.playSound(s[o].id,s[o].vol||1);break;case"striker":this.characters=Game.displayStore.getContainer("photo-booth/henry-danger"),(s=[{id:"gift-shop/henry-lets-go.mp3"},{id:"gift-shop/captain-fun.mp3"},{id:"gift-shop/captain-man-starring.mp3"},{id:"gift-shop/captain-man-hair.mp3"}])[o=Game.getRandom(0,5,!0)]&&Game.playSound(s[o].id,s[o].vol||1);break;case"abducktion":this.characters=Game.displayStore.getContainer("photo-booth/knight-squad"),(s=[{id:"gift-shop/arc-positive-4.mp3"},{id:"gift-shop/ciara-positive-2.mp3"}])[o=Game.getRandom(0,3,!0)]&&Game.playSound(s[o].id,s[o].vol||1);break;case"crazy-golf":this.characters=Game.displayStore.getContainer("photo-booth/i-am-frankie");var s=[{id:"gift-shop/frankie-making-you-like-me.mp3"},{id:"gift-shop/frankie-some-assistance.mp3"}],o=Game.getRandom(0,3,!0);s[o]&&Game.playSound(s[o].id,s[o].vol||1)}this.slimeLeftBurstContainer=Game.displayStore.getContainer("gift-shop/photo-booth/slime-burst-left-holder");var a={lowerAngle:80,upperAngle:100,lowerVelocity:1200,upperVelocity:1500,lowerStartScale:1,upperStartScale:2,lowerEndScale:2,upperEndScale:3,friction:0,XstartRange:80,YstartRange:100,time:5,gravity:0,stagger:100,cap:115,startAlpha:1,endAlpha:1,rotationPower:0};this.slimeLeftBurst=new ParticleBurst(["gift-shop/photo-booth/slime-burst-left-1","gift-shop/photo-booth/slime-burst-left-2","gift-shop/photo-booth/slime-burst-left-3"],this.slimeLeftBurstContainer,this,a),this.slimeLeftBurst.container.position.x=0,this.slimeLeftBurst.container.position.y=-400,this.slimeRightBurstContainer=Game.displayStore.getContainer("gift-shop/photo-booth/slime-burst-right-holder");var r={lowerAngle:80,upperAngle:100,lowerVelocity:1200,upperVelocity:1500,lowerStartScale:1,upperStartScale:2,lowerEndScale:2,upperEndScale:3,friction:0,XstartRange:80,YstartRange:100,time:5,gravity:0,stagger:100,cap:115,startAlpha:1,endAlpha:1,rotationPower:0};this.slimeRightBurst=new ParticleBurst(["gift-shop/photo-booth/slime-burst-right-1","gift-shop/photo-booth/slime-burst-right-2","gift-shop/photo-booth/slime-burst-right-3"],this.slimeRightBurstContainer,this,r),this.slimeRightBurst.container.position.x=400,this.slimeRightBurst.container.position.y=-400,this.slimeCenterBurstContainer=Game.displayStore.getContainer("gift-shop/photo-booth/slime-burst-center-holder");var n={lowerAngle:80,upperAngle:100,lowerVelocity:1200,upperVelocity:1500,lowerStartScale:1,upperStartScale:2,lowerEndScale:2,upperEndScale:3,friction:0,XstartRange:80,YstartRange:100,time:5,gravity:0,stagger:100,cap:115,startAlpha:1,endAlpha:1,rotationPower:0};this.slimeCenterBurst=new ParticleBurst(["gift-shop/photo-booth/slime-burst-center-1","gift-shop/photo-booth/slime-burst-center-2","gift-shop/photo-booth/slime-burst-center-3"],this.slimeCenterBurstContainer,this,n),this.slimeCenterBurst.container.position.x=0,this.slimeCenterBurst.container.position.y=-500,this.slimeLeftBackBurstContainer=Game.displayStore.getContainer("gift-shop/photo-booth/slime-burst-left-back-holder");var h={lowerAngle:80,upperAngle:100,lowerVelocity:1200,upperVelocity:1500,lowerStartScale:1,upperStartScale:2,lowerEndScale:2,upperEndScale:3,friction:0,XstartRange:80,YstartRange:100,time:5,gravity:0,stagger:100,cap:70,startAlpha:1,endAlpha:1,rotationPower:0};this.slimeLeftBackBurst=new ParticleBurst(["gift-shop/photo-booth/slime-burst-left-back-1","gift-shop/photo-booth/slime-burst-left-back-2"],this.slimeLeftBackBurstContainer,this,h),this.slimeLeftBackBurst.container.position.x=0,this.slimeLeftBackBurst.container.position.y=-400,this.slimeRightBackBurstContainer=Game.displayStore.getContainer("gift-shop/photo-booth/slime-burst-right-back-holder");var l={lowerAngle:80,upperAngle:100,lowerVelocity:1200,upperVelocity:1500,lowerStartScale:1,upperStartScale:2,lowerEndScale:2,upperEndScale:3,friction:0,XstartRange:80,YstartRange:100,time:5,gravity:0,stagger:100,cap:70,startAlpha:1,endAlpha:1,rotationPower:0};this.slimeRightBackBurst=new ParticleBurst(["gift-shop/photo-booth/slime-burst-right-back-1","gift-shop/photo-booth/slime-burst-right-back-2"],this.slimeRightBackBurstContainer,this,l),this.slimeRightBackBurst.container.position.x=400,this.slimeRightBackBurst.container.position.y=-400,this.slimeCenterBackBurstContainer=Game.displayStore.getContainer("gift-shop/photo-booth/slime-burst-center-back-holder");var p={lowerAngle:80,upperAngle:100,lowerVelocity:1200,upperVelocity:1500,lowerStartScale:1,upperStartScale:2,lowerEndScale:2,upperEndScale:3,friction:0,XstartRange:80,YstartRange:100,time:5,gravity:0,stagger:100,cap:70,startAlpha:1,endAlpha:1,rotationPower:0};this.slimeCenterBackBurst=new ParticleBurst(["gift-shop/photo-booth/slime-burst-center-back-1","gift-shop/photo-booth/slime-burst-center-back-2"],this.slimeCenterBackBurstContainer,this,p),this.slimeCenterBackBurst.container.position.x=200,this.slimeCenterBackBurst.container.position.y=-500,this.slimeLeftSmallBurstContainer=Game.displayStore.getContainer("gift-shop/photo-booth/slime-burst-left-small-holder");var c={lowerAngle:200,upperAngle:235,lowerVelocity:1200,upperVelocity:1500,lowerStartScale:1,upperStartScale:2,lowerEndScale:2,upperEndScale:3,friction:0,XstartRange:60,YstartRange:50,time:.5,gravity:0,stagger:100,cap:70,startAlpha:1,endAlpha:1,rotationPower:.8};this.slimeLeftSmallBurst=new ParticleBurst(["gift-shop/photo-booth/slime-burst-left-small-1","gift-shop/photo-booth/slime-burst-left-small-2"],this.slimeLeftSmallBurstContainer,this,c),this.slimeLeftSmallBurst.container.position.x=40,this.slimeLeftSmallBurst.container.position.y=330,this.slimeRightSmallBurstContainer=Game.displayStore.getContainer("gift-shop/photo-booth/slime-burst-right-small-holder");var d={lowerAngle:300,upperAngle:350,lowerVelocity:1200,upperVelocity:1500,lowerStartScale:1,upperStartScale:2,lowerEndScale:2,upperEndScale:3,friction:0,XstartRange:60,YstartRange:50,time:.5,gravity:0,stagger:100,cap:70,startAlpha:1,endAlpha:1,rotationPower:.8};this.slimeRightSmallBurst=new ParticleBurst(["gift-shop/photo-booth/slime-burst-right-small-1","gift-shop/photo-booth/slime-burst-right-small-2"],this.slimeRightSmallBurstContainer,this,d),this.slimeRightSmallBurst.container.position.x=380,this.slimeRightSmallBurst.container.position.y=330,this.slimeLeftSmall2BurstContainer=Game.displayStore.getContainer("gift-shop/photo-booth/slime-burst-left-small2-holder");var u={lowerAngle:200,upperAngle:235,lowerVelocity:1200,upperVelocity:1400,lowerStartScale:.5,upperStartScale:1,lowerEndScale:2,upperEndScale:3,friction:0,XstartRange:60,YstartRange:50,time:.8,gravity:0,stagger:250,cap:70,startAlpha:0,endAlpha:1,rotationPower:.8};this.slimeLeftSmall2Burst=new ParticleBurst(["gift-shop/photo-booth/slime-burst-left-small2-1","gift-shop/photo-booth/slime-burst-left-small2-2"],this.slimeLeftSmall2BurstContainer,this,u),this.slimeLeftSmall2Burst.container.position.x=20,this.slimeLeftSmall2Burst.container.position.y=-50,this.slimeLeftSmall2Burst.container.scale.x=.5,this.slimeLeftSmall2Burst.container.scale.y=.5,this.slimeRightSmall2BurstContainer=Game.displayStore.getContainer("gift-shop/photo-booth/slime-burst-right-small2-holder");var g={lowerAngle:300,upperAngle:350,lowerVelocity:1200,upperVelocity:1400,lowerStartScale:.5,upperStartScale:1,lowerEndScale:2,upperEndScale:3,friction:0,XstartRange:60,YstartRange:50,time:.8,gravity:0,stagger:250,cap:70,startAlpha:0,endAlpha:1,rotationPower:.8};this.slimeRightSmall2Burst=new ParticleBurst(["gift-shop/photo-booth/slime-burst-right-small2-1","gift-shop/photo-booth/slime-burst-right-small2-2"],this.slimeRightSmall2BurstContainer,this,g),this.slimeRightSmall2Burst.container.position.x=370,this.slimeRightSmall2Burst.container.position.y=-50,this.slimeRightSmall2Burst.container.scale.x=.5,this.slimeRightSmall2Burst.container.scale.y=.5,this.avatarHolder=this.photoElementsHolder.getContainer("gift-shop/photo-booth/avatar-holder"),this.frameSlime=Game.displayStore.getSprite("gift-shop/photo-booth/frame-slime"),this.frameSlime.position.x=0,this.frameSlime.position.y=50,this.frameSlime.scale.x=1,this.frameSlime.scale.y=1,this.frameSlime.alpha=0,this.avatarHolder.addChild(this.frameSlime),this.avatar=this.avatarHolder.getContainer("gift-shop/photo-booth/avatar"),this.dashedArms=this.avatar.getSprite("gift-shop/photo-booth/dashed-arms.png"),this.arms=this.avatar.getSprite("gift-shop/photo-booth/avatar-arms.png"),this.head=this.avatar.getContainer("gift-shop/photo-booth/avatar-head"),this.blankFace=this.head.getSprite("gift-shop/photo-booth/blank-face.png"),this.faceShadow=this.head.getSprite("gift-shop/photo-booth/face-shadow.png"),this.hairHolder=this.head.getContainer("gift-shop/photo-booth/hair-holder"),this.tshirtHolder=this.avatar.getContainer("gift-shop/photo-booth/tshirt-holder"),this.hatHolder=this.head.getContainer("gift-shop/photo-booth/hat-holder"),this.accessoryHolder=this.head.getContainer("gift-shop/photo-booth/accessory-holder"),this.scoreCard=this.avatar.getContainer("gift-shop/photo-booth/score-card"),this.scoreText=Game.displayStore.getBitmapText("gift-shop/photo-booth/score-font"),this.charactersHolder.addChild(this.slimeLeftBackBurstContainer),this.charactersHolder.addChild(this.slimeRightBackBurstContainer),this.charactersHolder.addChild(this.characters),this.charactersHolder.addChild(this.slimeCenterBackBurstContainer),this.slimeSplat1=Game.displayStore.getSprite("gift-shop/photo-booth/photobooth-splat-"+Game.getRandom(1,4,!0)),this.charactersHolder.addChild(this.slimeSplat1),this.slimeSplat1.scale.x=0,this.slimeSplat1.scale.y=0,this.slimeSplat1.position.x=50,this.slimeSplat1.position.y=Game.getRandom(70,150,!0),this.slimeSplat2=Game.displayStore.getSprite("gift-shop/photo-booth/photobooth-splat-"+Game.getRandom(5,8,!0)),this.charactersHolder.addChild(this.slimeSplat2),this.slimeSplat2.scale.x=0,this.slimeSplat2.scale.y=0,this.slimeSplat2.position.x=400,this.slimeSplat2.position.y=Game.getRandom(70,150,!0),this.characters.position.x=140,this.characters.position.y=550,this.slimeBlob1=Game.displayStore.getSprite("gift-shop/photo-booth/slime-blob-"+Game.getRandom(1,3,!0)),this.slimeBlob2=Game.displayStore.getSprite("gift-shop/photo-booth/slime-blob-"+Game.getRandom(1,3,!0)),this.slimeBlob3=Game.displayStore.getSprite("gift-shop/photo-booth/slime-blob-"+Game.getRandom(1,3,!0)),this.slimeBlob1.position.x=0,this.slimeBlob2.position.x=0,this.slimeBlob3.position.x=400,this.slimeBlob1.position.y=-650,this.slimeBlob2.position.y=-700,this.slimeBlob3.position.y=-650,this.slimeBlob1.alpha=.7,this.slimeBlob2.alpha=.7,this.slimeBlob3.alpha=.7,this.charactersHolder.addChild(this.slimeBlob1),this.charactersHolder.addChild(this.slimeBlob3),this.charactersHolder.addChild(this.slimeLeftBurstContainer),this.charactersHolder.addChild(this.slimeRightBurstContainer),this.avatarHolder.addChild(this.slimeBlob2),this.avatarHolder.addChild(this.slimeCenterBurstContainer),this.charactersHolder.addChild(this.slimeLeftSmallBurstContainer),this.charactersHolder.addChild(this.slimeRightSmallBurstContainer),this.charactersHolder.addChild(this.slimeLeftSmall2BurstContainer),this.charactersHolder.addChild(this.slimeRightSmall2BurstContainer),this.characterLeft=this.characters.getSpriteAt(0),this.characterRight=this.characters.getSpriteAt(1),this.characterLeftSlime=this.characterLeft.getSpriteAt(2),this.characterRightSlime=this.characterRight.getSpriteAt(2),this.avatarSlime=this.avatar.getSpriteAt(4),this.scoreCardSlime=this.scoreCard.getSpriteAt(3),this.characterLeftSlime.alpha=0,this.characterRightSlime.alpha=0,this.avatarSlime.alpha=0,this.scoreCardSlime.alpha=0,this.characterLeftBlink=this.characterLeft.getSpriteAt(1),this.characterRightBlink=this.characterRight.getSpriteAt(1),this.origCharLeftPos=new PIXI.Point,this.origCharRightPos=new PIXI.Point,this.origCharLeftPos.x=this.characterLeft.position.x,this.origCharLeftPos.y=this.characterLeft.position.y,this.origCharRightPos.x=this.characterRight.position.x,this.origCharRightPos.y=this.characterRight.position.y,this.characterLeftBlink.alpha=0,this.characterRightBlink.alpha=0,this.characterLeft.setRegPoint(.5,1,!1),this.characterRight.setRegPoint(.5,1,!1),this.characterTimeline=this.killTween(this.characterTimeline),this.characterTimeline=new TimelineMax;var m=new TimelineMax({repeat:-1});m.add(TweenMax.to(this.characterLeftBlink,.1,{alpha:1,repeat:1,yoyo:!0}),3.5),m.add(TweenMax.to(this.characterLeftBlink,.1,{alpha:1,repeat:1,yoyo:!0}),6),m.add(TweenMax.to(this.characterLeftBlink,.1,{alpha:1,repeat:1,yoyo:!0}),6.5),m.add(TweenMax.to(this.characterRightBlink,.1,{alpha:1,repeat:1,yoyo:!0}),4),m.add(TweenMax.to(this.characterRightBlink,.1,{alpha:1,repeat:1,yoyo:!0}),4.5),m.add(TweenMax.to(this.characterRightBlink,.1,{alpha:1,repeat:1,yoyo:!0}),7),this.characterTimeline.add(TweenMax.to(this.characterLeft.scale,1,{y:.97,ease:Power1.easeInOut,repeat:-1,yoyo:!0}),0),this.characterTimeline.add(TweenMax.to(this.characterRight.scale,1,{y:.97,ease:Power1.easeInOut,repeat:-1,yoyo:!0}),.4),this.characterTimeline.add(m,0),this.photoFramePrintLogoHolder=Game.displayStore.getContainer("gift-shop/photo-booth/photo-frame-logo-holder"),this.setCurrentRideLogo(Game.coreData.getCurrentRide().id),this.photoFramePrintHolder=Game.displayStore.getContainer("gift-shop/photo-booth/photo-frame-holder"),this.photoFramePrintBorderTop=Game.displayStore.getSprite("gift-shop/photo-booth/photo-frame-print-layer-border"),this.photoFramePrintBorderLeft=Game.displayStore.getSprite("gift-shop/photo-booth/photo-frame-print-layer-border"),this.photoFramePrintBorderRight=Game.displayStore.getSprite("gift-shop/photo-booth/photo-frame-print-layer-border"),this.photoFramePrintBorderBottom=Game.displayStore.getSprite("gift-shop/photo-booth/photo-frame-print-layer-border"),this.photoFramePrintLight=Game.displayStore.getSprite("gift-shop/photo-booth/photo-frame-light-overlay"),this.photoFramePrintShadeOverlay=Game.displayStore.getSprite("gift-shop/photo-booth/photo-frame-shade-overlay");this.photoFramePrintBorderTop.width=this.userPhotoDimensions[0]-2*this.cropFrameOuterWidth,this.photoFramePrintBorderTop.height=this.photoFrameBorderThickness,this.photoFramePrintBorderTop.position.y=this.cropFrameOuterWidth,this.photoFramePrintBorderTop.position.x=this.cropFrameOuterWidth,this.photoFramePrintBorderLeft.width=this.photoFrameBorderThickness,this.photoFramePrintBorderLeft.height=this.userPhotoDimensions[1]-2*this.cropFrameOuterWidth,this.photoFramePrintBorderLeft.position.y=this.cropFrameOuterWidth,this.photoFramePrintBorderLeft.position.x=this.cropFrameOuterWidth,this.photoFramePrintBorderRight.width=this.photoFrameBorderThickness,this.photoFramePrintBorderRight.height=this.userPhotoDimensions[1]-2*this.cropFrameOuterWidth,this.photoFramePrintBorderRight.position.x=this.userPhotoDimensions[0]-this.photoFrameBorderThickness-this.cropFrameOuterWidth,this.photoFramePrintBorderRight.position.y=this.cropFrameOuterWidth;this.photoFramePrintBorderBottom.width=this.userPhotoDimensions[0]-2*this.cropFrameOuterWidth,this.photoFramePrintBorderBottom.height=2*this.photoFrameBorderThickness,this.photoFramePrintBorderBottom.position.y=this.userPhotoDimensions[1]-2*this.photoFrameBorderThickness-this.cropFrameOuterWidth,this.photoFramePrintBorderBottom.position.x=this.cropFrameOuterWidth,this.photoFramePrintBorderTop.tint=15921906,this.photoFramePrintBorderRight.tint=15921906,this.photoFramePrintBorderBottom.tint=15921906,this.photoFramePrintBorderLeft.tint=15921906,this.photoFramePrintBorderShadowTop=Game.displayStore.getSprite("gift-shop/photo-booth/photo-frame-print-layer-border-shadow"),this.photoFramePrintBorderShadowLeft=Game.displayStore.getSprite("gift-shop/photo-booth/photo-frame-print-layer-border-shadow"),this.photoFramePrintBorderShadowBottom=Game.displayStore.getSprite("gift-shop/photo-booth/photo-frame-print-layer-border-shadow"),this.photoFramePrintBorderShadowRight=Game.displayStore.getSprite("gift-shop/photo-booth/photo-frame-print-layer-border-shadow"),this.photoFramePrintBorderShadowTop.width=this.userPhotoDimensions[0]-2*this.cropFrameOuterWidth,this.photoFramePrintBorderShadowTop.height=this.photoFrameBorderThickness+this.photoFrameBorderShadowThickness,this.photoFramePrintBorderShadowTop.position.y=this.cropFrameOuterWidth,this.photoFramePrintBorderShadowTop.position.x=this.cropFrameOuterWidth,this.photoFramePrintBorderShadowLeft.width=this.photoFrameBorderThickness+this.photoFrameBorderShadowThickness,this.photoFramePrintBorderShadowLeft.height=this.userPhotoDimensions[1]-2*this.cropFrameOuterWidth,this.photoFramePrintBorderShadowLeft.position.x=this.cropFrameOuterWidth,this.photoFramePrintBorderShadowLeft.position.y=this.cropFrameOuterWidth,this.photoFramePrintBorderShadowRight.width=this.photoFrameBorderThickness+this.photoFrameBorderShadowThickness,this.photoFramePrintBorderShadowRight.height=this.userPhotoDimensions[1]-2*this.cropFrameOuterWidth,this.photoFramePrintBorderShadowRight.position.x=this.userPhotoDimensions[0]-this.photoFrameBorderThickness-this.photoFrameBorderShadowThickness-this.cropFrameOuterWidth,this.photoFramePrintBorderShadowRight.position.y=this.cropFrameOuterWidth,this.photoFramePrintBorderShadowBottom.width=this.userPhotoDimensions[0]-2*this.cropFrameOuterWidth,this.photoFramePrintBorderShadowBottom.height=2*this.photoFrameBorderShadowThickness+this.photoFrameBorderShadowThickness,this.photoFramePrintBorderShadowBottom.position.y=this.userPhotoDimensions[1]-2*this.photoFrameBorderThickness-this.photoFrameBorderShadowThickness-this.cropFrameOuterWidth,this.photoFramePrintBorderShadowBottom.position.x=this.cropFrameOuterWidth,this.photoFramePrintHolder.addChild(this.photoFramePrintBorderShadowTop),this.photoFramePrintHolder.addChild(this.photoFramePrintBorderShadowRight),this.photoFramePrintHolder.addChild(this.photoFramePrintBorderShadowLeft),this.photoFramePrintHolder.addChild(this.photoFramePrintBorderShadowBottom),this.photoFramePrintBorderShadowTop.alpha=this.photoFrameBorderShadowAlpha,this.photoFramePrintBorderShadowRight.alpha=this.photoFrameBorderShadowAlpha,this.photoFramePrintBorderShadowLeft.alpha=this.photoFrameBorderShadowAlpha,this.photoFramePrintBorderShadowBottom.alpha=this.photoFrameBorderShadowAlpha,this.photoFramePrintHolder.addChild(this.photoFramePrintBorderTop),this.photoFramePrintHolder.addChild(this.photoFramePrintBorderRight),this.photoFramePrintHolder.addChild(this.photoFramePrintBorderLeft),this.photoFramePrintHolder.addChild(this.photoFramePrintBorderBottom),this.photoFramePrintLight.position.x=Game.getRandom(10,200),this.photoFramePrintLight.position.y=this.cropFrameOuterWidth,this.photoFramePrintLight.alpha=.3,this.photoFramePrintLight.blendMode=PIXI.BLEND_MODES.ADD,this.photoFramePrintHolder.addChild(this.photoFramePrintLogoHolder),this.photoFramePrintLogoHolder.position.x=this.userPhotoDimensions[0]-120,this.photoFramePrintLogoHolder.position.y=this.userPhotoDimensions[1]-90,this.photoFramePrintLogoHolder.rotation=Game.getRandom(-.15,.15),this.photoFramePrintLogoHolder.scale.x=this.photoFramePrintLogoHolder.scale.y=.8,this.photoFramePrintHolder.addChild(this.photoFramePrintLight);this.photoFramePrintHolder.addChild(this.photoFramePrintShadeOverlay),this.photoFramePrintShadeOverlay.position.y=this.userPhotoDimensions[1],this.photoFramePrintShadeOverlay.width=this.userPhotoDimensions[0],this.photoFramePrintShadeOverlay.alpha=.15,this.photoFramePrintShadeOverlay.tint=9158370,this.photoFramePrintShadeOverlay.blendMode=PIXI.BLEND_MODES.MULTIPLY,this.photoFrameLeft=Game.displayStore.getSprite("gift-shop/photo-booth/photo-booth-frame-left.png"),this.photoFrameRight=Game.displayStore.getSprite("gift-shop/photo-booth/photo-booth-frame-right.png"),this.photoFrameBottom=Game.displayStore.getSprite("gift-shop/photo-booth/photo-booth-frame-bottom.png"),this.photoFrameTop=Game.displayStore.getSprite("gift-shop/photo-booth/photo-booth-frame-top.png"),this.photoFrameLeft.position.x=-325,this.photoFrameLeft.position.y=-254,this.photoFrameTop.position.x=-310,this.photoFrameTop.position.y=-254,this.photoFrameRight.position.x=300,this.photoFrameRight.position.y=-254,this.photoFrameBottom.position.x=-310,this.photoFrameBottom.position.y=257,this.photoFrameFillLeft=Game.displayStore.getSprite("gift-shop/photo-booth/photo-booth-frame-fill.png"),this.photoFrameFillTop=Game.displayStore.getSprite("gift-shop/photo-booth/photo-booth-frame-fill.png"),this.photoFrameFillBottom=Game.displayStore.getSprite("gift-shop/photo-booth/photo-booth-frame-fill.png"),this.photoFrameFillRight=Game.displayStore.getSprite("gift-shop/photo-booth/photo-booth-frame-fill.png"),this.photoFrameFillLeft.position.x=-384,this.photoFrameFillLeft.position.y=-290,this.photoFrameFillLeft.width=68,this.photoFrameFillLeft.height=Game.stageHeight,this.photoFrameFillTop.position.x=-384,this.photoFrameFillTop.position.y=-290,this.photoFrameFillTop.width=Game.stageWidth,this.photoFrameFillTop.height=48,this.photoFrameFillBottom.position.x=-384,this.photoFrameFillBottom.position.y=260,this.photoFrameFillBottom.width=Game.stageWidth,this.photoFrameFillBottom.height=75,this.photoFrameFillRight.position.x=310,this.photoFrameFillRight.position.y=-290,this.photoFrameFillRight.width=Game.stageWidth-310,this.photoFrameFillRight.height=Game.stageHeight,this.frame.addChild(this.photoFrameFillLeft),this.frame.addChild(this.photoFrameFillTop),this.frame.addChild(this.photoFrameFillBottom),this.frame.addChild(this.photoFrameFillRight),this.frame.addChild(this.photoFrameLeft),this.frame.addChild(this.photoFrameRight),this.frame.addChild(this.photoFrameTop),this.frame.addChild(this.photoFrameBottom),this.userEditedFaceHolder=this.head.getContainer("gift-shop/photo-booth/user-edit-face-holder"),this.viewfinder.alpha=.7,this.black=this.photoElementsHolder.getSprite("gift-shop/photo-booth/black.png"),this.black.width=1e3,this.black.height=650,this.black.alpha=.3,this.background.addChild(this.black),this.scoreCard.addChild(this.scoreText),this.scoreText.text=Game.coreData.getPhotoGalleryScore(),this.scoreText.position.x=-this.scoreText.width/2,this.hands=this.scoreCard.getSprite("gift-shop/photo-booth/hands.png"),this.dashedHands=this.scoreCard.getSprite("gift-shop/photo-booth/hands-dashed.png"),this.buttonLine1=Game.displayStore.getSprite("gift-shop/photo-booth/button-line"),this.buttonLine2=Game.displayStore.getSprite("gift-shop/photo-booth/button-line"),this.buttonLineDashed=Game.displayStore.getSprite("gift-shop/photo-booth/button-line-dashed"),this.buttonLine1.position.x=466,this.buttonLine2.position.x=466,this.buttonLine1.position.y=164,this.buttonLine2.position.y=285,this.buttonLineDashed.position.x=466,this.buttonLineDashed.position.y=164,this.photoButtonLine=Game.displayStore.getSprite("gift-shop/photo-booth/photo-button-line"),this.photoButtonLineDashed=Game.displayStore.getSprite("gift-shop/photo-booth/photo-button-line-dashed"),this.photoButtonLine.position.x=885,this.photoButtonLine.position.y=160,this.photoButtonLineDashed.position.x=885,this.photoButtonLineDashed.position.y=160,this.buttonLine1.alpha=1,this.buttonLine2.alpha=1,this.photoButtonLine.alpha=1,this.buttonLineDashed.alpha=1,this.container.addChild(this.buttonLine1),this.container.addChild(this.buttonLine2),this.container.addChild(this.buttonLineDashed),this.container.addChild(this.photoButtonLine),this.container.addChild(this.photoButtonLineDashed),this.setUIScreenState(),this.setAvatarProperties(),this.setClothes(),this.introAnimation=this.killTween(this.introAnimation),this.introAnimation=new TimelineMax,this.introAnimation.add([TweenMax.from(this.frame.scale,1,{x:4,y:4,ease:Power3.easeInOut}),TweenMax.from(this.avatarHolder.scale,1,{x:2.2,y:2.2,ease:Power3.easeInOut}),TweenMax.from(this.avatarHolder.position,1,{y:600,ease:Power3.easeInOut}),TweenMax.from(this.charactersHolder.scale,1,{x:2.2,y:2.2,ease:Power3.easeInOut}),TweenMax.from(this.charactersHolder.position,1,{y:600,x:-150,ease:Power3.easeInOut}),TweenMax.from(this.background.scale,1,{x:1.3,y:1.3,ease:Power3.easeInOut}),TweenMax.from(this.viewfinder.scale,1,{x:5,y:5,ease:Power3.easeInOut}),TweenMax.from(this.viewfinder,1,{alpha:0,ease:Power3.easeInOut}),TweenMax.from(this.black,1,{alpha:0,ease:Power3.easeInOut}),TweenMax.from(this.buttonLine1,1.2,{alpha:0,ease:Power3.easeInOut}),TweenMax.from(this.buttonLine2,1.2,{alpha:0,ease:Power3.easeInOut}),TweenMax.from(this.frameSlime.scale,1,{x:2.2,y:2.2,ease:Power3.easeInOut})]),this.startIdle()},t.prototype.setCurrentRideLogo=function(e){for(var t=0;t<this.photoFramePrintLogoHolder.children.length;t++)this.photoFramePrintLogoHolder.getChildAt(t).visible=!1;var i="gift-shop/photo-booth/"+e;this.photoFramePrintLogoHolder.getSprite(i).visible=!0},t.prototype.setUIScreenState=function(){Game.coreData.getAvatarAttributes().faceImage?(this.buttonLine1.visible=!0,this.buttonLineDashed.visible=!1,this.photoButtonLine.visible=!0,this.photoButtonLineDashed.visible=!1):(this.buttonLine1.visible=!1,this.buttonLineDashed.visible=!0,this.photoButtonLine.visible=!1,this.photoButtonLineDashed.visible=!0)},t.prototype.setAvatarProperties=function(){if(Game.coreData.getAvatarAttributes().hairStyle?(this.hairSprite=Game.displayStore.getContainer("gift-shop/hair/"+Game.coreData.getAvatarAttributes().hairStyle),this.hairSprite.getSpriteAt(0).tint=Game.coreData.getAvatarAttributes().hairColour,this.hairSprite.getSpriteAt(1).tint=Game.coreData.getAvatarAttributes().hairColour,this.hairHolder.addChild(this.hairSprite)):this.hairHolder.removeChildren(),Game.coreData.getAvatarAttributes().skinColour?(this.hands.tint=Game.coreData.getAvatarAttributes().skinColour,this.arms.tint=Game.coreData.getAvatarAttributes().skinColour,this.blankFace.tint=Game.coreData.getAvatarAttributes().skinColour,this.dashedHands.alpha=0,this.dashedArms.alpha=0,this.hands.alpha=1,this.arms.alpha=1):(this.hands.alpha=0,this.arms.alpha=0,this.dashedHands.alpha=1,this.dashedArms.alpha=1,this.blankFace.tint=16777215),Game.coreData.getAvatarAttributes().faceImage){this.blankFace.visible=!1,this.userEditedFaceHolder.visible=!0;var e=Game.displayStore.getSprite("user-face-edited");e.setRegPoint(.5,.5),e.scale.x=.5,e.scale.y=.5,this.userEditedFaceHolder.addChild(e)}},t.prototype.startIdle=function(){this.idleAnimation=this.killTween(this.idleAnimation),this.idleAnimation=new TimelineMax,this.idleAnimation.add([TweenMax.to(this.avatar.position,2.2,{y:"+=6",ease:Power1.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(this.background.position,2.2,{y:"+=3",ease:Power1.easeInOut,repeat:-1,yoyo:!0})],Game.getRandom(-1,0)),this.idleAnimation.add([TweenMax.to(this.avatar.position,2.5,{x:"-=10",ease:Power1.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(this.background.position,2.5,{x:"-=5",ease:Power1.easeInOut,repeat:-1,yoyo:!0})],Game.getRandom(-1,0)),this.idleAnimation.add([TweenMax.to(this.scoreCard.position,1,{y:"-=7",ease:Power1.easeInOut,delay:.09,yoyo:!0,repeat:-1}),TweenMax.to(this.head.position,1,{y:"+=7",ease:Power1.easeInOut,delay:.07,yoyo:!0,repeat:-1}),TweenMax.to(this.faceShadow.position,1,{y:"+=2",ease:Power1.easeInOut,delay:.08,yoyo:!0,repeat:-1}),TweenMax.to(this.head.scale,1,{y:1.02,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.scoreCard.scale,1,{y:1.02,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.scoreCard,.7,{rotation:-.015,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.avatar.scale,1,{y:.98,ease:Power1.easeInOut,yoyo:!0,repeat:-1})],0)},t.prototype.setClothes=function(){var e=Game.coreData.getEquippedAvatarClothing("t-shirt")[0],t=Game.coreData.getEquippedAvatarClothing("hat")[0],i=Game.coreData.getEquippedAvatarClothing("accessory")[0];e&&(this.tshirtSprite=Game.displayStore.getSprite("gift-shop/clothes/"+e.id),this.tshirtHolder.addChild(this.tshirtSprite)),i&&(this.accessorySprite=Game.displayStore.getSprite("gift-shop/clothes/"+i.id),this.accessoryHolder.addChild(this.accessorySprite),this.accessoryHolder.alpha=1,this.accessoryHolder.scale=new PIXI.Point(1,1),this.accessorySprite.position.y=i.offset.y/1.2,1==i.topLayer?this.head.addChild(this.accessoryHolder):this.head.addChild(this.hatHolder)),t?(this.hatSprite=Game.displayStore.getSprite("gift-shop/clothes/"+t.id),this.hatHolder.addChild(this.hatSprite),this.hatHolder.alpha=1,this.showHatHair(!0),this.hatSprite.position.y=t.offset.y/1.3,1==t.topLayer&&this.head.addChild(this.hatHolder)):this.showHatHair(!1)},t.prototype.showHatHair=function(e){this.hairSprite&&(1==e?(TweenMax.to(this.hairSprite.getSpriteAt(0),.1,{alpha:1}),TweenMax.to(this.hairSprite.getSpriteAt(1),.1,{alpha:0})):(TweenMax.to(this.hairSprite.getSpriteAt(0),.1,{alpha:0}),TweenMax.to(this.hairSprite.getSpriteAt(1),.1,{alpha:1})))},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),t.id){case"back-button":this.game.setScene("giftShopScene",!0,[-1500,!0]),this.showSlime=!1;break;case"edit-clothes-button":this.game.setScene("photoBoothCustomiseClothesScene",!0);break;case"close-button":this.clearUserFace();break;case"edit-avatar-button":this.game.setScene("photoBoothUploadFaceScene",!0);break;case"photo-button-large":this.startPhotoTimer()}},t.prototype.startPhotoTimer=function(){this.game.ui.setUI("photobooth-timer-on"),Game.getRandom(0,1)<.33&&(this.showSlime=!0,TweenMax.delayedCall(Game.getRandom(.5,1.5),this.showSlimeAnimation,null,this)),this.timerIcon.scale.x=0,this.timerIcon.scale.y=0,this.timerIcon.position.x=866,this.timerIcon.position.y=445,this.timerNumber1.position.x=866,this.timerNumber1.position.y=270,this.timerNumber2.position.x=866,this.timerNumber2.position.y=270,this.timerNumber3.position.x=866,this.timerNumber3.position.y=270,this.timerIcon.alpha=0,this.timerNumber1.alpha=0,this.timerNumber2.alpha=0,this.timerNumber3.alpha=0,this.container.addChild(this.timerIcon),this.container.addChild(this.timerNumber1),this.container.addChild(this.timerNumber2),this.container.addChild(this.timerNumber3),this.photoTimerTimeline=this.killTween(this.photoTimerTimeline),this.photoTimerTimeline=new TimelineMax({onComplete:this.beginPrepareUserPhoto,onCompleteParams:[this]}),this.photoTimerTimeline.add([TweenMax.to(this.buttonLine1,.2,{alpha:0,ease:Sine.easeOut}),TweenMax.to(this.buttonLine2,.2,{alpha:0,ease:Sine.easeOut}),TweenMax.to(this.buttonLineDashed,.2,{alpha:0,ease:Sine.easeOut}),TweenMax.to(this.photoButtonLine,.2,{alpha:0,ease:Sine.easeOut})],0),this.photoTimerTimeline.add([TweenMax.to(this.timerIcon.scale,.5,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.timerIcon,.2,{alpha:1,ease:Sine.easeOut})],0),this.photoTimerTimeline.add([TweenMax.to(this.timerNumber3.position,.2,{y:"-=20",ease:Expo.easeOut}),TweenMax.to(this.timerNumber3,.2,{alpha:1,ease:Expo.easeOut}),TweenMax.to(this.timerNumber3,.2,{alpha:0,ease:Expo.easeIn,delay:.3}),TweenMax.to(this.timerNumber3.position,.2,{y:"-=50",ease:Expo.easeIn,delay:.3})],.5),this.photoTimerTimeline.call(this.playBeepSound,null,this,.5),this.photoTimerTimeline.add([TweenMax.to(this.timerNumber2.position,.2,{y:"-=20",ease:Expo.easeOut}),TweenMax.to(this.timerNumber2,.2,{alpha:1,ease:Expo.easeOut}),TweenMax.to(this.timerNumber2,.2,{alpha:0,ease:Expo.easeIn,delay:.3}),TweenMax.to(this.timerNumber2.position,.2,{y:"-=50",ease:Expo.easeIn,delay:.3})],1.5),this.photoTimerTimeline.call(this.playBeepSound,null,this,1.5),this.photoTimerTimeline.add([TweenMax.to(this.timerNumber1.position,.2,{y:"-=20",ease:Expo.easeOut}),TweenMax.to(this.timerNumber1,.2,{alpha:1,ease:Expo.easeOut}),TweenMax.to(this.timerNumber1,.2,{alpha:0,ease:Expo.easeIn,delay:.3}),TweenMax.to(this.timerNumber1.position,.2,{y:"-=50",ease:Expo.easeIn,delay:.3})],2.5),this.photoTimerTimeline.call(this.playBeepSound,null,this,2.5)},t.prototype.playBeepSound=function(){Game.playSound("gift-shop/camera-beep.mp3",.5)},t.prototype.showSlimeAnimation=function(){TweenMax.delayedCall(0,function(){this.slimeLeftBurst.fire(),this.slimeLeftBackBurst.fire()},null,this),TweenMax.delayedCall(.2,function(){this.slimeRightBurst.fire(),this.slimeRightBackBurst.fire()},null,this),TweenMax.delayedCall(.5,function(){this.slimeCenterBurst.fire(),this.slimeCenterBackBurst.fire()},null,this),TweenMax.delayedCall(.7,function(){this.slimeLeftSmallBurst.fire(),this.slimeLeftSmall2Burst.fire()},null,this),TweenMax.delayedCall(.9,function(){this.slimeRightSmallBurst.fire(),this.slimeRightSmall2Burst.fire()},null,this),this.slimeAnimation=this.killTween(this.slimeAnimation),this.slimeAnimation=new TimelineMax,this.slimeAnimation.add([TweenMax.to(this.characterLeftSlime,.5,{alpha:1,ease:Sine.easeInOut}),TweenMax.to(this.characterRightSlime,.5,{alpha:1,ease:Sine.easeInOut})],.5),this.slimeAnimation.add([TweenMax.to(this.avatarSlime,.5,{alpha:1,ease:Sine.easeInOut}),TweenMax.to(this.scoreCardSlime,.5,{alpha:1,ease:Sine.easeInOut})],1),this.slimeAnimation.add([TweenMax.to(this.slimeSplat1.scale,.5,{x:1.9,y:1.9,ease:Back.easeOut}),TweenMax.to(this.slimeSplat1,.5,{rotation:1,ease:Back.easeOut})],1),this.slimeAnimation.add(TweenMax.to(this.frameSlime,.5,{alpha:1,ease:Sine.easeInOut}),1.5),this.slimeAnimation.add([TweenMax.to(this.slimeSplat2.scale,.5,{x:1.9,y:1.9,ease:Back.easeOut}),TweenMax.to(this.slimeSplat2,.5,{rotation:1,ease:Back.easeOut})],1.3),this.slimeAnimation.add(TweenMax.to(this.slimeSplat1,.4,{alpha:0,ease:Sine.easeInOut}),1.5),this.slimeAnimation.add(TweenMax.to(this.slimeSplat2,.4,{alpha:0,ease:Sine.easeInOut}),1.8),this.slimeAnimation.add([TweenMax.to(this.slimeBlob1.position,1.5,{y:650,ease:Sine.easeInOut}),TweenMax.to(this.slimeBlob3.position,1.5,{y:650,ease:Sine.easeInOut})],0),this.slimeAnimation.add([TweenMax.to(this.slimeBlob2.position,1.5,{y:650,ease:Sine.easeInOut})],.5);var e=Game.getRandom(1,2,!0);1==e?(TweenMax.delayedCall(.3,function(){Game.playSound("gift-shop/goop-1.mp3",.9),Game.playSound("gift-shop/splash-1.mp3",.9)},null,this),TweenMax.delayedCall(.9,function(){Game.playSound("gift-shop/goop-2.mp3",.9),Game.playSound("gift-shop/splash-2.mp3",.9)},null,this),TweenMax.delayedCall(1.5,function(){Game.playSound("gift-shop/goop-2.mp3",.9),Game.playSound("gift-shop/splash-1.mp3",.9)},null,this)):2==e&&(TweenMax.delayedCall(.3,function(){Game.playSound("gift-shop/goop-2.mp3",.9),Game.playSound("gift-shop/splash-2.mp3",.9)},null,this),TweenMax.delayedCall(.9,function(){Game.playSound("gift-shop/goop-1.mp3",.9),Game.playSound("gift-shop/splash-1.mp3",.9)},null,this),TweenMax.delayedCall(1.5,function(){Game.playSound("gift-shop/goop-1.mp3",.9),Game.playSound("gift-shop/splash-2.mp3",.9)},null,this))},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.clearUserFace=function(){this.game.ui.setUI("photobooth-main"),this.userEditedFaceHolder.removeAllChildren(),this.blankFace.visible=!0,Game.coreData.clearUserFaceSprite(),this.setAvatarProperties(),Game.saveProgress(),this.setUIScreenState()},t.prototype.beginPrepareUserPhoto=function(e){1!=e.photoTaken&&(e.photoTaken=!0,Game.playSound("gift-shop/camera-flash.mp3",.8),Game.coreData.clearUserPhotograph(),e.flashTween=TweenMax.to(e.photoFlash,.3,{alpha:1,ease:Quad.easeIn,onComplete:e.prepareUserPhoto,onCompleteParams:[e]}),e.frameSlimeTween=TweenMax.to(e.frameSlime.scale,.1,{x:1.1,y:1.1,delay:.3,ease:Quad.easeIn,onComplete:e.prepareUserPhoto,onCompleteParams:[e]}))},t.prototype.prepareUserPhoto=function(e){var t=Game.displayStore.getRenderTexture("photo-booth/photo-texture",e.userPhotoDimensions[0],e.userPhotoDimensions[1],"gift-shop-assets",!0);e.userPhotoRenderTexture=t.renderTexture,e.userPhotoRenderSprite=t.outputSprite;e.frameCropShape.position.x=2*e.cropFrameOuterWidth/e.photoContentsZoomFactor,e.frameCropShape.position.y=2*e.cropFrameOuterWidth/e.photoContentsZoomFactor,e.photoElementsHolder.position.x=-e.photoFrameOffset[0],e.photoElementsHolder.position.y=-e.photoFrameOffset[1],e.photoElementsHolder.addChild(e.frameCropShape),Game.renderer.render(e.photoElementsHolder,e.userPhotoRenderTexture,!1),Game.renderer.render(e.photoFramePrintHolder,e.userPhotoRenderTexture,!1),e.frameCropShape.clear(),e.renderingCanvas=Game.renderer.extract.canvas(e.userPhotoRenderTexture);var i=PIXI.Texture.fromCanvas(e.renderingCanvas);Game.coreData.setUserPhotographCanvas(e.renderingCanvas),e.userPhotoEdited=new Sprite(i),e.userPhotoEdited.id="user-photo-edited",e.userPhotoEdited.group="user-photo-edited",Game.displayStore.addSprite(e.userPhotoEdited),Game.coreData.setUserPhotograph(e.userPhotoEdited),e.game.setScene("photoBoothPhotoPreview",!0),Game.playSound("gift-shop/photo-ding.mp3",.5)},t.prototype.tick=function(){e.prototype.tick.call(this)},t.prototype.keyDown=function(e){},t.prototype.keyUp=function(e){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),Game.stopSound("gift-shop/camera-flash.mp3"),Game.stopSound("gift-shop/photo-ding.mp3"),Game.stopSound("gift-shop/goop-1.mp3"),Game.stopSound("gift-shop/goop-2.mp3"),Game.stopSound("gift-shop/splash-1.mp3"),Game.stopSound("gift-shop/splash-2.mp3"),Game.stopSound("gift-shop/spongebob-hungry.mp3"),Game.stopSound("gift-shop/patrick-ketchup.mp3"),Game.stopSound("gift-shop/spongebob-mustard.mp3"),Game.stopSound("gift-shop/patrick-laughing.mp3"),Game.stopSound("gift-shop/max-enemies.mp3"),Game.stopSound("gift-shop/phoebe-woop.mp3"),Game.stopSound("gift-shop/henry-lets-go.mp3"),Game.stopSound("gift-shop/captain-fun.mp3"),Game.stopSound("gift-shop/babe-here-i-come.mp3"),Game.stopSound("gift-shop/babe-woo.mp3"),Game.stopSound("gift-shop/triple-selfie.mp3"),Game.stopSound("gift-shop/triple-yeyahh.mp3"),Game.stopSound("gift-shop/tomika-ready.mp3"),Game.stopSound("gift-shop/tomika-nothings-gonna-stop-us-now.mp3"),Game.stopSound("gift-shop/zack-school-of-rock.mp3"),Game.stopSound("gift-shop/linc-its-go-time.mp3"),Game.stopSound("gift-shop/linc-yes.mp3"),Game.stopSound("gift-shop/luna-negative-2.mp3"),Game.stopSound("gift-shop/raph-amazing.mp3"),Game.stopSound("gift-shop/raph-enough-talk.mp3"),Game.stopSound("gift-shop/leo-celebrate.mp3"),Game.stopSound("gift-shop/leo-hooowho.mp3"),Game.stopSound("gift-shop/nicky-drumroll.mp3"),Game.stopSound("gift-shop/nicky-make-it-snappy.mp3"),Game.stopSound("gift-shop/dawn-leave-it-to-me.mp3"),Game.stopSound("gift-shop/dawn-ooo.mp3"),this.introAnimation=this.killTween(this.introAnimation),this.idleAnimation=this.killTween(this.idleAnimation),this.flashTween=this.killTween(this.flashTween),this.frameSlimeTween=this.killTween(this.frameSlimeTween),this.slimeAnimation=this.killTween(this.slimeAnimation),this.photoTimerTimeline=this.killTween(this.photoTimerTimeline),this.tshirtSprite&&(Game.displayStore.returnPooledItem(this.tshirtSprite),this.tshirtHolder.removeChild(this.tshirtSprite),this.tshirtSprite=null),this.hatSprite&&(Game.displayStore.returnPooledItem(this.hatSprite),this.hatHolder.removeChild(this.hatSprite),this.hatSprite=null),this.accessorySprite&&(Game.displayStore.returnPooledItem(this.accessorySprite),this.accessoryHolder.removeChild(this.accessorySprite),this.accessorySprite=null),this.charactersHolder.removeChild(this.characters),Game.displayStore.returnPooledItem(this.buttonLine1),Game.displayStore.returnPooledItem(this.buttonLine2),Game.displayStore.returnPooledItem(this.photoFrameLeft),Game.displayStore.returnPooledItem(this.photoFrameRight),Game.displayStore.returnPooledItem(this.photoFrameTop),Game.displayStore.returnPooledItem(this.photoFrameBottom),Game.displayStore.returnPooledItem(this.photoFrameFillLeft),Game.displayStore.returnPooledItem(this.photoFrameFillTop),Game.displayStore.returnPooledItem(this.photoFrameFillBottom),Game.displayStore.returnPooledItem(this.photoFrameFillRight),Game.displayStore.returnPooledItem(this.photoFramePrintBorderTop),Game.displayStore.returnPooledItem(this.photoFramePrintBorderRight),Game.displayStore.returnPooledItem(this.photoFramePrintBorderLeft),Game.displayStore.returnPooledItem(this.photoFramePrintBorderBottom),Game.displayStore.returnPooledItem(this.photoFramePrintBorderShadowTop),Game.displayStore.returnPooledItem(this.photoFramePrintBorderShadowLeft),Game.displayStore.returnPooledItem(this.photoFramePrintBorderShadowBottom),Game.displayStore.returnPooledItem(this.photoFramePrintBorderShadowRight),Game.displayStore.returnPooledItem(this.slimeBlob1),Game.displayStore.returnPooledItem(this.slimeBlob2),Game.displayStore.returnPooledItem(this.slimeBlob3),this.slimeCenterBurst.destroy(),this.slimeRightBurst.destroy(),this.slimeLeftBurst.destroy(),this.slimeCenterBackBurst.destroy(),this.slimeRightBackBurst.destroy(),this.slimeLeftBackBurst.destroy(),this.slimeRightSmallBurst.destroy(),this.slimeLeftSmallBurst.destroy(),this.slimeRightSmall2Burst.destroy(),this.slimeLeftSmall2Burst.destroy()},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),PhotoBoothShareScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="photoBoothShareScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.setBackgroundColor(13421772),this.game.ui.setUI("final-photo")},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),t.id){case"playbuttonlarge":this.game.setScene("hubScene",!1)}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){e.prototype.tick.call(this)},t.prototype.keyDown=function(e){},t.prototype.keyUp=function(e){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),PhotoBoothShareLinkScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="photoBoothShareLinkScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),console.log(this.id),this.setBackgroundColor(13421772),this.game.ui.setUI("external-link")},t.prototype.uiClicked=function(t){e.prototype.uiClicked.call(this,t)},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){e.prototype.tick.call(this)},t.prototype.keyDown=function(e){},t.prototype.keyUp=function(e){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),PhotoBoothFunnelFormScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="photoBoothFunnelFormScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.setBackgroundColor(13421772),this.game.ui.setUI("accept-form")},t.prototype.uiClicked=function(t){e.prototype.uiClicked.call(this,t)},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){e.prototype.tick.call(this)},t.prototype.keyDown=function(e){},t.prototype.keyUp=function(e){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),PhotoBoothUploadFaceScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="photoBoothUploadFaceScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.setBackgroundColor(3228766),this.game.ui.setUI("upload-photo"),this.frameAlpha=.85,this.bg1=Game.displayStore.getSprite("gift-shop/bg-half"),this.bg2=Game.displayStore.getSprite("gift-shop/bg-half"),this.bg1.position.x=Game.stageWidth/2,this.bg2.position.x=Game.stageWidth/2,this.bg2.scale.x=-1,this.bg1.tint=8229547,this.bg2.tint=8229547,this.shapeFrameTopLeft=Game.displayStore.getSprite("gift-shop/upload-frame-shape"),this.shapeFrameTopRight=Game.displayStore.getSprite("gift-shop/upload-frame-shape"),this.shapeFrameBottomLeft=Game.displayStore.getSprite("gift-shop/upload-frame-shape"),this.shapeFrameBottomRight=Game.displayStore.getSprite("gift-shop/upload-frame-shape"),this.frameCornerDimensions=[this.shapeFrameTopLeft.width,this.shapeFrameTopLeft.height],this.shapeFrameTopLeft.position.x=Game.stageWidth/2-this.frameCornerDimensions[0],this.shapeFrameTopLeft.position.y=Game.stageHeight/2-this.frameCornerDimensions[1],this.shapeFrameTopRight.scale.x=-1,this.shapeFrameTopRight.position.x=Game.stageWidth/2+this.frameCornerDimensions[0],this.shapeFrameTopRight.position.y=Game.stageHeight/2-this.frameCornerDimensions[1],this.shapeFrameBottomLeft.scale.y=-1,this.shapeFrameBottomLeft.position.x=Game.stageWidth/2-this.frameCornerDimensions[0],this.shapeFrameBottomLeft.position.y=Game.stageHeight/2+this.frameCornerDimensions[1],this.shapeFrameBottomRight.scale.x=-1,this.shapeFrameBottomRight.scale.y=-1,this.shapeFrameBottomRight.position.x=Game.stageWidth/2+this.frameCornerDimensions[0],this.shapeFrameBottomRight.position.y=Game.stageHeight/2+this.frameCornerDimensions[1],this.shapeFrameFillLeft=Game.displayStore.getSprite("gift-shop/upload-frame-fill"),this.shapeFrameFillRight=Game.displayStore.getSprite("gift-shop/upload-frame-fill"),this.shapeFrameFillLeft.width=Game.stageWidth/2-this.frameCornerDimensions[0],this.shapeFrameFillLeft.height=Game.stageHeight,this.shapeFrameFillRight.width=Game.stageWidth/2-this.frameCornerDimensions[0],this.shapeFrameFillRight.height=Game.stageHeight,this.shapeFrameFillRight.position.x=Game.stageWidth/2+this.frameCornerDimensions[0],this.shapeTopLeft=Game.displayStore.getSprite("gift-shop/upload-shape"),this.shapeTopRight=Game.displayStore.getSprite("gift-shop/upload-shape"),this.shapeBottomLeft=Game.displayStore.getSprite("gift-shop/upload-shape"),this.shapeBottomRight=Game.displayStore.getSprite("gift-shop/upload-shape"),this.shapeCornerDimensions=[this.shapeTopLeft.width,this.shapeTopLeft.height],this.shapeTopLeft.position.x=Game.stageWidth/2-this.shapeCornerDimensions[0],this.shapeTopLeft.position.y=Game.stageHeight/2-this.shapeCornerDimensions[1],this.shapeTopRight.scale.x=-1,this.shapeTopRight.position.x=Game.stageWidth/2+this.shapeCornerDimensions[0],this.shapeTopRight.position.y=Game.stageHeight/2-this.shapeCornerDimensions[1],this.shapeBottomLeft.scale.y=-1,this.shapeBottomLeft.position.x=Game.stageWidth/2-this.shapeCornerDimensions[0],this.shapeBottomLeft.position.y=Game.stageHeight/2+this.shapeCornerDimensions[1],this.shapeBottomRight.scale.x=-1,this.shapeBottomRight.scale.y=-1,this.shapeBottomRight.position.x=Game.stageWidth/2+this.shapeCornerDimensions[0],this.shapeBottomRight.position.y=Game.stageHeight/2+this.shapeCornerDimensions[1],this.shapeTopLeft.alpha=this.frameAlpha,this.shapeTopRight.alpha=this.frameAlpha,this.shapeBottomLeft.alpha=this.frameAlpha,this.shapeBottomRight.alpha=this.frameAlpha,this.shapeFrameTopLeft.alpha=this.frameAlpha,this.shapeFrameTopRight.alpha=this.frameAlpha,this.shapeFrameBottomLeft.alpha=this.frameAlpha,this.shapeFrameBottomRight.alpha=this.frameAlpha,this.shapeFrameFillLeft.alpha=this.frameAlpha,this.shapeFrameFillRight.alpha=this.frameAlpha,this.container.addChild(this.bg1),this.container.addChild(this.bg2),this.container.addChild(this.shapeTopLeft),this.container.addChild(this.shapeTopRight),this.container.addChild(this.shapeBottomLeft),this.container.addChild(this.shapeBottomRight),this.container.addChild(this.shapeFrameTopLeft),this.container.addChild(this.shapeFrameTopRight),this.container.addChild(this.shapeFrameBottomLeft),this.container.addChild(this.shapeFrameBottomRight),this.container.addChild(this.shapeFrameFillLeft),this.container.addChild(this.shapeFrameFillRight),this.eyeLineText=Game.displayStore.getBitmapText("gift-shop/photo-booth/eye-line-font"),Game.stringsManager.setTextString(this.eyeLineText,"eye-line"),this.eyeLineText.position.x=Game.stageWidth/2-this.eyeLineText.width/2+Game.stringsManager.getTextOffset("eye-line").xOffset,this.eyeLineText.position.y=200+Game.stringsManager.getTextOffset("eye-line").yOffset,this.eyeLineText.tint=16734722,this.container.addChild(this.eyeLineText),this.userWarningText=Game.displayStore.getBitmapText("gift-shop/photo-booth/user-photo-warning"),Game.stringsManager.setTextString(this.userWarningText,"user-photo-warning"),this.userWarningText.position.x=20+Game.stringsManager.getTextOffset("user-photo-warning").xOffset,this.userWarningText.position.y=Game.stageHeight-this.userWarningText.height-20+Game.stringsManager.getTextOffset("user-photo-warning").yOffset,this.userWarningText.tint=16777215,this.container.addChild(this.userWarningText),this.eyeLineGuide=Game.displayStore.getSprite("gift-shop/eye-line-guide"),this.uploadIcon=Game.displayStore.getSprite("gift-shop/upload-icon"),this.uploadMessage=Game.displayStore.getSprite("gift-shop/upload-message"),this.eyeLineGuide.position.x=Game.stageWidth/2,this.eyeLineGuide.position.y=280,this.uploadIcon.position.x=330,this.uploadIcon.position.y=440,this.uploadMessage.position.x=20,this.uploadMessage.position.y=Game.stageHeight-20,this.container.addChild(this.eyeLineGuide),this.container.addChild(this.uploadIcon),this.activateInputField(this,!0),this.game.fileInputDiv.innerHTML="";var i='<input type="file" id= "imageLoader" name= "imageLoader" style= "width:100%" class="upload" type= "file" accept= "image/*" capture doc= "house" name= "files[]" data-url="/api/upload/detail"><i class="fa fa-camera"></i>'+Game.stringsManager.getStringTextContent("user-photo-upload")+"</input>";this.game.fileInputDiv.innerHTML=i,this.imageLoader=document.getElementById("imageLoader");var s=this;this.changeEvent=function(e){s.handleUserImage(e,s)},this.imageLoader.addEventListener("change",this.changeEvent,!1)},t.prototype.activateInputField=function(e,t){1==t?e.game.uploadFaceDiv.className="active":0==t&&e.game.uploadFaceDiv.removeAttribute("class")},t.prototype.handleUserImage=function(e,t){var i=new FileReader;i.onload=function(e){var i=new Image;i.onload=function(){},i.src=e.target.result;var s=new PIXI.BaseTexture(i),o=new PIXI.Texture(s);t.userImageUnedited=new Sprite(o),t.userImageUnedited.id="user-image-unedited",t.userImageUnedited.group="user-image-unedited",Game.displayStore.addSprite(t.userImageUnedited),t.activateInputField(t,!1),t.game.setScene("photoBoothEditFaceScene",!1)},i.readAsDataURL(e.target.files[0])},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),t.id){case"playbuttonlarge":this.game.setScene("hubScene",!1);break;case"back-button":this.activateInputField(this,!1),Game.coreData.clearUserFaceSprite(),this.game.setScene("photoBoothMainScene",!1)}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){e.prototype.tick.call(this)},t.prototype.keyDown=function(e){},t.prototype.keyUp=function(e){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),Game.displayStore.returnPooledItem(this.shapeTopLeft),Game.displayStore.returnPooledItem(this.shapeTopRight),Game.displayStore.returnPooledItem(this.shapeBottomLeft),Game.displayStore.returnPooledItem(this.shapeBottomRight),Game.displayStore.returnPooledItem(this.shapeFrameTopLeft),Game.displayStore.returnPooledItem(this.shapeFrameTopRight),Game.displayStore.returnPooledItem(this.shapeFrameBottomLeft),Game.displayStore.returnPooledItem(this.shapeFrameBottomRight),Game.displayStore.returnPooledItem(this.shapeFrameFillLeft),Game.displayStore.returnPooledItem(this.shapeFrameFillRight),Game.displayStore.returnPooledItem(this.bg1),Game.displayStore.returnPooledItem(this.bg2)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),PhotoBoothPhotoPreview=function(e){function t(t){var i=e.call(this,t)||this;return i.id="photoBoothPhotoPreview",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.setBackgroundColor(3228766),this.starSpinSpeed=.025,this.cropFrameOuterWidth=4,this.photoXPos=400,this.game.ui.setUI("final-photo-pre-successful-save"),this.photoPreviewHolder=Game.displayStore.getContainer("gift-shop/user-photo-preview-holder"),this.photoPreviewHolder.position.x=this.photoXPos,this.photoPreviewHolder.position.y=Game.stageHeight/2,this.userPhotoRef=Game.coreData.getUserPhotograph(),this.userPhotoRef.setRegPoint(.5,.5),this.photoPreviewHolder.addChild(this.userPhotoRef),this.photoPreviewHolder.scale.x=4,this.photoPreviewHolder.scale.y=4,this.photoPreviewHolder.rotation=Game.getRandom(2,1),this.shadowOffset=30,this.shadowEndAlpha=.6,this.pinShadow=!0,this.bg1=Game.displayStore.getSprite("gift-shop/bg-half"),this.bg2=Game.displayStore.getSprite("gift-shop/bg-half"),this.bg1.position.x=Game.stageWidth/2,this.bg2.position.x=Game.stageWidth/2,this.bg2.scale.x=-1,this.bg1.tint=3953519,this.bg2.tint=3953519,this.bg1.position.y=650,this.bg2.position.y=650,this.uiPanelBG1=Game.displayStore.getSprite("gift-shop/photo-booth/photo-preview-bg-panel"),this.uiPanelBG2=Game.displayStore.getSprite("gift-shop/photo-booth/photo-preview-bg-panel"),this.uiPanelBG1.position.x=Game.stageWidth,this.uiPanelBG1.position.y=288,this.uiPanelBG2.position.x=Game.stageWidth,this.uiPanelBG2.position.y=483,this.uiPanelBG1.scale.x=1.5,this.uiPanelBG2.scale.x=1.5,this.spinningStarElement=Game.displayStore.getSprite("gift-shop/photo-booth/photo-preview-star"),this.spinningStarElement.position.x=this.photoXPos,this.spinningStarElement.position.y=Game.stageHeight/2,this.spinningStarElement.scale.x=4,this.spinningStarElement.scale.y=4,this.spinningStarElement.alpha=.5,this.previewFlashOverlay=Game.displayStore.getSprite("gift-shop/photo-booth/photo-preview-overlay"),this.previewFlashOverlay.width=Game.stageWidth,this.previewFlashOverlay.height=Game.stageHeight,this.previewFlashOverlay.alpha=1,this.previewFlashOverlay.blendMode=PIXI.BLEND_MODES.ADD,this.photoDevelopOverlay=Game.displayStore.getSprite("gift-shop/photo-booth/photo-preview-overlay"),this.photoPreviewHolder.addChild(this.photoDevelopOverlay),this.photoDevelopOverlay.width=this.userPhotoRef.width-2*this.cropFrameOuterWidth,this.photoDevelopOverlay.height=this.userPhotoRef.height-2*this.cropFrameOuterWidth,this.photoDevelopOverlay.alpha=1,this.photoDevelopOverlay.blendMode=PIXI.BLEND_MODES.SCREEN,this.photoDevelopOverlay.setRegPoint(.5,.5),this.photoShadowHolder=Game.displayStore.getContainer("gift-shop/user-photo-shadow-holder"),this.photoShadow=Game.displayStore.getSprite("gift-shop/photo-booth/photo-preview-shadow"),this.photoShadow.width=this.userPhotoRef.width,this.photoShadow.height=this.userPhotoRef.height,this.photoShadow.alpha=.4,this.photoShadow.setRegPoint(.5,.5),this.photoShadowHolder.addChild(this.photoShadow),this.textImageSharePrompt=Game.displayStore.getBitmapText("gift-shop/image-submit-font"),Game.stringsManager.setTextString(this.textImageSharePrompt,"user-photo-share-gallery"),this.textImageSharePrompt.position.x=Game.stageWidth-30-this.textImageSharePrompt.width+Game.stringsManager.getTextOffset("user-photo-share-gallery").xOffset,this.textImageSharePrompt.position.y=275+Game.stringsManager.getTextOffset("user-photo-share-gallery").yOffset,this.textImageSharePrompt.tint=16777215,this.textImageDownloadPrompt=Game.displayStore.getBitmapText("gift-shop/image-download-font"),Game.stringsManager.setTextString(this.textImageDownloadPrompt,"user-photo-download"),this.textImageDownloadPrompt.position.x=Game.stageWidth-30-this.textImageDownloadPrompt.width+Game.stringsManager.getTextOffset("user-photo-download").xOffset,this.textImageDownloadPrompt.position.y=470+Game.stringsManager.getTextOffset("user-photo-download").yOffset,this.textImageDownloadPrompt.tint=16777215,this.container.addChild(this.bg1),this.container.addChild(this.bg2),this.container.addChild(this.spinningStarElement),this.container.addChild(this.photoShadowHolder),this.container.addChild(this.photoPreviewHolder),this.animation=this.killTween(this.animation),this.animation=new TimelineMax({delay:0,onComplete:this.endPinShadow,onCompleteParams:[this]}),this.animation.add([TweenMax.to(this.photoDevelopOverlay,3,{alpha:0,delay:.5,ease:Sine.easeOut}),TweenMax.to(this.photoPreviewHolder.scale,1,{x:.95,y:.95,ease:Expo.easeOut}),TweenMax.to(this.photoPreviewHolder,1,{rotation:0,ease:Expo.easeOut})]),this.game.backEndAPI.saveUserPhoto()},t.prototype.endPinShadow=function(e){e.pinShadow=!1},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),t.id){case"back-button":this.game.setScene("photoBoothMainScene",!0);break;case"share-button":this.game.setScene("photoBoothConfirmLegalScene",!1);break;case"download-button":this.game.setScene("photoBoothSubmitConfirmedScene",!0,["download"]),this.game.backEndAPI.downloadUserPhoto()}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.photoSubmitSuccess=function(){this.game.ui.setUI("final-photo"),this.container.addChild(this.uiPanelBG1),this.container.addChild(this.uiPanelBG2),this.container.addChild(this.textImageSharePrompt),this.container.addChild(this.textImageDownloadPrompt),this.uiFadeInTimeline=this.killTween(this.uiFadeInTimeline),this.uiFadeInTimeline=new TimelineMax,this.uiPanelBG1.alpha=0,this.uiPanelBG2.alpha=0,this.textImageSharePrompt.alpha=0,this.textImageDownloadPrompt.alpha=0,this.uiFadeInTimeline.add([TweenMax.to(this.uiPanelBG1,.5,{alpha:1,ease:Sine.easeOut}),TweenMax.to(this.uiPanelBG2,.5,{alpha:1,ease:Sine.easeOut}),TweenMax.to(this.textImageSharePrompt,.5,{alpha:1,ease:Sine.easeOut}),TweenMax.to(this.textImageDownloadPrompt,.5,{alpha:1,ease:Sine.easeOut})])},t.prototype.tick=function(){if(e.prototype.tick.call(this),this.spinningStarElement.rotation+=this.starSpinSpeed,0!=this.pinShadow){var t=this.photoPreviewHolder.scale.x;this.photoShadowHolder.scale.x=t,this.photoShadowHolder.scale.y=t,this.photoShadowHolder.rotation=this.photoPreviewHolder.rotation,this.photoShadowHolder.position.x=this.photoPreviewHolder.position.x-this.shadowOffset*t,this.photoShadowHolder.position.y=this.photoPreviewHolder.position.y+this.shadowOffset*t;var i=1-(1-this.shadowEndAlpha)*t;this.photoShadowHolder.alpha=i}},t.prototype.keyDown=function(e){},t.prototype.keyUp=function(e){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.animation=this.killTween(this.animation),this.uiFadeInTimeline=this.killTween(this.uiFadeInTimeline),Game.displayStore.returnPooledItem(this.previewFlashOverlay),Game.displayStore.returnPooledItem(this.photoDevelopOverlay),Game.displayStore.returnPooledItem(this.bg1),Game.displayStore.returnPooledItem(this.bg2),Game.displayStore.returnPooledItem(this.uiPanelBG1),Game.displayStore.returnPooledItem(this.uiPanelBG2)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),PhotoBoothConfirmLegal=function(e){function t(t){var i=e.call(this,t)||this;return i.id="photoBoothConfirmLegalScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.setBackgroundColor(3228766),this.game.ui.setUI("upload-photo-confirm-legal"),this.bg1=Game.displayStore.getSprite("gift-shop/bg-half"),this.bg2=Game.displayStore.getSprite("gift-shop/bg-half"),this.bg1.position.x=Game.stageWidth/2,this.bg2.position.x=Game.stageWidth/2,this.bg2.scale.x=-1,this.bg1.tint=3953519,this.bg2.tint=3953519,this.bg1.position.y=650,this.bg2.position.y=650,this.container.addChild(this.bg1),this.container.addChild(this.bg2),this.activateFunnelForm(this,!0)},t.prototype.activateFunnelForm=function(e,t){if(1==t)this.game.parentalApprovalDiv.className="active",this.game.nickFormDiv.style.display="block";else if(0==t)return this.game.parentalApprovalDiv.removeAttribute("class"),void(this.game.nickFormDiv.style.display="none");var i=Game.stringsManager.getStringTextContent("parental-permission-title"),s=Game.stringsManager.getStringTextContent("parental-permission-text");document.getElementById("nick-form-title").innerHTML="<h2>"+i+"</h2><p>"+s+"</p>";var o,a=document.getElementById("form-user-submit"),r=document.getElementById("form-user-age-consent"),n=document.getElementById("form-user-parental-consent"),h=document.getElementById("form-user-name"),e=this,l=!1;a.addEventListener("click",function(t){o=h.value,Game.coreData.setUserName(o),Game.coreData.setAgeConsent(r.checked),Game.coreData.setParentalConsent(n.checked),1==r.checked&&1==n.checked&&(l=!0),e.submitPhotoWithFunnelSubmit(e,l)},!1)},t.prototype.stringReplace=function(e,t,i){var s=new RegExp(this.escapeRegExp(t),"g");return e.replace(s,i)},t.prototype.escapeRegExp=function(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),t.id){case"back-button":this.activateFunnelForm(this,!1),this.game.setScene("photoBoothMainScene",!1)}},t.prototype.submitPhotoWithFunnelSubmit=function(e,t){e.activateFunnelForm(e,!1),e.game.setScene("photoBoothSubmitConfirmedScene",!0,["submitting",t])},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){e.prototype.tick.call(this)},t.prototype.keyDown=function(e){},t.prototype.keyUp=function(e){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),Game.displayStore.returnPooledItem(this.bg1),Game.displayStore.returnPooledItem(this.bg2)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),PhotoBoothSubmitConfirmed=function(e){function t(t){var i=e.call(this,t)||this;return i.id="photoBoothSubmitConfirmedScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.downloadMode=!1,this.legalApproved=!1,this.sharingMode=!1,t[0]&&("download"==t[0]?this.downloadMode=!0:"submitting"==t[0]&&(this.sharingMode=!0)),this.consentAttained=!1,t[1]&&(this.consentAttained=t[1]),this.setBackgroundColor(3228766),this.game.ui.setUI("photobooth-submitting"),this.bg1=Game.displayStore.getSprite("gift-shop/bg-half"),this.bg2=Game.displayStore.getSprite("gift-shop/bg-half"),this.bg1.position.x=Game.stageWidth/2,this.bg2.position.x=Game.stageWidth/2,this.bg2.scale.x=-1,this.bg1.tint=3953519,this.bg2.tint=3953519,this.bg1.position.y=650,this.bg2.position.y=650,this.container.addChild(this.bg1),this.container.addChild(this.bg2),this.promptHolder=Game.displayStore.getContainer("gift-shop/photo-booth/text-prompt-holder"),this.promptHolder.position.x=Game.stageWidth/2,this.promptHolder.position.y=75,this.circleAnim=Game.displayStore.getSprite("gift-shop/photo-booth/photo-submitting-circle"),this.circleAnim.position.x=Game.stageWidth/2,this.circleAnim.position.y=Game.stageHeight/2,this.circleAnim.rotation=0,this.circleAnim.visible=!0,this.circleAnim.alpha=1,this.thumbsUp=Game.displayStore.getSprite("gift-shop/photo-booth/photo-submitting-thumbs-up"),this.textDownloadingPrompt=Game.displayStore.getBitmapText("gift-shop/photo-booth/submitting-text-downloading"),Game.stringsManager.setTextString(this.textDownloadingPrompt,"user-photo-result-downloading"),this.textDownloadingPrompt.position.x=0-this.textDownloadingPrompt.width/2+Game.stringsManager.getTextOffset("user-photo-result-downloading").xOffset,this.textDownloadingPrompt.position.y=0-this.textDownloadingPrompt.height/2+Game.stringsManager.getTextOffset("user-photo-result-downloading").yOffset,this.textDownloadingPrompt.tint=16734722,this.textSubmittedPrompt=Game.displayStore.getBitmapText("gift-shop/photo-booth/submitting-text-submitted"),Game.stringsManager.setTextString(this.textSubmittedPrompt,"user-photo-result-submitted"),this.textSubmittedPrompt.position.x=0-this.textSubmittedPrompt.width/2+Game.stringsManager.getTextOffset("user-photo-result-submitted").xOffset,this.textSubmittedPrompt.position.y=0-this.textSubmittedPrompt.height/2+Game.stringsManager.getTextOffset("user-photo-result-submitted").yOffset,this.textSubmittedPrompt.tint=16734722,this.textDownloadedDescription=Game.displayStore.getBitmapText("gift-shop/photo-booth/submitting-text-downloaded-description"),Game.stringsManager.setTextString(this.textDownloadedDescription,"user-photo-downloading-description"),this.textDownloadedDescription.position.x=0-this.textDownloadedDescription.width/2+Game.stringsManager.getTextOffset("user-photo-downloading-description").xOffset,this.textDownloadedDescription.position.y=140-this.textDownloadedDescription.height/2+Game.stringsManager.getTextOffset("user-photo-downloading-description").yOffset,this.textDownloadedDescription.align="center",this.textDownloadedDescription.tint=16777215,this.textSubmittedDescription=Game.displayStore.getBitmapText("gift-shop/photo-booth/submitting-text-submitted-description"),Game.stringsManager.setTextString(this.textSubmittedDescription,"user-photo-submitted-description"),this.textSubmittedDescription.position.x=0-this.textSubmittedDescription.width/2+Game.stringsManager.getTextOffset("user-photo-submitted-description").xOffset,this.textSubmittedDescription.position.y=140-this.textSubmittedDescription.height/2+Game.stringsManager.getTextOffset("user-photo-submitted-description").yOffset,this.textSubmittedDescription.align="center",this.textSubmittedDescription.tint=16777215,this.textDownloadingPrompt.alpha=0,this.textSubmittedPrompt.alpha=0,this.textSubmittedDescription.alpha=0,this.textDownloadedDescription.alpha=0,this.thumbsUp.scale.x=.8,this.thumbsUp.scale.y=.8,this.thumbsUp.position.x=Game.stageWidth/2,this.thumbsUp.position.y=Game.stageHeight,this.container.addChild(this.circleAnim),this.promptHolder.addChild(this.textSubmittedPrompt),this.promptHolder.addChild(this.textDownloadingPrompt),this.promptHolder.addChild(this.textDownloadedDescription),this.promptHolder.addChild(this.textSubmittedDescription),this.container.addChild(this.promptHolder),this.container.addChild(this.thumbsUp),1==this.downloadMode&&this.downloading(),1==this.sharingMode&&this.sharing()},t.prototype.photoGallerySubmitResult=function(e){this.animatePrompt("submitting")},t.prototype.sharing=function(){1==this.consentAttained?this.game.backEndAPI.submitUserPhotoToGallery():0==this.consentAttained&&this.animatePrompt("submitting-failed")},t.prototype.downloading=function(){this.animatePrompt("downloading")},t.prototype.animatePrompt=function(e){this.promptHolder.scale.x=.5,this.promptHolder.scale.y=.5;var t,i=!0;switch(this.animation=this.killTween(this.animation),this.animation=new TimelineMax,e){case"submitting-failed":i=!1,t=this.textSubmittedPrompt;break;case"submitting":t=this.textSubmittedPrompt,this.textSubmittedDescription;break;case"downloading":t=this.textDownloadingPrompt,this.textDownloadedDescription}this.animation.add([TweenMax.to(this.circleAnim,.25,{alpha:0}),TweenMax.to(t,.25,{alpha:1,ease:Sine.easeOut}),TweenMax.to(this.promptHolder.scale,.75,{x:1,y:1,ease:Bounce.easeOut})],.5),1==i&&this.animation.add([TweenMax.to(this.thumbsUp.position,2,{y:300,ease:Elastic.easeOut,delay:.5})],.5)},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),t.id){case"back-button":this.game.setScene("photoBoothMainScene",!0)}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){e.prototype.tick.call(this),this.circleAnim.rotation+=.05},t.prototype.keyDown=function(e){},t.prototype.keyUp=function(e){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.animation=this.killTween(this.animation),Game.displayStore.returnPooledItem(this.bg1),Game.displayStore.returnPooledItem(this.bg2)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),ClawGameGameplayScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="clawGameGameplayScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.dialogueIsOpen=!1,this.bg=Game.displayStore.getSprite("claw/bg-"+Game.coreData.getCurrentRide().island+".png"),this.bg.position.y=-10,this.bg.scale.x=this.bg.scale.y=1.1,this.particlesHolder=Game.displayStore.getContainer("claw/particles-holder"),this.dummyBallsHolder=Game.displayStore.getContainer("claw/dummy-balls-holder"),this.dialogue=Game.displayStore.getContainer("gift-shop/wristband-store/dialogue");var i=this.dialogue.getSprite("gift-shop/wristband-store/black.png");i.width=Game.stageWidth,i.height=Game.stageHeight,i.alpha=.6,this.dialogue.alpha=0,this.dialoguePanel=this.dialogue.getContainer("gift-shop/wristband-store/dialogue-panel"),this.dialoguePanel.scale.x=this.dialoguePanel.scale.y=0,this.sparkleHolder=this.dialoguePanel.getContainer("gift-shop/wristband-store/sparkle"),this.dialogueText=Game.displayStore.getBitmapText("gift-shop-dialogue-text"),Game.stringsManager.setTextString(this.dialogueText,"claw-game-welcome"),this.dialogueText.scale.x=this.dialogueText.scale.y*=.9,this.dialogueText.position.x=-240+Game.stringsManager.getTextOffset("claw-game-welcome").xOffset,this.dialogueText.position.y=-175+Game.stringsManager.getTextOffset("claw-game-welcome").yOffset,this.dialoguePanel.addChild(this.dialogueText),this.dialogueDescriptionText=Game.displayStore.getBitmapText("gift-shop-dialogue-description-text"),this.dialogueDescriptionText.position.x=-100+Game.stringsManager.getTextOffset("claw-game-pay-to-play").xOffset,this.dialogueDescriptionText.position.y=-50+Game.stringsManager.getTextOffset("claw-game-pay-to-play").xOffset,Game.stringsManager.setTextString(this.dialogueDescriptionText,"claw-game-pay-to-play"),this.dialogueDescriptionText.scale.x=this.dialogueDescriptionText.scale.y*=.65,this.dialogueDescriptionText.tint=3194604,this.dialoguePanel.addChild(this.dialogueDescriptionText),this.dialoguePriceText=Game.displayStore.getBitmapText("gift-shop-price-text"),this.dialoguePriceText.position.x=-47,this.dialoguePriceText.position.y=30,this.dialoguePriceText.scale.x=this.dialoguePriceText.scale.y=1,this.dialoguePriceText.text="-3",this.dialoguePanel.addChild(this.dialoguePriceText),this.ticketIcon=this.dialoguePanel.getSprite("gift-shop/clothes-store/ticket-icon.png"),this.ticketIcon.position.x=40,this.ticketIcon.position.y=80,this.alert=Game.displayStore.getContainer("gift-shop/wristband-store/alert");var s=this.alert.getSprite("gift-shop/wristband-store/black.png");s.width=Game.stageWidth,s.height=Game.stageHeight,s.alpha=.6,this.alert.alpha=0,this.alertPanel=this.alert.getContainer("gift-shop/wristband-store/alert-panel"),this.alertPanel.scale.x=this.alertPanel.scale.y=0,this.alertText=Game.displayStore.getBitmapText("gift-shop-alert-text"),this.alertText.position.x=0,this.alertText.position.y=-40,this.alertText.scale.x=this.alertText.scale.y=.8,this.alertPanel.addChild(this.alertText),this.ballPool=[],this.balls=[],this.game.ui.setUI("gameplay-claw"),this.backGlass=Game.displayStore.getSprite("claw/back-glass.png"),this.floorBallsBack=Game.displayStore.getSprite("claw/floor-balls-back.png"),this.floorBallsFront=Game.displayStore.getSprite("claw/floor-balls-front.png"),this.frontGlass=Game.displayStore.getSprite("claw/front-glass.png"),this.pit=Game.displayStore.getSprite("claw/pit.png"),this.bang=Game.displayStore.getSprite("claw/bang.png"),this.bang.blendMode=PIXI.BLEND_MODES.ADD,this.bang.alpha=0,this.pitFront=Game.displayStore.getSprite("claw/pit-front.png"),this.controlPanel=Game.displayStore.getContainer("claw/control-panel"),this.button=this.controlPanel.getContainer("claw/button"),this.buttonBright=this.button.getSprite("claw/button-bright.png"),this.joystick=this.controlPanel.getContainer("claw/joystick"),this.joystickHead=this.joystick.getSprite("claw/joystick-head.png"),this.splat=this.controlPanel.getSprite("claw/splat.png"),this.splat.blendMode=PIXI.BLEND_MODES.ADD,this.splat.scale.x=this.splat.scale.y=0,this.buttonBright.alpha=0,this.joystickHead.alpha=0,this.mainHolder=Game.displayStore.getContainer("claw/main-holder"),this.clawBody=Game.displayStore.getSprite("claw/claw-body.png"),this.clawCord=Game.displayStore.getSprite("claw/drop-cord.png"),this.clawTracker=Game.displayStore.getSprite("claw/tracker.png"),this.clawPlunger=Game.displayStore.getSprite("claw/claw-plunger.png"),this.armLeft=Game.displayStore.getSprite("claw/claw-arm-left.png"),this.armRight=Game.displayStore.getSprite("claw/claw-arm-right.png"),this.armLinkLeft=Game.displayStore.getSprite("claw/claw-link.png"),this.armLinkRight=Game.displayStore.getSprite("claw/claw-link.png"),this.physicsManager=new ClawPhysicsManager(this,this.container),this.physicsManager.initPhysicsWorld(),this.inputManager=new ClawInputManager(this,this.container),this.physicsDebugger=new PhysicsDebugger(this,this.container,this.physicsManager.world),this.mainHolder.addChild(this.bg),this.mainHolder.addChild(this.backGlass),this.mainHolder.addChild(this.floorBallsBack),this.mainHolder.addChild(this.pit),this.mainHolder.addChild(this.bang),this.container.addChild(this.dialogue),this.container.addChild(this.alert),this.pitDoor=Game.displayStore.getSprite("claw/grid.png"),this.pitDoor.blendMode=PIXI.BLEND_MODES.ADD,this.physicsManager.bindSpriteToBody(this.joystick,this.physicsManager.joystickBody),this.physicsManager.bindSpriteToBody(this.clawBody,this.physicsManager.clawBodyBody),this.physicsManager.bindSpriteToBody(this.clawCord,this.physicsManager.clawCordBody),this.physicsManager.bindSpriteToBody(this.clawTracker,this.physicsManager.clawTrackerBody),this.physicsManager.bindSpriteToBody(this.clawPlunger,this.physicsManager.plungerBody),this.physicsManager.bindSpriteToBody(this.armLeft,this.physicsManager.armLeftBody),this.physicsManager.bindSpriteToBody(this.armRight,this.physicsManager.armRightBody),this.physicsManager.bindSpriteToBody(this.armLinkLeft,this.physicsManager.armLinkLeftBody),this.physicsManager.bindSpriteToBody(this.armLinkRight,this.physicsManager.armLinkRightBody),this.mainHolder.addChild(this.pitDoor),this.mainHolder.addChild(this.clawCord),this.mainHolder.addChild(this.clawPlunger),this.mainHolder.addChild(this.clawBody),this.mainHolder.addChild(this.clawTracker),this.mainHolder.addChild(this.armLeft),this.mainHolder.addChild(this.armRight),this.mainHolder.addChild(this.armLinkLeft),this.mainHolder.addChild(this.armLinkRight),this.mainHolder.addChild(this.pitFront),this.mainHolder.addChild(this.floorBallsFront),this.mainHolder.addChild(this.frontGlass),this.mainHolder.addChild(this.controlPanel),this.container.addChild(this.mainHolder),this.mainHolder.addChild(this.joystick),this.spawnBalls(),this.physicsManager.intro();for(var o=[1542601,29116,23953,2441320,2569307],a=0;a<4;a++){var r=this.physicsManager.createDummyBall(a),n=Game.displayStore.getSprite("claw/dummy-ball.png");n.tint=o[Game.getRandom(0,4,!0)],this.physicsManager.bindSpriteToBody(n,r),this.dummyBallsHolder.addChild(n)}},t.prototype.startGameplay=function(){TweenMax.delayedCall(.4,this.showDialogue,["start"],this)},t.prototype.spawnBalls=function(){this.ballPool=[];var e=[],t=[],i=[];TweenMax.delayedCall(.5,Game.playSound,["claw/balls-rustle-"+Game.getRandom(1,5,!0)+".mp3"]),"none"==Game.coreData.getCurrentWristband().id&&(t.push({id:"points",spriteURLPrefix:"claw/",value:40,prizeType:"wristband",tintBack:9643919,tintFront:16494651}),t.push({id:"tickets",spriteURLPrefix:"claw/",value:35,prizeType:"wristband",tintBack:16576033,tintFront:3781962}),t.push({id:"secondchance",spriteURLPrefix:"claw/",value:30,prizeType:"wristband",tintBack:2730978,tintFront:29116})),this.shuffleArray(t),t.length>0&&t.splice(0,1);for(o=0;o<t.length;o++)this.ballPool.push(t[o]);for(var s=Game.coreData.getClothing({ride:Game.coreData.getCurrentRide().id}),o=0;o<s.length;o++)0==s[o].isOwned&&e.push({id:s[o].id,spriteURLPrefix:"gift-shop/clothes/",value:s[o].price,prizeType:"clothing",tintBack:43421,tintFront:9225791,itemScale:1,itemOffset:s[o].offset});this.shuffleArray(e);var a,r;a=this.ballPool.length>0?2:3,r=e.length-a,e.length>a&&e.splice(0,r);for(o=0;o<e.length;o++)this.ballPool.push(e[o]);i.push({id:"tickets-5",spriteURLPrefix:"claw/",value:10,prizeType:"tickets",tintBack:0,tintFront:13207122}),i.push({id:"tickets-3",spriteURLPrefix:"claw/",value:20,prizeType:"tickets",tintBack:0,tintFront:14473947}),i.push({id:"tickets-10",spriteURLPrefix:"claw/",value:30,prizeType:"tickets",tintBack:0,tintFront:15315793}),i.push({id:"tickets-5",spriteURLPrefix:"claw/",value:10,prizeType:"tickets",tintBack:0,tintFront:13207122}),i.push({id:"tickets-3",spriteURLPrefix:"claw/",value:20,prizeType:"tickets",tintBack:0,tintFront:14473947}),i.push({id:"tickets-10",spriteURLPrefix:"claw/",value:30,prizeType:"tickets",tintBack:0,tintFront:15315793}),this.shuffleArray(i);for(var n=6-this.ballPool.length,o=0;o<n;o++)this.ballPool.push(i[o]);this.shuffleArray(this.ballPool),this.balls=[];for(o=0;o<this.ballPool.length;o++){var h=new ClawBall(this,o,this.ballPool[o]);this.balls.push(h),this.mainHolder.addChild(h.container)}this.mainHolder.addChild(this.clawCord),this.mainHolder.addChild(this.clawPlunger),this.mainHolder.addChild(this.clawBody),this.mainHolder.addChild(this.clawTracker),this.mainHolder.addChild(this.armLeft),this.mainHolder.addChild(this.armRight),this.mainHolder.addChild(this.armLinkLeft),this.mainHolder.addChild(this.armLinkRight),this.mainHolder.addChild(this.pitFront),this.mainHolder.addChild(this.dummyBallsHolder),this.mainHolder.addChild(this.floorBallsFront),this.mainHolder.addChild(this.frontGlass),this.mainHolder.addChild(this.controlPanel),this.container.addChild(this.mainHolder),this.mainHolder.addChild(this.joystick)},t.prototype.showDialogue=function(e){this.dialogueType=e,this.dialogueIsOpen=!0,this.inputManager.disableControls(),this.container.addChild(this.dialogue),this.game.ui.setUI("claw-dialogue");var t=this.sparkleHolder.getSprite("gift-shop/wristband-store/glow.png"),i=this.sparkleHolder.getSprite("gift-shop/wristband-store/sparkle-1.png"),s=this.sparkleHolder.getSprite("gift-shop/wristband-store/sparkle-2.png"),o=this.dialoguePanel.getSprite("gift-shop/wristband-store/item-shadow.png");if(i.blendMode=PIXI.BLEND_MODES.ADD,s.blendMode=PIXI.BLEND_MODES.ADD,t.blendMode=PIXI.BLEND_MODES.ADD,i.scale.x=i.scale.y=0,s.scale.x=s.scale.y=0,t.scale.x=t.scale.y=0,o.scale.x=o.scale.y=0,o.position.x=-175,s.position.x=-180,this.showDialogueAnim=this.killTween(this.showDialogueAnim),this.showDialogueAnim=new TimelineMax,this.showDialogueAnim.add(TweenMax.to(this.dialoguePanel.scale,1,{x:1,y:1,ease:Elastic.easeOut}),0),this.showDialogueAnim.add(TweenMax.to(this.dialogue,.5,{alpha:1,ease:Power2.easeOut}),0),"lost"==e&&(Game.stringsManager.setTextString(this.dialogueText,"claw-game-lost"),this.dialogueText.scale.x=this.dialogueText.scale.y*=.8,this.dialogueText.position.x=-220+Game.stringsManager.getTextOffset("claw-game-lost").xOffset,this.dialogueText.position.y=-145+Game.stringsManager.getTextOffset("claw-game-lost").yOffset,this.dialogueDescriptionText.position.x=-120+Game.stringsManager.getTextOffset("claw-game-play-again").xOffset,this.dialogueDescriptionText.position.y=-20+Game.stringsManager.getTextOffset("claw-game-play-again").xOffset,Game.stringsManager.setTextString(this.dialogueDescriptionText,"claw-game-keep-trying"),this.dialogueDescriptionText.scale.x=this.dialogueDescriptionText.scale.y*=.5,this.dialoguePriceText.position.x=-47,this.ticketIcon.position.x=40,Game.playSound("claw/lose.mp3",.8)),"won"==e){Game.playSound("claw/win.mp3",.8);for(var a=0;a<this.balls.length;a++)if(this.winningBallBody==this.balls[a].body){this.dialogueSprite=this.balls[a].prizeSprite;var r=this.dialogueSprite.scale.x;this.dialogueSprite.scale.x=this.dialogueSprite.scale.y=0,this.dialogueSprite.rotation=.2,this.sparkleHolder.addChild(this.dialogueSprite),this.winningBall=this.balls[a],this.showDialogueAnim.call(function(){this.winningBall.collect(this.winningBall),this.winningBall=null},[this.winningBall],this,1.5)}this.showDialogueAnim.add(TweenMax.to(i.scale,1,{x:1,y:1,ease:Elastic.easeOut}),.2),this.showDialogueAnim.add(TweenMax.to(o.scale,1,{x:1,y:1,ease:Elastic.easeOut}),.1),this.showDialogueAnim.add(TweenMax.to(t.scale,1,{x:1,y:1,ease:Elastic.easeOut}),.3),this.showDialogueAnim.add(TweenMax.to(i,20,{rotation:2*Math.PI,ease:Power0.easeOut,repeat:-1}),0),this.showDialogueAnim.add(TweenMax.to(t.scale,1,{x:.8,y:.8,ease:Power1.easeInOut,repeat:-1,yoyo:!0}),0),this.showDialogueAnim.add(TweenMax.to(this.dialogueSprite.scale,1,{x:1.4*r,y:1.4*r,ease:Elastic.easeOut}),.1),Game.stringsManager.setTextString(this.dialogueText,"claw-game-won"),this.dialogueText.scale.x=this.dialogueText.scale.y*=.75,this.dialogueText.position.x=-15+Game.stringsManager.getTextOffset("claw-game-won").xOffset,this.dialogueText.position.y=-115+Game.stringsManager.getTextOffset("claw-game-won").yOffset,this.dialogueDescriptionText.position.x=-10+Game.stringsManager.getTextOffset("claw-game-play-again").xOffset,this.dialogueDescriptionText.position.y=-20+Game.stringsManager.getTextOffset("claw-game-play-again").xOffset,Game.stringsManager.setTextString(this.dialogueDescriptionText,"claw-game-play-again"),this.dialogueDescriptionText.scale.x=this.dialogueDescriptionText.scale.y*=.45,this.dialoguePriceText.position.x=-10,this.ticketIcon.position.x=76}Game.playSound("scale-up.mp3",.3)},t.prototype.hideDialogue=function(){this.game.ui.setUI("gameplay-claw"),this.dialogueIsOpen=!1,this.showDialogueAnim=this.killTween(this.showDialogueAnim),this.showDialogueAnim=new TimelineMax,this.showDialogueAnim.add(TweenMax.to(this.dialoguePanel.scale,.2,{x:0,y:0,ease:Back.easeIn}),0),this.showDialogueAnim.add(TweenMax.to(this.dialogue,.3,{alpha:0,ease:Power2.easeOut}),0),this.dialogueSprite&&this.dialogueSprite.parent==this.sparkleHolder&&this.sparkleHolder.removeChild(this.dialogueSprite),this.winningBall&&(this.winningBall.collect(this.winningBall),this.winningBall=null),Game.playSound("scale-down.mp3",.3)},t.prototype.showAlert=function(e){this.game.ui.setUI("claw-alert"),this.container.addChild(this.alert),Game.stringsManager.setTextString(this.alertText,e),this.alertText.scale.x=this.alertText.scale.y*=.6,this.alertText.position.x=0+Game.stringsManager.getTextOffset(e).xOffset,this.alertText.position.y=-40+Game.stringsManager.getTextOffset(e).yOffset,this.alertText.position.x=-this.alertText.width/2,this.showDialogueAnim=this.killTween(this.showDialogueAnim),this.showDialogueAnim=new TimelineMax,this.showDialogueAnim.add(TweenMax.to(this.alertPanel.scale,1,{x:1,y:1,ease:Elastic.easeOut}),0),this.showDialogueAnim.add(TweenMax.to(this.alert,.5,{alpha:1,ease:Power2.easeOut}),0)},t.prototype.hideAlert=function(){this.game.ui.setUI("gameplay-claw"),this.showDialogueAnim=this.killTween(this.showDialogueAnim),this.showDialogueAnim=new TimelineMax,this.showDialogueAnim.add(TweenMax.to(this.alertPanel.scale,.2,{x:0,y:0,ease:Back.easeIn}),0),this.showDialogueAnim.add(TweenMax.to(this.alert,.3,{alpha:0,ease:Power2.easeOut}),0),Game.playSound("scale-down.mp3",.3)},t.prototype.playAgain=function(){if("won"==this.dialogueType){for(var e=0;e<this.balls.length;e++)this.balls[e].destroy(),this.balls[e]=null;this.spawnBalls()}},t.prototype.backToGiftshop=function(){this.game.setScene("giftShopScene",!0,[650,!0])},t.prototype.lockDoor=function(){var e=new RoughEase({strength:3,points:30,randomize:!1,clamp:!0});TweenMax.to(this.pitDoor,.2,{alpha:1,ease:e}),Game.playSound("claw/grid.mp3")},t.prototype.unlockDoor=function(){var e=new RoughEase({strength:3,points:30,randomize:!1,clamp:!0});TweenMax.to(this.pitDoor,.2,{alpha:0,ease:e}),this.physicsManager.unlockDoor(),Game.playSound("claw/grid.mp3")},t.prototype.fadeBall=function(e){for(var t=0;t<this.balls.length;t++)e==this.balls[t].body&&this.balls[t].fadeOut()},t.prototype.wonPrize=function(e){this.winTimeline=this.killTween(this.winTimeline),this.winTimeline=new TimelineMax,this.winTimeline.call(this.showDialogue,["won"],this,1),this.winningBallBody=e;var t;this.particles&&this.particles.destroy(),t={lowerAngle:-110,upperAngle:-80,lowerVelocity:700,upperVelocity:3500,endScale:0,lowerStartScale:1.5,upperStartScale:4,friction:.16,XstartRange:60,YstartRange:20,time:1,gravity:2e3,cap:60,endAlpha:0,rotationPower:3,stagger:350},this.particles=new ParticleBurst(["global/confetti-1","global/confetti-2","global/confetti-3","global/confetti-4"],this.particlesHolder,this,t),this.particles.container.position.x=180,this.particles.container.position.y=600,this.mainHolder.addChild(this.particlesHolder),this.mainHolder.addChild(this.pitFront),this.mainHolder.addChild(this.dummyBallsHolder),this.mainHolder.addChild(this.floorBallsFront),this.mainHolder.addChild(this.frontGlass),this.mainHolder.addChild(this.controlPanel),this.mainHolder.addChild(this.joystick),this.particles.fire(),this.bang.alpha=1;var i=new RoughEase({strength:2,points:30,randomize:!1,clamp:!0}),s=new RoughEase({strength:4,points:10,randomize:!0,clamp:!0});this.winTimeline.add(TweenMax.to(this.bang,.4,{alpha:0,ease:i}),0),this.winTimeline.add(TweenMax.to(this.mainHolder.position,.2,{y:10,repeat:1,yoyo:!0,ease:s}),0)},t.prototype.buttonDown=function(){this.dropClawTimeline=this.killTween(this.dropClawTimeline),this.dropClawTimeline=new TimelineMax,this.splat.alpha=1,this.splat.scale.x=this.splat.scale.y=.3,this.buttonBright.alpha=1;var e=new RoughEase({strength:2,points:30,randomize:!1,clamp:!0});this.dropClawTimeline.add(TweenMax.to(this.button.position,.1,{y:-114,ease:Power2.easeOut})),this.dropClawTimeline.add(TweenMax.to(this.splat.scale,.1,{x:1.5,y:1.5,ease:Power2.easeOut}),0),this.dropClawTimeline.add(TweenMax.to(this.splat.scale,.1,{x:.3,y:.3,ease:Power2.easeIn}),.2),this.dropClawTimeline.add(TweenMax.to(this.splat,.4,{alpha:0,ease:e}),0)},t.prototype.dropClaw=function(){this.dropClawTimeline=this.killTween(this.dropClawTimeline),this.dropClawTimeline=new TimelineMax,this.buttonBright.alpha=0,this.dropClawTimeline.add(TweenMax.to(this.button.position,.6,{y:-120,ease:Elastic.easeOut})),this.dropClawTimeline.add(TweenMax.to(this.splat,.3,{alpha:0,ease:Power2.easeOut}),0),this.dropClawTimeline.call(Game.playSound,["claw/ratchet.mp3"],this,.3),this.physicsManager.dropClaw()},t.prototype.highlightJoystick=function(e){this.joystickHead.alpha=1==e?1:0},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),t.id){case"pause-button":this.pause(!1);break;case"playbuttonlarge":this.resume();break;case"back-button":this.backToGiftshop();break;case"accept-button":Game.coreData.getTickets()>2?(Game.coreData.removeTickets(3),this.game.ui.setUI("claw-dialogue-closing"),Game.playSound("claw/coin-drop.mp3"),TweenMax.delayedCall(.5,function(){"start"!=this.dialogueType&&this.playAgain(),this.hideDialogue(),this.unlockDoor(),this.inputManager.enableControls()},null,this)):(this.hideDialogue(),TweenMax.delayedCall(.25,this.showAlert,["claw-game-cant-afford-to-play"],this));break;case"close-button":this.hideAlert()}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){if(e.prototype.tick.call(this),1!=this.paused){this.inputManager.tick(),this.physicsManager.stepPhysics();for(var t=0;t<this.balls.length;t++)this.balls[t].tick()}},t.prototype.keyDown=function(t){e.prototype.keyDown.call(this,t),1!=this.paused&&(this.inputManager.keyDown(t),"up"==t?this.upKeyDown():"down"==t?this.downKeyDown():"spacebar"==t&&this.spaceKeyDown())},t.prototype.keyUp=function(t){e.prototype.keyUp.call(this,t),1!=this.paused&&(this.inputManager.keyUp(t),"up"==t?this.upKeyUp():"down"==t&&this.downKeyUp())},t.prototype.spaceKeyDown=function(){},t.prototype.upKeyDown=function(){},t.prototype.downKeyDown=function(){},t.prototype.upKeyUp=function(){},t.prototype.downKeyUp=function(){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t),this.particles&&this.particles.pause(),Game.pauseSound("claw/servo-loop.mp3"),this.pauseResumeTween(this.dropClawTimeline,"pause"),this.physicsManager.pause()},t.prototype.resume=function(){e.prototype.resume.call(this),this.game.ui.setUI("gameplay-claw"),Game.resumeSound("claw/servo-loop.mp3"),this.pauseResumeTween(this.dropClawTimeline,"resume"),this.physicsManager.resume(),this.particles&&this.particles.resume()},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(t=0;t<this.balls.length;t++)this.balls[t].destroy();this.particles&&this.particles.destroy(),Game.stopSound("claw/servo-loop.mp3"),this.dropClawTimeline=this.killTween(this.dropClawTimeline),this.showDialogueAnim=this.killTween(this.showDialogueAnim),Game.displayStore.returnPooledItem(this.armLinkLeft),Game.displayStore.returnPooledItem(this.armLinkRight),this.dialogueSprite&&(Game.displayStore.returnPooledItem(this.dialogueSprite),this.sparkleHolder.removeChild(this.dialogueSprite)),this.dialoguePanel.getSprite("gift-shop/wristband-store/item-shadow.png").position.x=-156,this.physicsManager.destroy();for(var t=0;t<this.dummyBallsHolder.children.length;t++)Game.displayStore.returnPooledItem(this.dummyBallsHolder.getSpriteAt(t))},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),ClawGameEndScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="clawGameEndScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.restartAllowed=!0,this.setBackgroundColor(13421772),this.game.ui.setUI("claw-gameover")},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),t.id){case"replaybuttonlarge":if(0==this.restartAllowed)return;this.restartAllowed=!1,this.game.setScene("clawGameGameplayScene",!1)}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){e.prototype.tick.call(this)},t.prototype.keyDown=function(e){},t.prototype.keyUp=function(e){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),GiftShopScene=function(e){function t(t){var i=e.call(this,t)||this;return i.markerFocusThreshold=80,i.stopTick=!1,i.dragSensitivity=1,i.id="giftShopScene",i}return __extends(t,e),t.prototype.init=function(i){e.prototype.init.call(this),t.scope=this,this.reachedLimit="none",this.setBackgroundColor(13421772),this.stopTick=!1,this.suppliedXPos=null,i&&1==i[1]||Game.playSound("gift-shop/giftshop-music.mp3",.2),1==Game.onDesktop?this.game.ui.setUI("giftshop"):this.game.ui.setUI("giftshop-touch"),Game.saveProgress(),Game.assetChunkManager.flushAssets("title"),Game.assetChunkManager.flushAssets("games"),Game.assetChunkManager.flushAssets("hub"),this.clickAllowed=!0,this.viewPos=new PIXI.Point(0,0),this.lastViewPos=new PIXI.Point(0,0),this.lastGyroPos=new PIXI.Point(0,0),this.touching=!1,this.stopTick=!1,this.pressingButton="none",this.smoothing=8,this.buttonLeft=this.game.ui.leftButton,this.buttonRight=this.game.ui.rightButton,this.rideLogo=Game.displayStore.getSprite("gift-shop/game-logos/"+Game.coreData.getCurrentRide().id),this.clawLogo=Game.displayStore.getSprite("gift-shop/game-logos/"+Game.coreData.getCurrentRide().id),i&&i[0]&&(this.suppliedXPos=i[0]),this.markerData=[{id:"claw",chunk:null,position:new PIXI.Point(305,380)},{id:"store-powerups",chunk:null,position:new PIXI.Point(890,430)},{id:"store-clothes",chunk:null,position:new PIXI.Point(1650,430)},{id:"photobooth",chunk:null,position:new PIXI.Point(2200,310)}],this.screenHit=Game.displayStore.getSprite("gift-shop-blank-input"),this.screenHit.width=Game.stageWidth,this.screenHit.height=Game.stageHeight,this.layersHolder=Game.displayStore.getContainer("gift-shop/layers-holder"),this.layersHolder.setRegPointPixels(512,315,!0);var s=this.layersHolder.getContainer("gift-shop/foreground-layer"),o=this.layersHolder.getContainer("gift-shop/activity-layer"),a=Game.displayStore.getContainer("gift-shop/store-layer"),r=Game.displayStore.getContainer("gift-shop/background-layer"),n=this.layersHolder.getContainer("gift-shop/cloud-layer"),h=s.getContainer("gift-shop/clothes-sign-holder");this.clothesSignTitle=Game.displayStore.getBitmapText("gift-shop/clothes-sign-font"),Game.stringsManager.setTextString(this.clothesSignTitle,"clothes-sign"),this.clothesSignTitle.position.x=0-this.clothesSignTitle.width/2+Game.stringsManager.getTextOffset("clothes-sign").xOffset,this.clothesSignTitle.position.y=0+this.clothesSignTitle.height/2+Game.stringsManager.getTextOffset("clothes-sign").yOffset,this.clothesSignTitle.rotation=.02,this.clothesSignTitle.tint=16777215,h.addChild(this.clothesSignTitle);var l=s.getContainer("gift-shop/wrist-bands-sign-holder");this.wristBandsSignTitle=Game.displayStore.getBitmapText("gift-shop/wrist-bands-sign-font"),Game.stringsManager.setTextString(this.wristBandsSignTitle,"wrist-bands-sign"),this.wristBandsSignTitle.position.x=0-this.wristBandsSignTitle.width/2+Game.stringsManager.getTextOffset("wrist-bands-sign").xOffset,this.wristBandsSignTitle.position.y=0+this.wristBandsSignTitle.height/2+Game.stringsManager.getTextOffset("wrist-bands-sign").yOffset,this.wristBandsSignTitle.rotation=-.02,this.wristBandsSignTitle.tint=16777215,l.addChild(this.wristBandsSignTitle),this.layersHolder.addChildAt(r,0),this.layersHolder.addChildAt(a,1),s.addChild(Game.displayStore.getContainer("gift-shop/foreground")),this.clawActivity=Game.displayStore.getContainer("gift-shop/claw-machine"),this.buyClothesActivity=o.getContainer("gift-shop/buy-clothes"),this.buyPowerupsActivity=o.getContainer("gift-shop/buy-powerups"),this.photoBoothActivity=Game.displayStore.getContainer("gift-shop/photo-booth"),this.photoBoothActivity.position.y=590;var p=o.getContainer("gift-shop/photo-booth"),c=o.getContainer("gift-shop/claw-machine");switch(p.addChild(this.photoBoothActivity),c.addChild(this.clawActivity),this.clawLogo.scale.x=this.clawLogo.scale.y=.6,this.clawLogo.position.y=80,this.clawLogo.rotation=Game.getRandom(-.1,.1),c.addChild(this.clawLogo),this.charactersHolder=Game.displayStore.getContainer("gift-shop/characters"),p.addChild(this.charactersHolder),Game.coreData.getCurrentRide().id){case"river-rangers":case"pin-ball":this.characters=Game.displayStore.getContainer("gift-shop/spongebob");break;case"roller-coaster-doom":case"aqua-jetpack":this.characters=Game.displayStore.getContainer("gift-shop/thundermans");break;case"laser-cave":this.characters=Game.displayStore.getContainer("gift-shop/tmnt");break;case"mayan-madness":case"dodgems":this.characters=Game.displayStore.getContainer("gift-shop/henry-danger");break;case"roller-coaster-ice":case"beach-buggy":this.characters=Game.displayStore.getContainer("gift-shop/game-shakers");break;case"jet-ski":this.characters=Game.displayStore.getContainer("gift-shop/school-of-rock");break;case"tree-top-gladiators":this.characters=Game.displayStore.getContainer("gift-shop/loud-house");break;case"coco-nutty":this.characters=Game.displayStore.getContainer("gift-shop/nicky-ricky-dicky-dawn");break;case"waterfall-wipeout":this.characters=Game.displayStore.getContainer("gift-shop/i-am-frankie");break;case"snowball-wars":this.characters=Game.displayStore.getContainer("gift-shop/loud-house");break;case"volcano-skydive":this.characters=Game.displayStore.getContainer("gift-shop/find-me-in-paris");break;case"hover-drift":this.characters=Game.displayStore.getContainer("gift-shop/nicky-ricky-dicky-dawn");break;case"egg-scape":this.characters=Game.displayStore.getContainer("gift-shop/game-shakers");break;case"striker":this.characters=Game.displayStore.getContainer("gift-shop/henry-danger");break;case"abducktion":this.characters=Game.displayStore.getContainer("gift-shop/knight-squad");break;case"crazy-golf":this.characters=Game.displayStore.getContainer("gift-shop/i-am-frankie")}for(f=0;f<this.charactersHolder.children.length;f++);this.charactersHolder.addChild(this.characters),this.characters.alpha=1,this.characterLeft=this.characters.getSpriteAt(0),this.characterRight=this.characters.getSpriteAt(1),this.characterLeftBlink=this.characterLeft.getSpriteAt(1),this.characterRightBlink=this.characterRight.getSpriteAt(1),this.origCharLeftPos=new PIXI.Point,this.origCharRightPos=new PIXI.Point,this.origCharLeftPos.x=this.characterLeft.position.x,this.origCharLeftPos.y=this.characterLeft.position.y,this.origCharRightPos.x=this.characterRight.position.x,this.origCharRightPos.y=this.characterRight.position.y,this.characterLeftBlink.alpha=0,this.characterRightBlink.alpha=0,this.characterLeft.setRegPoint(.5,1,!0),this.characterRight.setRegPoint(.5,1,!0),this.characterTimeline=this.killTween(this.characterTimeline),this.characterTimeline=new TimelineMax;var d=new TimelineMax({repeat:-1});d.add(TweenMax.to(this.characterLeftBlink,.1,{alpha:1,repeat:1,yoyo:!0}),3.5),d.add(TweenMax.to(this.characterLeftBlink,.1,{alpha:1,repeat:1,yoyo:!0}),6),d.add(TweenMax.to(this.characterLeftBlink,.1,{alpha:1,repeat:1,yoyo:!0}),6.5),d.add(TweenMax.to(this.characterRightBlink,.1,{alpha:1,repeat:1,yoyo:!0}),4),d.add(TweenMax.to(this.characterRightBlink,.1,{alpha:1,repeat:1,yoyo:!0}),4.5),d.add(TweenMax.to(this.characterRightBlink,.1,{alpha:1,repeat:1,yoyo:!0}),7),this.characterTimeline.add(TweenMax.to(this.characterLeft.scale,1,{y:.97,ease:Power1.easeInOut,repeat:-1,yoyo:!0}),0),this.characterTimeline.add(TweenMax.to(this.characterRight.scale,1,{y:.97,ease:Power1.easeInOut,repeat:-1,yoyo:!0}),.4),this.characterTimeline.add(d,0),this.foregroundLayer=new ParallaxLayerGiftShop(this,s,2350,.7),this.cloudLayer=new ParallaxLayerGiftShop(this,n,2350,.8),this.activityLayer=new ParallaxLayerGiftShop(this,o,2350,.9),this.storeLayer=new ParallaxLayerGiftShop(this,a,2350,1),this.backgroundLayer=new ParallaxLayerGiftShop(this,r,2350,1.3),this.activityLayer.setLimitY(0,0),this.storeLayer.setLimitY(0,0),this.foregroundLayer.setLimitY(0,0),this.cloudLayer.setLimitY(0,0),this.backgroundLayer.setLimitY(0,0),o.addChild(this.rideLogo),this.rideLogo.position.x=this.storeLayer.container.width/2+75,this.container.addChild(this.layersHolder),this.container.addChild(this.screenHit),this.addListeners(),this.allowClick(this),this.createMarkers(),this.wristbandBack=this.cloudLayer.container.getContainer("gift-shop/hand-wristband").getSprite("gift-shop/demo-wristband-back.png"),this.wristbandFront=this.cloudLayer.container.getContainer("gift-shop/hand-wristband").getSprite("gift-shop/demo-wristband-front.png");var u,g=Game.coreData.getWristbands();this.shuffleArray(g);for(f=0;f<g.length;f++)0==g[f].isOwned&&(u=g[f].colour);this.wristbandBack.tint=u,this.wristbandFront.tint=u,this.handClothes=this.cloudLayer.container.getContainer("gift-shop/hand-clothes"),this.handWristband=this.cloudLayer.container.getContainer("gift-shop/hand-wristband"),this.handClothesThumbsUp=this.cloudLayer.container.getContainer("gift-shop/hand-clothes-thumbs-up"),this.handWristbandThumbsUp=this.cloudLayer.container.getContainer("gift-shop/hand-wristband-thumbs-up"),this.handWristbandThumbsUp.scale.x=-1,console.log("getting t shirts",Game.coreData.getCurrentRide().id);for(var m=Game.coreData.getClothing({ride:Game.coreData.getCurrentRide().id,category:"t-shirt"}),y=[],f=0;f<m.length;f++)0==m[f].isOwned&&y.push(m[f]);y.length>0?this.displayTshirt=Game.displayStore.getSprite("gift-shop/clothes/"+y[Game.getRandom(0,y.length-1,!0)].id):this.displayTshirt=Game.displayStore.getSprite("gift-shop/clothes/"+m[Game.getRandom(0,m.length-1,!0)].id),this.displayTshirt.position.x=-70,this.displayTshirt.position.y=-200,this.displayTshirt.scale=new PIXI.Point(.7,.7),this.handClothes.getSpriteAt(1).addChild(this.displayTshirt),this.suppliedXPos?(this.rideLogo.position.y=100,this.skipToPosition(this.suppliedXPos)):(this.introTimeline=this.killTween(this.introTimeline),this.introTimeline=new TimelineMax,this.layersHolder.scale.x=this.layersHolder.scale.y=1,this.backgroundLayer.container.scale.y=.95,this.rideLogo.position.y=-30,this.rideLogo.scale.x=this.rideLogo.scale.y=2.5,this.introTimeline.add([TweenMax.from(this.layersHolder.scale,2,{x:3,y:3,ease:Quart.easeInOut}),TweenMax.to(this.backgroundLayer.container.scale,2,{y:1,ease:Quart.easeInOut}),TweenMax.to(this.rideLogo.position,2,{y:100,ease:Quart.easeInOut}),TweenMax.to(this.rideLogo.scale,2,{x:1,y:1,ease:Quart.easeInOut})],0),this.viewPos.x=-670),this.idleTimeline=this.killTween(this.idleTimeline),this.idleTimeline=new TimelineMax,this.idleTimeline.add(TweenMax.to(this.handClothes.getSprite("gift-shop/hand-post.png"),1,{rotation:-.2,yoyo:!0,repeat:-1,ease:Power1.easeInOut}),0),this.idleTimeline.add(TweenMax.to(this.handWristband.getSprite("gift-shop/hand-pointing.png"),1,{rotation:.2,yoyo:!0,repeat:-1,ease:Power1.easeInOut}),.5),this.idleTimeline.add([TweenMax.to(this.handWristband.getSprite("gift-shop/demo-wristband-back.png").position,1,{x:167,y:-53,yoyo:!0,repeat:-1,ease:Power1.easeInOut}),TweenMax.to(this.handWristband.getSprite("gift-shop/demo-wristband-front.png").position,1,{x:171,y:-53,yoyo:!0,repeat:-1,ease:Power1.easeInOut})],.5);var b=new TimelineMax({repeat:-1});b.add([TweenMax.to(this.handWristband.getSprite("gift-shop/demo-wristband-back.png"),.5,{rotation:.2,ease:Power1.easeOut}),TweenMax.to(this.handWristband.getSprite("gift-shop/demo-wristband-front.png"),.5,{rotation:.2,ease:Power1.easeOut})]),b.add([TweenMax.to(this.handWristband.getSprite("gift-shop/demo-wristband-back.png"),1,{rotation:-.2,ease:Power1.easeInOut}),TweenMax.to(this.handWristband.getSprite("gift-shop/demo-wristband-front.png"),1,{rotation:-.2,ease:Power1.easeInOut})]),b.add([TweenMax.to(this.handWristband.getSprite("gift-shop/demo-wristband-back.png"),.5,{rotation:0,ease:Power1.easeIn}),TweenMax.to(this.handWristband.getSprite("gift-shop/demo-wristband-front.png"),.5,{rotation:0,ease:Power1.easeIn})]),b.timeScale(1),this.idleTimeline.add(b,.4),this.backgroundLayer.tick(1,this.viewPos),this.foregroundLayer.tick(1,this.viewPos),this.cloudLayer.tick(1,this.viewPos),this.activityLayer.tick(1,this.viewPos),this.storeLayer.tick(1,this.viewPos)},t.prototype.createMarkers=function(){this.markers=[];for(var e=0;e<this.markerData.length;e++){var t=Game.displayStore.getContainer("gift-shop/marker-holder"),i=new Marker(this,t,this.markerData[e],e);this.markers.push(i)}this.activityLayer.addMarkers(this.markers)},t.prototype.allowClick=function(e){e.clickAllowed=!0},t.prototype.addListeners=function(){this.screenHit.interactive=!0,this.screenHit.buttonMode=!0;var e=this;Game.onDesktop?(this.screenHit.on("mousedown",function(t){0!=e.clickAllowed&&(this.inputStart(t),this.mouseDownPos=t.data.getLocalPosition(this.container),this.mouseVelocity=0,this.screenHit.on("mouseup",function(t){0!=e.clickAllowed&&this.inputEnd(t)},this),this.screenHit.on("mouseout",function(e){this.inputEnd(e)},this),this.screenHit.on("mousemove",function(e){this.inputHappening(e)},this))},this),Game.renderer.view.addEventListener&&(this.scrollListenerWebkit=Game.renderer.view.addEventListener("mousewheel",this.mouseWheelHandler,!1),this.scrollListenerFirefox=Game.renderer.view.addEventListener("DOMMouseScroll",this.mouseWheelHandler,!1))):(this.screenHit.on("touchstart",function(e){this.inputStart(e)},this),this.screenHit.on("touchend",function(e){this.inputEnd(e)},this),this.screenHit.on("touchendoutside",function(e){this.inputEnd(e)},this),this.screenHit.on("touchmove",function(e){this.inputHappening(e)},this),window.addEventListener("deviceorientation",this.gyroHandler,!1))},t.prototype.inputStart=function(e){this.touching=!0,this.touchOffset=e.data.getLocalPosition(this.container),this.viewPos.x=this.lastViewPos.x=0,this.viewPos.y=this.lastViewPos.y=0,this.mouseVelocity=0,this.mouseDistance=0,this.lastMousePos=this.mouseDownPos=e.data.getLocalPosition(this.container),this.activityLayer.inputStart(),this.storeLayer.inputStart(),this.foregroundLayer.inputStart(),this.cloudLayer.inputStart(),this.backgroundLayer.inputStart()},t.prototype.inputHappening=function(e){0!=this.touching&&(this.mouseVelocity=this.getDistance(e.data.getLocalPosition(this.container),this.lastMousePos),this.lastMousePos=e.data.getLocalPosition(this.container),this.updatePosition(e.data.getLocalPosition(this.container)))},t.prototype.inputEnd=function(e){if(this.removeListeners(),this.addListeners(),this.touching=!1,this.mouseDistance=this.getDistance(e.data.getLocalPosition(this.container),this.mouseDownPos),this.mouseDistance<10&&this.mouseVelocity<20){var t=e.data.getLocalPosition(this.activityLayer.container);this.checkTappedMarker(t)}},t.prototype.skipToPosition=function(e){this.viewPos.x=-690+this.suppliedXPos,this.stopTick=!0,this.backgroundLayer.removeLimitY(),this.foregroundLayer.removeLimitY(),this.cloudLayer.removeLimitY(),this.activityLayer.removeLimitY(),this.storeLayer.removeLimitY(),this.layersHolder.scale.x=this.layersHolder.scale.y=3,this.zoomInTimeline=this.killTween(this.zoomInTimeline),this.zoomInTimeline=new TimelineMax,this.zoomInTimeline.add([TweenMax.to(this.layersHolder.scale,.7,{x:1,y:1,ease:Power3.easeInOut})],0),Game.playSound("gift-shop/swoosh-deselect.mp3",.3),this.zoomInTimeline.call(function(){this.stopTick=!1,this.backgroundLayer.setLimitY(0,0),this.foregroundLayer.setLimitY(0,0),this.cloudLayer.setLimitY(0,0),this.activityLayer.setLimitY(0,0),this.storeLayer.setLimitY(0,0)},null,this,0),this.backgroundLayer.tick(1,this.viewPos),this.foregroundLayer.tick(1,this.viewPos),this.cloudLayer.tick(1,this.viewPos),this.activityLayer.tick(1,this.viewPos),this.storeLayer.tick(1,this.viewPos)},t.prototype.skipToMarker=function(e,t){for(var i=0;i<this.markers.length;i++)this.markers[i].id==e&&(this.markers[i],this.viewPos.x=this.suppliedXPos);this.stopTick=!0,this.backgroundLayer.removeLimitY(),this.foregroundLayer.removeLimitY(),this.cloudLayer.removeLimitY(),this.activityLayer.removeLimitY(),this.storeLayer.removeLimitY(),this.layersHolder.scale.x=this.layersHolder.scale.y=3,this.zoomInTimeline=this.killTween(this.zoomInTimeline),this.zoomInTimeline=new TimelineMax,this.zoomInTimeline.add([TweenMax.to(this.layersHolder.scale,.7,{x:1,y:1,ease:Power3.easeInOut})],0),this.zoomInTimeline.call(function(){this.stopTick=!1,this.backgroundLayer.setLimitY(0,0),this.foregroundLayer.setLimitY(0,0),this.cloudLayer.setLimitY(0,0),this.activityLayer.setLimitY(0,0),this.storeLayer.setLimitY(0,0)},null,this)},t.prototype.checkTappedMarker=function(e){for(var t=0;t<this.markers.length;t++){var i=this.markers[t].container.position.x,s=this.markers[t].container.position.y;e.x>i-50&&e.x<i+50&&e.y>s-50&&e.y<s+50&&this.markers[t].engage("fast")}},t.prototype.updatePosition=function(e){1!=this.stopTick&&(this.viewPos.x=e.x-this.touchOffset.x,this.viewPos.y=e.y-this.touchOffset.y)},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),t.id){case"playbuttonlarge":this.game.setScene("giftshopScene",!1);break;case"back-button":this.zoomOut();break;case"home-button":Game.stopSound("gift-shop/giftshop-music.mp3")}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.uiRolledOut=function(t){e.prototype.uiRolledOut.call(this,t),"hub-left-button"==t.id&&(this.pressingButton="none"),"hub-right-button"==t.id&&(this.pressingButton="none")},t.prototype.downOnUI=function(t){e.prototype.downOnUI.call(this,t),"hub-left-button"==t.id&&(this.pressingButton="left"),"hub-right-button"==t.id&&(this.pressingButton="right")},t.prototype.upOnUI=function(t){e.prototype.upOnUI.call(this,t),"hub-left-button"==t.id&&(this.pressingButton="none"),"hub-right-button"==t.id&&(this.pressingButton="none")},t.prototype.zoomInToMarker=function(e,t){this.stopTick=!0,this.pressingButton="none",Game.playSound("gift-shop/swoosh-select.mp3",.3),this.backgroundLayer.removeLimitY(),this.cloudLayer.removeLimitY(),this.foregroundLayer.removeLimitY(),this.activityLayer.removeLimitY(),this.storeLayer.removeLimitY(),this.backgroundLayer.removeLimitX(),this.cloudLayer.removeLimitX(),this.foregroundLayer.removeLimitX(),this.activityLayer.removeLimitX(),this.storeLayer.removeLimitX(),this.zoomInTimeline=this.killTween(this.zoomInTimeline),this.zoomInTimeline=new TimelineMax,this.game.ui.setUI("none"),this.zoomInTimeline.add([TweenMax.to(this.layersHolder.scale,1,{x:3,y:3,ease:Quart.easeOut}),TweenMax.to(this.backgroundLayer.container.scale,1,{y:.9,ease:Quart.easeOut}),TweenMax.to(this.foregroundLayer.container.scale,1,{y:1.2,ease:Quart.easeOut}),TweenMax.to(this.viewPos,0,{x:.89*e.container.toLocal(new PIXI.Point(Game.stageWidth/2-this.activityLayer.container.position.x,0),this.activityLayer.container).x,y:.89*e.container.toLocal(new PIXI.Point(0,Game.stageHeight/2-this.activityLayer.container.position.y),this.activityLayer.container).y,ease:Power2.easeOut})],0),"photobooth"==e.id&&this.zoomInTimeline.add(TweenMax.to(this.foregroundLayer.container.position,.75,{y:-230,ease:Power3.easeOut}),0),this.zoomInTimeline.call(function(){"claw"==e.id&&this.game.setScene("clawGameGameplayScene",!0),"store-clothes"==e.id&&this.game.setScene("characterItemShopScene",!0),"store-powerups"==e.id&&this.game.setScene("wristBandShopScene",!0),"photobooth"==e.id&&this.game.setScene("photoBoothMainScene",!0)},null,this,"-=0.4"),this.removeListeners()},t.prototype.zoomOut=function(){this.zoomInTimeline=this.killTween(this.zoomInTimeline),this.zoomInTimeline=new TimelineMax,this.activityLayer.setLimitY(0,0),1==Game.onDesktop?this.game.ui.setUI("hub"):this.game.ui.setUI("hub-touch"),this.viewPos.x=0,this.viewPos.y=0,this.stopTick=!1,this.backgroundLayer.setLimitY(0,0),this.foregroundLayer.setLimitY(0,0),this.activityLayer.setLimitY(0,0),this.storeLayer.setLimitY(0,0),this.addListeners(),this.zoomInTimeline.add([TweenMax.to(this.layersHolder.scale,.5,{x:1,y:1,ease:Expo.easeOut}),TweenMax.to(this.backgroundLayer.container.scale,.4,{y:1,ease:Expo.easeOut}),TweenMax.to(this.foregroundLayer.container.scale,.4,{y:1,ease:Expo.easeOut})],0);for(var e=0;e<this.markers.length;e++)this.markers[e].reset()},t.prototype.tick=function(){e.prototype.tick.call(this),this.activityLayer.tick(this.smoothing,this.viewPos),this.storeLayer.tick(this.smoothing,this.viewPos),this.foregroundLayer.tick(this.smoothing,this.viewPos),this.backgroundLayer.tick(this.smoothing,this.viewPos),this.cloudLayer.tick(this.smoothing,this.viewPos),"right"==this.pressingButton?this.viewPos.x-=15:"left"==this.pressingButton&&(this.viewPos.x+=15);for(var t=3*(this.viewPos.x-this.lastViewPos.x),i=(this.viewPos.y,this.lastViewPos.y,0);i<this.markers.length;i++){var s=this.markers[i];s.container.toGlobal(new PIXI.Point(0,0)).x/Game.windowScaleFactor>Game.stageWidth/2-this.markerFocusThreshold&&s.container.toGlobal(new PIXI.Point(0,0)).x/Game.windowScaleFactor<Game.stageWidth/2+this.markerFocusThreshold?0==s.focused&&(s.focus(),"store-powerups"==s.id&&(this.clothesShopTimeline=this.killTween(this.clothesShopTimeline),this.clothesShopTimeline=new TimelineMax,this.clothesShopTimeline.add(TweenMax.to(this.handWristbandThumbsUp.getSprite("gift-shop/hand-thumbs-up.png"),.2,{rotation:.6,ease:Power2.easeOut})),this.clothesShopTimeline.add(TweenMax.to(this.handWristbandThumbsUp.getSprite("gift-shop/hand-thumbs-up.png"),1,{rotation:0,ease:Elastic.easeOut}))),"store-clothes"==s.id&&(this.clothesShopTimeline=this.killTween(this.clothesShopTimeline),this.clothesShopTimeline=new TimelineMax,this.clothesShopTimeline.add(TweenMax.to(this.handClothesThumbsUp.getSprite("gift-shop/hand-thumbs-up.png"),.2,{rotation:.6,ease:Power2.easeOut})),this.clothesShopTimeline.add(TweenMax.to(this.handClothesThumbsUp.getSprite("gift-shop/hand-thumbs-up.png"),1,{rotation:0,ease:Elastic.easeOut})))):s.unfocus()}var o=1+Math.abs(t/1500);o>1.2&&(o=1.2),this.lastViewPos.x=this.viewPos.x,this.lastViewPos.y=this.viewPos.y,1==Game.onDesktop&&0==this.stopTick&&("left"!=this.reachedLimit&&this.activityLayer.container.position.x>-30&&(this.reachedLimit="left",this.game.ui.setUI("giftshop-left")),"right"!=this.reachedLimit&&this.activityLayer.container.position.x<-1420?(this.reachedLimit="right",this.game.ui.setUI("giftshop-right")):"none"!=this.reachedLimit&&this.activityLayer.container.position.x<-40&&this.activityLayer.container.position.x>-1410&&(this.reachedLimit="none",this.game.ui.setUI("giftshop")))},t.prototype.keyDown=function(e){1!=this.stopTick&&("left"==e&&(this.pressingButton="left"),"right"==e&&(this.pressingButton="right"))},t.prototype.keyUp=function(e){1!=this.stopTick&&("left"==e&&(this.pressingButton="non"),"right"==e&&(this.pressingButton="none"))},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t),this.pauseResumeTween(this.introTimeline,"pause"),this.pauseResumeTween(this.zoomInTimeline,"pause"),this.pauseResumeTween(this.idleTimeline,"pause"),this.pauseResumeTween(this.clothesShopTimeline,"pause"),this.pauseResumeTween(this.wristbandsShopTimeline,"pause"),this.pauseResumeTween(this.characterTimeline,"pause")},t.prototype.resume=function(){e.prototype.resume.call(this),this.pauseResumeTween(this.introTimeline,"resume"),this.pauseResumeTween(this.zoomInTimeline,"resume"),this.pauseResumeTween(this.idleTimeline,"resume"),this.pauseResumeTween(this.clothesShopTimeline,"resume"),this.pauseResumeTween(this.wristbandsShopTimeline,"resume"),this.pauseResumeTween(this.characterTimeline,"resume")},t.prototype.removeListeners=function(){this.screenHit.removeAllListeners(),1==Game.onDesktop?(Game.renderer.view.removeEventListener("mousewheel",this.mouseWheelHandler),Game.renderer.view.removeEventListener("DOMMouseScroll",this.mouseWheelHandler)):window.removeEventListener("deviceorientation",this.gyroHandler,!1)},t.prototype.getDistance=function(e,t){if(!e||!t)return 0;var i=e.x-t.x,s=e.y-t.y;return Math.sqrt(i*i+s*s)},t.prototype.gyroHandler=function(e){var i=e.alpha,s=e.gamma,o=i-t.scope.lastGyroPos.x,a=s-t.scope.lastGyroPos.y;(o>100||o<-100)&&(o=0),(a>100||a<-100)&&(a=0),t.scope.lastGyroPos.x=i,t.scope.lastGyroPos.y=s,1!=t.scope.touching&&1!=Game.onAndroid&&(t.scope.viewPos.x+=12*o,t.scope.viewPos.y-=8*a)},t.prototype.mouseWheelHandler=function(e){var i=window.event||e,s=Math.max(-200,Math.min(200,i.wheelDelta||10*-i.detail));t.scope.viewPos.x-=s/3},t.prototype.destroy=function(){e.prototype.destroy.call(this),Game.stopSound("gift-shop/swoosh-select.mp3"),Game.stopSound("gift-shop/swoosh-deselect.mp3"),this.characterLeft.position.x=this.origCharLeftPos.x,this.characterLeft.position.y=this.origCharLeftPos.y,this.characterRight.position.x=this.origCharRightPos.x,this.characterRight.position.y=this.origCharRightPos.y,this.charactersHolder.removeChild(this.characters),this.removeListeners(),this.zoomInTimeline=this.killTween(this.zoomInTimeline),this.introTimeline=this.killTween(this.introTimeline),this.zoomInTimeline=this.killTween(this.zoomInTimeline),this.idleTimeline=this.killTween(this.idleTimeline),this.clothesShopTimeline=this.killTween(this.clothesShopTimeline),this.wristbandsShopTimeline=this.killTween(this.wristbandsShopTimeline),this.characterTimeline=this.killTween(this.characterTimeline);for(var t=0;t<this.markers.length;t++)this.markers[t].destroy();this.activityLayer.container.removeChild(this.rideLogo),this.container.removeChild(this.layersHolder),this.container.removeChild(this.screenHit),this.layersHolder.removeChild(this.backgroundLayer.container),this.layersHolder.removeChild(this.storeLayer.container),this.displayTshirt.parent.removeChild(this.displayTshirt),Game.displayStore.returnPooledItem(this.displayTshirt),Game.displayStore.returnPooledItem(this.rideLogo),Game.displayStore.returnPooledItem(this.clawLogo),this.activityLayer.destroy(),this.storeLayer.destroy(),this.foregroundLayer.destroy(),this.cloudLayer.destroy(),this.backgroundLayer.destroy()},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),WristBandShopScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="wristBandShopScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.currentItemIndex=0,this.dialogueIsOpen=!1,this.setBackgroundColor(5622988),this.game.ui.setUI("buy-wristband"),this.mainHolder=Game.displayStore.getContainer("gift-shop/wristband-store/main-holder"),this.itemHandHolder=this.mainHolder.getContainer("gift-shop/wristband-store/item-hand-holder"),this.infoBoard=this.mainHolder.getContainer("gift-shop/wristband-store/info-board"),this.infoBoard.position.y=-550,this.itemHand=this.itemHandHolder.getContainer("gift-shop/wristband-store/item-hand"),this.support=this.itemHandHolder.getSprite("gift-shop/wristband-store/item-hand-support.png"),this.dialogue=Game.displayStore.getContainer("gift-shop/wristband-store/dialogue");var i=this.dialogue.getSprite("gift-shop/wristband-store/black.png");i.width=Game.stageWidth,i.height=Game.stageHeight,i.alpha=.8,this.dialogue.alpha=0,this.dialoguePanel=this.dialogue.getContainer("gift-shop/wristband-store/dialogue-panel"),this.dialoguePanel.scale.x=this.dialoguePanel.scale.y=0,this.alert=Game.displayStore.getContainer("gift-shop/wristband-store/alert");var s=this.alert.getSprite("gift-shop/wristband-store/black.png");s.width=Game.stageWidth,s.height=Game.stageHeight,s.alpha=.8,this.alert.alpha=0,this.alertPanel=this.alert.getContainer("gift-shop/wristband-store/alert-panel"),this.alertPanel.scale.x=this.alertPanel.scale.y=0,this.alertText=Game.displayStore.getBitmapText("gift-shop-alert-text"),this.alertText.position.x=0,this.alertText.position.y=-40,this.alertText.scale.x=this.alertText.scale.y=.7,this.alertPanel.addChild(this.alertText),this.ownedIcon=Game.displayStore.getSprite("gift-shop/owned-icon"),this.ownedIcon.position.x=400,this.ownedIcon.position.y=-40,this.priceText=Game.displayStore.getBitmapText("gift-shop-text"),this.priceText.scale.x=this.priceText.scale.y=1,this.priceText.tint=16777215,this.priceText.position.x=-55,this.priceText.position.y=380,this.priceText.text="0",this.infoBoard.addChild(this.priceText),this.titleText=Game.displayStore.getBitmapText("gift-shop-title-text"),this.titleText.position.x=-123,this.titleText.position.y=210,this.titleText.scale.x=this.titleText.scale.y=.7,this.titleText.text="title",this.infoBoard.addChild(this.titleText),this.descriptionText=Game.displayStore.getBitmapText("gift-shop-description-text"),this.descriptionText.position.x=-123,this.descriptionText.position.y=275,this.descriptionText.scale.x=this.descriptionText.scale.y=.5,this.descriptionText.text="item description",this.descriptionText.tint=3194604,this.infoBoard.addChild(this.descriptionText),this.dialogueText=Game.displayStore.getBitmapText("gift-shop-dialogue-text"),Game.stringsManager.setTextString(this.dialogueText,"buy-wristband"),this.dialogueText.scale.x=this.dialogueText.scale.y*=.9,this.dialogueText.position.x=-20+Game.stringsManager.getTextOffset("buy-wristband").xOffset,this.dialogueText.position.y=-150+Game.stringsManager.getTextOffset("buy-wristband").yOffset,this.dialoguePanel.addChild(this.dialogueText),this.dialogueDescriptionText=Game.displayStore.getBitmapText("gift-shop-dialogue-description-text"),this.dialogueDescriptionText.position.x=-20,this.dialogueDescriptionText.position.y=-75,this.dialogueDescriptionText.scale.x=this.dialogueDescriptionText.scale.y=.5,this.dialogueDescriptionText.text="item description",this.dialogueDescriptionText.tint=3194604,this.dialoguePanel.addChild(this.dialogueDescriptionText),this.dialoguePriceText=Game.displayStore.getBitmapText("gift-shop-price-text"),this.dialoguePriceText.position.x=45,this.dialoguePriceText.position.y=-4,this.dialoguePriceText.scale.x=this.dialoguePriceText.scale.y=1,this.dialoguePriceText.text="0",this.dialoguePanel.addChild(this.dialoguePriceText),this.sparkleHolder=this.dialoguePanel.getContainer("gift-shop/wristband-store/sparkle"),this.dialoguePanel.getSprite("gift-shop/clothes-store/ticket-icon.png").position.x=10,this.dialoguePanel.getSprite("gift-shop/clothes-store/ticket-icon.png").position.y=45,this.mainHolder.setRegPointPixels(512,315,!0),this.mainHolder.scale.x=this.mainHolder.scale.y=2,this.container.addChild(this.mainHolder),this.container.addChild(this.dialogue),this.container.addChild(this.alert),this.introAnim=new TimelineMax,this.introAnim.add(TweenMax.to(this.mainHolder.scale,1,{x:1,y:1,ease:Power2.easeInOut}),0),this.items=new Array,this.populateItems(),this.showItem(0),this.itemHand.addChild(this.ownedIcon)},t.prototype.populateItems=function(){for(var e=Game.coreData.getWristbands(),t=0;t<e.length;t++){var i=Game.displayStore.getSprite("gift-shop/wristbands/wristband-back"),s=Game.displayStore.getSprite("gift-shop/wristbands/wristband-front"),o=Game.displayStore.getSprite("gift-shop/wristbands/"+e[t].id);this.items.push({id:e[t].id,isOwned:e[t].isOwned,title:e[t].title,price:e[t].price,spriteBack:i,spriteFront:s,dialogueSprite:o}),i.visible=!1,i.position.x=251,i.position.y=-213,i.rotation=0,i.tint=e[t].colour,s.visible=!1,s.position.x=248,s.position.y=-200,s.rotation=0,s.tint=e[t].colour,o.position.x=-180,o.position.y=-5,o.rotation=-.1,o.visible=!1,this.itemHand.addChildAt(i,0),this.itemHand.addChild(s),this.dialoguePanel.addChild(o),this.dialoguePanel.addChild(this.sparkleHolder.getSprite("gift-shop/wristband-store/sparkle-2.png"))}},t.prototype.showItem=function(e){for(var t=0;t<this.items.length;t++)this.items[t].spriteBack.visible=!1,this.items[t].spriteFront.visible=!1,this.items[t].dialogueSprite.visible=!1;this.ownedIcon.visible=!1,this.itemHand.position.y=500,this.support.scale.y=0,this.support.position.y=400,this.itemHand.rotation=2,this.items[e].spriteBack.visible=!0,this.items[e].spriteFront.visible=!0,this.items[e].spriteBack.rotation=1,this.items[e].spriteFront.rotation=1,this.items[e].dialogueSprite.visible=!0,this.showItemAnim=this.killTween(this.showItemAnim),this.showItemAnim=new TimelineMax,this.showItemAnim.add(TweenMax.to(this.infoBoard.position,.2,{y:-550,ease:Power1.easeIn}),.01),this.showItemAnim.add(TweenMax.to(this.itemHand.position,.8,{y:20,ease:Power3.easeOut}),0),this.showItemAnim.add(TweenMax.to(this.itemHand,.6,{rotation:.2,ease:Back.easeOut}),.05),this.showItemAnim.add(TweenMax.to(this.support.scale,.8,{y:1,ease:Power4.easeOut}),.05),this.showItemAnim.add(TweenMax.to(this.support.position,.8,{y:340,ease:Power3.easeOut}),0),this.showItemAnim.add(TweenMax.to(this.items[e].spriteBack,2,{rotation:0,ease:Elastic.easeOut}),0),this.showItemAnim.add(TweenMax.to(this.items[e].spriteFront,2,{rotation:0,ease:Elastic.easeOut}),0),this.showItemAnim.call(function(){this.priceText.text=this.dialoguePriceText.text=this.items[e].price,Game.stringsManager.setTextString(this.titleText,this.items[e].id+"-title"),this.titleText.scale.x=this.titleText.scale.y*=.7,this.titleText.position.x=-123+Game.stringsManager.getTextOffset(this.items[e].id+"-title").xOffset,this.titleText.position.y=210+Game.stringsManager.getTextOffset(this.items[e].id+"-title").yOffset,Game.stringsManager.setTextString(this.descriptionText,this.items[e].id+"-description"),this.descriptionText.scale.x=this.descriptionText.scale.y*=.5,this.descriptionText.position.x=-123+Game.stringsManager.getTextOffset(this.items[e].id+"-description").xOffset,this.descriptionText.position.y=269+Game.stringsManager.getTextOffset(this.items[e].id+"-description").yOffset},null,this,.2),this.showItemAnim.call(function(){var e=Game.getRandom(1,3,!0);1==e?Game.playSound("gift-shop/swish-long-1.mp3"):2==e?Game.playSound("gift-shop/swish-long-2.mp3"):3==e&&Game.playSound("gift-shop/swish-long-3.mp3")},null,this,0),this.updateCurrentItem()},t.prototype.updateCurrentItem=function(){1==this.items[this.currentItemIndex].isOwned?this.ownedIcon.visible=!0:(this.ownedIcon.visible=!1,this.showItemAnim.add(TweenMax.to(this.infoBoard.position,.2,{y:-100,ease:Power1.easeIn}),.5),this.showItemAnim.add(TweenMax.to(this.infoBoard.position,.8,{y:-55,ease:Elastic.easeOut}),.7),this.showItemAnim.call(function(){Game.playSound("gift-shop/sign-down.mp3",.5)},null,this,.5))},t.prototype.canAffordCurrentItem=function(){var e=!1;return Game.coreData.getCurrentTickets()>=this.items[this.currentItemIndex].price&&(e=!0),e},t.prototype.showPreviousItem=function(){--this.currentItemIndex<0&&(this.currentItemIndex=this.items.length-1),this.showItem(this.currentItemIndex)},t.prototype.showNextItem=function(){++this.currentItemIndex>=this.items.length&&(this.currentItemIndex=0),this.showItem(this.currentItemIndex)},t.prototype.showAlert=function(e){this.game.ui.setUI("alert"),Game.stringsManager.setTextString(this.alertText,e),this.alertText.scale.x=this.alertText.scale.y*=.7,this.alertText.position.x=0+Game.stringsManager.getTextOffset(e).xOffset,this.alertText.position.y=-40+Game.stringsManager.getTextOffset(e).yOffset,this.alertText.position.x=-this.alertText.width/2,this.showDialogueAnim=this.killTween(this.showDialogueAnim),this.showDialogueAnim=new TimelineMax,this.showDialogueAnim.add(TweenMax.to(this.alertPanel.scale,1,{x:1,y:1,ease:Elastic.easeOut}),0),this.showDialogueAnim.add(TweenMax.to(this.alert,.5,{alpha:1,ease:Power2.easeOut}),0)},t.prototype.hideAlert=function(){this.game.ui.setUI("buy-items"),this.showDialogueAnim=this.killTween(this.showDialogueAnim),this.showDialogueAnim=new TimelineMax,this.showDialogueAnim.add(TweenMax.to(this.alertPanel.scale,.2,{x:0,y:0,ease:Back.easeIn}),0),this.showDialogueAnim.add(TweenMax.to(this.alert,.3,{alpha:0,ease:Power2.easeOut}),0),Game.playSound("scale-down.mp3",.3)},t.prototype.showDialogue=function(){if("none"!=Game.coreData.getCurrentWristband().id)this.showAlert("you-already-own-a-wristband");else if(0==this.canAffordCurrentItem())this.showAlert("you-cant-afford-this-item");else{this.dialogueIsOpen=!0,this.game.ui.setUI("buy-dialogue");var e=this.sparkleHolder.getSprite("gift-shop/wristband-store/glow.png"),t=this.sparkleHolder.getSprite("gift-shop/wristband-store/sparkle-1.png"),i=this.dialoguePanel.getSprite("gift-shop/wristband-store/sparkle-2.png");t.blendMode=PIXI.BLEND_MODES.ADD,i.blendMode=PIXI.BLEND_MODES.ADD,e.blendMode=PIXI.BLEND_MODES.ADD,t.scale.x=t.scale.y=0,i.scale.x=i.scale.y=0,e.scale.x=e.scale.y=0,i.position.x=-180;var s=this.items[this.currentItemIndex].dialogueSprite;s.scale.x=s.scale.y=0,Game.stringsManager.setTextString(this.dialogueDescriptionText,this.items[this.currentItemIndex].id+"-title"),this.dialogueDescriptionText.scale.x=this.dialogueDescriptionText.scale.y*=.5,this.dialogueDescriptionText.position.x=-20+Game.stringsManager.getTextOffset(this.items[this.currentItemIndex].id).xOffset,this.dialogueDescriptionText.position.y=-75+Game.stringsManager.getTextOffset(this.items[this.currentItemIndex].id).yOffset,this.showDialogueAnim=this.killTween(this.showDialogueAnim),this.showDialogueAnim=new TimelineMax,this.showDialogueAnim.add(TweenMax.to(this.dialoguePanel.scale,1,{x:1,y:1,ease:Elastic.easeOut}),0),this.showDialogueAnim.add(TweenMax.to(this.dialogue,.5,{alpha:1,ease:Power2.easeOut}),0),this.showDialogueAnim.add(TweenMax.to(s.scale,1,{x:1,y:1,ease:Elastic.easeOut}),.4),this.showDialogueAnim.add(TweenMax.to(t.scale,1,{x:1,y:1,ease:Elastic.easeOut}),.2),this.showDialogueAnim.add(TweenMax.to(i.scale,1,{x:1,y:1,ease:Elastic.easeOut}),.25),this.showDialogueAnim.add(TweenMax.to(e.scale,1,{x:1,y:1,ease:Elastic.easeOut}),.3),this.showDialogueAnim.add(TweenMax.to(t,20,{rotation:2*Math.PI,ease:Power0.easeOut,repeat:-1}),0),this.showDialogueAnim.add(TweenMax.to(i,16,{rotation:2*-Math.PI,ease:Power0.easeOut,repeat:-1}),0),this.showDialogueAnim.add(TweenMax.to(e.scale,1,{x:.8,y:.8,ease:Power1.easeInOut,repeat:-1,yoyo:!0}),0)}Game.playSound("scale-up.mp3",.3)},t.prototype.hideDialogue=function(){this.game.ui.setUI("buy-items"),this.dialogueIsOpen=!1,this.showDialogueAnim=this.killTween(this.showDialogueAnim),this.showDialogueAnim=new TimelineMax,this.showDialogueAnim.add(TweenMax.to(this.dialoguePanel.scale,.2,{x:0,y:0,ease:Back.easeIn}),0),this.showDialogueAnim.add(TweenMax.to(this.dialogue,.3,{alpha:0,ease:Power2.easeOut}),0),this.updateCurrentItem(),Game.playSound("scale-down.mp3",.3)},t.prototype.buyItem=function(){this.items[this.currentItemIndex].isOwned=!0,Game.coreData.buyWristband(this.items[this.currentItemIndex].id),this.hideDialogue(),this.buyItemAnim=this.killTween(this.buyItemAnim),this.buyItemAnim=new TimelineMax,this.ownedIcon.visible=!0,this.ownedIcon.scale.x=this.ownedIcon.scale.y=0,this.buyItemAnim.add(TweenMax.to(this.ownedIcon.scale,1,{ease:Elastic.easeOut,x:1,y:1}))},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),t.id){case"playbuttonlarge":this.game.setScene("hubScene",!1);break;case"back-button":this.game.setScene("giftShopScene",!0,[360,!0]);break;case"left-arrow-button":this.showPreviousItem();break;case"right-arrow-button":this.showNextItem();break;case"basket-button":this.showDialogue();break;case"close-button":1==this.dialogueIsOpen?this.hideDialogue():this.hideAlert();break;case"accept-button":this.buyItem()}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){e.prototype.tick.call(this)},t.prototype.keyDown=function(e){},t.prototype.keyUp=function(e){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t),this.pauseResumeTween(this.introAnim,"pause"),this.pauseResumeTween(this.showDialogueAnim,"pause"),this.pauseResumeTween(this.showItemAnim,"pause"),this.pauseResumeTween(this.buyItemAnim,"pause")},t.prototype.resume=function(){e.prototype.resume.call(this),this.pauseResumeTween(this.introAnim,"resume"),this.pauseResumeTween(this.showDialogueAnim,"resume"),this.pauseResumeTween(this.showItemAnim,"resume"),this.pauseResumeTween(this.buyItemAnim,"resume")},t.prototype.destroy=function(){e.prototype.destroy.call(this),Game.stopSound("gift-shop/swish-long-1.mp3"),Game.stopSound("gift-shop/swish-long-2.mp3"),Game.stopSound("gift-shop/swish-long-3.mp3"),Game.stopSound("gift-shop/sign-down.mp3"),Game.stopSound("scale-up.mp3"),Game.stopSound("scale-down.mp3"),this.introAnim=this.killTween(this.introAnim),this.showDialogueAnim=this.killTween(this.showDialogueAnim),this.showItemAnim=this.killTween(this.showItemAnim),this.buyItemAnim=this.killTween(this.buyItemAnim),this.itemHand.removeChild(this.ownedIcon);for(var t=0;t<this.items.length;t++)this.items[t].spriteBack.visible=!0,this.items[t].spriteFront.visible=!0,this.itemHand.removeChild(this.items[t].spriteBack),this.itemHand.removeChild(this.items[t].spriteFront),this.dialoguePanel.removeChild(this.items[t].dialogueSprite),Game.displayStore.returnPooledItem(this.items[t].spriteBack),Game.displayStore.returnPooledItem(this.items[t].spriteFront),Game.displayStore.returnPooledItem(this.items[t].dialogueSprite)},t}(Scene),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),CharacterItemShopScene=function(e){function t(t){var i=e.call(this,t)||this;return i.id="characterItemShopScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.currentItemIndex=0,this.dialogueIsOpen=!1,this.setBackgroundColor(13421653),this.game.ui.setUI("buy-items"),this.mainHolder=Game.displayStore.getContainer("gift-shop/clothes-store/main-holder"),this.bg=this.mainHolder.getSprite("gift-shop/clothes-store/bg.png"),this.itemHandHolder=this.mainHolder.getContainer("gift-shop/clothes-store/manikin-hand-holder"),this.itemHand=this.itemHandHolder.getContainer("gift-shop/clothes-store/item-hand"),this.infoBoard=this.mainHolder.getContainer("gift-shop/clothes-store/info-board"),this.infoBoard.position.y=-550,this.itemHead=this.itemHand.getSprite("gift-shop/clothes-store/manikin-head.png"),this.itemBody=this.itemHand.getSprite("gift-shop/clothes-store/manikin-body.png"),this.handSupport=this.itemHandHolder.getSprite("gift-shop/clothes-store/manikin-hand-support.png"),this.dialogue=Game.displayStore.getContainer("gift-shop/clothes-store/dialogue");var i=this.dialogue.getSprite("gift-shop/clothes-store/black.png");i.width=Game.stageWidth,i.height=Game.stageHeight,i.alpha=.8,this.dialogue.alpha=0,this.dialoguePanel=this.dialogue.getContainer("gift-shop/clothes-store/dialogue-panel"),this.dialoguePanel.scale.x=this.dialoguePanel.scale.y=0,this.sparkleHolder=this.dialoguePanel.getContainer("gift-shop/clothes-store/sparkle"),this.alert=Game.displayStore.getContainer("gift-shop/clothes-store/alert");var s=this.alert.getSprite("gift-shop/clothes-store/black.png");s.width=Game.stageWidth,s.height=Game.stageHeight,s.alpha=.8,this.alert.alpha=0,this.alertPanel=this.alert.getContainer("gift-shop/clothes-store/alert-panel"),this.alertPanel.scale.x=this.alertPanel.scale.y=0,this.alertText=Game.displayStore.getBitmapText("gift-shop-alert-text"),this.alertText.position.x=0,this.alertText.position.y=-40,this.alertText.scale.x=this.alertText.scale.y=.7,this.alertPanel.addChild(this.alertText),this.ownedIcon=Game.displayStore.getSprite("gift-shop/owned-icon"),this.priceText=Game.displayStore.getBitmapText("gift-shop-text"),this.priceText.scale.x=this.priceText.scale.y=1,this.priceText.tint=16777215,this.priceText.position.x=-55,this.priceText.position.y=380,this.priceText.text="0",this.infoBoard.addChild(this.priceText),this.titleText=Game.displayStore.getBitmapText("gift-shop-title-text"),this.titleText.position.x=-123,this.titleText.position.y=210,this.titleText.scale.x=this.titleText.scale.y=.7,this.infoBoard.addChild(this.titleText),this.descriptionText=Game.displayStore.getBitmapText("gift-shop-description-text"),this.descriptionText.position.x=-123,this.descriptionText.position.y=275,this.descriptionText.scale.x=this.descriptionText.scale.y=.5,this.descriptionText.tint=3194604,this.infoBoard.addChild(this.descriptionText),this.dialogueText=Game.displayStore.getBitmapText("gift-shop-dialogue-text"),Game.stringsManager.setTextString(this.dialogueText,"buy-item"),this.dialogueText.scale.x=this.dialogueText.scale.y*=.9,this.dialogueText.position.x=-20+Game.stringsManager.getTextOffset("buy-item").xOffset,this.dialogueText.position.y=-155+Game.stringsManager.getTextOffset("buy-item").yOffset,this.dialoguePanel.addChild(this.dialogueText),this.dialogueDescriptionText=Game.displayStore.getBitmapText("gift-shop-dialogue-description-text"),this.dialogueDescriptionText.position.x=-20,this.dialogueDescriptionText.position.y=-85,this.dialogueDescriptionText.scale.x=this.dialogueDescriptionText.scale.y=.5,this.dialogueDescriptionText.tint=3194604,this.dialoguePanel.addChild(this.dialogueDescriptionText),this.dialoguePriceText=Game.displayStore.getBitmapText("gift-shop-price-text"),this.dialoguePriceText.position.x=45,this.dialoguePriceText.position.y=-4,this.dialoguePriceText.scale.x=this.dialoguePriceText.scale.y=1,this.dialoguePriceText.text="0",this.dialoguePanel.addChild(this.dialoguePriceText),this.dialoguePanel.getSprite("gift-shop/clothes-store/ticket-icon.png").position.x=10,this.dialoguePanel.getSprite("gift-shop/clothes-store/ticket-icon.png").position.y=45,this.mainHolder.setRegPointPixels(512,315,!0),this.mainHolder.scale.x=this.mainHolder.scale.y=2,this.container.addChild(this.mainHolder),this.container.addChild(this.dialogue),this.container.addChild(this.alert),this.introAnim=new TimelineMax,this.itemHandHolder.position.y=1500,this.introAnim.add(TweenMax.to(this.mainHolder.scale,1,{x:1,y:1,ease:Power2.easeInOut}),0),this.items=new Array,this.populateItems(),this.showItem(0),this.itemHandHolder.addChild(this.ownedIcon)},t.prototype.populateItems=function(){for(var e=Game.coreData.getClothing({ride:Game.coreData.getCurrentRide().id}),t=[],i=0;i<e.length;i++){var s=Game.displayStore.getSprite("gift-shop/clothes/"+e[i].id),o=Game.displayStore.getSprite("gift-shop/clothes/"+e[i].id),a=new PIXI.Point;a.x=s.position.x,a.y=s.position.y,Game.coreData.setClothingOffset(e[i].id,a),1==e[i].isOwned?t.push({id:e[i].id,category:e[i].category,isOwned:e[i].isOwned,isEquipped:e[i].isEquipped,price:e[i].price,sprite:s,dialogueSprite:o,offset:e[i].offset}):this.items.push({id:e[i].id,category:e[i].category,isOwned:e[i].isOwned,isEquipped:e[i].isEquipped,price:e[i].price,sprite:s,dialogueSprite:o,offset:e[i].offset}),"t-shirt"==e[i].category&&(s.visible=!1,s.position.x=-132+e[i].offset.x,s.position.y=-298+e[i].offset.y,s.scale.x=1.37,s.scale.y=1.37,this.itemHand.addChild(s),this.itemHand.addChild(this.itemHead),this.itemHead.position.x=-137,this.itemHead.position.y=-470),"accessory"==e[i].category&&(s.visible=!1,s.position.x=-137+e[i].offset.x,s.position.y=-565+e[i].offset.y,s.rotation=-.02,s.scale.x=1.35,s.scale.y=1.35,this.itemHand.addChild(s)),"hat"==e[i].category&&(s.visible=!1,s.position.x=-139+e[i].offset.x,s.position.y=-645+e[i].offset.y,s.rotation=-.02,s.scale.x=1.35,s.scale.y=1.35,this.itemHand.addChild(s)),o.position.x=-180,o.position.y=0,o.rotation=-.1,o.visible=!1,this.dialoguePanel.addChild(o)}for(i=0;i<t.length;i++)this.items.push({id:t[i].id,category:t[i].category,isOwned:t[i].isOwned,isEquipped:t[i].isEquipped,price:t[i].price,sprite:t[i].sprite,dialogueSprite:t[i].dialogueSprite,offset:t[i].offset})},t.prototype.showItem=function(e){for(var t=0;t<this.items.length;t++)this.items[t].sprite.visible=!1,this.items[t].dialogueSprite.visible=!1;this.ownedIcon.scale.x=0,this.ownedIcon.scale.y=0,this.itemHandHolder.position.x=670,this.itemHandHolder.position.y=1500,this.handSupport.scale.y=0,this.handSupport.position.y=400,this.itemHand.position.y=400,this.itemHand.rotation=-1.5,this.items[e].sprite.visible=!0,this.items[e].dialogueSprite.visible=!0,this.itemHandHolder.scale.x=.8,this.itemHandHolder.scale.y=.8,this.showItemAnim=this.killTween(this.showItemAnim),this.showItemAnim=new TimelineMax,this.showItemAnim.add(TweenMax.to(this.infoBoard.position,.2,{y:-550,ease:Power1.easeIn}),.01),"t-shirt"==this.items[e].category&&(this.showItemAnim.add(TweenMax.to(this.handSupport.scale,.9,{y:1,ease:Power4.easeOut}),.05),this.showItemAnim.add(TweenMax.to(this.handSupport.position,.9,{y:0,ease:Power3.easeOut}),0),this.showItemAnim.add(TweenMax.to(this.itemHand.position,1,{y:-220,ease:Power4.easeOut}),0),this.showItemAnim.add(TweenMax.to(this.itemHand,1,{rotation:0,ease:Back.easeOut}),0),this.showItemAnim.add(TweenMax.to(this.itemHandHolder.position,.5,{y:700,ease:Power4.easeOut}),0),this.showItemAnim.add(TweenMax.to(this.bg.scale,.5,{x:1,y:1,ease:Sine.easeInOut}),0),this.showItemAnim.add(TweenMax.to(this.bg.position,.5,{x:512,y:312.5,ease:Sine.easeInOut}),0),this.ownedIcon.position.x=-100,this.ownedIcon.position.y=-400),"accessory"==this.items[e].category&&(this.showItemAnim.add(TweenMax.to(this.handSupport.scale,.9,{y:1,ease:Power4.easeOut}),.05),this.showItemAnim.add(TweenMax.to(this.handSupport.position,.9,{y:0,ease:Power3.easeOut}),0),this.showItemAnim.add(TweenMax.to(this.itemHand.position,1,{y:-220,ease:Power4.easeOut}),0),this.showItemAnim.add(TweenMax.to(this.itemHand,1,{rotation:0,ease:Back.easeOut}),0),this.showItemAnim.add(TweenMax.to(this.itemHandHolder.position,.5,{x:720,y:1e3,ease:Power4.easeOut}),0),this.showItemAnim.add(TweenMax.to(this.itemHandHolder.scale,.5,{x:1,y:1,ease:Power4.easeOut}),0),this.showItemAnim.add(TweenMax.to(this.bg.scale,.5,{x:1.3,y:1.3,ease:Sine.easeInOut}),0),this.showItemAnim.add(TweenMax.to(this.bg.position,.5,{x:512,y:280,ease:Sine.easeInOut}),0),this.ownedIcon.position.x=-100,this.ownedIcon.position.y=-700),"hat"==this.items[e].category&&(this.showItemAnim.add(TweenMax.to(this.handSupport.scale,.9,{y:1,ease:Power4.easeOut}),.05),this.showItemAnim.add(TweenMax.to(this.handSupport.position,.9,{y:0,ease:Power3.easeOut}),0),this.showItemAnim.add(TweenMax.to(this.itemHand.position,1,{y:-220,ease:Power4.easeOut}),0),this.showItemAnim.add(TweenMax.to(this.itemHand,1,{rotation:0,ease:Back.easeOut}),0),this.showItemAnim.add(TweenMax.to(this.itemHandHolder.position,.5,{x:720,y:1100,ease:Power4.easeOut}),0),this.showItemAnim.add(TweenMax.to(this.itemHandHolder.scale,.5,{x:1,y:1,ease:Power4.easeOut}),0),this.showItemAnim.add(TweenMax.to(this.bg.scale,.5,{x:1.2,y:1.2,ease:Sine.easeInOut}),0),this.showItemAnim.add(TweenMax.to(this.bg.position,.5,{x:512,y:250,ease:Sine.easeInOut}),0),this.ownedIcon.position.x=-100,this.ownedIcon.position.y=-700),this.showItemAnim.call(function(){this.priceText.text=this.dialoguePriceText.text=this.items[e].price.toString(),Game.stringsManager.setTextString(this.descriptionText,this.items[e].id),this.descriptionText.scale.x=this.descriptionText.scale.y*=.5,this.descriptionText.position.x=-123+Game.stringsManager.getTextOffset(this.items[e].id).xOffset,this.descriptionText.position.y=269+Game.stringsManager.getTextOffset(this.items[e].id).yOffset,Game.stringsManager.setTextString(this.titleText,this.items[e].category),this.titleText.scale.x=this.titleText.scale.y*=.7,this.titleText.position.x=-123+Game.stringsManager.getTextOffset(this.items[e].category).xOffset,this.titleText.position.y=210+Game.stringsManager.getTextOffset(this.items[e].category).yOffset},null,this,.2),this.showItemAnim.call(function(){var e=Game.getRandom(1,3,!0);1==e?Game.playSound("gift-shop/swish-long-1.mp3"):2==e?Game.playSound("gift-shop/swish-long-2.mp3"):3==e&&Game.playSound("gift-shop/swish-long-3.mp3")},null,this,0),this.updateCurrentItem()},t.prototype.updateCurrentItem=function(){1==this.items[this.currentItemIndex].isOwned?this.showItemAnim.add(TweenMax.to(this.ownedIcon.scale,1,{x:1,y:1,ease:Elastic.easeOut}),.5):(this.showItemAnim.add(TweenMax.to(this.ownedIcon.scale,.1,{x:0,y:0,ease:Power1.easeOut}),.01),this.showItemAnim.add(TweenMax.to(this.infoBoard.position,.2,{y:-100,ease:Power1.easeIn}),.5),this.showItemAnim.add(TweenMax.to(this.infoBoard.position,.8,{y:-55,ease:Elastic.easeOut}),.7),this.showItemAnim.call(function(){Game.playSound("gift-shop/sign-down.mp3",.5)},null,this,.5))},t.prototype.canAffordCurrentItem=function(){var e=!1;return Game.coreData.getCurrentTickets()>=this.items[this.currentItemIndex].price&&(e=!0),e},t.prototype.showPreviousItem=function(){--this.currentItemIndex<0&&(this.currentItemIndex=this.items.length-1),this.showItem(this.currentItemIndex)},t.prototype.showNextItem=function(){++this.currentItemIndex>=this.items.length&&(this.currentItemIndex=0),this.showItem(this.currentItemIndex)},t.prototype.showAlert=function(e){this.game.ui.setUI("alert"),Game.stringsManager.setTextString(this.alertText,e),this.alertText.scale.x=this.alertText.scale.y*=.7,this.alertText.position.x=0+Game.stringsManager.getTextOffset(e).xOffset,this.alertText.position.y=-40+Game.stringsManager.getTextOffset(e).yOffset,this.alertText.position.x=-this.alertText.width/2,this.showDialogueAnim=this.killTween(this.showDialogueAnim),this.showDialogueAnim=new TimelineMax,this.showDialogueAnim.add(TweenMax.to(this.alertPanel.scale,1,{x:1,y:1,ease:Elastic.easeOut}),0),this.showDialogueAnim.add(TweenMax.to(this.alert,.5,{alpha:1,ease:Power2.easeOut}),0)},t.prototype.hideAlert=function(){this.game.ui.setUI("buy-items"),this.showDialogueAnim=this.killTween(this.showDialogueAnim),this.showDialogueAnim=new TimelineMax,this.showDialogueAnim.add(TweenMax.to(this.alertPanel.scale,.2,{x:0,y:0,ease:Back.easeIn}),0),this.showDialogueAnim.add(TweenMax.to(this.alert,.3,{alpha:0,ease:Power2.easeOut}),0),Game.playSound("scale-down.mp3",.3)},t.prototype.showDialogue=function(){if(1==this.items[this.currentItemIndex].isOwned)this.showAlert("you-already-own-this-item");else if(0==this.canAffordCurrentItem())this.showAlert("you-cant-afford-this-item");else{this.dialogueIsOpen=!0,this.game.ui.setUI("buy-dialogue");var e=this.sparkleHolder.getSprite("gift-shop/clothes-store/glow.png"),t=this.sparkleHolder.getSprite("gift-shop/clothes-store/sparkle-1.png");t.blendMode=PIXI.BLEND_MODES.ADD,e.blendMode=PIXI.BLEND_MODES.ADD,t.scale.x=t.scale.y=0,e.scale.x=e.scale.y=0;var i=this.items[this.currentItemIndex].dialogueSprite;i.scale.x=i.scale.y=0,this.dialogueDescriptionText.text=this.items[this.currentItemIndex].id,Game.stringsManager.setTextString(this.dialogueDescriptionText,this.items[this.currentItemIndex].id),this.dialogueDescriptionText.scale.x=this.dialogueDescriptionText.scale.y*=.5,this.dialogueDescriptionText.position.x=-20+Game.stringsManager.getTextOffset(this.items[this.currentItemIndex].id).xOffset,this.dialogueDescriptionText.position.y=-80+Game.stringsManager.getTextOffset(this.items[this.currentItemIndex].id).yOffset,this.showDialogueAnim=this.killTween(this.showDialogueAnim),this.showDialogueAnim=new TimelineMax,this.showDialogueAnim.add(TweenMax.to(this.dialoguePanel.scale,1,{x:1,y:1,ease:Elastic.easeOut}),0),this.showDialogueAnim.add(TweenMax.to(this.dialogue,.5,{alpha:1,ease:Power2.easeOut}),0),this.showDialogueAnim.add(TweenMax.to(i.scale,1,{x:1,y:1,ease:Elastic.easeOut}),.4),this.showDialogueAnim.add(TweenMax.to(t.scale,1,{x:1,y:1,ease:Elastic.easeOut}),.2),this.showDialogueAnim.add(TweenMax.to(e.scale,1,{x:1,y:1,ease:Elastic.easeOut}),.3),this.showDialogueAnim.add(TweenMax.to(t,20,{rotation:2*Math.PI,ease:Power0.easeOut,repeat:-1}),0),this.showDialogueAnim.add(TweenMax.to(e.scale,1,{x:.8,y:.8,ease:Power1.easeInOut,repeat:-1,yoyo:!0}),0)}Game.playSound("scale-up.mp3",.3)},t.prototype.hideDialogue=function(){this.game.ui.setUI("buy-items"),this.dialogueIsOpen=!1,this.showDialogueAnim=this.killTween(this.showDialogueAnim),this.showDialogueAnim=new TimelineMax,this.showDialogueAnim.add(TweenMax.to(this.dialoguePanel.scale,.2,{x:0,y:0,ease:Back.easeIn}),0),this.showDialogueAnim.add(TweenMax.to(this.dialogue,.3,{alpha:0,ease:Power2.easeOut}),0),this.updateCurrentItem(),Game.playSound("scale-down.mp3",.3)},t.prototype.buyItem=function(){this.items[this.currentItemIndex].isOwned=!0,Game.coreData.buyClothingItem(this.items[this.currentItemIndex].id),this.hideDialogue(),this.buyItemAnim=this.killTween(this.buyItemAnim),this.buyItemAnim=new TimelineMax,this.ownedIcon.visible=!0,this.ownedIcon.scale.x=this.ownedIcon.scale.y=0,this.buyItemAnim.add(TweenMax.to(this.ownedIcon.scale,1,{ease:Elastic.easeOut,x:1,y:1}))},t.prototype.uiClicked=function(t){switch(e.prototype.uiClicked.call(this,t),t.id){case"playbuttonlarge":this.game.setScene("hubScene",!1);break;case"back-button":this.game.setScene("giftShopScene",!0,[-360,!0]);break;case"left-arrow-button":this.showPreviousItem();break;case"right-arrow-button":this.showNextItem();break;case"basket-button":this.showDialogue();break;case"close-button":1==this.dialogueIsOpen?this.hideDialogue():this.hideAlert();break;case"accept-button":this.buyItem()}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){e.prototype.tick.call(this)},t.prototype.keyDown=function(e){},t.prototype.keyUp=function(e){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t),this.pauseResumeTween(this.introAnim,"pause"),this.pauseResumeTween(this.showDialogueAnim,"pause"),this.pauseResumeTween(this.showItemAnim,"pause"),this.pauseResumeTween(this.buyItemAnim,"pause")},t.prototype.resume=function(){e.prototype.resume.call(this),this.pauseResumeTween(this.introAnim,"resume"),this.pauseResumeTween(this.showDialogueAnim,"resume"),this.pauseResumeTween(this.showItemAnim,"resume"),this.pauseResumeTween(this.buyItemAnim,"resume")},t.prototype.destroy=function(){e.prototype.destroy.call(this),Game.stopSound("gift-shop/swish-long-1.mp3"),Game.stopSound("gift-shop/swish-long-2.mp3"),Game.stopSound("gift-shop/swish-long-3.mp3"),Game.stopSound("gift-shop/sign-down.mp3"),Game.stopSound("scale-up.mp3"),Game.stopSound("scale-down.mp3"),this.introAnim=this.killTween(this.introAnim),this.showDialogueAnim=this.killTween(this.showDialogueAnim),this.showItemAnim=this.killTween(this.showItemAnim),this.buyItemAnim=this.killTween(this.buyItemAnim),this.itemHand.removeChild(this.ownedIcon);for(var t=0;t<this.items.length;t++)this.items[t].sprite.visible=!0,this.itemHand.removeChild(this.items[t].sprite),this.dialoguePanel.removeChild(this.items[t].dialogueSprite),Game.displayStore.returnPooledItem(this.items[t].sprite),Game.displayStore.returnPooledItem(this.items[t].dialogueSprite)},t}(Scene),CustomiseScrollingItem=function(){function e(e,t,i,s,o){this.scene=s,this.game=s.game,this.id=e.id,this.index=i,this.isEquipped=e.isEquipped,this.spacing=t,this.topLayer=e.topLayer,this.sprite=Game.displayStore.getSprite("gift-shop/clothes/"+this.id),this.offset=new PIXI.Point,this.offset.x=this.sprite.position.x,this.offset.y=this.sprite.position.y,Game.coreData.setClothingOffset(this.id,this.offset),this.container=o,this.container.addChild(this.sprite),this.sprite.position.x=this.spacing*this.index+this.offset.x,this.origPosition=new PIXI.Point,this.origPosition.x=this.sprite.position.x,this.origPosition.y=this.sprite.position.y}return e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.destroyed=!0,this.sprite.parent.removeChild(this.sprite),Game.displayStore.returnPooledItem(this.sprite)},e.prototype.distanceFromCentre=function(){return this.container.position.x+this.sprite.position.x-Game.stageWidth/2},e.prototype.tick=function(){1!=this.destroyed&&this.sprite.parent==this.container&&(this.sprite.scale.x=this.sprite.scale.y=this.scene.avatar.scale.x-Math.abs(this.distanceFromCentre())/500,this.sprite.rotation=this.distanceFromCentre()/1500,this.sprite.scale.x<.4?this.sprite.alpha=0:this.sprite.alpha=1)},e}(),CustomisePallette=function(){function e(e,t,i,s){this.scene=t,this.game=t.game,this.id=e,this.colours=i,this.container=Game.displayStore.getContainer("gift-shop/customise-avatar/"+this.id+"-colour-pallette");var o=this.id+"-colour";this.titleText=Game.displayStore.getBitmapText("gift-shop/"+this.id+"-pallette-text"),Game.stringsManager.setTextString(this.titleText,o),this.titleText.position.x=180-this.titleText.width/2+Game.stringsManager.getTextOffset(o).xOffset,this.titleText.position.y=15+Game.stringsManager.getTextOffset(o).yOffset,this.titleText.tint=16734722,this.swatches=[],this.container.addChild(this.titleText),this.buildSwatches(),this.addListeners(this)}return e.prototype.buildSwatches=function(){for(var e=0,t=0;t<3;t++)for(var i=0;i<3;i++){var s=Game.displayStore.getContainer("gift-shop/customise-avatar/swatch-holder"),o=Game.displayStore.getSprite("gift-shop/customise-avatar/swatch"),a=Game.displayStore.getSprite("gift-shop/customise-avatar/swatch-surround");o.tint=this.colours[e],e++,s.position.x=73+112*i,s.position.y=143+112*t,a.scale.x=a.scale.y=.85,s.addChild(a),s.addChild(o),this.container.addChild(s),this.swatches.push({swatch:o,swatchSurround:a,swatchHolder:s,index:e-1})}this.container.position.x=-370},e.prototype.setColour=function(e){var t=-1;this.interactionAnimation=this.scene.killTween(this.interactionAnimation),this.interactionAnimation=new TimelineMax;for(var i=0;i<this.swatches.length;i++)this.swatches[i].swatch.tint==e?t=i:(this.interactionAnimation.add(TweenMax.to(this.swatches[i].swatchSurround.scale,.2,{x:.85,y:.85,ease:Expo.easeOut}),0),this.interactionAnimation.add(TweenMax.to(this.swatches[i].swatch.scale,.5,{x:1,y:1,ease:Elastic.easeOut}),0));-1!=t&&(this.interactionAnimation.add(TweenMax.to(this.swatches[t].swatchSurround.scale,.3,{x:1,y:1,ease:Expo.easeOut}),0),this.interactionAnimation.add(TweenMax.to(this.swatches[t].swatch.scale,.5,{x:.8,y:.8,ease:Elastic.easeOut}),0))},e.prototype.addListeners=function(e){for(var t=0;t<this.swatches.length;t++){var i;(i=this.swatches[t].swatch).buttonMode=!0,i.interactive=!0,this.swatches[t].swatchHolder.buttonMode=!0,this.swatches[t].swatchHolder.interactive=!0,this.swatches[t].swatchSurround.interactive=!1,Game.onDesktop?i.on("mousedown",function(t){e.inputDown(e,t),i.on("mouseup",function(t){e.inputUp(e,t)}),i.on("mouseupoutside",function(t){e.inputOut(e,t)})}):i.on("touchstart",function(t){e.inputDown(e,t),i.on("touchend",function(t){e.inputUp(e,t)}),i.on("touchendoutside",function(t){e.inputOut(e,t)})})}},e.prototype.inputDown=function(e,t){var i=t.target;"skin"==e.id?(Game.coreData.setAvatarAttributes({skinColour:i.tint}),e.scene.setSkinColour()):(Game.coreData.setAvatarAttributes({hairColour:i.tint}),e.scene.setHairColour())},e.prototype.inputUp=function(e,t){},e.prototype.inputOut=function(e,t){for(var i,s=t.target,o=0;o<this.swatches.length;o++)this.swatches[o].swatch.tint==s.tint&&(i=o);var a=e.swatches[i].swatchSurround;e.interactionAnimation=e.scene.killTween(e.interactionAnimation),e.interactionAnimation=new TimelineMax,e.interactionAnimation.add(TweenMax.to(a.scale,.2,{x:.85,y:.85,ease:Expo.easeOut}))},e.prototype.removeListeners=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.interactionAnimation=this.scene.killTween(this.interactionAnimation);for(var e=0;e<this.swatches.length;e++)this.swatches[e].swatchHolder.removeChild(this.swatches[e].swatch),this.swatches[e].swatchHolder.removeChild(this.swatches[e].swatchSurround),this.swatches[e].swatch.removeAllListeners(),Game.displayStore.returnPooledItem(this.swatches[e].swatch),Game.displayStore.returnPooledItem(this.swatches[e].swatchHolder),Game.displayStore.returnPooledItem(this.swatches[e].swatchSurround)},e}(),ClawPhysicsManager=function(){function e(e,t){this.physicsEnabled=!0,this.CLAW=Math.pow(2,0),this.JOYSTICK=Math.pow(2,1),this.BALL=Math.pow(2,2),this.ARENA=Math.pow(2,3),this.DUMMYBALL=Math.pow(2,4),this.armLeftShapeData=[{shape:[56,7,20,44,2,60,22,26,47,2]},{shape:[6,66,2,60,20,44]},{shape:[6,66,15,110,21,160,2,98,2,60]},{shape:[30,162,21,160,15,110]},{shape:[30,162,30,237,22,237,21,160]}],this.armRightShapeData=[{shape:[34,24,54,55,36,40,0,3,9,0]},{shape:[54,55,50,62,36,40]},{shape:[55,95,36,160,50,62,54,55]},{shape:[36,160,27,160,44,102]},{shape:[35,235,27,236,27,160,36,160]}],this.resizeRatio=1,this.scene=e,this.mainContainer=t,this.boundBodies=[]}return e.prototype.initPhysicsWorld=function(){this.world=new p2.World({gravity:[0,-730]}),this.stepCount=0,this.autoDropping=!1,this.autoResetting=!1,this.clawInPlace=!1,this.sliderPower=0,this.didWin=!1,this.clawIsMoving=!1,this.ballSoundCount=0,this.ballSoundThreshold=3,this.world.broadphase=new p2.NaiveBroadphase(1),this.world.defaultContactMaterial.restitution=.2,this.world.defaultContactMaterial.friction=.16,this.world.defaultContactMaterial.contactSkinSize=.8,this.world.defaultContactMaterial.stiffness=9999999999,this.world.defaultContactMaterial.relaxation=5,this.clawMotorSpeed=-.45,this.clawPowerMultiplier=30,this.backgroundBody=new p2.Body({mass:0}),this.rightWallBody=new p2.Body({mass:0,position:[Game.stageWidth-70,0],angle:Math.PI/2+.1}),this.leftWallBody=new p2.Body({mass:0,position:[60,0],angle:-Math.PI/2}),this.floorBody=new p2.Body({mass:0,position:[0,-300]}),this.boxFloorBody=new p2.Body({mass:40,position:[620,30]}),this.boxFloorBody.angle=-.1,this.pitDoorBody=new p2.Body({mass:0,position:[-140,-10]}),this.pitDoorShape=new p2.Box({width:250,height:100}),this.pitDoorBody.addShape(this.pitDoorShape),this.pitDoorShape.collisionGroup=this.ARENA,this.pitDoorShape.collisionMask=this.BALL|this.CLAW,this.pitSensorBody=new p2.Body({mass:0,position:[0,-50]}),this.pitSensorShape=new p2.Plane,this.pitSensorBody.addShape(this.pitSensorShape),this.pitSensorShape.sensor=!0,this.pitSensorShape.collisionGroup=this.ARENA,this.pitSensorShape.collisionMask=this.BALL,this.sideGlassBody=new p2.Body({mass:0,position:[280,80],ccdSpeedThreshold:0,ccdIterations:150}),this.leftWallShape=new p2.Plane,this.leftWallShape.collisionGroup=this.ARENA,this.leftWallShape.collisionMask=this.BALL|this.CLAW|this.DUMMYBALL,this.rightWallShape=new p2.Plane,this.rightWallShape.collisionGroup=this.ARENA,this.rightWallShape.collisionMask=this.BALL|this.CLAW|this.DUMMYBALL,this.floorShape=new p2.Plane,this.floorShape.collisionGroup=this.ARENA,this.floorShape.collisionMask=this.BALL,this.boxFloorShape=new p2.Box({width:600,height:100}),this.boxFloorShape.collisionGroup=this.ARENA,this.boxFloorShape.collisionMask=this.BALL|this.DUMMYBALL,this.sideGlassShape=new p2.Box({width:20,height:378}),this.sideGlassShape.collisionGroup=this.ARENA,this.sideGlassShape.collisionMask=this.BALL|this.CLAW|this.DUMMYBALL,this.sideGlassBody.addShape(this.sideGlassShape),this.leftWallBody.addShape(this.leftWallShape),this.rightWallBody.addShape(this.rightWallShape),this.floorBody.addShape(this.floorShape),this.boxFloorBody.addShape(this.boxFloorShape),this.joystickBody=new p2.Body({mass:5,position:[457,220]}),this.joystickBody.angularDamping=1,this.joystickBody.damping=.99,this.joystickShape=new p2.Circle({radius:60}),this.joystickShape.collisionGroup=this.JOYSTICK,this.joystickShape.collisionMask=this.JOYSTICK,this.joystickBody.addShape(this.joystickShape,[0,-35]),this.joystickConstraint=new p2.RevoluteConstraint(this.backgroundBody,this.joystickBody,{collideConnected:!1,localPivotA:[457,60],localPivotB:[0,-160]}),this.joystickConstraint.enableMotor(),this.joystickConstraint.setMotorSpeed(0),this.joystickConstraint.setLimits(-.7,.7),this.fingerPoint=new p2.Body({mass:0}),this.fingerPointShape=new p2.Circle({radius:2}),this.fingerPointShape.sensor=!0,this.fingerPointShape.collisionGroup=this.JOYSTICK,this.fingerPointShape.collisionMask=this.JOYSTICK,this.fingerPoint.addShape(this.fingerPointShape),this.clawTrackerBody=new p2.Body({mass:30,position:[512,Game.stageHeight],fixedRotation:!0}),this.cordBracketLeftShape=new p2.Circle({radius:20}),this.cordBracketRightShape=new p2.Circle({radius:20}),this.clawTrackerBody.damping=.999999,this.clawTrackerVertBody=new p2.Body({mass:30,position:[512,Game.stageHeight+550]}),this.clawTrackerVertBody.damping=.999999999,this.clawCordBody=new p2.Body({mass:10,position:[512,Game.stageHeight+450]}),this.clawCordShape=new p2.Box({width:12,height:285}),this.clawCordBody.addShape(this.clawCordShape,[0,0]),this.clawCordBody.angularDamping=.4,this.clawCordBody.damping=.4,this.clawBodyBody=new p2.Body({mass:45,position:[512,Game.stageHeight+360]}),this.clawBodyShape=new p2.Box({width:65,height:95}),this.clawBodyShape.collisionGroup=this.CLAW,this.clawBodyShape.collisionMask=this.BALL,this.clawBodyBody.addShape(this.clawBodyShape),this.clawBodyBody.angularDamping=.4,this.clawBodyBody.damping=.2,this.armLinkLeftBody=new p2.Body({mass:10,position:[Game.stageWidth/2-30,Game.stageHeight+340]}),this.armLinkLeftShape=new p2.Box({width:60,height:10}),this.armLinkLeftBody.addShape(this.armLinkLeftShape),this.armLinkLeftShape.collisionGroup=this.CLAW,this.armLinkLeftShape.collisionMask=this.BALL|this.ARENA,this.armLinkRightBody=new p2.Body({mass:10,position:[Game.stageWidth/2+30,Game.stageHeight+340]}),this.armLinkRightShape=new p2.Box({width:60,height:10}),this.armLinkRightBody.addShape(this.armLinkRightShape),this.armLinkLeftShape.collisionGroup=this.CLAW,this.armLinkLeftShape.collisionMask=this.BALL|this.ARENA,this.plungerBody=new p2.Body({mass:35,position:[512,Game.stageHeight+360]}),this.plungerShape=new p2.Box({width:30,height:80}),this.plungerShape.collisionGroup=this.CLAW,this.plungerShape.collisionMask=this.BALL|this.ARENA,this.plungerBody.addShape(this.plungerShape),this.plungerBody.damping=.4,this.armLeftBody=new p2.Body({mass:20,position:[Game.stageWidth/2-40,Game.stageHeight+170],ccdSpeedThreshold:0,ccdIterations:150}),this.createComplexShape(this.armLeftBody,this.armLeftShapeData,this.CLAW,this.CLAW|this.BALL|this.ARENA),this.armLeftBody.damping=.4,this.armLeftBody.angularDamping=.8,this.armLeftBody.adjustCenterOfMass(),this.armRightBody=new p2.Body({mass:25,position:[Game.stageWidth/2+40,Game.stageHeight+170],ccdSpeedThreshold:0,ccdIterations:150}),this.createComplexShape(this.armRightBody,this.armRightShapeData,this.CLAW,this.CLAW|this.BALL|this.ARENA),this.armRightBody.damping=.4,this.armRightBody.angularDamping=.8,this.armRightBody.adjustCenterOfMass(),this.clawBodyCordConstraint=new p2.RevoluteConstraint(this.clawCordBody,this.clawBodyBody,{collideConnected:!1,localPivotA:[0,-142],localPivotB:[0,40]}),this.clawBodyCordConstraint.setStiffness(999999999999),this.clawBodyCordConstraint.setRelaxation(2),this.armLeftTopConstraint=new p2.RevoluteConstraint(this.clawBodyBody,this.armLeftBody,{collideConnected:!1,localPivotA:[-35,-30],localPivotB:[30,232]}),this.armLeftTopConstraint.setStiffness(Math.pow(10,50)),this.armLeftTopConstraint.setRelaxation(.4),this.armLeftTopConstraint.enableMotor(),this.armLeftTopConstraint.setMotorSpeed(0),this.armRightTopConstraint=new p2.RevoluteConstraint(this.clawBodyBody,this.armRightBody,{collideConnected:!1,localPivotA:[35,-30],localPivotB:[26,232]}),this.armRightTopConstraint.setStiffness(Math.pow(10,50)),this.armRightTopConstraint.setRelaxation(.4),this.armRightTopConstraint.enableMotor(),this.armRightTopConstraint.setMotorSpeed(0),this.armLeftConstraint=new p2.RevoluteConstraint(this.armLeftBody,this.armLinkLeftBody,{collideConnected:!1,localPivotA:[26,162],localPivotB:[-28,0]}),this.armLeftConstraint.setStiffness(99999999999999),this.armLeftConstraint.setRelaxation(1),this.armRightConstraint=new p2.RevoluteConstraint(this.armRightBody,this.armLinkRightBody,{collideConnected:!1,localPivotA:[30,162],localPivotB:[28,0]}),this.armRightConstraint.setStiffness(99999999999999),this.armRightConstraint.setRelaxation(.2),this.armLeftPlungerConstraint=new p2.RevoluteConstraint(this.plungerBody,this.armLinkLeftBody,{collideConnected:!1,localPivotA:[-13,-32],localPivotB:[28,0]}),this.armLeftPlungerConstraint.setStiffness(1e22),this.armLeftPlungerConstraint.setRelaxation(.2),this.armRightPlungerConstraint=new p2.RevoluteConstraint(this.plungerBody,this.armLinkRightBody,{collideConnected:!1,localPivotA:[13,-32],localPivotB:[-28,0]}),this.armRightPlungerConstraint.setStiffness(1e22),this.armRightPlungerConstraint.setRelaxation(.2),this.trackerConstraint=new p2.PrismaticConstraint(this.backgroundBody,this.clawTrackerBody,{collideConnected:!1,localAxisA:[1,0],localAnchorA:[Game.stageWidth/2,Game.stageHeight+400]}),this.trackerConstraint.enableMotor(),this.trackerConstraint.motorSpeed=0,this.trackerConstraint.setLimits(-380,380),this.trackerVertConstraint=new p2.PrismaticConstraint(this.clawTrackerBody,this.clawTrackerVertBody,{collideConnected:!1,localAxisA:[0,1],localAnchorA:[0,200]}),this.trackerVertConstraint.enableMotor(),this.trackerVertConstraint.motorSpeed=0,this.trackerCordConstraint=new p2.RevoluteConstraint(this.clawTrackerVertBody,this.clawCordBody,{collideConnected:!1,localPivotA:[0,0],localPivotB:[0,100]}),this.trackerCordConstraint.setStiffness(9999999),this.trackerCordConstraint.setRelaxation(50),this.plungerConstraint=new p2.PrismaticConstraint(this.clawBodyBody,this.plungerBody,{collideConnected:!1,localAxisA:[0,1],localAnchorA:[0,-40],localAnchorB:[0,-40]}),this.plungerConstraint.enableMotor(),this.plungerConstraint.motorSpeed=0,this.plungerConstraint.setLimits(-50,-50),this.plungerConstraint.setStiffness(1e16),this.plungerConstraint.setRelaxation(.5),this.floorConstraint=new p2.LockConstraint(this.backgroundBody,this.boxFloorBody,{collideConnected:!1,localOffsetB:[620,30]}),this.clawBodyBody.angularDamping=1,this.clawBodyBody.damping=1,this.world.addBody(this.fingerPoint),this.world.addBody(this.backgroundBody),this.world.addBody(this.joystickBody),this.world.addBody(this.clawBodyBody),this.world.addBody(this.clawTrackerBody),this.world.addBody(this.clawTrackerVertBody),this.world.addBody(this.clawCordBody),this.world.addBody(this.leftWallBody),this.world.addBody(this.rightWallBody),this.world.addBody(this.floorBody),this.world.addBody(this.boxFloorBody),this.world.addBody(this.plungerBody),this.world.addBody(this.armLeftBody),this.world.addBody(this.armRightBody),this.world.addBody(this.armLinkLeftBody),this.world.addBody(this.armLinkRightBody),this.world.addBody(this.sideGlassBody),this.world.addBody(this.pitDoorBody),this.world.addBody(this.pitSensorBody),this.world.addConstraint(this.joystickConstraint),this.world.addConstraint(this.trackerCordConstraint),this.world.addConstraint(this.clawBodyCordConstraint),this.world.addConstraint(this.trackerConstraint),this.world.addConstraint(this.trackerVertConstraint),this.world.addConstraint(this.plungerConstraint),this.world.addConstraint(this.armLeftTopConstraint),this.world.addConstraint(this.armRightTopConstraint),this.world.addConstraint(this.armLeftConstraint),this.world.addConstraint(this.armRightConstraint),this.world.addConstraint(this.armLeftPlungerConstraint),this.world.addConstraint(this.armRightPlungerConstraint),this.world.addConstraint(this.floorConstraint);var e=this;this.world.on("beginContact",function(t){e.checkCollision(e,t)}),this.world.on("endContact",function(t){e.checkEndCollision(e,t)}),this.world.on("postStep",function(e){}),this.physicsEnabled=!0},e.prototype.createBall=function(e,t){var i,s;return i=new p2.Body({mass:50,position:[700+Game.getRandom(0,100),500+150*e]}),s=new p2.Circle({radius:58}),i.damping=.5,s.collisionGroup=this.BALL,s.collisionMask=this.BALL|this.CLAW|this.ARENA|this.DUMMYBALL,i.addShape(s),i.angle=Game.getRandom(0,2*Math.PI),this.world.addBody(i),i},e.prototype.createDummyBall=function(e){var t,i;return t=new p2.Body({mass:20,position:[390+195*e,120]}),i=new p2.Circle({radius:45}),t.damping=.8,i.collisionGroup=this.DUMMYBALL,i.collisionMask=this.BALL|this.ARENA,t.addShape(i),this.world.addBody(t),t},e.prototype.setClawMotorSpeed=function(e){var t=0,i=0,s=e+this.clawBodyBody.angle;t=this.armLeftBody.angle-s,i=this.armRightBody.angle+s,this.armLeftTopConstraint.setMotorSpeed(t*this.clawPowerMultiplier),this.armRightTopConstraint.setMotorSpeed(i*this.clawPowerMultiplier)},e.prototype.setSliderMotorSpeed=function(e){this.trackerConstraint.motorSpeed=e},e.prototype.moveJoystick=function(e){var t=0;t=this.joystickBody.angle-e,this.joystickConstraint.setMotorSpeed(100*t),0!=this.scene.inputManager.controlsEnabled&&(this.sliderPower=e>.2?-130:e<-.2?130:0)},e.prototype.intro=function(){this.trackerVertConstraint.setLimits(-310,130),this.trackerVertConstraint.motorSpeed=-150,TweenMax.delayedCall(1.2,Game.playSound,["claw/ratchet.mp3"])},e.prototype.unlockDoor=function(){this.pitDoorBody.position[0]=-140},e.prototype.dropClaw=function(){this.didWin=!1;var e=Game.getRandom(1,60);this.trackerVertConstraint.motorSpeed=-55,this.trackerVertConstraint.disableMotor(),this.clawMotorSpeed=-.55,this.plungerConstraint.motorSpeed=-30,this.dropTimeline=this.scene.killTween(this.dropTimeline),this.dropTimeline=new TimelineMax,this.dropTimeline.call(function(){this.trackerVertConstraint.setLimits(-530,-310),this.plungerConstraint.setLimits(-50,-20)},null,this,.5),this.dropTimeline.call(function(){this.clawPowerMultiplier=200},null,this,2),TweenMax.to(this.plungerConstraint,1,{motorSpeed:30,delay:2}),this.dropTimeline.add(TweenMax.to(this,1,{clawMotorSpeed:.1,ease:Power0.easeOut}),2),this.dropTimeline.call(function(){this.trackerVertConstraint.enableMotor()},null,this,2.5),this.dropTimeline.add(TweenMax.to(this.trackerVertConstraint,.5,{motorSpeed:80}),2.5),this.dropTimeline.add(TweenMax.to(this.trackerVertConstraint,.1,{motorSpeed:0}),4.5),this.dropTimeline.call(function(){this.trackerVertConstraint.setLimits(-310,-310),this.sliderPower=-100,this.autoDropping=!0,this.trackerCordConstraint.setRelaxation(50)},null,this,"+=0.2"),this.dropTimeline.add(TweenMax.to(this,Game.getRandom(1,3),{clawPowerMultiplier:e,ease:Power1.easeIn}),3),this.dropTimeline.call(Game.playSound,["claw/ballpit-land.mp3"],this,.85),this.dropTimeline.call(Game.playSound,["claw/clamp.mp3",.9],this,2),this.dropTimeline.call(Game.playSound,["claw/ratchet.mp3",.5],this,3.7)},e.prototype.releaseJoystick=function(){this.sliderPower=0},e.prototype.setFingerPoint=function(e){this.fingerPoint.position[0]=e.x,this.fingerPoint.position[1]=Game.stageHeight-e.y},e.prototype.collectedBall=function(e){this.pitDoorBody.position[0]=140,this.didWin=!0,this.world.removeBody(e),this.scene.wonPrize(e),Game.playSound("claw/collect.mp3")},e.prototype.ballPassedPit=function(e){this.pitDoorBody.position[0]=140,this.scene.lockDoor()},e.prototype.fadeBall=function(e){this.scene.fadeBall(e)},e.prototype.checkPointOverlap=function(e){var t=!1;return 1==this.joystickBody.overlaps(e)&&(t=!0),t},e.prototype.stepPhysics=function(){if(0!=this.physicsEnabled&&this.world){this.world.step(1/30);for(var e=0;e<this.boundBodies.length;e++)this.boundBodies[e].sprite.position.x=this.boundBodies[e].body.position[0],this.boundBodies[e].sprite.position.y=Game.stageHeight-this.boundBodies[e].body.position[1],this.boundBodies[e].sprite.rotation=-this.boundBodies[e].body.angle;1==this.autoDropping&&this.clawTrackerBody.position[0]<220&&this.sliderPower<0&&(this.sliderPower=0,this.dropTimeline.add([TweenMax.to(this,.4,{clawMotorSpeed:-.45,delay:.2}),TweenMax.to(this.plungerConstraint,.4,{motorSpeed:-30,delay:.2})],"+=0.3"),this.dropTimeline.call(function(){this.plungerConstraint.motorSpeed=0,this.plungerConstraint.setLimits(-50,-50)},null,this,"+=0.3"),this.dropTimeline.call(function(){this.sliderPower=100,this.autoResetting=!0},null,this,"+=0.8"),this.dropTimeline.call(Game.playSound,["claw/clamp.mp3",.9],this,.8)),1==this.autoResetting&&this.clawTrackerBody.position[0]>380&&this.sliderPower>0&&(this.autoResetting=!1,this.sliderPower=0,this.autoDropping=!1,0==this.didWin&&this.scene.showDialogue("lost"),Game.stopSound("claw/servo-loop.mp3"),Game.playSound("claw/turn-off.mp3")),0==this.clawInPlace&&this.clawTrackerVertBody.position[1]<890&&(this.clawInPlace=!0,this.clawBodyBody.angularDamping=.4,this.clawBodyBody.damping=.2,this.scene.startGameplay(),this.clawTrackerBody.addShape(this.cordBracketLeftShape,[-35,-280]),this.clawTrackerBody.addShape(this.cordBracketRightShape,[35,-280])),this.ballSoundCount<this.ballSoundThreshold&&this.ballSoundCount++,this.setSliderMotorSpeed(this.sliderPower),this.setClawMotorSpeed(this.clawMotorSpeed);var t=Math.abs(this.sliderPower);t>0&&0==this.clawIsMoving&&(Game.playSound("claw/servo-start.mp3",.7),this.delayedServoStartSound=TweenMax.delayedCall(.35,Game.playSound,["claw/servo-loop.mp3",.7]),this.clawIsMoving=!0),1==this.clawIsMoving&&0==t&&(this.clawIsMoving=!1,Game.stopSound("claw/servo-loop.mp3"),Game.playSound("claw/servo-stop.mp3",.7),this.delayedServoStartSound=this.scene.killTween(this.delayedServoStartSound))}},e.prototype.findIndexByKeyValue=function(e,t,i){for(var s=0;s<e.length;s++)if(e[s][t]==i)return s;return null},e.prototype.addBodyToWorld=function(e){this.world.addBody(e)},e.prototype.removeBodyFromWorld=function(e){this.world.removeBody(e)},e.prototype.removeConstraintFromWorld=function(e){this.world.removeConstraint(e)},e.prototype.addConstraintToWorld=function(e){this.world.addConstraint(e)},e.prototype.resizeElements=function(e,t){this.canvasHeight=t,this.canvasWidth=e,this.canvasOrigHeight&&(this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},e.prototype.bindSpriteToBody=function(e,t){this.boundBodies.push({sprite:e,body:t})},e.prototype.unbindSpriteFromBody=function(e){this.boundBodies&&this.boundBodies.splice(this.findIndexByKeyValue(this.boundBodies,"sprite",e),1)},e.prototype.checkCollision=function(e,t){if(t.bodyA==e.pitSensorBody&&t.bodyB.shapes[0].collisionGroup==this.BALL&&e.ballPassedPit(t.bodyB),t.bodyB==e.pitSensorBody&&t.bodyA.shapes[0].collisionGroup==this.BALL&&e.ballPassedPit(t.bodyA),t.bodyA==e.pitDoorBody&&t.bodyB.shapes[0].collisionGroup==this.BALL&&e.fadeBall(t.bodyB),t.bodyB==e.pitDoorBody&&t.bodyA.shapes[0].collisionGroup==this.BALL&&e.fadeBall(t.bodyA),t.bodyA==e.floorBody&&t.bodyB.shapes[0].collisionGroup==this.BALL&&e.collectedBall(t.bodyB),t.bodyB==e.floorBody&&t.bodyA.shapes[0].collisionGroup==this.BALL&&e.collectedBall(t.bodyA),t.bodyB.shapes[0].collisionGroup==this.BALL&&((i=(Math.abs(t.bodyB.velocity[0])+Math.abs(t.bodyB.velocity[1]))/600)>1&&(i=1),i>.2&&this.ballSoundCount==this.ballSoundThreshold&&(Game.playSound("claw/ball-hit-"+Game.getRandom(1,2,!0)+".mp3",i),this.ballSoundCount=0)),t.bodyA.shapes[0].collisionGroup==this.BALL){var i=(Math.abs(t.bodyA.velocity[0])+Math.abs(t.bodyA.velocity[1]))/600;i>1&&(i=1),i>.2&&this.ballSoundCount==this.ballSoundThreshold&&(Game.playSound("claw/ball-hit-"+Game.getRandom(1,2,!0)+".mp3",i),this.ballSoundCount=0)}},e.prototype.checkEndCollision=function(e,t){},e.prototype.resetBody=function(e){e.invMass=1/e.mass,e.invInertia=1/e.inertia,e.angularVelocity=0,e.angularForce=0,e.angle=0,e.velocity=[0,0],e.setZeroForce(),e.mass/=2},e.prototype.createComplexShape=function(e,t,i,s,o){for(var a,r=o||!1,n=0;n<t.length;n++)!function(t){for(var i=[],s=0;s<t.length;s++)s%2==1&&i.push([t[s-1],t[s]]);a=new p2.Convex({vertices:i});var o=new p2.AABB;a.computeAABB(o,[0,0],0);var n=o.upperBound[0]-o.lowerBound[0],h=o.upperBound[1]-o.lowerBound[1];1==r?e.addShape(a,[-n/2,-h/2]):e.addShape(a)}(t[n].shape),i&&(e.shapes[n].collisionGroup=i),s&&(e.shapes[n].collisionMask=s);return a},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e!=i||t!=s){var o=e-i,a=s-t;return Math.atan2(a,o)}},e.prototype.pause=function(){this.scene.pauseResumeTween(this.dropTimeline,"pause"),this.physicsEnabled=!1},e.prototype.resume=function(){this.scene.pauseResumeTween(this.dropTimeline,"resume"),this.physicsEnabled=!0},e.prototype.destroy=function(){this.world.clear(),this.world=null,this.boundBodies=null},e}(),ClawInputManager=function(){function e(e,t){this.scene=e,this.mainHolderRef=t,this.hitAreaSprite=Game.displayStore.getSprite("claw/blank-input.png"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.fingerPoint=Game.displayStore.getSprite("claw/finger-point.png"),this.fingerPoint.alpha=0,this.scene.physicsManager.bindSpriteToBody(this.fingerPoint,this.scene.physicsManager.fingerPoint),this.currentAngle=0,this.maxAngleDiff=1.4,this.minAngleDiff=.1,this.keyboardDown=!1,this.joystickAngle=0,this.buttonIsDown=!1,this.downOnJoystick=!1,this.downOnJoystickXPos=0,this.controlsEnabled=!1,this.scene.container.addChild(this.hitAreaSprite),this.setUpHitArea(this.hitAreaSprite)}return e.prototype.enableControls=function(){this.controlsEnabled=!0},e.prototype.disableControls=function(){this.controlsEnabled=!1},e.prototype.setUpHitArea=function(e){e.interactive=!0,e.buttonMode=!0;var t=this;Game.onDesktop?(e.on("mousedown",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("mousemove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseup",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("mouseupoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))})):(e.on("touchstart",function(e){t.inputDown(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchmove",function(e){t.inputMove(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchend",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}),e.on("touchendoutside",function(e){t.inputUp(t,e.data.getLocalPosition(t.scene.container))}))},e.prototype.inputDown=function(e,t){0!=this.controlsEnabled&&(this.scene.physicsManager.setFingerPoint(t),this.scene.physicsManager.stepPhysics(),this.scene.physicsManager.stepPhysics(),t.x>530&&t.x<640&&t.y>460&&t.y<570&&0==this.buttonIsDown&&(this.buttonIsDown=!0,this.scene.buttonDown(),Game.playSound("claw/button-whack.mp3")),1==this.scene.physicsManager.checkPointOverlap(this.scene.physicsManager.fingerPoint)&&(this.scene.highlightJoystick(!0),Game.playSound("claw/joystick-start.mp3"),this.downOnJoystickXPos=t.x,this.downOnJoystick=!0))},e.prototype.inputUp=function(e,t){0!=this.controlsEnabled&&(1==this.buttonIsDown&&(this.scene.dropClaw(),this.controlsEnabled=!1,this.buttonIsDown=!1),1==this.downOnJoystick&&(this.scene.highlightJoystick(!1),this.scene.physicsManager.releaseJoystick(),this.downOnJoystick=!1,this.joystickAngle=0,Game.playSound("claw/joystick-stop.mp3")))},e.prototype.inputMove=function(e,t){0!=this.controlsEnabled&&this.scene.physicsManager.setFingerPoint(t)},e.prototype.getAngle=function(e,t,i,s){return Math.atan2(t-s,e-i)},e.prototype.getInputAngle=function(){var e=this.currentAngle;return e>this.maxAngleDiff&&(e=this.maxAngleDiff),e<this.minAngleDiff&&(e=this.minAngleDiff),e},e.prototype.keyDown=function(e){if(this.keyboardDown=!0,0!=this.controlsEnabled)switch(this.keyboardInput=e,e){case"left":this.joystickAngle=.5,this.scene.highlightJoystick(!0);break;case"right":this.joystickAngle=-.5,this.scene.highlightJoystick(!0);break;case"down":case"up":break;case"spacebar":this.keyboardInput="spacebar",0==this.buttonIsDown&&(this.buttonIsDown=!0,this.scene.buttonDown())}},e.prototype.keyUp=function(e){this.joystickAngle=0,this.keyboardDown=!1,0!=this.controlsEnabled&&(1==this.buttonIsDown&&(this.controlsEnabled=!1,this.scene.dropClaw(),this.buttonIsDown=!1),this.scene.highlightJoystick(!1),this.scene.physicsManager.releaseJoystick())},e.prototype.tick=function(){if(1==this.downOnJoystick){var e=-(this.fingerPoint.position.x-this.downOnJoystickXPos)/250;e>.5&&(e=.5),e<-.5&&(e=-.5),this.joystickAngle=Math.round(10*e)/10}this.scene.physicsManager.moveJoystick(this.joystickAngle)},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},e}(),ClawBall=function(){function e(e,t,i){this.frontBallTints=[3833036,13898842,12658477,15817252,34679,7807587],this.backBallTints=[16494651,15587887,1754740,32403,6015457,16743340],this.container=Game.displayStore.getContainer("claw/ball-holder"),this.container.alpha=1,this.active=!1,this.scene=e,this.id=i.id,this.prizeType=i.prizeType,this.back=Game.displayStore.getSprite("claw/ball-back.png"),this.front=Game.displayStore.getSprite("claw/ball-front.png"),this.highlight=Game.displayStore.getSprite("claw/ball-highlight.png"),this.prizeSprite=Game.displayStore.getSprite(i.spriteURLPrefix+i.id),this.prizeSprite.alpha=1,this.back.tint=this.backBallTints[Game.getRandom(0,5,!0)],this.front.tint=this.frontBallTints[Game.getRandom(0,5,!0)],this.prizeSprite.scale.x=this.prizeSprite.scale.y=i.itemScale||1;var s=new PIXI.Point;s.x=this.prizeSprite.position.x,s.y=this.prizeSprite.position.y,Game.coreData.setClothingOffset(this.id,s),this.prizeSprite.position.x=0,this.prizeSprite.position.y=0;var o;this.prizeSprite.width>this.prizeSprite.height?(o=this.prizeSprite.width/this.prizeSprite.height,this.prizeSprite.width=100,this.prizeSprite.height=100/o,this.prizeSprite.rotation=Game.getRandom(1,2)):(o=this.prizeSprite.height/this.prizeSprite.width,this.prizeSprite.height=100,this.prizeSprite.width=100/o),this.container.addChild(this.back),this.container.addChild(this.prizeSprite),this.container.addChild(this.front),this.container.addChild(this.highlight);var a=1.5*i.value;a>40&&(a=40),this.body=this.scene.physicsManager.createBall(t,a),this.body.allowSleep=!0,this.scene.physicsManager.bindSpriteToBody(this.container,this.body)}return e.prototype.fadeOut=function(){TweenMax.to(this.container,.5,{alpha:0,ease:Power2.easeInOut})},e.prototype.collect=function(e){switch(this.id){case"tickets-10":Game.coreData.addTickets(10);break;case"tickets-3":Game.coreData.addTickets(3);break;case"tickets-5":Game.coreData.addTickets(5)}"wristband"==this.prizeType&&Game.coreData.buyWristband(this.id,!0),"clothing"==this.prizeType&&Game.coreData.buyClothingItem(this.id,!0),Game.coreData.getClothing({ride:Game.coreData.getCurrentRide().id}),Game.isLowEndIPad},e.prototype.tick=function(){this.highlight.rotation=-this.container.rotation},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.scene.physicsManager.unbindSpriteFromBody(this.container),this.scene.physicsManager.removeBodyFromWorld(this.body),this.container.removeAllChildren(),Game.displayStore.returnPooledItem(this.container),Game.displayStore.returnPooledItem(this.highlight),Game.displayStore.returnPooledItem(this.back),Game.displayStore.returnPooledItem(this.front),Game.displayStore.returnPooledItem(this.prizeSprite)},e}(),ParticleBurst=function(){function e(e,t,i,s){this.enabled=!1,this.cap=30,this.time=1.2,this.next=0,this.tickCount=0,this.container=t,this.pos=new PIXI.Point(0,0),this.particles=[],this.params=s,this.blendMode=s.blendMode||PIXI.BLEND_MODES.NORMAL,this.time=s.time||1,this.cap=this.params.cap||30,this.cancelled=!1,this.stagger=this.params.stagger||-1,this.scene=i,this.overridable=s.overridable||!1,this.paused=!1,this.inUse=!1,this.tintSprite=this.params.tint||16777215;for(var o=0;o<e.length;o++)for(var a=0;a<this.cap/e.length;a++){var r=Game.displayStore.getSprite(e[o]);this.particles.push({sprite:r,index:(o+1)*a}),r.alpha=0,r.tint=this.tintSprite,this.container.addChild(r)}this.shuffleArray(this.particles)}return e.prototype.tint=function(e){for(var t=0;t<this.particles.length;t++)this.particles[t].sprite.tint=e},e.prototype.fire=function(e){this.animation=this.scene.killTween(this.animation),this.animation=new TimelineMax,this.cancelled=!1,this.inUse=!0;for(var t=0;t<this.particles.length;t++)this.cycleParticle(this.particles[t],this,t);this.animation.call(function(){this.inUse=!1},null,this),1==e&&this.animation.pause()},e.prototype.replay=function(){this.animation.restart()},e.prototype.updateParams=function(e,t){e.lowerAngle&&(t.params.lowerAngle=e.lowerAngle),e.upperAngle&&(t.params.upperAngle=e.upperAngle),e.lowerVelocity&&(t.params.lowerVelocity=e.lowerVelocity),e.upperVelocity&&(t.params.upperVelocity=e.upperVelocity),e.endScale&&(t.params.endScale=e.endScale),e.lowerStartScale&&(t.params.lowerStartScale=e.lowerStartScale),e.upperStartScale&&(t.params.upperStartScale=e.upperStartScale),e.lowerEndScale&&(t.params.lowerEndScale=e.lowerEndScale),e.upperEndScale&&(t.params.upperEndScale=e.upperEndScale),e.blendMode&&(t.params.blendMode=e.blendMode),e.friction&&(t.params.friction=e.friction),e.XstartRange&&(t.params.XstartRange=e.XstartRange),e.YstartRange&&(t.params.YstartRange=e.YstartRange),e.endAlpha&&(t.params.endAlpha=e.endAlpha),e.startAlpha&&(t.params.startAlpha=e.startAlpha),e.gravity&&(t.params.gravity=e.gravity),e.stagger&&(t.stagger=e.stagger),e.time&&(t.time=e.time)},e.prototype.cycleParticle=function(e,t,i){if(1!=t.cancelled){var s=e.sprite;s.position.x=Game.getRandom(-t.params.XstartRange,t.params.XstartRange),s.position.y=Game.getRandom(-t.params.YstartRange,t.params.YstartRange),s.alpha=0;var o=Game.getRandom(t.params.lowerStartScale,t.params.upperStartScale),a=t.params.scaleInTime||40;s.scale.x=0,s.scale.y=0,s.blendMode=t.blendMode;var r=i/t.stagger;r<0&&(r=0);var n=t.params.endScale||0,h=t.params.lowerEndScale||n,l=t.params.upperEndScale||n,p=Game.getRandom(h,l),c=t.params.startAlpha||1,d=t.params.fadeInTime||10;s.rotation=Game.getRandom(-Math.PI,Math.PI)*t.params.rotationPower,t.animation.add([TweenLite.to(s.position,t.time,{physics2D:{velocity:Game.getRandom(t.params.lowerVelocity,t.params.upperVelocity),angle:Game.getRandom(t.params.lowerAngle,t.params.upperAngle),acceleration:t.params.gravity,accelerationAngle:90,friction:t.params.friction}}),TweenLite.to(s,t.time/d,{alpha:c,ease:Sine.easeOut}),TweenLite.to(s,t.time,{delay:t.time/d,alpha:t.params.endAlpha,ease:Sine.easeOut}),TweenLite.to(s,t.time,{rotation:Game.getRandom(-3*t.params.rotationPower,3*t.params.rotationPower),ease:Sine.easeOut}),TweenLite.to(s.scale,t.time/a,{x:o,y:o,ease:Sine.easeOut}),TweenLite.to(s.scale,t.time,{delay:t.time/a,x:p,y:p,ease:Power3.easeOut})],r)}},e.prototype.shuffleArray=function(e){for(var t,i,s=e.length;s>0;)i=Math.floor(Math.random()*s),t=e[--s],e[s]=e[i],e[i]=t;return e},e.prototype.cancel=function(){this.cancelled=!0,this.animation.kill()},e.prototype.pause=function(){this.scene.pauseResumeTween(this.animation,"pause"),this.paused=!0},e.prototype.resume=function(){this.scene.pauseResumeTween(this.animation,"resume"),this.paused=!1},e.prototype.destroy=function(){this.animation=this.scene.killTween(this.animation);for(var e=0;e<this.particles.length;e++)this.particles[e].sprite.parent&&this.particles[e].sprite.parent.removeChild(this.particles[e].sprite),TweenLite.killTweensOf(this.particles[e].sprite),TweenLite.killTweensOf(this.particles[e].sprite.scale),Game.displayStore.returnPooledItem(this.particles[e].sprite);this.inUse=!1},e}(),ParticleStream=function(){function e(e,t,i,s){this.cap=30,this.time=1,this.next=0,this.tickCount=0,this.stagger=.1,this.enabled=!1,this.container=t,this.pos=new PIXI.Point(0,0),this.particles=[],this.container.interactive=!1,this.container.interactiveChildren=!1,this.iterations=0,this.scene=i,this.params=s,this.blendMode=s.blendMode||PIXI.BLEND_MODES.NORMAL,this.time=s.time||1,s.xPos&&s.yPos&&this.updatePos(new PIXI.Point(s.xPos,s.yPos)),this.cap=this.params.cap||30,this.stagger=this.time/this.cap;for(var o=0,a=0;a<e.length;a++)for(var r=0;r<Math.round(this.cap/e.length);r++){var n=Game.displayStore.getSprite(e[a]);this.particles.push({sprite:n,inUse:!1,index:o,lifeTime:this.time,tweens:[]}),n.alpha=0,this.container.addChild(n),o++}}return e.prototype.updateParams=function(e,t){t.params.lowerAngle=e.lowerAngle,t.params.upperAngle=e.upperAngle,t.params.lowerVelocity=e.lowerVelocity,t.params.upperVelocity=e.upperVelocity,t.params.endScale=e.endScale,t.params.endScaleX=e.endScaleX,t.params.endScaleY=e.endScaleY,t.params.startScaleX=e.startScaleX,t.params.lowerStartScale=e.lowerStartScale,t.params.upperStartScale=e.upperStartScale,t.params.rotationPower=e.rotationPower,t.params.friction=e.friction,t.params.fadeInTime=e.fadeInTime,t.params.fadeOutTime=e.fadeOutTime,t.params.scaleInTime=e.scaleInTime,t.params.scaleOutTime=e.scaleOutTime,t.params.XstartRange=e.XstartRange,t.params.YstartRange=e.YstartRange,t.time=e.time,t.params.spriteAngle=e.spriteAngle,t.params.tint=e.tint,t.cap=e.cap,t.stagger=t.time/t.cap,e.xPos&&e.yPos&&t.updatePos(new PIXI.Point(e.xPos,e.yPos))},e.prototype.pause=function(){this.paused=!0;for(var e=0;e<this.particles.length;e++)for(var t=this.particles[e],i=0;i<t.tweens.length;i++)this.scene.pauseResumeTween(t.tweens[e],"pause")},e.prototype.resume=function(){this.paused=!1;for(var e=0;e<this.particles.length;e++)for(var t=this.particles[e],i=0;i<t.tweens.length;i++)this.scene.pauseResumeTween(t.tweens[e],"resume")},e.prototype.cycleParticle=function(e,t){if(0!=t.enabled&&1!=t.paused){e.inUse=!0,e.lifeTime=t.time;var i=e.sprite;i.position.x=Game.getRandom(t.pos.x-t.params.XstartRange,t.pos.x+t.params.XstartRange),i.position.y=Game.getRandom(t.pos.y-t.params.YstartRange,t.pos.y+t.params.YstartRange),i.alpha=0;var s=t.params.lowerAngle||0,o=t.params.upperAngle||360,a=t.params.lowerVelocity||20,r=t.params.upperVelocity||50,n=t.params.endScaleX||t.params.endScale||0,h=t.params.endScaleY||t.params.endScale||0,l=(t.params.startScaleX,t.params.rotationPower),p=t.params.lowerStartScale||0,c=t.params.upperStartScale||0,d=t.params.startAlpha||1,u=Game.getRandom(p,c),g=t.params.tint||16777215;i.scale.x=0,i.scale.y=0,i.rotation=Game.getRandom(0,2*Math.PI)*l,t.params.spriteAngle&&(i.rotation=t.params.spriteAngle),i.blendMode=t.blendMode,i.tint=g,e.tweens.push(TweenMax.to(i.position,e.lifeTime,{physics2D:{velocity:Game.getRandom(a,r),angle:Game.getRandom(s,o),acceleration:t.params.gravity,accelerationAngle:90,friction:t.params.friction},onComplete:t.resetParticle,onCompleteParams:[e,t]}));var m;m=t.params.fadeInTime?t.params.fadeInTime:10;var y;y=t.params.fadeOutTime?t.params.fadeOutTime:4;var f;f=t.params.scaleInTime?t.params.scaleInTime:10;var b;b=t.params.scaleOutTime?t.params.scaleOutTime:4,e.tweens.push(TweenMax.to(i,e.lifeTime/m,{alpha:d,ease:Sine.easeOut})),e.tweens.push(TweenMax.to(i,e.lifeTime/y,{delay:e.lifeTime-e.lifeTime/y,alpha:0,ease:Sine.easeOut})),e.tweens.push(TweenMax.to(i.scale,e.lifeTime/f,{delay:e.lifeTime/f,x:u,y:u,ease:Sine.easeOut})),e.tweens.push(TweenMax.to(i.scale,e.lifeTime/b,{delay:e.lifeTime-e.lifeTime/b,x:n,y:h,ease:Sine.easeOut})),t.params.rotationPower&&e.tweens.push(TweenMax.to(i,e.lifeTime,{rotation:Game.getRandom(0,2*Math.PI)*l,ease:Sine.easeOut}))}},e.prototype.resetParticle=function(e,t){e.inUse=!1,e.tweens=[],e.startTime=0},e.prototype.enable=function(){this.enabled=!0,this.iterations=0;for(var e=0;e<this.particles.length;e++)this.resetParticle(this.particles[e],this)},e.prototype.disable=function(){this.enabled=!1},e.prototype.trackItem=function(e){this.trackedItem=e},e.prototype.updatePos=function(e){this.pos.x=e.x,this.pos.y=e.y},e.prototype.tick=function(){this.iterations+=1/(60*this.time);for(var e=0;e<this.particles.length;e++)this.iterations>this.stagger&&0==this.particles[e].inUse&&(this.cycleParticle(this.particles[e],this),this.iterations=0)},e.prototype.shuffleArray=function(e){for(var t,i,s=e.length;s>0;)i=Math.floor(Math.random()*s),t=e[--s],e[s]=e[i],e[i]=t;return e},e.prototype.destroy=function(){this.disable();for(var e=0;e<this.particles.length;e++){var t=this.particles[e];TweenLite.killTweensOf(t.sprite),TweenLite.killTweensOf(t.sprite.scale),Game.displayStore.returnPooledItem(t.sprite);for(var i=0;i<t.tweens.length;i++)t.tweens[i]=this.scene.killTween(t.tweens[i])}Game.displayStore.returnPooledItem(this.container)},e}(),ParallaxLayer=function(){function e(e,t,i,s){this.transitioned=!1,this.stripTarget=new PIXI.Point,this.containerTarget=new PIXI.Point,this.lastMousePos=new PIXI.Point,this.mouseMovement=new PIXI.Point,this.scene=e,this.game=e.game,this.container=i,this.minY=0,this.maxY=0,this.limitY=!1,this.limitX=!0,this.looping=s||!1,this.lastMousePos.x=0,this.mouseMovement.x=0,this.lastMousePos.y=0,this.mouseMovement.y=0,this.startPos=this.container.position,this.depth=t,this.chunks=[];this.currentChunkIndex=0,this.freshChunk=!1;for(var o=0;o<this.container.children.length;o++){var a=this.container.getSpriteAt(o);this.chunkWidth=a.width,this.chunks.push(a)}this.layoutChunks()}return e.prototype.layoutChunks=function(){for(var e=0;e<this.chunks.length;e++)this.chunks[e].position.x=e*this.chunkWidth+this.chunkWidth*-this.currentChunkIndex},e.prototype.reorderArray=function(e,t){-1==t?e.push(e.shift()):e.unshift(e.pop())},e.prototype.addMarkers=function(e){for(var t=0;t<e.length;t++)for(var i=0;i<this.chunks.length;i++)e[t].chunk==i&&this.chunks[i].addChild(e[t].container)},e.prototype.setToUpdatedPos=function(e){this.inputStart(),this.freshChunk=!0,this.tick(1,e),e.x<-3e3&&this.layoutChunks()},e.prototype.inputStart=function(){this.startPos=this.container.position,this.lastMousePos.x=0,this.mouseMovement.x=0,this.lastMousePos.y=0,this.mouseMovement.y=0},e.prototype.setLimitX=function(){this.limitX=!0},e.prototype.setLimitY=function(e,t){this.minY=e,this.maxY=t,this.limitY=!0},e.prototype.removeLimitX=function(){this.limitX=!1},e.prototype.removeLimitY=function(){this.limitY=!1},e.prototype.tick=function(e,t){this.smoothing=e,this.mouseMovement.x=t.x-this.lastMousePos.x,this.mouseMovement.y=t.y-this.lastMousePos.y,this.lastMousePos.x=t.x,this.lastMousePos.y=t.y,this.stripTarget.x+=this.mouseMovement.x/this.depth*this.scene.dragSensitivity,this.stripTarget.y+=this.mouseMovement.y/this.depth*this.scene.dragSensitivity,1==this.limitY&&(this.stripTarget.y>this.maxY/this.depth&&(this.stripTarget.y=this.maxY/this.depth),this.stripTarget.y<this.minY/this.depth&&(this.stripTarget.y=this.minY/this.depth)),0==this.looping&&1==this.limitX&&(this.stripTarget.x>0&&(this.stripTarget.x=0),this.stripTarget.x<-this.chunkWidth*this.chunks.length+Game.stageWidth&&(this.stripTarget.x=-this.chunkWidth*this.chunks.length+Game.stageWidth)),this.containerTarget.x>this.stripTarget.x+1?this.direction=-1:this.containerTarget.x<this.stripTarget.x-1?this.direction=1:this.direction=0,this.containerTarget.x+=(this.stripTarget.x-this.containerTarget.x)/this.smoothing,this.containerTarget.y+=(this.stripTarget.y-this.containerTarget.y)/this.smoothing,this.direction>0?this.containerTarget.x>this.chunkWidth*this.currentChunkIndex&&(1==this.freshChunk&&(this.currentChunkIndex++,this.reorderArray(this.chunks,1),this.layoutChunks(),this.freshChunk=!1),this.containerTarget.x>this.chunkWidth*this.currentChunkIndex&&(this.freshChunk=!0)):this.direction<0&&this.containerTarget.x<this.chunkWidth*this.currentChunkIndex&&(1==this.freshChunk&&(this.layoutChunks(),this.reorderArray(this.chunks,-1),this.currentChunkIndex--,this.freshChunk=!1),this.containerTarget.x<this.chunkWidth*this.currentChunkIndex-this.chunkWidth&&(this.freshChunk=!0)),this.container.position.x=this.containerTarget.x,this.container.position.y=this.containerTarget.y},e.prototype.destroy=function(){this.chunks=[],this.container.position.x=0,this.container.position.y=0},e}(),ParallaxLayerGiftShop=function(){function e(e,t,i,s){this.transitioned=!1,this.stripTarget=new PIXI.Point,this.containerTarget=new PIXI.Point,this.lastMousePos=new PIXI.Point,this.mouseMovement=new PIXI.Point,this.scene=e,this.game=e.game,this.container=t,this.minY=0,this.maxY=0,this.limitY=!1,this.limitX=!0,this.widthReference=i,this.speedRatio=s,this.lastMousePos.x=0,this.mouseMovement.x=0,this.lastMousePos.y=0,this.mouseMovement.y=0,this.startPos=this.container.position,this.backgroundSizeSprite=this.container.getSprite("gift-shop/blank-chunk.png"),this.backgroundSizeSprite.width=(i-Game.stageWidth)/this.speedRatio}return e.prototype.addMarkers=function(e){for(var t=0;t<e.length;t++)this.container.addChild(e[t].container)},e.prototype.inputStart=function(){this.startPos=this.container.position,this.lastMousePos.x=0,this.mouseMovement.x=0,this.lastMousePos.y=0,this.mouseMovement.y=0},e.prototype.setLimitY=function(e,t){this.minY=e,this.maxY=t,this.limitY=!0},e.prototype.removeLimitY=function(){this.limitY=!1},e.prototype.removeLimitX=function(){this.limitX=!1},e.prototype.tick=function(e,t){this.smoothing=e,this.mouseMovement.x=t.x-this.lastMousePos.x,this.mouseMovement.y=t.y-this.lastMousePos.y,this.lastMousePos.x=t.x,this.lastMousePos.y=t.y,this.stripTarget.x+=this.mouseMovement.x/this.speedRatio,this.stripTarget.y+=this.mouseMovement.y/this.speedRatio,1==this.limitY&&(this.stripTarget.y>this.maxY/this.speedRatio&&(this.stripTarget.y=this.maxY/this.speedRatio),this.stripTarget.y<this.minY/this.speedRatio&&(this.stripTarget.y=this.minY/this.speedRatio)),1==this.limitX&&(this.stripTarget.x>0&&(this.stripTarget.x=0),this.stripTarget.x<-this.backgroundSizeSprite.width&&(this.stripTarget.x=-this.backgroundSizeSprite.width)),this.containerTarget.x+=(this.stripTarget.x-this.containerTarget.x)/this.smoothing,this.containerTarget.y+=(this.stripTarget.y-this.containerTarget.y)/this.smoothing,this.containerTarget.x>this.stripTarget.x+1?this.direction=-1:this.containerTarget.x<this.stripTarget.x-1?this.direction=1:this.direction=0,this.container.position.x=this.containerTarget.x,this.container.position.y=this.containerTarget.y},e.prototype.destroy=function(){this.container.position.x=0,this.container.position.y=0},e}(),Marker=function(){function e(e,t,i,s){if(this.scene=e,this.game=e.game,this.index=s,this.chunk=i.chunk,this.id=i.id,this.focused=!1,this.engaged=!1,this.isOpen=!1,this.newGame=!1,this.newIconPos=new PIXI.Point(40,-110),this.forcedHidden=!1,this.hidden=!1,this.container=t,this.container.position.x=i.position.x,this.container.position.y=i.position.y,"hubScene"==e.id){if(this.brand=i.brand,this.newGame=Game.coreData.getRideData(this.id)[0].new,this.forcedHidden=Game.coreData.getRideData(this.id)[0].hidden,1==this.forcedHidden)return;this.sprite=Game.displayStore.getSprite("hub-scene/marker"),this.shadow=Game.displayStore.getSprite("hub-scene/marker-shadow"),this.sprite.scale=new PIXI.Point(.2,.2),this.shadow.scale=new PIXI.Point(.2,.2),this.container.addChild(this.shadow),this.brand&&(this.logo=Game.displayStore.getSprite("hub-scene/brand-logos/"+this.brand),this.logo.scale.x=this.logo.scale.y=.5),1==Game.coreData.getRideData(this.id)[0].active?(this.brandBox=Game.displayStore.getSprite("hub-scene/brand-box"),this.brandBoxBack=Game.displayStore.getSprite("hub-scene/brand-box-back"),this.brandBox.position.y=-15,this.brandBoxBack.position.y=-12,this.container.addChild(this.brandBoxBack),this.container.addChild(this.brandBox),this.container.addChild(this.logo),this.container.addChild(this.sprite),this.brandBoxBack.scale.x=this.brandBoxBack.scale.y=0,this.brandBox.scale.x=this.brandBox.scale.y=0,this.logo.alpha=0,this.active=!0,1==this.newGame&&(this.newIconHolder=Game.displayStore.getContainer("hub-scene/new-icon-holder"),this.newIconStar=Game.displayStore.getSprite("hub-scene/new-star"),this.newIconStarShadow=Game.displayStore.getSprite("hub-scene/new-star-shadow"),this.newIconStarText=Game.displayStore.getSprite("hub-scene/new-text"),this.newIconHolder.position.x=this.newIconPos.x,this.newIconHolder.position.y=this.newIconPos.y,this.newIconStarShadow.position.y=10,this.newIconHolder.addChild(this.newIconStarShadow),this.newIconHolder.addChild(this.newIconStar),this.newIconHolder.addChild(this.newIconStarText),1==Game.assetChunkManager.getCurrentGameLaunchMode()&&this.container.addChild(this.newIconHolder),this.newIconHolder.scale.x=0,this.newIconHolder.scale.y=0)):(this.brandBox=Game.displayStore.getSprite("hub-scene/brand-box-2"),this.brandBoxNail=Game.displayStore.getSprite("hub-scene/brand-box-nail"),this.brandBoxComingSoon=Game.displayStore.getSprite("hub-scene/brand-box-coming-soon"),this.brandBoxBack=Game.displayStore.getSprite("hub-scene/brand-box-back"),this.brandBox.position.y=-15,this.brandBoxBack.position.y=-12,this.container.addChild(this.brandBoxBack),this.container.addChild(this.brandBox),this.container.addChild(this.logo),this.container.addChild(this.sprite),this.container.addChild(this.brandBoxComingSoon),this.container.addChild(this.brandBoxNail),this.brandBoxNail.position.x=-5,this.brandBoxNail.position.y=-118,this.brandBoxComingSoon.position.y=-118,this.brandBoxComingSoon.rotation=0,this.brandBoxBack.scale.x=this.brandBoxBack.scale.y=0,this.brandBox.scale.x=this.brandBox.scale.y=0,this.logo.alpha=0,this.brandBoxComingSoon.alpha=0,this.brandBoxNail.alpha=0,this.active=!1),this.sprite.position.y=-40,this.sprite.alpha=0,this.shadow.scale.x=this.shadow.scale.y=0}else this.isOpen=!0,this.sprite=Game.displayStore.getSprite("gift-shop/marker"),this.shadow=Game.displayStore.getSprite("gift-shop/marker-shadow"),this.sprite.scale=new PIXI.Point(.33,.33),this.shadow.scale=new PIXI.Point(.33,.33),this.shadow.position.x=3,this.shadow.position.y=6,this.container.addChild(this.shadow),this.container.addChild(this.sprite)}return e.prototype.open=function(e){1!=this.forcedHidden&&(this.highlightTimeline=this.scene.killTween(this.highlightTimeline),this.highlightTimeline=new TimelineMax,this.brand&&(1==this.game.gameLaunchMode&&(1==Game.coreData.getRideData(this.id)[0].active?this.highlightTimeline.add([TweenMax.to(this.brandBoxBack.scale,.3,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.brandBox.scale,.3,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.logo,.3,{alpha:1,ease:Expo.easeInOut})],.3+e):this.highlightTimeline.add([TweenMax.to(this.brandBoxBack.scale,.3,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.brandBox.scale,.3,{x:1,y:1,delay:.05,ease:Back.easeOut}),TweenMax.to(this.logo,.3,{alpha:.5,ease:Expo.easeInOut}),TweenMax.to(this.brandBoxComingSoon,.3,{alpha:1,ease:Expo.easeInOut}),TweenMax.to(this.brandBoxNail,.3,{alpha:1,ease:Expo.easeInOut})],.3+e)),this.highlightTimeline.add([TweenMax.to(this.sprite,.3,{alpha:1,ease:Expo.easeOut}),TweenMax.to(this.sprite.position,.5,{y:0,ease:Bounce.easeOut}),TweenMax.to(this.shadow.scale,.5,{x:.33,y:.33,ease:Bounce.easeOut})],e)),this.highlightTimeline.call(function(){this.isOpen=!0},null,this),1==this.newGame&&this.highlightTimeline.add(TweenMax.to(this.newIconHolder.scale,.3,{x:1,y:1,ease:Back.easeOut})))},e.prototype.focus=function(){0!=this.isOpen&&(1!=this.engaged?1!=this.hidden&&1!=this.forcedHidden&&(this.focusTimeline=this.scene.killTween(this.focusTimeline),this.focusTimeline=new TimelineMax,this.focusTimeline.add(TweenMax.to(this.container.scale,.5,{x:1.2,y:1.2,ease:Elastic.easeOut})),this.brand&&(1==Game.coreData.getRideData(this.id)[0].active?(this.focusTimeline.add(TweenMax.to(this.brandBoxBack.scale,.5,{x:1.1,y:1.1,ease:Elastic.easeOut}),0),this.focusTimeline.add(TweenMax.to(this.brandBox.scale,.5,{x:1.1,y:1.1,ease:Elastic.easeOut}),.05),this.focusTimeline.add(TweenMax.to(this.logo.scale,.5,{x:.7,y:.7,ease:Elastic.easeOut}),.07)):(this.focusTimeline.add(TweenMax.to(this.brandBoxBack.scale,.5,{x:1.1,y:1.1,ease:Elastic.easeOut}),0),this.focusTimeline.add(TweenMax.to(this.brandBox.scale,.5,{x:1.1,y:1.1,ease:Elastic.easeOut}),.05),this.focusTimeline.add(TweenMax.to(this.logo.scale,.5,{x:.7,y:.7,ease:Elastic.easeOut}),.07),this.focusTimeline.add(TweenMax.to(this.brandBoxNail.scale,.5,{x:1.1,y:1.1,ease:Elastic.easeOut}),.05),this.focusTimeline.add(TweenMax.to(this.brandBoxComingSoon.scale,.5,{x:1.1,y:1.1,ease:Elastic.easeOut}),.05),this.focusTimeline.add(TweenMax.to(this.brandBoxNail.position,.5,{y:"-=10",ease:Elastic.easeOut}),.05),this.focusTimeline.add(TweenMax.to(this.brandBoxComingSoon.position,.5,{y:"-=10",ease:Elastic.easeOut}),.05),this.focusTimeline.add(TweenMax.to(this.brandBoxComingSoon,.1,{rotation:.2,ease:Sine.easeInOut}),.05),this.focusTimeline.add(TweenMax.to(this.brandBoxComingSoon,.2,{rotation:-.2,ease:Sine.easeInOut}),.15),this.focusTimeline.add(TweenMax.to(this.brandBoxComingSoon,.2,{rotation:.1,ease:Sine.easeInOut}),.35),this.focusTimeline.add(TweenMax.to(this.brandBoxComingSoon,.3,{rotation:-.1,ease:Sine.easeInOut}),.55),this.focusTimeline.add(TweenMax.to(this.brandBoxComingSoon,.2,{rotation:0,ease:Sine.easeInOut}),.85)),this.focusTimeline.call(function(){Game.playSound("hub-scene/tick.mp3",.1)},null,this,0),1==this.newGame&&(this.focusTimeline.add(TweenMax.to(this.newIconHolder.scale,.2,{x:1.5,y:1.5,ease:Sine.easeIn}),0),this.focusTimeline.add(TweenMax.to(this.newIconHolder.scale,.2,{x:1,y:1,ease:Sine.easeOut}),.2))),this.focused=!0):this.focused=!0)},e.prototype.tick=function(){1==this.newGame&&(this.newIconStar.rotation+=.02,this.newIconStarShadow.rotation+=.02)},e.prototype.unfocus=function(){0!=this.isOpen&&1!=this.forcedHidden&&(1!=this.engaged?1!=this.hidden&&(this.focusTimeline=this.scene.killTween(this.focusTimeline),this.focusTimeline=new TimelineMax,this.focusTimeline.add(TweenMax.to(this.container.scale,.3,{x:1,y:1,ease:Back.easeOut})),this.brand&&(1==Game.coreData.getRideData(this.id)[0].active?(this.logo.alpha=1,this.focusTimeline.add(TweenMax.to(this.brandBoxBack.scale,.3,{x:1,y:1,ease:Elastic.easeOut}),0),this.focusTimeline.add(TweenMax.to(this.brandBox.scale,.3,{x:1,y:1,ease:Elastic.easeOut}),0),this.focusTimeline.add(TweenMax.to(this.logo.scale,.3,{x:.5,y:.5,ease:Elastic.easeOut}),0)):(this.logo.alpha=.5,this.focusTimeline.add(TweenMax.to(this.brandBoxBack.scale,.3,{x:1,y:1,ease:Elastic.easeOut}),0),this.focusTimeline.add(TweenMax.to(this.brandBox.scale,.3,{x:1,y:1,ease:Elastic.easeOut}),0),this.focusTimeline.add(TweenMax.to(this.logo.scale,.3,{x:.5,y:.5,ease:Elastic.easeOut}),0),this.focusTimeline.add(TweenMax.to(this.brandBoxNail.scale,.3,{x:1,y:1,ease:Elastic.easeOut}),0),this.focusTimeline.add(TweenMax.to(this.brandBoxComingSoon.scale,.3,{x:1,y:1,ease:Elastic.easeOut}),0),this.focusTimeline.add(TweenMax.to(this.brandBoxNail.position,.3,{y:-118,ease:Elastic.easeOut}),0),this.focusTimeline.add(TweenMax.to(this.brandBoxComingSoon.position,.5,{y:-118,ease:Elastic.easeOut}),0),this.focusTimeline.add(TweenMax.to(this.brandBoxComingSoon,0,{rotation:0,ease:Elastic.easeOut}),0))),this.focused=!1,1==this.newGame&&this.focusTimeline.add(TweenMax.to(this.newIconHolder.scale,.2,{x:1,y:1,ease:Sine.easeOut}),0)):this.focused=!0)},e.prototype.engage=function(e){1!=this.forcedHidden&&(0==this.isOpen&&"fast"==e||(this.highlight(e),this.brand?1==Game.coreData.getRideData(this.id)[0].active&&(this.engaged=!0,this.scene.zoomInToMarker(this,e)):(this.engaged=!0,this.scene.zoomInToMarker(this,e))))},e.prototype.highlight=function(e){0!=this.isOpen&&(this.focusTimeline=this.scene.killTween(this.focusTimeline),this.highlightTimeline=this.scene.killTween(this.highlightTimeline),this.highlightTimeline=new TimelineMax,this.brand&&(1==Game.coreData.getRideData(this.id)[0].active?(this.highlightTimeline.add(TweenMax.to(this.container.scale,.9,{x:1.3,y:1.3,ease:Elastic.easeOut}),.4),this.highlightTimeline.add(TweenMax.to(this.brandBoxBack.scale,.3,{x:0,y:0,ease:Back.easeIn}),0),this.highlightTimeline.add(TweenMax.to(this.brandBox.scale,.3,{x:0,y:0,ease:Back.easeIn}),.05),this.highlightTimeline.add(TweenMax.to(this.brandBoxBack,.5,{alpha:0,ease:Expo.easeIn}),0),this.highlightTimeline.add(TweenMax.to(this.brandBox,.5,{alpha:0,ease:Expo.easeIn}),0),this.highlightTimeline.add(TweenMax.to(this.logo,.3,{alpha:0,ease:Expo.easeOut}),.1)):(this.highlightTimeline.add([TweenMax.to(this.container,.1,{rotation:.1,ease:Sine.easeInOut}),TweenMax.to(this.container,.2,{rotation:-.1,ease:Sine.easeInOut,delay:.1}),TweenMax.to(this.container,.1,{rotation:0,ease:Sine.easeInOut,delay:.3}),TweenMax.to(this.sprite,.1,{rotation:-.1,ease:Sine.easeInOut}),TweenMax.to(this.sprite,.2,{rotation:.1,ease:Sine.easeInOut,delay:.1}),TweenMax.to(this.sprite,.1,{rotation:0,ease:Sine.easeInOut,delay:.3}),TweenMax.to(this.shadow,.1,{rotation:-.1,ease:Sine.easeInOut}),TweenMax.to(this.shadow,.2,{rotation:.1,ease:Sine.easeInOut,delay:.1}),TweenMax.to(this.shadow,.1,{rotation:0,ease:Sine.easeInOut,delay:.3}),TweenMax.to(this.brandBoxComingSoon,.1,{rotation:.2,ease:Sine.easeInOut,delay:.05}),TweenMax.to(this.brandBoxComingSoon,.2,{rotation:-.2,ease:Sine.easeInOut,delay:.15}),TweenMax.to(this.brandBoxComingSoon,.2,{rotation:.1,ease:Sine.easeInOut,delay:.35}),TweenMax.to(this.brandBoxComingSoon,.3,{rotation:-.1,ease:Sine.easeInOut,delay:.55}),TweenMax.to(this.brandBoxComingSoon,.2,{rotation:0,ease:Sine.easeInOut,delay:.85})],0),this.highlightTimeline.call(function(){Game.playSound("hub-scene/game-locked.mp3",.2)},null,this,0)),1==this.newGame&&this.highlightTimeline.add(TweenMax.to(this.newIconHolder.scale,.3,{x:0,y:0,ease:Back.easeOut}),0)),"instant"==e&&this.highlightTimeline.totalProgress(1))},e.prototype.reset=function(){0!=this.isOpen&&(console.log("resetting"),this.engaged=!1,this.focused=!1,this.hidden=!1,this.focusTimeline=this.scene.killTween(this.focusTimeline),this.highlightTimeline=this.scene.killTween(this.highlightTimeline),this.container.alpha=1,this.highlightTimeline=new TimelineMax,this.highlightTimeline.add(TweenMax.to(this.container.scale,.5,{x:1,y:1,ease:Power2.easeOut})),this.brand&&(1==Game.coreData.getRideData(this.id)[0].active?(this.logo.alpha=1,this.highlightTimeline.add(TweenMax.to(this.brandBoxBack.scale,.85,{x:1,y:1,ease:Elastic.easeOut}),0),this.highlightTimeline.add(TweenMax.to(this.brandBox.scale,.85,{x:1,y:1,ease:Elastic.easeOut}),.05),this.highlightTimeline.add(TweenMax.to(this.brandBoxBack,.5,{alpha:1,ease:Expo.easeOut}),0),this.highlightTimeline.add(TweenMax.to(this.brandBox,.5,{alpha:1,ease:Expo.easeOut}),0)):(this.logo.alpha=.5,this.highlightTimeline.add(TweenMax.to(this.brandBoxBack.scale,.85,{x:1,y:1,ease:Elastic.easeOut}),0),this.highlightTimeline.add(TweenMax.to(this.brandBox.scale,.85,{x:1,y:1,ease:Elastic.easeOut}),.05),this.highlightTimeline.add(TweenMax.to(this.brandBoxBack,.5,{alpha:1,ease:Expo.easeOut}),0),this.highlightTimeline.add(TweenMax.to(this.brandBox,.5,{alpha:1,ease:Expo.easeOut}),0),this.highlightTimeline.add(TweenMax.to(this.brandBoxComingSoon,.5,{alpha:1,ease:Expo.easeOut}),0),this.highlightTimeline.add(TweenMax.to(this.brandBoxNail,.5,{alpha:1,ease:Expo.easeOut}),0)),1==this.newGame&&this.highlightTimeline.add(TweenMax.to(this.newIconHolder.scale,.3,{x:1,y:1,ease:Back.easeOut}),.2)))},e.prototype.hide=function(){0!=this.isOpen&&(this.engaged=!1,this.focused=!1,this.hidden=!0,this.focusTimeline=this.scene.killTween(this.focusTimeline),this.highlightTimeline=this.scene.killTween(this.highlightTimeline),this.highlightTimeline=new TimelineMax,this.highlightTimeline.add(TweenMax.to(this.container.scale,.4,{x:0,y:0,ease:Power2.easeIn}),0),this.highlightTimeline.add(TweenMax.to(this.container,.4,{alpha:0,ease:Power2.easeIn}),0),this.brand&&(1==Game.coreData.getRideData(this.id)[0].active?(this.highlightTimeline.add(TweenMax.to(this.brandBoxBack.scale,.4,{x:0,y:0,ease:Back.easeOut}),0),this.highlightTimeline.add(TweenMax.to(this.brandBox.scale,.4,{x:0,y:0,ease:Back.easeOut}),.05),this.highlightTimeline.add(TweenMax.to(this.logo,.3,{alpha:0,ease:Expo.easeOut}),0)):(this.highlightTimeline.add(TweenMax.to(this.brandBoxBack.scale,.4,{x:0,y:0,ease:Back.easeOut}),0),this.highlightTimeline.add(TweenMax.to(this.brandBox.scale,.4,{x:0,y:0,ease:Back.easeOut}),.05),this.highlightTimeline.add(TweenMax.to(this.logo,.3,{alpha:0,ease:Expo.easeOut}),0),this.highlightTimeline.add(TweenMax.to(this.brandBoxComingSoon,.5,{alpha:0,ease:Expo.easeOut}),0),this.highlightTimeline.add(TweenMax.to(this.brandBoxNail,.5,{alpha:0,ease:Expo.easeOut}),0))),1==this.newGame&&this.highlightTimeline.add(TweenMax.to(this.newIconHolder.scale,.3,{x:0,y:0,ease:Back.easeOut}),.2))},e.prototype.destroy=function(){if(1!=this.forcedHidden){var e=this.container.getSpriteAt(1);this.container.removeChild(e);var t=this.container.getSpriteAt(0);this.container.removeChild(t),this.container.parent.removeChild(this.container),Game.displayStore.returnPooledItem(this.container),Game.displayStore.returnPooledItem(e),Game.displayStore.returnPooledItem(t),1==this.newGame&&(Game.displayStore.returnPooledItem(this.newIconHolder),Game.displayStore.returnPooledItem(this.newIconStar),Game.displayStore.returnPooledItem(this.newIconStarShadow),Game.displayStore.returnPooledItem(this.newIconStarText)),this.highlightTimeline=this.scene.killTween(this.highlightTimeline),this.focusTimeline=this.scene.killTween(this.focusTimeline),this.brand&&Game.displayStore.returnPooledItem(this.logo)}},e}(),TutorialOverlay=function(){function e(e){this.scene=e,console.log("building tute scene.."),this.bgOverlay=Game.displayStore.getSprite("tutorial-element-bg"),this.bgOverlay.width=Game.stageWidth,this.bgOverlay.height=Game.stageHeight,this.bgOverlay.alpha=.4,this.dotSpacing=25,this.isOpen=!1,this.paginationOffAlpha=.25,this.paginationOnAlpha=.9}return e.prototype.buildTutorial=function(e,t){this.isOpen=!0,this.controlsTitle=Game.displayStore.getBitmapText("tutorial/title-font"),this.howToPlayTitle=Game.displayStore.getBitmapText("tutorial/title-font"),this.powerUpTitle=Game.displayStore.getBitmapText("tutorial/title-font"),this.currentPanelState=0,this.addedOverlay=t,this.tutorialHolder=Game.displayStore.getContainer("ui/tutorial-overlay-main-holder"),this.tutorialHolder.position.y=Game.stageHeight/2-Game.stageHeight,this.gameID=e,this.panels=new Array,this.panels.push({container:Game.displayStore.getContainer("tutorial-frame-controls"),panelBG:Game.displayStore.getSprite("tutorial-panel-bg"),id:"controls"}),this.panels.push({container:Game.displayStore.getContainer("tutorial-frame-howtoplay"),panelBG:Game.displayStore.getSprite("tutorial-panel-bg"),id:"howtoplay"}),3!=this.scene.game.gameLaunchMode&&this.panels.push({container:Game.displayStore.getContainer("tutorial-frame-powerups"),panelBG:Game.displayStore.getSprite("tutorial-panel-bg"),id:"powerup"}),Game.coreData.setGameTutorialViewed(this.gameID),1==this.addedOverlay&&this.scene.container.addChild(this.bgOverlay),0==this.addedOverlay?this.scene.game.ui.setUI("help"):this.scene.game.ui.setUI("tutorial-overlay"),this.positions=new Array,this.positions.push(Game.stageWidth/2),this.positions.push(Game.stageWidth/2-Game.stageWidth),this.positions.push(Game.stageWidth/2-2*Game.stageWidth);for(i=0;i<this.panels.length;i++)this.panels[i].container.addChildAt(this.panels[i].panelBG,0),this.panels[i].container.position.x=Game.stageWidth*i,this.tutorialHolder.addChild(this.panels[i].container);this.scene.container.addChild(this.tutorialHolder),this.setUpTitle(this.controlsTitle,0),this.setUpTitle(this.howToPlayTitle,1),3!=this.scene.game.gameLaunchMode&&this.setUpTitle(this.powerUpTitle,2),this.paginationDots=new Array;for(var i=0;i<9;i++)this.paginationDots.push({sprite:Game.displayStore.getSprite("tutorial-pagination-dot"),container:null});this.setUpPaginationDots(0,2,this.panels[0].container,0),this.setUpPaginationDots(3,5,this.panels[1].container,1),3!=this.scene.game.gameLaunchMode&&this.setUpPaginationDots(6,8,this.panels[2].container,2),this.tutorialHolder.position.x=this.positions[this.currentPanelState],this.cyclePanel(0),TweenMax.to(this.tutorialHolder.position,.5,{y:Game.stageHeight/2,ease:Back.easeOut})},e.prototype.setUpTitle=function(e,t){Game.stringsManager.setTextString(e,this.panels[t].id),e.position.x=0-e.width/2+Game.stringsManager.getTextOffset(this.panels[t].id).xOffset,e.position.y=-225+Game.stringsManager.getTextOffset(this.panels[t].id).yOffset,e.tint=16734722,this.panels[t].container.addChild(e)},e.prototype.setUpPaginationDots=function(e,t,i,s){var o,a=0;3!=this.scene.game.gameLaunchMode?o=-this.dotSpacing:(o=-this.dotSpacing/2,t-=1);for(var r=e;r<=t;r++)this.paginationDots[r].container=i,this.paginationDots[r].sprite.position.x=o,this.paginationDots[r].sprite.position.y=190,this.paginationDots[r].sprite.alpha=this.paginationOffAlpha,a==s&&(this.paginationDots[r].sprite.alpha=this.paginationOnAlpha),this.paginationDots[r].container.addChild(this.paginationDots[r].sprite),o+=this.dotSpacing,a++},e.prototype.remove=function(){this.isOpen=!1;for(e=0;e<this.panels.length;e++)this.panels[e].container.removeChild(this.panels[e].panelBG),this.tutorialHolder.removeChild(this.panels[e].container);this.scene.container.removeChild(this.tutorialHolder),1==this.addedOverlay&&this.scene.container.removeChild(this.bgOverlay);for(var e=0;e<this.paginationDots.length;e++)this.paginationDots[e].container&&(this.paginationDots[e].container.removeChild(this.paginationDots[e].sprite),this.paginationDots[e].container=null),Game.displayStore.returnPooledItem(this.paginationDots[e].sprite);this.animationTween=this.scene.killTween(this.animationTween),Game.displayStore.flush([this.gameID+"-tutorial-assets"]),Game.displayStore.returnPooledItem(this.controlsTitle),Game.displayStore.returnPooledItem(this.howToPlayTitle),Game.displayStore.returnPooledItem(this.powerUpTitle)},e.prototype.uiClicked=function(e){switch(e.id){case"tutorial-button-left":this.cyclePanel(-1);break;case"tutorial-button-right":this.cyclePanel(1);break;case"close-button":1==this.isOpen&&(this.remove(),this.scene.tutorialOverlayClosed())}},e.prototype.cyclePanel=function(e){this.currentPanelState+=e,this.currentPanelState<0&&(this.currentPanelState=0),this.currentPanelState>this.panels.length-1&&(this.currentPanelState=this.panels.length-1),this.animationTween=this.scene.killTween(this.animationTween),this.animationTween=new TimelineMax({onComplete:this.addRotation,onCompleteParams:[this]}),this.animationTween.add(TweenMax.to(this.tutorialHolder.position,.5,{x:this.positions[this.currentPanelState],ease:Expo.easeOut}),0),this.animationTween.add(TweenMax.to(this.panels[this.currentPanelState].container,.5,{rotation:0,ease:Back.easeOut}),0),this.setButtonState()},e.prototype.addRotation=function(e){for(var t=0;t<e.panels.length;t++)t!=e.currentPanelState&&(e.panels[t].container.rotation=Game.getRandom(-.2,.2))},e.prototype.setButtonState=function(){0==this.currentPanelState?(this.scene.game.ui.disableButton("tutorial-button-left"),this.scene.game.ui.enableButton("tutorial-button-right")):this.currentPanelState==this.panels.length-1?(this.scene.game.ui.disableButton("tutorial-button-right"),this.scene.game.ui.enableButton("tutorial-button-left")):(this.scene.game.ui.enableButton("tutorial-button-left"),this.scene.game.ui.enableButton("tutorial-button-right"))},e.prototype.tick=function(){},e.prototype.destroy=function(){},e}(),WristbandOverlay=function(){function e(e){this.scene=e,this.isOpen=!1}return e.prototype.build=function(){this.secondChanceUsed=!1,this.dialogue=Game.displayStore.getContainer("global/wristband-dialogue"),this.dialoguePanel=this.dialogue.getContainer("global/dialogue-panel"),this.gameoverSign=this.dialogue.getContainer("global/gameover-sign"),this.sparkleHolder=this.dialoguePanel.getContainer("global/sparkle"),this.blackout=this.dialogue.getSprite("global/wristband-element-bg.png"),this.blackout.width=Game.stageWidth,this.blackout.height=Game.stageHeight,this.blackout.alpha=.6,this.glow=this.sparkleHolder.getSprite("global/sparkle-glow.png"),this.sparkle1=this.sparkleHolder.getSprite("global/sparkle-1.png"),this.sparkle2=this.sparkleHolder.getSprite("global/sparkle-2.png"),this.dialogueText=Game.displayStore.getBitmapText("global-dialogue-text"),this.dialogueDescriptionText=Game.displayStore.getBitmapText("global-dialogue-description-text"),this.gameoverSignText=Game.displayStore.getBitmapText("global-dialogue-title-text")},e.prototype.show=function(){if(1!=this.secondChanceUsed){var e=Game.coreData.getCurrentWristband();this.dialogueSprite=Game.displayStore.getSprite("global/wristbands/"+e.id),this.isOpen=!0,this.gameoverSign.position.y=-150,this.scene.container.addChild(this.dialogue),this.scene.game.ui.setUI("use-wristband-dialogue"),this.sparkleHolder.addChildAt(this.dialogueSprite,2),this.dialoguePanel.scale.x=this.dialoguePanel.scale.y=0,Game.playSound("scale-up.mp3",.8),this.sparkle1.blendMode=PIXI.BLEND_MODES.ADD,this.sparkle2.blendMode=PIXI.BLEND_MODES.ADD,this.glow.blendMode=PIXI.BLEND_MODES.ADD,this.sparkle1.scale.x=this.sparkle1.scale.y=0,this.sparkle2.scale.x=this.sparkle2.scale.y=0,this.glow.scale.x=this.glow.scale.y=0,this.dialogueSprite.scale.x=this.dialogueSprite.scale.y=0,Game.stringsManager.setTextString(this.dialogueText,"use-wristband"),this.dialogueText.scale.x=this.dialogueText.scale.y*=.9,this.dialogueText.position.x=-20+Game.stringsManager.getTextOffset("use-wristband").xOffset,this.dialogueText.position.y=-150+Game.stringsManager.getTextOffset("use-wristband").yOffset,this.dialoguePanel.addChild(this.dialogueText),this.dialogueDescriptionText.position.x=-20,this.dialogueDescriptionText.position.y=-65,this.dialogueDescriptionText.scale.x=this.dialogueDescriptionText.scale.y=.5,this.dialogueDescriptionText.text="item description",this.dialogueDescriptionText.tint=3194604,Game.stringsManager.setTextString(this.dialogueDescriptionText,e.id+"-title"),this.dialogueDescriptionText.scale.x=this.dialogueDescriptionText.scale.y*=.7,this.dialoguePanel.addChild(this.dialogueDescriptionText),this.gameoverSignText.scale.x=this.gameoverSignText.scale.y=.5,this.gameoverSignText.text="item description",Game.stringsManager.setTextString(this.gameoverSignText,"global-dialogue-title-text"),this.gameoverSignText.position.x=-120,this.gameoverSignText.position.y=45,this.gameoverSign.addChild(this.gameoverSignText),this.showDialogueTimeline=this.scene.killTween(this.showDialogueTimeline),this.showDialogueTimeline=new TimelineMax,this.showDialogueTimeline.add(TweenMax.to(this.dialoguePanel.scale,1,{x:1,y:1,ease:Elastic.easeOut}),0),this.showDialogueTimeline.add(TweenMax.to(this.dialogue,.5,{alpha:1,ease:Power2.easeOut}),0),this.showDialogueTimeline.add(TweenMax.to(this.dialogueSprite.scale,1,{x:1,y:1,ease:Elastic.easeOut}),.4),this.showDialogueTimeline.add(TweenMax.to(this.sparkle1.scale,1,{x:1,y:1,ease:Elastic.easeOut}),.2),this.showDialogueTimeline.add(TweenMax.to(this.sparkle2.scale,1,{x:1,y:1,ease:Elastic.easeOut}),.25),this.showDialogueTimeline.add(TweenMax.to(this.glow.scale,1,{x:2,y:2,ease:Elastic.easeOut}),.3),this.showDialogueTimeline.add(TweenMax.to(this.sparkle1,20,{rotation:2*Math.PI,ease:Power0.easeOut,repeat:-1}),0),this.showDialogueTimeline.add(TweenMax.to(this.sparkle2,16,{rotation:2*-Math.PI,ease:Power0.easeOut,repeat:-1}),0),this.showDialogueTimeline.add(TweenMax.to(this.glow.scale,1,{x:.8,y:.8,ease:Power1.easeInOut,repeat:-1,yoyo:!0}),0),this.showDialogueTimeline.add(TweenMax.to(this.gameoverSign.position,.4,{y:-12,ease:Back.easeOut}),.3)}else this.hide(!1)},e.prototype.hide=function(e){if(this.showDialogueTimeline=this.scene.killTween(this.showDialogueTimeline),"secondchance"!=Game.coreData.getCurrentWristband().id)this.dialoguePanel.scale.x=this.dialoguePanel.scale.y=0,this.dialogue.alpha=0,this.sparkleHolder.removeChild(this.dialogueSprite),this.scene.game.setScene("gameoverScene",!0,[e]);else{if(0==e)return this.dialoguePanel.scale.x=this.dialoguePanel.scale.y=0,this.dialogue.alpha=0,this.sparkleHolder.removeChild(this.dialogueSprite),this.scene.game.setScene("gameoverScene",!0,[e]),void(this.isOpen=!1);this.scene.game.ui.setUI("none"),this.secondChanceUsed=!0,this.scene.game.ui.UIhud.useWristband(),this.showDialogueTimeline=new TimelineMax,this.showDialogueTimeline.add([TweenMax.to(this.dialoguePanel.scale,.5,{x:0,y:0,ease:Back.easeOut}),TweenMax.to(this.dialogue,.5,{alpha:0,ease:Power2.easeOut})],0),this.showDialogueTimeline.call(function(){this.scene.secondChanceUse(),this.scene.resume(),this.isOpen=!1,this.sparkleHolder.removeChild(this.dialogueSprite)},null,this)}},e.prototype.endGame=function(e){Game.coreData.setCurrentRideScoreFromGame(e),3!=this.scene.game.gameLaunchMode&&Game.coreData.getCurrentWristband().uses>0?(this.scene.pause(!0),this.show()):this.scene.game.setScene("gameoverScene",!0)},e.prototype.uiClicked=function(e){switch(e.id){case"close-button":1==this.isOpen&&this.hide(!1);break;case"accept-button":1==this.isOpen&&this.hide(!0)}},e.prototype.tick=function(){},e.prototype.destroy=function(){this.showDialogueTimeline=this.scene.killTween(this.showDialogueTimeline),this.scene.container.removeChild(this.dialogue),Game.stopSound("scale-up.mp3")},e}(),PhysicsDebugger=function(){function e(e,t,i){this.scene=e,this.mainContainer=t,this.world=i,this.rayFrameCount=0,this.rayFrameLimit=5,this.rayExists=!1,this.shapesColour=16711680,this.springsColour=255,this.constraintsColour=65280,this.raysColour=16711935,this.sensorColour=16776960,this.particleRadius=3}return e.prototype.updateDebugOverlay=function(){this.clearDebugOverlay(),this.checkDebugRay();for(T=0;T<this.world.bodies.length;T++)for(var e=[this.world.bodies[T].position[0],Game.stageHeight-this.world.bodies[T].position[1]],t=-this.world.bodies[T].angle,i=0;i<this.world.bodies[T].shapes.length;i++){if(this.world.bodies[T].shapes[i]instanceof p2.Convex){p=this.shapesColour;1==this.world.bodies[T].shapes[i].sensor&&(p=this.sensorColour),(v=new PIXI.Graphics).lineStyle(3,p);for(var s=[this.world.bodies[T].shapes[i].position[0],this.world.bodies[T].shapes[i].position[1]],o=0;o<this.world.bodies[T].shapes[i].vertices.length;o++){var a=[s[0]+this.world.bodies[T].shapes[i].vertices[o][0],s[1]+this.world.bodies[T].shapes[i].vertices[o][1]],r=this.getDistance(a[0],a[1],0,0),n=this.getAngle(a[0],a[1],0,0),h=e[0]+Math.cos(n+t)*r,l=e[1]+Math.sin(n+t)*r;0==o?(v.moveTo(h,l),d=h,u=l):v.lineTo(h,l)}v.lineTo(d,u),this.debugGraphicsLayer.push(v),this.mainContainer.addChild(v)}if(this.world.bodies[T].shapes[i]instanceof p2.Circle){var s=[this.world.bodies[T].shapes[i].position[0],this.world.bodies[T].shapes[i].position[1]],r=this.getDistance(s[0],s[1],0,0),n=this.getAngle(s[0],s[1],0,0),h=e[0]+Math.cos(n+t)*r,l=e[1]+Math.sin(n+t)*r,p=this.shapesColour;1==this.world.bodies[T].shapes[i].sensor&&(p=this.sensorColour),(c=new PIXI.Graphics).lineStyle(3,p),c.drawCircle(h,l,this.world.bodies[T].shapes[i].boundingRadius),this.debugGraphicsLayer.push(c),this.mainContainer.addChild(c)}if(this.world.bodies[T].shapes[i]instanceof p2.Particle){var s=[this.world.bodies[T].shapes[i].position[0],this.world.bodies[T].shapes[i].position[1]],r=this.getDistance(s[0],s[1],0,0),n=this.getAngle(s[0],s[1],0,0),h=e[0]+Math.cos(n+t)*r,l=e[1]+Math.sin(n+t)*r,p=this.shapesColour;1==this.world.bodies[T].shapes[i].sensor&&(p=this.sensorColour);var c=new PIXI.Graphics;c.lineStyle(3,p),c.beginFill(p),c.drawCircle(h,l,this.particleRadius),c.endFill(),this.debugGraphicsLayer.push(c),this.mainContainer.addChild(c)}if(this.world.bodies[T].shapes[i]instanceof p2.Capsule){for(var d,u,s=[this.world.bodies[T].shapes[i].position[0],this.world.bodies[T].shapes[i].position[1]],g=this.world.bodies[T].shapes[i].length,m=this.world.bodies[T].shapes[i].radius,y=[[s[0]-g/2,s[1]-m],[s[0]+g/2,s[1]-m],[s[0]+g/2,s[1]+m],[s[0]-g/2,s[1]+m]],f=[[s[0]-g/2,s[1]],[s[0]+g/2,s[1]]],b=[],w=[],o=0;o<y.length;o++){var a=[s[0]+y[o][0],s[1]+y[o][1]],r=this.getDistance(a[0],a[1],0,0),n=this.getAngle(a[0],a[1],0,0),h=e[0]+Math.cos(n+t)*r,l=e[1]+Math.sin(n+t)*r;b[o]=[h,l]}for(o=0;o<f.length;o++){var a=[s[0]+f[o][0],s[1]+f[o][1]],r=this.getDistance(a[0],a[1],0,0),n=this.getAngle(a[0],a[1],0,0),h=e[0]+Math.cos(n+t)*r,l=e[1]+Math.sin(n+t)*r;w[o]=[h,l]}p=this.shapesColour;1==this.world.bodies[T].shapes[i].sensor&&(p=this.sensorColour);var v=new PIXI.Graphics;v.lineStyle(3,p),v.moveTo(b[0][0],b[0][1]),v.lineTo(b[1][0],b[1][1]),v.arc(w[0][0],w[0][1],m,t+.5*Math.PI,t+1.5*Math.PI,!1),v.lineTo(b[2][0],b[2][1]),v.arc(w[1][0],w[1][1],m,t+1.5*Math.PI,t+.5*Math.PI,!1),this.debugGraphicsLayer.push(v),this.mainContainer.addChild(v)}if(this.world.bodies[T].shapes[i]instanceof p2.Plane){var s=[this.world.bodies[T].shapes[i].position[0],this.world.bodies[T].shapes[i].position[1]],p=this.shapesColour;1==this.world.bodies[T].shapes[i].sensor&&(p=this.sensorColour),(G=new PIXI.Graphics).lineStyle(3,p);var k=e[0]+s[0]+-5e4*Math.cos(t),S=e[1]+s[1]+-5e4*Math.sin(t);G.moveTo(k,S);var x=e[0]+s[0]+5e4*Math.cos(t),P=e[1]+s[1]+5e4*Math.sin(t);G.lineTo(x,P),this.debugGraphicsLayer.push(G),this.mainContainer.addChild(G)}if(this.world.bodies[T].shapes[i]instanceof p2.Line){p=this.shapesColour;1==this.world.bodies[T].shapes[i].sensor&&(p=this.sensorColour);s=[this.world.bodies[T].shapes[i].position[0],this.world.bodies[T].shapes[i].position[1]];(G=new PIXI.Graphics).lineStyle(3,p);var B=this.world.bodies[T].shapes[i].length,k=e[0]+s[0]+Math.cos(t)*(B/2*-1),S=e[1]+s[1]+Math.sin(t)*(B/2*-1);G.moveTo(k,S);var x=e[0]+s[0]+Math.cos(t)*(B/2),P=e[1]+s[1]+Math.sin(t)*(B/2);G.lineTo(x,P),this.debugGraphicsLayer.push(G),this.mainContainer.addChild(G)}if(this.world.bodies[T].shapes[i]instanceof p2.Heightfield){p=this.shapesColour;1==this.world.bodies[T].shapes[i].sensor&&(p=this.sensorColour);for(var s=[this.world.bodies[T].shapes[i].position[0],this.world.bodies[T].shapes[i].position[1]],o=0;o<this.world.bodies[T].shapes[i].heights.length;o++){var a=[s[0]+o*this.world.bodies[T].shapes[i].elementWidth,s[1]+this.world.bodies[T].shapes[i].heights[o]],r=this.getDistance(a[0],a[1],0,0),n=this.getAngle(a[0],a[1],0,0),h=e[0]+Math.cos(n+t)*r,l=e[1]+Math.sin(n+t)*r;0==o?(v.moveTo(h,l),d=h,u=l):v.lineTo(h,l)}}}for(T=0;T<this.world.constraints.length;T++)if(this.world.constraints[T].bodyA){(G=new PIXI.Graphics).lineStyle(3,this.constraintsColour);var k=this.world.constraints[T].bodyA.position[0],S=Game.stageHeight-this.world.constraints[T].bodyA.position[1];G.moveTo(k,S);var x=this.world.constraints[T].bodyB.position[0],P=Game.stageHeight-this.world.constraints[T].bodyB.position[1];G.lineTo(x,P),this.debugGraphicsLayer.push(G),this.mainContainer.addChild(G)}for(var T=0;T<this.world.springs.length;T++){var G=new PIXI.Graphics;G.lineStyle(3,this.springsColour);var k=this.world.springs[T].bodyA.position[0],S=Game.stageHeight-this.world.springs[T].bodyA.position[1];G.moveTo(k,S);var x=this.world.springs[T].bodyB.position[0],P=Game.stageHeight-this.world.springs[T].bodyB.position[1];G.lineTo(x,P),this.debugGraphicsLayer.push(G),this.mainContainer.addChild(G)}},e.prototype.getDistance=function(e,t,i,s){var o=e-i,a=t-s;return Math.sqrt(o*o+a*a)},e.prototype.getAngle=function(e,t,i,s){if(e==i&&t==s)return 0;var o=e-i,a=s-t;return Math.atan2(a,o)},e.prototype.traceRay=function(e){this.debugRay&&(this.mainContainer.removeChild(this.debugRay),this.debugRay.clear(),this.debugRay=null),this.rayExists=!0,this.rayFrameCount=0,this.debugRay=new PIXI.Graphics,this.debugRay.lineStyle(3,this.raysColour);var t=[e.from[0],Game.stageHeight-e.from[1]],i=[e.direction[0],e.direction[1]],s=-Math.atan2(i[1],i[0]),o=t[0]+Math.cos(s),a=t[1]+Math.sin(s);this.debugRay.moveTo(o,a);var r=t[0]+1e3*Math.cos(s),n=t[1]+1e3*Math.sin(s);this.debugRay.lineTo(r,n),this.mainContainer.addChild(this.debugRay)},e.prototype.clearDebugOverlay=function(){if(this.debugGraphicsLayer)for(var e=0;e<this.debugGraphicsLayer.length;e++)this.mainContainer.removeChild(this.debugGraphicsLayer[e]),this.debugGraphicsLayer[e].clear(),this.debugGraphicsLayer[e]=null;this.debugGraphicsLayer=[]},e.prototype.checkDebugRay=function(){0!=this.rayExists&&++this.rayFrameCount>=this.rayFrameLimit&&(this.rayFrameCount=0,this.rayExists=!1,this.debugRay&&(this.mainContainer.removeChild(this.debugRay),this.debugRay.clear(),this.debugRay=null))},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.destroy=function(){this.clearDebugOverlay()},e}(),UI=function(){function e(e){this.tweens=new Array,this.uiInitialised=!1,this.currentKeyCycledButton=0,this.keyboardUIFocus=!1,this.game=e,this.buttons=new Array,this.spinnerOn=!1,this.enjoyIntroOn=!1,this.powerUpIntroOn=!1,this.pauseButtonSpacing=190,this.pauseVerticalSpacing=200}return e.prototype.initUI=function(){this.uiContainer=Game.displayStore.getContainer("ui-main-container"),this.uiContainer.interactive=!0,this.uiMessageContainer=Game.displayStore.getContainer("ui-message-container"),this.uiMessageContainer.interactive=!1,this.enjoyTheRide=Game.displayStore.getSprite("ui/enjoy-prompt"),this.clickEffect=Game.displayStore.getAnimatedSprite("click-anim"),this.clickEffect.animationSpeed=.3,this.clickEffect.loop=!1,this.clickEffect.scale.x=this.clickEffect.scale.y=.9,this.clickEffect.position.y=-1e3,this.largeClickEffect=Game.displayStore.getAnimatedSprite("large-click-anim"),this.largeClickEffect.animationSpeed=.3,this.largeClickEffect.loop=!1,this.largeClickEffect.scale.x=this.largeClickEffect.scale.y=.9,this.largeClickEffect.position.y=-1e3,this.pauseButton=Game.displayStore.getButton("pause-button"),this.pauseButton.position.x=952,this.pauseButton.position.y=68,this.pauseButton.visuallyPrepareButton("small"),this.pauseButton.setAsUIButton(),this.closeButton=Game.displayStore.getButton("close-button"),this.closeButton.position.x=952,this.closeButton.position.y=68,this.closeButton.visuallyPrepareButton("small"),this.closeButton.setAsUIButton(),this.UIhud=new UIhud,this.powerupActiveIcon=Game.displayStore.getContainer("ui/powerup-activated"),this.largePlayButton=Game.displayStore.getButton("playbuttonlarge"),this.largePlayButton.position.x=512,this.largePlayButton.position.y=400,this.largePlayButton.visuallyPrepareButton("large"),this.largePlayButton.setAsUIButton(),this.largeReplayButton=Game.displayStore.getButton("replaybuttonlarge"),this.largeReplayButton.position.x=900,this.largeReplayButton.position.y=480,this.largeReplayButton.visuallyPrepareButton("large"),this.largeReplayButton.setAsUIButton(),this.largePhotoButton=Game.displayStore.getButton("photo-button-large"),this.largePhotoButton.position.x=835,this.largePhotoButton.position.y=455,this.largePhotoButton.visuallyPrepareButton("large"),this.largePhotoButton.setAsUIButton(),this.powerupButton=Game.displayStore.getButton("powerup-button"),this.powerupButton.position.x=62,this.powerupButton.position.y=385,this.powerupButton.visuallyPrepareButton("small"),this.powerupButton.setAsUIButton(this),this.soundOnButton=Game.displayStore.getButton("soundonbutton"),this.soundOnButton.position.x=952,this.soundOnButton.position.y=68,this.soundOnButton.visuallyPrepareButton("small"),this.soundOnButton.setAsUIButton(),this.soundOffButton=Game.displayStore.getButton("soundoffbutton"),this.soundOffButton.position.x=952,this.soundOffButton.position.y=68,this.soundOffButton.visuallyPrepareButton("small"),this.soundOffButton.setAsUIButton(),this.homeButton=Game.displayStore.getButton("home-button"),this.homeButton.visuallyPrepareButton("small"),this.homeButton.setAsUIButton(),this.helpButton=Game.displayStore.getButton("help-button"),this.helpButton.position.x=72,this.helpButton.position.y=68,this.helpButton.visuallyPrepareButton("small"),this.helpButton.setAsUIButton(),this.backButton=Game.displayStore.getButton("back-button"),this.backButton.position.x=72,this.backButton.position.y=68,this.backButton.visuallyPrepareButton("small"),this.backButton.setAsUIButton(),this.editClothesButton=Game.displayStore.getButton("edit-clothes-button"),this.editClothesButton.position.x=832,this.editClothesButton.position.y=285,this.editClothesButton.visuallyPrepareButton("small"),this.editClothesButton.setAsUIButton(),this.editAvatarButton=Game.displayStore.getButton("edit-avatar-button"),this.editAvatarButton.position.x=832,this.editAvatarButton.position.y=164,this.editAvatarButton.visuallyPrepareButton("small"),this.editAvatarButton.setAsUIButton(),this.playButton=Game.displayStore.getButton("play-button"),this.playButton.position.x=952,this.playButton.position.y=530,this.playButton.visuallyPrepareButton("small"),this.playButton.setAsUIButton(),this.skipButton=Game.displayStore.getButton("skip-button"),this.skipButton.position.x=952,this.skipButton.position.y=530,this.skipButton.visuallyPrepareButton("small"),this.skipButton.setAsUIButton(),this.kickButton=Game.displayStore.getButton("kickbutton"),this.kickButton.position.x=952,this.kickButton.position.y=312,this.kickButton.visuallyPrepareButton("small"),this.kickButton.setAsUIButton(),this.riverFireButton=Game.displayStore.getButton("river-rangers-fire-button"),this.riverFireButton.position.x=952,this.riverFireButton.position.y=510,this.riverFireButton.visuallyPrepareButton("small"),this.riverFireButton.setAsUIButton(),this.flipButton1=Game.displayStore.getButton("beach-buggy-flip-button"),this.flipButton1.position.x=512,this.flipButton1.position.y=500,this.flipButton1.visuallyPrepareButton("small"),this.flipButton1.setAsUIButton(),this.flipButton2=Game.displayStore.getButton("jet-ski-flip-button"),this.flipButton2.position.x=512,this.flipButton2.position.y=500,this.flipButton2.visuallyPrepareButton("small"),this.flipButton2.setAsUIButton(),this.jumpButton=Game.displayStore.getButton("jump-button"),this.jumpButton.position.x=952,this.jumpButton.position.y=312,this.jumpButton.visuallyPrepareButton("small"),this.jumpButton.setAsUIButton(),this.leftButton=Game.displayStore.getButton("left-button"),this.leftButton.position.x=72,this.leftButton.position.y=312,this.leftButton.visuallyPrepareButton("small"),this.leftButton.setAsUIButton(),this.rightButton=Game.displayStore.getButton("right-button"),this.rightButton.position.x=852,this.rightButton.position.y=312,this.rightButton.visuallyPrepareButton("small"),this.rightButton.setAsUIButton(),this.forwardsButton=Game.displayStore.getButton("forwards-button"),this.forwardsButton.position.x=925,this.forwardsButton.position.y=382,this.forwardsButton.visuallyPrepareButton("small"),this.forwardsButton.setAsUIButton(),this.backwardsButton=Game.displayStore.getButton("backwards-button"),this.backwardsButton.position.x=925,this.backwardsButton.position.y=510,this.backwardsButton.visuallyPrepareButton("small"),this.backwardsButton.setAsUIButton(),this.moveLeftButton=Game.displayStore.getButton("move-left-button"),this.moveLeftButton.position.x=150,this.moveLeftButton.position.y=470,this.moveLeftButton.visuallyPrepareButton("small"),this.moveLeftButton.setAsUIButton(),this.moveRightButton=Game.displayStore.getButton("move-right-button"),this.moveRightButton.position.x=280,this.moveRightButton.position.y=470,this.moveRightButton.visuallyPrepareButton("small"),this.moveRightButton.setAsUIButton(),this.rotateButton=Game.displayStore.getButton("rotate-button"),this.rotateButton.position.x=152,this.rotateButton.position.y=242,this.rotateButton.visuallyPrepareButton("small"),this.rotateButton.setAsUIButton(),this.giftShopButton=Game.displayStore.getButton("giftshop-button"),this.giftShopButton.position.x=102,this.giftShopButton.position.y=312,this.giftShopButton.visuallyPrepareButton("small"),this.giftShopButton.setAsUIButton(),this.basketButton=Game.displayStore.getButton("basket-button"),this.basketButton.position.x=512,this.basketButton.position.y=512,this.basketButton.visuallyPrepareButton("small"),this.basketButton.setAsUIButton(),this.scaleButton=Game.displayStore.getButton("scale-button"),this.scaleButton.position.x=952,this.scaleButton.position.y=312,this.scaleButton.visuallyPrepareButton("small"),this.scaleButton.setAsUIButton(),this.smallReplayButton=Game.displayStore.getButton("small-replay-button"),this.smallReplayButton.position.x=452,this.smallReplayButton.position.y=512,this.smallReplayButton.visuallyPrepareButton("small"),this.smallReplayButton.setAsUIButton(),this.backToPhotobooth=Game.displayStore.getButton("back-to-photobooth-button"),this.backToPhotobooth.position.x=512,this.backToPhotobooth.position.y=500,this.backToPhotobooth.visuallyPrepareButton("small"),this.backToPhotobooth.setAsUIButton(),this.acceptButton=Game.displayStore.getButton("accept-button"),this.acceptButton.position.x=512,this.acceptButton.position.y=492,this.acceptButton.visuallyPrepareButton("small"),this.acceptButton.setAsUIButton(),this.shareButton=Game.displayStore.getButton("share-button"),this.shareButton.position.x=922,this.shareButton.position.y=223,this.shareButton.visuallyPrepareButton("small"),this.shareButton.setAsUIButton(),this.downloadButton=Game.displayStore.getButton("download-button"),this.downloadButton.position.x=922,this.downloadButton.position.y=420,this.downloadButton.visuallyPrepareButton("small"),this.downloadButton.setAsUIButton(),this.leftArrowButton=Game.displayStore.getButton("left-arrow-button"),this.leftArrowButton.position.x=712,this.leftArrowButton.position.y=300,this.leftArrowButton.visuallyPrepareButton("small"),this.leftArrowButton.setAsUIButton(),this.rightArrowButton=Game.displayStore.getButton("right-arrow-button"),this.rightArrowButton.position.x=712,this.rightArrowButton.position.y=500,this.rightArrowButton.visuallyPrepareButton("small"),this.rightArrowButton.setAsUIButton(),this.leftHubButton=Game.displayStore.getButton("hub-left-button"),this.leftHubButton.position.x=50,this.leftHubButton.position.y=310,this.leftHubButton.visuallyPrepareButton("small"),this.leftHubButton.setAsUIButton(),this.rightHubButton=Game.displayStore.getButton("hub-right-button"),this.rightHubButton.position.x=975,this.rightHubButton.position.y=310,this.rightHubButton.visuallyPrepareButton("small"),this.rightHubButton.setAsUIButton(),this.tutorialLeftButton=Game.displayStore.getButton("tutorial-button-left"),this.tutorialLeftButton.position.x=156,this.tutorialLeftButton.position.y=312,this.tutorialLeftButton.visuallyPrepareButton("small"),this.tutorialLeftButton.setAsUIButton(),this.tutorialRightButton=Game.displayStore.getButton("tutorial-button-right"),this.tutorialRightButton.position.x=868,this.tutorialRightButton.position.y=312,this.tutorialRightButton.visuallyPrepareButton("small"),this.tutorialRightButton.setAsUIButton();var e=this,t=window;t.addEventListener("keydown",function(t){e.onKeyDown(t)},!0),t.addEventListener("keyup",function(t){e.onKeyUp(t)},!0),this.uiInitialised=!0},e.prototype.setUI=function(e){if(0!=this.uiInitialised)switch(this.mode=e,this.removeAllButtons(),this.uiContainer.addChild(this.clickEffect),this.uiContainer.addChild(this.largeClickEffect),this.removeUIHudElement(),this.UIhud.container.position.x=-15,this.UIhud.container.scale.x=.9,this.UIhud.container.scale.y=.9,this.currentKeyCycledButton=0,this.deselectDelay&&this.deselectDelay.kill(),this.soundOnButton.position.x=952,this.soundOnButton.position.y=68,this.soundOffButton.position.x=952,this.soundOffButton.position.y=68,this.homeButton.position.x=72,this.homeButton.position.y=68,e){case"title":window.og&&window.og.isFullScreen;break;case"game-over":this.addSoundButtons(!0),this.addUIButton(this.homeButton,!0,!0),this.addUIHudElement();break;case"external-link":this.addSoundButtons(!0),this.addUIButton(this.backToPhotobooth,!0,!0);break;case"accept-form":this.addSoundButtons(!0),this.addUIButton(this.acceptButton,!0,!0);break;case"buy-dialogue":this.addUIButton(this.closeButton,!0,!0),this.addUIButton(this.acceptButton,!0,!0),this.closeButton.position.x=875,this.closeButton.position.y=85,this.uiContainer.addChild(this.UIhud.container);break;case"claw-dialogue":this.addUIButton(this.acceptButton,!0,!0),this.addUIButton(this.backButton,!1,!0),this.acceptButton.position.x=845,this.acceptButton.position.y=485,this.uiContainer.addChild(this.UIhud.container),this.UIhud.container.position.y=150;break;case"claw-dialogue-closing":this.addUIButton(this.backButton,!1,!0),this.uiContainer.addChild(this.UIhud.container),this.UIhud.container.position.y=150;break;case"use-wristband-dialogue":this.addUIButton(this.closeButton,!0,!0),this.addUIButton(this.acceptButton,!0,!0),this.closeButton.position.x=875,this.closeButton.position.y=85,this.acceptButton.position.x=512,this.acceptButton.position.y=500,this.uiContainer.addChild(this.UIhud.container);break;case"alert":this.addUIButton(this.closeButton,!0,!0),this.closeButton.position.x=800,this.closeButton.position.y=170;break;case"claw-alert":this.addUIButton(this.closeButton,!0,!0),this.closeButton.position.x=800,this.closeButton.position.y=170,this.uiContainer.addChild(this.UIhud.container),this.UIhud.container.position.y=150;break;case"customise-clothes":this.addSoundButtons(!0),this.addUIButton(this.leftArrowButton,!1,!1),this.addUIButton(this.rightArrowButton,!1,!1),this.addUIButton(this.backButton,!1,!0),this.leftArrowButton.position.x=75,this.leftArrowButton.position.y=335,this.rightArrowButton.position.x=950,this.rightArrowButton.position.y=335;break;case"customise-clothes-left":this.addSoundButtons(!1),this.addUIButton(this.leftArrowButton,!1,!1),this.addUIButton(this.backButton,!1,!0),this.leftArrowButton.position.x=75,this.leftArrowButton.position.y=335;break;case"customise-clothes-right":this.addSoundButtons(!1),this.addUIButton(this.rightArrowButton,!1,!1),this.addUIButton(this.backButton,!1,!0),this.rightArrowButton.position.x=950,this.rightArrowButton.position.y=335;break;case"customise-clothes-no-arrows":this.addSoundButtons(!1),this.addUIButton(this.backButton,!1,!0);break;case"customise-avatar":this.addSoundButtons(!0),this.addUIButton(this.backButton,!1,!0);break;case"customise-avatar-accept":this.addSoundButtons(!0),this.addUIButton(this.backButton,!1,!0),this.addUIButton(this.acceptButton,!0,!0),this.acceptButton.position.x=950,this.acceptButton.position.y=500;break;case"customise-avatar-arrows":this.addSoundButtons(!0),this.addUIButton(this.leftArrowButton,!1,!1),this.addUIButton(this.rightArrowButton,!1,!1),this.addUIButton(this.backButton,!1,!0),this.leftArrowButton.position.y=this.rightArrowButton.position.y=350,this.leftArrowButton.position.x=500,this.rightArrowButton.position.x=920;break;case"customise-avatar-arrows-accept":this.addSoundButtons(!0),this.addUIButton(this.leftArrowButton,!1,!1),this.addUIButton(this.rightArrowButton,!1,!1),this.addUIButton(this.backButton,!1,!0),this.addUIButton(this.acceptButton,!0,!0),this.acceptButton.position.x=950,this.acceptButton.position.y=500,this.leftArrowButton.position.y=this.rightArrowButton.position.y=360,this.leftArrowButton.position.x=500,this.rightArrowButton.position.x=920;break;case"buy-items":case"buy-wristband":this.addSoundButtons(!0),this.addUIButton(this.leftArrowButton,!0,!1),this.addUIButton(this.rightArrowButton,!0,!1),this.addUIButton(this.backButton,!0,!0),this.addUIButton(this.basketButton,!0,!0),this.leftArrowButton.position.x=370,this.leftArrowButton.position.y=525,this.rightArrowButton.position.x=655,this.rightArrowButton.position.y=525,this.addUIHudElement();break;case"photobooth-main":this.addSoundButtons(!0),this.addUIButton(this.largePhotoButton,!0,!0),this.largePhotoButton.disableButton(),this.addUIButton(this.backButton,!0,!0),this.addUIButton(this.editClothesButton,!0,!0),this.addUIButton(this.editAvatarButton,!0,!0);break;case"photobooth-timer-on":this.addSoundButtons(!0),this.addUIButton(this.backButton,!0,!0);break;case"photobooth-main-clear-face":this.addSoundButtons(!0),this.addUIButton(this.largePhotoButton,!0,!0),this.largePhotoButton.enableButton(),this.addUIButton(this.backButton,!0,!0),this.addUIButton(this.editClothesButton,!0,!0),this.addUIButton(this.editAvatarButton,!0,!0),this.closeButton.position.x=832,this.closeButton.position.y=164,this.addUIButton(this.closeButton,!0,!0);break;case"photobooth-submitting":case"user-photo-preview":this.addSoundButtons(!0),this.addUIButton(this.backButton,!0,!0);break;case"edit-photo":this.addSoundButtons(!0),this.addUIButton(this.backButton,!0,!0),this.addUIButton(this.skipButton,!0,!0),1==Game.onDesktop&&this.addUIButton(this.rotateButton,!0,!0);break;case"upload-photo":case"upload-photo-confirm-legal":this.addSoundButtons(!0),this.addUIButton(this.backButton,!0,!0);break;case"final-photo-pre-successful-save":this.addSoundButtons(!0),this.addUIButton(this.backButton,!1,!0);break;case"final-photo":this.addSoundButtons(!0),this.addUIButton(this.shareButton,!0,!0),this.addUIButton(this.downloadButton,!0,!0),this.addUIButton(this.backButton,!0,!0);break;case"mini-game-title":this.addSoundButtons(!0),this.addUIButton(this.homeButton,!0,!0);break;case"mini-game-gameover":this.addSoundButtons(!0),this.addUIButton(this.homeButton,!0,!0),this.addUIHudElement();break;case"mini-game-gameover-end":this.addSoundButtons(!0),this.addUIButton(this.homeButton,!1,!0),3!=this.game.gameLaunchMode&&this.addUIButton(this.giftShopButton,!0,!0),this.addUIButton(this.largeReplayButton,!0,!0),this.giftShopButton.position.x=72,this.giftShopButton.position.y=400,this.addUIHudElement();break;case"giftshop":this.addUIButton(this.leftHubButton,!1,!1),this.addUIButton(this.rightHubButton,!1,!1),this.addUIButton(this.homeButton,!1,!0),this.addSoundButtons(!0),this.addUIHudElement(),this.UIhud.container.position.y=175;break;case"giftshop-left":this.addUIButton(this.rightHubButton,!1,!1),this.addUIButton(this.homeButton,!1,!1),this.addSoundButtons(!1),this.addUIHudElement();break;case"giftshop-right":this.addUIButton(this.leftHubButton,!1,!1),this.addUIButton(this.homeButton,!1,!1),this.addSoundButtons(!1),this.addUIHudElement();break;case"giftshop-touch":this.addUIButton(this.homeButton,!0,!0),this.addSoundButtons(!0),this.addUIHudElement(),this.UIhud.container.position.y=175;break;case"hub":this.addUIButton(this.leftHubButton,!0,!1),this.addUIButton(this.rightHubButton,!0,!1),this.addSoundButtons(!0),this.addUIHudElement(),this.UIhud.container.position.y=175;break;case"hub-title":this.addUIButton(this.backButton,!0,!0),this.addSoundButtons(!0),this.addUIHudElement(),this.UIhud.container.position.y=175;break;case"hub-touch":this.addSoundButtons(!0),this.addUIHudElement(),this.UIhud.container.position.y=175;break;case"hub-overlay":this.addUIButton(this.playButton,!0,!0),this.addUIButton(this.backButton,!0,!0),this.addSoundButtons(!0);break;case"pause":this.homeButton.position.x=Game.stageWidth/2-this.pauseButtonSpacing,this.homeButton.position.y=1.8*this.pauseVerticalSpacing,this.helpButton.position.x=Game.stageWidth/2,this.helpButton.position.y=1.2*this.pauseVerticalSpacing,this.soundOnButton.position.x=Game.stageWidth/2+this.pauseButtonSpacing,this.soundOnButton.position.y=1.8*this.pauseVerticalSpacing,this.soundOffButton.position.x=Game.stageWidth/2+this.pauseButtonSpacing,this.soundOffButton.position.y=1.8*this.pauseVerticalSpacing,this.addUIButton(this.homeButton,!0,!0),this.addUIButton(this.helpButton,!0,!0),this.addUIButton(this.largePlayButton,!0,!0),this.largePlayButton.position.y=this.pauseVerticalSpacing+220,this.addSoundButtons(!0);break;case"gameplay":this.addUIButton(this.pauseButton,!0,!0),this.addUIHudElement(),this.addPowerUpButton();break;case"gameplay-river-rangers":this.addUIButton(this.pauseButton,!0,!0),this.addUIButton(this.riverFireButton,!0,!1),this.addUIHudElement(),this.UIhud.container.position.y=180,this.addPowerUpButton();break;case"gameplay-beach-buggy":this.addUIButton(this.pauseButton,!1,!1),this.addUIHudElement(),this.UIhud.container.position.y=240,this.addPowerUpButton();break;case"gameplay-beach-buggy-flip":this.addUIButton(this.pauseButton,!1,!0),this.addUIButton(this.flipButton1,!0,!1),this.addUIHudElement(),this.UIhud.container.position.y=240,this.addPowerUpButton();break;case"gameplay-jetski":this.addUIButton(this.pauseButton,!1,!1),this.addUIHudElement(),this.UIhud.container.position.y=180,this.addPowerUpButton();break;case"gameplay-jetski-flip":this.addUIButton(this.pauseButton,!1,!0),this.addUIButton(this.flipButton2,!0,!1),this.addUIHudElement(),this.UIhud.container.position.y=180,this.addPowerUpButton();break;case"gameplay-pinball":this.addUIButton(this.pauseButton,!1,!1),this.addUIHudElement(),this.UIhud.container.position.y=180,this.addPowerUpButton();break;case"gameplay-mayan":this.addUIButton(this.pauseButton,!1,!1),this.addUIHudElement(),this.UIhud.container.position.y=100,this.addPowerUpButton();break;case"gameplay-claw":this.addSoundButtons(!0),this.addUIButton(this.backButton,!0,!0),this.addUIHudElement(),this.UIhud.container.position.y=150;break;case"gameplay-dodgems":this.addUIButton(this.pauseButton,!0,!0),this.addUIHudElement(),this.UIhud.container.position.y=240,this.addPowerUpButton();break;case"gameplay-laser-cave":this.addUIButton(this.pauseButton,!0,!0),this.addUIButton(this.riverFireButton,!0,!1),this.addUIHudElement(),this.UIhud.container.position.y=180;break;case"gameplay-dodgems-touch":this.addUIButton(this.pauseButton,!0,!0),this.addUIHudElement(),this.addUIButton(this.forwardsButton,!0,!0),this.addUIButton(this.backwardsButton,!0,!0),this.UIhud.container.position.y=240,this.addPowerUpButton();break;case"gameplay-doom":case"gameplay-ice":this.addUIButton(this.pauseButton,!0,!0),this.UIhud.container.position.y=95,this.addUIHudElement(),this.addPowerUpButton();break;case"gameplay-coconutty":this.addUIButton(this.pauseButton,!1,!0),this.addUIButton(this.riverFireButton,!0,!1),this.UIhud.container.position.y=95,this.addUIHudElement(),this.addPowerUpButton();break;case"gameplay-coconutty-level-preview":this.addUIButton(this.pauseButton,!1,!0),this.UIhud.container.position.y=95,this.addUIHudElement();break;case"gameplay-gladiators":this.addUIButton(this.pauseButton,!1,!0),this.addUIButton(this.riverFireButton,!0,!1),this.UIhud.container.position.y=95,this.addUIHudElement(),this.addPowerUpButton();break;case"gameplay-aqua-jetpack":this.addUIButton(this.pauseButton,!0,!0),this.UIhud.container.position.y=95,this.addUIHudElement(),this.addPowerUpButton();break;case"gameplay-waterfall-wipeout":this.addUIButton(this.pauseButton,!0,!0),this.UIhud.container.position.y=20,this.addUIHudElement(),this.addPowerUpButton(),this.powerupButton.position.y=500;break;case"gameplay-snowball-wars":this.addUIButton(this.pauseButton,!0,!0),this.UIhud.container.position.y=100,this.addUIHudElement(),this.addPowerUpButton(),this.powerupButton.position.y=510,this.powerupButton.position.x=Game.stageWidth-this.powerupButton.width/2-20;break;case"gameplay-volcano-skydive":this.addUIButton(this.pauseButton,!0,!0),this.addUIHudElement(),this.UIhud.container.position.y=20,this.addPowerUpButton();break;case"gameplay-hoverdrift":this.addUIButton(this.pauseButton,!0,!0),this.addUIHudElement(),this.UIhud.container.position.y=240,this.addPowerUpButton();break;case"gameplay-hoverdrift-touch":this.addUIButton(this.pauseButton,!0,!0),this.addUIHudElement(),this.addUIButton(this.forwardsButton,!0,!1),this.addUIButton(this.backwardsButton,!0,!1),this.addUIButton(this.moveLeftButton,!0,!1),this.addUIButton(this.moveRightButton,!0,!1),this.UIhud.container.position.y=240,this.addPowerUpButton();break;case"gameplay-eggscape":this.addUIButton(this.pauseButton,!0,!0),this.addUIHudElement(),this.UIhud.container.position.y=90,this.addPowerUpButton(),this.powerupButton.position.x=60,this.powerupButton.position.y=510;break;case"gameplay-eggscape-touch":this.addUIButton(this.pauseButton,!0,!0),this.addUIHudElement(),this.UIhud.container.position.y=90,this.addUIButton(this.forwardsButton,!0,!1),this.addUIButton(this.backwardsButton,!0,!1),this.forwardsButton.position.x=60,this.backwardsButton.position.x=60,this.addPowerUpButton(),this.powerupButton.position.x=200,this.powerupButton.position.y=510;break;case"gameplay-striker":this.addUIButton(this.pauseButton,!0,!0),this.addUIHudElement(),this.UIhud.container.position.y=90,this.addPowerUpButton(),this.powerupButton.position.x=70,this.powerupButton.position.y=510;break;case"gameplay-striker-touch":this.addUIButton(this.pauseButton,!0,!0),this.addUIHudElement(),this.UIhud.container.position.y=90,this.addUIButton(this.forwardsButton,!0,!1),this.addUIButton(this.backwardsButton,!0,!1),this.addUIButton(this.moveLeftButton,!0,!1),this.addUIButton(this.moveRightButton,!0,!1),this.addUIButton(this.riverFireButton,!0,!1),this.forwardsButton.position.x=90,this.backwardsButton.position.x=90,this.forwardsButton.position.y=392,this.backwardsButton.position.y=520,this.moveLeftButton.position.x=800,this.moveRightButton.position.x=930,this.moveLeftButton.position.y=510,this.moveRightButton.position.y=510,this.riverFireButton.position.x=200,this.riverFireButton.position.y=450,this.addPowerUpButton(),this.powerupButton.position.x=80,this.powerupButton.position.y=270;break;case"gameplay-crazy-golf":this.addUIButton(this.pauseButton,!0,!0),this.addUIHudElement(),this.UIhud.container.position.y=90,this.addPowerUpButton(),this.powerupButton.position.x=145,this.powerupButton.position.y=503;break;case"gameplay-crazy-golf-touch":this.addUIButton(this.pauseButton,!0,!0),this.addUIHudElement(),this.UIhud.container.position.y=90,this.addPowerUpButton(),this.powerupButton.position.x=645,this.powerupButton.position.y=503;break;case"none":break;case"skip":this.addUIButton(this.skipButton,!0,!0);break;case"tutorial-overlay":this.closeButton.position.x=868,this.closeButton.position.y=110,this.addUIButton(this.tutorialLeftButton,!0,!0),this.addUIButton(this.tutorialRightButton,!0,!0),this.addUIButton(this.closeButton,!0,!0);break;case"help":this.closeButton.position.x=868,this.closeButton.position.y=110,this.addUIButton(this.tutorialLeftButton,!0,!0),this.addUIButton(this.tutorialRightButton,!0,!0),this.addUIButton(this.backButton,!0,!0);break;case"gameplay-abducktion-touch":this.addUIButton(this.pauseButton,!0,!0),this.addUIHudElement(),this.addUIButton(this.forwardsButton,!0,!1),this.addUIButton(this.backwardsButton,!0,!1),this.addUIButton(this.moveLeftButton,!0,!1),this.addUIButton(this.moveRightButton,!0,!1),this.UIhud.container.position.y=90,this.addPowerUpButton();break;case"gameplay-abducktion":this.addUIButton(this.pauseButton,!0,!0),this.addUIHudElement(),this.UIhud.container.position.y=90,this.addPowerUpButton()}},e.prototype.addSoundButtons=function(e){1==Game.soundOn?this.addUIButton(this.soundOffButton,e,!0):0==Game.soundOn&&this.addUIButton(this.soundOnButton,e,!0)},e.prototype.addPowerUpButton=function(){3!=this.game.gameLaunchMode&&(this.addUIButton(this.powerupButton,!1,!1),this.powerupButton.position.x=62,this.powerupButton.position.y=385)},e.prototype.addUIHudElement=function(){3!=this.game.gameLaunchMode&&this.uiContainer.addChild(this.UIhud.container)},e.prototype.removeUIHudElement=function(){3!=this.game.gameLaunchMode&&this.UIhud.container.parent==this.uiContainer&&this.uiContainer.removeChild(this.UIhud.container)},e.prototype.disableButton=function(e){for(var t=0;t<this.buttons.length;t++)this.buttons[t].id==e&&this.buttons[t].disableButton()},e.prototype.enableButton=function(e){for(var t=0;t<this.buttons.length;t++)this.buttons[t].id==e&&this.buttons[t].enableButton()},e.prototype.enablePowerupButton=function(e,t){1==e?(this.powerupButton.enableButton(),this.powerupButton.animatePowerUpActive(t)):(this.powerupButton.show(),this.powerupButton.disableButton()),this.addUIButton(this.powerupButton,!0,!1)},e.prototype.disablePowerUpButton=function(){this.powerupButton.disableButton(),this.clearButton(this.powerupButton)},e.prototype.hidePowerUpButton=function(){3!=this.game.gameLaunchMode&&(this.powerupButton.disableButton(),this.powerupButton.hide())},e.prototype.showActivatePowerup=function(){if(3!=this.game.gameLaunchMode){this.uiMessageContainer.addChild(this.powerupActiveIcon);var e=this.powerupActiveIcon.getSprite("ui/ui-button-glow-powerup");e.blendMode=PIXI.BLEND_MODES.ADD;var t=this.powerupActiveIcon.getSprite("ui/power-up-text-back.png");t.blendMode=PIXI.BLEND_MODES.ADD;var i=this.powerupActiveIcon.getSprite("ui/power-up-text-front.png"),s=this.powerupActiveIcon.getSprite("ui/power-up-bolt.png");this.powerupActiveIcon.position.x=Game.stageWidth/2,this.powerupActiveIcon.position.y=Game.stageHeight/2,s.scale.x=3,s.scale.y=3,e.scale.x=2,e.scale.y=2,e.alpha=.6,i.scale.x=0,i.scale.y=0,t.scale.x=0,t.scale.y=0,this.powerupActiveIcon.alpha=0,this.powerupActiveIcon.scale.x=this.powerupActiveIcon.scale.y=1,this.powerupActiveIcon.visible=!0;new RoughEase({template:Power3.easeOut,strength:10,points:40,randomize:!0,clamp:!0});if(this.powerUpIntroOn=!0,this.activatePowerupTimeline=this.killTween(this.activatePowerupTimeline),this.activatePowerupTimeline=new TimelineMax({onComplete:this.endPowerupTimeline,onCompleteParams:[this]}),this.activatePowerupTimeline.add([TweenMax.to(s.scale,1,{x:1,y:1,ease:Elastic.easeOut}),TweenMax.to(e.scale,1.1,{x:2,y:2,ease:Elastic.easeOut})],0),this.activatePowerupTimeline.add([TweenMax.to(i.scale,1,{x:1,y:1,ease:Elastic.easeOut}),TweenMax.to(t.scale,1,{x:1,y:1,ease:Elastic.easeOut}),TweenMax.to(this.powerupActiveIcon,.01,{alpha:1,ease:Expo.easeIn})],0),this.activatePowerupTimeline.add([TweenMax.to(i.scale,.5,{x:4,y:4,ease:Back.easeIn}),TweenMax.to(t.scale,.5,{x:4,y:4,ease:Back.easeIn}),TweenMax.to(s.scale,.5,{x:0,y:0,ease:Back.easeIn,delay:.2}),TweenMax.to(e.scale,.5,{x:0,y:0,ease:Back.easeIn,delay:.1}),TweenMax.to(this.powerupActiveIcon,.6,{alpha:0,ease:Expo.easeInOut})],1),0==Game.isLowEndIPad){var o={lowerAngle:0,upperAngle:360,lowerVelocity:300,upperVelocity:1500,endScale:0,lowerStartScale:2,upperStartScale:4,friction:.1,XstartRange:20,YstartRange:20,time:1,stagger:300,gravity:1300,cap:50,endAlpha:0,rotationPower:0,blendMode:PIXI.BLEND_MODES.ADD},a=Game.displayStore.getContainer("ui/powerup-particles-container");this.uiContainer.addChild(a),this.particles=new ParticleBurst(["ui/powerup-particle.png"],a,this.game.currentScene,o),this.particles.fire()}}},e.prototype.endPowerupTimeline=function(e){3!=e.game.gameLaunchMode&&(e.activatePowerupTimeline=e.killTween(e.activatePowerupTimeline),e.uiMessageContainer.removeChild(e.powerupActiveIcon),e.powerUpIntroOn=!1)},e.prototype.resize=function(e){0!=this.uiInitialised&&(this.uiContainer.scale.x=e,this.uiContainer.scale.y=e,this.uiMessageContainer.scale.x=e,this.uiMessageContainer.scale.y=e)},e.prototype.removeAllButtons=function(){if(this.buttons.length>0)for(var e=this.buttons.length-1;e>=0;e--)this.buttons[e]instanceof UIButton&&this.removeButton(this.buttons[e]);this.buttons=[],this.game.powerUpManager.killPowerUpUI()},e.prototype.removeButton=function(e){this.clearButton(e),e.parent==this.uiContainer&&this.uiContainer.removeChild(e),"powerup-button"==e.id&&this.powerupButton.killParticles(),this.buttons.splice(this.getButtonIndex(e),1)},e.prototype.getButtonIndex=function(e){for(var t=0;t<this.buttons.length;t++)if(this.buttons[t]==e)return t},e.prototype.triggerEnjoyTheRide=function(){this.enjoyIntroOn=!0,this.enjoyTheRide.position.x=Game.stageWidth/2,this.enjoyTheRide.position.y=Game.stageHeight/2,this.enjoyTheRide.scale.x=2,this.enjoyTheRide.scale.y=2,this.enjoyTheRide.alpha=0,this.enjoyTheRide.visible=!0,this.enjoyTheRide.interactive=!1,this.uiMessageContainer.addChild(this.enjoyTheRide),this.enjoyTheRideTimeline=this.killTween(this.enjoyTheRideTimeline),this.enjoyTheRideTimeline=new TimelineMax({onComplete:this.endEnjoyTimeline,onCompleteParams:[this]}),this.enjoyTheRideTimeline.add([TweenMax.to(this.enjoyTheRide.scale,.5,{x:1,y:1,ease:Bounce.easeOut})],0),this.enjoyTheRideTimeline.add([TweenMax.to(this.enjoyTheRide,.2,{alpha:1,ease:Expo.easeOut})],0),this.enjoyTheRideTimeline.add([TweenMax.to(this.enjoyTheRide.scale,.5,{x:3,y:3,ease:Expo.easeIn})],1),this.enjoyTheRideTimeline.add([TweenMax.to(this.enjoyTheRide,.5,{alpha:0,ease:Expo.easeIn})],1),this.enjoyTheRideTimeline.call(Game.playSound,["enjoy-the-ride-thud.mp3"],this,.22),this.enjoyTheRideTimeline.call(Game.playSound,["enjoy-the-ride-swoosh.mp3"],this,1.45)},e.prototype.pause=function(){1==this.enjoyIntroOn&&(this.enjoyTheRide.visible=!1,this.game.currentScene.pauseResumeTween(this.enjoyTheRideTimeline,"pause")),1==this.powerUpIntroOn&&(this.powerupActiveIcon.visible=!1,this.game.currentScene.pauseResumeTween(this.activatePowerupTimeline,"pause"))},e.prototype.resume=function(){1==this.enjoyIntroOn&&(this.enjoyTheRide.visible=!0,this.game.currentScene.pauseResumeTween(this.enjoyTheRideTimeline,"resume")),1==this.powerUpIntroOn&&(this.powerupActiveIcon.visible=!0,this.game.currentScene.pauseResumeTween(this.activatePowerupTimeline,"resume"))},e.prototype.endEnjoyTimeline=function(e){e.enjoyIntroOn=!1,e.uiMessageContainer.removeChild(e.enjoyTheRide),e.enjoyTheRideTimeline=e.killTween(e.enjoyTheRideTimeline)},e.prototype.addCustomUIButton=function(e,t,i){e.setAsUIButton(),this.addUIButton(e,t,i)},e.prototype.addUIButton=function(e,t,i){this.uiContainer.addChild(e),this.buttons.push(e),e.buttonInit(t,i),this.registerButton(e)},e.prototype.addNonUIButton=function(e){this.buttons.push(e)},e.prototype.setButtonIndex=function(e){this.currentKeyCycledButton=e,this.keyboardUIFocus=!0},e.prototype.registerButton=function(e){var t=this;if(1==window.forceMobile)return e.on("mouseover",function(e){t.rolloverButton(t,this)}),e.on("mouseout",function(e){t.rolloutButton(t,this)}),e.on("mousedown",function(e){t.downonButton(t,this)}),void e.on("mouseup",function(e){t.uponButton(t,this)});Game.onDesktop?(e.on("mouseover",function(e){t.rolloverButton(t,this)}),e.on("mouseout",function(e){t.rolloutButton(t,this)}),e.on("mousedown",function(e){t.downonButton(t,this)}),e.on("mouseup",function(e){1!=this.disabled&&(Game.playSound("button-click-ui.mp3"),t.uponButton(t,this))})):(e.on("touchstart",function(e){t.downonButton(t,this)}),e.on("touchend",function(e){1!=this.disabled&&(Game.playSound("button-click-ui.mp3"),t.uponButton(t,this))}),e.on("touchendoutside",function(e){t.rolloutButton(t,this)}))},e.prototype.clearButton=function(e){e.clearInteractions()},e.prototype.onKeyUp=function(e){if(1!=this.game.currentScene.interactionLocked&&1!=this.game.currentScene.transitioning){var t=this.getKey(e.keyCode,e);this.game.currentScene.keyUp(t)}},e.prototype.onKeyDown=function(e){if(1!=this.game.currentScene.interactionLocked&&1!=this.game.currentScene.transitioning){var t=this.getKey(e.keyCode,e);this.game.currentScene.keyDown(t)}},e.prototype.getKey=function(e,t){var i="none";return 37==e?(t.preventDefault?t.preventDefault():t.returnValue=!1,i="left"):39==e?(t.preventDefault?t.preventDefault():t.returnValue=!1,i="right"):38==e?(t.preventDefault?t.preventDefault():t.returnValue=!1,i="up"):40==e?(t.preventDefault?t.preventDefault():t.returnValue=!1,i="down"):32==e?i="spacebar":27==e?i="esc":13==e?i="enter":9==e?i="tab":88==e?i="x":49==e?i="1":50==e?i="2":51==e?i="3":52==e?i="4":53==e&&(i="5"),i},e.prototype.cycleUIButton=function(e){var t=this.buttons[this.currentKeyCycledButton];t instanceof UIButton?this.rolloutButton(this,t):this.game.currentScene.rolloutCustomButtonKeyboard(t),this.keyboardUIFocus=!0,this.deselectDelay&&this.deselectDelay.kill();var i;"left"==e?i=-1:"right"==e&&(i=1),this.currentKeyCycledButton+=i,this.currentKeyCycledButton<0&&(this.currentKeyCycledButton=this.buttons.length-1),this.currentKeyCycledButton>=this.buttons.length&&(this.currentKeyCycledButton=0);var s=this;(t=this.buttons[this.currentKeyCycledButton])instanceof UIButton?(this.rolloverButton(this,t),this.deselectDelay=TweenMax.delayedCall(2,function(){s.keyboardUIFocus=!1,s.rolloutButton(s,t)})):(this.game.currentScene.rolloverCustomButtonKeyboard(t),this.deselectDelay=TweenMax.delayedCall(2,function(){s.keyboardUIFocus=!1,s.game.currentScene.rolloutCustomButtonKeyboard(t)}))},e.prototype.activateCycledUIButton=function(){if(0!=this.keyboardUIFocus){var e=this.buttons[this.currentKeyCycledButton];e instanceof UIButton?this.game.currentScene.uiClicked(e):this.game.currentScene.selectCustomButtonKeyboard(e)}},e.prototype.tick=function(){this.UIhud&&this.UIhud.tick()},e.prototype.killPowerUpButton=function(){this.removeButton(this.powerupButton)},e.prototype.rolloverButton=function(e,t){1!=t.disabled&&1!=e.game.currentScene.interactionLocked&&(e.game.currentScene.uiRolledOver(t),t.id,e.pulseTween&&e.pulseTween.kill(),e.overTimeline&&e.overTimeline.kill(),e.overTimeline=new TimelineMax,e.overTimeline.add(TweenMax.to(t.buttonContainer.scale,.2,{x:1.2,y:1.2,ease:Expo.easeOut}),0),e.overTimeline.add(TweenMax.to(t.shadow.scale,.2,{x:1.1,y:1.1,ease:Expo.easeOut}),0),e.overTimeline.add(TweenMax.to(t.shadow,.2,{alpha:1,ease:Expo.easeOut}),0))},e.prototype.rolloutButton=function(e,t){1!=t.disabled&&1!=e.game.currentScene.interactionLocked&&(e.game.currentScene.uiRolledOut(t),e.outTimeline&&e.outTimeline.kill(),e.outTimeline=new TimelineMax,e.outTimeline.add(TweenMax.to(t.buttonContainer.scale,.2,{x:1,y:1,ease:Expo.easeOut}),0),e.outTimeline.add(TweenMax.to(t.shadow.position,.2,{x:t.shadowOrigX,y:t.shadowOrigY,ease:Expo.easeOut}),0),e.outTimeline.add(TweenMax.to(t.shadow.scale,.2,{x:1,y:1,ease:Expo.easeOut}),0),e.outTimeline.add(TweenMax.to(t.shadow,.2,{alpha:.8,ease:Expo.easeOut}),0))},e.prototype.downonButton=function(e,t){1!=t.disabled&&1!=e.game.currentScene.interactionLocked&&(e.game.currentScene.downOnUI(t),e.pulseTween&&e.pulseTween.kill(),e.downTimeline&&e.downTimeline.kill(),e.downTimeline=new TimelineMax,e.downTimeline.add(TweenMax.to(t.buttonContainer.scale,.2,{x:1.3,y:1.3,ease:Expo.easeOut}),0),e.downTimeline.add(TweenMax.to(t.shadow.scale,.2,{x:1.15,y:1.15,ease:Expo.easeOut}),0),e.downTimeline.add(TweenMax.to(t.shadow,.2,{alpha:1,ease:Expo.easeOut}),0))},e.prototype.uponButton=function(e,t){1!=t.disabled&&(e.game.currentScene.upOnUI(t),1==t.animateEffect&&e.playClickEffect(e,t),1!=e.game.currentScene.interactionLocked&&(e.upTimeline&&(e.upTimeline.kill(),e.delayedClick.kill()),e.upTimeline=new TimelineMax,e.upTimeline.add(TweenMax.to(t.buttonContainer.scale,.2,{x:1,y:1,ease:Expo.easeOut}),0),e.upTimeline.add(TweenMax.to(t.shadow.scale,.2,{x:1,y:1,ease:Expo.easeOut}),0),e.upTimeline.add(TweenMax.to(t.shadow.position,.2,{x:t.shadowOrigX,y:t.shadowOrigY,ease:Expo.easeOut}),0),e.upTimeline.add(TweenMax.to(t.shadow,.2,{alpha:1,ease:Expo.easeOut}),0),e.delayedClick=TweenMax.delayedCall(.15,function(){e.game.currentScene.uiClicked(t)})))},e.prototype.pulseButton=function(e){this.pulseTween&&this.pulseTween.kill(),this.pulseTween=new TimelineMax({repeat:-1}),this.pulseTween.add(TweenMax.to(e.buttonContainer.scale,.8,{x:1.2,y:1.2,ease:Quad.easeInOut}),0),this.pulseTween.add(TweenMax.to(e.shadow.scale,.8,{x:1.2,y:1.2,ease:Quad.easeInOut}),0),this.pulseTween.add(TweenMax.to(e.buttonContainer.scale,.8,{x:1,y:1,ease:Quad.easeInOut}),.8),this.pulseTween.add(TweenMax.to(e.shadow.scale,.8,{x:1,y:1,ease:Quad.easeInOut}),.8),this.pulseTween.add(TweenMax.to(e.shadow.position,.8,{x:e.shadowOrigX+5,y:e.shadowOrigY+5,ease:Quad.easeInOut}),0),this.pulseTween.add(TweenMax.to(e.shadow,.8,{alpha:.7,ease:Quad.easeInOut}),0),this.pulseTween.add(TweenMax.to(e.shadow.position,.8,{x:e.shadowOrigX,y:e.shadowOrigY,ease:Quad.easeInOut}),.8),this.pulseTween.add(TweenMax.to(e.shadow,.8,{alpha:1,ease:Quad.easeInOut}),.8)},e.prototype.playClickEffect=function(e,t){e.clickEffect.position.x=t.position.x,e.clickEffect.position.y=t.position.y,e.clickEffect.gotoAndStop(0),e.clickEffect.play()},e.prototype.playUISound=function(e){Game.stopCurrentInterruptableSound(),TweenMax.delayedCall(.2,Game.playSound,[e,!0])},e.prototype.sceneDestroy=function(){1==this.enjoyIntroOn&&(this.enjoyTheRide.visible=!1,this.game.currentScene.killTween(this.enjoyTheRideTimeline)),1==this.powerUpIntroOn&&(this.powerupActiveIcon.visible=!1,this.game.currentScene.killTween(this.activatePowerupTimeline))},e.prototype.showSpinner=function(){this.uiInitialised},e.prototype.hideSpinner=function(){this.uiInitialised},e.prototype.soundToggled=function(){1==Game.soundOn?(Game.soundOn=!1,Game.audioManager.soundOff(),this.removeButton(this.soundOffButton),this.addUIButton(this.soundOnButton,!0,!0)):0==Game.soundOn&&(Game.soundOn=!0,Game.audioManager.soundOn(),this.removeButton(this.soundOnButton),this.addUIButton(this.soundOffButton,!0,!0)),this.uiContainer.addChild(this.clickEffect)},e.prototype.killTween=function(e){return e&&(e.kill(),e=null),e},e.prototype.exitGame=function(){Game.trace("exit url is..",window.og),window.og&&window.og.exitGameUrl&&window.open(window.og.exitGameUrl,"_self")},e}(),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),UIButton=function(e){function t(){var t=e.call(this)||this;return t.disabled=!1,t.animateEffect=!0,t}return __extends(t,e),t.prototype.visuallyPrepareButton=function(e){this.buttonContainer=this.getContainer("button-container"),this.buttonContainer.getSprite("icon")&&(this.icon=this.buttonContainer.getSprite("icon"),this.icon.setRegPoint(.5,.5)),this.bg=this.buttonContainer.getSprite("bg"),this.bg.setRegPoint(.5,.5),this.shadow=this.getSprite("shadow"),this.glow=this.buttonContainer.getSprite("glow"),this.glow&&(this.glow.blendMode=PIXI.BLEND_MODES.ADD,this.glow.interactive=!1),this.shadow.alpha=.8,this.shadow.setRegPoint(.5,.5),this.shadow.position.x=4,this.shadow.position.y=4},t.prototype.setAsUIButton=function(e){this.buttonContainer=this.getContainer("button-container"),this.ui=e,this.buttonContainer.getSprite("icon")&&(this.icon=this.buttonContainer.getSprite("icon"),this.icon.setRegPoint(.5,.5),this.icon.interactive=!0),this.bg=this.buttonContainer.getSprite("bg"),this.bg.setRegPoint(.5,.5),this.shadow=this.getSprite("shadow"),this.shadow.alpha=.8,this.shadow.setRegPoint(.5,.5),this.shadow.position.x=4,this.shadow.position.y=4,this.shadowOrigX=this.shadow.position.x,this.shadowOrigY=this.shadow.position.y,this.shadow.interactive=!1,this.interactive=!0,this.buttonMode=!0},t.prototype.destroy=function(){this.removeAllListeners(),this.buttonContainer=null,this.icon=null,this.shadow=null,this.particles&&this.particles.destroy()},t.prototype.clearInteractions=function(){this.removeAllListeners(),this.buttonMode=!1,this.disabled=!1,this.particles&&this.particles.destroy()},t.prototype.disableButton=function(){this.buttonContainer.alpha=.4,this.shadow.alpha=.4,this.disabled=!0,this.particles&&this.particles.destroy(),this.buttonMode=!1},t.prototype.enableButton=function(){this.buttonContainer.alpha=1,"powerup-button"!=this.id&&(this.shadow.alpha=.6),this.disabled=!1,this.alpha=1,this.buttonMode=!0},t.prototype.hide=function(){this.alpha=0,this.particles&&this.particles.destroy(),this.clearInteractions()},t.prototype.show=function(){this.alpha=1},t.prototype.buttonInit=function(e,t){if(0==t&&(this.animateEffect=!1),1==e){this.icon&&(this.icon.scale.x=this.icon.scale.y=1),this.shadow.position.x=0,this.shadow.position.y=0,this.shadow.scale.x=this.shadow.scale.y=1,this.shadow.alpha=0,this.buttonContainer.scale.x=0,this.buttonContainer.scale.y=0,this.initialOnAnimation=this.killTween(this.initialOnAnimation),this.initialOnAnimation=new TimelineMax;var i=Game.getRandom(0,.2);this.initialOnAnimation.add(TweenMax.to(this.buttonContainer.scale,.3,{x:1,y:1,ease:Back.easeOut}),i),0==this.disabled?this.initialOnAnimation.add([TweenMax.to(this.shadow.position,.3,{x:this.shadowOrigX,y:this.shadowOrigY,ease:Expo.easeInOut}),TweenMax.to(this.shadow,.3,{alpha:.8,ease:Expo.easeInOut})],i+.01):this.initialOnAnimation.add([TweenMax.to(this.shadow.position,.3,{x:this.shadowOrigX,y:this.shadowOrigY,ease:Expo.easeInOut}),TweenMax.to(this.shadow,.3,{alpha:.4,ease:Expo.easeInOut})],i+.01)}else 0==e&&(this.icon&&(this.icon.scale.x=this.icon.scale.y=1),this.shadow.position.x=this.shadowOrigX,this.shadow.position.y=this.shadowOrigY,this.shadow.scale.x=this.shadow.scale.y=1,0==this.disabled?this.shadow.alpha=1:this.shadow.alpha=.4,this.buttonContainer.scale.x=1,this.buttonContainer.scale.y=1)},t.prototype.animatePowerUpActive=function(e){this.icon&&(this.icon.scale.x=this.icon.scale.y=1),this.shadow.position.x=0,this.shadow.position.y=0,this.shadow.scale.x=this.shadow.scale.y=1,this.shadow.alpha=0,this.buttonContainer.scale.x=0,this.buttonContainer.scale.y=0,this.powerUpPopAnimation=this.killTween(this.powerUpPopAnimation),this.powerUpPopAnimation=new TimelineMax,0==Game.isLowEndIPad&&0==e&&this.powerUpPopAnimation.call(function(){this.popParticles()},null,this,.1),this.glow.scale.x=this.glow.scale.y=3,this.icon.scale.x=2,this.icon.scale.y=2.5,this.powerUpPopAnimation.add(TweenMax.to(this.buttonContainer.scale,1,{x:1,y:1,ease:Elastic.easeOut}),0),this.powerUpPopAnimation.add(TweenMax.to(this.glow.scale,1.2,{x:1,y:1,ease:Expo.easeOut}),.05),this.powerUpPopAnimation.add(TweenMax.to(this.icon.scale,1,{x:1,y:1,ease:Elastic.easeOut}),.1)},t.prototype.popParticles=function(){this.particles&&this.particles.destroy();var e={lowerAngle:0,upperAngle:360,lowerVelocity:300,upperVelocity:1e3,endScale:0,lowerStartScale:1,upperStartScale:4,friction:.1,XstartRange:20,YstartRange:20,time:1,stagger:300,gravity:1300,cap:50,endAlpha:0,rotationPower:0,blendMode:PIXI.BLEND_MODES.ADD};this.particles=new ParticleBurst(["ui/powerup-particle.png"],this,this.ui.game.currentScene,e),this.particles.fire()},t.prototype.killParticles=function(){this.particles&&this.particles.destroy()},t.prototype.killTween=function(e){return e&&(e.kill(),e=null),e},t}(DisplayObjectContainer),UIhud=function(){function e(){this.addingTickets=!1,this.byAmount=0,this.ticketsStaggerTime=10,Game.restoreProgress(),this.container=Game.displayStore.getContainer("ui/hud"),this.ticketsText=Game.displayStore.getBitmapText("tickets-font"),this.ticketsText.position.y=-23,this.ticketsText.scale.x=.9,this.ticketsText.scale.y=.9,this.currentTickets=Game.coreData.getCurrentTickets(),this.ticketsText.text=this.currentTickets.toString(),this.ticketsText.position.x=67-this.ticketsText.width/2,this.ticketsText.position.y=-3,this.ticketIcon=this.container.getSprite("ui/hud/tickets-icon"),this.container.addChild(this.ticketsText),this.wristbandsText=Game.displayStore.getBitmapText("wristbands-font"),this.wristbandsText.position.y=-23,this.wristbandsText.scale.x=.6,this.wristbandsText.scale.y=.6,this.currentWristbandUses=0,this.wristbandsText.position.y=32,this.wristbandsText.text="3",this.wristbandsText.alpha=0,this.wristbandsText.position.x=165-this.wristbandsText.width/2,this.container.addChild(this.wristbandsText),this.wristbandContainer=this.container.getContainer("ui/hud/wristbands");for(var e=0;e<this.wristbandContainer.children.length;e++)this.wristbandContainer.children[e].alpha=0;"none"!=Game.coreData.getCurrentWristband().id&&this.equipWristband()}return e.prototype.equipWristband=function(){Game.saveProgress(),this.currentWristbandType=Game.coreData.getCurrentWristband().id,this.currentWristbandUses=Game.coreData.getCurrentWristband().uses,this.wristbandsText.text="x"+this.currentWristbandUses,this.wristbandsText.alpha=0,this.wristbandsText.position.x=165-this.wristbandsText.width/2,this.wristbandAnimation&&this.wristbandAnimation.kill(),this.wristbandAnimation=new TimelineMax;for(var e=0;e<this.wristbandContainer.children.length;e++)"ui/hud/"+Game.coreData.getCurrentWristband().id==this.wristbandContainer.getSpriteAt(e).id&&(this.currentWristbandSprite=this.wristbandContainer.getSpriteAt(e),this.currentWristbandSprite.alpha=0,this.currentWristbandSprite.scale.x=this.currentWristbandSprite.scale.y=3,this.wristbandAnimation.add(TweenMax.to(this.currentWristbandSprite.scale,.4,{x:1,y:1,ease:Back.easeOut}),.2),this.wristbandAnimation.add(TweenMax.to(this.currentWristbandSprite,.4,{alpha:1,ease:Power1.easeOut}),.2),this.wristbandAnimation.add(TweenMax.to(this.wristbandsText,.4,{alpha:1,ease:Power1.easeOut}),.2))},e.prototype.useWristband=function(){Game.coreData.getCurrentWristband().uses>0&&(Game.coreData.useWristband(Game.coreData.getCurrentWristband().id),this.currentWristbandUses=Game.coreData.getCurrentWristband().uses),this.wristbandAnimation&&this.wristbandAnimation.kill(),this.wristbandAnimation=new TimelineMax,this.currentWristbandUses>0?(this.wristbandAnimation.add(TweenMax.to(this.currentWristbandSprite.scale,.05,{x:2.5,y:2.5,ease:Sine.easeIn}),.2),this.wristbandAnimation.add(TweenMax.to(this.currentWristbandSprite.scale,.4,{x:1,y:1,ease:Back.easeOut}))):(this.wristbandAnimation.add(TweenMax.to(this.currentWristbandSprite.scale,.05,{x:2.5,y:2.5,ease:Sine.easeIn}),.2),this.wristbandAnimation.add([TweenMax.to(this.currentWristbandSprite.scale,.4,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.currentWristbandSprite,.4,{alpha:0,ease:Power2.easeOut}),TweenMax.to(this.wristbandsText,.4,{alpha:0,ease:Power2.easeOut})])),this.wristbandAnimation.call(function(){this.wristbandsText.text="x"+this.currentWristbandUses.toString(),this.wristbandsText.position.x=165-this.wristbandsText.width/2},null,this,.3),Game.saveProgress()},e.prototype.addTickets=function(){this.addingTickets=!0,this.targetTickets=Game.coreData.getCurrentTickets(),this.targetTickets>this.currentTickets&&this.incrementTickets(1)},e.prototype.addTicketsLoop=function(){this.addingTickets=!0,this.targetTickets>this.currentTickets?this.incrementTickets(1):this.addingTickets=!1},e.prototype.removeTickets=function(){this.addingTickets=!0,this.targetTickets=Game.coreData.getCurrentTickets(),this.targetTickets<=this.currentTickets&&this.incrementTickets(-1)},e.prototype.removeTicketsLoop=function(){this.addingTickets=!0,this.targetTickets<this.currentTickets?this.incrementTickets(-1):this.addingTickets=!1},e.prototype.incrementTickets=function(e){this.byAmount=e,this.ticketIcon.scale.x=this.ticketIcon.scale.y=1.4,this.currentTickets+=e,this.ticketsText.text=this.currentTickets.toString(),this.ticketsText.position.x=67-this.ticketsText.width/2},e.prototype.tick=function(){if(this.ticketIcon.scale.x>1&&(this.ticketIcon.scale.x=this.ticketIcon.scale.y-=.07),0!=this.addingTickets){var e=this.ticketsStaggerTime/Math.abs(this.targetTickets-this.currentTickets);e>60&&(e=60),this.ticketsStaggerCounter<e?this.ticketsStaggerCounter++:(this.ticketsStaggerCounter=0,this.addingTickets=!1,this.byAmount>0?this.addTicketsLoop():this.removeTicketsLoop())}},e.prototype.destroy=function(){this.ticketsAnimation.kill(),this.ticketsAnimation=null},e}(),Game=function(){function e(t,i,s,o,a,r,n,h,l){this.lastOrientationCorrect=!1,this.initLoaded=!1,this.scenes={},this.pixiInitialalised=!1,this.paused=!1,this.initialOrientationStatTaken=!1,this.iOSScrollMode=!1,this.allowScrollOverlay=!1,this.miniGameID="none",this.getURLValue=function(e){var t=!1;return window.location.href.indexOf(e)>-1&&(t=!0),t},this.checkContainerLimit=120,this.checkContainerCounter=0,e.basePath=t,e.ieVer=a,e.coreData=new CoreData(this),e.assetChunkManager=new AssetChunkManager(this),e.stringsManager=new StringsManager(this),this.xmlManager=new XMLManager(this),this.powerUpManager=new PowerUpManager(this),e.holderDiv=document.getElementById(i),this.parentalApprovalImageSubmit=!1,0==h&&(this.gameLaunchMode=3,e.assetChunkManager.setCurrentGameLaunchMode(this.gameLaunchMode)),l&&(this.miniGameID=l),e.useFilters=!1,this.trackingEventsManager=new TrackingEventsManager(this),e.localStorageManager=new LocalStorageManager(this),this.visualAssets=s,this.audioAssets=o,this.islandsLookup=new Array,this.scenes=new Array,this.islandsLookup["beach-buggy"]="beach",this.islandsLookup["jet-ski"]="beach",this.islandsLookup["coco-nutty"]="beach",this.islandsLookup["tree-top-gladiators"]="jungle",this.islandsLookup["river-rangers"]="jungle",this.islandsLookup["mayan-madness"]="jungle",this.islandsLookup["waterfall-wipeout"]="jungle",this.islandsLookup["laser-cave"]="volcano",this.islandsLookup["roller-coaster-doom"]="volcano",this.islandsLookup["aqua-jetpack"]="volcano",this.islandsLookup["roller-coaster-ice"]="ice",this.islandsLookup["pin-ball"]="ice",this.islandsLookup.dodgems="ice",this.islandsLookup["snowball-wars"]="ice",this.initialised=!1,this.xmlFilesLoaded=0,this.xmlFilesRequiredToLoad=0,this.useRetinaAssests=r,1==this.isLowEndIPad()&&(this.useRetinaAssests=!1),this.deeplinkConfigURL=n,1==this.useRetinaAssests?(this.pixelRatio=Math.round(window.devicePixelRatio),this.pixelRatio>2&&(this.pixelRatio=2)):this.pixelRatio=1,e.assetResolutionPath="@"+String(this.pixelRatio)+"x/",window.doobStats&&this.startStats(0)}return e.prototype.initialise=function(t,i,s,o,a,r){this.setViewportTag(),this.initialAssets=a,e.assetChunkManager.storeInitialAssets(this.initialAssets),e.onDesktop=this.isDesktop(),e.isLowEndIPad=r||this.isLowEndIPad(),this.frameCounter=0,this.frameCounterLimit=1,1==e.isLowEndIPad&&(this.frameCounterLimit=2),this.mobileDetect=new MobileDetect(window.navigator.userAgent),this.fileInputDiv=document.getElementById("file-input"),0==e.onDesktop&&(this.addMobileCSS(),"iPhone"==this.mobileDetect.phone()&&"iOS"==this.mobileDetect.os()&&(e.oniPhone=!0),"AndroidOS"==this.mobileDetect.os()&&(e.onAndroid=!0)),this.webAudio=this.isWebAudio(),e.displayStore=new DisplayStore(this),e.gameWidth=t,e.gameHeight=i,e.fps=o,e.bodyElement=document.getElementsByTagName("body")[0],this.rotateOverlay=document.getElementById("rotate-overlay"),this.scrollOverlay=document.getElementById("scroll-overlay"),this.scrollOverlay.style.position="absolute",this.scrollOverlay.style.left="0px",this.nickFormDiv=document.getElementById("nick-form"),this.nickBlankFormDiv=document.getElementById("nick-form-blank"),this.parentalApprovalDiv=document.getElementById("parental-approval-page"),this.uploadFaceDiv=document.getElementById("upload-face-page"),this.gameHolderDivList=new Array,this.gameHolderDivList.push(e.holderDiv),this.gameHolderDivList.push(this.parentalApprovalDiv),this.gameHolderDivList.push(this.uploadFaceDiv),this.swapDOMElements(this.nickFormDiv,this.nickBlankFormDiv),this.targetOrientation=s,this.loadModule=new LoadModule(this),this.touchEnabled=!1,e.audioManager=new AudioManagerMk2(this,e.onDesktop,this.webAudio),this.ui=new UI(this),this.backEndAPI=new BackEndAPI(this);var n=this.mobileDetect.mobile(),h=this.mobileDetect.os();null==n&&(n="desktop"),null==h&&(h="desktop"),this.xmlFilesRequiredToLoad=2,this.loadXML(this,"config"),this.stopScrollWheelOnGame()},e.prototype.loadXML=function(e,t){var e=this,i=new PIXI.loaders.Loader;i.add("config","config.xml"),i.add("localization","localization.xml"),i.load(function(t,i){e.handleXMLLoad(t,e)})},e.prototype.handleXMLLoad=function(e,t){for(var i in e.resources)t.xmlHandler(t,e.resources[i].data,i)},e.prototype.xmlHandler=function(e,t,i){var t=t;e.xmlManager.parseXML(t,i),e.xmlFilesLoaded++,e.xmlFilesLoaded==e.xmlFilesRequiredToLoad&&e.allXMLLoaded(e)},e.prototype.allXMLLoaded=function(e){e.checkOrientation(!1,e)},e.prototype.addRenderer=function(e){0==e.pixiInitialalised&&(e.pixiInitialalised=!0,e.addPixiRenderer())},e.prototype.setLanguageCode=function(t){e.loc=t},e.prototype.getCurrentLanguageCode=function(){return e.loc},e.prototype.setAlphabet=function(t){e.alphabet=t},e.prototype.init=function(t){t.initPIXI(),t.startGameLoop(t),t.addRenderer(t),t.loadAssets(e.assetChunkManager.getLoadAssets(),!0,function(){t.ui.initUI(),t.setRotateOverlayBG(),t.setScrollMode(),e.ticketPool=new TicketPool(t),t.setScene(e.assetChunkManager.getTargetInitialScene(),!1),t.initLoaded=!0})},e.prototype.setLaunchMode=function(t){this.gameLaunchMode=t,e.assetChunkManager.setCurrentGameLaunchMode(t)},e.prototype.adjustInputCSS=function(e,t){var i=t/10,s=String(i)+"px",o=e,a=(String(o),e/10*8),r=(String(a),e/10*1),i=(String(r),t/10),s=String(i)+"px",n=t/4;String(n);if(this.fileInputDiv.style.lineHeight=s,this.fileInputDiv.style.width=String(e/4)+"px",this.fileInputDiv.style.fontSize="5vw",this.fileInputDiv.style.lineHeight="10vh",i>80)String(80),String(40);if(e<1500)String(39);if(t>e){var i=10,s=String(i)+"px";this.fileInputDiv.style.fontSize=" 2vw",this.fileInputDiv.style.lineHeight="5vh"}},e.prototype.setScrollMode=function(){if(0==e.onDesktop&&1==e.oniPhone&&1==this.allowScrollOverlay){var t=e.displayStore.getSprite("scroll-bg");this.scrollOverlay.style.backgroundImage="url('"+t.textureURL+"')",document.addEventListener("touchstart",function(e){},{passive:!1});i=this;document.addEventListener("touchmove",function(e){0==i.iOSScrollMode&&e.preventDefault&&e.preventDefault()},{passive:!1})}if(0==e.onDesktop&&0==this.allowScrollOverlay){var i=this;document.addEventListener("touchmove",function(e){e.preventDefault()},{passive:!1})}},e.prototype.swapDOMElements=function(e,t){var i=t.parentNode,s=t.nextSibling;s===e?i.insertBefore(e,t):(e.parentNode.insertBefore(t,e),s?i.insertBefore(e,s):i.appendChild(e))},e.prototype.addMobileCSS=function(){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e.basePath+"styles/mobile.css"),document.getElementsByTagName("head")[0].appendChild(t)},e.prototype.setRotateOverlayBG=function(){var t=e.displayStore.getSprite("wrong-orientation-bg");this.rotateOverlay.style.backgroundImage="url('"+t.textureURL+"')"},e.prototype.checkOrientation=function(t,i){var s=i;s.initialised=t;var o=s.detectBrowserViewport().w,a=s.detectBrowserViewport().h;if(e.onDesktop)0==s.initialised?(s.gameInit(),s.initialised=!0):s.checkResize(o,a);else{o<a?s.currentOrientation="portrait":a<o&&o>400&&(s.currentOrientation="landscape"),0==s.initialOrientationStatTaken&&(s.initialOrientationStatTaken=!0);var r;s.currentOrientation!=s.targetOrientation?r=!1:s.currentOrientation==s.targetOrientation&&(r=!0),"any"==s.targetOrientation&&(r=!0),0==s.initialised&&0==r?s.applyRotateOverlay(!0,o,a):0==s.initialised&&1==r?(s.gameInit(),s.initialised=!0):1==s.initialised&&0==r?s.orientGame(o,a):1==s.initialised&&1==r&&(s.orientGame(o,a),s.checkResize(o,a))}setTimeout(function(){s.checkOrientation(s.initialised,s)},500)},e.prototype.orientGame=function(e,t){var i=!1;this.targetOrientation!=this.currentOrientation&&"landscape"!=this.currentOrientation||(i=!0),this.lastOrientationCorrect!=i&&(this.lastOrientationCorrect=i,i?(this.applyRotateOverlay(!1,e,t),this.correctOrientation=!0):(this.applyRotateOverlay(!0,e,t),this.correctOrientation=!1))},e.prototype.applyRotateOverlay=function(t,i,s){if("any"==this.targetOrientation)return e.holderDiv.className="active","portrait"==this.currentOrientation&&this.setScrollOverlay(!1,0),void this.centerGameOnScreen();if(1==t){if(this.rotateOverlay.className="active",e.holderDiv.removeAttribute("class"),this.rotateOverlay.style.width=i+"px",this.rotateOverlay.style.height=s+"px",this.setScrollOverlay(!1,i),0==this.initialised)return}else if(0==t){if(this.rotateOverlay.removeAttribute("class"),e.holderDiv.className="active",0==this.initialised)return;this.centerGameOnScreen()}},e.prototype.setScrollOverlay=function(t,i){0==t?(this.scrollOverlay.removeAttribute("class"),this.scrollOverlay.style.height="100px",e.holderDiv.style.top="0px",e.holderDiv.className="active",this.centerGameOnScreen()):1==t&&(this.scrollOverlay.className="active",e.holderDiv.removeAttribute("class"),this.scrollOverlay.style.height="9999999999999999px",this.scrollOverlay.style.width=String(i)+"px",window.scrollTo(0,0))},e.prototype.checkResize=function(t,i){if(t!=this.lastViewportWidth||i!=this.lastViewportHeight){if(1==e.oniPhone&&"landscape"==this.currentOrientation&&1==this.allowScrollOverlay){this.iOSScrollMode=!0;for(var s=[[320,480],[320,568],[375,667],[414,736]],o=0;o<s.length;o++){var a=s[o],r=(window.screen.height==a[0]&&window.screen.width==a[1]||window.screen.width==a[0]&&(window.screen.height,a[1]),a[0]);window.innerHeight==r&&(this.iOSScrollMode=!1)}this.setScrollOverlay(this.iOSScrollMode,t)}this.centerGameOnScreen()}this.lastViewportWidth=t,this.lastViewportHeight=i},e.prototype.gameInit=function(){if(this.resizeGameDivs(e.gameWidth+"px",e.gameHeight+"px"),e.stageWidth=e.gameWidth,e.stageHeight=e.gameHeight,3==this.gameLaunchMode)return this.targetGameString=this.miniGameID,e.assetChunkManager.setCurrentGameLaunchMode(this.gameLaunchMode),e.assetChunkManager.setCurrentGameId(this.targetGameString),e.assetChunkManager.generateLoadChunkParams("hub"),void this.beginGameInit(this);var t=this,i=new PIXI.loaders.Loader;i.add(this.deeplinkConfigURL),i.once("complete",function(e){t.parseDeepLinkJSON(t,e.resources[t.deeplinkConfigURL].data.games[0])}),i.load()},e.prototype.parseDeepLinkJSON=function(t,i){for(var s in i){var o="\\b";if(o+=t.escapeRegExp(i[s]),o+="\\b",1==new RegExp(o,"i").test(window.location.href)){t.targetGameString=s;break}}var a;a=void 0==t.targetGameString?1:2,t.gameLaunchMode=a,e.assetChunkManager.setCurrentGameLaunchMode(a),e.assetChunkManager.setCurrentGameId(t.targetGameString),e.assetChunkManager.generateLoadChunkParams("hub"),t.beginGameInit(t)},e.prototype.beginGameInit=function(e){e.initAudio(e.loadModule),e.init(e),"any"==e.targetOrientation?e.applyRotateOverlay(!1,0,0):e.centerGameOnScreen()},e.prototype.getIslandID=function(e){return this.islandsLookup[e]},e.prototype.centerGameOnScreen=function(){var t=this.detectBrowserViewport().w,i=this.detectBrowserViewport().h;if(e.onDesktop,1){this.scaleStage(t,i);var s=.5*(t-this.currentStageWidth),o=.5*(i-this.currentStageHeight);this.positionGameDivs(s+"px",o+"px"),e.gameOffset=this.getGameOffset(e.holderDiv),e.onAndroid}else e.gameOffset=this.getGameOffset(e.holderDiv),this.positionGameDivs((i-e.stageHeight)/2+"px",(t-e.stageWidth)/2+"px")},e.prototype.scaleStage=function(t,i){var s=i/t,o=e.gameHeight/e.gameWidth;s<o?(e.windowScaleFactor=i/e.gameHeight,this.currentStageWidth=i/o,this.currentStageHeight=i):(e.windowScaleFactor=t/e.gameWidth,this.currentStageWidth=t,this.currentStageHeight=t*o),this.resizeGameDivs(String(this.currentStageWidth),String(this.currentStageHeight+1)),this.resizePixiCanvas(this.currentStageWidth,this.currentStageHeight),this.adjustInputCSS(this.currentStageWidth,this.currentStageHeight)},e.prototype.resizeGameDivs=function(e,t){for(var i=0;i<this.gameHolderDivList.length;i++)this.gameHolderDivList[i].style.width=e+"px",this.gameHolderDivList[i].style.height=t+"px"},e.prototype.positionGameDivs=function(e,t){for(var i=0;i<this.gameHolderDivList.length;i++)this.gameHolderDivList[i].style.position="absolute",this.gameHolderDivList[i].style.top=t,this.gameHolderDivList[i].style.left=e},e.prototype.resizePixiCanvas=function(t,i){e.renderer&&e.renderer.resize(t,i);for(var s in this.scenes)this.scenes[s].resize(e.windowScaleFactor);this.ui&&this.ui.resize(e.windowScaleFactor)},e.prototype.addScene=function(e){var t=new e(this);this.scenes[t.id]=t},e.prototype.setLoadingScreen=function(e){this.currentLoadingScene=this.scenes[e]},e.prototype.setScene=function(t,i,s){void 0===i&&(i=!1);var o=0;1==i&&(o=.4),this.scenes[t]?(this.currentScene&&(this.currentScene.interactionLocked=!0,this.currentScene.interactive=!1,o>0&&this.currentScene.initTransitionOut(o)),o>0?this.setSceneDelay=TweenMax.delayedCall(o,this.initSceneSwap,[this,o,t,s]):this.initSceneSwap(this,o,t,s)):e.trace("Can't find scene!"+t)},e.prototype.initSceneSwap=function(t,i,s,o){t.currentScene&&0==t.currentScene.paused&&(t.currentScene.destroy(),t.currentScene.render=!1),t.currentScene=t.scenes[s],t.currentScene.addUI(t.ui.uiContainer,t.ui.uiMessageContainer),t.ui.resize(e.windowScaleFactor),t.currentScene&&0==t.currentScene.paused?(t.currentScene.init(o),t.currentScene.initTransitionIn(i)):t.currentScene&&1==t.currentScene.paused&&(t.currentScene.interactionLocked=!1,t.currentScene.restore())},e.prototype.startStats=function(e){this.stats=new Stats,this.stats.setMode(e),this.stats.domElement.style.position="absolute",this.stats.domElement.style.right="0px",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement)},e.prototype.initPIXI=function(){1==e.onDesktop?e.renderer=PIXI.autoDetectRenderer(e.stageWidth,e.stageHeight,{autoResize:!0,resolution:this.pixelRatio}):0==e.onDesktop&&(e.renderer=PIXI.autoDetectRenderer(e.stageWidth,e.stageHeight,{autoResize:!0,legacy:!0,resolution:this.pixelRatio})),e.renderer instanceof PIXI.CanvasRenderer?e.webGL=!1:e.webGL=!0,1==e.webGL&&1==e.onDesktop&&(e.useFilters=!0)},e.prototype.addPixiRenderer=function(){e.holderDiv.appendChild(e.renderer.view)},e.prototype.startGameLoop=function(e){this.ticker=new PIXI.ticker.Ticker,this.ticker.speed=1,this.ticker.add(e.loopFuncRef=function(t){e.tick(e,t)}),this.ticker.start()},e.prototype.loadAssets=function(e,t,i,s){if(this.loadModule.reset(t),1!=t||s){var o;1==t&&1==s&&(1==this.ui.uiInitialised?(o=1,this.setScene(this.currentLoadingScene.id,!1)):(o=0,this.setScene(this.currentLoadingScene.id,!1)));for(var a=0;a<e.length;a++){for(var r in this.visualAssets)r!=e[a]||this.loadModule.prepareLoad(e[a],this.visualAssets[r],"visual",t);for(var r in this.audioAssets)r!=e[a]||this.loadModule.prepareLoad(e[a],this.audioAssets[r],"audio",t)}var n=this;this.loadDelay=this.killDelay(this.loadDelay),this.loadDelay=TweenMax.delayedCall(o,function(){n.loadModule.load(i)})}else this.loadPreloaderAssets(this,e,i)},e.prototype.killDelay=function(e){return e&&(e.kill(),e=null),e},e.prototype.loadPreloaderAssets=function(e,t,i){e.loadAssets(e.currentLoadingScene.getPreloaderAssetList(),!1,function(){e.loadAssets(t,!0,i,!0)},!0)},e.prototype.tick=function(t,i){if(1!=t.paused){t.checkContainerCounter++,t.checkContainerCounter>=t.checkContainerLimit&&(t.checkContainerCounter=0,t.currentScene&&t.checkSceneContainer(t.currentScene));var s=t;s.stats&&s.stats.begin(),s.currentScene&&(1==s.currentScene.render?e.renderer.render(s.currentScene):0==s.currentScene.render&&(s.currentScene.render=!0),s.currentScene.tick(i)),e.ticketPool&&e.ticketPool.tick(),s.ui&&s.ui.tick(),s.stats&&s.stats.end()}},e.prototype.checkSceneContainer=function(e){if(0!=e.container.position.x||0!=e.container.position.y||0!=e.container.pivot.x||0!=e.container.pivot.y)throw new Error("Detected 'container' problem in scene '"+e.id+"'! Please don't change these properties.. Add an inner container if needed..")},e.openLink=function(e,t){1==t?window.open(e,"_blank"):window.open(e)},e.trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.saveProgress=function(){e.localStorageManager.saveProgress()},e.restoreProgress=function(){e.localStorageManager.restoreProgress()},e.prototype.setLocalStorageEnabled=function(t){e.localStorageManager.setLocalStorageEnabled(t)},e.prototype.initAudio=function(t){e.audioManager.initAudio(t)},e.playSound=function(t,i,s){e.audioManager.playSound(t,e.audioManager,i,s)},e.getSoundDuration=function(t){return e.audioManager.getSoundDuration(t,e.audioManager)},e.stopSound=function(t){e.audioManager.stopSound(t,e.audioManager)},e.fadeSound=function(t,i,s){e.audioManager.fadeSound(t,i,s,e.audioManager)},e.setSoundVolume=function(t,i){e.audioManager.setVolume(t,i)},e.stopCurrentInterruptableSound=function(){TweenMax.killDelayedCallsTo(e.playSound),e.audioManager.stopCurrentInterruptableSound()},e.pauseSound=function(t){e.audioManager.pauseSound(t,e.audioManager)},e.resumeSound=function(t){e.audioManager.resumeSound(t,e.audioManager)},e.prototype.successfulPhotoSave=function(){this.scenes.photoBoothPhotoPreview.photoSubmitSuccess()},e.prototype.successfulPhotoGallerySubmission=function(e){this.scenes.photoBoothSubmitConfirmedScene.photoGallerySubmitResult(e)},e.prototype.launchIntoFullscreen=function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},e.prototype.detectBrowserViewport=function(){var e=window.innerWidth,t=window.innerHeight;return void 0!==window.innerWidth?(e=window.innerWidth,t=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=720,t=480),{w:e,h:t}},e.prototype.isLowEndIPad=function(){var t=window.navigator.userAgent.toLowerCase();if(-1!=t.indexOf("ipod")||-1!=t.indexOf("iphone")||-1!=t.indexOf("ipad")){var i=window.screen.width*window.devicePixelRatio,s=window.screen.height*window.devicePixelRatio;if(1024==i&&768==s||768==i&&1024==s)return!0}return-1!=t.indexOf("firefox")&&0==e.onDesktop},e.prototype.isDesktop=function(){if(window.forceMobile)return!1;return 0!=window.screenX||!("ontouchstart"in window||"onmsgesturechange"in window)},e.prototype.isWebAudio=function(){var e=!0;return"undefined"!=typeof AudioContext?new AudioContext:void 0!==window.webkitAudioContext?new window.webkitAudioContext:e=!1,e},e.prototype.stopScrollWheelOnGame=function(){e.holderDiv.onwheel=function(e){e.preventDefault()},e.holderDiv.onmousewheel=function(e){e.preventDefault()}},e.prototype.setViewportTag=function(){if(!e.onDesktop)document.querySelector("meta[name=viewport]")},e.getRandom=function(e,t,i){var s=e+Math.random()*(t-e);return 1==i&&(s=Math.round(s)),s},e.prototype.getGameOffset=function(e){var t=0,i=0;if(e.offsetParent)do{t+=e.offsetLeft,i+=e.offsetTop}while(e=e.offsetParent);return{x:t,y:i}},e.prototype.escapeRegExp=function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},e.windowScaleFactor=1,e.onAndroid=!1,e.oniPhone=!1,e.isLowEndIPad=!1,e.onDesktop=!1,e.numberOfSoundsToPreload=0,e.numberOfAssetsToPreload=0,e.numberOfAssetsLoaded=0,e.soundOn=!0,e}(),AudioManagerMk2=function(){function e(e,t,i){this.failedLoadFlash=!1,this.initialised=!1,this.soundLoadedCallback=function(){},this.flashTimeoutCall=function(){},this.game=e,this.onDesktop=t,this.webAudio=i,this.audioPath="",this.flashModeReady=!1,this.soundLoadAttempted=!1,this.sounds=new Array}return e.prototype.initAudio=function(e){if(this.loadModule=e,void 0!=this.forceMode)return this.force(this.forceMode),void(this.initialised=!0);1==this.onDesktop&&void 0!=Game.ieVer?(this.mode=1,this.flashModeReady=!1,this.initSoundManager()):this.initHowler(this.webAudio),this.initialised=!0},e.prototype.addSoundSpriteSound=function(e,t,i){Game.trace("add sprite!!!!",t,i),this.sounds.push({group:e,id:t,times:i})},e.prototype.addSound=function(e,t){this.loadModule.registerAudioAsset(),this.currentAssetLoc="sfx/",1==t.loc&&(this.currentAssetLoc="vo/"+Game.loc+"/");var i;i=1==t.loop,t.duration||(t.duration=-1),this.sounds.push({group:e,id:t.url,url:t.url,duration:t.duration,volume:1,loop:i,urlPrefix:this.currentAssetLoc,setToLoad:!1,currentlyPaused:!1})},e.prototype.initHowler=function(e,t){var i=!1;t&&(i=t),(1==e||1==e&&1==i&&0==this.forceMode)&&(this.mode=0,this.assetID="sounds")},e.prototype.initSoundManager=function(){this.assetID="sounds";var e=this;soundManager=new SoundManager,soundManager.setup({url:Game.basePath+"media/swf/",flashVersion:9,preferFlash:!0,debugMode:!1,useHighPerformance:!0,onready:function(){0==e.flashModeReady&&(e.flashModeReady=!0,1==e.soundLoadAttempted&&e.loadSounds()),e=null},ontimeout:function(){e.failedLoadFlash=!0,e.flashTimeoutCall()}}),soundManager.beginDelayedInit()},e.prototype.setLoadCallback=function(e){this.soundLoadedCallback=e},e.prototype.setFlashTimeout=function(e){this.flashTimeoutCall=e},e.prototype.loadSounds=function(){if(0==this.soundLoadAttempted&&(this.soundLoadAttempted=!0),0!=this.flashModeReady||1!=this.mode)for(var e=this,t=0;t<this.sounds.length;t++){var i,s=this.sounds[t];if(1!=s.setToLoad)if(s.setToLoad=!0,0==this.mode)i=new Howl({src:[Game.basePath+"media/audio/"+s.urlPrefix+s.url],autoplay:!1,loop:s.loop,onload:function(){e.soundLoadedCallback()}}),s.howlSound=i;else if(1==this.mode){if(soundManager.getSoundById(s.id,!0)){e.soundLoadedCallback();continue}soundManager.createSound({id:s.id,url:Game.basePath+"media/audio/"+s.urlPrefix+s.url,autoLoad:!0,autoPlay:!1,onload:function(){e.soundLoadedCallback()}})}}},e.prototype.playSound=function(e,t,i,s){1!=t.failedLoadFlash&&(s&&1==s&&(this.currentInterruptableSound=e),i&&t.setVolume(e,i),t.startSound(e))},e.prototype.fadeSound=function(e,t,i,s){s.fadeTheSound(e,t,i,s)},e.prototype.getSoundDuration=function(e,t){var i=t.getSoundByID(e);return i&&i.duration?i.duration:-1},e.prototype.startSound=function(e){var t=this.getSoundByID(e);void 0!=t&&t.id==e&&(0==this.mode?t.howlSound&&t.howlSound.play():1==this.mode&&this.soundManagerPlayLoop(e,t.loop))},e.prototype.setVolume=function(e,t){var i=this.getSoundByID(e);void 0!=i&&(0==this.mode&&i.howlSound.volume(t),1==this.mode&&soundManager.setVolume(e,100*t))},e.prototype.fadeTheSound=function(e,t,i,s){var o=s.getSoundByID(e);if(void 0!=o&&o.id==e)if(0==s.mode)o.howlSound&&o.howlSound.fade(o.howlSound._volume,i,1e3*t);else if(1==s.mode){var a={vol:1};TweenMax.to(a,t,{vol:i,onUpdate:function(){soundManager.setVolume(e,100*a.vol)},onComplete:function(){0==i&&soundManager.stop(e)}})}},e.prototype.soundManagerPlayLoop=function(e,t){var i=this;soundManager.play(e,{onfinish:function(){1==t&&i.soundManagerPlayLoop(e,t)}})},e.prototype.pauseSound=function(e,t){var i=t.getSoundByID(e);1==t.failedLoadFlash&&1==t.mode||void 0!=i&&(i.id!=e||(0==t.mode?i.howlSound&&1==i.howlSound.playing()&&(i.currentlyPaused=!0,i.howlSound.pause()):1==t.mode&&(i.currentlyPaused=!0,soundManager.pause(e))))},e.prototype.resumeSound=function(e,t){var i=t.getSoundByID(e);if(void 0!=i&&(1!=t.failedLoadFlash||1!=t.mode))return i.id==e&&1==i.currentlyPaused?(i.currentlyPaused=!1,void(0==t.mode?i.howlSound&&i.howlSound.play():1==t.mode&&soundManager.resume(e))):void 0},e.prototype.stopSound=function(e,t){var i=t.getSoundByID(e);1!=t.failedLoadFlash&&void 0!=i&&i.id==e&&(0==t.mode?i.howlSound&&(Game.trace("stopping sound",i,i.howlSound,i.howlerID),i.howlSound.stop()):1==t.mode&&soundManager.stop(e))},e.prototype.stopCurrentInterruptableSound=function(){this.currentInterruptableSound&&this.stopSound(this.currentInterruptableSound,this)},e.prototype.flush=function(e){if(Game.trace("Flushing audio system!",e,this.mode),0==this.mode)for(t=this.sounds.length-1;t>=0;t--){if((i=this.sounds[t]).group==e){if(0==this.checkSoundFlushable(e,i.id)){this.sounds.splice(t,1);continue}(s=this.sounds.splice(t,1))[0].howlSound.stop(),s[0].howlSound.unload(),s[0]=null,s=null}i=null}else if(1==this.mode&&this.sounds)for(var t=this.sounds.length-1;t>=0;t--){var i=this.sounds[t];if(i.group==e){if(0==this.checkSoundFlushable(e,i.id)){s=this.sounds.splice(t,1);soundManager.stop(s[0].id),s=null;continue}var s=this.sounds.splice(t,1);soundManager.stop(s[0].id),soundManager.destroySound(s[0].id),s[0]=null,s=null}i=null}},e.prototype.checkSoundFlushable=function(e,t){for(var i=!0,s=this.sounds.length-1;s>=0;s--){var o=this.sounds[s];o.group!=e&&o.id==t&&(i=!1)}return i},e.prototype.soundOn=function(){0==this.mode?Howler.mute(!1):1==this.mode&&soundManager.unmute()},e.prototype.soundOff=function(){0==this.mode?Howler.mute(!0):1==this.mode&&soundManager.mute()},e.prototype.getSoundByID=function(e){for(var t=0;t<this.sounds.length;t++){var i=this.sounds[t];if(e==i.id)return i}},e.prototype.listGroupsLoaded=function(){for(var e=new Array,t=0;t<this.sounds.length;t++)0==this.checkExists(this.sounds[t].group,e)&&e.push(this.sounds[t].group);for(t=0;t<e.length;t++)Game.trace("Members of this group are loaded: ",e[t])},e.prototype.listAssetsLoaded=function(){for(var e=0;e<this.sounds.length;e++)Game.trace("Asset loaded: ",this.sounds[e].id," - From group: ",this.sounds[e].group)},e.prototype.checkExists=function(e,t){var i=!1;if(0==t.length)return i;for(var s=0;s<t.length;s++)t[s]==e&&(i=!0);return i},e.prototype.force=function(e){this.assetID="sounds";var t;1==e?(t="SOUND MANAGER - FLASH MODE!",this.mode=1,this.initSoundManager()):0==e&&(t="HOWLER - NORMAL MODE!",this.mode=0,this.initHowler(!0,!0)),console.log(":::::::::::::::::::::::::::: FORCE AUDIO DEBUG MODE - "+this.forceMode+" => "+t)},e}(),LoadModule=function(){function e(e){this.firstLoadComplete=!1,this.game=e,this.lastLoadGroup=null}return e.prototype.prepareLoad=function(e,t,i,s,o){if(this.currentType=i,this.preloadCurrent=s,this.lastLoadGroup!=e){this.neverFlushCurrent=!1;for(a=0;a<t.length;a++)1!=t[a].neverFlush||(this.neverFlushCurrent=!0)}this.lastLoadGroup=e;if("visual"==this.currentType)for(a=0;a<t.length;a++){if(this.itemPoolNumber=0,t[a].pool&&(this.itemPoolNumber=t[a].pool),o&&0!=this.itemPoolNumber)throw new ReferenceError('Ooops! You can only set "pool" attribute on elements at root level of Visual Assets manifest..');this.createVisualAsset(a,e,t[a],this.itemPoolNumber,t,o,this.neverFlushCurrent)}else if("audio"==this.currentType)for(var a=0;a<t.length;a++)t[a].url&&Game.audioManager.addSound(e,t[a])},e.prototype.createVisualAsset=function(e,t,i,s,o,a,r){if(i.platformspecific){if("desktop"==i.platformspecific&&0==Game.onDesktop)return;if("mobile"==i.platformspecific&&1==Game.onDesktop)return}if("bitmaptext"==i.type){if(i.alphabet&&i.alphabet!=Game.alphabet)return;this.createSpriteOrSpine(e,t,i,s,a,r)}if("spritesheet"==i.type&&this.createSpriteOrSpine(e,t,i,s,a,r),i.url){if("misc"==i.type)return void this.loadMiscFileType(i);this.createSpriteOrSpine(e,t,i,s,a,r)}else if(i.children){var n=0,h=!1,l=i.id;s>0&&(n=s-1,h=!0);for(var p=0;p<=n;p++){l=String(l+p);var c,d=i.children;if("button"==i.type?c=new UIButton:((c=new DisplayObjectContainer).pooled=h,c.pooledUniqueID=l),c.group=t,c.id=i.id,c.neverFlush=r,i.anchor){var u=!1;i.anchor[2]&&(u=i.anchor[2]),c.setRegPoint(i.anchor[0],i.anchor[1],u),c.origPivot={x:i.anchor[0],y:i.anchor[1],compensate:u},c.defaultPivot=!1}i.x&&(c.origX=i.x,c.position.x=c.origX),i.y&&(c.origY=i.y,c.position.y=c.origY),a?a.addChild(c):"button"==i.type?Game.displayStore.addButton(c):Game.displayStore.addContainer(c),this.prepareLoad(t,d,this.currentType,this.preloadCurrent,c)}}},e.prototype.loadMiscFileType=function(e){var t=Game.basePath;this.assetsPreparedForLoad.push({type:e.type,path:t,url:e.url})},e.prototype.createSpriteOrSpine=function(e,t,i,s,o,a){this.currentAssetLoc="base/",this.currentSpineFolder="",this.currentSpritesheetFolder="",this.currentAssetResPath=Game.assetResolutionPath;var r="sprite",n=this.game.pixelRatio;void 0!=i.retina&&0==i.retina&&(this.currentAssetResPath="@1x/",n=1),0==this.game.useRetinaAssests&&(this.currentAssetResPath="@1x/",n=1),1==i.loc&&(this.currentAssetLoc="localized/"+Game.loc+"/"),"spine"==i.type&&(this.currentSpineFolder=i.dir+"/"),"spritesheet"==i.type&&(this.currentSpritesheetFolder=i.dir+"/"),"bitmaptext"==i.type&&(this.currentBitmapFontFolder=i.dir+"/"),i.type&&(r=i.type);var h;h="spine"==r?Game.basePath+"media/images/"+this.currentAssetResPath+this.currentAssetLoc+this.currentSpineFolder:"spritesheet"==r?Game.basePath+"media/images/"+this.currentAssetResPath+this.currentAssetLoc+this.currentSpritesheetFolder:"bitmaptext"==r?Game.basePath+"media/images/"+this.currentAssetResPath+this.currentAssetLoc+this.currentBitmapFontFolder:Game.basePath+"media/images/"+this.currentAssetResPath+this.currentAssetLoc;var l;l=i.id?i.id:i.url;i.pooledID&&i.pooledID,this.assetsToLoad++,this.assetsPreparedForLoad.push({index:e,type:r,group:t,id:l,pooledNum:s,path:h,url:i.url,dir:i.dir,atlasJSON:i.atlas,skeletonJSON:i.skeleton,container:o,x:i.x,y:i.y,anchor:i.anchor,w:i.w,h:i.h,frames:i.frames,fontname:i.fontname,fontdata:i.fontdata,alphabet:i.alphabet,textureResolution:n,neverFlush:a})},e.prototype.load=function(e){this.loadedCallback=e;for(var t=!1,i=new Array,s=0;s<this.assetsPreparedForLoad.length;s++){"spritesheet"==this.assetsPreparedForLoad[s].type?this.assetsPreparedForLoad[s].loadPath=this.assetsPreparedForLoad[s].path+this.assetsPreparedForLoad[s].atlasJSON:"bitmaptext"==this.assetsPreparedForLoad[s].type?this.assetsPreparedForLoad[s].loadPath=this.assetsPreparedForLoad[s].path+this.assetsPreparedForLoad[s].fontdata:"spine"==this.assetsPreparedForLoad[s].type?(t=!0,this.assetsPreparedForLoad[s].loadPath=this.assetsPreparedForLoad[s].path+this.assetsPreparedForLoad[s].skeletonJSON):this.assetsPreparedForLoad[s].loadPath=this.assetsPreparedForLoad[s].path+this.assetsPreparedForLoad[s].url,i.push(this.assetsPreparedForLoad[s].loadPath)}i.length,(i=this.remove_duplicates(i)).length;for(var o=new PIXI.loaders.Loader,s=0;s<i.length;s++)if(0==t)o.add(String(i[s]),i[s]);else{var a={metadata:{spineAtlasSuffix:".txt"}};o.add(String(i[s]),i[s],a)}var r=this;Game.audioManager.setLoadCallback(this.checkLoadedFuncRef=function(){r.assetsLoaded++,r.checkAllAssetsLoaded(r)}),Game.audioManager.setFlashTimeout(this.flashTimeoutFuncRef=function(){}),o.load(this.buildAssetFuncRef=function(e,t){r.buildAssets(e,r)}),Game.audioManager.loadSounds()},e.prototype.buildAssets=function(e,t){for(var i in e.resources)for(var s=0;s<t.assetsPreparedForLoad.length;s++)e.resources[i].url==t.assetsPreparedForLoad[s].loadPath&&t.buildIndividualAsset(t,t.assetsPreparedForLoad[s],e.resources[i])},e.prototype.checkAllAssetsLoaded=function(e){1==e.usePreload&&e.game.currentScene&&e.game.currentScene.onLoadUpdate(e.assetsLoaded,e.assetsToLoad),e.assetsLoaded==e.assetsToLoad&&(e.callbackDelayTweenMax=e.killDelay(e.callbackDelayTweenMax),e.callbackDelayTweenMax=TweenMax.delayedCall(e.callbackDelay,e.loadedCallback))},e.prototype.killDelay=function(e){return e&&(e.kill(),e=null),e},e.prototype.buildIndividualAsset=function(e,t,i){e.assetsLoaded++;var s=0,o=!1,a=t.id;t.pooledNum>0&&(s=t.pooledNum-1,o=!0);for(var r=0;r<=s;r++)switch(a=String(a+r),t.type){case"sprite":var n=i.texture,h=new Sprite(n);h.setTextureResolution(t.textureResolution),h.textureURL=t.path+t.url,h.group=t.group,h.id=t.id,h.neverFlush=t.neverFlush,h.pooled=o,h.pooledUniqueID=a,e.storeBuiltObject(h,t);break;case"bitmaptext":var l,p=80*this.game.pixelRatio;l=new BitmapText("0000",{font:String(p)+"px "+t.fontname,align:"left"});var c;for(var d in i.bitmapFont.chars){c=i.bitmapFont.chars[d].texture.baseTexture.imageUrl;break}l.textureURL=c,l.setXMLBaseTextureRef(i.name+"_image"),l.setTextureResolution(t.textureResolution),l.saveTexture(),l.group=t.group,l.id=t.id,l.fontname=t.fontname,l.pooled=o,l.pooledUniqueID=a,e.storeBuiltObject(l,t);break;case"spritesheet":var u,g;t.path,t.atlasJSON;g=new Array;var m=!1;if(t.frames&&t.frames.length>0&&(m=!0),1==m){for(var y=0;y<t.frames.length;y++)for(var d in i.data.frames)if(t.frames[y]==String(d)){n=PIXI.Texture.fromFrame(String(d));g.push(n)}}else if(0==m)for(var d in i.data.frames){n=PIXI.Texture.fromFrame(String(d));g.push(n)}(u=new AnimatedSprite(g)).setJsonBaseTextureRef(i.name+"_image"),u.textureURL=i.children[0].url,u.setTextureResolution(t.textureResolution),u.group=t.group,u.id=t.id,u.pooled=o,u.pooledUniqueID=a,e.storeBuiltObject(u,t);break;case"spine":var f=new Spine(i.spineData);f.textureURL=t.path+t.url,f.setAtlasTextureRefID(i.name+"_atlas_page_skeleton.png"),f.setTextureResolution(t.textureResolution),f.group=t.group,f.id=t.id,f.pooled=o,f.pooledUniqueID=a,e.storeBuiltObject(f,t)}e.checkAllAssetsLoaded(e)},e.prototype.storeBuiltObject=function(e,t){if(t.x&&(e.origX=t.x,e.position.x=e.origX),t.y&&(e.origY=t.y,e.position.y=e.origY),t.anchor){var i=!1;t.anchor[2]&&(i=t.anchor[2]),e.setRegPoint(t.anchor[0],t.anchor[1],i),e.origAnchor={x:t.anchor[0],y:t.anchor[1],compensate:i},e.defaultAnchor=!1}if(t.w&&(e.width=t.w),t.h&&(e.height=t.h),t.container){var s=t.index;t.container.children.length<t.index&&(s=t.container.children.length),t.container.addChildAt(e,s)}"sprite"==t.type?Game.displayStore.addSprite(e):"spine"==t.type?Game.displayStore.addSpine(e):"spritesheet"==t.type?Game.displayStore.addAnimatedSprite(e):"bitmaptext"==t.type&&Game.displayStore.addBitmapText(e)},e.prototype.registerAudioAsset=function(){this.assetsToLoad++},e.prototype.reset=function(e){this.assetsToLoad=0,this.assetsLoaded=0,this.usePreload=e,this.loadedCallback=function(){},this.assetsPreparedForLoad=new Array,this.currentType="",this.itemPoolNumber=0,this.callbackDelay=1==e?1:0},e.prototype.remove_duplicates=function(e){for(var t={},i=0;i<e.length;i++)t[e[i]]=!0;e=[];for(var s in t)e.push(s);return e},e}(),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),GameoverScene=function(e){function t(t){var i=e.call(this,t)||this;return i.tickUpTime=1.5,i.id="gameoverScene",i}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this),this.restartAllowed=!0,t&&t[0]?this.useWristBand=t[0]:this.useWristBand=!1,this.addingScore=!1,this.addingTickets=!1,this.wristBandType=Game.coreData.getCurrentWristband().id,this.game.trackingEventsManager.onLevelEnd(Game.coreData.getCurrentRide().id),this.scoreTitleContainer=Game.displayStore.getContainer("game-over/score-title-container"),this.highScoreTitleContainer=Game.displayStore.getContainer("game-over/highscore-title-container"),this.giftShopTitleContainer=Game.displayStore.getContainer("game-over/gift-shop-title-container"),this.replayTitleContainer=Game.displayStore.getContainer("game-over/replay-title-container"),this.blackCover=Game.displayStore.getSprite("game-over/black"),this.wristbandContainer=Game.displayStore.getContainer("game-over/wristband-container"),this.wristbandParticlesContainer=Game.displayStore.getContainer("game-over/ticket-particle-container"),this.blackCover.width=Game.stageWidth,this.blackCover.height=Game.stageHeight,this.blackCover.alpha=0,this.sparkle1=this.wristbandContainer.getSprite("game-over/sparkle-1"),this.sparkle2=this.wristbandContainer.getSprite("game-over/sparkle-2"),this.glow=this.wristbandContainer.getSprite("game-over/glow"),this.ticketsBand=this.wristbandContainer.getSprite("game-over/tickets"),this.pointsBand=this.wristbandContainer.getSprite("game-over/points"),this.sparkle1.scale.x=0,this.sparkle2.scale.x=0,this.glow.scale.x=0,this.ticketsBand.scale.x=0,this.pointsBand.scale.x=0,this.sparkle1.scale.y=0,this.sparkle2.scale.y=0,this.glow.scale.y=0,this.ticketsBand.scale.y=0,this.pointsBand.scale.y=0,this.sparkle1.blendMode=PIXI.BLEND_MODES.ADD,this.sparkle2.blendMode=PIXI.BLEND_MODES.ADD,this.glow.blendMode=PIXI.BLEND_MODES.ADD,this.currentScore=0,this.currentTickets=0,this.currentRide=Game.coreData.getCurrentRide().id,this.setBackgroundColor(13421772),this.game.ui.setUI("mini-game-gameover"),console.log("getting logo for game...",Game.coreData.getCurrentRide().id),this.logo=Game.displayStore.getSprite("game-over-logo/"+Game.coreData.getCurrentRide().id),this.gameoverBoardContainer=Game.displayStore.getContainer("game-over-board"),this.backgroundContainer=Game.displayStore.getContainer("game-over-background"),this.scenebackground=this.backgroundContainer.getSprite("game-over-background/background"),this.sceneforeground=this.backgroundContainer.getSprite("game-over-background/foreground"),this.ticketIcon=Game.displayStore.getSprite("game-over/ticket"),this.gameoverBoardContainer.addChild(this.logo),this.highScorePanel=Game.displayStore.getSprite("game-over/panel"),this.scorePanel=Game.displayStore.getSprite("game-over/panel"),this.ticketsPanel=Game.displayStore.getSprite("game-over/panel"),this.replayPanel=Game.displayStore.getSprite("game-over/again"),this.giftShopPanel=Game.displayStore.getSprite("game-over/gift-shop"),this.scoreHand=Game.displayStore.getContainer("game-over-hand-1"),this.highScoreHand=Game.displayStore.getContainer("game-over-hand-2"),this.ticketHand=Game.displayStore.getContainer("game-over-hand-3"),this.scoreHandFront=Game.displayStore.getSprite("game-over/card-hand-front"),this.scoreHandBack=Game.displayStore.getSprite("game-over/card-hand-back"),this.highScoreHandFront=Game.displayStore.getSprite("game-over/card-hand-front"),this.highScoreHandBack=Game.displayStore.getSprite("game-over/card-hand-back"),this.ticketHandFront=Game.displayStore.getSprite("game-over/card-hand-front"),this.ticketHandBack=Game.displayStore.getSprite("game-over/card-hand-back"),this.scoreTitle=Game.displayStore.getBitmapText("game-over/score-title-font"),Game.stringsManager.setTextString(this.scoreTitle,"gameover-score"),this.scoreTitle.tint=16734722,this.highScoreTitle=Game.displayStore.getBitmapText("game-over/highscore-title-font"),Game.stringsManager.setTextString(this.highScoreTitle,"gameover-hiscore"),this.highScoreTitle.tint=16734722,this.ticketsTitle=Game.displayStore.getBitmapText("game-over/tickets-title-font"),Game.stringsManager.setTextString(this.ticketsTitle,"gameover-new"),this.ticketsTitle.tint=16734722,this.giftShopTitle=Game.displayStore.getBitmapText("game-over/gift-shop-font"),Game.stringsManager.setTextString(this.giftShopTitle,"gameover-gift-shop"),this.giftShopTitle.tint=16734722,this.replayTitle=Game.displayStore.getBitmapText("game-over/replay-font"),Game.stringsManager.setTextString(this.replayTitle,"gameover-replay"),this.replayTitle.tint=16734722,this.score=Game.displayStore.getBitmapText("game-over/score-font"),this.highScore=Game.displayStore.getBitmapText("game-over/highscore-font"),this.tickets=Game.displayStore.getBitmapText("game-over/tickets-font"),this.scoreContainer=Game.displayStore.getContainer("game-over-score-field"),this.highscoreContainer=Game.displayStore.getContainer("game-over-high-score-field"),this.ticketsContainer=Game.displayStore.getContainer("game-over-tickets-field"),this.gameOverTitle=Game.displayStore.getBitmapText("game-over/game-over-title-font"),Game.stringsManager.setTextString(this.gameOverTitle,"gameover"),this.gameOverTitle.position.x=0-this.gameOverTitle.width/2+Game.stringsManager.getTextOffset("gameover").xOffset,this.gameOverTitle.position.y=-360+Game.stringsManager.getTextOffset("gamover").yOffset,this.gameOverTitle.tint=3740929,this.gameoverBoardContainer.addChild(this.gameOverTitle),this.scoreHand.addChild(this.scoreHandBack),this.scoreHand.addChild(this.scorePanel),this.scoreHand.addChild(this.scoreHandFront),this.highScoreHand.addChild(this.highScoreHandBack),this.highScoreHand.addChild(this.highScorePanel),this.highScoreHand.addChild(this.highScoreHandFront),3!=this.game.gameLaunchMode&&(this.ticketHand.addChild(this.ticketHandBack),this.ticketHand.addChild(this.ticketsPanel),this.ticketHand.addChild(this.ticketHandFront)),this.pointHand1=Game.displayStore.getSprite("game-over/hand"),this.pointHand2=Game.displayStore.getSprite("game-over/hand"),this.scoreParticlesContainer=Game.displayStore.getContainer("game-over/confetti-container");var i={lowerAngle:0,upperAngle:360,lowerVelocity:700,upperVelocity:1400,endScale:0,lowerStartScale:1,upperStartScale:3,friction:.05,XstartRange:20,YstartRange:20,time:2,gravity:1e3,stagger:800,cap:120,endAlpha:0,rotationPower:3};this.confettiBurst=new ParticleBurst(["game-over/general/confetti-1","game-over/general/confetti-2","game-over/general/confetti-3","game-over/general/confetti-4"],this.scoreParticlesContainer,this,i),this.confettiBurst.container.position.x=412,this.confettiBurst.container.position.y=312;var s={lowerAngle:0,upperAngle:360,lowerVelocity:700,upperVelocity:1400,endScale:0,lowerStartScale:2,upperStartScale:6,friction:.05,XstartRange:20,YstartRange:20,time:2,gravity:1e3,stagger:800,cap:60,endAlpha:0,rotationPower:3,blendMode:PIXI.BLEND_MODES.ADD};switch(this.bandBurst=new ParticleBurst(["game-over/spark"],this.wristbandParticlesContainer,this,s),this.bandBurst.container.position.x=Game.stageWidth/2,this.bandBurst.container.position.y=262,this.game.ui.UIhud.container.position.y=180,this.wristBandType){case"points":this.bandBurst.tint(16723759);break;case"tickets":this.bandBurst.tint(16278520)}this.rideData=Game.coreData.getRideData(this.currentRide),this.scoreNumber=this.rideData[0].lastScore,this.highscoreNumber=this.rideData[0].highScore,this.currentTickets=Game.coreData.getCurrentTickets()-Game.coreData.getCurrentRide().startingTickets,this.currentTickets<0&&(this.currentTickets=0),this.tickets.text=String(this.currentTickets),this.highScore.text=String(this.highscoreNumber),this.giftShopTitle.position.x=0-this.giftShopTitle.width/2+Game.stringsManager.getTextOffset("gameover-gift-shop").xOffset,this.giftShopTitle.position.y=this.giftShopPanel.position.y-50+Game.stringsManager.getTextOffset("gameover-gift-shop").yOffset,this.replayTitle.position.x=0-this.replayTitle.width/2+Game.stringsManager.getTextOffset("gameover-replay").xOffset,this.replayTitle.position.y=this.replayPanel.position.y-50+Game.stringsManager.getTextOffset("gameover-replay").yOffset,this.scoreHand.addChild(this.scoreContainer),this.scoreContainer.addChild(this.score),this.highScoreHand.addChild(this.highScoreTitleContainer),this.highScoreTitleContainer.addChild(this.highScoreTitle),this.scoreHand.addChild(this.scoreTitleContainer),this.scoreTitleContainer.addChild(this.scoreTitle),this.highScoreHand.addChild(this.highscoreContainer),this.highscoreContainer.addChild(this.highScore),3!=this.game.gameLaunchMode&&(this.ticketHand.addChild(this.ticketsTitle),this.ticketHand.addChild(this.ticketsContainer),this.ticketHand.addChild(this.ticketIcon),this.ticketsContainer.addChild(this.tickets)),this.highScoreTitle.scale.x=-1,this.highScore.scale.x=-1,this.container.addChild(this.scoreParticlesContainer),this.ticketsTitle.position.x=this.ticketsPanel.position.x-this.ticketsTitle.width-70+Game.stringsManager.getTextOffset("gameover-new").xOffset,this.ticketsTitle.position.y=this.ticketsPanel.position.y-50+Game.stringsManager.getTextOffset("gameover-new").yOffset,this.tickets.position.y=this.highScorePanel.position.y-50,this.ticketIcon.position.x=this.ticketsTitle.position.x+140,this.ticketIcon.scale.x=this.ticketIcon.scale.y=.65,this.ticketIcon.rotation=-.75,this.gameoverBoardContainer.addChild(this.scoreHand),this.gameoverBoardContainer.addChild(this.highScoreHand),this.gameoverBoardContainer.addChild(this.ticketHand),this.gameoverBoardContainer.addChild(this.replayPanel),this.gameoverBoardContainer.addChild(this.replayTitleContainer),this.replayTitleContainer.addChild(this.replayPanel),this.replayTitleContainer.addChild(this.replayTitle),3!=this.game.gameLaunchMode&&(this.gameoverBoardContainer.addChild(this.giftShopTitleContainer),this.giftShopTitleContainer.addChild(this.giftShopPanel),this.giftShopTitleContainer.addChild(this.giftShopTitle),this.gameoverBoardContainer.addChild(this.pointHand1)),this.gameoverBoardContainer.addChild(this.pointHand2),this.wristbandContainer.position.x=Game.stageWidth/2,this.wristbandContainer.position.y=Game.stageHeight/2,this.ticketHandFront.position.x=-350,this.ticketHandBack.position.x=-350,this.scoreHandFront.position.x=-350,this.scoreHandBack.position.x=-350,this.highScoreHandFront.position.x=-350,this.highScoreHandBack.position.x=-350,this.replayTitleContainer.position.y=this.gameoverBoardContainer.position.y+290,this.giftShopTitleContainer.position.y=this.gameoverBoardContainer.position.y+182,this.pointHand1.position.y=this.gameoverBoardContainer.position.y+192,this.pointHand2.position.y=this.gameoverBoardContainer.position.y+300,this.pointHand1.scale.x=-1,this.pointHand1.position.x=900,this.pointHand2.position.x=-900,this.score.position.x=-this.score.width/2,this.score.position.y=-this.score.height/2,this.highScore.position.x=-this.highScore.width/2,this.highScore.position.y=-this.highScore.height/2,this.tickets.position.x=-this.tickets.width/2,this.tickets.position.y=-this.tickets.height/2,this.gameoverBoardContainer.scale.x=this.gameoverBoardContainer.scale.y=1.8,this.container.addChild(this.backgroundContainer),this.container.addChild(this.gameoverBoardContainer),this.sceneforeground.scale.x=this.sceneforeground.scale.y=1.1,this.sceneforeground.position.y=this.sceneforeground.position.y+50,this.scoreTitle.position.x=this.scoreTitle.position.x-this.scoreTitle.width/2+Game.stringsManager.getTextOffset("gameover-score").xOffset,this.scoreTitle.position.y=this.scoreTitle.position.y-this.scoreTitle.height/2+Game.stringsManager.getTextOffset("gameover-score").yOffset,this.highScoreTitle.position.x=this.highScoreTitle.position.x-this.highScoreTitle.width/2+Game.stringsManager.getTextOffset("gameover-hiscore").xOffset,this.highScoreTitle.position.y=this.highScoreTitle.position.y-this.highScoreTitle.height/2+Game.stringsManager.getTextOffset("gameover-hiscore").yOffset,this.highScoreTitleContainer.position.y=this.highScoreTitleContainer.position.y-20,this.scoreTitleContainer.position.y=this.scoreTitleContainer.position.y-20,this.highScoreTitleContainer.position.x=this.highScoreTitleContainer.position.x+this.highScoreTitleContainer.width/2,this.scoreTitleContainer.position.x=this.scoreTitleContainer.position.x-this.scoreTitleContainer.width/2,this.highscoreContainer.position.y=this.highScoreTitleContainer.position.y,this.scoreContainer.position.y=this.scoreTitleContainer.position.y,this.ticketsContainer.position.y=this.ticketsTitle.position.y+30,this.scoreContainer.position.x=this.scoreContainer.position.x+this.scoreContainer.width/2+60,this.highscoreContainer.position.x=this.highscoreContainer.position.x-this.highscoreContainer.width/2-60,this.ticketsContainer.position.x=this.ticketIcon.position.x+this.ticketIcon.width/2+60,this.logo.position.y=-470,this.scoreHand.position.y=-145,this.highScoreHand.position.y=-35,this.highScoreHand.scale.x=-1,this.ticketHand.position.y=73,this.backgroundContainer.position.x=Game.stageWidth/2,this.backgroundContainer.position.y=Game.stageHeight/2,this.gameoverBoardContainer.position.x=Game.stageWidth/2,this.gameoverBoardContainer.position.y=600,this.animation=this.killTween(this.animation),this.animation=new TimelineMax,this.animation.add(TweenMax.from(this.backgroundContainer.scale,1.5,{x:1.4,y:1.4,ease:Power1.easeInOut}),0),this.animation.add(TweenMax.from(this.sceneforeground.scale,1.5,{x:1.6,y:1.6,ease:Power1.easeInOut}),0),this.animation.add(TweenMax.from(this.sceneforeground.position,1.5,{y:this.sceneforeground.position.y+100,ease:Power1.easeInOut}),0),this.animation.add(TweenMax.from(this.scenebackground.position,1.5,{y:this.scenebackground.position.y+50,ease:Power1.easeInOut}),0),this.animation.add(TweenMax.to(this.gameoverBoardContainer.scale,1.5,{x:.95,y:.95,ease:Power1.easeInOut}),0),this.animation.add(TweenMax.to(this.gameoverBoardContainer.position,1.5,{y:this.gameoverBoardContainer.position.y-380,ease:Power1.easeInOut}),2),this.animation.add(TweenMax.to(this.sceneforeground.position,1.5,{y:"-=90",ease:Power2.easeInOut}),2),this.animation.add(TweenMax.to(this.scenebackground.position,1.5,{y:"-=40",ease:Power2.easeInOut}),2),this.animation.call(function(){this.game.ui.setUI("mini-game-gameover-end")},null,this,2.5),this.animation.add(TweenMax.from(this.scoreHand.position,1,{x:"-=850",ease:Power2.easeInOut}),2.5),this.animation.add([TweenMax.to(this.scoreHandFront.position,1,{x:"-=850",ease:Power1.easeInOut}),TweenMax.to(this.scoreHandBack.position,1,{x:"-=850",ease:Power1.easeInOut})]),this.animation.add(TweenMax.from(this.highScoreHand.position,1,{x:"+=850",ease:Power2.easeInOut}),3),this.animation.add([TweenMax.to(this.highScoreHandFront.position,1,{x:"-=850",ease:Power1.easeInOut}),TweenMax.to(this.highScoreHandBack.position,1,{x:"-=850",ease:Power1.easeInOut})],4),this.animation.add(TweenMax.from(this.ticketHand.position,1,{x:"-=850",ease:Power2.easeInOut}),3.5),this.animation.add([TweenMax.to(this.ticketHandFront.position,1,{x:"-=850",ease:Power1.easeInOut}),TweenMax.to(this.ticketHandBack.position,1,{x:"-=850",ease:Power1.easeInOut})],4.5),this.animation.add(TweenMax.to(this.pointHand1.position,.5,{x:"-=450",ease:Power1.easeInOut}),4),this.animation.add(TweenMax.to(this.giftShopTitleContainer.position,.5,{x:"-=160",ease:Power1.easeInOut}),4.5),this.animation.add(TweenMax.to(this.pointHand1.position,.5,{x:"-=130",ease:Power1.easeInOut}),4.5),this.animation.add(TweenMax.to(this.pointHand1.position,1,{x:"+=850",ease:Power1.easeInOut}),5),this.animation.add(TweenMax.to(this.pointHand2.position,.5,{x:"+=450",ease:Power1.easeInOut}),4.5),this.animation.add(TweenMax.to(this.replayTitleContainer.position,.5,{x:"+=80",ease:Power1.easeInOut}),5),this.animation.add(TweenMax.to(this.pointHand2.position,.5,{x:"+=130",ease:Power1.easeInOut}),5),this.animation.add(TweenMax.to(this.pointHand2.position,1,{x:"-=850",ease:Power1.easeInOut}),5.5),this.animation.timeScale(2),this.container.addChild(this.blackCover),this.container.addChild(this.wristbandContainer),this.container.addChild(this.scoreParticlesContainer),this.container.addChild(this.wristbandParticlesContainer),this.animation.call(Game.playSound,["game-over/swish-long-1.mp3",.8],this,2.7),this.animation.call(Game.playSound,["game-over/swish-long-2.mp3",.8],this,3.2),this.animation.call(Game.playSound,["game-over/swish-long-3.mp3",.8],this,3.7),this.animation.call(Game.playSound,["game-over/swish-long-1.mp3",.8],this,4.3),this.animation.call(Game.playSound,["game-over/swish-long-2.mp3",.8],this,4.8),this.animation.call(Game.playSound,["enjoy-the-ride-swoosh.mp3"],this,.1),this.score.text="0",this.animation.call(function(){0==this.scoreNumber&&0==this.highscoreNumber||this.addScore()},null,this,5)},t.prototype.addTickets=function(e){this.scoreCounter=this.killTween(this.scoreCounter),this.scoreCounter=new TimelineMax,this.tickets.tint=e,this.targetTickets=3*this.currentTickets,this.interval=3*this.currentTickets/(120*this.tickUpTime),this.addingTickets=!0},t.prototype.incrementTickets=function(){var e=Math.ceil(this.interval);this.currentTickets<this.targetTickets?(this.tickets.tint=16736255,this.currentTickets+e<=this.targetTickets?this.currentTickets+=e:this.currentTickets+=1,this.tickets.text=String(this.currentTickets)):this.addingTickets=!1},t.prototype.addScore=function(e){this.scoreCounter=this.killTween(this.scoreCounter),this.scoreCounter=new TimelineMax,this.scoreTint=e,this.interval=this.scoreNumber/(60*this.tickUpTime),this.addingScore=!0},t.prototype.incrementScore=function(){var e=Math.ceil(this.interval);if(this.currentScore<this.scoreNumber?(this.currentScore>this.highscoreNumber?(this.score.tint=this.scoreTint||6815490,this.currentScore+e<=this.scoreNumber?this.currentScore+=e:this.currentScore+=1,this.score.text=String(this.currentScore)):(this.currentScore+e<=this.scoreNumber?this.currentScore+=e:this.currentScore+=1,this.score.text=String(this.currentScore)),this.currentScore%4==0&&Game.playSound("game-over/tick-up.mp3",.3)):this.addingScore=!1,this.currentScore==this.scoreNumber&&this.scoreNumber>this.highscoreNumber){this.scoreCounter=this.killTween(this.scoreCounter),this.scoreCounter=new TimelineMax,this.scoreCounter.add(TweenMax.to(this.highscoreContainer.scale,.3,{x:1.5,y:1.5,yoyo:!0,repeat:1,ease:Power1.easeInOut}),0),this.scoreCounter.add(TweenMax.to(this.scoreContainer.scale,.3,{x:1.5,y:1.5,yoyo:!0,repeat:1,ease:Power1.easeInOut}),0),this.scoreCounter.add(TweenMax.to(this.scoreTitleContainer.scale,.3,{x:1.5,y:1.5,yoyo:!0,repeat:1,ease:Power1.easeInOut}),0),this.scoreCounter.add(TweenMax.to(this.highScoreTitleContainer.scale,.3,{x:1.5,y:1.5,yoyo:!0,repeat:1,ease:Power1.easeInOut}),0),this.highScore.text=this.currentScore.toString(),this.confettiBurst.container.position.x=Game.stageWidth/2,this.confettiBurst.container.position.y=200,this.highScore.tint=this.scoreTint||6815490,this.confettiBurst.fire(),Game.playSound("ticket.mp3"),Game.coreData.updateHighScoreFromGameOver(this.currentScore);this.currentRide,this.highscoreNumber}this.currentScore==this.scoreNumber&&1==this.useWristBand&&(this.scoreCounter=this.killTween(this.scoreCounter),this.useBandEffect())},t.prototype.useBandEffect=function(){switch(this.sparkle1.alpha=this.sparkle2.alpha=this.glow.alpha=1,this.blackCover.alpha=0,this.wristBandType){case"points":this.pointsBand.alpha=1,this.wristbandTimeline=this.killTween(this.wristbandTimeline),this.wristbandTimeline=new TimelineMax,this.wristbandTimeline.add(TweenMax.to(this.blackCover,.5,{alpha:.7,ease:Power1.easeIn}),1),this.wristbandTimeline.add(TweenMax.to(this.pointsBand.scale,1,{x:1,y:1,ease:Elastic.easeOut}),1.5),this.wristbandTimeline.add(TweenMax.to(this.glow.scale,1,{x:1,y:1,ease:Elastic.easeOut}),1.5),this.wristbandTimeline.add(TweenMax.to(this.sparkle1.scale,1,{x:1,y:1,ease:Elastic.easeOut}),1.7),this.wristbandTimeline.add(TweenMax.to(this.sparkle2.scale,1,{x:1,y:1,ease:Elastic.easeOut}),1.4),this.wristbandTimeline.add([TweenMax.to(this.sparkle1,3,{rotation:2*Math.PI,repeat:-1,ease:Power0.easeIn}),TweenMax.to(this.sparkle2,4,{rotation:2*-Math.PI,repeat:-1,ease:Power0.easeIn})],0),this.wristbandTimeline.add([TweenMax.to(this.sparkle1.scale,.75,{x:5,y:5,ease:Back.easeInOut}),TweenMax.to(this.sparkle2.scale,.75,{x:5,y:5,ease:Back.easeInOut}),TweenMax.to(this.glow.scale,.75,{x:7,y:7,ease:Back.easeInOut}),TweenMax.to(this.pointsBand.scale,.75,{x:5,y:5,ease:Back.easeInOut}),TweenMax.to(this.sparkle1,.3,{alpha:0,delay:.5,ease:Power1.easeOut}),TweenMax.to(this.sparkle2,.3,{alpha:0,delay:.5,ease:Power1.easeOut}),TweenMax.to(this.glow,.3,{alpha:0,delay:.5,ease:Power1.easeOut}),TweenMax.to(this.pointsBand,.3,{alpha:0,delay:.5,ease:Power1.easeOut}),TweenMax.to(this.blackCover,.3,{alpha:0,delay:.5,ease:Power1.easeOut})],3),this.wristbandTimeline.call(function(){this.bandBurst.fire()},null,this,3.2),this.wristbandTimeline.call(function(){this.scoreNumber=2*this.currentScore,this.useWristBand=!1,this.addScore(16723759),this.game.ui.UIhud.useWristband()},null,this,4);break;case"tickets":this.ticketsBand.alpha=1,this.wristbandTimeline=this.killTween(this.wristbandTimeline),this.wristbandTimeline=new TimelineMax,this.wristbandTimeline.add(TweenMax.to(this.blackCover,.5,{alpha:.7,ease:Power1.easeIn}),1),this.wristbandTimeline.add(TweenMax.to(this.ticketsBand.scale,1,{x:1,y:1,ease:Elastic.easeOut}),1.5),this.wristbandTimeline.add(TweenMax.to(this.glow.scale,1,{x:1,y:1,ease:Elastic.easeOut}),1.5),this.wristbandTimeline.add(TweenMax.to(this.sparkle1.scale,1,{x:1,y:1,ease:Elastic.easeOut}),1.7),this.wristbandTimeline.add(TweenMax.to(this.sparkle2.scale,1,{x:1,y:1,ease:Elastic.easeOut}),1.4),this.wristbandTimeline.add([TweenMax.to(this.sparkle1,4,{rotation:2*Math.PI,repeat:-1,ease:Power0.easeIn}),TweenMax.to(this.sparkle2,5,{rotation:2*-Math.PI,repeat:-1,ease:Power0.easeIn})],0),this.wristbandTimeline.add([TweenMax.to(this.sparkle1.scale,.75,{x:5,y:5,ease:Back.easeInOut}),TweenMax.to(this.sparkle2.scale,.75,{x:5,y:5,ease:Back.easeInOut}),TweenMax.to(this.glow.scale,.75,{x:7,y:7,ease:Back.easeInOut}),TweenMax.to(this.ticketsBand.scale,.75,{x:5,y:5,ease:Back.easeInOut}),TweenMax.to(this.sparkle1,.3,{alpha:0,delay:.5,ease:Power1.easeOut}),TweenMax.to(this.sparkle2,.3,{alpha:0,delay:.5,ease:Power1.easeOut}),TweenMax.to(this.glow,.3,{alpha:0,delay:.5,ease:Power1.easeOut}),TweenMax.to(this.ticketsBand,.3,{alpha:0,delay:.5,ease:Power1.easeOut}),TweenMax.to(this.blackCover,.3,{alpha:0,delay:.5,ease:Power1.easeOut})],3),this.wristbandTimeline.call(function(){this.bandBurst.fire()},null,this,3.2),this.wristbandTimeline.call(function(){this.useWristBand=!1,Game.coreData.addTickets(this.currentTickets),this.addTickets(),this.game.ui.UIhud.useWristband()},null,this,4)}},t.prototype.checkIncrementScore=function(){1==this.addingScore&&this.incrementScore(),1==this.addingTickets&&this.incrementTickets()},t.prototype.uiClicked=function(t){if(e.prototype.uiClicked.call(this,t),1!=this.interactionLocked)switch(t.id){case"replaybuttonlarge":if(0==this.restartAllowed)return;this.restartAllowed=!1,this.interactionLocked=!0,Game.assetChunkManager.setCurrentGameId(Game.coreData.getCurrentRide().id),Game.assetChunkManager.generateLoadChunkParams("game"),this.game.setScene(Game.assetChunkManager.getTargetInitialScene(),!0);break;case"giftshop-button":this.interactionLocked=!0,Game.assetChunkManager.setCurrentGameId(Game.coreData.getCurrentRide().id),Game.assetChunkManager.generateLoadChunkParams("shop");var i=this;this.game.loadAssets(Game.assetChunkManager.getLoadAssets(),!0,function(){i.game.setScene(Game.assetChunkManager.getTargetInitialScene(),!0)})}},t.prototype.uiRolledOver=function(t){e.prototype.uiRolledOver.call(this,t)},t.prototype.tick=function(){e.prototype.tick.call(this),this.checkIncrementScore()},t.prototype.keyDown=function(e){},t.prototype.keyUp=function(e){},t.prototype.pause=function(t){0==t&&e.prototype.pause.call(this,t)},t.prototype.resume=function(){e.prototype.resume.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),Game.stopSound("game-over/swish-long-1.mp3"),Game.stopSound("game-over/swish-long-2.mp3"),Game.stopSound("game-over/swish-long-3.mp3"),Game.stopSound("ticket.mp3"),Game.stopSound("river-rangers/music.mp3"),Game.stopSound("beach-buggy/music.mp3"),Game.stopSound("roller-coaster-doom/music.mp3"),Game.stopSound("dodgems/music.mp3"),Game.stopSound("jet-ski/music.mp3"),Game.stopSound("pin-ball/music.mp3"),Game.stopSound("laser-cave/music.mp3"),Game.stopSound("roller-coaster-ice/music.mp3"),Game.stopSound("aqua-jetpack/music.mp3"),Game.stopSound("mayan-madness/music.mp3"),Game.stopSound("tree-top-gladiators/music.mp3"),Game.stopSound("tree-top-gladiators/background.mp3"),Game.stopSound("volcano-skydive/background-music.wav"),this.animation=this.killTween(this.animation),this.wristbandTimeline=this.killTween(this.wristbandTimeline),this.scoreCounter=this.killTween(this.scoreCounter),Game.displayStore.returnPooledItem(this.scoreHandBack),Game.displayStore.returnPooledItem(this.scoreHandFront),Game.displayStore.returnPooledItem(this.highScoreHandFront),Game.displayStore.returnPooledItem(this.highScoreHandBack),Game.displayStore.returnPooledItem(this.ticketHandBack),Game.displayStore.returnPooledItem(this.ticketHandFront),Game.displayStore.returnPooledItem(this.pointHand1),Game.displayStore.returnPooledItem(this.pointHand2),Game.displayStore.returnPooledItem(this.scorePanel),Game.displayStore.returnPooledItem(this.highScorePanel),Game.displayStore.returnPooledItem(this.ticketsPanel),this.confettiBurst.destroy(),this.bandBurst.destroy()},t}(Scene),DisplayStore=function(){function e(e){this.game=e,this.displayObjects=new Array,this.loadedIDs=new Array}return e.prototype.addSprite=function(e){this.displayObjects.push(e)},e.prototype.addContainer=function(e){this.displayObjects.push(e)},e.prototype.addButton=function(e){this.displayObjects.push(e)},e.prototype.addSpine=function(e){this.displayObjects.push(e)},e.prototype.addAnimatedSprite=function(e){this.displayObjects.push(e)},e.prototype.addBitmapText=function(e){this.displayObjects.push(e)},e.prototype.getSpine=function(e){return this.getItem(e)},e.prototype.getSprite=function(e,t){return this.getItem(e,!0)},e.prototype.getContainer=function(e){return this.getItem(e,!0)},e.prototype.getButton=function(e){return this.getItem(e)},e.prototype.getAnimatedSprite=function(e){return this.getItem(e,!0)},e.prototype.getBitmapText=function(e){return this.getItem(e,!0)},e.prototype.getRenderTexture=function(e,t,i,s,o){var a;a=1==o?PIXI.RenderTexture.create(t,i,PIXI.SCALE_MODES.LINEAR,1):PIXI.RenderTexture.create(t,i,PIXI.SCALE_MODES.LINEAR,this.game.pixelRatio);var r=new Sprite(a);return r.id=e,r.group=s,this.addSprite(r),{renderTexture:a,outputSprite:r}},e.prototype.isItemInDisplayStore=function(e){for(var t=0;t<this.displayObjects.length;t++)if(this.retrievedItem=this.displayObjects[t],this.retrievedItem.id==e)return this.retrievedItem},e.prototype.getItem=function(e,t){var i=!1;t&&(i=t);for(var s=!1,o=0;o<this.displayObjects.length;o++){if(this.retrievedItem=this.displayObjects[o],this.retrievedItem.id==e&&0==i&&(s=!0),this.retrievedItem.id==e&&1==i&&0==this.retrievedItem.pooled&&(s=!0),this.retrievedItem.id==e&&1==i&&1==this.retrievedItem.pooled&&0==this.retrievedItem.pooledActive&&(s=!0,this.retrievedItem.pooledActive=!0),1==s)return this.retrievedItem.scale.x=1,this.retrievedItem.scale.y=1,this.retrievedItem.rotation=0,"number"==typeof this.retrievedItem.origX&&(this.retrievedItem.position.x=this.retrievedItem.origX),"number"==typeof this.retrievedItem.origY&&(this.retrievedItem.position.y=this.retrievedItem.origY),this.retrievedItem.origAnchor&&("number"==typeof this.retrievedItem.origAnchor.x&&(this.retrievedItem.anchor.x=this.retrievedItem.origAnchor.x),"number"==typeof this.retrievedItem.origAnchor.y&&(this.retrievedItem.anchor.y=this.retrievedItem.origAnchor.y)),this.retrievedItem.origPivot&&("number"==typeof this.retrievedItem.origPivot.x&&(this.retrievedItem.pivot.x=this.retrievedItem.origPivot.x),"number"==typeof this.retrievedItem.origPivot.y&&(this.retrievedItem.pivot.y=this.retrievedItem.origPivot.y)),"boolean"==typeof this.retrievedItem.defaultAnchor&&0==this.retrievedItem.defaultAnchor&&this.retrievedItem.setRegPoint(this.retrievedItem.origAnchor.x,this.retrievedItem.origAnchor.y,this.retrievedItem.origAnchor.compensate),"boolean"==typeof this.retrievedItem.defaultPivot&&0==this.retrievedItem.defaultPivot&&this.retrievedItem.setRegPoint(this.retrievedItem.origPivot.x,this.retrievedItem.origPivot.y,this.retrievedItem.origPivot.compensate),this.retrievedItem;if(o==this.displayObjects.length-1&&this.displayObjects[o].id!=e)throw new ReferenceError("Ooops! Can't find sprite with ID: "+e)}},e.prototype.returnPooledItem=function(e){for(var t=e,i=0;i<this.displayObjects.length;i++)if(t==this.displayObjects[i]&&1==t.pooled&&1==t.pooledActive&&t.pooledUniqueID==this.displayObjects[i].pooledUniqueID)return void(this.displayObjects[i].pooledActive=!1)},e.prototype.flush=function(e){for(var t=0;t<e.length;t++)for(var i=this.displayObjects.length-1;i>=0;i--){if(!this.displayObjects[i].group)throw new ReferenceError("Oops! Trying to flush an item with no 'group' ID. Example: You're using a RenderTexture to make a sprite but haven't added a 'group' ID to the Sprite..");if(this.displayObjects[i].group==e[t]&&0==this.displayObjects[i].neverFlush){var s=this.displayObjects.splice(i,1);s[0].disposeAssets(),s[0].destroy(),s[0]=null,s=null}}},e.prototype.checkTextureDeletable=function(e){for(var t=0;t<this.displayObjects.length;t++)if(this.displayObjects[t].items){if(0==this.checkItemsChildrenForTexture(this.displayObjects[t],e))return!1}else if(this.displayObjects[t].textureURL&&this.displayObjects[t].textureURL==e.textureURL&&this.displayObjects[t].group!=e.group)return!1;return!0},e.prototype.checkItemsChildrenForTexture=function(e,t){for(var i in e.items)if(e.items[i].items){if(0==this.checkItemsChildrenForTexture(e.items[i],t))return!1}else if(e.items[i].textureURL&&e.items[i].textureURL==t.textureURL&&e.items[i].group!=t.group)return!1;return!0},e.prototype.listGroupsLoaded=function(){for(var e=new Array,t=0;t<this.displayObjects.length;t++)0==this.checkExists(this.displayObjects[t].group,e)&&e.push(this.displayObjects[t].group);for(t=0;t<e.length;t++)console.log("Members of this group are loaded: ",e[t])},e.prototype.checkExists=function(e,t){var i=!1;if(0==t.length)return i;for(var s=0;s<t.length;s++)if(t[s]==e){i=!0;break}return i},e.prototype.listAssetsLoaded=function(){for(var e=0;e<this.displayObjects.length;e++)console.log("Asset loaded: ",this.displayObjects[e].id," - From group: ",this.displayObjects[e].group,this.displayObjects[e].pooledActive)},e}();