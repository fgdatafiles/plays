/** Cooked with Flambe, https://getflambe.com */
'use strict';
(function() {
    function k(a, b) {
        function c() {} c.prototype = a; var d = new c,
            e; for (e in b) d[e] = b[e];
        b.toString !== Object.prototype.toString && (d.toString = b.toString); return d }

    function Bn(a) { return a instanceof Array ? function() { return H.iter(a) } : "function" == typeof a.iterator ? m(a, a.iterator) : a.iterator }

    function m(a, b) {
        if (null == b) return null;
        null == b.__id__ && (b.__id__ = po++);
        var c;
        null == a.hx__closures__ ? a.hx__closures__ = {} : c = a.hx__closures__[b.__id__];
        null == c && (c = function() {
            return c.method.apply(c.scope,
                arguments)
        }, c.scope = a, c.method = b, a.hx__closures__[b.__id__] = c);
        return c
    }
    var g = {},
        s = function() { return I.__string_rec(this, "") },
        Uc = function(a, b) { b = b.split("u").join("");
            this.r = RegExp(a, b) };
    g.EReg = Uc;
    Uc.__name__ = ["EReg"];
    Uc.prototype = {
        match: function(a) { this.r.global && (this.r.lastIndex = 0);
            this.r.m = this.r.exec(a);
            this.r.s = a; return null != this.r.m },
        matched: function(a) { if (null != this.r.m && 0 <= a && a < this.r.m.length) return this.r.m[a]; throw "EReg::matched"; },
        matchedPos: function() {
            if (null == this.r.m) throw "No string matched";
            return { pos: this.r.m.index, len: this.r.m[0].length }
        },
        split: function(a) { return a.replace(this.r, "#__delim__#").split("#__delim__#") },
        replace: function(a, b) { return a.replace(this.r, b) },
        __class__: Uc
    };
    var H = function() {};
    g.HxOverrides = H;
    H.__name__ = ["HxOverrides"];
    H.dateStr = function(a) { var b = a.getMonth() + 1,
            c = a.getDate(),
            d = a.getHours(),
            e = a.getMinutes(),
            f = a.getSeconds(); return a.getFullYear() + "-" + (10 > b ? "0" + b : "" + b) + "-" + (10 > c ? "0" + c : "" + c) + " " + (10 > d ? "0" + d : "" + d) + ":" + (10 > e ? "0" + e : "" + e) + ":" + (10 > f ? "0" + f : "" + f) };
    H.strDate =
        function(a) { switch (a.length) {
                case 8:
                    var a = a.split(":"),
                        b = new Date;
                    b.setTime(0);
                    b.setUTCHours(a[0]);
                    b.setUTCMinutes(a[1]);
                    b.setUTCSeconds(a[2]); return b;
                case 10:
                    return a = a.split("-"), new Date(a[0], a[1] - 1, a[2], 0, 0, 0);
                case 19:
                    return b = a.split(" "), a = b[0].split("-"), b = b[1].split(":"), new Date(a[0], a[1] - 1, a[2], b[0], b[1], b[2]);
                default:
                    throw "Invalid date format : " + a; } };
    H.cca = function(a, b) { var c = a.charCodeAt(b); return c != c ? void 0 : c };
    H.substr = function(a, b, c) {
        if (null != b && 0 != b && null != c && 0 > c) return "";
        null ==
            c && (c = a.length);
        0 > b ? (b = a.length + b, 0 > b && (b = 0)) : 0 > c && (c = a.length + c - b);
        return a.substr(b, c)
    };
    H.remove = function(a, b) { var c = a.indexOf(b); if (-1 == c) return !1;
        a.splice(c, 1); return !0 };
    H.iter = function(a) { return { cur: 0, arr: a, hasNext: function() { return this.cur < this.arr.length }, next: function() { return this.arr[this.cur++] } } };
    var pf = function() {};
    g.Lambda = pf;
    pf.__name__ = ["Lambda"];
    pf.array = function(a) { for (var b = [], a = Bn(a)(); a.hasNext();) { var c = a.next();
            b.push(c) } return b };
    pf.exists = function(a, b) {
        for (var c = Bn(a)(); c.hasNext();) {
            var d =
                c.next();
            if (b(d)) return !0
        }
        return !1
    };
    pf.count = function(a, b) { var c = 0; if (null == b)
            for (var d = Bn(a)(); d.hasNext();) d.next(), c++;
        else
            for (d = Bn(a)(); d.hasNext();) { var e = d.next();
                b(e) && c++ }
        return c };
    var ce = function() { this.length = 0 };
    g.List = ce;
    ce.__name__ = ["List"];
    ce.prototype = {
        add: function(a) { a = [a];
            null == this.h ? this.h = a : this.q[1] = a;
            this.q = a;
            this.length++ },
        push: function(a) { this.h = a = [a, this.h];
            null == this.q && (this.q = a);
            this.length++ },
        pop: function() {
            if (null == this.h) return null;
            var a = this.h[0];
            this.h = this.h[1];
            null == this.h && (this.q = null);
            this.length--;
            return a
        },
        iterator: function() { return { h: this.h, hasNext: function() { return null != this.h }, next: function() { if (null == this.h) return null; var a = this.h[0];
                    this.h = this.h[1]; return a } } },
        __class__: ce
    };
    var Gg = function() {};
    g.IMap = Gg;
    Gg.__name__ = ["IMap"];
    Gg.prototype = { __class__: Gg };
    Math.__name__ = ["Math"];
    var z = function() {};
    g.Reflect = z;
    z.__name__ = ["Reflect"];
    z.field = function(a, b) { try { return a[b] } catch (c) { return null } };
    z.setField = function(a, b, c) { a[b] = c };
    z.getProperty = function(a,
        b) { var c; return null == a ? null : a.__properties__ && (c = a.__properties__["get_" + b]) ? a[c]() : a[b] };
    z.setProperty = function(a, b, c) { var d; if (a.__properties__ && (d = a.__properties__["set_" + b])) a[d](c);
        else a[b] = c };
    z.fields = function(a) { var b = []; if (null != a) { var c = Object.prototype.hasOwnProperty,
                d; for (d in a) "__id__" != d && "hx__closures__" != d && c.call(a, d) && b.push(d) } return b };
    z.isFunction = function(a) { return "function" == typeof a && !(a.__name__ || a.__ename__) };
    z.deleteField = function(a, b) {
        if (!Object.prototype.hasOwnProperty.call(a,
                b)) return !1;
        delete a[b];
        return !0
    };
    var y = function() {};
    g.Std = y;
    y.__name__ = ["Std"];
    y.is = function(a, b) { return I.__instanceof(a, b) };
    y.instance = function(a, b) { return a instanceof b ? a : null };
    y.string = function(a) { return I.__string_rec(a, "") };
    y["int"] = function(a) { return a | 0 };
    y.parseInt = function(a) { var b = parseInt(a, 10); if (0 == b && (120 == H.cca(a, 1) || 88 == H.cca(a, 1))) b = parseInt(a); return isNaN(b) ? null : b };
    y.parseFloat = function(a) { return parseFloat(a) };
    var Oe = function() { this.b = "" };
    g.StringBuf = Oe;
    Oe.__name__ = ["StringBuf"];
    Oe.prototype = { add: function(a) { this.b += y.string(a) }, addSub: function(a, b, c) { this.b = null == c ? this.b + H.substr(a, b, null) : this.b + H.substr(a, b, c) }, __class__: Oe };
    var ma = function() {};
    g.StringTools = ma;
    ma.__name__ = ["StringTools"];
    ma.startsWith = function(a, b) { return a.length >= b.length && H.substr(a, 0, b.length) == b };
    ma.isSpace = function(a, b) { var c = H.cca(a, b); return 8 < c && 14 > c || 32 == c };
    ma.ltrim = function(a) { for (var b = a.length, c = 0; c < b && ma.isSpace(a, c);) c++; return 0 < c ? H.substr(a, c, b - c) : a };
    ma.rtrim = function(a) {
        for (var b = a.length,
                c = 0; c < b && ma.isSpace(a, b - c - 1);) c++;
        return 0 < c ? H.substr(a, 0, b - c) : a
    };
    ma.trim = function(a) { return ma.ltrim(ma.rtrim(a)) };
    ma.lpad = function(a, b, c) { if (0 >= b.length) return a; for (; a.length < c;) a = b + a; return a };
    ma.replace = function(a, b, c) { return a.split(b).join(c) };
    ma.fastCodeAt = function(a, b) { return a.charCodeAt(b) };
    var P = g.ValueType = { __ename__: ["ValueType"], __constructs__: "TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",") };
    P.TNull = ["TNull", 0];
    P.TNull.toString = s;
    P.TNull.__enum__ = P;
    P.TInt = ["TInt", 1];
    P.TInt.toString = s;
    P.TInt.__enum__ = P;
    P.TFloat = ["TFloat", 2];
    P.TFloat.toString = s;
    P.TFloat.__enum__ = P;
    P.TBool = ["TBool", 3];
    P.TBool.toString = s;
    P.TBool.__enum__ = P;
    P.TObject = ["TObject", 4];
    P.TObject.toString = s;
    P.TObject.__enum__ = P;
    P.TFunction = ["TFunction", 5];
    P.TFunction.toString = s;
    P.TFunction.__enum__ = P;
    P.TClass = function(a) { a = ["TClass", 6, a];
        a.__enum__ = P;
        a.toString = s; return a };
    P.TEnum = function(a) { a = ["TEnum", 7, a];
        a.__enum__ = P;
        a.toString = s; return a };
    P.TUnknown = ["TUnknown", 8];
    P.TUnknown.toString = s;
    P.TUnknown.__enum__ = P;
    var ia = function() {};
    g.Type = ia;
    ia.__name__ = ["Type"];
    ia.getClass = function(a) { return null == a ? null : a instanceof Array && null == a.__enum__ ? Array : a.__class__ };
    ia.getClassName = function(a) { return a.__name__.join(".") };
    ia.getEnumName = function(a) { return a.__ename__.join(".") };
    ia.resolveClass = function(a) { a = g[a]; return null == a || !a.__name__ ? null : a };
    ia.resolveEnum = function(a) { a = g[a]; return null == a || !a.__ename__ ? null : a };
    ia.createInstance = function(a, b) {
        switch (b.length) {
            case 0:
                return new a;
            case 1:
                return new a(b[0]);
            case 2:
                return new a(b[0], b[1]);
            case 3:
                return new a(b[0], b[1], b[2]);
            case 4:
                return new a(b[0], b[1], b[2], b[3]);
            case 5:
                return new a(b[0], b[1], b[2], b[3], b[4]);
            case 6:
                return new a(b[0], b[1], b[2], b[3], b[4], b[5]);
            case 7:
                return new a(b[0], b[1], b[2], b[3], b[4], b[5], b[6]);
            case 8:
                return new a(b[0], b[1], b[2], b[3], b[4], b[5], b[6], b[7]);
            default:
                throw "Too many arguments";
        }
    };
    ia.createEmptyInstance = function(a) {
        function b() {} b.prototype = a.prototype; return new b };
    ia.createEnum = function(a, b, c) {
        var d = z.field(a, b);
        if (null ==
            d) throw "No such constructor " + b;
        if (z.isFunction(d)) { if (null == c) throw "Constructor " + b + " need parameters"; return d.apply(a, c) }
        if (null != c && 0 != c.length) throw "Constructor " + b + " does not need parameters";
        return d
    };
    ia.getEnumConstructs = function(a) { return a.__constructs__.slice() };
    ia["typeof"] = function(a) {
        switch (typeof a) {
            case "boolean":
                return P.TBool;
            case "string":
                return P.TClass(String);
            case "number":
                return Math.ceil(a) == a % 2147483648 ? P.TInt : P.TFloat;
            case "object":
                if (null == a) return P.TNull;
                var b = a.__enum__;
                if (null != b) return P.TEnum(b);
                a = a instanceof Array && null == a.__enum__ ? Array : a.__class__;
                return null != a ? P.TClass(a) : P.TObject;
            case "function":
                return a.__name__ || a.__ename__ ? P.TObject : P.TFunction;
            case "undefined":
                return P.TNull;
            default:
                return P.TUnknown
        }
    };
    ia.enumEq = function(a, b) { if (a == b) return !0; try { if (a[0] != b[0]) return !1; for (var c = 2, d = a.length; c < d;) { var e = c++; if (!ia.enumEq(a[e], b[e])) return !1 } var f = a.__enum__; if (f != b.__enum__ || null == f) return !1 } catch (l) { return !1 } return !0 };
    ia.enumIndex = function(a) { return a[1] };
    g.XmlType = { __ename__: ["XmlType"], __constructs__: [] };
    var R = function() {};
    g.Xml = R;
    R.__name__ = ["Xml"];
    R.parse = function(a) { return Pe.parse(a) };
    R.createElement = function(a) { var b = new R;
        b.nodeType = R.Element;
        b._children = [];
        b._attributes = new M;
        b.set_nodeName(a); return b };
    R.createPCData = function(a) { var b = new R;
        b.nodeType = R.PCData;
        b.set_nodeValue(a); return b };
    R.createCData = function(a) { var b = new R;
        b.nodeType = R.CData;
        b.set_nodeValue(a); return b };
    R.createComment = function(a) {
        var b = new R;
        b.nodeType = R.Comment;
        b.set_nodeValue(a);
        return b
    };
    R.createDocType = function(a) { var b = new R;
        b.nodeType = R.DocType;
        b.set_nodeValue(a); return b };
    R.createProcessingInstruction = function(a) { var b = new R;
        b.nodeType = R.ProcessingInstruction;
        b.set_nodeValue(a); return b };
    R.createDocument = function() { var a = new R;
        a.nodeType = R.Document;
        a._children = []; return a };
    R.prototype = {
        get_nodeName: function() { if (this.nodeType != R.Element) throw "bad nodeType"; return this._nodeName },
        set_nodeName: function(a) {
            if (this.nodeType != R.Element) throw "bad nodeType";
            return this._nodeName =
                a
        },
        get_nodeValue: function() { if (this.nodeType == R.Element || this.nodeType == R.Document) throw "bad nodeType"; return this._nodeValue },
        set_nodeValue: function(a) { if (this.nodeType == R.Element || this.nodeType == R.Document) throw "bad nodeType"; return this._nodeValue = a },
        get: function(a) { if (this.nodeType != R.Element) throw "bad nodeType"; return this._attributes.get(a) },
        set: function(a, b) { if (this.nodeType != R.Element) throw "bad nodeType";
            this._attributes.set(a, b) },
        exists: function(a) {
            if (this.nodeType != R.Element) throw "bad nodeType";
            return this._attributes.exists(a)
        },
        iterator: function() { if (null == this._children) throw "bad nodetype"; return { cur: 0, x: this._children, hasNext: function() { return this.cur < this.x.length }, next: function() { return this.x[this.cur++] } } },
        elementsNamed: function(a) {
            if (null == this._children) throw "bad nodetype";
            return {
                cur: 0,
                x: this._children,
                hasNext: function() { for (var b = this.cur, c = this.x.length; b < c;) { var d = this.x[b]; if (d.nodeType == R.Element && d._nodeName == a) break;
                        b++ } this.cur = b; return b < c },
                next: function() {
                    for (var b = this.cur,
                            c = this.x.length; b < c;) { var d = this.x[b];
                        b++; if (d.nodeType == R.Element && d._nodeName == a) return this.cur = b, d }
                    return null
                }
            }
        },
        firstElement: function() { if (null == this._children) throw "bad nodetype"; for (var a = 0, b = this._children.length; a < b;) { var c = this._children[a]; if (c.nodeType == R.Element) return c;
                a++ } return null },
        addChild: function(a) { if (null == this._children) throw "bad nodetype";
            null != a._parent && H.remove(a._parent._children, a);
            a._parent = this;
            this._children.push(a) },
        __class__: R,
        __properties__: {
            set_nodeValue: "set_nodeValue",
            get_nodeValue: "get_nodeValue",
            set_nodeName: "set_nodeName",
            get_nodeName: "get_nodeName"
        }
    };
    var Fc = function() {};
    g["flambe.util.Disposable"] = Fc;
    Fc.__name__ = ["flambe", "util", "Disposable"];
    Fc.prototype = { __class__: Fc };
    var i = function() { this._flags = 0;
        this.owner = this.next = null };
    g["flambe.Component"] = i;
    i.__name__ = ["flambe", "Component"];
    i.__interfaces__ = [Fc];
    i.prototype = {
        onAdded: function() {},
        onRemoved: function() {},
        onStart: function() {},
        onStop: function() {},
        onUpdate: function() {},
        dispose: function() {
            null != this.owner &&
                this.owner.remove(this)
        },
        get_name: function() { return null },
        __class__: i,
        __properties__: { get_name: "get_name" }
    };
    var za = function() { i.call(this);
        this._disposables = [] };
    g["flambe.Disposer"] = za;
    za.__name__ = ["flambe", "Disposer"];
    za.__super__ = i;
    za.prototype = k(i.prototype, {
        get_name: function() { return "Disposer_72" },
        add: function(a) { this._disposables.push(a); return this },
        connect0: function(a, b) { this.add(a.connect(b)); return this },
        connect1: function(a, b) { this.add(a.connect(b)); return this },
        onRemoved: function() { this.freeDisposables() },
        dispose: function() { i.prototype.dispose.call(this);
            this.freeDisposables() },
        freeDisposables: function() { var a = this._disposables;
            this._disposables = []; for (var b = 0; b < a.length;) { var c = a[b];++b;
                c.dispose() } },
        __class__: za
    });
    var p = function() { this.parent = this.firstChild = this.next = this.firstComponent = null;
        this._compMap = {} };
    g["flambe.Entity"] = p;
    p.__name__ = ["flambe", "Entity"];
    p.__interfaces__ = [Fc];
    p.prototype = {
        add: function(a) {
            null != a.owner && a.owner.remove(a);
            var b = a.get_name(),
                c = this._compMap[b];
            null != c && this.remove(c);
            this._compMap[b] = a;
            b = null;
            for (c = this.firstComponent; null != c;) b = c, c = c.next;
            null != b ? b.next = a : this.firstComponent = a;
            a.owner = this;
            a.next = null;
            a.onAdded();
            return this
        },
        remove: function(a) { for (var b = null, c = this.firstComponent; null != c;) { var d = c.next; if (c == a) return null == b ? this.firstComponent = d : (b.owner = this, b.next = d), delete this._compMap[c.get_name()], 0 != (c._flags & 1) && (c.onStop(), c._flags &= -2), c.onRemoved(), c.owner = null, c.next = null, !0;
                b = c;
                c = d } return !1 },
        getComponent: function(a) { return this._compMap[a] },
        addChild: function(a,
            b) { null == b && (b = !0);
            null != a.parent && a.parent.removeChild(a);
            a.parent = this; if (b) { for (var c = null, d = this.firstChild; null != d;) c = d, d = d.next;
                null != c ? c.next = a : this.firstChild = a } else a.next = this.firstChild, this.firstChild = a; return this },
        removeChild: function(a) { for (var b = null, c = this.firstChild; null != c;) { var d = c.next; if (c == a) { null == b ? this.firstChild = d : b.next = d;
                    c.parent = null;
                    c.next = null; break } b = c;
                c = d } },
        disposeChildren: function() { for (; null != this.firstChild;) this.firstChild.dispose() },
        dispose: function() {
            for (null !=
                this.parent && this.parent.removeChild(this); null != this.firstComponent;) this.firstComponent.dispose();
            this.disposeChildren()
        },
        _internal_getFromParents: function(a, b) { var c = this;
            do { var d = c._compMap[a];
                null != b && !(d instanceof b) && (d = null); if (null != d) return d;
                c = c.parent } while (null != c); return null },
        _internal_getFromChildren: function(a, b) {
            var c = this._compMap[a];
            null != b && !(c instanceof b) && (c = null);
            if (null != c) return c;
            for (c = this.firstChild; null != c;) {
                var d = c._internal_getFromChildren(a, b);
                if (null != d) return d;
                c = c.next
            }
            return null
        },
        __class__: p
    };
    var Cn = function() {};
    g["flambe.util.PackageLog"] = Cn;
    Cn.__name__ = ["flambe", "util", "PackageLog"];
    var Sl = function() {};
    g["flambe.platform.Platform"] = Sl;
    Sl.__name__ = ["flambe", "platform", "Platform"];
    Sl.prototype = { __class__: Sl };
    var Bb = function() {};
    g["flambe.platform.html.HtmlPlatform"] = Bb;
    Bb.__name__ = ["flambe", "platform", "html", "HtmlPlatform"];
    Bb.__interfaces__ = [Sl];
    Bb.prototype = {
        init: function() {
            var a = this;
            ea.fixAndroidMath();
            var b = null;
            try { b = window.flambe.canvas } catch (c) {} b.setAttribute("tabindex",
                "0");
            b.style.outlineStyle = "none";
            b.style.webkitTapHighlightColor = "transparent";
            b.setAttribute("moz-opaque", "true");
            this._stage = new Hg(b);
            this._pointer = new Zb;
            this._mouse = new Rh(this._pointer, b);
            this._renderer = this.createRenderer(b);
            this.mainLoop = new Sf;
            this.musicPlaying = !1;
            this._canvas = b;
            this._container = b.parentElement;
            this._container.style.overflow = "hidden";
            this._container.style.position = "relative";
            this._container.style.msTouchAction = "none";
            var d = 0,
                e = function(c) {
                    if (!(1E3 > c.timeStamp - d)) {
                        var e = b.getBoundingClientRect(),
                            f = a.getX(c, e),
                            e = a.getY(c, e);
                        switch (c.type) {
                            case "mousedown":
                                c.target == b && (c.preventDefault(), a._mouse.submitDown(f, e, c.button), b.focus()); break;
                            case "mousemove":
                                a._mouse.submitMove(f, e); break;
                            case "mouseup":
                                a._mouse.submitUp(f, e, c.button); break;
                            case "mousewheel":
                            case "DOMMouseScroll":
                                a._mouse.submitScroll(f, e, "mousewheel" == c.type ? c.wheelDelta / 40 : -c.detail) && c.preventDefault() }
                    }
                };
            window.addEventListener("mousedown", e, !1);
            window.addEventListener("mousemove", e, !1);
            window.addEventListener("mouseup", e,
                !1);
            b.addEventListener("mousewheel", e, !1);
            b.addEventListener("DOMMouseScroll", e, !1);
            b.addEventListener("contextmenu", function(a) { a.preventDefault() }, !1);
            var f = "undefined" != typeof window.ontouchstart,
                e = "msMaxTouchPoints" in window.navigator && 1 < window.navigator.msMaxTouchPoints;
            if (f || e) {
                var l = new Sh(this._pointer, f ? 4 : window.navigator.msMaxTouchPoints);
                this._touch = l;
                e = function(b) {
                    var c;
                    c = f ? b.changedTouches : [b];
                    var e = b.target.getBoundingClientRect();
                    d = b.timeStamp;
                    switch (b.type) {
                        case "touchstart":
                        case "MSPointerDown":
                        case "pointerdown":
                            b.preventDefault();
                            ea.SHOULD_HIDE_MOBILE_BROWSER && ea.hideMobileBrowser();
                            for (b = 0; b < c.length;) { var v = c[b];++b; var pb = a.getX(v, e),
                                    h = a.getY(v, e);
                                l.submitDown((f ? v.identifier : v.pointerId) | 0, pb, h) }
                            break;
                        case "touchmove":
                        case "MSPointerMove":
                        case "pointermove":
                            b.preventDefault();
                            for (b = 0; b < c.length;) v = c[b], ++b, pb = a.getX(v, e), h = a.getY(v, e), l.submitMove((f ? v.identifier : v.pointerId) | 0, pb, h);
                            break;
                        case "touchend":
                        case "touchcancel":
                        case "MSPointerUp":
                        case "pointerup":
                            for (b = 0; b < c.length;) v = c[b], ++b, pb = a.getX(v, e), h = a.getY(v, e),
                                l.submitUp((f ? v.identifier : v.pointerId) | 0, pb, h)
                    }
                };
                f ? (b.addEventListener("touchstart", e, !1), b.addEventListener("touchmove", e, !1), b.addEventListener("touchend", e, !1), b.addEventListener("touchcancel", e, !1)) : (b.addEventListener("MSPointerDown", e, !1), b.addEventListener("MSPointerMove", e, !1), b.addEventListener("MSPointerUp", e, !1))
            } else this._touch = new Th;
            var v = window.onerror;
            window.onerror = function(a, b, c) { x.uncaughtError.emit(a); return null != v ? v(a, b, c) : !1 };
            var pb = ea.loadExtension("hidden", window.document);
            null != pb.value ? (e = function() { x.hidden.set__(z.field(window.document, pb.field)) }, e(null), window.document.addEventListener(pb.prefix + "visibilitychange", e, !1)) : (e = function(a) { x.hidden.set__("pagehide" == a.type) }, window.addEventListener("pageshow", e, !1), window.addEventListener("pagehide", e, !1));
            x.hidden.get_changed().connect(function(b) { b || (a._skipFrame = !0) });
            this._skipFrame = !1;
            this._lastUpdate = Date.now();
            var h = ea.loadExtension("requestAnimationFrame").value;
            if (null != h) {
                var g = window.performance,
                    i = null !=
                    g && ea.polyfill("now", g);
                i ? this._lastUpdate = g.now() : null;
                var j = null,
                    j = function(c) { a.update(i ? g.now() : c);
                        h(j, b) };
                h(j, b)
            } else window.setInterval(function() { a.update(Date.now()) }, 16);
            Ig.info("Initialized HTML platform", ["renderer", this._renderer.get_type()])
        },
        loadAssetPack: function(a) { return (new Da(this, a)).promise },
        getStage: function() { return this._stage },
        getStorage: function() { if (null == this._storage) { var a = Uh.getLocalStorage();
                this._storage = null != a ? new Vh(a) : new Wh } return this._storage },
        getLocale: function() {
            var a =
                window.navigator.language;
            null == a && (a = window.navigator.userLanguage);
            return a
        },
        getTime: function() { return Date.now() / 1E3 },
        update: function(a) { var b = (a - this._lastUpdate) / 1E3;
            this._lastUpdate = a;
            x.hidden._value || (this._skipFrame ? this._skipFrame = !1 : (this.mainLoop.update(b), this.mainLoop.render(this._renderer))) },
        getPointer: function() { return this._pointer },
        getMouse: function() { return this._mouse },
        getTouch: function() { return this._touch },
        getKeyboard: function() {
            var a = this;
            if (null == this._keyboard) {
                this._keyboard =
                    new Bd;
                var b = function(b) { switch (b.type) {
                        case "keydown":
                            a._keyboard.submitDown(b.keyCode) && b.preventDefault(); break;
                        case "keyup":
                            a._keyboard.submitUp(b.keyCode) } };
                this._canvas.addEventListener("keydown", b, !1);
                this._canvas.addEventListener("keyup", b, !1)
            }
            return this._keyboard
        },
        getExternal: function() { null == this._external && (this._external = new Xh); return this._external },
        getRenderer: function() { return this._renderer },
        getX: function(a, b) { return (a.clientX - b.left) * this._stage.get_width() / b.width },
        getY: function(a,
            b) { return (a.clientY - b.top) * this._stage.get_height() / b.height },
        createRenderer: function(a) { try { var b = Dn.getContextWebGL(a, { alpha: !1, depth: !1, failIfMajorPerformanceCaveat: !0 }); if (null != b)
                    if (ea.detectSlowDriver(b)) null;
                    else return new Yh(this._stage, b) } catch (c) {} return new Tf(a) },
        __class__: Bb
    };
    var $b = function(a, b) { this._value = a;
        this._changed = null != b ? new Lb(b) : null };
    g["flambe.util.Value"] = $b;
    $b.__name__ = ["flambe", "util", "Value"];
    $b.prototype = {
        watch: function(a) { a(this._value, this._value); return this.get_changed().connect(a) },
        get__: function() { return this._value },
        set__: function(a) { var b = this._value;
            a != b && (this._value = a, null != this._changed && this._changed.emit(a, b)); return a },
        get_changed: function() { null == this._changed && (this._changed = new Lb); return this._changed },
        __class__: $b,
        __properties__: { get_changed: "get_changed", set__: "set__", get__: "get__" }
    };
    var Uf = function(a, b) { this._next = null;
        this._signal = a;
        this._listener = b;
        this.stayInList = !0 };
    g["flambe.util.SignalConnection"] = Uf;
    Uf.__name__ = ["flambe", "util", "SignalConnection"];
    Uf.__interfaces__ = [Fc];
    Uf.prototype = { once: function() { this.stayInList = !1; return this }, dispose: function() { null != this._signal && (this._signal.disconnect(this), this._signal = null) }, __class__: Uf };
    var Mb = function(a) { this._head = null != a ? new Uf(this, a) : null;
        this._deferredTasks = null };
    g["flambe.util.SignalBase"] = Mb;
    Mb.__name__ = ["flambe", "util", "SignalBase"];
    Mb.prototype = {
        connectImpl: function(a, b) { var c = this,
                d = new Uf(this, a);
            this._head == Mb.DISPATCHING_SENTINEL ? this.defer(function() { c.listAdd(d, b) }) : this.listAdd(d, b); return d },
        disconnect: function(a) {
            var b =
                this;
            this._head == Mb.DISPATCHING_SENTINEL ? this.defer(function() { b.listRemove(a) }) : this.listRemove(a)
        },
        defer: function(a) { for (var b = null, c = this._deferredTasks; null != c;) b = c, c = c.next;
            a = new Tl(a);
            null != b ? b.next = a : this._deferredTasks = a },
        willEmit: function() { var a = this._head;
            this._head = Mb.DISPATCHING_SENTINEL; return a },
        didEmit: function(a) { this._head = a;
            a = this._deferredTasks; for (this._deferredTasks = null; null != a;) a.fn(), a = a.next },
        listAdd: function(a, b) {
            if (b) a._next = this._head, this._head = a;
            else {
                for (var c = null,
                        d = this._head; null != d;) c = d, d = d._next;
                null != c ? c._next = a : this._head = a
            }
        },
        listRemove: function(a) { for (var b = null, c = this._head; null != c;) { if (c == a) { a = c._next;
                    null == b ? this._head = a : b._next = a; break } b = c;
                c = c._next } },
        __class__: Mb
    };
    var Lb = function(a) { Mb.call(this, a) };
    g["flambe.util.Signal2"] = Lb;
    Lb.__name__ = ["flambe", "util", "Signal2"];
    Lb.__super__ = Mb;
    Lb.prototype = k(Mb.prototype, {
        connect: function(a, b) { null == b && (b = !1); return this.connectImpl(a, b) },
        emit: function(a, b) {
            var c = this;
            this._head == Mb.DISPATCHING_SENTINEL ? this.defer(function() {
                c.emitImpl(a,
                    b)
            }) : this.emitImpl(a, b)
        },
        emitImpl: function(a, b) { for (var c = this.willEmit(), d = c; null != d;) d._listener(a, b), d.stayInList || d.dispose(), d = d._next;
            this.didEmit(c) },
        __class__: Lb
    });
    var S = function(a) { Mb.call(this, a) };
    g["flambe.util.Signal1"] = S;
    S.__name__ = ["flambe", "util", "Signal1"];
    S.__super__ = Mb;
    S.prototype = k(Mb.prototype, {
        connect: function(a, b) { null == b && (b = !1); return this.connectImpl(a, b) },
        emit: function(a) { var b = this;
            this._head == Mb.DISPATCHING_SENTINEL ? this.defer(function() { b.emitImpl(a) }) : this.emitImpl(a) },
        emitImpl: function(a) { for (var b = this.willEmit(), c = b; null != c;) c._listener(a), c.stayInList || c.dispose(), c = c._next;
            this.didEmit(b) },
        __class__: S
    });
    var ca = function(a, b) { this._behavior = null;
        $b.call(this, a, b) };
    g["flambe.animation.AnimatedFloat"] = ca;
    ca.__name__ = ["flambe", "animation", "AnimatedFloat"];
    ca.__super__ = $b;
    ca.prototype = k($b.prototype, {
        set__: function(a) { this._behavior = null; return $b.prototype.set__.call(this, a) },
        update: function(a) {
            null != this._behavior && ($b.prototype.set__.call(this, this._behavior.update(a)),
                this._behavior.isComplete() && (this._behavior = null))
        },
        animateTo: function(a, b, c) { this.set_behavior(new Jg(this._value, a, b, c)) },
        set_behavior: function(a) { this._behavior = a;
            this.update(0); return a },
        __class__: ca,
        __properties__: k($b.prototype.__properties__, { set_behavior: "set_behavior" })
    });
    var x = function() {};
    g["flambe.System"] = x;
    x.__name__ = ["flambe", "System"];
    x.init = function() { x._calledInit || (x._platform.init(), x._calledInit = !0) };
    var Ig = function() {};
    g["flambe.Log"] = Ig;
    Ig.__name__ = ["flambe", "Log"];
    Ig.info =
        function() { null };
    Ig.__super__ = Cn;
    Ig.prototype = k(Cn.prototype, { __class__: Ig });
    var Vf = function(a) { null == a && (a = 1);
        this._realDt = 0;
        i.call(this);
        this.scale = new ca(a) };
    g["flambe.SpeedAdjuster"] = Vf;
    Vf.__name__ = ["flambe", "SpeedAdjuster"];
    Vf.__super__ = i;
    Vf.prototype = k(i.prototype, { get_name: function() { return "SpeedAdjuster_67" }, onUpdate: function(a) { 0 < this._realDt && (a = this._realDt, this._realDt = 0);
            this.scale.update(a) }, __class__: Vf });
    var Wf = function() {};
    g["flambe.animation.Behavior"] = Wf;
    Wf.__name__ = ["flambe", "animation",
        "Behavior"
    ];
    Wf.prototype = { __class__: Wf };
    var D = function() {};
    g["flambe.animation.Ease"] = D;
    D.__name__ = ["flambe", "animation", "Ease"];
    D.linear = function(a) { return a };
    D.quadIn = function(a) { return a * a };
    D.quadOut = function(a) { return a * (2 - a) };
    D.quadInOut = function(a) { return 0.5 >= a ? 2 * a * a : 1 - 2 * --a * a };
    D.quintIn = function(a) { return a * a * a * a * a };
    D.quintOut = function(a) { return (a -= 1) * a * a * a * a + 1 };
    D.quintInOut = function(a) { return 1 > (a *= 2) ? a * a * a * a * a / 2 : ((a -= 2) * a * a * a * a + 2) / 2 };
    D.sineInOut = function(a) {
        return 0.5 - Math.cos(3.141592653589793 *
            a) / 2
    };
    D.bounceOut = function(a) { return 0.36363636363636365 > a ? 7.5625 * a * a : 0.7272727272727273 > a ? 7.5625 * (a - 0.5454545454545454) * (a - 0.5454545454545454) + 0.75 : 0.9090909090909091 > a ? 7.5625 * (a - 0.8181818181818182) * (a - 0.8181818181818182) + 0.9375 : 7.5625 * (a - 0.9545454545454546) * (a - 0.9545454545454546) + 0.984375 };
    D.backOut = function(a) { return 1 - --a * a * (-2.70158 * a - 1.70158) };
    D.backInOut = function(a) { a *= 2; if (1 > a) return a * a * (2.70158 * a - 1.70158) / 2;
        a -= 2; return (1 - a * a * (-2.70158 * a - 1.70158)) / 2 + 0.5 };
    D.elasticIn = function(a) {
        return -(1 *
            Math.pow(2, 10 * (a -= 1)) * Math.sin(6.283185307179586 * (a - 0.06366197723675814 * Math.asin(1)) / 0.4))
    };
    D.elasticOut = function(a) { return 1 * Math.pow(2, -10 * a) * Math.sin(6.283185307179586 * (a - 0.06366197723675814 * Math.asin(1)) / 0.4) + 1 };
    var qf = function(a, b) { this.base = a;
        this.strength = b };
    g["flambe.animation.Jitter"] = qf;
    qf.__name__ = ["flambe", "animation", "Jitter"];
    qf.__interfaces__ = [Wf];
    qf.prototype = { update: function() { return this.base + 2 * Math.random() * this.strength - this.strength }, isComplete: function() { return !1 }, __class__: qf };
    var Ea = function(a, b, c, d, e) { null == e && (e = 0);
        null == d && (d = 0);
        null == c && (c = 1);
        this.start = a;
        this.end = b;
        this.cycles = d;
        this.speed = new ca(c);
        this._count = 1.5707963267948966 + e * (3.141592653589793 / c);
        this._distance = 0.5 * (a - b);
        this._center = b + this._distance };
    g["flambe.animation.Sine"] = Ea;
    Ea.__name__ = ["flambe", "animation", "Sine"];
    Ea.__interfaces__ = [Wf];
    Ea.prototype = {
        update: function(a) { this.speed.update(a);
            this._count += a * (3.141592653589793 / this.speed._value); return this._center + Math.sin(this._count) * this._distance },
        isComplete: function() { return 0 < this.cycles && 0.5 * ((this._count - 1.5707963267948966) / 3.141592653589793) >= this.cycles },
        __class__: Ea
    };
    var Jg = function(a, b, c, d) { this._from = a;
        this._to = b;
        this._duration = c;
        this.elapsed = 0;
        this._easing = null != d ? d : D.linear };
    g["flambe.animation.Tween"] = Jg;
    Jg.__name__ = ["flambe", "animation", "Tween"];
    Jg.__interfaces__ = [Wf];
    Jg.prototype = {
        update: function(a) { this.elapsed += a; return this.elapsed >= this._duration ? this._to : this._from + (this._to - this._from) * this._easing(this.elapsed / this._duration) },
        isComplete: function() { return this.elapsed >= this._duration },
        __class__: Jg
    };
    var rf = function() {};
    g["flambe.asset.Asset"] = rf;
    rf.__name__ = ["flambe", "asset", "Asset"];
    rf.__interfaces__ = [Fc];
    rf.prototype = { __class__: rf };
    var O = g["flambe.asset.AssetFormat"] = { __ename__: ["flambe", "asset", "AssetFormat"], __constructs__: "WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(",") };
    O.WEBP = ["WEBP", 0];
    O.WEBP.toString = s;
    O.WEBP.__enum__ = O;
    O.JXR = ["JXR", 1];
    O.JXR.toString = s;
    O.JXR.__enum__ = O;
    O.PNG = ["PNG", 2];
    O.PNG.toString =
        s;
    O.PNG.__enum__ = O;
    O.JPG = ["JPG", 3];
    O.JPG.toString = s;
    O.JPG.__enum__ = O;
    O.GIF = ["GIF", 4];
    O.GIF.toString = s;
    O.GIF.__enum__ = O;
    O.DDS = ["DDS", 5];
    O.DDS.toString = s;
    O.DDS.__enum__ = O;
    O.PVR = ["PVR", 6];
    O.PVR.toString = s;
    O.PVR.__enum__ = O;
    O.PKM = ["PKM", 7];
    O.PKM.toString = s;
    O.PKM.__enum__ = O;
    O.MP3 = ["MP3", 8];
    O.MP3.toString = s;
    O.MP3.__enum__ = O;
    O.M4A = ["M4A", 9];
    O.M4A.toString = s;
    O.M4A.__enum__ = O;
    O.OPUS = ["OPUS", 10];
    O.OPUS.toString = s;
    O.OPUS.__enum__ = O;
    O.OGG = ["OGG", 11];
    O.OGG.toString = s;
    O.OGG.__enum__ = O;
    O.WAV = ["WAV", 12];
    O.WAV.toString =
        s;
    O.WAV.__enum__ = O;
    O.Data = ["Data", 13];
    O.Data.toString = s;
    O.Data.__enum__ = O;
    var Ul = function(a, b, c, d) { this.name = a;
        this.url = b;
        this.format = c;
        this.bytes = d };
    g["flambe.asset.AssetEntry"] = Ul;
    Ul.__name__ = ["flambe", "asset", "AssetEntry"];
    Ul.prototype = { __class__: Ul };
    var Zh = function() {};
    g["flambe.asset.AssetPack"] = Zh;
    Zh.__name__ = ["flambe", "asset", "AssetPack"];
    Zh.__interfaces__ = [Fc];
    Zh.prototype = { __class__: Zh };
    var $h = function() {};
    g["flambe.asset.File"] = $h;
    $h.__name__ = ["flambe", "asset", "File"];
    $h.__interfaces__ = [rf];
    $h.prototype = { __class__: $h };
    var Ma = function() { this._localBase = this._remoteBase = null;
        this._entries = [] };
    g["flambe.asset.Manifest"] = Ma;
    Ma.__name__ = ["flambe", "asset", "Manifest"];
    Ma.fromAssets = function(a, b) {
        null == b && (b = !0);
        var c = z.field(Vl.getType(Ma).assets[0], a);
        if (null == c) { if (b) throw gb.withFields("Missing asset pack", ["name", a]); return null }
        var d = new Ma;
        d.set_localBase("assets");
        for (var e = 0; e < c.length;) {
            var f = c[e];
            ++e;
            var l = f.name,
                v = a + "/" + l + "?v=" + y.string(f.md5),
                pb = Ma.inferFormat(l);
            pb != O.Data &&
                (l = gb.removeFileExtension(l));
            d.add(l, v, f.bytes, pb)
        }
        return d
    };
    Ma.fromAssetsLocalized = function(a, b, c) { null == c && (c = !0);
        null == b && (b = x._platform.getLocale()); if (null != b)
            for (b = b.split("-"); 0 < b.length;) { var d = Ma.fromAssets(a + "_" + b.join("-"), !1); if (null != d) return d;
                b.pop() }
        return Ma.fromAssets(a, c) };
    Ma.exists = function(a) { return Object.prototype.hasOwnProperty.call(Vl.getType(Ma).assets[0], a) };
    Ma.inferFormat = function(a) {
        a = gb.getUrlExtension(a);
        if (null != a) switch (a.toLowerCase()) {
            case "gif":
                return O.GIF;
            case "jpg":
            case "jpeg":
                return O.JPG;
            case "jxr":
            case "wdp":
                return O.JXR;
            case "png":
                return O.PNG;
            case "webp":
                return O.WEBP;
            case "dds":
                return O.DDS;
            case "pvr":
                return O.PVR;
            case "pkm":
                return O.PKM;
            case "m4a":
                return O.M4A;
            case "mp3":
                return O.MP3;
            case "ogg":
                return O.OGG;
            case "opus":
                return O.OPUS;
            case "wav":
                return O.WAV
        } else null;
        return O.Data
    };
    Ma.prototype = {
        add: function(a, b, c, d) { null == c && (c = 0);
            null == d && (d = Ma.inferFormat(b));
            a = new Ul(a, b, d, c);
            this._entries.push(a); return a },
        iterator: function() { return H.iter(this._entries) },
        getFullURL: function(a) {
            var b;
            b = null != this.get_remoteBase() && Ma._supportsCrossOrigin ? this.get_remoteBase() : this.get_localBase();
            return null != b ? gb.joinPath(b, a.url) : a.url
        },
        get_localBase: function() { return this._localBase },
        set_localBase: function(a) { null != a && Wl.that(!ma.startsWith(a, "http://") && !ma.startsWith(a, "https://"), "localBase must be a path on the same domain, NOT starting with http(s)://", null); return this._localBase = a },
        get_remoteBase: function() { return this._remoteBase },
        set_remoteBase: function(a) {
            null != a && Wl.that(ma.startsWith(a,
                "http://") || ma.startsWith(a, "https://"), "remoteBase must be on a remote domain, starting with http(s)://", null);
            return this._remoteBase = a
        },
        __class__: Ma,
        __properties__: { set_remoteBase: "set_remoteBase", get_remoteBase: "get_remoteBase", set_localBase: "set_localBase", get_localBase: "get_localBase" }
    };
    var Va = g["flambe.display.BlendMode"] = { __ename__: ["flambe", "display", "BlendMode"], __constructs__: "Normal,Add,Multiply,Screen,Mask,Copy".split(",") };
    Va.Normal = ["Normal", 0];
    Va.Normal.toString = s;
    Va.Normal.__enum__ =
        Va;
    Va.Add = ["Add", 1];
    Va.Add.toString = s;
    Va.Add.__enum__ = Va;
    Va.Multiply = ["Multiply", 2];
    Va.Multiply.toString = s;
    Va.Multiply.__enum__ = Va;
    Va.Screen = ["Screen", 3];
    Va.Screen.toString = s;
    Va.Screen.__enum__ = Va;
    Va.Mask = ["Mask", 4];
    Va.Mask.toString = s;
    Va.Mask.__enum__ = Va;
    Va.Copy = ["Copy", 5];
    Va.Copy.toString = s;
    Va.Copy.__enum__ = Va;
    var X = function(a, b) { null == b && (b = 0);
        null == a && (a = 0);
        this.x = a;
        this.y = b };
    g["flambe.math.Point"] = X;
    X.__name__ = ["flambe", "math", "Point"];
    X.prototype = { set: function(a, b) { this.x = a;
            this.y = b }, __class__: X };
    var r = function() { this._viewMatrixUpdateCount = this._parentViewMatrixUpdateCount = 0;
        this.blendMode = this.scissor = this._viewMatrix = null; var a = this;
        i.call(this);
        this._flags |= 54;
        this._localMatrix = new Vc; var b = function() { a._flags |= 24 };
        this.x = new ca(0, b);
        this.y = new ca(0, b);
        this.rotation = new ca(0, b);
        this.scaleX = new ca(1, b);
        this.scaleY = new ca(1, b);
        this.anchorX = new ca(0, b);
        this.anchorY = new ca(0, b);
        this.alpha = new ca(1) };
    g["flambe.display.Sprite"] = r;
    r.__name__ = ["flambe", "display", "Sprite"];
    r.hitTest = function(a,
        b, c) { var d = a._compMap.Sprite_2; if (null != d) { if (6 != (d._flags & 6)) return null;
            d.getLocalMatrix().inverseTransform(b, c, r._scratchPoint) && (b = r._scratchPoint.x, c = r._scratchPoint.y); var e = d.scissor; if (null != e && !e.contains(b, c)) return null } a = r.hitTestBackwards(a.firstChild, b, c); return null != a ? a : null != d && d.containsLocal(b, c) ? d : null };
    r.getBounds = function(a, b) {
        null == b && (b = new Na);
        b.set(1.79769313486231E308, 1.79769313486231E308, -1.79769313486231E308, -1.79769313486231E308);
        r.getBoundsImpl(a, null, b);
        b.width -= b.x;
        b.height -= b.y;
        return b
    };
    r.render = function(a, b) {
        var c = a._compMap.Sprite_2;
        if (null != c) { var d = c.alpha._value; if (0 == (c._flags & 2) || 0 >= d) return;
            b.save();
            1 > d && b.multiplyAlpha(d);
            null != c.blendMode && b.setBlendMode(c.blendMode); var d = c.getLocalMatrix(),
                e = d.m02,
                f = d.m12;
            0 != (c._flags & 32) && (e = Math.round(e), f = Math.round(f));
            b.transform(d.m00, d.m10, d.m01, d.m11, e, f);
            d = c.scissor;
            null != d && b.applyScissor(d.x, d.y, d.width, d.height);
            c.draw(b) } d = a._compMap.Director_73;
        if (null != d) {
            d = d.occludedScenes;
            for (e = 0; e < d.length;) f =
                d[e], ++e, r.render(f, b)
        }
        for (d = a.firstChild; null != d;) e = d.next, r.render(d, b), d = e;
        null != c && b.restore()
    };
    r.hitTestBackwards = function(a, b, c) { if (null != a) { var d = r.hitTestBackwards(a.next, b, c); return null != d ? d : r.hitTest(a, b, c) } return null };
    r.getBoundsImpl = function(a, b, c) {
        var d = a._compMap.Sprite_2;
        if (null != d) {
            var b = null != b ? Vc.multiply(b, d.getLocalMatrix()) : d.getLocalMatrix(),
                e = d.getNaturalWidth(),
                d = d.getNaturalHeight();
            0 < e && 0 < d && (r.extendRect(b, 0, 0, c), r.extendRect(b, e, 0, c), r.extendRect(b, e, d, c), r.extendRect(b,
                0, d, c))
        }
        e = a._compMap.Director_73;
        if (null != e)
            for (var e = e.occludedScenes, d = 0, f = e.length; d < f;) r.getBoundsImpl(e[d], b, c), ++d;
        for (a = a.firstChild; null != a;) e = a.next, r.getBoundsImpl(a, b, c), a = e
    };
    r.extendRect = function(a, b, c, d) { a = a.transform(b, c, r._scratchPoint);
        b = a.x;
        c = a.y;
        b < d.x && (d.x = b);
        c < d.y && (d.y = c);
        b > d.width && (d.width = b);
        c > d.height && (d.height = c) };
    r.__super__ = i;
    r.prototype = k(i.prototype, {
        get_name: function() { return "Sprite_2" },
        getNaturalWidth: function() { return 0 },
        getNaturalHeight: function() { return 0 },
        containsLocal: function(a,
            b) { return 0 <= a && a < this.getNaturalWidth() && 0 <= b && b < this.getNaturalHeight() },
        getLocalMatrix: function() { 0 != (this._flags & 8) && (this._flags &= -9, this._localMatrix.compose(this.x._value, this.y._value, this.scaleX._value, this.scaleY._value, 3.141592653589793 * this.rotation._value / 180), this._localMatrix.translate(-this.anchorX._value, -this.anchorY._value)); return this._localMatrix },
        getViewMatrix: function() {
            if (this.isViewMatrixDirty()) {
                var a = this.getParentSprite();
                this._viewMatrix = null != a ? Vc.multiply(a.getViewMatrix(),
                    this.getLocalMatrix(), this._viewMatrix) : this.getLocalMatrix().clone(this._viewMatrix);
                this._flags &= -17;
                null != a && (this._parentViewMatrixUpdateCount = a._viewMatrixUpdateCount);
                ++this._viewMatrixUpdateCount
            }
            return this._viewMatrix
        },
        setAnchor: function(a, b) { this.anchorX.set__(a);
            this.anchorY.set__(b); return this },
        centerAnchor: function() { this.anchorX.set__(this.getNaturalWidth() / 2);
            this.anchorY.set__(this.getNaturalHeight() / 2); return this },
        setXY: function(a, b) { this.x.set__(a);
            this.y.set__(b); return this },
        setAlpha: function(a) { this.alpha.set__(a); return this },
        setRotation: function(a) { this.rotation.set__(a); return this },
        setScale: function(a) { this.scaleX.set__(a);
            this.scaleY.set__(a); return this },
        setScaleXY: function(a, b) { this.scaleX.set__(a);
            this.scaleY.set__(b); return this },
        disablePointer: function() { this.set_pointerEnabled(!1); return this },
        onAdded: function() { 0 != (this._flags & 64) && this.connectHover() },
        onRemoved: function() {
            null != this._hoverConnection && (this._hoverConnection.dispose(), this._hoverConnection =
                null)
        },
        onUpdate: function(a) { this.x.update(a);
            this.y.update(a);
            this.rotation.update(a);
            this.scaleX.update(a);
            this.scaleY.update(a);
            this.alpha.update(a);
            this.anchorX.update(a);
            this.anchorY.update(a) },
        draw: function() {},
        isViewMatrixDirty: function() { if (0 != (this._flags & 16)) return !0; var a = this.getParentSprite(); return null == a ? !1 : this._parentViewMatrixUpdateCount != a._viewMatrixUpdateCount || a.isViewMatrixDirty() },
        getParentSprite: function() {
            if (null == this.owner) return null;
            for (var a = this.owner.parent; null !=
                a;) { var b = a._compMap.Sprite_2; if (null != b) return b;
                a = a.parent }
            return null
        },
        get_pointerDown: function() { null == this._pointerDown && (this._pointerDown = new S); return this._pointerDown },
        get_pointerUp: function() { null == this._pointerUp && (this._pointerUp = new S); return this._pointerUp },
        connectHover: function() {
            var a = this;
            null == this._hoverConnection && (this._hoverConnection = x._platform.getPointer().move.connect(function(b) {
                for (var c = b.hit; null != c;) { if (c == a) return;
                    c = c.getParentSprite() } null != a._pointerOut && 0 != (a._flags &
                    64) && a._pointerOut.emit(b);
                a._flags &= -65;
                a._hoverConnection.dispose();
                a._hoverConnection = null
            }))
        },
        set_visible: function(a) { this._flags = ai.set(this._flags, 2, a); return a },
        set_pointerEnabled: function(a) { this._flags = ai.set(this._flags, 4, a); return a },
        set_pixelSnapping: function(a) { this._flags = ai.set(this._flags, 32, a); return a },
        onPointerDown: function(a) { this.onHover(a);
            null != this._pointerDown && this._pointerDown.emit(a) },
        onPointerMove: function(a) { this.onHover(a);
            null != this._pointerMove && this._pointerMove.emit(a) },
        onHover: function(a) { if (0 == (this._flags & 64) && (this._flags |= 64, null != this._pointerIn || null != this._pointerOut)) null != this._pointerIn && this._pointerIn.emit(a), this.connectHover() },
        onPointerUp: function(a) { switch (a.source[1]) {
                case 1:
                    null != this._pointerOut && 0 != (this._flags & 64) && this._pointerOut.emit(a), this._flags &= -65, null != this._hoverConnection && (this._hoverConnection.dispose(), this._hoverConnection = null) } null != this._pointerUp && this._pointerUp.emit(a) },
        __class__: r,
        __properties__: k(i.prototype.__properties__, { set_pixelSnapping: "set_pixelSnapping", set_pointerEnabled: "set_pointerEnabled", set_visible: "set_visible", get_pointerUp: "get_pointerUp", get_pointerDown: "get_pointerDown" })
    });
    var Wa = function(a, b, c) { r.call(this);
        this.color = a;
        this.width = new ca(b);
        this.height = new ca(c) };
    g["flambe.display.FillSprite"] = Wa;
    Wa.__name__ = ["flambe", "display", "FillSprite"];
    Wa.__super__ = r;
    Wa.prototype = k(r.prototype, {
        draw: function(a) { a.fillRect(this.color, 0, 0, this.width._value, this.height._value) },
        getNaturalWidth: function() { return this.width._value },
        getNaturalHeight: function() { return this.height._value },
        setSize: function(a, b) { this.width.set__(a);
            this.height.set__(b); return this },
        onUpdate: function(a) { r.prototype.onUpdate.call(this, a);
            this.width.update(a);
            this.height.update(a) },
        __class__: Wa
    });
    var bi = function(a) { this._kernings = null;
        this.xOffset = this.yOffset = this.xAdvance = 0;
        this.page = null;
        this.x = this.y = this.width = this.height = 0;
        this.charCode = a };
    g["flambe.display.Glyph"] = bi;
    bi.__name__ = ["flambe", "display", "Glyph"];
    bi.prototype = {
        draw: function(a, b, c) {
            0 <
                this.width && a.drawSubTexture(this.page, b + this.xOffset, c + this.yOffset, this.x, this.y, this.width, this.height)
        },
        getKerning: function(a) { return null != this._kernings ? y["int"](this._kernings.get(a)) : 0 },
        setKerning: function(a, b) { null == this._kernings && (this._kernings = new Fb);
            this._kernings.set(a, b) },
        __class__: bi
    };
    var sf = function(a, b) { this.name = b;
        this._pack = a;
        this._file = a.getFile(b + ".fnt");
        this.reload() };
    g["flambe.display.Font"] = sf;
    sf.__name__ = ["flambe", "display", "Font"];
    sf.prototype = {
        layoutText: function(a, b,
            c, d, e) { null == e && (e = 0);
            null == d && (d = 0);
            null == c && (c = 0);
            null == b && (b = Z.Left); return new tf(this, a, b, c, d, e) },
        reload: function() {
            this._glyphs = new Fb;
            this._glyphs.set(sf.NEWLINE.charCode, sf.NEWLINE);
            for (var a = new Xf(this._file.toString()), b = new Fb, c = this.name.lastIndexOf("/"), c = 0 <= c ? H.substr(this.name, 0, c + 1) : "", d = a.keywords(); d.hasNext();) switch (d.next()) {
                case "info":
                    for (var e = a.pairs(); e.hasNext();) { var f = e.next(); switch (f.key) {
                            case "size":
                                this.size = f.getInt() } }
                    break;
                case "common":
                    for (e = a.pairs(); e.hasNext();) switch (f =
                        e.next(), f.key) {
                        case "lineHeight":
                            this.lineHeight = f.getInt() }
                    break;
                case "page":
                    for (var e = 0, f = null, l = a.pairs(); l.hasNext();) { var v = l.next(); switch (v.key) {
                            case "id":
                                e = v.getInt(); break;
                            case "file":
                                f = v.getString() } } f = this._pack.getTexture(c + gb.removeFileExtension(f));
                    b.set(e, f);
                    break;
                case "char":
                    e = null;
                    for (f = a.pairs(); f.hasNext();) switch (l = f.next(), l.key) {
                        case "id":
                            e = new bi(l.getInt());
                            break;
                        case "x":
                            e.x = l.getInt();
                            break;
                        case "y":
                            e.y = l.getInt();
                            break;
                        case "width":
                            e.width = l.getInt();
                            break;
                        case "height":
                            e.height =
                                l.getInt();
                            break;
                        case "page":
                            l = l.getInt();
                            e.page = b.get(l);
                            break;
                        case "xoffset":
                            e.xOffset = l.getInt();
                            break;
                        case "yoffset":
                            e.yOffset = l.getInt();
                            break;
                        case "xadvance":
                            e.xAdvance = l.getInt()
                    }
                    this._glyphs.set(e.charCode, e);
                    break;
                case "kerning":
                    e = null;
                    l = f = 0;
                    for (v = a.pairs(); v.hasNext();) { var pb = v.next(); switch (pb.key) {
                            case "first":
                                e = this._glyphs.get(pb.getInt()); break;
                            case "second":
                                f = pb.getInt(); break;
                            case "amount":
                                l = pb.getInt() } } null != e && 0 != l && e.setKerning(f, l)
            }
        },
        __class__: sf
    };
    var Z = g["flambe.display.TextAlign"] = { __ename__: ["flambe", "display", "TextAlign"], __constructs__: ["Left", "Center", "Right"] };
    Z.Left = ["Left", 0];
    Z.Left.toString = s;
    Z.Left.__enum__ = Z;
    Z.Center = ["Center", 1];
    Z.Center.toString = s;
    Z.Center.__enum__ = Z;
    Z.Right = ["Right", 2];
    Z.Right.toString = s;
    Z.Right.__enum__ = Z;
    var tf = function(a, b, c, d, e, f) {
        this.lines = 0;
        var l = this;
        this._font = a;
        this._glyphs = [];
        this._offsets = [];
        this._lineOffset = Math.round(a.lineHeight + f);
        this.bounds = new Na;
        for (var v = [], f = b.length, pb = 0; pb < f;) {
            var h = pb++,
                h = b.charCodeAt(h),
                h = a._glyphs.get(h);
            null != h ? this._glyphs.push(h) : null
        }
        for (var b = -1, g = 0, i = 0, a = a._glyphs.get(10), f = function() { l.bounds.width = qb.max(l.bounds.width, g);
                l.bounds.height += i;
                v[l.lines] = g;
                i = g = 0;++l.lines }, pb = 0; pb < this._glyphs.length;) {
            h = this._glyphs[pb];
            this._offsets[pb] = Math.round(g);
            var j = 0 < d && g + h.width > d;
            j || h == a ? (j && (0 <= b ? (this._glyphs[b] = a, g = this._offsets[b], pb = b) : this._glyphs.splice(pb, 0, a)), b = -1, i = this._lineOffset, f()) : (32 == h.charCode && (b = pb), g += h.xAdvance + e, i = qb.max(i, h.height + h.yOffset), pb + 1 < this._glyphs.length && (g +=
                h.getKerning(this._glyphs[pb + 1].charCode)));
            ++pb
        }
        f();
        e = 0;
        a = tf.getAlignOffset(c, v[0], d);
        b = 1.79769313486231E308;
        f = -1.79769313486231E308;
        h = pb = 0;
        for (j = this._glyphs.length; h < j;) { var k = this._glyphs[h];
            10 == k.charCode && (e += this._lineOffset, ++pb, a = tf.getAlignOffset(c, v[pb], d));
            this._offsets[h] += a; var n = e + k.yOffset;
            b < n || (b = n);
            f = qb.max(f, n + k.height);++h } this.bounds.x = tf.getAlignOffset(c, this.bounds.width, d);
        this.bounds.y = b;
        this.bounds.height = f - b
    };
    g["flambe.display.TextLayout"] = tf;
    tf.__name__ = ["flambe", "display",
        "TextLayout"
    ];
    tf.getAlignOffset = function(a, b, c) { switch (a[1]) {
            case 0:
                return 0;
            case 2:
                return c - b;
            case 1:
                return Math.round((c - b) / 2) } };
    tf.prototype = { draw: function(a) { for (var b = 0, c = 0, d = this._glyphs.length; c < d;) { var e = this._glyphs[c];
                10 == e.charCode ? b += this._lineOffset : e.draw(a, this._offsets[c], b);++c } }, __class__: tf };
    var Xf = function(a) { this._configText = a;
        this._keywordPattern = new Uc("([A-Za-z]+)(.*)", "");
        this._pairPattern = new Uc('([A-Za-z]+)=("[^"]*"|[^\\s]+)', "") };
    g["flambe.display._Font.ConfigParser"] =
        Xf;
    Xf.__name__ = ["flambe", "display", "_Font", "ConfigParser"];
    Xf.advance = function(a, b) { var c = b.matchedPos(); return H.substr(a, c.pos + c.len, a.length) };
    Xf.prototype = {
        keywords: function() { var a = this,
                b = this._configText; return { next: function() { b = Xf.advance(b, a._keywordPattern);
                    a._pairText = a._keywordPattern.matched(2); return a._keywordPattern.matched(1) }, hasNext: function() { return a._keywordPattern.match(b) } } },
        pairs: function() {
            var a = this,
                b = this._pairText;
            return {
                next: function() {
                    b = Xf.advance(b, a._pairPattern);
                    return new Xl(a._pairPattern.matched(1),
                        a._pairPattern.matched(2))
                },
                hasNext: function() { return a._pairPattern.match(b) }
            }
        },
        __class__: Xf
    };
    var Xl = function(a, b) { this.key = a;
        this._value = b };
    g["flambe.display._Font.ConfigPair"] = Xl;
    Xl.__name__ = ["flambe", "display", "_Font", "ConfigPair"];
    Xl.prototype = { getInt: function() { return y.parseInt(this._value) }, getString: function() { return 34 != this._value.charCodeAt(0) ? null : H.substr(this._value, 1, this._value.length - 2) }, __class__: Xl };
    var Yl = function() {};
    g["flambe.display.Graphics"] = Yl;
    Yl.__name__ = ["flambe", "display",
        "Graphics"
    ];
    Yl.prototype = { __class__: Yl };
    var ya = function(a) { r.call(this);
        this.texture = a };
    g["flambe.display.ImageSprite"] = ya;
    ya.__name__ = ["flambe", "display", "ImageSprite"];
    ya.__super__ = r;
    ya.prototype = k(r.prototype, { draw: function(a) { null != this.texture && a.drawTexture(this.texture, 0, 0) }, getNaturalWidth: function() { return null != this.texture ? this.texture.get_width() : 0 }, getNaturalHeight: function() { return null != this.texture ? this.texture.get_height() : 0 }, __class__: ya });
    var Qe = g["flambe.display.Orientation"] = { __ename__: ["flambe", "display", "Orientation"], __constructs__: ["Portrait", "Landscape"] };
    Qe.Portrait = ["Portrait", 0];
    Qe.Portrait.toString = s;
    Qe.Portrait.__enum__ = Qe;
    Qe.Landscape = ["Landscape", 1];
    Qe.Landscape.toString = s;
    Qe.Landscape.__enum__ = Qe;
    var ci = function() {};
    g["flambe.display.Texture"] = ci;
    ci.__name__ = ["flambe", "display", "Texture"];
    ci.__interfaces__ = [rf];
    ci.prototype = { __class__: ci };
    var En = function() {};
    g["flambe.display.SubTexture"] = En;
    En.__name__ = ["flambe", "display", "SubTexture"];
    En.__interfaces__ = [ci];
    var Gc = function(a, b) { null == b && (b = "");
        this._layout = null; var c = this;
        r.call(this);
        this._font = a;
        this._text = b;
        this._align = Z.Left;
        this._flags |= 128; var d = function() { c._flags |= 128 };
        this.wrapWidth = new ca(0, d);
        this.letterSpacing = new ca(0, d);
        this.lineSpacing = new ca(0, d) };
    g["flambe.display.TextSprite"] = Gc;
    Gc.__name__ = ["flambe", "display", "TextSprite"];
    Gc.__super__ = r;
    Gc.prototype = k(r.prototype, {
        draw: function(a) { this.updateLayout();
            this._layout.draw(a) },
        getNaturalWidth: function() {
            this.updateLayout();
            return 0 <
                this.wrapWidth._value ? this.wrapWidth._value : this._layout.bounds.width
        },
        getNaturalHeight: function() { this.updateLayout(); var a = this._layout.lines * (this._font.lineHeight + this.lineSpacing._value),
                b = this._layout.bounds.height; return a > b ? a : b },
        containsLocal: function(a, b) { this.updateLayout(); return this._layout.bounds.contains(a, b) },
        setWrapWidth: function(a) { this.wrapWidth.set__(a); return this },
        setAlign: function(a) { this.set_align(a); return this },
        set_text: function(a) {
            a != this._text && (this._text = a, this._flags |=
                128);
            return a
        },
        set_font: function(a) { a != this._font && (this._font = a, this._flags |= 128); return a },
        set_align: function(a) { a != this._align && (this._align = a, this._flags |= 128); return a },
        updateLayout: function() { 0 != (this._flags & 128) && (this._flags &= -129, this._layout = this._font.layoutText(this._text, this._align, this.wrapWidth._value, this.letterSpacing._value, this.lineSpacing._value)) },
        onUpdate: function(a) { r.prototype.onUpdate.call(this, a);
            this.wrapWidth.update(a);
            this.letterSpacing.update(a);
            this.lineSpacing.update(a) },
        __class__: Gc,
        __properties__: k(r.prototype.__properties__, { set_align: "set_align", set_font: "set_font", set_text: "set_text" })
    });
    var j = g["flambe.input.Key"] = { __ename__: ["flambe", "input", "Key"], __constructs__: "A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",") };
    j.A = ["A", 0];
    j.A.toString = s;
    j.A.__enum__ = j;
    j.B = ["B", 1];
    j.B.toString = s;
    j.B.__enum__ = j;
    j.C = ["C", 2];
    j.C.toString = s;
    j.C.__enum__ = j;
    j.D = ["D", 3];
    j.D.toString = s;
    j.D.__enum__ = j;
    j.E = ["E", 4];
    j.E.toString = s;
    j.E.__enum__ = j;
    j.F = ["F", 5];
    j.F.toString = s;
    j.F.__enum__ = j;
    j.G = ["G", 6];
    j.G.toString = s;
    j.G.__enum__ = j;
    j.H = ["H", 7];
    j.H.toString = s;
    j.H.__enum__ = j;
    j.I = ["I", 8];
    j.I.toString = s;
    j.I.__enum__ = j;
    j.J = ["J", 9];
    j.J.toString = s;
    j.J.__enum__ = j;
    j.K = ["K", 10];
    j.K.toString = s;
    j.K.__enum__ = j;
    j.L = ["L", 11];
    j.L.toString = s;
    j.L.__enum__ =
        j;
    j.M = ["M", 12];
    j.M.toString = s;
    j.M.__enum__ = j;
    j.N = ["N", 13];
    j.N.toString = s;
    j.N.__enum__ = j;
    j.O = ["O", 14];
    j.O.toString = s;
    j.O.__enum__ = j;
    j.P = ["P", 15];
    j.P.toString = s;
    j.P.__enum__ = j;
    j.Q = ["Q", 16];
    j.Q.toString = s;
    j.Q.__enum__ = j;
    j.R = ["R", 17];
    j.R.toString = s;
    j.R.__enum__ = j;
    j.S = ["S", 18];
    j.S.toString = s;
    j.S.__enum__ = j;
    j.T = ["T", 19];
    j.T.toString = s;
    j.T.__enum__ = j;
    j.U = ["U", 20];
    j.U.toString = s;
    j.U.__enum__ = j;
    j.V = ["V", 21];
    j.V.toString = s;
    j.V.__enum__ = j;
    j.W = ["W", 22];
    j.W.toString = s;
    j.W.__enum__ = j;
    j.X = ["X", 23];
    j.X.toString =
        s;
    j.X.__enum__ = j;
    j.Y = ["Y", 24];
    j.Y.toString = s;
    j.Y.__enum__ = j;
    j.Z = ["Z", 25];
    j.Z.toString = s;
    j.Z.__enum__ = j;
    j.Number0 = ["Number0", 26];
    j.Number0.toString = s;
    j.Number0.__enum__ = j;
    j.Number1 = ["Number1", 27];
    j.Number1.toString = s;
    j.Number1.__enum__ = j;
    j.Number2 = ["Number2", 28];
    j.Number2.toString = s;
    j.Number2.__enum__ = j;
    j.Number3 = ["Number3", 29];
    j.Number3.toString = s;
    j.Number3.__enum__ = j;
    j.Number4 = ["Number4", 30];
    j.Number4.toString = s;
    j.Number4.__enum__ = j;
    j.Number5 = ["Number5", 31];
    j.Number5.toString = s;
    j.Number5.__enum__ =
        j;
    j.Number6 = ["Number6", 32];
    j.Number6.toString = s;
    j.Number6.__enum__ = j;
    j.Number7 = ["Number7", 33];
    j.Number7.toString = s;
    j.Number7.__enum__ = j;
    j.Number8 = ["Number8", 34];
    j.Number8.toString = s;
    j.Number8.__enum__ = j;
    j.Number9 = ["Number9", 35];
    j.Number9.toString = s;
    j.Number9.__enum__ = j;
    j.Numpad0 = ["Numpad0", 36];
    j.Numpad0.toString = s;
    j.Numpad0.__enum__ = j;
    j.Numpad1 = ["Numpad1", 37];
    j.Numpad1.toString = s;
    j.Numpad1.__enum__ = j;
    j.Numpad2 = ["Numpad2", 38];
    j.Numpad2.toString = s;
    j.Numpad2.__enum__ = j;
    j.Numpad3 = ["Numpad3", 39];
    j.Numpad3.toString =
        s;
    j.Numpad3.__enum__ = j;
    j.Numpad4 = ["Numpad4", 40];
    j.Numpad4.toString = s;
    j.Numpad4.__enum__ = j;
    j.Numpad5 = ["Numpad5", 41];
    j.Numpad5.toString = s;
    j.Numpad5.__enum__ = j;
    j.Numpad6 = ["Numpad6", 42];
    j.Numpad6.toString = s;
    j.Numpad6.__enum__ = j;
    j.Numpad7 = ["Numpad7", 43];
    j.Numpad7.toString = s;
    j.Numpad7.__enum__ = j;
    j.Numpad8 = ["Numpad8", 44];
    j.Numpad8.toString = s;
    j.Numpad8.__enum__ = j;
    j.Numpad9 = ["Numpad9", 45];
    j.Numpad9.toString = s;
    j.Numpad9.__enum__ = j;
    j.NumpadAdd = ["NumpadAdd", 46];
    j.NumpadAdd.toString = s;
    j.NumpadAdd.__enum__ = j;
    j.NumpadDecimal = ["NumpadDecimal", 47];
    j.NumpadDecimal.toString = s;
    j.NumpadDecimal.__enum__ = j;
    j.NumpadDivide = ["NumpadDivide", 48];
    j.NumpadDivide.toString = s;
    j.NumpadDivide.__enum__ = j;
    j.NumpadEnter = ["NumpadEnter", 49];
    j.NumpadEnter.toString = s;
    j.NumpadEnter.__enum__ = j;
    j.NumpadMultiply = ["NumpadMultiply", 50];
    j.NumpadMultiply.toString = s;
    j.NumpadMultiply.__enum__ = j;
    j.NumpadSubtract = ["NumpadSubtract", 51];
    j.NumpadSubtract.toString = s;
    j.NumpadSubtract.__enum__ = j;
    j.F1 = ["F1", 52];
    j.F1.toString = s;
    j.F1.__enum__ = j;
    j.F2 = ["F2", 53];
    j.F2.toString =
        s;
    j.F2.__enum__ = j;
    j.F3 = ["F3", 54];
    j.F3.toString = s;
    j.F3.__enum__ = j;
    j.F4 = ["F4", 55];
    j.F4.toString = s;
    j.F4.__enum__ = j;
    j.F5 = ["F5", 56];
    j.F5.toString = s;
    j.F5.__enum__ = j;
    j.F6 = ["F6", 57];
    j.F6.toString = s;
    j.F6.__enum__ = j;
    j.F7 = ["F7", 58];
    j.F7.toString = s;
    j.F7.__enum__ = j;
    j.F8 = ["F8", 59];
    j.F8.toString = s;
    j.F8.__enum__ = j;
    j.F9 = ["F9", 60];
    j.F9.toString = s;
    j.F9.__enum__ = j;
    j.F10 = ["F10", 61];
    j.F10.toString = s;
    j.F10.__enum__ = j;
    j.F11 = ["F11", 62];
    j.F11.toString = s;
    j.F11.__enum__ = j;
    j.F12 = ["F12", 63];
    j.F12.toString = s;
    j.F12.__enum__ = j;
    j.F13 = ["F13", 64];
    j.F13.toString = s;
    j.F13.__enum__ = j;
    j.F14 = ["F14", 65];
    j.F14.toString = s;
    j.F14.__enum__ = j;
    j.F15 = ["F15", 66];
    j.F15.toString = s;
    j.F15.__enum__ = j;
    j.Left = ["Left", 67];
    j.Left.toString = s;
    j.Left.__enum__ = j;
    j.Up = ["Up", 68];
    j.Up.toString = s;
    j.Up.__enum__ = j;
    j.Right = ["Right", 69];
    j.Right.toString = s;
    j.Right.__enum__ = j;
    j.Down = ["Down", 70];
    j.Down.toString = s;
    j.Down.__enum__ = j;
    j.Alt = ["Alt", 71];
    j.Alt.toString = s;
    j.Alt.__enum__ = j;
    j.Backquote = ["Backquote", 72];
    j.Backquote.toString = s;
    j.Backquote.__enum__ = j;
    j.Backslash = ["Backslash", 73];
    j.Backslash.toString = s;
    j.Backslash.__enum__ = j;
    j.Backspace = ["Backspace", 74];
    j.Backspace.toString = s;
    j.Backspace.__enum__ = j;
    j.CapsLock = ["CapsLock", 75];
    j.CapsLock.toString = s;
    j.CapsLock.__enum__ = j;
    j.Comma = ["Comma", 76];
    j.Comma.toString = s;
    j.Comma.__enum__ = j;
    j.Command = ["Command", 77];
    j.Command.toString = s;
    j.Command.__enum__ = j;
    j.Control = ["Control", 78];
    j.Control.toString = s;
    j.Control.__enum__ = j;
    j.Delete = ["Delete", 79];
    j.Delete.toString = s;
    j.Delete.__enum__ = j;
    j.End = ["End", 80];
    j.End.toString = s;
    j.End.__enum__ =
        j;
    j.Enter = ["Enter", 81];
    j.Enter.toString = s;
    j.Enter.__enum__ = j;
    j.Equals = ["Equals", 82];
    j.Equals.toString = s;
    j.Equals.__enum__ = j;
    j.Escape = ["Escape", 83];
    j.Escape.toString = s;
    j.Escape.__enum__ = j;
    j.Home = ["Home", 84];
    j.Home.toString = s;
    j.Home.__enum__ = j;
    j.Insert = ["Insert", 85];
    j.Insert.toString = s;
    j.Insert.__enum__ = j;
    j.LeftBracket = ["LeftBracket", 86];
    j.LeftBracket.toString = s;
    j.LeftBracket.__enum__ = j;
    j.Minus = ["Minus", 87];
    j.Minus.toString = s;
    j.Minus.__enum__ = j;
    j.PageDown = ["PageDown", 88];
    j.PageDown.toString = s;
    j.PageDown.__enum__ =
        j;
    j.PageUp = ["PageUp", 89];
    j.PageUp.toString = s;
    j.PageUp.__enum__ = j;
    j.Period = ["Period", 90];
    j.Period.toString = s;
    j.Period.__enum__ = j;
    j.Quote = ["Quote", 91];
    j.Quote.toString = s;
    j.Quote.__enum__ = j;
    j.RightBracket = ["RightBracket", 92];
    j.RightBracket.toString = s;
    j.RightBracket.__enum__ = j;
    j.Semicolon = ["Semicolon", 93];
    j.Semicolon.toString = s;
    j.Semicolon.__enum__ = j;
    j.Shift = ["Shift", 94];
    j.Shift.toString = s;
    j.Shift.__enum__ = j;
    j.Slash = ["Slash", 95];
    j.Slash.toString = s;
    j.Slash.__enum__ = j;
    j.Space = ["Space", 96];
    j.Space.toString =
        s;
    j.Space.__enum__ = j;
    j.Tab = ["Tab", 97];
    j.Tab.toString = s;
    j.Tab.__enum__ = j;
    j.Menu = ["Menu", 98];
    j.Menu.toString = s;
    j.Menu.__enum__ = j;
    j.Search = ["Search", 99];
    j.Search.toString = s;
    j.Search.__enum__ = j;
    j.Unknown = function(a) { a = ["Unknown", 100, a];
        a.__enum__ = j;
        a.toString = s; return a };
    var Zl = function() { this.init(0, null) };
    g["flambe.input.KeyboardEvent"] = Zl;
    Zl.__name__ = ["flambe", "input", "KeyboardEvent"];
    Zl.prototype = { init: function(a, b) { this.id = a;
            this.key = b }, __class__: Zl };
    var lc = g["flambe.input.MouseButton"] = {
        __ename__: ["flambe",
            "input", "MouseButton"
        ],
        __constructs__: ["Left", "Middle", "Right", "Unknown"]
    };
    lc.Left = ["Left", 0];
    lc.Left.toString = s;
    lc.Left.__enum__ = lc;
    lc.Middle = ["Middle", 1];
    lc.Middle.toString = s;
    lc.Middle.__enum__ = lc;
    lc.Right = ["Right", 2];
    lc.Right.toString = s;
    lc.Right.__enum__ = lc;
    lc.Unknown = function(a) { a = ["Unknown", 3, a];
        a.__enum__ = lc;
        a.toString = s; return a };
    var mc = g["flambe.input.MouseCursor"] = { __ename__: ["flambe", "input", "MouseCursor"], __constructs__: ["Default", "Button", "None"] };
    mc.Default = ["Default", 0];
    mc.Default.toString =
        s;
    mc.Default.__enum__ = mc;
    mc.Button = ["Button", 1];
    mc.Button.toString = s;
    mc.Button.__enum__ = mc;
    mc.None = ["None", 2];
    mc.None.toString = s;
    mc.None.__enum__ = mc;
    var $l = function() { this.init(0, 0, 0, null) };
    g["flambe.input.MouseEvent"] = $l;
    $l.__name__ = ["flambe", "input", "MouseEvent"];
    $l.prototype = { init: function(a, b, c, d) { this.id = a;
            this.viewX = b;
            this.viewY = c;
            this.button = d }, __class__: $l };
    var di = g["flambe.input.EventSource"] = { __ename__: ["flambe", "input", "EventSource"], __constructs__: ["Mouse", "Touch"] };
    di.Mouse = function(a) {
        a = ["Mouse", 0, a];
        a.__enum__ = di;
        a.toString = s;
        return a
    };
    di.Touch = function(a) { a = ["Touch", 1, a];
        a.__enum__ = di;
        a.toString = s; return a };
    var am = function() { this.init(0, 0, 0, null, null) };
    g["flambe.input.PointerEvent"] = am;
    am.__name__ = ["flambe", "input", "PointerEvent"];
    am.prototype = { init: function(a, b, c, d, e) { this.id = a;
            this.viewX = b;
            this.viewY = c;
            this.hit = d;
            this.source = e;
            this._stopped = !1 }, __class__: am };
    var bm = function(a) { this.id = a;
        this._source = di.Touch(this) };
    g["flambe.input.TouchPoint"] = bm;
    bm.__name__ = ["flambe", "input",
        "TouchPoint"
    ];
    bm.prototype = { init: function(a, b) { this.viewX = a;
            this.viewY = b }, __class__: bm };
    var qb = function() {};
    g["flambe.math.FMath"] = qb;
    qb.__name__ = ["flambe", "math", "FMath"];
    qb.toDegrees = function(a) { return 180 * a / 3.141592653589793 };
    qb.max = function(a, b) { return a > b ? a : b };
    qb.min = function(a, b) { return a < b ? a : b };
    qb.clamp = function(a, b, c) { return a < b ? b : a > c ? c : a };
    var Vc = function() { this.identity() };
    g["flambe.math.Matrix"] = Vc;
    Vc.__name__ = ["flambe", "math", "Matrix"];
    Vc.multiply = function(a, b, c) {
        null == c && (c = new Vc);
        var d =
            a.m00 * b.m00 + a.m01 * b.m10,
            e = a.m00 * b.m01 + a.m01 * b.m11,
            f = a.m00 * b.m02 + a.m01 * b.m12 + a.m02;
        c.m00 = d;
        c.m01 = e;
        c.m02 = f;
        d = a.m10 * b.m00 + a.m11 * b.m10;
        e = a.m10 * b.m01 + a.m11 * b.m11;
        f = a.m10 * b.m02 + a.m11 * b.m12 + a.m12;
        c.m10 = d;
        c.m11 = e;
        c.m12 = f;
        return c
    };
    Vc.prototype = {
        set: function(a, b, c, d, e, f) { this.m00 = a;
            this.m01 = c;
            this.m02 = e;
            this.m10 = b;
            this.m11 = d;
            this.m12 = f },
        identity: function() { this.set(1, 0, 0, 1, 0, 0) },
        compose: function(a, b, c, d, e) { var f = Math.sin(e),
                e = Math.cos(e);
            this.set(e * c, f * c, -f * d, e * d, a, b) },
        translate: function(a, b) {
            this.m02 += this.m00 *
                a + this.m01 * b;
            this.m12 += this.m11 * b + this.m10 * a
        },
        invert: function() { var a = this.determinant(); if (0 == a) return !1;
            this.set(this.m11 / a, -this.m01 / a, -this.m10 / a, this.m00 / a, (this.m01 * this.m12 - this.m11 * this.m02) / a, (this.m10 * this.m02 - this.m00 * this.m12) / a); return !0 },
        transform: function(a, b, c) { null == c && (c = new X);
            c.x = a * this.m00 + b * this.m01 + this.m02;
            c.y = a * this.m10 + b * this.m11 + this.m12; return c },
        transformArray: function(a, b, c) {
            for (var d = 0; d < b;) {
                var e = a[d],
                    f = a[d + 1];
                c[d++] = e * this.m00 + f * this.m01 + this.m02;
                c[d++] = e * this.m10 +
                    f * this.m11 + this.m12
            }
        },
        determinant: function() { return this.m00 * this.m11 - this.m01 * this.m10 },
        inverseTransform: function(a, b, c) { var d = this.determinant(); if (0 == d) return !1;
            a -= this.m02;
            b -= this.m12;
            c.x = (a * this.m11 - b * this.m01) / d;
            c.y = (b * this.m00 - a * this.m10) / d; return !0 },
        clone: function(a) { null == a && (a = new Vc);
            a.set(this.m00, this.m10, this.m01, this.m11, this.m02, this.m12); return a },
        __class__: Vc
    };
    var Na = function(a, b, c, d) { null == d && (d = 0);
        null == c && (c = 0);
        null == b && (b = 0);
        null == a && (a = 0);
        this.set(a, b, c, d) };
    g["flambe.math.Rectangle"] =
        Na;
    Na.__name__ = ["flambe", "math", "Rectangle"];
    Na.prototype = {
        set: function(a, b, c, d) { this.x = a;
            this.y = b;
            this.width = c;
            this.height = d },
        contains: function(a, b) { a -= this.x; if (0 <= this.width) { if (0 > a || a > this.width) return !1 } else if (0 < a || a < this.width) return !1;
            b -= this.y; if (0 <= this.height) { if (0 > b || b > this.height) return !1 } else if (0 < b || b < this.height) return !1; return !0 },
        clone: function(a) { null == a && (a = new Na);
            a.set(this.x, this.y, this.width, this.height); return a },
        equals: function(a) {
            return this.x == a.x && this.y == a.y && this.width ==
                a.width && this.height == a.height
        },
        __class__: Na
    };
    var zb = function() { this._disposed = !1 };
    g["flambe.platform.BasicAsset"] = zb;
    zb.__name__ = ["flambe", "platform", "BasicAsset"];
    zb.__interfaces__ = [rf];
    zb.prototype = { dispose: function() { this._disposed || (this._disposed = !0, this.onDisposed()) }, onDisposed: function() { null }, __class__: zb };
    var vf = function(a, b) {
        var c = this;
        this.manifest = b;
        this._platform = a;
        this.promise = new uf;
        this._bytesLoaded = new M;
        this._pack = new ei(b, this);
        var d = pf.array(b);
        if (0 == d.length) this.handleSuccess();
        else { for (var e = new M, f = 0; f < d.length;) { var l = d[f];++f; var v = e.get(l.name);
                null == v && (v = [], e.set(l.name, v));
                v.push(l) } this._assetsRemaining = pf.count(e); for (d = e.iterator(); d.hasNext();) e = [d.next()], this.pickBestEntry(e[0], function(a) { return function(d) { if (null != d) { var e = b.getFullURL(d); try { c.loadEntry(e, d) } catch (f) { c.handleError(d, "Unexpected error: " + y.string(f)) } e = c.promise;
                        e.set_total(e._total + d.bytes) } else d = a[0][0], vf.isAudio(d.format) ? c.handleLoad(d, Wc.getInstance()) : c.handleError(d, "Could not find a supported format to load") } }(e)) }
    };
    g["flambe.platform.BasicAssetPackLoader"] = vf;
    vf.__name__ = ["flambe", "platform", "BasicAssetPackLoader"];
    vf.isAudio = function(a) { switch (a[1]) {
            case 8:
            case 9:
            case 10:
            case 11:
            case 12:
                return !0;
            default:
                return !1 } };
    vf.prototype = {
        onDisposed: function() {},
        pickBestEntry: function(a, b) { this.getAssetFormats(function(c) { for (var d = 0; d < c.length;) { var e = c[d];++d; for (var f = 0; f < a.length;) { var l = a[f];++f; if (l.format == e) { b(l); return } } } b(null) }) },
        loadEntry: function() { null },
        getAssetFormats: function() { null },
        handleLoad: function(a,
            b) { if (!this._pack.disposed) { this.handleProgress(a, a.bytes); var c; switch (a.format[1]) {
                    case 0:
                    case 1:
                    case 2:
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    case 7:
                        c = this._pack.textures; break;
                    case 8:
                    case 9:
                    case 10:
                    case 11:
                    case 12:
                        c = this._pack.sounds; break;
                    case 13:
                        c = this._pack.files } c.set(a.name, b);
                this._assetsRemaining -= 1;
                0 == this._assetsRemaining && this.handleSuccess() } },
        handleProgress: function(a, b) { this._bytesLoaded.set(a.name, b); for (var c = 0, d = this._bytesLoaded.iterator(); d.hasNext();) var e = d.next(),
                c = c + e;
            this.promise.set_progress(c) },
        handleSuccess: function() { this.promise.set_result(this._pack) },
        handleError: function(a, b) { this.promise.error.emit(gb.withFields(b, ["url", a.url])) },
        handleTextureError: function(a) { this.handleError(a, "Failed to create texture. Is the GPU context unavailable?") },
        __class__: vf
    };
    var ei = function(a, b) { this.disposed = !1;
        this._manifest = a;
        this.loader = b;
        this.textures = new M;
        this.sounds = new M;
        this.files = new M };
    g["flambe.platform._BasicAssetPackLoader.BasicAssetPack"] = ei;
    ei.__name__ = ["flambe", "platform", "_BasicAssetPackLoader",
        "BasicAssetPack"
    ];
    ei.__interfaces__ = [Zh];
    ei.prototype = {
        getTexture: function(a, b) { null == b && (b = !0); var c = this.textures.get(a); if (null == c && b) throw gb.withFields("Missing texture", ["name", a]); return c },
        getSound: function(a, b) { null == b && (b = !0); var c = this.sounds.get(a); if (null == c && b) throw gb.withFields("Missing sound", ["name", a]); return c },
        getFile: function(a, b) { null == b && (b = !0); var c = this.files.get(a); if (null == c && b) throw gb.withFields("Missing file", ["name", a]); return c },
        dispose: function() {
            if (!this.disposed) {
                this.disposed = !0;
                for (var a = this.textures.iterator(); a.hasNext();) a.next().dispose();
                this.textures = null;
                for (a = this.sounds.iterator(); a.hasNext();) a.next().dispose();
                this.sounds = null;
                for (a = this.files.iterator(); a.hasNext();) a.next().dispose();
                this.files = null;
                this.loader.onDisposed()
            }
        },
        get_manifest: function() { return this._manifest },
        __class__: ei,
        __properties__: { get_manifest: "get_manifest" }
    };
    var Kg = function(a) { this._disposed = !1;
        this._content = a };
    g["flambe.platform.BasicFile"] = Kg;
    Kg.__name__ = ["flambe", "platform", "BasicFile"];
    Kg.__interfaces__ = [$h];
    Kg.__super__ = zb;
    Kg.prototype = k(zb.prototype, { toString: function() { return this._content }, onDisposed: function() { this._content = null }, __class__: Kg });
    var cm = function() {};
    g["flambe.subsystem.KeyboardSystem"] = cm;
    cm.__name__ = ["flambe", "subsystem", "KeyboardSystem"];
    cm.prototype = { __class__: cm };
    var Bd = function() { this.down = new S;
        this.up = new S;
        this.backButton = new ga;
        this._keyStates = new Fb };
    g["flambe.platform.BasicKeyboard"] = Bd;
    Bd.__name__ = ["flambe", "platform", "BasicKeyboard"];
    Bd.__interfaces__ = [cm];
    Bd.prototype = {
        isDown: function(a) { return this.isCodeDown(Lg.toKeyCode(a)) },
        isCodeDown: function(a) { return this._keyStates.exists(a) },
        submitDown: function(a) { if (16777238 == a) return null != this.backButton._head ? (this.backButton.emit(), !0) : !1;
            this._keyStates.exists(a) || (this._keyStates.set(a, !0), Bd._sharedEvent.init(Bd._sharedEvent.id + 1, Lg.toKey(a)), this.down.emit(Bd._sharedEvent)); return !0 },
        submitUp: function(a) {
            this._keyStates.exists(a) && (this._keyStates.remove(a), Bd._sharedEvent.init(Bd._sharedEvent.id +
                1, Lg.toKey(a)), this.up.emit(Bd._sharedEvent))
        },
        __class__: Bd
    };
    var dm = function() {};
    g["flambe.subsystem.MouseSystem"] = dm;
    dm.__name__ = ["flambe", "subsystem", "MouseSystem"];
    dm.prototype = { __class__: dm };
    var nc = function(a) { this._pointer = a;
        this._source = di.Mouse(nc._sharedEvent);
        this.down = new S;
        this.move = new S;
        this.up = new S;
        this.scroll = new S;
        this._y = this._x = 0;
        this._cursor = mc.Default;
        this._buttonStates = new Fb };
    g["flambe.platform.BasicMouse"] = nc;
    nc.__name__ = ["flambe", "platform", "BasicMouse"];
    nc.__interfaces__ = [dm];
    nc.prototype = {
        get_x: function() { return this._x },
        get_y: function() { return this._y },
        set_cursor: function(a) { return this._cursor = a },
        submitDown: function(a, b, c) { this._buttonStates.exists(c) || (this._buttonStates.set(c, !0), this.prepare(a, b, em.toButton(c)), this._pointer.submitDown(a, b, this._source), this.down.emit(nc._sharedEvent)) },
        submitMove: function(a, b) { this.prepare(a, b, null);
            this._pointer.submitMove(a, b, this._source);
            this.move.emit(nc._sharedEvent) },
        submitUp: function(a, b, c) {
            this._buttonStates.exists(c) &&
                (this._buttonStates.remove(c), this.prepare(a, b, em.toButton(c)), this._pointer.submitUp(a, b, this._source), this.up.emit(nc._sharedEvent))
        },
        submitScroll: function(a, b, c) { this._x = a;
            this._y = b; if (null == this.scroll._head) return !1;
            this.scroll.emit(c); return !0 },
        prepare: function(a, b, c) { this._x = a;
            this._y = b;
            nc._sharedEvent.init(nc._sharedEvent.id + 1, a, b, c) },
        __class__: nc,
        __properties__: { set_cursor: "set_cursor", get_y: "get_y", get_x: "get_x" }
    };
    var fm = function() {};
    g["flambe.subsystem.PointerSystem"] = fm;
    fm.__name__ = ["flambe",
        "subsystem", "PointerSystem"
    ];
    fm.prototype = { __class__: fm };
    var Zb = function(a, b, c) { null == c && (c = !1);
        null == b && (b = 0);
        null == a && (a = 0);
        this.down = new S;
        this.move = new S;
        this.up = new S;
        this._x = a;
        this._y = b;
        this._isDown = c };
    g["flambe.platform.BasicPointer"] = Zb;
    Zb.__name__ = ["flambe", "platform", "BasicPointer"];
    Zb.__interfaces__ = [fm];
    Zb.prototype = {
        get_x: function() { return this._x },
        get_y: function() { return this._y },
        submitDown: function(a, b, c) {
            if (!this._isDown) {
                this.submitMove(a, b, c);
                this._isDown = !0;
                var d = [],
                    e = r.hitTest(x.root,
                        a, b);
                if (null != e) { var f = e.owner;
                    do { var l = f._compMap.Sprite_2;
                        null != l && d.push(l);
                        f = f.parent } while (null != f) } this.prepare(a, b, e, c);
                for (a = 0; a < d.length;)
                    if (b = d[a], ++a, b.onPointerDown(Zb._sharedEvent), Zb._sharedEvent._stopped) return;
                this.down.emit(Zb._sharedEvent)
            }
        },
        submitMove: function(a, b, c) {
            if (!(a == this._x && b == this._y)) {
                var d = [],
                    e = r.hitTest(x.root, a, b);
                if (null != e) { var f = e.owner;
                    do { var l = f._compMap.Sprite_2;
                        null != l && d.push(l);
                        f = f.parent } while (null != f) } this.prepare(a, b, e, c);
                for (a = 0; a < d.length;)
                    if (b = d[a],
                        ++a, b.onPointerMove(Zb._sharedEvent), Zb._sharedEvent._stopped) return;
                this.move.emit(Zb._sharedEvent)
            }
        },
        submitUp: function(a, b, c) { if (this._isDown) { this.submitMove(a, b, c);
                this._isDown = !1; var d = [],
                    e = r.hitTest(x.root, a, b); if (null != e) { var f = e.owner;
                    do { var l = f._compMap.Sprite_2;
                        null != l && d.push(l);
                        f = f.parent } while (null != f) } this.prepare(a, b, e, c); for (a = 0; a < d.length;)
                    if (b = d[a], ++a, b.onPointerUp(Zb._sharedEvent), Zb._sharedEvent._stopped) return;
                this.up.emit(Zb._sharedEvent) } },
        prepare: function(a, b, c, d) {
            this._x =
                a;
            this._y = b;
            Zb._sharedEvent.init(Zb._sharedEvent.id + 1, a, b, c, d)
        },
        __class__: Zb,
        __properties__: { get_y: "get_y", get_x: "get_x" }
    };
    var Nb = function(a, b, c) { this._x = this._y = 0;
        this._parent = null;
        this.rootX = this.rootY = 0;
        this._disposed = !1;
        this.root = a;
        this._width = b;
        this._height = c };
    g["flambe.platform.BasicTexture"] = Nb;
    Nb.__name__ = ["flambe", "platform", "BasicTexture"];
    Nb.__interfaces__ = [En];
    Nb.__super__ = zb;
    Nb.prototype = k(zb.prototype, {
        subTexture: function(a, b, c, d) {
            c = this.root.createTexture(c, d);
            c._parent = this;
            c._x = a;
            c._y = b;
            c.rootX = this.rootX + a;
            c.rootY = this.rootY + b;
            return c
        },
        get_graphics: function() { return this.root.getGraphics() },
        onDisposed: function() { null == this._parent && this.root.dispose() },
        get_width: function() { return this._width },
        get_height: function() { return this._height },
        __class__: Nb,
        __properties__: { get_height: "get_height", get_width: "get_width", get_graphics: "get_graphics" }
    });
    var fi = function() {};
    g["flambe.subsystem.TouchSystem"] = fi;
    fi.__name__ = ["flambe", "subsystem", "TouchSystem"];
    fi.prototype = { __class__: fi };
    var Sh = function(a, b) { null == b && (b = 4);
        this._pointer = a;
        this._maxPoints = b;
        this._pointMap = new Fb;
        this._points = [];
        this.down = new S;
        this.move = new S;
        this.up = new S };
    g["flambe.platform.BasicTouch"] = Sh;
    Sh.__name__ = ["flambe", "platform", "BasicTouch"];
    Sh.__interfaces__ = [fi];
    Sh.prototype = {
        get_supported: function() { return !0 },
        get_points: function() { return this._points.slice() },
        submitDown: function(a, b, c) {
            if (!this._pointMap.exists(a)) {
                var d = new bm(a);
                d.init(b, c);
                this._pointMap.set(a, d);
                this._points.push(d);
                null == this._pointerTouch &&
                    (this._pointerTouch = d, this._pointer.submitDown(b, c, d._source));
                this.down.emit(d)
            }
        },
        submitMove: function(a, b, c) { a = this._pointMap.get(a);
            null != a && (a.init(b, c), this._pointerTouch == a && this._pointer.submitMove(b, c, a._source), this.move.emit(a)) },
        submitUp: function(a, b, c) { var d = this._pointMap.get(a);
            null != d && (d.init(b, c), this._pointMap.remove(a), H.remove(this._points, d), this._pointerTouch == d && (this._pointerTouch = null, this._pointer.submitUp(b, c, d._source)), this.up.emit(d)) },
        __class__: Sh,
        __properties__: {
            get_points: "get_points",
            get_supported: "get_supported"
        }
    };
    var Yf = function() {};
    g["flambe.sound.Sound"] = Yf;
    Yf.__name__ = ["flambe", "sound", "Sound"];
    Yf.__interfaces__ = [rf];
    Yf.prototype = { __class__: Yf };
    var Wc = function() { this._disposed = !1;
        this._playback = new gi(this) };
    g["flambe.platform.DummySound"] = Wc;
    Wc.__name__ = ["flambe", "platform", "DummySound"];
    Wc.__interfaces__ = [Yf];
    Wc.getInstance = function() { null == Wc._instance && (Wc._instance = new Wc); return Wc._instance };
    Wc.__super__ = zb;
    Wc.prototype = k(zb.prototype, {
        play: function() { return this._playback },
        loop: function() { return this._playback },
        get_duration: function() { return 0 },
        onDisposed: function() {},
        __class__: Wc,
        __properties__: { get_duration: "get_duration" }
    });
    var Zf = function() {};
    g["flambe.sound.Playback"] = Zf;
    Zf.__name__ = ["flambe", "sound", "Playback"];
    Zf.__interfaces__ = [Fc];
    Zf.prototype = { __class__: Zf };
    var gi = function(a) { this._sound = a;
        this.volume = new ca(0);
        this._complete = new $b(!0) };
    g["flambe.platform.DummyPlayback"] = gi;
    gi.__name__ = ["flambe", "platform", "DummyPlayback"];
    gi.__interfaces__ = [Zf];
    gi.prototype = { set_paused: function() { return !0 }, get_complete: function() { return this._complete }, dispose: function() {}, __class__: gi, __properties__: { get_complete: "get_complete", set_paused: "set_paused" } };
    var hi = function() {};
    g["flambe.subsystem.StorageSystem"] = hi;
    hi.__name__ = ["flambe", "subsystem", "StorageSystem"];
    hi.prototype = { __class__: hi };
    var Wh = function() { this.clear() };
    g["flambe.platform.DummyStorage"] = Wh;
    Wh.__name__ = ["flambe", "platform", "DummyStorage"];
    Wh.__interfaces__ = [hi];
    Wh.prototype = {
        set: function(a, b) {
            this._hash.set(a,
                b);
            return !0
        },
        get: function(a, b) { return this._hash.exists(a) ? this._hash.get(a) : b },
        clear: function() { this._hash = new M },
        __class__: Wh
    };
    var Th = function() { this.down = new S;
        this.move = new S;
        this.up = new S };
    g["flambe.platform.DummyTouch"] = Th;
    Th.__name__ = ["flambe", "platform", "DummyTouch"];
    Th.__interfaces__ = [fi];
    Th.prototype = { get_supported: function() { return !1 }, get_points: function() { return [] }, __class__: Th, __properties__: { get_points: "get_points", get_supported: "get_supported" } };
    var Mg = function() { this._entries = [] };
    g["flambe.platform.EventGroup"] = Mg;
    Mg.__name__ = ["flambe", "platform", "EventGroup"];
    Mg.__interfaces__ = [Fc];
    Mg.prototype = { addListener: function(a, b, c) { a.addEventListener(b, c, !1);
            this._entries.push(new gm(a, b, c)) }, addDisposingListener: function(a, b, c) { var d = this;
            this.addListener(a, b, function(a) { d.dispose();
                c(a) }) }, dispose: function() { for (var a = 0, b = this._entries; a < b.length;) { var c = b[a];++a;
                c.dispatcher.removeEventListener(c.type, c.listener, !1) } this._entries = [] }, __class__: Mg };
    var gm = function(a, b, c) {
        this.dispatcher =
            a;
        this.type = b;
        this.listener = c
    };
    g["flambe.platform._EventGroup.Entry"] = gm;
    gm.__name__ = ["flambe", "platform", "_EventGroup", "Entry"];
    gm.prototype = { __class__: gm };
    var Ng = function() {};
    g["flambe.platform.InternalGraphics"] = Ng;
    Ng.__name__ = ["flambe", "platform", "InternalGraphics"];
    Ng.__interfaces__ = [Yl];
    Ng.prototype = { __class__: Ng };
    var hm = function() {};
    g["flambe.subsystem.RendererSystem"] = hm;
    hm.__name__ = ["flambe", "subsystem", "RendererSystem"];
    hm.prototype = { __class__: hm };
    var Og = function() {};
    g["flambe.platform.InternalRenderer"] =
        Og;
    Og.__name__ = ["flambe", "platform", "InternalRenderer"];
    Og.__interfaces__ = [hm];
    Og.prototype = { __class__: Og };
    var Lg = function() {};
    g["flambe.platform.KeyCodes"] = Lg;
    Lg.__name__ = ["flambe", "platform", "KeyCodes"];
    Lg.toKey = function(a) {
        switch (a) {
            case 65:
                return j.A;
            case 66:
                return j.B;
            case 67:
                return j.C;
            case 68:
                return j.D;
            case 69:
                return j.E;
            case 70:
                return j.F;
            case 71:
                return j.G;
            case 72:
                return j.H;
            case 73:
                return j.I;
            case 74:
                return j.J;
            case 75:
                return j.K;
            case 76:
                return j.L;
            case 77:
                return j.M;
            case 78:
                return j.N;
            case 79:
                return j.O;
            case 80:
                return j.P;
            case 81:
                return j.Q;
            case 82:
                return j.R;
            case 83:
                return j.S;
            case 84:
                return j.T;
            case 85:
                return j.U;
            case 86:
                return j.V;
            case 87:
                return j.W;
            case 88:
                return j.X;
            case 89:
                return j.Y;
            case 90:
                return j.Z;
            case 48:
                return j.Number0;
            case 49:
                return j.Number1;
            case 50:
                return j.Number2;
            case 51:
                return j.Number3;
            case 52:
                return j.Number4;
            case 53:
                return j.Number5;
            case 54:
                return j.Number6;
            case 55:
                return j.Number7;
            case 56:
                return j.Number8;
            case 57:
                return j.Number9;
            case 96:
                return j.Numpad0;
            case 97:
                return j.Numpad1;
            case 98:
                return j.Numpad2;
            case 99:
                return j.Numpad3;
            case 100:
                return j.Numpad4;
            case 101:
                return j.Numpad5;
            case 102:
                return j.Numpad6;
            case 103:
                return j.Numpad7;
            case 104:
                return j.Numpad8;
            case 105:
                return j.Numpad9;
            case 107:
                return j.NumpadAdd;
            case 110:
                return j.NumpadDecimal;
            case 111:
                return j.NumpadDivide;
            case 108:
                return j.NumpadEnter;
            case 106:
                return j.NumpadMultiply;
            case 109:
                return j.NumpadSubtract;
            case 112:
                return j.F1;
            case 113:
                return j.F2;
            case 114:
                return j.F3;
            case 115:
                return j.F4;
            case 116:
                return j.F5;
            case 117:
                return j.F6;
            case 118:
                return j.F7;
            case 119:
                return j.F8;
            case 120:
                return j.F9;
            case 121:
                return j.F10;
            case 122:
                return j.F11;
            case 123:
                return j.F12;
            case 37:
                return j.Left;
            case 38:
                return j.Up;
            case 39:
                return j.Right;
            case 40:
                return j.Down;
            case 18:
                return j.Alt;
            case 192:
                return j.Backquote;
            case 220:
                return j.Backslash;
            case 8:
                return j.Backspace;
            case 20:
                return j.CapsLock;
            case 188:
                return j.Comma;
            case 15:
                return j.Command;
            case 17:
                return j.Control;
            case 46:
                return j.Delete;
            case 35:
                return j.End;
            case 13:
                return j.Enter;
            case 187:
                return j.Equals;
            case 27:
                return j.Escape;
            case 36:
                return j.Home;
            case 45:
                return j.Insert;
            case 219:
                return j.LeftBracket;
            case 189:
                return j.Minus;
            case 34:
                return j.PageDown;
            case 33:
                return j.PageUp;
            case 190:
                return j.Period;
            case 222:
                return j.Quote;
            case 221:
                return j.RightBracket;
            case 186:
                return j.Semicolon;
            case 16:
                return j.Shift;
            case 191:
                return j.Slash;
            case 32:
                return j.Space;
            case 9:
                return j.Tab;
            case 16777234:
                return j.Menu;
            case 16777247:
                return j.Search
        }
        return j.Unknown(a)
    };
    Lg.toKeyCode =
        function(a) {
            switch (a[1]) {
                case 0:
                    return 65;
                case 1:
                    return 66;
                case 2:
                    return 67;
                case 3:
                    return 68;
                case 4:
                    return 69;
                case 5:
                    return 70;
                case 6:
                    return 71;
                case 7:
                    return 72;
                case 8:
                    return 73;
                case 9:
                    return 74;
                case 10:
                    return 75;
                case 11:
                    return 76;
                case 12:
                    return 77;
                case 13:
                    return 78;
                case 14:
                    return 79;
                case 15:
                    return 80;
                case 16:
                    return 81;
                case 17:
                    return 82;
                case 18:
                    return 83;
                case 19:
                    return 84;
                case 20:
                    return 85;
                case 21:
                    return 86;
                case 22:
                    return 87;
                case 23:
                    return 88;
                case 24:
                    return 89;
                case 25:
                    return 90;
                case 26:
                    return 48;
                case 27:
                    return 49;
                case 28:
                    return 50;
                case 29:
                    return 51;
                case 30:
                    return 52;
                case 31:
                    return 53;
                case 32:
                    return 54;
                case 33:
                    return 55;
                case 34:
                    return 56;
                case 35:
                    return 57;
                case 36:
                    return 96;
                case 37:
                    return 97;
                case 38:
                    return 98;
                case 39:
                    return 99;
                case 40:
                    return 100;
                case 41:
                    return 101;
                case 42:
                    return 102;
                case 43:
                    return 103;
                case 44:
                    return 104;
                case 45:
                    return 105;
                case 46:
                    return 107;
                case 47:
                    return 110;
                case 48:
                    return 111;
                case 49:
                    return 108;
                case 50:
                    return 106;
                case 51:
                    return 109;
                case 52:
                    return 112;
                case 53:
                    return 113;
                case 54:
                    return 114;
                case 55:
                    return 115;
                case 56:
                    return 116;
                case 57:
                    return 117;
                case 58:
                    return 118;
                case 59:
                    return 119;
                case 60:
                    return 120;
                case 61:
                    return 121;
                case 62:
                    return 122;
                case 63:
                    return 123;
                case 64:
                    return 124;
                case 65:
                    return 125;
                case 66:
                    return 126;
                case 67:
                    return 37;
                case 68:
                    return 38;
                case 69:
                    return 39;
                case 70:
                    return 40;
                case 71:
                    return 18;
                case 72:
                    return 192;
                case 73:
                    return 220;
                case 74:
                    return 8;
                case 75:
                    return 20;
                case 76:
                    return 188;
                case 77:
                    return 15;
                case 78:
                    return 17;
                case 79:
                    return 46;
                case 80:
                    return 35;
                case 81:
                    return 13;
                case 82:
                    return 187;
                case 83:
                    return 27;
                case 84:
                    return 36;
                case 85:
                    return 45;
                case 86:
                    return 219;
                case 87:
                    return 189;
                case 88:
                    return 34;
                case 89:
                    return 33;
                case 90:
                    return 190;
                case 91:
                    return 222;
                case 92:
                    return 221;
                case 93:
                    return 186;
                case 94:
                    return 16;
                case 95:
                    return 191;
                case 96:
                    return 32;
                case 97:
                    return 9;
                case 98:
                    return 16777234;
                case 99:
                    return 16777247;
                case 100:
                    return a[2]
            }
        };
    var Sf = function() { this._tickables = [] };
    g["flambe.platform.MainLoop"] = Sf;
    Sf.__name__ = ["flambe", "platform", "MainLoop"];
    Sf.updateEntity = function(a, b) {
        var c = a._compMap.SpeedAdjuster_67;
        if (null != c && (c._realDt = b, b *= c.scale._value, 0 >= b)) { c.onUpdate(b); return }
        for (c = a.firstComponent; null != c;) { var d = c.next;
            0 == (c._flags & 1) && (c._flags |= 1, c.onStart());
            c.onUpdate(b);
            c = d }
        for (c = a.firstChild; null != c;) d = c.next, Sf.updateEntity(c, b), c = d
    };
    Sf.prototype = {
        update: function(a) { if (!(0 >= a)) { 1 < a && (a = 1); for (var b = 0; b < this._tickables.length;) { var c = this._tickables[b];
                    null == c || c.update(a) ? this._tickables.splice(b, 1) : ++b } x.volume.update(a);
                Sf.updateEntity(x.root, a) } },
        render: function(a) {
            var b = a.graphics;
            null !=
                b && (a.willRender(), r.render(x.root, b), a.didRender())
        },
        addTickable: function(a) { this._tickables.push(a) },
        __class__: Sf
    };
    var im = function() {};
    g["flambe.platform.MathUtil"] = im;
    im.__name__ = ["flambe", "platform", "MathUtil"];
    im.nextPowerOfTwo = function(a) { for (var b = 1; b < a;) b <<= 1; return b };
    var em = function() {};
    g["flambe.platform.MouseCodes"] = em;
    em.__name__ = ["flambe", "platform", "MouseCodes"];
    em.toButton = function(a) { switch (a) {
            case 0:
                return lc.Left;
            case 1:
                return lc.Middle;
            case 2:
                return lc.Right } return lc.Unknown(a) };
    var ii = function() {};
    g["flambe.platform.TextureRoot"] = ii;
    ii.__name__ = ["flambe", "platform", "TextureRoot"];
    ii.prototype = { __class__: ii };
    var ji = function() {};
    g["flambe.platform.Tickable"] = ji;
    ji.__name__ = ["flambe", "platform", "Tickable"];
    ji.prototype = { __class__: ji };
    var Rd = function(a, b) { this._firstDraw = !1;
        this._canvasCtx = a.getContext("2d", { alpha: b }) };
    g["flambe.platform.html.CanvasGraphics"] = Rd;
    Rd.__name__ = ["flambe", "platform", "html", "CanvasGraphics"];
    Rd.__interfaces__ = [Ng];
    Rd.prototype = {
        save: function() { this._canvasCtx.save() },
        translate: function(a, b) { this._canvasCtx.translate(a | 0, b | 0) },
        scale: function(a, b) { this._canvasCtx.scale(a, b) },
        rotate: function(a) { this._canvasCtx.rotate(3.141592653589793 * a / 180) },
        transform: function(a, b, c, d, e, f) { this._canvasCtx.transform(a, b, c, d, e, f) },
        restore: function() { this._canvasCtx.restore() },
        drawTexture: function(a, b, c) { this.drawSubTexture(a, b, c, 0, 0, a.get_width(), a.get_height()) },
        drawSubTexture: function(a, b, c, d, e, f, l) {
            this._firstDraw ? (this._firstDraw = !1, this._canvasCtx.globalCompositeOperation = "copy",
                this.drawSubTexture(a, b, c, d, e, f, l), this._canvasCtx.globalCompositeOperation = "source-over") : this._canvasCtx.drawImage(a.root.image, a.rootX + d | 0, a.rootY + e | 0, f | 0, l | 0, b | 0, c | 0, f | 0, l | 0)
        },
        drawPattern: function(a, b, c, d, e) { this._firstDraw ? (this._firstDraw = !1, this._canvasCtx.globalCompositeOperation = "copy", this.drawPattern(a, b, c, d, e), this._canvasCtx.globalCompositeOperation = "source-over") : (this._canvasCtx.fillStyle = a.getPattern(), this._canvasCtx.fillRect(b | 0, c | 0, d | 0, e | 0)) },
        fillRect: function(a, b, c, d, e) {
            if (this._firstDraw) this._firstDraw = !1, this._canvasCtx.globalCompositeOperation = "copy", this.fillRect(a, b, c, d, e), this._canvasCtx.globalCompositeOperation = "source-over";
            else { for (a = (16777215 & a).toString(16); 6 > a.length;) a = "0" + y.string(a);
                this._canvasCtx.fillStyle = "#" + y.string(a);
                this._canvasCtx.fillRect(b | 0, c | 0, d | 0, e | 0) }
        },
        multiplyAlpha: function(a) { this._canvasCtx.globalAlpha *= a },
        setBlendMode: function(a) {
            var b;
            switch (a[1]) {
                case 0:
                    b = "source-over";
                    break;
                case 1:
                    b = "lighter";
                    break;
                case 2:
                    b = "multiply";
                    break;
                case 3:
                    b = "screen";
                    break;
                case 4:
                    b = "destination-in";
                    break;
                case 5:
                    b = "copy"
            }
            this._canvasCtx.globalCompositeOperation = b
        },
        applyScissor: function(a, b, c, d) { this._canvasCtx.beginPath();
            this._canvasCtx.rect(a | 0, b | 0, c | 0, d | 0);
            this._canvasCtx.clip() },
        willRender: function() { this._firstDraw = !0 },
        didRender: function() {},
        onResize: function() {},
        __class__: Rd
    };
    var Tf = function(a) { this.graphics = new Rd(a, !1);
        this._hasGPU = new $b(!0) };
    g["flambe.platform.html.CanvasRenderer"] = Tf;
    Tf.__name__ = ["flambe", "platform", "html", "CanvasRenderer"];
    Tf.__interfaces__ = [Og];
    Tf.prototype = {
        get_type: function() { return Cd.Canvas },
        createTextureFromImage: function(a) { a = new $f(Tf.CANVAS_TEXTURES ? ea.createCanvas(a) : a); return a.createTexture(a.width, a.height) },
        createTexture: function(a, b) { return (new $f(ea.createEmptyCanvas(a, b))).createTexture(a, b) },
        getCompressedTextureFormats: function() { return [] },
        createCompressedTexture: function() { return null },
        willRender: function() { this.graphics.willRender() },
        didRender: function() { this.graphics.didRender() },
        __class__: Tf,
        __properties__: { get_type: "get_type" }
    };
    var ki = function(a, b, c) {
        this._rootUpdateCount =
            0;
        this._pattern = null;
        Nb.call(this, a, b, c)
    };
    g["flambe.platform.html.CanvasTexture"] = ki;
    ki.__name__ = ["flambe", "platform", "html", "CanvasTexture"];
    ki.__super__ = Nb;
    ki.prototype = k(Nb.prototype, { getPattern: function() { if (this._rootUpdateCount != this.root.updateCount || null == this._pattern) this._rootUpdateCount = this.root.updateCount, this._pattern = this.root.createPattern(this.rootX, this.rootY, this._width, this._height); return this._pattern }, __class__: ki });
    var $f = function(a) {
        this._graphics = null;
        this.updateCount =
            0;
        this._disposed = !1;
        this.image = a;
        this.width = a.width;
        this.height = a.height
    };
    g["flambe.platform.html.CanvasTextureRoot"] = $f;
    $f.__name__ = ["flambe", "platform", "html", "CanvasTextureRoot"];
    $f.__interfaces__ = [ii];
    $f.__super__ = zb;
    $f.prototype = k(zb.prototype, {
        createTexture: function(a, b) { return new ki(this, a, b) },
        getGraphics: function() { null == this._graphics && (this.getContext2d(), this._graphics = new li(this)); return this._graphics },
        createPattern: function(a, b, c, d) {
            var e = this.getContext2d(),
                f = this.image;
            if (0 != a ||
                0 != b || c != this.width || d != this.height) f = ea.createEmptyCanvas(c, d), c = f.getContext("2d"), c.globalCompositeOperation = "copy", c.drawImage(this.image, -a, -b);
            return e.createPattern(f, "repeat")
        },
        getContext2d: function() { I.__instanceof(this.image, HTMLCanvasElement) || (this.image = ea.createCanvas(this.image)); return this.image.getContext("2d") },
        onDisposed: function() { this._graphics = this.image = null },
        __class__: $f
    });
    var li = function(a) { Rd.call(this, a.image, !0);
        this._renderTarget = a };
    g["flambe.platform.html._CanvasTextureRoot.InternalGraphics"] =
        li;
    li.__name__ = ["flambe", "platform", "html", "_CanvasTextureRoot", "InternalGraphics"];
    li.__super__ = Rd;
    li.prototype = k(Rd.prototype, {
        drawTexture: function(a, b, c) { Rd.prototype.drawTexture.call(this, a, b, c);++this._renderTarget.updateCount },
        drawSubTexture: function(a, b, c, d, e, f, l) { Rd.prototype.drawSubTexture.call(this, a, b, c, d, e, f, l);++this._renderTarget.updateCount },
        drawPattern: function(a, b, c, d, e) { Rd.prototype.drawPattern.call(this, a, b, c, d, e);++this._renderTarget.updateCount },
        fillRect: function(a, b, c, d, e) {
            Rd.prototype.fillRect.call(this,
                a, b, c, d, e);
            ++this._renderTarget.updateCount
        },
        __class__: li
    });
    var Da = function(a, b) { vf.call(this, a, b) };
    g["flambe.platform.html.HtmlAssetPackLoader"] = Da;
    Da.__name__ = ["flambe", "platform", "html", "HtmlAssetPackLoader"];
    Da.detectImageFormats = function(a) {
        var b = [O.PNG, O.JPG, O.GIF],
            c = 2,
            d;
        d = window.document.createElement("img");
        d.onload = d.onerror = function() { 1 == d.width && b.unshift(O.WEBP);--c;
            0 == c && a(b) };
        d.src = "data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";
        var e;
        e = window.document.createElement("img");
        e.onload = e.onerror = function() { 1 == e.width && b.unshift(O.JXR);--c;
            0 == c && a(b) };
        e.src = "data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="
    };
    Da.detectAudioFormats = function() {
        var a;
        a = window.document.createElement("audio");
        if (null == a || null == m(a, a.canPlayType)) return [];
        var b = new Uc("\\b(iPhone|iPod|iPad|Windows Phone)\\b", ""),
            c = window.navigator.userAgent;
        if (!wa.get_supported() &&
            b.match(c)) return [];
        for (var b = [{ format: O.M4A, mimeType: "audio/mp4; codecs=mp4a" }, { format: O.MP3, mimeType: "audio/mpeg" }, { format: O.OPUS, mimeType: "audio/ogg; codecs=opus" }, { format: O.OGG, mimeType: "audio/ogg; codecs=vorbis" }, { format: O.WAV, mimeType: "audio/wav" }], c = [], d = 0; d < b.length;) { var e = b[d];++d; var f = ""; try { f = a.canPlayType(e.mimeType) } catch (l) {} "" != f && c.push(e.format) }
        return c
    };
    Da.supportsBlob = function() {
        if (Da._detectBlobSupport) {
            Da._detectBlobSupport = !1;
            if ((new Uc("\\bSilk\\b", "")).match(window.navigator.userAgent) ||
                null == window.Blob) return !1;
            var a = new XMLHttpRequest;
            a.open("GET", ".", !0);
            if ("" != a.responseType) return !1;
            a.responseType = "blob";
            if ("blob" != a.responseType) return !1;
            Da._URL = ea.loadExtension("URL").value
        }
        return null != Da._URL && null != Da._URL.createObjectURL
    };
    Da.__super__ = vf;
    Da.prototype = k(vf.prototype, {
        loadEntry: function(a, b) {
            var c = this;
            switch (b.format[1]) {
                case 0:
                case 1:
                case 2:
                case 3:
                case 4:
                    var d;
                    d = window.document.createElement("img");
                    var e = new Mg;
                    e.addDisposingListener(d, "load", function() {
                        Da.supportsBlob() &&
                            Da._URL.revokeObjectURL(d.src);
                        var a = c._platform.getRenderer().createTextureFromImage(d);
                        null != a ? c.handleLoad(b, a) : c.handleTextureError(b)
                    });
                    e.addDisposingListener(d, "error", function() { c.handleError(b, "Failed to load image") });
                    Da.supportsBlob() ? this.download(a, b, "blob", function(a) { d.src = Da._URL.createObjectURL(a) }) : d.src = a;
                    break;
                case 5:
                case 6:
                case 7:
                    this.download(a, b, "arraybuffer", function() { var a = c._platform.getRenderer().createCompressedTexture(b.format, null);
                        null != a ? c.handleLoad(b, a) : c.handleTextureError(b) });
                    break;
                case 8:
                case 9:
                case 10:
                case 11:
                case 12:
                    if (wa.get_supported()) this.download(a, b, "arraybuffer", function(a) { wa.ctx.decodeAudioData(a, function(a) { c.handleLoad(b, new wa(a)) }, function() { c.handleLoad(b, Wc.getInstance()) }) });
                    else {
                        var f;
                        f = window.document.createElement("audio");
                        f.preload = "auto";
                        var l = ++Da._mediaRefCount;
                        null == Da._mediaElements && (Da._mediaElements = new Fb);
                        Da._mediaElements.set(l, f);
                        e = new Mg;
                        e.addDisposingListener(f, "canplaythrough", function() {
                            Da._mediaElements.remove(l);
                            c.handleLoad(b,
                                new Pg(f))
                        });
                        e.addDisposingListener(f, "error", function() { Da._mediaElements.remove(l); var a = f.error.code;
                            3 == a || 4 == a ? c.handleLoad(b, Wc.getInstance()) : c.handleError(b, "Failed to load audio: " + f.error.code) });
                        e.addListener(f, "progress", function() { if (0 < f.buffered.length && 0 < f.duration) { var a = f.buffered.end(0) / f.duration;
                                c.handleProgress(b, a * b.bytes | 0) } });
                        f.src = a;
                        f.load()
                    }
                    break;
                case 13:
                    this.download(a, b, "text", function(a) { c.handleLoad(b, new Kg(a)) })
            }
        },
        getAssetFormats: function(a) {
            var b = this;
            null == Da._supportedFormats &&
                (Da._supportedFormats = new uf, Da.detectImageFormats(function(a) { Da._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(Da.detectAudioFormats()).concat([O.Data])) }));
            Da._supportedFormats.get(a)
        },
        download: function(a, b, c, d) {
            var e = this,
                f = null,
                l = null,
                v = 0,
                h = !1,
                g = function() { h && (h = !1, window.clearInterval(v)) },
                i = 3,
                j = function() {--i; return 0 <= i ? (l(), !0) : !1 },
                l = function() {
                    g();
                    null != f && f.abort();
                    f = new XMLHttpRequest;
                    f.open("GET", a, !0);
                    f.responseType = c;
                    var l = 0;
                    f.onprogress =
                        function(a) { h || (h = !0, v = window.setInterval(function() { 4 != f.readyState && 5E3 < Date.now() - l && !j() && (g(), e.handleError(b, "Download stalled")) }, 1E3));
                            l = Date.now();
                            e.handleProgress(b, a.loaded) };
                    f.onerror = function() { if (0 != f.status || !j()) g(), e.handleError(b, "HTTP error " + f.status) };
                    f.onload = function() { var a = f.response;
                        null == a && (a = f.responseText);
                        g();
                        d(a) };
                    f.send()
                };
            l()
        },
        __class__: Da
    });
    var jm = function() {};
    g["flambe.subsystem.ExternalSystem"] = jm;
    jm.__name__ = ["flambe", "subsystem", "ExternalSystem"];
    jm.prototype = { __class__: jm };
    var Xh = function() {};
    g["flambe.platform.html.HtmlExternal"] = Xh;
    Xh.__name__ = ["flambe", "platform", "html", "HtmlExternal"];
    Xh.__interfaces__ = [jm];
    Xh.prototype = { call: function(a, b) { null == b && (b = []); for (var c = window, d = c, e = 0, f = a.split("."); e < f.length;) { var l = f[e];++e;
                c = d;
                d = z.field(c, l) } return d.apply(c, b) }, __class__: Xh };
    var Rh = function(a, b) { nc.call(this, a);
        this._canvas = b };
    g["flambe.platform.html.HtmlMouse"] = Rh;
    Rh.__name__ = ["flambe", "platform", "html", "HtmlMouse"];
    Rh.__super__ = nc;
    Rh.prototype =
        k(nc.prototype, { set_cursor: function(a) { var b; switch (a[1]) {
                    case 0:
                        b = ""; break;
                    case 1:
                        b = "pointer"; break;
                    case 2:
                        b = "none" } this._canvas.style.cursor = b; return nc.prototype.set_cursor.call(this, a) }, __class__: Rh });
    var Pg = function(a) { this._disposed = !1;
        this.audioElement = a };
    g["flambe.platform.html.HtmlSound"] = Pg;
    Pg.__name__ = ["flambe", "platform", "html", "HtmlSound"];
    Pg.__interfaces__ = [Yf];
    Pg.__super__ = zb;
    Pg.prototype = k(zb.prototype, {
        play: function(a) { null == a && (a = 1); return new Qg(this, a, !1) },
        loop: function(a) {
            null ==
                a && (a = 1);
            return new Qg(this, a, !0)
        },
        get_duration: function() { return this.audioElement.duration },
        onDisposed: function() { this.audioElement = null },
        __class__: Pg,
        __properties__: { get_duration: "get_duration" }
    });
    var Qg = function(a, b, c) {
        var d = this;
        this._sound = a;
        this._tickableAdded = !1;
        this._clonedElement = window.document.createElement("audio");
        this._clonedElement.loop = c;
        this._clonedElement.src = a.audioElement.src;
        this.volume = new ca(b, function() { d.updateVolume() });
        this.updateVolume();
        this._complete = new $b(!1);
        this.playAudio();
        x.hidden._value && this.set_paused(!0)
    };
    g["flambe.platform.html._HtmlSound.HtmlPlayback"] = Qg;
    Qg.__name__ = ["flambe", "platform", "html", "_HtmlSound", "HtmlPlayback"];
    Qg.__interfaces__ = [ji, Zf];
    Qg.prototype = {
        set_paused: function(a) { this._clonedElement.paused != a && (a ? this._clonedElement.pause() : this.playAudio()); return a },
        get_complete: function() { return this._complete },
        update: function(a) {
            this.volume.update(a);
            this._complete.set__(this._clonedElement.ended);
            return this._complete._value || this._clonedElement.paused ?
                (this._tickableAdded = !1, this._volumeBinding.dispose(), this._hideBinding.dispose(), !0) : !1
        },
        dispose: function() { this.set_paused(!0);
            this._complete.set__(!0) },
        playAudio: function() {
            var a = this;
            this._clonedElement.loop && !Bb.instance.musicPlaying && (Bb.instance.musicPlaying = !0, this._clonedElement.play(), this._tickableAdded || (Bb.instance.mainLoop.addTickable(this), this._tickableAdded = !0, this._volumeBinding = x.volume.get_changed().connect(function() { a.updateVolume() }), this._hideBinding = x.hidden.get_changed().connect(function(b) {
                b ?
                    (a._wasPaused = a._clonedElement.paused, a.set_paused(!0)) : a.set_paused(a._wasPaused)
            })))
        },
        updateVolume: function() { this._clonedElement.volume = x.volume._value * this.volume._value },
        __class__: Qg,
        __properties__: { get_complete: "get_complete", set_paused: "set_paused" }
    };
    var km = function() {};
    g["flambe.subsystem.StageSystem"] = km;
    km.__name__ = ["flambe", "subsystem", "StageSystem"];
    km.prototype = { __class__: km };
    var Hg = function(a) {
        var b = this;
        this._canvas = a;
        this.resize = new ga;
        this.scaleFactor = 1;
        ea.SHOULD_HIDE_MOBILE_BROWSER &&
            (window.addEventListener("orientationchange", function() { ea.callLater(m(b, b.hideMobileBrowser), 200) }, !1), this.hideMobileBrowser());
        window.addEventListener("resize", m(this, this.onWindowResize), !1);
        this.onWindowResize(null);
        this.orientation = new $b(null);
        null != window.orientation && (window.addEventListener("orientationchange", m(this, this.onOrientationChange), !1), this.onOrientationChange(null));
        this.fullscreen = new $b(!1);
        ea.addVendorListener(window.document, "fullscreenchange", function() { b.updateFullscreen() },
            !1);
        this.updateFullscreen()
    };
    g["flambe.platform.html.HtmlStage"] = Hg;
    Hg.__name__ = ["flambe", "platform", "html", "HtmlStage"];
    Hg.__interfaces__ = [km];
    Hg.prototype = {
        get_width: function() { return this._canvas.width },
        get_height: function() { return this._canvas.height },
        onWindowResize: function() { var a = this._canvas.parentElement.getBoundingClientRect();
            this.resizeCanvas(a.width, a.height) },
        resizeCanvas: function(a, b) {
            var c = this.scaleFactor * a,
                d = this.scaleFactor * b;
            if (this._canvas.width == c && this._canvas.height == d) return !1;
            this._canvas.width = c | 0;
            this._canvas.height = d | 0;
            this.resize.emit();
            return !0
        },
        hideMobileBrowser: function() { var a = this,
                b = window.document.documentElement.style;
            b.height = window.innerHeight + 100 + "px";
            b.width = window.innerWidth + "px";
            b.overflow = "visible";
            ea.callLater(function() { ea.hideMobileBrowser();
                ea.callLater(function() { b.height = window.innerHeight + "px";
                    a.onWindowResize(null) }, 100) }) },
        onOrientationChange: function() { this.orientation.set__(ea.orientation(window.orientation)) },
        updateFullscreen: function() {
            this.fullscreen.set__(!0 ==
                ea.loadFirstExtension(["fullscreen", "fullScreen", "isFullScreen"], window.document).value)
        },
        __class__: Hg,
        __properties__: { get_height: "get_height", get_width: "get_width" }
    };
    var Vh = function(a) { this._storage = a };
    g["flambe.platform.html.HtmlStorage"] = Vh;
    Vh.__name__ = ["flambe", "platform", "html", "HtmlStorage"];
    Vh.__interfaces__ = [hi];
    Vh.prototype = {
        set: function(a, b) { var c; try { var d = new ve;
                d.useCache = !0;
                d.useEnumIndex = !1;
                d.serialize(b);
                c = d.toString() } catch (e) { return !1 } try { this._storage.setItem("flambe:" + a, c) } catch (f) { return !1 } return !0 },
        get: function(a, b) { var c = null; try { c = this._storage.getItem("flambe:" + a) } catch (d) { null } if (null != c) try { return ac.run(c) } catch (e) { null }
            return b },
        __class__: Vh
    };
    var ea = function() {};
    g["flambe.platform.html.HtmlUtil"] = ea;
    ea.__name__ = ["flambe", "platform", "html", "HtmlUtil"];
    ea.callLater = function(a, b) { null == b && (b = 0);
        window.setTimeout(a, b) };
    ea.hideMobileBrowser = function() { window.scrollTo(1, 0) };
    ea.loadExtension = function(a, b) {
        null == b && (b = window);
        var c = z.field(b, a);
        if (null != c) return { prefix: "", field: a, value: c };
        for (var c =
                a.charAt(0).toUpperCase() + H.substr(a, 1, null), d = 0, e = ea.VENDOR_PREFIXES; d < e.length;) { var f = e[d];++d; var l = f + c,
                v = z.field(b, l); if (null != v) return { prefix: f, field: l, value: v } }
        return { prefix: null, field: null, value: null }
    };
    ea.loadFirstExtension = function(a, b) { for (var c = 0; c < a.length;) { var d = a[c];++c;
            d = ea.loadExtension(d, b); if (null != d.field) return d } return { prefix: null, field: null, value: null } };
    ea.polyfill = function(a, b) { null == b && (b = window); var c = ea.loadExtension(a, b).value; if (null == c) return !1;
        b[a] = c; return !0 };
    ea.addVendorListener =
        function(a, b, c, d) { for (var e = 0, f = ea.VENDOR_PREFIXES; e < f.length;) { var l = f[e];++e;
                a.addEventListener(l + b, c, d) } a.addEventListener(b, c, d) };
    ea.orientation = function(a) { switch (a) {
            case -90:
            case 90:
                return Qe.Landscape;
            default:
                return Qe.Portrait } };
    ea.createEmptyCanvas = function(a, b) { var c;
        c = window.document.createElement("canvas");
        c.width = a;
        c.height = b; return c };
    ea.createCanvas = function(a) {
        var b = ea.createEmptyCanvas(a.width, a.height),
            c = b.getContext("2d");
        c.save();
        c.globalCompositeOperation = "copy";
        c.drawImage(a,
            0, 0);
        c.restore();
        return b
    };
    ea.detectSlowDriver = function(a) { if (0 <= window.navigator.platform.indexOf("Win") && null != window.chrome) { for (var b = 0, a = a.getSupportedExtensions(); b < a.length;) { var c = a[b];++b; if (0 <= c.indexOf("WEBGL_compressed_texture")) return !1 } return !0 } return !1 };
    ea.fixAndroidMath = function() { if (0 <= window.navigator.userAgent.indexOf("Linux; U; Android 4")) { var a = Math.sin,
                b = Math.cos;
            Math.sin = function(b) { return 0 == b ? 0 : a(b) };
            Math.cos = function(a) { return 0 == a ? 1 : b(a) } } };
    var wa = function(a) {
        this._disposed = !1;
        this.buffer = a
    };
    g["flambe.platform.html.WebAudioSound"] = wa;
    wa.__name__ = ["flambe", "platform", "html", "WebAudioSound"];
    wa.__interfaces__ = [Yf];
    wa.__properties__ = { get_supported: "get_supported" };
    wa.get_supported = function() { if (wa._detectSupport) { wa._detectSupport = !1; var a = ea.loadExtension("AudioContext").value;
            null != a && (wa.ctx = new a, wa.gain = wa.createGain(), wa.gain.connect(wa.ctx.destination), x.volume.watch(function(a) { wa.gain.gain.value = a })) } return null != wa.ctx };
    wa.createGain = function() {
        return null != wa.ctx.createGain ?
            wa.ctx.createGain() : wa.ctx.createGainNode()
    };
    wa.start = function(a, b) { null != a.start ? a.start(b) : a.noteOn(b) };
    wa.__super__ = zb;
    wa.prototype = k(zb.prototype, { play: function(a) { null == a && (a = 1); return new Rg(this, a, !1) }, loop: function(a) { null == a && (a = 1); return new Rg(this, a, !0) }, get_duration: function() { return this.buffer.duration }, onDisposed: function() { this.buffer = null }, __class__: wa, __properties__: { get_duration: "get_duration" } });
    var Rg = function(a, b, c) {
        var d = this;
        this._sound = a;
        this._head = wa.gain;
        this._complete =
            new $b(!1);
        this._sourceNode = wa.ctx.createBufferSource();
        this._sourceNode.buffer = a.buffer;
        this._sourceNode.loop = c;
        this._sourceNode.onended = function() { d._complete.set__(!0) };
        wa.start(this._sourceNode, 0);
        this.playAudio();
        this.volume = new ca(b, function(a) { d.setVolume(a) });
        1 != b && this.setVolume(b);
        x.hidden._value && this.set_paused(!0)
    };
    g["flambe.platform.html._WebAudioSound.WebAudioPlayback"] = Rg;
    Rg.__name__ = ["flambe", "platform", "html", "_WebAudioSound", "WebAudioPlayback"];
    Rg.__interfaces__ = [ji, Zf];
    Rg.prototype = {
        set_paused: function(a) { a != 0 <= this._pausedAt && (a ? (this._sourceNode.disconnect(), this._pausedAt = this.get_position()) : this.playAudio()); return a },
        get_complete: function() { return this._complete },
        get_position: function() { return this._complete._value ? this._sound.get_duration() : 0 <= this._pausedAt ? this._pausedAt : (wa.ctx.currentTime - this._startedAt) % this._sound.get_duration() },
        update: function(a) {
            this.volume.update(a);
            3 == this._sourceNode.playbackState && this._complete.set__(!0);
            return this._complete._value || 0 <=
                this._pausedAt ? (this._tickableAdded = !1, this._hideBinding.dispose(), !0) : !1
        },
        dispose: function() { this.set_paused(!0);
            this._complete.set__(!0) },
        setVolume: function(a) { null == this._gainNode && (this._gainNode = wa.createGain(), this.insertNode(this._gainNode));
            this._gainNode.gain.value = a },
        insertNode: function(a) { 0 <= this._pausedAt || (this._sourceNode.disconnect(), this._sourceNode.connect(a));
            a.connect(this._head);
            this._head = a },
        playAudio: function() {
            var a = this;
            this._sourceNode.connect(this._head);
            this._startedAt =
                wa.ctx.currentTime;
            this._pausedAt = -1;
            this._tickableAdded || (Bb.instance.mainLoop.addTickable(this), this._tickableAdded = !0, this._hideBinding = x.hidden.get_changed().connect(function(b) { b ? (a._wasPaused = 0 <= a._pausedAt, a.set_paused(!0)) : a.set_paused(a._wasPaused) }))
        },
        __class__: Rg,
        __properties__: { get_position: "get_position", get_complete: "get_complete", set_paused: "set_paused" }
    };
    var lm = function(a) {
        this._quads = this._maxQuads = this._dataOffset = this._backbufferWidth = this._backbufferHeight = 0;
        this._pendingSetScissor = !1;
        this._lastBlendMode = this._lastRenderTarget = this._lastShader = this._lastTexture = this._lastScissor = this._currentBlendMode = this._currentShader = this._currentTexture = this._currentRenderTarget = null;
        this._gl = a;
        a.clearColor(0, 0, 0, 0);
        a.enable(3042);
        a.pixelStorei(37441, 1);
        this._vertexBuffer = a.createBuffer();
        a.bindBuffer(34962, this._vertexBuffer);
        this._quadIndexBuffer = a.createBuffer();
        a.bindBuffer(34963, this._quadIndexBuffer);
        this._drawTextureShader = new mi(a);
        this._drawPatternShader = new ni(a);
        this._fillRectShader =
            new oi(a);
        this.resize(16)
    };
    g["flambe.platform.html.WebGLBatcher"] = lm;
    lm.__name__ = ["flambe", "platform", "html", "WebGLBatcher"];
    lm.prototype = {
        resizeBackbuffer: function(a, b) { this._gl.viewport(0, 0, a, b);
            this._backbufferWidth = a;
            this._backbufferHeight = b },
        willRender: function() {},
        didRender: function() { this.flush() },
        bindTexture: function(a) { this.flush();
            this._currentTexture = this._lastTexture = null;
            this._gl.bindTexture(3553, a) },
        deleteTexture: function(a) {
            null != this._lastTexture && this._lastTexture.root == a && (this.flush(),
                this._currentTexture = this._lastTexture = null);
            this._gl.deleteTexture(a.nativeTexture)
        },
        bindFramebuffer: function(a) { a != this._lastRenderTarget && (this.flush(), this.bindRenderTarget(a)) },
        deleteFramebuffer: function(a) { a == this._lastRenderTarget && (this.flush(), this._currentRenderTarget = this._lastRenderTarget = null);
            this._gl.deleteFramebuffer(a.framebuffer) },
        prepareDrawTexture: function(a, b, c, d) { d != this._lastTexture && (this.flush(), this._lastTexture = d); return this.prepareQuad(5, a, b, c, this._drawTextureShader) },
        prepareDrawPattern: function(a, b, c, d) { d != this._lastTexture && (this.flush(), this._lastTexture = d); return this.prepareQuad(5, a, b, c, this._drawPatternShader) },
        prepareFillRect: function(a, b, c) { return this.prepareQuad(6, a, b, c, this._fillRectShader) },
        prepareQuad: function(a, b, c, d, e) {
            b != this._lastRenderTarget && (this.flush(), this._lastRenderTarget = b);
            c != this._lastBlendMode && (this.flush(), this._lastBlendMode = c);
            e != this._lastShader && (this.flush(), this._lastShader = e);
            if (null != d || null != this._lastScissor)
                if (null == d ||
                    null == this._lastScissor || !this._lastScissor.equals(d)) this.flush(), this._lastScissor = null != d ? d.clone(this._lastScissor) : null, this._pendingSetScissor = !0;
            this._quads >= this._maxQuads && this.resize(2 * this._maxQuads);
            ++this._quads;
            b = this._dataOffset;
            this._dataOffset += 4 * a;
            return b
        },
        flush: function() {
            if (!(1 > this._quads)) {
                this._lastRenderTarget != this._currentRenderTarget && this.bindRenderTarget(this._lastRenderTarget);
                if (this._lastBlendMode != this._currentBlendMode) {
                    switch (this._lastBlendMode[1]) {
                        case 0:
                            this._gl.blendFunc(1,
                                771);
                            break;
                        case 1:
                            this._gl.blendFunc(1, 1);
                            break;
                        case 2:
                            this._gl.blendFunc(774, 771);
                            break;
                        case 3:
                            this._gl.blendFunc(1, 769);
                            break;
                        case 4:
                            this._gl.blendFunc(0, 770);
                            break;
                        case 5:
                            this._gl.blendFunc(1, 0)
                    }
                    this._currentBlendMode = this._lastBlendMode
                }
                this._pendingSetScissor && (null != this._lastScissor ? (this._gl.enable(3089), this._gl.scissor(this._lastScissor.x | 0, this._lastScissor.y | 0, this._lastScissor.width | 0, this._lastScissor.height | 0)) : this._gl.disable(3089), this._pendingSetScissor = !1);
                this._lastTexture != this._currentTexture &&
                    (this._gl.bindTexture(3553, this._lastTexture.root.nativeTexture), this._currentTexture = this._lastTexture);
                this._lastShader != this._currentShader && (this._lastShader.useProgram(), this._lastShader.prepare(), this._currentShader = this._lastShader);
                if (this._lastShader == this._drawPatternShader) { var a = this._lastTexture,
                        b = a.root;
                    this._drawPatternShader.setRegion(a.rootX / b.width, a.rootY / b.height, a._width / b.width, a._height / b.height) } this._gl.bufferData(34962, this.data.subarray(0, this._dataOffset), 35040);
                this._gl.drawElements(4,
                    6 * this._quads, 5123, 0);
                this._dataOffset = this._quads = 0
            }
        },
        resize: function(a) { this.flush(); if (!(1024 < a)) { this._maxQuads = a;
                this.data = new Float32Array(24 * a);
                this._gl.bufferData(34962, 4 * this.data.length, 35040); for (var b = new Uint16Array(6 * a), c = 0; c < a;) { var d = c++;
                    b[6 * d] = 4 * d;
                    b[6 * d + 1] = 4 * d + 1;
                    b[6 * d + 2] = 4 * d + 2;
                    b[6 * d + 3] = 4 * d + 2;
                    b[6 * d + 4] = 4 * d + 3;
                    b[6 * d + 5] = 4 * d } this._gl.bufferData(34963, b, 35044) } },
        bindRenderTarget: function(a) {
            null != a ? (this._gl.bindFramebuffer(36160, a.framebuffer), this._gl.viewport(0, 0, a.width, a.height)) : (this._gl.bindFramebuffer(36160,
                null), this._gl.viewport(0, 0, this._backbufferWidth, this._backbufferHeight));
            this._lastRenderTarget = this._currentRenderTarget = a
        },
        __class__: lm
    };
    var Dd = function(a, b) { this._inverseProjection = this._stateList = null;
        null == Dd._scratchQuadArray && (Dd._scratchQuadArray = new Float32Array(8));
        this._batcher = a;
        this._renderTarget = b };
    g["flambe.platform.html.WebGLGraphics"] = Dd;
    Dd.__name__ = ["flambe", "platform", "html", "WebGLGraphics"];
    Dd.__interfaces__ = [Ng];
    Dd.prototype = {
        save: function() {
            var a = this._stateList,
                b = this._stateList.next;
            null == b && (b = new pi, b.prev = a, a.next = b);
            a.matrix.clone(b.matrix);
            b.alpha = a.alpha;
            b.blendMode = a.blendMode;
            b.scissor = null != a.scissor ? a.scissor.clone(b.scissor) : null;
            this._stateList = b
        },
        translate: function(a, b) { var c = this._stateList.matrix;
            c.m02 += c.m00 * a + c.m01 * b;
            c.m12 += c.m10 * a + c.m11 * b },
        scale: function(a, b) { var c = this._stateList.matrix;
            c.m00 *= a;
            c.m10 *= a;
            c.m01 *= b;
            c.m11 *= b },
        rotate: function(a) {
            var b = this._stateList.matrix,
                a = 3.141592653589793 * a / 180,
                c = Math.sin(a),
                a = Math.cos(a),
                d = b.m00,
                e = b.m10,
                f = b.m01,
                l = b.m11;
            b.m00 =
                d * a + f * c;
            b.m10 = e * a + l * c;
            b.m01 = f * a - d * c;
            b.m11 = l * a - e * c
        },
        transform: function(a, b, c, d, e, f) { var l = this._stateList;
            Dd._scratchMatrix.set(a, b, c, d, e, f);
            Vc.multiply(l.matrix, Dd._scratchMatrix, l.matrix) },
        restore: function() { this._stateList = this._stateList.prev },
        drawTexture: function(a, b, c) { this.drawSubTexture(a, b, c, 0, 0, a.get_width(), a.get_height()) },
        drawSubTexture: function(a, b, c, d, e, f, l) {
            var v = this._stateList,
                h = a.root,
                b = this.transformQuad(b, c, f, l),
                c = h.width,
                h = h.height,
                d = (a.rootX + d) / c,
                e = (a.rootY + e) / h,
                f = d + f / c,
                l = e +
                l / h,
                c = v.alpha,
                a = this._batcher.prepareDrawTexture(this._renderTarget, v.blendMode, v.scissor, a),
                v = this._batcher.data;
            v[a] = b[0];
            v[++a] = b[1];
            v[++a] = d;
            v[++a] = e;
            v[++a] = c;
            v[++a] = b[2];
            v[++a] = b[3];
            v[++a] = f;
            v[++a] = e;
            v[++a] = c;
            v[++a] = b[4];
            v[++a] = b[5];
            v[++a] = f;
            v[++a] = l;
            v[++a] = c;
            v[++a] = b[6];
            v[++a] = b[7];
            v[++a] = d;
            v[++a] = l;
            v[++a] = c
        },
        drawPattern: function(a, b, c, d, e) {
            var f = this._stateList,
                l = a.root,
                b = this.transformQuad(b, c, d, e),
                d = d / l.width,
                e = e / l.height,
                l = f.alpha,
                a = this._batcher.prepareDrawPattern(this._renderTarget, f.blendMode,
                    f.scissor, a),
                f = this._batcher.data;
            f[a] = b[0];
            f[++a] = b[1];
            f[++a] = 0;
            f[++a] = 0;
            f[++a] = l;
            f[++a] = b[2];
            f[++a] = b[3];
            f[++a] = d;
            f[++a] = 0;
            f[++a] = l;
            f[++a] = b[4];
            f[++a] = b[5];
            f[++a] = d;
            f[++a] = e;
            f[++a] = l;
            f[++a] = b[6];
            f[++a] = b[7];
            f[++a] = 0;
            f[++a] = e;
            f[++a] = l
        },
        fillRect: function(a, b, c, d, e) {
            var f = this._stateList,
                b = this.transformQuad(b, c, d, e),
                c = (a & 16711680) / 16711680,
                d = (a & 65280) / 65280,
                a = (a & 255) / 255,
                e = f.alpha,
                f = this._batcher.prepareFillRect(this._renderTarget, f.blendMode, f.scissor),
                l = this._batcher.data;
            l[f] = b[0];
            l[++f] = b[1];
            l[++f] = c;
            l[++f] = d;
            l[++f] = a;
            l[++f] = e;
            l[++f] = b[2];
            l[++f] = b[3];
            l[++f] = c;
            l[++f] = d;
            l[++f] = a;
            l[++f] = e;
            l[++f] = b[4];
            l[++f] = b[5];
            l[++f] = c;
            l[++f] = d;
            l[++f] = a;
            l[++f] = e;
            l[++f] = b[6];
            l[++f] = b[7];
            l[++f] = c;
            l[++f] = d;
            l[++f] = a;
            l[++f] = e
        },
        multiplyAlpha: function(a) { this._stateList.alpha *= a },
        setBlendMode: function(a) { this._stateList.blendMode = a },
        applyScissor: function(a, b, c, d) {
            var e = this._stateList,
                f = Dd._scratchQuadArray;
            f[0] = a;
            f[1] = b;
            f[2] = a + c;
            f[3] = b + d;
            e.matrix.transformArray(f, 4, f);
            this._inverseProjection.transformArray(f,
                4, f);
            a = f[0];
            b = f[1];
            c = f[2] - a;
            d = f[3] - b;
            0 > c && (a += c, c = -c);
            0 > d && (b += d, d = -d);
            e.applyScissor(a, b, c, d)
        },
        willRender: function() { this._batcher.willRender() },
        didRender: function() { this._batcher.didRender() },
        onResize: function(a, b) { this._stateList = new pi; var c;
            c = null != this._renderTarget ? -1 : 1;
            this._stateList.matrix.set(2 / a, 0, 0, -2 * c / b, -1, c);
            this._inverseProjection = new Vc;
            this._inverseProjection.set(2 / a, 0, 0, 2 / b, -1, -1);
            this._inverseProjection.invert() },
        transformQuad: function(a, b, c, d) {
            var c = a + c,
                d = b + d,
                e = Dd._scratchQuadArray;
            e[0] = a;
            e[1] = b;
            e[2] = c;
            e[3] = b;
            e[4] = c;
            e[5] = d;
            e[6] = a;
            e[7] = d;
            this._stateList.matrix.transformArray(e, 8, e);
            return e
        },
        __class__: Dd
    };
    var pi = function() { this.scissor = this.prev = this.next = null;
        this.matrix = new Vc;
        this.alpha = 1;
        this.blendMode = Va.Normal };
    g["flambe.platform.html._WebGLGraphics.DrawingState"] = pi;
    pi.__name__ = ["flambe", "platform", "html", "_WebGLGraphics", "DrawingState"];
    pi.prototype = {
        applyScissor: function(a, b, c, d) {
            if (null != this.scissor) var e = qb.max(this.scissor.x, a),
                f = qb.max(this.scissor.y, b),
                c = qb.min(this.scissor.x +
                    this.scissor.width, a + c),
                d = qb.min(this.scissor.y + this.scissor.height, b + d),
                a = e,
                b = f,
                c = c - e,
                d = d - f;
            else this.scissor = new Na;
            this.scissor.set(Math.round(a), Math.round(b), Math.round(c), Math.round(d))
        },
        __class__: pi
    };
    var Yh = function(a, b) {
        var c = this;
        this._hasGPU = new $b(!0);
        this.gl = b;
        b.canvas.addEventListener("webglcontextlost", function(a) { a.preventDefault();
            c._hasGPU.set__(!1) }, !1);
        b.canvas.addEventListener("webglcontextrestore", function() { c.init();
            c._hasGPU.set__(!0) }, !1);
        a.resize.connect(m(this, this.onResize));
        this.init()
    };
    g["flambe.platform.html.WebGLRenderer"] = Yh;
    Yh.__name__ = ["flambe", "platform", "html", "WebGLRenderer"];
    Yh.__interfaces__ = [Og];
    Yh.prototype = {
        get_type: function() { return Cd.WebGL },
        createTextureFromImage: function(a) { if (this.gl.isContextLost()) return null; var b = new Re(this, a.width, a.height);
            b.uploadImageData(a); return b.createTexture(a.width, a.height) },
        createTexture: function(a, b) { if (this.gl.isContextLost()) return null; var c = new Re(this, a, b);
            c.clear(); return c.createTexture(a, b) },
        getCompressedTextureFormats: function() { return [] },
        createCompressedTexture: function() { this.gl.isContextLost(); return null },
        willRender: function() { this.graphics.willRender() },
        didRender: function() { this.graphics.didRender() },
        onResize: function() { var a = this.gl.canvas.width,
                b = this.gl.canvas.height;
            this.batcher.resizeBackbuffer(a, b);
            this.graphics.onResize(a, b) },
        init: function() { this.batcher = new lm(this.gl);
            this.graphics = new Dd(this.batcher, null);
            this.onResize() },
        __class__: Yh,
        __properties__: { get_type: "get_type" }
    };
    var qi = function(a, b, c) { Nb.call(this, a, b, c) };
    g["flambe.platform.html.WebGLTexture"] = qi;
    qi.__name__ = ["flambe", "platform", "html", "WebGLTexture"];
    qi.__super__ = Nb;
    qi.prototype = k(Nb.prototype, { __class__: qi });
    var Re = function(a, b, c) {
        this.framebuffer = this._graphics = null;
        this._disposed = !1;
        this._renderer = a;
        this.width = qb.max(2, im.nextPowerOfTwo(b));
        this.height = qb.max(2, im.nextPowerOfTwo(c));
        b = a.gl;
        this.nativeTexture = b.createTexture();
        a.batcher.bindTexture(this.nativeTexture);
        b.texParameteri(3553, 10242, 33071);
        b.texParameteri(3553, 10243, 33071);
        b.texParameteri(3553,
            10240, 9729);
        b.texParameteri(3553, 10241, 9729)
    };
    g["flambe.platform.html.WebGLTextureRoot"] = Re;
    Re.__name__ = ["flambe", "platform", "html", "WebGLTextureRoot"];
    Re.__interfaces__ = [ii];
    Re.drawBorder = function(a, b, c) { var d = a.getContext("2d");
        d.drawImage(a, b - 1, 0, 1, c, b, 0, 1, c);
        d.drawImage(a, 0, c - 1, b, 1, 0, c, b, 1) };
    Re.__super__ = zb;
    Re.prototype = k(zb.prototype, {
        createTexture: function(a, b) { return new qi(this, a, b) },
        uploadImageData: function(a) {
            if (this.width != a.width || this.height != a.height) {
                var b = ea.createEmptyCanvas(this.width,
                    this.height);
                b.getContext("2d").drawImage(a, 0, 0);
                Re.drawBorder(b, a.width, a.height);
                a = b
            }
            this._renderer.batcher.bindTexture(this.nativeTexture);
            this._renderer.gl.texImage2D(3553, 0, 6408, 6408, 5121, a)
        },
        clear: function() { this._renderer.batcher.bindTexture(this.nativeTexture);
            this._renderer.gl.texImage2D(3553, 0, 6408, this.width, this.height, 0, 6408, 5121, null) },
        getGraphics: function() {
            if (null == this._graphics) {
                this._graphics = new Dd(this._renderer.batcher, this);
                this._graphics.onResize(this.width, this.height);
                var a =
                    this._renderer.gl;
                this.framebuffer = a.createFramebuffer();
                this._renderer.batcher.bindFramebuffer(this);
                a.framebufferTexture2D(36160, 36064, 3553, this.nativeTexture, 0)
            }
            return this._graphics
        },
        onDisposed: function() { var a = this._renderer.batcher;
            a.deleteTexture(this);
            null != this.framebuffer && a.deleteFramebuffer(this);
            this._graphics = this.framebuffer = this.nativeTexture = null },
        __class__: Re
    });
    var oc = function(a, b, c) {
        c = "#ifdef GL_ES\nprecision mediump float;\n#endif\n" + c;
        this._gl = a;
        this._program = a.createProgram();
        a.attachShader(this._program, oc.createShader(a, 35633, b));
        a.attachShader(this._program, oc.createShader(a, 35632, c));
        a.linkProgram(this._program);
        a.useProgram(this._program)
    };
    g["flambe.platform.shader.ShaderGL"] = oc;
    oc.__name__ = ["flambe", "platform", "shader", "ShaderGL"];
    oc.createShader = function(a, b, c) { b = a.createShader(b);
        a.shaderSource(b, c);
        a.compileShader(b); return b };
    oc.prototype = {
        useProgram: function() { this._gl.useProgram(this._program) },
        prepare: function() { null },
        getAttribLocation: function(a) {
            return this._gl.getAttribLocation(this._program,
                a)
        },
        getUniformLocation: function(a) { return this._gl.getUniformLocation(this._program, a) },
        __class__: oc
    };
    var ni = function(a) {
        oc.call(this, a, "attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}", "varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;\n}");
        this.a_pos = this.getAttribLocation("a_pos");
        this.a_uv = this.getAttribLocation("a_uv");
        this.a_alpha = this.getAttribLocation("a_alpha");
        this.u_texture = this.getUniformLocation("u_texture");
        this.u_region = this.getUniformLocation("u_region");
        this.setTexture(0)
    };
    g["flambe.platform.shader.DrawPatternGL"] = ni;
    ni.__name__ = ["flambe", "platform", "shader", "DrawPatternGL"];
    ni.__super__ = oc;
    ni.prototype = k(oc.prototype, {
        setTexture: function(a) { this._gl.uniform1i(this.u_texture, a) },
        setRegion: function(a, b, c, d) {
            this._gl.uniform4f(this.u_region,
                a, b, c, d)
        },
        prepare: function() { this._gl.enableVertexAttribArray(this.a_pos);
            this._gl.enableVertexAttribArray(this.a_uv);
            this._gl.enableVertexAttribArray(this.a_alpha);
            this._gl.vertexAttribPointer(this.a_pos, 2, 5126, !1, 20, 0);
            this._gl.vertexAttribPointer(this.a_uv, 2, 5126, !1, 20, 8);
            this._gl.vertexAttribPointer(this.a_alpha, 1, 5126, !1, 20, 16) },
        __class__: ni
    });
    var mi = function(a) {
        oc.call(this, a, "attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
            "varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");
        this.a_pos = this.getAttribLocation("a_pos");
        this.a_uv = this.getAttribLocation("a_uv");
        this.a_alpha = this.getAttribLocation("a_alpha");
        this.u_texture = this.getUniformLocation("u_texture");
        this.setTexture(0)
    };
    g["flambe.platform.shader.DrawTextureGL"] = mi;
    mi.__name__ = ["flambe", "platform", "shader", "DrawTextureGL"];
    mi.__super__ = oc;
    mi.prototype =
        k(oc.prototype, { setTexture: function(a) { this._gl.uniform1i(this.u_texture, a) }, prepare: function() { this._gl.enableVertexAttribArray(this.a_pos);
                this._gl.enableVertexAttribArray(this.a_uv);
                this._gl.enableVertexAttribArray(this.a_alpha);
                this._gl.vertexAttribPointer(this.a_pos, 2, 5126, !1, 20, 0);
                this._gl.vertexAttribPointer(this.a_uv, 2, 5126, !1, 20, 8);
                this._gl.vertexAttribPointer(this.a_alpha, 1, 5126, !1, 20, 16) }, __class__: mi });
    var oi = function(a) {
        oc.call(this, a, "attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}",
            "varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");
        this.a_pos = this.getAttribLocation("a_pos");
        this.a_rgb = this.getAttribLocation("a_rgb");
        this.a_alpha = this.getAttribLocation("a_alpha")
    };
    g["flambe.platform.shader.FillRectGL"] = oi;
    oi.__name__ = ["flambe", "platform", "shader", "FillRectGL"];
    oi.__super__ = oc;
    oi.prototype = k(oc.prototype, {
        prepare: function() {
            this._gl.enableVertexAttribArray(this.a_pos);
            this._gl.enableVertexAttribArray(this.a_rgb);
            this._gl.enableVertexAttribArray(this.a_alpha);
            this._gl.vertexAttribPointer(this.a_pos, 2, 5126, !1, 24, 0);
            this._gl.vertexAttribPointer(this.a_rgb, 3, 5126, !1, 24, 8);
            this._gl.vertexAttribPointer(this.a_alpha, 1, 5126, !1, 24, 20)
        },
        __class__: oi
    });
    var ri = function() { this._transitor = null;
        i.call(this);
        this.scenes = [];
        this.occludedScenes = [];
        this._root = new p };
    g["flambe.scene.Director"] = ri;
    ri.__name__ = ["flambe", "scene", "Director"];
    ri.__super__ = i;
    ri.prototype = k(i.prototype, {
        get_name: function() { return "Director_73" },
        pushScene: function(a, b) {
            var c = this;
            this.completeTransition();
            var d = this.get_topScene();
            null != d ? this.playTransition(d, a, b, function() { c.hide(d) }) : (this.add(a), this.invalidateVisibility())
        },
        popScene: function(a) { var b = this;
            this.completeTransition(); var c = this.get_topScene(); if (null != c) { this.scenes.pop(); var d = this.get_topScene();
                null != d ? this.playTransition(c, d, a, function() { b.hideAndDispose(c) }) : (this.hideAndDispose(c), this.invalidateVisibility()) } },
        unwindToScene: function(a, b) {
            var c = this;
            this.completeTransition();
            var d = this.get_topScene();
            if (null != d) {
                if (d != a) {
                    for (this.scenes.pop(); 0 <
                        this.scenes.length && this.scenes[this.scenes.length - 1] != a;) this.scenes.pop().dispose();
                    this.playTransition(d, a, b, function() { c.hideAndDispose(d) })
                }
            } else this.pushScene(a, b)
        },
        onAdded: function() { this.owner.addChild(this._root) },
        onRemoved: function() { this.completeTransition(); for (var a = 0, b = this.scenes; a < b.length;) { var c = b[a];++a;
                c.dispose() } this.scenes = [];
            this.occludedScenes = [];
            this._root.dispose() },
        onUpdate: function(a) { null != this._transitor && this._transitor.update(a) && this.completeTransition() },
        get_topScene: function() {
            var a =
                this.scenes.length;
            return 0 < a ? this.scenes[a - 1] : null
        },
        add: function(a) { var b = this.get_topScene();
            null != b && this._root.removeChild(b);
            H.remove(this.scenes, a);
            this.scenes.push(a);
            this._root.addChild(a) },
        hide: function(a) { a = a._compMap.Scene_52;
            null != a && a.hidden.emit() },
        hideAndDispose: function(a) { this.hide(a);
            a.dispose() },
        show: function(a) { a = a._compMap.Scene_52;
            null != a && a.shown.emit() },
        invalidateVisibility: function() {
            for (var a = this.scenes.length; 0 < a;) { var b = this.scenes[--a]._compMap.Scene_52; if (null == b || b.opaque) break } this.occludedScenes =
                0 < this.scenes.length ? this.scenes.slice(a, this.scenes.length - 1) : [];
            a = this.get_topScene();
            null != a && this.show(a)
        },
        completeTransition: function() { null != this._transitor && (this._transitor.complete(), this._transitor = null, this.invalidateVisibility()) },
        playTransition: function(a, b, c, d) { this.completeTransition();
            this.add(b);
            null != c ? (this.occludedScenes.push(a), this._transitor = new mm(a, b, c, d), this._transitor.init(this)) : (d(), this.invalidateVisibility()) },
        __class__: ri,
        __properties__: k(i.prototype.__properties__, { get_topScene: "get_topScene" })
    });
    var mm = function(a, b, c, d) { this._from = a;
        this._to = b;
        this._transition = c;
        this._onComplete = d };
    g["flambe.scene._Director.Transitor"] = mm;
    mm.__name__ = ["flambe", "scene", "_Director", "Transitor"];
    mm.prototype = { init: function(a) { this._transition.init(a, this._from, this._to) }, update: function(a) { return this._transition.update(a) }, complete: function() { this._transition.complete();
            this._onComplete() }, __class__: mm };
    var Sg = function() {};
    g["flambe.scene.Transition"] = Sg;
    Sg.__name__ = ["flambe",
        "scene", "Transition"
    ];
    Sg.prototype = { init: function(a, b, c) { this._director = a;
            this._from = b;
            this._to = c }, update: function() { return !0 }, complete: function() {}, __class__: Sg };
    var Se = function(a, b) { this._duration = a;
        this._ease = null != b ? b : D.linear };
    g["flambe.scene.TweenTransition"] = Se;
    Se.__name__ = ["flambe", "scene", "TweenTransition"];
    Se.__super__ = Sg;
    Se.prototype = k(Sg.prototype, {
        init: function(a, b, c) { Sg.prototype.init.call(this, a, b, c);
            this._elapsed = 0 },
        update: function(a) { this._elapsed += a; return this._elapsed >= this._duration },
        interp: function(a, b) { return a + (b - a) * this._ease(this._elapsed / this._duration) },
        __class__: Se
    });
    var si = function(a, b) { Se.call(this, a, b) };
    g["flambe.scene.FadeTransition"] = si;
    si.__name__ = ["flambe", "scene", "FadeTransition"];
    si.__super__ = Se;
    si.prototype = k(Se.prototype, {
        init: function(a, b, c) { Se.prototype.init.call(this, a, b, c);
            a = this._to._compMap.Sprite_2;
            null == a && this._to.add(a = new r);
            a.alpha.set__(0) },
        update: function(a) {
            a = Se.prototype.update.call(this, a);
            this._to._compMap.Sprite_2.alpha.set__(this.interp(0,
                1));
            return a
        },
        complete: function() { this._to._compMap.Sprite_2.alpha.set__(1) },
        __class__: si
    });
    var Te = function(a) { null == a && (a = !0);
        i.call(this);
        this.opaque = a;
        this.shown = new ga;
        this.hidden = new ga };
    g["flambe.scene.Scene"] = Te;
    Te.__name__ = ["flambe", "scene", "Scene"];
    Te.__super__ = i;
    Te.prototype = k(i.prototype, { get_name: function() { return "Scene_52" }, __class__: Te });
    var Ue = function() {};
    g["flambe.script.Action"] = Ue;
    Ue.__name__ = ["flambe", "script", "Action"];
    Ue.prototype = { __class__: Ue };
    var Sd = function(a, b, c, d) {
        this._value =
            a;
        this._to = b;
        this._seconds = c;
        this._easing = d
    };
    g["flambe.script.AnimateTo"] = Sd;
    Sd.__name__ = ["flambe", "script", "AnimateTo"];
    Sd.__interfaces__ = [Ue];
    Sd.prototype = { update: function(a) { null == this._tween && (this._tween = new Jg(this._value._value, this._to, this._seconds, this._easing), this._value.set_behavior(this._tween), this._value.update(a)); if (this._value._behavior != this._tween) { var b = this._tween.elapsed - this._seconds;
                this._tween = null; return 0 < b ? Math.max(0, a - b) : 0 } return -1 }, __class__: Sd };
    var cb = function(a) {
        this._fn =
            a
    };
    g["flambe.script.CallFunction"] = cb;
    cb.__name__ = ["flambe", "script", "CallFunction"];
    cb.__interfaces__ = [Ue];
    cb.prototype = { update: function() { this._fn(); return 0 }, __class__: cb };
    var ub = function(a) { this._duration = a;
        this._elapsed = 0 };
    g["flambe.script.Delay"] = ub;
    ub.__name__ = ["flambe", "script", "Delay"];
    ub.__interfaces__ = [Ue];
    ub.prototype = { update: function(a) { this._elapsed += a; if (this._elapsed >= this._duration) { var b = this._elapsed - this._duration;
                this._elapsed = 0; return a - b } return -1 }, __class__: ub };
    var ag = function(a) {
        this._completedActions = [];
        this._runningActions = null != a ? a.slice() : []
    };
    g["flambe.script.Parallel"] = ag;
    ag.__name__ = ["flambe", "script", "Parallel"];
    ag.__interfaces__ = [Ue];
    ag.prototype = {
        add: function(a) { this._runningActions.push(a) },
        update: function(a, b) {
            for (var c = !0, d = 0, e = 0, f = this._runningActions.length; e < f;) { var l = e++,
                    v = this._runningActions[l]; if (null != v) { var h = v.update(a, b);
                    0 <= h ? (this._runningActions[l] = null, this._completedActions.push(v), h > d && (d = h)) : c = !1 } }
            return c ? (this._runningActions = this._completedActions, this._completedActions = [], d) : -1
        },
        __class__: ag
    };
    var Ob = function() { i.call(this);
        this.stopAll() };
    g["flambe.script.Script"] = Ob;
    Ob.__name__ = ["flambe", "script", "Script"];
    Ob.__super__ = i;
    Ob.prototype = k(i.prototype, { get_name: function() { return "Script_66" }, run: function(a) { a = new ti(a);
            this._handles.push(a); return a }, stopAll: function() { this._handles = [] }, onUpdate: function(a) { for (var b = 0; b < this._handles.length;) { var c = this._handles[b];
                c.removed || 0 <= c.action.update(a, this.owner) ? this._handles.splice(b, 1) : ++b } }, __class__: Ob });
    var ti = function(a) {
        this.removed = !1;
        this.action = a
    };
    g["flambe.script._Script.Handle"] = ti;
    ti.__name__ = ["flambe", "script", "_Script", "Handle"];
    ti.__interfaces__ = [Fc];
    ti.prototype = { dispose: function() { this.removed = !0;
            this.action = null }, __class__: ti };
    var pc = function(a) { this._idx = 0;
        this._runningActions = null != a ? a.slice() : [] };
    g["flambe.script.Sequence"] = pc;
    pc.__name__ = ["flambe", "script", "Sequence"];
    pc.__interfaces__ = [Ue];
    pc.prototype = {
        add: function(a) { this._runningActions.push(a) },
        removeAll: function() { this._idx = 0;
            this._runningActions = [] },
        update: function(a,
            b) { for (var c = 0;;) { var d = this._runningActions[this._idx]; if (null != d)
                    if (d = d.update(a - c, b), 0 <= d) c += d;
                    else return -1;++this._idx; if (this._idx >= this._runningActions.length) { this._idx = 0; break } else if (c > a) return -1 } return c },
        __class__: pc
    };
    var ui = function(a, b, c) { this._strengthX = a;
        this._strengthY = b;
        this._duration = c;
        this._elapsed = 0 };
    g["flambe.script.Shake"] = ui;
    ui.__name__ = ["flambe", "script", "Shake"];
    ui.__interfaces__ = [Ue];
    ui.prototype = {
        update: function(a, b) {
            var c = b._compMap.Sprite_2;
            null == this._jitterX && (this._jitterX =
                new qf(c.x._value, this._strengthX), this._jitterY = new qf(c.y._value, this._strengthY), c.x.set_behavior(this._jitterX), c.y.set_behavior(this._jitterY));
            this._elapsed += a;
            if (this._elapsed >= this._duration) { var d = this._elapsed - this._duration;
                c.x._behavior == this._jitterX && c.x.set__(this._jitterX.base);
                c.y._behavior == this._jitterY && c.y.set__(this._jitterY.base);
                this._jitterY = this._jitterX = null;
                this._elapsed = 0; return a - d }
            return -1
        },
        __class__: ui
    };
    var Cd = g["flambe.subsystem.RendererType"] = {
        __ename__: ["flambe",
            "subsystem", "RendererType"
        ],
        __constructs__: ["Stage3D", "WebGL", "Canvas"]
    };
    Cd.Stage3D = ["Stage3D", 0];
    Cd.Stage3D.toString = s;
    Cd.Stage3D.__enum__ = Cd;
    Cd.WebGL = ["WebGL", 1];
    Cd.WebGL.toString = s;
    Cd.WebGL.__enum__ = Cd;
    Cd.Canvas = ["Canvas", 2];
    Cd.Canvas.toString = s;
    Cd.Canvas.__enum__ = Cd;
    var vi = function() {};
    g["flambe.swf.Symbol"] = vi;
    vi.__name__ = ["flambe", "swf", "Symbol"];
    vi.prototype = { __class__: vi };
    var wi = function(a, b) {
        this._name = a.symbol;
        var c = a.rect;
        this.texture = b.subTexture(c[0], c[1], c[2], c[3]);
        c = a.origin;
        null !=
            c ? (this.anchorX = c[0], this.anchorY = c[1]) : this.anchorY = this.anchorX = 0
    };
    g["flambe.swf.BitmapSymbol"] = wi;
    wi.__name__ = ["flambe", "swf", "BitmapSymbol"];
    wi.__interfaces__ = [vi];
    wi.prototype = { createSprite: function() { var a = new ya(this.texture);
            a.setAnchor(this.anchorX, this.anchorY); return a }, __class__: wi };
    var nm = function(a, b) {
        this._file = a.getFile(b + "/library.json");
        var c = JSON.parse(this._file.toString());
        this._symbols = new M;
        this.frameRate = c.frameRate;
        for (var d = [], e = 0, f = c.movies; e < f.length;) {
            var l = f[e];
            ++e;
            l =
                new xi(this, l);
            d.push(l);
            this._symbols.set(l._name, l)
        }
        c = c.textureGroups;
        (1 != c[0].scaleFactor || 1 < c.length) && null;
        c = c[0].atlases;
        for (e = 0; e < c.length;) { var v = c[e];++e;
            f = a.getTexture(b + "/" + gb.removeFileExtension(v.file));
            l = 0; for (v = v.textures; l < v.length;) { var h = v[l];++l;
                h = new wi(h, f);
                this._symbols.set(h._name, h) } }
        for (c = 0; c < d.length;) {
            f = d[c];
            ++c;
            e = 0;
            for (f = f.layers; e < f.length;) {
                l = f[e];
                ++e;
                l = l.keyframes;
                v = l.length;
                for (h = 0; h < v;) {
                    var g = h++,
                        i = l[g];
                    if (null != i.symbolName) {
                        var j = this._symbols.get(i.symbolName);
                        i.symbol = j
                    }
                    if (i.tweened && 1 == i.duration && g + 1 < v && (g = l[g + 1], !g.visible || null == g.symbolName)) i.visible = !1
                }
            }
        }
    };
    g["flambe.swf.Library"] = nm;
    nm.__name__ = ["flambe", "swf", "Library"];
    nm.prototype = { createSprite: function(a, b) { null == b && (b = !0); var c = this._symbols.get(a); if (null == c) { if (b) throw gb.withFields("Missing symbol", ["name", a]); return null } return c.createSprite() }, __class__: nm };
    var Tg = function(a) {
        this._looped = null;
        r.call(this);
        this.symbol = a;
        this.speed = new ca(1);
        this._animators = Array(a.layers.length);
        for (var b =
                0, c = this._animators.length; b < c;) { var d = b++;
            this._animators[d] = new om(a.layers[d]) } this._position = this._frame = 0;
        this["goto"](1)
    };
    g["flambe.swf.MovieSprite"] = Tg;
    Tg.__name__ = ["flambe", "swf", "MovieSprite"];
    Tg.__super__ = r;
    Tg.prototype = k(r.prototype, {
        getLayer: function(a, b) { null == b && (b = !0); for (var c = 0, d = this._animators; c < d.length;) { var e = d[c];++c; if (e.layer.name == a) return e.content } if (b) throw gb.withFields("Missing layer", ["name", a]); return null },
        onAdded: function() {
            r.prototype.onAdded.call(this);
            for (var a =
                    0, b = this._animators; a < b.length;) { var c = b[a];++a;
                this.owner.addChild(c.content) }
        },
        onRemoved: function() { r.prototype.onRemoved.call(this); for (var a = 0, b = this._animators; a < b.length;) { var c = b[a];++a;
                this.owner.removeChild(c.content) } },
        onUpdate: function(a) {
            r.prototype.onUpdate.call(this, a);
            this.speed.update(a);
            switch (this._flags & 384) {
                case 0:
                    this._position += this.speed._value * a;
                    this._position > this.symbol.duration && (this._position %= this.symbol.duration, null != this._looped && this._looped.emit());
                    break;
                case 256:
                    this._flags &=
                        -257
            }
            this["goto"](this._position * this.symbol.frameRate)
        },
        "goto": function(a) { if (this._frame != a) { if (a < this._frame)
                    for (var b = 0, c = this._animators; b < c.length;) { var d = c[b];++b;
                        d.needsKeyframeUpdate = !0;
                        d.keyframeIdx = 0 } b = 0; for (c = this._animators; b < c.length;) d = c[b], ++b, d.composeFrame(a);
                this._frame = a } },
        set_position: function(a) { return this._position = qb.clamp(a, 0, this.symbol.duration) },
        get_looped: function() { null == this._looped && (this._looped = new ga); return this._looped },
        set_pixelSnapping: function(a) {
            for (var b =
                    0, c = this._animators; b < c.length;) { var d = c[b];++b;
                d.setPixelSnapping(a) }
            return r.prototype.set_pixelSnapping.call(this, a)
        },
        rewind: function() { this._position = 0;
            this._flags |= 256 },
        __class__: Tg,
        __properties__: k(r.prototype.__properties__, { get_looped: "get_looped", set_position: "set_position" })
    });
    var om = function(a) {
        this.keyframeIdx = 0;
        this.needsKeyframeUpdate = !1;
        this.layer = a;
        this.content = new p;
        if (a.empty) this._sprites = null;
        else {
            this._sprites = Array(a.keyframes.length);
            for (var b = 0, c = this._sprites.length; b < c;) {
                var d =
                    b++,
                    e = a.keyframes[d];
                this._sprites[d] = 0 < d && a.keyframes[d - 1].symbol == e.symbol ? this._sprites[d - 1] : null == e.symbol ? new r : e.symbol.createSprite()
            }
            this.content.add(this._sprites[0])
        }
    };
    g["flambe.swf._MovieSprite.LayerAnimator"] = om;
    om.__name__ = ["flambe", "swf", "_MovieSprite", "LayerAnimator"];
    om.prototype = {
        composeFrame: function(a) {
            if (null != this._sprites) {
                var b = this.layer.keyframes,
                    c = b.length - 1;
                if (a > this.layer.frames) this.content._compMap.Sprite_2.set_visible(!1), this.keyframeIdx = c, this.needsKeyframeUpdate = !0;
                else {
                    for (; this.keyframeIdx < c && b[this.keyframeIdx + 1].index <= a;) ++this.keyframeIdx, this.needsKeyframeUpdate = !0;
                    var d;
                    this.needsKeyframeUpdate ? (this.needsKeyframeUpdate = !1, d = this._sprites[this.keyframeIdx], d != this.content._compMap.Sprite_2 && (ia.getClass(d) == Tg && d.rewind(), this.content.add(d))) : d = this.content._compMap.Sprite_2;
                    var e = b[this.keyframeIdx],
                        f = e.visible && null != e.symbol;
                    d.set_visible(f);
                    if (f) {
                        var f = e.x,
                            l = e.y,
                            v = e.scaleX,
                            h = e.scaleY,
                            g = e.skewX,
                            i = e.skewY,
                            j = e.alpha;
                        if (e.tweened && this.keyframeIdx <
                            c) { a = (a - e.index) / e.duration;
                            c = e.ease; if (0 != c) { var k;
                                0 > c ? (k = 1 - a, k = 1 - k * k, c = -c) : k = a * a;
                                a = c * k + (1 - c) * a } b = b[this.keyframeIdx + 1];
                            f += (b.x - f) * a;
                            l += (b.y - l) * a;
                            v += (b.scaleX - v) * a;
                            h += (b.scaleY - h) * a;
                            g += (b.skewX - g) * a;
                            i += (b.skewY - i) * a;
                            j += (b.alpha - j) * a } b = d.getLocalMatrix();
                        a = Math.sin(g);
                        g = Math.cos(g);
                        c = Math.sin(i);
                        i = Math.cos(i);
                        b.set(i * v, c * v, -a * h, g * h, f, l);
                        b.translate(-e.pivotX, -e.pivotY);
                        d.alpha.set__(j)
                    }
                }
            }
        },
        setPixelSnapping: function(a) { for (var b = 0, c = this._sprites; b < c.length;) { var d = c[b];++b;
                d.set_pixelSnapping(a) } },
        __class__: om
    };
    var xi = function(a, b) { this._name = b.id;
        this.frameRate = a.frameRate;
        this.frames = 0;
        this.layers = Array(b.layers.length); for (var c = 0, d = this.layers.length; c < d;) { var e = c++,
                f = new pm(b.layers[e]);
            this.frames = Math.max(f.frames, this.frames);
            this.layers[e] = f } this.duration = this.frames / this.frameRate };
    g["flambe.swf.MovieSymbol"] = xi;
    xi.__name__ = ["flambe", "swf", "MovieSymbol"];
    xi.__interfaces__ = [vi];
    xi.prototype = { createSprite: function() { return new Tg(this) }, __class__: xi };
    var pm = function(a) {
        this.empty = !0;
        this.name = a.name;
        var b = null;
        this.keyframes = Array(a.keyframes.length);
        for (var c = 0, d = this.keyframes.length; c < d;) { var e = c++,
                b = new qm(a.keyframes[e], b);
            this.keyframes[e] = b;
            this.empty = this.empty && null == b.symbolName } this.frames = null != b ? b.index + b.duration : 0
    };
    g["flambe.swf.MovieLayer"] = pm;
    pm.__name__ = ["flambe", "swf", "MovieLayer"];
    pm.prototype = { __class__: pm };
    var qm = function(a, b) {
        this.ease = 0;
        this.visible = this.tweened = !0;
        this.alpha = 1;
        this.skewX = this.skewY = this.pivotX = this.pivotY = 0;
        this.scaleX = this.scaleY = 1;
        this.x = this.y = 0;
        this.symbol = null;
        this.index = null != b ? b.index + b.duration : 0;
        this.duration = a.duration;
        this.label = a.label;
        this.symbolName = a.ref;
        var c = a.loc;
        null != c && (this.x = c[0], this.y = c[1]);
        c = a.scale;
        null != c && (this.scaleX = c[0], this.scaleY = c[1]);
        c = a.skew;
        null != c && (this.skewX = c[0], this.skewY = c[1]);
        c = a.pivot;
        null != c && (this.pivotX = c[0], this.pivotY = c[1]);
        null != a.alpha && (this.alpha = a.alpha);
        null != a.visible && (this.visible = a.visible);
        null != a.tweened && (this.tweened = a.tweened);
        null != a.ease && (this.ease = a.ease)
    };
    g["flambe.swf.MovieKeyframe"] = qm;
    qm.__name__ = ["flambe", "swf", "MovieKeyframe"];
    qm.prototype = { __class__: qm };
    var Wl = function() {};
    g["flambe.util.Assert"] = Wl;
    Wl.__name__ = ["flambe", "util", "Assert"];
    Wl.that = function() {};
    var ai = function() {};
    g["flambe.util.BitSets"] = ai;
    ai.__name__ = ["flambe", "util", "BitSets"];
    ai.set = function(a, b, c) { return c ? a | b : a & ~b };
    var uf = function() { this.success = new S;
        this.error = new S;
        this.progressChanged = new ga;
        this.hasResult = !1;
        this._total = this._progress = 0 };
    g["flambe.util.Promise"] = uf;
    uf.__name__ = ["flambe", "util", "Promise"];
    uf.prototype = {
        get_result: function() { if (!this.hasResult) throw "Promise result not yet available"; return this._result },
        set_result: function(a) { if (this.hasResult) throw "Promise result already assigned";
            this._result = a;
            this.hasResult = !0;
            this.success.emit(a); return a },
        get: function(a) { return this.hasResult ? (a(this._result), null) : this.success.connect(a).once() },
        set_progress: function(a) { this._progress != a && (this._progress = a, this.progressChanged.emit()); return a },
        set_total: function(a) {
            this._total !=
                a && (this._total = a, this.progressChanged.emit());
            return a
        },
        __class__: uf,
        __properties__: { set_total: "set_total", set_progress: "set_progress", set_result: "set_result", get_result: "get_result" }
    };
    var yi = function(a) {
        uf.call(this);
        this._promises = a.slice();
        this._successCount = 0;
        this._disposer = new za;
        this.onProgressChanged();
        for (var a = this._promises, b = 0; b < a.length;) {
            var c = a[b];
            ++b;
            this._disposer.connect1(c.error, m(this, this.onError));
            this._disposer.connect0(c.progressChanged, m(this, this.onProgressChanged));
            c = c.get(m(this,
                this.onSuccess));
            null != c && this._disposer.add(c)
        }
    };
    g["flambe.util.MultiPromise"] = yi;
    yi.__name__ = ["flambe", "util", "MultiPromise"];
    yi.__super__ = uf;
    yi.prototype = k(uf.prototype, {
        onSuccess: function() { if (null != this._promises && (++this._successCount, this._successCount >= this._promises.length)) { for (var a = [], b = 0, c = this._promises; b < c.length;) { var d = c[b];++b;
                    a.push(d.get_result()) } this.finalize();
                this.set_result(a) } },
        onError: function(a) { null != this._promises && (this.finalize(), this.error.emit(a)) },
        onProgressChanged: function() {
            if (null !=
                this._promises) { for (var a = this._total = this._progress = 0, b = this._promises; a < b.length;) { var c = b[a];++a;
                    this._progress += c._progress;
                    this._total += c._total } this.progressChanged.emit() }
        },
        finalize: function() { this._disposer.dispose();
            this._promises = null },
        __class__: yi
    });
    var ga = function(a) { Mb.call(this, a) };
    g["flambe.util.Signal0"] = ga;
    ga.__name__ = ["flambe", "util", "Signal0"];
    ga.__super__ = Mb;
    ga.prototype = k(Mb.prototype, {
        connect: function(a, b) { null == b && (b = !1); return this.connectImpl(a, b) },
        emit: function() {
            var a = this;
            this._head == Mb.DISPATCHING_SENTINEL ? this.defer(function() { a.emitImpl() }) : this.emitImpl()
        },
        emitImpl: function() { for (var a = this.willEmit(), b = a; null != b;) b._listener(), b.stayInList || b.dispose(), b = b._next;
            this.didEmit(a) },
        __class__: ga
    });
    var Tl = function(a) { this.next = null;
        this.fn = a };
    g["flambe.util._SignalBase.Task"] = Tl;
    Tl.__name__ = ["flambe", "util", "_SignalBase", "Task"];
    Tl.prototype = { __class__: Tl };
    var gb = function() {};
    g["flambe.util.Strings"] = gb;
    gb.__name__ = ["flambe", "util", "Strings"];
    gb.getFileExtension = function(a) {
        var b =
            a.lastIndexOf(".");
        return 0 < b ? H.substr(a, b + 1, null) : null
    };
    gb.removeFileExtension = function(a) { var b = a.lastIndexOf("."); return 0 < b ? H.substr(a, 0, b) : a };
    gb.getUrlExtension = function(a) { var b = a.lastIndexOf("?");
        0 <= b && (a = H.substr(a, 0, b));
        b = a.lastIndexOf("/");
        0 <= b && (a = H.substr(a, b + 1, null)); return gb.getFileExtension(a) };
    gb.joinPath = function(a, b) { 0 < a.length && 47 != a.charCodeAt(a.length - 1) && (a += "/"); return a + b };
    gb.withFields = function(a, b) {
        var c = b.length;
        if (0 < c) {
            for (var a = 0 < a.length ? a + " [" : a + "[", d = 0; d < c;) {
                0 < d &&
                    (a += ", ");
                var e = b[d],
                    f = b[d + 1];
                if (y.is(f, Error)) { var l = f.stack;
                    null != l && (f = l) } a += e + "=" + y.string(f);
                d += 2
            }
            a += "]"
        }
        return a
    };
    var zi = function() { i.call(this);
        this.sdk = new bc;
        x.uncaughtError.connect((Ra = this.sdk, m(Ra, Ra.onException)));
        ra.onSuspendToggle = function(a) { x.root.add(new Vf(a ? 0 : 1)) } };
    g["flambesdk.SDKComponent"] = zi;
    zi.__name__ = ["flambesdk", "SDKComponent"];
    zi.__super__ = i;
    zi.prototype = k(i.prototype, { get_name: function() { return "SDKComponent_1" }, onUpdate: function(a) { this.sdk.onUpdate(a) }, __class__: zi });
    var T = function() {};
    g["game.Analytics"] = T;
    T.__name__ = ["game", "Analytics"];
    T.init = function() { null != n.config.canada_tracking && (T.canadaTrackingEnabled = n.config.canada_tracking.enabled);
        Oa.initDeltaDNA(n.config, T.onDeltaDNAReady) };
    T.onDeltaDNAReady = function() { T.isReady = !0;
        w.isNewPlayer && T.track("newPlayer", {});
        T.track("gameStarted");
        w.trackClientDevice() };
    T.track = function(a, b) { null == b && (b = {});
        w.track(a, b) };
    T.trackUI = function(a, b) { T.track("uiInteraction", { UIName: a, UIAction: "Click", UIType: "Button", UILocation: b }) };
    T.trackPlayButton = function() { T.canadaTrackingEnabled && x._platform.getExternal().call("trackFlashEvent", ["Show Title: Game Title", "play", "true"]) };
    T.trackItem = function(a, b) { var c = { raceMode: n.getCurrentMode(), characterSelected: n.currentCharacter.name, levelNumber: n.currentLevel, stuffType: b.type, stuffName: b.id };
        T.track(a, c) };
    T.trackPickup = function(a) {
        a = { raceMode: n.getCurrentMode(), characterSelected: n.currentCharacter.name, raceDifficulty: n.getCurrentDifficulty(), powerUpName: a };
        T.track("powerUpCollected",
            a)
    };
    T.trackCharUnlocked = function(a) { a = { raceMode: n.getCurrentMode(), characterUnlocked: a };
        T.track("characterUnlocked", a) };
    T.trackMatchStarted = function(a) { a = T.getMatchData(a);
        a.raceDifficulty = n.getCurrentDifficulty();
        T.track("raceStart", a) };
    T.trackMatchSummary = function(a, b) {
        var c = T.getMatchData(a);
        c.timeInRace = n.currentTime;
        c.racePosition = n.position + "";
        c.raceCupEarned = b;
        c.mysteryBoxPickups = n.boxCollected;
        c.itemActivations = n.itemUsed;
        c.numberBoostsUsed = n.boosts;
        c.numberObstaclesEncountered = n.obstaclesHit;
        c.numberPlayersBumped = n.playersBumped;
        c.raceDifficulty = n.getCurrentDifficulty();
        c.opponentHitsReceived = n.playerTimesBumped;
        T.track("raceSummary", c)
    };
    T.getMatchData = function(a) {
        var b = n.currentCharacter.name,
            c = "",
            d = "",
            e = "",
            f = "",
            l = "";
        null != a && (a.exists("body") && (c = a.get("body").id), a.exists("hood") && (d = a.get("hood").id), a.exists("spoiler") && (e = a.get("spoiler").id), a.exists("wheel") && (f = a.get("wheel").id), a.exists("flag") && (l = a.get("flag").id));
        return {
            raceMode: n.getCurrentMode(),
            characterSelected: b,
            levelNumber: n.currentLevel,
            bodyEquipped: c,
            hoodEquipped: d,
            spoilerEquipped: e,
            wheelEquipped: f,
            flagEquipped: l
        }
    };
    T.emitSdkEvent = function(a, b) { od.sendGameEvent(a, b) };
    var bg = function() { i.call(this) };
    g["stolo.ensys.components.SpawnPointComponent"] = bg;
    bg.__name__ = ["stolo", "ensys", "components", "SpawnPointComponent"];
    bg.__super__ = i;
    bg.prototype = k(i.prototype, { get_name: function() { return "SpawnPointComponent_14" }, __class__: bg });
    var Ug = function() { i.call(this) };
    g["game.world.objects.LaneSpawnPoint"] = Ug;
    Ug.__name__ = ["game", "world", "objects",
        "LaneSpawnPoint"
    ];
    Ug.__super__ = bg;
    Ug.prototype = k(bg.prototype, { __class__: Ug });
    var Vg = function() { this._canCheckForBoost = this._initialBoost = !1;
        this._currentZoom = 100;
        this._laneCooldown = this._itemCooldown = this._jumpCooldown = 0;
        this.onBumped = new ga;
        this.initialBoostDuration = 1;
        this.initialBoostValue = 300;
        this.maxZoom = 70;
        this.zoomTime = 1;
        this.cameraZoomRatio = 2E3;
        this.laneCooldown = 0;
        this.itemCooldown = this.hopCooldown = 0.5;
        i.call(this) };
    g["game.character.Player"] = Vg;
    Vg.__name__ = ["game", "character", "Player"];
    Vg.__super__ =
        i;
    Vg.prototype = k(i.prototype, {
        get_name: function() { return "Player_22" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._system = this.owner._internal_getFromParents("BaseGameSystem_24");
            null == this.controls && (this.controls = this.owner._compMap.Controls_32);
            this.kart = this.owner._compMap.Kart_4;
            this.kart.isPlayer = !0;
            this._camera = this.owner._internal_getFromParents("CameraSystem_49");
            this._jump = this.owner._compMap.Jump_23;
            this._laneObject = this.owner._compMap.LaneObject_12;
            this._physics = this.owner._compMap.PhysicsComponent_44;
            this._transform = this.owner._compMap.TransformComponent_70;
            this._collector = this.owner._compMap.CollectorComponent_41;
            this.addExc()
        },
        dispose: function() { i.prototype.dispose.call(this);
            this.kart = this.controls = null },
        onUpdate: function(a) {
            i.prototype.onUpdate.call(this, a);
            null != this.controls && this.controls.get_enabled() && (this.kart.move(Q.autoAccelControls ? 1 : this.controls.axisX, 0, a), this.startup(), this._itemCooldown -= a, this.controls.action && (this.controls.action = !1, 0 >= this._itemCooldown && (this._collector.useItem() &&
                (this.controls.jump = !1, this._jumpCooldown = this.hopCooldown), this._itemCooldown = this.itemCooldown)), this._jumpCooldown -= a, this.controls.jump && (this.controls.jump = !1, 0 >= this._jumpCooldown && (this._jump.hop(), this._jumpCooldown = this.hopCooldown)), this._laneCooldown -= a, 0 != this.controls.axisY && 0 >= this._laneCooldown && (this._laneCooldown = this.laneCooldown, this._laneObject.requestLane(-(this.controls.axisY | 0))));
            o.mobile || (a = Math.round(Math.max(this.maxZoom, 100 * (1 - this.kart.getSpeed() / this.cameraZoomRatio))),
                a != this._currentZoom && (this._currentZoom = a, this._camera.zoomTo(a / 100, this.zoomTime, D.quadOut)))
        },
        startup: function() { this.kart.isEnabled() ? this._initialBoost && (this.owner._compMap.SpeedControl_21.addBoost(this.initialBoostValue, 0, this.initialBoostDuration), this._initialBoost = !1) : this._initialBoost || this.checkStartupBoost() },
        checkStartupBoost: function() {
            y.is(this._system.hud.callouts.getCurrentCallout(), Wg) && this._system.hud.callouts.getCurrentCallout().boostAvailable && ((o.mobile ? this.controls.jump ||
                this.controls.action : 0 < this.controls.axisX) ? this._canCheckForBoost && (this._initialBoost = !0) : this._canCheckForBoost = !0)
        },
        addExc: function() { this._exc = A.createImage("exclamation", E.getPack("sprites"));
            this._exc.setAnchor(0.5 * this._exc.getNaturalWidth(), this._exc.getNaturalHeight());
            this._exc.setScale(1 / I.__cast(this.owner._compMap.Sprite_2, J).scale);
            this._exc.setXY(-100, -250);
            this._exc.setAlpha(0);
            this.owner.addChild((new p).add(this._exc), !1) },
        showExc: function() {
            var a = this;
            this._exc.y.set_behavior(null);
            B.to(this._exc, { alpha: 1, y: -350 }, { time: 0.5, ease: D.quintOut, onComplete: function() { a._exc.y.set_behavior(new Ea(-350, -300, 0.5)) } })
        },
        hideExc: function() { this._exc.y.set_behavior(null);
            B.to(this._exc, { alpha: 0, y: -250 }, { ease: D.quadOut }) },
        __class__: Vg
    });
    var Ai = function() {
        this._lastTeleportX = 0;
        this.isInvisible = !1;
        this._emp = this._empId = this._empSpeedReduce = this._empslowDuration = 0;
        this._enabled = !1;
        this.onReachEnd = new Lb;
        this.currentLap = 1;
        this.isPlayer = !1;
        this.lightningSignal = new ga;
        this.overtakeSignal = new S;
        this.skidSlowRatio = 0.5;
        this.maxSpeed = 90;
        this.acceleration = 1;
        i.call(this)
    };
    g["game.character.Kart"] = Ai;
    Ai.__name__ = ["game", "character", "Kart"];
    Ai.__super__ = i;
    Ai.prototype = k(i.prototype, {
        get_name: function() { return "Kart_4" },
        onStart: function() {
            i.prototype.onStart.call(this);
            null != this.mods && K.applyMods(this, this.mods);
            this._pack = E.getPack("sprites");
            this._world = this.owner._internal_getFromParents("WorldSystem_25");
            this._defaultLane = this.owner._compMap.DefaultLane_6;
            this._speed = this.owner._compMap.SpeedControl_21;
            this._state = this.owner._compMap.KartState_5;
            this._character = this.owner._compMap.CharacterState_48;
            this._physics = this.owner._compMap.PhysicsComponent_44;
            this._transform = this.owner._compMap.TransformComponent_70;
            this._laneObject = this.owner._compMap.LaneObject_12;
            this._spine = this.owner._compMap.Sprite_2;
            null != this.owner._compMap.Player_22 && (this._engineSFX = t.play("engine_run", "ENGINE", null, !0))
        },
        onStop: function() {
            this._laneObject = this._transform = this._physics = this._character = this._state = this._speed =
                this._defaultLane = this._world = this.onReachEnd = null;
            null != this._engineSFX && this._engineSFX.dispose();
            i.prototype.onStop.call(this)
        },
        getSpeed: function() { return null == this._physics ? 0 : this._physics.getVelocity().get_x() },
        enable: function(a) { this._enabled = a },
        isEnabled: function() { return this._enabled },
        move: function(a, b, c) {
            this._enabled && null != this._physics && this._physics.enabled && (a = this._speed.calculate(0 < a), null != a && (this._physics.getVelocity().set_x(a.x), this._physics.applyImpulse(0, 60 * a.y * c), this._speed.hasBoost &&
                this._physics.getVelocity().get_x() > this._speed.maxSpeed ? (null == this._spine.get_animation().x._behavior && this._spine.get_animation().x.set_behavior(new qf(8, 5)), null == this._spine.get_animation().y._behavior && this._spine.get_animation().y.set_behavior(new qf(13, 8))) : (this._spine.get_animation().x.set_behavior(null), ua.codeUnlocked("HOVER_CAR") ? null == this._spine.get_animation().y._behavior && this._spine.get_animation().y.set_behavior(new Ea(-20, 20, 1)) : this._spine.get_animation().y.set_behavior(null)),
                this._transform.position.y > this._world.maxY && (c = this._transform.position.x, this._lastTeleportX < c + 200 && (c += 300), this._laneObject.resetOffset(), a = this._defaultLane.getId(c), this.owner._compMap.Teleport_11.teleport(c, a), this._lastTeleportX = c)))
        },
        overtake: function() { this.isPlayer && 0.2 > Math.random() && t.play(this.character.characterName + "_taunt", "VO", null, !1, !0);
            this.changeCharacterState(Ab.STARE, m(this, this.resetCharacter));
            this.overtakeSignal.emit(this.owner) },
        prepEmp: function(a, b, c) {
            this._empSpeedReduce =
                a;
            this._empslowDuration = b;
            this._empFx = new cg("cloud", "sprites", c);
            this._empFx.centerAnchor().setScale(0);
            this._empFx.setXY(30, -180);
            this._spine.appendToSlot("character", this._empFx);
            a = 1 / this._spine.scale;
            B.to(this._empFx, { scaleX: a, scaleY: a }, { time: 0.8, ease: D.bounceOut });
            B.delayCallTo(m(this, this.animateEmp), 0.6, this.owner)
        },
        animateEmp: function() { null != this._empFx && this._empFx.y.set_behavior(new Ea(-180, -240, 0.4));
            B.delayCallTo(m(this, this.addLightning), 1, this.owner) },
        addLightning: function() {
            this.lightningSignal.emit();
            null != this._empFx && (this._empFx.gotoAndPlay("strike", { loop: !1 }), this._empFx.y.set_behavior(null), this._empFx.setXY(50, -180), this._empFx.startDispose = !0, this._empFx = null);
            this.emp()
        },
        emp: function() {
            if (!this.isInvincible()) {
                var a = new cg("electric_blast", "sprites", 2);
                a.startDispose = !0;
                a.centerAnchor();
                a.setXY(-50, -60);
                this._spine.appendToSlot("character", a);
                a.setScale(1 / this._spine.scale);
                0 < this._emp && this._speed.removeBoost(this._empId);
                this._speed.stop(0.25 * this._empslowDuration);
                this._emp = this._empslowDuration;
                this._empId = this._speed.addSlow(this._empSpeedReduce, 0, this._empslowDuration)
            }
        },
        resetState: function() { this._state.change(Sa.DRIVE, null, !0) },
        changeCharacterState: function(a, b, c) { null == c && (c = !1);
            this._character.change(a, b, c) },
        resetCharacter: function() { this._character.change(Ab.NEUTRAL, null, !0) },
        isInvincible: function() { var a = null != this.owner._compMap.Fireworks_7 || null != this.owner._compMap.Ghost_9;
            null != this.owner._compMap.Shield_8 && (a = !0, this.owner._compMap.Shield_8.end()); return a },
        setLap: function(a) {
            this.currentLap >=
                a || (this.currentLap = a, this.onReachEnd.emit(this.owner, this.currentLap))
        },
        setInvisibility: function(a) { this.isInvisible = a },
        __class__: Ai
    });
    var Sa = function() { this.currentState = Sa.DRIVE;
        this.onChange = new Lb;
        i.call(this) };
    g["game.character.KartState"] = Sa;
    Sa.__name__ = ["game", "character", "KartState"];
    Sa.__super__ = i;
    Sa.prototype = k(i.prototype, {
        get_name: function() { return "KartState_5" },
        onStart: function() { i.prototype.onStart.call(this);
            this._spine = this.owner._compMap.Sprite_2 },
        dispose: function() {
            this._callback =
                this._spine = null;
            i.prototype.dispose.call(this)
        },
        change: function(a, b, c) { null == c && (c = !1); if (!c && a.priority < this.currentState.priority) return !1;
            this._callback = b;
            this.currentState = a;
            this._spine.play(a.id, a.loop, m(this, this.onStateComplete));
            ua.codeUnlocked("HOVER_CAR") && this.applyHoverCheat();
            ua.codeUnlocked("INVISIBLE") && this.applyInvisiCheat();
            this.onChange.emit(this.owner, a); return !0 },
        onStateComplete: function() { null != this._callback && (this._callback(), this._callback = null) },
        applyInvisiCheat: function() {
            this._spine.hasSlot("flag") &&
                (this._spine.getSlot("flag").a = 0);
            this._spine.hasSlot("body") && (this._spine.getSlot("body").a = 0);
            this._spine.hasSlot("body_back") && (this._spine.getSlot("body_back").a = 0);
            this._spine.hasSlot("wheel_back") && (this._spine.getSlot("wheel_back").a = 0);
            this._spine.hasSlot("spoiler") && (this._spine.getSlot("spoiler").a = 0);
            this._spine.hasSlot("hood") && (this._spine.getSlot("hood").a = 0);
            this._spine.hasSlot("tire_back2") && (this._spine.getSlot("tire_back2").a = 0);
            this._spine.hasSlot("wheel_back2") && (this._spine.getSlot("wheel_back2").a =
                0);
            this._spine.hasSlot("tire_front2") && (this._spine.getSlot("tire_front2").a = 0);
            this._spine.hasSlot("wheel_front2") && (this._spine.getSlot("wheel_front2").a = 0);
            this._spine.hasSlot("tire_back") && (this._spine.getSlot("tire_back").a = 0);
            this._spine.hasSlot("tire_front") && (this._spine.getSlot("tire_front").a = 0);
            this._spine.hasSlot("wheel_front") && (this._spine.getSlot("wheel_front").a = 0);
            this._spine.hasSlot("default/reactor_back2") && (this._spine.getSlot("default/reactor_back2").a = 0);
            this._spine.hasSlot("default/reactor_back") &&
                (this._spine.getSlot("default/reactor_back").a = 0);
            this._spine.hasSlot("default/stering_wheel") && (this._spine.getSlot("default/stering_wheel").a = 0);
            this._spine.hasSlot("default/bar_front_02") && (this._spine.getSlot("default/bar_front_02").a = 0);
            this._spine.hasSlot("default/bar_back") && (this._spine.getSlot("default/bar_back").a = 0);
            this._spine.hasSlot("default/bar_front_01") && (this._spine.getSlot("default/bar_front_01").a = 0);
            this._spine.hasSlot("images/default/stering_wheel") && (this._spine.getSlot("images/default/stering_wheel").a =
                0)
        },
        applyHoverCheat: function() {
            this._spine.hasSlot("wheel_back") && (this._spine.getSlot("wheel_back").a = 0);
            this._spine.hasSlot("tire_back2") && (this._spine.getSlot("tire_back2").a = 0);
            this._spine.hasSlot("wheel_back2") && (this._spine.getSlot("wheel_back2").a = 0);
            this._spine.hasSlot("tire_front2") && (this._spine.getSlot("tire_front2").a = 0);
            this._spine.hasSlot("wheel_front2") && (this._spine.getSlot("wheel_front2").a = 0);
            this._spine.hasSlot("tire_back") && (this._spine.getSlot("tire_back").a = 0);
            this._spine.hasSlot("tire_front") &&
                (this._spine.getSlot("tire_front").a = 0);
            this._spine.hasSlot("wheel_front") && (this._spine.getSlot("wheel_front").a = 0)
        },
        __class__: Sa
    });
    var qc = function() { this._result = { x: 0, y: 0 };
        this._slow = { x: 1, y: 1 };
        this._addedImpulse = { x: 0, y: 0 };
        this._impulse = { x: 0, y: 0 };
        this._skid = this._stopped = 0;
        this._toRemove = [];
        this._boosts = new Fb;
        this._slows = new Fb;
        this.hasBoost = !1;
        this.traction = 1;
        this.skidSlowRatio = 0.9;
        this.maxSpeed = 550;
        this.minSpeed = 0;
        this.deceleration = 19;
        this.acceleration = 5;
        i.call(this) };
    g["game.character.SpeedControl"] =
        qc;
    qc.__name__ = ["game", "character", "SpeedControl"];
    qc.__super__ = i;
    qc.prototype = k(i.prototype, {
        get_name: function() { return "SpeedControl_21" },
        onStart: function() { i.prototype.onStart.call(this) },
        dispose: function() { this._result = this._slow = this._addedImpulse = this._impulse = this._toRemove = this._boosts = this._slows = null;
            i.prototype.dispose.call(this) },
        onUpdate: function(a) {
            this._addedImpulse.x = 0;
            for (var b = this._addedImpulse.y = 0, c = this._toRemove; b < c.length;) { var d = c[b];++b;
                this.destroyBoost(d) } i.prototype.onUpdate.call(this,
                a);
            for (b = this._boosts.keys(); b.hasNext();) this._boosts.get(b.next()).update(a);
            for (b = this._slows.keys(); b.hasNext();) this._slows.get(b.next()).update(a);
            0 < this._skid && (this._skid -= a);
            0 < this._stopped && (this._stopped -= a)
        },
        calculate: function(a) { this.calculateImpulse(a);
            this._result.x = this._impulse.x * this._slow.x + this._addedImpulse.x;
            this._result.y = this._impulse.y * this._slow.y + this._addedImpulse.y;
            this._result.x = Math.max(this.minSpeed, this._result.x); return this._result },
        getImpulse: function() { return this._result },
        addBoost: function(a, b, c) { null == c && (c = -1); var d = this,
                e = qc._nextId++,
                a = new pd(a, b);
            this._boosts.set(e, a);
            0 < c ? B.delayCallTo(function() { d._toRemove.push(e) }, c, this.owner) : this._toRemove.push(e); return e },
        addSlow: function(a, b, c) { null == c && (c = 1); var d = this,
                e = qc._nextId++,
                a = new pd(a, b);
            this._slows.set(e, a);
            0 < c ? B.delayCallTo(function() { d._toRemove.push(e) }, c, this.owner) : this._toRemove.push(e); return e },
        removeBoost: function(a, b) {
            null == b && (b = 1);
            var c = this,
                d = null;
            this._boosts.exists(a) ? d = this._boosts.get(a) :
                this._slows.exists(a) && (d = this._slows.get(a));
            null != d && (d.x.animateTo(0, b * this.traction), d.y.animateTo(0, b * this.traction), B.delayCallTo(function() { c._toRemove.push(a) }, b, this.owner))
        },
        skid: function(a) { this._skid = a },
        stop: function(a) { null == a && (a = 0);
            this._impulse.x = 0;
            this._impulse.y = 0;
            this._stopped = a },
        calculateImpulse: function(a) {
            if (0 < this._stopped) this._impulse.x = 0, this._impulse.y = 0;
            else {
                this._impulse.x = a ? this._impulse.x + this.acceleration : Math.max(0, this._impulse.x - this.deceleration);
                this._impulse.y =
                    0;
                this._impulse.x = Math.min(0 < this._skid ? this.maxSpeed * this.skidSlowRatio : this.maxSpeed, this._impulse.x);
                for (var a = 0, b = this._boosts.iterator(); b.hasNext();) { var c = b.next(),
                        a = a + c.x._value;
                    this._impulse.x += c.x._value;
                    this._impulse.y += c.y._value } this.hasBoost = 0 < a;
                for (a = this._slows.iterator(); a.hasNext();) b = a.next(), this._impulse.x *= b.x._value, this._impulse.y *= b.y._value
            }
        },
        destroyBoost: function(a) {
            var b;
            this._boosts.exists(a) ? (b = this._boosts.get(a), b.dispose(), this._boosts.remove(a)) : this._slows.exists(a) &&
                (b = this._slows.get(a), b.dispose(), this._slows.remove(a));
            H.remove(this._toRemove, a)
        },
        __class__: qc
    });
    var Bi = function() { this._lastBurst = 0;
        this.rubberTime = 2;
        qc.call(this) };
    g["game.character.ai.AISpeedControl"] = Bi;
    Bi.__name__ = ["game", "character", "ai", "AISpeedControl"];
    Bi.__super__ = qc;
    Bi.prototype = k(qc.prototype, {
        onStart: function() { qc.prototype.onStart.call(this);
            this._elasticBoost = new ca(0) },
        dispose: function() { this._elasticBoost = null;
            qc.prototype.dispose.call(this) },
        onUpdate: function(a) {
            qc.prototype.onUpdate.call(this,
                a);
            this._elasticBoost.update(a)
        },
        addBurst: function(a, b) { this._lastBurst != a && (this._elasticBoost.animateTo(a, this.rubberTime, D.quadInOut), this._lastBurst = a);
            this._addedImpulse.x += this._elasticBoost._value;
            this._addedImpulse.y += b },
        __class__: Bi
    });
    var Xg = function() { this._skipRemove = 0;
        this._fxs = [];
        this._tireState = "idle";
        this._nextTireSwap = 0;
        this._idle = !0;
        this._tires = [];
        this._wheels = [];
        this.forcedSpeed = -1;
        this.hasTires = !0;
        this.tireSpeed = 15;
        this.wheelSpeed = 3;
        this.wheelId = "wheel_1";
        i.call(this) };
    g["game.customization.KartWheels"] =
        Xg;
    Xg.__name__ = ["game", "customization", "KartWheels"];
    Xg.__super__ = i;
    Xg.prototype = k(i.prototype, {
        get_name: function() { return "KartWheels_109" },
        onStart: function() {
            null != this.owner && (i.prototype.onStart.call(this), this._kart = this.owner._compMap.Kart_4, this._spine = this.owner._compMap.Sprite_2, ua.codeUnlocked("DRAGSTER") || (this._wheels.push(this._spine.getSlot("wheel_front")), this._wheels.push(this._spine.getSlot("wheel_front2"))), this._wheels.push(this._spine.getSlot("wheel_back")), this._wheels.push(this._spine.getSlot("wheel_back2")),
                this.hasTires && !o.lowPerformance && (this._tires.push("tire_front"), this._tires.push("tire_back"), this._tires.push("tire_front2"), this._tires.push("tire_back2"), this._nextTireSwap = this.tireSpeed, E.createDynamicPack(this.wheelId, ["accessories/" + this.wheelId + "_idle", "accessories/" + this.wheelId + "_action1", "accessories/" + this.wheelId + "_action2"], m(this, this.onPackReady))))
        },
        onPackReady: function(a) {
            this._tireIdle = a.getTexture(this.wheelId + "_idle");
            this._tireAction1 = a.getTexture(this.wheelId + "_action1");
            this._tireAction2 = a.getTexture(this.wheelId + "_action2")
        },
        dispose: function() { i.prototype.dispose.call(this) },
        onUpdate: function(a) { if (null != this.owner && this._kart.isEnabled()) { i.prototype.onUpdate.call(this, a); var b;
                b = -1 == this.forcedSpeed ? Math.round(this._kart.getSpeed()) : this.forcedSpeed;
                this._idle = 0 == b;
                this.rotateWheels(a, b);
                this.hasTires && this.rotateTires(a, b) } },
        addFx: function(a) {
            if (0 < this._fxs.length) this._skipRemove++;
            else {
                var b = new fb(a, "sprites");
                b.setScale(1 / this._spine.scale);
                b.setXY(this._wheels[0].bone.x -
                    50, this._wheels[0].bone.y - 15);
                this.owner.addChild((new p).add(b));
                this._fxs.push(b);
                b = new fb(a, "sprites");
                b.setScale(1 / this._spine.scale);
                b.setXY(this._wheels[1].bone.x - 50, this._wheels[1].bone.y - 15);
                this.owner.addChild((new p).add(b));
                this._fxs.push(b)
            }
        },
        removeFx: function() { if (0 < this._skipRemove) this._skipRemove--;
            else { for (var a = 0, b = this._fxs; a < b.length;) { var c = b[a];++a;
                    c.owner.dispose() } this._fxs = [] } },
        rotateWheels: function(a, b) {
            if (!this._idle)
                for (var c = 0, d = this._wheels; c < d.length;) {
                    var e = d[c];
                    ++c;
                    e.bone.rotation -= b * a * this.wheelSpeed
                }
        },
        rotateTires: function(a, b) { null != this._tireIdle && (this._idle ? this.idleTires() : (this._nextTireSwap -= b * a, 0 >= this._nextTireSwap && (this.swapTires(), this._nextTireSwap = this.tireSpeed))) },
        idleTires: function() { if ("idle" != this._tireState)
                for (var a = 0, b = this._tires; a < b.length;) { var c = b[a];++a;
                    this._spine.changeSlotFromImage(c, this._tireIdle) } },
        swapTires: function() {
            var a;
            this._tireState = a = "action1" == this._tireState ? "action2" : "action1";
            a = "action1" == a ? this._tireAction1 : this._tireAction2;
            for (var b = 0, c = this._tires; b < c.length;) { var d = c[b];++b;
                this._spine.changeSlotFromImage(d, a) }
        },
        __class__: Xg
    });
    var Ab = function() { this.currentState = Ab.NEUTRAL;
        i.call(this) };
    g["game.character.CharacterState"] = Ab;
    Ab.__name__ = ["game", "character", "CharacterState"];
    Ab.__super__ = i;
    Ab.prototype = k(i.prototype, {
        get_name: function() { return "CharacterState_48" },
        init: function(a) { this._spine = a },
        dispose: function() { this._callback = this._spine = null;
            i.prototype.dispose.call(this) },
        change: function(a, b, c) {
            null == c && (c = !1);
            if (c || !(a.priority < this.currentState.priority)) this._callback = b, this.currentState = a, this._spine.play(a.id, a.loop, m(this, this.onStateComplete))
        },
        onStateComplete: function() { null != this._callback && (this._callback(), this._callback = null) },
        __class__: Ab
    });
    var qd = function() { this._enabled = !0;
        this._currentTickDt = 0;
        this.pack = qd.DefaultPack;
        this.tickRate = 0.5;
        i.call(this) };
    g["stolo.ai.components.BaseAI"] = qd;
    qd.__name__ = ["stolo", "ai", "components", "BaseAI"];
    qd.__super__ = i;
    qd.prototype = k(i.prototype, {
        get_name: function() { return "BaseAI_16" },
        dispose: function() { i.prototype.dispose.call(this);
            this.disposeBehavior() },
        onStart: function() { i.prototype.onStart.call(this);
            this.createBehavior(this.data) },
        onUpdate: function(a) { if (null != this._behavior && this._enabled)
                for (this._currentTickDt += a; this._currentTickDt >= this.tickRate;) this.updateBehavior(), this._currentTickDt -= this.tickRate },
        updateBehavior: function() { this._behavior.tick(this) },
        createBehavior: function(a, b) {
            null == b && (b = !0);
            null == a && null != this.file && (a = Ta.getBehaviorData(this.file, this.pack));
            if (null != a) this._behavior = Ta.fromData(a);
            else if (b) throw "No data to create behavior!";
        },
        disposeBehavior: function() { null != this._behavior && (this._behavior.abort(), this._behavior.dispose(), this.file = this.data = this._behavior = null) },
        __class__: qd
    });
    var Ci = function() {
        this._aiRatio = 1.65;
        this._culling = !1;
        this._opponents = [];
        this._attackCooldown = this._changeLaneCooldown = this._itemCooldown = 0;
        this.bumpAgression = this.itemAgression = !1;
        this.randomToCooldown = 1;
        this.detectionWidth = 100;
        this.itemUseCooldown = 5;
        this.changeLaneCooldown =
            2;
        this.attackCooldown = 4;
        qd.call(this);
        this.tickRate = 0.02;
        this.file = "racer_ai.json"
    };
    g["game.character.ai.CharacterAI"] = Ci;
    Ci.__name__ = ["game", "character", "ai", "CharacterAI"];
    Ci.__super__ = qd;
    Ci.prototype = k(qd.prototype, {
        get_name: function() { return "CharacterAI_17" },
        onStart: function() {
            qd.prototype.onStart.call(this);
            this._kart = this.owner._compMap.Kart_4;
            this._laneObject = this.owner._compMap.LaneObject_12;
            this._collector = this.owner._compMap.CollectorComponent_41;
            this._custo = this.owner._compMap.CustomizationComponent_18;
            this._physics = this.owner._compMap.PhysicsComponent_44;
            this._speed = this.owner._compMap.SpeedControl_21;
            this._transform = this.owner._compMap.TransformComponent_70;
            this._logic = this.owner._internal_getFromParents("GameLogic_38");
            for (var a = 0, b = this.owner._internal_getFromParents("LevelSystem_13").characters; a < b.length;) { var c = b[a];++a;
                c != this.owner && this._opponents.push(c) } this._custo.updateStats()
        },
        onStop: function() { this._transform = this._laneObject = this._kart = null;
            qd.prototype.onStop.call(this) },
        onUpdate: function(a) {
            this._kart.isEnabled() &&
                (qd.prototype.onUpdate.call(this, a), this._culling ? this._transform.setXY(this._transform.position.x + this._speed.calculate(!0).x * a * this._aiRatio, this._transform.position.y) : (this.owner._compMap.Kart_4.move(1, 0, a), 0 < this._attackCooldown && (this._attackCooldown -= a), 0 < this._changeLaneCooldown && (this._changeLaneCooldown -= a), 0 < this._itemCooldown && (this._itemCooldown -= a)))
        },
        pause: function() { this._culling = !0 },
        resume: function() { this._culling = !1 },
        updateBehavior: function() { this._culling || qd.prototype.updateBehavior.call(this) },
        Attack: function() { if ("tuto2" == n.currentLevel || !this.bumpAgression || 0 < this._attackCooldown) return $.Failure;
            this._attackCooldown = this.attackCooldown + Math.random() * this.randomToCooldown; for (var a = 0, b = this._opponents; a < b.length;) { var c = b[a];++a; if (this.checkAttack(c)) return $.Success } return $.Failure },
        ChangeLane: function() {
            if ("tuto2" == n.currentLevel || 0 < this._changeLaneCooldown) return $.Failure;
            this._changeLaneCooldown = this.changeLaneCooldown + Math.random() * this.randomToCooldown;
            var a;
            a = 0.5 < Math.random() ?
                1 : -1;
            return this._laneObject.requestLane(a) || this._laneObject.requestLane(-a) ? $.Success : $.Failure
        },
        UseItem: function() { if ("tuto2" == n.currentLevel || !this.itemAgression || !this._logic.canUseItem() || 0 < this._itemCooldown || !this._collector.readyToUse) return $.Failure;
            this._logic.useItem();
            this._collector.useItem(); return $.Success },
        MoveForward: function() { return $.Success },
        checkAttack: function(a) {
            a = a._compMap.TransformComponent_70;
            return Math.abs(this._transform.position.x - a.position.x) < this.detectionWidth ?
                this._transform.position.y > a.position.y ? this._laneObject.requestLane(-1) : this._laneObject.requestLane(1) : !1
        },
        __class__: Ci
    });
    var Di = function() { this._nextUpdate = 0;
        this._behind = !1;
        this.bufferBack = 1E3;
        this.bufferFront = 1500;
        this.elasticSpeed = 100 };
    g["game.character.ai.ElasticAI"] = Di;
    Di.__name__ = ["game", "character", "ai", "ElasticAI"];
    Di.__super__ = i;
    Di.prototype = k(i.prototype, {
        get_name: function() { return "ElasticAI_15" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._logic = this.owner._internal_getFromParents("GameLogic_38");
            this._transform = this.owner._compMap.TransformComponent_70;
            this._speed = this.owner._compMap.SpeedControl_21
        },
        dispose: function() { i.prototype.dispose.call(this) },
        onUpdate: function(a) {
            i.prototype.onUpdate.call(this, a);
            this._nextUpdate -= a;
            0 >= this._nextUpdate && (this.updateTarget(), this._nextUpdate = 3);
            null == this._targetTransform ? this._speed.addBurst(0, 0) : this._behind ? this._transform.position.x < this._targetTransform.position.x - this.bufferBack ? this._speed.addBurst(this.elasticSpeed, 0) : this._speed.addBurst(0,
                0) : this._transform.position.x > this._targetTransform.position.x + this.bufferFront ? this._speed.addBurst(-this.elasticSpeed, 0) : this._speed.addBurst(0, 0)
        },
        updateTarget: function() { var a = this._logic.getPosition(this.owner);
            this._targetVehicle = (this._behind = 0 < a - this._logic.getPlayerPosition()) ? this._logic.getKartAtPosition(a - 1) : this._logic.getKartAtPosition(a + 1);
            this._targetTransform = null != this._targetVehicle ? this._targetVehicle._compMap.TransformComponent_70 : null },
        __class__: Di
    });
    var Ed = function() {
        this.onInventoryReady =
            new ga;
        this.isLoaded = !1;
        this.inventory = new M;
        this.inventoryJson = {};
        this.inventorySave = null;
        i.call(this)
    };
    g["stolo.customization.CustomizationComponent"] = Ed;
    Ed.__name__ = ["stolo", "customization", "CustomizationComponent"];
    Ed.__super__ = i;
    Ed.prototype = k(i.prototype, {
        get_name: function() { return "CustomizationComponent_18" },
        onStart: function() { this._spine = this.owner._compMap.Sprite_2; if (null == this._spine) throw "SpineComponent not found";
            this.loadInventory() || this.importInventory(this.inventoryJson) },
        equipItem: function(a,
            b) { null != a && (this.inventory.set(b, a), fa.getAssetPack(a, m(this, this.setupItem))) },
        getItem: function(a) { return this.inventory.get(a) },
        setupItem: function(a, b) { for (var c = 0, d = a.parts; c < d.length;) { var e = d[c];++c;
                this._spine.changeSlotFromImage(e.attachment, null != e.url ? b.getTexture(e.url) : null, e.offset) } },
        importInventory: function(a) { if (null == a) return !1; for (var b = z.fields(a), c = 0; c < b.length;) { var d = b[c];++c;
                this.equipItem(fa.getById(z.field(a, d)), d) } this.isLoaded = !0;
            this.onInventoryReady.emit(); return !0 },
        exportInventory: function() {
            for (var a = {}, b = this.inventory.keys(); b.hasNext();) { var c = b.next();
                a[c] = this.inventory.get(c).id }
            return a
        },
        saveInventory: function() { return fa.saveInventory(this.inventorySave, this.exportInventory()) },
        loadInventory: function() { return this.importInventory(fa.loadInventory(this.inventorySave)) },
        __class__: Ed
    });
    var Ei = function() { Ed.call(this) };
    g["game.customization.KartCustomizationComponent"] = Ei;
    Ei.__name__ = ["game", "customization", "KartCustomizationComponent"];
    Ei.__super__ = Ed;
    Ei.prototype = k(Ed.prototype, {
        importInventory: function(a) {
            (a =
                Ed.prototype.importInventory.call(this, a)) && this.updateStats();
            return a
        },
        updateStats: function() {
            var a = this.owner._compMap.ModsComponent_20;
            if (null != a) {
                this._stats = a.stats;
                this._itemStats = oa.getItemsStats(this.owner);
                this._charStats = G.getDataByName(this.owner._compMap.Kart_4.character.characterName).stats;
                for (var b = 0, c = z.fields(this._stats); b < c.length;) { var d = c[b];++b;
                    this.updateStat(d) } a.applyStats(this._stats);
                a = this.inventory.get("wheel");
                null != a && (b = this.owner._compMap.KartWheels_109, null == b &&
                    (b = new Xg), b.wheelId = a.id, this.owner.add(b))
            }
        },
        updateStat: function(a) { var b = 0;
            Object.prototype.hasOwnProperty.call(this._stats, a) && (b = z.field(this._stats, a));
            Object.prototype.hasOwnProperty.call(this._charStats, a) && (b += z.field(this._charStats, a));
            Object.prototype.hasOwnProperty.call(this._itemStats, a) && (b += z.field(this._itemStats, a));
            this._stats[a] = b },
        __class__: Ei
    });
    var Fi = function() { this._enabled = !0;
        this.rangeBack = 2500;
        this.rangeFront = 1500;
        i.call(this) };
    g["game.character.KartCulling"] = Fi;
    Fi.__name__ = ["game", "character", "KartCulling"];
    Fi.__super__ = i;
    Fi.prototype = k(i.prototype, {
        get_name: function() { return "KartCulling_108" },
        onStart: function() {
            i.prototype.onStart.call(this);
            null != this.owner._compMap.Player_22 ? this.dispose() : (this._renderer = this.owner._internal_getFromParents("RendererSystem_56"), this._logic = this.owner._internal_getFromParents("GameLogic_38"), this._ai = this.owner._compMap.CharacterAI_17, this._kart = this.owner._compMap.Kart_4, this._laneRequest = this.owner._compMap.LaneObject_12, this._physics =
                this.owner._compMap.PhysicsComponent_44, this._spine = this.owner._compMap.Sprite_2, this._transform = this.owner._compMap.TransformComponent_70)
        },
        onUpdate: function(a) { null != this._transform && this._logic.isStarted && (i.prototype.onUpdate.call(this, a), this._transform.position.x < -this._renderer.displacement.x - this.rangeFront || this._transform.position.x > -this._renderer.displacement.x + this.rangeBack ? this.disable() : this.enable()) },
        dispose: function() {
            this._transform = this._spine = this._physics = this._laneRequest =
                this._kart = this._ai = this._renderer = this._logic = null;
            i.prototype.dispose.call(this)
        },
        isCulled: function() { return !this._enabled },
        enable: function() { this._enabled || (this._enabled = !0, this._physics.setTransform = !0, this._physics.enable(), this._ai.resume(), this._kart.character.resume(), this._spine.resume()) },
        disable: function() {
            this._enabled && (this._enabled = !1, this._physics.setTransform = !1, this._physics.disable(), this._ai.pause(), this._laneRequest.resetOffset(), this._kart.character.pause(), this._kart.enable(!0),
                this._spine.pause())
        },
        __class__: Fi
    });
    var Gi = function() { this.teleportStartDelay = this._defaultScale = 1;
        this.teleportDelay = 0.25;
        i.call(this) };
    g["game.character.Teleport"] = Gi;
    Gi.__name__ = ["game", "character", "Teleport"];
    Gi.__super__ = i;
    Gi.prototype = k(i.prototype, {
        get_name: function() { return "Teleport_11" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._world = this.owner._internal_getFromParents("WorldSystem_25");
            this._kart = this.owner._compMap.Kart_4;
            this._display = this.owner._compMap.Sprite_2;
            this._physics =
                this.owner._compMap.PhysicsComponent_44;
            this._laneObject = this.owner._compMap.LaneObject_12;
            this._transform = this.owner._compMap.TransformComponent_70;
            this._defaultScale = this._display.scale;
            this._scaleTarget = new ca(this._defaultScale)
        },
        onStop: function() { this._scaleTarget = this._transform = this._laneObject = this._physics = this._display = this._kart = this._world = null;
            i.prototype.onStop.call(this) },
        onUpdate: function(a) {
            i.prototype.onUpdate.call(this, a);
            null != this._scaleTarget && (this._scaleTarget.update(a), this._display.scale =
                this._scaleTarget._value)
        },
        teleport: function(a, b, c, d) { null == d && (d = !1);
            null == c && (c = !0); var e = this,
                f = this._world.getLaneById(b); if (null == f) throw " cannot teleport(" + a + ", " + b + ")";
            null != this.owner._compMap.KartCulling_108 && this.owner._compMap.KartCulling_108.isCulled() || (this._kart.enable(!1), this._physics.resetImpulse(), this._physics.resetVelocity(), this._physics.disable(), this._destinationX = a, this._destinationLane = f, B.delayCallTo(function() { e.startAnim(c) }, d ? this.teleportStartDelay : 0, this.owner)) },
        startAnim: function(a) {
            null ==
                this.owner._compMap.TeleportFx_47 && this.owner.add(new Hi);
            var b = this.owner._compMap.TeleportFx_47;
            b.flashIntro = a;
            a = this._destinationLane.getY(this._destinationX);
            b.teleportTo(this._destinationX, a, null, this.teleportDelay);
            b.onIntroComplete.connect(m(this, this.teleportIntroComplete)).once();
            b.onComplete.connect(m(this, this.teleportComplete)).once()
        },
        teleportIntroComplete: function() {
            this._kart.changeCharacterState(Ab.NEUTRAL, null, !0);
            this._laneObject.changeLane(this._destinationLane.id);
            this._physics.setPosition(this._destinationX,
                this._destinationLane.getY(this._destinationX));
            this._physics.enable()
        },
        teleportComplete: function() { this._kart.enable(!0) },
        __class__: Gi
    });
    var we = function() { this.onCollection = new Lb;
        this.targets = ["COLLECTABLE"];
        i.call(this) };
    g["stolo.ensys.components.CollectorComponent"] = we;
    we.__name__ = ["stolo", "ensys", "components", "CollectorComponent"];
    we.__super__ = i;
    we.prototype = k(i.prototype, {
        get_name: function() { return "CollectorComponent_41" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._physic = this.owner._compMap.PhysicsComponent_44;
            null != this._physic && this._physic.addContactType("COLLECTOR");
            ba.getSystemEntity(this.owner);
            this._physicSystem = ba.getSystemEntity(this.owner).getComponent("PhysicSystem_31");
            this._physicSystem.addContactListener(V.BEGIN, da.ANY, "COLLECTOR", this.targets, this.owner, m(this, this.onContactBegin))
        },
        onStop: function() { this._physicSystem.removeContactListener(V.BEGIN, da.ANY, "COLLECTOR", this.targets, this.owner);
            this._physic = this._physicSystem = null;
            i.prototype.onStop.call(this) },
        onContactBegin: function(a) {
            var b =
                a._compMap.CollectableComponent_10;
            null != b && (b.isCollectable() && b.collect(this.owner), this.onCollection.emit(this.owner, a))
        },
        __class__: we
    });
    var Ii = function() { this._isPlayer = !1;
        this._readyIn = this._destroyItemIn = 0;
        this.readyToUse = !1;
        this.onItemStolen = new ga;
        this.onForceReady = new ga;
        this.onUse = new Lb;
        this.instant = !1;
        this.collectDelay = 3;
        we.call(this) };
    g["game.pickup.GameCollector"] = Ii;
    Ii.__name__ = ["game", "pickup", "GameCollector"];
    Ii.__super__ = we;
    Ii.prototype = k(we.prototype, {
        onStart: function() {
            we.prototype.onStart.call(this);
            this._spine = this.owner._compMap.Sprite_2;
            this._previewPack = E.getPack("ui_hud");
            this._isPlayer = null != this.owner._compMap.Player_22
        },
        onUpdate: function(a) { we.prototype.onUpdate.call(this, a);
            0 < this._destroyItemIn && (this._destroyItemIn -= a, 0 >= this._destroyItemIn && this.removeItem());
            null != this._currentItem && 0 < this._readyIn && 0 >= this._destroyItemIn && (this._readyIn -= a, 0 >= this._readyIn && (this.addPreview(), this.readyToUse = !0)) },
        onContactBegin: function(a) {
            var b = a._compMap.CollectableComponent_10;
            null != b && (b.isCollectable() &&
                b.collect(this.owner), null == this._currentItem && null == this.owner._compMap.Ghost_9 && (this.readyToUse = !1, this.onCollection.emit(this.owner, a), n.boxCollected++, I.__instanceof(b, wf) && (this._currentItem = "" != n.cheatPickup ? ja.getDataById(n.cheatPickup) : b.pickupData, this._isPlayer && null != this._currentItem && T.trackPickup(this._currentItem.id), this._readyIn = this.collectDelay), this.instant = !1))
        },
        useItem: function() {
            if (null == this._currentItem || 0 < this._destroyItemIn) return !1;
            if (this.readyToUse) {
                null != this.owner._compMap.Player_22 &&
                    n.itemUsed++;
                var a = null;
                if ("" != n.cheatPickup) { var b = ja.getDataById(n.cheatPickup);
                    null != b && (a = b.className) } else a = this._currentItem.className;
                this._isPlayer && 0.1 > Math.random() && t.play(n.currentCharacter.name + "_throw", "VO", null, !1, !0);
                this.owner.add(ia.createInstance(a, []));
                this.onUse.emit(this.owner, this._currentItem);
                this.removeItem()
            } else this.forceReady();
            return !0
        },
        removeItem: function() { this._currentItem = null;
            this.readyToUse = !1;
            this.removePreview() },
        stealItem: function() {
            null != this._currentItem &&
                (this._destroyItemIn = 1.5, this.onItemStolen.emit())
        },
        forceReady: function() { this.addPreview();
            this.onForceReady.emit();
            this._readyIn = 0;
            this.readyToUse = !0 },
        addPreview: function() { this._isPlayer && (null != this._preview && this.removePreview(), this._preview = A.createImage(this._currentItem.id + "_icon", this._previewPack), this._preview.setScale(1 / this._spine.scale).centerAnchor(), this._spine.appendToSlot("pickup", this._preview)) },
        removePreview: function() {
            null != this._preview && (this._preview.owner.dispose(), this._preview =
                null)
        },
        __class__: Ii
    });
    var Ji = function() { this._targetX = 0;
        this._isMoving = !1;
        this._animatedOffset = new pd(0, 0);
        this.ratioY = 0.7;
        this.offsetX = this.offsetY = 0;
        i.call(this) };
    g["game.camera.GameCameraTarget"] = Ji;
    Ji.__name__ = ["game", "camera", "GameCameraTarget"];
    Ji.__super__ = i;
    Ji.prototype = k(i.prototype, {
        get_name: function() { return "GameCameraTarget_42" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._camera = this.owner._internal_getFromParents("CameraSystem_49").get_camera();
            this._physics = this.owner._internal_getFromParents("PhysicSystem_31");
            this._physics.onPhysicUpdate.connect(m(this, this.onPhysicUpdate));
            this._isMoving = !0;
            this._cameraTarget = this._camera.setTarget(this._targetTransform.position.x + this.offsetX + this._animatedOffset.x._value, (this._targetDisplay.y._value + this.offsetY - 100) * this.ratioY + this._animatedOffset.y._value, !0)
        },
        onStop: function() { this._isMoving = !1;
            this._camera = this._targetTransform = this._targetDisplay = this._target = null;
            i.prototype.onStop.call(this) },
        onUpdate: function(a) {
            this._animatedOffset.update(a);
            null != this._target &&
                this._targetSpeed.getImpulse().x > this._targetSpeed.maxSpeed ? this.animateTo(-225, 0) : this.animateTo(0, 0)
        },
        setTarget: function(a) { this._target = a; if (null == a) throw "target is null";
            this._targetDisplay = a._compMap.Sprite_2;
            this._targetTransform = a._compMap.TransformComponent_70;
            this._targetSpeed = a._compMap.SpeedControl_21 },
        animateFrom: function(a, b, c, d) { null == c && (c = 1);
            null == d && (d = D.quadOut);
            this._animatedOffset.setXY(a, b);
            this._animatedOffset.x.animateTo(0, c, d);
            this._animatedOffset.y.animateTo(0, c, d) },
        animateTo: function(a,
            b, c, d) { null == c && (c = 1);
            null == d && (d = D.quadOut);
            this._targetX != a && (this._targetX = a, this._animatedOffset.x.animateTo(a, c, d), this._animatedOffset.y.animateTo(b, c, d)) },
        onPhysicUpdate: function() {
            this._isMoving && null != this._targetDisplay && (null == this._targetDisplay.offset ? this._cameraTarget.setXY(this._targetTransform.position.x + this.offsetX + this._animatedOffset.x._value, (this._targetDisplay.y._value + this.offsetY - 100) * this.ratioY + this._animatedOffset.y._value) : this._cameraTarget.setXY(this._targetTransform.position.x +
                this.offsetX + this._animatedOffset.x._value, (this._targetDisplay.y._value + this._targetDisplay.offset.y * this._targetDisplay.scale - 100) * this.ratioY + this._animatedOffset.y._value))
        },
        __class__: Ji
    });
    var Ki = function() { this._first = !0;
        this._nextSpawn = 0;
        this._trails = [];
        this.template = "";
        this.minSpeed = 25;
        i.call(this) };
    g["game.trails.TrailGeneratorComponent"] = Ki;
    Ki.__name__ = ["game", "trails", "TrailGeneratorComponent"];
    Ki.__super__ = i;
    Ki.prototype = k(i.prototype, {
        get_name: function() { return "TrailGeneratorComponent_115" },
        onStart: function() { i.prototype.onStart.call(this);
            this._kart = this.owner._compMap.Kart_4;
            this._actors = this.owner._internal_getFromParents("ActorSystem_54");
            this._spine = this.owner._compMap.Sprite_2;
            this._transform = this.owner._compMap.TransformComponent_70 },
        onStop: function() { for (var a = 0, b = this._trails; a < b.length;) { var c = b[a];++a;
                this._actors.removeActor(c) } this._trails = [];
            i.prototype.onStop.call(this) },
        onUpdate: function(a) {
            i.prototype.onUpdate.call(this, a);
            this._kart.getSpeed() <= this.minSpeed || null ==
                this.owner._compMap.Fireworks_7 ? this._first = !0 : (0 >= this._nextSpawn && (this.spawnTrail(), this._first = !1), this._nextSpawn -= a * this._spine.speed)
        },
        spawnTrail: function() {
            if ("" == this.template && !this.checkForTemplate()) this.dispose();
            else {
                this._spine.getSlot("flag");
                var a = this._actors.spawn({ template: { key: this.template }, transform: { position: { x: this._transform.position.x, y: this._transform.position.y }, direction: this._transform.direction } }),
                    b = a._compMap.TrailComponent_116;
                b.first = this._first;
                b.onDone.connect(m(this,
                    this.onTrailDone)).once();
                this._nextSpawn = b.spawnRate;
                o.mobile && (this._nextSpawn *= 3);
                this._first && (this._nextSpawn = 0.3);
                this._trails.push(a)
            }
        },
        onTrailDone: function(a) { H.remove(this._trails, a);
            this._actors.removeActor(a) },
        checkForTemplate: function() { var a = this.owner._compMap.CustomizationComponent_18.getItem("trail"); if (null == a || null == a.id || "trailclear" == a.id) return !1;
            this.template = a.id; return !0 },
        __class__: Ki
    });
    var Li = function() { this.onDone = new S;
        this.first = !0;
        this.spawnRate = this.duration = 1;
        i.call(this) };
    g["game.trails.TrailComponent"] = Li;
    Li.__name__ = ["game", "trails", "TrailComponent"];
    Li.__super__ = i;
    Li.prototype = k(i.prototype, {
        get_name: function() { return "TrailComponent_116" },
        onStart: function() { i.prototype.onStart.call(this);
            this._anim = this.owner._compMap.Sprite_2;
            this.first ? this._anim.animation.gotoAndPlay("start", { onComplete: m(this, this.onInDone) }) : this._anim.animation.gotoAndPlay("idle", { onComplete: m(this, this.onOutDone) }) },
        onStop: function() { i.prototype.onStop.call(this) },
        onInDone: function() {
            this._anim.animation.gotoAndPlay("idle", { onComplete: m(this, this.onOutDone) })
        },
        onOutDone: function() { this._anim.setAlpha(0);
            this.onDone.emit(this.owner) },
        __class__: Li
    });
    var Mi = function() { this._immuned = this._skidding = 0;
        this._withPlayer = this._applySlow = !1;
        this.skidDuration = 2;
        this.range = 200;
        this.strength = 1;
        i.call(this) };
    g["game.character.Bump"] = Mi;
    Mi.__name__ = ["game", "character", "Bump"];
    Mi.__super__ = i;
    Mi.prototype = k(i.prototype, {
        get_name: function() { return "Bump_19" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._kart = this.owner._compMap.Kart_4;
            this._hitFx = this.owner._compMap.HitFx_40;
            this._speed = this.owner._compMap.SpeedControl_21;
            this._state = this.owner._compMap.KartState_5;
            this._camera = this.owner._internal_getFromParents("CameraSystem_49").get_camera()
        },
        dispose: function() { this._target = this._camera = this._state = this._speed = this._hitFx = this._kart = null;
            i.prototype.dispose.call(this) },
        onUpdate: function(a) {
            i.prototype.onUpdate.call(this, a);
            0 < this._immuned && (this._immuned -= a, 0 < this._skidding && (this._skidding -= a, 0 >= this._skidding && (null != this._kart.owner._compMap.Player_22 &&
                this._kart.owner._compMap.Player_22.hideExc(), this._state.change(Sa.DRIVE, null, !0))))
        },
        isSkidding: function() { return 0 < this._skidding },
        startBump: function(a, b, c) {
            this._withPlayer = !1;
            this._target = b;
            this._applySlow = !1;
            if (this._kart.isPlayer) this._withPlayer = !0, t.play("hit_car", "HIT");
            else if (null != this._target._compMap.Player_22) { if (ua.codeUnlocked("UNBUMPABLE")) return !1;
                this._withPlayer = !0 }
            var b = !0,
                d = this._target._compMap.LaneObject_12,
                e = this._target._compMap.Bump_19;
            if (this.isSkidding() || null == a || e.isSkidding()) return !1;
            d.requestLane(c, !0) || (b = !1, this._applySlow = !0);
            B.delayCallTo(m(this, this.applyBump), 0.1, this.owner);
            return b
        },
        applyBump: function() { if (this._withPlayer) { var a = 20;
                this._kart.isPlayer ? n.playersBumped++ : (n.playerTimesBumped++, a = 40, this._target._compMap.Player_22.onBumped.emit(), t.play("hit_car", "HIT"), 0.3 > Math.random() && t.play(n.currentCharacter.name + "_hit", "HIT", null, !1, !0));
                this._camera.shake(0.15, a) } a = this._target._compMap.Bump_19;
            a.skid(this._applySlow, this.getSkidDuration(this.strength, a.strength)) },
        skid: function(a) { this._kart.isInvincible() || (this._hitFx.addFx(), this._skidding = this.skidDuration, a && null != this._speed && this._speed.stop(), this._kart.isPlayer && (this._kart.owner._compMap.Player_22.showExc(), t.play("skid", "KART")), null != this._speed && this._speed.skid(this.skidDuration), this._immuned = this.skidDuration, this._state.change(Sa.SKID)) },
        getSkidDuration: function(a, b) { return 2 - 0.2 * (a - b) },
        __class__: Mi
    });
    var Ni = function() {
        this._window = -1;
        this._boostActivated = !1;
        this.boostDuration = 0.5;
        this.boostSpeed =
            300;
        this.windowForBoost = 1;
        this.hopAirDuration = 0.4;
        i.call(this)
    };
    g["game.character.Jump"] = Ni;
    Ni.__name__ = ["game", "character", "Jump"];
    Ni.__super__ = i;
    Ni.prototype = k(i.prototype, {
        get_name: function() { return "Jump_23" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._kart = this.owner._compMap.Kart_4;
            this._physics = this.owner._compMap.PhysicsComponent_44;
            this._speed = this.owner._compMap.SpeedControl_21;
            this._state = this.owner._compMap.KartState_5;
            this._physicSystem = this.owner._internal_getFromParents("PhysicSystem_31");
            this._physicSystem.addContactListener(V.BEGIN, da.ANY, "PLAYER", "PLAYER", this.owner, m(this, this.onPlayerContactBegin));
            this._physicSystem.addContactListener(V.END, da.ANY, "PLAYER", "PLAYER", this.owner, m(this, this.onPlayerContactEnd))
        },
        dispose: function() { this._physicSystem.removeContactListener(V.BEGIN, da.ANY, "PLAYER", "PLAYER", this.owner);
            this._physicSystem.removeContactListener(V.END, da.ANY, "PLAYER", "PLAYER", this.owner);
            this._state = this._speed = this._physics = this._kart = this._physicSystem = null;
            i.prototype.dispose.call(this) },
        onUpdate: function(a) { i.prototype.onUpdate.call(this, a); if (-1 != this._window && (this._window += a, this._state.currentState == Sa.JUMP && this._window > this.windowForBoost))
                for (var a = 0, b = this._physics.getCollidingActors(); a < b.length;) { var c = b[a];++a; if (null != c._compMap.Lane_43) { this.land(); break } } },
        isInTheAir: function() { return this._state.currentState == Sa.JUMP || this._state.currentState == Sa.HOP },
        jump: function() { this._state.change(Sa.JUMP, null);
            this._window = 0 },
        hop: function() {
            this._kart.isEnabled() && (-1 != this._window &&
                this._window <= this.windowForBoost ? (this._kart.changeCharacterState(Ab.HAPPY), this._boostActivated = !0) : (this._state.change(Sa.HOP) && t.play("hop", "JUMP"), B.delayCallTo(m(this, this.land), this.hopAirDuration, this.owner)))
        },
        land: function() { this.isInTheAir() && (this._boostActivated && (this._kart.changeCharacterState(Ab.NEUTRAL), this.applyBoost()), this._boostActivated = !1, this._window = -1, this._state.change(Sa.LAND, (Ra = this._kart, m(Ra, Ra.resetState)))) },
        applyBoost: function() {
            this._speed.addBoost(this.boostSpeed,
                0, this.boostDuration)
        },
        onPlayerContactBegin: function(a) { this._contactPlayer = a; return this.isInTheAir() ? (this.hopJump(), this._state.change(Sa.HOP), !1) : !0 },
        onPlayerContactEnd: function() { this._contactPlayer = null; return !0 },
        hopJump: function() { this._speed.addBoost(50, -400, 0.1); var a = this._contactPlayer._compMap.TransformComponent_70;
            this._contactPlayer._compMap.PhysicsComponent_44.setPosition(a.position.x - 100, a.position.y);
            this._contactPlayer._compMap.Bump_19.skid(!0) },
        __class__: Ni
    });
    var Oi = function() {
        this._offsetScale =
            1;
        this.offsetX = this.offsetY = 0;
        this.scale = 1;
        i.call(this)
    };
    g["game.character.Shadow"] = Oi;
    Oi.__name__ = ["game", "character", "Shadow"];
    Oi.__super__ = i;
    Oi.prototype = k(i.prototype, {
        get_name: function() { return "Shadow_117" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._actors = this.owner._internal_getFromParents("ActorSystem_54");
            this._world = this.owner._internal_getFromParents("WorldSystem_25");
            this._kart = this.owner._compMap.Kart_4;
            this._laneRequest = this.owner._compMap.LaneObject_12;
            this._transform =
                this.owner._compMap.TransformComponent_70;
            this._offsetScale = I.__cast(this.owner._compMap.Sprite_2, J).scale;
            this._shadow = this._actors.spawn({ image: { pack: "sprites", asset: "shadow", layer: "ground", offset: { x: -40 * this.scale, y: -25 }, scale: this.scale }, transform: { fixed: !1, position: { x: this._transform.position.x, y: this._transform.position.y } } });
            this._shadowDisplay = this._shadow._compMap.Sprite_2;
            this._shadowTransform = this._shadow._compMap.TransformComponent_70;
            this.owner._compMap.Disposer_72.add(this._laneRequest.onChange.connect(m(this,
                this.changeLane)));
            this._currentLane = this._world.getLaneById(this._laneRequest.laneId);
            this.updateTransform()
        },
        dispose: function() { this._currentLane = this._shadowTransform = this._shadowDisplay = this._shadow = this._transform = this._laneRequest = this._kart = this._world = this._actors = null;
            i.prototype.dispose.call(this) },
        onUpdate: function(a) { this._kart.isEnabled() && (i.prototype.onUpdate.call(this, a), this.updateTransform()) },
        changeLane: function() { this._currentLane = this._world.getLaneById(this._laneRequest.laneId) },
        updateTransform: function() { this._currentLane.isPositionAvailable(this._transform.position.x) ? (this._shadowDisplay.set_visible(!0), this._shadowTransform.position.x = this._transform.position.x + this.offsetX, this._shadowTransform.position.y = this._currentLane.getY(this._transform.position.x) + this.offsetY + this._laneRequest.currentOffsetY * this._offsetScale) : this._shadowDisplay.set_visible(!1) },
        __class__: Oi
    });
    var Pi = function() { this._speedCap = 750;
        this._baseOffsetY = -60;
        i.call(this) };
    g["game.character.SpeedLines"] =
        Pi;
    Pi.__name__ = ["game", "character", "SpeedLines"];
    Pi.__super__ = i;
    Pi.prototype = k(i.prototype, {
        get_name: function() { return "SpeedLines_118" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._kart = this.owner._compMap.Kart_4;
            var a = L.create({ animation: { pack: "sprites", asset: "speedlines", layer: "ground", offset: { x: -150, y: this._baseOffsetY }, scale: 3 } });
            this.owner.addChild(a);
            var b = L.create({ animation: { pack: "sprites", asset: "speed_bullet", layer: "ground", offset: { x: -20, y: this._baseOffsetY }, scale: 3 } });
            this.owner.addChild(b);
            this._lines = a._compMap.Sprite_2;
            this._lines.setAlpha(0);
            this._bullet = b._compMap.Sprite_2;
            this._bullet.setAlpha(0);
            this._spine = this.owner._compMap.Sprite_2;
            this._speed = this.owner._compMap.SpeedControl_21
        },
        dispose: function() { i.prototype.dispose.call(this) },
        onUpdate: function(a) {
            this._kart.isEnabled() && null != this._speed && (i.prototype.onUpdate.call(this, a), this._speed.getImpulse().x > this._speed.maxSpeed ? (this._lines.offset.y = this._spine.offset.y, this._lines.offset.y /= 3, this._lines.offset.y += this._baseOffsetY,
                this._lines.applyOffset(), this._bullet.offset.y = this._spine.offset.y, this._bullet.offset.y /= 3, this._bullet.offset.y += this._baseOffsetY, this._bullet.applyOffset(), a = Math.min(this._speed.getImpulse().x, this._speedCap), this._lines.setAlpha((a - this._speed.maxSpeed) / (this._speedCap - this._speed.maxSpeed)), this._speed.getImpulse().x > this._speed.maxSpeed + 200 && this._bullet.setAlpha((a - (this._speed.maxSpeed + 200)) / (this._speedCap - (this._speed.maxSpeed + 200)))) : (this._lines.setAlpha(0), this._bullet.setAlpha(0)))
        },
        __class__: Pi
    });
    var Qi = function() { i.call(this) };
    g["game.character.fx.HitFx"] = Qi;
    Qi.__name__ = ["game", "character", "fx", "HitFx"];
    Qi.__super__ = i;
    Qi.prototype = k(i.prototype, {
        get_name: function() { return "HitFx_40" },
        onStart: function() { i.prototype.onStart.call(this);
            this._hit = new p;
            this._anim = new fb("impact_karts", "sprites");
            this._anim.setXY(-100, -75).setScale(5);
            this._anim.set_visible(!1);
            this._hit.add(this._anim);
            this.owner.addChild(this._hit) },
        onStop: function() { this.removeHitFx();
            i.prototype.onStop.call(this) },
        dispose: function() { i.prototype.dispose.call(this);
            this._hit.dispose();
            this._anim = this._hit = null },
        addFx: function() { this._anim.set_visible(!0);
            this._anim.gotoAndPlay("idle", { onComplete: m(this, this.removeHitFx) }) },
        removeHitFx: function() { this._anim.set_visible(!1) },
        __class__: Qi
    });
    var Ri = function() { this._laneIds = [];
        i.call(this) };
    g["game.character.DefaultLane"] = Ri;
    Ri.__name__ = ["game", "character", "DefaultLane"];
    Ri.__super__ = i;
    Ri.prototype = k(i.prototype, {
        get_name: function() { return "DefaultLane_6" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._world = this.owner._internal_getFromParents("WorldSystem_25");
            this._laneIds = this._world.copyDefaultLane()
        },
        dispose: function() { this._world = this._laneIds = null;
            i.prototype.dispose.call(this) },
        getId: function(a) { for (var b = this._laneIds.length - 1; 0 <= b;) { if (this._laneIds[b][0] < a) { if (null == this._laneIds[b]) continue; return this._laneIds[b][1] } b-- } throw "no default lane at position " + a; },
        addId: function(a, b) {
            for (var c = 0, d = this._laneIds.length; c < d;) {
                var e = c++;
                if (a < this._laneIds[e][0]) {
                    c = [Math.round(a), b];
                    this._laneIds.splice(e,
                        0, c);
                    break
                }
            }
        },
        __class__: Ri
    });
    var Fd = function() { this._filter = new dg;
        this.onChange = new ga;
        this.laneId = 1;
        i.call(this) };
    g["game.world.objects.LaneObject"] = Fd;
    Fd.__name__ = ["game", "world", "objects", "LaneObject"];
    Fd.__super__ = i;
    Fd.prototype = k(i.prototype, {
        get_name: function() { return "LaneObject_12" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._world = this.owner._internal_getFromParents("WorldSystem_25");
            this._physics = this.owner._compMap.PhysicsComponent_44;
            this._transform = this.owner._compMap.TransformComponent_70;
            this.changeLane(this.laneId)
        },
        onStop: function() { this._transform = this._physics = this._world = this._filter = null;
            i.prototype.onStop.call(this) },
        changeLane: function(a) { if (n.inEditor) return !0; if (!this.laneExist(a)) return !1;
            this.laneId = a;
            this.updatePhysicsFilter();
            this.onChange.emit(); return !0 },
        updatePhysicsFilter: function() {
            var a = !1;
            null != this.owner._compMap.Kart_4 && (a = this.owner._compMap.Kart_4.isInvisible);
            a = Ia.getFilter(this.laneId, !1, a);
            null != this._physics && (this._physics.isSensor() ? (this._filter.set_sensorGroup(a.collisionGroup),
                this._filter.set_sensorMask(a.collisionMask)) : (this._filter.set_collisionGroup(a.collisionGroup), this._filter.set_collisionMask(a.collisionMask)), this._physics.shape.filter = a, this._physics.getBody().setShapeFilters(this._filter))
        },
        laneExist: function(a) { a = this._world.getLaneById(a); return null == a ? !1 : a.isPositionAvailable(this._transform.position.x) },
        __class__: Fd
    });
    var eg = function() {
        this._opponents = [];
        this._rotation = new ca(0);
        this._rotationTarget = 0;
        this._requestFilter = new dg;
        this._raycastOffset = 0;
        this._offsetY =
            new ca(0);
        this.currentOffsetY = this._direction = this._baseOffsetY = 0;
        this.force = !1;
        this.previousLane = -1;
        this.onRequest = new S;
        this.changeSpeed = 0.25;
        this.playerDetectRange = this.laneDetectRange = 100;
        Fd.call(this)
    };
    g["game.character.LaneRequest"] = eg;
    eg.__name__ = ["game", "character", "LaneRequest"];
    eg.__super__ = Fd;
    eg.prototype = k(Fd.prototype, {
        onStart: function() {
            Fd.prototype.onStart.call(this);
            this._bump = this.owner._compMap.Bump_19;
            this._kart = this.owner._compMap.Kart_4;
            this._state = this.owner._compMap.KartState_5;
            this._speed = this.owner._compMap.SpeedControl_21;
            this._display = this.owner._compMap.Sprite_2;
            null == this._display.offset && (this._display.offset = { x: 0, y: 0 });
            this._baseOffsetY = this._display.offset.y;
            this._raycastOffset = 20;
            for (var a = 0, b = this.owner._internal_getFromParents("LevelSystem_13").characters; a < b.length;) { var c = b[a];++a;
                c != this.owner && this._opponents.push(c) }
        },
        dispose: function() {
            this._target = this._opponents = this._rotation = this._requestFilter = this._offsetY = this._display = this._speed = this._state = this._kart =
                this._bump = this.onRequest = null;
            Fd.prototype.dispose.call(this)
        },
        onUpdate: function(a) { if (this._kart.isEnabled()) { Fd.prototype.onUpdate.call(this, a);
                this.updateRotation(); var b = this._baseOffsetY;
                this._offsetY.update(a);
                a = b + this._offsetY._value / this._display.scale;
                a != this.currentOffsetY && (this._display.offset.y = ua.codeUnlocked("DRAGSTER") ? a - 90 : a, this._display.applyOffset(), this.currentOffsetY = a) } },
        updateRotation: function() {
            var a = this._currentLane.getAngle(this._transform.position.x);
            ua.codeUnlocked("DRAGSTER") &&
                (a -= 25);
            this._rotationTarget != a && (this._rotationTarget = a, this._display.rotation.animateTo(this._rotationTarget, 0.15))
        },
        isChanging: function() { return -1 != this.previousLane },
        requestLane: function(a, b) {
            null == b && (b = !1);
            if (!b && (this.isChanging() || null != this._bump && this._bump.isSkidding())) return !1;
            this._direction = a;
            var c = this.detectLane(a);
            if (null == c) return !1;
            if (b) return this.resetOffset(), this.quickChange(c), !0;
            this._target = this.detectPlayer(c.id);
            if (null == this._target) this.quickChange(c);
            else {
                var d = this._target._compMap.Kart_4;
                d.isInvisible || this._kart.isInvisible ? this.quickChange(c) : d.isInvincible() ? this._bump.skid(!1) : this._target._compMap.Jump_23.isInTheAir() || (this._bump.startBump(c, this._target, this._direction) ? this.quickChange(c) : this.returnToLane())
            }
            return !0
        },
        detectLane: function() {
            var a = Ia.getMaskFilter(this.laneId);
            this._requestFilter.set_collisionGroup(a.collisionGroup);
            this._requestFilter.set_collisionMask(a.collisionMask);
            var a = this._transform.position.y,
                a = this._world.getLaneById(this.laneId).getY(this._transform.position.x) -
                a,
                b;
            try { b = this._physics.raycastAll(this.laneDetectRange, 0, this._direction, -35, 1 == this._direction ? a : a + this._raycastOffset, this._requestFilter) } catch (c) { return null }
            if (null == b) return null;
            for (a = 0; a < b.length;) { var d = b[a];++a; if (null != d._compMap.Lane_43) return d._compMap.Lane_43 }
            return null
        },
        detectPlayer: function(a) { for (var b, c = 0, d = this._opponents; c < d.length;) { var e = d[c];++c;
                b = e._compMap.LaneObject_12; if (b.laneId == a && this.inRange(e, this._bump.range)) return e } return null },
        quickChange: function(a) {
            this._offsetY.set__(-this.getDistanceToTarget(a.id) *
                this._direction + this._raycastOffset);
            this._offsetY.animateTo(0, this.changeSpeed, D.quadOut);
            B.delayCallTo(m(this, this.endRequest), this.changeSpeed, this.owner);
            this.previousLane = this.laneId;
            this.changeLane(a.id);
            this.onRequest.emit(a.id)
        },
        inRange: function(a, b) { var c = a._compMap.TransformComponent_70; return c.position.x < this._transform.position.x + b && c.position.x > this._transform.position.x - b ? !0 : !1 },
        changeLane: function(a) {
            var b = this._world.getLaneById(a);
            if (null == b) return !1;
            var c = this._world.getLaneById(this.laneId).getY(this._transform.position.x),
                d = this._transform.position.y + this._raycastOffset,
                c = this.force ? 0 : c - d;
            this._physics.setPosition(this._transform.position.x, b.getY(this._transform.position.x) - cc.sliceHeight - 10 - c, 0);
            this.force = !1;
            this._currentLane = b;
            return Fd.prototype.changeLane.call(this, a)
        },
        endRequest: function() { this._direction = 0;
            this.previousLane = -1 },
        resetOffset: function() {
            this._physics.setPosition(this._transform.position.x, this._world.getLaneById(this.laneId).getY(this._transform.position.x) - cc.sliceHeight - this._physics.getSize().height /
                2, 0)
        },
        returnToLane: function() { this.changeLane(this.previousLane);
            this.endRequest() },
        getDistanceToTarget: function(a) { var b = this._transform.position.x,
                c = this._world.getLaneById(this.laneId).getY(b),
                a = this._world.getLaneById(a).getY(b); return Math.abs(a - c) },
        __class__: eg
    });
    var Yg = function() { this.lanes = [];
        i.call(this) };
    g["game.world.LaneDots"] = Yg;
    Yg.__name__ = ["game", "world", "LaneDots"];
    Yg.__super__ = i;
    Yg.prototype = k(i.prototype, { get_name: function() { return "LaneDots_26" }, __class__: Yg });
    var Pb = function() {
        this.disposeRatio =
            0;
        this.removeInEditor = this.repeat = !0;
        this.buffer = 2E3;
        i.call(this)
    };
    g["game.world.LapRepeat"] = Pb;
    Pb.__name__ = ["game", "world", "LapRepeat"];
    Pb.__super__ = i;
    Pb.prototype = k(i.prototype, {
        get_name: function() { return "LapRepeat_119" },
        onStart: function() {
            i.prototype.onStart.call(this);
            !this.repeat || this.removeInEditor && n.inEditor ? this.owner.remove(this) : (this._renderer = this.owner._internal_getFromParents("RendererSystem_56"), this._physics = this.owner._compMap.PhysicsComponent_44, this._transform = this.owner._compMap.TransformComponent_70,
                this._transform.fixed = !1)
        },
        onStop: function() { this._transform = this._physics = this._renderer = this._playerKart = null;
            i.prototype.onStop.call(this) },
        onUpdate: function(a) { n.inEditor || null == this._renderer || (i.prototype.onUpdate.call(this, a), -this._renderer.displacement.x > this._transform.position.x + this.buffer && this.teleport()) },
        teleport: function() {
            if (0 < this.disposeRatio && Math.random() < this.disposeRatio) this._playerKart = I.__cast(this.owner._internal_getFromParents("LevelSystem_13"), Zg).player._compMap.Kart_4,
                this._playerKart.changeCharacterState(Ab.HAPPY, m(this, this.onHappyDone));
            else { var a = this._renderer.getActorLayer(this.owner).parallax.x,
                    a = this._transform.position.x + n.lapWidth * a;
                null != this._physics ? this._physics.setPosition(a, this._transform.position.y) : this._transform.position.x = a }
        },
        onHappyDone: function() { this._playerKart.changeCharacterState(Ab.NEUTRAL);
            this.owner._internal_getFromParents("ActorSystem_54").removeActor(this.owner) },
        __class__: Pb
    });
    var Si = function() { this.newLaneId = 0;
        Pb.call(this) };
    g["game.world.objects.DefaultLaneBox"] = Si;
    Si.__name__ = ["game", "world", "objects", "DefaultLaneBox"];
    Si.__super__ = Pb;
    Si.prototype = k(Pb.prototype, {
        onStart: function() { this.removeInEditor = !1;
            Pb.prototype.onStart.call(this);
            n.inEditor || (this._physicSystem = this.owner._internal_getFromParents("PhysicSystem_31"), this._physicSystem.addContactListener(V.BEGIN, da.ANY, "ANY_BODY", "ANY_BODY", this.owner, m(this, this.onContact))) },
        onStop: function() {
            n.inEditor || (this._physicSystem.removeContactListener(V.BEGIN, da.ANY,
                "ANY_BODY", "ANY_BODY", this.owner), this._physicSystem = null);
            Pb.prototype.onStop.call(this)
        },
        onContact: function(a) { null != a._compMap.DefaultLane_6 && a._compMap.DefaultLane_6.addId(this._transform.position.x, this.newLaneId); return !0 },
        __class__: Si
    });
    var cc = function() { this._slices = [];
        this._slicesData = [];
        this._slicesCreated = 0;
        this._disposer = new za;
        this.currentPoint = { x: 0, y: 0 };
        this.points = [
            [{ x: 0, y: 0 }, { x: 100, y: 0 }]
        ];
        this.id = 0;
        i.call(this) };
    g["game.world.Lane"] = cc;
    cc.__name__ = ["game", "world", "Lane"];
    cc.__super__ =
        i;
    cc.prototype = k(i.prototype, {
        get_name: function() { return "Lane_43" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._renderer = this.owner._internal_getFromParents("RendererSystem_56");
            this._physicSystem = this.owner._internal_getFromParents("PhysicSystem_31");
            this._disposer.add(this._physicSystem.onPhysicUpdate.connect(m(this, this.onPhysicUpdate)));
            this._transform = this.owner._compMap.TransformComponent_70;
            this._sliceVectorConstructor = [];
            this._sliceVectorConstructor.push(new aa(0, cc.sliceHeight));
            this._sliceVectorConstructor.push(new aa(0, 0));
            this._sliceVectorConstructor.push(new aa(100, 0));
            this._sliceVectorConstructor.push(new aa(100, cc.sliceHeight));
            this.createSlicesData();
            this.generate()
        },
        onStop: function() { this._disposer.dispose();
            this._slices = this._slicesData = this._sliceVectorConstructor = this._transform = this._physicSystem = this._renderer = this.currentPoint = null;
            i.prototype.onStop.call(this) },
        onPhysicUpdate: function() {
            if (0 < this._slices.length) {
                var a = this._slices[0];
                if (a.zpp_inner.aabb.wrapper().get_x() +
                    a.zpp_inner.aabb.wrapper().get_width() < -this._renderer.displacement.x - cc.CullingBuffer) { a.zpp_inner.immutable_midstep("Shape::body"); if (null != (null != a.zpp_inner.body ? a.zpp_inner.body.outer : null)) null != a.zpp_inner.body && (null != a.zpp_inner.body ? a.zpp_inner.body.outer : null).zpp_inner.wrap_shapes.remove(a);
                    null != a.zpp_inner.body ? a.zpp_inner.body.outer : null;
                    this._slices.shift() }
            }
            this._slicesCreated >= this._slicesData.length || (a = this._slices[this._slices.length - 1], a.zpp_inner.aabb.wrapper().get_x() + a.zpp_inner.aabb.wrapper().get_width() -
                Q.width < -this._renderer.displacement.x + cc.CullingBuffer && this.createSlice(this._slicesCreated))
        },
        isPositionAvailable: function(a) { for (var b = 0, c = n.nbLap + 1; b < c;)
                for (var d = b++, e = 0, f = this.points.length; e < f;) { var l = this.points[e++]; if (a - d * n.lapWidth >= l[0].x && a - d * n.lapWidth <= l[l.length - 1].x) return !0 }
            return !1 },
        getY: function(a) { for (var b = 0, c = this._slicesData; b < c.length;) { var d = c[b];++b; if (d[0][0] <= a && d[1][0] > a) return (d[1][1] - d[0][1]) * (1 - (d[1][0] - a) / (d[1][0] - d[0][0])) + d[0][1] + this._transform.position.y } return 0 },
        getAngle: function(a) { for (var b = 0, c = this._slicesData; b < c.length;) { var d = c[b];++b; if (d[0][0] <= a && d[1][0] > a) return 180 * Math.atan2(d[1][1] - d[0][1], d[1][0] - d[0][0]) / Math.PI } return 0 },
        generate: function() { for (var a = !0; a && this._slicesCreated < this._slicesData.length;) a = this._slicesData[this._slicesCreated][0][0] < Q.width + cc.CullingBuffer, this.createSlice(this._slicesCreated) },
        createSlicesData: function() {
            for (var a = 0, b = n.nbLap + 1; a < b;)
                for (var c = a++, d = 0, e = this.points.length; d < e;) {
                    var f = d++;
                    this.currentPoint.x =
                        Math.round(this.points[f][0].x + c * n.lapWidth);
                    this.currentPoint.y += this.points[f][0].y - this.currentPoint.y;
                    for (var l = 0, v = this.points[f].length - 1; l < v;) { var h = l++;
                        this.createSliceData(f, h) }
                }
        },
        createSliceData: function(a, b) { var c = this.points[a][b],
                d = this.points[a][b + 1],
                e = d.x - c.x | 0,
                c = d.y - c.y | 0;
            this._slicesData.push([
                [this.currentPoint.x, this.currentPoint.y],
                [this.currentPoint.x + e, this.currentPoint.y + c]
            ]);
            this.currentPoint.x += e;
            this.currentPoint.y += c },
        createSlice: function(a) {
            var b = this._slicesData[a][0][0],
                c = this._slicesData[a][0][1],
                d = this._slicesData[a][1][0],
                e = this._slicesData[a][1][1];
            this._sliceVectorConstructor[0].setxy(0, 0);
            this._sliceVectorConstructor[1].setxy(d - b, e - c);
            this._sliceVectorConstructor[2].setxy(d - b, e - c + cc.sliceHeight);
            this._sliceVectorConstructor[3].setxy(0, cc.sliceHeight);
            a = new Qb(this._sliceVectorConstructor);
            a.set_localCOM(aa.weak(Math.round(b + 0.5 * (d - b) + this._transform.position.x), Math.round(c + 0.5 * (e - c) + this._transform.position.y)));
            b = Ia.getFilter(this.id);
            a.set_filter(new dg(b.collisionGroup,
                b.collisionMask));
            a.zpp_inner.immutable_midstep("Shape::material");
            a.zpp_inner.setMaterial(Ia.GroundMaterial.zpp_inner);
            a.zpp_inner.material.wrapper();
            b = new fg;
            b.set_type(function() { null == h.BodyType_STATIC && (h.internal = !0, h.BodyType_STATIC = new Gb, h.internal = !1); return h.BodyType_STATIC }(this));
            null == b.zpp_inner_i.userData && (b.zpp_inner_i.userData = {});
            b.zpp_inner_i.userData.actor = this.owner;
            a.zpp_inner.immutable_midstep("Shape::body");
            if ((null != a.zpp_inner.body ? a.zpp_inner.body.outer : null) != b) null !=
                a.zpp_inner.body && (null != a.zpp_inner.body ? a.zpp_inner.body.outer : null).zpp_inner.wrap_shapes.remove(a), null != b && b.zpp_inner.wrap_shapes.add(a);
            null != a.zpp_inner.body ? a.zpp_inner.body.outer : null;
            b.set_space(this._physicSystem.getSpace());
            this._slicesCreated++;
            this._slices.push(a)
        },
        __class__: cc
    });
    var $g = function() { this.laneId = 0;
        i.call(this) };
    g["game.world.DefaultLaneDot"] = $g;
    $g.__name__ = ["game", "world", "DefaultLaneDot"];
    $g.__super__ = i;
    $g.prototype = k(i.prototype, {
        get_name: function() { return "DefaultLaneDot_107" },
        onStart: function() { i.prototype.onStart.call(this) },
        onStop: function() { this._transform = null;
            i.prototype.onStop.call(this) },
        __class__: $g
    });
    var Ti = function() { i.call(this) };
    g["game.world.objects.Obstacle"] = Ti;
    Ti.__name__ = ["game", "world", "objects", "Obstacle"];
    Ti.__super__ = i;
    Ti.prototype = k(i.prototype, {
        get_name: function() { return "Obstacle_120" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._physicSystem = this.owner._internal_getFromParents("PhysicSystem_31");
            this._world = this.owner._internal_getFromParents("WorldSystem_25");
            this._transform = this.owner._compMap.TransformComponent_70;
            this._physicSystem.addContactListener(V.PRELISTENER, da.ANY, "ANY_BODY", "ANY_BODY", this.owner, m(this, this.onPreContact));
            this._physicSystem.addContactListener(V.BEGIN, da.ANY, "ANY_BODY", "ANY_BODY", this.owner, m(this, this.onContact))
        },
        onStop: function() {
            this._physicSystem.removeContactListener(V.PRELISTENER, da.ANY, "ANY_BODY", "ANY_BODY", this.owner);
            this._physicSystem.removeContactListener(V.BEGIN, da.ANY, "ANY_BODY", "ANY_BODY", this.owner);
            this._transform =
                this._world = this._physicSystem = null;
            i.prototype.onStop.call(this)
        },
        onPreContact: function() { return !0 },
        onContact: function(a) { if (null == a._compMap.Teleport_11) return !0;
            a._compMap.HitFx_40.addFx();
            null != a._compMap.Player_22 && t.play("hit_object", "HIT");
            n.obstaclesHit++;
            a._compMap.CharacterState_48.change(Ab.HURT); var b = a._compMap.DefaultLane_6.getId(this._transform.position.x + 100);
            a._compMap.Teleport_11.teleport(this._transform.position.x, b, !1, !0); return !1 },
        __class__: Ti
    });
    var Ui = function() {
        this._laneId =
            0;
        this.direction = 1;
        i.call(this)
    };
    g["game.world.ForceChangeLane"] = Ui;
    Ui.__name__ = ["game", "world", "ForceChangeLane"];
    Ui.__super__ = i;
    Ui.prototype = k(i.prototype, {
        get_name: function() { return "ForceChangeLane_121" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this.owner.remove(this.owner._compMap.Sprite_2);
            this._physicSystem = this.owner._internal_getFromParents("PhysicSystem_31");
            this._laneId = this.owner._compMap.LaneObject_12.laneId;
            this._physicSystem.addContactListener(V.BEGIN, da.ANY, "ANY_BODY", "ANY_BODY",
                this.owner, m(this, this.onContact))
        },
        onStop: function() { this._physicSystem.removeContactListener(V.BEGIN, da.ANY, "ANY_BODY", "ANY_BODY", this.owner);
            this._physicSystem = null;
            i.prototype.onStop.call(this) },
        onContact: function(a) { if (null == a._compMap.LaneObject_12) return !1;
            a = a._compMap.LaneObject_12; if (a.laneId != this._laneId) return !1;
            I.__instanceof(a, eg) && I.__cast(a, eg).requestLane(this.direction, !0); return !1 },
        __class__: Ui
    });
    var Ve = function() {
        this._playVO = !0;
        this._signalPerKart = new Fa;
        this._boostPerKart = new Fa;
        this.track = !1;
        this.wheelFx = this.contactSfx = "";
        this.hoppable = !0;
        this.skid = this.isSlow = !1;
        this.deceleration = 0.5;
        this.boostDuration = 0.25;
        this.y = 0;
        this.x = 1.25;
        i.call(this)
    };
    g["game.world.objects.SpeedBoost"] = Ve;
    Ve.__name__ = ["game", "world", "objects", "SpeedBoost"];
    Ve.__super__ = i;
    Ve.prototype = k(i.prototype, {
        get_name: function() { return "SpeedBoost_122" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._lane = this.owner._compMap.LaneObject_12;
            this._physicSystem = this.owner._internal_getFromParents("PhysicSystem_31");
            this._physicSystem.addContactListener(V.BEGIN, da.ANY, "ANY_BODY", "PLAYER", this.owner, m(this, this.onContactBegin));
            this._physicSystem.addContactListener(V.END, da.ANY, "ANY_BODY", "PLAYER", this.owner, m(this, this.onContactEnd))
        },
        onStop: function() {
            for (var a = this._signalPerKart.iterator(); a.hasNext();) a.next().dispose();
            this._signalPerKart = null;
            for (var b = this._boostPerKart.keys(); b.hasNext();) { var c = b.next(),
                    a = this._boostPerKart.h[c.__id__];
                c._compMap.SpeedControl_21.removeBoost(a, this.deceleration) } this._boostPerKart =
                null;
            this._physicSystem.removeContactListener(V.BEGIN, da.ANY, "ANY_BODY", "PLAYER", this.owner);
            this._physicSystem.removeContactListener(V.END, da.ANY, "ANY_BODY", "PLAYER", this.owner);
            this._physicSystem = null;
            i.prototype.onStop.call(this)
        },
        onContactBegin: function(a) {
            if (null == a._compMap.Kart_4) return !1;
            var b = a._compMap.KartState_5;
            if (this.hoppable && b.currentState == Sa.HOP || null != this._lane && this._lane.laneId != a._compMap.LaneObject_12.laneId) return !1;
            var c;
            c = this.isSlow ? a._compMap.SpeedControl_21.addSlow(this.x,
                this.y, this.boostDuration) : a._compMap.SpeedControl_21.addBoost(this.x, this.y, this.boostDuration);
            this.track && n.boosts++;
            null != a._compMap.Player_22 && (this._playVO && 0.3 > Math.random() && t.play(n.currentCharacter.name + "_boost", "VO", null, !1, !0), "" != this.contactSfx && t.play(this.contactSfx, "SPEED_LANES"));
            "" != this.wheelFx && a._compMap.KartWheels_109.addFx(this.wheelFx);
            this.skid && a._compMap.Bump_19.skid(!1);
            this._boostPerKart.set(a, c);
            b = b.onChange.connect(m(this, this.stateChanged));
            this._signalPerKart.set(a,
                b);
            return !1
        },
        stateChanged: function(a, b) { b == Sa.HOP && this.stopBoost(a) },
        onContactEnd: function(a) { return this.stopBoost(a) },
        stopBoost: function(a) { if (null == a._compMap.Kart_4 || null == this._boostPerKart.h.__keys__[a.__id__]) return !1;
            a._compMap.KartWheels_109.removeFx();
            a._compMap.SpeedControl_21.removeBoost(this._boostPerKart.h[a.__id__], this.deceleration);
            this._boostPerKart.remove(a);
            this._signalPerKart.h[a.__id__].dispose();
            this._signalPerKart.remove(a); return !0 },
        __class__: Ve
    });
    var Vi = function() {
        Ve.call(this);
        this._playVO = !1
    };
    g["game.world.objects.JumpPad"] = Vi;
    Vi.__name__ = ["game", "world", "objects", "JumpPad"];
    Vi.__super__ = Ve;
    Vi.prototype = k(Ve.prototype, { onContactEnd: function(a, b) { null != a._compMap.Jump_23 && a._compMap.Jump_23.jump(); return Ve.prototype.onContactEnd.call(this, a, b) }, __class__: Vi });
    var Wi = function() {};
    g["stolo.ensys.components.ICullingComponent"] = Wi;
    Wi.__name__ = ["stolo", "ensys", "components", "ICullingComponent"];
    Wi.prototype = { __class__: Wi };
    var J = function() {
        this.onInitComplete = new ga;
        this.initialized = !1;
        this.forceUpdate = !0;
        this.scale = this.flipX = this.flipY = 1;
        r.call(this);
        this.set_pointerEnabled(J.ENABLE_POINTER);
        this.set_visible(!1)
    };
    g["stolo.ensys.components.DisplayComponent"] = J;
    J.__name__ = ["stolo", "ensys", "components", "DisplayComponent"];
    J.__interfaces__ = [Wi];
    J.__super__ = r;
    J.prototype = k(r.prototype, {
        dispose: function() { this.layer = this.offset = this._transform = null;
            r.prototype.dispose.call(this) },
        onAdded: function() {
            r.prototype.onAdded.call(this);
            this.mobilePack && o.mobile && (this.pack += J.mobilePackSuffix);
            o.slow && (this.lowEndPack && (this.pack += J.lowEndPackSuffix), null != this.lowEndAsset && (this.asset = this.lowEndAsset));
            this.initialized || this.initStart()
        },
        initStart: function() { this.initEnd() },
        initEnd: function() { this.set_pointerEnabled(0 != (this._flags & 4)) },
        initComplete: function() { this.initialized || (this.applyOffset(), this.updateDisplay(), this.initialized = !0, this.onInitComplete.emit()) },
        onStart: function() {
            r.prototype.onStart.call(this);
            this._transform = this.owner._compMap.TransformComponent_70;
            ba.getSystemEntity(this.owner);
            this._cullingSystem = ba.getSystemEntity(this.owner).getComponent("CullingSystem_55");
            null != this._cullingSystem ? this._cullingSystem.addComponent(this, this.owner) : this.enableCulling(!1);
            this.initComplete()
        },
        onStop: function() { null != this._cullingSystem && this._cullingSystem.removeComponent(this, this.owner);
            r.prototype.onStop.call(this) },
        applyOffset: function() {
            this.centerAnchor();
            null != this.pivot && (0 <= this.pivot.x && this.anchorX.set__(this.getNaturalWidth() * this.pivot.x), 0 <= this.pivot.y && this.anchorY.set__(this.getNaturalHeight() *
                this.pivot.y));
            null != this.align && ("none" == this.align ? this.setAnchor(0, 0) : "left" == this.align ? this.anchorX.set__(0) : "right" == this.align && this.anchorX.set__(this.getNaturalWidth()));
            if (null != this.offset) { if (0 != this.offset.x) { var a = this.anchorX;
                    a.set__(a._value - this.offset.x) } 0 != this.offset.y && (a = this.anchorY, a.set__(a._value - this.offset.y)) }
        },
        enableCulling: function(a) { this.set_visible(!a) },
        updateDisplay: function() {
            if (null != this._transform) {
                if (!this._transform.fixed || this.forceUpdate) this.setXY(this._transform.position.x,
                    this._transform.position.y), this.setScaleXY(this._transform.direction * this.scale * this.flipX, this.scale * this.flipY), this.set_visible(!0);
                (!this._transform.fixedRotation || this.forceUpdate) && this.setRotation(this._transform.rotation);
                this.forceUpdate = !1
            }
        },
        onUpdate: function(a) { this.updateDisplay();
            r.prototype.onUpdate.call(this, a) },
        getTexture: function(a, b) { var c = E.getPack(a, !1); if (null == c) throw "Cannot load asset '" + b + "', pack '" + a + "' was not found or loaded..."; return A.getTexture(b, c) },
        __class__: J
    });
    var gg = function() { this.tileHeight = 1;
        this.tileWidth = 2;
        J.call(this) };
    g["game.display.TilePattern"] = gg;
    gg.__name__ = ["game", "display", "TilePattern"];
    gg.__super__ = J;
    gg.prototype = k(J.prototype, {
        initStart: function() { this._texture = this.getTexture(this.pack, this.asset);
            this.initEnd() },
        draw: function(a) { null != this._texture && a.drawPattern(this._texture, 0, 0, this._texture.get_width() * this.tileWidth, this._texture.get_height() * this.tileHeight) },
        getNaturalWidth: function() {
            return null == this._texture ? 0 : this._texture.get_width() *
                this.tileWidth
        },
        getNaturalHeight: function() { return null == this._texture ? 0 : this._texture.get_height() * this.tileHeight },
        __class__: gg
    });
    var Xi = function() { this.currentLap = 1;
        Pb.call(this) };
    g["game.world.objects.EndZone"] = Xi;
    Xi.__name__ = ["game", "world", "objects", "EndZone"];
    Xi.__super__ = Pb;
    Xi.prototype = k(Pb.prototype, {
        onStart: function() {
            Pb.prototype.onStart.call(this);
            n.inEditor || (this._physicSystem = this.owner._internal_getFromParents("PhysicSystem_31"), this._physicSystem.addContactListener(V.BEGIN, da.ANY,
                "ANY_BODY", "ANY_BODY", this.owner, m(this, this.onContact)))
        },
        onStop: function() { n.inEditor || (this._physicSystem.removeContactListener(V.BEGIN, da.ANY, "ANY_BODY", "ANY_BODY", this.owner), this._physicSystem = null);
            Pb.prototype.onStop.call(this) },
        teleport: function() { Pb.prototype.teleport.call(this);
            this.currentLap++ },
        onContact: function(a) { null != a._compMap.Kart_4 && a._compMap.Kart_4.setLap(this.currentLap); return !0 },
        __class__: Xi
    });
    var Yi = function() { i.call(this) };
    g["game.world.objects.Teleporter"] = Yi;
    Yi.__name__ = ["game", "world", "objects", "Teleporter"];
    Yi.__super__ = i;
    Yi.prototype = k(i.prototype, {
        get_name: function() { return "Teleporter_123" },
        onStart: function() { i.prototype.onStart.call(this);
            this._physicSystem = this.owner._internal_getFromParents("PhysicSystem_31");
            this._physicSystem.addContactListener(V.BEGIN, da.ANY, "ANY_BODY", "ANY_BODY", this.owner, m(this, this.onContact));
            this._laneObject = this.owner._compMap.LaneObject_12 },
        onStop: function() {
            this._physicSystem.removeContactListener(V.BEGIN, da.ANY, "ANY_BODY", "ANY_BODY",
                this.owner);
            this._physicSystem = null;
            i.prototype.onStop.call(this)
        },
        onContact: function(a) { var b = a._compMap.LaneObject_12; if (null == b || b.laneId != this._laneObject.laneId) return !1;
            b = a._compMap.TransformComponent_70;
            a._compMap.Teleport_11.teleport(b.position.x, a._compMap.DefaultLane_6.getId(b.position.x)); return !1 },
        __class__: Yi
    });
    var rb = function() { this.isCollected = !1;
        this.collectedSound = "";
        this.type = "COLLECTABLE";
        this.data = {};
        this.amount = 1;
        this.isActive = !0;
        i.call(this) };
    g["stolo.ensys.components.CollectableComponent"] =
        rb;
    rb.__name__ = ["stolo", "ensys", "components", "CollectableComponent"];
    rb.__super__ = i;
    rb.prototype = k(i.prototype, {
        get_name: function() { return "CollectableComponent_10" },
        onStart: function() { ba.getSystemEntity(this.owner);
            this._actorSystem = ba.getSystemEntity(this.owner).getComponent("ActorSystem_54");
            null != this.owner._compMap.PhysicsComponent_44 && this.owner._compMap.PhysicsComponent_44.addContactType(this.type);
            this._soundSystem = ba.getSystemEntity(this.owner)._compMap.SoundSystem_51 },
        collect: function(a) {
            "" !=
            this.collectedSound && this._soundSystem.play(this.collectedSound, this.owner, rb.SOUND_CHANNEL);
            this.isCollected = !0;
            null != this.owner._compMap.PhysicsComponent_44 && this.owner._compMap.PhysicsComponent_44.enable(!1);
            if (I.__instanceof(this.owner._compMap.Sprite_2, Xc)) { var b = this.owner._compMap.Sprite_2; if (b.animation.hasAnim("pickup")) { b.animation.gotoAndPlay("pickup", { onComplete: function(a, b) { return function() { return a(b) } }(m(this, this.onCollect), a), loop: !1 }); return } } this.onCollect(a)
        },
        onCollect: function() { this._actorSystem.removeActor(this.owner) },
        isCollectable: function() { return this.isActive && !this.isCollected },
        __class__: rb
    });
    var wf = function() { this._scale = new ca(1);
        this._respawnIn = -1;
        this.withGhost = !0;
        this.respawnTime = 1;
        rb.call(this) };
    g["game.pickup.PickupCollectable"] = wf;
    wf.__name__ = ["game", "pickup", "PickupCollectable"];
    wf.__super__ = rb;
    wf.prototype = k(rb.prototype, {
        onStart: function() {
            rb.prototype.onStart.call(this);
            this._logic = this.owner._internal_getFromParents("GameLogic_38");
            this._display = this.owner._compMap.Sprite_2;
            this._laneObject = this.owner._compMap.LaneObject_12;
            this._physics = this.owner._compMap.PhysicsComponent_44
        },
        dispose: function() { rb.prototype.dispose.call(this) },
        onUpdate: function(a) { rb.prototype.onUpdate.call(this, a); - 1 != this._respawnIn && (this._respawnIn -= a, 0 >= this._respawnIn && this.respawn());
            1 != this._scale._value && this._scale.update(a) },
        collect: function(a) {
            null == this._laneObject || a._compMap.LaneObject_12.laneId != this._laneObject.laneId || (this.pickupData = ja.getRandomType(this._logic.getPosition(a)), a = null != a._compMap.Player_22, "" != this.collectedSound &&
                a && t.play(this.collectedSound, "ITEMS"), this.isCollected = !0, this._display.animation.hasAnim("pickup") && this._display.animation.gotoAndPlay("pickup", { onComplete: m(this, this.disable), loop: !1 }))
        },
        disable: function() { this._physics.disable();
            this._respawnIn = this.respawnTime },
        respawn: function() { this._display.animation.gotoAndPlay("idle");
            this._respawnIn = -1;
            this.isCollected = !1;
            this._physics.enable();
            this._scale.animateTo(1, 0.25, D.backOut) },
        __class__: wf
    });
    var Zi = function() { rb.call(this) };
    g["game.world.objects.FakeoutCollectable"] =
        Zi;
    Zi.__name__ = ["game", "world", "objects", "FakeoutCollectable"];
    Zi.__super__ = rb;
    Zi.prototype = k(rb.prototype, { collect: function(a) { var b = a._compMap.KartState_5;
            b.currentState == Sa.HOP || b.currentState == Sa.JUMP || rb.prototype.collect.call(this, a) }, __class__: Zi });
    var Cb = function() { this._life = 0;
        this._baseSpeed = 500;
        this.acceleration = 1E3;
        this.speed = 500;
        this.minLifeForContact = 0.05;
        this.life = 3;
        this.speedReductionDuration = 0;
        this.speedReduction = -200;
        i.call(this) };
    g["game.world.objects.Projectile"] = Cb;
    Cb.__name__ = ["game", "world", "objects", "Projectile"];
    Cb.__super__ = i;
    Cb.prototype = k(i.prototype, {
        get_name: function() { return "Projectile_100" },
        onStart: function() { i.prototype.onStart.call(this);
            this._anim = this.owner._compMap.Sprite_2;
            this._physics = this.owner._compMap.PhysicsComponent_44;
            this._actorSystem = this.owner._internal_getFromParents("ActorSystem_54");
            this._physicSystem = this.owner._internal_getFromParents("PhysicSystem_31") },
        dispose: function() {
            this._physics = this._anim = this._actorSystem = this._physicSystem = null;
            i.prototype.dispose.call(this)
        },
        onUpdate: function(a) { i.prototype.onUpdate.call(this, a);
            this._life < this.life ? this._life += a : this.kill() },
        onContactBegin: function(a) { if (this._life < this.minLifeForContact || a == this.from || null == a._compMap.Lane_43 && null == a._compMap.Kart_4) return !1; var b = a._compMap.Kart_4; if (null != b) { if (b.isInvisible) return !1;
                a._compMap.HitFx_40.addFx();
                b.isInvincible() || (b = a._compMap.SpeedControl_21, b.stop(), b.addBoost(this.speedReduction, 0, this.speedReductionDuration)) } this.impact(a); return !0 },
        kill: function() { this._actorSystem.removeActor(this.owner) },
        impact: function() { this._physics.disable();
            this._anim.set("impact", { loop: !1, onComplete: m(this, this.kill) }) },
        __class__: Cb
    });
    var $i = function() { this.maxVelocity = 1750;
        this.laneId = 0;
        Cb.call(this) };
    g["game.world.objects.Beehive"] = $i;
    $i.__name__ = ["game", "world", "objects", "Beehive"];
    $i.__super__ = Cb;
    $i.prototype = k(Cb.prototype, {
        onStart: function() {
            Cb.prototype.onStart.call(this);
            this._physics.setVelocity(this.speed + this._baseSpeed, 0);
            this._physicSystem.addContactListener(V.PRELISTENER,
                da.ANY, "ANY_BODY", "ANY_BODY", this.owner, m(this, this.onContactBegin))
        },
        dispose: function() { this._physicSystem.removeContactListener(V.PRELISTENER, da.ANY, "ANY_BODY", "ANY_BODY", this.owner);
            Cb.prototype.dispose.call(this) },
        onUpdate: function(a) { Cb.prototype.onUpdate.call(this, a);
            this._life < this.life ? this._life += a : this.kill() },
        impact: function(a) { Cb.prototype.impact.call(this, a);
            null != a._compMap.Kart_4 && a.add(new aj) },
        __class__: $i
    });
    var bj = function() {
        this._forwardSpeed = 0;
        this._isExploding = !1;
        this.speedDamp =
            35;
        this.rotationDamp = 1;
        Cb.call(this)
    };
    g["game.world.objects.Missile"] = bj;
    bj.__name__ = ["game", "world", "objects", "Missile"];
    bj.__super__ = Cb;
    bj.prototype = k(Cb.prototype, {
        onStart: function() {
            Cb.prototype.onStart.call(this);
            this._level = this.owner._internal_getFromParents("LevelSystem_13");
            this._transform = this.owner._compMap.TransformComponent_70;
            this._physicSystem.addContactListener(V.PRELISTENER, da.ANY, "ANY_BODY", "PLAYER", this.owner, m(this, this.onContactBegin));
            this._forwardSpeed = (this.speed + this._baseSpeed) /
                this.speedDamp;
            this.getTarget()
        },
        dispose: function() { this._physicSystem.removeContactListener(V.PRELISTENER, da.ANY, "ANY_BODY", "PLAYER", this.owner);
            Cb.prototype.dispose.call(this) },
        onUpdate: function(a) {
            Cb.prototype.onUpdate.call(this, a);
            if (!this._isExploding)
                if (null != this._targetTransform) {
                    var b = db.degrees(Math.atan2(this._targetTransform.position.y - this._transform.position.y, this._targetTransform.position.x - this._transform.position.x)),
                        a = this._anim.animation.rotation._value;
                    180 < Math.abs(b - a) ? 0 < b &&
                        0 > a ? a -= (360 - b + a) / this.rotationDamp : 0 < a && 0 > b && (a += (360 - b + a) / this.rotationDamp) : a = b < a ? a - Math.abs(a - b) / this.rotationDamp : a + Math.abs(b - a) / this.rotationDamp;
                    this._physics.setRotation(db.radians(a));
                    b = this._forwardSpeed * (90 - Math.abs(a)) / 90;
                    a = 0 > a ? -this._forwardSpeed + Math.abs(b) : this._forwardSpeed - Math.abs(b);
                    this._physics.moveBy(b, a)
                } else this._physics.moveBy(this._forwardSpeed, 0)
        },
        getTarget: function() {
            for (var a = Math.POSITIVE_INFINITY, b = 0, c = this._level.characters; b < c.length;) {
                var d = c[b];
                ++b;
                if (d != this.owner &&
                    (d = d._compMap.TransformComponent_70, !(d.position.x <= this._transform.position.x))) { var e = this._transform.distanceTo(d);
                    e < a && (a = e, this._targetTransform = d, null) }
            }
        },
        impact: function(a) { Cb.prototype.impact.call(this, a);
            null != this.from._compMap.Player_22 && t.play("missile_impact", "PICKUP");
            this._isExploding = !0 },
        __class__: bj
    });
    var cj = function() { this.id = "";
        i.call(this) };
    g["game.tutorial.TutorialTrigger"] = cj;
    cj.__name__ = ["game", "tutorial", "TutorialTrigger"];
    cj.__super__ = i;
    cj.prototype = k(i.prototype, {
        get_name: function() { return "TutorialTrigger_114" },
        onStart: function() { i.prototype.onStart.call(this);
            this._tuto = this.owner._internal_getFromParents("TutorialSystem_30");
            this._physicSystem = this.owner._internal_getFromParents("PhysicSystem_31");
            this._physicSystem.addContactListener(V.BEGIN, da.ANY, "ANY_BODY", "ANY_BODY", this.owner, m(this, this.onContact));
            n.inEditor && this.createEditorLabel() },
        onStop: function() { this._physicSystem.removeContactListener(V.BEGIN, da.ANY, "ANY_BODY", "ANY_BODY", this.owner);
            this._physicSystem = null;
            i.prototype.onStop.call(this) },
        onContact: function(a) { null != a._compMap.Player_22 && this._tuto.show(this.id); return !1 },
        createEditorLabel: function() { var a = A.createTextSprite(this.id, "30_orange_shadow", this.owner);
            a.set_pointerEnabled(!1);
            a.setXY(50, 125) },
        __class__: cj
    });
    var dj = function() { this._laneId = 0;
        i.call(this) };
    g["game.tutorial.TutorialKart"] = dj;
    dj.__name__ = ["game", "tutorial", "TutorialKart"];
    dj.__super__ = i;
    dj.prototype = k(i.prototype, {
        get_name: function() { return "TutorialKart_3" },
        onStart: function() {
            i.prototype.onStart.call(this);
            n.inEditor || (this._actors = this.owner._internal_getFromParents("ActorSystem_54"), this._level = this.owner._internal_getFromParents("LevelSystem_13"), this._laneId = this.owner._compMap.LaneObject_12.laneId, this._transform = this.owner._compMap.TransformComponent_70, this._characterData = G.getTutorialOpponent(), this.spawnKart(), this.owner.dispose())
        },
        onStop: function() { this._actors = this._transform = this._characterData = null;
            i.prototype.onStop.call(this) },
        spawnKart: function() {
            var a = K.clone(dc.getTemplate(this._characterData.name));
            a.character_ai = null;
            a.kart_culling = null;
            a.lane_request = { laneId: this._laneId };
            a.physics = { kinematic: !0 };
            a = this._actors.spawn(a);
            a._compMap.TransformComponent_70.position = { x: this._transform.position.x, y: this._transform.position.y + 100 };
            a._compMap.PhysicsComponent_44.setPosition(this._transform.position.x, this._transform.position.y + 100);
            this._level.characters.push(a);
            dc.addCharacterToKart(a, this._characterData.name)
        },
        __class__: dj
    });
    var ec = function() {
        this._locked = !1;
        this._loop = !0;
        this._queue = [];
        this._defaultSlotOffset = { x: 0, y: 0 };
        this.onEvent = new Lb;
        this.resetPose = ec.ResetPose;
        this.speed = 0.5;
        this.loop = !0;
        this.boneOverrides = [];
        this.mixOverrides = [];
        this.defaultMixTime = 0;
        this.defaultAnimation = "idle";
        this.customSkinName = "custom";
        J.call(this)
    };
    g["stolo.spine.SpineComponent"] = ec;
    ec.__name__ = ["stolo", "spine", "SpineComponent"];
    ec.__super__ = J;
    ec.prototype = k(J.prototype, {
        onAdded: function() { J.prototype.onAdded.call(this);
            this.setAtlas(this.atlas) },
        applyOffset: function() {
            this.setAnchor(0, 0);
            null != this.offset && null != this._animation &&
                this._animation.setAnchor(-this.offset.x, -this.offset.y)
        },
        setAtlas: function(a) { this.atlas = a;
            this._atlasLoader = this.loadAtlas(this.pack, this.asset) },
        loadAtlas: function(a, b, c) { null == c && (c = !0); var a = E.getPack(a),
                d = a.getFile((null != this.atlas ? this.atlas : b) + ".atlas", !1),
                e = "";
            null != d && (e = d.toString());
            d = new rm(e, new ej(a));
            d = new Td(d);
            c && this.loadSkeleton(d, a, b); return d },
        loadSkeleton: function(a, b, c) {
            a = new Xa(a);
            b = b.getFile(c + ".json").toString();
            this._skeletonData = a.readSkeletonData(b, c);
            null != this._animation &&
                (this.owner.removeChild(this._animation.owner), this._animation.state.onComplete.remove(m(this, this.onAnimDone)), this._animation.state.onEvent.remove(m(this, this.onAnimEvent)));
            this._animation = new fj(this._skeletonData, this.defaultMixTime);
            this._animation.set_pixelSnapping(0 != (this._flags & 32));
            this._animation.timeScale = this.speed;
            this._animation.state.onComplete.add(m(this, this.onAnimDone));
            this._animation.state.onEvent.add(m(this, this.onAnimEvent));
            null != this.defaultAnimation && (this._animName = this.defaultAnimation,
                this._animation.state.setAnimationByName(0, this.defaultAnimation, this.loop));
            this.applyMixOverrides(this.mixOverrides);
            this.applyBoneOverrides(this.boneOverrides);
            this.owner.addChild((new p).add(this._animation));
            this.applyOffset()
        },
        applyBoneOverrides: function(a) { for (var b = 0; b < a.length;) { var c = a[b];++b;
                this.applyBoneOverride(c) } },
        applyBoneOverride: function(a) {
            var b = this._animation.skeleton.findBone(a.bone);
            if (null == b) throw "Bone '" + y.string(a.bone) + "' not found for override";
            b = b.data;
            null != a.offsetX &&
                (b.x += a.offsetX);
            null != a.offsetY && (b.y += a.offsetY);
            null != a.scaleX && (b.scaleX = a.scaleX);
            null != a.scaleY && (b.scaleY = a.scaleY)
        },
        applyMixOverrides: function(a) { for (var b = 0; b < a.length;) { var c = a[b];++b;
                this.applyMixOverride(c) } },
        applyMixOverride: function(a) { this._animation.stateData.setMixByName(a.from, a.to, a.time) },
        play: function(a, b, c, d) {
            null == d && (d = !1);
            null == b && (b = !0);
            a == this._currentAnim || this._locked || (this._locked = d, this._currentAnim = a, this._loop = b, this._callback = c, this._queue = a instanceof Array && null ==
                a.__enum__ ? a : [a], this.playNextAnim())
        },
        playNextAnim: function() { this.resetPose && (this._animation.skeleton.setBonesToSetupPose(), this._animation.skeleton.setSlotsToSetupPose());
            this._animName = this._queue.shift();
            this._animation.state.setAnimationByName(0, this._animName, this._loop) },
        onAnimDone: function() { this._locked = !1;
            0 < this._queue.length ? this.playNextAnim() : null != this._callback && (this._callback(this), this._loop || (this._callback = null)) },
        onAnimEvent: function(a, b) { this.onEvent.emit(this, b) },
        pause: function() {
            0 !=
                this._animation.timeScale && (this._resumeSpeed = this._animation.timeScale, this._animation.timeScale = 0)
        },
        resume: function() { 0 < this._animation.timeScale || (this._animation.timeScale = this._resumeSpeed) },
        changeSlotFromImage: function(a, b, c) { if (null == b) this.clearSlot(this.getSlot(a));
            else { var a = this.createRegion(a, c),
                    c = new gj,
                    d = new hj;
                d.rendererObject = b;
                d.width = c.width = b.get_width();
                d.height = c.height = b.get_height();
                c.page = d;
                a.rendererObject = c } },
        changeSlotFromSprite: function(a, b, c, d) {
            null == d && (d = !0);
            if (null ==
                b) return this.clearSlot(this.getSlot(a)), null;
            null == b.owner && (new p).add(b);
            d ? (a = this.createSlotWrapper(a, c), a.wrapper.owner.addChild(b.owner)) : (a = this.createRegion(a, c), a.wrapper = b);
            return a
        },
        createSlotWrapper: function(a, b) { var c = this.createRegion(a, b),
                d = c.wrapper = new r;
            this.owner._compMap.Disposer_72.add((new p).add(d)); return c },
        appendToSlot: function(a, b) {
            var c = this.getSlot(a).attachment;
            if (null == c) return this.changeSlotFromSprite(a, b);
            null == b.owner && (new p).add(b);
            I.__instanceof(c.wrapper, ah) &&
                c.wrapper.offset(b);
            c.wrapper.owner.addChild(b.owner);
            return c
        },
        clearSlot: function(a) { if (null != a.attachment) { var b = I.__cast(a.attachment, Ud).wrapper;
                null != b && null != b.owner && (b.owner.dispose(), b.dispose());
                a.set_attachment(null) } },
        hasSlot: function(a) { return null != this._animation.skeleton.findSlot(a) },
        getSlot: function(a, b) { null == b && (b = !1); var c = this._animation.skeleton.findSlot(a); if (null == c) throw "Slot '" + a + "' not found.";
            b && this.clearSlot(c); return c },
        createRegion: function(a, b, c, d, e) {
            null == e && (e = !1);
            var f = this.getSlot(a, !0),
                l = this.findAttachmentData(this._skeletonData.findSkin(this.customSkinName), a);
            if (null == l) throw "Skin attachment '" + a + "' not found. Slot name and placeholder name must be the same.";
            var v;
            if (null != c) { if (v = this._atlasLoader.newRegionAttachment(null, a, c + "/" + d), null == v) throw "'" + c + "/" + d + "' not found in the atlas for slot '" + a + "'"; } else v = new Ud(l.name);
            v.weak = e;
            f.set_attachment(v);
            this.updateAttachment(v, l, b);
            return v
        },
        updateAttachment: function(a, b, c) {
            null == c && (c = this._defaultSlotOffset);
            var d = b.rotation * Math.PI / 180;
            a.x = b.x + c.x * Math.cos(d) + c.y * Math.sin(d);
            a.y = b.y + c.x * Math.sin(d) - c.y * Math.cos(d);
            a.width = b.width;
            a.height = b.height;
            a.scaleX = b.scaleX;
            a.scaleY = b.scaleY;
            a.rotation = b.rotation;
            a.a = b.a
        },
        findAttachmentData: function(a, b) { for (var c = 0, d = a.attachments; c < d.length;) { var e = d[c];++c; if (null != e && null != e.get(b)) return e.get(b) } return null },
        get_animation: function() { return this._animation },
        __class__: ec,
        __properties__: k(J.prototype.__properties__, { get_animation: "get_animation" })
    });
    var We =
        function() { this.speed = 0.5;
            i.call(this) };
    g["game.animation.Hover"] = We;
    We.__name__ = ["game", "animation", "Hover"];
    We.__super__ = i;
    We.prototype = k(i.prototype, { get_name: function() { return "Hover_124" }, onStart: function() { i.prototype.onStart.call(this); var a = this.owner._compMap.Sprite_2;
            null != a && (a.animation.x.set_behavior(new Ea(0, 10, this.speed, 0, We.delay)), We.delay += 0.1) }, __class__: We });
    var ij = function() {};
    g["game.ComponentList"] = ij;
    ij.__name__ = ["game", "ComponentList"];
    ij.init = function() {
        hg.defaultSource =
            Aa.stats;
        ec.ResetPose = !0;
        Hb.init("actors", ij.components, !0);
        Hb.addTemplate(Aa.baseKart);
        for (var a = 0, b = Aa.list; a < b.length;) { var c = b[a];++a;
            null != c && Hb.addTemplate(c.template) }
    };
    var Gd = function() {};
    g["game.Main"] = Gd;
    Gd.__name__ = ["game", "Main"];
    Gd.main = function() { La.init();
        x.init();
        o.init(Q.width, Q.height);
        C.defaultTransform = "uppercase"; var a = new Oa(!0);
        x.root.add(a);
        N.setScenes(jj.scenes);
        N.onChange.connect(Gd.onSceneChange);
        E.loadPacks(["config", "ui_loading"], Gd.onInitPacksReady) };
    Gd.onSceneChange =
        function() { B.killAll() };
    Gd.onInitPacksReady = function() { n.init();
        T.init();
        T.emitSdkEvent("onLoadingStart");
        sa.checkPiracy(n.config.nick.url);
        Oa.configure(n.config);
        N.change("Loading", N.createInstantTransition());
        Ib.instance.load(["text", "fonts", "ui", "ui_title", "ui_level", "ui_character", "ui_customize", "levels", "actors", "ai", "sprites", fa.packName], Gd.onBasePacksLoaded) };
    Gd.onBasePacksLoaded = function() {
        t.loadSounds(Gd.getSoundPack(), Gd.onSoundsLoaded);
        A.setSharedAssets("ui");
        C.addFontPack(E.getPack("fonts"));
        Ga.loadPack();
        ij.init();
        fa.init();
        o.mobile && (Q.nbOpponents = 3, xf.updateRate = 0.25);
        Q.autoAccelControls = o.mobile;
        Q.pickupsForVid && (ja.list = [ja.FAKEOUT, ja.EMP, ja.NITRO]);
        T.emitSdkEvent("onLoadingEnd");
        N.change(jj.DefaultScene)
    };
    Gd.onSoundsLoaded = function() { t.playMusic("menu") };
    Gd.getSoundPack = function() { return o.lowMemory ? "sound_mobile" : "sound" };
    var U = function(a) { null == a && (a = !0);
        this._disposer = new za;
        Te.call(this, a) };
    g["stolo.ui.BaseScene"] = U;
    U.__name__ = ["stolo", "ui", "BaseScene"];
    U.__super__ = Te;
    U.prototype =
        k(Te.prototype, {
            dispose: function() { Te.prototype.dispose.call(this);
                this.set_pack(null) },
            loadAssets: function(a, b) { null == b && (b = !0);
                this._loadedPackName = a;
                this._autoDisposePack = b;
                E.loadPack(a, m(this, this.onAssetsLoaded)) },
            onAssetsLoaded: function(a) { this.set_pack(a) },
            onAssetsReady: function() {},
            onStart: function() { this.owner.add(this._disposer);
                this.makeReady() },
            makeReady: function() { if (!this.isReady && !(null == this._pack || null == this.owner)) this.onAssetsReady(), this.isReady = !0 },
            createButton: function(a, b, c,
                d, e, f) { null == d && (d = "buttons");
                a = A.createButton(a, b, c, d, this.getPack(f));
                this.addSprite(a, e); return a },
            createImage: function(a, b, c) { a = A.createImage(a, this.getPack(c));
                this.addSprite(a, b); return a },
            createText: function(a, b, c, d) { a = C.getLocalizedTextSprite(a, b, 0, 0, d);
                this.addSprite(a, c); return a },
            addSprite: function(a, b) { null == b && (b = this.owner); return A.addSprite(a, b) },
            addSoundBtn: function(a, b) { var c = A.createSoundButton(b);
                c.setXY(877, 15);
                this.addSprite(c, a); return c },
            getTexture: function(a, b) {
                return A.getTexture(a,
                    this.getPack(b))
            },
            getPack: function(a) { null == a && (a = this._pack);
                null == a && (a = A.get_sharedAssets()); return a },
            set_pack: function(a) { null != this._pack && null != this._loadedPackName && this._autoDisposePack && this._pack != a && (E.disposePack(this._loadedPackName), this._loadedPackName = null);
                this._pack = a;
                null != a && this.makeReady(); return this._pack },
            __class__: U,
            __properties__: k(Te.prototype.__properties__, { set_pack: "set_pack" })
        });
    var kj = function() { U.call(this) };
    g["game.editor.Editor"] = kj;
    kj.__name__ = ["game", "editor",
        "Editor"
    ];
    kj.__super__ = U;
    kj.prototype = k(U.prototype, { onAdded: function() { this._entity = new p;
            this._entity.add(new r);
            this._system = new Yc(Za.get(n.currentLevel));
            this._entity.add(this._system);
            this.owner.addChild(this._entity);
            this._system.logic.snapX = 100;
            this._system.logic.snapY = 70 }, __class__: kj });
    var Hd = function(a) { this._time = 0;
        U.call(this);
        this._packName = a };
    g["stolo.ui.PreloadingScene"] = Hd;
    Hd.__name__ = ["stolo", "ui", "PreloadingScene"];
    Hd.__super__ = U;
    Hd.prototype = k(U.prototype, {
        dispose: function() {
            U.prototype.dispose.call(this);
            this._loader = null
        },
        onStart: function() { U.prototype.onStart.call(this);
            null == this._packName && (this._packName = Hd.defaultPack);
            this.loadAssets(this._packName, !1) },
        onUpdate: function(a) { U.prototype.onUpdate.call(this, a);
            this._time += a },
        load: function(a, b) { this.set_loader(E.loadPacks(a, b)); return this._loader },
        setProgress: function() {},
        set_loader: function(a) { this._loader = a;
            null != this._loader && this._disposer.add(this._loader.progressChanged.connect(m(this, this.onLoaderProgress))); return this._loader },
        onLoaderProgress: function() {
            this.setProgress(this._loader._progress /
                this._loader._total)
        },
        __class__: Hd,
        __properties__: k(U.prototype.__properties__, { set_loader: "set_loader" })
    });
    var Ib = function() { this._barX = 296;
        Hd.call(this);
        Ib.instance = this };
    g["game.ui.Loading"] = Ib;
    Ib.__name__ = ["game", "ui", "Loading"];
    Ib.__super__ = Hd;
    Ib.prototype = k(Hd.prototype, {
        dispose: function() { Hd.prototype.dispose.call(this);
            Ib.instance == this && (Ib.instance = null) },
        onAssetsReady: function() {
            this.createImage("bg");
            var a = new ya(this._pack.getTexture("bar"));
            a.setXY(296, 247);
            a.scissor = this._scissor = new Na(0,
                0, 0, a.getNaturalHeight());
            this._barWidth = a.getNaturalWidth();
            this.owner.addChild((new p).add(a));
            this._kart = A.createImage("kart", this._pack);
            this._kart.setXY(296, 120);
            this._kart.setAnchor(0.5 * this._kart.getNaturalWidth(), 0);
            this.owner.addChild((new p).add(this._kart));
            a = new sf(this._pack, "mov_23_white_shadow");
            this._txtProgress = new Gc(a);
            this._txtProgress.setAlign(Z.Center);
            this._txtProgress.x.set__(Q.width / 2);
            this._txtProgress.y.set__(346);
            this.owner.addChild((new p).add(this._txtProgress))
        },
        setProgress: function(a) {
            null !=
                this._scissor && (this._txtProgress.set_text(Math.round(100 * a) + " %"), this._scissor.width = this._barWidth * a, this._kart.x.set__(this._barX + this._scissor.width))
        },
        __class__: Ib
    });
    var lj = function() { Ib.call(this) };
    g["game.editor.EditorLoading"] = lj;
    lj.__name__ = ["game", "editor", "EditorLoading"];
    lj.__super__ = Ib;
    lj.prototype = k(Ib.prototype, {
        dispose: function() { Ib.prototype.dispose.call(this) },
        onAssetsReady: function() {
            Ib.prototype.onAssetsReady.call(this);
            t.mute();
            this.load(Za.get(n.currentLevel).getPacks(!0), m(this,
                this.onPacksLoaded))
        },
        onPacksLoaded: function() { N.change("editor") },
        __class__: lj
    });
    var ig = function() { this._scissorWidth = new ca(0);
        U.call(this, !1) };
    g["game.ui.Title"] = ig;
    ig.__name__ = ["game", "ui", "Title"];
    ig.onClick = function() { T.emitSdkEvent("onTitleScreenEnd");
        t.playMusic("menu");
        T.trackUI("Play", "Title");
        t.play("click", "UI");
        n.save.tutorialSeen ? N.change("SelectMode") : (n.currentLevel = "tuto1", N.change("GameplayLoading")) };
    ig.__super__ = U;
    ig.prototype = k(U.prototype, {
        onAdded: function() {
            U.prototype.onAdded.call(this);
            T.emitSdkEvent("onTitleScreenStart");
            this.loadAssets("ui_title");
            t.playMusic("menu")
        },
        onAssetsReady: function() {
            var a = this;
            U.prototype.onAssetsReady.call(this);
            this.createImage("bg");
            var b = A.createImage("nick", this._pack);
            b.setXY(389, 103);
            b.centerAnchor();
            this.owner.addChild((new p).add(b));
            var c = A.createImage("racing", this._pack);
            c.setXY(356, 99);
            this.owner.addChild((new p).add(c));
            var d = A.createImage("stars", this._pack);
            d.setXY(519, 210);
            this._starsScissor = d.scissor = new Na(0, 0, 0, d.getNaturalHeight());
            this.owner.addChild((new p).add(d));
            var e = A.createImage("bling", this._pack);
            e.setXY(546, 255);
            e.centerAnchor();
            this.owner.addChild((new p).add(e));
            var f = A.createImage("sb", this._pack);
            f.setXY(88, 173);
            this.owner.addChild((new p).add(f));
            this.addSoundBtn();
            var l = this.createText(x._platform.getTouch().get_supported() ? "PLAY_TOUCH" : "PLAY", "23_white_shadow").setXY(480, 495);
            B.from(b, { scaleX: 0, scaleY: 0 }, { delay: 0.1, time: 0.5, ease: D.backOut });
            B.from(c, { y: "+=200", alpha: 0 }, { delay: 0.3, time: 0.5, ease: D.quadOut });
            B.from(e, { rotation: "-=360", alpha: 0 }, { delay: 0.6, time: 0.5, ease: D.quadOut, onComplete: function() { B.to(e, { x: 676 }, { time: 0.5, ease: D.quadOut });
                    a._scissorWidth.animateTo(d.getNaturalWidth(), 0.6, D.quadOut) } });
            B.from(f, { x: -f.getNaturalWidth() }, { delay: 1.4, time: 0.6, ease: D.quintOut });
            B.from(l, { y: "+=80" }, { delay: 1.4, time: 0.8, ease: D.backOut });
            l.alpha.set_behavior(new Ea(1, 0.5, 0.5))
        },
        onStart: function() { U.prototype.onStart.call(this);
            x._platform.getPointer().up.connect(ig.onClick).once() },
        onUpdate: function(a) {
            U.prototype.onUpdate.call(this,
                a);
            null != this._starsScissor && (this._scissorWidth.update(a), this._starsScissor.width = this._scissorWidth._value)
        },
        __class__: ig
    });
    var mj = function() { this.bgAlpha = 0.7;
        this.emptyOnValidCode = !0;
        this.emptyOnInvalidCode = !1;
        this.codeTextSuffix = "";
        this.codeTextPrefix = "TEXT_";
        U.call(this, !1) };
    g["game.ui.CodeEntry"] = mj;
    mj.__name__ = ["game", "ui", "CodeEntry"];
    mj.__super__ = U;
    mj.prototype = k(U.prototype, {
        onAdded: function() { U.prototype.onAdded.call(this);
            this.loadAssets("ui_codes") },
        onAssetsReady: function() {
            this._bg =
                new Wa(0, Q.width, Q.height);
            this._bg.setAlpha(this.bgAlpha);
            this.addSprite(this._bg);
            var a = this.createImage("popup_bg"),
                b = Q.width / 2,
                c = Q.height / 2,
                d = a.getNaturalWidth() / 2,
                e = a.getNaturalHeight() / 2;
            a.setXY(b, c).centerAnchor();
            this.createButton(m(this, this.onBack), "btn_quit").setXY(695, 144).centerAnchor();
            var f = $a.createTextImageButton("btn_orange", "BTN_RESET", "23_white_shadow", m(this, this.onReset), "ui");
            f.setXY(402, 321);
            this.addSprite(f);
            f = $a.createTextImageButton("btn_green", "BTN_SUBMIT", "23_white_shadow",
                m(this, this.onSubmit), "ui_codes");
            f.setXY(560, 321);
            this.addSprite(f);
            this.input = new nj(this.getTexture("input"));
            this.input.maxLength = 10;
            this.input.padding.y = 10;
            this.input.fontStyle = "30_black";
            this.input.letterSpacing = 10;
            this.addSprite(this.input);
            this.input.setXY(b, c - 30).centerAnchor();
            this._disposer.add(this.input.onChange.connect(m(this, this.onInputChange)));
            x._platform.getTouch().get_supported() && (this.keyboard = new jg(this.getTexture("keyboard"), this.input), this.addSprite(this.keyboard));
            var f =
                a.getNaturalWidth() - 20,
                l = 0.5 * -f,
                v = this.createText("CODE_TITLE", "23_white_shadow");
            v.setXY(b + l, c - 120);
            v.setWrapWidth(f);
            this.textError = this.createText("CODE_ERROR", "20_white", a.owner);
            this.textError.setXY(d, e + 80);
            this.imageError = this.createImage("icon_error", a.owner);
            this.imageError.setXY(this.textError.x._value - this.textError.getNaturalWidth() / 2 - 30, this.textError.y._value - 3);
            this.imageError.set_visible(this.textError.set_visible(!1));
            this.textOKCode = this.createText(null, "20_white", a.owner);
            this.textOKCode.setXY(d,
                e + 70);
            this.textOKUnlocked = this.createText("CODE_UNLOCKED", "20_white", a.owner);
            this.textOKUnlocked.setXY(d, e + 95);
            this.imageOK = this.createImage("icon_ok", a.owner);
            this.imageOK.setXY(this.textOKUnlocked.x._value - this.textOKUnlocked.getNaturalWidth() / 2 - 30, this.textOKUnlocked.y._value - 10);
            this.imageOK.set_visible(this.textOKCode.set_visible(this.textOKUnlocked.set_visible(!1)));
            B.from(this._bg, { alpha: 0 }, { time: 1.5, ease: D.quintOut, delay: 0 });
            null != this.keyboard && B.from(this.keyboard, { y: "+=400" }, {
                time: 0.5,
                ease: D.backOut,
                delay: 0.2
            })
        },
        onSubmit: function() { t.play("ui_click", "UI");
            this.validateCode() },
        onReset: function() { t.play("ui_click", "UI");
            this.resetCode() },
        onBack: function() { t.play("ui_click", "UI");
            N.pop() },
        onInputChange: function() { this.input.isEmpty() ? this.imageError.set_visible(this.textError.set_visible(!1)) : (this.textError.set_visible(this.imageError.set_visible(!1)), this.imageOK.set_visible(this.textOKCode.set_visible(this.textOKUnlocked.set_visible(!1)))) },
        validateCode: function() {
            if (!(null == this.input.get_text() ||
                    "" == this.input.get_text() || this.input.get_text() == this._validCode)) {
                var a = ua.get_manager().getCode(this.input.get_text()),
                    b;
                if (b = null != a ? ua.apply(a) : !1) t.play("unlock", "SFX"), this._validCode = this.input.get_text(), this.trackEvent("codeEntrySuccess"), this.textOKCode.setText(this.codeTextPrefix + a + this.codeTextSuffix), this.imageOK.set_visible(this.textOKCode.set_visible(this.textOKUnlocked.set_visible(!0))), this.emptyOnValidCode && this.input.empty(), B.from(this.imageOK, { y: "=+100" }, { time: 0.5, ease: D.backOut });
                b || (this.trackEvent("codeEntryFail"), this.emptyOnInvalidCode && this.input.empty(), this.textError.set_visible(this.imageError.set_visible(!0)), Zc.shake(this.textError, 0.2), Zc.shake(this.imageError, 0.2))
            }
        },
        resetCode: function() { ua.reset();
            this.input.empty() },
        trackEvent: function(a) { var b = { codeID: this.input.get_text() };
            T.track(a, b) },
        __class__: mj
    });
    var oj = function() { U.call(this, !1) };
    g["game.ui.SelectMode"] = oj;
    oj.__name__ = ["game", "ui", "SelectMode"];
    oj.__super__ = U;
    oj.prototype = k(U.prototype, {
        onAdded: function() {
            U.prototype.onAdded.call(this);
            this.loadAssets("ui_mode")
        },
        onAssetsReady: function() {
            U.prototype.onAssetsReady.call(this);
            n.customizeFrom = "";
            this.createImage("bg");
            var a = $a.createTextImageButton("btn_quickmatch", "QUICK_MATCH", "23_white_shadow", m(this, this.onQuick), "ui_mode", { text: { autoCenter: !1, x: -115, y: 63, align: "left" } });
            a.owner._compMap.ButtonText_126.autoCenter = !1;
            a.setXY(221, 247);
            this.owner.addChild(a.owner);
            var b = $a.createTextImageButton("btn_tournament", "TOURNAMENT", "23_white_shadow", m(this, this.onTournament), "ui_mode", {
                text: {
                    autoCenter: !1,
                    x: -113,
                    y: 56,
                    align: "left"
                }
            });
            b.owner._compMap.ButtonText_126.autoCenter = !1;
            b.setXY(490, 231);
            this.owner.addChild(b.owner);
            var c = $a.createTextImageButton("btn_for_fun", "FOR_FUN", "23_white_shadow", m(this, this.onFun), "ui_mode", { text: { autoCenter: !1, x: -110, y: 50, align: "left" } });
            c.owner._compMap.ButtonText_126.autoCenter = !1;
            c.setXY(781, 260);
            this.owner.addChild(c.owner);
            var d = this.createImage("icon_new", c.owner);
            d.setXY(35, 47).set_pointerEnabled(!1);
            this.createText("NEW", "15_white", d.owner).setXY(40, 7);
            d = A.createImage("title_box");
            d.setXY(536, 38);
            this.owner.addChild((new p).add(d));
            var e = C.getLocalizedTextSprite("MODE_TITLE", "30_black");
            e.setXY(48, 12);
            e.setAlign(Z.Left);
            d.owner.addChild((new p).add(e));
            this.addSoundBtn();
            e = $a.createTextImageButton("btn_customize", "CUSTOMIZE_TITLE", "23_white_shadow", m(this, this.onCustomize), "ui_mode", { text: { x: 0, y: 22 } });
            e.setXY(788, 435);
            this.owner.addChild(e.owner);
            var f = null;
            n.config.codeEnabled && (f = $a.createTextImageButton("btn_enter_code", "ENTER_CODE", "23_white_shadow", m(this, this.onCode),
                "ui_mode", { text: { x: 10, y: -3 } }), f.setXY(176, 462), this.owner.addChild(f.owner));
            this._popup = new r;
            this._popup.set_visible(!1);
            this.owner.addChild((new p).add(this._popup));
            var l = new Wa(0, Q.width, Q.height);
            l.setAlpha(0.3);
            l.setXY(0, 0);
            this._popup.owner.addChild((new p).add(l));
            l = A.createImage("popup_bg", E.getPack("ui"));
            l.setXY(480, 280);
            l.centerAnchor();
            this._popup.owner.addChild((new p).add(l));
            var v = l.getNaturalWidth() - 20,
                h = 0.5 * -v,
                g = C.getLocalizedTextSprite("FOR_FUN_POPUP", "23_white_shadow");
            g.setXY(0.5 *
                l.getNaturalWidth() + h, 50);
            g.setWrapWidth(v);
            l.owner.addChild((new p).add(g));
            v = $a.createTextImageButton("btn_green", "OK", "23_white_shadow", m(this, this.confirmFun), "ui", { text: { x: 0, y: -3 } });
            v.setXY(0.5 * l.getNaturalHeight() + 80, 200);
            l.owner.addChild(v.owner);
            B.from(d, { x: "+=425" }, { time: 0.4, ease: D.quintOut, delay: 0 });
            B.from(a, { x: "+=100", alpha: 0 }, { time: 0.45, ease: D.quintOut, delay: 0.2 });
            B.from(b, { x: "+=100", alpha: 0 }, { time: 0.45, ease: D.quintOut, delay: 0.3 });
            B.from(c, { x: "+=100", alpha: 0 }, {
                time: 0.45,
                ease: D.quintOut,
                delay: 0.4
            });
            B.from(e, { y: "+=200" }, { time: 0.45, ease: D.quintOut, delay: 0.45 });
            n.config.codeEnabled && B.from(f, { y: "+=200" }, { time: 0.45, ease: D.quintOut, delay: 0.45 })
        },
        onStop: function() { U.prototype.onStop.call(this) },
        onTournament: function() { T.trackUI("Tournament", "Select Mode");
            t.play("click", "UI");
            n.isTournament = !0;
            n.isForFun = !1;
            N.change("SelectCharacter") },
        onQuick: function() { T.trackUI("Quick Match", "Select Mode");
            t.play("click", "UI");
            n.isTournament = !1;
            n.isForFun = !1;
            N.change("SelectCharacter") },
        onFun: function() { this._popup.set_visible(!0) },
        confirmFun: function() { T.trackUI("For Fun", "Select Mode");
            t.play("click", "UI");
            n.isForFun = !0;
            n.isTournament = !1;
            N.change("SelectCharacter") },
        onCustomize: function() { T.trackUI("Cool Stuff", "Select Mode");
            t.play("click", "UI");
            n.customizeFrom = "selectmode";
            N.change("SelectCharacter") },
        onCode: function() { T.trackUI("Enter Code", "Select Mode");
            t.play("click", "UI");
            N.push("CodeEntry") },
        __class__: oj
    });
    var Rb = function() { this._canChangeChar = !0;
        this._animate = !1;
        this._buttons = [];
        this._list = G.list;
        U.call(this, !1) };
    g["game.ui.SelectCharacter"] = Rb;
    Rb.__name__ = ["game", "ui", "SelectCharacter"];
    Rb.onBackClick = function() { T.trackUI("Back", "Select Character");
        N.change("SelectMode");
        t.play("click", "UI") };
    Rb.onNextClick = function() { n.currentCharacter.locked && n.save.gamesPlayed < n.currentCharacter.unlocks || (t.play("click", "UI"), "selectmode" != n.customizeFrom && (n.customizeFrom = "selectcharacter"), T.trackUI("Cool Stuff", "Select Character"), N.change("CustomizeCharacter")) };
    Rb.__super__ = U;
    Rb.prototype = k(U.prototype, {
        onAdded: function() {
            U.prototype.onAdded.call(this);
            this.loadAssets("ui_character")
        },
        onAssetsReady: function() {
            var a = this;
            U.prototype.onAssetsReady.call(this);
            t.playMusic("menu");
            this.createImage("bg");
            this.buildGrid();
            var b = A.createImage("title_box");
            b.setXY(536, 38);
            this.owner.addChild((new p).add(b));
            var c = C.getLocalizedTextSprite("CHARACTER_TITLE", "30_black");
            c.setXY(48, 12);
            c.setAlign(Z.Left);
            b.owner.addChild((new p).add(c));
            c = new r;
            this.owner.addChild((new p).add(c));
            this.addSoundBtn(c.owner);
            this._kart = new yf;
            this._kart.setXY(315, 425);
            this._kart.setScale(0.7);
            this.addSprite(this._kart);
            this._disposer.add(this._kart.onReady.connect(m(this, this.animKart)));
            this._statbox = new Vd;
            this._statbox.labels = ["SPEED", "TRACTION", "STRENGTH"];
            this._statbox.xOffset = 147;
            this._statbox.setXY(0, 480);
            this.addSprite(this._statbox);
            var d = A.createImage("info_bg", this._pack);
            d.setXY(-80, 89);
            this.owner.addChild((new p).add(d));
            this._charName = C.getLocalizedTextSprite("", "23_white_shadow");
            this._charName.setAlign(Z.Left);
            this._charName.setXY(158, 11);
            d.owner.addChild((new p).add(this._charName));
            this._teamName = C.getLocalizedTextSprite("", "15_blue");
            this._teamName.setAlign(Z.Left);
            this._teamName.setXY(158, 58);
            this._teamName.setWrapWidth(130);
            d.owner.addChild((new p).add(this._teamName));
            this._teamLogo = A.createImage("logo_tmnt", this._pack);
            this._teamLogo.centerAnchor();
            this._teamLogo.setXY(370, 75);
            d.owner.addChild((new p).add(this._teamLogo));
            this._unlockTxt = C.getLocalizedTextSprite("UNLOCK", "30_orange_shadow");
            this._unlockTxt.setAlign(Z.Left);
            this._unlockTxt.setWrapWidth(250);
            this._unlockTxt.setXY(100,
                240);
            this._unlockTxt.setAlpha(0);
            this.owner.addChild((new p).add(this._unlockTxt));
            this._btnBack = this.createButton(Rb.onBackClick, "btn_back");
            this._btnBack.setXY(50, 50);
            this._btnBack.centerAnchor();
            this._btnNext = this.createButton(Rb.onNextClick, "btn_check", null, null, null, E.getPack("ui"));
            this._btnNext.setXY(897, 496);
            this._btnNext.centerAnchor();
            this._btnNext.set_pointerEnabled(!1);
            B.from(b, { x: "+=425" }, { time: 0.4, ease: D.quintOut });
            B.from(c, { alpha: 0 }, { time: 0.4, ease: D.linear });
            B.from(this._btnBack, { alpha: 0 }, { time: 0.4, ease: D.linear });
            B.delayCallTo(function() { if (null != n.currentCharacter) { var b = a.getIndexByName(n.currentCharacter.name); - 1 < b || (b = 0);
                    a.select(b, !0);
                    a._curButton = a._buttons[b] } else a.select(0), a._curButton = a._buttons[0] }, 0.3, this.owner);
            B.from(this._statbox, { x: "-=500" }, { time: 0.5, ease: D.quintOut, delay: 0.3 });
            B.from(d, { x: "-=500" }, { time: 0.5, ease: D.quintOut, delay: 0.3 });
            b = 0;
            for (c = this._buttons; b < c.length;) d = [c[b]], ++b, B.from(d[0], { scaleX: 0, scaleY: 0, alpha: 0 }, {
                time: 0.5,
                ease: D.backOut,
                delay: 0.6 + 0.06 *
                    d[0].index,
                onComplete: function(a) { return function() { a[0].set_pointerEnabled(!0) } }(d)
            });
            B.delayCallTo(function() { a._btnNext.set_pointerEnabled(!0) }, 1.5, this._btnNext.owner);
            B.from(this._btnNext, { scaleX: 0, scaleY: 0, alpha: 0 }, { time: 0.7, ease: D.quintOut, delay: 1.5, onComplete: function() { a._btnNext.scaleX.set_behavior(new Ea(1, 0.9, 0.7));
                    a._btnNext.scaleY.set_behavior(new Ea(1, 0.9, 0.7)) } })
        },
        select: function(a, b) {
            null == b && (b = !1);
            if (this._canChangeChar) {
                this._canChangeChar = !1;
                var c = this._list[a];
                if (null == c) throw "No data for button" +
                    a;
                if (b || n.currentCharacter != c) {
                    n.currentCharacter = c;
                    var d = n.save.isCharacterLocked(c.name);
                    this._buttons[a].select();
                    this._animate = !1;
                    this._kart.x.set__(-75);
                    if (d) {
                        this._btnNext.set_visible(!1);
                        this._unlockTxt.setAlpha(1);
                        var d = "",
                            e = 0,
                            f = "jelly",
                            c = c.unlocks;
                        null != c.quickMatch ? d = "CHAR_QUICK" : null != c.forFun ? d = "CHAR_FUN" : null != c.allCups ? d = "CHAR_ALL_CUPS" : null != c.games ? (e = y["int"](c.games) - n.save.gamesPlayed, 0 >= e && (e = 1), d = "UNLOCK" + (2 > e ? "" : "S")) : null != c.cup && (d = c.position ? "CHAR_FIRST" : "CHAR_CUP", f = c.cup);
                        this._unlockTxt.setText(d, { x: e, cup: Ga.localize("CUP_" + f.toUpperCase()).text });
                        this._unlockTxt.setAlign(Z.Left)
                    } else this._animate = !0, this._unlockTxt.setAlpha(0), this._btnNext.set_visible(!0), t.play(c.name + "_char_select", "VO");
                    this._kart.initCharacter(n.currentCharacter);
                    this._charName.setText(n.currentCharacter.name.toUpperCase());
                    this._charName.setAlign(Z.Left);
                    this._teamName.setText(n.currentCharacter.team.toUpperCase());
                    this._teamName.setAlign(Z.Left);
                    this._teamLogo.texture = this._pack.getTexture("logo_" +
                        n.currentCharacter.team);
                    null
                }
            }
        },
        animKart: function() { this._canChangeChar = !0;
            this.updateStats();
            this._animate && B.to(this._kart, { x: 250 }, { time: 0.6, ease: D.quintOut }) },
        buildGrid: function() { this._container = (new r).setXY(Rb.Grid.x, Rb.Grid.y);
            this.owner.addChild((new p).add(this._container)); for (var a = 0, b = 0, c = this._list; b < c.length;) { var d = c[b];++b;
                this.addButton(d, a);
                a++ } },
        addButton: function(a, b) {
            var c = n.save.isCharacterLocked(a.name),
                d;
            d = y.string(a.name) + (c ? "_locked" : "");
            d = this.createButton(m(this, this.onButtonClick),
                d);
            d.index = b;
            if (d.data.locked = c) c = A.createImage("lock", this._pack), c.setXY(0, 44), d.owner.addChild((new p).add(c));
            n.save.getCharacterIsNew(a.name) && (n.save.setNewCharacter(a.name, !1), c = this.createImage("icon_new", d.owner), c.setXY(0.5 * d.getNaturalWidth() - 0.5 * c.getNaturalWidth() - 13, 70).set_pointerEnabled(!1), c.setScale(0.6), this.createText("NEW", "15_white", c.owner).setXY(40, 7));
            for (var e = c = 0, f = 0, l = b + 1; f < l;) { var v = f++,
                    h;
                h = 0 == c % 2 ? Rb.Grid.perRowEven : Rb.Grid.perRowOdd;
                v == h + e && (e += h, c++) } e = Math.round((b -
                e) % (0 == c % 2 ? Rb.Grid.perRowEven : Rb.Grid.perRowOdd));
            d.setXY(e * Rb.Grid.spacing.x + c % 2 * Rb.Grid.offsetXOdd, c * Rb.Grid.spacing.y);
            d.set_pointerEnabled(!1);
            this._container.owner.addChild(d.owner);
            this._buttons.push(d)
        },
        onButtonClick: function(a) { a != this._curButton && (null != this._curButton && this._curButton.deselect(), t.play("click", "UI"), this._curButton = a, this.select(this._curButton.index)) },
        getIndexByName: function(a) { for (var b = 0, c = this._list; b < c.length;) { var d = c[b];++b; if (d.name == a) return this._list.indexOf(d) } return -1 },
        onStop: function() { U.prototype.onStop.call(this);
            this._btnBack = this._btnNext = this._container = this._buttons = this._list = null },
        updateStats: function() { var a = oa.getItemsStats(this._kart.container);
            this._statbox.baseStats = [a.speed, a.traction, a.strength];
            this._statbox.update() },
        __class__: Rb
    });
    var pj = function() {
        this._playSound = !0;
        this._itemsPerRow = 4;
        this._itemsPerFirstRow = 3;
        this._itemsPerPageBody = 6;
        this._itemsPerPage = 7;
        this._itemsPage = this._itemsPageCount = 0;
        this._firstButtonCreation = !0;
        this._itemButtons = [];
        this._itemsSpacing = { x: 125, y: 105 };
        this._itemsColumns = 3;
        U.call(this, !1)
    };
    g["game.ui.CustomizeCharacter"] = pj;
    pj.__name__ = ["game", "ui", "CustomizeCharacter"];
    pj.__super__ = U;
    pj.prototype = k(U.prototype, {
        onAdded: function() { U.prototype.onAdded.call(this);
            this.loadAssets("ui_customize");
            t.playMusic("menu") },
        onAssetsReady: function() {
            U.prototype.onAssetsReady.call(this);
            this.createImage("bg");
            var a = this.createImage("menu_box");
            a.setXY(383, 90);
            this._categoriesMenu = this.addSprite((new r).setXY(67, 0), a.owner);
            var b =
                A.createImage("title_box");
            b.setXY(536, 38);
            this.owner.addChild((new p).add(b));
            var c = C.getLocalizedTextSprite("CUSTOMIZE_TITLE", "30_black");
            c.setXY(48, 12);
            c.setAlign(Z.Left);
            b.owner.addChild((new p).add(c));
            c = this.createImage("player_name_box");
            c.setXY(0, 88);
            this.createText(n.currentCharacter.name.toUpperCase(), "23_white_shadow", c.owner).setXY(250, 12);
            this._itemsGrid = this.addSprite((new r).setXY(437, 206));
            this.createCharacter();
            this._btnBack = this.createButton(m(this, this.onBackClick), "btn_back");
            this._btnBack.setXY(50, 50);
            this._btnBack.centerAnchor();
            this._btnNext = this.createButton(m(this, this.onNextClick), "btn_check");
            this._btnNext.setXY(897, 496);
            this._btnNext.centerAnchor();
            this._statbox = new Vd;
            this._statbox.labels = ["SPEED", "TRACTION", "STRENGTH"];
            this._statbox.xOffset = 147;
            this._statbox.setXY(0, 450);
            this.addSprite(this._statbox);
            this.addSoundBtn();
            B.from(b, { x: "+=425" }, { time: 0.6, delay: 0.2, ease: D.quintOut });
            B.from(a, { x: "+=600" }, { time: 0.7, delay: 0.5, ease: D.quintOut });
            B.from(c, { x: "-=600" }, {
                time: 0.7,
                delay: 0.5,
                ease: D.quintOut
            });
            B.from(this._kart, { x: "-=475" }, { time: 0.6, delay: 0.8, ease: D.quintOut });
            B.from(this._statbox, { x: "-=475" }, { time: 0.6, delay: 0.8, ease: D.quintOut });
            B.delayCallTo(m(this, this.animateButton), 1, this.owner)
        },
        animateButton: function() { var a = xe.clone(this._itemButtons);
            a.sort(m(this, this.buttonAnimSort)); for (var b = 0, a = a.length; b < a;) { var c = b++;
                B.to(this._itemButtons[c], { scaleX: 1, scaleY: 1 }, { time: 0.5, delay: 0.05 * c, ease: D.backOut }) } },
        onBackClick: function() {
            T.trackUI("Back", "Cool Stuff");
            t.play("click",
                "UI");
            N.change(n.customizeFrom)
        },
        onNextClick: function() { this._kart.save();
            t.play("click", "UI"); "selectmode" == n.customizeFrom ? (T.trackUI("Back", "Cool Stuff"), N.change(n.customizeFrom)) : n.isTournament ? (T.trackUI("Select Level", "Cool Stuff"), N.change("SelectLevel")) : this.owner.addChild((new p).add(new bh(function() { T.trackUI("Gameplay", "Cool Stuff");
                n.currentLevel = Za.getRandom();
                N.change("GameplayLoading") }))) },
        createCharacter: function() {
            this._kart = new yf;
            this._kart.setXY(300, 425).setScale(0.75);
            this._disposer.add(this._kart.onReady.connect(m(this,
                this.updateStats)));
            this.addSprite(this._kart);
            this._kart.initCharacter(n.currentCharacter);
            this._kart.onReady.connect(m(this, this.onInventoryReady)).once()
        },
        onInventoryReady: function() { this.buildItemsGrid();
            this.buildCategoriesMenu() },
        buildCategoriesMenu: function() {
            var a = 0,
                b = [];
            this._categoryHighlight = A.createImage("category_highlight", this._pack);
            this._categoryHighlight.setXY(0, 12);
            this._categoriesMenu.owner.addChild((new p).add(this._categoryHighlight));
            this._categoryHighlight.alpha.set_behavior(new Ea(0.5,
                1, 0.3));
            for (var c = 0, d = $c.ALTERABLE; c < d.length;) { var e = d[c];++c; var f = this.createButton(m(this, this.onCategoryClick), "btn_" + e, e.toUpperCase(), "15_white", this._categoriesMenu.owner);
                f.data = e;
                f.label.setAlign(Z.Center).setAnchor(0, 0).setXY(40, 53);
                f.setXY(100 * a++, 0);
                b.push(f) } this.onCategoryClick(b[0])
        },
        onCategoryClick: function(a) {
            t.play("click", "UI");
            this._currentCategoryBtn != a && (null != this._currentCategoryBtn && this._currentCategoryBtn.deselect(), this._currentCategoryBtn = a, this._categoryHighlight.x.set__(a.x._value),
                a.select(), this.setItemsCategory(a.data))
        },
        buildItemsGrid: function() { this._itemsPrevious = this.createButton(m(this, this.onItemPreviousClick), "btn_arrow", null, null, null, this._pack);
            this._itemsPrevious.setXY(455, 310);
            this._itemsPrevious.centerAnchor(); var a = this._itemsPrevious.scaleX;
            a.set__(-1 * a._value);
            this.owner.addChild(this._itemsPrevious.owner);
            this._itemsNext = this.createButton(m(this, this.onItemNextClick), "btn_arrow", null, null, null, this._pack);
            this._itemsNext.centerAnchor().setXY(895, 310);
            this.owner.addChild(this._itemsNext.owner) },
        setItemsCategory: function(a) { this._itemsCategory = a;
            this._itemsInCategory = fa.getByType(a);
            this._itemsInCategory = oa.filterItems(this._itemsInCategory);
            this._itemsPage = 0;
            this._itemsPageCount = null == this._itemsInCategory ? 0 : Math.ceil(this._itemsInCategory.length / ("body" == this._itemsCategory ? this._itemsPerPageBody : this._itemsPerPage));
            this.loadItemsGridPage() },
        onItemNextClick: function() { t.play("click", "UI");
            this._currentItemBtn = null;
            this._itemsPage = qb.min(this._itemsPageCount - 1, this._itemsPage + 1);
            this.loadItemsGridPage() },
        onItemPreviousClick: function() { t.play("click", "UI");
            this._currentItemBtn = null;
            this._itemsPage = qb.max(0, this._itemsPage - 1);
            this.loadItemsGridPage() },
        loadItemsGridPage: function() {
            this._itemsGrid.owner.disposeChildren();
            this._itemButtons.splice(0, this._itemButtons.length);
            var a = [];
            this._itemsInPage = [];
            if (null != this._itemsInCategory) {
                var b, c = b = this._itemsPage * ("body" == this._itemsCategory ? this._itemsPerPageBody : this._itemsPerPage);
                for (b += "body" == this._itemsCategory ? this._itemsPerPageBody : this._itemsPerPage; c <
                    b;) { var d = this._itemsInCategory[c++]; if (null == d) break; for (var e = 0, f = d.parts; e < f.length;) { var l = f[e];++e;
                        null != l.url && a.push(l.url) } this._itemsInPage.push(d) } this._itemsGridPackName = "itemsGrid_" + this._itemsCategory + "_" + this._itemsPage;
                E.disposePack(this._itemsGridPackName)
            }
            this.buildItemsGridPage()
        },
        buildItemsGridPage: function() {
            var a = 0,
                b = 0,
                c = 0,
                d = 0;
            this._buttonContainer = new p;
            this._itemsGrid.owner.addChild(this._buttonContainer);
            this._itemContainer = new p;
            this._itemsGrid.owner.addChild(this._itemContainer);
            for (var e = c = 0, f = this._itemsInPage; e < f.length;) { var l = f[e];++e; var v = 0,
                    h = n.save.isLootUnlocked(n.currentCharacter.name, l.id);
                2 < a ? (b = this._itemsPerFirstRow, c = this._itemsPerRow, d = this._itemsSpacing.y) : (v = 53, c = this._itemsPerFirstRow, d = Math.floor(a / this._itemsColumns) * this._itemsSpacing.y);
                c = Math.round(a - b % c) * this._itemsSpacing.x + v;
                d = this.createItemButton(l, c, d, h);
                this._kart.getItem(this._itemsCategory) == l.id && (d.select(), this._currentItemBtn = d);
                a++ } this._firstButtonCreation ? this._firstButtonCreation = !1 : this.animateButton();
            0 < this._itemsPage ? (this._itemsPrevious.set_visible(!0), this._itemsPrevious.x.set_behavior(new Ea(450, 455, 0.35))) : this._itemsPrevious.set_visible(!1);
            this._itemsPage < this._itemsPageCount - 1 ? (this._itemsNext.set_visible(!0), this._itemsNext.x.set_behavior(new Ea(900, 895, 0.35))) : this._itemsNext.set_visible(!1)
        },
        createItemButton: function(a, b, c, d) {
            var e = "btn_item";
            d || (e += "_locked");
            null == a.parts[0].url && (e = "btn_unequip", d = !0);
            e = this.createButton(m(this, this.onItemClick), e, null, "buttons",
                this._buttonContainer);
            e.setScale(0);
            e.setXY(b, c);
            this._itemButtons.push(e);
            if (0 < a.parts.length && null != a.parts[0].url && (e.getNaturalWidth(), e.getNaturalHeight(), null != a.mainStat && (b = A.createImage("bg_" + y.string(a.mainStat), this._pack), b.setXY(14, 15), e.owner.addChild((new p).add(b))), b = a.parts[0].url.split("/"), b = this.createImage(b[b.length - 1], e.owner, this._pack), b.set_pointerEnabled(!1), b.centerAnchor(), b.setXY(0.5 * e.getNaturalWidth(), 0.5 * e.getNaturalHeight()), d || (b = A.createImage("lock", this._pack),
                    b.setXY(14, 45), e.owner.addChild((new p).add(b))), n.save.getNewLoot(n.currentCharacter.name, a.id))) { b = 0; for (c = G.list; b < c.length;) { var f = c[b];++b;
                    n.save.setNewLoot(f.name, a.id, !1) } b = this.createImage("icon_new", e.owner);
                b.setXY(0.5 * e.getNaturalWidth() - 0.5 * b.getNaturalWidth(), 80).set_pointerEnabled(!1);
                this.createText("NEW", "15_white", b.owner).setXY(40, 7) } d || (e.disable(), e.set_pointerEnabled(!1));
            e.data = a;
            return e
        },
        onItemClick: function(a) {
            null != this._currentItemBtn && this._currentItemBtn.deselect();
            a.select();
            this._currentItemBtn = a;
            this._kart.equipItem(a.data, this._itemsCategory);
            this._itemStats = a.data.stats;
            this.updateStats();
            t.play("click", "UI");
            this._playSound && t.play("equip_item", "SFX")
        },
        updateStats: function() {
            if (null != this._kart.container) {
                var a = oa.getItemsStats(this._kart.container);
                null == this._itemStats ? (this._statbox.baseStats = [a.speed, a.traction, a.strength], this._statbox.addedStats = []) : (this._statbox.baseStats = [a.speed - this._itemStats.speed | 0, a.traction - this._itemStats.traction | 0, a.strength - this._itemStats.strength |
                    0
                ], this._statbox.addedStats = [this._itemStats.speed, this._itemStats.traction, this._itemStats.strength]);
                this._statbox.update()
            }
        },
        buttonAnimSort: function(a, b) { return a.x._value < b.x._value ? -1 : a.x._value > b.x._value ? 1 : 0 },
        __class__: pj
    });
    var rd = function() { this._frameX = 0;
        this._frames = [];
        this._buttons = [];
        this._list = Za.LIST;
        U.call(this, !1) };
    g["game.ui.SelectLevel"] = rd;
    rd.__name__ = ["game", "ui", "SelectLevel"];
    rd.onBackClick = function() {
        T.trackUI("Back", "Select Character");
        N.change("SelectCharacter");
        t.play("click",
            "UI")
    };
    rd.__super__ = U;
    rd.prototype = k(U.prototype, {
        onAdded: function() { U.prototype.onAdded.call(this);
            this.loadAssets("ui_level") },
        onAssetsReady: function() {
            U.prototype.onAssetsReady.call(this);
            this.createImage("bg");
            var a = A.createImage("title_box");
            a.setXY(536, 38);
            this.owner.addChild((new p).add(a));
            var b = C.getLocalizedTextSprite("LEVEL_TITLE", "30_black");
            b.setXY(48, 12);
            b.setAlign(Z.Left);
            a.owner.addChild((new p).add(b));
            this.buildGrid();
            this.createButton(rd.onBackClick, "btn_back", null, null, null, E.getPack("ui")).setXY(50,
                50);
            this._btnPlay = this.createButton(m(this, this.onNextClick), "btn_resume", null, null, null, E.getPack("ui"));
            this._btnPlay.setXY(897, 496);
            this._btnPlay.centerAnchor();
            this._btnTuto = this.createButton(m(this, this.onTuto), "btn_htp");
            this._btnTuto.setXY(100, 450);
            this._index = this.getIndexByCupName(n.currentCup);
            this.select(this._buttons[0])
        },
        onNextClick: function() {
            null != n.currentLevel && this.owner.addChild((new p).add(new bh(function() {
                T.trackPlayButton();
                t.play("click", "UI");
                n.setNewOpponents();
                n.resetCupPositions();
                T.trackUI("Gameplay", "Select Level");
                N.change("GameplayLoading")
            })))
        },
        select: function(a) { var b = a.data.name; if (null == b) throw "No data for button" + y.string(a); var c = n.save.isCupLocked(b);
            null != this._currentFrame && (this._currentFrame.texture = this._pack.getTexture("frame"));
            c ? n.currentLevel = null : (this._currentFrame = this._frames[a.data.index].frame, this._currentFrame.texture = this._pack.getTexture("frame_selected", !0), n.currentCup = b, n.currentLevel = this._list.get(b)[0], null) },
        buildGrid: function() {
            this._container =
                (new r).setXY(rd.Grid.x, rd.Grid.y);
            this.owner.addChild((new p).add(this._container));
            for (var a = 0, b = this._list.keys(); b.hasNext();) this.addButton(b.next(), a), a++
        },
        addButton: function(a, b) {
            var c = n.save.isCupLocked(a),
                d = new r;
            this._container.owner.addChild((new p).add(d), !1);
            var e = $a.createImageButton("bg_" + a, m(this, this.select), "ui_level", { image: { autoCenter: !1 } });
            e.setXY(25, 5);
            e.data = { name: a, index: b };
            d.owner.addChild(e.owner);
            this._buttons.push(e);
            e = "frame";
            if (c) {
                var f = A.createImage("img_locked", this._pack);
                f.setXY(25, 5);
                d.owner.addChild((new p).add(f));
                e += "_locked"
            }
            e = A.createImage(e, this._pack);
            e.setXY(0, 0);
            e.set_pointerEnabled(!1);
            d.owner.addChild((new p).add(e));
            c && (c = A.createImage("lock", this._pack), c.setXY(128, 40), c.set_pointerEnabled(!1), e.owner.addChild((new p).add(c)));
            c = A.createImage(a, this._pack);
            c.setXY(65, 100);
            c.centerAnchor();
            c.set_pointerEnabled(!1);
            e.owner.addChild((new p).add(c));
            c = A.createImage("text_box", this._pack);
            c.setXY(-5, 121);
            e.owner.addChild((new p).add(c));
            f = this.createText("CUP_" +
                a.toUpperCase(), "23_white_shadow", c.owner);
            f.setWrapWidth(210);
            f.setAlign(Z.Left).setXY(40, 0);
            f = n.save.cupsProgress;
            f.exists(a) && 0 < f.get(a) && this.createText("LEVEL_POSITION_" + f.get(a), "15_orange", c.owner, { n: b + 1 }).setAlign(Z.Left).setXY(40, 44);
            d.setXY(this._frameX, 0 == b % 2 ? 0 : rd.Grid.spacing.y);
            this._frameX = 0 == b % 2 ? this._frameX + rd.Grid.spacing.oddX : this._frameX + rd.Grid.spacing.evenX;
            this._frames.push({ spriteX: d.x._value, frame: e })
        },
        onStop: function() {
            U.prototype.onStop.call(this);
            this._currentFrame = this._btnPrev =
                this._btnNext = this._container = this._frames = this._list = null
        },
        getIndexByCupName: function(a) { for (var b = 0, c = this._list.keys(); c.hasNext() && !(c.next() == a);) b++; return b },
        onTuto: function() { T.trackUI("Tutorial", "Select Level");
            t.play("click", "UI");
            n.currentLevel = "tuto1";
            N.change("GameplayLoading") },
        __class__: rd
    });
    var qj = function() { U.call(this) };
    g["game.ui.Gameplay"] = qj;
    qj.__name__ = ["game", "ui", "Gameplay"];
    qj.__super__ = U;
    qj.prototype = k(U.prototype, {
        onAdded: function() {
            this._gameEntity = new p;
            this._gameEntity.add(new r);
            this._gameSystem = new ch;
            this._gameEntity.add(this._gameSystem);
            this.owner.addChild(this._gameEntity);
            this.owner.addChild(this._gameSystem.hud.container)
        },
        onRemoved: function() { U.prototype.onRemoved.call(this); if (0 != n.cheatsForFun.length) { for (var a = 0, b = n.cheatsForFun; a < b.length;) { var c = b[a];++a;
                    ua.cease(c) } n.cheatsForFun = [] } },
        __class__: qj
    });
    var rj = function() { Ib.call(this) };
    g["game.ui.GameplayLoading"] = rj;
    rj.__name__ = ["game", "ui", "GameplayLoading"];
    rj.__super__ = Ib;
    rj.prototype = k(Ib.prototype, {
        dispose: function() { Ib.prototype.dispose.call(this) },
        onAssetsReady: function() {
            Ib.prototype.onAssetsReady.call(this);
            (!n.isTournament || "tuto1" == n.currentLevel || "tuto2" == n.currentLevel) && n.setNewOpponents();
            if (n.isForFun) { var a = xe.getRandomElement(Q.forFunMiscCheats);
                n.cheatsForFun.push(a);
                0.5 <= Math.random() && (a = xe.getRandomElement(Q.forFunItemCheats), n.cheatsForFun.push(a)); for (var a = 0, b = n.cheatsForFun; a < b.length;) { var c = b[a];++a;
                    ua.apply(c) } } a = Za.get(n.currentLevel);
            b = a.getPacks();
            n.env = a.env;
            this._tips = new sj;
            this._tips.setXY(Q.width / 2, 480);
            this.addSprite(this._tips,
                this.owner);
            this.load(b, m(this, this.onPacksLoaded))
        },
        onPacksLoaded: function() { N.change("gameplay") },
        __class__: rj
    });
    var tj = function() { U.call(this, !1) };
    g["game.ui.Pause"] = tj;
    tj.__name__ = ["game", "ui", "Pause"];
    tj.__super__ = U;
    tj.prototype = k(U.prototype, {
        onAdded: function() { U.prototype.onAdded.call(this);
            this.loadAssets("ui_pause") },
        onAssetsReady: function() {
            this.owner.add(new ya(this.getTexture("bg")));
            var a = A.createImage("box", this._pack);
            a.setXY(0, 177);
            this.owner.addChild((new p).add(a));
            this.createText("PAUSE_TITLE",
                "23_white_shadow", a.owner).setAlign(Z.Left).setXY(290, 48);
            var b = this.createButton(m(this, this.onResume), "btn_resume").setXY(514, 50);
            a.owner.addChild(b.owner);
            this.addSoundBtn(a.owner).setXY(435, 78);
            b = this.createButton(m(this, this.onHelp), "btn_htp").setXY(355, 78);
            a.owner.addChild(b.owner);
            b = this.createButton(m(this, this.onQuit), "btn_quit").setXY(275, 78);
            a.owner.addChild(b.owner);
            B.from(a, { x: "-=300" }, { time: 0.2, ease: D.quadOut })
        },
        onResume: function() { T.trackUI("Resume", "Pause");
            t.play("click", "UI");
            N.pop() },
        onHelp: function() { T.trackUI("Help", "Pause");
            t.play("click", "UI");
            N.push("Help") },
        onQuit: function() { T.trackUI("Quit", "Pause");
            t.play("click", "UI");
            this.owner.addChild((new p).add(new uj)) },
        __class__: tj
    });
    var vj = function() {
        this._pagesData = [{ label: "HELP_1", asset: "lanes", mobile: !0, position: { x: 0, y: 0 } }, { label: "HELP_2", asset: "jump", mobile: !0, position: { x: 0, y: 0 } }, { label: "HELP_3", asset: "accelerate", mobile: !0, position: { x: 0, y: 0 } }, { label: "HELP_4", asset: "use_item", mobile: !0, position: { x: 0, y: 0 } }, {
            label: "HELP_5",
            asset: "speed_boost",
            mobile: !1,
            position: { x: 0, y: 0 }
        }, { label: "HTP_4", asset: "obstacles", mobile: !1, position: { x: 0, y: 0 } }, { label: "HTP_9", asset: "lanes_bump", mobile: !1, position: { x: 0, y: 0 } }, { label: "HTP_10", asset: "hop_bump", mobile: !1, position: { x: 0, y: 0 } }, { label: "HELP_6", asset: "pickups", mobile: !1, position: { x: 0, y: 0 } }];
        this._currentPage = 0;
        U.call(this, !1)
    };
    g["game.ui.Help"] = vj;
    vj.__name__ = ["game", "ui", "Help"];
    vj.__super__ = U;
    vj.prototype = k(U.prototype, {
        onAdded: function() { U.prototype.onAdded.call(this);
            this.loadAssets("ui_help") },
        onAssetsReady: function() {
            var a = this,
                b = new Wa(0, Q.width, Q.height);
            b.setAlpha(0.5);
            this.owner.addChild((new p).add(b));
            var c = new ya(this.getTexture("box"));
            c.setXY(117, 115);
            this.owner.addChild((new p).add(c));
            this._image = A.createImage(this._pagesData[this._currentPage].asset, this._pack);
            this._image.setXY(0, 0);
            c.owner.addChild((new p).add(this._image));
            this._text = C.getLocalizedTextSprite("", "23_white_shadow");
            this._text.setXY(0.5 * c.getNaturalWidth() + -200, 260);
            this._text.setWrapWidth(400);
            c.owner.addChild((new p).add(this._text));
            this._btnQuit = this.createButton(m(this, this.onQuit), "btn_quit", null, null, c.owner);
            this._btnQuit.setXY(675, -35);
            this._arrowPrev = this.createButton(m(this, this.onPrev), "btn_prev", null, null, c.owner, this._pack);
            this._arrowPrev.setXY(40, 270);
            this._arrowNext = this.createButton(m(this, this.onNext), "btn_next", null, null, c.owner, this._pack);
            this._arrowNext.setXY(626, 270);
            B.from(b, { alpha: 0 }, { time: 0.7 }, D.quadOut);
            B.from(c, { alpha: 0 }, { time: 0.7 }, D.quadOut);
            B.from(this._arrowPrev, { x: "-=100", alpha: 0 }, { time: 0.35, delay: 0.6 },
                D.quadIn);
            B.from(this._arrowNext, { x: "+=100", alpha: 0 }, { time: 0.35, delay: 0.6, onComplete: function() { a._arrowPrev.x.set_behavior(new Ea(40, 45, 0.35));
                    a._arrowNext.x.set_behavior(new Ea(631, 626, 0.35)) } }, D.quadIn);
            U.prototype.onAssetsReady.call(this);
            this.updateContent()
        },
        onRemoved: function() { U.prototype.onRemoved.call(this) },
        onPrev: function() { t.play("click", "UI");
            this._currentPage--;
            this.updateContent() },
        onNext: function() { t.play("click", "UI");
            this._currentPage++;
            this.updateContent() },
        updateContent: function() {
            var a;
            a = o.mobile && this._pagesData[this._currentPage].mobile ? "_M" : "";
            this._image.texture = this._pack.getTexture(this._pagesData[this._currentPage].asset + a.toLowerCase());
            this._text.setText(this._pagesData[this._currentPage].label + a);
            this._arrowPrev.set_visible(0 < this._currentPage);
            this._arrowNext.set_visible(this._currentPage < this._pagesData.length - 1)
        },
        onQuit: function() { t.play("click", "UI");
            N.pop() },
        __class__: vj
    });
    var ad = function() { this._posBoxes = new Fa;
        U.call(this, !1) };
    g["game.ui.GameplayWin"] = ad;
    ad.__name__ = ["game", "ui", "GameplayWin"];
    ad.__super__ = U;
    ad.prototype = k(U.prototype, {
        onAdded: function() { U.prototype.onAdded.call(this);
            this.loadAssets("ui_win") },
        onAssetsReady: function() {
            var a = n.hasWon;
            U.prototype.onAssetsReady.call(this);
            t.playMusic("menu");
            n.save.addGame();
            this.createImage("bg");
            a ? (this._backConfettis = this.buildConfettiBG(), t.play(n.currentCharacter.name + "_win", "VO")) : t.play(n.currentCharacter.name + "_lose", "VO");
            this._titleBg = this.createImage("title_box");
            this._titleBg.setXY(0, 30);
            var b = C.getLocalizedTextSprite("WIN_TITLE",
                "23_white_shadow");
            b.setXY(67, 16);
            b.setAlign(Z.Left);
            this._titleBg.owner.addChild((new p).add(b));
            b = A.createImage("ranking_box", this._pack);
            b.setXY(0, 80);
            this.owner.addChild((new p).add(b));
            var c = C.getLocalizedTextSprite("LEVEL_POSITION_" + n.position, "40_orange");
            c.setXY(67, 16);
            c.setAlign(Z.Left);
            b.owner.addChild((new p).add(c));
            this.buildPosGrid();
            this._kart = new yf("idle", a ? "happy" : "sad");
            this._kart.setXY(750, 480);
            this._kart.setScale(0.6);
            this.addSprite(this._kart);
            this._kart.initCharacter(n.currentCharacter);
            a && (this._frontConfettis = this.buildConfettiBG());
            c = A.createImage("title_box", E.getPack("ui"));
            c.setXY(537, 38);
            this.owner.addChild((new p).add(c));
            var d = C.getLocalizedTextSprite("WIN_TIME", "23_black", null, null, { x: this.parseTime(n.currentTime) });
            d.setXY(67, 15);
            d.setAlign(Z.Left);
            c.owner.addChild((new p).add(d));
            if (n.isTournament) {
                var e = n.currentCup,
                    d = A.createImage("icon_" + e, this._pack);
                d.setXY(936, 150);
                d.setAnchor(d.getNaturalWidth(), 0.5 * d.getNaturalHeight());
                this.owner.addChild((new p).add(d));
                var f =
                    Za.getLvlIndexByName(e, n.currentLevel),
                    e = C.getLocalizedTextSprite("WIN_CUP_RACE", "23_black", null, null, { num: f + 1 + " ", denom: " " + Za.LIST.get(e).length });
                e.setXY(-40, 6);
                e.setAlign(Z.Right);
                d.owner.addChild((new p).add(e));
                B.from(d, { x: "+=537" }, { time: 0.4, delay: 0.2 }, D.quadIn)
            }
            this.addSoundBtn();
            this._btnNext = this.createButton(m(this, this.onClick), "btn_resume", null, null, null, E.getPack("ui")).setXY(896, 496).centerAnchor();
            this.owner.addChild(this._btnNext.owner);
            this.makeNewPopup();
            d = this._kart.container._compMap.CustomizationComponent_18;
            if (d.isLoaded) this.track();
            else d.onInventoryReady.connect(m(this, this.track)).once();
            B.from(this._kart, { x: -100 }, { time: 0.6 }, D.quadOut);
            B.from(this._titleBg, { x: -this._titleBg.getNaturalWidth() }, { time: 0.4, delay: 0.2 }, D.quadIn);
            B.from(c, { x: 960 }, { time: 0.4, delay: 0.2 }, D.quadIn);
            for (var c = n.positions.length, d = 0, e = 1, f = 0, l = this._posBoxes.keys(); l.hasNext();) {
                var v = l.next(),
                    h;
                h = v.x._value == ad.Grid.x ? "-=" : "+=";
                var g = 0.6 + 0.4 * Math.abs(d - c) * e;
                B.from(v, { alpha: 0, x: h + 70 }, { time: 0.4, delay: g, ease: D.quintIn });
                this._posBoxes.h[v.__id__].isPlayer &&
                    (f = g);
                d++;
                e *= 0.8
            }
            B.from(b, { x: -b.getNaturalWidth() }, { time: 0.4, delay: f }, D.quadIn);
            a && B.delayCallTo(m(this, this.showConfettis), 0.4, this.owner);
            this._popup.isBuilt && (B.delayCallTo((Ra = this._popup, m(Ra, Ra.animate)), 1.2, this.owner), this._kart.onReady.connect((Ra = this._popup, m(Ra, Ra.updateStats))).once())
        },
        showConfettis: function() { this._backConfettis.start();
            this._frontConfettis.start() },
        onStop: function() {
            U.prototype.onStop.call(this);
            this._disposer.dispose();
            this._frontConfettis = this._backConfettis = this._kart =
                this._bump = this._item = this._time = this._statBg = this._titleBg = this._btnNext = this._btnBack = this._disposer = null
        },
        buildPosGrid: function() {
            for (var a = 0, b = 0, c = n.positions; b < c.length;) {
                var d = c[b];
                ++b;
                var e = Math.floor(a / ad.Grid.perColumn),
                    f = Math.round(a % ad.Grid.perColumn),
                    l = new zf;
                l.setXY(ad.Grid.x + e * ad.Grid.spacing.x, ad.Grid.y + f * ad.Grid.spacing.y);
                this.owner.addChild((new p).add(l));
                e = a + 1;
                l.updatePosition(e);
                l.updateFace(d.name);
                this.updateCharPosition(d.name, e);
                d.isPlayer || l.updateNumFont(C.getFontStyle("40_white_shadow"));
                this._posBoxes.set(l, d);
                a++
            }
        },
        onChange: function(a) { n.currentCharacter = G.getDataByName(a);
            this.closePopup(!1);
            T.trackUI("Select Character", "Unlock Popup");
            N.change("SelectCharacter") },
        onEquip: function(a) { n.save.setLoot(n.currentCharacter.name, a.id);
            this._kart.equipItem(a, a.type, !0);
            this.closePopup(!1) },
        closePopup: function(a) { this._popup.owner.dispose();
            this._popup = null;
            a && this.makeNewPopup(!0) },
        makeNewPopup: function(a) {
            null == a && (a = !1);
            this._popup = new dh(null, this._kart);
            this._disposer.add(this._popup.onChange.connect(m(this,
                this.onChange)).once());
            this._disposer.add(this._popup.onEquip.connect(m(this, this.onEquip)).once());
            this._disposer.add(this._popup.onClose.connect(m(this, this.closePopup)).once());
            this.addSprite(this._popup);
            this._popup.isBuilt && a && this._popup.animate()
        },
        onClick: function() {
            t.play("click", "UI");
            if (n.isTournament) {
                var a = n.currentCup,
                    b = Za.getLvlIndexByName(a, n.currentLevel);
                b == Za.LIST.get(a).length - 1 ? (T.trackUI("Tournament End", "Match End"), N.change("End")) : (T.trackUI("Next Level", "Match End"), n.currentLevel =
                    Za.LIST.get(a)[b + 1], N.change("GameplayLoading"))
            } else T.trackUI("Select Character", "Match End"), N.change("SelectCharacter")
        },
        buildConfettiBG: function() { var a = new eh(Q.width, Q.height);
            a.autoStart = !1;
            a.maxCount = 80;
            a.startSpreadY = 0.3;
            a.speed.set__(2);
            a.speed.animateTo(1, 2);
            a.width = 0.4 * Q.width;
            a.centerX = 675;
            this.owner.addChild((new p).add(a)); return a },
        parseTime: function(a) { var b = Math.floor(a / 60),
                a = Math.floor(a - 60 * b); return (9 < b ? null == b ? "null" : "" + b : "" + b) + " : " + (9 < a ? null == a ? "null" : "" + a : "0" + a) },
        updateCharPosition: function(a,
            b) { var c = n.currentCupPositions,
                d = b; if (c.exists(a)) var e = c.get(a),
                d = d + e;
            c.set(a, d) },
        track: function() { var a = "NONE",
                b = n.currentCup; if (Za.getLvlIndexByName(b, n.currentLevel) == Za.LIST.get(b).length - 1) { for (var b = this.getFinalPositions(), c = -1, d = 0; 3 > d;) { var e = d++; if (b[e].isPlayer) { c = e; break } } switch (c) {
                    case 0:
                        a = "GOLD"; break;
                    case 1:
                        a = "SILVER"; break;
                    case 2:
                        a = "BRONZE" } } n.isTournament || (a = "NONE");
            T.trackMatchSummary(this._kart.container._compMap.CustomizationComponent_18.inventory, a) },
        getFinalPositions: function() {
            for (var a =
                    n.currentCupPositions, b = n.currentCharacter.name, c = [], d = a.keys(); d.hasNext();) { var e = d.next(),
                    e = { name: e, pos: a.get(e), isPlayer: e == b };
                c.push(e) } c.sort(m(this, this.sortOrder));
            return c
        },
        sortOrder: function(a, b) { var c = a.pos,
                d = b.pos; return c == d ? 0 : c > d ? 1 : -1 },
        __class__: ad
    });
    var kg = function() { this._silverScissorX = new ca(0);
        this._bronzeScissorX = new ca(0);
        this._curCup = n.currentCup;
        U.call(this, !1) };
    g["game.ui.GameplayEnd"] = kg;
    kg.__name__ = ["game", "ui", "GameplayEnd"];
    kg.onClick = function() {
        T.trackUI("Select Level",
            "Tournament End");
        t.play("click", "UI");
        N.change("SelectLevel")
    };
    kg.__super__ = U;
    kg.prototype = k(U.prototype, {
        onAdded: function() { U.prototype.onAdded.call(this);
            this.loadAssets("ui_end");
            t.playMusic("menu", !0) },
        onAssetsReady: function() {
            var a = this;
            this.unlockNext();
            var b = this.getFinalPositions();
            n.finalPosition = b;
            for (var c = !1, d = "sad", e = n.currentCharacter.name, f = 1, l = 0; 3 > l;) { var v = l++; if (b[v].isPlayer) { c = !0; break } } this.createImage("bg");
            l = A.createImage("title_box", this._pack);
            l.setXY(0, 38);
            this.owner.addChild((new p).add(l));
            l = this.createText("END_TITLE", "65_white_shadow", l.owner);
            l.setAlign(Z.Left);
            l.setScale(0.8);
            l.setXY(44, 18);
            this.addSoundBtn();
            if (c) {
                var d = "happy",
                    e = b[0].name,
                    f = 0,
                    h = new zf;
                h.setXY(108, 316);
                this.owner.addChild((new p).add(h));
                h.updatePosition(3);
                h.updateFace(b[2].name);
                var g = r.getBounds(h.owner).width,
                    v = r.getBounds(h.owner).height;
                this._bronzeScissor = h.scissor = new Na(g, 0, g, v);
                this._bronzeScissorX.set__(g);
                l = A.createImage("cup_3", this._pack);
                l.setXY(41, 236);
                this.owner.addChild((new p).add(l));
                var i =
                    new zf;
                i.setXY(190, 236);
                this.owner.addChild((new p).add(i));
                i.updatePosition(2);
                i.updateFace(b[1].name);
                this._silverScissor = i.scissor = new Na(g, 0, g, v);
                this._silverScissorX.set__(g);
                b = A.createImage("cup_2", this._pack);
                b.setXY(121, 156);
                this.owner.addChild((new p).add(b));
                this._backConfettis = this.buildConfettiBG();
                B.from(l, { y: "-=350" }, { time: 0.7, delay: 0.1, ease: D.bounceOut, onComplete: function() { B.from(h, { x: "-=" + g }, { time: 0.25, ease: D.quadOut });
                        a._bronzeScissorX.animateTo(0, 0.25, D.quadOut) } });
                B.from(b, { y: "-=350" }, { time: 0.7, delay: 0.5, ease: D.bounceOut, onComplete: function() { B.from(i, { x: "-=" + g }, { time: 0.25, ease: D.quadOut });
                        a._silverScissorX.animateTo(0, 0.25, D.quadOut) } })
            }
            this._kart = new yf("drive", d);
            this._kart.setXY(800, 450).setScale(0.8);
            this.addSprite(this._kart);
            this._kart.initCharacter(G.getDataByName(e));
            c && (d = A.createImage("cup_1_" + this._curCup, this._pack), d.setXY(374, 468), d.setAnchor(0, d.getNaturalHeight()), this.owner.addChild((new p).add(d)), B.from(d, { y: 0 }, { time: 1, delay: 1.8, ease: D.bounceOut }));
            d = A.createImage("tip_box",
                this._pack);
            d.setXY(0, 453);
            this.owner.addChild((new p).add(d));
            c = C.getLocalizedTextSprite("END_TXT_" + (c ? "WIN" : "LOSE"), "20_white");
            c.setAlign(Z.Left);
            c.setWrapWidth(500);
            c.setXY(44, 30);
            d.owner.addChild((new p).add(c));
            c = A.createImage("unlocked_items_box", this._pack);
            c.setXY(0, 412);
            this.owner.addChild((new p).add(c));
            e = C.getLocalizedTextSprite("END_LOOT", "23_black", null, null, { owned: n.save.getLoot(G.list[0].name).length, total: fa.getAll().length - 3 });
            e.setAlign(Z.Left);
            e.setXY(44, 20);
            c.owner.addChild((new p).add(e));
            e = this.createButton(kg.onClick, "btn_resume", null, null, null, E.getPack("ui")).setXY(897, 474).centerAnchor();
            this.owner.addChild(e.owner);
            this.makeNewPopup();
            e.scaleX.set_behavior(new Ea(1, 1.2, 0.4));
            e.scaleY.set_behavior(new Ea(1, 1.2, 0.4));
            B.from(this._kart, { x: -100 }, { time: 0.7, delay: 1.5 - f }, D.quadOut);
            B.from(c, { x: -d.getNaturalWidth() }, { time: 0.7, delay: 2.4 - f }, D.quintOut);
            B.from(d, { x: -d.getNaturalWidth() }, { time: 0.7, delay: 2.4 - f }, D.quintOut);
            this._popup.isBuilt && B.delayCallTo((Ra = this._popup, m(Ra, Ra.animate)),
                2.7 - f, this.owner);
            U.prototype.onAssetsReady.call(this)
        },
        onUpdate: function(a) { U.prototype.onUpdate.call(this, a);
            null != this._bronzeScissor && (this._bronzeScissorX.update(a), this._bronzeScissor.x = this._bronzeScissorX._value);
            null != this._silverScissor && (this._silverScissorX.update(a), this._silverScissor.x = this._silverScissorX._value) },
        unlockNext: function() {
            var a = n.currentCup,
                b = n.save.unlockedCups,
                c = Q.levelUnlocks;
            if (c.exists(a)) {
                a = c.get(a);
                for (c = 0; c < a.length;) {
                    var d = a[c];
                    ++c;
                    if (b.exists(d) && b.get(d)) break;
                    b.set(d, !0)
                }
                n.save.updateCupUnlocks(b)
            }
        },
        getFinalPositions: function() { for (var a = n.currentCupPositions, b = n.currentCharacter.name, c = {}, d = [], e = a.keys(); e.hasNext();) { var f = e.next(),
                    f = { name: f, pos: a.get(f), isPlayer: f == b };
                d.push(f);
                f.isPlayer && (c = f) } d.sort(m(this, this.sortOrder));
            n.save.updateCupProgress(this._curCup, d.indexOf(c) + 1); return d },
        sortOrder: function(a, b) { var c = a.pos,
                d = b.pos; return c == d ? 0 : c > d ? 1 : -1 },
        buildConfettiBG: function() {
            var a = new eh(Q.width, Q.height);
            a.autoStart = !1;
            a.maxCount = 80;
            a.startSpreadY =
                0.3;
            a.speed.set__(2);
            a.speed.animateTo(1, 2);
            a.width = 0.4 * Q.width;
            a.centerX = 675;
            this.owner.addChild((new p).add(a));
            return a
        },
        onChange: function(a) { n.currentCharacter = G.getDataByName(a);
            this.closePopup(!1);
            N.change("SelectCharacter") },
        onEquip: function(a) { n.save.setLoot(n.currentCharacter.name, a.id);
            this._kart.equipItem(a, a.type, !0);
            this.closePopup(!0) },
        closePopup: function(a) { this._popup.owner.dispose();
            this._popup = null;
            a && this.makeNewPopup(!0) },
        makeNewPopup: function(a) {
            null == a && (a = !1);
            this._popup = new dh(!1);
            this._disposer.add(this._popup.onChange.connect(m(this, this.onChange)).once());
            this._disposer.add(this._popup.onEquip.connect(m(this, this.onEquip)).once());
            this._disposer.add(this._popup.onClose.connect(m(this, this.closePopup)).once());
            this.addSprite(this._popup);
            this._popup.isBuilt && a && this._popup.animate()
        },
        __class__: kg
    });
    var jj = function() {};
    g["game.SceneList"] = jj;
    jj.__name__ = ["game", "SceneList"];
    var ye = function() {
        this._zoom = 1;
        this._minX = this._maxX = this._minY = this._maxY = -1;
        this.limitTarget = this._limitX =
            this._limitY = !1;
        this.checkLimit = !0;
        this.x = this.y = this._x = this._y = 0;
        this.followTarget = !0;
        this.velocityY = 0;
        this.massY = 40;
        this.dampingY = 20;
        this.stiffnessY = 0.7;
        this.springY = !1;
        this.velocityX = 0;
        this.massX = 40;
        this.dampingX = 10;
        this.stiffnessX = 0.8;
        this.springX = !1;
        this.linearDampingX = this.linearDampingY = 0.2
    };
    g["stolo.world.Camera"] = ye;
    ye.__name__ = ["stolo", "world", "Camera"];
    ye.prototype = {
        update: function(a) {
            null != this.zoom && (this.zoom.update(a), this._zoom = this.zoom._value);
            this.followTarget && (null != this.target ?
                (this.target.update(a), this._targetX = this.target.x._value, this._targetY = this.target.y._value) : (this._targetX = this._x, this._targetY = this._y), this._targetX != this._x && (this._diff = this._targetX - this._x, this.springX ? (this.velocityX += (this.stiffnessX * this._diff - this.dampingX * this.velocityX) / this.massX, this._x += this.velocityX) : this._x += this._diff * this.linearDampingX, 0.5 > Math.abs(this._diff) && (this._x = this._targetX)), this._targetY != this._y && (this._diff = this._targetY - this._y, this.springY ? (this.velocityY +=
                    (this.stiffnessY * this._diff - this.dampingY * this.velocityY) / this.massY, this._y += this.velocityY) : this._y += this._diff * this.linearDampingY, 0.5 > Math.abs(this._diff) && (this._y = this._targetY)), this.x = this._x, this.y = this._y, null != this.offset && (this.offset.update(a), this.x += this.offset.x._value, this.y += this.offset.y._value), null != this.fx && (this.fx.update(a), this.x += this.fx.x._value, this.y += this.fx.y._value));
            this.checkLimit && (this._limitX && (-1 != this._minX && (this.x = Math.max(this._minX, this.x)), -1 != this._maxX &&
                (this.x = Math.min(this.x, this._maxX))), this._limitY && (-1 != this._minY && (this.y = Math.max(this._minY, this.y)), -1 != this._maxY && (this.y = Math.min(this.y, this._maxY))), this.limitTarget && null != this.target && (this.target.x.set__(this.x), this.target.y.set__(this.y), null != this.offset && (a = this.target.y, a.set__(a._value - this.offset.x._value), a = this.target.y, a.set__(a._value - this.offset.y._value)), null != this.fx && (a = this.target.y, a.set__(a._value - this.fx.x._value), a = this.target.y, a.set__(a._value - this.fx.y._value))))
        },
        zoomTo: function(a, b, c) { null == b && (b = 0);
            null == this.zoom && (this.zoom = new ca(1));
            0 < b ? (null == c && (c = D.quintOut), this.zoom.animateTo(a, b, c)) : (this.zoom.set__(a), this.zoom.set_behavior(null)) },
        setXY: function(a, b, c) { null == c && (c = !0);
            this.x = a;
            this.y = b;
            c && (this._x = this.x, this._y = this.y, this.velocityY = this.velocityX = 0, null != this.offset && (this.x += this.offset.x._value, this.y += this.offset.y._value), null != this.fx && (this.x += this.fx.x._value, this.y += this.fx.y._value)) },
        moveToTarget: function() {
            var a = this._x,
                b = this._y;
            null != this.target && (a = this.target.x._value, b = this.target.y._value);
            this.setXY(a, b, !0)
        },
        setTarget: function(a, b, c) { null == c && (c = !1);
            null != this.target && this.target.dispose();
            this.target = new pd(a, b);
            c && this.moveToTarget(); return this.target },
        animateTo: function(a, b, c, d) { null == d && (d = ye.DEFAULT_EASING);
            this.setTarget(this._x, this._y, !1);
            this.target.x.animateTo(a, c, d);
            this.target.y.animateTo(b, c, d) },
        setAnimatedTarget: function(a, b, c) {
            null == c && (c = !1);
            null != this.target && this.target.dispose();
            this.setTarget(a._value,
                b._value, c);
            this.target.x = a;
            this.target.y = b;
            return this.target
        },
        followSprite: function(a, b) { null == b && (b = !1); return this.setAnimatedTarget(a.x, a.y, b) },
        setOffset: function(a, b, c, d, e, f) { null == e && (e = -1);
            null == c && (c = 0);
            null == this.offset && (this.offset = new pd(a, b));
            this.setOffsetX(a, c, d);
            this.setOffsetY(b, 0 <= e ? e : c, null != f ? f : d) },
        setOffsetX: function(a, b, c) { null == b && (b = 0);
            0 < b ? (null == c && (c = D.quintInOut), this.offset.x.animateTo(a, b, c)) : (this.offset.x.set_behavior(null), this.offset.x.set__(a)) },
        setOffsetY: function(a,
            b, c) { null == b && (b = 0);
            0 < b ? (null == c && (c = D.quintInOut), this.offset.y.animateTo(a, b, c)) : (this.offset.y.set_behavior(null), this.offset.y.set__(a)) },
        setLimits: function(a, b, c, d) { null == d && (d = -1);
            null == c && (c = -1);
            null == b && (b = -1);
            null == a && (a = -1);
            this.setLimitsX(a, b);
            this.setLimitsY(c, d) },
        setLimitsX: function(a, b) { null == b && (b = -1);
            null == a && (a = -1);
            this._minX = a;
            this._maxX = b; if (-1 != this._minX || -1 != this._maxX) this._limitX = !0 },
        setLimitsY: function(a, b) {
            null == b && (b = -1);
            null == a && (a = -1);
            this._minY = a;
            this._maxY = b;
            if (-1 !=
                this._minY || -1 != this._maxY) this._limitY = !0
        },
        startFX: function() { null != this._fxScript && this._fxScript.dispose();
            null == this.fxEntity && (this.fxEntity = new p, x.root.addChild(this.fxEntity));
            this._fxScript = new Ob;
            this.fxEntity.add(this._fxScript);
            null != this.fx && this.fx.dispose();
            this.fx = new pd(0, 0) },
        endFX: function() { this.fx = null;
            null != this._fxScript && (this._fxScript.dispose(), null != this._fxScript.owner && this._fxScript.owner.remove(this._fxScript), this._fxScript = null) },
        shake: function(a, b, c) {
            null == c && (c = 0);
            null == b && (b = 30);
            null == a && (a = 0.5);
            this.startFX();
            0 < b && Af.shake(this._fxScript.owner, this.fx.y, a, b, m(this, this.endFX));
            0 < c && Af.shake(this._fxScript.owner, this.fx.x, a, c, m(this, this.endFX))
        },
        __class__: ye
    };
    var wj = function() { ye.call(this);
        this.linearDampingX = 0.8;
        this.springX = !1;
        this.springY = !0 };
    g["game.camera.GameCamera"] = wj;
    wj.__name__ = ["game", "camera", "GameCamera"];
    wj.__super__ = ye;
    wj.prototype = k(ye.prototype, { update: function(a) { ye.prototype.update.call(this, a) }, __class__: wj });
    var xj = function() { ec.call(this) };
    g["game.character.Character"] = xj;
    xj.__name__ = ["game", "character", "Character"];
    xj.__super__ = ec;
    xj.prototype = k(ec.prototype, { onStart: function() { ec.prototype.onStart.call(this);
            ua.codeUnlocked("BIG_HEAD") && (this.boneOverrides.push({ bone: "head", scaleX: 1.5, scaleY: 1.5 }), this.applyBoneOverrides(this.boneOverrides), this.play("neutral"));
            ua.codeUnlocked("TINY_HEAD") && (this.boneOverrides.push({ bone: "head", scaleX: 0.5, scaleY: 0.5 }), this.applyBoneOverrides(this.boneOverrides), this.play("neutral")) }, __class__: xj });
    var sd = function() {};
    g["game.character.ai.Difficulty"] = sd;
    sd.__name__ = ["game", "character", "ai", "Difficulty"];
    sd.getString = function(a) { return a == sd.EASY ? "easy" : a == sd.MEDIUM ? "medium" : a == sd.HARD ? "hard" : null };
    var aj = function() { i.call(this) };
    g["game.character.fx.BeesFx"] = aj;
    aj.__name__ = ["game", "character", "fx", "BeesFx"];
    aj.__super__ = i;
    aj.prototype = k(i.prototype, {
        get_name: function() { return "BeesFx_101" },
        onStart: function() {
            i.prototype.onStart.call(this);
            var a = this.owner._compMap.Sprite_2,
                b = new cg("bees", "sprites",
                    1);
            b.gotoAndPlay("idle", { loop: !1, onComplete: m(this, this.dispose) });
            b.setXY(-20, -100);
            b.setScale(1 / a.scale);
            a.appendToSlot("character", b);
            null != this.owner._compMap.Player_22 && t.play("beehive_impact", "PICKUP")
        },
        __class__: aj
    });
    var Hi = function() { this.onComplete = new ga;
        this.onIntroComplete = new ga;
        this.flashIntro = !0;
        i.call(this) };
    g["game.character.fx.TeleportFx"] = Hi;
    Hi.__name__ = ["game", "character", "fx", "TeleportFx"];
    Hi.__super__ = i;
    Hi.prototype = k(i.prototype, {
        get_name: function() { return "TeleportFx_47" },
        dispose: function() {
            i.prototype.dispose.call(this);
            this._kart = this._spine = null;
            null != this._fx && this._fx.owner.dispose();
            this._fx = null
        },
        onAdded: function() { i.prototype.onAdded.call(this);
            this._kart = this.owner._compMap.Kart_4;
            this._spine = this.owner._compMap.Sprite_2 },
        teleportTo: function(a, b, c, d) { null == d && (d = 0); var e = this;
            this.owner._compMap.Disposer_72.add(this.onIntroComplete.connect(function() { e.outro() }).once());
            this.intro(c, d) },
        intro: function(a, b) {
            null == b && (b = 0);
            try {
                B.to(this._spine.get_animation(), { scaleX: 0, scaleY: 0 }, {
                    time: 0.35,
                    ease: D.elasticIn,
                    delay: b,
                    onComplete: m(this, this.introComplete)
                }), B.delayCallTo(m(this, this.introFlash), b + 0.15, this.owner), null != a && this.owner._compMap.Disposer_72.add(this.onIntroComplete.connect(a).once())
            } catch (c) { null != a && a() }
        },
        introFlash: function() { this.flashIntro && this.flash(!1, 1.3);
            this._kart.isPlayer && t.play("teleport_in", "TELEPORT") },
        introComplete: function() { this.onIntroComplete.emit() },
        outro: function(a, b) {
            null == b && (b = 0);
            this.flash(!0, 1.7);
            this._kart.isPlayer && t.play("teleport_out", "TELEPORT");
            B.to(this._spine.get_animation(), { scaleX: 1, scaleY: 1 }, { time: 0.5, ease: D.elasticOut, delay: b + 0.3, onComplete: m(this, this.outroComplete) });
            null != a && this.owner._compMap.Disposer_72.add(this.onComplete.connect(a).once())
        },
        outroComplete: function() { this.onComplete.emit() },
        flash: function(a, b, c) {
            null == c && (c = 1);
            null == b && (b = 1);
            null == a && (a = !1);
            null == this._fx && (this._fx = new fb("teleport_flash", "sprites"), this._fx.setXY(-30, 0), this._fx.setScale(1 / this._spine.scale), (new p).add(this._fx), this.owner.addChild(this._fx.owner));
            this._fx.set_visible(!0);
            this._fx.gotoAndPlay("in", { frame: c, reverse: a, loop: !1, onComplete: m(this, this.flashComplete) });
            this._fx.setSpeed(b)
        },
        flashComplete: function() { this._fx.set_visible(!1) },
        __class__: Hi
    });
    var Q = function() {};
    g["game.config.GameConfig"] = Q;
    Q.__name__ = ["game", "config", "GameConfig"];
    var fh = function(a, b, c, d, e) {
        null == e && (e = 0.001);
        null == d && (d = 1);
        null == c && (c = 2);
        null == b && (b = 1);
        null == a && (a = 0);
        this.zpp_inner = null;
        null == xa.zpp_pool ? this.zpp_inner = new xa : (this.zpp_inner = xa.zpp_pool, xa.zpp_pool = this.zpp_inner.next, this.zpp_inner.next =
            null);
        null;
        this.zpp_inner.outer = this;
        a != this.zpp_inner.elasticity && (this.zpp_inner.elasticity = a / 1, this.zpp_inner.invalidate(xa.WAKE | xa.ARBITERS));
        this.zpp_inner.elasticity;
        b != this.zpp_inner.dynamicFriction && (this.zpp_inner.dynamicFriction = b / 1, this.zpp_inner.invalidate(xa.WAKE | xa.ANGDRAG | xa.ARBITERS));
        this.zpp_inner.dynamicFriction;
        c != this.zpp_inner.staticFriction && (this.zpp_inner.staticFriction = c / 1, this.zpp_inner.invalidate(xa.WAKE | xa.ARBITERS));
        this.zpp_inner.staticFriction;
        d != 1E3 * this.zpp_inner.density &&
            (this.zpp_inner.density = d / 1E3, this.zpp_inner.invalidate(xa.WAKE | xa.PROPS));
        1E3 * this.zpp_inner.density;
        e != this.zpp_inner.rollingFriction && (this.zpp_inner.rollingFriction = e / 1, this.zpp_inner.invalidate(xa.WAKE | xa.ARBITERS));
        this.zpp_inner.rollingFriction
    };
    g["nape.phys.Material"] = fh;
    fh.__name__ = ["nape", "phys", "Material"];
    fh.prototype = {
        toString: function() {
            return "{ elasticity: " + this.zpp_inner.elasticity + " dynamicFriction: " + this.zpp_inner.dynamicFriction + " staticFriction: " + this.zpp_inner.staticFriction +
                " density: " + 1E3 * this.zpp_inner.density + " rollingFriction: " + this.zpp_inner.rollingFriction + " }"
        },
        __class__: fh
    };
    var xa = function() { this.dynamicFriction = this.staticFriction = this.density = this.elasticity = this.rollingFriction = 0;
        this.next = this.outer = this.shapes = null;
        this.shapes = new Bf;
        this.elasticity = 0;
        this.dynamicFriction = 1;
        this.staticFriction = 2;
        this.density = 0.001;
        this.rollingFriction = 0.01 };
    g["zpp_nape.phys.ZPP_Material"] = xa;
    xa.__name__ = ["zpp_nape", "phys", "ZPP_Material"];
    xa.prototype = {
        wrapper: function() {
            if (null ==
                this.outer) { this.outer = new fh; var a = this.outer.zpp_inner;
                a.outer = null;
                a.next = xa.zpp_pool;
                xa.zpp_pool = a;
                this.outer.zpp_inner = this }
            return this.outer
        },
        set: function(a) { this.dynamicFriction = a.dynamicFriction;
            this.staticFriction = a.staticFriction;
            this.density = a.density;
            this.elasticity = a.elasticity;
            this.rollingFriction = a.rollingFriction },
        invalidate: function(a) { for (var b = this.shapes.head; null != b;) b.elt.invalidate_material(a), b = b.next },
        __class__: xa
    };
    var Bf = function() {
        this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null
    };
    g["zpp_nape.util.ZNPList_ZPP_Shape"] = Bf;
    Bf.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Shape"];
    Bf.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == fc.zpp_pool ? b = new fc : (b = fc.zpp_pool, fc.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        insert: function(a, b) { return this.inlined_insert(a, b) },
        inlined_insert: function(a, b) {
            var c;
            null == fc.zpp_pool ? c = new fc : (c = fc.zpp_pool, fc.zpp_pool = c.next,
                c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++;
            return c
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = fc.zpp_pool;
            fc.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) {
            for (var b = null, c = this.head, d = !1; null != c;) {
                if (c.elt == a) {
                    this.inlined_erase(b);
                    d = !0;
                    break
                }
                b = c;
                c = c.next
            }
            return d
        },
        erase: function(a) { return this.inlined_erase(a) },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = fc.zpp_pool;
            fc.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b },
        __class__: Bf
    };
    var Ia = function() {};
    g["game.config.PhysicsConfig"] = Ia;
    Ia.__name__ = ["game", "config", "PhysicsConfig"];
    Ia.init = function() { bd.add("player", Ia.PlayerMaterial);
        bd.add("ground", Ia.GroundMaterial) };
    Ia.getFilter = function(a, b, c) {
        null == c && (c = !1);
        null == b && (b = !0);
        null == a && (a = 0);
        for (var d = y["int"](Math.pow(2, (b ? Ia.filtersLanes[a] : Ia.filtersKarts[a]) + 1)), e = 0, f = 0, l = Ia.nbFilter; f < l;) {
            var v = f++;
            v == a ? c && (d = y["int"](Math.pow(2, Ia.invisibleGroup)), e |= y["int"](Math.pow(2, Ia.filtersKarts[v] + 1))) : (e |= y["int"](Math.pow(2, Ia.filtersLanes[v] + 1)), e |= y["int"](Math.pow(2, Ia.filtersKarts[v] +
                1)))
        }
        b || (e |= y["int"](Math.pow(2, Ia.invisibleGroup)));
        return { collisionGroup: d, collisionMask: ~e }
    };
    Ia.getMaskFilter = function(a) { null == a && (a = 0); for (var b = y["int"](Math.pow(2, Ia.filtersLanes[a] + Ia.nbFilter + 1)), c = 0, d = 0, e = Ia.nbFilter; d < e;) { var f = d++;
            f == a && (c |= y["int"](Math.pow(2, Ia.filtersLanes[f] + 1)), c |= y["int"](Math.pow(2, Ia.filtersKarts[f] + 1))) } return { collisionGroup: b, collisionMask: ~c } };
    var ze = function() { this._disposer = new za;
        this.action = this.jump = this._enabled = !1;
        this.axisX = this.axisY = 0;
        i.call(this) };
    g["game.controls.Controls"] = ze;
    ze.__name__ = ["game", "controls", "Controls"];
    ze.__super__ = i;
    ze.prototype = k(i.prototype, {
        get_name: function() { return "Controls_32" },
        onStart: function() { i.prototype.onStart.call(this);
            this.owner.addChild((new p).add(this._disposer));
            this._hud = I.__cast(this.owner._compMap.BaseGameSystem_24, ch).hud;
            this.set_enabled(!0);
            this._disposer.add(x._platform.getKeyboard().down.connect(m(this, this.onKeyDown)));
            this._disposer.add(x._platform.getKeyboard().up.connect(m(this, this.onKeyUp))) },
        onRemoved: function() { this.set_enabled(!1) },
        dispose: function() { this.set_enabled(!1);
            this._disposer = this._hud = null;
            i.prototype.dispose.call(this) },
        onUpdate: function() { this._enabled && (this.resetAxis(), this.updateKeyboard()) },
        updateKeyboard: function() { var a = x._platform.getKeyboard(); if (a.isDown(j.Right) || a.isDown(j.D)) this.axisX = 1; if (a.isDown(j.Up) || a.isDown(j.W)) this.axisY = 1; if (a.isDown(j.Down) || a.isDown(j.S)) this.axisY = -1 },
        onKeyDown: function(a) {
            a.key == j.Space && (this.jump = !0);
            a.key == j.Left && (this.action = !0)
        },
        onKeyUp: function(a) { a.key == j.Space && (this.jump = !1);
            a.key == j.Left && (this.action = !1) },
        resetAxis: function() { this.axisY = this.axisX = 0 },
        get_enabled: function() { return this._enabled },
        set_enabled: function(a) { if (a == this._enabled) return this._enabled;
            this._enabled = a;
            this._enabled || (this.axisY = this.axisX = 0, this.jump = this.action = !1, this._disposer.dispose()); return this._enabled },
        __class__: ze,
        __properties__: k(i.prototype.__properties__, { set_enabled: "set_enabled", get_enabled: "get_enabled" })
    });
    var Be = function(a) {
        this._target =
            new X;
        this._startPosition = new X;
        this.returnX = this.returnY = -1;
        this.texture_handle = "dpad_handle";
        this.texture_base = "dpad";
        this.radians = this.pointerId = -1;
        this.axisX = this.axisY = this.directionX = this.directionY = 0;
        this.isActive = !1;
        this.enabled = !0;
        this.followSpeed = 0.8;
        this.isVisible = !0;
        this.startAlpha = 0;
        this.followTolerance = 1.1;
        this.follow = !0;
        this.limits = new Na(0.1, 0.2, 0.6, 0.8);
        this.radiusSnapping = 0.9;
        this.deadZone = 0.1;
        this.radius = 75;
        i.call(this);
        this.pack = a
    };
    g["stolo.ui.Dpad"] = Be;
    Be.__name__ = ["stolo", "ui",
        "Dpad"
    ];
    Be.__super__ = i;
    Be.prototype = k(i.prototype, {
        get_name: function() { return "Dpad_33" },
        dispose: function() { i.prototype.dispose.call(this);
            this.limits = this._base = this._handle = this._target = this._startPosition = this._disposer = this.pack = null },
        onStart: function() {
            this._disposer = this.owner._compMap.Disposer_72;
            null == this._disposer && (this._disposer = new za, this.owner.addChild((new p).add(this._disposer)));
            0 > this.returnX && (this.returnX = o.gameWidth * this.limits.x);
            0 > this.returnY && (this.returnY = o.gameHeight * this.limits.height);
            this.setupListeners();
            this.build()
        },
        onUpdate: function(a) { i.prototype.onUpdate.call(this, a); if (this.isActive && this.follow && (Math.abs(this._startPosition.x - this._target.x) > this.radius * this.followTolerance || Math.abs(this._startPosition.y - this._target.y) > this.radius * this.followTolerance)) this._startPosition.x = db.lerp(this._startPosition.x, this._target.x, a * this.followSpeed), this._startPosition.y = db.lerp(this._startPosition.y, this._target.y, a * this.followSpeed), this.setXY(this._startPosition.x, this._startPosition.y) },
        setupListeners: function() { this._disposer.add(x._platform.getTouch().down.connect(m(this, this.onTouchDown)));
            this._disposer.add(x._platform.getTouch().move.connect(m(this, this.onTouchMove)));
            this._disposer.add(x._platform.getTouch().up.connect(m(this, this.onTouchUp))) },
        onTouchDown: function(a) { this.onPointerDown(a.viewX, a.viewY, a.id) },
        onTouchMove: function(a) { this.onPointerMove(a.viewX, a.viewY, a.id) },
        onTouchUp: function(a) { this.onPointerUp(a.viewX, a.viewY, a.id) },
        build: function() {
            null == this._base && (this._base =
                A.createImage(this.texture_base, this.pack), this.owner.addChild((new p).add(this._base)), this._base.disablePointer(), this._base.centerAnchor(), this._base.setAlpha(this.startAlpha), this._handle = A.createImage(this.texture_handle, this.pack), this._base.owner.addChild((new p).add(this._handle)), this._handle.disablePointer(), this._handle.centerAnchor(), this._handle.setAlpha(this.startAlpha), this.setXY(this.returnX, this.returnY), this.setVisible(this.isVisible))
        },
        setVisible: function(a) {
            this.isVisible = a;
            null !=
                this._base && (this._base.set_visible(a), this._handle.set_visible(a))
        },
        setXY: function(a, b) {
            null != this.limits && (a = db.clamp(a, o.gameWidth * this.limits.x, o.gameWidth * this.limits.width), b = db.clamp(b, o.gameHeight * this.limits.y, o.gameHeight * this.limits.height));
            this._base.setXY(a, b);
            var c = this.radius / 2 * this.axisX,
                d = this.radius / 2 * this.axisY,
                e = this.radius / 2 * Math.sin(this.radians);
            Math.abs(c) > Math.abs(e) && (c = e);
            e = this.radius / 2 * Math.cos(this.radians);
            Math.abs(d) > Math.abs(e) && (d = e);
            this._handle.setXY(this._base.anchorX._value +
                c, this._base.anchorY._value + -1 * d)
        },
        onPointerDown: function(a, b, c) { this.enabled && (a /= o.scale, b /= o.scale, null != this.limits && (a > o.gameWidth * this.limits.width || b < o.gameHeight * this.limits.y) || -1 != this.pointerId || (this.pointerId = c, this._base.setAlpha(1), this._handle.setAlpha(1), this._startPosition = new X(a, b), this._target.x = a, this._target.y = b, this.setXY(this._startPosition.x, this._startPosition.y))) },
        onPointerMove: function(a, b, c) {
            this.enabled && this.pointerId == c && (this.isActive = !0, a /= o.scale, b /= o.scale, this.axisX =
                db.clamp((a - this._startPosition.x) / this.radius, -1, 1), this.axisY = db.clamp((this._startPosition.y - b) / this.radius, -1, 1), Math.abs(this.axisX) < this.deadZone && (this.axisX = 0), Math.abs(this.axisY) < this.deadZone && (this.axisY = 0), this.directionX = 0 == this.axisX ? 0 : 0 < this.axisX ? 1 : -1, this.directionY = 0 == this.axisY ? 0 : 0 < this.axisY ? 1 : -1, Math.abs(this.axisX) >= this.radiusSnapping && (this.axisX = this.directionX), Math.abs(this.axisY) >= this.radiusSnapping && (this.axisY = this.directionY), this.radians = Math.atan2(this.axisX, this.axisY),
                this.setXY(this._startPosition.x, this._startPosition.y), this.follow && (this._target.x = a, this._target.y = b))
        },
        onPointerUp: function(a, b, c) { c == this.pointerId && (this.pointerId = -1, this.isActive = !1, this._base.alpha.animateTo(0, 2, D.quadOut), this._handle.alpha.animateTo(0, 2, D.quadOut), this._handle.x.animateTo(this._base.anchorX._value, 0.35, D.backInOut), this._handle.y.animateTo(this._base.anchorY._value, 0.35, D.backInOut)) },
        __class__: Be
    });
    var yj = function(a) {
        Be.call(this, a);
        this.texture_base = "slider";
        this.texture_handle =
            "slider_handle";
        o.mobile && (this.startAlpha = 1)
    };
    g["game.controls.SliderUI"] = yj;
    yj.__name__ = ["game", "controls", "SliderUI"];
    yj.__super__ = Be;
    yj.prototype = k(Be.prototype, {
        onPointerDown: function(a, b, c) { Be.prototype.onPointerDown.call(this, a, b, c); - 1 != this.pointerId && (this.isActive = !0) },
        onPointerMove: function(a, b, c) { c == this.pointerId && Be.prototype.onPointerMove.call(this, a, b, c) },
        onPointerUp: function(a, b, c) { c == this.pointerId && (Be.prototype.onPointerUp.call(this, a, b, c), this.axisY = 0) },
        setXY: function(a, b) {
            null !=
                this.limits && (a = db.clamp(a, o.gameWidth * this.limits.x, o.gameWidth * this.limits.width), b = db.clamp(b, o.gameHeight * this.limits.y, o.gameHeight * this.limits.height));
            this._base.setXY(a, b);
            var c = this.axisX,
                d = this.radius / 2 * this.axisY,
                e = this.radius / 2 * Math.sin(this.radians);
            Math.abs(c) > Math.abs(e) && (c = e);
            e = this.radius / 2 * Math.cos(this.radians);
            Math.abs(d) > Math.abs(e) && (d = e);
            this._handle.setXY(this._base.anchorX._value + c, this._base.anchorY._value + -1 * d)
        },
        __class__: yj
    });
    var sm = function() {
        this._cooldown = this._time =
            0;
        this._id = -1;
        this._lastPoint = new X(0, 0);
        this._success = !1;
        this._disposer = new za;
        this._mobile = !1;
        this.enabled = !0;
        this.startPosition = new X(0, 0);
        this.onSwipeEnd = new Lb;
        this.onSwipeSuccess = new Lb;
        this.onSwipeStart = new ga;
        this.time = 2;
        this.cooldown = 0.2;
        this.swipeDistance = 50;
        i.call(this)
    };
    g["game.controls.Swipe"] = sm;
    sm.__name__ = ["game", "controls", "Swipe"];
    sm.__super__ = i;
    sm.prototype = k(i.prototype, {
        get_name: function() { return "Swipe_34" },
        onStart: function() {
            i.prototype.onStart.call(this);
            null == this.bounds &&
                (this.bounds = new Na(0, 0, 0.6 * Q.width, Q.height));
            (this._mobile = o.mobile) || this._disposer.add(x._platform.getPointer().down.connect(m(this, this.onPointerDown)))
        },
        onUpdate: function(a) {
            i.prototype.onUpdate.call(this, a);
            if (0 < this._cooldown) this._cooldown -= a;
            else {
                if (-1 != this._id && (this._time -= a, 0 > this._time)) { this.endSwipe(this._lastPoint.x, this._lastPoint.y);
                    this._id = -1; return }
                if (this._mobile) {
                    for (var a = -1 != this._id, b = 0, c = x._platform.getTouch().get_points(); b < c.length;) {
                        var d = c[b];
                        ++b;
                        a && this._id == d.id &&
                            (a = !1);
                        this.handleTouch(d)
                    }
                    a && this.endSwipe(this._lastPoint.x, this._lastPoint.y)
                }
            }
        },
        onStop: function() { this.startPosition = this._upConnection = this._moveConnection = null;
            this._disposer.dispose();
            this._disposer = null;
            i.prototype.onStop.call(this) },
        handleTouch: function(a) { this.enabled && (-1 == this._id ? this.startSwipe(a.viewX / o.scale, a.viewY / o.scale, a.id) : this.move(a.viewX / o.scale, a.viewY / o.scale, a.id)) },
        onPointerDown: function(a) {
            this.enabled && (this._moveConnection = x._platform.getPointer().move.connect(m(this,
                this.onPointerMove)), this._disposer.add(this._moveConnection), this._upConnection = x._platform.getPointer().up.connect(m(this, this.onPointerUp)), this._disposer.add(this._upConnection), this.startSwipe(a.viewX / o.scale, a.viewY / o.scale, 0))
        },
        onPointerMove: function(a) { this.move(a.viewX / o.scale, a.viewY / o.scale, 0) },
        onPointerUp: function(a) { this._moveConnection.dispose();
            this.endSwipe(a.viewX / o.scale, a.viewY / o.scale) },
        startSwipe: function(a, b, c) {
            null == c && (c = -1); - 1 != this._id || a < this.bounds.x || a > this.bounds.x + this.bounds.width ||
                b < this.bounds.y || b > this.bounds.y + this.bounds.height || (this._id = c, this._time = this.time, this.startPosition.set(a, b), this._success = !1, this.onSwipeStart.emit())
        },
        move: function(a, b, c) { null == c && (c = -1); if (!(-1 == this._id || this._id != c)) { var c = this.startPosition.x - a,
                    d = this.startPosition.y - b;
                this._lastPoint.set(a, b);!this._success && this.getDistance(c, d) >= this.swipeDistance && this.swipeSuccess(a, b) } },
        swipeSuccess: function(a, b) {
            if (-1 != this._id) {
                var c = this.getAngle(this.startPosition.x, a, this.startPosition.y, b);
                this._success = !0;
                this.onSwipeSuccess.emit(this.owner, c);
                this.endSwipe(a, b)
            }
        },
        endSwipe: function(a, b) { if (-1 != this._id) { var c = this.getAngle(this.startPosition.x, a, this.startPosition.y, b),
                    d = this.getDistance(this.startPosition.x - a, this.startPosition.y - b);
                this._cooldown = this.cooldown;
                this._id = -1;
                this.onSwipeEnd.emit(c, d) } },
        getAngle: function(a, b, c, d) { return Math.atan2(d - c, b - a) * (180 / Math.PI) },
        getDistance: function(a, b) { return Math.sqrt(a * a + b * b) },
        __class__: sm
    });
    var zj = function() { ze.call(this) };
    g["game.controls.TouchControls"] =
        zj;
    zj.__name__ = ["game", "controls", "TouchControls"];
    zj.__super__ = ze;
    zj.prototype = k(ze.prototype, {
        onStart: function() { ze.prototype.onStart.call(this);
            this.buildTouchControls() },
        onStop: function() { this.actionButton = this.swipe = null },
        onUpdate: function(a) {
            if (this._enabled) {
                ze.prototype.onUpdate.call(this, a);
                for (var a = 0, b = x._platform.getTouch().get_points(); a < b.length;) { var c = b[a];++a;
                    this.handleTouch(c.viewX / o.scale, c.viewY / o.scale) } this._slider.isActive && (this.axisY = this._slider.axisY);
                null != this.actionButton &&
                    this.actionButton.set_visible(0 == (this._hud.itemSlot._flags & 2))
            }
        },
        buildTouchControls: function() { if (null == this.swipe) { this.actionButton = A.createImage("btn_action", this._hud.pack);
                this.actionButton.setXY(798, 350);
                this._hud.addSprite(this.actionButton); var a = this._hud.itemSlot.y;
                a.set__(a._value - 68);
                this._slider = new yj(this._hud.pack);
                this._hud.addSprite(this._slider) } },
        handleTouch: function(a, b) {
            Q.autoAccelControls ? a > Q.width / 2 && (this.jump = !0) : a < Q.width / 2 && (this.axisX = this._slider.isActive ? 1 : 0);
            this._hud.hitTest(this.actionButton,
                a, b) && !Q.autoAccelControls && (this.jump = !0);
            this._hud.hitTest(this._hud.itemSlot, a, b) && (this.action = !0)
        },
        __class__: zj
    });
    var $c = function() {};
    g["game.customization.CustomizationSlot"] = $c;
    $c.__name__ = ["game", "customization", "CustomizationSlot"];
    var oa = function() {};
    g["game.customization.ItemConfig"] = oa;
    oa.__name__ = ["game", "customization", "ItemConfig"];
    oa.getDefaultItems = function(a) { a = z.field(oa, a); return null == a ? [] : a.slice() };
    oa.getItemsStats = function(a) {
        for (var b = 0, c = 0, d = 0, a = a._compMap.CustomizationComponent_18.inventory.iterator(); a.hasNext();) var e =
            a.next(),
            b = b + e.stats.speed,
            c = c + e.stats.traction,
            d = d + e.stats.strength;
        b = qb.clamp(b, oa.minValue, oa.maxValue);
        c = qb.clamp(c, oa.minValue, oa.maxValue);
        d = qb.clamp(d, oa.minValue, oa.maxValue);
        return { speed: b, traction: c, strength: d }
    };
    oa.filterItems = function(a) { for (var b = [], c, d = n.currentCharacter.name, e = !1, f = 0, l = a.length; f < l;) { var v = f++;
            c = a[v].characters; if (null != c) { for (var e = !1, h = 0; h < c.length;) { var g = c[h];++h; if (g == d) { e = !0; break } } if (!e) continue } b.push(a[v]) } return b };
    oa.getRandomLoot = function(a) {
        var b = [],
            c = "body_" +
            (Math.floor(6 * Math.random()) + 1);
        b.push(c);
        c = "hood_" + (Math.floor(6 * Math.random()) + 1);
        b.push(c);
        c = "spoiler_" + (Math.floor(6 * Math.random()) + 1);
        b.push(c);
        c = "wheel_" + (Math.floor(6 * Math.random()) + 1);
        b.push(c);
        for (var a = z.field(oa, a), d = 0; d < a.length;) { var e = a[d];++d; if (-1 != e.indexOf("flag")) { c = e; break } } b.push(c);
        return b
    };
    var dc = function() {};
    g["game.customization.KartManager"] = dc;
    dc.__name__ = ["game", "customization", "KartManager"];
    dc.getTemplate = function(a, b) {
        null == b && (b = !0);
        var c;
        c = null;
        var d = 0,
            e = fa.loadInventory(a),
            f;
        f = n.currentCharacter.name == a ? null == e ? oa.getDefaultItems(a) : dc.getLootFromInventory(e) : oa.getRandomLoot(a);
        for (var l, e = {}, v = !1, h = 0; h < f.length;) l = f[h], ++h, l = fa.getById(l), null != l && ("body" == l.type ? c = Aa.getDataByTemplate(l.template) : "wheel" == l.type && (d = l.wheelOffset, v = l.hasTires)), b && (e[l.type] = l.id);
        if (null == c) throw "racer was null";
        c = c.template;
        c.kart_customization = { inventoryJson: e };
        c.spine.offset = { x: 0, y: d };
        c.wheels = { hasTires: v };
        return c
    };
    dc.addCharacterToKart = function(a, b, c) {
        null == c && (c = "neutral");
        var d = new xj;
        d.characterName = b;
        d.pack = "spine/" + b;
        d.asset = b;
        d.defaultAnimation = c;
        b = a._compMap.Sprite_2;
        b.changeSlotFromSprite("character", d);
        ua.codeUnlocked("INVISIBLE") && dc.applyInvisiCheat(b);
        ua.codeUnlocked("HOVER_CAR") && dc.applyHoverCheat(b);
        ua.codeUnlocked("TINY_KART") && dc.applyTinyKartCheat(b);
        null != a._compMap.Kart_4 && (a._compMap.Kart_4.character = d, a._compMap.CharacterState_48.init(d))
    };
    dc.getLootFromInventory = function(a) { return [a.body, a.wheel, a.spoiler, a.flag, a.hood] };
    dc.applyInvisiCheat = function(a) {
        a.hasSlot("flag") &&
            (a.getSlot("flag").a = 0);
        a.hasSlot("body") && (a.getSlot("body").a = 0);
        a.hasSlot("body_back") && (a.getSlot("body_back").a = 0);
        a.hasSlot("wheel_back") && (a.getSlot("wheel_back").a = 0);
        a.hasSlot("spoiler") && (a.getSlot("spoiler").a = 0);
        a.hasSlot("hood") && (a.getSlot("hood").a = 0);
        a.hasSlot("tire_back2") && (a.getSlot("tire_back2").a = 0);
        a.hasSlot("wheel_back2") && (a.getSlot("wheel_back2").a = 0);
        a.hasSlot("tire_front2") && (a.getSlot("tire_front2").a = 0);
        a.hasSlot("wheel_front2") && (a.getSlot("wheel_front2").a = 0);
        a.hasSlot("tire_back") &&
            (a.getSlot("tire_back").a = 0);
        a.hasSlot("tire_front") && (a.getSlot("tire_front").a = 0);
        a.hasSlot("wheel_front") && (a.getSlot("wheel_front").a = 0);
        a.hasSlot("default/reactor_back2") && (a.getSlot("default/reactor_back2").a = 0);
        a.hasSlot("default/reactor_back") && (a.getSlot("default/reactor_back").a = 0);
        a.hasSlot("default/stering_wheel") && (a.getSlot("default/stering_wheel").a = 0);
        a.hasSlot("default/bar_front_02") && (a.getSlot("default/bar_front_02").a = 0);
        a.hasSlot("default/bar_back") && (a.getSlot("default/bar_back").a =
            0);
        a.hasSlot("default/bar_front_01") && (a.getSlot("default/bar_front_01").a = 0);
        a.hasSlot("images/default/stering_wheel") && (a.getSlot("images/default/stering_wheel").a = 0)
    };
    dc.applyHoverCheat = function(a) {
        a.hasSlot("wheel_back") && (a.getSlot("wheel_back").a = 0);
        a.hasSlot("tire_back2") && (a.getSlot("tire_back2").a = 0);
        a.hasSlot("wheel_back2") && (a.getSlot("wheel_back2").a = 0);
        a.hasSlot("tire_front2") && (a.getSlot("tire_front2").a = 0);
        a.hasSlot("wheel_front2") && (a.getSlot("wheel_front2").a = 0);
        a.hasSlot("tire_back") &&
            (a.getSlot("tire_back").a = 0);
        a.hasSlot("tire_front") && (a.getSlot("tire_front").a = 0);
        a.hasSlot("wheel_front") && (a.getSlot("wheel_front").a = 0);
        a.get_animation().y.set_behavior(new Ea(-20, 20, 1))
    };
    dc.applyTinyKartCheat = function(a) { a.scale *= 0.5 };
    var Ba = function() {};
    g["game.customization.LootList"] = Ba;
    Ba.__name__ = ["game", "customization", "LootList"];
    Ba.init = function() {
        Ba.initDone = !0;
        Ba.loot.set("level1", [{ id: "wheel_1", rarity: 3 }, { id: "hood_1", rarity: 3 }, { id: "flag_2", rarity: 3 }, { id: "spoiler_1", rarity: 3 }, {
            id: "spoiler_2",
            rarity: 3
        }]);
        Ba.loot.set("level2", [{ id: "wheel_1", rarity: 3 }, { id: "wheel_2", rarity: 3 }, { id: "wheel_6", rarity: 1 }, { id: "hood_1", rarity: 3 }, { id: "hood_2", rarity: 2 }, { id: "hood_6", rarity: 1 }, { id: "flag_2", rarity: 3 }, { id: "flag_3", rarity: 2 }, { id: "flag_4", rarity: 2 }, { id: "spoiler_1", rarity: 3 }, { id: "spoiler_2", rarity: 3 }, { id: "spoiler_3", rarity: 2 }, { id: "spoiler_4", rarity: 2 }]);
        Ba.loot.set("level3", [{ id: "wheel_1", rarity: 3 }, { id: "wheel_2", rarity: 3 }, { id: "wheel_3", rarity: 2 }, { id: "wheel_6", rarity: 1 }, { id: "hood_1", rarity: 3 }, {
            id: "hood_2",
            rarity: 3
        }, { id: "hood_3", rarity: 2 }, { id: "hood_6", rarity: 1 }, { id: "flag_2", rarity: 3 }, { id: "flag_3", rarity: 3 }, { id: "flag_4", rarity: 3 }, { id: "flag_5", rarity: 2 }, { id: "flag_6", rarity: 1 }, { id: "spoiler_1", rarity: 3 }, { id: "spoiler_2", rarity: 3 }, { id: "spoiler_3", rarity: 3 }, { id: "spoiler_4", rarity: 3 }, { id: "spoiler_5", rarity: 2 }, { id: "spoiler_6", rarity: 1 }]);
        Ba.loot.set("level4", [{ id: "wheel_1", rarity: 3 }, { id: "hood_1", rarity: 3 }, { id: "flag_2", rarity: 3 }, { id: "spoiler_1", rarity: 3 }, { id: "spoiler_2", rarity: 3 }]);
        Ba.loot.set("level5", [{
            id: "wheel_1",
            rarity: 3
        }, { id: "wheel_2", rarity: 3 }, { id: "wheel_4", rarity: 1 }, { id: "hood_1", rarity: 3 }, { id: "hood_2", rarity: 3 }, { id: "hood_4", rarity: 1 }, { id: "flag_2", rarity: 3 }, { id: "flag_3", rarity: 3 }, { id: "flag_4", rarity: 2 }, { id: "spoiler_1", rarity: 3 }, { id: "spoiler_2", rarity: 3 }]);
        Ba.loot.set("level6", [{ id: "wheel_1", rarity: 3 }, { id: "wheel_2", rarity: 3 }, { id: "wheel_3", rarity: 2 }, { id: "wheel_4", rarity: 1 }, { id: "hood_1", rarity: 3 }, { id: "hood_2", rarity: 3 }, { id: "hood_3", rarity: 2 }, { id: "hood_4", rarity: 1 }, { id: "flag_2", rarity: 3 }, { id: "flag_3", rarity: 3 },
            { id: "flag_4", rarity: 3 }, { id: "flag_5", rarity: 2 }, { id: "flag_6", rarity: 1 }, { id: "spoiler_1", rarity: 3 }, { id: "spoiler_2", rarity: 3 }, { id: "spoiler_3", rarity: 3 }, { id: "spoiler_4", rarity: 2 }, { id: "spoiler_5", rarity: 2 }, { id: "spoiler_6", rarity: 1 }
        ]);
        Ba.loot.set("level7", [{ id: "wheel_1", rarity: 3 }, { id: "hood_1", rarity: 3 }, { id: "flag_2", rarity: 3 }, { id: "spoiler_1", rarity: 3 }, { id: "spoiler_2", rarity: 3 }]);
        Ba.loot.set("level8", [{ id: "wheel_1", rarity: 3 }, { id: "wheel_2", rarity: 3 }, { id: "wheel_5", rarity: 1 }, { id: "hood_1", rarity: 3 }, {
            id: "hood_2",
            rarity: 3
        }, { id: "hood_5", rarity: 1 }, { id: "flag_2", rarity: 3 }, { id: "flag_3", rarity: 2 }, { id: "flag_4", rarity: 2 }, { id: "spoiler_1", rarity: 3 }, { id: "spoiler_2", rarity: 3 }, { id: "spoiler_3", rarity: 2 }, { id: "spoiler_4", rarity: 2 }]);
        Ba.loot.set("level9", [{ id: "wheel_1", rarity: 3 }, { id: "wheel_2", rarity: 3 }, { id: "wheel_3", rarity: 2 }, { id: "wheel_5", rarity: 1 }, { id: "hood_1", rarity: 3 }, { id: "hood_2", rarity: 3 }, { id: "hood_3", rarity: 2 }, { id: "hood_5", rarity: 1 }, { id: "flag_2", rarity: 3 }, { id: "flag_3", rarity: 3 }, { id: "flag_4", rarity: 2 }, { id: "flag_5", rarity: 2 },
            { id: "flag_6", rarity: 1 }, { id: "spoiler_1", rarity: 3 }, { id: "spoiler_2", rarity: 3 }, { id: "spoiler_3", rarity: 3 }, { id: "spoiler_4", rarity: 2 }, { id: "spoiler_5", rarity: 2 }, { id: "spoiler_6", rarity: 1 }
        ])
    };
    Ba.getLoot = function(a, b) { null == b && (b = !0);
        Ba.initDone || Ba.init(); var c;
        c = b ? n.save.getLoot(n.currentCharacter.name) : [];
        c = Ba.filterOwned(Ba.loot.get(a), c); var d = "";
        0 < c.length && (d = c[Math.floor(Math.random() * c.length)]); return d };
    Ba.filterOwned = function(a, b) {
        if (null == a) return [];
        for (var c = [], d = 0; d < a.length;) {
            var e = a[d];
            ++d;
            if (!Ba.compare(e.id, b))
                for (var f = 0, l = e.rarity; f < l;) f++, c.push(e.id)
        }
        return c
    };
    Ba.compare = function(a, b) { for (var c = 0; c < b.length;) { var d = b[c];++c; if (a == d) return !0 } return !1 };
    var Vd = function() { this._bars = [];
        this.addBg = !0;
        this.xOffset = this.yOffset = 0;
        this.addedStats = [];
        this.baseStats = [];
        this.labels = [];
        r.call(this) };
    g["game.customization.StatBoxUI"] = Vd;
    Vd.__name__ = ["game", "customization", "StatBoxUI"];
    Vd.__super__ = r;
    Vd.prototype = k(r.prototype, {
        onAdded: function() {
            r.prototype.onAdded.call(this);
            this._pack = E.getPack("ui");
            if (this.addBg) { var a = A.createImage("stat_box", this._pack);
                this.owner.addChild((new p).add(a)) }
            for (var a = 0, b = this.labels.length; a < b;) {
                var c = a++,
                    d = A.createImage("icon_" + this.labels[c].toLowerCase(), this._pack);
                d.setXY(25 + c * this.xOffset, 36 + c * this.yOffset);
                d.centerAnchor();
                this.owner.addChild((new p).add(d));
                d = A.createImage("bar_bg", this._pack);
                d.setXY(45 + c * this.xOffset, 26 + c * this.yOffset);
                this.owner.addChild((new p).add(d));
                var e = A.createImage("bar_filled", this._pack);
                e.setXY(2, 2);
                e.scissor = new Na(0,
                    0, (this.baseStats[c] + this.addedStats[c]) / Vd.MAX_VALUE * e.getNaturalWidth(), e.getNaturalHeight());
                d.owner.addChild((new p).add(e));
                var f = A.createImage("bar_" + this.labels[c].toLowerCase(), this._pack);
                f.setXY(2, 2);
                f.scissor = new Na(0, 0, this.baseStats[c] / Vd.MAX_VALUE * f.getNaturalWidth(), f.getNaturalHeight());
                d.owner.addChild((new p).add(f));
                this._bars.push({ orange: f, green: e })
            }
        },
        onStop: function() { r.prototype.onStop.call(this) },
        update: function() {
            for (var a = 0, b = this.labels.length; a < b;) {
                var c = a++;
                this._bars[c].green.scissor.width =
                    (this.baseStats[c] + this.addedStats[c]) / Vd.MAX_VALUE * this._bars[c].green.getNaturalWidth();
                this._bars[c].orange.scissor.width = this.baseStats[c] / Vd.MAX_VALUE * this._bars[c].orange.getNaturalWidth()
            }
        },
        __class__: Vd
    });
    var G = function() {};
    g["game.data.Characters"] = G;
    G.__name__ = ["game", "data", "Characters"];
    G.getDataByName = function(a) { for (var b = 0, c = G.list; b < c.length;) { var d = c[b];++b; if (d.name == a) return d } return null };
    G.getTutorialOpponent = function() {
        var a = n.opponents[Math.floor(Math.random() * n.opponents.length -
            1) + 1];
        return G.getDataByName(a)
    };
    var n = function() {};
    g["game.data.GameData"] = n;
    n.__name__ = ["game", "data", "GameData"];
    n.init = function() { n.loadConfig("config.json");
        va.Prefix = Q.$name + "_";
        n.save = new tm;
        n.save.load() };
    n.loadConfig = function(a, b, c) { null == c && (c = !0);
        null == b && (b = "config");
        null == a && (a = "config.json");
        n.config = E.getJSON(a, b, c) };
    n.setNewOpponents = function() {
        for (var a = n.currentCharacter, b = [], c = 0, d = G.list; c < d.length;) { var e = d[c];++c;
            e != a && b.push(e.name) }
        for (b = xe.shuffle(b); b.length > Q.nbOpponents;) b.splice(Math.floor(Math.random() *
            b.length), 1);
        n.opponents = b
    };
    n.resetCupPositions = function() { n.currentCupPositions = new M;
        n.finalPosition = [] };
    n.getCurrentMode = function() { return n.isForFun ? "For Fun" : n.isTournament ? "Tournament" : "Quick Match" };
    n.getCurrentDifficulty = function() { return sd.getString(n.currentDifficulty) };
    var rc = function() {};
    g["stolo.ensys.data.LevelData"] = rc;
    rc.__name__ = ["stolo", "ensys", "data", "LevelData"];
    rc.get = function(a, b, c) {
        null == b && (b = "levels");
        if ("storage" == b) return rc.getFromStorage(a, null, c);
        var d = rc._levelCache.get(a);
        null == d && (b = E.getJSON(a, b), b.filename = a, d = rc.createData(c), d.parse(b), rc._levelCache.set(a, d));
        return d
    };
    rc.getFromStorage = function(a, b, c) { if (null == b || "" == b) b = a;
        b = va.get(b); return null != b && "" != b ? (b = JSON.parse(b), b.filename = a, a = rc.createData(c), a.parse(b), a) : null };
    rc.createData = function(a) { return ia.createInstance(a, []) };
    rc.prototype = {
        getDefaultLayers: function() { return [{ name: "default", parallax: { x: 0, y: 0 }, editor: { locked: !0 }, alpha: 1 }] },
        parse: function(a) {
            if (null == a) throw "Level data null";
            this.data = a;
            this.name =
                this.parseName();
            this.filename = this.parseFilename();
            this.env = this.parseEnv();
            this.layers = this.parseLayers();
            this.actors = this.parseActors()
        },
        parseName: function() { return null == this.data.name ? "noname" : this.data.name },
        parseFilename: function() { return null == this.data.filename ? "nofilename" : this.data.filename },
        parseEnv: function() { return null == this.data.env ? "1" : this.data.env },
        parseActors: function() { return null == this.data.actors ? [] : this.data.actors },
        parseLayers: function() {
            return null == this.data.layers ? this.getDefaultLayers() :
                this.data.layers
        },
        __class__: rc
    };
    var Za = function() {};
    g["game.data.GameLevelData"] = Za;
    Za.__name__ = ["game", "data", "GameLevelData"];
    Za.get = function(a) { return rc.get(a, Q.levels_pack, Za) };
    Za.getRandom = function() { for (var a = [], b = Za.LIST.keys(); b.hasNext();) { var c = b.next();
            n.save.isCupLocked(c) || (a = a.concat(Za.LIST.get(c))) } return a[Math.floor(Math.random() * a.length)] };
    Za.getLvlIndexByName = function(a, b) { return !Za.LIST.exists(a) ? -1 : Za.LIST.get(a).indexOf(b) };
    Za.__super__ = rc;
    Za.prototype = k(rc.prototype, {
        getDefaultLayers: function() {
            var a = [{ name: "fbg", parallax: { x: 0, y: 0 }, editor: { locked: !0 } }, { name: "parafar", parallax: { x: 0.1, y: 0.1 }, editor: { locked: !0 } }, { name: "paraclose", parallax: { x: 0.5, y: 0.5 }, editor: { locked: !0 } }, { name: "parawall", parallax: { x: 0.8, y: 0.8 }, editor: { locked: !0 } }, { name: "paraground", parallax: { x: 1, y: 1 }, editor: { locked: !0 } }, { name: "default", parallax: { x: 1, y: 1 } }, { name: "ground", parallax: { x: 1, y: 1 } }, { name: "player", parallax: { x: 1, y: 1 } }, { name: "front", parallax: { x: 1, y: 1 } }, { name: "fg", parallax: { x: 1.3, y: 1 }, editor: { locked: !0 } }];
            "4" == this.env && a.splice(4,
                0, { name: "paraground2", parallax: { x: 1.03, y: 1 }, editor: { locked: !0 } });
            return a
        },
        getPacks: function(a) {
            null == a && (a = !1);
            var b = "actors,ai,sprites,ui_hud,ui_tuto,trails".split(",");
            a ? (b.push("sprites_env1"), b.push("sprites_env2"), b.push("sprites_env3"), b.push("sprites_env4"), b.push("sprites_env1_highend"), b.push("sprites_env2_highend"), b.push("sprites_env3_highend"), b.push("sprites_env4_highend")) : (b.push("sprites_env" + this.env), o.slow || b.push("sprites_env" + this.env + "_highend"));
            for (var a = 0, c = Aa.list; a < c.length;) {
                var d =
                    c[a];
                ++a;
                b.push(d.template.spine.pack)
            }
            b.push("spine/" + n.currentCharacter.name);
            a = 0;
            for (c = n.opponents; a < c.length;) d = c[a], ++a, b.push("spine/" + d);
            return b
        },
        __class__: Za
    });
    var Aa = function() {};
    g["game.data.Karts"] = Aa;
    Aa.__name__ = ["game", "data", "Karts"];
    Aa.getDataByTemplate = function(a) { return Object.prototype.hasOwnProperty.call(Aa, a) ? z.field(Aa, a) : null };
    var ua = function() {};
    g["game.data.PromoCodes"] = ua;
    ua.__name__ = ["game", "data", "PromoCodes"];
    ua.__properties__ = { get_manager: "get_manager" };
    ua.Init = function() {
        null ==
            ua._manager && (ua._manager = new um, ua._manager.init("TIME_SAVER,MORPH,BIG_HEAD,TINYHEAD,UNBUMPABLE,BACKWARD,INVISIBLE,FAKEOUT,BEEHIVE,EMP,NITRO,FIREWORKS,SNOW,GHOST,SHIELD,HOMING,INVISIBILITY,CLEAR,TINY_HEAD,TINY_KART,HOVER_CAR,DRAGSTER".split(",")))
    };
    ua.codeUnlocked = function(a) { return ua.get_manager().isUnlocked(a) };
    ua.apply = function(a, b) {
        null == b && (b = !0);
        if (!(b ? ua.get_manager().isCodeValid(a) : 1)) return !1;
        ua.get_manager().unlock(a);
        switch (a) {
            case "TIME_SAVER":
                n.save.unlockAllCharacters();
                n.save.unlockAllItems();
                break;
            case "MORPH":
                G.ranger.locked = !1;
                n.save.unlockCharacter("ranger");
                break;
            case "FAKEOUT":
            case "BEEHIVE":
            case "EMP":
            case "NITRO":
            case "FIREWORKS":
            case "SNOW":
            case "GHOST":
            case "SHIELD":
            case "HOMING":
            case "INVISIBILITY":
                n.cheatPickup = a;
                break;
            case "CLEAR":
                ua.reset()
        }
        return !0
    };
    ua.cease = function(a, b) {
        null == b && (b = !0);
        if (!(b ? ua.get_manager().isCodeValid(a) : 1)) return !1;
        ua.get_manager().lock(a);
        switch (a) {
            case "FAKEOUT":
            case "BEEHIVE":
            case "EMP":
            case "NITRO":
            case "FIREWORKS":
            case "SNOW":
            case "GHOST":
            case "SHIELD":
            case "HOMING":
            case "INVISIBILITY":
                n.cheatPickup =
                    ""
        }
        return !0
    };
    ua.reset = function() { n.cheatPickup = "";
        ua.get_manager().reset() };
    ua.get_manager = function() { null == ua._manager && ua.Init(); return ua._manager };
    var tm = function() {
        this.datasToSave = "lastUnlockedLevel,gamesPlayed,tutorialSeen,cupsProgress,unlockedCups,unlockedLevels,unlockedCharacters,unlockedNewCharacters,charactersLoot,charactersNewLoot".split(",");
        this.charactersNewLoot = new M;
        this.charactersLoot = new M;
        this.unlockedNewCharacters = new M;
        this.unlockedCharacters = new M;
        this.unlockedLevels = new M;
        var a = new M;
        a.set("jelly", !0);
        a.set("kitty", !0);
        a.set("mega", !0);
        a.set("house", !0);
        this.unlockedCups = a;
        this.cupsProgress = new M;
        this.tutorialSeen = !1;
        this.gamesPlayed = 0
    };
    g["game.data.SaveGame"] = tm;
    tm.__name__ = ["game", "data", "SaveGame"];
    tm.prototype = {
        load: function() { for (var a = 0, b = this.datasToSave; a < b.length;) { var c = b[a];++a;
                z.setField(this, c, va.get(c, z.field(this, c))) } this.updateCharacters() },
        save: function() { for (var a = 0, b = this.datasToSave; a < b.length;) { var c = b[a];++a;
                va.set(c, z.field(this, c)) } },
        updateCharacters: function() {
            for (var a =
                    0, b = G.list; a < b.length;) { var c = b[a];++a;
                null != c && (this.unlockedCharacters.exists(c.name) ? c.locked = this.unlockedCharacters.get(c.name) : this.unlockedCharacters.set(c.name, c.locked)) }
        },
        addGame: function(a) { null == a && (a = 1);
            this.gamesPlayed += a;
            this.save(); return this.gamesPlayed },
        isCharacterLocked: function() { return !1 },
        unlockAllCharacters: function() { for (var a = 0, b = G.list; a < b.length;) { var c = b[a];++a;
                this.unlockedCharacters.set(c.name, !1) } this.save() },
        unlockCharacter: function(a) {
            this.unlockedCharacters.set(a,
                !1);
            this.unlockedNewCharacters.set(a, !0);
            this.save()
        },
        setNewCharacter: function(a, b) { null == b && (b = !1);
            this.unlockedNewCharacters.set(a, b);
            this.save() },
        getCharacterIsNew: function(a) { return this.unlockedNewCharacters.exists(a) ? this.unlockedNewCharacters.get(a) : a == G.lincoln.name || a == G.lola.name || a == G.abrasive.name || a == G.tiger.name || a == G.shredder.name || a == G.snide.name ? !0 : !1 },
        isCupLocked: function() { return !1 },
        isAllCupsUnlocked: function() {
            for (var a = !0, b = Za.LIST.keys(); b.hasNext();)
                if (!this.cupsProgress.exists(b.next())) {
                    a = !1;
                    break
                } return a
        },
        getLoot: function(a) { this.charactersLoot.exists(a) || this.resetloot(a); return this.charactersLoot.get(a) },
        setLoot: function(a, b) { for (var c = 0, d = G.list; c < d.length;) { var e = d[c];++c; var f = this.getLoot(e.name); if (-1 < f.indexOf(b)) return;
                null;
                f.push(b);
                this.setNewLoot(e.name, b, !0, !1) } this.save() },
        unlockAllItems: function() { for (var a = [], b = 0, c = fa.getAll(); b < c.length;) { var d = c[b];++b;
                a.push(d.id) } b = 0; for (c = G.list; b < c.length;) d = c[b], ++b, this.charactersLoot.set(d.name, a) },
        setNewLoot: function(a,
            b, c, d) { null == d && (d = !0); if (!this.charactersNewLoot.exists(a)) { var e = new M;
                this.charactersNewLoot.set(a, e) } this.charactersNewLoot.get(a).set(b, c);
            d && this.save() },
        getNewLoot: function(a, b) { var c; if (!(c = !this.charactersNewLoot.exists(a))) c = !this.charactersNewLoot.get(a).exists(b); return c ? !1 : this.charactersNewLoot.get(a).get(b) },
        resetloot: function(a) { if (null != a) { var b = oa.getDefaultItems(a);
                this.charactersLoot.set(a, b) } else this.charactersLoot = new M;
            this.save() },
        isLootUnlocked: function(a, b) { return -1 < this.getLoot(a).indexOf(b) },
        updateCupProgress: function(a, b) { if (this.cupsProgress.exists(a)) { var c = this.cupsProgress.get(a); if (b < c) this.cupsProgress.set(a, b);
                else return } else this.cupsProgress.set(a, b);
            this.save() },
        updateCupUnlocks: function(a) { this.unlockedCups = a;
            this.save() },
        __class__: tm
    };
    var td = function() {
        this._bodiesToRemove = [];
        this._bodiesToAdd = [];
        this._contactsListenerHandler = new M;
        this._contactsListener = new M;
        this._contactTypes = new M;
        this._speed = 1;
        this._fixedDt = 0.025;
        this._currentDt = 0;
        this._enabled = !0;
        this.alwaysInverseNormal = !1;
        this.stepMode = 1;
        this.onPhysicUpdate = new S;
        i.call(this);
        this._contactTypes.set("ANY_BODY", Hc.ANY_BODY)
    };
    g["stolo.ensys.system.PhysicSystem"] = td;
    td.__name__ = ["stolo", "ensys", "system", "PhysicSystem"];
    td.getListenerId = function(a, b, c, d) { return y.string(a) + "-" + y.string(b) + "-" + td.getOptionId(c) + "-" + td.getOptionId(d) };
    td.getOptionId = function(a) { return K.is(a, P.TClass(Array)) ? a.join(",") : a };
    td.__super__ = i;
    td.prototype = k(i.prototype, {
        get_name: function() { return "PhysicSystem_31" },
        getSpace: function() { return this._space },
        setGravity: function(a, b) { this._space.set_gravity(aa.get(a, b, !0)); return this._space.get_gravity() },
        onAdded: function() { this._space = new vm(aa.get(0, 900, !0));
            this._speedAdjuster = this.owner._compMap.SpeedAdjuster_67 },
        onRemoved: function() { this._space.clear(); if (null != this._contactsListenerHandler)
                for (var a = this._contactsListenerHandler.iterator(); a.hasNext();) a.next().dispose();
            this._speedAdjuster = this._contactTypes = this._contactsListener = this._bodiesToRemove = this._bodiesToAdd = this._space = null;
            i.prototype.onRemoved.call(this) },
        onUpdate: function(a) {
            if (this._enabled) {
                null != this._speedAdjuster && (this._speed = this._speedAdjuster.scale._value);
                if (0 >= this._speed) return;
                switch (this.stepMode) {
                    case 1:
                        this._fixedDiff = a / (this._fixedDt * this._speed);
                        this._step = 1.1 < this._fixedDiff ? (this._fixedDt * this._fixedDiff + 0.008) * this._speed : this._fixedDt * this._speed;
                        0.009 >= this._step && (this._step = 0.009);
                        0.06 < this._step && (this._step = 0.06);
                        this._space.step(this._step);
                        break;
                    case 2:
                        for (this._currentDt += a; this._currentDt >= this._fixedDt;) this.onPhysicUpdate.emit(this._fixedDt),
                            this._space.step(this._fixedDt), this._currentDt -= this._fixedDt;
                        break;
                    case 0:
                        this._space.step(this._fixedDt)
                }
                this.onPhysicUpdate.emit(a)
            }
            for (; 0 < this._bodiesToAdd.length;) this._space.zpp_inner.wrap_bodies.add(this._bodiesToAdd.pop());
            for (; 0 < this._bodiesToRemove.length;) this._space.zpp_inner.wrap_bodies.remove(this._bodiesToRemove.pop())
        },
        enable: function(a) { this._enabled = a },
        addBody: function(a) { null != this._space && null != a && this._bodiesToAdd.push(a) },
        removeBody: function(a) { null != this._space && null != a && this._bodiesToRemove.push(a) },
        addContactListener: function(a, b, c, d, e, f, l) {
            null == l && (l = !1);
            if (null != this._space) {
                var v = this.getCbType(c),
                    h = this.getCbType(d),
                    c = td.getListenerId(a, b, c, d);
                if (null == this._contactsListener.get(c)) {
                    l = new Aj(this.alwaysInverseNormal, l);
                    if (a == V.PRELISTENER) a = new Bj(b, v, h, m(l, l.onPreContact));
                    else if (a == V.ONGOING) a = new lg(a, b, v, h, m(l, l.onOngoingContact));
                    else if (a == V.END) a = new lg(a, b, v, h, m(l, l.onContactEnd));
                    else if (a == V.BEGIN) a = new lg(a, b, v, h, m(l, l.onContactBegin));
                    else throw "PhysicSystem: Contact listener unsupported: " +
                        y.string(a);
                    this._space.zpp_inner.wrap_listeners.add(a);
                    this._contactsListener.set(c, a);
                    this._contactsListenerHandler.set(c, l)
                }
                this._contactsListenerHandler.get(c).addEntity(e, f)
            }
        },
        removeContactListener: function(a, b, c, d, e) { null != this._space && (this.getCbType(c), this.getCbType(d), a = this._contactsListenerHandler.get(td.getListenerId(a, b, c, d)), null != a && a.removeEntity(e)) },
        getCbType: function(a) {
            if (null == this._space) return null;
            if (K.is(a, P.TClass(Array))) {
                if (1 == a.length) return this.getCbType(a[0]);
                var b =
                    a.join(","),
                    c = this._contactTypes.get(b);
                if (null == c) { for (var c = new mg, d = 0; d < a.length;) { var e = a[d];++d;
                        e = this.getCbType(e);
                        c.including(e) } this._contactTypes.set(b, c) }
                return c
            }
            if (K.is(a, P.TClass(String))) return a = a.toUpperCase(), b = this._contactTypes.get(a), null == b && (b = new Xe, this._contactTypes.set(a, b)), b;
            throw "Unknown kind of contact type " + y.string(a);
        },
        __class__: td
    });
    var Cj = function() { this._lastDt = 0.16;
        this.lerp = 0.7;
        this.maxDelta = 0.025;
        this.minDelta = 0.016;
        td.call(this) };
    g["game.physics.GamePhysics"] =
        Cj;
    Cj.__name__ = ["game", "physics", "GamePhysics"];
    Cj.__super__ = td;
    Cj.prototype = k(td.prototype, {
        onUpdate: function(a) {
            if (this._enabled) { null != this._speedAdjuster && (this._speed = this._speedAdjuster.scale._value); if (0 >= this._speed) return;
                a = db.clamp(1.64 * a, this.minDelta, this.maxDelta);
                0 < this.lerp && (a = db.lerp(a, this._lastDt, this.lerp));
                o.lowPerformance ? (this._space.step(a), this._space.step(a)) : (this._space.step(0.5 * a), this._space.step(0.5 * a));
                this._lastDt = a;
                this.onPhysicUpdate.emit(a) }
            for (; 0 < this._bodiesToAdd.length;) this._space.zpp_inner.wrap_bodies.add(this._bodiesToAdd.pop());
            for (; 0 < this._bodiesToRemove.length;) this._space.zpp_inner.wrap_bodies.remove(this._bodiesToRemove.pop())
        },
        __class__: Cj
    });
    var Dj = function() { i.call(this) };
    g["game.pickup.items.HiveLauncher"] = Dj;
    Dj.__name__ = ["game", "pickup", "items", "HiveLauncher"];
    Dj.__super__ = i;
    Dj.prototype = k(i.prototype, {
        get_name: function() { return "HiveLauncher_99" },
        onStart: function() {
            i.prototype.onStart.call(this);
            var a = this.owner._compMap.TransformComponent_70;
            this.owner._internal_getFromParents("ActorSystem_54").spawn({
                template: { key: "beehive" },
                transform: { position: { x: a.position.x + 50, y: a.position.y - 8 } },
                bee_projectile: { laneId: this.owner._compMap.LaneObject_12.laneId, speed: this.owner._compMap.PhysicsComponent_44.getVelocity().get_x() }
            })._compMap.Projectile_100.from = this.owner;
            null != this.owner._compMap.Player_22 && t.play("beehive", "PICKUP");
            this.dispose()
        },
        dispose: function() { i.prototype.dispose.call(this) },
        __class__: Dj
    });
    var Ej = function() { this.fxDuration = 1;
        this.slowDuration = 0.1;
        this.speedReduce = 0.8;
        i.call(this) };
    g["game.pickup.items.Emp"] = Ej;
    Ej.__name__ = ["game", "pickup", "items", "Emp"];
    Ej.__super__ = i;
    Ej.prototype = k(i.prototype, {
        get_name: function() { return "Emp_102" },
        onStart: function() { i.prototype.onStart.call(this);
            this._level = this.owner._internal_getFromParents("LevelSystem_13");
            this.affectCar();
            this.dispose() },
        dispose: function() { i.prototype.dispose.call(this) },
        affectCar: function() {
            for (var a = 0, b = this._level.characters; a < b.length;) {
                var c = b[a];
                ++a;
                if (c != this.owner) {
                    var d = c._compMap.Kart_4;
                    null != c._compMap.Player_22 && t.play("emp", "PICKUP");
                    d.prepEmp(this.speedReduce, this.slowDuration, this.fxDuration)
                }
            }
        },
        __class__: Ej
    });
    var Fj = function() { i.call(this) };
    g["game.pickup.items.Fake"] = Fj;
    Fj.__name__ = ["game", "pickup", "items", "Fake"];
    Fj.__super__ = i;
    Fj.prototype = k(i.prototype, {
        get_name: function() { return "Fake_98" },
        onStart: function() {
            i.prototype.onStart.call(this);
            var a = this.owner._compMap.TransformComponent_70;
            this.owner._internal_getFromParents("ActorSystem_54").spawn({
                template: { key: "fakeout" },
                transform: { position: { x: a.position.x - 180, y: a.position.y } },
                lane_object: { laneId: this.owner._compMap.LaneObject_12.laneId }
            });
            this.dispose()
        },
        dispose: function() { i.prototype.dispose.call(this) },
        __class__: Fj
    });
    var Gj = function() { this._speedBoostId = -1;
        this.speedBoost = 100;
        this.duration = 4;
        i.call(this) };
    g["game.pickup.items.Fireworks"] = Gj;
    Gj.__name__ = ["game", "pickup", "items", "Fireworks"];
    Gj.__super__ = i;
    Gj.prototype = k(i.prototype, {
        get_name: function() { return "Fireworks_7" },
        onStart: function() {
            i.prototype.onStart.call(this);
            null != this.owner && (this._speed = this.owner._compMap.SpeedControl_21,
                this._speedBoostId = this._speed.addBoost(this.speedBoost, 0, this.duration), null != this.owner._compMap.Player_22 && t.play("firework", "PICKUP"), B.delayCallTo(m(this, this.dispose), this.duration, this.owner))
        },
        dispose: function() { this._speed = null;
            i.prototype.dispose.call(this) },
        __class__: Gj
    });
    var Hj = function() { i.call(this) };
    g["game.pickup.items.Ghost"] = Hj;
    Hj.__name__ = ["game", "pickup", "items", "Ghost"];
    Hj.__super__ = i;
    Hj.prototype = k(i.prototype, {
        get_name: function() { return "Ghost_9" },
        onStart: function() {
            i.prototype.onStart.call(this);
            var a = this.owner._compMap.Sprite_2;
            this._ghost = new fb("ghost", "sprites", null, !0);
            this._ghost.gotoAndPlay("idle", { onComplete: m(this, this.onGhostDone) });
            this._ghost.setScale(1 / a.scale).setXY(-250, -300);
            a.appendToSlot("character", this._ghost);
            null != this.owner._compMap.Player_22 ? t.play("ghost", "PICKUP") : 0.2 > Math.random() && this.owner._internal_getFromParents("LevelSystem_13").player._compMap.CollectorComponent_41.stealItem()
        },
        dispose: function() {
            null != this._ghost.owner && this._ghost.owner.dispose();
            this._ghost =
                null;
            i.prototype.dispose.call(this)
        },
        onGhostDone: function() { if (null != this.owner) { var a = this.getNew(),
                    b = this.owner._compMap.CollectorComponent_41;
                this._ghost.owner.dispose();
                this.dispose();
                b.instant = !0;
                b.onContactBegin(a, null) } },
        getNew: function() { var a = new p,
                b = new wf;
            b.pickupData = ja.getRandomType(-1);
            b.withGhost = !1;
            a.add(b);
            b = new Fd;
            b.laneId = this.owner._compMap.LaneObject_12.laneId;
            a.add(b); return a },
        __class__: Hj
    });
    var Ij = function() { i.call(this) };
    g["game.pickup.items.MissileLauncher"] = Ij;
    Ij.__name__ = ["game", "pickup", "items", "MissileLauncher"];
    Ij.__super__ = i;
    Ij.prototype = k(i.prototype, {
        get_name: function() { return "MissileLauncher_105" },
        onStart: function() {
            i.prototype.onStart.call(this);
            var a = this.owner._internal_getFromParents("ActorSystem_54"),
                b = this.owner._compMap.TransformComponent_70;
            null != this.owner._compMap.Player_22 && (a.spawn({ template: { key: "missile" }, transform: { position: { x: b.position.x + 50, y: b.position.y - 8 } }, missile: { speed: this.owner._compMap.PhysicsComponent_44.getVelocity().get_x() } })._compMap.Projectile_100.from =
                this.owner, null != this.owner._compMap.Player_22 && t.play("missile", "PICKUP"), this.dispose())
        },
        __class__: Ij
    });
    var Jj = function() { this._isInvisible = !1;
        this._baseOffsetY = -60;
        this.alertDelay = 1;
        this.duration = 5;
        i.call(this) };
    g["game.pickup.items.Invisibility"] = Jj;
    Jj.__name__ = ["game", "pickup", "items", "Invisibility"];
    Jj.__super__ = i;
    Jj.prototype = k(i.prototype, {
        get_name: function() { return "Invisibility_106" },
        onStart: function() {
            var a = this;
            i.prototype.onStart.call(this);
            null != this.owner && (this._invisible = L.create({
                    animation: {
                        pack: "sprites",
                        asset: "invisible",
                        offset: { x: -40, y: this._baseOffsetY },
                        scale: 3,
                        fps: 12
                    }
                }), this.owner.addChild(this._invisible), this._spine = this.owner._compMap.Sprite_2, this._anim = this._invisible._compMap.Sprite_2, this._anim.animation.gotoAndPlay("in", { onComplete: function() { a._anim.setAlpha(0);
                        a._spine.setAlpha(0.5);
                        a.owner._compMap.Kart_4.setInvisibility(!0);
                        a._isInvisible = !0;
                        a.owner._compMap.LaneObject_12.updatePhysicsFilter() } }), null != this.owner._compMap.Player_22 && t.play("invisibility", "PICKUP"), this._physicSystem =
                this.owner._internal_getFromParents("PhysicSystem_31"), this.delaySequence = B.delayCallTo(m(this, this.blink), this.duration - this.alertDelay, this.owner))
        },
        onUpdate: function(a) { i.prototype.onUpdate.call(this, a);
            null != this._invisible && (this._anim.offset.y = this._spine.offset.y, this._anim.offset.y /= 3, this._anim.offset.y += this._baseOffsetY, this._anim.applyOffset()) },
        onStop: function() { i.prototype.onStop.call(this);
            this.dispose() },
        dispose: function() { this.reset();
            i.prototype.dispose.call(this) },
        reset: function() {
            var a =
                this;
            this._isInvisible = !1;
            this._spine.alpha.set_behavior(null);
            this._spine.setAlpha(1);
            null != this.owner && null != this.owner._compMap.Kart_4 && (this.owner._compMap.Kart_4.setInvisibility(!1), this.owner._compMap.LaneObject_12.updatePhysicsFilter());
            null != this.delaySequence && this.delaySequence.removeAll();
            this._anim.setAlpha(1);
            this._anim.animation.gotoAndPlay("out", { onComplete: function() { a._invisible.dispose();
                    a._invisible = null;
                    a.dispose() } })
        },
        blink: function() {
            null != this.owner._compMap.Player_22 && t.play("invisibility_out",
                "PICKUP");
            this._spine.alpha.set_behavior(new Ea(0.5, 1, 0.2));
            this.delaySequence = B.delayCallTo(m(this, this.reset), this.alertDelay, this.owner)
        },
        __class__: Jj
    });
    var Kj = function() { this._baseOffsetY = -60;
        this._boostId = -1;
        this.duration = 1.5;
        this.speedBoost = 350;
        i.call(this) };
    g["game.pickup.items.Nitro"] = Kj;
    Kj.__name__ = ["game", "pickup", "items", "Nitro"];
    Kj.__super__ = i;
    Kj.prototype = k(i.prototype, {
        get_name: function() { return "Nitro_103" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._lines = L.create({
                animation: {
                    pack: "sprites",
                    asset: "nitro",
                    layer: "ground",
                    offset: { x: -170, y: this._baseOffsetY },
                    scale: 3,
                    fps: 15
                }
            });
            this.owner.addChild(this._lines);
            this._anim = this._lines._compMap.Sprite_2;
            this._spine = this.owner._compMap.Sprite_2;
            this._speed = this.owner._compMap.SpeedControl_21;
            this._boostId = this._speed.addBoost(this.speedBoost, 0, this.duration);
            null != this.owner._compMap.Player_22 && t.play("nitro", "PICKUP");
            B.delayCallTo(m(this, this.fade), this.duration, this._lines)
        },
        onUpdate: function(a) {
            i.prototype.onUpdate.call(this, a);
            this._anim.offset.y =
                this._spine.offset.y;
            this._anim.offset.y /= 3;
            this._anim.offset.y += this._baseOffsetY;
            this._anim.applyOffset()
        },
        dispose: function() { this._speed = null;
            this._lines.dispose();
            i.prototype.dispose.call(this) },
        fade: function() { B.to(this._anim, { alpha: 0 }, { time: 0.3, onComplete: m(this, this.dispose) }) },
        __class__: Kj
    });
    var Lj = function() { this._baseOffsetY = -60;
        i.call(this) };
    g["game.pickup.items.Shield"] = Lj;
    Lj.__name__ = ["game", "pickup", "items", "Shield"];
    Lj.__super__ = i;
    Lj.prototype = k(i.prototype, {
        get_name: function() { return "Shield_8" },
        onStart: function() {
            var a = this;
            i.prototype.onStart.call(this);
            this._shield = L.create({ animation: { pack: "sprites", asset: "shield", offset: { x: -40, y: this._baseOffsetY }, scale: 3, fps: 12 } });
            this.owner.addChild(this._shield);
            this._anim = this._shield._compMap.Sprite_2;
            this._anim.animation.gotoAndPlay("in", { onComplete: function() { a._anim.animation.gotoAndPlay("idle");
                    a._anim.animation.alpha.set_behavior(new Ea(1, 0.6, 0.5)) } });
            this._spine = this.owner._compMap.Sprite_2;
            null != this.owner._compMap.Player_22 && (t.play("shield",
                "PICKUP"), this._loop = t.play("shield_loop", "SHIELD", null, !0))
        },
        onUpdate: function(a) { i.prototype.onUpdate.call(this, a);
            this._anim.offset.y = this._spine.offset.y;
            this._anim.offset.y /= 3;
            this._anim.offset.y += this._baseOffsetY;
            this._anim.applyOffset() },
        dispose: function() { i.prototype.dispose.call(this);
            null != this._loop && this._loop.dispose();
            this._shield.dispose();
            this._spine = this._anim = null },
        onStop: function() { i.prototype.onStop.call(this);
            this.dispose() },
        end: function() {
            null != this.owner._compMap.Player_22 &&
                (null != this._loop && this._loop.dispose(), t.play("shield_out", "PICKUP"));
            this._anim.animation.alpha.set_behavior(new Ea(1, 0.5, 0.2));
            this._anim.animation.gotoAndPlay("out", { onComplete: m(this, this.dispose) })
        },
        __class__: Lj
    });
    var Mj = function() { this._isPlayer = !1;
        this._dropped = !0;
        i.call(this) };
    g["game.pickup.items.Snow"] = Mj;
    Mj.__name__ = ["game", "pickup", "items", "Snow"];
    Mj.__super__ = i;
    Mj.prototype = k(i.prototype, {
        get_name: function() { return "Snow_104" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._isPlayer =
                null != this.owner._compMap.Player_22;
            this._actors = this.owner._internal_getFromParents("ActorSystem_54");
            this._world = this.owner._internal_getFromParents("WorldSystem_25");
            this._laneObject = this.owner._compMap.LaneObject_12;
            this._spine = this.owner._compMap.Sprite_2;
            this._transform = this.owner._compMap.TransformComponent_70;
            this._lane = this._world.getLaneById(this._laneObject.laneId);
            this._lane.isPositionAvailable(this._transform.position.x) ? this.dropIce() : this._dropped = !1
        },
        dispose: function() {
            null != this._canonAnim &&
                null != this._canonAnim.owner && (this._canonAnim.owner.dispose(), this._canonAnim = null);
            this._spine = this._laneObject = this._lane = this._transform = this._world = this._actors = null;
            i.prototype.dispose.call(this)
        },
        onUpdate: function(a) { i.prototype.onUpdate.call(this, a);
            this._dropped || (a = this._world.getLaneById(this._laneObject.laneId), a.isPositionAvailable(this._transform.position.x) && (this._lane = a, this.dropIce())) },
        dropIce: function() {
            this._dropped = !0;
            this._isPlayer && t.play("snow", "PICKUP");
            this._canonAnim = new fb("snow_canon",
                "sprites");
            this._canonAnim.setScale(1 / this._spine.scale).setXY(-100, -180);
            this._spine.appendToSlot("pickup", this._canonAnim);
            this._canonAnim.gotoAndPlay("idle", { onComplete: m(this, this.spawnIce) })
        },
        spawnIce: function() {
            this._isPlayer && t.play("snow_impact", "PICKUP");
            this._canonAnim.gotoAndStop("end");
            this._canonAnim.alpha.animateTo(0, 0.35);
            this._actors.spawn({ template: { key: "ice" }, transform: { position: { x: this._transform.position.x - 100, y: this._lane.getY(this._transform.position.x - 180) } }, lane_object: { laneId: this._lane.id } });
            B.delayCallTo(m(this, this.dispose), 0.35, this.owner);
            this.owner.remove(this)
        },
        __class__: Mj
    });
    var ja = function() {};
    g["game.pickup.PickupTypes"] = ja;
    ja.__name__ = ["game", "pickup", "PickupTypes"];
    ja.getRandomType = function(a) { if (-1 == a) return a = xe.clone(ja.list), H.remove(a, ja.GHOST), a[Math.floor(Math.random() * a.length)];
        o.mobile && (a *= 2); for (var b = [], c = 0, d = ja.list; c < d.length;) { var e = d[c];++c;
            e.min <= a && e.max >= a && b.push(e) } return b[Math.floor(Math.random() * b.length)] };
    ja.getDataById = function(a) {
        return z.field(ja,
            a.toUpperCase())
    };
    var Wd = function(a, b, c, d, e) { null == e && (e = !0);
        this.onInit = new ga;
        this.autoCenter = !0;
        ya.call(this, null);
        this.autoCenter = e;
        this.currentSymbolName = b; if (null != d) this.onInit.connect(d).once();
        null != a && Pa.getSpritesheet(a, c, function(a) { return function(b) { return a(b) } }(m(this, this.onSpritesheetReady))) };
    g["stolo.sprites.BitmapSprite"] = Wd;
    Wd.__name__ = ["stolo", "sprites", "BitmapSprite"];
    Wd.__super__ = ya;
    Wd.prototype = k(ya.prototype, {
        set_currentSymbol: function(a) {
            this._currentSymbol = a;
            null != this._currentSymbol &&
                (this.currentSymbolName = this._currentSymbol.name);
            return this._currentSymbol
        },
        onStop: function() { ya.prototype.onStop.call(this);
            this.onInit = this.currentSymbolName = this._currentSymbol = this._spritesheet = null },
        onAdded: function() { ya.prototype.onAdded.call(this);
            null != this._spritesheet && this.onInit.emit() },
        onSpritesheetReady: function(a) { this.initialize(a) },
        setSymbol: function(a, b) {
            null == b && (b = !0);
            var c = this._spritesheet.getBitmapSymbol(a);
            if (null == c) {
                if (b) throw "Symbol not found: '" + a + "' for spritesheet '" +
                    this._spritesheet.get_name() + "'";
                return null
            }
            this.set_currentSymbol(c);
            return this._currentSymbol
        },
        initialize: function(a) { this._spritesheet = a;
            null != this.currentSymbolName && this.setSymbol(this.currentSymbolName);
            this.autoCenter && null != this._currentSymbol && 0 >= this._currentSymbol.width && this.centerAnchor();
            null != this.owner && this.onInit.emit() },
        draw: function(a) {
            null != this._currentSymbol ? 0 < this._currentSymbol.width && 0 < this._currentSymbol.height && a.drawSubTexture(this._currentSymbol.texture, this._currentSymbol.offsetX,
                this._currentSymbol.offsetY, this._currentSymbol.x, this._currentSymbol.y, this._currentSymbol.width, this._currentSymbol.height) : ya.prototype.draw.call(this, a)
        },
        getNaturalWidth: function() { return null == this._currentSymbol ? 0 : this._currentSymbol.sourceWidth },
        getNaturalHeight: function() { return null == this._currentSymbol ? 0 : this._currentSymbol.sourceHeight },
        __class__: Wd,
        __properties__: k(ya.prototype.__properties__, { set_currentSymbol: "set_currentSymbol" })
    });
    var fb = function(a, b, c, d, e) {
        null == d && (d = !0);
        this._isPlaying = !1;
        this._currentFrame = 0;
        this.nextCuePointFrame = this._cuepointIndex = -1;
        this.isReady = !1;
        this.onCuePoint = new Lb;
        this.onReady = new S;
        this.onPlaylistComplete = new ga;
        this.animComplete = new Lb;
        this.isReady = this.autoRestart = !1;
        this._position = this._currentFrame = 0;
        this.speed = new ca(1);
        this._overrides = e;
        Wd.call(this, a, null, b, c, d)
    };
    g["stolo.sprites.BitmapAnimation"] = fb;
    fb.__name__ = ["stolo", "sprites", "BitmapAnimation"];
    fb.__super__ = Wd;
    fb.prototype = k(Wd.prototype, {
        onSpritesheetReady: function(a) { this.initialize(a) },
        dispose: function() { Wd.prototype.dispose.call(this);
            this.onReady = this.animComplete = null;
            this._isPlaying = !1;
            this._completeCallback = this._animation = this._currentSprite = this._spritesheet = this._frames = null },
        initialize: function(a) { this._spritesheet = a;
            null != this._overrides && a.applyOverrides(this._overrides);
            null == this.animName && (this.animName = this._spritesheet.defaultAnim);
            this.start();
            this.onInit.emit() },
        onAdded: function() {
            Wd.prototype.onAdded.call(this);
            null != this._spritesheet && (this.isReady ? this.onReady.emit(this) :
                this.start())
        },
        start: function() { this.isReady || (this.isReady = !0, this.gotoAndPlay(this.animName, this.animParams), this.autoCenter && null != this._animation && 0 < this._animation.width && this.centerAnchor(), null == this._animation && (this._isPlaying = !1, this.animName = null), null != this.owner && this.onReady.emit(this)) },
        onUpdate: function(a) { this.isReady && (this.updateAnim(a), Wd.prototype.onUpdate.call(this, a)) },
        updateAnim: function(a) {
            0 != (this._flags & 2) && this._isPlaying && (this.speed.update(a), this._newPos = this._position +
                a * this._currentFPS * this.speed._value, this._newPos > this._frames.length ? this.handleAnimComplete() : (this._position = this._newPos, this.gotoFrame(Math.floor(this._position) + 1)))
        },
        handleAnimComplete: function() {
            !this._animation.loop || null != this._frames && 1 >= this._frames.length ? (this.stop(), this.gotoFrame(this._frames.length)) : this._position = 0;
            if (null != this._completeCallback) { var a = this._completeCallback;
                this._completeCallback = null;
                a() } null != this.animComplete && (this.animComplete.emit(this._animation.name, this),
                this.nextAnim())
        },
        nextAnim: function(a) { null != this._playlist && (0 >= this._playlist.length ? (this._animCompletePlaylistCallback = this._playlist = null, this.onPlaylistComplete.emit()) : (this.gotoAnim(this._playlist.shift(), a), null == a && null != this._animCompletePlaylistCallback && (this._completeCallback = this._animCompletePlaylistCallback))) },
        setSpeed: function(a) { this.speed.set__(a); return this.speed },
        hasAnim: function(a) { return null == this._spritesheet ? !1 : null != this._spritesheet.getAnimation(a, this.prefix) },
        stop: function() {
            this._isPlaying = !1
        },
        gotoAndStop: function(a, b) { this.gotoAndPlay(a, b);
            this._isPlaying = !1; return this._animation },
        gotoAndPlay: function(a, b) {
            this.isReady && (this._playlist = null);
            if ("string" == typeof a) { if (!this.autoRestart && null != this._animation && a == this._animation.name && this._isPlaying) return this.gotoAnim(a, b), this._animation;
                this.gotoAnim(a, b) } else if ((a | 0) === a) this.gotoFrame(a, !0), this._position = this._currentFrame - 1;
            else if (a instanceof Array && null == a.__enum__) {
                this._playlist = a;
                if (0 >= this._playlist.length) throw "Received empty playlist!";
                this.nextAnim(b)
            }
            this._isPlaying = !0;
            return this._animation
        },
        gotoAnim: function(a, b) {
            if (null == this._spritesheet) this.animName = a, this.animParams = b;
            else {
                var c = this._spritesheet.getAnimation(a, this.prefix);
                if (null == c) fb.verbose && null;
                else if (this.animName = a, this.animParams = b, this._completeCallback = null, null == b) this.setAnim(c);
                else if ((b | 0) === b && 0 < b) this.setAnim(c), this.gotoAndPlay(b);
                else {
                    null != b.onComplete && (this._completeCallback = b.onComplete);
                    Object.prototype.hasOwnProperty.call(b, "next") && (null == this._playlist &&
                        (this._playlist = []), this._playlist.push(b.next));
                    null != this._playlist && (null != b.onPlaylistComplete ? (this.onPlaylistComplete.connect(b.onPlaylistComplete).once(), this._animCompletePlaylistCallback = b.onComplete) : null != this._completeCallback && (this.onPlaylistComplete.connect(this._completeCallback).once(), this._completeCallback = null));
                    this.setAnim(c, b.reverse);
                    if (Object.prototype.hasOwnProperty.call(b, "loop") && null != this.get_animation() && (!0 == b.loop || !1 == b.loop)) this.get_animation().loop = b.loop;
                    0 < b.frame &&
                        this.gotoAndPlay(b.frame)
                }
            }
        },
        setAnim: function(a, b) { null == b && (b = !1);
            this._animation = a;
            this._frames = b ? a.getReversedFrames() : a.frames;
            this._currentFPS = 0 < this._animation.fps ? this._animation.fps : this.get_spritesheet().fps;
            this.nextCuePointFrame = this._cuepointIndex = -1;
            this.gotoFrame(1, !0);
            this.getNextCuePoint();
            this._position = 0; if (null == this._frames) throw "Animation '" + this._defaultAnimName + "' does not have frames!";
            this.autoCenter && this.centerAnchor() },
        gotoFrame: function(a, b) {
            null == b && (b = !1);
            1 > a && (a = 1);
            a > this._frames.length && (a = this._frames.length);
            if (this._currentFrame != a || b) - 1 < this.nextCuePointFrame && a >= this.nextCuePointFrame && this._currentFrame != a && (this.onCuePoint.emit(this._animation.cues[this._cuepointIndex].name, this), this.nextCuePointFrame = -1, this.getNextCuePoint()), a < this._currentFrame && (this._cuepointIndex = -1, this.getNextCuePoint()), this._currentFrame = a, this._currentSymbol = this._frames[a - 1]
        },
        getNextCuePoint: function() {
            null == this._animation.cues ? this.nextCuePointFrame = -1 : (this._cuepointIndex++,
                null == this._animation.cues[this._cuepointIndex] ? this._cuepointIndex-- : this.nextCuePointFrame = this._animation.cues[this._cuepointIndex].frame)
        },
        get_spritesheet: function() { return this._spritesheet },
        set_isPlaying: function(a) { return this._isPlaying = a },
        get_animation: function() { return this._animation },
        __class__: fb,
        __properties__: k(Wd.prototype.__properties__, { get_animation: "get_animation", set_isPlaying: "set_isPlaying", get_spritesheet: "get_spritesheet" })
    });
    var cg = function(a, b, c) {
        this._duration = 0;
        this.startDispose = !1;
        this._duration = c;
        fb.call(this, a, b)
    };
    g["game.pickup.items.AutoDisposeFx"] = cg;
    cg.__name__ = ["game", "pickup", "items", "AutoDisposeFx"];
    cg.__super__ = fb;
    cg.prototype = k(fb.prototype, { onUpdate: function(a) { fb.prototype.onUpdate.call(this, a);
            this.startDispose && (this._duration -= a, 0 >= this._duration && this.owner.dispose()) }, __class__: cg });
    var Ic = function() { this.onLevelLoaded = new S;
        i.call(this) };
    g["stolo.ensys.system.LevelSystem"] = Ic;
    Ic.__name__ = ["stolo", "ensys", "system", "LevelSystem"];
    Ic.__super__ = i;
    Ic.prototype =
        k(i.prototype, {
            get_name: function() { return "LevelSystem_13" },
            onAdded: function() { this._actors = this.owner._compMap.ActorSystem_54;
                this._renderer = this.owner._compMap.RendererSystem_56 },
            onRemoved: function() { i.prototype.onRemoved.call(this);
                this._renderer = this._actors = null },
            load: function(a) { this.build(a.layers, a.actors);
                this.onLevelLoaded.emit(a) },
            build: function(a, b) {
                if (null == a) throw "No layers in level!";
                for (var c = 0; c < a.length;) { var d = a[c];++c;
                    this._renderer.addLayer(d) }
                if (null != b)
                    for (c = 0; c < b.length;) d =
                        b[c], ++c, null != d.template && (d.template.spawner = 1), this.spawnActor(d)
            },
            spawnActor: function(a) { return this._actors.spawn(a) },
            __class__: Ic
        });
    var Zg = function() { this.endzoneOffset = 0;
        this.characters = [];
        this.opponentsStatic = [];
        this.opponents = [];
        Ic.call(this) };
    g["game.system.GameLevel"] = Zg;
    Zg.__name__ = ["game", "system", "GameLevel"];
    Zg.__super__ = Ic;
    Zg.prototype = k(Ic.prototype, {
        onStart: function() { this._system = this.owner._compMap.BaseGameSystem_24;
            Ic.prototype.onStart.call(this) },
        dispose: function() { Ic.prototype.dispose.call(this) },
        load: function(a) { this.data = a;
            Ic.prototype.load.call(this, a) },
        build: function(a, b, c) { n.nbLap = null != this.data.data.nbLap ? this.data.data.nbLap : Q.defaultLap; var d = A.createImage("bg_env" + this.data.env, E.getPack("sprites_env" + this.data.env));
            this.owner.addChild((new p).add(d), !1);
            Ic.prototype.build.call(this, a, b, c) },
        createPlayers: function(a) {
            "tuto1" == n.currentLevel && (n.opponents = []);
            Cf.globalItemCooldown = n.currentDifficulty.globalItemCooldown;
            for (var a = this.createPlayer(a), b, c, d = 0, e = n.opponents.length; d <
                e;) { var f = d++;
                c = n.opponents[f];
                b = dc.getTemplate(c);
                this.opponents.push(this.createOpponent(G.getDataByName(c), b, f + 1)); if ("tuto2" == n.currentLevel) break } this.createEndZone();
            this.createCrowd();
            this.cameraTarget = this._system.actors.spawn({ template: { key: "camera_target" }, game_cameraTarget: {} });
            b = this.cameraTarget._compMap.GameCameraTarget_42;
            b.setTarget(a);
            b.animateFrom(250 * n.opponents.length, 125, 3);
            this._system.hud.setPlayer(a)
        },
        createPlayer: function(a) {
            if (null == n.currentCharacter) throw "GameData.currentCharacter cannot be null!";
            var b = dc.getTemplate(n.currentCharacter.name);
            b.kart_customization.inventorySave = n.currentCharacter.name;
            b.speed_control = {};
            this.player = this.createCharacter(n.currentCharacter, b, 0);
            b = this.player._compMap.CustomizationComponent_18;
            if (b.isLoaded) this.onInventoryReady();
            else b.onInventoryReady.connect(m(this, this.onInventoryReady)).once();
            null == this.player._compMap.Player_22 && this.player.add(new Vg);
            null != this.player._compMap.CharacterAI_17 && this.player._compMap.CharacterAI_17.dispose();
            null != a && (this.player._compMap.Player_22.controls =
                a);
            return this.player
        },
        onInventoryReady: function() { T.trackMatchStarted(this.player._compMap.CustomizationComponent_18.inventory) },
        createOpponent: function(a, b, c) { b.character_ai = { bumpAgression: 0 == c % 2, itemAgression: !0 };
            b.ai_speed_control = {};
            b.elastic_ai = {};
            a = this.createCharacter(a, b, c);
            b = a._compMap.SpeedControl_21;
            b.maxSpeed += n.currentDifficulty.speedModifier;
            b.rubberTime += n.currentDifficulty.rubberTime;
            a._compMap.ElasticAI_15.elasticSpeed = n.currentDifficulty.elasticSpeed; return a },
        createCharacter: function(a,
            b, c) {
            c = this.getSpawnPoint(c);
            null == b.lane_request && (b.lane_request = {});
            b.lane_request.laneId = I.__cast(c._compMap.SpawnPointComponent_14, Ug).laneId;
            b = this._system.actors.spawn(b);
            c = c._compMap.TransformComponent_70;
            ua.codeUnlocked("BACKWARD") ? I.__cast(b._compMap.Sprite_2, ec).flipX = -1 : I.__cast(b._compMap.Sprite_2, ec).flipX = 1;
            b._compMap.TransformComponent_70.position = { x: c.position.x, y: c.position.y };
            b._compMap.PhysicsComponent_44.setPosition(c.position.x, c.position.y);
            dc.addCharacterToKart(b, a.name);
            this.characters.push(b);
            return b
        },
        getSpawnPoint: function(a) { if (null == this._spawnPoints && (this._spawnPoints = this._system.actors.getActorsByTemplate("lane_spawn_point"), null == this._spawnPoints || 1 > this._spawnPoints.length)) throw "No spawn point found!"; return this._spawnPoints[a] },
        createEndZone: function() { this.endzoneOffset = 250 * (this.opponents.length + 2);
            this._actors.spawn({ template: { key: "end_zone", spawner: 1 }, transform: { position: { x: this.endzoneOffset, y: 150 } } }) },
        createCrowd: function() {
            for (var a = Math.ceil(Math.max(2, this.opponents.length /
                    2 + 1)), b = 0; b < a;) this._actors.spawn({ template: { key: "crowd" }, transform: { position: { x: this.endzoneOffset - 546 * b++, y: -60 } } })
        },
        __class__: Zg
    });
    var Cf = function() { this._nextCheck = this._aiCooldown = 0;
        this._positions = [];
        this.time = 0;
        this.onEnd = new ga;
        this.onPlayerLap = new S;
        this.onGameStart = new ga;
        this.isStarted = !1;
        this.onPositionChanged = new ga;
        i.call(this) };
    g["game.system.GameLogic"] = Cf;
    Cf.__name__ = ["game", "system", "GameLogic"];
    Cf.__super__ = i;
    Cf.prototype = k(i.prototype, {
        get_name: function() { return "GameLogic_38" },
        onAdded: function() { i.prototype.onAdded.call(this);
            this._disposer = this.owner._compMap.Disposer_72;
            this._system = this.owner._compMap.BaseGameSystem_24;
            this._level = this._system.level;
            this._levelMusic = t.playMusic("gameplay_env_" + n.env) },
        dispose: function() { this._level = this._system = this._disposer = null;
            null != this._levelMusic && this._levelMusic.dispose();
            i.prototype.dispose.call(this) },
        onUpdate: function(a) {
            this.isStarted && (this.time += a, i.prototype.onUpdate.call(this, a), this._aiCooldown -= a, this._nextCheck -=
                a, 0 >= this._nextCheck && (this.checkPositions(), this._nextCheck = 0.3))
        },
        onStart: function() { i.prototype.onStart.call(this);
            this.isStarted || (this.time = 0, this._level.load(Za.get(n.currentLevel)), n.boxCollected = 0, n.itemUsed = 0, n.boosts = 0, n.obstaclesHit = 0, n.playersBumped = 0, n.playerTimesBumped = 0) },
        createPlayers: function() {
            this._level.createPlayers(this._system.controls);
            for (var a = 0, b = this._level.characters; a < b.length;) {
                var c = b[a];
                ++a;
                this._disposer.add(c._compMap.Kart_4.onReachEnd.connect(m(this, this.onReachEnd)));
                this._positions.unshift(c)
            }
            this.startCountdown()
        },
        startCountdown: function() { this._system.hud.callouts.show(Wg, 0, { onGo: m(this, this.countdownComplete) }) },
        countdownComplete: function() { var a = this;
            this.isStarted = !0;
            this.activateKarts();
            this.onGameStart.emit();
            n.isForFun && B.delayCallTo(function() { a._system.hud.callouts.show(Nj, 0, { onGo: m(a, a.countdownComplete) }) }, 1, this.owner.parent) },
        end: function() {
            this.isStarted && (this.isStarted = !1, n.hasWon = 3 >= this.getPlayerPosition(), this._system.setSpeed(0, 1), n.currentTime =
                this.time, n.position = this.getPlayerPosition(), this.savePositions(), this.onEnd.emit(), null != this._levelMusic && this._levelMusic.dispose(), t.play("sting_env_" + n.env), B.delayCallTo(m(this, this.exit), 1.5, this.owner.parent))
        },
        exit: function() {
            "tuto1" == n.currentLevel ? (n.currentLevel = "tuto2", N.change("GameplayLoading")) : "tuto2" == n.currentLevel ? n.save.tutorialSeen ? n.isTournament ? N.change("SelectLevel") : (n.currentLevel = Za.getRandom(), N.change("GameplayLoading")) : (n.save.tutorialSeen = !0, n.save.save(), N.change("SelectMode")) :
                N.change("Win")
        },
        onReachEnd: function(a, b) { var c = a._compMap.Kart_4.isPlayer;
            b > n.nbLap ? c && this.end(0 == this._positions.indexOf(this._level.player)) : c && this.onPlayerLap.emit(b) },
        getPosition: function(a) { return this._positions.indexOf(a) + 1 },
        getKartAtPosition: function(a) { return this._positions[a - 1] },
        getPlayerPosition: function() { return this.getPosition(this._level.player) },
        activateKarts: function() { for (var a = 0, b = this._level.characters; a < b.length;) { var c = b[a];++a;
                c._compMap.Kart_4.enable(!0) } },
        checkPositions: function() {
            for (var a,
                    b, c = !1, d = 1, e = this._positions.length; d < e;) { var f = d++;
                a = this._positions[f - 1]._compMap.TransformComponent_70;
                b = this._positions[f]._compMap.TransformComponent_70;
                a.position.x < b.position.x && (a = this._positions[f - 1], this._positions[f - 1] = this._positions[f], this._positions[f] = a, this._positions[f - 1]._compMap.Kart_4.overtake(), c = !0) } c && this.onPositionChanged.emit()
        },
        savePositions: function() {
            for (var a = [], b = 0, c = this._positions; b < c.length;) {
                var d = c[b];
                ++b;
                a.push({
                    name: d._compMap.Kart_4.character.characterName,
                    isPlayer: d == this._level.player
                })
            }
            n.positions = a
        },
        useItem: function() { this._aiCooldown = Cf.globalItemCooldown },
        canUseItem: function() { return 0 >= this._aiCooldown },
        __class__: Cf
    });
    var sc = function(a) { this._disposer = new za;
        this.onInitComplete = new ga;
        i.call(this);
        this.dimensions = a };
    g["stolo.ensys.system.BaseGameSystem"] = sc;
    sc.__name__ = ["stolo", "ensys", "system", "BaseGameSystem"];
    sc.__super__ = i;
    sc.prototype = k(i.prototype, {
        get_name: function() { return "BaseGameSystem_24" },
        dispose: function() {
            i.prototype.dispose.call(this);
            null != this.parallelEntity && (this.parallelEntity.dispose(), this.parallelEntity = null);
            this.level = this.camera = this.culling = this.physics = this.sound = this.actors = this.renderer = this.parallelScript = this._speedAdjuster = this._disposer = null
        },
        onAdded: function() { i.prototype.onAdded.call(this);
            this.owner.add(this._disposer);
            this.parallelEntity = new p;
            this.parallelScript = new Ob;
            this.parallelEntity.add(this.parallelScript);
            this._speedAdjuster = new Vf;
            this.owner.add(this._speedAdjuster);
            this.buildSubSystems();
            this.init() },
        onStart: function() { i.prototype.onStart.call(this);
            null != this.owner.parent ? this.owner.parent.addChild(this.parallelEntity) : x.root.addChild(this.parallelEntity) },
        buildSubSystems: function() { this.buildRenderer();
            this.buildCamera();
            this.buildActors();
            this.buildPhysics();
            this.buildSound();
            this.buildLevel() },
        buildRenderer: function() { this.renderer = new Oj(this.dimensions);
            this.culling = new Pj(this.renderer, this.dimensions);
            this.owner.add(this.renderer);
            this.owner.add(this.culling) },
        buildCamera: function() {
            this.camera =
                new Ye;
            this.owner.add(this.camera)
        },
        buildActors: function() { this.actors = new Df;
            this.owner.add(this.actors) },
        buildPhysics: function() { this.physics = new td;
            this.owner.add(this.physics) },
        buildSound: function() { this.sound = new Qj;
            this.owner.add(this.sound) },
        buildLevel: function() { this.level = new Ic;
            this.owner.add(this.level) },
        init: function() { this.onInitComplete.emit() },
        setSpeed: function(a, b, c) {
            null == b && (b = 0.2);
            0 >= b ? (this._speedAdjuster.scale.set__(a), this._speedAdjuster.scale.set_behavior(null)) : this._speedAdjuster.scale.animateTo(a,
                b, c)
        },
        __class__: sc
    });
    var ch = function() { var a = new Na(0, 0, Q.width, Q.height);
        sc.call(this, a) };
    g["game.system.GameSystem"] = ch;
    ch.__name__ = ["game", "system", "GameSystem"];
    ch.__super__ = sc;
    ch.prototype = k(sc.prototype, {
        onAdded: function() { sc.prototype.onAdded.call(this) },
        dispose: function() { this.touchControls = this.controls = this.logic = this.hud = this.world = this.tuto = null;
            sc.prototype.dispose.call(this) },
        buildSubSystems: function() {
            sc.prototype.buildSubSystems.call(this);
            this.buildControls();
            this.buildLogic();
            this.buildWorld();
            this.buildHud();
            this.buildTutorial();
            this.camera.setLimits(-1, -1, -1, -1)
        },
        buildCamera: function() { sc.prototype.buildCamera.call(this);
            this.camera.set_camera(new wj);
            this.camera.centerRenderer() },
        buildPhysics: function() { this.physics = new Cj;
            this.owner.add(this.physics);
            Ia.init();
            this.physics.setGravity(0, Ia.gravity);
            this.physics.stepMode = 0 },
        buildLevel: function() { this.level = new Zg;
            this.owner.add(this.level) },
        buildRenderer: function() { sc.prototype.buildRenderer.call(this);
            this.renderer.getContainer().add(new Rj) },
        buildHud: function() { this.hud = new Sj;
            this.owner.add(this.hud) },
        buildControls: function() { this.controls = x._platform.getTouch().get_supported() ? this.touchControls = new zj : new ze;
            this.owner.add(this.controls) },
        buildLogic: function() { this.logic = new Cf;
            this.owner.add(this.logic) },
        buildWorld: function() { this.world = new Tj;
            this.owner.add(this.world) },
        buildTutorial: function() { this.tuto = new Uj;
            this.owner.add(this.tuto) },
        __class__: ch
    });
    var Vj = function() { this._visible = !1;
        r.call(this) };
    g["game.tutorial.TutorialPopup"] =
        Vj;
    Vj.__name__ = ["game", "tutorial", "TutorialPopup"];
    Vj.__super__ = r;
    Vj.prototype = k(r.prototype, {
        onStart: function() { r.prototype.onStart.call(this);
            this._pack = E.getPack("ui_tuto") },
        show: function(a) {
            var b = "generic",
                c = "HTP_" + a,
                d = !1,
                e = new X(480, 140),
                f = new X(-20, 50),
                l = 350,
                v;
            v = o.mobile ? 225 : 0;
            switch (y.parseInt(a)) {
                case 1:
                    d = !0;
                    b = "accelerate";
                    e.set(260 + v, 485);
                    f.set(10, 50);
                    break;
                case 2:
                    d = !0;
                    b = "lanes";
                    e.set(260 + v, 485);
                    f.set(35, 50);
                    l = 320;
                    break;
                case 3:
                    b = "speed_boost";
                    break;
                case 5:
                    d = !0;
                    b = "jump";
                    e.set(695, 490);
                    o.mobile ?
                        f.set(25, 45) : f.set(120, 40);
                    l = 150;
                    break;
                case 6:
                    e.set(480, 140);
                    f.set(-20, 50);
                    break;
                case 9:
                    d = !0;
                    b = "lanes";
                    e.set(260, 485);
                    f.set(35, 58);
                    break;
                case 10:
                    d = !0;
                    b = "jump";
                    e.set(695, 490);
                    o.mobile ? f.set(25, 45) : f.set(120, 40);
                    l = 150;
                    break;
                case 12:
                    d = !0, b = "item", e.set(695, 490), f.set(25, 40), l = 250
            }
            d && o.mobile && (b += "_m", c += "_M");
            this._visible ? (this._image.setAlpha(0), this._image.texture = this._pack.getTexture(b), this._text.setText(c)) : (this._image = A.createImage(b, this._pack), this._image.setAlpha(0), this.owner.addChild((new p).add(this._image)),
                this._text = A.createText(c, "23_white_shadow", this._image.owner), this._text.setWrapWidth(l).setAlign(Z.Center), this._visible = !0);
            this._image.centerAnchor().setXY(e.x, e.y);
            this._text.setWrapWidth(l);
            this._text.setXY(this._image.getNaturalWidth() / 2 + f.x - 150, f.y - this._text.getNaturalHeight() / 2);
            this._image.alpha.animateTo(1, 0.2)
        },
        __class__: Vj
    });
    var Uj = function() { i.call(this) };
    g["game.tutorial.TutorialSystem"] = Uj;
    Uj.__name__ = ["game", "tutorial", "TutorialSystem"];
    Uj.__super__ = i;
    Uj.prototype = k(i.prototype, { get_name: function() { return "TutorialSystem_30" }, onStart: function() { i.prototype.onStart.call(this);
            this._popup = new Vj;
            this.owner._compMap.GameHud_35.progress.owner.addChild((new p).add(this._popup), !1) }, dispose: function() { this._popup.owner.dispose();
            this._popup = null;
            i.prototype.dispose.call(this) }, show: function(a) { this._popup.show(a) }, __class__: Uj });
    var yf = function(a, b) { null == b && (b = "neutral");
        null == a && (a = "idle");
        this.onReady = new ga;
        this.container = new p;
        this._anim = a;
        this._characterAnim = b;
        r.call(this) };
    g["game.ui.CharacterKart"] = yf;
    yf.__name__ = ["game", "ui", "CharacterKart"];
    yf.__super__ = r;
    yf.prototype = k(r.prototype, {
        dispose: function() { r.prototype.dispose.call(this);
            this._template = this._data = this.spine = this.container = null;
            this._custo.dispose() },
        initCharacter: function(a) { null != this._data && (null != this.container && this.container.dispose(), this.container = null);
            this._data = a;
            this._template = dc.getTemplate(this._data.name);
            E.loadPacks(["spine/" + this._data.name, this._template.spine.pack], m(this, this.onPackLoaded)) },
        onPackLoaded: function() {
            null != this.owner && (this.container = new p, this.spine = new ec, this.spine.pack = this._template.spine.pack, this.spine.asset = this._template.spine.asset, this.spine.defaultAnimation = this._anim, this.container.add(this.spine), this._custo = new Ed, this._custo.inventorySave = this._data.name, this._custo.inventoryJson = this._template.kart_customization.inventoryJson, this._custo.onInventoryReady.connect(m(this, this.onInventoryReady)).once(), this.container.add(this._custo), this.container.add(new za),
                this.owner.addChild(this.container), dc.addCharacterToKart(this.container, this._data.name, this._characterAnim))
        },
        onInventoryReady: function() { this.onReady.emit() },
        equipItem: function(a, b, c) { null == c && (c = !1);
            this._custo.equipItem(a, b); "body" == b ? (this._custo.saveInventory(), this.initCharacter(this._data)) : c && this.save() },
        getItem: function(a) { return this._custo.getItem(a).id },
        save: function() { this._custo.saveInventory() },
        __class__: yf
    });
    var dh = function(a, b) {
        null == a && (a = !0);
        this._doCheckLoot = !0;
        this._isCharBuilt = !1;
        this.onClose = new S;
        this.onEquip = new S;
        this.onChange = new S;
        this.isBuilt = !1;
        r.call(this);
        this._doCheckLoot = a;
        this._kart = b
    };
    g["game.ui.CustomizePopup"] = dh;
    dh.__name__ = ["game", "ui", "CustomizePopup"];
    dh.__super__ = r;
    dh.prototype = k(r.prototype, {
        onAdded: function() { r.prototype.onAdded.call(this);
            this._pack = E.getPack("ui");
            this._isCharBuilt = this.checkNewCharacter(); var a = this.checkCupLoot();!this._isCharBuilt && !a && this._doCheckLoot && this.checkLoot() },
        animate: function() {
            B.to(this._popup, { x: 0 }, { ease: D.quadOut });
            B.to(this._popupBg, { alpha: 0.5 }, { time: 0.3 })
        },
        checkLoot: function() { if (!(0.8 < Math.random())) { var a = Ba.getLoot(n.currentLevel); "" != a && (this._loot = fa.getById(a), n.save.setLoot(n.currentCharacter.name, a), T.trackItem("newStuffUnlocked", this._loot), this.trackEvent("newGearUnlocked"), this.buildPopup("NEW_GEAR_UNLOCKED", !0), fa.getAssetPack(this._loot, m(this, this.onItemLoaded))) } },
        checkCupLoot: function() {
            var a = "";
            null != n.finalPosition[0] && n.finalPosition[0].isPlayer && (a = n.currentDifficulty != sd.EASY ? Q.difficultyLootUnlocks.get(n.currentCup) :
                Q.cupLootUnlocks.get(n.currentCup), n.save.isLootUnlocked(G.list[0].name, a) && (a = ""));
            return "" != a ? (this._loot = fa.getById(a), n.save.setLoot(n.currentCharacter.name, a), T.trackItem("newStuffUnlocked", this._loot), this.trackEvent("newGearUnlocked"), this.buildPopup("NEW_GEAR_UNLOCKED"), fa.getAssetPack(this._loot, m(this, this.onItemLoaded)), !0) : !1
        },
        checkNewCharacter: function() {
            for (var a = 0, b = G.list; a < b.length;) {
                var c = b[a];
                ++a;
                if (n.save.isCharacterLocked(c.name)) {
                    var d = c.unlocks;
                    if (null != d && (null != d.quickMatch &&
                            !n.isTournament && !n.isForFun || null != d.forFun && n.isForFun || null != d.games && d.games <= n.save.gamesPlayed || null != d.allCups && n.save.isAllCupsUnlocked() || null != d.cup && d.cup == n.currentCup && (null != d.level && d.level == n.currentLevel || null != n.finalPosition[0] && null != d.position && n.finalPosition[0].isPlayer))) return T.trackCharUnlocked(c.name), this.buildCharPopup(c.name), !0
                }
            }
            return !1
        },
        buildCharPopup: function(a) {
            n.save.unlockCharacter(a);
            this._newChar = a;
            this.buildPopup("NEW_CHARACTER_UNLOCKED");
            E.createDynamicPack("face_" +
                a, ["ui_character/" + a + ".png"], m(this, this.onFaceLoaded))
        },
        onFaceLoaded: function(a) { a = A.createImage(this._newChar, a);
            a.centerAnchor().setXY(550, 115);
            this._bg.owner.addChild((new p).add(a));
            this.addChangeButton() },
        onItemLoaded: function(a, b) {
            var c = A.createImage(this._loot.parts[0].url, b),
                d = 130 / c.getNaturalWidth(),
                e = 130 / c.getNaturalHeight();
            c.setScale(Math.min(d, e));
            c.centerAnchor().setXY(275, 90);
            if ("shoulders" == this._loot.type || "flag5" == this._loot.id || "flag10" == this._loot.id) d = c.x, d.set__(d._value - 10),
                d = c.y, d.set__(d._value - 25);
            this._bg.owner.addChild((new p).add(c));
            this.addEquipButton()
        },
        buildPopup: function(a, b) {
            null == b && (b = !1);
            this.isBuilt = !0;
            t.play("unlock", "SFX");
            this._popupBg = new Wa(0, Q.width, Q.height);
            this._popupBg.setAlpha(0);
            this.owner.addChild((new p).add(this._popupBg));
            this._popup = new r;
            this._popup.setXY(-694, 0);
            this.owner.addChild((new p).add(this._popup));
            this._bg = b ? A.createImage("popup_item", this._pack) : A.createImage("popup", this._pack);
            this._bg.setXY(0, 250);
            this._popup.owner.addChild((new p).add(this._bg));
            this._glow = A.createImage("popup_beams", this._pack);
            this._glow.centerAnchor().setScale(1.2);
            this._glow.setXY(550, 115);
            this._bg.owner.addChild((new p).add(this._glow));
            var c = A.createText(a, "23_white_shadow", this._bg.owner);
            c.setWrapWidth(250);
            c.setXY(130, 40);
            c.setAlign(Z.Right);
            b ? (c.setXY(-10, 40), c.setAlign(Z.Center), this._statbox = new Vd, this._statbox.labels = ["SPEED", "TRACTION", "STRENGTH"], this._statbox.yOffset = 47, this._statbox.setXY(320, 10), this._statbox.addBg = !1, this._bg.owner.addChild((new p).add(this._statbox)),
                this.updateStats(), this._glow.setXY(275, 90)) : (c = A.createImage("popup_arrow", this._pack), c.centerAnchor().setXY(400, 65), this._bg.owner.addChild((new p).add(c)))
        },
        updateStats: function() {
            if (!(null == this._statbox || null == this._kart.container)) {
                var a = oa.getItemsStats(this._kart.container);
                this._statbox.baseStats = [a.speed - this._loot.stats.speed | 0, a.traction - this._loot.stats.traction | 0, a.strength - this._loot.stats.strength | 0];
                this._statbox.addedStats = [this._loot.stats.speed, this._loot.stats.traction, this._loot.stats.strength];
                this._statbox.update()
            }
        },
        addChangeButton: function() { var a = $a.createTextImageButton("btn_green", "BTN_CHANGE", "20_white", m(this, this.change), null, { text: { y: -3 } });
            a.setXY(335, 125);
            a.scaleX.set_behavior(new Ea(1, 0.95, 0.35));
            a.scaleY.set_behavior(new Ea(1, 0.95, 0.35));
            this._bg.owner.addChild(a.owner) },
        addEquipButton: function() {
            var a = $a.createImageButton("btn_quit", m(this, this.onClosePopup));
            a.setXY(515, 0);
            this._bg.owner.addChild(a.owner);
            a = $a.createTextImageButton("btn_green", "BTN_EQUIP", "20_white", m(this,
                this.equip), null, { text: { y: -3 } });
            a.setXY(110, 120);
            a.scaleX.set_behavior(new Ea(1, 0.95, 0.35));
            a.scaleY.set_behavior(new Ea(1, 0.95, 0.35));
            this._bg.owner.addChild(a.owner)
        },
        change: function() { t.play("click", "UI");
            this.onClose.emit(this.isBuilt && this._isCharBuilt) },
        equip: function() { t.play("click", "UI");
            T.trackItem("newStuffEquipped", this._loot);
            this.onEquip.emit(this._loot) },
        onClosePopup: function() { t.play("click", "UI");
            this.onClose.emit(this.isBuilt && this._isCharBuilt) },
        trackEvent: function() {
            null != this._loot &&
                this.setAnalyticItem({ matchType: n.isTournament ? "Tournament" : "Quick Match", gearType: this._loot.type, characterSelected: n.currentCharacter.name, flagName: "", helmetName: "", armorName: "" })
        },
        setAnalyticItem: function(a) { switch (this._loot.type) {
                case "flag":
                    a.flagName = this._loot.id; break;
                case "head":
                    a.helmetName = this._loot.id; break;
                case "shoulders":
                    a.armorName = this._loot.id } },
        __class__: dh
    });
    var bh = function(a) { this._selectCallback = null;
        this.bgAlpha = 0.7;
        r.call(this);
        this._selectCallback = a };
    g["game.ui.DifficultyPopup"] =
        bh;
    bh.__name__ = ["game", "ui", "DifficultyPopup"];
    bh.__super__ = r;
    bh.prototype = k(r.prototype, {
        onStart: function() {
            r.prototype.onStart.call(this);
            this._bg = new Wa(0, Q.width, Q.height);
            this._bg.setAlpha(this.bgAlpha);
            this.owner.addChild((new p).add(this._bg));
            var a = A.createImage("popup_bg"),
                b = Q.width / 2,
                c = Q.height / 2;
            a.getNaturalWidth();
            a.getNaturalHeight();
            a.setXY(b, c).centerAnchor();
            this.owner.addChild((new p).add(a));
            a = A.createText("POPUP_DIFFICULTY", "23_white_shadow", this.owner);
            a.setWrapWidth(350);
            a.setXY(b -
                175, c - 110);
            a = $a.createTextImageButton("btn_green", "BTN_EASY", "23_white_shadow", m(this, this.onDiff), "ui");
            a.data = { difficulty: sd.EASY };
            a.setXY(b, c - 40);
            var d = a.owner._compMap.ButtonText_126.textSprite.y;
            d.set__(d._value - 3);
            this.owner.addChild(a.owner);
            a = $a.createTextImageButton("btn_green", "BTN_MEDIUM", "23_white_shadow", m(this, this.onDiff), "ui");
            a.data = { difficulty: sd.MEDIUM };
            a.setXY(b, c + 25);
            d = a.owner._compMap.ButtonText_126.textSprite.y;
            d.set__(d._value - 3);
            this.owner.addChild(a.owner);
            a = $a.createTextImageButton("btn_green",
                "BTN_HARD", "23_white_shadow", m(this, this.onDiff), "ui");
            a.data = { difficulty: sd.HARD };
            a.setXY(b, c + 90);
            b = a.owner._compMap.ButtonText_126.textSprite.y;
            b.set__(b._value - 3);
            this.owner.addChild(a.owner);
            b = $a.createImageButton("btn_quit", m(this, this.onQuit), "ui");
            b.setXY(705, 155);
            this.owner.addChild(b.owner);
            B.from(this._bg, { alpha: 0 }, { time: 1.5, ease: D.quintOut })
        },
        onQuit: function() { T.trackUI("Cancel", "Difficulty Popup");
            t.play("click", "UI");
            this.owner.dispose() },
        onDiff: function(a) {
            n.currentDifficulty = a.data.difficulty;
            this._selectCallback()
        },
        __class__: bh
    });
    var uj = function() { this.bgAlpha = 0.7;
        r.call(this) };
    g["game.ui.QuitPopup"] = uj;
    uj.__name__ = ["game", "ui", "QuitPopup"];
    uj.__super__ = r;
    uj.prototype = k(r.prototype, {
        onStart: function() {
            r.prototype.onStart.call(this);
            this._bg = new Wa(0, Q.width, Q.height);
            this._bg.setAlpha(this.bgAlpha);
            this.owner.addChild((new p).add(this._bg));
            var a = A.createImage("popup_bg"),
                b = Q.width / 2,
                c = Q.height / 2;
            a.getNaturalWidth();
            a.getNaturalHeight();
            a.setXY(b, c).centerAnchor();
            this.owner.addChild((new p).add(a));
            a = A.createText("POPUP_QUIT", "23_white_shadow", this.owner);
            a.setWrapWidth(350);
            a.setXY(b - 175, c - 75);
            b = $a.createTextImageButton("btn_orange", "BTN_CANCEL", "23_white_shadow", m(this, this.onCancel), "ui");
            b.setXY(402, 321);
            c = b.owner._compMap.ButtonText_126.textSprite.y;
            c.set__(c._value - 3);
            this.owner.addChild(b.owner);
            b = $a.createTextImageButton("btn_green", "BTN_QUIT", "23_white_shadow", m(this, this.onQuit), "ui");
            b.setXY(560, 321);
            c = b.owner._compMap.ButtonText_126.textSprite.y;
            c.set__(c._value - 3);
            this.owner.addChild(b.owner);
            B.from(this._bg, { alpha: 0 }, { time: 1.5, ease: D.quintOut, delay: 0 })
        },
        onCancel: function() { T.trackUI("Cancel", "Quit Popup");
            t.play("click", "UI");
            this.owner.dispose() },
        onQuit: function() { T.trackUI("Select Character", "Quit Popup");
            t.play("click", "UI");
            N.change("SelectMode") },
        __class__: uj
    });
    var ta = function() { this.hideDelay = 1;
        this.complete = new S;
        r.call(this) };
    g["game.ui.callouts.BaseCallout"] = ta;
    ta.__name__ = ["game", "ui", "callouts", "BaseCallout"];
    ta.__super__ = r;
    ta.prototype = k(r.prototype, {
        onAdded: function() {
            r.prototype.onAdded.call(this);
            this.build()
        },
        build: function() { this._animation = new Wj;
            this.owner.add(this._animation) },
        show: function(a, b) { this.set_visible(!0); if (!this._animation.isShowing) { var c = this.getShowSequence(b);
                c.onComplete.connect(m(this, this.showComplete)).once();
                this._animation.show(c, a) } },
        getShowSequence: function() { var a = this; return (new tc).addActions([new cb(function() { Zc.scaleIn(a) }), new ub(0.3), new cb(function() { Zc.shake(a) })]) },
        showComplete: function() { this.hide(this.hideDelay) },
        hide: function(a, b) {
            null == a && (a = 0);
            if (!this._animation.isHiding) { var c = this.getHideSequence(b);
                c.onComplete.connect(m(this, this.hideComplete)).once();
                this._animation.hide(c, a) }
        },
        getHideSequence: function() { var a = this; return (new tc).addActions([new cb(function() { Zc.scaleOut(a) })]) },
        hideComplete: function() { this.set_visible(!1);
            this.complete.emit(this) },
        dispose: function() { r.prototype.dispose.call(this) },
        createText: function(a, b, c) { a = C.getLocalizedTextSprite(a, b, null, null, c);
            a.disablePointer();
            this.addSprite(a); return a },
        addSprite: function(a) {
            null ==
                a.owner && (new p).add(a);
            this.owner.addChild(a.owner);
            return a
        },
        __class__: ta
    });
    var Xj = function() { ta.call(this) };
    g["game.ui.callouts.BumpCallout"] = Xj;
    Xj.__name__ = ["game", "ui", "callouts", "BumpCallout"];
    Xj.__super__ = ta;
    Xj.prototype = k(ta.prototype, { build: function() { ta.prototype.build.call(this);
            this.setScale(0);
            this._text = this.createText("BUMPED", "90_blue") }, __class__: Xj });
    var Yj = function() { this._calloutMap = new M;
        i.call(this) };
    g["game.ui.callouts.Callouts"] = Yj;
    Yj.__name__ = ["game", "ui", "callouts", "Callouts"];
    Yj.__super__ = i;
    Yj.prototype = k(i.prototype, {
        get_name: function() { return "Callouts_36" },
        dispose: function() { i.prototype.dispose.call(this); for (var a = this._calloutMap.iterator(); a.hasNext();) { var b = a.next();
                null != b.owner ? b.owner.dispose() : b.dispose() } this._currentCallout = this._calloutMap = null },
        getCurrentCallout: function() { return this._currentCallout },
        show: function(a, b, c) {
            b = ia.getClassName(a);
            if (ia.getClass(this._currentCallout) == a && 0 != (this._currentCallout._flags & 2)) return this._currentCallout;
            null != this._currentCallout &&
                this._currentCallout.hide();
            this._calloutMap.exists(b) ? this._currentCallout = this._calloutMap.get(b) : (a = this._currentCallout = ia.createInstance(a, []), this._calloutMap.set(b, a), a);
            null == this._currentCallout.owner && (new p).add(this._currentCallout);
            this.owner.addChild(this._currentCallout.owner);
            this._currentCallout.setXY(0.5 * Q.width, 0.5 * Q.height);
            this._currentCallout.complete.connect(m(this, this.onCalloutComplete)).once();
            this._currentCallout.show(0, c);
            return this._currentCallout
        },
        onCalloutComplete: function(a) {
            if (null !=
                a.owner && null != a.owner.parent) { var b = a.owner;
                b.remove(a);
                b.parent.removeChild(b) } this._currentCallout == a && (this._currentCallout = null)
        },
        __class__: Yj
    });
    var Nj = function() { ta.call(this) };
    g["game.ui.callouts.CheatCallout"] = Nj;
    Nj.__name__ = ["game", "ui", "callouts", "CheatCallout"];
    Nj.__super__ = ta;
    Nj.prototype = k(ta.prototype, {
        build: function() {
            ta.prototype.build.call(this);
            this.setScale(0);
            this._text = this.createText("CHEAT_" + n.cheatsForFun[0], "90_blue");
            this._text.setWrapWidth(960);
            var a = this._text.x;
            a.set__(a._value -
                480);
            this._text.anchorY.set__(0.5 * this._text.getNaturalHeight())
        },
        getShowSequence: function(a) { var b = this,
                a = ta.prototype.getShowSequence.call(this, a); if (1 < n.cheatsForFun.length)
                for (var c = 1, d = n.cheatsForFun.length; c < d;) { var e = [c++];
                    a.addActions([new ub(0.5), new cb(function(a) { return function() { b._text.setText("CHEAT_" + n.cheatsForFun[a[0]]);
                            b._text.setWrapWidth(960); var c = b._text.x;
                            c.set__(c._value - 480);
                            b._text.anchorY.set__(0.5 * b._text.getNaturalHeight());
                            Zc.scaleIn(b) } }(e)), new ub(0.3), new cb(function() { return function() { Zc.shake(b) } }())]) }
            return a },
        __class__: Nj
    });
    var Zj = function() { ta.call(this) };
    g["game.ui.callouts.CheatPickupCallout"] = Zj;
    Zj.__name__ = ["game", "ui", "callouts", "CheatPickupCallout"];
    Zj.__super__ = ta;
    Zj.prototype = k(ta.prototype, { build: function() { ta.prototype.build.call(this);
            this.setScale(0);
            this._text = this.createText("CHEAT_" + n.cheatPickup, "90_blue") }, __class__: Zj });
    var $j = function() { ta.call(this) };
    g["game.ui.callouts.EndCallout"] = $j;
    $j.__name__ = ["game", "ui", "callouts", "EndCallout"];
    $j.__super__ = ta;
    $j.prototype = k(ta.prototype, {
        build: function() {
            ta.prototype.build.call(this);
            this.setScale(0);
            this._text = -1 < n.currentLevel.indexOf("tuto") ? this.createText("NICE", "90_blue") : this.createText("POSITION_" + n.position, "90_blue")
        },
        __class__: $j
    });
    var Wg = function() { this._nums = [];
        this.boostAvailable = !1;
        ta.call(this) };
    g["game.ui.callouts.GoCallout"] = Wg;
    Wg.__name__ = ["game", "ui", "callouts", "GoCallout"];
    Wg.__super__ = ta;
    Wg.prototype = k(ta.prototype, {
        build: function() {
            ta.prototype.build.call(this);
            for (var a = 1; 4 > a;) {
                var b = this.createText(a++ + "", "90_blue");
                b.x.set__(-200);
                b.setAlpha(0);
                b.setAnchor(0,
                    b.getNaturalHeight() / 2);
                this._nums.push(b)
            }
            this._bigNum = this.createText("3", "90_blue");
            this._bigNum.setAlpha(0);
            this._bigNum.setAnchor(0, this._bigNum.getNaturalHeight() / 2);
            this._go = this.createText("GO", "90_blue");
            this._go.setAlpha(0);
            this._go.setAnchor(0, this._go.getNaturalHeight() / 2)
        },
        getShowSequence: function(a) {
            var b = this;
            return (new tc).addActions([new ub(0.4), new ub(0.5), new cb(function() { b.enterText(b._nums[2]) }), new ub(1), new cb(function() { b.enterText(b._nums[1]) }), new ub(1), new cb(function() {
                b.enterText(b._nums[0]);
                b.boostAvailable = !0
            }), new ub(1.2), new cb(function() { b.boostAvailable = !1; var a = "GO"; - 1 < n.currentLevel.indexOf("tuto") && (a = n.currentLevel.toUpperCase());
                b.zoomIn(a) }), new ub(0.3), new cb(function() { a.onGo();
                t.play("countdown_go", "CALLOUTS") }), new ub(0.2)])
        },
        enterText: function(a) { var b = this;
            B.to(a, { x: 0, alpha: 1 }, { time: 0.5, ease: D.quintIn, onComplete: function() { t.play("countdown_1", "CALLOUTS");
                    b.zoomOut(a._text);
                    a.setAlpha(0) } }) },
        zoomOut: function(a) {
            var b = this;
            this._bigNum.setText(a);
            this._bigNum.setScale(1);
            this._bigNum.setAlpha(1);
            B.to(this._bigNum, { scaleX: 1.5, scaleY: 1.5 }, { time: 0.5, ease: D.quadOut, onComplete: function() { b._bigNum.setAlpha(0) } });
            B.delayCallTo(function() { b._bigNum.alpha.animateTo(0, 0.2) }, 0.2, this.owner)
        },
        zoomIn: function(a) { var b = this;
            this._go.setText(a);
            this._go.setScale(4);
            this._go.setAlpha(0);
            B.to(this._go, { scaleX: 1, scaleY: 1, alpha: 1 }, { time: 0.3, ease: D.quintIn, onComplete: function() { B.to(b._go, { alpha: 0 }, { time: 0.5, delay: 0.3, ease: D.quadOut }) } }) },
        __class__: Wg
    });
    var ak = function() { ta.call(this) };
    g["game.ui.callouts.LapCallout"] = ak;
    ak.__name__ = ["game", "ui", "callouts", "LapCallout"];
    ak.__super__ = ta;
    ak.prototype = k(ta.prototype, { build: function() { ta.prototype.build.call(this);
            this.setScale(0);
            this._text = this.createText("LAP", "90_blue") }, getShowSequence: function(a) { this._text.setText(a.id, { lap: a.lap, totalLaps: n.nbLap }); return ta.prototype.getShowSequence.call(this, a) }, __class__: ak });
    var Sj = function() { this._itemCount = 0;
        i.call(this) };
    g["game.ui.hud.GameHud"] = Sj;
    Sj.__name__ = ["game", "ui", "hud", "GameHud"];
    Sj.__super__ = i;
    Sj.prototype = k(i.prototype, {
        get_name: function() { return "GameHud_35" },
        onAdded: function() { this.pack = E.getPack("ui_hud");
            this.container = new p;
            this.container.add(new r);
            this._disposer = new za;
            this.owner.addChild((new p).add(this._disposer));
            this.build() },
        onStart: function() {
            i.prototype.onStart.call(this);
            null == this.container.parent && this.owner.addChild(this.container);
            this._logic = this.owner._compMap.GameLogic_38;
            this._disposer.add(this._logic.onPositionChanged.connect(m(this, this.updatePosition)));
            this._disposer.add(this._logic.onPlayerLap.connect(m(this, this.playLapCallout)));
            this._disposer.add(this._logic.onEnd.connect(m(this, this.playEndCallout)));
            this.updatePosition();
            this._level = this.owner._compMap.LevelSystem_13;
            this._disposer.add(this._level.player._compMap.Player_22.onBumped.connect(m(this, this.playBumpCallout)));
            for (var a = 0, b = this._level.characters; a < b.length;) { var c = b[a];++a;
                this._disposer.add(c._compMap.Kart_4.lightningSignal.connect(m(this, this.showLightOverlay))) }
        },
        onStop: function() {
            this._disposer =
                this._pauseButton = this.container = this.pack = this.callouts = null;
            i.prototype.onStop.call(this)
        },
        onUpdate: function(a) { i.prototype.onUpdate.call(this, a);
            this.updateTime() },
        build: function() {
            this._pauseButton = A.createButton(m(this, this.onPauseClick), "btn_pause");
            this._pauseButton.setXY(Q.width - 80, 20);
            this.addSprite(this._pauseButton);
            this._timeBox = new bk;
            this._timeBox.setXY(0, 88);
            this.addSprite(this._timeBox);
            this._positionBox = new zf;
            this._positionBox.setXY(0, 68);
            this._positionBox.setAnchor(0, 28);
            this._disposer.add(this._positionBox.onChangedPos.connect(m(this,
                this.animatePos)));
            this.addSprite(this._positionBox);
            this.progress = new xf;
            this.addSprite(this.progress, this.owner);
            this.itemSlot = new ck;
            this.itemSlot.setXY(Q.width - 85, Q.height - 75);
            this.itemSlot.set_visible(!1);
            this.addSprite(this.itemSlot);
            this.callouts = new Yj;
            this.container.addChild((new p).add(this.callouts));
            this._lightOverlay = new Wa(16777215, Q.width, Q.height);
            this._lightOverlay.set_pointerEnabled(!1);
            this._lightOverlay.setAlpha(0);
            this.addSprite(this._lightOverlay);
            if ("tuto1" == n.currentLevel ||
                "tuto2" == n.currentLevel) { var a = A.createButton(m(this, this.onSkip), "btn_orange", "SKIP", "20_white");
                a.setXY(Q.width - 165, 90);
                this.addSprite(a) }
        },
        onSkip: function() { T.trackUI("skip " + n.currentLevel.charAt(n.currentLevel.length - 1), "Tutorial");
            this._logic.exit() },
        setPlayer: function(a) { this.progress.setPlayer(a);
            this.itemSlot.setPlayer(a) },
        addSprite: function(a, b) {
            null == b && (b = this.container);
            b.addChild((new p).add(a));
            var c = a.owner._compMap.Sprite_2;
            null != c && (c.y._value < Q.height / 2 ? Math.random() : Math.random(),
                c.y.animateTo(c.y._value, 1.5 + 0.2 * this._itemCount, D.elasticOut));
            this._itemCount++;
            return a
        },
        hitTest: function(a, b, c) { for (b = r.hitTest(this.container, b, c); null != b;) { if (b == a) return !0; if (null == b.owner.parent) break;
                b = b.owner.parent._compMap.Sprite_2 } return !1 },
        onPauseClick: function() { T.trackUI("Pause", "Gameplay");
            t.play("click", "UI");
            N.push("Pause") },
        playLapCallout: function(a) {
            var b = this;
            this.callouts.show(ak, 0, { id: a > n.nbLap - 1 ? "FINAL_LAP" : "LAP", lap: a });
            n.isForFun && (a = xe.getRandomElement(Q.forFunItemCheats),
                n.cheatsForFun.push(a), ua.apply(a), B.delayCallTo(function() { b.callouts.show(Zj, 0) }, 1, this.owner.parent))
        },
        playEndCallout: function() { this.callouts.show($j) },
        playBumpCallout: function() { this.callouts.show(Xj) },
        updatePosition: function() { this._positionBox.updatePosition(this._logic.getPlayerPosition()) },
        animatePos: function() {
            var a = this;
            this._positionBox.setScale(1);
            B.to(this._positionBox, { scaleX: 1.2, scaleY: 1.2 }, {
                time: 0.3,
                ease: D.bounceOut,
                onComplete: function() {
                    B.to(a._positionBox, { scaleX: 1, scaleY: 1 }, {
                        time: 0.3,
                        ease: D.quadOut
                    })
                }
            })
        },
        updateTime: function() { this._timeBox.updateTime(this._logic.time) },
        showLightOverlay: function() { 0 < this._lightOverlay.alpha._value || (t.play("emp_impact", "PICKUP"), this._lightOverlay.setAlpha(1), B.to(this._lightOverlay, { alpha: 0 }, { time: 0.5, delay: 0.1 })) },
        __class__: Sj
    });
    var ck = function() { this._showGhost = !0;
        this._slotting = this._rate = this._nextIn = this._slotId = 0;
        this._order = [];
        this._textures = new M;
        this._disposer = new za;
        r.call(this) };
    g["game.ui.hud.ItemRoulette"] = ck;
    ck.__name__ = ["game",
        "ui", "hud", "ItemRoulette"
    ];
    ck.__super__ = r;
    ck.prototype = k(r.prototype, {
        onStart: function() { r.prototype.onStart.call(this);
            this._pack = E.getPack("ui_hud"); for (var a = 0, b = ja.list; a < b.length;) { var c = b[a];++a; var d = this._pack.getTexture(c.id + "_icon");
                this._textures.set(c.id, d);
                this._order.push(c.id) } this._bg = new ya(this._pack.getTexture("slot"));
            this._bg.centerAnchor();
            this.owner.addChild((new p).add(this._bg)) },
        dispose: function() {
            null != this._item && (this._item.owner.dispose(), this._item = null);
            null != this._ghost &&
                (this._ghost.owner.dispose(), this._ghost = null);
            this._pack = null;
            this._bg.owner.dispose();
            this._pickupData = this._textures = this._order = this._bg = null;
            this._disposer.dispose();
            r.prototype.dispose.call(this)
        },
        onUpdate: function(a) { r.prototype.onUpdate.call(this, a);
            null != this._item && 0 < this._slotting && (this._slotting -= a, this._nextIn -= a, 0 >= this._slotting ? this.endSlot() : 0 > this._nextIn && this.updateTexture()) },
        setPlayer: function(a) {
            a = a._compMap.CollectorComponent_41;
            this._disposer.add(a.onCollection.connect(m(this,
                this.onCollection)));
            this._disposer.add(a.onForceReady.connect(m(this, this.endSlot)));
            this._disposer.add(a.onUse.connect(m(this, this.onUse)));
            this._disposer.add(a.onItemStolen.connect(m(this, this.onItemStolen)))
        },
        onCollection: function(a, b) {
            var c = a._compMap.CollectorComponent_41;
            this._slotting = c.collectDelay;
            var d = b._compMap.CollectableComponent_10;
            null != d && I.__instanceof(d, wf) && (this._pickupData = "" != n.cheatPickup ? ja.getDataById(n.cheatPickup) : d.pickupData, this._showGhost = d.withGhost, null != this._pickupData &&
                (this.setItem(this._pickupData.id), c.instant && this.endSlot(), this.set_visible(!0)))
        },
        onUse: function() { null != this._item && this.owner.removeChild(this._item.owner);
            this._bg.texture = this._pack.getTexture("slot");
            this.set_visible(!1) },
        onItemStolen: function() { null == this._ghost ? (this._ghost = new fb("ghost", "sprites", null, !0), this.owner.addChild((new p).add(this._ghost))) : this.owner.addChild(this._ghost.owner);
            this._ghost.gotoAndPlay("idle", { onComplete: m(this, this.onGhostDone) }) },
        onGhostDone: function() {
            this.owner.removeChild(this._ghost.owner);
            this.onUse(null, null)
        },
        setItem: function(a) { null == this._item ? (this._item = new ya(this._textures.get(a)), this._item.centerAnchor(), this._item.setXY(2, 2), this._item.set_pointerEnabled(!1), this.owner.addChild((new p).add(this._item))) : (this.owner.addChild(this._item.owner), this._item.texture = this._textures.get(a));
            this._bg.texture = this._pack.getTexture("slot");
            this._rate = 0.01;
            this._slotId = 0 },
        updateTexture: function() {
            this._slotId++;
            this._slotId >= this._order.length && (this._slotId = 0);
            var a = this._order[this._slotId];
            !this._showGhost && "ghost" == a ? this.updateTexture() : (this._item.texture = this._textures.get(a), this._nextIn = this._rate *= 1.25)
        },
        endSlot: function() { this._rate = this._slotting = 0;
            null != this._pickupData && (this._bg.texture = this._pack.getTexture("slot_ready"), this._item.texture = this._textures.get(this._pickupData.id), this._item.setScale(1.3), this._item.scaleX.animateTo(1, 0.2), this._item.scaleY.animateTo(1, 0.2), t.play("roulette", "PICKUP")) },
        __class__: ck
    });
    var zf = function() {
        this._currentPos = -1;
        this.onChangedPos =
            new ga;
        r.call(this)
    };
    g["game.ui.hud.PositionBox"] = zf;
    zf.__name__ = ["game", "ui", "hud", "PositionBox"];
    zf.__super__ = r;
    zf.prototype = k(r.prototype, {
        onAdded: function() {
            r.prototype.onAdded.call(this);
            this._pack = E.getPack("ui");
            var a = A.createImage("position_bg", this._pack);
            a.setXY(0, 0);
            this.owner.addChild((new p).add(a));
            this._face = A.createImage("face_" + n.currentCharacter.name, this._pack);
            this._face.setXY(0, 0);
            a.owner.addChild((new p).add(this._face));
            this._positionNum = C.getTextSprite("60_orange", "8");
            this._positionNum.setXY(70,
                10);
            this._positionNum.setAlign(Z.Left);
            a.owner.addChild((new p).add(this._positionNum));
            this._positionSuffix = C.getLocalizedTextSprite("TH", "20_white");
            this._positionSuffix.setXY(110, 25);
            this._positionSuffix.setAlign(Z.Left);
            this.owner.addChild((new p).add(this._positionSuffix))
        },
        updatePosition: function(a) {
            if (!(null == this._positionNum && null == this._positionSuffix || this._currentPos == a)) {
                this.onChangedPos.emit();
                this._currentPos = a;
                this._positionNum.set_text(a + "");
                this._positionNum.setAlign(Z.Left);
                var b =
                    "TH";
                3 >= a && (b = "SUFFIX_" + a);
                this._positionSuffix.setText(b);
                this._positionSuffix.setAlign(Z.Left)
            }
        },
        updateNumFont: function(a) { C.applyFontStyle(this._positionNum, a);
            this._positionNum.setAlign(Z.Left) },
        updateFace: function(a) { this._face.texture = this._pack.getTexture("face_" + a) },
        __class__: zf
    });
    var xf = function() { this._nextUpdate = 0;
        this._roadWidth = 1;
        this._indicators = new M;
        r.call(this) };
    g["game.ui.hud.RoadProgress"] = xf;
    xf.__name__ = ["game", "ui", "hud", "RoadProgress"];
    xf.__super__ = r;
    xf.prototype = k(r.prototype, {
        onStart: function() {
            r.prototype.onStart.call(this);
            this._pack = E.getPack("ui_hud");
            this._level = this.owner._internal_getFromParents("LevelSystem_13");
            this._logic = this.owner._internal_getFromParents("GameLogic_38");
            this._roadWidth = n.lapWidth * n.nbLap;
            this._progressBg = A.createImage("progress_bar", this._pack);
            this._progressBg.setXY(175, 59);
            this.owner.addChild((new p).add(this._progressBg));
            this._progressBar = A.createImage("proggress_bar_filled", this._pack);
            this._progressBar.setXY(3, 2);
            this._progressBar.scissor =
                new Na(0, 0, 1, 15);
            this._progressBg.owner.addChild((new p).add(this._progressBar));
            for (var a, b = this._progressBg.getNaturalWidth() / n.nbLap, c = 1, d = n.nbLap; c < d;) { var e = c++;
                a = A.createImage("flag", this._pack);
                a.setXY(3 + b * e - 13, -25);
                this._progressBg.owner.addChild((new p).add(a)) } a = A.createImage("last_flag", this._pack);
            a.setXY(3 + this._progressBar.getNaturalWidth() - 5, -15);
            this._progressBg.owner.addChild((new p).add(a));
            this._lapTxt = C.getLocalizedTextSprite("LAP_HUD", "15_white", null, null, { lap: 1, totalLaps: n.nbLap });
            this._lapTxt.setXY(4, 16);
            this._lapTxt.setAlign(Z.Left);
            this._progressBg.owner.addChild((new p).add(this._lapTxt));
            this._pinsContainer = new p;
            this._progressBg.owner.addChild(this._pinsContainer);
            this.createIndicators()
        },
        onStop: function() { this._lapTxt = this._progressBar = this._progressBg = this._player = this._logic = this._level = null;
            r.prototype.onStop.call(this) },
        onUpdate: function(a) {
            r.prototype.onUpdate.call(this, a);
            null != this._player && (this._nextUpdate -= a, 0 >= this._nextUpdate && (this.updateIndicators(), this._nextUpdate =
                xf.updateRate))
        },
        setPlayer: function(a) { this._player = a },
        updateProgress: function() { var a = this._player._compMap.TransformComponent_70.position.x - this._level.endzoneOffset;
            this._progressBar.scissor.width = this._progressBar.getNaturalWidth() * a / this._roadWidth },
        updateLap: function(a) { null != this._lapTxt && this._lap != a && (this._lap = a, a = n.nbLap, this._lapTxt.setText("LAP_HUD", { lap: Math.min(a, this._lap), totalLaps: a }), this._lapTxt.setAlign(Z.Left)) },
        createIndicators: function() {
            for (var a, b = 0, c = this._level.characters; b <
                c.length;) a = c[b], ++b, a = a._compMap.Kart_4, this.createIndicator(a.character.characterName, a.isPlayer);
            b = 0;
            for (c = this._level.opponentsStatic; b < c.length;) a = c[b], ++b, a = a._compMap.Kart_4, this.createIndicator(a.character.characterName, a.isPlayer)
        },
        createIndicator: function(a, b) {
            var c = A.createImage("pins/" + (b ? "green_" : "pink_") + a, this._pack);
            c.setAnchor(c.getNaturalWidth() / 2, c.getNaturalHeight());
            c.setXY(this._progressBar.x._value, 10);
            this._pinsContainer.addChild((new p).add(c), b ? !0 : !1);
            this._indicators.set(a,
                c)
        },
        updateIndicators: function() {
            if (!(null == this._player || null == this._player._compMap.Kart_4)) {
                this.updateProgress();
                this.updateLap(this._player._compMap.Kart_4.currentLap);
                for (var a, b = 0, c = 0, d = this._level.characters; c < d.length;) b = d[c], ++c, null == b || null == b._compMap.Kart_4 || (b == this._player && this.updateProgress(), a = this._indicators.get(b._compMap.Kart_4.character.characterName), null != a && (b = Math.min(this._roadWidth, b._compMap.TransformComponent_70.position.x - this._level.endzoneOffset), a.x.set__(Math.max(this._progressBar.x._value +
                    this._progressBar.getNaturalWidth() * b / this._roadWidth, 0))))
            }
        },
        __class__: xf
    });
    var bk = function() { this._time = -1;
        r.call(this) };
    g["game.ui.hud.TimeBox"] = bk;
    bk.__name__ = ["game", "ui", "hud", "TimeBox"];
    bk.__super__ = r;
    bk.prototype = k(r.prototype, {
        onStart: function() {
            r.prototype.onStart.call(this);
            this._pack = E.getPack("ui_hud");
            var a = A.createImage("time_box", this._pack);
            a.setXY(0, 0);
            this.owner.addChild((new p).add(a));
            this._timeNum = C.getTextSprite("20_white", "0:00");
            this._timeNum.setXY(132, 10);
            this._timeNum.setAlign(Z.Right);
            a.owner.addChild((new p).add(this._timeNum))
        },
        onStop: function() { r.prototype.onStop.call(this) },
        onUpdate: function(a) { r.prototype.onUpdate.call(this, a) },
        updateTime: function(a) { a = Math.round(a);
            null == this._timeNum || this._time == a || (this._time = a, this._timeNum.set_text(this.parseTime(a | 0) + "")) },
        parseTime: function(a) { var b = Math.floor(a / 60),
                a = Math.floor(a - 60 * b),
                b = (9 < b ? null == b ? "null" : "" + b : "" + (null == b ? "null" : "" + b)) + " : "; return 9 < a ? null == a ? b + "null" : b + ("" + a) : b + ("0" + (null == a ? "null" : "" + a)) },
        __class__: bk
    });
    var sj =
        function() { this._rareCodes = ["MORPH", "UNBUMPABLE"];
            this._uncommonCodes = "FAKEOUT,MISSILE,EMP,NITRO,FIREWORKS,SNOW,GHOST".split(",");
            this._frequentCodes = ["BIG_HEAD", "BACKWARD", "INVISIBLE"];
            this._reallyRareRate = 0.1;
            this._rareRate = 0.2;
            this._codeRate = 0.3;
            this._tipsQty = 0;
            r.call(this) };
    g["game.ui.tips.TipsUI"] = sj;
    sj.__name__ = ["game", "ui", "tips", "TipsUI"];
    sj.__super__ = r;
    sj.prototype = k(r.prototype, {
        onAdded: function() {
            r.prototype.onAdded.call(this);
            for (var a = !1, b = 1; !a;) Ga.hasLocale("TIP_" + b) ? (this._tipsQty =
                b, b++) : a = !0;
            a = Math.random();
            n.config.codeEnabled && a <= this._codeRate ? this.showCode() : this.showTip()
        },
        getCode: function() { var a = Math.random(),
                b = 0; if (a < this._reallyRareRate) return b = Math.floor(Math.random() * this._rareCodes.length), this._rareCodes[b]; if (a < this._rareRate + this._reallyRareRate) return b = Math.floor(Math.random() * this._uncommonCodes.length), this._uncommonCodes[b];
            b = Math.floor(Math.random() * this._frequentCodes.length); return this._frequentCodes[b] },
        showCode: function() {
            var a = this.getCode(),
                b =
                C.getLocalizedTextSprite("CODE_" + a, "30_orange_shadow");
            b.setAlign(Z.Left);
            b.setXY(25, 10);
            this.owner.addChild((new p).add(b));
            var c = C.getLocalizedTextSprite("TEXT_" + a, "23_white_shadow");
            c.setAlign(Z.Left);
            c.setXY(b.getNaturalWidth() + 35, 15);
            this.owner.addChild((new p).add(c));
            var a = b.getNaturalWidth() + c.getNaturalWidth() + 25,
                d = b.x;
            d.set__(d._value - a / 2);
            c = c.x;
            c.set__(c._value - a / 2);
            a = A.createImage("lock");
            a.centerAnchor().setXY(b.x._value - 30, 22);
            this.owner.addChild((new p).add(a))
        },
        showTip: function() {
            var a =
                C.getLocalizedTextSprite("TIP_" + (Math.floor(Math.random() * this._tipsQty) + 1), "23_white_shadow");
            a.setWrapWidth(700);
            a.setXY(-350, 30 - a.getNaturalHeight() / 2);
            this.owner.addChild((new p).add(a))
        },
        __class__: sj
    });
    var Rj = function() { this._nextSort = 0;
        this.rate = 0.2;
        i.call(this) };
    g["game.world.DepthManager"] = Rj;
    Rj.__name__ = ["game", "world", "DepthManager"];
    Rj.__super__ = i;
    Rj.prototype = k(i.prototype, {
        get_name: function() { return "DepthManager_29" },
        onAdded: function() { i.prototype.onAdded.call(this) },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._world = this.owner._internal_getFromParents("WorldSystem_25");
            var a = this.owner.parent._compMap.GameLogic_38;
            if (a.isStarted) this.onGameStart();
            else a.onGameStart.connect(m(this, this.onGameStart)).once()
        },
        onGameStart: function() { this._layer = this.owner.parent._compMap.RendererSystem_56.getLayer("player");
            this._layer.depthSorter.addHeight = !1;
            this._layerChildren = this._layer.getChildren();
            this.sortDepth();
            this._nextSort = this.rate },
        onUpdate: function(a) {
            i.prototype.onUpdate.call(this, a);
            0 < this._nextSort &&
                (this._nextSort -= a, 0 >= this._nextSort && (this.sortDepth(), this._nextSort = this.rate))
        },
        sortDepth: function() { hb.sort(this._layerChildren, m(this, this.orderById));
            this._layer.sortDepth() },
        orderById: function(a, b) {
            var c = a._compMap.LaneObject_12,
                d = b._compMap.LaneObject_12;
            if (null == c) return -1;
            if (null == d) return 1;
            var e = a._compMap.TransformComponent_70,
                f = b._compMap.TransformComponent_70,
                c = c.laneId,
                d = d.laneId,
                e = this._world.getLaneById(c).getY(e.position.x - 1);
            if (-1 == e) return 0;
            f = this._world.getLaneById(d).getY(f.position.x -
                1);
            if (-1 == f) return 0;
            if (c == d) { if (null != a._compMap.Kart_4) return 1; if (null != b._compMap.Kart_4) return -1 }
            return e == f ? 0 : e > f ? 1 : -1
        },
        __class__: Rj
    });
    var Tj = function() { this._dotsPerLane = new Fb;
        this._lanes = [];
        this._defaultLane = [];
        this.minY = this.maxY = 0;
        i.call(this) };
    g["game.world.WorldSystem"] = Tj;
    Tj.__name__ = ["game", "world", "WorldSystem"];
    Tj.__super__ = i;
    Tj.prototype = k(i.prototype, {
        get_name: function() { return "WorldSystem_25" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._actors = this.owner._compMap.ActorSystem_54;
            this._level = this.owner._compMap.LevelSystem_13;
            this.generateLanes();
            this.setDefaultLane();
            this.createSpawnPoints();
            this.owner._compMap.GameLogic_38.createPlayers()
        },
        onStop: function() { this._level = this._actors = this._dotsPerLane = null;
            i.prototype.onStop.call(this) },
        copyDefaultLane: function() { return K.clone(this._defaultLane) },
        getLaneById: function(a) { for (var b = 0, c = this._lanes; b < c.length;) { var d = c[b];++b; if (d.id == a) return d } return null },
        setDefaultLane: function() {
            for (var a = this._actors.getActorsByComponent($g),
                    b, c, d = 0; d < a.length;) { var e = a[d];++d;
                b = e._compMap.DefaultLaneDot_107;
                c = e._compMap.TransformComponent_70; for (var f = 0, l = n.nbLap; f < l;) { var v = f++;
                    this._defaultLane.push([c.position.x + v * n.lapWidth, b.laneId]) } this._actors.removeActor(e) } this._defaultLane.sort(m(this, this.sortDefaultLane))
        },
        generateLanes: function() {
            for (var a = this._actors.getActorsByComponent(Yg), b, c = null, d, e = 1, f = 0, l = 0; l < a.length;) {
                var v = a[l];
                ++l;
                b = v._compMap.LaneDots_26;
                d = v._compMap.Sprite_2;
                for (var e = I.__instanceof(d, gg) ? I.__cast(d, gg).tileWidth :
                        1, h = v._compMap.TransformComponent_70, g = 0, i = b.lanes; g < i.length;) { c = i[g];++g;
                    d = []; for (var j = 0, k = c.points; j < k.length;) { var m = k[j];++j;
                        m.x = m.x * e + h.position.x;
                        m.y += h.position.y;
                        m.y - 250 < this.minY ? this.minY = m.y - 250 : m.y > this.maxY && (this.maxY = m.y);
                        m.x > f && (f = m.x);
                        d.push(m) } this._dotsPerLane.exists(c.id) || this._dotsPerLane.set(c.id, []);
                    c = this._dotsPerLane.get(c.id);
                    this.checkInsertion(c, d) || c.push(d) } v.remove(b)
            }
            n.lapWidth = f;
            for (a = this._dotsPerLane.keys(); a.hasNext();) this.createLane(a.next());
            this._dotsPerLane =
                null;
            null
        },
        checkInsertion: function(a, b) { for (var c = 0; c < a.length;) { var d = a[c];++c; for (var e = 0, f = d.length - 1; e < f;) { var l = e++; if (d[l].x < b[0].x && d[l + 1].x > b[b.length - 1].x) { for (c = b.length - 1; 0 <= c;) d.splice(l + 1, 0, b[c]), c--; return !0 } } } return !1 },
        createLane: function(a) { var b = this._dotsPerLane.get(a);
            b.sort(m(this, this.sortPoint));
            this._lanes.push(this._actors.spawn({ template: { key: "lane" }, lane: { id: a, points: b } })._compMap.Lane_43) },
        sortDefaultLane: function(a, b) { return a[0] - b[0] },
        sortPoint: function(a, b) {
            return a[0].x >
                b[0].x ? 1 : -1
        },
        createSpawnPoints: function() { for (var a = 0, b = Q.nbOpponents + 1; a < b;) { var c = a++;
                this._actors.spawn({ template: { key: "lane_spawn_point", spawner: 1 }, lane_spawn_point: { laneId: c % 2 }, transform: { position: { x: 250 * c + 300, y: 70 * (c % 2) + 170 } } }) } },
        __class__: Tj
    });
    var ud = g["haxe.StackItem"] = { __ename__: ["haxe", "StackItem"], __constructs__: ["CFunction", "Module", "FilePos", "Method", "LocalFunction"] };
    ud.CFunction = ["CFunction", 0];
    ud.CFunction.toString = s;
    ud.CFunction.__enum__ = ud;
    ud.Module = function(a) {
        a = ["Module", 1, a];
        a.__enum__ = ud;
        a.toString = s;
        return a
    };
    ud.FilePos = function(a, b, c) { a = ["FilePos", 2, a, b, c];
        a.__enum__ = ud;
        a.toString = s; return a };
    ud.Method = function(a, b) { var c = ["Method", 3, a, b];
        c.__enum__ = ud;
        c.toString = s; return c };
    ud.LocalFunction = function(a) { a = ["LocalFunction", 4, a];
        a.__enum__ = ud;
        a.toString = s; return a };
    var cd = function() {};
    g["haxe.CallStack"] = cd;
    cd.__name__ = ["haxe", "CallStack"];
    cd.callStack = function() {
        var a = Error.prepareStackTrace;
        Error.prepareStackTrace = function(a, b) {
            for (var e = [], f = 0; f < b.length;) {
                var l =
                    b[f];
                ++f;
                var v = null,
                    h = l.getFunctionName();
                if (null != h) { var g = h.lastIndexOf(".");
                    0 <= g && (v = H.substr(h, 0, g), h = H.substr(h, g + 1, null), v = ud.Method(v, h)) } e.push(ud.FilePos(v, l.getFileName(), l.getLineNumber()))
            }
            return e
        };
        var b = cd.makeStack(Error().stack);
        b.shift();
        Error.prepareStackTrace = a;
        return b
    };
    cd.exceptionStack = function() { return [] };
    cd.toString = function(a) { for (var b = new Oe, c = 0; c < a.length;) { var d = a[c];++c;
            b.b += "\nCalled from ";
            cd.itemToString(b, d) } return b.b };
    cd.itemToString = function(a, b) {
        switch (b[1]) {
            case 0:
                a.b +=
                    "a C function";
                break;
            case 1:
                var c = b[2];
                a.b += "module ";
                a.b = null == c ? a.b + "null" : a.b + ("" + c);
                break;
            case 2:
                var c = b[4],
                    d = b[3],
                    e = b[2];
                null != e && (cd.itemToString(a, e), a.b += " (");
                a.b = null == d ? a.b + "null" : a.b + ("" + d);
                a.b += " line ";
                a.b = null == c ? a.b + "null" : a.b + ("" + c);
                null != e && (a.b += ")");
                break;
            case 3:
                c = b[3];
                d = b[2];
                a.b = null == d ? a.b + "null" : a.b + ("" + d);
                a.b += ".";
                a.b = null == c ? a.b + "null" : a.b + ("" + c);
                break;
            case 4:
                c = b[2], a.b += "local function #", a.b = null == c ? a.b + "null" : a.b + ("" + c)
        }
    };
    cd.makeStack = function(a) {
        if ("string" == typeof a) {
            for (var a =
                    a.split("\n"), b = [], c = 0; c < a.length;) { var d = a[c];++c;
                b.push(ud.Module(d)) }
            return b
        }
        return a
    };
    var gh = function(a) { this.url = a;
        this.headers = new ce;
        this.params = new ce;
        this.async = !0 };
    g["haxe.Http"] = gh;
    gh.__name__ = ["haxe", "Http"];
    gh.prototype = {
        addHeader: function(a, b) { this.headers.push({ header: a, value: b }); return this },
        setPostData: function(a) { this.postData = a; return this },
        request: function(a) {
            var b = this;
            b.responseData = null;
            var c = this.req = Uh.createXMLHttpRequest(),
                d = function() {
                    if (4 == c.readyState) {
                        var a;
                        try { a = c.status } catch (d) {
                            a =
                                null
                        }
                        void 0 == a && (a = null);
                        if (null != a) b.onStatus(a);
                        if (null != a && 200 <= a && 400 > a) b.req = null, b.onData(b.responseData = c.responseText);
                        else if (null == a) b.req = null, b.onError("Failed to connect or resolve host");
                        else switch (a) {
                            case 12029:
                                b.req = null;
                                b.onError("Failed to connect to host"); break;
                            case 12007:
                                b.req = null;
                                b.onError("Unknown host"); break;
                            default:
                                b.req = null, b.responseData = c.responseText, b.onError("Http Error #" + c.status) }
                    }
                };
            this.async && (c.onreadystatechange = d);
            var e = this.postData;
            if (null != e) a = !0;
            else
                for (var f =
                        this.params.iterator(); f.hasNext();) var l = f.next(),
                    e = null == e ? "" : e + "&",
                    e = e + (encodeURIComponent(l.param) + "=" + encodeURIComponent(l.value));
            try { if (a) c.open("POST", this.url, this.async);
                else if (null != e) { var v = 1 >= this.url.split("?").length;
                    c.open("GET", this.url + (v ? "?" : "&") + e, this.async);
                    e = null } else c.open("GET", this.url, this.async) } catch (h) { b.req = null;
                this.onError(h.toString()); return }!pf.exists(this.headers, function(a) { return "Content-Type" == a.header }) && a && null == this.postData && c.setRequestHeader("Content-Type",
                "application/x-www-form-urlencoded");
            for (a = this.headers.iterator(); a.hasNext();) f = a.next(), c.setRequestHeader(f.header, f.value);
            c.send(e);
            this.async || d(null)
        },
        onData: function() {},
        onError: function() {},
        onStatus: function() {},
        __class__: gh
    };
    var ve = function() { this.buf = new Oe;
        this.cache = [];
        this.useCache = ve.USE_CACHE;
        this.useEnumIndex = ve.USE_ENUM_INDEX;
        this.shash = new M;
        this.scount = 0 };
    g["haxe.Serializer"] = ve;
    ve.__name__ = ["haxe", "Serializer"];
    ve.prototype = {
        toString: function() { return this.buf.b },
        serializeString: function(a) {
            var b =
                this.shash.get(a);
            null != b ? (this.buf.b += "R", this.buf.b = null == b ? this.buf.b + "null" : this.buf.b + ("" + b)) : (this.shash.set(a, this.scount++), this.buf.b += "y", a = encodeURIComponent(a), this.buf.b = null == a.length ? this.buf.b + "null" : this.buf.b + ("" + a.length), this.buf.b += ":", this.buf.b = null == a ? this.buf.b + "null" : this.buf.b + ("" + a))
        },
        serializeRef: function(a) {
            for (var b = typeof a, c = 0, d = this.cache.length; c < d;) {
                var e = c++,
                    f = this.cache[e];
                if (typeof f == b && f == a) return this.buf.b += "r", this.buf.b = null == e ? this.buf.b + "null" : this.buf.b +
                    ("" + e), !0
            }
            this.cache.push(a);
            return !1
        },
        serializeFields: function(a) { for (var b = 0, c = z.fields(a); b < c.length;) { var d = c[b];++b;
                this.serializeString(d);
                this.serialize(z.field(a, d)) } this.buf.b += "g" },
        serialize: function(a) {
            var b = ia["typeof"](a);
            switch (b[1]) {
                case 0:
                    this.buf.b += "n";
                    break;
                case 1:
                    if (0 == a) { this.buf.b += "z"; break } this.buf.b += "i";
                    this.buf.b = null == a ? this.buf.b + "null" : this.buf.b + ("" + a);
                    break;
                case 2:
                    Math.isNaN(a) ? this.buf.b += "k" : Math.isFinite(a) ? (this.buf.b += "d", this.buf.b = null == a ? this.buf.b + "null" : this.buf.b +
                        ("" + a)) : this.buf.b = 0 > a ? this.buf.b + "m" : this.buf.b + "p";
                    break;
                case 3:
                    this.buf.b = a ? this.buf.b + "t" : this.buf.b + "f";
                    break;
                case 6:
                    b = b[2];
                    if (b == String) { this.serializeString(a); break }
                    if (this.useCache && this.serializeRef(a)) break;
                    switch (b) {
                        case Array:
                            b = 0;
                            this.buf.b += "a";
                            for (var c = a.length, d = 0; d < c;) { var e = d++;
                                null == a[e] ? b++ : (0 < b && (1 == b ? this.buf.b += "n" : (this.buf.b += "u", this.buf.b = null == b ? this.buf.b + "null" : this.buf.b + ("" + b)), b = 0), this.serialize(a[e])) } 0 < b && (1 == b ? this.buf.b += "n" : (this.buf.b += "u", this.buf.b = null ==
                                b ? this.buf.b + "null" : this.buf.b + ("" + b)));
                            this.buf.b += "h";
                            break;
                        case ce:
                            this.buf.b += "l";
                            for (a = a.iterator(); a.hasNext();) this.serialize(a.next());
                            this.buf.b += "h";
                            break;
                        case Date:
                            this.buf.b += "v";
                            this.buf.add(H.dateStr(a));
                            break;
                        case M:
                            this.buf.b += "b";
                            for (b = a.keys(); b.hasNext();) c = b.next(), this.serializeString(c), this.serialize(a.get(c));
                            this.buf.b += "h";
                            break;
                        case Fb:
                            this.buf.b += "q";
                            for (b = a.keys(); b.hasNext();) c = b.next(), this.buf.b += ":", this.buf.b = null == c ? this.buf.b + "null" : this.buf.b + ("" + c), this.serialize(a.get(c));
                            this.buf.b += "h";
                            break;
                        case Fa:
                            this.buf.b += "M";
                            for (b = a.keys(); b.hasNext();) c = b.next(), d = z.field(c, "__id__"), z.deleteField(c, "__id__"), this.serialize(c), c.__id__ = d, this.serialize(a.h[c.__id__]);
                            this.buf.b += "h";
                            break;
                        case Xd:
                            d = 0;
                            e = a.length - 2;
                            b = new Oe;
                            for (c = ve.BASE64; d < e;) { var f = a.get(d++),
                                    l = a.get(d++),
                                    v = a.get(d++);
                                b.add(c.charAt(f >> 2));
                                b.add(c.charAt((f << 4 | l >> 4) & 63));
                                b.add(c.charAt((l << 2 | v >> 6) & 63));
                                b.add(c.charAt(v & 63)) } d == e ? (e = a.get(d++), a = a.get(d++), b.add(c.charAt(e >> 2)), b.add(c.charAt((e << 4 | a >> 4) &
                                63)), b.add(c.charAt(a << 2 & 63))) : d == e + 1 && (a = a.get(d++), b.add(c.charAt(a >> 2)), b.add(c.charAt(a << 4 & 63)));
                            a = b.b;
                            this.buf.b += "s";
                            this.buf.b = null == a.length ? this.buf.b + "null" : this.buf.b + ("" + a.length);
                            this.buf.b += ":";
                            this.buf.b = null == a ? this.buf.b + "null" : this.buf.b + ("" + a);
                            break;
                        default:
                            this.useCache && this.cache.pop(), null != a.hxSerialize ? (this.buf.b += "C", this.serializeString(ia.getClassName(b)), this.useCache && this.cache.push(a), a.hxSerialize(this), this.buf.b += "g") : (this.buf.b += "c", this.serializeString(ia.getClassName(b)),
                                this.useCache && this.cache.push(a), this.serializeFields(a))
                    }
                    break;
                case 4:
                    if (this.useCache && this.serializeRef(a)) break;
                    this.buf.b += "o";
                    this.serializeFields(a);
                    break;
                case 7:
                    b = b[2];
                    if (this.useCache) { if (this.serializeRef(a)) break;
                        this.cache.pop() } this.buf.b = this.useEnumIndex ? this.buf.b + "j" : this.buf.b + "w";
                    this.serializeString(ia.getEnumName(b));
                    this.useEnumIndex ? (this.buf.b += ":", this.buf.b += y.string(a[1])) : this.serializeString(a[0]);
                    this.buf.b += ":";
                    b = a.length;
                    this.buf.b += y.string(b - 2);
                    for (c = 2; c < b;) d = c++,
                        this.serialize(a[d]);
                    this.useCache && this.cache.push(a);
                    break;
                case 5:
                    throw "Cannot serialize function";
                default:
                    throw "Cannot serialize " + y.string(a);
            }
        },
        __class__: ve
    };
    var Ce = function(a) { var b = this;
        this.id = setInterval(function() { b.run() }, a) };
    g["haxe.Timer"] = Ce;
    Ce.__name__ = ["haxe", "Timer"];
    Ce.delay = function(a, b) { var c = new Ce(b);
        c.run = function() { c.stop();
            a() }; return c };
    Ce.stamp = function() { return (new Date).getTime() / 1E3 };
    Ce.prototype = {
        stop: function() { null != this.id && (clearInterval(this.id), this.id = null) },
        run: function() {},
        __class__: Ce
    };
    var ac = function(a) { this.buf = a;
        this.length = a.length;
        this.pos = 0;
        this.scache = [];
        this.cache = [];
        a = ac.DEFAULT_RESOLVER;
        null == a && (a = ia, ac.DEFAULT_RESOLVER = a);
        this.setResolver(a) };
    g["haxe.Unserializer"] = ac;
    ac.__name__ = ["haxe", "Unserializer"];
    ac.initCodes = function() { for (var a = [], b = 0, c = ac.BASE64.length; b < c;) { var d = b++;
            a[ac.BASE64.charCodeAt(d)] = d } return a };
    ac.run = function(a) { return (new ac(a)).unserialize() };
    ac.prototype = {
        setResolver: function(a) {
            this.resolver = null == a ? {
                resolveClass: function() { return null },
                resolveEnum: function() { return null }
            } : a
        },
        get: function(a) { return this.buf.charCodeAt(a) },
        readDigits: function() { for (var a = 0, b = !1, c = this.pos;;) { var d = this.buf.charCodeAt(this.pos); if (d != d) break; if (45 == d) { if (this.pos != c) break;
                    b = !0 } else { if (48 > d || 57 < d) break;
                    a = 10 * a + (d - 48) } this.pos++ } b && (a *= -1); return a },
        unserializeObject: function(a) {
            for (;;) {
                if (this.pos >= this.length) throw "Invalid object";
                if (103 == this.buf.charCodeAt(this.pos)) break;
                var b = this.unserialize();
                if ("string" != typeof b) throw "Invalid object key";
                var c =
                    this.unserialize();
                a[b] = c
            }
            this.pos++
        },
        unserializeEnum: function(a, b) { if (58 != this.get(this.pos++)) throw "Invalid enum format"; var c = this.readDigits(); if (0 == c) return ia.createEnum(a, b); for (var d = []; 0 < c--;) d.push(this.unserialize()); return ia.createEnum(a, b, d) },
        unserialize: function() {
            switch (this.get(this.pos++)) {
                case 110:
                    return null;
                case 116:
                    return !0;
                case 102:
                    return !1;
                case 122:
                    return 0;
                case 105:
                    return this.readDigits();
                case 100:
                    for (var a = this.pos;;) {
                        var b = this.buf.charCodeAt(this.pos);
                        if (43 <= b && 58 > b ||
                            101 == b || 69 == b) this.pos++;
                        else break
                    }
                    return y.parseFloat(H.substr(this.buf, a, this.pos - a));
                case 121:
                    a = this.readDigits();
                    if (58 != this.get(this.pos++) || this.length - this.pos < a) throw "Invalid string length";
                    b = H.substr(this.buf, this.pos, a);
                    this.pos += a;
                    b = decodeURIComponent(b.split("+").join(" "));
                    this.scache.push(b);
                    return b;
                case 107:
                    return Math.NaN;
                case 109:
                    return Math.NEGATIVE_INFINITY;
                case 112:
                    return Math.POSITIVE_INFINITY;
                case 97:
                    a = [];
                    for (this.cache.push(a);;) {
                        b = this.buf.charCodeAt(this.pos);
                        if (104 == b) {
                            this.pos++;
                            break
                        }
                        117 == b ? (this.pos++, b = this.readDigits(), a[a.length + b - 1] = null) : a.push(this.unserialize())
                    }
                    return a;
                case 111:
                    return a = {}, this.cache.push(a), this.unserializeObject(a), a;
                case 114:
                    a = this.readDigits();
                    if (0 > a || a >= this.cache.length) throw "Invalid reference";
                    return this.cache[a];
                case 82:
                    a = this.readDigits();
                    if (0 > a || a >= this.scache.length) throw "Invalid string reference";
                    return this.scache[a];
                case 120:
                    throw this.unserialize();
                case 99:
                    a = this.unserialize();
                    b = this.resolver.resolveClass(a);
                    if (null == b) throw "Class not found " +
                        a;
                    a = ia.createEmptyInstance(b);
                    this.cache.push(a);
                    this.unserializeObject(a);
                    return a;
                case 119:
                    a = this.unserialize();
                    b = this.resolver.resolveEnum(a);
                    if (null == b) throw "Enum not found " + a;
                    a = this.unserializeEnum(b, this.unserialize());
                    this.cache.push(a);
                    return a;
                case 106:
                    a = this.unserialize();
                    b = this.resolver.resolveEnum(a);
                    if (null == b) throw "Enum not found " + a;
                    this.pos++;
                    var c = this.readDigits(),
                        d = ia.getEnumConstructs(b)[c];
                    if (null == d) throw "Unknown enum index " + a + "@" + c;
                    a = this.unserializeEnum(b, d);
                    this.cache.push(a);
                    return a;
                case 108:
                    a = new ce;
                    for (this.cache.push(a); 104 != this.buf.charCodeAt(this.pos);) a.add(this.unserialize());
                    this.pos++;
                    return a;
                case 98:
                    a = new M;
                    for (this.cache.push(a); 104 != this.buf.charCodeAt(this.pos);) b = this.unserialize(), a.set(b, this.unserialize());
                    this.pos++;
                    return a;
                case 113:
                    a = new Fb;
                    this.cache.push(a);
                    for (b = this.get(this.pos++); 58 == b;) b = this.readDigits(), a.set(b, this.unserialize()), b = this.get(this.pos++);
                    if (104 != b) throw "Invalid IntMap format";
                    return a;
                case 77:
                    a = new Fa;
                    for (this.cache.push(a); 104 !=
                        this.buf.charCodeAt(this.pos);) b = this.unserialize(), a.set(b, this.unserialize());
                    this.pos++;
                    return a;
                case 118:
                    return a = H.substr(this.buf, this.pos, 19), a = H.strDate(a), this.cache.push(a), this.pos += 19, a;
                case 115:
                    a = this.readDigits();
                    d = this.buf;
                    if (58 != this.get(this.pos++) || this.length - this.pos < a) throw "Invalid bytes length";
                    var e = ac.CODES;
                    null == e && (e = ac.initCodes(), ac.CODES = e);
                    for (var f = this.pos, l = a & 3, v = f + (a - l), b = Xd.alloc(3 * (a >> 2) + (2 <= l ? l - 1 : 0)), c = 0; f < v;) {
                        var h = e[ma.fastCodeAt(d, f++)],
                            g = e[ma.fastCodeAt(d,
                                f++)];
                        b.set(c++, h << 2 | g >> 4);
                        h = e[ma.fastCodeAt(d, f++)];
                        b.set(c++, g << 4 | h >> 2);
                        g = e[ma.fastCodeAt(d, f++)];
                        b.set(c++, h << 6 | g)
                    }
                    2 <= l && (g = e[ma.fastCodeAt(d, f++)], v = e[ma.fastCodeAt(d, f++)], b.set(c++, g << 2 | v >> 4), 3 == l && (d = e[ma.fastCodeAt(d, f++)], b.set(c++, v << 4 | d >> 2)));
                    this.pos += a;
                    this.cache.push(b);
                    return b;
                case 67:
                    a = this.unserialize();
                    b = this.resolver.resolveClass(a);
                    if (null == b) throw "Class not found " + a;
                    a = ia.createEmptyInstance(b);
                    this.cache.push(a);
                    a.hxUnserialize(this);
                    if (103 != this.get(this.pos++)) throw "Invalid custom data";
                    return a
            }
            this.pos--;
            throw "Invalid char " + this.buf.charAt(this.pos) + " at position " + this.pos;
        },
        __class__: ac
    };
    var Xd = function(a, b) { this.length = a;
        this.b = b };
    g["haxe.io.Bytes"] = Xd;
    Xd.__name__ = ["haxe", "io", "Bytes"];
    Xd.alloc = function(a) { for (var b = [], c = 0; c < a;) c++, b.push(0); return new Xd(a, b) };
    Xd.ofString = function(a) {
        for (var b = [], c = 0; c < a.length;) {
            var d = ma.fastCodeAt(a, c++);
            55296 <= d && 56319 >= d && (d = d - 55232 << 10 | ma.fastCodeAt(a, c++) & 1023);
            127 >= d ? b.push(d) : (2047 >= d ? b.push(192 | d >> 6) : (65535 >= d ? b.push(224 | d >> 12) : (b.push(240 |
                d >> 18), b.push(128 | d >> 12 & 63)), b.push(128 | d >> 6 & 63)), b.push(128 | d & 63))
        }
        return new Xd(b.length, b)
    };
    Xd.prototype = {
        get: function(a) { return this.b[a] },
        set: function(a, b) { this.b[a] = b & 255 },
        getString: function(a, b) {
            if (0 > a || 0 > b || a + b > this.length) throw vd.OutsideBounds;
            for (var c = "", d = this.b, e = String.fromCharCode, f = a, l = a + b; f < l;) {
                var v = d[f++];
                if (128 > v) { if (0 == v) break;
                    c += e(v) } else if (224 > v) c += e((v & 63) << 6 | d[f++] & 127);
                else if (240 > v) var h = d[f++],
                    c = c + e((v & 31) << 12 | (h & 127) << 6 | d[f++] & 127);
                else var h = d[f++],
                    g = d[f++],
                    v = (v & 15) <<
                    18 | (h & 127) << 12 | (g & 127) << 6 | d[f++] & 127,
                    c = c + e((v >> 10) + 55232),
                    c = c + e(v & 1023 | 56320)
            }
            return c
        },
        toString: function() { return this.getString(0, this.length) },
        __class__: Xd
    };
    var ng = function() {};
    g["haxe.crypto.Base64"] = ng;
    ng.__name__ = ["haxe", "crypto", "Base64"];
    ng.decode = function(a, b) { null == b && (b = !0); if (b)
            for (; 61 == H.cca(a, a.length - 1);) a = H.substr(a, 0, -1); return (new wm(ng.BYTES)).decodeBytes(Xd.ofString(a)) };
    var wm = function(a) {
        for (var b = a.length, c = 1; b > 1 << c;) c++;
        if (8 < c || b != 1 << c) throw "BaseCode : base length must be a power of two.";
        this.base = a;
        this.nbits = c
    };
    g["haxe.crypto.BaseCode"] = wm;
    wm.__name__ = ["haxe", "crypto", "BaseCode"];
    wm.prototype = {
        initTable: function() { for (var a = [], b = 0; 256 > b;) { var c = b++;
                a[c] = -1 } b = 0; for (c = this.base.length; b < c;) { var d = b++;
                a[this.base.b[d]] = d } this.tbl = a },
        decodeBytes: function(a) {
            var b = this.nbits;
            null == this.tbl && this.initTable();
            for (var c = this.tbl, d = a.length * b >> 3, e = Xd.alloc(d), f = 0, l = 0, v = 0, h = 0; h < d;) {
                for (; 8 > l;) { var l = l + b,
                        f = f << b,
                        g = c[a.get(v++)]; if (-1 == g) throw "BaseCode : invalid encoded char";
                    f |= g } l -= 8;
                e.set(h++,
                    f >> l & 255)
            }
            return e
        },
        __class__: wm
    };
    var hb = function() {};
    g["haxe.ds.ArraySort"] = hb;
    hb.__name__ = ["haxe", "ds", "ArraySort"];
    hb.sort = function(a, b) { hb.rec(a, b, 0, a.length) };
    hb.rec = function(a, b, c, d) { var e = c + d >> 1; if (12 > d - c) { if (!(d <= c))
                for (e = c + 1; e < d;)
                    for (var f = e++; f > c;) { if (0 > b(a[f], a[f - 1])) hb.swap(a, f - 1, f);
                        else break;
                        f-- } } else hb.rec(a, b, c, e), hb.rec(a, b, e, d), hb.doMerge(a, b, c, e, d, e - c, d - e) };
    hb.doMerge = function(a, b, c, d, e, f, l) {
        var v, h, g, i;
        0 == f || 0 == l || (2 == f + l ? 0 > b(a[d], a[c]) && hb.swap(a, d, c) : (f > l ? (g = f >> 1, v = c + g, h = hb.lower(a,
            b, d, e, v), i = h - d) : (i = l >> 1, h = d + i, v = hb.upper(a, b, c, d, h), g = v - c), hb.rotate(a, b, v, d, h), d = v + i, hb.doMerge(a, b, c, v, d, g, i), hb.doMerge(a, b, d, h, e, f - g, l - i)))
    };
    hb.rotate = function(a, b, c, d, e) { if (!(c == d || d == e))
            for (b = hb.gcd(e - c, d - c); 0 != b--;) { for (var f = a[c + b], l = d - c, v = c + b, h = c + b + l; h != c + b;) a[v] = a[h], v = h, h = e - h > l ? h + l : c + (l - (e - h));
                a[v] = f } };
    hb.gcd = function(a, b) { for (; 0 != b;) var c = a % b,
            a = b,
            b = c; return a };
    hb.upper = function(a, b, c, d, e) { for (var d = d - c, f, l; 0 < d;) f = d >> 1, l = c + f, 0 > b(a[e], a[l]) ? d = f : (c = l + 1, d = d - f - 1); return c };
    hb.lower = function(a,
        b, c, d, e) { for (var d = d - c, f, l; 0 < d;) f = d >> 1, l = c + f, 0 > b(a[l], a[e]) ? (c = l + 1, d = d - f - 1) : d = f; return c };
    hb.swap = function(a, b, c) { var d = a[b];
        a[b] = a[c];
        a[c] = d };
    var Fb = function() { this.h = {} };
    g["haxe.ds.IntMap"] = Fb;
    Fb.__name__ = ["haxe", "ds", "IntMap"];
    Fb.__interfaces__ = [Gg];
    Fb.prototype = {
        set: function(a, b) { this.h[a] = b },
        get: function(a) { return this.h[a] },
        exists: function(a) { return this.h.hasOwnProperty(a) },
        remove: function(a) { if (!this.h.hasOwnProperty(a)) return !1;
            delete this.h[a]; return !0 },
        keys: function() {
            var a = [],
                b;
            for (b in this.h) this.h.hasOwnProperty(b) &&
                a.push(b | 0);
            return H.iter(a)
        },
        iterator: function() { return { ref: this.h, it: this.keys(), hasNext: function() { return this.it.hasNext() }, next: function() { return this.ref[this.it.next()] } } },
        __class__: Fb
    };
    var Fa = function() { this.h = {};
        this.h.__keys__ = {} };
    g["haxe.ds.ObjectMap"] = Fa;
    Fa.__name__ = ["haxe", "ds", "ObjectMap"];
    Fa.__interfaces__ = [Gg];
    Fa.prototype = {
        set: function(a, b) { var c = a.__id__ || (a.__id__ = ++Fa.count);
            this.h[c] = b;
            this.h.__keys__[c] = a },
        get: function(a) { return this.h[a.__id__] },
        exists: function(a) {
            return null !=
                this.h.__keys__[a.__id__]
        },
        remove: function(a) { a = a.__id__; if (null == this.h.__keys__[a]) return !1;
            delete this.h[a];
            delete this.h.__keys__[a]; return !0 },
        keys: function() { var a = [],
                b; for (b in this.h.__keys__) this.h.hasOwnProperty(b) && a.push(this.h.__keys__[b]); return H.iter(a) },
        iterator: function() { return { ref: this.h, it: this.keys(), hasNext: function() { return this.it.hasNext() }, next: function() { return this.ref[this.it.next().__id__] } } },
        __class__: Fa
    };
    var M = function() { this.h = {} };
    g["haxe.ds.StringMap"] = M;
    M.__name__ = ["haxe", "ds", "StringMap"];
    M.__interfaces__ = [Gg];
    M.prototype = {
        set: function(a, b) { this.h["$" + a] = b },
        get: function(a) { return this.h["$" + a] },
        exists: function(a) { return this.h.hasOwnProperty("$" + a) },
        remove: function(a) { a = "$" + a; if (!this.h.hasOwnProperty(a)) return !1;
            delete this.h[a]; return !0 },
        keys: function() { var a = [],
                b; for (b in this.h) this.h.hasOwnProperty(b) && a.push(b.substr(1)); return H.iter(a) },
        iterator: function() {
            return {
                ref: this.h,
                it: this.keys(),
                hasNext: function() { return this.it.hasNext() },
                next: function() {
                    return this.ref["$" +
                        this.it.next()]
                }
            }
        },
        __class__: M
    };
    var hh = function(a, b) { this.replacer = a;
        this.indent = b;
        this.pretty = null != b;
        this.nind = 0;
        this.buf = new Oe };
    g["haxe.format.JsonPrinter"] = hh;
    hh.__name__ = ["haxe", "format", "JsonPrinter"];
    hh.print = function(a, b, c) { b = new hh(b, c);
        b.write("", a); return b.buf.b };
    hh.prototype = {
        ipad: function() { if (this.pretty) { var a = ma.lpad("", this.indent, this.nind * this.indent.length);
                this.buf.b = null == a ? this.buf.b + "null" : this.buf.b + ("" + a) } },
        write: function(a, b) {
            null != this.replacer && (b = this.replacer(a, b));
            var c = ia["typeof"](b);
            switch (c[1]) {
                case 8:
                    this.buf.b += '"???"';
                    break;
                case 4:
                    this.fieldsString(b, z.fields(b));
                    break;
                case 1:
                    c = b;
                    this.buf.b = null == c ? this.buf.b + "null" : this.buf.b + ("" + c);
                    break;
                case 2:
                    c = Math.isFinite(b) ? b : "null";
                    this.buf.b = null == c ? this.buf.b + "null" : this.buf.b + ("" + c);
                    break;
                case 5:
                    this.buf.b += '"<fun>"';
                    break;
                case 6:
                    c = c[2];
                    if (c == String) this.quote(b);
                    else if (c == Array) {
                        c = b;
                        this.buf.b += "[";
                        for (var d = c.length, e = d - 1, f = 0; f < d;) {
                            var l = f++;
                            0 < l ? this.buf.b += "," : this.nind++;
                            this.pretty && (this.buf.b += "\n");
                            this.ipad();
                            this.write(l, c[l]);
                            l == e && (this.nind--, this.pretty && (this.buf.b += "\n"), this.ipad())
                        }
                        this.buf.b += "]"
                    } else if (c == M) { c = b;
                        d = {}; for (e = c.keys(); e.hasNext();) f = e.next(), z.setField(d, f, c.get(f));
                        this.fieldsString(d, z.fields(d)) } else c == Date ? this.quote(H.dateStr(b)) : this.fieldsString(b, z.fields(b));
                    break;
                case 7:
                    c = ia.enumIndex(b);
                    this.buf.b = null == c ? this.buf.b + "null" : this.buf.b + ("" + c);
                    break;
                case 3:
                    c = b;
                    this.buf.b = null == c ? this.buf.b + "null" : this.buf.b + ("" + c);
                    break;
                case 0:
                    this.buf.b += "null"
            }
        },
        fieldsString: function(a,
            b) { this.buf.b += "{"; for (var c = b.length, d = c - 1, e = 0; e < c;) { var f = e++,
                    l = b[f],
                    h = z.field(a, l);
                z.isFunction(h) || (0 < f ? this.buf.b += "," : this.nind++, this.pretty && (this.buf.b += "\n"), this.ipad(), this.quote(l), this.buf.b += ":", this.pretty && (this.buf.b += " "), this.write(l, h), f == d && (this.nind--, this.pretty && (this.buf.b += "\n"), this.ipad())) } this.buf.b += "}" },
        quote: function(a) {
            this.buf.b += '"';
            for (var b = 0;;) {
                var c = ma.fastCodeAt(a, b++);
                if (c != c) break;
                switch (c) {
                    case 34:
                        this.buf.b += '\\"';
                        break;
                    case 92:
                        this.buf.b += "\\\\";
                        break;
                    case 10:
                        this.buf.b += "\\n";
                        break;
                    case 13:
                        this.buf.b += "\\r";
                        break;
                    case 9:
                        this.buf.b += "\\t";
                        break;
                    case 8:
                        this.buf.b += "\\b";
                        break;
                    case 12:
                        this.buf.b += "\\f";
                        break;
                    default:
                        this.buf.b += String.fromCharCode(c)
                }
            }
            this.buf.b += '"'
        },
        __class__: hh
    };
    var Fn = function() {};
    g["haxe.io.Eof"] = Fn;
    Fn.__name__ = ["haxe", "io", "Eof"];
    Fn.prototype = { toString: function() { return "Eof" }, __class__: Fn };
    var vd = g["haxe.io.Error"] = { __ename__: ["haxe", "io", "Error"], __constructs__: ["Blocked", "Overflow", "OutsideBounds", "Custom"] };
    vd.Blocked = ["Blocked",
        0
    ];
    vd.Blocked.toString = s;
    vd.Blocked.__enum__ = vd;
    vd.Overflow = ["Overflow", 1];
    vd.Overflow.toString = s;
    vd.Overflow.__enum__ = vd;
    vd.OutsideBounds = ["OutsideBounds", 2];
    vd.OutsideBounds.toString = s;
    vd.OutsideBounds.__enum__ = vd;
    vd.Custom = function(a) { a = ["Custom", 3, a];
        a.__enum__ = vd;
        a.toString = s; return a };
    var Vl = function() {};
    g["haxe.rtti.Meta"] = Vl;
    Vl.__name__ = ["haxe", "rtti", "Meta"];
    Vl.getType = function(a) { a = a.__meta__; return null == a || null == a.obj ? {} : a.obj };
    var xm = function(a) { this.__x = a };
    g["haxe.xml._Fast.NodeAccess"] =
        xm;
    xm.__name__ = ["haxe", "xml", "_Fast", "NodeAccess"];
    xm.prototype = { resolve: function(a) { var b = this.__x.elementsNamed(a).next(); if (null == b) throw (this.__x.nodeType == R.Document ? "Document" : this.__x.get_nodeName()) + " is missing element " + a; return new ih(b) }, __class__: xm };
    var ym = function(a) { this.__x = a };
    g["haxe.xml._Fast.AttribAccess"] = ym;
    ym.__name__ = ["haxe", "xml", "_Fast", "AttribAccess"];
    ym.prototype = {
        resolve: function(a) {
            if (this.__x.nodeType == R.Document) throw "Cannot access document attribute " + a;
            var b = this.__x.get(a);
            if (null == b) throw this.__x.get_nodeName() + " is missing attribute " + a;
            return b
        },
        __class__: ym
    };
    var zm = function(a) { this.__x = a };
    g["haxe.xml._Fast.HasAttribAccess"] = zm;
    zm.__name__ = ["haxe", "xml", "_Fast", "HasAttribAccess"];
    zm.prototype = { resolve: function(a) { if (this.__x.nodeType == R.Document) throw "Cannot access document attribute " + a; return this.__x.exists(a) }, __class__: zm };
    var Am = function(a) { this.__x = a };
    g["haxe.xml._Fast.HasNodeAccess"] = Am;
    Am.__name__ = ["haxe", "xml", "_Fast", "HasNodeAccess"];
    Am.prototype = {
        resolve: function(a) { return this.__x.elementsNamed(a).hasNext() },
        __class__: Am
    };
    var Bm = function(a) { this.__x = a };
    g["haxe.xml._Fast.NodeListAccess"] = Bm;
    Bm.__name__ = ["haxe", "xml", "_Fast", "NodeListAccess"];
    Bm.prototype = { resolve: function(a) { for (var b = new ce, a = this.__x.elementsNamed(a); a.hasNext();) { var c = a.next();
                b.add(new ih(c)) } return b }, __class__: Bm };
    var ih = function(a) { if (a.nodeType != R.Document && a.nodeType != R.Element) throw "Invalid nodeType " + y.string(a.nodeType);
        this.x = a;
        this.node = new xm(a);
        this.nodes = new Bm(a);
        this.att = new ym(a);
        this.has = new zm(a);
        this.hasNode = new Am(a) };
    g["haxe.xml.Fast"] = ih;
    ih.__name__ = ["haxe", "xml", "Fast"];
    ih.prototype = {
        get_name: function() { return this.x.nodeType == R.Document ? "Document" : this.x.get_nodeName() },
        get_innerData: function() {
            var a = this.x.iterator();
            if (!a.hasNext()) throw this.get_name() + " does not have data";
            var b = a.next(),
                c = a.next();
            if (null != c) {
                if (b.nodeType == R.PCData && c.nodeType == R.CData && "" == ma.trim(b.get_nodeValue()) && (b = a.next(), null == b || b.nodeType == R.PCData && "" == ma.trim(b.get_nodeValue()) && null == a.next())) return c.get_nodeValue();
                throw this.get_name() +
                    " does not only have data";
            }
            if (b.nodeType != R.PCData && b.nodeType != R.CData) throw this.get_name() + " does not have data";
            return b.get_nodeValue()
        },
        __class__: ih,
        __properties__: { get_innerData: "get_innerData", get_name: "get_name" }
    };
    var Pe = function() {};
    g["haxe.xml.Parser"] = Pe;
    Pe.__name__ = ["haxe", "xml", "Parser"];
    Pe.parse = function(a) { var b = R.createDocument();
        Pe.doParse(a, 0, b); return b };
    Pe.doParse = function(a, b, c) {
        null == b && (b = 0);
        for (var d = null, e = 1, f = 1, l = null, h = 0, g = 0, i = 0, j = a.charCodeAt(b), k = new Oe; j == j;) {
            switch (e) {
                case 0:
                    switch (j) {
                        case 10:
                        case 13:
                        case 9:
                        case 32:
                            break;
                        default:
                            e = f;
                            continue
                    }
                    break;
                case 1:
                    switch (j) {
                        case 60:
                            e = 0;
                            f = 2; break;
                        default:
                            h = b;
                            e = 13; continue }
                    break;
                case 13:
                    60 == j ? (f = R.createPCData(k.b + H.substr(a, h, b - h)), k = new Oe, c.addChild(f), g++, e = 0, f = 2) : 38 == j && (k.addSub(a, h, b - h), e = 18, f = 13, h = b + 1);
                    break;
                case 17:
                    93 == j && 93 == a.charCodeAt(b + 1) && 62 == a.charCodeAt(b + 2) && (e = R.createCData(H.substr(a, h, b - h)), c.addChild(e), g++, b += 2, e = 1);
                    break;
                case 2:
                    switch (j) {
                        case 33:
                            if (91 == a.charCodeAt(b + 1)) {
                                b += 2;
                                if ("CDATA[" != H.substr(a, b, 6).toUpperCase()) throw "Expected <![CDATA[";
                                b += 5;
                                e =
                                    17
                            } else if (68 == a.charCodeAt(b + 1) || 100 == a.charCodeAt(b + 1)) { if ("OCTYPE" != H.substr(a, b + 2, 6).toUpperCase()) throw "Expected <!DOCTYPE";
                                b += 8;
                                e = 16 } else { if (45 != a.charCodeAt(b + 1) || 45 != a.charCodeAt(b + 2)) throw "Expected <\!--";
                                b += 2;
                                e = 15 } h = b + 1;
                            break;
                        case 63:
                            e = 14;
                            h = b;
                            break;
                        case 47:
                            if (null == c) throw "Expected node name";
                            h = b + 1;
                            e = 0;
                            f = 10;
                            break;
                        default:
                            e = 3;
                            h = b;
                            continue
                    }
                    break;
                case 3:
                    if (!(97 <= j && 122 >= j || 65 <= j && 90 >= j || 48 <= j && 57 >= j || 58 == j || 46 == j || 95 == j || 45 == j)) {
                        if (b == h) throw "Expected node name";
                        d = R.createElement(H.substr(a,
                            h, b - h));
                        c.addChild(d);
                        e = 0;
                        f = 4;
                        continue
                    }
                    break;
                case 4:
                    switch (j) {
                        case 47:
                            e = 11;
                            g++; break;
                        case 62:
                            e = 9;
                            g++; break;
                        default:
                            e = 5;
                            h = b; continue }
                    break;
                case 5:
                    if (!(97 <= j && 122 >= j || 65 <= j && 90 >= j || 48 <= j && 57 >= j || 58 == j || 46 == j || 95 == j || 45 == j)) { if (h == b) throw "Expected attribute name";
                        l = H.substr(a, h, b - h); if (d.exists(l)) throw "Duplicate attribute";
                        e = 0;
                        f = 6; continue }
                    break;
                case 6:
                    switch (j) {
                        case 61:
                            e = 0;
                            f = 7; break;
                        default:
                            throw "Expected ="; }
                    break;
                case 7:
                    switch (j) {
                        case 34:
                        case 39:
                            e = 8;
                            h = b; break;
                        default:
                            throw 'Expected "'; }
                    break;
                case 8:
                    j ==
                        a.charCodeAt(h) && (f = H.substr(a, h + 1, b - h - 1), d.set(l, f), e = 0, f = 4);
                    break;
                case 9:
                    h = b = Pe.doParse(a, b, d);
                    e = 1;
                    break;
                case 11:
                    switch (j) {
                        case 62:
                            e = 1; break;
                        default:
                            throw "Expected >"; }
                    break;
                case 12:
                    switch (j) {
                        case 62:
                            return 0 == g && c.addChild(R.createPCData("")), b;
                        default:
                            throw "Expected >"; }
                case 10:
                    if (!(97 <= j && 122 >= j || 65 <= j && 90 >= j || 48 <= j && 57 >= j || 58 == j || 46 == j || 95 == j || 45 == j)) { if (h == b) throw "Expected node name"; if (H.substr(a, h, b - h) != c.get_nodeName()) throw "Expected </" + c.get_nodeName() + ">";
                        e = 0;
                        f = 12; continue }
                    break;
                case 15:
                    45 ==
                        j && 45 == a.charCodeAt(b + 1) && 62 == a.charCodeAt(b + 2) && (c.addChild(R.createComment(H.substr(a, h, b - h))), b += 2, e = 1);
                    break;
                case 16:
                    91 == j ? i++ : 93 == j ? i-- : 62 == j && 0 == i && (c.addChild(R.createDocType(H.substr(a, h, b - h))), e = 1);
                    break;
                case 14:
                    63 == j && 62 == a.charCodeAt(b + 1) && (b++, e = H.substr(a, h + 1, b - h - 2), c.addChild(R.createProcessingInstruction(e)), e = 1);
                    break;
                case 18:
                    59 == j && (h = H.substr(a, h, b - h), 35 == h.charCodeAt(0) ? (h = 120 == h.charCodeAt(1) ? y.parseInt("0" + H.substr(h, 1, h.length - 1)) : y.parseInt(H.substr(h, 1, h.length - 1)), k.add(String.fromCharCode(h))) :
                        Pe.escapes.exists(h) ? k.add(Pe.escapes.get(h)) : k.b += y.string("&" + h + ";"), h = b + 1, e = f)
            }
            j = ma.fastCodeAt(a, ++b)
        }
        1 == e && (h = b, e = 13);
        if (13 == e) return (b != h || 0 == g) && c.addChild(R.createPCData(k.b + H.substr(a, h, b - h))), b;
        throw "Unexpected end";
    };
    var I = function() {};
    g["js.Boot"] = I;
    I.__name__ = ["js", "Boot"];
    I.getClass = function(a) { return a instanceof Array && null == a.__enum__ ? Array : a.__class__ };
    I.__string_rec = function(a, b) {
        if (null == a) return "null";
        if (5 <= b.length) return "<...>";
        var c = typeof a;
        if ("function" == c && (a.__name__ || a.__ename__)) c =
            "object";
        switch (c) {
            case "object":
                if (a instanceof Array) { if (a.__enum__) { if (2 == a.length) return a[0]; for (var c = a[0] + "(", b = b + "\t", d = 2, e = a.length; d < e;) var f = d++,
                            c = 2 != f ? c + ("," + I.__string_rec(a[f], b)) : c + I.__string_rec(a[f], b); return c + ")" } c = a.length;
                    d = "[";
                    b += "\t"; for (e = 0; e < c;) f = e++, d += (0 < f ? "," : "") + I.__string_rec(a[f], b); return d + "]" }
                try { d = a.toString } catch (l) { return "???" }
                if (null != d && d != Object.toString && (c = a.toString(), "[object Object]" != c)) return c;
                c = null;
                d = "{\n";
                b += "\t";
                e = null != a.hasOwnProperty;
                for (c in a)
                    if (!e ||
                        a.hasOwnProperty(c)) "prototype" == c || "__class__" == c || "__super__" == c || "__interfaces__" == c || "__properties__" == c || (2 != d.length && (d += ", \n"), d += b + c + " : " + I.__string_rec(a[c], b));
                b = b.substring(1);
                return d + ("\n" + b + "}");
            case "function":
                return "<function>";
            case "string":
                return a;
            default:
                return "" + a
        }
    };
    I.__interfLoop = function(a, b) {
        if (null == a) return !1;
        if (a == b) return !0;
        var c = a.__interfaces__;
        if (null != c)
            for (var d = 0, e = c.length; d < e;) { var f = d++,
                    f = c[f]; if (f == b || I.__interfLoop(f, b)) return !0 }
        return I.__interfLoop(a.__super__,
            b)
    };
    I.__instanceof = function(a, b) { if (null == b) return !1; switch (b) {
            case lo:
                return (a | 0) === a;
            case io:
                return "number" == typeof a;
            case mo:
                return "boolean" == typeof a;
            case String:
                return "string" == typeof a;
            case Array:
                return a instanceof Array && null == a.__enum__;
            case qo:
                return !0;
            default:
                if (null != a) { if ("function" == typeof b && (a instanceof b || I.__interfLoop(I.getClass(a), b))) return !0 } else return !1; return b == ro && null != a.__name__ || b == so && null != a.__ename__ ? !0 : a.__enum__ == b } };
    I.__cast = function(a, b) {
        if (I.__instanceof(a, b)) return a;
        throw "Cannot cast " + y.string(a) + " to " + y.string(b);
    };
    var Uh = function() {};
    g["js.Browser"] = Uh;
    Uh.__name__ = ["js", "Browser"];
    Uh.getLocalStorage = function() { try { var a = window.localStorage;
            a.getItem(""); return a } catch (b) { return null } };
    Uh.createXMLHttpRequest = function() { if ("undefined" != typeof XMLHttpRequest) return new XMLHttpRequest; if ("undefined" != typeof ActiveXObject) return new ActiveXObject("Microsoft.XMLHTTP"); throw "Unable to create XMLHttpRequest object."; };
    var Dn = function() {};
    g["js.html._CanvasElement.CanvasUtil"] =
        Dn;
    Dn.__name__ = ["js", "html", "_CanvasElement", "CanvasUtil"];
    Dn.getContextWebGL = function(a, b) { for (var c = 0, d = ["webgl", "experimental-webgl"]; c < d.length;) { var e = d[c];++c;
            e = a.getContext(e, b); if (null != e) return e } return null };
    var kb = function() { i.call(this); if (null != kb._scaleSprite) throw "AutoScale should be added only once!";
        Ja.init() };
    g["jsembed.AutoScale"] = kb;
    kb.__name__ = ["jsembed", "AutoScale"];
    kb.__super__ = i;
    kb.prototype = k(i.prototype, {
        get_name: function() { return "AutoScale_111" },
        onAdded: function() {
            null !=
                this.owner._compMap.Sprite_2 ? kb._scaleSprite = this.owner._compMap.Sprite_2 : (kb._scaleSprite = new r, this.owner.add(kb._scaleSprite))
        },
        onUpdate: function() { kb.tmp = Ja.get_canvasScale();
            0 < kb.tmp && kb.tmp != kb.SCALE && (kb.SCALE = kb.tmp, kb._scaleSprite.scaleX.set__(kb.tmp), kb._scaleSprite.scaleY.set__(kb.tmp)) },
        __class__: kb
    });
    var dd = function() {};
    g["jsembed.BaseUtils"] = dd;
    dd.__name__ = ["jsembed", "BaseUtils"];
    dd.setupManifest = function(a) { "" != dd.BASE_URL && (Ja.get_isCrossdomain() ? a.set_remoteBase(dd.BASE_URL) : a.set_localBase(dd.BASE_URL)) };
    dd.setupBaseURL = function() { Ja.init();
        dd.BASE_URL = Ja.get_exists() ? Ja.get_isCrossdomain() ? dd.appendAssetsToUrl(Ja.get_base()) : dd.trimUrl(Ja.get_base()) : "" };
    dd.trimUrl = function(a) { if ("" == a) return ""; if (0 > a.indexOf("http")) return "/" == a.charAt(0) && (a = H.substr(a, 1, a.length - 1)), a; var b = a.indexOf("http://");
        0 > b ? (b = a.indexOf("https://"), b = 0 > b ? 0 : b + 8) : b += 7;
        b = a.indexOf("/", b);
        a = H.substr(a, b, a.length - b); return a = dd.appendAssetsToUrl(a) };
    dd.appendAssetsToUrl = function(a) {
        "/" != a.charAt(a.length - 1) && (a += "/");
        return a +
            "assets/"
    };
    var La = function(a, b) { i.call(this); if (!La.hasInit) throw "Please call 'jsembed.HardwareAutoScale.init();' BEFORE  Flambe 'System.init()'";
        Ja.init();
        this.gameWidth = a;
        this.gameHeight = b;
        this._htmlStage = x._platform.getStage();
        this._stage = x._platform.getStage();
        this._canvas = this._stage._canvas;
        this.resizeCanvas(a, b) };
    g["jsembed.HardwareAutoScale"] = La;
    La.__name__ = ["jsembed", "HardwareAutoScale"];
    La.init = function() {
        if (!La.hasInit) {
            La.hasInit = !0;
            var a = Hg;
            a.prototype.onWindowResize = function() {};
            a.prototype.requestResize =
                function() {};
            a.prototype.resizeCanvas = function(a, c) { this._canvas.width = a;
                this._canvas.height = c;
                this.resize.emit(); return !0 }
        }
    };
    La.__super__ = i;
    La.prototype = k(i.prototype, {
        get_name: function() { return "HardwareAutoScale_110" },
        resizeCanvas: function(a, b) { this._canvas.width = this._stage.width = a;
            this._canvas.height = this._stage.width = b;
            this._htmlStage.resize.emit() },
        onUpdate: function() {
            La._tmp = Ja.get_canvasScale();
            0 < La._tmp && La._tmp != La.SCALE && (La.SCALE = La._tmp, this._canvas.style.width = this.gameWidth * La.SCALE +
                "px", this._canvas.style.height = this.gameHeight * La.SCALE + "px")
        },
        __class__: La
    });
    var Ja = function() {};
    g["jsembed.JSEmbedProxy"] = Ja;
    Ja.__name__ = ["jsembed", "JSEmbedProxy"];
    Ja.__properties__ = { get_canvasScale: "get_canvasScale", get_isCrossdomain: "get_isCrossdomain", get_base: "get_base", get_exists: "get_exists" };
    Ja.init = function() { if (null != Ja.JSEMBED) return !0; try { return Ja.JSEMBED = eval("jsembed"), Ja.enabled = !0 } catch (a) {} return !1 };
    Ja.get_exists = function() { return !Ja.enabled ? !1 : Ja.JSEMBED.exists() };
    Ja.get_base =
        function() { return !Ja.enabled ? null : Ja.JSEMBED.baseUrl() };
    Ja.get_isCrossdomain = function() { return !Ja.enabled ? !0 : Ja.JSEMBED.isBaseCrossdomain() };
    Ja.get_canvasScale = function() { return !Ja.enabled ? 0 : y.parseFloat(Ja.JSEMBED.canvasScale()) };
    var u = function() {};
    g["nape.Config"] = u;
    u.__name__ = ["nape", "Config"];
    var de = function() { this.zpp_inner = null };
    g["nape.callbacks.Callback"] = de;
    de.__name__ = ["nape", "callbacks", "Callback"];
    de.prototype = { toString: function() { return "" }, __class__: de };
    var dk = function() {
        this.zpp_inner =
            null
    };
    g["nape.callbacks.BodyCallback"] = dk;
    dk.__name__ = ["nape", "callbacks", "BodyCallback"];
    dk.__super__ = de;
    dk.prototype = k(de.prototype, { toString: function() { var a;
            a = "Cb:" + ["WAKE", "SLEEP"][this.zpp_inner.event - h.id_CbEvent_WAKE];
            a += ":" + this.zpp_inner.body.outer.toString(); return a += " : listener: " + y.string(this.zpp_inner.listener.outer) }, __class__: dk });
    var ed = function() { this.zpp_inner = null };
    g["nape.callbacks.Listener"] = ed;
    ed.__name__ = ["nape", "callbacks", "Listener"];
    ed.prototype = {
        toString: function() {
            var a =
                "BEGIN,END,WAKE,SLEEP,BREAK,PRE,ONGOING".split(",")[this.zpp_inner.event];
            if (this.zpp_inner.type == h.id_ListenerType_BODY) return "BodyListener{" + a + "::" + y.string(this.zpp_inner.body.outer_zn.zpp_inner_zn.options.outer) + "}";
            if (this.zpp_inner.type == h.id_ListenerType_CONSTRAINT) return "ConstraintListener{" + a + "::" + y.string(this.zpp_inner.constraint.outer_zn.zpp_inner_zn.options.outer) + "}";
            var b = this.zpp_inner.interaction,
                c;
            switch (b.itype) {
                case h.id_InteractionType_COLLISION:
                    c = "COLLISION";
                    break;
                case h.id_InteractionType_SENSOR:
                    c =
                        "SENSOR";
                    break;
                case h.id_InteractionType_FLUID:
                    c = "FLUID";
                    break;
                default:
                    c = "ALL"
            }
            return (this.zpp_inner.type == h.id_ListenerType_INTERACTION ? "InteractionListener{" + a + "#" + c + "::" + y.string(b.outer_zni.zpp_inner_zn.options1.outer) + ":" + y.string(b.outer_zni.zpp_inner_zn.options2.outer) + "}" : "PreListener{" + c + "::" + y.string(b.outer_znp.zpp_inner_zn.options1.outer) + ":" + y.string(b.outer_znp.zpp_inner_zn.options2.outer) + "}") + " precedence=" + this.zpp_inner.precedence
        },
        __class__: ed
    };
    var Cm = function() {
        this.zpp_inner_zn =
            null
    };
    g["nape.callbacks.BodyListener"] = Cm;
    Cm.__name__ = ["nape", "callbacks", "BodyListener"];
    Cm.__super__ = ed;
    Cm.prototype = k(ed.prototype, { __class__: Cm });
    var Jc = function() {};
    g["nape.callbacks.CbEvent"] = Jc;
    Jc.__name__ = ["nape", "callbacks", "CbEvent"];
    Jc.prototype = {
        toString: function() {
            var a;
            null == h.CbEvent_PRE && (h.internal = !0, h.CbEvent_PRE = new Jc, h.internal = !1);
            this == h.CbEvent_PRE ? a = "PRE" : (null == h.CbEvent_BEGIN && (h.internal = !0, h.CbEvent_BEGIN = new Jc, h.internal = !1), this == h.CbEvent_BEGIN ? a = "BEGIN" : (null == h.CbEvent_ONGOING &&
                (h.internal = !0, h.CbEvent_ONGOING = new Jc, h.internal = !1), this == h.CbEvent_ONGOING ? a = "ONGOING" : (null == h.CbEvent_END && (h.internal = !0, h.CbEvent_END = new Jc, h.internal = !1), this == h.CbEvent_END ? a = "END" : (null == h.CbEvent_WAKE && (h.internal = !0, h.CbEvent_WAKE = new Jc, h.internal = !1), this == h.CbEvent_WAKE ? a = "WAKE" : (null == h.CbEvent_SLEEP && (h.internal = !0, h.CbEvent_SLEEP = new Jc, h.internal = !1), this == h.CbEvent_SLEEP ? a = "SLEEP" : (null == h.CbEvent_BREAK && (h.internal = !0, h.CbEvent_BREAK = new Jc, h.internal = !1), a = this == h.CbEvent_BREAK ?
                    "BREAK" : ""))))));
            return a
        },
        __class__: Jc
    };
    var Xe = function() { this.zpp_inner = null;
        this.zpp_inner = new Hc;
        this.zpp_inner.outer = this };
    g["nape.callbacks.CbType"] = Xe;
    Xe.__name__ = ["nape", "callbacks", "CbType"];
    Xe.prototype = { toString: function() { return this == Hc.ANY_BODY ? "ANY_BODY" : this == Hc.ANY_SHAPE ? "ANY_SHAPE" : this == Hc.ANY_COMPOUND ? "ANY_COMPOUND" : this == Hc.ANY_CONSTRAINT ? "ANY_CONSTRAINT" : "CbType#" + this.zpp_inner.id }, __class__: Xe };
    var Yd = function() {
        this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner =
            null
    };
    g["nape.callbacks.CbTypeIterator"] = Yd;
    Yd.__name__ = ["nape", "callbacks", "CbTypeIterator"];
    Yd.get = function(a) { var b;
        null == Yd.zpp_pool ? (ee.internal = !0, b = new Yd, ee.internal = !1) : (b = Yd.zpp_pool, Yd.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    Yd.prototype = {
        hasNext: function() { this.zpp_inner.zpp_inner.valmod(); var a = this.zpp_inner.get_length();
            this.zpp_critical = !0; if (this.zpp_i < a) return !0;
            this.zpp_next = Yd.zpp_pool;
            Yd.zpp_pool = this;
            this.zpp_inner = null; return !1 },
        next: function() {
            this.zpp_critical = !1;
            return this.zpp_inner.at(this.zpp_i++)
        },
        __class__: Yd
    };
    var ek = function() { this.zpp_inner = null;
        this.zpp_inner = new ee;
        this.zpp_inner.outer = this };
    g["nape.callbacks.CbTypeList"] = ek;
    ek.__name__ = ["nape", "callbacks", "CbTypeList"];
    ek.prototype = {
        get_length: function() { this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length); return this.zpp_inner.user_length },
        has: function(a) { this.zpp_inner.valmod(); return this.zpp_inner.inner.has(a.zpp_inner) },
        at: function(a) { this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a); if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; return this.zpp_inner.at_ite.elt.outer },
        push: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) :
                !0) this.zpp_inner.reverse_flag ? this.zpp_inner.inner.add(a.zpp_inner) : (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        unshift: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b = null != this.zpp_inner.adder ?
                this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)) : this.zpp_inner.inner.add(a.zpp_inner), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        add: function(a) { return this.zpp_inner.reverse_flag ? this.push(a) : this.unshift(a) },
        remove: function(a) { this.zpp_inner.modify_test();
            this.zpp_inner.valmod(); var b;
            b = !1; for (var c = this.zpp_inner.inner.head; null != c;) { if (c.elt == a.zpp_inner) { b = !0; break } c = c.next } b && (null != this.zpp_inner.subber && this.zpp_inner.subber(a), this.zpp_inner.dontremove || this.zpp_inner.inner.remove(a.zpp_inner), this.zpp_inner.invalidate()); return b },
        toString: function() {
            var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod();
            for (c = Yd.get(this); c.hasNext();) {
                var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null ==
                    d ? a + "NULL" : a + d.toString();
                b = !1
            }
            return a + "]"
        },
        __class__: ek,
        __properties__: { get_length: "get_length" }
    };
    var fk = function() { this.zpp_inner = null };
    g["nape.callbacks.ConstraintCallback"] = fk;
    fk.__name__ = ["nape", "callbacks", "ConstraintCallback"];
    fk.__super__ = de;
    fk.prototype = k(de.prototype, { toString: function() { var a;
            a = "Cb:" + ["WAKE", "SLEEP", "BREAK"][this.zpp_inner.event - h.id_CbEvent_WAKE];
            a += ":" + this.zpp_inner.constraint.outer.toString(); return a += " : listener: " + y.string(this.zpp_inner.listener.outer) }, __class__: fk });
    var Dm = function() { this.zpp_inner_zn = null };
    g["nape.callbacks.ConstraintListener"] = Dm;
    Dm.__name__ = ["nape", "callbacks", "ConstraintListener"];
    Dm.__super__ = ed;
    Dm.prototype = k(ed.prototype, { __class__: Dm });
    var gk = function() { this.zpp_inner = null };
    g["nape.callbacks.InteractionCallback"] = gk;
    gk.__name__ = ["nape", "callbacks", "InteractionCallback"];
    gk.__super__ = de;
    gk.prototype = k(de.prototype, {
        toString: function() {
            var a;
            a = "Cb:" + "BEGIN,END,,,,,ONGOING".split(",")[this.zpp_inner.event];
            a += ":" + this.zpp_inner.int1.outer_i.toString() +
                "/" + this.zpp_inner.int2.outer_i.toString();
            a += " : " + this.zpp_inner.wrap_arbiters.toString();
            return a += " : listener: " + y.string(this.zpp_inner.listener.outer)
        },
        __class__: gk
    });
    var lg = function(a, b, c, d, e, f) {
        null == f && (f = 0);
        this.zpp_inner = this.zpp_inner_zn = null;
        var l = -1;
        null == h.CbEvent_BEGIN && (h.internal = !0, h.CbEvent_BEGIN = new Jc, h.internal = !1);
        a == h.CbEvent_BEGIN ? l = h.id_CbEvent_BEGIN : (null == h.CbEvent_END && (h.internal = !0, h.CbEvent_END = new Jc, h.internal = !1), a == h.CbEvent_END ? l = h.id_CbEvent_END : (null == h.CbEvent_ONGOING &&
            (h.internal = !0, h.CbEvent_ONGOING = new Jc, h.internal = !1), a == h.CbEvent_ONGOING && (l = h.id_CbEvent_ONGOING)));
        this.zpp_inner = this.zpp_inner_zn = new Jb(Ze.argument(c), Ze.argument(d), l, h.id_ListenerType_INTERACTION);
        this.zpp_inner.outer = this;
        this.zpp_inner_zn.outer_zni = this;
        this.zpp_inner.precedence = f;
        this.zpp_inner_zn.handleri = e;
        this.set_interactionType(b)
    };
    g["nape.callbacks.InteractionListener"] = lg;
    lg.__name__ = ["nape", "callbacks", "InteractionListener"];
    lg.__super__ = ed;
    lg.prototype = k(ed.prototype, {
        get_interactionType: function() {
            var a =
                this.zpp_inner_zn.itype;
            if (a == h.id_InteractionType_COLLISION) return null == h.InteractionType_COLLISION && (h.internal = !0, h.InteractionType_COLLISION = new Ua, h.internal = !1), h.InteractionType_COLLISION;
            if (a == h.id_InteractionType_SENSOR) return null == h.InteractionType_SENSOR && (h.internal = !0, h.InteractionType_SENSOR = new Ua, h.internal = !1), h.InteractionType_SENSOR;
            if (a == h.id_InteractionType_FLUID) return null == h.InteractionType_FLUID && (h.internal = !0, h.InteractionType_FLUID = new Ua, h.internal = !1), h.InteractionType_FLUID;
            return a == h.id_InteractionType_ANY ? (null == h.InteractionType_ANY && (h.internal = !0, h.InteractionType_ANY = new Ua, h.internal = !1), h.InteractionType_ANY) : null
        },
        set_interactionType: function(a) {
            if (this.get_interactionType() != a) {
                var b = this.zpp_inner_zn;
                null == h.InteractionType_COLLISION && (h.internal = !0, h.InteractionType_COLLISION = new Ua, h.internal = !1);
                a == h.InteractionType_COLLISION ? a = h.id_InteractionType_COLLISION : (null == h.InteractionType_SENSOR && (h.internal = !0, h.InteractionType_SENSOR = new Ua, h.internal = !1),
                    a == h.InteractionType_SENSOR ? a = h.id_InteractionType_SENSOR : (null == h.InteractionType_FLUID && (h.internal = !0, h.InteractionType_FLUID = new Ua, h.internal = !1), a = a == h.InteractionType_FLUID ? h.id_InteractionType_FLUID : h.id_InteractionType_ANY));
                b.itype = a
            }
            return this.get_interactionType()
        },
        __class__: lg,
        __properties__: { set_interactionType: "set_interactionType", get_interactionType: "get_interactionType" }
    });
    var Ua = function() {};
    g["nape.callbacks.InteractionType"] = Ua;
    Ua.__name__ = ["nape", "callbacks", "InteractionType"];
    Ua.prototype = {
        toString: function() {
            var a;
            null == h.InteractionType_COLLISION && (h.internal = !0, h.InteractionType_COLLISION = new Ua, h.internal = !1);
            this == h.InteractionType_COLLISION ? a = "COLLISION" : (null == h.InteractionType_SENSOR && (h.internal = !0, h.InteractionType_SENSOR = new Ua, h.internal = !1), this == h.InteractionType_SENSOR ? a = "SENSOR" : (null == h.InteractionType_FLUID && (h.internal = !0, h.InteractionType_FLUID = new Ua, h.internal = !1), this == h.InteractionType_FLUID ? a = "FLUID" : (null == h.InteractionType_ANY && (h.internal = !0,
                h.InteractionType_ANY = new Ua, h.internal = !1), a = this == h.InteractionType_ANY ? "ANY" : "")));
            return a
        },
        __class__: Ua
    };
    var wd = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.callbacks.ListenerIterator"] = wd;
    wd.__name__ = ["nape", "callbacks", "ListenerIterator"];
    wd.get = function(a) { var b;
        null == wd.zpp_pool ? ($e.internal = !0, b = new wd, $e.internal = !1) : (b = wd.zpp_pool, wd.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    wd.prototype = {
        hasNext: function() {
            this.zpp_inner.zpp_inner.valmod();
            var a = this.zpp_inner.get_length();
            this.zpp_critical = !0;
            if (this.zpp_i < a) return !0;
            this.zpp_next = wd.zpp_pool;
            wd.zpp_pool = this;
            this.zpp_inner = null;
            return !1
        },
        next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) },
        __class__: wd
    };
    var Em = function() { this.zpp_inner = null;
        this.zpp_inner = new $e;
        this.zpp_inner.outer = this };
    g["nape.callbacks.ListenerList"] = Em;
    Em.__name__ = ["nape", "callbacks", "ListenerList"];
    Em.prototype = {
        get_length: function() {
            this.zpp_inner.valmod();
            this.zpp_inner.zip_length &&
                (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length);
            return this.zpp_inner.user_length
        },
        at: function(a) { this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a); if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; return this.zpp_inner.at_ite.elt.outer },
        push: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? this.zpp_inner.inner.add(a.zpp_inner) : (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder &&
                this.zpp_inner.post_adder(a);
            return b
        },
        unshift: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)) : this.zpp_inner.inner.add(a.zpp_inner), this.zpp_inner.invalidate(),
                null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        add: function(a) { return this.zpp_inner.reverse_flag ? this.push(a) : this.unshift(a) },
        remove: function(a) { this.zpp_inner.modify_test();
            this.zpp_inner.valmod(); var b;
            b = !1; for (var c = this.zpp_inner.inner.head; null != c;) { if (c.elt == a.zpp_inner) { b = !0; break } c = c.next } b && (null != this.zpp_inner.subber && this.zpp_inner.subber(a), this.zpp_inner.dontremove || this.zpp_inner.inner.remove(a.zpp_inner), this.zpp_inner.invalidate()); return b },
        toString: function() {
            var a =
                "[",
                b = !0,
                c;
            this.zpp_inner.valmod();
            for (c = wd.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 }
            return a + "]"
        },
        __class__: Em,
        __properties__: { get_length: "get_length" }
    };
    var og = function() {};
    g["nape.callbacks.ListenerType"] = og;
    og.__name__ = ["nape", "callbacks", "ListenerType"];
    og.prototype = {
        toString: function() {
            var a;
            null == h.ListenerType_BODY && (h.internal = !0, h.ListenerType_BODY = new og, h.internal = !1);
            this == h.ListenerType_BODY ? a = "BODY" :
                (null == h.ListenerType_CONSTRAINT && (h.internal = !0, h.ListenerType_CONSTRAINT = new og, h.internal = !1), this == h.ListenerType_CONSTRAINT ? a = "CONSTRAINT" : (null == h.ListenerType_INTERACTION && (h.internal = !0, h.ListenerType_INTERACTION = new og, h.internal = !1), this == h.ListenerType_INTERACTION ? a = "INTERACTION" : (null == h.ListenerType_PRE && (h.internal = !0, h.ListenerType_PRE = new og, h.internal = !1), a = this == h.ListenerType_PRE ? "PRE" : "")));
            return a
        },
        __class__: og
    };
    var mg = function(a, b) {
        this.zpp_inner = null;
        this.zpp_inner = new Ze;
        this.zpp_inner.outer = this;
        null != a && this.including(a);
        null != b && this.excluding(b)
    };
    g["nape.callbacks.OptionType"] = mg;
    mg.__name__ = ["nape", "callbacks", "OptionType"];
    mg.prototype = {
        including: function(a) { this.zpp_inner.append(this.zpp_inner.includes, a); return this },
        excluding: function(a) { this.zpp_inner.append(this.zpp_inner.excludes, a); return this },
        toString: function() {
            null == this.zpp_inner.wrap_includes && this.zpp_inner.setup_includes();
            var a = this.zpp_inner.wrap_includes.toString();
            null == this.zpp_inner.wrap_excludes &&
                this.zpp_inner.setup_excludes();
            return "@{" + a + " excluding " + this.zpp_inner.wrap_excludes.toString() + "}"
        },
        __class__: mg
    };
    var hk = function() { this.zpp_inner = null };
    g["nape.callbacks.PreCallback"] = hk;
    hk.__name__ = ["nape", "callbacks", "PreCallback"];
    hk.__super__ = de;
    hk.prototype = k(de.prototype, {
        toString: function() { var a;
            a = "Cb:PRE:" + (":" + this.zpp_inner.int1.outer_i.toString() + "/" + this.zpp_inner.int2.outer_i.toString());
            a += " : " + this.zpp_inner.pre_arbiter.wrapper().toString(); return a += " : listnener: " + y.string(this.zpp_inner.listener.outer) },
        __class__: hk
    });
    var ab = function() {};
    g["nape.callbacks.PreFlag"] = ab;
    ab.__name__ = ["nape", "callbacks", "PreFlag"];
    ab.prototype = {
        toString: function() {
            var a;
            null == h.PreFlag_ACCEPT && (h.internal = !0, h.PreFlag_ACCEPT = new ab, h.internal = !1);
            this == h.PreFlag_ACCEPT ? a = "ACCEPT" : (null == h.PreFlag_IGNORE && (h.internal = !0, h.PreFlag_IGNORE = new ab, h.internal = !1), this == h.PreFlag_IGNORE ? a = "IGNORE" : (null == h.PreFlag_ACCEPT_ONCE && (h.internal = !0, h.PreFlag_ACCEPT_ONCE = new ab, h.internal = !1), this == h.PreFlag_ACCEPT_ONCE ? a = "ACCEPT_ONCE" :
                (null == h.PreFlag_IGNORE_ONCE && (h.internal = !0, h.PreFlag_IGNORE_ONCE = new ab, h.internal = !1), a = this == h.PreFlag_IGNORE_ONCE ? "IGNORE_ONCE" : "")));
            return a
        },
        __class__: ab
    };
    var Bj = function(a, b, c, d, e, f) {
        null == f && (f = !1);
        null == e && (e = 0);
        this.zpp_inner = this.zpp_inner_zn = null;
        this.zpp_inner = this.zpp_inner_zn = new Jb(Ze.argument(b), Ze.argument(c), h.id_CbEvent_PRE, h.id_ListenerType_PRE);
        this.zpp_inner.outer = this;
        this.zpp_inner_zn.outer_znp = this;
        this.zpp_inner.precedence = e;
        this.zpp_inner_zn.pure = f;
        this.zpp_inner_zn.handlerp =
            d;
        this.set_interactionType(a)
    };
    g["nape.callbacks.PreListener"] = Bj;
    Bj.__name__ = ["nape", "callbacks", "PreListener"];
    Bj.__super__ = ed;
    Bj.prototype = k(ed.prototype, {
        get_interactionType: function() {
            var a = this.zpp_inner_zn.itype;
            if (a == h.id_InteractionType_COLLISION) return null == h.InteractionType_COLLISION && (h.internal = !0, h.InteractionType_COLLISION = new Ua, h.internal = !1), h.InteractionType_COLLISION;
            if (a == h.id_InteractionType_SENSOR) return null == h.InteractionType_SENSOR && (h.internal = !0, h.InteractionType_SENSOR =
                new Ua, h.internal = !1), h.InteractionType_SENSOR;
            if (a == h.id_InteractionType_FLUID) return null == h.InteractionType_FLUID && (h.internal = !0, h.InteractionType_FLUID = new Ua, h.internal = !1), h.InteractionType_FLUID;
            return a == h.id_InteractionType_ANY ? (null == h.InteractionType_ANY && (h.internal = !0, h.InteractionType_ANY = new Ua, h.internal = !1), h.InteractionType_ANY) : null
        },
        set_interactionType: function(a) {
            if (this.get_interactionType() != a) {
                var b = this.zpp_inner_zn;
                null == h.InteractionType_COLLISION && (h.internal = !0, h.InteractionType_COLLISION =
                    new Ua, h.internal = !1);
                a == h.InteractionType_COLLISION ? a = h.id_InteractionType_COLLISION : (null == h.InteractionType_SENSOR && (h.internal = !0, h.InteractionType_SENSOR = new Ua, h.internal = !1), a == h.InteractionType_SENSOR ? a = h.id_InteractionType_SENSOR : (null == h.InteractionType_FLUID && (h.internal = !0, h.InteractionType_FLUID = new Ua, h.internal = !1), a = a == h.InteractionType_FLUID ? h.id_InteractionType_FLUID : h.id_InteractionType_ANY));
                b.itype = a
            }
            return this.get_interactionType()
        },
        __class__: Bj,
        __properties__: {
            set_interactionType: "set_interactionType",
            get_interactionType: "get_interactionType"
        }
    });
    var Gn = function() {};
    g["nape.constraint.Constraint"] = Gn;
    Gn.__name__ = ["nape", "constraint", "Constraint"];
    Gn.prototype = { toString: function() { return "{Constraint}" }, __class__: Gn };
    var fe = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.constraint.ConstraintIterator"] = fe;
    fe.__name__ = ["nape", "constraint", "ConstraintIterator"];
    fe.get = function(a) {
        var b;
        null == fe.zpp_pool ? (De.internal = !0, b = new fe, De.internal = !1) : (b = fe.zpp_pool,
            fe.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1;
        return b
    };
    fe.prototype = { hasNext: function() { this.zpp_inner.zpp_inner.valmod(); var a = this.zpp_inner.get_length();
            this.zpp_critical = !0; if (this.zpp_i < a) return !0;
            this.zpp_next = fe.zpp_pool;
            fe.zpp_pool = this;
            this.zpp_inner = null; return !1 }, next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) }, __class__: fe };
    var Fm = function() { this.zpp_inner = null;
        this.zpp_inner = new De;
        this.zpp_inner.outer = this };
    g["nape.constraint.ConstraintList"] =
        Fm;
    Fm.__name__ = ["nape", "constraint", "ConstraintList"];
    Fm.prototype = {
        get_length: function() { this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length); return this.zpp_inner.user_length },
        at: function(a) {
            this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
            if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index !=
                    a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
            return this.zpp_inner.at_ite.elt.outer
        },
        remove: function(a) { this.zpp_inner.modify_test();
            this.zpp_inner.valmod(); var b;
            b = !1; for (var c = this.zpp_inner.inner.head; null != c;) { if (c.elt == a.zpp_inner) { b = !0; break } c = c.next } b && (null != this.zpp_inner.subber && this.zpp_inner.subber(a), this.zpp_inner.dontremove || this.zpp_inner.inner.remove(a.zpp_inner), this.zpp_inner.invalidate()); return b },
        toString: function() {
            var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod();
            for (c = fe.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 }
            return a + "]"
        },
        __class__: Fm,
        __properties__: { get_length: "get_length" }
    };
    var af = function() { this.zpp_inner = null };
    g["nape.dynamics.Arbiter"] = af;
    af.__name__ = ["nape", "dynamics", "Arbiter"];
    af.prototype = {
        get_collisionArbiter: function() { return this.zpp_inner.type == ha.COL ? this.zpp_inner.colarb.outer_zn : null },
        get_state: function() {
            var a = this.zpp_inner.immState;
            if (a == (h.id_ImmState_ACCEPT |
                    h.id_ImmState_ALWAYS)) return null == h.PreFlag_ACCEPT && (h.internal = !0, h.PreFlag_ACCEPT = new ab, h.internal = !1), h.PreFlag_ACCEPT;
            switch (a) {
                case h.id_ImmState_ACCEPT:
                    return null == h.PreFlag_ACCEPT_ONCE && (h.internal = !0, h.PreFlag_ACCEPT_ONCE = new ab, h.internal = !1), h.PreFlag_ACCEPT_ONCE;
                default:
                    if (a == (h.id_ImmState_IGNORE | h.id_ImmState_ALWAYS)) return null == h.PreFlag_IGNORE && (h.internal = !0, h.PreFlag_IGNORE = new ab, h.internal = !1), h.PreFlag_IGNORE;
                    null == h.PreFlag_IGNORE_ONCE && (h.internal = !0, h.PreFlag_IGNORE_ONCE =
                        new ab, h.internal = !1);
                    return h.PreFlag_IGNORE_ONCE
            }
        },
        toString: function() {
            var a;
            a = this.zpp_inner.type == ha.COL ? "CollisionArbiter" : this.zpp_inner.type == ha.FLUID ? "FluidArbiter" : "SensorArbiter";
            return this.zpp_inner.cleared ? a + "(object-pooled)" : a + "(" + (this.zpp_inner.ws1.id > this.zpp_inner.ws2.id ? this.zpp_inner.ws2.outer : this.zpp_inner.ws1.outer).toString() + "|" + (this.zpp_inner.ws1.id > this.zpp_inner.ws2.id ? this.zpp_inner.ws1.outer : this.zpp_inner.ws2.outer).toString() + ")" + (this.zpp_inner.type == ha.COL ? "[" + ["SD",
                "DD"
            ][this.zpp_inner.colarb.stat ? 0 : 1] + "]" : "") + "<-" + this.get_state().toString()
        },
        __class__: af,
        __properties__: { get_state: "get_state", get_collisionArbiter: "get_collisionArbiter" }
    };
    var ge = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.dynamics.ArbiterIterator"] = ge;
    ge.__name__ = ["nape", "dynamics", "ArbiterIterator"];
    ge.get = function(a) {
        var b;
        null == ge.zpp_pool ? (Ee.internal = !0, b = new ge, Ee.internal = !1) : (b = ge.zpp_pool, ge.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner =
            a;
        b.zpp_critical = !1;
        return b
    };
    ge.prototype = { hasNext: function() { this.zpp_inner.zpp_inner.valmod(); var a = this.zpp_inner.zpp_gl();
            this.zpp_critical = !0; if (this.zpp_i < a) return !0;
            this.zpp_next = ge.zpp_pool;
            ge.zpp_pool = this;
            this.zpp_inner = null; return !1 }, next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) }, __class__: ge };
    var Gm = function() { this.zpp_inner = null;
        this.zpp_inner = new Ee;
        this.zpp_inner.outer = this };
    g["nape.dynamics.ArbiterList"] = Gm;
    Gm.__name__ = ["nape", "dynamics", "ArbiterList"];
    Gm.prototype = {
        zpp_gl: function() { this.zpp_inner.valmod(); if (this.zpp_inner.zip_length) { this.zpp_inner.zip_length = !1;
                this.zpp_inner.user_length = 0; for (var a = this.zpp_inner.inner.head; null != a;) a.elt.active && this.zpp_inner.user_length++, a = a.next } return this.zpp_inner.user_length },
        zpp_vm: function() { this.zpp_inner.valmod() },
        at: function(a) {
            this.zpp_vm();
            this.zpp_inner.reverse_flag && (a = this.zpp_gl() - 1 - a);
            if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) {
                this.zpp_inner.at_index = 0;
                for (this.zpp_inner.at_ite =
                    this.zpp_inner.inner.head; !this.zpp_inner.at_ite.elt.active;) this.zpp_inner.at_ite = this.zpp_inner.at_ite.next
            }
            for (; this.zpp_inner.at_index != a;) { this.zpp_inner.at_index++; for (this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; !this.zpp_inner.at_ite.elt.active;) this.zpp_inner.at_ite = this.zpp_inner.at_ite.next }
            return this.zpp_inner.at_ite.elt.wrapper()
        },
        iterator: function() { this.zpp_vm(); return ge.get(this) },
        toString: function() {
            for (var a = "[", b = !0, c = this.iterator(); c.hasNext();) {
                var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1
            }
            return a + "]"
        },
        __class__: Gm
    };
    var jh = function() {};
    g["nape.dynamics.ArbiterType"] = jh;
    jh.__name__ = ["nape", "dynamics", "ArbiterType"];
    jh.prototype = {
        toString: function() {
            var a;
            null == h.ArbiterType_COLLISION && (h.internal = !0, h.ArbiterType_COLLISION = new jh, h.internal = !1);
            this == h.ArbiterType_COLLISION ? a = "COLLISION" : (null == h.ArbiterType_SENSOR && (h.internal = !0, h.ArbiterType_SENSOR = new jh, h.internal = !1), this == h.ArbiterType_SENSOR ? a = "SENSOR" :
                (null == h.ArbiterType_FLUID && (h.internal = !0, h.ArbiterType_FLUID = new jh, h.internal = !1), a = this == h.ArbiterType_FLUID ? "FLUID" : ""));
            return a
        },
        __class__: jh
    };
    var ik = function() { this.zpp_inner = null };
    g["nape.dynamics.CollisionArbiter"] = ik;
    ik.__name__ = ["nape", "dynamics", "CollisionArbiter"];
    ik.__super__ = af;
    ik.prototype = k(af.prototype, {
        get_dynamicFriction: function() {
            var a = this.zpp_inner.colarb;
            a.invalidated && (a.invalidated = !1, a.userdef_restitution || (a.restitution = a.s1.material.elasticity <= Math.NEGATIVE_INFINITY ||
                    a.s2.material.elasticity <= Math.NEGATIVE_INFINITY ? 0 : a.s1.material.elasticity >= Math.POSITIVE_INFINITY || a.s2.material.elasticity >= Math.POSITIVE_INFINITY ? 1 : (a.s1.material.elasticity + a.s2.material.elasticity) / 2, 0 > a.restitution && (a.restitution = 0), 1 < a.restitution && (a.restitution = 1)), a.userdef_dyn_fric || (a.dyn_fric = Math.sqrt(a.s1.material.dynamicFriction * a.s2.material.dynamicFriction)), a.userdef_stat_fric || (a.stat_fric = Math.sqrt(a.s1.material.staticFriction * a.s2.material.staticFriction)), a.userdef_rfric ||
                (a.rfric = Math.sqrt(a.s1.material.rollingFriction * a.s2.material.rollingFriction)));
            return a.dyn_fric
        },
        set_dynamicFriction: function(a) { var b = this.zpp_inner.colarb;
            b.dyn_fric = a;
            b.userdef_dyn_fric = !0; return this.get_dynamicFriction() },
        get_staticFriction: function() {
            var a = this.zpp_inner.colarb;
            a.invalidated && (a.invalidated = !1, a.userdef_restitution || (a.restitution = a.s1.material.elasticity <= Math.NEGATIVE_INFINITY || a.s2.material.elasticity <= Math.NEGATIVE_INFINITY ? 0 : a.s1.material.elasticity >= Math.POSITIVE_INFINITY ||
                a.s2.material.elasticity >= Math.POSITIVE_INFINITY ? 1 : (a.s1.material.elasticity + a.s2.material.elasticity) / 2, 0 > a.restitution && (a.restitution = 0), 1 < a.restitution && (a.restitution = 1)), a.userdef_dyn_fric || (a.dyn_fric = Math.sqrt(a.s1.material.dynamicFriction * a.s2.material.dynamicFriction)), a.userdef_stat_fric || (a.stat_fric = Math.sqrt(a.s1.material.staticFriction * a.s2.material.staticFriction)), a.userdef_rfric || (a.rfric = Math.sqrt(a.s1.material.rollingFriction * a.s2.material.rollingFriction)));
            return a.stat_fric
        },
        set_staticFriction: function(a) { var b = this.zpp_inner.colarb;
            b.stat_fric = a;
            b.userdef_stat_fric = !0; return this.get_staticFriction() },
        get_rollingFriction: function() {
            var a = this.zpp_inner.colarb;
            a.invalidated && (a.invalidated = !1, a.userdef_restitution || (a.restitution = a.s1.material.elasticity <= Math.NEGATIVE_INFINITY || a.s2.material.elasticity <= Math.NEGATIVE_INFINITY ? 0 : a.s1.material.elasticity >= Math.POSITIVE_INFINITY || a.s2.material.elasticity >= Math.POSITIVE_INFINITY ? 1 : (a.s1.material.elasticity + a.s2.material.elasticity) /
                2, 0 > a.restitution && (a.restitution = 0), 1 < a.restitution && (a.restitution = 1)), a.userdef_dyn_fric || (a.dyn_fric = Math.sqrt(a.s1.material.dynamicFriction * a.s2.material.dynamicFriction)), a.userdef_stat_fric || (a.stat_fric = Math.sqrt(a.s1.material.staticFriction * a.s2.material.staticFriction)), a.userdef_rfric || (a.rfric = Math.sqrt(a.s1.material.rollingFriction * a.s2.material.rollingFriction)));
            return a.rfric
        },
        set_rollingFriction: function(a) { var b = this.zpp_inner.colarb;
            b.rfric = a;
            b.userdef_rfric = !0; return this.get_rollingFriction() },
        __class__: ik,
        __properties__: k(af.prototype.__properties__, { set_rollingFriction: "set_rollingFriction", get_rollingFriction: "get_rollingFriction", set_staticFriction: "set_staticFriction", get_staticFriction: "get_staticFriction", set_dynamicFriction: "set_dynamicFriction", get_dynamicFriction: "get_dynamicFriction" })
    });
    var Hm = function() { this.zpp_inner = null };
    g["nape.dynamics.Contact"] = Hm;
    Hm.__name__ = ["nape", "dynamics", "Contact"];
    Hm.prototype = {
        toString: function() {
            return null == this.zpp_inner.arbiter || this.zpp_inner.arbiter.cleared ?
                "{object-pooled}" : "{Contact}"
        },
        __class__: Hm
    };
    var he = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.dynamics.ContactIterator"] = he;
    he.__name__ = ["nape", "dynamics", "ContactIterator"];
    he.get = function(a) { var b;
        null == he.zpp_pool ? (kh.internal = !0, b = new he, kh.internal = !1) : (b = he.zpp_pool, he.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    he.prototype = {
        hasNext: function() {
            this.zpp_inner.zpp_inner.valmod();
            var a = this.zpp_inner.get_length();
            this.zpp_critical = !0;
            if (this.zpp_i < a) return !0;
            this.zpp_next = he.zpp_pool;
            he.zpp_pool = this;
            this.zpp_inner = null;
            return !1
        },
        next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) },
        __class__: he
    };
    var Hn = function() { this.zpp_inner = null };
    g["nape.dynamics.ContactList"] = Hn;
    Hn.__name__ = ["nape", "dynamics", "ContactList"];
    Hn.prototype = {
        get_length: function() {
            this.zpp_inner.valmod();
            if (this.zpp_inner.zip_length) {
                this.zpp_inner.zip_length = !1;
                this.zpp_inner.user_length = 0;
                for (var a = this.zpp_inner.inner.next; null !=
                    a;) { var b = a;
                    b.active && b.arbiter.active && this.zpp_inner.user_length++;
                    a = a.next }
            }
            return this.zpp_inner.user_length
        },
        at: function(a) {
            this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
            if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) { this.zpp_inner.at_index = 0; for (this.zpp_inner.at_ite = this.zpp_inner.inner.next;;) { var b = this.zpp_inner.at_ite; if (b.active && b.arbiter.active) break;
                    this.zpp_inner.at_ite = this.zpp_inner.at_ite.next } }
            for (; this.zpp_inner.at_index != a;) {
                this.zpp_inner.at_index++;
                for (this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;;) { b = this.zpp_inner.at_ite; if (b.active && b.arbiter.active) break;
                    this.zpp_inner.at_ite = this.zpp_inner.at_ite.next }
            }
            return this.zpp_inner.at_ite.wrapper()
        },
        toString: function() { var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod(); for (c = he.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 } return a + "]" },
        __class__: Hn,
        __properties__: { get_length: "get_length" }
    };
    var jk = function() {
        this.zpp_inner =
            null
    };
    g["nape.dynamics.FluidArbiter"] = jk;
    jk.__name__ = ["nape", "dynamics", "FluidArbiter"];
    jk.__super__ = af;
    jk.prototype = k(af.prototype, { __class__: jk });
    var dg = function(a, b, c, d, e, f) {
        null == f && (f = -1);
        null == e && (e = 1);
        null == d && (d = -1);
        null == c && (c = 1);
        null == b && (b = -1);
        null == a && (a = 1);
        this.zpp_inner = null;
        null == uc.zpp_pool ? this.zpp_inner = new uc : (this.zpp_inner = uc.zpp_pool, uc.zpp_pool = this.zpp_inner.next, this.zpp_inner.next = null);
        null;
        this.zpp_inner.outer = this;
        this.zpp_inner.collisionGroup != a && (this.zpp_inner.collisionGroup =
            a, this.zpp_inner.invalidate());
        this.zpp_inner.collisionGroup;
        this.zpp_inner.collisionMask != b && (this.zpp_inner.collisionMask = b, this.zpp_inner.invalidate());
        this.zpp_inner.collisionMask;
        this.zpp_inner.sensorGroup != c && (this.zpp_inner.sensorGroup = c, this.zpp_inner.invalidate());
        this.zpp_inner.sensorGroup;
        this.zpp_inner.sensorMask != d && (this.zpp_inner.sensorMask = d, this.zpp_inner.invalidate());
        this.zpp_inner.sensorMask;
        this.zpp_inner.fluidGroup != e && (this.zpp_inner.fluidGroup = e, this.zpp_inner.invalidate());
        this.zpp_inner.fluidGroup;
        this.zpp_inner.fluidMask != f && (this.zpp_inner.fluidMask = f, this.zpp_inner.invalidate());
        this.zpp_inner.fluidMask
    };
    g["nape.dynamics.InteractionFilter"] = dg;
    dg.__name__ = ["nape", "dynamics", "InteractionFilter"];
    dg.prototype = {
        set_collisionGroup: function(a) { this.zpp_inner.collisionGroup != a && (this.zpp_inner.collisionGroup = a, this.zpp_inner.invalidate()); return this.zpp_inner.collisionGroup },
        set_collisionMask: function(a) {
            this.zpp_inner.collisionMask != a && (this.zpp_inner.collisionMask =
                a, this.zpp_inner.invalidate());
            return this.zpp_inner.collisionMask
        },
        set_sensorGroup: function(a) { this.zpp_inner.sensorGroup != a && (this.zpp_inner.sensorGroup = a, this.zpp_inner.invalidate()); return this.zpp_inner.sensorGroup },
        set_sensorMask: function(a) { this.zpp_inner.sensorMask != a && (this.zpp_inner.sensorMask = a, this.zpp_inner.invalidate()); return this.zpp_inner.sensorMask },
        set_fluidGroup: function(a) { this.zpp_inner.fluidGroup != a && (this.zpp_inner.fluidGroup = a, this.zpp_inner.invalidate()); return this.zpp_inner.fluidGroup },
        set_fluidMask: function(a) { this.zpp_inner.fluidMask != a && (this.zpp_inner.fluidMask = a, this.zpp_inner.invalidate()); return this.zpp_inner.fluidMask },
        __class__: dg,
        __properties__: { set_fluidMask: "set_fluidMask", set_fluidGroup: "set_fluidGroup", set_sensorMask: "set_sensorMask", set_sensorGroup: "set_sensorGroup", set_collisionMask: "set_collisionMask", set_collisionGroup: "set_collisionGroup" }
    };
    var In = function() { this.zpp_inner = null };
    g["nape.dynamics.InteractionGroup"] = In;
    In.__name__ = ["nape", "dynamics", "InteractionGroup"];
    In.prototype = { toString: function() { var a = "InteractionGroup";
            this.zpp_inner.ignore && (a += ":ignore"); return a }, __class__: In };
    var Id = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.dynamics.InteractionGroupIterator"] = Id;
    Id.__name__ = ["nape", "dynamics", "InteractionGroupIterator"];
    Id.get = function(a) { var b;
        null == Id.zpp_pool ? (lh.internal = !0, b = new Id, lh.internal = !1) : (b = Id.zpp_pool, Id.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    Id.prototype = { hasNext: function() { this.zpp_inner.zpp_inner.valmod(); var a = this.zpp_inner.get_length();
            this.zpp_critical = !0; if (this.zpp_i < a) return !0;
            this.zpp_next = Id.zpp_pool;
            Id.zpp_pool = this;
            this.zpp_inner = null; return !1 }, next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) }, __class__: Id };
    var Jn = function() { this.zpp_inner = null };
    g["nape.dynamics.InteractionGroupList"] = Jn;
    Jn.__name__ = ["nape", "dynamics", "InteractionGroupList"];
    Jn.prototype = {
        get_length: function() {
            this.zpp_inner.valmod();
            this.zpp_inner.zip_length &&
                (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length);
            return this.zpp_inner.user_length
        },
        at: function(a) { this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a); if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; return this.zpp_inner.at_ite.elt.outer },
        toString: function() { var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod(); for (c = Id.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 } return a + "]" },
        __class__: Jn,
        __properties__: { get_length: "get_length" }
    };
    var Im = function(a, b, c, d) { null == d && (d = 0);
        null == c && (c = 0);
        null == b && (b = 0);
        null == a && (a = 0);
        this.zpp_inner = null;
        this.zpp_inner = Ya.get(a, b, a + c, b + d);
        this.zpp_inner.outer = this };
    g["nape.geom.AABB"] = Im;
    Im.__name__ = ["nape", "geom", "AABB"];
    Im.prototype = { get_x: function() { this.zpp_inner.validate(); return this.zpp_inner.minx }, get_width: function() { this.zpp_inner.validate(); return this.zpp_inner.width() }, get_height: function() { this.zpp_inner.validate(); return this.zpp_inner.height() }, toString: function() { this.zpp_inner.validate(); return this.zpp_inner.toString() }, __class__: Im, __properties__: { get_height: "get_height", get_width: "get_width", get_x: "get_x" } };
    var Kn = function() { this.zpp_inner = null };
    g["nape.geom.ConvexResult"] = Kn;
    Kn.__name__ = ["nape", "geom", "ConvexResult"];
    Kn.prototype = { toString: function() { return "{ shape: " + y.string(this.zpp_inner.shape) + " toi: " + this.zpp_inner.toiDistance + " }" }, __class__: Kn };
    var Jd = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.geom.ConvexResultIterator"] = Jd;
    Jd.__name__ = ["nape", "geom", "ConvexResultIterator"];
    Jd.get = function(a) { var b;
        null == Jd.zpp_pool ? (mh.internal = !0, b = new Jd, mh.internal = !1) : (b = Jd.zpp_pool, Jd.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    Jd.prototype = { hasNext: function() { this.zpp_inner.zpp_inner.valmod(); var a = this.zpp_inner.get_length();
            this.zpp_critical = !0; if (this.zpp_i < a) return !0;
            this.zpp_next = Jd.zpp_pool;
            Jd.zpp_pool = this;
            this.zpp_inner = null; return !1 }, next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) }, __class__: Jd };
    var Ln = function() { this.zpp_inner = null };
    g["nape.geom.ConvexResultList"] = Ln;
    Ln.__name__ = ["nape", "geom", "ConvexResultList"];
    Ln.prototype = {
        get_length: function() {
            this.zpp_inner.valmod();
            this.zpp_inner.zip_length &&
                (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length);
            return this.zpp_inner.user_length
        },
        at: function(a) { this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a); if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; return this.zpp_inner.at_ite.elt },
        toString: function() { var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod(); for (c = Jd.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 } return a + "]" },
        __class__: Ln,
        __properties__: { get_length: "get_length" }
    };
    var Jm = function() { this.zpp_inner = null };
    g["nape.geom.GeomPoly"] = Jm;
    Jm.__name__ = ["nape", "geom", "GeomPoly"];
    Jm.prototype = {
        toString: function() {
            var a = "GeomPoly[",
                b = this.zpp_inner.vertices,
                c = this.zpp_inner.vertices;
            if (null != b) {
                do {
                    var d = b;
                    d !=
                        this.zpp_inner.vertices && (a += ",");
                    a += "{" + d.x + "," + d.y + "}";
                    b = b.next
                } while (b != c)
            }
            return a + "]"
        },
        __class__: Jm
    };
    var ie = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.geom.GeomPolyIterator"] = ie;
    ie.__name__ = ["nape", "geom", "GeomPolyIterator"];
    ie.get = function(a) { var b;
        null == ie.zpp_pool ? (nh.internal = !0, b = new ie, nh.internal = !1) : (b = ie.zpp_pool, ie.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    ie.prototype = {
        hasNext: function() {
            this.zpp_inner.zpp_inner.valmod();
            var a = this.zpp_inner.get_length();
            this.zpp_critical = !0;
            if (this.zpp_i < a) return !0;
            this.zpp_next = ie.zpp_pool;
            ie.zpp_pool = this;
            this.zpp_inner = null;
            return !1
        },
        next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) },
        __class__: ie
    };
    var Mn = function() { this.zpp_inner = null };
    g["nape.geom.GeomPolyList"] = Mn;
    Mn.__name__ = ["nape", "geom", "GeomPolyList"];
    Mn.prototype = {
        get_length: function() {
            this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length =
                this.zpp_inner.inner.length);
            return this.zpp_inner.user_length
        },
        at: function(a) { this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a); if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; return this.zpp_inner.at_ite.elt.outer },
        toString: function() {
            var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod();
            for (c = ie.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 }
            return a + "]"
        },
        __class__: Mn,
        __properties__: { get_length: "get_length" }
    };
    var Nn = function() { this.zpp_inner = null };
    g["nape.geom.Mat23"] = Nn;
    Nn.__name__ = ["nape", "geom", "Mat23"];
    Nn.prototype = { toString: function() { return "{ a: " + this.zpp_inner.a + " b: " + this.zpp_inner.b + " c: " + this.zpp_inner.c + " d: " + this.zpp_inner.d + " tx: " + this.zpp_inner.tx + " ty: " + this.zpp_inner.ty + " }" }, __class__: Nn };
    var On = function() { this.zpp_inner = null };
    g["nape.geom.MatMN"] = On;
    On.__name__ = ["nape", "geom", "MatMN"];
    On.prototype = { toString: function() { for (var a = "{ ", b = !0, c = 0, d = this.zpp_inner.m; c < d;) { var e = c++;
                b || (a += "; "); for (var b = !1, f = 0, l = this.zpp_inner.n; f < l;) var h = f++,
                    a = a + (this.zpp_inner.x[e * this.zpp_inner.n + h] + " ") } return a + "}" }, __class__: On };
    var Lm = function(a, b) {
        this.zpp_inner = null;
        this.zpp_inner = new Km;
        this.zpp_inner.origin.set(a);
        this.zpp_inner.origin;
        this.zpp_inner.direction.set(b);
        this.zpp_inner.zip_dir = !0;
        this.zpp_inner.direction;
        this.zpp_inner.maxdist = Math.POSITIVE_INFINITY
    };
    g["nape.geom.Ray"] = Lm;
    Lm.__name__ = ["nape", "geom", "Ray"];
    Lm.prototype = { set_maxDistance: function(a) { this.zpp_inner.maxdist = a; return this.zpp_inner.maxdist }, __class__: Lm, __properties__: { set_maxDistance: "set_maxDistance" } };
    var Mm = function() { this.zpp_inner = null };
    g["nape.geom.RayResult"] = Mm;
    Mm.__name__ = ["nape", "geom", "RayResult"];
    Mm.prototype = {
        toString: function() {
            return "{ shape: " + y.string(this.zpp_inner.shape) + " distance: " + this.zpp_inner.toiDistance +
                " ?inner: " + y.string(this.zpp_inner.inner) + " }"
        },
        __class__: Mm
    };
    var xd = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.geom.RayResultIterator"] = xd;
    xd.__name__ = ["nape", "geom", "RayResultIterator"];
    xd.get = function(a) { var b;
        null == xd.zpp_pool ? (pg.internal = !0, b = new xd, pg.internal = !1) : (b = xd.zpp_pool, xd.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    xd.prototype = {
        hasNext: function() {
            this.zpp_inner.zpp_inner.valmod();
            var a = this.zpp_inner.get_length();
            this.zpp_critical = !0;
            if (this.zpp_i < a) return !0;
            this.zpp_next = xd.zpp_pool;
            xd.zpp_pool = this;
            this.zpp_inner = null;
            return !1
        },
        next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) },
        __class__: xd
    };
    var oh = function() { this.zpp_inner = null;
        this.zpp_inner = new pg;
        this.zpp_inner.outer = this };
    g["nape.geom.RayResultList"] = oh;
    oh.__name__ = ["nape", "geom", "RayResultList"];
    oh.prototype = {
        get_length: function() {
            this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length =
                this.zpp_inner.inner.length);
            return this.zpp_inner.user_length
        },
        at: function(a) { this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a); if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; return this.zpp_inner.at_ite.elt },
        pop: function() {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var a = null;
            if (this.zpp_inner.reverse_flag) a = this.zpp_inner.inner.head.elt, null != this.zpp_inner.subber && this.zpp_inner.subber(a), this.zpp_inner.dontremove || this.zpp_inner.inner.pop();
            else { null != this.zpp_inner.at_ite && null == this.zpp_inner.at_ite.next && (this.zpp_inner.at_ite = null); var b;
                b = 1 == this.get_length() ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 2);
                a = null == b ? this.zpp_inner.inner.head.elt : b.next.elt;
                null != this.zpp_inner.subber && this.zpp_inner.subber(a);
                this.zpp_inner.dontremove || this.zpp_inner.inner.erase(b) } this.zpp_inner.invalidate();
            return a
        },
        shift: function() {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var a = null;
            if (this.zpp_inner.reverse_flag) { null != this.zpp_inner.at_ite && null == this.zpp_inner.at_ite.next && (this.zpp_inner.at_ite = null); var b;
                b = 1 == this.get_length() ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 2);
                a = null == b ? this.zpp_inner.inner.head.elt : b.next.elt;
                null != this.zpp_inner.subber && this.zpp_inner.subber(a);
                this.zpp_inner.dontremove || this.zpp_inner.inner.erase(b) } else a = this.zpp_inner.inner.head.elt,
                null != this.zpp_inner.subber && this.zpp_inner.subber(a), this.zpp_inner.dontremove || this.zpp_inner.inner.pop();
            this.zpp_inner.invalidate();
            return a
        },
        clear: function() { if (this.zpp_inner.reverse_flag)
                for (; null != this.zpp_inner.inner.head;) this.pop();
            else
                for (; null != this.zpp_inner.inner.head;) this.shift() },
        iterator: function() { this.zpp_inner.valmod(); return xd.get(this) },
        toString: function() {
            var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod();
            for (c = xd.get(this); c.hasNext();) {
                var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1
            }
            return a + "]"
        },
        __class__: oh,
        __properties__: { get_length: "get_length" }
    };
    var aa = function(a, b) { null == b && (b = 0);
        null == a && (a = 0);
        this.zpp_inner = this.zpp_pool = null;
        this.zpp_inner = Ha.get(a, b, null);
        this.zpp_inner.outer = this };
    g["nape.geom.Vec2"] = aa;
    aa.__name__ = ["nape", "geom", "Vec2"];
    aa.weak = function(a, b) { null == b && (b = 0);
        null == a && (a = 0); return aa.get(a, b, !0) };
    aa.get = function(a, b, c) {
        null == c && (c = !1);
        null == b && (b = 0);
        null == a && (a = 0);
        var d;
        null == ph.poolVec2 ? d = new aa : (d =
            ph.poolVec2, ph.poolVec2 = d.zpp_pool, d.zpp_pool = null);
        if (null == d.zpp_inner) d.zpp_inner = Ha.get(a, b, null), d.zpp_inner.outer = d;
        else { var e;
            d.zpp_inner.validate(); if (e = d.zpp_inner.x == a) d.zpp_inner.validate(), e = d.zpp_inner.y == b;
            e || (d.zpp_inner.x = a, d.zpp_inner.y = b, d.zpp_inner.invalidate());
            d } d.zpp_inner.weak = c;
        return d
    };
    aa.prototype = {
        dispose: function() {
            var a = this.zpp_inner;
            this.zpp_inner = this.zpp_inner.outer = null;
            this.zpp_pool = ph.poolVec2;
            ph.poolVec2 = this;
            null != a.outer && (a.outer.zpp_inner = null, a.outer = null);
            a._isimmutable = null;
            a._validate = null;
            a._invalidate = null;
            a.next = Ha.zpp_pool;
            Ha.zpp_pool = a
        },
        get_x: function() { this.zpp_inner.validate(); return this.zpp_inner.x },
        set_x: function(a) { this.zpp_inner.validate();
            this.zpp_inner.x != a && (this.zpp_inner.x = a, this.zpp_inner.invalidate());
            this.zpp_inner.validate(); return this.zpp_inner.x },
        get_y: function() { this.zpp_inner.validate(); return this.zpp_inner.y },
        set_y: function(a) {
            this.zpp_inner.validate();
            this.zpp_inner.y != a && (this.zpp_inner.y = a, this.zpp_inner.invalidate());
            this.zpp_inner.validate();
            return this.zpp_inner.y
        },
        set: function(a) { var b = this.setxy(function() { a.zpp_inner.validate(); return a.zpp_inner.x }(this), function() { a.zpp_inner.validate(); return a.zpp_inner.y }(this));
            a.zpp_inner.weak ? (a.dispose(), !0) : !1; return b },
        setxy: function(a, b) { var c;
            this.zpp_inner.validate(); if (c = this.zpp_inner.x == a) this.zpp_inner.validate(), c = this.zpp_inner.y == b;
            c || (this.zpp_inner.x = a, this.zpp_inner.y = b, this.zpp_inner.invalidate()); return this },
        sub: function(a, b) {
            null == b && (b = !1);
            var c =
                aa.get(function(a) { a.zpp_inner.validate(); return a.zpp_inner.x }(this) - function() { a.zpp_inner.validate(); return a.zpp_inner.x }(this), function(a) { a.zpp_inner.validate(); return a.zpp_inner.y }(this) - function() { a.zpp_inner.validate(); return a.zpp_inner.y }(this), b);
            a.zpp_inner.weak ? (a.dispose(), !0) : !1;
            return c
        },
        muleq: function(a) { return this.setxy(function(a) { a.zpp_inner.validate(); return a.zpp_inner.x }(this) * a, function(a) { a.zpp_inner.validate(); return a.zpp_inner.y }(this) * a) },
        toString: function() {
            this.zpp_inner.validate();
            return this.zpp_inner.toString()
        },
        __class__: aa,
        __properties__: { set_y: "set_y", get_y: "get_y", set_x: "set_x", get_x: "get_x" }
    };
    var je = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.geom.Vec2Iterator"] = je;
    je.__name__ = ["nape", "geom", "Vec2Iterator"];
    je.get = function(a) { var b;
        null == je.zpp_pool ? (qg.internal = !0, b = new je, qg.internal = !1) : (b = je.zpp_pool, je.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    je.prototype = {
        hasNext: function() {
            this.zpp_inner.zpp_inner.valmod();
            var a = this.zpp_inner.zpp_gl();
            this.zpp_critical = !0;
            if (this.zpp_i < a) return !0;
            this.zpp_next = je.zpp_pool;
            je.zpp_pool = this;
            this.zpp_inner = null;
            return !1
        },
        next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) },
        __class__: je
    };
    var Ef = function() { this.zpp_inner = null;
        this.zpp_inner = new qg;
        this.zpp_inner.outer = this };
    g["nape.geom.Vec2List"] = Ef;
    Ef.__name__ = ["nape", "geom", "Vec2List"];
    Ef.prototype = {
        zpp_gl: function() {
            this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length);
            return this.zpp_inner.user_length
        },
        zpp_vm: function() { this.zpp_inner.valmod() },
        at: function(a) { this.zpp_vm();
            this.zpp_inner.reverse_flag && (a = this.zpp_gl() - 1 - a); if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; return this.zpp_inner.at_ite.elt.wrapper() },
        push: function(a) { this.zpp_inner.modify_test();
            this.zpp_vm(); var b; if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? this.zpp_inner.inner.add(a.zpp_inner) : (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = this.empty() ? null : this.zpp_inner.inner.iterator_at(this.zpp_gl() - 1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a); return b },
        empty: function() { return 0 == this.zpp_gl() },
        iterator: function() { this.zpp_vm(); return je.get(this) },
        toString: function() { for (var a = "[", b = !0, c = this.iterator(); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 } return a + "]" },
        __class__: Ef
    };
    var Pn = function() { this.zpp_inner = null };
    g["nape.geom.Vec3"] = Pn;
    Pn.__name__ = ["nape", "geom", "Vec3"];
    Pn.prototype = {
        toString: function() {
            this.zpp_inner.validate();
            var a = "{ x: " + this.zpp_inner.x + " y: ";
            this.zpp_inner.validate();
            a = a + this.zpp_inner.y + " z: ";
            this.zpp_inner.validate();
            return a + this.zpp_inner.z + " }"
        },
        __class__: Pn
    };
    var qh = function() {};
    g["nape.geom.Winding"] = qh;
    qh.__name__ = ["nape", "geom", "Winding"];
    qh.prototype = {
        toString: function() {
            var a;
            null == h.Winding_UNDEFINED && (h.internal = !0, h.Winding_UNDEFINED = new qh, h.internal = !1);
            this == h.Winding_UNDEFINED ? a = "UNDEFINED" : (null == h.Winding_CLOCKWISE && (h.internal = !0, h.Winding_CLOCKWISE = new qh, h.internal = !1), this == h.Winding_CLOCKWISE ? a = "CLOCKWISE" : (null == h.Winding_ANTICLOCKWISE &&
                (h.internal = !0, h.Winding_ANTICLOCKWISE = new qh, h.internal = !1), a = this == h.Winding_ANTICLOCKWISE ? "ANTICLOCKWISE" : ""));
            return a
        },
        __class__: qh
    };
    var gc = function() { this.zpp_inner_i = null };
    g["nape.phys.Interactor"] = gc;
    gc.__name__ = ["nape", "phys", "Interactor"];
    gc.prototype = {
        get_userData: function() { null == this.zpp_inner_i.userData && (this.zpp_inner_i.userData = {}); return this.zpp_inner_i.userData },
        get_castBody: function() { return null != this.zpp_inner_i.ibody ? this.zpp_inner_i.ibody.outer : null },
        get_cbTypes: function() {
            null ==
                this.zpp_inner_i.wrap_cbTypes && this.zpp_inner_i.setupcbTypes();
            return this.zpp_inner_i.wrap_cbTypes
        },
        toString: function() { return "" },
        __class__: gc,
        __properties__: { get_cbTypes: "get_cbTypes", get_castBody: "get_castBody", get_userData: "get_userData" }
    };
    var fg = function(a, b) {
        this.zpp_inner_i = this.zpp_inner = null;
        this.zpp_inner = new Fe;
        this.zpp_inner.outer = this;
        this.zpp_inner.outer_i = this;
        this.zpp_inner_i = this.zpp_inner;
        null != b ? (b.zpp_inner.validate(), this.zpp_inner.posx = b.zpp_inner.x, b.zpp_inner.validate(), this.zpp_inner.posy =
            b.zpp_inner.y) : (this.zpp_inner.posx = 0, this.zpp_inner.posy = 0);
        this.set_type(null == a ? function() { null == h.BodyType_DYNAMIC && (h.internal = !0, h.BodyType_DYNAMIC = new Gb, h.internal = !1); return h.BodyType_DYNAMIC }(this) : a);
        null != b && (b.zpp_inner.weak ? (b.dispose(), !0) : !1);
        this.zpp_inner_i.insert_cbtype(Hc.ANY_BODY.zpp_inner)
    };
    g["nape.phys.Body"] = fg;
    fg.__name__ = ["nape", "phys", "Body"];
    fg.__super__ = gc;
    fg.prototype = k(gc.prototype, {
        set_type: function(a) {
            this.zpp_inner.immutable_midstep("Body::type");
            Fe.types[this.zpp_inner.type] !=
                a && (null == h.BodyType_DYNAMIC && (h.internal = !0, h.BodyType_DYNAMIC = new Gb, h.internal = !1), a == h.BodyType_DYNAMIC ? a = h.id_BodyType_DYNAMIC : (null == h.BodyType_KINEMATIC && (h.internal = !0, h.BodyType_KINEMATIC = new Gb, h.internal = !1), a = a == h.BodyType_KINEMATIC ? h.id_BodyType_KINEMATIC : h.id_BodyType_STATIC), a == h.id_BodyType_STATIC && null != this.zpp_inner.space && (this.zpp_inner.velx = 0, this.zpp_inner.vely = 0, this.zpp_inner.angvel = 0), this.zpp_inner.invalidate_type(), null != this.zpp_inner.space ? this.zpp_inner.space.transmitType(this.zpp_inner,
                    a) : this.zpp_inner.type = a);
            return Fe.types[this.zpp_inner.type]
        },
        set_isBullet: function(a) { this.zpp_inner.bulletEnabled = a; return this.zpp_inner.bulletEnabled },
        get_space: function() { return null == this.zpp_inner.space ? null : this.zpp_inner.space.outer },
        set_space: function(a) {
            this.zpp_inner.immutable_midstep("Body::space");
            if ((null == this.zpp_inner.space ? null : this.zpp_inner.space.outer) != a) {
                if (null != (null == this.zpp_inner.space ? null : this.zpp_inner.space.outer)) this.zpp_inner.component.woken = !1;
                if (null != (null ==
                        this.zpp_inner.space ? null : this.zpp_inner.space.outer))(null == this.zpp_inner.space ? null : this.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(this);
                null != a && a.zpp_inner.wrap_bodies.add(this)
            }
            return null == this.zpp_inner.space ? null : this.zpp_inner.space.outer
        },
        get_arbiters: function() { null == this.zpp_inner.wrap_arbiters && (this.zpp_inner.wrap_arbiters = Ee.get(this.zpp_inner.arbiters, !0)); return this.zpp_inner.wrap_arbiters },
        get_position: function() {
            null == this.zpp_inner.wrap_pos && this.zpp_inner.setupPosition();
            return this.zpp_inner.wrap_pos
        },
        set_position: function(a) { null == this.zpp_inner.wrap_pos && this.zpp_inner.setupPosition();
            this.zpp_inner.wrap_pos.set(a);
            null == this.zpp_inner.wrap_pos && this.zpp_inner.setupPosition(); return this.zpp_inner.wrap_pos },
        get_velocity: function() { null == this.zpp_inner.wrap_vel && this.zpp_inner.setupVelocity(); return this.zpp_inner.wrap_vel },
        setVelocityFromTarget: function(a, b, c) {
            c = 1 / c;
            null == this.zpp_inner.wrap_vel && this.zpp_inner.setupVelocity();
            this.zpp_inner.wrap_vel.set(a.sub(function(a) {
                null ==
                    a.zpp_inner.wrap_pos && a.zpp_inner.setupPosition();
                return a.zpp_inner.wrap_pos
            }(this), !0).muleq(c));
            this.set_angularVel((b - this.zpp_inner.rot) * c);
            a.zpp_inner.weak ? (a.dispose(), !0) : !1;
            return this
        },
        set_force: function(a) { null == this.zpp_inner.wrap_force && this.zpp_inner.setupForce();
            this.zpp_inner.wrap_force.set(a);
            null == this.zpp_inner.wrap_force && this.zpp_inner.setupForce(); return this.zpp_inner.wrap_force },
        set_rotation: function(a) {
            this.zpp_inner.immutable_midstep("Body::rotation");
            this.zpp_inner.rot !=
                a && (this.zpp_inner.rot = a, this.zpp_inner.invalidate_rot(), this.zpp_inner.wake());
            return this.zpp_inner.rot
        },
        set_angularVel: function(a) { this.zpp_inner.angvel != a && (this.zpp_inner.angvel = a, this.zpp_inner.wake()); return this.zpp_inner.angvel },
        set_allowRotation: function(a) { this.zpp_inner.immutable_midstep("Body::" + (null == a ? "null" : "" + a));!this.zpp_inner.norotate != a && (this.zpp_inner.norotate = !a, this.zpp_inner.invalidate_inertia()); return !this.zpp_inner.norotate },
        set_mass: function(a) {
            this.zpp_inner.immutable_midstep("Body::mass");
            this.zpp_inner.massMode = h.id_MassMode_FIXED;
            this.zpp_inner.cmass = a;
            this.zpp_inner.invalidate_mass();
            this.zpp_inner.validate_mass();
            return this.zpp_inner.cmass
        },
        set_gravMassScale: function(a) { this.zpp_inner.immutable_midstep("Body::gravMassScale");
            this.zpp_inner.gravMassMode = h.id_GravMassMode_SCALED;
            this.zpp_inner.gravMassScale = a;
            this.zpp_inner.invalidate_gravMassScale();
            this.zpp_inner.validate_gravMassScale(); return this.zpp_inner.gravMassScale },
        localPointToWorld: function(a, b) {
            null == b && (b = !1);
            this.zpp_inner.validate_axis();
            var c = 0,
                d = 0,
                c = this.zpp_inner.axisy;
            a.zpp_inner.validate();
            c *= a.zpp_inner.x;
            d = this.zpp_inner.axisx;
            a.zpp_inner.validate();
            c -= d * a.zpp_inner.y;
            a.zpp_inner.validate();
            d = a.zpp_inner.x * this.zpp_inner.axisx;
            a.zpp_inner.validate();
            d += a.zpp_inner.y * this.zpp_inner.axisy;
            a.zpp_inner.weak ? (a.dispose(), !0) : !1;
            return aa.get(c + this.zpp_inner.posx, d + this.zpp_inner.posy, b)
        },
        applyImpulse: function(a, b, c) {
            null == c && (c = !1);
            if (c && this.zpp_inner.component.sleeping) return a.zpp_inner.weak ? (a.dispose(), !0) : !1, null != b && (b.zpp_inner.weak ?
                (b.dispose(), !0) : !1), this;
            this.zpp_inner.validate_mass();
            var d = this.zpp_inner.imass,
                e = this.zpp_inner,
                f = this.zpp_inner.velx;
            a.zpp_inner.validate();
            e.velx = f + a.zpp_inner.x * d;
            e = this.zpp_inner;
            f = this.zpp_inner.vely;
            a.zpp_inner.validate();
            e.vely = f + a.zpp_inner.y * d;
            if (null != b) {
                var l = 0,
                    d = 0;
                b.zpp_inner.validate();
                l = b.zpp_inner.x - this.zpp_inner.posx;
                b.zpp_inner.validate();
                d = b.zpp_inner.y - this.zpp_inner.posy;
                this.zpp_inner.validate_inertia();
                e = this.zpp_inner;
                f = this.zpp_inner.angvel;
                a.zpp_inner.validate();
                l *=
                    a.zpp_inner.y;
                a.zpp_inner.validate();
                e.angvel = f + (l - a.zpp_inner.x * d) * this.zpp_inner.iinertia;
                b.zpp_inner.weak ? (b.dispose(), !0) : !1
            }
            c || this.zpp_inner.type == h.id_BodyType_DYNAMIC && this.zpp_inner.wake();
            a.zpp_inner.weak ? (a.dispose(), !0) : !1;
            return this
        },
        setShapeFilters: function(a) { this.zpp_inner.immutable_midstep("Body::setShapeFilters()"); for (var b = this.zpp_inner.shapes.head; null != b;) b.elt.outer.set_filter(a), b = b.next; return this },
        toString: function() {
            return (this.zpp_inner.world ? "(space::world" : "(" + (this.zpp_inner.type ==
                h.id_BodyType_DYNAMIC ? "dynamic" : this.zpp_inner.type == h.id_BodyType_STATIC ? "static" : "kinematic")) + ")#" + this.zpp_inner_i.id
        },
        __class__: fg,
        __properties__: k(gc.prototype.__properties__, {
            set_gravMassScale: "set_gravMassScale",
            set_mass: "set_mass",
            set_allowRotation: "set_allowRotation",
            set_angularVel: "set_angularVel",
            set_rotation: "set_rotation",
            set_force: "set_force",
            get_velocity: "get_velocity",
            set_position: "set_position",
            get_position: "get_position",
            get_arbiters: "get_arbiters",
            set_space: "set_space",
            get_space: "get_space",
            set_isBullet: "set_isBullet",
            set_type: "set_type"
        })
    });
    var hc = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.phys.BodyIterator"] = hc;
    hc.__name__ = ["nape", "phys", "BodyIterator"];
    hc.get = function(a) { var b;
        null == hc.zpp_pool ? (Ge.internal = !0, b = new hc, Ge.internal = !1) : (b = hc.zpp_pool, hc.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    hc.prototype = {
        hasNext: function() {
            this.zpp_inner.zpp_inner.valmod();
            var a = this.zpp_inner.get_length();
            this.zpp_critical = !0;
            if (this.zpp_i < a) return !0;
            this.zpp_next = hc.zpp_pool;
            hc.zpp_pool = this;
            this.zpp_inner = null;
            return !1
        },
        next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) },
        __class__: hc
    };
    var Nm = function() { this.zpp_inner = null;
        this.zpp_inner = new Ge;
        this.zpp_inner.outer = this };
    g["nape.phys.BodyList"] = Nm;
    Nm.__name__ = ["nape", "phys", "BodyList"];
    Nm.prototype = {
        get_length: function() {
            this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length);
            return this.zpp_inner.user_length
        },
        at: function(a) { this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a); if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; return this.zpp_inner.at_ite.elt.outer },
        push: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b =
                null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? this.zpp_inner.inner.add(a.zpp_inner) : (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        unshift: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)) : this.zpp_inner.inner.add(a.zpp_inner), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        add: function(a) {
            return this.zpp_inner.reverse_flag ?
                this.push(a) : this.unshift(a)
        },
        remove: function(a) { this.zpp_inner.modify_test();
            this.zpp_inner.valmod(); var b;
            b = !1; for (var c = this.zpp_inner.inner.head; null != c;) { if (c.elt == a.zpp_inner) { b = !0; break } c = c.next } b && (null != this.zpp_inner.subber && this.zpp_inner.subber(a), this.zpp_inner.dontremove || this.zpp_inner.inner.remove(a.zpp_inner), this.zpp_inner.invalidate()); return b },
        toString: function() {
            var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod();
            for (c = hc.get(this); c.hasNext();) {
                var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1
            }
            return a + "]"
        },
        __class__: Nm,
        __properties__: { get_length: "get_length" }
    };
    var Gb = function() {};
    g["nape.phys.BodyType"] = Gb;
    Gb.__name__ = ["nape", "phys", "BodyType"];
    Gb.prototype = {
        toString: function() {
            var a;
            null == h.BodyType_STATIC && (h.internal = !0, h.BodyType_STATIC = new Gb, h.internal = !1);
            this == h.BodyType_STATIC ? a = "STATIC" : (null == h.BodyType_DYNAMIC && (h.internal = !0, h.BodyType_DYNAMIC = new Gb, h.internal = !1), this == h.BodyType_DYNAMIC ? a = "DYNAMIC" : (null == h.BodyType_KINEMATIC &&
                (h.internal = !0, h.BodyType_KINEMATIC = new Gb, h.internal = !1), a = this == h.BodyType_KINEMATIC ? "KINEMATIC" : ""));
            return a
        },
        __class__: Gb
    };
    var Om = function() { this.zpp_inner = null };
    g["nape.phys.Compound"] = Om;
    Om.__name__ = ["nape", "phys", "Compound"];
    Om.__super__ = gc;
    Om.prototype = k(gc.prototype, { toString: function() { return "Compound" + this.zpp_inner_i.id }, __class__: Om });
    var ke = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.phys.CompoundIterator"] = ke;
    ke.__name__ = ["nape", "phys",
        "CompoundIterator"
    ];
    ke.get = function(a) { var b;
        null == ke.zpp_pool ? (bf.internal = !0, b = new ke, bf.internal = !1) : (b = ke.zpp_pool, ke.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    ke.prototype = { hasNext: function() { this.zpp_inner.zpp_inner.valmod(); var a = this.zpp_inner.get_length();
            this.zpp_critical = !0; if (this.zpp_i < a) return !0;
            this.zpp_next = ke.zpp_pool;
            ke.zpp_pool = this;
            this.zpp_inner = null; return !1 }, next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) }, __class__: ke };
    var Pm = function() { this.zpp_inner = null;
        this.zpp_inner = new bf;
        this.zpp_inner.outer = this };
    g["nape.phys.CompoundList"] = Pm;
    Pm.__name__ = ["nape", "phys", "CompoundList"];
    Pm.prototype = {
        get_length: function() { this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length); return this.zpp_inner.user_length },
        at: function(a) {
            this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
            if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index =
                a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
            return this.zpp_inner.at_ite.elt.outer
        },
        remove: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            b = !1;
            for (var c = this.zpp_inner.inner.head; null != c;) { if (c.elt == a.zpp_inner) { b = !0; break } c = c.next } b && (null != this.zpp_inner.subber && this.zpp_inner.subber(a), this.zpp_inner.dontremove || this.zpp_inner.inner.remove(a.zpp_inner),
                this.zpp_inner.invalidate());
            return b
        },
        toString: function() { var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod(); for (c = ke.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 } return a + "]" },
        __class__: Pm,
        __properties__: { get_length: "get_length" }
    };
    var Ff = function(a, b) {
        null == b && (b = 1);
        null == a && (a = 1);
        this.zpp_inner = null;
        null == cf.zpp_pool ? this.zpp_inner = new cf : (this.zpp_inner = cf.zpp_pool, cf.zpp_pool = this.zpp_inner.next, this.zpp_inner.next = null);
        null;
        this.zpp_inner.outer = this;
        a != 1E3 * this.zpp_inner.density && (this.zpp_inner.density = a / 1E3, this.zpp_inner.invalidate());
        1E3 * this.zpp_inner.density;
        b != this.zpp_inner.viscosity && (this.zpp_inner.viscosity = b / 1, this.zpp_inner.invalidate());
        this.zpp_inner.viscosity
    };
    g["nape.phys.FluidProperties"] = Ff;
    Ff.__name__ = ["nape", "phys", "FluidProperties"];
    Ff.prototype = {
        set_density: function(a) { a != 1E3 * this.zpp_inner.density && (this.zpp_inner.density = a / 1E3, this.zpp_inner.invalidate()); return 1E3 * this.zpp_inner.density },
        set_viscosity: function(a) { a != this.zpp_inner.viscosity && (this.zpp_inner.viscosity = a / 1, this.zpp_inner.invalidate()); return this.zpp_inner.viscosity },
        toString: function() { return "{ density: " + 1E3 * this.zpp_inner.density + " viscosity: " + this.zpp_inner.viscosity + " gravity: " + y.string(this.zpp_inner.wrap_gravity) + " }" },
        __class__: Ff,
        __properties__: { set_viscosity: "set_viscosity", set_density: "set_density" }
    };
    var rh = function() {};
    g["nape.phys.GravMassMode"] = rh;
    rh.__name__ = ["nape", "phys", "GravMassMode"];
    rh.prototype = { toString: function() { var a;
            null == h.GravMassMode_DEFAULT && (h.internal = !0, h.GravMassMode_DEFAULT = new rh, h.internal = !1);
            this == h.GravMassMode_DEFAULT ? a = "DEFAULT" : (null == h.GravMassMode_FIXED && (h.internal = !0, h.GravMassMode_FIXED = new rh, h.internal = !1), this == h.GravMassMode_FIXED ? a = "FIXED" : (null == h.GravMassMode_SCALED && (h.internal = !0, h.GravMassMode_SCALED = new rh, h.internal = !1), a = this == h.GravMassMode_SCALED ? "SCALED" : "")); return a }, __class__: rh };
    var kk = function() {};
    g["nape.phys.InertiaMode"] = kk;
    kk.__name__ = ["nape", "phys", "InertiaMode"];
    kk.prototype = { toString: function() { var a;
            null == h.InertiaMode_DEFAULT && (h.internal = !0, h.InertiaMode_DEFAULT = new kk, h.internal = !1);
            this == h.InertiaMode_DEFAULT ? a = "DEFAULT" : (null == h.InertiaMode_FIXED && (h.internal = !0, h.InertiaMode_FIXED = new kk, h.internal = !1), a = this == h.InertiaMode_FIXED ? "FIXED" : ""); return a }, __class__: kk };
    var Ae = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.phys.InteractorIterator"] = Ae;
    Ae.__name__ = ["nape", "phys",
        "InteractorIterator"
    ];
    Ae.get = function(a) { var b;
        null == Ae.zpp_pool ? (sh.internal = !0, b = new Ae, sh.internal = !1) : (b = Ae.zpp_pool, Ae.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    Ae.prototype = { hasNext: function() { this.zpp_inner.zpp_inner.valmod(); var a = this.zpp_inner.get_length();
            this.zpp_critical = !0; if (this.zpp_i < a) return !0;
            this.zpp_next = Ae.zpp_pool;
            Ae.zpp_pool = this;
            this.zpp_inner = null; return !1 }, next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) }, __class__: Ae };
    var Qn = function() { this.zpp_inner = null };
    g["nape.phys.InteractorList"] = Qn;
    Qn.__name__ = ["nape", "phys", "InteractorList"];
    Qn.prototype = {
        get_length: function() { this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length); return this.zpp_inner.user_length },
        at: function(a) {
            this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
            if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index =
                a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
            return this.zpp_inner.at_ite.elt.outer_i
        },
        toString: function() { var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod(); for (c = Ae.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 } return a + "]" },
        __class__: Qn,
        __properties__: { get_length: "get_length" }
    };
    var lk = function() {};
    g["nape.phys.MassMode"] = lk;
    lk.__name__ = ["nape", "phys", "MassMode"];
    lk.prototype = { toString: function() { var a;
            null == h.MassMode_DEFAULT && (h.internal = !0, h.MassMode_DEFAULT = new lk, h.internal = !1);
            this == h.MassMode_DEFAULT ? a = "DEFAULT" : (null == h.MassMode_FIXED && (h.internal = !0, h.MassMode_FIXED = new lk, h.internal = !1), a = this == h.MassMode_FIXED ? "FIXED" : ""); return a }, __class__: lk };
    var He = function() { this.zpp_inner_i = this.zpp_inner = null };
    g["nape.shape.Shape"] = He;
    He.__name__ = ["nape", "shape", "Shape"];
    He.__super__ = gc;
    He.prototype =
        k(gc.prototype, {
            get_body: function() { return null != this.zpp_inner.body ? this.zpp_inner.body.outer : null },
            set_localCOM: function(a) {
                this.zpp_inner.immutable_midstep("Body::localCOM");
                null == this.zpp_inner.wrap_localCOM && (this.zpp_inner.type == h.id_ShapeType_CIRCLE ? this.zpp_inner.circle.setupLocalCOM() : this.zpp_inner.polygon.setupLocalCOM());
                this.zpp_inner.wrap_localCOM.set(a);
                null == this.zpp_inner.wrap_localCOM && (this.zpp_inner.type == h.id_ShapeType_CIRCLE ? this.zpp_inner.circle.setupLocalCOM() : this.zpp_inner.polygon.setupLocalCOM());
                return this.zpp_inner.wrap_localCOM
            },
            set_filter: function(a) { this.zpp_inner.immutable_midstep("Shape::filter");
                this.zpp_inner.setFilter(a.zpp_inner); return this.zpp_inner.filter.wrapper() },
            set_fluidProperties: function(a) { this.zpp_inner.setFluid(a.zpp_inner);
                this.zpp_inner.immutable_midstep("Shape::fluidProperties");
                null == this.zpp_inner.fluidProperties && this.zpp_inner.setFluid((new Ff).zpp_inner); return this.zpp_inner.fluidProperties.wrapper() },
            set_sensorEnabled: function(a) {
                this.zpp_inner.immutable_midstep("Shape::sensorEnabled");
                this.zpp_inner.sensorEnabled = a;
                this.zpp_inner.wake();
                return this.zpp_inner.sensorEnabled
            },
            rotate: function(a) { this.zpp_inner.immutable_midstep("Shape::rotate()"); if (0 != a % (2 * Math.PI)) { var b = Math.cos(a),
                        a = Math.sin(a);
                    this.zpp_inner.type == h.id_ShapeType_CIRCLE ? this.zpp_inner.circle.__rotate(a, b) : this.zpp_inner.polygon.__rotate(a, b) } return this },
            toString: function() { return (this.zpp_inner.type == h.id_ShapeType_CIRCLE ? "Circle" : "Polygon") + "#" + this.zpp_inner_i.id },
            __class__: He,
            __properties__: k(gc.prototype.__properties__, { set_sensorEnabled: "set_sensorEnabled", set_fluidProperties: "set_fluidProperties", set_filter: "set_filter", set_localCOM: "set_localCOM", get_body: "get_body" })
        });
    var nk = function(a, b, c, d) {
        this.zpp_inner_zn = null;
        He.call(this);
        this.zpp_inner_zn = new mk;
        this.zpp_inner_zn.outer = this;
        this.zpp_inner_zn.outer_zn = this;
        this.zpp_inner_i = this.zpp_inner = this.zpp_inner_zn;
        this.zpp_inner_i.outer_i = this;
        this.zpp_inner.immutable_midstep("Circle::radius");
        a != this.zpp_inner_zn.radius && (this.zpp_inner_zn.radius = a, this.zpp_inner_zn.invalidate_radius());
        this.zpp_inner_zn.radius;
        null == b ? (this.zpp_inner.localCOMx = 0, this.zpp_inner.localCOMy = 0) : (b.zpp_inner.validate(), this.zpp_inner.localCOMx = b.zpp_inner.x, b.zpp_inner.validate(), this.zpp_inner.localCOMy = b.zpp_inner.y, b.zpp_inner.weak ? (b.dispose(), !0) : !1);
        null == c ? (null == xa.zpp_pool ? this.zpp_inner.material = new xa : (this.zpp_inner.material = xa.zpp_pool, xa.zpp_pool = this.zpp_inner.material.next, this.zpp_inner.material.next = null), null) : (this.zpp_inner.immutable_midstep("Shape::material"), this.zpp_inner.setMaterial(c.zpp_inner),
            this.zpp_inner.material.wrapper());
        null == d ? (null == uc.zpp_pool ? this.zpp_inner.filter = new uc : (this.zpp_inner.filter = uc.zpp_pool, uc.zpp_pool = this.zpp_inner.filter.next, this.zpp_inner.filter.next = null), null) : (this.zpp_inner.immutable_midstep("Shape::filter"), this.zpp_inner.setFilter(d.zpp_inner), this.zpp_inner.filter.wrapper());
        this.zpp_inner_i.insert_cbtype(Hc.ANY_SHAPE.zpp_inner)
    };
    g["nape.shape.Circle"] = nk;
    nk.__name__ = ["nape", "shape", "Circle"];
    nk.__super__ = He;
    nk.prototype = k(He.prototype, { __class__: nk });
    var Qm = function() { this.zpp_inner = null };
    g["nape.shape.Edge"] = Qm;
    Qm.__name__ = ["nape", "shape", "Edge"];
    Qm.prototype = {
        toString: function() {
            if (null == this.zpp_inner.polygon) return "Edge(object-pooled)";
            if (null == this.zpp_inner.polygon.body) return this.zpp_inner.polygon.validate_laxi(), "{ localNormal : " + ("{ x: " + this.zpp_inner.lnormx + " y: " + this.zpp_inner.lnormy + " }") + " }";
            this.zpp_inner.polygon.validate_gaxi();
            return "{ localNormal : " + ("{ x: " + this.zpp_inner.lnormx + " y: " + this.zpp_inner.lnormy + " }") + " worldNormal : " +
                ("{ x: " + this.zpp_inner.gnormx + " y: " + this.zpp_inner.gnormy + " }") + " }"
        },
        __class__: Qm
    };
    var Sb = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.shape.EdgeIterator"] = Sb;
    Sb.__name__ = ["nape", "shape", "EdgeIterator"];
    Sb.get = function(a) { var b;
        null == Sb.zpp_pool ? (th.internal = !0, b = new Sb, th.internal = !1) : (b = Sb.zpp_pool, Sb.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    Sb.prototype = {
        hasNext: function() {
            this.zpp_inner.zpp_inner.valmod();
            var a =
                this.zpp_inner.get_length();
            this.zpp_critical = !0;
            if (this.zpp_i < a) return !0;
            this.zpp_next = Sb.zpp_pool;
            Sb.zpp_pool = this;
            this.zpp_inner = null;
            return !1
        },
        next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) },
        __class__: Sb
    };
    var Rn = function() { this.zpp_inner = null };
    g["nape.shape.EdgeList"] = Rn;
    Rn.__name__ = ["nape", "shape", "EdgeList"];
    Rn.prototype = {
        get_length: function() {
            this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length);
            return this.zpp_inner.user_length
        },
        at: function(a) { this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && a != this.get_length() - 1 && (a = this.get_length() - 2 - a); if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; return this.zpp_inner.at_ite.elt.wrapper() },
        toString: function() {
            var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod();
            for (c = Sb.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 }
            return a + "]"
        },
        __class__: Rn,
        __properties__: { get_length: "get_length" }
    };
    var Qb = function(a, b, c) {
        this.zpp_inner_zn = null;
        He.call(this);
        this.zpp_inner_zn = new ok;
        this.zpp_inner_zn.outer = this;
        this.zpp_inner_zn.outer_zn = this;
        this.zpp_inner_i = this.zpp_inner = this.zpp_inner_zn;
        this.zpp_inner_i.outer_i = this;
        if (a instanceof Array && null == a.__enum__)
            for (var d = 0; d < a.length;) {
                var e =
                    a[d];
                ++d;
                var f = e;
                null == this.zpp_inner_zn.wrap_lverts && this.zpp_inner_zn.getlverts();
                this.zpp_inner_zn.wrap_lverts.push(aa.get(function() { f.zpp_inner.validate(); return f.zpp_inner.x }(this), function() { f.zpp_inner.validate(); return f.zpp_inner.y }(this), !1))
            } else if (I.__instanceof(a, Ef))
                for (d = a.iterator(); d.hasNext();) {
                    var l;
                    d.zpp_critical = !1;
                    l = d.zpp_inner.at(d.zpp_i++);
                    null == this.zpp_inner_zn.wrap_lverts && this.zpp_inner_zn.getlverts();
                    this.zpp_inner_zn.wrap_lverts.push(aa.get(function() {
                        l.zpp_inner.validate();
                        return l.zpp_inner.x
                    }(this), function() { l.zpp_inner.validate(); return l.zpp_inner.y }(this), !1))
                } else if (I.__instanceof(a, Jm) && (d = a.zpp_inner.vertices, null != d)) { e = d;
                    do { var h = aa.get(e.x, e.y, null),
                            e = e.next;
                        null == this.zpp_inner_zn.wrap_lverts && this.zpp_inner_zn.getlverts();
                        this.zpp_inner_zn.wrap_lverts.push(aa.get(function() { h.zpp_inner.validate(); return h.zpp_inner.x }(this), function() { h.zpp_inner.validate(); return h.zpp_inner.y }(this), !1));
                        h.dispose() } while (e != d) } if (a instanceof Array && null == a.__enum__)
            for (d =
                0; d < a.length;) { var e = a[d],
                    g; if (g = e.zpp_inner.weak) e.dispose(), g = !0;
                g ? a.splice(d, 1) : d++ } else if (I.__instanceof(a, Ef)) { null != a.zpp_inner._validate && a.zpp_inner._validate();
                a = a.zpp_inner.inner;
                d = null; for (e = a.head; null != e;) g = e.elt, g.outer.zpp_inner.weak ? (e = a.erase(d), g.outer.zpp_inner.weak ? (g.outer.dispose(), !0) : !1) : (d = e, e = e.next) } null == b ? (null == xa.zpp_pool ? this.zpp_inner.material = new xa : (this.zpp_inner.material = xa.zpp_pool, xa.zpp_pool = this.zpp_inner.material.next, this.zpp_inner.material.next = null), null) :
            (this.zpp_inner.immutable_midstep("Shape::material"), this.zpp_inner.setMaterial(b.zpp_inner), this.zpp_inner.material.wrapper());
        null == c ? (null == uc.zpp_pool ? this.zpp_inner.filter = new uc : (this.zpp_inner.filter = uc.zpp_pool, uc.zpp_pool = this.zpp_inner.filter.next, this.zpp_inner.filter.next = null), null) : (this.zpp_inner.immutable_midstep("Shape::filter"), this.zpp_inner.setFilter(c.zpp_inner), this.zpp_inner.filter.wrapper());
        this.zpp_inner_i.insert_cbtype(Hc.ANY_SHAPE.zpp_inner)
    };
    g["nape.shape.Polygon"] = Qb;
    Qb.__name__ = ["nape", "shape", "Polygon"];
    Qb.rect = function(a, b, c, d, e) { null == e && (e = !1); return [aa.get(a, b, e), aa.get(a + c, b, e), aa.get(a + c, b + d, e), aa.get(a, b + d, e)] };
    Qb.box = function(a, b, c) { null == c && (c = !1); return Qb.rect(-a / 2, -b / 2, a, b, c) };
    Qb.regular = function(a, b, c, d, e) { null == e && (e = !1);
        null == d && (d = 0); for (var f = [], l = 2 * Math.PI / c, h = 0; h < c;) { var g = h++ * l + d,
                g = aa.get(Math.cos(g) * a, Math.sin(g) * b, e);
            f.push(g) } return f };
    Qb.__super__ = He;
    Qb.prototype = k(He.prototype, { __class__: Qb });
    var Tb = function() {
        this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null
    };
    g["nape.shape.ShapeIterator"] = Tb;
    Tb.__name__ = ["nape", "shape", "ShapeIterator"];
    Tb.get = function(a) { var b;
        null == Tb.zpp_pool ? (df.internal = !0, b = new Tb, df.internal = !1) : (b = Tb.zpp_pool, Tb.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    Tb.prototype = {
        hasNext: function() { this.zpp_inner.zpp_inner.valmod(); var a = this.zpp_inner.get_length();
            this.zpp_critical = !0; if (this.zpp_i < a) return !0;
            this.zpp_next = Tb.zpp_pool;
            Tb.zpp_pool = this;
            this.zpp_inner = null; return !1 },
        next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) },
        __class__: Tb
    };
    var Rm = function() { this.zpp_inner = null;
        this.zpp_inner = new df;
        this.zpp_inner.outer = this };
    g["nape.shape.ShapeList"] = Rm;
    Rm.__name__ = ["nape", "shape", "ShapeList"];
    Rm.prototype = {
        get_length: function() { this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length); return this.zpp_inner.user_length },
        at: function(a) {
            this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag &&
                (a = this.get_length() - 1 - a);
            if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
            return this.zpp_inner.at_ite.elt.outer
        },
        push: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? this.zpp_inner.inner.add(a.zpp_inner) :
                (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        unshift: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ?
                (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)) : this.zpp_inner.inner.add(a.zpp_inner), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        pop: function() {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var a = null;
            if (this.zpp_inner.reverse_flag) {
                var a = this.zpp_inner.inner.head.elt,
                    b = a.outer;
                null != this.zpp_inner.subber && this.zpp_inner.subber(b);
                this.zpp_inner.dontremove || this.zpp_inner.inner.pop()
            } else { null != this.zpp_inner.at_ite && null == this.zpp_inner.at_ite.next && (this.zpp_inner.at_ite = null); var b = 1 == this.get_length() ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 2),
                    a = null == b ? this.zpp_inner.inner.head.elt : b.next.elt,
                    c = a.outer;
                null != this.zpp_inner.subber && this.zpp_inner.subber(c);
                this.zpp_inner.dontremove || this.zpp_inner.inner.erase(b) } this.zpp_inner.invalidate();
            return a.outer
        },
        shift: function() {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var a = null;
            if (this.zpp_inner.reverse_flag) { null != this.zpp_inner.at_ite && null == this.zpp_inner.at_ite.next && (this.zpp_inner.at_ite = null); var b;
                b = 1 == this.get_length() ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 2); var a = null == b ? this.zpp_inner.inner.head.elt : b.next.elt,
                    c = a.outer;
                null != this.zpp_inner.subber && this.zpp_inner.subber(c);
                this.zpp_inner.dontremove || this.zpp_inner.inner.erase(b) } else a = this.zpp_inner.inner.head.elt,
                b = a.outer, null != this.zpp_inner.subber && this.zpp_inner.subber(b), this.zpp_inner.dontremove || this.zpp_inner.inner.pop();
            this.zpp_inner.invalidate();
            return a.outer
        },
        add: function(a) { return this.zpp_inner.reverse_flag ? this.push(a) : this.unshift(a) },
        remove: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            b = !1;
            for (var c = this.zpp_inner.inner.head; null != c;) { if (c.elt == a.zpp_inner) { b = !0; break } c = c.next } b && (null != this.zpp_inner.subber && this.zpp_inner.subber(a), this.zpp_inner.dontremove || this.zpp_inner.inner.remove(a.zpp_inner),
                this.zpp_inner.invalidate());
            return b
        },
        clear: function() { if (this.zpp_inner.reverse_flag)
                for (; null != this.zpp_inner.inner.head;) this.pop();
            else
                for (; null != this.zpp_inner.inner.head;) this.shift() },
        empty: function() { return null == this.zpp_inner.inner.head },
        toString: function() { var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod(); for (c = Tb.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 } return a + "]" },
        __class__: Rm,
        __properties__: { get_length: "get_length" }
    };
    var pk = function() {};
    g["nape.shape.ShapeType"] = pk;
    pk.__name__ = ["nape", "shape", "ShapeType"];
    pk.prototype = { toString: function() { var a;
            null == h.ShapeType_CIRCLE && (h.internal = !0, h.ShapeType_CIRCLE = new pk, h.internal = !1);
            this == h.ShapeType_CIRCLE ? a = "CIRCLE" : (null == h.ShapeType_POLYGON && (h.internal = !0, h.ShapeType_POLYGON = new pk, h.internal = !1), a = this == h.ShapeType_POLYGON ? "POLYGON" : ""); return a }, __class__: pk };
    var rg = function() {};
    g["nape.shape.ValidationResult"] = rg;
    rg.__name__ = ["nape", "shape", "ValidationResult"];
    rg.prototype = {
        toString: function() {
            var a;
            null == h.ValidationResult_VALID && (h.internal = !0, h.ValidationResult_VALID = new rg, h.internal = !1);
            this == h.ValidationResult_VALID ? a = "VALID" : (null == h.ValidationResult_DEGENERATE && (h.internal = !0, h.ValidationResult_DEGENERATE = new rg, h.internal = !1), this == h.ValidationResult_DEGENERATE ? a = "DEGENERATE" : (null == h.ValidationResult_CONCAVE && (h.internal = !0, h.ValidationResult_CONCAVE = new rg, h.internal = !1), this == h.ValidationResult_CONCAVE ? a = "CONCAVE" : (null == h.ValidationResult_SELF_INTERSECTING &&
                (h.internal = !0, h.ValidationResult_SELF_INTERSECTING = new rg, h.internal = !1), a = this == h.ValidationResult_SELF_INTERSECTING ? "SELF_INTERSECTING" : "")));
            return a
        },
        __class__: rg
    };
    var sg = function() {};
    g["nape.space.Broadphase"] = sg;
    sg.__name__ = ["nape", "space", "Broadphase"];
    sg.prototype = {
        toString: function() {
            var a;
            null == h.Broadphase_DYNAMIC_AABB_TREE && (h.internal = !0, h.Broadphase_DYNAMIC_AABB_TREE = new sg, h.internal = !1);
            this == h.Broadphase_DYNAMIC_AABB_TREE ? a = "DYNAMIC_AABB_TREE" : (null == h.Broadphase_SWEEP_AND_PRUNE &&
                (h.internal = !0, h.Broadphase_SWEEP_AND_PRUNE = new sg, h.internal = !1), a = this == h.Broadphase_SWEEP_AND_PRUNE ? "SWEEP_AND_PRUNE" : "");
            return a
        },
        __class__: sg
    };
    var vm = function(a, b) { this.zpp_inner = null;
        this.zpp_inner = new Sm(null == a ? null : a.zpp_inner, b);
        this.zpp_inner.outer = this;
        null != a && (a.zpp_inner.weak ? (a.dispose(), !0) : !1) };
    g["nape.space.Space"] = vm;
    vm.__name__ = ["nape", "space", "Space"];
    vm.prototype = {
        get_gravity: function() { null == this.zpp_inner.wrap_gravity && this.zpp_inner.getgravity(); return this.zpp_inner.wrap_gravity },
        set_gravity: function(a) { null == this.zpp_inner.wrap_gravity && this.zpp_inner.getgravity();
            this.zpp_inner.wrap_gravity.set(a);
            null == this.zpp_inner.wrap_gravity && this.zpp_inner.getgravity(); return this.zpp_inner.wrap_gravity },
        clear: function() { this.zpp_inner.clear() },
        step: function(a, b, c) { null == c && (c = 10);
            null == b && (b = 10);
            this.zpp_inner.step(a, b, c) },
        rayMultiCast: function(a, b, c, d) { null == b && (b = !1); return this.zpp_inner.rayMultiCast(a, b, c, d) },
        __class__: vm,
        __properties__: { set_gravity: "set_gravity", get_gravity: "get_gravity" }
    };
    var Oa = function(a, b) { null == b && (b = !0);
        null == a && (a = !1);
        i.call(this);
        Ja.init();
        dd.setupBaseURL();
        E.onManifestInit.connect(Oa.onManifestInit);
        x.root.add(new zi);
        a && (b ? x.root.add(new La(o.gameWidth, o.gameHeight)) : (Oa.autoScaleEnabled = !0, x.root.add(new r), x.root.add(new kb))) };
    g["nick.NickUtils"] = Oa;
    Oa.__name__ = ["nick", "NickUtils"];
    Oa.configure = function(a) {
        if (null == a.nick) throw "No nick section found in config.json";
        if (null == a.nick.url) throw "nick.url not set in config.json";
        if (null != a.nick.url && -1 < a.nick.url.indexOf("GAME_PAGE.html")) throw "nick.url requires actual game url (should not be GAME_PAGE)";
        a = sa;
        if ("" == a.REDIRECT_URL || null == a.REDIRECT_URL) throw "Please call AntiPiracy.checkPiracy(GameData.config.nick.url) before NickUtils.configure!";
        if (null != a.DOMAIN_LIST)
            for (var b = 0, c = Oa.staging; b < c.length;) { var d = c[b];++b;
                a.DOMAIN_LIST.push(d) } Oa.setupSdkListeners()
    };
    Oa.onManifestInit = function(a, b) { dd.setupManifest(b) };
    Oa.initDeltaDNA = function(a, b) {
        var c = a.delta_dna;
        w.allowLiveKey = !0 == c.allowLiveKey;
        w.staging = Oa.staging;
        var d = a.nick.url;
        null != a.version && (w.clientVersion = a.version);
        null != c.platforms &&
            w.setPlatforms(c.platforms);
        w.onReady.connect(b).once();
        w.init(d, c.key_dev, c.key_live, c.collect, c.engage)
    };
    Oa.setupSdkListeners = function() { ra.onAudioToggle = Oa.onAudioToggle;
        ra.onPlaybackToggle = Oa.onPlaybackToggle };
    Oa.onAudioToggle = function(a) { Oa.onMute.emit(a) };
    Oa.onPlaybackToggle = function(a) { a ? Oa.onResume.emit() : Oa.onPause.emit() };
    Oa.__super__ = i;
    Oa.prototype = k(i.prototype, { get_name: function() { return "NickUtils_0" }, onUpdate: function() { Oa.autoScaleEnabled && o.setScale(kb.SCALE) }, __class__: Oa });
    var sa =
        function() {};
 
    sa.__name__ = ["nicksdk", "AntiPiracy"];
    sa.checkPiracy = function(a) {
        null == a && (a = "");
        var b;
        b = ng.decode("").toString();
        sa.REDIRECT_URL = a;
        "" == sa.REDIRECT_URL && (sa.REDIRECT_URL = "");
        od.sendGameEvent("Check AntiPiracy : ", sa.REDIRECT_URL);
        bc.eval("eval", ["window.getDomains = function(data) {eval('list=data.domains');}"]);
        bc.eval("eval", ["window.getList = function() {return list;}"]);
        sa.eval("var script = document.createElement('script');script.src = \"" + b + '",document.body.insertBefore(script, document.body.firstChild);');
        Ce.delay(function() { for (var a = null, a = bc.eval("getList"), a = I.__cast(a, Array), b = 0; b < a.length;) { var e = a[b];++b;
                sa.DOMAIN_LIST.push(e) } sa.startCheck() }, sa.GET_DOMAINS_DELAY)
    };
    sa.startCheck = function() {
        sa.debug("startCheck()");
        var a = "",
            b = a = "",
            c = !1,
            d = !0,
            a = window.location.host;
        try { b = window.parent.location.host } catch (e) { c = !0 } b != a && (c = !0);
        sa.debug("childURL : " + a);
        sa.debug("parentURL : " +
            b);
        sa.debug("isiFrameCrossDomain : " + (null == c ? "null" : "" + c));
        if (c) d = !0;
        else { b = 0; for (c = sa.DOMAIN_LIST; b < c.length;) { var f = c[b];++b; if ((new Uc(f, "i")).match(a)) { d = !1; break } } } d ? (sa.debug("redirect"), Ce.delay(sa.redirect, sa.REDIRECT_DELAY)) : sa.debug("do not redirect")
    };
    sa.redirect = function() { window.top.location.replace(sa.REDIRECT_URL) };
    sa.eval = function(a) { bc.eval("eval", ["void (function() {" + a + "}())"]) };
    sa.debug = function() {};
    var bc = function() {
        this.isDirty = !1;
        this.eventQueue = new ce;
        this.debugMode = !1;
        this.modules = [];
        this.gameObj = { majorversion: 1, minorversion: 0.4, apiversion: 1 };
        ra.init(this);
        od.init(this);
        this.initializeBridge()
    };
    g["nicksdk.SDK"] = bc;
    bc.__name__ = ["nicksdk", "SDK"];
    bc.eval = function(a, b) { null == b && (b = []); for (var c = null, d = null, e = 0, f = a.split("."); e < f.length;) { var l = f[e];++e;
            c = d;
            d = null == c ? z.field(window, l) : z.field(c, l) } return d.apply(c, b) };
    bc.prototype = {
        onException: function(a) {
            try { this.queueEvent("error", { msg: a, callstack: cd.toString(cd.callStack()), exceptionstack: cd.toString(cd.exceptionStack()) }) } catch (b) {
                this.queueEvent("error", { msg: a })
            }
        },
        initializeBridge: function() { try { this.queueEvent("init", { js: ra.executeWebRequest }) } catch (a) { null } },
        setDebugMode: function(a) {
            (this.debugMode = a) ? this.gameObj.debugmode = !0: z.deleteField(this.gameObj, "debugmode");
            this.isDirty = !0; for (var b = 0, c = this.modules; b < c.length;) { var d = c[b];++b;
                d.setDebugMode(a) } },
        queueEvent: function(a, b) { b.eventName = a;
            z.setField(b, "timestamp", (new Date).getTime());
            this.eventQueue.add(b);
            this.flush_events();
            this.sync_state() },
        onUpdate: function(a) {
            var b = this.isDirty;
            this.isDirty = !1;
            for (var c = 0, d = this.modules; c < d.length;) { var e = d[c];++c;
                b = b || e.update(a) } 0 < this.eventQueue.length && (b = !0, this.flush_events());
            b && this.sync_state()
        },
        flush_events: function() { for (; 0 < this.eventQueue.length;) bc.output_event_array.push(this.eventQueue.pop()) },
        sync_state: function() { try { bc.eval("nsdk_expose", [this.gameObj, bc.output_event_array]), bc.output_event_array.length = 0 } catch (a) { null } },
        log: function(a, b) { this.debugMode && this.queueEvent("log", { id: a, msg: b }) },
        __class__: bc
    };
    var Sn = function() {};
    g["nicksdk.SDKModule"] =
        Sn;
    Sn.__name__ = ["nicksdk", "SDKModule"];
    Sn.prototype = { __class__: Sn };
    var od = function() {};
    g["nicksdk.event.GameEventEmitter"] = od;
    od.__name__ = ["nicksdk", "event", "GameEventEmitter"];
    od.init = function(a) { od.sdk = a };
    od.sendGameEvent = function(a, b) { od.callExternal(a, b) };
    od.callExternal = function(a, b) { if (null != od.sdk) od.sdk.queueEvent(a, { params: b });
        else throw "SDK not initialized!"; };
    var ra = function() {};
    g["nicksdk.event.GameEventListener"] = ra;
    ra.__name__ = ["nicksdk", "event", "GameEventListener"];
    ra.init = function(a) {
        ra.sdk =
            a
    };
    ra.executeWebRequest = function(a) {
        ra.AssertType(a, P.TObject);
        if (null == a.name) return !1;
        switch (a.name) {
            case "toggleaudio":
                ra.AssertParameter(a, "enable", P.TBool);
                if (null != ra.onAudioToggle) return ra.onAudioToggle(a.enable), !0;
                ra.sdk.log("SDKGameEventListener", "Audio Toggle is not implemented.");
                break;
            case "toggleplayback":
                ra.AssertParameter(a, "enable", P.TBool);
                if (null != ra.onPlaybackToggle) return ra.onPlaybackToggle(a.enable), !0;
                ra.sdk.log("SDKGameEventListener", "Playback Toggle is not implemented.");
                break;
            case "togglesuspend":
                ra.AssertParameter(a, "enable", P.TBool);
                if (null != ra.onSuspendToggle) ra.onSuspendToggle(a.enable);
                else ra.sdk.log("SDKGameEventListener", "Suspend Toggle is not implemented.");
                break;
            case "toggledebug":
                ra.AssertParameter(a, "enable", P.TBool);
                if (null != ra.onDebugModeToggle) ra.onDebugModeToggle(a.enable);
                else ra.sdk.log("SDKGameEventListener", "Debug Mode Toggle is not implemented.");
                if (null != ra.sdk) return ra.sdk.setDebugMode(a.enable), !0;
                break;
            default:
                ra.sdk.log("SDKGameEventListener",
                    "Unknown function")
        }
        return !1
    };
    ra.AssertType = function(a, b) { var c = ia["typeof"](a); if (c != b) throw c = "TypeCheck: Object {" + y.string(a) + "} was of type {" + y.string(c) + "}. Expected type {" + y.string(b) + "}", null != ra.sdk && ra.sdk.log("SDKGameEventListener", c), c; };
    ra.AssertParameter = function(a, b, c) {
        if (Object.prototype.hasOwnProperty.call(a, b)) a = z.field(a, b), ra.AssertType(a, c);
        else throw c = "ParameterCheck: Parameter {" + b + "} of type{" + y.string(c) + "} does not exist!", null != ra.sdk && ra.sdk.log("SDKGameEventListener",
            c), c;
    };
    var fd = function() {};
    g["spinehaxe.ArrayUtils"] = fd;
    fd.__name__ = ["spinehaxe", "ArrayUtils"];
    fd.allocFloat = function(a) { var b;
        b = Array(a); for (var c = 0; c < a;) { var d = c++;
            b[d] = 0 } return b };
    var Gf = function(a, b, c) {
        this.flipX = this.flipY = !1;
        this.x = this.y = this.rotation = this.rotationIK = this.scaleX = this.scaleY = 0;
        this.worldFlipX = this.worldFlipY = !1;
        this.m00 = this.m01 = this.m10 = this.m11 = this.worldX = this.worldY = this.worldRotation = this.worldScaleX = this.worldScaleY = 0;
        if (null == a) throw new ka("data cannot be null.");
        if (null ==
            b) throw new ka("skeleton cannot be null.");
        this.data = a;
        this.skeleton = b;
        this.parent = c;
        this.setToSetupPose()
    };
    g["spinehaxe.Bone"] = Gf;
    Gf.__name__ = ["spinehaxe", "Bone"];
    Gf.prototype = {
        updateWorldTransform: function() {
            if (null != this.parent) this.worldX = this.x * this.parent.m00 + this.y * this.parent.m01 + this.parent.worldX, this.worldY = this.x * this.parent.m10 + this.y * this.parent.m11 + this.parent.worldY, this.data.inheritScale ? (this.worldScaleX = this.parent.worldScaleX * this.scaleX, this.worldScaleY = this.parent.worldScaleY *
                this.scaleY) : (this.worldScaleX = this.scaleX, this.worldScaleY = this.scaleY), this.worldRotation = this.data.inheritRotation ? this.parent.worldRotation + this.rotationIK : this.rotationIK, this.worldFlipX = this.parent.worldFlipX != this.flipX, this.worldFlipY = this.parent.worldFlipY != this.flipY;
            else {
                var a = this.skeleton.flipX,
                    b = this.skeleton.flipY;
                this.worldX = a ? -this.x : this.x;
                this.worldY = b != Gf.yDown ? -this.y : this.y;
                this.worldScaleX = this.scaleX;
                this.worldScaleY = this.scaleY;
                this.worldRotation = this.rotationIK;
                this.worldFlipX =
                    a != this.flipX;
                this.worldFlipY = b != this.flipY
            }
            b = this.worldRotation * (Math.PI / 180);
            a = Math.cos(b);
            b = Math.sin(b);
            this.worldFlipX ? (this.m00 = -a * this.worldScaleX, this.m01 = b * this.worldScaleY) : (this.m00 = a * this.worldScaleX, this.m01 = -b * this.worldScaleY);
            this.worldFlipY != Gf.yDown ? (this.m10 = -b * this.worldScaleX, this.m11 = -a * this.worldScaleY) : (this.m10 = b * this.worldScaleX, this.m11 = a * this.worldScaleY)
        },
        setToSetupPose: function() {
            this.x = this.data.x;
            this.y = this.data.y;
            this.rotationIK = this.rotation = this.data.rotation;
            this.scaleX =
                this.data.scaleX;
            this.scaleY = this.data.scaleY;
            this.flipX = this.data.flipX;
            this.flipY = this.data.flipY
        },
        worldToLocal: function(a) { var b = a[0] - this.worldX,
                c = a[1] - this.worldY,
                d = this.m00,
                e = this.m10,
                f = this.m01,
                l = this.m11;
            this.worldFlipX != (this.worldFlipY != Gf.yDown) && (d = -d, l = -l); var h = 1 / (d * l - f * e);
            a[0] = b * d * h - c * f * h;
            a[1] = c * l * h - b * e * h },
        localToWorld: function(a) { var b = a[0],
                c = a[1];
            a[0] = b * this.m00 + c * this.m01 + this.worldX;
            a[1] = b * this.m10 + c * this.m11 + this.worldY },
        __class__: Gf
    };
    var Tm = function(a, b) {
        this.inheritScale = this.inheritRotation =
            this.flipX = this.flipY = !1;
        this.scaleX = this.scaleY = 1;
        this.length = this.x = this.y = this.rotation = 0;
        this.scaleY = this.scaleX = 1;
        this.inheritRotation = this.inheritScale = !0;
        if (null == a) throw new ka("name cannot be null.");
        this.name = a;
        this.parent = b
    };
    g["spinehaxe.BoneData"] = Tm;
    Tm.__name__ = ["spinehaxe", "BoneData"];
    Tm.prototype = { __class__: Tm };
    var Um = function(a) { if (null == a) throw new ka("data cannot be null.");
        this.data = a };
    g["spinehaxe.Event"] = Um;
    Um.__name__ = ["spinehaxe", "Event"];
    Um.prototype = { __class__: Um };
    var Vm =
        function(a) { if (null == a) throw new ka("name cannot be null.");
            this.name = a };
    g["spinehaxe.EventData"] = Vm;
    Vm.__name__ = ["spinehaxe", "EventData"];
    Vm.prototype = { __class__: Vm };
    var ka = function(a) { this.msg = a };
    g["spinehaxe.Exception"] = ka;
    ka.__name__ = ["spinehaxe", "Exception"];
    ka.prototype = { toString: function() { return this.msg }, __class__: ka };
    var lb = function(a, b) {
        this.bendDirection = this.mix = 0;
        if (null == a) throw new ka("data cannot be null.");
        if (null == b) throw new ka("skeleton cannot be null.");
        this.data = a;
        this.mix =
            a.mix;
        this.bendDirection = a.bendDirection;
        this.bones = [];
        for (var c = 0, d = a.bones; c < d.length;) { var e = d[c];++c;
            this.bones[this.bones.length] = b.findBone(e.name) } this.target = b.findBone(a.target.name)
    };
    g["spinehaxe.IkConstraint"] = lb;
    lb.__name__ = ["spinehaxe", "IkConstraint"];
    lb.apply1 = function(a, b, c, d) { var e;
        e = !a.data.inheritRotation || null == a.parent ? 0 : a.parent.worldRotation; var f = a.rotation,
            b = Math.atan2(c - a.worldY, b - a.worldX) * lb.radDeg - e;
        a.rotationIK = f + (b - f) * d };
    lb.apply2 = function(a, b, c, d, e, f) {
        var l = b.rotation,
            h = a.rotation;
        if (0 == f) b.rotationIK = l, a.rotationIK = h;
        else {
            var g, i;
            i = a.parent;
            null != i ? (lb.tempPosition[0] = c, lb.tempPosition[1] = d, i.worldToLocal(lb.tempPosition), c = (lb.tempPosition[0] - a.x) * i.worldScaleX, d = (lb.tempPosition[1] - a.y) * i.worldScaleY) : (c -= a.x, d -= a.y);
            b.parent == a ? (g = b.x, i = b.y) : (lb.tempPosition[0] = b.x, lb.tempPosition[1] = b.y, b.parent.localToWorld(lb.tempPosition), a.worldToLocal(lb.tempPosition), g = lb.tempPosition[0], i = lb.tempPosition[1]);
            g *= a.worldScaleX;
            var j = i * a.worldScaleY;
            i = Math.atan2(j, g);
            j = Math.sqrt(g * g + j * j);
            g = b.data.length * b.worldScaleX;
            var k = 2 * j * g;
            1.0E-4 > k ? b.rotationIK = l + (Math.atan2(d, c) * lb.radDeg - h - l) * f : (k = (c * c + d * d - j * j - g * g) / k, -1 > k ? k = -1 : 1 < k && (k = 1), e *= Math.acos(k), j += g * k, g *= Math.sin(e), c = (Math.atan2(d * j - c * g, c * j + d * g) - i) * lb.radDeg - h, 180 < c ? c -= 360 : -180 > c && (c += 360), a.rotationIK = h + c * f, c = (e + i) * lb.radDeg - l, 180 < c ? c -= 360 : -180 > c && (c += 360), b.rotationIK = l + (c + a.worldRotation - b.parent.worldRotation) * f)
        }
    };
    lb.prototype = {
        apply: function() {
            switch (this.bones.length) {
                case 1:
                    lb.apply1(this.bones[0], this.target.worldX,
                        this.target.worldY, this.mix);
                    break;
                case 2:
                    lb.apply2(this.bones[0], this.bones[1], this.target.worldX, this.target.worldY, this.bendDirection, this.mix)
            }
        },
        __class__: lb
    };
    var Wm = function(a) { this.bendDirection = this.mix = 1;
        this.bones = []; if (null == a) throw new ka("name cannot be null.");
        this.name = a };
    g["spinehaxe.IkConstraintData"] = Wm;
    Wm.__name__ = ["spinehaxe", "IkConstraintData"];
    Wm.prototype = { __class__: Wm };
    var q = function() {};
    g["spinehaxe.JsonUtils"] = q;
    q.__name__ = ["spinehaxe", "JsonUtils"];
    q.parse = function(a) { return JSON.parse(a) };
    q.fields = function(a) { return z.fields(a) };
    q.getNode = function(a, b) { return q.getDynamic(a, b) };
    q.getDynamic = function(a, b) { return z.getProperty(a, b) };
    q.getNodesArray = function(a, b) { return I.__cast(q.getDynamic(a, b), Array) };
    q.getInt = function(a, b, c) { null == c && (c = 0);
        a = q.getDynamic(a, b); return null == a ? c : I.__cast(a, lo) };
    q.getFloat = function(a, b, c) { null == c && (c = 0);
        a = q.getDynamic(a, b); return null == a ? c : I.__cast(a, io) };
    q.getStr = function(a, b, c) { a = q.getDynamic(a, b); return null == a ? c : y.string(a) };
    q.getBool = function(a,
        b, c) { null == c && (c = !1);
        a = q.getDynamic(a, b); return null == a ? c : a };
    q.getFloatArray = function(a, b, c) { a = q.getDynamic(a, b); if (1 != c)
            for (var b = 0, d = a.length; b < d;) { var e = b++;
                a[e] *= c }
        return a };
    q.getIntArray = function(a, b) { return q.getDynamic(a, b) };
    q.hasOwnProperty = function(a, b) { return Object.prototype.hasOwnProperty.call(a, b) };
    var Ym = function(a) {
        this.flipX = this.flipY = !1;
        this.time = 0;
        this.a = 1;
        this._boneCache = [];
        if (null == a) throw new ka("data cannot be null.");
        this.data = a;
        this.bones = [];
        for (var b = 0, c = a.bones; b < c.length;) {
            var d =
                c[b];
            ++b;
            var e;
            e = null == d.parent ? null : this.bones[a.bones.indexOf(d.parent)];
            this.bones[this.bones.length] = new Gf(d, this, e)
        }
        this.slots = [];
        this.drawOrder = [];
        b = 0;
        for (c = a.slots; b < c.length;) d = c[b], ++b, e = this.bones[a.bones.indexOf(d.boneData)], d = new Xm(d, e), this.slots[this.slots.length] = d, this.drawOrder[this.drawOrder.length] = d;
        this.ikConstraints = [];
        b = 0;
        for (a = a.ikConstraints; b < a.length;) c = a[b], ++b, this.ikConstraints[this.ikConstraints.length] = new lb(c, this);
        this.updateCache()
    };
    g["spinehaxe.Skeleton"] = Ym;
    Ym.__name__ = ["spinehaxe", "Skeleton"];
    Ym.prototype = {
        updateCache: function() {
            var a = this.ikConstraints.length + 1;
            this._boneCache.length > a && this._boneCache.splice(a, this._boneCache.length - a);
            for (var b = 0, c = this._boneCache; b < c.length;) { var d = c[b];++b;
                d.splice(0, d.length) }
            for (; this._boneCache.length < a;) this._boneCache[this._boneCache.length] = [];
            a = this._boneCache[0];
            b = !1;
            c = 0;
            for (d = this.bones; c < d.length;) {
                var e = d[c];
                ++c;
                var f = e;
                do {
                    for (var l = 0, h = 0, g = this.ikConstraints; h < g.length;) {
                        var i = g[h];
                        ++h;
                        for (var j = i.bones[0],
                                i = i.bones[i.bones.length - 1]; !b;)
                            if (f == i) this._boneCache[l].push(e), this._boneCache[l + 1].push(e), b = !0;
                            else { if (i == j) break;
                                i = i.parent } if (b) break;
                        l++
                    }
                    if (b) break;
                    f = f.parent
                } while (null != f);
                b ? b = !1 : a[a.length] = e
            }
        },
        updateWorldTransform: function() { for (var a = 0, b = this.bones; a < b.length;) { var c = b[a];++a;
                c.rotationIK = c.rotation } a = 0; for (b = this._boneCache.length - 1;;) { for (var c = 0, d = this._boneCache[a]; c < d.length;) { var e = d[c];++c;
                    e.updateWorldTransform() } if (a == b) break;
                this.ikConstraints[a].apply();
                a++ } },
        setBonesToSetupPose: function() {
            for (var a =
                    0, b = this.bones; a < b.length;) { var c = b[a];++a;
                c.setToSetupPose() } a = 0;
            for (b = this.ikConstraints; a < b.length;) c = b[a], ++a, c.bendDirection = c.data.bendDirection, c.mix = c.data.mix
        },
        setSlotsToSetupPose: function(a) { null == a && (a = !0); var b = 0;
            this.drawOrder.splice(0, this.drawOrder.length); for (var c = 0, d = this.slots; c < d.length;) { var e = d[c];++c;
                this.drawOrder[b++] = e;
                e.setToSetupPose(a) } },
        findBone: function(a) {
            if (null == a) throw new ka("boneName cannot be null.");
            for (var b = 0, c = this.bones; b < c.length;) {
                var d = c[b];
                ++b;
                if (d.data.name ==
                    a) return d
            }
            return null
        },
        findSlot: function(a) { if (null == a) throw new ka("slotName cannot be null."); for (var b = 0, c = this.slots; b < c.length;) { var d = c[b];++b; if (d.data.name == a) return d } return null },
        getAttachmentForSlotIndex: function(a, b) { if (null == b) throw new ka("attachmentName cannot be null."); if (null != this.skin) { var c = this.skin.getAttachment(a, b); if (null != c) return c } return null != this.data.defaultSkin ? this.data.defaultSkin.getAttachment(a, b) : null },
        __class__: Ym
    };
    var Zm = function() {
        this.width = this.height = 0;
        this.ikConstraints = [];
        this.animations = [];
        this.events = [];
        this.skins = [];
        this.slots = [];
        this.bones = []
    };
    g["spinehaxe.SkeletonData"] = Zm;
    Zm.__name__ = ["spinehaxe", "SkeletonData"];
    Zm.prototype = {
        findBone: function(a) { if (null == a) throw new ka("boneName cannot be null."); for (var b = 0, c = this.bones; b < c.length;) { var d = c[b];++b; if (d.name == a) return d } return null },
        findBoneIndex: function(a) { if (null == a) throw new ka("boneName cannot be null."); for (var b = 0, c = this.bones.length; b < c;) { var d = b++; if (this.bones[d].name == a) return d } return -1 },
        findSlotIndex: function(a) { if (null == a) throw new ka("slotName cannot be null."); for (var b = 0, c = this.slots.length; b < c;) { var d = b++; if (this.slots[d].name == a) return d } return -1 },
        findSkin: function(a) { if (null == a) throw new ka("skinName cannot be null."); for (var b = 0, c = this.skins; b < c.length;) { var d = c[b];++b; if (d.name == a) return d } return null },
        findEvent: function(a) { if (null == a) throw new ka("eventName cannot be null."); for (var b = 0, c = this.events; b < c.length;) { var d = c[b];++b; if (d.name == a) return d } return null },
        findAnimation: function(a) {
            if (null ==
                a) throw new ka("animationName cannot be null.");
            for (var b = 0, c = this.animations; b < c.length;) { var d = c[b];++b; if (d.name == a) return d }
            return null
        },
        findIkConstraint: function(a) { if (null == a) throw new ka("ikConstraintName cannot be null."); for (var b = 0, c = this.ikConstraints; b < c.length;) { var d = c[b];++b; if (d.name == a) return d } return null },
        __class__: Zm
    };
    var Xa = function(a) { this.scale = 1;
        this.attachmentLoader = a };
    g["spinehaxe.SkeletonJson"] = Xa;
    Xa.__name__ = ["spinehaxe", "SkeletonJson"];
    Xa.readCurve = function(a, b, c) {
        c = q.getNode(c,
            "curve");
        null != c && ("string" == typeof c && "stepped" == I.__cast(c, String) ? a.setStepped(b) : c instanceof Array && null == c.__enum__ && a.setCurve(b, c[0], c[1], c[2], c[3]))
    };
    Xa.toColor = function(a, b) { if (8 != a.length) throw new ka("Color hexidecimal length must be 8, recieved: " + a); return y.parseInt("0x" + a.substring(2 * b, 2 * b + 2)) / 255 };
    Xa.prototype = {
        readSkeletonData: function(a, b) {
            if (null == a) throw new ka("object cannot be null.");
            var c = q.parse(a),
                d = new Zm;
            d.name = b;
            if (q.hasOwnProperty(c, "skeleton")) {
                var e = c.skeleton;
                d.hash =
                    q.getStr(e, "hash");
                d.version = q.getStr(e, "spine");
                d.width = q.getFloat(e, "width");
                d.height = q.getFloat(e, "height")
            }
            for (var f = 0, l = q.getNodesArray(c, "bones"); f < l.length;) {
                var h = l[f];
                ++f;
                var e = null,
                    g = q.getStr(h, "parent");
                if (null != g && (e = d.findBone(g), null == e)) throw "Parent bone not found: " + g;
                e = new Tm(h.name, e);
                e.length = q.getFloat(h, "length", 0) * this.scale;
                e.x = q.getFloat(h, "x") * this.scale;
                e.y = q.getFloat(h, "y") * this.scale;
                e.rotation = q.getFloat(h, "rotation");
                e.scaleX = q.getFloat(h, "scaleX", 1);
                e.scaleY = q.getFloat(h,
                    "scaleY", 1);
                e.flipX = q.getBool(h, "flipX", !1);
                e.flipY = q.getBool(h, "flipY", !1);
                e.inheritScale = q.getBool(h, "inheritScale", !0);
                e.inheritRotation = q.getBool(h, "inheritRotation", !0);
                d.bones[d.bones.length] = e
            }
            if (q.hasOwnProperty(c, "ik")) {
                e = 0;
                for (f = q.getNodesArray(c, "ik"); e < f.length;) {
                    l = f[e];
                    ++e;
                    for (var h = new Wm(q.getStr(l, "name")), g = 0, i = q.getNodesArray(l, "bones"); g < i.length;) { var j = i[g];++g; var k = d.findBone(j); if (null == k) throw "IK bone not found: " + y.string(j);
                        h.bones[h.bones.length] = k } h.target = d.findBone(q.getStr(l,
                        "target"));
                    if (null == h.target) throw "Target bone not found: " + q.getStr(l, "target");
                    h.bendDirection = q.getBool(l, "bendPositive", !0) ? 1 : -1;
                    h.mix = q.getFloat(l, "mix", 1);
                    d.ikConstraints[d.ikConstraints.length] = h
                }
            }
            f = 0;
            for (l = q.getNodesArray(c, "slots"); f < l.length;) {
                h = l[f];
                ++f;
                g = q.getStr(h, "bone");
                e = d.findBone(g);
                if (null == e) throw "Slot bone not found: " + g;
                e = new $m(q.getStr(h, "name"), e);
                g = q.getStr(h, "color");
                null != g && (e.r = Xa.toColor(g, 0), e.g = Xa.toColor(g, 1), e.b = Xa.toColor(g, 2), e.a = Xa.toColor(g, 3));
                e.attachmentName =
                    q.getStr(h, "attachment");
                e.additiveBlending = q.getBool(h, "additive");
                d.slots[d.slots.length] = e
            }
            e = q.getNode(c, "skins");
            f = 0;
            for (l = q.fields(e); f < l.length;) { g = l[f];++f;
                h = q.getNode(e, g);
                g = new an(g);
                i = 0; for (j = q.fields(h); i < j.length;) { var n = j[i];++i; for (var k = d.findSlotIndex(n), n = q.getNode(h, n), m = 0, o = q.fields(n); m < o.length;) { var p = o[m];++m; var r = this.readAttachment(g, p, q.getNode(n, p));
                        null != r && g.addAttachment(k, p, r) } } d.skins[d.skins.length] = g; "default" == g.name && (d.defaultSkin = g) } e = q.getNode(c, "events");
            if (null !=
                e) { f = 0; for (l = q.fields(e); f < l.length;) g = l[f], ++f, h = q.getNode(e, g), g = new Vm(g), g.intValue = q.getInt(h, "int"), g.floatValue = q.getFloat(h, "float"), g.stringValue = q.getStr(h, "string"), d.events[d.events.length] = g } c = q.getNode(c, "animations");
            e = 0;
            for (f = q.fields(c); e < f.length;) l = f[e], ++e, this.readAnimation(l, q.getNode(c, l), d);
            return d
        },
        readAttachment: function(a, b, c) {
            var b = q.getStr(c, "name", b),
                d = q.getStr(c, "type", "region"),
                e = q.getStr(c, "path", b),
                f = this.scale;
            switch (d) {
                case "region":
                    a = this.attachmentLoader.newRegionAttachment(a,
                        b, e);
                    if (null == a) break;
                    a.path = e;
                    a.x = q.getFloat(c, "x") * f;
                    a.y = q.getFloat(c, "y") * f;
                    a.scaleX = q.getFloat(c, "scaleX", 1);
                    a.scaleY = q.getFloat(c, "scaleY", 1);
                    a.rotation = q.getFloat(c, "rotation");
                    a.width = q.getFloat(c, "width") * f;
                    a.height = q.getFloat(c, "height") * f;
                    e = q.getStr(c, "color");
                    null != e && (a.r = Xa.toColor(e, 0), a.g = Xa.toColor(e, 1), a.b = Xa.toColor(e, 2), a.a = Xa.toColor(e, 3));
                    a.updateOffset();
                    return a;
                case "mesh":
                    a = this.attachmentLoader.newMeshAttachment(a, b, e);
                    if (null == a) break;
                    a.path = e;
                    a.vertices = q.getFloatArray(c,
                        "vertices", f);
                    a.triangles = q.getIntArray(c, "triangles");
                    a.regionUVs = q.getFloatArray(c, "uvs", 1);
                    a.updateUVs();
                    e = q.getStr(c, "color");
                    null != e && (a.r = Xa.toColor(e, 0), a.g = Xa.toColor(e, 1), a.b = Xa.toColor(e, 2), a.a = Xa.toColor(e, 3));
                    a.hullLength = 2 * q.getInt(c, "hull");
                    q.hasOwnProperty(c, "edges") && (a.edges = q.getIntArray(c, "edges"));
                    a.width = q.getFloat(c, "width") * f;
                    a.height = q.getFloat(c, "height") * f;
                    return a;
                case "skinnedmesh":
                    a = this.attachmentLoader.newSkinnedMeshAttachment(a, b, e);
                    if (null == a) break;
                    a.path = e;
                    for (var b =
                            q.getFloatArray(c, "uvs", 1), e = q.getFloatArray(c, "vertices", 1), d = [], l = [], h = 0, g = e.length; h < g;) { var i = y["int"](e[h++]);
                        l[l.length] = i; for (i = h + 4 * i; h < i;) l[l.length] = e[h] | 0, d[d.length] = e[h + 1] * f, d[d.length] = e[h + 2] * f, d[d.length] = e[h + 3], h += 4 } a.bones = l;
                    a.weights = d;
                    a.triangles = q.getIntArray(c, "triangles");
                    a.regionUVs = b;
                    a.updateUVs();
                    e = q.getStr(c, "color");
                    null != e && (a.r = Xa.toColor(e, 0), a.g = Xa.toColor(e, 1), a.b = Xa.toColor(e, 2), a.a = Xa.toColor(e, 3));
                    a.hullLength = 2 * q.getInt(c, "hull");
                    q.hasOwnProperty(c, "edges") && (a.edges =
                        q.getIntArray(c, "edges"));
                    a.width = q.getFloat(c, "width") * f;
                    a.height = q.getFloat(c, "height") * f;
                    return a;
                case "boundingbox":
                    a = this.attachmentLoader.newBoundingBoxAttachment(a, b);
                    c = q.getFloatArray(c, "vertices", 1);
                    for (e = 0; e < c.length;) b = c[e], ++e, a.vertices.push(b * f);
                    return a;
                default:
                    throw "Attachment type not implemented: " + y.string(d);
            }
            return null
        },
        readAnimation: function(a, b, c) {
            for (var d = [], e = 0, f, l = 0, h, g = 0, i = q.getNode(b, "slots"), j = 0, k = q.fields(i); j < k.length;) {
                var n = k[j];
                ++j;
                f = z.getProperty(i, n);
                for (var l =
                        c.findSlotIndex(n), m = 0, o = q.fields(f); m < o.length;) {
                    var p = o[m];
                    ++m;
                    h = q.getNodesArray(f, p);
                    if ("color" == p) { var r = new qk(h.length);
                        r.slotIndex = l; for (var u = g = 0; u < h.length;) { var s = h[u];++u; var t = q.getStr(s, "color"),
                                y = Xa.toColor(t, 0),
                                x = Xa.toColor(t, 1),
                                B = Xa.toColor(t, 2),
                                w = Xa.toColor(t, 3);
                            r.setFrame(g, q.getFloat(s, "time"), y, x, B, w);
                            Xa.readCurve(r, g, s);
                            g++ } d[d.length] = r;
                        e = Math.max(e, function() { var a = 5 * r.get_frameCount() - 5; return r.frames[a] }(this)) } else if ("attachment" == p) {
                        var A = new rk(h.length);
                        A.slotIndex =
                            l;
                        for (var D = g = 0; D < h.length;) { var E = h[D];++D;
                            A.setFrame(g++, q.getFloat(E, "time"), q.getStr(E, "name")) } d[d.length] = A;
                        e = Math.max(e, function() { var a = A.get_frameCount() - 1; return A.frames[a] }(this))
                    } else throw "Invalid timeline type for a slot: " + p + " (" + n + ")";
                }
            }
            for (var G = q.getNode(b, "bones"), C = 0, M = q.fields(G); C < M.length;) {
                var H = M[C];
                ++C;
                var N = c.findBoneIndex(H);
                if (-1 == N) throw "Bone not found: " + H;
                for (var O = q.getNode(G, H), P = 0, Y = q.fields(O); P < Y.length;) {
                    var J = Y[P];
                    ++P;
                    h = q.getNodesArray(O, J);
                    if ("rotate" == J) {
                        var Q =
                            new sk(h.length);
                        Q.boneIndex = N;
                        for (var U = g = 0; U < h.length;) { var T = h[U];++U;
                            Q.setFrame(g, q.getFloat(T, "time"), q.getFloat(T, "angle"));
                            Xa.readCurve(Q, g, T);
                            g++ } d[d.length] = Q;
                        e = Math.max(e, function() { var a = 2 * Q.get_frameCount() - 2; return Q.frames[a] }(this))
                    } else if ("translate" == J || "scale" == J) {
                        var K, S = 1;
                        "scale" == J ? K = new tk(h.length) : (K = new Hf(h.length), S = this.scale);
                        K.boneIndex = N;
                        for (var L = g = 0; L < h.length;) {
                            var R = h[L];
                            ++L;
                            var $ = q.getFloat(R, "x") * S,
                                Z = q.getFloat(R, "y") * S;
                            K.setFrame(g, q.getFloat(R, "time"), $, Z);
                            Xa.readCurve(K, g, R);
                            g++
                        }
                        d[d.length] = K;
                        e = Math.max(e, function() { var a = 3 * K.get_frameCount() - 3; return K.frames[a] }(this))
                    } else if ("flipX" == J || "flipY" == J) { var V = "flipX" == J,
                            aa;
                        aa = V ? new If(h.length) : new uk(h.length);
                        aa.boneIndex = N; var fa;
                        fa = V ? "x" : "y"; for (var ba = g = 0; ba < h.length;) { var ia = h[ba];++ba;
                            aa.setFrame(g, q.getFloat(ia, "time"), q.getBool(ia, fa, !1));
                            g++ } d[d.length] = aa;
                        e = Math.max(e, function() { var a = 2 * aa.get_frameCount() - 2; return aa.frames[a] }(this)) } else throw "Invalid timeline type for a bone: " + J + " (" +
                        H + ")";
                }
            }
            for (var ga = q.getNode(b, "ik"), da = 0, ka = q.fields(ga); da < ka.length;) { var F = ka[da];++da; var ma = c.findIkConstraint(F);
                h = q.getNodesArray(ga, F); var oa = new vk(h.length);
                oa.ikConstraintIndex = c.ikConstraints.indexOf(ma); for (var na = g = 0; na < h.length;) { var ea = h[na];++na; var ca = q.getFloat(ea, "mix", 1),
                        ua;
                    ua = q.getBool(ea, "bendPositive", !0) ? 1 : -1;
                    oa.setFrame(g, q.getFloat(ea, "time"), ca, ua);
                    Xa.readCurve(oa, g, ea);
                    g++ } d[d.length] = oa;
                e = Math.max(e, function() { var a = 3 * oa.get_frameCount() - 3; return oa.frames[a] }(this)) }
            for (var ya =
                    q.getNode(b, "ffd"), ja = 0, ha = q.fields(ya); ja < ha.length;) {
                var xa = ha[ja];
                ++ja;
                var Ha = c.findSkin(xa);
                f = q.getNode(ya, xa);
                for (var ra = 0, va = q.fields(f); ra < va.length;) {
                    var wa = va[ra];
                    ++ra;
                    for (var l = c.findSlotIndex(wa), Ia = q.getNode(f, wa), Aa = 0, Da = q.fields(Ia); Aa < Da.length;) {
                        var X = Da[Aa];
                        ++Aa;
                        h = q.getNodesArray(Ia, X);
                        var sa = new wk(h.length),
                            ta = Ha.getAttachment(l, X);
                        if (null == ta) throw "FFD attachment not found: " + X;
                        sa.slotIndex = l;
                        sa.attachment = ta;
                        for (var Ja = 0, Ja = I.__instanceof(ta, Zd) ? I.__cast(ta, Zd).vertices.length :
                                2 * (I.__cast(ta, uh).weights.length / 3) | 0, Ta = g = 0; Ta < h.length;) {
                            var Ga = h[Ta];
                            ++Ta;
                            var la;
                            if (q.hasOwnProperty(Ga, "vertices")) { var Ca = q.getFloatArray(Ga, "vertices", 1),
                                    jb = q.getInt(Ga, "offset"),
                                    Oa = Ca.length;
                                la = []; for (var Za = 0; Za < Ja;) { var Qa = Za++;
                                    la[Qa] = 0 } if (1 == this.scale)
                                    for (var Ea = 0; Ea < Oa;) { var ab = Ea++;
                                        la[ab + jb] = Ca[ab] } else
                                        for (var Ya = 0; Ya < Oa;) { var qa = Ya++;
                                            la[qa + jb] = Ca[qa] * this.scale }
                                if (I.__instanceof(ta, Zd))
                                    for (var W = I.__cast(ta, Zd).vertices, za = 0; za < Ja;) { var $a = za++;
                                        la[$a] += W[$a] } } else la = I.__instanceof(ta,
                                Zd) ? I.__cast(ta, Zd).vertices : [];
                            sa.setFrame(g, q.getFloat(Ga, "time"), la);
                            Xa.readCurve(sa, g, Ga);
                            g++
                        }
                        d[d.length] = sa;
                        e = Math.max(e, function() { var a = sa.get_frameCount() - 1; return sa.frames[a] }(this))
                    }
                }
            }
            var Ka = q.getNode(b, "drawOrder");
            null == Ka && (Ka = q.getNode(b, "draworder"));
            if (null != Ka && 0 < Ka.length) {
                for (var Ma = new xk(Ka.length), Wa = c.slots.length, Sa = g = 0; Sa < Ka.length;) {
                    var fb = Ka[Sa];
                    ++Sa;
                    var Ua = null;
                    if (q.hasOwnProperty(fb, "offsets")) {
                        for (var Ua = Array(Wa), lb = Wa - 1; 0 <= lb;) { var bn = lb--;
                            Ua[bn] = -1 }
                        var pa = q.getNodesArray(fb,
                                "offsets"),
                            bb;
                        bb = Array(Wa - pa.length | 0);
                        for (var Va = 0, Pa = 0, nb = 0; nb < pa.length;) { var gb = pa[nb];++nb;
                            l = c.findSlotIndex(q.getStr(gb, "slot")); if (-1 == l) throw "Slot not found: " + q.getStr(gb, "slot"); for (; Va != l;) { var Ba = Pa++,
                                    hb = Va++;
                                bb[Ba] = hb } var sb = Va + q.getInt(gb, "offset"),
                                ib = Va++;
                            Ua[sb] = ib }
                        for (; Va < Wa;) { var ub = Pa++,
                                db = Va++;
                            bb[ub] = db }
                        for (var qb = Wa - 1; 0 <= qb;) { if (-1 == Ua[qb]) { var vc = --Pa;
                                Ua[qb] = bb[vc] } qb-- }
                    }
                    Ma.setFrame(g++, q.getFloat(fb, "time"), Ua)
                }
                d[d.length] = Ma;
                e = Math.max(e, function() {
                    var a = Ma.get_frameCount() -
                        1;
                    return Ma.frames[a]
                }(this))
            }
            var Fa = q.getNode(b, "events");
            if (null != Fa && 0 < Fa.length) {
                var La = new yk(Fa.length),
                    jo = g = 0,
                    kb;
                for (kb = I.__cast(Fa, Array); jo < kb.length;) { var mb = kb[jo];++jo; var Na = c.findEvent(q.getStr(mb, "name")); if (null == Na) throw "Event not found: " + q.getStr(mb, "name"); var cb = new Um(Na);
                    cb.intValue = q.getInt(mb, "int", Na.intValue);
                    cb.floatValue = q.getFloat(mb, "float", cb.floatValue);
                    cb.stringValue = q.getStr(mb, "string", Na.stringValue);
                    La.setFrame(g++, q.getFloat(mb, "time"), cb) } d[d.length] = La;
                e = Math.max(e,
                    function() { var a = La.get_frameCount() - 1; return La.frames[a] }(this))
            }
            c.animations[c.animations.length] = new wc(a, d, e)
        },
        __class__: Xa
    };
    var an = function(a) { this.attachments = []; if (null == a) throw new ka("name cannot be null.");
        this.name = a };
    g["spinehaxe.Skin"] = an;
    an.__name__ = ["spinehaxe", "Skin"];
    an.prototype = {
        addAttachment: function(a, b, c) { if (null == c) throw new ka("attachment cannot be null.");
            null == this.attachments[a] && (this.attachments[a] = new M);
            this.attachments[a].set(b, c);
            c },
        getAttachment: function(a, b) {
            return null ==
                this.attachments[a] ? null : this.attachments[a].get(b)
        },
        __class__: an
    };
    var Xm = function(a, b) { this.attachmentVertices = [];
        this.r = this.g = this.b = this.a = this._attachmentTime = 0; if (null == a) throw new ka("data cannot be null."); if (null == b) throw new ka("bone cannot be null.");
        this.data = a;
        this.bone = b;
        this.setToSetupPose() };
    g["spinehaxe.Slot"] = Xm;
    Xm.__name__ = ["spinehaxe", "Slot"];
    Xm.prototype = {
        set_attachment: function(a) {
            this.attachment = a;
            this._attachmentTime = this.bone.skeleton.time;
            this.attachmentVertices.splice(0,
                this.attachmentVertices.length);
            return a
        },
        setToSetupPose: function(a) { null == a && (a = !0); var b = this.bone.skeleton.data.slots.indexOf(this.data);
            this.r = this.data.r;
            this.g = this.data.g;
            this.b = this.data.b;
            this.a = this.data.a; if (a && (null == this.attachment || this.attachment.weak)) this.set_attachment(null == this.data.attachmentName ? null : this.bone.skeleton.getAttachmentForSlotIndex(b, this.data.attachmentName)) },
        __class__: Xm,
        __properties__: { set_attachment: "set_attachment" }
    };
    var $m = function(a, b) {
        this.a = this.b = this.g =
            this.r = 1;
        if (null == a) throw new ka("name cannot be null.");
        if (null == b) throw new ka("boneData cannot be null.");
        this.name = a;
        this.boneData = b
    };
    g["spinehaxe.SlotData"] = $m;
    $m.__name__ = ["spinehaxe", "SlotData"];
    $m.prototype = { __class__: $m };
    var wc = function(a, b, c) { this.duration = 0; if (null == a) throw new ka("name cannot be null."); if (null == b) throw new ka("timelines cannot be null.");
        this.name = a;
        this.timelines = b;
        this.duration = c };
    g["spinehaxe.animation.Animation"] = wc;
    wc.__name__ = ["spinehaxe", "animation", "Animation"];
    wc.binarySearch = function(a, b, c) { var d = 0,
            e = a.length / c - 2 | 0; if (0 == e) return c; for (var f = e >>> 1;;) { a[(f + 1) * c] <= b ? d = f + 1 : e = f; if (d == e) return (d + 1) * c;
            f = d + e >>> 1 } return 0 };
    wc.binarySearch1 = function(a, b) { var c = 0,
            d = a.length - 2; if (0 == d) return 1; for (var e = d >>> 1;;) { a[e + 1] <= b ? c = e + 1 : d = e; if (c == d) return c + 1;
            e = c + d >>> 1 } return 0 };
    wc.prototype = {
        apply: function(a, b, c, d, e) {
            if (null == a) throw new ka("skeleton cannot be null.");
            d && 0 != this.duration && (c %= this.duration, b %= this.duration);
            for (var d = this.timelines.length, f = 0; f < d;) this.timelines[f++].apply(a,
                b, c, e, 1)
        },
        mix: function(a, b, c, d, e, f) { if (null == a) throw new ka("skeleton cannot be null.");
            d && 0 != this.duration && (c %= this.duration, b %= this.duration); for (var d = this.timelines.length, l = 0; l < d;) this.timelines[l++].apply(a, b, c, e, f) },
        __class__: wc
    };
    var cn = function(a) { this.timeScale = 1;
        this.tracks = [];
        this.events = [];
        this.onStart = new tg;
        this.onEnd = new tg;
        this.onComplete = new tg;
        this.onEvent = new tg;
        this.timeScale = 1; if (null == a) throw new ka("data cannot be null.");
        this.data = a };
    g["spinehaxe.animation.AnimationState"] =
        cn;
    cn.__name__ = ["spinehaxe", "animation", "AnimationState"];
    cn.prototype = {
        update: function(a) { for (var a = a * this.timeScale, b = 0, c = this.tracks.length; b < c;) { var d = b++,
                    e = this.tracks[d]; if (null != e) { e.time += a * e.timeScale; if (null != e.previous) { var f = a * e.previous.timeScale;
                        e.previous.time += f;
                        e.mixTime += f } f = e.next;
                    null != f ? (f.time = e.lastTime - f.delay, 0 <= f.time && this.setCurrent(d, f)) : !e.loop && e.lastTime >= e.endTime && this.clearTrack(d) } } },
        apply: function(a) {
            for (var b = 0, c = this.tracks.length; b < c;) {
                var d = b++,
                    e = this.tracks[d];
                if (null != e) {
                    this.events.splice(0, this.events.length);
                    var f = e.time,
                        l = e.lastTime,
                        h = e.endTime,
                        g = e.loop;
                    !g && f > h && (f = h);
                    var i = e.previous;
                    if (null == i) 1 == e.mix ? e.animation.apply(a, e.lastTime, f, g, this.events) : e.animation.mix(a, e.lastTime, f, g, this.events, e.mix);
                    else { var j = i.time;!i.loop && j > i.endTime && (j = i.endTime);
                        i.animation.apply(a, j, j, i.loop, null);
                        i = e.mixTime / e.mixDuration * e.mix;
                        1 <= i && (i = 1, e.previous = null);
                        e.animation.mix(a, e.lastTime, f, g, this.events, i) } i = 0;
                    for (j = this.events; i < j.length;) {
                        var k = j[i];
                        ++i;
                        if (null != e.onEvent) e.onEvent(d, k);
                        this.onEvent.invoke(d, k)
                    }
                    if (g ? 0 == h || l % h > f % h : l < h && f >= h) { f = f / h | 0; if (null != e.onComplete) e.onComplete(d, f);
                        this.onComplete.invoke(d, f) } e.lastTime = e.time
                }
            }
        },
        clearTrack: function(a) { if (!(a >= this.tracks.length)) { var b = this.tracks[a]; if (null != b) { if (null != b.onEnd) b.onEnd(a);
                    this.onEnd.invoke(a);
                    this.tracks[a] = null } } },
        expandToIndex: function(a) { if (a < this.tracks.length) return this.tracks[a]; for (; a >= this.tracks.length;) this.tracks[this.tracks.length] = null; return null },
        setCurrent: function(a,
            b) { var c = this.expandToIndex(a); if (null != c) { var d = c.previous;
                c.previous = null; if (null != c.onEnd) c.onEnd(a);
                this.onEnd.invoke(a);
                b.mixDuration = this.data.getMix(c.animation, b.animation);
                0 < b.mixDuration && (b.mixTime = 0, b.previous = null != d && 0.5 > c.mixTime / c.mixDuration ? d : c) } this.tracks[a] = b; if (null != b.onStart) b.onStart(a);
            this.onStart.invoke(a) },
        setAnimationByName: function(a, b, c) { var d = this.data.skeletonData.findAnimation(b); if (null == d) throw new ka("Animation not found: " + b); return this.setAnimation(a, d, c) },
        setAnimation: function(a, b, c) { var d = new dn;
            d.animation = b;
            d.loop = c;
            d.endTime = b.duration;
            this.setCurrent(a, d); return d },
        __class__: cn
    };
    var en = function(a) { this.defaultMix = 0;
        this.animationToMixTime = new M;
        this.defaultMix = 0;
        this.skeletonData = a };
    g["spinehaxe.animation.AnimationStateData"] = en;
    en.__name__ = ["spinehaxe", "animation", "AnimationStateData"];
    en.prototype = {
        setMixByName: function(a, b, c) {
            var d = this.skeletonData.findAnimation(a);
            if (null == d) throw new ka("Animation not found: " + a);
            a = this.skeletonData.findAnimation(b);
            if (null == a) throw new ka("Animation not found: " + b);
            this.setMix(d, a, c)
        },
        setMix: function(a, b, c) { if (null == a) throw new ka("from cannot be null."); if (null == b) throw new ka("to cannot be null.");
            this.animationToMixTime.set(a.name + ":" + b.name, c);
            c },
        getMix: function(a, b) { var c = a.name + ":" + b.name; return !this.animationToMixTime.exists(c) ? this.defaultMix : this.animationToMixTime.get(c) },
        __class__: en
    };
    var Jf = function() {};
    g["spinehaxe.animation.Timeline"] = Jf;
    Jf.__name__ = ["spinehaxe", "animation", "Timeline"];
    Jf.prototype = { __class__: Jf };
    var rk = function(a) { this.frames = fd.allocFloat(a);
        this.attachmentNames = Array(a) };
    g["spinehaxe.animation.AttachmentTimeline"] = rk;
    rk.__name__ = ["spinehaxe", "animation", "AttachmentTimeline"];
    rk.__interfaces__ = [Jf];
    rk.prototype = {
        get_frameCount: function() { return this.frames.length },
        setFrame: function(a, b, c) { this.frames[a] = b;
            this.attachmentNames[a] = c },
        apply: function(a, b, c) {
            c < this.frames[0] ? b > c && this.apply(a, b, 2147483647, null, 0) : (b > c && (b = -1), c = c >= this.frames[this.frames.length - 1] ? this.frames.length -
                1 : wc.binarySearch1(this.frames, c) - 1, this.frames[c] < b || (b = this.attachmentNames[c], a.slots[this.slotIndex].set_attachment(null == b ? null : a.getAttachmentForSlotIndex(this.slotIndex, b))))
        },
        __class__: rk,
        __properties__: { get_frameCount: "get_frameCount" }
    };
    var vb = function(a) { this.curves = fd.allocFloat(19 * (a - 1)) };
    g["spinehaxe.animation.CurveTimeline"] = vb;
    vb.__name__ = ["spinehaxe", "animation", "CurveTimeline"];
    vb.__interfaces__ = [Jf];
    vb.prototype = {
        apply: function() {},
        get_frameCount: function() {
            return this.curves.length /
                19 + 1 | 0
        },
        setStepped: function(a) { this.curves[19 * a] = 1 },
        setCurve: function(a, b, c, d, e) { var f = 0.1 * 0.1,
                l = 0.1 * f,
                h = 3 * 0.1,
                g = 3 * f,
                i = 6 * f,
                f = 6 * l,
                j = 2 * -b + d,
                k = 2 * -c + e,
                d = 3 * (b - d) + 1,
                e = 3 * (c - e) + 1,
                b = b * h + j * g + d * l,
                c = c * h + k * g + e * l,
                l = j * i + d * f,
                i = k * i + e * f,
                k = d * f,
                f = e * f,
                a = 19 * a,
                d = this.curves,
                e = a++;
            d[e] = 2;
            e = b;
            h = c; for (g = a + 19 - 1; a < g;) d[a] = e, d[a + 1] = h, b += l, c += i, l += k, i += f, e += b, h += c, a += 2 },
        getCurvePercent: function(a, b) {
            var c = this.curves,
                d = 19 * a,
                e = c[d];
            if (0 == e) return b;
            if (1 == e) return 0;
            d++;
            for (var e = 0, f = d, l = d + 19 - 1; d < l;) {
                e = c[d];
                if (e >= b) return d == f ?
                    l = f = 0 : (f = c[d - 2], l = c[d - 1]), l + (c[d + 1] - l) * (b - f) / (e - f);
                d += 2
            }
            c = c[d - 1];
            return c + (1 - c) * (b - e) / (1 - e)
        },
        __class__: vb,
        __properties__: { get_frameCount: "get_frameCount" }
    };
    var qk = function(a) { vb.call(this, a);
        this.frames = fd.allocFloat(5 * a) };
    g["spinehaxe.animation.ColorTimeline"] = qk;
    qk.__name__ = ["spinehaxe", "animation", "ColorTimeline"];
    qk.__super__ = vb;
    qk.prototype = k(vb.prototype, {
        setFrame: function(a, b, c, d, e, f) { a *= 5;
            this.frames[a] = b;
            this.frames[a + 1] = c;
            this.frames[a + 2] = d;
            this.frames[a + 3] = e;
            this.frames[a + 4] = f },
        apply: function(a,
            b, c, d, e) {
            if (!(c < this.frames[0])) {
                var f, l;
                if (c >= this.frames[this.frames.length - 5]) b = this.frames.length - 1, c = this.frames[b - 3], f = this.frames[b - 2], l = this.frames[b - 1], b = this.frames[b];
                else {
                    var b = wc.binarySearch(this.frames, c, 5),
                        h = this.frames[b - 4];
                    f = this.frames[b - 3];
                    l = this.frames[b - 2];
                    var d = this.frames[b - 1],
                        g = this.frames[b],
                        g = 1 - (c - g) / (this.frames[b + -5] - g),
                        g = this.getCurvePercent(b / 5 - 1 | 0, 0 > g ? 0 : 1 < g ? 1 : g),
                        c = h + (this.frames[b + 1] - h) * g;
                    f += (this.frames[b + 2] - f) * g;
                    l += (this.frames[b + 3] - l) * g;
                    b = d + (this.frames[b + 4] - d) *
                        g
                }
                a = a.slots[this.slotIndex];
                1 > e ? (a.r += (c - a.r) * e, a.g += (f - a.g) * e, a.b += (l - a.b) * e, a.a += (b - a.a) * e) : (a.r = c, a.g = f, a.b = l, a.a = b)
            }
        },
        __class__: qk
    });
    var xk = function(a) { this.frames = fd.allocFloat(a);
        this.drawOrders = Array(a) };
    g["spinehaxe.animation.DrawOrderTimeline"] = xk;
    xk.__name__ = ["spinehaxe", "animation", "DrawOrderTimeline"];
    xk.__interfaces__ = [Jf];
    xk.prototype = {
        get_frameCount: function() { return this.frames.length },
        setFrame: function(a, b, c) { this.frames[a] = b;
            this.drawOrders[a] = c },
        apply: function(a, b, c) {
            if (!(c < this.frames[0])) {
                var c =
                    c >= this.frames[this.frames.length - 1] ? this.frames.length - 1 : wc.binarySearch1(this.frames, c) - 1,
                    b = a.drawOrder,
                    d = this.drawOrders[c],
                    c = 0;
                if (null == d) { d = 0; for (a = a.slots; d < a.length;) { var e = a[d];++d;
                        b[c++] = e } } else
                    for (e = 0; e < d.length;) { var f = d[e];++e;
                        b[c++] = a.slots[f] }
            }
        },
        __class__: xk,
        __properties__: { get_frameCount: "get_frameCount" }
    };
    var yk = function(a) { this.frames = fd.allocFloat(a);
        this.events = Array(a) };
    g["spinehaxe.animation.EventTimeline"] = yk;
    yk.__name__ = ["spinehaxe", "animation", "EventTimeline"];
    yk.__interfaces__ = [Jf];
    yk.prototype = {
        get_frameCount: function() { return this.frames.length },
        setFrame: function(a, b, c) { this.frames[a] = b;
            this.events[a] = c },
        apply: function(a, b, c, d, e) { if (null != d) { if (b > c) this.apply(a, b, 32767, d, e), b = -1;
                else if (a = b, e = this.get_frameCount() - 1, a >= this.frames[e]) return; if (!(c < this.frames[0])) { if (b < this.frames[0]) b = 0;
                    else { b = wc.binarySearch1(this.frames, b); for (a = this.frames[b]; 0 < b && !(this.frames[b - 1] != a);) b-- } for (; b < this.get_frameCount() && c >= this.frames[b];) d.push(this.events[b]), b++ } } },
        __class__: yk,
        __properties__: { get_frameCount: "get_frameCount" }
    };
    var wk = function(a) { vb.call(this, a);
        this.frames = fd.allocFloat(a);
        this.frameVertices = Array(a) };
    g["spinehaxe.animation.FfdTimeline"] = wk;
    wk.__name__ = ["spinehaxe", "animation", "FfdTimeline"];
    wk.__super__ = vb;
    wk.prototype = k(vb.prototype, {
        setFrame: function(a, b, c) { this.frames[a] = b;
            this.frameVertices[a] = c },
        apply: function(a, b, c, d, e) {
            b = a.slots[this.slotIndex];
            if (b.attachment == this.attachment && (d = this.frames, !(c < d[0]))) {
                var f = this.frameVertices,
                    a = f[0].length,
                    b =
                    b.attachmentVertices;
                b.length != a && (e = 1);
                if (c >= d[d.length - 1])
                    if (c = f[d.length - 1], 1 > e)
                        for (d = 0; d < a;) f = d++, b[f] += (c[f] - b[f]) * e;
                    else
                        for (e = 0; e < a;) d = e++, b[d] = c[d];
                else { var l = wc.binarySearch1(d, c),
                        h = d[l],
                        c = 1 - (c - h) / (d[l - 1] - h),
                        c = this.getCurvePercent(l - 1, 0 > c ? 0 : 1 < c ? 1 : c),
                        d = f[l - 1],
                        f = f[l]; if (1 > e)
                        for (h = 0; h < a;) { var g = h++,
                                l = d[g];
                            b[g] += (l + (f[g] - l) * c - b[g]) * e } else
                            for (e = 0; e < a;) h = e++, l = d[h], b[h] = l + (f[h] - l) * c }
            }
        },
        __class__: wk
    });
    var If = function(a) { this.frames = fd.allocFloat(2 * a) };
    g["spinehaxe.animation.FlipXTimeline"] = If;
    If.__name__ = ["spinehaxe", "animation", "FlipXTimeline"];
    If.__interfaces__ = [Jf];
    If.prototype = {
        get_frameCount: function() { return this.frames.length / 2 | 0 },
        setFrame: function(a, b, c) { a *= 2;
            this.frames[a] = b;
            this.frames[a + 1] = c ? 1 : 0 },
        apply: function(a, b, c) { c < this.frames[0] ? b > c && this.apply(a, b, 2147483647, null, 0) : (b > c && (b = -1), c = (c >= this.frames[this.frames.length - 2] ? this.frames.length : wc.binarySearch(this.frames, c, 2)) - 2, this.frames[c] < b || this.setFlip(a.bones[this.boneIndex], 0 != this.frames[c + 1])) },
        setFlip: function(a,
            b) { a.flipX = b },
        __class__: If,
        __properties__: { get_frameCount: "get_frameCount" }
    };
    var uk = function(a) { If.call(this, a) };
    g["spinehaxe.animation.FlipYTimeline"] = uk;
    uk.__name__ = ["spinehaxe", "animation", "FlipYTimeline"];
    uk.__super__ = If;
    uk.prototype = k(If.prototype, { setFlip: function(a, b) { a.flipY = b }, __class__: uk });
    var vk = function(a) { vb.call(this, a);
        this.frames = fd.allocFloat(3 * a) };
    g["spinehaxe.animation.IkConstraintTimeline"] = vk;
    vk.__name__ = ["spinehaxe", "animation", "IkConstraintTimeline"];
    vk.__super__ = vb;
    vk.prototype =
        k(vb.prototype, {
            setFrame: function(a, b, c, d) { a *= 3;
                this.frames[a] = b;
                this.frames[a + 1] = c;
                this.frames[a + 2] = d },
            apply: function(a, b, c, d, e) {
                if (!(c < this.frames[0]))
                    if (a = a.ikConstraints[this.ikConstraintIndex], c >= this.frames[this.frames.length - 3]) a.mix += (this.frames[this.frames.length - 2] - a.mix) * e, a.bendDirection = this.frames[this.frames.length - 1] | 0;
                    else {
                        var b = wc.binarySearch(this.frames, c, 3),
                            d = this.frames[b + -2],
                            f = this.frames[b],
                            c = 1 - (c - f) / (this.frames[b + -3] - f),
                            c = this.getCurvePercent(b / 3 - 1 | 0, 0 > c ? 0 : 1 < c ? 1 : c);
                        a.mix +=
                            (d + (this.frames[b + 1] - d) * c - a.mix) * e;
                        a.bendDirection = this.frames[b + -1] | 0
                    }
            },
            __class__: vk
        });
    var tg = function() { this.listeners = [] };
    g["spinehaxe.animation.Listeners"] = tg;
    tg.__name__ = ["spinehaxe", "animation", "Listeners"];
    tg.prototype = {
        add: function(a) { if (null == a) throw new ka("listener cannot be null.");
            this.listeners.push(a) },
        remove: function(a) { if (null == a) throw new ka("listener cannot be null.");
            H.remove(this.listeners, a) },
        invoke: function(a, b) { for (var c = 0, d = this.listeners; c < d.length;) { var e = d[c];++c;
                e(a, b) } },
        __class__: tg
    };
    var sk = function(a) { vb.call(this, a);
        this.frames = fd.allocFloat(2 * a) };
    g["spinehaxe.animation.RotateTimeline"] = sk;
    sk.__name__ = ["spinehaxe", "animation", "RotateTimeline"];
    sk.__super__ = vb;
    sk.prototype = k(vb.prototype, {
        setFrame: function(a, b, c) { a *= 2;
            this.frames[a] = b;
            this.frames[a + 1] = c },
        apply: function(a, b, c, d, e) {
            if (!(c < this.frames[0])) {
                a = a.bones[this.boneIndex];
                if (c >= this.frames[this.frames.length - 2]) d = a.data.rotation + this.frames[this.frames.length - 1] - a.rotation;
                else {
                    for (var d = wc.binarySearch(this.frames,
                            c, 2), b = this.frames[d - 1], f = this.frames[d], c = 1 - (c - f) / (this.frames[d + -2] - f), c = this.getCurvePercent(Math.floor(d / 2 - 1), 0 > c ? 0 : 1 < c ? 1 : c), d = this.frames[d + 1] - b; 180 < d;) d -= 360;
                    for (; - 180 > d;) d += 360;
                    d = a.data.rotation + (b + d * c) - a.rotation
                }
                for (; 180 < d;) d -= 360;
                for (; - 180 > d;) d += 360;
                a.rotation += d * e
            }
        },
        __class__: sk
    });
    var Hf = function(a) { this.frames = fd.allocFloat(3 * a);
        vb.call(this, a) };
    g["spinehaxe.animation.TranslateTimeline"] = Hf;
    Hf.__name__ = ["spinehaxe", "animation", "TranslateTimeline"];
    Hf.__super__ = vb;
    Hf.prototype = k(vb.prototype, {
        setFrame: function(a, b, c, d) { a *= 3;
            this.frames[a] = b;
            this.frames[a + 1] = c;
            this.frames[a + 2] = d },
        apply: function(a, b, c, d, e) {
            if (!(c < this.frames[0]))
                if (a = a.bones[this.boneIndex], c >= this.frames[this.frames.length - 3]) a.x += (a.data.x + this.frames[this.frames.length - 2] - a.x) * e, a.y += (a.data.y + this.frames[this.frames.length - 1] - a.y) * e;
                else {
                    var b = wc.binarySearch(this.frames, c, 3),
                        d = this.frames[b - 2],
                        f = this.frames[b - 1],
                        l = this.frames[b],
                        c = 1 - (c - l) / (this.frames[b + -3] - l),
                        c = this.getCurvePercent(Math.floor(b / 3 - 1), 0 > c ? 0 : 1 < c ? 1 : c);
                    a.x += (a.data.x + d + (this.frames[b + 1] - d) * c - a.x) * e;
                    a.y += (a.data.y + f + (this.frames[b + 2] - f) * c - a.y) * e
                }
        },
        __class__: Hf
    });
    var tk = function(a) { Hf.call(this, a) };
    g["spinehaxe.animation.ScaleTimeline"] = tk;
    tk.__name__ = ["spinehaxe", "animation", "ScaleTimeline"];
    tk.__super__ = Hf;
    tk.prototype = k(Hf.prototype, {
        apply: function(a, b, c, d, e) {
            if (!(c < this.frames[0]))
                if (a = a.bones[this.boneIndex], c >= this.frames[this.frames.length - 3]) a.scaleX += (a.data.scaleX * this.frames[this.frames.length - 2] - a.scaleX) * e, a.scaleY += (a.data.scaleY * this.frames[this.frames.length -
                    1] - a.scaleY) * e;
                else { var b = wc.binarySearch(this.frames, c, 3),
                        d = this.frames[b - 2],
                        f = this.frames[b - 1],
                        l = this.frames[b],
                        c = 1 - (c - l) / (this.frames[b + -3] - l),
                        c = this.getCurvePercent(Math.floor(b / 3 - 1), 0 > c ? 0 : 1 < c ? 1 : c);
                    a.scaleX += (a.data.scaleX * (d + (this.frames[b + 1] - d) * c) - a.scaleX) * e;
                    a.scaleY += (a.data.scaleY * (f + (this.frames[b + 2] - f) * c) - a.scaleY) * e }
        },
        __class__: tk
    });
    var dn = function() { this.timeScale = this.mix = 1;
        this.lastTime = -1;
        this.time = 0 };
    g["spinehaxe.animation.TrackEntry"] = dn;
    dn.__name__ = ["spinehaxe", "animation", "TrackEntry"];
    dn.prototype = { __class__: dn };
    var rm = function(a, b) { this.regions = [];
        this.pages = [];
        this.load(a, b) };
    g["spinehaxe.atlas.Atlas"] = rm;
    rm.__name__ = ["spinehaxe", "atlas", "Atlas"];
    rm.prototype = {
        load: function(a, b) {
            if (null == b) throw new ka("textureLoader cannot be null.");
            this.textureLoader = b;
            for (var c = new fn(a), d = [], e = null;;) {
                var f = c.readLine();
                if (null == f) break;
                f = c.trim(f);
                if (0 == f.length) e = null;
                else if (null == e) {
                    e = new hj;
                    e.name = f;
                    2 == c.readTuple(d) && (e.width = y.parseInt(d[0]), e.height = y.parseInt(d[1]), c.readTuple(d));
                    e.format = d[0];
                    c.readTuple(d);
                    e.minFilter = d[0];
                    e.magFilter = d[1];
                    var l = c.readValue();
                    e.uWrap = "clampToEdge";
                    e.vWrap = "clampToEdge";
                    "x" == l ? e.uWrap = "repeat" : "y" == l ? e.vWrap = "repeat" : "xy" == l && (e.uWrap = e.vWrap = "repeat");
                    b.loadPage(e, f);
                    this.pages[this.pages.length] = e
                } else {
                    l = new gj;
                    l.name = f;
                    l.page = e;
                    l.rotate = "true" == c.readValue();
                    c.readTuple(d);
                    var f = y.parseInt(d[0]),
                        h = y.parseInt(d[1]);
                    c.readTuple(d);
                    var g = y.parseInt(d[0]),
                        i = y.parseInt(d[1]);
                    l.u = f / e.width;
                    l.v = h / e.height;
                    l.rotate ? (l.u2 = (f + i) / e.width, l.v2 = (h +
                        g) / e.height) : (l.u2 = (f + g) / e.width, l.v2 = (h + i) / e.height);
                    l.x = f;
                    l.y = h;
                    l.width = y["int"](Math.abs(g));
                    l.height = y["int"](Math.abs(i));
                    4 == c.readTuple(d) && (l.splits = [y.parseInt(d[0]), y.parseInt(d[1]), y.parseInt(d[2]), y.parseInt(d[3])], 4 == c.readTuple(d) && (l.pads = [y.parseInt(d[0]), y.parseInt(d[1]), y.parseInt(d[2]), y.parseInt(d[3])], c.readTuple(d)));
                    l.originalWidth = y.parseInt(d[0]);
                    l.originalHeight = y.parseInt(d[1]);
                    c.readTuple(d);
                    l.offsetX = y.parseInt(d[0]);
                    l.offsetY = y.parseInt(d[1]);
                    l.index = y.parseInt(c.readValue());
                    b.loadRegion(l);
                    this.regions[this.regions.length] = l
                }
            }
        },
        findRegion: function(a) { for (var b = 0, c = this.regions.length; b < c;) { var d = b++; if (this.regions[d].name == a) return this.regions[d] } return null },
        __class__: rm
    };
    var fn = function(a) { this.index = 0;
        this.lines = (new Uc("[ \t]*((\r\n)|\r|\n)[ \t]*", "g")).split(a) };
    g["spinehaxe.atlas.Reader"] = fn;
    fn.__name__ = ["spinehaxe", "atlas", "Reader"];
    fn.prototype = {
        trim: function(a) { return ma.trim(a) },
        readLine: function() { return this.index >= this.lines.length ? null : this.lines[this.index++] },
        readValue: function() { var a = this.readLine(),
                b = a.indexOf(":"); if (-1 == b) throw "Invalid line: " + a; return this.trim(a.substring(b + 1)) },
        readTuple: function(a) { var b = this.readLine(),
                c = b.indexOf(":"); if (-1 == c) throw "Invalid line: " + b; for (var d = 0, c = c + 1; 3 > d;) { var e = b.indexOf(",", c); if (-1 == e) break;
                a[d] = this.trim(H.substr(b, c, e - c));
                c = e + 1;
                d++ } a[d] = this.trim(b.substring(c)); return d + 1 },
        __class__: fn
    };
    var hj = function() { this.width = this.height = 0 };
    g["spinehaxe.atlas.AtlasPage"] = hj;
    hj.__name__ = ["spinehaxe", "atlas", "AtlasPage"];
    hj.prototype = { __class__: hj };
    var gj = function() { this.rotate = !1;
        this.x = this.y = this.width = this.height = this.u = this.v = this.u2 = this.v2 = this.offsetX = this.offsetY = this.originalWidth = this.originalHeight = this.index = 0 };
    g["spinehaxe.atlas.AtlasRegion"] = gj;
    gj.__name__ = ["spinehaxe", "atlas", "AtlasRegion"];
    gj.prototype = { __class__: gj };
    var gn = function() {};
    g["spinehaxe.atlas.TextureLoader"] = gn;
    gn.__name__ = ["spinehaxe", "atlas", "TextureLoader"];
    gn.prototype = { __class__: gn };
    var hn = function() {};
    g["spinehaxe.attachments.AttachmentLoader"] =
        hn;
    hn.__name__ = ["spinehaxe", "attachments", "AttachmentLoader"];
    hn.prototype = { __class__: hn };
    var Td = function(a) { if (null == a) throw new ka("atlas cannot be null.");
        this.atlas = a };
    g["spinehaxe.attachments.AtlasAttachmentLoader"] = Td;
    Td.__name__ = ["spinehaxe", "attachments", "AtlasAttachmentLoader"];
    Td.__interfaces__ = [hn];
    Td.nextPOT = function(a) { a--;
        a |= a >> 1;
        a |= a >> 2;
        a |= a >> 4;
        a |= a >> 8; return (a | a >> 16) + 1 };
    Td.prototype = {
        newRegionAttachment: function(a, b, c) {
            a = this.atlas.findRegion(c);
            if (null == a) return new Ud(b);
            b = new Ud(b);
            b.rendererObject = a;
            var c = a.page.width / Td.nextPOT(a.page.width),
                d = a.page.height / Td.nextPOT(a.page.height);
            b.setUVs(a.u * c, a.v * d, a.u2 * c, a.v2 * d, a.rotate);
            b.regionOffsetX = a.offsetX;
            b.regionOffsetY = a.offsetY;
            b.regionWidth = a.width;
            b.regionHeight = a.height;
            b.regionOriginalWidth = a.originalWidth;
            b.regionOriginalHeight = a.originalHeight;
            return b
        },
        newMeshAttachment: function(a, b, c) {
            a = this.atlas.findRegion(c);
            if (null == a) throw "Region not found in atlas: " + c + " (mesh attachment: " + b + ")";
            b = new Zd(b);
            b.rendererObject =
                a;
            var c = a.page.width / Td.nextPOT(a.page.width),
                d = a.page.height / Td.nextPOT(a.page.height);
            b.regionU = a.u * c;
            b.regionV = a.v * d;
            b.regionU2 = a.u2 * c;
            b.regionV2 = a.v2 * d;
            b.regionRotate = a.rotate;
            b.regionOffsetX = a.offsetX;
            b.regionOffsetY = a.offsetY;
            b.regionWidth = a.width;
            b.regionHeight = a.height;
            b.regionOriginalWidth = a.originalWidth;
            b.regionOriginalHeight = a.originalHeight;
            return b
        },
        newSkinnedMeshAttachment: function(a, b, c) {
            a = this.atlas.findRegion(c);
            if (null == a) throw "Region not found in atlas: " + c + " (skinned mesh attachment: " +
                b + ")";
            b = new uh(b);
            b.rendererObject = a;
            var c = a.page.width / Td.nextPOT(a.page.width),
                d = a.page.height / Td.nextPOT(a.page.height);
            b.regionU = a.u * c;
            b.regionV = a.v * d;
            b.regionU2 = a.u2 * c;
            b.regionV2 = a.v2 * d;
            b.regionRotate = a.rotate;
            b.regionOffsetX = a.offsetX;
            b.regionOffsetY = a.offsetY;
            b.regionWidth = a.width;
            b.regionHeight = a.height;
            b.regionOriginalWidth = a.originalWidth;
            b.regionOriginalHeight = a.originalHeight;
            return b
        },
        newBoundingBoxAttachment: function(a, b) { return new zk(b) },
        __class__: Td
    };
    var gd = function(a, b) {
        null == b &&
            (b = !0);
        this.weak = !0;
        if (null == a) throw new ka("name cannot be null.");
        this.name = a;
        this.weak = b
    };
    g["spinehaxe.attachments.Attachment"] = gd;
    gd.__name__ = ["spinehaxe", "attachments", "Attachment"];
    gd.prototype = { __class__: gd };
    var zk = function(a) { gd.call(this, a);
        this.vertices = [] };
    g["spinehaxe.attachments.BoundingBoxAttachment"] = zk;
    zk.__name__ = ["spinehaxe", "attachments", "BoundingBoxAttachment"];
    zk.__super__ = gd;
    zk.prototype = k(gd.prototype, { __class__: zk });
    var Zd = function(a) {
        this.regionOffsetX = this.regionOffsetY =
            this.regionWidth = this.regionHeight = this.regionOriginalWidth = this.regionOriginalHeight = this.width = this.height = 0;
        this.regionRotate = !1;
        this.regionU = this.regionV = this.regionU2 = this.regionV2 = 0;
        this.r = this.g = this.b = this.a = 1;
        this.hullLength = 0;
        gd.call(this, a)
    };
    g["spinehaxe.attachments.MeshAttachment"] = Zd;
    Zd.__name__ = ["spinehaxe", "attachments", "MeshAttachment"];
    Zd.__super__ = gd;
    Zd.prototype = k(gd.prototype, {
        updateUVs: function() {
            var a = this.regionU2 - this.regionU,
                b = this.regionV2 - this.regionV,
                c = this.regionUVs.length;
            if (null == this.uvs || this.uvs.length != c) this.uvs = [];
            if (this.regionRotate)
                for (var d = 0; d < c;) this.uvs[d] = this.regionU + this.regionUVs[d + 1] * a, this.uvs[d + 1] = this.regionV + b - this.regionUVs[d] * b, d += 2;
            else
                for (d = 0; d < c;) this.uvs[d] = this.regionU + this.regionUVs[d] * a, this.uvs[d + 1] = this.regionV + this.regionUVs[d + 1] * b, d += 2
        },
        __class__: Zd
    });
    var Ud = function(a) {
        this.regionOffsetX = this.regionOffsetY = this.regionWidth = this.regionHeight = this.regionOriginalWidth = this.regionOriginalHeight = 0;
        this.r = this.g = this.b = this.a = 1;
        this.rotation =
            this.width = this.height = 0;
        this.scaleX = this.scaleY = 1;
        this.x = this.y = 0;
        gd.call(this, a);
        this.offset = fd.allocFloat(8);
        this.uvs = [];
        for (a = 0; 8 > a;) this.uvs[a++] = 0
    };
    g["spinehaxe.attachments.RegionAttachment"] = Ud;
    Ud.__name__ = ["spinehaxe", "attachments", "RegionAttachment"];
    Ud.__super__ = gd;
    Ud.prototype = k(gd.prototype, {
        setUVs: function(a, b, c, d, e) {
            e ? (this.uvs[2] = a, this.uvs[3] = d, this.uvs[4] = a, this.uvs[5] = b, this.uvs[6] = c, this.uvs[7] = b, this.uvs[0] = c, this.uvs[1] = d) : (this.uvs[0] = a, this.uvs[1] = d, this.uvs[2] = a, this.uvs[3] =
                b, this.uvs[4] = c, this.uvs[5] = b, this.uvs[6] = c, this.uvs[7] = d)
        },
        updateOffset: function() {
            var a = this.width / this.regionOriginalWidth * this.scaleX,
                b = this.height / this.regionOriginalHeight * this.scaleY,
                c = -this.width / 2 * this.scaleX + this.regionOffsetX * a,
                d = -this.height / 2 * this.scaleY + this.regionOffsetY * b,
                e = c + this.regionWidth * a,
                b = d + this.regionHeight * b,
                a = this.rotation * Math.PI / 180,
                f = Math.cos(a),
                l = Math.sin(a),
                a = c * f + this.x,
                c = c * l,
                h = d * f + this.y,
                d = d * l,
                g = e * f + this.x,
                e = e * l,
                f = b * f + this.y,
                b = b * l;
            this.offset[0] = a - d;
            this.offset[1] =
                h + c;
            this.offset[2] = a - b;
            this.offset[3] = f + c;
            this.offset[4] = g - b;
            this.offset[5] = f + e;
            this.offset[6] = g - d;
            this.offset[7] = h + e
        },
        __class__: Ud
    });
    var uh = function(a) { this.regionOffsetX = this.regionOffsetY = this.regionWidth = this.regionHeight = this.regionOriginalWidth = this.regionOriginalHeight = this.width = this.height = 0;
        this.regionRotate = !1;
        this.regionU = this.regionV = this.regionU2 = this.regionV2 = 0;
        this.r = this.g = this.b = this.a = 1;
        gd.call(this, a) };
    g["spinehaxe.attachments.SkinnedMeshAttachment"] = uh;
    uh.__name__ = ["spinehaxe",
        "attachments", "SkinnedMeshAttachment"
    ];
    uh.__super__ = gd;
    uh.prototype = k(gd.prototype, { updateUVs: function() { var a = this.regionU2 - this.regionU,
                b = this.regionV2 - this.regionV,
                c = this.regionUVs.length; if (null == this.uvs || this.uvs.length != c) this.uvs = []; if (this.regionRotate)
                for (var d = 0; d < c;) this.uvs[d] = this.regionU + this.regionUVs[d + 1] * a, this.uvs[d + 1] = this.regionV + b - this.regionUVs[d] * b, d += 2;
            else
                for (d = 0; d < c;) this.uvs[d] = this.regionU + this.regionUVs[d] * a, this.uvs[d + 1] = this.regionV + this.regionUVs[d + 1] * b, d += 2 }, __class__: uh });
    var ej = function(a) { this.pack = a };
    g["spinehaxe.platform.flambe.BitmapDataTextureLoader"] = ej;
    ej.__name__ = ["spinehaxe", "platform", "flambe", "BitmapDataTextureLoader"];
    ej.__interfaces__ = [gn];
    ej.prototype = { loadPage: function(a, b) {-1 < b.indexOf(".png") && (b = b.substring(0, b.length - 4)); var c = this.pack.getTexture(b); if (null == c) throw new ka("Texture not found with name: " + b);
            a.rendererObject = c;
            a.width = c.get_width();
            a.height = c.get_height() }, loadRegion: function() {}, __class__: ej };
    var ah = function(a) {
        this._rotation =
            this._textureWidth = this._textureHeight = this._textureX = this._textureY = 0;
        this._xScale = this._yScale = 1;
        this._x = this._y = 0;
        r.call(this);
        if (null == a) throw "RegionAttachment can't be null";
        var b = a.rendererObject;
        if (null == b) throw "AtlasRegion not found : " + a.name;
        this._textureWidth = b.rotate ? b.height : b.width;
        this._textureHeight = b.rotate ? b.width : b.height;
        this._rotation = -a.rotation;
        this._xScale = a.scaleX * (a.width / b.width);
        this._yScale = a.scaleY * (a.height / b.height);
        var c = -a.rotation * Math.PI / 180,
            d = Math.cos(c),
            c = Math.sin(c),
            e = -a.width / 2 * a.scaleX,
            f = -a.height / 2 * a.scaleY;
        b.rotate && (this._rotation += 90, e += this._textureHeight * (a.width / b.width));
        this._x = a.x + e * d - f * c;
        this._y = -a.y + e * c + f * d;
        this._textureX = b.x;
        this._textureY = b.y;
        this._texture = b.page.rendererObject
    };
    g["spinehaxe.platform.flambe.RegionAttachmentSprite"] = ah;
    ah.__name__ = ["spinehaxe", "platform", "flambe", "RegionAttachmentSprite"];
    ah.__super__ = r;
    ah.prototype = k(r.prototype, {
        draw: function(a) {
            a.translate(this._x, this._y);
            a.rotate(this._rotation);
            a.drawSubTexture(this._texture,
                0, 0, this._textureX, this._textureY, this._textureWidth, this._textureHeight);
            a.scale(this._xScale, this._yScale)
        },
        offset: function(a) { var b = a.x;
            b.set__(b._value - this._x);
            a = a.y;
            a.set__(a._value - this._y) },
        getNaturalWidth: function() { return this._textureWidth },
        getNaturalHeight: function() { return this._textureHeight },
        __class__: ah
    });
    var Kf = function(a) { this.container = new p;
        r.call(this);
        this.skeleton = new Ym(a);
        this.skeleton.updateWorldTransform() };
    g["spinehaxe.platform.flambe.SkeletonSprite"] = Kf;
    Kf.__name__ = ["spinehaxe",
        "platform", "flambe", "SkeletonSprite"
    ];
    Kf.__super__ = r;
    Kf.prototype = k(r.prototype, {
        onAdded: function() { this.owner.addChild(this.container) },
        onRemoved: function() { this.owner.removeChild(this.container) },
        removeAllAttachments: function() { for (var a = this.container.firstChild; null != a;) this.container.removeChild(a), a = a.next },
        onUpdate: function(a) {
            r.prototype.onUpdate.call(this, a);
            this.removeAllAttachments();
            for (var a = this.skeleton.drawOrder, b = 0, c = a.length; b < c;) {
                var d = b++,
                    e = a[d];
                if (null != e.attachment && I.__instanceof(e.attachment,
                        Ud)) { var f;
                    f = I.__cast(e.attachment, Ud);
                    d = f.wrapper;
                    null == d && (d = f.wrapper = new ah(f), d.set_pixelSnapping(0 != (this._flags & 32)), (new p).add(d));
                    d.setAlpha(this.skeleton.a * e.a * f.a);
                    e = e.bone;
                    f = this.skeleton.flipX ? -1 : 1; var l;
                    l = this.skeleton.flipY ? -1 : 1;
                    e.flipX && (f = -f);
                    e.flipY && (l = -l); for (var h = e.parent; null != h;) h.flipX && (f = -f), h.flipY && (l = -l), h = h.parent;
                    this.container.addChild(d.owner);
                    d.setXY(e.worldX, e.worldY);
                    d.setRotation(-e.worldRotation * f * l);
                    d.setScaleXY(e.worldScaleX * f, e.worldScaleY * l) }
            }
        },
        __class__: Kf
    });
    var fj = function(a, b) { null == b && (b = 0.1);
        this.timeScale = 1;
        Kf.call(this, a);
        this.stateData = new en(a);
        this.stateData.defaultMix = b;
        this.state = new cn(this.stateData) };
    g["spinehaxe.platform.flambe.SkeletonAnimation"] = fj;
    fj.__name__ = ["spinehaxe", "platform", "flambe", "SkeletonAnimation"];
    fj.__super__ = Kf;
    fj.prototype = k(Kf.prototype, { onUpdate: function(a) { this.state.update(a * this.timeScale);
            this.state.apply(this.skeleton);
            this.skeleton.updateWorldTransform();
            Kf.prototype.onUpdate.call(this, a) }, __class__: fj });
    var yd =
        function() { this.status = $.Invalid };
    g["stolo.ai.bt.Behavior"] = yd;
    yd.__name__ = ["stolo", "ai", "bt", "Behavior"];
    yd.prototype = { initialize: function() {}, terminate: function() {}, update: function() { return this.status }, reset: function() { this.status = $.Invalid }, abort: function() { this.terminate($.Aborted);
            this.status = $.Aborted }, dispose: function() {}, tick: function(a) { this.status != $.Running && this.initialize();
            this.status = this.update(a);
            this.status != $.Running && this.terminate(this.status); return this.status }, __class__: yd };
    var Ak = function(a, b) { this.status = $.Invalid;
        this._action = a;
        this._params = b };
    g["stolo.ai.bt.Action"] = Ak;
    Ak.__name__ = ["stolo", "ai", "bt", "Action"];
    Ak.__super__ = yd;
    Ak.prototype = k(yd.prototype, { update: function(a) { return null == this._action ? $.Failure : z.field(a, this._action).apply(a, [this._params]) }, dispose: function() { yd.prototype.dispose.call(this);
            this._params = this._action = null }, __class__: Ak });
    var sb = function() { this.status = $.Invalid;
        this.children = new ce };
    g["stolo.ai.bt.Composite"] = sb;
    sb.__name__ = ["stolo",
        "ai", "bt", "Composite"
    ];
    sb.__super__ = yd;
    sb.prototype = k(yd.prototype, { initialize: function() {}, addChild: function(a) { this.children.add(a) }, terminate: function() { for (var a = this.children.iterator(); a.hasNext();) { var b = a.next();
                b.status == $.Running && b.abort() } }, dispose: function() { yd.prototype.dispose.call(this); for (var a = this.children.iterator(); a.hasNext();) a.next().dispose();
            this.children = null }, __class__: sb });
    var Ie = function() { sb.call(this) };
    g["stolo.ai.bt.Selector"] = Ie;
    Ie.__name__ = ["stolo", "ai", "bt", "Selector"];
    Ie.__super__ = sb;
    Ie.prototype = k(sb.prototype, {
        initialize: function() { null != this.children && (this._current = this.children.iterator(), this._currentBehavior = this._current.next()) },
        update: function(a) { for (; null != this._currentBehavior;) { var b = this._currentBehavior.tick(a); if (b != $.Failure) return b; if (this._current.hasNext()) this._currentBehavior = this._current.next();
                else break } return $.Failure },
        terminate: function(a) { sb.prototype.terminate.call(this, a) },
        dispose: function() {
            sb.prototype.dispose.call(this);
            this._currentBehavior =
                this._current = null
        },
        __class__: Ie
    });
    var Bk = function() { sb.call(this) };
    g["stolo.ai.bt.ActiveSelector"] = Bk;
    Bk.__name__ = ["stolo", "ai", "bt", "ActiveSelector"];
    Bk.__super__ = Ie;
    Bk.prototype = k(Ie.prototype, {
        initialize: function() { for (this._current = this.children.iterator(); this._current.hasNext();) this._currentBehavior = this._current.next() },
        update: function(a) { var b = this._currentBehavior;
            Ie.prototype.initialize.call(this);
            a = Ie.prototype.update.call(this, a);
            this._currentBehavior != b && b.terminate($.Aborted); return a },
        __class__: Bk
    });
    var $ = g["stolo.ai.bt.BehaviorStatus"] = { __ename__: ["stolo", "ai", "bt", "BehaviorStatus"], __constructs__: ["Invalid", "Success", "Running", "Failure", "Aborted"] };
    $.Invalid = ["Invalid", 0];
    $.Invalid.toString = s;
    $.Invalid.__enum__ = $;
    $.Success = ["Success", 1];
    $.Success.toString = s;
    $.Success.__enum__ = $;
    $.Running = ["Running", 2];
    $.Running.toString = s;
    $.Running.__enum__ = $;
    $.Failure = ["Failure", 3];
    $.Failure.toString = s;
    $.Failure.__enum__ = $;
    $.Aborted = ["Aborted", 4];
    $.Aborted.toString = s;
    $.Aborted.__enum__ = $;
    var Ta =
        function() {};
    g["stolo.ai.bt.BehaviorTree"] = Ta;
    Ta.__name__ = ["stolo", "ai", "bt", "BehaviorTree"];
    Ta.getBehaviorData = function(a, b) { null == b && (b = Ta.defaultPack); var c = b + "_" + a; if (Ta._cache.exists(c)) return Ta._cache.get(c); var d = E.getJSON(a, b);
        Ta._cache.set(c, d);
        d; if (d instanceof Array && null == d.__enum__) throw "Unsupported format: Array"; return d };
    Ta.fromData = function(a) { if (null != a && null != a.type) return Ta.createBehavior(a); var b = new Ie;
        null != a && Ta.createComposite(a, b); return b };
    Ta.createComposite = function(a,
        b) { for (var c, d = 0, e = a.behaviors.length; d < e;) c = d++, c = a.behaviors[c], b.addChild(Ta.createBehavior(c)) };
    Ta.createBehavior = function(a) {
        switch (a.type) {
            case "action":
                return new Ak(a.action, a.params);
            case "sequence":
                var b = new Ck;
                Ta.createComposite(a, b);
                return b;
            case "random":
                return b = new Dk, Ta.createComposite(a, b), b;
            case "parallel":
                var b = null != a.success ? Ta.policyFromString(a.success) : Kc.RequireOne,
                    c;
                c = null != a.failure ? Ta.policyFromString(a.failure) : Kc.RequireOne;
                b = new Ek(b, c);
                Ta.createComposite(a, b);
                return b;
            case "repeat":
                return b = Ta.createBehavior(a.behavior), a = null != a.count ? y.parseInt(a.count) : 1, new Fk(b, a);
            case "inverter":
                return a = Ta.createBehavior(a.behavior), new Gk(a);
            case "succeeder":
                return a = Ta.createBehavior(a.behavior), new Hk(a);
            case "active":
                return b = new Bk, Ta.createComposite(a, b), b;
            case "selector":
                return b = new Ie, Ta.createComposite(a, b), b;
            case "wait":
                return new Ik(null != a.time ? a.time : 1);
            case "file":
                return a = Ta.getBehaviorData(a.file, a.pack), Ta.fromData(a);
            default:
                throw "Unrecognized behavior type : " +
                    y.string(a.type);
        }
    };
    Ta.policyFromString = function(a) { switch (a) {
            case "one":
                return Kc.RequireOne;
            case "all":
                return Kc.RequireAll;
            default:
                throw "Invalid policy, expected `one` or `all`."; } };
    var hd = function(a) { this.status = $.Invalid;
        this.child = a };
    g["stolo.ai.bt.Decorator"] = hd;
    hd.__name__ = ["stolo", "ai", "bt", "Decorator"];
    hd.__super__ = yd;
    hd.prototype = k(yd.prototype, { terminate: function() { this.child.status == $.Running && this.child.abort() }, dispose: function() { yd.prototype.dispose.call(this);
            this.child = null }, __class__: hd });
    var Gk = function(a) { hd.call(this, a) };
    g["stolo.ai.bt.Inverter"] = Gk;
    Gk.__name__ = ["stolo", "ai", "bt", "Inverter"];
    Gk.__super__ = hd;
    Gk.prototype = k(hd.prototype, { update: function(a) { a = this.child.tick(a); switch (a[1]) {
                case 1:
                    return $.Failure;
                case 3:
                    return $.Success } return a }, __class__: Gk });
    var Kc = g["stolo.ai.bt.Policy"] = { __ename__: ["stolo", "ai", "bt", "Policy"], __constructs__: ["RequireOne", "RequireAll"] };
    Kc.RequireOne = ["RequireOne", 0];
    Kc.RequireOne.toString = s;
    Kc.RequireOne.__enum__ = Kc;
    Kc.RequireAll = ["RequireAll",
        1
    ];
    Kc.RequireAll.toString = s;
    Kc.RequireAll.__enum__ = Kc;
    var Ek = function(a, b) { sb.call(this);
        this._successPolicy = a;
        this._failurePolicy = b };
    g["stolo.ai.bt.Parallel"] = Ek;
    Ek.__name__ = ["stolo", "ai", "bt", "Parallel"];
    Ek.__super__ = sb;
    Ek.prototype = k(sb.prototype, {
        update: function(a) {
            for (var b = 0, c = 0, d = this.children.iterator(); d.hasNext();) {
                var e = d.next();
                e.status == $.Success || e.status == $.Failure || e.tick(a);
                switch (e.status[1]) {
                    case 1:
                        b += 1;
                        if (this._successPolicy == Kc.RequireOne) return $.Success;
                        break;
                    case 3:
                        if (c += 1,
                            this._failurePolicy == Kc.RequireOne) return $.Failure
                }
            }
            return this._failurePolicy == Kc.RequireAll && c == this.children.length ? $.Failure : this._successPolicy == Kc.RequireAll && b == this.children.length ? $.Success : $.Running
        },
        __class__: Ek
    });
    var Dk = function() { sb.call(this) };
    g["stolo.ai.bt.Random"] = Dk;
    Dk.__name__ = ["stolo", "ai", "bt", "Random"];
    Dk.__super__ = sb;
    Dk.prototype = k(sb.prototype, {
        initialize: function() { var a = pf.array(this.children),
                b = Math.floor(Math.random() * a.length);
            this._currentBehavior = a[b] },
        update: function(a) { return this._currentBehavior.tick(a) },
        terminate: function(a) { sb.prototype.terminate.call(this, a) },
        dispose: function() { sb.prototype.dispose.call(this);
            this._currentBehavior = null },
        __class__: Dk
    });
    var Fk = function(a, b) { null == b && (b = 0);
        this.count = this._counter = 0;
        hd.call(this, a);
        this.count = b };
    g["stolo.ai.bt.Repeat"] = Fk;
    Fk.__name__ = ["stolo", "ai", "bt", "Repeat"];
    Fk.__super__ = hd;
    Fk.prototype = k(hd.prototype, {
        initialize: function() { this._counter = 0 },
        update: function(a) {
            try {
                for (;;) {
                    switch (this.child.tick(a)[1]) {
                        case 2:
                            throw "__break__";
                        case 3:
                            return $.Failure;
                        default:
                            if (++this._counter == this.count) return $.Success
                    }
                    this.child.reset()
                }
            } catch (b) { if ("__break__" != b) throw b; }
            return $.Invalid
        },
        __class__: Fk
    });
    var Ck = function() { sb.call(this) };
    g["stolo.ai.bt.Sequence"] = Ck;
    Ck.__name__ = ["stolo", "ai", "bt", "Sequence"];
    Ck.__super__ = sb;
    Ck.prototype = k(sb.prototype, {
        initialize: function() { null != this.children && (this._current = this.children.iterator(), this._currentBehavior = this._current.next()) },
        update: function(a) {
            for (; null != this._currentBehavior;) {
                var b = this._currentBehavior.tick(a);
                if (b != $.Success) return b;
                if (this._current.hasNext()) this._currentBehavior = this._current.next();
                else break
            }
            return $.Success
        },
        terminate: function(a) { sb.prototype.terminate.call(this, a) },
        dispose: function() { sb.prototype.dispose.call(this);
            this._currentBehavior = this._current = null },
        __class__: Ck
    });
    var Hk = function(a) { hd.call(this, a) };
    g["stolo.ai.bt.Succeeder"] = Hk;
    Hk.__name__ = ["stolo", "ai", "bt", "Succeeder"];
    Hk.__super__ = hd;
    Hk.prototype = k(hd.prototype, {
        update: function(a) { a = this.child.tick(a); switch (a[1]) {
                case 3:
                    return $.Success } return a },
        __class__: Hk
    });
    var Ik = function(a) { this.status = $.Invalid;
        this._time = a };
    g["stolo.ai.bt.Wait"] = Ik;
    Ik.__name__ = ["stolo", "ai", "bt", "Wait"];
    Ik.__super__ = yd;
    Ik.prototype = k(yd.prototype, { initialize: function() { this._countTimer = this._time }, update: function(a) { this._countTimer -= a.behaviorTickRate; return 0 >= this._countTimer ? $.Success : $.Running }, __class__: Ik });
    var B = function() {};
    g["stolo.animation.Animate"] = B;
    B.__name__ = ["stolo", "animation", "Animate"];
    B.delayCallTo = function(a, b, c) {
        if (0 >= b) return a(), null;
        null ==
            c && (c = x.root);
        var d = c._compMap.Script_66;
        null == d && (d = new Ob, c.add(d));
        a = new pc([new ub(b), new cb(a)]);
        d.run(a);
        return a
    };
    B.kill = function(a) { B.removeSequence(a) };
    B.killAll = function() { for (var a = B.tweens.iterator(); a.hasNext();) a.next().dispose();
        B.tweens = new Fa };
    B.removeSequence = function(a) { if (null != B.tweens.h.__keys__[a.__id__]) { var b = B.tweens.h[a.__id__];
            B.tweens.remove(a);
            b.dispose() } };
    B.to = function(a, b, c, d) {
        if (null == a) return null;
        c = B.checkTweenParams(c, d);
        B.kill(a);
        d = new vh(a, c.entity, c.delay);
        d.to(b, c.time, c.ease, 0, c.origin);
        B.tweens.set(a, d);
        d.addListener(d.onStart, c.onStart);
        d.run(null, c.onComplete);
        return d
    };
    B.from = function(a, b, c, d) { if (null == a) return null;
        c = B.checkTweenParams(c, d);
        B.kill(a);
        d = new vh(a, c.entity, c.delay);
        d.from(b, c.time, c.ease, 0, c.origin);
        B.tweens.set(a, d);
        d.addListener(d.onStart, c.onStart);
        d.run(null, c.onComplete); return d };
    B.checkTweenParams = function(a, b) {
        0 < a && (a = { time: a });
        null == a && (a = {});
        null == a.time && (a.time = B.DefaultTime);
        null != b && (a.ease = b);
        null == a.ease && (a.ease =
            B.DefaultEase);
        return a
    };
    B.runTemplate = function(a, b, c) {
        for (var d = null, e = 0; e < a.length;) {
            var f = a[e];
            ++e;
            if (null != f.then) { if (null == d) throw "'then' can be used only after 'to' or 'from' sequences";
                d.then(f.then, f.time, f.ease, f.delay, null != c ? c.origin : null) } else if (null != f.to || null != f.from)
                if (null != c ? (d = { time: f.time, ease: f.ease }, d.delay = c.delay, d.onStart = c.onStart, d.onComplete = c.onComplete, d.origin = c.origin) : d = f, null != f.to) d = B.to(b, f.to, d);
                else if (null != f.from) d = B.from(b, f.from, d);
            else throw "Unsupported tween data:" +
                y.string(f);
            else null != f.delay && 0 < f.delay && d.addDelay(f.delay)
        }
        return d
    };
    var Zc = function() {};
    g["stolo.animation.Animations"] = Zc;
    Zc.__name__ = ["stolo", "animation", "Animations"];
    Zc.scaleIn = function(a, b, c) { null == b && (b = 1); if (null == a) throw "Target cannot be null";
        null == c && (c = {});
        0 <= c.time || (c.time = 0.4);
        null == c.ease && (c.ease = D.quintOut);
        a.setScale(0); return B.to(a, { scaleX: b, scaleY: b }, c) };
    Zc.scaleOut = function(a, b) {
        if (null == a) throw "Target cannot be null";
        null == b && (b = {});
        0 <= b.time || (b.time = 0.35);
        null == b.ease &&
            (b.ease = D.quintIn);
        return B.to(a, { scaleX: 0, scaleY: 0 }, b)
    };
    Zc.shake = function(a, b, c, d, e) { null == d && (d = 2);
        null == c && (c = 2);
        null == b && (b = 2); var f = a.owner._compMap.Script_66;
        null == f && (f = new Ob);
        a.owner.add(f);
        a = new pc([new ui(c, d, b), new ub(b)]);
        null != e && a.add(new cb(e));
        f.run(a) };
    var pd = function(a, b, c) { null == c && (c = 0);
        null == b && (b = 0);
        null == a && (a = 0);
        this.x = new ca(a);
        this.y = new ca(b);
        this.z = new ca(c) };
    g["stolo.animation.behaviors.AnimatedPoint"] = pd;
    pd.__name__ = ["stolo", "animation", "behaviors", "AnimatedPoint"];
    pd.__interfaces__ = [Wf];
    pd.prototype = {
        dispose: function() { this.z = this.y = this.x = null },
        setXY: function(a, b, c) { null == c && (c = !1);
            null == b && (b = 0);
            null == a && (a = 0);
            this.x.set__(a);
            this.y.set__(b);
            c && (this.x.set_behavior(null), this.y.set_behavior(null)) },
        update: function(a) { this.x.update(a);
            this.y.update(a);
            this.z.update(a); return 0 },
        isComplete: function() {
            return null != this.x._behavior && !this.x._behavior.isComplete() || null != this.y._behavior && !this.y._behavior.isComplete() || null != this.z._behavior && !this.z._behavior.isComplete() ?
                !1 : !0
        },
        __class__: pd
    };
    var Wj = function(a, b, c) { null == c && (c = !1);
        this._showIn = this._hideIn = 0;
        this.isVisible = this.isShowing = this.isHiding = !1;
        this.onHide = new ga;
        this.onShow = new ga;
        i.call(this);
        this.isVisible = c;
        this.showAnimation = a;
        this.hideAnimation = b };
    g["stolo.animation.components.AnimatedComponent"] = Wj;
    Wj.__name__ = ["stolo", "animation", "components", "AnimatedComponent"];
    Wj.__super__ = i;
    Wj.prototype = k(i.prototype, {
        get_name: function() { return "AnimatedComponent_37" },
        onUpdate: function(a) {
            i.prototype.onUpdate.call(this,
                a);
            0 < this._showIn ? (this._showIn -= a, 0 > this._showIn && this.show(this._showSequence)) : 0 < this._hideIn && (this._hideIn -= a, 0 > this._hideIn && this.hide(this._hideSequence))
        },
        onAdded: function() { i.prototype.onAdded.call(this) },
        dispose: function() { i.prototype.dispose.call(this);
            this.cancelSequence() },
        show: function(a, b) {
            null == b && (b = 0);
            0 < b ? (this._hideIn = 0, this._showIn = b, this._showSequence = a) : !this.isVisible && !this.isShowing && (this.isShowing = this.isVisible = !0, this.isHiding = !1, this._showIn = this._hideIn = 0, null == a && null !=
                this.showAnimation && (a = this.showAnimation()), this.startShow(a))
        },
        startShow: function(a) { this.cancelSequence();
            this.currentSequence = a;
            this.onShow.emit();
            null != a ? a.run(this.owner, m(this, this.showComplete)) : this.showComplete() },
        showComplete: function() { this.isShowing = !1 },
        hide: function(a, b) {
            null == b && (b = 0);
            0 < b ? (this._showIn = 0, this._hideIn = b, this._hideSequence = a) : this.isVisible && !this.isHiding && (this.isVisible = !1, this.isHiding = !0, this.isShowing = !1, this._showIn = this._hideIn = 0, null == a && null != this.hideAnimation &&
                (a = this.hideAnimation()), this.startHide(a))
        },
        startHide: function(a) { this.cancelSequence();
            this.currentSequence = a;
            this.onHide.emit();
            null != a ? a.run(this.owner, m(this, this.hideComplete)) : this.hideComplete() },
        hideComplete: function() { this.isHiding = !1 },
        cancelSequence: function() { null != this.currentSequence && (this.currentSequence.cancel(), this.currentSequence = null) },
        __class__: Wj
    });
    var tc = function(a, b) {
        null == b && (b = 0);
        this.currentIndex = 0;
        this._disposables = new za;
        this.onComplete = new ga;
        this.onStart = new ga;
        this.isRunning =
            this.isPaused = !1;
        pc.call(this);
        null != a && (this._entity = a);
        this.setDelay(b);
        this.add(new cb((Ra = this.onStart, m(Ra, Ra.emit))))
    };
    g["stolo.animation.sequences.AnimationSequence"] = tc;
    tc.__name__ = ["stolo", "animation", "sequences", "AnimationSequence"];
    tc.__super__ = pc;
    tc.prototype = k(pc.prototype, {
        dispose: function() {
            this._ownScript && null != this._script && (null != this._script.owner && this._script.owner.dispose(), this._script.stopAll(), this._script.dispose());
            this.onComplete = this.onStart = this._entity = this._script =
                null;
            this.isRunning = !1;
            this.removeAll();
            null != this._disposables && this._disposables.dispose();
            this._disposables = null
        },
        cancel: function() { this.complete() },
        update: function(a, b) { if (this.isPaused) return -1; var c = pc.prototype.update.call(this, a, b);
            this.currentIndex = this._idx; return c },
        addActions: function(a) { if (null == a) return null; for (var b = 0; b < a.length;) { var c = a[b];++b;
                this.add(c) } return this },
        add: function(a) {
            if (this.isRunning) {
                var b = this._runningActions.pop();
                pc.prototype.add.call(this, a);
                pc.prototype.add.call(this,
                    b)
            } else pc.prototype.add.call(this, a)
        },
        setDelay: function(a) { return this.addDelay(a) },
        addDelay: function(a) { null == a && (a = 0); if (0 >= a) return this;
            this.add(new ub(a)); return this },
        run: function(a, b) { null != a && (this._entity = a);
            this.currentIndex = this._idx = 0;
            this._ownScript = !0;
            this._script = new Ob;
            this._entity.addChild((new p).add(this._script));
            this.add(new cb(m(this, this.complete)));
            null != b && this.addListener(this.onComplete, b);
            this.isRunning = !0;
            this._script.run(this); return this },
        addListener: function(a, b) {
            null !=
                b && this._disposables.add(a.connect(b))
        },
        complete: function() { this.isRunning = !1;
            this._ownScript && null != this._script && this._script.stopAll();
            null != this.onComplete && this.onComplete.emit();
            this.dispose() },
        __class__: tc
    });
    var wb = function(a, b) { null == b && (b = 0);
        tc.call(this, a, b) };
    g["stolo.animation.sequences.RelativeSequence"] = wb;
    wb.__name__ = ["stolo", "animation", "sequences", "RelativeSequence"];
    wb.__super__ = tc;
    wb.prototype = k(tc.prototype, {
        init: function(a, b, c, d, e) {
            null == e && (e = 0);
            null == d && (d = !1);
            null == c && (c = !0);
            wb.lastDest = null;
            this.appendActions(a, b);
            d && (a = a.reverse(), a.shift(), this.appendActions(a, b), this.appendActions([{ x: 0, y: 0 }], b));
            (c || d) && this.appendActions([{ x: 0, y: 0 }], b);
            0 < e && this.add(new ub(e));
            return this
        },
        appendActions: function(a, b) {
            for (var c = 0; c < a.length;) {
                var d = a[c];
                ++c;
                Object.prototype.hasOwnProperty.call(d, "delay") && this.add(new ub(d.delay));
                var e = Object.prototype.hasOwnProperty.call(d, "x"),
                    f = Object.prototype.hasOwnProperty.call(d, "y");
                e && f && (e = new X(d.x + b.offsetX, d.y + b.offsetY), this.add(this.getMovementAction(d,
                    b.x, b.y, e, wb.lastDest, b)), wb.lastDest = e)
            }
            return this
        },
        getMovementAction: function(a, b, c, d, e, f) { var l = wb.DefaultMoveSpeed,
                h = wb.DefaultMovePPS,
                g = wb.DefaultMoveEase,
                i = wb.DefaultMoveTime,
                j = !1;
            0 < a.time ? i = a.time : j = !0;
            0 < a.pps && (h = a.pps);
            0 < a.speed && (l = a.speed);
            j && (a = null != e ? Math.abs(e.x - d.x) + Math.abs(e.y - d.y) : Math.abs(b._value - d.x) + Math.abs(c._value - d.y), i = a / h - 0.1 * (a / h) * l, 0 >= i && (i = wb.DefaultMoveTime));
            null != f && null != f.ease && (g = f.ease); return new ag([new Sd(b, d.x, i, g), new Sd(c, d.y, i, g)]) },
        __class__: wb
    });
    var Af =
        function(a) { tc.call(this, a) };
    g["stolo.animation.sequences.ShakeSequence"] = Af;
    Af.__name__ = ["stolo", "animation", "sequences", "ShakeSequence"];
    Af.shake = function(a, b, c, d, e) { null == d && (d = 60);
        null == c && (c = 1);
        a = new Af(a);
        a.sineShake(b, c, d, e); return a };
    Af.__super__ = tc;
    Af.prototype = k(tc.prototype, {
        sineShake: function(a, b, c, d) {
            null == c && (c = 60);
            null == b && (b = 1);
            if (null == a) throw "No shakeProp set!";
            c = new Ea(0.5 * -c, 0.5 * c, 0.05);
            c.speed.animateTo(0.3 * b, 0.75 * b, D.sineInOut);
            a.set_behavior(c);
            this.add(new ub(0.75 * b));
            this.add(new Sd(a,
                0, 0.25 * b, D.sineInOut));
            this.run(null, d)
        },
        __class__: Af
    });
    var vh = function(a, b, c) { null == c && (c = 0);
        this._target = a;
        this._entity = b;
        null == b && (b = a.owner);
        null == b && (b = x.root);
        tc.call(this, b, c) };
    g["stolo.animation.sequences.TweenSequence"] = vh;
    vh.__name__ = ["stolo", "animation", "sequences", "TweenSequence"];
    vh.__super__ = tc;
    vh.prototype = k(tc.prototype, {
        dispose: function() {
            tc.prototype.dispose.call(this);
            null != this._target && (null != B.tweens.h.__keys__[this._target.__id__] && B.tweens.remove(this._target), this._target =
                null)
        },
        to: function(a, b, c, d, e) { null == d && (d = 0);
            null == c && (c = B.DefaultEase); if (0 > b || null == b) b = B.DefaultTime;
            this.addDelay(d);
            this.add(this.getActions(a, b, c, !1, e)); return this },
        from: function(a, b, c, d, e) { null == d && (d = 0);
            null == c && (c = B.DefaultEase); if (0 > b || null == b) b = B.DefaultTime;
            this.addDelay(d);
            this.add(this.getActions(a, b, c, !0, e)); return this },
        then: function(a, b, c, d, e) { null == d && (d = 0);
            null == c && (c = B.DefaultEase); if (0 > b || null == b) b = B.DefaultTime;
            this.addDelay(d);
            this.add(this.getActions(a, b, c, !1, e)); return this },
        getActions: function(a, b, c, d, e) { null == d && (d = !1); for (var f = [], l, h, g = 0, i = z.fields(a); g < i.length;) { var j = i[g];++g;
                l = z.field(this._target, j); if (null == l) throw "Cannot find property '" + j + "' to animate"; var k = z.field(a, j);
                h = l._value;
                null != e && Object.prototype.hasOwnProperty.call(e, j) && (h = z.field(e, j)); "string" == typeof k && (k = K.mod(h, k));
                d && (l.set__(k), k = h);
                f.push(new Sd(l, k, b, c)) } return new ag(f) },
        __class__: vh
    });
    var kn = function(a) {
        this.parts = [];
        this.type = "default";
        this.code = "0";
        this.id = "unknown";
        K.configure(this,
            a);
        this.id = this.id.toLowerCase();
        this.parts = [];
        for (var b = 0, a = I.__cast(a.parts, Array); b < a.length;) { var c = a[b];++b; if (!("leg_knee_b_item" == c.attachment || "leg_knee_f_item" == c.attachment)) { var d = new jn;
                d.attachment = c.attachment;
                d.url = c.url;
                d.offset = c.offset;
                this.parts.push(d) } }
    };
    g["stolo.customization.CustomizationItem"] = kn;
    kn.__name__ = ["stolo", "customization", "CustomizationItem"];
    kn.prototype = { __class__: kn };
    var jn = function() {};
    g["stolo.customization.CustomizationItemPart"] = jn;
    jn.__name__ = ["stolo", "customization",
        "CustomizationItemPart"
    ];
    jn.prototype = { __class__: jn };
    var fa = function() {};
    g["stolo.customization.CustomizationManager"] = fa;
    fa.__name__ = ["stolo", "customization", "CustomizationManager"];
    fa.init = function() { fa.load() };
    fa.getAll = function() { return fa._all };
    fa.getByType = function(a) { return fa._byType.get(a) };
    fa.getById = function(a) { return fa._byId.get(a) };
    fa.load = function() {
        for (var a = E.getPack(fa.packName).get_manifest().iterator(); a.hasNext();)
            for (var b = a.next(), b = E.getJSON(b.name, fa.packName), c = 0; c < b.length;) {
                var d =
                    b[c];
                ++c;
                fa.create(d)
            }
        E.disposePack(fa.packName)
    };
    fa.create = function(a) { var b = new kn(a); if (null == b.id) throw "CustomizationItem with no id" + y.string(a);
        fa.register(b) };
    fa.register = function(a) { fa._all.push(a);
        fa._byId.set(a.id, a); var b = fa._byType.get(a.type);
        null == b && (b = [], fa._byType.set(a.type, b));
        b.push(a);
        b = fa._byCode.get(a.type);
        null == b && (b = new M, fa._byCode.set(a.type, b));
        b.set(a.code, a) };
    fa.getAssetPack = function(a, b) {
        var c = fa.getAssetPackData(a);
        0 == c.files.length ? b(a, null) : E.createDynamicPack(c.name,
            c.files,
            function(c) { b(a, c) }, !0)
    };
    fa.getAssetPackData = function(a) { for (var b = [], c = 0, d = a.parts; c < d.length;) { var e = d[c];++c;
            null != e.url && b.push(e.url) } return { name: fa.getItemAssetPackName(a), files: b, useFileAsEntryName: !0 } };
    fa.getItemAssetPackName = function(a) { return "customizationItem_" + a.id };
    fa.saveInventory = function(a, b) { return null == a || "" == a ? !1 : va.set(fa.savePrefix + a, b) };
    fa.loadInventory = function(a) { return va.get(fa.savePrefix + a, null) };
    var xc = function() {
        this._isDirty = !1;
        this._children = [];
        this.depthSorter =
            new ln;
        r.call(this)
    };
    g["stolo.display.Container"] = xc;
    xc.__name__ = ["stolo", "display", "Container"];
    xc.__super__ = r;
    xc.prototype = k(r.prototype, {
        onStop: function() { r.prototype.onStop.call(this);
            this._children = null },
        onUpdate: function() { this._isDirty && this.sortDepth() },
        addChild: function(a) { this._children.push(a);
            this.owner.addChild(a); return a },
        removeChild: function(a) { H.remove(this._children, a);
            this.owner.removeChild(a); return a },
        setChildIndex: function(a, b) {
            return 0 <= b && b <= this._children.length && a.parent ==
                this.owner ? (H.remove(this._children, a), this._children.splice(b, 0, a), this._isDirty = !0, a) : null
        },
        getChildren: function() { return this._children },
        getChildIndex: function(a) { for (var b = 0, c = this._children.length; b < c;) { var d = b++; if (this._children[d] == a) return d } return -1 },
        sortDepth: function() { this.depthSorter.reorder(this._children, this.owner);
            this._isDirty = !1 },
        bringToFront: function(a) { this.owner.addChild(a);
            H.remove(this._children, a);
            this._children.push(a) },
        sendToBack: function(a) {
            this.owner.addChild(a, !1);
            H.remove(this._children,
                a);
            this._children.unshift(a)
        },
        __class__: xc
    });
    var ln = function() { this.addHeight = !0 };
    g["stolo.display.DepthSorter"] = ln;
    ln.__name__ = ["stolo", "display", "DepthSorter"];
    ln.prototype = { reorder: function(a, b) { for (var c = 0; c < a.length;) { var d = a[c];++c;
                b.addChild(d) } }, __class__: ln };
    var Jk = function(a, b) { null == b && (b = 2);
        null == a && (a = 16711680);
        Wa.call(this, a, 100, b) };
    g["stolo.display.Line"] = Jk;
    Jk.__name__ = ["stolo", "display", "Line"];
    Jk.__super__ = Wa;
    Jk.prototype = k(Wa.prototype, {
        fromTo: function(a, b, c, d) {
            this.gap = A.gap(a,
                b, c, d, this.gap);
            this.setXY(this.gap.x, this.gap.y);
            this.scaleX.set__(this.gap.width / 100);
            this.rotation.set__(this.gap.rotation)
        },
        __class__: Jk
    });
    var Kk = function() { this.skewX = this.skewY = 0;
        i.call(this) };
    g["stolo.display.Skew"] = Kk;
    Kk.__name__ = ["stolo", "display", "Skew"];
    Kk.__super__ = i;
    Kk.prototype = k(i.prototype, {
        get_name: function() { return "Skew_77" },
        dispose: function() { i.prototype.dispose.call(this);
            this._sprite = null },
        onStart: function() { i.prototype.onStart.call(this);
            this._sprite = this.owner._compMap.Sprite_2 },
        onUpdate: function(a) { i.prototype.onUpdate.call(this, a); if (null != this._sprite) { var a = this._sprite.getLocalMatrix(),
                    b = 0,
                    c = 1,
                    d = 0,
                    e = 1,
                    f = -3.141592653589793 * this.skewX / 180,
                    l = 3.141592653589793 * this.skewY / 180;
                0 != f && (b = Math.sin(f), c = Math.cos(f));
                0 != l && (d = Math.sin(l), e = Math.cos(l));
                a.set(e * this._sprite.scaleX._value, d * this._sprite.scaleX._value, -b * this._sprite.scaleY._value, c * this._sprite.scaleY._value, a.m02, a.m12) } },
        __class__: Kk
    });
    var L = function() {};
    g["stolo.ensys.actor.ActorFactory"] = L;
    L.__name__ = ["stolo",
        "ensys", "actor", "ActorFactory"
    ];
    L.reset = function() { for (var a = L._registeredComponents.keys(); a.hasNext();) { var b = a.next();
            L._registeredComponents.remove(b) } for (a = L._componentMap.keys(); a.hasNext();) b = a.next(), L._componentMap.remove(b); for (a = L._templateMap.keys(); a.hasNext();) b = a.next(), L._templateMap.remove(b) };
    L.create = function(a) {
        var b = new p,
            c = L.getTemplate(L.getTemplateName(a, !0));
        if (null != c && (c.template.onlyHighEnd && o.slow || c.template.onlySlowEnd && !o.slow)) return null;
        a = K.merge(c, a, !0);
        if (null ==
            a) return null;
        L.onActorData.emit(a);
        return L.compose(b, a)
    };
    L.compose = function(a, b) { for (var c = 0, d = z.fields(b); c < d.length;) { var e = d[c];++c; var f = z.field(b, e); if (!(null == f || !1 == f) && null == f.debug) { f = L.createComponent(e, f); if (null == f) throw "ActorFactory: Unknown component '" + e + "'";
                a.add(f) } } null == a._compMap.TransformComponent_70 && a.add(new Je); return a };
    L.registerComponent = function(a, b) { L._registeredComponents.set(a, b); var c = ia.getClassName(b);
        L._componentMap.set(c, a) };
    L.getComponentName = function(a) {
        a =
            ia.getClassName(ia.getClass(a));
        return L._componentMap.get(a)
    };
    L.getComponentsIds = function() { for (var a = [], b = L._registeredComponents.iterator(); b.hasNext();) { var c = b.next();
            a.push(ia.getClassName(c)) } return a };
    L.getTemplateIds = function() { for (var a = [], b = L._templateMap.iterator(); b.hasNext();) { var c = b.next();
            a.push(c.template.key) } return a };
    L.getTemplate = function(a, b) {
        null == b && (b = !0);
        L._lastTempalte = a;
        var c = L._templateMap.get(a);
        if (b && null != c && Object.prototype.hasOwnProperty.call(c.template, "parent")) {
            var d;
            d = L._templateMap.get(c.template.parent);
            if (null == d) throw "parent template not found: '" + y.string(c.template.parent) + "' for template '" + a + "'";
            c = K.merge(d, c, !0)
        }
        return c
    };
    L.addTemplate = function(a) { var b = L.getTemplateName(a);
        null != b && (L._templateMap.exists(b) ? null : L._templateMap.set(b, a), L.onTemplateAdded.emit(a)) };
    L.getTemplateName = function(a, b) {
        null == b && (b = !1);
        var c = z.getProperty(a, "template");
        if (null != c && null != c.key) {
            c = c.key;
            if (b && !L._templateMap.exists(c)) throw "ActorFactory: Unknown template '" + c +
                "'";
            return c
        }
        return null
    };
    L.createComponent = function(a, b) { var c; if ("string" == typeof a) { if (c = L._registeredComponents.get(a), null == c) return null } else c = a; return L.initComponent(ia.createInstance(c, []), b) };
    L.initComponent = function(a, b) { var c = L.getComponentDefaults(a);
        null != c && (b = null != b ? K.merge(c, b, !0) : c);
        L.applyProps(a, b); return a };
    L.applyProps = function(a, b) { for (var c = 0, d = z.fields(b); c < d.length;) { var e = d[c];++c; var f = z.field(b, e);
            z.setProperty(a, e, f) } return a };
    L.getComponentDefaults = function(a) {
        return z.getProperty(ia.getClass(a),
            "DEFAULTS")
    };
    var Xc = function() { this.onAnimStart = new ga;
        this.onCreate = new ga;
        this.locked = !1;
        this.fps = -1;
        this.loop = !0;
        this.delay = 0;
        this.autoRemove = !1;
        J.call(this) };
    g["stolo.ensys.components.AnimationComponent"] = Xc;
    Xc.__name__ = ["stolo", "ensys", "components", "AnimationComponent"];
    Xc.__super__ = J;
    Xc.prototype = k(J.prototype, {
        onAdded: function() { this.createAnim();
            J.prototype.onAdded.call(this) },
        onUpdate: function(a) { J.prototype.onUpdate.call(this, a);
            0 < this._timeout && (this._timeout -= a, 0 > this._timeout && this._timeoutCallback()) },
        createAnim: function() { this.animation = new fb(this.asset, this.pack, null, !1, this.overrides);
            this.owner.addChild((new p).add(this.animation));
            this.onCreate.emit() },
        initStart: function() { this.animation.setAnchor(0, 0);
            0 < this.fps && (this.animation.get_spritesheet().fps = this.fps); if (this.autoRemove) this.animation.animComplete.connect(m(this, this.onAutoRemove)).once();
            0 < this.delay ? (this.setTimeout(m(this, this.startAnim), this.delay), this.animation.set_visible(!1)) : this.startAnim();
            this.initEnd() },
        startAnim: function() {
            null ==
                this.start && (this.start = this.animation.get_spritesheet().defaultAnim);
            var a = this.start; - 1 != this.start.indexOf(",") && (a = this.start.split(","));
            this.animation.set_visible(!0);
            a = this.animation.gotoAndPlay(a);
            !this.loop && null != a && (a.loop = !1);
            this.onAnimStart.emit()
        },
        onAutoRemove: function() {!ba.inEditor() && this.autoRemove && (ba.getSystemEntity(this.owner), ba.getSystemEntity(this.owner).getComponent("ActorSystem_54").removeActor(this.owner)) },
        enableCulling: function(a) {
            J.prototype.enableCulling.call(this,
                a);
            this.animation.set_isPlaying(!a)
        },
        set: function(a, b, c, d) { null == d && (d = !0);
            null == c && (c = !1); if (this.locked) return this._unlockTo = a, this.animation.animName;
            d && null != this.suffix && (a += this.suffix);
            this.animation.gotoAndPlay(a, b);
            c && (this.locked = !0, this.animation.animComplete.connect(m(this, this.onLockedAnimComplete)).once()); return this.animation.animName },
        onLockedAnimComplete: function() { this.unlock() },
        unlock: function(a) { this.locked = !1;
            null == a && (a = this._unlockTo);
            null != a && this.set(a);
            this._unlockTo = null },
        getNaturalWidth: function() { return null != this.animation ? this.animation.getNaturalWidth() : 100 },
        getNaturalHeight: function() { return null != this.animation ? this.animation.getNaturalHeight() : 100 },
        set_pointerEnabled: function(a) { null != this.animation && this.animation.set_pointerEnabled(a); return J.prototype.set_pointerEnabled.call(this, a) },
        setTimeout: function(a, b) { this._timeout = b;
            this._timeoutCallback = a },
        __class__: Xc
    });
    var Lk = function() { this.target = "ANY_BODY";
        this.enabled = !0;
        i.call(this) };
    g["stolo.ensys.components.BouncerComponent"] =
        Lk;
    Lk.__name__ = ["stolo", "ensys", "components", "BouncerComponent"];
    Lk.__super__ = i;
    Lk.prototype = k(i.prototype, {
        get_name: function() { return "BouncerComponent_97" },
        onStart: function() {
            i.prototype.onStart.call(this);
            ba.getSystemEntity(this.owner);
            this._physicsSystem = ba.getSystemEntity(this.owner).getComponent("PhysicSystem_31");
            null != this.owner._compMap.PhysicsComponent_44 && this.owner._compMap.PhysicsComponent_44.addContactType("BOUNCER");
            this._physicsSystem.addContactListener(V.BEGIN, da.ANY, this.target, "BOUNCER",
                this.owner, m(this, this.onContactBegin))
        },
        onStop: function() { this._physicsSystem.removeContactListener(V.BEGIN, da.ANY, this.target, "BOUNCER", this.owner);
            this._physicsSystem = null;
            i.prototype.onStop.call(this) },
        onContactBegin: function(a, b) {
            if (this.enabled && null != b) {
                var c = a._compMap.PhysicsComponent_44;
                if (null != c) {
                    var d = c.getVelocity();
                    if (0 < this.impulse) {
                        var e = -Math.cos(b.angle) * this.impulse,
                            e = Math.round(100 * e) / 100,
                            f = -Math.sin(b.angle) * this.impulse,
                            f = Math.round(100 * f) / 100;
                        c.setVelocity(function() {
                            d.zpp_inner.validate();
                            return d.zpp_inner.x
                        }(this) + e, function() { d.zpp_inner.validate(); return d.zpp_inner.y }(this) + f)
                    } else 0 < this.ratio && c.setVelocity(function() { d.zpp_inner.validate(); return d.zpp_inner.x }(this) * this.ratio, function() { d.zpp_inner.validate(); return d.zpp_inner.y }(this) * this.ratio)
                }
            }
        },
        __class__: Lk
    });
    var Mk = function() { this.offsetDirectionX = this.offsetDirectionY = 1;
        this.offsetX = this.offsetY = 0;
        this.active = !1;
        i.call(this) };
    g["stolo.ensys.components.CameraTargetComponent"] = Mk;
    Mk.__name__ = ["stolo", "ensys", "components",
        "CameraTargetComponent"
    ];
    Mk.__super__ = i;
    Mk.prototype = k(i.prototype, {
        get_name: function() { return "CameraTargetComponent_50" },
        dispose: function() { i.prototype.dispose.call(this);
            null != this._cameraSystem && (this._cameraSystem.removeTarget(this), this._cameraSystem = null);
            this._returnParams = this._returnTarget = null },
        onActorAdded: function() {
            ba.getSystemEntity(this.owner);
            this._cameraSystem = ba.getSystemEntity(this.owner).getComponent("CameraSystem_49");
            null != this._cameraSystem && (this._cameraSystem.addTarget(this),
                this.active && this._cameraSystem.setTarget(this))
        },
        setOffsetDirectionX: function(a, b, c) { this._cameraSystem.get_target() != this || a == this.offsetDirectionX || (this.offsetDirectionX = a, this._cameraSystem.offsetTargetDirectionX(this, a, b, c)) },
        __class__: Mk
    });
    var Nk = function() { this.directionEaseX = D.quadInOut;
        this.directionTimeX = 1.5;
        this.directionSwapX = !0;
        i.call(this) };
    g["stolo.ensys.components.CameraTargetDirection"] = Nk;
    Nk.__name__ = ["stolo", "ensys", "components", "CameraTargetDirection"];
    Nk.__super__ = i;
    Nk.prototype =
        k(i.prototype, {
            get_name: function() { return "CameraTargetDirection_80" },
            onStart: function() { i.prototype.onStart.call(this);
                this._target = this.owner._compMap.CameraTargetComponent_50;
                this._transform = this.owner._compMap.TransformComponent_70 },
            onStop: function() { i.prototype.onStop.call(this);
                this._transform = this._target = null },
            onUpdate: function() { this.directionSwapX && this.setCameraDirectionX(this._transform.direction) },
            setCameraDirectionX: function(a) { this._target.setOffsetDirectionX(a, this.directionTimeX, this.directionEaseX) },
            __class__: Nk
        });
    var Ok = function() { this.enabled = !0;
        i.call(this) };
    g["stolo.ensys.components.CheckpointComponent"] = Ok;
    Ok.__name__ = ["stolo", "ensys", "components", "CheckpointComponent"];
    Ok.__super__ = i;
    Ok.prototype = k(i.prototype, { get_name: function() { return "CheckpointComponent_93" }, onStart: function() { null != this.owner._compMap.PhysicsComponent_44 && this.owner._compMap.PhysicsComponent_44.addContactType("CHECKPOINT") }, __class__: Ok });
    var Pk = function() { this._respawnPosition = new X;
        i.call(this) };
    g["stolo.ensys.components.CheckpointerComponent"] =
        Pk;
    Pk.__name__ = ["stolo", "ensys", "components", "CheckpointerComponent"];
    Pk.__super__ = i;
    Pk.prototype = k(i.prototype, {
        get_name: function() { return "CheckpointerComponent_94" },
        dispose: function() { i.prototype.dispose.call(this);
            this._physicsSystem = this._physics = this._transform = null;
            this.clear();
            this._respawnPosition = null },
        onStart: function() {
            this._transform = this.owner._compMap.TransformComponent_70;
            this._physics = this.owner._compMap.PhysicsComponent_44;
            null != this._physics && this._physics.addContactType("CHECKPOINTER");
            null == this.position && (this.position = { x: this._transform.position.x, y: this._transform.position.y });
            ba.getSystemEntity(this.owner);
            this._physicsSystem = ba.getSystemEntity(this.owner).getComponent("PhysicSystem_31");
            this._physicsSystem.addContactListener(V.BEGIN, da.SENSOR, "CHECKPOINT", "CHECKPOINTER", this.owner, m(this, this.onContactBegin))
        },
        onStop: function() { this._physicsSystem.removeContactListener(V.BEGIN, da.SENSOR, "CHECKPOINT", "CHECKPOINTER", this.owner);
            i.prototype.onStop.call(this) },
        onContactBegin: function(a) {
            this.lastCheckPoint =
                a._compMap.CheckpointComponent_93
        },
        clear: function() { this.lastCheckPoint = null },
        __class__: Pk
    });
    var wh = function() { this.onDamage = new S;
        this._ignoreList = new Fa;
        this._actorsToDamage = [];
        this.currentCooldown = -100;
        i.call(this) };
    g["stolo.ensys.components.DamageComponent"] = wh;
    wh.__name__ = ["stolo", "ensys", "components", "DamageComponent"];
    wh.__super__ = i;
    wh.prototype = k(i.prototype, {
        get_name: function() { return "DamageComponent_89" },
        onStart: function() {
            null == this.damager && (this.damager = this.owner);
            this._physicsSystem =
                ba.getSystemEntity(this.owner)._compMap.PhysicSystem_31;
            null != this.owner._compMap.PhysicsComponent_44 && this.owner._compMap.PhysicsComponent_44.addContactType("DAMAGER");
            this._physicsSystem.addContactListener(V.PRELISTENER, da.ANY, this.target, "DAMAGER", this.owner, m(this, this.onPreContact));
            this._physicsSystem.addContactListener(V.BEGIN, da.ANY, this.target, "DAMAGER", this.owner, m(this, this.onContactBegin));
            this._physicsSystem.addContactListener(V.END, da.ANY, this.target, "DAMAGER", this.owner, m(this, this.onContactEnd));
            i.prototype.onStart.call(this)
        },
        onStop: function() { this._physicsSystem.removeContactListener(V.PRELISTENER, da.ANY, this.target, "DAMAGER", this.owner);
            this._physicsSystem.removeContactListener(V.BEGIN, da.ANY, this.target, "DAMAGER", this.owner);
            this._physicsSystem.removeContactListener(V.END, da.ANY, this.target, "DAMAGER", this.owner);
            this._actorsToDamage = this._ignoreList = this._physicsSystem = null;
            i.prototype.onStop.call(this) },
        onUpdate: function(a) {
            this.currentCooldown -= a;
            if (!(0 < this.currentCooldown || 0 == this._actorsToDamage.length ||
                    !this.enabled || 0 == this.charge)) { for (var a = 0, b = this._actorsToDamage; a < b.length;) { var c = b[a];++a;
                    this.damageActor(c) } this.charge--;
                this.currentCooldown = this.cooldown }
        },
        damageActor: function(a) { if (!this._ignoreList.h[a.__id__]) { var b = a._compMap.HealthComponent_90,
                    c = !1;
                null != b && (c = b.damage(this.value, this.damager, this.knockBackX, this.knockBackY)) && this.onDamage.emit(a) } },
        onPreContact: function() { return !0 },
        onContactBegin: function(a) { this._actorsToDamage.push(a) },
        onContactEnd: function(a) {
            H.remove(this._actorsToDamage,
                a)
        },
        __class__: wh
    });
    var Ke = function(a, b, c, d, e) { null == e && (e = 0.3);
        null == d && (d = 16727552);
        null == b && (b = 100);
        null == a && (a = 100);
        this.font = Ke.DefaultFont;
        this.debugOnly = !0;
        i.call(this);
        this.shape = Ke.getShape(a, b, d, e);
        this.text = c };
    g["stolo.ensys.components.DebugComponent"] = Ke;
    Ke.__name__ = ["stolo", "ensys", "components", "DebugComponent"];
    Ke.getShape = function(a, b, c, d) { null == d && (d = 0.3);
        null == c && (c = 16727552);
        null == b && (b = 100);
        null == a && (a = 100); return { alpha: d, color: c, width: a, height: b } };
    Ke.__super__ = i;
    Ke.prototype = k(i.prototype, {
        get_name: function() { return "DebugComponent_69" },
        onAdded: function() { this.debugOnly && this.owner.remove(this) },
        onStart: function() {
            this.debugOnly || (null == this.owner._compMap.Sprite_2 && this.owner.add(new J), null != this.shape && 0 < this.shape.width && 0 < this.shape.height && (0 >= this.shape.color && (this.shape.color = 0), 0 >= this.shape.alpha && (this.shape.alpha = 0.3), this.setShape(this.shape)), null != this.text && "" != this.text && (this.textSprite = C.getTextSprite(this.font), this.textSprite.set_text(this.text), this.owner.addChild((new p).add(this.textSprite)),
                this.centerText && this.textSprite.centerAnchor()), i.prototype.onStart.call(this))
        },
        setShape: function(a) { null != this.bg && this.bg.owner.dispose();
            this.bg = new Wa(a.color, a.width, a.height);
            this.bg.alpha.set__(a.alpha);
            this.owner.addChild((new p).add(this.bg));
            this.center && this.bg.centerAnchor(); return this.bg },
        __class__: Ke
    });
    var xh = function() { this.disposer = new za;
        this.onlyHighEnd = this.onlyLowEnd = !1;
        this.uuid = "";
        this.spawner = 0;
        this.tags = [];
        this.comment = "";
        this.key = "no_name";
        i.call(this) };
    g["stolo.ensys.components.TemplateComponent"] =
        xh;
    xh.__name__ = ["stolo", "ensys", "components", "TemplateComponent"];
    xh.__super__ = i;
    xh.prototype = k(i.prototype, { get_name: function() { return "TemplateComponent_53" }, onAdded: function() { i.prototype.onAdded.call(this);
            this.owner.add(this.disposer) }, dispose: function() { i.prototype.dispose.call(this);
            this.tags = this.disposer = null }, __class__: xh });
    var Je = function() { this.fixed = this.fixedRotation = !0;
        this.direction = 1;
        this.rotation = 0;
        i.call(this) };
    g["stolo.ensys.components.TransformComponent"] = Je;
    Je.__name__ = ["stolo",
        "ensys", "components", "TransformComponent"
    ];
    Je.__super__ = i;
    Je.prototype = k(i.prototype, {
        get_name: function() { return "TransformComponent_70" },
        onAdded: function() { i.prototype.onAdded.call(this);
            null == this.position && (this.position = { x: 0, y: 0 }) },
        setXY: function(a, b) { this.position.x = a;
            this.position.y = b },
        flip: function() { this.direction *= -1; var a = this.owner._compMap.Sprite_2;
            null != a && (a.forceUpdate = !0) },
        distanceTo: function(a) { return Math.sqrt(this.distanceToSquared(a)) },
        distanceToSquared: function(a) {
            var b = this.position.x -
                a.position.x,
                a = this.position.y - a.position.y;
            return b * b + a * a
        },
        __class__: Je
    });
    var Qk = function() { this.y = new ca(0);
        this.x = new ca(0);
        i.call(this) };
    g["stolo.ensys.components.MoveTransformComponent"] = Qk;
    Qk.__name__ = ["stolo", "ensys", "components", "MoveTransformComponent"];
    Qk.__super__ = i;
    Qk.prototype = k(i.prototype, {
        get_name: function() { return "MoveTransformComponent_78" },
        dispose: function() { i.prototype.dispose.call(this);
            this.y = this.x = this._callback = this._transform = null },
        onActorAdded: function() {
            this._transform =
                this.owner._compMap.TransformComponent_70;
            if (null == this._transform) throw "This component depends on a transform component";
            this.x.set__(this._transform.position.x);
            this.y.set__(this._transform.position.y)
        },
        onUpdate: function(a) { i.prototype.onUpdate.call(this, a);
            this.isComplete() || (this.x.update(a), this.y.update(a), this._transform.setXY(this.x._value, this.y._value), this.isComplete() && this.complete()) },
        complete: function() { if (null != this._callback) { var a = this._callback;
                this._callback = null;
                a(this.owner) } },
        isComplete: function() { return null != this.x._behavior && !this.x._behavior.isComplete() || null != this.y._behavior && !this.y._behavior.isComplete() ? !1 : !0 },
        __class__: Qk
    });
    var ko = function() {};
    g["stolo.ensys.components.IActivable"] = ko;
    ko.__name__ = ["stolo", "ensys", "components", "IActivable"];
    var yh = function() { this.speed = 1;
        this.isToggle = this.repeat = !1;
        this.isActive = !0;
        i.call(this) };
    g["stolo.ensys.components.MoveSequenceComponent"] = yh;
    yh.__name__ = ["stolo", "ensys", "components", "MoveSequenceComponent"];
    yh.__interfaces__ = [ko];
    yh.__super__ = i;
    yh.prototype = k(i.prototype, {
        get_name: function() { return "MoveSequenceComponent_79" },
        dispose: function() { i.prototype.dispose.call(this);
            null != this._sequence && this._sequence.dispose();
            this.initPosition = this.position = this._sequence = this._script = this._physics = this._transform = null },
        onStart: function() {
            this._transform = this.owner._compMap.TransformComponent_70;
            this._transform.fixed = !1;
            this.initPosition = new X(this._transform.position.x, this._transform.position.y);
            this._physics = this.owner._compMap.PhysicsComponent_44;
            null != this._physics && this._physics.setKinematic(!0);
            !ba.inEditor(this.owner) && this.isActive && (this.isActive = !1, this.activate())
        },
        onUpdate: function(a) { null != this.position && (this.position.update(a), this._transform.setXY(this.position.x._value, this.position.y._value)) },
        startSequence: function() {
            if (!(null == this.sequence || null != this._sequence)) {
                var a = this.sequence.actions;
                this.position = new pd(this.initPosition.x, this.initPosition.y);
                var b = {
                    x: this.position.x,
                    y: this.position.y,
                    offsetX: this.initPosition.x,
                    offsetY: this.initPosition.y
                };
                null == this.sequence.loop && (this.sequence.loop = !0);
                this.repeat = this.sequence.yoyo || this.sequence.loop;
                this._sequence = new wb;
                this._sequence.init(a, b, this.sequence.loop, this.sequence.yoyo, this.sequence.delay);
                this._sequence.add(new cb(m(this, this.onSequenceComplete)));
                this._script = new Ob;
                this.owner.add(this._script);
                this._script.run(this._sequence)
            }
        },
        onSequenceComplete: function() { this.repeat && this._script.run(this._sequence) },
        activate: function() {
            this.isActive || (this.isActive = !0, null != this.sequence && this.startSequence())
        },
        __class__: yh
    });
    var ug = function() { this.padding = 0;
        this.color2 = 16777215;
        this.color1 = 0;
        this.dotLength = 5;
        this.thickness = 1;
        i.call(this) };
    g["stolo.ensys.editor.component.EditorSelectionComponent"] = ug;
    ug.__name__ = ["stolo", "ensys", "editor", "component", "EditorSelectionComponent"];
    ug.__super__ = i;
    ug.prototype = k(i.prototype, {
        get_name: function() { return "EditorSelectionComponent_27" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._transform = this.owner._compMap.TransformComponent_70;
            this._display = this.owner._compMap.Sprite_2;
            if (null != this._display)
                if (this._display.initialized) this.build();
                else this._display.onInitComplete.connect(m(this, this.build)).once()
        },
        onRemoved: function() { i.prototype.onRemoved.call(this);
            null != this._container && (this._container.parent.removeChild(this._container), this._container = null);
            this._display = this._transform = this._sprite = null },
        onUpdate: function(a) { i.prototype.onUpdate.call(this, a);
            this.updateTransform() },
        updateTransform: function() {
            null != this._sprite &&
                (this._sprite.setXY(this._transform.position.x, this._transform.position.y), this._sprite.setRotation(this._transform.rotation))
        },
        build: function() {
            null != this._container && this._container.dispose();
            var a;
            a = this.owner._internal_getFromParents("RendererSystem_56");
            var b = a.getActorLayer(this.owner);
            a = a.addLayer({ name: b.getName() + "_selection\u00a0", parallax: b.parallax, editor: { unlockable: !0, locked: !0 } });
            a.set_pointerEnabled(!1);
            var b = this._display.getNaturalWidth() + 2 * this.padding,
                c = this._display.getNaturalHeight() +
                2 * this.padding;
            if (I.__instanceof(this._display, Xc) && null != this.owner._compMap.PhysicsComponent_44) { var d = this.owner._compMap.PhysicsComponent_44.shape;
                null != d.width && null != d.height && (b = d.width + 2 * this.padding, c = d.height + 2 * this.padding) }
            var d = x._platform.getRenderer().createTexture(b, c),
                e = d.get_graphics();
            this.drawDottedLine(e, !0, 0, 0, b, this.dotLength, this.thickness);
            this.drawDottedLine(e, !1, 0, 0, c, this.dotLength, this.thickness);
            this.drawDottedLine(e, !0, 0, c - this.thickness, b, this.dotLength, this.thickness);
            this.drawDottedLine(e, !1, b - this.thickness, 0, c, this.dotLength, this.thickness);
            this._sprite = new ya(d);
            this._sprite.setAnchor(this._display.anchorX._value, this._display.anchorY._value);
            this._container = new p;
            this._container.add(this._sprite);
            a.owner.addChild(this._container)
        },
        drawDottedLine: function(a, b, c, d, e, f, l) { for (var h = 0, g = !1; h < e;) { var i;
                i = g ? this.color1 : this.color2;
                b ? a.fillRect(i, c + h, d, Math.min(f, e - h), l) : a.fillRect(i, c, d + h, l, Math.min(f, e - h));
                g = !g;
                h += f } },
        __class__: ug
    });
    var zh = function() {
        this._startingSymbol =
            null;
        J.call(this)
    };
    g["stolo.ensys.components.ImageComponent"] = zh;
    zh.__name__ = ["stolo", "ensys", "components", "ImageComponent"];
    zh.__super__ = J;
    zh.prototype = k(J.prototype, {
        dispose: function() { J.prototype.dispose.call(this);
            this._startingSymbol = this._texture = this.bitmapSprite = this.sprite = null },
        initStart: function() {
            null != this.spritesheet ? this.loadSpritesheet(this.spritesheet, this.asset) : (this.set_texture(this.getTexture(this.pack, this.asset)), this.width = this.get_texture().get_width(), this.height = this.get_texture().get_height(),
                this.useSprite && this.createSprite(), J.prototype.initStart.call(this))
        },
        initEnd: function() { null != this._startingSymbol && (this.setSymbol(this._startingSymbol), this._startingSymbol = null);
            J.prototype.initEnd.call(this) },
        createSprite: function() { null == this.sprite && (this.sprite = new ya(this._texture), this.sprite.set_pointerEnabled(!1), this.owner.addChild((new p).add(this.sprite)), this._texture = null) },
        draw: function(a) { null != this._texture && a.drawTexture(this._texture, 0, 0) },
        get_texture: function() {
            return null !=
                this.sprite ? this.sprite.texture : this._texture
        },
        set_texture: function(a) { this.width = a.get_width();
            this.height = a.get_height(); return null != this.sprite ? this.sprite.texture = a : this._texture = a },
        set_pointerEnabled: function(a) { null != this.sprite && this.sprite.set_pointerEnabled(a);
            null != this.bitmapSprite && this.bitmapSprite.set_pointerEnabled(a); return J.prototype.set_pointerEnabled.call(this, a) },
        getNaturalWidth: function() { return this.width },
        getNaturalHeight: function() { return this.height },
        loadSpritesheet: function(a,
            b) { var c = new p;
            this.owner.addChild(c);
            this.bitmapSprite = new Wd(a, b, this.pack, m(this, this.onBitmapSpriteInit), !1);
            c.add(this.bitmapSprite) },
        onBitmapSpriteInit: function() { this.updateBitmapSprite();
            this.initEnd() },
        setSymbol: function(a) { if (!this.initialized) return this._startingSymbol = a, null; if (null == this.bitmapSprite) throw "Not spritesheet loaded!";
            a = this.bitmapSprite.setSymbol(a);
            this.updateBitmapSprite(); return a },
        updateBitmapSprite: function() {
            this.width = Math.round(this.bitmapSprite.getNaturalWidth());
            this.height = Math.round(this.bitmapSprite.getNaturalHeight())
        },
        __class__: zh,
        __properties__: k(J.prototype.__properties__, { set_texture: "set_texture", get_texture: "get_texture" })
    });
    var Ah = function() { J.call(this) };
    g["stolo.ensys.components.FillComponent"] = Ah;
    Ah.__name__ = ["stolo", "ensys", "components", "FillComponent"];
    Ah.__super__ = J;
    Ah.prototype = k(J.prototype, {
        initStart: function() { this.setAlpha(1 - this.transparency);
            this.initEnd() },
        draw: function(a) { a.fillRect(this.color, 0, 0, this.width, this.height) },
        getNaturalWidth: function() { return this.width },
        getNaturalHeight: function() { return this.height },
        __class__: Ah
    });
    var Bh = function() { this.labelLayer = "Time";
        Xc.call(this) };
    g["stolo.ensys.components.FlumpAnimationComponent"] = Bh;
    Bh.__name__ = ["stolo", "ensys", "components", "FlumpAnimationComponent"];
    Bh.__super__ = Xc;
    Bh.prototype = k(Xc.prototype, {
        onStart: function() { Xc.prototype.onStart.call(this) },
        onStop: function() { this.flump = null;
            Xc.prototype.onStop.call(this) },
        createAnim: function() {
            this.animation = this.flump = new Rk(this.prefix, this.asset, this.pack, null, !1);
            this.owner.addChild((new p).add(this.animation));
            this.setReplacementAnim()
        },
        setReplacementAnim: function() { null != this.textureReplace && (this.flump.setDecorator(m(this, this.replaceAnims)), null != this.flump.movie && this.replaceAnims(this.flump.movie)) },
        replaceAnims: function(a) { if (this.textureReplace instanceof Array && null == this.textureReplace.__enum__)
                for (var b = this.textureReplace, c = 0; c < b.length;) { var d = b[c];++c;
                    this.replaceAnim(a, d) } else this.replaceAnim(a, this.textureReplace) },
        replaceAnim: function(a,
            b) { var c = null;
            null != b.asset && null != b.sprite && (c = E.getPack(b.sprite).getTexture(b.asset)); var d = a.getLayer(b.layer, !1);
            null != d && (d = d._internal_getFromChildren("Sprite_2", ya), null != d && (d.texture = c)) },
        __class__: Bh
    });
    var Kd = function() { J.call(this) };
    g["stolo.ensys.components.PatternComponent"] = Kd;
    Kd.__name__ = ["stolo", "ensys", "components", "PatternComponent"];
    Kd.__super__ = J;
    Kd.prototype = k(J.prototype, {
        initStart: function() {
            this._texture = this.getTexture(this.pack, this.asset);
            null != this._texture && (0 < this.width ||
                (this.width = this._texture.get_width()), 0 < this.height || (this.height = this._texture.get_height()));
            this.initEnd()
        },
        draw: function(a) { null != this._texture && a.drawPattern(this._texture, 0, 0, this.width, this.height) },
        getNaturalWidth: function() { return this.width },
        getNaturalHeight: function() { return this.height },
        __class__: Kd
    });
    var ob = function() { this._px = this._py = this._tx = this._ty = 0;
        J.call(this) };
    g["stolo.ensys.components.TilerComponent"] = ob;
    ob.__name__ = ["stolo", "ensys", "components", "TilerComponent"];
    ob.__super__ =
        J;
    ob.prototype = k(J.prototype, {
        draw: function(a) { null != this._texture && a.drawTexture(this._texture, 0, 0) },
        enableCulling: function(a) { J.prototype.enableCulling.call(this, a);
            this.cullTexture && !a && !this.isBuilt && this.buildTexture() },
        getNaturalWidth: function() { return this.width },
        getNaturalHeight: function() { return this.height },
        onStart: function() {
            this._transform = this.owner._compMap.TransformComponent_70;
            this._image = this.getTexture(this.pack, this.asset);
            this.updatePosition();
            this.width = this.xsize * this.tileWidth |
                0;
            this.height = this.ysize * this.tileHeight | 0;
            0 != this.xsize % 2 && (this._px += 0.5 * this.tileWidth | 0);
            0 != this.ysize % 2 && (this._py += 0.5 * this.tileHeight | 0);
            this._tx = (this._px - 0.5 * this.width) / this.tileWidth | 0;
            this._ty = (this._py - 0.5 * this.height) / this.tileHeight | 0;
            null != this.owner._compMap.PhysicsComponent_44 && this.owner._compMap.PhysicsComponent_44.setPosition(this._transform.position.x, this._transform.position.y);
            this._grid = ob.tileCache.get(this.grid);
            null == this._grid && (this._grid = new M, ob.tileCache.set(this.grid,
                this._grid));
            for (var a = 0, b = this.xsize; a < b;)
                for (var c = a++, d = 0, e = this.ysize; d < e;) { var f = d++;
                    this.setTile(this._tx + c, this._ty + f) } this.cullTexture || this.buildTexture();
            J.prototype.onStart.call(this)
        },
        updatePosition: function() { this._px = y["int"](Math.floor(this._transform.position.x / this.tileWidth) * this.tileWidth);
            this._py = y["int"](Math.floor(this._transform.position.y / this.tileHeight) * this.tileHeight);
            this._transform.position.x = this._px;
            this._transform.position.y = this._py;
            this.forceUpdate = !0 },
        onUpdate: function(a) {
            J.prototype.onUpdate.call(this,
                a);
            null != this.owner._internal_getFromParents("BaseGameSystem_24", Yc) && this.updatePosition()
        },
        getTileId: function(a, b) { return a + "_" + b },
        getTile: function(a, b) { return this._grid.get(this.getTileId(a, b)) },
        setTile: function(a, b, c) { null == c && (c = !0);
            this._grid.set(this.getTileId(a, b), c) },
        getTextureCacheId: function() { return "tiler_" + this.pack + "_" + this.asset + "_" + this.width + "x" + this.height },
        buildTexture: function() {
            this.isBuilt = !0;
            var a = null,
                b = null;
            if (this.drawTexture) {
                a = this.getTextureCacheId();
                this._texture = ob.cache.get(a);
                if (null != this._texture) return this.endBuild();
                this._texture = x._platform.getRenderer().createTexture(this.width, this.height);
                b = this._texture.get_graphics()
            }
            for (var c = Math.floor(this._image.get_width() / this.tileWidth), d = 0, e = this.xsize; d < e;)
                for (var f = d++, l = 0, h = this.ysize; l < h;) {
                    var g = l++,
                        i = this._tx + f,
                        j = this._ty + g,
                        k = 0;
                    this.cornerMode ? (this.getTile(i + 1, j - 1) && (k += 1), this.getTile(i + 1, j + 1) && (k += 2), this.getTile(i - 1, j + 1) && (k += 4), this.getTile(i - 1, j - 1) && (k += 8), 7 == k && !this.getTile(i, j - 1) && (k = 6), 7 == k && !this.getTile(i -
                        1, j) && (k = 3), 14 == k && !this.getTile(i, j - 1) && (k = 6), 14 == k && !this.getTile(i + 1, j) && (k = 12), 11 == k && !this.getTile(i, j + 1) && (k = 9), 11 == k && !this.getTile(i - 1, j) && (k = 3), 13 == k && !this.getTile(i, j + 1) && (k = 9), 13 == k && !this.getTile(i + 1, j) && (k = 12)) : (this.getTile(i, j - 1) && (k += 1), this.getTile(i + 1, j) && (k += 2), this.getTile(i, j + 1) && (k += 4), this.getTile(i - 1, j) && (k += 8));
                    var i = this.mapping[k],
                        n = i[Math.floor(Math.random() * i.length)],
                        i = n % c,
                        j = Math.floor(n / c);
                    this.drawTexture ? b.drawSubTexture(this._image, f * this.tileWidth, g * this.tileHeight,
                        i * this.tileWidth, j * this.tileHeight, this.tileWidth, this.tileHeight) : (a = "tiler_" + this.pack + "_" + this.asset + "_" + k + "_" + n, k = null, ob.cache.exists(a) ? k = ob.cache.get(a) : (k = this._image.subTexture(i * this.tileWidth, j * this.tileHeight, this.tileWidth, this.tileHeight), ob.cache.set(a, k)), k = new ya(k), k.set_pointerEnabled(0 != (this._flags & 4)), this.owner.addChild((new p).add(k)), k.setXY(f * this.tileWidth, g * this.tileHeight))
                }
            this.drawTexture && ob.cache.set(a, this._texture);
            this.endBuild()
        },
        endBuild: function() {
            this.initEnd();
            this.isBuilt = !0
        },
        dispose: function() { this._texture = this._grid = this._image = null;
            J.prototype.dispose.call(this) },
        __class__: ob
    });
    var xb = function() { J.call(this) };
    g["stolo.ensys.components.SlicerComponent"] = xb;
    xb.__name__ = ["stolo", "ensys", "components", "SlicerComponent"];
    xb.ValidateActorExport = function(a, b) { a.width = b.dataWidth;
        a.height = b.dataHeight; return a };
    xb.__super__ = J;
    xb.prototype = k(J.prototype, {
        draw: function(a) { null != this._texture && a.drawTexture(this._texture, 0, 0) },
        onAdded: function() {
            this.dataWidth =
                this.width;
            this.dataHeight = this.height;
            J.prototype.onAdded.call(this)
        },
        enableCulling: function(a) { J.prototype.enableCulling.call(this, a);
            this.cullTexture && !a && !this.isBuilt && this.buildTexture() },
        getNaturalWidth: function() { return this.width },
        getNaturalHeight: function() { return this.height },
        initStart: function() {
            this._image = this.getTexture(this.pack, this.asset);
            var a = this.slices[0],
                b = this.slices[1];
            this.slicesData = new Fb;
            for (var c = 0, d = 0, e, f, l = 0, h = 0, g = b.length - 1; h < g;) {
                c = h++;
                d = b[c];
                f = b[c + 1] - d;
                for (var i =
                        0, j = a.length - 1; i < j;) e = i++, c = a[e], e = a[e + 1] - c, this.slicesData.set(++l, { id: l, x: c, y: d, width: e, height: f })
            }
            this.slicesData.set(-1, { id: -1, x: 0, y: 0, width: 0, height: 0 });
            b = this.slicesData.get(this.template[0][0][0]);
            l = this.slicesData.get(this.template[0][2][0]);
            a = this.slicesData.get(this.template[1][1][0]);
            this.slicesData.get(this.template[2][0][0]);
            d = this.slicesData.get(this.template[2][2][0]);
            l = b.width + l.width;
            this.widthVar = this.width - l;
            this.widthRepeat = Math.ceil(this.widthVar / a.width);
            this.widthVar = this.widthRepeat *
                a.width | 0;
            b = b.height + d.height;
            this.heightVar = this.height - b;
            this.heightRepeat = Math.ceil(this.heightVar / a.height);
            this.heightVar = this.heightRepeat * a.height | 0;
            this.width = this.widthVar + l;
            this.height = this.heightVar + b;
            this.cullTexture || this.buildTexture()
        },
        getTextureCacheId: function() { return "slicer_" + this.pack + "_" + this.asset + "_" + this.slices[0].toString() + "_" + this.slices[1].toString() + "_" + this.dataWidth + "x" + this.dataHeight },
        buildTexture: function() {
            var a = 0,
                b = 0,
                c, d, e = null,
                f = null,
                l = null;
            if (this.drawTexture) {
                l =
                    this.getTextureCacheId();
                this._texture = xb.cache.get(l);
                if (null != this._texture) return this.endBuild();
                this._texture = x._platform.getRenderer().createTexture(this.width, this.height);
                f = this._texture.get_graphics()
            }
            for (var h = 0; 3 > h;) {
                for (var g = h++, i = this.template[g], j = 0; 3 > j;) {
                    var k = j++,
                        n = i[k];
                    d = 1 == g ? this.heightRepeat : 1;
                    c = 1 == k ? this.widthRepeat : 1;
                    for (var m = 0, o = 0, r = 0; r < d;) {
                        r++;
                        for (var u = 0; u < c;) {
                            u++;
                            e = this.slicesData.get(n[Math.floor(Math.random() * n.length)]);
                            if (-1 != e.id && 0 < e.width && 0 < e.height)
                                if (this.drawTexture) f.drawSubTexture(this._image,
                                    a + m, b + o, e.x, e.y, e.width, e.height);
                                else { var l = "slicer_" + this.pack + "_" + this.asset + "_" + y.string(e.x) + "x" + y.string(e.y) + "_" + y.string(e.width) + "x" + y.string(e.height),
                                        s = null;
                                    xb.cache.exists(l) ? s = xb.cache.get(l) : (s = this._image.subTexture(e.x, e.y, e.width, e.height), xb.cache.set(l, s));
                                    s = new ya(s);
                                    s.set_pointerEnabled(0 != (this._flags & 4));
                                    this.owner.addChild((new p).add(s));
                                    s.setXY(a + m, b + o) } m += e.width
                        }
                        o += e.height;
                        m = 0
                    }
                    a = 1 == k ? a + this.widthVar : a + e.width
                }
                a = 0;
                b = 1 == g ? b + this.heightVar : b + e.height
            }
            this.drawTexture && xb.cache.set(l,
                this._texture);
            this.endBuild()
        },
        endBuild: function() { this.initEnd();
            this.isBuilt = !0 },
        dispose: function() { this.slicesData = this._texture = this.template = this.slices = this._image = null;
            J.prototype.dispose.call(this) },
        __class__: xb
    });
    var Sk = function() { this.textvars = {};
        this.localized = !0;
        this.font = "debug_font";
        this.text = "notext";
        J.call(this) };
    g["stolo.ensys.components.TextComponent"] = Sk;
    Sk.__name__ = ["stolo", "ensys", "components", "TextComponent"];
    Sk.__super__ = J;
    Sk.prototype = k(J.prototype, {
        initStart: function() {
            this.localized ?
                this.textfield = new Le(this.text, this.font, this.textvars) : (this.textfield = C.getTextSprite(this.font), this.textfield.set_text(this.text));
            this.owner.addChild((new p).add(this.textfield));
            this.initEnd()
        },
        getNaturalWidth: function() { return this.textfield.getNaturalWidth() },
        getNaturalHeight: function() { return this.textfield.getNaturalWidth() },
        __class__: Sk
    });
    var yc = function() { this._partsTotal = 0;
        this._parts = [];
        this.horizontal = !0;
        this.scroll = this.scrollOffset = this.autoScroll = 0;
        J.call(this) };
    g["stolo.ensys.components.ScrollerComponent"] =
        yc;
    yc.__name__ = ["stolo", "ensys", "components", "ScrollerComponent"];
    yc.__super__ = J;
    yc.prototype = k(J.prototype, {
        onAdded: function() { J.prototype.onAdded.call(this);
            null == this.assets && (this.assets = []);
            null != this.asset && "" != this.asset && this.assets.push(this.asset) },
        onRemoved: function() { J.prototype.onRemoved.call(this); for (var a = 0, b = this._parts; a < b.length;) { var c = b[a];++a;
                c.texture = null;
                c.next = null;
                c.previous = null } this._parts = null },
        onUpdate: function(a) {
            this.scrollOffset += this.autoScroll;
            J.prototype.onUpdate.call(this,
                a)
        },
        onStart: function() {
            for (var a = 0, b = this.assets; a < b.length;) {
                var c = b[a];
                ++a;
                var d = 0,
                    e = null,
                    f = 0,
                    l = 0,
                    f = c.split("@");
                if ("void" == f[0]) { if (1 == f.length) throw "You must specify a size for the void " + y.string(this.assets);
                    2 == f.length ? d = y.parseInt(f[1]) : 3 == f.length && (d = y.parseInt(f[1]) + Math.round(Math.random() * y.parseInt(f[2])));
                    f = this.horizontal ? d : this.width;
                    l = this.horizontal ? this.height : d } else e = this.getTexture(this.pack, c), d = this.horizontal ? e.get_width() : e.get_height(), f = e.get_width(), l = e.get_height();
                this._parts.push({ texture: e, width: f, height: l, next: null, previous: null, first: !1, last: !1, start: this._partsTotal, end: this._partsTotal + d });
                this._partsTotal += d
            }
            a = 0;
            for (b = this._parts.length; a < b;) c = a++, d = this._parts[c], d.next = this._parts[c + 1], d.previous = this._parts[c - 1], d.first = 0 == c, d.last = c == this._parts.length - 1;
            this._parts[0].previous = this._parts[this._parts.length - 1];
            this._parts[this._parts.length - 1].next = this._parts[0];
            this._drawTextureFunc = this.horizontal ? m(this, this.drawTextureHorizontal) : m(this, this.drawTextureVertical);
            J.prototype.onStart.call(this)
        },
        draw: function(a) { if (!(0 >= this._parts.length)) { var b = (this.scroll + this.scrollOffset) % this._partsTotal;
                0 > b && (b = this._partsTotal + b); for (var c = this._parts[0]; b > c.end && !(c = c.next, c.last););
                this._drawTextureFunc(a, c, b - c.start, 0) } },
        drawTextureHorizontal: function(a, b, c, d) {
            var e = Math.max(1, b.width - c),
                f = Math.max(1, this.width - d);
            e < f ? (null != b.texture && a.drawSubTexture(b.texture, d, 0, c, 0, e, this.height), this.drawTextureHorizontal(a, b.next, 0, d + e)) : null != b.texture && a.drawSubTexture(b.texture,
                d, 0, c, 0, f, this.height)
        },
        drawTextureVertical: function(a, b, c, d) { var e = Math.max(1, b.height - c),
                f = Math.max(1, this.height - d);
            e < f ? (null != b.texture && a.drawSubTexture(b.texture, 0, d, 0, c, this.width, e), this.drawTextureVertical(a, b.next, 0, d + e)) : null != b.texture && a.drawSubTexture(b.texture, 0, d, 0, c, this.width, f) },
        getNaturalWidth: function() { return this.width },
        getNaturalHeight: function() { return this.height },
        __class__: yc
    });
    var Tk = function() { this.lockHorizontal = this.lockVertical = this.lockWidth = this.lockHeight = !1;
        yc.call(this) };
    g["stolo.ensys.components.LayerScrollerComponent"] = Tk;
    Tk.__name__ = ["stolo", "ensys", "components", "LayerScrollerComponent"];
    Tk.__super__ = yc;
    Tk.prototype = k(yc.prototype, {
        onAdded: function() { yc.prototype.onAdded.call(this) },
        onRemoved: function() { yc.prototype.onRemoved.call(this) },
        onStart: function() {
            yc.prototype.onStart.call(this);
            this._layer = this.owner.parent._compMap.Sprite_2;
            this._layerX = this._layer.x;
            this._layerY = this._layer.y;
            this._layerS = this.horizontal ? this._layerX : this._layerY;
            var a;
            ba.getSystemEntity(this.owner);
            a = ba.getSystemEntity(this.owner).getComponent("RendererSystem_56");
            this._rendererDimensions = null != a ? a.dimensionsScaled : new Na(0, 0, o.gameWidth, o.gameHeight)
        },
        onUpdate: function(a) { yc.prototype.onUpdate.call(this, a);
            this.scroll = -this._layerS._value;
            this.lockHorizontal && this.anchorX.set__(this._layerX._value);
            this.lockVertical && this.anchorY.set__(this._layerY._value);
            this.lockWidth && (this.width = this._rendererDimensions.width | 0);
            this.lockHeight && (this.height = this._rendererDimensions.height | 0) },
        __class__: Tk
    });
    var Uk = function() { this.lockX = this.lockY = !1;
        i.call(this) };
    g["stolo.ensys.components.PositionLockComponent"] = Uk;
    Uk.__name__ = ["stolo", "ensys", "components", "PositionLockComponent"];
    Uk.__super__ = i;
    Uk.prototype = k(i.prototype, {
        get_name: function() { return "PositionLockComponent_81" },
        onStart: function() { i.prototype.onStart.call(this);
            this._transform = this.owner._compMap.TransformComponent_70;
            this._targetX = this._transform.position.x;
            this._targetY = this._transform.position.y },
        onStop: function() { i.prototype.onStop.call(this) },
        onUpdate: function(a) { i.prototype.onUpdate.call(this, a);
            this.lockX && (this._transform.position.x = this._targetX);
            this.lockY && (this._transform.position.y = this._targetY) },
        __class__: Uk
    });
    var Lc = function() { this.color = 0;
        this.thickness = 1;
        this.dotLength = 5;
        this.length = 100;
        J.call(this) };
    g["stolo.ensys.components.LineComponent"] = Lc;
    Lc.__name__ = ["stolo", "ensys", "components", "LineComponent"];
    Lc.__super__ = J;
    Lc.prototype = k(J.prototype, {
        dispose: function() {
            J.prototype.dispose.call(this);
            null != this._texture && !Lc.USE_CACHE &&
                this._texture.dispose()
        },
        onStart: function() { J.prototype.onStart.call(this);
            this._texture = this.createDottedLine(this.length, this.dotLength, this.thickness, this.color) },
        draw: function(a) { null != this._texture && a.drawTexture(this._texture, 0, 0) },
        createDottedLine: function(a, b, c, d) {
            null == d && (d = 0);
            var e = a + "@" + b + "@" + c + "@" + d;
            if (Lc.USE_CACHE && Lc.CACHE.exists(e)) return Lc.CACHE.get(e);
            var f = x._platform.getRenderer().createTexture(a, c),
                l = f.get_graphics();
            if (0 < b)
                for (var h = 0, g = !1; h < a;) g && l.fillRect(d, h, 0, Math.min(b,
                    a - h), c), g = !g, h += b;
            else l.fillRect(d, 0, 0, a, c);
            Lc.USE_CACHE && Lc.CACHE.set(e, f);
            return f
        },
        getNaturalWidth: function() { return this.length },
        getNaturalHeight: function() { return this.thickness },
        __class__: Lc
    });
    var Vk = function() { this.spread = 200;
        this.maxScale = 1;
        this.minScale = 0.1;
        this.maxAlpha = 0.3;
        this.minAlpha = 0.1;
        this.pack = "sprites";
        this.asset = "shadow";
        this.enabled = !0;
        i.call(this) };
    g["stolo.ensys.components.GroundShadowComponent"] = Vk;
    Vk.__name__ = ["stolo", "ensys", "components", "GroundShadowComponent"];
    Vk.__super__ =
        i;
    Vk.prototype = k(i.prototype, {
        get_name: function() { return "GroundShadowComponent_82" },
        dispose: function() { i.prototype.dispose.call(this);
            this.reference = this._shadow = null },
        onStart: function() { i.prototype.onStart.call(this);
            this._shadow = new ya(A.getTextureFromPack(this.asset, this.pack));
            this._shadow.centerAnchor();
            null != this.offset && this._shadow.setXY(this.offset.x, this.offset.y);
            (new p).add(this._shadow);
            this.sendToBack() },
        sendToBack: function() {
            null != this._shadow && this.owner.addChild(this._shadow.owner,
                !1)
        },
        onUpdate: function(a) { i.prototype.onUpdate.call(this, a);
            this.enabled && null != this.reference && this.set(this.reference.y._value) },
        set: function(a) { var b = 1 - a / -this.spread,
                a = this.minAlpha + b * (this.maxAlpha - this.minAlpha),
                b = this.minScale + b * (this.maxScale - this.minScale);
            0 < a ? (this._shadow.set_visible(!0), this._shadow.setScale(b), this._shadow.setAlpha(a)) : this._shadow.set_visible(!1) },
        __class__: Vk
    });
    var Mc = function() {
        this._typesToRemove = [];
        this._typesToAdd = [];
        this._complexShape = !1;
        this.onShapeCreated = new Lb;
        this.onShapesCreated = new ga;
        this.onInitialize = new ga;
        this.forceUpdate = this.initialized = !1;
        this.setTransform = !0;
        this.damping = Mc.defaultDamping;
        i.call(this)
    };
    g["stolo.ensys.components.PhysicsComponent"] = Mc;
    Mc.__name__ = ["stolo", "ensys", "components", "PhysicsComponent"];
    Mc.__interfaces__ = [Wi];
    Mc.__super__ = i;
    Mc.prototype = k(i.prototype, {
        get_name: function() { return "PhysicsComponent_44" },
        onAdded: function() { i.prototype.onAdded.call(this);
            this.cleanShapes() },
        onActorAdded: function() {
            ba.getSystemEntity(this.owner);
            this._cullingSystem = ba.getSystemEntity(this.owner).getComponent("CullingSystem_55");
            ba.getSystemEntity(this.owner);
            this._physicSystem = ba.getSystemEntity(this.owner).getComponent("PhysicSystem_31");
            ba.getSystemEntity(this.owner);
            this._physicDebugSystem = ba.getSystemEntity(this.owner).getComponent("PhysicDebugSystem_45");
            this._transform = this.owner._compMap.TransformComponent_70;
            this._display = this.owner._compMap.Sprite_2;
            this.createBody();
            if (null != this._display && !this._display.initialized && null != this._display.onInitComplete) this._display.onInitComplete.connect(m(this,
                this.initBody)).once();
            else this.initBody()
        },
        onStart: function() {},
        onStop: function() { this.enable(!1);
            this._cullingSystem.removeComponent(this, this.owner);
            i.prototype.onRemoved.call(this);
            this._physicDebugSystem = this._display = this._cullingSystem = this._physicSystem = null;
            null != this._body && (this._body.get_userData().component = null, this._body.get_userData().actor = null);
            this._transform = this._rayResultList = this._ray = null },
        onUpdate: function(a) {
            if (this.enabled) {
                if (!this._transform.fixed || this.forceUpdate) this.setTransform ?
                    0 < this.damping ? (this._transform.position.x = db.lerp(this._transform.position.x, this._body.get_position().get_x(), a * this.damping), this._transform.position.y = db.lerp(this._transform.position.y, this._body.get_position().get_y(), a * this.damping)) : (this._transform.position.x = this._body.get_position().get_x(), this._transform.position.y = this._body.get_position().get_y()) : this.setPosition(this._transform.position.x, this._transform.position.y);
                if (!this._transform.fixedRotation || this.forceUpdate) this.setTransform ?
                    this._transform.rotation = 180 * this._body.zpp_inner.rot / 3.141592653589793 : this.setRotation(3.141592653589793 * this._transform.rotation / 180);
                this.forceUpdate = !1
            }
        },
        enableCulling: function(a) { a ? this._physicSystem.removeBody(this._body) : this.enabled && this._physicSystem.addBody(this._body) },
        enable: function(a) {
            null == a && (a = !0);
            null != this._physicSystem && (a ? (!this.enabled && null != this._transform && this.setPosition(this._transform.position.x, this._transform.position.y), this._physicSystem.addBody(this._body)) : this._physicSystem.removeBody(this._body),
                this.enabled = a)
        },
        disable: function() { this.enable(!1) },
        createBody: function() {
            this._body = new fg;
            this.resetType();
            0 != this.mass && this._body.set_mass(this.mass); - 1 != this.massScale && this._body.set_gravMassScale(this.massScale);
            this._body.set_allowRotation(!this._transform.fixedRotation);
            this._body.set_isBullet(this.bullet);
            this._body.get_userData().component = this;
            this._body.get_userData().actor = this.owner;
            this._body.get_position().set_x(this._transform.position.x);
            this._body.get_position().set_y(this._transform.position.y);
            this._body.set_rotation(3.141592653589793 * this._transform.rotation / 180)
        },
        initBody: function() { this.createShapes();
            this.initContacts(); for (var a = 0, b = this._typesToAdd; a < b.length;) { var c = b[a];++a;
                this.addContactType(c) } a = 0; for (b = this._typesToRemove; a < b.length;) c = b[a], ++a, this.removeContactType(c);
            this.setVelocity(this.velocity.x, this.velocity.y);
            this.applyImpulse(this.impulse.x, this.impulse.y);
            this._cullingSystem.addComponent(this, this.owner);
            this.onInitialize.emit();
            this.initialized = !0 },
        cleanShapes: function() {
            if (K.is(this.shape,
                    P.TObject)) this.shape = K.merge(Mc.DEFAULT_SHAPE, this.shape, !0);
            else if (K.is(this.shape, P.TClass(Array))) { var a;
                a = I.__cast(this.shape, Array); for (var b = 0, c = a.length; b < c;) { var d = b++;
                    a[d] = K.merge(Mc.DEFAULT_SHAPE, a[d], !0) } this.shape = a }
        },
        createShapes: function() {
            this._body.zpp_inner.wrap_shapes.clear();
            if (K.is(this.shape, P.TObject)) this._complexShape = !1, this.createShape(this.shape);
            else if (K.is(this.shape, P.TClass(Array))) {
                this._complexShape = !0;
                var a = 0,
                    b;
                for (b = I.__cast(this.shape, Array); a < b.length;) {
                    var c =
                        b[a];
                    ++a;
                    this.createShape(c)
                }
            }
            this.onShapesCreated.emit()
        },
        createShape: function(a) { this._complexShape || (this._complexShape = !("box" == a.type || null == a.type)); var b = Tn.createShape(a, this._display, this.offset);
            this.addShape(b);
            this.onShapeCreated.emit(a, b); return b },
        addShape: function(a) { a = this._body.zpp_inner.wrap_shapes.add(a);
            1 < this._body.zpp_inner.wrap_shapes.get_length() && (this._complexShape = !0); return a },
        getBody: function() { return this._body },
        initContacts: function() {
            if (K.is(this.contacts, P.TClass(String))) this.addContactType(this.contacts.toUpperCase());
            else if (K.is(this.contacts, P.TClass(Array))) { var a = 0,
                    b; for (b = I.__cast(this.contacts, Array); a < b.length;) { var c = b[a];++a;
                    this.addContactType(c.toUpperCase()) } }
        },
        getCbType: function(a) { return this._physicSystem.getCbType(a) },
        hasContactType: function(a) { return this._body.get_cbTypes().has(this.getCbType(a)) },
        removeContactType: function(a) { null == this._body ? this._typesToRemove.push(a) : this._body.get_cbTypes().remove(this.getCbType(a)) },
        addContactType: function(a) { null == this._body ? this._typesToAdd.push(a) : this._body.get_cbTypes().add(this.getCbType(a)) },
        raycastAll: function(a, b, c, d, e, f) {
            null == e && (e = 0);
            null == d && (d = 0);
            if (null == this._body || null == this._body.get_space()) return null;
            null == this._ray && (this._ray = new Lm(aa.get(0, 0, !0), aa.get(0, 0, !0)));
            null == this._rayResultList && (this._rayResultList = new oh);
            b = aa.get(b, c, null);
            c = null;
            this._ray.zpp_inner.origin.set(this._body.localPointToWorld(aa.get(d, e, !0), !0));
            this._ray.zpp_inner.direction.set(b);
            this._ray.set_maxDistance(a);
            this._body.get_space().rayMultiCast(this._ray, !1, f, this._rayResultList);
            if (0 < this._rayResultList.get_length()) {
                c = [];
                for (a = this._rayResultList.iterator(); a.hasNext();) a.zpp_critical = !1, d = a.zpp_inner.at(a.zpp_i++), c.push(d.zpp_inner.shape.get_body().get_userData().actor)
            }
            this._rayResultList.clear();
            b.dispose();
            return c
        },
        getSize: function() { return this._complexShape ? { width: this._body.zpp_inner.aabb.wrapper().get_width(), height: this._body.zpp_inner.aabb.wrapper().get_height() } : { width: this.shape.width, height: this.shape.height } },
        getVelocity: function() { return null == this._body ? aa.get(0, 0, !0) : this._body.get_velocity() },
        resetVelocity: function() { null != this._body && this.getVelocity().setxy(0, 0) },
        setVelocity: function(a, b) { null != this._body && (this._body.get_velocity().set_x(a), this._body.get_velocity().set_y(b)) },
        applyImpulse: function(a, b) { null != this._body && this._body.applyImpulse(aa.get(a, b, !0)) },
        applyAngularImpulse: function(a, b) { null != this._body && this._body.applyImpulse(aa.weak(Math.cos(a) * b, Math.sin(a) * b)) },
        resetImpulse: function() { null != this._body && this._body.set_force(aa.get(0, 0, !0)) },
        setPosition: function(a, b, c) {
            null ==
                c && (c = 0);
            null != this._body && (0 < c ? this._body.setVelocityFromTarget(aa.get(a, b, !0), this._body.zpp_inner.rot, c) : (this._body.set_position(aa.get(a, b, !0)), this.setTransform && (this._transform.position.x = a, this._transform.position.y = b)))
        },
        moveBy: function(a, b, c) { null == c && (c = 0);
            null != this._transform && this.setPosition(this._transform.position.x + a, this._transform.position.y + b, c) },
        enableRotation: function(a) {
            this._transform.fixedRotation = !a;
            this._body.set_allowRotation(a);
            a || (this._body.set_angularVel(0), this._transform.rotation =
                0, a = this.owner._compMap.Sprite_2, null != a && a.setRotation(0))
        },
        rotate: function(a) { var b = this._body;
            b.set_rotation(b.zpp_inner.rot + a) },
        setRotation: function(a) { null != this._body && (this._body.set_rotation(a), this.setTransform && (this._transform.rotation = 180 * this._body.zpp_inner.rot / 3.141592653589793)) },
        getRotation: function() { return this._body.zpp_inner.rot },
        getAngle: function(a) {
            var b = a._compMap.PhysicsComponent_44.getBody().get_position();
            return Math.atan2(function() { b.zpp_inner.validate(); return b.zpp_inner.y }(this) -
                this._body.get_position().get_y(),
                function() { b.zpp_inner.validate(); return b.zpp_inner.x }(this) - this._body.get_position().get_x())
        },
        setKinematic: function(a) { null == a && (a = !1);
            this.kinematic = !0;
            null != this._body && this._body.set_type(function() { null == h.BodyType_KINEMATIC && (h.internal = !0, h.BodyType_KINEMATIC = new Gb, h.internal = !1); return h.BodyType_KINEMATIC }(this));
            a && (this.setTransform = !1) },
        resetType: function() {
            if (null != this._transform) {
                var a;
                this._transform.fixed ? (null == h.BodyType_STATIC && (h.internal = !0, h.BodyType_STATIC = new Gb, h.internal = !1), a = h.BodyType_STATIC) : (null == h.BodyType_DYNAMIC && (h.internal = !0, h.BodyType_DYNAMIC = new Gb, h.internal = !1), a = h.BodyType_DYNAMIC);
                this.kinematic && (null == h.BodyType_KINEMATIC && (h.internal = !0, h.BodyType_KINEMATIC = new Gb, h.internal = !1), a = h.BodyType_KINEMATIC, this._transform.fixed = !1);
                null != this._body && this._body.set_type(a)
            }
        },
        getCollidingActors: function() {
            for (var a = [], b = this._body.get_arbiters().iterator(); b.hasNext();) {
                var c;
                b.zpp_critical = !1;
                c = b.zpp_inner.at(b.zpp_i++);
                (c.zpp_inner.ws1.id > c.zpp_inner.ws2.id ? c.zpp_inner.b2.outer : c.zpp_inner.b1.outer) == this._body ? a.push((c.zpp_inner.ws1.id > c.zpp_inner.ws2.id ? c.zpp_inner.b1.outer : c.zpp_inner.b2.outer).get_userData().actor) : a.push((c.zpp_inner.ws1.id > c.zpp_inner.ws2.id ? c.zpp_inner.b2.outer : c.zpp_inner.b1.outer).get_userData().actor)
            }
            return a
        },
        isSensor: function() { return null != this.shape && this.shape.sensor },
        __class__: Mc
    });
    var Ch = function() { this.color = 16776960;
        this.debug = !0;
        i.call(this) };
    g["stolo.ensys.components.PhysicsDebugComponent"] =
        Ch;
    Ch.__name__ = ["stolo", "ensys", "components", "PhysicsDebugComponent"];
    Ch.__super__ = i;
    Ch.prototype = k(i.prototype, {
        get_name: function() { return "PhysicsDebugComponent_46" },
        onActorAdded: function() {
            this._transform = this.owner._compMap.TransformComponent_70;
            this._physics = this.owner._compMap.PhysicsComponent_44;
            if (null != this._physics) {
                var a = this._physics.getBody();
                if (null != a && !a.zpp_inner.wrap_shapes.empty()) this.onShapesCreated();
                this._physics.onShapesCreated.connect(m(this, this.onShapesCreated));
                this._physics.onShapeCreated.connect(m(this,
                    this.onNewShape))
            }
        },
        onStop: function() { null != this.container && (this.container.parent.removeChild(this.container), this.container = null);
            this.sprite = null;
            i.prototype.onStop.call(this) },
        onUpdate: function(a) { i.prototype.onUpdate.call(this, a);
            this.updateTransform() },
        updateTransform: function() { null != this.sprite && (this.sprite.setXY(this._transform.position.x, this._transform.position.y), this.sprite.setRotation(this._transform.rotation)) },
        init: function() {
            if (null == this.container) {
                var a;
                ba.getSystemEntity(this.owner);
                a = ba.getSystemEntity(this.owner).getComponent("RendererSystem_56");
                var b = a.getActorLayer(this.owner);
                this.layer = a.addLayer({ name: b.getName() + "_physics", parallax: b.parallax, editor: { unlockable: !0, locked: !0 } });
                this.layer.set_pointerEnabled(!1);
                this.createContainer()
            }
        },
        createContainer: function() { this.container = new p;
            this.sprite = new r;
            this.sprite.setAnchor(-this._physics.offset.x, -this._physics.offset.y);
            this.container.add(this.sprite);
            this.layer.owner.addChild(this.container) },
        onShapesCreated: function() {
            null !=
                this.container && (this.container.remove(this.sprite), this.container.dispose(), this.container = null, this.createContainer());
            this.onNewShape(this._physics.shape, null)
        },
        onNewShape: function(a) { if (K.is(a, P.TObject)) this.createShape(a);
            else if (K.is(a, P.TClass(Array)))
                for (var b = 0, a = I.__cast(a, Array); b < a.length;) { var c = a[b];++b;
                    this.createShape(c) } },
        createShape: function(a) {
            this.init();
            a = new le(a, this.color);
            null != a.texture && (a.actor = this.owner, this.container.addChild((new p).add(a)));
            this.firstSprite = y.instance(this.container.firstChild._compMap.Sprite_2,
                le)
        },
        __class__: Ch
    });
    var Dh = function() { this.left = this.right = this.top = this.bottom = this.acceptOnce = !1;
        i.call(this) };
    g["stolo.ensys.components.PassthroughComponent"] = Dh;
    Dh.__name__ = ["stolo", "ensys", "components", "PassthroughComponent"];
    Dh.__super__ = i;
    Dh.prototype = k(i.prototype, {
        get_name: function() { return "PassthroughComponent_83" },
        onStart: function() {
            i.prototype.onStart.call(this);
            null != this.owner._compMap.PhysicsComponent_44 && this.owner._compMap.PhysicsComponent_44.addContactType("PASSTHROUGH");
            ba.getSystemEntity(this.owner);
            this._physicSystem = ba.getSystemEntity(this.owner).getComponent("PhysicSystem_31");
            this._physicSystem.addContactListener(V.PRELISTENER, da.COLLISION, "PASSTHROUGH", "PASSTHROUGHABLE", this.owner, m(this, this.onPreContact), this.acceptOnce)
        },
        onStop: function() { this._physicSystem.removeContactListener(V.PRELISTENER, da.COLLISION, "PASSTHROUGH", "PASSTHROUGHABLE", this.owner);
            i.prototype.onStop.call(this);
            this._physicSystem = null },
        onPreContact: function(a, b) {
            var c = a._compMap.PassthroughableComponent_84,
                d = null != a._compMap.TransformComponent_70 &&
                1 == a._compMap.TransformComponent_70.direction;
            return this.left || c.left && 180 * b.angle / 3.141592653589793 == (d ? 180 : 0) || this.right || c.right && 180 * b.angle / 3.141592653589793 == (d ? 0 : 180) || this.top || c.top && 90 == 180 * b.angle / 3.141592653589793 || this.bottom || c.bottom && -90 == 180 * b.angle / 3.141592653589793 ? !1 : !0
        },
        __class__: Dh
    });
    var Eh = function() { i.call(this) };
    g["stolo.ensys.components.PassthroughableComponent"] = Eh;
    Eh.__name__ = ["stolo", "ensys", "components", "PassthroughableComponent"];
    Eh.__super__ = i;
    Eh.prototype = k(i.prototype, { get_name: function() { return "PassthroughableComponent_84" }, onStart: function() { null != this.owner._compMap.PhysicsComponent_44 && this.owner._compMap.PhysicsComponent_44.addContactType("PASSTHROUGHABLE") }, __class__: Eh });
    var Fh = function() { i.call(this) };
    g["stolo.ensys.components.FrictionerComponent"] = Fh;
    Fh.__name__ = ["stolo", "ensys", "components", "FrictionerComponent"];
    Fh.__super__ = i;
    Fh.prototype = k(i.prototype, {
        get_name: function() { return "FrictionerComponent_85" },
        onStart: function() {
            i.prototype.onStart.call(this);
            null != this.owner._compMap.PhysicsComponent_44 && this.owner._compMap.PhysicsComponent_44.addContactType("FRICTIONER");
            ba.getSystemEntity(this.owner);
            this._physicSystem = ba.getSystemEntity(this.owner).getComponent("PhysicSystem_31");
            this._physicSystem.addContactListener(V.PRELISTENER, da.COLLISION, "FRICTIONER", "ANY_BODY", this.owner, m(this, this.onPreContact))
        },
        onStop: function() { this._physicSystem.removeContactListener(V.PRELISTENER, da.COLLISION, "FRICTIONER", "ANY_BODY", this.owner);
            i.prototype.onStop.call(this) },
        onPreContact: function(a, b) { 90 != 180 * b.angle / 3.141592653589793 && b.disableFriction(); return !0 },
        __class__: Fh
    });
    var ef = function() { this._contacts = new za;
        this.listenFrom = this.listenTo = "ANY_BODY";
        this.enabled = !0;
        i.call(this) };
    g["stolo.ensys.physics.components.BaseContactHandler"] = ef;
    ef.__name__ = ["stolo", "ensys", "physics", "components", "BaseContactHandler"];
    ef.__super__ = i;
    ef.prototype = k(i.prototype, {
        get_name: function() { return "BaseContactHandler_86" },
        dispose: function() {
            null != this._contacts && this._contacts.dispose();
            this._system = this._contacts = this._interactionType = null;
            i.prototype.dispose.call(this)
        },
        onActorAdded: function() { this._system = this.owner._internal_getFromParents("PhysicSystem_31") },
        onStart: function() { i.prototype.onStart.call(this);
            this.listenFrom = this.validateContactType(this.listenFrom);
            this.listenTo = this.validateContactType(this.listenTo); if (null == this._interactionType) { if (null != this.contactMode && "" != this.contactMode) throw "TODO: handle contactMode string";
                this._interactionType = da.ANY } },
        addLocalListeners: function(a,
            b, c, d) { return this.addListeners(this.listenFrom, this.listenTo, this._interactionType, a, b, c, d) },
        addListeners: function(a, b, c, d, e, f, l) { null == c && (c = da.ANY); if (null == a || null == b) throw "Need both listenFrom and listenTo";
            null != d && this.addContactListener(V.BEGIN, c, a, b, this.owner, d);
            null != e && this.addContactListener(V.END, c, a, b, this.owner, e);
            null != f && this.addContactListener(V.PRELISTENER, c, a, b, this.owner, f);
            null != l && this.addContactListener(V.ONGOING, c, a, b, this.owner, l) },
        addContactListener: function(a, b, c, d, e,
            f, l) { null == l && (l = !1);
            this._contacts.add(new Wk(this._system, a, b, c, d, e, f, l)) },
        validateContactType: function(a) { return null == a || "" == a ? "ANY_BODY" : a },
        onStop: function() { null != this._contacts && this._contacts.dispose();
            i.prototype.onStop.call(this) },
        __class__: ef
    });
    var Xk = function() { this.adaptive = this.ongoing = this._fixedAngle = !1;
        this.unidirectional = !0;
        this.angle = -1;
        this.center = !1;
        this.force = 3E3;
        ef.call(this) };
    g["stolo.ensys.physics.components.ForceField"] = Xk;
    Xk.__name__ = ["stolo", "ensys", "physics", "components",
        "ForceField"
    ];
    Xk.__super__ = ef;
    Xk.prototype = k(ef.prototype, {
        get_name: function() { return "ForceField_87" },
        dispose: function() { ef.prototype.dispose.call(this) },
        onStart: function() { ef.prototype.onStart.call(this);
            this.addLocalListeners(m(this, this.onContactBegin), null, null, this.ongoing ? m(this, this.onContactOnGoing) : null);
            this.setAngle(this.angle) },
        onContactBegin: function(a, b) { if (!this.enabled || !this.isValidContact(a, b)) return !1;
            this.applyForce(a, this.getContactAngle(a, b)); return !0 },
        onContactOnGoing: function(a,
            b) { if (!this.enabled || !this.isValidContact(a, b)) return !1;
            this.applyForce(a, this.getContactAngle(a, b)); return !0 },
        isValidContact: function(a) { return this._fixedAngle && this.unidirectional && 0 > a._compMap.PhysicsComponent_44.getVelocity().get_x() * this.owner._compMap.TransformComponent_70.direction ? !1 : !0 },
        getContactAngle: function(a, b) {
            return this._fixedAngle ? this.adaptive && -1 == this.owner._compMap.TransformComponent_70.direction ? this._radians + Math.PI : this._radians : this.center || null == b ? this.owner._compMap.PhysicsComponent_44.getAngle(a) :
                b.angle
        },
        applyForce: function(a, b) { a._compMap.PhysicsComponent_44.applyAngularImpulse(b, this.force) },
        setAngle: function(a) { this.angle = a; - 1 == a ? this._fixedAngle = !1 : (this._fixedAngle = !0, this._radians = db.radians(a + -90)) },
        __class__: Xk
    });
    var vg = function() { this.resistanceX = this.resistanceY = -1;
        this.resistance = vg.defaultResistance;
        this.enabled = !0;
        i.call(this) };
    g["stolo.ensys.physics.components.AirFriction"] = vg;
    vg.__name__ = ["stolo", "ensys", "physics", "components", "AirFriction"];
    vg.__super__ = i;
    vg.prototype = k(i.prototype, {
        get_name: function() { return "AirFriction_88" },
        dispose: function() { i.prototype.dispose.call(this);
            this._physics = null },
        onStart: function() { i.prototype.onStart.call(this); - 1 == this.resistanceX && (this.resistanceX = this.resistance); - 1 == this.resistanceY && (this.resistanceY = this.resistance);
            this._physics = this.owner._compMap.PhysicsComponent_44 },
        onUpdate: function(a) {
            i.prototype.onUpdate.call(this, a);
            if (this.enabled) {
                var b = this._physics.getBody();
                if (null != b) {
                    var c;
                    null == b.zpp_inner.wrap_vel && b.zpp_inner.setupVelocity();
                    c = b.zpp_inner.wrap_vel;
                    0 < this.resistanceX && c.set_x(function() { c.zpp_inner.validate(); return c.zpp_inner.x }(this) - function() { c.zpp_inner.validate(); return c.zpp_inner.x }(this) * this.resistanceX * a);
                    0 < this.resistanceY && c.set_y(function() { c.zpp_inner.validate(); return c.zpp_inner.y }(this) - function() { c.zpp_inner.validate(); return c.zpp_inner.y }(this) * this.resistanceY * a)
                }
            }
        },
        __class__: vg
    });
    var me = function() {
        this._cooldown = 0;
        this.onDeath = new S;
        this.onDamageCancelled = new S;
        this.onDamage = new S;
        this.health = new $b(0);
        i.call(this)
    };
    g["stolo.ensys.components.HealthComponent"] = me;
    me.__name__ = ["stolo", "ensys", "components", "HealthComponent"];
    me.__super__ = i;
    me.prototype = k(i.prototype, {
        get_name: function() { return "HealthComponent_90" },
        dispose: function() { i.prototype.dispose.call(this);
            this._soundSystem = null },
        onAdded: function() { 0 < this.hits && (this.maximum = this.hits);
            this.set(0 < this.start ? this.start : this.maximum) },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._soundSystem = ba.getSystemEntity(this.owner)._compMap.SoundSystem_51;
            null != this.owner._compMap.PhysicsComponent_44 && this.owner._compMap.PhysicsComponent_44.addContactType("DAMAGEABLE")
        },
        onUpdate: function(a) { 0 < this._cooldown && (this._cooldown -= a);
            i.prototype.onUpdate.call(this, a) },
        onStop: function() { i.prototype.onStop.call(this);
            this.onDeath = this.onDamage = this.onDamageCancelled = null },
        modify: function(a) { this.health.set__(Math.min(Math.max(0, this.health._value + a), this.maximum)); return this.health._value },
        set: function(a) {
            this.health.set__(Math.min(Math.max(0, a), this.maximum));
            return this.health._value
        },
        isDead: function() { return 0 >= this.health._value },
        canDamage: function() { return this.invincible || 0 >= this.health._value ? !1 : !0 },
        damage: function(a, b, c, d) {
            null == d && (d = 0);
            null == c && (c = 0);
            if (0 < this._cooldown) return !1;
            if (!this.canDamage()) return this.invincible && null != this.invincibleSound && !this.isDead() && this._soundSystem.play(this.invincibleSound, this.owner, me.SOUND_CHANNEL), this.onDamageCancelled.emit(b), !1;
            0 < this.hits ? (this.modify(-1), this.lastDamage = 1) : (this.modify(-a), this.lastDamage =
                a);
            0 < this.cooldown && (this._cooldown = this.cooldown);
            null != this.damageSound && !this.isDead() && this._soundSystem.play(this.damageSound, this.owner, me.SOUND_CHANNEL);
            (0 != this.knock && 0 != c || 0 != d) && this.knockPhysics(b, c, d, this.knock);
            this.onDamage.emit(b);
            this.isDead() && this.die(b);
            return !0
        },
        die: function(a) {
            this.health.set__(0);
            "" != this.deathSound && this._soundSystem.play(this.deathSound, this.owner, me.SOUND_CHANNEL_DEATH);
            if (this.disposeOwner) ba.getSystemEntity(this.owner), ba.getSystemEntity(this.owner).getComponent("ActorSystem_54").removeActor(this.owner);
            else if (this.removePhysics) { var b = this.owner._compMap.PhysicsComponent_44;
                null != b && b.enable(!1) } this.onDeath.emit(a)
        },
        knockPhysics: function(a, b, c, d) { null == d && (d = 1);
            null == c && (c = 0);
            null == b && (b = 0); if (0 != d) { var e = this.owner._compMap.PhysicsComponent_44,
                    f = this.owner._compMap.TransformComponent_70;
                null != e && !e.kinematic && e.setVelocity(b * d * (a._compMap.TransformComponent_70.position.x > f.position.x ? -1 : 1), -c * d) } },
        __class__: me
    });
    var ff = function() {
        this._timer = 0;
        this.assetDisplayType = "image";
        this.assetBase = 1;
        this.assetIndex =
            0;
        i.call(this)
    };
    g["stolo.ensys.components.LauncherComponent"] = ff;
    ff.__name__ = ["stolo", "ensys", "components", "LauncherComponent"];
    ff.__super__ = i;
    ff.prototype = k(i.prototype, {
        get_name: function() { return "LauncherComponent_91" },
        onStart: function() { this._timer = this.shotDelay;
            ba.getSystemEntity(this.owner);
            this._actors = ba.getSystemEntity(this.owner).getComponent("ActorSystem_54");
            ba.getSystemEntity(this.owner);
            this._sounds = ba.getSystemEntity(this.owner).getComponent("SoundSystem_51");
            this._transform = this.owner._compMap.TransformComponent_70 },
        onStop: function() { i.prototype.onStop.call(this);
            this._sounds = this._actors = this._transform = null },
        onUpdate: function(a) { 0 < this._timer && (this._timer -= a) },
        __class__: ff
    });
    var Gh = function() { this.angleSpread = 50;
        this.projectiles = 0;
        ff.call(this) };
    g["stolo.ensys.components.ExploderComponent"] = Gh;
    Gh.__name__ = ["stolo", "ensys", "components", "ExploderComponent"];
    Gh.__super__ = ff;
    Gh.prototype = k(ff.prototype, { __class__: Gh });
    var Hh = function() {
        this._removeIn = 0;
        this.onExploded = new S;
        this.onExplode = new S;
        this.ignoreActors = [];
        this.exploded = !1;
        i.call(this)
    };
    g["stolo.ensys.components.ProjectileComponent"] = Hh;
    Hh.__name__ = ["stolo", "ensys", "components", "ProjectileComponent"];
    Hh.__super__ = i;
    Hh.prototype = k(i.prototype, {
        get_name: function() { return "ProjectileComponent_92" },
        onStart: function() {
            i.prototype.onStart.call(this);
            ba.getSystemEntity(this.owner);
            this._actorSystem = ba.getSystemEntity(this.owner).getComponent("ActorSystem_54");
            ba.getSystemEntity(this.owner);
            this._physicSystem = ba.getSystemEntity(this.owner).getComponent("PhysicSystem_31");
            ba.getSystemEntity(this.owner);
            this._soundSystem = ba.getSystemEntity(this.owner).getComponent("SoundSystem_51");
            this._sprite = this.owner._compMap.Sprite_2;
            this._animation = null != y.instance(this.owner._compMap.Sprite_2, Xc) ? this._sprite : null;
            this._physics = this.owner._compMap.PhysicsComponent_44;
            this._transform = this.owner._compMap.TransformComponent_70;
            null != this._physics && (this._physics.addContactType("PROJECTILE"), this._physicSystem.addContactListener(V.PRELISTENER, da.COLLISION, "PROJECTILE", this.target,
                this.owner, m(this, this.onContactBegin)));
            this._removeIn = this.expire;
            if (null != this._animation) { this.velocityRotation && this._animation.rotation.set__(0); var a = this._animation.animation;
                null != a && a.hasAnim("shoot") && a.hasAnim("idle") && (a.gotoAndPlay(["shoot", "idle"]).loop = !1) }
        },
        onStop: function() {
            this._physicSystem.removeContactListener(V.PRELISTENER, da.COLLISION, "PROJECTILE", this.target, this.owner);
            i.prototype.onStop.call(this);
            this._soundSystem = this._physicSystem = this._actorSystem = this._transform = this._animation =
                this._physics = this._sprite = this.onExploded = this.onExplode = this.ignoreActors = null
        },
        onUpdate: function(a) { if (this.exploded || 0 < this.expire) 0 < this._removeIn ? this._removeIn -= a : this._actorSystem.removeActor(this.owner);!this.exploded && this.velocityRotation && (a = this._physics.getVelocity(), null != this._animation && (a.zpp_inner.validate(), 0 > a.zpp_inner.y ? this._animation.rotation.set__(0) : this._animation.rotation.set__(180))) },
        onContactBegin: function(a) {
            var b = a._compMap.PhysicsComponent_44;
            if (null == b || b.hasContactType("PROJECTILE") &&
                this.ignoreProjectiles) return !1;
            for (var b = 0, c = this.ignoreActors; b < c.length;) { var d = c[b];++b; if (d == a) return !1 } this.exploded || this.explode();
            return !0
        },
        explode: function() {
            if (!this.exploded) {
                this.onExplode.emit(this.owner);
                this.exploded = !0;
                this._removeIn = this.removeAfter;
                if (null != this._animation) {
                    var a = this._animation.animation;
                    null != a && a.hasAnim("explode") && (a.gotoAndPlay("explode", { onComplete: m(this, this.onExplodeComplete) }), this._removeIn = 999, "" != this.explodeSound && this._soundSystem.play(this.explodeSound,
                        this.owner, "PROJECTILE"), this._animation.rotation.set__(0), this._transform.rotation = 0, this._transform.fixedRotation = !0)
                } else this.onExploded.emit(this.owner);
                null != this._physics && this.stopPhysicOnExplode && (this._physics.enable(!1), "" != this.hitSound && this._soundSystem.play(this.hitSound, this.owner, "PROJECTILE"))
            }
        },
        onExplodeComplete: function() { this._removeIn = -1;
            null != this._animation && this._animation.animation.stop();
            this.onExploded.emit(this.owner) },
        __class__: Hh
    });
    var Ih = function() {
        this._activated = !1;
        i.call(this)
    };
    g["stolo.ensys.components.PlatformComponent"] = Ih;
    Ih.__name__ = ["stolo", "ensys", "components", "PlatformComponent"];
    Ih.__super__ = i;
    Ih.prototype = k(i.prototype, {
        get_name: function() { return "PlatformComponent_95" },
        onStart: function() {
            this._physics = this.owner._compMap.PhysicsComponent_44;
            this._initPosition = new X(this.owner._compMap.TransformComponent_70.position.x, this.owner._compMap.TransformComponent_70.position.y);
            this._script = this.owner._compMap.Script_66;
            null == this._script && (this._script =
                new Ob, this.owner.add(this._script));
            this._activated && (this._activated = !1);
            this.activate()
        },
        onStop: function() { i.prototype.onStop.call(this);
            this._position = this._sequence = this._physics = this._script = null },
        onUpdate: function(a) { null != this._position && (this._position.update(a), this._physics.setPosition(this._position.x._value, this._position.y._value, 0.6)) },
        startSequence: function() {
            if (!this.repeat && null != this._sequence) this._script.run(this._sequence);
            else if (!(null == this.sequence || null != this._sequence)) {
                var a =
                    this.sequence.actions;
                this._position = new pd(this._initPosition.x, this._initPosition.y);
                var b = { x: this._position.x, y: this._position.y, offsetX: this._initPosition.x, offsetY: this._initPosition.y };
                null == this.sequence.loop && (this.sequence.loop = !0);
                this.repeat = this.sequence.yoyo || this.sequence.loop;
                this._sequence = pa.getMovementSequence(a, b, this.sequence.loop, this.sequence.yoyo, this.sequence.delay);
                this._sequence.add(new cb(m(this, this.onSequenceComplete)));
                this._script.run(this._sequence)
            }
        },
        onSequenceComplete: function() {
            null !=
                this._script && (this.repeat ? this._script.run(this._sequence) : this._activated = !1)
        },
        activate: function() { this._activated || (this._activated = !0, null != this.sequence && this.startSequence()) },
        __class__: Ih
    });
    var Lf = function() { i.call(this) };
    g["stolo.mods.components.ModsComponent"] = Lf;
    Lf.__name__ = ["stolo", "mods", "components", "ModsComponent"];
    Lf.__super__ = i;
    Lf.prototype = k(i.prototype, {
        get_name: function() { return "ModsComponent_20" },
        onStart: function() { i.prototype.onStart.call(this);
            null != this.mods && this.applyMods(this.mods) },
        applyMods: function(a) { for (var b = this.owner.firstComponent; null != b;) { var c = L.getComponentName(b),
                    c = z.field(a, c);
                null != c && this.applyComponentMods(b, c);
                b = b.next } },
        applyComponentMods: function(a, b) { K.applyMods(a, b) },
        __class__: Lf
    });
    var hg = function() { i.call(this) };
    g["stolo.mods.components.StatsModsComponent"] = hg;
    hg.__name__ = ["stolo", "mods", "components", "StatsModsComponent"];
    hg.__super__ = Lf;
    hg.prototype = k(Lf.prototype, {
        onStart: function() {
            Lf.prototype.onStart.call(this);
            null != this.stats && this.applyStats(this.stats,
                this.source)
        },
        applyStats: function(a, b) { null == b && (b = this.source);
            null == b && (b = hg.defaultSource); if (null == b) throw "No statistic source to apply!"; for (var c = 0, d = z.fields(a); c < d.length;) { var e = d[c];++c; var f = 0;
                Object.prototype.hasOwnProperty.call(a, e) && (f = z.field(a, e));
                e = z.field(b, e);
                null != e && (f = e[f], null != f && this.applyMods(f)) } },
        __class__: hg
    });
    var Un = function() {};
    g["stolo.ensys.components.DefaultComponents"] = Un;
    Un.__name__ = ["stolo", "ensys", "components", "DefaultComponents"];
    var Mf = function(a) {
        this.parallax = { x: 1, y: 1 };
        xc.call(this);
        this.data = a;
        this._name = a.name;
        null != a.parallax && (this.parallax.x = y.parseFloat(a.parallax.x), this.parallax.y = y.parseFloat(a.parallax.y));
        a.alpha && this.setAlpha(a.alpha)
    };
    g["stolo.ensys.display.LayerSprite"] = Mf;
    Mf.__name__ = ["stolo", "ensys", "display", "LayerSprite"];
    Mf.__super__ = xc;
    Mf.prototype = k(xc.prototype, { getName: function() { return this._name }, move: function(a, b) { null != this.offset && (a += this.offset.x, b += this.offset.y);
            this.setXY(a * this.parallax.x, b * this.parallax.y) }, __class__: Mf });
    var Yk = function(a, b, c, d) { null == d && (d = 100);
        this._width = this._height = 1E3;
        this._size = 100;
        Mf.call(this, a);
        this._width = b;
        this._height = c;
        this._size = d;
        this.setAlpha(0.4);
        this.construct() };
    g["stolo.ensys.display.LayerGridSprite"] = Yk;
    Yk.__name__ = ["stolo", "ensys", "display", "LayerGridSprite"];
    Yk.__super__ = Mf;
    Yk.prototype = k(Mf.prototype, {
        draw: function(a) { a.drawTexture(this._texture, (-Math.floor(this.x._value / this._size) - 1) * this._size, (-Math.floor(this.y._value / this._size) - 1) * this._size) },
        construct: function() {
            var a =
                Math.ceil(this._width / this._size) + 1,
                b = Math.ceil(this._height / this._size) + 1;
            this._gridTexture = E.getPack("debug").getTexture("grid");
            this._texture = x._platform.getRenderer().createTexture(a * this._size, b * this._size);
            for (var c = this._texture.get_graphics(), d = 0; d < a;)
                for (var e = d++, f = 0; f < b;) { var l = f++;
                    c.drawTexture(this._gridTexture, e * this._size, l * this._size) }
        },
        __class__: Yk
    });
    var Yc = function(a) {
        this.storagePrefix = "editor";
        this.roundValues = !0;
        this.preventReload = !1;
        this.onEditorLoaded = new ga;
        this.onEditorReady =
            new ga;
        sc.call(this);
        Zk.init();
        this.levelData = a
    };
    g["stolo.ensys.editor.EditorSystem"] = Yc;
    Yc.__name__ = ["stolo", "ensys", "editor", "EditorSystem"];
    Yc.__super__ = sc;
    Yc.prototype = k(sc.prototype, {
        buildSubSystems: function() {
            sc.prototype.buildSubSystems.call(this);
            this.level.onLevelLoaded.connect(m(this, this.onLevelLoaded));
            this.camera.enabled = !1;
            this.clipboard = new $k;
            this.owner.add(this.clipboard);
            this.tool = new al;
            this.owner.add(this.tool);
            this.shortcut = new bl;
            this.owner.add(this.shortcut);
            this.history = new cl;
            this.history.onCommand.connect(m(this, this.onCommand));
            this.owner.add(this.history);
            this.selection = new dl;
            this.owner.add(this.selection);
            this.document = new el;
            this.owner.add(this.document);
            this.rendererState = new fl(this);
            this.owner.add(this.rendererState);
            this.dialog = new gl;
            this.owner.add(this.dialog);
            this.logic = new hl;
            this.logic.onComplete.connect(m(this, this.onLogicComplete));
            this.owner.add(this.logic);
            window.onbeforeunload = m(this, this.onWindowBeforeUnload);
            Nc.focusOnCanvas();
            this.onEditorReady.emit()
        },
        onLevelLoaded: function() { na.main.load() },
        onCommand: function() { this.document.isDirty = !0 },
        onWindowBeforeUnload: function() { if (this.document.isDirty || this.preventReload) { if (this.document.isDirty) this.document["export"](); return "Dude, are you sure you want to leave? Think of the kittens!" } return null },
        buildLevel: function() { this.level = new il;
            this.owner.add(this.level) },
        onLogicComplete: function() { this.onEditorLoaded.emit() },
        __class__: Yc
    });
    var Db = function(a) { this._system = a };
    g["stolo.ensys.editor.actions.Action"] =
        Db;
    Db.__name__ = ["stolo", "ensys", "editor", "actions", "Action"];
    Db.prototype = { execute: function() { throw "action execute not implemented"; }, __class__: Db };
    var jl = function(a) { this._system = a };
    g["stolo.ensys.editor.actions.BringToFrontAction"] = jl;
    jl.__name__ = ["stolo", "ensys", "editor", "actions", "BringToFrontAction"];
    jl.__super__ = Db;
    jl.prototype = k(Db.prototype, {
        execute: function() {
            var a = this._system.selection.getAll();
            if (0 != a.length)
                if (1 == a.length) this._system.history.add(new Nf(a[0], !0));
                else {
                    for (var b = new Of,
                            c = 0; c < a.length;) { var d = a[c];++c;
                        b.add(new Nf(d, !0)) } this._system.history.add(b)
                }
        },
        __class__: jl
    });
    var Jh = function(a) { this._system = a };
    g["stolo.ensys.editor.actions.CopyAction"] = Jh;
    Jh.__name__ = ["stolo", "ensys", "editor", "actions", "CopyAction"];
    Jh.__super__ = Db;
    Jh.prototype = k(Db.prototype, {
        execute: function() { var a = this._system.selection.getAll(); if (0 != a.length) { for (var b = [], c = 0; c < a.length;) { var d = a[c];++c;
                    d = d._compMap.EditorMetaComponent_28;
                    null != d && b.push(K.clone(d.getTemplate())) } this._system.clipboard.set(b) } },
        __class__: Jh
    });
    var kl = function(a) { this._system = a };
    g["stolo.ensys.editor.actions.DuplicateAction"] = kl;
    kl.__name__ = ["stolo", "ensys", "editor", "actions", "DuplicateAction"];
    kl.__super__ = Db;
    kl.prototype = k(Db.prototype, { execute: function() {
            (new Jh(this._system)).execute();
            (new Kh(this._system)).execute() }, __class__: kl });
    var Kh = function(a) { this.offset = new X(10, 10);
        this._system = a };
    g["stolo.ensys.editor.actions.PasteAction"] = Kh;
    Kh.__name__ = ["stolo", "ensys", "editor", "actions", "PasteAction"];
    Kh.__super__ = Db;
    Kh.prototype =
        k(Db.prototype, {
            execute: function() { var a = K.clone(this._system.clipboard.get()); if (0 != a.length) { for (var b = new Of, c = 0; c < a.length;) { var d = a[c];++c;
                        b.add(this.createSpawnCommand(d)) } this._system.history.add(b);
                    this._system.selection.clear();
                    a = 0; for (b = b.get_commands(); a < b.length;) c = b[a], ++a, this._system.selection.add(I.__cast(c, wg).actor) } },
            createSpawnCommand: function(a) {
                a = K.clone(a);
                null == a.transform && (a.transform = {});
                var b = a.transform.position;
                null == b && (b = a.transform.position = { x: 0, y: 0 });
                b.x += this.offset.x;
                b.y += this.offset.y;
                return new wg(this._system, a.template.key, b, a)
            },
            __class__: Kh
        });
    var ll = function(a) { this._system = a };
    g["stolo.ensys.editor.actions.RedoAction"] = ll;
    ll.__name__ = ["stolo", "ensys", "editor", "actions", "RedoAction"];
    ll.__super__ = Db;
    ll.prototype = k(Db.prototype, { execute: function() { this._system.history.redo() }, __class__: ll });
    var ml = function(a) { this._system = a };
    g["stolo.ensys.editor.actions.SendToBackAction"] = ml;
    ml.__name__ = ["stolo", "ensys", "editor", "actions", "SendToBackAction"];
    ml.__super__ =
        Db;
    ml.prototype = k(Db.prototype, { execute: function() { var a = this._system.selection.getAll(); if (0 != a.length)
                if (1 == a.length) this._system.history.add(new Nf(a[0], !1));
                else { for (var b = new Of, c = 0; c < a.length;) { var d = a[c];++c;
                        b.add(new Nf(d, !1)) } this._system.history.add(b) } }, __class__: ml });
    var nl = function(a) { this._system = a };
    g["stolo.ensys.editor.actions.TestAction"] = nl;
    nl.__name__ = ["stolo", "ensys", "editor", "actions", "TestAction"];
    nl.__super__ = Db;
    nl.prototype = k(Db.prototype, {
        execute: function() { this._system.history.add(new ol(this._system)) },
        __class__: nl
    });
    var pl = function(a) { this._system = a };
    g["stolo.ensys.editor.actions.UndoAction"] = pl;
    pl.__name__ = ["stolo", "ensys", "editor", "actions", "UndoAction"];
    pl.__super__ = Db;
    pl.prototype = k(Db.prototype, { execute: function() { this._system.history.undo() }, __class__: pl });
    var mb = function(a) { null == a && (a = ia.getClassName(ia.getClass(this)));
        this.label = this.name = a };
    g["stolo.ensys.editor.commands.Command"] = mb;
    mb.__name__ = ["stolo", "ensys", "editor", "commands", "Command"];
    mb.prototype = {
        redo: function() {
            throw "redo not implemented";
        },
        undo: function() { throw "undo not implemented"; },
        __class__: mb
    };
    var Of = function() { this._commands = [];
        mb.call(this, "Compound") };
    g["stolo.ensys.editor.commands.CompoundCommand"] = Of;
    Of.__name__ = ["stolo", "ensys", "editor", "commands", "CompoundCommand"];
    Of.__super__ = mb;
    Of.prototype = k(mb.prototype, {
        get_commands: function() { return this._commands },
        add: function(a) { this._commands.push(a) },
        redo: function() { for (var a = 0, b = this._commands; a < b.length;) { var c = b[a];++a;
                c.redo() } },
        undo: function() {
            for (var a = 0, b = this._commands; a <
                b.length;) { var c = b[a];++a;
                c.undo() }
        },
        __class__: Of,
        __properties__: { get_commands: "get_commands" }
    });
    var Nf = function(a, b) { null == b && (b = !1);
        mb.call(this, b ? "Bring actor to front" : "Send actor to back");
        this._actor = a;
        this._container = a.parent._compMap.Sprite_2;
        this._index = this._container.getChildIndex(a);
        this._bringToFront = b };
    g["stolo.ensys.editor.commands.DepthCommand"] = Nf;
    Nf.__name__ = ["stolo", "ensys", "editor", "commands", "DepthCommand"];
    Nf.__super__ = mb;
    Nf.prototype = k(mb.prototype, {
        redo: function() {
            this._bringToFront ?
                this._container.bringToFront(this._actor) : this._container.sendToBack(this._actor)
        },
        undo: function() { this._container.setChildIndex(this._actor, this._index) },
        __class__: Nf
    });
    var ql = function(a, b, c, d) { var e = b._compMap.TemplateComponent_53;
        mb.call(this, "Move actor '" + (null != e ? e.key : "unknown") + "' from " + y.string(c) + " to " + y.string(d));
        this.system = a;
        this.actor = b;
        this.from = c;
        this.to = d };
    g["stolo.ensys.editor.commands.MoveCommand"] = ql;
    ql.__name__ = ["stolo", "ensys", "editor", "commands", "MoveCommand"];
    ql.__super__ =
        mb;
    ql.prototype = k(mb.prototype, { redo: function() { this.system.logic.setDefaultTool();
            this.system.tool.getCurrent().moveActor(this.to.x, this.to.y, this.actor, !1, !1) }, undo: function() { this.system.logic.setDefaultTool();
            this.system.tool.getCurrent().moveActor(this.from.x, this.from.y, this.actor, !1, !1) }, __class__: ql });
    var rl = function(a, b, c, d, e) { mb.call(this, "Rotate actor '" + b._compMap.TemplateComponent_53.key + "' from " + c + " to " + d);
        this.system = a;
        this.actor = b;
        this.from = c;
        this.to = d;
        this.snap = e };
    g["stolo.ensys.editor.commands.RotateCommand"] =
        rl;
    rl.__name__ = ["stolo", "ensys", "editor", "commands", "RotateCommand"];
    rl.__super__ = mb;
    rl.prototype = k(mb.prototype, { redo: function() { this.system.logic.setDefaultTool();
            this.system.tool.getCurrent().rotateActor(this.to, this.actor, !1, this.snap) }, undo: function() { this.system.logic.setDefaultTool();
            this.system.tool.getCurrent().rotateActor(this.from, this.actor, !1, this.snap) }, __class__: rl });
    var wg = function(a, b, c, d) {
        mb.call(this, "Spawn actor '" + b + "'");
        this.system = a;
        this.templateName = b;
        this.position = c;
        this.data =
            d
    };
    g["stolo.ensys.editor.commands.SpawnCommand"] = wg;
    wg.__name__ = ["stolo", "ensys", "editor", "commands", "SpawnCommand"];
    wg.__super__ = mb;
    wg.prototype = k(mb.prototype, { redo: function() { var a = { template: { key: this.templateName }, transform: { position: this.position } };
            null != this.data && (a = K.merge(this.data, a, !0));
            this.actor = this.system.level.spawnActor(a);
            this.system.selection.set(this.actor) }, undo: function() { this.system.actors.removeActor(this.actor) }, __class__: wg });
    var ol = function(a, b) {
        null == b && (b = "trace command");
        mb.call(this, "Trace");
        this.label = b;
        this._editor = a;
        this._text = b
    };
    g["stolo.ensys.editor.commands.TraceCommand"] = ol;
    ol.__name__ = ["stolo", "ensys", "editor", "commands", "TraceCommand"];
    ol.__super__ = mb;
    ol.prototype = k(mb.prototype, { redo: function() { null }, undo: function() { null }, __class__: ol });
    var Me = function() { this._disposer = new za;
        this.smallStepX = this.smallStepY = -1;
        this.smallStep = 10;
        this.stepX = this.stepY = -1;
        this.step = 100;
        this.buttonSize = new X(30, 30);
        this.isActive = !1;
        this.fontStyle = Yc.DEFAULT_FONT;
        i.call(this) };
    g["stolo.ensys.editor.component.BaseEditorResizer"] = Me;
    Me.__name__ = ["stolo", "ensys", "editor", "component", "BaseEditorResizer"];
    Me.__super__ = i;
    Me.prototype = k(i.prototype, {
        get_name: function() { return "BaseEditorResizer_74" },
        onStart: function() {
            i.prototype.onStart.call(this);
            0 > this.stepX && (this.stepX = this.step);
            0 > this.stepY && (this.stepY = this.step);
            0 > this.smallStepX && (this.smallStepX = this.smallStep);
            0 > this.smallStepY && (this.smallStepY = this.smallStep);
            this._buttonsX = this.addButtons(m(this, this.onIncreaseX),
                m(this, this.onDecreaseX));
            this._buttonsX._compMap.Sprite_2.setXY(0, -this.buttonSize.y);
            this._buttonsY = this.addButtons(m(this, this.onIncreaseY), m(this, this.onDecreaseY));
            this._buttonsY._compMap.Sprite_2.setXY(0, 0);
            this._buttonsY._compMap.Sprite_2.setRotation(90);
            this.owner._compMap.EditorMetaComponent_28.onSelect.connect(m(this, this.onSelect));
            this.owner._compMap.EditorMetaComponent_28.onDeselect.connect(m(this, this.onDeselect));
            this.onDeselect(null)
        },
        onSelect: function() {
            this.isActive = !0;
            this._buttonsX._compMap.Sprite_2.set_visible(!0);
            this._buttonsY._compMap.Sprite_2.set_visible(!0);
            this._disposer.add(x._platform.getKeyboard().up.connect(m(this, this.onKeyUp)))
        },
        onKeyUp: function(a) { switch (a.key[1]) {
                case 89:
                    this.onIncreaseY(null); break;
                case 88:
                    this.onDecreaseY(null); break;
                case 82:
                    this.onIncreaseX(null); break;
                case 87:
                    this.onDecreaseX(null) } },
        smallSteps: function() { return x._platform.getKeyboard().isDown(Me.SMALL_STEP_MODIFIER) },
        onDeselect: function() {
            this.isActive = !1;
            this._buttonsX._compMap.Sprite_2.set_visible(!1);
            this._buttonsY._compMap.Sprite_2.set_visible(!1);
            this._disposer.dispose()
        },
        addButtons: function(a, b) { var c = new p;
            c.add(new r);
            this.owner.addChild(c); var d = this.addButton("-", b);
            c.addChild(d.owner);
            d = this.addButton("+", a);
            d.setXY(this.buttonSize.x, 0);
            c.addChild(d.owner); return c },
        addButton: function(a, b) {
            var c = new p,
                d = new Wa(10053375, this.buttonSize.x, this.buttonSize.y);
            d.alpha.set__(0.3);
            c.add(d);
            c = A.createTextSprite(a, this.fontStyle, c);
            c.set_pointerEnabled(!1);
            c.set_align(Z.Center);
            c.centerAnchor();
            c.setXY(this.buttonSize.x / 2, this.buttonSize.y / 2);
            d.get_pointerDown().connect(b);
            return d
        },
        onIncreaseX: function() { this.smallSteps() },
        onDecreaseX: function() { this.smallSteps() },
        onIncreaseY: function() { this.smallSteps() },
        onDecreaseY: function() { this.smallSteps() },
        updateSelection: function() { var a = this.owner._compMap.EditorSelectionComponent_27;
            null != a && (a.dispose(), this.owner.add(new ug)) },
        __class__: Me
    });
    var xg = function() { Me.call(this) };
    g["stolo.ensys.editor.component.EditorPatternResizer"] = xg;
    xg.__name__ = ["stolo", "ensys", "editor", "component", "EditorPatternResizer"];
    xg.__super__ = Me;
    xg.prototype = k(Me.prototype, {
        onStart: function() { Me.prototype.onStart.call(this);
            this._display = y.instance(this.owner._compMap.Sprite_2, Kd) },
        onIncreaseX: function() { this._display.width += this.smallSteps() ? this.smallStepX : this.stepX;
            this.owner._compMap.EditorMetaComponent_28.updateProperty(Kd.COMPONENT_NAME, "width", this._display.width);
            this.updateSelection() },
        onDecreaseX: function() {
            var a;
            a = this.smallSteps() ? this.smallStepX : this.stepX;
            this._display.width = y["int"](Math.max(this.stepX, this._display.width -
                a));
            this.owner._compMap.EditorMetaComponent_28.updateProperty(Kd.COMPONENT_NAME, "width", this._display.width);
            this.updateSelection()
        },
        onIncreaseY: function() { this._display.height += this.smallSteps() ? this.smallStepY : this.stepY;
            this.owner._compMap.EditorMetaComponent_28.updateProperty(Kd.COMPONENT_NAME, "height", this._display.height);
            this.updateSelection() },
        onDecreaseY: function() {
            var a;
            a = this.smallSteps() ? this.smallStepY : this.stepY;
            this._display.height = y["int"](Math.max(a, this._display.height - a));
            this.owner._compMap.EditorMetaComponent_28.updateProperty(Kd.COMPONENT_NAME,
                "height", this._display.height);
            this.updateSelection()
        },
        __class__: xg
    });
    var yg = function() { this._disposer = new za;
        this.isActive = !1;
        this.fontStyle = Yc.DEFAULT_FONT;
        this.lineSize = 2;
        this.lineColor = -1;
        this.vertexSize = 10;
        this.vertexColor = -1;
        this.color = 16711680;
        this.drawLines = !1;
        this.targetProperty = "shape";
        this.targetComponent = "physics";
        this.buttonSize = new X(30, 30);
        i.call(this) };
    g["stolo.ensys.editor.component.EditorPolygons"] = yg;
    yg.__name__ = ["stolo", "ensys", "editor", "component", "EditorPolygons"];
    yg.__super__ =
        i;
    yg.prototype = k(i.prototype, {
        get_name: function() { return "EditorPolygons_75" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this.owner._compMap.EditorMetaComponent_28.onSelect.connect(m(this, this.onSelect));
            this.owner._compMap.EditorMetaComponent_28.onDeselect.connect(m(this, this.onDeselect)); - 1 < this.color && 0 > this.lineColor && (this.lineColor = this.color); - 1 < this.color && 0 > this.vertexColor && (this.vertexColor = this.color);
            this._buttons = this.addButtons();
            this._buttons.setXY(-30, -30);
            var a = this.owner._compMap.Sprite_2;
            a.set_pointerEnabled(!0);
            null != a && "sprite" == a.asset && "debug" == a.pack && (a.createSprite(), a.setAnchor(0, 0), a.sprite.alpha.set__(0.2), this.drawLines && a.sprite.alpha.set__(0));
            this.drawLines && (this._lines = [], this.onSelect(null));
            this.onDeselect(null)
        },
        onSelect: function() {
            this.isActive = !0;
            this._buttons.set_visible(!0);
            if (null == this._container)
                if (this._container = new r, this._container.set_pointerEnabled(!0), this.owner.addChild((new p).add(this._container)), this._physics = this.owner._compMap.PhysicsComponent_44,
                    null != this._physics)
                    if (null != this._physics.shape && null != this._physics.shape.points) this.setPoints(this._physics.shape.points), this._physics.onShapesCreated.connect(m(this, this.onPhysicsShapes)), this.onPhysicsShapes();
                    else throw "No polygon on " + this.owner._compMap.TemplateComponent_53.key;
            else throw "Need physics component on " + this.owner._compMap.TemplateComponent_53.key;
            this._container.set_visible(!0)
        },
        onPhysicsShapes: function() {
            if (this.drawLines) {
                null != this._physics && this._physics.owner._compMap.PhysicsDebugComponent_46.sprite.set_visible(!1);
                for (var a = this._points.length, b, c, d, e = 0; e < a;) b = e++, d = this._points[b], c = b == a - 1 ? this._points[0] : this._points[b + 1], null == this._lines[b] && this._lines.push(new Jk(this.lineColor, this.lineSize)), b = this._lines[b], null == b.owner && this.owner.addChild((new p).add(b), !1), b.fromTo(d.x, d.y, c.x, c.y)
            }
        },
        setPoints: function(a) { this._points = a; for (var b = 0; b < a.length;) { var c = a[b];++b;
                this.addPoint(c) } this.updateContainer() },
        updateContainer: function() {},
        addPoint: function(a) {
            var b = new sl;
            b.data = a;
            b.context = this.owner;
            b.color =
                this.vertexColor;
            b.size = this.vertexSize;
            b.disposer.add(b.onChange.connect(m(this, this.onVertexChanged)));
            b.disposer.add(b.onSelect.connect(m(this, this.onVertexSelect)));
            b.disposer.add(b.onDeselect.connect(m(this, this.onVertexDeselect)));
            this._container.owner.addChild((new p).add(b))
        },
        onVertexChanged: function() {
            null != this._physics && (this._physics.createShapes(), this.updateContainer());
            this.owner._compMap.EditorMetaComponent_28.updateProperty(this.targetComponent, this.targetProperty, { points: this._points });
            this.owner._compMap.EditorMetaComponent_28.updateProperty(this.targetComponent, "offset", this.getCenter())
        },
        onVertexSelect: function(a) { null != this.currentVertex && this.currentVertex != a && this.currentVertex.cancel();
            this.currentVertex = a;
            null != this.currentVertex && (a = this.owner._compMap.EditorMetaComponent_28, null != a && (a.moveEnabled = !1)) },
        onVertexDeselect: function(a) { a == this.currentVertex && (a = this.owner._compMap.EditorMetaComponent_28, null != a && (a.moveEnabled = !0)) },
        onDeselect: function() {
            this.isActive = !1;
            this._buttons.set_visible(!1);
            null != this._container && this._container.set_visible(!1);
            this._disposer.dispose()
        },
        addButtons: function() { var a = new p;
            a.add(new r);
            this.owner.addChild(a); var b = this.addButton("-", m(this, this.onBtnRemove));
            a.addChild(b.owner);
            b = this.addButton("+", m(this, this.onBtnAdd));
            b.setXY(this.buttonSize.x, 0);
            a.addChild(b.owner); return a._compMap.Sprite_2 },
        addButton: function(a, b) {
            var c = new p,
                d = new Wa(10053375, this.buttonSize.x, this.buttonSize.y);
            d.alpha.set__(0.3);
            c.add(d);
            c = A.createTextSprite(a,
                this.fontStyle, c);
            c.set_pointerEnabled(!1);
            c.set_align(Z.Center);
            c.centerAnchor();
            c.setXY(this.buttonSize.x / 2, this.buttonSize.y / 2);
            d.get_pointerDown().connect(b);
            return d
        },
        onBtnRemove: function() { if (null != this.currentVertex)
                for (var a = 0, b = 0, c = this._points; b < c.length;) { var d = c[b];++b; if (d == this.currentVertex.data) { H.remove(this._points, d);
                        this.currentVertex.cancel();
                        this.currentVertex.owner.dispose();
                        this.onVertexChanged(this.currentVertex); break } a++ } },
        onBtnAdd: function() {
            if (null != this.currentVertex)
                for (var a =
                        0, b = 0, c = this._points; b < c.length;) { var d = c[b];++b; if (d == this.currentVertex.data) { this._points.splice(a + 1, 0, { x: d.x + 10, y: d.y + 10 });
                        this.addPoint(this._points[a + 1]);
                        this.onVertexChanged(null); break } a++ } else this._points.push({ x: 0, y: 0 }), this.addPoint(this._points[this._points.length - 1]), this.onVertexChanged(null)
        },
        getCenter: function() {
            for (var a = this._points[0].x, b = this._points[0].x, c = this._points[0].y, d = this._points[0].y, e = 1, f = this._points.length; e < f;) {
                var l = e++;
                this._points[l].x < a ? a = this._points[l].x :
                    this._points[l].x > b && (b = this._points[l].x);
                this._points[l].y < c ? c = this._points[l].y : this._points[l].y > d && (d = this._points[l].y)
            }
            return { x: (b - a) / 2 + a, y: (d - c) / 2 + c }
        },
        __class__: yg
    });
    var Pf = function() { i.call(this) };
    g["stolo.ensys.editor.component.EditorRemover"] = Pf;
    Pf.__name__ = ["stolo", "ensys", "editor", "component", "EditorRemover"];
    Pf.__super__ = i;
    Pf.prototype = k(i.prototype, {
        get_name: function() { return "EditorRemover_65" },
        onStart: function() { i.prototype.onStart.call(this);
            this.owner._internal_getFromParents("ActorSystem_54").removeActor(this.owner) },
        __class__: Pf
    });
    var Zk = function() {};
    g["stolo.ensys.editor.component.EditorComponents"] = Zk;
    Zk.__name__ = ["stolo", "ensys", "editor", "component", "EditorComponents"];
    Zk.init = function() { Hb.registerComponents(Zk.map, !1) };
    var tl = function(a) { this.moveEnabled = !0;
        this.onDeselect = new S;
        this.onSelect = new S;
        i.call(this);
        this._template = null == a ? {} : a };
    g["stolo.ensys.editor.component.EditorMetaComponent"] = tl;
    tl.__name__ = ["stolo", "ensys", "editor", "component", "EditorMetaComponent"];
    tl.__super__ = i;
    tl.prototype = k(i.prototype, { get_name: function() { return "EditorMetaComponent_28" }, onAdded: function() { i.prototype.onAdded.call(this) }, onRemoved: function() { i.prototype.onRemoved.call(this) }, updateProperty: function(a, b, c) { Object.prototype.hasOwnProperty.call(this._template, a) || z.setProperty(this._template, a, {});
            a = z.getProperty(this._template, a);
            z.setProperty(a, b, c) }, getTemplate: function() { return this._template }, __class__: tl });
    var ul = function() { this.selection = "";
        r.call(this) };
    g["stolo.ensys.editor.component.EditorSelectionInfo"] =
        ul;
    ul.__name__ = ["stolo", "ensys", "editor", "component", "EditorSelectionInfo"];
    ul.__super__ = r;
    ul.prototype = k(r.prototype, {
        onStart: function() { r.prototype.onStart.call(this);
            this._text = C.getTextSprite("debug_font");
            this.owner.addChild((new p).add(this._text)) },
        onUpdate: function(a) { r.prototype.onUpdate.call(this, a);
            null != this.thumbnail ? this._text.set_text(this.thumbnail) : null != this.current && this.updateInfo() },
        show: function(a) { this.current = a;
            this.updateInfo() },
        updateInfo: function() {
            if (!(null == this.current ||
                    null == this.current.firstComponent)) { var a = this.current._compMap.TransformComponent_70;
                this.selection = this.current._compMap.TemplateComponent_53.key + ": " + y.string(a.position.x) + "," + y.string(a.position.y);
                this._text.set_text(this.selection) }
        },
        hide: function() { this.current = null;
            this._text.set_text(this.selection = "") },
        __class__: ul
    });
    var sl = function() {
        this.round = this.liveUpdate = !0;
        this.isSelected = this.isDragging = this.hasMoved = !1;
        this.lastPointerPosition = new X;
        this.disposer = new za;
        this.size = 10;
        this.color =
            16711680;
        this.onDeselect = new S;
        this.onSelect = new S;
        this.onChange = new S;
        i.call(this)
    };
    g["stolo.ensys.editor.component.EditorVertex"] = sl;
    sl.__name__ = ["stolo", "ensys", "editor", "component", "EditorVertex"];
    sl.__super__ = i;
    sl.prototype = k(i.prototype, {
        get_name: function() { return "EditorVertex_76" },
        dispose: function() { i.prototype.dispose.call(this);
            null != this.disposer && this.disposer.dispose();
            this.disposer = null },
        onStart: function() {
            this._display = new Wa(this.color, this.size, this.size);
            this._display.centerAnchor();
            this._display.setAlpha(0.5);
            this._display.set_pointerEnabled(!0);
            this.owner.add(this._display);
            this._display.setXY(this.data.x, this.data.y);
            this.disposer.add(this._display.get_pointerDown().connect(m(this, this.onPointerDown)));
            this.disposer.add(x._platform.getPointer().up.connect(m(this, this.onPointerUp)));
            this.disposer.add(x._platform.getKeyboard().up.connect(m(this, this.onKeyUp)))
        },
        onKeyUp: function(a) { if (this.isSelected) switch (a.key[1]) {
                case 83:
                    this.deselect() } },
        onPointerDown: function() {
            this.isDragging = !0;
            this.select()
        },
        onPointerUp: function() { this.isDragging = !1;
            this.isSelected && this.hasMoved && this.deselect() },
        select: function() { this.isSelected || (this.isSelected = !0, this.hasMoved = !1, this.lastPointerPosition.set(x._platform.getPointer().get_x(), x._platform.getPointer().get_y()), this._display.setAlpha(1), this.onSelect.emit(this)) },
        onUpdate: function() {
            this.isSelected && this.isDragging && this.lastPointerPosition.x != x._platform.getPointer().get_x() && this.lastPointerPosition.y != x._platform.getPointer().get_y() &&
                (this.hasMoved = !0, this._display.setXY(this._display.x._value + x._platform.getPointer().get_x() - this.lastPointerPosition.x, this._display.y._value + x._platform.getPointer().get_y() - this.lastPointerPosition.y), this.round && this._display.setXY(Math.round(this._display.x._value), Math.round(this._display.y._value)), this.lastPointerPosition.set(x._platform.getPointer().get_x(), x._platform.getPointer().get_y()), this.liveUpdate && this.updateData())
        },
        deselect: function() {
            this.isSelected && (this.isSelected = !1, this._display.setAlpha(0.5),
                this.onDeselect.emit(this), this.hasMoved && this.updateData())
        },
        updateData: function() { this.data.x = this._display.x._value;
            this.data.y = this._display.y._value;
            this.onChange.emit(this) },
        cancel: function() { this.isDragging = this.hasMoved = !1;
            this.deselect() },
        __class__: sl
    });
    var na = function(a, b, c, d) { this.folders = new M;
        r.call(this);
        this._system = b;
        null == c && (null == na.main && (na.main = new Lh(b)), c = na.main.gui);
        this.id = a;
        this.gui = c;
        null != d && K.configure(this, d) };
    g["stolo.ensys.editor.dialog.Dialog"] = na;
    na.__name__ = ["stolo",
        "ensys", "editor", "dialog", "Dialog"
    ];
    na.createGui = function(a) { return new dat.GUI(a) };
    na.__super__ = r;
    na.prototype = k(r.prototype, {
        onAdded: function() { r.prototype.onAdded.call(this) },
        getFolder: function(a) { var b = this.folders.get(a); if (null == b) { var c = b = this.gui.addFolder(a);
                this.folders.set(a, c);
                c } return b },
        getRangeController: function(a, b, c, d, e) {
            null == e && (e = -1);
            var f = null;
            if (c instanceof Array && null == c.__enum__) f = d.add(a, b, c[0], c[1]).listen();
            else if (0 < c) {
                var l = null;
                0 >= e && (e = 1, 10 > c && (e = 0.25), 5 > c && (e = 0.1),
                    1 >= c && (e = 0.05), 500 < c && (e = 10));
                1 > e && (l = z.field(a, b), a[b] = 0.1);
                f = d.add(a, b, 0, c).listen().step(e);
                1 > e && (a[b] = l, f[b] = l)
            }
            return f
        },
        __class__: na
    });
    var vl = function(a) { na.call(this, "editor", a) };
    g["stolo.ensys.editor.dialog.EditorDialog"] = vl;
    vl.__name__ = ["stolo", "ensys", "editor", "dialog", "EditorDialog"];
    vl.__super__ = na;
    vl.prototype = k(na.prototype, {
        onStart: function() {
            var a = this;
            na.prototype.onStart.call(this);
            this._folder = this.getFolder("Editor");
            this._data = {
                snapX: this._system.logic.snapX,
                snapY: this._system.logic.snapY,
                snapRotation: this._system.logic.snapRotation,
                enablePhysics: this._system.logic.get_enablePhysics(),
                launch: function() { var b = a._system.document["export"](!1),
                        c = a._system.document.getName();
                    va.set(c, b);
                    Oc.getURL("./?level=" + c + "&levels_pack=storage") },
                "export": function() { a._system.document["export"]() }
            };
            this.gui.remember(this._data);
            this._folder.add(this._system.selection.info, "selection").listen();
            this._folder.add(this._data, "snapX", 0, 100).step(10).listen().onChange(function(b) {
                a._system.logic.snapX =
                    b
            });
            this._folder.add(this._data, "snapY", 0, 100).step(10).listen().onChange(function(b) { a._system.logic.snapY = b });
            this._folder.add(this._data, "snapRotation", 0, 180).step(5).listen().onChange(function(b) { a._system.logic.snapRotation = b });
            this._folder.add(this._data, "enablePhysics").onChange(function(b) { a._system.logic.set_enablePhysics(b) });
            this._folder.add(this._data, "export");
            this._folder.add(this._data, "launch");
            var b = Oc.getUrlParams();
            if (0 != b.width && 0 != b.height) {
                var c = b.width,
                    d = b.height;
                if (!(1E4 < c ||
                        1E4 < d)) { var b = this._system.renderer.addLayer({ name: "borders", parallax: { x: 1, y: 1 }, editor: { locked: !0 } }),
                        e = x._platform.getRenderer().createTexture(c, d),
                        f = e.get_graphics();
                    f.fillRect(16777215, 0, 0, c, 2);
                    f.fillRect(16777215, 0, d - 2, c, 2);
                    f.fillRect(16777215, 0, 0, 2, d);
                    f.fillRect(16777215, c - 2, 0, 2, d);
                    f.translate(0.5 * c, 0.5 * d);
                    f.fillRect(16777215, -10, -1, 20, 2);
                    f.fillRect(16777215, -1, -10, 2, 20);
                    c = new ya(e);
                    c.set_pointerEnabled(!1);
                    b.owner.addChild((new p).add(c)) }
            }
        },
        onUpdate: function(a) {
            na.prototype.onUpdate.call(this,
                a);
            this._data.snapX = this._system.logic.snapX;
            this._data.snapY = this._system.logic.snapY;
            this._data.snapRotation = this._system.logic.snapRotation;
            this._data.enablePhysics = this._system.logic.get_enablePhysics()
        },
        __class__: vl
    });
    var wl = function(a) { this._opened = !0;
        this._folders = [];
        this.skipTemplates = ["disposer", "editorSelection"];
        na.call(this, "entity", a, na.createGui());
        this._selection = a.selection };
    g["stolo.ensys.editor.dialog.EntityDialog"] = wl;
    wl.__name__ = ["stolo", "ensys", "editor", "dialog", "EntityDialog"];
    wl.__super__ = na;
    wl.prototype = k(na.prototype, {
        onStart: function() { na.prototype.onStart.call(this);
            this._selection.onSelect.connect(m(this, this.onSelect));
            this._selection.onDeselect.connect(m(this, this.onDeselect)) },
        addComponent: function(a) { var b = L.getComponentName(a);!(null != this.skipTemplates && -1 < this.skipTemplates.indexOf(b)) && null != b && (b = this.gui.addFolder(b), this._folders.push(b), this.expose(a, b, ["_flags"])) },
        onSelect: function(a) {
            if (null != this._currentEntity) this.onDeselect();
            this._currentEntity =
                a;
            null == this.gui && (this.gui = na.createGui({ closed: !this._opened }));
            this.template = a._compMap.TemplateComponent_53.key;
            this.titleController = this.gui.add(this, "template");
            for (a = a.firstComponent; null != a;) this.addComponent(a), a = a.next
        },
        onDeselect: function() { this._currentEntity = null;
            null != this.gui && (this._opened = !this.gui.closed, this.gui.destroy(), this.gui = null) },
        expose: function(a, b, c, d, e, f) {
            for (var l = this, h = [], g = null, g = null, i = [], j = this.getExcludes(a), k = 0, n = z.fields(a); k < n.length;) {
                var m = n[k];
                ++k;
                !(null !=
                    c && -1 < c.indexOf(m)) && !(null != j && -1 < j.indexOf(m)) && (g = z.field(a, m), "boolean" != typeof g && "string" != typeof g && "number" != typeof g && (g | 0) !== g ? 0 < z.fields(g).length && ia["typeof"](g) == P.TObject && this.expose(g, b.addFolder(m), c, a, m) : i.push(m))
            }
            if (0 == i.length) return null;
            for (c = 0; c < i.length;) g = [i[c]], ++c, null != f && f.exists(g[0]) ? (j = f.get(g[0]), g = this.getRangeController(a, g[0], j, b)) : g = b.add(a, g[0]).listen().onChange(function(b) {
                return function(c) {
                    var f = !1;
                    d ? (f = I.__instanceof(d, Je), l.updateComponentMeta(d, e)) : (f =
                        I.__instanceof(a, Je), l.updateProperty(a, b[0], c));
                    f && l.updateTransform()
                }
            }(g)), null != g && h.push(h);
            this.addMethods(a, b);
            return h
        },
        getExcludes: function(a) { a = ia.getClass(a); if (null == a) return null;
            a = z.getProperty(a, "EDITOR_EXCLUDE"); return null == a ? null : a },
        addMethods: function(a, b) { var c = ia.getClass(a); if (null != c && (c = z.getProperty(c, "EDITOR_METHODS"), null != c))
                for (var d = 0; d < c.length;) { var e = c[d];++d;
                    b.add(a, e) } },
        updateProperty: function(a, b, c) {
            var d = this._currentEntity._compMap.EditorMetaComponent_28,
                a = L.getComponentName(a);
            d.updateProperty(a, b, c)
        },
        updateComponentMeta: function(a, b) { var c = this._currentEntity._compMap.EditorMetaComponent_28,
                d = L.getComponentName(a),
                e = z.field(a, b);
            c.updateProperty(d, b, e) },
        updateTransform: function() { var a = this._currentEntity._compMap.TransformComponent_70;
            this._system.tool.getCurrent().moveActor(a.position.x, a.position.y, this._currentEntity, !1, !1) },
        __class__: wl
    });
    var xl = function(a) { na.call(this, "history", a) };
    g["stolo.ensys.editor.dialog.HistoryDialog"] = xl;
    xl.__name__ = ["stolo", "ensys", "editor",
        "dialog", "HistoryDialog"
    ];
    xl.__super__ = na;
    xl.prototype = k(na.prototype, { onStart: function() { var a = this;
            na.prototype.onStart.call(this);
            this._folder = this.getFolder("History");
            this._data = { undo: function() { a._system.history.undo() }, redo: function() { a._system.history.redo() } };
            this._folder.add(this._data, "redo");
            this._folder.add(this._data, "undo") }, __class__: xl });
    var Lh = function(a) { na.call(this, "main", a, na.createGui()) };
    g["stolo.ensys.editor.dialog.MainDialog"] = Lh;
    Lh.__name__ = ["stolo", "ensys", "editor", "dialog",
        "MainDialog"
    ];
    Lh.__super__ = na;
    Lh.prototype = k(na.prototype, {
        onAdded: function() { var a = this;
            na.prototype.onAdded.call(this);
            this._rendererState = this._system.rendererState;
            this.gui._save = this.gui.save;
            this.gui.save = function() { var b = a.gui.preset;
                a.gui._save();
                null != a._rendererState && (a._rendererState.preset = b, a._rendererState.save()) };
            this.gui._revert = this.gui.revert;
            this.gui.revert = function() { var b = a.gui.preset;
                null != a._rendererState && (a._rendererState.preset = b, a._rendererState.load());
                a.gui._revert() } },
        load: function() { var a = this,
                b = this.gui.preset;
            this._rendererState.preset = b;
            this._rendererState.load();
            Ce.delay(function() { a.gui.preset = b }, 50) },
        __class__: Lh
    });
    var yl = function(a) { this._layersLock = new M;
        na.call(this, "renderer", a);
        this._renderer = a.renderer };
    g["stolo.ensys.editor.dialog.RendererDialog"] = yl;
    yl.__name__ = ["stolo", "ensys", "editor", "dialog", "RendererDialog"];
    yl.__super__ = na;
    yl.prototype = k(na.prototype, {
        onStart: function() {
            var a = this;
            na.prototype.onStart.call(this);
            this._layers = this._renderer.getLayers();
            this._folder = this.getFolder("Renderer");
            this._data = { x: this._renderer.displacement.x, y: this._renderer.displacement.y, scale: this._renderer.scale };
            this._folder.add(this._data, "x").listen().onChange(function(b) { a._renderer.move(b, a._data.y) });
            this._folder.add(this._data, "y").listen().onChange(function(b) { a._renderer.move(a._data.x, b) });
            this._folder.add(this._data, "scale", 0.2, 1).listen().onChange(function(b) { a._renderer.setScale(b) });
            for (var b = this._system.rendererState.layersAlphaData, c = this._system.rendererState.layersLockedData,
                    d = this._folder.addFolder("Layers lock"), e = this._folder.addFolder("Layers alpha"), f = 0, l = this._layers; f < l.length;) { var h = [l[f]];++f; var g = h[0].getName(),
                    i = h[0].data.editor; if (null == i || !0 != i.unlockable) z.setProperty(c, g, 0 == (h[0]._flags & 4)), i = d.add(c, g).listen().onChange(function(a) { return function(b) { a[0].set_pointerEnabled(!b) } }(h)), this._layersLock.set(g, i), i;
                z.setProperty(b, g, h[0].alpha._value);
                e.add(b, g, 0, 1).listen().onChange(function(a) { return function(b) { a[0].setAlpha(b) } }(h)) } this._system.rendererState.onLoad.connect(m(this,
                this.onRenderStateLoaded))
        },
        onRenderStateLoaded: function() { for (var a, b = this._layersLock.keys(); b.hasNext();) { var c = b.next();
                a = this._layersLock.get(c);
                a.setValue(z.field(this._system.rendererState.layersLockedData, c)) } },
        onUpdate: function(a) { na.prototype.onUpdate.call(this, a);
            this._data.scale = this._renderer.scale;
            this._data.x = this._renderer.displacement.x;
            this._data.y = this._renderer.displacement.y },
        __class__: yl
    });
    var zc = function(a) {
        this._hasDisplay = !1;
        this.padding = 2;
        r.call(this);
        this._template = a;
        this.templateKey =
            this._template.template.key
    };
    g["stolo.ensys.editor.dialog.TemplateThumbnail"] = zc;
    zc.__name__ = ["stolo", "ensys", "editor", "dialog", "TemplateThumbnail"];
    zc.getDisplayComponent = function(a) { for (var b = 0, a = z.fields(a); b < a.length;) { var c = a[b];++b; if (-1 != zc.spriteComponents.indexOf(c)) return c } return null };
    zc.__super__ = r;
    zc.prototype = k(r.prototype, {
        onAdded: function() {
            r.prototype.onAdded.call(this);
            this._background = new Wa(16777215, 50, 50);
            this.owner.addChild((new p).add(this._background));
            try { this.createSimplifiedActor(zc.getDisplayComponent(this._template)) } catch (a) {
                if (I.__instanceof(a,
                        String)) this.createSimplifiedActor();
                else throw a;
            }
            this._textSprite = C.getTextSprite("debug_font");
            this._textSprite.set_text(this.templateKey);
            this.owner.addChild((new p).add(this._textSprite))
        },
        createSimplifiedActor: function(a) {
            null != this._displaySprite && null != this._displaySprite.owner && (this._displaySprite.owner.parent.removeChild(this._displaySprite.owner), this._displaySprite = null);
            var b = { transform: {} };
            null != this._template.transform && (K.configure(b.transform, this._template.transform), b.transform.fixed = !0);
            null != a ? (this._hasDisplay = !0, z.setField(b, a, K.clone(z.field(this._template, a)))) : (this._hasDisplay = !1, b.image = { pack: "debug", asset: "sprite" });
            null != this._template.customization && (b.customization = K.clone(this._template.customization));
            a = L.create(b);
            this._displaySprite = a._compMap.Sprite_2;
            I.__cast(this._displaySprite, J).offset = null;
            I.__cast(this._displaySprite, J).applyOffset();
            this._displaySprite.centerAnchor();
            this.owner.addChild(a)
        },
        onStart: function() { r.prototype.onStart.call(this) },
        setSize: function(a,
            b) { var c = a - 2 * this.padding,
                d = b - 2 * this.padding;
            this._background.setSize(a, b);
            this._displaySprite.setScaleXY(1, 1); var e = r.getBounds(this._displaySprite.owner),
                f = e.width,
                e = e.height,
                l = f / c,
                h = e / d;
            this._displaySprite.centerAnchor(); var g = 1; if (1 < l || 1 < h) g = l > h ? c / f : d / e, this._displaySprite.setScaleXY(g * (0 < this._displaySprite.scaleX._value ? 1 : -1), g);
            this._displaySprite.setXY(0.5 * a, 0.5 * b);
            this._textSprite.setXY(this.padding, this.padding);
            this._textSprite.setWrapWidth(c) },
        setTextVisible: function(a) {
            this._textSprite.set_visible(this._hasDisplay ?
                a : !0)
        },
        filter: function(a) { if ("" == a) return !0;
            a = a.toLowerCase(); if (-1 != this.templateKey.toLowerCase().indexOf(a)) return !0; var b = this._template.template.tags; if (null != b && -1 != b.toString().toLowerCase().indexOf(a)) return !0; for (var b = 0, c = z.fields(this._template); b < c.length;) { var d = c[b];++b; if (-1 != d.toLowerCase().indexOf(a)) return !0 } return !1 },
        __class__: zc
    });
    var zl = function(a) {
        this._lastPointerUpTime = 0;
        this._filter = "";
        this._sprite = new r;
        this._container = new p;
        this._thumbnails = [];
        this._showLabel = !1;
        this._thumbnailMargin =
            5;
        this._thumbnailSize = 40;
        this._width = 200;
        this._height = x._platform.getStage().get_height();
        na.call(this, "editor", a);
        this._backgroundSprite = new Wa(0, this._width, this._height);
        this._backgroundSprite.setAlpha(0.5)
    };
    g["stolo.ensys.editor.dialog.TemplatesDialog"] = zl;
    zl.__name__ = ["stolo", "ensys", "editor", "dialog", "TemplatesDialog"];
    zl.__super__ = na;
    zl.prototype = k(na.prototype, {
        onStart: function() {
            var a = this;
            na.prototype.onStart.call(this);
            this.owner.addChild((new p).add(this._backgroundSprite));
            this.owner.addChild(this._container.add(this._sprite));
            this._sprite.set_visible(!1);
            this.createThumbnails();
            this._folder = this.getFolder("Templates");
            this._data = { visible: 0 != (this._flags & 2), width: this._width, size: this._thumbnailSize, margin: this._thumbnailMargin, filter: this._filter, text: !1 };
            this._folder.add(this._data, "visible").onChange(function(b) { a.set_visible(b) });
            this._folder.add(this._data, "width", 0, x._platform.getStage().get_width()).onChange(function(b) { a._width = b;
                a.refresh() });
            this._folder.add(this._data, "size", 20, 200).step(10).onChange(function(b) {
                a._thumbnailSize =
                    b;
                a.refresh()
            });
            this._folder.add(this._data, "margin", 0, 100).step(10).onChange(function(b) { a._thumbnailMargin = b;
                a.refresh() });
            this._folder.add(this._data, "text").onChange(function(b) { a._showLabel = b;
                a.refresh() });
            this._folder.add(this._data, "filter").onChange(function(b) { a._filter = b;
                a.refresh() })
        },
        createThumbnails: function() {
            for (var a, b = 0, c = L.getTemplateIds(); b < c.length;) a = c[b], ++b, a = L.getTemplate(a), Object.prototype.hasOwnProperty.call(a, Pf.COMPONENT_NAME) || (a = new zc(a), this._container.addChild((new p).add(a)),
                this._thumbnails.push(a), a.get_pointerUp().connect(m(this, this.onThumbnailPointerUp)));
            this.refresh();
            B.delayCallTo(m(this, this.refresh), 0.1)
        },
        refresh: function() {
            this._sprite.set_visible(!0);
            for (var a = [], b = 0, c = this._thumbnails; b < c.length;) { var d = c[b];++b;
                d.filter(this._filter) ? (d.set_visible(!0), d.setTextVisible(this._showLabel), a.push(d)) : d.set_visible(!1) } b = Math.floor(this._width / (this._thumbnailSize + this._thumbnailMargin));
            c = 0;
            for (d = a.length; c < d;) {
                var e = c++,
                    f = a[e];
                f.setSize(this._thumbnailSize,
                    this._thumbnailSize);
                f.setXY(this._thumbnailMargin + e % b * (this._thumbnailSize + this._thumbnailMargin), this._thumbnailMargin + Math.floor(e / b) * (this._thumbnailSize + this._thumbnailMargin))
            }
            this._backgroundSprite.setSize(this._width, this._thumbnailMargin + Math.floor(a.length / b) * (this._thumbnailSize + this._thumbnailMargin))
        },
        onUpdate: function(a) {
            na.prototype.onUpdate.call(this, a);
            var b = null;
            if (x._platform.getPointer().get_x() < this._backgroundSprite.getNaturalWidth()) {
                if (50 > x._platform.getPointer().get_y() &&
                    0 > this._sprite.y._value) { var c = this._sprite.y;
                    c.set__(c._value + 600 * a) } else x._platform.getPointer().get_y() > this._height - 50 && this._sprite.y._value > -this._backgroundSprite.getNaturalHeight() + this._height && (c = this._sprite.y, c.set__(c._value - 600 * a));
                a = r.hitTest(this._container, x._platform.getPointer().get_x(), x._platform.getPointer().get_y());
                if (null != a) { if (null == a.owner._internal_getFromParents("Sprite_2", zc)) return;
                    b = a.owner._internal_getFromParents("Sprite_2", zc).templateKey }
            }
            this._system.selection.info.thumbnail =
                b
        },
        onThumbnailPointerUp: function(a) { if (0.3 > x._platform.getTime() - this._lastPointerUpTime) { for (var b = this._system.renderer.displacement, a = a.hit, c = null; null != a && null == c;) I.__instanceof(a, zc) && (c = a), a = null == a.owner ? null : null == a.owner.parent ? null : a.owner.parent._compMap.Sprite_2; if (null == c) return;
                this._system.history.add(new wg(this._system, c.templateKey, { x: 0.5 * this._system.renderer.dimensionsScaled.width - b.x, y: 0.5 * this._system.renderer.dimensionsScaled.height - b.y })) } this._lastPointerUpTime = x._platform.getTime() },
        __class__: zl
    });
    var gf = function(a) { this.preset = "Default";
        this.isLoading = this.isSaving = !1;
        this.onSave = new S;
        this.onLoad = new S;
        i.call(this);
        this._system = a };
    g["stolo.ensys.editor.states.BaseEditorState"] = gf;
    gf.__name__ = ["stolo", "ensys", "editor", "states", "BaseEditorState"];
    gf.__super__ = i;
    gf.prototype = k(i.prototype, {
        get_name: function() { return "BaseEditorState_68" },
        isBusy: function() { return this.isLoading || this.isSaving },
        save: function(a) {
            if (!this.isBusy() && (null == a && (a = this.get()), null != a)) {
                this.isSaving = !0;
                var b = JSON.stringify(a),
                    c = this.getStorageprefix();
                va.setWithPrefix(c, "renderer", b);
                this.onSave.emit(a);
                this.isSaving = !1
            }
        },
        get: function() { return {} },
        getStorageprefix: function() { return this._system.storagePrefix + this.preset + "_" },
        load: function() { if (!this.isBusy()) { var a = this.getStorageprefix(),
                    a = va.getWithPrefix(a, "renderer");
                null != a && (this.isLoading = !0, a = JSON.parse(a), null != a && this.apply(a), this.onLoad.emit(a), this.isLoading = !1) } },
        apply: function(a) { K.configure(this, a, !0) },
        __class__: gf
    });
    var fl = function(a) {
        this.layersLockedData = {};
        this.layersAlphaData = {};
        this.zoomMin = 0.2;
        this.zoomMax = 1;
        gf.call(this, a)
    };
    g["stolo.ensys.editor.states.EditorRendererState"] = fl;
    fl.__name__ = ["stolo", "ensys", "editor", "states", "EditorRendererState"];
    fl.__super__ = gf;
    fl.prototype = k(gf.prototype, {
        setRendererScale: function(a, b) { null == b && (b = !0);
            b && (a += this._system.renderer.scale);
            this._system.renderer.setScale(Math.max(this.zoomMin, Math.min(this.zoomMax, a))) },
        setRendererPosition: function(a, b, c) {
            null == c && (c = !1);
            c && (a += this._system.renderer.displacement.x,
                b += this._system.renderer.displacement.y);
            this._system.renderer.move(a, b)
        },
        load: function() { for (var a = 0, b = this._system.renderer.getLayers(); a < b.length;) { var c = b[a];++a;
                c.getName(); var d = c.data.editor;
                null != d && !0 == d.locked && c.set_pointerEnabled(!1) } gf.prototype.load.call(this) },
        get: function() {
            if (null == this._system.renderer) return null;
            for (var a = { renderer: { x: this._system.renderer.displacement.x, y: this._system.renderer.displacement.y, scale: this._system.renderer.scale }, alpha: this.layersAlphaData, locked: this.layersLockedData },
                    b = 0, c = this._system.renderer.getLayers(); b < c.length;) { var d = c[b];++b; var e = d.getName();
                this.layersAlphaData[e] = d.alpha._value;
                this.layersLockedData[e] = 0 == (d._flags & 4) }
            return a
        },
        apply: function(a) {
            null != a.renderer && (this.setRendererPosition(a.renderer.x, a.renderer.y), this.setRendererScale(a.renderer.scale, !1), z.deleteField(a, "renderer"));
            this.layersAlphaData = {};
            this.layersLockedData = {};
            var b;
            if (null != a.locked) {
                for (var c = 0, d = z.fields(a.locked); c < d.length;) {
                    var e = d[c];
                    ++c;
                    b = this._system.renderer.getLayer(e);
                    if (null != b) { var f = z.field(a.locked, e);
                        b.set_pointerEnabled(!f);
                        this.layersLockedData[e] = f }
                }
                z.deleteField(a, "locked")
            }
            if (null != a.alpha) { c = 0; for (d = z.fields(a.alpha); c < d.length;) e = d[c], ++c, b = this._system.renderer.getLayer(e), null != b && (f = z.field(a.alpha, e), 0 <= f && (b.setAlpha(f), this.layersAlphaData[e] = f));
                z.deleteField(a, "alpha") } gf.prototype.apply.call(this, a)
        },
        __class__: fl
    });
    var $k = function() { this._templates = [];
        i.call(this) };
    g["stolo.ensys.editor.system.ClipboardSystem"] = $k;
    $k.__name__ = ["stolo", "ensys",
        "editor", "system", "ClipboardSystem"
    ];
    $k.__super__ = i;
    $k.prototype = k(i.prototype, { get_name: function() { return "ClipboardSystem_57" }, set: function(a) { this._templates = a }, get: function() { return this._templates }, __class__: $k });
    var gl = function() { this._map = new M;
        i.call(this) };
    g["stolo.ensys.editor.system.DialogSystem"] = gl;
    gl.__name__ = ["stolo", "ensys", "editor", "system", "DialogSystem"];
    gl.__super__ = i;
    gl.prototype = k(i.prototype, {
        get_name: function() { return "DialogSystem_64" },
        onAdded: function() {
            this._system = y.instance(this.owner._compMap.BaseGameSystem_24,
                Yc);
            this.container = new p;
            this.container.add(new r);
            this._disposer = this.owner._compMap.Disposer_72;
            this.build()
        },
        onStart: function() { i.prototype.onStart.call(this);
            null == this.container.parent && this.owner.addChild(this.container) },
        onStop: function() { i.prototype.onStop.call(this);
            this._disposer = this.container = null },
        build: function() {
            this.createMainDialog();
            this.editor = this.add(new vl(this._system), this.main.owner);
            this.renderer = this.add(new yl(this._system), this.main.owner);
            this.history = this.add(new xl(this._system),
                this.main.owner);
            this.templates = this.add(new zl(this._system), this.container);
            this.entity = this.add(new wl(this._system))
        },
        createMainDialog: function() { this.main = na.main = new Lh(this._system);
            this.main.setXY(x._platform.getStage().get_width(), x._platform.getStage().get_height());
            this.add(this.main) },
        add: function(a, b) { null == b && (b = this.container);
            this._map.set(a.id, a);
            a;
            b.addChild((new p).add(a)); return a },
        onUpdate: function(a) { i.prototype.onUpdate.call(this, a) },
        __class__: gl
    });
    var el = function() {
        this.isDirty = !1;
        i.call(this)
    };
    g["stolo.ensys.editor.system.DocumentSystem"] = el;
    el.__name__ = ["stolo", "ensys", "editor", "system", "DocumentSystem"];
    el.__super__ = i;
    el.prototype = k(i.prototype, {
        get_name: function() { return "DocumentSystem_62" },
        onStart: function() { i.prototype.onStart.call(this);
            this._system = y.instance(this.owner._compMap.BaseGameSystem_24, Yc);
            this.show() },
        onStop: function() { i.prototype.onStop.call(this) },
        getName: function() { var a = this._system.levelData.filename.split("/"); return a[a.length - 1] },
        "export": function(a) {
            null ==
                a && (a = !0);
            var b = this._system.actors.getAll();
            hb.sort(b, m(this, this.sortActors));
            for (var c = [], d, e = 0; e < b.length;) d = b[e], ++e, d = d._compMap.EditorMetaComponent_28, null != d && c.push(d.getTemplate());
            this._system.levelData.data.actors = c;
            b = this.getName();
            c = hh.print(this._system.levelData.data, null, "\t");
            va.setWithPrefix(this._system.storagePrefix, b, c);
            this.isDirty = !1;
            a && Oc.getURL("./editor.html?json=true&level=" + b + "&r=" + Math.random());
            return c
        },
        show: function() {
            var a = Oc.getUrlParams();
            if (null != a.json && null !=
                a.level) { var b = this.getName(),
                    b = va.getWithPrefix(this._system.storagePrefix, b),
                    c = eval("document");
                c.title = a.level + ".json';";
                c.body.innerHTML = "<pre>" + y.string(b.toString()) + "</pre>";
                null != na.main && na.main.gui.getRoot().destroy() }
        },
        sortActors: function(a, b) { var c = a.parent._compMap.Sprite_2,
                d = b.parent._compMap.Sprite_2,
                e = this._system.renderer.getSprite().getChildIndex(c.owner),
                f = this._system.renderer.getSprite().getChildIndex(d.owner); return c == d ? c.getChildIndex(a) > d.getChildIndex(b) ? 1 : -1 : e > f ? 1 : -1 },
        __class__: el
    });
    var il = function() { Ic.call(this) };
    g["stolo.ensys.editor.system.EditorLevelSystem"] = il;
    il.__name__ = ["stolo", "ensys", "editor", "system", "EditorLevelSystem"];
    il.__super__ = Ic;
    il.prototype = k(Ic.prototype, {
        onAdded: function() { Ic.prototype.onAdded.call(this);
            this._system = y.instance(this.owner._compMap.BaseGameSystem_24, Yc) },
        spawnActor: function(a) {
            if (this._system.roundValues && null != a.transform && (a.transform.position.x = Math.round(a.transform.position.x), a.transform.position.y = Math.round(a.transform.position.y),
                    0 < a.transform.rotation || 0 > a.transform.rotation)) a.transform.rotation = Math.round(a.transform.rotation);
            var b = this._actors.spawn(a);
            b.add(new tl(a));
            if (null == b._compMap.Sprite_2) { a = new Kd;
                a.asset = "sprite";
                a.pack = "debug";
                a.width = a.height = 10; var c = b._compMap.PhysicsComponent_44;
                null != c && (c = c.getSize(), a.width = c.width, a.height = c.height);
                b.add(a) }
            return b
        },
        __class__: il
    });
    var cl = function() { this.onCommand = new S;
        this.limit = 50;
        i.call(this) };
    g["stolo.ensys.editor.system.HistorySystem"] = cl;
    cl.__name__ = ["stolo",
        "ensys", "editor", "system", "HistorySystem"
    ];
    cl.__super__ = i;
    cl.prototype = k(i.prototype, {
        get_name: function() { return "HistorySystem_61" },
        onStart: function() { i.prototype.onStart.call(this);
            this._redos = [];
            this._undos = [] },
        onStop: function() { i.prototype.onStop.call(this);
            this._redos = this._undos = null },
        add: function(a, b) { null == b && (b = !0);
            b && a.redo();
            this._redos.push(a);
            this._undos.splice(0, this._undos.length);
            this._undos.length > this.limit && this._undos.splice(0, 1);
            this.onCommand.emit(a) },
        redo: function() {
            var a = this._undos.pop();
            null != a && (a.redo(), this._redos.push(a), this.onCommand.emit(a))
        },
        undo: function() { var a = this._redos.pop();
            null != a && (a.undo(), this._undos.push(a), this.onCommand.emit(a)) },
        __class__: cl
    });
    var hl = function() { this._enablePhysics = !1;
        this.snapRotation = 45;
        this.snapX = this.snapY = 30;
        this.onComplete = new ga;
        i.call(this);
        J.ENABLE_POINTER = !0;
        zg.enabled = !0 };
    g["stolo.ensys.editor.system.LogicSystem"] = hl;
    hl.__name__ = ["stolo", "ensys", "editor", "system", "LogicSystem"];
    hl.__super__ = i;
    hl.prototype = k(i.prototype, {
        get_name: function() { return "LogicSystem_58" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._system = y.instance(this.owner._compMap.BaseGameSystem_24, Yc);
            this._disposer = this.owner._compMap.Disposer_72;
            this._system.physics.enable(this.get_enablePhysics());
            this._disposer.add(this._system.shortcut.onAction.connect(m(this, this.onAction)));
            this._disposer.add(x._platform.getKeyboard().down.connect(m(this, this.onKeyDown)));
            this._disposer.add(x._platform.getKeyboard().up.connect(m(this, this.onKeyUp)));
            this._system.shortcut.add(new nl(this._system),
                [j.Shift, j.T]);
            this._system.shortcut.add(new pl(this._system), [j.Control, j.Z]);
            this._system.shortcut.add(new ll(this._system), [j.Control, j.Y]);
            this._system.shortcut.add(new Jh(this._system), [j.Control, j.C]);
            this._system.shortcut.add(new kl(this._system), [j.Control, j.D]);
            this._system.shortcut.add(new Kh(this._system), [j.Control, j.V]);
            this._system.shortcut.add(new jl(this._system), [j.Control, j.F]);
            this._system.shortcut.add(new ml(this._system), [j.Control, j.B]);
            this.setDefaultTool();
            this._system.level.load(this._system.levelData);
            this.onComplete.emit()
        },
        onStop: function() { i.prototype.onStop.call(this);
            this._disposer = this._system = null },
        setDefaultTool: function() { this._system.tool.set(new Al(this._system)) },
        onAction: function(a) { a.execute() },
        onKeyUp: function(a) { a.key == j.Space && this.setDefaultTool() },
        onKeyDown: function(a) { a.key == j.Space && this._system.tool.set(new Bl(this._system)) },
        get_enablePhysics: function() { return this._enablePhysics },
        set_enablePhysics: function(a) {
            null != this._system && this._system.physics.enable(a);
            return this._enablePhysics =
                a
        },
        __class__: hl,
        __properties__: k(i.prototype.__properties__, { set_enablePhysics: "set_enablePhysics", get_enablePhysics: "get_enablePhysics" })
    });
    var dl = function() { this.onDeselect = new ga;
        this.onSelect = new S;
        i.call(this) };
    g["stolo.ensys.editor.system.SelectionSystem"] = dl;
    dl.__name__ = ["stolo", "ensys", "editor", "system", "SelectionSystem"];
    dl.__super__ = i;
    dl.prototype = k(i.prototype, {
        get_name: function() { return "SelectionSystem_59" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._actors = [];
            this.info = new ul;
            this.info.setXY(210, 10);
            this.owner.addChild((new p).add(this.info))
        },
        onStop: function() { this._actors = null;
            i.prototype.onStop.call(this) },
        contains: function(a) { return -1 != this._actors.indexOf(a) },
        set: function(a) { this.clear();
            this.add(a) },
        add: function(a) { if (!(this.contains(a) || null == a)) { this._actors.push(a);
                a.add(new ug); var b = a._compMap.EditorMetaComponent_28;
                null != b && (b.isSelected = !0, b.onSelect.emit(a));
                this.onSelect.emit(a);
                this.info.show(a) } },
        remove: function(a) {
            if (this.contains(a) && null != a) {
                H.remove(this._actors,
                    a);
                a.remove(a._compMap.EditorSelectionComponent_27);
                var b = a._compMap.EditorMetaComponent_28;
                null != b && (b.isSelected = !1, b.onDeselect.emit(a));
                this.onDeselect.emit();
                this.info.hide()
            }
        },
        toggle: function(a) { null != a && (this.contains(a) ? this.remove(a) : this.add(a)) },
        getAll: function() { for (var a = [], b = 0, c = this._actors; b < c.length;) { var d = c[b];++b;
                a.push(d) } return a },
        clear: function() { for (var a = this.getAll(), b = 0; b < a.length;) { var c = a[b];++b;
                this.remove(c) } this.onDeselect.emit() },
        __class__: dl
    });
    var bl = function() {
        this.onAction =
            new S;
        i.call(this)
    };
    g["stolo.ensys.editor.system.ShortcutSystem"] = bl;
    bl.__name__ = ["stolo", "ensys", "editor", "system", "ShortcutSystem"];
    bl.__super__ = i;
    bl.prototype = k(i.prototype, {
        get_name: function() { return "ShortcutSystem_63" },
        onStart: function() { i.prototype.onStart.call(this);
            this._disposer = this.owner._compMap.Disposer_72;
            this._disposer.add(x._platform.getKeyboard().down.connect(m(this, this.onKeyDown)));
            this._actions = new Fa },
        onStop: function() {
            i.prototype.onStop.call(this);
            this._disposer = this._actions =
                null
        },
        add: function(a, b) { this._actions.set(a, b) },
        onKeyDown: function(a) { for (var b = this._actions.keys(); b.hasNext();) { for (var c = b.next(), d = this._actions.h[c.__id__], e = !0, f = 0; f < d.length;) { var l = d[f];++f; if (!x._platform.getKeyboard().isDown(l) && a.key != l) { e = !1; break } } e && this.onAction.emit(c) } },
        __class__: bl
    });
    var al = function() { i.call(this) };
    g["stolo.ensys.editor.system.ToolSystem"] = al;
    al.__name__ = ["stolo", "ensys", "editor", "system", "ToolSystem"];
    al.__super__ = i;
    al.prototype = k(i.prototype, {
        get_name: function() { return "ToolSystem_60" },
        onStart: function() { i.prototype.onStart.call(this) },
        onStop: function() { i.prototype.onStop.call(this);
            this._tool = null },
        onUpdate: function(a) { if (null != this._tool) this._tool.onUpdate(a) },
        set: function(a) { null != this._tool && this._tool.stop();
            this._tool = a;
            null != this._tool && this._tool.start(); return this._tool },
        getCurrent: function() { return this._tool },
        __class__: al
    });
    var ic = function(a) { this._started = !1;
        this._disposer = new za;
        this._system = a };
    g["stolo.ensys.editor.tools.Tool"] = ic;
    ic.__name__ = ["stolo", "ensys", "editor",
        "tools", "Tool"
    ];
    ic.prototype = {
        onKeyRelease: function() {},
        onKeyPress: function() {},
        onDragStart: function() {},
        onDrag: function() {},
        onDragStop: function() {},
        onTap: function() {},
        onWheel: function() {},
        onUpdate: function() {},
        start: function() {
            this._disposer.add(x._platform.getPointer().down.connect(m(this, this.onPointerDown)));
            this._disposer.add(x._platform.getPointer().move.connect(m(this, this.onPointerMove)));
            this._disposer.add(x._platform.getPointer().up.connect(m(this, this.onPointerUp)));
            this._disposer.add(x._platform.getKeyboard().down.connect(m(this,
                this.onKeyDown)));
            this._disposer.add(x._platform.getKeyboard().up.connect(m(this, this.onKeyUp)));
            this._disposer.add(x._platform.getMouse().scroll.connect(m(this, this.onMouseWheel)));
            this._started = !0
        },
        stop: function() { this._disposer.dispose();
            this._system = null;
            this._started = !1 },
        onKeyDown: function(a) { if (this._started) this.onKeyPress(a.key) },
        onKeyUp: function(a) { if (this._started) this.onKeyRelease(a.key) },
        onMouseWheel: function(a) { if (this._started) this.onWheel(a) },
        onPointerDown: function(a) {
            if (this._started) {
                var b =
                    this.findActor(a.viewX, a.viewY);
                this._pointer = { drag: !1, x: 0, y: 0, xo: a.viewX, yo: a.viewY, xl: 0, yl: 0, distance: 0, actor: b }
            }
        },
        onPointerMove: function(a) {
            if (this._started && null != this._pointer)
                if (this._pointer.xl = this._pointer.x, this._pointer.yl = this._pointer.y, this._pointer.x = a.viewX, this._pointer.y = a.viewY, this._pointer.distance = Math.sqrt(Math.pow(this._pointer.xo - this._pointer.x, 2) + Math.pow(this._pointer.yo - this._pointer.y, 2)), this._pointer.drag) this.onDrag(this._pointer);
                else 10 < this._pointer.distance && (this._pointer.drag = !0, this.onDragStart(this._pointer))
        },
        onPointerUp: function() { if (this._started && null != this._pointer) { if (this._pointer.drag) this.onDragStop(this._pointer);
                else this.onTap(this._pointer);
                this._pointer = null } },
        findActor: function(a, b) { var c = r.hitTest(this._system.renderer.getContainer(), a, b); if (null == c) return null; for (c = c.owner; null != c && null == c._compMap.TransformComponent_70;) c = c.parent; return c },
        getRendererInverseScale: function() { return 1 / this._system.renderer.scale },
        __class__: ic
    };
    var Al = function(a) {
        this._actorStartRotations =
            new Fa;
        this._actorStartPositions = new Fa;
        this._rotate = !1;
        this.selectorAlpha = 0.5;
        this.selectorColor = 65280;
        ic.call(this, a)
    };
    g["stolo.ensys.editor.tools.ActorTransformTool"] = Al;
    Al.__name__ = ["stolo", "ensys", "editor", "tools", "ActorTransformTool"];
    Al.__super__ = ic;
    Al.prototype = k(ic.prototype, {
        start: function() { ic.prototype.start.call(this);
            x._platform.getMouse().set_cursor(mc.Default) },
        stop: function() { this._rotate = !1;
            this._positions = null;
            this.removeSelector();
            ic.prototype.stop.call(this) },
        onTap: function(a) {
            a =
                a.actor;
            (null == a || !x._platform.getKeyboard().isDown(j.Shift)) && this._system.selection.clear();
            this._system.selection.toggle(a)
        },
        onDragStart: function(a) {
            var b = a.actor;
            if (null != b)
                if (x._platform.getKeyboard().isDown(j.Control)) this._rotate = !0;
                else {
                    a = this._system.selection.contains(b) ? this._system.selection.getAll() : [b];
                    this._positions = [];
                    for (b = 0; b < a.length;) {
                        var c = a[b];
                        ++b;
                        var d = c._compMap.TransformComponent_70.position;
                        this._positions.push(new X(d.x, d.y));
                        d = { x: d.x, y: d.y };
                        this._actorStartPositions.set(c,
                            d);
                        d;
                        d = c._compMap.TransformComponent_70.rotation;
                        this._actorStartRotations.set(c, d);
                        d
                    }
                }
            else b = this._system.renderer.getLayers(), b = b[b.length - 1], this._selector = (new p).add((new Wa(this.selectorColor, 1, 1)).setAlpha(this.selectorAlpha).setXY(-this._system.renderer.displacement.x + a.x * this.getRendererInverseScale(), -this._system.renderer.displacement.y + a.y * this.getRendererInverseScale())), b.owner.addChild(this._selector)
        },
        getSelectedActors: function() {
            return this._system.selection.contains(this._selectedActor) ?
                this._system.selection.getAll() : [this._selectedActor]
        },
        onDrag: function(a) {
            this._selectedActor = a.actor;
            if (null != this._selector) y.instance(this._selector._compMap.Sprite_2, Wa).setSize(this.getRendererInverseScale() * (a.x - a.xo), this.getRendererInverseScale() * (a.y - a.yo));
            else if (this._rotate) {
                var b = this._selectedActor._compMap.TransformComponent_70.position;
                this.rotateActor(qb.toDegrees(Math.atan2(-this._system.renderer.displacement.y + a.y * this.getRendererInverseScale() - b.y, -this._system.renderer.displacement.x +
                    a.x * this.getRendererInverseScale() - b.x)), this._selectedActor)
            } else if (null != this._positions) { this._system.selection.contains(this._selectedActor); for (var b = this.getSelectedActors(), c = 0, d = 0; d < b.length;) { var e = b[d];++d; var f = this._positions[c],
                        l = f.x + this.getRendererInverseScale() * (a.x - a.xo),
                        f = f.y + this.getRendererInverseScale() * (a.y - a.yo);
                    this.moveActor(l, f, e, !1, !0);
                    c++ } }
        },
        onDragStop: function(a) {
            if (null != this._selector) {
                var b = y.instance(this._selector._compMap.Sprite_2, Wa),
                    c = this._system.actors.getAll(),
                    d = a.xo * this.getRendererInverseScale() - this._system.renderer.displacement.x,
                    e;
                0 > b.width._value ? (e = d, d = e + b.width._value) : e = d + b.width._value;
                var a = a.yo * this.getRendererInverseScale() - this._system.renderer.displacement.y,
                    f;
                0 > b.height._value ? (f = a, a = f + b.height._value) : f = a + b.height._value;
                for (b = 0; b < c.length;) { var l = c[b];++b; if (!(null == l || null == l.parent)) { var h = l.parent._compMap.Sprite_2;
                        null == h || 0 == (h._flags & 4) || (h = l._compMap.TransformComponent_70.position, d > h.x || e < h.x || a > h.y || f < h.y || this._system.selection.add(l)) } }
            } else if (null !=
                this._positions || this._rotate) { c = this._system.selection.contains(this._selectedActor);
                d = this.getSelectedActors();
                e = new Of; for (a = 0; a < d.length;) f = d[a], ++a, this._rotate ? e.add(new rl(this._system, f, this._actorStartRotations.h[f.__id__], f._compMap.TransformComponent_70.rotation, c ? !1 : !0)) : (b = f._compMap.TransformComponent_70.position, e.add(new ql(this._system, f, this._actorStartPositions.h[f.__id__], { x: b.x, y: b.y })));
                this._system.history.add(e, !1) } this._rotate = !1;
            this._positions = null;
            this.removeSelector()
        },
        onKeyRelease: function(a) {
            var b = this._system.selection.getAll(),
                c;
            c = x._platform.getKeyboard().isDown(j.Shift) ? 1 : this._system.logic.snapX;
            if (a == j.Backspace || a == j.Delete) { for (var d = 0; d < b.length;) { var e = b[d];++d;
                    this._system.actors.removeActor(e) } this._system.selection.clear() }
            if (a == j.I)
                for (d = 0; d < b.length;) ++d, null;
            if (a == j.Left)
                for (a = 0; a < b.length;) d = b[a], ++a, this.moveActor(-c, 0, d, !0, !1);
            else if (a == j.Right)
                for (a = 0; a < b.length;) d = b[a], ++a, this.moveActor(c, 0, d, !0, !1);
            else if (a == j.Up)
                for (a = 0; a < b.length;) d =
                    b[a], ++a, this.moveActor(0, -c, d, !0, !1);
            else if (a == j.Down)
                for (a = 0; a < b.length;) d = b[a], ++a, this.moveActor(0, c, d, !0, !1)
        },
        removeSelector: function() { null != this._selector && (this._selector.parent.removeChild(this._selector), this._selector = null) },
        moveActor: function(a, b, c, d, e) {
            null == e && (e = !0);
            null == d && (d = !1);
            var f = c._compMap.PhysicsComponent_44,
                l = c._compMap.Sprite_2,
                h = c._compMap.TransformComponent_70,
                c = c._compMap.EditorMetaComponent_28;
            c.moveEnabled && (d && (a += h.position.x, b += h.position.y), !x._platform.getKeyboard().isDown(j.Shift) &&
                0 != this._system.logic.snapX && 0 != this._system.logic.snapY && e && (a = Math.round(a / this._system.logic.snapX) * this._system.logic.snapX, b = Math.round(b / this._system.logic.snapY) * this._system.logic.snapY), null != h && (h.position.x = a, h.position.y = b), null != f && (f.forceUpdate = !0, f.setPosition(a, b)), null != l && (l.forceUpdate = !0), null != c && c.updateProperty("transform", "position", { x: this._system.roundValues ? Math.round(a) : a, y: this._system.roundValues ? Math.round(b) : b }))
        },
        rotateActor: function(a, b, c, d) {
            null == d && (d = !0);
            null ==
                c && (c = !1);
            var e = b._compMap.PhysicsComponent_44,
                f = b._compMap.Sprite_2,
                l = b._compMap.TransformComponent_70,
                b = b._compMap.EditorMetaComponent_28;
            c && (a += l.rotation);
            !x._platform.getKeyboard().isDown(j.Shift) && 0 != this._system.logic.snapRotation && d && (a = Math.round(a / this._system.logic.snapRotation) * this._system.logic.snapRotation);
            null != l && (l.rotation = a);
            null != e && (e.forceUpdate = !0, e.setRotation(3.141592653589793 * a / 180));
            null != f && (f.forceUpdate = !0);
            null != b && b.updateProperty("transform", "rotation", this._system.roundValues ?
                Math.round(a) : a)
        },
        __class__: Al
    });
    var Bl = function(a) { this.zoomSpeed = 0.1;
        this.moveSpeedMultiplicator = 5;
        this.moveSpeed = 50;
        ic.call(this, a) };
    g["stolo.ensys.editor.tools.RendererTransformTool"] = Bl;
    Bl.__name__ = ["stolo", "ensys", "editor", "tools", "RendererTransformTool"];
    Bl.__super__ = ic;
    Bl.prototype = k(ic.prototype, {
        start: function() { ic.prototype.start.call(this);
            this._state = this._system.rendererState;
            x._platform.getMouse().set_cursor(mc.Button) },
        stop: function() {
            this._state.save();
            this._start = null;
            x._platform.getMouse().set_cursor(mc.Default);
            ic.prototype.stop.call(this)
        },
        onDragStart: function() { this._start = new X(this._system.renderer.displacement.x, this._system.renderer.displacement.y) },
        onDrag: function(a) { null != this._start && this._state.setRendererPosition(this._start.x + this.getRendererInverseScale() * (a.x - a.xo), this._start.y + this.getRendererInverseScale() * (a.y - a.yo)) },
        onDragStop: function() { this._start = null;
            this._state.save() },
        onKeyRelease: function(a) {
            var b = this.moveSpeed * this.getRendererInverseScale();
            x._platform.getKeyboard().isDown(j.Shift) &&
                (b *= this.moveSpeedMultiplicator);
            a == j.PageUp && this._state.setRendererScale(this.zoomSpeed);
            a == j.PageDown && this._state.setRendererScale(-this.zoomSpeed);
            a == j.Left ? this._state.setRendererPosition(b, 0, !0) : a == j.Right ? this._state.setRendererPosition(-b, 0, !0) : a == j.Up ? this._state.setRendererPosition(0, b, !0) : a == j.Down && this._state.setRendererPosition(0, -b, !0)
        },
        onWheel: function(a) {
            var b = this._system.renderer.displacement.x,
                c = this._system.renderer.displacement.y,
                d = x._platform.getMouse().get_x() * this.getRendererInverseScale(),
                e = x._platform.getMouse().get_y() * this.getRendererInverseScale();
            this._state.setRendererScale(a / 100);
            var a = x._platform.getMouse().get_x() * this.getRendererInverseScale(),
                f = x._platform.getMouse().get_y() * this.getRendererInverseScale();
            this._state.setRendererPosition(b + (a - d), c + (f - e))
        },
        __class__: Bl
    });
    var ba = function() {};
    g["stolo.ensys.helpers.ComponentHelper"] = ba;
    ba.__name__ = ["stolo", "ensys", "helpers", "ComponentHelper"];
    ba.getSystemEntity = function(a) { return a.parent.parent.parent };
    ba.inEditor = function() {
        if (-1 !=
            ba.isInEditor) return 1 == ba.isInEditor;
        ba.isInEditor = null != x.root._internal_getFromChildren("BaseGameSystem_24", Yc) ? 1 : 0;
        return ba.inEditor()
    };
    var Hb = function() {};
    g["stolo.ensys.helpers.SystemHelper"] = Hb;
    Hb.__name__ = ["stolo", "ensys", "helpers", "SystemHelper"];
    Hb.init = function(a, b, c) { null == c && (c = !0);
        L.reset();
        Hb.registerComponents(b, c);
        Hb.loadTemplates(a) };
    Hb.registerComponents = function(a, b) {
        null == b && (b = !0);
        if (!Hb.defaultComponentsRegistered && b) {
            for (var c = Un.ComponentMap, d = c.keys(); d.hasNext();) {
                var e =
                    d.next();
                L.registerComponent(e, c.get(e))
            }
            Hb.defaultComponentsRegistered = !0
        }
        if (null != a)
            for (c = a.keys(); c.hasNext();) d = c.next(), L.registerComponent(d, a.get(d))
    };
    Hb.loadTemplates = function(a) { for (var b = E.getPack(a).get_manifest().iterator(); b.hasNext();) { var c = b.next(); if (-1 < c.name.indexOf(".json")) { var d = E.getJSON(c.name, a, !0, !1); if (null == d) throw "Invalid actors file '" + c.name + "'";
                Hb.addTemplates(d) } } };
    Hb.addTemplates = function(a) { for (var b = 0; b < a.length;) { var c = a[b];++b;
            Hb.addTemplate(c) } };
    Hb.addTemplate =
        function(a) { L.addTemplate(a) };
    var Wk = function(a, b, c, d, e, f, l, h) { null == h && (h = !1); if (null == a) throw "No physics system received";
        this._system = a;
        this._event = b;
        this._mode = c;
        this._type1 = d;
        this._type2 = e;
        this._entity = f;
        a.addContactListener(b, c, d, e, f, l, h) };
    g["stolo.ensys.physics.Contact"] = Wk;
    Wk.__name__ = ["stolo", "ensys", "physics", "Contact"];
    Wk.__interfaces__ = [Fc];
    Wk.prototype = {
        dispose: function() {
            null != this._system && (this._system.removeContactListener(this._event, this._mode, this._type1, this._type2, this._entity),
                this._entity = this._type2 = this._type1 = this._mode = this._event = this._system = null)
        },
        __class__: Wk
    };
    var Cl = function() {};
    g["stolo.ensys.physics.ContactArbiter"] = Cl;
    Cl.__name__ = ["stolo", "ensys", "physics", "ContactArbiter"];
    Cl.__interfaces__ = [Fc];
    Cl.prototype = {
        init: function(a, b) {
            this._arbiter = a;
            var c;
            b.zpp_inner.validate();
            c = b.zpp_inner.x;
            b.zpp_inner.validate();
            if (c = c == b.zpp_inner.y) b.zpp_inner.validate(), c = 0 == b.zpp_inner.x;
            this.angle = c ? 0 : Math.atan2(function() { b.zpp_inner.validate(); return b.zpp_inner.y }(this),
                function() { b.zpp_inner.validate(); return b.zpp_inner.x }(this));
            b.zpp_inner.validate();
            this.normaly = b.zpp_inner.y
        },
        dispose: function() { this._arbiter = null },
        disableFriction: function() { this._arbiter.set_dynamicFriction(0);
            this._arbiter.set_rollingFriction(0);
            this._arbiter.set_staticFriction(0) },
        __class__: Cl
    };
    var h = function() {};
    g["zpp_nape.util.ZPP_Flags"] = h;
    h.__name__ = ["zpp_nape", "util", "ZPP_Flags"];
    var V = function() {};
    g["stolo.ensys.physics.ContactEvent"] = V;
    V.__name__ = ["stolo", "ensys", "physics", "ContactEvent"];
    var Aj = function(a, b) { null == b && (b = !1);
        this._alwaysInverseNormal = this._acceptOnce = !1;
        this._contactArbiter = new Cl;
        this._entities = new Fa;
        this._alwaysInverseNormal = a;
        this._acceptOnce = b };
    g["stolo.ensys.physics.ContactListenerHandler"] = Aj;
    Aj.__name__ = ["stolo", "ensys", "physics", "ContactListenerHandler"];
    Aj.__interfaces__ = [Fc];
    Aj.prototype = {
        dispose: function() { this._entities = null;
            this._contactArbiter.dispose();
            this._contactArbiter = null },
        addEntity: function(a, b) { this._entities.set(a, b) },
        removeEntity: function(a) { this._entities.remove(a) },
        onPreContact: function(a) {
            var b = a.zpp_inner.int1.outer_i.get_userData().actor,
                c = a.zpp_inner.int2.outer_i.get_userData().actor,
                d = null,
                e = a.zpp_inner.pre_arbiter.wrapper().get_collisionArbiter(),
                f = !0;
            if (null != e && (d = this.fixNormal(a.zpp_inner.int1.outer_i.get_castBody(), a.zpp_inner.int2.outer_i.get_castBody(), function() { null == e.zpp_inner.colarb.wrap_normal && e.zpp_inner.colarb.getnormal(); return e.zpp_inner.colarb.wrap_normal }(this)), this._contactArbiter.init(e, d), d = this._contactArbiter, f = e.get_state(),
                    null == h.PreFlag_ACCEPT && (h.internal = !0, h.PreFlag_ACCEPT = new ab, h.internal = !1), !(f = f == h.PreFlag_ACCEPT))) f = e.get_state(), null == h.PreFlag_ACCEPT_ONCE && (h.internal = !0, h.PreFlag_ACCEPT_ONCE = new ab, h.internal = !1), f = f == h.PreFlag_ACCEPT_ONCE;
            var a = this.getCallback(b),
                l = this.getCallback(c),
                g = !0,
                i = !0;
            null != a && null != c && (g = a(c, d));
            null != l && null != b && (i = l(b, d));
            if (f && g && i) {
                if (this._acceptOnce) return null == h.PreFlag_ACCEPT_ONCE && (h.internal = !0, h.PreFlag_ACCEPT_ONCE = new ab, h.internal = !1), h.PreFlag_ACCEPT_ONCE;
                null ==
                    h.PreFlag_ACCEPT && (h.internal = !0, h.PreFlag_ACCEPT = new ab, h.internal = !1);
                return h.PreFlag_ACCEPT
            }
            if (this._acceptOnce) return null == h.PreFlag_IGNORE_ONCE && (h.internal = !0, h.PreFlag_IGNORE_ONCE = new ab, h.internal = !1), h.PreFlag_IGNORE_ONCE;
            null == h.PreFlag_IGNORE && (h.internal = !0, h.PreFlag_IGNORE = new ab, h.internal = !1);
            return h.PreFlag_IGNORE
        },
        onOngoingContact: function(a) {
            var b = a.zpp_inner.int1.outer_i.get_userData().actor,
                a = a.zpp_inner.int2.outer_i.get_userData().actor,
                c = this.getCallback(b),
                d = this.getCallback(a);
            null != c && null != a && c(a, null);
            null != d && null != b && d(b, null)
        },
        onContactBegin: function(a) {
            var b = a.zpp_inner.int1.outer_i.get_userData().actor,
                c = a.zpp_inner.int2.outer_i.get_userData().actor,
                d = this.getCallback(b),
                e = this.getCallback(c),
                f = null,
                l = a.zpp_inner.wrap_arbiters.at(0).get_collisionArbiter();
            if (null != l) {
                f = l.get_state();
                null == h.PreFlag_IGNORE && (h.internal = !0, h.PreFlag_IGNORE = new ab, h.internal = !1);
                if (f == h.PreFlag_IGNORE) return;
                a = this.fixNormal(a.zpp_inner.int1.outer_i.get_castBody(), a.zpp_inner.int2.outer_i.get_castBody(),
                    function() { null == l.zpp_inner.colarb.wrap_normal && l.zpp_inner.colarb.getnormal(); return l.zpp_inner.colarb.wrap_normal }(this));
                this._contactArbiter.init(l, a);
                f = this._contactArbiter
            }
            null != d && null != c && d(c, f);
            null != e && null != b && e(b, f)
        },
        onContactEnd: function(a) { var b = a.zpp_inner.int1.outer_i.get_userData().actor,
                a = a.zpp_inner.int2.outer_i.get_userData().actor,
                c = this.getCallback(b),
                d = this.getCallback(a);
            null != c && null != a && c(a, null);
            null != d && null != b && d(b, null) },
        getCallback: function(a) {
            return null == a ? null :
                this._entities.h[a.__id__]
        },
        fixNormal: function(a, b, c) { var d = aa.get(function() { c.zpp_inner.validate(); return c.zpp_inner.x }(this), function() { c.zpp_inner.validate(); return c.zpp_inner.y }(this), !0); if (this._alwaysInverseNormal || a.zpp_inner_i.id > b.zpp_inner_i.id) d.set_x(-1 * function() { d.zpp_inner.validate(); return d.zpp_inner.x }(this)), d.set_y(-1 * function() { d.zpp_inner.validate(); return d.zpp_inner.y }(this)); return d },
        __class__: Aj
    };
    var da = function() {};
    g["stolo.ensys.physics.ContactMode"] = da;
    da.__name__ = ["stolo", "ensys", "physics", "ContactMode"];
    var Ka = function() {};
    g["stolo.ensys.physics.ContactType"] = Ka;
    Ka.__name__ = ["stolo", "ensys", "physics", "ContactType"];
    var bd = function() {};
    g["stolo.ensys.physics.Materials"] = bd;
    bd.__name__ = ["stolo", "ensys", "physics", "Materials"];
    bd.get = function(a) { return bd._materialMap.exists(a) ? bd._materialMap.get(a) : z.getProperty(bd, a) };
    bd.add = function(a, b) { bd._materialMap.set(a, b); return !0 };
    var Tn = function() {};
    g["stolo.ensys.physics.PhysicsFactory"] = Tn;
    Tn.__name__ = ["stolo",
        "ensys", "physics", "PhysicsFactory"
    ];
    Tn.createShape = function(a, b, c) {
        var d = null,
            e;
        e = 0 < a.x || 0 > a.x ? a.x : 0;
        var f;
        f = 0 < a.y || 0 > a.y ? a.y : 0;
        if ("box" == a.type || null == a.type) {
            null == a.width && (a.width = 0);
            null == a.height && (a.height = 0);
            0 >= a.width && null != b && (a.width = b.getNaturalWidth());
            0 >= a.height && null != b && (a.height = b.getNaturalHeight());
            var d = a.width,
                l = a.height,
                h = a.padding,
                g = a.docking;
            if (null != b && null != g) {
                var i = 0.5 * b.getNaturalWidth(),
                    j = 0.5 * b.getNaturalHeight();
                0 != g.left && 0 != g.right ? d = (g.left + g.right) * i : 0 != g.left ?
                    e = -i + 0.5 * d : 0 != g.right && (e = i - 0.5 * d);
                0 != g.top && 0 != g.bottom ? l = (g.top + g.bottom) * j : 0 != g.top ? f = -j + 0.5 * l : 0 != g.bottom && (f = j - 0.5 * l);
                null != b.align && (-1 < b.align.indexOf("left") && (e -= -i), -1 < b.align.indexOf("top") && (f -= -j))
            }
            null != h && (0 != h.left && (d -= h.left, e += 0.5 * h.left), 0 != h.right && (d -= h.right, e -= 0.5 * h.right), 0 != h.top && (l -= h.top, f += 0.5 * h.top), 0 != h.bottom && (l -= h.bottom, f -= 0.5 * h.bottom));
            0 >= d && (d = 100);
            0 >= l && (l = 100);
            a.finalw = d;
            a.finalh = l;
            d = new Qb(Qb.box(d, l, !0))
        } else if ("circle" == a.type) d = new nk(a.radius);
        else if ("regular" ==
            a.type) d = new Qb(Qb.regular(a.xRadius, a.yRadius, a.edge));
        else if ("polygon" == a.type) { b = [];
            d = a.points; for (l = 0; l < d.length;) h = d[l], ++l, b.push(aa.weak(h.x, h.y));
            d = new Qb(b) } a.finalx = e;
        a.finaly = f;
        if (null == d) return null;
        (0 < a.rotation || 0 > a.rotation) && d.rotate(db.radians(a.rotation));
        b = null != a.filter ? a.filter : Mc.defaultShapeFilter;
        if (null != b) {
            l = 0;
            for (h = z.fields(b); l < h.length;) switch (g = h[l], ++l, g) {
                case "collisionMask":
                    d.zpp_inner.filter.wrapper().set_collisionMask(z.field(b, g));
                    break;
                case "collisionGroup":
                    d.zpp_inner.filter.wrapper().set_collisionGroup(z.field(b,
                        g));
                    break;
                case "sensorGroup":
                    d.zpp_inner.filter.wrapper().set_sensorGroup(z.field(b, g));
                    break;
                case "sensorMask":
                    d.zpp_inner.filter.wrapper().set_sensorMask(z.field(b, g));
                    break;
                case "fluidGroup":
                    d.zpp_inner.filter.wrapper().set_fluidGroup(z.field(b, g));
                    break;
                case "fluidMask":
                    d.zpp_inner.filter.wrapper().set_fluidMask(z.field(b, g));
                    break;
                default:
                    null
            }
        }
        null != a.material && (b = bd.get(a.material), null != b ? (d.zpp_inner.immutable_midstep("Shape::material"), d.zpp_inner.setMaterial(b.zpp_inner), d.zpp_inner.material.wrapper()) :
            null);
        null != a.fluid && (d.zpp_inner.immutable_midstep("Shape::fluidEnabled"), d.zpp_inner.fluidEnabled = !0, null == d.zpp_inner.fluidProperties && d.set_fluidProperties(new Ff), d.zpp_inner.wake(), d.zpp_inner.fluidEnabled, null != a.fluid.density && (d.zpp_inner.immutable_midstep("Shape::fluidProperties"), null == d.zpp_inner.fluidProperties && d.zpp_inner.setFluid((new Ff).zpp_inner), d.zpp_inner.fluidProperties.wrapper().set_density(a.fluid.density)), null != a.fluid.viscosity && (d.zpp_inner.immutable_midstep("Shape::fluidProperties"),
            null == d.zpp_inner.fluidProperties && d.zpp_inner.setFluid((new Ff).zpp_inner), d.zpp_inner.fluidProperties.wrapper().set_viscosity(a.fluid.viscosity)));
        null != c ? d.set_localCOM(aa.weak(c.x + e, c.y + f)) : d.set_localCOM(aa.get(e, f, !0));
        d.set_sensorEnabled(a.sensor);
        return d
    };
    var le = function(a, b) { null == b && (b = -1);
        this.color = 16776960;
        this.size = 1;
        r.call(this); - 1 != b && (this.color = b);
        null != a && this.drawShape(a) };
    g["stolo.ensys.physics.debug.PhysicsDebugSprite"] = le;
    le.__name__ = ["stolo", "ensys", "physics", "debug", "PhysicsDebugSprite"];
    le.__super__ = r;
    le.prototype = k(r.prototype, {
        draw: function(a) { null != this.texture && a.drawTexture(this.texture, 0, 0) },
        drawShape: function(a) {
            if ("box" == a.type || null == a.type) {
                var b = Math.round(a.finalw),
                    c = Math.round(a.finalh);
                if (b > le.maxSize || c > le.maxSize) b = Math.min(le.maxSize, a.finalw), c = Math.min(le.maxSize, a.finalh);
                this.texture = x._platform.getRenderer().createTexture(b, c);
                var d = this.texture.get_graphics();
                d.fillRect(this.color, 0, 0, b, this.size);
                d.fillRect(this.color, 0, c - this.size, b, this.size);
                d.fillRect(this.color,
                    0, 0, this.size, c);
                d.fillRect(this.color, b - this.size, 0, this.size, c);
                d.translate(0.5 * b, 0.5 * c);
                d.fillRect(this.color, -10, 0.5 * -this.size, 20, this.size);
                d.fillRect(this.color, 0.5 * -this.size, -10, this.size, 20);
                this.setAnchor(0.5 * b, 0.5 * c)
            } else if ("circle" == a.type) {
                b = a.radius;
                this.texture = x._platform.getRenderer().createTexture(Math.ceil(2 * b + 2 * this.size), Math.ceil(2 * b + 2 * this.size));
                c = this.texture.get_graphics();
                for (d = 0; 360 > d;) {
                    var e = d++;
                    c.fillRect(this.color, this.size + b + Math.cos(e) * b, this.size + b + Math.sin(e) *
                        b, this.size, this.size)
                }
                c.translate(this.size + b, this.size + b);
                c.fillRect(this.color, 0, 0, b, this.size);
                this.setAnchor(b, b)
            } else if ("polygon" == a.type) {
                var c = b = 9999999,
                    d = e = -9999999,
                    f = 0,
                    l;
                for (l = I.__cast(a.points, Array); f < l.length;) { var h = l[f];++f;
                    b = Math.min(b, h.x);
                    c = Math.min(c, h.y);
                    e = Math.max(e, h.x);
                    d = Math.max(d, h.y) } b = e - b;
                c = d - c;
                this.texture = x._platform.getRenderer().createTexture(b, c);
                d = this.texture.get_graphics();
                e = a.points[0];
                d.translate(-e.x, -e.y);
                f = 0;
                for (l = a.points.length; f < l;) {
                    var g = f++,
                        h = a.points[g],
                        i;
                    i = g == a.points.length - 1 ? e : a.points[g + 1];
                    var g = i.x - h.x,
                        j = i.y - h.y;
                    i = Math.sqrt(Math.pow(g, 2) + Math.pow(j, 2));
                    g = 180 * Math.atan2(j, g) / Math.PI;
                    d.save();
                    d.translate(h.x, h.y);
                    d.rotate(g);
                    d.fillRect(this.color, 0, 0, i, this.size);
                    d.restore()
                }
                this.setAnchor(0.5 * b, 0.5 * c)
            }
            this.setXY(a.finalx, a.finaly);
            (0 < a.rotation || 0 > a.rotation) && this.setRotation(a.rotation)
        },
        getNaturalWidth: function() { return null != this.texture ? this.texture.get_width() : 0 },
        getNaturalHeight: function() {
            return null != this.texture ? this.texture.get_height() :
                0
        },
        __class__: le
    });
    var Df = function() { this._actorsToRemove = [];
        this._actorsById = new M;
        this._actorsByTags = new M;
        this._actorsByTemplate = new M;
        this._actorsByComponents = new M;
        this._actors = [];
        this.onActorRemoved = new S;
        this.onActorAdded = new S;
        this.onActorSpawn = new Lb;
        i.call(this) };
    g["stolo.ensys.system.ActorSystem"] = Df;
    Df.__name__ = ["stolo", "ensys", "system", "ActorSystem"];
    Df.__super__ = i;
    Df.prototype = k(i.prototype, {
        get_name: function() { return "ActorSystem_54" },
        onAdded: function() {
            this._renderer = this.owner._compMap.RendererSystem_56;
            for (var a = L.getComponentsIds(), b = 0; b < a.length;) { var c = a[b];++b;
                this._actorsByComponents.set(c, []) } a = L.getTemplateIds();
            for (b = 0; b < a.length;) c = a[b], ++b, this._actorsByTemplate.set(c, [])
        },
        onRemoved: function() { i.prototype.onRemoved.call(this);
            this._actorsToRemove = this._actorsById = this._actorsByTags = this._actorsByTemplate = this._actorsByComponents = this._renderer = null },
        onUpdate: function() { for (; 0 < this._actorsToRemove.length;) this._removeActor(this._actorsToRemove.pop()) },
        spawn: function(a, b) {
            var c = L.create(a);
            if (null == c) return null;
            this.onActorSpawn.emit(c, a);
            this.addActor(c);
            if (null != b) { var d = c._compMap.Sprite_2; if (null != d) d.onInitComplete.connect(b).once();
                else b() }
            return c
        },
        addActor: function(a) { this.registerActor(a);
            this._renderer.addActor(a);
            null != Df.addedMethod && this.callMethodOn(a, Df.addedMethod);
            this.onActorAdded.emit(a); return a },
        callMethodOn: function(a, b) { for (var c = a.firstComponent, d; null != c;) d = z.getProperty(c, b), null != d && d.apply(c, null), c = c.next; return a },
        removeActor: function(a) {
            if (null == this._actorsToRemove) return null;
            this._actorsToRemove.push(a);
            return a
        },
        _removeActor: function(a) { this.unregisterActor(a);
            this.onActorRemoved.emit(a);
            this._renderer.removeActor(a);
            a.dispose(); return a },
        getAll: function() { return this._actors },
        getActorsByComponent: function(a) { return this._actorsByComponents.get(ia.getClassName(a)) },
        getActorsByTemplate: function(a) { return this._actorsByTemplate.get(a) },
        registerActor: function(a) {
            this._actors.push(a);
            for (var b = a.firstComponent; null != b;) {
                var c = ia.getClassName(ia.getClass(b)),
                    d = this._actorsByComponents.get(c);
                null == d && (d = [], this._actorsByComponents.set(c, d));
                d.push(a);
                b = b.next
            }
            b = a._compMap.TemplateComponent_53;
            if (null != b) { c = this._actorsByTemplate.get(b.key);
                null == c && (c = [], this._actorsByTemplate.set(b.key, c));
                c.push(a);
                c = 0; for (d = b.tags; c < d.length;) { var e = d[c];++c; var f = this._actorsByTags.get(e);
                    null == f && (f = [], this._actorsByTags.set(e, f));
                    f.push(a) } "" != b.uuid && null != b.uuid && this._actorsById.set(b.uuid, a) }
        },
        unregisterActor: function(a) {
            H.remove(this._actors, a);
            for (var b = [this._actorsByComponents, this._actorsByTemplate,
                    this._actorsByTags
                ], c = 0; c < b.length;) { var d = b[c];++c; for (d = d.iterator(); d.hasNext();) { var e = d.next();
                    H.remove(e, a) } } a = a._compMap.TemplateComponent_53;
            null != a && this._actorsById.remove(a.uuid)
        },
        __class__: Df
    });
    var Ye = function() { this._saveLimits = {};
        this._camera = new ye;
        this._targets = [];
        this.currentTargetIndex = -1;
        this.selfUpdate = !0;
        this.autoSwitch = !1;
        this.enabled = this.autoCenterZoom = !0;
        i.call(this) };
    g["stolo.ensys.system.CameraSystem"] = Ye;
    Ye.__name__ = ["stolo", "ensys", "system", "CameraSystem"];
    Ye.__super__ =
        i;
    Ye.prototype = k(i.prototype, {
        get_name: function() { return "CameraSystem_49" },
        dispose: function() { i.prototype.dispose.call(this);
            this._saveLimits = this._renderer = this._camera = this._target = this._targets = this.rendererOffset = null },
        onAdded: function() { this.sharedBase = new p;
            this.owner.addChild(this.sharedBase) },
        onStart: function() { this._renderer = this.owner._compMap.RendererSystem_56 },
        onUpdate: function(a) { this.selfUpdate && this.update(a) },
        update: function(a) {
            if (this.enabled) {
                this.autoSwitch && null == this._camera.target &&
                    this.nextTarget();
                this._camera.update(a);
                var b = 0,
                    c = 0;
                null != this.rendererOffset && (this.rendererOffset.update(a), b += this.rendererOffset.x._value, c += this.rendererOffset.y._value);
                null != this._camera.zoom && (this.autoCenterZoom && (a = this._renderer.dimensions, b += 0.5 * (a.width - a.width * this._camera.zoom._value), c += 0.5 * (a.height - a.height * this._camera.zoom._value)), this._renderer.setScale(this._camera.zoom._value));
                this._renderer.move(-this._camera.x + b, -this._camera.y + c)
            }
        },
        zoomTo: function(a, b, c) {
            null == b && (b = 0);
            this._camera.zoomTo(a, b, c)
        },
        centerRenderer: function() { null == this._renderer && (this._renderer = this.owner._compMap.RendererSystem_56);
            null == this.rendererOffset && (this.rendererOffset = new pd);
            this.rendererOffset.x.set__(Math.round(this._renderer.dimensions.width / 2));
            this.rendererOffset.y.set__(Math.round(this._renderer.dimensions.height / 2)) },
        addTarget: function(a) { this._targets.push(a);
            null == this._target && this.autoSwitch && this.nextTarget() },
        removeTarget: function(a) {
            null != this._targets && H.remove(this._targets,
                a) && this._target == a && this.previousTarget()
        },
        setTarget: function(a, b) {
            null == b && (b = { time: 0 });
            if (null == a) { if (0 == this._targets.length) return this._target = null;
                a = this._targets[0] } this._target = a;
            if (null == this._target || null == this._target.owner) return null;
            if (0 < b.time) {
                var c = this._target.owner._compMap.TransformComponent_70.position,
                    d = this._target.owner._compMap.Sprite_2;
                null != d && (c = { x: d.x._value, y: d.y._value });
                this._wasSpringX = this.get_camera().springX;
                this._wasSpringY = this.get_camera().springY;
                this.get_camera().springX =
                    this.get_camera().springY = !1;
                this.offsetTarget(a, 0, 0, b.time, b.ease);
                this.get_camera().animateTo(c.x + a.offsetX, c.y + a.offsetY, b.time, b.ease);
                B.delayCallTo(m(this, this.onCameraAnimationComplete), b.time, this.owner)
            } else this.syncTarget(!1), this.offsetTarget(a, a.offsetX, a.offsetY, b.offsetTime, b.offsetEase, b.offsetTimeY, b.offsetEaseY);
            return a
        },
        onCameraAnimationComplete: function() {
            this.offsetTarget(this.get_target(), this.get_target().offsetX, this.get_target().offsetY, 0.3);
            this.syncTarget(!1);
            this.get_camera().springX =
                this._wasSpringX;
            this.get_camera().springY = this._wasSpringY
        },
        syncTarget: function(a) { null == a && (a = !1); if (!(null == this._target || null == this._target.owner)) { var b = this._target.owner._compMap.Sprite_2;
                null != b && this._camera.followSprite(b);
                a && this._camera.moveToTarget() } },
        get_target: function() { return this._target },
        offsetTarget: function(a, b, c, d, e, f, l) {
            null == f && (f = -1);
            null == d && (d = -1);
            a.offsetX = b;
            a.offsetY = c;
            0 > d && (d = Ye.DEFAULT_OFFET_TIME);
            null == e && (e = Ye.DEFAULT_OFFET_EASING);
            this._camera.setOffset(b * a.offsetDirectionX,
                c * a.offsetDirectionY, d, e, f, l)
        },
        offsetTargetDirectionX: function(a, b, c, d) { null == c && (c = 0);
            this._camera.setOffsetX(a.offsetX * a.offsetDirectionX, c, d) },
        get_camera: function() { return this._camera },
        set_camera: function(a) { return this._camera = a },
        setLimits: function(a, b, c, d) { null == d && (d = -1);
            null == c && (c = -1);
            null == b && (b = -1);
            null == a && (a = -1);
            this._camera.setLimits(a, b, c, d) },
        nextTarget: function() { this.currentTargetIndex++;
            this.currentTargetIndex > this._targets.length - 1 && (this.currentTargetIndex = 0); return this.setTarget(this._targets[this.currentTargetIndex]) },
        previousTarget: function() { this.currentTargetIndex--;
            0 > this.currentTargetIndex && (this.currentTargetIndex = this._targets.length - 1); return this.setTarget(this._targets[this.currentTargetIndex]) },
        __class__: Ye,
        __properties__: k(i.prototype.__properties__, { set_camera: "set_camera", get_camera: "get_camera", get_target: "get_target" })
    });
    var Pj = function(a, b) { this._actorMap = new Fa;
        this.enable = !1;
        i.call(this);
        this._dimensions = b;
        this._renderer = a };
    g["stolo.ensys.system.CullingSystem"] = Pj;
    Pj.__name__ = ["stolo", "ensys",
        "system", "CullingSystem"
    ];
    Pj.__super__ = i;
    Pj.prototype = k(i.prototype, {
        get_name: function() { return "CullingSystem_55" },
        onAdded: function() { null == this._dimensions && (this._dimensions = this._renderer.dimensions) },
        addComponent: function(a, b) {
            if (this.enable) {
                var c = this._actorMap.h[b.__id__];
                if (null == c) {
                    var c = b._compMap.Sprite_2,
                        d = this._renderer.getLayer(null == c ? "default" : c.layer);
                    null == d && (d = this._renderer.getLayer("default"));
                    c = {
                        actor: b,
                        position: b._compMap.TransformComponent_70.position,
                        display: c,
                        layer: d,
                        components: [],
                        culling: !0,
                        start: !0
                    };
                    this._actorMap.set(b, c)
                }
                c.components.push(a)
            } else a.enableCulling(!1)
        },
        removeComponent: function(a, b) { var c = this._actorMap.h[b.__id__]; if (null != c) { for (var c = c.components, d = 0, e = c.length; d < e;) { var f = d++; if (a == c[f]) { c.splice(f, 1); break } } 0 == c.length && this._actorMap.remove(b) } },
        onUpdate: function() {
            if (this.enable) {
                var a;
                a = null == this._camera ? this._dimensions.width / 2 - 100 : this._camera.x - 100;
                for (var b = a + this._dimensions.width + 100, c = 0, d = 0, c = !1, e = this._actorMap.iterator(); e.hasNext();) {
                    var f =
                        e.next(),
                        d = null == f.display ? 0 : 0.5 * f.display.getNaturalWidth(),
                        c = f.position.x + f.layer.x._value + (null == this._camera ? this._dimensions.width / 2 : this._camera.x),
                        c = c + d < a || c - d > b;
                    if (f.start || c != f.culling) { f.start = !1;
                        f.culling = c;
                        f = f.components; for (d = 0; d < f.length;) { var l = f[d];++d;
                            l.enableCulling(c) } }
                }
            }
        },
        __class__: Pj
    });
    var zg = function() { this.onComplete = new ga };
    g["stolo.ensys.system.PhysicDebugSystem"] = zg;
    zg.__name__ = ["stolo", "ensys", "system", "PhysicDebugSystem"];
    zg.__super__ = i;
    zg.prototype = k(i.prototype, {
        get_name: function() { return "PhysicDebugSystem_45" },
        onAdded: function() { this.initActors(this.owner._compMap.ActorSystem_54) },
        onStart: function() { this._renderer = this.owner._compMap.RendererSystem_56;
            this._space = this.owner._compMap.PhysicSystem_31.getSpace();
            null == this.dimensions && (this.dimensions = this._renderer.dimensions);
            i.prototype.onStart.call(this);
            this.onComplete.emit() },
        onUpdate: function() {},
        dispose: function() { i.prototype.dispose.call(this) },
        initActors: function(a) { a.onActorSpawn.connect(m(this, this.onActorSpawn)) },
        onActorSpawn: function(a) {
            null !=
                a && zg.enabled && null != a._compMap.PhysicsComponent_44 && null == a._compMap.PhysicsDebugComponent_46 && a.add(new Ch)
        },
        __class__: zg
    });
    var Oj = function(a, b) { null == b && (b = !1);
        this._layers = new M;
        this._container = new p;
        this.onLayerAdded = new S;
        this.scale = 1;
        this.displacement = new X;
        this.dimensions = null != a ? a : new Na(0, 0, x._platform.getStage().get_width(), x._platform.getStage().get_height());
        this.dimensionsScaled = this.dimensions.clone();
        this._useScissor = b;
        i.call(this) };
    g["stolo.ensys.system.RendererSystem"] = Oj;
    Oj.__name__ = ["stolo", "ensys", "system", "RendererSystem"];
    Oj.__super__ = i;
    Oj.prototype = k(i.prototype, {
        get_name: function() { return "RendererSystem_56" },
        onAdded: function() { this._sprite = new xc;
            this._useScissor && (this._sprite.scissor = new Na(0, 0, this.dimensions.width, this.dimensions.height));
            this._sprite.setXY(this.dimensions.x, this.dimensions.y);
            this._container.add(this._sprite);
            this.owner.addChild(this._container) },
        getContainer: function() { return this._container },
        getSprite: function() { return this._sprite },
        addLayer: function(a) {
            var b =
                a.name,
                c = this.getLayer(b);
            null == c && (c = ma.startsWith(b, "grid") && 4 < b.length ? new Yk(a, Math.round(this.dimensions.width), Math.round(this.dimensions.height), y.parseInt(H.substr(b, 4, null))) : new Mf(a), this._layers.set(b, c), this._sprite.addChild((new p).add(c)), this.onLayerAdded.emit(c), this.move(this.displacement.x, this.displacement.y));
            return c
        },
        getLayer: function(a) { return this._layers.get(a) },
        getLayers: function() { for (var a = [], b = this._layers.iterator(); b.hasNext();) { var c = b.next();
                a.push(c) } return a },
        addActor: function(a) { this.getActorLayer(a).addChild(a) },
        removeActor: function(a) { this.getActorLayer(a).removeChild(a) },
        getActorLayer: function(a, b) { null == b && (b = !0); var c = a._compMap.Sprite_2,
                c = null != c && null != c.layer ? c.layer : "default",
                d = this.getLayer(c); if (null == d && b) throw "Layer not found:" + c; return d },
        move: function(a, b) { this.displacement.set(a, b); for (var c = this._layers.iterator(); c.hasNext();) c.next().move(a, b) },
        setScale: function(a) { this.scale = a;
            this.dimensionsScaled.width = this.dimensions.width / a;
            this.dimensionsScaled.height = this.dimensions.height / a;
            this._sprite.setScale(a) },
        __class__: Oj
    });
    var Qj = function() { i.call(this) };
    g["stolo.ensys.system.SoundSystem"] = Qj;
    Qj.__name__ = ["stolo", "ensys", "system", "SoundSystem"];
    Qj.__super__ = i;
    Qj.prototype = k(i.prototype, {
        get_name: function() { return "SoundSystem_51" },
        play: function(a, b, c, d, e, f, l) {
            null == f && (f = !1);
            null == e && (e = !1);
            null == d && (d = 1);
            if (null == a || "" == a) return null;
            if (null != b) {
                if (null == this._targetTransform) return null;
                b = b._compMap.TransformComponent_70;
                if (null == b || 64E4 < Math.pow(b.position.x - this._targetTransform.position.x, 2) + Math.pow(b.position.y -
                        this._targetTransform.position.y, 2)) return null
            }
            return t.play(a, c, d, e, f, l)
        },
        __class__: Qj
    });
    var E = function() {};
    g["stolo.managers.AssetManager"] = E;
    E.__name__ = ["stolo", "managers", "AssetManager"];
    E.loadPacks = function(a, b, c) {
        null == c && (c = !0);
        for (var d = [], e = 0; e < a.length;) { var f = a[e];++e; var l = null;
            K.is(f, P.TObject) ? null != f.files && (l = E.createDynamicPack(f.name, f.files, function() {}, null != f.useFileAsEntryName ? f.useFileAsEntryName : !1)) : K.is(f, P.TClass(String)) && (l = E.loadPack(f, function() {}, c));
            null != l && d.push(l) }
        if (0 ==
            d.length) return null != b && b(), null;
        a = new yi(d);
        if (null != b) a.success.connect(function() { null != b && b() }).once();
        return a
    };
    E.getPack = function(a, b) { null == b && (b = !0);
        a = E.validatePackName(a); if (!E._cachedPacks.exists(a)) { if (b) throw "Assetpack " + a + " is not loaded: use AssetManager.loadPack"; return null } return E._cachedPacks.get(a) };
    E.validatePackName = function(a) { E._replacedPacks.exists(a) && (a = E._replacedPacks.get(a)); return a };
    E.loadPack = function(a, b, c, d, e) {
        null == c && (c = !0);
        null == d && (d = E.locale);
        a = E.validatePackName(a);
        if (E._cachedPacks.exists(a)) return b(E._cachedPacks.get(a)), null;
        if (E._loadingPacks.exists(a)) return E._loadingPacks.get(a).callbacks.push(b), E._loadingPacks.get(a).loader;
        if (null == e) { if (!Ma.exists(a)) { if (-1 < a.indexOf("/")) return E.createSubPack(a, b); if (c) throw "Pack not found: '" + a + "'"; return null } e = null == d ? Ma.fromAssets(a) : Ma.fromAssetsLocalized(a, d) } E.onManifestInit.emit(a, e);
        c = x._platform.loadAssetPack(e);
        d = [];
        d.push(b);
        b = { name: a, manifest: e, loader: c, callbacks: d };
        E._loadingPacks.set(a, b);
        E._loadingPacksDict.set(e,
            b);
        c.get(E.onAssetsLoaded);
        return c
    };
    E.createDynamicPack = function(a, b, c, d) {
        null == d && (d = !1);
        var e = new Ma;
        e.set_localBase("assets");
        for (var f, l = 0, h = 0; h < b.length;) { var g = b[h];++h;
            f = g.split("/");
            f = Ma.fromAssets(f[0]); if (null == f) throw "Unable to create the Manifest for the file " + g; for (var i = H.iter(f._entries); i.hasNext();)
                if (f = i.next(), -1 != f.url.indexOf(g)) { l++;
                    g = d ? g : f.name.substring(f.name.lastIndexOf("/") + 1, f.name.length);
                    e.add(g, f.url, f.bytes, f.format); break } }
        if (0 == l) throw "The dynamic pack " + a + " is empty";
        return E.loadPack(a, c, !1, null, e)
    };
    E.createSubPack = function(a, b) {
        if (Ma.exists(a)) throw "Manifest" + a + " already exist";
        var c = a.split("/"),
            d = a.substring(a.indexOf("/") + 1, a.length),
            e = Ma.fromAssets(c[0]);
        if (null == e) throw "Unable to create the Manifest for the path " + a;
        c = new Ma;
        c.set_localBase("assets");
        for (var f = 0, l = H.iter(e._entries); l.hasNext();) { var h = l.next(); - 1 != h.name.indexOf(d) && (f++, e = h.name.substring(h.name.lastIndexOf("/") + 1, h.name.length), c.add(e, h.url, h.bytes, h.format)) }
        if (0 == f) throw "The sub pack " +
            a + " is empty";
        return E.loadPack(a, b, !1, null, c)
    };
    E.onAssetsLoaded = function(a) { var b, c = a.get_manifest();
        b = E._loadingPacksDict.h[c.__id__];
        E._loadingPacks.remove(b.name);
        c = a.get_manifest();
        E._loadingPacksDict.remove(c);
        E._cachedPacks.set(b.name, a);
        c = 0; for (b = b.callbacks; c < b.length;) { var d = b[c];++c;
            d(a) } };
    E.disposePack = function(a) {
        if (E._protectedPacks.exists(a)) throw "AssetPack " + a + " was protected using AssetManager.protectPack(), Please make sure you do not attempt to dispose of it!";
        if (E._loadingPacks.exists(a)) throw "Pack '" +
            a + "' is loading";
        if (!E._cachedPacks.exists(a)) return null;
        var b = E._cachedPacks.get(a);
        b.dispose();
        E._cachedPacks.remove(a);
        return b
    };
    E.getJSON = function(a, b, c, d) {
        null == d && (d = !0);
        null == c && (c = !0);
        null != a && 0 > a.indexOf(".") && (a += ".json");
        var e = E.getPack(b),
            f = null;
        if (d && (f = b + "_" + a, E._jsonCache.exists(f))) return E._jsonCache.get(f);
        e = e.getFile(a, !1);
        if (null == e) { if (c) throw "Cannot find JSON file '" + a + "' in pack " + b; return null }
        try { var h = JSON.parse(e.toString());
            d && (E._jsonCache.set(f, h), h);
            e.dispose(); return h } catch (g) {
            throw "Error loading JSON '" +
                a + "', pack:" + b + "\n\t" + y.string(g);
        }
    };
    var um = function() { this.unlocked = [] };
    g["stolo.managers.CodeManager"] = um;
    um.__name__ = ["stolo", "managers", "CodeManager"];
    um.prototype = {
        init: function(a) { this._availableCodes = a;
            this.localizeCodes() },
        localizeCodes: function() { if (null == this.localizedCodes) { this.localizedCodes = new M; for (var a = 0, b = this.get_availableCodes(); a < b.length;) { var c = b[a];++a;
                    this.localizedCodes.set(c, Ga.localize("CODE_" + c).text) } } },
        getCode: function(a) {
            if (null == a || "" == a) return null;
            for (var b = this.localizedCodes.keys(); b.hasNext();) {
                var c =
                    b.next();
                if (a == this.localizedCodes.get(c)) return c
            }
            return null
        },
        lock: function(a) { a = this.unlocked.indexOf(a); - 1 != a && this.unlocked.splice(a, 1) },
        unlock: function(a) {-1 == this.unlocked.indexOf(a) && this.unlocked.push(a) },
        isUnlocked: function(a) { return -1 != this.unlocked.indexOf(a) },
        isCodeValid: function(a) { for (var b = 0, c = this._availableCodes; b < c.length;) { var d = c[b];++b; if (d == a) return !0 } return !1 },
        reset: function() { for (; 0 < this.unlocked.length;) this.unlocked.pop() },
        get_availableCodes: function() { return this._availableCodes },
        __class__: um,
        __properties__: { get_availableCodes: "get_availableCodes" }
    };
    var Ga = function() {};
    g["stolo.managers.LocalizationManager"] = Ga;
    Ga.__name__ = ["stolo", "managers", "LocalizationManager"];
    Ga.hasLocale = function(a) { return Ga.localesMap.exists(a) };
    Ga.getLocale = function(a) { return Ga.localesMap.get(a) };
    Ga.localize = function(a, b) { var c = Ga.getLocale(a);
        null != c ? (c.text = Ga.applyTemplate(c._text, b), c.localized = !0) : c = { text: Ga.NOT_FOUND_PREFIX + a + Ga.NOT_FOUND_SUFFIX, localized: !1 }; return c };
    Ga.localizeTextField =
        function(a, b, c, d) { c = Ga.localize(b, c);
            null != c ? (a.set_text(c.text), null != c.fontStyle ? C.applyFontStyle(a, c.fontStyle) : a.set_font(d)) : a.set_text(b); return c };
    Ga.applyTemplate = function(a, b) { if (null == b) return a; for (var c = 0, d = z.fields(b); c < d.length;) { var e = d[c];++c;
            a = ma.replace(a, "{{" + e + "}}", z.field(b, e)) } return a };
    Ga.loadPack = function(a) { null == a && (a = "text");
        E.getPack(a); for (var b = E.getPack(a).get_manifest().iterator(); b.hasNext();) { var c = b.next();
            Ga.loadXML(c.name, a) } };
    Ga.loadXML = function(a, b, c) {
        null ==
            c && (c = !0);
        null == b && (b = "text");
        null == a && (a = "localization.xml");
        var d = E.getPack(b).getFile(a, !1);
        if (null == d) throw "Cannot find '" + a + "' in pack " + b;
        a = d.toString();
        a = Ga.processCharacters(a);
        a = R.parse(a);
        a = new ih(a.firstElement());
        a.hasNode.resolve("fonts") && (b = a.node.resolve("fonts"), C.configureFromXML(b));
        if (a.hasNode.resolve("strings")) { a.node.resolve("strings"); for (a = a.node.resolve("strings").nodes.resolve("string").iterator(); a.hasNext();) b = a.next(), Ga.addLocaleFormatFromXML(b) } c && d.dispose()
    };
    Ga.addLocaleFormatFromXML =
        function(a) {
            var b = a.att.resolve("id"),
                c = { _text: a.get_innerData() },
                d = null;
            a.has.resolve("fontStyle") && (d = C.getFontStyle(a.att.resolve("fontStyle")));
            a.has.resolve("fontScale") && (d = C.extendFontStyle(d, "fontScale", y.parseFloat(a.att.resolve("fontScale"))));
            a.has.resolve("offsetX") && (d = C.extendFontStyle(d, "offsetX", y.parseFloat(a.att.resolve("offsetX"))));
            a.has.resolve("offsetY") && (d = C.extendFontStyle(d, "offsetY", y.parseFloat(a.att.resolve("offsetY"))));
            a.has.resolve("align") && "" != a.att.resolve("align") &&
                (d = C.extendFontStyle(d, "align", a.att.resolve("align")));
            if (a.has.resolve("fontName")) { var e = C.getFont(a.att.resolve("fontName"));
                null == e ? null : (d = C.extendFontStyle(d, "fontName", a.att.resolve("fontName")), d = C.extendFontStyle(d, "fontName", e)) } null != d && (!0 == d.generated && (d.name = b + "_style"), c.fontStyle = d);
            Ga.localesMap.set(b, c)
        };
    Ga.processCharacters = function(a) { a = (new Uc("\r\n", "g")).replace(a, "\n"); return a = (new Uc("\r", "g")).replace(a, "\n") };
    var N = function() {};
    g["stolo.managers.SceneManager"] = N;
    N.__name__ = ["stolo", "managers", "SceneManager"];
    N.createInstantTransition = function() { return new si(0, D.quintOut) };
    N.change = function(a, b) { null == b && (b = N.createInstantTransition()); if (null == N._director) throw "Director not set, was SceneManager.setScenes called?";
        N.onChange.emit(); if (N.SkipChange) return N.SkipChange = !1, null; var c = N.getScene(a);
        N._director.unwindToScene((new p).add(c), b); return c };
    N.push = function(a, b) {
        null == b && (b = N.createInstantTransition());
        if (null == N._director) throw "Director not set, was SceneManager.setScenes called?";
        N.onPush.emit();
        var c = N.getScene(a);
        N._director.pushScene((new p).add(c), b);
        return c
    };
    N.pop = function(a) { if (1 == N._director.scenes.length) throw "Scene will not be removed (last in stack!)"; var b = N._director.scenes[N._director.scenes.length - 1]._compMap.Scene_52;
        N.onPop.emit();
        N._director.popScene(a); return b };
    N.setScenes = function(a, b) { null == b && (b = !0);
        null == N._director && (N._director = new ri, b ? x.root.addChild((new p).add(N._director)) : x.root.add(N._director));
        N.addScenes(a) };
    N.addScenes = function(a) {
        for (var b =
                a.keys(); b.hasNext();) { var c = b.next();
            N.addScene(c, a.get(c)) }
    };
    N.addScene = function(a, b) { N.CaseSensitive || (a = a.toLowerCase()); if (N._sceneMap.exists(a)) throw "Illegal operation: scene '" + a + "' is already registered";
        N._sceneMap.set(a, b) };
    N.getScene = function(a) { N.CaseSensitive || (a = a.toLowerCase()); if (!N._sceneMap.exists(a)) throw "Scene '" + a + "' is not registered or does not exists.";
        a = N._sceneMap.get(a); return ia.createInstance(a, []) };
    var t = function() {};
    g["stolo.managers.SoundManager"] = t;
    t.__name__ = ["stolo",
        "managers", "SoundManager"
    ];
    t.__properties__ = { get_isMuted: "get_isMuted" };
    t.playMusic = function(a, b, c) { null == c && (c = -1);
        null == b && (b = !1); if (t._musicDisabled || null == t._soundPack) return null;
        t._unmuteMusic = a; if (0 == t._volume) return null;
        0 > c && (c = t.defaultMusicVolume); if (t._currentMusic == a && !b) return null;
        b = t.play(a, "MUSIC", c, !0, !1); if (null == b) return b;
        t._currentMusic = a; return t._currentMusicPlayback = b };
    t.play = function(a, b, c, d, e, f) {
        null == e && (e = !1);
        null == d && (d = !1);
        null == c && (c = 1);
        if (t._soundsDisabled || null ==
            t._soundPack || 0 == t._volume || null == a) return null;
        0 <= a.indexOf("{") && (a = t.getIdFromTemplate(a, f));
        f = Ce.stamp();
        if (t.soundPollingMap.exists(a)) { var h = t.soundPollingMap.get(a); if (f - h < t.soundPollingSeconds) return null } t.soundPollingMap.set(a, f);
        f = null;
        a = t._soundPack.getSound(a, !1);
        if (null == a || 0 >= a.get_duration()) return null;
        null == b && (b = "OTHER");
        if (t.channels.exists(b)) { f = t.channels.get(b); if (!(null == f || f.get_complete().get__()) && e) return null;
            f = t.__playSoundInChannel(a, c, d, b, f) } else f = t.__playSoundInChannel(a,
            c, d, b);
        b = f;
        null != b._clonedElement && (b._clonedElement.autoplay = !0);
        return f
    };
    t.getIdFromTemplate = function(a, b) { var c = a; if (0 <= c.indexOf("{random(")) var d = c.split("{random(")[1],
            d = y.parseInt(d.split(")}")[0]),
            e = Math.floor(Math.random() * d + 1),
            c = ma.replace(c, "{random(" + d + ")}", "" + e); if (null != b) { d = 0; for (e = z.fields(b); d < e.length;) { var f = e[d];++d;
                c = ma.replace(c, "{{" + f + "}}", z.field(b, f)) } } return c };
    t.__playSoundInChannel = function(a, b, c, d, e) {
        null != e && (e.set_paused(!0), e.dispose(), t.channels.set(d, null));
        e = c ?
            a.loop(b) : a.play(b);
        t.channels.set(d, e);
        return e
    };
    t.mute = function() { t.setVolume(0) };
    t.unmute = function() { t.setVolume(t._unmuteVolume);
        null != t._unmuteMusic && t.playMusic(t._unmuteMusic) };
    t.setVolume = function(a, b, c) { null == b && (b = 0.2);
        null == c && (c = D.quadInOut);
        0 == a ? (t._unmuteVolume = 0 < t._volume ? t._volume : t.defaultVolume, t._volume = 0, va.set("soundMuted", !0)) : (t._volume = a, 0 > t._volume && (t._volume = t.defaultVolume), va.set("soundMuted", !1));
        x.volume.animateTo(t._volume, b, c); return x.volume };
    t.get_isMuted = function() {
        return -1 <
            t._volume ? 0 == t._volume : !1
    };
    t.loadSounds = function(a, b) { E.loadPack(a, t.onAssetsLoaded);!0 == va.get("soundMuted", !1) ? t.mute() : t.setVolume(t.defaultVolume);
        t._callback = b };
    t.setSounds = function(a) { t._soundPack = a };
    t.onAssetsLoaded = function(a) { t.setSounds(a);
        null != t._callback && t._callback() };
    var bb = g["stolo.managers.SpritesheetType"] = { __ename__: ["stolo", "managers", "SpritesheetType"], __constructs__: ["Auto", "JsonArray", "Grid", "Flump", "Zoe"] };
    bb.Auto = ["Auto", 0];
    bb.Auto.toString = s;
    bb.Auto.__enum__ = bb;
    bb.JsonArray = ["JsonArray", 1];
    bb.JsonArray.toString = s;
    bb.JsonArray.__enum__ = bb;
    bb.Grid = ["Grid", 2];
    bb.Grid.toString = s;
    bb.Grid.__enum__ = bb;
    bb.Flump = ["Flump", 3];
    bb.Flump.toString = s;
    bb.Flump.__enum__ = bb;
    bb.Zoe = ["Zoe", 4];
    bb.Zoe.toString = s;
    bb.Zoe.__enum__ = bb;
    var Pa = function() {};
    g["stolo.managers.SpritesheetManager"] = Pa;
    Pa.__name__ = ["stolo", "managers", "SpritesheetManager"];
    Pa.getSpritesheet = function(a, b, c, d) {
        null == b && (b = Pa.DefaultManifest);
        null == d && (d = bb.Auto);
        var e = b + "_" + a;
        if (Pa._cachedSpritesheets.exists(e)) c(Pa._cachedSpritesheets.get(e));
        else if (Pa._loadingSpritesheets.exists(e)) Pa._loadingSpritesheets.get(e).callbacks.push(c);
        else { var f = Pa.createRequest(e, a, b, c, d);
            Pa._loadingSpritesheets.set(e, f);
            f.loader = E.loadPack(b, function(a) { Pa.onRequestComplete(f, a) }) }
    };
    Pa.createRequest = function(a, b, c, d, e) { for (var f = b.split(","), h = [], g = 0; g < f.length;) { var i = f[g];++g; switch (e[1]) {
                case 3:
                    i = mn.getFileInfo(i, null); break;
                default:
                    i = mn.getFileInfo(i, Pa.DefaultFileName) } h.push(i) } f = [];
        f.push(d); return { id: a, pack: c, name: b, type: e, jsonFiles: h, callbacks: f } };
    Pa.onRequestComplete = function(a, b) {
        var c = null,
            d = a.jsonFiles[0],
            e;
        if (a.type == bb.Flump) c = new Dl(a.name, b), c.set_name(a.id);
        else
            for (var f = 0, h = a.jsonFiles; f < h.length;) {
                var g = h[f];
                ++f;
                e = b.getFile(g.url, !1);
                if (null == e)
                    for (var i = !1, j = 0; !i;) { e = ma.replace(g.url, ".json", j + ".json");
                        e = b.getFile(e, !1); if (null == e) { if (0 == j) throw "Spritesheet not found: '" + g.url + "' on pack '" + a.pack + "'";
                            i = !0 } else e = JSON.parse(e.toString()), c = Pa.appendToSpriteSheet(c, e, b, g);
                        j++ } else e = JSON.parse(e.toString()), c = Pa.appendToSpriteSheet(c,
                        e, b, g);
                c.set_name(a.id)
            }
        c.finalize();
        d = ma.replace(d.url, ".json", "_meta.json");
        e = b.getFile(d, !1);
        null != e && (d = JSON.parse(e.toString()), c.applyOverrides(d));
        Pa._loadingSpritesheets.remove(a.id);
        Pa._cachedSpritesheets.set(a.id, c);
        if (null != c) { d = 0; for (f = a.callbacks; d < f.length;) h = f[d], ++d, h(c) }
    };
    Pa.appendToSpriteSheet = function(a, b, c, d) {
        if (null != b.frames && b.frames.length) null == a && (a = new id), a.parseData(c, b, d.path);
        else if (0 < b.frameWidth) null == a && (a = new Ag), a.parseData(c, b, d.path);
        else throw "Unsupported JSON data: " +
            y.string(b);
        return a
    };
    var va = function() {};
    g["stolo.managers.StorageManager"] = va;
    va.__name__ = ["stolo", "managers", "StorageManager"];
    va.get = function(a, b, c) { null == c && (c = !0);
        null == b && null != va.Defaults && (b = va.getDefaultValue(a));
        c && (a = va.Prefix + a); return x._platform.getStorage().get(a, b) };
    va.getDefaultValue = function(a) { return !Object.prototype.hasOwnProperty.call(va.Defaults, a) ? null : z.field(va.Defaults, a) };
    va.set = function(a, b, c) {
        null == c && (c = !0);
        if (c) {
            if (null == va.Prefix) throw "StorageManager.Prefix was not set";
            a = va.Prefix + a
        }
        return x._platform.getStorage().set(a, b)
    };
    va.getWithPrefix = function(a, b, c) { null == c && null != va.Defaults && (c = va.getDefaultValue(b)); return null == a ? va.get(b, c) : x._platform.getStorage().get(a + b, c) };
    va.setWithPrefix = function(a, b, c) { return null == a ? va.set(b, c) : x._platform.getStorage().set(a + b, c) };
    var C = function() {};
    g["stolo.managers.TextManager"] = C;
    C.__name__ = ["stolo", "managers", "TextManager"];
    C.addFontPack = function(a) {
        for (var b, c, d = a.get_manifest().iterator(); d.hasNext();) b = d.next(), c = b.name.indexOf(".fnt"),
            -1 < c && (c = b.name.substring(0, c), b = new sf(a, c), null == C.defaultFont && (C.defaultFont = b), C._fontMap.set(c, b))
    };
    C.getFont = function(a, b) { null == b && (b = !0); if (b && !C._fontMap.exists(a)) throw "Font not found: '" + a + "'"; return C._fontMap.get(a) };
    C.setDefaultFont = function(a) { C.defaultFont = a;
        C._fontMap.set(C.defaultFontName, a) };
    C.getFontStyle = function(a, b) { null == b && (b = !0); if (b && !C._fontStylesMap.exists(a)) throw "Font style not found: '" + a + "'"; return C._fontStylesMap.get(a) };
    C.addFontStyle = function(a) {
        if (null == a.font &&
            (a.font = C.getFont(a.fontName), null == a.font)) throw "Font '" + a.fontName + "' not found to create font style '" + a.name + "'";
        C._fontStylesMap.set(a.name, a);
        return a
    };
    C.applyFontStyle = function(a, b) {
        null != b.font && a.set_font(b.font);
        0 < b.fontScale && (a.setScale(b.fontScale), C.ChangePixelSnapping && 1 != b.fontScale && a.set_pixelSnapping(!1));
        if ((0 < b.offsetX || 0 > b.offsetX || 0 < b.offsetY || 0 > b.offsetY) && !I.__instanceof(a, Le)) {
            if (0 < b.offsetX || 0 > b.offsetX) { var c = a.anchorX;
                c.set__(c._value - b.offsetX) }
            if (0 < b.offsetY || 0 > b.offsetY) c =
                a.anchorY, c.set__(c._value - b.offsetY)
        }
        null != b.align && a.set_align(b.align);
        null != b.letterSpacing && a.letterSpacing.set__(b.letterSpacing);
        return a
    };
    C.getLocalizedTextSprite = function(a, b, c, d, e) { a = new Le(a, b, e);
        null != c && null != d && a.setXY(c, d); return a };
    C.getTextSprite = function(a, b, c, d) {
        null == b && (b = "");
        null == a && (a = C.defaultFontName);
        var e = C.getFontStyle(a, !1),
            a = null != e ? e.font : C.getFont(a),
            b = new Gc(a, b);
        null != c && b.x.set__(c);
        null != d && b.y.set__(d);
        null != e && (C.applyFontStyle(b, e), null != e.transform && b.set_text(C.applyTransform(b._text,
            e.transform)));
        return b
    };
    C.applyTransform = function(a, b) { return "uppercase" == b ? a.toUpperCase() : "lowercase" == b ? a.toLowerCase() : a };
    C.extendFontStyle = function(a, b, c) { if (null == a || !0 != a.generated) { var d = { generated: !0 }; if (null != a) { d.parent = a; for (var e = 0, f = z.fields(a); e < f.length;) { var h = f[e];++e;
                    z.setProperty(d, h, z.field(a, h)) } } a = d } z.setProperty(a, b, c); return a };
    C.configureFromXML = function(a) {
        var b = null;
        if (a.has.resolve("defaultFont") && (b = C.getFont(a.att.resolve("defaultFont")), null == b)) throw "Default font '" +
            a.att.resolve("defaultFont") + "' not found";
        for (a = a.nodes.resolve("style").iterator(); a.hasNext();) {
            var c = a.next(),
                d = C.createFontStyle(c.att.resolve("name"));
            c.has.resolve("fontName") && (d.fontName = c.att.resolve("fontName"));
            c.has.resolve("fontScale") && (d.fontScale = y.parseFloat(c.att.resolve("fontScale")));
            c.has.resolve("offsetX") && (d.offsetX = y.parseFloat(c.att.resolve("offsetX")));
            c.has.resolve("offsetY") && (d.offsetY = y.parseFloat(c.att.resolve("offsetY")));
            c.has.resolve("letterSpacing") && (d.letterSpacing =
                y.parseFloat(c.att.resolve("letterSpacing")));
            c.has.resolve("align") && ("center" == c.att.resolve("align") && (d.align = Z.Center), "left" == c.att.resolve("align") && (d.align = Z.Left), "right" == c.att.resolve("align") && (d.align = Z.Right));
            c.has.resolve("transform") && (d.transform = c.att.resolve("transform"));
            null == b && (b = d.font);
            C.addFontStyle(d)
        }
        null != b ? C.setDefaultFont(b) : null
    };
    C.createFontStyle = function(a) { return { name: a, fontName: C.defaultFontName, transform: C.defaultTransform } };
    var Bg = function(a, b, c, d, e, f, h) {
        null ==
            h && (h = !0);
        this.fps = -1;
        this.frames = [];
        this.name = b;
        this.prefix = c;
        this.spriteSheet = a;
        this.fps = d;
        this.width = e;
        this.height = f;
        this.loop = h
    };
    g["stolo.sprites.AnimationSymbol"] = Bg;
    Bg.__name__ = ["stolo", "sprites", "AnimationSymbol"];
    Bg.prototype = {
        getReversedFrames: function() { return null != this._reversedFrames ? this._reversedFrames : this._reversedFrames = this.frames.slice().reverse() },
        addCuePoint: function(a) { null == this.cues && (this.cues = []);
            this.cues.push(a) },
        addFrame: function(a) { this.frames.push(a) },
        orderFramesByName: function() {
            this.frames.sort(function(a,
                b) { return a.name == b.name ? 0 : a.name > b.name ? 1 : -1 })
        },
        setFrames: function(a, b) { for (var c = [], d = 0; d < a.length;) { var e = a[d];++d; var f = b[e - id.BaseIndex]; if (null == f) throw "Frame " + e + " not found";
                c.push(f) } 0 < c.length && (this.frames = c); return this.frames },
        setFrameData: function(a, b) { null != this.frames[a] && (this.frames[a].data = b) },
        __class__: Bg
    };
    var El = function() {};
    g["stolo.sprites.BitmapFrameSymbol"] = El;
    El.__name__ = ["stolo", "sprites", "BitmapFrameSymbol"];
    El.prototype = {
        get_subTexture: function() {
            null == this._subTexture &&
                null != this.texture && (this._subTexture = this.texture.subTexture(this.x, this.y, this.width, this.height));
            return this._subTexture
        },
        __class__: El,
        __properties__: { get_subTexture: "get_subTexture" }
    };
    var Rk = function(a, b, c, d, e) { null == e && (e = !0);
        this._root = new p;
        this._cache = new M;
        this.onUpdateSignal = new S; "" == a && (a = null);
        this.prefix = a;
        fb.call(this, null, null, d, e);
        null != b && Pa.getSpritesheet(b, c, function(a) { return function(b) { return a(b) } }(m(this, this.onSpritesheetReady)), bb.Flump) };
    g["stolo.sprites.FlumpAnimation"] =
        Rk;
    Rk.__name__ = ["stolo", "sprites", "FlumpAnimation"];
    Rk.__super__ = fb;
    Rk.prototype = k(fb.prototype, {
        onAdded: function() { this.owner.addChild(this._root);
            fb.prototype.onAdded.call(this) },
        onUpdate: function(a) { this.onUpdateSignal.emit(a);
            fb.prototype.onUpdate.call(this, a) },
        initialize: function(a) { this.flump = a; if (null == this.flump) throw "Missing or incompatible spritesheet: " + y.string(a);
            this._lib = this.flump.lib;
            fb.prototype.initialize.call(this, a) },
        setDecorator: function(a) { this._decorator = a; return this },
        start: function() {
            this.isReady ||
                (this.onReady.emit(this), this.isReady = !0, this.gotoAndPlay(this.animName, this.animParams))
        },
        updateAnim: function(a) { 0 != (this._flags & 2) && this._isPlaying && this.speed.update(a) },
        setAnim: function(a) { this._animation = a;
            this._currentFPS = 0 < this._animation.fps ? this._animation.fps : this.get_spritesheet().fps;
            this.playFromCache(a.name) },
        gotoFrame: function(a) { null != this.movie && this.movie.set_position((a - 1) / this.movie.symbol.frameRate) },
        playFromCache: function(a) {
            var b;
            if (null != this._cache)
                if (b = this._cache.get(a),
                    null != b) b.set_position(0);
                else { if (null == this._lib._symbols.get(a)) return fb.verbose && null, null;
                    b = this.createMovie(a);
                    this._cache.set(a, b) }
            else b = this.createMovie(a);
            return this.setCurrent(b)
        },
        createMovie: function(a) { a = this._lib.createSprite(a, !0);
            null != this._decorator && this._decorator(a); return a },
        setCurrent: function(a) {
            this._root.add(a);
            this.movie = a;
            null != this._animCompleteConnection && this._animCompleteConnection.dispose();
            this._animCompleteConnection = a.get_looped().connect(m(this, this.handleAnimComplete));
            return a
        },
        __class__: Rk
    });
    var id = function() { this._animations = new M;
        this.nameSeparator = "/";
        this.prefixSeparator = "_";
        this.defaultAnim = "idle";
        this.fps = id.DefaultFPS;
        this.type = bb.JsonArray };
    g["stolo.sprites.Spritesheet"] = id;
    id.__name__ = ["stolo", "sprites", "Spritesheet"];
    id.prototype = {
        getAnimation: function(a, b, c) { null == c && (c = !1);
            null != b && (a = b + this.prefixSeparator + a); if (!this._animations.exists(a)) { if (c) throw "Animation not found: '" + a + "' in spritesheet " + this._name; return null } return this._animations.get(a) },
        getTexture: function(a, b, c) { null == c && (c = !0);
            a = this.getBitmapSymbol(a, b, c); return null == a ? null : a.get_subTexture() },
        getBitmapSymbol: function(a, b, c) { null == c && (c = !1); if (c && !this._bitmapSymbols.exists(a)) throw "Symbol '" + a + "' not found in spritesheet " + this._name; return this._bitmapSymbols.get(a) },
        finalize: function() { this.orderFramesByName();
            null != this._overrides && this.applyOverrides(this._overrides) },
        parseData: function(a, b, c) {
            for (var a = a.getTexture(c + gb.removeFileExtension(b.meta.image)), d, e = c = 0, f = b.frames; e <
                f.length;) { var h = f[e];++e;
                d = null != this.nameSeparator ? h.filename.lastIndexOf(this.nameSeparator) : -1;
                d = 0 >= d ? null : H.substr(h.filename, 0, d);
                h = this.createFrameSymbol(h, a, c);
                null != d && this.addToAnim(d, h, a, c);
                this.addBitmapSymbol(h);
                null == this._frames && (this._frames = []);
                this._frames.push(h);
                c++ } null == this._animations.get(this.defaultAnim) && null != this._firstSymbol && (this.defaultAnim = this._firstSymbol.name);
            if (null == this._animations.get(this.defaultAnim)) {
                c = 0;
                for (e = this._frames; c < e.length;) f = e[c], ++c, this.addToAnim(this.defaultAnim,
                    f, a)
            }
            null != b.spritesheet && (this._overrides = b.spritesheet)
        },
        orderFramesByName: function() { for (var a = this._animations.iterator(); a.hasNext();) a.next().orderFramesByName();
            null != this._frames && this._frames.sort(function(a, c) { return a.name == c.name ? 0 : a.name > c.name ? 1 : -1 }) },
        addToAnim: function(a, b) { var c = this._animations.get(a);
            null == c && (c = new Bg(this, a, null, -1, b.sourceWidth, b.sourceHeight), this._animations.set(a, c), null == this._firstSymbol && (this._firstSymbol = c));
            c.addFrame(b); return c },
        addBitmapSymbol: function(a,
            b) { null == this._bitmapSymbols && (this._bitmapSymbols = new M);
            null == b && (b = a.name);
            this._bitmapSymbols.set(b, a) },
        createFrameSymbol: function(a, b, c) { var d = new El;
            d.index = c;
            d.name = a.filename;
            d.name.lastIndexOf(".") == d.name.length - 4 && (c = d.name.lastIndexOf("."), d.name = H.substr(d.name, 0, c));
            d.texture = b;
            d.x = a.frame.x;
            d.y = a.frame.y;
            d.width = a.frame.w;
            d.height = a.frame.h;
            d.offsetX = a.spriteSourceSize.x;
            d.offsetY = a.spriteSourceSize.y;
            d.sourceWidth = a.sourceSize.w;
            d.sourceHeight = a.sourceSize.h; return d },
        applyOverrides: function(a) {
            for (var b,
                    c = 0, d = z.fields(a); c < d.length;) { var e = d[c];++c;
                b = z.field(a, e); if ("animations" == e || "anims" == e)
                    for (var e = 0, f = z.fields(b); e < f.length;) { var h = f[e];++e;
                        this.modAnim(h, z.field(b, h), !0) } else this.applyOverride(e, b) }
        },
        applyOverride: function(a, b) { Object.prototype.hasOwnProperty.call(this, a) && z.setProperty(this, a, b) },
        modAnim: function(a, b, c, d) {
            null == c && (c = !0);
            var e = this.getAnimation(a, d);
            if (null == e)
                if (c && null != b.frames) e = new Bg(this, a, d, -1, 0, 0), this._animations.set(a, e);
                else throw "Anim '" + a + "' not found";
            a = 0;
            for (c = z.fields(b); a < c.length;) { var f = c[a];++a;
                d = z.field(b, f); if ("frames" == f)
                    if (0 < d.length && 0 <= d[0] && e.setFrames(d, this._frames), 0 < d.length)
                        for (var f = 0, h = d.length; f < h;) { var g = f++;
                            e.setFrameData(g, d[g]) } else throw "Unknown frames format: " + y.string(d);
                    else "cues" == f || "cuepoints" == f ? (d = z.field(b, f), this.addCuePoints(e.name, d, null, e)) : z.setProperty(e, f, d) }
            return e
        },
        addCuePoints: function(a, b, c, d) { null == d && (d = this.getAnimation(a, c, !0)); for (var e = 0; e < b.length;) { var f = b[e];++e;
                this.addCuePoint(a, f, c, d) } },
        addCuePoint: function(a,
            b, c, d) { null == d && (d = this.getAnimation(a, c, !0));
            d.addCuePoint(b); return d },
        get_name: function() { return this._name },
        set_name: function(a) { return this._name = a },
        __class__: id,
        __properties__: { set_name: "set_name", get_name: "get_name" }
    };
    var Dl = function(a, b) { id.call(this);
        this.type = bb.Flump;
        this.loadLibrary(a, b) };
    g["stolo.sprites.FlumpSpritesheet"] = Dl;
    Dl.__name__ = ["stolo", "sprites", "FlumpSpritesheet"];
    Dl.__super__ = id;
    Dl.prototype = k(id.prototype, {
        getAnimation: function(a, b) {
            null != b && (a = b + this.prefixSeparator + a);
            return !this._animations.exists(a) ? this.createAnimation(a, b) : this._animations.get(a)
        },
        loadLibrary: function(a, b) { this.lib = new nm(b, a) },
        createAnimation: function(a, b) { if (null == this.lib._symbols.get(a)) return null; var c = new Bg(this, a, b, -1, 0, 0);
            this._animations.set(a, c); return c },
        finalize: function() {},
        __class__: Dl
    });
    var Ag = function() { this._framesMap = new Fb;
        id.call(this);
        this.type = bb.Grid };
    g["stolo.sprites.GridSpritesheet"] = Ag;
    Ag.__name__ = ["stolo", "sprites", "GridSpritesheet"];
    Ag.__super__ = id;
    Ag.prototype =
        k(id.prototype, {
            finalize: function() {},
            parseData: function(a, b, c) {
                a = a.getTexture(c + gb.removeFileExtension(b.image));
                null != b.defaultAnim && (this.defaultAnim = b.defaultAnim);
                for (var d = 0, e = z.fields(b.animations); d < e.length;) {
                    var f = e[d];
                    ++d;
                    var h = z.field(b.animations, f),
                        c = new Bg(this, f, null, 0 < h.fps ? h.fps : -1, b.frameWidth, b.frameHeight, h.loop),
                        h = h.frames;
                    if (null != h)
                        for (var g = 0; g < h.length;) {
                            var i = h[g];
                            ++g;
                            var i = i - Ag.BaseIndex,
                                j;
                            if (this._framesMap.exists(i)) j = this._framesMap.get(i);
                            else {
                                j = new El;
                                this._framesMap.set(i,
                                    j);
                                for (var k = 0, n = 0, m = c.width * i; m >= a.get_width();) m -= a.get_width(), n += c.height;
                                k += m;
                                j.index = i;
                                j.name = f + "_" + i;
                                j.texture = a;
                                j.x = k;
                                j.y = n;
                                j.width = b.frameWidth;
                                j.height = b.frameHeight;
                                j.offsetX = 0;
                                j.offsetY = 0;
                                j.sourceWidth = b.frameWidth;
                                j.sourceHeight = b.frameHeight
                            }
                            c.addFrame(j)
                        }
                    this._animations.set(f, c)
                }
            },
            __class__: Ag
        });
    var la = g["stolo.ui.ButtonState"] = { __ename__: ["stolo", "ui", "ButtonState"], __constructs__: ["up", "pressed", "selected", "over", "disabled"] };
    la.up = ["up", 0];
    la.up.toString = s;
    la.up.__enum__ = la;
    la.pressed = ["pressed", 1];
    la.pressed.toString = s;
    la.pressed.__enum__ = la;
    la.selected = ["selected", 2];
    la.selected.toString = s;
    la.selected.__enum__ = la;
    la.over = ["over", 3];
    la.over.toString = s;
    la.over.__enum__ = la;
    la.disabled = ["disabled", 4];
    la.disabled.toString = s;
    la.disabled.__enum__ = la;
    var Mh = function(a, b, c, d, e) {
        null == e && (e = "buttons");
        null == d && (d = "");
        this._centered = this._hadDown = !1;
        this._textID = this._fontStyle = "";
        this._state = la.up;
        this.onDownCallback = this.onUpCallback = null;
        this.onChange = new S;
        this.onDown = new S;
        this.onUp =
            new S;
        this.onClick = new S;
        this.pressAnimation = Zc.bounceDownTemplate;
        this.clickNeedsDown = this.upClick = !0;
        this.data = {};
        this.index = -1;
        this.isSelected = this.isDisabled = !1;
        r.call(this);
        null == a && (a = A.get_sharedAssets());
        this._pack = a;
        this._disposer = new za;
        this.updateTexture(b);
        null != c && this._disposer.add(this.onClick.connect(c));
        this._textID = d;
        this._fontStyle = e
    };
    g["stolo.ui.Button"] = Mh;
    Mh.__name__ = ["stolo", "ui", "Button"];
    Mh.__super__ = r;
    Mh.prototype = k(r.prototype, {
        onAdded: function() {
            this.owner.add(this._disposer);
            this.build();
            null == this.origin && this.updateOrigin()
        },
        onRemoved: function() { B.kill(this);
            r.prototype.onRemoved.call(this);
            this.pressAnimation = this.onChange = this.onDown = this.onUp = this.onClick = this.onUpCallback = this.onDownCallback = this._disposer = this.origin = this._pack = this._downTexture = this._texture = this.display = null },
        setXY: function(a, b) { r.prototype.setXY.call(this, a, b);
            this.updateOrigin(); return this },
        updateOrigin: function() {
            null == this.origin && (this.origin = new X(this.x._value, this.y._value));
            this.origin.x =
                this.x._value;
            this.origin.y = this.y._value
        },
        build: function() { if (null != this.display) throw "This button was already added into an Entity.";
            this.display = new ya(this._texture);
            this.owner.addChild((new p).add(this.display));
            this._centered && this.display.centerAnchor();
            this._disposer.add(x._platform.getPointer().up.connect(m(this, this.onStageUp))); "" != this._textID && this.createLabel() },
        createLabel: function() {
            this.label = new Le(this._textID, this._fontStyle);
            this.label.setAlign(Z.Center);
            this.owner.addChild((new p).add(this.label));
            var a = r.getBounds(this.owner);
            this.label.centerAnchor().setXY(0.5 * a.width + 0.5 * this.label.getNaturalWidth(), 0.5 * a.height)
        },
        updateUpTexture: function(a) { this._texture = a },
        updateTexture: function(a) { null != a && (this._texture = A.getTexture(a, this._pack), this._downTexture = A.getTexture(a + "_pressed", this._pack, !1), this._disabledTexture = A.getTexture(a + "_disabled", this._pack, !1), this._selectedTexture = A.getTexture(a + "_selected", this._pack, !1)) },
        updateState: function(a, b) {
            switch (a[1]) {
                case 1:
                    b = this._downTexture;
                    this.PressedAnimation();
                    break;
                case 2:
                    b = this._selectedTexture;
                    break;
                case 4:
                    b = this._disabledTexture;
                    break;
                default:
                    if (this.isDisabled) return this.updateState(la.disabled);
                    if (this.isSelected) return this.updateState(la.selected);
                    b = this._texture
            }
            null == b && (b = this._texture);
            this.display.texture = b;
            this._state != a && this._state
        },
        PressedAnimation: function() { null != this.pressAnimation && (this.setXY(this.origin.x, this.origin.y), B.runTemplate(this.pressAnimation, this)) },
        centerAnchor: function() {
            null != this.display && this.display.centerAnchor();
            this._centered = !0;
            return this
        },
        getNaturalWidth: function() { return this.owner.firstChild._compMap.Sprite_2.getNaturalWidth() },
        getNaturalHeight: function() { return this.owner.firstChild._compMap.Sprite_2.getNaturalHeight() },
        onStageUp: function() { this._hadDown && this.updateState(la.up);
            this._hadDown = !1 },
        disable: function() { this.isSelected || (this.isDisabled = !0, this.updateState(la.disabled), this.onChange.emit(this)) },
        enable: function() { this.isDisabled && (this.isDisabled = !1, this.updateState(la.up), this.onChange.emit(this)) },
        select: function() { this.isSelected || (this.isSelected = !0, this.updateState(la.selected), this.onChange.emit(this)) },
        deselect: function() { this.isSelected && (this.isSelected = !1, this.updateState(la.up), this.onChange.emit(this)) },
        onPointerDown: function(a) { if (!this.isDisabled) { r.prototype.onPointerDown.call(this, a);
                this._hadDown = !0;
                a._stopped = !0;
                this.updateState(la.pressed);
                this.onDown.emit(this); if (null != this.onDownCallback) this.onDownCallback(a);
                this.upClick || this.dispatchClick() } },
        onPointerUp: function(a) {
            if (!this.isDisabled &&
                (r.prototype.onPointerUp.call(this, a), !this.clickNeedsDown || this._hadDown)) { this.updateState(la.up);
                this.onUp.emit(this); if (null != this.onUpCallback) this.onUpCallback(a);
                this.upClick && this.dispatchClick();
                this._hadDown = !1 }
        },
        dispatchClick: function() { this.onClick.emit(this) },
        __class__: Mh
    });
    var nj = function(a, b) {
        this._disposer = new za;
        this._cursorTimer = 0;
        this._text = "";
        this._isBuilt = !1;
        this.placeholderLocale = "TYPE_HERE";
        this.cursorSize = new X(3, 30);
        this.letterSpacing = 5;
        this.letterSize = new X(16, 24);
        this.maxLength =
            12;
        this.fontStyle = "input";
        this.padding = new X(24, 30);
        this.onChange = new ga;
        this.onSubmit = new ga;
        null != b && (this.fontStyle = b);
        ya.call(this, a)
    };
    g["stolo.ui.InputField"] = nj;
    nj.__name__ = ["stolo", "ui", "InputField"];
    nj.__super__ = ya;
    nj.prototype = k(ya.prototype, {
        dispose: function() { ya.prototype.dispose.call(this);
            null != this._disposer && this._disposer.dispose();
            this._disposer = null },
        onAdded: function() { ya.prototype.onAdded.call(this);
            this.build() },
        append: function(a) { this.set_text(this.get_text() + a) },
        pop: function() { this.remove(1) },
        remove: function(a) { 0 != this._text.length && this.set_text(H.substr(this._text, 0, this._text.length - a)) },
        onUpdate: function(a) { 0 >= this._cursorTimer && (this._cursorTimer += 0.5, this._cursor.alpha.animateTo(1 == this._cursor.alpha._value ? 0 : 1, 0.2));
            this._cursorTimer -= a },
        build: function() {
            if (!this._isBuilt) {
                this._isBuilt = !0;
                this._disposer.add(x._platform.getKeyboard().up.connect(m(this, this.handleKeyUp), !0));
                this._letters = [];
                for (var a = 0, b = this.maxLength; a < b;) {
                    var c = a++,
                        d = C.getTextSprite(this.fontStyle);
                    this.owner.addChild((new p).add(d));
                    d.setXY(this.padding.x + c * (this.letterSize.x + this.letterSpacing), this.padding.y);
                    d.set_visible(!1);
                    this._letters.push(d)
                }
                this.placeholder = A.createText(this.placeholderLocale, null, this.owner);
                this.placeholder.setXY(this.getNaturalWidth() / 2, this.padding.y);
                this._cursor = new Wa(7697781, this.cursorSize.x, this.cursorSize.y);
                this._cursor.x.set__(this._letters[0].x._value);
                this._cursor.y.set__(this._letters[0].y._value);
                this.owner.addChild((new p).add(this._cursor))
            }
        },
        handleKeyUp: function(a) {
            a = y.string(a.key); -
            1 != a.indexOf("Number") ? a = H.substr(a, 6, a.length) : -1 != a.indexOf("Numpad") && (a = H.substr(a, 6, a.length));
            "Unknow" != a && 1 == a.length && this._text.length < this.maxLength ? this.set_text(this.get_text() + a) : "Backspace" == a && 0 < this._text.length ? this.pop() : "Enter" == a && 0 < this._text.length && this.onSubmit.emit()
        },
        empty: function(a) { null == a && (a = !0);
            a ? this.set_text("") : (this._text = "", this.update()) },
        isEmpty: function() { return null == this._text || 0 >= this._text.length },
        get_text: function() { return this._text },
        set_text: function(a) {
            if (this._text ==
                a) return this._text;
            null == a && (a = "");
            this._text = a;
            this._text.length > this.maxLength && (this._text = H.substr(this._text, 0, this.maxLength));
            this.update();
            this.onChange.emit();
            return this._text
        },
        update: function() {
            if (0 == this._text.length) { for (var a = 0, b = this._letters; a < b.length;) { var c = b[a];++a;
                    c.set_visible(!1) } this._text = "";
                this.placeholder.set_visible(!0);
                this._cursor.x.set__(this._letters[0].x._value) } else {
                this.placeholder.set_visible(!1);
                for (var a = 0, b = this._text.length, d = c = 0, e = this._letters; d < e.length;) {
                    var f =
                        e[d];
                    ++d;
                    a < b ? (f.set_text(this._text.charAt(a)), f.set_visible(!0), c++) : f.set_visible(!1);
                    a++
                }
                c >= this._letters.length ? (a = this._letters[this._letters.length - 1], this._cursor.x.set__(a.x._value + a.getNaturalWidth() + 5)) : this._cursor.x.set__(this._letters[c].x._value)
            }
        },
        __class__: nj,
        __properties__: k(ya.prototype.__properties__, { set_text: "set_text", get_text: "get_text" })
    });
    var Le = function(a, b, c) {
        this._x = this._y = this._offsetX = this._offsetY = 0;
        this.localized = !1;
        null != b && (this.fontStyle = C.getFontStyle(b), this._defaultFont =
            null != this.fontStyle ? this.fontStyle.font : C.getFont(b));
        null == this._defaultFont && (this._defaultFont = C.defaultFont);
        Gc.call(this, this._defaultFont);
        null != a && this.setText(a, c)
    };
    g["stolo.ui.LocalizedTextSprite"] = Le;
    Le.__name__ = ["stolo", "ui", "LocalizedTextSprite"];
    Le.__super__ = Gc;
    Le.prototype = k(Gc.prototype, {
        applyFontStyle: function(a, b) {
            null == b && (b = !0);
            null == a && (a = this.fontStyle);
            null != a && (b && C.applyFontStyle(this, a), null != a.offsetX && (this._offsetX = a.offsetX), null != a.offsetY && (this._offsetY = a.offsetY),
                null != a.transform && Gc.prototype.set_text.call(this, C.applyTransform(this._text, a.transform)), this.setXY(this._x, this._y))
        },
        onAdded: function() { Gc.prototype.onAdded.call(this) },
        setText: function(a, b, c) { null == c && (c = !0);
            this._id = a;
            this.localized = !1;
            a = Ga.localizeTextField(this, a, b, this._defaultFont);
            this.localized = a.localized;
            c && (null != this.fontStyle && this.applyFontStyle(this.fontStyle), null != a.fontStyle && this.applyFontStyle(a.fontStyle)) },
        set_text: function(a) {
            if (this.localized) throw "Attempting to set text directly with '" +
                a + "', please use setText() send null as constructor id or use a TextSprite instead";
            this.localized = !1;
            return Gc.prototype.set_text.call(this, a)
        },
        setXY: function(a, b) { this._x = a;
            this._y = b; return Gc.prototype.setXY.call(this, this._x + this._offsetX, this._y + this._offsetY) },
        __class__: Le
    });
    var Fl = function(a) { this.onUpdateSound = new S;
        xc.call(this);
        this._pack = a;
        this._downOnTexture = A.getTexture("btn_sound_on_pressed", this._pack);
        this._downOffTexture = A.getTexture("btn_sound_off_pressed", this._pack) };
    g["stolo.ui.SoundButton"] =
        Fl;
    Fl.__name__ = ["stolo", "ui", "SoundButton"];
    Fl.__super__ = xc;
    Fl.prototype = k(xc.prototype, {
        dispose: function() { this.onUpdateSound = this._pack = null;
            xc.prototype.dispose.call(this) },
        onAdded: function() { xc.prototype.onAdded.call(this);
            this._soundButton = new Mh(this._pack, "btn_sound_off");
            this._soundButton.setXY(0, 0);
            this._soundButton.get_pointerUp().connect(m(this, this.onUp));
            this._soundButton.get_pointerDown().connect(m(this, this.onDown));
            this.owner.addChild((new p).add(this._soundButton));
            this.updateSoundState() },
        onUp: function(a) { a._stopped = !0;
            t.get_isMuted() ? t.unmute() : t.mute();
            this.onUpdateSound.emit(t.get_isMuted());
            this.updateSoundState() },
        onDown: function(a) { a._stopped = !0;
            t.get_isMuted() ? null != this._downOnTexture && (this._soundButton.display.texture = this._downOnTexture) : null != this._downOffTexture && (this._soundButton.display.texture = this._downOffTexture) },
        updateSoundState: function() {
            this._soundButton.display.texture = t.get_isMuted() ? A.getTexture("btn_sound_off", this._pack) : A.getTexture("btn_sound_on", this._pack);
            this._soundButton.updateUpTexture(this._soundButton.display.texture)
        },
        __class__: Fl
    });
    var jg = function(a, b) { this._isBuilt = !1;
        this._disposer = new za;
        this.keyMap = jg.DEFAULT_MAPPING;
        this.offset = new X(0, 0);
        this.onKey = new S;
        this.onDelete = new ga;
        ya.call(this, a);
        this._input = b };
    g["stolo.ui.VirtualKeyboard"] = jg;
    jg.__name__ = ["stolo", "ui", "VirtualKeyboard"];
    jg.__super__ = ya;
    jg.prototype = k(ya.prototype, {
        dispose: function() {
            ya.prototype.dispose.call(this);
            null != this._disposer && this._disposer.dispose();
            this._disposer =
                null
        },
        onAdded: function() { ya.prototype.onAdded.call(this);
            this.setXY(0.5 * o.gameWidth + this.offset.x, o.gameHeight + this.offset.y);
            this.setAnchor(0.5 * this.getNaturalWidth(), this.getNaturalHeight());
            this.build();
            null != this._input && this.bindInput(this._input) },
        build: function() { this._isBuilt || (this._isBuilt = !0, this._disposer.add(this.get_pointerUp().connect(m(this, this.onClick)))) },
        bindInput: function(a) { this._disposer.add(this.onKey.connect(m(a, a.append)));
            this._disposer.add(this.onDelete.connect(m(a, a.pop))) },
        onClick: function() { var a = "",
                b = !1,
                c = x._platform.getPointer().get_x(),
                d = x._platform.getPointer().get_y();
            1 != o.scale && (c /= o.scale, d /= o.scale); var e = this.x._value - this.getNaturalWidth() / 2 + this.offset.x,
                f = 560 - this.getNaturalHeight() + this.offset.y;
            c > e + 2 && d > f + 4 && (d < f + 44 ? a = this.keyMap[Math.floor((c - e + 2) / 50)] : d < f + 86 ? c > e + 26 && c < e + 479 && (a = this.keyMap[10 + Math.floor((c - (e + 26)) / 50)]) : c > e + 76 && c < e + 428 ? a = this.keyMap[19 + Math.floor((c - (e + 76)) / 50)] : c > e + 428 && (b = !0));!b && "" != a ? this.onKey.emit(a) : b && this.onDelete.emit() },
        __class__: jg
    });
    var Gl = function(a) { this.onUp = {};
        this.onDown = {};
        i.call(this);
        K.configure(this, a) };
    g["stolo.ui.button.ButtonAnimation"] = Gl;
    Gl.__name__ = ["stolo", "ui", "button", "ButtonAnimation"];
    Gl.__super__ = i;
    Gl.prototype = k(i.prototype, {
        get_name: function() { return "ButtonAnimation_127" },
        onStart: function() {
            i.prototype.onStart.call(this);
            this._button = this.owner._compMap.Sprite_2;
            this._button.disposer.add(this._button.onDown.connect(m(this, this.onButtonDown)));
            this._button.disposer.add(this._button.onUp.connect(m(this,
                this.onButtonUp)))
        },
        onRemoved: function() { B.kill(this._button);
            i.prototype.onRemoved.call(this);
            this._button = null },
        onButtonDown: function() { B.to(this._button.display, this.onDown.props, this.onDown.params) },
        onButtonUp: function() { B.to(this._button.display, this.onUp.props, this.onUp.params) },
        __class__: Gl
    });
    var Hl = function(a) {
        this._hadDown = !1;
        this.disposer = new za;
        this.state = Qa.up;
        this.onChange = new S;
        this.onClick = new S;
        this.onDown = new S;
        this.onUp = new S;
        this.isSelected = this.isDisabled = !1;
        r.call(this);
        null !=
            a && (null != a.onUp && this.onUp.connect(a.onUp), null != a.onDown && this.onDown.connect(a.onDown), null != a.onClick && this.onClick.connect(a.onClick), this.data = a.data)
    };
    g["stolo.ui.button.ButtonBase"] = Hl;
    Hl.__name__ = ["stolo", "ui", "button", "ButtonBase"];
    Hl.__super__ = r;
    Hl.prototype = k(r.prototype, {
        onAdded: function() { r.prototype.onAdded.call(this);
            this.display = new r;
            this.owner.addChild((new p).add(this.display)) },
        onStart: function() {
            r.prototype.onStart.call(this);
            this.disposer.add(this.get_pointerUp().connect(m(this,
                this.onPointerUpHandler)));
            this.disposer.add(this.get_pointerDown().connect(m(this, this.onPointerDownHandler)));
            this.disposer.add(x._platform.getPointer().up.connect(m(this, this.onPointerUpHandler)));
            this.owner.add(this.disposer)
        },
        onRemoved: function() { r.prototype.onRemoved.call(this);
            this.onChange = this.onDown = this.onUp = this.disposer = null },
        updateState: function(a) { if (this.isDisabled) return this.updateState(Qa.disabled); if (this.isSelected) return this.updateState(Qa.selected);
            this.state = a;
            this.onChange.emit(this) },
        disable: function() { this.isDisabled || (this.isDisabled = !0, this.updateState(Qa.disabled)) },
        enable: function() { this.isDisabled && (this.isDisabled = !1, this.updateState(Qa.up)) },
        select: function() { this.isSelected || (this.isSelected = !0, this.updateState(Qa.selected)) },
        deselect: function() { this.isSelected && (this.isSelected = !1, this.updateState(Qa.up)) },
        onPointerDownHandler: function(a) { this.isDisabled || (this._hadDown = !0, a._stopped = !0, this.updateState(Qa.pressed), this.onDown.emit(this)) },
        onPointerUpHandler: function(a) {
            if (!this.isDisabled &&
                this._hadDown) { this._hadDown = !1;
                this.updateState(Qa.up);
                this.onUp.emit(this); var b = new X;
                this.getViewMatrix().inverseTransform(a.viewX, a.viewY, b);
                null != r.hitTest(this.display.owner, b.x, b.y) && this.onClick.emit(this) }
        },
        addChildSprite: function(a) { this.display.owner.addChild(null != a.owner ? a.owner : (new p).add(a)) },
        __class__: Hl
    });
    var $a = function() {};
    g["stolo.ui.button.ButtonFactory"] = $a;
    $a.__name__ = ["stolo", "ui", "button", "ButtonFactory"];
    $a.create = function(a, b) {
        a = K.merge($a.DEFAULT_BUTTON_PARAMS, a, !0);
        null != b && (a = K.merge(a, b, !0));
        var c = new p,
            d = new Hl(a.button);
        c.add(d);
        null != a.image && c.add(new Il(a.image));
        null != a.text && c.add(new Jl(a.text));
        null != a.animation && c.add(new Gl(a.animation));
        null != a.sound && c.add(new Kl(a.sound));
        return d
    };
    $a.createImageButton = function(a, b, c, d) { return $a.create({ button: { onClick: b }, image: { asset: a, pack: c }, text: null }, d) };
    $a.createTextImageButton = function(a, b, c, d, e, f) {
        null == c && (c = "buttons");
        return $a.create({ button: { onClick: d }, image: { asset: a, pack: e }, text: { value: b, fontStyle: c } },
            f)
    };
    var Il = function(a) { this.autoCenter = !0;
        this.x = this.y = 0;
        i.call(this);
        K.configure(this, a);
        this.loadTextures() };
    g["stolo.ui.button.ButtonImage"] = Il;
    Il.__name__ = ["stolo", "ui", "button", "ButtonImage"];
    Il.__super__ = i;
    Il.prototype = k(i.prototype, {
        get_name: function() { return "ButtonImage_125" },
        onAdded: function() {
            i.prototype.onAdded.call(this);
            this.image = new ya(null);
            this._button = this.owner._compMap.Sprite_2;
            this._button.addChildSprite(this.image);
            this._button.disposer.add(this._button.onChange.connect(m(this,
                this.onButtonChange)));
            this.onButtonChange(null)
        },
        onRemoved: function() { i.prototype.onRemoved.call(this);
            this.image = this._pack = this._button = this._selectedTexture = this._disabledTexture = this._downTexture = this._normalTexture = null },
        loadTextures: function() {
            this._pack = null == this.pack ? A.get_sharedAssets() : E.getPack(this.pack);
            null != this.asset && (this._normalTexture = A.getTexture(this.asset, this._pack), this._downTexture = A.getTexture(this.asset + "_pressed", this._pack, !1), this._disabledTexture = A.getTexture(this.asset +
                "_disabled", this._pack, !1), this._selectedTexture = A.getTexture(this.asset + "_selected", this._pack, !1));
            null == this._normalTexture && (this._normalTexture = x._platform.getRenderer().createTexture(100, 100), this._normalTexture.get_graphics().fillRect(16711680, 0, 0, 100, 100))
        },
        onButtonChange: function() {
            var a = null;
            switch (this._button.state[1]) {
                case 1:
                    a = this._downTexture; break;
                case 2:
                    a = this._selectedTexture; break;
                case 4:
                    a = this._disabledTexture; break;
                default:
                    a = this._normalTexture } this.image.texture = null != a ? a : this._normalTexture;
            this.image.setXY(this.x, this.y);
            this.autoCenter && this.image.centerAnchor()
        },
        __class__: Il
    });
    var Kl = function(a) { i.call(this);
        K.configure(this, a) };
    g["stolo.ui.button.ButtonSound"] = Kl;
    Kl.__name__ = ["stolo", "ui", "button", "ButtonSound"];
    Kl.__super__ = i;
    Kl.prototype = k(i.prototype, {
        get_name: function() { return "ButtonSound_128" },
        onAdded: function() {
            i.prototype.onAdded.call(this);
            this._button = this.owner._compMap.Sprite_2;
            this._button.disposer.add(this._button.onUp.connect(m(this, this.onButtonUp)));
            this._button.disposer.add(this._button.onDown.connect(m(this,
                this.onButtonDown)));
            this._button.disposer.add(this._button.onClick.connect(m(this, this.onButtonClick)))
        },
        onButtonUp: function() { null != this.onUp && t.play(this.onUp) },
        onButtonDown: function() { null != this.onDown && t.play(this.onDown) },
        onButtonClick: function() { null != this.onClick && t.play(this.onClick) },
        __class__: Kl
    });
    var Qa = g["stolo.ui.button.ButtonState"] = { __ename__: ["stolo", "ui", "button", "ButtonState"], __constructs__: ["up", "pressed", "selected", "over", "disabled"] };
    Qa.up = ["up", 0];
    Qa.up.toString = s;
    Qa.up.__enum__ =
        Qa;
    Qa.pressed = ["pressed", 1];
    Qa.pressed.toString = s;
    Qa.pressed.__enum__ = Qa;
    Qa.selected = ["selected", 2];
    Qa.selected.toString = s;
    Qa.selected.__enum__ = Qa;
    Qa.over = ["over", 3];
    Qa.over.toString = s;
    Qa.over.__enum__ = Qa;
    Qa.disabled = ["disabled", 4];
    Qa.disabled.toString = s;
    Qa.disabled.__enum__ = Qa;
    var Jl = function(a) { this.localize = !0;
        this.wrapWidth = 0;
        this.autoCenter = !0;
        this.x = this.y = 0;
        i.call(this);
        K.configure(this, a) };
    g["stolo.ui.button.ButtonText"] = Jl;
    Jl.__name__ = ["stolo", "ui", "button", "ButtonText"];
    Jl.__super__ = i;
    Jl.prototype =
        k(i.prototype, {
            get_name: function() { return "ButtonText_126" },
            onAdded: function() { i.prototype.onAdded.call(this);
                this.textSprite = this.localize ? new Le(null, this.fontStyle) : C.getTextSprite(this.fontStyle, null, 0, 0);
                this._button = this.owner._compMap.Sprite_2;
                this._button.addChildSprite(this.textSprite);
                this.updateText() },
            updateText: function(a) {
                null != a && (this.value = a);
                this.textSprite.setWrapWidth(this.wrapWidth);
                this.textSprite.setXY(this.x, this.y);
                this.localize ? I.__cast(this.textSprite, Le).setText(this.value,
                    this.vars) : this.textSprite.set_text(this.value);
                null != this.align && (a = Z.Left, "center" == this.align ? a = Z.Center : "right" == this.align && (a = Z.Right), this.textSprite.setAlign(a));
                this.autoCenter ? this.textSprite._align == Z.Center ? this.textSprite.setAnchor(0, this.textSprite.getNaturalHeight() / 2) : this.textSprite._align == Z.Left ? this.textSprite.centerAnchor() : this.textSprite._align == Z.Right && this.textSprite.setAnchor(-this.textSprite.getNaturalWidth() / 2, this.textSprite.getNaturalHeight() / 2) : this.textSprite.setAnchor(0,
                    0)
            },
            onRemoved: function() { i.prototype.onRemoved.call(this);
                this._button = this.textSprite = null },
            __class__: Jl
        });
    var Nh = function() { this.shortLived = this.isDisposed = !1;
        this.maxY = 580;
        this.spreadX = 30;
        this.startX = 0;
        i.call(this) };
    g["stolo.ui.fx.Confetti"] = Nh;
    Nh.__name__ = ["stolo", "ui", "fx", "Confetti"];
    Nh.__super__ = i;
    Nh.prototype = k(i.prototype, {
        get_name: function() { return "Confetti_113" },
        dispose: function() { this.isDisposed = !0;
            this.allWaveProps = this.flipHolderSprite = this.rotHolderSprite = this.confettiSprite = null;
            i.prototype.dispose.call(this) },
        onAdded: function() { this.build();
            i.prototype.onAdded.call(this) },
        build: function() {
            var a = Math.round(10 + 5 * Math.random());
            this.flipHolderSprite = new r;
            this.owner.add(this.flipHolderSprite);
            this.flipHolderSprite.disablePointer();
            var b = new p;
            this.owner.addChild(b);
            this.rotHolderSprite = new r;
            b.add(this.rotHolderSprite);
            this.rotHolderSprite.disablePointer();
            var c = new p;
            b.addChild(c);
            this.confettiSprite = new Wa(this.color, a, a);
            c.add(this.confettiSprite);
            this.confettiSprite.x.set__(-a / 2);
            this.confettiSprite.y.set__(-a /
                2);
            this.confettiSprite.disablePointer();
            this.xProp = new Qf(0.25, 1);
            this.yProp = new Qf(2, 4);
            this.flipProp = new Qf(4, 8);
            this.rotProp = new Qf(1, 4);
            this.flipRotProp = new Qf(0.25, 1);
            this.allWaveProps = [this.xProp, this.yProp, this.flipProp, this.rotProp, this.flipRotProp];
            this.reset()
        },
        reset: function() { for (var a = 0, b = this.allWaveProps.length; a < b;) this.allWaveProps[a++].randomizeSpeed();
            this.yProp.value = 0 },
        update: function(a) {
            if (!this.isDisposed) {
                for (var b = 0, c = this.allWaveProps.length; b < c;) this.allWaveProps[b++].update(a);
                this.yProp.value > 2 * Math.PI && (this.shortLived ? this.dispose() : this.reset());
                this.flipHolderSprite.x.set__(this.startX + Math.sin(this.xProp.value) * this.spreadX);
                this.flipHolderSprite.y.set__(this.yProp.value / (2 * Math.PI) * this.maxY);
                null != this.flipRotProp && this.flipHolderSprite.rotation.set__(360 * this.flipRotProp.value);
                null != this.flipProp && this.flipHolderSprite.scaleX.set__(Math.cos(this.flipProp.value));
                null != this.rotProp && this.rotHolderSprite.rotation.set__(360 * this.rotProp.value)
            }
        },
        __class__: Nh
    });
    var Qf =
        function(a, b) { this.min = a;
            this.max = b;
            this.value = 2 * Math.random() * Math.PI };
    g["stolo.ui.fx.WaveProp"] = Qf;
    Qf.__name__ = ["stolo", "ui", "fx", "WaveProp"];
    Qf.prototype = { randomizeSpeed: function() { this.speed = this.min + Math.random() * (this.min - this.max) }, update: function(a) { this.value += a * this.speed }, __class__: Qf };
    var eh = function(a, b) {
        this.confettiColors = [16711680, 16746496, 16776960, 8978176, 65280, 65416, 65535, 35071, 255, 8913151, 16711935];
        this.startSpreadY = 1;
        this.shortLived = !1;
        this.maxCount = 50;
        this.spreadX = 30;
        this.centerX =
            0;
        this.autoStart = !0;
        this.speed = new ca(0.3);
        i.call(this);
        this.width = a;
        this.height = b
    };
    g["stolo.ui.fx.Confettis"] = eh;
    eh.__name__ = ["stolo", "ui", "fx", "Confettis"];
    eh.__super__ = i;
    eh.prototype = k(i.prototype, {
        get_name: function() { return "Confettis_112" },
        dispose: function() { i.prototype.dispose.call(this) },
        onAdded: function() { 0 == this.centerX && (this.centerX = 0.5 * this.width);
            this.autoStart && this.start() },
        onRemoved: function() {},
        onUpdate: function(a) {
            this.speed.update(a);
            if (!(0 == this.speed._value || null == this.items))
                for (var b =
                        0, c = this.items.length; b < c;) this.items[b++].update(a * this.speed._value)
        },
        start: function() { this._container = new r;
            this.owner.addChild((new p).add(this._container));
            this._container.disablePointer();
            this.items = []; for (var a = 0, b = this.maxCount; a < b;) { var c = a++,
                    d = this.getConfetti();
                this.setupConfetti(d, c);
                this.addConfetti(d, c) } },
        getConfetti: function() { return new Nh },
        setupConfetti: function(a, b) {
            a.startX = this.centerX + (b / (this.maxCount - 1) - 0.5) * this.width;
            a.color = this.confettiColors[Math.floor(0.999 * b / (this.maxCount -
                1) * this.confettiColors.length)];
            a.spreadX = this.spreadX;
            a.maxY = this.height;
            a.shortLived = this.shortLived;
            return new Nh
        },
        addConfetti: function(a) { this._container.owner.addChild((new p).add(a));
            a.yProp.value = 2 * Math.random() * Math.PI * this.startSpreadY;
            this.items.push(a); return a },
        __class__: eh
    });
    var xe = function() {};
    g["stolo.utils.ArrayUtils"] = xe;
    xe.__name__ = ["stolo", "utils", "ArrayUtils"];
    xe.shuffle = function(a) { for (var b = a.length, c, d; 0 < b;) d = Math.floor(Math.random() * b), b--, c = a[b], a[b] = a[d], a[d] = c; return a };
    xe.clone = function(a) { for (var b = [], c = 0; c < a.length;) { var d = a[c];++c;
            b.push(d) } return b };
    xe.getRandomElement = function(a) { return a[Math.floor(Math.random() * a.length)] };
    var mn = function() {};
    g["stolo.utils.AssetUtils"] = mn;
    mn.__name__ = ["stolo", "utils", "AssetUtils"];
    mn.getFileInfo = function(a, b) {
        var c, d = gb.getFileExtension(a),
            e;
        null == d && null != b ? (a.lastIndexOf("/") == a.length - 1 && (e = a.lastIndexOf("/"), a = H.substr(a, 0, e)), e = a, c = a.substring(a.lastIndexOf("/") + 1, a.length), b = ma.replace(b, "{{name}}", c), -1 < c.indexOf(".") &&
            a.substring(0, a.lastIndexOf(".")), e.lastIndexOf("/") < e.length - 1 && (e += "/"), a = b, d = gb.getFileExtension(a)) : (e = a.substring(0, a.lastIndexOf("/") + 1), c = -1 < a.indexOf("/") ? a.substring(a.lastIndexOf("/") + 1, a.lastIndexOf(".")) : a.substring(0, a.lastIndexOf(".")));
        return { name: c, path: e, url: a, ext: d }
    };
    var Oc = function() {};
    g["stolo.utils.BrowserUtils"] = Oc;
    Oc.__name__ = ["stolo", "utils", "BrowserUtils"];
    Oc.getCurrentURL = function(a) {
        null == a && (a = !1);
        var b = x._platform.getExternal().call("window.location.href.toString");
        a &&
            null != b && (b = b.split("?")[0]);
        return b
    };
    Oc.getUrlParams = function() { if (null != Oc.urlParams) return Oc.urlParams; var a = Oc.getCurrentURL().split("?"); if (1 == a.length) return {}; for (var b = {}, a = a[1].split("&"), c = 0; c < a.length;) { var d = a[c];++c;
            d = d.split("=");
            2 == d.length && (d[1] = ma.replace(d[1], "#", ""), z.setProperty(b, d[0], d[1])) } Oc.urlParams = b; return Oc.urlParams };
    Oc.getURL = function(a, b) { null == b && (b = "_blank");
        window.open(a, b) };
    Oc.execute = function(a) { return eval(a) };
    var o = function() {};
    g["stolo.utils.DeviceUtils"] =
        o;
    o.__name__ = ["stolo", "utils", "DeviceUtils"];
    o.init = function(a, b) {
        null == o.UA && (0 < a && 0 < b ? o.setSize(a, b) : o.setSize(x._platform.getStage().get_width(), x._platform.getStage().get_height()), o.touch = x._platform.getTouch().get_supported(), o.mobile = o.touch, o.power = 30, o.UA = o.getUA(), null != o.UA && (o.ua = o.UA.toLowerCase(), o.getScreenSize(), o.iphone = o.phone = -1 < o.ua.indexOf("iphone") || -1 < o.ua.indexOf("ipod"), o.ipad = o.tablet = -1 < o.ua.indexOf("ipad"), o.ios = o.iphone || o.ipad, o.ie = -1 < o.ua.indexOf("msie") || -1 <= o.ua.indexOf("trident"),
            o.android = o.touch && (-1 < o.ua.indexOf("linux") || -1 < o.ua.indexOf("android")), o.ios ? o.setupIos() : o.android && o.setupAndroid()), o.slow = 0 >= o.power)
    };
    o.setupIos = function() {
        o.mobile = !0;
        var a = y.parseInt(x._platform.getExternal().call("window.devicePixelRatio.toString"));
        0 < a && (o.ipadVersion = 1 + a);
        var b = eval("window"),
            c = b.ondevicemotion;
        b.ondevicemotion = function(a) { null == a.acceleration && (o.ipadVersion -= 1);
            b.ondevicemotion = c };
        if (-1 < o.ua.indexOf("ipod") || 3 > o.ipadVersion) o.power = 0, o.lowPerformance = !0, o.lowMemory = !0
    };
    o.setupAndroid = function() { o.mobile = !0; if (-1 < o.ua.indexOf("mobile")) { if (o.phone = !0, o.tablet = o.detectTablet(), o.lowPerformance = o.detectLowPerformance(), o.lowMemory = o.detectLowMemory(), o.lowPerformance || o.lowMemory) o.power = 0 } else o.tablet = !0, -1 < o.ua.indexOf("sgh-t") && (o.tablet = !1, o.phone = !0) };
    o.detectTablet = function() { return -1 < o.ua.indexOf("nexus 5") || -1 < o.ua.indexOf("tablet") || 700 < o.landscapeScreenWidth ? !0 : !1 };
    o.detectLowPerformance = function() {
        for (var a = 0, b = o.lowPerformanceDevices; a < b.length;) {
            var c =
                b[a];
            ++a;
            for (var d = 0; d < c.length;) { var e = c[d];++d; if (-1 < o.UA.indexOf(e)) return !0 }
        }
        return !1
    };
    o.detectLowMemory = function() { for (var a = 0, b = o.lowMemoryDevices; a < b.length;) { var c = b[a];++a; for (var d = 0; d < c.length;) { var e = c[d];++d; if (-1 < o.UA.indexOf(e)) return !0 } } return !1 };
    o.getScreenSize = function() {
        o.screenWidth = y.parseFloat(x._platform.getExternal().call("window.screen.width.toString"));
        o.screenHeight = y.parseFloat(x._platform.getExternal().call("window.screen.height.toString"));
        o.screenWidth > o.screenHeight ?
            (o.landscapeScreenWidth = o.screenWidth, o.landscapeScreenHeight = o.screenHeight) : (o.landscapeScreenWidth = o.screenHeight, o.landscapeScreenHeight = o.screenWidth)
    };
    o.setSize = function(a, b) { o.gameWidth = Math.round(a);
        o.gameHeight = Math.round(b);
        o.stageWidth = a * o.scale;
        o.stageHeight = b * o.scale };
    o.setScale = function(a) { a != o.scale && (o.scale = a, o.stageWidth = o.gameWidth * a, o.stageHeight = o.gameHeight * a, o.onScaleChange.emit()) };
    o.getUA = function() { if (null != o.UA) return o.UA;
        o.UA = eval("navigator.userAgent"); return o.UA };
    var A =
        function() {};
    g["stolo.utils.DisplayUtils"] = A;
    A.__name__ = ["stolo", "utils", "DisplayUtils"];
    A.__properties__ = { get_sharedAssets: "get_sharedAssets" };
    A.setSharedAssets = function(a) { A._sharedPack = a;
        A._sharedAssets = E.getPack(a); return A._sharedAssets };
    A.get_sharedAssets = function() { return A._sharedAssets };
    A.createButton = function(a, b, c, d, e) { null == d && (d = "buttons");
        null == e && (e = A._sharedAssets); return new Mh(e, b, a, c, d) };
    A.createImage = function(a, b) { null == b && (b = A._sharedAssets); return new ya(A.getTexture(a, b)) };
    A.createText = function(a, b, c, d) { a = C.getLocalizedTextSprite(a, b, 0, 0, d);
        A.addSprite(a, c); return a };
    A.createTextSprite = function(a, b, c) { b = C.getTextSprite(b, null, 0, 0);
        b.set_text(a);
        A.addSprite(b, c); return b };
    A.getTexture = function(a, b, c) {
        null == c && (c = !0);
        var d = null;
        null == b && (b = A._sharedAssets);
        if (null == b) throw "Asset pack must be provided";
        d = b.getTexture(a, null == A._sharedAssets);
        null == d && null != A._spritesheets.h.__keys__[b.__id__] && (d = A._spritesheets.h[b.__id__].getTexture(a, null, !1));
        null == d && null != A._sharedAssets &&
            (null != A._spritesheets.h.__keys__[A._sharedAssets.__id__] && (d = A._spritesheets.h[A._sharedAssets.__id__].getTexture(a, null, !1)), null == d && (d = A._sharedAssets.getTexture(a, c)));
        return d
    };
    A.getTextureFromPack = function(a, b, c) { null == c && (c = !0); return A.getTexture(a, E.getPack(b, c), c) };
    A.addSprite = function(a, b) { null != a.owner ? b.addChild(a.owner) : b.addChild((new p).add(a)); return a };
    A.createSoundButton = function(a) { null == a && (a = A._sharedAssets); return new Fl(a) };
    A.gap = function(a, b, c, d, e) {
        null == e && (e = {});
        var c =
            a - c,
            f = b - d,
            d = Math.sqrt(c * c + f * f),
            c = db.degrees(Math.atan2(f, c)) + 180;
        I.__instanceof(e, r) ? (f = e, f.setXY(a, b), f.scaleX.set__(d / f.getNaturalWidth()), f.rotation.set__(c)) : (e.x = a, e.y = b, e.width = d, e.rotation = c);
        return e
    };
    var K = function() {};
    g["stolo.utils.DynamicUtils"] = K;
    K.__name__ = ["stolo", "utils", "DynamicUtils"];
    K.is = function(a, b) { var c = ia["typeof"](a); return ia.enumEq(c, b) };
    K.configure = function(a, b, c) {
        null == c && (c = !0);
        for (var d = 0, e = z.fields(b); d < e.length;) {
            var f = e[d];
            ++d;
            var h = z.field(b, f);
            "string" == typeof h &&
                ("false" == h && (h = !1), "true" == h && (h = !0));
            (c || !(null == h || "" == h)) && z.setProperty(a, f, h)
        }
    };
    K.applyMods = function(a, b) { for (var c = 0, d = z.fields(b); c < d.length;) { var e = d[c];++c; var f = z.field(b, e);
            null == f || "" == f || z.setProperty(a, e, K.mod(z.getProperty(a, e), f)) } };
    K.mod = function(a, b) {
        if ("string" == typeof b) { var c = b.split("="),
                d; if (2 <= c.length) switch (d = y.parseFloat(c[c.length - 1]), c[0]) {
                case "+":
                    a += d; break;
                case "-":
                    a -= d; break;
                case "/":
                    a /= d; break;
                case "*":
                    a *= d; break;
                default:
                    a = d } else a = y.parseFloat(b) } else return b;
        return a
    };
    K.merge = function(a, b, c) { null == c && (c = !1); if (K.is(b, P.TNull) || K.is(b, P.TInt) || K.is(b, P.TFloat) || K.is(b, P.TBool) || K.is(b, P.TClass(String)) || K.is(b, P.TFunction)) return b; if (K.is(b, P.TClass(Array))) return c ? K.clone(b) : b; if (K.is(b, P.TObject)) { if (K.is(a, P.TObject)) { var d;
                d = c ? K.clone(a) : a; for (var e = 0, f = z.fields(b); e < f.length;) { var h = f[e];++e; var g = z.field(a, h),
                        i = z.field(b, h);
                    z.setField(d, h, K.merge(g, i, c)) } return d } return c ? K.clone(b) : b } throw "Type not supported in the merge :" + y.string(b); };
    K.clone =
        function(a) { if (K.is(a, P.TNull) || K.is(a, P.TInt) || K.is(a, P.TFloat) || K.is(a, P.TBool) || K.is(a, P.TClass(String)) || K.is(a, P.TFunction)) return a; if (K.is(a, P.TClass(Array))) { for (var b = [], c = 0, d = a.length; c < d;) { var e = c++;
                    b[e] = K.clone(a[e]) } return b } if (K.is(a, P.TObject)) { b = {};
                c = 0; for (d = z.fields(a); c < d.length;) e = d[c], ++c, z.setField(b, e, K.clone(z.field(a, e))); return b } return null };
    var db = function() {};
    g["stolo.utils.MathUtils"] = db;
    db.__name__ = ["stolo", "utils", "MathUtils"];
    db.degrees = function(a) { return a * (180 / Math.PI) };
    db.radians = function(a) { return a * Math.PI / 180 };
    db.lerp = function(a, b, c) { return 0 > c ? a : 1 < c ? b : a * (1 - c) + b * c };
    db.clamp = function(a, b, c) { return a < b ? b : a > c ? c : a };
    var pa = function() {};
    g["stolo.utils.SequenceUtils"] = pa;
    pa.__name__ = ["stolo", "utils", "SequenceUtils"];
    pa.getMovementSequence = function(a, b, c, d, e) {
        null == e && (e = 0);
        null == d && (d = !1);
        null == c && (c = !0);
        var f = new pc;
        pa.lastDest = null;
        pa.appendMovementActions(a, f, b);
        d && (a = a.reverse(), a.shift(), pa.appendMovementActions(a, f, b), pa.appendMovementActions([{ x: 0, y: 0 }], f, b));
        (c || d) && pa.appendMovementActions([{ x: 0, y: 0 }], f, b);
        0 < e && f.add(new ub(e));
        return f
    };
    pa.appendMovementActions = function(a, b, c) { null == b && (b = new pc); for (var d = 0; d < a.length;) { var e = a[d];++d;
            Object.prototype.hasOwnProperty.call(e, "delay") && b.add(new ub(e.delay)); var f = Object.prototype.hasOwnProperty.call(e, "x"),
                h = Object.prototype.hasOwnProperty.call(e, "y"),
                g; if (f || h) g = new X, f && (g.x = e.x + c.offsetX), h && (g.y = e.y + c.offsetY), b.add(pa.getMovementAction(e, f ? c.x : null, h ? c.y : null, g, pa.lastDest, c)), pa.lastDest = g } return b };
    pa.getMovementAction = function(a, b, c, d, e, f) {
        var h = pa.DefaultMoveSpeed,
            g = pa.DefaultMovePPS,
            i = pa.DefaultMoveEase,
            j = pa.DefaultMoveTime,
            k = !1;
        0 < a.time ? j = a.time : k = !0;
        0 < a.pps && (g = a.pps);
        0 < a.speed && (h = a.speed);
        k && (j = 0, null != e ? (null != b && (j += Math.abs(e.x - d.x)), null != c && (j += Math.abs(e.y - d.y))) : (null != b && (j += Math.abs(b._value - d.x)), null != c && (j += Math.abs(c._value - d.y))), j = j / g - 0.1 * (j / g) * h, 0 >= j && (j = pa.DefaultMoveTime));
        null != f && null != f.ease && (i = f.ease);
        e = new ag;
        null != b && e.add(new Sd(b, d.x, j, i));
        null != c && e.add(new Sd(c,
            d.y, j, i));
        return e
    };
    pa.__super__ = i;
    pa.prototype = k(i.prototype, { get_name: function() { return "SequenceUtils_96" }, __class__: pa });
    var Nc = function() {};
    g["stolo.web.BrowserTools"] = Nc;
    Nc.__name__ = ["stolo", "web", "BrowserTools"];
    Nc.init = function(a, b) {
        null == a && (a = !1);
        if (!Nc.hasInit) {
            Nc.hasInit = !0;
            Oc.execute("/**\n* Those utilities are added to the browser window by BrowserTools.hx\n*/\nvar stolo = stolo || { };\nwindow.stolo = stolo;\n\nstolo.version = \"v0.1\";\nstolo.loadingScripts = {};\nstolo.loadedScripts = {};\n\nstolo.url_jquery = 'http://code.jquery.com/jquery-1.11.3.min.js';\n\nstolo.getJquery = function(success)\n{\n\treturn stolo.loadScriptIf(window.jQuery==null, stolo.url_jquery, function()\n\t{\n\t\tsuccess(window.jQuery);\n\t})\n};\n\nstolo.loadScriptIf = function(condition, url, success)\n{\n\tif(condition) {\n\t\tstolo.loadScript(url, success);\n\t} else {\n\t\tsuccess();\n\t}\n};\n\nstolo.loadScript = function(url, success)\n{\n\tvar id = encodeURIComponent(url);\n\t\n\t// Already loaded\n\tif(stolo.loadedScripts[id]) success();\n\t\n\t// Already loading\n\tif(stolo.loadingScripts[id]) return;\n\t\n\tvar head = document.getElementsByTagName('head')[0];\n\tvar script = document.createElement('script');\n\tscript.src = url;\n\t\n\tstolo.loadingScripts[id] = script;\n\n\t// Attach handlers for all browsers\n\tscript.onload = script.onreadystatechange = function()\n\t{\n\t\tif (stolo.loadingScripts[id] && (!this.readyState || this.readyState == 'loaded' || this.readyState == 'complete'))\n\t\t{\n\t\t\tstolo.loadingScripts[id] = null;\n\t\t\tdelete stolo.loadedScripts[id];\n\n\t\t\t// callback function provided as param\n\t\t\tsuccess();\n\t\t\t\n\t\t\tscript.onload = script.onreadystatechange = null;\n\t\t\thead.removeChild(script);\n\t\t};\n\t};\n\n\thead.appendChild(script);\n};");
            var c = x;
            Nc.canvas = c._platform._canvas;
            Nc.container = c._platform._container;
            Nc.stolo = z.field(window, "stolo");
            a ? Nc.LoadJquery(b) : null != b && b()
        }
    };
    Nc.focusOnCanvas = function() { Nc.init();
        Nc.canvas.focus() };
    Nc.LoadJquery = function(a) { Nc.stolo.getJquery(function(b) { Nc.jQuery = b;
            null != a && a() }) };
    var w = function() {};
    g["stolo.web.DeltaDNA"] = w;
    w.__name__ = ["stolo", "web", "DeltaDNA"];
    w.init = function(a, b, c, d, e) {
        if (null == a) throw "Missing gameURL";
        a = ma.replace(a, "http://", "");
        a = ma.replace(a, "https://", "");
        w.gameURL = a;
        w.collectURL =
            d;
        w.engageURL = e;
        w.setLiveStatus();
        w.getPlatform();
        w.getDeviceType();
        w.key = w.isLive ? c : b;
        a = va.get("UserId", null);
        w.isValidUserID(a) ? w.setUserID(a) : w.getNewUserID()
    };
    w.setLiveStatus = function() { if (w.allowLiveKey) { w.isLive = !0; var a = w.getCurrentURL(); if (null != a && null != w.staging)
                for (var a = a.toLowerCase(), b = 0, c = w.staging; b < c.length;) { var d = c[b];++b; if (-1 < a.indexOf(d)) { w.isLive = !1; break } } w.isLive && w.debug && null } };
    w.setReady = function() {
        if (!w.isReady && (w.isReady = !0, w.onReady.emit(), null != w._trackRequestsQueue)) {
            for (var a =
                    0, b = w._trackRequestsQueue; a < b.length;) { var c = b[a];++a;
                w.track(c.eventName, c.eventParams) } w._trackRequestsQueue = null
        }
    };
    w.setUserID = function(a) { w.userID = a;
        va.set(w.userIDStorageField, a);
        null == w.sessionID ? w.createSession() : w.setReady() };
    w.getNewUserID = function() { w.isNewPlayer = !0; var a = new gh();
        a.onData = function(a) { var c = JSON.parse(a);
            w.isValidUserID(c.userID) ? w.setUserID(c.userID) : (w.logError("Invalid or missing userID:"), w.logError(a)) };
        a.request() };
    w.isValidUserID = function(a) {
        return null ==
            a || "" == a || "NULL" == a.toUpperCase() ? !1 : !0
    };
    w.createSession = function() { var a = new gh(w.collectURL + "/uuid");
        a.onData = function(a) { var c = JSON.parse(a);
            w.isValidUserID(c.userID) ? (w.sessionID = c.userID, w.setReady()) : (w.logError("Invalid or missing uuid for sessionID:"), w.logError(a)) };
        a.request() };
    w.track = function(a, b) { w.isReady ? w.collectRequest(a, b) : (null == w._trackRequestsQueue && (w._trackRequestsQueue = []), w._trackRequestsQueue.push({ eventName: a, eventParams: b })) };
    w.collectRequest = function(a, b, c, d, e) {
        null ==
            e && (e = w.collectURL + "/" + w.key);
        e = new gh(e);
        b || (b = {});
        b.sdkVersion = w.sdkVersion;
        b.platform = w.getPlatform();
        w.useTimezoneOffset && (b.timezoneOffset = w.getTimeZoneOffset());
        null != w.clientVersion && (b.clientVersion = w.clientVersion);
        a = { eventName: a, userID: w.userID, sessionID: w.sessionID, eventParams: b };
        e.addHeader("Content-Type", "application/json");
        e.setPostData(JSON.stringify(a));
        e.onData = function(a) { w.debug && null;
            a = null != a && "" != a && " " != a ? JSON.parse(a) : null;
            null != c && c(a) };
        e.onStatus = function(a) {
            204 != a && w.logError("status: " +
                a)
        };
        e.onError = function(a) { w.logError(a);
            null != d && d(a) };
        w.debug && null;
        e.request(!0);
        return e
    };
    w.getPlatform = function() {
        if (null != w.platform) return w.platform;
        w.platform = "PIRACY_UNKNOWN";
        var a = w.getCurrentURL(),
            b = o.UA.toLowerCase(),
            c = w.getReferrer();
        if (null == a) return w.platform;
        a = a.toLowerCase();
        null != c && (c = c.toLowerCase());
        if (!(-1 < a.indexOf(".nick") || -1 < a.indexOf("nick.com/games/data/"))) return w.platform;
        var d = !1,
            e = window;
        if (o.android || o.ios) {
            if (null != c && (-1 < c.indexOf("apikey") || -1 < c.indexOf("www.ludei.com"))) d = !0;
            null != e.cocoonjsCheckArgs && (d = !0);
            o.ios && -1 == b.indexOf("safari") && -1 == b.indexOf("chrome") && (d = !0)
        }
        if (d) w.platform = o.ios ? w.platforms.app.ios : w.platforms.app.android;
        else { w.platform = w.platforms.web.desktop; if (-1 < a.indexOf("m.nick") || o.mobile) w.platform = w.platforms.web.mobile; if (-1 < a.indexOf("t.nick") || o.tablet) w.platform = w.platforms.web.tablet }
        return w.platform
    };
    w.getCurrentURL = function() {
        if (null != w._currentURL) return w._currentURL;
        w._currentURL = eval("window.location.href");
        return null == w._currentURL ?
            "invalid URL" : w._currentURL
    };
    w.getReferrer = function() { if (null != w._currentReferrer) return w._currentReferrer;
        w._currentReferrer = window.document.referrer; return null == w._currentReferrer ? "invalid Referrer" : w._currentReferrer };
    w.setPlatforms = function(a) { for (var b = 0, c = z.fields(a); b < c.length;) { var d = c[b];++b; for (var e = z.field(a, d), f = 0, h = z.fields(e); f < h.length;) { var g = h[f];++f; var i = z.field(e, g),
                    j = z.field(w.platforms, d); if (null == j) throw "Invalid platform type '" + d + "'";
                j[g] = i } } };
    w.getDeviceType = function() {
        if (null !=
            w.deviceType) return w.deviceType;
        w.deviceType = o.tablet ? "TABLET" : o.phone ? "MOBILE_PHONE" : "DESKTOP";
        return w.deviceType
    };
    w.trackClientDevice = function() {
        var a = "DESKTOP";
        o.ipad && (a = "IPAD");
        o.iphone && (a = "IPHONE");
        o.android && (a = o.tablet ? "ANDROID_TABLET" : "ANDROID_PHONE");
        var b = "PC";
        o.mobile && (b = "MOBILE_PHONE");
        o.tablet && (b = "TABLET");
        var c = "UNKNOWN",
            d = "UNKNOWN",
            e = o.ua;
        if (null != e) {
            -1 < e.indexOf("webkit") && (c = "UNKNOWN_WEBKIT"); - 1 < e.indexOf("safari") && (c = "SAFARI"); - 1 < e.indexOf("chrome") && (c = "CHROME"); - 1 < e.indexOf("firefox") &&
                (c = "FIREFOX"); - 1 < e.indexOf("opera") && (c = "Opera"); - 1 < e.indexOf("tizen") && (c = "TIZEN");
            if (-1 < e.indexOf("msie") || -1 < e.indexOf("trident")) c = "IE";
            if (-1 < e.indexOf("iemobile") || -1 < e.indexOf("msiemobile")) c = "IE_MOBILE"; - 1 < e.indexOf("windows") && (d = "WINDOWS");
            if (-1 < e.indexOf("macos") || -1 < e.indexOf("macintosh") || -1 < e.indexOf("os x")) d = "OSX"; - 1 < e.indexOf("linux") && (d = "LINUX");
            o.ios && (d = "IOS");
            o.android && (d = "ANDROID");
            if (-1 < e.indexOf("kindle") || -1 < e.indexOf("silk")) d = "FIREOS"; - 1 < e.indexOf("blackberry") && (d = "BLACKBERRY")
        }
        e =
            o.UA;
        null == e && (e = "UNKNOWN");
        w.track("clientDevice", { deviceName: a, deviceType: b, browserName: c, operatingSystem: d, operatingSystemVersion: e })
    };
    w.getTimeZoneOffset = function() { var a = w.getTimeZoneOffsetSeconds(),
            a = Math.round(-1 * (a / 60)),
            b = a + ":00";
        0 > a && -10 < a && (b = ma.replace(b, "-", "-0"));
        0 < a && (b = "+" + b, 10 > a && (b = ma.replace(b, "+", "+0"))); return b };
    w.getTimeZoneOffsetSeconds = function() { return H.strDate("1970-01-01").getTime() / 1E3 / 60 };
    w.logError = function(a) { x._platform.getExternal().call("window.console.error", [a]) };
    var yb = function() {};
    g["zpp_nape.ZPP_ID"] = yb;
    yb.__name__ = ["zpp_nape", "ZPP_ID"];
    yb.Interactor = function() { return yb._Interactor++ };
    yb.CbType = function() { return yb._CbType++ };
    yb.CbSet = function() { return yb._CbSet++ };
    yb.Listener = function() { return yb._Listener++ };
    var Ld = function() {
        this.body = this.constraint = null;
        this.pre_swapped = !1;
        this.int1 = this.int2 = this.set = this.wrap_arbiters = this.pre_arbiter = null;
        this.length = 0;
        this.listener = this.next = this.prev = null;
        this.event = 0;
        this.outer_body = this.outer_con = this.outer_int =
            null;
        this.length = 0
    };
    g["zpp_nape.callbacks.ZPP_Callback"] = Ld;
    Ld.__name__ = ["zpp_nape", "callbacks", "ZPP_Callback"];
    Ld.prototype = {
        wrapper_body: function() { null == this.outer_body && (this.outer_body = new dk, this.outer_body.zpp_inner = this); return this.outer_body },
        wrapper_con: function() { null == this.outer_con && (this.outer_con = new fk, this.outer_con.zpp_inner = this); return this.outer_con },
        wrapper_int: function() {
            null == this.outer_int && (this.outer_int = new gk, this.outer_int.zpp_inner = this);
            null == this.wrap_arbiters ? this.wrap_arbiters =
                Ee.get(this.set.arbiters, !0) : this.wrap_arbiters.zpp_inner.inner = this.set.arbiters;
            this.wrap_arbiters.zpp_inner.zip_length = !0;
            this.wrap_arbiters.zpp_inner.at_ite = null;
            return this.outer_int
        },
        push: function(a) { null != this.prev ? this.prev.next = a : this.next = a;
            a.prev = this.prev;
            a.next = null;
            this.prev = a;
            this.length++ },
        pop: function() { var a = this.next;
            this.next = a.next;
            null == this.next ? this.prev = null : this.next.prev = null;
            this.length--; return a },
        empty: function() { return null == this.next },
        __class__: Ld
    };
    var Ca = function() {
        this.interactors =
            this.constraints = null;
        this.zip_conlisteners = !1;
        this.conlisteners = null;
        this.zip_bodylisteners = !1;
        this.bodylisteners = null;
        this.zip_listeners = !1;
        this.manager = this.cbpairs = this.listeners = null;
        this.id = 0;
        this.next = null;
        this.count = 0;
        this.cbTypes = null;
        this.cbTypes = new zd;
        this.listeners = new Cg;
        this.zip_listeners = !0;
        this.bodylisteners = new Ll;
        this.zip_bodylisteners = !0;
        this.conlisteners = new Ml;
        this.zip_conlisteners = !0;
        this.constraints = new hf;
        this.interactors = new jf;
        this.id = yb.CbSet();
        this.cbpairs = new nn
    };
    g["zpp_nape.callbacks.ZPP_CbSet"] =
        Ca;
    Ca.__name__ = ["zpp_nape", "callbacks", "ZPP_CbSet"];
    Ca.setlt = function(a, b) { for (var c = a.cbTypes.head, d = b.cbTypes.head; null != c && null != d;) { var e = c.elt,
                f = d.elt; if (e.id < f.id) return !0; if (f.id < e.id) return !1;
            c = c.next;
            d = d.next } return null != d && null == c };
    Ca.get = function(a) { var b;
        null == Ca.zpp_pool ? b = new Ca : (b = Ca.zpp_pool, Ca.zpp_pool = b.next, b.next = null);
        null; for (var c = null, a = a.head; null != a;) { var d = a.elt,
                c = b.cbTypes.insert(c, d);
            d.cbsets.add(b);
            a = a.next } return b };
    Ca.single_intersection = function(a, b, c) {
        return a.manager.pair(a,
            b).single_intersection(c)
    };
    Ca.find_all = function(a, b, c, d) { a.manager.pair(a, b).forall(c, d) };
    Ca.prototype = {
        invalidate_pairs: function() { for (var a = this.cbpairs.head; null != a;) a.elt.zip_listeners = !0, a = a.next },
        realvalidate_listeners: function() {
            this.listeners.clear();
            for (var a = this.cbTypes.head; null != a;) {
                for (var b = null, c = this.listeners.head, d = a.elt.listeners.head; null != d;) {
                    var e = d.elt;
                    null != c && c.elt == e ? (d = d.next, b = c, c = c.next) : null == c || Pc.setlt(e, c.elt) ? (e.space == this.manager.space && (b = this.listeners.inlined_insert(b,
                        e)), d = d.next) : (b = c, c = c.next)
                }
                a = a.next
            }
        },
        realvalidate_bodylisteners: function() { this.bodylisteners.clear(); for (var a = this.cbTypes.head; null != a;) { for (var b = null, c = this.bodylisteners.head, d = a.elt.bodylisteners.head; null != d;) { var e = d.elt;
                    null != c && c.elt == e ? (d = d.next, b = c, c = c.next) : null == c || Pc.setlt(e, c.elt) ? (!e.options.excluded(this.cbTypes) && e.space == this.manager.space && (b = this.bodylisteners.inlined_insert(b, e)), d = d.next) : (b = c, c = c.next) } a = a.next } },
        realvalidate_conlisteners: function() {
            this.conlisteners.clear();
            for (var a = this.cbTypes.head; null != a;) { for (var b = null, c = this.conlisteners.head, d = a.elt.conlisteners.head; null != d;) { var e = d.elt;
                    null != c && c.elt == e ? (d = d.next, b = c, c = c.next) : null == c || Pc.setlt(e, c.elt) ? (!e.options.excluded(this.cbTypes) && e.space == this.manager.space && (b = this.conlisteners.inlined_insert(b, e)), d = d.next) : (b = c, c = c.next) } a = a.next }
        },
        validate: function() {
            this.zip_listeners && (this.zip_listeners = !1, this.realvalidate_listeners());
            this.zip_bodylisteners && (this.zip_bodylisteners = !1, this.realvalidate_bodylisteners());
            this.zip_conlisteners && (this.zip_conlisteners = !1, this.realvalidate_conlisteners())
        },
        free: function() { this.listeners.clear();
            this.zip_listeners = !0;
            this.bodylisteners.clear();
            this.zip_bodylisteners = !0;
            this.conlisteners.clear(); for (this.zip_conlisteners = !0; null != this.cbTypes.head;) this.cbTypes.pop_unsafe().cbsets.remove(this) },
        __class__: Ca
    };
    var jc = function() { this.listeners = null;
        this.zip_listeners = !1;
        this.a = this.b = this.next = null;
        this.listeners = new Cg };
    g["zpp_nape.callbacks.ZPP_CbSetPair"] = jc;
    jc.__name__ = ["zpp_nape", "callbacks", "ZPP_CbSetPair"];
    jc.get = function(a, b) { var c;
        null == jc.zpp_pool ? c = new jc : (c = jc.zpp_pool, jc.zpp_pool = c.next, c.next = null);
        c.zip_listeners = !0;
        Ca.setlt(a, b) ? (c.a = a, c.b = b) : (c.a = b, c.b = a); return c };
    jc.setlt = function(a, b) { return Ca.setlt(a.a, b.a) || a.a == b.a && Ca.setlt(a.b, b.b) };
    jc.prototype = {
        __validate: function() {
            this.listeners.clear();
            for (var a = this.a.listeners.head, b = this.b.listeners.head; null != a && null != b;) {
                var c = a.elt,
                    d = b.elt;
                c == d ? ((c.options1.compatible(this.a.cbTypes) && c.options2.compatible(this.b.cbTypes) ||
                    c.options2.compatible(this.a.cbTypes) && c.options1.compatible(this.b.cbTypes)) && this.listeners.add(c), a = a.next, b = b.next) : c.precedence > d.precedence || c.precedence == d.precedence && c.id > d.id ? a = a.next : b = b.next
            }
        },
        empty_intersection: function() { return null == this.listeners.head },
        single_intersection: function(a) { var b = this.listeners.head; return null != b && b.elt == a && null == b.next },
        forall: function(a, b) { for (var c = this.listeners.head; null != c;) { var d = c.elt;
                d.event == a && b(d);
                c = c.next } },
        __class__: jc
    };
    var Cg = function() {
        this.length =
            0;
        this.modified = this.pushmod = !1;
        this.head = null
    };
    g["zpp_nape.util.ZNPList_ZPP_InteractionListener"] = Cg;
    Cg.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_InteractionListener"];
    Cg.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == jd.zpp_pool ? b = new jd : (b = jd.zpp_pool, jd.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        inlined_insert: function(a, b) {
            var c;
            null == jd.zpp_pool ? c = new jd : (c = jd.zpp_pool, jd.zpp_pool =
                c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++;
            return c
        },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = jd.zpp_pool;
            jd.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = jd.zpp_pool;
            jd.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        inlined_clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        __class__: Cg
    };
    var Ll = function() {
        this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null
    };
    g["zpp_nape.util.ZNPList_ZPP_BodyListener"] = Ll;
    Ll.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_BodyListener"];
    Ll.prototype = {
        inlined_insert: function(a, b) { var c;
            null == ne.zpp_pool ? c = new ne : (c = ne.zpp_pool, ne.zpp_pool = c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++; return c },
        inlined_pop: function() {
            var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = ne.zpp_pool;
            ne.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length--
        },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = ne.zpp_pool;
            ne.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        clear: function() {
            for (; null !=
                this.head;) this.inlined_pop();
            this.pushmod = !0
        },
        __class__: Ll
    };
    var Ml = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_ConstraintListener"] = Ml;
    Ml.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_ConstraintListener"];
    Ml.prototype = {
        inlined_insert: function(a, b) {
            var c;
            null == oe.zpp_pool ? c = new oe : (c = oe.zpp_pool, oe.zpp_pool = c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++;
            return c
        },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = oe.zpp_pool;
            oe.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next =
                c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = oe.zpp_pool;
            oe.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        __class__: Ml
    };
    var hf = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_Constraint"] = hf;
    hf.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Constraint"];
    hf.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) {
            var b;
            null == pe.zpp_pool ?
                b = new pe : (b = pe.zpp_pool, pe.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = pe.zpp_pool;
            pe.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        erase: function(a) { return this.inlined_erase(a) },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = pe.zpp_pool;
            pe.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        clear: function() {
            for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0
        },
        iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b },
        __class__: hf
    };
    var jf = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_Interactor"] = jf;
    jf.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Interactor"];
    jf.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) {
            var b;
            null == qe.zpp_pool ? b = new qe : (b = qe.zpp_pool, qe.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = qe.zpp_pool;
            qe.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) {
            for (var b = null, c = this.head, d = !1; null != c;) {
                if (c.elt == a) {
                    this.inlined_erase(b);
                    d = !0;
                    break
                }
                b = c;
                c = c.next
            }
            return d
        },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = qe.zpp_pool;
            qe.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        inlined_clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        iterator_at: function(a) {
            for (var b = this.head; 0 <
                a-- && null != b;) b = b.next;
            return b
        },
        __class__: jf
    };
    var Dg = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_CbSet"] = Dg;
    Dg.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_CbSet"];
    Dg.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == Md.zpp_pool ? b = new Md : (b = Md.zpp_pool, Md.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() {
            var a =
                this.head;
            this.head = a.next;
            a.elt = null;
            a.next = Md.zpp_pool;
            Md.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length--
        },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.head,
                this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = Md.zpp_pool;
            Md.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        __class__: Dg
    };
    var Hc = function() { this.cbsets = this.listeners = this.bodylisteners = this.conlisteners = null;
        this.id = 0;
        this.outer = null;
        this.id = yb.CbType();
        this.listeners = new Cg;
        this.bodylisteners = new Ll;
        this.conlisteners = new Ml;
        this.constraints = new hf;
        this.interactors = new jf;
        this.cbsets = new Dg };
    g["zpp_nape.callbacks.ZPP_CbType"] = Hc;
    Hc.__name__ = ["zpp_nape", "callbacks", "ZPP_CbType"];
    Hc.prototype = {
        addint: function(a) { for (var b = null, c = this.listeners.head; null != c;) { var d = c.elt; if (a.precedence > d.precedence || a.precedence == d.precedence && a.id > d.id) break;
                b = c;
                c = c.next } this.listeners.inlined_insert(b, a);
            this.invalidateint() },
        invalidateint: function() { for (var a = this.cbsets.head; null != a;) { var b = a.elt;
                b.zip_listeners = !0;
                b.invalidate_pairs();
                a = a.next } },
        addbody: function(a) {
            for (var b = null, c = this.bodylisteners.head; null !=
                c;) { var d = c.elt; if (a.precedence > d.precedence || a.precedence == d.precedence && a.id > d.id) break;
                b = c;
                c = c.next } this.bodylisteners.inlined_insert(b, a);
            this.invalidatebody()
        },
        invalidatebody: function() { for (var a = this.cbsets.head; null != a;) a.elt.zip_bodylisteners = !0, a = a.next },
        addconstraint: function(a) { for (var b = null, c = this.conlisteners.head; null != c;) { var d = c.elt; if (a.precedence > d.precedence || a.precedence == d.precedence && a.id > d.id) break;
                b = c;
                c = c.next } this.conlisteners.inlined_insert(b, a);
            this.invalidateconstraint() },
        invalidateconstraint: function() { for (var a = this.cbsets.head; null != a;) a.elt.zip_conlisteners = !0, a = a.next },
        __class__: Hc
    };
    var Pc = function() { this.body = this.constraint = this.interaction = this.space = null;
        this.id = this.type = this.event = this.precedence = 0;
        this.outer = null;
        this.id = yb.Listener() };
    g["zpp_nape.callbacks.ZPP_Listener"] = Pc;
    Pc.__name__ = ["zpp_nape", "callbacks", "ZPP_Listener"];
    Pc.setlt = function(a, b) { return a.precedence > b.precedence || a.precedence == b.precedence && a.id > b.id };
    Pc.prototype = {
        addedToSpace: function() {},
        removedFromSpace: function() {},
        __class__: Pc
    };
    var on = function() { this.outer_zn = this.options = this.handler = null };
    g["zpp_nape.callbacks.ZPP_BodyListener"] = on;
    on.__name__ = ["zpp_nape", "callbacks", "ZPP_BodyListener"];
    on.__super__ = Pc;
    on.prototype = k(Pc.prototype, {
        addedToSpace: function() { this.options.handler = m(this, this.cbtype_change); for (var a = this.options.includes.head; null != a;) a.elt.addbody(this), a = a.next },
        removedFromSpace: function() {
            for (var a = this.options.includes.head; null != a;) {
                var b = a.elt;
                b.bodylisteners.remove(this);
                b.invalidatebody();
                a = a.next
            }
            this.options.handler = null
        },
        cbtype_change: function(a, b, c) { this.removedFromSpace();
            this.options.effect_change(a, b, c);
            this.addedToSpace() },
        __class__: on
    });
    var pn = function() { this.outer_zn = this.options = this.handler = null };
    g["zpp_nape.callbacks.ZPP_ConstraintListener"] = pn;
    pn.__name__ = ["zpp_nape", "callbacks", "ZPP_ConstraintListener"];
    pn.__super__ = Pc;
    pn.prototype = k(Pc.prototype, {
        addedToSpace: function() {
            this.options.handler = m(this, this.cbtype_change);
            for (var a = this.options.includes.head; null !=
                a;) a.elt.addconstraint(this), a = a.next
        },
        removedFromSpace: function() { for (var a = this.options.includes.head; null != a;) { var b = a.elt;
                b.conlisteners.remove(this);
                b.invalidateconstraint();
                a = a.next } this.options.handler = null },
        cbtype_change: function(a, b, c) { this.removedFromSpace();
            this.options.effect_change(a, b, c);
            this.addedToSpace() },
        __class__: pn
    });
    var zd = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_CbType"] = zd;
    zd.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_CbType"];
    zd.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == Ac.zpp_pool ? b = new Ac : (b = Ac.zpp_pool, Ac.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        insert: function(a, b) { return this.inlined_insert(a, b) },
        inlined_insert: function(a, b) {
            var c;
            null == Ac.zpp_pool ? c = new Ac : (c = Ac.zpp_pool, Ac.zpp_pool = c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++;
            return c
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = Ac.zpp_pool;
            Ac.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) {
            for (var b = null, c = this.head, d = !1; null != c;) {
                if (c.elt == a) {
                    this.inlined_erase(b);
                    d = !0;
                    break
                }
                b = c;
                c = c.next
            }
            return d
        },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = Ac.zpp_pool;
            Ac.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        has: function(a) { return this.inlined_has(a) },
        inlined_has: function(a) {
            var b;
            b = !1;
            for (var c = this.head; null != c;) {
                if (c.elt == a) {
                    b = !0;
                    break
                }
                c = c.next
            }
            return b
        },
        iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b },
        __class__: zd
    };
    var Jb = function(a, b, c, d) { this.handlerp = null;
        this.allowSleepingCallbacks = this.pure = !1;
        this.options1 = this.options2 = this.handleri = null;
        this.itype = 0;
        this.outer_zni = this.outer_znp = null;
        Pc.call(this);
        this.type = d;
        this.interaction = this;
        this.event = c;
        this.options1 = a.zpp_inner;
        this.options2 = b.zpp_inner;
        this.allowSleepingCallbacks = !1 };
    g["zpp_nape.callbacks.ZPP_InteractionListener"] = Jb;
    Jb.__name__ = ["zpp_nape", "callbacks", "ZPP_InteractionListener"];
    Jb.__super__ = Pc;
    Jb.prototype = k(Pc.prototype, {
        CbSetset: function(a, b, c) {
            for (var d = Jb.UCbSet, e = Jb.VCbSet, f = Jb.WCbSet, a = a.head, h = b.head; null != a && null != h;) { var g = a.elt,
                    i = h.elt;
                g == i ? (f.inlined_add(g), a = a.next, h = h.next) : Ca.setlt(g, i) ? (d.inlined_add(g), a = a.next) : (e.inlined_add(i), h = h.next) }
            for (; null != a;) d.inlined_add(a.elt), a = a.next;
            for (; null != h;) e.inlined_add(h.elt), h = h.next;
            for (; null != d.head;) { a = d.pop_unsafe(); for (h = b.head; null != h;) c(a, h.elt), h = h.next }
            for (; null !=
                e.head;) { b = e.pop_unsafe(); for (d = f.head; null != d;) c(b, d.elt), d = d.next }
            for (; null != f.head;) { e = f.pop_unsafe();
                c(e, e); for (b = f.head; null != b;) c(e, b.elt), b = b.next }
        },
        CbTypeset: function(a, b, c) {
            for (var d = Jb.UCbType, e = Jb.VCbType, f = Jb.WCbType, a = a.head, h = b.head; null != a && null != h;) { var g = a.elt,
                    i = h.elt;
                g == i ? (f.inlined_add(g), a = a.next, h = h.next) : g.id < i.id ? (d.inlined_add(g), a = a.next) : (e.inlined_add(i), h = h.next) }
            for (; null != a;) d.inlined_add(a.elt), a = a.next;
            for (; null != h;) e.inlined_add(h.elt), h = h.next;
            for (; null != d.head;) {
                a =
                    d.pop_unsafe();
                for (h = b.head; null != h;) c(a, h.elt), h = h.next
            }
            for (; null != e.head;) { b = e.pop_unsafe(); for (d = f.head; null != d;) c(b, d.elt), d = d.next }
            for (; null != f.head;) { e = f.pop_unsafe();
                c(e, e); for (b = f.head; null != b;) c(e, b.elt), b = b.next }
        },
        with_uniquesets: function(a) {
            var b = this,
                c;
            null == ib.zpp_pool ? c = new ib : (c = ib.zpp_pool, ib.zpp_pool = c.next, c.next = null);
            null;
            c.lt = jc.setlt;
            this.CbTypeset(this.options1.includes, this.options2.includes, function(a, d) {
                b.CbSetset(a.cbsets, d.cbsets, function(a, d) {
                    a.validate();
                    d.validate();
                    Ca.single_intersection(a, d, b) && c.try_insert(jc.get(a, d))
                })
            });
            c.clear_with(function(c) { a ? b.space.freshListenerType(c.a, c.b) : b.space.nullListenerType(c.a, c.b);
                c.a = c.b = null;
                c.listeners.clear();
                c.next = jc.zpp_pool;
                jc.zpp_pool = c });
            var d = c;
            d.data = null;
            d.lt = null;
            d.swapped = null;
            d.next = ib.zpp_pool;
            ib.zpp_pool = d
        },
        with_union: function(a) {
            for (var b = this.options1.includes.head, c = this.options2.includes.head; null != b && null != c;) { var d = b.elt,
                    e = c.elt;
                d == e ? (a(d), b = b.next, c = c.next) : d.id < e.id ? (a(d), b = b.next) : (a(e), c = c.next) }
            for (; null !=
                b;) a(b.elt), b = b.next;
            for (; null != c;) a(c.elt), c = c.next
        },
        addedToSpace: function() { var a = this,
                b = this.type == h.id_ListenerType_PRE;
            this.with_union(function(c) { c.addint(a); if (b)
                    for (c = c.interactors.head; null != c;) c.elt.wake(), c = c.next });
            this.options1.handler = m(this, this.cbtype_change1);
            this.options2.handler = m(this, this.cbtype_change2);
            this.with_uniquesets(!0) },
        removedFromSpace: function() {
            var a = this;
            this.with_uniquesets(!1);
            var b = this.type == h.id_ListenerType_PRE;
            this.with_union(function(c) {
                c.listeners.remove(a);
                c.invalidateint();
                if (b)
                    for (c = c.interactors.head; null != c;) c.elt.wake(), c = c.next
            });
            this.options1.handler = null;
            this.options2.handler = null
        },
        cbtype_change1: function(a, b, c) { this.cbtype_change(this.options1, a, b, c) },
        cbtype_change2: function(a, b, c) { this.cbtype_change(this.options2, a, b, c) },
        cbtype_change: function(a, b, c, d) { this.removedFromSpace();
            a.effect_change(b, c, d);
            this.addedToSpace();
            null },
        __class__: Jb
    });
    var Ze = function() {
        this.outer = this.handler = this.includes = this.excludes = this.wrap_includes = this.wrap_excludes =
            null;
        this.includes = new zd;
        this.excludes = new zd
    };
    g["zpp_nape.callbacks.ZPP_OptionType"] = Ze;
    Ze.__name__ = ["zpp_nape", "callbacks", "ZPP_OptionType"];
    Ze.argument = function(a) { return null == a ? new mg : I.__instanceof(a, mg) ? a : (new mg).including(a) };
    Ze.prototype = {
        setup_includes: function() { this.wrap_includes = ee.get(this.includes, !0) },
        setup_excludes: function() { this.wrap_excludes = ee.get(this.excludes, !0) },
        excluded: function(a) { return this.nonemptyintersection(a, this.excludes) },
        compatible: function(a) {
            return this.nonemptyintersection(a,
                this.includes) && !this.nonemptyintersection(a, this.excludes)
        },
        nonemptyintersection: function(a, b) { for (var c = !1, d = a.head, e = b.head; null != e && null != d;) { var f = e.elt,
                    h = d.elt; if (f == h) { c = !0; break } else f.id < h.id ? e = e.next : d = d.next } return c },
        effect_change: function(a, b, c) {
            if (b)
                if (c) { b = null; for (c = this.includes.head; null != c && !(a.id < c.elt.id);) { b = c;
                        c = c.next } this.includes.inlined_insert(b, a) } else this.includes.remove(a);
            else if (c) {
                b = null;
                for (c = this.excludes.head; null != c && !(a.id < c.elt.id);) { b = c;
                    c = c.next } this.excludes.inlined_insert(b,
                    a)
            } else this.excludes.remove(a)
        },
        append_type: function(a, b) { a == this.includes ? this.includes.has(b) || (this.excludes.has(b) ? null != this.handler ? this.handler(b, !1, !1) : this.effect_change(b, !1, !1) : null != this.handler ? this.handler(b, !0, !0) : this.effect_change(b, !0, !0)) : this.excludes.has(b) || (this.includes.has(b) ? null != this.handler ? this.handler(b, !0, !1) : this.effect_change(b, !0, !1) : null != this.handler ? this.handler(b, !1, !0) : this.effect_change(b, !1, !0)) },
        append: function(a, b) {
            if (I.__instanceof(b, Xe)) this.append_type(a,
                b.zpp_inner);
            else if (I.__instanceof(b, ek)) { var c;
                b.zpp_inner.valmod(); for (c = Yd.get(b); c.hasNext();) { var d;
                    c.zpp_critical = !1;
                    d = c.zpp_inner.at(c.zpp_i++);
                    this.append_type(a, d.zpp_inner) } } else if (b instanceof Array && null == b.__enum__)
                for (c = 0; c < b.length;) d = b[c], ++c, this.append_type(a, d.zpp_inner)
        },
        __class__: Ze
    };
    var Vn = function() { this.cbTypes = this.cbSet = null;
        this.ignore = this.__velocity = !1;
        this.component = null;
        this.active = this.stiff = this.removeOnBreak = !1;
        this.outer = this.compound = this.space = null };
    g["zpp_nape.constraint.ZPP_Constraint"] =
        Vn;
    Vn.__name__ = ["zpp_nape", "constraint", "ZPP_Constraint"];
    Vn.prototype = {
        alloc_cbSet: function() { if (null != (this.cbSet = this.space.cbsets.get(this.cbTypes))) this.cbSet.count++, this.cbSet.constraints.add(this) },
        dealloc_cbSet: function() { if (null != this.cbSet) { this.cbSet.constraints.remove(this); if (0 == --this.cbSet.count) { this.space.cbsets.remove(this.cbSet); var a = this.cbSet;
                    a.free();
                    a.next = Ca.zpp_pool;
                    Ca.zpp_pool = a } this.cbSet = null } },
        addedToSpace: function() {
            this.active && this.activeInSpace();
            this.activeBodies();
            for (var a = this.cbTypes.head; null != a;) a.elt.constraints.add(this), a = a.next
        },
        removedFromSpace: function() { this.active && this.inactiveOrOutSpace();
            this.inactiveBodies(); for (var a = this.cbTypes.head; null != a;) a.elt.constraints.remove(this), a = a.next },
        activeInSpace: function() { this.alloc_cbSet();
            null == Bc.zpp_pool ? this.component = new Bc : (this.component = Bc.zpp_pool, Bc.zpp_pool = this.component.next, this.component.next = null);
            null;
            this.component.isBody = !1;
            this.component.constraint = this },
        inactiveOrOutSpace: function() {
            this.dealloc_cbSet();
            var a = this.component;
            a.body = null;
            a.constraint = null;
            null;
            a.next = Bc.zpp_pool;
            Bc.zpp_pool = a;
            this.component = null
        },
        activeBodies: function() {},
        inactiveBodies: function() {},
        clearcache: function() {},
        wake_connected: function() {},
        forest: function() {},
        pair_exists: function() { return !1 },
        broken: function() {},
        warmStart: function() {},
        preStep: function() { return !1 },
        applyImpulseVel: function() { return !1 },
        applyImpulsePos: function() { return !1 },
        __class__: Vn
    };
    var ha = function() {
        this.colarb = this.fluidarb = this.sensorarb = null;
        this.type =
            0;
        this.b1 = this.b2 = this.ws1 = this.ws2 = this.pair = null;
        this.invalidated = !1;
        this.immState = 0;
        this.intchange = this.presentable = this.continuous = this.fresh = !1;
        this.present = 0;
        this.active = this.cleared = this.sleeping = !1;
        this.id = this.di = this.stamp = this.up_stamp = this.sleep_stamp = this.endGenerated = 0;
        this.outer = null
    };
    g["zpp_nape.dynamics.ZPP_Arbiter"] = ha;
    ha.__name__ = ["zpp_nape", "dynamics", "ZPP_Arbiter"];
    ha.prototype = {
        wrapper: function() {
            null == this.outer && (ha.internal = !0, this.type == ha.COL ? (this.colarb.outer_zn = new ik,
                this.outer = this.colarb.outer_zn) : this.type == ha.FLUID ? (this.fluidarb.outer_zn = new jk, this.outer = this.fluidarb.outer_zn) : this.outer = new af, this.outer.zpp_inner = this, ha.internal = !1);
            return this.outer
        },
        __class__: ha
    };
    var Eb = function() { this.next = null;
        ha.call(this);
        this.type = ha.SENSOR;
        this.sensorarb = this };
    g["zpp_nape.dynamics.ZPP_SensorArbiter"] = Eb;
    Eb.__name__ = ["zpp_nape", "dynamics", "ZPP_SensorArbiter"];
    Eb.__super__ = ha;
    Eb.prototype = k(ha.prototype, {
        retire: function() {
            this.cleared || (this.b1.arbiters.inlined_try_remove(this),
                this.b2.arbiters.inlined_try_remove(this), null != this.pair && (this.pair = this.pair.arb = null));
            this.b1 = this.b2 = null;
            this.intchange = this.active = !1;
            this.next = Eb.zpp_pool;
            Eb.zpp_pool = this
        },
        __class__: Eb
    });
    var tb = function() {
        this.wMass = this.adamp = this.agamma = this.vMassa = this.vMassb = this.vMassc = this.dampx = this.dampy = this.lgamma = this.nx = this.ny = this.buoyx = this.buoyy = this.pre_dt = 0;
        this.nodrag = !1;
        this.centroidx = this.centroidy = this.overlap = this.r1x = this.r1y = this.r2x = this.r2y = 0;
        this.outer_zn = this.next = null;
        ha.call(this);
        this.type = ha.FLUID;
        this.fluidarb = this;
        this.buoyy = this.buoyx = 0;
        this.pre_dt = -1
    };
    g["zpp_nape.dynamics.ZPP_FluidArbiter"] = tb;
    tb.__name__ = ["zpp_nape", "dynamics", "ZPP_FluidArbiter"];
    tb.__super__ = ha;
    tb.prototype = k(ha.prototype, {
        retire: function() { this.cleared || (this.b1.arbiters.inlined_try_remove(this), this.b2.arbiters.inlined_try_remove(this), null != this.pair && (this.pair = this.pair.arb = null));
            this.b1 = this.b2 = null;
            this.intchange = this.active = !1;
            this.next = tb.zpp_pool;
            tb.zpp_pool = this;
            this.pre_dt = -1 },
        preStep: function(a,
            b) {
            -1 == this.pre_dt && (this.pre_dt = b);
            var c = b / this.pre_dt;
            this.pre_dt = b;
            this.r1x = this.centroidx - this.b1.posx;
            this.r1y = this.centroidy - this.b1.posy;
            this.r2x = this.centroidx - this.b2.posx;
            this.r2y = this.centroidy - this.b2.posy;
            var d = 0,
                e = 0;
            this.ws1.fluidEnabled && null != this.ws1.fluidProperties.wrap_gravity ? (d = this.ws1.fluidProperties.gravityx, e = this.ws1.fluidProperties.gravityy) : (d = a.gravityx, e = a.gravityy);
            var f = 0,
                l = 0;
            this.ws2.fluidEnabled && null != this.ws2.fluidProperties.wrap_gravity ? (f = this.ws2.fluidProperties.gravityx,
                l = this.ws2.fluidProperties.gravityy) : (f = a.gravityx, l = a.gravityy);
            var g = 0,
                i = 0;
            if (this.ws1.fluidEnabled && this.ws2.fluidEnabled) { var j = this.overlap * this.ws1.fluidProperties.density,
                    k = this.overlap * this.ws2.fluidProperties.density; if (j > k) f = j + k, g -= d * f, i -= e * f;
                else if (j < k) d = j + k, g += f * d, i += l * d;
                else { var n = 0,
                        m = 0,
                        n = 0.5 * (d + f),
                        m = 0.5 * (e + l);
                    this.ws1.worldCOMx * n + this.ws1.worldCOMy * m > this.ws2.worldCOMx * n + this.ws2.worldCOMy * m ? (d = j + k, g -= n * d, i -= m * d) : (d = j + k, g += n * d, i += m * d) } } else this.ws1.fluidEnabled ? (f = this.overlap * this.ws1.fluidProperties.density,
                g -= d * f, i -= e * f) : this.ws2.fluidEnabled && (d = this.overlap * this.ws2.fluidProperties.density, g += f * d, i += l * d);
            g *= b;
            i *= b;
            this.buoyx = g;
            this.buoyy = i;
            this.b1.type == h.id_BodyType_DYNAMIC && (d = this.b1.imass, this.b1.velx -= g * d, this.b1.vely -= i * d, this.b1.angvel -= (i * this.r1x - g * this.r1y) * this.b1.iinertia);
            this.b2.type == h.id_BodyType_DYNAMIC && (d = this.b2.imass, this.b2.velx += g * d, this.b2.vely += i * d, this.b2.angvel += (i * this.r2x - g * this.r2y) * this.b2.iinertia);
            if ((!this.ws1.fluidEnabled || 0 == this.ws1.fluidProperties.viscosity) &&
                (!this.ws2.fluidEnabled || 0 == this.ws2.fluidProperties.viscosity)) this.nodrag = !0, this.adamp = this.dampy = this.dampx = 0;
            else {
                this.nodrag = !1;
                g = 0;
                this.ws1.fluidEnabled && (this.ws2.validate_angDrag(), g += this.ws1.fluidProperties.viscosity * this.ws2.angDrag * this.overlap / this.ws2.area);
                this.ws2.fluidEnabled && (this.ws1.validate_angDrag(), g += this.ws2.fluidProperties.viscosity * this.ws1.angDrag * this.overlap / this.ws1.area);
                0 != g ? (i = this.b1.sinertia + this.b2.sinertia, this.wMass = 0 != i ? 1 / i : 0, g = 2 * Math.PI * 4.0E-4 * g, this.agamma =
                    1 / (b * g * (2 + g * b)), g = 1 / (1 + this.agamma), this.agamma *= g, this.wMass *= g) : this.agamma = this.wMass = 0;
                g = this.b2.velx + this.b2.kinvelx - this.r2y * (this.b2.angvel + this.b2.kinangvel) - (this.b1.velx + this.b1.kinvelx - this.r1y * (this.b2.angvel + this.b2.kinangvel));
                i = this.b2.vely + this.b2.kinvely + this.r2x * (this.b2.angvel + this.b2.kinangvel) - (this.b1.vely + this.b1.kinvely + this.r1x * (this.b1.angvel + this.b1.kinangvel));
                g * g + i * i < u.epsilon * u.epsilon || (d = 1 / Math.sqrt(g * g + i * i), this.nx = g * d, this.ny = i * d);
                g = 0;
                if (this.ws1.fluidEnabled)
                    if (i = -this.ws1.fluidProperties.viscosity * this.overlap / this.ws2.area, this.ws2.type == h.id_ShapeType_CIRCLE) g -= i * this.ws2.circle.radius * u.fluidLinearDrag / (2 * this.ws2.circle.radius * Math.PI);
                    else { e = d = 0; for (f = this.ws2.polygon.edges.head; null != f;) l = f.elt, d += l.length, l = i * l.length * (l.gnormx * this.nx + l.gnormy * this.ny), 0 < l && (l = l *= -u.fluidVacuumDrag), e -= 0.5 * l * u.fluidLinearDrag, f = f.next;
                        g += e / d } if (this.ws2.fluidEnabled)
                    if (i = -this.ws2.fluidProperties.viscosity * this.overlap / this.ws1.area, this.ws1.type == h.id_ShapeType_CIRCLE) g -=
                        i * this.ws1.circle.radius * u.fluidLinearDrag / (2 * this.ws1.circle.radius * Math.PI);
                    else { e = d = 0; for (f = this.ws1.polygon.edges.head; null != f;) l = f.elt, d += l.length, l = i * l.length * (l.gnormx * this.nx + l.gnormy * this.ny), 0 < l && (l = l *= -u.fluidVacuumDrag), e -= 0.5 * l * u.fluidLinearDrag, f = f.next;
                        g += e / d } 0 != g ? (f = this.b1.smass + this.b2.smass, e = d = i = 0, i = f, d = 0, e = f, 0 != this.b1.sinertia && (f = this.r1x * this.b1.sinertia, l = this.r1y * this.b1.sinertia, i += l * this.r1y, d += -l * this.r1x, e += f * this.r1x), 0 != this.b2.sinertia && (f = this.r2x * this.b2.sinertia,
                    l = this.r2y * this.b2.sinertia, i += l * this.r2y, d += -l * this.r2x, e += f * this.r2x), f = i * e - d * d, f != f ? (i = d = e = 0, 3) : 0 == f ? (f = 0, 0 != i ? i = 1 / i : (i = 0, f |= 1), 0 != e ? e = 1 / e : (e = 0, f |= 2), d = 0, f) : (f = 1 / f, l = e * f, e = i * f, i = l, d *= -f, 0), this.vMassa = i, this.vMassb = d, this.vMassc = e, g *= 2 * Math.PI, this.lgamma = 1 / (b * g * (2 + g * b)), g = 1 / (1 + this.lgamma), this.lgamma *= g, this.vMassa *= g, this.vMassb *= g, this.vMassc *= g) : this.lgamma = this.vMassc = this.vMassb = this.vMassa = 0
            }
            this.dampx *= c;
            this.dampy *= c;
            this.adamp *= c
        },
        warmStart: function() {
            var a = this.b1.imass;
            this.b1.velx -=
                this.dampx * a;
            this.b1.vely -= this.dampy * a;
            a = this.b2.imass;
            this.b2.velx += this.dampx * a;
            this.b2.vely += this.dampy * a;
            this.b1.angvel -= this.b1.iinertia * (this.dampy * this.r1x - this.dampx * this.r1y);
            this.b2.angvel += this.b2.iinertia * (this.dampy * this.r2x - this.dampx * this.r2y);
            this.b1.angvel -= this.adamp * this.b1.iinertia;
            this.b2.angvel += this.adamp * this.b2.iinertia
        },
        applyImpulseVel: function() {
            if (!this.nodrag) {
                var a = this.b1.angvel + this.b1.kinangvel,
                    b = this.b2.angvel + this.b2.kinangvel,
                    c = this.b1.velx + this.b1.kinvelx - this.r1y *
                    a - (this.b2.velx + this.b2.kinvelx - this.r2y * b),
                    d = this.b1.vely + this.b1.kinvely + this.r1x * a - (this.b2.vely + this.b2.kinvely + this.r2x * b),
                    e = this.vMassa * c + this.vMassb * d,
                    d = this.vMassb * c + this.vMassc * d,
                    f = this.lgamma,
                    c = e - this.dampx * f,
                    d = d - this.dampy * f;
                this.dampx += 1 * c;
                this.dampy += 1 * d;
                e = this.b1.imass;
                this.b1.velx -= c * e;
                this.b1.vely -= d * e;
                e = this.b2.imass;
                this.b2.velx += c * e;
                this.b2.vely += d * e;
                this.b1.angvel -= this.b1.iinertia * (d * this.r1x - c * this.r1y);
                this.b2.angvel += this.b2.iinertia * (d * this.r2x - c * this.r2y);
                a = (a - b) * this.wMass -
                    this.adamp * this.agamma;
                this.adamp += a;
                this.b1.angvel -= a * this.b1.iinertia;
                this.b2.angvel += a * this.b2.iinertia
            }
        },
        __class__: tb
    });
    var kc = function() {
        this.pre_dt = 0;
        this.stat = !1;
        this.next = null;
        this.hc2 = this.hpc2 = !1;
        this.c1 = this.oc1 = this.c2 = this.oc2 = null;
        this.__ref_vertex = 0;
        this.__ref_edge1 = this.__ref_edge2 = null;
        this.biasCoef = 0;
        this.rev = !1;
        this.kMassa = this.kMassb = this.kMassc = this.Ka = this.Kb = this.Kc = this.rMass = this.jrAcc = this.rn1a = this.rt1a = this.rn1b = this.rt1b = this.rn2a = this.rt2a = this.rn2b = this.rt2b = this.k1x =
            this.k1y = this.k2x = this.k2y = this.surfacex = this.surfacey = this.lnormx = this.lnormy = this.lproj = this.radius = 0;
        this.wrap_normal = null;
        this.nx = this.ny = 0;
        this.s1 = this.s2 = this.contacts = this.innards = null;
        this.userdef_dyn_fric = this.userdef_stat_fric = this.userdef_restitution = this.userdef_rfric = !1;
        this.dyn_fric = this.stat_fric = this.restitution = this.rfric = 0;
        this.outer_zn = null;
        ha.call(this);
        this.pre_dt = -1;
        this.contacts = new Ub;
        this.innards = new Nl;
        this.type = ha.COL;
        this.colarb = this
    };
    g["zpp_nape.dynamics.ZPP_ColArbiter"] =
        kc;
    kc.__name__ = ["zpp_nape", "dynamics", "ZPP_ColArbiter"];
    kc.__super__ = ha;
    kc.prototype = k(ha.prototype, {
        normal_validate: function() { if (this.cleared) throw "Error: Arbiter not currently in use";
            this.wrap_normal.zpp_inner.x = this.nx;
            this.wrap_normal.zpp_inner.y = this.ny;
            this.ws1.id > this.ws2.id && (this.wrap_normal.zpp_inner.x = -this.wrap_normal.zpp_inner.x, this.wrap_normal.zpp_inner.y = -this.wrap_normal.zpp_inner.y) },
        getnormal: function() {
            this.wrap_normal = aa.get(0, 0, null);
            this.wrap_normal.zpp_inner._immutable = !0;
            this.wrap_normal.zpp_inner._inuse = !0;
            this.wrap_normal.zpp_inner._validate = m(this, this.normal_validate)
        },
        injectContact: function(a, b, c, d, e, f, h) {
            null == h && (h = !1);
            for (var g = null, i = this.contacts.next; null != i;) { var j = i; if (f == j.hash) { g = j; break } i = i.next } null == g ? (null == Ub.zpp_pool ? g = new Ub : (g = Ub.zpp_pool, Ub.zpp_pool = g.next, g.next = null), null, i = g.inner, i.jnAcc = i.jtAcc = 0, g.hash = f, g.fresh = !0, g.arbiter = this, this.jrAcc = 0, this.contacts.inlined_add(g), this.innards.add(i)) : g.fresh = !1;
            g.px = a;
            g.py = b;
            this.nx = c;
            this.ny =
                d;
            g.dist = e;
            g.stamp = this.stamp;
            g.posOnly = h;
            return g
        },
        retire: function() {
            this.cleared || (this.b1.arbiters.inlined_try_remove(this), this.b2.arbiters.inlined_try_remove(this), null != this.pair && (this.pair = this.pair.arb = null));
            this.b1 = this.b2 = null;
            for (this.intchange = this.active = !1; null != this.contacts.next;) { var a = this.contacts.inlined_pop_unsafe();
                a.arbiter = null;
                a.next = Ub.zpp_pool;
                Ub.zpp_pool = a;
                this.innards.inlined_pop() } this.userdef_rfric = this.userdef_restitution = this.userdef_stat_fric = this.userdef_dyn_fric = !1;
            this.__ref_edge1 = this.__ref_edge2 = null;
            this.next = kc.zpp_pool;
            kc.zpp_pool = this;
            this.pre_dt = -1
        },
        cleanupContacts: function() {
            var a = !0,
                b = null,
                c = null,
                d = this.innards.next;
            this.hc2 = !1;
            for (var e = this.contacts.next; null != e;) {
                var f = e;
                f.stamp + u.arbiterExpirationDelay < this.stamp ? (e = this.contacts.inlined_erase(b), d = this.innards.inlined_erase(c), f.arbiter = null, f.next = Ub.zpp_pool, Ub.zpp_pool = f) : (b = f.inner, c = f.active, f.active = f.stamp == this.stamp, f.active && (a ? (a = !1, this.c1 = b, this.oc1 = f) : (this.hc2 = !0, this.c2 = b, this.oc2 =
                    f)), c != f.active && (this.contacts.modified = !0), b = e, c = d, d = d.next, e = e.next)
            }
            this.hc2 ? (this.hpc2 = !0, this.oc1.posOnly ? (d = this.c1, this.c1 = this.c2, this.c2 = d, d = this.oc1, this.oc1 = this.oc2, this.oc2 = d, this.hc2 = !1) : this.oc2.posOnly && (this.hc2 = !1), this.oc1.posOnly && (a = !0)) : this.hpc2 = !1;
            return a
        },
        preStep: function(a) {
            this.invalidated && (this.invalidated = !1, this.userdef_restitution || (this.restitution = this.s1.material.elasticity <= Math.NEGATIVE_INFINITY || this.s2.material.elasticity <= Math.NEGATIVE_INFINITY ? 0 : this.s1.material.elasticity >=
                Math.POSITIVE_INFINITY || this.s2.material.elasticity >= Math.POSITIVE_INFINITY ? 1 : (this.s1.material.elasticity + this.s2.material.elasticity) / 2, 0 > this.restitution && (this.restitution = 0), 1 < this.restitution && (this.restitution = 1)), this.userdef_dyn_fric || (this.dyn_fric = Math.sqrt(this.s1.material.dynamicFriction * this.s2.material.dynamicFriction)), this.userdef_stat_fric || (this.stat_fric = Math.sqrt(this.s1.material.staticFriction * this.s2.material.staticFriction)), this.userdef_rfric || (this.rfric = Math.sqrt(this.s1.material.rollingFriction *
                this.s2.material.rollingFriction))); - 1 == this.pre_dt && (this.pre_dt = a);
            var b = a / this.pre_dt;
            this.pre_dt = a;
            var c = this.b1.smass + this.b2.smass;
            this.hc2 = !1;
            a = !0;
            this.biasCoef = this.b1.type != h.id_BodyType_DYNAMIC || this.b2.type != h.id_BodyType_DYNAMIC ? this.continuous ? u.contactContinuousStaticBiasCoef : u.contactStaticBiasCoef : this.continuous ? u.contactContinuousBiasCoef : u.contactBiasCoef;
            this.continuous = !1;
            for (var d = null, e = null, f = this.innards.next, g = this.contacts.next; null != g;) {
                var i = g;
                if (i.stamp + u.arbiterExpirationDelay <
                    this.stamp) g = this.contacts.inlined_erase(d), f = this.innards.inlined_erase(e), i.arbiter = null, i.next = Ub.zpp_pool, Ub.zpp_pool = i;
                else {
                    d = i.inner;
                    e = i.active;
                    i.active = i.stamp == this.stamp;
                    if (i.active) {
                        a ? (a = !1, this.c1 = d, this.oc1 = i) : (this.hc2 = !0, this.c2 = d, this.oc2 = i);
                        d.r2x = i.px - this.b2.posx;
                        d.r2y = i.py - this.b2.posy;
                        d.r1x = i.px - this.b1.posx;
                        d.r1y = i.py - this.b1.posy;
                        var j = c + this.b2.sinertia * Oh.sqr(d.r2x * this.nx + d.r2y * this.ny),
                            j = j + this.b1.sinertia * Oh.sqr(d.r1x * this.nx + d.r1y * this.ny);
                        d.tMass = j < u.epsilon * u.epsilon ?
                            0 : 1 / j;
                        j = c + this.b2.sinertia * Oh.sqr(this.ny * d.r2x - this.nx * d.r2y);
                        j += this.b1.sinertia * Oh.sqr(this.ny * d.r1x - this.nx * d.r1y);
                        d.nMass = j < u.epsilon * u.epsilon ? 0 : 1 / j;
                        var k = j = 0,
                            n = this.b2.angvel + this.b2.kinangvel,
                            j = this.b2.velx + this.b2.kinvelx - d.r2y * n,
                            k = this.b2.vely + this.b2.kinvely + d.r2x * n,
                            n = this.b1.angvel + this.b1.kinangvel,
                            j = j - (this.b1.velx + this.b1.kinvelx - d.r1y * n),
                            k = k - (this.b1.vely + this.b1.kinvely + d.r1x * n),
                            n = this.nx * j + this.ny * k;
                        i.elasticity = this.restitution;
                        d.bounce = n * i.elasticity;
                        d.bounce > -u.elasticThreshold &&
                            (d.bounce = 0);
                        n = k * this.nx - j * this.ny;
                        j = u.staticFrictionThreshold;
                        d.friction = n * n > j * j ? this.dyn_fric : this.stat_fric;
                        d.jnAcc *= b;
                        d.jtAcc *= b
                    }
                    e != i.active && (this.contacts.modified = !0);
                    d = g;
                    e = f;
                    f = f.next;
                    g = g.next
                }
            }
            this.hc2 ? (this.hpc2 = !0, this.oc1.posOnly ? (f = this.c1, this.c1 = this.c2, this.c2 = f, f = this.oc1, this.oc1 = this.oc2, this.oc2 = f, this.hc2 = !1) : this.oc2.posOnly && (this.hc2 = !1), this.oc1.posOnly && (a = !0)) : this.hpc2 = !1;
            this.jrAcc *= b;
            a || (this.rn1a = this.ny * this.c1.r1x - this.nx * this.c1.r1y, this.rt1a = this.c1.r1x * this.nx + this.c1.r1y *
                this.ny, this.rn1b = this.ny * this.c1.r2x - this.nx * this.c1.r2y, this.rt1b = this.c1.r2x * this.nx + this.c1.r2y * this.ny, this.k1x = this.b2.kinvelx - this.c1.r2y * this.b2.kinangvel - (this.b1.kinvelx - this.c1.r1y * this.b1.kinangvel), this.k1y = this.b2.kinvely + this.c1.r2x * this.b2.kinangvel - (this.b1.kinvely + this.c1.r1x * this.b1.kinangvel));
            this.hc2 && (this.rn2a = this.ny * this.c2.r1x - this.nx * this.c2.r1y, this.rt2a = this.c2.r1x * this.nx + this.c2.r1y * this.ny, this.rn2b = this.ny * this.c2.r2x - this.nx * this.c2.r2y, this.rt2b = this.c2.r2x * this.nx +
                this.c2.r2y * this.ny, this.k2x = this.b2.kinvelx - this.c2.r2y * this.b2.kinangvel - (this.b1.kinvelx - this.c2.r1y * this.b1.kinangvel), this.k2y = this.b2.kinvely + this.c2.r2x * this.b2.kinangvel - (this.b1.kinvely + this.c2.r1x * this.b1.kinangvel), this.kMassa = c + this.b1.sinertia * this.rn1a * this.rn1a + this.b2.sinertia * this.rn1b * this.rn1b, this.kMassb = c + this.b1.sinertia * this.rn1a * this.rn2a + this.b2.sinertia * this.rn1b * this.rn2b, this.kMassc = c + this.b1.sinertia * this.rn2a * this.rn2a + this.b2.sinertia * this.rn2b * this.rn2b, this.kMassa *
                this.kMassa + 2 * this.kMassb * this.kMassb + this.kMassc * this.kMassc < u.illConditionedThreshold * (this.kMassa * this.kMassc - this.kMassb * this.kMassb) ? (this.Ka = this.kMassa, this.Kb = this.kMassb, this.Kc = this.kMassc, b = this.kMassa * this.kMassc - this.kMassb * this.kMassb, b != b ? (this.kMassa = this.kMassb = this.kMassc = 0, 3) : 0 == b ? (b = 0, 0 != this.kMassa ? this.kMassa = 1 / this.kMassa : (this.kMassa = 0, b |= 1), 0 != this.kMassc ? this.kMassc = 1 / this.kMassc : (this.kMassc = 0, b |= 2), this.kMassb = 0, b) : (b = 1 / b, c = this.kMassc * b, this.kMassc = this.kMassa * b, this.kMassa =
                    c, this.kMassb *= -b, 0)) : (this.hc2 = !1, this.oc2.dist < this.oc1.dist && (b = this.c1, this.c1 = this.c2, this.c2 = b), this.oc2.active = !1, this.contacts.modified = !0));
            this.surfacex = this.b2.svelx;
            this.surfacey = this.b2.svely;
            this.surfacex += 1 * this.b1.svelx;
            this.surfacey += 1 * this.b1.svely;
            this.surfacex = -this.surfacex;
            this.surfacey = -this.surfacey;
            this.rMass = this.b1.sinertia + this.b2.sinertia;
            0 != this.rMass && (this.rMass = 1 / this.rMass);
            return a
        },
        warmStart: function() {
            var a = this.nx * this.c1.jnAcc - this.ny * this.c1.jtAcc,
                b = this.ny *
                this.c1.jnAcc + this.nx * this.c1.jtAcc,
                c = this.b1.imass;
            this.b1.velx -= a * c;
            this.b1.vely -= b * c;
            this.b1.angvel -= this.b1.iinertia * (b * this.c1.r1x - a * this.c1.r1y);
            c = this.b2.imass;
            this.b2.velx += a * c;
            this.b2.vely += b * c;
            this.b2.angvel += this.b2.iinertia * (b * this.c1.r2x - a * this.c1.r2y);
            this.hc2 && (a = this.nx * this.c2.jnAcc - this.ny * this.c2.jtAcc, b = this.ny * this.c2.jnAcc + this.nx * this.c2.jtAcc, c = this.b1.imass, this.b1.velx -= a * c, this.b1.vely -= b * c, this.b1.angvel -= this.b1.iinertia * (b * this.c2.r1x - a * this.c2.r1y), c = this.b2.imass, this.b2.velx +=
                a * c, this.b2.vely += b * c, this.b2.angvel += this.b2.iinertia * (b * this.c2.r2x - a * this.c2.r2y));
            this.b2.angvel += this.jrAcc * this.b2.iinertia;
            this.b1.angvel -= this.jrAcc * this.b1.iinertia
        },
        applyImpulseVel: function() {
            var a, b, c, d, e;
            d = this.k1x + this.b2.velx - this.c1.r2y * this.b2.angvel - (this.b1.velx - this.c1.r1y * this.b1.angvel);
            var f = this.k1y + this.b2.vely + this.c1.r2x * this.b2.angvel - (this.b1.vely + this.c1.r1x * this.b1.angvel);
            c = (f * this.nx - d * this.ny + this.surfacex) * this.c1.tMass;
            d = this.c1.friction * this.c1.jnAcc;
            a = this.c1.jtAcc;
            e = a - c;
            e > d ? e = d : e < -d && (e = -d);
            c = e - a;
            this.c1.jtAcc = e;
            a = -this.ny * c;
            b = this.nx * c;
            this.b2.velx += a * this.b2.imass;
            this.b2.vely += b * this.b2.imass;
            this.b1.velx -= a * this.b1.imass;
            this.b1.vely -= b * this.b1.imass;
            this.b2.angvel += this.rt1b * c * this.b2.iinertia;
            this.b1.angvel -= this.rt1a * c * this.b1.iinertia;
            this.hc2 ? (e = this.k2x + this.b2.velx - this.c2.r2y * this.b2.angvel - (this.b1.velx - this.c2.r1y * this.b1.angvel), b = this.k2y + this.b2.vely + this.c2.r2x * this.b2.angvel - (this.b1.vely + this.c2.r1x * this.b1.angvel), c = (b * this.nx - e * this.ny +
                    this.surfacex) * this.c2.tMass, d = this.c2.friction * this.c2.jnAcc, a = this.c2.jtAcc, e = a - c, e > d ? e = d : e < -d && (e = -d), c = e - a, this.c2.jtAcc = e, a = -this.ny * c, b = this.nx * c, this.b2.velx += a * this.b2.imass, this.b2.vely += b * this.b2.imass, this.b1.velx -= a * this.b1.imass, this.b1.vely -= b * this.b1.imass, this.b2.angvel += this.rt2b * c * this.b2.iinertia, this.b1.angvel -= this.rt2a * c * this.b1.iinertia, d = this.k1x + this.b2.velx - this.c1.r2y * this.b2.angvel - (this.b1.velx - this.c1.r1y * this.b1.angvel), f = this.k1y + this.b2.vely + this.c1.r2x * this.b2.angvel -
                (this.b1.vely + this.c1.r1x * this.b1.angvel), e = this.k2x + this.b2.velx - this.c2.r2y * this.b2.angvel - (this.b1.velx - this.c2.r1y * this.b1.angvel), b = this.k2y + this.b2.vely + this.c2.r2x * this.b2.angvel - (this.b1.vely + this.c2.r1x * this.b1.angvel), c = this.c1.jnAcc, a = this.c2.jnAcc, d = d * this.nx + f * this.ny + this.surfacey + this.c1.bounce - (this.Ka * c + this.Kb * a), e = e * this.nx + b * this.ny + this.surfacey + this.c2.bounce - (this.Kb * c + this.Kc * a), b = -(this.kMassa * d + this.kMassb * e), f = -(this.kMassb * d + this.kMassc * e), 0 <= b && 0 <= f ? (d = b - c, e = f - a, this.c1.jnAcc =
                    b, this.c2.jnAcc = f) : (b = -this.c1.nMass * d, 0 <= b && 0 <= this.Kb * b + e ? (d = b - c, e = -a, this.c1.jnAcc = b, this.c2.jnAcc = 0) : (f = -this.c2.nMass * e, 0 <= f && 0 <= this.Kb * f + d ? (d = -c, e = f - a, this.c1.jnAcc = 0, this.c2.jnAcc = f) : 0 <= d && 0 <= e ? (d = -c, e = -a, this.c1.jnAcc = this.c2.jnAcc = 0) : e = d = 0)), c = d + e, a = this.nx * c, b = this.ny * c, this.b2.velx += a * this.b2.imass, this.b2.vely += b * this.b2.imass, this.b1.velx -= a * this.b1.imass, this.b1.vely -= b * this.b1.imass, this.b2.angvel += (this.rn1b * d + this.rn2b * e) * this.b2.iinertia, this.b1.angvel -= (this.rn1a * d + this.rn2a * e) *
                this.b1.iinertia) : (0 != this.radius && (c = (this.b2.angvel - this.b1.angvel) * this.rMass, d = this.rfric * this.c1.jnAcc, a = this.jrAcc, this.jrAcc -= c, this.jrAcc > d ? this.jrAcc = d : this.jrAcc < -d && (this.jrAcc = -d), c = this.jrAcc - a, this.b2.angvel += c * this.b2.iinertia, this.b1.angvel -= c * this.b1.iinertia), d = this.k1x + this.b2.velx - this.c1.r2y * this.b2.angvel - (this.b1.velx - this.c1.r1y * this.b1.angvel), f = this.k1y + this.b2.vely + this.c1.r2x * this.b2.angvel - (this.b1.vely + this.c1.r1x * this.b1.angvel), c = (this.c1.bounce + (this.nx * d + this.ny *
                f) + this.surfacey) * this.c1.nMass, a = this.c1.jnAcc, e = a - c, 0 > e && (e = 0), c = e - a, this.c1.jnAcc = e, a = this.nx * c, b = this.ny * c, this.b2.velx += a * this.b2.imass, this.b2.vely += b * this.b2.imass, this.b1.velx -= a * this.b1.imass, this.b1.vely -= b * this.b1.imass, this.b2.angvel += this.rn1b * c * this.b2.iinertia, this.b1.angvel -= this.rn1a * c * this.b1.iinertia)
        },
        applyImpulsePos: function() {
            if (2 == this.ptype) {
                var a = this.c1,
                    b = 0,
                    c = 0,
                    b = this.b2.axisy * a.lr2x - this.b2.axisx * a.lr2y,
                    c = a.lr2x * this.b2.axisx + a.lr2y * this.b2.axisy,
                    b = b + 1 * this.b2.posx,
                    c = c +
                    1 * this.b2.posy,
                    d = 0,
                    e = 0,
                    d = this.b1.axisy * a.lr1x - this.b1.axisx * a.lr1y,
                    e = a.lr1x * this.b1.axisx + a.lr1y * this.b1.axisy,
                    d = d + 1 * this.b1.posx,
                    e = e + 1 * this.b1.posy,
                    f = a = 0,
                    a = b - d,
                    f = c - e,
                    h = Math.sqrt(a * a + f * f),
                    g = this.radius - u.collisionSlop,
                    i = h - g;
                0 > a * this.nx + f * this.ny && (a = -a, f = -f, i -= this.radius);
                0 > i && (h < u.epsilon ? 0 != this.b1.smass ? this.b1.posx += 10 * u.epsilon : this.b2.posx += 10 * u.epsilon : (i = 1 / h, a *= i, f *= i, b = 0.5 * (d + b), c = 0.5 * (e + c), d = b - this.b1.posx, e = c - this.b1.posy, b -= this.b2.posx, c -= this.b2.posy, d = f * d - a * e, b = f * b - a * c, c = this.b2.smass +
                    b * b * this.b2.sinertia + this.b1.smass + d * d * this.b1.sinertia, 0 != c && (h = -this.biasCoef * (h - g) / c, c = g = 0, g = a * h, c = f * h, a = this.b1.imass, this.b1.posx -= g * a, this.b1.posy -= c * a, this.b1.delta_rot(-d * this.b1.iinertia * h), a = this.b2.imass, this.b2.posx += g * a, this.b2.posy += c * a, this.b2.delta_rot(b * this.b2.iinertia * h))))
            } else {
                var j = i = f = a = 0,
                    e = b = 0;
                0 == this.ptype ? (a = this.b1.axisy * this.lnormx - this.b1.axisx * this.lnormy, f = this.lnormx * this.b1.axisx + this.lnormy * this.b1.axisy, g = this.lproj + (a * this.b1.posx + f * this.b1.posy), i = this.b2.axisy *
                    this.c1.lr1x - this.b2.axisx * this.c1.lr1y, j = this.c1.lr1x * this.b2.axisx + this.c1.lr1y * this.b2.axisy, i += 1 * this.b2.posx, j += 1 * this.b2.posy, this.hpc2 && (b = this.b2.axisy * this.c2.lr1x - this.b2.axisx * this.c2.lr1y, e = this.c2.lr1x * this.b2.axisx + this.c2.lr1y * this.b2.axisy, b += 1 * this.b2.posx, e += 1 * this.b2.posy)) : (a = this.b2.axisy * this.lnormx - this.b2.axisx * this.lnormy, f = this.lnormx * this.b2.axisx + this.lnormy * this.b2.axisy, g = this.lproj + (a * this.b2.posx + f * this.b2.posy), i = this.b1.axisy * this.c1.lr1x - this.b1.axisx * this.c1.lr1y,
                    j = this.c1.lr1x * this.b1.axisx + this.c1.lr1y * this.b1.axisy, i += 1 * this.b1.posx, j += 1 * this.b1.posy, this.hpc2 && (b = this.b1.axisy * this.c2.lr1x - this.b1.axisx * this.c2.lr1y, e = this.c2.lr1x * this.b1.axisx + this.c2.lr1y * this.b1.axisy, b += 1 * this.b1.posx, e += 1 * this.b1.posy));
                h = i * a + j * f - g - this.radius;
                h += u.collisionSlop;
                c = 0;
                this.hpc2 && (c = b * a + e * f - g - this.radius, c += u.collisionSlop);
                if (0 > h || 0 > c) {
                    this.rev && (a = -a, f = -f);
                    var k = 0,
                        n = 0,
                        k = i - this.b1.posx,
                        n = j - this.b1.posy,
                        d = g = 0,
                        g = i - this.b2.posx,
                        d = j - this.b2.posy,
                        m = 0,
                        o = 0,
                        j = i = 0;
                    if (this.hpc2) {
                        m =
                            b - this.b1.posx;
                        o = e - this.b1.posy;
                        i = b - this.b2.posx;
                        j = e - this.b2.posy;
                        b = f * k - a * n;
                        g = f * g - a * d;
                        e = f * m - a * o;
                        d = f * i - a * j;
                        i = this.b1.smass + this.b2.smass;
                        this.kMassa = i + this.b1.sinertia * b * b + this.b2.sinertia * g * g;
                        this.kMassb = i + this.b1.sinertia * b * e + this.b2.sinertia * g * d;
                        this.kMassc = i + this.b1.sinertia * e * e + this.b2.sinertia * d * d;
                        k = j = i = 0;
                        i = this.kMassa;
                        j = this.kMassb;
                        k = this.kMassc;
                        n = h * this.biasCoef;
                        m = c * this.biasCoef;
                        c = h = 0;
                        h = -n;
                        c = -m;
                        o = this.kMassa * this.kMassc - this.kMassb * this.kMassb;
                        if (o != o) h = c = 0;
                        else if (0 == o) h = 0 != this.kMassa ? h /
                            this.kMassa : 0, c = 0 != this.kMassc ? c / this.kMassc : 0;
                        else var o = 1 / o,
                            p = o * (this.kMassc * h - this.kMassb * c),
                            c = o * (this.kMassa * c - this.kMassb * h),
                            h = p;
                        0 <= h && 0 <= c ? (i = (h + c) * this.b1.imass, this.b1.posx -= a * i, this.b1.posy -= f * i, this.b1.delta_rot(-this.b1.iinertia * (b * h + e * c)), b = (h + c) * this.b2.imass, this.b2.posx += a * b, this.b2.posy += f * b, this.b2.delta_rot(this.b2.iinertia * (g * h + d * c))) : (h = -n / i, c = 0, 0 <= h && 0 <= j * h + m ? (i = (h + c) * this.b1.imass, this.b1.posx -= a * i, this.b1.posy -= f * i, this.b1.delta_rot(-this.b1.iinertia * (b * h + e * c)), b = (h + c) * this.b2.imass,
                            this.b2.posx += a * b, this.b2.posy += f * b, this.b2.delta_rot(this.b2.iinertia * (g * h + d * c))) : (h = 0, c = -m / k, 0 <= c && 0 <= j * c + n && (i = (h + c) * this.b1.imass, this.b1.posx -= a * i, this.b1.posy -= f * i, this.b1.delta_rot(-this.b1.iinertia * (b * h + e * c)), b = (h + c) * this.b2.imass, this.b2.posx += a * b, this.b2.posy += f * b, this.b2.delta_rot(this.b2.iinertia * (g * h + d * c)))))
                    } else b = f * k - a * n, g = f * g - a * d, c = this.b2.smass + g * g * this.b2.sinertia + this.b1.smass + b * b * this.b1.sinertia, 0 != c && (h = -this.biasCoef * h / c, d = c = 0, c = a * h, d = f * h, a = this.b1.imass, this.b1.posx -= c * a,
                        this.b1.posy -= d * a, this.b1.delta_rot(-b * this.b1.iinertia * h), a = this.b2.imass, this.b2.posx += c * a, this.b2.posy += d * a, this.b2.delta_rot(g * this.b2.iinertia * h))
                }
            }
        },
        __class__: kc
    });
    var Ub = function() { this.length = 0;
        this._inuse = this.modified = this.pushmod = !1;
        this.next = null;
        this.dist = this.elasticity = 0;
        this.fresh = !1;
        this.stamp = this.hash = 0;
        this.active = this.posOnly = !1;
        this.arbiter = this.inner = null;
        this.px = this.py = 0;
        this.outer = null;
        this.inner = new Nl };
    g["zpp_nape.dynamics.ZPP_Contact"] = Ub;
    Ub.__name__ = ["zpp_nape", "dynamics",
        "ZPP_Contact"
    ];
    Ub.prototype = {
        wrapper: function() { null == this.outer && (Ub.internal = !0, this.outer = new Hm, Ub.internal = !1, this.outer.zpp_inner = this); return this.outer },
        inlined_add: function(a) { a._inuse = !0;
            a.next = this.next;
            this.next = a;
            this.modified = !0;
            this.length++; return a },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.next;
            this.next = a.next;
            a._inuse = !1;
            null == this.next && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        inlined_pop_unsafe: function() { var a = this.next;
            this.pop(); return a },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.next, this.next = c = b.next, null == this.next && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            b._inuse = !1;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        __class__: Ub
    };
    var Nl = function() { this.length = 0;
        this._inuse = this.modified = this.pushmod = !1;
        this.next = null;
        this.r1x = this.r1y = this.r2x = this.r2y = this.nMass = this.tMass = this.bounce = this.friction = this.jnAcc = this.jtAcc = this.lr1x = this.lr1y = this.lr2x = this.lr2y = 0 };
    g["zpp_nape.dynamics.ZPP_IContact"] =
        Nl;
    Nl.__name__ = ["zpp_nape", "dynamics", "ZPP_IContact"];
    Nl.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { a._inuse = !0;
            a.next = this.next;
            this.next = a;
            this.modified = !0;
            this.length++; return a },
        inlined_pop: function() { var a = this.next;
            this.next = a.next;
            a._inuse = !1;
            null == this.next && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.next, this.next = c = b.next, null == this.next && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            b._inuse = !1;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        __class__: Nl
    };
    var uc = function() { this.collisionGroup = this.collisionMask = this.sensorGroup = this.sensorMask = this.fluidGroup = this.fluidMask = 0;
        this.next = this.outer = this.shapes = null;
        this.shapes = new Bf;
        this.collisionGroup = this.sensorGroup = this.fluidGroup = 1;
        this.collisionMask = this.sensorMask = this.fluidMask = -1 };
    g["zpp_nape.dynamics.ZPP_InteractionFilter"] = uc;
    uc.__name__ = ["zpp_nape", "dynamics", "ZPP_InteractionFilter"];
    uc.prototype = {
        wrapper: function() {
            if (null ==
                this.outer) { this.outer = new dg; var a = this.outer.zpp_inner;
                a.outer = null;
                a.next = uc.zpp_pool;
                uc.zpp_pool = a;
                this.outer.zpp_inner = this }
            return this.outer
        },
        shouldCollide: function(a) { return 0 != (this.collisionMask & a.collisionGroup) && 0 != (a.collisionMask & this.collisionGroup) },
        shouldSense: function(a) { return 0 != (this.sensorMask & a.sensorGroup) && 0 != (a.sensorMask & this.sensorGroup) },
        shouldFlow: function(a) { return 0 != (this.fluidMask & a.fluidGroup) && 0 != (a.fluidMask & this.fluidGroup) },
        invalidate: function() {
            for (var a = this.shapes.head; null !=
                a;) a.elt.invalidate_filter(), a = a.next
        },
        __class__: uc
    };
    var Wn = function() { this.depth = 0;
        this.group = this.interactors = null;
        this.ignore = !1;
        this.outer = null };
    g["zpp_nape.dynamics.ZPP_InteractionGroup"] = Wn;
    Wn.__name__ = ["zpp_nape", "dynamics", "ZPP_InteractionGroup"];
    Wn.prototype = { __class__: Wn };
    var Ya = function() { this.wrap_max = null;
        this.maxx = this.maxy = 0;
        this.wrap_min = null;
        this.minx = this.miny = 0;
        this.outer = this.next = null;
        this._immutable = !1;
        this._invalidate = this._validate = null };
    g["zpp_nape.geom.ZPP_AABB"] = Ya;
    Ya.__name__ = ["zpp_nape", "geom", "ZPP_AABB"];
    Ya.get = function(a, b, c, d) { var e;
        null == Ya.zpp_pool ? e = new Ya : (e = Ya.zpp_pool, Ya.zpp_pool = e.next, e.next = null);
        null;
        e.minx = a;
        e.miny = b;
        e.maxx = c;
        e.maxy = d; return e };
    Ya.prototype = {
        validate: function() { null != this._validate && this._validate() },
        wrapper: function() {
            if (null == this.outer) {
                this.outer = new Im;
                var a = this.outer.zpp_inner;
                null != a.outer && (a.outer.zpp_inner = null, a.outer = null);
                a.wrap_min = a.wrap_max = null;
                a._invalidate = null;
                a._validate = null;
                a.next = Ya.zpp_pool;
                Ya.zpp_pool = a;
                this.outer.zpp_inner =
                    this
            }
            return this.outer
        },
        width: function() { return this.maxx - this.minx },
        height: function() { return this.maxy - this.miny },
        perimeter: function() { return 2 * (this.maxx - this.minx + (this.maxy - this.miny)) },
        intersectY: function(a) { return !(a.miny > this.maxy || this.miny > a.maxy) },
        intersect: function(a) { return a.miny <= this.maxy && this.miny <= a.maxy && a.minx <= this.maxx && this.minx <= a.maxx },
        combine: function(a) {
            a.minx < this.minx && (this.minx = a.minx);
            a.maxx > this.maxx && (this.maxx = a.maxx);
            a.miny < this.miny && (this.miny = a.miny);
            a.maxy >
                this.maxy && (this.maxy = a.maxy)
        },
        contains: function(a) { return a.minx >= this.minx && a.miny >= this.miny && a.maxx <= this.maxx && a.maxy <= this.maxy },
        setCombine: function(a, b) { this.minx = a.minx < b.minx ? a.minx : b.minx;
            this.miny = a.miny < b.miny ? a.miny : b.miny;
            this.maxx = a.maxx > b.maxx ? a.maxx : b.maxx;
            this.maxy = a.maxy > b.maxy ? a.maxy : b.maxy },
        setExpand: function(a, b) { this.minx = a.minx - b;
            this.miny = a.miny - b;
            this.maxx = a.maxx + b;
            this.maxy = a.maxy + b },
        toString: function() {
            return "{ x: " + this.minx + " y: " + this.miny + " w: " + (this.maxx - this.minx) +
                " h: " + (this.maxy - this.miny) + " }"
        },
        __class__: Ya
    };
    var Ph = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_Vec2"] = Ph;
    Ph.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Vec2"];
    Ph.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == Qc.zpp_pool ? b = new Qc : (b = Qc.zpp_pool, Qc.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        insert: function(a, b) {
            return this.inlined_insert(a,
                b)
        },
        inlined_insert: function(a, b) { var c;
            null == Qc.zpp_pool ? c = new Qc : (c = Qc.zpp_pool, Qc.zpp_pool = c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++; return c },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = Qc.zpp_pool;
            Qc.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        erase: function(a) { return this.inlined_erase(a) },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = Qc.zpp_pool;
            Qc.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        iterator_at: function(a) {
            for (var b = this.head; 0 <
                a-- && null != b;) b = b.next;
            return b
        },
        __class__: Ph
    };
    var Y = function() {};
    g["zpp_nape.geom.ZPP_Collide"] = Y;
    Y.__name__ = ["zpp_nape", "geom", "ZPP_Collide"];
    Y.contactCollide = function(a, b, c, d) {
        if (b.type == h.id_ShapeType_POLYGON)
            if (a.type == h.id_ShapeType_POLYGON) {
                for (var e = !0, f = -1.0E100, g = -1, i = null, j = null, k = a.polygon.edges.head; null != k;) {
                    for (var n = k.elt, m = 1.0E100, o = b.polygon.gverts.next; null != o;) { var p = o,
                            p = n.gnormx * p.x + n.gnormy * p.y;
                        p < m && (m = p); if (m - n.gprojection <= f) break;
                        o = o.next } m -= n.gprojection;
                    if (0 <= m) { e = !1; break } m >
                        f && (f = m, i = n, g = 1);
                    k = k.next
                }
                if (e) {
                    for (k = b.polygon.edges.head; null != k;) { n = k.elt;
                        m = 1.0E100; for (o = a.polygon.gverts.next; null != o;) { p = o;
                            p = n.gnormx * p.x + n.gnormy * p.y;
                            p < m && (m = p); if (m - n.gprojection <= f) break;
                            o = o.next } m -= n.gprojection; if (0 <= m) { e = !1; break } m > f && (f = m, j = n, g = 2);
                        k = k.next }
                    if (e) {
                        1 == g ? (a = b.polygon, b = i, j = 1) : (a = a.polygon, b = j, j = -1);
                        i = null;
                        e = 1.0E100;
                        for (f = a.edges.head; null != f;) k = f.elt, n = b.gnormx * k.gnormx + b.gnormy * k.gnormy, n < e && (e = n, i = k), f = f.next;
                        var f = e = 0,
                            e = i.gp0.x,
                            f = i.gp0.y,
                            n = k = 0,
                            k = i.gp1.x,
                            n = i.gp1.y,
                            o = m =
                            0,
                            m = k - e,
                            o = n - f,
                            r = b.gnormy * e - b.gnormx * f,
                            p = b.gnormy * k - b.gnormx * n,
                            s = 1 / (p - r),
                            r = (-b.tp1 - r) * s;
                        r > u.epsilon && (e += m * r, f += o * r);
                        p = (-b.tp0 - p) * s;
                        p < -u.epsilon && (k += m * p, n += o * p);
                        o = m = 0;
                        o = j;
                        m = b.gnormx * o;
                        o *= b.gnormy;
                        c.lnormx = b.lnormx;
                        c.lnormy = b.lnormy;
                        c.lproj = b.lprojection;
                        c.radius = 0;
                        c.rev = d != (-1 == j);
                        c.ptype = c.rev ? 1 : 0;
                        p = e * b.gnormx + f * b.gnormy - b.gprojection;
                        j = k * b.gnormx + n * b.gnormy - b.gprojection;
                        if (0 < p && 0 < j) return !1;
                        d && (m = -m, o = -o);
                        d = c.injectContact(e - 0.5 * b.gnormx * p, f - 0.5 * b.gnormy * p, m, o, p, c.rev ? 1 : 0, 0 < p);
                        e -= 1 * a.body.posx;
                        f -= 1 * a.body.posy;
                        d.inner.lr1x = e * a.body.axisy + f * a.body.axisx;
                        d.inner.lr1y = f * a.body.axisy - e * a.body.axisx;
                        d = c.injectContact(k - 0.5 * b.gnormx * j, n - 0.5 * b.gnormy * j, m, o, j, c.rev ? 0 : 1, 0 < j);
                        k -= 1 * a.body.posx;
                        n -= 1 * a.body.posy;
                        d.inner.lr1x = k * a.body.axisy + n * a.body.axisx;
                        d.inner.lr1y = n * a.body.axisy - k * a.body.axisx;
                        1 == g ? (c.__ref_edge1 = b, c.__ref_edge2 = i) : (c.__ref_edge2 = b, c.__ref_edge1 = i);
                        return !0
                    }
                }
            } else {
                j = -1.0E100;
                i = !0;
                e = g = null;
                f = b.polygon.gverts.next;
                for (k = b.polygon.edges.head; null != k;) {
                    n = k.elt;
                    m = n.gnormx * a.circle.worldCOMx +
                        n.gnormy * a.circle.worldCOMy - n.gprojection - a.circle.radius;
                    if (0 < m) { i = !1; break } m > j && (j = m, g = n, e = f);
                    f = f.next;
                    k = k.next
                }
                if (i) {
                    i = e;
                    e = null == e.next ? b.polygon.gverts.next : e.next;
                    f = a.circle.worldCOMy * g.gnormx - a.circle.worldCOMx * g.gnormy;
                    if (f <= i.y * g.gnormx - i.x * g.gnormy) return j = a.circle.radius, f = e = 0, e = i.x - a.circle.worldCOMx, f = i.y - a.circle.worldCOMy, k = e * e + f * f, k > j * j ? j = null : k < u.epsilon * u.epsilon ? j = c.injectContact(a.circle.worldCOMx, a.circle.worldCOMy, 1, 0, -j, 0, null) : (k = 1 / Math.sqrt(k), n = k < u.epsilon ? 1.0E100 : 1 / k, m =
                        0.5 + (a.circle.radius - 0.5 * j) * k, j = d ? c.injectContact(a.circle.worldCOMx + e * m, a.circle.worldCOMy + f * m, -e * k, -f * k, n - j, 0, null) : c.injectContact(a.circle.worldCOMx + e * m, a.circle.worldCOMy + f * m, e * k, f * k, n - j, 0, null)), null != j && (e = j.inner, c.ptype = 2, k = f = 0, f = i.x - b.polygon.body.posx, k = i.y - b.polygon.body.posy, c.__ref_edge1 = g, c.__ref_vertex = -1, d ? (e.lr1x = f * b.polygon.body.axisy + k * b.polygon.body.axisx, e.lr1y = k * b.polygon.body.axisy - f * b.polygon.body.axisx, e.lr2x = a.circle.localCOMx, e.lr2y = a.circle.localCOMy) : (e.lr2x = f * b.polygon.body.axisy +
                        k * b.polygon.body.axisx, e.lr2y = k * b.polygon.body.axisy - f * b.polygon.body.axisx, e.lr1x = a.circle.localCOMx, e.lr1y = a.circle.localCOMy), c.radius = a.circle.radius), null != j;
                    if (f >= e.y * g.gnormx - e.x * g.gnormy) return i = a.circle.radius, f = j = 0, j = e.x - a.circle.worldCOMx, f = e.y - a.circle.worldCOMy, k = j * j + f * f, k > i * i ? i = null : k < u.epsilon * u.epsilon ? i = c.injectContact(a.circle.worldCOMx, a.circle.worldCOMy, 1, 0, -i, 0, null) : (k = 1 / Math.sqrt(k), n = k < u.epsilon ? 1.0E100 : 1 / k, m = 0.5 + (a.circle.radius - 0.5 * i) * k, i = d ? c.injectContact(a.circle.worldCOMx +
                        j * m, a.circle.worldCOMy + f * m, -j * k, -f * k, n - i, 0, null) : c.injectContact(a.circle.worldCOMx + j * m, a.circle.worldCOMy + f * m, j * k, f * k, n - i, 0, null)), null != i && (j = i.inner, c.ptype = 2, k = f = 0, f = e.x - b.polygon.body.posx, k = e.y - b.polygon.body.posy, c.__ref_edge1 = g, c.__ref_vertex = 1, d ? (j.lr1x = f * b.polygon.body.axisy + k * b.polygon.body.axisx, j.lr1y = k * b.polygon.body.axisy - f * b.polygon.body.axisx, j.lr2x = a.circle.localCOMx, j.lr2y = a.circle.localCOMy) : (j.lr2x = f * b.polygon.body.axisy + k * b.polygon.body.axisx, j.lr2y = k * b.polygon.body.axisy - f *
                        b.polygon.body.axisx, j.lr1x = a.circle.localCOMx, j.lr1y = a.circle.localCOMy), c.radius = a.circle.radius), null != i;
                    i = b = 0;
                    i = a.circle.radius + 0.5 * j;
                    b = g.gnormx * i;
                    i *= g.gnormy;
                    f = e = 0;
                    e = a.circle.worldCOMx - b;
                    f = a.circle.worldCOMy - i;
                    b = d ? c.injectContact(e, f, g.gnormx, g.gnormy, j, 0, null) : c.injectContact(e, f, -g.gnormx, -g.gnormy, j, 0, null);
                    c.ptype = d ? 0 : 1;
                    c.lnormx = g.lnormx;
                    c.lnormy = g.lnormy;
                    c.rev = !d;
                    c.lproj = g.lprojection;
                    c.radius = a.circle.radius;
                    b.inner.lr1x = a.circle.localCOMx;
                    b.inner.lr1y = a.circle.localCOMy;
                    c.__ref_edge1 =
                        g;
                    c.__ref_vertex = 0;
                    return !0
                }
            }
        else if (g = a.circle.radius + b.circle.radius, j = i = 0, i = b.circle.worldCOMx - a.circle.worldCOMx, j = b.circle.worldCOMy - a.circle.worldCOMy, e = i * i + j * j, e > g * g ? g = null : e < u.epsilon * u.epsilon ? g = c.injectContact(a.circle.worldCOMx, a.circle.worldCOMy, 1, 0, -g, 0, null) : (e = 1 / Math.sqrt(e), f = e < u.epsilon ? 1.0E100 : 1 / e, k = 0.5 + (a.circle.radius - 0.5 * g) * e, g = d ? c.injectContact(a.circle.worldCOMx + i * k, a.circle.worldCOMy + j * k, -i * e, -j * e, f - g, 0, null) : c.injectContact(a.circle.worldCOMx + i * k, a.circle.worldCOMy + j * k, i *
                e, j * e, f - g, 0, null)), null != g) return g = g.inner, d ? (g.lr1x = b.circle.localCOMx, g.lr1y = b.circle.localCOMy, g.lr2x = a.circle.localCOMx, g.lr2y = a.circle.localCOMy) : (g.lr1x = a.circle.localCOMx, g.lr1y = a.circle.localCOMy, g.lr2x = b.circle.localCOMx, g.lr2y = b.circle.localCOMy), c.radius = a.circle.radius + b.circle.radius, c.ptype = 2, !0;
        return !1
    };
    Y.testCollide_safe = function(a, b) { if (b.type == h.id_ShapeType_CIRCLE) var c = a,
            a = b,
            b = c; return Y.testCollide(a, b) };
    Y.testCollide = function(a, b) {
        if (b.type == h.id_ShapeType_POLYGON) {
            if (a.type ==
                h.id_ShapeType_POLYGON) { for (var c = !0, d = a.polygon.edges.head; null != d;) { for (var e = d.elt, f = 1.0E100, g = b.polygon.gverts.next; null != g;) { var i = g,
                            i = e.gnormx * i.x + e.gnormy * i.y;
                        i < f && (f = i);
                        g = g.next } f -= e.gprojection; if (0 < f) { c = !1; break } d = d.next } if (c) { for (d = b.polygon.edges.head; null != d;) { e = d.elt;
                        f = 1.0E100; for (g = a.polygon.gverts.next; null != g;) i = g, i = e.gnormx * i.x + e.gnormy * i.y, i < f && (f = i), g = g.next;
                        f -= e.gprojection; if (0 < f) { c = !1; break } d = d.next } return c } } else {
                d = c = null;
                e = !0;
                f = -1.0E100;
                g = b.polygon.gverts.next;
                for (i = b.polygon.edges.head; null !=
                    i;) { var j = i.elt,
                        k = j.gnormx * a.circle.worldCOMx + j.gnormy * a.circle.worldCOMy - j.gprojection - a.circle.radius; if (0 < k) { e = !1; break } k > f && (f = k, c = j, d = g);
                    g = g.next;
                    i = i.next }
                if (e) {
                    e = d;
                    d = null == d.next ? b.polygon.gverts.next : d.next;
                    f = a.circle.worldCOMy * c.gnormx - a.circle.worldCOMx * c.gnormy;
                    if (f <= e.y * c.gnormx - e.x * c.gnormy) return c = a.circle.radius, f = d = 0, d = e.x - a.circle.worldCOMx, f = e.y - a.circle.worldCOMy, d * d + f * f <= c * c;
                    return f >= d.y * c.gnormx - d.x * c.gnormy ? (c = a.circle.radius, f = e = 0, e = d.x - a.circle.worldCOMx, f = d.y - a.circle.worldCOMy,
                        e * e + f * f <= c * c) : !0
                }
            }
            return !1
        }
        c = a.circle.radius + b.circle.radius;
        e = d = 0;
        d = b.circle.worldCOMx - a.circle.worldCOMx;
        e = b.circle.worldCOMy - a.circle.worldCOMy;
        return d * d + e * e <= c * c
    };
    Y.flowCollide = function(a, b, c) {
        if (b.type == h.id_ShapeType_POLYGON) {
            if (a.type == h.id_ShapeType_POLYGON) {
                for (var d = [], e = [], f = !0, g = !0, i = a.polygon.edges.head; null != i;) {
                    for (var j = i.elt, k = 1.0E100, n = 0, m = b.polygon.gverts.next; null != m;) { var o = m,
                            p = j.gnormx * o.x + j.gnormy * o.y;
                        p < k && (k = p);
                        p >= j.gprojection + u.epsilon && (e[n] = !0, g = !1);
                        n++;
                        m = m.next } k -= j.gprojection;
                    if (0 < k) { f = !1; break } i = i.next
                }
                if (g) return b.polygon.validate_worldCOM(), c.overlap = b.polygon.area, c.centroidx = b.polygon.worldCOMx, c.centroidy = b.polygon.worldCOMy, null, !0;
                if (f) {
                    for (var g = !0, r = b.polygon.edges.head; null != r;) { for (var s = r.elt, t = 1.0E100, q = 0, y = a.polygon.gverts.next; null != y;) { var x = y,
                                B = s.gnormx * x.x + s.gnormy * x.y;
                            B < t && (t = B);
                            B >= s.gprojection + u.epsilon && (d[q] = !0, g = !1);
                            q++;
                            y = y.next } t -= s.gprojection; if (0 < t) { f = !1; break } r = r.next }
                    if (g) return a.polygon.validate_worldCOM(), c.overlap = a.polygon.area, c.centroidx =
                        a.polygon.worldCOMx, c.centroidy = a.polygon.worldCOMy, null, !0;
                    if (f) {
                        for (; null != Y.flowpoly.head;) { var A = Y.flowpoly.pop_unsafe(); if (!A._inuse) { var z = A;
                                null != z.outer && (z.outer.zpp_inner = null, z.outer = null);
                                z._isimmutable = null;
                                z._validate = null;
                                z._invalidate = null;
                                z.next = Ha.zpp_pool;
                                Ha.zpp_pool = z } }
                        for (var w = null, D = !1, E = a.polygon.gverts.next, G = 0, C = b.polygon.gverts.next, H = 0, M = 0, N = b.polygon.edgeCnt; M < N;) { var J = M++; if (e[J]) C = C.next;
                            else { H = J; break } }
                        if (null == C) {
                            for (var C = b.polygon.gverts.next, D = !0, O = 0, P = a.polygon.edgeCnt; O <
                                P;) { var Q = O++; if (d[Q]) E = E.next;
                                else { G = Q; break } } null == E ? E = a.polygon.gverts.next : (Y.flowpoly.add(E), w = Y.flowpoly.head.elt)
                        } else Y.flowpoly.add(C), w = Y.flowpoly.head.elt;
                        var K = 1;
                        if (null == Y.flowpoly.head) {
                            for (var U = !0, T = a.polygon.gverts.next, I = T, S = T.next; null != S;) {
                                for (var L = S, R = 2, $ = b.polygon.gverts.next, Z = $, aa = $.next; null != aa;) {
                                    var V = aa,
                                        ba = 0;
                                    (function() {
                                        var a = 0,
                                            b = 0,
                                            a = I.x - Z.x,
                                            b = I.y - Z.y,
                                            c = 0,
                                            d = 0,
                                            c = L.x - I.x,
                                            d = L.y - I.y,
                                            e = 0,
                                            f = 0,
                                            e = V.x - Z.x,
                                            f = V.y - Z.y,
                                            h = d * e - c * f;
                                        h * h > u.epsilon * u.epsilon ? (h = 1 / h, e = (f * a - e * b) * h, e > u.epsilon &&
                                            e < 1 - u.epsilon ? (a = (d * a - c * b) * h, a > u.epsilon && a < 1 - u.epsilon ? (ba = e, a = !0) : a = !1) : a = !1) : a = !1;
                                        return a
                                    })(this) && ba < R && (R = ba, C = $);
                                    $ = aa;
                                    Z = V;
                                    aa = aa.next
                                }
                                var fa = aa = b.polygon.gverts.next,
                                    da = 0;
                                (function() { var a = 0,
                                        b = 0,
                                        a = I.x - Z.x,
                                        b = I.y - Z.y,
                                        c = 0,
                                        d = 0,
                                        c = L.x - I.x,
                                        d = L.y - I.y,
                                        e = 0,
                                        f = 0,
                                        e = fa.x - Z.x,
                                        f = fa.y - Z.y,
                                        h = d * e - c * f;
                                    h * h > u.epsilon * u.epsilon ? (h = 1 / h, e = (f * a - e * b) * h, e > u.epsilon && e < 1 - u.epsilon ? (a = (d * a - c * b) * h, a > u.epsilon && a < 1 - u.epsilon ? (da = e, a = !0) : a = !1) : a = !1) : a = !1; return a })(this) && da < R && (R = da, C = $);
                                if (2 != R) {
                                    var ia = 0,
                                        ga = 0,
                                        oa = R,
                                        ia = I.x +
                                        (L.x - I.x) * oa,
                                        ga = I.y + (L.y - I.y) * oa,
                                        w = Ha.get(ia, ga, null);
                                    Y.flowpoly.add(w);
                                    D = !0;
                                    E = T;
                                    U = !1;
                                    break
                                }
                                T = S;
                                I = L;
                                S = S.next
                            }
                            if (U) {
                                for (var ka = S = a.polygon.gverts.next, F = 2, ma = b.polygon.gverts.next, ea = ma, na = ma.next; null != na;) {
                                    var ua = na,
                                        ca = 0;
                                    (function() { var a = 0,
                                            b = 0,
                                            a = I.x - ea.x,
                                            b = I.y - ea.y,
                                            c = 0,
                                            d = 0,
                                            c = ka.x - I.x,
                                            d = ka.y - I.y,
                                            e = 0,
                                            f = 0,
                                            e = ua.x - ea.x,
                                            f = ua.y - ea.y,
                                            h = d * e - c * f;
                                        h * h > u.epsilon * u.epsilon ? (h = 1 / h, e = (f * a - e * b) * h, e > u.epsilon && e < 1 - u.epsilon ? (a = (d * a - c * b) * h, a > u.epsilon && a < 1 - u.epsilon ? (ca = e, a = !0) : a = !1) : a = !1) : a = !1; return a })(this) &&
                                    ca < F && (F = ca, C = ma);
                                    ma = na;
                                    ea = ua;
                                    na = na.next
                                }
                                var ja = na = b.polygon.gverts.next,
                                    ya = 0;
                                (function() { var a = 0,
                                        b = 0,
                                        a = I.x - ea.x,
                                        b = I.y - ea.y,
                                        c = 0,
                                        d = 0,
                                        c = ka.x - I.x,
                                        d = ka.y - I.y,
                                        e = 0,
                                        f = 0,
                                        e = ja.x - ea.x,
                                        f = ja.y - ea.y,
                                        h = d * e - c * f;
                                    h * h > u.epsilon * u.epsilon ? (h = 1 / h, e = (f * a - e * b) * h, e > u.epsilon && e < 1 - u.epsilon ? (a = (d * a - c * b) * h, a > u.epsilon && a < 1 - u.epsilon ? (ya = e, a = !0) : a = !1) : a = !1) : a = !1; return a })(this) && ya < F && (F = ya, C = ma);
                                if (2 != F) { var ha = 0,
                                        ra = 0,
                                        xa = F,
                                        ha = I.x + (ka.x - I.x) * xa,
                                        ra = I.y + (ka.y - I.y) * xa,
                                        w = Ha.get(ha, ra, null);
                                    Y.flowpoly.add(w);
                                    D = !0;
                                    E = T }
                            }
                            K = 2
                        }
                        for (;;)
                            if (D)
                                if (E =
                                    E.next, G++, null == E && (E = a.polygon.gverts.next, G = 0), d[G]) {
                                    var ta = Y.flowpoly.head.elt,
                                        sa = E,
                                        la = C,
                                        Aa = C.next;
                                    null == Aa && (Aa = b.polygon.gverts.next);
                                    var va = -1,
                                        wa = null,
                                        Ia = 0,
                                        Ga = 0,
                                        Da = Aa,
                                        X = Aa;
                                    do {
                                        var Ja = X,
                                            Ka = 0;
                                        if (function() { var a = 0,
                                                    b = 0,
                                                    a = la.x - ta.x,
                                                    b = la.y - ta.y,
                                                    c = 0,
                                                    d = 0,
                                                    c = Ja.x - la.x,
                                                    d = Ja.y - la.y,
                                                    e = 0,
                                                    f = 0,
                                                    e = sa.x - ta.x,
                                                    f = sa.y - ta.y,
                                                    h = d * e - c * f;
                                                h * h > u.epsilon * u.epsilon ? (h = 1 / h, e = (f * a - e * b) * h, e > u.epsilon && e < 1 - u.epsilon ? (a = (d * a - c * b) * h, a > u.epsilon && a < 1 - u.epsilon ? (Ka = e, a = !0) : a = !1) : a = !1) : a = !1; return a }(this) && Ka >= va)
                                            if (wa = C, Ia = H, ++Ga ==
                                                K) { va = Ka;
                                                X = Da; break } else va = Ka;
                                        la = Ja;
                                        C = X;
                                        H++;
                                        H >= b.polygon.edgeCnt && (H = 0);
                                        X = X.next;
                                        null == X && (X = b.polygon.gverts.next)
                                    } while (0);
                                    for (; X != Da;) {
                                        var Ta = X,
                                            Ca = 0;
                                        if (function() { var a = 0,
                                                    b = 0,
                                                    a = la.x - ta.x,
                                                    b = la.y - ta.y,
                                                    c = 0,
                                                    d = 0,
                                                    c = Ta.x - la.x,
                                                    d = Ta.y - la.y,
                                                    e = 0,
                                                    f = 0,
                                                    e = sa.x - ta.x,
                                                    f = sa.y - ta.y,
                                                    h = d * e - c * f;
                                                h * h > u.epsilon * u.epsilon ? (h = 1 / h, e = (f * a - e * b) * h, e > u.epsilon && e < 1 - u.epsilon ? (a = (d * a - c * b) * h, a > u.epsilon && a < 1 - u.epsilon ? (Ca = e, a = !0) : a = !1) : a = !1) : a = !1; return a }(this) && Ca >= va)
                                            if (wa = C, Ia = H, ++Ga == K) { va = Ca;
                                                X = Da; break } else va = Ca;
                                        la = Ta;
                                        C =
                                            X;
                                        H++;
                                        H >= b.polygon.edgeCnt && (H = 0);
                                        X = X.next;
                                        null == X && (X = b.polygon.gverts.next)
                                    }
                                    if (null == wa) break;
                                    var Ua = wa,
                                        jb = wa.next;
                                    null == jb && (jb = b.polygon.gverts.next);
                                    var Va = jb,
                                        Wa = 0,
                                        Oa = 0,
                                        Xa = va,
                                        Wa = Ua.x + (Va.x - Ua.x) * Xa,
                                        Oa = Ua.y + (Va.y - Ua.y) * Xa;
                                    if (null != w && Rc.vec_dsq(Wa, Oa, w.x, w.y) < u.epsilon) break;
                                    Y.flowpoly.add(Ha.get(Wa, Oa, null));
                                    null == w && (w = Y.flowpoly.head.elt);
                                    C = wa;
                                    H = Ia;
                                    D = !D;
                                    K = 2
                                } else { var Za = E; if (null != w && Rc.vec_dsq(Za.x, Za.y, w.x, w.y) < u.epsilon) break;
                                    Y.flowpoly.add(Za);
                                    null == w && (w = Y.flowpoly.head.elt);
                                    K = 1 }
                        else if (C =
                            C.next, H++, null == C && (C = b.polygon.gverts.next, H = 0), e[H]) {
                            var Ea = Y.flowpoly.head.elt,
                                Ma = C,
                                W = E,
                                $a = E.next;
                            null == $a && ($a = a.polygon.gverts.next);
                            var ab = -1,
                                Ya = null,
                                bb = 0,
                                Qa = 0,
                                qa = $a,
                                za = $a;
                            do {
                                var Sa = za,
                                    fb = 0;
                                if (function() { var a = 0,
                                            b = 0,
                                            a = W.x - Ea.x,
                                            b = W.y - Ea.y,
                                            c = 0,
                                            d = 0,
                                            c = Sa.x - W.x,
                                            d = Sa.y - W.y,
                                            e = 0,
                                            f = 0,
                                            e = Ma.x - Ea.x,
                                            f = Ma.y - Ea.y,
                                            h = d * e - c * f;
                                        h * h > u.epsilon * u.epsilon ? (h = 1 / h, e = (f * a - e * b) * h, e > u.epsilon && e < 1 - u.epsilon ? (a = (d * a - c * b) * h, a > u.epsilon && a < 1 - u.epsilon ? (fb = e, a = !0) : a = !1) : a = !1) : a = !1; return a }(this) && fb >= ab)
                                    if (Ya = E, bb = G, ++Qa ==
                                        K) { ab = fb;
                                        za = qa; break } else ab = fb;
                                W = Sa;
                                E = za;
                                G++;
                                G >= a.polygon.edgeCnt && (G = 0);
                                za = za.next;
                                null == za && (za = a.polygon.gverts.next)
                            } while (0);
                            for (; za != qa;) {
                                var bn = za,
                                    pa = 0;
                                if (function() { var a = 0,
                                            b = 0,
                                            a = W.x - Ea.x,
                                            b = W.y - Ea.y,
                                            c = 0,
                                            d = 0,
                                            c = bn.x - W.x,
                                            d = bn.y - W.y,
                                            e = 0,
                                            f = 0,
                                            e = Ma.x - Ea.x,
                                            f = Ma.y - Ea.y,
                                            h = d * e - c * f;
                                        h * h > u.epsilon * u.epsilon ? (h = 1 / h, e = (f * a - e * b) * h, e > u.epsilon && e < 1 - u.epsilon ? (a = (d * a - c * b) * h, a > u.epsilon && a < 1 - u.epsilon ? (pa = e, a = !0) : a = !1) : a = !1) : a = !1; return a }(this) && pa >= ab)
                                    if (Ya = E, bb = G, ++Qa == K) { ab = pa;
                                        za = qa; break } else ab = pa;
                                W = bn;
                                E = za;
                                G++;
                                G >= a.polygon.edgeCnt && (G = 0);
                                za = za.next;
                                null == za && (za = a.polygon.gverts.next)
                            }
                            if (null == Ya) break;
                            var Pa = Ya,
                                lb = Ya.next;
                            null == lb && (lb = a.polygon.gverts.next);
                            var mb = lb,
                                nb = 0,
                                gb = 0,
                                qb = ab,
                                nb = Pa.x + (mb.x - Pa.x) * qb,
                                gb = Pa.y + (mb.y - Pa.y) * qb;
                            if (null != w && Rc.vec_dsq(nb, gb, w.x, w.y) < u.epsilon) break;
                            Y.flowpoly.add(Ha.get(nb, gb, null));
                            null == w && (w = Y.flowpoly.head.elt);
                            E = Ya;
                            G = bb;
                            D = !D;
                            K = 2
                        } else { var cb = C; if (null != w && Rc.vec_dsq(cb.x, cb.y, w.x, w.y) < u.epsilon) break;
                            Y.flowpoly.add(cb);
                            null == w && (w = Y.flowpoly.head.elt);
                            K = 1 }
                        if (null !=
                            Y.flowpoly.head && null != Y.flowpoly.head.next && null != Y.flowpoly.head.next.next) {
                            for (var Fa = 0, La = 0, Na = 0, Fa = Na = La = 0, Ba = Y.flowpoly.head, hb = Ba.elt, Ba = Ba.next, vc = Ba.elt, Ba = Ba.next; null != Ba;) var kb = Ba.elt,
                                Fa = Fa + vc.x * (kb.y - hb.y),
                                sb = kb.y * vc.x - kb.x * vc.y,
                                La = La + (vc.x + kb.x) * sb,
                                Na = Na + (vc.y + kb.y) * sb,
                                hb = vc,
                                vc = kb,
                                Ba = Ba.next;
                            var Ba = Y.flowpoly.head,
                                ib = Ba.elt,
                                Fa = Fa + vc.x * (ib.y - hb.y),
                                ub = ib.y * vc.x - ib.x * vc.y,
                                La = La + (vc.x + ib.x) * ub,
                                Na = Na + (vc.y + ib.y) * ub,
                                hb = vc,
                                vc = ib,
                                Ba = Ba.next,
                                db = Ba.elt,
                                Fa = Fa + vc.x * (db.y - hb.y),
                                Kb = db.y * vc.x - db.x *
                                vc.y,
                                La = La + (vc.x + db.x) * Kb,
                                Na = Na + (vc.y + db.y) * Kb,
                                Fa = 0.5 * Fa,
                                Mb = 1 / (6 * Fa),
                                La = La * Mb,
                                Na = Na * Mb;
                            c.overlap = -Fa;
                            c.centroidx = La;
                            c.centroidy = Na;
                            null;
                            return !0
                        }
                    }
                }
                return !1
            }
            for (var Ib = [], Rb = !0, vb = null, Db = null, Xb = -1.0E100, Yb = !0, Lb = b.polygon.gverts.next, $b = 0, Fb = b.polygon.edges.head; null != Fb;) {
                var zb = Fb.elt,
                    Ab = zb.gnormx * a.circle.worldCOMx + zb.gnormy * a.circle.worldCOMy;
                if (Ab > zb.gprojection + a.circle.radius) { Yb = !1; break } else Ab + a.circle.radius > zb.gprojection + u.epsilon && (Rb = !1, Ib[$b] = !0);
                Ab -= zb.gprojection + a.circle.radius;
                Ab > Xb && (Xb = Ab, vb = zb, Db = Lb);
                Lb = Lb.next;
                $b++;
                Fb = Fb.next
            }
            if (Yb) {
                if (Rb) return c.overlap = a.circle.area, c.centroidx = a.circle.worldCOMx, c.centroidy = a.circle.worldCOMy, null, !0;
                var Gb = Db,
                    Cb;
                Cb = null == Db.next ? b.polygon.gverts.next : Db.next;
                var dc = a.circle.worldCOMy * vb.gnormx - a.circle.worldCOMx * vb.gnormy;
                if (dc <= Gb.y * vb.gnormx - Gb.x * vb.gnormy ? function() { var b = a.circle.radius,
                            c = 0,
                            d = 0,
                            c = Gb.x - a.circle.worldCOMx,
                            d = Gb.y - a.circle.worldCOMy; return c * c + d * d <= b * b }(this) : dc >= Cb.y * vb.gnormx - Cb.x * vb.gnormy ? function() {
                        var b =
                            a.circle.radius,
                            c = 0,
                            d = 0,
                            c = Cb.x - a.circle.worldCOMx,
                            d = Cb.y - a.circle.worldCOMy;
                        return c * c + d * d <= b * b
                    }(this) : 1) {
                    for (var Jb = [], Zb = 0, lc = !0, Ra = null, rb = 0, Hb = b.polygon.gverts.next; null != Hb;) { var tc = Hb,
                            Jc = Rc.vec_dsq(tc.x, tc.y, a.circle.worldCOMx, a.circle.worldCOMy);
                        (Jb[Zb] = Jc <= a.circle.radius * a.circle.radius) ? (rb = Zb, Ra = Hb) : lc = !1;
                        Zb++;
                        Hb = Hb.next }
                    if (lc) return b.polygon.validate_worldCOM(), c.overlap = b.polygon.area, c.centroidx = b.polygon.worldCOMx, c.centroidy = b.polygon.worldCOMy, null, !0;
                    for (; null != Y.flowpoly.head;) {
                        var uc =
                            Y.flowpoly.pop_unsafe();
                        if (!uc._inuse) { var wb = uc;
                            null != wb.outer && (wb.outer.zpp_inner = null, wb.outer = null);
                            wb._isimmutable = null;
                            wb._validate = null;
                            wb._invalidate = null;
                            wb.next = Ha.zpp_pool;
                            Ha.zpp_pool = wb }
                    }
                    Y.flowsegs.clear();
                    var kd = null,
                        ob = 1;
                    null == Ra ? (Ra = b.polygon.gverts.next, ob = 2) : Y.flowpoly.add(kd = Ra);
                    for (; 0 != ob;)
                        if (1 == ob)
                            if (Ra = Ra.next, null == Ra && (Ra = b.polygon.gverts.next), rb++, rb >= b.polygon.edgeCnt && (rb = 0), Jb[rb]) { if (Rc.vec_dsq(kd.x, kd.y, Ra.x, Ra.y) < u.epsilon) break;
                                Y.flowpoly.add(Ra) } else {
                                var yb = Y.flowpoly.head.elt,
                                    Ub = Ra,
                                    Vb = 0,
                                    Wb = 0,
                                    Vb = Ub.x - yb.x,
                                    Wb = Ub.y - yb.y,
                                    ac = 0,
                                    cc = 0,
                                    ac = yb.x - a.circle.worldCOMx,
                                    cc = yb.y - a.circle.worldCOMy,
                                    Pb = Vb * Vb + Wb * Wb,
                                    ec = 2 * (ac * Vb + cc * Wb),
                                    Hc = Math.sqrt(ec * ec - 4 * Pb * (ac * ac + cc * cc - a.circle.radius * a.circle.radius)),
                                    Pb = 1 / (2 * Pb),
                                    Ic = (-ec - Hc) * Pb,
                                    sc = 0,
                                    wc = 0,
                                    Nc = Ic < u.epsilon ? (-ec + Hc) * Pb : Ic,
                                    sc = yb.x + (Ub.x - yb.x) * Nc,
                                    wc = yb.y + (Ub.y - yb.y) * Nc;
                                if (Rc.vec_dsq(kd.x, kd.y, sc, wc) < u.epsilon) break;
                                Y.flowpoly.add(Ha.get(sc, wc, null));
                                ob = 2
                            }
                    else if (2 == ob) {
                        var jc = Ra.next;
                        null == jc && (jc = b.polygon.gverts.next);
                        var eb = Ra,
                            ob = 0,
                            Eb = jc,
                            ld =
                            jc;
                        do {
                            var tb = ld,
                                kc = rb + 1;
                            kc == b.polygon.edgeCnt && (kc = 0);
                            if (Ib[rb])
                                if (Jb[kc]) {
                                    var mc = 0,
                                        nc = 0,
                                        mc = tb.x - eb.x,
                                        nc = tb.y - eb.y,
                                        oc = 0,
                                        pc = 0,
                                        oc = eb.x - a.circle.worldCOMx,
                                        pc = eb.y - a.circle.worldCOMy,
                                        fc = mc * mc + nc * nc,
                                        rc = 2 * (oc * mc + pc * nc),
                                        dd = Math.sqrt(rc * rc - 4 * fc * (oc * oc + pc * pc - a.circle.radius * a.circle.radius)),
                                        fc = 1 / (2 * fc),
                                        gd = (-rc - dd) * fc,
                                        Kc = 0,
                                        Oc = 0,
                                        id = gd < u.epsilon ? (-rc + dd) * fc : gd,
                                        Kc = eb.x + (tb.x - eb.x) * id,
                                        Oc = eb.y + (tb.y - eb.y) * id;
                                    if (Rc.vec_dsq(kd.x, kd.y, Kc, Oc) < u.epsilon) { ob = 0;
                                        ld = Eb; break }
                                    var jd = Ha.get(Kc, Oc, null);
                                    Y.flowsegs.add(Y.flowpoly.head.elt);
                                    Y.flowsegs.add(jd);
                                    Y.flowpoly.add(jd);
                                    ob = 1;
                                    ld = Eb;
                                    break
                                } else {
                                    var Ac = 0,
                                        Bc = 0,
                                        Qc, Cc = 0,
                                        Dc = 0,
                                        Cc = tb.x - eb.x,
                                        Dc = tb.y - eb.y,
                                        Ec = 0,
                                        Fc = 0,
                                        Ec = eb.x - a.circle.worldCOMx,
                                        Fc = eb.y - a.circle.worldCOMy,
                                        bc = Cc * Cc + Dc * Dc,
                                        qc = 2 * (Ec * Cc + Fc * Dc),
                                        Qb = qc * qc - 4 * bc * (Ec * Ec + Fc * Fc - a.circle.radius * a.circle.radius);
                                    Qb * Qb < u.epsilon ? (Ac = 0 > Qb ? 10 : Bc = -qc / (2 * bc), Qc = !1) : (Qb = Math.sqrt(Qb), bc = 1 / (2 * bc), Ac = (-qc - Qb) * bc, Bc = (-qc + Qb) * bc, Qc = !0);
                                    if (Ac < 1 - u.epsilon && Bc > u.epsilon) {
                                        var Xc = 0,
                                            Yc = 0,
                                            sd = Ac,
                                            Xc = eb.x + (tb.x - eb.x) * sd,
                                            Yc = eb.y + (tb.y - eb.y) * sd;
                                        if (null != kd && Rc.vec_dsq(kd.x,
                                                kd.y, Xc, Yc) < u.epsilon) { ob = 0;
                                            ld = Eb; break }
                                        var td = Ha.get(Xc, Yc, null);
                                        null != Y.flowpoly.head && (Y.flowsegs.add(Y.flowpoly.head.elt), Y.flowsegs.add(td));
                                        Y.flowpoly.add(td);
                                        null == kd && (kd = Y.flowpoly.head.elt);
                                        if (Qc) { var ud = 0,
                                                vd = 0,
                                                yd = Bc,
                                                ud = eb.x + (tb.x - eb.x) * yd,
                                                vd = eb.y + (tb.y - eb.y) * yd;
                                            Y.flowpoly.add(Ha.get(ud, vd, null)) }
                                    }
                                } eb = tb;
                            Ra = ld;
                            rb = kc;
                            ld = ld.next;
                            null == ld && (ld = b.polygon.gverts.next)
                        } while (0);
                        for (; ld != Eb;) {
                            var xb = ld,
                                Mc = rb + 1;
                            Mc == b.polygon.edgeCnt && (Mc = 0);
                            if (Ib[rb])
                                if (Jb[Mc]) {
                                    var Pc = 0,
                                        Tc = 0,
                                        Pc = xb.x - eb.x,
                                        Tc = xb.y -
                                        eb.y,
                                        Uc = 0,
                                        Vc = 0,
                                        Uc = eb.x - a.circle.worldCOMx,
                                        Vc = eb.y - a.circle.worldCOMy,
                                        Gc = Pc * Pc + Tc * Tc,
                                        Wc = 2 * (Uc * Pc + Vc * Tc),
                                        Cd = Math.sqrt(Wc * Wc - 4 * Gc * (Uc * Uc + Vc * Vc - a.circle.radius * a.circle.radius)),
                                        Gc = 1 / (2 * Gc),
                                        Dd = (-Wc - Cd) * Gc,
                                        pd = 0,
                                        qd = 0,
                                        Fd = Dd < u.epsilon ? (-Wc + Cd) * Gc : Dd,
                                        pd = eb.x + (xb.x - eb.x) * Fd,
                                        qd = eb.y + (xb.y - eb.y) * Fd;
                                    if (Rc.vec_dsq(kd.x, kd.y, pd, qd) < u.epsilon) { ob = 0;
                                        ld = Eb; break }
                                    var Gd = Ha.get(pd, qd, null);
                                    Y.flowsegs.add(Y.flowpoly.head.elt);
                                    Y.flowsegs.add(Gd);
                                    Y.flowpoly.add(Gd);
                                    ob = 1;
                                    ld = Eb;
                                    break
                                } else {
                                    var Zc = 0,
                                        $c = 0,
                                        rd, ad = 0,
                                        cd = 0,
                                        ad = xb.x -
                                        eb.x,
                                        cd = xb.y - eb.y,
                                        fd = 0,
                                        hd = 0,
                                        fd = eb.x - a.circle.worldCOMx,
                                        hd = eb.y - a.circle.worldCOMy,
                                        xc = ad * ad + cd * cd,
                                        Lc = 2 * (fd * ad + hd * cd),
                                        ic = Lc * Lc - 4 * xc * (fd * fd + hd * hd - a.circle.radius * a.circle.radius);
                                    ic * ic < u.epsilon ? (Zc = 0 > ic ? 10 : $c = -Lc / (2 * xc), rd = !1) : (ic = Math.sqrt(ic), xc = 1 / (2 * xc), Zc = (-Lc - ic) * xc, $c = (-Lc + ic) * xc, rd = !0);
                                    if (Zc < 1 - u.epsilon && $c > u.epsilon) {
                                        var Ad = 0,
                                            Bd = 0,
                                            Rd = Zc,
                                            Ad = eb.x + (xb.x - eb.x) * Rd,
                                            Bd = eb.y + (xb.y - eb.y) * Rd;
                                        if (null != kd && Rc.vec_dsq(kd.x, kd.y, Ad, Bd) < u.epsilon) { ob = 0;
                                            ld = Eb; break }
                                        var Td = Ha.get(Ad, Bd, null);
                                        null != Y.flowpoly.head &&
                                            (Y.flowsegs.add(Y.flowpoly.head.elt), Y.flowsegs.add(Td));
                                        Y.flowpoly.add(Td);
                                        null == kd && (kd = Y.flowpoly.head.elt);
                                        if (rd) { var Vd = 0,
                                                Wd = 0,
                                                Xd = $c,
                                                Vd = eb.x + (xb.x - eb.x) * Xd,
                                                Wd = eb.y + (xb.y - eb.y) * Xd;
                                            Y.flowpoly.add(Ha.get(Vd, Wd, null)) }
                                    }
                                } eb = xb;
                            Ra = ld;
                            rb = Mc;
                            ld = ld.next;
                            null == ld && (ld = b.polygon.gverts.next)
                        }
                    }
                    if (null == Y.flowpoly.head) return !1;
                    if (null == Y.flowpoly.head.next) {
                        for (var Yd = !0, xd = b.polygon.edges.head; null != xd;) {
                            var Kd = xd.elt;
                            if (Kd.gnormx * a.circle.worldCOMx + Kd.gnormy * a.circle.worldCOMy > Kd.gprojection) { Yd = !1; break } xd =
                                xd.next
                        }
                        return Yd ? (c.overlap = a.circle.area, c.centroidx = a.circle.worldCOMx, c.centroidy = a.circle.worldCOMy, null, !0) : !1
                    }
                    var yc = 0,
                        zc = 0,
                        Sc = 0;
                    if (null != Y.flowpoly.head.next.next) {
                        for (var Bb = 0, Nb = 0, Ob = 0, Bb = Ob = Nb = 0, re = Y.flowpoly.head, od = re.elt, re = re.next, md = re.elt, re = re.next; null != re;) var bd = re.elt,
                            Bb = Bb + md.x * (bd.y - od.y),
                            de = bd.y * md.x - bd.x * md.y,
                            Nb = Nb + (md.x + bd.x) * de,
                            Ob = Ob + (md.y + bd.y) * de,
                            od = md,
                            md = bd,
                            re = re.next;
                        var re = Y.flowpoly.head,
                            ed = re.elt,
                            Bb = Bb + md.x * (ed.y - od.y),
                            ee = ed.y * md.x - ed.x * md.y,
                            Nb = Nb + (md.x + ed.x) * ee,
                            Ob = Ob + (md.y + ed.y) * ee,
                            od = md,
                            md = ed,
                            re = re.next,
                            wd = re.elt,
                            Bb = Bb + md.x * (wd.y - od.y),
                            fe = wd.y * md.x - wd.x * md.y,
                            Nb = Nb + (md.x + wd.x) * fe,
                            Ob = Ob + (md.y + wd.y) * fe,
                            Bb = 0.5 * Bb,
                            ge = 1 / (6 * Bb),
                            Nb = Nb * ge,
                            Ob = Ob * ge,
                            he = -Bb,
                            yc = yc + Nb * he,
                            zc = zc + Ob * he,
                            Sc = Sc - Bb
                    } else Y.flowsegs.add(Y.flowpoly.head.elt), Y.flowsegs.add(Y.flowpoly.head.next.elt);
                    for (; null != Y.flowsegs.head;) var Id = Y.flowsegs.pop_unsafe(),
                        Jd = Y.flowsegs.pop_unsafe(),
                        ie = 0,
                        je = 0,
                        ie = Jd.x - Id.x,
                        je = Jd.y - Id.y,
                        gc = 0,
                        hc = 0,
                        gc = ie,
                        hc = je,
                        ke = 1 / Math.sqrt(gc * gc + hc * hc),
                        gc = gc * ke,
                        hc = hc * ke,
                        Ae = gc,
                        gc = -hc,
                        hc = Ae,
                        Sb = 0,
                        Tb = 0,
                        Sb = Id.x + Jd.x,
                        Tb = Id.y + Jd.y,
                        Sb = 0.5 * Sb,
                        Tb = 0.5 * Tb,
                        Sb = Sb - 1 * a.circle.worldCOMx,
                        Tb = Tb - 1 * a.circle.worldCOMy,
                        Zd = 0,
                        le = 0,
                        me = gc * Sb + hc * Tb,
                        Ld = me / a.circle.radius,
                        zd = Math.sqrt(1 - Ld * Ld),
                        ne = Math.acos(Ld),
                        Zd = a.circle.radius * (a.circle.radius * ne - me * zd),
                        le = 0.6666666666666666 * a.circle.radius * zd * zd * zd / (ne - Ld * zd),
                        Sb = a.circle.worldCOMx,
                        Tb = a.circle.worldCOMy,
                        oe = le,
                        Sb = Sb + gc * oe,
                        Tb = Tb + hc * oe,
                        pe = Zd,
                        yc = yc + Sb * pe,
                        zc = zc + Tb * pe,
                        Sc = Sc + Zd;
                    var qe = 1 / Sc,
                        yc = yc * qe,
                        zc = zc * qe;
                    c.overlap = Sc;
                    c.centroidx = yc;
                    c.centroidy = zc;
                    null;
                    return !0
                }
            }
            return !1
        }
        var nd = a.circle,
            Nd = b.circle,
            Md = 0,
            Od = 0,
            Md = Nd.worldCOMx - nd.worldCOMx,
            Od = Nd.worldCOMy - nd.worldCOMy,
            se = nd.radius + Nd.radius,
            $d = Md * Md + Od * Od;
        if ($d > se * se) return !1;
        if ($d < u.epsilon * u.epsilon) nd.radius < Nd.radius ? (c.overlap = nd.area, c.centroidx = nd.worldCOMx, c.centroidy = nd.worldCOMy) : (c.overlap = Nd.area, c.centroidx = Nd.worldCOMx, c.centroidy = Nd.worldCOMy);
        else {
            var Pd = Math.sqrt($d),
                te = 1 / Pd,
                Qd = 0.5 * (Pd - (Nd.radius * Nd.radius - nd.radius * nd.radius) * te);
            if (Qd <= -nd.radius) c.overlap = nd.area, c.centroidx = nd.worldCOMx,
                c.centroidy = nd.worldCOMy;
            else {
                var ae = Pd - Qd;
                if (ae <= -Nd.radius) c.overlap = Nd.area, c.centroidx = Nd.worldCOMx, c.centroidy = Nd.worldCOMy;
                else {
                    var be = 0,
                        ue = 0,
                        ce = 0,
                        ve = 0,
                        Sd = Qd / nd.radius,
                        Ed = Math.sqrt(1 - Sd * Sd),
                        we = Math.acos(Sd),
                        be = nd.radius * (nd.radius * we - Qd * Ed),
                        ue = 0.6666666666666666 * nd.radius * Ed * Ed * Ed / (we - Sd * Ed),
                        Ud = ae / Nd.radius,
                        Hd = Math.sqrt(1 - Ud * Ud),
                        xe = Math.acos(Ud),
                        ce = Nd.radius * (Nd.radius * xe - ae * Hd),
                        ve = 0.6666666666666666 * Nd.radius * Hd * Hd * Hd / (xe - Ud * Hd),
                        ye = be + ce,
                        ze = (ue * be + (Pd - ve) * ce) / ye * te;
                    c.overlap = ye;
                    c.centroidx =
                        nd.worldCOMx + Md * ze;
                    c.centroidy = nd.worldCOMy + Od * ze
                }
            }
        }
        null;
        return !0
    };
    var Vb = function() { this.toiDistance = 0;
        this.next = null;
        this.inner = !1;
        this.normal = this.shape = this.ray = null };
    g["zpp_nape.geom.ZPP_ConvexRayResult"] = Vb;
    Vb.__name__ = ["zpp_nape", "geom", "ZPP_ConvexRayResult"];
    Vb.getRay = function(a, b, c, d) {
        var e;
        null == Vb.rayPool ? (Vb.internal = !0, e = new Mm, e.zpp_inner = new Vb, e.zpp_inner.ray = e, Vb.internal = !1) : (e = Vb.rayPool.ray, Vb.rayPool = Vb.rayPool.next, e.zpp_inner.next = null);
        var f = e.zpp_inner;
        f.normal = a;
        a.zpp_inner._immutable = !0;
        f.toiDistance = b;
        f.inner = c;
        f.shape = d;
        return e
    };
    Vb.prototype = { __class__: Vb };
    var Xn = function() { this.next = null;
        this.x = this.y = 0 };
    g["zpp_nape.geom.ZPP_GeomVert"] = Xn;
    Xn.__name__ = ["zpp_nape", "geom", "ZPP_GeomVert"];
    Xn.prototype = { __class__: Xn };
    var Yn = function() { this.outer = this.vertices = null };
    g["zpp_nape.geom.ZPP_GeomPoly"] = Yn;
    Yn.__name__ = ["zpp_nape", "geom", "ZPP_GeomPoly"];
    Yn.prototype = { __class__: Yn };
    var Zn = function() { this.a = this.b = this.c = this.d = this.tx = this.ty = 0 };
    g["zpp_nape.geom.ZPP_Mat23"] = Zn;
    Zn.__name__ = ["zpp_nape", "geom", "ZPP_Mat23"];
    Zn.prototype = { __class__: Zn };
    var $n = function() { this.x = null;
        this.m = this.n = 0 };
    g["zpp_nape.geom.ZPP_MatMN"] = $n;
    $n.__name__ = ["zpp_nape", "geom", "ZPP_MatMN"];
    $n.prototype = { __class__: $n };
    var Km = function() {
        this.zip_dir = !1;
        this.maxdist = this.originx = this.originy = this.dirx = this.diry = this.idirx = this.idiry = this.normalx = this.normaly = this.absnormalx = this.absnormaly = 0;
        this.origin = this.direction = null;
        this.origin = aa.get(null, null, null);
        this.origin.zpp_inner._invalidate = m(this, this.origin_invalidate);
        this.direction = aa.get(null, null, null);
        this.direction.zpp_inner._invalidate = m(this, this.direction_invalidate);
        this.diry = this.dirx = this.originy = this.originx = 0;
        this.zip_dir = !1
    };
    g["zpp_nape.geom.ZPP_Ray"] = Km;
    Km.__name__ = ["zpp_nape", "geom", "ZPP_Ray"];
    Km.prototype = {
        origin_invalidate: function(a) { this.originx = a.x;
            this.originy = a.y },
        direction_invalidate: function(a) { this.dirx = a.x;
            this.diry = a.y;
            this.zip_dir = !0 },
        validate_dir: function() {
            if (this.zip_dir) {
                this.zip_dir = !1;
                var a = 1 / Math.sqrt(this.dirx * this.dirx + this.diry *
                    this.diry);
                this.dirx *= a;
                this.diry *= a;
                this.idirx = 1 / this.dirx;
                this.idiry = 1 / this.diry;
                this.normalx = -this.diry;
                this.normaly = this.dirx;
                a = this.normalx;
                this.absnormalx = 0 > a ? -a : a;
                a = this.normaly;
                this.absnormaly = 0 > a ? -a : a
            }
        },
        rayAABB: function() {
            var a = this.originx,
                b = a,
                c = this.originy,
                d = c;
            this.maxdist >= Math.POSITIVE_INFINITY ? (0 < this.dirx ? b = Math.POSITIVE_INFINITY : 0 > this.dirx && (b = Math.NEGATIVE_INFINITY), 0 < this.diry ? d = Math.POSITIVE_INFINITY : 0 > this.diry && (d = Math.NEGATIVE_INFINITY)) : (b += this.maxdist * this.dirx, d += this.maxdist *
                this.diry);
            if (b < a) var e = a,
                a = b,
                b = e;
            d < c && (e = c, c = d, d = e);
            return Ya.get(a, c, b, d)
        },
        aabbtest: function(a) { var b = this.normalx * (this.originx - 0.5 * (a.minx + a.maxx)) + this.normaly * (this.originy - 0.5 * (a.miny + a.maxy)); return (0 > b ? -b : b) < 0.5 * this.absnormalx * (a.maxx - a.minx) + 0.5 * this.absnormaly * (a.maxy - a.miny) },
        aabbsect: function(a) {
            var b = this.originy >= a.miny && this.originy <= a.maxy;
            if (this.originx >= a.minx && this.originx <= a.maxx && b) return 0;
            b = -1;
            do
                if (!(0 <= this.dirx && this.originx >= a.maxx) && !(0 >= this.dirx && this.originx <= a.minx) &&
                    !(0 <= this.diry && this.originy >= a.maxy) && !(0 >= this.diry && this.originy <= a.miny)) {
                    if (0 < this.dirx) { var c = (a.minx - this.originx) * this.idirx; if (0 <= c && c <= this.maxdist) { var d = this.originy + c * this.diry; if (d >= a.miny && d <= a.maxy) { b = c; break } } } else if (0 > this.dirx && (c = (a.maxx - this.originx) * this.idirx, 0 <= c && c <= this.maxdist && (d = this.originy + c * this.diry, d >= a.miny && d <= a.maxy))) { b = c; break } 0 < this.diry ? (c = (a.miny - this.originy) * this.idiry, 0 <= c && c <= this.maxdist && (d = this.originx + c * this.dirx, d >= a.minx && d <= a.maxx && (b = c))) : 0 > this.diry &&
                        (c = (a.maxy - this.originy) * this.idiry, 0 <= c && c <= this.maxdist && (d = this.originx + c * this.dirx, d >= a.minx && d <= a.maxx && (b = c)))
                } while (0);
            return b
        },
        circlesect2: function(a, b, c) {
            a.zip_worldCOM && null != a.body && (a.zip_worldCOM = !1, a.zip_localCOM && (a.zip_localCOM = !1, a.type == h.id_ShapeType_POLYGON && a.polygon.__validate_localCOM(), null != a.wrap_localCOM && (a.wrap_localCOM.zpp_inner.x = a.localCOMx, a.wrap_localCOM.zpp_inner.y = a.localCOMy)), a.body.validate_axis(), a.worldCOMx = a.body.posx + (a.body.axisy * a.localCOMx - a.body.axisx *
                a.localCOMy), a.worldCOMy = a.body.posy + (a.localCOMx * a.body.axisx + a.localCOMy * a.body.axisy));
            var d = 0,
                e = 0,
                d = this.originx - a.worldCOMx,
                e = this.originy - a.worldCOMy,
                f = this.dirx * this.dirx + this.diry * this.diry,
                g = 2 * (d * this.dirx + e * this.diry),
                d = d * d + e * e - a.radius * a.radius,
                i = g * g - 4 * f * d;
            if (0 == i) {
                if (e = -g / 2 * f, (!b || 0 < d) && 0 < e && e <= this.maxdist) {
                    f = b = 0;
                    b = this.originx;
                    f = this.originy;
                    b += this.dirx * e;
                    f += this.diry * e;
                    b -= 1 * a.worldCOMx;
                    f -= 1 * a.worldCOMy;
                    g = 1 / Math.sqrt(b * b + f * f);
                    b *= g;
                    f *= g;
                    0 >= d && (b = -b, f = -f);
                    a = Vb.getRay(aa.get(b, f, null),
                        e, 0 >= d, a.outer);
                    b = null;
                    for (d = c.zpp_inner.inner.head; null != d && !(a.zpp_inner.toiDistance < d.elt.zpp_inner.toiDistance);) { b = d;
                        d = d.next } c.zpp_inner.inner.inlined_insert(b, a)
                }
            } else {
                i = Math.sqrt(i);
                f = 1 / (2 * f);
                e = (-g - i) * f;
                d = (-g + i) * f;
                if (0 < e && e <= this.maxdist) {
                    g = f = 0;
                    f = this.originx;
                    g = this.originy;
                    f += this.dirx * e;
                    g += this.diry * e;
                    f -= 1 * a.worldCOMx;
                    g -= 1 * a.worldCOMy;
                    i = 1 / Math.sqrt(f * f + g * g);
                    e = Vb.getRay(aa.get(f * i, g * i, null), e, !1, a.outer);
                    f = null;
                    for (g = c.zpp_inner.inner.head; null != g && !(e.zpp_inner.toiDistance < g.elt.zpp_inner.toiDistance);) {
                        f =
                            g;
                        g = g.next
                    }
                    c.zpp_inner.inner.inlined_insert(f, e)
                }
                if (0 < d && d <= this.maxdist && b) { e = b = 0;
                    b = this.originx;
                    e = this.originy;
                    b += this.dirx * d;
                    e += this.diry * d;
                    b -= 1 * a.worldCOMx;
                    e -= 1 * a.worldCOMy;
                    f = 1 / Math.sqrt(b * b + e * e);
                    a = Vb.getRay(aa.get(-(b * f), -(e * f), null), d, !0, a.outer);
                    b = null; for (d = c.zpp_inner.inner.head; null != d && !(a.zpp_inner.toiDistance < d.elt.zpp_inner.toiDistance);) { b = d;
                        d = d.next } c.zpp_inner.inner.inlined_insert(b, a) }
            }
        },
        polysect2: function(a, b, c) {
            for (var d = Math.POSITIVE_INFINITY, e = -1, f = null, h = null, g = a.edges.head,
                    i = a.gverts.next, j = i, i = i.next; null != i;) { var k = i,
                    n = g.elt; if (b || 0 > n.gnormx * this.dirx + n.gnormy * this.diry) { var m = 0,
                        o = 0,
                        m = k.x - j.x,
                        o = k.y - j.y,
                        p = n = 0,
                        n = j.x - this.originx,
                        p = j.y - this.originy,
                        j = o * this.dirx - m * this.diry; if (j * j > u.epsilon && (j = 1 / j, m = (o * n - m * p) * j, 0 < m && m <= this.maxdist && (m < d || m > e))) j *= this.diry * n - this.dirx * p, j > -u.epsilon && j < 1 + u.epsilon && (m < d && (d = m, f = g.elt), m > e && (e = m, h = g.elt)) } g = g.next;
                j = k;
                i = i.next } k = i = a.gverts.next;
            i = g.elt;
            if (b || 0 > i.gnormx * this.dirx + i.gnormy * this.diry)
                if (i = b = 0, b = k.x - j.x, i = k.y - j.y, n = k = 0,
                    k = j.x - this.originx, n = j.y - this.originy, j = i * this.dirx - b * this.diry, j * j > u.epsilon && (j = 1 / j, b = (i * k - b * n) * j, 0 < b && b <= this.maxdist && (b < d || b > e))) j *= this.diry * k - this.dirx * n, j > -u.epsilon && j < 1 + u.epsilon && (b < d && (d = b, f = g.elt), b > e && (e = b, h = g.elt));
            if (null != f) {
                j = g = 0;
                g = f.gnormx;
                j = f.gnormy;
                if (b = 0 < g * this.dirx + j * this.diry) g = -g, j = -j;
                d = Vb.getRay(aa.get(g, j, null), d, b, a.outer);
                g = null;
                for (j = c.zpp_inner.inner.head; null != j && !(d.zpp_inner.toiDistance < j.elt.zpp_inner.toiDistance);) { g = j;
                    j = j.next } c.zpp_inner.inner.inlined_insert(g,
                    d)
            }
            if (null != h && f != h) { d = f = 0;
                f = h.gnormx;
                d = h.gnormy; if (h = 0 < f * this.dirx + d * this.diry) f = -f, d = -d;
                a = Vb.getRay(aa.get(f, d, null), e, h, a.outer);
                e = null; for (h = c.zpp_inner.inner.head; null != h && !(a.zpp_inner.toiDistance < h.elt.zpp_inner.toiDistance);) { e = h;
                    h = h.next } c.zpp_inner.inner.inlined_insert(e, a) }
        },
        __class__: Km
    };
    var Wb = function() {
        this.slipped = this.failed = this.kinematic = !1;
        this.c1 = this.c2 = this.axis = null;
        this.frozen1 = this.frozen2 = !1;
        this.s1 = this.s2 = this.arbiter = null;
        this.toi = 0;
        this.next = null;
        this.c1 = new Ha;
        this.c2 =
            new Ha;
        this.axis = new Ha
    };
    g["zpp_nape.geom.ZPP_ToiEvent"] = Wb;
    Wb.__name__ = ["zpp_nape", "geom", "ZPP_ToiEvent"];
    Wb.prototype = { __class__: Wb };
    var Sc = function() {};
    g["zpp_nape.geom.ZPP_SweepDistance"] = Sc;
    Sc.__name__ = ["zpp_nape", "geom", "ZPP_SweepDistance"];
    Sc.dynamicSweep = function(a, b, c, d, e) {
        null == e && (e = !1);
        var f = a.s1,
            h = a.s2,
            g = f.body,
            i = h.body,
            j = 0,
            k = 0,
            j = i.velx - g.velx,
            k = i.vely - g.vely,
            n = g.angvel;
        0 > n && (n = -n);
        var m = i.angvel;
        0 > m && (m = -m);
        var o = f.sweepCoef * n + h.sweepCoef * m;
        if (!e && !a.kinematic && j * j + k * k < u.dynamicSweepLinearThreshold *
            u.dynamicSweepLinearThreshold && o < u.dynamicSweepAngularThreshold) a.toi = -1, a.failed = !0;
        else {
            for (var p = a.c1, n = a.c2, m = a.axis, r = 0;;) {
                g.sweepIntegrate(c * b);
                g.sweepValidate(f);
                i.sweepIntegrate(c * b);
                i.sweepValidate(h);
                var s = Sc.distance(f, h, p, n, m, null) + d,
                    t = j * m.x + k * m.y;
                if (s < u.distanceThresholdCCD) { if (e) break; var w = 0,
                        q = 0,
                        w = p.x - g.posx,
                        q = p.y - g.posy,
                        y = 0,
                        x = 0,
                        y = n.x - i.posx,
                        x = n.y - i.posy,
                        w = t - g.sweep_angvel * (m.y * w - m.x * q) + i.sweep_angvel * (m.y * y - m.x * x);
                    0 < w && (a.slipped = !0); if (0 >= w || s < 0.5 * u.distanceThresholdCCD) break } t = (o -
                    t) * b;
                if (0 >= t) { c = -1; break } t = s / t;
                1.0E-6 > t && (t = 1.0E-6);
                c += t;
                if (1 <= c) { c = 1;
                    g.sweepIntegrate(c * b);
                    g.sweepValidate(f);
                    i.sweepIntegrate(c * b);
                    i.sweepValidate(h);
                    b = Sc.distance(f, h, p, n, m, null) + d;
                    j = j * m.x + k * m.y; if (b < u.distanceThresholdCCD) { if (e) break;
                        k = e = 0;
                        e = p.x - g.posx;
                        k = p.y - g.posy;
                        d = p = 0;
                        p = n.x - i.posx;
                        d = n.y - i.posy;
                        g = j - g.sweep_angvel * (m.y * e - m.x * k) + i.sweep_angvel * (m.y * p - m.x * d);
                        0 < g && (a.slipped = !0); if (0 >= g || b < 0.5 * u.distanceThresholdCCD) break } c = -1; break }
                if (40 <= ++r) { s > d && (a.failed = !0); break }
            }
            a.toi = c
        }
    };
    Sc.staticSweep =
        function(a, b, c, d) {
            var e = a.s1,
                f = a.s2,
                h = e.body,
                g = 0,
                i = 0,
                g = -h.velx,
                i = -h.vely,
                j = h.sweep_angvel;
            0 > j && (j = -j);
            for (var k = e.sweepCoef * j, j = a.c1, n = a.c2, m = a.axis, o = 0;;) {
                h.sweepIntegrate(c * b);
                h.sweepValidate(e);
                var p = Sc.distance(e, f, j, n, m, null) + d,
                    r = g * m.x + i * m.y;
                if (p < u.distanceThresholdCCD) { var s = 0,
                        t = 0,
                        s = j.x - h.posx,
                        t = j.y - h.posy,
                        s = r - h.sweep_angvel * (m.y * s - m.x * t);
                    0 < s && (a.slipped = !0); if (0 >= s || p < 0.5 * u.distanceThresholdCCD) break } r = (k - r) * b;
                if (0 >= r) { c = -1; break } r = p / r;
                1.0E-6 > r && (r = 1.0E-6);
                c += r;
                if (1 <= c) {
                    c = 1;
                    h.sweepIntegrate(c *
                        b);
                    h.sweepValidate(e);
                    b = Sc.distance(e, f, j, n, m, null) + d;
                    g = g * m.x + i * m.y;
                    if (b < u.distanceThresholdCCD && (d = i = 0, i = j.x - h.posx, d = j.y - h.posy, h = g - h.sweep_angvel * (m.y * i - m.x * d), 0 < h && (a.slipped = !0), 0 >= h || b < 0.5 * u.distanceThresholdCCD)) break;
                    c = -1;
                    break
                }
                if (40 <= ++o) { p > d && (a.failed = !0); break }
            }
            a.toi = c
        };
    Sc.distance = function(a, b, c, d, e, f) {
        null == f && (f = 1.0E100);
        if (a.type == h.id_ShapeType_CIRCLE && b.type == h.id_ShapeType_CIRCLE) {
            var g = a.circle,
                i = b.circle,
                j, k = 0,
                m = 0,
                k = i.worldCOMx - g.worldCOMx,
                m = i.worldCOMy - g.worldCOMy,
                n = Math.sqrt(k *
                    k + m * m);
            j = n - (g.radius + i.radius);
            if (j < f) { if (0 == n) k = 1, m = 0;
                else var o = 1 / n,
                    k = k * o,
                    m = m * o; var p = g.radius;
                c.x = g.worldCOMx + k * p;
                c.y = g.worldCOMy + m * p; var r = -i.radius;
                d.x = i.worldCOMx + k * r;
                d.y = i.worldCOMy + m * r;
                e.x = k;
                e.y = m }
            return j
        }
        var s = !1;
        if (a.type == h.id_ShapeType_CIRCLE && b.type == h.id_ShapeType_POLYGON) var t = a,
            a = b,
            b = t,
            w = c,
            c = d,
            d = w,
            s = !0;
        if (a.type == h.id_ShapeType_POLYGON && b.type == h.id_ShapeType_CIRCLE) {
            for (var q = b.circle, y = -1.0E100, x = null, z = a.polygon.edges.head; null != z;) {
                var B = z.elt,
                    A = B.gnormx * q.worldCOMx + B.gnormy *
                    q.worldCOMy - B.gprojection - q.radius;
                if (A > f) { y = A; break } 0 < A ? A > y && (y = A, x = B) : 0 > y && A > y && (y = A, x = B);
                z = z.next
            }
            if (y < f) {
                var E = x.gp0,
                    D = x.gp1,
                    C = q.worldCOMy * x.gnormx - q.worldCOMx * x.gnormy;
                if (C <= E.y * x.gnormx - E.x * x.gnormy) { var G = 0,
                        H = 0,
                        G = q.worldCOMx - E.x,
                        H = q.worldCOMy - E.y,
                        I = Math.sqrt(G * G + H * H),
                        y = I - q.radius; if (y < f) { if (0 == I) G = 1, H = 0;
                        else var M = 1 / I,
                            G = G * M,
                            H = H * M;
                        c.x = E.x + 0 * G;
                        c.y = E.y + 0 * H; var N = -q.radius;
                        d.x = q.worldCOMx + G * N;
                        d.y = q.worldCOMy + H * N;
                        e.x = G;
                        e.y = H } } else if (C >= D.y * x.gnormx - D.x * x.gnormy) {
                    var J = 0,
                        K = 0,
                        J = q.worldCOMx - D.x,
                        K =
                        q.worldCOMy - D.y,
                        O = Math.sqrt(J * J + K * K),
                        y = O - q.radius;
                    if (y < f) { if (0 == O) J = 1, K = 0;
                        else var P = 1 / O,
                            J = J * P,
                            K = K * P;
                        c.x = D.x + 0 * J;
                        c.y = D.y + 0 * K; var Q = -q.radius;
                        d.x = q.worldCOMx + J * Q;
                        d.y = q.worldCOMy + K * Q;
                        e.x = J;
                        e.y = K }
                } else { var T = -q.radius;
                    d.x = q.worldCOMx + x.gnormx * T;
                    d.y = q.worldCOMy + x.gnormy * T; var U = -y;
                    c.x = d.x + x.gnormx * U;
                    c.y = d.y + x.gnormy * U;
                    e.x = x.gnormx;
                    e.y = x.gnormy }
            }
            s && (e.x = -e.x, e.y = -e.y);
            return y
        }
        for (var Y = a.polygon, S = b.polygon, L = -1.0E100, R = null, Z = null, $ = 0, aa = Y.edges.head; null != aa;) {
            for (var V = aa.elt, ba = 1.0E100, fa = S.gverts.next; null !=
                fa;) { var da = fa,
                    ia = V.gnormx * da.x + V.gnormy * da.y;
                ia < ba && (ba = ia);
                fa = fa.next } ba -= V.gprojection;
            if (ba > f) { L = ba; break } 0 < ba ? ba > L && (L = ba, R = V, $ = 1) : 0 > L && ba > L && (L = ba, R = V, $ = 1);
            aa = aa.next
        }
        if (L < f) {
            for (var ga = S.edges.head; null != ga;) { for (var ea = ga.elt, F = 1.0E100, ka = Y.gverts.next; null != ka;) { var oa = ka,
                        na = ea.gnormx * oa.x + ea.gnormy * oa.y;
                    na < F && (F = na);
                    ka = ka.next } F -= ea.gprojection; if (F > f) { L = F; break } 0 < F ? F > L && (L = F, Z = ea, $ = 2) : 0 > L && F > L && (L = F, Z = ea, $ = 2);
                ga = ga.next }
            if (L < f) {
                var ma, X;
                if (1 == $) ma = S, X = R;
                else {
                    ma = Y;
                    X = Z;
                    var ta = c,
                        c = d,
                        d = ta,
                        s = !s
                }
                for (var la = null, ua = 1.0E100, ca = ma.edges.head; null != ca;) { var za = ca.elt,
                        ya = X.gnormx * za.gnormx + X.gnormy * za.gnormy;
                    ya < ua && (ua = ya, la = za);
                    ca = ca.next } s ? (e.x = -X.gnormx, e.y = -X.gnormy) : (e.x = X.gnormx, e.y = X.gnormy);
                if (0 <= L) {
                    var ja = X.gp0,
                        va = X.gp1,
                        ha = la.gp0,
                        ra = la.gp1,
                        sa = 0,
                        xa = 0,
                        wa = 0,
                        Aa = 0,
                        sa = va.x - ja.x,
                        xa = va.y - ja.y,
                        wa = ra.x - ha.x,
                        Aa = ra.y - ha.y,
                        Ba = 1 / (sa * sa + xa * xa),
                        Ea = 1 / (wa * wa + Aa * Aa),
                        Ia = -(sa * (ja.x - ha.x) + xa * (ja.y - ha.y)) * Ba,
                        Ha = -(sa * (ja.x - ra.x) + xa * (ja.y - ra.y)) * Ba,
                        Ka = -(wa * (ha.x - ja.x) + Aa * (ha.y - ja.y)) * Ea,
                        Da = -(wa * (ha.x - va.x) +
                            Aa * (ha.y - va.y)) * Ea;
                    0 > Ia ? Ia = 0 : 1 < Ia && (Ia = 1);
                    0 > Ha ? Ha = 0 : 1 < Ha && (Ha = 1);
                    0 > Ka ? Ka = 0 : 1 < Ka && (Ka = 1);
                    0 > Da ? Da = 0 : 1 < Da && (Da = 1);
                    var Fa = 0,
                        Ga = 0,
                        Ja = Ia,
                        Fa = ja.x + sa * Ja,
                        Ga = ja.y + xa * Ja,
                        ab = 0,
                        Ca = 0,
                        Ta = Ha,
                        ab = ja.x + sa * Ta,
                        Ca = ja.y + xa * Ta,
                        La = 0,
                        Ua = 0,
                        W = Ka,
                        La = ha.x + wa * W,
                        Ua = ha.y + Aa * W,
                        Ya = 0,
                        Na = 0,
                        jb = Da,
                        Ya = ha.x + wa * jb,
                        Na = ha.y + Aa * jb,
                        Ma = Rc.vec_dsq(Fa, Ga, ha.x, ha.y),
                        Wa = Rc.vec_dsq(ab, Ca, ra.x, ra.y),
                        Oa = Rc.vec_dsq(La, Ua, ja.x, ja.y),
                        Za = Rc.vec_dsq(Ya, Na, va.x, va.y),
                        $a = 0,
                        Va = 0,
                        Ra = null;
                    Ma < Wa ? ($a = Fa, Va = Ga, Ra = ha) : ($a = ab, Va = Ca, Ra = ra, Ma = Wa);
                    var fb = 0,
                        Xa = 0,
                        pa = null;
                    Oa < Za ? (fb = La, Xa = Ua, pa = ja) : (fb = Ya, Xa = Na, pa = va, Oa = Za);
                    Ma < Oa ? (c.x = $a, c.y = Va, d.x = Ra.x, d.y = Ra.y, L = Math.sqrt(Ma)) : (d.x = fb, d.y = Xa, c.x = pa.x, c.y = pa.y, L = Math.sqrt(Oa));
                    if (0 != L) { e.x = d.x - c.x;
                        e.y = d.y - c.y; var bb = 1 / L;
                        e.x *= bb;
                        e.y *= bb;
                        s && (e.x = -e.x, e.y = -e.y) }
                    return L
                }
                var qa = 0,
                    Sa = 0,
                    qa = la.gp0.x,
                    Sa = la.gp0.y,
                    Pa = 0,
                    Qa = 0,
                    Pa = la.gp1.x,
                    Qa = la.gp1.y,
                    kb = 0,
                    lb = 0,
                    kb = Pa - qa,
                    lb = Qa - Sa,
                    ib = X.gnormy * qa - X.gnormx * Sa,
                    nb = X.gnormy * Pa - X.gnormx * Qa,
                    gb = 1 / (nb - ib),
                    hb = (-X.tp1 - ib) * gb;
                hb > u.epsilon && (qa += kb * hb, Sa += lb * hb);
                var mb = (-X.tp0 - nb) * gb;
                mb < -u.epsilon &&
                    (Pa += kb * mb, Qa += lb * mb);
                var cb = qa * X.gnormx + Sa * X.gnormy - X.gprojection,
                    db = Pa * X.gnormx + Qa * X.gnormy - X.gprojection;
                if (cb < db) { d.x = qa;
                    d.y = Sa; var ob = -cb;
                    c.x = d.x + X.gnormx * ob;
                    c.y = d.y + X.gnormy * ob; return cb } d.x = Pa;
                d.y = Qa;
                var qb = -db;
                c.x = d.x + X.gnormx * qb;
                c.y = d.y + X.gnormy * qb;
                return db
            }
        }
        return f
    };
    var Ha = function() { this.length = this.x = this.y = 0;
        this._inuse = this.modified = this.pushmod = !1;
        this.next = null;
        this.weak = !1;
        this._isimmutable = this.outer = null;
        this._immutable = !1;
        this._invalidate = this._validate = null };
    g["zpp_nape.geom.ZPP_Vec2"] =
        Ha;
    Ha.__name__ = ["zpp_nape", "geom", "ZPP_Vec2"];
    Ha.get = function(a, b, c) { null == c && (c = !1); var d;
        null == Ha.zpp_pool ? d = new Ha : (d = Ha.zpp_pool, Ha.zpp_pool = d.next, d.next = null);
        d.weak = !1;
        d._immutable = c;
        d.x = a;
        d.y = b; return d };
    Ha.prototype = {
        validate: function() { null != this._validate && this._validate() },
        invalidate: function() { null != this._invalidate && this._invalidate(this) },
        wrapper: function() {
            if (null == this.outer) {
                this.outer = new aa;
                var a = this.outer.zpp_inner;
                null != a.outer && (a.outer.zpp_inner = null, a.outer = null);
                a._isimmutable =
                    null;
                a._validate = null;
                a._invalidate = null;
                a.next = Ha.zpp_pool;
                Ha.zpp_pool = a;
                this.outer.zpp_inner = this
            }
            return this.outer
        },
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { a._inuse = !0;
            a.next = this.next;
            this.next = a;
            this.modified = !0;
            this.length++; return a },
        insert: function(a, b) { return this.inlined_insert(a, b) },
        inlined_insert: function(a, b) { b._inuse = !0;
            null == a ? (b.next = this.next, this.next = b) : (b.next = a.next, a.next = b);
            this.pushmod = this.modified = !0;
            this.length++; return b },
        erase: function(a) { return this.inlined_erase(a) },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.next, this.next = c = b.next, null == this.next && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            b._inuse = !1;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        reverse: function() { for (var a = this.next, b = null; null != a;) { var c = a.next;
                a.next = b;
                b = this.next = a;
                a = c } this.pushmod = this.modified = !0 },
        iterator_at: function(a) { for (var b = this.next; 0 < a-- && null != b;) b = b.next; return b },
        toString: function() { return "{ x: " + this.x + " y: " + this.y + " }" },
        __class__: Ha
    };
    var ao = function() { this._validate = null;
        this.x = this.y = this.z = 0 };
    g["zpp_nape.geom.ZPP_Vec3"] = ao;
    ao.__name__ = ["zpp_nape", "geom", "ZPP_Vec3"];
    ao.prototype = { validate: function() { null != this._validate && this._validate() }, __class__: ao };
    var Rc = function() {};
    g["zpp_nape.geom.ZPP_VecMath"] = Rc;
    Rc.__name__ = ["zpp_nape", "geom", "ZPP_VecMath"];
    Rc.vec_dsq = function(a, b, c, d) { var e = 0,
            f = 0,
            e = a - c,
            f = b - d; return e * e + f * f };
    var jb = function() {
        this.userData = this.ishape = this.ibody = this.icompound = this.cbsets = this.group = this.cbTypes =
            this.cbSet = this.wrap_cbTypes = null;
        this.id = 0;
        this.outer_i = null;
        this.id = yb.Interactor();
        this.cbsets = new qn;
        this.cbTypes = new zd
    };
    g["zpp_nape.phys.ZPP_Interactor"] = jb;
    jb.__name__ = ["zpp_nape", "phys", "ZPP_Interactor"];
    jb.get = function(a, b) { var c;
        c = a.id < b.id ? a.id : b.id; var d;
        d = a.id < b.id ? b.id : a.id; for (var e = null, f = (a.cbsets.length < b.cbsets.length ? a.cbsets : b.cbsets).head; null != f;) { var h = f.elt; if (h.id == c && h.di == d) { e = h; break } f = f.next } return e };
    jb.int_callback = function(a, b, c) {
        var d = a.int1,
            a = a.int2;
        b.options1.compatible(d.cbTypes) &&
            b.options2.compatible(a.cbTypes) ? (c.int1 = d, c.int2 = a) : (c.int1 = a, c.int2 = d)
    };
    jb.prototype = {
        __iaddedToSpace: function() { null != this.group && this.group.interactors.add(this); for (var a = this.cbTypes.head; null != a;) a.elt.interactors.add(this), a = a.next;
            this.alloc_cbSet() },
        __iremovedFromSpace: function() { null != this.group && this.group.interactors.remove(this); for (var a = this.cbTypes.head; null != a;) a.elt.interactors.remove(this), a = a.next;
            this.dealloc_cbSet() },
        wake: function() {
            if (null != this.ishape) {
                var a = this.ishape.body;
                null != a && null != a.space && a.space.non_inlined_wake(a);
                !0
            } else null != this.ibody ? null != this.ibody.space ? this.ibody.space.non_inlined_wake(this.ibody) : !1 : (null != this.icompound.space && this.icompound.space.wakeCompound(this.icompound), !0)
        },
        setupcbTypes: function() { this.wrap_cbTypes = ee.get(this.cbTypes);
            this.wrap_cbTypes.zpp_inner.adder = m(this, this.wrap_cbTypes_adder);
            this.wrap_cbTypes.zpp_inner.subber = m(this, this.wrap_cbTypes_subber);
            this.wrap_cbTypes.zpp_inner.dontremove = !0 },
        wrap_cbTypes_subber: function(a) {
            a =
                a.zpp_inner;
            if (this.cbTypes.has(a)) { var b;
                b = null != this.ishape ? null == this.ishape.body ? null : this.ishape.body.space : null != this.ibody ? this.ibody.space : this.icompound.space;
                null != b && (this.dealloc_cbSet(), a.interactors.remove(this));
                this.cbTypes.remove(a);
                null != b && (this.alloc_cbSet(), this.wake()) }
        },
        wrap_cbTypes_adder: function(a) { this.insert_cbtype(a.zpp_inner); return !1 },
        insert_cbtype: function(a) {
            if (!this.cbTypes.has(a)) {
                var b;
                b = null != this.ishape ? null == this.ishape.body ? null : this.ishape.body.space : null !=
                    this.ibody ? this.ibody.space : this.icompound.space;
                null != b && (this.dealloc_cbSet(), a.interactors.add(this));
                for (var c = null, d = this.cbTypes.head; null != d && !(a.id < d.elt.id);) { c = d;
                    d = d.next } this.cbTypes.inlined_insert(c, a);
                null != b && (this.alloc_cbSet(), this.wake())
            }
        },
        alloc_cbSet: function() {
            var a;
            a = null != this.ishape ? null == this.ishape.body ? null : this.ishape.body.space : null != this.ibody ? this.ibody.space : this.icompound.space;
            if (null != (this.cbSet = a.cbsets.get(this.cbTypes))) this.cbSet.count++, this.cbSet.interactors.add(this),
                this.cbSet.validate(), a.freshInteractorType(this)
        },
        dealloc_cbSet: function() { var a;
            a = null != this.ishape ? null == this.ishape.body ? null : this.ishape.body.space : null != this.ibody ? this.ibody.space : this.icompound.space;
            null != this.cbSet && (this.cbSet.interactors.remove(this), a.nullInteractorType(this), 0 == --this.cbSet.count && (a.cbsets.remove(this.cbSet), a = this.cbSet, a.free(), a.next = Ca.zpp_pool, Ca.zpp_pool = a), this.cbSet = null) },
        immutable_midstep: function(a) {
            null != this.ibody ? null : null != this.ishape ? this.ishape.__immutable_midstep(a) :
                this.icompound.__imutable_midstep(a)
        },
        lookup_group: function() { for (var a = this; null != a && null == a.group;) a = null != a.ishape ? a.ishape.body : null != a.icompound ? a.icompound.compound : a.ibody.compound; return null == a ? null : a.group },
        __class__: jb
    };
    var Fe = function() {
        this.wrap_localCOM = this.wrap_worldCOM = null;
        this.zip_worldCOM = !1;
        this.worldCOMx = this.worldCOMy = 0;
        this.zip_localCOM = !1;
        this.localCOMx = this.localCOMy = 0;
        this.zip_aabb = !1;
        this.aabb = null;
        this.norotate = !1;
        this.cinertia = this.iinertia = this.sinertia = 0;
        this.zip_inertia = !1;
        this.inertiaMode = this.inertia = 0;
        this.zip_gravMassScale = !1;
        this.gravMassMode = this.gravMassScale = 0;
        this.zip_gravMass = !1;
        this.gravMass = 0;
        this.nomove = !1;
        this.massMode = this.imass = this.smass = this.cmass = 0;
        this.zip_mass = !1;
        this.mass = 0;
        this.zip_axis = !1;
        this.kinvelx = this.kinvely = this.svelx = this.svely = this.angvel = this.torque = this.kinangvel = this.pre_rot = this.rot = this.axisx = this.axisy = 0;
        this.wrap_force = null;
        this.forcex = this.forcey = 0;
        this.wrap_vel = null;
        this.velx = this.vely = 0;
        this.wrap_pos = null;
        this.pre_posx =
            this.pre_posy = this.posx = this.posy = 0;
        this.bullet = this.bulletEnabled = this.disableCCD = !1;
        this.sweepRadius = 0;
        this.sweepFrozen = !1;
        this.sweepTime = this.sweep_angvel = 0;
        this.compound = this.shapes = this.wrap_shapes = this.space = this.arbiters = this.wrap_arbiters = this.constraints = this.component = null;
        this.type = 0;
        this.world = !1;
        this.outer = null;
        jb.call(this);
        this.ibody = this;
        this.bulletEnabled = this.world = !1;
        this.sweep_angvel = this.sweepTime = 0;
        this.disableCCD = this.norotate = this.nomove = !1;
        this.axisx = this.rot = this.posy = this.posx =
            0;
        this.axisy = 1;
        this.torque = this.angvel = this.kinangvel = this.forcey = this.forcex = this.kinvely = this.kinvelx = this.vely = this.velx = this.svely = this.svelx = 0;
        this.pre_rot = this.pre_posy = this.pre_posx = Math.POSITIVE_INFINITY;
        this.worldCOMy = this.worldCOMx = this.localCOMy = this.localCOMx = 0;
        this.zip_aabb = !0;
        this.aabb = Ya.get(0, 0, 0, 0);
        this.aabb._immutable = !0;
        this.aabb._validate = m(this, this.aabb_validate);
        this.massMode = h.id_MassMode_DEFAULT;
        this.gravMassMode = h.id_GravMassMode_DEFAULT;
        this.gravMassScale = 1;
        this.inertiaMode =
            h.id_InertiaMode_DEFAULT;
        this.arbiters = new Qh;
        this.constraints = new hf;
        this.shapes = new Bf;
        this.wrap_shapes = df.get(this.shapes);
        this.wrap_shapes.zpp_inner.adder = m(this, this.shapes_adder);
        this.wrap_shapes.zpp_inner.subber = m(this, this.shapes_subber);
        this.wrap_shapes.zpp_inner._invalidate = m(this, this.shapes_invalidate);
        this.kinematicDelaySleep = !1
    };
    g["zpp_nape.phys.ZPP_Body"] = Fe;
    Fe.__name__ = ["zpp_nape", "phys", "ZPP_Body"];
    Fe.__static = function() {
        var a = fg;
        null == h.BodyType_STATIC && (h.internal = !0, h.BodyType_STATIC =
            new Gb, h.internal = !1);
        var a = new a(h.BodyType_STATIC),
            b = a.zpp_inner;
        b.world = !0;
        b.wrap_shapes.zpp_inner.immutable = !0;
        b.smass = b.imass = b.cmass = b.mass = b.gravMass = 0;
        b.sinertia = b.iinertia = b.cinertia = b.inertia = 0;
        b.cbTypes.clear();
        return a
    };
    Fe.__super__ = jb;
    Fe.prototype = k(jb.prototype, {
        invalidate_type: function() { this.invalidate_mass();
            this.invalidate_inertia() },
        invalidate_shapes: function() { this.zip_worldCOM = this.zip_localCOM = this.zip_aabb = !0;
            this.invalidate_mass();
            this.invalidate_inertia() },
        atRest: function(a) {
            if (this.type !=
                h.id_BodyType_DYNAMIC) return this.component.sleeping;
            var b = u.linearSleepThreshold,
                b = b * b;
            if (this.velx * this.velx + this.vely * this.vely > b) a = !1;
            else if (Rc.vec_dsq(this.posx, this.posy, this.pre_posx, this.pre_posy) > 0.25 * b * a * a) a = !1;
            else { var c = b = 0,
                    b = this.aabb.maxx - this.aabb.minx,
                    c = this.aabb.maxy - this.aabb.miny,
                    b = b * b + c * c,
                    c = u.angularSleepThreshold,
                    c = c * c; if (4 * this.angvel * this.angvel * b > c) a = !1;
                else var d = this.rot - this.pre_rot,
                    a = d * d * b > c * a * a ? !1 : !0 } a || (this.component.waket = this.space.stamp);
            return this.component.waket +
                u.sleepDelay < this.space.stamp
        },
        refreshArbiters: function() { for (var a = this.arbiters.head; null != a;) a.elt.invalidated = !0, a = a.next },
        sweepIntegrate: function(a) { var b = a - this.sweepTime;
            0 != b && (this.sweepTime = a, this.posx += this.velx * b, this.posy += this.vely * b, 0 != this.angvel && this.delta_rot(this.sweep_angvel * b)) },
        sweepValidate: function(a) {
            if (a.type == h.id_ShapeType_CIRCLE) a.worldCOMx = this.posx + (this.axisy * a.localCOMx - this.axisx * a.localCOMy), a.worldCOMy = this.posy + (a.localCOMx * this.axisx + a.localCOMy * this.axisy);
            else {
                for (var a =
                        a.polygon, b = a.lverts.next, c = a.gverts.next; null != c;) { var d = c,
                        e = b,
                        b = b.next;
                    d.x = this.posx + (this.axisy * e.x - this.axisx * e.y);
                    d.y = this.posy + (e.x * this.axisx + e.y * this.axisy);
                    c = c.next } c = a.edges.head;
                b = d = a.gverts.next;
                for (d = d.next; null != d;) { var e = d,
                        f = c.elt,
                        c = c.next;
                    f.gnormx = this.axisy * f.lnormx - this.axisx * f.lnormy;
                    f.gnormy = f.lnormx * this.axisx + f.lnormy * this.axisy;
                    f.gprojection = this.posx * f.gnormx + this.posy * f.gnormy + f.lprojection;
                    f.tp0 = b.y * f.gnormx - b.x * f.gnormy;
                    f.tp1 = e.y * f.gnormx - e.x * f.gnormy;
                    b = e;
                    d = d.next } a = a.gverts.next;
                c = c.elt;
                c.gnormx = this.axisy * c.lnormx - this.axisx * c.lnormy;
                c.gnormy = c.lnormx * this.axisx + c.lnormy * this.axisy;
                c.gprojection = this.posx * c.gnormx + this.posy * c.gnormy + c.lprojection;
                c.tp0 = b.y * c.gnormx - b.x * c.gnormy;
                c.tp1 = a.y * c.gnormx - a.x * c.gnormy
            }
        },
        invalidate_pos: function() { for (var a = this.shapes.head; null != a;) { var b = a.elt;
                b.type == h.id_ShapeType_POLYGON && (b.polygon.invalidate_gverts(), b.polygon.invalidate_gaxi());
                b.invalidate_worldCOM();
                a = a.next } this.zip_worldCOM = !0 },
        pos_invalidate: function(a) {
            this.immutable_midstep("Body::position");
            this.posx == a.x && this.posy == a.y || (this.posx = a.x, this.posy = a.y, this.invalidate_pos(), this.wake())
        },
        pos_validate: function() { this.wrap_pos.zpp_inner.x = this.posx;
            this.wrap_pos.zpp_inner.y = this.posy },
        vel_invalidate: function(a) { this.velx = a.x;
            this.vely = a.y;
            this.wake() },
        vel_validate: function() { this.wrap_vel.zpp_inner.x = this.velx;
            this.wrap_vel.zpp_inner.y = this.vely },
        force_invalidate: function(a) { this.forcex = a.x;
            this.forcey = a.y;
            this.wake() },
        force_validate: function() {
            this.wrap_force.zpp_inner.x = this.forcex;
            this.wrap_force.zpp_inner.y =
                this.forcey
        },
        setupPosition: function() { this.wrap_pos = aa.get(this.posx, this.posy, null);
            this.wrap_pos.zpp_inner._inuse = !0;
            this.world ? this.wrap_pos.zpp_inner._immutable = !0 : (this.wrap_pos.zpp_inner._invalidate = m(this, this.pos_invalidate), this.wrap_pos.zpp_inner._validate = m(this, this.pos_validate)) },
        setupVelocity: function() {
            this.wrap_vel = aa.get(this.velx, this.vely, null);
            this.wrap_vel.zpp_inner._inuse = !0;
            this.world ? this.wrap_vel.zpp_inner._immutable = !0 : (this.wrap_vel.zpp_inner._invalidate = m(this, this.vel_invalidate),
                this.wrap_vel.zpp_inner._validate = m(this, this.vel_validate))
        },
        setupForce: function() { this.wrap_force = aa.get(this.forcex, this.forcey, null);
            this.wrap_force.zpp_inner._inuse = !0;
            this.world ? this.wrap_force.zpp_inner._immutable = !0 : (this.wrap_force.zpp_inner._invalidate = m(this, this.force_invalidate), this.wrap_force.zpp_inner._validate = m(this, this.force_validate)) },
        invalidate_rot: function() {
            this.zip_axis = !0;
            for (var a = this.shapes.head; null != a;) {
                var b = a.elt;
                b.type == h.id_ShapeType_POLYGON && (b.polygon.invalidate_gverts(),
                    b.polygon.invalidate_gaxi());
                b.invalidate_worldCOM();
                a = a.next
            }
            this.zip_worldCOM = !0
        },
        validate_axis: function() { this.zip_axis && (this.zip_axis = !1, this.axisx = Math.sin(this.rot), this.axisy = Math.cos(this.rot), null) },
        delta_rot: function(a) { this.rot += a; if (1.0E-4 < a * a) this.axisx = Math.sin(this.rot), this.axisy = Math.cos(this.rot), null;
            else { var b = a * a,
                    c = 1 - 0.5 * b,
                    b = 1 - b * b / 8,
                    d = (c * this.axisx + a * this.axisy) * b;
                this.axisy = (c * this.axisy - a * this.axisx) * b;
                this.axisx = d } },
        invalidate_mass: function() { this.zip_mass = !0;
            this.invalidate_gravMass() },
        validate_mass: function() { if (this.zip_mass) { this.zip_mass = !1; if (this.massMode == h.id_MassMode_DEFAULT) { this.cmass = 0; for (var a = this.shapes.head; null != a;) { var b = a.elt;
                        b.refmaterial.density = b.material.density;
                        b.validate_area_inertia();
                        this.cmass += b.area * b.material.density;
                        a = a.next } } this.type == h.id_BodyType_DYNAMIC && !this.nomove ? (this.mass = this.cmass, this.imass = this.smass = 1 / this.mass) : (this.mass = Math.POSITIVE_INFINITY, this.imass = this.smass = 0) } },
        invalidate_gravMass: function() {
            this.gravMassMode != h.id_GravMassMode_FIXED &&
                (this.zip_gravMass = !0);
            this.gravMassMode != h.id_GravMassMode_SCALED && (this.zip_gravMassScale = !0);
            this.wake()
        },
        validate_gravMass: function() { this.zip_gravMass && (this.zip_gravMass = !1, this.validate_mass(), this.gravMassMode == h.id_GravMassMode_DEFAULT ? (this.validate_mass(), this.gravMass = this.cmass) : this.gravMassMode == h.id_GravMassMode_SCALED && (this.validate_mass(), this.gravMass = this.cmass * this.gravMassScale)) },
        invalidate_gravMassScale: function() {
            this.gravMassMode != h.id_GravMassMode_SCALED ? this.zip_gravMassScale = !0 : this.invalidate_gravMass()
        },
        validate_gravMassScale: function() { this.zip_gravMassScale && (this.zip_gravMassScale = !1, this.gravMassMode == h.id_GravMassMode_DEFAULT ? this.gravMassScale = 1 : this.gravMassMode == h.id_GravMassMode_FIXED && (this.validate_mass(), this.gravMassScale = this.gravMass / this.cmass)) },
        invalidate_inertia: function() { this.zip_inertia = !0;
            this.wake() },
        validate_inertia: function() {
            if (this.zip_inertia) {
                this.zip_inertia = !1;
                if (this.inertiaMode == h.id_InertiaMode_DEFAULT) {
                    this.cinertia = 0;
                    for (var a = this.shapes.head; null !=
                        a;) { var b = a.elt;
                        b.refmaterial.density = b.material.density;
                        b.validate_area_inertia();
                        this.cinertia += b.inertia * b.area * b.material.density;
                        a = a.next }
                }
                this.type == h.id_BodyType_DYNAMIC && !this.norotate ? (this.inertia = this.cinertia, this.sinertia = this.iinertia = 1 / this.inertia) : (this.inertia = Math.POSITIVE_INFINITY, this.sinertia = this.iinertia = 0)
            }
        },
        validate_aabb: function() {
            if (this.zip_aabb) {
                this.zip_aabb = !1;
                this.aabb.minx = Math.POSITIVE_INFINITY;
                this.aabb.miny = Math.POSITIVE_INFINITY;
                this.aabb.maxx = Math.NEGATIVE_INFINITY;
                this.aabb.maxy = Math.NEGATIVE_INFINITY;
                for (var a = this.shapes.head; null != a;) { var b = a.elt;
                    b.zip_aabb && null != b.body && (b.zip_aabb = !1, b.type == h.id_ShapeType_CIRCLE ? b.circle.__validate_aabb() : b.polygon.__validate_aabb());
                    this.aabb.combine(b.aabb);
                    a = a.next }
            }
        },
        invalidate_localCOM: function() { this.zip_worldCOM = this.zip_localCOM = !0 },
        validate_localCOM: function() {
            if (this.zip_localCOM) {
                this.zip_localCOM = !1;
                for (var a = 0, b = 0, c = 0, d = this.shapes.head; null != d;) {
                    var e = d.elt;
                    e.zip_localCOM && (e.zip_localCOM = !1, e.type == h.id_ShapeType_POLYGON &&
                        e.polygon.__validate_localCOM(), null != e.wrap_localCOM && (e.wrap_localCOM.zpp_inner.x = e.localCOMx, e.wrap_localCOM.zpp_inner.y = e.localCOMy));
                    e.validate_area_inertia();
                    var f = e.area * e.material.density,
                        a = a + e.localCOMx * f,
                        b = b + e.localCOMy * f,
                        c = c + e.area * e.material.density,
                        d = d.next
                }
                0 != c && (d = 1 / c, this.localCOMx = a * d, this.localCOMy = b * d);
                null != this.wrap_localCOM && (this.wrap_localCOM.zpp_inner.x = this.localCOMx, this.wrap_localCOM.zpp_inner.y = this.localCOMy);
                this.zip_mass && this.massMode == h.id_MassMode_DEFAULT && (this.zip_mass = !1, this.cmass = c, this.type == h.id_BodyType_DYNAMIC ? (this.mass = this.cmass, this.imass = this.smass = 1 / this.mass) : (this.mass = Math.POSITIVE_INFINITY, this.imass = this.smass = 0))
            }
        },
        validate_worldCOM: function() {
            this.zip_worldCOM && (this.zip_worldCOM = !1, this.validate_localCOM(), this.zip_axis && (this.zip_axis = !1, this.axisx = Math.sin(this.rot), this.axisy = Math.cos(this.rot), null), this.worldCOMx = this.posx + (this.axisy * this.localCOMx - this.axisx * this.localCOMy), this.worldCOMy = this.posy + (this.localCOMx * this.axisx + this.localCOMy *
                this.axisy), null != this.wrap_worldCOM && (this.wrap_worldCOM.zpp_inner.x = this.worldCOMx, this.wrap_worldCOM.zpp_inner.y = this.worldCOMy))
        },
        aabb_validate: function() { this.validate_aabb() },
        shapes_adder: function(a) {
            return a.zpp_inner.body != this ? (null != a.zpp_inner.body && a.zpp_inner.body.wrap_shapes.remove(a), a.zpp_inner.body = this, a.zpp_inner.addedToBody(), null != this.space && this.space.added_shape(a.zpp_inner, null), a.zpp_inner.type == h.id_ShapeType_POLYGON && (a.zpp_inner.polygon.invalidate_gaxi(), a.zpp_inner.polygon.invalidate_gverts()),
                !0) : !1
        },
        shapes_subber: function(a) { null != this.space && this.space.removed_shape(a.zpp_inner);
            a.zpp_inner.body = null;
            a.zpp_inner.removedFromBody() },
        shapes_invalidate: function() { this.invalidate_shapes() },
        addedToSpace: function() { null == Bc.zpp_pool ? this.component = new Bc : (this.component = Bc.zpp_pool, Bc.zpp_pool = this.component.next, this.component.next = null);
            null;
            this.component.isBody = !0;
            this.component.body = this;
            this.__iaddedToSpace() },
        removedFromSpace: function() {
            for (; null != this.arbiters.head;) {
                var a = this.arbiters.pop_unsafe();
                a.cleared = !0;
                a.b2 == this && a.b1.arbiters.inlined_try_remove(a);
                a.b1 == this && a.b2.arbiters.inlined_try_remove(a);
                null != a.pair && (a.pair.arb = null, a.pair = null);
                a.active = !1;
                this.space.f_arbiters.modified = !0
            }
            a = this.component;
            a.body = null;
            a.constraint = null;
            null;
            a.next = Bc.zpp_pool;
            Bc.zpp_pool = a;
            this.component = null;
            this.__iremovedFromSpace()
        },
        __class__: Fe
    });
    var rn = function() { this.compound = this.space = null;
        this.depth = 0;
        this.outer = this.bodies = this.constraints = this.compounds = this.wrap_constraints = null };
    g["zpp_nape.phys.ZPP_Compound"] =
        rn;
    rn.__name__ = ["zpp_nape", "phys", "ZPP_Compound"];
    rn.__super__ = jb;
    rn.prototype = k(jb.prototype, { __imutable_midstep: function() {}, addedToSpace: function() { this.__iaddedToSpace() }, removedFromSpace: function() { this.__iremovedFromSpace() }, __class__: rn });
    var cf = function() { this.wrap_gravity = null;
        this.viscosity = this.density = this.gravityx = this.gravityy = 0;
        this.next = this.outer = this.shapes = null;
        this.shapes = new Bf;
        this.density = this.viscosity = 1;
        this.wrap_gravity = null;
        this.gravityy = this.gravityx = 0 };
    g["zpp_nape.phys.ZPP_FluidProperties"] =
        cf;
    cf.__name__ = ["zpp_nape", "phys", "ZPP_FluidProperties"];
    cf.prototype = { wrapper: function() { if (null == this.outer) { this.outer = new Ff; var a = this.outer.zpp_inner;
                a.outer = null;
                a.next = cf.zpp_pool;
                cf.zpp_pool = a;
                this.outer.zpp_inner = this } return this.outer }, invalidate: function() { for (var a = this.shapes.head; null != a;) a.elt.invalidate_fluidprops(), a = a.next }, __class__: cf };
    var Ne = function(a) {
        this.zip_aabb = !1;
        this.sweep = this.node = this.pairs = this.aabb = null;
        this.fluidEnabled = this.sensorEnabled = !1;
        this.circle = this.polygon =
            this.refmaterial = this.material = this.filter = this.fluidProperties = null;
        this.sweepCoef = 0;
        this.zip_sweepRadius = !1;
        this.sweepRadius = 0;
        this.wrap_localCOM = null;
        this.zip_worldCOM = !1;
        this.worldCOMx = this.worldCOMy = 0;
        this.zip_localCOM = !1;
        this.localCOMx = this.localCOMy = 0;
        this.zip_angDrag = !1;
        this.inertia = this.angDrag = 0;
        this.zip_area_inertia = !1;
        this.type = this.area = 0;
        this.outer = this.body = null;
        jb.call(this);
        this.pairs = new sn;
        this.ishape = this;
        this.type = a;
        this.aabb = Ya.get(0, 0, 0, 0);
        this.aabb._immutable = !0;
        this.aabb._validate =
            m(this, this.aabb_validate);
        this.zip_area_inertia = this.zip_angDrag = this.zip_localCOM = this.zip_sweepRadius = !0;
        this.worldCOMy = this.worldCOMx = this.localCOMy = this.localCOMx = 0;
        this.sensorEnabled = this.fluidEnabled = !1;
        this.body = this.fluidProperties = null;
        this.refmaterial = new xa;
        this.sweepRadius = this.sweepCoef = 0
    };
    g["zpp_nape.shape.ZPP_Shape"] = Ne;
    Ne.__name__ = ["zpp_nape", "shape", "ZPP_Shape"];
    Ne.__super__ = jb;
    Ne.prototype = k(jb.prototype, {
        validate_sweepRadius: function() {
            this.zip_sweepRadius && (this.zip_sweepRadius = !1, this.type == h.id_ShapeType_CIRCLE ? this.circle.__validate_sweepRadius() : this.polygon.__validate_sweepRadius())
        },
        validate_area_inertia: function() { this.zip_area_inertia && (this.zip_area_inertia = !1, this.type == h.id_ShapeType_CIRCLE ? this.circle.__validate_area_inertia() : this.polygon.__validate_area_inertia()) },
        validate_angDrag: function() {
            if (this.zip_angDrag || this.refmaterial.dynamicFriction != this.material.dynamicFriction) this.zip_angDrag = !1, this.refmaterial.dynamicFriction = this.material.dynamicFriction,
                this.type == h.id_ShapeType_CIRCLE ? this.circle.__validate_angDrag() : this.polygon.__validate_angDrag()
        },
        validate_worldCOM: function() {
            this.zip_worldCOM && null != this.body && (this.zip_worldCOM = !1, this.zip_localCOM && (this.zip_localCOM = !1, this.type == h.id_ShapeType_POLYGON && this.polygon.__validate_localCOM(), null != this.wrap_localCOM && (this.wrap_localCOM.zpp_inner.x = this.localCOMx, this.wrap_localCOM.zpp_inner.y = this.localCOMy)), this.body.validate_axis(), this.worldCOMx = this.body.posx + (this.body.axisy * this.localCOMx -
                this.body.axisx * this.localCOMy), this.worldCOMy = this.body.posy + (this.localCOMx * this.body.axisx + this.localCOMy * this.body.axisy))
        },
        invalidate_area_inertia: function() { this.zip_area_inertia = !0;
            null != this.body && (this.body.invalidate_localCOM(), this.body.invalidate_mass(), this.body.invalidate_inertia()) },
        invalidate_angDrag: function() { this.zip_angDrag = !0 },
        invalidate_localCOM: function() {
            this.zip_localCOM = !0;
            this.invalidate_area_inertia();
            this.type == h.id_ShapeType_CIRCLE && (this.zip_sweepRadius = !0);
            this.invalidate_angDrag();
            this.invalidate_worldCOM();
            null != this.body && this.body.invalidate_localCOM()
        },
        invalidate_worldCOM: function() { this.zip_aabb = this.zip_worldCOM = !0;
            null != this.body && (this.body.zip_aabb = !0) },
        invalidate_material: function(a) { 0 != (a & xa.WAKE) && this.wake();
            0 != (a & xa.ARBITERS) && null != this.body && this.body.refreshArbiters();
            0 != (a & xa.PROPS) && null != this.body && (this.body.invalidate_localCOM(), this.body.invalidate_mass(), this.body.invalidate_inertia());
            0 != (a & xa.ANGDRAG) && this.invalidate_angDrag();
            this.refmaterial.set(this.material) },
        invalidate_filter: function() { this.wake() },
        invalidate_fluidprops: function() { this.fluidEnabled && this.wake() },
        aabb_validate: function() { this.zip_aabb && null != this.body && (this.zip_aabb = !1, this.type == h.id_ShapeType_CIRCLE ? this.circle.__validate_aabb() : this.polygon.__validate_aabb()) },
        setMaterial: function(a) {
            this.material != a && (null != this.body && null != this.body.space && null != this.material && this.material.shapes.remove(this), this.material = a, null != this.body && null != this.body.space && a.shapes.add(this), this.wake(),
                null != this.body && this.body.refreshArbiters())
        },
        setFilter: function(a) { this.filter != a && (null != this.body && null != this.body.space && null != this.filter && this.filter.shapes.remove(this), this.filter = a, null != this.body && null != this.body.space && a.shapes.add(this), this.wake()) },
        setFluid: function(a) {
            this.fluidProperties != a && (null != this.body && null != this.body.space && null != this.fluidProperties && this.fluidProperties.shapes.remove(this), this.fluidProperties = a, null != this.body && null != this.body.space && a.shapes.add(this),
                this.fluidEnabled && this.wake())
        },
        __immutable_midstep: function() {},
        addedToBody: function() { this.invalidate_worldCOM();
            this.zip_aabb = !0;
            null != this.body && (this.body.zip_aabb = !0) },
        removedFromBody: function() {},
        addedToSpace: function() { this.__iaddedToSpace();
            this.material.shapes.add(this);
            this.filter.shapes.add(this);
            null != this.fluidProperties && this.fluidProperties.shapes.add(this) },
        removedFromSpace: function() {
            this.__iremovedFromSpace();
            this.material.shapes.remove(this);
            this.filter.shapes.remove(this);
            null !=
                this.fluidProperties && this.fluidProperties.shapes.remove(this)
        },
        __class__: Ne
    });
    var mk = function() { this.radius = 0;
        this.outer_zn = null;
        Ne.call(this, h.id_ShapeType_CIRCLE);
        this.circle = this;
        this.zip_localCOM = !1 };
    g["zpp_nape.shape.ZPP_Circle"] = mk;
    mk.__name__ = ["zpp_nape", "shape", "ZPP_Circle"];
    mk.__super__ = Ne;
    mk.prototype = k(Ne.prototype, {
        invalidate_radius: function() { this.invalidate_area_inertia();
            this.invalidate_angDrag();
            this.zip_aabb = !0;
            null != this.body && (this.body.zip_aabb = !0);
            null != this.body && this.body.wake() },
        localCOM_validate: function() { this.wrap_localCOM.zpp_inner.x = this.localCOMx;
            this.wrap_localCOM.zpp_inner.y = this.localCOMy },
        localCOM_invalidate: function(a) { this.localCOMx = a.x;
            this.localCOMy = a.y;
            this.invalidate_localCOM();
            null != this.body && this.body.wake() },
        setupLocalCOM: function() { this.wrap_localCOM = aa.get(this.localCOMx, this.localCOMy, null);
            this.wrap_localCOM.zpp_inner._inuse = !0;
            this.wrap_localCOM.zpp_inner._validate = m(this, this.localCOM_validate);
            this.wrap_localCOM.zpp_inner._invalidate = m(this, this.localCOM_invalidate) },
        __validate_aabb: function() {
            this.zip_worldCOM && null != this.body && (this.zip_worldCOM = !1, this.zip_localCOM && (this.zip_localCOM = !1, this.type == h.id_ShapeType_POLYGON && this.polygon.__validate_localCOM(), null != this.wrap_localCOM && (this.wrap_localCOM.zpp_inner.x = this.localCOMx, this.wrap_localCOM.zpp_inner.y = this.localCOMy)), this.body.validate_axis(), this.worldCOMx = this.body.posx + (this.body.axisy * this.localCOMx - this.body.axisx * this.localCOMy), this.worldCOMy = this.body.posy + (this.localCOMx * this.body.axisx + this.localCOMy *
                this.body.axisy));
            var a = this.radius,
                b = this.radius;
            this.aabb.minx = this.worldCOMx - a;
            this.aabb.miny = this.worldCOMy - b;
            this.aabb.maxx = this.worldCOMx + a;
            this.aabb.maxy = this.worldCOMy + b
        },
        _force_validate_aabb: function() {
            this.worldCOMx = this.body.posx + (this.body.axisy * this.localCOMx - this.body.axisx * this.localCOMy);
            this.worldCOMy = this.body.posy + (this.localCOMx * this.body.axisx + this.localCOMy * this.body.axisy);
            this.aabb.minx = this.worldCOMx - this.radius;
            this.aabb.miny = this.worldCOMy - this.radius;
            this.aabb.maxx = this.worldCOMx +
                this.radius;
            this.aabb.maxy = this.worldCOMy + this.radius
        },
        __validate_sweepRadius: function() { this.sweepCoef = Math.sqrt(this.localCOMx * this.localCOMx + this.localCOMy * this.localCOMy);
            this.sweepRadius = this.sweepCoef + this.radius },
        __validate_area_inertia: function() { var a = this.radius * this.radius;
            this.area = a * Math.PI;
            this.inertia = 0.5 * a + (this.localCOMx * this.localCOMx + this.localCOMy * this.localCOMy) },
        __validate_angDrag: function() {
            var a = this.localCOMx * this.localCOMx + this.localCOMy * this.localCOMy,
                b = this.radius * this.radius;
            this.angDrag = (a + 2 * b) * this.material.dynamicFriction * u.fluidAngularDragFriction + 0.5 * u.fluidAngularDrag * (1 + u.fluidVacuumDrag) * a;
            this.angDrag /= 2 * (a + 0.5 * b)
        },
        __rotate: function(a, b) { if (0 < this.localCOMx * this.localCOMx + this.localCOMy * this.localCOMy) { var c = 0,
                    d = 0,
                    c = b * this.localCOMx - a * this.localCOMy,
                    d = this.localCOMx * a + this.localCOMy * b;
                this.localCOMx = c;
                this.localCOMy = d;
                this.invalidate_localCOM() } },
        __class__: mk
    });
    var nb = function() {
        this.tp0 = this.tp1 = 0;
        this.lp0 = this.gp0 = this.lp1 = this.gp1 = null;
        this.length = this.lprojection =
            this.gprojection = 0;
        this.wrap_gnorm = null;
        this.gnormx = this.gnormy = 0;
        this.wrap_lnorm = null;
        this.lnormx = this.lnormy = 0;
        this.next = this.polygon = this.outer = null;
        this.gprojection = this.lprojection = this.length = this.gnormy = this.gnormx = this.lnormy = this.lnormx = 0
    };
    g["zpp_nape.shape.ZPP_Edge"] = nb;
    nb.__name__ = ["zpp_nape", "shape", "ZPP_Edge"];
    nb.prototype = { wrapper: function() { null == this.outer && (nb.internal = !0, this.outer = new Qm, nb.internal = !1, this.outer.zpp_inner = this); return this.outer }, __class__: nb };
    var ok = function() {
        this.reverse_flag =
            this.zip_lverts = this.zip_laxi = this.zip_gverts = this.zip_gaxi = this.zip_valid = this.zip_sanitation = !1;
        this.edgeCnt = 0;
        this.outer_zn = this.lverts = this.wrap_lverts = this.gverts = this.wrap_gverts = this.edges = this.wrap_edges = null;
        Ne.call(this, h.id_ShapeType_POLYGON);
        this.polygon = this;
        this.lverts = new Ha;
        this.gverts = new Ha;
        this.edges = new tn;
        this.edgeCnt = 0
    };
    g["zpp_nape.shape.ZPP_Polygon"] = ok;
    ok.__name__ = ["zpp_nape", "shape", "ZPP_Polygon"];
    ok.__super__ = Ne;
    ok.prototype = k(Ne.prototype, {
        lverts_pa_invalidate: function() { this.invalidate_lverts() },
        gverts_pa_validate: function() { this.validate_gverts() },
        lverts_post_adder: function(a) {
            a.zpp_inner._invalidate = m(this, this.lverts_pa_invalidate);
            for (var b = null, c = null, d = this.lverts.next; null != d && !(d == a.zpp_inner);) { b = null == b ? this.gverts.next : b.next, c = null == c ? this.edges.head : c.next;
                d = d.next } a = Ha.get(0, 0, !0);
            this.gverts.insert(b, a);
            null != this.lverts.next.next && (null == this.lverts.next.next.next ? (null == nb.zpp_pool ? c = new nb : (c = nb.zpp_pool, nb.zpp_pool = c.next, c.next = null), null, c.polygon = this, this.edges.add(c),
                null == nb.zpp_pool ? c = new nb : (c = nb.zpp_pool, nb.zpp_pool = c.next, c.next = null), null, c.polygon = this, this.edges.add(c), this.edgeCnt += 2) : (null == nb.zpp_pool ? b = new nb : (b = nb.zpp_pool, nb.zpp_pool = b.next, b.next = null), null, b.polygon = this, this.edges.insert(c, b), this.edgeCnt++));
            a._validate = m(this, this.gverts_pa_validate)
        },
        lverts_subber: function(a) { this.cleanup_lvert(a.zpp_inner) },
        lverts_invalidate: function() { this.invalidate_lverts() },
        lverts_validate: function() { this.validate_lverts() },
        getlverts: function() {
            this.wrap_lverts =
                Eg.get(this.lverts);
            this.wrap_lverts.zpp_inner.post_adder = m(this, this.lverts_post_adder);
            this.wrap_lverts.zpp_inner.subber = m(this, this.lverts_subber);
            this.wrap_lverts.zpp_inner._invalidate = m(this, this.lverts_invalidate);
            this.wrap_lverts.zpp_inner._validate = m(this, this.lverts_validate);
            this.wrap_lverts.zpp_inner.reverse_flag = this.reverse_flag
        },
        invalidate_lverts: function() {
            this.invalidate_laxi();
            this.invalidate_area_inertia();
            this.invalidate_angDrag();
            this.invalidate_localCOM();
            this.invalidate_gverts();
            this.zip_sanitation = this.zip_valid = this.zip_lverts = !0;
            null != this.body && this.body.wake()
        },
        invalidate_laxi: function() { this.invalidate_gaxi();
            this.zip_laxi = this.zip_sweepRadius = !0 },
        invalidate_gverts: function() { this.zip_aabb = !0;
            null != this.body && (this.body.zip_aabb = !0);
            this.zip_gverts = !0 },
        invalidate_gaxi: function() { this.zip_gaxi = !0 },
        validate_lverts: function() { this.zip_lverts && (this.zip_lverts = !1, 2 < this.lverts.length && (this.validate_area_inertia(), 0 > this.area && (this.reverse_vertices(), this.area = -this.area))) },
        cleanup_lvert: function(a) {
            for (var b = null, c = null, d = this.lverts.next; null != d && !(d == a);) { b = null == b ? this.gverts.next : b.next, c = null == c ? this.edges.head : c.next;
                d = d.next } a = null == b ? this.gverts.next : b.next;
            this.gverts.erase(b);
            null != a.outer && (a.outer.zpp_inner = null, a.outer = null);
            a._isimmutable = null;
            a._validate = null;
            a._invalidate = null;
            a.next = Ha.zpp_pool;
            Ha.zpp_pool = a;
            2 == this.edgeCnt ? (c = this.edges.pop_unsafe(), c.polygon = null, c.next = nb.zpp_pool, nb.zpp_pool = c, c = this.edges.pop_unsafe(), c.polygon = null, c.next = nb.zpp_pool,
                nb.zpp_pool = c, this.edgeCnt = 0) : 0 != this.edgeCnt && (b = null == c ? this.edges.head.elt : c.next.elt, this.edges.erase(c), b.polygon = null, b.next = nb.zpp_pool, nb.zpp_pool = b, this.edgeCnt--)
        },
        splice_collinear: function() { this.zip_sanitation && (this.zip_sanitation = !1, this.splice_collinear_real()) },
        splice_collinear_real: function() {
            if (!(null == this.lverts.next || null == this.lverts.next.next) && null != this.lverts.next.next.next) {
                for (var a = null, b = this.lverts.next; null != b;) {
                    var c = b,
                        d = null == b.next ? this.lverts.next : b.next;
                    Rc.vec_dsq(c.x,
                        c.y, d.x, d.y) < u.epsilon * u.epsilon ? (this.cleanup_lvert(b), b = this.lverts.erase(a)) : (a = b, b = b.next)
                }
                if (null != this.lverts.next) { do { a = !1; for (b = this.lverts.next; null != b;) { var c = null == b.next ? this.lverts.next : b.next,
                                e = b,
                                d = c,
                                f = null == c.next ? this.lverts.next : c.next,
                                h = 0,
                                g = 0,
                                h = d.x - e.x,
                                g = d.y - e.y,
                                i = e = 0,
                                e = f.x - d.x,
                                i = f.y - d.y,
                                d = i * h - e * g;
                            d * d >= u.epsilon * u.epsilon || (this.cleanup_lvert(c), this.lverts.erase(null == b.next ? null : b), a = !0);
                            b = b.next } } while (a) }
            }
        },
        reverse_vertices: function() {
            this.lverts.reverse();
            this.gverts.reverse();
            this.edges.reverse();
            var a = this.edges.iterator_at(this.edgeCnt - 1),
                b = this.edges.pop_unsafe();
            this.edges.insert(a, b);
            this.reverse_flag = !this.reverse_flag;
            null != this.wrap_lverts && (this.wrap_lverts.zpp_inner.reverse_flag = this.reverse_flag);
            null != this.wrap_gverts && (this.wrap_gverts.zpp_inner.reverse_flag = this.reverse_flag);
            null != this.wrap_edges && (this.wrap_edges.zpp_inner.reverse_flag = this.reverse_flag)
        },
        validate_laxi: function() {
            if (this.zip_laxi) {
                this.zip_laxi = !1;
                this.validate_lverts();
                for (var a = this.edges.head,
                        b = this.lverts.next, c = b, b = b.next; null != b;) { var d = b,
                        e = a.elt,
                        a = a.next;
                    e.lp0 = c;
                    e.lp1 = d; var f = 0,
                        h = 0,
                        f = c.x - d.x,
                        h = c.y - d.y,
                        g = Math.sqrt(f * f + h * h);
                    e.length = g;
                    g = 1 / g;
                    f *= g;
                    h *= g;
                    g = f;
                    f = -h;
                    h = g;
                    e.lprojection = f * c.x + h * c.y;
                    e.lnormx = f;
                    e.lnormy = h;
                    null != e.wrap_lnorm && (e.wrap_lnorm.zpp_inner.x = f, e.wrap_lnorm.zpp_inner.y = h);
                    c = d;
                    b = b.next } e = this.lverts.next;
                a = a.elt;
                a.lp0 = c;
                a.lp1 = e;
                d = b = 0;
                b = c.x - e.x;
                d = c.y - e.y;
                e = Math.sqrt(b * b + d * d);
                a.length = e;
                e = 1 / e;
                f = b * e;
                b = -(d * e);
                d = f;
                a.lprojection = b * c.x + d * c.y;
                a.lnormx = b;
                a.lnormy = d;
                null != a.wrap_lnorm &&
                    (a.wrap_lnorm.zpp_inner.x = b, a.wrap_lnorm.zpp_inner.y = d)
            }
        },
        validate_gverts: function() { if (this.zip_gverts && null != this.body) { this.zip_gverts = !1;
                this.validate_lverts();
                this.body.validate_axis(); for (var a = this.lverts.next, b = this.gverts.next; null != b;) { var c = b,
                        d = a,
                        a = a.next;
                    c.x = this.body.posx + (this.body.axisy * d.x - this.body.axisx * d.y);
                    c.y = this.body.posy + (d.x * this.body.axisx + d.y * this.body.axisy);
                    b = b.next } } },
        validate_gaxi: function() {
            if (this.zip_gaxi && null != this.body) {
                this.zip_gaxi = !1;
                this.validate_laxi();
                this.body.validate_axis();
                this.validate_gverts();
                for (var a = this.edges.head, b = this.gverts.next, c = b, b = b.next; null != b;) {
                    var d = b,
                        e = a.elt,
                        a = a.next;
                    e.gp0 = c;
                    e.gp1 = d;
                    e.gnormx = this.body.axisy * e.lnormx - this.body.axisx * e.lnormy;
                    e.gnormy = e.lnormx * this.body.axisx + e.lnormy * this.body.axisy;
                    e.gprojection = this.body.posx * e.gnormx + this.body.posy * e.gnormy + e.lprojection;
                    null != e.wrap_gnorm && (e.wrap_gnorm.zpp_inner.x = e.gnormx, e.wrap_gnorm.zpp_inner.y = e.gnormy);
                    e.tp0 = e.gp0.y * e.gnormx - e.gp0.x * e.gnormy;
                    e.tp1 = e.gp1.y * e.gnormx - e.gp1.x * e.gnormy;
                    c = d;
                    b =
                        b.next
                }
                b = this.gverts.next;
                a = a.elt;
                a.gp0 = c;
                a.gp1 = b;
                a.gnormx = this.body.axisy * a.lnormx - this.body.axisx * a.lnormy;
                a.gnormy = a.lnormx * this.body.axisx + a.lnormy * this.body.axisy;
                a.gprojection = this.body.posx * a.gnormx + this.body.posy * a.gnormy + a.lprojection;
                null != a.wrap_gnorm && (a.wrap_gnorm.zpp_inner.x = a.gnormx, a.wrap_gnorm.zpp_inner.y = a.gnormy);
                a.tp0 = a.gp0.y * a.gnormx - a.gp0.x * a.gnormy;
                a.tp1 = a.gp1.y * a.gnormx - a.gp1.x * a.gnormy
            }
        },
        __validate_aabb: function() {
            this.validate_gverts();
            var a = this.gverts.next;
            this.aabb.minx =
                a.x;
            this.aabb.miny = a.y;
            this.aabb.maxx = a.x;
            this.aabb.maxy = a.y;
            for (a = this.gverts.next.next; null != a;) { var b = a;
                b.x < this.aabb.minx && (this.aabb.minx = b.x);
                b.x > this.aabb.maxx && (this.aabb.maxx = b.x);
                b.y < this.aabb.miny && (this.aabb.miny = b.y);
                b.y > this.aabb.maxy && (this.aabb.maxy = b.y);
                a = a.next }
        },
        _force_validate_aabb: function() {
            var a = this.lverts.next,
                b = this.gverts.next,
                c = a,
                a = a.next;
            b.x = this.body.posx + (this.body.axisy * c.x - this.body.axisx * c.y);
            b.y = this.body.posy + (c.x * this.body.axisx + c.y * this.body.axisy);
            this.aabb.minx =
                b.x;
            this.aabb.miny = b.y;
            this.aabb.maxx = b.x;
            this.aabb.maxy = b.y;
            for (b = this.gverts.next.next; null != b;) { var c = b,
                    d = a,
                    a = a.next;
                c.x = this.body.posx + (this.body.axisy * d.x - this.body.axisx * d.y);
                c.y = this.body.posy + (d.x * this.body.axisx + d.y * this.body.axisy);
                c.x < this.aabb.minx && (this.aabb.minx = c.x);
                c.x > this.aabb.maxx && (this.aabb.maxx = c.x);
                c.y < this.aabb.miny && (this.aabb.miny = c.y);
                c.y > this.aabb.maxy && (this.aabb.maxy = c.y);
                b = b.next }
        },
        __validate_sweepRadius: function() {
            var a = 0,
                b = 0;
            this.validate_laxi();
            for (var c = this.lverts.next; null !=
                c;) { var d = c,
                    d = d.x * d.x + d.y * d.y;
                d > a && (a = d);
                c = c.next }
            for (c = this.edges.head; null != c;) { d = c.elt; if (d.lprojection < b && (b = d.lprojection, 0 > b)) break;
                c = c.next } 0 > b && (b = 0);
            this.sweepRadius = Math.sqrt(a);
            this.sweepCoef = this.sweepRadius - b
        },
        __validate_area_inertia: function() {
            if (null == this.lverts.next || null == this.lverts.next.next || null == this.lverts.next.next.next) this.inertia = this.area = 0;
            else {
                for (var a = this.area = 0, b = 0, c = this.lverts.next, d = c, e = c = c.next, c = c.next; null != c;) {
                    var f = c,
                        h = e.y * d.x - e.x * d.y,
                        a = a + h * (e.x * e.x + e.y *
                            e.y + (e.x * d.x + e.y * d.y) + (d.x * d.x + d.y * d.y)),
                        b = b + h;
                    this.area += e.x * (f.y - d.y);
                    d = e;
                    e = f;
                    c = c.next
                }
                h = c = this.lverts.next;
                f = e.y * d.x - e.x * d.y;
                a += f * (e.x * e.x + e.y * e.y + (e.x * d.x + e.y * d.y) + (d.x * d.x + d.y * d.y));
                this.area += e.x * (h.y - d.y);
                d = e;
                e = h;
                c = c.next;
                h = e.y * d.x - e.x * d.y;
                a += h * (e.x * e.x + e.y * e.y + (e.x * d.x + e.y * d.y) + (d.x * d.x + d.y * d.y));
                this.area += e.x * (c.y - d.y);
                this.inertia = a / (6 * (b + f + h));
                this.area *= 0.5;
                0 > this.area && (this.area = -this.area, this.reverse_vertices())
            }
        },
        __validate_angDrag: function() {
            this.validate_area_inertia();
            this.validate_laxi();
            for (var a = 0, b = this.edges.head, c = 0, d = this.lverts.next, e = d, d = d.next; null != d;) {
                var f = d,
                    h = b.elt,
                    b = b.next,
                    c = c + h.length,
                    g = 0,
                    i = 0,
                    g = f.x - e.x,
                    i = f.y - e.y,
                    a = a + h.length * u.fluidAngularDragFriction * this.material.dynamicFriction * h.lprojection * h.lprojection,
                    j = -(e.y * h.lnormx - e.x * h.lnormy) / (i * h.lnormx - g * h.lnormy);
                if (0 < j) { var k;
                    k = 1 < j ? 1 : j; var m = 0,
                        n = 0,
                        m = e.x,
                        n = e.y,
                        o = k,
                        m = m + g * o,
                        n = n + i * o,
                        o = h.lnormy * e.x - h.lnormx * e.y,
                        m = h.lnormy * m - h.lnormx * n,
                        a = a + (m * m * m - o * o * o) / (3 * (m - o)) * k * h.length * u.fluidAngularDrag } 1 > j && (j = 0 > j ? 0 : j, m = k = 0, k = e.x,
                    m = e.y, e = j, k += g * e, m += i * e, e = h.lnormy * k - h.lnormx * m, g = h.lnormy * f.x - h.lnormx * f.y, a += (g * g * g - e * e * e) / (3 * (g - e)) * u.fluidVacuumDrag * (1 - j) * h.length * u.fluidAngularDrag);
                e = f;
                d = d.next
            }
            d = this.lverts.next;
            b = b.elt;
            c += b.length;
            h = f = 0;
            f = d.x - e.x;
            h = d.y - e.y;
            a += b.length * u.fluidAngularDragFriction * this.material.dynamicFriction * b.lprojection * b.lprojection;
            g = -(e.y * b.lnormx - e.x * b.lnormy) / (h * b.lnormx - f * b.lnormy);
            0 < g && (i = 1 < g ? 1 : g, m = k = 0, k = e.x, m = e.y, j = b.lnormy * e.x - b.lnormx * e.y, k = b.lnormy * (k + f * i) - b.lnormx * (m + h * i), a += (k * k * k - j * j * j) /
                (3 * (k - j)) * i * b.length * u.fluidAngularDrag);
            1 > g && (g = 0 > g ? 0 : g, j = i = 0, i = e.x, j = e.y, e = b.lnormy * (i + f * g) - b.lnormx * (j + h * g), d = b.lnormy * d.x - b.lnormx * d.y, a += (d * d * d - e * e * e) / (3 * (d - e)) * u.fluidVacuumDrag * (1 - g) * b.length * u.fluidAngularDrag);
            this.angDrag = a / (this.inertia * c)
        },
        __validate_localCOM: function() {
            if (null == this.lverts.next.next) this.localCOMx = this.lverts.next.x, this.localCOMy = this.lverts.next.y;
            else if (null == this.lverts.next.next.next) this.localCOMx = this.lverts.next.x, this.localCOMy = this.lverts.next.y, this.localCOMx +=
                1 * this.lverts.next.next.x, this.localCOMy += 1 * this.lverts.next.next.y, this.localCOMx *= 0.5, this.localCOMy *= 0.5;
            else {
                for (var a = this.localCOMy = this.localCOMx = 0, b = this.lverts.next, c = b, d = b = b.next, b = b.next; null != b;) { var e = b,
                        a = a + d.x * (e.y - c.y),
                        c = e.y * d.x - e.x * d.y;
                    this.localCOMx += (d.x + e.x) * c;
                    this.localCOMy += (d.y + e.y) * c;
                    c = d;
                    d = e;
                    b = b.next } e = b = this.lverts.next;
                a += d.x * (e.y - c.y);
                c = e.y * d.x - e.x * d.y;
                this.localCOMx += (d.x + e.x) * c;
                this.localCOMy += (d.y + e.y) * c;
                c = d;
                d = e;
                b = b.next;
                a += d.x * (b.y - c.y);
                c = b.y * d.x - b.x * d.y;
                this.localCOMx +=
                    (d.x + b.x) * c;
                this.localCOMy += (d.y + b.y) * c;
                a = 1 / (3 * a);
                this.localCOMx *= a;
                this.localCOMy *= a
            }
        },
        localCOM_validate: function() { this.zip_localCOM && (this.zip_localCOM = !1, this.type == h.id_ShapeType_POLYGON && this.polygon.__validate_localCOM(), null != this.wrap_localCOM && (this.wrap_localCOM.zpp_inner.x = this.localCOMx, this.wrap_localCOM.zpp_inner.y = this.localCOMy)) },
        localCOM_invalidate: function(a) {
            this.zip_localCOM && (this.zip_localCOM = !1, this.type == h.id_ShapeType_POLYGON && this.polygon.__validate_localCOM(), null != this.wrap_localCOM &&
                (this.wrap_localCOM.zpp_inner.x = this.localCOMx, this.wrap_localCOM.zpp_inner.y = this.localCOMy));
            for (var b = 0, c = 0, b = a.x - this.localCOMx, c = a.y - this.localCOMy, a = this.lverts.next; null != a;) { var d = a;
                d.x += 1 * b;
                d.y += 1 * c;
                a = a.next } this.invalidate_lverts()
        },
        setupLocalCOM: function() { this.wrap_localCOM = aa.get(this.localCOMx, this.localCOMy, null);
            this.wrap_localCOM.zpp_inner._inuse = !0;
            this.wrap_localCOM.zpp_inner._validate = m(this, this.localCOM_validate);
            this.wrap_localCOM.zpp_inner._invalidate = m(this, this.localCOM_invalidate) },
        __rotate: function(a, b) { for (var c = this.lverts.next; null != c;) { var d = c,
                    e = 0,
                    f = 0,
                    e = b * d.x - a * d.y,
                    f = d.x * a + d.y * b;
                d.x = e;
                d.y = f;
                c = c.next } this.invalidate_lverts() },
        __class__: ok
    });
    var kf = function() { this.sweep = this.dynab = null;
        this.is_sweep = !1;
        this.space = null };
    g["zpp_nape.space.ZPP_Broadphase"] = kf;
    kf.__name__ = ["zpp_nape", "space", "ZPP_Broadphase"];
    kf.prototype = {
        insert: function(a) { this.is_sweep ? this.sweep.__insert(a) : this.dynab.__insert(a) },
        remove: function(a) { this.is_sweep ? this.sweep.__remove(a) : this.dynab.__remove(a) },
        sync: function(a) { this.is_sweep ? !this.sweep.space.continuous && a.zip_aabb && null != a.body && (a.zip_aabb = !1, a.type == h.id_ShapeType_CIRCLE ? a.circle.__validate_aabb() : a.polygon.__validate_aabb()) : this.dynab.__sync(a) },
        broadphase: function() {},
        clear: function() {},
        rayMultiCast: function() { return null },
        __class__: kf
    };
    var Xb = function() {
        this.synced = this.first_sync = !1;
        this.snext = null;
        this.moved = !1;
        this.next = this.mnext = null;
        this.height = 0;
        this.parent = this.child1 = this.child2 = null;
        this.dyn = !1;
        this.aabb = this.shape = null;
        this.height = -1
    };
    g["zpp_nape.space.ZPP_AABBNode"] = Xb;
    Xb.__name__ = ["zpp_nape", "space", "ZPP_AABBNode"];
    Xb.prototype = { free: function() { this.height = -1; var a = this.aabb;
            null != a.outer && (a.outer.zpp_inner = null, a.outer = null);
            a.wrap_min = a.wrap_max = null;
            a._invalidate = null;
            a._validate = null;
            a.next = Ya.zpp_pool;
            Ya.zpp_pool = a;
            this.mnext = this.snext = this.next = this.child1 = this.child2 = this.parent = null }, __class__: Xb };
    var qa = function() {
        this.arb = this.next = null;
        this.id = this.di = 0;
        this.first = this.sleeping = !1;
        this.n1 = this.n2 =
            null
    };
    g["zpp_nape.space.ZPP_AABBPair"] = qa;
    qa.__name__ = ["zpp_nape", "space", "ZPP_AABBPair"];
    qa.prototype = { __class__: qa };
    var Tc = function() { this.root = null };
    g["zpp_nape.space.ZPP_AABBTree"] = Tc;
    Tc.__name__ = ["zpp_nape", "space", "ZPP_AABBTree"];
    Tc.prototype = {
        clear: function() {
            if (null != this.root) {
                var a;
                this.root.next = null;
                for (a = this.root; null != a;) {
                    var b;
                    b = a;
                    a = b.next;
                    b.next = null;
                    null == b.child1 ? (b.shape.node = null, b.shape.removedFromSpace(), b.shape = null) : (null != b.child1 && (b.child1.next = a, a = b.child1), null != b.child2 &&
                        (b.child2.next = a, a = b.child2));
                    b.free();
                    b.next = Xb.zpp_pool;
                    Xb.zpp_pool = b
                }
                this.root = null
            }
        },
        inlined_insertLeaf: function(a) {
            if (null == this.root) this.root = a, this.root.parent = null;
            else {
                for (var b = a.aabb, c = this.root; null != c.child1;) {
                    var d = c.child1,
                        e = c.child2,
                        f = c.aabb.perimeter();
                    Tc.tmpaabb.setCombine(c.aabb, b);
                    var h = Tc.tmpaabb.perimeter(),
                        g = 2 * h,
                        f = 2 * (h - f);
                    Tc.tmpaabb.setCombine(b, d.aabb);
                    null == d.child1 ? h = Tc.tmpaabb.perimeter() + f : (h = d.aabb.perimeter(), h = Tc.tmpaabb.perimeter() - h + f);
                    Tc.tmpaabb.setCombine(b, e.aabb);
                    if (null == e.child1) f = Tc.tmpaabb.perimeter() + f;
                    else var i = e.aabb.perimeter(),
                        f = Tc.tmpaabb.perimeter() - i + f;
                    if (g < h && g < f) break;
                    else c = h < f ? d : e
                }
                d = c.parent;
                null == Xb.zpp_pool ? e = new Xb : (e = Xb.zpp_pool, Xb.zpp_pool = e.next, e.next = null);
                null == Ya.zpp_pool ? e.aabb = new Ya : (e.aabb = Ya.zpp_pool, Ya.zpp_pool = e.aabb.next, e.aabb.next = null);
                null;
                e.moved = !1;
                e.synced = !1;
                e.first_sync = !1;
                e.parent = d;
                e.aabb.setCombine(b, c.aabb);
                e.height = c.height + 1;
                null != d ? (d.child1 == c ? d.child1 = e : d.child2 = e, e.child1 = c, e.child2 = a, c.parent = e, a.parent =
                    e) : (e.child1 = c, e.child2 = a, c.parent = e, this.root = a.parent = e);
                for (c = a.parent; null != c;) c = this.balance(c), a = c.child1, b = c.child2, d = a.height, e = b.height, c.height = 1 + (d > e ? d : e), c.aabb.setCombine(a.aabb, b.aabb), c = c.parent
            }
        },
        removeLeaf: function(a) { this.inlined_removeLeaf(a) },
        inlined_removeLeaf: function(a) {
            if (a == this.root) this.root = null;
            else {
                var b = a.parent,
                    c = b.parent,
                    a = b.child1 == a ? b.child2 : b.child1;
                if (null != c) {
                    c.child1 == b ? c.child1 = a : c.child2 = a;
                    a.parent = c;
                    b.free();
                    b.next = Xb.zpp_pool;
                    Xb.zpp_pool = b;
                    for (b = c; null !=
                        b;) b = this.balance(b), a = b.child1, c = b.child2, b.aabb.setCombine(a.aabb, c.aabb), a = a.height, c = c.height, b.height = 1 + (a > c ? a : c), b = b.parent
                } else this.root = a, a.parent = null, b.free(), b.next = Xb.zpp_pool, Xb.zpp_pool = b
            }
        },
        balance: function(a) {
            if (null == a.child1 || 2 > a.height) return a;
            var b = a.child1,
                c = a.child2,
                d = c.height - b.height;
            if (1 < d) {
                var e = c.child1,
                    f = c.child2;
                c.child1 = a;
                c.parent = a.parent;
                a.parent = c;
                null != c.parent ? c.parent.child1 == a ? c.parent.child1 = c : c.parent.child2 = c : this.root = c;
                e.height > f.height ? (c.child2 = e, a.child2 =
                    f, f.parent = a, a.aabb.setCombine(b.aabb, f.aabb), c.aabb.setCombine(a.aabb, e.aabb), a.height = 1 + function() { var a = b.height,
                            c = f.height; return a > c ? a : c }(this), c.height = 1 + function() { var b = a.height,
                            c = e.height; return b > c ? b : c }(this)) : (c.child2 = f, a.child2 = e, e.parent = a, a.aabb.setCombine(b.aabb, e.aabb), c.aabb.setCombine(a.aabb, f.aabb), a.height = 1 + function() { var a = b.height,
                        c = e.height; return a > c ? a : c }(this), c.height = 1 + function() { var b = a.height,
                        c = f.height; return b > c ? b : c }(this));
                return c
            }
            if (-1 > d) {
                var h = b.child1,
                    g = b.child2;
                b.child1 = a;
                b.parent = a.parent;
                a.parent = b;
                null != b.parent ? b.parent.child1 == a ? b.parent.child1 = b : b.parent.child2 = b : this.root = b;
                h.height > g.height ? (b.child2 = h, a.child1 = g, g.parent = a, a.aabb.setCombine(c.aabb, g.aabb), b.aabb.setCombine(a.aabb, h.aabb), a.height = 1 + function() { var a = c.height,
                        b = g.height; return a > b ? a : b }(this), b.height = 1 + function() { var b = a.height,
                        c = h.height; return b > c ? b : c }(this)) : (b.child2 = g, a.child1 = h, h.parent = a, a.aabb.setCombine(c.aabb, h.aabb), b.aabb.setCombine(a.aabb, g.aabb), a.height = 1 + function() {
                    var a =
                        c.height,
                        b = h.height;
                    return a > b ? a : b
                }(this), b.height = 1 + function() { var b = a.height,
                        c = g.height; return b > c ? b : c }(this));
                return b
            }
            return a
        },
        __class__: Tc
    };
    var Ol = function(a) { this.stree = this.dtree = this.pairs = this.syncs = this.moves = this.openlist = null;
        kf.call(this);
        this.space = a;
        this.is_sweep = !1;
        this.dynab = this;
        this.stree = new Tc;
        this.dtree = new Tc };
    g["zpp_nape.space.ZPP_DynAABBPhase"] = Ol;
    Ol.__name__ = ["zpp_nape", "space", "ZPP_DynAABBPhase"];
    Ol.__super__ = kf;
    Ol.prototype = k(kf.prototype, {
        __insert: function(a) {
            var b;
            null ==
                Xb.zpp_pool ? b = new Xb : (b = Xb.zpp_pool, Xb.zpp_pool = b.next, b.next = null);
            null == Ya.zpp_pool ? b.aabb = new Ya : (b.aabb = Ya.zpp_pool, Ya.zpp_pool = b.aabb.next, b.aabb.next = null);
            null;
            b.moved = !1;
            b.synced = !1;
            b.first_sync = !1;
            b.shape = a;
            a.node = b;
            b.synced = !0;
            b.first_sync = !0;
            b.snext = this.syncs;
            this.syncs = b
        },
        __remove: function(a) {
            var b = a.node;
            b.first_sync || (b.dyn ? this.dtree.removeLeaf(b) : this.stree.removeLeaf(b));
            a.node = null;
            if (b.synced) {
                for (var c = null, d = this.syncs; null != d && !(d == b);) { c = d;
                    d = d.snext } null == c ? this.syncs = d.snext :
                    c.snext = d.snext;
                d.snext = null;
                b.synced = !1
            }
            if (b.moved) { c = null; for (d = this.moves; null != d && !(d == b);) { c = d;
                    d = d.mnext } null == c ? this.moves = d.mnext : c.mnext = d.mnext;
                d.mnext = null;
                b.moved = !1 }
            for (var c = null, e = this.pairs; null != e;) d = e.next, e.n1 == b || e.n2 == b ? (null == c ? this.pairs = d : c.next = d, null != e.arb && (e.arb.pair = null), e.arb = null, e.n1.shape.pairs.remove(e), e.n2.shape.pairs.remove(e), e.n1 = e.n2 = null, e.sleeping = !1, e.next = qa.zpp_pool, qa.zpp_pool = e) : c = e, e = d;
            for (; null != a.pairs.head;) c = a.pairs.pop_unsafe(), c.n1 == b ? c.n2.shape.pairs.remove(c) :
                c.n1.shape.pairs.remove(c), null != c.arb && (c.arb.pair = null), c.arb = null, c.n1 = c.n2 = null, c.sleeping = !1, c.next = qa.zpp_pool, qa.zpp_pool = c;
            b.free();
            b.next = Xb.zpp_pool;
            Xb.zpp_pool = b
        },
        __sync: function(a) {
            var b = a.node;
            if (!b.synced && (!this.space.continuous && a.zip_aabb && null != a.body && (a.zip_aabb = !1, a.type == h.id_ShapeType_CIRCLE ? a.circle.__validate_aabb() : a.polygon.__validate_aabb()), b.dyn != (a.body.type == h.id_BodyType_STATIC ? !1 : !a.body.component.sleeping) || !b.aabb.contains(a.aabb))) b.synced = !0, b.snext = this.syncs,
                this.syncs = b
        },
        sync_broadphase: function() {
            this.space.validation();
            if (null != this.syncs)
                if (null == this.moves) {
                    for (var a = this.syncs; null != a;) {
                        var b = a.shape;
                        a.first_sync ? a.first_sync = !1 : (a.dyn ? this.dtree : this.stree).inlined_removeLeaf(a);
                        var c = a.aabb;
                        !this.space.continuous && b.zip_aabb && null != b.body && (b.zip_aabb = !1, b.type == h.id_ShapeType_CIRCLE ? b.circle.__validate_aabb() : b.polygon.__validate_aabb());
                        c.setExpand(b.aabb, 3);
                        ((b.body.type == h.id_BodyType_STATIC ? a.dyn = !1 : a.dyn = !b.body.component.sleeping) ? this.dtree :
                            this.stree).inlined_insertLeaf(a);
                        a.synced = !1;
                        a.moved = !0;
                        a.mnext = a.snext;
                        a.snext = null;
                        a = a.mnext
                    }
                    a = this.syncs;
                    this.syncs = this.moves;
                    this.moves = a
                } else
                    for (; null != this.syncs;) a = this.syncs, this.syncs = a.snext, a.snext = null, b = a.shape, a.first_sync ? a.first_sync = !1 : (a.dyn ? this.dtree : this.stree).inlined_removeLeaf(a), c = a.aabb, !this.space.continuous && b.zip_aabb && null != b.body && (b.zip_aabb = !1, b.type == h.id_ShapeType_CIRCLE ? b.circle.__validate_aabb() : b.polygon.__validate_aabb()), c.setExpand(b.aabb, 3), ((b.body.type ==
                        h.id_BodyType_STATIC ? a.dyn = !1 : a.dyn = !b.body.component.sleeping) ? this.dtree : this.stree).inlined_insertLeaf(a), a.synced = !1, a.moved || (a.moved = !0, a.mnext = this.moves, this.moves = a)
        },
        broadphase: function(a, b) {
            for (var c = this.syncs; null != c;) {
                var d = c.shape;
                c.first_sync ? c.first_sync = !1 : (c.dyn ? this.dtree : this.stree).inlined_removeLeaf(c);
                var e = c.aabb;
                !a.continuous && d.zip_aabb && null != d.body && (d.zip_aabb = !1, d.type == h.id_ShapeType_CIRCLE ? d.circle.__validate_aabb() : d.polygon.__validate_aabb());
                e.setExpand(d.aabb,
                    3);
                ((d.body.type == h.id_BodyType_STATIC ? c.dyn = !1 : c.dyn = !d.body.component.sleeping) ? this.dtree : this.stree).inlined_insertLeaf(c);
                c.synced = !1;
                c = c.snext
            }
            for (; null != this.syncs;)
                if (c = this.syncs, this.syncs = c.snext, c.snext = null, !c.moved && (c.moved = !1, d = c.shape, !d.body.component.sleeping)) {
                    var e = c.aabb,
                        f = null;
                    null != this.dtree.root && (this.dtree.root.next = f, f = this.dtree.root);
                    for (; null != f;) {
                        var g;
                        g = f;
                        f = g.next;
                        g.next = null;
                        if (g != c)
                            if (null == g.child1) {
                                var i = g.shape;
                                if (i.body != d.body && !(i.body.type == h.id_BodyType_STATIC &&
                                        d.body.type == h.id_BodyType_STATIC) && e.intersect(g.aabb)) { var j, k;
                                    d.id < i.id ? (j = d.id, k = i.id) : (j = i.id, k = d.id); for (var m = null, n = (d.pairs.length < i.pairs.length ? d : i).pairs.head; null != n;) { var o = n.elt; if (o.id == j && o.di == k) { m = o; break } n = n.next } null != m ? m.sleeping && (m.sleeping = !1, m.next = this.pairs, this.pairs = m, m.first = !0) : (null == qa.zpp_pool ? m = new qa : (m = qa.zpp_pool, qa.zpp_pool = m.next, m.next = null), null, m.n1 = c, m.n2 = g, m.id = j, m.di = k, m.next = this.pairs, this.pairs = m, m.first = !0, d.pairs.inlined_add(m), i.pairs.inlined_add(m)) }
                            } else e.intersect(g.aabb) &&
                                (null != g.child1 && (g.child1.next = f, f = g.child1), null != g.child2 && (g.child2.next = f, f = g.child2))
                    }
                    null != this.stree.root && (this.stree.root.next = f, f = this.stree.root);
                    for (; null != f;)
                        if (g = f, f = g.next, g.next = null, g != c)
                            if (null == g.child1) {
                                if (i = g.shape, i.body != d.body && !(i.body.type == h.id_BodyType_STATIC && d.body.type == h.id_BodyType_STATIC) && e.intersect(g.aabb)) {
                                    d.id < i.id ? (j = d.id, k = i.id) : (j = i.id, k = d.id);
                                    m = null;
                                    for (n = (d.pairs.length < i.pairs.length ? d : i).pairs.head; null != n;) { o = n.elt; if (o.id == j && o.di == k) { m = o; break } n = n.next } null !=
                                        m ? m.sleeping && (m.sleeping = !1, m.next = this.pairs, this.pairs = m, m.first = !0) : (null == qa.zpp_pool ? m = new qa : (m = qa.zpp_pool, qa.zpp_pool = m.next, m.next = null), null, m.n1 = c, m.n2 = g, m.id = j, m.di = k, m.next = this.pairs, this.pairs = m, m.first = !0, d.pairs.inlined_add(m), i.pairs.inlined_add(m))
                                }
                            } else e.intersect(g.aabb) && (null != g.child1 && (g.child1.next = f, f = g.child1), null != g.child2 && (g.child2.next = f, f = g.child2))
                } for (; null != this.moves;)
                if (c = this.moves, this.moves = c.mnext, c.mnext = null, c.moved = !1, d = c.shape, !d.body.component.sleeping) {
                    e =
                        c.aabb;
                    f = null;
                    null != this.dtree.root && (this.dtree.root.next = f, f = this.dtree.root);
                    for (; null != f;)
                        if (g = f, f = g.next, g.next = null, g != c)
                            if (null == g.child1) {
                                if (i = g.shape, i.body != d.body && !(i.body.type == h.id_BodyType_STATIC && d.body.type == h.id_BodyType_STATIC) && e.intersect(g.aabb)) {
                                    d.id < i.id ? (j = d.id, k = i.id) : (j = i.id, k = d.id);
                                    m = null;
                                    for (n = (d.pairs.length < i.pairs.length ? d : i).pairs.head; null != n;) { o = n.elt; if (o.id == j && o.di == k) { m = o; break } n = n.next } null != m ? m.sleeping && (m.sleeping = !1, m.next = this.pairs, this.pairs = m, m.first = !0) : (null == qa.zpp_pool ? m = new qa : (m = qa.zpp_pool, qa.zpp_pool = m.next, m.next = null), null, m.n1 = c, m.n2 = g, m.id = j, m.di = k, m.next = this.pairs, this.pairs = m, m.first = !0, d.pairs.inlined_add(m), i.pairs.inlined_add(m))
                                }
                            } else e.intersect(g.aabb) && (null != g.child1 && (g.child1.next = f, f = g.child1), null != g.child2 && (g.child2.next = f, f = g.child2));
                    null != this.stree.root && (this.stree.root.next = f, f = this.stree.root);
                    for (; null != f;)
                        if (g = f, f = g.next, g.next = null, g != c)
                            if (null == g.child1) {
                                if (i = g.shape, i.body != d.body && !(i.body.type == h.id_BodyType_STATIC &&
                                        d.body.type == h.id_BodyType_STATIC) && e.intersect(g.aabb)) { d.id < i.id ? (j = d.id, k = i.id) : (j = i.id, k = d.id);
                                    m = null; for (n = (d.pairs.length < i.pairs.length ? d : i).pairs.head; null != n;) { o = n.elt; if (o.id == j && o.di == k) { m = o; break } n = n.next } null != m ? m.sleeping && (m.sleeping = !1, m.next = this.pairs, this.pairs = m, m.first = !0) : (null == qa.zpp_pool ? m = new qa : (m = qa.zpp_pool, qa.zpp_pool = m.next, m.next = null), null, m.n1 = c, m.n2 = g, m.id = j, m.di = k, m.next = this.pairs, this.pairs = m, m.first = !0, d.pairs.inlined_add(m), i.pairs.inlined_add(m)) }
                            } else e.intersect(g.aabb) &&
                                (null != g.child1 && (g.child1.next = f, f = g.child1), null != g.child2 && (g.child2.next = f, f = g.child2))
                } c = null;
            for (d = this.pairs; null != d;) !d.first && !d.n1.aabb.intersect(d.n2.aabb) ? (null == c ? this.pairs = d.next : c.next = d.next, d.n1.shape.pairs.inlined_try_remove(d), d.n2.shape.pairs.inlined_try_remove(d), e = d.next, null != d.arb && (d.arb.pair = null), d.arb = null, d.n1 = d.n2 = null, d.sleeping = !1, d.next = qa.zpp_pool, qa.zpp_pool = d, d = e) : (e = d.n1.shape, f = e.body, g = d.n2.shape, i = g.body, !d.first && (f.component.sleeping || f.type == h.id_BodyType_STATIC) &&
                (i.component.sleeping || i.type == h.id_BodyType_STATIC) ? (d.sleeping = !0, null == c ? this.pairs = d.next : c.next = d.next) : (d.first = !1, e.aabb.intersect(g.aabb) && (c = d.arb, d.arb = b ? a.narrowPhase(e, g, f.type != h.id_BodyType_DYNAMIC || i.type != h.id_BodyType_DYNAMIC, d.arb, !1) : a.continuousEvent(e, g, f.type != h.id_BodyType_DYNAMIC || i.type != h.id_BodyType_DYNAMIC, d.arb, !1), null == d.arb ? null != c && (c.pair = null) : d.arb.pair = d), c = d), d = d.next)
        },
        clear: function() {
            for (; null != this.syncs;) {
                var a = this.syncs.snext;
                this.syncs.snext = null;
                this.syncs.first_sync &&
                    (this.syncs.shape.node = null, this.syncs.shape.removedFromSpace(), this.syncs.shape = null);
                this.syncs = a
            }
            for (; null != this.moves;) a = this.moves.mnext, this.moves.mnext = null, this.moves.first_sync && (this.moves.shape.node = null, this.moves.shape.removedFromSpace(), this.moves.shape = null), this.moves = a;
            for (; null != this.pairs;) {
                a = this.pairs.next;
                null != this.pairs.arb && (this.pairs.arb.pair = null);
                this.pairs.arb = null;
                this.pairs.n1.shape.pairs.inlined_try_remove(this.pairs);
                this.pairs.n2.shape.pairs.inlined_try_remove(this.pairs);
                var b = this.pairs;
                b.n1 = b.n2 = null;
                b.sleeping = !1;
                b.next = qa.zpp_pool;
                qa.zpp_pool = b;
                this.pairs = a
            }
            this.dtree.clear();
            this.stree.clear()
        },
        rayMultiCast: function(a, b, c, d) {
            null == this.openlist && (this.openlist = new un);
            this.sync_broadphase();
            a.validate_dir();
            var e = a.maxdist >= Math.POSITIVE_INFINITY,
                d = null == d ? new oh : d;
            if (null != this.dtree.root && a.aabbtest(this.dtree.root.aabb))
                if (e) this.openlist.add(this.dtree.root);
                else { var f = a.aabbsect(this.dtree.root.aabb);
                    0 <= f && f < a.maxdist && this.openlist.add(this.dtree.root) } null !=
                this.stree.root && a.aabbtest(this.stree.root.aabb) && (e ? this.openlist.add(this.stree.root) : (f = a.aabbsect(this.stree.root.aabb), 0 <= f && f < a.maxdist && this.openlist.add(this.stree.root)));
            for (; null != this.openlist.head;)
                if (f = this.openlist.pop_unsafe(), null == f.child1) { if (f = f.shape, null == c || f.filter.shouldCollide(c)) f.type == h.id_ShapeType_CIRCLE ? a.circlesect2(f.circle, b, d) : a.aabbtest(f.aabb) && a.polysect2(f.polygon, b, d) } else {
                    if (null != f.child1 && a.aabbtest(f.child1.aabb))
                        if (e) this.openlist.add(f.child1);
                        else {
                            var g =
                                a.aabbsect(f.child1.aabb);
                            0 <= g && g < a.maxdist && this.openlist.add(f.child1)
                        } null != f.child2 && a.aabbtest(f.child2.aabb) && (e ? this.openlist.add(f.child2) : (g = a.aabbsect(f.child2.aabb), 0 <= g && g < a.maxdist && this.openlist.add(f.child2)))
                } this.openlist.clear();
            return d
        },
        __class__: Ol
    });
    var Kb = function() { this.waket = 0;
        this.sleep = !1;
        this.comps = null;
        this.length = 0;
        this._inuse = this.modified = this.pushmod = !1;
        this.next = null;
        this.comps = new vn };
    g["zpp_nape.space.ZPP_Island"] = Kb;
    Kb.__name__ = ["zpp_nape", "space", "ZPP_Island"];
    Kb.prototype = { inlined_add: function(a) { a._inuse = !0;
            a.next = this.next;
            this.next = a;
            this.modified = !0;
            this.length++; return a }, pop: function() { this.inlined_pop() }, inlined_pop: function() { var a = this.next;
            this.next = a.next;
            a._inuse = !1;
            null == this.next && (this.pushmod = !0);
            this.modified = !0;
            this.length-- }, inlined_pop_unsafe: function() { var a = this.next;
            this.pop(); return a }, __class__: Kb };
    var Bc = function() {
        this.woken = !1;
        this.waket = 0;
        this.sleeping = !1;
        this.body = this.constraint = this.island = null;
        this.isBody = !1;
        this.rank =
            0;
        this.next = this.parent = null;
        this.sleeping = !1;
        this.island = null;
        this.parent = this;
        this.rank = 0;
        this.woken = !1
    };
    g["zpp_nape.space.ZPP_Component"] = Bc;
    Bc.__name__ = ["zpp_nape", "space", "ZPP_Component"];
    Bc.prototype = { __class__: Bc };
    var Yb = function() { this.freed = this.lazydel = !1;
        this.length = 0;
        this._inuse = this.modified = this.pushmod = !1;
        this.int1 = this.int2 = this.next = null;
        this.id = this.di = 0;
        this.arbiters = new Qh };
    g["zpp_nape.space.ZPP_CallbackSet"] = Yb;
    Yb.__name__ = ["zpp_nape", "space", "ZPP_CallbackSet"];
    Yb.get = function(a,
        b) { var c;
        null == Yb.zpp_pool ? c = new Yb : (c = Yb.zpp_pool, Yb.zpp_pool = c.next, c.next = null);
        c.freed = !1;
        c.lazydel = !1;
        c.COLLISIONstate = h.id_PreFlag_ACCEPT;
        c.COLLISIONstamp = 0;
        c.SENSORstate = h.id_PreFlag_ACCEPT;
        c.SENSORstamp = 0;
        c.FLUIDstate = h.id_PreFlag_ACCEPT;
        c.FLUIDstamp = 0;
        a.id < b.id ? (c.int1 = a, c.int2 = b) : (c.int1 = b, c.int2 = a);
        c.id = c.int1.id;
        c.di = c.int2.id; return c };
    Yb.prototype = {
        inlined_add: function(a) { a._inuse = !0;
            a.next = this.next;
            this.next = a;
            this.modified = !0;
            this.length++; return a },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.next;
            this.next = a.next;
            a._inuse = !1;
            null == this.next && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.next;
            this.pop(); return a },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.next, this.next = c = b.next, null == this.next && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            b._inuse = !1;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        remove_arb: function(a) { this.arbiters.inlined_try_remove(a) },
        empty_arb: function(a) { var b;
            b = !0; for (var c = this.arbiters.head; null != c;)
                if (0 == (c.elt.type & a)) c = c.next;
                else { b = !1; break } return b },
        sleeping: function() { var a;
            a = !0; for (var b = this.arbiters.head; null != b;)
                if (b.elt.sleeping) b = b.next;
                else { a = !1; break } return a },
        __class__: Yb
    };
    var wn = function(a) { this.cbsets = this.space = null;
        null == Ad.zpp_pool ? this.cbsets = new Ad : (this.cbsets = Ad.zpp_pool, Ad.zpp_pool = this.cbsets.next, this.cbsets.next = null);
        null;
        this.cbsets.lt = Ca.setlt;
        this.space = a };
    g["zpp_nape.space.ZPP_CbSetManager"] =
        wn;
    wn.__name__ = ["zpp_nape", "space", "ZPP_CbSetManager"];
    wn.prototype = {
        get: function(a) { if (null == a.head) return null; var b;
            null == Ca.zpp_pool ? b = new Ca : (b = Ca.zpp_pool, Ca.zpp_pool = b.next, b.next = null);
            null; var c = b.cbTypes;
            b.cbTypes = a; var d = this.cbsets.find_weak(b);
            null != d ? a = d.data : (a = Ca.get(a), this.cbsets.insert(a), a.manager = this);
            b.cbTypes = c;
            b.free();
            b.next = Ca.zpp_pool;
            Ca.zpp_pool = b; return a },
        remove: function(a) {
            for (this.cbsets.remove(a); null != a.cbpairs.head;) {
                var b = a.cbpairs.pop_unsafe();
                b.a != b.b && (a == b.a ?
                    b.b.cbpairs.remove(b) : b.a.cbpairs.remove(b));
                b.a = b.b = null;
                b.listeners.clear();
                b.next = jc.zpp_pool;
                jc.zpp_pool = b
            }
            a.manager = null
        },
        clear: function() {},
        validate: function() { if (!this.cbsets.empty()) { for (var a = this.cbsets.parent; null != a.prev;) a = a.prev; for (; null != a;)
                    if (a.data.validate(), null != a.next)
                        for (a = a.next; null != a.prev;) a = a.prev;
                    else { for (; null != a.parent && a == a.parent.next;) a = a.parent;
                        a = a.parent } } },
        pair: function(a, b) {
            for (var c = null, d = (a.cbpairs.length < b.cbpairs.length ? a.cbpairs : b.cbpairs).head; null != d;) {
                var e =
                    d.elt;
                if (e.a == a && e.b == b || e.a == b && e.b == a) { c = e; break } d = d.next
            }
            null == c && (c = jc.get(a, b), a.cbpairs.add(c), b != a && b.cbpairs.add(c));
            c.zip_listeners && (c.zip_listeners = !1, c.__validate());
            return c
        },
        __class__: wn
    };
    var Sm = function(a, b) {
        this.precb = this.prelisteners = null;
        this.continuous = !1;
        this.toiEvents = null;
        this.pre_dt = 0;
        this.c_arbiters_true = this.c_arbiters_false = this.f_arbiters = this.s_arbiters = this.live = this.wrap_live = this.live_constraints = this.wrap_livecon = this.staticsleep = this.islands = this.listeners = this.wrap_listeners =
            this.callbacks = this.callbackset_list = this.cbsets = null;
        this.sortcontacts = !1;
        this.time = 0;
        this.midstep = !1;
        this.global_lin_drag = this.global_ang_drag = this.stamp = 0;
        this.wrap_gravity = this.bodies = this.wrap_bodies = this.compounds = this.wrap_compounds = this.constraints = this.wrap_constraints = this.kinematics = this.bphase = this.__static = null;
        this.gravityx = this.gravityy = 0;
        this.outer = null;
        this.toiEvents = new xn;
        this.global_ang_drag = this.global_lin_drag = 0.015;
        this.precb = new hk;
        this.precb.zpp_inner = new Ld;
        this.sortcontacts = !0;
        this.pre_dt = 0;
        var c;
        if (!(c = null == b)) null == h.Broadphase_DYNAMIC_AABB_TREE && (h.internal = !0, h.Broadphase_DYNAMIC_AABB_TREE = new sg, h.internal = !1), c = b == h.Broadphase_DYNAMIC_AABB_TREE;
        c ? this.bphase = new Ol(this) : (null == h.Broadphase_SWEEP_AND_PRUNE && (h.internal = !0, h.Broadphase_SWEEP_AND_PRUNE = new sg, h.internal = !1), b == h.Broadphase_SWEEP_AND_PRUNE && (this.bphase = new Pl(this)));
        this.time = 0;
        null != a ? (this.gravityx = a.x, this.gravityy = a.y) : this.gravityy = this.gravityx = 0;
        this.bodies = new Rf;
        this.wrap_bodies = Ge.get(this.bodies);
        this.wrap_bodies.zpp_inner.adder = m(this, this.bodies_adder);
        this.wrap_bodies.zpp_inner.subber = m(this, this.bodies_subber);
        this.compounds = new Fg;
        this.wrap_compounds = bf.get(this.compounds);
        this.wrap_compounds.zpp_inner.adder = m(this, this.compounds_adder);
        this.wrap_compounds.zpp_inner.subber = m(this, this.compounds_subber);
        this.kinematics = new Rf;
        this.c_arbiters_true = new Ql;
        this.c_arbiters_false = new Ql;
        this.f_arbiters = new yn;
        this.s_arbiters = new zn;
        this.islands = new Kb;
        this.live = new Rf;
        this.wrap_live = Ge.get(this.live,
            !0);
        this.staticsleep = new Rf;
        this.constraints = new hf;
        this.wrap_constraints = De.get(this.constraints);
        this.wrap_constraints.zpp_inner.adder = m(this, this.constraints_adder);
        this.wrap_constraints.zpp_inner.subber = m(this, this.constraints_subber);
        this.live_constraints = new hf;
        this.wrap_livecon = De.get(this.live_constraints, !0);
        this.__static = Fe.__static();
        this.__static.zpp_inner.space = this;
        this.callbacks = new Ld;
        this.midstep = !1;
        this.listeners = new Rl;
        this.wrap_listeners = $e.get(this.listeners);
        this.wrap_listeners.zpp_inner.adder =
            m(this, this.listeners_adder);
        this.wrap_listeners.zpp_inner.subber = m(this, this.listeners_subber);
        this.callbackset_list = new Yb;
        this.mrca1 = new jf;
        this.mrca2 = new jf;
        this.prelisteners = new Cg;
        this.cbsets = new wn(this)
    };
    g["zpp_nape.space.ZPP_Space"] = Sm;
    Sm.__name__ = ["zpp_nape", "space", "ZPP_Space"];
    Sm.prototype = {
        getgravity: function() {
            this.wrap_gravity = aa.get(this.gravityx, this.gravityy, null);
            this.wrap_gravity.zpp_inner._inuse = !0;
            this.wrap_gravity.zpp_inner._invalidate = m(this, this.gravity_invalidate);
            this.wrap_gravity.zpp_inner._validate =
                m(this, this.gravity_validate)
        },
        gravity_invalidate: function(a) {
            this.gravityx = a.x;
            this.gravityy = a.y;
            for (var a = new Fg, b = this.bodies.head; null != b;) { var c = b.elt;
                c.world || (c.component.waket = this.stamp + (this.midstep ? 0 : 1), c.type == h.id_BodyType_KINEMATIC && (c.kinematicDelaySleep = !0), c.component.sleeping && this.really_wake(c, !1));
                b = b.next }
            for (b = this.compounds.head; null != b;) a.add(b.elt), b = b.next;
            for (; null != a.head;) {
                b = a.pop_unsafe();
                for (c = b.bodies.head; null != c;) {
                    var d = c.elt;
                    d.world || (d.component.waket = this.stamp +
                        (this.midstep ? 0 : 1), d.type == h.id_BodyType_KINEMATIC && (d.kinematicDelaySleep = !0), d.component.sleeping && this.really_wake(d, !1));
                    c = c.next
                }
                for (b = b.compounds.head; null != b;) a.add(b.elt), b = b.next
            }
        },
        gravity_validate: function() { this.wrap_gravity.zpp_inner.x = this.gravityx;
            this.wrap_gravity.zpp_inner.y = this.gravityy },
        clear: function() {
            for (; null != this.listeners.head;) this.remListener(this.listeners.pop_unsafe());
            for (; null != this.callbackset_list.next;) {
                var a = this.callbackset_list.pop_unsafe();
                a.arbiters.clear();
                a.int1 = a.int2 = null;
                a.id = a.di = -1;
                a.freed = !0;
                null;
                a.next = Yb.zpp_pool;
                Yb.zpp_pool = a
            }
            for (; null != this.c_arbiters_true.head;) this.c_arbiters_true.pop_unsafe().retire();
            for (; null != this.c_arbiters_false.head;) this.c_arbiters_false.pop_unsafe().retire();
            for (; null != this.s_arbiters.head;) this.s_arbiters.pop_unsafe().retire();
            for (; null != this.f_arbiters.head;) this.f_arbiters.pop_unsafe().retire();
            for (this.bphase.clear(); null != this.bodies.head;) {
                a = this.bodies.pop_unsafe();
                if (null != a.component) {
                    var b = a.component.island;
                    if (null != b) { for (; null != b.comps.head;) { var c = b.comps.pop_unsafe();
                            c.sleeping = !1;
                            c.island = null;
                            c.parent = c;
                            c.rank = 0 } b.next = Kb.zpp_pool;
                        Kb.zpp_pool = b }
                }
                a.removedFromSpace();
                a.space = null
            }
            for (; null != this.constraints.head;) { a = this.constraints.pop_unsafe(); if (null != a.component && (b = a.component.island, null != b)) { for (; null != b.comps.head;) c = b.comps.pop_unsafe(), c.sleeping = !1, c.island = null, c.parent = c, c.rank = 0;
                    b.next = Kb.zpp_pool;
                    Kb.zpp_pool = b } a.removedFromSpace();
                a.space = null } this.kinematics.clear();
            for (a = new Fg; null !=
                this.compounds.head;) b = this.compounds.pop_unsafe(), a.add(b);
            for (; null != a.head;) {
                b = a.pop_unsafe();
                b.removedFromSpace();
                b.space = null;
                for (c = b.bodies.head; null != c;) { var d = c.elt; if (null != d.component) { var e = d.component.island; if (null != e) { for (; null != e.comps.head;) { var f = e.comps.pop_unsafe();
                                f.sleeping = !1;
                                f.island = null;
                                f.parent = f;
                                f.rank = 0 } e.next = Kb.zpp_pool;
                            Kb.zpp_pool = e } } d.removedFromSpace();
                    d.space = null;
                    c = c.next }
                for (c = b.constraints.head; null != c;) {
                    d = c.elt;
                    if (null != d.component && (e = d.component.island, null !=
                            e)) { for (; null != e.comps.head;) f = e.comps.pop_unsafe(), f.sleeping = !1, f.island = null, f.parent = f, f.rank = 0;
                        e.next = Kb.zpp_pool;
                        Kb.zpp_pool = e } d.removedFromSpace();
                    d.space = null;
                    c = c.next
                }
                for (b = b.compounds.head; null != b;) a.add(b.elt), b = b.next
            }
            this.staticsleep.clear();
            this.live.clear();
            this.live_constraints.clear();
            this.time = this.stamp = 0;
            this.mrca1.clear();
            this.mrca2.clear();
            this.prelisteners.clear();
            this.cbsets.clear()
        },
        bodies_adder: function(a) {
            return a.zpp_inner.space != this ? (null != a.zpp_inner.space && a.zpp_inner.space.outer.zpp_inner.wrap_bodies.remove(a),
                this.addBody(a.zpp_inner), !0) : !1
        },
        bodies_subber: function(a) { this.remBody(a.zpp_inner) },
        compounds_adder: function(a) { return a.zpp_inner.space != this ? (null != a.zpp_inner.space && a.zpp_inner.space.wrap_compounds.remove(a), this.addCompound(a.zpp_inner), !0) : !1 },
        compounds_subber: function(a) { this.remCompound(a.zpp_inner) },
        constraints_adder: function(a) { return a.zpp_inner.space != this ? (null != a.zpp_inner.space && a.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(a), this.addConstraint(a.zpp_inner), !0) : !1 },
        constraints_subber: function(a) { this.remConstraint(a.zpp_inner) },
        listeners_adder: function(a) { return a.zpp_inner.space != this ? (null != a.zpp_inner.space && a.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(a), this.addListener(a.zpp_inner), !0) : !1 },
        listeners_subber: function(a) { this.remListener(a.zpp_inner) },
        addListener: function(a) { a.space = this;
            a.addedToSpace();
            null != a.interaction && null },
        remListener: function(a) { null != a.interaction && null;
            a.removedFromSpace();
            a.space = null },
        add_callbackset: function(a) {
            a.int1.cbsets.inlined_add(a);
            a.int2.cbsets.inlined_add(a);
            this.callbackset_list.inlined_add(a)
        },
        remove_callbackset: function(a) { a.lazydel = !0;
            a.int1.cbsets.inlined_try_remove(a);
            a.int2.cbsets.inlined_try_remove(a) },
        transmitType: function(a, b) {
            a.world || (a.component.waket = this.stamp + (this.midstep ? 0 : 1), a.type == h.id_BodyType_KINEMATIC && (a.kinematicDelaySleep = !0), a.component.sleeping && this.really_wake(a, !1));
            a.type == h.id_BodyType_DYNAMIC ? this.live.remove(a) : a.type == h.id_BodyType_KINEMATIC ? (this.kinematics.remove(a), this.staticsleep.remove(a)) :
                a.type == h.id_BodyType_STATIC && this.staticsleep.remove(a);
            a.type = b;
            a.type == h.id_BodyType_KINEMATIC && this.kinematics.add(a);
            a.type == h.id_BodyType_STATIC && this.static_validation(a);
            a.component.sleeping = !0;
            a.world || (a.component.waket = this.stamp + (this.midstep ? 0 : 1), a.type == h.id_BodyType_KINEMATIC && (a.kinematicDelaySleep = !0), a.component.sleeping && this.really_wake(a, !0))
        },
        added_shape: function(a, b) {
            null == b && (b = !1);
            if (!b) {
                var c = a.body;
                c.world || (c.component.waket = this.stamp + (this.midstep ? 0 : 1), c.type == h.id_BodyType_KINEMATIC &&
                    (c.kinematicDelaySleep = !0), c.component.sleeping && this.really_wake(c, !1))
            }
            this.bphase.insert(a);
            a.addedToSpace()
        },
        removed_shape: function(a, b) {
            null == b && (b = !1);
            var c = this,
                d = a.body;
            b || d.wake();
            for (var e = null, f = d.arbiters.head; null != f;) {
                var g = [f.elt];
                if (g[0].ws1 == a || g[0].ws2 == a) {
                    if (0 != g[0].present) {
                        this.MRCA_chains(g[0].ws1, g[0].ws2);
                        for (f = this.mrca1.head; null != f;) {
                            for (var i = f.elt, j = this.mrca2.head; null != j;) {
                                var k = j.elt,
                                    m = i.cbSet,
                                    n = k.cbSet;
                                m.validate();
                                n.validate();
                                m.manager.pair(m, n).empty_intersection() ||
                                    (k = [jb.get(i, k)], k[0].remove_arb(g[0]), g[0].present--, m.manager.pair(m, n).forall(h.id_CbEvent_END, function(a, b) { return function(d) { if (0 != (d.itype & b[0].type) && a[0].empty_arb(d.itype)) { var e = c.push_callback(d);
                                                e.event = h.id_CbEvent_END;
                                                jb.int_callback(a[0], d, e);
                                                e.set = a[0] } } }(k, g)), null == k[0].arbiters.head && this.remove_callbackset(k[0]));
                                j = j.next
                            }
                            f = f.next
                        }
                    }
                    g[0].b1 != d && g[0].b1.type == h.id_BodyType_DYNAMIC && (f = g[0].b1, f.world || (f.component.waket = this.stamp + (this.midstep ? 0 : 1), f.type == h.id_BodyType_KINEMATIC &&
                        (f.kinematicDelaySleep = !0), f.component.sleeping && this.really_wake(f, !1)));
                    g[0].b2 != d && g[0].b2.type == h.id_BodyType_DYNAMIC && (f = g[0].b2, f.world || (f.component.waket = this.stamp + (this.midstep ? 0 : 1), f.type == h.id_BodyType_KINEMATIC && (f.kinematicDelaySleep = !0), f.component.sleeping && this.really_wake(f, !1)));
                    g[0].cleared = !0;
                    (null == d || g[0].b2 == d) && g[0].b1.arbiters.inlined_try_remove(g[0]);
                    (null == d || g[0].b1 == d) && g[0].b2.arbiters.inlined_try_remove(g[0]);
                    null != g[0].pair && (g[0].pair.arb = null, g[0].pair = null);
                    g[0].active = !1;
                    this.f_arbiters.modified = !0;
                    f = d.arbiters.erase(e)
                } else e = f, f = f.next
            }
            this.bphase.remove(a);
            a.removedFromSpace()
        },
        addConstraint: function(a) { a.space = this;
            a.addedToSpace();
            a.active && (a.component.sleeping = !0, this.wake_constraint(a, !0)) },
        remConstraint: function(a) { a.active && (this.wake_constraint(a, !0), this.live_constraints.remove(a));
            a.removedFromSpace();
            a.space = null },
        addCompound: function(a) {
            a.space = this;
            a.addedToSpace();
            for (var b = a.bodies.head; null != b;) this.addBody(b.elt), b = b.next;
            for (b = a.constraints.head; null !=
                b;) this.addConstraint(b.elt), b = b.next;
            for (a = a.compounds.head; null != a;) this.addCompound(a.elt), a = a.next
        },
        remCompound: function(a) { for (var b = a.bodies.head; null != b;) this.remBody(b.elt), b = b.next; for (b = a.constraints.head; null != b;) this.remConstraint(b.elt), b = b.next; for (b = a.compounds.head; null != b;) this.remCompound(b.elt), b = b.next;
            a.removedFromSpace();
            a.space = null },
        addBody: function(a, b) {
            null == b && (b = -1);
            a.space = this;
            a.addedToSpace();
            a.component.sleeping = !0;
            a.world || (a.component.waket = this.stamp + (this.midstep ?
                0 : 1), a.type == h.id_BodyType_KINEMATIC && (a.kinematicDelaySleep = !0), a.component.sleeping && this.really_wake(a, !0));
            for (var c = a.shapes.head; null != c;) this.added_shape(c.elt, !0), c = c.next;
            a.type == h.id_BodyType_STATIC ? this.static_validation(a) : a.type != h.id_BodyType_DYNAMIC && b != h.id_BodyType_KINEMATIC && this.kinematics.add(a)
        },
        remBody: function(a, b) {
            null == b && (b = -1);
            a.type == h.id_BodyType_STATIC ? (a.world || (a.component.waket = this.stamp + (this.midstep ? 0 : 1), a.type == h.id_BodyType_KINEMATIC && (a.kinematicDelaySleep = !0),
                a.component.sleeping && this.really_wake(a, !0)), this.staticsleep.remove(a)) : a.type == h.id_BodyType_DYNAMIC ? (a.world || (a.component.waket = this.stamp + (this.midstep ? 0 : 1), a.type == h.id_BodyType_KINEMATIC && (a.kinematicDelaySleep = !0), a.component.sleeping && this.really_wake(a, !0)), this.live.remove(a)) : (b != h.id_BodyType_KINEMATIC && this.kinematics.remove(a), a.world || (a.component.waket = this.stamp + (this.midstep ? 0 : 1), a.type == h.id_BodyType_KINEMATIC && (a.kinematicDelaySleep = !0), a.component.sleeping && this.really_wake(a,
                !0)), this.staticsleep.remove(a));
            for (var c = a.shapes.head; null != c;) this.removed_shape(c.elt, !0), c = c.next;
            a.removedFromSpace();
            a.space = null
        },
        rayMultiCast: function(a, b, c, d) { return this.bphase.rayMultiCast(a.zpp_inner, b, null == c ? null : c.zpp_inner, d) },
        push_callback: function(a) { var b;
            null == Ld.zpp_pool ? b = new Ld : (b = Ld.zpp_pool, Ld.zpp_pool = b.next, b.next = null);
            null;
            this.callbacks.push(b);
            b.listener = a; return b },
        step: function(a, b, c) {
            var d = this;
            this.time += a;
            this.pre_dt = a;
            this.midstep = !0;
            this.stamp++;
            this.validation();
            this.bphase.broadphase(this, !0);
            this.prestep(a);
            if (this.sortcontacts) {
                var e = this.c_arbiters_false;
                if (null != e.head && null != e.head.next) {
                    var f = e.head,
                        g = null,
                        i = null,
                        j = null,
                        k = null,
                        m = 1,
                        n, o, p;
                    do { n = 0;
                        i = f; for (g = f = null; null != i;) { n++;
                            j = i;
                            o = 0; for (p = m; null != j && o < m;) o++, j = j.next; for (; 0 < o || 0 < p && null != j;) 0 == o ? (k = j, j = j.next, p--) : 0 == p || null == j ? (k = i, i = i.next, o--) : (i.elt.active && j.elt.active ? i.elt.oc1.dist < j.elt.oc1.dist : 1) ? (k = i, i = i.next, o--) : (k = j, j = j.next, p--), null != g ? g.next = k : f = k, g = k;
                            i = j } g.next = null;
                        m <<= 1 } while (1 <
                        n);
                    e.head = f;
                    e.modified = !0;
                    e.pushmod = !0
                }
            }
            this.updateVel(a);
            this.warmStart();
            this.iterateVel(b);
            for (b = this.kinematics.head; null != b;) e = b.elt, e.pre_posx = e.posx, e.pre_posy = e.posy, e.pre_rot = e.rot, b = b.next;
            for (b = this.live.head; null != b;) e = b.elt, e.pre_posx = e.posx, e.pre_posy = e.posy, e.pre_rot = e.rot, b = b.next;
            this.updatePos(a);
            this.continuous = !0;
            this.continuousCollisions(a);
            this.continuous = !1;
            this.iteratePos(c);
            for (c = this.kinematics.head; null != c;) b = c.elt, e = b.pre_rot != b.rot, !(b.posx == b.pre_posx && b.posy == b.pre_posy) &&
                b.invalidate_pos(), e && b.invalidate_rot(), c = c.next;
            for (c = this.live.head; null != c;) b = c.elt, e = b.pre_rot != b.rot, !(b.posx == b.pre_posx && b.posy == b.pre_posy) && b.invalidate_pos(), e && b.invalidate_rot(), c = c.next;
            c = null;
            for (b = this.staticsleep.head; null != b;) e = b.elt, e.type != h.id_BodyType_KINEMATIC || 0 == e.velx && 0 == e.vely && 0 == e.angvel ? e.kinematicDelaySleep ? (e.kinematicDelaySleep = !1, b = b.next) : (e.component.sleeping = !0, b = this.staticsleep.inlined_erase(c)) : (c = b, b = b.next);
            this.doForests(a);
            this.sleepArbiters();
            this.midstep = !1;
            c = null;
            for (a = this.callbackset_list.next; null != a;) b = [a], null == b[0].arbiters.head ? (a = this.callbackset_list.inlined_erase(c), b = b[0], b.int1 = b.int2 = null, b.id = b.di = -1, b.freed = !0, null, b.next = Yb.zpp_pool, Yb.zpp_pool = b) : (c = [b[0].sleeping()], Ca.find_all(b[0].int1.cbSet, b[0].int2.cbSet, h.id_CbEvent_ONGOING, function(a, b) { return function(c) { if ((!a[0] || c.allowSleepingCallbacks) && !b[0].empty_arb(c.itype)) { var e = d.push_callback(c);
                            e.event = h.id_CbEvent_ONGOING;
                            jb.int_callback(b[0], c, e);
                            e.set = b[0] } } }(c, b)), c = a,
                a = a.next);
            for (; !this.callbacks.empty();) a = this.callbacks.pop(), a.listener.type == h.id_ListenerType_BODY ? a.listener.body.handler(a.wrapper_body()) : a.listener.type == h.id_ListenerType_CONSTRAINT ? a.listener.constraint.handler(a.wrapper_con()) : a.listener.type == h.id_ListenerType_INTERACTION && a.listener.interaction.handleri(a.wrapper_int()), a.int1 = a.int2 = null, a.body = null, a.constraint = null, a.listener = null, null != a.wrap_arbiters && (a.wrap_arbiters.zpp_inner.inner = null), a.set = null, a.next = Ld.zpp_pool, Ld.zpp_pool =
                a
        },
        continuousCollisions: function(a) {
            var b = 2 * Math.PI / a;
            this.bphase.broadphase(this, !1);
            for (var c = 0; 1 > c && null != this.toiEvents.head;) {
                for (var d = null, c = 2, e = !1, f = null, g = null, i = this.toiEvents.head; null != i;) {
                    var j = i.elt,
                        k = j.s1.body,
                        m = j.s2.body;
                    if (k.sweepFrozen && m.sweepFrozen)
                        if (0 != j.toi && Y.testCollide_safe(j.s1, j.s2)) j.toi = 0;
                        else { i = this.toiEvents.erase(g);
                            j.next = Wb.zpp_pool;
                            Wb.zpp_pool = j; continue } if (j.frozen1 != k.sweepFrozen || j.frozen2 != m.sweepFrozen)
                        if (j.kinematic) {
                            i = this.toiEvents.erase(g);
                            j.next = Wb.zpp_pool;
                            Wb.zpp_pool = j;
                            continue
                        } else if (j.frozen1 = k.sweepFrozen, j.frozen2 = m.sweepFrozen, j.frozen1 && (k = j.s1, j.s1 = j.s2, j.s2 = k, j.frozen1 = !1, j.frozen2 = !0), Sc.staticSweep(j, a, 0, u.collisionSlopCCD), 0 > j.toi) { i = this.toiEvents.erase(g);
                        j.next = Wb.zpp_pool;
                        Wb.zpp_pool = j; continue }
                    if (0 <= j.toi && (j.toi < c || !e && j.kinematic)) d = j, c = j.toi, e = j.kinematic, f = g;
                    g = i;
                    i = i.next
                }
                if (null == d) break;
                this.toiEvents.erase(f);
                c = d.toi;
                e = d.s1.body;
                f = d.s2.body;
                e.sweepFrozen || (e.sweepIntegrate(c * a), e.sweepValidate(d.s1));
                f.sweepFrozen || (f.sweepIntegrate(c *
                    a), f.sweepValidate(d.s2));
                g = this.narrowPhase(d.s1, d.s2, !0, d.arbiter, !0);
                null == g ? null != d.arbiter && null != d.arbiter.pair && (d.arbiter.pair.arb = null, d.arbiter.pair = null) : !this.presteparb(g, a, !0) && g.type == ha.COL && g.active && 0 != (g.immState & h.id_ImmState_ACCEPT) && (g.colarb.warmStart(), g.colarb.applyImpulseVel(), g.colarb.applyImpulseVel(), g.colarb.applyImpulseVel(), g.colarb.applyImpulseVel(), e.sweep_angvel = e.angvel % b, f.sweep_angvel = f.angvel % b);
                null != g && g.active && 0 != (g.immState & h.id_ImmState_ACCEPT) && g.type ==
                    ha.COL && (!e.sweepFrozen && e.type != h.id_BodyType_KINEMATIC && (e.sweepFrozen = !0, e.angvel = d.failed ? e.sweep_angvel = 0 : d.slipped ? e.sweep_angvel *= u.angularCCDSlipScale : e.sweep_angvel), !f.sweepFrozen && f.type != h.id_BodyType_KINEMATIC && (f.sweepFrozen = !0, f.angvel = d.failed ? f.sweep_angvel = 0 : d.slipped ? f.sweep_angvel *= u.angularCCDSlipScale : f.sweep_angvel))
            }
            for (; null != this.toiEvents.head;) b = this.toiEvents.pop_unsafe(), b.next = Wb.zpp_pool, Wb.zpp_pool = b;
            for (b = this.kinematics.head; null != b;) d = b.elt, d.sweepIntegrate(a),
                d.sweepTime = 0, b = b.next;
            for (b = this.live.head; null != b;) d = b.elt, d.sweepFrozen || d.sweepIntegrate(a), d.sweepTime = 0, b = b.next
        },
        continuousEvent: function(a, b, c, d) {
            if (a.body.sweepFrozen && b.body.sweepFrozen || a.body.disableCCD || b.body.disableCCD || null != d && null == d.colarb || 0 >= this.interactionType(a, b, a.body, b.body)) return d;
            var e = a.body,
                f = b.body;
            if (c || e.bullet || f.bullet) {
                var g;
                null == Wb.zpp_pool ? g = new Wb : (g = Wb.zpp_pool, Wb.zpp_pool = g.next, g.next = null);
                g.failed = !1;
                g.s1 = g.s2 = null;
                g.arbiter = null;
                e = e.type == h.id_BodyType_KINEMATIC ||
                    f.type == h.id_BodyType_KINEMATIC;
                c && !e ? (a.body.type != h.id_BodyType_DYNAMIC ? (g.s2 = a, g.s1 = b) : (g.s1 = a, g.s2 = b), g.kinematic = !1, Sc.staticSweep(g, this.pre_dt, 0, u.collisionSlopCCD)) : (g.s1 = a, g.s2 = b, g.kinematic = e, g.s1.body.sweepFrozen || g.s2.body.sweepFrozen ? (g.s1.body.sweepFrozen && (a = g.s1, g.s1 = g.s2, g.s2 = a, g.frozen1 = !1, g.frozen2 = !0), Sc.staticSweep(g, this.pre_dt, 0, u.collisionSlopCCD)) : Sc.dynamicSweep(g, this.pre_dt, 0, u.collisionSlopCCD));
                c && 0 > g.toi || g.failed ? (c = g, c.next = Wb.zpp_pool, Wb.zpp_pool = c) : (this.toiEvents.add(g),
                    g.frozen1 = g.s1.body.sweepFrozen, g.frozen2 = g.s2.body.sweepFrozen, g.arbiter = null != d ? d.colarb : null)
            }
            return d
        },
        bodyCbWake: function(a) { if (a.type == h.id_BodyType_DYNAMIC && null != a.cbSet)
                if (this.midstep)
                    for (var b = a.cbSet.bodylisteners.head; null != b;) { var c = b.elt;
                        c.event == h.id_CbEvent_WAKE && (c = this.push_callback(c), c.event = h.id_CbEvent_WAKE, c.body = a);
                        b = b.next } else a.component.woken = !0 },
        bodyCbSleep: function(a) {
            if (a.type == h.id_BodyType_DYNAMIC && null != a.cbSet)
                for (var b = a.cbSet.bodylisteners.head; null != b;) {
                    var c =
                        b.elt;
                    c.event == h.id_CbEvent_SLEEP && (c = this.push_callback(c), c.event = h.id_CbEvent_SLEEP, c.body = a);
                    b = b.next
                }
        },
        constraintCbWake: function(a) { if (null != a.cbSet)
                if (this.midstep)
                    for (var b = a.cbSet.conlisteners.head; null != b;) { var c = b.elt;
                        c.event == h.id_CbEvent_WAKE && (c = this.push_callback(c), c.event = h.id_CbEvent_WAKE, c.constraint = a);
                        b = b.next } else a.component.woken = !0 },
        constraintCbSleep: function(a) {
            if (null != a.cbSet)
                for (var b = a.cbSet.conlisteners.head; null != b;) {
                    var c = b.elt;
                    c.event == h.id_CbEvent_SLEEP && (c = this.push_callback(c),
                        c.event = h.id_CbEvent_SLEEP, c.constraint = a);
                    b = b.next
                }
        },
        constraintCbBreak: function(a) { if (null != a.cbSet)
                for (var b = a.cbSet.conlisteners.head; null != b;) { var c = b.elt;
                    c.event == h.id_CbEvent_BREAK && (c = this.push_callback(c), c.event = h.id_CbEvent_BREAK, c.constraint = a);
                    b = b.next } },
        nullListenerType: function(a, b) {
            for (var c = new jf, d = a.interactors.head; null != d;) c.add(d.elt), d = d.next;
            if (a != b)
                for (d = b.interactors.head; null != d;) c.add(d.elt), d = d.next;
            for (; null != c.head;)
                if (d = c.pop_unsafe(), null != d.icompound) {
                    for (var d = d.icompound,
                            e = d.bodies.head; null != e;) c.add(e.elt), e = e.next;
                    for (d = d.compounds.head; null != d;) c.add(d.elt), d = d.next
                } else {
                    e = null != d.ibody ? d.ibody : d.ishape.body;
                    d = null != d.ishape ? d.ishape : null;
                    for (e = e.arbiters.head; null != e;) {
                        var f = e.elt;
                        if (0 != f.present && (null == d || f.ws1 == d || f.ws2 == d)) {
                            this.MRCA_chains(f.ws1, f.ws2);
                            for (f = this.mrca1.head; null != f;) {
                                var g = f.elt;
                                if (!(g.cbSet != a && g.cbSet != b))
                                    for (var h = this.mrca2.head; null != h;) {
                                        var i = h.elt;
                                        if (!(g.cbSet == a && i.cbSet != b || g.cbSet == b && i.cbSet != a))
                                            if (i = jb.get(g, i), null != i) {
                                                for (; null !=
                                                    i.arbiters.head;) i.arbiters.pop_unsafe().present--;
                                                this.remove_callbackset(i)
                                            } h = h.next
                                    }
                                f = f.next
                            }
                        }
                        e = e.next
                    }
                }
        },
        nullInteractorType: function(a, b) {
            null == b && (b = a);
            if (null != a.icompound) { for (var c = a.icompound, d = c.bodies.head; null != d;) this.nullInteractorType(d.elt, b), d = d.next; for (c = c.compounds.head; null != c;) this.nullInteractorType(c.elt, b), c = c.next } else {
                d = null != a.ibody ? a.ibody : a.ishape.body;
                c = null != a.ishape ? a.ishape : null;
                for (d = d.arbiters.head; null != d;) {
                    var e = d.elt;
                    if (0 != e.present && (null == c || e.ws1 == c || e.ws2 ==
                            c)) { this.MRCA_chains(e.ws1, e.ws2); for (var f = this.mrca1.head; null != f;) { for (var g = f.elt, h = this.mrca2.head; null != h;) { var i = h.elt;
                                g != b && i != b || (i = jb.get(g, i), null != i && (e.present--, i.remove_arb(e), null == i.arbiters.head && this.remove_callbackset(i)));
                                h = h.next } f = f.next } } d = d.next
                }
            }
        },
        freshListenerType: function(a, b) {
            for (var c = new jf, d = a.interactors.head; null != d;) c.add(d.elt), d = d.next;
            if (a != b)
                for (d = b.interactors.head; null != d;) c.add(d.elt), d = d.next;
            for (; null != c.head;)
                if (d = c.pop_unsafe(), null != d.icompound) {
                    for (var d =
                            d.icompound, e = d.bodies.head; null != e;) c.add(e.elt), e = e.next;
                    for (d = d.compounds.head; null != d;) c.add(d.elt), d = d.next
                } else {
                    e = null != d.ibody ? d.ibody : d.ishape.body;
                    d = null != d.ishape ? d.ishape : null;
                    for (e = e.arbiters.head; null != e;) {
                        var f = e.elt;
                        if (f.presentable && (null == d || f.ws1 == d || f.ws2 == d)) {
                            this.MRCA_chains(f.ws1, f.ws2);
                            for (var g = this.mrca1.head; null != g;) {
                                var h = g.elt;
                                if (!(h.cbSet != a && h.cbSet != b))
                                    for (var i = this.mrca2.head; null != i;) {
                                        var j = i.elt;
                                        if (!(h.cbSet == a && j.cbSet != b || h.cbSet == b && j.cbSet != a)) {
                                            var k = jb.get(h,
                                                j);
                                            null == k && (k = Yb.get(h, j), this.add_callbackset(k));
                                            if (j = !k.arbiters.inlined_has(f)) k.arbiters.inlined_add(f), j = !0;
                                            j && f.present++
                                        }
                                        i = i.next
                                    }
                                g = g.next
                            }
                        }
                        e = e.next
                    }
                }
        },
        freshInteractorType: function(a, b) {
            null == b && (b = a);
            if (null != a.icompound) { for (var c = a.icompound, d = c.bodies.head; null != d;) this.freshInteractorType(d.elt, b), d = d.next; for (c = c.compounds.head; null != c;) this.freshInteractorType(c.elt, b), c = c.next } else {
                d = null != a.ibody ? a.ibody : a.ishape.body;
                c = null != a.ishape ? a.ishape : null;
                for (d = d.arbiters.head; null != d;) {
                    var e =
                        d.elt;
                    if (e.presentable && (null == c || e.ws1 == c || e.ws2 == c)) { this.MRCA_chains(e.ws1, e.ws2); for (var f = this.mrca1.head; null != f;) { for (var g = f.elt, h = this.mrca2.head; null != h;) { var i = h.elt; if (!(g != b && i != b)) { var j = g.cbSet,
                                        k = i.cbSet;
                                    j.validate();
                                    k.validate(); if (!j.manager.pair(j, k).empty_intersection()) { j = jb.get(g, i);
                                        null == j && (j = Yb.get(g, i), this.add_callbackset(j)); if (i = !j.arbiters.inlined_has(e)) j.arbiters.inlined_add(e), i = !0;
                                        i && e.present++ } } h = h.next } f = f.next } } d = d.next
                }
            }
        },
        wakeCompound: function(a) {
            for (var b = a.bodies.head; null !=
                b;) { var c = b.elt;
                c.world || (c.component.waket = this.stamp + (this.midstep ? 0 : 1), c.type == h.id_BodyType_KINEMATIC && (c.kinematicDelaySleep = !0), c.component.sleeping && this.really_wake(c, !1));
                b = b.next }
            for (b = a.constraints.head; null != b;) this.wake_constraint(b.elt), b = b.next;
            for (a = a.compounds.head; null != a;) this.wakeCompound(a.elt), a = a.next
        },
        wakeIsland: function(a) {
            for (; null != a.comps.head;) {
                var b = a.comps.pop_unsafe();
                b.waket = this.stamp + (this.midstep ? 0 : 1);
                if (b.isBody) {
                    var c = b.body;
                    this.live.add(c);
                    for (var d = c.arbiters.head; null !=
                        d;) { var e = d.elt;
                        e.sleeping && (e.sleeping = !1, e.up_stamp += this.stamp - e.sleep_stamp, e.type == ha.COL ? (e = e.colarb, e.stat ? this.c_arbiters_true.inlined_add(e) : this.c_arbiters_false.inlined_add(e)) : e.type == ha.FLUID ? this.f_arbiters.inlined_add(e.fluidarb) : this.s_arbiters.inlined_add(e.sensorarb));
                        d = d.next } this.bodyCbWake(c);
                    b.sleeping = !1;
                    b.island = null;
                    b.parent = b;
                    b.rank = 0;
                    if (c.type != h.id_BodyType_STATIC)
                        for (b = c.shapes.head; null != b;) c = b.elt, null != c.node && this.bphase.sync(c), b = b.next
                } else c = b.constraint, this.live_constraints.inlined_add(c),
                    this.constraintCbWake(c), b.sleeping = !1, b.island = null, b.parent = b, b.rank = 0
            }
            a.next = Kb.zpp_pool;
            Kb.zpp_pool = a
        },
        non_inlined_wake: function(a, b) { null == b && (b = !1);
            a.world || (a.component.waket = this.stamp + (this.midstep ? 0 : 1), a.type == h.id_BodyType_KINEMATIC && (a.kinematicDelaySleep = !0), a.component.sleeping && this.really_wake(a, b)) },
        really_wake: function(a, b) {
            null == b && (b = !1);
            if (null == a.component.island) {
                a.component.sleeping = !1;
                a.type == h.id_BodyType_KINEMATIC || a.type == h.id_BodyType_STATIC ? this.staticsleep.inlined_add(a) :
                    this.live.inlined_add(a);
                for (var c = a.constraints.head; null != c;) { var d = c.elt;
                    d.space == this && this.wake_constraint(d);
                    c = c.next }
                for (c = a.arbiters.head; null != c;) {
                    d = c.elt;
                    if (d.sleeping)
                        if (d.sleeping = !1, d.up_stamp += this.stamp + (this.midstep ? 0 : 1) - d.sleep_stamp, d.type == ha.COL) { var e = d.colarb;
                            e.stat ? this.c_arbiters_true.inlined_add(e) : this.c_arbiters_false.inlined_add(e) } else d.type == ha.FLUID ? this.f_arbiters.inlined_add(d.fluidarb) : this.s_arbiters.inlined_add(d.sensorarb);
                    d.type != ha.SENSOR && !d.cleared && d.up_stamp >=
                        this.stamp && 0 != (d.immState & h.id_ImmState_ACCEPT) && (d.b1.type == h.id_BodyType_DYNAMIC && d.b1.component.sleeping && (e = d.b1, e.world || (e.component.waket = this.stamp + (this.midstep ? 0 : 1), e.type == h.id_BodyType_KINEMATIC && (e.kinematicDelaySleep = !0), e.component.sleeping && this.really_wake(e, !1))), d.b2.type == h.id_BodyType_DYNAMIC && d.b2.component.sleeping && (d = d.b2, d.world || (d.component.waket = this.stamp + (this.midstep ? 0 : 1), d.type == h.id_BodyType_KINEMATIC && (d.kinematicDelaySleep = !0), d.component.sleeping && this.really_wake(d,
                            !1))));
                    c = c.next
                }!b && a.type == h.id_BodyType_DYNAMIC && this.bodyCbWake(a);
                if (!b && !this.bphase.is_sweep && a.type != h.id_BodyType_STATIC)
                    for (c = a.shapes.head; null != c;) d = c.elt, null != d.node && this.bphase.sync(d), c = c.next
            } else this.wakeIsland(a.component.island)
        },
        wake_constraint: function(a, b) {
            null == b && (b = !1);
            return a.active && (a.component.waket = this.stamp + (this.midstep ? 0 : 1), a.component.sleeping) ? (null == a.component.island ? (a.component.sleeping = !1, this.live_constraints.inlined_add(a), a.wake_connected(), b || this.constraintCbWake(a)) :
                this.wakeIsland(a.component.island), !0) : !1
        },
        doForests: function(a) {
            for (var b = this.c_arbiters_false.head; null != b;) {
                var c = b.elt;
                if (!c.cleared && c.up_stamp == this.stamp && 0 != (c.immState & h.id_ImmState_ACCEPT) && c.b1.type == h.id_BodyType_DYNAMIC && c.b2.type == h.id_BodyType_DYNAMIC) {
                    var d;
                    if (c.b1.component == c.b1.component.parent) d = c.b1.component;
                    else { d = c.b1.component; for (var e = null; d != d.parent;) { var f = d.parent;
                            d.parent = e;
                            e = d;
                            d = f } for (; null != e;) f = e.parent, e.parent = d, e = f }
                    if (c.b2.component == c.b2.component.parent) c =
                        c.b2.component;
                    else { c = c.b2.component; for (e = null; c != c.parent;) f = c.parent, c.parent = e, e = c, c = f; for (; null != e;) f = e.parent, e.parent = c, e = f } d != c && (d.rank < c.rank ? d.parent = c : d.rank > c.rank ? c.parent = d : (c.parent = d, d.rank++))
                }
                b = b.next
            }
            for (b = this.f_arbiters.head; null != b;) {
                c = b.elt;
                if (!c.cleared && c.up_stamp == this.stamp && 0 != (c.immState & h.id_ImmState_ACCEPT) && c.b1.type == h.id_BodyType_DYNAMIC && c.b2.type == h.id_BodyType_DYNAMIC) {
                    if (c.b1.component == c.b1.component.parent) d = c.b1.component;
                    else {
                        d = c.b1.component;
                        for (e = null; d !=
                            d.parent;) f = d.parent, d.parent = e, e = d, d = f;
                        for (; null != e;) f = e.parent, e.parent = d, e = f
                    }
                    if (c.b2.component == c.b2.component.parent) c = c.b2.component;
                    else { c = c.b2.component; for (e = null; c != c.parent;) f = c.parent, c.parent = e, e = c, c = f; for (; null != e;) f = e.parent, e.parent = c, e = f } d != c && (d.rank < c.rank ? d.parent = c : d.rank > c.rank ? c.parent = d : (c.parent = d, d.rank++))
                }
                b = b.next
            }
            for (b = this.live_constraints.head; null != b;) b.elt.forest(), b = b.next;
            for (; null != this.live.head;) {
                d = this.live.inlined_pop_unsafe();
                b = d.component;
                if (b == b.parent) c =
                    b;
                else { c = b; for (e = null; c != c.parent;) f = c.parent, c.parent = e, e = c, c = f; for (; null != e;) f = e.parent, e.parent = c, e = f } null == c.island && (null == Kb.zpp_pool ? c.island = new Kb : (c.island = Kb.zpp_pool, Kb.zpp_pool = c.island.next, c.island.next = null), c.island.waket = 0, this.islands.inlined_add(c.island), c.island.sleep = !0);
                b.island = c.island;
                b.island.comps.inlined_add(b);
                d = d.atRest(a);
                b.island.sleep = b.island.sleep && d;
                b.waket > b.island.waket && (b.island.waket = b.waket)
            }
            for (; null != this.live_constraints.head;) {
                a = this.live_constraints.inlined_pop_unsafe().component;
                if (a == a.parent) b = a;
                else { b = a; for (d = null; b != b.parent;) c = b.parent, b.parent = d, d = b, b = c; for (; null != d;) c = d.parent, d.parent = b, d = c } a.island = b.island;
                a.island.comps.inlined_add(a);
                a.waket > a.island.waket && (a.island.waket = a.waket)
            }
            for (; null != this.islands.next;)
                if (a = this.islands.inlined_pop_unsafe(), a.sleep)
                    for (a = a.comps.head; null != a;) {
                        d = a.elt;
                        if (d.isBody) { b = d.body;
                            b.velx = 0;
                            b.vely = 0;
                            b.angvel = 0;
                            d.sleeping = !0; for (d = b.shapes.head; null != d;) this.bphase.sync(d.elt), d = d.next;
                            this.bodyCbSleep(b) } else this.constraintCbSleep(d.constraint),
                            d.sleeping = !0;
                        a = a.next
                    } else { for (; null != a.comps.head;) b = a.comps.inlined_pop_unsafe(), b.waket = a.waket, b.isBody ? this.live.inlined_add(b.body) : this.live_constraints.inlined_add(b.constraint), b.sleeping = !1, b.island = null, b.parent = b, b.rank = 0;
                        a.next = Kb.zpp_pool;
                        Kb.zpp_pool = a }
        },
        sleepArbiters: function() {
            var a = null,
                b = this.c_arbiters_true,
                c = b.head,
                d = null != this.c_arbiters_false;
            d && null == c && (d = !1, c = this.c_arbiters_false.head, b = this.c_arbiters_false, a = null);
            for (; null != c;) {
                var e = c.elt;
                e.b1.component.sleeping && e.b2.component.sleeping ?
                    (e.sleep_stamp = this.stamp, e.sleeping = !0, c = b.inlined_erase(a)) : (a = c, c = c.next);
                d && null == c && (d = !1, c = this.c_arbiters_false.head, b = this.c_arbiters_false, a = null)
            }
            a = null;
            b = this.f_arbiters;
            c = b.head;
            d = !1;
            for (; null != c;) e = c.elt, e.b1.component.sleeping && e.b2.component.sleeping ? (e.sleep_stamp = this.stamp, e.sleeping = !0, c = b.inlined_erase(a)) : (a = c, c = c.next), d && null == c && (d = !1, a = b = null);
            a = null;
            b = this.s_arbiters;
            c = b.head;
            d = !1;
            for (; null != c;) e = c.elt, e.b1.component.sleeping && e.b2.component.sleeping ? (e.sleep_stamp = this.stamp,
                e.sleeping = !0, c = b.inlined_erase(a)) : (a = c, c = c.next), d && null == c && (d = !1, a = b = null)
        },
        static_validation: function(a) { null != a.shapes.head && a.validate_aabb();
            a.validate_mass();
            a.validate_inertia(); for (var b = a.shapes.head; null != b;) { var c = b.elt;
                c.type == h.id_ShapeType_POLYGON && (c.polygon.splice_collinear(), c.polygon.validate_gaxi());
                b = b.next } a.sweepFrozen = !0 },
        validation: function() {
            this.cbsets.validate();
            for (var a = this.live.head; null != a;) {
                var b = a.elt;
                b.sweepRadius = 0;
                for (var c = b.shapes.head; null != c;) {
                    var d = c.elt;
                    d.type == h.id_ShapeType_POLYGON && (d.polygon.splice_collinear(), d.polygon.validate_gaxi());
                    d.validate_sweepRadius();
                    d.sweepRadius > b.sweepRadius && (b.sweepRadius = d.sweepRadius);
                    c = c.next
                }
                b.validate_mass();
                b.validate_inertia();
                null != b.shapes.head && (b.validate_aabb(), b.validate_worldCOM());
                b.validate_gravMass();
                b.zip_axis && (b.zip_axis = !1, b.axisx = Math.sin(b.rot), b.axisy = Math.cos(b.rot), null);
                if (b.component.woken && null != b.cbSet)
                    for (c = b.cbSet.bodylisteners.head; null != c;) d = c.elt, d.event == h.id_CbEvent_WAKE &&
                        (d = this.push_callback(d), d.event = h.id_CbEvent_WAKE, d.body = b), c = c.next;
                b.component.woken = !1;
                for (b = b.shapes.head; null != b;) this.bphase.sync(b.elt), b = b.next;
                a = a.next
            }
            for (a = this.kinematics.head; null != a;) {
                b = a.elt;
                b.sweepRadius = 0;
                for (c = b.shapes.head; null != c;) d = c.elt, d.type == h.id_ShapeType_POLYGON && (d.polygon.splice_collinear(), d.polygon.validate_gaxi()), d.validate_sweepRadius(), d.sweepRadius > b.sweepRadius && (b.sweepRadius = d.sweepRadius), c = c.next;
                b.validate_mass();
                b.validate_inertia();
                null != b.shapes.head &&
                    (b.validate_aabb(), b.validate_worldCOM());
                b.validate_gravMass();
                b.zip_axis && (b.zip_axis = !1, b.axisx = Math.sin(b.rot), b.axisy = Math.cos(b.rot), null);
                for (b = b.shapes.head; null != b;) this.bphase.sync(b.elt), b = b.next;
                a = a.next
            }
            for (a = this.live_constraints.head; null != a;) { b = a.elt; if (b.active) { if (b.component.woken && null != b.cbSet)
                        for (c = b.cbSet.conlisteners.head; null != c;) d = c.elt, d.event == h.id_CbEvent_WAKE && (d = this.push_callback(d), d.event = h.id_CbEvent_WAKE, d.constraint = b), c = c.next;
                    b.component.woken = !1 } a = a.next }
        },
        updateVel: function(a) { for (var b = 1 - a * this.global_lin_drag, c = 1 - a * this.global_ang_drag, d = this.live.head; null != d;) { var e = d.elt; if (0 != e.smass) { var f = a * e.imass;
                    e.velx = b * e.velx + (e.forcex + this.gravityx * e.gravMass) * f;
                    e.vely = b * e.vely + (e.forcey + this.gravityy * e.gravMass) * f } if (0 != e.sinertia) { var g = f = 0,
                        f = e.worldCOMx - e.posx,
                        g = e.worldCOMy - e.posy;
                    e.angvel = c * e.angvel + (e.torque + (this.gravityy * f - this.gravityx * g) * e.gravMass) * a * e.iinertia } d = d.next } },
        updatePos: function(a) {
            for (var b = 2 * Math.PI / a, c = this.live.head; null != c;) {
                var d =
                    c.elt;
                d.pre_posx = d.posx;
                d.pre_posy = d.posy;
                d.pre_rot = d.rot;
                d.sweepTime = 0;
                d.sweep_angvel = d.angvel % b;
                d.sweepIntegrate(a);
                if (d.disableCCD) d.sweepFrozen = !0, d.bullet = !1;
                else {
                    var e = u.staticCCDLinearThreshold * d.sweepRadius,
                        f = u.staticCCDAngularThreshold;
                    if ((d.velx * d.velx + d.vely * d.vely) * a * a > e * e || d.angvel * d.angvel * a * a > f * f || d.type == h.id_BodyType_KINEMATIC) {
                        e = d.sweep_angvel;
                        0 > e && (e = -e);
                        for (var f = 1 / e, g = d.shapes.head; null != g;) {
                            var i = g.elt,
                                j = i.aabb,
                                k = j.minx,
                                m = j.miny,
                                n = j.maxx,
                                o = j.maxy,
                                p = 0.008333333333333333 * e * a * i.sweepCoef |
                                0;
                            8 < p && (p = 8);
                            var r = e * a / p;
                            d.sweepIntegrate(a);
                            i.type == h.id_ShapeType_CIRCLE ? i.circle._force_validate_aabb() : i.polygon._force_validate_aabb();
                            k < j.minx ? j.minx = k : k = j.minx;
                            m < j.miny ? j.miny = m : m = j.miny;
                            n > j.maxx ? j.maxx = n : n = j.maxx;
                            o > j.maxy ? j.maxy = o : o = j.maxy;
                            for (var s = 1; s < p;) { var t = s++;
                                d.sweepIntegrate(r * t * f);
                                i.type == h.id_ShapeType_CIRCLE ? i.circle._force_validate_aabb() : i.polygon._force_validate_aabb();
                                k < j.minx ? j.minx = k : k = j.minx;
                                m < j.miny ? j.miny = m : m = j.miny;
                                n > j.maxx ? j.maxx = n : n = j.maxx;
                                o > j.maxy ? j.maxy = o : o = j.maxy } this.bphase.sync(i);
                            g = g.next
                        }
                        d.sweepFrozen = !1;
                        if (d.type == h.id_BodyType_DYNAMIC && d.bulletEnabled && (e = u.bulletCCDLinearThreshold * d.sweepRadius, f = u.bulletCCDAngularThreshold, (d.velx * d.velx + d.vely * d.vely) * a * a > e * e || d.angvel * d.angvel * a * a > f * f)) d.bullet = !0
                    } else d.sweepFrozen = !0, d.bullet = !1
                }
                c = c.next
            }
            for (c = this.kinematics.head; null != c;) {
                d = c.elt;
                d.pre_posx = d.posx;
                d.pre_posy = d.posy;
                d.pre_rot = d.rot;
                d.sweepTime = 0;
                d.sweep_angvel = d.angvel % b;
                d.sweepIntegrate(a);
                if (d.disableCCD) d.sweepFrozen = !0, d.bullet = !1;
                else if (e = u.staticCCDLinearThreshold *
                    d.sweepRadius, f = u.staticCCDAngularThreshold, (d.velx * d.velx + d.vely * d.vely) * a * a > e * e || d.angvel * d.angvel * a * a > f * f || d.type == h.id_BodyType_KINEMATIC) {
                    e = d.sweep_angvel;
                    0 > e && (e = -e);
                    f = 1 / e;
                    for (g = d.shapes.head; null != g;) {
                        i = g.elt;
                        j = i.aabb;
                        k = j.minx;
                        m = j.miny;
                        n = j.maxx;
                        o = j.maxy;
                        p = 0.008333333333333333 * e * a * i.sweepCoef | 0;
                        8 < p && (p = 8);
                        r = e * a / p;
                        d.sweepIntegrate(a);
                        i.type == h.id_ShapeType_CIRCLE ? i.circle._force_validate_aabb() : i.polygon._force_validate_aabb();
                        k < j.minx ? j.minx = k : k = j.minx;
                        m < j.miny ? j.miny = m : m = j.miny;
                        n > j.maxx ? j.maxx =
                            n : n = j.maxx;
                        o > j.maxy ? j.maxy = o : o = j.maxy;
                        for (s = 1; s < p;) t = s++, d.sweepIntegrate(r * t * f), i.type == h.id_ShapeType_CIRCLE ? i.circle._force_validate_aabb() : i.polygon._force_validate_aabb(), k < j.minx ? j.minx = k : k = j.minx, m < j.miny ? j.miny = m : m = j.miny, n > j.maxx ? j.maxx = n : n = j.maxx, o > j.maxy ? j.maxy = o : o = j.maxy;
                        this.bphase.sync(i);
                        g = g.next
                    }
                    d.sweepFrozen = !1;
                    if (d.type == h.id_BodyType_DYNAMIC && d.bulletEnabled && (e = u.bulletCCDLinearThreshold * d.sweepRadius, f = u.bulletCCDAngularThreshold, (d.velx * d.velx + d.vely * d.vely) * a * a > e * e || d.angvel *
                            d.angvel * a * a > f * f)) d.bullet = !0
                } else d.sweepFrozen = !0, d.bullet = !1;
                c = c.next
            }
        },
        presteparb: function(a, b, c) {
            null == c && (c = !1);
            var d = this;
            if (!a.cleared && a.b1.component.sleeping && a.b2.component.sleeping) return a.sleep_stamp = this.stamp, a.sleeping = !0;
            if (!a.cleared || 0 != a.present || a.intchange) {
                var e = !c && a.up_stamp == this.stamp - 1 && !a.cleared && !a.intchange,
                    c = a.fresh && !a.cleared && !a.intchange;
                e && (a.endGenerated = this.stamp);
                if (c || e || a.cleared || a.intchange) {
                    this.inlined_MRCA_chains(a.ws1, a.ws2);
                    for (e = this.mrca1.head; null !=
                        e;) {
                        for (var f = e.elt, g = this.mrca2.head; null != g;) {
                            var i = g.elt,
                                j = f.cbSet,
                                k = i.cbSet;
                            if (!j.manager.pair(j, k).empty_intersection()) {
                                var m = [jb.get(f, i)];
                                if (c || a.intchange) {
                                    null == m[0] && (m[0] = Yb.get(f, i), this.add_callbackset(m[0]));
                                    j.manager.pair(j, k).forall(h.id_CbEvent_BEGIN, function(b) { return function(c) { if (0 != (c.itype & a.type) && b[0].empty_arb(c.itype)) { var e = d.push_callback(c);
                                                e.event = h.id_CbEvent_BEGIN;
                                                jb.int_callback(b[0], c, e);
                                                e.set = b[0] } } }(m));
                                    if (i = !m[0].arbiters.inlined_has(a)) m[0].arbiters.inlined_add(a),
                                        i = !0;
                                    i && a.present++
                                } else a.present--, m[0].remove_arb(a), j.manager.pair(j, k).forall(h.id_CbEvent_END, function(b) { return function(c) { if (0 != (c.itype & a.type) && b[0].empty_arb(c.itype)) { var e = d.push_callback(c);
                                            e.event = h.id_CbEvent_END;
                                            jb.int_callback(b[0], c, e);
                                            e.set = b[0] } } }(m)), null == m[0].arbiters.head && this.remove_callbackset(m[0])
                            }
                            g = g.next
                        }
                        e = e.next
                    }
                }
                a.fresh = !1;
                a.intchange = !1
            }
            if (a.cleared || a.up_stamp + (a.type == ha.COL ? u.arbiterExpirationDelay : 0) < this.stamp) return a.type == ha.SENSOR ? a.sensorarb.retire() :
                a.type == ha.FLUID ? a.fluidarb.retire() : a.colarb.retire(), !0;
            c = a.active;
            a.active = a.presentable = a.up_stamp == this.stamp;
            0 != (a.immState & h.id_ImmState_ACCEPT) ? a.active && a.type != ha.SENSOR && (null != a.colarb ? a.colarb.preStep(b) && (a.active = !1) : a.fluidarb.preStep(this, b)) : null != a.colarb && a.colarb.cleanupContacts() && (a.active = !1);
            c != a.active && (a.b1.arbiters.modified = !0, a.b2.arbiters.modified = !0, this.c_arbiters_true.modified = this.c_arbiters_false.modified = !0, this.s_arbiters.modified = this.f_arbiters.modified = !0);
            return !1
        },
        prestep: function(a) {
            for (var b = null, c = this.live_constraints.head; null != c;) { var d = c.elt;
                d.preStep(a) ? (c = this.live_constraints.erase(b), d.broken(), this.constraintCbBreak(d), d.removeOnBreak ? (d.component.sleeping = !0, this.midstep = !1, null != d.compound ? d.compound.wrap_constraints.remove(d.outer) : this.wrap_constraints.remove(d.outer), this.midstep = !0) : d.active = !1, d.clearcache()) : (b = c, c = c.next) }
            var b = null,
                c = this.c_arbiters_true,
                d = c.head,
                e = null != this.c_arbiters_false;
            e && null == d && (e = !1, d = this.c_arbiters_false.head,
                c = this.c_arbiters_false, b = null);
            for (; null != d;) this.presteparb(d.elt, a) ? d = c.inlined_erase(b) : (b = d, d = d.next), e && null == d && (e = !1, d = this.c_arbiters_false.head, c = this.c_arbiters_false, b = null);
            b = null;
            c = this.f_arbiters;
            d = c.head;
            e = !1;
            for (; null != d;) this.presteparb(d.elt, a) ? d = c.inlined_erase(b) : (b = d, d = d.next), e && null == d && (e = !1, b = c = null);
            b = null;
            c = this.s_arbiters;
            d = c.head;
            e = !1;
            for (; null != d;) this.presteparb(d.elt, a) ? d = c.inlined_erase(b) : (b = d, d = d.next), e && null == d && (e = !1, b = c = null)
        },
        warmStart: function() {
            for (var a =
                    this.f_arbiters.head; null != a;) { var b = a.elt;
                b.active && 0 != (b.immState & h.id_ImmState_ACCEPT) && b.warmStart();
                a = a.next } a = this.c_arbiters_false.head;
            b = !0;
            null == a && (a = this.c_arbiters_true.head, b = !1);
            for (; null != a;) { var c = a.elt;
                c.active && 0 != (c.immState & h.id_ImmState_ACCEPT) && c.warmStart();
                a = a.next;
                b && null == a && (a = this.c_arbiters_true.head, b = !1) }
            for (a = this.live_constraints.head; null != a;) a.elt.warmStart(), a = a.next
        },
        iterateVel: function(a) {
            for (var b = 0; b < a;) {
                b++;
                for (var c = this.f_arbiters.head; null != c;) {
                    var d = c.elt;
                    d.active && 0 != (d.immState & h.id_ImmState_ACCEPT) && d.applyImpulseVel();
                    c = c.next
                }
                c = null;
                for (d = this.live_constraints.head; null != d;) { var e = d.elt;
                    e.applyImpulseVel() ? (d = this.live_constraints.erase(c), e.broken(), this.constraintCbBreak(e), e.removeOnBreak ? (e.component.sleeping = !0, this.midstep = !1, null != e.compound ? e.compound.wrap_constraints.remove(e.outer) : this.wrap_constraints.remove(e.outer), this.midstep = !0) : e.active = !1, e.clearcache()) : (c = d, d = d.next) } c = this.c_arbiters_false.head;
                d = !0;
                null == c && (c = this.c_arbiters_true.head,
                    d = !1);
                for (; null != c;) e = c.elt, e.active && 0 != (e.immState & h.id_ImmState_ACCEPT) && e.applyImpulseVel(), c = c.next, d && null == c && (c = this.c_arbiters_true.head, d = !1)
            }
        },
        iteratePos: function(a) {
            for (var b = 0; b < a;) {
                b++;
                for (var c = null, d = this.live_constraints.head; null != d;) {
                    var e = d.elt;
                    !e.__velocity && e.stiff && e.applyImpulsePos() ? (d = this.live_constraints.erase(c), e.broken(), this.constraintCbBreak(e), e.removeOnBreak ? (e.component.sleeping = !0, this.midstep = !1, null != e.compound ? e.compound.wrap_constraints.remove(e.outer) : this.wrap_constraints.remove(e.outer),
                        this.midstep = !0) : e.active = !1, e.clearcache()) : (c = d, d = d.next)
                }
                c = this.c_arbiters_false.head;
                d = !0;
                null == c && (c = this.c_arbiters_true.head, d = !1);
                for (; null != c;) e = c.elt, e.active && 0 != (e.immState & h.id_ImmState_ACCEPT) && e.applyImpulsePos(), c = c.next, d && null == c && (c = this.c_arbiters_true.head, d = !1)
            }
        },
        group_ignore: function(a, b) { var c = a.lookup_group(); if (null == c) return !1; var d = b.lookup_group(); if (null == d) return !1; for (var e = !1; null != c && null != d;) { if (c == d) { e = c.ignore; break } c.depth < d.depth ? d = d.group : c = c.group } return e },
        interactionType: function(a, b, c, d) { var e;
            e = !1; for (var f = c.constraints.head; null != f;) { var g = f.elt; if (g.ignore && g.pair_exists(c.id, d.id)) { e = !0; break } f = f.next } return !e && !this.group_ignore(a, b) ? (a.sensorEnabled || b.sensorEnabled) && a.filter.shouldSense(b.filter) ? 2 : (a.fluidEnabled || b.fluidEnabled) && a.filter.shouldFlow(b.filter) && !(0 == c.imass && 0 == d.imass && 0 == c.iinertia && 0 == d.iinertia) ? 0 : a.filter.shouldCollide(b.filter) && !(0 == c.imass && 0 == d.imass && 0 == c.iinertia && 0 == d.iinertia) ? 1 : -1 : -1 },
        narrowPhase: function(a,
            b, c, d, e) {
            var f = this,
                g = null,
                i = a.body,
                j = b.body,
                k = this.interactionType(a, b, i, j);
            if (-1 != k) {
                var m, n;
                a.type > b.type ? (m = b, n = a) : a.type == b.type ? a.id < b.id ? (m = a, n = b) : (n = a, m = b) : (m = a, n = b);
                var o = m == b;
                if (0 == k) {
                    var p;
                    if (null == d) { for (var r = null, s = (i.arbiters.length < j.arbiters.length ? i : j).arbiters.head; null != s;) { var t = s.elt; if (t.id == m.id && t.di == n.id) { r = t; break } s = s.next } p = r } else p = d;
                    var u = null == p,
                        q, w = !1;
                    u ? (null == tb.zpp_pool ? q = new tb : (q = tb.zpp_pool, tb.zpp_pool = q.next, q.next = null), null) : null == p.fluidarb ? (p.cleared = !0,
                        p.b1.arbiters.inlined_try_remove(p), p.b2.arbiters.inlined_try_remove(p), null != p.pair && (p.pair.arb = null, p.pair = null), p.active = !1, this.f_arbiters.modified = !0, null == tb.zpp_pool ? q = new tb : (q = tb.zpp_pool, tb.zpp_pool = q.next, q.next = null), null, w = u = q.intchange = !0) : q = p.fluidarb;
                    var y = h.id_InteractionType_FLUID;
                    if (u || q.stamp != this.stamp || e)
                        if (q.stamp = this.stamp, Y.flowCollide(m, n, q)) {
                            u ? (q.b1 = a.body, q.ws1 = a, q.b2 = b.body, q.ws2 = b, q.id = m.id, q.di = n.id, q.b1.arbiters.inlined_add(q), q.b2.arbiters.inlined_add(q), q.active = !0, q.present = 0, q.cleared = !1, q.sleeping = !1, q.fresh = !1, q.presentable = !1, q.nx = 0, q.ny = 1, q.dampx = 0, q.dampy = 0, q.adamp = 0, this.f_arbiters.inlined_add(q), q.fresh = !w) : q.fresh = q.up_stamp < this.stamp - 1 || q.endGenerated == this.stamp && e;
                            q.up_stamp = q.stamp;
                            if (q.fresh || 0 == (q.immState & h.id_ImmState_ALWAYS)) {
                                q.immState = h.id_ImmState_ACCEPT;
                                var x = !1;
                                this.inlined_MRCA_chains(q.ws1.id > q.ws2.id ? q.ws2 : q.ws1, q.ws1.id > q.ws2.id ? q.ws1 : q.ws2);
                                for (var z = this.mrca1.head; null != z;) {
                                    for (var A = z.elt, B = this.mrca2.head; null != B;) {
                                        var E =
                                            B.elt,
                                            D = A.cbSet,
                                            G = E.cbSet;
                                        if (!D.manager.pair(D, G).empty_intersection()) {
                                            var C = null,
                                                H = null;
                                            this.prelisteners.inlined_clear();
                                            D.manager.pair(D, G).forall(h.id_CbEvent_PRE, function(a) { return function(b) { 0 != (b.itype & y) && (a[0] = f.prelisteners.inlined_insert(a[0], b), x = x || !b.pure) } }([null]));
                                            if (null != this.prelisteners.head)
                                                if (C = jb.get(A, E), null == C && (H = Yb.get(A, E), this.add_callbackset(H)), null == C || (C.FLUIDstamp != this.stamp || e) && 0 == (C.FLUIDstate & h.id_ImmState_ALWAYS)) {
                                                    null != H && (C = H);
                                                    if (null != C)
                                                        for (var I = this.prelisteners.head; null !=
                                                            I;) I.elt.itype == h.id_InteractionType_ANY && (C.COLLISIONstamp = this.stamp, C.SENSORstamp = this.stamp), C.FLUIDstamp = this.stamp, I = I.next;
                                                    var L = q.active;
                                                    q.active = !0;
                                                    this.precb.zpp_inner.pre_arbiter = q;
                                                    this.precb.zpp_inner.set = C;
                                                    for (var J = this.prelisteners.head; null != J;) {
                                                        var K = J.elt;
                                                        this.precb.zpp_inner.listener = K;
                                                        jb.int_callback(C, K, this.precb.zpp_inner);
                                                        this.precb.zpp_inner.pre_swapped = A != this.precb.zpp_inner.int1;
                                                        var M = K.handlerp(this.precb);
                                                        if (null != M) {
                                                            var N = q,
                                                                O = M,
                                                                P;
                                                            null == h.PreFlag_ACCEPT && (h.internal = !0, h.PreFlag_ACCEPT = new ab, h.internal = !1);
                                                            if (O == h.PreFlag_ACCEPT) P = h.id_ImmState_ACCEPT | h.id_ImmState_ALWAYS;
                                                            else { var Q = M,
                                                                    T;
                                                                null == h.PreFlag_ACCEPT_ONCE && (h.internal = !0, h.PreFlag_ACCEPT_ONCE = new ab, h.internal = !1); if (Q == h.PreFlag_ACCEPT_ONCE) T = h.id_ImmState_ACCEPT;
                                                                else { var U = M;
                                                                    null == h.PreFlag_IGNORE && (h.internal = !0, h.PreFlag_IGNORE = new ab, h.internal = !1);
                                                                    T = U == h.PreFlag_IGNORE ? h.id_ImmState_IGNORE | h.id_ImmState_ALWAYS : h.id_ImmState_IGNORE } P = T } N.immState = P
                                                        }
                                                        J = J.next
                                                    }
                                                    q.active = L;
                                                    if (null != C)
                                                        for (var S = this.prelisteners.head; null !=
                                                            S;) S.elt.itype == h.id_InteractionType_ANY && (C.COLLISIONstate = q.immState, C.SENSORstate = q.immState), C.FLUIDstate = q.immState, S = S.next
                                                } else null == C ? 0 == (q.immState & h.id_ImmState_ALWAYS) && (q.immState = h.id_ImmState_ACCEPT) : q.immState = C.FLUIDstate
                                        }
                                        B = B.next
                                    }
                                    z = z.next
                                }
                                if (x && 0 == (q.immState & h.id_ImmState_ALWAYS)) {
                                    if (q.b1.type == h.id_BodyType_DYNAMIC) {
                                        var R = q.b1;
                                        R.world || (R.component.waket = this.stamp + (this.midstep ? 0 : 1), R.type == h.id_BodyType_KINEMATIC && (R.kinematicDelaySleep = !0), R.component.sleeping && this.really_wake(R,
                                            !1))
                                    }
                                    if (q.b1.type == h.id_BodyType_DYNAMIC) { var X = q.b2;
                                        X.world || (X.component.waket = this.stamp + (this.midstep ? 0 : 1), X.type == h.id_BodyType_KINEMATIC && (X.kinematicDelaySleep = !0), X.component.sleeping && this.really_wake(X, !1)) }
                                }
                            }
                            if (0 != (q.immState & h.id_ImmState_ACCEPT)) {
                                if (q.b1.type == h.id_BodyType_DYNAMIC && q.b1.component.sleeping) { var Z = q.b1;
                                    Z.world || (Z.component.waket = this.stamp + (this.midstep ? 0 : 1), Z.type == h.id_BodyType_KINEMATIC && (Z.kinematicDelaySleep = !0), Z.component.sleeping && this.really_wake(Z, !1)) }
                                if (q.b2.type ==
                                    h.id_BodyType_DYNAMIC && q.b2.component.sleeping) { var $ = q.b2;
                                    $.world || ($.component.waket = this.stamp + (this.midstep ? 0 : 1), $.type == h.id_BodyType_KINEMATIC && ($.kinematicDelaySleep = !0), $.component.sleeping && this.really_wake($, !1)) }
                            }
                            q.sleeping && (q.sleeping = !1, this.f_arbiters.inlined_add(q));
                            g = q
                        } else if (u) { var ba = q;
                        ba.next = tb.zpp_pool;
                        tb.zpp_pool = ba;
                        g = null } else g = q;
                    else g = q
                } else if (1 == k) {
                    var aa;
                    aa = c ? this.c_arbiters_true : this.c_arbiters_false;
                    var V;
                    if (null == d) {
                        for (var fa = null, ea = (i.arbiters.length < j.arbiters.length ?
                                i : j).arbiters.head; null != ea;) { var ga = ea.elt; if (ga.id == m.id && ga.di == n.id) { fa = ga; break } ea = ea.next } V = fa
                    } else V = d;
                    var da = null == V,
                        F, ja = !1;
                    da ? (null == kc.zpp_pool ? F = new kc : (F = kc.zpp_pool, kc.zpp_pool = F.next, F.next = null), null, F.stat = c) : null == V.colarb ? (V.cleared = !0, V.b1.arbiters.inlined_try_remove(V), V.b2.arbiters.inlined_try_remove(V), null != V.pair && (V.pair.arb = null, V.pair = null), V.active = !1, this.f_arbiters.modified = !0, null == kc.zpp_pool ? F = new kc : (F = kc.zpp_pool, kc.zpp_pool = F.next, F.next = null), null, F.intchange = !0, F.stat = c, ja = da = !0) : (F = V.colarb, o = m != F.s1, F.stat != c && (F.stat = c, F.sleeping || ((c ? this.c_arbiters_false : this.c_arbiters_true).remove(F), aa.add(F))));
                    var ka = h.id_InteractionType_COLLISION;
                    if (da || F.stamp != this.stamp || e)
                        if (F.stamp = this.stamp, Y.contactCollide(m, n, F, o)) {
                            da ? (F.b1 = a.body, F.ws1 = a, F.b2 = b.body, F.ws2 = b, F.id = m.id, F.di = n.id, F.b1.arbiters.inlined_add(F), F.b2.arbiters.inlined_add(F), F.active = !0, F.present = 0, F.cleared = !1, F.sleeping = !1, F.fresh = !1, F.presentable = !1, F.s1 = a, F.s2 = b, F.userdef_restitution ||
                                (F.restitution = F.s1.material.elasticity <= Math.NEGATIVE_INFINITY || F.s2.material.elasticity <= Math.NEGATIVE_INFINITY ? 0 : F.s1.material.elasticity >= Math.POSITIVE_INFINITY || F.s2.material.elasticity >= Math.POSITIVE_INFINITY ? 1 : (F.s1.material.elasticity + F.s2.material.elasticity) / 2, 0 > F.restitution && (F.restitution = 0), 1 < F.restitution && (F.restitution = 1)), F.userdef_dyn_fric || (F.dyn_fric = Math.sqrt(F.s1.material.dynamicFriction * F.s2.material.dynamicFriction)), F.userdef_stat_fric || (F.stat_fric = Math.sqrt(F.s1.material.staticFriction *
                                    F.s2.material.staticFriction)), F.userdef_rfric || (F.rfric = Math.sqrt(F.s1.material.rollingFriction * F.s2.material.rollingFriction)), aa.inlined_add(F), F.fresh = !ja) : F.fresh = F.up_stamp < this.stamp - 1 || F.endGenerated == this.stamp && e;
                            F.up_stamp = F.stamp;
                            if (F.fresh || 0 == (F.immState & h.id_ImmState_ALWAYS)) {
                                F.immState = h.id_ImmState_ACCEPT;
                                var ia = !1;
                                this.inlined_MRCA_chains(F.ws1.id > F.ws2.id ? F.ws2 : F.ws1, F.ws1.id > F.ws2.id ? F.ws1 : F.ws2);
                                for (var ha = this.mrca1.head; null != ha;) {
                                    for (var la = ha.elt, ma = this.mrca2.head; null !=
                                        ma;) {
                                        var oa = ma.elt,
                                            na = la.cbSet,
                                            va = oa.cbSet;
                                        if (!na.manager.pair(na, va).empty_intersection()) {
                                            var ca = null,
                                                ra = null;
                                            this.prelisteners.inlined_clear();
                                            na.manager.pair(na, va).forall(h.id_CbEvent_PRE, function(a) { return function(b) { 0 != (b.itype & ka) && (a[0] = f.prelisteners.inlined_insert(a[0], b), ia = ia || !b.pure) } }([null]));
                                            if (null != this.prelisteners.head)
                                                if (ca = jb.get(la, oa), null == ca && (ra = Yb.get(la, oa), this.add_callbackset(ra)), null == ca || (ca.COLLISIONstamp != this.stamp || e) && 0 == (ca.COLLISIONstate & h.id_ImmState_ALWAYS)) {
                                                    null !=
                                                        ra && (ca = ra);
                                                    if (null != ca)
                                                        for (var sa = this.prelisteners.head; null != sa;) sa.elt.itype == h.id_InteractionType_ANY ? (ca.COLLISIONstamp = this.stamp, ca.SENSORstamp = this.stamp, ca.FLUIDstamp = this.stamp) : ca.COLLISIONstamp = this.stamp, sa = sa.next;
                                                    var xa = F.active;
                                                    F.active = !0;
                                                    F.cleanupContacts();
                                                    this.precb.zpp_inner.pre_arbiter = F;
                                                    this.precb.zpp_inner.set = ca;
                                                    for (var ta = this.prelisteners.head; null != ta;) {
                                                        var wa = ta.elt;
                                                        this.precb.zpp_inner.listener = wa;
                                                        jb.int_callback(ca, wa, this.precb.zpp_inner);
                                                        this.precb.zpp_inner.pre_swapped =
                                                            la != this.precb.zpp_inner.int1;
                                                        var ua = wa.handlerp(this.precb);
                                                        if (null != ua) {
                                                            var za = F,
                                                                Aa = ua,
                                                                ya;
                                                            null == h.PreFlag_ACCEPT && (h.internal = !0, h.PreFlag_ACCEPT = new ab, h.internal = !1);
                                                            if (Aa == h.PreFlag_ACCEPT) ya = h.id_ImmState_ACCEPT | h.id_ImmState_ALWAYS;
                                                            else {
                                                                var Ia = ua,
                                                                    Ha;
                                                                null == h.PreFlag_ACCEPT_ONCE && (h.internal = !0, h.PreFlag_ACCEPT_ONCE = new ab, h.internal = !1);
                                                                if (Ia == h.PreFlag_ACCEPT_ONCE) Ha = h.id_ImmState_ACCEPT;
                                                                else {
                                                                    var Ka = ua;
                                                                    null == h.PreFlag_IGNORE && (h.internal = !0, h.PreFlag_IGNORE = new ab, h.internal = !1);
                                                                    Ha = Ka == h.PreFlag_IGNORE ?
                                                                        h.id_ImmState_IGNORE | h.id_ImmState_ALWAYS : h.id_ImmState_IGNORE
                                                                }
                                                                ya = Ha
                                                            }
                                                            za.immState = ya
                                                        }
                                                        ta = ta.next
                                                    }
                                                    F.active = xa;
                                                    if (null != ca)
                                                        for (var Da = this.prelisteners.head; null != Da;) Da.elt.itype == h.id_InteractionType_ANY ? (ca.COLLISIONstate = F.immState, ca.SENSORstate = F.immState, ca.FLUIDstate = F.immState) : ca.COLLISIONstate = F.immState, Da = Da.next
                                                } else null == ca ? 0 == (F.immState & h.id_ImmState_ALWAYS) && (F.immState = h.id_ImmState_ACCEPT) : F.immState = ca.COLLISIONstate
                                        }
                                        ma = ma.next
                                    }
                                    ha = ha.next
                                }
                                if (ia && 0 == (F.immState & h.id_ImmState_ALWAYS)) {
                                    if (F.b1.type ==
                                        h.id_BodyType_DYNAMIC) { var Ba = F.b1;
                                        Ba.world || (Ba.component.waket = this.stamp + (this.midstep ? 0 : 1), Ba.type == h.id_BodyType_KINEMATIC && (Ba.kinematicDelaySleep = !0), Ba.component.sleeping && this.really_wake(Ba, !1)) }
                                    if (F.b1.type == h.id_BodyType_DYNAMIC) { var Ea = F.b2;
                                        Ea.world || (Ea.component.waket = this.stamp + (this.midstep ? 0 : 1), Ea.type == h.id_BodyType_KINEMATIC && (Ea.kinematicDelaySleep = !0), Ea.component.sleeping && this.really_wake(Ea, !1)) }
                                }
                            }
                            if (0 != (F.immState & h.id_ImmState_ACCEPT)) {
                                if (F.b1.type == h.id_BodyType_DYNAMIC &&
                                    F.b1.component.sleeping) { var Fa = F.b1;
                                    Fa.world || (Fa.component.waket = this.stamp + (this.midstep ? 0 : 1), Fa.type == h.id_BodyType_KINEMATIC && (Fa.kinematicDelaySleep = !0), Fa.component.sleeping && this.really_wake(Fa, !1)) }
                                if (F.b2.type == h.id_BodyType_DYNAMIC && F.b2.component.sleeping) { var Ga = F.b2;
                                    Ga.world || (Ga.component.waket = this.stamp + (this.midstep ? 0 : 1), Ga.type == h.id_BodyType_KINEMATIC && (Ga.kinematicDelaySleep = !0), Ga.component.sleeping && this.really_wake(Ga, !1)) }
                            }
                            F.sleeping && (F.sleeping = !1, aa.inlined_add(F));
                            g = F
                        } else if (da) {
                        var Ca =
                            F;
                        Ca.userdef_dyn_fric = !1;
                        Ca.userdef_stat_fric = !1;
                        Ca.userdef_restitution = !1;
                        Ca.userdef_rfric = !1;
                        Ca.__ref_edge1 = Ca.__ref_edge2 = null;
                        Ca.next = kc.zpp_pool;
                        kc.zpp_pool = Ca;
                        g = null
                    } else g = F;
                    else g = F
                } else {
                    var qa;
                    if (null == d) { for (var Sa = null, La = (i.arbiters.length < j.arbiters.length ? i : j).arbiters.head; null != La;) { var Pa = La.elt; if (Pa.id == m.id && Pa.di == n.id) { Sa = Pa; break } La = La.next } qa = Sa } else qa = d;
                    var Ja = null == qa,
                        W, Ua = !1;
                    Ja ? (null == Eb.zpp_pool ? W = new Eb : (W = Eb.zpp_pool, Eb.zpp_pool = W.next, W.next = null), null) : null == qa.sensorarb ?
                        (qa.cleared = !0, qa.b1.arbiters.inlined_try_remove(qa), qa.b2.arbiters.inlined_try_remove(qa), null != qa.pair && (qa.pair.arb = null, qa.pair = null), qa.active = !1, this.f_arbiters.modified = !0, null == Eb.zpp_pool ? W = new Eb : (W = Eb.zpp_pool, Eb.zpp_pool = W.next, W.next = null), null, Ua = Ja = W.intchange = !0) : W = qa.sensorarb;
                    var Ya = h.id_InteractionType_SENSOR;
                    if (Ja || W.stamp != this.stamp || e)
                        if (W.stamp = this.stamp, Y.testCollide(m, n)) {
                            Ja ? (W.b1 = a.body, W.ws1 = a, W.b2 = b.body, W.ws2 = b, W.id = m.id, W.di = n.id, W.b1.arbiters.inlined_add(W), W.b2.arbiters.inlined_add(W),
                                W.active = !0, W.present = 0, W.cleared = !1, W.sleeping = !1, W.fresh = !1, W.presentable = !1, this.s_arbiters.inlined_add(W), W.fresh = !Ua) : W.fresh = W.up_stamp < this.stamp - 1 || W.endGenerated == this.stamp && e;
                            W.up_stamp = W.stamp;
                            if (W.fresh || 0 == (W.immState & h.id_ImmState_ALWAYS)) {
                                W.immState = h.id_ImmState_ACCEPT;
                                var Qa = !1;
                                this.inlined_MRCA_chains(W.ws1.id > W.ws2.id ? W.ws2 : W.ws1, W.ws1.id > W.ws2.id ? W.ws1 : W.ws2);
                                for (var Ma = this.mrca1.head; null != Ma;) {
                                    for (var Na = Ma.elt, Oa = this.mrca2.head; null != Oa;) {
                                        var Ta = Oa.elt,
                                            Ra = Na.cbSet,
                                            $a = Ta.cbSet;
                                        if (!Ra.manager.pair(Ra, $a).empty_intersection()) {
                                            var pa = null,
                                                Va = null;
                                            this.prelisteners.inlined_clear();
                                            Ra.manager.pair(Ra, $a).forall(h.id_CbEvent_PRE, function(a) { return function(b) { 0 != (b.itype & Ya) && (a[0] = f.prelisteners.inlined_insert(a[0], b), Qa = Qa || !b.pure) } }([null]));
                                            if (null != this.prelisteners.head)
                                                if (pa = jb.get(Na, Ta), null == pa && (Va = Yb.get(Na, Ta), this.add_callbackset(Va)), null == pa || (pa.SENSORstamp != this.stamp || e) && 0 == (pa.SENSORstate & h.id_ImmState_ALWAYS)) {
                                                    null != Va && (pa = Va);
                                                    if (null != pa)
                                                        for (var Wa =
                                                                this.prelisteners.head; null != Wa;) Wa.elt.itype == h.id_InteractionType_ANY ? (pa.COLLISIONstamp = this.stamp, pa.SENSORstamp = this.stamp, pa.FLUIDstamp = this.stamp) : pa.SENSORstamp = this.stamp, Wa = Wa.next;
                                                    var fb = W.active;
                                                    W.active = !0;
                                                    this.precb.zpp_inner.pre_arbiter = W;
                                                    this.precb.zpp_inner.set = pa;
                                                    for (var Xa = this.prelisteners.head; null != Xa;) {
                                                        var Za = Xa.elt;
                                                        this.precb.zpp_inner.listener = Za;
                                                        jb.int_callback(pa, Za, this.precb.zpp_inner);
                                                        this.precb.zpp_inner.pre_swapped = Na != this.precb.zpp_inner.int1;
                                                        var bb = Za.handlerp(this.precb);
                                                        if (null != bb) {
                                                            var kb = W,
                                                                lb = bb,
                                                                hb;
                                                            null == h.PreFlag_ACCEPT && (h.internal = !0, h.PreFlag_ACCEPT = new ab, h.internal = !1);
                                                            if (lb == h.PreFlag_ACCEPT) hb = h.id_ImmState_ACCEPT | h.id_ImmState_ALWAYS;
                                                            else {
                                                                var mb = bb,
                                                                    ib;
                                                                null == h.PreFlag_ACCEPT_ONCE && (h.internal = !0, h.PreFlag_ACCEPT_ONCE = new ab, h.internal = !1);
                                                                if (mb == h.PreFlag_ACCEPT_ONCE) ib = h.id_ImmState_ACCEPT;
                                                                else { var nb = bb;
                                                                    null == h.PreFlag_IGNORE && (h.internal = !0, h.PreFlag_IGNORE = new ab, h.internal = !1);
                                                                    ib = nb == h.PreFlag_IGNORE ? h.id_ImmState_IGNORE | h.id_ImmState_ALWAYS : h.id_ImmState_IGNORE } hb =
                                                                    ib
                                                            }
                                                            kb.immState = hb
                                                        }
                                                        Xa = Xa.next
                                                    }
                                                    W.active = fb;
                                                    if (null != pa)
                                                        for (var gb = this.prelisteners.head; null != gb;) gb.elt.itype == h.id_InteractionType_ANY ? (pa.COLLISIONstate = W.immState, pa.SENSORstate = W.immState, pa.FLUIDstate = W.immState) : pa.SENSORstate = W.immState, gb = gb.next
                                                } else null == pa ? 0 == (W.immState & h.id_ImmState_ALWAYS) && (W.immState = h.id_ImmState_ACCEPT) : W.immState = pa.SENSORstate
                                        }
                                        Oa = Oa.next
                                    }
                                    Ma = Ma.next
                                }
                                if (Qa && 0 == (W.immState & h.id_ImmState_ALWAYS)) {
                                    if (W.b1.type != h.id_BodyType_STATIC) {
                                        var cb = W.b1;
                                        cb.world || (cb.component.waket =
                                            this.stamp + (this.midstep ? 0 : 1), cb.type == h.id_BodyType_KINEMATIC && (cb.kinematicDelaySleep = !0), cb.component.sleeping && this.really_wake(cb, !1))
                                    }
                                    if (W.b2.type != h.id_BodyType_STATIC) { var db = W.b2;
                                        db.world || (db.component.waket = this.stamp + (this.midstep ? 0 : 1), db.type == h.id_BodyType_KINEMATIC && (db.kinematicDelaySleep = !0), db.component.sleeping && this.really_wake(db, !1)) }
                                }
                            }
                            W.sleeping && (W.sleeping = !1, this.s_arbiters.inlined_add(W));
                            g = W
                        } else if (Ja) { var ob = W;
                        ob.next = Eb.zpp_pool;
                        Eb.zpp_pool = ob;
                        g = null } else g = W;
                    else g =
                        W
                }
            }
            return g
        },
        MRCA_chains: function(a, b) { this.inlined_MRCA_chains(a, b) },
        inlined_MRCA_chains: function(a, b) {
            this.mrca1.inlined_clear();
            this.mrca2.inlined_clear();
            null != a.cbSet && this.mrca1.inlined_add(a);
            null != a.body.cbSet && this.mrca1.inlined_add(a.body);
            null != b.cbSet && this.mrca2.inlined_add(b);
            null != b.body.cbSet && this.mrca2.inlined_add(b.body);
            for (var c = a.body.compound, d = b.body.compound; c != d;)(null == c ? 0 : c.depth) < (null == d ? 0 : d.depth) ? (null != d.cbSet && this.mrca2.inlined_add(d), d = d.compound) : (null != c.cbSet &&
                this.mrca1.inlined_add(c), c = c.compound)
        },
        __class__: Sm
    };
    var lf = function() { this.next = this.prev = this.shape = this.aabb = null };
    g["zpp_nape.space.ZPP_SweepData"] = lf;
    lf.__name__ = ["zpp_nape", "space", "ZPP_SweepData"];
    lf.prototype = { __class__: lf };
    var Pl = function(a) { this.list = null;
        kf.call(this);
        this.space = a;
        this.is_sweep = !0;
        this.sweep = this };
    g["zpp_nape.space.ZPP_SweepPhase"] = Pl;
    Pl.__name__ = ["zpp_nape", "space", "ZPP_SweepPhase"];
    Pl.__super__ = kf;
    Pl.prototype = k(kf.prototype, {
        __insert: function(a) {
            var b;
            null == lf.zpp_pool ?
                b = new lf : (b = lf.zpp_pool, lf.zpp_pool = b.next, b.next = null);
            null;
            a.sweep = b;
            b.shape = a;
            b.aabb = a.aabb;
            b.next = this.list;
            null != this.list && (this.list.prev = b);
            this.list = b
        },
        __remove: function(a) { var b = a.sweep;
            null == b.prev ? this.list = b.next : b.prev.next = b.next;
            null != b.next && (b.next.prev = b.prev);
            a.sweep = null;
            b.prev = null;
            b.shape = null;
            b.aabb = null;
            b.next = lf.zpp_pool;
            lf.zpp_pool = b },
        sync_broadphase: function() { this.space.validation();
            null != this.list && this.sync_broadphase_fast() },
        sync_broadphase_fast: function() {
            for (var a =
                    this.list.next; null != a;) { var b = a.next,
                    c = a.prev; if (!(a.aabb.minx > c.aabb.minx)) { for (; null != c.prev && c.prev.aabb.minx > a.aabb.minx;) c = c.prev; var d = a.prev;
                    d.next = a.next;
                    null != a.next && (a.next.prev = d);
                    null == c.prev ? (a.prev = null, this.list = a, a.next = c, c.prev = a) : (a.prev = c.prev, c.prev = a, a.prev.next = a, a.next = c) } a = b }
        },
        broadphase: function(a, b) {
            if (null != this.list) {
                this.sync_broadphase_fast();
                for (var c = this.list; null != c;) {
                    for (var d = c.next, e = c.shape, f = e.body, g = c.aabb.maxx; null != d && !(d.aabb.minx > g);) {
                        var i = d.shape,
                            j =
                            i.body;
                        if (j != f && !(f.type == h.id_BodyType_STATIC && j.type == h.id_BodyType_STATIC) && (!f.component.sleeping || !j.component.sleeping)) e.aabb.intersectY(i.aabb) && (b ? a.narrowPhase(e, i, f.type != h.id_BodyType_DYNAMIC || j.type != h.id_BodyType_DYNAMIC, null, !1) : a.continuousEvent(e, i, f.type != h.id_BodyType_DYNAMIC || j.type != h.id_BodyType_DYNAMIC, null, !1));
                        d = d.next
                    }
                    c = c.next
                }
            }
        },
        clear: function() { for (; null != this.list;) this.list.shape.removedFromSpace(), this.__remove(this.list.shape) },
        rayMultiCast: function(a, b, c, d) {
            this.sync_broadphase();
            a.validate_dir();
            var e = a.rayAABB(),
                d = null == d ? new oh : d;
            if (0 == a.dirx)
                for (var f = this.list; null != f && f.aabb.minx <= e.minx;) { if (f.aabb.intersect(e) && (null == c || f.shape.filter.shouldCollide(c))) 0 <= a.aabbsect(f.aabb) && (f.shape.type == h.id_ShapeType_CIRCLE ? a.circlesect2(f.shape.circle, b, d) : a.polysect2(f.shape.polygon, b, d));
                    f = f.next } else if (0 > a.dirx) {
                    for (var f = this.list, g = null; null != f && f.aabb.minx <= e.maxx;) g = f, f = f.next;
                    for (f = g; null != f;) {
                        if (f.aabb.intersect(e) && (null == c || f.shape.filter.shouldCollide(c))) 0 <= a.aabbsect(f.aabb) &&
                            (f.shape.type == h.id_ShapeType_CIRCLE ? a.circlesect2(f.shape.circle, b, d) : a.polysect2(f.shape.polygon, b, d));
                        f = f.prev
                    }
                } else
                    for (f = this.list; null != f && f.aabb.minx <= e.maxx;) { if (f.aabb.intersect(e) && (null == c || f.shape.filter.shouldCollide(c))) 0 <= a.aabbsect(f.aabb) && (f.shape.type == h.id_ShapeType_CIRCLE ? a.circlesect2(f.shape.circle, b, d) : a.polysect2(f.shape.polygon, b, d));
                        f = f.next } null != e.outer && (e.outer.zpp_inner = null, e.outer = null);
            e.wrap_min = e.wrap_max = null;
            e._invalidate = null;
            e._validate = null;
            e.next = Ya.zpp_pool;
            Ya.zpp_pool = e;
            return d
        },
        __class__: Pl
    });
    var qn = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_CallbackSet"] = qn;
    qn.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_CallbackSet"];
    qn.prototype = {
        inlined_add: function(a) { var b;
            null == mf.zpp_pool ? b = new mf : (b = mf.zpp_pool, mf.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        inlined_try_remove: function(a) {
            for (var b = null, c = this.head, d = !1; null != c;) {
                if (c.elt ==
                    a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next
            }
            return d
        },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = mf.zpp_pool;
            mf.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        __class__: qn
    };
    var Rf = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_Body"] = Rf;
    Rf.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Body"];
    Rf.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == Cc.zpp_pool ? b = new Cc : (b = Cc.zpp_pool, Cc.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        insert: function(a, b) { return this.inlined_insert(a, b) },
        inlined_insert: function(a, b) {
            var c;
            null == Cc.zpp_pool ? c = new Cc : (c = Cc.zpp_pool, Cc.zpp_pool = c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++;
            return c
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = Cc.zpp_pool;
            Cc.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) {
            for (var b = null, c = this.head, d = !1; null != c;) {
                if (c.elt == a) {
                    this.inlined_erase(b);
                    d = !0;
                    break
                }
                b = c;
                c = c.next
            }
            return d
        },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = Cc.zpp_pool;
            Cc.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b },
        __class__: Rf
    };
    var Fg = function() {
        this.length =
            0;
        this.modified = this.pushmod = !1;
        this.head = null
    };
    g["zpp_nape.util.ZNPList_ZPP_Compound"] = Fg;
    Fg.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Compound"];
    Fg.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == Od.zpp_pool ? b = new Od : (b = Od.zpp_pool, Od.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() {
            var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = Od.zpp_pool;
            Od.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length--
        },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = Od.zpp_pool;
            Od.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b },
        __class__: Fg
    };
    var Qh = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_Arbiter"] = Qh;
    Qh.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Arbiter"];
    Qh.prototype = {
        inlined_add: function(a) {
            var b;
            null == se.zpp_pool ? b = new se :
                (b = se.zpp_pool, se.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = se.zpp_pool;
            se.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        inlined_try_remove: function(a) {
            for (var b = null,
                    c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next }
            return d
        },
        erase: function(a) { return this.inlined_erase(a) },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = se.zpp_pool;
            se.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        inlined_has: function(a) {
            var b;
            b = !1;
            for (var c = this.head; null != c;) { if (c.elt == a) { b = !0; break } c = c.next }
            return b
        },
        __class__: Qh
    };
    var nn = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_CbSetPair"] = nn;
    nn.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_CbSetPair"];
    nn.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) {
            var b;
            null == $d.zpp_pool ? b = new $d : (b = $d.zpp_pool, $d.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = $d.zpp_pool;
            $d.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) {
            for (var b = null, c = this.head, d = !1; null != c;) {
                if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b =
                    c;
                c = c.next
            }
            return d
        },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = $d.zpp_pool;
            $d.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        __class__: nn
    };
    var sn = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_AABBPair"] = sn;
    sn.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_AABBPair"];
    sn.prototype = {
        inlined_add: function(a) {
            var b;
            null == Pd.zpp_pool ? b = new Pd : (b = Pd.zpp_pool, Pd.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = Pd.zpp_pool;
            Pd.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = Pd.zpp_pool;
            Pd.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        __class__: sn
    };
    var tn = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_Edge"] = tn;
    tn.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Edge"];
    tn.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == Dc.zpp_pool ? b = new Dc : (b = Dc.zpp_pool, Dc.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        insert: function(a, b) { return this.inlined_insert(a, b) },
        inlined_insert: function(a, b) {
            var c;
            null == Dc.zpp_pool ? c = new Dc : (c = Dc.zpp_pool, Dc.zpp_pool = c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++;
            return c
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = Dc.zpp_pool;
            Dc.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        erase: function(a) { return this.inlined_erase(a) },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = Dc.zpp_pool;
            Dc.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        reverse: function() { for (var a = this.head, b = null; null != a;) { var c = a.next;
                a.next = b;
                b = this.head = a;
                a = c } this.pushmod = this.modified = !0 },
        iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b },
        __class__: tn
    };
    var vn = function() {
        this.length =
            0;
        this.modified = this.pushmod = !1;
        this.head = null
    };
    g["zpp_nape.util.ZNPList_ZPP_Component"] = vn;
    vn.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Component"];
    vn.prototype = {
        inlined_add: function(a) { var b;
            null == nf.zpp_pool ? b = new nf : (b = nf.zpp_pool, nf.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() {
            var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = nf.zpp_pool;
            nf.zpp_pool = a;
            null == this.head &&
                (this.pushmod = !0);
            this.modified = !0;
            this.length--
        },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        __class__: vn
    };
    var un = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_AABBNode"] = un;
    un.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_AABBNode"];
    un.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) {
            var b;
            null == of .zpp_pool ? b = new of : (b = of .zpp_pool, of .zpp_pool =
                b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = of .zpp_pool; of .zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        clear: function() {
            for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0
        },
        __class__: un
    };
    var bo = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_InteractionGroup"] = bo;
    bo.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_InteractionGroup"];
    bo.prototype = { iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b }, __class__: bo };
    var yn = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_FluidArbiter"] = yn;
    yn.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_FluidArbiter"];
    yn.prototype = {
        inlined_add: function(a) { var b;
            null == te.zpp_pool ? b = new te : (b = te.zpp_pool, te.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = te.zpp_pool;
            te.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() {
            var a = this.head.elt;
            this.pop();
            return a
        },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = te.zpp_pool;
            te.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        __class__: yn
    };
    var zn = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_SensorArbiter"] = zn;
    zn.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_SensorArbiter"];
    zn.prototype = {
        inlined_add: function(a) { var b;
            null == Qd.zpp_pool ? b = new Qd : (b = Qd.zpp_pool, Qd.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = Qd.zpp_pool;
            Qd.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() {
            var a = this.head.elt;
            this.pop();
            return a
        },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = Qd.zpp_pool;
            Qd.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        __class__: zn
    };
    var Ql = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_ColArbiter"] = Ql;
    Ql.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_ColArbiter"];
    Ql.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == ae.zpp_pool ? b = new ae : (b = ae.zpp_pool, ae.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = ae.zpp_pool;
            ae.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() {
            var a = this.head.elt;
            this.pop();
            return a
        },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = ae.zpp_pool;
            ae.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        __class__: Ql
    };
    var Rl = function() {
        this.length =
            0;
        this.modified = this.pushmod = !1;
        this.head = null
    };
    g["zpp_nape.util.ZNPList_ZPP_Listener"] = Rl;
    Rl.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Listener"];
    Rl.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == Ec.zpp_pool ? b = new Ec : (b = Ec.zpp_pool, Ec.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        insert: function(a, b) { return this.inlined_insert(a, b) },
        inlined_insert: function(a, b) {
            var c;
            null == Ec.zpp_pool ? c = new Ec :
                (c = Ec.zpp_pool, Ec.zpp_pool = c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++;
            return c
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = Ec.zpp_pool;
            Ec.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = Ec.zpp_pool;
            Ec.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        iterator_at: function(a) {
            for (var b = this.head; 0 <
                a-- && null != b;) b = b.next;
            return b
        },
        __class__: Rl
    };
    var xn = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_ToiEvent"] = xn;
    xn.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_ToiEvent"];
    xn.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == be.zpp_pool ? b = new be : (b = be.zpp_pool, be.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = be.zpp_pool;
            be.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        erase: function(a) { return this.inlined_erase(a) },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = be.zpp_pool;
            be.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        __class__: xn
    };
    var co = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ConvexResult"] = co;
    co.__name__ = ["zpp_nape", "util", "ZNPList_ConvexResult"];
    co.prototype = { iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b }, __class__: co };
    var eo = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_GeomPoly"] =
        eo;
    eo.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_GeomPoly"];
    eo.prototype = { iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b }, __class__: eo };
    var An = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_RayResult"] = An;
    An.__name__ = ["zpp_nape", "util", "ZNPList_RayResult"];
    An.prototype = {
        inlined_insert: function(a, b) {
            var c;
            null == ue.zpp_pool ? c = new ue : (c = ue.zpp_pool, ue.zpp_pool = c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head =
                c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++;
            return c
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = ue.zpp_pool;
            ue.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        erase: function(a) { return this.inlined_erase(a) },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = ue.zpp_pool;
            ue.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b },
        __class__: An
    };
    var Ac = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_CbType"] = Ac;
    Ac.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_CbType"];
    Ac.prototype = { __class__: Ac };
    var mf = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_CallbackSet"] = mf;
    mf.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_CallbackSet"];
    mf.prototype = { __class__: mf };
    var fc = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Shape"] = fc;
    fc.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Shape"];
    fc.prototype = { __class__: fc };
    var Cc = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Body"] = Cc;
    Cc.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Body"];
    Cc.prototype = { __class__: Cc };
    var pe = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Constraint"] = pe;
    pe.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Constraint"];
    pe.prototype = { __class__: pe };
    var Od = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Compound"] = Od;
    Od.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Compound"];
    Od.prototype = { __class__: Od };
    var jd = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_InteractionListener"] = jd;
    jd.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_InteractionListener"];
    jd.prototype = { __class__: jd };
    var se = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Arbiter"] = se;
    se.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Arbiter"];
    se.prototype = { __class__: se };
    var Md = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_CbSet"] = Md;
    Md.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_CbSet"];
    Md.prototype = { __class__: Md };
    var qe = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Interactor"] = qe;
    qe.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Interactor"];
    qe.prototype = { __class__: qe };
    var ne = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_BodyListener"] = ne;
    ne.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_BodyListener"];
    ne.prototype = { __class__: ne };
    var oe = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_ConstraintListener"] = oe;
    oe.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_ConstraintListener"];
    oe.prototype = { __class__: oe };
    var $d = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_CbSetPair"] = $d;
    $d.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_CbSetPair"];
    $d.prototype = { __class__: $d };
    var Pd = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_AABBPair"] = Pd;
    Pd.__name__ = ["zpp_nape", "util",
        "ZNPNode_ZPP_AABBPair"
    ];
    Pd.prototype = { __class__: Pd };
    var Dc = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Edge"] = Dc;
    Dc.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Edge"];
    Dc.prototype = { __class__: Dc };
    var Qc = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Vec2"] = Qc;
    Qc.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Vec2"];
    Qc.prototype = { __class__: Qc };
    var nf = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Component"] = nf;
    nf.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Component"];
    nf.prototype = { __class__: nf };
    var of = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_AABBNode"] = of ; of .__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_AABBNode"]; of .prototype = { __class__: of };
    var fo = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_InteractionGroup"] = fo;
    fo.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_InteractionGroup"];
    fo.prototype = { __class__: fo };
    var te = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_FluidArbiter"] = te;
    te.__name__ = ["zpp_nape", "util",
        "ZNPNode_ZPP_FluidArbiter"
    ];
    te.prototype = { __class__: te };
    var Qd = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_SensorArbiter"] = Qd;
    Qd.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_SensorArbiter"];
    Qd.prototype = { __class__: Qd };
    var ae = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_ColArbiter"] = ae;
    ae.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_ColArbiter"];
    ae.prototype = { __class__: ae };
    var Ec = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Listener"] = Ec;
    Ec.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Listener"];
    Ec.prototype = { __class__: Ec };
    var be = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_ToiEvent"] = be;
    be.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_ToiEvent"];
    be.prototype = { __class__: be };
    var go = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ConvexResult"] = go;
    go.__name__ = ["zpp_nape", "util", "ZNPNode_ConvexResult"];
    go.prototype = { __class__: go };
    var ho = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_GeomPoly"] = ho;
    ho.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_GeomPoly"];
    ho.prototype = { __class__: ho };
    var ue = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_RayResult"] = ue;
    ue.__name__ = ["zpp_nape", "util", "ZNPNode_RayResult"];
    ue.prototype = { __class__: ue };
    var Eg = function() { this.at_index = 0;
        this.at_ite = null;
        this.zip_length = !1;
        this._length = 0;
        this.inner = null;
        Ef.call(this);
        this.at_ite = null;
        this.at_index = 0;
        this.zip_length = !0;
        this._length = 0 };
    g["zpp_nape.util.ZPP_MixVec2List"] = Eg;
    Eg.__name__ = ["zpp_nape", "util", "ZPP_MixVec2List"];
    Eg.get = function(a, b) { null == b && (b = !1); var c = new Eg;
        c.inner = a;
        c.zpp_inner.immutable = b; return c };
    Eg.__super__ = Ef;
    Eg.prototype = k(Ef.prototype, {
        zpp_gl: function() { this.zpp_vm(); if (this.zip_length) { this._length = 0; for (var a = this.inner.next; null != a;) this._length++, a = a.next;
                this.zip_length = !1 } return this._length },
        zpp_vm: function() { this.zpp_inner.validate();
            this.inner.modified && (this.zip_length = !0, this._length = 0, this.at_ite = null) },
        at: function(a) {
            this.zpp_vm();
            this.zpp_inner.reverse_flag && (a = this.zpp_gl() - 1 -
                a);
            if (a < this.at_index || null == this.at_ite) { this.at_index = 0; for (this.at_ite = this.inner.next;;) break }
            for (; this.at_index != a;) { this.at_index++; for (this.at_ite = this.at_ite.next;;) break }
            return this.at_ite.wrapper()
        },
        push: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_vm();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? this.inner.add(a.zpp_inner) : this.inner.insert(this.inner.iterator_at(this.zpp_gl() - 1), a.zpp_inner), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder &&
                this.zpp_inner.post_adder(a);
            return b
        },
        __class__: Eg
    });
    var De = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.dontremove = this.reverse_flag = !1;
        this._invalidate = this._validate = this.adder = this.subber = null;
        this.immutable = this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new hf;
        this._invalidated = !0 };
    g["zpp_nape.util.ZPP_ConstraintList"] = De;
    De.__name__ = ["zpp_nape", "util", "ZPP_ConstraintList"];
    De.get = function(a, b) {
        null == b && (b = !1);
        var c = new Fm;
        c.zpp_inner.inner = a;
        b && (c.zpp_inner.immutable = !0);
        c.zpp_inner.zip_length = !0;
        return c
    };
    De.prototype = { valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) }, modify_test: function() {}, validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) }, invalidate: function() { this._invalidated = !0;
            null != this._invalidate && this._invalidate(this) }, __class__: De };
    var Ge = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.dontremove = this.reverse_flag = !1;
        this._invalidate = this._validate = this.adder = this.post_adder = this.subber = null;
        this.immutable = this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new Rf;
        this._invalidated = !0 };
    g["zpp_nape.util.ZPP_BodyList"] = Ge;
    Ge.__name__ = ["zpp_nape", "util", "ZPP_BodyList"];
    Ge.get = function(a, b) {
        null == b && (b = !1);
        var c = new Nm;
        c.zpp_inner.inner = a;
        b && (c.zpp_inner.immutable = !0);
        c.zpp_inner.zip_length = !0;
        return c
    };
    Ge.prototype = { valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) }, modify_test: function() {}, validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) }, invalidate: function() { this._invalidated = !0;
            null != this._invalidate && this._invalidate(this) }, __class__: Ge };
    var sh = function() {
        this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.reverse_flag = !1;
        this._validate = null;
        this._invalidated = !1;
        this.inner = null
    };
    g["zpp_nape.util.ZPP_InteractorList"] = sh;
    sh.__name__ = ["zpp_nape", "util", "ZPP_InteractorList"];
    sh.prototype = {
        valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) },
        validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) },
        __class__: sh
    };
    var bf = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.dontremove = this.reverse_flag = !1;
        this._invalidate = this._validate = this.adder = this.subber = null;
        this.immutable = this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new Fg;
        this._invalidated = !0 };
    g["zpp_nape.util.ZPP_CompoundList"] = bf;
    bf.__name__ = ["zpp_nape", "util", "ZPP_CompoundList"];
    bf.get = function(a, b) {
        null == b && (b = !1);
        var c = new Pm;
        c.zpp_inner.inner = a;
        b && (c.zpp_inner.immutable = !0);
        c.zpp_inner.zip_length = !0;
        return c
    };
    bf.prototype = { valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) }, modify_test: function() {}, validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) }, invalidate: function() { this._invalidated = !0;
            null != this._invalidate && this._invalidate(this) }, __class__: bf };
    var $e = function() {
        this.user_length =
            0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.dontremove = this.reverse_flag = !1;
        this._invalidate = this._validate = this.adder = this.post_adder = this.subber = null;
        this.immutable = this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new Rl;
        this._invalidated = !0
    };
    g["zpp_nape.util.ZPP_ListenerList"] = $e;
    $e.__name__ = ["zpp_nape", "util", "ZPP_ListenerList"];
    $e.get = function(a, b) { null == b && (b = !1); var c = new Em;
        c.zpp_inner.inner = a;
        b && (c.zpp_inner.immutable = !0);
        c.zpp_inner.zip_length = !0; return c };
    $e.prototype = { valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) }, modify_test: function() {}, validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) }, invalidate: function() { this._invalidated = !0;
            null != this._invalidate && this._invalidate(this) }, __class__: $e };
    var ee = function() {
        this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite =
            null;
        this.at_index = 0;
        this.dontremove = this.reverse_flag = !1;
        this._invalidate = this._validate = this.adder = this.post_adder = this.subber = null;
        this.immutable = this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new zd;
        this._invalidated = !0
    };
    g["zpp_nape.util.ZPP_CbTypeList"] = ee;
    ee.__name__ = ["zpp_nape", "util", "ZPP_CbTypeList"];
    ee.get = function(a, b) { null == b && (b = !1); var c = new ek;
        c.zpp_inner.inner = a;
        b && (c.zpp_inner.immutable = !0);
        c.zpp_inner.zip_length = !0; return c };
    ee.prototype = {
        valmod: function() {
            this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0)
        },
        modify_test: function() {},
        validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) },
        invalidate: function() { this._invalidated = !0;
            null != this._invalidate && this._invalidate(this) },
        __class__: ee
    };
    var qg = function() {
        this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.reverse_flag = !1;
        this._invalidate = this._validate = this.adder = this.post_adder = this.subber = null;
        this.immutable = this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new Ph;
        this._invalidated = !0
    };
    g["zpp_nape.util.ZPP_Vec2List"] = qg;
    qg.__name__ = ["zpp_nape", "util", "ZPP_Vec2List"];
    qg.prototype = {
        valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) },
        modify_test: function() {},
        validate: function() {
            this._invalidated &&
                (this._invalidated = !1, null != this._validate && this._validate())
        },
        invalidate: function() { this._invalidated = !0;
            null != this._invalidate && this._invalidate(this) },
        __class__: qg
    };
    var nh = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.reverse_flag = !1;
        this._validate = null;
        this._invalidated = !1;
        this.inner = null };
    g["zpp_nape.util.ZPP_GeomPolyList"] = nh;
    nh.__name__ = ["zpp_nape", "util", "ZPP_GeomPolyList"];
    nh.prototype = {
        valmod: function() {
            this.validate();
            this.inner.modified &&
                (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0)
        },
        validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) },
        __class__: nh
    };
    var pg = function() {
        this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.dontremove = this.reverse_flag = !1;
        this._invalidate = this._validate = this.subber = null;
        this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new An;
        this._invalidated = !0
    };
    g["zpp_nape.util.ZPP_RayResultList"] = pg;
    pg.__name__ = ["zpp_nape", "util", "ZPP_RayResultList"];
    pg.prototype = {
        valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) },
        modify_test: function() {},
        validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) },
        invalidate: function() { this._invalidated = !0;
            null != this._invalidate && this._invalidate(this) },
        __class__: pg
    };
    var mh = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.reverse_flag = !1;
        this._validate = null;
        this._invalidated = !1;
        this.inner = null };
    g["zpp_nape.util.ZPP_ConvexResultList"] = mh;
    mh.__name__ = ["zpp_nape", "util", "ZPP_ConvexResultList"];
    mh.prototype = {
        valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) },
        validate: function() {
            this._invalidated &&
                (this._invalidated = !1, null != this._validate && this._validate())
        },
        __class__: mh
    };
    var th = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.reverse_flag = !1;
        this._validate = null;
        this._invalidated = !1;
        this.inner = null };
    g["zpp_nape.util.ZPP_EdgeList"] = th;
    th.__name__ = ["zpp_nape", "util", "ZPP_EdgeList"];
    th.prototype = {
        valmod: function() {
            this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0)
        },
        validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) },
        __class__: th
    };
    var df = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.dontremove = this.reverse_flag = !1;
        this._invalidate = this._validate = this.adder = this.post_adder = this.subber = null;
        this.immutable = this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new Bf;
        this._invalidated = !0 };
    g["zpp_nape.util.ZPP_ShapeList"] = df;
    df.__name__ = ["zpp_nape", "util", "ZPP_ShapeList"];
    df.get = function(a, b) { null == b && (b = !1); var c = new Rm;
        c.zpp_inner.inner = a;
        b && (c.zpp_inner.immutable = !0);
        c.zpp_inner.zip_length = !0; return c };
    df.prototype = {
        valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) },
        modify_test: function() {},
        validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) },
        invalidate: function() {
            this._invalidated = !0;
            null != this._invalidate && this._invalidate(this)
        },
        __class__: df
    };
    var lh = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.reverse_flag = !1;
        this._validate = null;
        this._invalidated = !1;
        this.inner = null };
    g["zpp_nape.util.ZPP_InteractionGroupList"] = lh;
    lh.__name__ = ["zpp_nape", "util", "ZPP_InteractionGroupList"];
    lh.prototype = {
        valmod: function() {
            this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0)
        },
        validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) },
        __class__: lh
    };
    var Ee = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.reverse_flag = !1;
        this._validate = null;
        this.immutable = this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new Qh;
        this._invalidated = !0 };
    g["zpp_nape.util.ZPP_ArbiterList"] = Ee;
    Ee.__name__ = ["zpp_nape", "util", "ZPP_ArbiterList"];
    Ee.get =
        function(a, b) { null == b && (b = !1); var c = new Gm;
            c.zpp_inner.inner = a;
            b && (c.zpp_inner.immutable = !0);
            c.zpp_inner.zip_length = !0; return c };
    Ee.prototype = { valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) }, validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) }, __class__: Ee };
    var kh = function() {
        this.user_length = 0;
        this.zip_length = !1;
        this.at_ite =
            this.push_ite = null;
        this.at_index = 0;
        this.reverse_flag = !1;
        this._validate = null;
        this._invalidated = !1;
        this.inner = null
    };
    g["zpp_nape.util.ZPP_ContactList"] = kh;
    kh.__name__ = ["zpp_nape", "util", "ZPP_ContactList"];
    kh.prototype = { valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) }, validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) }, __class__: kh };
    var Oh = function() {};
    g["zpp_nape.util.ZPP_Math"] = Oh;
    Oh.__name__ = ["zpp_nape", "util", "ZPP_Math"];
    Oh.sqr = function(a) { return a * a };
    var ph = function() {};
    g["zpp_nape.util.ZPP_PubPool"] = ph;
    ph.__name__ = ["zpp_nape", "util", "ZPP_PubPool"];
    var ib = function() { this.colour = 0;
        this.lt = this.swapped = this.data = this.prev = this.next = this.parent = null };
    g["zpp_nape.util.ZPP_Set_ZPP_CbSetPair"] = ib;
    ib.__name__ = ["zpp_nape", "util", "ZPP_Set_ZPP_CbSetPair"];
    ib.prototype = {
        clear_with: function(a) {
            if (null != this.parent) {
                for (var b = this.parent; null !=
                    b;) b = null != b.prev ? b.prev : null != b.next ? b.next : this.clear_node(b, a);
                this.parent = null
            }
        },
        clear_node: function(a, b) { b(a.data); var c = a.parent;
            null != c && (a == c.prev ? c.prev = null : c.next = null, a.parent = null);
            a.data = null;
            a.lt = null;
            a.swapped = null;
            a.next = ib.zpp_pool;
            ib.zpp_pool = a; return c },
        __fix_dbl_red: function(a) {
            for (;;) {
                var b = a.parent,
                    c = b.parent;
                if (null == c) { b.colour = 1; break }
                var d, e, f, g, h, i, j;
                b == c.prev ? (f = c, j = c.next, a == b.prev ? (d = a, e = b, g = a.prev, h = a.next, i = b.next) : (d = b, e = a, g = b.prev, h = a.prev, i = a.next)) : (d = c, g = c.prev,
                    a == b.prev ? (e = a, f = b, h = a.prev, i = a.next, j = b.next) : (e = b, f = a, h = b.prev, i = a.prev, j = a.next));
                a = c.parent;
                null == a ? this.parent = e : a.prev == c ? a.prev = e : a.next = e;
                null != e && (e.parent = a);
                d.prev = g;
                null != g && (g.parent = d);
                d.next = h;
                null != h && (h.parent = d);
                e.prev = d;
                null != d && (d.parent = e);
                e.next = f;
                null != f && (f.parent = e);
                f.prev = i;
                null != i && (i.parent = f);
                f.next = j;
                null != j && (j.parent = f);
                e.colour = c.colour - 1;
                d.colour = 1;
                f.colour = 1;
                if (e == this.parent) this.parent.colour = 1;
                else if (0 == e.colour && 0 == e.parent.colour) { a = e; continue }
                break
            }
        },
        try_insert: function(a) {
            var b =
                null,
                c = null;
            if (null == this.parent) null == ib.zpp_pool ? b = new ib : (b = ib.zpp_pool, ib.zpp_pool = b.next, b.next = null), null, b.data = a, this.parent = b;
            else
                for (c = this.parent;;)
                    if (this.lt(a, c.data))
                        if (null == c.prev) { null == ib.zpp_pool ? b = new ib : (b = ib.zpp_pool, ib.zpp_pool = b.next, b.next = null);
                            null;
                            b.data = a;
                            c.prev = b;
                            b.parent = c; break } else c = c.prev;
            else if (this.lt(c.data, a))
                if (null == c.next) { null == ib.zpp_pool ? b = new ib : (b = ib.zpp_pool, ib.zpp_pool = b.next, b.next = null);
                    null;
                    b.data = a;
                    c.next = b;
                    b.parent = c; break } else c = c.next;
            else break;
            if (null == b) return c;
            null == b.parent ? b.colour = 1 : (b.colour = 0, 0 == b.parent.colour && this.__fix_dbl_red(b));
            return b
        },
        __class__: ib
    };
    var Ad = function() { this.colour = 0;
        this.lt = this.swapped = this.data = this.prev = this.next = this.parent = null };
    g["zpp_nape.util.ZPP_Set_ZPP_CbSet"] = Ad;
    Ad.__name__ = ["zpp_nape", "util", "ZPP_Set_ZPP_CbSet"];
    Ad.prototype = {
        empty: function() { return null == this.parent },
        find: function(a) { for (var b = this.parent; null != b && b.data != a;) b = this.lt(a, b.data) ? b.prev : b.next; return b },
        find_weak: function(a) {
            for (var b =
                    this.parent; null != b;)
                if (this.lt(a, b.data)) b = b.prev;
                else if (this.lt(b.data, a)) b = b.next;
            else break;
            return b
        },
        remove: function(a) { this.remove_node(this.find(a)) },
        remove_node: function(a) {
            if (null != a.next && null != a.prev) { for (var b = a.next; null != b.prev;) b = b.prev; var c = a.data;
                a.data = b.data;
                b.data = c;
                null != this.swapped && this.swapped(a.data, b.data);
                a = b } b = null == a.prev ? a.next : a.prev;
            if (1 == a.colour)
                if (null != a.prev || null != a.next) b.colour = 1;
                else if (null != a.parent)
                for (c = a.parent;;) {
                    c.colour++;
                    c.prev.colour--;
                    c.next.colour--;
                    var d = c.prev;
                    if (-1 == d.colour) { this.__fix_neg_red(d); break } else if (0 == d.colour) { if (null != d.prev && 0 == d.prev.colour) { this.__fix_dbl_red(d.prev); break } if (null != d.next && 0 == d.next.colour) { this.__fix_dbl_red(d.next); break } } d = c.next;
                    if (-1 == d.colour) { this.__fix_neg_red(d); break } else if (0 == d.colour) { if (null != d.prev && 0 == d.prev.colour) { this.__fix_dbl_red(d.prev); break } if (null != d.next && 0 == d.next.colour) { this.__fix_dbl_red(d.next); break } }
                    if (2 == c.colour)
                        if (null == c.parent) c.colour = 1;
                        else { c = c.parent; continue } break
                }
            c =
                a.parent;
            null == c ? this.parent = b : c.prev == a ? c.prev = b : c.next = b;
            null != b && (b.parent = c);
            a.parent = a.prev = a.next = null;
            a.data = null;
            a.lt = null;
            a.swapped = null;
            a.next = Ad.zpp_pool;
            Ad.zpp_pool = a
        },
        __fix_neg_red: function(a) {
            var b = a.parent;
            if (b.prev == a) {
                var c = a.prev,
                    d = a.next,
                    e = d.prev,
                    f = d.next;
                c.colour = 0;
                a.colour = b.colour = 1;
                a.next = e;
                null != e && (e.parent = a);
                a = b.data;
                b.data = d.data;
                d.data = a;
                null != this.swapped && this.swapped(b.data, d.data);
                d.prev = f;
                null != f && (f.parent = d);
                d.next = b.next;
                null != b.next && (b.next.parent = d);
                b.next =
                    d
            } else c = a.next, d = a.prev, e = d.next, f = d.prev, c.colour = 0, a.colour = b.colour = 1, a.prev = e, null != e && (e.parent = a), a = b.data, b.data = d.data, d.data = a, null != this.swapped && this.swapped(b.data, d.data), d.next = f, null != f && (f.parent = d), d.prev = b.prev, null != b.prev && (b.prev.parent = d), b.prev = d;
            null != d && (d.parent = b);
            b = c;
            null != b.prev && 0 == b.prev.colour ? this.__fix_dbl_red(b.prev) : null != b.next && 0 == b.next.colour && this.__fix_dbl_red(b.next)
        },
        __fix_dbl_red: function(a) {
            for (;;) {
                var b = a.parent,
                    c = b.parent;
                if (null == c) { b.colour = 1; break }
                var d,
                    e, f, g, h, i, j;
                b == c.prev ? (f = c, j = c.next, a == b.prev ? (d = a, e = b, g = a.prev, h = a.next, i = b.next) : (d = b, e = a, g = b.prev, h = a.prev, i = a.next)) : (d = c, g = c.prev, a == b.prev ? (e = a, f = b, h = a.prev, i = a.next, j = b.next) : (e = b, f = a, h = b.prev, i = a.prev, j = a.next));
                a = c.parent;
                null == a ? this.parent = e : a.prev == c ? a.prev = e : a.next = e;
                null != e && (e.parent = a);
                d.prev = g;
                null != g && (g.parent = d);
                d.next = h;
                null != h && (h.parent = d);
                e.prev = d;
                null != d && (d.parent = e);
                e.next = f;
                null != f && (f.parent = e);
                f.prev = i;
                null != i && (i.parent = f);
                f.next = j;
                null != j && (j.parent = f);
                e.colour = c.colour -
                    1;
                d.colour = 1;
                f.colour = 1;
                if (e == this.parent) this.parent.colour = 1;
                else if (0 == e.colour && 0 == e.parent.colour) { a = e; continue }
                break
            }
        },
        insert: function(a) {
            var b;
            null == Ad.zpp_pool ? b = new Ad : (b = Ad.zpp_pool, Ad.zpp_pool = b.next, b.next = null);
            null;
            b.data = a;
            if (null == this.parent) this.parent = b;
            else
                for (a = this.parent;;)
                    if (this.lt(b.data, a.data))
                        if (null == a.prev) { a.prev = b;
                            b.parent = a; break } else a = a.prev;
            else if (null == a.next) { a.next = b;
                b.parent = a; break } else a = a.next;
            null == b.parent ? b.colour = 1 : (b.colour = 0, 0 == b.parent.colour &&
                this.__fix_dbl_red(b));
            return b
        },
        __class__: Ad
    };
    var Ra, po = 0;
    Math.NaN = Number.NaN;
    Math.NEGATIVE_INFINITY = Number.NEGATIVE_INFINITY;
    Math.POSITIVE_INFINITY = Number.POSITIVE_INFINITY;
    g.Math = Math;
    Math.isFinite = function(a) { return isFinite(a) };
    Math.isNaN = function(a) { return isNaN(a) };
    String.prototype.__class__ = g.String = String;
    String.__name__ = ["String"];
    g.Array = Array;
    Array.__name__ = ["Array"];
    Date.prototype.__class__ = g.Date = Date;
    Date.__name__ = ["Date"];
    var lo = g.Int = { __name__: ["Int"] },
        qo = g.Dynamic = { __name__: ["Dynamic"] },
        io = g.Float = Number;
    io.__name__ = ["Float"];
    var mo = g.Bool = Boolean;
    mo.__ename__ = ["Bool"];
    var ro = g.Class = { __name__: ["Class"] },
        so = {};
    R.Element = "element";
    R.PCData = "pcdata";
    R.CData = "cdata";
    R.Comment = "comment";
    R.DocType = "doctype";
    R.ProcessingInstruction = "processingInstruction";
    R.Document = "document";
    Bb.instance = new Bb;
    Mb.DISPATCHING_SENTINEL = new Uf(null, null);
    x.root = new p;
    x.uncaughtError = new S;
    x.hidden = new $b(!1);
    x.volume = new ca(1);
    x._platform = Bb.instance;
    x._calledInit = !1;
    Ma.__meta__ = {
        obj: {
            assets: [{
                ui_title: [{
                    bytes: 341544,
                    md5: "13143f66a16e858614a256afa4604609",
                    name: "bg.jpg"
                }, { bytes: 2733, md5: "90ff88e948d07cab0ad5814c927256d8", name: "bling.png" }, { bytes: 1988, md5: "5c3b1b3ae41033af1c0502fd40dffaf9", name: "nick.png" }, { bytes: 18201, md5: "20638b1d3268f1877c58c2479109c075", name: "racing.png" }, { bytes: 141971, md5: "1e6781ae844b1b560534102d1b9ffc67", name: "sb.png" }, { bytes: 6413, md5: "a0765a92e078794880af2e2662e43cc5", name: "stars.png" }],
                ui_customize: [{ bytes: 151456, md5: "0783bcbce1c0683d6bd4b7b58b999191", name: "bg.jpg" }, {
                        bytes: 2313,
                        md5: "c26a9f4070a5d771495295c5c79ecb02",
                        name: "bg_speed.png"
                    }, { bytes: 2286, md5: "49d4ed21d58e0e5fc90366b8ab857dea", name: "bg_strength.png" }, { bytes: 2318, md5: "7df9cf5d46996c58756f163b838c954e", name: "bg_traction.png" }, { bytes: 9902, md5: "948cb5c8c587f0df64f4ccf682bf1132", name: "body_1.png" }, { bytes: 8899, md5: "b1620fbb5f964bb6158cc04b5bf03abd", name: "body_2.png" }, { bytes: 8873, md5: "73e08ce9d14d2020186431bcb130fbcf", name: "body_3.png" }, { bytes: 8587, md5: "ba2b7fdff23b3a11137c53b0693fa59a", name: "body_4.png" }, {
                        bytes: 9981,
                        md5: "5c876349ec0e0ec85b9def0ceff359d4",
                        name: "body_5.png"
                    }, { bytes: 9964, md5: "9ced1c56cc14a206e2bd8bc1c1cb3575", name: "body_6.png" }, { bytes: 24109, md5: "e13deb72fcdf02a2e1cd8bfd88691c6c", name: "body_7.png" }, { bytes: 23005, md5: "c616dfab0da7bae8d34b5770e393a51f", name: "body_8.png" }, { bytes: 24020, md5: "73c1c3492187330fac0bccf2773e9050", name: "body_9.png" }, { bytes: 2267, md5: "abbcc790c2af0e260e6a51d82b614b92", name: "btn_arrow.png" }, { bytes: 2182, md5: "afbd64c5f0e74ba2657b47f115bc42ec", name: "btn_body.png" }, { bytes: 2245, md5: "caaf08dcdd1018c4a62f9b1e6e9c0e76", name: "btn_flag.png" },
                    { bytes: 2099, md5: "1ac0b41bcee36b692c8fa6fd39d0e0f7", name: "btn_hood.png" }, { bytes: 5399, md5: "1bbc67fd37194b710e136ba91487d733", name: "btn_item.png" }, { bytes: 5546, md5: "d0274a688cde6621372df94b5bca10bb", name: "btn_item_locked.png" }, { bytes: 5282, md5: "31548c3fe631a21d340907d72d718377", name: "btn_item_selected.png" }, { bytes: 2097, md5: "787f031cdac6093bb2c532d1de5930ed", name: "btn_spoiler.png" }, { bytes: 6390, md5: "949e350e7c1098cf5001aa1c53dfcf47", name: "btn_unequip.png" }, {
                        bytes: 6388,
                        md5: "9c47aa577660368ac698e1c715779bb3",
                        name: "btn_unequip_selected.png"
                    }, { bytes: 2180, md5: "179662e6b8f48fd7c195eed9be859bc8", name: "btn_wheel.png" }, { bytes: 1073, md5: "da95916f160543a941d97cfb89ea588f", name: "category_highlight.png" }, { bytes: 8821, md5: "75b660e46e66317191d0f8ec8cd01d91", name: "flag_1_bbb.png" }, { bytes: 10645, md5: "379b9e1b7ae165e6cd4cff5364c226e7", name: "flag_1_dz.png" }, { bytes: 11776, md5: "a092b426e55c7bfe09167107752f5c70", name: "flag_1_fop.png" }, { bytes: 9659, md5: "9eac4ccbd4a859d7d834d5052f8b9fd0", name: "flag_1_gs.png" }, {
                        bytes: 10646,
                        md5: "0278b1000d80b998f97b8f335afb5b76",
                        name: "flag_1_nycb.png"
                    }, { bytes: 9726, md5: "625cc112fdd9f82adcac4110b40fec7f", name: "flag_1_pr.png" }, { bytes: 10062, md5: "948f710e7f4b7ccbdbfd1c92ba42440c", name: "flag_1_rr.png" }, { bytes: 9881, md5: "b79c53f5ca5c047eaa2753392afb7cc3", name: "flag_1_ta.png" }, { bytes: 3346, md5: "f8d30cb4cf61d9ceca2e303937801459", name: "flag_1_tlh.png" }, { bytes: 10788, md5: "7c74941069a1431a5fcf872bd3c86696", name: "flag_1_tmnt.png" }, { bytes: 3543, md5: "44a41dd2343adca3173efcdcb6c52d99", name: "flag_1_vs.png" }, {
                        bytes: 3032,
                        md5: "670021f61b9a178ed61bcd0444b4dc4e",
                        name: "flag_2.png"
                    }, { bytes: 3939, md5: "ac8b362deb42206dc920ff0f54c71a19", name: "flag_3.png" }, { bytes: 4229, md5: "aab26ca0cc09671894c200fef926f72e", name: "flag_4.png" }, { bytes: 3787, md5: "010e2420261a16229b4815ff64bf78a1", name: "flag_5.png" }, { bytes: 3527, md5: "4d517679bb66ac9c9052303fd6f0c710", name: "flag_6.png" }, { bytes: 12824, md5: "1c51948e888d390bab0b6485b509ca8d", name: "hood_1.png" }, { bytes: 3170, md5: "e9b1c557c8900ecfef27213207aacc09", name: "hood_2.png" }, { bytes: 3721, md5: "3741c980841868a69f9e62067c7ca9a8", name: "hood_3.png" },
                    { bytes: 2480, md5: "e6916dcb33b7697bc246b463becdabdf", name: "hood_4.png" }, { bytes: 2624, md5: "df8c0e1c93ba732a55c2bde148b87de7", name: "hood_5.png" }, { bytes: 2321, md5: "87f32ba9389ded91214f30cdcfa3a993", name: "hood_6.png" }, { bytes: 2253, md5: "0c35b96ccb6191b46adb8a0df4e98f26", name: "icon_new.png" }, { bytes: 2320, md5: "3e9d1c45699890b84aee0deb0321ffaa", name: "lock.png" }, { bytes: 818, md5: "e62154e3e2a5b84bb8abd6073497796f", name: "menu_box.png" }, { bytes: 6401, md5: "5936780bf1f04564e42e148484a8d07a", name: "player_name_box.png" }, {
                        bytes: 2385,
                        md5: "51ba6a96d459bb45b45d654fe501c482",
                        name: "spoiler_1.png"
                    }, { bytes: 15468, md5: "1a3779604921a43cbd6fcae4c240ed4f", name: "spoiler_2.png" }, { bytes: 13837, md5: "ce9eb0b917dc2eae8e9acb8b936dd0b0", name: "spoiler_3.png" }, { bytes: 4469, md5: "c93a81ade63680c8f1d4fcf9af952152", name: "spoiler_4.png" }, { bytes: 12038, md5: "a66bf163cc7d6c4940e4e77f7995cf64", name: "spoiler_5.png" }, { bytes: 3485, md5: "9b0988e189e34e7a86856a3e8417261f", name: "spoiler_6.png" }, { bytes: 3579, md5: "44ee7777fc1343ffc9d79c06d598edb6", name: "wheel_0.png" }, {
                        bytes: 3697,
                        md5: "4f7a24fc77e64c23ef040972a8b3fc11",
                        name: "wheel_1.png"
                    }, { bytes: 4228, md5: "fd31445d8205b91442981bfe5ae6d545", name: "wheel_2.png" }, { bytes: 4282, md5: "8fe6b1e3168ae6b328e3bdf6562315ce", name: "wheel_3.png" }, { bytes: 4370, md5: "ceed0213266d3bfd3dbed0a2113d8aa0", name: "wheel_4.png" }, { bytes: 3917, md5: "7534e52a4a227f8ac999d74fdb53bfd2", name: "wheel_5.png" }, { bytes: 4430, md5: "5e25840aad583f2a21d3a5a2db3d4bd7", name: "wheel_6.png" }
                ],
                accessories: [{ bytes: 81633, md5: "306f16ff318dc4808848382e75737548", name: "body_1.png" }, {
                        bytes: 9539,
                        md5: "ae0fa48af3d1fccd62714bd148e106f5",
                        name: "body_2.png"
                    }, { bytes: 13941, md5: "11b4e84073ec2f3378c8b1f581870086", name: "body_3.png" }, { bytes: 62201, md5: "92a04d53d405d8e3a33b11a080e6dd2e", name: "body_4.png" }, { bytes: 13164, md5: "f8722f78e3a78d5137b0720582dfcf71", name: "body_5.png" }, { bytes: 10907, md5: "5f2a0ccb5025ea30ee12c2fdc1094264", name: "body_6.png" }, { bytes: 86864, md5: "13dddadad02dae02b53f56abae1aa4fd", name: "body_7.png" }, { bytes: 47011, md5: "4be1bcec9d9de7d06c0457d4a1a95aff", name: "body_8.png" }, {
                        bytes: 61871,
                        md5: "fac7bbb53657614f570213534ec0de20",
                        name: "body_9.png"
                    }, { bytes: 6552, md5: "ecc78c608e3d1e0c3df3ad8f6e4826c2", name: "body_back_1.png" }, { bytes: 3685, md5: "c769b94312ad341eae89b1b7789f3efa", name: "body_back_2.png" }, { bytes: 3095, md5: "1acbdca1c8f27a4be9c8dbf53a230c08", name: "body_back_3.png" }, { bytes: 10508, md5: "eaf77fdd10279f29b42a320079db04b8", name: "body_back_4.png" }, { bytes: 4284, md5: "5ca7a3193ed90d25174c68bf1f88ea64", name: "body_back_5.png" }, { bytes: 6425, md5: "1c5938e959cf0ba41f528464a9abb0f1", name: "body_back_6.png" }, {
                        bytes: 4513,
                        md5: "6d6ad9be1152a9ce8a3f8167ba520e3f",
                        name: "body_back_7.png"
                    }, { bytes: 4075, md5: "b8691483bd7984d42cb300beb5da7afe", name: "body_back_8.png" }, { bytes: 3531, md5: "f55e263406d58e5584636fe5f40a541a", name: "body_back_9.png" }, { bytes: 5634, md5: "1fc87346498bb6fff7d5d88e2e66b335", name: "flag_1_bbb.png" }, { bytes: 20322, md5: "042474ae920c1fbb8b12327eb7414a2c", name: "flag_1_dz.png" }, { bytes: 21977, md5: "7012a404d7cfa085519220ed42391243", name: "flag_1_fop.png" }, { bytes: 18240, md5: "ec9efa49d63b5a8057bc5f1248a67e4d", name: "flag_1_gs.png" }, {
                        bytes: 20149,
                        md5: "d1cae96d94452483df529e367e45ed13",
                        name: "flag_1_nycb.png"
                    }, { bytes: 19213, md5: "f90d6d6636fd3df78c6a03c2f34558ae", name: "flag_1_pr.png" }, { bytes: 19870, md5: "7af5f66ee4bef7375efc5290652a1487", name: "flag_1_rr.png" }, { bytes: 5836, md5: "970596f585a97b3b215d9187ccfae41c", name: "flag_1_ta.png" }, { bytes: 5688, md5: "b7d3204e52e49bea8c94d932a48afa18", name: "flag_1_tlh.png" }, { bytes: 20486, md5: "dbf1dd2349eeefceb66a59cf8b15de08", name: "flag_1_tmnt.png" }, { bytes: 6255, md5: "6612625322c80704c3d4bf4725204d45", name: "flag_1_vs.png" }, {
                        bytes: 6229,
                        md5: "37943568ddf2a008a2f6f1b1fb5a2215",
                        name: "flag_2.png"
                    }, { bytes: 10496, md5: "cdf173c7c98b8d0bbd581a7dd7f2cfc3", name: "flag_3.png" }, { bytes: 8361, md5: "ec9c66edcdf91a96893ffcfcc4af4729", name: "flag_4.png" }, { bytes: 9543, md5: "ce3028a39094186e5f1e12b90aff6410", name: "flag_5.png" }, { bytes: 7581, md5: "598d35173ef1d90a535cc6297f262c03", name: "flag_6.png" }, { bytes: 5413, md5: "e9d3a38c59454c35f8029cc6644705b5", name: "hood_1.png" }, { bytes: 4273, md5: "cffc7dac5d5f2208c54ad10a70320741", name: "hood_2.png" }, { bytes: 4414, md5: "11fd18ef42ad19654cb5a81a10a67655", name: "hood_3.png" },
                    { bytes: 3487, md5: "c30d6efddbbf08a5bedf740b3973e04a", name: "hood_4.png" }, { bytes: 3336, md5: "b5b36d4c404c4200536910615073c8f9", name: "hood_5.png" }, { bytes: 2871, md5: "afd97acbcdffe771357f2344bc398e7f", name: "hood_6.png" }, { bytes: 2815, md5: "fe7a602a23acbc6b56e17304b1d9c078", name: "spoiler_1.png" }, { bytes: 24078, md5: "cd042fe0cbc47c4520a42be26e0ad1f8", name: "spoiler_2.png" }, { bytes: 12282, md5: "168ece72e057b9d808af90e6dfdc8a7b", name: "spoiler_3.png" }, { bytes: 7204, md5: "bead8038f4deb1f7cbbbc926afbc443c", name: "spoiler_4.png" },
                    { bytes: 7857, md5: "99c3bd6a0f0aeec418be5fa9f083280f", name: "spoiler_5.png" }, { bytes: 4638, md5: "9cc0fed55284215457aba1a803d74b65", name: "spoiler_6.png" }, { bytes: 5006, md5: "f2f3d74110a8a3046e805e817dc273c0", name: "wheel_0.png" }, { bytes: 5286, md5: "7a2827a69970cc3eebe617558f32536d", name: "wheel_0_action1.png" }, { bytes: 5404, md5: "6ab22d34449d0db6077c3c1592118cca", name: "wheel_0_action2.png" }, { bytes: 4953, md5: "29759dd412562f80b5381b7ce9efba68", name: "wheel_0_idle.png" }, {
                        bytes: 5710,
                        md5: "d99aca8c874aea9c486c9db20cde9986",
                        name: "wheel_1.png"
                    }, { bytes: 2659, md5: "dc739642bb740227900893cadf5fc54f", name: "wheel_1_action1.png" }, { bytes: 2392, md5: "da203adf0404498225ba04745e725d99", name: "wheel_1_action2.png" }, { bytes: 2473, md5: "adfa8bd54142d297b3cd8e8113cfda16", name: "wheel_1_idle.png" }, { bytes: 6872, md5: "2944c05444f0765e9f7659497197412d", name: "wheel_2.png" }, { bytes: 6365, md5: "1e52a8e7d91fa092039fdc3f94f6ac9a", name: "wheel_3.png" }, { bytes: 4679, md5: "2102cfcbca34d23b5485e7f578a7ca52", name: "wheel_3_action1.png" }, {
                        bytes: 4625,
                        md5: "2cb19a83592b4827ea9c7a3c8b54d0e0",
                        name: "wheel_3_action2.png"
                    }, { bytes: 4564, md5: "cdcf9678a9ecd1778823330cf48281c4", name: "wheel_3_idle.png" }, { bytes: 11427, md5: "d84765c29a43b3a621d139ee145b480e", name: "wheel_4.png" }, { bytes: 6578, md5: "499f844f3f99bca9852f1d97ceb61acd", name: "wheel_4_action1.png" }, { bytes: 6497, md5: "5bda43717a867efa82772684c6a75fa8", name: "wheel_4_action2.png" }, { bytes: 5261, md5: "a8bdac1712b6961657133cc81f7640d5", name: "wheel_4_idle.png" }, { bytes: 5231, md5: "820bb6fd2bd3141c49b1382c9c6af256", name: "wheel_5.png" }, {
                        bytes: 2827,
                        md5: "b9778604b69eb83ea0ff862a9f294b35",
                        name: "wheel_5_action1.png"
                    }, { bytes: 2827, md5: "b9778604b69eb83ea0ff862a9f294b35", name: "wheel_5_action2.png" }, { bytes: 2888, md5: "08c1217b5d8ba351c6b2d73400317679", name: "wheel_5_idle.png" }, { bytes: 8453, md5: "c31b619e06d11d6082713bb3aad9412b", name: "wheel_6.png" }, { bytes: 4276, md5: "fc576825c599f04f7984d16559619dab", name: "wheel_6_action1.png" }, { bytes: 4183, md5: "3c5318086520ad5ff02de045d51b40d4", name: "wheel_6_action2.png" }, { bytes: 3916, md5: "0fadfb9b7705e60da758b18961bbb7d4", name: "wheel_6_idle.png" }
                ],
                ui_loading: [{
                    bytes: 3736,
                    md5: "709ca9dbcb1720f28b30350401518c89",
                    name: "bar.png"
                }, { bytes: 153717, md5: "1ce354181dd3c8be89733e6dcfc6010e", name: "bg.jpg" }, { bytes: 60926, md5: "a886002e370ee5f4e28e0001e576a82e", name: "kart.png" }, { bytes: 35026, md5: "e52e0b2cac6db0f97ff184cfabae0788", name: "mov_23_white_shadow.fnt" }, { bytes: 19168, md5: "8be0964ae505cf36f12a350aa1d887dc", name: "mov_23_white_shadow.png" }],
                levels: [{ bytes: 22298, md5: "1b2a0c64bbfbc02267b150e7911b012d", name: "level1.json" }, { bytes: 46191, md5: "95704310672e3b70d8792235abf262e9", name: "level10.json" },
                    { bytes: 46305, md5: "03c41d8f95d6c8d544e7a2ac3b428921", name: "level11.json" }, { bytes: 40392, md5: "f656d8b64fa8d19d4e875ebcf0b649ec", name: "level12.json" }, { bytes: 30614, md5: "44fe668b0e9f8c66b256ff1c15105820", name: "level2.json" }, { bytes: 38819, md5: "5ec2608dbbf5e9e77ab90efc90f6c1a2", name: "level3.json" }, { bytes: 34304, md5: "f1e18968a4a82c72049344d7962aa4ee", name: "level4.json" }, { bytes: 42140, md5: "50c2017d47eee119b48d492cf406cd27", name: "level5.json" }, { bytes: 37752, md5: "e85368b21cf190f0dd81cdae5668c70b", name: "level6.json" },
                    { bytes: 34549, md5: "f3a924d27f37ec002abe31a8cef6259c", name: "level7.json" }, { bytes: 39344, md5: "97669da63ecf9f7219b89c19dc62c5d8", name: "level8.json" }, { bytes: 46507, md5: "e7811d6adbb7109698295e6b870d73ef", name: "level9.json" }, { bytes: 747, md5: "c4491fb549502533295470c9976852de", name: "level_empty.json" }, { bytes: 28624, md5: "3ed2b90fb7461c419d7426c0986432a2", name: "tuto1.json" }, { bytes: 9310, md5: "ac2388d405f2f7240bac438f58115872", name: "tuto2.json" }
                ],
                ui_level: [{ bytes: 177247, md5: "46b43717a95181e6e4d6de0cce78fe79", name: "bg.jpg" },
                    { bytes: 21413, md5: "7e77ec9a5d2412f23ce59350acfa44be", name: "bg_house.png" }, { bytes: 37492, md5: "f55f70e59dfc28187b34ba4e26a373a7", name: "bg_jelly.png" }, { bytes: 34405, md5: "2fbc2eea8ca619d49b9901f2d389533f", name: "bg_kitty.png" }, { bytes: 35527, md5: "c20d26425f9667153e1eaee3302dae55", name: "bg_mega.png" }, { bytes: 5440, md5: "f1e732606c98f802b29934b674077bf7", name: "frame.png" }, { bytes: 5064, md5: "92fa697a2782f3107dd003eb20459dd8", name: "frame_locked.png" }, { bytes: 4394, md5: "6e769ee73d0537661c969afef0b4e165", name: "frame_selected.png" },
                    { bytes: 2809, md5: "53a2ab383d17ca43560fbcb1555ba594", name: "house.png" }, { bytes: 1661, md5: "0372392fbe72024866cf99e0de0ee297", name: "img_locked.png" }, { bytes: 2884, md5: "5c42a2a80e398df1a4f5671ed31a7430", name: "jelly.png" }, { bytes: 3544, md5: "13e39882ee0734dc8c7a1ac7e7fb98d2", name: "kitty.png" }, { bytes: 1662, md5: "4d18e0b9e99804ccf90a7127de796e22", name: "lock.png" }, { bytes: 23976, md5: "b123cd9442085e50fe310b778110283a", name: "mega.png" }, { bytes: 2453, md5: "03f6728748f118c43cb277f17e58f366", name: "text_box.png" }
                ],
                sprites_env3_highend: [{
                    bytes: 100102,
                    md5: "6f99158278857c36a3eb6cd1c579d306",
                    name: "parallax_1_env3.png"
                }, { bytes: 431448, md5: "dc733d583f84329b3544783e960c8e25", name: "parallax_2_env3.png" }],
                actors: [{ bytes: 418, md5: "758576c76d5371f72d464a23acab3cff", name: "decors.json" }, { bytes: 2670, md5: "a28c75e4cb5e100a56907330b0f3795c", name: "decors_env1.json" }, { bytes: 2565, md5: "a2f88459cb2f4a4e07430cf72bfe8f20", name: "decors_env2.json" }, { bytes: 2189, md5: "2cf8bbe84a9ab7ef257475608ff21605", name: "decors_env3.json" }, {
                    bytes: 6431,
                    md5: "51574d48911a35fd46c23fe7b7b7f85c",
                    name: "decors_env4.json"
                }, { bytes: 3091, md5: "5bced7ae107871d07102a05e7f22a764", name: "decors_physic.json" }, { bytes: 9199, md5: "01f9e026cdf79e5b48626f015dd388c1", name: "decors_road.json" }, { bytes: 3685, md5: "257a1281679eb0677fec5c5f48759cd5", name: "interactives.json" }, { bytes: 342, md5: "a1e316f79e59c622f882e86352041385", name: "trails.json" }],
                ui_character: [{ bytes: 16213, md5: "4ccef99cc8c8d750ee77d135fce5170a", name: "abrasive.png" }, { bytes: 15451, md5: "a93b9fc233d0d237a8933241700a90b2", name: "abrasive_locked.png" }, {
                        bytes: 15659,
                        md5: "a3bd891a48f03b55cf1de1f5237ceed3",
                        name: "abrasive_locked_selected.png"
                    }, { bytes: 16813, md5: "58bce7b3b1177ec30de0a9b936c63ce4", name: "abrasive_selected.png" }, { bytes: 15335, md5: "19e23ea099e93c073cb34237e87963e4", name: "alvin.png" }, { bytes: 6135, md5: "f557da675620aae8de0fe46c897490e3", name: "alvin_locked.png" }, { bytes: 5976, md5: "d81eb97cf886adc12948a2fdb00fc1c3", name: "alvin_locked_selected.png" }, { bytes: 16089, md5: "a98489c0dfd09b4fc01d163cd8328785", name: "alvin_selected.png" }, {
                        bytes: 15713,
                        md5: "59fddcfe57352738646c496137f1ed94",
                        name: "babe.png"
                    }, { bytes: 6142, md5: "efd7820eb96032d5ecf9a3d0cf912233", name: "babe_locked.png" }, { bytes: 6102, md5: "bbf4ba7ee70f49ad7255daf146511453", name: "babe_locked_selected.png" }, { bytes: 16377, md5: "7dbd531f0f533206c7f8d1a5b8895b08", name: "babe_selected.png" }, { bytes: 151456, md5: "0783bcbce1c0683d6bd4b7b58b999191", name: "bg.jpg" }, { bytes: 15411, md5: "f5c2399bbfb7d2146af903e0a64f30c2", name: "chloe.png" }, { bytes: 5817, md5: "dc15696675faa3400cfc744869f3d1f7", name: "chloe_locked.png" }, {
                        bytes: 15003,
                        md5: "fbb275b5693cd4e91ede9af8009cb9bf",
                        name: "chloe_locked_selected.png"
                    }, { bytes: 16088, md5: "0cf4da68eef21ce1de9e0ca9604bfebe", name: "chloe_selected.png" }, { bytes: 16489, md5: "4e692783485788a0c7cdfdea3a81f78f", name: "donnie.png" }, { bytes: 15840, md5: "ec7e79407d6f126ce696a6cf85e0d8ba", name: "donnie_locked.png" }, { bytes: 16023, md5: "271c5558c5cbbd202972d404116ecfc4", name: "donnie_locked_selected.png" }, { bytes: 16925, md5: "37643294a6de005154802d3c3bcad3f1", name: "donnie_selected.png" }, { bytes: 16002, md5: "1912b6096bdb89e5237b21fba3e4043d", name: "henry.png" }, {
                        bytes: 15411,
                        md5: "20adabb593660b2259c3cfa6131ffc04",
                        name: "henry_locked.png"
                    }, { bytes: 15658, md5: "b2966d3dcae1c36309cb183bcda2041d", name: "henry_locked_selected.png" }, { bytes: 16845, md5: "8a143c5b73156cd1865c38ce852289ef", name: "henry_selected.png" }, { bytes: 6613, md5: "a6b45c0740cac4479d4eb9cd0f597433", name: "info_bg.png" }, { bytes: 16895, md5: "d85187d5603113b8cd557d4cd0b41a6e", name: "kenzie.png" }, { bytes: 16203, md5: "c5ef93822cd63f831bea4f6e09918b0c", name: "kenzie_locked.png" }, {
                        bytes: 16501,
                        md5: "6232bf7284295e61a56e53c7defecb47",
                        name: "kenzie_locked_selected.png"
                    }, { bytes: 17545, md5: "95ddce9bc9846a87ec8c394446c856e7", name: "kenzie_selected.png" }, { bytes: 16188, md5: "99de31e4be50257ad053b511feef86ce", name: "leo.png" }, { bytes: 15861, md5: "dd7a5cade1cb9b09d18d1aeefff1ba04", name: "leo_locked.png" }, { bytes: 15964, md5: "4e02844b53543e9e5c0d21b43f5868ec", name: "leo_locked_selected.png" }, { bytes: 17016, md5: "a364e7219472560ebc0d309e59adc3c6", name: "leo_selected.png" }, { bytes: 16673, md5: "b6603ffca933f255d18b3646c688963d", name: "lincoln.png" }, {
                        bytes: 15799,
                        md5: "89ca86ccfbe1ff0b26efa0081b2827b2",
                        name: "lincoln_locked.png"
                    }, { bytes: 6341, md5: "5a423e70ea09d52f147f48b7f872acbc", name: "lincoln_locked_selected.png" }, { bytes: 17386, md5: "5cdbe80029d7f7c11b7a36b8aa01f8e9", name: "lincoln_selected.png" }, { bytes: 2804, md5: "72b35b9e72c15017cb0b0e82f1aecab0", name: "lock.png" }, { bytes: 4731, md5: "7e521db8231bd70aa1d38a4eb8ac5081", name: "logo_alvins.png" }, { bytes: 9971, md5: "073922c9d6d96fb7b33d1c43b492360e", name: "logo_fop.png" }, {
                        bytes: 12648,
                        md5: "4468c81292d4090826ca8bd52b5cbafc",
                        name: "logo_gs.png"
                    }, { bytes: 15403, md5: "12c4fbd05c8e7636d83b4d0b537e481f", name: "logo_hd.png" }, { bytes: 14203, md5: "58334f01e475d45c0245b48da8ac112b", name: "logo_pr.png" }, { bytes: 17809, md5: "a43183ff78137be0b859aac8cc7f2453", name: "logo_rr.png" }, { bytes: 4276, md5: "4344136185cf8a182855861726990a22", name: "logo_sbsp.png" }, { bytes: 4451, md5: "28b4d8a45ca0b640c76235780817068e", name: "logo_tlh.png" }, { bytes: 29943, md5: "419e4fd2b5903f0b6f1015615c7f6b11", name: "logo_tmnt.png" }, {
                        bytes: 4671,
                        md5: "9ab1a2137265e1db99ac423041c08613",
                        name: "logo_tmnt2.png"
                    }, { bytes: 5556, md5: "3b4a7465f91f059bdfc6fe400f972403", name: "logo_vs.png" }, { bytes: 17667, md5: "0d1acf492d0d91f94fefb2ef052c47f7", name: "lola.png" }, { bytes: 16760, md5: "8d72d72acbc538b4f0df7d2b2218ae25", name: "lola_locked.png" }, { bytes: 16922, md5: "60747c714ffd9809890c5edb0a364548", name: "lola_locked_selected.png" }, { bytes: 18311, md5: "4e9d10182c1643e2949a65c33f06e215", name: "lola_selected.png" }, { bytes: 16017, md5: "f8532ce103ab09101a25bbd837d5aec4", name: "mike.png" }, {
                        bytes: 15400,
                        md5: "5b3f586fdf90237033b1de7a98e36d04",
                        name: "mike_locked.png"
                    }, { bytes: 15639, md5: "5ab969a4ff9fb4fd0f03a704c90790d4", name: "mike_locked_selected.png" }, { bytes: 16657, md5: "c7305af4614c4e67cf09fde4dd5f24fe", name: "mike_selected.png" }, { bytes: 14107, md5: "3fb82f7529f16d6d8b44adeb971211a3", name: "patrick.png" }, { bytes: 5470, md5: "2a2c5baa0e4d3a26f591492727e0e654", name: "patrick_locked.png" }, { bytes: 5526, md5: "dbe794011a57a6aa9e5737dcd5635eda", name: "patrick_locked_selected.png" }, { bytes: 14643, md5: "1959cce4140c6a7761862be2e050e6c5", name: "patrick_selected.png" },
                    { bytes: 15476, md5: "a75c3aafe2680f436a5e8c1aa6e9327a", name: "ranger.png" }, { bytes: 6244, md5: "745920928e789d40dae744e04fbd3db4", name: "ranger_locked.png" }, { bytes: 6214, md5: "3134cb448369143cea311148264e6602", name: "ranger_locked_selected.png" }, { bytes: 16350, md5: "3be7794e79d9177535bdbe3dfb609d41", name: "ranger_selected.png" }, { bytes: 15996, md5: "e74023f30168961b9a5d7683a863e834", name: "raph.png" }, { bytes: 15434, md5: "63d964ae774091309f62b8ce9c4e6b3e", name: "raph_locked.png" }, {
                        bytes: 15559,
                        md5: "a799d08a5d6e492b089eb44e73149c44",
                        name: "raph_locked_selected.png"
                    }, { bytes: 16608, md5: "160cd4ee2a0ee994257d96516e5f81c5", name: "raph_selected.png" }, { bytes: 6816, md5: "0ce81d49ad8ddc5e7d8d7ac7666ef59f", name: "shredder.png" }, { bytes: 6819, md5: "1b847e3a05e8dbbb17b4ef33e273e0d9", name: "shredder_locked.png" }, { bytes: 6713, md5: "c2033eb075058c1cf27bf8fc7d7d5cd6", name: "shredder_locked_selected.png" }, { bytes: 6732, md5: "e1b27f89c4101fd244de93b4bc964e5a", name: "shredder_selected.png" }, { bytes: 18029, md5: "4211622e7cf0b3bc3988c3d850fc081b", name: "snide.png" },
                    { bytes: 6868, md5: "b88a2762a545cc0a678a3fa6454f8d76", name: "snide_locked.png" }, { bytes: 6888, md5: "3bee2079b6559cbc3344f73f560bafb3", name: "snide_locked_selected.png" }, { bytes: 18752, md5: "3ede0a259ede5ace68d616c632962c93", name: "snide_selected.png" }, { bytes: 15369, md5: "bf1a39bc0fc1b5284b5466f4ece1c5fa", name: "spongebob.png" }, { bytes: 14746, md5: "74c602e99c94ef256a92207514a8fb56", name: "spongebob_locked.png" }, { bytes: 14973, md5: "188babe8e27c83662a5a5c60068a0a45", name: "spongebob_locked_selected.png" }, {
                        bytes: 15884,
                        md5: "88bf58bf29f6bf8b45ce783b6a5edf77",
                        name: "spongebob_selected.png"
                    }, { bytes: 16180, md5: "5e7d60581aeba48fb84f255652f242b8", name: "tiger.png" }, { bytes: 6221, md5: "a9fdabf01d2740795f6bbb3b92ccba5f", name: "tiger_locked.png" }, { bytes: 15711, md5: "35917a4a673c3f9a5d81ea4c3524a972", name: "tiger_locked_selected.png" }, { bytes: 16849, md5: "42c92d73d2983a9cb5fb2138256d4103", name: "tiger_selected.png" }, { bytes: 15262, md5: "61b0112ad0c98c45cf70d311786cc429", name: "timmy.png" }, { bytes: 6082, md5: "78159f355bad9a712417c55df7d7dcb5", name: "timmy_locked.png" }, {
                        bytes: 5837,
                        md5: "89e94e18fbca1bb507ee68b7c680a93c",
                        name: "timmy_locked_selected.png"
                    }, { bytes: 15935, md5: "fdb33617487c4fd639208441a8751019", name: "timmy_selected.png" }, { bytes: 15006, md5: "309b1e621729ed11c6aedd1fcbf4c249", name: "tommy.png" }, { bytes: 5871, md5: "398545fa6034fc275d93286dc62ab27b", name: "tommy_locked.png" }, { bytes: 5840, md5: "0556aeb72e57ed89b82d7915a780971d", name: "tommy_locked_selected.png" }, { bytes: 15647, md5: "762a5d49791a59faac4c1c3521bd8679", name: "tommy_selected.png" }
                ],
                fonts: [{ bytes: 56615, md5: "4860ca0005920a223da3233b3ff6ee41", name: "20_black.fnt" },
                    { bytes: 12279, md5: "4d04e0a1e110f0d09fa06e322551458a", name: "20_black.png" }, { bytes: 57015, md5: "d375806b66daebe10ef4039cd939c08e", name: "40_white.fnt" }, { bytes: 25772, md5: "d205e4490c53c1b66ffab53add6b3097", name: "40_white.png" }, { bytes: 32543, md5: "506d618df235a36c0cf8dad5702cd0fe", name: "90_blue.fnt" }, { bytes: 117296, md5: "f4bdc688d7b2f15b676fb77d40663e02", name: "90_blue.png" }, { bytes: 69517, md5: "1423a74fcad41f846a52bf700aa8f4d7", name: "font.fnt" }, { bytes: 21799, md5: "1c5b4c16cf26900e8cdde27d894a7aee", name: "font.png" },
                    { bytes: 34868, md5: "b5310180af874c594b6893860ab1e0d5", name: "mov_15_black.fnt" }, { bytes: 6075, md5: "555512366a3635e34a1ac9556de683a3", name: "mov_15_black.png" }, { bytes: 34866, md5: "0d6d46f6f401466f55b21bb9b0f0f6f2", name: "mov_15_blue.fnt" }, { bytes: 6075, md5: "2130376b929a37055c9d889e469b7c09", name: "mov_15_blue.png" }, { bytes: 34870, md5: "e0ac727a5d9e25ea28df19078a5cfbe9", name: "mov_15_orange.fnt" }, { bytes: 6075, md5: "32032a11dd955a5962353b293535c412", name: "mov_15_orange.png" }, {
                        bytes: 34868,
                        md5: "0d3458bd4395e8aabac5ca87032d917b",
                        name: "mov_15_white.fnt"
                    }, { bytes: 6075, md5: "fbec6543a193906a5093b7f105f36582", name: "mov_15_white.png" }, { bytes: 34967, md5: "5c3797a044dbc7634041e0f1b9966678", name: "mov_20_white.fnt" }, { bytes: 7873, md5: "8ca61ce5fa0b1ea0804d198e8a1b093a", name: "mov_20_white.png" }, { bytes: 35104, md5: "bc324da3b8022c86732dd04b9db836c1", name: "mov_21_black_shadow.fnt" }, { bytes: 19032, md5: "1e8ddf2c9b5bc506bc619eb0bf52f76a", name: "mov_21_black_shadow.png" }, { bytes: 35026, md5: "e52e0b2cac6db0f97ff184cfabae0788", name: "mov_23_white_shadow.fnt" },
                    { bytes: 19168, md5: "8be0964ae505cf36f12a350aa1d887dc", name: "mov_23_white_shadow.png" }, { bytes: 35144, md5: "b1e6d4da9826f19868f5ba3b855785f2", name: "mov_30_black.fnt" }, { bytes: 11641, md5: "a59e96524195c41c56e4bb2c22406d68", name: "mov_30_black.png" }, { bytes: 35172, md5: "356bbd70c7072f3b270be7b5d2560423", name: "mov_30_orange_shadow.fnt" }, { bytes: 24204, md5: "0c7b9dfb4b103ad37e61290af26d2465", name: "mov_30_orange_shadow.png" }, { bytes: 35215, md5: "d26565426f3d1931d2d4c8a3db10ab2c", name: "mov_40_black.fnt" }, {
                        bytes: 15653,
                        md5: "79fcc7930edac9a152cdd94d241f8769",
                        name: "mov_40_black.png"
                    }, { bytes: 35217, md5: "293266612c717355f405759c22ab7e02", name: "mov_40_orange.fnt" }, { bytes: 15653, md5: "ccf7a8d8987a5b9a276b1e77f5260c45", name: "mov_40_orange.png" }, { bytes: 35235, md5: "e441aeb9bcb2cef28959fb4ba7fb091d", name: "mov_40_white_shadow.fnt" }, { bytes: 31420, md5: "aafe9c8c3a7a929a4cfeb1227f5c602a", name: "mov_40_white_shadow.png" }, { bytes: 35345, md5: "02891567fb084e9930df00a49b4d9a74", name: "mov_65_white_shadow.fnt" }, { bytes: 52452, md5: "648ea23a10e769592bbdfd51ba5b555c", name: "mov_65_white_shadow.png" }
                ],
                spine: [{ bytes: 1340, md5: "8c57f632f7631ce7d525090ba7112fcc", name: "abrasive/abrasive.atlas" }, { bytes: 11062, md5: "7d1030d6d6cb56d0e2d76f546e296439", name: "abrasive/abrasive.json" }, { bytes: 24032, md5: "0c65cc7596fb42f57fbf2c8441a9852a", name: "abrasive/abrasive.png" }, { bytes: 1651, md5: "354452f44788e26902954fe6b00f2750", name: "alvin/alvin.atlas" }, { bytes: 15004, md5: "af4a625c80124b477d30a93e5ad51cf5", name: "alvin/alvin.json" }, { bytes: 82944, md5: "63c0bfdc69c60b0e6869cf5147f7133f", name: "alvin/alvin.png" }, {
                        bytes: 1667,
                        md5: "036b5636f86000fb14185c9651e85c1b",
                        name: "babe/babe.atlas"
                    }, { bytes: 14239, md5: "edbe29b7f8efe8a60302437463c0cbd7", name: "babe/babe.json" }, { bytes: 136412, md5: "3c202bb481f9f9c9a99e239e12c4af09", name: "babe/babe.png" }, { bytes: 1546, md5: "dde1a4a05f32a31bdcf9597f5c8e6d3c", name: "chloe/chloe.atlas" }, { bytes: 14339, md5: "4e2c22940655e87d929a807d34702198", name: "chloe/chloe.json" }, { bytes: 78435, md5: "be5ce2cdbde7d9ae1a36f43f2834bfe6", name: "chloe/chloe.png" }, { bytes: 1549, md5: "117c2329af1821dde3cb115d461bb5e9", name: "donnie/donnie.atlas" }, {
                        bytes: 14739,
                        md5: "1bce0c166aa14a45c6bfc61eefbe5894",
                        name: "donnie/donnie.json"
                    }, { bytes: 113088, md5: "b2442103263a19129ea0e694b3f11a8c", name: "donnie/donnie.png" }, { bytes: 1554, md5: "2b908b88cd49fc43cd64159aff19f06c", name: "henry/henry.atlas" }, { bytes: 14323, md5: "f65ff5151127dc63f30f591d41d61b3c", name: "henry/henry.json" }, { bytes: 70374, md5: "10d4e0c57d9800e4357a28bf13201101", name: "henry/henry.png" }, { bytes: 1667, md5: "60c9b91f796fb5110cf9bd7637e934d1", name: "kenzie/kenzie.atlas" }, { bytes: 13762, md5: "4d03ae0c7849ded3afb7779dcafe6ef9", name: "kenzie/kenzie.json" }, {
                        bytes: 124780,
                        md5: "66645c44763584380cb331c4f72bf274",
                        name: "kenzie/kenzie.png"
                    }, { bytes: 1562, md5: "2ec232986b3ffbd2f4792122e31cab6b", name: "leo/leo.atlas" }, { bytes: 14634, md5: "cc738b12efd481c7fedabb14615d2ebb", name: "leo/leo.json" }, { bytes: 146911, md5: "d7230f78d456efb5d9b2996ec86a919f", name: "leo/leo.png" }, { bytes: 1664, md5: "caff3f78c68ac319f5b37d726cab8c28", name: "lincoln/lincoln.atlas" }, { bytes: 12488, md5: "59f75d3d228aa7d11c4306fb8185fb67", name: "lincoln/lincoln.json" }, { bytes: 81855, md5: "da2ebfdd8a8bd15a6f39fe8077fcee12", name: "lincoln/lincoln.png" },
                    { bytes: 1658, md5: "d62955c60bf32dbdefa13dcaafedf497", name: "lola/lola.atlas" }, { bytes: 15906, md5: "4cf136b5a41b383d554b171bcfcd098a", name: "lola/lola.json" }, { bytes: 102870, md5: "99491b28b90b16371d964be2ed80584a", name: "lola/lola.png" }, { bytes: 1547, md5: "cfc38e3e159d9891bd7ec401bb91d3d5", name: "mike/mike.atlas" }, { bytes: 14669, md5: "079e6fa197c425b4151e6c816d0b15dc", name: "mike/mike.json" }, { bytes: 86738, md5: "515cfae3bbafdfb02e7fe06ec64a1093", name: "mike/mike.png" }, { bytes: 1347, md5: "432b9466bbee26aa9c1fc56cb959b544", name: "patrick/patrick.atlas" },
                    { bytes: 11031, md5: "784d686f143bdaab7b9dea1528f7ba5c", name: "patrick/patrick.json" }, { bytes: 65551, md5: "7a6d3cd7be6a968ef1536cf8045b576a", name: "patrick/patrick.png" }, { bytes: 182, md5: "66d13902c2b7d7d902561abc0050b790", name: "racer_1/racer_1.atlas" }, { bytes: 23311, md5: "f636390de00ddb0bb1c0d859c8f9b73e", name: "racer_1/racer_1.json" }, { bytes: 1365, md5: "8e7a51e10f18553a008525bc934c5e7b", name: "racer_1/racer_1.png" }, { bytes: 508, md5: "5cb10f5e68a89f05b4360b0abc81524d", name: "racer_2/racer_2.atlas" }, {
                        bytes: 21820,
                        md5: "19f6e02b549e76faac459bb6030764e7",
                        name: "racer_2/racer_2.json"
                    }, { bytes: 3957, md5: "b0d7320a918b6cc01a3d9607cacb2ce4", name: "racer_2/racer_2.png" }, { bytes: 182, md5: "23f963ac7d5b53bc8fdf2d39d56dcc68", name: "racer_3/racer_3.atlas" }, { bytes: 28484, md5: "8ade90bbbf8112d29bc72f8847aba369", name: "racer_3/racer_3.json" }, { bytes: 1365, md5: "8e7a51e10f18553a008525bc934c5e7b", name: "racer_3/racer_3.png" }, { bytes: 186, md5: "7fd2213dd439a5b48cb3951dc3a6021e", name: "racer_4/racer_4.atlas" }, { bytes: 25471, md5: "b4a83c9670fcda3de7c9e8d80bd77624", name: "racer_4/racer_4.json" },
                    { bytes: 2243, md5: "321db4d08543024554a64a2a9bf6af24", name: "racer_4/racer_4.png" }, { bytes: 182, md5: "24c9598b2abe574b79110c7b01d881b7", name: "racer_5/racer_5.atlas" }, { bytes: 30423, md5: "f95bcc6511fb211bd70264053355b86a", name: "racer_5/racer_5.json" }, { bytes: 1365, md5: "8e7a51e10f18553a008525bc934c5e7b", name: "racer_5/racer_5.png" }, { bytes: 504, md5: "6216c42905156a081515517cf1024f1d", name: "racer_6/racer_6.atlas" }, { bytes: 30862, md5: "7413282d60e86a0d13ac29665589c219", name: "racer_6/racer_6.json" }, {
                        bytes: 5417,
                        md5: "8df0fce6dd70d1d92ab4b223cae7a72e",
                        name: "racer_6/racer_6.png"
                    }, { bytes: 182, md5: "b5824d245b221af8aea8b5472c3f92b8", name: "racer_7/racer_7.atlas" }, { bytes: 23311, md5: "f636390de00ddb0bb1c0d859c8f9b73e", name: "racer_7/racer_7.json" }, { bytes: 1365, md5: "8e7a51e10f18553a008525bc934c5e7b", name: "racer_7/racer_7.png" }, { bytes: 508, md5: "605f19eb1f33940d1cc76de16e6c2d3b", name: "racer_8/racer_8.atlas" }, { bytes: 21820, md5: "19f6e02b549e76faac459bb6030764e7", name: "racer_8/racer_8.json" }, { bytes: 3957, md5: "b0d7320a918b6cc01a3d9607cacb2ce4", name: "racer_8/racer_8.png" },
                    { bytes: 182, md5: "e846ae5299ad6d96ef2f13af8ecfdfe2", name: "racer_9/racer_9.atlas" }, { bytes: 28484, md5: "8ade90bbbf8112d29bc72f8847aba369", name: "racer_9/racer_9.json" }, { bytes: 1365, md5: "8e7a51e10f18553a008525bc934c5e7b", name: "racer_9/racer_9.png" }, { bytes: 1225, md5: "84f1c93b29d936d8f416645d2504eaed", name: "ranger/ranger.atlas" }, { bytes: 12033, md5: "352b3c5065855b1312a720283c943f75", name: "ranger/ranger.json" }, { bytes: 76993, md5: "956a7f517770837fd384307f85976202", name: "ranger/ranger.png" }, {
                        bytes: 1564,
                        md5: "ebad483f33be8121a9c9be87d4aff411",
                        name: "raph/raph.atlas"
                    }, { bytes: 14967, md5: "d41a55f621151938b645b96a15b5f4f1", name: "raph/raph.json" }, { bytes: 137546, md5: "1aad8072690f9ed0533b4203d9231603", name: "raph/raph.png" }, { bytes: 1541, md5: "e94f1f9f5c5a3b2bdceb3f9978f97c14", name: "shredder/shredder.atlas" }, { bytes: 12880, md5: "8d58f68279a06e6b94dd2498dae0a494", name: "shredder/shredder.json" }, { bytes: 28604, md5: "6aa72579a5b135bbedd28a0f13255fd8", name: "shredder/shredder.png" }, { bytes: 1313, md5: "b535eb9ea65194358f6da4541a552bfc", name: "snide/snide.atlas" }, {
                        bytes: 13209,
                        md5: "bacbc17974aed796c2b15c04001e12f1",
                        name: "snide/snide.json"
                    }, { bytes: 92847, md5: "a1da1c1a8cd303d93cb7e94f15a50cdc", name: "snide/snide.png" }, { bytes: 1361, md5: "42313b3b8f984c7863d81028bb048ebc", name: "spongebob/spongebob.atlas" }, { bytes: 10884, md5: "8e991fe2fc08c76a9735bac478fb7389", name: "spongebob/spongebob.json" }, { bytes: 88102, md5: "a8065213a97a7349710fcc880c2cd89d", name: "spongebob/spongebob.png" }, { bytes: 1653, md5: "8d422a194578382fcd9c6817a4ca5a7f", name: "tiger/tiger.atlas" }, {
                        bytes: 12524,
                        md5: "5b49f14736feb33668eb48d7099d8d2e",
                        name: "tiger/tiger.json"
                    }, { bytes: 130370, md5: "61adf4bf6aef2a1d8f1c46da47a46feb", name: "tiger/tiger.png" }, { bytes: 1551, md5: "ea408a10929fe339c704be83c9e62eac", name: "timmy/timmy.atlas" }, { bytes: 12353, md5: "886e3c4b93bfac9feb46997d07fa4feb", name: "timmy/timmy.json" }, { bytes: 124921, md5: "a3c1461cdc49514c3e2814bc0a1b0d30", name: "timmy/timmy.png" }, { bytes: 1543, md5: "1e6551f6ce620868a2e865b21ff99694", name: "tommy/tommy.atlas" }, { bytes: 14570, md5: "ae312dbb711fd5c4cc87efc4b8a1eedf", name: "tommy/tommy.json" }, {
                        bytes: 54540,
                        md5: "86fe56fb7ecaa3963b964ff1dacd3911",
                        name: "tommy/tommy.png"
                    }
                ],
                sound: [{ bytes: 6745, md5: "95cb453fbd6dd8b24c64fd49a8d21de5", name: "abrasive_boost.mp3" }, { bytes: 10175, md5: "6faf739923345a6d3ba058603c351897", name: "abrasive_boost.ogg" }, { bytes: 11446, md5: "a074c3f7c994d999e44b21d0f937f368", name: "abrasive_char_select.mp3" }, { bytes: 14182, md5: "9333ce167cf5f5b80da4bf23c872e567", name: "abrasive_char_select.ogg" }, { bytes: 5554, md5: "3fcd9a95f491f3f78cc4428a0964ba2b", name: "abrasive_hit.mp3" }, { bytes: 9157, md5: "8ec972ed42eb0cf651b058d0762e2788", name: "abrasive_hit.ogg" },
                    { bytes: 12334, md5: "9b9bda082788d42f7ae4ef645a75a662", name: "abrasive_lose.mp3" }, { bytes: 15544, md5: "73ec7a89a42bae4f6033a8662343d13a", name: "abrasive_lose.ogg" }, { bytes: 8764, md5: "54608347ff48504fc91a5934b11fda45", name: "abrasive_taunt.mp3" }, { bytes: 11528, md5: "b21e9726618cd784d80dfe118ea1ec0f", name: "abrasive_taunt.ogg" }, { bytes: 10627, md5: "794d0daaa2ebdfddbf0efbfdf0ebc160", name: "abrasive_throw.mp3" }, { bytes: 13350, md5: "a63eeb40f6ec99b6385975ea1a59e949", name: "abrasive_throw.ogg" }, {
                        bytes: 7160,
                        md5: "13bb1597cd9e370ea737e5e47aa77a49",
                        name: "abrasive_win.mp3"
                    }, { bytes: 10857, md5: "b34a96153d9129e7909d21928a57de09", name: "abrasive_win.ogg" }, { bytes: 8719, md5: "3795ac13140e7c95b333dd5afadcb83c", name: "alvin_boost.mp3" }, { bytes: 11714, md5: "e2ce9070e6c9ff41c07b42f32efbc1c7", name: "alvin_boost.ogg" }, { bytes: 3531, md5: "fd731a5c635b86177112eabe124a726b", name: "alvin_char_select.mp3" }, { bytes: 7075, md5: "d06e4f9ddff4cabe8eedca70dde7d8ee", name: "alvin_char_select.ogg" }, { bytes: 3658, md5: "81eeb710a0dd006ad5055a30f008f3d3", name: "alvin_hit.mp3" }, {
                        bytes: 7017,
                        md5: "ea8727fea242487a902ca72ec7338ebc",
                        name: "alvin_hit.ogg"
                    }, { bytes: 13160, md5: "f06e2b3cb6e56a3ebce702bac1f6a73c", name: "alvin_lose.mp3" }, { bytes: 14997, md5: "ddebb8a38cc64de0b559ea8203053556", name: "alvin_lose.ogg" }, { bytes: 7749, md5: "ae6f2c0607e742ba872188c18a184d53", name: "alvin_taunt.mp3" }, { bytes: 11233, md5: "c4cf9091a417156bb95eb84abd1e161b", name: "alvin_taunt.ogg" }, { bytes: 4288, md5: "4f09026427dd86ece7fac1311e454b2f", name: "alvin_throw.mp3" }, { bytes: 7566, md5: "77710c3262d371d878b11003e6c7f164", name: "alvin_throw.ogg" }, {
                        bytes: 16126,
                        md5: "8f1e730fc7e1df8f1cf47a2cf92cf59a",
                        name: "alvin_win.mp3"
                    }, { bytes: 17694, md5: "b474f7a4cc56bb71a27e0ac6ce0e45fe", name: "alvin_win.ogg" }, { bytes: 3317, md5: "2097ae994cb76919b0fbadc586fece25", name: "babe_char_select.mp3" }, { bytes: 6716, md5: "7a80cce628362d5a450392341b4cd679", name: "babe_char_select.ogg" }, { bytes: 6680, md5: "39c08eac8d78d0295fd257de94f4b496", name: "babe_hit.mp3" }, { bytes: 9715, md5: "9f034034e19fd1c42dbc4ec8a91ee73e", name: "babe_hit.ogg" }, { bytes: 10012, md5: "e7d05877b5d8e20b6ad7d91ed3f40ae7", name: "babe_lose.mp3" }, {
                        bytes: 13668,
                        md5: "5315a24bf5eac0bfa06acb358d1a9381",
                        name: "babe_lose.ogg"
                    }, { bytes: 2902, md5: "1e2d7c7714fad8a5a859a8df5a7ca94b", name: "babe_taunt.mp3" }, { bytes: 5839, md5: "14cf611eb84168539880c171e2dd2495", name: "babe_taunt.ogg" }, { bytes: 5305, md5: "eb2f43e9fc277bc657f4477bd66ba9ae", name: "babe_throw.mp3" }, { bytes: 8832, md5: "4db134c12f8a035a186b3c6e016226ec", name: "babe_throw.ogg" }, { bytes: 3317, md5: "2097ae994cb76919b0fbadc586fece25", name: "babe_win.mp3" }, { bytes: 6716, md5: "852ff9f525120d78f4e0b2801ac8948c", name: "babe_win.ogg" }, {
                        bytes: 3087,
                        md5: "a7bfc830b7a540266a5e8953c8a0bafc",
                        name: "beehive.mp3"
                    }, { bytes: 6252, md5: "1785510173133ebb637d59e3b301565c", name: "beehive.ogg" }, { bytes: 10914, md5: "bfbdbb245c8c5fff2bfb997030695423", name: "beehive_impact.mp3" }, { bytes: 15487, md5: "1a461ee9e11232316422187ee33d6545", name: "beehive_impact.ogg" }, { bytes: 8269, md5: "c2b84d49d9e2e64457026b8c96572d1a", name: "chloe_char_select.mp3" }, { bytes: 11420, md5: "b3a597c1d49f3576b1981729189c1894", name: "chloe_char_select.ogg" }, { bytes: 2513, md5: "11380dbba5559fe34034cc7cde9b3145", name: "chloe_hit.mp3" }, {
                        bytes: 5495,
                        md5: "b0543e413b26ada9f93104ac08321e05",
                        name: "chloe_hit.ogg"
                    }, { bytes: 9235, md5: "257debe7c28761ddab8292a7f75418b5", name: "chloe_lose.mp3" }, { bytes: 12345, md5: "28932f78f2b37a5b22de63df5f027965", name: "chloe_lose.ogg" }, { bytes: 4681, md5: "e8f34ca2e31ff25d01484da6f2373577", name: "chloe_taunt.mp3" }, { bytes: 7841, md5: "eedf89e41f845defd77074a4cb3e0dfc", name: "chloe_taunt.ogg" }, { bytes: 5364, md5: "8c4870e7036778f0afdd97573749a090", name: "chloe_throw.mp3" }, { bytes: 8916, md5: "09f4646e22e0c3cfd0ab3b57f3e198dd", name: "chloe_throw.ogg" }, {
                        bytes: 14171,
                        md5: "6833e87dc009a6b819cc79a415a65923",
                        name: "chloe_win.mp3"
                    }, { bytes: 16122, md5: "294d417b4f394444fa1d45d4f65b8e87", name: "chloe_win.ogg" }, { bytes: 930, md5: "f492ee9e6d247614f9069114fcfd91a3", name: "click.mp3" }, { bytes: 4056, md5: "761ac312daaa0069949520cf11bcfb15", name: "click.ogg" }, { bytes: 2776, md5: "0306ae9265f2f456db889fb74983dfc1", name: "countdown_1.mp3" }, { bytes: 5327, md5: "ba1c06eeb9c61b6f834f1cbe2db1f3f3", name: "countdown_1.ogg" }, { bytes: 3608, md5: "062e824c5ed9750142cb23d0b8ba9086", name: "countdown_go.mp3" }, {
                        bytes: 4981,
                        md5: "146400a980db2344d1a29d002eb6ec61",
                        name: "countdown_go.ogg"
                    }, { bytes: 6560, md5: "cfb24215710c1ecc924d7e9036abd787", name: "donnie_char_select.mp3" }, { bytes: 9248, md5: "495e2685549665dd0123c28811784ae8", name: "donnie_char_select.ogg" }, { bytes: 2720, md5: "34c5d21d3c1f67a73f8b32e1af021887", name: "donnie_hit.mp3" }, { bytes: 5925, md5: "77b687ac3e354adebca3ecd338ce14de", name: "donnie_hit.ogg" }, { bytes: 4738, md5: "2bd4bb60208504a5faf6ca4628a4fc53", name: "donnie_lose.mp3" }, { bytes: 7868, md5: "6635eb1ec7674dda98d35856d0651b06", name: "donnie_lose.ogg" }, {
                        bytes: 8784,
                        md5: "0460343a31691ae3d344a261d3714477",
                        name: "donnie_throw.mp3"
                    }, { bytes: 12012, md5: "440d1bf172b94d8fd0c96ca839a5deee", name: "donnie_throw.ogg" }, { bytes: 5744, md5: "2513726b69cf5d7e377ef05cb0999a8f", name: "donnie_win.mp3" }, { bytes: 9249, md5: "3616385d8b75eaef9995418e12d8cf84", name: "donnie_win.ogg" }, { bytes: 4648, md5: "8220f6a0e3e68007fa2c95c4e74924cf", name: "emp.mp3" }, { bytes: 7412, md5: "c8062d5a5c338112c71a6c3ea0eabd4a", name: "emp.ogg" }, { bytes: 10185, md5: "1589a4b79e9738a9c896977813f4777b", name: "emp_impact.mp3" }, {
                        bytes: 14850,
                        md5: "d8c7e33ee3c561a0bf5845efeae2f57f",
                        name: "emp_impact.ogg"
                    }, { bytes: 15341, md5: "e19e60d486b197786890409b42108867", name: "engine_run.mp3" }, { bytes: 19926, md5: "786b2f13900d2b9ff3271d72ef34d7d3", name: "engine_run.ogg" }, { bytes: 26670, md5: "6aee0b1566f46adf2ed0154c97a33de7", name: "firework.mp3" }, { bytes: 32902, md5: "6b132e51ec5c24798fc4996e9554516e", name: "firework.ogg" }, { bytes: 137540, md5: "f8098e2394a66c1e41b62ad38cbe1b6b", name: "gameplay_env_1.mp3" }, { bytes: 159789, md5: "97cb77c7ca973bb380cd0f2fd02e9f94", name: "gameplay_env_1.ogg" }, {
                        bytes: 122407,
                        md5: "ba68a863df740ab9fe2a4ff5364aee65",
                        name: "gameplay_env_2.mp3"
                    }, { bytes: 134010, md5: "1479c7f5f458a6df30f8f0d34f1f4fc3", name: "gameplay_env_2.ogg" }, { bytes: 167720, md5: "08a228312db0e57937bcb84a34771c82", name: "gameplay_env_3.mp3" }, { bytes: 202492, md5: "ee9b152030a8cf575e051b37b481e3e0", name: "gameplay_env_3.ogg" }, { bytes: 144129, md5: "91a2e0acef9cc699276e3d64e2942af9", name: "gameplay_env_4.mp3" }, { bytes: 159120, md5: "81c01f5285f67b8192f9983565c78be8", name: "gameplay_env_4.ogg" }, { bytes: 3666, md5: "c92858139d48ef6bd29eb469e5d9cc21", name: "ghost.mp3" }, {
                        bytes: 4887,
                        md5: "0adac5108db0464ddcff88472d163333",
                        name: "ghost.ogg"
                    }, { bytes: 4443, md5: "1c577091004d17d261e9e23a3707b320", name: "henry_boost.mp3" }, { bytes: 6963, md5: "3d0df36d467e63bfb990bde8d4ee2d45", name: "henry_boost.ogg" }, { bytes: 4184, md5: "0ce9938feef9225b5016f9c4d32323cd", name: "henry_char_select.mp3" }, { bytes: 7288, md5: "84b8e2aad439dc33b5bf49ec5b9f99de", name: "henry_char_select.ogg" }, { bytes: 5183, md5: "999eac65df850998ff0be94f9d2c38b9", name: "henry_hit.mp3" }, { bytes: 8098, md5: "0c82c3ea57e415abfd3d766f820c056b", name: "henry_hit.ogg" },
                    { bytes: 2697, md5: "4ff125611970f4937799ab7b52f833b7", name: "henry_lose.mp3" }, { bytes: 5974, md5: "cf71f44a0ab904da44d69b554bc7e25d", name: "henry_lose.ogg" }, { bytes: 3984, md5: "e73fb27d4fd937efd953b0cfd5b3b34a", name: "henry_throw.mp3" }, { bytes: 6726, md5: "a744642432836f32fcb9fae41fdf59ed", name: "henry_throw.ogg" }, { bytes: 5235, md5: "c38f5f60853ed0ee9fe53e9f811e9f13", name: "henry_win.mp3" }, { bytes: 8568, md5: "30541d49328a972a3cb9c1365365b91e", name: "henry_win.ogg" }, { bytes: 2464, md5: "2db6c1668b5e84effc77aeb8758b832b", name: "hit_car.mp3" },
                    { bytes: 5106, md5: "acdfd5824298df58b3485447db1cf159", name: "hit_car.ogg" }, { bytes: 4442, md5: "fed7cf41017c32a0038a44fb6290535d", name: "hit_object.mp3" }, { bytes: 6676, md5: "7d24531f581667db6394b56163bf0f95", name: "hit_object.ogg" }, { bytes: 1815, md5: "b41a338170a8135abf04ebb820f75d65", name: "hop.mp3" }, { bytes: 4545, md5: "50340ac1786bd6a1562d57914a71ef64", name: "hop.ogg" }, { bytes: 9672, md5: "b5c92765f966c34ca7dd23f666b3ced3", name: "invisibility.mp3" }, { bytes: 12324, md5: "1bd718a33fddbce9712798ffb03942f7", name: "invisibility.ogg" },
                    { bytes: 4596, md5: "54764ef58b7dbe11902a390bfaf33fc5", name: "invisibility_out.mp3" }, { bytes: 7551, md5: "8dd5a5ad708653968ced0cc1e628773f", name: "invisibility_out.ogg" }, { bytes: 10135, md5: "7d739a71f89d69156a5831d8a64348f8", name: "jump.mp3" }, { bytes: 13417, md5: "a0f80562297ea3246b2024e4161ba701", name: "jump.ogg" }, { bytes: 3166, md5: "0ccae7d3535df3f59d6409a8ba50c9b2", name: "kenzie_boost.mp3" }, { bytes: 5840, md5: "0793101cc1617278936279028d65e74c", name: "kenzie_boost.ogg" }, {
                        bytes: 5507,
                        md5: "1f2b42150521e6427c826d633b715b17",
                        name: "kenzie_char_select.mp3"
                    }, { bytes: 8114, md5: "60d9ca402e328d78181a392cf3642c4a", name: "kenzie_char_select.ogg" }, { bytes: 5125, md5: "fadb4f273bcaafb55fd47c53fcbc384e", name: "kenzie_hit.mp3" }, { bytes: 8537, md5: "75949d3a64b7b2d6aafdce248efcb795", name: "kenzie_hit.ogg" }, { bytes: 5754, md5: "de37d579e62683dda5e590bc59ed5215", name: "kenzie_lose.mp3" }, { bytes: 8868, md5: "c3ad2ababc5bcf5c3e4ab70699d06682", name: "kenzie_lose.ogg" }, { bytes: 5306, md5: "13a9e273e700356ed6e0f604492d20cb", name: "kenzie_taunt.mp3" }, {
                        bytes: 8610,
                        md5: "717eddeef1f8ac4f3d9a39f781605213",
                        name: "kenzie_taunt.ogg"
                    }, { bytes: 4446, md5: "d440089e826e50f1c7f5dd99b1c78c6d", name: "kenzie_win.mp3" }, { bytes: 7184, md5: "180fc4b32b00243dabffd3ea14b4770e", name: "kenzie_win.ogg" }, { bytes: 6466, md5: "a37cc88c68f82b7fb9686b5f290ba7f2", name: "leo_boost.mp3" }, { bytes: 9838, md5: "51b457fb1776c8be06c5937bcbabd80d", name: "leo_boost.ogg" }, { bytes: 6466, md5: "a37cc88c68f82b7fb9686b5f290ba7f2", name: "leo_char_select.mp3" }, { bytes: 9838, md5: "07fe7407a24d3ceee7935b38dd2ba3fe", name: "leo_char_select.ogg" }, {
                        bytes: 2854,
                        md5: "6ffa480db835fc75de893c271047c8bf",
                        name: "leo_hit.mp3"
                    }, { bytes: 5999, md5: "5ce5ee28bba88d5c28c7153e336998cc", name: "leo_hit.ogg" }, { bytes: 9623, md5: "844b5fd6e66044942c1b1b6aae15bca8", name: "leo_lose.mp3" }, { bytes: 13224, md5: "bb98c1889019d6432889cc4865b9ffbd", name: "leo_lose.ogg" }, { bytes: 8946, md5: "885b14f224ddfaad0f570d962d32d6eb", name: "leo_win.mp3" }, { bytes: 12396, md5: "8d97ca33e6d0cfeebab33be70eb04a57", name: "leo_win.ogg" }, { bytes: 3953, md5: "772856e68d9139d3584a080558914e20", name: "lincoln_boost.mp3" }, {
                        bytes: 6844,
                        md5: "ecd16863f7ab6973464094c96716c6fd",
                        name: "lincoln_boost.ogg"
                    }, { bytes: 4927, md5: "1a000f9bf711f19a078857d9f85ad536", name: "lincoln_char_select.mp3" }, { bytes: 8412, md5: "60ba82e8b9eb15cd16aa3dd4bd6af69d", name: "lincoln_char_select.ogg" }, { bytes: 3091, md5: "0a87e334b8e5804efbebb89f792d107e", name: "lincoln_hit.mp3" }, { bytes: 6276, md5: "130e2438eb09d5295c4a8584ce8f26b4", name: "lincoln_hit.ogg" }, { bytes: 11669, md5: "912d0fb8265896ef5bf605370663f635", name: "lincoln_lose.mp3" }, { bytes: 13089, md5: "ee079ebe4cee86e8f09f8a78942d6473", name: "lincoln_lose.ogg" }, {
                        bytes: 8369,
                        md5: "71c5e54c9ab07853dc6353fc07a404db",
                        name: "lincoln_taunt.mp3"
                    }, { bytes: 12047, md5: "9261adb4cee9408edbf5623c4bdbfd0b", name: "lincoln_taunt.ogg" }, { bytes: 6739, md5: "c1ec73fe51b6d02b10bfbdd5de478be3", name: "lincoln_throw.mp3" }, { bytes: 9594, md5: "880e7b8ab08a9e9f07c719dae6de2b65", name: "lincoln_throw.ogg" }, { bytes: 5222, md5: "6ae414781ec11f2e988c7458af230b4a", name: "lincoln_win.mp3" }, { bytes: 7789, md5: "1e8efdc6b5fe0844ae05970af3d6a146", name: "lincoln_win.ogg" }, { bytes: 6949, md5: "7d24e509ae1cdefbb0fd4d53d250395a", name: "lola_boost.mp3" },
                    { bytes: 10042, md5: "1acc48c1e9a6d2ce244323a873466d26", name: "lola_boost.ogg" }, { bytes: 14479, md5: "eca7fbc2bc9801c0115c4e32ea25ea46", name: "lola_char_select.mp3" }, { bytes: 18484, md5: "9e95fca73a2fb6edd02bebf500db6361", name: "lola_char_select.ogg" }, { bytes: 10514, md5: "28ca69d94b364d77d9c3c89cce40aaa7", name: "lola_hit.mp3" }, { bytes: 14243, md5: "6f1272c4185d5b9bbb5066cbbfaa0580", name: "lola_hit.ogg" }, { bytes: 6930, md5: "2d3c1cf733b3920870180088cb1b30a0", name: "lola_lose.mp3" }, {
                        bytes: 9685,
                        md5: "4ac2326d686a8a49f26f33f3d08105ec",
                        name: "lola_lose.ogg"
                    }, { bytes: 5184, md5: "d41768a7a05f0e93ffa7e2e5212fa46e", name: "lola_taunt.mp3" }, { bytes: 8181, md5: "691c0542c091f694ec41371472167bc4", name: "lola_taunt.ogg" }, { bytes: 14486, md5: "243411ae25727bf4bb585fc5ae0c7ebd", name: "lola_throw.mp3" }, { bytes: 17657, md5: "297ccff8caf8349697ae177dfce51e1f", name: "lola_throw.ogg" }, { bytes: 12671, md5: "3d55b87ee3e1fac8682a3780dfc96c65", name: "lola_win.mp3" }, { bytes: 16262, md5: "3f510798fe70d2b1fdb30a76f455c382", name: "lola_win.ogg" }, {
                        bytes: 180106,
                        md5: "6a37a9eacbb2928c907293f4d000bf3d",
                        name: "menu.mp3"
                    }, { bytes: 196832, md5: "228caf05622feccf29f622b383625ad4", name: "menu.ogg" }, { bytes: 5117, md5: "8a2e6fc29b2079cb8f194e3cb4cdf07e", name: "mike_boost.mp3" }, { bytes: 8009, md5: "2f164949fdf63898026aeac72cecff5e", name: "mike_boost.ogg" }, { bytes: 6425, md5: "91c86329cfb1efd785b11863cad5b000", name: "mike_char_select.mp3" }, { bytes: 9749, md5: "f573cbaf3cb9485e55958b6c6a27da78", name: "mike_char_select.ogg" }, { bytes: 2278, md5: "3d7275b56391165bf6bae7fde7f8d7a2", name: "mike_hit.mp3" }, {
                        bytes: 5483,
                        md5: "9fa8c7527ca0445c3c1a54b894f72ec2",
                        name: "mike_hit.ogg"
                    }, { bytes: 4878, md5: "91978bfdb63dd95e6be4e69e0e97d148", name: "mike_lose.mp3" }, { bytes: 8141, md5: "eaaa6ec1d86ac72f5146ff9787c2c4ed", name: "mike_lose.ogg" }, { bytes: 4836, md5: "65d92ca0261e77876ab89c680afb9e47", name: "mike_taunt.mp3" }, { bytes: 7557, md5: "7b6cbb574650f4a31fddf682a427d3ea", name: "mike_taunt.ogg" }, { bytes: 5411, md5: "420874f54efe49fb9eea3f329baca903", name: "mike_throw.mp3" }, { bytes: 8680, md5: "a90a7774b794248cc262c269300309dd", name: "mike_throw.ogg" }, {
                        bytes: 5690,
                        md5: "e9ab6427b7af1af1847b2780230cf04f",
                        name: "mike_win.mp3"
                    }, { bytes: 8553, md5: "a7459b24e1cb436a39b46e5fc690f86a", name: "mike_win.ogg" }, { bytes: 3875, md5: "801221d4ff7bd492761adcdb2e179181", name: "missile.mp3" }, { bytes: 7344, md5: "15abafa07dfe242f71027291fe8767e5", name: "missile.ogg" }, { bytes: 3660, md5: "395f859496a08529bceb405a3aee5084", name: "missile_impact.mp3" }, { bytes: 7123, md5: "b70565a8c70ae6f823a12bb2b857bbef", name: "missile_impact.ogg" }, { bytes: 5718, md5: "f0dff477a144fa269743edd6b37bd615", name: "mud.mp3" }, {
                        bytes: 7872,
                        md5: "88b43119e10995f137c2000e6ee1073d",
                        name: "mud.ogg"
                    }, { bytes: 8627, md5: "ac2e2e0506aab0b9e07acb117ece6c40", name: "nitro.mp3" }, { bytes: 12709, md5: "4cba33628ce2d39a38d20546d586aff3", name: "nitro.ogg" }, { bytes: 3687, md5: "5ea6c511bb372777200e2908690b0d93", name: "oil.mp3" }, { bytes: 6123, md5: "ede6cb89cb593665128434527710e584", name: "oil.ogg" }, { bytes: 5282, md5: "1ad17b41967c9f2c81836bee5138a7f5", name: "patrick_boost.mp3" }, { bytes: 8654, md5: "5861fd0059efc48e91b8528fd0101923", name: "patrick_boost.ogg" }, { bytes: 3686, md5: "c3be8e0a4b1fbc4ac6543590775df023", name: "patrick_char_select.mp3" },
                    { bytes: 6908, md5: "c5b1a1d4fd62946a758326b716487a3a", name: "patrick_char_select.ogg" }, { bytes: 3273, md5: "bbeef4ce9c544c1e53b05ba895b74b0d", name: "patrick_hit.mp3" }, { bytes: 6528, md5: "7b6081c2e93cde7e781cc1a03832f054", name: "patrick_hit.ogg" }, { bytes: 5411, md5: "270d75a441f335040b9b1f805c1344fc", name: "patrick_lose.mp3" }, { bytes: 8465, md5: "4f00fd091b4dc250fc0123ecac9a4d43", name: "patrick_lose.ogg" }, { bytes: 11569, md5: "384f4e7f43e97c9a0e288ddf03b4389f", name: "patrick_taunt.mp3" }, {
                        bytes: 14709,
                        md5: "bf41b4ab7146f3797c038868cc1e89d5",
                        name: "patrick_taunt.ogg"
                    }, { bytes: 3919, md5: "1a400eeefdea96732e26febec663bda0", name: "patrick_win.mp3" }, { bytes: 7295, md5: "9efda70336be3e6a66fd96a2ebb50646", name: "patrick_win.ogg" }, { bytes: 1996, md5: "140fcc91166d5f510bba1ecbc31fc9d6", name: "pickup.mp3" }, { bytes: 4735, md5: "f879cd1116ccb2db1e53ae65cff30718", name: "pickup.ogg" }, { bytes: 4034, md5: "c8518a801b4dcdd292a8e382db4272ff", name: "ranger_boost.mp3" }, { bytes: 7193, md5: "d9ecfc53cc6ec376aac51a3d7960d2f5", name: "ranger_boost.ogg" }, {
                        bytes: 10316,
                        md5: "06bd14de76174aa42b0fd68f8c84eb81",
                        name: "ranger_char_select.mp3"
                    }, { bytes: 13566, md5: "310ac29727244cf1015a6c4b4d3dcf92", name: "ranger_char_select.ogg" }, { bytes: 7388, md5: "fade49e8bd981758a4ea4665a6aa36c6", name: "ranger_hit.mp3" }, { bytes: 10664, md5: "8e08c9f7caa631a3ff2b5be5362fad7a", name: "ranger_hit.ogg" }, { bytes: 4945, md5: "0d8390ee8f588a5f31d7f4b88ac5070e", name: "ranger_lose.mp3" }, { bytes: 8245, md5: "fbb8e88ff17b19c9d6269b44e79b14f2", name: "ranger_lose.ogg" }, { bytes: 4163, md5: "e1c90bb91687571e300d5826858411a3", name: "ranger_throw.mp3" }, {
                        bytes: 7134,
                        md5: "4d1f0bcd39ca7ebd562e2898a5b766e8",
                        name: "ranger_throw.ogg"
                    }, { bytes: 8143, md5: "df1cab925e7fdcfc70b2aadedf607b07", name: "ranger_win.mp3" }, { bytes: 11714, md5: "0238bdbe4154f68b1309dd7df26d1d9e", name: "ranger_win.ogg" }, { bytes: 3578, md5: "b1d1fa4b9abb8ac4eb673feb3d6fca1d", name: "raph_boost.mp3" }, { bytes: 6609, md5: "467e4c718d22250a0126fc235a1b9323", name: "raph_boost.ogg" }, { bytes: 2984, md5: "86371ffb3fed389043afcb69cebfdea0", name: "raph_char_select.mp3" }, { bytes: 6225, md5: "9648357411b8c7642389739500636ffa", name: "raph_char_select.ogg" },
                    { bytes: 7674, md5: "1657bf37301f0d8d144c8a77e0d311f0", name: "raph_hit.mp3" }, { bytes: 10806, md5: "e820c1e39b2d04b74b2bd7062c75528d", name: "raph_hit.ogg" }, { bytes: 7362, md5: "f3ee113ec9ee2864a9a5c4b70b6cf2f5", name: "raph_lose.mp3" }, { bytes: 10706, md5: "accc6a84aa95e191d495ab30d5919b21", name: "raph_lose.ogg" }, { bytes: 3874, md5: "068b97fa66c470e737a367893279ee5f", name: "raph_throw.mp3" }, { bytes: 7095, md5: "cd5c72d031284a2c5ca24ba9b3125c99", name: "raph_throw.ogg" }, { bytes: 4240, md5: "2dab03ef85d819f0a19466b1dfbee4ad", name: "raph_win.mp3" },
                    { bytes: 7386, md5: "2211bdf7b0c1de228d6ab7ef1949f9cd", name: "raph_win.ogg" }, { bytes: 133, md5: "5cd49cddadedf7331f18954ea459ca13", name: "README.md" }, { bytes: 1217, md5: "bb2af6545d276d4190ee6591e9e09343", name: "roulette.mp3" }, { bytes: 4222, md5: "24576601ec502ee9cacf294a90bd448a", name: "roulette.ogg" }, { bytes: 2030, md5: "cce30369e58be84e58c9107f3c1382ac", name: "shield.mp3" }, { bytes: 5578, md5: "1505f2037f99843eefd472dd0ede8db3", name: "shield.ogg" }, { bytes: 11018, md5: "c9154067ebd4d0dda1fe2c1ed73689d6", name: "shield_loop.mp3" }, {
                        bytes: 12856,
                        md5: "f7d8a077fe486d61c4727ff7fcf8bf55",
                        name: "shield_loop.ogg"
                    }, { bytes: 2783, md5: "07c1961c96bafb80916e34a66679b366", name: "shield_out.mp3" }, { bytes: 6110, md5: "4cd7cc66dfaa07ebf441d23e822b4b74", name: "shield_out.ogg" }, { bytes: 14429, md5: "78f171c2a4b05051f21a359e254424dd", name: "shredder_boost.mp3" }, { bytes: 18766, md5: "2d624a9095795d833fdf33dcdb82327d", name: "shredder_boost.ogg" }, { bytes: 16551, md5: "4bea4adef9cd1fa9f6cad9d93382b624", name: "shredder_char_select.mp3" }, {
                        bytes: 19796,
                        md5: "90007a789180b7eeac97b76e0644b81c",
                        name: "shredder_char_select.ogg"
                    }, { bytes: 6186, md5: "067d44a442cc6539b64354624295d8a1", name: "shredder_hit.mp3" }, { bytes: 9674, md5: "64c3a82b6a85c91f798a32bf302e01bd", name: "shredder_hit.ogg" }, { bytes: 4524, md5: "4f0f35c2a77bb63b958c1b97c437dd6c", name: "shredder_lose.mp3" }, { bytes: 8010, md5: "63e42b2a36a34a1ddbeffac9409394c1", name: "shredder_lose.ogg" }, { bytes: 11633, md5: "aa59fdf4ee5f853cabc8291f89d9ea49", name: "shredder_taunt.mp3" }, { bytes: 15349, md5: "d52e0b1b512ff24d644136184a250490", name: "shredder_taunt.ogg" }, {
                        bytes: 13165,
                        md5: "d191e894112ff8907c73b405e0fe93d9",
                        name: "shredder_throw.mp3"
                    }, { bytes: 17090, md5: "45bcfcf7814284d45b3bde0a3cde296f", name: "shredder_throw.ogg" }, { bytes: 5930, md5: "0327f4ca7eb25a5059a0f29975a832d7", name: "shredder_win.mp3" }, { bytes: 8601, md5: "b648b3c1b6bf7686c993f76073b2e5c5", name: "shredder_win.ogg" }, { bytes: 4491, md5: "0a71f92755d9334aa03cbed2e75a5912", name: "skid.mp3" }, { bytes: 6795, md5: "818d15d0b2962e51cbfee557f07a8f85", name: "skid.ogg" }, { bytes: 10654, md5: "540366c75aad5698739474417040e555", name: "snide_boost.mp3" },
                    { bytes: 14313, md5: "fd9dd32330aa4d8c49d615e78ed7ee4f", name: "snide_boost.ogg" }, { bytes: 23755, md5: "91fdd116219fa0aa9b7ab5dec8741b8c", name: "snide_char_select.mp3" }, { bytes: 29689, md5: "12529d5b983b769488ca403b245907ff", name: "snide_char_select.ogg" }, { bytes: 6081, md5: "ad6bee6cd50e68cc106930d0bf815df3", name: "snide_hit.mp3" }, { bytes: 9554, md5: "2abda316da63ddc77c61fcd28b946464", name: "snide_hit.ogg" }, { bytes: 4836, md5: "0c5e15a610a03eda1548902995aa2e62", name: "snide_lose.mp3" }, {
                        bytes: 8089,
                        md5: "a73f68f2f0ae5a20b69760d14fa1c2ba",
                        name: "snide_lose.ogg"
                    }, { bytes: 20453, md5: "1a73075ccb60a251042c31b3bac5aaa7", name: "snide_taunt.mp3" }, { bytes: 25013, md5: "fe43ced8c32604de1a3d37aa199256e7", name: "snide_taunt.ogg" }, { bytes: 5823, md5: "365c2853971d622a8ecd3a27d56eb1e8", name: "snide_throw.mp3" }, { bytes: 8651, md5: "95349583104bd74385b442faa6a0b380", name: "snide_throw.ogg" }, { bytes: 8275, md5: "19beece2729bc772f88554d01c2c3e19", name: "snide_win.mp3" }, { bytes: 11747, md5: "2f3fef867c4a8e6de90056148c00527f", name: "snide_win.ogg" }, {
                        bytes: 7561,
                        md5: "a91f466086109414f3fc09323447a184",
                        name: "snow.mp3"
                    }, { bytes: 11407, md5: "cb765520983e730250e9320e1517c0c1", name: "snow.ogg" }, { bytes: 3088, md5: "b037a888f68250aa9da93e5704c4ecb5", name: "snow_impact.mp3" }, { bytes: 6420, md5: "e1cd8af516f205525e1fb8d65759797a", name: "snow_impact.ogg" }, { bytes: 3245, md5: "3a3e6fb2440813633e45aabef9e2d073", name: "speed_up.mp3" }, { bytes: 5646, md5: "c1c19881282fd281434735c5d9bc241a", name: "speed_up.ogg" }, { bytes: 10615, md5: "e9da46ff066f683ef28a310613229e15", name: "spongebob_char_select.mp3" }, {
                        bytes: 14788,
                        md5: "0113419d388f6f873312debc2821535b",
                        name: "spongebob_char_select.ogg"
                    }, { bytes: 4090, md5: "dfa079a4d6327129c114e1a7af444ba7", name: "spongebob_hit.mp3" }, { bytes: 7511, md5: "e9cbae3e0ce360483c021e0f1777c78f", name: "spongebob_hit.ogg" }, { bytes: 9785, md5: "d9d1a04b5262bf388b9ba22f2543688d", name: "spongebob_lose.mp3" }, { bytes: 13383, md5: "283c8dea269512923de844ccab058fa3", name: "spongebob_lose.ogg" }, { bytes: 2518, md5: "d259ab4448295f7d2eaa12496f223c8f", name: "spongebob_throw.mp3" }, { bytes: 5547, md5: "1e00e0e4729eb033a427478aae232e23", name: "spongebob_throw.ogg" },
                    { bytes: 8810, md5: "b73b8fda129a3d9fbf617532a3fb4732", name: "spongebob_win.mp3" }, { bytes: 13023, md5: "a978fa3c9fe749ea9acd50005d3dc270", name: "spongebob_win.ogg" }, { bytes: 10288, md5: "897e3752f2672734bdfca0823fffba98", name: "sting_env_1.mp3" }, { bytes: 12901, md5: "bf96dc9e3949885a2fb3dce1682de4bb", name: "sting_env_1.ogg" }, { bytes: 13356, md5: "b7b62ed3c1e02c8b8124394a1eb94b3a", name: "sting_env_2.mp3" }, { bytes: 15092, md5: "68ecd3df6dec50251617a236dc920103", name: "sting_env_2.ogg" }, {
                        bytes: 10211,
                        md5: "8f83d0f8004608e8f08a8bcc759264ef",
                        name: "sting_env_3.mp3"
                    }, { bytes: 11999, md5: "3b7ee7f6bfa48588d9f1a79e44992eb8", name: "sting_env_3.ogg" }, { bytes: 21366, md5: "cd99bf238e375fb00f2bcbdbf2de2bfd", name: "sting_env_4.mp3" }, { bytes: 21019, md5: "e137897278a49d894c10248e823dbf07", name: "sting_env_4.ogg" }, { bytes: 2464, md5: "87e58c84570c5c64a3a0c1c03798bc5f", name: "teleport_in.mp3" }, { bytes: 5638, md5: "bea81b0a35febef0102c27f053e26caa", name: "teleport_in.ogg" }, { bytes: 3010, md5: "97e2e6302886f6f6d84fc8f4836cbfd5", name: "teleport_out.mp3" }, {
                        bytes: 5895,
                        md5: "52433899b0d1667674a3ee7101ff1753",
                        name: "teleport_out.ogg"
                    }, { bytes: 10855, md5: "98d39c189fec4c29e65e94274c4b44bc", name: "tiger_boost.mp3" }, { bytes: 14233, md5: "ef40193e387396277d62ca45cd4c891d", name: "tiger_boost.ogg" }, { bytes: 9851, md5: "211baeb97939f41c1202fcdc19a6fd0c", name: "tiger_char_select.mp3" }, { bytes: 13817, md5: "a2173329e97cc9cd2d885e59eba096f9", name: "tiger_char_select.ogg" }, { bytes: 9411, md5: "d4917b4118997cb7f9de6236ec0a0dc7", name: "tiger_hit.mp3" }, { bytes: 12438, md5: "63e9f44ac47154d25451c6d9af0e494d", name: "tiger_hit.ogg" }, {
                        bytes: 9478,
                        md5: "25c5e3790ab3538e11c85f5b5d81c138",
                        name: "tiger_lose.mp3"
                    }, { bytes: 12622, md5: "8db57370d7e00ddf320003a848e8fb4d", name: "tiger_lose.ogg" }, { bytes: 17488, md5: "cb6628aca8cb51d6c270afac95b0b7ae", name: "tiger_taunt.mp3" }, { bytes: 21341, md5: "5c8a9542cd4ecc2e2a85f3f97de4c02e", name: "tiger_taunt.ogg" }, { bytes: 7106, md5: "6effc79880736efd7ea038afa5ac50b0", name: "tiger_throw.mp3" }, { bytes: 10661, md5: "b5f16d5dbdfd260a06d9db4ecedbdbbc", name: "tiger_throw.ogg" }, { bytes: 8922, md5: "4b8c7fda48ff6b60d5d6c6fe130ffb19", name: "tiger_win.mp3" }, {
                        bytes: 12588,
                        md5: "9b2c94cf8d2a9320b17abf1543ce6c9a",
                        name: "tiger_win.ogg"
                    }, { bytes: 4960, md5: "114d4d315906082283e9f056ab30e0a1", name: "timmy_boost.mp3" }, { bytes: 8547, md5: "2f8811e4cc79d1c34352ad99d22cf8e8", name: "timmy_boost.ogg" }, { bytes: 9907, md5: "6f81511a9856451552187e55f68b3904", name: "timmy_char_select.mp3" }, { bytes: 12952, md5: "1862ea500737d260d019f84935ed9a3f", name: "timmy_char_select.ogg" }, { bytes: 5217, md5: "96f8ff64341e65130a0e55e96bbaf2f0", name: "timmy_hit.mp3" }, { bytes: 7578, md5: "081aac7d5c5581e0d2c610d4f99ea93c", name: "timmy_hit.ogg" }, {
                        bytes: 14617,
                        md5: "72889dfac5ed2dc606308906ba6352e4",
                        name: "timmy_lose.mp3"
                    }, { bytes: 17819, md5: "626d54eea5c8b0d61a03983f34243b75", name: "timmy_lose.ogg" }, { bytes: 6731, md5: "03b3925ac724a6fb11d94357871bc996", name: "timmy_taunt.mp3" }, { bytes: 9669, md5: "3320704e8f9c96d314a23f5d07f7c4fb", name: "timmy_taunt.ogg" }, { bytes: 4551, md5: "ec71725079325cd9a26ff5e974798f8f", name: "timmy_throw.mp3" }, { bytes: 7256, md5: "a953f614acb015e2c9bc007b836c7cc3", name: "timmy_throw.ogg" }, { bytes: 14218, md5: "5dd75616a84aeb85af6a265a8375ef00", name: "timmy_win.mp3" }, {
                        bytes: 16051,
                        md5: "cc60a8379d5f37cb9e6149f72afc3b08",
                        name: "timmy_win.ogg"
                    }, { bytes: 4132, md5: "682cb8b8314545e5ad66587b013885a0", name: "tommy_boost.mp3" }, { bytes: 7268, md5: "bb257e087b674e91bcebdf5b45b131cc", name: "tommy_boost.ogg" }, { bytes: 3537, md5: "4b25593e9cc2ba45f317f91c748cc2d2", name: "tommy_char_select.mp3" }, { bytes: 6636, md5: "a9fef4cb956bf4ffb81538897dd60da4", name: "tommy_char_select.ogg" }, { bytes: 4155, md5: "643fb0ff12b392cf99091f20ca0698c3", name: "tommy_hit.mp3" }, { bytes: 6779, md5: "46a1f2b82ddd98d650d042a7ab74d450", name: "tommy_hit.ogg" }, {
                        bytes: 15212,
                        md5: "87a37d90ae47ed0dca259775f978eec3",
                        name: "tommy_lose.mp3"
                    }, { bytes: 18503, md5: "359dcb23b27f9f29adbf0917fc1e50af", name: "tommy_lose.ogg" }, { bytes: 4626, md5: "e63f97a88606d48d782c934cb6cd71a0", name: "tommy_win.mp3" }, { bytes: 7816, md5: "23ee43dc30fd6203466f68bd866a1b82", name: "tommy_win.ogg" }
                ],
                ui: [{ bytes: 322, md5: "50d46cafbf187db332cfe859db358699", name: "bar_bg.png" }, { bytes: 1283, md5: "8ca22352bdc897d16368c1dd7ac86b77", name: "bar_filled.png" }, { bytes: 1634, md5: "ca83c4caab5b1dc2a79e6c4e23d94aba", name: "bar_speed.png" }, {
                    bytes: 1283,
                    md5: "9490dfe9351a39ef3d95c6f102f871d4",
                    name: "bar_strength.png"
                }, { bytes: 1639, md5: "b430fd5eb1ed980a30dc199bba6de164", name: "bar_traction.png" }, { bytes: 3113, md5: "5ccbcddb63d2b38a4474372c0d6527bd", name: "btn_back.png" }, { bytes: 3691, md5: "3ec9dd6d9cbec8d1349a7324d62a0f2c", name: "btn_back_pressed.png" }, { bytes: 4077, md5: "7cf72f8ca46e097956b74ac48841aa7e", name: "btn_check.png" }, { bytes: 4134, md5: "6b7c105055cc277814f7093a7c6851e5", name: "btn_check_pressed.png" }, { bytes: 2637, md5: "9b4ab1e4be237f5ae8463918321a4958", name: "btn_green.png" }, {
                    bytes: 2815,
                    md5: "6adac8889aae3d9f5cbae5d152b29daf",
                    name: "btn_green_pressed.png"
                }, { bytes: 3180, md5: "1e03b3ebe165c4fbb7a24bdab6bfee97", name: "btn_htp.png" }, { bytes: 3274, md5: "8b686a7b1968df95be1bc72019c33eaa", name: "btn_htp_pressed.png" }, { bytes: 2916, md5: "2d45b01bd7c919451e8fb220846510d6", name: "btn_orange.png" }, { bytes: 2927, md5: "d0eb0cbb1fc634b70231083d91187d8a", name: "btn_orange_pressed.png" }, { bytes: 3179, md5: "38f3656aee97d04667bc34427bee1ce4", name: "btn_pause.png" }, { bytes: 3200, md5: "bab77bc117d7904192344fa537d79917", name: "btn_pause_pressed.png" }, {
                    bytes: 3123,
                    md5: "c57551188c609ddde127882db2c78d90",
                    name: "btn_quit.png"
                }, { bytes: 3250, md5: "ab52b4e99ac164a71841e227fba937b2", name: "btn_quit_pressed.png" }, { bytes: 4001, md5: "4806a40852d193414d1e1318bc7d3e9c", name: "btn_resume.png" }, { bytes: 4416, md5: "060887ebf277cdd691ca52f0a5132819", name: "btn_resume_pressed.png" }, { bytes: 3386, md5: "f3d102041d38b1cbf54ed09acae79e8c", name: "btn_sound_off.png" }, { bytes: 3831, md5: "491b20d3a1c03ba03bf1eb9e51d5d624", name: "btn_sound_off_pressed.png" }, {
                    bytes: 3296,
                    md5: "43d99d4e7f52f35fee8d2e5bb9dd4c54",
                    name: "btn_sound_on.png"
                }, { bytes: 3824, md5: "b5562d6032106f0c70cb59181f0390d7", name: "btn_sound_on_pressed.png" }, { bytes: 6445, md5: "a4fa4f8ece6e8c6a8d7508924be6d1e1", name: "face_abrasive.png" }, { bytes: 7277, md5: "67632695cfe85acc4f78baacebbb9285", name: "face_alvin.png" }, { bytes: 8244, md5: "74b9cc5e093e6fb889f63069019c82c1", name: "face_babe.png" }, { bytes: 8364, md5: "c7b941b0a247d6ffacf1cbb07efc9ab7", name: "face_chloe.png" }, { bytes: 8622, md5: "89e13cb1c42733b44d1530262d0f632c", name: "face_donnie.png" }, {
                    bytes: 7795,
                    md5: "f1a49e692b15158897ac16c4b82f8178",
                    name: "face_henry.png"
                }, { bytes: 9106, md5: "8853e4cd3571d991af3ed189b90100f1", name: "face_kenzie.png" }, { bytes: 7919, md5: "2d3704dcb65018a2bef7d220b43dd822", name: "face_leo.png" }, { bytes: 6238, md5: "595bbee95c40cafd27a308d97fed6bff", name: "face_lincoln.png" }, { bytes: 6262, md5: "9a9c0c8b7146b84066b0e29ca098e5af", name: "face_lola.png" }, { bytes: 7761, md5: "6af0ba1032e7c27f70df83aa71d8deb5", name: "face_mike.png" }, { bytes: 5554, md5: "ffb486254c3984c96a93dd2edc31b43a", name: "face_patrick.png" }, {
                    bytes: 7791,
                    md5: "e5a52cb4bfbbab495362cad5c181a039",
                    name: "face_ranger.png"
                }, { bytes: 7928, md5: "855086d308b58cdb999ec0433bd64b45", name: "face_raph.png" }, { bytes: 3166, md5: "d5252d52b27d997b1d5ed720f53d1595", name: "face_shredder.png" }, { bytes: 7647, md5: "742af6154d27f2cc8ad40a7c86b99882", name: "face_snide.png" }, { bytes: 7552, md5: "b77b8681797726237544555c3d8bc3f2", name: "face_spongebob.png" }, { bytes: 6101, md5: "28b2f3c0b9d08b5ce0d96214234b9321", name: "face_tiger.png" }, { bytes: 7736, md5: "7afe88e6e64ca8b0aa7dd43858600559", name: "face_timmy.png" }, {
                    bytes: 6606,
                    md5: "16dc55a4181857020b5ad24449aa7727",
                    name: "face_tommy.png"
                }, { bytes: 2253, md5: "0c35b96ccb6191b46adb8a0df4e98f26", name: "icon_new.png" }, { bytes: 1020, md5: "d9f824c90fb478b189a5749160ce7f9a", name: "icon_speed.png" }, { bytes: 797, md5: "aff339ae1538e56778c5443f7499d398", name: "icon_strength.png" }, { bytes: 200, md5: "fdee81d032e83b21729b98123cbdeabc", name: "icon_traction.png" }, { bytes: 1499, md5: "d60d70dc397cd51e4d6aa238cc1af0e6", name: "lock.png" }, { bytes: 15790, md5: "e8e45c39d90aa6a32e963b046b3a5527", name: "popup.png" }, {
                    bytes: 513,
                    md5: "27487900b1722853cff9e7324bca289a",
                    name: "popup_arrow.png"
                }, { bytes: 8546, md5: "47970b9f7d5ee2c777ef040615176ce4", name: "popup_beams.png" }, { bytes: 29058, md5: "f288aa1bc81787b3ba83cbcb35e0cb4b", name: "popup_bg.png" }, { bytes: 24956, md5: "649e7b34418e8d1d9f2a2a753ea6d6a9", name: "popup_item.png" }, { bytes: 2709, md5: "5fd037d282ff634d5b10aa86657876f5", name: "position_bg.png" }, { bytes: 4918, md5: "f0ea908b6392ca69c543cdac769174f3", name: "stat_box.png" }, { bytes: 1048, md5: "169dd2bc95932909999d5d709acf9894", name: "stat_green.png" }, {
                    bytes: 799,
                    md5: "6420e5988ee0ac8b2abd6270d1156d4c",
                    name: "stat_grey.png"
                }, { bytes: 1048, md5: "91622f243cfad2926cb0d3e12ecd836b", name: "stat_orange.png" }, { bytes: 6237, md5: "47893cb9749464bb206b3d57ffef2a9f", name: "title_box.png" }],
                ai: [{ bytes: 188, md5: "cf068da65dedf3dcb21f8825ea95e42c", name: "racer_ai.json" }],
                ui_tuto: [{ bytes: 3204, md5: "f57ceb0be2766d296b0061d77b4d1019", name: "accelerate.png" }, { bytes: 7489, md5: "bac85d338f5b86480a3c527a917c4916", name: "accelerate_m.png" }, { bytes: 2076, md5: "665c4bbd5a84c3a9cdfa36dea4cc6fe4", name: "generic.png" }, {
                    bytes: 4004,
                    md5: "90357ebbfd02b4b70ced873973639783",
                    name: "item.png"
                }, { bytes: 4334, md5: "8b1158e609420cce80b830135d481d18", name: "item_m.png" }, { bytes: 4425, md5: "305b7b3cc33620dbdf6d8425f3651f36", name: "jump.png" }, { bytes: 4333, md5: "f39ba51258adf1d490ba9cb88cd64fb6", name: "jump_m.png" }, { bytes: 3420, md5: "a9237cc0dc92b06c50e7d052d1aa1a05", name: "lanes.png" }, { bytes: 7587, md5: "aa0a05e9bbc09db639602352d56ee57d", name: "lanes_m.png" }, { bytes: 4866, md5: "8779ee5736c677b6ebf9956a8f25c89f", name: "speed_boost.png" }],
                ui_win: [{
                    bytes: 389378,
                    md5: "8c205445fbf5d0ba6ad04fa339d0a0c6",
                    name: "bg.jpg"
                }, { bytes: 2188, md5: "f05f383e969e687926328d1640f049e5", name: "icon_house.png" }, { bytes: 2257, md5: "3bc4e2044fa90a62c416d27539bd0412", name: "icon_jelly.png" }, { bytes: 2579, md5: "2fdffde1c0c5302db35b8a8b6e577ac7", name: "icon_kitty.png" }, { bytes: 8242, md5: "16ea3c88b2013fa5cfd7cbbfd90521a4", name: "icon_mega.png" }, { bytes: 830, md5: "7ee1d69a4c87d9da31f310ed5baefb74", name: "ranking_box.png" }, { bytes: 5869, md5: "1a6950c6d7a7cf9c575b19b2a28ee933", name: "title_box.png" }],
                ui_hud: [{
                        bytes: 3541,
                        md5: "4a35debb904fc3fbbc193e089b927db9",
                        name: "beehive_icon.png"
                    }, { bytes: 10395, md5: "1baaab8e5a38cd47c152cf90de08b328", name: "btn_action.png" }, { bytes: 10405, md5: "e77027343f278bb2219beb57f400a97b", name: "btn_action_pressed.png" }, { bytes: 2995, md5: "998d4173e0d22383f744ba1be89c8e3c", name: "emp_icon.png" }, { bytes: 3895, md5: "f36c2fc658cb07ed2231d79fa9e22974", name: "fakeout_icon.png" }, { bytes: 20529, md5: "ebda48a5e22a3c46dc0ebbc21922f249", name: "fireworks_icon.png" }, { bytes: 1947, md5: "040a8a258a190564da312ee040ef4bbe", name: "flag.png" }, {
                        bytes: 4070,
                        md5: "14a4efc3a3c5d97e14c2588980d9f451",
                        name: "ghost_icon.png"
                    }, { bytes: 22700, md5: "447967113d6aa8c23366c888595ffd48", name: "homing_icon.png" }, { bytes: 3867, md5: "f83f8da034d8076bc6774793fd6454af", name: "invisibility_icon.png" }, { bytes: 2002, md5: "80c870185edb1b979cf59e6d62c2e901", name: "last_flag.png" }, { bytes: 3868, md5: "9f8555a2ffa447cd4f9a144e2bb7cd1a", name: "mistery_box_icon.png" }, { bytes: 3277, md5: "0c2d8664dd4b2533b0f5a72f3886ece3", name: "nitro_icon.png" }, { bytes: 4644, md5: "d579f0f599e004b7c3ca708eac267a84", name: "pins/green_abrasive.png" }, {
                        bytes: 4742,
                        md5: "3cf6958962c76f571d96970521547b35",
                        name: "pins/green_alvin.png"
                    }, { bytes: 4376, md5: "6d7821f697e8d1ff31963ce6cddcc3bd", name: "pins/green_babe.png" }, { bytes: 4383, md5: "c5f08568c498fc6205e8830f745b1c44", name: "pins/green_chloe.png" }, { bytes: 4593, md5: "010f18e8c3591a7753f5901df7d2b6fe", name: "pins/green_donnie.png" }, { bytes: 4606, md5: "aafb6f3d5ccb9fb199f3ad2f4ba47823", name: "pins/green_henry.png" }, { bytes: 4250, md5: "bed6f125e6edd258608e50579cd15cab", name: "pins/green_kenzie.png" }, {
                        bytes: 4384,
                        md5: "afbd2f1f205d3a6c03073c488106e34e",
                        name: "pins/green_leo.png"
                    }, { bytes: 4643, md5: "1894eb4e07006c0bf9f128c58e33e09d", name: "pins/green_lincoln.png" }, { bytes: 4675, md5: "d942d5d97587d1ec020178713f1fc4ca", name: "pins/green_lola.png" }, { bytes: 4601, md5: "67d7bef63301765d30047aee113bc15c", name: "pins/green_mike.png" }, { bytes: 3868, md5: "1a181b642f5d3a4772d7e8f9b61a9eec", name: "pins/green_patrick.png" }, { bytes: 4403, md5: "a8590153a5f08a00c9885c5d3990238b", name: "pins/green_ranger.png" }, { bytes: 4448, md5: "848d4103bbfffee77b086705b3b93b7a", name: "pins/green_raph.png" },
                    { bytes: 2461, md5: "20df811ff7bffd24afdfe0ff443582cd", name: "pins/green_shredder.png" }, { bytes: 4996, md5: "9f9f23c680225edfea914ff1a6f950f8", name: "pins/green_snide.png" }, { bytes: 4280, md5: "36ef3db94667f4634d902faf7862b07b", name: "pins/green_spongebob.png" }, { bytes: 4614, md5: "46a5656f549619632a1f3cc526b2b00e", name: "pins/green_tiger.png" }, { bytes: 4267, md5: "daeaa52f24a112cca94d1d20e79fe34b", name: "pins/green_timmy.png" }, { bytes: 4128, md5: "87a3e910923f20ee287eaba793791bcc", name: "pins/green_tommy.png" }, {
                        bytes: 2944,
                        md5: "b8b453a95806a70a5b2a9b8913b7d358",
                        name: "pins/pink_abrasive.png"
                    }, { bytes: 3016, md5: "8b4046d12f542bc2923deafa7415d171", name: "pins/pink_alvin.png" }, { bytes: 2938, md5: "dcc99ec0481018c6221c071887198985", name: "pins/pink_babe.png" }, { bytes: 2942, md5: "28e1176ea4b85e4ab20718ca74e0ab3e", name: "pins/pink_chloe.png" }, { bytes: 3038, md5: "03ce28d2a5b91bb9b5caee2b078df1be", name: "pins/pink_donnie.png" }, { bytes: 3036, md5: "7a63c793db781173261aabf312d72d5a", name: "pins/pink_henry.png" }, { bytes: 2867, md5: "b4ded128eceb3b24079fefb497e5aad1", name: "pins/pink_kenzie.png" },
                    { bytes: 3070, md5: "bcb5c8ddaa9d9e543d25e274e05f0e39", name: "pins/pink_leo.png" }, { bytes: 2974, md5: "e605f1503f678e80bf8974dc08938d6b", name: "pins/pink_lincoln.png" }, { bytes: 3029, md5: "23a3fd1a86ff1663bffa9d9a7f1bf521", name: "pins/pink_lola.png" }, { bytes: 2991, md5: "726d38809b8bb8a4fabdca3a9049425b", name: "pins/pink_mike.png" }, { bytes: 2679, md5: "11ba523c2e88f1dc447aea1d7ee9005d", name: "pins/pink_patrick.png" }, { bytes: 2965, md5: "a0721e2cae20eed8b9f2ad73d85be058", name: "pins/pink_ranger.png" }, {
                        bytes: 2897,
                        md5: "3f4e1fcf958b76cf0c5417482f68ffeb",
                        name: "pins/pink_raph.png"
                    }, { bytes: 1927, md5: "0c2b154299ac15fa6153722ec2bb230d", name: "pins/pink_shredder.png" }, { bytes: 2013, md5: "a22cde1d7a6a7112f74099e2ff0a9d0d", name: "pins/pink_snide.png" }, { bytes: 2874, md5: "57c209429e6111866807c436ab5c9bff", name: "pins/pink_spongebob.png" }, { bytes: 2977, md5: "6ddacf5498fa8591e5a8105cdb21ca54", name: "pins/pink_tiger.png" }, { bytes: 17305, md5: "1996f7e0a7be5f6e4e1f9fa18474f85a", name: "pins/pink_timmy.png" }, { bytes: 2871, md5: "7190ed843ba96a6a738b4520cabc4f67", name: "pins/pink_tommy.png" },
                    { bytes: 3407, md5: "c9d865fc106d8ad7e005685a226bdee0", name: "position_box.png" }, { bytes: 295, md5: "04e897c3c01c56265a7f8fe93a9c9731", name: "proggress_bar_filled.png" }, { bytes: 557, md5: "d48901a7382ca77cd18aabc6c7647d5d", name: "progress_bar.png" }, { bytes: 4294, md5: "c7be7fe1a75aecfaf2069772a59a272d", name: "shield_icon.png" }, { bytes: 129, md5: "d0dbfbe49822d5548c93172dc48b0b41", name: "slider.png" }, { bytes: 5169, md5: "5fdab1ee3574c8a440c20dce658388ba", name: "slider_handle.png" }, {
                        bytes: 2218,
                        md5: "9378bc55cbd8055ec710f3544fd546ed",
                        name: "slot.png"
                    }, { bytes: 2183, md5: "c31141ff1aebcb725f95b541df7d3196", name: "slot_ready.png" }, { bytes: 3716, md5: "11c2a72d8b619957b113d5a9d076eb87", name: "snow_icon.png" }, { bytes: 410, md5: "cd9a985fc6657df4fc551a612d382cb7", name: "time_box.png" }
                ],
                ui_end: [{ bytes: 190121, md5: "ba202dda8bdcafb1afa2fab5fb1e5892", name: "bg.jpg" }, { bytes: 62895, md5: "3cbb306a5b35a5238e6ca12ef9fb5236", name: "cup_1_house.png" }, { bytes: 61515, md5: "79de35858982ac952214a3f9b07a4112", name: "cup_1_jelly.png" }, {
                    bytes: 66273,
                    md5: "b90893fe55a5cde0a544f50d4ec70795",
                    name: "cup_1_kitty.png"
                }, { bytes: 80861, md5: "589b1fdc4a42e3e486bdee536b4a8f19", name: "cup_1_mega.png" }, { bytes: 22065, md5: "cb56785e597a36b734d6a1ba0a5ad3cf", name: "cup_2.png" }, { bytes: 22304, md5: "1481ef6431f129745757c8d28691374d", name: "cup_3.png" }, { bytes: 872, md5: "9172f8bcae5353167b0eaed09dea0d77", name: "tip_box.png" }, { bytes: 6650, md5: "79d3cc428ee590121c39c0cee7e3a03c", name: "title_box.png" }, { bytes: 3810, md5: "40cf93afa40fc9c74ed798978a1b416d", name: "unlocked_items_box.png" }],
                sprites_env1_highend: [{
                    bytes: 146992,
                    md5: "44271ba3d5e30616750867315307a8ff",
                    name: "ol_1.png"
                }, { bytes: 164873, md5: "477e360aba2c2fd9407745206f1f03e9", name: "ol_2.png" }, { bytes: 91028, md5: "8b6502d4be5407d0748fa6c3e716944e", name: "parallax_1_env1.png" }, { bytes: 159507, md5: "f526507593823a2f5def35bee1ac54d9", name: "parallax_2_env1.png" }],
                ui_codes: [{ bytes: 2939, md5: "14e03ce45a9d39513e30c837b78a8d02", name: "btn_green.png" }, { bytes: 2932, md5: "23310fe0fbd3cbcfd2308f87c16c70fb", name: "btn_green_rename.png" }, {
                    bytes: 2060,
                    md5: "48df86e2ec437d65dca7632f76602dc5",
                    name: "btn_light.png"
                }, { bytes: 2052, md5: "6290f3bca0886d904ee72ff94bed6fa0", name: "btn_light_pressed.png" }, { bytes: 2051, md5: "a7ca8a9e4ad98a03258f91a9d1b148bc", name: "btn_normal.png" }, { bytes: 2055, md5: "8fc04b5edebe78dc7bef2af378c78cd6", name: "btn_normal_pressed.png" }, { bytes: 1463, md5: "fab989363307fac941cd0e4400ddf702", name: "icon_error.png" }, { bytes: 1412, md5: "619503d8629dd55aaf5a3b2732a24dae", name: "icon_ok.png" }, { bytes: 2439, md5: "7681f1a1fe4aa9bb47eafc828645759f", name: "input.png" }, {
                    bytes: 16385,
                    md5: "a0d016dd4ff3cec481dd4acb85bb0f21",
                    name: "keyboard.png"
                }],
                ui_mode: [{ bytes: 189217, md5: "ea98ceaab114d76059c6e4bb4462fa5f", name: "bg.jpg" }, { bytes: 34077, md5: "1df78b62bfdd500c338546ba152a8a1b", name: "btn_customize.png" }, { bytes: 10155, md5: "e24e108b9b9fb95fc79787ad56effcb4", name: "btn_customize_pressed.png" }, { bytes: 2032, md5: "347408a3ec38f0375e7d5bbe6acfe890", name: "btn_enter_code.png" }, { bytes: 1959, md5: "8682b665abfef814da747bc1e94291c1", name: "btn_enter_code_pressed.png" }, { bytes: 66450, md5: "61470526f74ec444d7828e32b78127d2", name: "btn_for_fun.png" },
                    { bytes: 66672, md5: "b8aeae2a87badda6cd62bf51026f1475", name: "btn_for_fun_pressed.png" }, { bytes: 55886, md5: "883832d5bc9cb4f00736c3924578123b", name: "btn_quickmatch.png" }, { bytes: 55649, md5: "10e1d1f57eb3a48d1be78ea4fb2347d8", name: "btn_quickmatch_pressed.png" }, { bytes: 70671, md5: "cdbe8415c105130405a31ebde2e8526b", name: "btn_tournament.png" }, { bytes: 70568, md5: "a9faa23690f2cced6f56907561457770", name: "btn_tournament_pressed.png" }
                ],
                ui_help: [{ bytes: 125817, md5: "ac5d3c6ec1c65f9fec748bd21823a8b7", name: "accelerate.png" },
                    { bytes: 139795, md5: "37297bccd77a44886a03f9e6a0e1d186", name: "accelerate_m.png" }, { bytes: 46893, md5: "a161119c20cd126292ea3ee5bef9dbe0", name: "box.png" }, { bytes: 1743, md5: "9b1c0bbde36c95dbe60cb3830f402eab", name: "btn_next.png" }, { bytes: 1715, md5: "92351e0d6599024c0707415491173abd", name: "btn_next_pressed.png" }, { bytes: 1648, md5: "4eca8a9f147a49702499467bc353f622", name: "btn_prev.png" }, { bytes: 1621, md5: "8ffd9e4331c619287d4e317c5b12526d", name: "btn_prev_pressed.png" }, {
                        bytes: 141492,
                        md5: "5d4f6583a1bd898c5f24e7788bd6e76e",
                        name: "hop_bump.png"
                    }, { bytes: 20343, md5: "aa311e7bc93784230462dabb7652f25a", name: "jump.png" }, { bytes: 19093, md5: "8b6370b181e6cfd0d800a6eed7c07781", name: "jump_m.png" }, { bytes: 124267, md5: "7c922d625b6ca36fdb43e0f3c437d7bf", name: "lanes.png" }, { bytes: 137447, md5: "863dddee2b1cf4cdd16b43ecf9dde1d6", name: "lanes_bump.png" }, { bytes: 138095, md5: "5878ea38b05e46fcab4aec037ce65733", name: "lanes_m.png" }, { bytes: 110566, md5: "ffe91191036f0cef69dc44e40fea0fe3", name: "obstacles.png" }, {
                        bytes: 7760522,
                        md5: "3209c5a4d513486070531e9f0d341d66",
                        name: "pickups.png"
                    }, { bytes: 130385, md5: "847520c21334e595d05a9fbe5cbd1193", name: "speed_boost.png" }, { bytes: 7517, md5: "8d35e5e9cf97396f206f36118e899049", name: "use_item.png" }, { bytes: 7434, md5: "9878879b4391ea416f54fdad73172178", name: "use_item_m.png" }
                ],
                sound_mobile: [{ bytes: 3087, md5: "a7bfc830b7a540266a5e8953c8a0bafc", name: "beehive.mp3" }, { bytes: 6252, md5: "6b3e7e292d44901b0a0925803faa6200", name: "beehive.ogg" }, { bytes: 930, md5: "f492ee9e6d247614f9069114fcfd91a3", name: "click.mp3" }, {
                        bytes: 4056,
                        md5: "fe7e70084fb0d9a78429ee34d3361a6c",
                        name: "click.ogg"
                    }, { bytes: 2828, md5: "190f1067cd7461aa45009f7dc8bbb478", name: "countdown_1.mp3" }, { bytes: 5003, md5: "4aae16092e63f373953ee5399cd820f6", name: "countdown_1.ogg" }, { bytes: 3556, md5: "8954d52b4cedd6a871c1cbfbc08df4bc", name: "countdown_go.mp3" }, { bytes: 4837, md5: "0aac8c3fe1c3d7d3abeddaf01114e4ea", name: "countdown_go.ogg" }, { bytes: 4648, md5: "8220f6a0e3e68007fa2c95c4e74924cf", name: "emp.mp3" }, { bytes: 7412, md5: "d94c07ae930f1127abb714041e18c35b", name: "emp.ogg" }, {
                        bytes: 10185,
                        md5: "1589a4b79e9738a9c896977813f4777b",
                        name: "emp_impact.mp3"
                    }, { bytes: 14850, md5: "dfb501878e530de56cb6f4bfe5f7fbd9", name: "emp_impact.ogg" }, { bytes: 15358, md5: "5d840d2c995c5ea4dc06028522cff067", name: "engine_run.mp3" }, { bytes: 20018, md5: "b0feb01ce4750709b5f2a84690baca34", name: "engine_run.ogg" }, { bytes: 26488, md5: "0b252e71f186ce118d3d8084b9a6a099", name: "firework.mp3" }, { bytes: 33334, md5: "60b8de9fb6f5a573617291bc65f8599f", name: "firework.ogg" }, { bytes: 137121, md5: "f7896bbbc532238618236cd419ba37da", name: "gameplay_env_1.mp3" }, {
                        bytes: 158972,
                        md5: "689ea05a3004e3118928e42408814b8d",
                        name: "gameplay_env_1.ogg"
                    }, { bytes: 122306, md5: "403bc55dec07037d64b384e7f9a01a01", name: "gameplay_env_2.mp3" }, { bytes: 134416, md5: "973fa422e86c73bf506af35272973ca5", name: "gameplay_env_2.ogg" }, { bytes: 167852, md5: "807721967d61d54f709f1d813579f252", name: "gameplay_env_3.mp3" }, { bytes: 202681, md5: "d20ce5b7c9a2cdd05f19bd5872851b74", name: "gameplay_env_3.ogg" }, { bytes: 143235, md5: "3bf657e698a8ca04edcc2d337010d0e0", name: "gameplay_env_4.mp3" }, { bytes: 160267, md5: "7486f520ff7a7e2a0a974ac26189087a", name: "gameplay_env_4.ogg" },
                    { bytes: 3666, md5: "c92858139d48ef6bd29eb469e5d9cc21", name: "ghost.mp3" }, { bytes: 4887, md5: "36b986c47d31eb726da9af9bb3204fed", name: "ghost.ogg" }, { bytes: 2360, md5: "04c807298fa09c88332907f0dca0dad3", name: "hit_car.mp3" }, { bytes: 4993, md5: "f29d91674c312de473eaa55afc2f8396", name: "hit_car.ogg" }, { bytes: 4339, md5: "30484236804d4e55702c766b17df17e8", name: "hit_object.mp3" }, { bytes: 6612, md5: "49b2e33a30f33b22517b4aa8ca857d00", name: "hit_object.ogg" }, { bytes: 1763, md5: "8b2aa1c705ca6129dc3b0b54343ebdac", name: "hop.mp3" }, {
                        bytes: 4209,
                        md5: "062c143bafd789b7269fcdc7203cd6dd",
                        name: "hop.ogg"
                    }, { bytes: 9672, md5: "b5c92765f966c34ca7dd23f666b3ced3", name: "invisibility.mp3" }, { bytes: 12324, md5: "5362224de389e149da678e8a74585980", name: "invisibility.ogg" }, { bytes: 4649, md5: "b07c35dce386c6c240edaebce868c2c2", name: "invisibility_out.mp3" }, { bytes: 7551, md5: "14f44988c5c408d182601b510c87f15e", name: "invisibility_out.ogg" }, { bytes: 10005, md5: "132c58f7dca02ebce6ff526e57a34ef8", name: "jump.mp3" }, { bytes: 13389, md5: "52957b37b4eaebb8de4691d79d9b16b9", name: "jump.ogg" },
                    { bytes: 180001, md5: "6a3114df3f70584f2f6c31432381017c", name: "menu.mp3" }, { bytes: 198674, md5: "3ebdb374738dfab0129099382468870a", name: "menu.ogg" }, { bytes: 3875, md5: "801221d4ff7bd492761adcdb2e179181", name: "missile.mp3" }, { bytes: 7344, md5: "c6b7bf4396568bf356e866a20ea68b86", name: "missile.ogg" }, { bytes: 3660, md5: "4a817f74cdff0b30ffd68c57d03fd84e", name: "missile_impact.mp3" }, { bytes: 7123, md5: "7c893e504f31f0ebb873881e56c9b276", name: "missile_impact.ogg" }, { bytes: 5771, md5: "4b79d98ef159091be5aa9de940409e6f", name: "mud.mp3" },
                    { bytes: 7522, md5: "c2b0611d4f9f6d396c83dd03335f0eda", name: "mud.ogg" }, { bytes: 8627, md5: "82aa3015b862e159d92ada2a8bd4fafb", name: "nitro.mp3" }, { bytes: 12656, md5: "6b8fb6edd4772873ac71b89448d4922f", name: "nitro.ogg" }, { bytes: 3765, md5: "492da16088cd7928879b8d33f502c273", name: "oil.mp3" }, { bytes: 6281, md5: "46ff39ec5321e4406f22467180f9d4da", name: "oil.ogg" }, { bytes: 2102, md5: "378d3e212464ac143c806e62714e7981", name: "pickup.mp3" }, { bytes: 4575, md5: "501af8a4bea260eef06b4b2ff7421daa", name: "pickup.ogg" }, {
                        bytes: 1217,
                        md5: "ef8eaa2232b4ebef8fe1440215877224",
                        name: "roulette.mp3"
                    }, { bytes: 4222, md5: "3243f53d0460daf1b8a87cdd377eb2f0", name: "roulette.ogg" }, { bytes: 2030, md5: "cce30369e58be84e58c9107f3c1382ac", name: "shield.mp3" }, { bytes: 5578, md5: "dd904bb19e6c377467f91c2678221089", name: "shield.ogg" }, { bytes: 11018, md5: "c9154067ebd4d0dda1fe2c1ed73689d6", name: "shield_loop.mp3" }, { bytes: 12856, md5: "44b447093c01d9e1161242462002d92b", name: "shield_loop.ogg" }, { bytes: 2783, md5: "07c1961c96bafb80916e34a66679b366", name: "shieldout.mp3" }, {
                        bytes: 6110,
                        md5: "1329d471ccb96bb1282f46144ac01569",
                        name: "shieldout.ogg"
                    }, { bytes: 4492, md5: "a526ff37a7451993b895dfca355fa4b1", name: "skid.mp3" }, { bytes: 6795, md5: "d103af9d673e300f4e0f59b4784cbf92", name: "skid.ogg" }, { bytes: 7562, md5: "cdbf40b04768e3723becb9864336cbfc", name: "snow.mp3" }, { bytes: 11119, md5: "20dbbd2d794fe85370b85118c1c83039", name: "snow.ogg" }, { bytes: 3036, md5: "005eaa788ae89f5d0066ad7704180844", name: "snow_impact.mp3" }, { bytes: 6453, md5: "d1a0b17f10c860c4dddfd586086d0c62", name: "snow_impact.ogg" }, { bytes: 3270, md5: "c0512c272c867fda9ee2fce01b5168c8", name: "speed_up.mp3" },
                    { bytes: 5338, md5: "ca4bd65c7b3ea03398a5965cdaa6104a", name: "speed_up.ogg" }, { bytes: 10340, md5: "f41b848e9b3e5f48c8f8a58237a24dd0", name: "sting_env_1.mp3" }, { bytes: 12898, md5: "4cfb69595e66f9c3aa3b632bcf1fe215", name: "sting_env_1.ogg" }, { bytes: 13408, md5: "9a09cda0c54adb510732b2461173b844", name: "sting_env_2.mp3" }, { bytes: 15127, md5: "7bc9e43976c6d0ea184a486f172a3494", name: "sting_env_2.ogg" }, { bytes: 10133, md5: "2f17d3db54530fdc84264db630de40e7", name: "sting_env_3.mp3" }, {
                        bytes: 11947,
                        md5: "b4c974c9793ff2957310077555a48962",
                        name: "sting_env_3.ogg"
                    }, { bytes: 21184, md5: "fe8c41224d25ef515d9a823de0a6a49e", name: "sting_env_4.mp3" }, { bytes: 20932, md5: "f9ebb035347507870655a62391da5a57", name: "sting_env_4.ogg" }, { bytes: 2490, md5: "80cc8fbd1b8e4e7028e33d3bdefe44ce", name: "teleport_in.mp3" }, { bytes: 5701, md5: "ffdbf947ee0f9b053884273380406838", name: "teleport_in.ogg" }, { bytes: 3062, md5: "870e56b276bf1c611288320158395290", name: "teleport_out.mp3" }, { bytes: 5816, md5: "c77daf4ba6d4cd4034d7ad208ee13a24", name: "teleport_out.ogg" }
                ],
                sprites_env4_highend: [{
                    bytes: 4069,
                    md5: "da72c4cf0c1083258fb17597a3ecddbf",
                    name: "parallax_1_env4.png"
                }],
                ui_pause: [{ bytes: 386994, md5: "c50eb118bd8f9dd90d89cb3588fb85e6", name: "bg.jpg" }, { bytes: 40071, md5: "49af37608be88824d4ac03fd5b7e5e48", name: "box.png" }, { bytes: 4963, md5: "ee53066fc855a2bf8c7134b9b64dfcdc", name: "btn_resume.png" }, { bytes: 4777, md5: "18e68961c44efd9f1571e98e2f4bb252", name: "btn_resume_pressed.png" }],
                sprites: [{ bytes: 2140, md5: "79edf0732103e7dd82fa584e036a08a4", name: "beehive/beehive0.json" }, {
                        bytes: 49113,
                        md5: "f08fb317bd0fd824e96c1db3ea611a75",
                        name: "beehive/beehive0.png"
                    }, { bytes: 3002, md5: "29ea87cd8d9f074d38492b620222901b", name: "bees/bees0.json" }, { bytes: 103931, md5: "ebbcf237234e6646c765e50fa86fa937", name: "bees/bees0.png" }, { bytes: 2587, md5: "87a6b975345a29b08d03a26df39cb504", name: "cloud/cloud0.json" }, { bytes: 39989, md5: "ca2c67dbcceb403453336fd189713e63", name: "cloud/cloud0.png" }, { bytes: 64944, md5: "0c1b7b1e92182144c5caea2a23b0448c", name: "crowd.png" }, { bytes: 1234, md5: "57f78220689030dbb646a1596f6fe489", name: "electric_blast/electric_blast0.json" }, {
                        bytes: 23788,
                        md5: "89b4f16929628c4952fdc19f1315b6bf",
                        name: "electric_blast/electric_blast0.png"
                    }, { bytes: 1012, md5: "94c3c9ec73a85c3640a2c448b2cd2121", name: "end_zone.png" }, { bytes: 1727, md5: "c75599fc58e8673415103cb6104039ff", name: "exclamation.png" }, { bytes: 3304, md5: "14d2ca50799c97502a11140553523d2e", name: "fakeout/fakeout0.json" }, { bytes: 199558, md5: "9c82262a16902f27deef0dd9a6ed5304", name: "fakeout/fakeout0.png" }, { bytes: 5524, md5: "da77c05d2ed18a000f522cb8eefe02f2", name: "ghost/ghost0.json" }, {
                        bytes: 60804,
                        md5: "aead346d02fe8c7522384c7e9970d93b",
                        name: "ghost/ghost0.png"
                    }, { bytes: 5339, md5: "ad64800e2390e7d0b2c27e20be1c8419", name: "ice_patch.png" }, { bytes: 1445, md5: "af67ee2c4715020a76c2b46035ff2168", name: "impact_karts/impact_karts0.json" }, { bytes: 4978, md5: "c695cb9b77b06156b619fd7b363c9582", name: "impact_karts/impact_karts0.png" }, { bytes: 3763, md5: "c2ec43d4a1d875593d03de6883b2e538", name: "invisible/invisible0.json" }, { bytes: 82105, md5: "db92b2fb39a981a8649f37df18c622b4", name: "invisible/invisible0.png" }, { bytes: 1012, md5: "2864c03dd72189f2690b7f1106ade73b", name: "jump_border/jump_border.json" },
                    { bytes: 12975, md5: "a58071d1985f1f03e04ed3be11495607", name: "jump_border/jump_border.png" }, { bytes: 1006, md5: "33d87d98db3e0e712354edcaa0dc2705", name: "jump_extend/jump_extend.json" }, { bytes: 13534, md5: "c61f5b6ee845a99d8072cab1ebd9bf51", name: "jump_extend/jump_extend.png" }, { bytes: 2384, md5: "b70b0bf91eff17cc2de12ae73f48ee9a", name: "missile/missile0.json" }, { bytes: 33115, md5: "00604f22c7f2f4f49af5144439d451ec", name: "missile/missile0.png" }, { bytes: 1192, md5: "4dff085be07ca83e9e82d18153f2d746", name: "mud_splash/mud_splash.json" },
                    { bytes: 3079, md5: "10bee4396ecc5ba6c78c4dbd30c75324", name: "mud_splash/mud_splash.png" }, { bytes: 7495, md5: "216441219039ee0e6785ba4de213b70f", name: "mudpit_3.png" }, { bytes: 8746, md5: "3d16b8315928e3c6499e2ccba3de4ced", name: "mudpit_4.png" }, { bytes: 3362, md5: "d0e3cc07d80dfec148fe346e535e4451", name: "mystery_box/mystery_box0.json" }, { bytes: 192301, md5: "968ae1be698a18b0b3144c7a814dd530", name: "mystery_box/mystery_box0.png" }, { bytes: 2080, md5: "dc679714480da7839364ac052dc6cbbc", name: "nitro/nitro0.json" }, {
                        bytes: 24343,
                        md5: "ff2a70f5ade48e9cc73d3825127126fd",
                        name: "nitro/nitro0.png"
                    }, { bytes: 3401, md5: "3feabb586d0c4d74a3c48e6dc021aaa0", name: "oil.png" }, { bytes: 1192, md5: "2d7b9844b0233bd54db031af326b614a", name: "oil_splash/oil_splash.json" }, { bytes: 2781, md5: "fc932cc732c8faf0b93dee28a3cb79d1", name: "oil_splash/oil_splash.png" }, { bytes: 11136, md5: "0076cacbce6a386d4ea33a7c0afc8237", name: "road_add_bottom.png" }, { bytes: 11025, md5: "242e08cce6d08304e684b8f827cdbeb5", name: "road_add_top.png" }, { bytes: 22567, md5: "0e571a1803902039b220330c40e28618", name: "road_down_double.png" },
                    { bytes: 27724, md5: "2696fb87a26b242d111a9f3ea425e018", name: "road_down_quad.png" }, { bytes: 12885, md5: "7b9d44cc12ee8d68e1f854c3012847fa", name: "road_down_single.png" }, { bytes: 26567, md5: "4ffa18add95bba89640e9f25adc525c6", name: "road_down_triple.png" }, { bytes: 14236, md5: "2c5f00e062336d405cac9fef6c51a44a", name: "road_down_underground_multi.png" }, { bytes: 13479, md5: "9777c9d4881fa1f2a4299432cbdd08cc", name: "road_down_underground_single.png" }, { bytes: 8100, md5: "d5392b17274d40e6c82a2ad0bfef3ed9", name: "road_floating_double.png" },
                    { bytes: 13715, md5: "04fe7198eec9aaf7ae96aa524571bc57", name: "road_floating_quad.png" }, { bytes: 5927, md5: "17c8b6661db990322b5681222abe218a", name: "road_floating_single.png" }, { bytes: 12812, md5: "c23931d00313d07882fcf8b5a4b6d0dd", name: "road_floating_triple.png" }, { bytes: 12898, md5: "83d8b922eca8af089c6f0bfaac35b472", name: "road_jump_double.png" }, { bytes: 15472, md5: "29db20923cdff166d25bb0315e6ee271", name: "road_jump_quad.png" }, { bytes: 7440, md5: "c4a4458299ceba9f95ec56c9fdec8207", name: "road_jump_single.png" }, {
                        bytes: 15373,
                        md5: "92835f044db4de9b139290e153afc8f8",
                        name: "road_jump_triple.png"
                    }, { bytes: 4058, md5: "8fcbd14d5f8aa7dec11276e8d4f416c2", name: "road_lane_double.jpg" }, { bytes: 19971, md5: "9c04e92516e785274a7ddcee3fb6b775", name: "road_lane_quad.png" }, { bytes: 6038, md5: "14eccccef096e66da5a3b4f149ffba76", name: "road_lane_single.png" }, { bytes: 15111, md5: "f4527878b2b3938a565b8ae816af43e9", name: "road_lane_triple.png" }, { bytes: 11335, md5: "380c1dc28a972473f238264934f1eeae", name: "road_remove_bottom.png" }, {
                        bytes: 11150,
                        md5: "2e920e3ded630eb187f6cd822349c74b",
                        name: "road_remove_top.png"
                    }, { bytes: 22762, md5: "9065d43c02f72e1b2a6729caa9821dbe", name: "road_up_double.png" }, { bytes: 28053, md5: "a2c9de3b9c4f49c11cd258d6755c014b", name: "road_up_quad.png" }, { bytes: 12425, md5: "e176c03712228f407b62db8891d184ed", name: "road_up_single.png" }, { bytes: 27532, md5: "39f65c3ec5b0fea8be885a107a716081", name: "road_up_triple.png" }, { bytes: 13723, md5: "db26218d5bc06825b3c9190b8847eecb", name: "road_up_underground_multi.png" }, { bytes: 12608, md5: "1739ba09bc26969c7a80e10c4087c66c", name: "road_up_underground_single.png" },
                    { bytes: 1871, md5: "1879081e1587545a177f1f339f90caad", name: "road_wall.jpg" }, { bytes: 1079, md5: "bea428c20ab5f9ecef15dc82c3168fac", name: "shadow.png" }, { bytes: 3320, md5: "7331c0bd06d5df6ad3589f0c872dffe3", name: "shield/shield0.json" }, { bytes: 236607, md5: "d9f0842748b198cdfeb2e0c198aa0cec", name: "shield/shield0.png" }, { bytes: 1910, md5: "a7e60a1ede5e4f76b7db34c1d698c171", name: "snow_canon/snow_canon0.json" }, { bytes: 80517, md5: "bb0c64d21500976c81e15cb2522871c0", name: "snow_canon/snow_canon0.png" }, {
                        bytes: 1488,
                        md5: "2a207018ec0ef423bc338442f9ed7ff8",
                        name: "speed_bullet/speed_bullet0.json"
                    }, { bytes: 14871, md5: "2c41ebacf772e0638135010832ee0bdd", name: "speed_bullet/speed_bullet0.png" }, { bytes: 978, md5: "fb2fa24583b451ff5bbafa5d010a2f2b", name: "speed_lane/speed_lane.json" }, { bytes: 9397, md5: "34553df7a2a72866b26483c128a1232e", name: "speed_lane/speed_lane.png" }, { bytes: 972, md5: "3e99a53a86dade34fb156e2dd85cb794", name: "speed_lane_up/speed_lane_up.json" }, { bytes: 9632, md5: "0ca1c8f80fc2a4b7e53dc466e519fe7b", name: "speed_lane_up/speed_lane_up.png" }, {
                        bytes: 1001,
                        md5: "2ced188c43aa7a8f70fa6b4d0dffe765",
                        name: "speed_lane_x3/speed_lane_x3.json"
                    }, { bytes: 9722, md5: "9ce3b55ffc21bd11027d73968c6a6603", name: "speed_lane_x3/speed_lane_x3.png" }, { bytes: 1005, md5: "c2784202b609e8f82076f90f1e9db02e", name: "speedlines/speedlines0.json" }, { bytes: 10124, md5: "7a710473f0a71fccb62d27672fff66c1", name: "speedlines/speedlines0.png" }, { bytes: 2785, md5: "89c088388df0303cc6a961ed02646c3f", name: "teleport_flash/teleport_flash.json" }, { bytes: 29560, md5: "2c39a1defb176512bbe7a193371b97bc", name: "teleport_flash/teleport_flash.png" }
                ],
                customization: [{
                    bytes: 11819,
                    md5: "0f01ed57eb85963b9d4cc0cbc83c36e6",
                    name: "items.json"
                }],
                debug: [{ bytes: 437, md5: "2c5d91c9fcd7c1b6c4e0c45412fce304", name: "debug_example.json" }, { bytes: 7992, md5: "a2d0330d20f20de8490e83806e1c7871", name: "debug_font.fnt" }, { bytes: 1780, md5: "3c6dc308b980589bc4580aa9446c5f48", name: "debug_font.png" }, { bytes: 2197, md5: "37d9558189dd4cbffe736595c840600d", name: "particles.pex" }, { bytes: 221, md5: "f1414380ccbb1cf9e58069cba28e904b", name: "sprite.png" }],
                sprites_env4: [{
                        bytes: 164427,
                        md5: "adef4aa019e4ef6ad39563c7aa7a1149",
                        name: "bg_env4.jpg"
                    }, { bytes: 2206, md5: "1909505e55ec70e9783dba680dbb4c9b", name: "deco_1.png" }, { bytes: 2165, md5: "f3345bd0ce787aed1c98402dc209e3a0", name: "deco_2.png" }, { bytes: 4016, md5: "9b1afe1b4f2151a6e03fd044892709f9", name: "deco_3.png" }, { bytes: 2475, md5: "e2579de90733ab4b7df4dbeaeaf6b1fb", name: "deco_4.png" }, { bytes: 204062, md5: "35c37303a5be15c701cf5d5a8604784f", name: "ground.png" }, { bytes: 3206, md5: "9cc2cb2eaf87d48f27f94fda20da4ec8", name: "hamster.png" }, { bytes: 244011, md5: "39429a63603d92b828beadc53eea4cf9", name: "hole_l.png" },
                    { bytes: 245592, md5: "c0ca624d37dbc1f45a10e73b68125260", name: "hole_r.png" }, { bytes: 619988, md5: "bcde619276951e1cda76ed2efdd08757", name: "kitchen.png" }, { bytes: 5795, md5: "c16c57819138781f2df35200d137bbbe", name: "obstacle_env4.png" }, { bytes: 2620, md5: "72a57aca096c96f26e28ce795b7b8c23", name: "road_wall_env4.jpg" }, { bytes: 20739, md5: "972eec2e3d3caab8ba5193a6312cdaf2", name: "room1.png" }, { bytes: 22087, md5: "4159cee3dc078aed054ee07e83a6e110", name: "room2.png" }, { bytes: 21120, md5: "6e8a39da31a5cf92708ce49a7ffc8085", name: "room3.png" },
                    { bytes: 22462, md5: "ebe2e54fb921f7deed0c521bbbd91fdc", name: "room4.png" }, { bytes: 90982, md5: "b5a8a64e3e03625ec7ca8c77c11c2dee", name: "room5.png" }, { bytes: 22378, md5: "7b560e8e1eefd6a2d90c3497c27358a6", name: "room6.png" }, { bytes: 4030, md5: "7d007665fab67614ba8664893acd8c0d", name: "table.png" }, { bytes: 18032, md5: "a10759dce9f05729ea927a9b64546036", name: "toys.png" }, { bytes: 50168, md5: "1c635c16cc762fdfda9b2a32c38a7a57", name: "wall1.png" }, { bytes: 86083, md5: "ebe09732c651f53e40b6f360243ccb1e", name: "wall2.png" }, {
                        bytes: 68288,
                        md5: "4a587661594f378c4ed9ec34cdd0f1ae",
                        name: "wall3.png"
                    }, { bytes: 72944, md5: "d64d18f86e3af6a0e378d31c6b28b2e3", name: "wall4.png" }, { bytes: 2206, md5: "1909505e55ec70e9783dba680dbb4c9b", name: "wall_decor1.png" }, { bytes: 2165, md5: "f3345bd0ce787aed1c98402dc209e3a0", name: "wall_decor2.png" }, { bytes: 4016, md5: "9b1afe1b4f2151a6e03fd044892709f9", name: "wall_decor3.png" }, { bytes: 2475, md5: "e2579de90733ab4b7df4dbeaeaf6b1fb", name: "wall_decor4.png" }
                ],
                sprites_env3: [{ bytes: 29694, md5: "fee521566a1e736a0621d743471e2e2f", name: "bg_env3.jpg" },
                    { bytes: 1615, md5: "6f0e9912db5da6de64178a18c3cd151f", name: "building_base.jpg" }, { bytes: 123768, md5: "f4aa0bff3a06a95f227bb1777859d1e6", name: "building_big.png" }, { bytes: 131964, md5: "18ffc657f5edf5ece143cd4944ca75a8", name: "building_big_02.png" }, { bytes: 86790, md5: "f767906f36736d5027eb2c4b9f1a5d86", name: "building_small.png" }, { bytes: 25072, md5: "743fb299b5b0e996b854744fbfecaa70", name: "obstacle_env3.png" }
                ],
                sprites_env2: [{ bytes: 20299, md5: "c6f0ff75f76cda60f6f88ff09559834e", name: "bg_env2.jpg" }, {
                    bytes: 2977,
                    md5: "b916f938516256e8ffb211a515ddc539",
                    name: "deco_1.png"
                }, { bytes: 11539, md5: "1bd34e79382350181099af70e23cf2e1", name: "deco_2.png" }, { bytes: 19609, md5: "37c5e44002bbbbbc2a7fe8af8dba15fd", name: "deco_3.png" }, { bytes: 10208, md5: "1f4909b3b8ba3d3873aa975fd5bfcbff", name: "deco_4.png" }, { bytes: 98325, md5: "67ef02590f229bd7b66a34445029653b", name: "deco_5.png" }, { bytes: 521133, md5: "26ddcdc571aa4057701d8d91600688e1", name: "ground.png" }, { bytes: 15860, md5: "e838670caae5a8cbadc886f22c31e304", name: "obstacle_env2.png" }, {
                    bytes: 1683,
                    md5: "d2011d3a0dffd817ded74166138d3b17",
                    name: "road_wall_env2.jpg"
                }, { bytes: 4181, md5: "a939b938692ac01ced8b55ec26035a5d", name: "wall_env2.png" }],
                sprites_env1: [{ bytes: 13014, md5: "3ed402bbba1a4f01be810f791f77e101", name: "bg_env1.jpg" }, { bytes: 31909, md5: "5323e0e2a40b26ad75730a5fd872eedb", name: "deco_1.png" }, { bytes: 2309, md5: "91ce7d20ac9613aa522da4986e8d4359", name: "deco_2.png" }, { bytes: 2581, md5: "df689d1f9b50dec613fded1a57ddd6a5", name: "deco_3.png" }, { bytes: 19084, md5: "1eba0cad4be1ae47e3bbad7036222e06", name: "deco_4.png" }, {
                    bytes: 4908,
                    md5: "da0d713a51c64fc10b99e205608484ce",
                    name: "deco_5.png"
                }, { bytes: 506861, md5: "28c7979093302ca73210ae356e5fa9e2", name: "ground.png" }, { bytes: 13003, md5: "5834b83df62ed9646bf55a628d3cbb3d", name: "obstacle_env1.png" }, { bytes: 2044, md5: "a6fa03180991393a259a012f21798cb3", name: "road_wall_env1.jpg" }],
                sprites_env2_highend: [{ bytes: 15151, md5: "dae6a70496a62c49a01bdb6443d7ace6", name: "ol_1.png" }, { bytes: 19077, md5: "38d5b84e1e6bcd3490c7ffbca9540af5", name: "ol_2.png" }, { bytes: 48719, md5: "5f57dadb3e485bd8e37d171f6f6bbcd6", name: "parallax_1_env2.png" }, {
                    bytes: 108428,
                    md5: "8c5d9e619504f28437d3e7021600e1be",
                    name: "parallax_2_env2.png"
                }],
                text: [{ bytes: 15420, md5: "fb05b37f99e81e103a7fb76c94db144d", name: "localization.xml" }],
                temp: [],
                config: [{ bytes: 592, md5: "89c43c2cbae8af153e7da9d9865d346c", name: "config.json" }],
                trails: [{ bytes: 6041, md5: "259cbd884a225140530ac4880622b278", name: "trail_fireworks/trail_fireworks0.json" }, { bytes: 250967, md5: "1f87b789b5404c5585d9b05f1d6b5fb0", name: "trail_fireworks/trail_fireworks0.png" }]
            }]
        }
    };
    Ma._supportsCrossOrigin = function() {
        var a;
        a = 0 <= window.navigator.userAgent.indexOf("Linux; U; Android") ?
            !1 : null != (new XMLHttpRequest).withCredentials;
        a || null;
        return a
    }();
    r._scratchPoint = new X;
    sf.NEWLINE = new bi(10);
    Bd._sharedEvent = new Zl;
    nc._sharedEvent = new $l;
    Zb._sharedEvent = new am;
    Tf.CANVAS_TEXTURES = (new Uc("(iPhone|iPod|iPad)", "")).match(window.navigator.userAgent);
    Da._mediaRefCount = 0;
    Da._detectBlobSupport = !0;
    ea.VENDOR_PREFIXES = ["webkit", "moz", "ms", "o", "khtml"];
    ea.SHOULD_HIDE_MOBILE_BROWSER = window.top == window && (new Uc("Mobile(/.*)? Safari", "")).match(window.navigator.userAgent);
    wa._detectSupport = !0;
    Dd._scratchMatrix = new Vc;
    T.canadaTrackingEnabled = !1;
    T.isReady = !1;
    Sa.DRIVE = { id: "drive", priority: 0, loop: !0 };
    Sa.JUMP = { id: "jump", priority: 2, loop: !1 };
    Sa.HOP = { id: "hop", priority: 1, loop: !1 };
    Sa.LAND = { id: "land", priority: 2, loop: !1 };
    Sa.SKID = { id: "skid", priority: 3, loop: !0 };
    qc._nextId = 0;
    Ab.NEUTRAL = { id: "neutral", priority: 0, loop: !0 };
    Ab.HAPPY = { id: "happy", priority: 0, loop: !0 };
    Ab.STARE = { id: "stare", priority: 1, loop: !1 };
    Ab.HURT = { id: "hurt", priority: 2, loop: !1 };
    qd.DefaultPack = "ai";
    cc.CullingBuffer = 1200;
    cc.sliceHeight = 10;
    J.EDITOR_EXCLUDE = ["forceUpdate", "initialized", "_parentViewMatrixUpdateCount", "_viewMatrixUpdateCount"];
    J.ENABLE_POINTER = !1;
    J.mobilePackSuffix = "_mobile";
    J.lowEndPackSuffix = "_low";
    rb.SOUND_CHANNEL = "COLLECTABLE";
    ec.EDITOR_EXCLUDE = "_defaultSlotOffset,_locked,_loop,forceUpdate,initialized,_parentViewMatrixUpdateCount,_viewMatrixUpdateCount".split(",");
    ec.ResetPose = !0;
    We.delay = 0;
    ij.components = function() {
        var a = new M;
        a.set("lane_spawn_point", Ug);
        a.set("player", Vg);
        a.set("kart", Ai);
        a.set("kart_state", Sa);
        a.set("speed_control", qc);
        a.set("ai_speed_control", Bi);
        a.set("wheels", Xg);
        a.set("character_state", Ab);
        a.set("character_ai", Ci);
        a.set("elastic_ai", Di);
        a.set("kart_customization", Ei);
        a.set("kart_culling", Fi);
        a.set("teleport", Gi);
        a.set("game_collector", Ii);
        a.set("game_cameraTarget", Ji);
        a.set("trail_generator", Ki);
        a.set("trail", Li);
        a.set("bump", Mi);
        a.set("jump", Ni);
        a.set("shadow", Oi);
        a.set("speed_lines", Pi);
        a.set("hitFx", Qi);
        a.set("default_lane", Ri);
        a.set("lane_object", Fd);
        a.set("lane_request", eg);
        a.set("dots",
            Yg);
        a.set("default_lane_box", Si);
        a.set("lane", cc);
        a.set("lap_repeat", Pb);
        a.set("default_dot", $g);
        a.set("obstacle", Ti);
        a.set("force_change", Ui);
        a.set("speed_boost", Ve);
        a.set("jump_pad", Vi);
        a.set("tile_pattern", gg);
        a.set("end_zone", Xi);
        a.set("teleporter", Yi);
        a.set("pickup", wf);
        a.set("fakeout_collectable", Zi);
        a.set("bee_projectile", $i);
        a.set("missile", bj);
        a.set("tutorial_trigger", cj);
        a.set("tutorial_kart", dj);
        a.set("spine", ec);
        a.set("customization", Ed);
        a.set("hover", We);
        return a
    }(this);
    Hd.defaultPack =
        "ui_loading";
    Rb.Grid = { x: 408, y: 110, perRowEven: 5, perRowOdd: 6, offsetXOdd: -49, spacing: { x: 100, y: 90 } };
    rd.Grid = { x: 26, y: 164, spacing: { oddX: 201, evenX: 270, y: 58 } };
    ad.Grid = { x: 164, y: 187, perColumn: 4, spacing: { x: 170, y: 60 } };
    jj.DefaultScene = "title";
    jj.scenes = function() {
        var a = new M;
        a.set("Editor", kj);
        a.set("EditorLoading", lj);
        a.set("Loading", Ib);
        a.set("Title", ig);
        a.set("CodeEntry", mj);
        a.set("SelectMode", oj);
        a.set("SelectCharacter", Rb);
        a.set("CustomizeCharacter", pj);
        a.set("SelectLevel", rd);
        a.set("Gameplay", qj);
        a.set("GameplayLoading",
            rj);
        a.set("Pause", tj);
        a.set("Help", vj);
        a.set("Win", ad);
        a.set("End", kg);
        return a
    }(this);
    ye.DEFAULT_EASING = D.quadInOut;
    sd.EASY = { speedModifier: -150, elasticSpeed: 200, rubberTime: 10, globalItemCooldown: 10, bufferFront: 500, bufferBack: 1E3 };
    sd.MEDIUM = { speedModifier: -100, elasticSpeed: 150, rubberTime: 7, globalItemCooldown: 8, bufferFront: 1E3, bufferBack: 750 };
    sd.HARD = { speedModifier: -60, elasticSpeed: 1, rubberTime: 7, globalItemCooldown: 7, bufferFront: 800, bufferBack: 200 };
    Q.$name = "nick_racing_v9";
    Q.width = 960;
    Q.height = 560;
    Q.nbOpponents = 7;
    Q.autoAccelControls = !1;
    Q.pickupsForVid = !1;
    Q.defaultLap = 3;
    Q.levelUnlocks = function() { var a = new M;
        a.set("jelly", ["mega", "kitty"]); return a }(this);
    Q.cupLootUnlocks = function() { var a = new M;
        a.set("jelly", "body_5");
        a.set("mega", "body_4");
        a.set("kitty", "body_6"); return a }(this);
    Q.difficultyLootUnlocks = function() { var a = new M;
        a.set("mega", "body_7");
        a.set("kitty", "body_8");
        a.set("house", "body_9"); return a }(this);
    Q.forFunItemCheats = "FAKEOUT,BEEHIVE,EMP,NITRO,FIREWORKS,SNOW,GHOST,SHIELD,HOMING,INVISIBILITY".split(",");
    Q.forFunMiscCheats = "BIG_HEAD,UNBUMPABLE,BACKWARD,INVISIBLE,TINY_HEAD,TINY_KART,HOVER_CAR,DRAGSTER".split(",");
    xa.WAKE = 1;
    xa.PROPS = 2;
    xa.ANGDRAG = 4;
    xa.ARBITERS = 8;
    Ia.nbFilter = 7;
    Ia.filtersKarts = [0, 1, 2, 3, 4, 5, 6];
    Ia.filtersLanes = [7, 8, 9, 10, 11, 12, 13];
    Ia.invisibleGroup = 20;
    Ia.gravity = 1500;
    Ia.PlayerMaterial = new fh(0, 0.01, 0, 1, 0.001);
    Ia.GroundMaterial = new fh(1, 2, 0, 1, 0.001);
    $c.BODY = "body";
    $c.HOOD = "hood";
    $c.SPOILER = "spoiler";
    $c.WHEEL = "wheel";
    $c.FLAG = "flag";
    $c.ALTERABLE = [$c.BODY, $c.HOOD, $c.SPOILER, $c.WHEEL, $c.FLAG];
    oa.leo = "body_4,body_5,body_6,body_7,body_3,body_2,body_1,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_nycb,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.raph = "body_4,body_5,body_6,body_7,body_3,body_2,body_1,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_nycb,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.mike = "body_4,body_5,body_6,body_7,body_1,body_2,body_3,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_tmnt,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.donnie = "body_4,body_5,body_6,body_7,body_1,body_3,body_2,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_tmnt,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.spongebob = "body_4,body_5,body_6,body_7,body_1,body_3,body_2,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_bbb,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.patrick = "body_4,body_5,body_6,body_7,body_3,body_2,body_1,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_bbb,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.chloe = "body_4,body_5,body_6,body_7,body_1,body_2,body_3,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_fop,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.timmy = "body_4,body_5,body_6,body_7,body_3,body_1,body_2,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_fop,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.tommy = "body_4,body_5,body_6,body_7,body_3,body_1,body_2,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_rr,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.babe = "body_4,body_5,body_6,body_7,body_3,body_2,body_1,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_gs,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.kenzie = "body_4,body_5,body_6,body_7,body_3,body_1,body_2,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_gs,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.alvin = "body_4,body_5,body_6,body_7,body_2,body_1,body_3,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_ta,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.henry = "body_4,body_5,body_6,body_7,body_2,body_1,body_3,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_dz,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.ranger = "body_4,body_5,body_6,body_7,body_3,body_2,body_1,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_pr,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.lincoln = "body_4,body_5,body_6,body_7,body_3,body_2,body_1,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_tlh,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.lola = "body_4,body_5,body_6,body_7,body_3,body_2,body_1,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_tlh,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.abrasive = "body_4,body_5,body_6,body_7,body_3,body_2,body_1,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_vs,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.tiger = "body_4,body_5,body_6,body_7,body_3,body_2,body_1,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_vs,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.shredder = "body_4,body_5,body_6,body_7,body_3,body_2,body_1,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_vs,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.snide = "body_4,body_5,body_6,body_7,body_3,body_2,body_1,wheel_1,wheel_2,wheel_3,wheel_4,wheel_0,spoiler_2,spoiler_3,spoiler_4,spoiler_1,flag_2,flag_3,flag_4,flag_1_vs,hood_2,hood_3,hood_4,hood_1".split(",");
    oa.minValue = 0;
    oa.maxValue = 5;
    Ba.initDone = !1;
    Ba.loot = new M;
    Vd.MAX_VALUE = 5;
    G.TEAM_TMNT =
        "tmnt";
    G.TEAM_TMNT2 = "tmnt2";
    G.TEAM_SBSP = "sbsp";
    G.TEAM_FOP = "fop";
    G.TEAM_RUG = "rr";
    G.TEAM_RANGERS = "pr";
    G.TEAM_SHAKERS = "gs";
    G.TEAM_ALVIN = "alvins";
    G.TEAM_HENRY = "hd";
    G.TEAM_LOUD = "tlh";
    G.TEAM_VILLAINS = "vs";
    G.leo = { name: "leo", team: G.TEAM_TMNT, locked: !1, stats: { speed: 0, traction: 1, strength: 0 } };
    G.raph = { name: "raph", team: G.TEAM_TMNT, locked: !1, stats: { speed: 0, traction: 0, strength: 1 } };
    G.mike = { name: "mike", team: G.TEAM_TMNT2, locked: !1, unlocks: { cup: "kitty", level: "level8" }, stats: { speed: 1, traction: 0, strength: 0 } };
    G.donnie = { name: "donnie", team: G.TEAM_TMNT2, locked: !1, unlocks: { cup: "kitty", position: 1 }, stats: { speed: 0, traction: 1, strength: 0 } };
    G.spongebob = { name: "spongebob", team: G.TEAM_SBSP, locked: !1, stats: { speed: 0, traction: 0, strength: 1 } };
    G.patrick = { name: "patrick", team: G.TEAM_SBSP, locked: !1, stats: { speed: 0, traction: 0, strength: 1 } };
    G.chloe = { name: "chloe", team: G.TEAM_FOP, locked: !1, stats: { speed: 1, traction: 0, strength: 0 } };
    G.timmy = { name: "timmy", team: G.TEAM_FOP, locked: !1, stats: { speed: 1, traction: 0, strength: 0 } };
    G.tommy = {
        name: "tommy",
        team: G.TEAM_RUG,
        locked: !1,
        stats: { speed: 0, traction: 1, strength: 0 }
    };
    G.babe = { name: "babe", team: G.TEAM_SHAKERS, locked: !1, stats: { speed: 1, traction: 1, strength: 0 } };
    G.kenzie = { name: "kenzie", team: G.TEAM_SHAKERS, locked: !1, unlocks: { quickMatch: !0 }, stats: { speed: 1, traction: 1, strength: 0 } };
    G.alvin = { name: "alvin", team: G.TEAM_ALVIN, locked: !1, stats: { speed: 1, traction: 0, strength: 1 } };
    G.henry = { name: "henry", team: G.TEAM_HENRY, locked: !1, stats: { speed: 0, traction: 0, strength: 0 } };
    G.ranger = {
        name: "ranger",
        team: G.TEAM_RANGERS,
        locked: !1,
        unlocks: {
            cup: "mega",
            level: "level5"
        },
        stats: { speed: 1, traction: 0, strength: 1 }
    };
    G.lincoln = { name: "lincoln", team: G.TEAM_LOUD, locked: !1, stats: { speed: 1, traction: 0, strength: 1 } };
    G.lola = { name: "lola", team: G.TEAM_LOUD, locked: !1, unlocks: { cup: "house", level: "level11" }, stats: { speed: 1, traction: 1, strength: 1 } };
    G.abrasive = { name: "abrasive", team: G.TEAM_VILLAINS, locked: !1, stats: { speed: 1, traction: 1, strength: 1 } };
    G.tiger = { name: "tiger", team: G.TEAM_VILLAINS, locked: !1, stats: { speed: 1, traction: 1, strength: 1 } };
    G.shredder = {
        name: "shredder",
        team: G.TEAM_VILLAINS,
        locked: !1,
        unlocks: { allCups: !0 },
        stats: { speed: 1, traction: 1, strength: 2 }
    };
    G.snide = { name: "snide", team: G.TEAM_VILLAINS, locked: !1, unlocks: { forFun: !0 }, stats: { speed: 1, traction: 1, strength: 2 } };
    G.list = [G.spongebob, G.patrick, G.raph, G.leo, G.tommy, G.donnie, G.mike, G.chloe, G.timmy, G.babe, G.kenzie, G.henry, G.alvin, G.ranger, G.lincoln, G.lola, G.abrasive, G.tiger, G.shredder, G.snide];
    n.currentLevel = "level1";
    n.env = "1";
    n.currentCup = "jelly";
    n.currentCupPositions = function() {
        var a = new M;
        a.set("ranger", 3);
        a.set("leo", 2);
        a.set("spongebob",
            1);
        return a
    }(this);
    n.currentCharacter = G.spongebob;
    n.cheatPickup = "";
    n.cheatsForFun = [];
    n.currentDifficulty = sd.EASY;
    n.opponents = [];
    n.isForFun = !1;
    n.isTournament = !0;
    n.nbLap = -1;
    n.lapWidth = 1E3;
    n.inEditor = !1;
    n.hasWon = !1;
    n.position = 1;
    n.positions = [{ name: "leo", isPlayer: !0 }, { name: "raph", isPlayer: !1 }, { name: "donnie", isPlayer: !1 }, { name: "ranger", isPlayer: !1 }, { name: "mike", isPlayer: !1 }, { name: "timmy", isPlayer: !1 }, { name: "chloe", isPlayer: !1 }, { name: "patrick", isPlayer: !1 }];
    n.finalPosition = [];
    n.currentTime = 0;
    n.itemUsed =
        0;
    n.playersBumped = 0;
    n.playerTimesBumped = 0;
    n.boxCollected = 0;
    n.boosts = 0;
    n.obstaclesHit = 0;
    n.customizeFrom = "selectmode";
    rc._levelCache = new M;
    Za.LIST = function() { var a = new M;
        a.set("jelly", ["level1", "level2", "level3"]);
        a.set("mega", ["level4", "level5", "level6"]);
        a.set("kitty", ["level7", "level8", "level9"]);
        a.set("house", ["level10", "level11", "level12"]); return a }(this);
    Aa.stats = {
        speed: [null, { speed_control: { maxSpeed: "*=1.1" }, ai_speed_control: { maxSpeed: "*=1.1" } }, { speed_control: { maxSpeed: "*=1.15" }, ai_speed_control: { maxSpeed: "*=1.15" } },
            { speed_control: { maxSpeed: "*=1.2" }, ai_speed_control: { maxSpeed: "*=1.2" } }, { speed_control: { maxSpeed: "*=1.25" }, ai_speed_control: { maxSpeed: "*=1.25" } }, { speed_control: { maxSpeed: "*=1.3" }, ai_speed_control: { maxSpeed: "*=1.3" } }
        ],
        traction: [{ speed_control: {}, ai_speed_control: {}, teleport: { teleportStartDelay: 1.25 } }, { speed_control: { traction: "1.2", acceleration: "*=1.1" }, ai_speed_control: { traction: "1.2", acceleration: "*=1.1" }, teleport: { teleportStartDelay: 1 } }, {
            speed_control: { traction: "1.4", acceleration: "*=1.15" },
            ai_speed_control: {
                traction: "1.4",
                acceleration: "*=1.15"
            },
            teleport: { teleportStartDelay: 0.75 }
        }, { speed_control: { traction: "1.6", acceleration: "*=1.2" }, ai_speed_control: { traction: "1.6", acceleration: "*=1.2" }, teleport: { teleportStartDelay: 0.5 } }, { speed_control: { traction: "1.8", acceleration: "*=1.25" }, ai_speed_control: { traction: "1.8", acceleration: "*=1.25" }, teleport: { teleportStartDelay: 0.25 } }, { speed_control: { traction: "2", acceleration: "*=1.3" }, ai_speed_control: { traction: "2", acceleration: "*=1.3" }, teleport: { teleportStartDelay: 0.1 } }],
        strength: [null,
            { bump: { strength: 1 } }, { bump: { strength: 2 } }, { bump: { strength: 3 } }, { bump: { strength: 4 } }, { bump: { strength: 5 } }
        ]
    };
    Aa.baseShape = [{ type: "circle", radius: 25, material: "player", x: -35 }, { width: 75, height: 20, x: -50, y: -20 }];
    Aa.baseKart = {
        template: { key: "baseKart" },
        spine: { defaultAnimation: "drive", layer: "player", scale: 0.35 },
        transform: { fixed: !1 },
        physics: { mass: 10, shape: Aa.baseShape, contacts: "PLAYER" },
        lane_request: { laneId: 1 },
        airFriction: { resistance: 2.5 },
        kart: {},
        kart_state: {},
        character_state: {},
        teleport: {},
        character_ai: {},
        game_collector: {},
        stats: { stats: { speed: 0, traction: 0, strength: 0 } },
        kart_customization: {},
        trail_generator: { template: "trail_fireworks" },
        shadow: {},
        speed_lines: {},
        kart_culling: {},
        default_lane: {},
        jump: {},
        hitFx: {},
        bump: {}
    };
    Aa.racer_1 = { name: "body_1", template: { template: { key: "racer_1", parent: "baseKart" }, spine: { pack: "spine/racer_1", asset: "racer_1" } } };
    Aa.racer_2 = { name: "body_2", template: { template: { key: "racer_2", parent: "baseKart" }, spine: { pack: "spine/racer_2", asset: "racer_2" }, shadow: { scale: 0.75 } } };
    Aa.racer_3 = {
        name: "body_3",
        template: {
            template: {
                key: "racer_3",
                parent: "baseKart"
            },
            spine: { pack: "spine/racer_3", asset: "racer_3" },
            shadow: { scale: 0.85, offsetX: -20, offsetY: -10 }
        }
    };
    Aa.racer_4 = { name: "body_4", template: { template: { key: "racer_4", parent: "baseKart" }, spine: { pack: "spine/racer_4", asset: "racer_4" } } };
    Aa.racer_5 = { name: "body_5", template: { template: { key: "racer_5", parent: "baseKart" }, spine: { pack: "spine/racer_5", asset: "racer_5" }, shadow: { scale: 0.75, offsetX: 0, offsetY: -10 } } };
    Aa.racer_6 = {
        name: "body_6",
        template: {
            template: { key: "racer_6", parent: "baseKart" },
            spine: {
                pack: "spine/racer_6",
                asset: "racer_6"
            }
        }
    };
    Aa.racer_7 = { name: "body_7", template: { template: { key: "racer_7", parent: "baseKart" }, spine: { pack: "spine/racer_7", asset: "racer_7" } } };
    Aa.racer_8 = { name: "body_8", template: { template: { key: "racer_8", parent: "baseKart" }, spine: { pack: "spine/racer_8", asset: "racer_8" } } };
    Aa.racer_9 = { name: "body_9", template: { template: { key: "racer_9", parent: "baseKart" }, spine: { pack: "spine/racer_9", asset: "racer_9" } } };
    Aa.list = [Aa.racer_1, Aa.racer_2, Aa.racer_3, Aa.racer_4, Aa.racer_5, Aa.racer_6, Aa.racer_7, Aa.racer_8, Aa.racer_9];
    ja.FAKEOUT = { id: "fakeout", className: Fj, min: 1, max: 4 };
    ja.BEEHIVE = { id: "beehive", className: Dj, min: 2, max: 6 };
    ja.EMP = { id: "emp", className: Ej, min: 2, max: 6 };
    ja.NITRO = { id: "nitro", className: Kj, min: 4, max: 8 };
    ja.FIREWORKS = { id: "fireworks", className: Gj, min: 4, max: 8 };
    ja.SNOW = { id: "snow", className: Mj, min: 1, max: 4 };
    ja.GHOST = { id: "ghost", className: Hj, min: 1, max: 6 };
    ja.SHIELD = { id: "shield", className: Lj, min: 1, max: 6 };
    ja.HOMING = { id: "homing", className: Ij, min: 3, max: 8 };
    ja.INVISIBILITY = { id: "invisibility", className: Jj, min: 2, max: 6 };
    ja.list = [ja.FAKEOUT, ja.BEEHIVE, ja.HOMING, ja.EMP, ja.NITRO, ja.FIREWORKS, ja.SNOW, ja.GHOST, ja.SHIELD, ja.INVISIBILITY];
    fb.verbose = !1;
    Cf.globalItemCooldown = 10;
    xf.updateRate = 0;
    ve.USE_CACHE = !1;
    ve.USE_ENUM_INDEX = !1;
    ve.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
    ac.DEFAULT_RESOLVER = ia;
    ac.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
    ng.CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    ng.BYTES = Xd.ofString(ng.CHARS);
    Fa.count = 0;
    Pe.escapes =
        function() { var a = new M;
            a.set("lt", "<");
            a.set("gt", ">");
            a.set("amp", "&");
            a.set("quot", '"');
            a.set("apos", "'");
            a.set("nbsp", String.fromCharCode(160)); return a }(this);
    kb.SCALE = 1;
    dd.BASE_URL = "";
    La.SCALE = 1;
    La.hasInit = !1;
    La._tmp = 1;
    Ja.enabled = !1;
    u.epsilon = 1.0E-8;
    u.fluidAngularDragFriction = 2.5;
    u.fluidAngularDrag = 100;
    u.fluidVacuumDrag = 0.5;
    u.fluidLinearDrag = 0.5;
    u.collisionSlop = 0.2;
    u.collisionSlopCCD = 0.5;
    u.distanceThresholdCCD = 0.05;
    u.staticCCDLinearThreshold = 0.05;
    u.staticCCDAngularThreshold = 0.005;
    u.bulletCCDLinearThreshold =
        0.125;
    u.bulletCCDAngularThreshold = 0.0125;
    u.dynamicSweepLinearThreshold = 17;
    u.dynamicSweepAngularThreshold = 0.6;
    u.angularCCDSlipScale = 0.75;
    u.arbiterExpirationDelay = 6;
    u.staticFrictionThreshold = 2;
    u.elasticThreshold = 20;
    u.sleepDelay = 60;
    u.linearSleepThreshold = 0.2;
    u.angularSleepThreshold = 0.4;
    u.contactBiasCoef = 0.3;
    u.contactStaticBiasCoef = 0.6;
    u.contactContinuousBiasCoef = 0.4;
    u.contactContinuousStaticBiasCoef = 0.5;
    u.illConditionedThreshold = 2E8;
    Oa.staging = "localhost,stolo.com,192.168,hudson.mtvi.com,stash.mtvi.com,nick-q".split(",");
    Oa.onMute = new S;
    Oa.onPause = new ga;
    Oa.onResume = new ga;
    sa.REDIRECT_URL = "";
    sa.DOMAIN_LIST = [];
    sa.REDIRECT_DELAY = 3E4;
    sa.GET_DOMAINS_DELAY = 3E3;
    bc.output_event_array = [];
    Gf.yDown = !0;
    lb.tempPosition = Array(2);
    lb.radDeg = 180 / Math.PI;
    Ta.defaultPack = "ai";
    Ta._cache = new M;
    B.tweens = new Fa;
    B.DefaultTime = 0.4;
    B.DefaultEase = D.quintOut;
    Zc.bounceDownTemplate = [{ to: { y: "+=10" }, time: 0.05, ease: D.quintOut }, { then: { y: "+=0" }, time: 0.3, ease: D.backOut }];
    wb.DefaultMovePPS = 100;
    wb.DefaultMoveSpeed = 1;
    wb.DefaultMoveTime = 1;
    wb.DefaultMoveEase =
        D.quadInOut;
    fa.packName = "customization";
    fa.savePrefix = "customization_";
    fa._all = [];
    fa._byId = new M;
    fa._byType = new M;
    fa._byCode = new M;
    L.onTemplateAdded = new S;
    L.onActorData = new S;
    L._registeredComponents = new M;
    L._componentMap = new M;
    L._templateMap = new M;
    Xc.EDITOR_DEFAULTS = {};
    wh.DEFAULTS = { value: 0.1, knockBackX: 0, knockBackY: 0, cooldown: 0.3, charge: -1, enabled: !0, target: "DAMAGEABLE" };
    Ke.DefaultFont = "debug_font";
    Ke.DEFAULTS = { center: !0, shape: {}, text: "" };
    xh.EDITOR_EXCLUDE = ["key", "spawner"];
    Je.EDITOR_EXCLUDE = ["direction"];
    Je.EDITOR_METHODS = ["flip"];
    zh.EDITOR_EXCLUDE = ["forceUpdate", "initialized", "_parentViewMatrixUpdateCount", "_viewMatrixUpdateCount"];
    Ah.DEFAULTS = { layer: "default", offset: { x: 0, y: 0 }, color: 16711680, width: 100, height: 100, transparency: 0 };
    Bh.DEFAULTS = { pack: "", asset: "", layer: "default", offset: { x: 0, y: 0 }, overrides: {}, start: null, autoRemove: !1, delay: 0, loop: !0, fps: -1 };
    Kd.COMPONENT_NAME = "pattern";
    ob.DEFAULTS = { cullTexture: !0, drawTexture: !1 };
    ob.EDITOR_DEFAULTS = {
        pack: "",
        asset: "",
        layer: "default",
        grid: "default",
        offset: {
            x: 0,
            y: 0
        },
        xsize: 2,
        ysize: 2,
        tileWidth: 100,
        tileHeight: 100,
        mapping: [
            [4],
            [7],
            [1],
            [6],
            [1],
            [4],
            [0],
            [3],
            [1],
            [8],
            [4],
            [7],
            [2],
            [5],
            [1],
            [4]
        ],
        cornerMode: !1,
        cullTexture: !0,
        cache: !0
    };
    ob.tileCache = new M;
    ob.cache = new M;
    xb.DEFAULTS = ob.DEFAULTS;
    xb.EDITOR_DEFAULTS = { pack: "", asset: "", layer: "default", offset: { x: 0, y: 0 }, width: 200, height: 200, slices: [], template: [] };
    xb.cache = new M;
    Lc.USE_CACHE = !0;
    Lc.CACHE = new M;
    Mc.EDITOR_EXCLUDE = "_complexShape,initialized,forceUpdate,setTransform,enabled,velocity,impulse".split(",");
    Mc.defaultDamping =
        0;
    Mc.DEFAULT_SHAPE = { x: 0, y: 0, width: 0, height: 0, padding: { left: 0, top: 0, right: 0, bottom: 0 }, docking: { left: 0, top: 0, right: 0, bottom: 0 }, sensor: !1, material: null, fluid: null, points: [] };
    Mc.DEFAULTS = { shape: {}, offset: { x: 0, y: 0 }, contacts: !0, mass: 0, massScale: -1, bullet: !1, velocity: { x: 0, y: 0 }, impulse: { x: 0, y: 0 }, kinematic: !1, enabled: !0 };
    Dh.DEFAULTS = {};
    Eh.DEFAULTS = { left: !0, right: !0, top: !1, bottom: !0 };
    Fh.DEFAULTS = {};
    vg.defaultResistance = 2;
    me.SOUND_CHANNEL = "DAMAGE";
    me.SOUND_CHANNEL_DEATH = "DEATH";
    me.DEFAULTS = {
        maximum: 1,
        knock: 1,
        cooldown: 0,
        invincible: !1,
        disposeOwner: !1,
        removePhysics: !0,
        damageSound: "",
        invincibleSound: "",
        deathSound: ""
    };
    ff.DEFAULTS = { projectile: "", offset: { x: 0, y: 0 }, force: 100, angle: 0, launchSound: "", shotDelay: 1 };
    Gh.DEFAULTS = { projectile: "", projectiles: 5, offset: { x: 0, y: 0 }, force: 400, angle: -90, angleSpread: 50, launchSound: "", shotDelay: 0 };
    Hh.DEFAULTS = { removeAfter: 0, stopPhysicOnExplode: !1, velocityRotation: !1, explodeSound: "", hitSound: "", expire: 0, ignoreProjectiles: !0, target: "ANY_BODY" };
    Ih.DEFAULTS = {
        sequence: null,
        repeat: !1,
        speed: 1
    };
    Un.ComponentMap = function() {
        var a = new M;
        a.set("debug", Ke);
        a.set("template", xh);
        a.set("transform", Je);
        a.set("moveTransform", Qk);
        a.set("moveSequence", yh);
        a.set("cameraTarget", Mk);
        a.set("cameraTargetDirection", Nk);
        a.set("editorSelection", ug);
        a.set("display", J);
        a.set("image", zh);
        a.set("fill", Ah);
        a.set("animation", Xc);
        a.set("flump", Bh);
        a.set("pattern", Kd);
        a.set("tiler", ob);
        a.set("slicer", xb);
        a.set("text", Sk);
        a.set("scroller", yc);
        a.set("layerScroller", Tk);
        a.set("positionLock", Uk);
        a.set("skew", Kk);
        a.set("line", Lc);
        a.set("shadow", Vk);
        a.set("physics", Mc);
        a.set("physicsDebug", Ch);
        a.set("passthrough", Dh);
        a.set("passthroughable", Eh);
        a.set("frictioner", Fh);
        a.set("forceField", Xk);
        a.set("airFriction", vg);
        a.set("spawnPoint", bg);
        a.set("damage", wh);
        a.set("health", me);
        a.set("collector", we);
        a.set("collectable", rb);
        a.set("launcher", ff);
        a.set("exploder", Gh);
        a.set("projectile", Hh);
        a.set("checkpoint", Ok);
        a.set("checkpointer", Pk);
        a.set("platform", Ih);
        a.set("bouncer", Lk);
        a.set("mods", Lf);
        a.set("stats", hg);
        a.set("speedAdjuster",
            Vf);
        a.set("disposer", za);
        return a
    }(this);
    Yc.DEFAULT_FONT = "debug_font";
    Me.SMALL_STEP_MODIFIER = j.Shift;
    xg.COMPONENT_NAME = "editor_pattern_resizer";
    yg.COMPONENT_NAME = "editor_polygons";
    Pf.COMPONENT_NAME = "editor_remover";
    Zk.map = function() { var a = new M;
        a.set(xg.COMPONENT_NAME, xg);
        a.set(yg.COMPONENT_NAME, yg);
        a.set(Pf.COMPONENT_NAME, Pf); return a }(this);
    zc.spriteComponents = "image,fill,animation,flump,pattern,tiler,slicer,text,scroller,layerScroller,line,spine,tile_pattern".split(",");
    ba.isInEditor = -1;
    Hb.defaultComponentsRegistered = !1;
    h.internal = !1;
    h.id_ImmState_ACCEPT = 1;
    h.id_ImmState_IGNORE = 2;
    h.id_ImmState_ALWAYS = 4;
    h.id_GravMassMode_DEFAULT = 0;
    h.id_GravMassMode_FIXED = 1;
    h.id_GravMassMode_SCALED = 2;
    h.id_InertiaMode_DEFAULT = 0;
    h.id_MassMode_DEFAULT = 0;
    h.id_MassMode_FIXED = 1;
    h.id_BodyType_STATIC = 1;
    h.id_BodyType_DYNAMIC = 2;
    h.id_BodyType_KINEMATIC = 3;
    h.id_ListenerType_BODY = 0;
    h.id_ListenerType_CONSTRAINT = 1;
    h.id_ListenerType_INTERACTION = 2;
    h.id_PreFlag_ACCEPT = 1;
    h.id_ListenerType_PRE = 3;
    h.id_CbEvent_BEGIN = 0;
    h.id_CbEvent_ONGOING = 6;
    h.id_CbEvent_END =
        1;
    h.id_InteractionType_COLLISION = 1;
    h.id_CbEvent_WAKE = 2;
    h.id_InteractionType_SENSOR = 2;
    h.id_CbEvent_SLEEP = 3;
    h.id_InteractionType_FLUID = 4;
    h.id_CbEvent_BREAK = 4;
    h.id_InteractionType_ANY = 7;
    h.id_CbEvent_PRE = 5;
    h.id_ShapeType_CIRCLE = 0;
    h.id_ShapeType_POLYGON = 1;
    null == h.CbEvent_PRE && (h.internal = !0, h.CbEvent_PRE = new Jc, h.internal = !1);
    V.PRELISTENER = h.CbEvent_PRE;
    null == h.CbEvent_BEGIN && (h.internal = !0, h.CbEvent_BEGIN = new Jc, h.internal = !1);
    V.BEGIN = h.CbEvent_BEGIN;
    null == h.CbEvent_END && (h.internal = !0, h.CbEvent_END =
        new Jc, h.internal = !1);
    V.END = h.CbEvent_END;
    null == h.CbEvent_ONGOING && (h.internal = !0, h.CbEvent_ONGOING = new Jc, h.internal = !1);
    V.ONGOING = h.CbEvent_ONGOING;
    null == h.InteractionType_COLLISION && (h.internal = !0, h.InteractionType_COLLISION = new Ua, h.internal = !1);
    da.COLLISION = h.InteractionType_COLLISION;
    null == h.InteractionType_SENSOR && (h.internal = !0, h.InteractionType_SENSOR = new Ua, h.internal = !1);
    da.SENSOR = h.InteractionType_SENSOR;
    null == h.InteractionType_FLUID && (h.internal = !0, h.InteractionType_FLUID = new Ua, h.internal = !1);
    da.FLUID = h.InteractionType_FLUID;
    null == h.InteractionType_ANY && (h.internal = !0, h.InteractionType_ANY = new Ua, h.internal = !1);
    da.ANY = h.InteractionType_ANY;
    Ka.ANY_BODY = "ANY_BODY";
    Ka.DEFAULT = "DEFAULT";
    Ka.PLAYER = "PLAYER";
    Ka.FRICTIONER = "FRICTIONER";
    Ka.FLUID = "FLUID";
    Ka.LAUNCHER = "LAUNCHER";
    Ka.PROJECTILE = "PROJECTILE";
    Ka.COLLECTABLE = "COLLECTABLE";
    Ka.COLLECTOR = "COLLECTOR";
    Ka.ACTIVABLE = "ACTIVABLE";
    Ka.ACTIVATOR = "ACTIVATOR";
    Ka.PASSTHROUGH = "PASSTHROUGH";
    Ka.PASSTHROUGHABLE = "PASSTHROUGHABLE";
    Ka.CHECKPOINT = "CHECKPOINT";
    Ka.CHECKPOINTER = "CHECKPOINTER";
    Ka.TELEPORTER = "TELEPORTER";
    Ka.TELEPORTABLE = "TELEPORTABLE";
    Ka.DAMAGEABLE = "DAMAGEABLE";
    Ka.DAMAGER = "DAMAGER";
    Ka.DAMAGEABLE_MOB = "DAMAGEABLE_MOB";
    Ka.MOB = "MOB";
    Ka.OBSTACLE = "OBSTACLE";
    Ka.GROUND = "GROUND";
    Ka.WALL = "WALL";
    Ka.BOUNCER = "BOUNCER";
    bd._materialMap = new M;
    le.maxSize = 5184;
    Df.addedMethod = "onActorAdded";
    Ye.DEFAULT_OFFET_TIME = 1;
    Ye.DEFAULT_OFFET_EASING = D.quadInOut;
    zg.enabled = !1;
    E.onManifestInit = new Lb;
    E._cachedPacks = new M;
    E._replacedPacks = new M;
    E._protectedPacks = new M;
    E._loadingPacks =
        new M;
    E._loadingPacksDict = new Fa;
    E._jsonCache = new M;
    Ga.localesMap = new M;
    Ga.NOT_FOUND_PREFIX = "[(";
    Ga.NOT_FOUND_SUFFIX = ")]";
    N.CaseSensitive = !1;
    N.SkipChange = !1;
    N.onChange = new ga;
    N.onPop = new ga;
    N.onPush = new ga;
    N._sceneMap = new M;
    t.channels = new M;
    t.soundPollingMap = new M;
    t.soundPollingSeconds = 0.1;
    t.defaultVolume = 1;
    t.defaultMusicVolume = 1;
    t._volume = t.defaultVolume;
    t._unmuteVolume = t.defaultVolume;
    Pa.DefaultFileName = "{{name}}/{{name}}.json";
    Pa.DefaultManifest = "sprites";
    Pa._cachedSpritesheets = new M;
    Pa._loadingSpritesheets =
        new M;
    C.defaultFontName = "default";
    C.ChangePixelSnapping = !0;
    C._fontMap = new M;
    C._fontStylesMap = new M;
    id.DefaultFPS = 12;
    id.BaseIndex = 1;
    Ag.BaseIndex = id.BaseIndex;
    jg.DEFAULT_MAPPING = "Q,W,E,R,T,Y,U,I,O,P,A,S,D,F,G,H,J,K,L,Z,X,C,V,B,N,M".split(",");
    $a.DEFAULT_BUTTON_PARAMS = { button: {}, image: {}, text: { align: "center", fontStyle: "buttons" }, animation: { onDown: { props: { y: 6 }, params: { time: 0.05, ease: D.quintOut } }, onUp: { props: { y: 0 }, params: { time: 0.3, ease: D.backOut } } }, sound: { onUp: "click", onDown: "click" } };
    o.galaxyS2 = ["GT-I9100",
        "SCH-i929", "GT-I9105"
    ];
    o.galaxyS3 = "GT-I9300,GT-I9300I,GT-I9305,GT-I8190,GT-I8200,SGH-I747".split(",");
    o.galaxyS4 = "GT-I9500,GT-I9502,GT-I9505,GT-I9190,GT-I9195,SCH-I545,SPH-L720,SGH-M919,SGH-I337,SM-C101".split(",");
    o.galaxyTab2 = ["GT-P5110", "GT-P3110", "GT-P5100"];
    o.ie9 = ["MSIE 9"];
    o.ie10 = ["MSIE 10"];
    o.lowPerformanceDevices = [o.galaxyS2, o.galaxyS3, o.galaxyS4, o.galaxyTab2, o.ie9, o.ie10];
    o.lowMemoryDevices = [o.galaxyS2, o.galaxyS3, o.galaxyS4, o.galaxyTab2];
    o.lowPerformance = !1;
    o.lowMemory = !1;
    o.power = 80;
    o.ipadVersion =
        4;
    o.scale = 1;
    o.onScaleChange = new ga;
    A._spritesheets = new Fa;
    pa.DefaultMovePPS = 100;
    pa.DefaultMoveSpeed = 1;
    pa.DefaultMoveTime = 1;
    pa.DefaultMoveEase = D.quadInOut;
    Nc.hasInit = !1;
    w.sdkVersion = "Stolo Haxe v1.1.4";
    w.platforms = { web: { desktop: "NICKWEB_DESKTOP", desktop_flash: "NICKWEB_DESKTOP", mobile: "NICKWEB_MOBILE", tablet: "NICKWEB_TABLET" }, app: { android: "ANDROID_MOBILEAPP", ios: "IOS_MOBILEAPP" } };
    w.debug = !1;
    w.allowLiveKey = !0;
    w.useTimezoneOffset = !1;
    w.isLive = !1;
    w.isReady = !1;
    w.isNewPlayer = !1;
    w.userIDStorageField = "UserId";
    w.onReady = new ga;
    yb._Interactor = 0;
    yb._CbType = 0;
    yb._CbSet = 0;
    yb._Listener = 0;
    Hc.ANY_SHAPE = new Xe;
    Hc.ANY_BODY = new Xe;
    Hc.ANY_COMPOUND = new Xe;
    Hc.ANY_CONSTRAINT = new Xe;
    Jb.UCbSet = new Dg;
    Jb.VCbSet = new Dg;
    Jb.WCbSet = new Dg;
    Jb.UCbType = new zd;
    Jb.VCbType = new zd;
    Jb.WCbType = new zd;
    ha.internal = !1;
    ha.COL = 1;
    ha.FLUID = 4;
    ha.SENSOR = 2;
    Ub.internal = !1;
    Y.flowpoly = new Ph;
    Y.flowsegs = new Ph;
    Vb.internal = !1;
    var no;
    null == h.BodyType_STATIC && (h.internal = !0, h.BodyType_STATIC = new Gb, h.internal = !1);
    no = h.BodyType_STATIC;
    var oo;
    null == h.BodyType_DYNAMIC &&
        (h.internal = !0, h.BodyType_DYNAMIC = new Gb, h.internal = !1);
    oo = h.BodyType_DYNAMIC;
    null == h.BodyType_KINEMATIC && (h.internal = !0, h.BodyType_KINEMATIC = new Gb, h.internal = !1);
    Fe.types = [null, no, oo, h.BodyType_KINEMATIC];
    nb.internal = !1;
    Tc.tmpaabb = new Ya;
    De.internal = !1;
    Ge.internal = !1;
    sh.internal = !1;
    bf.internal = !1;
    $e.internal = !1;
    ee.internal = !1;
    qg.internal = !1;
    nh.internal = !1;
    pg.internal = !1;
    mh.internal = !1;
    th.internal = !1;
    df.internal = !1;
    lh.internal = !1;
    Ee.internal = !1;
    kh.internal = !1;
    Gd.main()
})();