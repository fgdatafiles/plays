var debugMode=false;var showResult=false;var currentWindowWidth,currentWindowHeight;var containerW,containerH;var mainContainerW,mainContainerH;var preText={};var isAction=false;var totalCard=12;var tempTotalCard=totalCard;var levelNum=1;var totalLevel=3;var selectedPiece=null;var selectedId=null;var soundObj=[];var soundFileCount=0;var isMute=false;$(function(){FastClick.attach(document.body);loadText();getWindowSize();setContainer();setSplash();$(window).resize(function(){getWindowSize();setContainer();setSplash();});preload();});function preload(){var image=[];var audio=[];var audioLoop=[];var loader=new PxLoader({noProgressTimeout:5000});var imageFile="data/preload-image.json";$.ajax({dataType:"json",url:imageFile,async:false,success:function(data){$.each(data.items,function(i,item){image.push(item.file);loader.addImage(item.file);});}});var audioFile="data/preload-audio.json";$.ajax({dataType:"json",url:audioFile,async:false,success:function(data){$.each(data.items,function(i,item){audio.push(item.file);audioLoop.push(item.loop);addSoundLog(soundFileCount,item.name);soundFileCount++;});}});loader.addCompletionListener(function(){var audioFilesLoadDone=false;if(audio.length>0){var tempLoad=new Howl({src:[audio[0]]});Howler.unload();}
for(var i=0;i<audio.length;i++){if((i+1)==audio.length){audioFilesLoadDone=true;}
var soundObjTemp=new Howl({src:[audio[i]],loop:audioLoop[i],onload:function(){if(audioFilesLoadDone){audioFilesLoadDone=false;preloadDone();}}});soundObj.push(soundObjTemp);}});loader.start();}
function preloadDone(){$('#loading-container').hide();$('#main-container').show();$('body').addClass('preload-done');main();}
function setSplash(){if(isPortrait()){$('#splash-container, #splash-audio, #splash-logo, #splash-button, #splash-title-block, #splash-legal-block, .ratings-text').addClass('portrait-bg');}else{$('#splash-container, #splash-audio, #splash-logo, #splash-button, #splash-title-block, #splash-legal-block, .ratings-text').removeClass('portrait-bg');}}
function getWindowSize(){currentWindowWidth=window.innerWidth?window.innerWidth:$(window).width();currentWindowHeight=window.innerHeight?window.innerHeight:$(window).height();}
function setContainer(){if(!containerW)
containerW=$('#main-container').attr('data-width');if(!containerH)
containerH=$('#main-container').attr('data-height');if(currentWindowWidth>currentWindowHeight){containerR=containerW/containerH;$('body').addClass('info-left');$('body').removeClass('info-top');$('#info-left-container').show();$('#info-top-container').hide();}
else{containerR=containerH/containerW;$('body').addClass('info-top');$('body').removeClass('info-left');$('#info-left-container').hide();$('#info-top-container').show();}
var newWidth=currentWindowHeight*containerR;if(newWidth>currentWindowWidth){var newWidth=currentWindowWidth;var newHeight=currentWindowWidth/containerR;if(newHeight>containerH){newWidth=containerH*containerR;;newHeight=containerH;}
$('#main-container').width(newWidth);$('#main-container').height(newHeight);mainContainerW=newWidth;mainContainerH=newHeight;var newTop=newHeight/2;$('#main-container').css('margin-top','-'+newTop+'px');$('#main-container').css('margin-left','-'+newWidth/2+'px');}else{var newWidth=currentWindowHeight*containerR;var newHeight=currentWindowHeight;if(newWidth>containerW){newWidth=containerW;newHeight=containerW/containerR;}
$('#main-container').width(newWidth);$('#main-container').height(newHeight);mainContainerW=newWidth;mainContainerH=newHeight;var newTop=newHeight/2;$('#main-container').css('margin-top','-'+newTop+'px');$('#main-container').css('margin-left','-'+newWidth/2+'px');}
$('body').height(currentWindowHeight);$('.calFontSize').each(function(){var variable=$(this).attr('data-variable');if(variable){$(this).html(preText[variable].text);if(preText[variable].left)
$(this).css("left",preText[variable].left);if(preText[variable].top)
$(this).css("top",preText[variable].top);var fontSize=preText[variable].size;}else{var fontSize=$(this).attr('data-fs');}
if(isPortrait())
var newFontSize=vhToPx(fontSize);else
var newFontSize=vwToPx(fontSize);$(this).css('font-size',newFontSize+'px');});}
function loadText(){$.ajax({dataType:"json",url:"data/text.json",async:false,success:function(data){$.each(data.items,function(i,item){var variable=item.variable;preText[variable]={"text":item.text,"size":item.font_size,"left":item.left,"top":item.top};});}});}
function isPortrait(){if($('body').hasClass('info-left')){return false;}else{return true;}}
function log(str){if(debugMode)
console.log(str);}
function vhToPx(vh){return Math.floor((vh*mainContainerH)/100);}
function vwToPx(vw){return(vw*mainContainerW)/100;}
function addSoundLog(count,name){$('body').append('<soundlookup id="sound-'+name+'" fileIndex="'+count+'"></soundlookup>');}
function playSound(name){var eleIdObj=$('#sound-'+name);if(eleIdObj.length>0){var fileIndex=eleIdObj.attr('fileIndex');soundObj[fileIndex].play();}}
function stopSound(name){var eleIdObj=$('#sound-'+name);if(eleIdObj.length>0){var fileIndex=eleIdObj.attr('fileIndex');soundObj[fileIndex].stop();}}
function muteAllSound(){isMute=true;Howler.mute(true);}
function unmuteAllSound(obj){isMute=false;Howler.mute(false);}
window.onfocus=function(){if(isMute!=true){Howler.mute(false);}};window.onblur=function(){if(isMute!=true){Howler.mute(true);}};function isMobile(){if($('body').hasClass("body-mobile"))
return true;else
return false;}
function main(){intro();$('#win-button, #game-win-text1').hide();$('.game-card').hide();TweenMax.set($('.game-card'),{rotationY:-90,rotationX:10,transformOrigin:"center center"});TweenMax.set($('#instructions-bg'),{scale:4,opacity:0});$('#splash-button').click(function(){if(isMobile()){playSound('music');}
playSound('playgame');$('#splash-container').hide();$('#main-info-game-container').show();runIntroCards();});$('.elastic-roll').hover(function(){if($(this).attr('data-roll-btn')=="audio")
playSound('audio-over');else
playSound('button-over');TweenMax.to($(this),0.5,{scale:1.1,ease:Elastic.easeOut});},function(){TweenMax.to($(this),0.5,{scale:1,ease:Elastic.easeOut});});$('.audio-roll').hover(function(){playSound('audio-over');if(!isMobile()){TweenMax.to($(this),0.5,{scale:1.1,ease:Elastic.easeOut});}},function(){TweenMax.to($(this),0.5,{scale:1,ease:Elastic.easeOut});});if(isMobile()){TweenMax.set($('.audio-btn'),{scale:"1.4"});}else{TweenMax.set($('.audio-btn'),{scale:"1"});}
$('.game-card-cover').hover(function(){if(!isAction){playSound('card-over');TweenMax.to($(this),0.5,{scale:0.95,ease:Elastic.easeOut});}},function(){if(!isAction){TweenMax.to($(this),0.5,{scale:1,ease:Elastic.easeOut});}});$('.game-card-cover').click(function(){if(!isAction){playSound('card-click');flip($(this));if(selectedPiece==null){var num=$(this).attr('data-card');var face=$('#level'+levelNum+'-card'+num).attr('data-face');selectedPiece=face;selectedId=num;if(showResult){$('.debug-result-'+face).addClass('active');}}else{isAction=true;isMatch($(this));$('.debug-result span').removeClass('active');}}});$('#win-button').click(function(){playSound('button-click');playSound('playgame');$('#game-bg-blank').removeClass('win-bg1');$('#game-bg-blank').removeClass('win-bg2');$('#game-bg-blank').removeClass('win-bg3');runIntroCards();});$('.audio-btn').click(function(){playSound('audio-click');if(isMute){$('.audio-btn').removeClass('off');unmuteAllSound(soundObj);}else{$('.audio-btn').addClass('off');muteAllSound();}});}
function intro(){if(!isMobile()){playSound('music');playSound('intro');}
if(!debugMode){var tl=new TimelineLite();tl.from($('#splash-container'),1,{opacity:0});tl.from($('#splash-logo'),1,{scale:0,ease:Expo.easeOut},"-=0.5");tl.from($('#splash-title-block'),1,{scale:0,ease:Expo.easeOut},"-=0.75");tl.from($('#splash-button'),1,{scale:0,ease:Elastic.easeOut},"-=0.5");}}
function flip(obj){playSound('card-click');TweenMax.to(obj,0.25,{rotationY:90,rotationX:10,scale:1,transformOrigin:"center center",onComplete:function(){var num=obj.attr('data-card');$('#level'+levelNum+'-card'+num).show();$('#level'+levelNum+'-card'+num).addClass('active');obj.hide();TweenMax.to($('#level'+levelNum+'-card'+num),0.25,{rotationY:0,rotationX:0,transformOrigin:"center center"});}});}
function flipback(){$('.game-card.active').each(function(){var obj=$(this)
TweenMax.to(obj,0.25,{rotationY:90,rotationX:10,transformOrigin:"center center",onComplete:function(){$('.game-card').removeClass('active');var num=obj.attr('data-card');obj.hide();$('#level'+levelNum+'-card'+num+'-cover').show();TweenMax.to($('#level'+levelNum+'-card'+num+'-cover'),0.25,{rotationY:0,rotationX:0,transformOrigin:"center center"});}});});}
function runIntroCards(){reset();for(var i=1;i<=totalLevel;i++){$('#game-bg-blank').removeClass('win-bg'+i);}
isAction=true;var tl=new TimelineLite();$('#card-level'+levelNum).show();if(levelNum==2){$('#card-level3').hide();$('#card-level1').hide();cardContainerId="card-level2";tl.from($('#'+cardContainerId+' #level'+levelNum+'-card1-cover'),1,{scale:0,ease:Elastic.easeOut});tl.from($('#'+cardContainerId+' #level'+levelNum+'-card2-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card3-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card4-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card5-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card6-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card7-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card8-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card9-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card10-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card11-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card12-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card13-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card14-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card15-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card16-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card17-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card18-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card19-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card20-cover'),1,{scale:0,ease:Elastic.easeOut,onComplete:function(){onRunIntroCardsComplete();}},"-=0.9");}else if(levelNum==3){$('#card-level2').hide();$('#card-level1').hide();cardContainerId="card-level3";tl.from($('#'+cardContainerId+' #level'+levelNum+'-card1-cover'),1,{scale:0,ease:Elastic.easeOut});tl.from($('#'+cardContainerId+' #level'+levelNum+'-card2-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card3-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card4-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card5-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card6-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card7-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card8-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card9-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card10-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card11-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card12-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card13-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card14-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card15-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card16-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card17-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card18-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card19-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card20-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card21-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card22-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card23-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card24-cover'),1,{scale:0,ease:Elastic.easeOut,onComplete:function(){onRunIntroCardsComplete();}},"-=0.9");}else{$('#card-level3').hide();$('#card-level2').hide();cardContainerId="card-level1";tl.from($('#'+cardContainerId+' #level'+levelNum+'-card1-cover'),1,{scale:0,ease:Elastic.easeOut});tl.from($('#'+cardContainerId+' #level'+levelNum+'-card2-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card3-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card4-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card5-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card6-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card7-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card8-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card9-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card10-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card11-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card12-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card13-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card14-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card15-cover'),1,{scale:0,ease:Elastic.easeOut},"-=0.9");tl.from($('#'+cardContainerId+' #level'+levelNum+'-card16-cover'),1,{scale:0,ease:Elastic.easeOut,onComplete:function(){onRunIntroCardsComplete();}},"-=0.9");}}
function onRunIntroCardsComplete(){$('#game-bg-blank').addClass('win-bg'+levelNum);if(levelNum>1){isAction=false;startLevel();}else{runInstructions();}}
function runInstructions(){TweenMax.to($("#instructions-bg"),0,{scale:0,opacity:1});$("#instructions-bg, #ins-hand, #ins-card1-cover, #ins-card2-cover").show();$("#ins-hand-click").hide();TweenMax.set($('#ins-card1-cover, #ins-card2-cover'),{rotationY:0,rotationX:0,transformOrigin:"center center"});TweenMax.set($('#ins-card1, #ins-card2'),{rotationY:-90,rotationX:10,transformOrigin:"center center"});TweenMax.set($('#hand'),{left:"72.7%",top:"34.8%",opacity:1});TweenMax.set($('#ins-check1, #ins-check2'),{opacity:0,scale:"1"});if(!debugMode){playSound('reveal-in');TweenMax.to($("#instructions-bg"),1,{scale:1,opacity:1,ease:Expo.easeOut,onComplete:function(){var tl=new TimelineLite();tl.to($('#hand'),1,{left:"61.9%",ease:Expo.easeInOut,onComplete:function(){fliphand("#ins-card2");}});tl.to($('#hand'),1,{left:"46.6%",ease:Expo.easeInOut,onComplete:function(){fliphand("#ins-card1");}},"+=0.5");tl.to($('#hand'),1,{top:"51.6%",opacity:0,ease:Expo.easeInOut},"+=0.5");tl.to($('#ins-check1, #ins-check2'),0.15,{opacity:1},"-=0.5");tl.to($('#ins-check1, #ins-check2'),1,{scale:"2",opacity:0,ease:Expo.easeOut,onStart:function(){playSound('reveal-out');}});tl.to($('#instructions-bg'),1,{scale:0,opacity:0,ease:Expo.easeOut,onStart:function(){playSound('reveal-in');}});startLevel();isAction=false;}});}else{TweenMax.to($("#instructions-bg"),0,{delay:0,scale:0,opacity:0,ease:Expo.easeIn});startLevel();isAction=false;}}
function fliphand(obj){playSound('card-click');$("#ins-hand-click").show();$("#ins-hand").hide();TweenMax.to($("#hand"),0,{delay:0.25,onComplete:function(){$("#ins-hand-click").hide();$("#ins-hand").show();}});TweenMax.to($(obj+'-cover'),0.25,{rotationY:90,rotationX:10,transformOrigin:"center center",onComplete:function(){$(obj).show();$(obj+'-cover').hide();TweenMax.to($(obj),0.25,{rotationY:0,rotationX:0,transformOrigin:"center center"});}});}
function playWinScreen(){var tl=new TimelineLite();tl.from($('#game-win-text1'),2,{scale:0.5,top:"100%",ease:Expo.easeOut});tl.from($('#win-button'),1,{scale:0,ease:Elastic.easeOut},"-=0.5");}
function startLevel(){var numOfCard=12;var cardContainerId="card-level3";if(levelNum==2){numOfCard=10;cardContainerId="card-level2";}else if(levelNum==3){numOfCard=12;cardContainerId="card-level3";}else{numOfCard=8;cardContainerId="card-level1";}
totalCard=numOfCard;tempTotalCard=totalCard;var gameTiles=new Array();for(i=1;i<numOfCard+1;i++){gameTiles.push(i);gameTiles.push(i);}
$.shuffle(gameTiles);var index=gameTiles.length-1;$('.game-card').removeClass('easy');$('.game-card').removeClass('medium');$('#'+cardContainerId+' .game-card').each(function(){for(var i=1;i<=numOfCard;i++){$(this).removeClass('game-card-face-'+i);}
if(index>=0){var tile=gameTiles[index];index--;$(this).addClass('game-card-face-'+tile);$(this).attr('data-face',tile);if(debugMode||showResult){$('body').prepend('<div class="debug-result" style="position:relative;top:0px;left:0px;"><span class="debug-result-'+tile+'">'+$(this).attr('id')+" = "+tile+'</span></div>');}}});}
function nextLevel(){win(levelNum);playSound('win'+levelNum);if(levelNum<totalLevel){levelNum++;}else{levelNum=1;}}
function win(level){$('#win-button, #game-win-text1').show();$('#splash-container, #instructions-bg, #card-container').hide();$('#main-info-game-container').show();if(level==1){$('#game-bg-blank').addClass('win-bg1');playWinScreen();}else if(level==2){$('#game-bg-blank').addClass('win-bg2');$('#win-text1').attr('data-variable','win2_text1');setContainer();playWinScreen();}else if(level==3){$('#game-bg-blank').addClass('win-bg3');$('#win-text1').attr('data-variable','win3_text1');$('#win-button-text').attr('data-variable','playagain_text');setContainer();playWinScreen();}}
function reset(){tempTotalCard=totalCard;selectedPiece=null;selectedId=null;$('.game-card-cover').show();TweenMax.to($('.game-card'),0,{rotationY:90,rotationX:10,transformOrigin:"center center"});TweenMax.to($('.game-card-cover'),0,{rotationY:0,rotationX:0,transformOrigin:"center center"});$('.game-card').removeClass('active');$('#win-button, #game-win-text1').hide();$('#card-container').show();$('#main-info-game-container').show();$('.debug-result').remove();}
function isMatch(obj){var num=obj.attr('data-card');var face=$('#level'+levelNum+'-card'+num).attr('data-face');if(selectedPiece==face&&selectedId!=num){playSound('correct');setTimeout(function(){var count=0;$('.game-card.active').fadeOut(function(){if(count>=1){selectedPiece=null;selectedId=null;isAction=false;tempTotalCard--;$('.game-card').removeClass('active');if(tempTotalCard<=0){nextLevel();}}
count++;});},1000);}else{playSound('incorrect');setTimeout(function(){selectedPiece=null;selectedId=null;flipback();isAction=false;},1000);}}
function isMobile(){var check=false;(function(a,b){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true})(navigator.userAgent||navigator.vendor||window.opera);return check;}
(function($){$.fn.shuffle=function(){return this.each(function(){var items=$(this).children().clone(true);return(items.length)?$(this).html($.shuffle(items)):this;});}
$.shuffle=function(arr){for(var j,x,i=arr.length;i;j=parseInt(Math.random()*i),x=arr[--i],arr[i]=arr[j],arr[j]=x);return arr;}})(jQuery);