!function(n){var i={};function __webpack_require__(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,__webpack_require__),t.l=!0,t.exports}__webpack_require__.m=n,__webpack_require__.c=i,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)__webpack_require__.d(n,i,function(e){return t[e]}.bind(null,i));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=3)}([function(n,i,e){(function(e){var t;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 *  howler.js v2.1.3
 *  howlerjs.com
 *
 *  (c) 2013-2019, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
!function(){"use strict";function Aa(){this.init()}Aa.prototype={init:function init(){var e=this||d;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function volume(e){var t=this||d;if(e=parseFloat(e),t.ctx||p(),void 0!==e&&0<=e&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,d.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var i=t._howls[n]._getSoundIds(),r=0;r<i.length;r++){var o=t._howls[n]._soundById(i[r]);o&&o._node&&(o._node.volume=o._volume*e)}return t}return t._volume},mute:function mute(e){var t=this||d;t.ctx||p(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,d.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var i=t._howls[n]._getSoundIds(),r=0;r<i.length;r++){var o=t._howls[n]._soundById(i[r]);o&&o._node&&(o._node.muted=!!e||o._muted)}return t},unload:function unload(){for(var e=this||d,t=e._howls.length-1;0<=t;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,p()),e},codecs:function codecs(e){return(this||d)._codecs[e.replace(/^x-/,"")]},_setup:function _setup(){var t=this||d;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(e){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function _setupCodecs(){var t=this||d,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),i=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),r=i&&parseInt(i[0].split("/")[1],10)<33;return t._codecs={mp3:!(r||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function _unlockAudio(){var s=this||d;if(!s._audioUnlocked&&s.ctx){s._audioUnlocked=!1,s.autoUnlock=!1,s._mobileUnloaded||44100===s.ctx.sampleRate||(s._mobileUnloaded=!0,s.unload()),s._scratchBuffer=s.ctx.createBuffer(1,1,22050);var e=function unlock(e){for(var t=0;t<s.html5PoolSize;t++)try{var n=new Audio;n._unlocked=!0,s._releaseHtml5Audio(n)}catch(e){s.noAudio=!0}for(t=0;t<s._howls.length;t++)if(!s._howls[t]._webAudio)for(var i=s._howls[t]._getSoundIds(),r=0;r<i.length;r++){var o=s._howls[t]._soundById(i[r]);o&&o._node&&!o._node._unlocked&&(o._node._unlocked=!0,o._node.load())}s._autoResume();var a=s.ctx.createBufferSource();a.buffer=s._scratchBuffer,a.connect(s.ctx.destination),void 0===a.start?a.noteOn(0):a.start(0),"function"==typeof s.ctx.resume&&s.ctx.resume(),a.onended=function(){a.disconnect(0),s._audioUnlocked=!0,document.removeEventListener("touchstart",unlock,!0),document.removeEventListener("touchend",unlock,!0),document.removeEventListener("click",unlock,!0);for(var e=0;e<s._howls.length;e++)s._howls[e]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),s}},_obtainHtml5Audio:function _obtainHtml5Audio(){var e=this||d;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function _releaseHtml5Audio(e){var t=this||d;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function _autoSuspend(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&d.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function _autoResume(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&d.usingWebAudio)return"running"===t.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state?(t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};function Ca(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")}var d=new Aa;Ca.prototype={init:function init(e){var t=this;return d.ctx||p(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhrWithCredentials=e.xhrWithCredentials||!1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=d.usingWebAudio&&!t._html5,void 0!==d.ctx&&d.ctx&&d.autoUnlock&&d._unlockAudio(),d._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function action(){t.play()}}),t._preload&&t.load(),t},load:function load(){var e=this,t=null;if(d.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var i,r;if(e._format&&e._format[n])i=e._format[n];else{if("string"!=typeof(r=e._src[n])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}i=(i=(i=/^data:audio\/([^;,]+);/i.exec(r))||/\.([^.]+)$/.exec(r.split("?",1)[0]))&&i[1].toLowerCase()}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&d.codecs(i)){t=e._src[n];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new o(e),e._webAudio&&s(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function play(t,n){var i=this,e=null;if("number"==typeof t)e=t,t=null;else{if("string"==typeof t&&"loaded"===i._state&&!i._sprite[t])return null;if(void 0===t&&(t="__default",!i._playLock)){for(var r=0,o=0;o<i._sounds.length;o++)i._sounds[o]._paused&&!i._sounds[o]._ended&&(r++,e=i._sounds[o]._id);1===r?t=null:e=null}}var a=e?i._soundById(e):i._inactiveSound();if(!a)return null;if(e&&!t&&(t=a._sprite||"__default"),"loaded"!==i._state){a._sprite=t,a._ended=!1;var s=a._id;return i._queue.push({event:"play",action:function action(){i.play(s)}}),s}if(e&&!a._paused)return n||i._loadQueue("play"),a._id;i._webAudio&&d._autoResume();var l=Math.max(0,0<a._seek?a._seek:i._sprite[t][0]/1e3),c=Math.max(0,(i._sprite[t][0]+i._sprite[t][1])/1e3-l),u=1e3*c/Math.abs(a._rate),p=i._sprite[t][0]/1e3,f=(i._sprite[t][0]+i._sprite[t][1])/1e3;a._sprite=t,a._ended=!1;function _b(){a._paused=!1,a._seek=l,a._start=p,a._stop=f,a._loop=!(!a._loop&&!i._sprite[t][2])}if(!(f<=l)){var h=a._node;if(i._webAudio){var m=function playWebAudio(){i._playLock=!1,_b(),i._refreshBuffer(a);var e=a._muted||i._muted?0:a._volume;h.gain.setValueAtTime(e,d.ctx.currentTime),a._playStart=d.ctx.currentTime,void 0===h.bufferSource.start?a._loop?h.bufferSource.noteGrainOn(0,l,86400):h.bufferSource.noteGrainOn(0,l,c):a._loop?h.bufferSource.start(0,l,86400):h.bufferSource.start(0,l,c),u!=1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),u)),n||setTimeout(function(){i._emit("play",a._id),i._loadQueue()},0)};"running"===d.state?m():(i._playLock=!0,i.once("resume",m),i._clearTimer(a._id))}else{var y=function playHtml5(){h.currentTime=l,h.muted=a._muted||i._muted||d._muted||h.muted,h.volume=a._volume*d.volume(),h.playbackRate=a._rate;try{var e=h.play();if(e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)?(i._playLock=!0,_b(),e.then(function(){i._playLock=!1,h._unlocked=!0,n||(i._emit("play",a._id),i._loadQueue())}).catch(function(){i._playLock=!1,i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0})):n||(i._playLock=!1,_b(),i._emit("play",a._id),i._loadQueue()),h.playbackRate=a._rate,h.paused)return void i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||a._loop?i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),u):(i._endTimers[a._id]=function(){i._ended(a),h.removeEventListener("ended",i._endTimers[a._id],!1)},h.addEventListener("ended",i._endTimers[a._id],!1))}catch(e){i._emit("playerror",a._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===h.src&&(h.src=i._src,h.load());var g=window&&window.ejecta||!h.readyState&&d._navigator.isCocoonJS;if(3<=h.readyState||g)y();else{i._playLock=!0;h.addEventListener(d._canPlayEvent,function listener(){y(),h.removeEventListener(d._canPlayEvent,listener,!1)},!1),i._clearTimer(a._id)}}return a._id}i._ended(a)},pause:function pause(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"pause",action:function action(){n.pause(e)}}),n;for(var i=n._getSoundIds(e),r=0;r<i.length;r++){n._clearTimer(i[r]);var o=n._soundById(i[r]);if(o&&!o._paused&&(o._seek=n.seek(i[r]),o._rateSeek=0,o._paused=!0,n._stopFade(i[r]),o._node))if(n._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();t||n._emit("pause",o?o._id:null)}return n},stop:function stop(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function action(){n.stop(e)}}),n;for(var i=n._getSoundIds(e),r=0;r<i.length;r++){n._clearTimer(i[r]);var o=n._soundById(i[r]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(i[r]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),t||n._emit("stop",o._id))}return n},mute:function mute(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function action(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var i=n._getSoundIds(t),r=0;r<i.length;r++){var o=n._soundById(i[r]);o&&(o._muted=e,o._interval&&n._stopFade(o._id),n._webAudio&&o._node?o._node.gain.setValueAtTime(e?0:o._volume,d.ctx.currentTime):o._node&&(o._node.muted=!!d._muted||e),n._emit("mute",o._id))}return n},volume:function volume(){var e,t,n,i=this,r=arguments;if(0===r.length)return i._volume;if(1===r.length||2===r.length&&void 0===r[1]?0<=i._getSoundIds().indexOf(r[0])?t=parseInt(r[0],10):e=parseFloat(r[0]):2<=r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10)),!(void 0!==e&&0<=e&&e<=1))return(n=t?i._soundById(t):i._sounds[0])?n._volume:0;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"volume",action:function action(){i.volume.apply(i,r)}}),i;void 0===t&&(i._volume=e),t=i._getSoundIds(t);for(var o=0;o<t.length;o++)(n=i._soundById(t[o]))&&(n._volume=e,r[2]||i._stopFade(t[o]),i._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,d.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*d.volume()),i._emit("volume",n._id));return i},fade:function fade(e,t,n,i){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function action(){r.fade(e,t,n,i)}}),r;e=parseFloat(e),t=parseFloat(t),n=parseFloat(n),r.volume(e,i);for(var o=r._getSoundIds(i),a=0;a<o.length;a++){var s=r._soundById(o[a]);if(s){if(i||r._stopFade(o[a]),r._webAudio&&!s._muted){var l=d.ctx.currentTime,c=l+n/1e3;s._volume=e,s._node.gain.setValueAtTime(e,l),s._node.gain.linearRampToValueAtTime(t,c)}r._startFadeInterval(s,e,t,n,o[a],void 0===i)}}return r},_startFadeInterval:function _startFadeInterval(t,n,i,r,e,o){var a=this,s=n,l=i-n,c=Math.abs(l/.01),u=Math.max(4,0<c?r/c:r),p=Date.now();t._fadeTo=i,t._interval=setInterval(function(){var e=(Date.now()-p)/r;p=Date.now(),s+=l*e,s=Math.max(0,s),s=Math.min(1,s),s=Math.round(100*s)/100,a._webAudio?t._volume=s:a.volume(s,t._id,!0),o&&(a._volume=s),(i<n&&s<=i||n<i&&i<=s)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,a.volume(i,t._id),a._emit("fade",t._id))},u)},_stopFade:function _stopFade(e){var t=this,n=t._soundById(e);return n&&n._interval&&(t._webAudio&&n._node.gain.cancelScheduledValues(d.ctx.currentTime),clearInterval(n._interval),n._interval=null,t.volume(n._fadeTo,e),n._fadeTo=null,t._emit("fade",e)),t},loop:function loop(){var loop,e,t,n=this,i=arguments;if(0===i.length)return n._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(t=n._soundById(parseInt(i[0],10)))&&t._loop;loop=i[0],n._loop=loop}else 2===i.length&&(loop=i[0],e=parseInt(i[1],10));for(var r=n._getSoundIds(e),o=0;o<r.length;o++)(t=n._soundById(r[o]))&&(t._loop=loop,n._webAudio&&t._node&&t._node.bufferSource&&(t._node.bufferSource.loop=loop)&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop));return n},rate:function rate(){var rate,e,t,n=this,i=arguments;if(0===i.length)e=n._sounds[0]._id;else if(1===i.length){0<=n._getSoundIds().indexOf(i[0])?e=parseInt(i[0],10):rate=parseFloat(i[0])}else 2===i.length&&(rate=parseFloat(i[0]),e=parseInt(i[1],10));if("number"!=typeof rate)return(t=n._soundById(e))?t._rate:n._rate;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"rate",action:function action(){n.rate.apply(n,i)}}),n;void 0===e&&(n._rate=rate),e=n._getSoundIds(e);for(var r=0;r<e.length;r++)if(t=n._soundById(e[r])){n.playing(e[r])&&(t._rateSeek=n.seek(e[r]),t._playStart=n._webAudio?d.ctx.currentTime:t._playStart),t._rate=rate,n._webAudio&&t._node&&t._node.bufferSource?t._node.bufferSource.playbackRate.setValueAtTime(rate,d.ctx.currentTime):t._node&&(t._node.playbackRate=rate);var o=n.seek(e[r]),a=1e3*((n._sprite[t._sprite][0]+n._sprite[t._sprite][1])/1e3-o)/Math.abs(t._rate);!n._endTimers[e[r]]&&t._paused||(n._clearTimer(e[r]),n._endTimers[e[r]]=setTimeout(n._ended.bind(n,t),a)),n._emit("rate",t._id)}return n},seek:function seek(){var seek,e,t=this,n=arguments;if(0===n.length)e=t._sounds[0]._id;else if(1===n.length){0<=t._getSoundIds().indexOf(n[0])?e=parseInt(n[0],10):t._sounds.length&&(e=t._sounds[0]._id,seek=parseFloat(n[0]))}else 2===n.length&&(seek=parseFloat(n[0]),e=parseInt(n[1],10));if(void 0===e)return t;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"seek",action:function action(){t.seek.apply(t,n)}}),t;var i=t._soundById(e);if(i){if(!("number"==typeof seek&&0<=seek)){if(t._webAudio){var r=t.playing(e)?d.ctx.currentTime-i._playStart:0,o=i._rateSeek?i._rateSeek-i._seek:0;return i._seek+(o+r*Math.abs(i._rate))}return i._node.currentTime}var a=t.playing(e);a&&t.pause(e,!0),i._seek=seek,i._ended=!1,t._clearTimer(e),t._webAudio||!i._node||isNaN(i._node.duration)||(i._node.currentTime=seek);var s=function seekAndEmit(){t._emit("seek",e),a&&t.play(e,!0)};if(a&&!t._webAudio){setTimeout(function emitSeek(){t._playLock?setTimeout(emitSeek,0):s()},0)}else s()}return t},playing:function playing(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function duration(e){var duration=this._duration,t=this._soundById(e);return t&&(duration=this._sprite[t._sprite][1]/1e3),duration},state:function state(){return this._state},unload:function unload(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(d._canPlayEvent,t[n]._loadFn,!1),d._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var i=d._howls.indexOf(e);0<=i&&d._howls.splice(i,1);var r=!0;for(n=0;n<d._howls.length;n++)if(d._howls[n]._src===e._src||0<=e._src.indexOf(d._howls[n]._src)){r=!1;break}return a&&r&&delete a[e._src],d.noAudio=!1,e._state="unloaded",e._sounds=[],e=null},on:function on(e,t,n,i){var r=this["_on"+e];return"function"==typeof t&&r.push(i?{id:n,fn:t,once:i}:{id:n,fn:t}),this},off:function off(e,t,n){var i=this,r=i["_on"+e],o=0;if("number"==typeof t&&(n=t,t=null),t||n)for(o=0;o<r.length;o++){var a=n===r[o].id;if(t===r[o].fn&&a||!t&&a){r.splice(o,1);break}}else if(e)i["_on"+e]=[];else{var s=Object.keys(i);for(o=0;o<s.length;o++)0===s[o].indexOf("_on")&&Array.isArray(i[s[o]])&&(i[s[o]]=[])}return i},once:function once(e,t,n){return this.on(e,t,n,1),this},_emit:function _emit(e,t,n){for(var i=this,r=i["_on"+e],o=r.length-1;0<=o;o--)r[o].id&&r[o].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(i,r[o].fn),0),r[o].once&&i.off(e,r[o].fn,r[o].id));return i._loadQueue(e),i},_loadQueue:function _loadQueue(e){var t=this;if(0<t._queue.length){var n=t._queue[0];n.event===e&&(t._queue.shift(),t._loadQueue()),e||n.action()}return t},_ended:function _ended(e){var t=this,n=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var i=!(!e._loop&&!t._sprite[n][2]);if(t._emit("end",e._id),!t._webAudio&&i&&t.stop(e._id,!0).play(e._id),t._webAudio&&i){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=d.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),r)}return t._webAudio&&!i&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),d._autoSuspend()),t._webAudio||i||t.stop(e._id,!0),t},_clearTimer:function _clearTimer(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function _soundById(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function _inactiveSound(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new o(e)},_drain:function _drain(){var e=this,t=e._pool,n=0,i=0;if(!(e._sounds.length<t)){for(i=0;i<e._sounds.length;i++)e._sounds[i]._ended&&n++;for(i=e._sounds.length-1;0<=i;i--){if(n<=t)return;e._sounds[i]._ended&&(e._webAudio&&e._sounds[i]._node&&e._sounds[i]._node.disconnect(0),e._sounds.splice(i,1),n--)}}},_getSoundIds:function _getSoundIds(e){if(void 0!==e)return[e];for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t},_refreshBuffer:function _refreshBuffer(e){return e._node.bufferSource=d.ctx.createBufferSource(),e._node.bufferSource.buffer=a[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,d.ctx.currentTime),this},_cleanBuffer:function _cleanBuffer(e){var t=d._navigator&&0<=d._navigator.vendor.indexOf("Apple");if(d._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=d._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function _clearSound(e){/MSIE |Trident\//.test(d._navigator&&d._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function Sound(e){this._parent=e,this.init()};o.prototype={init:function init(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++d._counter,t._sounds.push(e),e.create(),e},create:function create(){var e=this,t=e._parent,n=d._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===d.ctx.createGain?d.ctx.createGainNode():d.ctx.createGain(),e._node.gain.setValueAtTime(n,d.ctx.currentTime),e._node.paused=!0,e._node.connect(d.masterGain)):d.noAudio||(e._node=d._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(d._canPlayEvent,e._loadFn,!1),e._node.src=t._src,e._node.preload="auto",e._node.volume=n*d.volume(),e._node.load()),e},reset:function reset(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++d._counter,e},_errorListener:function _errorListener(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function _loadListener(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(d._canPlayEvent,this._loadFn,!1)}};var a={},s=function loadBuffer(t){var e=t._src;if(a[e])return t._duration=a[e].duration,void u(t);if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);c(i.buffer,t)}else{var o=new XMLHttpRequest;o.open("GET",e,!0),o.withCredentials=t._xhrWithCredentials,o.responseType="arraybuffer",o.onload=function(){var e=(o.status+"")[0];"0"===e||"2"===e||"3"===e?c(o.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete a[e],t.load())},l(o)}},l=function safeXhrSend(t){try{t.send()}catch(e){t.onerror()}},c=function decodeAudioData(e,t){function qf(){t._emit("loaderror",null,"Decoding audio data failed.")}function rf(e){e&&0<t._sounds.length?(a[t._src]=e,u(t,e)):qf()}"undefined"!=typeof Promise&&1===d.ctx.decodeAudioData.length?d.ctx.decodeAudioData(e).then(rf).catch(qf):d.ctx.decodeAudioData(e,rf,qf)},u=function loadSound(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},p=function setupAudioContext(){if(d.usingWebAudio){try{"undefined"!=typeof AudioContext?d.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?d.ctx=new webkitAudioContext:d.usingWebAudio=!1}catch(e){d.usingWebAudio=!1}d.ctx||(d.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(d._navigator&&d._navigator.platform),t=d._navigator&&d._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var i=/safari/.test(d._navigator&&d._navigator.userAgent.toLowerCase());(d._navigator&&d._navigator.standalone&&!i||d._navigator&&!d._navigator.standalone&&!i)&&(d.usingWebAudio=!1)}d.usingWebAudio&&(d.masterGain=void 0===d.ctx.createGain?d.ctx.createGainNode():d.ctx.createGain(),d.masterGain.gain.setValueAtTime(d._muted?0:d._volume,d.ctx.currentTime),d.masterGain.connect(d.ctx.destination)),d._setup()}};void 0===(t=function(){return{Howler:d,Howl:Ca}}.apply(i,[]))||(n.exports=t),i.Howler=d,i.Howl=Ca,"undefined"!=typeof window?(window.HowlerGlobal=Aa,window.Howler=d,window.Howl=Ca,window.Sound=o):void 0!==e&&(e.HowlerGlobal=Aa,e.Howler=d,e.Howl=Ca,e.Sound=o)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.1.3
 *  howlerjs.com
 *
 *  (c) 2013-2019, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var n,i,r;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;0<=n;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var i=this;return i.ctx&&i.ctx.listener?(t="number"!=typeof t?i._pos[1]:t,n="number"!=typeof n?i._pos[2]:n,"number"!=typeof e?i._pos:(i._pos=[e,t,n],void 0!==i.ctx.listener.positionX?(i.ctx.listener.positionX.setTargetAtTime(i._pos[0],Howler.ctx.currentTime,.1),i.ctx.listener.positionY.setTargetAtTime(i._pos[1],Howler.ctx.currentTime,.1),i.ctx.listener.positionZ.setTargetAtTime(i._pos[2],Howler.ctx.currentTime,.1)):i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]),i)):i},HowlerGlobal.prototype.orientation=function(e,t,n,i,r,o){var a=this;if(!a.ctx||!a.ctx.listener)return a;var s=a._orientation;return t="number"!=typeof t?s[1]:t,n="number"!=typeof n?s[2]:n,i="number"!=typeof i?s[3]:i,r="number"!=typeof r?s[4]:r,o="number"!=typeof o?s[5]:o,"number"!=typeof e?s:(a._orientation=[e,t,n,i,r,o],void 0!==a.ctx.listener.forwardX?(a.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(i,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(e,t,n,i,r,o),a)},Howl.prototype.init=(n=Howl.prototype.init,function(e){var t=this;return t._orientation=e.orientation||[1,0,0],t._stereo=e.stereo||null,t._pos=e.pos||null,t._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},t._onstereo=e.onstereo?[{fn:e.onstereo}]:[],t._onpos=e.onpos?[{fn:e.onpos}]:[],t._onorientation=e.onorientation?[{fn:e.onorientation}]:[],n.call(this,e)}),Howl.prototype.stereo=function(e,t){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function action(){n.stereo(e,t)}}),n;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===t){if("number"!=typeof e)return n._stereo;n._stereo=e,n._pos=[e,0,0]}for(var r=n._getSoundIds(t),o=0;o<r.length;o++){var a=n._soundById(r[o]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||c(a,i),"spatial"==i?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(e,0,0):a._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),n._emit("stereo",a._id)}}return n},Howl.prototype.pos=function(e,t,n,i){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function action(){r.pos(e,t,n,i)}}),r;if(t="number"!=typeof t?0:t,n="number"!=typeof n?-.5:n,void 0===i){if("number"!=typeof e)return r._pos;r._pos=[e,t,n]}for(var o=r._getSoundIds(i),a=0;a<o.length;a++){var s=r._soundById(o[a]);if(s){if("number"!=typeof e)return s._pos;s._pos=[e,t,n],s._node&&(s._panner&&!s._panner.pan||c(s,"spatial"),void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):s._panner.setPosition(e,t,n)),r._emit("pos",s._id)}}return r},Howl.prototype.orientation=function(e,t,n,i){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function action(){r.orientation(e,t,n,i)}}),r;if(t="number"!=typeof t?r._orientation[1]:t,n="number"!=typeof n?r._orientation[2]:n,void 0===i){if("number"!=typeof e)return r._orientation;r._orientation=[e,t,n]}for(var o=r._getSoundIds(i),a=0;a<o.length;a++){var s=r._soundById(o[a]);if(s){if("number"!=typeof e)return s._orientation;s._orientation=[e,t,n],s._node&&(s._panner||(s._pos||(s._pos=r._pos||[0,0,-.5]),c(s,"spatial")),void 0!==s._panner.orientationX?(s._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.orientationY.setValueAtTime(t,Howler.ctx.currentTime),s._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):s._panner.setOrientation(e,t,n)),r._emit("orientation",s._id)}}return r},Howl.prototype.pannerAttr=function(){var e,t,n,i=this,r=arguments;if(!i._webAudio)return i;if(0===r.length)return i._pannerAttr;if(1===r.length){if("object"!==_typeof(r[0]))return(n=i._soundById(parseInt(r[0],10)))?n._pannerAttr:i._pannerAttr;e=r[0],void 0===t&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),i._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:i._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:i._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:i._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:i._panningModel})}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var o=i._getSoundIds(t),a=0;a<o.length;a++)if(n=i._soundById(o[a])){var s=n._pannerAttr;s={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:s.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:s.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:s.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:s.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:s.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:s.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:s.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:s.panningModel};var l=n._panner;l?(l.coneInnerAngle=s.coneInnerAngle,l.coneOuterAngle=s.coneOuterAngle,l.coneOuterGain=s.coneOuterGain,l.distanceModel=s.distanceModel,l.maxDistance=s.maxDistance,l.refDistance=s.refDistance,l.rolloffFactor=s.rolloffFactor,l.panningModel=s.panningModel):(n._pos||(n._pos=i._pos||[0,0,-.5]),c(n,"spatial"))}return i},Sound.prototype.init=(i=Sound.prototype.init,function(){var e=this,t=e._parent;e._orientation=t._orientation,e._stereo=t._stereo,e._pos=t._pos,e._pannerAttr=t._pannerAttr,i.call(this),e._stereo?t.stereo(e._stereo):e._pos&&t.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}),Sound.prototype.reset=(r=Sound.prototype.reset,function(){var e=this,t=e._parent;return e._orientation=t._orientation,e._stereo=t._stereo,e._pos=t._pos,e._pannerAttr=t._pannerAttr,e._stereo?t.stereo(e._stereo):e._pos?t.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,t._refreshBuffer(e)),r.call(this)});var c=function setupPanner(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this,e(2))},function(o,c,k){var x;!function(){function aa(e,t,n){return e.call.apply(e.bind,arguments)}function ba(t,n,e){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,i),t.apply(n,e)}}return function(){return t.apply(n,arguments)}}function p(e,t,n){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aa:ba).apply(null,arguments)}var a=Date.now||function(){return+new Date};function ca(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var s=!!window.FontFace;function t(e,t,n,i){if(t=e.c.createElement(t),n)for(var r in n)n.hasOwnProperty(r)&&("style"==r?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i&&t.appendChild(e.c.createTextNode(i)),t}function u(e,t,n){(e=(e=e.c.getElementsByTagName(t)[0])||document.documentElement).insertBefore(n,e.lastChild)}function v(e){e.parentNode&&e.parentNode.removeChild(e)}function w(e,t,n){t=t||[],n=n||[];for(var i=e.className.split(/\s+/),r=0;r<t.length;r+=1){for(var o=!1,a=0;a<i.length;a+=1)if(t[r]===i[a]){o=!0;break}o||i.push(t[r])}for(t=[],r=0;r<i.length;r+=1){for(o=!1,a=0;a<n.length;a+=1)if(i[r]===n[a]){o=!0;break}o||t.push(i[r])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function y(e,t){for(var n=e.className.split(/\s+/),i=0,r=n.length;i<r;i++)if(n[i]==t)return!0;return!1}function z(e,n,i){function d(){a&&r&&(a(o),a=null)}n=t(e,"link",{rel:"stylesheet",href:n,media:"all"});var r=!1,o=null,a=i||null;s?(n.onload=function(){r=!0,d()},n.onerror=function(){r=!0,o=Error("Stylesheet failed to load"),d()}):setTimeout(function(){r=!0,d()},0),u(e,"head",n)}function A(e,n,i,r){var o=e.c.getElementsByTagName("head")[0];if(o){var a=t(e,"script",{src:n}),s=!1;return a.onload=a.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,i&&i(null),a.onload=a.onreadystatechange=null,"HEAD"==a.parentNode.tagName&&o.removeChild(a))},o.appendChild(a),setTimeout(function(){s||(s=!0,i&&i(Error("Script load timeout")))},r||5e3),a}return null}function B(){this.a=0,this.c=null}function C(e){return e.a++,function(){e.a--,D(e)}}function E(e,t){e.c=t,D(e)}function D(e){0==e.a&&e.c&&(e.c(),e.c=null)}function F(e){this.a=e||"-"}function G(e,t){this.c=e,this.f=4,this.a="n";var n=(t||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function I(e){var t=[];e=e.split(/,\s*/);for(var n=0;n<e.length;n++){var i=e[n].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?t.push("'"+i+"'"):t.push(i)}return t.join(",")}function J(e){return e.a+e.f}function H(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function ha(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new F("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function L(e){if(e.g){var t=y(e.f,e.a.c("wf","active")),n=[],i=[e.a.c("wf","loading")];t||n.push(e.a.c("wf","inactive")),w(e.f,n,i)}K(e,"inactive")}function K(e,t,n){e.j&&e.h[t]&&(n?e.h[t](n.c,J(n)):e.h[t]())}function ja(){this.c={}}function M(e,n){this.c=e,this.f=n,this.a=t(this.c,"span",{"aria-hidden":"true"},this.f)}function N(e){u(e.c,"body",e.a)}function O(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+I(e.c)+";font-style:"+H(e)+";font-weight:"+e.f+"00;"}function P(e,t,n,i,r,o){this.g=e,this.j=t,this.a=i,this.c=n,this.f=r||3e3,this.h=o||void 0}function Q(e,t,n,i,r,o,a){this.v=e,this.B=t,this.c=n,this.a=i,this.s=a||"BESbswy",this.f={},this.w=r||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new M(this.c,this.s),this.h=new M(this.c,this.s),this.j=new M(this.c,this.s),this.m=new M(this.c,this.s),e=O(e=new G(this.a.c+",serif",J(this.a))),this.g.a.style.cssText=e,e=O(e=new G(this.a.c+",sans-serif",J(this.a))),this.h.a.style.cssText=e,e=O(e=new G("serif",J(this.a))),this.j.a.style.cssText=e,e=O(e=new G("sans-serif",J(this.a))),this.m.a.style.cssText=e,N(this.g),N(this.h),N(this.j),N(this.m)}F.prototype.c=function(e){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},P.prototype.start=function(){var n=this.c.o.document,i=this,r=a(),e=new Promise(function(t,e){!function f(){a()-r>=i.f?e():n.fonts.load(function fa(e){return H(e)+" "+e.f+"00 300px "+I(e.c)}(i.a),i.h).then(function(e){1<=e.length?t():setTimeout(f,25)},function(){e()})}()}),o=null,t=new Promise(function(e,t){o=setTimeout(t,i.f)});Promise.race([t,e]).then(function(){o&&(clearTimeout(o),o=null),i.g(i.a)},function(){i.j(i.a)})};var r={D:"serif",C:"sans-serif"},n=null;function T(){if(null===n){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);n=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)}return n}function la(e,t,n){for(var i in r)if(r.hasOwnProperty(i)&&t===e.f[r[i]]&&n===e.f[r[i]])return!0;return!1}function U(e){var t,n=e.g.a.offsetWidth,i=e.h.a.offsetWidth;(t=n===e.f.serif&&i===e.f["sans-serif"])||(t=T()&&la(e,n,i)),t?a()-e.A>=e.w?T()&&la(e,n,i)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?V(e,e.v):V(e,e.B):function ma(e){setTimeout(p(function(){U(this)},e),50)}(e):V(e,e.v)}function V(e,t){setTimeout(p(function(){v(this.g.a),v(this.h.a),v(this.j.a),v(this.m.a),t(this.a)},e),0)}function W(e,t,n){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=n}Q.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=a(),U(this)};var g=null;function na(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&w(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),K(e,"active")):L(e.a))}function oa(e){this.j=e,this.a=new ja,this.h=0,this.f=this.g=!0}function ra(e,t){this.c=e,this.a=t}function sa(e,t){this.c=e,this.a=t}function ta(e,t){this.c=e||"https://fonts.googleapis.com/css",this.a=[],this.f=[],this.g=t||""}W.prototype.g=function(e){var t=this.a;t.g&&w(t.f,[t.a.c("wf",e.c,J(e).toString(),"active")],[t.a.c("wf",e.c,J(e).toString(),"loading"),t.a.c("wf",e.c,J(e).toString(),"inactive")]),K(t,"fontactive",e),this.m=!0,na(this)},W.prototype.h=function(e){var t=this.a;if(t.g){var n=y(t.f,t.a.c("wf",e.c,J(e).toString(),"active")),i=[],r=[t.a.c("wf",e.c,J(e).toString(),"loading")];n||i.push(t.a.c("wf",e.c,J(e).toString(),"inactive")),w(t.f,i,r)}K(t,"fontinactive",e),na(this)},oa.prototype.load=function(e){this.c=new ca(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function pa(r,e,t){var n=[],i=t.timeout;!function ia(e){e.g&&w(e.f,[e.a.c("wf","loading")]),K(e,"loading")}(e);n=function ka(e,t,n){var i,r=[];for(i in t)if(t.hasOwnProperty(i)){var o=e.c[i];o&&r.push(o(t[i],n))}return r}(r.a,t,r.c);var o=new W(r.c,e,i);for(r.h=n.length,e=0,t=n.length;e<t;e++)n[e].load(function(e,t,n){var i,c,u,f,h,m;c=o,u=e,f=t,h=n,m=0==--(i=r).h,(i.f||i.g)&&setTimeout(function(){var e=h||null,t=f||{};if(0===u.length&&m)L(c.a);else{c.f+=u.length,m&&(c.j=m);var n,i=[];for(n=0;n<u.length;n++){var r=u[n],o=t[r.c],a=c.a,s=r;if(a.g&&w(a.f,[a.a.c("wf",s.c,J(s).toString(),"loading")]),K(a,"fontloading",s),(a=null)===g)if(window.FontFace){s=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var l=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);g=s?42<parseInt(s[1],10):!l}else g=!1;a=g?new P(p(c.g,c),p(c.h,c),c.c,r,c.s,o):new Q(p(c.g,c),p(c.h,c),c.c,r,c.s,e,o),i.push(a)}for(n=0;n<i.length;n++)i[n].start()}},0)})}(this,new ha(this.c,e),e)},ra.prototype.load=function(o){var t=this,a=t.a.projectId,e=t.a.version;if(a){var s=t.c.o;A(this.c,(t.a.api||"https://fast.fonts.net/jsapi")+"/"+a+".js"+(e?"?v="+e:""),function(e){e?o([]):(s["__MonotypeConfiguration__"+a]=function(){return t.a},function b(){if(s["__mti_fntLst"+a]){var e,t=s["__mti_fntLst"+a](),n=[];if(t)for(var i=0;i<t.length;i++){var r=t[i].fontfamily;null!=t[i].fontStyle&&null!=t[i].fontWeight?(e=t[i].fontStyle+t[i].fontWeight,n.push(new G(r,e))):n.push(new G(r))}o(n)}else setTimeout(function(){b()},50)}())}).id="__MonotypeAPIScript__"+a}else o([])},sa.prototype.load=function(e){var t,n,i=this.a.urls||[],r=this.a.families||[],o=this.a.testStrings||{},a=new B;for(t=0,n=i.length;t<n;t++)z(this.c,i[t],C(a));var s=[];for(t=0,n=r.length;t<n;t++)if((i=r[t].split(":"))[1])for(var l=i[1].split(","),c=0;c<l.length;c+=1)s.push(new G(i[0],l[c]));else s.push(new G(i[0]));E(a,function(){e(s,o)})};function ya(e){this.f=e,this.a=[],this.c={}}var h={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},m={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},_={i:"i",italic:"i",n:"n",normal:"n"},S=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Ea(e,t){this.c=e,this.a=t}var l={Arimo:!0,Cousine:!0,Tinos:!0};function Ga(e,t){this.c=e,this.a=t}function Ha(e,t){this.c=e,this.f=t,this.a=[]}Ea.prototype.load=function(e){var t=new B,n=this.c,i=new ta(this.a.api,this.a.text),r=this.a.families;!function va(e,t){for(var n=t.length,i=0;i<n;i++){var r=t[i].split(":");3==r.length&&e.f.push(r.pop());var o="";2==r.length&&""!=r[1]&&(o=":"),e.a.push(r.join(o))}}(i,r);var o=new ya(r);!function Da(e){for(var t=e.f.length,n=0;n<t;n++){var i=e.f[n].split(":"),r=i[0].replace(/\+/g," "),o=["n4"];if(2<=i.length){var a;if(a=[],s=i[1])for(var s,l=(s=s.split(",")).length,c=0;c<l;c++){var u;if((u=s[c]).match(/^[\w-]+$/))if(null==(f=S.exec(u.toLowerCase())))u="";else{if(u=null==(u=f[2])||""==u?"n":_[u],null==(f=f[1])||""==f)f="4";else var p=m[f],f=p||(isNaN(f)?"4":f.substr(0,1));u=[u,f].join("")}else u="";u&&a.push(u)}0<a.length&&(o=a),3==i.length&&(a=[],0<(i=(i=i[2])?i.split(","):a).length&&(i=h[i[0]])&&(e.c[r]=i))}for(e.c[r]||(i=h[r])&&(e.c[r]=i),i=0;i<o.length;i+=1)e.a.push(new G(r,o[i]))}}(o),z(n,function wa(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,n=[],i=0;i<t;i++)n.push(e.a[i].replace(/ /g,"+"));return t=e.c+"?family="+n.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(i),C(t)),E(t,function(){e(o.a,o.c,l)})},Ga.prototype.load=function(a){var e=this.a.id,s=this.c.o;e?A(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)a([]);else if(s.Typekit&&s.Typekit.config&&s.Typekit.config.fn){e=s.Typekit.config.fn;for(var t=[],n=0;n<e.length;n+=2)for(var i=e[n],r=e[n+1],o=0;o<r.length;o++)t.push(new G(i,r[o]));try{s.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}a(t)}},2e3):a([])},Ha.prototype.load=function(c){var e=this.f.id,t=this.c.o,u=this;e?(t.__webfontfontdeckmodule__||(t.__webfontfontdeckmodule__={}),t.__webfontfontdeckmodule__[e]=function(e,t){for(var n=0,i=t.fonts.length;n<i;++n){var r=t.fonts[n];u.a.push(new G(r.name,(o="font-weight:"+r.weight+";font-style:"+r.style,l=s=a=void 0,a=4,s="n",l=null,o&&((l=o.match(/(normal|oblique|italic)/i))&&l[1]&&(s=l[1].substr(0,1).toLowerCase()),(l=o.match(/([1-9]00|normal|bold)/i))&&l[1]&&(/bold/i.test(l[1])?a=7:/[1-9]00/.test(l[1])&&(a=parseInt(l[1].substr(0,1),10)))),s+a)))}var o,a,s,l;c(u.a)},A(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function ea(e){return e.o.location.hostname||e.a.location.hostname}(this.c)+"/"+e+".js",function(e){e&&c([])})):c([])};var e=new oa(window);e.a.c.custom=function(e,t){return new sa(t,e)},e.a.c.fontdeck=function(e,t){return new Ha(t,e)},e.a.c.monotype=function(e,t){return new ra(t,e)},e.a.c.typekit=function(e,t){return new Ga(t,e)},e.a.c.google=function(e,t){return new Ea(t,e)};var i={load:p(e.load,e)};void 0===(x=function(){return i}.call(c,k,c,o))||(o.exports=x)}()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(i){return function(){var e,t=_getPrototypeOf(i);if(function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t);var r=function(){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(MPGame,Phaser.Game);var n=_createSuper(MPGame);function MPGame(e){var t;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MPGame),(t=n.call(this,e)).gameScale=e.gameScale,t.gameScaleExtension="_"+t.gameScale.toString().replace(".","_"),t.buttonSize="tablet",window.matchMedia("(min-width: 770px)").matches||(t.buttonSize="mobile"),t}return MPGame}();function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var W=function(){function MPUtils(){!function MPUtils_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MPUtils)}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(MPUtils,null,[{key:"GetRootElement",value:function GetRootElement(){return document.getElementById("local-game-holder")}},{key:"GetAssetURL",value:function GetAssetURL(){return MPUtils.GetGameDir()+"bin/"}},{key:"GetGameDir",value:function GetGameDir(){return""}},{key:"ClassNameToString",value:function ClassNameToString(e){var t=e.name;if(!e.name){var n=e.toString();t=n.substring(n.indexOf(" ")+1,n.indexOf("("))}return t}},{key:"CloneArray",value:function CloneArray(e){return JSON.parse(JSON.stringify(e))}},{key:"SliceArrayMultipleRandom",value:function SliceArrayMultipleRandom(e,t,n){for(var i=[],r=0;r<t;r++){var o=Phaser.Math.Between(0,e.length-1);n||i.push(e[o]),e.slice(o)}return n?e:i}},{key:"QuickSliceArray",value:function QuickSliceArray(e,t,n){var i=t||e[n],r=t?e.indexOf(t):n;return e.splice(r,1),{array:e,object:i}}},{key:"Vibrate",value:function Vibrate(e){e=e||100,window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(e)}},{key:"ShuffleArray",value:function ShuffleArray(e){for(var t,n,i=e.length;0!==i;)n=Math.floor(Math.random()*i),t=e[--i],e[i]=e[n],e[n]=t}},{key:"AddChild",value:function AddChild(e,t){t&&(t.add.existing?t.add.existing(e):t.add(e))}},{key:"IsInCameraBounds",value:function IsInCameraBounds(e,t,n,i,r,o,a){if(0!=a)return Phaser.Math.Distance.Between(t.midPoint.x,t.midPoint.y,n,i)<.5*Math.max(r,o)+.5*Math.max(t.displayWidth,t.displayHeight);var s=t.midPoint.x-.5*e.viewport.width,l=t.midPoint.x+.5*e.viewport.width,c=t.midPoint.y-.5*e.viewport.height,u=t.midPoint.y+.5*e.viewport.height;return s<=n+.5*r&&n-.5*r<=l&&i-.5*o<=u&&c<=i+.5*o}},{key:"GetAngleDifference",value:function GetAngleDifference(e,t){var n=MPUtils.Repeat(e-t,360);return 180<n&&(n-=360),n}},{key:"RotateVector2",value:function RotateVector2(e,t){var n=Math.sin(Phaser.Math.DegToRad(t)),i=Math.cos(Phaser.Math.DegToRad(t)),r=e.x,o=e.y;return e.x=i*r-n*o,e.y=n*r+i*o,e}},{key:"RotateVector2AroundPoint",value:function RotateVector2AroundPoint(e,t,n){var i=Phaser.Math.DegToRad(n);return e.x=Math.cos(i)*(e.x-t.x)-Math.sin(i)*(e.y-t.y)+t.x,e.y=Math.sin(i)*(e.x-t.x)+Math.cos(i)*(e.y-t.y)+t.y,e}},{key:"NearestMultiple",value:function NearestMultiple(e,t){return Math.ceil(e/t)*t}},{key:"GetPropertyFromString",value:function GetPropertyFromString(e,t){if("this"==t)return e;var n=t.split(".");for("this"==n[0]?n.splice(0,1):e=window,i=0;i<n.length-1;i++)if(null==(e=e[n[i]]))return;return e[n[n.length-1]]}},{key:"Repeat",value:function Repeat(e,t){return e-Math.floor(e/t)*t}},{key:"StringToValue",value:function StringToValue(e,t,n){var i=e,r=parseFloat(i);if("True"==i||"true"==i)i=!0;else if("False"==i||"false"==i)i=!1;else if(isNaN(r)){if("{"==e[0]||"["==e[0])i=JSON.parse(e);else if(t){var o=GetPropertyFromString(n,e);void 0!==o&&(i=o)}}else i=r;return i}},{key:"ClampTextToDimensions",value:function ClampTextToDimensions(e,t,n){if(e.width>t||e.height>n){var i=Math.max(e.width/t,e.height/n),r=parseInt(e.style.fontSize)/i;e.setFontSize(r-1)}}},{key:"ConvertTiledProperties",value:function ConvertTiledProperties(e){if(e.properties.length){for(var t={},n=0;n<e.properties.length;n++)t[e.properties[n].name]=e.properties[n].value;e.properties=t}}},{key:"LerpColor",value:function LerpColor(e,t,n){var i=e>>16,r=e>>8&255,o=255&e;return(i+n*((t>>16)-i)<<16)+(r+n*((t>>8&255)-r)<<8)+(0|o+n*((255&t)-o))}}]),MPUtils}();Phaser.Physics.Matter.World.prototype.setBounds=function(e,t,n,i,r,o,a,s,l){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===i&&(i=this.scene.sys.scale.height),void 0===r&&(r=128),void 0===o&&(o=!0),void 0===a&&(a=!0),s=s||!0,void 0===l&&(l=!0),this.updateWall(o,"left",e-r,t-r,r,i+2*r),this.updateWall(a,"right",e+n,t-r,r,i+2*r),this.updateWall(s,"top",e,t-r,n,r),this.updateWall(l,"bottom",e,t+i,n,r),this};function Tl(e,t,n,i,r){var o=t.node,a=o.style;if(!o||!a||Phaser.GameObjects.GameObject.RENDER_MASK!==t.renderFlags||0!==t.cameraFilter&&t.cameraFilter&i.id||t.parentContainer&&!t.parentContainer.willRender())o&&(a.display="none");else{var s=t.parentContainer,l=i.alpha*t.alpha;s&&(l*=s.alpha);var c=e._tempMatrix1,u=e._tempMatrix2,p=e._tempMatrix3,f=0,h=0,m="0%",y="0%";r?(f=t.width*t.scaleX*t.originX,h=t.height*t.scaleY*t.originY,u.applyITRS(t.x-f,t.y-h,t.rotation,t.scaleX,t.scaleY),c.copyFrom(i.matrix),c.multiplyWithOffset(r,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),u.e=t.x-f,u.f=t.y-h):(f=t.width*t.originX,h=t.height*t.originY,u.applyITRS(t.x-f,t.y-h,t.rotation,t.scaleX,t.scaleY),c.copyFrom(i.matrix),m=100*t.originX+"%",y=100*t.originY+"%",u.e-=i.scrollX*t.scrollFactorX,u.f-=i.scrollY*t.scrollFactorY),c.multiply(u,p),t.transformOnly||(a.display="block",a.opacity=l,a.zIndex=t._depth,a.pointerEvents="none",a.mixBlendMode=Phaser.BlendModes[t._blendMode]),a.transform=p.getCSSMatrix()+" skew("+t.skewX+"rad, "+t.skewY+"rad) rotate3d("+t.rotate3d.x+","+t.rotate3d.y+","+t.rotate3d.z+","+t.rotate3d.w+t.rotate3dAngle+")",a.transformOrigin=m+" "+y;var g=o.getBoundingClientRect();t.displayWidth=g.width,t.displayHeight=g.height}}Phaser.GameObjects.DOMElement.prototype.renderCanvas=Tl,Phaser.GameObjects.DOMElement.prototype.renderWebGL=Tl,Phaser.Game.prototype.step=function(e,t){if(this.pendingDestroy)return this.runDestroy();this.speed&&1!=this.speed&&(t*=this.speed);var n=this.events;n.emit(Phaser.Core.Events.PRE_STEP,e,t),n.emit(Phaser.Core.Events.STEP,e,t),this.scene.update(e,t),n.emit(Phaser.Core.Events.POST_STEP,e,t);var i=this.renderer;i.preRender(),n.emit(Phaser.Core.Events.PRE_RENDER,i,e,t),this.scene.render(i),i.postRender(),n.emit(Phaser.Core.Events.POST_RENDER,i,e,t)};var o=Phaser.Input.Pointer.prototype.touchstart;Phaser.Input.Pointer.prototype.touchstart=function(e,t){o.call(this,e,t),this.downTime=t.timeStamp};var a=Phaser.Input.Pointer.prototype.touchend;function SceneManager_typeof(e){return(SceneManager_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SceneManager_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SceneManager_setPrototypeOf(e,t){return(SceneManager_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function SceneManager_createSuper(i){return function(){var e,t=SceneManager_getPrototypeOf(i);if(function SceneManager_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=SceneManager_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function SceneManager_possibleConstructorReturn(e,t){return!t||"object"!==SceneManager_typeof(t)&&"function"!=typeof t?SceneManager_assertThisInitialized(e):t}(this,e)}}function SceneManager_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SceneManager_getPrototypeOf(e){return(SceneManager_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Phaser.Input.Pointer.prototype.touchend=function(e,t){a.call(this,e,t),this.upTime=t.timeStamp},Phaser.Physics.Matter.Matter.Common.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},Math.sign||(Math.sign=function(e){return 0<=e?1:-1}),String.prototype.padStart||(String.prototype.padStart=function padStart(e,t){return e>>=0,t=String(void 0!==t?t:" "),this.length>=e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),String.prototype.repeat||(String.prototype.repeat=function(e){if(null==this)throw new TypeError("can't convert "+this+" to object");var t=""+this;if((e=+e)!=e&&(e=0),e<0)throw new RangeError("repeat count must be non-negative");if(e==1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0==t.length||0==e)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var n="";1==(1&e)&&(n+=t),0!=(e>>>=1);)t+=t;return n}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function assign(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},writable:!0,configurable:!0});var s=function(){!function SceneManager_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SceneManager_setPrototypeOf(e,t)}(SceneManager,Phaser.Plugins.BasePlugin);var n=SceneManager_createSuper(SceneManager);function SceneManager(e){var t;return function SceneManager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SceneManager),t=n.call(this,e),SceneManager.Instance=SceneManager_assertThisInitialized(t),t.activeScenes=[],t.events=new Phaser.Events.EventEmitter,t}return function SceneManager_createClass(e,t,n){return t&&SceneManager_defineProperties(e.prototype,t),n&&SceneManager_defineProperties(e,n),e}(SceneManager,[{key:"StartScene",value:function StartScene(e,t){null==t&&(t={}),t.additive=void 0!==t.additive&&t.additive;var n=W.ClassNameToString(e);this.activeScenes.push(n),this.game.scene.add(n,e,!0,t)}},{key:"StopScene",value:function StopScene(e){var t=this.activeScenes.indexOf(e);0<=t&&this.activeScenes.splice(t,1),setTimeout(function(){this.game.scene.getScene(e).Destroy(),this.game.scene.remove(e)}.bind(this),1)}},{key:"StartLoadingScene",value:function StartLoadingScene(e,t,n){null==n&&(n={}),n.sceneToLoad=t,this.StartScene(e,n)}},{key:"StartTransitionScene",value:function StartTransitionScene(e,t,n){this.StartScene(e,{additive:!0,callback:t,context:n})}},{key:"OnSceneInit",value:function OnSceneInit(e){if(!e.data.additive)for(var t=this.activeScenes.length-1;0<=t;t--){if(this.activeScenes[t]!==e.key)this.game.scene.getScene(this.activeScenes[t]).dontDestroyOnLoad||this.StopScene(this.activeScenes[t])}this.events.emit("sceneInit",e.key)}},{key:"PauseAllScenes",value:function PauseAllScenes(){for(var e=0;e<this.activeScenes.length;e++)this.game.scene.pause(this.activeScenes[e])}},{key:"ResumeAllScenes",value:function ResumeAllScenes(){for(var e=0;e<this.activeScenes.length;e++)this.game.scene.resume(this.activeScenes[e])}},{key:"SleepAllScenes",value:function SleepAllScenes(){for(var e=0;e<this.activeScenes.length;e++)this.game.scene.sleep(this.activeScenes[e])}},{key:"WakeAllScenes",value:function WakeAllScenes(){for(var e=0;e<this.activeScenes.length;e++)this.game.scene.wake(this.activeScenes[e])}}]),SceneManager}();function AccessibilityManager_typeof(e){return(AccessibilityManager_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AccessibilityManager_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function AccessibilityManager_setPrototypeOf(e,t){return(AccessibilityManager_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function AccessibilityManager_createSuper(i){return function(){var e,t=AccessibilityManager_getPrototypeOf(i);if(function AccessibilityManager_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=AccessibilityManager_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function AccessibilityManager_possibleConstructorReturn(e,t){return!t||"object"!==AccessibilityManager_typeof(t)&&"function"!=typeof t?AccessibilityManager_assertThisInitialized(e):t}(this,e)}}function AccessibilityManager_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AccessibilityManager_getPrototypeOf(e){return(AccessibilityManager_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function AccessibilityManager_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AccessibilityManager_setPrototypeOf(e,t)}(AccessibilityManager,Phaser.Plugins.BasePlugin);var n=AccessibilityManager_createSuper(AccessibilityManager);function AccessibilityManager(e){var t;return function AccessibilityManager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AccessibilityManager),t=n.call(this,e),AccessibilityManager.Instance=AccessibilityManager_assertThisInitialized(t),t.div=document.createElement("div"),t.div.id="subtitles",t.div.style.zIndex=20,W.GetRootElement().appendChild(t.div),t.div.className+="subtitles",t.language="en",t.entries=[],t.visibleTime=0,t.visibleTimer=0,t.textVisible=!1,t.subtitlesEnabled=!1,t.subtitlesData={},t}return function AccessibilityManager_createClass(e,t,n){return t&&AccessibilityManager_defineProperties(e.prototype,t),n&&AccessibilityManager_defineProperties(e,n),e}(AccessibilityManager,[{key:"start",value:function start(){this.game.events.on("step",this.update,this)}},{key:"update",value:function update(e,t){for(var n=!1,i=this.entries.length-1;0<=i;i--)this.entries[i].timer+=.001*t,this.entries[i].timer>this.entries[i].time&&(this.entries.splice(i,1),n=!0);n&&this.SetText()}},{key:"SetSubtitlesData",value:function SetSubtitlesData(e){this.language=gt.Instance.config.language,this.subtitlesData=e}},{key:"ToggleSubtitlesEnabled",value:function ToggleSubtitlesEnabled(){this.SetSubtitlesEnabled(!this.subtitlesEnabled)}},{key:"SetSubtitlesEnabled",value:function SetSubtitlesEnabled(e){this.subtitlesEnabled=e,this.game.events.emit("subtitlesEnabled",e)}},{key:"GetSubtitleText",value:function GetSubtitleText(e){return this.subtitlesData?this.subtitlesData[this.language][e]:null}},{key:"RemoveEntry",value:function RemoveEntry(e){if(void 0!==e&&this.subtitlesEnabled){var t=this.GetSubtitleText(e)||e;if(null!=t){for(var n=!1,i=t.split("\n"),r=0;r<i.length;r++)for(var o=this.entries.length-1;0<=o;o--)this.entries[o].text===i[r]&&(this.entries.splice(o,1),n=!0);n&&this.SetText()}}}},{key:"ClearSubtitles",value:function ClearSubtitles(){this.entries.length=0,this.SetText()}},{key:"ShowSubtitle",value:function ShowSubtitle(e,t){if(void 0!==e&&this.subtitlesEnabled){var n=this.GetSubtitleText(e)||e;if(null!=n){if(0===t)t=.4*n.split(" ").length;var i=n.split("\n");if(i.length<=1)t+=1,this.visibleTimer=0,this.visibleTime+=t,this.entries.push({text:n,time:t,timer:0});else{for(var r=0,o=0;o<i.length;o++){var a=t*(i[o].length/n.length);this.entries.push({text:i[o],time:a,timer:r}),r-=a}this.visibleTimer=0,this.visibleTime+=t+1}if(3<this.entries.length)for(var s=this.entries.length;3<s;s--)this.entries.shift();this.SetText()}}}},{key:"SetText",value:function SetText(){for(var e="",t=[],n=0;n<this.entries.length;n++)if(!(this.entries[n].timer<0)){for(var i=!1,r=0;r<t.length;r++)t[r]===this.entries[n].text&&(i=!0);i||(0!==n&&(e+="<br/>"),e+=this.entries[n].text,t.push(this.entries[n].text))}this.div.innerHTML=e}}]),AccessibilityManager}(),c=n(0);function AudioSound_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function AudioSound(e,t,n){!function AudioSound_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AudioSound),this.game=e,this.key=t,this.sound=new c.Howl({src:w.Instance.howlCache[t].src}),this.sound.loop(void 0!==n.loop&&n.loop),this.subtitles=void 0!==n.subtitles&&n.subtitles,this.fadeVolumeTween=null}return function AudioSound_createClass(e,t,n){return t&&AudioSound_defineProperties(e.prototype,t),n&&AudioSound_defineProperties(e,n),e}(AudioSound,[{key:"Play",value:function Play(e){var t=e&&void 0!==e.volume?e.volume:1,n=!e||void 0===e.restart||e.restart,i=e&&void 0!==e.loop?e.loop:this.sound.loop,r=e&&void 0!==e.subtitles?e.subtitles:this.subtitles,o=(e&&void 0!==e.detune&&e.detune,this.IsPlaying());!n&&o||(this.SetVolume(t),this.sound.loop(i),this.sound.play(),r&&l.Instance.ShowSubtitle(this.key,this.sound.totalDuration))}},{key:"SetMute",value:function SetMute(e){this.sound.mute(e)}},{key:"SetVolume",value:function SetVolume(e){this.sound.volume(e)}},{key:"FadeVolume",value:function FadeVolume(e,t,n){this.fadeVolumeTween&&this.fadeVolumeTween.stop(),this.volumeTweenValue=this.sound._volume,e.tweens.add({targets:this,volumeTweenValue:t,duration:n||1e3,onUpdate:this.OnVolumeTweenUpdate,onUpdateScope:this})}},{key:"OnVolumeTweenUpdate",value:function OnVolumeTweenUpdate(){this.SetVolume(this.volumeTweenValue)}},{key:"Pause",value:function Pause(){this.sound.pause()}},{key:"Resume",value:function Resume(){this.IsPlaying()&&this.sound.play()}},{key:"IsPlaying",value:function IsPlaying(){for(var e=0;e<this.sound._sounds.length;e++)if(!this.sound._sounds[e]._ended)return!0;return!1}},{key:"Stop",value:function Stop(){this.IsPlaying()&&(this.sound.stop(),this.subtitles&&l.Instance.RemoveEntry(this.key))}},{key:"Destroy",value:function Destroy(){this.Stop()}}]),AudioSound}();function AudioLayer_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var p=function(){function AudioLayer(e,t,n){!function AudioLayer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AudioLayer),this.game=e,this.key=t,this.config=n,this.sounds=[],this.allowMultiple=void 0===n.allowMultiple||n.allowMultiple,this.loop=void 0!==n.loop&&n.loop,this.subtitles=void 0!==n.subtitles&&n.subtitles,this.restart=void 0===n.restart||n.restart}return function AudioLayer_createClass(e,t,n){return t&&AudioLayer_defineProperties(e.prototype,t),n&&AudioLayer_defineProperties(e,n),e}(AudioLayer,[{key:"AddSound",value:function AddSound(e){var t=this.GetSound(e);t||(t=new u(this.game,e,this.config),this.sounds.push(t))}},{key:"GetSound",value:function GetSound(e){for(var t=0;t<this.sounds.length;t++)if(this.sounds[t].key==e)return this.sounds[t]}},{key:"PlaySound",value:function PlaySound(e,t){var n=this.GetSound(e);if(!this.allowMultiple){var i=t&&void 0!==t.restart?t.restart:this.restart,r=n.sound.isPlaying;if(i)this.StopAllSounds();else if(this.StopAllSounds(n.key),r)return}n.Play(t)}},{key:"StopSound",value:function StopSound(e){this.GetSound(e).Stop()}},{key:"StopAllSounds",value:function StopAllSounds(e){for(var t=0;t<this.sounds.length;t++)this.sounds[t].key!=e&&this.sounds[t].Stop()}},{key:"FadeOutAllSounds",value:function FadeOutAllSounds(e){for(var t=0;t<this.sounds.length;t++)this.sounds[t].FadeOut(e)}},{key:"Pause",value:function Pause(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].Pause()}},{key:"Resume",value:function Resume(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].Resume()}},{key:"SetMute",value:function SetMute(e){for(var t=0;t<this.sounds.length;t++)this.sounds[t].SetMute(e)}},{key:"SetVolume",value:function SetVolume(e){for(var t=0;t<this.sounds.length;t++)this.sounds[t].SetVolume(e)}},{key:"FadeVolume",value:function FadeVolume(e,t,n,i){for(var r=0;r<this.sounds.length;r++)this.sounds[r].FadeVolume(e,t,n,i)}},{key:"Destroy",value:function Destroy(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].Destroy();this.sounds=[]}}]),AudioLayer}();function SaveDataManager_typeof(e){return(SaveDataManager_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SaveDataManager_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SaveDataManager_setPrototypeOf(e,t){return(SaveDataManager_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function SaveDataManager_createSuper(i){return function(){var e,t=SaveDataManager_getPrototypeOf(i);if(function SaveDataManager_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=SaveDataManager_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function SaveDataManager_possibleConstructorReturn(e,t){return!t||"object"!==SaveDataManager_typeof(t)&&"function"!=typeof t?SaveDataManager_assertThisInitialized(e):t}(this,e)}}function SaveDataManager_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SaveDataManager_getPrototypeOf(e){return(SaveDataManager_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(){!function SaveDataManager_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SaveDataManager_setPrototypeOf(e,t)}(SaveDataManager,Phaser.Plugins.BasePlugin);var n=SaveDataManager_createSuper(SaveDataManager);function SaveDataManager(e){var t;return function SaveDataManager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SaveDataManager),t=n.call(this,e),SaveDataManager.Instance=SaveDataManager_assertThisInitialized(t),t.id="cn_summer_games_save",t.data=[],t.LoadFromStorage(),t}return function SaveDataManager_createClass(e,t,n){return t&&SaveDataManager_defineProperties(e.prototype,t),n&&SaveDataManager_defineProperties(e,n),e}(SaveDataManager,[{key:"GetData",value:function GetData(e){for(var t=0;t<this.data.length;t++)if(this.data[t].id==e)return this.data[t].value;return null}},{key:"SaveData",value:function SaveData(e,t){for(var n=null,i=0;i<this.data.length;i++)this.data[i].id==e&&(n=this.data[i]);n?n.value=t:this.data.push({id:e,value:t})}},{key:"LoadFromStorage",value:function LoadFromStorage(){var e=this.FetchDataFromStorage();e&&(this.data=W.CloneArray(e))}},{key:"FetchDataFromStorage",value:function FetchDataFromStorage(){try{var e=this.id,t=window.localStorage.getItem(e);for(var n in localStorage)localStorage[n].length&&localStorage[n].length;return JSON.parse(t)}catch(e){console.log(e)}return null}},{key:"SaveToStorage",value:function SaveToStorage(){try{window.localStorage.setItem(this.id,JSON.stringify(this.data))}catch(e){console.error("Failed to save data, check console"),console.log(CloneObject(this.data,!0)),console.log(e)}}},{key:"ClearKey",value:function ClearKey(e){for(var t=0;t<this.data.length;t++)if(this.data[t].id==e)return void this.data.splice(t,1)}},{key:"ClearData",value:function ClearData(e){this.data=[],e?window.localStorage.clear():this.LoadFromStorage()}}]),SaveDataManager}();function AudioManager_typeof(e){return(AudioManager_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AudioManager_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function AudioManager_setPrototypeOf(e,t){return(AudioManager_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function AudioManager_createSuper(i){return function(){var e,t=AudioManager_getPrototypeOf(i);if(function AudioManager_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=AudioManager_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function AudioManager_possibleConstructorReturn(e,t){return!t||"object"!==AudioManager_typeof(t)&&"function"!=typeof t?AudioManager_assertThisInitialized(e):t}(this,e)}}function AudioManager_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AudioManager_getPrototypeOf(e){return(AudioManager_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(){!function AudioManager_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AudioManager_setPrototypeOf(e,t)}(AudioManager,Phaser.Plugins.BasePlugin);var n=AudioManager_createSuper(AudioManager);function AudioManager(e){var t;return function AudioManager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AudioManager),_defineProperty(AudioManager_assertThisInitialized(t=n.call(this,e)),"OnWindowBlur",function(){c.Howler.mute(!0)}),_defineProperty(AudioManager_assertThisInitialized(t),"OnWindowFocus",function(){c.Howler.mute(!this.audioEnabled)}),_defineProperty(AudioManager_assertThisInitialized(t),"OnVisibilityChange",function(){"hidden"==document.visibilityState?this.OnWindowBlur():this.OnWindowFocus()}),AudioManager.Instance=AudioManager_assertThisInitialized(t),t.audioEnabled=!0,t.layers=[],t.howlCache={},t.LoadData(),t.onWindowBlur=t.OnWindowBlur.bind(AudioManager_assertThisInitialized(t)),t.onWindowFocus=t.OnWindowFocus.bind(AudioManager_assertThisInitialized(t)),t.onVisibilityChange=t.OnVisibilityChange.bind(AudioManager_assertThisInitialized(t)),window.addEventListener("blur",t.onWindowBlur),window.addEventListener("focus",t.onWindowFocus),document.addEventListener("visibilitychange",t.onVisibilityChange),t}return function AudioManager_createClass(e,t,n){return t&&AudioManager_defineProperties(e.prototype,t),n&&AudioManager_defineProperties(e,n),e}(AudioManager,[{key:"AddLayer",value:function AddLayer(e,t){var n=this.GetLayer(e);if(n||(n=new p(this.game,e,t),this.layers.push(n)),t.audioKeys)for(var i=0;i<t.audioKeys.length;i++)n.AddSound(t.audioKeys[i])}},{key:"GetLayerIndex",value:function GetLayerIndex(e){for(var t=0;t<this.layers.length;t++)if(this.layers[t].key==e)return t}},{key:"GetLayer",value:function GetLayer(e){var t=this.GetLayerIndex(e);return this.layers[t]}},{key:"SetLayerVolume",value:function SetLayerVolume(e,t){var n=this.GetLayer(e);n&&n.SetVolume(t)}},{key:"FadeLayerVolume",value:function FadeLayerVolume(e,t,n,i,r){var o=this.GetLayer(e);o&&o.FadeVolume(t,n,i,r)}},{key:"Play",value:function Play(e,t,n){this.GetLayer(e).PlaySound(t,n)}},{key:"Stop",value:function Stop(e,t){this.GetLayer(e).StopSound(t)}},{key:"FadeVolume",value:function FadeVolume(e,t,n,i,r,o){var a=this.GetLayer(e);if(a){var s=a.GetSound(t);s&&s.FadeVolume(n,i,r,o)}}},{key:"StopLayer",value:function StopLayer(e){var t=this.GetLayer(e);t&&t.StopAllSounds()}},{key:"PauseLayer",value:function PauseLayer(e){var t=this.GetLayer(e);t&&t.Pause()}},{key:"ResumeLayer",value:function ResumeLayer(e){var t=this.GetLayer(e);t&&t.Resume()}},{key:"ToggleAudioEnabled",value:function ToggleAudioEnabled(){this.SetAudioEnabled(!this.audioEnabled)}},{key:"SetAudioEnabled",value:function SetAudioEnabled(e){this.audioEnabled=e,this.game.sound.mute=!e,c.Howler.mute(!this.audioEnabled),this.game.events.emit("audioEnabled",e),this.SaveData()}},{key:"DestroyLayer",value:function DestroyLayer(e){var t=this.GetLayerIndex(e);this.GetLayer(e).Destroy(),this.layers.splice(t,1)}},{key:"SaveData",value:function SaveData(){v.Instance.SaveData("AudioManager",{audioEnabled:this.audioEnabled}),v.Instance.SaveToStorage()}},{key:"LoadData",value:function LoadData(){var e=v.Instance.GetData("AudioManager");e&&(this.audioEnabled=e.audioEnabled),this.game.sound.mute=!this.audioEnabled,c.Howler.mute(!this.audioEnabled)}},{key:"LoadHowlSound",value:function LoadHowlSound(e){if(!this.howlCache[e.key])return this.howlCache[e.key]={src:e.url},new c.Howl({src:e.url})}}]),AudioManager}();function MPScene_typeof(e){return(MPScene_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MPScene_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MPScene_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function MPScene_setPrototypeOf(e,t){return(MPScene_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MPScene_createSuper(i){return function(){var e,t=MPScene_getPrototypeOf(i);if(function MPScene_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MPScene_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MPScene_possibleConstructorReturn(e,t){return!t||"object"!==MPScene_typeof(t)&&"function"!=typeof t?function MPScene_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function MPScene_getPrototypeOf(e){return(MPScene_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(){!function MPScene_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MPScene_setPrototypeOf(e,t)}(MPScene,Phaser.Scene);var n=MPScene_createSuper(MPScene);function MPScene(e){var t;return function MPScene_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MPScene),(t=n.call(this)).key=e,t}return function MPScene_createClass(e,t,n){return t&&MPScene_defineProperties(e.prototype,t),n&&MPScene_defineProperties(e,n),e}(MPScene,[{key:"init",value:function init(){this.deviceManager=gt.Instance.deviceManager,this.dontDestroyOnLoad=!1,this.gameScale=this.game.gameScale,this.viewport=new Phaser.Structs.Size(this.scale.width,this.scale.height,this.game.scale.scaleMode),this.viewport.setAspectRatio(this.scale.parentSize.aspectRatio),this.scale.on("resize",this.Resize,this),this.world=this.add.container(0,0),this.ui=this.add.container(0,0),this.dom=this.add.container(0,0),this.sys.events.on("wake",this.OnWake,this),this.sys.events.on("sleep",this.OnSleep,this),s.Instance.OnSceneInit(this.sys.settings)}},{key:"preload",value:function preload(){console.log("Preload Scene:",this.key)}},{key:"create",value:function create(){console.log("Create Scene:",this.key),this.debug=gt.Instance.config&&gt.Instance.config.debug,this.debugFps=gt.Instance.config&&gt.Instance.config.debugFps,this.matter.world.drawDebug=this.debug&&gt.Instance.config&&gt.Instance.config.debugDrawPhysics,this.debugFps&&this.ShowFPS(),this.debugSpeedKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SHIFT)}},{key:"update",value:function update(e,t){_get(MPScene_getPrototypeOf(MPScene.prototype),"update",this).call(this,e,t),this.debugFps&&(this.fpsCounter.text=Math.floor(this.game.loop.actualFps),this.children.last!==this.fpsCounter&&this.children.bringToTop(this.fpsCounter)),this.debug&&(this.debugSpeedKey.isDown?this.game.speed=5:this.game.speed=1)}},{key:"Resize",value:function Resize(){this.viewport.setAspectRatio(this.scale.parentSize.aspectRatio)}},{key:"ShowFPS",value:function ShowFPS(){this.fpsCounter=this.add.text(.5*this.scale.width,.05*this.scale.height,"00",{fontSize:24*this.gameScale+"px",fill:"#00ff00"}),this.fpsCounter.setOrigin(.5)}},{key:"OnAudioButtonPressed",value:function OnAudioButtonPressed(e){w.Instance.SetAudioEnabled(e)}},{key:"OnWake",value:function OnWake(){}},{key:"OnSleep",value:function OnSleep(){}},{key:"Destroy",value:function Destroy(){console.warn("%cDestroy scene: "+this.key,"background: #222; color: #e50628")}}]),MPScene}();function AssetManager_typeof(e){return(AssetManager_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AssetManager_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function AssetManager_setPrototypeOf(e,t){return(AssetManager_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function AssetManager_createSuper(i){return function(){var e,t=AssetManager_getPrototypeOf(i);if(function AssetManager_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=AssetManager_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function AssetManager_possibleConstructorReturn(e,t){return!t||"object"!==AssetManager_typeof(t)&&"function"!=typeof t?AssetManager_assertThisInitialized(e):t}(this,e)}}function AssetManager_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AssetManager_getPrototypeOf(e){return(AssetManager_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(){!function AssetManager_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AssetManager_setPrototypeOf(e,t)}(AssetManager,Phaser.Plugins.BasePlugin);var n=AssetManager_createSuper(AssetManager);function AssetManager(e){var t;return function AssetManager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AssetManager),t=n.call(this,e),AssetManager.Instance=AssetManager_assertThisInitialized(t),t.pack=void 0,t.audioLoadProgress=1,t.audioFileCount=0,t.loadedAudioFileCount=0,t}return function AssetManager_createClass(e,t,n){return t&&AssetManager_defineProperties(e.prototype,t),n&&AssetManager_defineProperties(e,n),e}(AssetManager,[{key:"LoadAssetPacks",value:function LoadAssetPacks(e,t){for(var n=this.audioFileCount=0;n<t.length;n++)this.LoadAssetPack(e,t[n]);this.loadedAudioFileCount=0,this.audioLoadProgress=0<this.audioFileCount?0:1}},{key:"LoadAssetPack",value:function LoadAssetPack(e,t){var n=e.cache.json.get("assets");n[t]&&(this.LoadPack(e,t+".shared",n[t].shared),this.LoadPack(e,t+".gamescale",n[t]["gamescale"+this.game.gameScaleExtension]),l.Instance&&n[t].localised&&(n[t].localised["shared_"+l.Instance.language]&&this.LoadPack(e,t+".shared_"+l.Instance.language,n[t].localised["shared_"+l.Instance.language]),n[t].localised["gamescale"+this.game.gameScaleExtension+"_"+l.Instance.language]&&this.LoadPack(e,t+".gamescale_"+l.Instance.language,n[t].localised["gamescale"+this.game.gameScaleExtension+"_"+l.Instance.language])))}},{key:"LoadPack",value:function LoadPack(e,t,n){e.load.pack(t,n),this.LoadHowlerAudio(n)}},{key:"LoadHowlerAudio",value:function LoadHowlerAudio(e){if(e&&e.assets)for(var t=e.assets.files,n=0;n<t.length;n++)if("audio"==t[n].type){var i=w.Instance.LoadHowlSound(t[n]);i&&(this.audioFileCount++,i.once("load",this.OnLoadedHowlerAudio.bind(this)))}}},{key:"OnLoadedHowlerAudio",value:function OnLoadedHowlerAudio(){this.loadedAudioFileCount++,this.audioLoadProgress=this.loadedAudioFileCount/this.audioFileCount}}]),AssetManager}();function LoadingBar_typeof(e){return(LoadingBar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LoadingBar_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function LoadingBar_setPrototypeOf(e,t){return(LoadingBar_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function LoadingBar_createSuper(i){return function(){var e,t=LoadingBar_getPrototypeOf(i);if(function LoadingBar_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=LoadingBar_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function LoadingBar_possibleConstructorReturn(e,t){return!t||"object"!==LoadingBar_typeof(t)&&"function"!=typeof t?function LoadingBar_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function LoadingBar_getPrototypeOf(e){return(LoadingBar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(){!function LoadingBar_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LoadingBar_setPrototypeOf(e,t)}(LoadingBar,Phaser.GameObjects.Container);var i=LoadingBar_createSuper(LoadingBar);function LoadingBar(e,t){var n;return function LoadingBar_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LoadingBar),(n=i.call(this,e)).background=n.scene.add.image(0,0,t.backKey,t.backFrame),n.add(n.background),n.fill=n.scene.add.image(0,0,t.fillKey,t.fillFrame),n.add(n.fill),n.overlay=n.scene.add.image(0,0,t.overlayKey,t.overlayFrame),n.overlay.setOrigin(t.overlayOriginX||.5,t.overlayOriginY||.5),n.add(n.overlay),n.progress=0,n.fill.setCrop(0,0,1,n.fill.height),n}return function LoadingBar_createClass(e,t,n){return t&&LoadingBar_defineProperties(e.prototype,t),n&&LoadingBar_defineProperties(e,n),e}(LoadingBar,[{key:"SetProgress",value:function SetProgress(e){this.progress=e,this.fill.setCrop(0,0,Math.max(1,this.fill.width*e),this.fill.height)}}]),LoadingBar}();function LoadingScreen_typeof(e){return(LoadingScreen_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LoadingScreen_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function LoadingScreen_get(e,t,n){return(LoadingScreen_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function LoadingScreen_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=LoadingScreen_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function LoadingScreen_setPrototypeOf(e,t){return(LoadingScreen_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function LoadingScreen_createSuper(i){return function(){var e,t=LoadingScreen_getPrototypeOf(i);if(function LoadingScreen_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=LoadingScreen_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function LoadingScreen_possibleConstructorReturn(e,t){return!t||"object"!==LoadingScreen_typeof(t)&&"function"!=typeof t?function LoadingScreen_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function LoadingScreen_getPrototypeOf(e){return(LoadingScreen_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(){!function LoadingScreen_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LoadingScreen_setPrototypeOf(e,t)}(LoadingScreen,f);var t=LoadingScreen_createSuper(LoadingScreen);function LoadingScreen(){var e;return function LoadingScreen_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LoadingScreen),(e=t.call(this,"LoadingScreen")).progress=0,e.targetProgress=0,e.progressSpeed=.01,e.finished=!1,e}return function LoadingScreen_createClass(e,t,n){return t&&LoadingScreen_defineProperties(e.prototype,t),n&&LoadingScreen_defineProperties(e,n),e}(LoadingScreen,[{key:"preload",value:function preload(){LoadingScreen_get(LoadingScreen_getPrototypeOf(LoadingScreen.prototype),"preload",this).call(this);var e=this.add.image(.5*this.scale.width,.5*this.scale.height,"menus_background");e.setOrigin(.5),this.world.add(e);var t=this.add.image(e.x-.5*e.width,e.y,"menus_background_slice_tile");t.displayWidth=.5*(this.scale.width-e.width),t.setOrigin(1,.5),this.world.add(t);var n=this.add.image(e.x+.5*e.width,e.y,"menus_background_slice_tile");n.displayWidth=t.displayWidth,n.setOrigin(0,.5),this.world.add(n),this.loadingBar=new m(this,{backKey:"loading_bar_back",fillKey:"loading_bar_fill",overlayKey:"loading_bar_overlay",overlayOriginY:.35}),this.loadingBar.x=.5*this.scale.width,this.loadingBar.y=.575*this.scale.height,this.loadingBar.setScale(this.gameScale),this.world.add(this.loadingBar);var i=W.ClassNameToString(this.sys.settings.data.sceneToLoad);if(h.Instance.LoadAssetPack(this,i),this.sys.settings.data.additionalAssetBundles){for(var r=0;r<this.sys.settings.data.additionalAssetBundles.length;r++)h.Instance.LoadAssetPack(this,this.sys.settings.data.additionalAssetBundles[r]);this.sys.settings.data.additionalAssetBundles=[]}this.load.on("progress",this.UpdateProgress,this)}},{key:"create",value:function create(){LoadingScreen_get(LoadingScreen_getPrototypeOf(LoadingScreen.prototype),"create",this).call(this)}},{key:"update",value:function update(e,t){LoadingScreen_get(LoadingScreen_getPrototypeOf(LoadingScreen.prototype),"update",this).call(this,e,t),0==this.load.totalToLoad&&(this.targetProgress=1),this.progress<this.targetProgress&&(this.progress+=this.progressSpeed,this.loadingBar.SetProgress(this.progress),.9<=this.progress&&!this.fadeTween&&(this.fadeTween=this.tweens.add({targets:this.loadingBar,alpha:{value:0,duration:500,ease:"Back.easeOut"}}))),!this.finished&&1<=this.progress&&(this.finished=!0,s.Instance.StartScene(this.sys.settings.data.sceneToLoad,this.sys.settings.data))}},{key:"UpdateProgress",value:function UpdateProgress(e){this.targetProgress=e,this.progress<this.targetProgress&&(this.progress+=this.progressSpeed,this.loadingBar.SetProgress(this.progress))}},{key:"Destroy",value:function Destroy(){this.fadeTween&&(this.fadeTween.remove(),this.fadeTween=null),LoadingScreen_get(LoadingScreen_getPrototypeOf(LoadingScreen.prototype),"Destroy",this).call(this)}}]),LoadingScreen}();function MPDOMClasses_typeof(e){return(MPDOMClasses_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MPDOMClasses_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var b=function(){function MPDOMClasses(){!function MPDOMClasses_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MPDOMClasses)}return function MPDOMClasses_createClass(e,t,n){return t&&MPDOMClasses_defineProperties(e.prototype,t),n&&MPDOMClasses_defineProperties(e,n),e}(MPDOMClasses,null,[{key:"LoadData",value:function LoadData(e,t){MPDOMClasses.data=e.cache.json.get(t)}},{key:"GetClassConfig",value:function GetClassConfig(e){for(var t=e.split(" "),n=t.length,i=[t.slice(0)],r=1;r<n;r++){i[r]=[];for(var o=0;o<n;o++)for(var a=o;a<=n;a++)if(!(n<=a+r)){for(var s=t[o],l=1;l<=r;l++)s+=" "+t[a+l];i[r].push(s)}}var c=[];n=i.length;for(r=0;r<n;r++){var u=i[r].length;for(o=0;o<u;o++)for(var p in MPDOMClasses.data)p==i[r][o]&&c.push(MPDOMClasses.data[p])}var f={};n=c.length;for(r=0;r<n;r++)MPDOMClasses.ObjectExtend(f,c[r]);return f}},{key:"ObjectExtend",value:function ObjectExtend(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&("object"===MPDOMClasses_typeof(e[n])&&"object"===MPDOMClasses_typeof(arguments[t][n])?MPDOMClasses.ObjectExtend(e[n],arguments[t][n]):e[n]=arguments[t][n]);return e}}]),MPDOMClasses}();function MPDOMButton_typeof(e){return(MPDOMButton_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MPDOMButton_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MPDOMButton_get(e,t,n){return(MPDOMButton_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function MPDOMButton_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MPDOMButton_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function MPDOMButton_setPrototypeOf(e,t){return(MPDOMButton_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MPDOMButton_createSuper(i){return function(){var e,t=MPDOMButton_getPrototypeOf(i);if(function MPDOMButton_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MPDOMButton_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MPDOMButton_possibleConstructorReturn(e,t){return!t||"object"!==MPDOMButton_typeof(t)&&"function"!=typeof t?MPDOMButton_assertThisInitialized(e):t}(this,e)}}function MPDOMButton_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MPDOMButton_getPrototypeOf(e){return(MPDOMButton_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(){!function MPDOMButton_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MPDOMButton_setPrototypeOf(e,t)}(MPDOMButton,Phaser.GameObjects.Container);var S=MPDOMButton_createSuper(MPDOMButton);function MPDOMButton(e,t,n){var i;!function MPDOMButton_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MPDOMButton);var r=(n=n||{}).x||0,o=n.y||0,a=n.frames||[],s=n.atlas||"ui_atlas",l=n.prefix||"",c=n.id||"domui_button",u=n.title||"Button",p=n.noDom||!1,f=(null!==n.domClass&&b.GetClassConfig(n.domClass||"dom_button std")||{})[e.game.buttonSize]||{tablet:{},mobile:{}},h=l+a[0],m=l+(1<a.length?a[1]:a[0]);i=S.call(this,e,r,o),W.AddChild(MPDOMButton_assertThisInitialized(i),t),i.buttonOrigin=n.buttonOrigin||new Phaser.Math.Vector2(.5,.5),i.desktop=gt.Instance.deviceManager.desktop,i.unselectedFrame=h,i.selectedFrame=m,i.prefix=l,i.buttonId=c,i.buttonTitle=u,i.noDom=p,i.tabIndex=n.tabIndex||-1,i.button=i.scene.add.sprite(0,0,s,h),i.button.setOrigin(i.buttonOrigin.x,i.buttonOrigin.y),i.add(i.button);var y=n.spriteWidth||f.spriteWidth||i.button.frame.realWidth,g=n.spriteHeight||f.spriteHeight||i.button.frame.realHeight,d=n.buttonWidth||f.buttonWidth||i.button.frame.realWidth,_=n.buttonHeight||f.buttonHeight||i.button.frame.realHeight,P=new Phaser.Geom.Point(d,_);return i.buttonSize=P,i.baseImageScale=new Phaser.Geom.Point(y/i.button.frame.realWidth,g/i.button.frame.realHeight),i.button.setScale(i.baseImageScale.x,i.baseImageScale.y),i.button.setInteractive({useHandCursor:!0}),i._onMouseMove=i.OnMouseMove.bind(MPDOMButton_assertThisInitialized(i)),i._onKeyDown=i.OnKeyDown.bind(MPDOMButton_assertThisInitialized(i)),i.buttonClickAudio=null,i.buttonHoverAudioArray=[],i.hoverTweenConfig=null,i.voAudio=null,i.voAudioDelay=.15,i.attemptFullscreen=!0,i.inputEnabled=!0,i.isOver=!1,i.isDown=!1,i.buttonSelected=!1,i.enableOnResume=!1,n.callback&&i.SetCallbackFunction(n.callback,n.context),n.onDown&&(i.onDown=n.onDown,i.onDownContext=n.onDownContext),n.onOver&&(i.onOver=n.onOver,i.onOverContext=n.onOverContext),n.onOut&&(i.onOut=n.onOut,i.onOutContext=n.onOutContext),n.rolloverSound&&i.AddRolloverSound(n.rolloverSound),n.clickSound&&i.SetClickSound(n.clickSound),n.vo&&i.SetVOSound(n.vo),i}return function MPDOMButton_createClass(e,t,n){return t&&MPDOMButton_defineProperties(e.prototype,t),n&&MPDOMButton_defineProperties(e,n),e}(MPDOMButton,[{key:"Enable",value:function Enable(e){this.inputEnabled=!0,this.buttonElement||this.CreateDOMButton(),this.buttonElement&&(e&&this.buttonElement.parent.insertBefore(this.buttonElement.node,e?e.nextSibling:null),this.buttonElement.visible=!0),this.button.on("pointerout",this.OnInputOut,this),this.button.on("pointerup",this.OnInputUp,this),this.button.on("pointerdown",this.OnInputDown,this),this.desktop&&this.button.on("pointerover",this.OnInputOver,this),this.scene.events.on("pause",this.OnPause,this),this.enableOnResume=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.document.addEventListener("keydown",this._onKeyDown,!1)}},{key:"Disable",value:function Disable(){this.scene.events.off("pause",this.OnPause,this),this.scene.events.on("resume",this.OnResume,this),this.enableOnResume=!1,this.inputEnabled=!1,this.buttonElement&&(this.buttonElement.visible=!1),this.button.off("pointerout",this.OnInputOut,this),this.button.off("pointerup",this.OnInputUp,this),this.button.off("pointerdown",this.OnInputDown,this),this.button.off("pointerover",this.OnInputOver,this),window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.document.removeEventListener("keydown",this._onKeyDown,!1)}},{key:"Show",value:function Show(){this.visible=!0,this.SetButtonSelected(!1)}},{key:"Hide",value:function Hide(){this.visible=!1}},{key:"SetCallbackFunction",value:function SetCallbackFunction(r,o){this._callback=function(e,t,n){if((!t.event||"mouseup"!=t.event.type||0==t.event.button)&&this.inputEnabled&&this.visible){this.buttonClickAudio&&w.Instance.Play(this.buttonClickAudio.layer,this.buttonClickAudio.key);var i=gt.Instance.deviceManager;!this.attemptFullscreen||i.desktop||i.ipad||this.scene.scale.isFullscreen||i.disableFullscreen||this.scene.scale.startFullscreen(),this.OnInputOver(),r.call(o,e,t)}}}},{key:"CreateDOMButton",value:function CreateDOMButton(){var e={cursor:"pointer",width:this.buttonSize.x+"px",height:this.buttonSize.y+"px","background-color":this.debug?"rgba(255,0,0,0.5)":"transparent","border-style":"none"};this.buttonElement=this.scene.add.dom(0,0,"button",e),this.buttonElement.setOrigin(this.buttonOrigin.x,this.buttonOrigin.y),this.add(this.buttonElement),this.buttonElement.tabIndex=this.tabIndex,this.buttonElement.node.id=this.buttonId,this.buttonElement.node.setAttribute("aria-label",this.buttonTitle),(this.buttonElement.node.button=this).buttonElement.node.addEventListener("focus",function(e){this.button.isDown=!0,this.button.OnInputOver(this.button,this.button.scene.input.activePointer,e)}),this.buttonElement.node.addEventListener("focusout",function(e){this.button.isDown=!1,this.button.OnInputOut(this.button,this.button.scene.input.activePointer,e)}),this.desktop&&this.ForwardEvents()}},{key:"ForwardEvents",value:function ForwardEvents(e){if(this.buttonElement){e=e||["click","mousedown","mousemove","mouseup","touchstart","touchmove","touchend"];var t=function forwarder(e){var t=new e.constructor(e.type,e);this.scene.game.canvas.dispatchEvent(t),e.preventDefault()}.bind(this);e.forEach(function(e){this.buttonElement.node.addEventListener(e,t,!0)}.bind(this)),~e.indexOf("click")&&this.buttonElement.node.addEventListener("click",function(e){0===e.clientX&&0===e.clientY&&this.button.OnInputUp(this.button.button,this.button.scene.input.activePointer,e)})}}},{key:"OnInputOver",value:function OnInputOver(){if(this.scene&&!this.isOver&&!this.ShouldIgnore()){if(!this.isOver){for(var e=0;e<this.buttonHoverAudioArray.length;e++){var t=this.buttonHoverAudioArray[e];w.Instance.Play(t.layer,t.key)}this.voAudio&&w.Instance.Play(this.voAudio.layer,this.voAudio.key),this.hoverTweenConfig&&(this.hoverTween&&this.hoverTween.stop(),this.hoverTween=this.scene.tweens.add(this.hoverTweenConfig))}this.onOver&&this.onOver.call(this.onOverContext,this),this.isOver=!0,this.SetButtonSelected(!0)}}},{key:"OnInputOut",value:function OnInputOut(){if(this.scene){this.isOver&&this.hoverTween&&(this.hoverTween.restart(),this.hoverTween.stop()),this.onOut&&this.onOut.call(this.onOutContext,this),this.isOver=!1,this.isDown=!1,this.SetButtonSelected(!1);for(var e=0;e<this.buttonHoverAudioArray.length;e++){var t=this.buttonHoverAudioArray[e];w.Instance.Stop(t.layer,t.key)}}}},{key:"OnInputDown",value:function OnInputDown(){this.ShouldIgnore()||(this.isDown=!0,this.SetButtonSelected(!0),this.onDown&&this.onDown.call(this.onDownContext,this))}},{key:"OnInputUp",value:function OnInputUp(e,t,n,i){this.ShouldIgnore()||(this.isDown&&this.OnClick(e,t,n,i),!this.isOver||this.ShouldIgnore()?this.OnInputOut():this.OnInputOver())}},{key:"ShouldIgnore",value:function ShouldIgnore(){return this.scene&&this.scene.scene.manager.scenes[this.scene.scene.manager.scenes.length-1].key!=this.scene.key}},{key:"OnClick",value:function OnClick(e,t,n,i){this._callback&&this._callback.call(this,this.button,e,i)}},{key:"OnMouseMove",value:function OnMouseMove(){if(this.buttonElement&&this.isOver&&"none"!=this.buttonElement.node.style.outline){this.buttonElement.node.style.outline="none";for(var e=this.scene.input.activePointer,t=!1,n=0,i=this.scene.cameras.cameras.length;n<i;n++){var r=this.scene.cameras.cameras[n];if(0<=this.scene.input.manager.hitTest(e,[this.button],r).length){t=!0;break}}t||this.OnInputOut(this,e)}}},{key:"OnKeyDown",value:function OnKeyDown(e){this.buttonElement&&9===e.keyCode&&(this.buttonElement.node.style.outline="")}},{key:"SetFrames",value:function SetFrames(e){this.unselectedFrame=this.prefix+e[0],this.selectedFrame=this.prefix+(1<e.length?e[1]:e[0]),this.SetButtonSelected(this.buttonSelected)}},{key:"SetButtonSelected",value:function SetButtonSelected(e){this.buttonSelected=e,this.button.setFrame(e?this.selectedFrame:this.unselectedFrame)}},{key:"AddRolloverSound",value:function AddRolloverSound(e){this.buttonHoverAudioArray.push(e)}},{key:"SetHoverEffect",value:function SetHoverEffect(e){this.hoverTweenConfig=e,this.hoverTweenConfig.targets=this}},{key:"SetClickSound",value:function SetClickSound(e){this.buttonClickAudio=e}},{key:"SetVOSound",value:function SetVOSound(e){this.voAudio=e}},{key:"SetTitle",value:function SetTitle(e){this.buttonTitle=e,this.buttonElement&&this.buttonElement.node.setAttribute("aria-label",this.buttonTitle)}},{key:"OnPause",value:function OnPause(){this.enableOnResume&&(this.Hide(),this.Disable(),this.enableOnResume=!0)}},{key:"OnResume",value:function OnResume(){this.enableOnResume&&(this.scene.events.off("resume",this.OnResume,this),this.Show(),this.Enable())}},{key:"destroy",value:function destroy(){this.buttonHoverAudioArray=null,this.buttonClickAudio=null,this._callback=null,this.button&&(this.button.destroy(),this.button=null),this.buttonElement&&(this.buttonElement.destroy(),this.buttonElement=null),window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.document.removeEventListener("keydown",this._onKeyDown,!1),MPDOMButton_get(MPDOMButton_getPrototypeOf(MPDOMButton.prototype),"destroy",this).call(this)}}]),MPDOMButton}();function PopupPanel_typeof(e){return(PopupPanel_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PopupPanel_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function PopupPanel_setPrototypeOf(e,t){return(PopupPanel_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function PopupPanel_createSuper(i){return function(){var e,t=PopupPanel_getPrototypeOf(i);if(function PopupPanel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=PopupPanel_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function PopupPanel_possibleConstructorReturn(e,t){return!t||"object"!==PopupPanel_typeof(t)&&"function"!=typeof t?function PopupPanel_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function PopupPanel_getPrototypeOf(e){return(PopupPanel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(){!function PopupPanel_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PopupPanel_setPrototypeOf(e,t)}(PopupPanel,Phaser.GameObjects.Container);var a=PopupPanel_createSuper(PopupPanel);function PopupPanel(e,t){var n;!function PopupPanel_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PopupPanel),n=a.call(this,e);var i=void 0!==t.x?t.x:.5*n.scene.scale.width,r=void 0!==t.y?t.y:.5*n.scene.scale.height;n.setPosition(i,r);var o=n.scene.add.sprite(0,0,"popup_atlas","square_back.png");return o.setOrigin(.5),n.add(o),n.CreateShards(),n}return function PopupPanel_createClass(e,t,n){return t&&PopupPanel_defineProperties(e.prototype,t),n&&PopupPanel_defineProperties(e,n),e}(PopupPanel,[{key:"CreateShards",value:function CreateShards(){for(var e=[-135,-60,-45,25,60,85,105,130,165],t=0;t<e.length;t++){Phaser.Math.DegToRad(e[t]);var n=this.GetRectanglePoint(e[t],840*this.scene.gameScale,600*this.scene.gameScale),i=this.scene.add.sprite(n.x,n.y,"popup_atlas","pop_up_spike_0"+(t+1)+".png");i.setOrigin(.5),this.add(i),this.scene.tweens.add({targets:i,x:.9*i.x,y:.9*i.y,repeat:-1,duration:4e3,ease:"Quad.easeInOut",yoyo:!0})}}},{key:"GetRectanglePoint",value:function GetRectanglePoint(e,t,n){var i=Phaser.Math.DegToRad(e),r=Math.cos(i),o=Math.sin(i),a=new Phaser.Math.Vector2;return t*Math.abs(o)<n*Math.abs(r)?(a.x=Math.sign(r)*(.5*t),a.y=Math.sign(r)*(.5*n)*Math.tan(i)):(a.y=Math.sign(o)*(.5*n),a.x=Math.sign(o)*(.5*t)*(1/Math.tan(i))),a}}]),PopupPanel}();function LocalisationManager_typeof(e){return(LocalisationManager_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LocalisationManager_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function LocalisationManager_setPrototypeOf(e,t){return(LocalisationManager_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function LocalisationManager_createSuper(i){return function(){var e,t=LocalisationManager_getPrototypeOf(i);if(function LocalisationManager_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=LocalisationManager_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function LocalisationManager_possibleConstructorReturn(e,t){return!t||"object"!==LocalisationManager_typeof(t)&&"function"!=typeof t?LocalisationManager_assertThisInitialized(e):t}(this,e)}}function LocalisationManager_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LocalisationManager_getPrototypeOf(e){return(LocalisationManager_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var z=function(){!function LocalisationManager_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LocalisationManager_setPrototypeOf(e,t)}(LocalisationManager,Phaser.Plugins.BasePlugin);var n=LocalisationManager_createSuper(LocalisationManager);function LocalisationManager(e){var t;return function LocalisationManager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LocalisationManager),t=n.call(this,e),LocalisationManager.Instance=LocalisationManager_assertThisInitialized(t),t.language="en",t.localisationData={},t}return function LocalisationManager_createClass(e,t,n){return t&&LocalisationManager_defineProperties(e.prototype,t),n&&LocalisationManager_defineProperties(e,n),e}(LocalisationManager,[{key:"SetLocalisationData",value:function SetLocalisationData(e){this.language=gt.Instance.config.language,this.localisationData=e,this.mainFont="ar"!=this.language?"FredBurger Black":"FredBurger Black Arabic"}},{key:"GetString",value:function GetString(e){if(!this.localisationData)return e;var t=this.localisationData[e];if(!t)return e;var n=t[this.language];return n||t.en}},{key:"IsRightToLeft",value:function IsRightToLeft(){return"ar"==this.language}}]),LocalisationManager}();function MinigameTutorialPopup_typeof(e){return(MinigameTutorialPopup_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MinigameTutorialPopup_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MinigameTutorialPopup_get(e,t,n){return(MinigameTutorialPopup_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function MinigameTutorialPopup_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MinigameTutorialPopup_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function MinigameTutorialPopup_setPrototypeOf(e,t){return(MinigameTutorialPopup_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MinigameTutorialPopup_createSuper(i){return function(){var e,t=MinigameTutorialPopup_getPrototypeOf(i);if(function MinigameTutorialPopup_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MinigameTutorialPopup_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MinigameTutorialPopup_possibleConstructorReturn(e,t){return!t||"object"!==MinigameTutorialPopup_typeof(t)&&"function"!=typeof t?MinigameTutorialPopup_assertThisInitialized(e):t}(this,e)}}function MinigameTutorialPopup_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MinigameTutorialPopup_getPrototypeOf(e){return(MinigameTutorialPopup_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(){!function MinigameTutorialPopup_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MinigameTutorialPopup_setPrototypeOf(e,t)}(MinigameTutorialPopup,Phaser.GameObjects.Container);var u=MinigameTutorialPopup_createSuper(MinigameTutorialPopup);function MinigameTutorialPopup(e,t){var n;!function MinigameTutorialPopup_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MinigameTutorialPopup),(n=u.call(this,e,t)).x=.5*n.scene.scale.width,n.y=.5*n.scene.scale.height,n.tintOverlay=n.scene.add.rectangle(0,0,n.scene.scale.width,n.scene.scale.height,0,1),n.tintOverlay.alpha=0,n.tintOverlay.setOrigin(.5),n.add(n.tintOverlay),n.contentContainer=n.scene.add.container(0,n.scene.scale.height),n.add(n.contentContainer),n.panel=new F(n.scene,{x:0,y:0}),n.contentContainer.add(n.panel);var i="#UNKNOWN",r="#UNKNOWN",o=null,a=t.id,s=Ze.Data[a];s&&(i=s.title,o=n.scene.deviceManager.desktop?(r=s.tutorialDesktop,s.spineDesktop):(r=s.tutorialMobile,s.spineMobile));var l={fontFamily:z.Instance.mainFont,fontSize:48*n.scene.gameScale+"px",color:"#000000",wordWrap:{width:540*n.scene.gameScale},align:"center"};n.titleText=n.scene.add.text(0,-200*n.scene.gameScale,z.Instance.GetString(i),l),n.titleText.setOrigin(.5),W.ClampTextToDimensions(n.titleText,740*n.scene.gameScale,100*n.scene.gameScale),n.titleText.alpha=0,n.contentContainer.add(n.titleText),l.fontSize=24*n.scene.gameScale+"px",n.tutorialText=n.scene.add.text(0,-120*n.scene.gameScale,z.Instance.GetString(r),l),n.tutorialText.setOrigin(.5),W.ClampTextToDimensions(n.tutorialText,740*n.scene.gameScale,100*n.scene.gameScale),n.tutorialText.alpha=0,n.contentContainer.add(n.tutorialText),n.SetSpine(o),n.continueButton=new C(n.scene,n.contentContainer,{x:0,y:200*n.scene.gameScale,frames:["continue_unselected.png","continue_selected.png"],atlas:"ui_atlas",id:"domui_GAME_continue",domClass:"dom_button",title:"Continue",callback:n.OnContinueButtonPressed,context:MinigameTutorialPopup_assertThisInitialized(n),clickSound:{layer:"sfx_ui_shared",key:"ui_button_forward"}});var c=Phaser.Math.RND.integerInRange(1,3);return n.bear=n.scene.add.sprite(.21*-n.scene.scale.width,.5*n.scene.scale.height,"popup_atlas","instruction_bear_"+c+".png"),n.bear.setOrigin(.5,1),n.add(n.bear),n.StartSequence(),n}return function MinigameTutorialPopup_createClass(e,t,n){return t&&MinigameTutorialPopup_defineProperties(e.prototype,t),n&&MinigameTutorialPopup_defineProperties(e,n),e}(MinigameTutorialPopup,[{key:"update",value:function update(){}},{key:"StartSequence",value:function StartSequence(){this.continueTween=this.scene.tweens.add({targets:this.continueButton,scaleX:1.1,scaleY:1.1,duration:1500,ease:"Quad.easeInOut",yoyo:!0,repeat:-1}),this.scene.tweens.add({targets:this.tintOverlay,alpha:{value:.4,delay:250,duration:750,ease:"Linear"}}),this.contentContainer.setAlpha(0),this.scene.tweens.add({targets:this.contentContainer,alpha:{value:1,duration:750,ease:"Back.easeIn"},y:{value:0,delay:400,duration:750,ease:"Back.easeOut"},onComplete:this.OnShowComplete,onCompleteScope:this}),this.bear.setPosition(this.bear.x,.5*this.scene.scale.height+this.bear.height),this.scene.tweens.add({targets:this.bear,y:{value:.5*this.scene.scale.height,delay:750,duration:500,ease:"Sine.easeOut"}}),this.scene.time.delayedCall(400,w.Instance.Play,["sfx_minigame","tutorial_slide_in"],w.Instance)}},{key:"SetSpine",value:function SetSpine(e){this.spine=this.scene.add.spine(0,50*this.scene.gameScale,"how_to_play",e,!0),this.spine.setScale(this.scene.gameScale),this.spine.alpha=0,this.contentContainer.add(this.spine)}},{key:"OnContinueButtonPressed",value:function OnContinueButtonPressed(){this.continueButton.Disable(),this.emit("onHideStart"),this.scene.tweens.add({targets:this.contentContainer,alpha:{value:0,duration:750,ease:"Back.easeIn"},y:{value:720*this.scene.gameScale,duration:750,ease:"Back.easeIn"}}),this.scene.tweens.add({targets:this.bear,y:{value:.5*this.scene.scale.height+this.bear.height,delay:100,duration:500,ease:"Sine.easeIn"}}),this.textTween&&this.textTween.stop(),this.titleTween=this.scene.tweens.add({targets:this.titleText,alpha:{value:0,duration:500,ease:"Linear"}}),this.textTween=this.scene.tweens.add({targets:this.tutorialText,alpha:{value:0,duration:500,ease:"Linear"}}),this.spineTween=this.scene.tweens.add({targets:this.spine,alpha:{value:0,duration:500,ease:"Linear"}}),this.scene.tweens.add({targets:this,alpha:{value:this.skipFade?1:0,delay:750,duration:500,hold:500,ease:"Linear"},onComplete:this.OnHideComplete,onCompleteScope:this}),this.scene.input.keyboard.off("keydown",this.OnContinueButtonPressed,this),w.Instance.Play("sfx_minigame","tutorial_slide_out")}},{key:"OnShowComplete",value:function OnShowComplete(){this.continueButton.Enable(),this.titleTween=this.scene.tweens.add({targets:this.titleText,alpha:{value:1,duration:500,ease:"Linear"}}),this.textTween=this.scene.tweens.add({targets:this.tutorialText,alpha:{value:1,duration:500,ease:"Linear"}}),this.spineTween=this.scene.tweens.add({targets:this.spine,alpha:{value:1,duration:500,ease:"Linear"}}),this.scene.input.keyboard.on("keydown",this.OnContinueButtonPressed,this),this.emit("onShowComplete")}},{key:"OnHideComplete",value:function OnHideComplete(){this.visible=!1,this.scene.SetState(V.State.PreGame)}},{key:"destroy",value:function destroy(){this.continueTween&&(this.continueTween.remove(),this.continueTween=null),this.titleTween&&(this.titleTween.remove(),this.titleTween=null),this.textTween&&(this.textTween.remove(),this.textTween=null),this.spineTween&&(this.spineTween.remove(),this.spineTween=null),MinigameTutorialPopup_get(MinigameTutorialPopup_getPrototypeOf(MinigameTutorialPopup.prototype),"destroy",this).call(this)}}]),MinigameTutorialPopup}();function HelpScene_typeof(e){return(HelpScene_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HelpScene_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function HelpScene_get(e,t,n){return(HelpScene_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function HelpScene_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=HelpScene_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function HelpScene_setPrototypeOf(e,t){return(HelpScene_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function HelpScene_createSuper(i){return function(){var e,t=HelpScene_getPrototypeOf(i);if(function HelpScene_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=HelpScene_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function HelpScene_possibleConstructorReturn(e,t){return!t||"object"!==HelpScene_typeof(t)&&"function"!=typeof t?function HelpScene_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function HelpScene_getPrototypeOf(e){return(HelpScene_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(){!function HelpScene_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HelpScene_setPrototypeOf(e,t)}(HelpScene,f);var e=HelpScene_createSuper(HelpScene);function HelpScene(){return function HelpScene_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HelpScene),e.call(this,"HelpScene")}return function HelpScene_createClass(e,t,n){return t&&HelpScene_defineProperties(e.prototype,t),n&&HelpScene_defineProperties(e,n),e}(HelpScene,[{key:"create",value:function create(){HelpScene_get(HelpScene_getPrototypeOf(HelpScene.prototype),"create",this).call(this);var e=this.add.image(.5*this.scale.width,.5*this.scale.height,"menus_background");e.setOrigin(.5),this.world.add(e);var t=this.add.image(e.x-.5*e.width,e.y,"menus_background_slice_tile");t.displayWidth=.5*(this.scale.width-e.width),t.setOrigin(1,.5),this.world.add(t);var n=this.add.image(e.x+.5*e.width,e.y,"menus_background_slice_tile");n.displayWidth=t.displayWidth,n.setOrigin(0,.5),this.world.add(n);var i=s.Instance.activeScenes[0],r=this.scene.manager.getScene(i).GetID(),o=new g(this,{id:r});o.on("onHideStart",this.OnContinueButtonPressed,this),this.ui.add(o)}},{key:"OnContinueButtonPressed",value:function OnContinueButtonPressed(){s.Instance.WakeAllScenes(),s.Instance.StopScene(this.key),s.Instance.StopScene("PauseScene")}}]),HelpScene}();function MPDOMToggleButton_typeof(e){return(MPDOMToggleButton_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MPDOMToggleButton_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MPDOMToggleButton_get(e,t,n){return(MPDOMToggleButton_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function MPDOMToggleButton_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MPDOMToggleButton_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function MPDOMToggleButton_setPrototypeOf(e,t){return(MPDOMToggleButton_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MPDOMToggleButton_createSuper(i){return function(){var e,t=MPDOMToggleButton_getPrototypeOf(i);if(function MPDOMToggleButton_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MPDOMToggleButton_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MPDOMToggleButton_possibleConstructorReturn(e,t){return!t||"object"!==MPDOMToggleButton_typeof(t)&&"function"!=typeof t?MPDOMToggleButton_assertThisInitialized(e):t}(this,e)}}function MPDOMToggleButton_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MPDOMToggleButton_getPrototypeOf(e){return(MPDOMToggleButton_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(){!function MPDOMToggleButton_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MPDOMToggleButton_setPrototypeOf(e,t)}(MPDOMToggleButton,C);var r=MPDOMToggleButton_createSuper(MPDOMToggleButton);function MPDOMToggleButton(e,t,n){var i;return function MPDOMToggleButton_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MPDOMToggleButton),i=r.call(this,e,t,n),n=n||{},i.toggleActive=void 0===n.toggleActive||n.toggleActive,i.toggleOnFrames=n.frames,i.toggleOffFrames=n.toggleOffFrames,i.toggleEvent=n.toggleEvent,i.UpdateToggleFrames(),i.onToggle=n.onToggle,i.toggleEvent&&i.scene.game.events.on(i.toggleEvent,i.SetToggle,MPDOMToggleButton_assertThisInitialized(i)),i}return function MPDOMToggleButton_createClass(e,t,n){return t&&MPDOMToggleButton_defineProperties(e.prototype,t),n&&MPDOMToggleButton_defineProperties(e,n),e}(MPDOMToggleButton,[{key:"OnClick",value:function OnClick(e,t,n,i){MPDOMToggleButton_get(MPDOMToggleButton_getPrototypeOf(MPDOMToggleButton.prototype),"OnClick",this).call(this,e,t,n,i),this.SetToggle(!this.toggleActive),this.onToggle&&this.onToggle.call(this,this.toggleActive)}},{key:"SetToggle",value:function SetToggle(e){this.toggleActive=e,this.UpdateToggleFrames()}},{key:"UpdateToggleFrames",value:function UpdateToggleFrames(){this.toggleActive?this.SetFrames(this.toggleOnFrames):this.SetFrames(this.toggleOffFrames)}},{key:"destroy",value:function destroy(){this.scene&&(this.toggleEvent&&this.scene.game.events.off(this.toggleEvent,this.SetToggle,this),MPDOMToggleButton_get(MPDOMToggleButton_getPrototypeOf(MPDOMToggleButton.prototype),"destroy",this).call(this))}}]),MPDOMToggleButton}();function ElementPosition_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _=function(){function ElementPosition(e,t,n){!function ElementPosition_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ElementPosition),n=n||{},this.scene=e,this.target=t,this.viewX=void 0!==n.x?n.x:0,this.viewY=void 0!==n.y?n.y:0,this.offsetX=void 0!==n.offsetX?n.offsetX:0,this.offsetY=void 0!==n.offsetY?n.offsetY:0,this.local=void 0===n.local||n.local,this.scene.scale.on("resize",this.UpdatePosition,this),this.UpdatePosition(),setTimeout(this.UpdatePosition.bind(this),50)}return function ElementPosition_createClass(e,t,n){return t&&ElementPosition_defineProperties(e.prototype,t),n&&ElementPosition_defineProperties(e,n),e}(ElementPosition,[{key:"UpdatePosition",value:function UpdatePosition(){if(this.scene&&this.target){var e=.5*(this.scene.scale.width-this.scene.viewport.width),t=.5*(this.scene.scale.height-this.scene.viewport.height);if(this.local||this.target.fixedToCamera||!this.target.parentContainer){this.target.fixedToCamera?this.target.cameraOffset:this.target,this.target.x=e+this.scene.viewport.width*this.viewX+this.offsetX,this.target.y=t+this.scene.viewport.height*this.viewY+this.offsetY,this.target.fixedToCamera&&this.target.cameraOffset.setTo(this.target.x,this.target.y)}else{var n=0,i=0;this.target.x=e+(this.scene.viewport.width*this.viewX+this.offsetX)-n,this.target.y=t+(this.scene.viewport.height*this.viewY+this.offsetY)-i}}}},{key:"destroy",value:function destroy(){this.scene&&(this.scene.scale.off("resize",this.UpdatePosition,this),this.scene=null,this.target=null)}}]),ElementPosition}();function MPDOMPanel_typeof(e){return(MPDOMPanel_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MPDOMPanel_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MPDOMPanel_get(e,t,n){return(MPDOMPanel_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function MPDOMPanel_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MPDOMPanel_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function MPDOMPanel_setPrototypeOf(e,t){return(MPDOMPanel_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MPDOMPanel_createSuper(i){return function(){var e,t=MPDOMPanel_getPrototypeOf(i);if(function MPDOMPanel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MPDOMPanel_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MPDOMPanel_possibleConstructorReturn(e,t){return!t||"object"!==MPDOMPanel_typeof(t)&&"function"!=typeof t?MPDOMPanel_assertThisInitialized(e):t}(this,e)}}function MPDOMPanel_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MPDOMPanel_getPrototypeOf(e){return(MPDOMPanel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M=function(){!function MPDOMPanel_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MPDOMPanel_setPrototypeOf(e,t)}(MPDOMPanel,Phaser.GameObjects.Container);var c=MPDOMPanel_createSuper(MPDOMPanel);function MPDOMPanel(e,t,n){var i;!function MPDOMPanel_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MPDOMPanel),n=n||{};var r=(b.GetClassConfig(n.domClass||"dom_panel")||{})[e.game.buttonSize]||{tablet:{},mobile:{}},o=n.x||r.x||.5,a=n.y||r.y||.5,s=n.offsetX||r.offsetX||0,l=n.offsetY||r.offsetY||0;return i=c.call(this,e),W.AddChild(MPDOMPanel_assertThisInitialized(i),t),i.offsetX=s,i.offsetY=l,i.elementPosition=new _(i.scene,MPDOMPanel_assertThisInitialized(i),{x:o,y:a,offsetX:i.offsetX*i.scene.gameScale,offsetY:i.offsetY*i.scene.gameScale,local:!1}),!1!==n.isScaled&&(i.scene.scale.on("resize",i.UpdateScale,MPDOMPanel_assertThisInitialized(i)),i.UpdateScale()),i}return function MPDOMPanel_createClass(e,t,n){return t&&MPDOMPanel_defineProperties(e.prototype,t),n&&MPDOMPanel_defineProperties(e,n),e}(MPDOMPanel,[{key:"UpdateScale",value:function UpdateScale(){var e=this.scene.viewport.height/window.innerHeight;this.setScale(e),this.elementPosition.offsetX=this.offsetX*e,this.elementPosition.offsetY=this.offsetY*e,this.elementPosition.UpdatePosition()}},{key:"destroy",value:function destroy(){this.scene&&(this.scene.scale.off("resize",this.UpdateScale,this),this.elementPosition&&(this.elementPosition.destroy(),this.elementPosition=null),MPDOMPanel_get(MPDOMPanel_getPrototypeOf(MPDOMPanel.prototype),"destroy",this).call(this))}}]),MPDOMPanel}();function PauseScene_typeof(e){return(PauseScene_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PauseScene_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function PauseScene_get(e,t,n){return(PauseScene_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function PauseScene_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PauseScene_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function PauseScene_setPrototypeOf(e,t){return(PauseScene_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function PauseScene_createSuper(i){return function(){var e,t=PauseScene_getPrototypeOf(i);if(function PauseScene_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=PauseScene_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function PauseScene_possibleConstructorReturn(e,t){return!t||"object"!==PauseScene_typeof(t)&&"function"!=typeof t?function PauseScene_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function PauseScene_getPrototypeOf(e){return(PauseScene_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(){!function PauseScene_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PauseScene_setPrototypeOf(e,t)}(PauseScene,f);var e=PauseScene_createSuper(PauseScene);function PauseScene(){return function PauseScene_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PauseScene),e.call(this,"PauseScene")}return function PauseScene_createClass(e,t,n){return t&&PauseScene_defineProperties(e.prototype,t),n&&PauseScene_defineProperties(e,n),e}(PauseScene,[{key:"create",value:function create(){PauseScene_get(PauseScene_getPrototypeOf(PauseScene.prototype),"create",this).call(this);var e=this.add.image(.5*this.scale.width,.5*this.scale.height,"menus_background");e.setOrigin(.5),this.world.add(e);var t=this.add.image(e.x-.5*e.width,e.y,"menus_background_slice_tile");t.displayWidth=.5*(this.scale.width-e.width),t.setOrigin(1,.5),this.world.add(t);var n=this.add.image(e.x+.5*e.width,e.y,"menus_background_slice_tile");n.displayWidth=t.displayWidth,n.setOrigin(0,.5),this.world.add(n),this.contentContainer=this.add.container(.5*this.scale.width,.5*this.scale.height),this.world.add(this.contentContainer);var i=new F(this,{x:0,y:0});this.contentContainer.add(i);var r={fontFamily:z.Instance.mainFont,fontSize:72*this.gameScale+"px",color:"#000000"};this.titleText=this.add.text(0,.3*-this.scale.height,z.Instance.GetString("pause"),r),this.titleText.setOrigin(.5),this.contentContainer.add(this.titleText),this.homeButton=new C(this,this.contentContainer,{x:.065*-this.scale.width,y:.15*-this.scale.height,frames:["pause_home_unselected.png","pause_home_selected.png"],atlas:"ui_atlas",id:"domui_pause_home",title:"Home",domClass:"dom_button",callback:this.OnHomeButtonPressed,context:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_medium"}}),this.homeButton.Enable(),this.audioButton=new T(this,this.contentContainer,{x:.065*this.scale.width,y:.15*-this.scale.height,frames:["pause_audio_on_unselected.png","pause_audio_on_selected.png"],toggleOffFrames:["pause_audio_off_unselected.png","pause_audio_off_selected.png"],atlas:"ui_atlas",id:"domui_pause_audio",title:"Audio",domClass:"dom_button",onToggle:this.OnAudioButtonPressed.bind(this),toggleActive:w.Instance.audioEnabled,toggleEvent:"audioEnabled",clickSound:{layer:"sfx_ui_shared",key:"ui_button_medium"}}),this.audioButton.Enable(),this.helpButton=new C(this,this.contentContainer,{y:.025*this.scale.height,frames:["pause_how_to_play_unselected.png","pause_how_to_play_selected.png"],atlas:"ui_atlas",id:"domui_pause_how_to_play",title:"How to Play",domClass:"dom_button",callback:this.OnHelpButtonPressed,context:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_medium"}}),this.helpButton.Enable();var o=Object.assign({},r);o.fontSize=48*this.gameScale+"px",o.color="#ffffff",o.stroke="#ff9000",o.strokeThickness=Math.ceil(12*this.gameScale);var a=this.add.text(0,0,z.Instance.GetString("how_to_play"),o);a.setOrigin(.5,.6),W.ClampTextToDimensions(a,380*this.gameScale,120*this.gameScale),this.helpButton.add(a),this.playButton=new C(this,this.contentContainer,{y:.275*this.scale.height,frames:["pause_play_unselected.png","pause_play_selected.png"],atlas:"ui_atlas",id:"domui_pause_play",title:"Play",domClass:"dom_button",callback:this.OnPlayButtonPressed,context:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_forward"}}),this.playButton.Enable(),this.CreateConfirmation(),w.Instance.FadeVolume("music_layer","music_main_loop",this,.5),this.StartSequence()}},{key:"CreateConfirmation",value:function CreateConfirmation(){this.confirmation=this.add.container(.5*this.scale.width,.5*this.scale.height),this.confirmation.setVisible(!1),this.world.add(this.confirmation),this.tintOverlay=this.add.rectangle(0,0,this.scale.width,this.scale.height,0,.5),this.tintOverlay.setOrigin(.5),this.confirmation.add(this.tintOverlay);var e=this.add.sprite(0,0,"popup_atlas","exit_pop_up.png");e.setOrigin(.5),this.confirmation.add(e);var t={fontFamily:z.Instance.mainFont,fontSize:64*this.gameScale+"px",color:"#000000",align:"center",wordWrap:{width:640*this.gameScale}},n=this.add.text(0,.15*-this.scale.height,z.Instance.GetString("exit_confirmation"),t);n.setOrigin(.5),this.confirmation.add(n),this.noButton=new C(this,this.contentContainer,{x:.075*-this.scale.width,y:.15*this.scale.height,frames:["stop_exit_unselected.png","stop_exit_selected.png"],atlas:"ui_atlas",id:"domui_pause_no",title:"No",domClass:"dom_button",callback:this.OnQuitNoButtonPressed,context:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_medium"}}),this.confirmation.add(this.noButton),this.yesButton=new C(this,this.contentContainer,{x:.075*this.scale.width,y:.15*this.scale.height,frames:["exit_game_unselected.png","exit_game_selected.png"],atlas:"ui_atlas",id:"domui_pause_yes",title:"Yes",domClass:"dom_button",callback:this.OnQuitYesButtonPressed,context:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_medium"}}),this.confirmation.add(this.yesButton)}},{key:"update",value:function update(e,t){PauseScene_get(PauseScene_getPrototypeOf(PauseScene.prototype),"update",this).call(this,e,t)}},{key:"StartSequence",value:function StartSequence(){this.contentContainer.setScale(0),this.showTween=this.tweens.add({targets:this.contentContainer,scaleY:{value:1,duration:350,ease:"Quad.easeOut"},scaleX:{value:1,duration:350,ease:"Quad.easeOut"}})}},{key:"OnPlayButtonPressed",value:function OnPlayButtonPressed(){s.Instance.WakeAllScenes(),s.Instance.StopScene(this.key)}},{key:"OnHelpButtonPressed",value:function OnHelpButtonPressed(){s.Instance.StartScene(d,{additive:!0})}},{key:"OnHomeButtonPressed",value:function OnHomeButtonPressed(){this.confirmation.setVisible(!0),this.noButton.Enable(),this.yesButton.Enable(),this.homeButton.Disable(),this.audioButton.Disable(),this.helpButton.Disable(),this.playButton.Disable()}},{key:"OnQuitNoButtonPressed",value:function OnQuitNoButtonPressed(){this.confirmation.setVisible(!1),this.noButton.Disable(),this.yesButton.Disable(),this.noButton.OnInputOut(this.input.activePointer),this.homeButton.Enable(),this.audioButton.Enable(),this.helpButton.Enable(),this.playButton.Enable()}},{key:"OnQuitYesButtonPressed",value:function OnQuitYesButtonPressed(){s.Instance.StartLoadingScene(y,Qe)}},{key:"Destroy",value:function Destroy(){this.showTween&&(this.showTween.remove(),this.showTween=null),PauseScene_get(PauseScene_getPrototypeOf(PauseScene.prototype),"Destroy",this).call(this)}}]),PauseScene}();function GameScene_typeof(e){return(GameScene_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GameScene_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function GameScene_get(e,t,n){return(GameScene_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function GameScene_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=GameScene_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function GameScene_setPrototypeOf(e,t){return(GameScene_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function GameScene_createSuper(i){return function(){var e,t=GameScene_getPrototypeOf(i);if(function GameScene_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=GameScene_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function GameScene_possibleConstructorReturn(e,t){return!t||"object"!==GameScene_typeof(t)&&"function"!=typeof t?function GameScene_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function GameScene_getPrototypeOf(e){return(GameScene_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(){!function GameScene_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GameScene_setPrototypeOf(e,t)}(GameScene,f);var t=GameScene_createSuper(GameScene);function GameScene(e){return function GameScene_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GameScene),t.call(this,e)}return function GameScene_createClass(e,t,n){return t&&GameScene_defineProperties(e.prototype,t),n&&GameScene_defineProperties(e,n),e}(GameScene,[{key:"create",value:function create(){GameScene_get(GameScene_getPrototypeOf(GameScene.prototype),"create",this).call(this),this.CreateDOM(),this.game.events.on(Phaser.Core.Events.HIDDEN,this.onWindowBlur,this),this.game.events.on(Phaser.Core.Events.BLUR,this.onWindowBlur,this)}},{key:"CreateDOM",value:function CreateDOM(){this.topRightPanel=new M(this,this.dom,{domClass:"dom_panel top right",isScaled:!1}),this.pauseButton=new C(this,this.topRightPanel,{frames:["button_pause_unselected.png","button_pause_selected.png"],atlas:"ui_atlas",id:"domui_MENU_pause",title:"Pause",domClass:"dom_button",callback:this.OnPauseButtonPressed,context:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_medium"}}),this.pauseButton.Enable()}},{key:"update",value:function update(e,t){GameScene_get(GameScene_getPrototypeOf(GameScene.prototype),"update",this).call(this,e,t)}},{key:"OnPauseButtonPressed",value:function OnPauseButtonPressed(){s.Instance.SleepAllScenes(),s.Instance.StartScene(P,{additive:!0})}},{key:"onWindowBlur",value:function onWindowBlur(){this.scene.isSleeping(this.key)||this.OnPauseButtonPressed()}},{key:"Destroy",value:function Destroy(){this.game.events.off(Phaser.Core.Events.HIDDEN,this.onWindowBlur,this),this.game.events.off(Phaser.Core.Events.BLUR,this.onWindowBlur,this),GameScene_get(GameScene_getPrototypeOf(GameScene.prototype),"Destroy",this).call(this)}}]),GameScene}();function MinigameCamera_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var O=function(){function MinigameCamera(e){!function MinigameCamera_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MinigameCamera),this.scene=e,this.camera=this.scene.cameras.add(0,0,this.scene.scale.width,this.scene.scale.height),this.cameraLookAt=new Phaser.Math.Vector2(.5*this.scene.scale.width,.5*this.scene.scale.height),this.camera.centerOn(this.cameraLookAt.x,this.cameraLookAt.y),this.camera.ignore(this.scene.ui),this.camera.ignore(this.scene.dom),this.lerpCameraTween=null;var t=this.scene.cameras.main;this.scene.cameras.cameras.splice(0,1),this.scene.cameras.cameras.push(t)}return function MinigameCamera_createClass(e,t,n){return t&&MinigameCamera_defineProperties(e.prototype,t),n&&MinigameCamera_defineProperties(e,n),e}(MinigameCamera,[{key:"update",value:function update(){}},{key:"DoZoomOut",value:function DoZoomOut(){this.camera.setZoom(1.35),this.lerpCameraTween&&this.lerpCameraTween.remove(),this.lerpCameraTween=this.scene.tweens.add({targets:this.camera,zoom:1,duration:2e3,ease:"Quad.easeOut"})}},{key:"SetLookAt",value:function SetLookAt(e,t){this.cameraLookAt.set(e,t),this.camera.centerOn(this.cameraLookAt.x,this.cameraLookAt.y)}},{key:"LerpLookAt",value:function LerpLookAt(e,t,n,i){this.lerpCameraTween&&this.lerpCameraTween.stop(),this.lerpCameraTween=this.scene.tweens.add({targets:this.cameraLookAt,x:e,y:t,duration:n,ease:i,onUpdate:this.OnLerpTweenUpdate,onUpdateScope:this})}},{key:"OnLerpTweenUpdate",value:function OnLerpTweenUpdate(){this.camera.centerOn(this.cameraLookAt.x,this.cameraLookAt.y)}},{key:"destroy",value:function destroy(){this.lerpCameraTween&&(this.lerpCameraTween.remove(),this.lerpCameraTween=null)}}]),MinigameCamera}();function MinigameChallenger_typeof(e){return(MinigameChallenger_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MinigameChallenger_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MinigameChallenger_get(e,t,n){return(MinigameChallenger_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function MinigameChallenger_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MinigameChallenger_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function MinigameChallenger_setPrototypeOf(e,t){return(MinigameChallenger_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MinigameChallenger_createSuper(i){return function(){var e,t=MinigameChallenger_getPrototypeOf(i);if(function MinigameChallenger_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MinigameChallenger_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MinigameChallenger_possibleConstructorReturn(e,t){return!t||"object"!==MinigameChallenger_typeof(t)&&"function"!=typeof t?function MinigameChallenger_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function MinigameChallenger_getPrototypeOf(e){return(MinigameChallenger_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(){!function MinigameChallenger_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MinigameChallenger_setPrototypeOf(e,t)}(MinigameChallenger,Phaser.GameObjects.Container);var f=MinigameChallenger_createSuper(MinigameChallenger);function MinigameChallenger(e){var t;!function MinigameChallenger_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MinigameChallenger),(t=f.call(this,e)).scene=e,t.x=.5*t.scene.scale.width,t.y=.5*t.scene.scale.height,t.tintOverlay=t.scene.add.rectangle(0,0,t.scene.scale.width,t.scene.scale.height,0,.5),t.tintOverlay.setOrigin(.5),t.add(t.tintOverlay),t.leftContainer=t.scene.add.container(),t.add(t.leftContainer),t.leftElement=new _(t.scene,t.leftContainer,{x:0,y:.5,offsetX:.5*-t.scene.scale.width,offsetY:.5*-t.scene.scale.height,local:!1}),t.rightContainer=t.scene.add.container(),t.add(t.rightContainer),t.rightElement=new _(t.scene,t.rightContainer,{x:1,y:.5,offsetX:.5*-t.scene.scale.width,offsetY:.5*-t.scene.scale.height,local:!1}),t.leftShadow=t.scene.add.sprite(0,0,"popup_atlas","side_shadow.png"),t.leftShadow.setOrigin(0,.5),t.leftContainer.add(t.leftShadow);var n=t.scene.sys.settings.data.gameData||{},i=n.player.characterData.id,r=n.challenger,o=n.list[n.listIndex].friendScore;t.leftPortrait=t.scene.add.sprite(200*t.scene.gameScale,40*t.scene.gameScale,"characters_atlas","large_character_"+i+".png"),t.leftPortrait.setOrigin(.5),t.leftPortrait.setScale(.75),t.leftContainer.add(t.leftPortrait),t.rightShadow=t.scene.add.sprite(0,0,"popup_atlas","side_shadow.png"),t.rightShadow.setOrigin(0,.5),t.rightShadow.setScale(-1,1),t.rightContainer.add(t.rightShadow),t.rightAnchor=t.scene.add.container(-200*t.scene.gameScale,180*t.scene.gameScale),t.rightContainer.add(t.rightAnchor),t.rightPortrait=t.scene.add.sprite(0,-140*t.scene.gameScale,"characters_atlas","large_character_"+r+".png"),t.rightPortrait.setOrigin(.5),t.rightPortrait.setScale(-.75,.75),t.rightAnchor.add(t.rightPortrait),t.challengerContainer=t.scene.add.container(0,240*t.scene.gameScale),t.rightContainer.add(t.challengerContainer);var a=t.scene.add.sprite(0,0,"popup_atlas","opponent_score_pannel.png");a.setOrigin(1,.5),t.challengerContainer.add(a);var s={fontFamily:z.Instance.mainFont,fontSize:64*t.scene.gameScale+"px",color:"#000000"},l=z.Instance.IsRightToLeft(),c=(l?-240:-180)*t.scene.gameScale,u=-10*t.scene.gameScale;t.challengerLabel=t.scene.add.text(c,u,z.Instance.GetString("score").replace("<num>",""),s),t.challengerLabel.setOrigin(l?0:1,.75),W.ClampTextToDimensions(t.challengerLabel,220*t.scene.gameScale,100*t.scene.gameScale),t.challengerContainer.add(t.challengerLabel),s.fontSize=96*t.scene.gameScale+"px",t.challengerScore=t.scene.add.text(c,u,o,s),t.challengerScore.setOrigin(l?1:0,.75),t.challengerContainer.add(t.challengerScore);var p=Object.assign({},s);return p.fontSize=256*t.scene.gameScale+"px",p.color="#ffffff",p.stroke="#36BCEB",p.strokeThickness=Math.ceil(24*t.scene.gameScale),t.vsText=t.scene.add.text(0,0,z.Instance.GetString("vs").toUpperCase(),p),t.vsText.setOrigin(.5),t.vsText.setAngle(10),W.ClampTextToDimensions(t.vsText,400*t.scene.gameScale,2e3*t.scene.gameScale),t.add(t.vsText),t.visible=!1,t}return function MinigameChallenger_createClass(e,t,n){return t&&MinigameChallenger_defineProperties(e.prototype,t),n&&MinigameChallenger_defineProperties(e,n),e}(MinigameChallenger,[{key:"Start",value:function Start(){this.visible=!0,this.leftShadow.setPosition(-this.leftShadow.width,this.leftShadow.y),this.rightShadow.setPosition(this.rightShadow.width,this.rightShadow.y),this.leftPortrait.setAlpha(0),this.challengerContainer.setScale(0,1),this.rightAnchor.setScale(1,0),this.rightAnchor.setAlpha(0),this.challengerLabel.setAlpha(0),this.challengerScore.setAlpha(0),this.vsText.setScale(0),this.vsText.setAlpha(0),this.showTimeline=this.scene.tweens.createTimeline(),this.showTimeline.completeDelay=3e3,this.showTimeline.on("complete",this.Hide,this),this.showTimeline.add({targets:[this.leftShadow,this.rightShadow],x:{value:0,duration:500,ease:"Quad.easeOut"},offset:0}),this.showTimeline.add({targets:this.leftPortrait,alpha:{value:1,duration:500,ease:"Back.easeOut"},offset:0}),this.showTimeline.add({targets:this.challengerContainer,scaleX:{value:1,duration:500,ease:"Back.easeOut"},offset:0}),this.showTimeline.add({targets:this.rightAnchor,scaleY:{value:1,duration:250,ease:"Linear"},alpha:{value:1,duration:250,ease:"Back.easeOut"},offset:250}),this.showTimeline.add({targets:[this.challengerLabel,this.challengerScore],alpha:{value:1,duration:500,ease:"Quad.easeInOut"},offset:0}),this.showTimeline.add({targets:this.vsText,scaleX:{value:1,duration:250,ease:"Quad.easeInOut"},scaleY:{value:1,duration:250,ease:"Quad.easeInOut"},alpha:{value:1,duration:250,ease:"Back.easeOut"},offset:250}),this.showTimeline.play()}},{key:"Hide",value:function Hide(){this.visible=!0,this.tintOverlay.setAlpha(1),this.leftShadow.setPosition(0,this.leftShadow.y),this.rightShadow.setPosition(0,this.rightShadow.y),this.leftPortrait.setAlpha(1),this.challengerContainer.setScale(1),this.rightAnchor.setScale(1),this.rightAnchor.setAlpha(1),this.vsText.setScale(1),this.vsText.setAlpha(1),this.hideTimeline=this.scene.tweens.createTimeline(),this.hideTimeline.on("complete",this.OnComplete,this),this.hideTimeline.add({targets:this.challengerContainer,scaleX:{value:0,duration:500,ease:"Back.easeIn"},offset:0}),this.hideTimeline.add({targets:this.rightAnchor,alpha:{value:0,duration:250,ease:"Linear"},scaleY:{value:0,duration:250,ease:"Linear"},offset:0}),this.hideTimeline.add({targets:this.leftPortrait,alpha:{value:0,duration:500,ease:"Back.easeIn"},offset:0}),this.hideTimeline.add({targets:this.leftShadow,x:{value:-this.leftShadow.width,duration:500,ease:"Quad.easeOut"},offset:500}),this.hideTimeline.add({targets:this.rightShadow,x:{value:this.rightShadow.width,duration:500,ease:"Quad.easeOut"},offset:500}),this.hideTimeline.add({targets:this.tintOverlay,alpha:{value:0,duration:250,ease:"Back.easeOut"},offset:500}),this.hideTimeline.add({targets:this.vsText,scaleX:{value:0,duration:250,ease:"Quad.easeInOut"},scaleY:{value:0,duration:250,ease:"Quad.easeInOut"},alpha:{value:0,duration:250,ease:"Back.easeOut"},offset:750}),this.hideTimeline.play()}},{key:"OnComplete",value:function OnComplete(){this.visible=!1,this.emit("complete",this)}},{key:"destroy",value:function destroy(){this.showTimeline&&(this.showTimeline.destroy(),this.showTimeline=null),this.hideTimeline&&(this.hideTimeline.destroy(),this.hideTimeline=null),this.leftElement&&(this.leftElement.destroy(),this.leftElement=null),this.rightElement&&(this.rightElement.destroy(),this.rightElement=null),MinigameChallenger_get(MinigameChallenger_getPrototypeOf(MinigameChallenger.prototype),"destroy",this).call(this)}}]),MinigameChallenger}();function ResultsChallengeFinalPopup_typeof(e){return(ResultsChallengeFinalPopup_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ResultsChallengeFinalPopup_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ResultsChallengeFinalPopup_get(e,t,n){return(ResultsChallengeFinalPopup_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function ResultsChallengeFinalPopup_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ResultsChallengeFinalPopup_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ResultsChallengeFinalPopup_setPrototypeOf(e,t){return(ResultsChallengeFinalPopup_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ResultsChallengeFinalPopup_createSuper(i){return function(){var e,t=ResultsChallengeFinalPopup_getPrototypeOf(i);if(function ResultsChallengeFinalPopup_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=ResultsChallengeFinalPopup_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function ResultsChallengeFinalPopup_possibleConstructorReturn(e,t){return!t||"object"!==ResultsChallengeFinalPopup_typeof(t)&&"function"!=typeof t?ResultsChallengeFinalPopup_assertThisInitialized(e):t}(this,e)}}function ResultsChallengeFinalPopup_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ResultsChallengeFinalPopup_getPrototypeOf(e){return(ResultsChallengeFinalPopup_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(){!function ResultsChallengeFinalPopup_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ResultsChallengeFinalPopup_setPrototypeOf(e,t)}(ResultsChallengeFinalPopup,Phaser.GameObjects.Container);var g=ResultsChallengeFinalPopup_createSuper(ResultsChallengeFinalPopup);function ResultsChallengeFinalPopup(e){var t;!function ResultsChallengeFinalPopup_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ResultsChallengeFinalPopup),(t=g.call(this,e)).contentContainer=t.scene.add.container(),t.contentContainer.setPosition(.5*t.scene.scale.width,.5*t.scene.scale.height),t.add(t.contentContainer),t.background=new F(t.scene,{x:0,y:0}),t.contentContainer.add(t.background);var n=-90*t.scene.gameScale;t.totalBack=t.scene.add.spine(0,n,"character_select_light_sparks","spark_animation",!0),t.totalBack.setScale(t.scene.gameScale),t.totalBack.setVisible(!1),t.contentContainer.add(t.totalBack);var i=t.scene.sys.settings.data.gameData||{},r=i.player.characterData.id;t.character=t.scene.add.sprite(-300*t.scene.gameScale,0,"characters_atlas","large_character_"+r+".png"),t.character.setOrigin(.5),t.character.setVisible(!1),t.contentContainer.add(t.character);var o=.41*-t.scene.scale.height,a=t.scene.add.polygon(0,o,[20*t.scene.gameScale,4*t.scene.gameScale,474*t.scene.gameScale,0*t.scene.gameScale,478*t.scene.gameScale,118*t.scene.gameScale,0*t.scene.gameScale,108*t.scene.gameScale],48639);a.setOrigin(.5),t.contentContainer.add(a);var s={fontFamily:z.Instance.mainFont,fontSize:64*t.scene.gameScale+"px",color:"#000000"};t.titleText=t.scene.add.text(0,o,z.Instance.GetString("you_lose"),s),t.titleText.setOrigin(.5),W.ClampTextToDimensions(t.titleText,440*t.scene.gameScale,120*t.scene.gameScale),t.contentContainer.add(t.titleText);for(var l=0,c=0,u=0;u<i.list.length;u++){var p=i.list[u];l+=p.score,c+=p.friendScore}var f={fontFamily:z.Instance.mainFont,fontSize:192*t.scene.gameScale+"px",color:"#000000",stroke:"#ffffff",strokeThickness:Math.ceil(16*t.scene.gameScale)};t.totalText=t.scene.add.text(0,n,l,f),t.totalText.setOrigin(.5),t.contentContainer.add(t.totalText);var h=110*t.scene.gameScale;t.bears=t.scene.add.sprite(0,h,"results_atlas","bears_lose.png"),t.bears.setOrigin(.5),t.contentContainer.add(t.bears);var m=-200*t.scene.gameScale;s.fontSize=32*t.scene.gameScale+"px";var y=t.scene.add.text(0,m,z.Instance.GetString("friends_final_score").replace("<num>",c),s);return y.setOrigin(.5),W.ClampTextToDimensions(y,400*t.scene.gameScale,120*t.scene.gameScale),t.contentContainer.add(y),t.continueButton=new C(t.scene,t.contentContainer,{x:0*t.scene.gameScale,y:290*t.scene.gameScale,frames:["continue_unselected.png","continue_selected.png"],atlas:"ui_atlas",id:"domui_RESULTS_continue",domClass:"dom_button",title:"Continue",callback:t.OnContinueButtonPressed,context:ResultsChallengeFinalPopup_assertThisInitialized(t),clickSound:{layer:"sfx_ui_shared",key:"ui_button_forward"}}),t.continueButton.Enable(),t.continueTween=t.scene.tweens.add({targets:t.continueButton,scaleX:1.1,scaleY:1.1,duration:1500,ease:"Quad.easeInOut",yoyo:!0,repeat:-1}),t.tintOverlay=t.scene.add.rectangle(0,0,t.scene.scale.width,t.scene.scale.height,0,.5),t.tintOverlay.setOrigin(.5),t.tintOverlay.setVisible(!1),t.contentContainer.add(t.tintOverlay),t.trophyBack=t.scene.add.spine(0,0,"character_select_light_sparks","spark_animation",!0),t.trophyBack.setScale(t.scene.gameScale),t.trophyBack.setVisible(!1),t.contentContainer.add(t.trophyBack),t.trophy=t.scene.add.sprite(0,0,"results_atlas","end_challenge_large_trophy.png"),t.trophy.setOrigin(.5),t.trophy.setVisible(!1),t.contentContainer.add(t.trophy),t.doSequence=c<l,t}return function ResultsChallengeFinalPopup_createClass(e,t,n){return t&&ResultsChallengeFinalPopup_defineProperties(e.prototype,t),n&&ResultsChallengeFinalPopup_defineProperties(e,n),e}(ResultsChallengeFinalPopup,[{key:"Show",value:function Show(){this.setVisible(!0),this.doSequence?this.StartSequence():w.Instance.Play("sfx_results","total_scores_you_lose")}},{key:"StartSequence",value:function StartSequence(){this.titleText.setFontSize(64*this.scene.gameScale+"px"),this.titleText.setText(z.Instance.GetString("you_win").toUpperCase()),W.ClampTextToDimensions(this.titleText,440*this.scene.gameScale,120*this.scene.gameScale),this.showTimeline=this.scene.tweens.createTimeline(),this.showTimeline.completeDelay=1e3,this.showTimeline.on("complete",this.DoRewardTrophy,this);this.totalBack.setVisible(!0),this.totalBack.setScale(0),this.totalBack.setAlpha(0),this.showTimeline.add({targets:this.totalBack,scaleX:{value:1,ease:"Back.easeOut"},scaleY:{value:1,ease:"Back.easeOut"},alpha:{value:1,ease:"Back.easeOut"},duration:500,offset:500,onComplete:this.OnTotalBackTweenComplete,onCompleteScope:this}),this.showTimeline.add({targets:this.totalText,scaleX:{value:1.1,ease:"Quad.easeOut"},scaleY:{value:1.1,ease:"Quad.easeOut"},duration:250,yoyo:!0,offset:500}),this.showTimeline.add({targets:this.bears,scaleX:{value:1.1,ease:"Quad.easeInOut"},scaleY:{value:1.1,ease:"Quad.easeInOut"},duration:200,yoyo:!0,offset:500,onStart:this.OnFinalTweenStarted,onStartScope:this}),this.showTimeline.play()}},{key:"DoRewardTrophy",value:function DoRewardTrophy(){this.rewardTimeline=this.scene.tweens.createTimeline(),this.trophy.setVisible(!0),this.trophy.setScale(0),this.tintOverlay.setVisible(!0),this.tintOverlay.setAlpha(0),this.trophyBack.setVisible(!0),this.trophyBack.setScale(0),this.character.setVisible(!0),this.character.setAlpha(0),this.rewardTimeline.add({targets:this.tintOverlay,alpha:{value:1,ease:"Back.easeOut"},duration:500,offset:0}),this.rewardTimeline.add({targets:this.totalBack,alpha:{value:0,ease:"Back.easeOut"},duration:500,offset:0}),this.rewardTimeline.add({targets:[this.trophy,this.trophyBack],scaleX:{value:1,ease:"Back.easeOut"},scaleY:{value:1,ease:"Back.easeOut"},duration:500,offset:0});this.rewardTimeline.add({targets:[this.tintOverlay,this.trophyBack,this.bears],alpha:{value:0,ease:"Back.easeOut"},duration:750,offset:2e3}),this.rewardTimeline.add({targets:[this.totalBack,this.character],alpha:{value:1,ease:"Back.easeOut"},duration:750,offset:2e3});var e=260*this.scene.gameScale,t=64*this.scene.gameScale;this.rewardTimeline.add({targets:this.trophy,x:{value:e,ease:"Quad.easeOut"},y:{value:t,ease:"Quad.easeOut"},angle:{value:15,ease:"Quad.easeOut"},scaleX:{value:.65,ease:"Back.easeOut"},scaleY:{value:.65,ease:"Back.easeOut"},duration:750,offset:2e3,onComplete:this.OnRewardTweenComplete,onCompleteScope:this}),this.rewardTimeline.play(),w.Instance.Play("sfx_results","total_scores_total_above")}},{key:"OnFinalTweenStarted",value:function OnFinalTweenStarted(){this.bears.setFrame("bears_win.png"),w.Instance.Play("sfx_results","total_scores_you_win")}},{key:"OnTotalBackTweenComplete",value:function OnTotalBackTweenComplete(){this.totalTween=this.scene.tweens.add({targets:this.totalBack,scaleX:{value:1.1,ease:"Quad.easeInOut"},scaleY:{value:1.1,ease:"Quad.easeInOut"},duration:1e3,repeat:-1,yoyo:!0})}},{key:"OnRewardTweenComplete",value:function OnRewardTweenComplete(){this.contentContainer.bringToTop(this.totalText)}},{key:"OnContinueButtonPressed",value:function OnContinueButtonPressed(){this.emit("challengePressed",this)}},{key:"destroy",value:function destroy(){this.showTimeline&&(this.showTimeline.destroy(),this.showTimeline=null),this.rewardTimeline&&(this.rewardTimeline.destroy(),this.rewardTimeline=null),this.continueTween&&(this.continueTween.remove(),this.continueTween=null),ResultsChallengeFinalPopup_get(ResultsChallengeFinalPopup_getPrototypeOf(ResultsChallengeFinalPopup.prototype),"destroy",this).call(this)}}]),ResultsChallengeFinalPopup}();function ResultsChallengeScoreBanner_typeof(e){return(ResultsChallengeScoreBanner_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ResultsChallengeScoreBanner_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ResultsChallengeScoreBanner_get(e,t,n){return(ResultsChallengeScoreBanner_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function ResultsChallengeScoreBanner_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ResultsChallengeScoreBanner_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ResultsChallengeScoreBanner_setPrototypeOf(e,t){return(ResultsChallengeScoreBanner_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ResultsChallengeScoreBanner_createSuper(i){return function(){var e,t=ResultsChallengeScoreBanner_getPrototypeOf(i);if(function ResultsChallengeScoreBanner_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=ResultsChallengeScoreBanner_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function ResultsChallengeScoreBanner_possibleConstructorReturn(e,t){return!t||"object"!==ResultsChallengeScoreBanner_typeof(t)&&"function"!=typeof t?function ResultsChallengeScoreBanner_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function ResultsChallengeScoreBanner_getPrototypeOf(e){return(ResultsChallengeScoreBanner_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=function(){!function ResultsChallengeScoreBanner_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ResultsChallengeScoreBanner_setPrototypeOf(e,t)}(ResultsChallengeScoreBanner,Phaser.GameObjects.Container);var u=ResultsChallengeScoreBanner_createSuper(ResultsChallengeScoreBanner);function ResultsChallengeScoreBanner(e,t){var n;!function ResultsChallengeScoreBanner_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ResultsChallengeScoreBanner),(n=u.call(this,e)).setPosition(t.x||0,t.y||0);var i=Ze.Data[t.id],r=z.Instance.GetString(i.title)||"#UNKNOWN",o=i.priColour||16777215,a=i.secColour||8947848,s={fontFamily:z.Instance.mainFont,fontSize:40*n.scene.gameScale+"px",color:"#ffffff"},l=240*n.scene.gameScale;n.leftBack=n.CreatePolygon(-l,0,a),n.leftBack.visible=!1,n.leftText=n.scene.add.text(-l,0,t.data.score,s),n.leftText.setOrigin(.5),n.leftText.visible=!1,n.add(n.leftText),n.rightBack=n.CreatePolygon(l,0,a),n.rightBack.visible=!1,n.rightText=n.scene.add.text(l,0,t.data.friendScore,s),n.rightText.setOrigin(.5),n.rightText.visible=!1,n.add(n.rightText);n.CreatePolygon(0,0,o);s.fontSize=28*n.scene.gameScale+"px",s.color="#000000";var c=n.scene.add.text(0,0,r,s);return c.setOrigin(.5),W.ClampTextToDimensions(c,280*n.scene.gameScale,100*n.scene.gameScale),n.add(c),n}return function ResultsChallengeScoreBanner_createClass(e,t,n){return t&&ResultsChallengeScoreBanner_defineProperties(e.prototype,t),n&&ResultsChallengeScoreBanner_defineProperties(e,n),e}(ResultsChallengeScoreBanner,[{key:"CreatePolygon",value:function CreatePolygon(e,t,n){var i=this.scene.add.polygon(e,t,[0*this.scene.gameScale,0*this.scene.gameScale,306*this.scene.gameScale,0*this.scene.gameScale,326*this.scene.gameScale,44*this.scene.gameScale,20*this.scene.gameScale,44*this.scene.gameScale],n);return i.setOrigin(.5),this.add(i),i}},{key:"Show",value:function Show(e){e=e||0;var t=this.rightBack.x;this.leftBack.setPosition(0),this.leftBack.setVisible(!0),this.rightBack.setPosition(0),this.rightBack.setVisible(!0),this.leftText.setAlpha(0),this.leftText.setVisible(!0),this.rightText.setAlpha(0),this.rightText.setVisible(!0),this.showTimeline=this.scene.tweens.createTimeline(),this.showTimeline.add({targets:[this.leftBack],x:{value:-t,duration:500,ease:"Back.easeOut"},offset:e,onStart:this.OnShowStart,onStartScope:this}),this.showTimeline.add({targets:[this.rightBack],x:{value:t,duration:500,ease:"Back.easeOut"},offset:e}),this.showTimeline.add({targets:[this.leftText,this.rightText],alpha:{value:1,duration:500,ease:"Linear"},offset:e+400,onStart:this.OnShowScoreStart,onStartScope:this});var n=parseInt(this.rightText.text),i=parseInt(this.leftText.text)<n?this.rightText:this.leftText;i.setScale(0),this.showTimeline.add({targets:i,scaleX:{value:1,duration:500,ease:"Back.easeOut"},scaleY:{value:1,duration:500,ease:"Back.easeOut"},offset:e+400}),this.showTimeline.play()}},{key:"OnShowStart",value:function OnShowStart(){w.Instance.Play("sfx_results","total_scores_slide")}},{key:"OnShowScoreStart",value:function OnShowScoreStart(){var e=parseInt(this.rightText.text),t=parseInt(this.leftText.text)<e?"total_scores_above":"total_scores_below";this.scene.time.delayedCall(100,w.Instance.Play,["sfx_results",t],w.Instance)}},{key:"destroy",value:function destroy(){this.showTimeline&&(this.showTimeline.destroy(),this.showTimeline=null),ResultsChallengeScoreBanner_get(ResultsChallengeScoreBanner_getPrototypeOf(ResultsChallengeScoreBanner.prototype),"destroy",this).call(this)}}]),ResultsChallengeScoreBanner}();function MPAnimatedParticleEmitter_typeof(e){return(MPAnimatedParticleEmitter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MPAnimatedParticleEmitter_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MPAnimatedParticleEmitter_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MPAnimatedParticleEmitter_createClass(e,t,n){return t&&MPAnimatedParticleEmitter_defineProperties(e.prototype,t),n&&MPAnimatedParticleEmitter_defineProperties(e,n),e}function MPAnimatedParticleEmitter_get(e,t,n){return(MPAnimatedParticleEmitter_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function MPAnimatedParticleEmitter_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MPAnimatedParticleEmitter_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function MPAnimatedParticleEmitter_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MPAnimatedParticleEmitter_setPrototypeOf(e,t)}function MPAnimatedParticleEmitter_setPrototypeOf(e,t){return(MPAnimatedParticleEmitter_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MPAnimatedParticleEmitter_createSuper(i){return function(){var e,t=MPAnimatedParticleEmitter_getPrototypeOf(i);if(function MPAnimatedParticleEmitter_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MPAnimatedParticleEmitter_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MPAnimatedParticleEmitter_possibleConstructorReturn(e,t){return!t||"object"!==MPAnimatedParticleEmitter_typeof(t)&&"function"!=typeof t?function MPAnimatedParticleEmitter_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function MPAnimatedParticleEmitter_getPrototypeOf(e){return(MPAnimatedParticleEmitter_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(){MPAnimatedParticleEmitter_inherits(MPAnimatedParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitter);var i=MPAnimatedParticleEmitter_createSuper(MPAnimatedParticleEmitter);function MPAnimatedParticleEmitter(e,t){var n;return MPAnimatedParticleEmitter_classCallCheck(this,MPAnimatedParticleEmitter),(n=i.call(this,e,t)).particleClass=R,n}return MPAnimatedParticleEmitter_createClass(MPAnimatedParticleEmitter,[{key:"fromJSON",value:function fromJSON(e){if(MPAnimatedParticleEmitter_get(MPAnimatedParticleEmitter_getPrototypeOf(MPAnimatedParticleEmitter.prototype),"fromJSON",this).call(this,e),!e)return this;if(Phaser.Utils.Objects.HasValue(e,"animations"))for(var t in this.animations=[],e.animations){var n=e.animations[t],i=this.manager.scene.game,r=i.anims.create({key:t,frames:i.anims.generateFrameNames(this.manager.texture.key,n.frames),frameRate:n.frameRate,repeat:n.loop?-1:0});this.animations.push(r)}}}],[{key:"Create",value:function Create(e,t){return e.createAnimEmitter(t)}}]),MPAnimatedParticleEmitter}(),R=function(){MPAnimatedParticleEmitter_inherits(MPAnimatedParticle,Phaser.GameObjects.Particles.Particle);var n=MPAnimatedParticleEmitter_createSuper(MPAnimatedParticle);function MPAnimatedParticle(e){var t;return MPAnimatedParticleEmitter_classCallCheck(this,MPAnimatedParticle),(t=n.call(this,e)).t=0,t.i=0,t}return MPAnimatedParticleEmitter_createClass(MPAnimatedParticle,[{key:"update",value:function update(e,t,n){var i=MPAnimatedParticleEmitter_get(MPAnimatedParticleEmitter_getPrototypeOf(MPAnimatedParticle.prototype),"update",this).call(this,e,t,n);return this.animation&&(this.t+=e,this.t>=this.animation.msPerFrame&&(this.i++,this.i>=this.animation.frames.length&&(this.i=0),this.frame=this.animation.frames[this.i].frame,this.t-=this.animation.msPerFrame)),i}},{key:"fire",value:function fire(e,t){var n=MPAnimatedParticleEmitter_get(MPAnimatedParticleEmitter_getPrototypeOf(MPAnimatedParticle.prototype),"fire",this).call(this,e,t),i=this.emitter;return i&&i.animations&&(this.animation=Phaser.Utils.Array.GetRandom(i.animations),this.frame=this.animation.frames[0].frame),this.t=0,this.i=0,n}}]),MPAnimatedParticle}();function ResultsChallengeScoresPopup_typeof(e){return(ResultsChallengeScoresPopup_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ResultsChallengeScoresPopup_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ResultsChallengeScoresPopup_get(e,t,n){return(ResultsChallengeScoresPopup_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function ResultsChallengeScoresPopup_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ResultsChallengeScoresPopup_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ResultsChallengeScoresPopup_setPrototypeOf(e,t){return(ResultsChallengeScoresPopup_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ResultsChallengeScoresPopup_createSuper(i){return function(){var e,t=ResultsChallengeScoresPopup_getPrototypeOf(i);if(function ResultsChallengeScoresPopup_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=ResultsChallengeScoresPopup_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function ResultsChallengeScoresPopup_possibleConstructorReturn(e,t){return!t||"object"!==ResultsChallengeScoresPopup_typeof(t)&&"function"!=typeof t?function ResultsChallengeScoresPopup_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function ResultsChallengeScoresPopup_getPrototypeOf(e){return(ResultsChallengeScoresPopup_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Phaser.GameObjects.Particles.ParticleEmitterManager.prototype.createAnimEmitter=function(e){return this.addEmitter(new x(this,e))};var A=function(){!function ResultsChallengeScoresPopup_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ResultsChallengeScoresPopup_setPrototypeOf(e,t)}(ResultsChallengeScoresPopup,Phaser.GameObjects.Container);var J=ResultsChallengeScoresPopup_createSuper(ResultsChallengeScoresPopup);function ResultsChallengeScoresPopup(e){var t;!function ResultsChallengeScoresPopup_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ResultsChallengeScoresPopup),t=J.call(this,e);var n={fontFamily:z.Instance.mainFont,fontSize:64*t.scene.gameScale+"px",color:"#000000"};t.contentContainer=t.scene.add.container(),t.contentContainer.setPosition(.5*t.scene.scale.width,.5*t.scene.scale.height),t.add(t.contentContainer),t.background=new F(t.scene,{x:0,y:0}),t.contentContainer.add(t.background),t.tintOverlay=t.scene.add.rectangle(0,0,t.scene.scale.width,t.scene.scale.height,0,.5),t.tintOverlay.setOrigin(.5),t.contentContainer.add(t.tintOverlay);var i=.41*-t.scene.scale.height,r=t.scene.add.polygon(0,i,[20*t.scene.gameScale,4*t.scene.gameScale,474*t.scene.gameScale,0*t.scene.gameScale,478*t.scene.gameScale,118*t.scene.gameScale,0*t.scene.gameScale,108*t.scene.gameScale],48639);r.setOrigin(.5),t.contentContainer.add(r);var o=t.scene.add.text(0,i,z.Instance.GetString("total_scores"),n);o.setOrigin(.5),W.ClampTextToDimensions(o,380*t.scene.gameScale,160*t.scene.gameScale),t.contentContainer.add(o);for(var a=.11*t.scene.scale.width,s=.25*-t.scene.scale.height,l=0;l<2;l++){var c=2*l-1,u=t.scene.add.polygon(a*c,s,[0*t.scene.gameScale,0*t.scene.gameScale,374*t.scene.gameScale,0*t.scene.gameScale,394*t.scene.gameScale,47*t.scene.gameScale,20*t.scene.gameScale,47*t.scene.gameScale],48639);u.setOrigin(.5),t.contentContainer.add(u)}n.fontSize=28*t.scene.gameScale+"px",n.stroke="#ffffff",n.strokeThickness=Math.ceil(6*t.scene.gameScale);var p=t.scene.add.text(-a,s,z.Instance.GetString("yours"),n);p.setOrigin(.5),t.contentContainer.add(p);var f=t.scene.add.text(a,s,z.Instance.GetString("friends"),n);f.setOrigin(.5),t.contentContainer.add(f),t.scoreBanners=[];for(var h=[{id:Ze.ID.Weightlifting},{id:Ze.ID.Climbing},{id:Ze.ID.Sprint},{id:Ze.ID.Swimming},{id:Ze.ID.Trampoline},{id:Ze.ID.TripleJump}],m=t.scene.sys.settings.data.gameData||{},y=0,g=0,d=0;d<m.list.length;d++){for(var _=m.list[d],P=0;P<h.length;P++){var S=h[P];if(_.id==S.id){S.data=_;break}}y+=_.score,g+=_.friendScore}for(var b=.169*-t.scene.scale.height,v=58*t.scene.gameScale,O=0;O<h.length;O++){var w=h[O];w.y=b+v*O;var C=new H(t.scene,w);t.contentContainer.add(C),t.scoreBanners[O]=C}var T=m.player.characterData.id,M=m.challenger,k=a+80*t.scene.gameScale,I=s-23*t.scene.gameScale;t.yourHead=t.scene.add.sprite(-k,I,"characters_atlas","mini_"+T+".png"),t.yourHead.setOrigin(.5,1),t.contentContainer.add(t.yourHead);var x="badgerclops"==M,R="mini_"+M+(x?"_left":"")+".png";t.friendHead=t.scene.add.sprite(k,I,"characters_atlas",R),t.friendHead.setOrigin(.5,1),x||t.friendHead.setScale(-1,1),t.contentContainer.add(t.friendHead);var A=.34*t.scene.scale.height,j=t.scene.add.polygon(0,A,[0*t.scene.gameScale,0*t.scene.gameScale,752*t.scene.gameScale,0*t.scene.gameScale,731*t.scene.gameScale,59*t.scene.gameScale,376*t.scene.gameScale,85*t.scene.gameScale,21*t.scene.gameScale,59*t.scene.gameScale],0);j.setOrigin(.5),t.contentContainer.add(j),n.fontSize=48*t.scene.gameScale+"px",n.color="#ffffff",n.stroke=0;n.strokeThickness=0;var D=A-.5*j.height+17*t.scene.gameScale,B=t.scene.add.text(0,D,z.Instance.GetString("totals").toUpperCase(),n);B.setOrigin(.5,.2),t.contentContainer.add(B),n.fontSize=40*t.scene.gameScale+"px";var E=240*t.scene.gameScale,G=D,L=new Phaser.Math.Vector2(200*t.scene.gameScale,40*t.scene.gameScale),U=new Phaser.Geom.Rectangle(.5*-L.x,.5*-L.y,L.x,L.y);return t.confettiParticles=t.scene.add.particles("game_atlas"),t.contentContainer.add(t.confettiParticles),t.confettiParticleEmitter=t.confettiParticles.createAnimEmitter({on:!1,x:E,y:G,animations:{blue:{frames:{start:1,end:8,prefix:"confetti",suffix:"_blue.png"},frameRate:10,loop:!0},green:{frames:{start:1,end:8,prefix:"confetti",suffix:"_green.png"},frameRate:10,loop:!0},red:{frames:{start:1,end:8,prefix:"confetti",suffix:"_red.png"},frameRate:10,loop:!0}},alpha:{start:1,end:0,ease:"Sine.easeIn"},scale:{start:1,end:0,ease:"Sine.easeIn"},rotate:{min:0,max:360,start:0,end:-720},speed:{min:-300*t.scene.gameScale,max:300*t.scene.gameScale},radial:!0,angle:{min:-140,max:-40},emitZone:{source:U},gravityY:300,lifespan:2e3}),t.confettiParticleEmitter.reserve(20),t.yourTotalText=t.scene.add.text(-E,G,y,n),t.yourTotalText.setOrigin(.5,.2),t.contentContainer.add(t.yourTotalText),t.friendTotalText=t.scene.add.text(E,G,g,n),t.friendTotalText.setOrigin(.5,.2),t.contentContainer.add(t.friendTotalText),t.StartSequence(),t}return function ResultsChallengeScoresPopup_createClass(e,t,n){return t&&ResultsChallengeScoresPopup_defineProperties(e.prototype,t),n&&ResultsChallengeScoresPopup_defineProperties(e,n),e}(ResultsChallengeScoresPopup,[{key:"StartSequence",value:function StartSequence(){var e=this.friendHead.scaleX;this.friendHead.setScale(0),this.yourHead.setScale(0),this.yourHeadTween=this.scene.tweens.add({targets:[this.yourHead],scaleX:{value:1,duration:550,ease:"Back.easeOut"},scaleY:{value:1,duration:550,ease:"Back.easeOut"}}),this.friendHeadTween=this.scene.tweens.add({targets:[this.friendHead],scaleX:{value:e,duration:650,ease:"Back.easeOut"},scaleY:{value:1,duration:650,ease:"Back.easeOut"}});for(var t=0;t<this.scoreBanners.length;t++){var n=1e3+500*t;this.scoreBanners[t].Show(n)}this.friendTotalText.setAlpha(0),this.yourTotalText.setAlpha(0);var i=1e3+500*this.scoreBanners.length+400;this.totalsTween=this.scene.tweens.add({targets:[this.friendTotalText,this.yourTotalText],alpha:{value:1,duration:500,delay:i,ease:"Linear"},onStart:this.OnTotalStart,onStartScope:this,onComplete:this.OnStartTweenComplete,onCompleteScope:this,completeDelay:3e3})}},{key:"OnTotalStart",value:function OnTotalStart(){var e=parseInt(this.yourTotalText.text),t=null,n=null;n=parseInt(this.friendTotalText.text)<e?(t=this.yourTotalText,"total_scores_total_above"):(t=this.friendTotalText,"total_scores_total_below"),this.totalsTween=this.scene.tweens.add({targets:t,scaleX:{value:1.1,duration:500,ease:"Quad.easeInOut"},scaleY:{value:1.1,duration:500,ease:"Quad.easeInOut"},yoyo:!0,repeat:-1}),this.confettiParticleEmitter.setPosition(t.x,t.y+.5*t.height),this.confettiParticleEmitter.explode(20),w.Instance.Play("sfx_results",n)}},{key:"OnStartTweenComplete",value:function OnStartTweenComplete(){this.setVisible(!1),this.emit("hidden",this)}},{key:"destroy",value:function destroy(){this.friendHeadTween&&(this.friendHeadTween.remove(),this.friendHeadTween=null),this.yourHeadTween&&(this.yourHeadTween.remove(),this.yourHeadTween=null),this.totalsTween&&(this.totalsTween.remove(),this.totalsTween=null),ResultsChallengeScoresPopup_get(ResultsChallengeScoresPopup_getPrototypeOf(ResultsChallengeScoresPopup.prototype),"destroy",this).call(this)}}]),ResultsChallengeScoresPopup}();function ResultsSoloScoresPopup_typeof(e){return(ResultsSoloScoresPopup_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ResultsSoloScoresPopup_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ResultsSoloScoresPopup_get(e,t,n){return(ResultsSoloScoresPopup_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function ResultsSoloScoresPopup_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ResultsSoloScoresPopup_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ResultsSoloScoresPopup_setPrototypeOf(e,t){return(ResultsSoloScoresPopup_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ResultsSoloScoresPopup_createSuper(i){return function(){var e,t=ResultsSoloScoresPopup_getPrototypeOf(i);if(function ResultsSoloScoresPopup_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=ResultsSoloScoresPopup_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function ResultsSoloScoresPopup_possibleConstructorReturn(e,t){return!t||"object"!==ResultsSoloScoresPopup_typeof(t)&&"function"!=typeof t?ResultsSoloScoresPopup_assertThisInitialized(e):t}(this,e)}}function ResultsSoloScoresPopup_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ResultsSoloScoresPopup_getPrototypeOf(e){return(ResultsSoloScoresPopup_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(){!function ResultsSoloScoresPopup_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ResultsSoloScoresPopup_setPrototypeOf(e,t)}(ResultsSoloScoresPopup,Phaser.GameObjects.Container);var v=ResultsSoloScoresPopup_createSuper(ResultsSoloScoresPopup);function ResultsSoloScoresPopup(e){var t;!function ResultsSoloScoresPopup_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ResultsSoloScoresPopup),(t=v.call(this,e)).contentContainer=t.scene.add.container(),t.contentContainer.setPosition(.5*t.scene.scale.width,.5*t.scene.scale.height),t.add(t.contentContainer),t.background=new F(t.scene,{x:0,y:0}),t.contentContainer.add(t.background);var n=200*t.scene.gameScale,i=-130*t.scene.gameScale;t.totalBack=t.scene.add.spine(n,i,"character_select_light_sparks","spark_animation",!0),t.totalBack.setScale(t.scene.gameScale),t.contentContainer.add(t.totalBack);var r=.41*-t.scene.scale.height,o=t.scene.add.polygon(0,r,[20*t.scene.gameScale,4*t.scene.gameScale,474*t.scene.gameScale,0*t.scene.gameScale,478*t.scene.gameScale,118*t.scene.gameScale,0*t.scene.gameScale,108*t.scene.gameScale],48639);o.setOrigin(.5),t.contentContainer.add(o);var a={fontFamily:z.Instance.mainFont,fontSize:64*t.scene.gameScale+"px",color:"#000000"},s=t.scene.add.text(0,r,z.Instance.GetString("total_title"),a);s.setOrigin(.5),t.contentContainer.add(s);var l=t.scene.add.sprite(-230*t.scene.gameScale,-10*t.scene.gameScale,"results_atlas","single_player_end_game_totals_panel.png");l.setOrigin(.5),t.contentContainer.add(l);var c=t.scene.sys.settings.data.gameData||{},u=[Ze.ID.Weightlifting,Ze.ID.Climbing,Ze.ID.Sprint,Ze.ID.Swimming,Ze.ID.Trampoline,Ze.ID.TripleJump],p=0,f=-320*t.scene.gameScale,h=-220*t.scene.gameScale,m=73*t.scene.gameScale;t.scoreTexts=[];for(var y=0;y<u.length;y++)for(var g=u[y],d=h+m*y,_=0;_<c.list.length;_++){var P=c.list[_];if(P.id===g){t.CreateScoreEntry(f,d,P),p+=P.score;break}}var S={fontFamily:z.Instance.mainFont,fontSize:140*t.scene.gameScale+"px",color:"#000000",stroke:"#ffffff",strokeThickness:Math.ceil(12*t.scene.gameScale)};t.totalText=t.scene.add.text(n,i,p,S),t.totalText.setOrigin(.5),t.contentContainer.add(t.totalText);var b=110*t.scene.gameScale;return t.bears=t.scene.add.sprite(n,b,"results_atlas","bears_lose.png"),t.bears.setOrigin(.5),t.contentContainer.add(t.bears),t.continueButton=new C(t.scene,t.contentContainer,{x:0*t.scene.gameScale,y:290*t.scene.gameScale,frames:["continue_unselected.png","continue_selected.png"],atlas:"ui_atlas",id:"domui_RESULTS_continue",domClass:"dom_button",title:"Continue",callback:t.OnContinueButtonPressed,context:ResultsSoloScoresPopup_assertThisInitialized(t),clickSound:{layer:"sfx_ui_shared",key:"ui_button_forward"}}),t.continueButton.setVisible(!1),t.continueButton.Enable(),t.continueTween=t.scene.tweens.add({targets:t.continueButton,scaleX:1.1,scaleY:1.1,duration:1500,ease:"Quad.easeInOut",yoyo:!0,repeat:-1}),t.tintOverlay=t.scene.add.rectangle(0,0,t.scene.scale.width,t.scene.scale.height,0,.5),t.tintOverlay.setOrigin(.5),t.tintOverlay.setVisible(!1),t.contentContainer.add(t.tintOverlay),t.trophyBack=t.scene.add.spine(0,0,"character_select_light_sparks","spark_animation",!0),t.trophyBack.setScale(t.scene.gameScale),t.trophyBack.setVisible(!1),t.contentContainer.add(t.trophyBack),t.trophy=t.scene.add.sprite(0,0,"results_atlas","end_challenge_large_trophy.png"),t.trophy.setOrigin(.5),t.trophy.setVisible(!1),t.contentContainer.add(t.trophy),t.StartSequence(),t}return function ResultsSoloScoresPopup_createClass(e,t,n){return t&&ResultsSoloScoresPopup_defineProperties(e.prototype,t),n&&ResultsSoloScoresPopup_defineProperties(e,n),e}(ResultsSoloScoresPopup,[{key:"CreateScoreEntry",value:function CreateScoreEntry(e,t,n){var i=Ze.Data[n.id],r={fontFamily:z.Instance.mainFont,fontSize:28*this.scene.gameScale+"px",color:"#000000"},o=this.scene.add.text(e,t,z.Instance.GetString(i.title),r);o.setOrigin(0),W.ClampTextToDimensions(o,180*this.scene.gameScale,120*this.scene.gameScale),this.contentContainer.add(o),r.fontSize=48*this.scene.gameScale+"px",r.color="#ffffff";var a=e+180*this.scene.gameScale,s=t+26*this.scene.gameScale,l=this.scene.add.text(a,s,n.score,r);l.setOrigin(0,.5),this.contentContainer.add(l),this.scoreTexts.push(l)}},{key:"StartSequence",value:function StartSequence(){this.showTimeline=this.scene.tweens.createTimeline(),this.showTimeline.completeDelay=1e3,this.showTimeline.on("complete",this.DoRewardTrophy,this);for(var e=0;e<this.scoreTexts.length;e++){var t=this.scoreTexts[e];t.alpha=0,this.showTimeline.add({targets:t,alpha:{value:1,duration:500,ease:"Linear"},offset:1e3+500*e,onStart:this.OnShowScoreStart,onStartScope:this})}var n=1e3+500*this.scoreTexts.length;this.totalBack.setScale(0),this.totalBack.setAlpha(0),this.showTimeline.add({targets:this.totalBack,scaleX:{value:1,ease:"Back.easeOut"},scaleY:{value:1,ease:"Back.easeOut"},alpha:{value:1,ease:"Back.easeOut"},duration:500,offset:n,onComplete:this.OnTotalBackTweenComplete,onCompleteScope:this}),this.totalText.setScale(0),this.totalText.setAlpha(0),this.showTimeline.add({targets:this.totalText,scaleX:{value:1,ease:"Back.easeOut"},scaleY:{value:1,ease:"Back.easeOut"},alpha:{value:1,ease:"Back.easeOut"},duration:500,offset:n,onStart:this.OnTotalTotalStart,onStartScope:this}),this.showTimeline.add({targets:this.bears,scaleX:{value:1.1,ease:"Quad.easeInOut"},scaleY:{value:1.1,ease:"Quad.easeInOut"},duration:200,yoyo:!0,offset:n,onStart:this.OnBearTweenStart,onStartScope:this}),this.showTimeline.play()}},{key:"DoRewardTrophy",value:function DoRewardTrophy(){this.rewardTimeline=this.scene.tweens.createTimeline(),this.trophy.setVisible(!0),this.trophy.setScale(0),this.tintOverlay.setVisible(!0),this.tintOverlay.setAlpha(0),this.trophyBack.setVisible(!0),this.trophyBack.setScale(0),this.rewardTimeline.add({targets:this.tintOverlay,alpha:{value:1,ease:"Back.easeOut"},duration:500,offset:0}),this.rewardTimeline.add({targets:this.totalBack,alpha:{value:0,ease:"Back.easeOut"},duration:500,offset:0}),this.rewardTimeline.add({targets:[this.trophy,this.trophyBack],scaleX:{value:1,ease:"Back.easeOut"},scaleY:{value:1,ease:"Back.easeOut"},duration:500,offset:0});this.rewardTimeline.add({targets:[this.tintOverlay,this.trophyBack,this.bears],alpha:{value:0,ease:"Back.easeOut"},duration:750,offset:2e3}),this.rewardTimeline.add({targets:this.totalBack,alpha:{value:1,ease:"Back.easeOut"},duration:750,offset:2e3});var e=this.bears.x,t=64*this.scene.gameScale;this.rewardTimeline.add({targets:this.totalBack,y:{value:t,ease:"Back.easeOut"},duration:750,offset:2e3}),this.rewardTimeline.add({targets:this.trophy,x:{value:e,ease:"Quad.easeOut"},y:{value:t,ease:"Quad.easeOut"},angle:{value:15,ease:"Quad.easeOut"},scaleX:{value:.65,ease:"Back.easeOut"},scaleY:{value:.65,ease:"Back.easeOut"},duration:750,offset:2e3,onComplete:this.OnRewardTweenComplete,onCompleteScope:this}),this.rewardTimeline.play(),w.Instance.Play("sfx_results","total_scores_total_above")}},{key:"OnShowScoreStart",value:function OnShowScoreStart(){w.Instance.Play("sfx_results","total_scores_above")}},{key:"OnTotalTotalStart",value:function OnTotalTotalStart(){w.Instance.Play("sfx_results","total_scores_total_above")}},{key:"OnBearTweenStart",value:function OnBearTweenStart(){this.bears.setFrame("bears_win.png"),this.continueButton.setVisible(!0),w.Instance.Play("sfx_results","total_scores_you_win")}},{key:"OnTotalBackTweenComplete",value:function OnTotalBackTweenComplete(){this.totalTween=this.scene.tweens.add({targets:this.totalBack,scaleX:{value:1.1,ease:"Quad.easeInOut"},scaleY:{value:1.1,ease:"Quad.easeInOut"},duration:1e3,repeat:-1,yoyo:!0})}},{key:"OnRewardTweenComplete",value:function OnRewardTweenComplete(){this.contentContainer.bringToTop(this.totalText)}},{key:"OnContinueButtonPressed",value:function OnContinueButtonPressed(){this.emit("challengePressed",this)}},{key:"destroy",value:function destroy(){this.showTimeline&&(this.showTimeline.destroy(),this.showTimeline=null),this.rewardTimeline&&(this.rewardTimeline.destroy(),this.rewardTimeline=null),this.totalTween&&(this.totalTween.remove(),this.totalTween=null),this.continueTween&&(this.continueTween.remove(),this.continueTween=null),ResultsSoloScoresPopup_get(ResultsSoloScoresPopup_getPrototypeOf(ResultsSoloScoresPopup.prototype),"destroy",this).call(this)}}]),ResultsSoloScoresPopup}();function ResultsChallengeUrlPopup_typeof(e){return(ResultsChallengeUrlPopup_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ResultsChallengeUrlPopup_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ResultsChallengeUrlPopup_get(e,t,n){return(ResultsChallengeUrlPopup_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function ResultsChallengeUrlPopup_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ResultsChallengeUrlPopup_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ResultsChallengeUrlPopup_setPrototypeOf(e,t){return(ResultsChallengeUrlPopup_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ResultsChallengeUrlPopup_createSuper(i){return function(){var e,t=ResultsChallengeUrlPopup_getPrototypeOf(i);if(function ResultsChallengeUrlPopup_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=ResultsChallengeUrlPopup_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function ResultsChallengeUrlPopup_possibleConstructorReturn(e,t){return!t||"object"!==ResultsChallengeUrlPopup_typeof(t)&&"function"!=typeof t?ResultsChallengeUrlPopup_assertThisInitialized(e):t}(this,e)}}function ResultsChallengeUrlPopup_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ResultsChallengeUrlPopup_getPrototypeOf(e){return(ResultsChallengeUrlPopup_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(){!function ResultsChallengeUrlPopup_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ResultsChallengeUrlPopup_setPrototypeOf(e,t)}(ResultsChallengeUrlPopup,Phaser.GameObjects.Container);var l=ResultsChallengeUrlPopup_createSuper(ResultsChallengeUrlPopup);function ResultsChallengeUrlPopup(e){var t;!function ResultsChallengeUrlPopup_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ResultsChallengeUrlPopup),t=l.call(this,e);var n={fontFamily:z.Instance.mainFont,fontSize:56*t.scene.gameScale+"px",color:"#000000",align:"center"};t.contentContainer=t.scene.add.container(),t.contentContainer.setPosition(.5*t.scene.scale.width,.5*t.scene.scale.height),t.add(t.contentContainer),t.tintOverlay=t.scene.add.rectangle(0,0,t.scene.scale.width,t.scene.scale.height,0,.5),t.tintOverlay.setOrigin(.5),t.contentContainer.add(t.tintOverlay),t.background=t.scene.add.sprite(0,0,"results_atlas","challenge_friend_pop_up.png"),t.background.setOrigin(.5),t.contentContainer.add(t.background);var i=.3*-t.scene.scale.height,r=t.scene.add.text(0,i,z.Instance.GetString("challenge_a_friend"),n);r.setOrigin(.5),W.ClampTextToDimensions(r,740*t.gameScale,120*t.gameScale),t.contentContainer.add(r);var o=.225*-t.scene.scale.height;n.fontSize=20*t.scene.gameScale+"px",n.wordWrap={width:740*t.scene.gameScale};var a=t.scene.add.text(0,o,z.Instance.GetString("challenge_share_link"),n);a.setOrigin(.5,0),a.setLineSpacing(4*t.scene.gameScale),t.contentContainer.add(a),t.copyButton=new C(t.scene,t.contentContainer,{x:0*t.scene.gameScale,y:0*t.scene.gameScale,frames:["copy_unselected.png","copy_selected.png"],atlas:"results_atlas",id:"domui_RESULTS_copy",domClass:"dom_button",title:"Copy URL",callback:t.OnCopyButtonPressed,context:ResultsChallengeUrlPopup_assertThisInitialized(t),clickSound:{layer:"sfx_ui_shared",key:"ui_button_medium"}}),t.copyButton.Enable(),n.fontSize=56*t.scene.gameScale+"px";var s=t.scene.add.text(-80,0,z.Instance.GetString("copy_link"),n);return s.setOrigin(0,.6),W.ClampTextToDimensions(s,260*t.scene.gameScale,100*t.scene.gameScale),t.copyButton.add(s),t.continueButton=new C(t.scene,t.contentContainer,{x:0*t.scene.gameScale,y:160*t.scene.gameScale,frames:["continue_unselected.png","continue_selected.png"],atlas:"ui_atlas",id:"domui_RESULTS_continue",domClass:"dom_button",title:"Continue",callback:t.OnContinueButtonPressed,context:ResultsChallengeUrlPopup_assertThisInitialized(t),clickSound:{layer:"sfx_ui_shared",key:"ui_button_forward"}}),t.continueButton.Enable(),t.continueTween=t.scene.tweens.add({targets:t.continueButton,scaleX:1.1,scaleY:1.1,duration:1500,ease:"Quad.easeInOut",yoyo:!0,repeat:-1}),t}return function ResultsChallengeUrlPopup_createClass(e,t,n){return t&&ResultsChallengeUrlPopup_defineProperties(e.prototype,t),n&&ResultsChallengeUrlPopup_defineProperties(e,n),e}(ResultsChallengeUrlPopup,[{key:"OnCopyButtonPressed",value:function OnCopyButtonPressed(){try{var e=this.scene.sys.settings.data.gameData||{},t=Ze.EncodeData(e),n=gt.Instance.config.share_url,i=new URL(n);i.searchParams.has("mpd")&&i.searchParams.delete("mpd"),i.searchParams.append("mpd",t),this.CopyToClipboard(i.toString())}catch(e){console.warn("Unable to copy URL:",e)}}},{key:"OnContinueButtonPressed",value:function OnContinueButtonPressed(){s.Instance.StartLoadingScene(y,Qe)}},{key:"CopyToClipboard",value:function CopyToClipboard(t){var n=this.CopyToClipboardFallback.bind(this);if(!navigator.clipboard)return n(t);navigator.clipboard.writeText(t).then(function(){},function(e){n(t)})}},{key:"CopyToClipboardFallback",value:function CopyToClipboardFallback(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);var n=0<document.getSelection().rangeCount&&document.getSelection().getRangeAt(0);t.select();try{document.execCommand("copy")}catch(e){console.warn("Unable to copy URL: "+e)}document.body.removeChild(t),n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n))}},{key:"destroy",value:function destroy(){this.continueTween&&(this.continueTween.remove(),this.continueTween=null),ResultsChallengeUrlPopup_get(ResultsChallengeUrlPopup_getPrototypeOf(ResultsChallengeUrlPopup.prototype),"destroy",this).call(this)}}]),ResultsChallengeUrlPopup}();function ResultsScene_typeof(e){return(ResultsScene_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ResultsScene_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ResultsScene_get(e,t,n){return(ResultsScene_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function ResultsScene_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ResultsScene_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ResultsScene_setPrototypeOf(e,t){return(ResultsScene_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ResultsScene_createSuper(i){return function(){var e,t=ResultsScene_getPrototypeOf(i);if(function ResultsScene_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=ResultsScene_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function ResultsScene_possibleConstructorReturn(e,t){return!t||"object"!==ResultsScene_typeof(t)&&"function"!=typeof t?function ResultsScene_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function ResultsScene_getPrototypeOf(e){return(ResultsScene_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var B=function(){!function ResultsScene_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ResultsScene_setPrototypeOf(e,t)}(ResultsScene,f);var e=ResultsScene_createSuper(ResultsScene);function ResultsScene(){return function ResultsScene_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ResultsScene),e.call(this,"ResultsScene")}return function ResultsScene_createClass(e,t,n){return t&&ResultsScene_defineProperties(e.prototype,t),n&&ResultsScene_defineProperties(e,n),e}(ResultsScene,[{key:"create",value:function create(){ResultsScene_get(ResultsScene_getPrototypeOf(ResultsScene.prototype),"create",this).call(this);var e=this.add.image(.5*this.scale.width,.5*this.scale.height,"menus_background");e.setOrigin(.5),this.world.add(e);var t=this.add.image(e.x-.5*e.width,e.y,"menus_background_slice_tile");t.displayWidth=.5*(this.scale.width-e.width),t.setOrigin(1,.5),this.world.add(t);var n=this.add.image(e.x+.5*e.width,e.y,"menus_background_slice_tile");n.displayWidth=t.displayWidth,n.setOrigin(0,.5),this.world.add(n),(this.sys.settings.data.gameData||{}).challenger?(this.challengeScoresPopup=new A(this),this.challengeScoresPopup.on("hidden",this.OnScoresHidden,this),this.world.add(this.challengeScoresPopup),this.challengeFinalPopup=new I(this),this.challengeFinalPopup.on("challengePressed",this.OnChallengeButtonPressed,this),this.challengeFinalPopup.setVisible(!1),this.world.add(this.challengeFinalPopup)):(this.soloScoresPopup=new j(this),this.soloScoresPopup.on("challengePressed",this.OnChallengeButtonPressed,this),this.world.add(this.soloScoresPopup)),this.challengeUrlPopup=new D(this),this.challengeUrlPopup.setVisible(!1),this.world.add(this.challengeUrlPopup),w.Instance.AddLayer("sfx_results",{audioKeys:["total_scores_above","total_scores_appear","total_scores_below","total_scores_slide","total_scores_total_above","total_scores_total_below","total_scores_you_lose","total_scores_you_win"]}),w.Instance.Play("sfx_results","total_scores_appear")}},{key:"update",value:function update(e,t){ResultsScene_get(ResultsScene_getPrototypeOf(ResultsScene.prototype),"update",this).call(this,e,t)}},{key:"OnScoresHidden",value:function OnScoresHidden(){this.challengeFinalPopup.Show()}},{key:"OnChallengeButtonPressed",value:function OnChallengeButtonPressed(e){e.setVisible(!1),this.challengeUrlPopup.setVisible(!0)}},{key:"OnHomeButtonPressed",value:function OnHomeButtonPressed(){s.Instance.StartLoadingScene(y,Qe)}},{key:"Destroy",value:function Destroy(){w.Instance.DestroyLayer("sfx_results"),ResultsScene_get(ResultsScene_getPrototypeOf(ResultsScene.prototype),"Destroy",this).call(this)}}]),ResultsScene}();function MinigameCompletePopup_typeof(e){return(MinigameCompletePopup_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MinigameCompletePopup_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MinigameCompletePopup_get(e,t,n){return(MinigameCompletePopup_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function MinigameCompletePopup_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MinigameCompletePopup_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function MinigameCompletePopup_setPrototypeOf(e,t){return(MinigameCompletePopup_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MinigameCompletePopup_createSuper(i){return function(){var e,t=MinigameCompletePopup_getPrototypeOf(i);if(function MinigameCompletePopup_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MinigameCompletePopup_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MinigameCompletePopup_possibleConstructorReturn(e,t){return!t||"object"!==MinigameCompletePopup_typeof(t)&&"function"!=typeof t?function MinigameCompletePopup_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function MinigameCompletePopup_getPrototypeOf(e){return(MinigameCompletePopup_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(){!function MinigameCompletePopup_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MinigameCompletePopup_setPrototypeOf(e,t)}(MinigameCompletePopup,Phaser.GameObjects.Container);var r=MinigameCompletePopup_createSuper(MinigameCompletePopup);function MinigameCompletePopup(e){var t;!function MinigameCompletePopup_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MinigameCompletePopup),(t=r.call(this,e)).tintOverlay=t.scene.add.rectangle(0,0,t.scene.scale.width,t.scene.scale.height,0,.5),t.tintOverlay.setOrigin(0),t.tintOverlay.visible=!1,t.add(t.tintOverlay),t.contentContainer=t.scene.add.container(),t.contentContainer.setPosition(.5*t.scene.scale.width,.5*t.scene.scale.height),t.add(t.contentContainer),t.background=new F(t.scene,{x:0,y:0}),t.contentContainer.add(t.background),t.CreateContent();var n=new Phaser.Math.Vector2(500*t.scene.gameScale,20*t.scene.gameScale),i=new Phaser.Geom.Rectangle(.5*-n.x,.5*-n.y,n.x,n.y);return t.confettiParticles=t.scene.add.particles("game_atlas"),t.contentContainer.add(t.confettiParticles),t.confettiParticleEmitter=t.confettiParticles.createAnimEmitter({on:!1,x:0*t.scene.gameScale,y:160*t.scene.gameScale,animations:{blue:{frames:{start:1,end:8,prefix:"confetti",suffix:"_blue.png"},frameRate:10,loop:!0},green:{frames:{start:1,end:8,prefix:"confetti",suffix:"_green.png"},frameRate:10,loop:!0},red:{frames:{start:1,end:8,prefix:"confetti",suffix:"_red.png"},frameRate:10,loop:!0}},alpha:{start:1,end:0,ease:"Sine.easeIn"},scale:{start:1,end:0,ease:"Sine.easeIn"},rotate:{min:0,max:360,start:0,end:-720},speed:{min:-600*t.scene.gameScale,max:600*t.scene.gameScale},radial:!0,angle:{min:-140,max:-40},emitZone:{source:i},gravityY:300,lifespan:2e3}),t.confettiParticleEmitter.reserve(50),t.visible=!1,t}return function MinigameCompletePopup_createClass(e,t,n){return t&&MinigameCompletePopup_defineProperties(e.prototype,t),n&&MinigameCompletePopup_defineProperties(e,n),e}(MinigameCompletePopup,[{key:"CreateContent",value:function CreateContent(){var e=this.scene.sys.settings.data.gameData||{},t=e.mode==Ze.Mode.SummerGames,n=e.player.characterData.id,i=z.Instance.IsRightToLeft();this.characterBackground=this.scene.add.spine(0,0,"character_select_light_sparks","spark_animation",!0),this.characterBackground.setScale(this.scene.gameScale),this.contentContainer.add(this.characterBackground);var r={fontFamily:z.Instance.mainFont,fontSize:72*this.scene.gameScale+"px",color:"#000000"};this.titleText=this.scene.add.text(0,-240*this.scene.gameScale,z.Instance.GetString("new_high_score"),r),this.titleText.setOrigin(.5),W.ClampTextToDimensions(this.titleText,600*this.scene.gameScale,120*this.scene.gameScale),this.contentContainer.add(this.titleText),this.character=this.scene.add.sprite(0*this.scene.gameScale,0*this.scene.gameScale,"characters_atlas","large_character_"+n+".png"),this.character.setOrigin(.5),this.character.setScale(.825),this.contentContainer.add(this.character);var o=110*this.scene.gameScale;this.scoreBg=this.scene.add.sprite(0,o,"popup_atlas","single_player_score_backing.png"),this.scoreBg.setOrigin(.5),this.scoreBg.setScale(i?-1:1,1),this.contentContainer.add(this.scoreBg);var a=Object.assign({},r);a.fontSize=64*this.scene.gameScale+"px",a.color="#ffffff",a.stroke="#ff5a00",a.strokeThickness=Math.ceil(12*this.scene.gameScale);var s=this.scene.add.text(0-210*this.scene.gameScale*(i?-1:1),o+8*this.scene.gameScale,z.Instance.GetString("score").replace("<num>",""),a);s.setOrigin(i?1:0,.75),W.ClampTextToDimensions(s,220*this.scene.gameScale,120*this.scene.gameScale),this.contentContainer.add(s);var l=Object.assign({},r);l.fontSize=96*this.scene.gameScale+"px",l.color="#ffffff",l.stroke="#ff5a00",l.strokeThickness=Math.ceil(20*this.scene.gameScale),this.scoreText=this.scene.add.text(0+200*this.scene.gameScale*(i?-1:1),o+12*this.scene.gameScale,156,l),this.scoreText.setOrigin(i?0:1,.75),this.contentContainer.add(this.scoreText),t||(this.replayButton=new C(this.scene,this.contentContainer,{x:-198*this.scene.gameScale,y:220*this.scene.gameScale,frames:["replay_unselected.png","replay_selected.png"],atlas:"ui_atlas",id:"domui_GAME_replay",domClass:"dom_button",title:"Replay",callback:this.OnReplayButtonPressed,context:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_medium"}})),this.continueButton=new C(this.scene,this.contentContainer,{x:(t?0:198)*this.scene.gameScale,y:220*this.scene.gameScale,frames:["continue_unselected.png","continue_selected.png"],atlas:"ui_atlas",id:"domui_GAME_continue",domClass:"dom_button",title:"Continue",callback:this.OnContinueButtonPressed,context:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_forward"}}),this.continueTween=this.scene.tweens.add({targets:this.continueButton,scaleX:1.1,scaleY:1.1,duration:1500,ease:"Quad.easeInOut",yoyo:!0,repeat:-1})}},{key:"Show",value:function Show(e){this.ShowInit(e),this.contentContainer.setScale(0),this.tintOverlay.alpha=0,this.tintOverlay.visible=!0,this.scene.tweens.add({targets:this.tintOverlay,alpha:{value:.5,duration:1e3,ease:"Back.easeOut"},onComplete:this.OnShowComplete,onCompleteScope:this}),this.scene.tweens.add({targets:this.contentContainer,scaleX:{value:1,duration:800,ease:"Back.easeOut"},scaleY:{value:1,duration:800,ease:"Back.easeOut",delay:400}}),this.visible=!0,w.Instance.Play("sfx_minigame","high_score_appear")}},{key:"ShowInit",value:function ShowInit(e){this.scoreText.text=e.score,e.score>e.prevScore?this.titleText.setText(z.Instance.GetString("new_high_score")):this.titleText.setText(z.Instance.GetString("well_done")),this.titleText.setFontSize(72*this.scene.gameScale+"px"),W.ClampTextToDimensions(this.titleText,600*this.scene.gameScale,120*this.scene.gameScale)}},{key:"OnShowComplete",value:function OnShowComplete(){this.replayButton&&this.replayButton.Enable(),this.continueButton.Enable(),this.confettiParticleEmitter.explode(50)}},{key:"OnReplayButtonPressed",value:function OnReplayButtonPressed(){this.scene.Replay()}},{key:"OnContinueButtonPressed",value:function OnContinueButtonPressed(){var e=this.scene.sys.settings.data.gameData||{};e.mode==Ze.Mode.SummerGames?e.listIndex<e.list.length-1?(this.continueButton.Disable(),this.HideResults()):s.Instance.StartLoadingScene(y,B,this.scene.sys.settings.data):s.Instance.StartLoadingScene(y,Ne,this.scene.sys.settings.data)}},{key:"HideResults",value:function HideResults(){this.scene.tweens.add({targets:this.contentContainer,scaleX:{value:0,duration:500,ease:"Back.easeIn"},scaleY:{value:0,duration:500,ease:"Back.easeIn"},onComplete:this.OnHideResultsComplete,onCompleteScope:this})}},{key:"OnHideResultsComplete",value:function OnHideResultsComplete(){this.contentContainer.setVisible(!1),this.emit("hidden")}},{key:"detroy",value:function detroy(){this.continueTween&&(this.continueTween.remove(),this.continueTween=null),MinigameCompletePopup_get(MinigameCompletePopup_getPrototypeOf(MinigameCompletePopup.prototype),"destroy",this).call(this)}}]),MinigameCompletePopup}();function MinigameChallengeCompletePopup_typeof(e){return(MinigameChallengeCompletePopup_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MinigameChallengeCompletePopup_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MinigameChallengeCompletePopup_setPrototypeOf(e,t){return(MinigameChallengeCompletePopup_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MinigameChallengeCompletePopup_createSuper(i){return function(){var e,t=MinigameChallengeCompletePopup_getPrototypeOf(i);if(function MinigameChallengeCompletePopup_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MinigameChallengeCompletePopup_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MinigameChallengeCompletePopup_possibleConstructorReturn(e,t){return!t||"object"!==MinigameChallengeCompletePopup_typeof(t)&&"function"!=typeof t?function MinigameChallengeCompletePopup_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function MinigameChallengeCompletePopup_getPrototypeOf(e){return(MinigameChallengeCompletePopup_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G=function(){!function MinigameChallengeCompletePopup_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MinigameChallengeCompletePopup_setPrototypeOf(e,t)}(MinigameChallengeCompletePopup,E);var t=MinigameChallengeCompletePopup_createSuper(MinigameChallengeCompletePopup);function MinigameChallengeCompletePopup(e){return function MinigameChallengeCompletePopup_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MinigameChallengeCompletePopup),t.call(this,e)}return function MinigameChallengeCompletePopup_createClass(e,t,n){return t&&MinigameChallengeCompletePopup_defineProperties(e.prototype,t),n&&MinigameChallengeCompletePopup_defineProperties(e,n),e}(MinigameChallengeCompletePopup,[{key:"CreateContent",value:function CreateContent(){var e=this.scene.sys.settings.data.gameData||{},t=e.player.characterData.id,n=e.challenger;this.characterBackground=this.scene.add.spine(0,0,"character_select_light_sparks","spark_animation",!0),this.characterBackground.setScale(this.scene.gameScale),this.contentContainer.add(this.characterBackground);var i={fontFamily:z.Instance.mainFont,fontSize:112*this.scene.gameScale+"px",color:"#000000"};this.titleText=this.scene.add.text(0,-210*this.scene.gameScale,z.Instance.GetString("you_win").toUpperCase(),i),this.titleText.setOrigin(.5),W.ClampTextToDimensions(this.titleText,500*this.scene.gameScale,160*this.scene.gameScale),this.contentContainer.add(this.titleText),this.character=this.scene.add.sprite(-210*this.scene.gameScale,12*this.scene.gameScale,"characters_atlas","large_character_"+t+".png"),this.character.setOrigin(.5),this.character.setScale(.85),this.contentContainer.add(this.character),this.challenger=this.scene.add.sprite(210*this.scene.gameScale,12*this.scene.gameScale,"characters_atlas","large_character_"+n+".png"),this.challenger.setOrigin(.5),this.challenger.setScale(-.85,.85),this.contentContainer.add(this.challenger);var r=-170*this.scene.gameScale,o=80*this.scene.gameScale;this.charScoreBg=this.scene.add.sprite(r,o,"popup_atlas","score_backing_left_win.png"),this.charScoreBg.setOrigin(.5),this.contentContainer.add(this.charScoreBg);var a=Object.assign({},i);a.fontSize=24*this.scene.gameScale+"px",a.color="#ffffff",a.stroke="#ff5a00",a.strokeThickness=Math.ceil(16*this.scene.gameScale),this.charScoreLabel=this.scene.add.text(r-10*this.scene.gameScale,o-40*this.scene.gameScale,z.Instance.GetString("score").replace("<num>",""),a),this.charScoreLabel.setOrigin(.5,.75),this.contentContainer.add(this.charScoreLabel);var s=Object.assign({},i);s.fontSize=96*this.scene.gameScale+"px",s.color="#ffffff",this.charScoreText=this.scene.add.text(r,o+4*this.scene.gameScale,156,s),this.charScoreText.setOrigin(.5,.5),this.contentContainer.add(this.charScoreText);var l=170*this.scene.gameScale,c=80*this.scene.gameScale;this.challScoreBg=this.scene.add.sprite(l,c,"popup_atlas","score_backing_right_win.png"),this.challScoreBg.setOrigin(.5),this.contentContainer.add(this.challScoreBg),this.challScoreLabel=this.scene.add.text(l+10*this.scene.gameScale,c-44*this.scene.gameScale,z.Instance.GetString("score").replace("<num>",""),a),this.challScoreLabel.setOrigin(.5,.75),this.contentContainer.add(this.challScoreLabel),i.fontSize=96*this.scene.gameScale+"px",i.stroke=0,i.strokeThickness=0,this.challScoreText=this.scene.add.text(l+20*this.scene.gameScale,c+4*this.scene.gameScale,156,s),this.challScoreText.setOrigin(.5,.5),this.contentContainer.add(this.challScoreText),this.continueButton=new C(this.scene,this.contentContainer,{x:0*this.scene.gameScale,y:220*this.scene.gameScale,frames:["continue_unselected.png","continue_selected.png"],atlas:"ui_atlas",id:"domui_GAME_continue",domClass:"dom_button",title:"Continue",callback:this.OnContinueButtonPressed,context:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_forward"}}),this.continueTween=this.scene.tweens.add({targets:this.continueButton,scaleX:1.1,scaleY:1.1,duration:1500,ease:"Quad.easeInOut",yoyo:!0,repeat:-1})}},{key:"ShowInit",value:function ShowInit(e){this.charScoreText.text=e.score,this.challScoreText.text=e.friendScore,e.score>e.friendScore?(this.titleText.setText(z.Instance.GetString("you_win").toUpperCase()),this.titleText.setFontSize(112*this.scene.gameScale+"px"),W.ClampTextToDimensions(this.titleText,500*this.scene.gameScale,160*this.scene.gameScale),this.characterBackground.setPosition(this.character.x,this.characterBackground.y),this.challenger.setScale(-.65,.65),this.challenger.setAlpha(.5),this.challenger.setPosition(this.challenger.x,this.challenger.y-20*this.scene.gameScale),this.challScoreBg.setFrame("score_backing_right_loose.png"),this.challScoreLabel.setFontSize(20*this.scene.gameScale+"px"),this.challScoreLabel.setStroke("#000000",12*this.scene.gameScale),this.challScoreText.setFontSize(72*this.scene.gameScale+"px")):e.score<e.friendScore?(this.titleText.setText(z.Instance.GetString("you_lose")),this.titleText.setFontSize(72*this.scene.gameScale+"px"),W.ClampTextToDimensions(this.titleText,500*this.scene.gameScale,160*this.scene.gameScale),this.characterBackground.setPosition(this.challenger.x,this.characterBackground.y),this.character.setScale(.65),this.character.setAlpha(.5),this.character.setPosition(this.character.x,this.character.y-20*this.scene.gameScale),this.charScoreBg.setFrame("score_backing_left_loose.png"),this.charScoreLabel.setFontSize(20*this.scene.gameScale+"px"),this.charScoreLabel.setStroke("#000000",12*this.scene.gameScale),this.charScoreText.setFontSize(72*this.scene.gameScale+"px")):(this.titleText.setText(z.Instance.GetString("tie")),this.titleText.setFontSize(92*this.scene.gameScale+"px"),W.ClampTextToDimensions(this.titleText,500*this.scene.gameScale,160*this.scene.gameScale),this.characterBackground.setVisible(!1))}}]),MinigameChallengeCompletePopup}();function MinigameCountdown_typeof(e){return(MinigameCountdown_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MinigameCountdown_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MinigameCountdown_get(e,t,n){return(MinigameCountdown_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function MinigameCountdown_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MinigameCountdown_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function MinigameCountdown_setPrototypeOf(e,t){return(MinigameCountdown_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MinigameCountdown_createSuper(i){return function(){var e,t=MinigameCountdown_getPrototypeOf(i);if(function MinigameCountdown_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MinigameCountdown_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MinigameCountdown_possibleConstructorReturn(e,t){return!t||"object"!==MinigameCountdown_typeof(t)&&"function"!=typeof t?function MinigameCountdown_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function MinigameCountdown_getPrototypeOf(e){return(MinigameCountdown_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=function(){!function MinigameCountdown_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MinigameCountdown_setPrototypeOf(e,t)}(MinigameCountdown,Phaser.GameObjects.Container);var i=MinigameCountdown_createSuper(MinigameCountdown);function MinigameCountdown(e){var t;!function MinigameCountdown_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MinigameCountdown),(t=i.call(this,e)).scene=e,t.x=.5*t.scene.scale.width,t.y=.5*t.scene.scale.height;var n={fontFamily:z.Instance.mainFont,fontSize:256*t.scene.gameScale+"px",color:"#ffffff",stroke:"#36BCEB",strokeThickness:Math.ceil(24*t.scene.gameScale),wordWrap:{width:120*t.scene.gameScale},align:"center"};return t.num3=t.scene.add.text(0,0,"3",n),t.num3.setOrigin(.5),t.num3.setAngle(15),t.num3.setVisible(!1),t.add(t.num3),t.num2=t.scene.add.text(0,0,"2",n),t.num2.setOrigin(.5),t.num2.setAngle(-15),t.num2.setVisible(!1),t.add(t.num2),t.num1=t.scene.add.text(0,0,"1",n),t.num1.setOrigin(.5),t.num1.setAngle(15),t.num1.setVisible(!1),t.add(t.num1),t.go=t.scene.add.text(0,0,z.Instance.GetString("go"),n),t.go.setOrigin(.5),t.go.setLineSpacing(-100*t.scene.gameScale),t.go.setVisible(!1),W.ClampTextToDimensions(t.go,500*t.scene.gameScale,200*t.scene.gameScale),t.add(t.go),t}return function MinigameCountdown_createClass(e,t,n){return t&&MinigameCountdown_defineProperties(e.prototype,t),n&&MinigameCountdown_defineProperties(e,n),e}(MinigameCountdown,[{key:"Start",value:function Start(){this.TweenEntry(null,this.num3,this.StartNum2),w.Instance.Play("sfx_minigame","3_2_1")}},{key:"StartNum2",value:function StartNum2(){this.TweenEntry(this.num3,this.num2,this.StartNum1),w.Instance.Play("sfx_minigame","3_2_1")}},{key:"StartNum1",value:function StartNum1(){this.TweenEntry(this.num2,this.num1,this.StartGo),w.Instance.Play("sfx_minigame","3_2_1")}},{key:"StartGo",value:function StartGo(){this.TweenEntry(this.num1,this.go,this.OnComplete),w.Instance.Play("sfx_minigame","go")}},{key:"TweenEntry",value:function TweenEntry(e,t,n){e&&e.setVisible(!1),t.setVisible(!0),t.setAlpha(0),t.setScale(0),this.countdownTween=this.scene.tweens.add({targets:t,alpha:{value:1,duration:250,ease:"Linear",yoyo:!0},scaleX:{value:1,duration:500,ease:"Linear"},scaleY:{value:1,duration:500,ease:"Linear"},onComplete:n,onCompleteScope:this})}},{key:"OnComplete",value:function OnComplete(){this.emit("complete",this)}},{key:"destroy",value:function destroy(){this.countdownTween&&(this.countdownTween.remove(),this.countdownTween=null),MinigameCountdown_get(MinigameCountdown_getPrototypeOf(MinigameCountdown.prototype),"destroy",this).call(this)}}]),MinigameCountdown}();function DirectionalPanel_typeof(e){return(DirectionalPanel_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DirectionalPanel_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function DirectionalPanel_get(e,t,n){return(DirectionalPanel_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function DirectionalPanel_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=DirectionalPanel_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function DirectionalPanel_setPrototypeOf(e,t){return(DirectionalPanel_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function DirectionalPanel_createSuper(i){return function(){var e,t=DirectionalPanel_getPrototypeOf(i);if(function DirectionalPanel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=DirectionalPanel_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function DirectionalPanel_possibleConstructorReturn(e,t){return!t||"object"!==DirectionalPanel_typeof(t)&&"function"!=typeof t?DirectionalPanel_assertThisInitialized(e):t}(this,e)}}function DirectionalPanel_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DirectionalPanel_getPrototypeOf(e){return(DirectionalPanel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=function(){!function DirectionalPanel_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DirectionalPanel_setPrototypeOf(e,t)}(DirectionalPanel,Phaser.GameObjects.Container);var r=DirectionalPanel_createSuper(DirectionalPanel);function DirectionalPanel(e){var t;!function DirectionalPanel_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DirectionalPanel),(t=r.call(this,e)).contentContainer=t.scene.add.container(),t.contentContainer.x=-t.scene.scale.width,t.add(t.contentContainer);var n=t.scene.add.sprite(t.scene.scale.width,0,"popup_atlas","character_select_pop_up_back.png");n.setOrigin(1,.5),t.contentContainer.add(n);var i=t.scene.add.rectangle(0,0,t.scene.scale.width-n.width+.5,t.scene.scale.height,16777215);return i.setOrigin(0,.5),t.contentContainer.add(i),t.elementPosition=new _(t.scene,DirectionalPanel_assertThisInitialized(t),{x:1,y:.5,local:!1}),t}return function DirectionalPanel_createClass(e,t,n){return t&&DirectionalPanel_defineProperties(e.prototype,t),n&&DirectionalPanel_defineProperties(e,n),e}(DirectionalPanel,[{key:"Show",value:function Show(){this.contentContainer.setScale(0,1),this.scene.tweens.add({targets:this.contentContainer,scaleX:{value:1,duration:500,ease:"Back.easeOut"},onComplete:this.OnShowComplete,onCompleteScope:this})}},{key:"OnShowComplete",value:function OnShowComplete(){this.emit("onShown")}},{key:"destroy",value:function destroy(){this.scene&&(this.elementPosition&&(this.elementPosition.destroy(),this.elementPosition=null),DirectionalPanel_get(DirectionalPanel_getPrototypeOf(DirectionalPanel.prototype),"destroy",this).call(this))}}]),DirectionalPanel}();function MinigameProgressPopup_typeof(e){return(MinigameProgressPopup_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MinigameProgressPopup_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MinigameProgressPopup_get(e,t,n){return(MinigameProgressPopup_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function MinigameProgressPopup_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MinigameProgressPopup_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function MinigameProgressPopup_setPrototypeOf(e,t){return(MinigameProgressPopup_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MinigameProgressPopup_createSuper(i){return function(){var e,t=MinigameProgressPopup_getPrototypeOf(i);if(function MinigameProgressPopup_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MinigameProgressPopup_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MinigameProgressPopup_possibleConstructorReturn(e,t){return!t||"object"!==MinigameProgressPopup_typeof(t)&&"function"!=typeof t?MinigameProgressPopup_assertThisInitialized(e):t}(this,e)}}function MinigameProgressPopup_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MinigameProgressPopup_getPrototypeOf(e){return(MinigameProgressPopup_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=function(){!function MinigameProgressPopup_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MinigameProgressPopup_setPrototypeOf(e,t)}(MinigameProgressPopup,Phaser.GameObjects.Container);var u=MinigameProgressPopup_createSuper(MinigameProgressPopup);function MinigameProgressPopup(e){var t;!function MinigameProgressPopup_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MinigameProgressPopup),(t=u.call(this,e)).tintOverlay=t.scene.add.rectangle(0,0,t.scene.scale.width,t.scene.scale.height,0,.5),t.tintOverlay.setOrigin(0),t.tintOverlay.setAlpha(.5),t.add(t.tintOverlay),t.progressPanel=new U(t.scene),t.progressPanel.on("onShown",t.OnShowComplete,MinigameProgressPopup_assertThisInitialized(t)),t.add(t.progressPanel),t.contentContainer=t.scene.add.container(),t.contentContainer.setPosition(.5*t.scene.scale.width,.5*t.scene.scale.height),t.contentContainer.setVisible(!1),t.add(t.contentContainer);var n={fontFamily:z.Instance.mainFont,fontSize:72*t.scene.gameScale+"px",color:"#000000"},i=z.Instance.IsRightToLeft();t.progressText=t.scene.add.text(0,-240*t.scene.gameScale,z.Instance.GetString("progress").toUpperCase(),n),t.progressText.setOrigin(.5),W.ClampTextToDimensions(t.progressText,600*t.scene.gameScale,160*t.scene.gameScale),t.contentContainer.add(t.progressText);var r=t.scene.add.sprite(16*t.scene.gameScale,-74*t.scene.gameScale,"popup_atlas","challenge_score_info_backing.png");r.setOrigin(.5),t.contentContainer.add(r),t.minigameScoreTexts=[],t.CreateProgressEntry(-324*t.scene.gameScale,r.y-114*t.scene.gameScale,Ze.ID.Weightlifting),t.CreateProgressEntry(16*t.scene.gameScale,r.y-114*t.scene.gameScale,Ze.ID.Swimming),t.CreateProgressEntry(-324*t.scene.gameScale,r.y-32*t.scene.gameScale,Ze.ID.Climbing),t.CreateProgressEntry(16*t.scene.gameScale,r.y-32*t.scene.gameScale,Ze.ID.Trampoline),t.CreateProgressEntry(-324*t.scene.gameScale,r.y+50*t.scene.gameScale,Ze.ID.Sprint),t.CreateProgressEntry(16*t.scene.gameScale,r.y+50*t.scene.gameScale,Ze.ID.TripleJump);var o=20*t.scene.gameScale,a=174*t.scene.gameScale;t.totalBackground=t.scene.add.polygon(o,a,[0,0,612*t.scene.gameScale,7*t.scene.gameScale,4*t.scene.gameScale,26*t.scene.gameScale],48639),t.totalBackground.setOrigin(.5),t.contentContainer.add(t.totalBackground),n.fontSize=64*t.scene.gameScale+"px";var s=o-40*t.scene.gameScale,l=a-12*t.scene.gameScale,c=t.scene.add.text(s,l,z.Instance.GetString("total").replace("<num>","").toUpperCase(),n);return c.setOrigin(i?0:1,.75),W.ClampTextToDimensions(c,640*t.scene.gameScale,160*t.scene.gameScale),t.contentContainer.add(c),n.fontSize=112*t.scene.gameScale+"px",n.color="#00bdff",t.totalText=t.scene.add.text(s,l,468,n),t.totalText.setOrigin(i?1:0,.75),t.contentContainer.add(t.totalText),t.continueButton=new C(t.scene,t.contentContainer,{x:0*t.scene.gameScale,y:270*t.scene.gameScale,frames:["continue_unselected.png","continue_selected.png"],atlas:"ui_atlas",id:"domui_GAME_continue",domClass:"dom_button",title:"Continue",callback:t.OnContinueButtonPressed,context:MinigameProgressPopup_assertThisInitialized(t),clickSound:{layer:"sfx_ui_shared",key:"ui_button_forward"}}),t.continueTween=t.scene.tweens.add({targets:t.continueButton,scaleX:1.1,scaleY:1.1,duration:1500,ease:"Quad.easeInOut",yoyo:!0,repeat:-1}),t.visible=!1,t}return function MinigameProgressPopup_createClass(e,t,n){return t&&MinigameProgressPopup_defineProperties(e.prototype,t),n&&MinigameProgressPopup_defineProperties(e,n),e}(MinigameProgressPopup,[{key:"CreateProgressEntry",value:function CreateProgressEntry(e,t,n){var i=Ze.Data[n],r={fontFamily:z.Instance.mainFont,fontSize:32*this.scene.gameScale+"px",color:"#000000"},o=z.Instance.IsRightToLeft(),a=this.scene.add.text(e,t,z.Instance.GetString(i.title),r);a.setOrigin(0,0),W.ClampTextToDimensions(a,240*this.scene.gameScale,80*this.scene.gameScale),this.contentContainer.add(a),r.fontSize=20*this.scene.gameScale+"px";var s=e+220*this.scene.gameScale,l=t+60*this.scene.gameScale,c=this.scene.add.text(s,l,z.Instance.GetString("highscore").replace("<num>",""),r);c.setOrigin(o?0:1,.75),W.ClampTextToDimensions(c,450*this.scene.gameScale,80*this.scene.gameScale),this.contentContainer.add(c),r.fontSize=48*this.scene.gameScale+"px",r.color="#ffffff";var u=this.scene.add.text(s,l,0,r);u.setOrigin(o?1:0,.75),this.contentContainer.add(u),this.minigameScoreTexts.push(u)}},{key:"Show",value:function Show(){this.setVisible(!0),this.progressPanel.Show();for(var e=this.scene.sys.settings.data.gameData||{},t=0,n=0;n<e.list.length;n++){var i=e.list[n],r=i.score||0;this.minigameScoreTexts[i.id].setText(r),t+=r}this.totalText.setText(t),w.Instance.Play("sfx_minigame","progress_appear")}},{key:"OnShowComplete",value:function OnShowComplete(){this.contentContainer.setVisible(!0),this.continueButton.Enable()}},{key:"OnContinueButtonPressed",value:function OnContinueButtonPressed(){var e=this.scene.sys.settings.data.gameData||{};Ze.StartNextMinigame(e)}},{key:"destroy",value:function destroy(){this.continueTween&&(this.continueTween.remove(),this.continueTween=null),MinigameProgressPopup_get(MinigameProgressPopup_getPrototypeOf(MinigameProgressPopup.prototype),"destroy",this).call(this)}}]),MinigameProgressPopup}();function MinigameUI_typeof(e){return(MinigameUI_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MinigameUI_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MinigameUI_get(e,t,n){return(MinigameUI_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function MinigameUI_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MinigameUI_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function MinigameUI_setPrototypeOf(e,t){return(MinigameUI_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MinigameUI_createSuper(i){return function(){var e,t=MinigameUI_getPrototypeOf(i);if(function MinigameUI_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MinigameUI_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MinigameUI_possibleConstructorReturn(e,t){return!t||"object"!==MinigameUI_typeof(t)&&"function"!=typeof t?function MinigameUI_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function MinigameUI_getPrototypeOf(e){return(MinigameUI_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(){!function MinigameUI_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MinigameUI_setPrototypeOf(e,t)}(MinigameUI,Phaser.GameObjects.Container);var n=MinigameUI_createSuper(MinigameUI);function MinigameUI(e){var t;return function MinigameUI_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MinigameUI),(t=n.call(this,e)).scene=e,t.x=.5*t.scene.scale.width,t.y=.5*t.scene.scale.height,t.CreatePerfectText(),t}return function MinigameUI_createClass(e,t,n){return t&&MinigameUI_defineProperties(e.prototype,t),n&&MinigameUI_defineProperties(e,n),e}(MinigameUI,[{key:"update",value:function update(e,t){MinigameUI_get(MinigameUI_getPrototypeOf(MinigameUI.prototype),"update",this).call(this,e,t);var n=.001*t;if(this.speedMeter&&this.speedMeter.visible){this.currentSpeed=Phaser.Math.Linear(this.currentSpeed,this.targetSpeed,n*this.speedTweenScalar);var i=Phaser.Math.Easing.Quadratic.In(this.currentSpeed)*this.maxShake,r=Phaser.Math.RND.realInRange(-i,i);this.speedDial.setAngle(Phaser.Math.Linear(this.minAngle,this.maxAngle,this.currentSpeed+r))}}},{key:"CreatePerfectText",value:function CreatePerfectText(){var e={fontFamily:z.Instance.mainFont,fontSize:76*this.scene.gameScale+"px",color:"#ffb400",align:"center",stroke:"#9c5800",strokeThickness:Math.ceil(8*this.scene.gameScale),wordWrap:{width:380*this.scene.gameScale}};this.perfectText=this.scene.add.text(0,0,z.Instance.GetString("perfect"),e),this.perfectText.setOrigin(.5),this.perfectText.setVisible(!1),this.add(this.perfectText)}},{key:"CreateSpeedMeter",value:function CreateSpeedMeter(){this.speedRoot=this.scene.add.container(),this.add(this.speedRoot),this.speedMeter=this.scene.add.container(),this.speedRoot.add(this.speedMeter);var e=this.scene.add.sprite(0,0,"game_atlas","speed_metre_back.png");e.setOrigin(.5),this.speedMeter.add(e);var t=-1*this.scene.gameScale,n=23*this.scene.gameScale;this.minAngle=-108,this.maxAngle=104,this.speedDial=this.scene.add.sprite(t,n,"game_atlas","speed_metre_dial.png"),this.speedDial.setOrigin(.5,.75),this.speedDial.setAngle(this.minAngle),this.speedMeter.add(this.speedDial),this.targetSpeed=0,this.currentSpeed=0,this.speedTweenScalar=4,this.maxShake=.01,this.speedElPos=new _(this.scene,this.speedRoot,{x:1,y:1,offsetX:-.5*this.scene.scale.width-110*this.scene.gameScale,offsetY:-.5*this.scene.scale.height-100*this.scene.gameScale,local:!1})}},{key:"Hide",value:function Hide(){this.hideTween&&this.hideTween.remove(),this.hideTween=this.scene.tweens.add({targets:this,alpha:0,duration:500,ease:"Back.easeIn",onComplete:this.OnHideTweenComplete,onCompleteScope:this})}},{key:"OnHideTweenComplete",value:function OnHideTweenComplete(){this.setVisible(!1)}},{key:"ShowPerfect",value:function ShowPerfect(e,t){e=e||0,t=t||0,this.perfectTimeline&&(this.perfectTimeline.stop(),this.perfectTimeline.destroy()),this.bringToTop(this.perfectText),this.perfectText.setVisible(!0),this.perfectText.setPosition(e||0,t||0),this.perfectText.setAngle(5),this.perfectText.setScale(0),this.perfectText.setAlpha(0),this.perfectTimeline=this.scene.tweens.createTimeline(),this.perfectTimeline.on("complete",this.HidePerfect,this),this.perfectTimeline.add({targets:this.perfectText,scaleX:{value:1,duration:250,ease:"Back.easeOut"},scaleY:{value:1,duration:250,ease:"Back.easeOut"},alpha:{value:1,duration:250,ease:"Back.easeOut"},offset:0}),this.perfectTimeline.add({targets:this.perfectText,y:{value:t-200*this.scene.gameScale,duration:1250,ease:"Linear"},offset:0}),this.perfectTimeline.add({targets:this.perfectText,angle:{value:-5,duration:250,ease:"Quad.easeInOut"},yoyo:!0,repeat:3,offset:0}),this.perfectTimeline.add({targets:this.perfectText,scaleX:{value:0,duration:1e3,ease:"Quad.easeOut"},scaleY:{value:0,duration:1e3,ease:"Quad.easeOut"},alpha:{value:0,duration:1e3,ease:"Quad.easeOut"},offset:250}),this.perfectTimeline.play()}},{key:"HidePerfect",value:function HidePerfect(){this.perfectText.setVisible(!1)}},{key:"SetSpeed",value:function SetSpeed(e){this.targetSpeed=e}},{key:"HideSpeedMeter",value:function HideSpeedMeter(){this.hideTween&&this.hideTween.remove(),this.hideTween=this.scene.tweens.add({targets:this.speedMeter,scaleX:0,scaleY:0,duration:500,ease:"Back.easeIn",onComplete:this.OnHideSpeedMeterTweenComplete,onCompleteScope:this})}},{key:"OnHideSpeedMeterTweenComplete",value:function OnHideSpeedMeterTweenComplete(){this.speedMeter.setVisible(!1)}},{key:"OnEnterPreGameState",value:function OnEnterPreGameState(){}},{key:"destroy",value:function destroy(){this.hideTween&&(this.hideTween.remove(),this.hideTween=null),this.perfectTimeline&&(this.perfectTimeline.destroy(),this.perfectTimeline=null),this.speedElPos&&(this.speedElPos.destroy(),this.speedElPos=null),MinigameUI_get(MinigameUI_getPrototypeOf(MinigameUI.prototype),"destroy",this).call(this)}}]),MinigameUI}();function Minigame_typeof(e){return(Minigame_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Minigame_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Minigame_get(e,t,n){return(Minigame_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function Minigame_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Minigame_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Minigame_setPrototypeOf(e,t){return(Minigame_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function Minigame_createSuper(i){return function(){var e,t=Minigame_getPrototypeOf(i);if(function Minigame_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=Minigame_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function Minigame_possibleConstructorReturn(e,t){return!t||"object"!==Minigame_typeof(t)&&"function"!=typeof t?function Minigame_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function Minigame_getPrototypeOf(e){return(Minigame_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(){!function Minigame_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Minigame_setPrototypeOf(e,t)}(Minigame,S);var t=Minigame_createSuper(Minigame);function Minigame(e){return function Minigame_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Minigame),t.call(this,e)}return function Minigame_createClass(e,t,n){return t&&Minigame_defineProperties(e.prototype,t),n&&Minigame_defineProperties(e,n),e}(Minigame,[{key:"create",value:function create(){Minigame_get(Minigame_getPrototypeOf(Minigame.prototype),"create",this).call(this),this.state=Minigame.State.Tutorial,this.player=null,this.minigameCamera=this.CreateMinigameCamera(),this.minigameCamera&&(this.cameras.main.ignore(this.world),this.minigameCamera.DoZoomOut()),this.CreateWorld(),w.Instance.AddLayer("sfx_minigame",{audioKeys:["3_2_1","game_end","go","high_score_appear","progress_appear","tutorial_slide_in","tutorial_slide_out"]}),this.minigameUI=this.CreateMinigameUI(),this.minigameUI&&this.ui.add(this.minigameUI),this.CreatePlaceholderPrompt();var e=this.sys.settings.data.gameData||{};if(e.challenger&&(this.minigameChallenger=new k(this),this.minigameChallenger&&(this.minigameChallenger.on("complete",this.StartCountdown,this),this.ui.add(this.minigameChallenger))),this.minigameCountdown=new L(this),this.minigameCountdown&&(this.minigameCountdown.on("complete",this.StartGame,this),this.ui.add(this.minigameCountdown)),this.minigameTutorialPopup=this.CreateMinigameTutorial(),this.minigameTutorialPopup?(this.minigameTutorialPopup.skipFade=!!e.challenger,this.ui.add(this.minigameTutorialPopup)):this.state=Minigame.State.Game,this.minigameCompletePopup=new(e.challenger?G:E)(this),this.minigameCompletePopup&&this.ui.add(this.minigameCompletePopup),e.mode==Ze.Mode.SummerGames&&(this.minigameProgressPopup=new J(this),this.minigameProgressPopup&&(this.minigameCompletePopup.on("hidden",this.minigameProgressPopup.Show,this.minigameProgressPopup),this.ui.add(this.minigameProgressPopup))),this.displayFPS&&this.ui.add(this.fpsCounter),this.gameTimer=0,this.postGameCooldownTimer=0,this.postGameCooldownTime=2,this.events.on(Phaser.Scenes.Events.WAKE,this.OnWake,this),gt.Instance.config.debug){this.bottomLeftPanel=new M(this,this.dom,{domClass:"dom_panel bottom left"}),this.endButton=new C(this,this.bottomLeftPanel,{frames:["pause_play_unselected.png","pause_play_selected.png"],atlas:"ui_atlas",id:"domui_GAME_end",title:"End",callback:this.EndGame,context:this}),this.endButton.Enable();var t={fontFamily:z.Instance.mainFont,fontSize:16*this.gameScale+"px",color:"#ff00ff"},n=this.add.text(0,0,"END\nGAME",t);n.setOrigin(.5),this.endButton.add(n)}}},{key:"CreateMinigameCamera",value:function CreateMinigameCamera(){return new O(this)}},{key:"CreateMinigameUI",value:function CreateMinigameUI(){}},{key:"CreateMinigameTutorial",value:function CreateMinigameTutorial(){return new g(this,{id:this.GetID()})}},{key:"CreateWorld",value:function CreateWorld(){}},{key:"CreatePlaceholderPrompt",value:function CreatePlaceholderPrompt(){var e=Ze.Data[this.GetID()];if(e){var t=this.deviceManager.desktop?e.spineDesktop:e.spineMobile,n=this.add.spine(0,50*this.gameScale,"how_to_play_mini",t,!0);n.setScale(.25),this.ui.add(n),this.spineElPos=new _(this,n,{x:0,y:1,offsetX:100*this.gameScale,offsetY:-60*this.gameScale,local:!1})}}},{key:"GetID",value:function GetID(){switch(this.key){case"WeightliftingMinigame":return Ze.ID.Weightlifting;case"SwimmingMinigame":return Ze.ID.Swimming;case"ClimbingMinigame":return Ze.ID.Climbing;case"TrampolineMinigame":return Ze.ID.Trampoline;case"SprintMinigame":return Ze.ID.Sprint;case"TripleJumpMinigame":return Ze.ID.TripleJump}}},{key:"update",value:function update(e,t){switch(Minigame_get(Minigame_getPrototypeOf(Minigame.prototype),"update",this).call(this,e,t),this.minigameUI&&this.minigameUI.update(e,t),this.minigameCamera&&this.minigameCamera.update(e,t),this.player&&this.player.update(e,t),this.ghost&&this.ghost.update(e,t),this.state){case Minigame.State.PreGame:this.UpdatePreGameState(e,t);break;case Minigame.State.Game:this.UpdateGameState(e,t);break;case Minigame.State.PostGame:this.UpdatePostGameState(e,t)}}},{key:"UpdatePreGameState",value:function UpdatePreGameState(){}},{key:"UpdateGameState",value:function UpdateGameState(e,t){0<this.gameTimer&&(this.gameTimer-=.001*t,this.gameTimer<=0&&this.EndGame())}},{key:"UpdatePostGameState",value:function UpdatePostGameState(e,t){0<this.postGameCooldownTimer&&(this.postGameCooldownTimer-=.001*t,this.postGameCooldownTimer<=0&&this.SetState(Minigame.State.Results))}},{key:"SetState",value:function SetState(e){switch(this.state=e,this.state){case Minigame.State.PreGame:this.OnEnterPreGameState();break;case Minigame.State.Game:this.OnEnterGameState();break;case Minigame.State.PostGame:this.OnEnterPostGameState();break;case Minigame.State.Results:this.OnEnterResultsState()}}},{key:"OnEnterPreGameState",value:function OnEnterPreGameState(){this.minigameChallenger?this.minigameChallenger.Start():this.minigameCountdown.Start(),this.player.OnEnterPreGameState(),this.minigameUI&&this.minigameUI.OnEnterPreGameState()}},{key:"OnEnterGameState",value:function OnEnterGameState(){this.ghost&&this.ghost.OnMinigameStart()}},{key:"OnEnterPostGameState",value:function OnEnterPostGameState(){this.player.OnGameEnterPostGameState(this.HasWon()),this.ghost&&this.ghost.OnGameEnterPostGameState(!this.HasWon()),this.postGameCooldownTimer=this.postGameCooldownTime,this.endButton&&this.endButton.setVisible(!1)}},{key:"OnEnterResultsState",value:function OnEnterResultsState(){this.player.OnMinigameComplete(),this.minigameUI&&this.minigameUI.Hide();var e=this.GetScore(),t=0,n=this.sys.settings.data.gameData||{};if(n.mode==Ze.Mode.SummerGames){var i=n.list[n.listIndex];i.score=e,t=i.friendScore}var r=this.key.toLowerCase().replace("minigame",""),o=v.Instance.GetData(r)||0;this.minigameCompletePopup.Show({score:e,friendScore:t,prevScore:o}),o<e&&(v.Instance.SaveData(r,e),v.Instance.SaveToStorage())}},{key:"HasWon",value:function HasWon(){return!0}},{key:"GetScore",value:function GetScore(){return 999}},{key:"StartCountdown",value:function StartCountdown(){this.state==Minigame.State.PreGame&&this.minigameCountdown.Start()}},{key:"StartGame",value:function StartGame(){this.state==Minigame.State.PreGame&&(this.SetState(Minigame.State.Game),w.Instance.FadeVolume("music_layer","music_main_loop",this,1))}},{key:"EndGame",value:function EndGame(){this.state==Minigame.State.Game&&(this.SetState(Minigame.State.PostGame),w.Instance.Play("sfx_minigame","game_end"),w.Instance.FadeVolume("music_layer","music_main_loop",this,.5))}},{key:"Replay",value:function Replay(e){s.Instance.StartLoadingScene(y,e,this.sys.settings.data)}},{key:"OnWake",value:function OnWake(){this.state==Minigame.State.Game&&w.Instance.FadeVolume("music_layer","music_main_loop",this,1)}},{key:"Destroy",value:function Destroy(){w.Instance.DestroyLayer("sfx_minigame"),this.spineElPos&&(this.spineElPos.destroy(),this.spineElPos=null),this.minigameCamera&&(this.minigameCamera.destroy(),this.minigameCamera=null),Minigame_get(Minigame_getPrototypeOf(Minigame.prototype),"Destroy",this).call(this)}}]),Minigame}();function MinigameGhost_typeof(e){return(MinigameGhost_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MinigameGhost_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MinigameGhost_get(e,t,n){return(MinigameGhost_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function MinigameGhost_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MinigameGhost_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function MinigameGhost_setPrototypeOf(e,t){return(MinigameGhost_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MinigameGhost_createSuper(i){return function(){var e,t=MinigameGhost_getPrototypeOf(i);if(function MinigameGhost_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MinigameGhost_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MinigameGhost_possibleConstructorReturn(e,t){return!t||"object"!==MinigameGhost_typeof(t)&&"function"!=typeof t?function MinigameGhost_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function MinigameGhost_getPrototypeOf(e){return(MinigameGhost_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function Minigame_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(V,"State",Object.freeze({Tutorial:0,PreGame:1,Game:2,PostGame:3,Results:4}));var X=function(){!function MinigameGhost_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MinigameGhost_setPrototypeOf(e,t)}(MinigameGhost,Phaser.GameObjects.Container);var i=MinigameGhost_createSuper(MinigameGhost);function MinigameGhost(e,t){var n;return function MinigameGhost_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MinigameGhost),(n=i.call(this,e,t)).characterData=t.data.characterData,n.animation=n.CreateAnimation(),n.animation&&n.add(n.animation),n.Init(t),n}return function MinigameGhost_createClass(e,t,n){return t&&MinigameGhost_defineProperties(e.prototype,t),n&&MinigameGhost_defineProperties(e,n),e}(MinigameGhost,[{key:"CreateAnimation",value:function CreateAnimation(){}},{key:"Init",value:function Init(e){this.targetScore=e.score}},{key:"update",value:function update(e,t){MinigameGhost_get(MinigameGhost_getPrototypeOf(MinigameGhost.prototype),"update",this).call(this,e,t)}},{key:"OnMinigameStart",value:function OnMinigameStart(){}},{key:"OnMinigameWon",value:function OnMinigameWon(){}},{key:"OnMinigameLost",value:function OnMinigameLost(){}},{key:"OnGameEnterPostGameState",value:function OnGameEnterPostGameState(e){e?this.OnMinigameWon():this.OnMinigameLost()}}]),MinigameGhost}();function PlayerAnimation_typeof(e){return(PlayerAnimation_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PlayerAnimation_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function PlayerAnimation_get(e,t,n){return(PlayerAnimation_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function PlayerAnimation_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PlayerAnimation_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function PlayerAnimation_setPrototypeOf(e,t){return(PlayerAnimation_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function PlayerAnimation_createSuper(i){return function(){var e,t=PlayerAnimation_getPrototypeOf(i);if(function PlayerAnimation_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=PlayerAnimation_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function PlayerAnimation_possibleConstructorReturn(e,t){return!t||"object"!==PlayerAnimation_typeof(t)&&"function"!=typeof t?function PlayerAnimation_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function PlayerAnimation_getPrototypeOf(e){return(PlayerAnimation_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=function(){!function PlayerAnimation_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PlayerAnimation_setPrototypeOf(e,t)}(PlayerAnimation,Phaser.GameObjects.Container);var i=PlayerAnimation_createSuper(PlayerAnimation);function PlayerAnimation(e,t){var n;return function PlayerAnimation_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PlayerAnimation),(n=i.call(this,e)).player=t,n.spine=n.CreateSpine(),n.spine.setScale(n.scene.gameScale),n.add(n.spine),n.state=null,n.timeInState=0,n.flipX=!1,n}return function PlayerAnimation_createClass(e,t,n){return t&&PlayerAnimation_defineProperties(e.prototype,t),n&&PlayerAnimation_defineProperties(e,n),e}(PlayerAnimation,[{key:"update",value:function update(e,t){this.timeInState+=.001*t}},{key:"CreateSpine",value:function CreateSpine(){return this.scene.add.spine(0,0,"minigame_"+this.player.characterData.id,"idle",!0)}},{key:"SetState",value:function SetState(e){if(this.state!=e){var t=void(this.timeInState=0)!==(this.state=e).trackIndex?e.trackIndex:0;this.PlayAnimation(t,this.state.animationName,this.state.loop)}}},{key:"PlayAnimation",value:function PlayAnimation(e,t,n){this.spine.setAnimation(e,t,n)}},{key:"SetFlipX",value:function SetFlipX(e){switch(this.flipX=e,this.scene.game.renderer.type){case Phaser.CANVAS:this.spine.skeleton.flipX=e;break;case Phaser.WEBGL:this.setScale(1,e?-1:1)}}},{key:"MixAnimations",value:function MixAnimations(e){for(var t=this.spine.skeletonData.animations,n=0;n<t.length-1;n++)for(var i=n+1;i<t.length;i++)this.spine.setMix(t[n].name,t[i].name,e),this.spine.setMix(t[i].name,t[n].name,e)}},{key:"destroy",value:function destroy(){PlayerAnimation_get(PlayerAnimation_getPrototypeOf(PlayerAnimation.prototype),"destroy",this).call(this)}}]),PlayerAnimation}();function MinigamePlayerAnimation_typeof(e){return(MinigamePlayerAnimation_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MinigamePlayerAnimation_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MinigamePlayerAnimation_setPrototypeOf(e,t){return(MinigamePlayerAnimation_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MinigamePlayerAnimation_createSuper(i){return function(){var e,t=MinigamePlayerAnimation_getPrototypeOf(i);if(function MinigamePlayerAnimation_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MinigamePlayerAnimation_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MinigamePlayerAnimation_possibleConstructorReturn(e,t){return!t||"object"!==MinigamePlayerAnimation_typeof(t)&&"function"!=typeof t?function MinigamePlayerAnimation_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function MinigamePlayerAnimation_getPrototypeOf(e){return(MinigamePlayerAnimation_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=function(){!function MinigamePlayerAnimation_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MinigamePlayerAnimation_setPrototypeOf(e,t)}(MinigamePlayerAnimation,Y);var n=MinigamePlayerAnimation_createSuper(MinigamePlayerAnimation);function MinigamePlayerAnimation(e,t){return function MinigamePlayerAnimation_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MinigamePlayerAnimation),n.call(this,e,t)}return function MinigamePlayerAnimation_createClass(e,t,n){return t&&MinigamePlayerAnimation_defineProperties(e.prototype,t),n&&MinigamePlayerAnimation_defineProperties(e,n),e}(MinigamePlayerAnimation,[{key:"CreateSpine",value:function CreateSpine(){return this.scene.add.spine(0,0,"minigame_"+this.player.characterData.id,"idle",!0)}}]),MinigamePlayerAnimation}();function WeightliftingPlayerAnimation_typeof(e){return(WeightliftingPlayerAnimation_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WeightliftingPlayerAnimation_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function WeightliftingPlayerAnimation_setPrototypeOf(e,t){return(WeightliftingPlayerAnimation_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function WeightliftingPlayerAnimation_createSuper(i){return function(){var e,t=WeightliftingPlayerAnimation_getPrototypeOf(i);if(function WeightliftingPlayerAnimation_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=WeightliftingPlayerAnimation_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function WeightliftingPlayerAnimation_possibleConstructorReturn(e,t){return!t||"object"!==WeightliftingPlayerAnimation_typeof(t)&&"function"!=typeof t?WeightliftingPlayerAnimation_assertThisInitialized(e):t}(this,e)}}function WeightliftingPlayerAnimation_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WeightliftingPlayerAnimation_getPrototypeOf(e){return(WeightliftingPlayerAnimation_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Q=function(){!function WeightliftingPlayerAnimation_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WeightliftingPlayerAnimation_setPrototypeOf(e,t)}(WeightliftingPlayerAnimation,K);var i=WeightliftingPlayerAnimation_createSuper(WeightliftingPlayerAnimation);function WeightliftingPlayerAnimation(e,t){var n;return function WeightliftingPlayerAnimation_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WeightliftingPlayerAnimation),(n=i.call(this,e,t)).spine&&(n.MixAnimations(.2),n.spine.on("spine.event",n.OnSpineEvent,WeightliftingPlayerAnimation_assertThisInitialized(n))),n}return function WeightliftingPlayerAnimation_createClass(e,t,n){return t&&WeightliftingPlayerAnimation_defineProperties(e.prototype,t),n&&WeightliftingPlayerAnimation_defineProperties(e,n),e}(WeightliftingPlayerAnimation,[{key:"CreateSpine",value:function CreateSpine(){var e=this.player.characterData.id;return this.scene.add.spine(0,0,e,"weightlift_idle",!0)}},{key:"OnSpineEvent",value:function OnSpineEvent(e,t){switch(t.data.name){case"play_sound":w.Instance.Play("sfx_minigame",t.stringValue)}}}]),WeightliftingPlayerAnimation}();function WeightliftingGhost_typeof(e){return(WeightliftingGhost_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WeightliftingGhost_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function WeightliftingGhost_get(e,t,n){return(WeightliftingGhost_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function WeightliftingGhost_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WeightliftingGhost_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function WeightliftingGhost_setPrototypeOf(e,t){return(WeightliftingGhost_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function WeightliftingGhost_createSuper(i){return function(){var e,t=WeightliftingGhost_getPrototypeOf(i);if(function WeightliftingGhost_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=WeightliftingGhost_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function WeightliftingGhost_possibleConstructorReturn(e,t){return!t||"object"!==WeightliftingGhost_typeof(t)&&"function"!=typeof t?function WeightliftingGhost_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function WeightliftingGhost_getPrototypeOf(e){return(WeightliftingGhost_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function WeightliftingPlayerAnimation_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(Q,"State",Object.freeze({Idle:{animationName:"weightlift_idle",loop:!0},IdleToPull:{animationName:"weightlift_idle_to_pull",loop:!1},Pull:{animationName:"weightlift_pull",loop:!0},ChestSuccess:{animationName:"weightlift_chest_success",loop:!1},ChestFail:{animationName:"weightlift_chest_fail",loop:!1},ChestIdle:{animationName:"weightlift_chest_idle",loop:!0},ChestPull:{animationName:"weightlift_chest_pull",loop:!0},HeadSuccess:{animationName:"weightlift_head_success",loop:!1},HeadFail:{animationName:"weightlift_head_fail",loop:!1},HeadDrop:{animationName:"weightlift_head_drop",loop:!1}}));var q=function(){!function WeightliftingGhost_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WeightliftingGhost_setPrototypeOf(e,t)}(WeightliftingGhost,X);var i=WeightliftingGhost_createSuper(WeightliftingGhost);function WeightliftingGhost(e,t){var n;return function WeightliftingGhost_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WeightliftingGhost),(n=i.call(this,e,t)).setPosition(t.x||.5*n.scene.scale.width,t.y||.5*n.scene.scale.height),n.animation.setScale(.8),n.animation.SetState(Q.State.Idle),n}return function WeightliftingGhost_createClass(e,t,n){return t&&WeightliftingGhost_defineProperties(e.prototype,t),n&&WeightliftingGhost_defineProperties(e,n),e}(WeightliftingGhost,[{key:"CreateAnimation",value:function CreateAnimation(){return this.shadow=this.scene.add.ellipse(0,0,64*this.scene.gameScale,16*this.scene.gameScale,0,.5),this.shadow.setOrigin(.5),this.add(this.shadow),new Q(this.scene,this)}},{key:"Init",value:function Init(e){WeightliftingGhost_get(WeightliftingGhost_getPrototypeOf(WeightliftingGhost.prototype),"Init",this).call(this,e);var t=re.MaxPoints,n=this.targetScore/t;this.totalReps=e.totalReps,this.totalSuccess=Math.floor(n*this.totalReps),this.successCount=0,this.currentIndex=0}},{key:"update",value:function update(e,t){WeightliftingGhost_get(WeightliftingGhost_getPrototypeOf(WeightliftingGhost.prototype),"update",this).call(this,e,t)}},{key:"OnMinigameStart",value:function OnMinigameStart(){WeightliftingGhost_get(WeightliftingGhost_getPrototypeOf(WeightliftingGhost.prototype),"OnMinigameStart",this).call(this)}},{key:"OnMinigameWon",value:function OnMinigameWon(){WeightliftingGhost_get(WeightliftingGhost_getPrototypeOf(WeightliftingGhost.prototype),"OnMinigameWon",this).call(this)}},{key:"OnMinigameLost",value:function OnMinigameLost(){WeightliftingGhost_get(WeightliftingGhost_getPrototypeOf(WeightliftingGhost.prototype),"OnMinigameLost",this).call(this)}},{key:"OnPlayerIdle",value:function OnPlayerIdle(e,t){var n=Q.State.Idle;t>=this.currentIndex&&(n=t%2==0?this.animation.state==Q.State.HeadSuccess?Q.State.HeadDrop:Q.State.Idle:Q.State.ChestIdle),this.animation.SetState(n)}},{key:"OnPlayerIdleToPull",value:function OnPlayerIdleToPull(){this.animation.SetState(Q.State.IdleToPull)}},{key:"OnPlayerPull",value:function OnPlayerPull(e,t){if(!(t<this.currentIndex)){var n=t%2==0?Q.State.Pull:Q.State.ChestPull;this.animation.SetState(n)}}},{key:"PostRep",value:function PostRep(e,t){if(!(t<this.currentIndex)){var n=Math.ceil(.5*(this.totalReps-t)),i=this.totalSuccess-this.successCount,r=i-n;if(0<=r)this.DoSuccess(t);else{var o=Phaser.Math.RND.realInRange(0,1);0<i&&-1==r&&.5<o?this.DoSuccess(t):this.DoFail(t)}}}},{key:"DoSuccess",value:function DoSuccess(e){var t=e%2==0?Q.State.ChestSuccess:Q.State.HeadSuccess;this.animation.SetState(t),this.successCount++,this.currentIndex++}},{key:"DoFail",value:function DoFail(e){var t=e%2==0?Q.State.ChestFail:Q.State.HeadFail;this.animation.SetState(t),this.currentIndex=2*(Math.floor(.5*this.currentIndex)+1)}}]),WeightliftingGhost}();function Player_typeof(e){return(Player_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Player_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Player_setPrototypeOf(e,t){return(Player_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function Player_createSuper(i){return function(){var e,t=Player_getPrototypeOf(i);if(function Player_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=Player_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function Player_possibleConstructorReturn(e,t){return!t||"object"!==Player_typeof(t)&&"function"!=typeof t?function Player_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function Player_getPrototypeOf(e){return(Player_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Z=function(){!function Player_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Player_setPrototypeOf(e,t)}(Player,Phaser.GameObjects.Container);var i=Player_createSuper(Player);function Player(e,t){var n;return function Player_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Player),(n=i.call(this,e)).characterData=t.data.characterData,n.animation=n.CreateAnimation(),n.animation&&n.add(n.animation),n}return function Player_createClass(e,t,n){return t&&Player_defineProperties(e.prototype,t),n&&Player_defineProperties(e,n),e}(Player,[{key:"CreateAnimation",value:function CreateAnimation(){}},{key:"update",value:function update(e,t){this.UpdateControl(e,t),this.animation&&this.animation.update(e,t)}},{key:"UpdateControl",value:function UpdateControl(){}}]),Player}();function MinigamePlayerInput_typeof(e){return(MinigamePlayerInput_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MinigamePlayerInput_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MinigamePlayerInput_setPrototypeOf(e,t){return(MinigamePlayerInput_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MinigamePlayerInput_createSuper(i){return function(){var e,t=MinigamePlayerInput_getPrototypeOf(i);if(function MinigamePlayerInput_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MinigamePlayerInput_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MinigamePlayerInput_possibleConstructorReturn(e,t){return!t||"object"!==MinigamePlayerInput_typeof(t)&&"function"!=typeof t?function MinigamePlayerInput_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function MinigamePlayerInput_getPrototypeOf(e){return(MinigamePlayerInput_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $=function(){!function MinigamePlayerInput_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MinigamePlayerInput_setPrototypeOf(e,t)}(MinigamePlayerInput,Phaser.Events.EventEmitter);var i=MinigamePlayerInput_createSuper(MinigamePlayerInput);function MinigamePlayerInput(e,t){var n;return function MinigamePlayerInput_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MinigamePlayerInput),(n=i.call(this)).scene=e,n.player=t,n.keyboardData=MinigamePlayerInput.InputData.keyboard.qwerty,n.leftKey=n.scene.input.keyboard.addKey(n.keyboardData.leftKey),n.rightKey=n.scene.input.keyboard.addKey(n.keyboardData.rightKey),n.upKey=n.scene.input.keyboard.addKey(n.keyboardData.upKey),n.downKey=n.scene.input.keyboard.addKey(n.keyboardData.downKey),n.actionKey=n.scene.input.keyboard.addKey(n.keyboardData.actionKey),n.gamepadIndex=MinigamePlayerInput.InputData.gamepad.index,n.moveVector=new Phaser.Math.Vector2(0,0),n}return function MinigamePlayerInput_createClass(e,t,n){return t&&MinigamePlayerInput_defineProperties(e.prototype,t),n&&MinigamePlayerInput_defineProperties(e,n),e}(MinigamePlayerInput,[{key:"update",value:function update(){if(this.moveVector.set(0,0),this.scene.input.gamepad.gamepads.length>this.gamepadIndex){var e=this.scene.input.gamepad.getPad(this.gamepadIndex);if(e){var t=e.axes[0].getValue(),n=e.axes[1].getValue();this.moveVector.x+=t,this.moveVector.y+=n}}this.upKey.isDown&&--this.moveVector.y,this.downKey.isDown&&(this.moveVector.y+=1),this.leftKey.isDown&&--this.moveVector.x,this.rightKey.isDown&&(this.moveVector.x+=1),this.moveVector.normalize()}},{key:"OnMinigameComplete",value:function OnMinigameComplete(){}},{key:"OnEnterPreGameState",value:function OnEnterPreGameState(){}}]),MinigamePlayerInput}();function MinigamePlayer_typeof(e){return(MinigamePlayer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MinigamePlayer_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MinigamePlayer_get(e,t,n){return(MinigamePlayer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function MinigamePlayer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MinigamePlayer_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function MinigamePlayer_setPrototypeOf(e,t){return(MinigamePlayer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MinigamePlayer_createSuper(i){return function(){var e,t=MinigamePlayer_getPrototypeOf(i);if(function MinigamePlayer_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MinigamePlayer_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MinigamePlayer_possibleConstructorReturn(e,t){return!t||"object"!==MinigamePlayer_typeof(t)&&"function"!=typeof t?MinigamePlayer_assertThisInitialized(e):t}(this,e)}}function MinigamePlayer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MinigamePlayer_getPrototypeOf(e){return(MinigamePlayer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}$.InputData=Object.freeze({keyboard:{qwerty:{leftKey:Phaser.Input.Keyboard.KeyCodes.LEFT,rightKey:Phaser.Input.Keyboard.KeyCodes.RIGHT,upKey:Phaser.Input.Keyboard.KeyCodes.UP,downKey:Phaser.Input.Keyboard.KeyCodes.DOWN,actionKey:Phaser.Input.Keyboard.KeyCodes.SPACE}},gamepad:{index:0}});var ee=function(){!function MinigamePlayer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MinigamePlayer_setPrototypeOf(e,t)}(MinigamePlayer,Z);var i=MinigamePlayer_createSuper(MinigamePlayer);function MinigamePlayer(e,t){var n;return function MinigamePlayer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MinigamePlayer),(n=i.call(this,e,t)).playerInput=n.CreateInput(),n.playerInput.actionKey.on("down",n.OnActionKeyPressed,MinigamePlayer_assertThisInitialized(n)),n.playerInput.on("pointerdown",n.OnPointerDown,MinigamePlayer_assertThisInitialized(n)),n}return function MinigamePlayer_createClass(e,t,n){return t&&MinigamePlayer_defineProperties(e.prototype,t),n&&MinigamePlayer_defineProperties(e,n),e}(MinigamePlayer,[{key:"CreateAnimation",value:function CreateAnimation(){}},{key:"CreateInput",value:function CreateInput(){return new $(this.scene,this)}},{key:"update",value:function update(e,t){MinigamePlayer_get(MinigamePlayer_getPrototypeOf(MinigamePlayer.prototype),"update",this).call(this,e,t)}},{key:"UpdateControl",value:function UpdateControl(e,t){MinigamePlayer_get(MinigamePlayer_getPrototypeOf(MinigamePlayer.prototype),"UpdateControl",this).call(this,e,t),this.playerInput.update(e,t)}},{key:"OnEnterPreGameState",value:function OnEnterPreGameState(){this.playerInput&&this.playerInput.OnEnterPreGameState()}},{key:"OnGameEnterPostGameState",value:function OnGameEnterPostGameState(e){e?this.OnMinigameWon():this.OnMinigameLost()}},{key:"OnMinigameComplete",value:function OnMinigameComplete(){this.playerInput&&this.playerInput.OnMinigameComplete()}},{key:"OnMinigameWon",value:function OnMinigameWon(){}},{key:"OnMinigameLost",value:function OnMinigameLost(){}},{key:"OnActionKeyPressed",value:function OnActionKeyPressed(){}},{key:"OnPointerDown",value:function OnPointerDown(){}}]),MinigamePlayer}();function WeightliftingPlayerInput_typeof(e){return(WeightliftingPlayerInput_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WeightliftingPlayerInput_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function WeightliftingPlayerInput_get(e,t,n){return(WeightliftingPlayerInput_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function WeightliftingPlayerInput_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WeightliftingPlayerInput_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function WeightliftingPlayerInput_setPrototypeOf(e,t){return(WeightliftingPlayerInput_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function WeightliftingPlayerInput_createSuper(i){return function(){var e,t=WeightliftingPlayerInput_getPrototypeOf(i);if(function WeightliftingPlayerInput_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=WeightliftingPlayerInput_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function WeightliftingPlayerInput_possibleConstructorReturn(e,t){return!t||"object"!==WeightliftingPlayerInput_typeof(t)&&"function"!=typeof t?WeightliftingPlayerInput_assertThisInitialized(e):t}(this,e)}}function WeightliftingPlayerInput_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WeightliftingPlayerInput_getPrototypeOf(e){return(WeightliftingPlayerInput_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var te=function(){!function WeightliftingPlayerInput_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WeightliftingPlayerInput_setPrototypeOf(e,t)}(WeightliftingPlayerInput,$);var i=WeightliftingPlayerInput_createSuper(WeightliftingPlayerInput);function WeightliftingPlayerInput(e,t){var n;return function WeightliftingPlayerInput_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WeightliftingPlayerInput),(n=i.call(this,e,t)).scene.deviceManager.desktop?n.actionKey.on("down",n.OnButtonPressed,WeightliftingPlayerInput_assertThisInitialized(n)):n.scene.input.on("pointerdown",n.OnButtonPressed,WeightliftingPlayerInput_assertThisInitialized(n)),n}return function WeightliftingPlayerInput_createClass(e,t,n){return t&&WeightliftingPlayerInput_defineProperties(e.prototype,t),n&&WeightliftingPlayerInput_defineProperties(e,n),e}(WeightliftingPlayerInput,[{key:"update",value:function update(e,t){WeightliftingPlayerInput_get(WeightliftingPlayerInput_getPrototypeOf(WeightliftingPlayerInput.prototype),"update",this).call(this,e,t)}},{key:"OnButtonPressed",value:function OnButtonPressed(){this.player.AddPower()}},{key:"OnEnterPreGameState",value:function OnEnterPreGameState(){WeightliftingPlayerInput_get(WeightliftingPlayerInput_getPrototypeOf(WeightliftingPlayerInput.prototype),"OnEnterPreGameState",this).call(this),this.buttonContainer&&this.liftButton.Enable()}},{key:"OnMinigameComplete",value:function OnMinigameComplete(){WeightliftingPlayerInput_get(WeightliftingPlayerInput_getPrototypeOf(WeightliftingPlayerInput.prototype),"OnMinigameComplete",this).call(this),this.buttonContainer&&(this.buttonContainer.visible=!1,this.liftButton.Disable())}},{key:"destroy",value:function destroy(){this.scene.input.off("pointerdown",this.OnButtonPressed,this),WeightliftingPlayerInput_get(WeightliftingPlayerInput_getPrototypeOf(WeightliftingPlayerInput.prototype),"destroy",this).call(this)}}]),WeightliftingPlayerInput}();function WeightliftingPlayer_typeof(e){return(WeightliftingPlayer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WeightliftingPlayer_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function WeightliftingPlayer_get(e,t,n){return(WeightliftingPlayer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function WeightliftingPlayer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WeightliftingPlayer_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function WeightliftingPlayer_setPrototypeOf(e,t){return(WeightliftingPlayer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function WeightliftingPlayer_createSuper(i){return function(){var e,t=WeightliftingPlayer_getPrototypeOf(i);if(function WeightliftingPlayer_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=WeightliftingPlayer_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function WeightliftingPlayer_possibleConstructorReturn(e,t){return!t||"object"!==WeightliftingPlayer_typeof(t)&&"function"!=typeof t?function WeightliftingPlayer_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function WeightliftingPlayer_getPrototypeOf(e){return(WeightliftingPlayer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=function(){!function WeightliftingPlayer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WeightliftingPlayer_setPrototypeOf(e,t)}(WeightliftingPlayer,ee);var i=WeightliftingPlayer_createSuper(WeightliftingPlayer);function WeightliftingPlayer(e,t){var n;return function WeightliftingPlayer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WeightliftingPlayer),(n=i.call(this,e,t)).setPosition(t.x||.5*n.scene.scale.width,t.y||.5*n.scene.scale.height),n.starParticle=t.starParticle,n.reps=[{size:.65,y:.5,duration:6},{size:.55,y:.65,duration:6},{size:.5,y:.5,duration:5},{size:.4,y:.7,duration:4},{size:.35,y:.5,duration:4},{size:.25,y:.75,duration:3}],n.repIndex=0,n.currentRep=n.reps[n.repIndex],n.power=0,n.powerTarget=0,n.powerPerInput=.15,n.powerDecay=.5,n.score=0,n.totalScore=0,n.pointsPerPhase=100,n.pointsInterval=.25,n.pointsIntervalTimer=0,n.lastIntervalTimer=0,n.lastPower=0,n.timer=0,n.idleDuration=3,n.postDuration=4.25,n.complete=0,n.animation.SetState(Q.State.Idle),n.state=WeightliftingPlayer.State.Idle,n}return function WeightliftingPlayer_createClass(e,t,n){return t&&WeightliftingPlayer_defineProperties(e.prototype,t),n&&WeightliftingPlayer_defineProperties(e,n),e}(WeightliftingPlayer,[{key:"CreateInput",value:function CreateInput(){return new te(this.scene,this)}},{key:"CreateAnimation",value:function CreateAnimation(){return this.shadow=this.scene.add.ellipse(0,0,80*this.scene.gameScale,20*this.scene.gameScale,0,.5),this.shadow.setOrigin(.5),this.add(this.shadow),new Q(this.scene,this)}},{key:"update",value:function update(e,t){WeightliftingPlayer_get(WeightliftingPlayer_getPrototypeOf(WeightliftingPlayer.prototype),"update",this).call(this,e,t);var n=.001*t;if(this.scene.state==V.State.Game){switch(this.state){case WeightliftingPlayer.State.Idle:this.UpdateIdleState(e,t);break;case WeightliftingPlayer.State.Lift:this.UpdateLiftState(e,t);break;case WeightliftingPlayer.State.PostLift:case WeightliftingPlayer.State.Fail:this.UpdatePostLiftState(e,t)}this.power=Phaser.Math.Linear(this.power,this.powerTarget,n),this.scene.minigameUI.SetPower(this.power),this.powerTarget=Math.max(this.powerTarget-this.powerDecay*n,0)}}},{key:"UpdateIdleState",value:function UpdateIdleState(e,t){var n=.001*t;this.timer-=n,this.timer<=0?this.SetState(WeightliftingPlayer.State.Lift):this.repIndex%2==0&&this.timer<=1&&1<this.timer+n&&(this.animation.SetState(Q.State.IdleToPull),this.emit("idleToPull",this,this.repIndex))}},{key:"UpdateLiftState",value:function UpdateLiftState(e,t){var n=.001*t;if(this.pointsIntervalTimer-=n,this.pointsIntervalTimer<=0){var i=this.pointsIntervalTimer-this.lastIntervalTimer,r=(0-this.lastIntervalTimer)/i,o=Phaser.Math.Linear(this.lastPower,this.power,r);this.GivePoints(this.currentRep,o),this.pointsIntervalTimer=(this.pointsIntervalTimer%this.pointsInterval+this.pointsInterval)%this.pointsInterval}this.lastIntervalTimer=this.pointsIntervalTimer,this.timer-=n;var a=1-Phaser.Math.Clamp(this.timer/this.currentRep.duration,0,1);this.scene.minigameUI.SetFill(a);var s=Phaser.Math.Linear(1,this.currentRep.size,a),l=Phaser.Math.Linear(.5,this.currentRep.y,a),c=l-.5*s,u=l+.5*s;this.power<c||this.power>u?this.SetState(WeightliftingPlayer.State.Fail):this.timer<=0&&this.SetState(WeightliftingPlayer.State.PostLift)}},{key:"GivePoints",value:function GivePoints(e,t){var n=e.y,i=e.duration,r=(1-2*Math.abs(t-n))*(this.pointsPerPhase*(this.pointsInterval/i));this.score+=r,this.totalScore+=r}},{key:"UpdatePostLiftState",value:function UpdatePostLiftState(e,t){var n=.001*t;this.timer-=n,this.timer<=0&&this.SetState(WeightliftingPlayer.State.Idle)}},{key:"SetState",value:function SetState(e){if(this.state!=e)switch(this.state=e){case WeightliftingPlayer.State.Idle:this.OnEnterIdleState();break;case WeightliftingPlayer.State.Lift:this.OnEnterLiftState();break;case WeightliftingPlayer.State.PostLift:this.OnEnterPostLiftState();break;case WeightliftingPlayer.State.Fail:this.OnEnterFailState()}}},{key:"OnEnterIdleState",value:function OnEnterIdleState(){this.timer=this.idleDuration,this.score=0;var e=Q.State.Idle;e=this.repIndex%2==0?this.animation.state==Q.State.HeadSuccess?Q.State.HeadDrop:Q.State.Idle:Q.State.ChestIdle,this.animation.SetState(e),this.emit("idle",this,this.repIndex),this.scene.minigameUI.TweenTarget(this.currentRep.size,this.currentRep.y),this.scene.minigameUI.TweenFill(1,.5,16776960),this.scene.minigameUI.ShowLine(this.currentRep.y),this.scene.minigameUI.DoPulse()}},{key:"OnEnterLiftState",value:function OnEnterLiftState(){this.timer=this.currentRep.duration,this.score=0;var e=this.repIndex%2==0?Q.State.Pull:Q.State.ChestPull;this.animation.SetState(e),this.emit("pull",this,this.repIndex),this.pointsIntervalTimer=this.pointsInterval,this.lastIntervalTimer=this.pointsIntervalTimer,this.lastPower=this.power}},{key:"OnEnterPostLiftState",value:function OnEnterPostLiftState(){this.timer=this.postDuration;var e=this.repIndex%2==0?Q.State.ChestSuccess:Q.State.HeadSuccess;this.animation.SetState(e),this.emit("success",this,this.repIndex),this.score>=.95*this.pointsPerPhase&&this.emit("perfect",this),w.Instance.Play("sfx_minigame",this.repIndex%2==0?"weight_lift":"weight_lift_overhead"),this.starParticle.explode(5),this.repIndex++,this.complete++,this.repIndex<this.reps.length?this.currentRep=this.reps[this.repIndex]:this.scene.EndGame(),this.powerTarget=0,this.scene.minigameUI.TweenTarget(1,.5),this.scene.minigameUI.TweenFill(1,.5,16776960),this.scene.minigameUI.HideLine()}},{key:"OnEnterFailState",value:function OnEnterFailState(){this.timer=this.postDuration;var e=this.repIndex%2==0?Q.State.ChestFail:Q.State.HeadFail;this.animation.SetState(e),this.emit("fail",this,this.repIndex);var t=this.currentRep.y;this.repIndex=2*(Math.floor(.5*this.repIndex)+1),this.repIndex<this.reps.length?this.currentRep=this.reps[this.repIndex]:this.scene.EndGame(),this.powerTarget=0,this.scene.minigameUI.TweenTarget(0,t),this.scene.minigameUI.TweenFill(1,.5,16711680),this.scene.minigameUI.HideLine()}},{key:"Start",value:function Start(){this.currentRep=this.reps[this.repIndex],this.scene.minigameUI.DoPulse(),this.timer=this.idleDuration}},{key:"AddPower",value:function AddPower(){this.scene.state==V.State.Game&&(this.state>WeightliftingPlayer.State.Lift||(this.powerTarget=Math.min(this.powerTarget+this.powerPerInput,1)))}},{key:"destroy",value:function destroy(){this.starParticle=null,WeightliftingPlayer_get(WeightliftingPlayer_getPrototypeOf(WeightliftingPlayer.prototype),"destroy",this).call(this)}}]),WeightliftingPlayer}();function WeightliftingUI_typeof(e){return(WeightliftingUI_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WeightliftingUI_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function WeightliftingUI_get(e,t,n){return(WeightliftingUI_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function WeightliftingUI_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WeightliftingUI_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function WeightliftingUI_setPrototypeOf(e,t){return(WeightliftingUI_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function WeightliftingUI_createSuper(i){return function(){var e,t=WeightliftingUI_getPrototypeOf(i);if(function WeightliftingUI_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=WeightliftingUI_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function WeightliftingUI_possibleConstructorReturn(e,t){return!t||"object"!==WeightliftingUI_typeof(t)&&"function"!=typeof t?function WeightliftingUI_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function WeightliftingUI_getPrototypeOf(e){return(WeightliftingUI_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function WeightliftingPlayer_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(ne,"State",Object.freeze({Idle:0,Lift:1,PostLift:2,Fail:3,EndGame:4}));var ie=function(){!function WeightliftingUI_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WeightliftingUI_setPrototypeOf(e,t)}(WeightliftingUI,N);var S=WeightliftingUI_createSuper(WeightliftingUI);function WeightliftingUI(e){var t;!function WeightliftingUI_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WeightliftingUI);var n=.2*(t=S.call(this,e)).scene.scale.width,i=0*t.scene.scale.height,r=80*t.scene.gameScale,o=310*t.scene.gameScale;t.meterContainer=t.scene.add.container(n,i),t.add(t.meterContainer);var a=t.scene.add.rectangle(0,0,r,o,481663);a.setOrigin(.5),t.meterContainer.add(a),t.meterFill=t.scene.add.rectangle(0,0,r,o,16776960),t.meterFill.setOrigin(.5),t.meterContainer.add(t.meterFill),t.meterTarget=t.scene.add.rectangle(0,0,r,o,65280),t.meterTarget.setOrigin(.5),t.meterContainer.add(t.meterTarget),t.meterLine=t.scene.add.sprite(0,0,"game_atlas","power_bar_dotted_line.png"),t.meterLine.setOrigin(.5),t.meterContainer.add(t.meterLine);var s=t.scene.add.sprite(0,0,"game_atlas","weightlifting_power_gauge.png");s.setOrigin(.5),t.meterContainer.add(s),t.meterMarker=t.scene.add.container(0,.5*o),t.meterContainer.add(t.meterMarker);var l=t.scene.add.sprite(0,0,"game_atlas","weighlifting_marker.png");l.setOrigin(.65,.5),t.meterMarker.add(l);var c=(t.scene.sys.settings.data.gameData||{}).player.characterData.id,u=t.scene.add.sprite(-72*t.scene.gameScale,0,"characters_atlas","tiny_circle_"+c+".png");u.setOrigin(.5),t.meterMarker.add(u);var p=t.scene.add.sprite(0,.35*-t.scene.scale.height,"weightlifting_atlas","weightlifting_counter_panel.png");p.setOrigin(.5),t.add(p),t.checks=[];for(var f=p.x-35*t.scene.gameScale,h=p.y+30*t.scene.gameScale,m=65*t.scene.gameScale,y=-65*t.scene.gameScale,g=0;g<6;g++){var d=f+m*Math.floor(g/2),_=h+g%2*y,P=t.scene.add.sprite(d,_,"weightlifting_atlas","weightlifting_tick.png");P.setOrigin(.5),P.setVisible(!1),t.add(P),t.checks[g]=P}return t}return function WeightliftingUI_createClass(e,t,n){return t&&WeightliftingUI_defineProperties(e.prototype,t),n&&WeightliftingUI_defineProperties(e,n),e}(WeightliftingUI,[{key:"SetTarget",value:function SetTarget(e,t){this.meterTarget.setScale(1,e);var n=this.meterFill.height*-(t-.5);this.meterTarget.setPosition(this.meterTarget.x,n),this.meterLine.setPosition(this.meterLine.x,n)}},{key:"SetPower",value:function SetPower(e){var t=this.meterFill.height*-(e-.5);this.meterMarker.setPosition(this.meterMarker.x,t)}},{key:"SetFill",value:function SetFill(e){var t=Phaser.Math.Linear(0,this.meterTarget.y,e);this.meterFill.setPosition(this.meterFill.x,t);var n=Phaser.Math.Linear(1,this.meterTarget.scaleY,e);this.meterFill.setScale(this.meterFill.scaleX,n);var i=W.LerpColor(16776960,16711680,e);this.meterFill.setFillStyle(i)}},{key:"SetRep",value:function SetRep(e,t){var n=Phaser.Math.Clamp(e,0,this.checks.length-1),i=this.checks[n];i.setFrame(t?"weightlifting_tick.png":"weightlifting_cross.png"),i.setVisible(!0),i.setScale(0),this.pulseTween=this.scene.tweens.add({targets:i,scaleX:{value:1,ease:"Back.easeOut"},scaleY:{value:1,ease:"Back.easeOut"},duration:1e3})}},{key:"TweenTarget",value:function TweenTarget(e,t){var n=this.meterFill.height*-(t-.5);this.targetTween=this.scene.tweens.add({targets:this.meterTarget,y:{value:n,ease:"Quad.easeInOut"},scaleY:{value:e,ease:"Quad.easeInOut"},duration:1e3})}},{key:"TweenFill",value:function TweenFill(e,t,n){var i=this.meterFill.height*-(t-.5);this.fillTween=this.scene.tweens.add({targets:this.meterFill,y:{value:i,ease:"Quad.easeInOut"},scaleY:{value:e,ease:"Quad.easeInOut"},duration:1e3,onUpdate:this.TweenFillUpdateCallback,onUpdateParams:[this.meterFill.fillColor,n],onUpdateScope:this})}},{key:"TweenFillUpdateCallback",value:function TweenFillUpdateCallback(e,t,n,i){var r=W.LerpColor(n,i,e.progress);this.meterFill.setFillStyle(r)}},{key:"ShowLine",value:function ShowLine(e){var t=this.meterFill.height*-(e-.5);this.meterLine.setPosition(this.meterLine.x,t),this.lineTween&&this.lineTween.remove(),this.meterLine.setAlpha(0),this.lineTween=this.scene.tweens.add({targets:this.meterLine,alpha:{value:1,ease:"Quad.easeInOut"},duration:750})}},{key:"HideLine",value:function HideLine(){this.lineTween&&this.lineTween.remove(),this.meterLine.setAlpha(1),this.lineTween=this.scene.tweens.add({targets:this.meterLine,alpha:{value:0,ease:"Quad.easeInOut"},duration:750})}},{key:"DoPulse",value:function DoPulse(){this.pulseTween=this.scene.tweens.add({targets:this.meterContainer,scaleX:{value:1.1,ease:"Quad.easeInOut"},scaleY:{value:1.1,ease:"Quad.easeInOut"},duration:125,yoyo:!0,repeat:2,repeatDelay:750})}},{key:"destroy",value:function destroy(){this.pulseTween&&(this.pulseTween.remove(),this.pulseTween=null),this.targetTween&&(this.targetTween.remove(),this.targetTween=null),this.fillTween&&(this.fillTween.remove(),this.fillTween=null),this.lineTween&&(this.lineTween.remove(),this.lineTween=null),this.checkTween&&(this.checkTween.remove(),this.checkTween=null),WeightliftingUI_get(WeightliftingUI_getPrototypeOf(WeightliftingUI.prototype),"destroy",this).call(this)}}]),WeightliftingUI}();function WeightliftingMinigame_typeof(e){return(WeightliftingMinigame_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WeightliftingMinigame_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function WeightliftingMinigame_get(e,t,n){return(WeightliftingMinigame_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function WeightliftingMinigame_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WeightliftingMinigame_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function WeightliftingMinigame_setPrototypeOf(e,t){return(WeightliftingMinigame_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function WeightliftingMinigame_createSuper(i){return function(){var e,t=WeightliftingMinigame_getPrototypeOf(i);if(function WeightliftingMinigame_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=WeightliftingMinigame_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function WeightliftingMinigame_possibleConstructorReturn(e,t){return!t||"object"!==WeightliftingMinigame_typeof(t)&&"function"!=typeof t?function WeightliftingMinigame_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function WeightliftingMinigame_getPrototypeOf(e){return(WeightliftingMinigame_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WeightliftingMinigame_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=function(){!function WeightliftingMinigame_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WeightliftingMinigame_setPrototypeOf(e,t)}(WeightliftingMinigame,V);var e=WeightliftingMinigame_createSuper(WeightliftingMinigame);function WeightliftingMinigame(){return function WeightliftingMinigame_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WeightliftingMinigame),e.call(this,"WeightliftingMinigame")}return function WeightliftingMinigame_createClass(e,t,n){return t&&WeightliftingMinigame_defineProperties(e.prototype,t),n&&WeightliftingMinigame_defineProperties(e,n),e}(WeightliftingMinigame,[{key:"create",value:function create(){WeightliftingMinigame_get(WeightliftingMinigame_getPrototypeOf(WeightliftingMinigame.prototype),"create",this).call(this),w.Instance.AddLayer("sfx_minigame",{audioKeys:["weight_drop","weight_lift","weight_lift_overhead"]})}},{key:"CreateWorld",value:function CreateWorld(){WeightliftingMinigame_get(WeightliftingMinigame_getPrototypeOf(WeightliftingMinigame.prototype),"CreateWorld",this).call(this);var e=this.add.sprite(.5*this.scale.width,.5*this.scale.height,"weightlifting_bg");this.world.add(e);var t=["beast_boy_cyborg_starfire","ben_gwen_max","clarence","fin_jake","nicole_richard","ppg","victor_valentino"];W.ShuffleArray(t);for(var n=.125*this.scale.width,i=.55*this.scale.height,r=.75*this.scale.width,o=0;o<2&&o<t.length;o++){var a=t[o],s=this.add.spine(n+r*o,i,a,"idle",!0);s.setScale(this.gameScale),this.world.add(s)}var l=new Phaser.Math.Vector2(500*this.scene.gameScale,20*this.scene.gameScale),c=new Phaser.Geom.Rectangle(.5*-l.x,.5*-l.y,l.x,l.y);this.starParticles=this.add.particles("game_atlas"),this.world.add(this.starParticles),this.starParticleEmitter=this.starParticles.createEmitter({on:!1,x:.5*this.scale.width,y:.5*this.scale.height,frame:["star_particle.png"],alpha:{start:1,end:0,ease:"Sine.easeIn"},rotate:{min:0,max:90,start:0,end:-360},speed:{min:200*this.gameScale,max:300*this.gameScale},radial:!0,angle:{min:-140,max:-40},emitZone:{source:c},gravityY:600,lifespan:750,frequency:250}),this.starParticleEmitter.reserve(10);var u=this.sys.settings.data.gameData||{};if(this.player=new ne(this,{x:.5*this.scale.width,y:.775*this.scale.height,data:u.player,starParticle:this.starParticleEmitter}),this.player.on("success",this.OnPlayerSuccess,this),this.player.on("fail",this.OnPlayerFail,this),this.player.on("perfect",this.OnPlayerPerfect,this),this.world.add(this.player),u.challenger){var p=.418*this.scale.width,f=.555*this.scale.height,h=this.add.sprite(p,f,"weightlifting_atlas","weightlifting_mat.png");h.setOrigin(.5),this.world.add(h),this.ghost=new q(this,{data:{characterData:{id:u.challenger}},score:u.list[u.listIndex].friendScore,x:p,y:f,totalReps:this.player.reps.length}),this.world.add(this.ghost),this.world.bringToTop(this.player),this.player.on("idle",this.ghost.OnPlayerIdle,this.ghost),this.player.on("idleToPull",this.ghost.OnPlayerIdleToPull,this.ghost),this.player.on("pull",this.ghost.OnPlayerPull,this.ghost)}}},{key:"CreateMinigameUI",value:function CreateMinigameUI(){var e=new ie(this),t=this.player.currentRep;return e.SetTarget(t.size,t.y),e}},{key:"OnEnterGameState",value:function OnEnterGameState(){WeightliftingMinigame_get(WeightliftingMinigame_getPrototypeOf(WeightliftingMinigame.prototype),"OnEnterGameState",this).call(this),this.player.Start()}},{key:"OnPlayerSuccess",value:function OnPlayerSuccess(e,t){this.minigameUI.SetRep(t,!0),this.ghost&&this.ghost.PostRep(e,t)}},{key:"OnPlayerFail",value:function OnPlayerFail(e,t){this.minigameUI.SetRep(t,!1),this.ghost&&this.ghost.PostRep(e,t)}},{key:"OnPlayerPerfect",value:function OnPlayerPerfect(){this.minigameUI.ShowPerfect(0,.05*-this.scale.height)}},{key:"GetScore",value:function GetScore(){var e=this.player.pointsPerPhase*this.player.reps.length,t=this.player.totalScore,n=WeightliftingMinigame.MaxPoints,i=WeightliftingMinigame.MinPoints;return Phaser.Math.Clamp(Math.floor(t/e*n),i,n)||i}},{key:"Replay",value:function Replay(){WeightliftingMinigame_get(WeightliftingMinigame_getPrototypeOf(WeightliftingMinigame.prototype),"Replay",this).call(this,WeightliftingMinigame)}}]),WeightliftingMinigame}();function MinigameTimerUI_typeof(e){return(MinigameTimerUI_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MinigameTimerUI_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MinigameTimerUI_get(e,t,n){return(MinigameTimerUI_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function MinigameTimerUI_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MinigameTimerUI_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function MinigameTimerUI_setPrototypeOf(e,t){return(MinigameTimerUI_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MinigameTimerUI_createSuper(i){return function(){var e,t=MinigameTimerUI_getPrototypeOf(i);if(function MinigameTimerUI_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MinigameTimerUI_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MinigameTimerUI_possibleConstructorReturn(e,t){return!t||"object"!==MinigameTimerUI_typeof(t)&&"function"!=typeof t?function MinigameTimerUI_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function MinigameTimerUI_getPrototypeOf(e){return(MinigameTimerUI_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}WeightliftingMinigame_defineProperty(re,"MaxPoints",200),WeightliftingMinigame_defineProperty(re,"MinPoints",10);var oe=function(){!function MinigameTimerUI_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MinigameTimerUI_setPrototypeOf(e,t)}(MinigameTimerUI,N);var a=MinigameTimerUI_createSuper(MinigameTimerUI);function MinigameTimerUI(e){var t;!function MinigameTimerUI_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MinigameTimerUI);var n=.39*-(t=a.call(this,e)).scene.scale.height,i=t.scene.add.sprite(0,n,"game_atlas","timer_panel.png");i.setOrigin(.5),t.add(i);var r={fontFamily:z.Instance.mainFont,fontSize:64*t.scene.gameScale+"px",color:"#ff0000"},o=-10*t.scene.gameScale;return t.secsText=t.scene.add.text(o,n,"00.",r),t.secsText.setOrigin(1,.5),t.add(t.secsText),t.msText=t.scene.add.text(o,n,"000",r),t.msText.setOrigin(0,.5),t.add(t.msText),t.timerMs=0,t.isRunning=!1,t.blinkTimer=-1,t.blinkDuration=.25,t}return function MinigameTimerUI_createClass(e,t,n){return t&&MinigameTimerUI_defineProperties(e.prototype,t),n&&MinigameTimerUI_defineProperties(e,n),e}(MinigameTimerUI,[{key:"update",value:function update(e,t){MinigameTimerUI_get(MinigameTimerUI_getPrototypeOf(MinigameTimerUI.prototype),"update",this).call(this,e,t);var n=.001*t;if(this.isRunning){this.timerMs+=t;var i=Math.floor(.001*this.timerMs),r=Math.floor(this.timerMs%1e3);this.secsText.text=i.toString().padStart(2,"0")+".",this.msText.text=r.toString().padStart(3,"0")}else 0<=this.blinkTimer&&(this.blinkTimer+=n,this.blinkTimer>=this.blinkDuration&&(this.blinkTimer%=this.blinkDuration,this.secsText.setVisible(!this.secsText.visible),this.msText.setVisible(!this.msText.visible)))}},{key:"StartTimer",value:function StartTimer(){this.isRunning=!0,this.secsText.setColor("#ff0000"),this.msText.setColor("#ff0000")}},{key:"StopTimer",value:function StopTimer(){this.isRunning=!1,this.secsText.setColor("#00ff00"),this.msText.setColor("#00ff00"),this.blinkTimer=0}}]),MinigameTimerUI}();function SprintParallax_typeof(e){return(SprintParallax_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SprintParallax_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SprintParallax_get(e,t,n){return(SprintParallax_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function SprintParallax_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SprintParallax_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function SprintParallax_setPrototypeOf(e,t){return(SprintParallax_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function SprintParallax_createSuper(i){return function(){var e,t=SprintParallax_getPrototypeOf(i);if(function SprintParallax_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=SprintParallax_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function SprintParallax_possibleConstructorReturn(e,t){return!t||"object"!==SprintParallax_typeof(t)&&"function"!=typeof t?function SprintParallax_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function SprintParallax_getPrototypeOf(e){return(SprintParallax_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ae=function(){!function SprintParallax_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SprintParallax_setPrototypeOf(e,t)}(SprintParallax,Phaser.GameObjects.Container);var r=SprintParallax_createSuper(SprintParallax);function SprintParallax(e,t){var n;!function SprintParallax_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SprintParallax),(n=r.call(this,e)).setPosition(.5*n.scene.scale.width,.5*n.scene.scale.height),n.setScrollFactor(0);var i=t.layers||[];return n.SetupLayers(i),n}return function SprintParallax_createClass(e,t,n){return t&&SprintParallax_defineProperties(e.prototype,t),n&&SprintParallax_defineProperties(e,n),e}(SprintParallax,[{key:"update",value:function update(e,t){SprintParallax_get(SprintParallax_getPrototypeOf(SprintParallax.prototype),"update",this).call(this,e,t);for(var n=.001*t,i=0;i<this.layers.length;i++){var r=this.layers[i],o=r.xDrift,a=r.separationX||this.scene.scale.width;if(o)for(var s=r.sprites,l=0;l<s.length;l++){var c=s[l];c.x+=o*n,Math.abs(c.x)>a&&(c.x-=a*s.length*Math.sign(c.x))}}}},{key:"SetupLayers",value:function SetupLayers(e){if(this.layers)for(var t=0;t<this.layers.length;t++){for(var n=this.layers[t].sprites,i=0;i<n.length;i++){n[i].destroy()}n.length=0}this.layers=e;for(var r=0;r<this.layers.length;r++){var o=this.layers[r];o.sprites=[];for(var a=o.x||0,s=o.y||0,l=o.count||2,c=null!=o.separationX?o.separationX:this.scene.scale.width,u=0;u<l;u++){var p=a+c*u,f=this.scene.add.sprite(p,s,o.atlas,o.sprite);f.setOrigin(.5),o.sprites.push(f),this.add(f)}}}},{key:"Move",value:function Move(e,t){for(var n=0;n<this.layers.length;n++)for(var i=this.layers[n],r=void 0!==i.scrollScale?i.scrollScale:1,o=null!=i.separationX?i.separationX:this.scene.scale.width,a=i.sprites,s=0;s<a.length;s++){var l=a[s];l.x-=e*r,l.y-=t*r,Math.abs(l.x)>o&&(l.x-=o*a.length*Math.sign(l.x))}}}]),SprintParallax}();function SwimmingCamera_typeof(e){return(SwimmingCamera_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SwimmingCamera_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SwimmingCamera_get(e,t,n){return(SwimmingCamera_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function SwimmingCamera_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SwimmingCamera_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function SwimmingCamera_setPrototypeOf(e,t){return(SwimmingCamera_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function SwimmingCamera_createSuper(i){return function(){var e,t=SwimmingCamera_getPrototypeOf(i);if(function SwimmingCamera_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=SwimmingCamera_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function SwimmingCamera_possibleConstructorReturn(e,t){return!t||"object"!==SwimmingCamera_typeof(t)&&"function"!=typeof t?function SwimmingCamera_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function SwimmingCamera_getPrototypeOf(e){return(SwimmingCamera_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var se=function(){!function SwimmingCamera_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SwimmingCamera_setPrototypeOf(e,t)}(SwimmingCamera,O);var n=SwimmingCamera_createSuper(SwimmingCamera);function SwimmingCamera(e){var t;return function SwimmingCamera_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SwimmingCamera),(t=n.call(this,e)).SetLookAt(.5*t.scene.scale.width,.5*t.scene.scale.height),t.padding=200*t.scene.gameScale,t.snapCamera=!0,t}return function SwimmingCamera_createClass(e,t,n){return t&&SwimmingCamera_defineProperties(e.prototype,t),n&&SwimmingCamera_defineProperties(e,n),e}(SwimmingCamera,[{key:"update",value:function update(e,t){SwimmingCamera_get(SwimmingCamera_getPrototypeOf(SwimmingCamera.prototype),"update",this).call(this,e,t),this.minX=.5*this.scene.viewport.width,this.maxX=2*this.scene.scale.width-this.minX,this.CalculateLookAt()}},{key:"CalculateLookAt",value:function CalculateLookAt(){if(this.scene.player){var e=this.scene.player.x,t=this.snapCamera?e:Phaser.Math.Linear(this.cameraLookAt.x,e,.1);this.snapCamera=!1,t=Phaser.Math.Clamp(t,this.minX,this.maxX),this.SetLookAt(t,this.cameraLookAt.y)}}}]),SwimmingCamera}();function SwimmingPlayerAnimation_typeof(e){return(SwimmingPlayerAnimation_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SwimmingPlayerAnimation_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SwimmingPlayerAnimation_setPrototypeOf(e,t){return(SwimmingPlayerAnimation_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function SwimmingPlayerAnimation_createSuper(i){return function(){var e,t=SwimmingPlayerAnimation_getPrototypeOf(i);if(function SwimmingPlayerAnimation_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=SwimmingPlayerAnimation_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function SwimmingPlayerAnimation_possibleConstructorReturn(e,t){return!t||"object"!==SwimmingPlayerAnimation_typeof(t)&&"function"!=typeof t?SwimmingPlayerAnimation_assertThisInitialized(e):t}(this,e)}}function SwimmingPlayerAnimation_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SwimmingPlayerAnimation_getPrototypeOf(e){return(SwimmingPlayerAnimation_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var le=function(){!function SwimmingPlayerAnimation_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SwimmingPlayerAnimation_setPrototypeOf(e,t)}(SwimmingPlayerAnimation,K);var i=SwimmingPlayerAnimation_createSuper(SwimmingPlayerAnimation);function SwimmingPlayerAnimation(e,t){var n;return function SwimmingPlayerAnimation_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SwimmingPlayerAnimation),(n=i.call(this,e,t)).spine&&(n.MixAnimations(.5),n.spine.on("spine.event",n.OnSpineEvent,SwimmingPlayerAnimation_assertThisInitialized(n))),n}return function SwimmingPlayerAnimation_createClass(e,t,n){return t&&SwimmingPlayerAnimation_defineProperties(e.prototype,t),n&&SwimmingPlayerAnimation_defineProperties(e,n),e}(SwimmingPlayerAnimation,[{key:"CreateSpine",value:function CreateSpine(){var e=this.player.characterData.id;return this.scene.add.spine(0,0,e,"swimming_idle",!0)}},{key:"OnSpineEvent",value:function OnSpineEvent(e,t){switch(t.data.name){case"OnSwim":w.Instance.Play("sfx_minigame","swim_0"+Phaser.Math.RND.integerInRange(1,6))}}}]),SwimmingPlayerAnimation}();function SwimmingGhost_typeof(e){return(SwimmingGhost_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SwimmingGhost_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SwimmingGhost_get(e,t,n){return(SwimmingGhost_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function SwimmingGhost_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SwimmingGhost_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function SwimmingGhost_setPrototypeOf(e,t){return(SwimmingGhost_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function SwimmingGhost_createSuper(i){return function(){var e,t=SwimmingGhost_getPrototypeOf(i);if(function SwimmingGhost_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=SwimmingGhost_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function SwimmingGhost_possibleConstructorReturn(e,t){return!t||"object"!==SwimmingGhost_typeof(t)&&"function"!=typeof t?function SwimmingGhost_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function SwimmingGhost_getPrototypeOf(e){return(SwimmingGhost_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function SwimmingPlayerAnimation_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(le,"State",Object.freeze({Idle:{animationName:"swimming_idle",loop:!0},Swim:{animationName:"swimming_swim",loop:!0},Win:{animationName:"swimming_win",loop:!0},Lose:{animationName:"swimming_lose",loop:!0}}));var ce=function(){!function SwimmingGhost_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SwimmingGhost_setPrototypeOf(e,t)}(SwimmingtGhost,X);var o=SwimmingGhost_createSuper(SwimmingtGhost);function SwimmingtGhost(e,t){var n;!function SwimmingGhost_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SwimmingtGhost),(n=o.call(this,e,t)).setPosition(t.x||.5*n.scene.scale.width,t.y||.5*n.scene.scale.height),n.startX=n.x,n.endX=t.endX||n.x+200*n.scene.gameScale,n.animation.SetState(le.State.Ready),n.lost=!1,n.finished=!1;var i=new Phaser.Math.Vector2(20*n.scene.gameScale,0*n.scene.gameScale),r=new Phaser.Geom.Rectangle(.5*-i.x,.5*-i.y,i.x,i.y);return n.splashFrontParticles=n.scene.add.particles("swimming_atlas"),n.add(n.splashFrontParticles),n.splashFrontParticleEmitter=n.splashFrontParticles.createEmitter({on:!1,x:50*n.scene.gameScale,y:0*n.scene.gameScale,frame:["swimming_water_particle.png"],alpha:{start:1,end:0,ease:"Sine.easeIn"},scale:{start:1,end:0,ease:"Sine.easeIn"},rotate:{min:0,max:360,start:0,end:-720},speed:{min:100*n.scene.gameScale,max:300*n.scene.gameScale},radial:!0,angle:{min:-60,max:-10},emitZone:{source:r},gravityY:500,lifespan:1e3,frequency:500,quantity:4}),n.splashFrontParticleEmitter.reserve(4),n.splashBackParticles=n.scene.add.particles("swimming_atlas"),n.add(n.splashBackParticles),n.splashBackParticleEmitter=n.splashBackParticles.createEmitter({on:!1,x:-50*n.scene.gameScale,y:0*n.scene.gameScale,frame:["swimming_water_particle.png"],alpha:{start:1,end:0,ease:"Sine.easeIn"},scale:{start:1,end:0,ease:"Sine.easeIn"},rotate:{min:0,max:360,start:0,end:-720},speed:{min:100*n.scene.gameScale,max:300*n.scene.gameScale},radial:!0,angle:{min:-170,max:-120},emitZone:{source:r},gravityY:500,lifespan:1e3,frequency:500,quantity:4}),n.splashBackParticleEmitter.reserve(4),n}return function SwimmingGhost_createClass(e,t,n){return t&&SwimmingGhost_defineProperties(e.prototype,t),n&&SwimmingGhost_defineProperties(e,n),e}(SwimmingtGhost,[{key:"CreateAnimation",value:function CreateAnimation(){return new le(this.scene,this)}},{key:"Init",value:function Init(e){SwimmingGhost_get(SwimmingGhost_getPrototypeOf(SwimmingtGhost.prototype),"Init",this).call(this,e);var t=he.MaxPoints,n=this.targetScore/t,i=he.ParTime,r=i+he.MaxOverPar,o=Phaser.Math.Linear(r,i,n);this.swimTween=this.scene.tweens.add({targets:this,x:{value:e.endX,ease:"Linear"},duration:.5*o,yoyo:!0,onComplete:this.OnEndRun,onCompleteScope:this,onYoyo:this.OnYoyo,onYoyoScope:this,paused:!0})}},{key:"update",value:function update(e,t){SwimmingGhost_get(SwimmingGhost_getPrototypeOf(SwimmingtGhost.prototype),"update",this).call(this,e,t)}},{key:"OnMinigameStart",value:function OnMinigameStart(){SwimmingGhost_get(SwimmingGhost_getPrototypeOf(SwimmingtGhost.prototype),"OnMinigameStart",this).call(this),this.swimTween.play(),this.animation.SetState(le.State.Swim),this.splashFrontParticleEmitter.start(),this.splashBackParticleEmitter.start()}},{key:"OnMinigameWon",value:function OnMinigameWon(){SwimmingGhost_get(SwimmingGhost_getPrototypeOf(SwimmingtGhost.prototype),"OnMinigameWon",this).call(this),this.animation.SetState(le.State.Idle),this.splashFrontParticleEmitter.stop(),this.splashBackParticleEmitter.stop()}},{key:"OnMinigameLost",value:function OnMinigameLost(){SwimmingGhost_get(SwimmingGhost_getPrototypeOf(SwimmingtGhost.prototype),"OnMinigameLost",this).call(this),this.animation.SetState(le.State.Idle),this.splashFrontParticleEmitter.stop(),this.splashBackParticleEmitter.stop()}},{key:"OnGameEnterPostGameState",value:function OnGameEnterPostGameState(){}},{key:"OnEndRun",value:function OnEndRun(){this.lost?this.OnMinigameLost():this.OnMinigameWon(),this.finished=!0,this.animation.SetFlipX(!1)}},{key:"OnYoyo",value:function OnYoyo(){this.animation.SetFlipX(!0)}},{key:"SetLost",value:function SetLost(e){var t=!(0<arguments.length&&void 0!==e)||e;this.lost=t}},{key:"destroy",value:function destroy(){this.swimTween&&(this.swimTween.remove(),this.swimTween=null),SwimmingGhost_get(SwimmingGhost_getPrototypeOf(SwimmingtGhost.prototype),"destroy",this).call(this)}}]),SwimmingtGhost}();function MinigamePlayerAnalogInput_typeof(e){return(MinigamePlayerAnalogInput_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MinigamePlayerAnalogInput_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MinigamePlayerAnalogInput_get(e,t,n){return(MinigamePlayerAnalogInput_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function MinigamePlayerAnalogInput_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MinigamePlayerAnalogInput_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function MinigamePlayerAnalogInput_setPrototypeOf(e,t){return(MinigamePlayerAnalogInput_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MinigamePlayerAnalogInput_createSuper(i){return function(){var e,t=MinigamePlayerAnalogInput_getPrototypeOf(i);if(function MinigamePlayerAnalogInput_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MinigamePlayerAnalogInput_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MinigamePlayerAnalogInput_possibleConstructorReturn(e,t){return!t||"object"!==MinigamePlayerAnalogInput_typeof(t)&&"function"!=typeof t?MinigamePlayerAnalogInput_assertThisInitialized(e):t}(this,e)}}function MinigamePlayerAnalogInput_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MinigamePlayerAnalogInput_getPrototypeOf(e){return(MinigamePlayerAnalogInput_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ue=function(){!function MinigamePlayerAnalogInput_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MinigamePlayerAnalogInput_setPrototypeOf(e,t)}(MinigamePlayerAnalogInput,$);var r=MinigamePlayerAnalogInput_createSuper(MinigamePlayerAnalogInput);function MinigamePlayerAnalogInput(e,t){var n;if(!function MinigamePlayerAnalogInput_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MinigamePlayerAnalogInput),!(n=r.call(this,e,t)).scene.deviceManager.desktop){n.analogContainer=n.scene.add.container(0,n.scene.scale.height-150*n.scene.gameScale),n.analogContainer.setVisible(!1);var i=1<n.scene.playerCount&&n.player.playerNumber==Z.PlayerNumber.ONE||1==n.scene.playerCount&&n.player.playerNumber==Z.PlayerNumber.TWO;n.analogContainer.x=i?.5*n.scene.scale.width+.5*n.scene.viewport.width-150*n.scene.gameScale:.5*n.scene.scale.width-.5*n.scene.viewport.width+150*n.scene.gameScale,n.scene.ui.add(n.analogContainer),n.analogBack=n.scene.add.sprite(0,0,"ui_atlas","analog_base.png"),n.analogBack.setInteractive(),n.analogBack.on("pointerdown",n.OnPointerDown,MinigamePlayerAnalogInput_assertThisInitialized(n)),n.analogContainer.add(n.analogBack),n.analogStick=n.scene.add.sprite(0,0,"ui_atlas","analog_stick.png"),n.analogContainer.add(n.analogStick),n.scene.input.on("pointerdown",n.OnInputDown,MinigamePlayerAnalogInput_assertThisInitialized(n))}return n.activePointer=null,n.maxDistance=65*n.scene.gameScale,n.stickLerpScalar=10,n}return function MinigamePlayerAnalogInput_createClass(e,t,n){return t&&MinigamePlayerAnalogInput_defineProperties(e.prototype,t),n&&MinigamePlayerAnalogInput_defineProperties(e,n),e}(MinigamePlayerAnalogInput,[{key:"update",value:function update(e,t){MinigamePlayerAnalogInput_get(MinigamePlayerAnalogInput_getPrototypeOf(MinigamePlayerAnalogInput.prototype),"update",this).call(this,e,t);var n=.001*t;if(this.analogStick){if(!this.activePointer)return this.analogStick.x=Phaser.Math.Linear(this.analogStick.x,0,n*this.stickLerpScalar),void(this.analogStick.y=Phaser.Math.Linear(this.analogStick.y,0,n*this.stickLerpScalar));if(this.activePointer.isDown){this.analogStick.setPosition(this.activePointer.worldX-this.analogContainer.x,this.activePointer.worldY-this.analogContainer.y);var i=Phaser.Math.Distance.Between(this.analogStick.x,this.analogStick.y,0,0);if(i>this.maxDistance){var r=this.maxDistance/i;this.analogStick.x*=r,this.analogStick.y*=r}this.moveVector.x=this.analogStick.x,this.moveVector.y=this.analogStick.y,this.moveVector.normalize()}else this.activePointer=null,this.moveVector.setTo(0,0)}}},{key:"OnPointerDown",value:function OnPointerDown(e){this.activePointer=e}},{key:"OnInputDown",value:function OnInputDown(e,t){this.analogStick&&!this.activePointer&&this.scene.state==V.State.Game&&(t.length||(this.analogContainer.setPosition(e.x,e.y),this.analogContainer.setVisible(!0),this.OnPointerDown(e)))}},{key:"OnMinigameComplete",value:function OnMinigameComplete(){MinigamePlayerAnalogInput_get(MinigamePlayerAnalogInput_getPrototypeOf(MinigamePlayerAnalogInput.prototype),"OnMinigameComplete",this).call(this),this.analogContainer&&(this.analogContainer.visible=!1)}},{key:"destroy",value:function destroy(){this.scene.input.off("pointerdown",this.OnInputDown,this),MinigamePlayerAnalogInput_get(MinigamePlayerAnalogInput_getPrototypeOf(MinigamePlayerAnalogInput.prototype),"destroy",this).call(this)}}]),MinigamePlayerAnalogInput}();function SwimmingPlayer_typeof(e){return(SwimmingPlayer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SwimmingPlayer_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SwimmingPlayer_get(e,t,n){return(SwimmingPlayer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function SwimmingPlayer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SwimmingPlayer_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function SwimmingPlayer_setPrototypeOf(e,t){return(SwimmingPlayer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function SwimmingPlayer_createSuper(i){return function(){var e,t=SwimmingPlayer_getPrototypeOf(i);if(function SwimmingPlayer_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=SwimmingPlayer_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function SwimmingPlayer_possibleConstructorReturn(e,t){return!t||"object"!==SwimmingPlayer_typeof(t)&&"function"!=typeof t?function SwimmingPlayer_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function SwimmingPlayer_getPrototypeOf(e){return(SwimmingPlayer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pe=function(){!function SwimmingPlayer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SwimmingPlayer_setPrototypeOf(e,t)}(SwimmingPlayer,ee);var o=SwimmingPlayer_createSuper(SwimmingPlayer);function SwimmingPlayer(e,t){var n;!function SwimmingPlayer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SwimmingPlayer),(n=o.call(this,e,t)).setPosition(t.x||.5*n.scene.scale.width,t.y||.5*n.scene.scale.height),n.startX=n.x,n.endX=t.endX||n.x+200*n.scene.gameScale,n.direction=1,n.lastAngle=null,n.maxAngle=45,n.speed=0,n.deceleration=100*n.scene.gameScale,n.maxAcceleration=1e3*n.scene.gameScale,n.maxSpeed=300*n.scene.gameScale,n.maxRotation=270;var i=new Phaser.Math.Vector2(20*n.scene.gameScale,0*n.scene.gameScale),r=new Phaser.Geom.Rectangle(.5*-i.x,.5*-i.y,i.x,i.y);return n.splashFrontParticles=n.scene.add.particles("swimming_atlas"),n.add(n.splashFrontParticles),n.splashFrontParticleEmitter=n.splashFrontParticles.createEmitter({on:!1,x:50*n.scene.gameScale,y:0*n.scene.gameScale,frame:["swimming_water_particle.png"],alpha:{start:1,end:0,ease:"Sine.easeIn"},scale:{start:1,end:0,ease:"Sine.easeIn"},rotate:{min:0,max:360,start:0,end:-720},speed:{min:100*n.scene.gameScale,max:300*n.scene.gameScale},radial:!0,angle:{min:-60,max:-10},emitZone:{source:r},gravityY:500,lifespan:1e3,frequency:500,quantity:4}),n.splashFrontParticleEmitter.reserve(4),n.splashBackParticles=n.scene.add.particles("swimming_atlas"),n.add(n.splashBackParticles),n.splashBackParticleEmitter=n.splashBackParticles.createEmitter({on:!1,x:-50*n.scene.gameScale,y:0*n.scene.gameScale,frame:["swimming_water_particle.png"],alpha:{start:1,end:0,ease:"Sine.easeIn"},scale:{start:1,end:0,ease:"Sine.easeIn"},rotate:{min:0,max:360,start:0,end:-720},speed:{min:100*n.scene.gameScale,max:300*n.scene.gameScale},radial:!0,angle:{min:-170,max:-120},emitZone:{source:r},gravityY:500,lifespan:1e3,frequency:500,quantity:4}),n.splashBackParticleEmitter.reserve(4),n}return function SwimmingPlayer_createClass(e,t,n){return t&&SwimmingPlayer_defineProperties(e.prototype,t),n&&SwimmingPlayer_defineProperties(e,n),e}(SwimmingPlayer,[{key:"CreateAnimation",value:function CreateAnimation(){return new le(this.scene,this)}},{key:"CreateInput",value:function CreateInput(){return new ue(this.scene,this)}},{key:"UpdateControl",value:function UpdateControl(e,t){SwimmingPlayer_get(SwimmingPlayer_getPrototypeOf(SwimmingPlayer.prototype),"UpdateControl",this).call(this,e,t);var n=.001*t;if(this.scene.state==V.State.Game){var i=this.playerInput.moveVector,r=Phaser.Math.RadToDeg(Math.atan2(i.y,i.x));if(null!=this.lastAngle){var o=W.GetAngleDifference(r,this.lastAngle);if(Math.abs(o)<=90){var a=Math.abs(o)/this.maxAngle,s=this.maxAcceleration*a;this.speed=Math.min(this.speed+s*n,this.maxSpeed),0}}var l=this.speed/this.maxSpeed,c=Phaser.Math.Easing.Cubic.In(l);this.speed=Math.max(this.speed-this.deceleration*c*n,0),this.x+=this.speed*this.direction*n,.1<this.speed/this.maxSpeed?(this.animation.SetState(le.State.Swim),this.splashBackParticleEmitter.on||(this.splashFrontParticleEmitter.start(),this.splashBackParticleEmitter.start())):(this.animation.SetState(le.State.Idle),this.splashBackParticleEmitter.on&&(this.splashFrontParticleEmitter.stop(),this.splashBackParticleEmitter.stop())),(this.x>this.endX||this.x<this.startX)&&(this.direction=-this.direction,this.animation.SetFlipX(this.direction<0),0<this.direction?this.emit("lap",this):this.emit("turn",this),w.Instance.Play("sfx_minigame","swim_turn_around")),i.equals(Phaser.Math.Vector2.ZERO)?this.lastAngle=null:this.lastAngle=r}}},{key:"OnMinigameWon",value:function OnMinigameWon(){SwimmingPlayer_get(SwimmingPlayer_getPrototypeOf(SwimmingPlayer.prototype),"OnMinigameWon",this).call(this),this.animation.SetState(le.State.Win),this.splashFrontParticleEmitter.stop(),this.splashBackParticleEmitter.stop()}},{key:"OnMinigameLost",value:function OnMinigameLost(){SwimmingPlayer_get(SwimmingPlayer_getPrototypeOf(SwimmingPlayer.prototype),"OnMinigameLost",this).call(this),this.animation.SetState(le.State.Lose),this.splashFrontParticleEmitter.stop(),this.splashBackParticleEmitter.stop()}}]),SwimmingPlayer}();function SwimmingUI_typeof(e){return(SwimmingUI_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SwimmingUI_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SwimmingUI_setPrototypeOf(e,t){return(SwimmingUI_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function SwimmingUI_createSuper(i){return function(){var e,t=SwimmingUI_getPrototypeOf(i);if(function SwimmingUI_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=SwimmingUI_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function SwimmingUI_possibleConstructorReturn(e,t){return!t||"object"!==SwimmingUI_typeof(t)&&"function"!=typeof t?function SwimmingUI_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function SwimmingUI_getPrototypeOf(e){return(SwimmingUI_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fe=function(){!function SwimmingUI_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SwimmingUI_setPrototypeOf(e,t)}(SwimmingUI,oe);var n=SwimmingUI_createSuper(SwimmingUI);function SwimmingUI(e){var t;return function SwimmingUI_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SwimmingUI),(t=n.call(this,e)).CreateSpeedMeter(),t.turnPrompt=t.scene.add.spine(0,0,"swim_turn","animation",!1),t.turnPrompt.setScale(t.scene.gameScale),t.turnPrompt.setVisible(),t.add(t.turnPrompt),t}return function SwimmingUI_createClass(e,t,n){return t&&SwimmingUI_defineProperties(e.prototype,t),n&&SwimmingUI_defineProperties(e,n),e}(SwimmingUI,[{key:"ShowTurnPrompt",value:function ShowTurnPrompt(){this.turnPrompt.setVisible(!0),this.turnPrompt.setAnimation(0,"animation",!1),this.scene.time.delayedCall(3e3,this.turnPrompt.setVisible,[!1],this.turnPrompt)}}]),SwimmingUI}();function SwimmingMinigame_typeof(e){return(SwimmingMinigame_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SwimmingMinigame_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SwimmingMinigame_get(e,t,n){return(SwimmingMinigame_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function SwimmingMinigame_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SwimmingMinigame_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function SwimmingMinigame_setPrototypeOf(e,t){return(SwimmingMinigame_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function SwimmingMinigame_createSuper(i){return function(){var e,t=SwimmingMinigame_getPrototypeOf(i);if(function SwimmingMinigame_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=SwimmingMinigame_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function SwimmingMinigame_possibleConstructorReturn(e,t){return!t||"object"!==SwimmingMinigame_typeof(t)&&"function"!=typeof t?function SwimmingMinigame_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function SwimmingMinigame_getPrototypeOf(e){return(SwimmingMinigame_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SwimmingMinigame_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var he=function(){!function SwimmingMinigame_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SwimmingMinigame_setPrototypeOf(e,t)}(SwimmingMinigame,V);var e=SwimmingMinigame_createSuper(SwimmingMinigame);function SwimmingMinigame(){return function SwimmingMinigame_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SwimmingMinigame),e.call(this,"SwimmingMinigame")}return function SwimmingMinigame_createClass(e,t,n){return t&&SwimmingMinigame_defineProperties(e.prototype,t),n&&SwimmingMinigame_defineProperties(e,n),e}(SwimmingMinigame,[{key:"create",value:function create(){SwimmingMinigame_get(SwimmingMinigame_getPrototypeOf(SwimmingMinigame.prototype),"create",this).call(this),this.laps=0,this.lastCameraX=this.minigameCamera.camera.scrollX,w.Instance.AddLayer("sfx_minigame",{audioKeys:["swim_01","swim_02","swim_03","swim_04","swim_05","swim_06","swim_turn_around"]})}},{key:"update",value:function update(e,t){SwimmingMinigame_get(SwimmingMinigame_getPrototypeOf(SwimmingMinigame.prototype),"update",this).call(this,e,t);var n=Phaser.Math.Clamp(this.player.speed/this.player.maxSpeed,0,1);this.minigameUI.SetSpeed(n),this.parallax&&(this.parallax.update(e,t),this.parallax.Move(this.minigameCamera.camera.scrollX-this.lastCameraX,0),this.lastCameraX=this.minigameCamera.camera.scrollX)}},{key:"CreateMinigameCamera",value:function CreateMinigameCamera(){return new se(this)}},{key:"CreateWorld",value:function CreateWorld(){SwimmingMinigame_get(SwimmingMinigame_getPrototypeOf(SwimmingMinigame.prototype),"CreateWorld",this).call(this);var e=this.add.rectangle(.5*this.scale.width,0,this.scale.width,299*this.gameScale,3191023);e.setOrigin(.5,0),e.setScrollFactor(0),this.world.add(e),this.parallax=new ae(this,{layers:[{atlas:"swimming_atlas",sprite:"sprint_bg_sun.png",x:-400*this.gameScale,y:-300*this.gameScale,count:1,scrollScale:0},{atlas:"swimming_atlas",sprite:"sprint_bg_clouds.png",y:-231*this.gameScale,xDrift:-10*this.gameScale,scrollScale:.075},{atlas:"swimming_atlas",sprite:"swimming_background_trees.png",y:-210*this.gameScale,scrollScale:.25}]}),this.world.add(this.parallax);for(var t=0,n=this.scale.height-59*this.gameScale,i=[],r=0;r<2;r++){var o=this.add.sprite(0,n,"swimming_atlas","swimming_bg_bg.png");o.x+=o.width*r,o.setOrigin(0,1),this.world.add(o);var a=this.add.sprite(0,n,"swimming_atlas","water_layer_3.png");a.x+=a.width*r,a.setOrigin(0,1),this.world.add(a),i.push(a),t+=o.width}var s=["beast_boy_cyborg_starfire","ben_gwen_max","clarence","fin_jake","nicole_richard","ppg","victor_valentino"];W.ShuffleArray(s);for(var l=.15*this.scale.width+400*this.gameScale,c=380*this.gameScale,u=800*this.gameScale,p=0;p<s.length&&p<4;p++){var f=s[p],h=this.add.spine(l+u*p,c,f,"idle",!0);h.setScale(this.gameScale),this.world.add(h)}var m=this.add.sprite(.15*this.scale.width,.6*this.scale.height,"swimming_atlas","swimming_bg_steps.png");m.setOrigin(.5),this.world.add(m);var y=this.sys.settings.data.gameData||{};this.endX=t-.15*this.scale.width,y.challenger&&(this.ghost=new ce(this,{data:{characterData:{id:y.challenger}},score:y.list[y.listIndex].friendScore,x:.15*this.scale.width,y:.73*this.scale.height,endX:this.endX}),this.world.add(this.ghost));for(var g=[],d=0;d<2;d++){var _=this.add.sprite(0,n,"swimming_atlas","water_layer_2.png");_.x+=_.width*d,_.setOrigin(0,1),this.world.add(_),g.push(_)}this.player=new pe(this,{data:y.player,x:.15*this.scale.width,y:.8225*this.scale.height,endX:this.endX}),this.player.on("turn",this.OnPlayerTurn,this),this.player.on("lap",this.OnPlayerLap,this),this.world.add(this.player);for(var P=[],S=0;S<2;S++){var b=this.add.sprite(0,n,"swimming_atlas","water_layer_1.png");b.x+=b.width*S,b.setOrigin(0,1),this.world.add(b),P.push(b);var v=this.add.sprite(0,this.scale.height,"swimming_atlas","swimming_bg_front_tiles.png");v.x+=v.width*S,v.setOrigin(0,1),this.world.add(v)}var O=this.scale.height-50*this.gameScale,w=this.add.sprite(0,O,"swimming_atlas","swimming_pool_start.png");w.setOrigin(0,1),this.world.add(w);var C=this.add.sprite(t,O,"swimming_atlas","swimming_pool_finish.png");C.setOrigin(1,1),this.world.add(C),this.water1Tween=this.tweens.add({targets:P,scaleY:{value:.95,duration:2e3,ease:"Qad.easeInOut"},yoyo:!0,repeat:-1}),this.water2Tween=this.tweens.add({targets:g,scaleY:{value:.95,duration:2500,ease:"Qad.easeInOut"},yoyo:!0,repeat:-1}),this.water3Tween=this.tweens.add({targets:i,scaleY:{value:.975,duration:3e3,ease:"Qad.easeInOut"},yoyo:!0,repeat:-1})}},{key:"CreateMinigameUI",value:function CreateMinigameUI(){return new fe(this)}},{key:"OnEnterGameState",value:function OnEnterGameState(){SwimmingMinigame_get(SwimmingMinigame_getPrototypeOf(SwimmingMinigame.prototype),"OnEnterGameState",this).call(this),this.minigameUI&&this.minigameUI.StartTimer()}},{key:"OnEnterPostGameState",value:function OnEnterPostGameState(){SwimmingMinigame_get(SwimmingMinigame_getPrototypeOf(SwimmingMinigame.prototype),"OnEnterPostGameState",this).call(this),this.minigameUI&&(this.minigameUI.StopTimer(),this.minigameUI.HideSpeedMeter())}},{key:"OnPlayerTurn",value:function OnPlayerTurn(){this.minigameUI.ShowTurnPrompt()}},{key:"OnPlayerLap",value:function OnPlayerLap(){this.laps++,1<=this.laps&&(this.EndGame(),this.ghost&&this.ghost.SetLost())}},{key:"HasWon",value:function HasWon(){return!this.ghost||!this.ghost.finished}},{key:"GetScore",value:function GetScore(){var e=SwimmingMinigame.ParTime,t=this.minigameUI.timerMs,n=Math.max(t-e,0),i=SwimmingMinigame.MaxPoints,r=i/SwimmingMinigame.MaxOverPar,o=SwimmingMinigame.MinPoints;return Phaser.Math.Clamp(Math.floor(i-n*r),o,i)||o}},{key:"Replay",value:function Replay(){SwimmingMinigame_get(SwimmingMinigame_getPrototypeOf(SwimmingMinigame.prototype),"Replay",this).call(this,SwimmingMinigame)}},{key:"Destroy",value:function Destroy(){this.water1Tween&&(this.water1Tween.remove(),this.water1Tween=null),this.water2Tween&&(this.water2Tween.remove(),this.water2Tween=null),this.water3Tween&&(this.water3Tween.remove(),this.water3Tween=null),SwimmingMinigame_get(SwimmingMinigame_getPrototypeOf(SwimmingMinigame.prototype),"Destroy",this).call(this)}}]),SwimmingMinigame}();function ClimbingCamera_typeof(e){return(ClimbingCamera_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ClimbingCamera_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ClimbingCamera_get(e,t,n){return(ClimbingCamera_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function ClimbingCamera_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ClimbingCamera_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ClimbingCamera_setPrototypeOf(e,t){return(ClimbingCamera_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ClimbingCamera_createSuper(i){return function(){var e,t=ClimbingCamera_getPrototypeOf(i);if(function ClimbingCamera_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=ClimbingCamera_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function ClimbingCamera_possibleConstructorReturn(e,t){return!t||"object"!==ClimbingCamera_typeof(t)&&"function"!=typeof t?function ClimbingCamera_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function ClimbingCamera_getPrototypeOf(e){return(ClimbingCamera_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}SwimmingMinigame_defineProperty(he,"ParTime",22e3),SwimmingMinigame_defineProperty(he,"MaxOverPar",15e3),SwimmingMinigame_defineProperty(he,"MaxPoints",200),SwimmingMinigame_defineProperty(he,"MinPoints",10);var me=function(){!function ClimbingCamera_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ClimbingCamera_setPrototypeOf(e,t)}(ClimbingCamera,O);var n=ClimbingCamera_createSuper(ClimbingCamera);function ClimbingCamera(e){var t;return function ClimbingCamera_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ClimbingCamera),(t=n.call(this,e)).SetLookAt(.5*t.scene.scale.width,.5*t.scene.scale.height),t.padding=200*t.scene.gameScale,t.playerOffsetY=-200*t.scene.gameScale,t.snapCamera=!0,t.minY=.5*-t.scene.scale.height,t.maxY=.5*t.scene.scale.height,t.tweenScalar=20,t}return function ClimbingCamera_createClass(e,t,n){return t&&ClimbingCamera_defineProperties(e.prototype,t),n&&ClimbingCamera_defineProperties(e,n),e}(ClimbingCamera,[{key:"update",value:function update(e,t){ClimbingCamera_get(ClimbingCamera_getPrototypeOf(ClimbingCamera.prototype),"update",this).call(this,e,t),this.CalculateLookAt(e,t)}},{key:"CalculateLookAt",value:function CalculateLookAt(e,t){if(this.scene.player){var n=.001*t,i=this.scene.player.hold,r=(i?i.y+(this.scene.player.radius+i.radius):this.scene.player.y)+this.playerOffsetY,o=this.snapCamera?r:Phaser.Math.Linear(this.cameraLookAt.y,r,.1);this.snapCamera=!1,o=Phaser.Math.Clamp(o,this.minY,this.maxY),o=Phaser.Math.Linear(this.cameraLookAt.y,o,n*this.tweenScalar),this.SetLookAt(this.cameraLookAt.x,o)}}},{key:"SetCeilingHeight",value:function SetCeilingHeight(e){this.minY=1.5*this.scene.scale.height-e}}]),ClimbingCamera}();function ClimbingHold_typeof(e){return(ClimbingHold_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ClimbingHold_setPrototypeOf(e,t){return(ClimbingHold_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ClimbingHold_createSuper(i){return function(){var e,t=ClimbingHold_getPrototypeOf(i);if(function ClimbingHold_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=ClimbingHold_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function ClimbingHold_possibleConstructorReturn(e,t){return!t||"object"!==ClimbingHold_typeof(t)&&"function"!=typeof t?ClimbingHold_assertThisInitialized(e):t}(this,e)}}function ClimbingHold_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ClimbingHold_getPrototypeOf(e){return(ClimbingHold_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ye=function(){!function ClimbingHold_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ClimbingHold_setPrototypeOf(e,t)}(ClimbingHold,Phaser.GameObjects.Container);var o=ClimbingHold_createSuper(ClimbingHold);function ClimbingHold(e,t){var n;!function ClimbingHold_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ClimbingHold),(n=o.call(this,e)).setPosition(t.x,t.y);var i=t.sprite,r=n.scene.add.sprite(0,0,"climbing_atlas",i);return r.setOrigin(.5),n.add(r),n.radius=.5*r.height,n.body=n.scene.matter.add.image(n.x,n.y),n.body.setBody({type:"circle",radius:n.radius+20*n.scene.gameScale}),n.body.setSensor(!0),n.body.setIgnoreGravity(!0),n.body.setMass(50),n.body.setFriction(.5,0,100),n.body.gameObject=ClimbingHold_assertThisInitialized(n),n}return ClimbingHold}();function ClimbingCourse_typeof(e){return(ClimbingCourse_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ClimbingCourse_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ClimbingCourse_setPrototypeOf(e,t){return(ClimbingCourse_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ClimbingCourse_createSuper(i){return function(){var e,t=ClimbingCourse_getPrototypeOf(i);if(function ClimbingCourse_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=ClimbingCourse_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function ClimbingCourse_possibleConstructorReturn(e,t){return!t||"object"!==ClimbingCourse_typeof(t)&&"function"!=typeof t?function ClimbingCourse_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function ClimbingCourse_getPrototypeOf(e){return(ClimbingCourse_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ge=function(){!function ClimbingCourse_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ClimbingCourse_setPrototypeOf(e,t)}(ClimbingCourse,Phaser.GameObjects.Container);var i=ClimbingCourse_createSuper(ClimbingCourse);function ClimbingCourse(e,t){var n;return function ClimbingCourse_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ClimbingCourse),(n=i.call(this,e)).worldX=t.x,n.worldY=t.y,n.halfWidth=t.halfWidth,n.seed=t.seed,n.yStep=t.yStep||50*n.scene.gameScale,n.holdSprites=["climbing_bg_rock_1.png","climbing_bg_rock_4.png","climbing_bg_rock_2.png","climbing_bg_rock_3.png","climbing_bg_rock_5.png"],n.holdRanges=[{min:-n.halfWidth,max:.333*-n.halfWidth},{min:.333*-n.halfWidth,max:.333*n.halfWidth},{min:.333*n.halfWidth,max:n.halfWidth}],n.minHoldRadius=15*n.scene.gameScale,n.maxHoldRadius=25*n.scene.gameScale,n.minXOffset=100*n.scene.gameScale,n.linkHoldThreshold=400*n.scene.gameScale,n.holds=[],n.CreateHolds(),n}return function ClimbingCourse_createClass(e,t,n){return t&&ClimbingCourse_defineProperties(e.prototype,t),n&&ClimbingCourse_defineProperties(e,n),e}(ClimbingCourse,[{key:"CreateHolds",value:function CreateHolds(){for(var e=new Phaser.Math.RandomDataGenerator(this.seed),t=0,n=Math.floor(.5*this.holdRanges.length-.5),i=0,r=0;r<15;r++){var o=this.holdRanges[n],a=this.worldX+e.integerInRange(o.min,o.max);Math.abs(a-i)<this.minXOffset&&(o=this.holdRanges[++n%this.holdRanges.length],a=this.worldX+e.integerInRange(o.min,o.max));var s=this.worldY-(r+1)*this.yStep,l=this.holdSprites[t];i=a,t=++t%this.holdSprites.length,n=++n%this.holdRanges.length;var c=new ye(this.scene,{x:a,y:s,sprite:l});this.holds.push(c),this.add(c)}}}]),ClimbingCourse}();function ClimbingPlayerAnimation_typeof(e){return(ClimbingPlayerAnimation_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ClimbingPlayerAnimation_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ClimbingPlayerAnimation_setPrototypeOf(e,t){return(ClimbingPlayerAnimation_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ClimbingPlayerAnimation_createSuper(i){return function(){var e,t=ClimbingPlayerAnimation_getPrototypeOf(i);if(function ClimbingPlayerAnimation_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=ClimbingPlayerAnimation_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function ClimbingPlayerAnimation_possibleConstructorReturn(e,t){return!t||"object"!==ClimbingPlayerAnimation_typeof(t)&&"function"!=typeof t?function ClimbingPlayerAnimation_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function ClimbingPlayerAnimation_getPrototypeOf(e){return(ClimbingPlayerAnimation_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var de=function(){!function ClimbingPlayerAnimation_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ClimbingPlayerAnimation_setPrototypeOf(e,t)}(ClimbingPlayerAnimation,K);var i=ClimbingPlayerAnimation_createSuper(ClimbingPlayerAnimation);function ClimbingPlayerAnimation(e,t){var n;return function ClimbingPlayerAnimation_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ClimbingPlayerAnimation),(n=i.call(this,e,t)).spine&&n.MixAnimations(.2),n}return function ClimbingPlayerAnimation_createClass(e,t,n){return t&&ClimbingPlayerAnimation_defineProperties(e.prototype,t),n&&ClimbingPlayerAnimation_defineProperties(e,n),e}(ClimbingPlayerAnimation,[{key:"CreateSpine",value:function CreateSpine(){var e=this.player.characterData.id;return this.scene.add.spine(0,0,e,"idle",!0)}}]),ClimbingPlayerAnimation}();function ClimbingGhost_typeof(e){return(ClimbingGhost_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ClimbingGhost_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ClimbingGhost_get(e,t,n){return(ClimbingGhost_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function ClimbingGhost_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ClimbingGhost_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ClimbingGhost_setPrototypeOf(e,t){return(ClimbingGhost_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ClimbingGhost_createSuper(i){return function(){var e,t=ClimbingGhost_getPrototypeOf(i);if(function ClimbingGhost_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=ClimbingGhost_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function ClimbingGhost_possibleConstructorReturn(e,t){return!t||"object"!==ClimbingGhost_typeof(t)&&"function"!=typeof t?function ClimbingGhost_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function ClimbingGhost_getPrototypeOf(e){return(ClimbingGhost_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function ClimbingPlayerAnimation_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(de,"State",Object.freeze({Idle:{animationName:"idle",loop:!0},Swing:{animationName:"climbing_swing",loop:!0},Reach:{animationName:"climbing_reach_right",loop:!1},Win:{animationName:"climbing_win",loop:!0},Lose:{animationName:"climbing_lose",loop:!0}}));var _e=function(){!function ClimbingGhost_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ClimbingGhost_setPrototypeOf(e,t)}(ClimbingGhost,X);var i=ClimbingGhost_createSuper(ClimbingGhost);function ClimbingGhost(e,t){var n;return function ClimbingGhost_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ClimbingGhost),(n=i.call(this,e,t)).setPosition(t.x||.5*n.scene.scale.width,t.y||.5*n.scene.scale.height),n.animation.SetState(de.State.Idle),n.timerMs=-1,n.progressInterval=0,n}return function ClimbingGhost_createClass(e,t,n){return t&&ClimbingGhost_defineProperties(e.prototype,t),n&&ClimbingGhost_defineProperties(e,n),e}(ClimbingGhost,[{key:"CreateAnimation",value:function CreateAnimation(){return new de(this.scene,this)}},{key:"Init",value:function Init(e){ClimbingGhost_get(ClimbingGhost_getPrototypeOf(ClimbingGhost.prototype),"Init",this).call(this,e);var t=ve.MaxPoints,n=this.targetScore/t,i=ve.ParTime,r=i+ve.MaxOverPar;this.timerMs=-1,this.targetTime=Phaser.Math.Linear(r,i,n)}},{key:"update",value:function update(e,t){ClimbingGhost_get(ClimbingGhost_getPrototypeOf(ClimbingGhost.prototype),"update",this).call(this,e,t);0<=this.timerMs&&(this.timerMs+=t,this.progressInterval=Phaser.Math.Clamp(this.timerMs/this.targetTime,0,1))}},{key:"OnMinigameStart",value:function OnMinigameStart(){ClimbingGhost_get(ClimbingGhost_getPrototypeOf(ClimbingGhost.prototype),"OnMinigameStart",this).call(this),this.timerMs=0}},{key:"OnMinigameWon",value:function OnMinigameWon(){ClimbingGhost_get(ClimbingGhost_getPrototypeOf(ClimbingGhost.prototype),"OnMinigameWon",this).call(this),this.animation.SetState(de.State.Win)}},{key:"OnMinigameLost",value:function OnMinigameLost(){ClimbingGhost_get(ClimbingGhost_getPrototypeOf(ClimbingGhost.prototype),"OnMinigameLost",this).call(this),this.animation.SetState(de.State.Lose)}}]),ClimbingGhost}();function ClimbingPlayerInput_typeof(e){return(ClimbingPlayerInput_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ClimbingPlayerInput_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ClimbingPlayerInput_get(e,t,n){return(ClimbingPlayerInput_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function ClimbingPlayerInput_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ClimbingPlayerInput_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ClimbingPlayerInput_setPrototypeOf(e,t){return(ClimbingPlayerInput_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ClimbingPlayerInput_createSuper(i){return function(){var e,t=ClimbingPlayerInput_getPrototypeOf(i);if(function ClimbingPlayerInput_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=ClimbingPlayerInput_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function ClimbingPlayerInput_possibleConstructorReturn(e,t){return!t||"object"!==ClimbingPlayerInput_typeof(t)&&"function"!=typeof t?ClimbingPlayerInput_assertThisInitialized(e):t}(this,e)}}function ClimbingPlayerInput_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ClimbingPlayerInput_getPrototypeOf(e){return(ClimbingPlayerInput_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pe=function(){!function ClimbingPlayerInput_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ClimbingPlayerInput_setPrototypeOf(e,t)}(ClimbingPlayerInput,$);var i=ClimbingPlayerInput_createSuper(ClimbingPlayerInput);function ClimbingPlayerInput(e,t){var n;return function ClimbingPlayerInput_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ClimbingPlayerInput),(n=i.call(this,e,t)).scene.deviceManager.desktop?n.actionKey.on("down",n.OnButtonPressed,ClimbingPlayerInput_assertThisInitialized(n)):n.scene.input.on("pointerup",n.OnButtonPressed,ClimbingPlayerInput_assertThisInitialized(n)),n}return function ClimbingPlayerInput_createClass(e,t,n){return t&&ClimbingPlayerInput_defineProperties(e.prototype,t),n&&ClimbingPlayerInput_defineProperties(e,n),e}(ClimbingPlayerInput,[{key:"update",value:function update(e,t){ClimbingPlayerInput_get(ClimbingPlayerInput_getPrototypeOf(ClimbingPlayerInput.prototype),"update",this).call(this,e,t)}},{key:"OnButtonPressed",value:function OnButtonPressed(e,t){t.length||this.player.Jump()}},{key:"OnEnterPreGameState",value:function OnEnterPreGameState(){ClimbingPlayerInput_get(ClimbingPlayerInput_getPrototypeOf(ClimbingPlayerInput.prototype),"OnEnterPreGameState",this).call(this),this.buttonContainer&&this.liftButton.Enable()}},{key:"OnMinigameComplete",value:function OnMinigameComplete(){ClimbingPlayerInput_get(ClimbingPlayerInput_getPrototypeOf(ClimbingPlayerInput.prototype),"OnMinigameComplete",this).call(this),this.buttonContainer&&(this.buttonContainer.visible=!1,this.liftButton.Disable())}},{key:"destroy",value:function destroy(){this.scene.input.off("pointerup",this.OnButtonPressed,this),ClimbingPlayerInput_get(ClimbingPlayerInput_getPrototypeOf(ClimbingPlayerInput.prototype),"destroy",this).call(this)}}]),ClimbingPlayerInput}();function ClimbingPlayer_typeof(e){return(ClimbingPlayer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ClimbingPlayer_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ClimbingPlayer_get(e,t,n){return(ClimbingPlayer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function ClimbingPlayer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ClimbingPlayer_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ClimbingPlayer_setPrototypeOf(e,t){return(ClimbingPlayer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ClimbingPlayer_createSuper(i){return function(){var e,t=ClimbingPlayer_getPrototypeOf(i);if(function ClimbingPlayer_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=ClimbingPlayer_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function ClimbingPlayer_possibleConstructorReturn(e,t){return!t||"object"!==ClimbingPlayer_typeof(t)&&"function"!=typeof t?ClimbingPlayer_assertThisInitialized(e):t}(this,e)}}function ClimbingPlayer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ClimbingPlayer_getPrototypeOf(e){return(ClimbingPlayer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Se=function(){!function ClimbingPlayer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ClimbingPlayer_setPrototypeOf(e,t)}(ClimbingPlayer,ee);var i=ClimbingPlayer_createSuper(ClimbingPlayer);function ClimbingPlayer(e,t){var n;return function ClimbingPlayer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ClimbingPlayer),(n=i.call(this,e,t)).setPosition(t.x||0,t.y||0),n.course=t.course,n.radius=40*n.scene.gameScale,n.body=n.scene.matter.add.image(n.x,n.y),n.body.setBody({type:"circle",radius:n.radius}),n.body.setIgnoreGravity(!0),n.body.setMass(50),n.body.setFriction(.5,0,100),n.body.body.onCollideCallback=n.OnCollisionStart.bind(ClimbingPlayer_assertThisInitialized(n)),n.hold=0,n.minSwingScalar=.5,n.maxSwingScalar=1,n.swingScalar=n.minSwingScalar,n.swingTimer=0,n.isJumping=!1,n.maxRotation=.4*Math.PI,n.maxJumpForce=.5*n.scene.gameScale,n.lastPosition=new Phaser.Math.Vector2,n.animation&&n.animation.spine.setMix(de.State.Idle.animationName,de.State.Swing.animationName,0),n}return function ClimbingPlayer_createClass(e,t,n){return t&&ClimbingPlayer_defineProperties(e.prototype,t),n&&ClimbingPlayer_defineProperties(e,n),e}(ClimbingPlayer,[{key:"CreateInput",value:function CreateInput(){return new Pe(this.scene,this)}},{key:"CreateAnimation",value:function CreateAnimation(){return new de(this.scene,this)}},{key:"update",value:function update(e,t){ClimbingPlayer_get(ClimbingPlayer_getPrototypeOf(ClimbingPlayer.prototype),"update",this).call(this,e,t);var n=.001*t;if(this.hold){this.swingTimer=(this.swingTimer+n*this.swingScalar)%1;var i=Math.sin(this.swingTimer*Math.PI*2),r=this.maxRotation*i,o=(Math.sin(r),Math.cos(r),this.hold.x),a=this.hold.y-.75*this.hold.radius;this.lastPosition.setTo(this.x,this.y),this.lastRotation=this.animation.rotation,this.lastDelta=t,this.body.setPosition(o,a),this.animation.setRotation(r);var s=r-this.lastRotation;this.animation.SetFlipX(0<s)}this.setPosition(this.body.x,this.body.y)}},{key:"Jump",value:function Jump(){if(this.scene.state==V.State.Game)if(0===this.hold)this.SetHold(this.course.holds[0]);else if(!this.isJumping){this.isJumping=!0;var e=this.x+(this.hold.radius+this.radius)*-Math.sin(this.lastRotation),t=this.y+(this.hold.radius+this.radius)*Math.cos(this.lastRotation),n=this.x+(this.hold.radius+this.radius)*-Math.sin(this.animation.rotation),i=this.y+(this.hold.radius+this.radius)*Math.cos(this.animation.rotation),r=new Phaser.Math.Vector2(n-e,i-t),o=r.length(),a=1e3/60/this.lastDelta;r.normalize().scale(this.maxJumpForce+.25*o*a),this.body.setIgnoreGravity(!1),this.body.applyForce(r),this.rotateTween=this.scene.tweens.add({targets:this.animation,rotation:{value:-this.animation.rotation,duration:2e3,ease:"Linear"}}),this.animation.SetState(de.State.Reach),this.hold=null,w.Instance.Play("sfx_minigame","climbing_jump_0"+Phaser.Math.RND.integerInRange(1,4))}}},{key:"SetHold",value:function SetHold(e){this.hold=e;var t=this.body.body.velocity.x;this.body.setIgnoreGravity(!0),this.body.setVelocity(0),this.body.setAngularVelocity(0),this.isJumping=!1;var n=this.animation.rotation/this.maxRotation,i=Math.asin(n);0<t&&(i=Math.PI*Math.sign(i)-i),i<0&&(i+=2*Math.PI),this.swingTimer=i/(2*Math.PI),this.rotateTween&&(this.rotateTween.remove(),this.rotateTween=null),this.animation.SetState(de.State.Swing),w.Instance.Play("sfx_minigame","climbing_catch")}},{key:"OnComplete",value:function OnComplete(e){this.hold=null,this.body.setIgnoreGravity(!0),this.body.setVelocity(0),this.body.setAngularVelocity(0),this.body.setPosition(this.x,e),this.rotateTween&&(this.rotateTween.remove(),this.rotateTween=null),this.animation.setRotation(0),this.animation.SetState(de.State.Win)}},{key:"OnCollisionStart",value:function OnCollisionStart(e){if(!this.hold){var t=e.bodyA.gameObject?e.bodyA.gameObject.gameObject:null;t instanceof ye&&this.SetHold(t)}}},{key:"destroy",value:function destroy(){this.rotateTween&&(this.rotateTween.remove(),this.rotateTween=null),ClimbingPlayer_get(ClimbingPlayer_getPrototypeOf(ClimbingPlayer.prototype),"destroy",this).call(this)}}]),ClimbingPlayer}();function ClimbingUI_typeof(e){return(ClimbingUI_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ClimbingUI_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ClimbingUI_get(e,t,n){return(ClimbingUI_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function ClimbingUI_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ClimbingUI_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ClimbingUI_setPrototypeOf(e,t){return(ClimbingUI_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ClimbingUI_createSuper(i){return function(){var e,t=ClimbingUI_getPrototypeOf(i);if(function ClimbingUI_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=ClimbingUI_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function ClimbingUI_possibleConstructorReturn(e,t){return!t||"object"!==ClimbingUI_typeof(t)&&"function"!=typeof t?function ClimbingUI_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function ClimbingUI_getPrototypeOf(e){return(ClimbingUI_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var be=function(){!function ClimbingUI_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ClimbingUI_setPrototypeOf(e,t)}(ClimbingUI,oe);var f=ClimbingUI_createSuper(ClimbingUI);function ClimbingUI(e){var t;!function ClimbingUI_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ClimbingUI);var n=.2*(t=f.call(this,e)).scene.scale.width,i=0*t.scene.scale.height;t.meterContainer=t.scene.add.container(n,i),t.add(t.meterContainer);var r=t.scene.add.sprite(0,0,"game_atlas","rockclimbing_progress_marker.png");r.setOrigin(.5),t.meterContainer.add(r),t.minY=.45*r.height,t.maxY=.36*-r.height,t.yourMarker=t.scene.add.container(18*t.scene.gameScale,t.minY),t.meterContainer.add(t.yourMarker);var o=t.scene.add.sprite(0,0,"game_atlas","character_marker_left.png");o.setOrigin(1,.5),t.yourMarker.add(o);var a=t.scene.sys.settings.data.gameData||{},s=a.player.characterData.id,l=t.scene.add.sprite(-60*t.scene.gameScale,0,"characters_atlas","tiny_circle_"+s+".png");if(l.setOrigin(.5),t.yourMarker.add(l),a.challenger){t.friendMarker=t.scene.add.container(18*t.scene.gameScale,t.minY),t.meterContainer.add(t.friendMarker);var c=t.scene.add.sprite(0,0,"game_atlas","character_marker_left.png");c.setOrigin(1,.5),t.friendMarker.add(c);var u=a.challenger,p=t.scene.add.sprite(-60*t.scene.gameScale,0,"characters_atlas","tiny_circle_"+u+".png");p.setOrigin(.5),t.friendMarker.add(p),t.ghostTargetY=t.friendMarker.y}return t.targetY=t.yourMarker.y,t.targetScalar=4,t}return function ClimbingUI_createClass(e,t,n){return t&&ClimbingUI_defineProperties(e.prototype,t),n&&ClimbingUI_defineProperties(e,n),e}(ClimbingUI,[{key:"SetPlayerInterval",value:function SetPlayerInterval(e){this.targetY=Phaser.Math.Linear(this.minY,this.maxY,e)}},{key:"SetGhostInterval",value:function SetGhostInterval(e){this.ghostTargetY=Phaser.Math.Linear(this.minY,this.maxY,e)}},{key:"update",value:function update(e,t){ClimbingUI_get(ClimbingUI_getPrototypeOf(ClimbingUI.prototype),"update",this).call(this,e,t);var n=.001*t,i=Phaser.Math.Linear(this.yourMarker.y,this.targetY,n*this.targetScalar);if(this.yourMarker.setPosition(this.yourMarker.x,i),this.friendMarker){var r=Phaser.Math.Linear(this.friendMarker.y,this.ghostTargetY,n*this.targetScalar);this.friendMarker.setPosition(this.friendMarker.x,r),this.friendMarker.y<this.yourMarker.y?(this.meterContainer.bringToTop(this.friendMarker),this.friendMarker.setScale(1.2),this.yourMarker.setScale(1)):(this.meterContainer.bringToTop(this.yourMarker),this.yourMarker.setScale(1.2),this.friendMarker.setScale(1))}}}]),ClimbingUI}();function ClimbingMinigame_typeof(e){return(ClimbingMinigame_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ClimbingMinigame_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ClimbingMinigame_get(e,t,n){return(ClimbingMinigame_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function ClimbingMinigame_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ClimbingMinigame_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ClimbingMinigame_setPrototypeOf(e,t){return(ClimbingMinigame_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ClimbingMinigame_createSuper(i){return function(){var e,t=ClimbingMinigame_getPrototypeOf(i);if(function ClimbingMinigame_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=ClimbingMinigame_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function ClimbingMinigame_possibleConstructorReturn(e,t){return!t||"object"!==ClimbingMinigame_typeof(t)&&"function"!=typeof t?function ClimbingMinigame_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function ClimbingMinigame_getPrototypeOf(e){return(ClimbingMinigame_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ClimbingMinigame_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ve=function(){!function ClimbingMinigame_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ClimbingMinigame_setPrototypeOf(e,t)}(ClimbingMinigame,V);var t=ClimbingMinigame_createSuper(ClimbingMinigame);function ClimbingMinigame(){var e;return function ClimbingMinigame_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ClimbingMinigame),e=t.call(this,"ClimbingMinigame"),w.Instance.AddLayer("sfx_minigame",{audioKeys:["climbing_catch","climbing_jump_01","climbing_jump_02","climbing_jump_03","climbing_jump_04"]}),e}return function ClimbingMinigame_createClass(e,t,n){return t&&ClimbingMinigame_defineProperties(e.prototype,t),n&&ClimbingMinigame_defineProperties(e,n),e}(ClimbingMinigame,[{key:"create",value:function create(){ClimbingMinigame_get(ClimbingMinigame_getPrototypeOf(ClimbingMinigame.prototype),"create",this).call(this),this.minigameCamera.SetCeilingHeight(this.ceilingHeight)}},{key:"CreateMinigameCamera",value:function CreateMinigameCamera(){return new me(this)}},{key:"CreateWorld",value:function CreateWorld(){ClimbingMinigame_get(ClimbingMinigame_getPrototypeOf(ClimbingMinigame.prototype),"CreateWorld",this).call(this);var e=this.add.rectangle(.5*this.scale.width,.5*this.scale.height,this.scale.width,this.scale.height,13807772);e.setOrigin(.5),e.setScrollFactor(0),this.world.add(e);var t=this.add.sprite(.5*this.scale.width,this.scale.height,"climbing_atlas","climbing_bg_bottom.png");t.setOrigin(.5,1),this.world.add(t);var n=["beast_boy_cyborg_starfire","ben_gwen_max","clarence","fin_jake","nicole_richard","ppg","victor_valentino"];W.ShuffleArray(n);for(var i=.125*this.scale.width,r=.85*this.scale.height,o=.75*this.scale.width,a=0;a<2&&a<n.length;a++){var s=n[a],l=this.add.spine(i+o*a,r,s,"idle",!0);l.setScale(this.gameScale),this.world.add(l)}var c=this.add.sprite(.5*this.scale.width,.75*this.scale.height,"climbing_atlas","climbing_bg_wall.png");c.setOrigin(.5,1),this.world.add(c);var u=c.y-c.height,p=this.add.sprite(c.x,u,"climbing_atlas","climbing_bg_wall_top.png");p.setOrigin(.5,1),this.world.add(p),this.ceilingHeight=1300*this.gameScale;var f=this.add.sprite(t.x,this.scale.height-this.ceilingHeight,"climbing_atlas","climbing_bg_ceiling.png");f.setOrigin(.5,0),this.world.add(f),this.matter.world.engine.world.gravity.y=.4*this.gameScale,this.matter.world.setBounds(.5*this.scale.width-.5*this.viewport.width,this.scale.height-this.ceilingHeight,this.viewport.width,this.ceilingHeight+200*this.gameScale,32,!0,!0,!1,!0);var h=this.sys.settings.data.gameData||{};this.course=new ge(this,{x:.5*this.scale.width,y:.8*this.scale.height,halfWidth:350*this.gameScale,seed:Ze.GetRandomSeed(h)}),this.world.add(this.course),this.courseTopY=u-37*this.gameScale,h.challenger&&(this.ghost=new _e(this,{data:{characterData:{id:h.challenger}},score:h.list[h.listIndex].friendScore,x:.35*this.scale.width,y:this.courseTopY}),this.world.add(this.ghost)),this.startY=+this.scale.height,this.player=new Se(this,{data:h.player,x:.5*this.scale.width,y:this.startY,course:this.course}),this.world.add(this.player);var m=new Phaser.Math.Vector2(10*this.gameScale,10*this.gameScale),y=new Phaser.Geom.Rectangle(.5*-m.x,.5*-m.y,m.x,m.y);this.foamParticles=this.add.particles("climbing_atlas"),this.world.add(this.foamParticles),this.foamParticleEmitter=this.foamParticles.createEmitter({on:!1,x:0*this.gameScale,y:0*this.gameScale,frame:["foam_clock_particle_blue.png","foam_clock_particle_red.png"],rotate:{min:0,max:360,start:0,end:-720},speed:{min:500*this.gameScale,max:800*this.gameScale},accelerationY:1e3*this.gameScale,radial:!0,angle:{min:-125,max:-55},emitZone:{source:y},gravityY:1e3*this.gameScale,lifespan:2e3}),this.foamParticleEmitter.reserve(20)}},{key:"CreateMinigameUI",value:function CreateMinigameUI(){return new be(this)}},{key:"UpdateGameState",value:function UpdateGameState(e,t){ClimbingMinigame_get(ClimbingMinigame_getPrototypeOf(ClimbingMinigame.prototype),"UpdateGameState",this).call(this,e,t);var n=this.player.y-this.startY,i=Phaser.Math.Clamp(n/(this.courseTopY-this.startY),0,1);this.minigameUI.SetPlayerInterval(i),this.ghost&&this.minigameUI.SetGhostInterval(this.ghost.progressInterval),this.player.y<this.courseTopY?(this.player.OnComplete(this.courseTopY),this.EndGame()):this.player.y>this.startY&&(this.foamParticleEmitter.setPosition(this.player.x,this.player.y),this.foamParticleEmitter.explode(20),this.EndGame())}},{key:"OnEnterGameState",value:function OnEnterGameState(){ClimbingMinigame_get(ClimbingMinigame_getPrototypeOf(ClimbingMinigame.prototype),"OnEnterGameState",this).call(this),this.minigameUI&&this.minigameUI.StartTimer()}},{key:"OnEnterPostGameState",value:function OnEnterPostGameState(){ClimbingMinigame_get(ClimbingMinigame_getPrototypeOf(ClimbingMinigame.prototype),"OnEnterPostGameState",this).call(this),this.minigameUI&&this.minigameUI.StopTimer()}},{key:"HasWon",value:function HasWon(){return!this.ghost||this.minigameUI.timerMs<this.ghost.targetTime}},{key:"GetScore",value:function GetScore(){var e=ClimbingMinigame.MinPoints;if(this.player.y>this.startY)return e;var t=ClimbingMinigame.ParTime,n=this.minigameUI.timerMs,i=Math.max(n-t,0),r=ClimbingMinigame.MaxPoints,o=r/ClimbingMinigame.MaxOverPar;return Phaser.Math.Clamp(Math.floor(r-i*o),e,r)||e}},{key:"Replay",value:function Replay(){ClimbingMinigame_get(ClimbingMinigame_getPrototypeOf(ClimbingMinigame.prototype),"Replay",this).call(this,ClimbingMinigame)}}]),ClimbingMinigame}();function TrampolinePlayerAnimation_typeof(e){return(TrampolinePlayerAnimation_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TrampolinePlayerAnimation_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TrampolinePlayerAnimation_setPrototypeOf(e,t){return(TrampolinePlayerAnimation_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function TrampolinePlayerAnimation_createSuper(i){return function(){var e,t=TrampolinePlayerAnimation_getPrototypeOf(i);if(function TrampolinePlayerAnimation_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=TrampolinePlayerAnimation_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function TrampolinePlayerAnimation_possibleConstructorReturn(e,t){return!t||"object"!==TrampolinePlayerAnimation_typeof(t)&&"function"!=typeof t?function TrampolinePlayerAnimation_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function TrampolinePlayerAnimation_getPrototypeOf(e){return(TrampolinePlayerAnimation_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}ClimbingMinigame_defineProperty(ve,"ParTime",12500),ClimbingMinigame_defineProperty(ve,"MaxOverPar",25e3),ClimbingMinigame_defineProperty(ve,"MaxPoints",200),ClimbingMinigame_defineProperty(ve,"MinPoints",10);var Oe=function(){!function TrampolinePlayerAnimation_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TrampolinePlayerAnimation_setPrototypeOf(e,t)}(TrampolinePlayerAnimation,K);var i=TrampolinePlayerAnimation_createSuper(TrampolinePlayerAnimation);function TrampolinePlayerAnimation(e,t){var n;return function TrampolinePlayerAnimation_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TrampolinePlayerAnimation),(n=i.call(this,e,t)).spine&&n.MixAnimations(.5),n}return function TrampolinePlayerAnimation_createClass(e,t,n){return t&&TrampolinePlayerAnimation_defineProperties(e.prototype,t),n&&TrampolinePlayerAnimation_defineProperties(e,n),e}(TrampolinePlayerAnimation,[{key:"CreateSpine",value:function CreateSpine(){var e=this.player.characterData.id;return this.scene.add.spine(0,0,e,"trampoline_idle",!0)}}]),TrampolinePlayerAnimation}();function TrampolineGhost_typeof(e){return(TrampolineGhost_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TrampolineGhost_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TrampolineGhost_get(e,t,n){return(TrampolineGhost_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function TrampolineGhost_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TrampolineGhost_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function TrampolineGhost_setPrototypeOf(e,t){return(TrampolineGhost_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function TrampolineGhost_createSuper(i){return function(){var e,t=TrampolineGhost_getPrototypeOf(i);if(function TrampolineGhost_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=TrampolineGhost_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function TrampolineGhost_possibleConstructorReturn(e,t){return!t||"object"!==TrampolineGhost_typeof(t)&&"function"!=typeof t?function TrampolineGhost_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function TrampolineGhost_getPrototypeOf(e){return(TrampolineGhost_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function TrampolinePlayerAnimation_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(Oe,"State",Object.freeze({Idle:{animationName:"trampoline_idle",loop:!0},Jump:{animationName:"trampoline_jump",loop:!1},Up:{animationName:"trampoline_midair_up",loop:!0},Down:{animationName:"trampoline_midair_down",loop:!0},Star:{animationName:"trampoline_star",loop:!1},Tuck:{animationName:"trampoline_tuck",loop:!1},Special:{animationName:"trampoline_special",loop:!1}}));var we=function(){!function TrampolineGhost_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TrampolineGhost_setPrototypeOf(e,t)}(TrampolineGhost,X);var o=TrampolineGhost_createSuper(TrampolineGhost);function TrampolineGhost(e,t){var n;if(!function TrampolineGhost_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TrampolineGhost),(n=o.call(this,e,t)).setPosition(t.x||.5*n.scene.scale.width,t.y||.5*n.scene.scale.height),n.startY=n.y,n.topY=.25*n.scene.scale.height,n.startJumps=0,n.jumps=0,n.maxJumps=5,n.jumpDurationMs=1500,n.halfStep=1/6,n.animation.setScale(.8),n.animation.SetState(Oe.State.Idle),n.animation){var i=n.animation.spine.findBone("shadow");if(i)n.animation.spine.preUpdate(0,0),i.update(),n.animation.setPosition(n.animation.x,-i.worldY);else{var r=.5*n.animation.spine.skeletonData.height;n.animation.setPosition(n.animation.x,-r)}}return n}return function TrampolineGhost_createClass(e,t,n){return t&&TrampolineGhost_defineProperties(e.prototype,t),n&&TrampolineGhost_defineProperties(e,n),e}(TrampolineGhost,[{key:"update",value:function update(e,t){TrampolineGhost_get(TrampolineGhost_getPrototypeOf(TrampolineGhost.prototype),"update",this).call(this,e,t);var n=this.startY-this.y;this.shadow.y=n;var i=this.startY-this.topY,r=Phaser.Math.Clamp(n/i,0,1),o=Phaser.Math.Easing.Quadratic.In(r);this.shadow.setAlpha(Phaser.Math.Linear(1,.25,o)),this.shadow.setScale(Phaser.Math.Linear(1,1.5,o))}},{key:"CreateAnimation",value:function CreateAnimation(){return this.shadow=this.scene.add.ellipse(0,0,64*this.scene.gameScale,16*this.scene.gameScale,0,.5),this.shadow.setOrigin(.5),this.add(this.shadow),new Oe(this.scene,this)}},{key:"Init",value:function Init(e){TrampolineGhost_get(TrampolineGhost_getPrototypeOf(TrampolineGhost.prototype),"Init",this).call(this,e);var t=Ie.MaxPoints;this.average=this.targetScore/t,console.log(this.average)}},{key:"StartJumping",value:function StartJumping(){this.OnStartJumpComplete()}},{key:"OnStartJumpComplete",value:function OnStartJumpComplete(){if(this.startJumps++,3<this.startJumps)this.OnJumpComplete();else{var e=this.startJumps/3,t=this.topY-this.startY;this.jumpTween=this.scene.tweens.add({targets:this,y:this.startY+t*e,duration:this.jumpDurationMs*e,ease:"Quad.easeOut",onComplete:this.OnStartJumpYoyo,onCompleteScope:this}),this.animation.SetState(Oe.State.Jump)}}},{key:"OnStartJumpYoyo",value:function OnStartJumpYoyo(){var e=this.startJumps/3;this.jumpTween=this.scene.tweens.add({targets:this,y:this.startY,duration:this.jumpDurationMs*e,ease:"Quad.easeIn",onComplete:this.OnStartJumpComplete,onCompleteScope:this}),this.animation.SetState(Oe.State.Down)}},{key:"OnJumpComplete",value:function OnJumpComplete(){this.SetJumpTrick(),this.jumpTween=this.scene.tweens.add({targets:this,y:this.topY,duration:this.jumpDurationMs,ease:"Quad.easeOut",onComplete:this.OnJumpYoyo,onCompleteScope:this}),this.jumps++}},{key:"OnJumpYoyo",value:function OnJumpYoyo(){this.jumpTween=this.scene.tweens.add({targets:this,y:this.startY,duration:this.jumpDurationMs,ease:"Quad.easeIn",onComplete:this.OnJumpComplete,onCompleteScope:this}),this.animation.SetState(Oe.State.Down)}},{key:"SetJumpTrick",value:function SetJumpTrick(){var e=this.jumps%2==0?-1:1,t=Phaser.Math.Clamp(this.average+this.halfStep*e,0,1),n=0;switch(Math.floor(3*t)){case 0:n=0;break;case 1:n=1;break;default:n=2}var i=[Oe.State.Star,Oe.State.Tuck,Oe.State.Special],r=Phaser.Math.RND.integerInRange(0,i.length-1);if(this.animation.SetState(i[r]),0<n){this.angle=0;var o=360*n*(50<Phaser.Math.RND.integerInRange(0,100)?1:-1);this.spinTween&&this.spinTween.remove(),this.spinTween=this.scene.tweens.add({targets:this.animation,angle:o,duration:2e3,ease:"Quad.easeOut"})}}},{key:"OnMinigameWon",value:function OnMinigameWon(){TrampolineGhost_get(TrampolineGhost_getPrototypeOf(TrampolineGhost.prototype),"OnMinigameWon",this).call(this),this.StopJumping()}},{key:"OnMinigameLost",value:function OnMinigameLost(){TrampolineGhost_get(TrampolineGhost_getPrototypeOf(TrampolineGhost.prototype),"OnMinigameLost",this).call(this),this.StopJumping()}},{key:"StopJumping",value:function StopJumping(){this.jumpTween&&(this.jumpTween.remove(),this.jumpTween=null),this.spinTween&&(this.spinTween.remove(),this.spinTween=null),this.animation.SetState(Oe.State.Idle)}},{key:"destroy",value:function destroy(){this.jumpTween&&(this.jumpTween.remove(),this.jumpTween=null),this.spinTween&&(this.spinTween.remove(),this.spinTween=null),TrampolineGhost_get(TrampolineGhost_getPrototypeOf(TrampolineGhost.prototype),"destroy",this).call(this)}}]),TrampolineGhost}();function TrampolinePlayerInput_typeof(e){return(TrampolinePlayerInput_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TrampolinePlayerInput_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TrampolinePlayerInput_get(e,t,n){return(TrampolinePlayerInput_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function TrampolinePlayerInput_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TrampolinePlayerInput_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function TrampolinePlayerInput_setPrototypeOf(e,t){return(TrampolinePlayerInput_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function TrampolinePlayerInput_createSuper(i){return function(){var e,t=TrampolinePlayerInput_getPrototypeOf(i);if(function TrampolinePlayerInput_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=TrampolinePlayerInput_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function TrampolinePlayerInput_possibleConstructorReturn(e,t){return!t||"object"!==TrampolinePlayerInput_typeof(t)&&"function"!=typeof t?TrampolinePlayerInput_assertThisInitialized(e):t}(this,e)}}function TrampolinePlayerInput_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TrampolinePlayerInput_getPrototypeOf(e){return(TrampolinePlayerInput_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ce=function(){!function TrampolinePlayerInput_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TrampolinePlayerInput_setPrototypeOf(e,t)}(TrampolinePlayerInput,$);var i=TrampolinePlayerInput_createSuper(TrampolinePlayerInput);function TrampolinePlayerInput(e,t){var n;return function TrampolinePlayerInput_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TrampolinePlayerInput),(n=i.call(this,e,t)).moveThreshold=.1*n.scene.scale.height,n.scene.input.on("pointerdown",n.OnPointerDown,TrampolinePlayerInput_assertThisInitialized(n)),n.scene.input.on("pointerup",n.OnPointerUp,TrampolinePlayerInput_assertThisInitialized(n)),n.scene.deviceManager.desktop&&(n.leftKey.on("down",n.OnLeftKeyDown,TrampolinePlayerInput_assertThisInitialized(n)),n.downKey.on("down",n.OnDownKeyDown,TrampolinePlayerInput_assertThisInitialized(n)),n.rightKey.on("down",n.OnRightKeyDown,TrampolinePlayerInput_assertThisInitialized(n)),n.upKey.on("down",n.OnUpKeyDown,TrampolinePlayerInput_assertThisInitialized(n))),n}return function TrampolinePlayerInput_createClass(e,t,n){return t&&TrampolinePlayerInput_defineProperties(e.prototype,t),n&&TrampolinePlayerInput_defineProperties(e,n),e}(TrampolinePlayerInput,[{key:"update",value:function update(e,t){if(TrampolinePlayerInput_get(TrampolinePlayerInput_getPrototypeOf(TrampolinePlayerInput.prototype),"update",this).call(this,e,t),this.activePointer){var n=this.activePointer.x-this.activePointer.downX,i=this.activePointer.y-this.activePointer.downY;Math.abs(n)>Math.abs(i)?Math.abs(n)>this.moveThreshold&&(this.player.OnGesture(n<0?Ie.Gesture.Left:Ie.Gesture.Right),this.activePointer=null):Math.abs(i)>this.moveThreshold&&(this.player.OnGesture(i<0?Ie.Gesture.Up:Ie.Gesture.Down),this.activePointer=null)}}},{key:"OnPointerDown",value:function OnPointerDown(e){this.activePointer=e}},{key:"OnPointerUp",value:function OnPointerUp(){this.activePointer=null}},{key:"OnLeftKeyDown",value:function OnLeftKeyDown(){this.player.OnGesture(Ie.Gesture.Left)}},{key:"OnDownKeyDown",value:function OnDownKeyDown(){this.player.OnGesture(Ie.Gesture.Down)}},{key:"OnRightKeyDown",value:function OnRightKeyDown(){this.player.OnGesture(Ie.Gesture.Right)}},{key:"OnUpKeyDown",value:function OnUpKeyDown(){this.player.OnGesture(Ie.Gesture.Up)}}]),TrampolinePlayerInput}();function TrampolinePlayer_typeof(e){return(TrampolinePlayer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TrampolinePlayer_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TrampolinePlayer_get(e,t,n){return(TrampolinePlayer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function TrampolinePlayer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TrampolinePlayer_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function TrampolinePlayer_setPrototypeOf(e,t){return(TrampolinePlayer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function TrampolinePlayer_createSuper(i){return function(){var e,t=TrampolinePlayer_getPrototypeOf(i);if(function TrampolinePlayer_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=TrampolinePlayer_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function TrampolinePlayer_possibleConstructorReturn(e,t){return!t||"object"!==TrampolinePlayer_typeof(t)&&"function"!=typeof t?function TrampolinePlayer_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function TrampolinePlayer_getPrototypeOf(e){return(TrampolinePlayer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Te=function(){!function TrampolinePlayer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TrampolinePlayer_setPrototypeOf(e,t)}(TrampolinePlayer,ee);var o=TrampolinePlayer_createSuper(TrampolinePlayer);function TrampolinePlayer(e,t){var n;if(!function TrampolinePlayer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TrampolinePlayer),(n=o.call(this,e,t)).setPosition(t.x||.5*n.scene.scale.width,t.y||.5*n.scene.scale.height),n.startY=n.y,n.topY=.35*n.scene.scale.height,n.startJumps=0,n.jumps=0,n.maxJumps=5,n.jumpDurationMs=1500,n.seed=t.seed,n.rand=new Phaser.Math.RandomDataGenerator(n.seed),n.gestureCounts=[3,4,5,6,7],n.gestures=[],n.gestureIndex=0,n.correct=0,n.totalCorrect=0,n.animation){var i=n.animation.spine.findBone("shadow");if(i)n.animation.spine.preUpdate(0,0),i.update(),n.animation.setPosition(n.animation.x,-(i.worldY*n.scene.gameScale));else{var r=.5*n.animation.spine.skeletonData.height;n.animation.setPosition(n.animation.x,-r)}}return n}return function TrampolinePlayer_createClass(e,t,n){return t&&TrampolinePlayer_defineProperties(e.prototype,t),n&&TrampolinePlayer_defineProperties(e,n),e}(TrampolinePlayer,[{key:"update",value:function update(e,t){TrampolinePlayer_get(TrampolinePlayer_getPrototypeOf(TrampolinePlayer.prototype),"update",this).call(this,e,t);var n=this.startY-this.y;this.shadow.y=n;var i=this.startY-this.topY,r=Phaser.Math.Clamp(n/i,0,1),o=Phaser.Math.Easing.Quadratic.In(r);this.shadow.setAlpha(Phaser.Math.Linear(1,.25,o)),this.shadow.setScale(Phaser.Math.Linear(1,1.5,o))}},{key:"CreateInput",value:function CreateInput(){return new Ce(this.scene,this)}},{key:"CreateAnimation",value:function CreateAnimation(){return this.shadow=this.scene.add.ellipse(0,0,80*this.scene.gameScale,20*this.scene.gameScale,0,.5),this.shadow.setOrigin(.5),this.add(this.shadow),new Oe(this.scene,this)}},{key:"StartJumping",value:function StartJumping(){this.OnStartJumpComplete()}},{key:"OnStartJumpComplete",value:function OnStartJumpComplete(){if(this.startJumps++,3<this.startJumps)this.OnJumpComplete();else{var e=this.startJumps/3,t=this.topY-this.startY;this.jumpTween=this.scene.tweens.add({targets:this,y:this.startY+t*e,duration:this.jumpDurationMs*e,ease:"Quad.easeOut",onComplete:this.OnStartJumpYoyo,onCompleteScope:this}),this.animation.SetState(Oe.State.Jump),this.emit("bounce",this),3<=this.startJumps&&this.ShowNewGestures()}}},{key:"OnStartJumpYoyo",value:function OnStartJumpYoyo(){var e=this.startJumps/3;this.jumpTween=this.scene.tweens.add({targets:this,y:this.startY,duration:this.jumpDurationMs*e,ease:"Quad.easeIn",onComplete:this.OnStartJumpComplete,onCompleteScope:this}),this.animation.SetState(Oe.State.Down)}},{key:"OnJumpComplete",value:function OnJumpComplete(){if(this.jumps>=this.maxJumps)return this.scene.EndGame(),this.startJumps=0,void this.OnEndJumpComplete();this.SetJumpTrick(),this.emit("bounce",this),this.jumpTween=this.scene.tweens.add({targets:this,y:this.topY,duration:this.jumpDurationMs,ease:"Quad.easeOut",onComplete:this.OnJumpYoyo,onCompleteScope:this}),this.jumps++,this.jumps<5?this.ShowNewGestures():this.scene.minigameUI.Hide()}},{key:"OnJumpYoyo",value:function OnJumpYoyo(){this.jumpTween=this.scene.tweens.add({targets:this,y:this.startY,duration:this.jumpDurationMs,ease:"Quad.easeIn",onComplete:this.OnJumpComplete,onCompleteScope:this}),this.animation.SetState(Oe.State.Down)}},{key:"OnEndJumpComplete",value:function OnEndJumpComplete(){if(this.startJumps++,3<=this.startJumps)return this.animation.SetState(Oe.State.Idle),void this.animation.spine.update(this.scene.time.now,1e3);var e=this.startY-100*this.scene.gameScale,t=.25*this.jumpDurationMs;2<=this.startJumps&&(e=this.startY-50*this.scene.gameScale,t=.125*this.jumpDurationMs),this.jumpTween=this.scene.tweens.add({targets:this,y:e,duration:t,ease:"Quad.easeOut",onComplete:this.OnEndJumpYoyo,onCompleteScope:this}),this.animation.SetState(this.startJumps<=1?Oe.State.Down:Oe.State.Idle),this.emit("bounce",this)}},{key:"OnEndJumpYoyo",value:function OnEndJumpYoyo(){this.jumpTween=this.scene.tweens.add({targets:this,y:this.startY,duration:.25*this.jumpDurationMs,ease:"Quad.easeIn",onComplete:this.OnEndJumpComplete,onCompleteScope:this}),this.animation.SetState(this.startJumps<=1?Oe.State.Down:Oe.State.Idle)}},{key:"SetJumpTrick",value:function SetJumpTrick(){var e=this.gestureCounts[Math.min(this.jumps,this.gestureCounts.length-1)],t=Phaser.Math.Clamp(this.correct/e,0,1),n=0;switch(Math.floor(3*t)){case 0:n=0;break;case 1:n=1;break;default:n=2}var i=[Oe.State.Star,Oe.State.Tuck,Oe.State.Special],r=Phaser.Math.RND.integerInRange(0,i.length-1);if(this.animation.SetState(i[r]),0<n){this.angle=0;var o=360*n*(50<Phaser.Math.RND.integerInRange(0,100)?1:-1);this.spinTween&&this.spinTween.remove(),this.spinTween=this.scene.tweens.add({targets:this.animation,angle:o,duration:2e3,ease:"Quad.easeOut"})}w.Instance.Play("sfx_minigame","trampoline_trick_0"+(r+1))}},{key:"ShowNewGestures",value:function ShowNewGestures(){for(var e=this.gestureCounts[Math.min(this.jumps,this.gestureCounts.length-1)],t=0;t<e;t++)this.gestures[t]={type:this.rand.integerInRange(0,3),correct:null};this.scene.minigameUI.SetGestures(this.gestures),this.gestureIndex=0,this.correct=0}},{key:"OnGesture",value:function OnGesture(e){if(this.scene.state==V.State.Game)if(this.gestures.length<=0&&3<=this.startJumps)this.StartJumping();else if(!(this.gestureIndex>=this.gestures.length)){var t=this.gestures[this.gestureIndex];e==t.type?(t.correct=!0,this.correct++,this.totalCorrect++,w.Instance.Play("sfx_minigame","trampoline_button_correct")):(t.correct=!1,w.Instance.Play("sfx_minigame","trampoline_button_incorrect")),this.scene.minigameUI.SetGestureCorrect(this.gestureIndex,t.correct),this.gestureIndex++,this.correct>=this.gestures.length&&this.emit("perfect",this,this.gestures.length)}}},{key:"OnMinigameWon",value:function OnMinigameWon(){TrampolinePlayer_get(TrampolinePlayer_getPrototypeOf(TrampolinePlayer.prototype),"OnMinigameWon",this).call(this),this.animation.SetState(Oe.State.Idle)}},{key:"OnMinigameLost",value:function OnMinigameLost(){TrampolinePlayer_get(TrampolinePlayer_getPrototypeOf(TrampolinePlayer.prototype),"OnMinigameLost",this).call(this),this.animation.SetState(Oe.State.Idle)}},{key:"GetTotalGestures",value:function GetTotalGestures(){for(var e=0,t=0;t<this.maxJumps;t++){e+=this.gestureCounts[Math.min(t,this.gestureCounts.length-1)]}return e}},{key:"GetTotalCorrect",value:function GetTotalCorrect(){return this.totalCorrect}},{key:"destroy",value:function destroy(){this.jumpTween&&(this.jumpTween.remove(),this.jumpTween=null),this.spinTween&&(this.spinTween.remove(),this.spinTween=null),TrampolinePlayer_get(TrampolinePlayer_getPrototypeOf(TrampolinePlayer.prototype),"destroy",this).call(this)}}]),TrampolinePlayer}();function TrampolineUIGesture_typeof(e){return(TrampolineUIGesture_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TrampolineUIGesture_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TrampolineUIGesture_get(e,t,n){return(TrampolineUIGesture_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function TrampolineUIGesture_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TrampolineUIGesture_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function TrampolineUIGesture_setPrototypeOf(e,t){return(TrampolineUIGesture_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function TrampolineUIGesture_createSuper(i){return function(){var e,t=TrampolineUIGesture_getPrototypeOf(i);if(function TrampolineUIGesture_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=TrampolineUIGesture_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function TrampolineUIGesture_possibleConstructorReturn(e,t){return!t||"object"!==TrampolineUIGesture_typeof(t)&&"function"!=typeof t?function TrampolineUIGesture_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function TrampolineUIGesture_getPrototypeOf(e){return(TrampolineUIGesture_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Me=function(){!function TrampolineUIGesture_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TrampolineUIGesture_setPrototypeOf(e,t)}(TrampolineUIGesture,Phaser.GameObjects.Container);var i=TrampolineUIGesture_createSuper(TrampolineUIGesture);function TrampolineUIGesture(e,t){var n;return function TrampolineUIGesture_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TrampolineUIGesture),t=t||{},(n=i.call(this,e)).setPosition(t.x||0,t.y||0),n.prefix=t.prefix||"down",n.outline=n.scene.add.sprite(0,0,"trampoline_atlas","button_outline.png"),n.outline.setOrigin(.5),n.outline.setVisible(!1),n.add(n.outline),n.sprite=n.scene.add.sprite(0,0,"trampoline_atlas","down_incomplete.png"),n.sprite.setOrigin(.5),n.add(n.sprite),n}return function TrampolineUIGesture_createClass(e,t,n){return t&&TrampolineUIGesture_defineProperties(e.prototype,t),n&&TrampolineUIGesture_defineProperties(e,n),e}(TrampolineUIGesture,[{key:"Show",value:function Show(e){this.hideTimeline&&this.hideTimeline.stop(),this.moveTween&&this.moveTween.stop(),this.setVisible(!0),this.sprite.setScale(0),this.outline.setVisible(!1),this.showTween=this.scene.tweens.add({targets:this.sprite,scale:{value:1,duration:250,ease:"Back.easeOut"},delay:e})}},{key:"Hide",value:function Hide(e){this.showTween&&this.showTween.stop(),this.moveTween&&this.moveTween.stop(),this.sprite.setScale(1),this.outline.setVisible(!0),this.outline.setScale(0),this.outline.setAlpha(1),this.hideTimeline=this.scene.tweens.createTimeline(),this.hideTimeline.on("complete",this.OnHideComplete,this),this.hideTimeline.add({targets:this.sprite,scale:{value:0,duration:250,ease:"Back.easeIn"},offset:0}),e&&this.hideTimeline.add({targets:this.outline,scale:{value:1.75,duration:250,ease:"Linear"},alpha:{value:0,duration:250,ease:"Quad.easeIn"},offset:0}),this.hideTimeline.play(),!0===e?this.sprite.setFrame(this.prefix+"_correct.png"):!1===e&&this.sprite.setFrame(this.prefix+"_wrong.png")}},{key:"MoveTo",value:function MoveTo(e){this.moveTween&&this.moveTween.stop(),this.moveTween=this.scene.tweens.add({targets:this,y:{value:e,duration:250,ease:"Linear"}})}},{key:"SetFrame",value:function SetFrame(e){this.prefix=e||"down",this.sprite.setFrame(this.prefix+"_incomplete.png")}},{key:"OnHideComplete",value:function OnHideComplete(){this.setVisible(!1)}},{key:"destroy",value:function destroy(){this.showTween&&(this.showTween.remove(),this.showTween=null),this.hideTimeline&&(this.hideTimeline.destroy(),this.hideTimeline=null),this.moveTween&&(this.moveTween.remove(),this.moveTween=null),TrampolineUIGesture_get(TrampolineUIGesture_getPrototypeOf(TrampolineUIGesture.prototype),"destroy",this).call(this)}}]),TrampolineUIGesture}();function TrampolineUI_typeof(e){return(TrampolineUI_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TrampolineUI_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TrampolineUI_get(e,t,n){return(TrampolineUI_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function TrampolineUI_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TrampolineUI_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function TrampolineUI_setPrototypeOf(e,t){return(TrampolineUI_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function TrampolineUI_createSuper(i){return function(){var e,t=TrampolineUI_getPrototypeOf(i);if(function TrampolineUI_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=TrampolineUI_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function TrampolineUI_possibleConstructorReturn(e,t){return!t||"object"!==TrampolineUI_typeof(t)&&"function"!=typeof t?function TrampolineUI_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function TrampolineUI_getPrototypeOf(e){return(TrampolineUI_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ke=function(){!function TrampolineUI_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TrampolineUI_setPrototypeOf(e,t)}(TrampolineUI,N);var n=TrampolineUI_createSuper(TrampolineUI);function TrampolineUI(e){var t;return function TrampolineUI_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TrampolineUI),(t=n.call(this,e)).gestureX=.2*t.scene.scale.width,t.gestureY=.2*-t.scene.scale.height,t.stepY=100*t.scene.gameScale,t.back=t.scene.add.sprite(t.gestureX,t.gestureY,"trampoline_atlas","button_backing.png"),t.back.setOrigin(.5),t.back.setVisible(!1),t.add(t.back),t.backTween=t.scene.tweens.add({targets:t.back,scaleX:{value:1.1,duration:1e3,ease:"Quad.easeInOut"},scaleY:{value:1.1,duration:1e3,ease:"Quad.easeInOut"},yoyo:!0,repeat:-1}),t.entries=[],t}return function TrampolineUI_createClass(e,t,n){return t&&TrampolineUI_defineProperties(e.prototype,t),n&&TrampolineUI_defineProperties(e,n),e}(TrampolineUI,[{key:"SetGestures",value:function SetGestures(e){this.back.setVisible(!0);for(var t=0;t<e.length;t++){var n=e[t],i=void 0;switch(t<this.entries.length?i=this.entries[t]:(i=new Me(this.scene),this.entries[t]=i,this.add(i)),n.type){case Ie.Gesture.Left:i.SetFrame("left");break;case Ie.Gesture.Right:i.SetFrame("right");break;case Ie.Gesture.Up:i.SetFrame("up");break;case Ie.Gesture.Down:i.SetFrame("down")}i.setPosition(this.gestureX,this.gestureY+this.stepY*t),i.Show(62*t)}for(var r=e.length;r<this.entries.length;r++){this.entries.length.destroy()}this.entries.length=e.length}},{key:"SetGestureCorrect",value:function SetGestureCorrect(e,t){this.entries[e].Hide(t);for(var n=e+1;n<this.entries.length;n++){var i=n-(e+1);this.entries[n].MoveTo(this.gestureY+this.stepY*i)}}},{key:"destroy",value:function destroy(){this.backTween&&(this.backTween.remove(),this.backTween=null),TrampolineUI_get(TrampolineUI_getPrototypeOf(TrampolineUI.prototype),"destroy",this).call(this)}}]),TrampolineUI}();function TrampolineMinigame_typeof(e){return(TrampolineMinigame_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TrampolineMinigame_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TrampolineMinigame_get(e,t,n){return(TrampolineMinigame_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function TrampolineMinigame_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TrampolineMinigame_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function TrampolineMinigame_setPrototypeOf(e,t){return(TrampolineMinigame_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function TrampolineMinigame_createSuper(i){return function(){var e,t=TrampolineMinigame_getPrototypeOf(i);if(function TrampolineMinigame_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=TrampolineMinigame_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function TrampolineMinigame_possibleConstructorReturn(e,t){return!t||"object"!==TrampolineMinigame_typeof(t)&&"function"!=typeof t?function TrampolineMinigame_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function TrampolineMinigame_getPrototypeOf(e){return(TrampolineMinigame_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TrampolineMinigame_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ie=function(){!function TrampolineMinigame_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TrampolineMinigame_setPrototypeOf(e,t)}(TrampolineMinigame,V);var e=TrampolineMinigame_createSuper(TrampolineMinigame);function TrampolineMinigame(){return function TrampolineMinigame_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TrampolineMinigame),e.call(this,"TrampolineMinigame")}return function TrampolineMinigame_createClass(e,t,n){return t&&TrampolineMinigame_defineProperties(e.prototype,t),n&&TrampolineMinigame_defineProperties(e,n),e}(TrampolineMinigame,[{key:"create",value:function create(){TrampolineMinigame_get(TrampolineMinigame_getPrototypeOf(TrampolineMinigame.prototype),"create",this).call(this),w.Instance.AddLayer("sfx_minigame",{audioKeys:["trampoline_bounce","trampoline_button_correct","trampoline_button_incorrect","trampoline_trick_01","trampoline_trick_02","trampoline_trick_03"]})}},{key:"CreateWorld",value:function CreateWorld(){TrampolineMinigame_get(TrampolineMinigame_getPrototypeOf(TrampolineMinigame.prototype),"CreateWorld",this).call(this);var e=this.add.sprite(.5*this.scale.width,.5*this.scale.height,"trampoline_bg");this.world.add(e);var t=["beast_boy_cyborg_starfire","ben_gwen_max","clarence","fin_jake","nicole_richard","ppg","victor_valentino"];W.ShuffleArray(t);for(var n=.125*this.scale.width,i=.55*this.scale.height,r=.6*this.scale.width,o=0;o<2&&o<t.length;o++){var a=t[o],s=this.add.spine(n+r*o,i,a,"idle",!0);s.setScale(this.gameScale),this.world.add(s)}var l=this.sys.settings.data.gameData||{};if(l.challenger){var c=.35*this.scale.width,u=.48*this.scale.height,p=this.add.sprite(c,u,"trampoline_atlas","trampoline_ghost_trampoline.png");p.setOrigin(.5),this.world.add(p),this.ghost=new we(this,{data:{characterData:{id:l.challenger}},score:l.list[l.listIndex].friendScore,x:c,y:u}),this.world.add(this.ghost)}this.trampoline=this.add.spine(.5*this.scale.width,.775*this.scale.height,"trampoline","idle",!0),this.trampoline.setScale(this.gameScale),this.world.add(this.trampoline),this.player=new Te(this,{data:l.player,x:.5*this.scale.width,y:.85*this.scale.height,seed:Ze.GetRandomSeed(l)}),this.player.on("bounce",this.BounceTrampoline,this),this.player.on("perfect",this.OnPlayerPerfect,this),this.world.add(this.player)}},{key:"CreateMinigameUI",value:function CreateMinigameUI(){return new ke(this)}},{key:"OnEnterGameState",value:function OnEnterGameState(){TrampolineMinigame_get(TrampolineMinigame_getPrototypeOf(TrampolineMinigame.prototype),"OnEnterGameState",this).call(this),this.player.StartJumping(),this.ghost&&this.ghost.StartJumping()}},{key:"OnPlayerPerfect",value:function OnPlayerPerfect(){this.minigameUI.ShowPerfect(.2*this.scale.width,.175*-this.scale.height)}},{key:"BounceTrampoline",value:function BounceTrampoline(){this.trampoline.setAnimation(0,"bounce",!1),w.Instance.Play("sfx_minigame","trampoline_bounce")}},{key:"GetScore",value:function GetScore(){var e=this.player.GetTotalGestures(),t=this.player.GetTotalCorrect(),n=TrampolineMinigame.MaxPoints,i=TrampolineMinigame.MinPoints;return Phaser.Math.Clamp(Math.floor(t/e*n),i,n)||i}},{key:"Replay",value:function Replay(){TrampolineMinigame_get(TrampolineMinigame_getPrototypeOf(TrampolineMinigame.prototype),"Replay",this).call(this,TrampolineMinigame)}}]),TrampolineMinigame}();function SprintCamera_typeof(e){return(SprintCamera_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SprintCamera_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SprintCamera_get(e,t,n){return(SprintCamera_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function SprintCamera_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SprintCamera_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function SprintCamera_setPrototypeOf(e,t){return(SprintCamera_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function SprintCamera_createSuper(i){return function(){var e,t=SprintCamera_getPrototypeOf(i);if(function SprintCamera_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=SprintCamera_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function SprintCamera_possibleConstructorReturn(e,t){return!t||"object"!==SprintCamera_typeof(t)&&"function"!=typeof t?function SprintCamera_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function SprintCamera_getPrototypeOf(e){return(SprintCamera_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}TrampolineMinigame_defineProperty(Ie,"MaxPoints",200),TrampolineMinigame_defineProperty(Ie,"MinPoints",10),TrampolineMinigame_defineProperty(Ie,"Gesture",Object.freeze({Left:0,Right:1,Up:2,Down:3}));var xe=function(){!function SprintCamera_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SprintCamera_setPrototypeOf(e,t)}(SprintCamera,O);var n=SprintCamera_createSuper(SprintCamera);function SprintCamera(e){var t;return function SprintCamera_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SprintCamera),(t=n.call(this,e)).SetLookAt(.6*t.scene.scale.width,.5*t.scene.scale.height),t.padding=200*t.scene.gameScale,t.snapCamera=!0,t.minX=.6*t.scene.scale.width,t}return function SprintCamera_createClass(e,t,n){return t&&SprintCamera_defineProperties(e.prototype,t),n&&SprintCamera_defineProperties(e,n),e}(SprintCamera,[{key:"update",value:function update(e,t){SprintCamera_get(SprintCamera_getPrototypeOf(SprintCamera.prototype),"update",this).call(this,e,t),this.CalculateLookAt()}},{key:"CalculateLookAt",value:function CalculateLookAt(){if(this.scene.player){var e=this.scene.player.x,t=this.snapCamera?e:Phaser.Math.Linear(this.cameraLookAt.x,e,.1);this.snapCamera=!1,t=Math.max(t,this.minX),this.SetLookAt(t,this.cameraLookAt.y)}}}]),SprintCamera}();function SprintPlayerAnimation_typeof(e){return(SprintPlayerAnimation_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SprintPlayerAnimation_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SprintPlayerAnimation_setPrototypeOf(e,t){return(SprintPlayerAnimation_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function SprintPlayerAnimation_createSuper(i){return function(){var e,t=SprintPlayerAnimation_getPrototypeOf(i);if(function SprintPlayerAnimation_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=SprintPlayerAnimation_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function SprintPlayerAnimation_possibleConstructorReturn(e,t){return!t||"object"!==SprintPlayerAnimation_typeof(t)&&"function"!=typeof t?SprintPlayerAnimation_assertThisInitialized(e):t}(this,e)}}function SprintPlayerAnimation_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SprintPlayerAnimation_getPrototypeOf(e){return(SprintPlayerAnimation_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Re=function(){!function SprintPlayerAnimation_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SprintPlayerAnimation_setPrototypeOf(e,t)}(SprintPlayerAnimation,K);var i=SprintPlayerAnimation_createSuper(SprintPlayerAnimation);function SprintPlayerAnimation(e,t){var n;return function SprintPlayerAnimation_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SprintPlayerAnimation),(n=i.call(this,e,t)).spine&&(n.MixAnimations(.2),n.spine.on("spine.event",n.OnSpineEvent,SprintPlayerAnimation_assertThisInitialized(n))),n}return function SprintPlayerAnimation_createClass(e,t,n){return t&&SprintPlayerAnimation_defineProperties(e.prototype,t),n&&SprintPlayerAnimation_defineProperties(e,n),e}(SprintPlayerAnimation,[{key:"CreateSpine",value:function CreateSpine(){var e=this.player.characterData.id;return this.scene.add.spine(0,0,e,"idle",!0)}},{key:"OnSpineEvent",value:function OnSpineEvent(e,t){switch(t.data.name){case"OnFootstep":w.Instance.Play("sfx_minigame","sprint_footstep_0"+Phaser.Math.RND.integerInRange(1,6))}}}]),SprintPlayerAnimation}();function SprintGhost_typeof(e){return(SprintGhost_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SprintGhost_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SprintGhost_get(e,t,n){return(SprintGhost_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function SprintGhost_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SprintGhost_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function SprintGhost_setPrototypeOf(e,t){return(SprintGhost_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function SprintGhost_createSuper(i){return function(){var e,t=SprintGhost_getPrototypeOf(i);if(function SprintGhost_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=SprintGhost_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function SprintGhost_possibleConstructorReturn(e,t){return!t||"object"!==SprintGhost_typeof(t)&&"function"!=typeof t?function SprintGhost_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function SprintGhost_getPrototypeOf(e){return(SprintGhost_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function SprintPlayerAnimation_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(Re,"State",Object.freeze({Idle:{animationName:"idle",loop:!0},Ready:{animationName:"sprint_ready",loop:!0},Run:{animationName:"sprint_run",loop:!0},Win:{animationName:"sprint_win",loop:!1},Lose:{animationName:"sprint_lose",loop:!1}}));var Ae=function(){!function SprintGhost_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SprintGhost_setPrototypeOf(e,t)}(SprintGhost,X);var i=SprintGhost_createSuper(SprintGhost);function SprintGhost(e,t){var n;return function SprintGhost_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SprintGhost),(n=i.call(this,e,t)).setPosition(.5*n.scene.scale.width,480*n.scene.gameScale),n.animation.SetState(Re.State.Ready),n.lost=!1,n}return function SprintGhost_createClass(e,t,n){return t&&SprintGhost_defineProperties(e.prototype,t),n&&SprintGhost_defineProperties(e,n),e}(SprintGhost,[{key:"CreateAnimation",value:function CreateAnimation(){return new Re(this.scene,this)}},{key:"Init",value:function Init(e){SprintGhost_get(SprintGhost_getPrototypeOf(SprintGhost.prototype),"Init",this).call(this,e);var t=Be.MaxPoints,n=this.targetScore/t,i=Be.ParTime,r=i+Be.MaxOverPar,o=Phaser.Math.Linear(r,i,n);this.runTween=this.scene.tweens.add({targets:this,x:{value:e.endX,ease:"Linear"},duration:o,onComplete:this.OnEndRun,onCompleteScope:this,paused:!0})}},{key:"update",value:function update(e,t){SprintGhost_get(SprintGhost_getPrototypeOf(SprintGhost.prototype),"update",this).call(this,e,t)}},{key:"OnMinigameStart",value:function OnMinigameStart(){SprintGhost_get(SprintGhost_getPrototypeOf(SprintGhost.prototype),"OnMinigameStart",this).call(this),this.runTween.play(),this.animation.SetState(Re.State.Run)}},{key:"OnMinigameWon",value:function OnMinigameWon(){SprintGhost_get(SprintGhost_getPrototypeOf(SprintGhost.prototype),"OnMinigameWon",this).call(this),this.animation.SetState(Re.State.Win)}},{key:"OnMinigameLost",value:function OnMinigameLost(){SprintGhost_get(SprintGhost_getPrototypeOf(SprintGhost.prototype),"OnMinigameLost",this).call(this),this.animation.SetState(Re.State.Lose)}},{key:"OnGameEnterPostGameState",value:function OnGameEnterPostGameState(){}},{key:"OnEndRun",value:function OnEndRun(){this.lost?this.OnMinigameLost():this.OnMinigameWon()}},{key:"SetLost",value:function SetLost(e){var t=!(0<arguments.length&&void 0!==e)||e;this.lost=t}},{key:"destroy",value:function destroy(){this.runTween&&(this.runTween.remove(),this.runTween=null),SprintGhost_get(SprintGhost_getPrototypeOf(SprintGhost.prototype),"destroy",this).call(this)}}]),SprintGhost}();function SprintPlayerInput_typeof(e){return(SprintPlayerInput_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SprintPlayerInput_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SprintPlayerInput_get(e,t,n){return(SprintPlayerInput_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function SprintPlayerInput_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SprintPlayerInput_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function SprintPlayerInput_setPrototypeOf(e,t){return(SprintPlayerInput_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function SprintPlayerInput_createSuper(i){return function(){var e,t=SprintPlayerInput_getPrototypeOf(i);if(function SprintPlayerInput_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=SprintPlayerInput_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function SprintPlayerInput_possibleConstructorReturn(e,t){return!t||"object"!==SprintPlayerInput_typeof(t)&&"function"!=typeof t?SprintPlayerInput_assertThisInitialized(e):t}(this,e)}}function SprintPlayerInput_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SprintPlayerInput_getPrototypeOf(e){return(SprintPlayerInput_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var je=function(){!function SprintPlayerInput_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SprintPlayerInput_setPrototypeOf(e,t)}(SprintPlayerInput,$);var i=SprintPlayerInput_createSuper(SprintPlayerInput);function SprintPlayerInput(e,t){var n;return function SprintPlayerInput_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SprintPlayerInput),(n=i.call(this,e,t)).scene.deviceManager.desktop?(n.actionKey.on("down",n.OnButtonPressed,SprintPlayerInput_assertThisInitialized(n)),n.leftKey.on("down",n.OnButtonPressed,SprintPlayerInput_assertThisInitialized(n)),n.rightKey.on("down",n.OnButtonPressed,SprintPlayerInput_assertThisInitialized(n))):n.scene.input.on("pointerdown",n.OnButtonPressed,SprintPlayerInput_assertThisInitialized(n)),n}return function SprintPlayerInput_createClass(e,t,n){return t&&SprintPlayerInput_defineProperties(e.prototype,t),n&&SprintPlayerInput_defineProperties(e,n),e}(SprintPlayerInput,[{key:"update",value:function update(e,t){SprintPlayerInput_get(SprintPlayerInput_getPrototypeOf(SprintPlayerInput.prototype),"update",this).call(this,e,t)}},{key:"OnButtonPressed",value:function OnButtonPressed(){this.player.OnAction()}},{key:"OnEnterPreGameState",value:function OnEnterPreGameState(){SprintPlayerInput_get(SprintPlayerInput_getPrototypeOf(SprintPlayerInput.prototype),"OnEnterPreGameState",this).call(this),this.buttonContainer&&this.runButton.Enable()}},{key:"OnMinigameComplete",value:function OnMinigameComplete(){SprintPlayerInput_get(SprintPlayerInput_getPrototypeOf(SprintPlayerInput.prototype),"OnMinigameComplete",this).call(this),this.buttonContainer&&(this.buttonContainer.visible=!1,this.runButton.Disable())}},{key:"destroy",value:function destroy(){this.scene.input.off("pointerdown",this.OnRunKeyDown,this),SprintPlayerInput_get(SprintPlayerInput_getPrototypeOf(SprintPlayerInput.prototype),"destroy",this).call(this)}}]),SprintPlayerInput}();function SprintPlayer_typeof(e){return(SprintPlayer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SprintPlayer_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SprintPlayer_get(e,t,n){return(SprintPlayer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function SprintPlayer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SprintPlayer_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function SprintPlayer_setPrototypeOf(e,t){return(SprintPlayer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function SprintPlayer_createSuper(i){return function(){var e,t=SprintPlayer_getPrototypeOf(i);if(function SprintPlayer_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=SprintPlayer_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function SprintPlayer_possibleConstructorReturn(e,t){return!t||"object"!==SprintPlayer_typeof(t)&&"function"!=typeof t?function SprintPlayer_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function SprintPlayer_getPrototypeOf(e){return(SprintPlayer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var De=function(){!function SprintPlayer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SprintPlayer_setPrototypeOf(e,t)}(SprintPlayer,ee);var i=SprintPlayer_createSuper(SprintPlayer);function SprintPlayer(e,t){var n;return function SprintPlayer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SprintPlayer),(n=i.call(this,e,t)).setPosition(.5*n.scene.scale.width,560*n.scene.gameScale),n.speed=0,n.speedPerInput=100,n.deceleration=600,n.maxSpeed=600,n.previousPosition=new Phaser.Math.Vector2,n.movedDirection=new Phaser.Math.Vector2,n.animation.SetState(Re.State.Ready),n.state=SprintPlayer.State.Idle,n}return function SprintPlayer_createClass(e,t,n){return t&&SprintPlayer_defineProperties(e.prototype,t),n&&SprintPlayer_defineProperties(e,n),e}(SprintPlayer,[{key:"CreateInput",value:function CreateInput(){return new je(this.scene,this)}},{key:"CreateAnimation",value:function CreateAnimation(){return this.shadow=this.scene.add.ellipse(0,0,80*this.scene.gameScale,20*this.scene.gameScale,0,.5),this.shadow.setOrigin(.5),this.add(this.shadow),new Re(this.scene,this)}},{key:"update",value:function update(e,t){SprintPlayer_get(SprintPlayer_getPrototypeOf(SprintPlayer.prototype),"update",this).call(this,e,t);var n=.001*t;if(this.scene.state==V.State.Game){switch(this.movedDirection.setTo(this.x-this.previousPosition.x,this.y-this.previousPosition.y),this.state<SprintPlayer.State.EndGame&&(this.x+=this.speed*this.scene.gameScale*n),this.state){case SprintPlayer.State.Idle:this.UpdateIdleState(e,t);break;case SprintPlayer.State.Run:this.UpdateRunState(e,t)}this.previousPosition.setTo(this.x,this.y)}}},{key:"UpdateIdleState",value:function UpdateIdleState(e,t){var n=.001*t;this.speed=Phaser.Math.Linear(this.speed,0,4*n),console.log(this.speed)}},{key:"UpdateRunState",value:function UpdateRunState(e,t){var n=.001*t,i=this.speed/this.maxSpeed;this.speed=Math.max(this.speed-this.deceleration*i*n,0),this.speed<=.1*this.maxSpeed&&this.SetState(SprintPlayer.State.Idle)}},{key:"UpdateControl",value:function UpdateControl(e,t){SprintPlayer_get(SprintPlayer_getPrototypeOf(SprintPlayer.prototype),"UpdateControl",this).call(this,e,t),this.scene.state==V.State.Game&&this.playerInput.run&&this.AttemptRun()}},{key:"SetState",value:function SetState(e){if(this.state!=e)switch(this.state=e){case SprintPlayer.State.Idle:this.OnEnterIdleState();break;case SprintPlayer.State.Run:this.OnEnterRunState()}}},{key:"OnEnterIdleState",value:function OnEnterIdleState(){this.animation.SetState(Re.State.Idle)}},{key:"OnEnterRunState",value:function OnEnterRunState(){this.animation.SetState(Re.State.Run)}},{key:"OnAction",value:function OnAction(){this.scene.state==V.State.Game&&(this.SetState(SprintPlayer.State.Run),this.TryRun())}},{key:"TryRun",value:function TryRun(){this.speed=Math.min(this.speed+this.speedPerInput,this.maxSpeed)}},{key:"OnMinigameWon",value:function OnMinigameWon(){SprintPlayer_get(SprintPlayer_getPrototypeOf(SprintPlayer.prototype),"OnMinigameWon",this).call(this),this.SetState(SprintPlayer.State.EndGame),this.animation.SetState(Re.State.Win)}},{key:"OnMinigameLost",value:function OnMinigameLost(){SprintPlayer_get(SprintPlayer_getPrototypeOf(SprintPlayer.prototype),"OnMinigameLost",this).call(this),this.SetState(SprintPlayer.State.EndGame),this.animation.SetState(Re.State.Lose)}}]),SprintPlayer}();function SprintMinigame_typeof(e){return(SprintMinigame_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SprintMinigame_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SprintMinigame_get(e,t,n){return(SprintMinigame_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function SprintMinigame_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SprintMinigame_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function SprintMinigame_setPrototypeOf(e,t){return(SprintMinigame_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function SprintMinigame_createSuper(i){return function(){var e,t=SprintMinigame_getPrototypeOf(i);if(function SprintMinigame_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=SprintMinigame_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function SprintMinigame_possibleConstructorReturn(e,t){return!t||"object"!==SprintMinigame_typeof(t)&&"function"!=typeof t?function SprintMinigame_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function SprintMinigame_getPrototypeOf(e){return(SprintMinigame_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SprintMinigame_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function SprintPlayer_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(De,"State",Object.freeze({Idle:0,Run:1,EndGame:4}));var Be=function(){!function SprintMinigame_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SprintMinigame_setPrototypeOf(e,t)}(SprintMinigame,V);var t=SprintMinigame_createSuper(SprintMinigame);function SprintMinigame(){var e;return function SprintMinigame_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SprintMinigame),e=t.call(this,"SprintMinigame"),w.Instance.AddLayer("sfx_minigame",{audioKeys:["sprint_footstep_01","sprint_footstep_02","sprint_footstep_03","sprint_footstep_04","sprint_footstep_05","sprint_footstep_06"]}),e}return function SprintMinigame_createClass(e,t,n){return t&&SprintMinigame_defineProperties(e.prototype,t),n&&SprintMinigame_defineProperties(e,n),e}(SprintMinigame,[{key:"create",value:function create(){SprintMinigame_get(SprintMinigame_getPrototypeOf(SprintMinigame.prototype),"create",this).call(this),this.lastCameraX=this.minigameCamera.camera.scrollX}},{key:"update",value:function update(e,t){SprintMinigame_get(SprintMinigame_getPrototypeOf(SprintMinigame.prototype),"update",this).call(this,e,t),this.parallax&&(this.parallax.update(e,t),this.parallax.Move(this.minigameCamera.camera.scrollX-this.lastCameraX,0),this.lastCameraX=this.minigameCamera.camera.scrollX)}},{key:"CreateMinigameCamera",value:function CreateMinigameCamera(){return new xe(this)}},{key:"CreateWorld",value:function CreateWorld(){SprintMinigame_get(SprintMinigame_getPrototypeOf(SprintMinigame.prototype),"CreateWorld",this).call(this);var e=this.add.rectangle(.5*this.scale.width,0,this.scale.width,299*this.gameScale,3191023);e.setOrigin(.5,0),e.setScrollFactor(0),this.world.add(e),this.parallax=new ae(this,{layers:[{atlas:"sprint_bg_atlas",sprite:"sprint_bg_sun.png",x:-400*this.gameScale,y:-300*this.gameScale,count:1,scrollScale:0},{atlas:"sprint_bg_atlas",sprite:"sprint_bg_clouds.png",y:-231*this.gameScale,xDrift:-10*this.gameScale,scrollScale:.075}]}),this.world.add(this.parallax);for(var t=.5*this.scale.width,n=0;n<4;n++){var i=this.add.sprite(t,this.scale.height,"sprint_bg_atlas","sprint_bg_foreground.png");i.setOrigin(.5,1),this.world.add(i),t+=i.width}var r=522*this.gameScale,o=this.add.sprite(.5*this.scale.width,r,"sprint_atlas","sprint_bg_starting_line.png");o.setOrigin(.5),this.world.add(o);var a=5400*this.gameScale;this.endX=.5*this.scale.width+a;var s=this.add.sprite(this.endX,r,"sprint_atlas","sprint_bg_finishing_line.png");s.setOrigin(.5),this.world.add(s);var l={fontFamily:z.Instance.mainFont,fontSize:24*this.gameScale+"px",color:"#ffffff"},c=500*this.gameScale,u=.5*this.scale.width,p=c+40*this.gameScale,f=a/10;for(n=1;n<10;n++){var h=this.add.text(u+n*f,p,10*n+"m",l);h.setOrigin(.5),this.world.add(h)}var m=["beast_boy_cyborg_starfire","ben_gwen_max","clarence","fin_jake","nicole_richard","ppg","victor_valentino"];W.ShuffleArray(m);for(var y=o.x+200*this.gameScale,g=400*this.gameScale,d=1e3*this.gameScale,_=0;_<m.length;_++){var P=m[_],S=this.add.spine(y+d*_,g,P,"idle",!0);S.setScale(this.gameScale),this.world.add(S)}var b=this.sys.settings.data.gameData||{};b.challenger&&(this.ghost=new Ae(this,{data:{characterData:{id:b.challenger}},score:b.list[b.listIndex].friendScore,endX:this.endX}),this.world.add(this.ghost)),this.player=new De(this,{data:b.player}),this.world.add(this.player)}},{key:"CreateMinigameUI",value:function CreateMinigameUI(){return new oe(this)}},{key:"UpdateGameState",value:function UpdateGameState(e,t){SprintMinigame_get(SprintMinigame_getPrototypeOf(SprintMinigame.prototype),"UpdateGameState",this).call(this,e,t),this.player.x>=this.endX&&(this.EndGame(),this.ghost&&this.ghost.SetLost())}},{key:"OnEnterGameState",value:function OnEnterGameState(){SprintMinigame_get(SprintMinigame_getPrototypeOf(SprintMinigame.prototype),"OnEnterGameState",this).call(this),this.minigameUI&&this.minigameUI.StartTimer()}},{key:"OnEnterPostGameState",value:function OnEnterPostGameState(){SprintMinigame_get(SprintMinigame_getPrototypeOf(SprintMinigame.prototype),"OnEnterPostGameState",this).call(this),this.minigameUI&&this.minigameUI.StopTimer()}},{key:"HasWon",value:function HasWon(){return!this.ghost||this.ghost.x<this.endX}},{key:"GetScore",value:function GetScore(){var e=SprintMinigame.ParTime,t=this.minigameUI.timerMs,n=Math.max(t-e,0),i=SprintMinigame.MaxPoints,r=i/SprintMinigame.MaxOverPar,o=SprintMinigame.MinPoints;return Phaser.Math.Clamp(Math.floor(i-n*r),o,i)||o}},{key:"Replay",value:function Replay(){SprintMinigame_get(SprintMinigame_getPrototypeOf(SprintMinigame.prototype),"Replay",this).call(this,SprintMinigame)}}]),SprintMinigame}();function TripleJumpCamera_typeof(e){return(TripleJumpCamera_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TripleJumpCamera_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TripleJumpCamera_get(e,t,n){return(TripleJumpCamera_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function TripleJumpCamera_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TripleJumpCamera_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function TripleJumpCamera_setPrototypeOf(e,t){return(TripleJumpCamera_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function TripleJumpCamera_createSuper(i){return function(){var e,t=TripleJumpCamera_getPrototypeOf(i);if(function TripleJumpCamera_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=TripleJumpCamera_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function TripleJumpCamera_possibleConstructorReturn(e,t){return!t||"object"!==TripleJumpCamera_typeof(t)&&"function"!=typeof t?function TripleJumpCamera_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function TripleJumpCamera_getPrototypeOf(e){return(TripleJumpCamera_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}SprintMinigame_defineProperty(Be,"ParTime",9500),SprintMinigame_defineProperty(Be,"MaxOverPar",5e3),SprintMinigame_defineProperty(Be,"MaxPoints",200),SprintMinigame_defineProperty(Be,"MinPoints",10);var Ee=function(){!function TripleJumpCamera_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TripleJumpCamera_setPrototypeOf(e,t)}(TripleJumpCamera,O);var n=TripleJumpCamera_createSuper(TripleJumpCamera);function TripleJumpCamera(e){var t;return function TripleJumpCamera_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TripleJumpCamera),(t=n.call(this,e)).SetLookAt(.6*t.scene.scale.width,.5*t.scene.scale.height),t.padding=200*t.scene.gameScale,t.playerOffsetX=400*t.scene.gameScale,t.snapCamera=!0,t.minX=.6*t.scene.scale.width,t}return function TripleJumpCamera_createClass(e,t,n){return t&&TripleJumpCamera_defineProperties(e.prototype,t),n&&TripleJumpCamera_defineProperties(e,n),e}(TripleJumpCamera,[{key:"update",value:function update(e,t){TripleJumpCamera_get(TripleJumpCamera_getPrototypeOf(TripleJumpCamera.prototype),"update",this).call(this,e,t),this.CalculateLookAt()}},{key:"CalculateLookAt",value:function CalculateLookAt(){if(this.scene.player){var e=this.scene.player.x+this.playerOffsetX,t=this.snapCamera?e:Phaser.Math.Linear(this.cameraLookAt.x,e,.1);this.snapCamera=!1,t=Math.max(t,this.minX),this.SetLookAt(t,this.cameraLookAt.y)}}},{key:"TweenOffset",value:function TweenOffset(e){this.offsetTween=this.scene.tweens.add({targets:this,playerOffsetX:0,ease:"Quad.easeInOut",duration:e})}},{key:"destroy",value:function destroy(){this.offsetTween&&(this.offsetTween.remove(),this.offsetTween=null),TripleJumpCamera_get(TripleJumpCamera_getPrototypeOf(TripleJumpCamera.prototype),"destroy",this).call(this)}}]),TripleJumpCamera}();function TripleJumpPlayerAnimation_typeof(e){return(TripleJumpPlayerAnimation_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TripleJumpPlayerAnimation_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TripleJumpPlayerAnimation_setPrototypeOf(e,t){return(TripleJumpPlayerAnimation_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function TripleJumpPlayerAnimation_createSuper(i){return function(){var e,t=TripleJumpPlayerAnimation_getPrototypeOf(i);if(function TripleJumpPlayerAnimation_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=TripleJumpPlayerAnimation_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function TripleJumpPlayerAnimation_possibleConstructorReturn(e,t){return!t||"object"!==TripleJumpPlayerAnimation_typeof(t)&&"function"!=typeof t?TripleJumpPlayerAnimation_assertThisInitialized(e):t}(this,e)}}function TripleJumpPlayerAnimation_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TripleJumpPlayerAnimation_getPrototypeOf(e){return(TripleJumpPlayerAnimation_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ge=function(){!function TripleJumpPlayerAnimation_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TripleJumpPlayerAnimation_setPrototypeOf(e,t)}(TripleJumpPlayerAnimation,K);var i=TripleJumpPlayerAnimation_createSuper(TripleJumpPlayerAnimation);function TripleJumpPlayerAnimation(e,t){var n;return function TripleJumpPlayerAnimation_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TripleJumpPlayerAnimation),(n=i.call(this,e,t)).spine&&(n.MixAnimations(.2),n.spine.on("spine.event",n.OnSpineEvent,TripleJumpPlayerAnimation_assertThisInitialized(n))),n}return function TripleJumpPlayerAnimation_createClass(e,t,n){return t&&TripleJumpPlayerAnimation_defineProperties(e.prototype,t),n&&TripleJumpPlayerAnimation_defineProperties(e,n),e}(TripleJumpPlayerAnimation,[{key:"CreateSpine",value:function CreateSpine(){var e=this.player.characterData.id;return this.scene.add.spine(0,0,e,"idle",!0)}},{key:"OnSpineEvent",value:function OnSpineEvent(e,t){switch(t.data.name){case"OnFootstep":w.Instance.Play("sfx_minigame","sprint_footstep_0"+Phaser.Math.RND.integerInRange(1,6))}}}]),TripleJumpPlayerAnimation}();function TripleJumpGhost_typeof(e){return(TripleJumpGhost_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TripleJumpGhost_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TripleJumpGhost_get(e,t,n){return(TripleJumpGhost_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function TripleJumpGhost_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TripleJumpGhost_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function TripleJumpGhost_setPrototypeOf(e,t){return(TripleJumpGhost_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function TripleJumpGhost_createSuper(i){return function(){var e,t=TripleJumpGhost_getPrototypeOf(i);if(function TripleJumpGhost_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=TripleJumpGhost_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function TripleJumpGhost_possibleConstructorReturn(e,t){return!t||"object"!==TripleJumpGhost_typeof(t)&&"function"!=typeof t?function TripleJumpGhost_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function TripleJumpGhost_getPrototypeOf(e){return(TripleJumpGhost_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function TripleJumpPlayerAnimation_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(Ge,"State",Object.freeze({Idle:{animationName:"idle",loop:!0},Ready:{animationName:"sprint_ready",loop:!0},Run:{animationName:"sprint_run",loop:!0},Jump:{animationName:"triplejump_shortjump",loop:!1},Land:{animationName:"triplejump_land",loop:!1},LandEnd:{animationName:"triplejump_land_end",loop:!1},Win:{animationName:"sprint_win",loop:!1},Lose:{animationName:"sprint_lose",loop:!1}}));var Le=function(){!function TripleJumpGhost_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TripleJumpGhost_setPrototypeOf(e,t)}(SprintGhost,X);var r=TripleJumpGhost_createSuper(SprintGhost);function SprintGhost(e,t){var n;!function TripleJumpGhost_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SprintGhost);var i=(n=r.call(this,e,t)).scene.add.sprite(0,0,"triple_jump_atlas","triplejump_flag.png");return i.setOrigin(.15,.98),n.add(i),n.animation.setPosition(-100*n.scene.gameScale,n.animation.y),n.animation.SetFlipX(!0),n.animation.SetState(Ge.State.Idle),n.lost=!1,n}return function TripleJumpGhost_createClass(e,t,n){return t&&TripleJumpGhost_defineProperties(e.prototype,t),n&&TripleJumpGhost_defineProperties(e,n),e}(SprintGhost,[{key:"CreateAnimation",value:function CreateAnimation(){return new Ge(this.scene,this)}},{key:"Init",value:function Init(e){TripleJumpGhost_get(TripleJumpGhost_getPrototypeOf(SprintGhost.prototype),"Init",this).call(this,e);var t=He.MaxPoints,n=this.targetScore/t,i=e.sandPitX||.5*this.scene.scale.width,r=He.MaxDistance*n;this.setPosition(i+r,420*this.scene.gameScale)}},{key:"update",value:function update(e,t){TripleJumpGhost_get(TripleJumpGhost_getPrototypeOf(SprintGhost.prototype),"update",this).call(this,e,t)}},{key:"OnMinigameStart",value:function OnMinigameStart(){TripleJumpGhost_get(TripleJumpGhost_getPrototypeOf(SprintGhost.prototype),"OnMinigameStart",this).call(this)}},{key:"OnMinigameWon",value:function OnMinigameWon(){TripleJumpGhost_get(TripleJumpGhost_getPrototypeOf(SprintGhost.prototype),"OnMinigameWon",this).call(this),this.animation.SetState(Ge.State.Win)}},{key:"OnMinigameLost",value:function OnMinigameLost(){TripleJumpGhost_get(TripleJumpGhost_getPrototypeOf(SprintGhost.prototype),"OnMinigameLost",this).call(this)}},{key:"SetLost",value:function SetLost(e){var t=!(0<arguments.length&&void 0!==e)||e;!this.lost&&t&&(this.animation.SetFlipX(!1),this.animation.SetState(Ge.State.Lose)),this.lost=t}}]),SprintGhost}();function TripleJumpMarker_typeof(e){return(TripleJumpMarker_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TripleJumpMarker_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TripleJumpMarker_get(e,t,n){return(TripleJumpMarker_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function TripleJumpMarker_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TripleJumpMarker_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function TripleJumpMarker_setPrototypeOf(e,t){return(TripleJumpMarker_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function TripleJumpMarker_createSuper(i){return function(){var e,t=TripleJumpMarker_getPrototypeOf(i);if(function TripleJumpMarker_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=TripleJumpMarker_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function TripleJumpMarker_possibleConstructorReturn(e,t){return!t||"object"!==TripleJumpMarker_typeof(t)&&"function"!=typeof t?function TripleJumpMarker_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function TripleJumpMarker_getPrototypeOf(e){return(TripleJumpMarker_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ue=function(){!function TripleJumpMarker_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TripleJumpMarker_setPrototypeOf(e,t)}(TripleJumpMarker,Phaser.GameObjects.Container);var i=TripleJumpMarker_createSuper(TripleJumpMarker);function TripleJumpMarker(e,t){var n;return function TripleJumpMarker_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TripleJumpMarker),(n=i.call(this,e)).setPosition(t.x,t.y),n.spine=n.scene.add.spine(0,0,"jump_marker","idle_before",!1),n.spine.setScale(n.scene.gameScale),n.add(n.spine),n.timer=0,n}return function TripleJumpMarker_createClass(e,t,n){return t&&TripleJumpMarker_defineProperties(e.prototype,t),n&&TripleJumpMarker_defineProperties(e,n),e}(TripleJumpMarker,[{key:"update",value:function update(e,t){TripleJumpMarker_get(TripleJumpMarker_getPrototypeOf(TripleJumpMarker.prototype),"update",this).call(this,e,t);var n=.001*t;0<this.timer&&(this.timer=Math.max(this.timer-n,0),this.timer<=0&&this.spine.setAnimation(0,"jump",!1))}},{key:"Show",value:function Show(e,t){this.setVisible(!0),this.setPosition(e,this.y),this.spine.setAnimation(0,"idle_before",!1);var n=t-.8;this.timer=n}},{key:"Hide",value:function Hide(){this.setVisible(!1)}}]),TripleJumpMarker}();function TripleJumpPlayerInput_typeof(e){return(TripleJumpPlayerInput_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TripleJumpPlayerInput_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TripleJumpPlayerInput_get(e,t,n){return(TripleJumpPlayerInput_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function TripleJumpPlayerInput_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TripleJumpPlayerInput_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function TripleJumpPlayerInput_setPrototypeOf(e,t){return(TripleJumpPlayerInput_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function TripleJumpPlayerInput_createSuper(i){return function(){var e,t=TripleJumpPlayerInput_getPrototypeOf(i);if(function TripleJumpPlayerInput_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=TripleJumpPlayerInput_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function TripleJumpPlayerInput_possibleConstructorReturn(e,t){return!t||"object"!==TripleJumpPlayerInput_typeof(t)&&"function"!=typeof t?TripleJumpPlayerInput_assertThisInitialized(e):t}(this,e)}}function TripleJumpPlayerInput_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TripleJumpPlayerInput_getPrototypeOf(e){return(TripleJumpPlayerInput_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Je=function(){!function TripleJumpPlayerInput_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TripleJumpPlayerInput_setPrototypeOf(e,t)}(TripleJumpPlayerInput,$);var i=TripleJumpPlayerInput_createSuper(TripleJumpPlayerInput);function TripleJumpPlayerInput(e,t){var n;return function TripleJumpPlayerInput_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TripleJumpPlayerInput),(n=i.call(this,e,t)).scene.deviceManager.desktop?n.actionKey.on("down",n.OnButtonPressed,TripleJumpPlayerInput_assertThisInitialized(n)):n.scene.input.on("pointerdown",n.OnButtonPressed,TripleJumpPlayerInput_assertThisInitialized(n)),n}return function TripleJumpPlayerInput_createClass(e,t,n){return t&&TripleJumpPlayerInput_defineProperties(e.prototype,t),n&&TripleJumpPlayerInput_defineProperties(e,n),e}(TripleJumpPlayerInput,[{key:"update",value:function update(e,t){TripleJumpPlayerInput_get(TripleJumpPlayerInput_getPrototypeOf(TripleJumpPlayerInput.prototype),"update",this).call(this,e,t)}},{key:"OnButtonPressed",value:function OnButtonPressed(){this.player.OnAction()}},{key:"OnEnterPreGameState",value:function OnEnterPreGameState(){TripleJumpPlayerInput_get(TripleJumpPlayerInput_getPrototypeOf(TripleJumpPlayerInput.prototype),"OnEnterPreGameState",this).call(this),this.buttonContainer&&this.runButton.Enable()}},{key:"OnMinigameComplete",value:function OnMinigameComplete(){TripleJumpPlayerInput_get(TripleJumpPlayerInput_getPrototypeOf(TripleJumpPlayerInput.prototype),"OnMinigameComplete",this).call(this),this.buttonContainer&&(this.buttonContainer.visible=!1,this.runButton.Disable())}},{key:"destroy",value:function destroy(){this.scene.input.off("pointerdown",this.OnButtonPressed,this),TripleJumpPlayerInput_get(TripleJumpPlayerInput_getPrototypeOf(TripleJumpPlayerInput.prototype),"destroy",this).call(this)}}]),TripleJumpPlayerInput}();function TripleJumpPlayer_typeof(e){return(TripleJumpPlayer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TripleJumpPlayer_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TripleJumpPlayer_get(e,t,n){return(TripleJumpPlayer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function TripleJumpPlayer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TripleJumpPlayer_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function TripleJumpPlayer_setPrototypeOf(e,t){return(TripleJumpPlayer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function TripleJumpPlayer_createSuper(i){return function(){var e,t=TripleJumpPlayer_getPrototypeOf(i);if(function TripleJumpPlayer_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=TripleJumpPlayer_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function TripleJumpPlayer_possibleConstructorReturn(e,t){return!t||"object"!==TripleJumpPlayer_typeof(t)&&"function"!=typeof t?function TripleJumpPlayer_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function TripleJumpPlayer_getPrototypeOf(e){return(TripleJumpPlayer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var We=function(){!function TripleJumpPlayer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TripleJumpPlayer_setPrototypeOf(e,t)}(TripleJumpPlayer,ee);var o=TripleJumpPlayer_createSuper(TripleJumpPlayer);function TripleJumpPlayer(e,t){var n;!function TripleJumpPlayer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TripleJumpPlayer),(n=o.call(this,e,t)).setPosition(.5*n.scene.scale.width,560*n.scene.gameScale),n.speed=0,n.speedPerInput=100,n.deceleration=600,n.maxSpeed=1200,n.floorY=n.y,n.jumps=0,n.jumpTimer=0,n.jumpTime=.5,n.endRunX=t.endRunX,n.firstJumpX=t.firstJumpX,n.sandPitX=t.sandPitX,n.jumpHeight=0,n.defaultJump=100*n.scene.gameScale,n.maxStepJump=50*n.scene.gameScale,n.jumpStepDuration=.25,n.doJump=!1,n.jumpLeeway=100*n.scene.gameScale,n.previousPosition=new Phaser.Math.Vector2,n.movedDirection=new Phaser.Math.Vector2,n.animation.SetState(Ge.State.Ready),n.state=TripleJumpPlayer.State.Idle;var i=new Phaser.Math.Vector2(0*n.scene.gameScale,0*n.scene.gameScale),r=new Phaser.Geom.Rectangle(.5*-i.x,.5*-i.y,i.x,i.y);return n.sandParticles=n.scene.add.particles("triple_jump_atlas"),n.add(n.sandParticles),n.sandParticleEmitter=n.sandParticles.createEmitter({on:!1,x:0*n.scene.gameScale,y:0*n.scene.gameScale,frame:["triplejump_dust_particle.png"],alpha:{start:1,end:0,ease:"Sine.easeIn"},rotate:{min:0,max:360,start:0,end:-720},speed:{min:200*n.scene.gameScale,max:400*n.scene.gameScale},accelerationX:{min:-200*n.scene.gameScale,max:-600*n.scene.gameScale},radial:!0,angle:{min:-60,max:-10},emitZone:{source:r},gravityY:500,lifespan:1e3}),n.sandParticleEmitter.reserve(10),n}return function TripleJumpPlayer_createClass(e,t,n){return t&&TripleJumpPlayer_defineProperties(e.prototype,t),n&&TripleJumpPlayer_defineProperties(e,n),e}(TripleJumpPlayer,[{key:"CreateInput",value:function CreateInput(){return new Je(this.scene,this)}},{key:"CreateAnimation",value:function CreateAnimation(){return this.shadow=this.scene.add.ellipse(0,0,80*this.scene.gameScale,20*this.scene.gameScale,0,.5),this.shadow.setOrigin(.5),this.add(this.shadow),new Ge(this.scene,this)}},{key:"update",value:function update(e,t){TripleJumpPlayer_get(TripleJumpPlayer_getPrototypeOf(TripleJumpPlayer.prototype),"update",this).call(this,e,t);var n=.001*t;if(this.state<TripleJumpPlayer.State.EndGame&&(this.x+=this.speed*this.scene.gameScale*n),this.scene.state==V.State.Game){switch(this.state){case TripleJumpPlayer.State.Idle:this.UpdateIdleState(e,t);break;case TripleJumpPlayer.State.Run:this.UpdateRunState(e,t);break;case TripleJumpPlayer.State.PreJump:this.UpdatePreJumpState(e,t);break;case TripleJumpPlayer.State.Jump:this.UpdateJumpState(e,t)}var i=this.floorY-this.y;this.shadow.y=i;var r=Phaser.Math.Clamp(i/(2*this.defaultJump),0,1),o=Phaser.Math.Easing.Quadratic.In(r);this.shadow.setAlpha(Phaser.Math.Linear(1,.25,o)),this.shadow.setScale(Phaser.Math.Linear(1,1.5,o)),this.previousPosition.setTo(this.x,this.y)}}},{key:"UpdateIdleState",value:function UpdateIdleState(){}},{key:"UpdateRunState",value:function UpdateRunState(e,t){var n=.001*t,i=this.speed/this.maxSpeed;this.speed=Math.max(this.speed-this.deceleration*i*n,0),this.x>=this.endRunX&&(this.SetState(TripleJumpPlayer.State.PreJump),this.emit("endRun",this))}},{key:"UpdatePreJumpState",value:function UpdatePreJumpState(){this.x>=this.firstJumpX&&this.SetState(TripleJumpPlayer.State.Jump)}},{key:"UpdateJumpState",value:function UpdateJumpState(e,t){var n=.001*t;this.jumpTimer=Math.max(this.jumpTimer-n,0),(this.jumpTimer<=0||this.x>this.sandPitX)&&this.SetState(TripleJumpPlayer.State.EndGame),this.doJump&&this.TryJump()}},{key:"Reset",value:function Reset(){this.jumpTween&&this.jumpTween.stop(),this.x=.5*this.scene.scale.width,this.SetState(TripleJumpPlayer.State.Idle)}},{key:"SetState",value:function SetState(e){if(this.state!=e)switch(this.state=e){case TripleJumpPlayer.State.Idle:this.OnEnterIdleState();break;case TripleJumpPlayer.State.Run:this.OnEnterRunState();break;case TripleJumpPlayer.State.PreJump:this.OnEnterPreJumpState();break;case TripleJumpPlayer.State.Jump:this.OnEnterJumpState();break;case TripleJumpPlayer.State.PostJump:this.OnEnterPostJumpState();break;case TripleJumpPlayer.State.EndGame:this.OnEnterEndGameState()}}},{key:"OnEnterIdleState",value:function OnEnterIdleState(){this.speed=0,this.jumpHeight=0,this.animation.SetState(Ge.State.Ready)}},{key:"OnEnterRunState",value:function OnEnterRunState(){this.animation.SetState(Ge.State.Run)}},{key:"OnEnterPreJumpState",value:function OnEnterPreJumpState(){var e=(this.firstJumpX-this.x)/this.speed;this.scene.ShowJumpMarker(this.firstJumpX,e)}},{key:"OnEnterJumpState",value:function OnEnterJumpState(){this.jumpTimer=this.jumpTime,this.animation.SetState(Ge.State.Run)}},{key:"OnEnterPostJumpState",value:function OnEnterPostJumpState(){this.animation.SetState(Ge.State.Jump),this.jumps<3?w.Instance.Play("sfx_minigame","triple_jump_0"+this.jumps):3==this.jumps&&w.Instance.Play("sfx_minigame","triple_jump_03_countup")}},{key:"OnEnterEndGameState",value:function OnEnterEndGameState(){this.jumps<3?(this.animation.SetState(Ge.State.Idle),this.emit("foul",this)):this.emit("success",this),w.Instance.Stop("sfx_minigame","triple_jump_03_countup"),w.Instance.Play("sfx_minigame","triple_jump_land")}},{key:"OnAction",value:function OnAction(){if(this.scene.state==V.State.Game)switch(this.state){case TripleJumpPlayer.State.Idle:this.SetState(TripleJumpPlayer.State.Run);break;case TripleJumpPlayer.State.Run:this.TryRun();break;case TripleJumpPlayer.State.Jump:this.TryJump();break;case TripleJumpPlayer.State.PreJump:this.x>=this.firstJumpX-this.jumpLeeway&&(this.doJump=!0);break;case TripleJumpPlayer.State.Land:this.doJump=!0}}},{key:"TryRun",value:function TryRun(){this.speed=Math.min(this.speed+this.speedPerInput,this.maxSpeed)}},{key:"TryJump",value:function TryJump(){if(0<this.jumpTimer){this.jumpTimer>=.8*this.jumpTime&&this.emit("perfect",this),this.jumps++,this.doJump=!1;this.jumpTimer,this.jumpTime;this.jumpTimer=0,this.jumpHeight+=this.jumps<=1?this.defaultJump:this.maxStepJump;var e=this.jumpHeight/this.maxStepJump*this.jumpStepDuration,t=this.floorY-this.jumpHeight;this.jumpTween=this.scene.tweens.add({targets:this,y:t,duration:1e3*e,ease:"Quad.easeOut",yoyo:!0,onComplete:this.JumpComplete,onCompleteScope:this});var n=this.jumps<3?350:1300;this.landTween=this.scene.tweens.add({targets:this,jumpTimer:0,duration:2e3*e-n,onComplete:this.DoLand,onCompleteScope:this}),this.SetState(TripleJumpPlayer.State.PostJump),this.jumps<3?this.scene.ShowJumpMarker(this.x+this.speed*this.scene.gameScale*e*2,2*e):this.scene.OnFinalJump()}}},{key:"JumpComplete",value:function JumpComplete(){if(this.jumps<3)this.SetState(TripleJumpPlayer.State.Jump);else{this.SetState(TripleJumpPlayer.State.EndGame);var e=this.x+.25*this.speed;this.landTween=this.scene.tweens.add({targets:this,x:e,ease:"Quad.easeOut",duration:1e3}),this.sandParticleEmitter.explode(10),this.scene.ShowSkid(this.x,this.y)}}},{key:"DoLand",value:function DoLand(){this.jumps<3?(this.SetState(TripleJumpPlayer.State.Land),this.animation.SetState(Ge.State.Land)):this.animation.SetState(Ge.State.LandEnd)}},{key:"destroy",value:function destroy(){this.jumpTween&&(this.jumpTween.remove(),this.jumpTween=null),this.landTween&&(this.landTween.remove(),this.landTween=null),TripleJumpPlayer_get(TripleJumpPlayer_getPrototypeOf(TripleJumpPlayer.prototype),"destroy",this).call(this)}}]),TripleJumpPlayer}();function TripleJumpTreadmill_typeof(e){return(TripleJumpTreadmill_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TripleJumpTreadmill_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TripleJumpTreadmill_get(e,t,n){return(TripleJumpTreadmill_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function TripleJumpTreadmill_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TripleJumpTreadmill_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function TripleJumpTreadmill_setPrototypeOf(e,t){return(TripleJumpTreadmill_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function TripleJumpTreadmill_createSuper(i){return function(){var e,t=TripleJumpTreadmill_getPrototypeOf(i);if(function TripleJumpTreadmill_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=TripleJumpTreadmill_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function TripleJumpTreadmill_possibleConstructorReturn(e,t){return!t||"object"!==TripleJumpTreadmill_typeof(t)&&"function"!=typeof t?function TripleJumpTreadmill_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function TripleJumpTreadmill_getPrototypeOf(e){return(TripleJumpTreadmill_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function TripleJumpPlayer_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(We,"State",Object.freeze({Idle:0,Run:1,PreJump:2,Jump:4,PostJump:5,Land:6,EndGame:7}));var Fe=function(){!function TripleJumpTreadmill_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TripleJumpTreadmill_setPrototypeOf(e,t)}(TripleJumpTreadmill,Phaser.GameObjects.Container);var l=TripleJumpTreadmill_createSuper(TripleJumpTreadmill);function TripleJumpTreadmill(e,t){var n;!function TripleJumpTreadmill_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TripleJumpTreadmill),n=l.call(this,e);var i=t.x||.5*n.scene.scale.width,r=t.y||+n.scene.scale.height;n.setPosition(i,r);var o=t.atlas,a=t.sprite,s=t.count||2;return n.sprites=[],n.SetupSprites(o,a,s),n}return function TripleJumpTreadmill_createClass(e,t,n){return t&&TripleJumpTreadmill_defineProperties(e.prototype,t),n&&TripleJumpTreadmill_defineProperties(e,n),e}(TripleJumpTreadmill,[{key:"update",value:function update(e,t,n){if(TripleJumpTreadmill_get(TripleJumpTreadmill_getPrototypeOf(TripleJumpTreadmill.prototype),"update",this).call(this,e,t),n)for(var i=0;i<this.sprites.length;i++){var r=this.sprites[i];n.scrollX-r.x>=r.width?r.x+=r.width*this.sprites.length:n.scrollX-r.x<-r.width&&(r.x-=r.width*this.sprites.length)}}},{key:"SetupSprites",value:function SetupSprites(e,t,n){if(this.sprites){for(var i=0;i<this.sprites.length;i++){this.sprites[i].destroy()}this.sprites=[]}for(var r=0,o=0;o<n;o++){var a=this.scene.add.sprite(r,0,e,t);a.setOrigin(.5,1),this.sprites[o]=a,this.add(a),r+=a.width}}}]),TripleJumpTreadmill}();function TripleJumpUI_typeof(e){return(TripleJumpUI_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TripleJumpUI_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TripleJumpUI_get(e,t,n){return(TripleJumpUI_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function TripleJumpUI_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TripleJumpUI_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function TripleJumpUI_setPrototypeOf(e,t){return(TripleJumpUI_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function TripleJumpUI_createSuper(i){return function(){var e,t=TripleJumpUI_getPrototypeOf(i);if(function TripleJumpUI_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=TripleJumpUI_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function TripleJumpUI_possibleConstructorReturn(e,t){return!t||"object"!==TripleJumpUI_typeof(t)&&"function"!=typeof t?function TripleJumpUI_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function TripleJumpUI_getPrototypeOf(e){return(TripleJumpUI_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ze=function(){!function TripleJumpUI_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TripleJumpUI_setPrototypeOf(e,t)}(TripleJumpUI,N);var i=TripleJumpUI_createSuper(TripleJumpUI);function TripleJumpUI(e){var t;!function TripleJumpUI_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TripleJumpUI),(t=i.call(this,e)).CreateSpeedMeter(),t.bear=t.scene.add.sprite(.2*t.scene.scale.width,.5*t.scene.scale.height,"triple_jump_atlas","foul_bear_01.png"),t.bear.setOrigin(.5,1),t.bear.setVisible(!1),t.add(t.bear);var n={fontFamily:z.Instance.mainFont,fontSize:80*t.scene.gameScale+"px",color:"#000000",stroke:"#ffffff",strokeThickness:Math.ceil(12*t.scene.gameScale)};return t.foulText=t.scene.add.text(.07*t.scene.scale.width,.15*t.scene.scale.height,z.Instance.GetString("foul").toUpperCase(),n),t.foulText.setOrigin(.5),t.foulText.setAngle(-10),t.foulText.setVisible(!1),W.ClampTextToDimensions(t.foulText,300*t.scene.gameScale,120*t.scene.gameScale),t.add(t.foulText),t}return function TripleJumpUI_createClass(e,t,n){return t&&TripleJumpUI_defineProperties(e.prototype,t),n&&TripleJumpUI_defineProperties(e,n),e}(TripleJumpUI,[{key:"ShowFoul",value:function ShowFoul(){this.bear.setVisible(!0),this.foulText.setVisible(!0),this.bear.setPosition(this.bear.x,.5*this.scene.scale.height+this.bear.height),this.foulText.setScale(0),this.foulText.setAlpha(0),this.foulText.setAngle(0),this.foulTimeline=this.scene.tweens.createTimeline(),this.foulTimeline.add({targets:this.bear,y:{value:.5*this.scene.scale.height,duration:500,ease:"Sine.easeOut"},offset:0}),this.foulTimeline.add({targets:this.foulText,scaleX:{value:1,duration:500,ease:"Back.easeOut"},scaleY:{value:1,duration:500,ease:"Back.easeOut"},alpha:{value:1,duration:500,ease:"Back.easeOut"},angle:{value:-10,duration:500,ease:"Back.easeOut"},offset:250}),this.foulTimeline.play()}},{key:"destroy",value:function destroy(){this.foulTimeline&&(this.foulTimeline.destroy(),this.foulTimeline=null),TripleJumpUI_get(TripleJumpUI_getPrototypeOf(TripleJumpUI.prototype),"destroy",this).call(this)}}]),TripleJumpUI}();function TripleJumpMinigame_typeof(e){return(TripleJumpMinigame_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TripleJumpMinigame_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TripleJumpMinigame_get(e,t,n){return(TripleJumpMinigame_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function TripleJumpMinigame_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TripleJumpMinigame_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function TripleJumpMinigame_setPrototypeOf(e,t){return(TripleJumpMinigame_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function TripleJumpMinigame_createSuper(i){return function(){var e,t=TripleJumpMinigame_getPrototypeOf(i);if(function TripleJumpMinigame_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=TripleJumpMinigame_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function TripleJumpMinigame_possibleConstructorReturn(e,t){return!t||"object"!==TripleJumpMinigame_typeof(t)&&"function"!=typeof t?function TripleJumpMinigame_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function TripleJumpMinigame_getPrototypeOf(e){return(TripleJumpMinigame_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TripleJumpMinigame_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var He=function(){!function TripleJumpMinigame_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TripleJumpMinigame_setPrototypeOf(e,t)}(TripleJumpMinigame,V);var t=TripleJumpMinigame_createSuper(TripleJumpMinigame);function TripleJumpMinigame(){var e;return function TripleJumpMinigame_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TripleJumpMinigame),e=t.call(this,"TripleJumpMinigame"),w.Instance.AddLayer("sfx_minigame",{audioKeys:["sprint_footstep_01","sprint_footstep_02","sprint_footstep_03","sprint_footstep_04","sprint_footstep_05","sprint_footstep_06","triple_jump_01","triple_jump_02","triple_jump_03_countup","triple_jump_land"]}),e}return function TripleJumpMinigame_createClass(e,t,n){return t&&TripleJumpMinigame_defineProperties(e.prototype,t),n&&TripleJumpMinigame_defineProperties(e,n),e}(TripleJumpMinigame,[{key:"create",value:function create(){TripleJumpMinigame_get(TripleJumpMinigame_getPrototypeOf(TripleJumpMinigame.prototype),"create",this).call(this),this.lastCameraX=this.minigameCamera.camera.scrollX}},{key:"update",value:function update(e,t){TripleJumpMinigame_get(TripleJumpMinigame_getPrototypeOf(TripleJumpMinigame.prototype),"update",this).call(this,e,t);var n=Phaser.Math.Clamp(this.player.speed/this.player.maxSpeed,0,1);if(this.minigameUI.SetSpeed(n),this.parallax&&(this.parallax.update(e,t),this.parallax.Move(this.minigameCamera.camera.scrollX-this.lastCameraX,0),this.lastCameraX=this.minigameCamera.camera.scrollX),this.treadmill&&this.treadmill.update(e,t,this.minigameCamera.camera),this.jumpMarker&&this.jumpMarker.visible&&this.jumpMarker.update(e,t),this.sandSkid&&this.sandSkid.visible){var i=this.player.x-this.sandSkid.x;this.sandSkid.setDisplaySize(i,this.sandSkid.height)}this.player.x>this.sandPitX&&this.ghost&&!this.ghost.lost&&this.player.x>this.ghost.x&&this.ghost.SetLost()}},{key:"CreateMinigameCamera",value:function CreateMinigameCamera(){return new Ee(this)}},{key:"CreateWorld",value:function CreateWorld(){TripleJumpMinigame_get(TripleJumpMinigame_getPrototypeOf(TripleJumpMinigame.prototype),"CreateWorld",this).call(this);var e=this.add.rectangle(.5*this.scale.width,0,this.scale.width,299*this.gameScale,2596054);e.setOrigin(.5,0),e.setScrollFactor(0),this.world.add(e),this.parallax=new ae(this,{layers:[{atlas:"sprint_bg_atlas",sprite:"sprint_bg_sun.png",x:-400*this.gameScale,y:-300*this.gameScale,count:1,scrollScale:0},{atlas:"sprint_bg_atlas",sprite:"sprint_bg_clouds.png",y:-231*this.gameScale,xDrift:-10*this.gameScale,scrollScale:.075}]}),this.world.add(this.parallax),this.treadmill=new Fe(this,{atlas:"sprint_bg_atlas",sprite:"sprint_bg_foreground.png"}),this.world.add(this.treadmill);var t=521*this.gameScale,n=this.add.sprite(.5*this.scale.width,t,"triple_jump_atlas","sprint_bg_starting_line.png");n.setOrigin(.5),this.world.add(n);var i=6e3*this.gameScale,r=166*this.gameScale,o=this.add.rectangle(i,t,20*this.gameScale,r,16767097);this.world.add(o);var a=1200*this.gameScale,s=i+2*a;this.sandPitX=s+2.75*a;var l=this.add.sprite(s,t,"triple_jump_atlas","triplejump_jump_track_overlay.png");l.setOrigin(0,.5),l.setDisplaySize(this.sandPittX-s,l.height),this.world.add(l);var c=this.add.rectangle(s,t,20*this.gameScale,r,16777215);c.setOrigin(.5),this.world.add(c);var u=["beast_boy_cyborg_starfire","ben_gwen_max","clarence","fin_jake","nicole_richard","ppg","victor_valentino"];W.ShuffleArray(u);for(var p=n.x+200*this.gameScale,f=400*this.gameScale,h=1e3*this.gameScale,m=0;m<u.length;m++){var y=u[m],g=this.add.spine(p+h*m,f,y,"idle",!0);g.setScale(this.gameScale),this.world.add(g)}for(var d=s,_=400*this.gameScale,P=1;P<=4;P++){var S=this.add.sprite(d,_,"triple_jump_atlas","triplejump_rule_"+P+".png");S.setOrigin(0,1),this.world.add(S),d+=S.width}this.jumpMarker=new Ue(this,{x:s,y:t}),this.world.add(this.jumpMarker);var b=this.add.sprite(s,t,"triple_jump_atlas","first_jump_markers.png");b.setOrigin(.5,.545),this.world.add(b);var v=this.add.sprite(s+40*this.gameScale,t,"triple_jump_atlas","triplejump_jump_marker.png");v.setOrigin(.5),this.world.add(v);var O=s+a,w=this.add.rectangle(O,t,20*this.gameScale,r,16777215);this.world.add(w);var C=this.add.sprite(this.sandPitX,t,"triple_jump_atlas","triplejump_sandbox_start.png");C.setOrigin(0,.5),this.world.add(C);for(var T=this.sandPitX+C.width,M=0;M<20;M++){var k=this.add.sprite(T,t,"triple_jump_atlas","triplejump_sandbox.png");k.setOrigin(0,.5),this.world.add(k),T+=k.width}this.sandSkid=this.add.sprite(this.sandPitX,t,"triple_jump_atlas","triplejump_skid.png"),this.sandSkid.setOrigin(0,.5),this.sandSkid.setVisible(!1),this.world.add(this.sandSkid);var I=this.sys.settings.data.gameData||{};I.challenger&&(this.ghost=new Le(this,{data:{characterData:{id:I.challenger}},score:I.list[I.listIndex].friendScore,sandPitX:this.sandPitX}),this.world.add(this.ghost)),this.player=new We(this,{data:this.sys.settings.data.gameData.player,endRunX:i,firstJumpX:s,sandPitX:this.sandPitX}),this.player.on("endRun",this.OnPlayerEndRun,this),this.player.on("perfect",this.OnPlayerPerfect,this),this.player.on("foul",this.OnPlayerFoul,this),this.player.on("success",this.OnPlayerSuccess,this),this.world.add(this.player),this.minigameCamera&&this.minigameCamera.SetLookAt(this.player.x+this.minigameCamera.playerOffsetX,this.minigameCamera.cameraLookAt.y)}},{key:"CreateMinigameUI",value:function CreateMinigameUI(){return new ze(this)}},{key:"OnPlayerEndRun",value:function OnPlayerEndRun(){this.minigameUI.HideSpeedMeter()}},{key:"OnPlayerPerfect",value:function OnPlayerPerfect(){this.minigameUI.ShowPerfect(.125*-this.scale.width,.1*-this.scale.height)}},{key:"OnPlayerFoul",value:function OnPlayerFoul(){this.minigameUI.ShowFoul(),this.EndGame()}},{key:"OnPlayerSuccess",value:function OnPlayerSuccess(){this.EndGame()}},{key:"ShowJumpMarker",value:function ShowJumpMarker(e,t){this.jumpMarker.Show(e,t)}},{key:"OnFinalJump",value:function OnFinalJump(){this.jumpMarker.Hide(),this.minigameCamera.TweenOffset(3e3)}},{key:"ShowSkid",value:function ShowSkid(e,t){this.sandSkid.setPosition(e,t),this.sandSkid.setVisible(!0)}},{key:"HasWon",value:function HasWon(){return!this.ghost||this.player.x>this.ghost.x}},{key:"GetScore",value:function GetScore(){var e=this.sandSkid.visible?this.sandSkid.x:this.player.x,t=TripleJumpMinigame.MaxDistance,n=Math.max(e-this.sandPitX,0)/this.gameScale,i=TripleJumpMinigame.MaxPoints,r=TripleJumpMinigame.MinPoints;return Phaser.Math.Clamp(Math.floor(n/t*i),r,i)||r}},{key:"Replay",value:function Replay(){TripleJumpMinigame_get(TripleJumpMinigame_getPrototypeOf(TripleJumpMinigame.prototype),"Replay",this).call(this,TripleJumpMinigame)}}]),TripleJumpMinigame}();function PracticeScene_typeof(e){return(PracticeScene_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PracticeScene_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function PracticeScene_get(e,t,n){return(PracticeScene_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function PracticeScene_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PracticeScene_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function PracticeScene_setPrototypeOf(e,t){return(PracticeScene_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function PracticeScene_createSuper(i){return function(){var e,t=PracticeScene_getPrototypeOf(i);if(function PracticeScene_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=PracticeScene_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function PracticeScene_possibleConstructorReturn(e,t){return!t||"object"!==PracticeScene_typeof(t)&&"function"!=typeof t?function PracticeScene_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function PracticeScene_getPrototypeOf(e){return(PracticeScene_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}TripleJumpMinigame_defineProperty(He,"MaxDistance",2400),TripleJumpMinigame_defineProperty(He,"MaxPoints",200),TripleJumpMinigame_defineProperty(He,"MinPoints",10);var Ne=function(){!function PracticeScene_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PracticeScene_setPrototypeOf(e,t)}(PracticeScene,f);var e=PracticeScene_createSuper(PracticeScene);function PracticeScene(){return function PracticeScene_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PracticeScene),e.call(this,"PracticeScene")}return function PracticeScene_createClass(e,t,n){return t&&PracticeScene_defineProperties(e.prototype,t),n&&PracticeScene_defineProperties(e,n),e}(PracticeScene,[{key:"create",value:function create(){PracticeScene_get(PracticeScene_getPrototypeOf(PracticeScene.prototype),"create",this).call(this);var e=this.add.image(.5*this.scale.width,.5*this.scale.height,"menus_background");e.setOrigin(.5),this.world.add(e);var t=this.add.image(e.x-.5*e.width,e.y,"menus_background_slice_tile");t.displayWidth=.5*(this.scale.width-e.width),t.setOrigin(1,.5),this.world.add(t);var n=this.add.image(e.x+.5*e.width,e.y,"menus_background_slice_tile");n.displayWidth=t.displayWidth,n.setOrigin(0,.5),this.world.add(n);var i=new F(this,{y:.51*this.scale.height});this.world.add(i);var r={fontFamily:z.Instance.mainFont,fontSize:64*this.gameScale+"px",color:"#000000"};this.titleText=this.add.text(.5*this.scale.width,.185*this.scale.height,z.Instance.GetString("practice"),r),this.titleText.setOrigin(.5),this.world.add(this.titleText),this.topRightPanel=new M(this,this.dom,{domClass:"dom_panel top right",isScaled:!1}),this.homeButton=new C(this,this.topRightPanel,{x:-92*this.game.gameScale,frames:["button_home_unselected.png","button_home_selected.png"],atlas:"ui_atlas",id:"domui_CHARACTER_SELECT_home",title:"Home",domClass:"dom_button",callback:this.OnHomeButtonPressed,context:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_medium"}}),this.homeButton.Enable(),this.audioButton=new T(this,this.topRightPanel,{frames:["button_audio_on_unselected.png","button_audio_on_selected.png"],toggleOffFrames:["button_audio_off_unselected.png","button_audio_off_selected.png"],atlas:"ui_atlas",id:"domui_MENU_audio",title:"Audio",domClass:"dom_button",onToggle:this.OnAudioButtonPressed.bind(this),toggleActive:w.Instance.audioEnabled,toggleEvent:"audioEnabled",clickSound:{layer:"sfx_ui_shared",key:"ui_button_medium"}}),this.audioButton.Enable(),this.minigameButtons=[],this.weightliftingButton=this.CreateMinigameButton({x:.4*this.scale.width,y:.365*this.scale.height,callback:this.OnWeightliftingButtonPressed},Ze.ID.Weightlifting),this.swimmingButton=this.CreateMinigameButton({x:.615*this.scale.width,y:.365*this.scale.height,iconX:-10*this.gameScale,iconY:-10*this.gameScale,callback:this.OnSwimmingButtonPressed},Ze.ID.Swimming),this.climbingButton=this.CreateMinigameButton({x:.4*this.scale.width,y:.57*this.scale.height,iconX:10*this.gameScale,iconY:4*this.gameScale,callback:this.OnClimbingButtonPressed},Ze.ID.Climbing),this.trampolineButton=this.CreateMinigameButton({x:.615*this.scale.width,y:.57*this.scale.height,iconX:-32*this.gameScale,iconY:-6*this.gameScale,callback:this.OnTrampolineButtonPressed},Ze.ID.Trampoline),this.sprintButton=this.CreateMinigameButton({x:.4*this.scale.width,y:.775*this.scale.height,iconX:30*this.gameScale,iconY:12*this.gameScale,callback:this.OnSprintButtonPressed},Ze.ID.Sprint),this.tripleJumpButton=this.CreateMinigameButton({x:.615*this.scale.width,y:.775*this.scale.height,iconX:-50*this.gameScale,iconY:24*this.gameScale,callback:this.OnTripleJumpButtonPressed},Ze.ID.TripleJump),w.Instance.AddLayer("sfx_practice",{audioKeys:["game_select_appear"]}),this.StartSequence()}},{key:"update",value:function update(e,t){PracticeScene_get(PracticeScene_getPrototypeOf(PracticeScene.prototype),"update",this).call(this,e,t)}},{key:"StartSequence",value:function StartSequence(){for(var e=0;e<this.minigameButtons.length;e++){var t=this.minigameButtons[e];t.setScale(0);var n=100*e;this.tweens.add({targets:t,scaleX:{value:1,duration:250,ease:"Back.easeOut"},scaleY:{value:1,duration:250,ease:"Back.easeOut"},delay:n})}w.Instance.Play("sfx_practice","game_select_appear")}},{key:"CreateMinigameButton",value:function CreateMinigameButton(e,t){var n=Ze.Data[t],i=z.Instance.IsRightToLeft(),r=z.Instance.GetString(n.title),o=n.title.toLowerCase().replace(" ","_"),a="practice_button_"+o,s=new C(this,this.dom,{x:e.x,y:e.y,frames:[a+"_unselected.png",a+"_selected.png"],atlas:"practice_atlas",id:"domui_PRACTICE_"+o,domClass:"dom_button",title:r,callback:e.callback,context:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_medium"}});s.Enable();var l={fontFamily:z.Instance.mainFont,fontSize:32*this.gameScale+"px",color:"#000000"},c=(e.x>.5*this.scale.width?-154:-96)*this.gameScale,u=-46*this.gameScale,p=this.add.text(c,u,r,l);p.setOrigin(0),W.ClampTextToDimensions(p,260*this.gameScale,120*this.gameScale),s.add(p);var f=(e.x>.5*this.scale.width?.45*s.button.width:.45*-s.button.width)+(e.iconX||0),h=0*this.gameScale+(e.iconY||0),m=this.add.sprite(f,h,"practice_atlas",n.icon);m.setOrigin(.5),s.add(m),l.fontSize=20*this.gameScale+"px";var y=i?-80:4,g=i?32:92,d=(e.x>.5*this.scale.width?y:g)*this.gameScale,_=42*this.gameScale,P=this.add.text(d,_,z.Instance.GetString("highscore").replace("<num>",""),l);P.setOrigin(i?0:1,1),W.ClampTextToDimensions(P,150*this.gameScale,120*this.gameScale),s.add(P),l.fontSize=40*this.gameScale+"px";var S=v.Instance.GetData(o.replace("_",""))||0,b=this.add.text(d,_,S,l);return b.setOrigin(i?1:0,.9),s.add(b),this.minigameButtons.push(s),s}},{key:"OnHomeButtonPressed",value:function OnHomeButtonPressed(){var e=this.sys.settings.data.gameData||{};e.mode=Ze.Mode.Practice,s.Instance.StartLoadingScene(y,Xe,{gameData:e})}},{key:"OnWeightliftingButtonPressed",value:function OnWeightliftingButtonPressed(){this.StartMinigame(re)}},{key:"OnSwimmingButtonPressed",value:function OnSwimmingButtonPressed(){this.StartMinigame(he)}},{key:"OnClimbingButtonPressed",value:function OnClimbingButtonPressed(){this.StartMinigame(ve)}},{key:"OnTrampolineButtonPressed",value:function OnTrampolineButtonPressed(){this.StartMinigame(Ie)}},{key:"OnSprintButtonPressed",value:function OnSprintButtonPressed(){this.StartMinigame(Be)}},{key:"OnTripleJumpButtonPressed",value:function OnTripleJumpButtonPressed(){this.StartMinigame(He)}},{key:"StartMinigame",value:function StartMinigame(e){var t=this.sys.settings.data||{};t.additionalAssetBundles=["Minigame"],s.Instance.StartLoadingScene(y,e,t)}},{key:"Destroy",value:function Destroy(){w.Instance.DestroyLayer("sfx_practice"),PracticeScene_get(PracticeScene_getPrototypeOf(PracticeScene.prototype),"Destroy",this).call(this)}}]),PracticeScene}();function CharacterSelectCharacter_typeof(e){return(CharacterSelectCharacter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CharacterSelectCharacter_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function CharacterSelectCharacter_get(e,t,n){return(CharacterSelectCharacter_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function CharacterSelectCharacter_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CharacterSelectCharacter_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function CharacterSelectCharacter_setPrototypeOf(e,t){return(CharacterSelectCharacter_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function CharacterSelectCharacter_createSuper(i){return function(){var e,t=CharacterSelectCharacter_getPrototypeOf(i);if(function CharacterSelectCharacter_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=CharacterSelectCharacter_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function CharacterSelectCharacter_possibleConstructorReturn(e,t){return!t||"object"!==CharacterSelectCharacter_typeof(t)&&"function"!=typeof t?CharacterSelectCharacter_assertThisInitialized(e):t}(this,e)}}function CharacterSelectCharacter_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CharacterSelectCharacter_getPrototypeOf(e){return(CharacterSelectCharacter_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ve=function(){!function CharacterSelectCharacter_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CharacterSelectCharacter_setPrototypeOf(e,t)}(CharacterSelectCharacter,Phaser.GameObjects.Container);var o=CharacterSelectCharacter_createSuper(CharacterSelectCharacter);function CharacterSelectCharacter(e){var t;!function CharacterSelectCharacter_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CharacterSelectCharacter),(t=o.call(this,e)).backSpine=t.scene.add.spine(0,0,"character_select_light_sparks","spark_animation",!0),t.backSpine.setScale(t.scene.gameScale),t.add(t.backSpine),t.character=t.scene.add.sprite(0,0,"characters_atlas","large_character_wonder_woman.png"),t.character.setOrigin(.5),t.add(t.character),t.nameBackground=t.scene.add.polygon(20*t.scene.gameScale,222*t.scene.gameScale,[0,0,366*t.scene.gameScale,4*t.scene.gameScale,356*t.scene.gameScale,54*t.scene.gameScale,14*t.scene.gameScale,70*t.scene.gameScale],48639),t.nameBackground.setOrigin(.5),t.add(t.nameBackground);var n={fontFamily:z.Instance.mainFont,fontSize:44*t.scene.gameScale+"px",color:"#000000"},i=t.nameBackground.x,r=t.nameBackground.y-4*t.scene.gameScale;return t.nameText=t.scene.add.text(i,r,z.Instance.GetString("wonder_woman"),n),t.nameText.setOrigin(.5),t.add(t.nameText),t.elementPosition=new _(t.scene,CharacterSelectCharacter_assertThisInitialized(t),{x:.175,y:.51,local:!1}),t.wobbleTween=t.scene.tweens.add({targets:t.character,y:20*t.scene.gameScale,duration:4e3,ease:"Sine.easeInOut",yoyo:!0,repeat:-1}),t}return function CharacterSelectCharacter_createClass(e,t,n){return t&&CharacterSelectCharacter_defineProperties(e.prototype,t),n&&CharacterSelectCharacter_defineProperties(e,n),e}(CharacterSelectCharacter,[{key:"SetCharacter",value:function SetCharacter(e){this.character.setFrame(e.portrait),this.character.setOrigin(e.portraitX||.5,.5),this.nameText.setFontSize(44*this.scene.gameScale+"px"),this.nameText.setText(z.Instance.GetString(e.name_id)),W.ClampTextToDimensions(this.nameText,340*this.scene.gameScale,100*this.scene.gameScale),this.character.setScale(1,0),this.characterTween&&this.characterTween.remove(),this.characterTween=this.scene.tweens.add({targets:this.character,scaleY:1,duration:650,ease:"Back.easeOut"})}},{key:"destroy",value:function destroy(){this.scene&&(this.wobbleTween&&(this.wobbleTween.remove(),this.wobbleTween=null),this.characterTween&&(this.characterTween.remove(),this.characterTween=null),this.elementPosition&&(this.elementPosition.destroy(),this.elementPosition=null),CharacterSelectCharacter_get(CharacterSelectCharacter_getPrototypeOf(CharacterSelectCharacter.prototype),"destroy",this).call(this))}}]),CharacterSelectCharacter}();function CharacterSelectScene_typeof(e){return(CharacterSelectScene_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CharacterSelectScene_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function CharacterSelectScene_get(e,t,n){return(CharacterSelectScene_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function CharacterSelectScene_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CharacterSelectScene_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function CharacterSelectScene_setPrototypeOf(e,t){return(CharacterSelectScene_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function CharacterSelectScene_createSuper(i){return function(){var e,t=CharacterSelectScene_getPrototypeOf(i);if(function CharacterSelectScene_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=CharacterSelectScene_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function CharacterSelectScene_possibleConstructorReturn(e,t){return!t||"object"!==CharacterSelectScene_typeof(t)&&"function"!=typeof t?function CharacterSelectScene_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function CharacterSelectScene_getPrototypeOf(e){return(CharacterSelectScene_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xe=function(){!function CharacterSelectScene_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CharacterSelectScene_setPrototypeOf(e,t)}(CharacterSelectScene,f);var e=CharacterSelectScene_createSuper(CharacterSelectScene);function CharacterSelectScene(){return function CharacterSelectScene_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CharacterSelectScene),e.call(this,"CharacterSelectScene")}return function CharacterSelectScene_createClass(e,t,n){return t&&CharacterSelectScene_defineProperties(e.prototype,t),n&&CharacterSelectScene_defineProperties(e,n),e}(CharacterSelectScene,[{key:"create",value:function create(){CharacterSelectScene_get(CharacterSelectScene_getPrototypeOf(CharacterSelectScene.prototype),"create",this).call(this);var e={fontFamily:z.Instance.mainFont,fontSize:42*this.gameScale+"px",color:"#000000"},t=this.add.image(.5*this.scale.width,.5*this.scale.height,"menus_background");t.setOrigin(.5),this.world.add(t);var n=this.add.image(t.x-.5*t.width,t.y,"menus_background_slice_tile");n.displayWidth=.5*(this.scale.width-t.width),n.setOrigin(1,.5),this.world.add(n);var i=this.add.image(t.x+.5*t.width,t.y,"menus_background_slice_tile");i.displayWidth=n.displayWidth,i.setOrigin(0,.5),this.world.add(i),this.panel=new U(this),this.panel.on("onShown",this.OnPanelShown,this),this.world.add(this.panel),this.content=this.add.container(),this.content.setVisible(!1),this.world.add(this.content),this.character=new Ve(this),this.content.add(this.character),this.titleText=this.add.text(.55*this.scale.width,.22*this.scale.height,z.Instance.GetString("select_character").toUpperCase(),e),this.titleText.setOrigin(.5),this.content.add(this.titleText),this.selected=null,this.SelectCharacter(CharacterSelectScene.Characters.Gumball),this.topRightPanel=new M(this,this.dom,{domClass:"dom_panel top right",isScaled:!1}),this.homeButton=new C(this,this.topRightPanel,{x:-92*this.game.gameScale,frames:["button_home_unselected.png","button_home_selected.png"],atlas:"ui_atlas",id:"domui_CHARACTER_SELECT_home",title:"Home",domClass:"dom_button",callback:this.OnHomeButtonPressed,context:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_medium"}}),this.homeButton.Enable(),this.audioButton=new T(this,this.topRightPanel,{frames:["button_audio_on_unselected.png","button_audio_on_selected.png"],toggleOffFrames:["button_audio_off_unselected.png","button_audio_off_selected.png"],atlas:"ui_atlas",id:"domui_CHARACTER_SELECT_audio",title:"Audio",domClass:"dom_button",onToggle:this.OnAudioButtonPressed.bind(this),toggleActive:w.Instance.audioEnabled,toggleEvent:"audioEnabled",clickSound:{layer:"sfx_ui_shared",key:"ui_button_medium"}}),this.audioButton.Enable(),this.buttonRoots=[],this.buttonRootElements=[],this.CreateButtonGroup({x:.35,y:.5,buttons:[{title:"Wonder Woman",id:"wonder_woman",frames:["character_select_wonder_woman_unselected.png","character_select_wonder_woman_selected.png"],x:-4*this.gameScale,y:-90*this.gameScale,callback:this.OnWonderWomanButtonPressed},{title:"Bumblebee",id:"bumblebee",frames:["character_select_bumblebee_unselected.png","character_select_bumblebee_selected.png"],x:4*this.gameScale,y:90*this.gameScale,callback:this.OnBumblebeeButtonPressed}]}),this.CreateButtonGroup({x:.475,y:.5,buttons:[{title:"Robin",id:"robin",frames:["character_select_robin_unselected.png","character_select_robin_selected.png"],x:-4*this.gameScale,y:-90*this.gameScale,callback:this.OnRobinButtonPressed},{title:"Raven",id:"raven",frames:["character_select_raven_unselected.png","character_select_raven_selected.png"],x:4*this.gameScale,y:90*this.gameScale,callback:this.OnRavenButtonPressed}]}),this.CreateButtonGroup({x:.6,y:.5,buttons:[{title:"Anais",id:"anais",frames:["character_select_anais_unselected.png","character_select_anais_selected.png"],x:-4*this.gameScale,y:-90*this.gameScale,callback:this.OnAnaisButtonPressed},{title:"Gumball",id:"gumball",frames:["character_select_gumball_unselected.png","character_select_gumball_selected.png"],x:4*this.gameScale,y:90*this.gameScale,callback:this.OnGumballButtonPressed}]}),this.CreateButtonGroup({x:.725,y:.5,buttons:[{title:"Badgerclops",id:"badgerclops",frames:["character_select_badgerclops_unselected.png","character_select_badgerclops_selected.png"],x:-4*this.gameScale,y:-90*this.gameScale,callback:this.OnBadgerclopsButtonPressed},{title:"Mao Mao",id:"mao_mao",frames:["character_select_maomao_unselected.png","character_select_maomao_selected.png"],x:4*this.gameScale,y:90*this.gameScale,callback:this.OnMaoMaoButtonPressed}]}),this.CreateButtonGroup({x:.85,y:.5,buttons:[{title:"Onion",id:"onion",frames:["character_select_onion_unselected.png","character_select_onion_selected.png"],x:-4*this.gameScale,y:-90*this.gameScale,callback:this.OnOnionButtonPressed},{title:"Apple",id:"apple",frames:["character_select_apple_unselected.png","character_select_apple_selected.png"],x:4*this.gameScale,y:90*this.gameScale,callback:this.OnAppleButtonPressed}]}),this.bottomRightPanel=new M(this,this.dom,{y:.939,offsetX:-127,offsetY:-35,domClass:"dom_panel bottom right wide",isScaled:!1}),this.continueButton=new C(this,this.bottomRightPanel,{frames:["continue_unselected.png","continue_selected.png"],atlas:"ui_atlas",id:"domui_CHARACTER_SELECT_continue",title:"Continue",domClass:"dom_button",callback:this.OnContinueButtonPressed,context:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_forward"}}),this.continueButton.Enable(),w.Instance.AddLayer("sfx_char_select",{audioKeys:["char_select_appear","ui_char_select"]}),this.StartShowSequence()}},{key:"update",value:function update(e,t){CharacterSelectScene_get(CharacterSelectScene_getPrototypeOf(CharacterSelectScene.prototype),"update",this).call(this,e,t)}},{key:"StartShowSequence",value:function StartShowSequence(){this.content.setVisible(!1),this.continueButton.setVisible(!1),this.panel.Show(),w.Instance.Play("sfx_char_select","char_select_appear")}},{key:"OnPanelShown",value:function OnPanelShown(){this.content.setVisible(!0),this.continueButton.setVisible(!0),this.SelectCharacter(CharacterSelectScene.Characters.Gumball);for(var e=0;e<this.buttonRoots.length;e++)for(var t=this.buttonRoots[e],n=0;n<t.length;n++){var i=t.getAt(n);i.setScale(0);var r=65*(2*e+n);this.tweens.add({targets:i,scaleX:{value:1,duration:250,ease:"Back.easeOut"},scaleY:{value:1,duration:250,ease:"Back.easeOut"},delay:r})}this.continueTween=this.tweens.add({targets:this.continueButton,scaleX:1.1,scaleY:1.1,duration:1500,ease:"Quad.easeInOut",yoyo:!0,repeat:-1})}},{key:"CreateButtonGroup",value:function CreateButtonGroup(e){var t=this.add.container();this.content.add(t),this.buttonRoots.push(t);var n=new _(this,t,{x:e.x,y:e.y,local:!1});this.buttonRootElements.push(n);for(var i=0;i<e.buttons.length;i++){var r=e.buttons[i],o=this.CreateCharacterButton({title:r.title,id:r.id,frames:r.frames,x:r.x,y:r.y,callback:r.callback});t.add(o)}}},{key:"CreateCharacterButton",value:function CreateCharacterButton(e){var t=new C(this,this.buttonRoot,{x:e.x,y:e.y,frames:e.frames,atlas:"characterselect_atlas",id:"domui_CHARACTER_SELECT_"+e.id,domClass:"dom_button",title:e.title,callback:e.callback,context:this,clickSound:{layer:"sfx_char_select",key:"ui_char_select"}});return t.Enable(),t}},{key:"OnWonderWomanButtonPressed",value:function OnWonderWomanButtonPressed(){this.SelectCharacter(CharacterSelectScene.Characters.WonderWoman)}},{key:"OnBumblebeeButtonPressed",value:function OnBumblebeeButtonPressed(){this.SelectCharacter(CharacterSelectScene.Characters.Bumblebee)}},{key:"OnRobinButtonPressed",value:function OnRobinButtonPressed(){this.SelectCharacter(CharacterSelectScene.Characters.Robin)}},{key:"OnRavenButtonPressed",value:function OnRavenButtonPressed(){this.SelectCharacter(CharacterSelectScene.Characters.Raven)}},{key:"OnAnaisButtonPressed",value:function OnAnaisButtonPressed(){this.SelectCharacter(CharacterSelectScene.Characters.Anais)}},{key:"OnGumballButtonPressed",value:function OnGumballButtonPressed(){this.SelectCharacter(CharacterSelectScene.Characters.Gumball)}},{key:"OnBadgerclopsButtonPressed",value:function OnBadgerclopsButtonPressed(){this.SelectCharacter(CharacterSelectScene.Characters.Badgerclops)}},{key:"OnMaoMaoButtonPressed",value:function OnMaoMaoButtonPressed(){this.SelectCharacter(CharacterSelectScene.Characters.MaoMao)}},{key:"OnOnionButtonPressed",value:function OnOnionButtonPressed(){this.SelectCharacter(CharacterSelectScene.Characters.Onion)}},{key:"OnAppleButtonPressed",value:function OnAppleButtonPressed(){this.SelectCharacter(CharacterSelectScene.Characters.Apple)}},{key:"SelectCharacter",value:function SelectCharacter(e){this.selected=e,this.character.SetCharacter(this.selected)}},{key:"OnContinueButtonPressed",value:function OnContinueButtonPressed(){var e=this.sys.settings.data.gameData||{};e.player={characterData:{id:this.selected.id}};var t=this.sys.settings.data||{};e.mode==Ze.Mode.SummerGames?(t.additionalAssetBundles=["Minigame"],Ze.StartSummerGames(e)):s.Instance.StartLoadingScene(y,Ne,t)}},{key:"OnHomeButtonPressed",value:function OnHomeButtonPressed(){s.Instance.StartLoadingScene(y,Qe)}},{key:"Destroy",value:function Destroy(){if(w.Instance.DestroyLayer("sfx_char_select"),this.continueTween&&(this.continueTween.remove(),this.continueTween=null),this.buttonRootElements){for(var e=0;e<this.buttonRootElements.length;e++){this.buttonRootElements[e].destroy()}this.buttonRootElements.length=0}CharacterSelectScene_get(CharacterSelectScene_getPrototypeOf(CharacterSelectScene.prototype),"Destroy",this).call(this)}}]),CharacterSelectScene}();function MenuButton_typeof(e){return(MenuButton_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MenuButton_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MenuButton_get(e,t,n){return(MenuButton_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function MenuButton_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MenuButton_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function MenuButton_setPrototypeOf(e,t){return(MenuButton_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MenuButton_createSuper(i){return function(){var e,t=MenuButton_getPrototypeOf(i);if(function MenuButton_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MenuButton_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MenuButton_possibleConstructorReturn(e,t){return!t||"object"!==MenuButton_typeof(t)&&"function"!=typeof t?function MenuButton_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function MenuButton_getPrototypeOf(e){return(MenuButton_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function CharacterSelectScene_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(Xe,"Characters",Object.freeze({WonderWoman:{id:"wonder_woman",portrait:"large_character_wonder_woman.png",name_id:"wonder_woman"},Bumblebee:{id:"bumblebee",portrait:"large_character_bumblebee.png",name_id:"bumblebee"},Robin:{id:"robin",portrait:"large_character_robin.png",name_id:"robin"},Raven:{id:"raven",portrait:"large_character_raven.png",name_id:"raven"},Anais:{id:"anais",portrait:"large_character_anais.png",name_id:"anais"},Gumball:{id:"gumball",portrait:"large_character_gumball.png",name_id:"gumball"},Badgerclops:{id:"badgerclops",portrait:"large_character_badgerclops.png",name_id:"badgerclops"},MaoMao:{id:"maomao",portrait:"large_character_maomao.png",name_id:"mao_mao"},Onion:{id:"onion",portrait:"large_character_onion.png",name_id:"onion"},Apple:{id:"apple",portrait:"large_character_apple.png",name_id:"apple"}}));var Ye=function(){!function MenuButton_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MenuButton_setPrototypeOf(e,t)}(MenuButton,C);var r=MenuButton_createSuper(MenuButton);function MenuButton(e,t,n){var i;return function MenuButton_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MenuButton),(i=r.call(this,e,t,n)).inputRect=i.scene.add.rectangle(i.button.x,i.button.y,i.button.width,i.button.height,16711935,0),i.inputRect.setInteractive({useHandCursor:!0}),i.add(i.inputRect),i}return function MenuButton_createClass(e,t,n){return t&&MenuButton_defineProperties(e.prototype,t),n&&MenuButton_defineProperties(e,n),e}(MenuButton,[{key:"Enable",value:function Enable(e){MenuButton_get(MenuButton_getPrototypeOf(MenuButton.prototype),"Enable",this).call(this,e),this.inputRect.on("pointerout",this.OnInputOut,this),this.inputRect.on("pointerup",this.OnInputUp,this),this.inputRect.on("pointerdown",this.OnInputDown,this),this.desktop&&this.inputRect.on("pointerover",this.OnInputOver,this)}},{key:"Disable",value:function Disable(){MenuButton_get(MenuButton_getPrototypeOf(MenuButton.prototype),"Disable",this).call(this),this.inputRect.off("pointerout",this.OnInputOut,this),this.inputRect.off("pointerup",this.OnInputUp,this),this.inputRect.off("pointerdown",this.OnInputDown,this),this.inputRect.off("pointerover",this.OnInputOver,this)}},{key:"destroy",value:function destroy(){this.inputRect&&(this.inputRect.destroy(),this.inputRect=null),MenuButton_get(MenuButton_getPrototypeOf(MenuButton.prototype),"destroy",this).call(this)}}]),MenuButton}();function ChallengeScene_typeof(e){return(ChallengeScene_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ChallengeScene_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ChallengeScene_get(e,t,n){return(ChallengeScene_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function ChallengeScene_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ChallengeScene_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ChallengeScene_setPrototypeOf(e,t){return(ChallengeScene_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ChallengeScene_createSuper(i){return function(){var e,t=ChallengeScene_getPrototypeOf(i);if(function ChallengeScene_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=ChallengeScene_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function ChallengeScene_possibleConstructorReturn(e,t){return!t||"object"!==ChallengeScene_typeof(t)&&"function"!=typeof t?function ChallengeScene_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function ChallengeScene_getPrototypeOf(e){return(ChallengeScene_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ke=function(){!function ChallengeScene_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ChallengeScene_setPrototypeOf(e,t)}(ChallengeScene,f);var e=ChallengeScene_createSuper(ChallengeScene);function ChallengeScene(){return function ChallengeScene_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ChallengeScene),e.call(this,"ChallengeScene")}return function ChallengeScene_createClass(e,t,n){return t&&ChallengeScene_defineProperties(e.prototype,t),n&&ChallengeScene_defineProperties(e,n),e}(ChallengeScene,[{key:"create",value:function create(){ChallengeScene_get(ChallengeScene_getPrototypeOf(ChallengeScene.prototype),"create",this).call(this);var e={fontFamily:z.Instance.mainFont,fontSize:64*this.gameScale+"px",color:"#000000"},t=z.Instance.IsRightToLeft(),n=this.add.image(.5*this.scale.width,.5*this.scale.height,"menus_background");n.setOrigin(.5),this.world.add(n);var i=this.add.image(n.x-.5*n.width,n.y,"menus_background_slice_tile");i.displayWidth=.5*(this.scale.width-n.width),i.setOrigin(1,.5),this.world.add(i);var r=this.add.image(n.x+.5*n.width,n.y,"menus_background_slice_tile");r.displayWidth=i.displayWidth,r.setOrigin(0,.5),this.world.add(r),this.panel=new U(this),this.panel.on("onShown",this.OnPanelShown,this),this.world.add(this.panel),this.contentContainer=this.add.container(),this.contentContainer.setPosition(.5*this.scale.width,.5*this.scale.height),this.world.add(this.contentContainer);var o=this.add.polygon(0,.39*-this.scale.height,[20*this.gameScale,4*this.gameScale,474*this.gameScale,0*this.gameScale,478*this.gameScale,118*this.gameScale,0*this.gameScale,108*this.gameScale],48639);o.setOrigin(.5),this.contentContainer.add(o),this.titleText=this.add.text(0,.42*-this.scale.height,z.Instance.GetString("challenge"),e),this.titleText.setOrigin(.5),W.ClampTextToDimensions(this.titleText,460*this.gameScale,100*this.gameScale),this.contentContainer.add(this.titleText),e.fontSize=28*this.gameScale+"px",this.subtitleText=this.add.text(0,.349*-this.scale.height,z.Instance.GetString("can_you_beat_friend"),e),this.subtitleText.setOrigin(.5),W.ClampTextToDimensions(this.subtitleText,460*this.gameScale,100*this.gameScale),this.contentContainer.add(this.subtitleText),this.logo=this.add.sprite(.175*-this.scale.width,.375*-this.scale.height,"small_logo"),this.logo.setOrigin(.5),this.logo.setAngle(-15),this.contentContainer.add(this.logo);var a=this.sys.settings.data.gameData||{},s=a.challenger,l=.1725*this.scale.width,c=.244*-this.scale.height,u="badgerclops"==s,p="mini_"+s+(u?"_left":"")+".png";this.friendHead=this.add.sprite(l,c,"characters_atlas",p),this.friendHead.setOrigin(.5,1),this.friendHead.setAngle(-.5),u||this.friendHead.setScale(-1,1),this.contentContainer.add(this.friendHead);var f=this.add.sprite(16*this.gameScale,-62*this.gameScale,"popup_atlas","challenge_score_info_backing.png");f.setOrigin(.5),this.contentContainer.add(f);for(var h=[],m=0;m<a.list.length;m++){var y=a.list[m];h[y.id]=y.friendScore}this.minigameScoreTexts=[],this.CreateChallengeEntry(-324*this.gameScale,f.y-114*this.gameScale,Ze.ID.Weightlifting,h[0]),this.CreateChallengeEntry(16*this.gameScale,f.y-114*this.gameScale,Ze.ID.Swimming,h[1]),this.CreateChallengeEntry(-324*this.gameScale,f.y-32*this.gameScale,Ze.ID.Climbing,h[2]),this.CreateChallengeEntry(16*this.gameScale,f.y-32*this.gameScale,Ze.ID.Trampoline,h[3]),this.CreateChallengeEntry(-324*this.gameScale,f.y+50*this.gameScale,Ze.ID.Sprint,h[4]),this.CreateChallengeEntry(16*this.gameScale,f.y+50*this.gameScale,Ze.ID.TripleJump,h[5]);var g=20*this.gameScale,d=174*this.gameScale;this.totalBackground=this.add.polygon(g,d,[0,0,612*this.gameScale,7*this.gameScale,4*this.gameScale,26*this.gameScale],48639),this.totalBackground.setOrigin(.5),this.contentContainer.add(this.totalBackground),e.fontSize=64*this.gameScale+"px";var _=g-40*this.gameScale,P=d-12*this.gameScale,S=this.add.text(_,P,z.Instance.GetString("total").replace("<num>","").toUpperCase(),e);S.setOrigin(t?0:1,.75),W.ClampTextToDimensions(S,640*this.gameScale,160*this.gameScale),this.contentContainer.add(S),e.fontSize=112*this.gameScale+"px",e.color="#00bdff";var b=h.reduce(function(e,t){return e+t},0);this.totalText=this.add.text(_,P,b,e),this.totalText.setOrigin(t?1:0,.75),this.contentContainer.add(this.totalText),this.topRightPanel=new M(this,this.dom,{domClass:"dom_panel top right",isScaled:!1}),this.homeButton=new C(this,this.topRightPanel,{x:-92*this.game.gameScale,frames:["button_home_unselected.png","button_home_selected.png"],atlas:"ui_atlas",id:"domui_MENU_home",title:"Home",domClass:"dom_button",callback:this.OnHomeButtonPressed,context:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_medium"}}),this.homeButton.Enable(),this.audioButton=new T(this,this.topRightPanel,{frames:["button_audio_on_unselected.png","button_audio_on_selected.png"],toggleOffFrames:["button_audio_off_unselected.png","button_audio_off_selected.png"],atlas:"ui_atlas",id:"domui_MENU_audio",title:"Audio",domClass:"dom_button",onToggle:this.OnAudioButtonPressed.bind(this),toggleActive:w.Instance.audioEnabled,toggleEvent:"audioEnabled",clickSound:{layer:"sfx_ui_shared",key:"ui_button_medium"}}),this.audioButton.Enable(),this.startButton=new C(this,this.contentContainer,{x:0*this.gameScale,y:260*this.gameScale,frames:["play_summer_games_unselected.png","play_summer_games_selected.png"],atlas:"ui_atlas",id:"domui_MENU_start",domClass:"dom_button",title:"Start",callback:this.OnStartButtonPressed,context:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_play"}}),this.startButton.Enable(),this.startTween=this.tweens.add({targets:this.startButton,scaleX:1.1,scaleY:1.1,duration:1500,ease:"Quad.easeInOut",yoyo:!0,repeat:-1});var v={fontFamily:z.Instance.mainFont,fontSize:58*this.gameScale+"px",color:"#ffffff",align:"center",stroke:"#15ca15",strokeThickness:Math.ceil(12*this.gameScale),wordWrap:{width:200*this.gameScale}},O=this.add.text(10*this.gameScale,4*this.gameScale,z.Instance.GetString("start").toUpperCase(),v);O.setOrigin(.5),O.setAngle(-3),O.setLineSpacing(-12*this.gameScale),W.ClampTextToDimensions(O,320*this.gameScale,100*this.gameScale),this.startButton.add(O),w.Instance.AddLayer("sfx_ui_shared",{audioKeys:["ui_button_forward","ui_button_medium","ui_button_play"]}),w.Instance.AddLayer("sfx_menu",{audioKeys:["progress_appear"]}),this.StartShowSequence()}},{key:"update",value:function update(e,t){ChallengeScene_get(ChallengeScene_getPrototypeOf(ChallengeScene.prototype),"update",this).call(this,e,t)}},{key:"CreateChallengeEntry",value:function CreateChallengeEntry(e,t,n,i){var r=Ze.Data[n],o=z.Instance.IsRightToLeft(),a={fontFamily:z.Instance.mainFont,fontSize:32*this.gameScale+"px",color:"#000000"},s=this.add.text(e,t,z.Instance.GetString(r.title),a);s.setOrigin(0,0),W.ClampTextToDimensions(s,240*this.gameScale,80*this.gameScale),this.contentContainer.add(s),a.fontSize=20*this.gameScale+"px";var l=e+220*this.gameScale,c=t+60*this.gameScale,u=this.add.text(l,c,z.Instance.GetString("highscore").replace("<num>",""),a);u.setOrigin(o?0:1,.75),W.ClampTextToDimensions(u,450*this.gameScale,80*this.gameScale),this.contentContainer.add(u),a.fontSize=(o?40*this.gameScale:48)+"px",a.color="#ffffff";var p=this.add.text(l,c,i,a);p.setOrigin(o?1:0,.75),this.contentContainer.add(p),this.minigameScoreTexts.push(p)}},{key:"StartShowSequence",value:function StartShowSequence(){this.contentContainer.setVisible(!1),this.topRightPanel.setVisible(!1),this.panel.Show(),w.Instance.Play("sfx_menu","progress_appear")}},{key:"OnPanelShown",value:function OnPanelShown(){this.contentContainer.setVisible(!0),this.topRightPanel.setVisible(!0)}},{key:"OnHomeButtonPressed",value:function OnHomeButtonPressed(){s.Instance.StartLoadingScene(y,Qe)}},{key:"OnStartButtonPressed",value:function OnStartButtonPressed(){var e=this.sys.settings.data.gameData||{};e.mode=Ze.Mode.SummerGames,s.Instance.StartLoadingScene(y,Xe,{gameData:e})}},{key:"Destroy",value:function Destroy(){w.Instance.DestroyLayer("sfx_menu"),this.startTween&&(this.startTween.remove(),this.startTween=null),ChallengeScene_get(ChallengeScene_getPrototypeOf(ChallengeScene.prototype),"Destroy",this).call(this)}}]),ChallengeScene}();function MainMenu_typeof(e){return(MainMenu_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MainMenu_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MainMenu_get(e,t,n){return(MainMenu_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function MainMenu_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MainMenu_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function MainMenu_setPrototypeOf(e,t){return(MainMenu_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function MainMenu_createSuper(i){return function(){var e,t=MainMenu_getPrototypeOf(i);if(function MainMenu_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=MainMenu_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function MainMenu_possibleConstructorReturn(e,t){return!t||"object"!==MainMenu_typeof(t)&&"function"!=typeof t?function MainMenu_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function MainMenu_getPrototypeOf(e){return(MainMenu_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qe=function(){!function MainMenu_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MainMenu_setPrototypeOf(e,t)}(MainMenu,f);var e=MainMenu_createSuper(MainMenu);function MainMenu(){return function MainMenu_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MainMenu),e.call(this,"MainMenu")}return function MainMenu_createClass(e,t,n){return t&&MainMenu_defineProperties(e.prototype,t),n&&MainMenu_defineProperties(e,n),e}(MainMenu,[{key:"create",value:function create(){MainMenu_get(MainMenu_getPrototypeOf(MainMenu.prototype),"create",this).call(this);var e=this.add.image(.5*this.scale.width,.5*this.scale.height,"menus_background");e.setOrigin(.5),this.world.add(e);var t=this.add.image(e.x-.5*e.width,e.y,"menus_background_slice_tile");t.displayWidth=.5*(this.scale.width-e.width),t.setOrigin(1,.5),this.world.add(t);var n=this.add.image(e.x+.5*e.width,e.y,"menus_background_slice_tile");n.displayWidth=t.displayWidth,n.setOrigin(0,.5),this.world.add(n),this.leftContainer=this.add.container(),this.world.add(this.leftContainer),this.leftElement=new _(this,this.leftContainer,{x:0,y:.5,local:!1}),this.leftSpine=this.CreateSpine("left_trophy","left_side",this.leftContainer),this.rightContainer=this.add.container(),this.world.add(this.rightContainer),this.rightElement=new _(this,this.rightContainer,{x:1,y:.5,local:!1}),this.rightSpine=this.CreateSpine("right_trophy","right_side",this.rightContainer),this.midContainer=this.add.container(.5*this.scale.width,.5*this.scale.height),this.world.add(this.midContainer),this.midSpine=this.CreateSpine("middle_trophy","middle_animations",this.midContainer),this.logo=this.add.sprite(0,.3*-this.scale.height,"logo"),this.logo.setOrigin(.5),this.midContainer.add(this.logo),this.logoTween=this.tweens.add({targets:this.logo,y:this.logo.y+6*this.gameScale,duration:833,ease:"Linear",yoyo:!0,repeat:-1}),this.topRightPanel=new M(this,this.dom,{domClass:"dom_panel top right",isScaled:!1}),this.audioButton=new T(this,this.topRightPanel,{frames:["button_audio_on_unselected.png","button_audio_on_selected.png"],toggleOffFrames:["button_audio_off_unselected.png","button_audio_off_selected.png"],atlas:"ui_atlas",id:"domui_MENU_audio",title:"Audio",domClass:"dom_button",onToggle:this.OnAudioButtonPressed.bind(this),toggleActive:w.Instance.audioEnabled,toggleEvent:"audioEnabled",clickSound:{layer:"sfx_ui_shared",key:"ui_button_medium"}}),this.audioButton.Enable(),this.playButton=new Ye(this,this.world,{x:.5*this.scale.width,y:.55*this.scale.height,frames:["star_button_unselected.png","star_button_selected.png"],atlas:"mainmenu_atlas",id:"domui_MENU_play",domClass:"dom_button",title:"Play",callback:this.OnPlayButtonPressed,context:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_play"}}),this.playButton.Enable(),this.challengeButton=new Ye(this,this.world,{x:.5*this.scale.width,y:.33*this.scale.height,frames:["play_challenge_unselected.png"],atlas:"mainmenu_atlas",id:"domui_MENU_challenge",domClass:"dom_button",title:"Challenge",callback:this.OnChallengeButtonPressed,context:this,onOver:this.OnOverButton,onOverContext:this,onOut:this.OnOutButton,onOutContext:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_play"}}),this.challengeButton.setVisible(!1),this.challengeButton.Disable();var i={fontFamily:z.Instance.mainFont,fontSize:76*this.gameScale+"px",color:"#ffffff",align:"center",stroke:"#15ca15",strokeThickness:Math.ceil(12*this.gameScale),wordWrap:{width:380*this.gameScale}},r=this.add.text(4*this.gameScale,-30*this.gameScale,z.Instance.GetString("challenge"),i);r.setOrigin(.5),W.ClampTextToDimensions(r,380*this.gameScale,120*this.gameScale),this.challengeButton.add(r);var o={fontFamily:z.Instance.mainFont,fontSize:27*this.gameScale+"px",color:"#000000",align:"center",wordWrap:{width:380*this.gameScale}},a=this.add.text(10*this.gameScale,50*this.gameScale,z.Instance.GetString("challenge_desc"),o);a.setOrigin(.5,.4),W.ClampTextToDimensions(a,380*this.gameScale,200*this.gameScale),this.challengeButton.add(a),this.practiceButton=new Ye(this,this.world,{x:.5*this.scale.width,y:.79*this.scale.height,frames:["play_practice_unselected.png"],atlas:"mainmenu_atlas",id:"domui_MENU_practice",domClass:"dom_button",title:"Practice",callback:this.OnPracticeButtonPressed,context:this,onOver:this.OnOverButton,onOverContext:this,onOut:this.OnOutButton,onOutContext:this,clickSound:{layer:"sfx_ui_shared",key:"ui_button_play"}}),this.practiceButton.setVisible(!1),this.practiceButton.Disable(),i.fontSize=72*this.gameScale+"px",i.stroke="#3435ff",i.strokeThickness=Math.ceil(10*this.gameScale);var s=this.add.text(0,-24*this.gameScale,z.Instance.GetString("practice"),i);if(s.setOrigin(.5),s.setLineSpacing(-12*this.gameScale),W.ClampTextToDimensions(s,380*this.gameScale,100*this.gameScale),this.practiceButton.add(s),w.Instance.AddLayer("sfx_ui_shared",{audioKeys:["ui_button_forward","ui_button_medium","ui_button_play"]}),w.Instance.AddLayer("sfx_menu",{audioKeys:["titles"]}),w.Instance.AddLayer("music_layer",{audioKeys:["music_main_loop"],loop:!0}),w.Instance.Play("music_layer","music_main_loop",{restart:!1}),w.Instance.FadeVolume("music_layer","music_main_loop",this,1),gt.Instance.config.debug){this.bottomLeftPanel=new M(this,this.dom,{domClass:"dom_panel bottom left wide"}),this.debugChallengeButton=new C(this,this.bottomLeftPanel,{frames:["pause_play_unselected.png","pause_play_selected.png"],atlas:"ui_atlas",id:"domui_MENU_debug_challenge",domClass:"dom_button wide",title:"Debug Challenge",callback:this.OnDebugChallengeButtonPressed,context:this}),this.debugChallengeButton.Enable();var l=Object.assign({},i);l.fontSize=32*this.gameScale+"px",l.color="#ff00ff",l.stroke=0,l.strokeThickness=0;var c=this.add.text(0,0,"Challenge",l);c.setOrigin(.5),this.debugChallengeButton.add(c),this.debugResultsButton=new C(this,this.bottomLeftPanel,{y:-80*this.gameScale,frames:["pause_play_unselected.png","pause_play_selected.png"],atlas:"ui_atlas",id:"domui_MENU_debug_results",domClass:"dom_button wide",title:"Debug Results",callback:this.OnDebugResultsButtonPressed,context:this}),this.debugResultsButton.Enable(),(c=this.add.text(0,0,"Results",l)).setOrigin(.5),this.debugResultsButton.add(c)}this.StartSequence()}},{key:"update",value:function update(e,t){MainMenu_get(MainMenu_getPrototypeOf(MainMenu.prototype),"update",this).call(this,e,t)}},{key:"render",value:function render(){MainMenu_get(MainMenu_getPrototypeOf(MainMenu.prototype),"render",this).call(this,time,delta)}},{key:"CreateSpine",value:function CreateSpine(e,t,n){var i=n?0:.5*this.scale.width,r=n?0:.5*this.scale.height,o=this.add.spine(i,r,e,t,!0);return o.setScale(this.gameScale),n?n.add(o):this.world.add(o),o}},{key:"StartSequence",value:function StartSequence(){this.midContainer.setScale(0),this.playButton.setScale(0),this.playButton.Disable(),this.leftSpine.setPosition(-300*this.gameScale,this.leftSpine.y),this.rightSpine.setPosition(300*this.gameScale,this.rightSpine.y),this.showTimeline=this.tweens.createTimeline(),this.showTimeline.on("complete",this.OnStartComplete,this),this.showTimeline.add({targets:[this.leftSpine,this.rightSpine],x:{value:0,ease:"Quad.easeOut"},duration:650,offset:0}),this.showTimeline.add({targets:this.midContainer,scaleX:{value:1,ease:"Back.easeOut"},scaleY:{value:1,ease:"Back.easeOut"},duration:750,offset:250}),this.showTimeline.add({targets:this.playButton,scaleX:{value:1,ease:"Back.easeOut"},scaleY:{value:1,ease:"Back.easeOut"},duration:750,offset:250}),this.showTimeline.play(),w.Instance.Play("sfx_menu","titles")}},{key:"OnStartComplete",value:function OnStartComplete(){this.playButton.Enable(),this.playTween=this.tweens.add({targets:this.playButton,scaleX:1.1,scaleY:1.1,duration:1e3,ease:"Quad.easeInOut",yoyo:!0,repeat:-1})}},{key:"OnPlayButtonPressed",value:function OnPlayButtonPressed(){this.playButton.Disable(),this.playTween&&(this.playTween.remove(),this.playTween=null),this.playTween=this.tweens.add({targets:[this.playButton,this.midContainer],alpha:0,duration:750,ease:"Back.easeOut"}),this.challengeButton.setVisible(!0),this.challengeButton.setAlpha(0),this.challengeButton.setScale(0),this.challengeButton.Disable(),this.practiceButton.setVisible(!0),this.practiceButton.setAlpha(0),this.practiceButton.setScale(0),this.practiceButton.Disable(),this.gameTimeline=this.tweens.createTimeline(),this.gameTimeline.on("complete",this.OnGamesTweenComplete,this),this.gameTimeline.add({targets:this.challengeButton,alpha:{value:1,ease:"Back.easeOut"},scaleX:{value:1,ease:"Back.easeOut"},scaleY:{value:1,ease:"Back.easeOut"},duration:550,offset:0}),this.gameTimeline.add({targets:this.practiceButton,alpha:{value:1,ease:"Back.easeOut"},scaleX:{value:1,ease:"Back.easeOut"},scaleY:{value:1,ease:"Back.easeOut"},duration:550,offset:100}),this.gameTimeline.play(),w.Instance.FadeVolume("music_layer","music_main_loop",this,.5)}},{key:"OnGamesTweenComplete",value:function OnGamesTweenComplete(){this.challengeButton.Enable(),this.practiceButton.Enable(),this.playButton.setVisible(!1),this.midContainer.setVisible(!1)}},{key:"OnChallengeButtonPressed",value:function OnChallengeButtonPressed(){s.Instance.StartLoadingScene(y,Xe,{gameData:{mode:Ze.Mode.SummerGames}})}},{key:"OnPracticeButtonPressed",value:function OnPracticeButtonPressed(){s.Instance.StartLoadingScene(y,Xe,{gameData:{mode:Ze.Mode.Practice}})}},{key:"OnDebugChallengeButtonPressed",value:function OnDebugChallengeButtonPressed(){this.sys.settings.data.gameData={list:[{id:0,friendScore:78},{id:1,friendScore:78},{id:2,friendScore:78},{id:3,friendScore:78},{id:4,friendScore:78},{id:5,friendScore:78}],challenger:"gumball"},s.Instance.StartLoadingScene(y,Ke,this.sys.settings.data)}},{key:"OnDebugResultsButtonPressed",value:function OnDebugResultsButtonPressed(){this.sys.settings.data.gameData={list:[{id:0,score:200,friendScore:78},{id:1,score:200,friendScore:78},{id:2,score:200,friendScore:78},{id:3,score:200,friendScore:78},{id:4,score:200,friendScore:78},{id:5,score:200,friendScore:78}],player:{characterData:{id:"robin"}},challenger:"gumball"},s.Instance.StartLoadingScene(y,B,this.sys.settings.data)}},{key:"OnOverButton",value:function OnOverButton(e){e.button.setScale(.95)}},{key:"OnOutButton",value:function OnOutButton(e){e.button.setScale(1)}},{key:"Destroy",value:function Destroy(){w.Instance.DestroyLayer("sfx_menu"),this.logoTween&&(this.logoTween.remove(),this.logoTween=null),this.showTimeline&&(this.showTimeline.destroy(),this.showTimeline=null),this.playTween&&(this.playTween.remove(),this.playTween=null),this.gameTimeline&&(this.gameTimeline.destroy(),this.gameTimeline=null),this.leftElement&&(this.leftElement.destroy(),this.leftElement=null),this.rightElement&&(this.rightElement.destroy(),this.rightElement=null),MainMenu_get(MainMenu_getPrototypeOf(MainMenu.prototype),"Destroy",this).call(this)}}]),MainMenu}();function Encoder_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var qe=function(){function Encoder(){!function Encoder_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Encoder)}return function Encoder_createClass(e,t,n){return t&&Encoder_defineProperties(e.prototype,t),n&&Encoder_defineProperties(e,n),e}(Encoder,null,[{key:"Init",value:function Init(){var e=new Phaser.Math.RandomDataGenerator("aestas");Encoder.scramble=e.shuffle([0,1,2,3,4,5,6,7,8,9])}},{key:"Encode",value:function Encode(e){Encoder.scramble||Encoder.Init();for(var t="",n=0;n<e.length;n++){var i=e[n],r=Encoder.scramble[i];t=n%2==0?r+t:t+r}return t}},{key:"Decode",value:function Decode(e){Encoder.scramble||Encoder.Init();for(var t=Math.floor(.5*e.length-.5),n="",i=0;i<e.length;i++){var r=e[t+Math.ceil(.5*i)*(i%2==0?-1:1)];n+=Encoder.scramble.indexOf(parseInt(r))}return n}}]),Encoder}();function MinigameManager_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MinigameManager_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function Encoder_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(qe,"scramble",void 0);var Ze=function(){function MinigameManager(){!function MinigameManager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MinigameManager)}return function MinigameManager_createClass(e,t,n){return t&&MinigameManager_defineProperties(e.prototype,t),n&&MinigameManager_defineProperties(e,n),e}(MinigameManager,null,[{key:"GetURLData",value:function GetURLData(){try{var e=window.location!=window.parent.location?document.referrer:document.location.href,t=new URL(e).searchParams.get("mpd");if(!t)return;var n=qe.Decode(t),i=parseInt(n.substring(0,2));if(i>=MinigameManager.Characters.length)return;for(var r={challenger:MinigameManager.Characters[i],list:[],listIndex:0},o=0;o<MinigameManager.ID._count;o++){var a=2+4*o,s=parseInt(n.substring(a,1+a));if(s<0||s>=MinigameManager.ID._count)return;var l=1+a,c=parseInt(n.substring(l,3+l));if(c<0||200<c)return;r.list[o]={id:s,friendScore:c}}return r}catch(e){return void console.warn("Unable to get URL data:",e)}}},{key:"EncodeData",value:function EncodeData(e){for(var t=e.player.characterData.id,n=MinigameManager.Characters.indexOf(t).toString().padStart(2,"0"),i=0;i<e.list.length;i++){var r=e.list[i];n+=r.id+r.score.toString().padStart(3,"0")}return qe.Encode(n)}},{key:"GetRandomSeed",value:function GetRandomSeed(e){if(e.list){for(var t="",n=0;n<e.list.length;n++){t+=e.list[n].id}return t}}},{key:"GetMinigame",value:function GetMinigame(e){switch(e){case MinigameManager.ID.Weightlifting:return re;case MinigameManager.ID.Swimming:return he;case MinigameManager.ID.Climbing:return ve;case MinigameManager.ID.Trampoline:return Ie;case MinigameManager.ID.Sprint:return Be;case MinigameManager.ID.TripleJump:return He;default:return ve}}},{key:"StartSummerGames",value:function StartSummerGames(e){var t=e.list||[];if(t.length<=0){for(var n=0;n<MinigameManager.ID._count;n++)t[n]={id:n,score:0};W.ShuffleArray(t),e.list=t}e.listIndex=0,s.Instance.StartLoadingScene(y,MinigameManager.GetMinigame(t[0].id),{additionalAssetBundles:["Minigame"],gameData:e})}},{key:"StartNextMinigame",value:function StartNextMinigame(e){e.listIndex++;var t=Qe;if(e.listIndex<e.list.length){var n=e.list[e.listIndex].id;t=MinigameManager.GetMinigame(n)}s.Instance.StartLoadingScene(y,t,{additionalAssetBundles:t!=Qe?["Minigame"]:null,gameData:e})}}]),MinigameManager}();function IdentScene_typeof(e){return(IdentScene_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IdentScene_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function IdentScene_get(e,t,n){return(IdentScene_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function IdentScene_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=IdentScene_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function IdentScene_setPrototypeOf(e,t){return(IdentScene_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function IdentScene_createSuper(i){return function(){var e,t=IdentScene_getPrototypeOf(i);if(function IdentScene_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=IdentScene_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function IdentScene_possibleConstructorReturn(e,t){return!t||"object"!==IdentScene_typeof(t)&&"function"!=typeof t?function IdentScene_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function IdentScene_getPrototypeOf(e){return(IdentScene_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}MinigameManager_defineProperty(Ze,"Mode",Object.freeze({SummerGames:0,Practice:1})),MinigameManager_defineProperty(Ze,"ID",Object.freeze({Weightlifting:0,Swimming:1,Climbing:2,Trampoline:3,Sprint:4,TripleJump:5,_count:6})),MinigameManager_defineProperty(Ze,"Data",Object.freeze({0:{title:"weightlifting",priColour:10511103,secColour:11962111,icon:"weightlifting_icon_doughnut.png",tutorialMobile:"weightlifting_desc_mobile",tutorialDesktop:"weightlifting_desc_desktop",spineMobile:"mobile_weightlifting_sprint_and_triple_jump",spineDesktop:"weightlifting_space_bar"},1:{title:"swimming",priColour:3792164,secColour:6808919,icon:"swimming_icon_duck.png",tutorialMobile:"swimming_desc_mobile",tutorialDesktop:"swimming_desc_desktop",spineMobile:"mobile_swimming",spineDesktop:"swimming"},2:{title:"climbing",priColour:16762368,secColour:16765755,icon:"climbing_icon_latch.png",tutorialMobile:"climbing_desc_mobile",tutorialDesktop:"climbing_desc_desktop",spineMobile:"mobile_climbing",spineDesktop:"triple_jump_and_climbing_space_bar"},3:{title:"trampoline",priColour:3587307,secColour:6671600,icon:"trampoline_icon_spring.png",tutorialMobile:"trampoline_desc_mobile",tutorialDesktop:"trampoline_desc_desktop",spineMobile:"mobile_trampoline",spineDesktop:"trampoline"},4:{title:"sprint",priColour:16728824,secColour:16740090,icon:"sprint_icon_shoe.png",tutorialMobile:"sprint_desc_mobile",tutorialDesktop:"sprint_desc_desktop",spineMobile:"mobile_weightlifting_sprint_and_triple_jump",spineDesktop:"sprint"},5:{title:"triple_jump",priColour:16738068,secColour:16747082,icon:"triple_jump_icon_sand.png",tutorialMobile:"triple_jump_desc_mobile",tutorialDesktop:"triple_jump_desc_desktop",spineMobile:"mobile_weightlifting_sprint_and_triple_jump",spineDesktop:"triple_jump_and_climbing_space_bar"}})),MinigameManager_defineProperty(Ze,"Characters",Object.freeze(["wonder_woman","bumblebee","robin","raven","anais","gumball","badgerclops","maomao","onion","apple"]));var $e=function(){!function IdentScene_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IdentScene_setPrototypeOf(e,t)}(IdentScene,f);var e=IdentScene_createSuper(IdentScene);function IdentScene(){return function IdentScene_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,IdentScene),e.call(this,"IdentScene")}return function IdentScene_createClass(e,t,n){return t&&IdentScene_defineProperties(e.prototype,t),n&&IdentScene_defineProperties(e,n),e}(IdentScene,[{key:"init",value:function init(){IdentScene_get(IdentScene_getPrototypeOf(IdentScene.prototype),"init",this).call(this)}},{key:"create",value:function create(){IdentScene_get(IdentScene_getPrototypeOf(IdentScene.prototype),"create",this).call(this),this.logo=this.add.sprite(.5*this.scale.width,.5*this.scale.height,"ident_logo"),this.logo.setOrigin(.5),this.world.add(this.logo),this.StartSequence()}},{key:"update",value:function update(e,t){IdentScene_get(IdentScene_getPrototypeOf(IdentScene.prototype),"update",this).call(this,e,t)}},{key:"StartSequence",value:function StartSequence(){this.logo.setScale(.5),this.logo.setAlpha(0),this.showTimeline=this.tweens.createTimeline(),this.showTimeline.on("complete",this.OnIdentComplete,this),this.showTimeline.add({targets:this.logo,scaleX:{value:1,ease:"Quad.easeOut"},scaleY:{value:1,ease:"Quad.easeOut"},alpha:{value:1,ease:"Quad.easeInOut"},duration:2e3,offset:0}),this.showTimeline.add({targets:this.logo,alpha:{value:0,ease:"Quad.easeInOut"},duration:3e3,offset:2e3}),this.showTimeline.play()}},{key:"OnIdentComplete",value:function OnIdentComplete(){var e=Ze.GetURLData();e?s.Instance.StartLoadingScene(y,Ke,{gameData:e}):s.Instance.StartLoadingScene(y,Qe)}}]),IdentScene}();function Boot_typeof(e){return(Boot_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Boot_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Boot_get(e,t,n){return(Boot_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function Boot_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Boot_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Boot_setPrototypeOf(e,t){return(Boot_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function Boot_createSuper(i){return function(){var e,t=Boot_getPrototypeOf(i);if(function Boot_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=Boot_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function Boot_possibleConstructorReturn(e,t){return!t||"object"!==Boot_typeof(t)&&"function"!=typeof t?function Boot_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function Boot_getPrototypeOf(e){return(Boot_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var et=function(){!function Boot_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Boot_setPrototypeOf(e,t)}(Boot,f);var t=Boot_createSuper(Boot);function Boot(){var e;return function Boot_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Boot),(e=t.call(this,"Boot")).loading=!1,e.targetAspectRatio=gt.Instance.maxWidth/gt.Instance.maxHeight,e.fallbackAspectTimer=.5,e}return function Boot_createClass(e,t,n){return t&&Boot_defineProperties(e.prototype,t),n&&Boot_defineProperties(e,n),e}(Boot,[{key:"init",value:function init(){Boot_get(Boot_getPrototypeOf(Boot.prototype),"init",this).call(this)}},{key:"preload",value:function preload(){switch(Boot_get(Boot_getPrototypeOf(Boot.prototype),"preload",this).call(this),this.load.image("loading_bar_back",W.GetAssetURL()+"images/loading/loading_bar_back.png"),this.load.image("loading_bar_fill",W.GetAssetURL()+"images/loading/loading_bar_fill.png"),this.load.image("loading_bar_overlay",W.GetAssetURL()+"images/loading/loading_bar_overlay.png"),this.load.image("loading_bar_overlay",W.GetAssetURL()+"images/loading/loading_bar_overlay.png"),this.game.renderer.type==Phaser.WEBGL?this.load.scenePlugin("SpineWebGLPlugin",W.GetGameDir()+"lib/plugins/SpineWebGLPlugin.js"):this.game.renderer.type==Phaser.CANVAS&&this.load.scenePlugin("SpineCanvasPlugin",W.GetGameDir()+"lib/plugins/SpineCanvasPlugin.js"),this.load.json("assets",W.GetAssetURL()+"data/asset_pack.json"),this.load.json("localisation",W.GetAssetURL()+"data/localisation.json"),this.load.json("subtitles",W.GetAssetURL()+"data/subtitles.json"),this.load.json("config",W.GetGameDir()+"config.json"),this.load.json("domJSON",W.GetAssetURL()+"data/dom_classes.json"),this.gameScale){case 1:this.load.image("menus_background",W.GetAssetURL()+"images/menu/menus_background.png"),this.load.image("menus_background_slice_tile",W.GetAssetURL()+"images/menu/menus_background_slice_tile.png"),this.load.image("ident_logo",W.GetAssetURL()+"images/loading/ident_logo.jpg");break;case.75:this.load.image("menus_background",W.GetAssetURL()+"images/menu/menus_background.png"),this.load.image("menus_background_slice_tile",W.GetAssetURL()+"images/menu/menus_background_slice_tile.png"),this.load.image("ident_logo",W.GetAssetURL()+"images/loading/ident_logo_0_75.jpg")}}},{key:"create",value:function create(){Boot_get(Boot_getPrototypeOf(Boot.prototype),"create",this).call(this),this.input.on("pointerdown",this.ResumeAudioContext,this),this.game.domContainer.style.position="absolute",this.game.domContainer.style.transformOrigin="left top",this.game.domContainer.style.pointerEvents="none",gt.Instance.config=this.cache.json.get("config"),gt.Instance.config.offline&&"serviceWorker"in navigator&&(navigator.serviceWorker.register("service-worker.js",{scope:"./"}).then(function(e){console.log("Service Worker Registered")}),navigator.serviceWorker.ready.then(function(e){console.log("Service Worker Ready")})),l.Instance.SetSubtitlesData(this.game.cache.json.get("subtitles")),z.Instance.SetLocalisationData(this.game.cache.json.get("localisation")),b.LoadData(this,"domJSON")}},{key:"update",value:function update(e,t){if(Boot_get(Boot_getPrototypeOf(Boot.prototype),"update",this).call(this,e,t),!this.loading){if(this.fallbackAspectTimer-=.001*t,(gt.Instance.isLandscape?this.game.scale.parentSize.aspectRatio>this.targetAspectRatio:this.game.scale.parentSize.aspectRatio<this.targetAspectRatio)&&0<this.fallbackAspectTimer)return;this.loading=!0,s.Instance.StartScene($e)}}},{key:"ResumeAudioContext",value:function ResumeAudioContext(){this.game.sound.context&&"suspended"===this.game.sound.context.state&&setTimeout(this.game.sound.context.resume,10)}},{key:"Destroy",value:function Destroy(){Boot_get(Boot_getPrototypeOf(Boot.prototype),"Destroy",this).call(this),this.input.off("pointerdown",this.ResumeAudioContext,this)}}]),Boot}();function Brim_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tt=function(){function Brim(e,t){if(!function Brim_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Brim),this.visible=!1,e){var n=this.GetSpec();n&&(this.height=n[0],window.addEventListener("resize",this.OnResize.bind(this)),this.brimElement=document.createElement("div"),this.brimElement.id="brim",t.appendChild(this.brimElement),this.OnResize())}}return function Brim_createClass(e,t,n){return t&&Brim_defineProperties(e.prototype,t),n&&Brim_defineProperties(e,n),e}(Brim,[{key:"GetSpec",value:function GetSpec(){for(var e=[[320,480,2,"iPhone 4"],[320,568,2,"iPhone 5 or 5s"],[375,667,2,"iPhone 6"],[414,736,3,"iPhone 6 plus"]],t=0;t<e.length;t++){var n=e[t];if(window.screen.height==n[0]&&window.screen.width==n[1]||window.screen.width==n[0]&&window.screen.height==n[1])return n}return[Math.min(window.screen.height,window.screen.width),Math.max(window.screen.height,window.screen.width),3,"Unknown device"]}},{key:"ShowBrim",value:function ShowBrim(){this.visible=!0,this.brimElement.style.visibility="visible",this.brimElement.style.height="999999px",this.brimElement.style.pointerEvents="all"}},{key:"ShowGame",value:function ShowGame(){this.visible=!1,this.brimElement.style.visibility="hidden",this.brimElement.style.height=this.height+1+"px",this.brimElement.style.pointerEvents="none"}},{key:"OnResize",value:function OnResize(){window.innerHeight>window.innerWidth||window.innerHeight==this.height?this.ShowGame():this.ShowBrim(),window.scrollTo(0,0)}}]),Brim}();function DeviceManager_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var nt=function(){function DeviceManager(){!function DeviceManager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DeviceManager),this.kindle=/Kindle/i.test(platform.ua)||/Silk/i.test(platform.ua),this.ipadOS=navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints,this.iOS="iOS"==platform.os.family||this.ipadOS,this.ipad="iPad"==platform.product||this.ipadOS,this.android="Android"==platform.os.family,this.iphone="iPhone"==platform.product,this.ipad2=this.IsIpad2(),this.disableFullscreen=navigator.userAgent.match(/SM-T280/),this.mobile=this.iOS||this.android||this.kindle,this.desktop=!this.mobile,this.isWKWebView=this.IsWKWebView(),this.displayBrim=this.ShouldDisplayBrim(),this.renderMode=Phaser.CANVAS,this.gameScale=1,this.mobile&&(this.gameScale=.75,this.ipad2&&(this.gameScale=.5))}return function DeviceManager_createClass(e,t,n){return t&&DeviceManager_defineProperties(e.prototype,t),n&&DeviceManager_defineProperties(e,n),e}(DeviceManager,[{key:"IsIpad2",value:function IsIpad2(){return"iPad"==platform.product&&1===window.devicePixelRatio&&(768===window.screen.height&&1024===window.screen.width||1024===window.screen.height&&768===window.screen.width)}},{key:"IsWKWebView",value:function IsWKWebView(){return!(!window.webkit||!window.webkit.messageHandlers)}},{key:"ShouldDisplayBrim",value:function ShouldDisplayBrim(){return"iPad"!=platform.product&&!this.isWKWebView&&("iOS"==platform.os.family&&8<parseInt(platform.os.version,10)||-1!=platform.ua.indexOf("like Mac OS X"))&&"standalone"in window.navigator&&!window.navigator.standalone}}]),DeviceManager}();function DeviceOrientationChecker_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var it=function(){function DeviceOrientationChecker(e){!function DeviceOrientationChecker_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DeviceOrientationChecker),this.isValidOrientation=!1,this.isLandscape=e,this.rotateElement=document.createElement("div"),this.rotateElement.id="rotate-screen",this.rotateElement.className="hidden",this.rotateElement.style.textIndent="-100%",this.rotateElement.innerHTML="please rotate your device",W.GetRootElement().appendChild(this.rotateElement),this.onValidOrientation=null,window.addEventListener("resize",this.OnResize.bind(this)),window.addEventListener("orientationchange",this.CheckOrientation.bind(this))}return function DeviceOrientationChecker_createClass(e,t,n){return t&&DeviceOrientationChecker_defineProperties(e.prototype,t),n&&DeviceOrientationChecker_defineProperties(e,n),e}(DeviceOrientationChecker,[{key:"CheckOrientation",value:function CheckOrientation(){var e=this.isValidOrientation;this.isValidOrientation=this.isLandscape?window.innerWidth>window.innerHeight:window.innerWidth<window.innerHeight,this.rotateElement.className=this.isValidOrientation?"hidden":"visible",this.isValidOrientation&&this.onValidOrientation&&this.onValidOrientation.call(),e!=this.isValidOrientation&&(this.isValidOrientation?gt.Instance.Resume():gt.Instance.Pause())}},{key:"OnResize",value:function OnResize(){setTimeout(function(){gt.Instance.deviceOrientationChecker.Resize()},50)}},{key:"Resize",value:function Resize(){var e=window.innerWidth,t=window.innerHeight;this.rotateElement.style.width=e+"px",this.rotateElement.style.height=t+"px",this.CheckOrientation()}}]),DeviceOrientationChecker}(),rt=n(1);function webFontFile_typeof(e){return(webFontFile_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function webFontFile_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function webFontFile_setPrototypeOf(e,t){return(webFontFile_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function webFontFile_createSuper(i){return function(){var e,t=webFontFile_getPrototypeOf(i);if(function webFontFile_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=webFontFile_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function webFontFile_possibleConstructorReturn(e,t){return!t||"object"!==webFontFile_typeof(t)&&"function"!=typeof t?function webFontFile_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function webFontFile_getPrototypeOf(e){return(webFontFile_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bo(e,t){return st(e)?(t=e).hasOwnProperty("config")?(t.type="webfont",t.url=""):t={key:"webfont",type:"webfont",url:"",config:t}:t={type:"webfont",url:"",key:e,config:t},this.addFile(new at(this,t)),this}var ot=Phaser.Loader.FILE_POPULATED,at=function(){!function webFontFile_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&webFontFile_setPrototypeOf(e,t)}(WebFontFile,Phaser.Loader.File);var n=webFontFile_createSuper(WebFontFile);function WebFontFile(e,t){return function webFontFile_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WebFontFile),n.call(this,e,t)}return function webFontFile_createClass(e,t,n){return t&&webFontFile_defineProperties(e.prototype,t),n&&webFontFile_defineProperties(e,n),e}(WebFontFile,[{key:"load",value:function load(){if(this.state===ot)this.loader.nextFile(this,!0);else{var e=this.config;e.active=this.onLoad.bind(this),e.inactive=this.onError.bind(this),e.fontactive=this.onFontActive.bind(this),e.fontinactive=this.onFontInactive.bind(this),window.WebFont?window.WebFont.load(e):rt.load(e)}}},{key:"onLoad",value:function onLoad(){this.loader.nextFile(this,!0)}},{key:"onError",value:function onError(){console.log(this),this.loader.nextFile(this,!1)}},{key:"onFontActive",value:function onFontActive(e){this.loader.emit("webfontactive",this,e)}},{key:"onFontInactive",value:function onFontInactive(e){this.loader.emit("webfontinactive",this,e)}}]),WebFontFile}(),st=Phaser.Utils.Objects.IsPlainObject;function rexwebfontloaderplugin_typeof(e){return(rexwebfontloaderplugin_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rexwebfontloaderplugin_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rexwebfontloaderplugin_setPrototypeOf(e,t){return(rexwebfontloaderplugin_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function rexwebfontloaderplugin_createSuper(i){return function(){var e,t=rexwebfontloaderplugin_getPrototypeOf(i);if(function rexwebfontloaderplugin_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=rexwebfontloaderplugin_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function rexwebfontloaderplugin_possibleConstructorReturn(e,t){return!t||"object"!==rexwebfontloaderplugin_typeof(t)&&"function"!=typeof t?function rexwebfontloaderplugin_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function rexwebfontloaderplugin_getPrototypeOf(e){return(rexwebfontloaderplugin_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lt=function(){!function rexwebfontloaderplugin_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rexwebfontloaderplugin_setPrototypeOf(e,t)}(WebFontLoaderPlugin,Phaser.Plugins.BasePlugin);var n=rexwebfontloaderplugin_createSuper(WebFontLoaderPlugin);function WebFontLoaderPlugin(e){var t;return function rexwebfontloaderplugin_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WebFontLoaderPlugin),t=n.call(this,e),e.registerFileType("rexWebFont",bo),t}return function rexwebfontloaderplugin_createClass(e,t,n){return t&&rexwebfontloaderplugin_defineProperties(e.prototype,t),n&&rexwebfontloaderplugin_defineProperties(e,n),e}(WebFontLoaderPlugin,[{key:"addToScene",value:function addToScene(e){e.sys.load.rexWebFont=bo}}]),WebFontLoaderPlugin}(),ct=function murmurhash3_32_gc(e,t){var n,i,r,o,a,s,l,c;for(n=3&e.length,i=e.length-n,r=t,a=3432918353,s=461845907,c=0;c<i;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,r=27492+(65535&(o=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return r^=e.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0};function NineSlice_typeof(e){return(NineSlice_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NineSlice_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function NineSlice_get(e,t,n){return(NineSlice_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function NineSlice_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=NineSlice_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function NineSlice_setPrototypeOf(e,t){return(NineSlice_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function NineSlice_createSuper(i){return function(){var e,t=NineSlice_getPrototypeOf(i);if(function NineSlice_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=NineSlice_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function NineSlice_possibleConstructorReturn(e,t){return!t||"object"!==NineSlice_typeof(t)&&"function"!=typeof t?NineSlice_assertThisInitialized(e):t}(this,e)}}function NineSlice_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NineSlice_getPrototypeOf(e){return(NineSlice_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function io(e){return{tl:{x:e.topLeft.width,y:e.topLeft.height},tr:{x:e.topRight.width,y:e.topRight.height},bl:{x:e.bottomLeft.width,y:e.bottomLeft.height},br:{x:e.bottomRight.width,y:e.bottomRight.height}}}var ut="updatesafebounds",pt=function(){!function NineSlice_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NineSlice_setPrototypeOf(e,t)}(NineSlice,Phaser.GameObjects.RenderTexture);var f=NineSlice_createSuper(NineSlice);function NineSlice(e,t){var n,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;!function NineSlice_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,NineSlice),(n=f.call(this,e,0,0,32,32)).initFrames=n.initFrames.bind(NineSlice_assertThisInitialized(n)),n.getUsableBounds=n.getUsableBounds.bind(NineSlice_assertThisInitialized(n)),n.drawFrames=n.drawFrames.bind(NineSlice_assertThisInitialized(n)),n.resize=n.resize.bind(NineSlice_assertThisInitialized(n)),n.updateSafeBounds=n.updateSafeBounds.bind(NineSlice_assertThisInitialized(n)),n.enableDebugDraw=n.enableDebugDraw.bind(NineSlice_assertThisInitialized(n)),n.events=new Phaser.Events.EventEmitter,n.sliceConfig=function defaultSliceConfig(e){var t=e;if("number"==typeof t.sourceLayout.width){var n=t.sourceLayout,i=n.width,r=n.height;t.sourceLayout={topLeft:{width:i,height:r}}}var o=t.sourceLayout;o.topRight=o.topRight||o.topLeft,o.bottomRight=o.bottomRight||o.topLeft,o.bottomLeft=o.bottomLeft||o.topLeft;var a=Math.max(o.topLeft.height,o.topRight.height),s=Math.max(o.topRight.width,o.bottomRight.width),l=Math.max(o.bottomLeft.height,o.bottomRight.height),c=Math.max(o.topLeft.width,o.bottomLeft.width);if(t.safeOffsets||(t.safeOffsets={top:a,right:s,bottom:l,left:c}),void 0===t.minSizing||!1!==t.minSizing){var u=t.safeOffsets;t.minSizing={width:u?Math.max(u.left+u.right,c+s):c+s,height:u?Math.max(u.top+u.bottom,a+l):a+l}}else t.minSizing=!1;return t}(t),n._safeBounds=new Phaser.Geom.Rectangle;var r=n.sliceConfig,o=r.sourceKey,a=r.sourceFrame;if(n.sourceTex=e.sys.textures.get(n.sliceConfig.sourceKey),!o)throw new Error("NineSlice requires a texture sourceKey to be specified.");if(!n.sourceTex||"__MISSING"===n.sourceTex.key)throw new Error("Expected source image ".concat(o," not found."));n._framePrefix="".concat(ct(JSON.stringify({sourceKey:o,sourceFrame:a},404))),n.mkFrameName=function(e){return"".concat(n._framePrefix,"-").concat(e)},n._frameCache={};var s="string"==typeof a||"number"==typeof a?a:"__BASE";n.sourceFrame=n.sourceTex.get(s),n.initFrames(),n._initalized=!0;var l=i.x,c=i.y,u=i.width,p=i.height;return n.setPosition(l||0,c||0),n.resize(u||n.sourceFrame.width,p||n.sourceFrame.height),n.updateSafeBounds(),n}return function NineSlice_createClass(e,t,n){return t&&NineSlice_defineProperties(e.prototype,t),n&&NineSlice_defineProperties(e,n),e}(NineSlice,[{key:"updateSafeBounds",value:function updateSafeBounds(){if(this._initalized){var e=this.sliceConfig.safeOffsets,t=e.top,n=e.right,i=e.bottom,r=e.left,o=this.x+r,a=this.y+t,s=this.width-(r+n),l=this.height-(t+i),c=this._safeBounds,u=c.x,p=c.y,f=c.width,h=c.height;o===u&&a===p&&s===f&&l===h||(this._safeBounds.setTo(this.x+r,this.y+t,this.width-(r+n),this.height-(t+i)),this.events.emit(ut,this,this._safeBounds)),this._g&&(this._g.lineStyle(1,65280),this._g.strokeRectShape(this._safeBounds))}}},{key:"resize",value:function resize(e,t){var n=(this.sliceConfig||{}).minSizing,i=n?Math.max(n.height,t):t,r=n?Math.max(n.width,e):e;if(t<i||e<r){var o="Attempted to set NineSlice size less than minimum (".concat(e,"x").concat(t,").");console.error(o)}NineSlice_get(NineSlice_getPrototypeOf(NineSlice.prototype),"resize",this).call(this,r,i),this._initalized&&(this._g&&this._g.clear(),this.drawFrames(),this.updateSafeBounds())}},{key:"initFrames",value:function initFrames(){function C4a(e,t,n,i,r){var o=a.mkFrameName(e);s.has(o)?a._frameCache[e]=s.frames[o]:a._frameCache[e]=s.add(o,0,l+t,c+n,i,r)}var a=this,s=this.sourceTex,e=this.sourceFrame.width,t=this.sourceFrame.height,l=this.sourceFrame.cutX,c=this.sourceFrame.cutY,n=io(this.sliceConfig.sourceLayout);C4a("topLeft",0,0,n.tl.x,n.tl.y),C4a("topRight",e-n.tr.x,0,n.tr.x,n.tr.y),C4a("bottomRight",e-n.br.x,t-n.br.y,n.br.x,n.br.y),C4a("bottomLeft",0,t-n.bl.y,n.bl.x,n.bl.y),C4a("topMiddle",n.tl.x,0,e-(n.tl.x+n.tr.x),Math.max(n.tl.y,n.tr.y)),C4a("bottomMiddle",n.bl.x,t-Math.max(n.bl.y,n.br.y),e-(n.bl.x+n.br.x),Math.max(n.bl.y,n.br.y)),C4a("leftMiddle",0,n.tl.y,Math.max(n.tl.x,n.bl.x),t-(n.tl.y+n.bl.y)),C4a("rightMiddle",e-Math.max(n.tr.x,n.br.x),n.tr.y,Math.max(n.tr.x,n.br.x),t-n.tr.y-n.br.y);var i=Math.min(n.tl.x,n.bl.x),r=Math.min(n.tl.y,n.tr.y);C4a("center",i,r,e-i-Math.min(n.tr.x,n.br.x),t-r-Math.min(n.br.y,n.bl.y))}},{key:"getUsableBounds",value:function getUsableBounds(){return this._initalized?this._safeBounds:null}},{key:"drawFrames",value:function drawFrames(){var l=this;if(this._initalized){this._g&&this._g.lineStyle(1,16711680);var e=io(this.sliceConfig.sourceLayout),t=this._frameCache,n=function draw(e,t,n,i,r){if(0<i&&0<r){l._g&&l._g.strokeRect(l.x+t,l.y+n,i,r);var o=l.scene.make.image({key:l.sourceTex.key,frame:e.name,x:0,y:0}),a=i/e.width,s=r/e.height;o.setOrigin(0).setScale(a,s),l.draw(o,t,n),o.destroy()}},i=Math.min(e.tl.x,e.bl.x),r=Math.min(e.tr.x,e.br.x),o=Math.min(e.tl.y,e.tr.y),a=Math.min(e.bl.y,e.br.y);this.clear(),n(t.center,i,o,this.width-i-r,this.height-o-a),n(t.topMiddle,e.tl.x,0,this.width-e.tl.x-e.tr.x,t.topMiddle.height),n(t.bottomMiddle,e.bl.x,this.height-t.bottomMiddle.height,this.width-e.bl.x-e.br.x,t.bottomMiddle.height),n(t.leftMiddle,0,e.tl.y,t.leftMiddle.width,this.height-e.tl.y-e.bl.y),n(t.rightMiddle,this.width-e.tr.x,e.tr.y,t.rightMiddle.width,this.height-e.tr.y-e.br.y),n(t.topLeft,0,0,e.tl.x,e.tl.y),n(t.topRight,this.width-e.tr.x,0,e.tr.x,e.tr.y),n(t.bottomRight,this.width-e.br.x,this.height-e.br.y,e.br.x,e.br.y),n(t.bottomLeft,0,this.height-e.bl.y,e.bl.x,e.bl.y)}}},{key:"enableDebugDraw",value:function enableDebugDraw(e){var t=!(0<arguments.length&&void 0!==e)||e;this._g&&this._g.clear(),this._g=t?this.scene.add.graphics(this.x,this.y):null,this.drawFrames(),this.updateSafeBounds()}},{key:"y",get:function get(){return this._y},set:function set(e){this._y!==e&&(this._g&&(this._g.clear(),this.drawFrames()),this._y=e,this.updateSafeBounds())}},{key:"x",get:function get(){return this._x},set:function set(e){this._x!==e&&(this._g&&(this._g.clear(),this.drawFrames()),this._x=e,this.updateSafeBounds())}}]),NineSlice}(),ft=function processsOffsetArray(e){switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e}throw new Error("Received ${arr.length} offset values, expected 1 to 4.")};function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function _unsupportedIterableToArray(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Plugin_typeof(e){return(Plugin_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Plugin_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Plugin_setPrototypeOf(e,t){return(Plugin_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function Plugin_createSuper(i){return function(){var e,t=Plugin_getPrototypeOf(i);if(function Plugin_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var n=Plugin_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function Plugin_possibleConstructorReturn(e,t){return!t||"object"!==Plugin_typeof(t)&&"function"!=typeof t?function Plugin_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,e)}}function Plugin_getPrototypeOf(e){return(Plugin_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ht=function(){!function Plugin_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Plugin_setPrototypeOf(e,t)}(Plugin,Phaser.Plugins.BasePlugin);var n=Plugin_createSuper(Plugin);function Plugin(e){var t;return function Plugin_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Plugin),t=n.call(this,e),e.registerGameObject("nineslice",t.addNineSlice,t.makeNineSlice),t}return function Plugin_createClass(e,t,n){return t&&Plugin_defineProperties(e.prototype,t),n&&Plugin_defineProperties(e,n),e}(Plugin,[{key:"addNineSlice",value:function addNineSlice(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=mt(this.scene,t);return this.displayList.add(i),i}},{key:"makeNineSlice",value:function makeNineSlice(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mt(this.scene,t)}}]),Plugin}(),mt=function mkNineSlice(e,t){if(2===t.length)return new pt(e,t[0],t[1]);if(t.length<6)throw new Error("Expected at least 6 arguments to NineSlice creator, received ".concat(t.length,"."));7<t.length&&console.error("Expected less than 7 arguments for NineSlice creation, received ".concat(t.length,"."));var n=_slicedToArray(t,6),i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c={},u={x:i,y:r,width:o,height:a};if("string"==typeof s)c.sourceKey=s;else{var p=s.key,f=s.frame;c.sourceKey=p,"string"!=typeof f&&"number"!=typeof f||(c.sourceFrame=s.frame)}if("number"==typeof l)c.sourceLayout={width:l,height:l};else if(Array.isArray(l)){var h=_slicedToArray(ft(l),4),m=h[0],y=h[1],g=h[2],d=h[3];c.sourceLayout={topLeft:{width:d,height:m},topRight:{width:y,height:m},bottomRight:{width:y,height:g},bottomLeft:{width:d,height:g}}}else c.sourceLayout=l;if(6<t.length)if("number"==typeof t[6]){var _=t[6];c.safeOffsets={top:_,right:_,bottom:_,left:_}}else{if(!Array.isArray(t[6]))throw new Error("Expected argument number or array for argument 7, got ".concat(Plugin_typeof(t[6]),"."));var P=_slicedToArray(ft(t[6]),4),S=P[0],b=P[1],v=P[2],O=P[3];c.safeOffsets={top:S,right:b,bottom:v,left:O}}return new pt(e,c,u)},yt={key:"NineSlice",plugin:ht,start:!0};function GameManager_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}ht.DefaultCfg=yt;var gt=function(){function GameManager(){!function GameManager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GameManager),(GameManager.Instance=this).config=null,this.maxHeight=720,this.maxWidth=1800,this.isLandscape=this.maxWidth>this.maxHeight,this.LoadStylesheets(),this.deviceManager=new nt,this.brim=new tt(this.deviceManager.displayBrim,W.GetRootElement()),this.deviceOrientationChecker=new it(this.isLandscape),this.deviceOrientationChecker.onValidOrientation=this.OnValidOrientation.bind(this),this.deviceOrientationChecker.CheckOrientation()}return function GameManager_createClass(e,t,n){return t&&GameManager_defineProperties(e.prototype,t),n&&GameManager_defineProperties(e,n),e}(GameManager,[{key:"LoadStylesheets",value:function LoadStylesheets(){var e=document.getElementsByTagName("head")[0],t="css/main.css";this.cacheBust&&(t+="?bust="+this.dateTime);var n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=W.GetAssetURL()+t,e.appendChild(n),t="css/game.css",this.cacheBust&&(t+="?bust="+this.dateTime),(n=document.createElement("link")).type="text/css",n.rel="stylesheet",n.href=W.GetAssetURL()+t,e.appendChild(n)}},{key:"OnValidOrientation",value:function OnValidOrientation(){this.brim.visible||(this.StartGame(),this.deviceOrientationChecker.onValidOrientation=null)}},{key:"StartGame",value:function StartGame(){var e=document.createElement("div");e.id="stage-container",W.GetRootElement().appendChild(e);var t=this.isLandscape?Phaser.Structs.Size.HEIGHT_CONTROLS_WIDTH:Phaser.Structs.Size.WIDTH_CONTROLS_HEIGHT;this.game=new r({type:this.deviceManager.renderMode,gameScale:this.deviceManager.gameScale,parent:e.id,fullscreenTarget:W.GetRootElement(),scale:{mode:t,autoCenter:Phaser.Scale.CENTER_BOTH,width:this.maxWidth*this.deviceManager.gameScale,height:this.maxHeight*this.deviceManager.gameScale,autoRound:!0},render:{antialias:!0,pixelArt:!1,roundPixels:!1,transparent:!1},dom:{createContainer:!0},input:{gamepad:!0,activePointers:3},plugins:{global:[{key:"WebFontLoader",plugin:lt,start:!0},ht.DefaultCfg],scene:[]},physics:{default:"matter",matter:{debug:!0,debugShowInternalEdges:!1,debugShowConvexHulls:!1,runner:{isFixed:!0}}},scene:[et]}),this.game.plugins.install("SaveDataManager",v,!0),this.game.plugins.install("SceneManager",s,!0),this.game.plugins.install("AssetManager",h,!0),this.game.plugins.install("AudioManager",w,!0),this.game.plugins.install("AccessibilityManager",l,!0),this.game.plugins.install("LocalisationManager",z,!0)}},{key:"Pause",value:function Pause(){s.Instance&&s.Instance.PauseAllScenes()}},{key:"Resume",value:function Resume(){s.Instance&&s.Instance.ResumeAllScenes()}}]),GameManager}();new gt}]);