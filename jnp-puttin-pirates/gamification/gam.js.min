!function(){"use strict";function $extend(e,t){function n(){}n.prototype=e;var i=new n;for(var a in t)i[a]=t[a];return i}function $iterator(e){return e instanceof Array?function(){return HxOverrides.iter(e)}:"function"==typeof e.iterator?$bind(e,e.iterator):e.iterator}function $bind(e,t){var n=function(){return n.method.apply(n.scope,arguments)};return n.scope=e,n.method=t,n}var $hxClasses={},$estr=function(){return js.Boot.__string_rec(this,"")},EReg=function(e,t){t=t.split("u").join(""),this.r=new RegExp(e,t)};$hxClasses.EReg=EReg,EReg.__name__=["EReg"],EReg.prototype={customReplace:function(e,t){for(var n=new StringBuf;;){if(!this.match(e))break;n.b+=Std.string(this.matchedLeft()),n.b+=Std.string(t(this)),e=this.matchedRight()}return n.b+=Std.string(e),n.b},replace:function(e,t){return e.replace(this.r,t)},split:function(e){var t="#__delim__#";return e.replace(this.r,t).split(t)},matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,len:this.r.m[0].length}},matchedRight:function(){if(null==this.r.m)throw"No string matched";var e=this.r.m.index+this.r.m[0].length;return this.r.s.substr(e,this.r.s.length-e)},matchedLeft:function(){if(null==this.r.m)throw"No string matched";return this.r.s.substr(0,this.r.m.index)},matched:function(e){return null!=this.r.m&&e>=0&&e<this.r.m.length?this.r.m[e]:function(){throw"EReg::matched"}(this)},match:function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m},r:null,__class__:EReg};var Hash=function(){this.h={}};$hxClasses.Hash=Hash,Hash.__name__=["Hash"],Hash.prototype={toString:function(){var e=new StringBuf;e.b+=Std.string("{");for(var t=this.keys();t.hasNext();){var n=t.next();e.b+=Std.string(n),e.b+=Std.string(" => "),e.b+=Std.string(Std.string(this.get(n))),t.hasNext()&&(e.b+=Std.string(", "))}return e.b+=Std.string("}"),e.b},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref["$"+e]}}},keys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(t.substr(1));return HxOverrides.iter(e)},remove:function(e){return e="$"+e,this.h.hasOwnProperty(e)?(delete this.h[e],!0):!1},exists:function(e){return this.h.hasOwnProperty("$"+e)},get:function(e){return this.h["$"+e]},set:function(e,t){this.h["$"+e]=t},h:null,__class__:Hash};var HxOverrides=function(){};$hxClasses.HxOverrides=HxOverrides,HxOverrides.__name__=["HxOverrides"],HxOverrides.dateStr=function(e){var t=e.getMonth()+1,n=e.getDate(),i=e.getHours(),a=e.getMinutes(),o=e.getSeconds();return e.getFullYear()+"-"+(10>t?"0"+t:""+t)+"-"+(10>n?"0"+n:""+n)+" "+(10>i?"0"+i:""+i)+":"+(10>a?"0"+a:""+a)+":"+(10>o?"0"+o:""+o)},HxOverrides.strDate=function(e){switch(e.length){case 8:var t=e.split(":"),n=new Date;return n.setTime(0),n.setUTCHours(t[0]),n.setUTCMinutes(t[1]),n.setUTCSeconds(t[2]),n;case 10:var t=e.split("-");return new Date(t[0],t[1]-1,t[2],0,0,0);case 19:var t=e.split(" "),i=t[0].split("-"),a=t[1].split(":");return new Date(i[0],i[1]-1,i[2],a[0],a[1],a[2]);default:throw"Invalid date format : "+e}},HxOverrides.cca=function(e,t){var n=e.charCodeAt(t);return n!=n?void 0:n},HxOverrides.substr=function(e,t,n){return null!=t&&0!=t&&null!=n&&0>n?"":(null==n&&(n=e.length),0>t?(t=e.length+t,0>t&&(t=0)):0>n&&(n=e.length+n-t),e.substr(t,n))},HxOverrides.remove=function(e,t){for(var n=0,i=e.length;i>n;){if(e[n]==t)return e.splice(n,1),!0;n++}return!1},HxOverrides.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var IntIter=function(e,t){this.min=e,this.max=t};$hxClasses.IntIter=IntIter,IntIter.__name__=["IntIter"],IntIter.prototype={next:function(){return this.min++},hasNext:function(){return this.min<this.max},max:null,min:null,__class__:IntIter};var Main=function(){};$hxClasses.Main=Main,Main.__name__=["Main"],Main.document=null,Main.container=null,Main.canvas=null,Main.updateTimer=null,Main.gameManager=null,Main._loadingScreen=null,Main.main=function(){var e="gamificationBaseUrl";Main.BASE_PATH=window[e],Main.document=js.Lib.document;var t=Main.document.createElement("style");t.appendChild(Main.document.createTextNode("\r\n				@font-face {\r\n					font-family: 'DisneyJunior';\r\n					src: url('"+Main.BASE_PATH+"./css/DisneyJuniorG.ttf') format('truetype');\r\n					}")),Main.document.head.appendChild(t),window.addEventListener("load",Main.init,!1),Main.gamificationInterface=new game.GamificationInterface},Main.validateBrowser=function(){return!0},Main.validateCookies=function(){return!0},Main.init=function(){Main.container=Main.document.createElement("div"),window.tabindex="0",Main.container.style.position="relative",Main.container.className="container",Main.container.style.width=Main.CANVAS_WIDTH_LANDSCAPE+"px",Main.container.style.height=Main.CANVAS_HEIGHT_LANDSCAPE+"px",Main.container.style.display="none",core.managers.SoundManager.init(),Main.gameManager=new core.GameManager(Main.CANVAS_WIDTH_LANDSCAPE,Main.CANVAS_HEIGHT_LANDSCAPE,Main.CANVAS_WIDTH_PORTRAIT,Main.CANVAS_HEIGHT_PORTRAIT),Main.getAssetsList()},Main.getAssetsList=function(){core.utilities.Debug.log("getAssetsList()");var e=new core.LoadBatch;e.addAsset("assetList","asset_list.xml",core.AssetType.Other),e.addAsset("strings","./assets/xml/strings.xml",core.AssetType.Other),e.addAsset("gameConfig","game_config.xml",core.AssetType.Other),e.addAsset("gameCss","./css/game.css",core.AssetType.Other),e.addAsset("styleCss","./css/style.css",core.AssetType.Other),e.load(Main.onAssetListLoaded),core.utilities.Debug.log("~getAssetsList()")},Main.onAssetListLoaded=function(){core.utilities.Debug.log("onAssetListLoaded()"),core.GameConfig.parseGameConfig(core.managers.AssetManager.getAsset("gameConfig")),Main.gameManager.init(),core.Localizer.initStrings();var e=core.managers.AssetManager.getAsset("assetList"),t=Xml.parse(e);core.utilities.Debug.log("Getting load batches...");for(var n=t.elementsNamed("loadBatch");n.hasNext();){for(var i=new core.LoadBatch,a=n.next(),o=a.get("basePath"),r=a.elementsNamed("asset");r.hasNext();){var s=r.next();i.addAsset(s.get("name"),o+s.get("path"),Type.createEnum(core.AssetType,s.get("type")))}core.managers.AssetManager.registerAsset(a.get("name"),i)}var c=core.managers.AssetManager.getAsset("loadScreenBatchPreload");c.load(Main.onLoadScreenPreloadComplete),core.utilities.Debug.log(core.GameConfig.getProperty("browserTimerUpdate")),"1"==core.GameConfig.getProperty("browserTimerUpdate")&&(Main.updateTimer=new haxe.Timer(Math.floor(1e3/(core.GameManager.isMobile()?Main.TARGET_FPS_MOBILE:Main.TARGET_FPS))),Main.updateTimer.run=Main.update),Main.gamificationInterface.dispatchEvent("assetsReady"),core.utilities.Debug.log("~onAssetListLoaded()"),Main.TEST_MODE_ENABLED&&Main.doTest()},Main.doTest=function(){Main.document.body.appendChild(Main.container),Main.container.style.display="block",Main.gamificationInterface.setup("sof_spl_adv_mermaidprincess",Main.onGamificationLoad,core.GameManager.instance.getLayerByName("test").getContainer(),core.GameManager.instance.getLayerByName("test").getCanvas(),Main.container,Main.CANVAS_WIDTH_LANDSCAPE,Main.CANVAS_HEIGHT_LANDSCAPE)},Main.onGamificationLoad=function(){core.utilities.Debug.log("onGamificationLoad()"),Main.gamificationInterface.setStrings("Rewards"),Main.gamificationInterface.setHeadingTextFillStyle("#4d73ee"),Main.gamificationInterface.setUiButtonTextOffset(-5,0),Main.gamificationInterface.setUiButtonPosition(85,64),Main.gamificationInterface.setUiButtonLarge(),Main.gamificationInterface.showUiButton(),Main.gamificationInterface.applyCurrency()},Main.onLoadScreenPreloadComplete=function(){Main._loadingScreen=new game.LoadingScreen,Main.gameManager.addGameState(Main._loadingScreen),Main.gameManager.onResizeWindow(),core.utilities.Debug.log("Adding preload batch...");var e=core.managers.AssetManager.getAsset("loadBatchPreload");e.load(Main.onPreloadComplete)},Main.onPreloadComplete=function(){core.GameManager.instance.switchToGameState(Main._loadingScreen,new game.MainState)},Main.update=function(){Main.gameManager.update(!0),Main.gameManager.render(!0),Main.gameManager.postUpdate(!0),"1"==core.GameConfig.getProperty("debugDraw")&&Main.gameManager.debugRender()},Main.getDocument=function(){return Main.document},Main.getWindow=function(){return js.Lib.window},Main.getCanvas=function(){return Main.canvas},Main.getContainer=function(){return Main.container},Main.setContainer=function(e){Main.container=e};var Reflect=function(){};$hxClasses.Reflect=Reflect,Reflect.__name__=["Reflect"],Reflect.hasField=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Reflect.field=function(e,t){var n=null;try{n=e[t]}catch(i){}return n},Reflect.setField=function(e,t,n){e[t]=n},Reflect.getProperty=function(e,t){var n;return null==e?null:e.__properties__&&(n=e.__properties__["get_"+t])?e[n]():e[t]},Reflect.setProperty=function(e,t,n){var i;e.__properties__&&(i=e.__properties__["set_"+t])?e[i](n):e[t]=n},Reflect.callMethod=function(e,t,n){return t.apply(e,n)},Reflect.fields=function(e){var t=[];if(null!=e){var n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i)}return t},Reflect.isFunction=function(e){return"function"==typeof e&&!(e.__name__||e.__ename__)},Reflect.compare=function(e,t){return e==t?0:e>t?1:-1},Reflect.compareMethods=function(e,t){return e==t?!0:Reflect.isFunction(e)&&Reflect.isFunction(t)?e.scope==t.scope&&e.method==t.method&&null!=e.method:!1},Reflect.isObject=function(e){if(null==e)return!1;var t=typeof e;return"string"==t||"object"==t&&!e.__enum__||"function"==t&&(e.__name__||e.__ename__)},Reflect.deleteField=function(e,t){return Reflect.hasField(e,t)?(delete e[t],!0):!1},Reflect.copy=function(e){for(var t={},n=0,i=Reflect.fields(e);n<i.length;){var a=i[n];++n,t[a]=Reflect.field(e,a)}return t},Reflect.makeVarArgs=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e(t)}};var Std=function(){};$hxClasses.Std=Std,Std.__name__=["Std"],Std.is=function(e,t){return js.Boot.__instanceof(e,t)},Std.string=function(e){return js.Boot.__string_rec(e,"")},Std["int"]=function(e){return 0|e},Std.parseInt=function(e){var t=parseInt(e,10);return 0!=t||120!=HxOverrides.cca(e,1)&&88!=HxOverrides.cca(e,1)||(t=parseInt(e)),isNaN(t)?null:t},Std.parseFloat=function(e){return parseFloat(e)},Std.random=function(e){return Math.floor(Math.random()*e)};var StringBuf=function(){this.b=""};$hxClasses.StringBuf=StringBuf,StringBuf.__name__=["StringBuf"],StringBuf.prototype={toString:function(){return this.b},addSub:function(e,t,n){this.b+=HxOverrides.substr(e,t,n)},addChar:function(e){this.b+=String.fromCharCode(e)},add:function(e){this.b+=Std.string(e)},b:null,__class__:StringBuf};var StringTools=function(){};$hxClasses.StringTools=StringTools,StringTools.__name__=["StringTools"],StringTools.urlEncode=function(e){return encodeURIComponent(e)},StringTools.urlDecode=function(e){return decodeURIComponent(e.split("+").join(" "))},StringTools.htmlEscape=function(e){return e.split("&").join("&").split("<").join("&lt;").split(">").join("&gt;")},StringTools.htmlUnescape=function(e){return e.split("&gt;").join(">").split("&lt;").join("<").split("&").join("&")},StringTools.startsWith=function(e,t){return e.length>=t.length&&HxOverrides.substr(e,0,t.length)==t},StringTools.endsWith=function(e,t){var n=t.length,i=e.length;return i>=n&&HxOverrides.substr(e,i-n,n)==t},StringTools.isSpace=function(e,t){var n=HxOverrides.cca(e,t);return n>=9&&13>=n||32==n},StringTools.ltrim=function(e){for(var t=e.length,n=0;t>n&&StringTools.isSpace(e,n);)n++;return n>0?HxOverrides.substr(e,n,t-n):e},StringTools.rtrim=function(e){for(var t=e.length,n=0;t>n&&StringTools.isSpace(e,t-n-1);)n++;return n>0?HxOverrides.substr(e,0,t-n):e},StringTools.trim=function(e){return StringTools.ltrim(StringTools.rtrim(e))},StringTools.rpad=function(e,t,n){for(var i=e.length,a=t.length;n>i;)a>n-i?(e+=HxOverrides.substr(t,0,n-i),i=n):(e+=t,i+=a);return e},StringTools.lpad=function(e,t,n){var i="",a=e.length;if(a>=n)return e;for(var o=t.length;n>a;)o>n-a?(i+=HxOverrides.substr(t,0,n-a),a=n):(i+=t,a+=o);return i+e},StringTools.replace=function(e,t,n){return e.split(t).join(n)},StringTools.hex=function(e,t){var n="",i="0123456789ABCDEF";do n=i.charAt(15&e)+n,e>>>=4;while(e>0);if(null!=t)for(;n.length<t;)n="0"+n;return n},StringTools.fastCodeAt=function(e,t){return e.charCodeAt(t)},StringTools.isEOF=function(e){return e!=e};var ValueType=$hxClasses.ValueType={__ename__:["ValueType"],__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]};ValueType.TNull=["TNull",0],ValueType.TNull.toString=$estr,ValueType.TNull.__enum__=ValueType,ValueType.TInt=["TInt",1],ValueType.TInt.toString=$estr,ValueType.TInt.__enum__=ValueType,ValueType.TFloat=["TFloat",2],ValueType.TFloat.toString=$estr,ValueType.TFloat.__enum__=ValueType,ValueType.TBool=["TBool",3],ValueType.TBool.toString=$estr,ValueType.TBool.__enum__=ValueType,ValueType.TObject=["TObject",4],ValueType.TObject.toString=$estr,ValueType.TObject.__enum__=ValueType,ValueType.TFunction=["TFunction",5],ValueType.TFunction.toString=$estr,ValueType.TFunction.__enum__=ValueType,ValueType.TClass=function(e){var t=["TClass",6,e];return t.__enum__=ValueType,t.toString=$estr,t},ValueType.TEnum=function(e){var t=["TEnum",7,e];return t.__enum__=ValueType,t.toString=$estr,t},ValueType.TUnknown=["TUnknown",8],ValueType.TUnknown.toString=$estr,ValueType.TUnknown.__enum__=ValueType;var Type=function(){};$hxClasses.Type=Type,Type.__name__=["Type"],Type.getClass=function(e){return null==e?null:e.__class__},Type.getEnum=function(e){return null==e?null:e.__enum__},Type.getSuperClass=function(e){return e.__super__},Type.getClassName=function(e){var t=e.__name__;return t.join(".")},Type.getEnumName=function(e){var t=e.__ename__;return t.join(".")},Type.resolveClass=function(e){var t=$hxClasses[e];return null!=t&&t.__name__?t:null},Type.resolveEnum=function(e){var t=$hxClasses[e];return null!=t&&t.__ename__?t:null},Type.createInstance=function(e,t){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);case 8:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]);default:throw"Too many arguments"}return null},Type.createEmptyInstance=function(e){function t(){}return t.prototype=e.prototype,new t},Type.createEnum=function(e,t,n){var i=Reflect.field(e,t);if(null==i)throw"No such constructor "+t;if(Reflect.isFunction(i)){if(null==n)throw"Constructor "+t+" need parameters";return i.apply(e,n)}if(null!=n&&0!=n.length)throw"Constructor "+t+" does not need parameters";return i},Type.createEnumIndex=function(e,t,n){var i=e.__constructs__[t];if(null==i)throw t+" is not a valid enum constructor index";return Type.createEnum(e,i,n)},Type.getInstanceFields=function(e){var t=[];for(var n in e.prototype)t.push(n);return HxOverrides.remove(t,"__class__"),HxOverrides.remove(t,"__properties__"),t},Type.getClassFields=function(e){var t=Reflect.fields(e);return HxOverrides.remove(t,"__name__"),HxOverrides.remove(t,"__interfaces__"),HxOverrides.remove(t,"__properties__"),HxOverrides.remove(t,"__super__"),HxOverrides.remove(t,"prototype"),t},Type.getEnumConstructs=function(e){var t=e.__constructs__;return t.slice()},Type["typeof"]=function(e){switch(typeof e){case"boolean":return ValueType.TBool;case"string":return ValueType.TClass(String);case"number":return Math.ceil(e)==e%2147483648?ValueType.TInt:ValueType.TFloat;case"object":if(null==e)return ValueType.TNull;var t=e.__enum__;if(null!=t)return ValueType.TEnum(t);var n=e.__class__;return null!=n?ValueType.TClass(n):ValueType.TObject;case"function":return e.__name__||e.__ename__?ValueType.TObject:ValueType.TFunction;case"undefined":return ValueType.TNull;default:return ValueType.TUnknown}},Type.enumEq=function(e,t){if(e==t)return!0;try{if(e[0]!=t[0])return!1;for(var n=2,i=e.length;i>n;){var a=n++;if(!Type.enumEq(e[a],t[a]))return!1}var o=e.__enum__;if(o!=t.__enum__||null==o)return!1}catch(o){return!1}return!0},Type.enumConstructor=function(e){return e[0]},Type.enumParameters=function(e){return e.slice(2)},Type.enumIndex=function(e){return e[1]},Type.allEnums=function(e){for(var t=[],n=e.__constructs__,i=0;i<n.length;){var a=n[i];++i;var o=Reflect.field(e,a);Reflect.isFunction(o)||t.push(o)}return t};var XMLHttpRequestResponseType=$hxClasses.XMLHttpRequestResponseType={__ename__:["XMLHttpRequestResponseType"],__constructs__:["arraybuffer","blob","document","json","text"]};XMLHttpRequestResponseType.arraybuffer=["arraybuffer",0],XMLHttpRequestResponseType.arraybuffer.toString=$estr,XMLHttpRequestResponseType.arraybuffer.__enum__=XMLHttpRequestResponseType,XMLHttpRequestResponseType.blob=["blob",1],XMLHttpRequestResponseType.blob.toString=$estr,XMLHttpRequestResponseType.blob.__enum__=XMLHttpRequestResponseType,XMLHttpRequestResponseType.document=["document",2],XMLHttpRequestResponseType.document.toString=$estr,XMLHttpRequestResponseType.document.__enum__=XMLHttpRequestResponseType,XMLHttpRequestResponseType.json=["json",3],XMLHttpRequestResponseType.json.toString=$estr,XMLHttpRequestResponseType.json.__enum__=XMLHttpRequestResponseType,XMLHttpRequestResponseType.text=["text",4],XMLHttpRequestResponseType.text.toString=$estr,XMLHttpRequestResponseType.text.__enum__=XMLHttpRequestResponseType;var Xml=function(){};$hxClasses.Xml=Xml,Xml.__name__=["Xml"],Xml.Element=null,Xml.PCData=null,Xml.CData=null,Xml.Comment=null,Xml.DocType=null,Xml.Prolog=null,Xml.Document=null,Xml.parse=function(e){return haxe.xml.Parser.parse(e)},Xml.createElement=function(e){var t=new Xml;return t.nodeType=Xml.Element,t._children=new Array,t._attributes=new Hash,t.setNodeName(e),t},Xml.createPCData=function(e){var t=new Xml;return t.nodeType=Xml.PCData,t.setNodeValue(e),t},Xml.createCData=function(e){var t=new Xml;return t.nodeType=Xml.CData,t.setNodeValue(e),t},Xml.createComment=function(e){var t=new Xml;return t.nodeType=Xml.Comment,t.setNodeValue(e),t},Xml.createDocType=function(e){var t=new Xml;return t.nodeType=Xml.DocType,t.setNodeValue(e),t},Xml.createProlog=function(e){var t=new Xml;return t.nodeType=Xml.Prolog,t.setNodeValue(e),t},Xml.createDocument=function(){var e=new Xml;return e.nodeType=Xml.Document,e._children=new Array,e},Xml.prototype={toString:function(){if(this.nodeType==Xml.PCData)return this._nodeValue;if(this.nodeType==Xml.CData)return"<![CDATA["+this._nodeValue+"]]>";if(this.nodeType==Xml.Comment)return"<!--"+this._nodeValue+"-->";if(this.nodeType==Xml.DocType)return"<!DOCTYPE "+this._nodeValue+">";if(this.nodeType==Xml.Prolog)return"<?"+this._nodeValue+"?>";var e=new StringBuf;if(this.nodeType==Xml.Element){e.b+=Std.string("<"),e.b+=Std.string(this._nodeName);for(var t=this._attributes.keys();t.hasNext();){var n=t.next();e.b+=Std.string(" "),e.b+=Std.string(n),e.b+=Std.string('="'),e.b+=Std.string(this._attributes.get(n)),e.b+=Std.string('"')}if(0==this._children.length)return e.b+=Std.string("/>"),e.b;e.b+=Std.string(">")}for(var i=this.iterator();i.hasNext();){var a=i.next();e.b+=Std.string(a.toString())}return this.nodeType==Xml.Element&&(e.b+=Std.string("</"),e.b+=Std.string(this._nodeName),e.b+=Std.string(">")),e.b},insertChild:function(e,t){if(null==this._children)throw"bad nodetype";null!=e._parent&&HxOverrides.remove(e._parent._children,e),e._parent=this,this._children.splice(t,0,e)},removeChild:function(e){if(null==this._children)throw"bad nodetype";var t=HxOverrides.remove(this._children,e);return t&&(e._parent=null),t},addChild:function(e){if(null==this._children)throw"bad nodetype";null!=e._parent&&HxOverrides.remove(e._parent._children,e),e._parent=this,this._children.push(e)},firstElement:function(){if(null==this._children)throw"bad nodetype";for(var e=0,t=this._children.length;t>e;){var n=this._children[e];if(n.nodeType==Xml.Element)return n;e++}return null},firstChild:function(){if(null==this._children)throw"bad nodetype";return this._children[0]},elementsNamed:function(e){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var t=this.cur,n=this.x.length;n>t;){var i=this.x[t];if(i.nodeType==Xml.Element&&i._nodeName==e)break;t++}return this.cur=t,n>t},next:function(){for(var t=this.cur,n=this.x.length;n>t;){var i=this.x[t];if(t++,i.nodeType==Xml.Element&&i._nodeName==e)return this.cur=t,i}return null}}},elements:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var e=this.cur,t=this.x.length;t>e&&this.x[e].nodeType!=Xml.Element;)e+=1;return this.cur=e,t>e},next:function(){for(var e=this.cur,t=this.x.length;t>e;){var n=this.x[e];if(e+=1,n.nodeType==Xml.Element)return this.cur=e,n}return null}}},iterator:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length},next:function(){return this.x[this.cur++]}}},attributes:function(){if(this.nodeType!=Xml.Element)throw"bad nodeType";return this._attributes.keys()},exists:function(e){if(this.nodeType!=Xml.Element)throw"bad nodeType";return this._attributes.exists(e)},remove:function(e){if(this.nodeType!=Xml.Element)throw"bad nodeType";this._attributes.remove(e)},set:function(e,t){if(this.nodeType!=Xml.Element)throw"bad nodeType";this._attributes.set(e,t)},get:function(e){if(this.nodeType!=Xml.Element)throw"bad nodeType";return this._attributes.get(e)},getParent:function(){return this._parent},setNodeValue:function(e){if(this.nodeType==Xml.Element||this.nodeType==Xml.Document)throw"bad nodeType";return this._nodeValue=e},getNodeValue:function(){if(this.nodeType==Xml.Element||this.nodeType==Xml.Document)throw"bad nodeType";return this._nodeValue},setNodeName:function(e){if(this.nodeType!=Xml.Element)throw"bad nodeType";return this._nodeName=e},getNodeName:function(){if(this.nodeType!=Xml.Element)throw"bad nodeType";return this._nodeName},_parent:null,_children:null,_attributes:null,_nodeValue:null,_nodeName:null,parent:null,nodeValue:null,nodeName:null,nodeType:null,__class__:Xml,__properties__:{set_nodeName:"setNodeName",get_nodeName:"getNodeName",set_nodeValue:"setNodeValue",get_nodeValue:"getNodeValue",get_parent:"getParent"}};var core={};core.AssetType=$hxClasses["core.AssetType"]={__ename__:["core","AssetType"],__constructs__:["Image","Audio","Other","Javascript"]},core.AssetType.Image=["Image",0],core.AssetType.Image.toString=$estr,core.AssetType.Image.__enum__=core.AssetType,core.AssetType.Audio=["Audio",1],core.AssetType.Audio.toString=$estr,core.AssetType.Audio.__enum__=core.AssetType,core.AssetType.Other=["Other",2],core.AssetType.Other.toString=$estr,core.AssetType.Other.__enum__=core.AssetType,core.AssetType.Javascript=["Javascript",3],core.AssetType.Javascript.toString=$estr,core.AssetType.Javascript.__enum__=core.AssetType,core.AssetLoadingInfo=function(e,t,n){this.asset=null,this.name=e,this.type=n,this.source=t},$hxClasses["core.AssetLoadingInfo"]=core.AssetLoadingInfo,core.AssetLoadingInfo.__name__=["core","AssetLoadingInfo"],core.AssetLoadingInfo.prototype={type:null,source:null,asset:null,name:null,__class__:core.AssetLoadingInfo},core.EventDispatcher=function(){this._eventListeners=new Array},$hxClasses["core.EventDispatcher"]=core.EventDispatcher,core.EventDispatcher.__name__=["core","EventDispatcher"],core.EventDispatcher.prototype={removeEventListener:function(e,t){if(this.hasEventListener(e,t))for(var n=this._eventListeners.length,i=n-1;i>=0;){var a=this._eventListeners[i];if(core.utilities.Debug.log(a.eventName),a.eventName==e&&Reflect.compareMethods(a.action,t))return void this._eventListeners.splice(i,1);i--}},removeAllEventListeners:function(){this._eventListeners=new Array},dispatchEvent:function(e,t){for(var n=this._eventListeners.length,i=n-1;i>=0;){var a=this._eventListeners[i];a.eventName==e&&a.action(t),i--}},hasEventListener:function(e,t){for(var n=this._eventListeners.length,i=n-1;i>=0;){if(this._eventListeners[i].eventName==e&&Reflect.compareMethods(this._eventListeners[i].action,t))return!0;i--}return!1},addEventListener:function(e,t){this.hasEventListener(e,t)||this._eventListeners.push(new core.EventListener(e,t))},_eventListeners:null,__class__:core.EventDispatcher},core.GameObject=function(){this._instanceId=0,this._isUpdating=!0,this._isActive=!0,this._isMarkedForDeletion=!1,this._isInitialized=!1,core.EventDispatcher.call(this),this._instanceId=core.GameObject._currentInstanceId++,this._properties=new Hash,this._tags=new Array},$hxClasses["core.GameObject"]=core.GameObject,core.GameObject.__name__=["core","GameObject"],core.GameObject.__super__=core.EventDispatcher,core.GameObject.prototype=$extend(core.EventDispatcher.prototype,{onDestroyed:function(){},destroy:function(){this.setIsActive(!1),this._isMarkedForDeletion=!0},getIsUpdating:function(){return this._isUpdating},setIsUpdating:function(e){this._isUpdating=e},setIsActive:function(e){this._isInitialized||this.init(),!this._isActive&&e&&this.activate(),this._isActive&&!e&&this.deactivate(),this._isActive=e},getIsActive:function(){return this._isActive},getInstanceId:function(){return this._instanceId},setName:function(e){this._name=e},getName:function(){return this._name},getTags:function(){return this._tags},hasTag:function(e){for(var t=this._tags.length,n=0;t>n;){var i=n++;if(this._tags[i]==e)return!0}return!1},removeTag:function(e){for(var t=this._tags.length,n=0;t>n;){var i=n++;this._tags[i]==e&&this._tags.splice(i,1)}},addTag:function(e){this._tags.push(e)},getIsMarkedForDeletion:function(){return this._isMarkedForDeletion},hasProperty:function(e){return this._properties.exists(e)},getProperty:function(e){return this._properties.get(e)},setProperty:function(e,t){this._properties.set(e,t)},handleMessage:function(){},debugRender:function(){},deactivate:function(){this._isActive=!1},activate:function(){this._isActive=!0},render:function(){},postUpdate:function(){},update:function(){this._isInitialized&&this._isActive||(this.init(),this._isActive&&this.activate())},init:function(){this._isInitialized=!0},_instanceId:null,_isUpdating:null,_tags:null,_properties:null,_isActive:null,_isMarkedForDeletion:null,_isInitialized:null,_name:null,__class__:core.GameObject}),core.Component=function(e,t){core.GameObject.call(this),e.addComponent(this),this.setName(t)},$hxClasses["core.Component"]=core.Component,core.Component.__name__=["core","Component"],core.Component.__super__=core.GameObject,core.Component.prototype=$extend(core.GameObject.prototype,{onDestroyed:function(){core.GameObject.prototype.onDestroyed.call(this)},destroy:function(){core.GameObject.prototype.destroy.call(this)},getGameState:function(){return this.getEntity().getGameState()},getSiblingComponent:function(e){return this.getEntity().getComponent(e)},setEntity:function(e){this._entity=e},getEntity:function(){return this._entity},_entity:null,__class__:core.Component}),core.DeferredAction=function(e,t,n){this.isPaused=!1,this.timeUntilExecute=e,this.actionToExecute=t,this.params=n},$hxClasses["core.DeferredAction"]=core.DeferredAction,core.DeferredAction.__name__=["core","DeferredAction"],core.DeferredAction.prototype={update:function(){this.isPaused||(this.timeUntilExecute-=core.GameManager.getElapsedTime())},isPaused:null,params:null,actionToExecute:null,timeUntilExecute:null,__class__:core.DeferredAction},core.Entity=function(e){null==e&&(e=!1),this._isZSorted=!1,this._isVisible=!0,this._parent=null,core.GameObject.call(this),this._position=new core.Vector3D,this._rotation=new core.Vector3D,this._scale=new core.Vector3D(1,1,1),this._components=new Array,this._children=new Array},$hxClasses["core.Entity"]=core.Entity,core.Entity.__name__=["core","Entity"],core.Entity.__super__=core.GameObject,core.Entity.prototype=$extend(core.GameObject.prototype,{onDestroyed:function(){core.GameObject.prototype.onDestroyed.call(this),this._gameState=null},destroy:function(){core.GameObject.prototype.destroy.call(this),this.dispatchEvent("destroy",this),null!=this._gameState&&this._gameState.scheduleEntityForDeletion(this),null!=this.getParent()&&this.getParent().removeChild(this);for(var e=this._components.length,t=e;t-->0;){var n=this._components[t];n.destroy(),n.onDestroyed()}var i=this._children.length;for(t=i;t-->0;){var a=this._children[t];a.destroy(),a.onDestroyed()}},getIsUpdating:function(){return null!=this._parent?this._isUpdating&&this._parent.getIsUpdating():this._isUpdating},handleMessage:function(e,t){for(var n=this._components.length,i=n-1;i>=0;){var a=this._components[i];if(a.getIsActive()){var o=a.handleMessage(e,t);if("endMessage"==o)return}i--}},getComponents:function(e){for(var t=new Array,n=this._components.length,i=0;n>i;){var a=i++;Type.getClass(this._components[a])==e&&t.push(this._components[a])}return t.length>0?t:null},getComponentsInChildren:function(e){var t=new Array,n=this.getComponents(e);null!=n&&(t=t.concat(n));for(var i=this._children.length,a=0;i>a;){var o=a++,r=this._children[o].getComponentsInChildren(e);null!=r&&(t=t.concat(r))}return t.length>0?t:null},getComponentWithSuperClass:function(e){for(var t=this._components.length,n=0;t>n;){var i=n++;if(Type.getSuperClass(Type.getClass(this._components[i]))==e)return this._components[i]}return null},getComponent:function(e){for(var t=this._components.length,n=0;t>n;){var i=n++;if(Type.getClass(this._components[i])==e)return this._components[i]}return null},getComponentByName:function(e){for(var t=this._components.length,n=0;t>n;){var i=n++;if(this._components[i].getName()==e)return this._components[i]}return null},addComponent:function(e){for(var t=this._components.length,n=0;t>n;){var i=n++;if(this._components[i]==e)return null}return this._components.push(e),e.setEntity(this),e},debugRender:function(){core.GameObject.prototype.debugRender.call(this);for(var e=this._components.length,t=0;e>t;){var n=t++,i=this._components[n];i.debugRender()}var a=!1;if(a){var o=core.GameManager.instance.getLayerByName("debug").getCanvas().getContext("2d");if(o.save(),null!=core.components.Camera.getDebugCamera()){var r=core.components.Camera.getDebugCamera().getEntity(),s=core.components.Camera.getDebugCamera().getZoomScale();o.translate(-r.getPosition().x*s,-r.getPosition().y*s),o.scale(s,s)}var c=10;o.beginPath(),o.globalAlpha=.65,o.lineWidth=1,o.strokeStyle="#44FF44",o.moveTo(this.getPosition().x,this.getPosition().y-c),o.lineTo(this.getPosition().x,this.getPosition().y+c),o.moveTo(this.getPosition().x-c,this.getPosition().y),o.lineTo(this.getPosition().x+c,this.getPosition().y),o.moveTo(this.getPosition().x-c,this.getPosition().y-c),o.lineTo(this.getPosition().x+c,this.getPosition().y+c),o.moveTo(this.getPosition().x+c,this.getPosition().y-c),o.lineTo(this.getPosition().x-c,this.getPosition().y+c),o.stroke(),o.restore()}core.GameManager.instance.getLayerByName("debug").setWholeCanvasDirty(!0)},postUpdate:function(){core.GameObject.prototype.postUpdate.call(this);for(var e=this._components.length,t=0;e>t;){var n=t++,i=this._components[n];i.getIsActive()&&i.getIsUpdating()&&i.postUpdate()}},render:function(){core.GameObject.prototype.render.call(this);for(var e=this._components.length,t=0;e>t;){var n=t++,i=this._components[n];i.render()}},update:function(){core.GameObject.prototype.update.call(this);for(var e=this._components.length,t=e;t-->0;){var n=this._components[t];n.getIsMarkedForDeletion()&&(n.onDestroyed(),this._components.splice(t,1))}e=this._components.length;for(var i=0;e>i;){var a=i++,n=this._components[a];n.getIsActive()&&n.getIsUpdating()&&n.update()}},setScale:function(e,t,n){null==n&&(n=1),null==t&&(t=1),null==e&&(e=1),this._scale=new core.Vector3D(e,t,n),this.dispatchEvent("displayUpdate")},getScale:function(){var e=this._scale.getClone();
if(null!=this._parent){var t=this._parent.getScale();e.x*=t.x,e.y*=t.y,e.z*=t.z}return e},getScaleRef:function(){return this._scale},setRotation:function(e,t,n){null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this._rotation=new core.Vector3D(e,t,n),this.dispatchEvent("displayUpdate")},getRotation:function(){var e=this._rotation.getClone();if(null!=this._parent){var t=this._parent.getRotation();e.x+=t.x,e.y+=t.y,e.z+=t.z}return e},getLocalRotation:function(){return this._rotation.getClone()},getRotationRef:function(){return this._rotation},translate:function(e,t,n){null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this._position.x+=e,this._position.y+=t,this._position.z+=n,this.dispatchEvent("displayUpdate")},setPosition:function(e,t,n){null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this._position=new core.Vector3D(e,t,n),this.dispatchEvent("displayUpdate")},getPositionRef:function(){return this._position},getLocalPosition:function(){return this._position.getClone()},setIsVisible:function(e){this._isVisible=e,this.dispatchEvent(this._isVisible?"visibilityOn":"visibilityOff"),this.dispatchEvent("displayUpdate")},deactivate:function(){core.GameObject.prototype.deactivate.call(this);for(var e=this._children.length,t=0;e>t;){var n=t++;this._children[n].deactivate()}this.dispatchEvent("displayUpdate")},activate:function(){core.GameObject.prototype.activate.call(this);for(var e=this._children.length,t=0;e>t;){var n=t++;this._children[n].activate()}this.dispatchEvent("displayUpdate")},getIsVisible:function(){return null!=this._parent?this._parent.getIsVisible()&&this._isVisible:this._isVisible},findChildByName:function(e){for(var t=this._children.length,n=0;t>n;){var i=n++,a=this._children[i];if(a.getName()==e)return a;var o=a.findChildByName(e);if(null!=o)return o}return null},getIsActive:function(){return this._isActive},setIsActive:function(e){core.GameObject.prototype.setIsActive.call(this,e);for(var t=this._children.length,n=0;t>n;){var i=n++;this._children[i].setIsActive(e)}},getPosition:function(){var e=this._position.getClone();if(null!=this._parent){var t=this._parent.getPosition(),n=this._parent.getScale(),i=this._parent.getRotation(),a=Math.sin(i.z),o=Math.cos(i.z),r=e.x*o-e.y*a,s=e.x*a+e.y*o;e.x=r*n.x+t.x,e.y=s*n.y+t.y,e.z=e.z+t.z}return e},setParent:function(e){this._parent=e,null!=this.getParent()?this.dispatchEvent("addedToParent",{parent:this.getParent()}):this.dispatchEvent("removedFromParent"),this.dispatchEvent("displayUpdate")},getRootEntity:function(){return null!=this.getParent()?this.getParent():this},getParent:function(){return this._parent},destroyAllChildren:function(){for(var e=this._children.length,t=0;e>t;){var n=t++,i=this._children[n];i.destroy()}this._children=new Array},addChild:function(e){null!=e.getParent()&&e.getParent().removeChild(e),this._children.push(e),e.setParent(this)},removeChild:function(e){for(var t=this._children.length,n=0;t>n;){var i=n++,a=this._children[i];if(a==e)return a.setParent(null),void this._children.splice(i,1)}},hasChild:function(e){for(var t=this._children.length,n=0;t>n;){var i=n++,a=this._children[i];if(a==e)return!0}return!1},setGameState:function(e){this._gameState=e},getGameState:function(){return this._gameState},setIsZSorted:function(e){this._isZSorted=e},getIsZSorted:function(){return this._isZSorted},init:function(){core.GameObject.prototype.init.call(this)},_isZSorted:null,_components:null,_isVisible:null,_gameState:null,_children:null,_parent:null,_scale:null,_rotation:null,_position:null,__class__:core.Entity}),core.EntityEvent=function(){},$hxClasses["core.EntityEvent"]=core.EntityEvent,core.EntityEvent.__name__=["core","EntityEvent"],core.EntityEvent.prototype={__class__:core.EntityEvent},core.EventListener=function(e,t){this.eventName=e,this.action=t},$hxClasses["core.EventListener"]=core.EventListener,core.EventListener.__name__=["core","EventListener"],core.EventListener.prototype={action:null,eventName:null,__class__:core.EventListener},core.FlashAnimationFactory=function(){},$hxClasses["core.FlashAnimationFactory"]=core.FlashAnimationFactory,core.FlashAnimationFactory.__name__=["core","FlashAnimationFactory"],core.FlashAnimationFactory.createFlashAnimation=function(e,t,n,i,a,o,r,s){return null==core.spriteSheets.SpriteSheetManager.getInstance().getSpriteSheetByName(t)&&core.spriteSheets.SpriteSheetManager.getInstance().registerSpriteSheet(core.spriteSheets.SpriteSheet.parseFromXmlString(t,n,core.managers.AssetManager.getAsset(i))),new core.components.FlashAnimation(e,a,t,o,r,s)},core.FlashAnimationFactory.prototype={__class__:core.FlashAnimationFactory},core.GameConfig=function(){},$hxClasses["core.GameConfig"]=core.GameConfig,core.GameConfig.__name__=["core","GameConfig"],core.GameConfig.getProperty=function(e){return core.GameConfig._properties.get(e)},core.GameConfig.setProperty=function(e,t){core.GameConfig._properties.set(e,t)},core.GameConfig.parseGameConfig=function(e){for(var t=Xml.parse(e),n=t.elementsNamed("gameConfig").next().elementsNamed("property");n.hasNext();){var i=n.next(),a=i.get("name"),o=i.get("value");core.GameConfig._properties.set(a,o),core.utilities.Debug.log(Std.string(a)+" SET TO: "+Std.string(o))}},core.GameConfig.prototype={__class__:core.GameConfig},core.GameManager=function(e,t,n,i){this._manualUpdate=!0,this._dontResizeContainer=!1,this._canvasHeightPortrait=0,this._canvasWidthPortrait=0,this._canvasHeightLandscape=0,this._canvasWidthLandscape=0,this._prevHeight=0,this._prevWidth=0,this._isUpdating=!0,this._hasFocus=!1,this._screenScale=null,this._isOrientationScreenShowing=!1,this._currentOrientation=0,this._isDeferredActionsPaused=!1,this._deferredActions=null,this._layers=null,this._managers=null,this._gameStates=null,this._screenScale=new core.Vector2D(1,1),this._gameStates=new Array,core.GameManager.instance=this,this._layers=new Array,this._managers=new Array,this._deferredActions=new Array;new core.GameState;this.setCanvasDimensions(e,t,n,i)},$hxClasses["core.GameManager"]=core.GameManager,core.GameManager.__name__=["core","GameManager"],core.GameManager.getElapsedTime=function(){return Math.min(1/27,core.GameManager._elapsedTime-core.GameManager._prevElapsedTime)},core.GameManager.getRealElapsedTime=function(){return core.GameManager._elapsedTime-core.GameManager._prevElapsedTime},core.GameManager.isAppMode=function(){var e="isStandalone";return window[e]},core.GameManager.isMobile=function(){var e=(Main.getWindow().navigator.userAgent,Main.getWindow().navigator.platform);return-1!=e.indexOf("iPhone")||-1!=e.indexOf("iPod")||-1!=e.indexOf("iPad")||-1!=e.indexOf("android")||-1!=e.indexOf("Linux")?!0:!1},core.GameManager.isInternetExplorer=function(){return-1!=navigator.userAgent.toLowerCase().indexOf("msie")},core.GameManager.isFirefox=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},core.GameManager.isSafari=function(){return navigator.userAgent.toLowerCase().indexOf("safari/")>-1},core.GameManager.prototype={isPhone:function(){return-1!=navigator.userAgent.toLowerCase().indexOf("iphone")||-1!=navigator.userAgent.toLowerCase().indexOf("ipod")||-1!=navigator.userAgent.toLowerCase().indexOf("android")||-1!=navigator.userAgent.toLowerCase().indexOf("Linux")?!0:!1},hideAddressBar:function(){this.isPhone()&&(window.location.hash||(document.height<window.outerHeight&&(document.body.style.height=window.outerHeight+50+"px"),setTimeout(function(){window.scrollTo(0,1)},50)))},resumeUpdates:function(){this._isUpdating=!0},stopUpdates:function(){this._isUpdating=!1},onScreenScaleUpdated:function(){if(!this._dontResizeContainer){var e,t;e=Main.getWindow().innerWidth,t=Main.getWindow().innerHeight,core.GameManager.isMobile()&&this.hideAddressBar(),this._dontResizeContainer||(0==this._currentOrientation?(Main.getContainer().style.width=this._canvasWidthLandscape+"px",Main.getContainer().style.height=this._canvasHeightLandscape+"px"):(Main.getContainer().style.width=this._canvasWidthPortrait+"px",Main.getContainer().style.height=this._canvasHeightPortrait+"px"));for(var n=this._layers.length,i=0;n>i;){var a,o,r=i++,s=this._layers[r],c=s.getCanvas();null!=c&&(0==this._currentOrientation?(c.width=this._canvasWidthLandscape*this.getScreenScale().x,c.height=this._canvasHeightLandscape*this.getScreenScale().y,a=this._canvasWidthLandscape*this.getScreenScale().x,o=this._canvasHeightLandscape*this.getScreenScale().y):(c.width=this._canvasWidthPortrait*this.getScreenScale().x,c.height=this._canvasHeightPortrait*this.getScreenScale().y,a=this._canvasWidthPortrait*this.getScreenScale().x,o=this._canvasHeightPortrait*this.getScreenScale().y),s.getContainer()==Main.getContainer()||s.getIsHooked()||(s.getContainer().style.left=e/2-a/2+"px",s.getContainer().style.top=t/2-o/2+"px"),s.getIsHooked()||(s.getContainer().style.width=a+"px",s.getContainer().style.height=o+"px"),c.style.width=a+"px",c.style.height=o+"px")}this.sendGlobalMessage("onScreenScaleUpdated")}},onResizeWindow:function(){var e=1;(core.GameManager.isMobile()||"1"==core.GameConfig.getProperty("scaleToScreenOnDesktop"))&&(e=this._canvasWidthLandscape/this._canvasHeightLandscape<=Std.parseFloat(core.GameConfig.getProperty("widescreenTolerance"))?0==this._currentOrientation?Main.getWindow().innerHeight/this._canvasHeightLandscape:Main.getWindow().innerHeight/this._canvasHeightPortrait:0==this._currentOrientation?Main.getWindow().innerWidth/this._canvasWidthLandscape:Main.getWindow().innerWidth/this._canvasWidthPortrait),this.sendGlobalMessage("onResizedWindow"),this.setScreenScale(e,e)},onFocusLost:function(){core.utilities.Debug.log("onFocusLost()"),core.managers.SoundManager.pauseAllSounds(),this._hasFocus&&(core.managers.InputManager.getInstance().enablePageKeyPresses(),this._hasFocus=!1,this._isUpdating=!1,this.sendGlobalMessage("onFocusLost"))},onFocusGained:function(){core.utilities.Debug.log("onFocusGained()"),this._hasFocus||(core.managers.InputManager.getInstance().disablePageKeyPresses(),core.managers.SoundManager.resumeAllSounds(),this._hasFocus=!0,this._isUpdating=!0,this.sendGlobalMessage("onFocusGained"))},getCurrentOrientation:function(){return this._currentOrientation},getScreenOffset:function(){var e=Main.getWindow().innerWidth,t=Main.getWindow().innerHeight;return 0==this._currentOrientation?new core.Vector2D(e/2-this._canvasWidthLandscape*this.getScreenScale().x/2,t/2-this._canvasHeightLandscape*this.getScreenScale().y/2):new core.Vector2D(e/2-this._canvasWidthPortrait*this.getScreenScale().x/2,t/2-this._canvasHeightPortrait*this.getScreenScale().y/2)},getScreenSize:function(){return 0==this.getCurrentOrientation()?new core.Vector2D(this._canvasWidthLandscape,this._canvasHeightLandscape):new core.Vector2D(this._canvasWidthPortrait,this._canvasHeightPortrait)},getScreenScale:function(){return this._screenScale},setScreenScale:function(e,t){this.updateDivClass(),this._screenScale.x=e,this._screenScale.y=t,this.onScreenScaleUpdated()},onOrientationChanged:function(){core.utilities.Debug.log("onOrientationChanged()");var e=!1;e=core.GameManager.isMobile()?90==Main.getWindow().orientation||-90==Main.getWindow().orientation:!0,"HORIZONTAL"==core.GameConfig.getProperty("forceOrientation")?(this._currentOrientation=0,e=!0):"VERTICAL"==core.GameConfig.getProperty("forceOrientation")?(this._currentOrientation=1,e=!1):this._currentOrientation=e?0:1,this.onResizeWindow(),this.sendGlobalMessage("onOrientationChanged",{isHorizontal:e}),core.utilities.Debug.log("~onOrientationChanged()")},destroyDeferredAction:function(e){HxOverrides.remove(this._deferredActions,e)},invokeDeferredAction:function(e,t,n){var i=new core.DeferredAction(e,t,n);return this._deferredActions.push(i),i},sendGlobalMessage:function(e,t){for(var n=this._managers.length,i=n-1;i>=0;)this._managers[i].handleMessage(e,t),i--;for(var a=this._gameStates.length,o=a-1;o>=0;)this._gameStates[o].handleMessage(e,t),o--},getLayerByName:function(e){for(var t=this._layers.length,n=0;t>n;){var i=n++,a=this._layers[i];if(a.getName()==e)return a}return null},removeLayer:function(e){e.destroy(),HxOverrides.remove(this._layers,e)},addLayer:function(e){this._layers.push(e)},switchToGameState:function(e,t,n){null==n&&(n=!0),null!=e&&this.removeGameState(e,n),null!=t&&(this.addGameState(t),t.init())},destroyAllDeferredActions:function(){this._deferredActions=new Array},setIsDeferredActionsPaused:function(e){this._isDeferredActionsPaused=e},getManager:function(e){for(var t=this._managers.length,n=0;t>n;){var i=n++;if(Type.getClass(this._managers[i])==e)return this._managers[i]}return null},removeManager:function(e){for(var t=this._managers.length,n=0;t>n;){var i=n++;if(this._managers[i]==e)return this._managers.splice(i,1),void e.destroy()}},addManager:function(e){this._managers.push(e)},removeGameState:function(e,t){null==t&&(t=!0),t&&e.destroy();for(var n=this._gameStates.length,i=0;n>i;){var a=i++;if(e==this._gameStates[a])return void this._gameStates.splice(a,1)}},addGameState:function(e){for(var t=this._gameStates.length,n=0;t>n;){var i=n++;if(e==this._gameStates[i])return e}return this._gameStates.push(e),e},debugRender:function(){for(var e=this._gameStates.length,t=0;e>t;){var n=t++;this._gameStates[n].debugRender()}for(var i=this._managers.length,t=0;i>t;){var n=t++;this._managers[n].debugRender()}for(var a=this._layers.length,t=0;a>t;){var n=t++,o=this._layers[n];"debug"==o.getName()&&o.render(),o.debugRender()}},render:function(e){if(null==e&&(e=!1),!e||!this._manualUpdate){for(var t=this._layers.length,n=0;t>n;){var i=n++,a=this._layers[i];a.getAutoClear()&&a.getWholeCanvasDirty()&&a.clear()}for(var o=this._gameStates.length,n=0;o>n;){var i=n++;this._gameStates[i].render()}for(var r=this._managers.length,n=0;r>n;){var i=n++;this._managers[i].render()}t=this._layers.length;for(var n=0;t>n;){var i=n++,a=this._layers[i];"debug"!=a.getName()&&a.render()}}},updateDivClass:function(){if(null!=Main.getContainer()){var e="container";1==this._currentOrientation&&(e+=" portrait"),Main.getContainer().className=e}},postUpdate:function(e){if(!e||!this._manualUpdate){for(var t=this._managers.length,n=0;t>n;){var i=n++,a=this._managers[i];a.getIsActive()&&a.postUpdate()}for(var o=this._gameStates.length,n=0;o>n;){var i=n++;this._gameStates[i].getIsActive()&&this._gameStates[i].postUpdate()}}},updateWithElapsedTime:function(){this.update()},update:function(e){if(null==e&&(e=!1),!e||!this._manualUpdate){if(core.GameManager._elapsedTime=haxe.Timer.stamp(),this._isUpdating){var t=0,n=this._managers.length;for(t=n;t-->0;){var i=this._managers[t];i.getIsMarkedForDeletion()&&(i.onDestroyed(),this._managers.splice(t,1))}n=this._managers.length;for(var a=0;n>a;){var o=a++,i=this._managers[o];i.getIsActive()&&i.update()}var r=this._gameStates.length;for(t=r;t-->0;){var s=this._gameStates[t];s.getIsMarkedForDeletion()&&(s.onDestroyed(),this._gameStates.splice(t,1))}r=this._gameStates.length;for(var a=0;r>a;){var o=a++;this._gameStates[o].getIsActive()&&this._gameStates[o].update()}for(var c=this._layers.length,a=0;c>a;){var o=a++,l=this._layers[o];l.update()}if(!this._isDeferredActionsPaused)for(var u=this._deferredActions.length,o=u;o-->0;){var h=this._deferredActions[o];null!=h&&(h.timeUntilExecute-=core.GameManager.getElapsedTime(),h.timeUntilExecute<=0&&(h.params?h.actionToExecute(h.params):h.actionToExecute(),this._deferredActions.splice(o,1)))}}(this._prevWidth!=Main.getWindow().innerWidth||this._prevHeight!=Main.getWindow().innerHeight)&&(this.onOrientationChanged(),this._prevWidth=Main.getWindow().innerWidth,this._prevHeight=Main.getWindow().innerHeight),core.GameManager._prevElapsedTime=core.GameManager._elapsedTime}},onAssetsLoaded:function(){},setDontResizeContainer:function(e){this._dontResizeContainer=e},getDontResizeContainer:function(){return this._dontResizeContainer},initLayers:function(){core.utilities.Debug.log("initLayers()"),Main.TEST_MODE_ENABLED&&this.addLayer(new core.Layer("test",this._canvasWidthLandscape,this._canvasHeightLandscape,Main.getContainer())),this.addLayer(new core.Layer("gamificationUi",this._canvasWidthLandscape,this._canvasHeightLandscape,null,!1)),Main.TEST_MODE_ENABLED&&this.addLayer(new core.Layer("debug",this._canvasWidthLandscape,this._canvasHeightLandscape)),core.utilities.Debug.log("~initLayers()")},setCanvasDimensions:function(e,t,n,i){this._canvasWidthLandscape=e,this._canvasHeightLandscape=t,this._canvasWidthPortrait=n,this._canvasHeightPortrait=i},setManualUpdate:function(e){this._manualUpdate=e},getManualUpdate:function(){return this._manualUpdate},init:function(){core.utilities.Debug.log("GameManager::init()"),core.GameManager._prevElapsedTime=haxe.Timer.stamp(),core.GameManager._elapsedTime=haxe.Timer.stamp(),this.initLayers();var e=new core.managers.PhysicsManager;this.addManager(e);var t=new core.managers.InputManager;this.addManager(t);var n=new core.managers.EdgeManager;this.addManager(n);var i=new core.managers.FontManager;this.addManager(i);var a=new core.managers.DebugManager;this.addManager(a);var o=new game.DeferredVoManager;this.addManager(o),this.addManager(Main.gamificationInterface),Main.getWindow().addEventListener("orientationchange",$bind(this,this.onOrientationChanged)),Main.getWindow().addEventListener("pageshow",$bind(this,this.onOrientationChanged)),Main.getWindow().addEventListener("resize",$bind(this,this.onResizeWindow)),Main.getWindow().addEventListener("focus",$bind(this,this.onFocusGained)),Main.getWindow().addEventListener("blur",$bind(this,this.onFocusLost)),Main.getWindow().addEventListener("pagehide",$bind(this,this.onFocusLost)),core.managers.InputManager.getInstance().disablePageKeyPresses(),this._prevWidth=Main.getWindow().innerWidth,this._prevHeight=Main.getWindow().innerHeight,core.GameManager.isMobile()?this.onOrientationChanged():this.setScreenScale(1,1),core.utilities.Debug.log("~GameManager::init()")},_manualUpdate:null,_dontResizeContainer:null,_canvasHeightPortrait:null,_canvasWidthPortrait:null,_canvasHeightLandscape:null,_canvasWidthLandscape:null,_prevHeight:null,_prevWidth:null,_isUpdating:null,_hasFocus:null,_screenScale:null,_isOrientationScreenShowing:null,_currentOrientation:null,_isDeferredActionsPaused:null,_deferredActions:null,_layers:null,_managers:null,_gameStates:null,__class__:core.GameManager},core.GameState=function(){this._entitiesToDelete=null,this._activeEntities=null,this._isPaused=!1,this._elapsedTime=0,this._hasInitialized=!1,core.GameObject.call(this),this._entities=new Array,this._activeEntities=new Array,this._entitiesToDelete=new Array},$hxClasses["core.GameState"]=core.GameState,core.GameState.__name__=["core","GameState"],core.GameState.__super__=core.GameObject,core.GameState.prototype=$extend(core.GameObject.prototype,{destroy:function(){core.GameObject.prototype.destroy.call(this);for(var e=this._entities.length,t=e-1;t>=0;)this._entities[t].destroy(),this._entities[t].onDestroyed(),t--;this._isMarkedForDeletion=!0},scheduleEntityForDeletion:function(e){this._entitiesToDelete.push(e)},bringEntityToFront:function(e){HxOverrides.remove(this._entities,e)&&this._entities.push(e)},resume:function(){this._isPaused=!1},pause:function(){this._isPaused=!0},handleMessage:function(e,t){core.GameObject.prototype.handleMessage.call(this,e,t);for(var n=(new Array,this._activeEntities.length),i=n-1;i>=0;){if(this._activeEntities[i].getIsActive()){var a=this._activeEntities[i].handleMessage(e,t);if("endMessage"==a)return}i--}},sortEntitiesByZ:function(){this._entities.sort(function(e,t){var n=e.getPosition(),i=t.getPosition();return n.z==i.z?e.getInstanceId()>t.getInstanceId()?1:-1:n.z<i.z?1:-1})},getClosestEntityToPointByTag:function(e,t){for(var n=this.getEntitiesByTag(t),i=-1,a=null,o=n.length,r=0;o>r;){var s=r++,c=n[s],l=c.getPosition(),u=new core.Vector3D(l.x-e.x,l.y-e.y,l.z-e.z),h=u.getLength();(-1==i||i>h)&&(i=h,a=c)}return a},getEntitiesByTag:function(e){for(var t=new Array,n=this._entities.length,i=0;n>i;){var a=i++,o=this._entities[a];o.hasTag(e)&&t.push(o)}return t},getEntities:function(){return this._entities},getHasEntity:function(e){return-1!=core.utilities.ArrayUtils.indexOf(this._entities,e)},removeEntity:function(e){HxOverrides.remove(this._entities,e)},addEntity:function(e){return null==e&&(e=new core.Entity),e.setGameState(this),this._entities.push(e),this._activeEntities.push(e),e},debugRender:function(){core.GameObject.prototype.debugRender.call(this);for(var e=this._entities.length,t=0;e>t;){var n=t++,i=this._entities[n];i.getIsActive()&&i.getIsVisible()&&i.debugRender()}},render:function(){core.GameObject.prototype.render.call(this);for(var e=this._activeEntities.length,t=0;e>t;){var n=t++,i=this._activeEntities[n];i.getIsVisible()&&i.render()}},postUpdate:function(){if(core.GameObject.prototype.postUpdate.call(this),!this._isPaused)for(var e=this._activeEntities.length,t=0;e>t;){var n=t++,i=this._activeEntities[n];i.getIsUpdating()&&i.postUpdate()}},update:function(){core.GameObject.prototype.update.call(this);for(var e=this._entitiesToDelete.length,t=0;e>t;){var n=t++,i=this._entitiesToDelete[n];i.onDestroyed(),HxOverrides.remove(this._entities,i)}core.utilities.ArrayUtils.clear(this._entitiesToDelete);var a=0;if(!this._isPaused){core.utilities.ArrayUtils.clear(this._activeEntities),e=this._entities.length;for(var t=0;e>t;){var n=t++,i=this._entities[n];null!=i&&i.getIsActive()&&(this._activeEntities.push(i),a++,i.getIsUpdating()&&i.update())}this._elapsedTime+=core.GameManager.getElapsedTime()}"1"==core.GameConfig.getProperty("debugCheats")&&core.managers.InputManager.getInstance().isKeyPressed(105)&&(core.utilities.Debug.log(this._entities),core.utilities.Debug.log(this._activeEntities),core.utilities.Debug.log("Active entities: "+a))},onButtonClicked:function(){},init:function(){core.GameObject.prototype.init.call(this)},_entitiesToDelete:null,_activeEntities:null,_isPaused:null,_elapsedTime:null,_entities:null,_hasInitialized:null,__class__:core.GameState}),core.Layer=function(e,t,n,i,a){null==a&&(a=!0),this._isHooked=!1,this._wholeCanvasDirty=!1,this._canvasHeight=0,this._canvasWidth=0,this._autoClear=!0,this._backgroundColor="#000000",core.GameObject.call(this),this.setName(e),a&&(this._container=Main.getDocument().createElement("div"),this._container.id=e,this._container.style.position="absolute",this._container.style.left="0px",this._container.style.top="0px",this._container.style.width=t+"px",this._container.style.height=n+"px",this._container.style.zIndex=core.Layer._currentZIndex++,this._container.className="layer",this._canvas=Main.getDocument().createElement("canvas"),this._canvas.width=t,this._canvas.height=n,this._canvasWidth=t,this._canvasHeight=n,this._canvas.style.position="absolute",null!=i?(i.appendChild(this._container),this._container.appendChild(this._canvas)):(Main.getContainer().appendChild(this._container),this._container.appendChild(this._canvas)))},$hxClasses["core.Layer"]=core.Layer,core.Layer.__name__=["core","Layer"],core.Layer.__super__=core.GameObject,core.Layer.prototype=$extend(core.GameObject.prototype,{destroy:function(){core.GameObject.prototype.destroy.call(this),core.utilities.Debug.log("LAYER DESTROYED"),null!=this.getContainer().parentNode&&this.getContainer().parentNode.removeChild(this.getContainer()),null!=this.getCanvas().parentNode&&this.getCanvas().parentNode.removeChild(this.getCanvas())},setAutoClear:function(e){this._autoClear=e},getAutoClear:function(){return this._autoClear},getCanvas:function(){return this._canvas},getContainer:function(){return this._container},update:function(){core.GameObject.prototype.update.call(this)},render:function(){core.GameObject.prototype.render.call(this)},clear:function(){var e=this._canvas.getContext("2d");e.clearRect(0,0,this._canvas.width,this._canvas.height),this._wholeCanvasDirty=!1},setWholeCanvasDirty:function(e){this._wholeCanvasDirty=e},getWholeCanvasDirty:function(){return this._wholeCanvasDirty},getIsHooked:function(){return this._isHooked},hookToCanvasAndContainer:function(e,t){null!=this._canvas&&(this._canvas.parentNode.removeChild(this._canvas),this._canvas=null),this._canvas=e,this._canvasWidth=this._canvas.width,this._canvasHeight=this._canvas.height,this._container=t,this._isHooked=!0},_isHooked:null,_wholeCanvasDirty:null,_canvasHeight:null,_canvasWidth:null,_autoClear:null,_canvas:null,_container:null,_backgroundColor:null,__class__:core.Layer}),core.LoadBatch=function(e){null==e&&(e=!1),this._minLoadTimeElapsed=!1,this._currentAssetToLoad=0,this._loadCompleted=!1,this._assetsToLoad=0,this._onCompleteCallback=null,this._assetLoadingInfo=new Array,e&&(this._minLoadTimeElapsed=!0)},$hxClasses["core.LoadBatch"]=core.LoadBatch,core.LoadBatch.__name__=["core","LoadBatch"],core.LoadBatch.prototype={onMinLoadElapsed:function(){this._minLoadTimeElapsed=!0,this.checkAssetsLoaded()},loadNext:function(){if(!(this._assetsToLoad<=0&&this._minLoadTimeElapsed)){for(var e=null;null==e&&this._assetsToLoad>0&&(e=this._assetLoadingInfo[this._currentAssetToLoad++],null==e);)this._assetsToLoad--,this.checkAssetsLoaded(),core.utilities.Debug.log("SKIP");if(!(this._assetsToLoad<=0))switch(e.type[1]){case 1:if(!core.GameManager.isMobile()||core.managers.SoundManager.getIsWebkitEnabled()){var t=null,n=this;if(core.managers.AssetManager.assetExists(e.name))return n._assetsToLoad--,n.checkAssetsLoaded(),core.GameManager.instance.sendGlobalMessage("onFileLoaded",{progress:n._assetLoadingInfo.length-n._assetsToLoad,total:n._assetLoadingInfo.length}),void n.loadNext();var i=HxOverrides.substr(e.source,e.source.length-3,3),a=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;if("mp3"==i&&a&&!core.managers.SoundManager.getUseFlashSound()&&(e.source=StringTools.replace(e.source,"mp3","ogg")),!core.managers.SoundManager.getIsWebkitEnabled()||a)if(core.managers.SoundManager.getUseFlashSound()){var o=soundManager.createSound({id:e.name,url:e.source,autoLoad:!0,onload:function(){n._assetsToLoad--,n.checkAssetsLoaded(),core.GameManager.instance.sendGlobalMessage("onFileLoaded",{progress:n._assetLoadingInfo.length-n._assetsToLoad,total:n._assetLoadingInfo.length}),n.loadNext()}});core.managers.AssetManager.registerAsset(e.name,o)}else core.utilities.Debug.log("Old sound load method"),t=document.createElement("audio"),t.src=e.source,t.preload=!0,t.autoplay=!1,t.id=e.name,t.addEventListener("canplay",function(){n._assetsToLoad--,n.checkAssetsLoaded(),core.GameManager.instance.sendGlobalMessage("onFileLoaded",{progress:n._assetLoadingInfo.length-n._assetsToLoad,total:n._assetLoadingInfo.length}),n.loadNext()},!1),t.addEventListener("onerror",function(){n._assetsToLoad--,alert("File not found: "+e.source),n.checkAssetsLoaded(),core.GameManager.instance.sendGlobalMessage("onFileLoaded",{progress:n._assetLoadingInfo.length-n._assetsToLoad,total:n._assetLoadingInfo.length}),n.loadNext()}),core.managers.AssetManager.registerAsset(e.name,t),t.load(),core.utilities.Debug.log("Load concluded");else{core.utilities.Debug.log("New sound load method");var r=new XMLHttpRequest;r.open("GET",e.source,!0),r.responseType="arraybuffer",core.managers.AssetManager.registerAsset(e.name+"_src",e.source),r.onload=function(){var t=core.managers.SoundManager.getAudioContextInstance();t.decodeAudioData(r.response,function(t){core.managers.AssetManager.registerAsset(e.name,t),n._assetsToLoad--,n.checkAssetsLoaded(),core.GameManager.instance.sendGlobalMessage("onFileLoaded",{progress:n._assetLoadingInfo.length-n._assetsToLoad,total:n._assetLoadingInfo.length}),n.loadNext()})},r.send()}}else core.managers.AssetManager.registerAsset(e.name,e.source),this._assetsToLoad--,this.checkAssetsLoaded(),this.loadNext();break;case 0:var s=new Image;core.managers.AssetManager.registerAsset(e.name,s);var n=this;s.addEventListener("load",$bind(this,this.onAssetLoaded)),s.addEventListener("onerror",function(){n._assetsToLoad--,alert("file not found: "+e.source),n.checkAssetsLoaded(),core.GameManager.instance.sendGlobalMessage("onFileLoaded",{progress:n._assetLoadingInfo.length-n._assetsToLoad,total:n._assetLoadingInfo.length}),n.loadNext()}),s.id=e.name,s.src=e.source;break;case 2:var c;c=new XMLHttpRequest;var n=this;c.onload=function(){core.managers.AssetManager.registerAsset(e.name,c.responseText),n._assetsToLoad--,n.checkAssetsLoaded(),core.GameManager.instance.sendGlobalMessage("onFileLoaded",{progress:n._assetLoadingInfo.length-n._assetsToLoad,total:n._assetLoadingInfo.length}),n.loadNext()},c.onerror=function(){n._assetsToLoad--,alert("File not found: "+e.source),n.checkAssetsLoaded(),n.loadNext()},c.open("GET",e.source,!0),c.send();break;case 3:}}},load:function(e){if(this._onCompleteCallback=e,this._minLoadTimeElapsed=!0,this._assetsToLoad=this._assetLoadingInfo.length,this._loadCompleted=!1,this._currentAssetToLoad=0,0==this._assetLoadingInfo.length)return void e();this._assetLoadingInfo.length;this.loadNext(),core.GameManager.instance.setIsDeferredActionsPaused(!1),core.GameManager.instance.invokeDeferredAction(0,$bind(this,this.onMinLoadElapsed))},checkAssetsLoaded:function(){core.GameManager.instance.sendGlobalMessage("onFileLoaded",{progress:this._assetLoadingInfo.length-this._assetsToLoad,total:this._assetLoadingInfo.length}),this._minLoadTimeElapsed&&(this._loadCompleted||this._assetsToLoad>0||(this._loadCompleted=!0,this._onCompleteCallback()))},onXmlHttpRequestLoaded:function(){},onAssetLoaded:function(){this._assetsToLoad--,this.checkAssetsLoaded(),core.GameManager.instance.sendGlobalMessage("onFileLoaded",{progress:this._assetLoadingInfo.length-this._assetsToLoad,total:this._assetLoadingInfo.length}),this.loadNext()},numAssets:function(){return this._assetsToLoad},addAsset:function(e,t,n){this._assetLoadingInfo.push(new core.AssetLoadingInfo(e,Main.BASE_PATH+t,n))},_minLoadTimeElapsed:null,_currentAssetToLoad:null,_loadCompleted:null,_assetsToLoad:null,_onCompleteCallback:null,_assetLoadingInfo:null,__class__:core.LoadBatch},core.Localizer=function(){},$hxClasses["core.Localizer"]=core.Localizer,core.Localizer.__name__=["core","Localizer"],core.Localizer.stringsXml=null,core.Localizer.initStrings=function(){var e=core.managers.AssetManager.getAsset("strings");core.Localizer.stringsXml=Xml.parse(e).elementsNamed("strings").next()},core.Localizer.getString=function(e){try{return core.Localizer.stringsXml.elementsNamed(e).next().firstChild().getNodeValue()}catch(t){throw js.Boot.__instanceof(t,String)?"Could not find string: "+e:t}},core.Localizer.prototype={__class__:core.Localizer},core.Manager=function(){core.GameObject.call(this)},$hxClasses["core.Manager"]=core.Manager,core.Manager.__name__=["core","Manager"],core.Manager.__super__=core.GameObject,core.Manager.prototype=$extend(core.GameObject.prototype,{__class__:core.Manager}),core.RaycastInfo=function(){this.normal=null,this.distance=-1,this.collider=null,this.collisionPoint=null,this.normal=new core.Vector2D},$hxClasses["core.RaycastInfo"]=core.RaycastInfo,core.RaycastInfo.__name__=["core","RaycastInfo"],core.RaycastInfo.prototype={normal:null,distance:null,collider:null,collisionPoint:null,__class__:core.RaycastInfo},core.Rect2D=function(e,t,n,i){null==i&&(i=0),null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this.ul=new core.Vector2D(e,t),this.wh=new core.Vector2D(n,i)},$hxClasses["core.Rect2D"]=core.Rect2D,core.Rect2D.__name__=["core","Rect2D"],core.Rect2D.prototype={getIntersect:function(e){return!(this.ul.x>e.ul.x+e.wh.x||this.ul.x+this.wh.x<e.ul.x||this.ul.y>e.ul.y+e.wh.y||this.ul.y+this.wh.y<e.ul.y)},getClone:function(){return new core.Rect2D(this.ul.x,this.ul.y,this.wh.x,this.wh.y)},wh:null,ul:null,__class__:core.Rect2D},core.SaveData=function(){},$hxClasses["core.SaveData"]=core.SaveData,core.SaveData.__name__=["core","SaveData"],core.SaveData.setItem=function(e,t){core.utilities.Debug.log("Setting key: "+e+" to "+t),null!=function(){var e,t;try{t=window.sessionStorage,t.getItem("")}catch(n){t=null}return e=t}(this)&&function(){var e,t;try{t=window.sessionStorage,t.getItem("")}catch(n){t=null}return e=t}(this).setItem(e,t),null!=function(){var e,t;
try{t=window.localStorage,t.getItem("")}catch(n){t=null}return e=t}(this)&&function(){var e,t;try{t=window.localStorage,t.getItem("")}catch(n){t=null}return e=t}(this).setItem(e,t)},core.SaveData.getItem=function(e,t){if(null==t&&(t="0"),null==function(){var e,t;try{t=window.sessionStorage,t.getItem("")}catch(n){t=null}return e=t}(this)&&null==function(){var e,t;try{t=window.localStorage,t.getItem("")}catch(n){t=null}return e=t}(this))return core.utilities.Debug.log("Couldn't find local or session storage"),t;var n=function(){var e,t;try{t=window.sessionStorage,t.getItem("")}catch(n){t=null}return e=t}(this).getItem(e);return null==n&&(n=function(){var e,t;try{t=window.localStorage,t.getItem("")}catch(n){t=null}return e=t}(this).getItem(e)),null!=n?(core.utilities.Debug.log("Returning "+n+" for "+e),n):(core.utilities.Debug.log("Returning default value for "+e),t)},core.SaveData.deleteAllSaveData=function(){null!=function(){var e,t;try{t=window.sessionStorage,t.getItem("")}catch(n){t=null}return e=t}(this)&&function(){var e,t;try{t=window.sessionStorage,t.getItem("")}catch(n){t=null}return e=t}(this).clear(),null!=function(){var e,t;try{t=window.localStorage,t.getItem("")}catch(n){t=null}return e=t}(this)&&function(){var e,t;try{t=window.localStorage,t.getItem("")}catch(n){t=null}return e=t}(this).clear()},core.SaveData.prototype={__class__:core.SaveData},core.StateTransition=function(e,t,n){null==n&&(n=0),core.GameState.call(this),this._stateA=e,this._stateB=t,this._transitionType=n,this.duration=core.StateTransition.DEFAULT_DURATION,this.halfwayDelay=core.StateTransition.DEFAULT_HALFWAY_DELAY},$hxClasses["core.StateTransition"]=core.StateTransition,core.StateTransition.__name__=["core","StateTransition"],core.StateTransition.__super__=core.GameState,core.StateTransition.prototype=$extend(core.GameState.prototype,{onTransitionComplete:function(){core.utilities.Debug.log("onTransitionComplete()"),core.managers.InputManager.getInstance().setInputDisabled(!1),this.destroy()},onTransitionHalfway:function(){switch(core.utilities.Debug.log("onTransitionHalfway()"),null!=this._stateA&&this._stateA.destroy(),null!=this._stateB&&core.GameManager.instance.addGameState(this._stateB),this._transitionType){case core.StateTransition.TRANSITION_DEFAULT:core.GameManager.instance.invokeDeferredAction(this.halfwayDelay,$bind(this,this.transitionOut));break;case core.StateTransition.TRANSITION_IN_ONLY:core.GameManager.instance.invokeDeferredAction(this.halfwayDelay,$bind(this,this.onTransitionComplete));break;case core.StateTransition.TRANSITION_OUT_ONLY:}},onTransitionStart:function(){core.utilities.Debug.log("onTransitionStart() "),core.managers.InputManager.getInstance().setInputDisabled(!0)},transitionOut:function(){},transitionIn:function(){},setupTransition:function(){},startTransition:function(){switch(this.onTransitionStart(),this._transitionType){case core.StateTransition.TRANSITION_DEFAULT:core.GameManager.instance.invokeDeferredAction(this.duration/2,$bind(this,this.onTransitionHalfway)),core.GameManager.instance.invokeDeferredAction(this.duration+this.halfwayDelay,$bind(this,this.onTransitionComplete)),this.transitionIn();break;case core.StateTransition.TRANSITION_IN_ONLY:core.GameManager.instance.invokeDeferredAction(this.duration/2,$bind(this,this.onTransitionHalfway)),this.transitionIn();break;case core.StateTransition.TRANSITION_OUT_ONLY:this.transitionOut(),this.onTransitionHalfway(),core.GameManager.instance.invokeDeferredAction(this.duration/2,$bind(this,this.onTransitionComplete))}},init:function(){core.GameState.prototype.init.call(this),null!=this._stateA&&this._stateA.pause(),this.setupTransition(),this.startTransition()},_transitionType:null,_stateB:null,_stateA:null,halfwayDelay:null,duration:null,__class__:core.StateTransition}),core.Vector2D=function(e,t){null==t&&(t=0),null==e&&(e=0),this.y=0,this.x=0,this.x=e,this.y=t},$hxClasses["core.Vector2D"]=core.Vector2D,core.Vector2D.__name__=["core","Vector2D"],core.Vector2D.prototype={getNormalized:function(){var e=this.getLength();return new core.Vector2D(this.x/e,this.y/e)},dotProduct:function(e){return this.x*e.x+this.y*e.y},scaleBy:function(e,t){this.x*=e,this.y*=t},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},getClone:function(){return new core.Vector2D(this.x,this.y)},y:null,x:null,__class__:core.Vector2D},core.Vector3D=function(e,t,n){null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this.z=0,this.y=0,this.x=0,this.x=e,this.y=t,this.z=n},$hxClasses["core.Vector3D"]=core.Vector3D,core.Vector3D.__name__=["core","Vector3D"],core.Vector3D.prototype={getNormalized:function(){var e=this.getLength();return new core.Vector3D(this.x/e,this.y/e,this.z/e)},getClone:function(){return new core.Vector3D(this.x,this.y,this.z)},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},scaleBy:function(e){this.x*=e,this.y*=e,this.z*=e},subtract:function(e){return new core.Vector3D(this.x-e.x,this.y-e.y,this.z-e.z)},add:function(e){return new core.Vector3D(this.x+e.x,this.y+e.y,this.z+e.z)},z:null,y:null,x:null,__class__:core.Vector3D},core.audio={},core.audio.SoundData=function(e,t,n){this._currentTime=-1,this._isInitialized=!1,this._soundName=e,this._volume=t,this._loop=n,this.init()},$hxClasses["core.audio.SoundData"]=core.audio.SoundData,core.audio.SoundData.__name__=["core","audio","SoundData"],core.audio.SoundData.prototype={getCurrentTime:function(){return this._currentTime},getSoundLength:function(){return 1},setLoop:function(e){this._loop=e},getLoop:function(){return this._loop},setVolume:function(e){this._volume=e},getVolume:function(){return this._volume},stop:function(){core.managers.SoundManager.removeSoundFromPlayingSounds(this)},pause:function(){},update:function(){this._currentTime+=core.GameManager.getRealElapsedTime()},resume:function(){},play:function(e){null==e&&(e=0)},init:function(){this._isInitialized=!0},_soundName:null,_currentTime:null,_isInitialized:null,_loop:null,_volume:null,__class__:core.audio.SoundData},core.audio.FlashSoundData=function(e,t,n){core.audio.SoundData.call(this,e,t,n)},$hxClasses["core.audio.FlashSoundData"]=core.audio.FlashSoundData,core.audio.FlashSoundData.__name__=["core","audio","FlashSoundData"],core.audio.FlashSoundData.__super__=core.audio.SoundData,core.audio.FlashSoundData.prototype=$extend(core.audio.SoundData.prototype,{setVolume:function(e){core.audio.SoundData.prototype.setVolume.call(this,e),core.utilities.Debug.log("FlashSoundData::setVolume()"),this._audio.setVolume(100*e)},resume:function(){core.audio.SoundData.prototype.resume.call(this),this._audio.resume()},stop:function(){core.audio.SoundData.prototype.stop.call(this),core.utilities.Debug.log("FlashSoundData::stop()"),this._audio.stop()},pause:function(){core.audio.SoundData.prototype.pause.call(this),core.utilities.Debug.log("FlashSoundData::pause()"),this._audio.pause()},play:function(e){null==e&&(e=0),core.audio.SoundData.prototype.play.call(this,e),core.utilities.Debug.log("FlashSoundData::play()");var t=this;this._audio.play({onfinish:function(){t._loop?(t.play(0),core.managers.SoundManager.removeSoundFromPlayingSounds(t)):core.managers.SoundManager.removeSoundFromPlayingSounds(t)},onstop:function(){core.managers.SoundManager.removeSoundFromPlayingSounds(t)}})},init:function(){core.audio.SoundData.prototype.init.call(this),this._audio=soundManager.createSound({id:this._soundName}),this._audio.setVolume(100*this._volume)},_audio:null,__class__:core.audio.FlashSoundData}),core.audio.Html5SoundData=function(e,t,n){core.audio.SoundData.call(this,e,t,n)},$hxClasses["core.audio.Html5SoundData"]=core.audio.Html5SoundData,core.audio.Html5SoundData.__name__=["core","audio","Html5SoundData"],core.audio.Html5SoundData.__super__=core.audio.SoundData,core.audio.Html5SoundData.prototype=$extend(core.audio.SoundData.prototype,{setVolume:function(e){core.audio.SoundData.prototype.setVolume.call(this,e),core.utilities.Debug.log("Html5SoundData::setVolume()"),this._audio.volume=e},onSoundComplete:function(e){core.utilities.Debug.log("Html5SoundData::onSoundComplete()");e.currentTarget;core.managers.SoundManager.removeSoundFromPlayingSounds(this)},stop:function(){core.audio.SoundData.prototype.stop.call(this),core.utilities.Debug.log("Html5SoundData::stop()");var e=this._audio;e.pause(),e.currentTime=0},pause:function(){core.audio.SoundData.prototype.pause.call(this),core.utilities.Debug.log("Html5SoundData::pause()"),this._audio.pause()},resume:function(){core.audio.SoundData.prototype.resume.call(this),core.utilities.Debug.log("Html5SoundData::resume()"),this._audio.play()},play:function(e){null==e&&(e=0),core.audio.SoundData.prototype.play.call(this,e),core.utilities.Debug.log("Html5SoundData::play()"),this._audio=core.managers.AssetManager.getAsset(this._soundName),this._audio.play(),this._audio.addEventListener("ended",$bind(this,this.onSoundComplete),!1),this._audio.loop=this._loop,this._audio.volume=this._volume},init:function(){core.audio.SoundData.prototype.init.call(this)},_audio:null,__class__:core.audio.Html5SoundData}),core.audio.WebkitSoundData=function(e,t,n){null==n&&(n=!1),null==t&&(t=1),this._isPlaying=!1,this._isStopped=!1,this._audio=null,core.audio.SoundData.call(this,e,t,n)},$hxClasses["core.audio.WebkitSoundData"]=core.audio.WebkitSoundData,core.audio.WebkitSoundData.__name__=["core","audio","WebkitSoundData"],core.audio.WebkitSoundData.__super__=core.audio.SoundData,core.audio.WebkitSoundData.prototype=$extend(core.audio.SoundData.prototype,{setVolume:function(e){core.audio.SoundData.prototype.setVolume.call(this,e),core.utilities.Debug.log("WebkitSoundData::setVolume()"),this._audio.gain?this._audio.gain.value=e:this._gainNode.value=e},onSoundComplete:function(){core.utilities.Debug.log("onSoundComplete()")},update:function(){core.audio.SoundData.prototype.update.call(this),this.getCurrentTime()>this.getSoundLength()&&!this.getLoop()&&core.managers.SoundManager.removeSoundFromPlayingSounds(this),core.utilities.Debug.log(this.getCurrentTime()+"/"+this.getSoundLength())},getSoundLength:function(){return this._audio.buffer.duration},stop:function(){core.audio.SoundData.prototype.stop.call(this),core.utilities.Debug.log("WebkitSoundData::stop()"),this._isStopped||(this._isStopped=!0,this._isPlaying=!1,null!=this._audio.stop?this._audio.stop(0):this._audio.noteOff(0))},resume:function(){core.audio.SoundData.prototype.resume.call(this),core.utilities.Debug.log("WebkitSoundData::resume()"),this.init(),this.play(this._currentTime),this._isStopped=!1},pause:function(){core.audio.SoundData.prototype.pause.call(this),core.utilities.Debug.log("WebkitSoundData::pause()"),this._isStopped||(this._isStopped=!0,this._isPlaying=!1,null!=this._audio.stop?this._audio.stop(0):this._audio.noteOff(0))},play:function(e){null==e&&(e=0),core.audio.SoundData.prototype.play.call(this,e),this._isPlaying||(core.utilities.Debug.log("WebkitSoundData::play()"),this._currentTime=e,null!=this._audio.start?this._audio.start(e):this._audio.noteOn(e),this.setVolume(this._volume),this._isPlaying=!0,this._isStopped=!1)},init:function(){core.audio.SoundData.prototype.init.call(this),core.utilities.Debug.log("WebkitSoundData::init()"),this._audioContext=core.managers.SoundManager.getAudioContextInstance();this._audio=this._audioContext.createBufferSource(),this._audio.buffer=core.managers.AssetManager.getAsset(this._soundName),this._gainNode=null!=this._audioContext.createGain?this._audioContext.createGain():this._audioContext.createGainNode(),this._audio.connect(this._gainNode),this._gainNode.connect(this._audioContext.destination),this._audio.loop=this._loop,this._audio.id=this._soundName,this.setVolume(this._volume)},_isPlaying:null,_isStopped:null,_audioContext:null,_audio:null,__class__:core.audio.WebkitSoundData}),core.collision={},core.collision.Collision=function(){this.layers=new Array,this.ul=new core.Vector2D,this.wh=new core.Vector2D},$hxClasses["core.collision.Collision"]=core.collision.Collision,core.collision.Collision.__name__=["core","collision","Collision"],core.collision.Collision.prototype={getRaycastPoint:function(e,t,n,i){return null==i&&(i=!1),-1},checkPointIntersect:function(){return!1},getClone:function(){var e=new core.collision.Collision;e.ul=this.ul.getClone(),e.wh=this.wh.getClone();for(var t=this.layers.length,n=0;t>n;){var i=n++;e.layers.push(this.layers[i])}return e},hasLayer:function(e){for(var t=this.layers.length,n=0;t>n;){var i=n++;if(this.layers[i]==e)return!0}return!1},layers:null,wh:null,ul:null,__class__:core.collision.Collision},core.collision.BoxCollision=function(){core.collision.Collision.call(this)},$hxClasses["core.collision.BoxCollision"]=core.collision.BoxCollision,core.collision.BoxCollision.__name__=["core","collision","BoxCollision"],core.collision.BoxCollision.__super__=core.collision.Collision,core.collision.BoxCollision.prototype=$extend(core.collision.Collision.prototype,{getClone:function(){return null},getRaycastPoint:function(e,t,n,i){null==i&&(i=!1);for(var a=new core.Vector2D,o=[new core.Vector2D(this.ul.x,this.ul.y),new core.Vector2D(this.ul.x+this.wh.x,this.ul.y),new core.Vector2D(this.ul.x+this.wh.x,this.ul.y+this.wh.y),new core.Vector2D(this.ul.x,this.ul.y+this.wh.y)],r=-1,s=o.length,c=0,l=s-1;l>c;){var u=c++,h=o[u],d=o[u+1],g=core.utilities.Math2.lineIntersect2D(e,t,h,d,a);if(g>0){if(!i)return n.x=a.x,n.y=a.y,g;(-1==r||r>g)&&(n.x=a.x,n.y=a.y,r=g)}}var m=o[0],p=o[o.length-1],g=core.utilities.Math2.lineIntersect2D(e,t,m,p,a);if(g>0){if(!i)return n.x=a.x,n.y=a.y,g;(-1==r||r>g)&&(n.x=a.x,n.y=a.y,r=g)}return r},checkBoxIntersect:function(){return!0},checkPointIntersect:function(e){return core.collision.Collision.prototype.checkPointIntersect.call(this,e),e.x>=this.ul.x&&e.y>=this.ul.y&&e.x<=this.ul.x+this.wh.x&&e.y<=this.ul.y+this.wh.y},__class__:core.collision.BoxCollision}),core.collision.PolygonCollision=function(){this._highestPoint=null,this._lowestPoint=null,core.collision.Collision.call(this),this._lowestPoint=new core.Vector2D(999999,999999),this._highestPoint=new core.Vector2D(-999999,-999999),this._points=new Array},$hxClasses["core.collision.PolygonCollision"]=core.collision.PolygonCollision,core.collision.PolygonCollision.__name__=["core","collision","PolygonCollision"],core.collision.PolygonCollision.__super__=core.collision.Collision,core.collision.PolygonCollision.prototype=$extend(core.collision.Collision.prototype,{getClone:function(){return null},getRaycastPoint:function(e,t,n,i,a){null==i&&(i=!1);var o=new core.Rect2D;o.ul=this._lowestPoint.getClone(),o.wh=new core.Vector2D(this._highestPoint.x-this._lowestPoint.x,this._highestPoint.y-this._lowestPoint.y),o.ul.x+=this.ul.x,o.ul.y+=this.ul.y;var r=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y),c=new core.Rect2D(e.x<t.x?e.x:t.x,e.y<t.y?e.y:t.y,r,s);if(!o.getIntersect(c))return-1;for(var l=new core.Vector2D,u=this._points,h=-1,d=u.length,g=0,m=d-1;m>g;){var p=g++,f=u[p].getClone();f.x+=this.ul.x,f.y+=this.ul.y;var _=u[p+1].getClone();_.x+=this.ul.x,_.y+=this.ul.y;var y=core.utilities.Math2.lineIntersect2D(e,t,f,_,l);if(y>0){if(!i){if(n.x=l.x,n.y=l.y,null!=a){var v=new core.Vector2D(_.y-f.y,f.x-_.x).getNormalized();a.x=v.x,a.y=v.y;var x=new core.Vector2D(t.x-e.x,t.y-e.y).dotProduct(a);x>0&&(a.x*=-1,a.y*=-1)}return y}if(-1==h||h>y){if(n.x=l.x,n.y=l.y,null!=a){var v=new core.Vector2D(_.y-f.y,f.x-_.x).getNormalized();a.x=v.x,a.y=v.y;var x=new core.Vector2D(t.x-e.x,t.y-e.y).dotProduct(a);x>0&&(a.x*=-1,a.y*=-1)}h=y}}}var S=u[0].getClone();S.x+=this.ul.x,S.y+=this.ul.y;var C=u[u.length-1].getClone();C.x+=this.ul.x,C.y+=this.ul.y;var y=core.utilities.Math2.lineIntersect2D(e,t,S,C,l);if(y>0){if(!i){if(n.x=l.x,n.y=l.y,null!=a){var v=new core.Vector2D(C.y-S.y,S.x-C.x).getNormalized();a.x=v.x,a.y=v.y;var x=new core.Vector2D(t.x-e.x,t.y-e.y).dotProduct(a);x>0&&(a.x*=-1,a.y*=-1)}return y}if(-1==h||h>y){if(n.x=l.x,n.y=l.y,null!=a){var v=new core.Vector2D(C.y-S.y,S.x-C.x).getNormalized();a.x=v.x,a.y=v.y;var x=new core.Vector2D(t.x-e.x,t.y-e.y).dotProduct(a);x>0&&(a.x*=-1,a.y*=-1)}h=y}}return h},checkPointIntersect:function(e){return e.x>=this.ul.x&&e.y>=this.ul.y&&e.x<=this.ul.x+this.wh.x&&e.y<=this.ul.y+this.wh.y},getPoints:function(){return this._points},addPoint:function(e,t){this._points.push(new core.Vector2D(e,t)),e<this._lowestPoint.x&&(this._lowestPoint.x=e),t<this._lowestPoint.y&&(this._lowestPoint.y=t),e>this._highestPoint.x&&(this._highestPoint.x=e),t>this._highestPoint.y&&(this._highestPoint.y=t)},_highestPoint:null,_lowestPoint:null,_points:null,__class__:core.collision.PolygonCollision}),core.components={},core.components.Animation=function(e,t,n,i){null==i&&(i=!0),this._fps=30,this._loop=!0,this._length=0,this._name=e,this._animationKeyframes=new Array,null==n?n=0:this._length=n,this._spriteSheetName=t,this._offset=new core.Vector2D},$hxClasses["core.components.Animation"]=core.components.Animation,core.components.Animation.__name__=["core","components","Animation"],core.components.Animation.parseFromXmlString=function(e,t){for(var n=Xml.parse(t),i=n.elementsNamed("animation").next().get("name"),a=new core.components.Animation(i,e,n.elementsNamed("animation").next().get("length")),o=n.elementsNamed("animation").next().elementsNamed("keyframe");o.hasNext();){var r=o.next(),s=new core.components.flashAnimation.AnimationKeyframe(r.get("index"),r.get("spriteIndex"));a.addKeyframe(s)}return core.managers.AnimationManager.getInstance().registerAnimation(a),a},core.components.Animation.makeLinearAnimationFromSheet=function(e,t,n,i){null==i&&(i=-1);var a=core.spriteSheets.SpriteSheetManager.getInstance().getSpriteSheetByName(t),o=0;i=-1==i?a.getNumSprites():i;for(var r=new core.components.Animation(e,t,i*n),s=0;i>s;){var c=s++,l=new core.components.flashAnimation.AnimationKeyframe(o,c);r.addKeyframe(l),o+=n}return core.managers.AnimationManager.getInstance().registerAnimation(r),r},core.components.Animation.makeLinearAnimationFromSheetBySpriteName=function(e,t,n,i,a,o){null==o&&(o=-1),null==a&&(a=!1);var r=core.spriteSheets.SpriteSheetManager.getInstance().getSpriteSheetByName(t),s=0,c=r.getNumSprites();o=-1==o?c:o;for(var l=0,u=(new Array,0);o>u;){var h=u++;StringTools.startsWith(r.getSpriteInfoByIndex(h).getName(),n)&&l++}for(var d=new core.components.Animation(e,t,l*i),g=0,u=0;c>u;){var h=u++;if(StringTools.startsWith(r.getSpriteInfoByIndex(h).getName(),n)){var m=new core.components.flashAnimation.AnimationKeyframe(s,h);if(d.addKeyframe(m),s+=i,g++,g>=o)break}}return d.setLoop(a),core.managers.AnimationManager.getInstance().registerAnimation(d),d},core.components.Animation.prototype={getSpriteIndexAtPosition:function(e){for(var t=this._animationKeyframes.length,n=this._animationKeyframes[0].getSpriteIndex(),i=0;t>i;){var a=i++,o=this._animationKeyframes[a];if(!(e>=o.getPosition()/this._fps))break;n=this._animationKeyframes[a].getSpriteIndex()}return n},addKeyframe:function(e){this._animationKeyframes.push(e);var t=e.getPosition();this._length=Math.max(this._length,e.getPosition()),t>this._length&&(this._length=t)},setOffset:function(e,t){this._offset.x=e,this._offset.y=t},getOffset:function(){return this._offset},setLoop:function(e){this._loop=e},getLoop:function(){return this._loop},getSpriteSheetName:function(){return this._spriteSheetName},getName:function(){return this._name},getLength:function(){return this._length/this._fps},_offset:null,_fps:null,_loop:null,_length:null,_spriteSheetName:null,_name:null,_animationKeyframes:null,__class__:core.components.Animation},core.components.Button=function(e,t,n,i){this._inactiveOneFrame=!1,this._killMessageOnMouseDown=!1,this._isMouseOver=!1,this._handPointer=!0,this._onMouseOut=null,this._onMouseOver=null,this._onMouseMoved=null,this._onMouseUp=null,this._onMouseDown=null,this._onClicked=null,core.Component.call(this,e,"Button"),this._boxCollision=new core.collision.BoxCollision,this._collisionSize=t,this._collisionOffset=n,this.setOnMouseDown(i)},$hxClasses["core.components.Button"]=core.components.Button,core.components.Button.__name__=["core","components","Button"],core.components.Button.createFromHTMLElement=function(e){var t=new core.components.Button(e.getEntity(),e.getSize(),new core.Vector2D(0,0));return t},core.components.Button.createFromHTMLElementID=function(e,t,n){null==n&&(n=0);var i=Main.getDocument().getElementById(t),a=i.clientWidth+n,o=i.clientHeight+n,r=new core.components.Button(e,new core.Vector2D(a,o),new core.Vector2D(i.offsetLeft-e.getPosition().x-n/2+a/2,i.offsetTop-e.getPosition().y-n/2+o/2));return r},core.components.Button.createFromEdgeHTMLElementID=function(e,t,n,i){null==i&&(i=0);var a=Main.getDocument().getElementById(t),o=Std.parseInt(a.style.width)+i,r=Std.parseInt(a.style.height)+i,s=core.components.HtmlElements.getStylePositionOfDomElement(a).y-i/2,c=core.components.HtmlElements.getStylePositionOfDomElement(a).x-i/2;return new core.components.Button(e,new core.Vector2D(o,r),new core.Vector2D(c-e.getPosition().x+o/2,s-e.getPosition().y+r/2),n)},core.components.Button.createFromGameImage=function(e){var t=new core.components.Button(e.getEntity(),e.getSize(),e.getOffset());return t},core.components.Button.__super__=core.Component,core.components.Button.prototype=$extend(core.Component.prototype,{destroy:function(){core.Component.prototype.destroy.call(this),this._isMouseOver&&this.onMouseOut(null)},debugRender:function(){core.Component.prototype.debugRender.call(this);var e=core.GameManager.instance.getLayerByName("debug").getCanvas().getContext("2d");if(e.save(),null!=core.components.Camera.getDebugCamera()){var t=core.components.Camera.getDebugCamera().getEntity();e.translate(-t.getPosition().x,-t.getPosition().y)}e.beginPath(),e.lineWidth=1,e.strokeStyle="#FF0000",e.moveTo(this._boxCollision.ul.x,this._boxCollision.ul.y),e.lineTo(this._boxCollision.ul.x+this._boxCollision.wh.x,this._boxCollision.ul.y),e.lineTo(this._boxCollision.ul.x+this._boxCollision.wh.x,this._boxCollision.ul.y+this._boxCollision.wh.y),e.lineTo(this._boxCollision.ul.x,this._boxCollision.ul.y+this._boxCollision.wh.y),e.lineTo(this._boxCollision.ul.x,this._boxCollision.ul.y),e.stroke(),e.restore()},deactivate:function(){core.Component.prototype.deactivate.call(this),this._isMouseOver&&this._handPointer&&(Main.getDocument().body.style.cursor="default")},activate:function(){core.Component.prototype.activate.call(this),this._inactiveOneFrame=!0},handleMessage:function(e,t){if(core.Component.prototype.handleMessage.call(this,e,t),!(t&&t.isDisabled||!this.getEntity().getIsVisible()||!this.getIsActive()||core.managers.InputManager.getInstance().getInputDisabled()||this._inactiveOneFrame))switch(e){case"mouseClick":this.onMouseClick(t);break;case"mouseDown":this.onMouseDown(t)&&this._killMessageOnMouseDown&&(t.isDisabled=!0);break;case"mouseUp":this.onMouseUp(t);break;case"mouseMove":this.onMouseMoved(t);break;case"verifyTouches":core.GameManager.isMobile()||this.verifyTouches(t)}},setCollisionProperties:function(e,t){this._collisionSize=e,this._collisionOffset=t},verifyTouches:function(e){var t=!1;if(null!=e&&null!=e.touches){for(var n=e.touches.length,i=0;n>i;){var a=i++,o=e.touches[a],r=core.GameManager.instance.getScreenOffset(),s=(o.pageX-r.x)/core.GameManager.instance.getScreenScale().x,c=(o.pageY-r.y)/core.GameManager.instance.getScreenScale().y;this._boxCollision.checkPointIntersect(new core.Vector2D(s,c))&&(t=!0)}!t&&this._isMouseOver?this.onMouseOut(null):t&&!this._isMouseOver&&this.onMouseOver(null)}},onMouseOut:function(){this._handPointer&&(Main.getDocument().body.style.cursor="default"),this.getEntity().dispatchEvent("mouseOut",{button:this,entity:this.getEntity()}),null!=this._onMouseOut&&this._onMouseOut(this),this._isMouseOver=!1},onMouseOver:function(){this._handPointer&&(Main.getDocument().body.style.cursor="pointer"),this.getEntity().dispatchEvent("mouseOver",{button:this,entity:this.getEntity()}),null!=this._onMouseOver&&this._onMouseOver(this),this._isMouseOver=!0},onMouseUp:function(e){this._boxCollision.checkPointIntersect(e)&&(this.getEntity().dispatchEvent("mouseUp",{button:this,entity:this.getEntity()}),null!=this._onMouseUp&&this._onMouseUp(this))},onMouseMoved:function(e){this._boxCollision.checkPointIntersect(e)?(this.getEntity().dispatchEvent("mouseOver",{button:this,entity:this.getEntity()}),this._isMouseOver||this.onMouseOver(e),this._isMouseOver=!0,this.getEntity().dispatchEvent("mouseMove",{button:this,entity:this.getEntity()}),null!=this._onMouseMoved&&this._onMouseMoved(this)):this._isMouseOver&&(core.GameManager.isMobile()||(this.onMouseOut(e),this._isMouseOver=!1))},onMouseDown:function(){var e=core.managers.InputManager.getInstance().getMousePosition();return this._boxCollision.checkPointIntersect(e)?(this.getEntity().dispatchEvent("mouseDown",{button:this,entity:this.getEntity()}),null!=this._onMouseDown&&this._onMouseDown(this),core.GameManager.isMobile()&&(this._isMouseOver=!0,null!=this._onMouseOver&&this._onMouseOver(this)),!0):!1},onMouseClick:function(e){this._boxCollision.checkPointIntersect(e)&&(this.getEntity().dispatchEvent("mouseClick",{button:this,entity:this.getEntity()}),null!=this._onClicked&&this._onClicked(this))},updateCollision:function(){this._boxCollision.ul.x=this.getEntity().getPosition().x-this._collisionSize.x/2,this._boxCollision.ul.y=this.getEntity().getPosition().y-this._collisionSize.y/2,this._boxCollision.wh.x=this._collisionSize.x,this._boxCollision.wh.y=this._collisionSize.y,null!=this._collisionOffset&&(this._boxCollision.ul.x+=this._collisionOffset.x,this._boxCollision.ul.y+=this._collisionOffset.y)},getOffset:function(){return this._collisionOffset},setOffset:function(e,t){this._collisionOffset=new core.Vector2D(e,t)},update:function(){core.Component.prototype.update.call(this),this.updateCollision(),this._inactiveOneFrame=!1,0==this.getEntity().getIsVisible()&&(this._inactiveOneFrame=!0)},init:function(){core.Component.prototype.init.call(this),this.updateCollision()},setData:function(e){this._data=e},getData:function(){return this._data},setKillMessageOnMouseDown:function(e){this._killMessageOnMouseDown=e},getKillMessageOnMouseDown:function(){return this._killMessageOnMouseDown},setOnMouseOver:function(e){this._onMouseOver=e},setOnMouseOut:function(e){this._onMouseOut=e},setOnMouseUp:function(e){this._onMouseUp=e},setOnMouseMoved:function(e){this._onMouseMoved=e},setOnMouseDown:function(e){this._onMouseDown=e},setOnClicked:function(e){this._onClicked=e},_data:null,_inactiveOneFrame:null,_killMessageOnMouseDown:null,_isMouseOver:null,_handPointer:null,_collisionOffset:null,_collisionSize:null,_boxCollision:null,_onMouseOut:null,_onMouseOver:null,_onMouseMoved:null,_onMouseUp:null,_onMouseDown:null,_onClicked:null,__class__:core.components.Button}),core.components.Camera=function(e){this._offset=null,this._zoomScale=1,this._slackMovement=null,this._cameraBounds=null,this._target=null,core.Component.call(this,e,"Camera"),this._offset=new core.Vector2D,null==core.components.Camera._debugCamera&&(core.components.Camera._debugCamera=this)},$hxClasses["core.components.Camera"]=core.components.Camera,core.components.Camera.__name__=["core","components","Camera"],core.components.Camera._debugCamera=null,core.components.Camera.getDebugCamera=function(){return core.components.Camera._debugCamera},core.components.Camera.__super__=core.Component,core.components.Camera.prototype=$extend(core.Component.prototype,{destroy:function(){core.Component.prototype.destroy.call(this),core.components.Camera._debugCamera==this&&(core.components.Camera._debugCamera=null)},destroyBounds:function(){this._cameraBounds=null},getViewBounds:function(){var e=this.getEntity().getPosition(),t=core.GameManager.instance.getScreenSize().x/2/this._zoomScale,n=core.GameManager.instance.getScreenSize().y/2/this._zoomScale;return new core.Rect2D(e.x,e.y,2*t,2*n)},setBounds:function(e,t,n,i){this._cameraBounds=new core.Rect2D(e,t,n-e,i-t)},getBounds:function(){return this._cameraBounds},update:function(){if(core.Component.prototype.update.call(this),null!=this._target&&(null==this._slackMovement?this.getEntity().setPosition(this._target.getPosition().x-core.GameManager.instance.getScreenSize().x/this._zoomScale/2+this._offset.x/this._zoomScale,this._target.getPosition().y-core.GameManager.instance.getScreenSize().y/this._zoomScale/2+this._offset.y/this._zoomScale,this.getEntity().getPosition().z):this._slackMovement.setTarget(this._target.getPosition().x-core.GameManager.instance.getScreenSize().x/this._zoomScale/2+this._offset.x/this._zoomScale,this._target.getPosition().y-core.GameManager.instance.getScreenSize().y/this._zoomScale/2+this._offset.y/this._zoomScale,this.getEntity().getPosition().z)),null!=this._cameraBounds){var e=this.getEntity().getPosition().getClone(),t=core.GameManager.instance.getScreenSize().x/2/this._zoomScale,n=core.GameManager.instance.getScreenSize().y/2/this._zoomScale,i=new core.Vector2D(e.x+t,e.y+n),a=!1;i.x-t<this._cameraBounds.ul.x&&(i.x=this._cameraBounds.ul.x+t,a=!0),i.y-n<this._cameraBounds.ul.y&&(i.y=this._cameraBounds.ul.y+n,a=!0),i.x+t>this._cameraBounds.ul.x+this._cameraBounds.wh.x&&(i.x=this._cameraBounds.ul.x+this._cameraBounds.wh.x-t,a=!0),e.y+n>this._cameraBounds.ul.y+this._cameraBounds.wh.y&&(i.y=this._cameraBounds.ul.y+this._cameraBounds.wh.y-n,a=!0),e.x=i.x-t,e.y=i.y-n,a&&this.getEntity().setPosition(e.x,e.y,e.z)}},getCenter:function(){var e=this.getEntity().getPosition();return new core.Vector3D(e.x-core.GameManager.instance.getScreenSize().x/this._zoomScale/2,e.y-core.GameManager.instance.getScreenSize().y/this._zoomScale/2,e.z)},jumpToTarget:function(){null!=this._target&&this.getEntity().setPosition(this._target.getPosition().x-core.GameManager.instance.getScreenSize().x/this._zoomScale/2+this._offset.x/this._zoomScale,this._target.getPosition().y-core.GameManager.instance.getScreenSize().y/this._zoomScale/2+this._offset.y/this._zoomScale,this.getEntity().getPosition().z)},getSlackMovement:function(){return this._slackMovement},init:function(){core.Component.prototype.init.call(this),this._slackMovement=this.getSiblingComponent(core.components.SlackMovement)},setZoomScale:function(e){this._zoomScale=e},getZoomScale:function(){return this._zoomScale},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e},setTarget:function(e){this._target=e},getTarget:function(){return this._target},_offset:null,_zoomScale:null,_slackMovement:null,_cameraBounds:null,_target:null,__class__:core.components.Camera}),core.components.Collider=function(e,t){this._onExit=null,this._onInside=null,this._onEnter=null,this._offset=null,core.Component.call(this,e,"Collider"),this._offset=t},$hxClasses["core.components.Collider"]=core.components.Collider,core.components.Collider.__name__=["core","components","Collider"],core.components.Collider.__super__=core.Component,core.components.Collider.prototype=$extend(core.Component.prototype,{onDestroyed:function(){core.Component.prototype.onDestroyed.call(this),core.managers.PhysicsManager.getInstance().removeCollider(this)},onExit:function(e){this._isActive&&null!=this._onExit&&this._onExit(e,this)},onInside:function(e){this._isActive&&null!=this._onInside&&this._onInside(e,this)},onEnter:function(e){this._isActive&&null!=this._onEnter&&this._onEnter(e,this)},setOnInside:function(e){this._onInside=e},setOnExit:function(e){this._onExit=e},setOnEnter:function(e){this._onEnter=e},debugRender:function(){core.Component.prototype.debugRender.call(this)},getRaycastPoint:function(e,t,n,i){return null==i&&(i=!1),core.managers.PhysicsManager.getInstance().dispatchEvent("raycastCheck",{start:e,end:t}),-1},update:function(){core.Component.prototype.update.call(this)},checkPointIntersect:function(){return!1},getCollision:function(){return null},init:function(){core.Component.prototype.init.call(this),core.managers.PhysicsManager.getInstance().registerCollider(this)},_onExit:null,_onInside:null,_onEnter:null,_offset:null,__class__:core.components.Collider}),core.components.DeferredActionComponent=function(e){core.Component.call(this,e,"DeferredActionComponent"),this._deferredActions=new Array
},$hxClasses["core.components.DeferredActionComponent"]=core.components.DeferredActionComponent,core.components.DeferredActionComponent.__name__=["core","components","DeferredActionComponent"],core.components.DeferredActionComponent.__super__=core.Component,core.components.DeferredActionComponent.prototype=$extend(core.Component.prototype,{destroyAllDeferredActions:function(){this._deferredActions=new Array},addDeferredAction:function(e,t,n){var i=new core.DeferredAction(e,t,n);return this._deferredActions.push(i),i},update:function(){core.Component.prototype.update.call(this);for(var e=this._deferredActions.length,t=e-1;t>=0;){var n=this._deferredActions[t];n.update(),n.timeUntilExecute<=0&&(n.actionToExecute(n.params),HxOverrides.remove(this._deferredActions,n)),t--}},_deferredActions:null,__class__:core.components.DeferredActionComponent}),core.components.EdgeElements=function(e,t,n,i){this._layer=null,this._div=null,this._isDirty=!0,this._compositionName="",this._divId="",core.Component.call(this,e,"EdgeElements"),this._divId=t,this._compositionName=n,this._layer=i,this.updateHtml()},$hxClasses["core.components.EdgeElements"]=core.components.EdgeElements,core.components.EdgeElements.__name__=["core","components","EdgeElements"],core.components.EdgeElements.__super__=core.Component,core.components.EdgeElements.prototype=$extend(core.Component.prototype,{handleMessage:function(e,t){switch(core.Component.prototype.handleMessage.call(this,e,t),e){case"onScreenScaleUpdated":this.onDisplayUpdated()}},destroy:function(){core.Component.prototype.destroy.call(this),null!=this._div&&(this._div.style.display="none")},onDisplayUpdated:function(){this._div.style.webkitTransformOrigin="0% 0%",$(this._div).css("transform-origin","0% 0%"),this._div.style.webkitTransform="translate(0, 0px) scale("+this.getEntity().getScale().x*core.GameManager.instance.getScreenScale().x+","+this.getEntity().getScale().y*core.GameManager.instance.getScreenScale().y+")",this._div.style.transform="translate(0, 0px) scale("+this.getEntity().getScale().x*core.GameManager.instance.getScreenScale().x+","+this.getEntity().getScale().y*core.GameManager.instance.getScreenScale().y+")",this.updatePosition()},updatePosition:function(){this._div.style.width=core.GameManager.instance.getScreenSize().x+"px",this._div.style.height=core.GameManager.instance.getScreenSize().y+"px"},update:function(){core.Component.prototype.update.call(this),this._isDirty&&this.updateHtml(),this._div.style.display=this.getEntity().getIsVisible()?"block":"none"},getSymbol:function(){},setElementPosition:function(e,t){this.getElementByName(e).style.top=t.y+"px",this.getElementByName(e).style.left=t.x+"px"},showElementByName:function(e,t){null==t&&(t=!0),this.getElementByName(e).style.display=t?"block":"none"},setElementTextByName:function(e,t){this.getElementByName(e).innerHTML=t},getElementByName:function(e){if(null==this._div)return null;var t=this.getStage().getSymbolElement()[0];return core.components.HtmlElements.getChildDivById(t,e)},getStage:function(){return this.getComposition().getStage()},getComposition:function(){return AdobeEdge.getComposition(this._compositionName)},updateHtml:function(){if(this._isDirty=!1,this._div=Main.getDocument().getElementById(this._divId),null==this._div)throw this.deactivate(),"div by the name of "+this._divId+" was not found.  Make sure this div exists on index.html and index_d.html!";this._div.style.position="absolute",this._div.style.webkitTransformOrigin="0% 0%",$(this._div).css("transform-origin","0% 0%"),this._div.style.webkitTransform="translate(0, 0px) scale("+this.getEntity().getScale().x*core.GameManager.instance.getScreenScale().x+","+this.getEntity().getScale().y*core.GameManager.instance.getScreenScale().y+")",this._div.style.transform="translate(0, 0px) scale("+this.getEntity().getScale().x*core.GameManager.instance.getScreenScale().x+","+this.getEntity().getScale().y*core.GameManager.instance.getScreenScale().y+")",this._layer.getContainer().appendChild(this._div),this.getStage().play(0);this.getStage().getSymbolElement()[0];this.updatePosition()},init:function(){core.Component.prototype.init.call(this),this.getEntity().addEventListener("displayUpdate",$bind(this,this.onDisplayUpdated))},_layer:null,_div:null,_isDirty:null,_compositionName:null,_divId:null,__class__:core.components.EdgeElements}),core.components.FlashAnimation=function(e,t,n,i,a,o){this._prevFrame=0,this._camera=null,this._partInstances=null,this._parts=null,this._onAnimationComplete=null,this._alpha=1,this._spriteSheet=null,this._currentAnimationName="",this._frameChildren=null,this._isPlaying=!0,this._isLooping=!0,this._framerate=0,this._speedScale=1,this._position=0,this._animation=null,core.Component.call(this,e,"FlashAnimation"),this._animation=js.JQuery.parseJSON(core.managers.AssetManager.getAsset(t)),this._currentAnimationName=i,this._frameChildren=new Array,this._parts=this._animation.parts,this._partInstances=this._animation.part_instances,this._layer=a,this._camera=o,this._spriteSheet=core.spriteSheets.SpriteSheetManager.getInstance().getSpriteSheetByName(n)},$hxClasses["core.components.FlashAnimation"]=core.components.FlashAnimation,core.components.FlashAnimation.__name__=["core","components","FlashAnimation"],core.components.FlashAnimation.__super__=core.Component,core.components.FlashAnimation.prototype=$extend(core.Component.prototype,{destroy:function(){core.Component.prototype.destroy.call(this),this.destroyFrameChildren(!1),this._frameChildren=null},render:function(){core.Component.prototype.render.call(this),this.renderPieces()},setDestroyEntityOnComplete:function(e){this._destroyEntityOnComplete=e},setDestroyOnComplete:function(e){this._destroyOnComplete=e},postUpdate:function(){core.Component.prototype.postUpdate.call(this),this._prevFrame=Math.floor(this._position)},renderPieces:function(){core.Component.prototype.render.call(this);var e=this.getEntity().getName()+"_"+this._currentAnimationName+"_"+Math.floor(this._position);if(null!=this._frameChildren){if(null!=this._camera){var t=this.getEntity().getPosition(),n=this._camera.getEntity().getPosition();n.x+=core.GameManager.instance.getScreenSize().x/2,n.y+=core.GameManager.instance.getScreenSize().y/2;var i=new core.Vector3D(n.x-t.x,n.y-t.y);if(i.getLength()>1500)return}if(core.components.FlashAnimation._cachedFrames.exists(e)){if(Math.floor(this._position)!=this._prevFrame){this.destroyFrameChildren();for(var a=core.components.FlashAnimation._cachedFrames.get(e),o=a.length,r=0;o>r;){var s=r++,c=a[s];c.setGameState(null),this._frameChildren.push(c)}}for(var l=this._frameChildren.length,r=0;l>r;){var s=r++,u=this._frameChildren[s];this.getEntity().addChild(u);var h=u.getComponent(core.components.GameImage),d=u.getProperty("sX"),g=u.getProperty("sY"),m=u.getProperty("alpha"),p=this.getEntity().getScale();u.setGameState(this.getGameState()),h.setAlpha(this._alpha*m),h.setSkew(d*p.y,g*p.x),h.setEntity(u),h.setCamera(this._camera),u.render(),h.setEntity(null),h.setCamera(null),u.setGameState(null),u.getParent().removeChild(u)}}}},generateEntitiesForFrame:function(e,t){if(this.hasAnimation(e)){var n=this._animation.animations[e].frames[t];if(null!=n){var i=this.getEntity(),a=this.getEntity().getName()+"_"+e+"_"+t;if(!core.components.FlashAnimation._cachedFrames.exists(a)){this.destroyFrameChildren();for(var o=(n.instances_map,new Array),r=n.instances.length,s=0;r>s;){var c=s++,l=n.instances[c],u=l.i,h=this.getPartInfoById(u),d=this.getPartInstanceById(u),g=null!=l.x?l.x:0,m=null!=l.y?l.y:0,p=null!=l.a?l.a:1,f=null!=l.b?l.b:0,_=null!=l.c?l.c:0,y=null!=l.d?l.d:1,v=null!=l.o?l.o:1,x=h.regx,S=h.regy,C=new core.Entity;C.setGameState(null),C.setPosition(g,m,0),C.setScale(p,y),C.setIsUpdating(!1);var w=this._spriteSheet.getSpriteInfoByName(d+".png"),b=new core.components.GameImage(C,"",this._layer,this._camera);b.setSpriteInfo(w);var M=w.getCoords(),T=M.wh.x*-x,I=M.wh.y*-S;b.setOffset(T,I);{i.getScale()}C.setProperty("sX",f),C.setProperty("sY",_),C.setProperty("alpha",v),b.setSkew(_,f),b.setAlpha(v*this._alpha),i.addChild(C),this._frameChildren.push(C),o.push(C)}{Math.floor(this._position)}core.components.FlashAnimation._cachedFrames.set(a,o)}}}},forceRegeneration:function(){this.generateEntitiesForFrame(this._currentAnimationName,Math.floor(this._position))},getPartInstanceById:function(e){return this._partInstances[e]},getPartInfoById:function(e){return this._parts[this.getPartInstanceById(e)]},destroyFrameChildren:function(e){if(null==e&&(e=!1),null!=this._frameChildren){for(var t=this._frameChildren.length,n=0;t>n;){var i=n++;e&&this._frameChildren[i].destroy()}core.utilities.ArrayUtils.clear(this._frameChildren)}},update:function(){if(core.Component.prototype.update.call(this),""==this.getEntity().getName())throw"Please name all entities (uniquely by entity 'type') that use the FlashAnimation component!";if(this._isPlaying){this._position+=core.GameManager.getElapsedTime()*this._framerate*this._speedScale;var e=this.getAnimationLength()-1;if(this._position>e)if(this._isLooping)this._position-=e,null!=this._onAnimationComplete&&this._onAnimationComplete();else{if(this._position=e-1,this._isPlaying=!1,null!=this._onAnimationComplete){var t=this._onAnimationComplete;this._onAnimationComplete=null,t()}if(this._destroyEntityOnComplete)return void this.getEntity().destroy();if(this._destroyOnComplete)return void this.destroy()}if(null!=this._camera){var n=this.getEntity().getPosition(),i=this._camera.getEntity().getPosition();i.x+=core.GameManager.instance.getScreenSize().x/2,i.y+=core.GameManager.instance.getScreenSize().y/2;var a=new core.Vector3D(i.x-n.x,i.y-n.y);if(a.getLength()>1500)return}{Math.floor(this._position)}this.generateEntitiesForFrame(this._currentAnimationName,Math.floor(this._position))}},setAnimation:function(e,t,n){null==n&&(n=!1),null==t&&(t=!0),(this._currentAnimationName!=e||n)&&(this._isLooping=t,this._currentAnimationName=e,this._position=0,this._isPlaying=!0,this.generateEntitiesForFrame(this._currentAnimationName,0))},getCurrentAnimationName:function(){return this._currentAnimationName},getLooping:function(){return this._isLooping},setLooping:function(e){this._isLooping=e},setAlpha:function(e){this._alpha=e,this.generateEntitiesForFrame(this._currentAnimationName,Math.floor(this._position))},getAlpha:function(){return this._alpha},hasAnimation:function(e){return null!=this._animation.animations[e]&&void 0!=this._animation.animations[e]},getAnimationLength:function(){if(!this.hasAnimation(this._currentAnimationName))return 0;var e=this._animation.animations[this._currentAnimationName].frames.length;return e},setAnimationCompletionPercent:function(e){this._position=(this.getAnimationLength()-1)*e},getAnimationCompletionPercent:function(){return this.hasAnimation(this._currentAnimationName)?this._position/(this.getAnimationLength()-1):0},init:function(){core.Component.prototype.init.call(this),this._framerate=this._animation.framerate,this.generateEntitiesForFrame(this._currentAnimationName,0)},setCamera:function(e){this._camera=e},getCamera:function(){return this._camera},setOnAnimationComplete:function(e){this._onAnimationComplete=e},getOnAnimationComplete:function(){return this._onAnimationComplete},_prevFrame:null,_destroyEntityOnComplete:null,_destroyOnComplete:null,_camera:null,_partInstances:null,_parts:null,_onAnimationComplete:null,_alpha:null,_layer:null,_spriteSheet:null,_currentAnimationName:null,_frameChildren:null,_isPlaying:null,_isLooping:null,_framerate:null,_speedScale:null,_position:null,_animation:null,__class__:core.components.FlashAnimation}),core.components.GameImage=function(e,t,n,i){this._cachedSize=null,this._image=null,this._context=null,this._forceRenderRequired=!1,this._coords=null,this._spriteInfo=null,this._rotation=null,this._skew=null,this._alpha=1,this._imageName="",this.IsLargeImage=!1,core.Component.call(this,e,"GameImage"),this._imageName=t,this._layer=n,this._cameraPositionScale=new core.Vector2D(1,1),this._pivotPoint=new core.Vector2D,this._camera=i,this._offset=new core.Vector2D,this._scale=new core.Vector3D(1,1,1),this._skew=new core.Vector2D,this._rotation=new core.Vector3D(0,0,0)},$hxClasses["core.components.GameImage"]=core.components.GameImage,core.components.GameImage.__name__=["core","components","GameImage"],core.components.GameImage.__super__=core.Component,core.components.GameImage.prototype=$extend(core.Component.prototype,{onDestroyed:function(){core.Component.prototype.onDestroyed.call(this),this._camera=null},destroy:function(){core.Component.prototype.destroy.call(this)},quickRender:function(){core.Component.prototype.render.call(this);core.GameManager.instance.getScreenScale();if(this._context=this._layer.getCanvas().getContext("2d"),this._context.scale(this._scale.x,this._scale.y),this._context.rotate(this._rotation.z),null==this._spriteInfo&&null==this._coords)null==this._image&&(this._image=core.managers.AssetManager.getAsset(this._imageName)),this._context.drawImage(this._image,0,0);else if(null==this._spriteInfo&&null!=this._coords)null==this._image&&(this._image=core.managers.AssetManager.getAsset(this._imageName)),this._context.drawImage(this._image,Math.floor(this._coords.ul.x),Math.floor(this._coords.ul.y),Math.floor(this._coords.wh.x),Math.floor(this._coords.wh.y),this._offset.x,this._offset.y,Math.floor(this._coords.wh.x)+2,Math.floor(this._coords.wh.y)+2);else{var e=this._spriteInfo.getCoords(),t=core.spriteSheets.SpriteSheetManager.getInstance().getSpriteSheetByName(this._spriteInfo.getSpriteSheetName());null==this._image&&(this._image=core.managers.AssetManager.getAsset(t.getImageName())),this._context.drawImage(this._image,e.ul.x,e.ul.y,e.wh.x,e.wh.y,this._offset.x,this._offset.y,e.wh.x,e.wh.y)}this._context.rotate(-this._rotation.z),this._context.scale(1/this._scale.x,this._scale.y),this._layer.setWholeCanvasDirty(!0)},render:function(){if(core.Component.prototype.render.call(this),null!=this._layer.getCanvas()){var e=this.getEntity(),t=e.getPosition();if(""!=this._imageName||null!=this._spriteInfo){var n=1,i=new core.Vector2D(0,0),a=core.GameManager.instance.getScreenScale();if(null!=this._camera){var o=this._camera.getEntity();n=this._camera.getZoomScale();var r=o.getPosition();i=new core.Vector2D(-(r.x/this._cameraPositionScale.x)*a.x,-(r.y/this._cameraPositionScale.y)*a.y),i.scaleBy(n,n)}null==this._context&&(this._context=this._layer.getCanvas().getContext("2d")),this._context.save();var s=e.getScale().getClone();s.x*=this._scale.x,s.y*=this._scale.y,this._context.setTransform(1,this._skew.x/s.x,this._skew.y/s.y,1,Math.floor(t.x*a.x*n+i.x),Math.floor(t.y*a.y*n+i.y)),this._context.rotate(e.getRotation().z+this._rotation.z),this._context.scale(s.x*n,s.y*n);var c=this._offset.getClone();if(null!=this._spriteInfo&&(c.x+=this._spriteInfo.getOffset().x,c.y+=this._spriteInfo.getOffset().y),this._context.translate(Math.floor(c.x*a.x),Math.floor(c.y*a.y)),this._context.globalAlpha=this._alpha,this._context.scale(a.x,a.y),null==this._spriteInfo&&null==this._coords)null==this._image&&(this._image=core.managers.AssetManager.getAsset(this._imageName)),this._context.drawImage(this._image,0,0);else if(null==this._spriteInfo&&null!=this._coords)null==this._image&&(this._image=core.managers.AssetManager.getAsset(this._imageName)),this._context.drawImage(this._image,Math.floor(this._coords.ul.x),Math.floor(this._coords.ul.y),Math.floor(this._coords.wh.x),Math.floor(this._coords.wh.y),0,0,Math.floor(this._coords.wh.x),Math.floor(this._coords.wh.y));else{var l=this._spriteInfo.getCoords(),u=core.spriteSheets.SpriteSheetManager.getInstance().getSpriteSheetByName(this._spriteInfo.getSpriteSheetName());this._context.drawImage(u.getImage(),l.ul.x,l.ul.y,l.wh.x,l.wh.y,0,0,l.wh.x,l.wh.y)}this._layer.setWholeCanvasDirty(!0),this._context.restore()}}},setCameraPositionScale:function(e){this._cameraPositionScale=e},getCameraPositionScale:function(){return this._cameraPositionScale},getScale:function(){return this._scale},setScale:function(e,t,n){null==n&&(n=1),null==t&&(t=1),null==e&&(e=1),this._scale=new core.Vector3D(e,t,n)},getSize:function(){if(null!=this._cachedSize)return this._cachedSize;null==this._image&&(this._image=core.managers.AssetManager.getAsset(this._imageName));var e=this.getEntity().getScale();return null!=this._spriteInfo?(this._cachedSize=new core.Vector2D(this._spriteInfo.getCoords().wh.x*Math.abs(e.x*this._scale.x),this._spriteInfo.getCoords().wh.y*Math.abs(e.y*this._scale.y)),this._cachedSize):""==this._imageName?new core.Vector2D(0,0):(this._cachedSize=new core.Vector2D(this._image.width*Math.abs(e.x*this._scale.x),this._image.height*Math.abs(e.y*this._scale.y)),this._cachedSize)},getImageName:function(){return this._imageName},setLayer:function(e){this._layer=e,this._context=null},getLayer:function(){return this._layer},setPivotPoint:function(e,t){this._pivotPoint=new core.Vector2D(e,t)},getPivotPoint:function(){return this._pivotPoint},setAlpha:function(e){this._alpha=e},getAlpha:function(){return this._alpha},centerOffsetOnEntity:function(){var e=this.getSize();this.setOffset(-e.x/2,-e.y/2)},setOffset:function(e,t){this._offset=new core.Vector2D(e,t)},getOffset:function(){return this._offset},setSource:function(e){this._imageName=e},setSkew:function(e,t){this._skew=new core.Vector2D(e,t)},getSkew:function(){return this._skew},getImageAsset:function(){return core.managers.AssetManager.getAsset(this._imageName)},setImage:function(e){this._imageName=e,this._image=null},setSpriteInfo:function(e){this._spriteInfo=e},setRotation:function(e){this._rotation=e},getRotation:function(){return this._rotation},setCoords:function(e){this._coords=e},getCoords:function(){return this._coords},setCamera:function(e){this._camera=e},getCamera:function(){return this._camera},_cachedSize:null,_image:null,_context:null,_forceRenderRequired:null,_coords:null,_spriteInfo:null,_cameraPositionScale:null,_rotation:null,_skew:null,_scale:null,_alpha:null,_offset:null,_camera:null,_pivotPoint:null,_layer:null,_imageName:null,IsLargeImage:null,__class__:core.components.GameImage}),core.components.GameImageBatch=function(e,t,n,i,a){null==i&&(i=!0),this._gameImages=null,this._layer=null,this._context=null,this._cameraPositionScale=null,this._camera=null,this._buffer=null,this._entities=null,this._removeGameImageComponents=!0,core.Component.call(this,e,"GameImageBatch"),this._removeGameImageComponents=i,this._entities=t,this._camera=a,this._cameraPositionScale=new core.Vector2D(1,1),this._context=null,this._layer=n,this._gameImages=new Array},$hxClasses["core.components.GameImageBatch"]=core.components.GameImageBatch,core.components.GameImageBatch.__name__=["core","components","GameImageBatch"],core.components.GameImageBatch.__super__=core.Component,core.components.GameImageBatch.prototype=$extend(core.Component.prototype,{render:function(){core.Component.prototype.render.call(this);var e=this._gameImages.length;if(0!=e)if(null==this._camera)for(var t=0;e>t;){var n=t++;this._gameImages[n].quickRender()}else{var i=1,a=new core.Vector2D(0,0),o=core.GameManager.instance.getScreenScale();if(null!=this._camera){var r=this._camera.getEntity();i=this._camera.getZoomScale();var s=r.getPosition();a=new core.Vector2D(-(s.x/this._cameraPositionScale.x)*o.x,-(s.y/this._cameraPositionScale.y)*o.y),a.scaleBy(i,i)}var c=this._layer.getCanvas().getContext("2d");c.save(),c.setTransform(i*o.x,0,0,i*o.y,Math.floor(a.x),Math.floor(a.y));for(var l=this._camera.getViewBounds(),u=this.getCameraPositionScale(),h=this._gameImages[0].getSize(),t=0;e>t;){var n=t++,d=this._gameImages[n],g=d.getOffset(),m=d.getScale();1==u.x&&(g.x*u.x>l.ul.x+l.wh.x||g.y*u.y>l.ul.y+l.wh.y||g.x*u.x*m.x+h.x<l.ul.x||g.y*u.y*m.y+h.y<l.ul.y)||d.quickRender()}c.restore()}},init:function(){core.Component.prototype.init.call(this);var e=new Array,t=this._entities.length;core.utilities.Debug.log(t);for(var n=0;t>n;){var i=n++,a=this._entities[i],o=a.getComponent(core.components.GameImage),r=a.getPosition().getClone(),s=a.getScale().getClone(),c=a.getRotation().getClone();o.setOffset(o.getOffset().x+r.x*s.x,o.getOffset().y+r.y*s.y),o.setScale(s.x,s.y,1),o.setRotation(c),o.setEntity(this.getEntity()),o.setLayer(this._layer),a.destroy(),e.push(o)}this._gameImages=e;var l=this._gameImages.length;core.utilities.Debug.log("GAME IMAGES: "+l)},setLayer:function(e){this._layer=e},getLayer:function(){return this._layer},setCameraPositionScale:function(e){this._cameraPositionScale=e},getCameraPositionScale:function(){return this._cameraPositionScale},_gameImages:null,_layer:null,_context:null,_cameraPositionScale:null,_camera:null,_buffer:null,_entities:null,_removeGameImageComponents:null,__class__:core.components.GameImageBatch}),core.components.GameSprite=function(e,t,n,i){this._alpha=1,this._onAnimationComplete=null,this._isPlaying=!0,this._position=0,core.Component.call(this,e,"GameSprite"),this._currentAnimationName=t,this._layer=n,this._pivotPoint=new core.Vector2D,this._offset=new core.Vector2D,this._camera=i},$hxClasses["core.components.GameSprite"]=core.components.GameSprite,core.components.GameSprite.__name__=["core","components","GameSprite"],core.components.GameSprite.__super__=core.Component,core.components.GameSprite.prototype=$extend(core.Component.prototype,{render:function(){core.Component.prototype.render.call(this);var e=core.managers.AnimationManager.getInstance().getAnimationByName(this._currentAnimationName);if(null!=e){var t=e.getSpriteIndexAtPosition(this._position),n=core.spriteSheets.SpriteSheetManager.getInstance().getSpriteSheetByName(e.getSpriteSheetName()),i=n.getSpriteInfoByIndex(t),a=i.getCoords(),o=this._layer.getCanvas().getContext("2d"),r=this.getEntity().getPosition(),s=i.getOffset().getClone();s.x+=e.getOffset().x+this._offset.x,s.y+=e.getOffset().y+this._offset.y;var c=core.utilities.Math2.degToRad(this.getEntity().getRotation().z),l=this.getEntity().getScale();if(r.x+=s.x*l.x,r.y+=s.y*l.y,o.save(),null!=this._camera){var u=this._camera.getEntity();o.translate(-u.getPosition().x,-u.getPosition().y)}o.translate((r.x+this._pivotPoint.x+i.getOffset().x*l.x)*core.GameManager.instance.getScreenScale().x,(r.y+this._pivotPoint.y+i.getOffset().y*l.y)*core.GameManager.instance.getScreenScale().y),o.rotate(c),o.translate(-((r.x+this._pivotPoint.x+i.getOffset().x)*l.x)*core.GameManager.instance.getScreenScale().x,-((r.y+this._pivotPoint.y+i.getOffset().y)*l.y)*core.GameManager.instance.getScreenScale().y),o.globalAlpha=this._alpha,o.scale(l.x*core.GameManager.instance.getScreenScale().x,l.y*core.GameManager.instance.getScreenScale().y),o.drawImage(AssetManager.getAsset(n.getImageName()),a.ul.x,a.ul.y,a.wh.x,a.wh.y,r.x,r.y,a.wh.x,a.wh.y),o.restore()}},getOnAnimationComplete:function(){return this._onAnimationComplete},setOnAnimationComplete:function(e){this._onAnimationComplete=e},playing:function(){return this._isPlaying},stop:function(){this._isPlaying=!1},play:function(){this._isPlaying=!0},getAnimation:function(){return this._currentAnimationName},setAnimation:function(e,t,n){null==n&&(n=!1),(this._currentAnimationName!=e||n)&&(this._position=0),this._currentAnimationName=e,this._onAnimationComplete=t,this._isPlaying=!0},getPosition:function(){return this._position},setPosition:function(e){this._position=e},setAlpha:function(e){this._alpha=e},getAlpha:function(){return this._alpha},update:function(){if(core.Component.prototype.update.call(this),this._isPlaying){var e=core.managers.AnimationManager.getInstance().getAnimationByName(this._currentAnimationName);if(this._position+=core.GameManager.getElapsedTime(),this._position>=e.getLength()&&(e.getLoop()?this._position-=e.getLength():(this._position=e.getLength(),this.stop()),null!=this._onAnimationComplete)){var t=this._onAnimationComplete;this._onAnimationComplete=null,t(this.getEntity())}}},setLayer:function(e){this._layer=e},getLayer:function(){return this._layer},setOffset:function(e,t){this._offset.x=e,this._offset.y=t},getOffset:function(){return this._offset},getPivotPoint:function(){return this._pivotPoint},setPivotPoint:function(e){this._pivotPoint=e},_alpha:null,_offset:null,_onAnimationComplete:null,_isPlaying:null,_camera:null,_currentAnimationName:null,_pivotPoint:null,_layer:null,_position:null,__class__:core.components.GameSprite}),core.components.HtmlElements=function(e,t,n,i){null==i&&(i=""),null==n&&(n=""),this._alwaysUpdatePosition=!1,this._className="",this._div=null,this._isDirty=!0,core.Component.call(this,e,"HtmlElements"),this._html=n,this._className=i,this._layer=t,this.updateHtml()},$hxClasses["core.components.HtmlElements"]=core.components.HtmlElements,core.components.HtmlElements.__name__=["core","components","HtmlElements"],core.components.HtmlElements.showElementById=function(e,t){null==t&&(t=!0);var n=core.components.HtmlElements.getChildDivById(Main.getContainer(),e);null!=n?n.style.display=t?"block":"none":core.utilities.Debug.log("Could not find element with id of "+e+" to "+(t?"show":"hide"))},core.components.HtmlElements.getStylePositionOfDomElement=function(e){for(var t=Std.parseInt(e.style.top),n=Std.parseInt(e.style.left),i=!0;i;){if(null==e.parentNode||!Reflect.hasField(e.parentNode,"style")||"layer"==e.parentNode.className)return i=!1,new core.Vector2D(n,t);t+=Std.parseInt(e.parentNode.style.top),n+=Std.parseInt(e.parentNode.style.left),e=e.parentNode}return new core.Vector2D(n,t)},core.components.HtmlElements.setElementTextById=function(e,t){var n=Main.getDocument().getElementById(e);return null==n?void core.utilities.Debug.log("Could not find '"+e+"' on the page!"):void(n.innerHTML=t)},core.components.HtmlElements.getChildDivById=function(e,t){for(var n=e.childNodes.length,i=0;n>i;){var a=i++;if(e.childNodes[a].id==t)return e.childNodes[a];if(e.childNodes[a].hasChildNodes()){var o=core.components.HtmlElements.getChildDivById(e.childNodes[a],t);if(null!=o)return o}}return null},core.components.HtmlElements.__super__=core.Component,core.components.HtmlElements.prototype=$extend(core.Component.prototype,{alwaysUpdatePosition:function(e){null==e&&(e=!0),this._alwaysUpdatePosition=e},onDisplayUpdated:function(){this._isDirty=!0},handleMessage:function(e,t){switch(core.Component.prototype.handleMessage.call(this,e,t),e){case"onScreenScaleUpdated":this._isDirty=!0}},destroy:function(){core.Component.prototype.destroy.call(this),null!=this._div.parentNode&&this._layer.getContainer().removeChild(this._div)},getSize:function(){return new core.Vector2D(this._div.clientWidth*core.GameManager.instance.getScreenScale().y,this._div.clientHeight*core.GameManager.instance.getScreenScale().y)},centerOnEntity:function(e){null==e&&(e=!0),this._center=e,this.updatePosition()},forceUpdateNextFrame:function(){this._html=this._div.innerHTML,this._isDirty=!0},removeClassName:function(e){this._className=StringTools.replace(this._className,e,"")},addClassName:function(e){this._className.length>0?this._className+=" "+e:this._className=e,this._isDirty=!0},getClassName:function(){return this._className},setClassName:function(e){this._className=e,this._isDirty=!0},setHtml:function(e){this._html=e,this._isDirty=!0},getHtml:function(){return this._html},getId:function(){return this._id},setId:function(e){null==this._div&&this._isDirty&&this.updateHtml(),this._id=e,this._div.id=e},updatePosition:function(){this._div.style.left=this.getEntity().getPosition().x*core.GameManager.instance.getScreenScale().x-(this._center?this._div.clientWidth/2:0)+"px",this._div.style.top=this.getEntity().getPosition().y*core.GameManager.instance.getScreenScale().y-(this._center?this._div.clientHeight/2:0)+"px"},updateHtml:function(){core.utilities.Debug.log("updateHtml"),null!=this._div&&null!=this._div.parentNode&&this._div.parentNode.removeChild(this._div),this._isDirty=!1,this._div=Main.getDocument().createElement("div"),this._div.className=this._className,this._div.innerHTML=this._html,this._div.style.position="absolute",this._div.style.webkitTransform="translate(0, 0px) scale("+this.getEntity().getScale().x*core.GameManager.instance.getScreenScale().x+","+this.getEntity().getScale().y*core.GameManager.instance.getScreenScale().y+")",this._div.style.transform="translate(0, 0px) scale("+this.getEntity().getScale().x*core.GameManager.instance.getScreenScale().x+","+this.getEntity().getScale().y*core.GameManager.instance.getScreenScale().y+")",this._layer.getContainer().appendChild(this._div),this.updatePosition()},update:function(){core.Component.prototype.update.call(this),null!=this._div&&this._isDirty&&this.updateHtml(),null!=this._div&&this._alwaysUpdatePosition&&this.updatePosition(),this._div.style.display=this.getEntity().getIsVisible()?"block":"none"},getDiv:function(){return null==this._div&&this._isDirty&&this.updateHtml(),this._div},setChildElementTextById:function(e,t){var n=core.components.HtmlElements.getChildDivById(this.getDiv(),e);null!=n&&(n.innerHTML=t),this._html=this.getDiv().innerHTML},getChildElementById:function(e){return Main.getDocument().getElementById(e)},init:function(){core.Component.prototype.init.call(this),this.getEntity().addEventListener("displayUpdate",$bind(this,this.onDisplayUpdated))},_alwaysUpdatePosition:null,_center:null,_id:null,_layer:null,_className:null,_div:null,_isDirty:null,_html:null,__class__:core.components.HtmlElements}),core.components.PropertySineWave=function(e,t,n,i,a,o,r,s,c){null==c&&(c=0),null==s&&(s=0),null==r&&(r=!1),this._magnitudeDecayRate=0,this._half=!1,this._propertyName="",this._target=null,this._magnitude=0,this._base=0,this._rate=0,this._theta=0,core.Component.call(this,e,"PropertySineWave"),this._base=i,this._magnitude=a,this._rate=o,this._propertyName=n,this._target=t,this._half=r,this._theta=s,this._magnitudeDecayRate=c},$hxClasses["core.components.PropertySineWave"]=core.components.PropertySineWave,core.components.PropertySineWave.__name__=["core","components","PropertySineWave"],core.components.PropertySineWave.__super__=core.Component,core.components.PropertySineWave.prototype=$extend(core.Component.prototype,{update:function(){if(core.Component.prototype.update.call(this),this._magnitude>0){this._magnitude-=this._magnitudeDecayRate*core.GameManager.getElapsedTime(),this._magnitude<0&&(this._magnitude=0),this._theta+=this._rate*core.GameManager.getElapsedTime(),this._theta>=(this._half?Math.PI:2*Math.PI)&&(this._theta-=this._half?Math.PI:2*Math.PI);var e=this._base+Math.sin(this._theta)*this._magnitude;Reflect.setProperty(this._target,this._propertyName,e)}},setBase:function(e){this._base=e},getBase:function(){return this._base},setMagnitudeDecayRate:function(e){this._magnitudeDecayRate=e},getMagnitudeDecayRate:function(){return this._magnitudeDecayRate},setMagnitude:function(e){this._magnitude=e},getMagnitude:function(){return this._magnitude},_magnitudeDecayRate:null,_half:null,_propertyName:null,_target:null,_magnitude:null,_base:null,_rate:null,_theta:null,__class__:core.components.PropertySineWave}),core.components.SimpleMovement=function(e,t){this._gravity=null,this._angularVelocity=null,this._velocity=null,core.Component.call(this,e,"SimpleMovement"),this._velocity=new core.Vector3D,this._angularVelocity=new core.Vector3D,null!=t&&(this._gravity=t.getClone())},$hxClasses["core.components.SimpleMovement"]=core.components.SimpleMovement,core.components.SimpleMovement.__name__=["core","components","SimpleMovement"],core.components.SimpleMovement.__super__=core.Component,core.components.SimpleMovement.prototype=$extend(core.Component.prototype,{setAngularVelocity:function(e){this._angularVelocity=e},getAngularVelocity:function(){return this._angularVelocity},getVelocityZ:function(){return this._velocity.z},getVelocityY:function(){return this._velocity.y},getVelocityX:function(){return this._velocity.x},setVelocityZ:function(e){this._velocity.z=e},setVelocityY:function(e){this._velocity.y=e},setVelocityX:function(e){this._velocity.x=e},setVelocity:function(e,t,n){null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this._velocity=new core.Vector3D(e,t,n)
},addVelocity:function(e,t,n){null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this._velocity=this._velocity.add(new core.Vector3D(e,t,n))},getVelocity:function(){return this._velocity},setGravity:function(e){this._gravity=new core.Vector3D(e.x,e.y,e.z)},getGravity:function(){return this._gravity.getClone()},deactivate:function(){core.Component.prototype.deactivate.call(this),this._velocity.x=0,this._velocity.y=0,this._velocity.z=0},getXyAngleFromVector:function(e){return core.utilities.Math2.getAngleInDegreesBetween2dVectors(e,new core.Vector2D(this._velocity.x,this._velocity.y))},update:function(){core.Component.prototype.update.call(this),null!=this._gravity&&(this._velocity.x+=this._gravity.x*core.GameManager.getElapsedTime(),this._velocity.y+=this._gravity.y*core.GameManager.getElapsedTime(),this._velocity.z+=this._gravity.z*core.GameManager.getElapsedTime());var e=this._velocity.getClone();e.scaleBy(core.GameManager.getElapsedTime());var t=this._angularVelocity.getClone();t.scaleBy(core.GameManager.getElapsedTime());var n=this.getEntity().getLocalPosition(),i=this.getEntity().getLocalRotation();this.getEntity().setPosition(n.x+e.x,n.y+e.y,n.z+e.z),this.getEntity().setRotation(i.x+t.x,i.y+t.y,i.z+t.z)},init:function(){core.Component.prototype.init.call(this)},_gravity:null,_angularVelocity:null,_velocity:null,__class__:core.components.SimpleMovement}),core.components.SlackMovement=function(e,t){null==t&&(t=.5),this._slack=1,this._targetPosition=null,core.Component.call(this,e,"SlackMovement"),this._slack=t},$hxClasses["core.components.SlackMovement"]=core.components.SlackMovement,core.components.SlackMovement.__name__=["core","components","SlackMovement"],core.components.SlackMovement.__super__=core.Component,core.components.SlackMovement.prototype=$extend(core.Component.prototype,{setTarget:function(e,t,n){this._targetPosition=new core.Vector3D(e,t,n)},update:function(){if(core.Component.prototype.update.call(this),null!=this._targetPosition){var e=this._targetPosition.subtract(this.getEntity().getPosition()),t=e.getLength();if(0!=t){e=e.getNormalized(),e.scaleBy(t*this._slack),e.x<5e-5&&e.x>-5e-5&&(e.x=0),e.y<5e-5&&e.y>-5e-5&&(e.y=0),e.z<5e-5&&e.z>-5e-5&&(e.z=0);var n=this.getEntity().getPosition().getClone();this.getEntity().setPosition(n.x+e.x,n.y+e.y,n.z+e.z)}}},setSlack:function(e){this._slack=e},getSlack:function(){return this._slack},_slack:null,_targetPosition:null,__class__:core.components.SlackMovement}),core.components.TextField=function(e,t,n){this._alpha=1,this._wrapWidth=-1,this._lineSpacing=8,this._maxWidth=-1,this._textBaseline="middle",this._textAlign="center",this._fillStyle="white",this._fontFamily="Arial",this._fontSize="16pt",this._text="",core.Component.call(this,e,"TextField"),this._layer=t,this._pivotPoint=new core.Vector2D,this._camera=n,this._offset=new core.Vector2D},$hxClasses["core.components.TextField"]=core.components.TextField,core.components.TextField.__name__=["core","components","TextField"],core.components.TextField.__super__=core.Component,core.components.TextField.prototype=$extend(core.Component.prototype,{render:function(){core.Component.prototype.render.call(this);var e=this._layer.getCanvas().getContext("2d"),t=this.getEntity().getPosition().getClone(),n=this.getEntity().getRotation().z,i=this.getEntity().getScale();if(e.save(),null!=this._camera){var a=this._camera.getEntity();e.translate(-a.getPosition().x,-a.getPosition().y)}e.translate((t.x+this._pivotPoint.x)*core.GameManager.instance.getScreenScale().x,(t.y+this._pivotPoint.y)*core.GameManager.instance.getScreenScale().y),e.rotate(n),e.translate(-((t.x+this._pivotPoint.x)*i.x*core.GameManager.instance.getScreenScale().x),-((t.y+this._pivotPoint.y)*i.y)*core.GameManager.instance.getScreenScale().y),e.scale(i.x*core.GameManager.instance.getScreenScale().x,i.y*core.GameManager.instance.getScreenScale().y),e.webkitImageSmoothingEnabled=!0,e.font=this.getFont(),e.fillStyle=this._fillStyle,e.textAlign=this._textAlign,e.textBaseline=this._textBaseline,e.globalAlpha=this._alpha;var o=this.getOffset();-1==this._maxWidth?e.fillText(this._text,t.x+o.x,t.y+o.y):this.wrapText(t.x+o.x,t.y+o.x,e),e.restore()},wrapText:function(e,t,n){for(var i=this._text.split(" "),a="",o=0,r=i.length;r>o;){var s=o++,c=a+i[s]+" ",l=n.measureText(c),u=l.width;if(u>this._maxWidth){n.fillText(a,e,t),a=i[s]+" ";var h=this._fontSize.substring(0,this._fontSize.length-2);t+=parseFloat(h)+parseFloat(this._lineSpacing)}else a=c}n.fillText(a,e,t)},getTextAlign:function(){return this._textAlign},setTextAlign:function(e){this._textAlign=e},setTextBaseline:function(e){this._textBaseline=e},getTextBaseline:function(){return this._textBaseline},setText:function(e){this._text=e},getText:function(){return this._text},setWrapWidth:function(e){this._wrapWidth=e},getWrapWidth:function(){return this._wrapWidth},setMaxWidth:function(e){this._maxWidth=e},getMaxWidth:function(){return this._maxWidth},setFillStyle:function(e){this._fillStyle=e},getFillStyle:function(){return this._fillStyle},setLineSpacing:function(e){this._lineSpacing=e},getLineSpacing:function(){return this._lineSpacing},setFontSize:function(e){this._fontSize=e},getFontSize:function(){return this._fontSize},setFontFamily:function(e){this._fontFamily=e},getFontFamily:function(){return this._fontFamily},getFont:function(){return this._fontSize+" "+this._fontFamily},setAlpha:function(e){this._alpha=e},getAlpha:function(){return this._alpha},setOffset:function(e){this._offset=e},getOffset:function(){return this._offset},_offset:null,_camera:null,_alpha:null,_wrapWidth:null,_pivotPoint:null,_layer:null,_lineSpacing:null,_maxWidth:null,_textBaseline:null,_textAlign:null,_fillStyle:null,_fontFamily:null,_fontSize:null,_text:null,__class__:core.components.TextField}),core.components.Trigger=function(){},$hxClasses["core.components.Trigger"]=core.components.Trigger,core.components.Trigger.__name__=["core","components","Trigger"],core.components.Trigger.prototype={__class__:core.components.Trigger},core.components.TriggerActivator=function(e,t){this._tagsToHit=null,this._currentTriggers=null,core.Component.call(this,e,"TriggerActivator"),this._tagsToHit=t,this._currentTriggers=new Array},$hxClasses["core.components.TriggerActivator"]=core.components.TriggerActivator,core.components.TriggerActivator.__name__=["core","components","TriggerActivator"],core.components.TriggerActivator.__super__=core.Component,core.components.TriggerActivator.prototype=$extend(core.Component.prototype,{getIsCurrentlyInTrigger:function(e){for(var t=this._currentTriggers.length,n=0;t>n;){var i=n++,a=this._currentTriggers[i];if(a==e)return!0}return!1},tagsMatch:function(e){if(null==e)return!1;for(var t=this._tagsToHit.length,n=0;t>n;){var i=n++;if(e.hasTag(this._tagsToHit[i]))return!0}return!1},removeCurrentTrigger:function(e){for(var t=this._currentTriggers.length,n=t-1;n>=0;){var i=this._currentTriggers[n];if(i==e)return void this._currentTriggers.splice(n,1)}},update:function(){core.Component.prototype.update.call(this);for(var e=core.managers.PhysicsManager.getInstance().getColliders().length,t=0;e>t;){var n=t++,i=core.managers.PhysicsManager.getInstance().getColliders()[n];if(null==this._tagsToHit||this.tagsMatch(i)){var a=this.getEntity().getPosition();i.checkPointIntersect(new core.Vector2D(a.x,a.y))?this.getIsCurrentlyInTrigger(i)?this.getIsCurrentlyInTrigger(i)&&i.onInside(this.getEntity()):(i.onEnter(this.getEntity()),this._currentTriggers.push(i)):this.getIsCurrentlyInTrigger(i)&&(i.onExit(this.getEntity()),this.removeCurrentTrigger(i))}}},_tagsToHit:null,_currentTriggers:null,__class__:core.components.TriggerActivator}),core.components.Tweener=function(e){this._tweens=null,core.Component.call(this,e,"Tweener"),this._tweens=new Array},$hxClasses["core.components.Tweener"]=core.components.Tweener,core.components.Tweener.__name__=["core","components","Tweener"],core.components.Tweener.__super__=core.Component,core.components.Tweener.prototype=$extend(core.Component.prototype,{update:function(){core.Component.prototype.update.call(this);for(var e=this._tweens.length,t=e-1;t>=0;){var n=this._tweens[t];n.update(core.GameManager.getElapsedTime()),n._isCompleted&&this._tweens.splice(t,1),t--}},destroyAllTweens:function(){this._tweens=new Array},skipAll:function(){for(var e=this._tweens.length,t=0;e>t;){var n=t++;this._tweens[n].skip()}},addTween:function(e,t,n,i,a,o,r,s,c){null==r&&(r=0);var l=new core.components.tween.Tween(e,t,n,i,a,o,r,s,c);return this._tweens.push(l),l},init:function(){core.Component.prototype.init.call(this)},_tweens:null,__class__:core.components.Tweener}),core.components.colliders={},core.components.colliders.BoxCollider=function(e,t,n){core.components.Collider.call(this,e,n),this._collision=t},$hxClasses["core.components.colliders.BoxCollider"]=core.components.colliders.BoxCollider,core.components.colliders.BoxCollider.__name__=["core","components","colliders","BoxCollider"],core.components.colliders.BoxCollider.__super__=core.components.Collider,core.components.colliders.BoxCollider.prototype=$extend(core.components.Collider.prototype,{getCollision:function(){return this._collision},debugRender:function(){core.components.Collider.prototype.debugRender.call(this);var e=core.GameManager.instance.getLayerByName("debug").getCanvas().getContext("2d");if(e.save(),null!=core.components.Camera.getDebugCamera()){var t=core.components.Camera.getDebugCamera().getEntity(),n=core.components.Camera.getDebugCamera().getZoomScale();e.translate(-t.getPosition().x*n,-t.getPosition().y*n),e.scale(n,n)}e.beginPath(),e.lineWidth=1,e.strokeStyle="#FF0000",e.moveTo(this._collision.ul.x,this._collision.ul.y),e.lineTo(this._collision.ul.x+this._collision.wh.x,this._collision.ul.y),e.lineTo(this._collision.ul.x+this._collision.wh.x,this._collision.ul.y+this._collision.wh.y),e.lineTo(this._collision.ul.x,this._collision.ul.y+this._collision.wh.y),e.lineTo(this._collision.ul.x,this._collision.ul.y),e.stroke(),e.restore()},getRaycastPoint:function(e,t,n,i,a){return null==i&&(i=!1),this._collision.getRaycastPoint(e,t,n,i,a)},checkPointIntersect:function(e){return this._collision.checkPointIntersect(e)},update:function(){core.components.Collider.prototype.update.call(this);var e=this.getEntity().getPosition().getClone(),t=null!=this._offset?this._offset:new core.Vector3D;this._collision.ul.x=e.x-this._collision.wh.x/2+t.x*this.getEntity().getScale().x,this._collision.ul.y=e.y-this._collision.wh.y/2+t.y*this.getEntity().getScale().y},_collision:null,__class__:core.components.colliders.BoxCollider}),core.components.colliders.PolygonCollider=function(e,t,n){core.components.Collider.call(this,e,n),this._collision=t},$hxClasses["core.components.colliders.PolygonCollider"]=core.components.colliders.PolygonCollider,core.components.colliders.PolygonCollider.__name__=["core","components","colliders","PolygonCollider"],core.components.colliders.PolygonCollider.__super__=core.components.Collider,core.components.colliders.PolygonCollider.prototype=$extend(core.components.Collider.prototype,{getCollision:function(){return this._collision},debugRender:function(){core.components.Collider.prototype.debugRender.call(this);var e=core.GameManager.instance.getLayerByName("debug").getCanvas().getContext("2d");if(e.save(),null!=core.components.Camera.getDebugCamera()){var t=core.components.Camera.getDebugCamera().getEntity(),n=core.components.Camera.getDebugCamera().getZoomScale();e.translate(-t.getPosition().x*n,-t.getPosition().y*n),e.scale(n,n)}e.beginPath(),e.lineWidth=1,e.strokeStyle="#FF0000";for(var i=this._collision.getPoints().length,a=0;i>a;){var o=a++;0==o?e.moveTo(this._collision.ul.x+this._collision.getPoints()[o].x,this._collision.ul.y+this._collision.getPoints()[o].y):e.lineTo(this._collision.ul.x+this._collision.getPoints()[o].x,this._collision.ul.y+this._collision.getPoints()[o].y)}e.lineTo(this._collision.ul.x+this._collision.getPoints()[0].x,this._collision.ul.y+this._collision.getPoints()[0].y),e.stroke(),e.restore()},getRaycastPoint:function(e,t,n,i,a){return null==i&&(i=!1),this._collision.getRaycastPoint(e,t,n,i,a)},checkPointIntersect:function(e){return this._collision.checkPointIntersect(e)},update:function(){core.components.Collider.prototype.update.call(this);var e=this.getEntity().getPosition().getClone(),t=null!=this._offset?this._offset:new core.Vector3D;this._collision.ul.x=e.x-this._collision.wh.x/2+t.x*this.getEntity().getScale().x,this._collision.ul.y=e.y-this._collision.wh.y/2+t.y*this.getEntity().getScale().y},_collision:null,__class__:core.components.colliders.PolygonCollider}),core.components.flashAnimation={},core.components.flashAnimation.AnimationKeyframe=function(e,t){this._spriteIndex=0,this._position=0,this._position=e,this._spriteIndex=t},$hxClasses["core.components.flashAnimation.AnimationKeyframe"]=core.components.flashAnimation.AnimationKeyframe,core.components.flashAnimation.AnimationKeyframe.__name__=["core","components","flashAnimation","AnimationKeyframe"],core.components.flashAnimation.AnimationKeyframe.prototype={getSpriteIndex:function(){return this._spriteIndex},getPosition:function(){return this._position},_spriteIndex:null,_position:null,__class__:core.components.flashAnimation.AnimationKeyframe},core.components.tween={},core.components.tween.Tween=function(e,t,n,i,a,o,r,s,c){this._elapsedTime=0,this._isCompleted=!1,this._params=null,this._action=null,this._delay=0,this._change=0,this._easing="",this._target=null,this._propertyName="",this._duration=0,this._end=0,this._begin=0,this._target=e,this._propertyName=t,this._begin=n,this._end=i,this._duration=a,this._easing=o,this._delay=r,this._action=s,this._params=c},$hxClasses["core.components.tween.Tween"]=core.components.tween.Tween,core.components.tween.Tween.__name__=["core","components","tween","Tween"],core.components.tween.Tween.prototype={easeInQuad:function(){return this._end},easeOutBack:function(){var e=this.getTransitionTimeElapsed(),t=this._begin,n=2.70158;return this._change*((e=e/this._duration-1)*e*((n+1)*e+n)+1)+t},easeOutBounce:function(){var e=this.getTransitionTimeElapsed(),t=this._begin;return e/=this._duration,1/2.75>e?7.5625*this._change*e*e+t:2/2.75>e?this._change*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?this._change*(7.5625*(e-=2.25/2.75)*e+.9375)+t:this._change*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeOutQuint:function(){var e=this.getTransitionTimeElapsed();return e/=this._duration,e--,this._change*(e*e*e*e*e+1)+this._begin},easeInQuint:function(){var e=this.getTransitionTimeElapsed();return e/=this._duration,this._change*e*e*e*e*e+this._begin},linear:function(){return this._begin+this._change*(this.getTransitionTimeElapsed()/this._duration)},getTransitionTimeElapsed:function(){return Math.max(0,this._elapsedTime-this._delay)},skip:function(){Reflect.setProperty(this._target,this._propertyName,this._end),this._isCompleted=!0,this._elapsedTime=this._duration},update:function(e){if(this._change=this._end-this._begin,this._elapsedTime+=e,!(this._elapsedTime<this._delay)){if(!this._isCompleted&&this.getTransitionTimeElapsed()>=this._duration&&(this._isCompleted=!0,this._elapsedTime=this._duration+this._delay,null!=this._action)){var t=this._action;this._action=null,t(this._params)}var n=0;switch(this._easing){case core.components.tween.Tween.LINEAR:n=this.linear();break;case core.components.tween.Tween.EASE_IN_QUAD:n=this.easeInQuad();break;case core.components.tween.Tween.EASE_IN_QUINT:n=this.easeInQuint();break;case core.components.tween.Tween.EASE_OUT_QUINT:n=this.easeOutQuint();break;case core.components.tween.Tween.EASE_OUT_BOUNCE:n=this.easeOutBounce();break;case core.components.tween.Tween.EASE_OUT_BACK:n=this.easeOutBack()}Reflect.setProperty(this._target,this._propertyName,n)}},_elapsedTime:null,_isCompleted:null,_params:null,_action:null,_delay:null,_change:null,_easing:null,_target:null,_propertyName:null,_duration:null,_end:null,_begin:null,__class__:core.components.tween.Tween},core.font={},core.font.Font=function(e,t,n){this._kernings=null,this._chars=null,this._fontCommon=null,this._fontInfo=null,this._name=e,this._imageName=n;var i=Xml.parse(core.managers.AssetManager.getAsset(t));this._chars=new Array,this._kernings=new Array,this.parseFromXml(i)},$hxClasses["core.font.Font"]=core.font.Font,core.font.Font.__name__=["core","font","Font"],core.font.Font.prototype={getKerningSpace:function(e,t){for(var n=this._kernings.length,i=0;n>i;){var a=i++,o=this._kernings[a];if(o.first==e&&o.second==t)return o.amount}return 0},getCharById:function(e){for(var t=this._chars.length,n=0;t>n;){var i=n++,a=this._chars[i];if(a.id==e)return a}return null},parseFromXml:function(e){var t=e.elementsNamed("font").next().elementsNamed("info").next(),n=new core.font.FontInfo;n.aa="1"==t.get("aa"),n.bold="1"==t.get("bold"),n.charset=t.get("charset"),n.face=t.get("face"),n.italic="1"==t.get("italic"),n.outline="1"==t.get("outline");var i=t.get("padding").split(",");n.paddingBottom=parseInt(i[0]),n.paddingLeft=parseInt(i[1]),n.paddingRight=parseInt(i[2]),n.paddingTop=parseInt(i[3]),n.size=parseInt(t.get("size")),n.smooth="1"==t.get("smooth");var a=t.get("spacing").split(",");n.spacingH=parseInt(a[0]),n.spacingV=parseInt(a[1]),n.stretchH=parseInt(t.get("stretchH")),n.unicode="1"==t.get("unicode"),this._fontInfo=n;var o=e.elementsNamed("font").next().elementsNamed("common").next(),r=new core.font.FontCommon;r.alphaChnl=parseFloat(o.get("alphaChnl")),r.base=parseInt(o.get("base")),r.redChnl=parseFloat(o.get("redChnl")),r.greenChnl=parseFloat(o.get("greenChnl")),r.blueChnl=parseFloat(o.get("blueChnl")),r.lineHeight=parseFloat(o.get("lineHeight")),r.packed="1"==o.get("packed"),r.pages=1,r.scaleH=parseFloat(o.get("scaleH")),r.scaleW=parseFloat(o.get("scaleW")),this._fontCommon=r;for(var s=e.elementsNamed("font").next().elementsNamed("chars").next().elementsNamed("char");s.hasNext();){var c=s.next(),l=new core.font.FontChar;l.id=parseInt(c.get("id")),l.x=parseInt(c.get("x")),l.y=parseInt(c.get("y")),l.width=parseInt(c.get("width")),l.height=parseInt(c.get("height")),l.xOffset=parseInt(c.get("xoffset")),l.yOffset=parseInt(c.get("yoffset")),l.xAdvance=parseInt(c.get("xadvance")),this._chars.push(l)}if(e.elementsNamed("font").next().elementsNamed("kernings").hasNext())for(var u=e.elementsNamed("font").next().elementsNamed("kernings").next().elementsNamed("kerning");u.hasNext();){var h=u.next(),d=new core.font.FontKerning;d.first=parseInt(h.get("first")),d.second=parseInt(h.get("second")),d.amount=parseInt(h.get("amount")),this._kernings.push(d)}},getKernings:function(){return this._kernings},getChars:function(){return this._chars},getFontCommon:function(){return this._fontCommon},getFontInfo:function(){return this._fontInfo},getImageName:function(){return this._imageName},setName:function(e){this._name=e},getName:function(){return this._name},_kernings:null,_chars:null,_fontCommon:null,_fontInfo:null,_imageName:null,_name:null,__class__:core.font.Font},core.font.FontChar=function(){this.chnl=0,this.xAdvance=0,this.yOffset=0,this.xOffset=0,this.height=0,this.width=0,this.y=0,this.x=0,this.id=0},$hxClasses["core.font.FontChar"]=core.font.FontChar,core.font.FontChar.__name__=["core","font","FontChar"],core.font.FontChar.prototype={chnl:null,xAdvance:null,yOffset:null,xOffset:null,height:null,width:null,y:null,x:null,id:null,__class__:core.font.FontChar},core.font.FontCommon=function(){this.blueChnl=0,this.greenChnl=0,this.redChnl=0,this.alphaChnl=1,this.packed=0,this.pages=1,this.scaleH=1024,this.scaleW=1024,this.base=25,this.lineHeight=32},$hxClasses["core.font.FontCommon"]=core.font.FontCommon,core.font.FontCommon.__name__=["core","font","FontCommon"],core.font.FontCommon.prototype={blueChnl:null,greenChnl:null,redChnl:null,alphaChnl:null,packed:null,pages:null,scaleH:null,scaleW:null,base:null,lineHeight:null,__class__:core.font.FontCommon},core.font.FontInfo=function(){this.outline=1,this.spacingH=1,this.spacingV=1,this.paddingBottom=1,this.paddingRight=1,this.paddingLeft=1,this.paddingTop=1,this.aa=!0,this.smooth=!0,this.stretchH=100,this.unicode=!0,this.charset="",this.italic=!1,this.bold=!1},$hxClasses["core.font.FontInfo"]=core.font.FontInfo,core.font.FontInfo.__name__=["core","font","FontInfo"],core.font.FontInfo.prototype={outline:null,spacingH:null,spacingV:null,paddingBottom:null,paddingRight:null,paddingLeft:null,paddingTop:null,aa:null,smooth:null,stretchH:null,unicode:null,charset:null,italic:null,bold:null,size:null,face:null,__class__:core.font.FontInfo},core.font.FontKerning=function(){},$hxClasses["core.font.FontKerning"]=core.font.FontKerning,core.font.FontKerning.__name__=["core","font","FontKerning"],core.font.FontKerning.prototype={amount:null,second:null,first:null,__class__:core.font.FontKerning},core.font.FontRender=function(e,t,n,i){this._prevHookTop="",this._prevHookLeft="",this._forceReinstantiation=!1,this._textAlign="center",this._prevTextValue=null,this._isHookedToElement=null,this._letters=null,this._maxWidth=375,this._font=null,core.Component.call(this,e,"FontRender"),this._font=t,this._text="",this._layer=n,this._camera=i,this._letters=new Array},$hxClasses["core.font.FontRender"]=core.font.FontRender,core.font.FontRender.__name__=["core","font","FontRender"],core.font.FontRender.__super__=core.Component,core.font.FontRender.prototype=$extend(core.Component.prototype,{getMaxWidth:function(){return this._maxWidth},setMaxWidth:function(e){this._maxWidth=e},destroy:function(){core.Component.prototype.destroy.call(this),null!=this._layer&&null!=this._isHookedToElement&&core.GameManager.instance.removeLayer(this._layer),null!=this._isHookedToElement&&core.managers.FontManager.getInstance().unregisterElementHook(this._isHookedToElement.id)},handleMessage:function(e,t){switch(core.Component.prototype.handleMessage.call(this,e,t),e){case"onScreenScaleUpdated":this.onDisplayUpdated()}},onDisplayUpdated:function(){if(null!=this._isHookedToElement){if(this._layer.getContainer().style.left=Math.ceil(Std.parseInt(this._isHookedToElement.style.left))+"px",this._layer.getContainer().style.top=Math.ceil(Std.parseInt(this._isHookedToElement.style.top))+"px",null!=this._isHookedToElement.style.webkitTransform?this._layer.getContainer().style.webkitTransform=this._isHookedToElement.style.webkitTransform:null!=this._isHookedToElement.style.transform&&(this._layer.getContainer().style.transform=this._isHookedToElement.style.transform),this._layer.getContainer().style.width=Std.parseInt(this._isHookedToElement.style.width)+"px",this._layer.getContainer().style.height=Std.parseInt(this._isHookedToElement.style.height)+Std.parseInt(this._isHookedToElement.style.top)+"px",this._layer.getCanvas().style.width=Std.parseInt(this._isHookedToElement.style.width)+"px",this._layer.getCanvas().style.height=Std.parseInt(this._isHookedToElement.style.height)+Std.parseInt(this._isHookedToElement.style.top)+"px","none"!=this._isHookedToElement.style.transform&&null!=this._isHookedToElement.style.transform&&("none"==this._layer.getContainer().style.webkitTransform||null==this._layer.getContainer().style.webkitTransform)){var e=this._isHookedToElement.style.transform,t=e.split(" ")[0],n=t.split(","),i=new EReg("^\\D+","g"),a=i.replace(n[0],""),o=parseInt(a),r=parseInt(n[1]);this._layer.getContainer().style.left=o+"px",this._layer.getContainer().style.top=r+"px"}this._layer.getCanvas().width=parseInt(this._layer.getCanvas().style.width),this._layer.getCanvas().height=parseInt(this._layer.getCanvas().style.height),this.getEntity().setScale(1/core.GameManager.instance.getScreenScale().x,1/core.GameManager.instance.getScreenScale().y);{Math.ceil(Std.parseInt(this._isHookedToElement.style.marginLeft))}this._maxWidth=Math.ceil(Std.parseInt(this._isHookedToElement.style.width)),this._forceReinstantiation=!0,this._prevHookLeft=this._isHookedToElement.style.left,this._prevHookTop=this._isHookedToElement.style.top}},replaceHtmlTextElementById:function(e,t){if(null==t&&(t=!0),core.managers.FontManager.getInstance().getElementHookExists(e))return void(t&&this.getEntity().destroy());null!=this._layer&&core.GameManager.instance.removeLayer(this._layer);var n=Main.getDocument().getElementById(e);if(null==n)return void core.utilities.Debug.log("Could not find '"+e+"' on the page!");this._isHookedToElement=n,core.managers.FontManager.getInstance().registerElementHook(this._isHookedToElement.id,this),this._text=n.innerHTML,n.style.display="none";var i=new core.Layer("temp",Std.parseInt(n.style.width),Std.parseInt(n.style.height)+Std.parseInt(n.style.top),n.parentNode);this._layer=i,this._layer.getContainer().style.zIndex=n.style.zIndex,core.GameManager.instance.addLayer(i),this._textAlign=n.style.textAlign,this.onDisplayUpdated()},render:function(){core.Component.prototype.render.call(this),null!=this._isHookedToElement},removeLetters:function(){for(var e=this._letters.length,t=0;e>t;){var n=t++;this._letters[n].destroy()}this._letters=new Array},getWordLength:function(e){for(var t=0,n=e.length,i=0;n>i;){var a=i++,o=HxOverrides.cca(e,a),r=this._font.getCharById(o);if(null!=r&&(t+=r.xAdvance+this._font.getFontInfo().spacingH,n-1>a)){var s=HxOverrides.cca(e,a+1);t+=this._font.getKerningSpace(o,s)+this._font.getFontInfo().spacingH}}return t},getWordAtIndex:function(e){for(var t=this._text.split(" "),n=0,i=0,a=0;e>a;){{a++}n++,n>t[i].length&&(n=0,i++)}return t[i]},rightAlignLetters:function(e,t){for(var n=this._maxWidth,i=e.length,a=0;i>a;){var o=a++,r=e[o];r.setPosition(n-t+r.getLocalPosition().x,r.getLocalPosition().y,r.getLocalPosition().z)}},centerLetters:function(e,t){for(var n=this._maxWidth/2,i=e.length,a=0;i>a;){var o=a++,r=e[o];r.setPosition(n-t/2+r.getLocalPosition().x,r.getLocalPosition().y,r.getLocalPosition().z)}},instantiateLetters:function(){this.removeLetters();for(var e=this._text.length,t=new core.Vector2D(0,this._font.getFontCommon().base),n=new Array,i=0,a=!1,o=15,r=0;e>r;){var s=HxOverrides.cca(this._text,r),c=HxOverrides.cca(this._text,r+1);if("<br>"!=this._text.substring(r,r+4)&&"<br/>"!=this._text.substring(r,r+5)){a&&(t.x+this.getWordLength(this.getWordAtIndex(r)+o)>this._maxWidth&&(t.x=0,t.y+=this._font.getFontCommon().lineHeight+this._font.getFontInfo().spacingV,"center"==this._textAlign?this.centerLetters(n,i):"right"==this._textAlign&&this.rightAlignLetters(n,i),i=0,n=new Array),a=!1);var l=this.getEntity().getGameState().addEntity();l.setIsUpdating(!1),this.getEntity().addChild(l),l.setPosition(Math.ceil(t.x),Math.ceil(t.y));var u=this._font.getCharById(s);if(null!=u){var h=new core.components.GameImage(l,this._font.getImageName(),this._layer,this._camera);h.setOffset(u.xOffset,Math.ceil(u.yOffset-this._font.getFontCommon().base)),h.setCoords(new core.Rect2D(u.x,u.y,u.width,u.height)),t.x+=Math.ceil(u.xAdvance+this._font.getFontInfo().spacingH),i+=Math.ceil(u.xAdvance+this._font.getFontInfo().spacingH),n.push(l),e-1>r&&(t.x+=this._font.getKerningSpace(s,HxOverrides.cca(this._text,r+1))+this._font.getFontInfo().spacingH,i+=this._font.getKerningSpace(s,HxOverrides.cca(this._text,r+1))+this._font.getFontInfo().spacingH),32!=c&&t.x+o>this._maxWidth&&(t.x=0,t.y+=this._font.getFontCommon().lineHeight+this._font.getFontInfo().spacingV,"center"==this._textAlign?this.centerLetters(n,i):"right"==this._textAlign&&this.rightAlignLetters(n,i),i=0,n=new Array),32==s&&(a=!0)}this._letters.push(l),r++}else t.x=0,t.y+=this._font.getFontCommon().lineHeight,r+=4,"center"==this._textAlign?this.centerLetters(n,i):"right"==this._textAlign&&this.rightAlignLetters(n,i),i=0,n=new Array}"center"==this._textAlign?this.centerLetters(n,i):"right"==this._textAlign&&this.rightAlignLetters(n,i),this._prevTextValue=this._text},setNonHTMLText:function(e){this._text=e,this._prevTextValue=e,this._forceReinstantiation=!0},setText:function(e){this._text=e,this._text=StringTools.replace(this._text,"&","&"),this._forceReinstantiation=!0},getText:function(){return this._text},update:function(){core.Component.prototype.update.call(this),null!=this._isHookedToElement&&(this.setText(this._isHookedToElement.innerHTML),"none"==this._isHookedToElement.parentNode.style.display&&this.removeLetters(),(this._isHookedToElement.style.left!=this._prevHookLeft||this._isHookedToElement.style.top!=this._prevHookTop)&&this.onDisplayUpdated()),this._prevTextValue!=this._text&&this.onDisplayUpdated(),this._forceReinstantiation&&(this._forceReinstantiation=!1,this.removeLetters(),this.instantiateLetters())},init:function(){core.Component.prototype.init.call(this),this.instantiateLetters()},_prevHookTop:null,_prevHookLeft:null,_forceReinstantiation:null,_textAlign:null,_prevTextValue:null,_isHookedToElement:null,_letters:null,_maxWidth:null,_camera:null,_layer:null,_text:null,_font:null,__class__:core.font.FontRender}),core.gameStates={},core.gameStates.OrientationState=function(){this._orientationEntity=null,core.GameState.call(this)},$hxClasses["core.gameStates.OrientationState"]=core.gameStates.OrientationState,core.gameStates.OrientationState.__name__=["core","gameStates","OrientationState"],core.gameStates.OrientationState.__super__=core.GameState,core.gameStates.OrientationState.prototype=$extend(core.GameState.prototype,{handleMessage:function(e,t){switch(core.GameState.prototype.handleMessage.call(this,e,t),e){case"onOrientationChanged":this.onOrientationChanged(t.isHorizontal)}},hideOrientationScreen:function(e){null==e&&(e=!0),core.utilities.Debug.log("hideOrientationScreen()"),null!=this._orientationEntity&&(this._orientationEntity.destroy(),this._orientationEntity=null),e&&(core.GameManager.instance.resumeUpdates(),core.managers.InputManager.getInstance().setInputDisabled(!1),core.managers.SoundManager.resumeAllSounds())},showOrientationScreen:function(e){switch(core.utilities.Debug.log("showOrientationScreen()"),this.hideOrientationScreen(!1),core.GameManager.instance.stopUpdates(),core.managers.InputManager.getInstance().setInputDisabled(!0),core.managers.SoundManager.pauseAllSounds(),e){case 0:this._orientationEntity=this.addEntity();{core.GameManager.instance.isPhone()?new core.components.HtmlElements(this._orientationEntity,core.GameManager.instance.getLayerByName("orientation"),core.managers.AssetManager.getAsset("iphoneLandscapeHtml")):new core.components.HtmlElements(this._orientationEntity,core.GameManager.instance.getLayerByName("orientation"),core.managers.AssetManager.getAsset("ipadLandscapeHtml"))}break;case 1:this._orientationEntity=this.addEntity();{core.GameManager.instance.isPhone()?new core.components.HtmlElements(this._orientationEntity,core.GameManager.instance.getLayerByName("orientation"),core.managers.AssetManager.getAsset("iphonePortraitHtml")):new core.components.HtmlElements(this._orientationEntity,core.GameManager.instance.getLayerByName("orientation"),core.managers.AssetManager.getAsset("ipadPortraitHtml"))}}},onOrientationChanged:function(e){core.GameManager.isMobile()&&!core.GameManager.instance.isPhone()?e&&0==core.GameConfig.getProperty("isLandscapeAllowedIPad")?this.showOrientationScreen(1):e||0!=core.GameConfig.getProperty("isPortraitAllowedIPad")?this.hideOrientationScreen():this.showOrientationScreen(0):core.GameManager.isMobile()&&(e&&0==core.GameConfig.getProperty("isLandscapeAllowedIPhone")?this.showOrientationScreen(1):e||0!=core.GameConfig.getProperty("isPortraitAllowedIPhone")?this.hideOrientationScreen():this.showOrientationScreen(0))},init:function(){core.GameState.prototype.init.call(this)},_orientationEntity:null,__class__:core.gameStates.OrientationState}),core.managers={},core.managers.AnimationManager=function(){this._animations=new Hash},$hxClasses["core.managers.AnimationManager"]=core.managers.AnimationManager,core.managers.AnimationManager.__name__=["core","managers","AnimationManager"],core.managers.AnimationManager._instance=null,core.managers.AnimationManager.getInstance=function(){return null==core.managers.AnimationManager._instance&&(core.managers.AnimationManager._instance=new core.managers.AnimationManager),core.managers.AnimationManager._instance
},core.managers.AnimationManager.prototype={registerAnimation:function(e){this._animations.set(e.getName(),e)},getAnimationByName:function(e){return this._animations.get(e)},_animations:null,__class__:core.managers.AnimationManager},core.managers.AssetManager=function(){},$hxClasses["core.managers.AssetManager"]=core.managers.AssetManager,core.managers.AssetManager.__name__=["core","managers","AssetManager"],core.managers.AssetManager.getAsset=function(e){if(!core.managers.AssetManager.assetList.exists(e))throw e+" does not exist in asset list!";return core.managers.AssetManager.assetList.get(e)},core.managers.AssetManager.assetExists=function(e){return core.managers.AssetManager.assetList.exists(e)},core.managers.AssetManager.registerAsset=function(e,t){core.managers.AssetManager.assetList.exists(e)||core.managers.AssetManager.assetList.set(e,t)},core.managers.AssetManager.prototype={__class__:core.managers.AssetManager},core.managers.DebugManager=function(){core.Manager.call(this)},$hxClasses["core.managers.DebugManager"]=core.managers.DebugManager,core.managers.DebugManager.__name__=["core","managers","DebugManager"],core.managers.DebugManager.__super__=core.Manager,core.managers.DebugManager.prototype=$extend(core.Manager.prototype,{update:function(){core.Manager.prototype.update.call(this),"1"==core.GameConfig.getProperty("debugCheats")&&core.managers.InputManager.getInstance().isKeyPressed(104)&&core.GameConfig.setProperty("debugDraw","1"==core.GameConfig.getProperty("debugDraw")?"0":"1")},__class__:core.managers.DebugManager}),core.managers.EdgeManager=function(){core.Manager.call(this)},$hxClasses["core.managers.EdgeManager"]=core.managers.EdgeManager,core.managers.EdgeManager.__name__=["core","managers","EdgeManager"],core.managers.EdgeManager.__super__=core.Manager,core.managers.EdgeManager.prototype=$extend(core.Manager.prototype,{setupAnimationView:function(){},init:function(){core.Manager.prototype.init.call(this)},__class__:core.managers.EdgeManager}),core.managers.FontManager=function(){this._fonts=null,core.Manager.call(this),this._fonts=new Array,core.managers.FontManager._instance=this},$hxClasses["core.managers.FontManager"]=core.managers.FontManager,core.managers.FontManager.__name__=["core","managers","FontManager"],core.managers.FontManager.getInstance=function(){return core.managers.FontManager._instance},core.managers.FontManager.__super__=core.Manager,core.managers.FontManager.prototype=$extend(core.Manager.prototype,{getFontByName:function(e){for(var t=this._fonts.length,n=0;t>n;){var i=n++,a=this._fonts[i];if(a.getName()==e)return a}return null},unregisterElementHook:function(e){core.managers.FontManager._elementHookMap.remove(e)},getElementHookExists:function(e){return core.managers.FontManager._elementHookMap.exists(e)},getFontRenderByHookElementId:function(e){return core.managers.FontManager._elementHookMap.get(e)},registerElementHook:function(e,t){core.managers.FontManager._elementHookMap.set(e,t)},getHasFont:function(e){for(var t=this._fonts.length,n=0;t>n;){var i=n++;if(e==this._fonts[i])return!0}return!1},unregisterFont:function(e){HxOverrides.remove(this._fonts,e)},registerFont:function(e){this.getHasFont(e)||this._fonts.push(e)},_fonts:null,__class__:core.managers.FontManager}),core.managers.InputManager=function(){this._mouseMoveClearThisFrame=!0,this._keysPressedThisFrame=null,this._keysDown=null,this._isLeftMouseDown=!1,this._isInputDisabled=!1,this._mousePosition=null,core.Manager.call(this),core.managers.InputManager._instance=this,this._mousePosition=new core.Vector2D(0,0),this._keysDown=new Array,this._keysPressedThisFrame=new Array;for(var e=0;255>e;){{e++}this._keysDown.push(!1),this._keysPressedThisFrame.push(!1)}},$hxClasses["core.managers.InputManager"]=core.managers.InputManager,core.managers.InputManager.__name__=["core","managers","InputManager"],core.managers.InputManager.getInstance=function(){return core.managers.InputManager._instance},core.managers.InputManager.__super__=core.Manager,core.managers.InputManager.prototype=$extend(core.Manager.prototype,{isLeftMouseDown:function(){return this._isLeftMouseDown},isKeyPressed:function(e){return this._keysPressedThisFrame[e]},isKeyDown:function(e){return this._keysDown[e]},setInputDisabled:function(e){this._isInputDisabled=e},getInputDisabled:function(){return this._isInputDisabled},enablePageKeyPresses:function(){document.onkeydown=null},disablePageKeyPresses:function(){document.onkeydown=function(e){return e.preventDefault(),!1}},onKeyPressed:function(e){e.stopPropagation(),this._isInputDisabled||core.GameManager.instance.sendGlobalMessage("keyPressed",e.keyCode)},onKeyUp:function(e){this._isInputDisabled||(this._keysDown[e.keyCode]=!1,core.GameManager.instance.sendGlobalMessage("keyUp",e.keyCode))},onKeyDown:function(e){e.stopPropagation(),this._isInputDisabled||this._keysDown[e.keyCode]||(this._keysDown[e.keyCode]=!0,this._keysPressedThisFrame[e.keyCode]=!0,core.GameManager.instance.sendGlobalMessage("keyDown",e.keyCode))},onMouseOut:function(e){if(!this._isInputDisabled){var t=e.pageX-Main.getContainer().offsetLeft,n=e.pageY-Main.getContainer().offsetTop;this._mousePosition.x=t,this._mousePosition.y=n,core.GameManager.instance.sendGlobalMessage("mouseOut",this.getMousePosition())}},onMouseLeave:function(e){if(!this._isInputDisabled){var t=e.pageX-Main.getContainer().offsetLeft,n=e.pageY-Main.getContainer().offsetTop;this._mousePosition.x=t,this._mousePosition.y=n,core.GameManager.instance.sendGlobalMessage("mouseLeave",this.getMousePosition())}},onMouseClick:function(e){if(!this._isInputDisabled){var t=e.pageX-Main.getContainer().offsetLeft,n=e.pageY-Main.getContainer().offsetTop;this._mousePosition.x=t,this._mousePosition.y=n,core.GameManager.instance.sendGlobalMessage("mouseClick",this.getMousePosition())}},onMouseUp:function(e){if(!this._isInputDisabled)if(core.GameManager.isMobile())0==e.touches.length&&(this._isLeftMouseDown=!1),core.GameManager.instance.sendGlobalMessage("mouseUp",this.getMousePosition());else{this._isLeftMouseDown=!1;var t,n;t=e.pageX-Main.getContainer().offsetLeft,n=e.pageY-Main.getContainer().offsetTop,this._mousePosition.x=t,this._mousePosition.y=n,core.GameManager.instance.sendGlobalMessage("mouseUp",this.getMousePosition())}},onMouseDown:function(e){if(core.GameManager.instance.hideAddressBar(),!this._isInputDisabled)if(core.GameManager.isMobile()){this._isLeftMouseDown=!0;var t=e.changedTouches;if(null!=t)for(var n=t.length,i=0;n>i;){var a=i++,o=t[a],r=o.pageX-Main.getContainer().offsetLeft,s=o.pageY-Main.getContainer().offsetTop;this._mousePosition.x=r,this._mousePosition.y=s,core.GameManager.instance.sendGlobalMessage("mouseDown",this.getMousePosition())}}else{this._isLeftMouseDown=!0;var r=e.pageX-Main.getContainer().offsetLeft,s=e.pageY-Main.getContainer().offsetTop;this._mousePosition.x=r,this._mousePosition.y=s,core.GameManager.instance.sendGlobalMessage("mouseDown",this.getMousePosition())}},onMouseMoved:function(e){if(!this._isInputDisabled&&this._mouseMoveClearThisFrame)if(core.GameManager.isMobile()&&(this._mouseMoveClearThisFrame=!1),core.GameManager.isMobile()){var t=e.changedTouches;if(null!=t)for(var n=t.length,i=0;n>i;){var a=i++,o=t[a],r=o.pageX-Main.getContainer().offsetLeft,s=o.pageY-Main.getContainer().offsetTop;this._mousePosition.x=r,this._mousePosition.y=s,core.GameManager.instance.sendGlobalMessage("mouseMove",this.getMousePosition())}core.GameManager.instance.sendGlobalMessage("verifyTouches",e)}else{var r=e.pageX-Main.getContainer().offsetLeft,s=e.pageY-Main.getContainer().offsetTop;this._mousePosition.x=r,this._mousePosition.y=s,core.GameManager.instance.sendGlobalMessage("mouseMove",this.getMousePosition())}},getMousePosition:function(){var e=new core.Vector2D;return new core.Vector2D((this._mousePosition.x-e.x)/core.GameManager.instance.getScreenScale().x,(this._mousePosition.y-e.y)/core.GameManager.instance.getScreenScale().y)},postUpdate:function(){core.Manager.prototype.postUpdate.call(this);for(var e=this._keysPressedThisFrame.length,t=0;e>t;){var n=t++;this._keysPressedThisFrame[n]=!1}this._mouseMoveClearThisFrame=!0},update:function(){core.Manager.prototype.update.call(this)},init:function(){core.Manager.prototype.init.call(this),Main.getWindow().addEventListener("mousemove",$bind(this,this.onMouseMoved)),Main.getWindow().addEventListener("mousedown",$bind(this,this.onMouseDown)),Main.getWindow().addEventListener("mouseup",$bind(this,this.onMouseUp)),Main.getWindow().addEventListener("mouseleave",$bind(this,this.onMouseLeave)),Main.getWindow().addEventListener("mouseout",$bind(this,this.onMouseOut)),Main.getWindow().addEventListener("click",$bind(this,this.onMouseClick)),document.addEventListener("touchstart",$bind(this,this.onMouseDown)),document.addEventListener("touchend",$bind(this,this.onMouseUp)),document.addEventListener("touchmove",$bind(this,this.onMouseMoved))},_mouseMoveClearThisFrame:null,_keysPressedThisFrame:null,_keysDown:null,_isLeftMouseDown:null,_isInputDisabled:null,_mousePosition:null,__class__:core.managers.InputManager}),core.managers.PhysicsEvent=function(){},$hxClasses["core.managers.PhysicsEvent"]=core.managers.PhysicsEvent,core.managers.PhysicsEvent.__name__=["core","managers","PhysicsEvent"],core.managers.PhysicsEvent.prototype={__class__:core.managers.PhysicsEvent},core.managers.PhysicsManager=function(){this._raycastsThisFrame=null,this._colliders=null,core.Manager.call(this),core.managers.PhysicsManager._instance=this,this._raycastsThisFrame=new Array,this._colliders=new Array,this.addEventListener("raycastCheck",$bind(this,this.onRaycastCheck))},$hxClasses["core.managers.PhysicsManager"]=core.managers.PhysicsManager,core.managers.PhysicsManager.__name__=["core","managers","PhysicsManager"],core.managers.PhysicsManager.getInstance=function(){return core.managers.PhysicsManager._instance},core.managers.PhysicsManager.createBoxColliderEntity=function(e,t,n,i,a,o,r,s){null==s&&(s=!0);var c=o.addEntity();c.setPosition(e,t,n);var l=new core.collision.BoxCollision;l.ul=new core.Vector2D(e,t),l.wh=new core.Vector2D(i,a);var u=new core.components.colliders.BoxCollider(c,l,s?new core.Vector3D:new core.Vector3D(.5*l.wh.x,.5*l.wh.y));if(null!=r)for(var h=r.length,d=0;h>d;){var g=d++;u.addTag(r[g])}return c},core.managers.PhysicsManager.createBoxCollider=function(e,t,n,i,a,o,r){null==o&&(o=0),null==a&&(a=0),null==i&&(i=0);var s=new core.collision.BoxCollision;s.wh=new core.Vector2D(t,n);var c=new core.components.colliders.BoxCollider(e,s,new core.Vector3D(i,a,o));if(null!=r)for(var l=r.length,u=0;l>u;){var h=u++;c.addTag(r[h])}return c},core.managers.PhysicsManager.__super__=core.Manager,core.managers.PhysicsManager.prototype=$extend(core.Manager.prototype,{onRaycastCheck:function(e){this._raycastsThisFrame.push({start:e.start,end:e.end})},destroyAllColliders:function(){for(var e=this._colliders.length,t=e-1;t>=0;){var n=this._colliders[t];this.removeCollider(n),t--}this._colliders=new Array},debugRender:function(){core.Manager.prototype.debugRender.call(this);for(var e=this._raycastsThisFrame.length,t=0;e>t;){var n=t++,i=this._raycastsThisFrame[n],a=i.start,o=i.end,r=i.hitPoint,s=core.GameManager.instance.getLayerByName("debug").getCanvas().getContext("2d");if(s.save(),null!=core.components.Camera.getDebugCamera()){var c=core.components.Camera.getDebugCamera().getEntity(),l=core.components.Camera.getDebugCamera().getZoomScale();s.translate(-c.getPosition().x*l,-c.getPosition().y*l),s.scale(l,l)}if(null==r)s.beginPath(),s.globalAlpha=1,s.lineWidth=1,s.strokeStyle="#AAAAFF",s.moveTo(a.x,a.y),s.lineTo(o.x,o.y),s.stroke();else if(s.beginPath(),s.globalAlpha=1,s.lineWidth=1,s.strokeStyle="#AAAAFF",s.moveTo(a.x,a.y),s.lineTo(r.x,r.y),s.stroke(),s.beginPath(),s.globalAlpha=1,s.lineWidth=1,s.strokeStyle="#FFFF00",s.moveTo(r.x,r.y),s.lineTo(o.x,o.y),s.stroke(),null!=i.normal){var u=new core.Vector2D(o.x-r.x,o.y-r.y).getLength(),h=new core.Vector2D(r.x+i.normal.x*u,r.y+i.normal.y*u);s.beginPath(),s.globalAlpha=1,s.lineWidth=1,s.strokeStyle="#FF00FF",s.moveTo(r.x,r.y),s.lineTo(h.x,h.y),s.stroke()}s.restore()}this._raycastsThisFrame=new Array},getRaycastPoint:function(e,t,n,i,a){null==i&&(i=!0);for(var o=-1,r=null,s=null,c=0,l=0,u=this._colliders.length,h=0;u>h;){var d=h++;l++;var g=this._colliders[d];if(0!=g.getIsActive()){if(null!=a){for(var m=!1,p=a.length,f=0;p>f;){var _=f++;if(g.hasTag(a[_])){m=!0;break}}if(!m)continue}c++;var y=new core.Vector2D;if(i){var v=new core.Vector2D,x=g.getRaycastPoint(e,t,y,i,v);(-1==o&&x>0||x>0&&o>x)&&(n.distance=x,n.collider=g,n.collisionPoint=y,n.normal=v,s=v,r=y,o=x,HxOverrides.remove(this._colliders,g),this._colliders.unshift(g))}else{var v=new core.Vector2D,x=g.getRaycastPoint(e,t,y,i,v);if(x>0){n.distance=x,n.collider=g,n.collisionPoint=y,n.normal=v,s=v,r=y,o=x,HxOverrides.remove(this._colliders,g),this._colliders.unshift(g);break}}}}return this._raycastsThisFrame.push({start:e,end:t,hitPoint:r,normal:s}),o},getColliders:function(){return this._colliders},removeCollider:function(e){for(var t=this._colliders.length,n=0;t>n;){var i=n++,a=this._colliders[i];if(a==e)return void this._colliders.splice(i,1)}},registerCollider:function(e){for(var t=this._colliders.length,n=0;t>n;){var i=n++,a=this._colliders[i];if(a==e)return}this._colliders.push(e)},update:function(){core.Manager.prototype.update.call(this)},_raycastsThisFrame:null,_colliders:null,__class__:core.managers.PhysicsManager}),core.managers.SoundManager=function(){},$hxClasses["core.managers.SoundManager"]=core.managers.SoundManager,core.managers.SoundManager.__name__=["core","managers","SoundManager"],core.managers.SoundManager._audioContext=null,core.managers.SoundManager.init=function(){if(core.utilities.Debug.log("SoundManager::init()"),core.GameManager.isMobile()){core.utilities.Debug.log("Audio context detected");var e="audioContextInstance";core.managers.SoundManager._audioContext=window[e],core.managers.SoundManager._isWebkitEnabled=null!=window[e]}else if(window.soundManager)try{soundManager.setup({url:"soundmanager2_flash9.swf",flashVersion:9,onready:core.managers.SoundManager.onSoundManagerReady,ontimeout:core.managers.SoundManager.onSoundManagerTimeout,useHighPerformance:!0})}catch(t){if(!js.Boot.__instanceof(t,String))throw t;core.managers.SoundManager._useFlashSound=!1}},core.managers.SoundManager.onSoundManagerReady=function(){core.managers.SoundManager._useFlashSound=1==soundManager.html5.usingFlash},core.managers.SoundManager.onSoundManagerTimeout=function(){core.utilities.Debug.log("TIMEOUT"),core.managers.SoundManager._useFlashSound=0==soundManager.html5.usingFlash},core.managers.SoundManager.onSwfLoaded=function(){core.utilities.Debug.log("onSwfLoaded()")},core.managers.SoundManager.getAudioContextInstance=function(){return core.managers.SoundManager._audioContext},core.managers.SoundManager.getIsWebkitEnabled=function(){return core.managers.SoundManager._isWebkitEnabled&&!core.managers.SoundManager._useFlashSound},core.managers.SoundManager.setIsWebkitEnabled=function(e){core.managers.SoundManager._isWebkitEnabled=e},core.managers.SoundManager.getMusicMuted=function(){return core.managers.SoundManager._musicMuted},core.managers.SoundManager.setMusicMuted=function(e){core.managers.SoundManager._musicMuted=e,core.managers.SoundManager.setMusicVolume(core.managers.SoundManager._musicVolume),core.managers.SoundManager.getIsWebkitEnabled()||(core.GameManager.isMobile()&&e?core.managers.SoundManager._musicTrack.pause():core.GameManager.isMobile()&&!e&&core.managers.SoundManager._musicTrack.play())},core.managers.SoundManager.getSoundMuted=function(){return core.managers.SoundManager._soundMuted},core.managers.SoundManager.setSoundMuted=function(e){core.managers.SoundManager._soundMuted=e,core.managers.SoundManager.setSoundVolume(core.managers.SoundManager._soundVolume)},core.managers.SoundManager.getMasterVolume=function(){return core.managers.SoundManager._masterVolume},core.managers.SoundManager.setMasterVolume=function(e){core.managers.SoundManager._masterVolume=e,core.managers.SoundManager.setMusicVolume(core.managers.SoundManager._musicVolume),core.managers.SoundManager.setSoundVolume(core.managers.SoundManager._soundVolume)},core.managers.SoundManager.getMusicVolume=function(){return core.managers.SoundManager.getMusicMuted()?0:core.managers.SoundManager._musicVolume},core.managers.SoundManager.setMusicVolume=function(e){core.managers.SoundManager._musicVolume=e,null!=core.managers.SoundManager._musicTrack&&core.managers.SoundManager._musicTrack.setVolume(core.managers.SoundManager._musicMuted?0:core.managers.SoundManager.getMusicVolume()*core.managers.SoundManager.getMasterVolume())},core.managers.SoundManager.getSoundVolume=function(){return core.managers.SoundManager.getSoundMuted()?0:core.managers.SoundManager._soundVolume},core.managers.SoundManager.setSoundVolume=function(e){core.managers.SoundManager._soundVolume=e;for(var t=core.managers.SoundManager._soundsPlaying.length,n=0;t>n;){var i=n++,a=core.managers.SoundManager._soundsPlaying[i];a.setVolume(core.managers.SoundManager._soundMuted?0:core.managers.SoundManager.getSoundVolume()*core.managers.SoundManager.getMasterVolume())}},core.managers.SoundManager.playSoundByName=function(e,t,n){if(null==n&&(n=!1),null==t&&(t=!1),!core.managers.SoundManager.getIsWebkitEnabled()&&core.GameManager.isMobile()&&!t)return null;if(!core.managers.AssetManager.assetExists(e))return null;var i;return i=core.managers.SoundManager.getIsWebkitEnabled()?new core.audio.WebkitSoundData(e,core.managers.SoundManager.getSoundVolume()*core.managers.SoundManager.getMasterVolume(),n):core.managers.SoundManager.getUseFlashSound()?new core.audio.FlashSoundData(e,core.managers.SoundManager.getMasterVolume()*core.managers.SoundManager.getSoundVolume(),n):new core.audio.Html5SoundData(e,core.managers.SoundManager.getMasterVolume()*core.managers.SoundManager.getSoundVolume(),n),i.play(),core.managers.SoundManager._soundsPlaying.push(i),i},core.managers.SoundManager.update=function(){for(var e=core.managers.SoundManager._soundsPlaying.length,t=0;e>t;){var n=t++,i=core.managers.SoundManager._soundsPlaying[n];i.update()}},core.managers.SoundManager.onSoundComplete=function(e){var t=e.currentTarget;core.managers.SoundManager.removeSoundFromPlayingSounds(t)},core.managers.SoundManager.removeSoundFromPlayingSounds=function(e){HxOverrides.remove(core.managers.SoundManager._soundsPlaying,e)},core.managers.SoundManager.pauseAllSounds=function(){null!=core.managers.SoundManager._musicTrack&&core.managers.SoundManager._musicTrack.pause(),core.utilities.Debug.log("pauseAllSounds()");for(var e=core.managers.SoundManager._soundsPlaying.length,t=0;e>t;){var n=t++,i=core.managers.SoundManager._soundsPlaying[n];i.pause()}},core.managers.SoundManager.resumeAllSounds=function(){core.utilities.Debug.log("resumeAllSounds()");for(var e=core.managers.SoundManager._soundsPlaying.length,t=(new Array).concat(core.managers.SoundManager._soundsPlaying),n=0;e>n;){var i=n++,a=t[i];a.resume()}null!=core.managers.SoundManager._musicTrack&&core.managers.SoundManager._musicTrack.resume()},core.managers.SoundManager.playMusicByNameOnMobileOnly=function(e){return core.GameManager.isMobile()?core.managers.SoundManager.playMusicByName(e,!0):null},core.managers.SoundManager.playMusicByName=function(e,t){if(null==t&&(t=!0),core.GameManager.isMobile()&&!t)return null;if(!core.managers.AssetManager.assetExists(e))return core.utilities.Debug.log(e+" doesn't exist!"),null;null!=core.managers.SoundManager._musicTrack&&core.managers.SoundManager._musicTrack.stop();var n;return core.managers.SoundManager.getIsWebkitEnabled()?(n=new core.audio.WebkitSoundData(e,core.managers.SoundManager.getMasterVolume()*core.managers.SoundManager.getMusicVolume(),!0),n.play(0),core.managers.SoundManager._musicTrack=n):core.managers.SoundManager._useFlashSound?(n=new core.audio.FlashSoundData(e,core.managers.SoundManager.getMusicVolume()*core.managers.SoundManager.getMasterVolume(),!0),n.play(),core.managers.SoundManager._musicTrack=n):(core.managers.SoundManager._musicTrack=new core.audio.Html5SoundData(e,core.managers.SoundManager.getMasterVolume()*core.managers.SoundManager.getMusicVolume(),!0),core.managers.SoundManager._musicTrack.play(),n=core.managers.SoundManager._musicTrack),core.managers.SoundManager.setMusicVolume(core.managers.SoundManager._musicVolume),n},core.managers.SoundManager.stopMusic=function(){core.managers.SoundManager._musicTrack.stop(),core.managers.SoundManager._musicTrack=null},core.managers.SoundManager.stopAllSounds=function(){for(var e=core.managers.SoundManager._soundsPlaying.length,t=e-1;t>=0;){var n=core.managers.SoundManager._soundsPlaying[t];n.stop(),core.managers.SoundManager.removeSoundFromPlayingSounds(n),t--}core.managers.SoundManager._soundsPlaying=new Array},core.managers.SoundManager.getUseFlashSound=function(){return core.managers.SoundManager._useFlashSound},core.managers.SoundManager.getFlashObject=function(){return core.managers.SoundManager._flashObject},core.managers.SoundManager.prototype={__class__:core.managers.SoundManager},core.spriteSheets={},core.spriteSheets.SpriteInfo=function(e,t,n,i){this._name=e,this._coords=t.getClone(),this._spriteSheetName=n,this._offset=null==i||Math.isNaN(i.x)&&Math.isNaN(i.y)?new core.Vector2D:new core.Vector2D(i.x,i.y)},$hxClasses["core.spriteSheets.SpriteInfo"]=core.spriteSheets.SpriteInfo,core.spriteSheets.SpriteInfo.__name__=["core","spriteSheets","SpriteInfo"],core.spriteSheets.SpriteInfo.prototype={getName:function(){return this._name},getSpriteSheetName:function(){return this._spriteSheetName},getOffset:function(){return this._offset},setOffset:function(e,t){this._offset.x=e,this._offset.y=t},getCoords:function(){return this._coords},_offset:null,_spriteSheetName:null,_coords:null,_name:null,__class__:core.spriteSheets.SpriteInfo},core.spriteSheets.SpriteSheet=function(e,t){this._image=null,this._spriteInfo=new Array,this._spriteInfoHashTable=new Hash,this._name=e,null==t?this._imageName=e:(this._imageName=t,this._image=core.managers.AssetManager.getAsset(this._imageName))},$hxClasses["core.spriteSheets.SpriteSheet"]=core.spriteSheets.SpriteSheet,core.spriteSheets.SpriteSheet.__name__=["core","spriteSheets","SpriteSheet"],core.spriteSheets.SpriteSheet.parseFromXmlString=function(e,t,n){for(var i=Xml.parse(n),a=e,o=t,r=new core.spriteSheets.SpriteSheet(a,o),s=i.elementsNamed("TextureAtlas").next().elementsNamed("sprite");s.hasNext();){var c=s.next(),l=new core.spriteSheets.SpriteInfo(c.get("n"),new core.Rect2D(c.get("x"),c.get("y"),c.get("w"),c.get("h")),a,new core.Vector2D(Std.parseFloat(c.get("oX")),Std.parseFloat(c.get("oY"))));r.addSpriteInfo(l)}return core.spriteSheets.SpriteSheetManager.getInstance().registerSpriteSheet(r),r},core.spriteSheets.SpriteSheet.prototype={addToAllOffsets:function(e,t){for(var n=this._spriteInfo.length,i=0;n>i;){var a=i++,o=this._spriteInfo[a];o.setOffset(o.getOffset().x+e,o.getOffset().y+t)}},getSpriteInfoByName:function(e){return this._spriteInfoHashTable.get(e)},getSpriteInfoByIndex:function(e){return this._spriteInfo[e]},addSpriteInfo:function(e){this._spriteInfo.push(e),this._spriteInfoHashTable.set(e.getName(),e)},getImageName:function(){return this._imageName},getImage:function(){return this._image},getName:function(){return this._name},getNumSprites:function(){return this._spriteInfo.length},_image:null,_imageName:null,_spriteInfoHashTable:null,_spriteInfo:null,_name:null,__class__:core.spriteSheets.SpriteSheet},core.spriteSheets.SpriteSheetManager=function(){this._spriteSheets=new Hash},$hxClasses["core.spriteSheets.SpriteSheetManager"]=core.spriteSheets.SpriteSheetManager,core.spriteSheets.SpriteSheetManager.__name__=["core","spriteSheets","SpriteSheetManager"],core.spriteSheets.SpriteSheetManager._instance=null,core.spriteSheets.SpriteSheetManager.getInstance=function(){return null==core.spriteSheets.SpriteSheetManager._instance&&(core.spriteSheets.SpriteSheetManager._instance=new core.spriteSheets.SpriteSheetManager),core.spriteSheets.SpriteSheetManager._instance},core.spriteSheets.SpriteSheetManager.prototype={registerSpriteSheet:function(e){this._spriteSheets.set(e.getName(),e)},getSpriteSheetByName:function(e){return this._spriteSheets.get(e)},addToAllSpriteSheetOffsets:function(e,t,n){this.getSpriteSheetByName(e).addToAllOffsets(t,n)},_spriteSheets:null,__class__:core.spriteSheets.SpriteSheetManager},core.tmx={},core.tmx.TmxImage=function(){this.image=null,this.height=0,this.width=0,this.trans="#000000",this.source=""},$hxClasses["core.tmx.TmxImage"]=core.tmx.TmxImage,core.tmx.TmxImage.__name__=["core","tmx","TmxImage"],core.tmx.TmxImage.prototype={image:null,height:null,width:null,trans:null,source:null,__class__:core.tmx.TmxImage},core.tmx.TmxImageLayer=function(){this.image=null,this.height=0,this.width=0,this.properties=new Hash},$hxClasses["core.tmx.TmxImageLayer"]=core.tmx.TmxImageLayer,core.tmx.TmxImageLayer.__name__=["core","tmx","TmxImageLayer"],core.tmx.TmxImageLayer.prototype={properties:null,image:null,height:null,width:null,name:null,__class__:core.tmx.TmxImageLayer},core.tmx.TmxLayer=function(){this.data="",this.height=0,this.width=0,this.name="",this.properties=new Hash,this.tileValues=new Array},$hxClasses["core.tmx.TmxLayer"]=core.tmx.TmxLayer,core.tmx.TmxLayer.__name__=["core","tmx","TmxLayer"],core.tmx.TmxLayer.prototype={isSpace:function(e,t){var n=HxOverrides.cca(e,t);return n>=9&&13>=n||32==n},decompressData:function(){for(var e=this.data.split(","),t=e.length,n=0;t>n;){var i=n++,a=Std.parseInt(e[i]);this.tileValues.push(a)}},tileValues:null,data:null,properties:null,height:null,width:null,name:null,__class__:core.tmx.TmxLayer},core.tmx.TmxLevel=function(e,t,n,i,a,o,r){this._colliderEntities=null,this._tiles=null,this._isLoaded=!1,this._onLevelLoaded=null,this._camera=null,this._fgLayer=null,this._layer=null,this._basePath="",this._tmxMap=null,core.Component.call(this,e,"TmxLevel"),this._tmxMap=t,this._layer=i,this._fgLayer=a,this._camera=o,this._basePath=n,this._onLevelLoaded=r,this._tiles=new Array,this._colliderEntities=new Array,this._layers=new Array},$hxClasses["core.tmx.TmxLevel"]=core.tmx.TmxLevel,core.tmx.TmxLevel.__name__=["core","tmx","TmxLevel"],core.tmx.TmxLevel.__super__=core.Component,core.tmx.TmxLevel.prototype=$extend(core.Component.prototype,{onDestroyed:function(){core.Component.prototype.onDestroyed.call(this),this._tmxMap=null},getColliderEntities:function(){return this._colliderEntities},findObjectByType:function(e){for(var t=this.getAllObjects(),n=t.length,i=0;n>i;){var a=i++,o=t[a];if(o.type==e)return o}return null},findObjectByName:function(e){for(var t=this.getAllObjects(),n=t.length,i=0;n>i;){var a=i++,o=t[a];if(o.name==e)return o}return null},getClosestObjectToPointByArray:function(e,t){for(var n=-1,i=null,a=t.length,o=0;a>o;){var r=o++,s=t[r],c=new core.Vector2D(s.x+s.width/2,s.y+s.height/2),l=new core.Vector2D(c.x-e.x,c.y-e.y);(-1==n||l.getLength()<n)&&(n=l.getLength(),i=s)}return i},getAllObjects:function(){for(var e=new Array,t=this._tmxMap.objectGroups.length,n=0;t>n;)for(var i=n++,a=this._tmxMap.objectGroups[i],o=a.objects.length,r=0;o>r;){var s=r++;e.push(a.objects[s])}return e},getAllObjectsByType:function(e){var t=this.getAllObjects(),n=new Array;n=n.concat(t);for(var i=n.length,a=i-1;a>=0;)n[a].type!=e&&n.splice(a,1),a--;return n},processCollision:function(){for(var e=this._tmxMap.objectGroups.length,t=0;e>t;)for(var n=t++,i=this._tmxMap.objectGroups[n],a=i.objects.length,o=0;a>o;){var r=o++,s=i.objects[r],c=s.polygon;if(("Collision"==s.type||"SoftCollision"==s.type)&&null!=c){for(var l=this.getEntity().getGameState().addEntity(),u=new core.collision.PolygonCollision,h=c.points.length,d=0;h>d;){var g=d++,m=c.points[g];u.addPoint(Math.floor(m.x),Math.floor(m.y))}var p=new core.components.colliders.PolygonCollider(l,u);p.addTag("Collision"==s.type?"ground":"softGround"),l.setPosition(Math.floor(s.x),Math.floor(s.y)),this._colliderEntities.push(l)}}},instantiateEntities:function(){for(var e=this._tmxMap.imageLayers.length,t=0;e>t;){var n=t++,i=this._tmxMap.imageLayers[n],a=this.getEntity().getGameState().addEntity(),o=new core.components.GameImage(a,"tmxImage"+this._basePath+i.image.source,this._layer,this._camera);if(core.utilities.Debug.log("tmxImage"+this._basePath+i.image.source),i.properties.exists("ParallaxX")){var r=1/Std.parseFloat(i.properties.get("ParallaxX"));o.setCameraPositionScale(new core.Vector2D(r,o.getCameraPositionScale().y))}if(i.properties.exists("ParallaxY")){var r=1/Std.parseFloat(i.properties.get("ParallaxY"));o.setCameraPositionScale(new core.Vector2D(o.getCameraPositionScale().x,r))}if(i.properties.exists("OriginX")){var s=Std.parseFloat(i.properties.get("OriginX"));a.setPosition(a.getPosition().x+s*this._tmxMap.tileWidth,a.getPosition().y,a.getPosition().z)}if(i.properties.exists("OriginY")){var c=Std.parseFloat(i.properties.get("OriginY"));a.setPosition(a.getPosition().x,a.getPosition().y+c*this._tmxMap.tileHeight,a.getPosition().z)}}for(var l=this._tmxMap.layers.length,t=0;l>t;){for(var u=t++,h=this._tmxMap.layers[u],d=-2147483648,g=1073741824,m=536870912,p=h.height,f=h.width,_=this._tmxMap.tileWidth,y=this._tmxMap.tileHeight,v=this._tmxMap.tilesets.length,x=new Array,S=0;v>S;){var C=S++,w=this._tmxMap.tilesets[C];core.utilities.Debug.log(w);for(var b="tmxImage"+this._basePath+w.images[0].source,M=core.managers.AssetManager.getAsset("tmxImage"+this._basePath+w.images[0].source),T=w.tileWidth,I=w.tileHeight,E=M.width,A=M.height,D=E/T,O=(T-1)/E,B=(I-1)/A,N=0;p>N;)for(var P=N++,L=0;f>L;){var G=L++;if(!h.properties.exists("NoMobile")||!core.GameManager.isMobile()){var F=G*_,k=P*y,R=h.tileValues[P*f+G];if(0!=R){var U=R&d,V=R&g,H=R&m;R&=~(d|g|m);for(var $=1,j=0;v>j;){var W=j++;R>=this._tmxMap.tilesets[W].firstgid&&($=this._tmxMap.tilesets[W].firstgid)}var z=$;if(z==w.firstgid&&(R-=z,!(0>R))){var X=R%D*T/E,Y=Math.floor(R/D)*I/A,a=this.getEntity().getGameState().addEntity();a.setIsUpdating(!1),a.setPosition(F,k+y,this.getEntity().getPosition().z),x.push(a);var o=new core.components.GameImage(a,b,this._layer,this._camera);o.setOffset(0,-w.tileHeight),o.setCoords(new core.Rect2D(Math.round(X*M.width),Math.round(Y*M.height),Math.round(O*M.width),Math.round(B*M.height))),H&&(a.setRotation(0,0,core.utilities.Math2.degToRad(-90)),a.setPosition(a.getLocalPosition().x+T,a.getLocalPosition().y,a.getLocalPosition().z)),U&&(a.setPosition(a.getLocalPosition().x+T,a.getLocalPosition().y,a.getLocalPosition().z),a.setScale(-a.getScale().x,a.getScale().y,1)),V&&(a.setPosition(a.getLocalPosition().x,a.getLocalPosition().y-I,a.getLocalPosition().z),a.setScale(a.getScale().x,-a.getScale().y,1));var q=o.getSize();(q.x>1024||q.y>1024)&&(o.IsLargeImage=!0)}}}}}var a=this.getEntity().getGameState().addEntity(),K=new core.components.GameImageBatch(a,x,core.GameManager.instance.getLayerByName("default"),!0,this._camera);h.properties.exists("Foreground")&&K.setLayer(this._fgLayer),h.properties.exists("ParallaxX")&&(K.setCameraPositionScale(new core.Vector2D(1/Std.parseFloat(h.properties.get("ParallaxX")),K.getCameraPositionScale().y)),a.setProperty("parallaxX",Std.parseFloat(h.properties.get("ParallaxX")))),h.properties.exists("ParallaxY")&&(K.setCameraPositionScale(new core.Vector2D(K.getCameraPositionScale().x,1/Std.parseFloat(h.properties.get("ParallaxY")))),a.setProperty("parallaxY",Std.parseFloat(h.properties.get("ParallaxY"))))}},createLevel:function(){this._isLoaded||core.utilities.Debug.log("Level not loaded; Cannot execute 'createLevel()'!"),this.instantiateEntities(),this.processCollision()},onLevelLoaded:function(){this._isLoaded||(this._isLoaded=!0,null!=this._onLevelLoaded&&(this._onLevelLoaded(),this._onLevelLoaded=null))},onTilesetImagesLoaded:function(){core.utilities.Debug.log("onTilesetImagesLoaded()");for(var e=this._tmxMap.tilesets.length,t=0;e>t;){var n=t++,i=this._tmxMap.tilesets[n];null==i.images[0].image&&(i.images[0].image=core.managers.AssetManager.getAsset("tmxImage"+this._basePath+i.images[0].source))
}core.utilities.Debug.log("~onTilesetImagesLoaded()"),this.onLevelLoaded()},onTilesetsLoaded:function(){core.utilities.Debug.log("onTilesetsLoaded()");for(var e=new core.LoadBatch(!0),t=this._tmxMap.tilesets.length,n=0;t>n;){var i=n++,a=this._tmxMap.tilesets[i];if(0==a.images.length){var o="tmxTileset"+this._basePath+a.source,r=Xml.parse(core.managers.AssetManager.getAsset(o)),s=r.elementsNamed("tileset").next();a.name=s.get("name"),a.tileWidth=parseInt(s.get("tilewidth")),a.tileHeight=parseInt(s.get("tileheight"));var c=s.elementsNamed("image").next(),l=c.get("source"),u=new core.tmx.TmxImage;u.source=l,u.width=parseInt(c.get("width")),u.height=parseInt(c.get("height")),u.trans=c.get("trans"),a.images[0]=u,e.addAsset("tmxImage"+this._basePath+l,this._basePath+l,core.AssetType.Image)}else{var h=a.images[0],o="tmxImage"+this._basePath+h.source;a.images[0].image=core.managers.AssetManager.getAsset(o)}}e.load($bind(this,this.onTilesetImagesLoaded)),core.utilities.Debug.log("~onTilesetsLoaded()")},init:function(){core.Component.prototype.init.call(this);for(var e=new core.LoadBatch(!0),t=this._tmxMap.tilesets.length,n=0;t>n;){var i=n++,a=this._tmxMap.tilesets[i];if(a.images.length>0){var o=this._basePath+a.images[0].source;e.addAsset("tmxImage"+o,o,core.AssetType.Image)}else{var o=this._basePath+a.source;e.addAsset("tmxTileset"+o,o,core.AssetType.Other)}}for(var r=this._tmxMap.imageLayers.length,n=0;r>n;){var i=n++,s=this._tmxMap.imageLayers[i];e.addAsset("tmxImage"+this._basePath+s.image.source,this._basePath+s.image.source,core.AssetType.Image)}e.load($bind(this,this.onTilesetsLoaded))},getTmxMap:function(){return this._tmxMap},getTiles:function(){return this._tiles},_colliderEntities:null,_tiles:null,_isLoaded:null,_layers:null,_onLevelLoaded:null,_camera:null,_fgLayer:null,_layer:null,_basePath:null,_tmxMap:null,__class__:core.tmx.TmxLevel}),core.tmx.TmxMap=function(){this.imageLayers=null,this.objectGroups=null,this.layers=null,this.tilesets=null,this.tileHeight=0,this.tileWidth=0,this.height=0,this.width=0,this.orientation="orthogonal",this.tilesets=new Array,this.layers=new Array,this.objectGroups=new Array,this.imageLayers=new Array},$hxClasses["core.tmx.TmxMap"]=core.tmx.TmxMap,core.tmx.TmxMap.__name__=["core","tmx","TmxMap"],core.tmx.TmxMap.prototype={imageLayers:null,objectGroups:null,layers:null,tilesets:null,tileHeight:null,tileWidth:null,height:null,width:null,orientation:null,__class__:core.tmx.TmxMap},core.tmx.TmxObject=function(){this.polygon=null,this.height=0,this.width=0,this.y=0,this.x=0,this.type="",this.name="",this.properties=new Hash},$hxClasses["core.tmx.TmxObject"]=core.tmx.TmxObject,core.tmx.TmxObject.__name__=["core","tmx","TmxObject"],core.tmx.TmxObject.prototype={parsePolygon:function(e){this.polygon=new core.tmx.TmxPolygon;for(var t=e.split(" "),n=t.length,i=0;n>i;){var a=i++,o=t[a].split(","),r=new core.Vector2D(Std.parseFloat(o[0]),Std.parseFloat(o[1]));this.polygon.points.push(r)}},polygon:null,properties:null,height:null,width:null,y:null,x:null,type:null,name:null,__class__:core.tmx.TmxObject},core.tmx.TmxObjectGroup=function(){this.visible=!0,this.height=0,this.width=0,this.name="",this.objects=new Array},$hxClasses["core.tmx.TmxObjectGroup"]=core.tmx.TmxObjectGroup,core.tmx.TmxObjectGroup.__name__=["core","tmx","TmxObjectGroup"],core.tmx.TmxObjectGroup.prototype={objects:null,visible:null,height:null,width:null,name:null,__class__:core.tmx.TmxObjectGroup},core.tmx.TmxPolygon=function(){this.points=new Array},$hxClasses["core.tmx.TmxPolygon"]=core.tmx.TmxPolygon,core.tmx.TmxPolygon.__name__=["core","tmx","TmxPolygon"],core.tmx.TmxPolygon.prototype={points:null,__class__:core.tmx.TmxPolygon},core.tmx.TmxTileset=function(){this.name="",this.tileHeight=0,this.tileWidth=0,this.source="",this.firstgid=0,this.images=new Array},$hxClasses["core.tmx.TmxTileset"]=core.tmx.TmxTileset,core.tmx.TmxTileset.__name__=["core","tmx","TmxTileset"],core.tmx.TmxTileset.prototype={images:null,name:null,tileHeight:null,tileWidth:null,source:null,firstgid:null,__class__:core.tmx.TmxTileset},core.utilities={},core.utilities.ArrayUtils=function(){},$hxClasses["core.utilities.ArrayUtils"]=core.utilities.ArrayUtils,core.utilities.ArrayUtils.__name__=["core","utilities","ArrayUtils"],core.utilities.ArrayUtils.indexOf=function(e,t){for(var n=e.length,i=0;n>i;){var a=i++;if(e[a]==t)return a}return-1},core.utilities.ArrayUtils.clear=function(e){e.length=0},core.utilities.ArrayUtils.prototype={__class__:core.utilities.ArrayUtils},core.utilities.Debug=function(){},$hxClasses["core.utilities.Debug"]=core.utilities.Debug,core.utilities.Debug.__name__=["core","utilities","Debug"],core.utilities.Debug.log=function(){},core.utilities.Debug.warn=function(e){console.warn(e)},core.utilities.Debug.alert=function(){},core.utilities.Debug.prototype={__class__:core.utilities.Debug},core.utilities.Math2=function(){},$hxClasses["core.utilities.Math2"]=core.utilities.Math2,core.utilities.Math2.__name__=["core","utilities","Math2"],core.utilities.Math2.degToRad=function(e){return.0174532925*e},core.utilities.Math2.radToDeg=function(e){return 57.2957795*e},core.utilities.Math2.randomFloat=function(e,t){return e+Math.random()*(t-e)},core.utilities.Math2.randomInt=function(e,t){return Math.floor(core.utilities.Math2.randomFloat(e,t))},core.utilities.Math2.getClosestPointOnSegment=function(e,t,n){var i=new core.Vector2D(t.x-e.x,t.y-e.y),a=new core.Vector2D(n.x-e.x,n.y-e.y),o=a.dotProduct(i)/i.dotProduct(i);0>o&&(o=0),o>1&&(o=1);var r=new core.Vector2D(i.x*o,i.y*o);return new core.Vector2D(e.x+r.x,e.y+r.y)},core.utilities.Math2.lineIntersect2D=function(e,t,n,i,a){var o=(e.y-n.y)*(i.x-n.x)-(e.x-n.x)*(i.y-n.y),r=(t.x-e.x)*(i.y-n.y)-(t.y-e.y)*(i.x-n.x),s=(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y),c=(t.x-e.x)*(i.y-n.y)-(t.y-e.y)*(i.x-n.x);if(0==r||0==c)return-2;var l=o/r,u=s/c;if(l>0&&1>l&&u>0&&1>u){var h=new core.Vector2D(e.x-t.x,e.y-t.y).getLength()*l,d=new core.Vector2D(t.x-e.x,t.y-e.y);return d.scaleBy(l,l),d=new core.Vector2D(e.x+d.x,e.y+d.y),a.x=d.x,a.y=d.y,h}return-1},core.utilities.Math2.clamp=function(e,t,n){return t>e?t:e>n?n:e},core.utilities.Math2.getRotated2dVector=function(e,t){var n=core.utilities.Math2.degToRad(t),i=Math.cos(n),a=Math.sin(n),o=new core.Vector2D(e.x,e.y);return o.x=o.x*i-o.y*a,o.y=o.x*a+o.y*i,o},core.utilities.Math2.getAngleInDegreesBetween2dVectors=function(e,t){var n=e.x*t.y-e.y*t.x;return core.utilities.Math2.radToDeg(Math.atan2(n,e.dotProduct(t)))},core.utilities.Math2.prototype={__class__:core.utilities.Math2},core.utilities.SimulateClick=function(){},$hxClasses["core.utilities.SimulateClick"]=core.utilities.SimulateClick,core.utilities.SimulateClick.__name__=["core","utilities","SimulateClick"],core.utilities.SimulateClick.simulatedClick=function(e,t){var n=document.createEvent("MouseEvents"),i=t||{},a={type:i.type||"click",canBubble:i.canBubble||!0,cancelable:i.cancelable||!0,view:i.view||document.defaultView,detail:i.detail||1,screenX:i.screenX||0,screenY:i.screenY||0,clientX:i.clientX||0,clientY:i.clientY||0,ctrlKey:i.ctrlKey,altKey:i.altKey,shiftKey:i.shiftKey,metaKey:i.metaKey,button:i.button||0,relatedTarget:i.relatedTarget||null};n.initMouseEvent(a.type,a.canBubble,a.cancelable,a.view,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget),e.dispatchEvent(n)},core.utilities.SimulateClick.simulatedTouch=function(e,t,n){var i=document.createEvent("TouchEvent"),a=t||{},o={type:a.type||"click",canBubble:a.canBubble||!0,cancelable:a.cancelable||!0,view:a.view||document.defaultView,detail:a.detail||1,screenX:a.screenX||0,screenY:a.screenY||0,clientX:a.clientX||0,clientY:a.clientY||0,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey,button:a.button||0,relatedTarget:a.relatedTarget||null};i.initTouchEvent(o.type,o.canBubble,o.cancelable,o.view,o.detail,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget,n),e.dispatchEvent(i)},core.utilities.SimulateClick.prototype={__class__:core.utilities.SimulateClick};var game={};game.DeferredVoManager=function(){this._playingUninterruptible=!1,this._audioTrack=null,this._lastDeferredAction=null,core.Manager.call(this),game.DeferredVoManager._instance=this},$hxClasses["game.DeferredVoManager"]=game.DeferredVoManager,game.DeferredVoManager.__name__=["game","DeferredVoManager"],game.DeferredVoManager.getInstance=function(){return game.DeferredVoManager._instance},game.DeferredVoManager.__super__=core.Manager,game.DeferredVoManager.prototype=$extend(core.Manager.prototype,{cancel:function(){null!=this._lastDeferredAction&&(core.GameManager.instance.destroyDeferredAction(this._lastDeferredAction),this._lastDeferredAction=null)},playDeferredVo:function(e,t,n){null==n&&(n=!0),null==t&&(t=1.5);var i=this;this._playingUninterruptible&&n||(1.5==t&&core.GameManager.isMobile()&&(t=0),null!=this._lastDeferredAction&&core.GameManager.instance.destroyDeferredAction(this._lastDeferredAction),this._playingUninterruptible=!n,this._lastDeferredAction=core.GameManager.instance.invokeDeferredAction(t,function(){i._audioTrack=game.GamificationInterface.getInstance().playVo(e);n||null==i._audioTrack||core.GameManager.instance.invokeDeferredAction(i._audioTrack.getSoundLength(),function(){i._playingUninterruptible=!1})}))},_playingUninterruptible:null,_audioTrack:null,_lastDeferredAction:null,__class__:game.DeferredVoManager}),game.EntityFactory=function(){},$hxClasses["game.EntityFactory"]=game.EntityFactory,game.EntityFactory.__name__=["game","EntityFactory"],game.EntityFactory.createCamera=function(e,t,n,i){var a=i.addEntity();a.setPosition(e,t,n);{var o=new core.components.Camera(a);new core.components.SlackMovement(a,.1)}o.setZoomScale(1),o.setOffset(new core.Vector2D(0,-125));new core.components.Tweener(a);return a},game.EntityFactory.createGamificationUi=function(e,t){var n=e.addEntity(),i=new game.GamificationUi(n),a=(new core.components.Tweener(n),e.addEntity());a.setName("blackOverlay");var o=new core.components.GameImage(a,"blackOverlay",t);o.setAlpha(0),n.addChild(a);var r=e.addEntity();r.setName("bgBase");var o=new core.components.GameImage(r,"bgBase",t);o.centerOffsetOnEntity(),r.setPosition(core.GameManager.instance.getScreenSize().x/2,core.GameManager.instance.getScreenSize().y/2),n.addChild(r);var s=e.addEntity();s.setName("closeButton");var o=new core.components.GameImage(s,"closeButton",t);o.centerOffsetOnEntity(),s.setPosition(315,-200);var c=core.components.Button.createFromGameImage(o);c.setOffset(0,0),c.setOnMouseDown($bind(i,i.onCloseButtonClick)),c.setOnMouseOver(function(){core.GameManager.isMobile()||(game.DeferredVoManager.getInstance().playDeferredVo("closeButtonVo"),ig.subtitles.playSubtitles("GAMIFICATION_CLOSE_BUTTON_HOVER",core.GameManager.isMobile()?0:1500,!0))}),r.addChild(s);var l=45,u=63,h=-15,d=game.GamificationInterface.getInstance().getRewardDataById(game.GamificationInterface.REWARD_1),g=game.EntityFactory.createGiftSlot(e,-180,l,$bind(i,i.onGift1Click),t),m=g.getComponent(core.components.Button);m.setOnMouseOver(function(){game.GamificationInterface.getInstance().isRewardOwned(game.GamificationInterface.REWARD_1)&&("printable"==game.GamificationInterface.getInstance().getRewardDataById(game.GamificationInterface.REWARD_1).getType()?(game.DeferredVoManager.getInstance().playDeferredVo("printVo"),ig.subtitles.playSubtitles("GAMIFICATION_PRINT_REWARD",core.GameManager.isMobile()?0:1500,!0)):core.GameManager.isMobile()?(game.DeferredVoManager.getInstance().playDeferredVo(game.GamificationInterface.getInstance().isRewardActive(game.GamificationInterface.REWARD_1)?"turnOnVo":"turnOffVo"),ig.subtitles.playSubtitles(game.GamificationInterface.getInstance().isRewardActive(game.GamificationInterface.REWARD_1)?"GAMIFICATION_TURN_REWARD_ON":"GAMIFICATION_TURN_REWARD_OFF",core.GameManager.isMobile()?0:1500,!0)):(game.DeferredVoManager.getInstance().playDeferredVo(game.GamificationInterface.getInstance().isRewardActive(game.GamificationInterface.REWARD_1)?"turnOffVo":"turnOnVo"),ig.subtitles.playSubtitles(game.GamificationInterface.getInstance().isRewardActive(game.GamificationInterface.REWARD_1)?"GAMIFICATION_TURN_REWARD_OFF":"GAMIFICATION_TURN_REWARD_ON",core.GameManager.isMobile()?0:1500,!0)))}),g.setName("giftButton1");var p=e.addEntity();p.setPosition(0,h),p.setName("thumbnail");var o=new core.components.GameImage(p,d.getThumbnailImageAssetName(),t);o.centerOffsetOnEntity(),g.addChild(p);var f=e.addEntity();f.setName("border");var _=new core.components.GameImage(f,"redSlotBorder",t);_.centerOffsetOnEntity(),g.addChild(f);var y=e.addEntity();y.setName("cost"),y.setPosition(0,u);var o=new core.components.GameImage(y,"buttonActivate",t);o.centerOffsetOnEntity();var v=new core.components.TextField(y,t);v.setFontFamily(game.GamificationInterface.FONT_FAMILY_NUMBERS),v.setText(Std.string(d.getCost())),v.setTextAlign("left"),g.addChild(y);var x=e.addEntity();x.setPosition(-15,0);var S=new core.components.GameImage(x,"currencySmall",t);S.centerOffsetOnEntity(),y.addChild(x);var C=e.addEntity();C.setPosition(0,125),g.addChild(C);var c=new core.components.Button(g,new core.Vector2D(150,125),null);c.setOffset(0,-25),c.setOnMouseOver(function(){null!=game.EntityFactory._descriptionTrack&&game.EntityFactory._descriptionTrack.stop(),game.DeferredVoManager.getInstance().playDeferredVo("reward1Audio",1.5,!0),ig.subtitles.playSubtitles("GAMIFICATION_REWARD1",core.GameManager.isMobile()?0:1500,!0)});var w=e.addEntity();w.setName("toggle"),w.setPosition(0,u);var o=new core.components.GameImage(w,"buttonToggleOff",t);o.centerOffsetOnEntity(),g.addChild(w);var b=e.addEntity();b.setName("checkmark");var o=new core.components.GameImage(b,"checkmark",t);g.addChild(b),o.centerOffsetOnEntity(),b.setPosition(-60,-72),r.addChild(g);var M=game.GamificationInterface.getInstance().getRewardDataById(game.GamificationInterface.REWARD_2),T=game.EntityFactory.createGiftSlot(e,0,l,$bind(i,i.onGift2Click),t),I=T.getComponent(core.components.Button);I.setOnMouseOver(function(){game.GamificationInterface.getInstance().isRewardOwned(game.GamificationInterface.REWARD_2)&&("printable"==game.GamificationInterface.getInstance().getRewardDataById(game.GamificationInterface.REWARD_2).getType()?game.DeferredVoManager.getInstance().playDeferredVo("printVo"):core.GameManager.isMobile()?(game.DeferredVoManager.getInstance().playDeferredVo(game.GamificationInterface.getInstance().isRewardActive(game.GamificationInterface.REWARD_2)?"turnOnVo":"turnOffVo"),ig.subtitles.playSubtitles(game.GamificationInterface.getInstance().isRewardActive(game.GamificationInterface.REWARD_2)?"GAMIFICATION_TURN_REWARD_ON":"GAMIFICATION_TURN_REWARD_OFF",core.GameManager.isMobile()?0:1500,!0)):(game.DeferredVoManager.getInstance().playDeferredVo(game.GamificationInterface.getInstance().isRewardActive(game.GamificationInterface.REWARD_2)?"turnOffVo":"turnOnVo"),ig.subtitles.playSubtitles(game.GamificationInterface.getInstance().isRewardActive(game.GamificationInterface.REWARD_2)?"GAMIFICATION_TURN_REWARD_OFF":"GAMIFICATION_TURN_REWARD_ON",core.GameManager.isMobile()?0:1500,!0)))}),T.setName("giftButton2");var p=e.addEntity();p.setName("thumbnail"),p.setPosition(0,h);var o=new core.components.GameImage(p,M.getThumbnailImageAssetName(),t);o.centerOffsetOnEntity(),T.addChild(p);var f=e.addEntity();f.setName("border");var _=new core.components.GameImage(f,"redSlotBorder",t);_.centerOffsetOnEntity(),T.addChild(f);var y=e.addEntity();y.setName("cost"),y.setPosition(0,u);var o=new core.components.GameImage(y,"buttonActivate",t);o.centerOffsetOnEntity();var v=new core.components.TextField(y,t);v.setFontFamily(game.GamificationInterface.FONT_FAMILY_NUMBERS),v.setText(Std.string(M.getCost())),v.setTextAlign("left"),T.addChild(y);var x=e.addEntity();x.setPosition(-15,0);var S=new core.components.GameImage(x,"currencySmall",t);S.centerOffsetOnEntity(),y.addChild(x);var C=e.addEntity(),c=new core.components.Button(T,new core.Vector2D(150,125),null);c.setOffset(0,-25),c.setOnMouseOver(function(){null!=game.EntityFactory._descriptionTrack&&game.EntityFactory._descriptionTrack.stop(),game.DeferredVoManager.getInstance().playDeferredVo("reward2Audio",1.5,!0),ig.subtitles.playSubtitles("GAMIFICATION_REWARD2",core.GameManager.isMobile()?0:1500,!0)});var w=e.addEntity();w.setName("toggle"),w.setPosition(0,u);var o=new core.components.GameImage(w,"buttonToggleOff",t);o.centerOffsetOnEntity(),T.addChild(w);var b=e.addEntity();b.setName("checkmark");var o=new core.components.GameImage(b,"checkmark",t);T.addChild(b),o.centerOffsetOnEntity(),b.setPosition(-60,-72),r.addChild(T);var E=game.GamificationInterface.getInstance().getRewardDataById(game.GamificationInterface.REWARD_3),A=game.EntityFactory.createGiftSlot(e,180,l,$bind(i,i.onGift3Click),t),D=A.getComponent(core.components.Button);D.setOnMouseOver(function(){game.GamificationInterface.getInstance().isRewardOwned(game.GamificationInterface.REWARD_3)&&("printable"==game.GamificationInterface.getInstance().getRewardDataById(game.GamificationInterface.REWARD_3).getType()?game.DeferredVoManager.getInstance().playDeferredVo("printVo"):core.GameManager.isMobile()?(game.DeferredVoManager.getInstance().playDeferredVo(game.GamificationInterface.getInstance().isRewardActive(game.GamificationInterface.REWARD_3)?"turnOnVo":"turnOffVo"),ig.subtitles.playSubtitles(game.GamificationInterface.getInstance().isRewardActive(game.GamificationInterface.REWARD_3)?"GAMIFICATION_TURN_REWARD_ON":"GAMIFICATION_TURN_REWARD_OFF",core.GameManager.isMobile()?0:1500,!0)):(game.DeferredVoManager.getInstance().playDeferredVo(game.GamificationInterface.getInstance().isRewardActive(game.GamificationInterface.REWARD_3)?"turnOffVo":"turnOnVo"),ig.subtitles.playSubtitles(game.GamificationInterface.getInstance().isRewardActive(game.GamificationInterface.REWARD_3)?"GAMIFICATION_TURN_REWARD_OFF":"GAMIFICATION_TURN_REWARD_ON",core.GameManager.isMobile()?0:1500,!0)))}),A.setName("giftButton3");var p=e.addEntity();p.setName("thumbnail"),p.setPosition(0,h);var o=new core.components.GameImage(p,E.getThumbnailImageAssetName(),t);o.centerOffsetOnEntity(),A.addChild(p);var f=e.addEntity();f.setName("border");var _=new core.components.GameImage(f,"redSlotBorder",t);_.centerOffsetOnEntity(),A.addChild(f);var y=e.addEntity();y.setName("cost"),y.setPosition(0,u);var o=new core.components.GameImage(y,"buttonActivate",t);o.centerOffsetOnEntity();var v=new core.components.TextField(y,t);v.setFontFamily(game.GamificationInterface.FONT_FAMILY_NUMBERS),v.setText(Std.string(E.getCost())),v.setTextAlign("left"),A.addChild(y);var x=e.addEntity();x.setPosition(-15,0);var S=new core.components.GameImage(x,"currencySmall",t);S.centerOffsetOnEntity(),y.addChild(x);var C=e.addEntity(),c=new core.components.Button(A,new core.Vector2D(150,125),null);c.setOffset(0,-25),c.setOnMouseOver(function(){null!=game.EntityFactory._descriptionTrack&&game.EntityFactory._descriptionTrack.stop(),game.DeferredVoManager.getInstance().playDeferredVo("reward3Audio",1.5,!0),ig.subtitles.playSubtitles("GAMIFICATION_REWARD3",core.GameManager.isMobile()?0:1500,!0)});var w=e.addEntity();w.setName("toggle"),w.setPosition(0,u);var o=new core.components.GameImage(w,"buttonToggleOff",t);o.centerOffsetOnEntity(),A.addChild(w);var b=e.addEntity();b.setName("checkmark");var o=new core.components.GameImage(b,"checkmark",t);A.addChild(b),o.centerOffsetOnEntity(),b.setPosition(-60,-72),r.addChild(A);var O=e.addEntity();O.setPosition(135,-115),O.setName("currencyLabel");var o=new core.components.GameImage(O,"currencyBg",t);o.centerOffsetOnEntity();var B=e.addEntity();B.setName("text"),B.setPosition(-5,-5);var v=new core.components.TextField(B,t);v.setFontFamily(game.GamificationInterface.FONT_FAMILY_NUMBERS);var N=Std.string(game.GamificationInterface.getInstance().getCurrency());v.setTextAlign("left"),v.setText(N),v.setFontSize("32pt"),O.addChild(B);var P=e.addEntity(),L=new core.components.GameImage(P,"currencyBig",t);L.centerOffsetOnEntity(),P.setPosition(-50,0),O.addChild(P);var c=new core.components.Button(O,new core.Vector2D(250,85),null);c.setOnMouseOver(function(){game.DeferredVoManager.getInstance().playDeferredVo("currencyVo"),ig.subtitles.playSubtitles("GAMIFICATION_CURRENCY",core.GameManager.isMobile()?0:1500,!0)}),r.addChild(O);var G=e.addEntity();G.setPosition(-175,-170);var F=new core.components.GameImage(G,"headingImage",t);F.centerOffsetOnEntity(),r.addChild(G);var k=e.addEntity();k.setPosition(-178,-77);var v=new core.components.TextField(k,t);return v.setFontFamily(game.GamificationInterface.FONT_FAMILY_DEFAULT),v.setText(game.GamificationInterface.getInstance().getSubHeadingString()),v.setFontSize("24pt"),v.setFillStyle(Main.gamificationInterface.getHeadingTextFillStyle()),r.addChild(k),i.init(),i},game.EntityFactory.createGiftSlot=function(e,t,n,i,a){var o=e.addEntity();o.setPosition(t,n);var r=new core.components.GameImage(o,"giftSlot",a);r.centerOffsetOnEntity();var s=new core.components.Button(o,new core.Vector2D(165,50),null);return s.setOffset(0,65),s.setOnMouseDown(i),o},game.EntityFactory.createLargeUiButton=function(e,t,n,i,a){var o=e.addEntity();o.setPosition(t,n);var r=new core.components.GameImage(o,"uiButton",a);r.centerOffsetOnEntity();var s=core.components.Button.createFromGameImage(r);return s.setOffset(0,0),s.setOnMouseUp(i),s.setOnMouseOver(function(){Main.gamificationInterface.getUiShowing()||(game.DeferredVoManager.getInstance().playDeferredVo("uiButtonVo"),ig.subtitles.playSubtitles("GAMIFICATION_UI_BUTTON_HOVER",core.GameManager.isMobile()?0:1500,!0))}),o},game.EntityFactory.createSmallUiButton=function(e,t,n,i,a){var o=e.addEntity();o.setPosition(t,n);var r=new core.components.GameImage(o,"uiButtonSmall",a);r.centerOffsetOnEntity();var s=core.components.Button.createFromGameImage(r);return s.setOffset(0,0),s.setOnMouseUp(i),s.setOnMouseOver(function(){Main.gamificationInterface.getUiShowing()||(game.DeferredVoManager.getInstance().playDeferredVo("uiButtonVo"),ig.subtitles.playSubtitles("GAMIFICATION_UI_BUTTON_HOVER",core.GameManager.isMobile()?0:1500,!0))}),o},game.EntityFactory.createSpinningBurst=function(e,t,n,i){var a=e.addEntity(),o=5,r=.5,s=core.utilities.Math2.degToRad(120),c=new core.components.GameImage(a,"currencyButtonBurst",i);c.centerOffsetOnEntity();var l=new core.components.SimpleMovement(a,null);l.setAngularVelocity(new core.Vector3D(0,0,s));var u=new core.components.DeferredActionComponent(a),h=new core.components.Tweener(a);return h.addTween(a.getScaleRef(),"x",0,1,r,core.components.tween.Tween.EASE_OUT_BACK),h.addTween(a.getScaleRef(),"y",0,1,r,core.components.tween.Tween.EASE_OUT_BACK),u.addDeferredAction(o,function(){h.addTween(a.getScaleRef(),"x",1,0,r,core.components.tween.Tween.EASE_IN_QUINT,0,function(){a.destroy()}),h.addTween(a.getScaleRef(),"y",1,0,r,core.components.tween.Tween.EASE_IN_QUINT)}),a},game.EntityFactory.createCurrencyGainedUi=function(e,t,n,i,a){var o=e.addEntity();o.setPosition(t,n);var r=new core.components.GameImage(o,"currencyAddBg",a,null);r.centerOffsetOnEntity();var s=e.addEntity();o.addChild(s);var c=new core.components.TextField(s,a);c.setFontFamily(game.GamificationInterface.FONT_FAMILY_NUMBERS),c.setText("+"+Std.string(i)),c.setTextAlign("center"),c.setFontSize("28pt"),o.addChild(s),s.setName("currency");new core.components.Tweener(o);return o},game.EntityFactory.createHud=function(e){var t=e.addEntity(),n=new core.components.EdgeElements(t,"level_container","level_container",core.GameManager.instance.getLayerByName("ui"));return n.getElementByName("level_container_LevelCompleteScreen").style.display="none",n.getElementByName("level_container_Hud").style.display="block",n.getElementByName("level_container_PauseScreen").style.display="none",t},game.EntityFactory.prototype={__class__:game.EntityFactory},game.GamificationComponent=function(e){this._currencyDeferrecAction=null,this._currencyGainUiCounter=0,this._timeUntilNextCount=0,this._currentCurrency=0,this._targetCurrency=0,this._prevCurrency=0,this._deferredAction=null,this._tweener=null,this._currencyGainUi=null,this._uiButton=null,this._gamificationUi=null,core.Component.call(this,e,"GamficiationComponent"),game.GamificationInterface.getInstance().addEventListener("showPopupScreen",$bind(this,this.onShowUiScreen)),game.GamificationInterface.getInstance().addEventListener("hidePopupScreen",$bind(this,this.onHideUiScreen)),game.GamificationInterface.getInstance().addEventListener("showUiButton",$bind(this,this.onShowUiButton)),game.GamificationInterface.getInstance().addEventListener("hideUiButton",$bind(this,this.onHideUiButton)),game.GamificationInterface.getInstance().addEventListener("uiButtonUpdate",$bind(this,this.onUiButtonUpdate))},$hxClasses["game.GamificationComponent"]=game.GamificationComponent,game.GamificationComponent.__name__=["game","GamificationComponent"],game.GamificationComponent.__super__=core.Component,game.GamificationComponent.prototype=$extend(core.Component.prototype,{onUiExitComplete:function(){this._gamificationUi.getEntity().destroy(),this._gamificationUi=null},onUiCloseClick:function(){game.GamificationInterface.getInstance().hideUi()},hideUiScreen:function(){null!=this._gamificationUi&&(this._gamificationUi.exit(),this._gamificationUi.addEventListener("exitComplete",$bind(this,this.onUiExitComplete)))},handleMessage:function(e,t){switch(core.Component.prototype.handleMessage.call(this,e,t),e){case"onOrientationChanged":game.GamificationInterface.getInstance().stopVo()}},onRewardClick:function(e){var t=e.rewardId,n=game.GamificationInterface.getInstance().getRewardDataById(t);switch(n.getType()){case"normal":break;case"togglable":n.getIsActive()?null!=game.GamificationInterface.getInstance().getOnRewardActivate(t)&&game.GamificationInterface.getInstance().getOnRewardActivate(t)():null!=game.GamificationInterface.getInstance().getOnRewardDeactivate(t)&&game.GamificationInterface.getInstance().getOnRewardDeactivate(t)(),game.GamificationInterface.getInstance().updateRewardSaveData();break;case"printable":null!=game.GamificationInterface.getInstance().getOnRewardClick(t)&&game.GamificationInterface.getInstance().getOnRewardClick(t)()}},showUiScreen:function(){null==this._gamificationUi&&(this._gamificationUi=game.EntityFactory.createGamificationUi(this.getGameState(),core.GameManager.instance.getLayerByName("gamificationUi")),this._gamificationUi.addEventListener("closeClick",$bind(this,this.onUiCloseClick)),this._gamificationUi.addEventListener("clickReward",$bind(this,this.onRewardClick)),this._gamificationUi.enter())},onUiButtonMouseDown:function(){null!=this._gamificationUi&&this._gamificationUi.getIsTransitioning()||game.GamificationInterface.getInstance().showUi()},onCurrencyCountDelay:function(){this._prevCurrency=game.GamificationInterface.getInstance().getCurrency(),this._targetCurrency=game.GamificationInterface.getInstance().getCurrency(),this._timeUntilNextCount=.05},onCurrencyUpdate:function(){null!=this._deferredAction&&this._deferredAction.destroyAllDeferredActions(),null!=this._currencyGainUi&&(this._currencyGainUi.destroy(),this._currencyGainUi=null,this._currencyGainUiCounter=0),game.GamificationInterface.getInstance().getCurrency()>this._prevCurrency&&(this.doUiButtonBurst(),this.showCurrencyGainUi(game.GamificationInterface.getInstance().getCurrency()-this._prevCurrency)),game.GamificationInterface.getInstance().getCurrency()<this._prevCurrency?this.onCurrencyCountDelay():this._deferredAction.addDeferredAction(1,$bind(this,this.onCurrencyCountDelay))},onUiButtonUpdate:function(){game.GamificationInterface.getInstance().getIsUiButtonShowing()&&(this.onHideUiButton(),this.onShowUiButton())},hideCurrencyGainUi:function(){var e=this,t=this._currencyGainUi.getComponent(core.components.Tweener),n=this._uiButton.getPosition();t.addTween(this._currencyGainUi.getPositionRef(),"y",n.y+45,n.y,.35,core.components.tween.Tween.EASE_IN_QUINT),t.addTween(this._currencyGainUi.getScaleRef(),"x",1,0,.35,core.components.tween.Tween.EASE_IN_QUINT,0,function(){e._currencyGainUi.destroy(),e._currencyGainUi=null}),t.addTween(this._currencyGainUi.getScaleRef(),"y",1,0,.35,core.components.tween.Tween.EASE_IN_QUINT)},showCurrencyGainUi:function(e){null!=this._currencyGainUi&&this._currencyGainUi.destroy();var t=this._uiButton.getPosition();this._currencyGainUi=game.EntityFactory.createCurrencyGainedUi(this.getGameState(),t.x,t.y,e,core.GameManager.instance.getLayerByName("gamificationUi")),this._currencyGainUiCounter=e;var n=this._currencyGainUi.getComponent(core.components.Tweener);n.addTween(this._currencyGainUi.getPositionRef(),"y",t.y,t.y+45,.35,core.components.tween.Tween.EASE_OUT_QUINT),n.addTween(this._currencyGainUi.getScaleRef(),"x",0,1,.35,core.components.tween.Tween.EASE_OUT_QUINT),n.addTween(this._currencyGainUi.getScaleRef(),"y",0,1,.35,core.components.tween.Tween.EASE_OUT_QUINT)},doUiButtonBurst:function(){if(null!=this._uiButton){var e=game.EntityFactory.createSpinningBurst(this.getGameState(),0,0,core.GameManager.instance.getLayerByName("gamificationUi"));this._uiButton.addChild(e),this.getGameState().bringEntityToFront(this._uiButton),this.getGameState().bringEntityToFront(this._uiButton.findChildByName("currency"))}},onHideUiButton:function(){core.utilities.Debug.log("onHideUiButton()"),null!=this._uiButton&&(this._uiButton.destroy(),this._uiButton=null,game.GamificationInterface.getInstance().removeEventListener("updateCurrency",$bind(this,this.onCurrencyUpdate)))},update:function(){if(core.Component.prototype.update.call(this),this._currentCurrency!=this._targetCurrency&&(this._timeUntilNextCount-=core.GameManager.getElapsedTime(),this._timeUntilNextCount<=0)){this._currentCurrency<this._targetCurrency?this._currentCurrency++:this._currentCurrency--;var e=this._uiButton.findChildByName("currency"),t=e.getComponent(core.components.TextField);if(t.setText(Std.string(this._currentCurrency)),this._currencyGainUiCounter>0){var n=this._currencyGainUi.findChildByName("currency").getComponent(core.components.TextField);this._currencyGainUiCounter--,n.setText("+"+this._currencyGainUiCounter),this._currencyGainUiCounter<=0&&this._deferredAction.addDeferredAction(.5,$bind(this,this.hideCurrencyGainUi))}this._timeUntilNextCount=.05}},onShowUiButton:function(){if(core.utilities.Debug.log("onShowUiButton()"),null==this._uiButton){var e=game.GamificationInterface.getInstance().getUiButtonPosition();this._uiButton=0==game.GamificationInterface.getInstance().getUiButtonMode()?game.EntityFactory.createSmallUiButton(this.getGameState(),e.x,e.y,$bind(this,this.onUiButtonMouseDown),core.GameManager.instance.getLayerByName("gamificationUi")):game.EntityFactory.createLargeUiButton(this.getGameState(),e.x,e.y,$bind(this,this.onUiButtonMouseDown),core.GameManager.instance.getLayerByName("gamificationUi")),this._uiButton.setScale(game.GamificationInterface.getInstance().getUiButtonScale(),game.GamificationInterface.getInstance().getUiButtonScale());var t=this.getGameState().addEntity();t.setPosition(0,0),t.setName("currency");var n=new core.components.TextField(t,core.GameManager.instance.getLayerByName("gamificationUi"));n.setFontFamily(game.GamificationInterface.FONT_FAMILY_NUMBERS),n.setFontSize("20pt"),n.setTextAlign("left"),n.setText(Std.string(game.GamificationInterface.getInstance().getCurrency())),this._prevCurrency=game.GamificationInterface.getInstance().getCurrency(),this._targetCurrency=this._prevCurrency,this._currentCurrency=this._prevCurrency,n.setOffset(game.GamificationInterface.getInstance().getUiButtonTextOffset()),0==game.GamificationInterface.getInstance().getUiButtonMode()&&t.setScale(.66,.66),this._uiButton.addChild(t),game.GamificationInterface.getInstance().addEventListener("updateCurrency",$bind(this,this.onCurrencyUpdate))}},onHideUiScreen:function(){if(core.utilities.Debug.log("onHideUiScreen()"),this.hideUiScreen(),null!=this._uiButton){var e=(this._uiButton.getComponent(core.components.GameImage),this._uiButton.findChildByName("currency"));
e.getComponent(core.components.TextField)}},onShowUiScreen:function(){if(core.utilities.Debug.log("onShowUiScreen()"),this.showUiScreen(),null!=this._uiButton){var e=(this._uiButton.getComponent(core.components.GameImage),this._uiButton.findChildByName("currency"));e.getComponent(core.components.TextField)}},init:function(){core.Component.prototype.init.call(this),this._tweener=this.getSiblingComponent(core.components.Tweener),this._deferredAction=this.getSiblingComponent(core.components.DeferredActionComponent)},_currencyDeferrecAction:null,_currencyGainUiCounter:null,_timeUntilNextCount:null,_currentCurrency:null,_targetCurrency:null,_prevCurrency:null,_deferredAction:null,_tweener:null,_currencyGainUi:null,_uiButton:null,_gamificationUi:null,__class__:game.GamificationComponent}),game.GamificationInterface=function(){if(this._voTrack=null,this._autoClearCanvas=!0,this._mouseMoveIterationsThisFrame=0,this._mouseMoveIterationsPerFrame=2,this._mouseMoveClear=!0,this._isClickthroughEnabled=!0,this._rewardData=null,this._numRewards=0,this._uiButtonTextOffset=null,this._uiButtonScale=1,this._uiButtonPosition=null,this._headingTextFillStyle="#FFFFFF",this._onRewardClick=null,this._onRewardDeactivate=null,this._onRewardActivate=null,this._onRewardPurchase=null,this._onUiHide=null,this._onUiShow=null,this._onLoaded=null,this._pendingCurrency=0,this._offString="",this._onString="",this._printString="",this._reward3String="",this._reward2String="",this._reward1String="",this._subHeadingString="",this._yourCurrencyString="",this._currencyDisplayString="",this._currencyNamePlural="",this._currencyNameSingular="",this._mouseTarget=null,this._canvas=null,this._containerDiv=null,this._uiButtonMode=1,this._isUiButtonShowing=!1,this._isUiShowing=!1,this._isLoading=!1,this._isSetup=!1,core.Manager.call(this),null!=game.GamificationInterface._instance)throw"Cannot have two instances of GamificationInterface.";game.GamificationInterface._instance=this,this._uiButtonPosition=new core.Vector2D(0,0),this._uiButtonTextOffset=new core.Vector2D(0,0),this._onRewardActivate=new Hash,this._onRewardDeactivate=new Hash,this._onRewardClick=new Hash,window.gamificationInterface=this},$hxClasses["game.GamificationInterface"]=game.GamificationInterface,game.GamificationInterface.__name__=["game","GamificationInterface"],game.GamificationInterface.getInstance=function(){return game.GamificationInterface._instance},game.GamificationInterface.__super__=core.Manager,game.GamificationInterface.prototype=$extend(core.Manager.prototype,{assertIsSetup:function(){if(this._isLoading)throw"API is still loading.  Please place all calls to the API after the onLoaded function in setup() has been fired.";if(!this._isSetup)throw"Must call setup() function first."},playCurrencyEarnedVo:function(){game.DeferredVoManager.getInstance().playDeferredVo("currencyGainVo")},getVoTrack:function(){return this._voTrack},stopVo:function(){null!=this._voTrack&&(this._voTrack.stop(),this._voTrack=null)},playVo:function(e){return core.utilities.Debug.log("playVo: "+e),null!=this._voTrack&&(this._voTrack.stop(),this._voTrack=null),gameProps.disableVO||(this._voTrack=core.managers.SoundManager.playSoundByName(e,!0)),this._voTrack},getRewardsFromSaveData:function(){var e=this.getRewardDataById(game.GamificationInterface.REWARD_1);e.setIsActive("1"==core.SaveData.getItem(this._gameCode+game.GamificationInterface.REWARD_1+"Active"));var t=this.getRewardDataById(game.GamificationInterface.REWARD_2);t.setIsActive("1"==core.SaveData.getItem(this._gameCode+game.GamificationInterface.REWARD_2+"Active"));var n=this.getRewardDataById(game.GamificationInterface.REWARD_3);n.setIsActive("1"==core.SaveData.getItem(this._gameCode+game.GamificationInterface.REWARD_3+"Active"))},updateRewardSaveData:function(){var e=this.getRewardDataById(game.GamificationInterface.REWARD_1);"togglable"==e.getType()&&core.SaveData.setItem(this._gameCode+game.GamificationInterface.REWARD_1+"Active",this.isRewardActive(game.GamificationInterface.REWARD_1)?"1":"0");var t=this.getRewardDataById(game.GamificationInterface.REWARD_2);"togglable"==t.getType()&&core.SaveData.setItem(this._gameCode+game.GamificationInterface.REWARD_2+"Active",this.isRewardActive(game.GamificationInterface.REWARD_2)?"1":"0");var n=this.getRewardDataById(game.GamificationInterface.REWARD_3);"togglable"==n.getType()&&core.SaveData.setItem(this._gameCode+game.GamificationInterface.REWARD_3+"Active",this.isRewardActive(game.GamificationInterface.REWARD_3)?"1":"0")},canAffordReward:function(e){return this.assertIsSetup(),this.getCurrency()>=this.getRewardDataById(e).getCost()},isRewardActive:function(e){this.assertIsSetup();for(var t=this._rewardData.length,n=0;t>n;){var i=n++,a=this._rewardData[i];if(a.getId()==e)return a.getIsActive()}return null},setHeadingTextFillStyle:function(e){this._headingTextFillStyle=e},getHeadingTextFillStyle:function(){return this._headingTextFillStyle},getRewardDataById:function(e){this.assertIsSetup();for(var t=this._rewardData.length,n=0;t>n;){var i=n++,a=this._rewardData[i];if(a.getId()==e)return a}return null},gainReward:function(e,t){null==t&&(t=1),this.assertIsSetup();var n=this.getRewardDataById(e);core.SaveData.setItem(this._gameCode+"_"+e,Std.string(t)),"togglable"==n.getType()&&n.setIsActive(!0),null!=this._onRewardPurchase&&this._onRewardPurchase(e,t)},isRewardOwned:function(e){return this.assertIsSetup(),Std.parseInt(core.SaveData.getItem(this._gameCode+"_"+e))>0},getUiButtonMode:function(){return this._uiButtonMode},setUiButtonSmall:function(){this._uiButtonMode=0,this.dispatchEvent("uiButtonUpdate")},setUiButtonLarge:function(){this._uiButtonMode=1,this.dispatchEvent("uiButtonUpdate")},setUiButtonTextOffset:function(e,t){this._uiButtonTextOffset=new core.Vector2D(e,t),this.dispatchEvent("uiButtonUpdate")},getUiButtonTextOffset:function(){return this._uiButtonTextOffset},getUiButtonPosition:function(){return this.assertIsSetup(),this._uiButtonPosition},setUiButtonPosition:function(e,t){this.assertIsSetup(),this._uiButtonPosition=new core.Vector2D(e,t),this.dispatchEvent("uiButtonUpdate")},setUiButtonScale:function(e){this.assertIsSetup(),this._uiButtonScale=e,this.dispatchEvent("uiButtonUpdate")},getUiButtonScale:function(){return this.assertIsSetup(),this._uiButtonScale},getIsUiButtonShowing:function(){return this._isUiButtonShowing},hideUiButton:function(){this.assertIsSetup(),this._isUiButtonShowing&&(this._isUiButtonShowing=!1,this.dispatchEvent("hideUiButton"))},showUiButton:function(){this.assertIsSetup(),this._isUiButtonShowing||(this._isUiButtonShowing=!0,this.dispatchEvent("showUiButton"))},getOnRewardPurchase:function(){return this.assertIsSetup(),this._onRewardPurchase},getOnRewardClick:function(e){return this._onRewardClick.get(e)},setOnRewardClick:function(e,t){this._onRewardClick.set(e,t)},getOnRewardDeactivate:function(e){return this._onRewardDeactivate.get(e)},setOnRewardDeactivate:function(e,t){this._onRewardDeactivate.set(e,t)},getOnRewardActivate:function(e){return this._onRewardActivate.get(e)},setOnRewardActivate:function(e,t){this._onRewardActivate.set(e,t)},setOnRewardPurchase:function(e){this.assertIsSetup(),this._onRewardPurchase=e},getOnUiHide:function(){return this.assertIsSetup(),this._onUiHide},setOnUiHide:function(e){this.assertIsSetup(),this._onUiHide=e},getOnUiShow:function(){return this.assertIsSetup(),this._onUiShow},setOnUiShow:function(e){this.assertIsSetup(),this._onUiShow=e},hideUi:function(){this.assertIsSetup(),this._isUiShowing&&(this._isClickthroughEnabled=!0,this.dispatchEvent("hidePopupScreen"),game.DeferredVoManager.getInstance().cancel(),this.stopVo(),null!=this._onUiHide&&this._onUiHide(),this._isUiShowing=!1)},showUi:function(){this.assertIsSetup(),this._isUiShowing||(this._isClickthroughEnabled=!1,this.dispatchEvent("showPopupScreen"),null!=this._onUiShow&&this._onUiShow(),this._isUiShowing=!0)},getUiShowing:function(){return this._isUiShowing},setStrings:function(e){this.assertIsSetup(),this._subHeadingString=e},getPrintString:function(){return this._printString},getReward3String:function(){return this._reward3String},getReward2String:function(){return this._reward2String},getReward1String:function(){return this._reward1String},getSubHeadingString:function(){return this._subHeadingString},getYourCurrencyString:function(){return this._yourCurrencyString},applyCurrency:function(){var e=this.getCurrency();e+=this._pendingCurrency,this.setCurrency(e),this._pendingCurrency=0,this.dispatchEvent("updateCurrency")},subtractCurrencyFromAccount:function(e){var t=this.getCurrency();t-=e,this.setCurrency(t),this.dispatchEvent("updateCurrency")},subtractCurrency:function(e){this.assertIsSetup(),0>e&&core.utilities.Debug.warn("Subtracting negative value ("+e+") from Player's currency"),this._pendingCurrency-=e,this._pendingCurrency<0&&(this._pendingCurrency=0)},addCurrency:function(e){this.assertIsSetup(),0>e&&core.utilities.Debug.warn("Adding negative value ("+e+") into Player's currency"),this._pendingCurrency+=e},setCurrency:function(e){this.assertIsSetup(),e>game.GamificationInterface.MAX_CURRENCY&&(e=game.GamificationInterface.MAX_CURRENCY),core.SaveData.setItem(this.getCurrencyKey(),Std.string(e))},getCurrency:function(){this.assertIsSetup();var e=Std.parseInt(core.SaveData.getItem(this.getCurrencyKey(),core.GameConfig.getProperty("defaultCurrency")));return e},getCurrencyKey:function(){return this._propertyCode+"_Currency"},doRender:function(){this.assertIsSetup(),core.GameManager.instance.render()},doUpdate:function(){this.assertIsSetup(),core.GameManager.instance.update()},update:function(){core.Manager.prototype.update.call(this),this._mouseMoveIterationsThisFrame--,this._mouseMoveIterationsThisFrame<=0&&(this._mouseMoveClear=!0,this._mouseMoveIterationsThisFrame=this._mouseMoveIterationsPerFrame)},onSetup:function(){core.utilities.Debug.log("onSetup()"),this._isLoading=!1,this._isSetup=!0,this.initRewardData(),this.setUiButtonPosition(Std.parseInt(core.GameConfig.getProperty("uiButtonDefaultX")),Std.parseInt(core.GameConfig.getProperty("uiButtonDefaultY"))),null!=this._onLoaded&&this._onLoaded()},initRewardData:function(){core.utilities.Debug.log("initRewardData()"),this._numRewards=Std.parseInt(core.GameConfig.getProperty("numRewards"));var e=Xml.parse(core.managers.AssetManager.getAsset("rewardXml"));this._rewardData=new Array;for(var t=e.firstChild().elementsNamed(this._gameCode+"_reward");t.hasNext();){var n=t.next(),i=new game.RewardData(n.get("id"),Std.parseInt(n.get("cost")),n.get("thumbnailImageAssetName"),n.get("type"));this._rewardData.push(i)}if(this._rewardData.length!=this._numRewards)throw"Incorrect number of rewards defined. Expecting "+this._numRewards+" but defined "+this._rewardData.length+".";this.getRewardsFromSaveData()},init:function(){core.Manager.prototype.init.call(this)},setDontDisturbCanvasDiv:function(e){core.GameManager.instance.setDontResizeContainer(e)},getDontDisturbCanvasDiv:function(){return core.GameManager.instance.getDontResizeContainer()},updateScreenDimensions:function(e,t){core.GameManager.instance.setCanvasDimensions(e,t,e,t),core.GameManager.instance.onOrientationChanged()},getCanvas:function(){return this._canvas},setManualUpdate:function(e){core.GameManager.instance.setManualUpdate(e)},getManualUpdate:function(){return core.GameManager.instance.getManualUpdate()},setMasterVolume:function(e){core.managers.SoundManager.setMasterVolume(e)},getMasterVolume:function(){return core.managers.SoundManager.getMasterVolume()},setCanvasAutoClear:function(e){this._autoClearCanvas=e,core.GameManager.instance.getLayerByName("gamificationUi").setAutoClear(e)},getCanvasAutoClear:function(){return this._autoClearCanvas},setupFlambe:function(e,t,n,i){var a=this;if(!core.managers.AssetManager.assetExists(e+"_apiLoadBatch")){var o=function(){a.setupFlambe(e,t,n,i)};return void this.addEventListener("assetsReady",o)}var r=null,s=null,c=null,l=Main.getDocument(),u=l.getElementById("embedtarget"),h=l.getElementById("embedtarget-canvas");c=l.createElement("canvas"),c.style.position="absolute",c.width=h.width,c.height=h.height,u.insertBefore(c,h),c.style.zIndex=1,gamification=window.gamificationInterface,console.log(gamification),s=u,r=h,this._isLoading=!0,this._gameCode=e;var d=this._gameCode.split("_");this._propertyCode=d[0],this._onLoaded=t;var g=core.managers.AssetManager.getAsset(e+"_apiLoadBatch");if(core.utilities.Debug.log("Initializing Gamification Layer."),core.utilities.Debug.log("Game Code: "+e),core.utilities.Debug.log("Property Code: "+this._propertyCode),g.load($bind(this,this.onSetup)),this._mouseTarget=r,this._canvas=c,null!=this._mouseTarget){var m=this;this._canvas.onmousedown=function(e){if(m._isClickthroughEnabled){var t=e||window.event;m._canvas.style.display="none";{document.elementFromPoint(t.clientX,t.clientY)}core.managers.InputManager.getInstance().setInputDisabled(!0),core.utilities.SimulateClick.simulatedClick(m._mouseTarget,{clientX:t.clientX,clientY:t.clientY,type:"mousedown"}),core.managers.InputManager.getInstance().setInputDisabled(!1),m._canvas.style.display="block"}},this._canvas.onmouseup=function(e){if(m._isClickthroughEnabled){var t=e||window.event;m._canvas.style.display="none",core.managers.InputManager.getInstance().setInputDisabled(!0),core.utilities.SimulateClick.simulatedClick(m._mouseTarget,{clientX:t.clientX,clientY:t.clientY,type:"mouseup"}),core.managers.InputManager.getInstance().setInputDisabled(!1),m._canvas.style.display="block"}},this._canvas.onmousemove=function(e){if(m._isClickthroughEnabled&&m._mouseMoveClear){m._mouseMoveClear=!1;var t=e||window.event;m._canvas.style.display="none",core.managers.InputManager.getInstance().setInputDisabled(!0),core.utilities.SimulateClick.simulatedClick(m._mouseTarget,{clientX:t.clientX,clientY:t.clientY,type:"mousemove"}),core.managers.InputManager.getInstance().setInputDisabled(!1),m._canvas.style.display="block",m._canvas.style.cursor=m._mouseTarget.style.cursor}},this._canvas.addEventListener("touchstart",function(e){if(m._isClickthroughEnabled){var t=e||window.event;m._canvas.style.display="none",core.managers.InputManager.getInstance().setInputDisabled(!0);var n=t.pageX-Main.getContainer().offsetLeft,i=t.pageY-Main.getContainer().offsetTop,a=new core.Vector2D(n,i);core.utilities.SimulateClick.simulatedTouch(m._mouseTarget,{clientX:a.x,clientY:a.y,type:"touchstart"},t.changedTouches),core.managers.InputManager.getInstance().setInputDisabled(!1),m._canvas.style.display="block"}}),this._canvas.addEventListener("touchmove",function(e){if(m._isClickthroughEnabled&&m._mouseMoveClear){m._mouseMoveClear=!1;var t=e||window.event;m._canvas.style.display="none",core.managers.InputManager.getInstance().setInputDisabled(!0);var n=t.pageX-Main.getContainer().offsetLeft,i=t.pageY-Main.getContainer().offsetTop,a=new core.Vector2D(n,i);core.utilities.SimulateClick.simulatedTouch(m._mouseTarget,{clientX:a.x,clientY:a.y,type:"touchmove"},t.changedTouches),core.managers.InputManager.getInstance().setInputDisabled(!1),m._canvas.style.display="block"}}),this._canvas.addEventListener("touchend",function(e){if(m._isClickthroughEnabled){var t=e||window.event;m._canvas.style.display="none",core.managers.InputManager.getInstance().setInputDisabled(!0);var n=t.changedTouches[0].pageX-Main.getContainer().offsetLeft,i=t.changedTouches[0].pageY-Main.getContainer().offsetTop,a=new core.Vector2D(n,i);core.utilities.SimulateClick.simulatedTouch(m._mouseTarget,{clientX:a.x,clientY:a.y,pageX:a.x,pageY:a.y,screenX:a.x,screenY:a.y,type:"touchend"},t.changedTouches),core.managers.InputManager.getInstance().setInputDisabled(!1),m._canvas.style.display="block"}})}this._containerDiv=s,Main.CANVAS_WIDTH_LANDSCAPE=n,Main.CANVAS_HEIGHT_LANDSCAPE=i,Main.setContainer(this._containerDiv),core.GameManager.instance.setDontResizeContainer(!0),core.GameManager.instance.setCanvasDimensions(n,i,n,i),core.GameManager.instance.getLayerByName("gamificationUi").hookToCanvasAndContainer(this._canvas,this._containerDiv),core.GameManager.instance.onOrientationChanged()},setup:function(e,t,n,i,a,o,r){var s=this;if(!core.managers.AssetManager.assetExists(e+"_apiLoadBatch")){var c=function(){s.setup(e,t,n,i,a,o,r)};return void this.addEventListener("assetsReady",c)}this._isLoading=!0,this._gameCode=e;var l=this._gameCode.split("_");this._propertyCode=l[0],this._onLoaded=t;var u=core.managers.AssetManager.getAsset(e+"_apiLoadBatch");if(core.utilities.Debug.log("Initializing Gamification Layer."),core.utilities.Debug.log("Game Code: "+e),core.utilities.Debug.log("Property Code: "+this._propertyCode),u.load($bind(this,this.onSetup)),this._mouseTarget=a,this._canvas=i,null!=this._mouseTarget){var h=this;this._canvas.onmousedown=function(e){if(h._isClickthroughEnabled){var t=e||window.event;h._canvas.style.display="none";{document.elementFromPoint(t.clientX,t.clientY)}core.managers.InputManager.getInstance().setInputDisabled(!0),core.utilities.SimulateClick.simulatedClick(h._mouseTarget,{clientX:t.clientX,clientY:t.clientY,type:"mousedown"}),core.managers.InputManager.getInstance().setInputDisabled(!1),h._canvas.style.display="block"}},this._canvas.onmouseup=function(e){if(h._isClickthroughEnabled){var t=e||window.event;h._canvas.style.display="none",core.managers.InputManager.getInstance().setInputDisabled(!0),core.utilities.SimulateClick.simulatedClick(h._mouseTarget,{clientX:t.clientX,clientY:t.clientY,type:"mouseup"}),core.managers.InputManager.getInstance().setInputDisabled(!1),h._canvas.style.display="block"}},this._canvas.onmousemove=function(e){if(h._isClickthroughEnabled&&h._mouseMoveClear){h._mouseMoveClear=!1;var t=e||window.event;h._canvas.style.display="none",core.managers.InputManager.getInstance().setInputDisabled(!0),core.utilities.SimulateClick.simulatedClick(h._mouseTarget,{clientX:t.clientX,clientY:t.clientY,type:"mousemove"}),core.managers.InputManager.getInstance().setInputDisabled(!1),h._canvas.style.display="block",h._canvas.style.cursor=h._mouseTarget.style.cursor}},this._canvas.addEventListener("touchstart",function(e){if(h._isClickthroughEnabled){var t=e||window.event;h._canvas.style.display="none",core.managers.InputManager.getInstance().setInputDisabled(!0);var n=t.pageX-Main.getContainer().offsetLeft,i=t.pageY-Main.getContainer().offsetTop,a=new core.Vector2D(n,i);core.utilities.SimulateClick.simulatedTouch(h._mouseTarget,{clientX:a.x,clientY:a.y,type:"touchstart"},t.changedTouches),core.managers.InputManager.getInstance().setInputDisabled(!1),h._canvas.style.display="block"}}),this._canvas.addEventListener("touchmove",function(e){if(h._isClickthroughEnabled&&h._mouseMoveClear){h._mouseMoveClear=!1;var t=e||window.event;h._canvas.style.display="none",core.managers.InputManager.getInstance().setInputDisabled(!0);var n=t.pageX-Main.getContainer().offsetLeft,i=t.pageY-Main.getContainer().offsetTop,a=new core.Vector2D(n,i);core.utilities.SimulateClick.simulatedTouch(h._mouseTarget,{clientX:a.x,clientY:a.y,type:"touchmove"},t.changedTouches),core.managers.InputManager.getInstance().setInputDisabled(!1),h._canvas.style.display="block"}}),this._canvas.addEventListener("touchend",function(e){if(h._isClickthroughEnabled){var t=e||window.event;h._canvas.style.display="none",core.managers.InputManager.getInstance().setInputDisabled(!0);var n=t.changedTouches[0].pageX-Main.getContainer().offsetLeft,i=t.changedTouches[0].pageY-Main.getContainer().offsetTop,a=new core.Vector2D(n,i);core.utilities.SimulateClick.simulatedTouch(h._mouseTarget,{clientX:a.x,clientY:a.y,pageX:a.x,pageY:a.y,screenX:a.x,screenY:a.y,type:"touchend"},t.changedTouches),core.managers.InputManager.getInstance().setInputDisabled(!1),h._canvas.style.display="block"}})}this._containerDiv=n,Main.CANVAS_WIDTH_LANDSCAPE=o,Main.CANVAS_HEIGHT_LANDSCAPE=r,Main.setContainer(this._containerDiv),core.GameManager.instance.setCanvasDimensions(o,r,o,r),core.GameManager.instance.getLayerByName("gamificationUi").hookToCanvasAndContainer(this._canvas,this._containerDiv),core.GameManager.instance.onOrientationChanged()},_voTrack:null,_autoClearCanvas:null,_mouseMoveIterationsThisFrame:null,_mouseMoveIterationsPerFrame:null,_mouseMoveClear:null,_isClickthroughEnabled:null,_rewardData:null,_numRewards:null,_uiButtonTextOffset:null,_uiButtonScale:null,_uiButtonPosition:null,_headingTextFillStyle:null,_onRewardClick:null,_onRewardDeactivate:null,_onRewardActivate:null,_onRewardPurchase:null,_onUiHide:null,_onUiShow:null,_onLoaded:null,_pendingCurrency:null,_offString:null,_onString:null,_printString:null,_reward3String:null,_reward2String:null,_reward1String:null,_subHeadingString:null,_yourCurrencyString:null,_currencyDisplayString:null,_currencyNamePlural:null,_currencyNameSingular:null,_propertyCode:null,_gameCode:null,_mouseTarget:null,_canvas:null,_containerDiv:null,_uiButtonMode:null,_isUiButtonShowing:null,_isUiShowing:null,_isLoading:null,_isSetup:null,__class__:game.GamificationInterface}),game.GamificationInterfaceEvent=function(){},$hxClasses["game.GamificationInterfaceEvent"]=game.GamificationInterfaceEvent,game.GamificationInterfaceEvent.__name__=["game","GamificationInterfaceEvent"],game.GamificationInterfaceEvent.prototype={__class__:game.GamificationInterfaceEvent},game.GamificationUi=function(e){this._timeUntilNextCount=0,this._currentCurrency=0,this._targetCurrency=0,this._secretButton=null,this._isTransitioning=!1,this._currencyLabel=null,this._giftButton3=null,this._giftButton2=null,this._giftButton1=null,this._bottomBarBase=null,this._blackOverlay=null,this._tweener=null,core.Component.call(this,e,"GamificationUi")},$hxClasses["game.GamificationUi"]=game.GamificationUi,game.GamificationUi.__name__=["game","GamificationUi"],game.GamificationUi.__super__=core.Component,game.GamificationUi.prototype=$extend(core.Component.prototype,{destroy:function(){core.Component.prototype.destroy.call(this),null!=this._secretButton&&this._secretButton.destroy()},onCloseButtonClick:function(){this._isTransitioning||this.dispatchEvent("closeClick")},getIsTransitioning:function(){return this._isTransitioning},onUpdateCurrency:function(){this._targetCurrency=Main.gamificationInterface.getCurrency()},onGift3Click:function(){core.utilities.Debug.log("onGift3Click()");var e=game.GamificationInterface.getInstance().getRewardDataById("reward3");if(!game.GamificationInterface.getInstance().isRewardOwned("reward3")&&game.GamificationInterface.getInstance().canAffordReward("reward3"))game.GamificationInterface.getInstance().subtractCurrencyFromAccount(e.getCost()),game.GamificationInterface.getInstance().gainReward("reward3",1),game.DeferredVoManager.getInstance().playDeferredVo("rewardUnlockVo",0,!1),ig.subtitles.playSubtitles("GAMIFICATION_UNLOCK_REWARD",0,!0),core.managers.SoundManager.playSoundByName("goodSound",!0),"togglable"==e.getType()&&this.dispatchEvent("clickReward",{rewardId:"reward3"});else if(game.GamificationInterface.getInstance().isRewardOwned("reward3")){switch(e.getType()){case"normal":break;case"togglable":e.setIsActive(!e.getIsActive());break;case"printable":}this.dispatchEvent("clickReward",{rewardId:"reward3"})}else game.GamificationInterface.getInstance().canAffordReward("reward3")||(game.DeferredVoManager.getInstance().playDeferredVo("insufficientCurrencyVo"),ig.subtitles.playSubtitles("GAMIFICATION_INSUFFICIENT_CURRENCY",core.GameManager.isMobile()?0:1500,!0),core.managers.SoundManager.playSoundByName("badSound",!0));this.updateRewardsDisplay()},onGift2Click:function(){core.utilities.Debug.log("onGift2Click()");var e=game.GamificationInterface.getInstance().getRewardDataById("reward2");if(!game.GamificationInterface.getInstance().isRewardOwned("reward2")&&game.GamificationInterface.getInstance().canAffordReward("reward2"))game.GamificationInterface.getInstance().subtractCurrencyFromAccount(e.getCost()),game.GamificationInterface.getInstance().gainReward("reward2",1),game.DeferredVoManager.getInstance().playDeferredVo("rewardUnlockVo",0,!1),ig.subtitles.playSubtitles("GAMIFICATION_UNLOCK_REWARD",0,!0),core.managers.SoundManager.playSoundByName("goodSound",!0),"togglable"==e.getType()&&this.dispatchEvent("clickReward",{rewardId:"reward2"});else if(game.GamificationInterface.getInstance().isRewardOwned("reward2")){switch(e.getType()){case"normal":break;case"togglable":e.setIsActive(!e.getIsActive());break;case"printable":}this.dispatchEvent("clickReward",{rewardId:"reward2"})}else game.GamificationInterface.getInstance().canAffordReward("reward2")||(game.DeferredVoManager.getInstance().playDeferredVo("insufficientCurrencyVo"),ig.subtitles.playSubtitles("GAMIFICATION_INSUFFICIENT_CURRENCY",core.GameManager.isMobile()?0:1500,!0),core.managers.SoundManager.playSoundByName("badSound",!0));this.updateRewardsDisplay()},onGift1Click:function(){var e=game.GamificationInterface.getInstance().getRewardDataById("reward1");if(!game.GamificationInterface.getInstance().isRewardOwned("reward1")&&game.GamificationInterface.getInstance().canAffordReward("reward1"))game.GamificationInterface.getInstance().subtractCurrencyFromAccount(e.getCost()),game.GamificationInterface.getInstance().gainReward("reward1",1),game.DeferredVoManager.getInstance().playDeferredVo("rewardUnlockVo",0,!1),ig.subtitles.playSubtitles("GAMIFICATION_UNLOCK_REWARD",0,!0),core.managers.SoundManager.playSoundByName("goodSound",!0),"togglable"==e.getType()&&this.dispatchEvent("clickReward",{rewardId:"reward1"});else if(game.GamificationInterface.getInstance().isRewardOwned("reward1")){switch(e.getType()){case"normal":break;case"togglable":e.setIsActive(!e.getIsActive());break;case"printable":}this.dispatchEvent("clickReward",{rewardId:"reward1"})}else game.GamificationInterface.getInstance().canAffordReward("reward1")||(game.DeferredVoManager.getInstance().playDeferredVo("insufficientCurrencyVo"),ig.subtitles.playSubtitles("GAMIFICATION_INSUFFICIENT_CURRENCY",core.GameManager.isMobile()?0:1500,!0),core.managers.SoundManager.playSoundByName("badSound",!0));this.updateRewardsDisplay()},updateButtonWithRewardInfo:function(e,t){var n=game.GamificationInterface.getInstance(),i=n.getRewardDataById(t),a=n.getCurrency(),o=e.getComponent(core.components.GameImage),r=e.findChildByName("toggle"),s=e.findChildByName("cost"),c=e.findChildByName("checkmark"),l=e.findChildByName("border");if(o.setAlpha(a>=i.getCost()||n.isRewardOwned(t)?1:.5),n.isRewardOwned(t))switch(c.setIsVisible(!0),i.getType()){case"normal":s.setIsVisible(!1),r.setIsVisible(!0),l.setIsVisible(!1);var u=r.getComponent(core.components.GameImage);u.setImage(n.isRewardActive(t)?"buttonToggleOn":"buttonToggleOff");break;case"togglable":s.setIsVisible(!1),r.setIsVisible(!0),l.setIsVisible(!0);var u=r.getComponent(core.components.GameImage);u.setImage(n.isRewardActive(t)?"buttonToggleOn":"buttonToggleOff");var h=l.getComponent(core.components.GameImage);h.setImage(n.isRewardActive(t)?"greenSlotBorder":"redSlotBorder");break;case"printable":s.setIsVisible(!1),r.setIsVisible(!0),l.setIsVisible(!1);var u=r.getComponent(core.components.GameImage);u.setImage("printButton")}else s.setIsVisible(!0),r.setIsVisible(!1),c.setIsVisible(!1)},updateRewardsDisplay:function(){game.GamificationInterface.getInstance();this.updateButtonWithRewardInfo(this._giftButton1,"reward1"),this.updateButtonWithRewardInfo(this._giftButton2,"reward2"),this.updateButtonWithRewardInfo(this._giftButton3,"reward3"),this._targetCurrency=game.GamificationInterface.getInstance().getCurrency()},update:function(){if(core.Component.prototype.update.call(this),this._currentCurrency!=this._targetCurrency&&(this._timeUntilNextCount-=core.GameManager.getElapsedTime(),this._timeUntilNextCount<=0)){this._currentCurrency<this._targetCurrency?this._currentCurrency++:this._currentCurrency--;var e=this._currencyLabel.getComponent(core.components.TextField);e.setText(Std.string(this._currentCurrency)),this._timeUntilNextCount=.05}},exit:function(){var e=this;core.utilities.Debug.log("GamificationUi::exit()"),this._isTransitioning=!0,null!=game.GamificationInterface.getInstance().getVoTrack()&&game.GamificationInterface.getInstance().getVoTrack().stop();var t=this._blackOverlay.getComponent(core.components.GameImage);t.setScale(75,75),this._tweener.addTween(t,"_alpha",.5,0,.35,core.components.tween.Tween.LINEAR,0,function(){e._isTransitioning=!1,e.dispatchEvent("exitComplete")}),this._tweener.addTween(this._bottomBarBase.getPositionRef(),"y",core.GameManager.instance.getScreenSize().y/2,-core.GameManager.instance.getScreenSize().y/2,.35,core.components.tween.Tween.EASE_IN_QUINT)},enter:function(){var e=this;core.utilities.Debug.log("GamificationUi::enter()"),this._isTransitioning=!0;var t=this._blackOverlay.getComponent(core.components.GameImage);t.setScale(75,75),this._tweener.addTween(t,"_alpha",0,.5,.35,core.components.tween.Tween.LINEAR,0,function(){e._isTransitioning=!1,e.dispatchEvent("enterComplete")}),this._tweener.addTween(this._bottomBarBase.getPositionRef(),"y",-core.GameManager.instance.getScreenSize().y/2,core.GameManager.instance.getScreenSize().y/2,.35,core.components.tween.Tween.EASE_OUT_QUINT),"0"==core.GameConfig.getProperty("isFirstTimeRewardsEnter")&&(game.GamificationInterface.getInstance().playVo("welcome1Vo"),ig.subtitles.playSubtitles("GAMIFICATION_FIRST_OPEN",0,!0),core.GameConfig.setProperty("isFirstTimeRewardsEnter","1"),game.DeferredVoManager.getInstance().playDeferredVo("welcome2Vo",2.5))},init:function(){core.utilities.Debug.log("GamificationUi::init()"),core.Component.prototype.init.call(this),this._tweener=this.getSiblingComponent(core.components.Tweener),this._blackOverlay=this.getEntity().findChildByName("blackOverlay"),this._bottomBarBase=this.getEntity().findChildByName("bgBase"),this._giftButton1=this.getEntity().findChildByName("giftButton1"),this._giftButton2=this.getEntity().findChildByName("giftButton2"),this._giftButton3=this.getEntity().findChildByName("giftButton3"),this._currencyLabel=this.getEntity().findChildByName("currencyLabel").findChildByName("text"),this._currentCurrency=game.GamificationInterface.getInstance().getCurrency(),this._targetCurrency=this._currentCurrency,Main.gamificationInterface.addEventListener("updateCurrency",$bind(this,this.onUpdateCurrency));var e=this._currencyLabel.getComponent(core.components.TextField);if(e.setText(Std.string(game.GamificationInterface.getInstance().getCurrency())),"1"==core.GameConfig.getProperty("secretCurrencyButtonEnabled")){this._secretButton=this.getGameState().addEntity();{new core.components.Button(this._secretButton,new core.Vector2D(100,100),null,function(){Main.gamificationInterface.addCurrency(99),Main.gamificationInterface.applyCurrency()})}this._secretButton.setPosition(core.GameManager.instance.getScreenSize().x-50,core.GameManager.instance.getScreenSize().y-50)}this.updateRewardsDisplay()},_timeUntilNextCount:null,_currentCurrency:null,_targetCurrency:null,_secretButton:null,_isTransitioning:null,_currencyLabel:null,_giftButton3:null,_giftButton2:null,_giftButton1:null,_bottomBarBase:null,_blackOverlay:null,_tweener:null,__class__:game.GamificationUi}),game.GamificationUiEvent=function(){},$hxClasses["game.GamificationUiEvent"]=game.GamificationUiEvent,game.GamificationUiEvent.__name__=["game","GamificationUiEvent"],game.GamificationUiEvent.prototype={__class__:game.GamificationUiEvent},game.LoadingScreen=function(){core.GameState.call(this)},$hxClasses["game.LoadingScreen"]=game.LoadingScreen,game.LoadingScreen.__name__=["game","LoadingScreen"],game.LoadingScreen.__super__=core.GameState,game.LoadingScreen.prototype=$extend(core.GameState.prototype,{init:function(){core.GameState.prototype.init.call(this)},__class__:game.LoadingScreen}),game.MainState=function(){this._gamification=null,core.GameState.call(this)},$hxClasses["game.MainState"]=game.MainState,game.MainState.__name__=["game","MainState"],game.MainState.__super__=core.GameState,game.MainState.prototype=$extend(core.GameState.prototype,{update:function(){core.GameState.prototype.update.call(this)
},init:function(){core.GameState.prototype.init.call(this);var e=this.addEntity();this._gamification=new game.GamificationComponent(e);new core.components.Tweener(e),new core.components.DeferredActionComponent(e)},_gamification:null,__class__:game.MainState}),game.RewardData=function(e,t,n,i){this._isActive=!1,this._id=e,this._cost=t,this._thumbnailImageAssetName=n,this._type=i},$hxClasses["game.RewardData"]=game.RewardData,game.RewardData.__name__=["game","RewardData"],game.RewardData.prototype={getType:function(){return this._type},setType:function(e){this._type=e},setThumbnailImageAssetName:function(e){this._thumbnailImageAssetName=e},getThumbnailImageAssetName:function(){return this._thumbnailImageAssetName},setIsActive:function(e){this._isActive=e},getIsActive:function(){return this._isActive},setCost:function(e){this._cost=e},getCost:function(){return this._cost},setId:function(e){this._id=e},getId:function(){return this._id},_type:null,_isActive:null,_thumbnailImageAssetName:null,_cost:null,_id:null,__class__:game.RewardData},game.UiButtonModes=function(){},$hxClasses["game.UiButtonModes"]=game.UiButtonModes,game.UiButtonModes.__name__=["game","UiButtonModes"],game.UiButtonModes.prototype={__class__:game.UiButtonModes};var haxe={};haxe.BaseCode=function(e){for(var t=e.length,n=1;t>1<<n;)n++;if(n>8||t!=1<<n)throw"BaseCode : base length must be a power of two.";this.base=e,this.nbits=n},$hxClasses["haxe.BaseCode"]=haxe.BaseCode,haxe.BaseCode.__name__=["haxe","BaseCode"],haxe.BaseCode.encode=function(e,t){var n=new haxe.BaseCode(haxe.io.Bytes.ofString(t));return n.encodeString(e)},haxe.BaseCode.decode=function(e,t){var n=new haxe.BaseCode(haxe.io.Bytes.ofString(t));return n.decodeString(e)},haxe.BaseCode.prototype={decodeString:function(e){return this.decodeBytes(haxe.io.Bytes.ofString(e)).toString()},encodeString:function(e){return this.encodeBytes(haxe.io.Bytes.ofString(e)).toString()},decodeBytes:function(e){{var t=this.nbits;this.base}null==this.tbl&&this.initTable();for(var n=this.tbl,i=e.length*t>>3,a=haxe.io.Bytes.alloc(i),o=0,r=0,s=0,c=0;i>c;){for(;8>r;){r+=t,o<<=t;var l=n[e.b[s++]];if(-1==l)throw"BaseCode : invalid encoded char";o|=l}r-=8,a.b[c++]=o>>r&255&255}return a},initTable:function(){for(var e=new Array,t=0;256>t;){var n=t++;e[n]=-1}for(var i=0,t=this.base.length;t>i;){var n=i++;e[this.base.b[n]]=n}this.tbl=e},encodeBytes:function(e){for(var t=this.nbits,n=this.base,i=8*e.length/t|0,a=haxe.io.Bytes.alloc(i+(8*e.length%t==0?0:1)),o=0,r=0,s=(1<<t)-1,c=0,l=0;i>l;){for(;t>r;)r+=8,o<<=8,o|=e.b[c++];r-=t,a.b[l++]=255&n.b[o>>r&s]}return r>0&&(a.b[l++]=255&n.b[o<<t-r&s]),a},tbl:null,nbits:null,base:null,__class__:haxe.BaseCode},haxe.Int32=function(){},$hxClasses["haxe.Int32"]=haxe.Int32,haxe.Int32.__name__=["haxe","Int32"],haxe.Int32.make=function(e,t){return e<<16|t},haxe.Int32.ofInt=function(e){return 0|e},haxe.Int32.clamp=function(e){return 0|e},haxe.Int32.toInt=function(e){if((e>>30&1)!=e>>>31)throw"Overflow "+Std.string(e);return e},haxe.Int32.toNativeInt=function(e){return e},haxe.Int32.add=function(e,t){return e+t|0},haxe.Int32.sub=function(e,t){return e-t|0},haxe.Int32.mul=function(e,t){return e*(65535&t)+(e*(t>>>16)<<16|0)|0},haxe.Int32.div=function(e,t){return e/t|0},haxe.Int32.mod=function(e,t){return e%t},haxe.Int32.shl=function(e,t){return e<<t},haxe.Int32.shr=function(e,t){return e>>t},haxe.Int32.ushr=function(e,t){return e>>>t},haxe.Int32.and=function(e,t){return e&t},haxe.Int32.or=function(e,t){return e|t},haxe.Int32.xor=function(e,t){return e^t},haxe.Int32.neg=function(e){return-e},haxe.Int32.isNeg=function(e){return 0>e},haxe.Int32.isZero=function(e){return 0==e},haxe.Int32.complement=function(e){return~e},haxe.Int32.compare=function(e,t){return e-t},haxe.Int32.ucompare=function(e,t){return 0>e?0>t?~t-~e:1:0>t?-1:e-t},haxe.Log=function(){},$hxClasses["haxe.Log"]=haxe.Log,haxe.Log.__name__=["haxe","Log"],haxe.Log.trace=function(e,t){js.Boot.__trace(e,t)},haxe.Log.clear=function(){js.Boot.__clear_trace()},haxe.Timer=function(e){var t=this;this.id=window.setInterval(function(){t.run()},e)},$hxClasses["haxe.Timer"]=haxe.Timer,haxe.Timer.__name__=["haxe","Timer"],haxe.Timer.delay=function(e,t){var n=new haxe.Timer(t);return n.run=function(){n.stop(),e()},n},haxe.Timer.measure=function(e,t){var n=haxe.Timer.stamp(),i=e();return haxe.Log.trace(haxe.Timer.stamp()-n+"s",t),i},haxe.Timer.stamp=function(){return(new Date).getTime()/1e3},haxe.Timer.prototype={run:function(){},stop:function(){null!=this.id&&(window.clearInterval(this.id),this.id=null)},id:null,__class__:haxe.Timer},haxe.io={},haxe.io.Bytes=function(e,t){this.length=e,this.b=t},$hxClasses["haxe.io.Bytes"]=haxe.io.Bytes,haxe.io.Bytes.__name__=["haxe","io","Bytes"],haxe.io.Bytes.alloc=function(e){for(var t=new Array,n=0;e>n;){{n++}t.push(0)}return new haxe.io.Bytes(e,t)},haxe.io.Bytes.ofString=function(e){for(var t=new Array,n=0,i=e.length;i>n;){var a=n++,o=e.charCodeAt(a);127>=o?t.push(o):2047>=o?(t.push(192|o>>6),t.push(128|63&o)):65535>=o?(t.push(224|o>>12),t.push(128|o>>6&63),t.push(128|63&o)):(t.push(240|o>>18),t.push(128|o>>12&63),t.push(128|o>>6&63),t.push(128|63&o))}return new haxe.io.Bytes(t.length,t)},haxe.io.Bytes.ofData=function(e){return new haxe.io.Bytes(e.length,e)},haxe.io.Bytes.prototype={getData:function(){return this.b},toHex:function(){for(var e=new StringBuf,t=[],n="0123456789abcdef",i=0,a=n.length;a>i;){var o=i++;t.push(HxOverrides.cca(n,o))}for(var i=0,a=this.length;a>i;){var o=i++,r=this.b[o];e.b+=String.fromCharCode(t[r>>4]),e.b+=String.fromCharCode(t[15&r])}return e.b},toString:function(){return this.readString(0,this.length)},readString:function(e,t){if(0>e||0>t||e+t>this.length)throw haxe.io.Error.OutsideBounds;for(var n="",i=this.b,a=String.fromCharCode,o=e,r=e+t;r>o;){var s=i[o++];if(128>s){if(0==s)break;n+=a(s)}else if(224>s)n+=a((63&s)<<6|127&i[o++]);else if(240>s){var c=i[o++];n+=a((31&s)<<12|(127&c)<<6|127&i[o++])}else{var c=i[o++],l=i[o++];n+=a((15&s)<<18|(127&c)<<12|l<<6&127|127&i[o++])}}return n},compare:function(e){for(var t=this.b,n=e.b,i=this.length<e.length?this.length:e.length,a=0;i>a;){var o=a++;if(t[o]!=n[o])return t[o]-n[o]}return this.length-e.length},sub:function(e,t){if(0>e||0>t||e+t>this.length)throw haxe.io.Error.OutsideBounds;return new haxe.io.Bytes(t,this.b.slice(e,e+t))},blit:function(e,t,n,i){if(0>e||0>n||0>i||e+i>this.length||n+i>t.length)throw haxe.io.Error.OutsideBounds;var a=this.b,o=t.b;if(a==o&&e>n)for(var r=i;r>0;)r--,a[r+e]=o[r+n];else for(var s=0;i>s;){var r=s++;a[r+e]=o[r+n]}},set:function(e,t){this.b[e]=255&t},get:function(e){return this.b[e]},b:null,length:null,__class__:haxe.io.Bytes},haxe.io.BytesBuffer=function(){this.b=new Array},$hxClasses["haxe.io.BytesBuffer"]=haxe.io.BytesBuffer,haxe.io.BytesBuffer.__name__=["haxe","io","BytesBuffer"],haxe.io.BytesBuffer.prototype={getBytes:function(){var e=new haxe.io.Bytes(this.b.length,this.b);return this.b=null,e},addBytes:function(e,t,n){if(0>t||0>n||t+n>e.length)throw haxe.io.Error.OutsideBounds;for(var i=(this.b,e.b),a=t,o=t+n;o>a;){var r=a++;this.b.push(i[r])}},add:function(e){for(var t=(this.b,e.b),n=0,i=e.length;i>n;){var a=n++;this.b.push(t[a])}},addByte:function(e){this.b.push(e)},b:null,__class__:haxe.io.BytesBuffer},haxe.io.Output=function(){},$hxClasses["haxe.io.Output"]=haxe.io.Output,haxe.io.Output.__name__=["haxe","io","Output"],haxe.io.Output.prototype={writeString:function(e){var t=haxe.io.Bytes.ofString(e);this.writeFullBytes(t,0,t.length)},writeInput:function(e,t){null==t&&(t=4096);var n=haxe.io.Bytes.alloc(t);try{for(;;){var i=e.readBytes(n,0,t);if(0==i)throw haxe.io.Error.Blocked;for(var a=0;i>0;){var o=this.writeBytes(n,a,i);if(0==o)throw haxe.io.Error.Blocked;a+=o,i-=o}}}catch(r){if(!js.Boot.__instanceof(r,haxe.io.Eof))throw r}},prepare:function(){},writeInt32:function(e){this.bigEndian?(this.writeByte(haxe.Int32.toInt(e>>>24)),this.writeByte(255&haxe.Int32.toInt(e>>>16)),this.writeByte(255&haxe.Int32.toInt(e>>>8)),this.writeByte(haxe.Int32.toInt(255&e))):(this.writeByte(haxe.Int32.toInt(255&e)),this.writeByte(255&haxe.Int32.toInt(e>>>8)),this.writeByte(255&haxe.Int32.toInt(e>>>16)),this.writeByte(haxe.Int32.toInt(e>>>24)))},writeUInt30:function(e){if(0>e||e>=1073741824)throw haxe.io.Error.Overflow;this.bigEndian?(this.writeByte(e>>>24),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)):(this.writeByte(255&e),this.writeByte(e>>8&255),this.writeByte(e>>16&255),this.writeByte(e>>>24))},writeInt31:function(e){if(-1073741824>e||e>=1073741824)throw haxe.io.Error.Overflow;this.bigEndian?(this.writeByte(e>>>24),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)):(this.writeByte(255&e),this.writeByte(e>>8&255),this.writeByte(e>>16&255),this.writeByte(e>>>24))},writeUInt24:function(e){if(0>e||e>=16777216)throw haxe.io.Error.Overflow;this.bigEndian?(this.writeByte(e>>16),this.writeByte(e>>8&255),this.writeByte(255&e)):(this.writeByte(255&e),this.writeByte(e>>8&255),this.writeByte(e>>16))},writeInt24:function(e){if(-8388608>e||e>=8388608)throw haxe.io.Error.Overflow;this.writeUInt24(16777215&e)},writeUInt16:function(e){if(0>e||e>=65536)throw haxe.io.Error.Overflow;this.bigEndian?(this.writeByte(e>>8),this.writeByte(255&e)):(this.writeByte(255&e),this.writeByte(e>>8))},writeInt16:function(e){if(-32768>e||e>=32768)throw haxe.io.Error.Overflow;this.writeUInt16(65535&e)},writeInt8:function(e){if(-128>e||e>=128)throw haxe.io.Error.Overflow;this.writeByte(255&e)},writeDouble:function(e){if(0==e)return this.writeByte(0),this.writeByte(0),this.writeByte(0),this.writeByte(0),this.writeByte(0),this.writeByte(0),this.writeByte(0),void this.writeByte(0);var t=Math.floor(Math.log(Math.abs(e))/haxe.io.Output.LN2),n=Math.floor(Math.abs(e)/Math.pow(2,t)*Math.pow(2,52)),i=34359738367&n,a=Math.floor(n/Math.pow(2,32)),o=t+1023>>4|(t>0?0>e?128:64:0>e?128:0),r=t+1023<<4&255|a>>16&15,s=a>>8&255,c=255&a,l=i>>24&255,u=i>>16&255,h=i>>8&255,d=255&i;this.bigEndian?(this.writeByte(d),this.writeByte(h),this.writeByte(u),this.writeByte(l),this.writeByte(c),this.writeByte(s),this.writeByte(r),this.writeByte(o)):(this.writeByte(o),this.writeByte(r),this.writeByte(s),this.writeByte(c),this.writeByte(l),this.writeByte(u),this.writeByte(h),this.writeByte(d))},writeFloat:function(e){if(0==e)return this.writeByte(0),this.writeByte(0),this.writeByte(0),void this.writeByte(0);var t=Math.floor(Math.log(Math.abs(e))/haxe.io.Output.LN2),n=8388607&Math.floor(Math.abs(e)/Math.pow(2,t)*8388608),i=t+127>>1|(t>0?0>e?128:64:0>e?128:0),a=t+127<<7&255|n>>16&127,o=n>>8&255,r=255&n;this.bigEndian?(this.writeByte(r),this.writeByte(o),this.writeByte(a),this.writeByte(i)):(this.writeByte(i),this.writeByte(a),this.writeByte(o),this.writeByte(r))},writeFullBytes:function(e,t,n){for(;n>0;){var i=this.writeBytes(e,t,n);t+=i,n-=i}},write:function(e){for(var t=e.length,n=0;t>0;){var i=this.writeBytes(e,n,t);if(0==i)throw haxe.io.Error.Blocked;n+=i,t-=i}},setEndian:function(e){return this.bigEndian=e,e},close:function(){},flush:function(){},writeBytes:function(e,t,n){var i=n,a=e.b;if(0>t||0>n||t+n>e.length)throw haxe.io.Error.OutsideBounds;for(;i>0;)this.writeByte(a[t]),t++,i--;return n},writeByte:function(){throw"Not implemented"},bigEndian:null,__class__:haxe.io.Output,__properties__:{set_bigEndian:"setEndian"}},haxe.io.BytesOutput=function(){this.b=new haxe.io.BytesBuffer},$hxClasses["haxe.io.BytesOutput"]=haxe.io.BytesOutput,haxe.io.BytesOutput.__name__=["haxe","io","BytesOutput"],haxe.io.BytesOutput.__super__=haxe.io.Output,haxe.io.BytesOutput.prototype=$extend(haxe.io.Output.prototype,{getBytes:function(){return this.b.getBytes()},writeBytes:function(e,t,n){return this.b.addBytes(e,t,n),n},writeByte:function(e){this.b.b.push(e)},b:null,__class__:haxe.io.BytesOutput}),haxe.io.Eof=function(){},$hxClasses["haxe.io.Eof"]=haxe.io.Eof,haxe.io.Eof.__name__=["haxe","io","Eof"],haxe.io.Eof.prototype={toString:function(){return"Eof"},__class__:haxe.io.Eof},haxe.io.Error=$hxClasses["haxe.io.Error"]={__ename__:["haxe","io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]},haxe.io.Error.Blocked=["Blocked",0],haxe.io.Error.Blocked.toString=$estr,haxe.io.Error.Blocked.__enum__=haxe.io.Error,haxe.io.Error.Overflow=["Overflow",1],haxe.io.Error.Overflow.toString=$estr,haxe.io.Error.Overflow.__enum__=haxe.io.Error,haxe.io.Error.OutsideBounds=["OutsideBounds",2],haxe.io.Error.OutsideBounds.toString=$estr,haxe.io.Error.OutsideBounds.__enum__=haxe.io.Error,haxe.io.Error.Custom=function(e){var t=["Custom",3,e];return t.__enum__=haxe.io.Error,t.toString=$estr,t},haxe.io.Input=function(){},$hxClasses["haxe.io.Input"]=haxe.io.Input,haxe.io.Input.__name__=["haxe","io","Input"],haxe.io.Input.prototype={getDoubleSig:function(e){return Std.parseInt((((15&e[1])<<16|e[2]<<8|e[3])*Math.pow(2,32)).toString())+Std.parseInt(((e[4]>>7)*Math.pow(2,31)).toString())+Std.parseInt(((127&e[4])<<24|e[5]<<16|e[6]<<8|e[7]).toString())},readString:function(e){var t=haxe.io.Bytes.alloc(e);return this.readFullBytes(t,0,e),t.toString()},readInt32:function(){var e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte();return this.bigEndian?(e<<8|t)<<16|(n<<8|i):(i<<8|n)<<16|(t<<8|e)},readUInt30:function(){var e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte();if((this.bigEndian?e:i)>=64)throw haxe.io.Error.Overflow;return this.bigEndian?i|n<<8|t<<16|e<<24:e|t<<8|n<<16|i<<24},readInt31:function(){var e,t,n,i;if(this.bigEndian?(i=this.readByte(),n=this.readByte(),t=this.readByte(),e=this.readByte()):(e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte()),0==(128&i)!=(0==(64&i)))throw haxe.io.Error.Overflow;return e|t<<8|n<<16|i<<24},readUInt24:function(){var e=this.readByte(),t=this.readByte(),n=this.readByte();return this.bigEndian?n|t<<8|e<<16:e|t<<8|n<<16},readInt24:function(){var e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.bigEndian?n|t<<8|e<<16:e|t<<8|n<<16;return 0!=(8388608&i)?i-16777216:i},readUInt16:function(){var e=this.readByte(),t=this.readByte();return this.bigEndian?t|e<<8:e|t<<8},readInt16:function(){var e=this.readByte(),t=this.readByte(),n=this.bigEndian?t|e<<8:e|t<<8;return 0!=(32768&n)?n-65536:n},readInt8:function(){var e=this.readByte();return e>=128?e-256:e},readDouble:function(){var e=[];e.push(this.readByte()),e.push(this.readByte()),e.push(this.readByte()),e.push(this.readByte()),e.push(this.readByte()),e.push(this.readByte()),e.push(this.readByte()),e.push(this.readByte()),this.bigEndian&&e.reverse();var t=1-(e[0]>>7<<1),n=(e[0]<<4&2047|e[1]>>4)-1023,i=this.getDoubleSig(e);return 0==i&&-1023==n?0:t*(1+Math.pow(2,-52)*i)*Math.pow(2,n)},readFloat:function(){var e=[];e.push(this.readByte()),e.push(this.readByte()),e.push(this.readByte()),e.push(this.readByte()),this.bigEndian&&e.reverse();var t=1-(e[0]>>7<<1),n=(e[0]<<1&255|e[1]>>7)-127,i=(127&e[1])<<16|e[2]<<8|e[3];return 0==i&&-127==n?0:t*(1+Math.pow(2,-23)*i)*Math.pow(2,n)},readLine:function(){var e,t,n=new StringBuf;try{for(;10!=(e=this.readByte());)n.b+=String.fromCharCode(e);t=n.b,13==HxOverrides.cca(t,t.length-1)&&(t=HxOverrides.substr(t,0,-1))}catch(i){if(!js.Boot.__instanceof(i,haxe.io.Eof))throw i;if(t=n.b,0==t.length)throw i}return t},readUntil:function(e){for(var t,n=new StringBuf;(t=this.readByte())!=e;)n.b+=String.fromCharCode(t);return n.b},read:function(e){for(var t=haxe.io.Bytes.alloc(e),n=0;e>0;){var i=this.readBytes(t,n,e);if(0==i)throw haxe.io.Error.Blocked;n+=i,e-=i}return t},readFullBytes:function(e,t,n){for(;n>0;){var i=this.readBytes(e,t,n);t+=i,n-=i}},readAll:function(e){null==e&&(e=16384);var t=haxe.io.Bytes.alloc(e),n=new haxe.io.BytesBuffer;try{for(;;){var i=this.readBytes(t,0,e);if(0==i)throw haxe.io.Error.Blocked;n.addBytes(t,0,i)}}catch(a){if(!js.Boot.__instanceof(a,haxe.io.Eof))throw a}return n.getBytes()},setEndian:function(e){return this.bigEndian=e,e},close:function(){},readBytes:function(e,t,n){var i=n,a=e.b;if(0>t||0>n||t+n>e.length)throw haxe.io.Error.OutsideBounds;for(;i>0;)a[t]=this.readByte(),t++,i--;return n},readByte:function(){return function(){throw"Not implemented"}(this)},bigEndian:null,__class__:haxe.io.Input,__properties__:{set_bigEndian:"setEndian"}},haxe.macro={},haxe.macro.Context=function(){},$hxClasses["haxe.macro.Context"]=haxe.macro.Context,haxe.macro.Context.__name__=["haxe","macro","Context"],haxe.macro.Constant=$hxClasses["haxe.macro.Constant"]={__ename__:["haxe","macro","Constant"],__constructs__:["CInt","CFloat","CString","CIdent","CRegexp","CType"]},haxe.macro.Constant.CInt=function(e){var t=["CInt",0,e];return t.__enum__=haxe.macro.Constant,t.toString=$estr,t},haxe.macro.Constant.CFloat=function(e){var t=["CFloat",1,e];return t.__enum__=haxe.macro.Constant,t.toString=$estr,t},haxe.macro.Constant.CString=function(e){var t=["CString",2,e];return t.__enum__=haxe.macro.Constant,t.toString=$estr,t},haxe.macro.Constant.CIdent=function(e){var t=["CIdent",3,e];return t.__enum__=haxe.macro.Constant,t.toString=$estr,t},haxe.macro.Constant.CRegexp=function(e,t){var n=["CRegexp",4,e,t];return n.__enum__=haxe.macro.Constant,n.toString=$estr,n},haxe.macro.Constant.CType=function(e){var t=["CType",5,e];return t.__enum__=haxe.macro.Constant,t.toString=$estr,t},haxe.macro.Binop=$hxClasses["haxe.macro.Binop"]={__ename__:["haxe","macro","Binop"],__constructs__:["OpAdd","OpMult","OpDiv","OpSub","OpAssign","OpEq","OpNotEq","OpGt","OpGte","OpLt","OpLte","OpAnd","OpOr","OpXor","OpBoolAnd","OpBoolOr","OpShl","OpShr","OpUShr","OpMod","OpAssignOp","OpInterval"]},haxe.macro.Binop.OpAdd=["OpAdd",0],haxe.macro.Binop.OpAdd.toString=$estr,haxe.macro.Binop.OpAdd.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpMult=["OpMult",1],haxe.macro.Binop.OpMult.toString=$estr,haxe.macro.Binop.OpMult.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpDiv=["OpDiv",2],haxe.macro.Binop.OpDiv.toString=$estr,haxe.macro.Binop.OpDiv.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpSub=["OpSub",3],haxe.macro.Binop.OpSub.toString=$estr,haxe.macro.Binop.OpSub.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpAssign=["OpAssign",4],haxe.macro.Binop.OpAssign.toString=$estr,haxe.macro.Binop.OpAssign.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpEq=["OpEq",5],haxe.macro.Binop.OpEq.toString=$estr,haxe.macro.Binop.OpEq.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpNotEq=["OpNotEq",6],haxe.macro.Binop.OpNotEq.toString=$estr,haxe.macro.Binop.OpNotEq.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpGt=["OpGt",7],haxe.macro.Binop.OpGt.toString=$estr,haxe.macro.Binop.OpGt.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpGte=["OpGte",8],haxe.macro.Binop.OpGte.toString=$estr,haxe.macro.Binop.OpGte.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpLt=["OpLt",9],haxe.macro.Binop.OpLt.toString=$estr,haxe.macro.Binop.OpLt.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpLte=["OpLte",10],haxe.macro.Binop.OpLte.toString=$estr,haxe.macro.Binop.OpLte.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpAnd=["OpAnd",11],haxe.macro.Binop.OpAnd.toString=$estr,haxe.macro.Binop.OpAnd.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpOr=["OpOr",12],haxe.macro.Binop.OpOr.toString=$estr,haxe.macro.Binop.OpOr.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpXor=["OpXor",13],haxe.macro.Binop.OpXor.toString=$estr,haxe.macro.Binop.OpXor.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpBoolAnd=["OpBoolAnd",14],haxe.macro.Binop.OpBoolAnd.toString=$estr,haxe.macro.Binop.OpBoolAnd.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpBoolOr=["OpBoolOr",15],haxe.macro.Binop.OpBoolOr.toString=$estr,haxe.macro.Binop.OpBoolOr.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpShl=["OpShl",16],haxe.macro.Binop.OpShl.toString=$estr,haxe.macro.Binop.OpShl.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpShr=["OpShr",17],haxe.macro.Binop.OpShr.toString=$estr,haxe.macro.Binop.OpShr.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpUShr=["OpUShr",18],haxe.macro.Binop.OpUShr.toString=$estr,haxe.macro.Binop.OpUShr.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpMod=["OpMod",19],haxe.macro.Binop.OpMod.toString=$estr,haxe.macro.Binop.OpMod.__enum__=haxe.macro.Binop,haxe.macro.Binop.OpAssignOp=function(e){var t=["OpAssignOp",20,e];return t.__enum__=haxe.macro.Binop,t.toString=$estr,t},haxe.macro.Binop.OpInterval=["OpInterval",21],haxe.macro.Binop.OpInterval.toString=$estr,haxe.macro.Binop.OpInterval.__enum__=haxe.macro.Binop,haxe.macro.Unop=$hxClasses["haxe.macro.Unop"]={__ename__:["haxe","macro","Unop"],__constructs__:["OpIncrement","OpDecrement","OpNot","OpNeg","OpNegBits"]},haxe.macro.Unop.OpIncrement=["OpIncrement",0],haxe.macro.Unop.OpIncrement.toString=$estr,haxe.macro.Unop.OpIncrement.__enum__=haxe.macro.Unop,haxe.macro.Unop.OpDecrement=["OpDecrement",1],haxe.macro.Unop.OpDecrement.toString=$estr,haxe.macro.Unop.OpDecrement.__enum__=haxe.macro.Unop,haxe.macro.Unop.OpNot=["OpNot",2],haxe.macro.Unop.OpNot.toString=$estr,haxe.macro.Unop.OpNot.__enum__=haxe.macro.Unop,haxe.macro.Unop.OpNeg=["OpNeg",3],haxe.macro.Unop.OpNeg.toString=$estr,haxe.macro.Unop.OpNeg.__enum__=haxe.macro.Unop,haxe.macro.Unop.OpNegBits=["OpNegBits",4],haxe.macro.Unop.OpNegBits.toString=$estr,haxe.macro.Unop.OpNegBits.__enum__=haxe.macro.Unop,haxe.macro.ExprDef=$hxClasses["haxe.macro.ExprDef"]={__ename__:["haxe","macro","ExprDef"],__constructs__:["EConst","EArray","EBinop","EField","EParenthesis","EObjectDecl","EArrayDecl","ECall","ENew","EUnop","EVars","EFunction","EBlock","EFor","EIn","EIf","EWhile","ESwitch","ETry","EReturn","EBreak","EContinue","EUntyped","EThrow","ECast","EDisplay","EDisplayNew","ETernary","ECheckType","EType"]},haxe.macro.ExprDef.EConst=function(e){var t=["EConst",0,e];return t.__enum__=haxe.macro.ExprDef,t.toString=$estr,t},haxe.macro.ExprDef.EArray=function(e,t){var n=["EArray",1,e,t];return n.__enum__=haxe.macro.ExprDef,n.toString=$estr,n},haxe.macro.ExprDef.EBinop=function(e,t,n){var i=["EBinop",2,e,t,n];return i.__enum__=haxe.macro.ExprDef,i.toString=$estr,i},haxe.macro.ExprDef.EField=function(e,t){var n=["EField",3,e,t];return n.__enum__=haxe.macro.ExprDef,n.toString=$estr,n},haxe.macro.ExprDef.EParenthesis=function(e){var t=["EParenthesis",4,e];return t.__enum__=haxe.macro.ExprDef,t.toString=$estr,t},haxe.macro.ExprDef.EObjectDecl=function(e){var t=["EObjectDecl",5,e];return t.__enum__=haxe.macro.ExprDef,t.toString=$estr,t},haxe.macro.ExprDef.EArrayDecl=function(e){var t=["EArrayDecl",6,e];return t.__enum__=haxe.macro.ExprDef,t.toString=$estr,t},haxe.macro.ExprDef.ECall=function(e,t){var n=["ECall",7,e,t];return n.__enum__=haxe.macro.ExprDef,n.toString=$estr,n},haxe.macro.ExprDef.ENew=function(e,t){var n=["ENew",8,e,t];return n.__enum__=haxe.macro.ExprDef,n.toString=$estr,n},haxe.macro.ExprDef.EUnop=function(e,t,n){var i=["EUnop",9,e,t,n];return i.__enum__=haxe.macro.ExprDef,i.toString=$estr,i},haxe.macro.ExprDef.EVars=function(e){var t=["EVars",10,e];return t.__enum__=haxe.macro.ExprDef,t.toString=$estr,t},haxe.macro.ExprDef.EFunction=function(e,t){var n=["EFunction",11,e,t];return n.__enum__=haxe.macro.ExprDef,n.toString=$estr,n},haxe.macro.ExprDef.EBlock=function(e){var t=["EBlock",12,e];return t.__enum__=haxe.macro.ExprDef,t.toString=$estr,t},haxe.macro.ExprDef.EFor=function(e,t){var n=["EFor",13,e,t];return n.__enum__=haxe.macro.ExprDef,n.toString=$estr,n},haxe.macro.ExprDef.EIn=function(e,t){var n=["EIn",14,e,t];return n.__enum__=haxe.macro.ExprDef,n.toString=$estr,n},haxe.macro.ExprDef.EIf=function(e,t,n){var i=["EIf",15,e,t,n];return i.__enum__=haxe.macro.ExprDef,i.toString=$estr,i},haxe.macro.ExprDef.EWhile=function(e,t,n){var i=["EWhile",16,e,t,n];return i.__enum__=haxe.macro.ExprDef,i.toString=$estr,i},haxe.macro.ExprDef.ESwitch=function(e,t,n){var i=["ESwitch",17,e,t,n];return i.__enum__=haxe.macro.ExprDef,i.toString=$estr,i},haxe.macro.ExprDef.ETry=function(e,t){var n=["ETry",18,e,t];return n.__enum__=haxe.macro.ExprDef,n.toString=$estr,n},haxe.macro.ExprDef.EReturn=function(e){var t=["EReturn",19,e];return t.__enum__=haxe.macro.ExprDef,t.toString=$estr,t},haxe.macro.ExprDef.EBreak=["EBreak",20],haxe.macro.ExprDef.EBreak.toString=$estr,haxe.macro.ExprDef.EBreak.__enum__=haxe.macro.ExprDef,haxe.macro.ExprDef.EContinue=["EContinue",21],haxe.macro.ExprDef.EContinue.toString=$estr,haxe.macro.ExprDef.EContinue.__enum__=haxe.macro.ExprDef,haxe.macro.ExprDef.EUntyped=function(e){var t=["EUntyped",22,e];return t.__enum__=haxe.macro.ExprDef,t.toString=$estr,t},haxe.macro.ExprDef.EThrow=function(e){var t=["EThrow",23,e];return t.__enum__=haxe.macro.ExprDef,t.toString=$estr,t},haxe.macro.ExprDef.ECast=function(e,t){var n=["ECast",24,e,t];return n.__enum__=haxe.macro.ExprDef,n.toString=$estr,n},haxe.macro.ExprDef.EDisplay=function(e,t){var n=["EDisplay",25,e,t];return n.__enum__=haxe.macro.ExprDef,n.toString=$estr,n},haxe.macro.ExprDef.EDisplayNew=function(e){var t=["EDisplayNew",26,e];return t.__enum__=haxe.macro.ExprDef,t.toString=$estr,t},haxe.macro.ExprDef.ETernary=function(e,t,n){var i=["ETernary",27,e,t,n];return i.__enum__=haxe.macro.ExprDef,i.toString=$estr,i},haxe.macro.ExprDef.ECheckType=function(e,t){var n=["ECheckType",28,e,t];return n.__enum__=haxe.macro.ExprDef,n.toString=$estr,n},haxe.macro.ExprDef.EType=function(e,t){var n=["EType",29,e,t];return n.__enum__=haxe.macro.ExprDef,n.toString=$estr,n},haxe.macro.ComplexType=$hxClasses["haxe.macro.ComplexType"]={__ename__:["haxe","macro","ComplexType"],__constructs__:["TPath","TFunction","TAnonymous","TParent","TExtend","TOptional"]},haxe.macro.ComplexType.TPath=function(e){var t=["TPath",0,e];return t.__enum__=haxe.macro.ComplexType,t.toString=$estr,t},haxe.macro.ComplexType.TFunction=function(e,t){var n=["TFunction",1,e,t];return n.__enum__=haxe.macro.ComplexType,n.toString=$estr,n},haxe.macro.ComplexType.TAnonymous=function(e){var t=["TAnonymous",2,e];return t.__enum__=haxe.macro.ComplexType,t.toString=$estr,t},haxe.macro.ComplexType.TParent=function(e){var t=["TParent",3,e];return t.__enum__=haxe.macro.ComplexType,t.toString=$estr,t},haxe.macro.ComplexType.TExtend=function(e,t){var n=["TExtend",4,e,t];return n.__enum__=haxe.macro.ComplexType,n.toString=$estr,n},haxe.macro.ComplexType.TOptional=function(e){var t=["TOptional",5,e];return t.__enum__=haxe.macro.ComplexType,t.toString=$estr,t},haxe.macro.TypeParam=$hxClasses["haxe.macro.TypeParam"]={__ename__:["haxe","macro","TypeParam"],__constructs__:["TPType","TPExpr"]},haxe.macro.TypeParam.TPType=function(e){var t=["TPType",0,e];return t.__enum__=haxe.macro.TypeParam,t.toString=$estr,t},haxe.macro.TypeParam.TPExpr=function(e){var t=["TPExpr",1,e];return t.__enum__=haxe.macro.TypeParam,t.toString=$estr,t},haxe.macro.Access=$hxClasses["haxe.macro.Access"]={__ename__:["haxe","macro","Access"],__constructs__:["APublic","APrivate","AStatic","AOverride","ADynamic","AInline"]},haxe.macro.Access.APublic=["APublic",0],haxe.macro.Access.APublic.toString=$estr,haxe.macro.Access.APublic.__enum__=haxe.macro.Access,haxe.macro.Access.APrivate=["APrivate",1],haxe.macro.Access.APrivate.toString=$estr,haxe.macro.Access.APrivate.__enum__=haxe.macro.Access,haxe.macro.Access.AStatic=["AStatic",2],haxe.macro.Access.AStatic.toString=$estr,haxe.macro.Access.AStatic.__enum__=haxe.macro.Access,haxe.macro.Access.AOverride=["AOverride",3],haxe.macro.Access.AOverride.toString=$estr,haxe.macro.Access.AOverride.__enum__=haxe.macro.Access,haxe.macro.Access.ADynamic=["ADynamic",4],haxe.macro.Access.ADynamic.toString=$estr,haxe.macro.Access.ADynamic.__enum__=haxe.macro.Access,haxe.macro.Access.AInline=["AInline",5],haxe.macro.Access.AInline.toString=$estr,haxe.macro.Access.AInline.__enum__=haxe.macro.Access,haxe.macro.FieldType=$hxClasses["haxe.macro.FieldType"]={__ename__:["haxe","macro","FieldType"],__constructs__:["FVar","FFun","FProp"]},haxe.macro.FieldType.FVar=function(e,t){var n=["FVar",0,e,t];return n.__enum__=haxe.macro.FieldType,n.toString=$estr,n},haxe.macro.FieldType.FFun=function(e){var t=["FFun",1,e];return t.__enum__=haxe.macro.FieldType,t.toString=$estr,t},haxe.macro.FieldType.FProp=function(e,t,n,i){var a=["FProp",2,e,t,n,i];return a.__enum__=haxe.macro.FieldType,a.toString=$estr,a},haxe.macro.TypeDefKind=$hxClasses["haxe.macro.TypeDefKind"]={__ename__:["haxe","macro","TypeDefKind"],__constructs__:["TDEnum","TDStructure","TDClass"]},haxe.macro.TypeDefKind.TDEnum=["TDEnum",0],haxe.macro.TypeDefKind.TDEnum.toString=$estr,haxe.macro.TypeDefKind.TDEnum.__enum__=haxe.macro.TypeDefKind,haxe.macro.TypeDefKind.TDStructure=["TDStructure",1],haxe.macro.TypeDefKind.TDStructure.toString=$estr,haxe.macro.TypeDefKind.TDStructure.__enum__=haxe.macro.TypeDefKind,haxe.macro.TypeDefKind.TDClass=function(e,t,n){var i=["TDClass",2,e,t,n];return i.__enum__=haxe.macro.TypeDefKind,i.toString=$estr,i},haxe.macro.Error=function(e,t){this.message=e,this.pos=t},$hxClasses["haxe.macro.Error"]=haxe.macro.Error,haxe.macro.Error.__name__=["haxe","macro","Error"],haxe.macro.Error.prototype={pos:null,message:null,__class__:haxe.macro.Error},haxe.xml={},haxe.xml.Parser=function(){},$hxClasses["haxe.xml.Parser"]=haxe.xml.Parser,haxe.xml.Parser.__name__=["haxe","xml","Parser"],haxe.xml.Parser.parse=function(e){var t=Xml.createDocument();return haxe.xml.Parser.doParse(e,0,t),t},haxe.xml.Parser.doParse=function(e,t,n){null==t&&(t=0);for(var i=null,a=1,o=1,r=null,s=0,c=0,l=0,u=e.charCodeAt(t);u==u;){switch(a){case 0:switch(u){case 10:case 13:case 9:case 32:break;default:a=o;continue}break;case 1:switch(u){case 60:a=0,o=2;break;default:s=t,a=13;continue}break;case 13:if(60==u){var h=Xml.createPCData(HxOverrides.substr(e,s,t-s));n.addChild(h),c++,a=0,o=2}break;case 17:if(93==u&&93==e.charCodeAt(t+1)&&62==e.charCodeAt(t+2)){var h=Xml.createCData(HxOverrides.substr(e,s,t-s));n.addChild(h),c++,t+=2,a=1}break;case 2:switch(u){case 33:if(91==e.charCodeAt(t+1)){if(t+=2,"CDATA["!=HxOverrides.substr(e,t,6).toUpperCase())throw"Expected <![CDATA[";t+=5,a=17,s=t+1}else if(68==e.charCodeAt(t+1)||100==e.charCodeAt(t+1)){if("OCTYPE"!=HxOverrides.substr(e,t+2,6).toUpperCase())throw"Expected <!DOCTYPE";t+=8,a=16,s=t+1}else{if(45!=e.charCodeAt(t+1)||45!=e.charCodeAt(t+2))throw"Expected <!--";t+=2,a=15,s=t+1}break;case 63:a=14,s=t;break;case 47:if(null==n)throw"Expected node name";s=t+1,a=0,o=10;break;default:a=3,s=t;continue}break;case 3:if(!(u>=97&&122>=u||u>=65&&90>=u||u>=48&&57>=u||58==u||46==u||95==u||45==u)){if(t==s)throw"Expected node name";i=Xml.createElement(HxOverrides.substr(e,s,t-s)),n.addChild(i),a=0,o=4;continue}break;case 4:switch(u){case 47:a=11,c++;break;case 62:a=9,c++;break;default:a=5,s=t;continue}break;case 5:if(!(u>=97&&122>=u||u>=65&&90>=u||u>=48&&57>=u||58==u||46==u||95==u||45==u)){var d;if(s==t)throw"Expected attribute name";if(d=HxOverrides.substr(e,s,t-s),r=d,i.exists(r))throw"Duplicate attribute";a=0,o=6;continue}break;case 6:switch(u){case 61:a=0,o=7;break;default:throw"Expected ="}break;case 7:switch(u){case 34:case 39:a=8,s=t;break;default:throw'Expected "'}break;case 8:if(u==e.charCodeAt(s)){var g=HxOverrides.substr(e,s+1,t-s-1);i.set(r,g),a=0,o=4}break;case 9:t=haxe.xml.Parser.doParse(e,t,i),s=t,a=1;break;case 11:switch(u){case 62:a=1;break;default:throw"Expected >"}break;case 12:switch(u){case 62:return 0==c&&n.addChild(Xml.createPCData("")),t;default:throw"Expected >"}break;case 10:if(!(u>=97&&122>=u||u>=65&&90>=u||u>=48&&57>=u||58==u||46==u||95==u||45==u)){if(s==t)throw"Expected node name";var m=HxOverrides.substr(e,s,t-s);if(m!=n.getNodeName())throw"Expected </"+n.getNodeName()+">";a=0,o=12;continue}break;case 15:45==u&&45==e.charCodeAt(t+1)&&62==e.charCodeAt(t+2)&&(n.addChild(Xml.createComment(HxOverrides.substr(e,s,t-s))),t+=2,a=1);break;case 16:91==u?l++:93==u?l--:62==u&&0==l&&(n.addChild(Xml.createDocType(HxOverrides.substr(e,s,t-s))),a=1);break;case 14:if(63==u&&62==e.charCodeAt(t+1)){t++;var p=HxOverrides.substr(e,s+1,t-s-2);n.addChild(Xml.createProlog(p)),a=1}}u=e.charCodeAt(++t)}if(1==a&&(s=t,a=13),13==a)return(t!=s||0==c)&&n.addChild(Xml.createPCData(HxOverrides.substr(e,s,t-s))),t;throw"Unexpected end"},haxe.xml.Parser.isValidChar=function(e){return e>=97&&122>=e||e>=65&&90>=e||e>=48&&57>=e||58==e||46==e||95==e||45==e
};var js={};js.Boot=function(){},$hxClasses["js.Boot"]=js.Boot,js.Boot.__name__=["js","Boot"],js.Boot.__unhtml=function(e){return e.split("&").join("&").split("<").join("&lt;").split(">").join("&gt;")},js.Boot.__trace=function(e,t){var n=null!=t?t.fileName+":"+t.lineNumber+": ":"";n+=js.Boot.__string_rec(e,"");var i;"undefined"!=typeof document&&null!=(i=document.getElementById("haxe:trace"))?i.innerHTML+=js.Boot.__unhtml(n)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(n)},js.Boot.__clear_trace=function(){var e=document.getElementById("haxe:trace");null!=e&&(e.innerHTML="")},js.Boot.isClass=function(e){return e.__name__},js.Boot.isEnum=function(e){return e.__ename__},js.Boot.getClass=function(e){return e.__class__},js.Boot.__string_rec=function(e,t){if(null==e)return"null";if(t.length>=5)return"<...>";var n=typeof e;switch("function"==n&&(e.__name__||e.__ename__)&&(n="object"),n){case"object":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];var i=e[0]+"(";t+="	";for(var a=2,o=e.length;o>a;){var r=a++;i+=2!=r?","+js.Boot.__string_rec(e[r],t):js.Boot.__string_rec(e[r],t)}return i+")"}var r,s=e.length,i="[";t+="	";for(var o=0;s>o;){var c=o++;i+=(c>0?",":"")+js.Boot.__string_rec(e[c],t)}return i+="]"}var l;try{l=e.toString}catch(u){return"???"}if(null!=l&&l!=Object.toString){var h=e.toString();if("[object Object]"!=h)return h}var d=null,i="{\n";t+="	";var g=null!=e.hasOwnProperty;for(var d in e)(!g||e.hasOwnProperty(d))&&"prototype"!=d&&"__class__"!=d&&"__super__"!=d&&"__interfaces__"!=d&&"__properties__"!=d&&(2!=i.length&&(i+=", \n"),i+=t+d+" : "+js.Boot.__string_rec(e[d],t));return t=t.substring(1),i+="\n"+t+"}";case"function":return"<function>";case"string":return e;default:return String(e)}},js.Boot.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var n=e.__interfaces__;if(null!=n)for(var i=0,a=n.length;a>i;){var o=i++,r=n[o];if(r==t||js.Boot.__interfLoop(r,t))return!0}return js.Boot.__interfLoop(e.__super__,t)},js.Boot.__instanceof=function(e,t){try{if(e instanceof t)return t==Array?null==e.__enum__:!0;if(js.Boot.__interfLoop(e.__class__,t))return!0}catch(n){if(null==t)return!1}switch(t){case Int:return Math.ceil(e%2147483648)===e;case Float:return"number"==typeof e;case Bool:return e===!0||e===!1;case String:return"string"==typeof e;case Dynamic:return!0;default:return null==e?!1:t==Class&&null!=e.__name__?!0:t==Enum&&null!=e.__ename__?!0:e.__enum__==t}},js.Boot.__cast=function(e,t){if(js.Boot.__instanceof(e,t))return e;throw"Cannot cast "+Std.string(e)+" to "+Std.string(t)},js.Lib=function(){},$hxClasses["js.Lib"]=js.Lib,js.Lib.__name__=["js","Lib"],js.Lib.document=null,js.Lib.window=null,js.Lib.debug=function(){},js.Lib.alert=function(e){alert(js.Boot.__string_rec(e,""))},js.Lib.eval=function(code){return eval(code)},js.Lib.setErrorHandler=function(e){js.Lib.onerror=e};var $_;Array.prototype.indexOf&&(HxOverrides.remove=function(e,t){var n=e.indexOf(t);return-1==n?!1:(e.splice(n,1),!0)}),Math.__name__=["Math"],Math.NaN=Number.NaN,Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,$hxClasses.Math=Math,Math.isFinite=function(e){return isFinite(e)},Math.isNaN=function(e){return isNaN(e)},String.prototype.__class__=$hxClasses.String=String,String.__name__=["String"],Array.prototype.__class__=$hxClasses.Array=Array,Array.__name__=["Array"],Date.prototype.__class__=$hxClasses.Date=Date,Date.__name__=["Date"];var Int=$hxClasses.Int={__name__:["Int"]},Dynamic=$hxClasses.Dynamic={__name__:["Dynamic"]},Float=$hxClasses.Float=Number;Float.__name__=["Float"];var Bool=$hxClasses.Bool=Boolean;Bool.__ename__=["Bool"];var Class=$hxClasses.Class={__name__:["Class"]},Enum={},Void=$hxClasses.Void={__ename__:["Void"]};Xml.Element="element",Xml.PCData="pcdata",Xml.CData="cdata",Xml.Comment="comment",Xml.DocType="doctype",Xml.Prolog="prolog",Xml.Document="document","undefined"==typeof $&&!function(e,t){function n(e){return G.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}function i(e){if(!fn[e]){var t=N.body,n=G("<"+e+">").appendTo(t),i=n.css("display");n.remove(),("none"===i||""===i)&&(dn||(dn=N.createElement("iframe"),dn.frameBorder=dn.width=dn.height=0),t.appendChild(dn),gn&&dn.createElement||(gn=(dn.contentWindow||dn.contentDocument).document,gn.write(("CSS1Compat"===N.compatMode?"<!doctype html>":"")+"<html><body>"),gn.close()),n=gn.createElement(e),gn.body.appendChild(n),i=G.css(n,"display"),t.removeChild(dn)),fn[e]=i}return fn[e]}function a(e,t){var n={};return G.each(vn.concat.apply([],vn.slice(0,t)),function(){n[this]=e}),n}function o(){pn=t}function r(){return setTimeout(o,0),pn=G.now()}function s(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function c(){try{return new e.XMLHttpRequest}catch(t){}}function l(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var i,a,o,r,s,c,l,u,h=e.dataTypes,d={},g=h.length,m=h[0];for(i=1;g>i;i++){if(1===i)for(a in e.converters)"string"==typeof a&&(d[a.toLowerCase()]=e.converters[a]);if(r=m,m=h[i],"*"===m)m=r;else if("*"!==r&&r!==m){if(s=r+" "+m,c=d[s]||d["* "+m],!c){u=t;for(l in d)if(o=l.split(" "),(o[0]===r||"*"===o[0])&&(u=d[o[1]+" "+m])){l=d[l],l===!0?c=u:u===!0&&(c=l);break}}!c&&!u&&G.error("No conversion from "+s.replace(" "," to ")),c!==!0&&(n=c?c(n):u(l(n)))}}return n}function u(e,n,i){var a,o,r,s,c=e.contents,l=e.dataTypes,u=e.responseFields;for(o in u)o in i&&(n[u[o]]=i[o]);for(;"*"===l[0];)l.shift(),a===t&&(a=e.mimeType||n.getResponseHeader("content-type"));if(a)for(o in c)if(c[o]&&c[o].test(a)){l.unshift(o);break}if(l[0]in i)r=l[0];else{for(o in i){if(!l[0]||e.converters[o+" "+l[0]]){r=o;break}s||(s=o)}r=r||s}return r?(r!==l[0]&&l.unshift(r),i[r]):void 0}function h(e,t,n,i){if(G.isArray(t))G.each(t,function(t,a){n||Vt.test(e)?i(e,a):h(e+"["+("object"==typeof a||G.isArray(a)?t:"")+"]",a,n,i)});else if(n||null==t||"object"!=typeof t)i(e,t);else for(var a in t)h(e+"["+a+"]",t[a],n,i)}function d(e,n){var i,a,o=G.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:a||(a={}))[i]=n[i]);a&&G.extend(!0,e,a)}function g(e,n,i,a,o,r){o=o||n.dataTypes[0],r=r||{},r[o]=!0;for(var s,c=e[o],l=0,u=c?c.length:0,h=e===nn;u>l&&(h||!s);l++)s=c[l](n,i,a),"string"==typeof s&&(!h||r[s]?s=t:(n.dataTypes.unshift(s),s=g(e,n,i,a,s,r)));return(h||!s)&&!r["*"]&&(s=g(e,n,i,a,"*",r)),s}function m(e){return function(t,n){if("string"!=typeof t&&(n=t,t="*"),G.isFunction(n))for(var i,a,o,r=t.toLowerCase().split(Zt),s=0,c=r.length;c>s;s++)i=r[s],o=/^\+/.test(i),o&&(i=i.substr(1)||"*"),a=e[i]=e[i]||[],a[o?"unshift":"push"](n)}}function p(e,t,n){var i="width"===t?e.offsetWidth:e.offsetHeight,a="width"===t?Gt:Ft;return i>0?("border"!==n&&G.each(a,function(){n||(i-=parseFloat(G.css(e,"padding"+this))||0),"margin"===n?i+=parseFloat(G.css(e,n+this))||0:i-=parseFloat(G.css(e,"border"+this+"Width"))||0}),i+"px"):(i=Tt(e,t,t),(0>i||null==i)&&(i=e.style[t]||0),i=parseFloat(i)||0,n&&G.each(a,function(){i+=parseFloat(G.css(e,"padding"+this))||0,"padding"!==n&&(i+=parseFloat(G.css(e,"border"+this+"Width"))||0),"margin"===n&&(i+=parseFloat(G.css(e,n+this))||0)}),i+"px")}function f(e,t){t.src?G.ajax({url:t.src,async:!1,dataType:"script"}):G.globalEval((t.text||t.textContent||t.innerHTML||"").replace(bt,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function _(e){G.nodeName(e,"input")?y(e):"getElementsByTagName"in e&&G.grep(e.getElementsByTagName("input"),y)}function y(e){("checkbox"===e.type||"radio"===e.type)&&(e.defaultChecked=e.checked)}function v(e){return"getElementsByTagName"in e?e.getElementsByTagName("*"):"querySelectorAll"in e?e.querySelectorAll("*"):[]}function x(e,t){var n;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),"object"===n?t.outerHTML=e.outerHTML:"input"!==n||"checkbox"!==e.type&&"radio"!==e.type?"option"===n?t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute(G.expando))}function S(e,t){if(1===t.nodeType&&G.hasData(e)){var n=G.expando,i=G.data(e),a=G.data(t,i);if(i=i[n]){var o=i.events;if(a=a[n]=G.extend({},i),o){delete a.handle,a.events={};for(var r in o)for(var s=0,c=o[r].length;c>s;s++)G.event.add(t,r+(o[r][s].namespace?".":"")+o[r][s].namespace,o[r][s],o[r][s].data)}}}}function C(e){return G.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function w(e,t,n){if(t=t||0,G.isFunction(t))return G.grep(e,function(e,i){var a=!!t.call(e,i,e);return a===n});if(t.nodeType)return G.grep(e,function(e){return e===t===n});if("string"==typeof t){var i=G.grep(e,function(e){return 1===e.nodeType});if(ht.test(t))return G.filter(t,i,!n);t=G.filter(t,i)}return G.grep(e,function(e){return G.inArray(e,t)>=0===n})}function b(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function M(e,t){return(e&&"*"!==e?e+".":"")+t.replace(Z,"`").replace(J,"&")}function T(e){var t,n,i,a,o,r,s,c,l,u,h,d,g=[],m=[],p=G._data(this,"events");if(e.liveFired!==this&&p&&p.live&&!e.target.disabled&&(!e.button||"click"!==e.type)){e.namespace&&(h=new RegExp("(^|\\.)"+e.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),e.liveFired=this;var f=p.live.slice(0);for(s=0;s<f.length;s++)o=f[s],o.origType.replace(K,"")===e.type?m.push(o.selector):f.splice(s--,1);for(a=G(e.target).closest(m,e.currentTarget),c=0,l=a.length;l>c;c++)for(u=a[c],s=0;s<f.length;s++)o=f[s],u.selector!==o.selector||h&&!h.test(o.namespace)||u.elem.disabled||(r=u.elem,i=null,("mouseenter"===o.preType||"mouseleave"===o.preType)&&(e.type=o.preType,i=G(e.relatedTarget).closest(o.selector)[0],i&&G.contains(r,i)&&(i=r)),(!i||i!==r)&&g.push({elem:r,handleObj:o,level:u.level}));for(c=0,l=g.length;l>c&&(a=g[c],!(n&&a.level>n))&&(e.currentTarget=a.elem,e.data=a.handleObj.data,e.handleObj=a.handleObj,d=a.handleObj.origHandler.apply(a.elem,arguments),d!==!1&&!e.isPropagationStopped()||(n=a.level,d===!1&&(t=!1),!e.isImmediatePropagationStopped()));c++);return t}}function I(e,n,i){var a=G.extend({},i[0]);a.type=e,a.originalEvent={},a.liveFired=t,G.event.handle.call(n,a),a.isDefaultPrevented()&&i[0].preventDefault()}function E(){return!0}function A(){return!1}function D(e,n,i){var a=n+"defer",o=n+"queue",r=n+"mark",s=G.data(e,a,t,!0);!(!s||"queue"!==i&&G.data(e,o,t,!0)||"mark"!==i&&G.data(e,r,t,!0)||!setTimeout(function(){!G.data(e,o,t,!0)&&!G.data(e,r,t,!0)&&(G.removeData(e,a,!0),s.resolve())},0))}function O(e){for(var t in e)if("toJSON"!==t)return!1;return!0}function B(e,n,i){if(i===t&&1===e.nodeType){var a="data-"+n.replace(U,"-$1").toLowerCase();if(i=e.getAttribute(a),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:G.isNaN(i)?R.test(i)?G.parseJSON(i):i:parseFloat(i)}catch(o){}G.data(e,n,i)}else i=t}return i}var N=e.document,P=e.navigator,L=e.location,G=function(){function n(){if(!s.isReady){try{N.documentElement.doScroll("left")}catch(e){return void setTimeout(n,1)}s.ready()}}var i,a,o,r,s=function(e,t){return new s.fn.init(e,t,i)},c=e.jQuery,l=e.$,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,h=/\S/,d=/^\s+/,g=/\s+$/,m=/\d/,p=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,f=/^[\],:{}\s]*$/,_=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,y=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,v=/(?:^|:|,)(?:\s*\[)+/g,x=/(webkit)[ \/]([\w.]+)/,S=/(opera)(?:.*version)?[ \/]([\w.]+)/,C=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,b=/-([a-z]|[0-9])/gi,M=/^-ms-/,T=function(e,t){return(t+"").toUpperCase()},I=P.userAgent,E=Object.prototype.toString,A=Object.prototype.hasOwnProperty,D=Array.prototype.push,O=Array.prototype.slice,B=String.prototype.trim,L=Array.prototype.indexOf,G={};return s.fn=s.prototype={constructor:s,init:function(e,n,i){var a,o,r,c;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("body"===e&&!n&&N.body)return this.context=N,this[0]=N.body,this.selector=e,this.length=1,this;if("string"==typeof e){if(a="<"!==e.charAt(0)||">"!==e.charAt(e.length-1)||e.length<3?u.exec(e):[null,e,null],a&&(a[1]||!n)){if(a[1])return n=n instanceof s?n[0]:n,c=n?n.ownerDocument||n:N,r=p.exec(e),r?s.isPlainObject(n)?(e=[N.createElement(r[1])],s.fn.attr.call(e,n,!0)):e=[c.createElement(r[1])]:(r=s.buildFragment([a[1]],[c]),e=(r.cacheable?s.clone(r.fragment):r.fragment).childNodes),s.merge(this,e);if(o=N.getElementById(a[2]),o&&o.parentNode){if(o.id!==a[2])return i.find(e);this.length=1,this[0]=o}return this.context=N,this.selector=e,this}return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e)}return s.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),s.makeArray(e,this))},selector:"",jquery:"1.6.4",length:0,size:function(){return this.length},toArray:function(){return O.call(this,0)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,n){var i=this.constructor();return s.isArray(e)?D.apply(i,e):s.merge(i,e),i.prevObject=this,i.context=this.context,"find"===t?i.selector=this.selector+(this.selector?" ":"")+n:t&&(i.selector=this.selector+"."+t+"("+n+")"),i},each:function(e,t){return s.each(this,e,t)},ready:function(e){return s.bindReady(),o.done(e),this},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(O.apply(this,arguments),"slice",O.call(arguments).join(","))},map:function(e){return this.pushStack(s.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:D,sort:[].sort,splice:[].splice},s.fn.init.prototype=s.fn,s.extend=s.fn.extend=function(){var e,n,i,a,o,r,c=arguments[0]||{},l=1,u=arguments.length,h=!1;for("boolean"==typeof c&&(h=c,c=arguments[1]||{},l=2),"object"!=typeof c&&!s.isFunction(c)&&(c={}),u===l&&(c=this,--l);u>l;l++)if(null!=(e=arguments[l]))for(n in e)i=c[n],a=e[n],c!==a&&(h&&a&&(s.isPlainObject(a)||(o=s.isArray(a)))?(o?(o=!1,r=i&&s.isArray(i)?i:[]):r=i&&s.isPlainObject(i)?i:{},c[n]=s.extend(h,r,a)):a!==t&&(c[n]=a));return c},s.extend({noConflict:function(t){return e.$===s&&(e.$=l),t&&e.jQuery===s&&(e.jQuery=c),s},isReady:!1,readyWait:1,holdReady:function(e){e?s.readyWait++:s.ready(!0)},ready:function(e){if(e===!0&&!--s.readyWait||e!==!0&&!s.isReady){if(!N.body)return setTimeout(s.ready,1);if(s.isReady=!0,e!==!0&&--s.readyWait>0)return;o.resolveWith(N,[s]),s.fn.trigger&&s(N).trigger("ready").unbind("ready")}},bindReady:function(){if(!o){if(o=s._Deferred(),"complete"===N.readyState)return setTimeout(s.ready,1);if(N.addEventListener)N.addEventListener("DOMContentLoaded",r,!1),e.addEventListener("load",s.ready,!1);else if(N.attachEvent){N.attachEvent("onreadystatechange",r),e.attachEvent("onload",s.ready);var t=!1;try{t=null==e.frameElement}catch(i){}N.documentElement.doScroll&&t&&n()}}},isFunction:function(e){return"function"===s.type(e)},isArray:Array.isArray||function(e){return"array"===s.type(e)},isWindow:function(e){return e&&"object"==typeof e&&"setInterval"in e},isNaN:function(e){return null==e||!m.test(e)||isNaN(e)},type:function(e){return null==e?String(e):G[E.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==s.type(e)||e.nodeType||s.isWindow(e))return!1;try{if(e.constructor&&!A.call(e,"constructor")&&!A.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||A.call(e,i)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw e},parseJSON:function(t){return"string"==typeof t&&t?(t=s.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):f.test(t.replace(_,"@").replace(y,"]").replace(v,""))?new Function("return "+t)():void s.error("Invalid JSON: "+t)):null},parseXML:function(n){var i,a;try{e.DOMParser?(a=new DOMParser,i=a.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(o){i=t}return(!i||!i.documentElement||i.getElementsByTagName("parsererror").length)&&s.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&h.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(M,"ms-").replace(b,T)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,i){var a,o=0,r=e.length,c=r===t||s.isFunction(e);if(i)if(c){for(a in e)if(n.apply(e[a],i)===!1)break}else for(;r>o&&n.apply(e[o++],i)!==!1;);else if(c){for(a in e)if(n.call(e[a],a,e[a])===!1)break}else for(;r>o&&n.call(e[o],o,e[o++])!==!1;);return e},trim:B?function(e){return null==e?"":B.call(e)}:function(e){return null==e?"":(e+"").replace(d,"").replace(g,"")},makeArray:function(e,t){var n=t||[];if(null!=e){var i=s.type(e);null==e.length||"string"===i||"function"===i||"regexp"===i||s.isWindow(e)?D.call(n,e):s.merge(n,e)}return n},inArray:function(e,t){if(!t)return-1;if(L)return L.call(t,e);for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},merge:function(e,n){var i=e.length,a=0;if("number"==typeof n.length)for(var o=n.length;o>a;a++)e[i++]=n[a];else for(;n[a]!==t;)e[i++]=n[a++];return e.length=i,e},grep:function(e,t,n){var i,a=[];n=!!n;for(var o=0,r=e.length;r>o;o++)i=!!t(e[o],o),n!==i&&a.push(e[o]);return a},map:function(e,n,i){var a,o,r=[],c=0,l=e.length,u=e instanceof s||l!==t&&"number"==typeof l&&(l>0&&e[0]&&e[l-1]||0===l||s.isArray(e));if(u)for(;l>c;c++)a=n(e[c],c,i),null!=a&&(r[r.length]=a);else for(o in e)a=n(e[o],o,i),null!=a&&(r[r.length]=a);return r.concat.apply([],r)},guid:1,proxy:function(e,n){if("string"==typeof n){var i=e[n];n=e,e=i}if(!s.isFunction(e))return t;var a=O.call(arguments,2),o=function(){return e.apply(n,a.concat(O.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||s.guid++,o},access:function(e,n,i,a,o,r){var c=e.length;if("object"==typeof n){for(var l in n)s.access(e,l,n[l],a,o,i);return e}if(i!==t){a=!r&&a&&s.isFunction(i);for(var u=0;c>u;u++)o(e[u],n,a?i.call(e[u],u,o(e[u],n)):i,r);return e}return c?o(e[0],n):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=x.exec(e)||S.exec(e)||C.exec(e)||e.indexOf("compatible")<0&&w.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}s.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,i){return i&&i instanceof s&&!(i instanceof e)&&(i=e(i)),s.fn.init.call(this,n,i,t)},e.fn.init.prototype=e.fn;var t=e(N);return e},browser:{}}),s.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){G["[object "+t+"]"]=t.toLowerCase()}),a=s.uaMatch(I),a.browser&&(s.browser[a.browser]=!0,s.browser.version=a.version),s.browser.webkit&&(s.browser.safari=!0),h.test(" ")&&(d=/^[\s\xA0]+/,g=/[\s\xA0]+$/),i=s(N),N.addEventListener?r=function(){N.removeEventListener("DOMContentLoaded",r,!1),s.ready()}:N.attachEvent&&(r=function(){"complete"===N.readyState&&(N.detachEvent("onreadystatechange",r),s.ready())}),s}(),F="done fail isResolved isRejected promise then always pipe".split(" "),k=[].slice;G.extend({_Deferred:function(){var e,t,n,i=[],a={done:function(){if(!n){var t,o,r,s,c,l=arguments;for(e&&(c=e,e=0),t=0,o=l.length;o>t;t++)r=l[t],s=G.type(r),"array"===s?a.done.apply(a,r):"function"===s&&i.push(r);c&&a.resolveWith(c[0],c[1])}return this},resolveWith:function(a,o){if(!n&&!e&&!t){o=o||[],t=1;try{for(;i[0];)i.shift().apply(a,o)}finally{e=[a,o],t=0}}return this},resolve:function(){return a.resolveWith(this,arguments),this},isResolved:function(){return!!t||!!e},cancel:function(){return n=1,i=[],this}};return a},Deferred:function(e){var t,n=G._Deferred(),i=G._Deferred();return G.extend(n,{then:function(e,t){return n.done(e).fail(t),this},always:function(){return n.done.apply(n,arguments).fail.apply(this,arguments)},fail:i.done,rejectWith:i.resolveWith,reject:i.resolve,isRejected:i.isResolved,pipe:function(e,t){return G.Deferred(function(i){G.each({done:[e,"resolve"],fail:[t,"reject"]},function(e,t){var a,o=t[0],r=t[1];n[e](G.isFunction(o)?function(){a=o.apply(this,arguments),a&&G.isFunction(a.promise)?a.promise().then(i.resolve,i.reject):i[r+"With"](this===n?i:this,[a])}:i[r])})}).promise()},promise:function(e){if(null==e){if(t)return t;t=e={}}for(var i=F.length;i--;)e[F[i]]=n[F[i]];return e}}),n.done(i.cancel).fail(n.cancel),delete n.cancel,e&&e.call(n,n),n},when:function(e){function t(e){return function(t){n[e]=arguments.length>1?k.call(arguments,0):t,--o||r.resolveWith(r,k.call(n,0))}}var n=arguments,i=0,a=n.length,o=a,r=1>=a&&e&&G.isFunction(e.promise)?e:G.Deferred();if(a>1){for(;a>i;i++)n[i]&&G.isFunction(n[i].promise)?n[i].promise().then(t(i),r.reject):--o;o||r.resolveWith(r,n)}else r!==e&&r.resolveWith(r,a?[e]:[]);return r.promise()}}),G.support=function(){var e,t,n,i,a,o,r,s,c,l,u,h,d,g,m,p,f=N.createElement("div"),_=N.documentElement;if(f.setAttribute("className","t"),f.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",e=f.getElementsByTagName("*"),t=f.getElementsByTagName("a")[0],!e||!e.length||!t)return{};n=N.createElement("select"),i=n.appendChild(N.createElement("option")),a=f.getElementsByTagName("input")[0],r={leadingWhitespace:3===f.firstChild.nodeType,tbody:!f.getElementsByTagName("tbody").length,htmlSerialize:!!f.getElementsByTagName("link").length,style:/top/.test(t.getAttribute("style")),hrefNormalized:"/a"===t.getAttribute("href"),opacity:/^0.55$/.test(t.style.opacity),cssFloat:!!t.style.cssFloat,checkOn:"on"===a.value,optSelected:i.selected,getSetAttribute:"t"!==f.className,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},a.checked=!0,r.noCloneChecked=a.cloneNode(!0).checked,n.disabled=!0,r.optDisabled=!i.disabled;try{delete f.test}catch(y){r.deleteExpando=!1}!f.addEventListener&&f.attachEvent&&f.fireEvent&&(f.attachEvent("onclick",function(){r.noCloneEvent=!1}),f.cloneNode(!0).fireEvent("onclick")),a=N.createElement("input"),a.value="t",a.setAttribute("type","radio"),r.radioValue="t"===a.value,a.setAttribute("checked","checked"),f.appendChild(a),s=N.createDocumentFragment(),s.appendChild(f.firstChild),r.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,f.innerHTML="",f.style.width=f.style.paddingLeft="1px",c=N.getElementsByTagName("body")[0],u=N.createElement(c?"div":"body"),h={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},c&&G.extend(h,{position:"absolute",left:"-1000px",top:"-1000px"});for(m in h)u.style[m]=h[m];if(u.appendChild(f),l=c||_,l.insertBefore(u,l.firstChild),r.appendChecked=a.checked,r.boxModel=2===f.offsetWidth,"zoom"in f.style&&(f.style.display="inline",f.style.zoom=1,r.inlineBlockNeedsLayout=2===f.offsetWidth,f.style.display="",f.innerHTML="<div style='width:4px;'></div>",r.shrinkWrapBlocks=2!==f.offsetWidth),f.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",d=f.getElementsByTagName("td"),p=0===d[0].offsetHeight,d[0].style.display="",d[1].style.display="none",r.reliableHiddenOffsets=p&&0===d[0].offsetHeight,f.innerHTML="",N.defaultView&&N.defaultView.getComputedStyle&&(o=N.createElement("div"),o.style.width="0",o.style.marginRight="0",f.appendChild(o),r.reliableMarginRight=0===(parseInt((N.defaultView.getComputedStyle(o,null)||{marginRight:0}).marginRight,10)||0)),u.innerHTML="",l.removeChild(u),f.attachEvent)for(m in{submit:1,change:1,focusin:1})g="on"+m,p=g in f,p||(f.setAttribute(g,"return;"),p="function"==typeof f[g]),r[m+"Bubbles"]=p;return u=s=n=i=c=o=f=a=null,r}(),G.boxModel=G.support.boxModel;var R=/^(?:\{.*\}|\[.*\])$/,U=/([A-Z])/g;G.extend({cache:{},uuid:0,expando:"jQuery"+(G.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?G.cache[e[G.expando]]:e[G.expando],!!e&&!O(e)},data:function(e,n,i,a){if(G.acceptData(e)){var o,r,s=G.expando,c="string"==typeof n,l=e.nodeType,u=l?G.cache:e,h=l?e[G.expando]:e[G.expando]&&G.expando;if((!h||a&&h&&u[h]&&!u[h][s])&&c&&i===t)return;return h||(l?e[G.expando]=h=++G.uuid:h=G.expando),u[h]||(u[h]={},l||(u[h].toJSON=G.noop)),("object"==typeof n||"function"==typeof n)&&(a?u[h][s]=G.extend(u[h][s],n):u[h]=G.extend(u[h],n)),o=u[h],a&&(o[s]||(o[s]={}),o=o[s]),i!==t&&(o[G.camelCase(n)]=i),"events"!==n||o[n]?(c?(r=o[n],null==r&&(r=o[G.camelCase(n)])):r=o,r):o[s]&&o[s].events}},removeData:function(e,t,n){if(G.acceptData(e)){var i,a=G.expando,o=e.nodeType,r=o?G.cache:e,s=o?e[G.expando]:G.expando;if(!r[s])return;if(t&&(i=n?r[s][a]:r[s],i&&(i[t]||(t=G.camelCase(t)),delete i[t],!O(i))))return;if(n&&(delete r[s][a],!O(r[s])))return;var c=r[s][a];G.support.deleteExpando||!r.setInterval?delete r[s]:r[s]=null,c?(r[s]={},o||(r[s].toJSON=G.noop),r[s][a]=c):o&&(G.support.deleteExpando?delete e[G.expando]:e.removeAttribute?e.removeAttribute(G.expando):e[G.expando]=null)}},_data:function(e,t,n){return G.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=G.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),G.fn.extend({data:function(e,n){var i=null;if("undefined"==typeof e){if(this.length&&(i=G.data(this[0]),1===this[0].nodeType))for(var a,o=this[0].attributes,r=0,s=o.length;s>r;r++)a=o[r].name,0===a.indexOf("data-")&&(a=G.camelCase(a.substring(5)),B(this[0],a,i[a]));return i}if("object"==typeof e)return this.each(function(){G.data(this,e)});var c=e.split(".");return c[1]=c[1]?"."+c[1]:"",n===t?(i=this.triggerHandler("getData"+c[1]+"!",[c[0]]),i===t&&this.length&&(i=G.data(this[0],e),i=B(this[0],e,i)),i===t&&c[1]?this.data(c[0]):i):this.each(function(){var t=G(this),i=[c[0],n];t.triggerHandler("setData"+c[1]+"!",i),G.data(this,e,n),t.triggerHandler("changeData"+c[1]+"!",i)})},removeData:function(e){return this.each(function(){G.removeData(this,e)})}}),G.extend({_mark:function(e,n){e&&(n=(n||"fx")+"mark",G.data(e,n,(G.data(e,n,t,!0)||0)+1,!0))},_unmark:function(e,n,i){if(e!==!0&&(i=n,n=e,e=!1),n){i=i||"fx";var a=i+"mark",o=e?0:(G.data(n,a,t,!0)||1)-1;o?G.data(n,a,o,!0):(G.removeData(n,a,!0),D(n,i,"mark"))}},queue:function(e,n,i){if(e){n=(n||"fx")+"queue";var a=G.data(e,n,t,!0);return i&&(!a||G.isArray(i)?a=G.data(e,n,G.makeArray(i),!0):a.push(i)),a||[]}},dequeue:function(e,t){t=t||"fx";var n=G.queue(e,t),i=n.shift();"inprogress"===i&&(i=n.shift()),i&&("fx"===t&&n.unshift("inprogress"),i.call(e,function(){G.dequeue(e,t)})),n.length||(G.removeData(e,t+"queue",!0),D(e,t,"queue"))}}),G.fn.extend({queue:function(e,n){return"string"!=typeof e&&(n=e,e="fx"),n===t?G.queue(this[0],e):this.each(function(){var t=G.queue(this,e,n);"fx"===e&&"inprogress"!==t[0]&&G.dequeue(this,e)})},dequeue:function(e){return this.each(function(){G.dequeue(this,e)})},delay:function(e,t){return e=G.fx?G.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(){var n=this;setTimeout(function(){G.dequeue(n,t)},e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function i(){--c||o.resolveWith(r,[r])}"string"!=typeof e&&(n=e,e=t),e=e||"fx";for(var a,o=G.Deferred(),r=this,s=r.length,c=1,l=e+"defer",u=e+"queue",h=e+"mark";s--;)(a=G.data(r[s],l,t,!0)||(G.data(r[s],u,t,!0)||G.data(r[s],h,t,!0))&&G.data(r[s],l,G._Deferred(),!0))&&(c++,a.done(i));return i(),o.promise()}});var V,H,$=/[\n\t\r]/g,j=/\s+/,W=/\r/g,z=/^(?:button|input)$/i,X=/^(?:button|input|object|select|textarea)$/i,Y=/^a(?:rea)?$/i,q=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i;G.fn.extend({attr:function(e,t){return G.access(this,e,t,!0,G.attr)},removeAttr:function(e){return this.each(function(){G.removeAttr(this,e)})},prop:function(e,t){return G.access(this,e,t,!0,G.prop)},removeProp:function(e){return e=G.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,a,o,r,s;if(G.isFunction(e))return this.each(function(t){G(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(j),n=0,i=this.length;i>n;n++)if(a=this[n],1===a.nodeType)if(a.className||1!==t.length){for(o=" "+a.className+" ",r=0,s=t.length;s>r;r++)~o.indexOf(" "+t[r]+" ")||(o+=t[r]+" ");a.className=G.trim(o)}else a.className=e;return this},removeClass:function(e){var n,i,a,o,r,s,c;if(G.isFunction(e))return this.each(function(t){G(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(n=(e||"").split(j),i=0,a=this.length;a>i;i++)if(o=this[i],1===o.nodeType&&o.className)if(e){for(r=(" "+o.className+" ").replace($," "),s=0,c=n.length;c>s;s++)r=r.replace(" "+n[s]+" "," ");o.className=G.trim(r)}else o.className="";return this},toggleClass:function(e,t){var n=typeof e,i="boolean"==typeof t;return this.each(G.isFunction(e)?function(n){G(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var a,o=0,r=G(this),s=t,c=e.split(j);a=c[o++];)s=i?s:!r.hasClass(a),r[s?"addClass":"removeClass"](a);else("undefined"===n||"boolean"===n)&&(this.className&&G._data(this,"__className__",this.className),this.className=this.className||e===!1?"":G._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace($," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,i,a=this[0];if(!arguments.length)return a?(n=G.valHooks[a.nodeName.toLowerCase()]||G.valHooks[a.type],n&&"get"in n&&(i=n.get(a,"value"))!==t?i:(i=a.value,"string"==typeof i?i.replace(W,""):null==i?"":i)):t;var o=G.isFunction(e);return this.each(function(i){var a,r=G(this);1===this.nodeType&&(a=o?e.call(this,i,r.val()):e,null==a?a="":"number"==typeof a?a+="":G.isArray(a)&&(a=G.map(a,function(e){return null==e?"":e+""})),n=G.valHooks[this.nodeName.toLowerCase()]||G.valHooks[this.type],n&&"set"in n&&n.set(this,a,"value")!==t||(this.value=a))})}}),G.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n=e.selectedIndex,i=[],a=e.options,o="select-one"===e.type;if(0>n)return null;for(var r=o?n:0,s=o?n+1:a.length;s>r;r++){var c=a[r];if(!(!c.selected||(G.support.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&G.nodeName(c.parentNode,"optgroup"))){if(t=G(c).val(),o)return t;i.push(t)}}return o&&!i.length&&a.length?G(a[n]).val():i},set:function(e,t){var n=G.makeArray(t);return G(e).find("option").each(function(){this.selected=G.inArray(G(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:"tabIndex"},attr:function(e,n,i,a){var o=e.nodeType;if(!e||3===o||8===o||2===o)return t;if(a&&n in G.attrFn)return G(e)[n](i);if(!("getAttribute"in e))return G.prop(e,n,i);var r,s,c=1!==o||!G.isXMLDoc(e);return c&&(n=G.attrFix[n]||n,s=G.attrHooks[n],s||(q.test(n)?s=H:V&&(s=V))),i!==t?null===i?(G.removeAttr(e,n),t):s&&"set"in s&&c&&(r=s.set(e,i,n))!==t?r:(e.setAttribute(n,""+i),i):s&&"get"in s&&c&&null!==(r=s.get(e,n))?r:(r=e.getAttribute(n),null===r?t:r)},removeAttr:function(e,t){var n;1===e.nodeType&&(t=G.attrFix[t]||t,G.attr(e,t,""),e.removeAttribute(t),q.test(t)&&(n=G.propFix[t]||t)in e&&(e[n]=!1))},attrHooks:{type:{set:function(e,t){if(z.test(e.nodeName)&&e.parentNode)G.error("type property can't be changed");else if(!G.support.radioValue&&"radio"===t&&G.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return V&&G.nodeName(e,"button")?V.get(e,t):t in e?e.value:null},set:function(e,t,n){return V&&G.nodeName(e,"button")?V.set(e,t,n):void(e.value=t)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,i){var a=e.nodeType;
if(!e||3===a||8===a||2===a)return t;var o,r,s=1!==a||!G.isXMLDoc(e);return s&&(n=G.propFix[n]||n,r=G.propHooks[n]),i!==t?r&&"set"in r&&(o=r.set(e,i,n))!==t?o:e[n]=i:r&&"get"in r&&null!==(o=r.get(e,n))?o:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):X.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),G.attrHooks.tabIndex=G.propHooks.tabIndex,H={get:function(e,n){var i;return G.prop(e,n)===!0||(i=e.getAttributeNode(n))&&i.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var i;return t===!1?G.removeAttr(e,n):(i=G.propFix[n]||n,i in e&&(e[i]=!0),e.setAttribute(n,n.toLowerCase())),n}},G.support.getSetAttribute||(V=G.valHooks.button={get:function(e,n){var i;return i=e.getAttributeNode(n),i&&""!==i.nodeValue?i.nodeValue:t},set:function(e,t,n){var i=e.getAttributeNode(n);return i||(i=N.createAttribute(n),e.setAttributeNode(i)),i.nodeValue=t+""}},G.each(["width","height"],function(e,t){G.attrHooks[t]=G.extend(G.attrHooks[t],{set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}})})),G.support.hrefNormalized||G.each(["href","src","width","height"],function(e,n){G.attrHooks[n]=G.extend(G.attrHooks[n],{get:function(e){var i=e.getAttribute(n,2);return null===i?t:i}})}),G.support.style||(G.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),G.support.optSelected||(G.propHooks.selected=G.extend(G.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),G.support.checkOn||G.each(["radio","checkbox"],function(){G.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),G.each(["radio","checkbox"],function(){G.valHooks[this]=G.extend(G.valHooks[this],{set:function(e,t){return G.isArray(t)?e.checked=G.inArray(G(e).val(),t)>=0:void 0}})});var K=/\.(.*)$/,Q=/^(?:textarea|input|select)$/i,Z=/\./g,J=/ /g,et=/[^\w\s.|`]/g,tt=function(e){return e.replace(et,"\\$&")};G.event={add:function(e,n,i,a){if(3!==e.nodeType&&8!==e.nodeType){if(i===!1)i=A;else if(!i)return;var o,r;i.handler&&(o=i,i=o.handler),i.guid||(i.guid=G.guid++);var s=G._data(e);if(!s)return;var c=s.events,l=s.handle;c||(s.events=c={}),l||(s.handle=l=function(e){return"undefined"==typeof G||e&&G.event.triggered===e.type?t:G.event.handle.apply(l.elem,arguments)}),l.elem=e,n=n.split(" ");for(var u,h,d=0;u=n[d++];){r=o?G.extend({},o):{handler:i,data:a},u.indexOf(".")>-1?(h=u.split("."),u=h.shift(),r.namespace=h.slice(0).sort().join(".")):(h=[],r.namespace=""),r.type=u,r.guid||(r.guid=i.guid);var g=c[u],m=G.event.special[u]||{};g||(g=c[u]=[],m.setup&&m.setup.call(e,a,h,l)!==!1||(e.addEventListener?e.addEventListener(u,l,!1):e.attachEvent&&e.attachEvent("on"+u,l))),m.add&&(m.add.call(e,r),r.handler.guid||(r.handler.guid=i.guid)),g.push(r),G.event.global[u]=!0}e=null}},global:{},remove:function(e,n,i,a){if(3!==e.nodeType&&8!==e.nodeType){i===!1&&(i=A);var o,r,s,c,l,u,h,d,g,m,p=0,f=G.hasData(e)&&G._data(e),_=f&&f.events;if(!f||!_)return;if(n&&n.type&&(i=n.handler,n=n.type),!n||"string"==typeof n&&"."===n.charAt(0)){n=n||"";for(r in _)G.event.remove(e,r+n);return}for(n=n.split(" ");r=n[p++];)if(m=r,g=null,c=r.indexOf(".")<0,l=[],c||(l=r.split("."),r=l.shift(),u=new RegExp("(^|\\.)"+G.map(l.slice(0).sort(),tt).join("\\.(?:.*\\.)?")+"(\\.|$)")),d=_[r],d)if(i){for(h=G.event.special[r]||{},s=a||0;s<d.length&&(g=d[s],i.guid!==g.guid||((c||u.test(g.namespace))&&(null==a&&d.splice(s--,1),h.remove&&h.remove.call(e,g)),null==a));s++);(0===d.length||null!=a&&1===d.length)&&((!h.teardown||h.teardown.call(e,l)===!1)&&G.removeEvent(e,r,f.handle),o=null,delete _[r])}else for(s=0;s<d.length;s++)g=d[s],(c||u.test(g.namespace))&&(G.event.remove(e,m,g.handler,s),d.splice(s--,1));if(G.isEmptyObject(_)){var y=f.handle;y&&(y.elem=null),delete f.events,delete f.handle,G.isEmptyObject(f)&&G.removeData(e,t,!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,i,a,o){var r,s=n.type||n,c=[];if(s.indexOf("!")>=0&&(s=s.slice(0,-1),r=!0),s.indexOf(".")>=0&&(c=s.split("."),s=c.shift(),c.sort()),a&&!G.event.customEvent[s]||G.event.global[s]){if(n="object"==typeof n?n[G.expando]?n:new G.Event(s,n):new G.Event(s),n.type=s,n.exclusive=r,n.namespace=c.join("."),n.namespace_re=new RegExp("(^|\\.)"+c.join("\\.(?:.*\\.)?")+"(\\.|$)"),(o||!a)&&(n.preventDefault(),n.stopPropagation()),!a)return void G.each(G.cache,function(){var e=G.expando,t=this[e];t&&t.events&&t.events[s]&&G.event.trigger(n,i,t.handle.elem)});if(3===a.nodeType||8===a.nodeType)return;n.result=t,n.target=a,i=null!=i?G.makeArray(i):[],i.unshift(n);var l=a,u=s.indexOf(":")<0?"on"+s:"";do{var h=G._data(l,"handle");n.currentTarget=l,h&&h.apply(l,i),u&&G.acceptData(l)&&l[u]&&l[u].apply(l,i)===!1&&(n.result=!1,n.preventDefault()),l=l.parentNode||l.ownerDocument||l===n.target.ownerDocument&&e}while(l&&!n.isPropagationStopped());if(!n.isDefaultPrevented()){var d,g=G.event.special[s]||{};if(!(g._default&&g._default.call(a.ownerDocument,n)!==!1||"click"===s&&G.nodeName(a,"a")||!G.acceptData(a))){try{u&&a[s]&&(d=a[u],d&&(a[u]=null),G.event.triggered=s,a[s]())}catch(m){}d&&(a[u]=d),G.event.triggered=t}}return n.result}},handle:function(n){n=G.event.fix(n||e.event);var i=((G._data(this,"events")||{})[n.type]||[]).slice(0),a=!n.exclusive&&!n.namespace,o=Array.prototype.slice.call(arguments,0);o[0]=n,n.currentTarget=this;for(var r=0,s=i.length;s>r;r++){var c=i[r];if(a||n.namespace_re.test(c.namespace)){n.handler=c.handler,n.data=c.data,n.handleObj=c;var l=c.handler.apply(this,o);if(l!==t&&(n.result=l,l===!1&&(n.preventDefault(),n.stopPropagation())),n.isImmediatePropagationStopped())break}}return n.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(e){if(e[G.expando])return e;var n=e;e=G.Event(n);for(var i,a=this.props.length;a;)i=this.props[--a],e[i]=n[i];if(e.target||(e.target=e.srcElement||N),3===e.target.nodeType&&(e.target=e.target.parentNode),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),null==e.pageX&&null!=e.clientX){var o=e.target.ownerDocument||N,r=o.documentElement,s=o.body;e.pageX=e.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),e.pageY=e.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}return null==e.which&&(null!=e.charCode||null!=e.keyCode)&&(e.which=null!=e.charCode?e.charCode:e.keyCode),!e.metaKey&&e.ctrlKey&&(e.metaKey=e.ctrlKey),!e.which&&e.button!==t&&(e.which=1&e.button?1:2&e.button?3:4&e.button?2:0),e},guid:1e8,proxy:G.proxy,special:{ready:{setup:G.bindReady,teardown:G.noop},live:{add:function(e){G.event.add(this,M(e.origType,e.selector),G.extend({},e,{handler:T,guid:e.handler.guid}))},remove:function(e){G.event.remove(this,M(e.origType,e.selector),e)}},beforeunload:{setup:function(e,t,n){G.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}}},G.removeEvent=N.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},G.Event=function(e,t){return this.preventDefault?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?E:A):this.type=e,t&&G.extend(this,t),this.timeStamp=G.now(),this[G.expando]=!0,void 0):new G.Event(e,t)},G.Event.prototype={preventDefault:function(){this.isDefaultPrevented=E;var e=this.originalEvent;!e||(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=E;var e=this.originalEvent;!e||(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=E,this.stopPropagation()},isDefaultPrevented:A,isPropagationStopped:A,isImmediatePropagationStopped:A};var nt=function(e){var t=e.relatedTarget,n=!1,i=e.type;e.type=e.data,t!==this&&(t&&(n=G.contains(this,t)),n||(G.event.handle.apply(this,arguments),e.type=i))},it=function(e){e.type=e.data,G.event.handle.apply(this,arguments)};if(G.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){G.event.special[e]={setup:function(n){G.event.add(this,t,n&&n.selector?it:nt,e)},teardown:function(e){G.event.remove(this,t,e&&e.selector?it:nt)}}}),G.support.submitBubbles||(G.event.special.submit={setup:function(){return G.nodeName(this,"form")?!1:(G.event.add(this,"click.specialSubmit",function(e){var t=e.target,n=G.nodeName(t,"input")||G.nodeName(t,"button")?t.type:"";("submit"===n||"image"===n)&&G(t).closest("form").length&&I("submit",this,arguments)}),void G.event.add(this,"keypress.specialSubmit",function(e){var t=e.target,n=G.nodeName(t,"input")||G.nodeName(t,"button")?t.type:"";("text"===n||"password"===n)&&G(t).closest("form").length&&13===e.keyCode&&I("submit",this,arguments)}))},teardown:function(){G.event.remove(this,".specialSubmit")}}),!G.support.changeBubbles){var at,ot=function(e){var t=G.nodeName(e,"input")?e.type:"",n=e.value;return"radio"===t||"checkbox"===t?n=e.checked:"select-multiple"===t?n=e.selectedIndex>-1?G.map(e.options,function(e){return e.selected}).join("-"):"":G.nodeName(e,"select")&&(n=e.selectedIndex),n},rt=function(e){var n,i,a=e.target;if(Q.test(a.nodeName)&&!a.readOnly){if(n=G._data(a,"_change_data"),i=ot(a),("focusout"!==e.type||"radio"!==a.type)&&G._data(a,"_change_data",i),n===t||i===n)return;(null!=n||i)&&(e.type="change",e.liveFired=t,G.event.trigger(e,arguments[1],a))}};G.event.special.change={filters:{focusout:rt,beforedeactivate:rt,click:function(e){var t=e.target,n=G.nodeName(t,"input")?t.type:"";("radio"===n||"checkbox"===n||G.nodeName(t,"select"))&&rt.call(this,e)},keydown:function(e){var t=e.target,n=G.nodeName(t,"input")?t.type:"";(13===e.keyCode&&!G.nodeName(t,"textarea")||32===e.keyCode&&("checkbox"===n||"radio"===n)||"select-multiple"===n)&&rt.call(this,e)},beforeactivate:function(e){var t=e.target;G._data(t,"_change_data",ot(t))}},setup:function(){if("file"===this.type)return!1;for(var e in at)G.event.add(this,e+".specialChange",at[e]);return Q.test(this.nodeName)},teardown:function(){return G.event.remove(this,".specialChange"),Q.test(this.nodeName)}},at=G.event.special.change.filters,at.focus=at.beforeactivate}G.support.focusinBubbles||G.each({focus:"focusin",blur:"focusout"},function(e,t){function n(e){var n=G.event.fix(e);n.type=t,n.originalEvent={},G.event.trigger(n,null,n.target),n.isDefaultPrevented()&&e.preventDefault()}var i=0;G.event.special[t]={setup:function(){0===i++&&N.addEventListener(e,n,!0)},teardown:function(){0===--i&&N.removeEventListener(e,n,!0)}}}),G.each(["bind","one"],function(e,n){G.fn[n]=function(e,i,a){var o;if("object"==typeof e){for(var r in e)this[n](r,i,e[r],a);return this}if((2===arguments.length||i===!1)&&(a=i,i=t),"one"===n?(o=function(e){return G(this).unbind(e,o),a.apply(this,arguments)},o.guid=a.guid||G.guid++):o=a,"unload"===e&&"one"!==n)this.one(e,i,a);else for(var s=0,c=this.length;c>s;s++)G.event.add(this[s],e,o,i);return this}}),G.fn.extend({unbind:function(e,t){if("object"!=typeof e||e.preventDefault)for(var n=0,i=this.length;i>n;n++)G.event.remove(this[n],e,t);else for(var a in e)this.unbind(a,e[a]);return this},delegate:function(e,t,n,i){return this.live(t,n,i,e)},undelegate:function(e,t,n){return 0===arguments.length?this.unbind("live"):this.die(t,null,n,e)},trigger:function(e,t){return this.each(function(){G.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?G.event.trigger(e,t,this[0],!0):void 0},toggle:function(e){var t=arguments,n=e.guid||G.guid++,i=0,a=function(n){var a=(G.data(this,"lastToggle"+e.guid)||0)%i;return G.data(this,"lastToggle"+e.guid,a+1),n.preventDefault(),t[a].apply(this,arguments)||!1};for(a.guid=n;i<t.length;)t[i++].guid=n;return this.click(a)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var st={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};G.each(["live","die"],function(e,n){G.fn[n]=function(e,i,a,o){var r,s,c,l,u=0,h=o||this.selector,d=o?this:G(this.context);if("object"==typeof e&&!e.preventDefault){for(var g in e)d[n](g,i,e[g],h);return this}if("die"===n&&!e&&o&&"."===o.charAt(0))return d.unbind(o),this;for((i===!1||G.isFunction(i))&&(a=i||A,i=t),e=(e||"").split(" ");null!=(r=e[u++]);)if(s=K.exec(r),c="",s&&(c=s[0],r=r.replace(K,"")),"hover"!==r)if(l=r,st[r]?(e.push(st[r]+c),r+=c):r=(st[r]||r)+c,"live"===n)for(var m=0,p=d.length;p>m;m++)G.event.add(d[m],"live."+M(r,h),{data:i,selector:h,handler:a,origType:r,origHandler:a,preType:l});else d.unbind("live."+M(r,h),a);else e.push("mouseenter"+c,"mouseleave"+c);return this}}),G.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(e,t){G.fn[t]=function(e,n){return null==n&&(n=e,e=null),arguments.length>0?this.bind(t,e,n):this.trigger(t)},G.attrFn&&(G.attrFn[t]=!0)}),function(){function e(e,t,n,i,a,o){for(var r=0,s=i.length;s>r;r++){var c=i[r];if(c){var l=!1;for(c=c[e];c;){if(c.sizcache===n){l=i[c.sizset];break}if(1===c.nodeType)if(o||(c.sizcache=n,c.sizset=r),"string"!=typeof t){if(c===t){l=!0;break}}else if(u.filter(t,[c]).length>0){l=c;break}c=c[e]}i[r]=l}}}function n(e,t,n,i,a,o){for(var r=0,s=i.length;s>r;r++){var c=i[r];if(c){var l=!1;for(c=c[e];c;){if(c.sizcache===n){l=i[c.sizset];break}if(1===c.nodeType&&!o&&(c.sizcache=n,c.sizset=r),c.nodeName.toLowerCase()===t){l=c;break}c=c[e]}i[r]=l}}}var i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,a=0,o=Object.prototype.toString,r=!1,s=!0,c=/\\/g,l=/\W/;[0,0].sort(function(){return s=!1,0});var u=function(e,t,n,a){n=n||[],t=t||N;var r=t;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return n;var s,c,l,g,m,f,_,y,x=!0,S=u.isXML(t),C=[],w=e;do if(i.exec(""),s=i.exec(w),s&&(w=s[3],C.push(s[1]),s[2])){g=s[3];break}while(s);if(C.length>1&&d.exec(e))if(2===C.length&&h.relative[C[0]])c=v(C[0]+C[1],t);else for(c=h.relative[C[0]]?[t]:u(C.shift(),t);C.length;)e=C.shift(),h.relative[e]&&(e+=C.shift()),c=v(e,c);else if(!a&&C.length>1&&9===t.nodeType&&!S&&h.match.ID.test(C[0])&&!h.match.ID.test(C[C.length-1])&&(m=u.find(C.shift(),t,S),t=m.expr?u.filter(m.expr,m.set)[0]:m.set[0]),t)for(m=a?{expr:C.pop(),set:p(a)}:u.find(C.pop(),1!==C.length||"~"!==C[0]&&"+"!==C[0]||!t.parentNode?t:t.parentNode,S),c=m.expr?u.filter(m.expr,m.set):m.set,C.length>0?l=p(c):x=!1;C.length;)f=C.pop(),_=f,h.relative[f]?_=C.pop():f="",null==_&&(_=t),h.relative[f](l,_,S);else l=C=[];if(l||(l=c),l||u.error(f||e),"[object Array]"===o.call(l))if(x)if(t&&1===t.nodeType)for(y=0;null!=l[y];y++)l[y]&&(l[y]===!0||1===l[y].nodeType&&u.contains(t,l[y]))&&n.push(c[y]);else for(y=0;null!=l[y];y++)l[y]&&1===l[y].nodeType&&n.push(c[y]);else n.push.apply(n,l);else p(l,n);return g&&(u(g,r,n,a),u.uniqueSort(n)),n};u.uniqueSort=function(e){if(_&&(r=s,e.sort(_),r))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},u.matches=function(e,t){return u(e,null,null,t)},u.matchesSelector=function(e,t){return u(t,null,null,[e]).length>0},u.find=function(e,t,n){var i;if(!e)return[];for(var a=0,o=h.order.length;o>a;a++){var r,s=h.order[a];if(r=h.leftMatch[s].exec(e)){var l=r[1];if(r.splice(1,1),"\\"!==l.substr(l.length-1)&&(r[1]=(r[1]||"").replace(c,""),i=h.find[s](r,t,n),null!=i)){e=e.replace(h.match[s],"");break}}}return i||(i="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:i,expr:e}},u.filter=function(e,n,i,a){for(var o,r,s=e,c=[],l=n,d=n&&n[0]&&u.isXML(n[0]);e&&n.length;){for(var g in h.filter)if(null!=(o=h.leftMatch[g].exec(e))&&o[2]){var m,p,f=h.filter[g],_=o[1];if(r=!1,o.splice(1,1),"\\"===_.substr(_.length-1))continue;if(l===c&&(c=[]),h.preFilter[g])if(o=h.preFilter[g](o,l,i,c,a,d)){if(o===!0)continue}else r=m=!0;if(o)for(var y=0;null!=(p=l[y]);y++)if(p){m=f(p,o,y,l);var v=a^!!m;i&&null!=m?v?r=!0:l[y]=!1:v&&(c.push(p),r=!0)}if(m!==t){if(i||(l=c),e=e.replace(h.match[g],""),!r)return[];break}}if(e===s){if(null!=r)break;u.error(e)}s=e}return l},u.error=function(e){throw"Syntax error, unrecognized expression: "+e};var h=u.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n="string"==typeof t,i=n&&!l.test(t),a=n&&!i;i&&(t=t.toLowerCase());for(var o,r=0,s=e.length;s>r;r++)if(o=e[r]){for(;(o=o.previousSibling)&&1!==o.nodeType;);e[r]=a||o&&o.nodeName.toLowerCase()===t?o||!1:o===t}a&&u.filter(t,e,!0)},">":function(e,t){var n,i="string"==typeof t,a=0,o=e.length;if(i&&!l.test(t)){for(t=t.toLowerCase();o>a;a++)if(n=e[a]){var r=n.parentNode;e[a]=r.nodeName.toLowerCase()===t?r:!1}}else{for(;o>a;a++)n=e[a],n&&(e[a]=i?n.parentNode:n.parentNode===t);i&&u.filter(t,e,!0)}},"":function(t,i,o){var r,s=a++,c=e;"string"==typeof i&&!l.test(i)&&(i=i.toLowerCase(),r=i,c=n),c("parentNode",i,s,t,r,o)},"~":function(t,i,o){var r,s=a++,c=e;"string"==typeof i&&!l.test(i)&&(i=i.toLowerCase(),r=i,c=n),c("previousSibling",i,s,t,r,o)}},find:{ID:function(e,t,n){if("undefined"!=typeof t.getElementById&&!n){var i=t.getElementById(e[1]);return i&&i.parentNode?[i]:[]}},NAME:function(e,t){if("undefined"!=typeof t.getElementsByName){for(var n=[],i=t.getElementsByName(e[1]),a=0,o=i.length;o>a;a++)i[a].getAttribute("name")===e[1]&&n.push(i[a]);return 0===n.length?null:n}},TAG:function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e[1]):void 0}},preFilter:{CLASS:function(e,t,n,i,a,o){if(e=" "+e[1].replace(c,"")+" ",o)return e;for(var r,s=0;null!=(r=t[s]);s++)r&&(a^(r.className&&(" "+r.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||i.push(r):n&&(t[s]=!1));return!1},ID:function(e){return e[1].replace(c,"")},TAG:function(e){return e[1].replace(c,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||u.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===e[2]&&"2n"||"odd"===e[2]&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&u.error(e[0]);return e[0]=a++,e},ATTR:function(e,t,n,i,a,o){var r=e[1]=e[1].replace(c,"");return!o&&h.attrMap[r]&&(e[1]=h.attrMap[r]),e[4]=(e[4]||e[5]||"").replace(c,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,n,a,o){if("not"===e[1]){if(!((i.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var r=u.filter(e[3],t,n,!0^o);return n||a.push.apply(a,r),!1}e[3]=u(e[3],null,null,t)}else if(h.match.POS.test(e[0])||h.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&"hidden"!==e.type},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!u(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===n&&(t===n||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,n,i){return t===i.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,i){var a=t[1],o=h.filters[a];if(o)return o(e,n,t,i);if("contains"===a)return(e.textContent||e.innerText||u.getText([e])||"").indexOf(t[3])>=0;if("not"===a){for(var r=t[3],s=0,c=r.length;c>s;s++)if(r[s]===e)return!1;return!0}u.error(a)},CHILD:function(e,t){var n=t[1],i=e;switch(n){case"only":case"first":for(;i=i.previousSibling;)if(1===i.nodeType)return!1;if("first"===n)return!0;i=e;case"last":for(;i=i.nextSibling;)if(1===i.nodeType)return!1;return!0;case"nth":var a=t[2],o=t[3];if(1===a&&0===o)return!0;var r=t[0],s=e.parentNode;if(s&&(s.sizcache!==r||!e.nodeIndex)){var c=0;for(i=s.firstChild;i;i=i.nextSibling)1===i.nodeType&&(i.nodeIndex=++c);s.sizcache=r}var l=e.nodeIndex-o;return 0===a?0===l:l%a===0&&l/a>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],i=h.attrHandle[n]?h.attrHandle[n](e):null!=e[n]?e[n]:e.getAttribute(n),a=i+"",o=t[2],r=t[4];return null==i?"!="===o:"="===o?a===r:"*="===o?a.indexOf(r)>=0:"~="===o?(" "+a+" ").indexOf(r)>=0:r?"!="===o?a!==r:"^="===o?0===a.indexOf(r):"$="===o?a.substr(a.length-r.length)===r:"|="===o?a===r||a.substr(0,r.length+1)===r+"-":!1:a&&i!==!1},POS:function(e,t,n,i){var a=t[2],o=h.setFilters[a];return o?o(e,n,t,i):void 0}}},d=h.match.POS,g=function(e,t){return"\\"+(t-0+1)};for(var m in h.match)h.match[m]=new RegExp(h.match[m].source+/(?![^\[]*\])(?![^\(]*\))/.source),h.leftMatch[m]=new RegExp(/(^(?:.|\r|\n)*?)/.source+h.match[m].source.replace(/\\(\d+)/g,g));var p=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(N.documentElement.childNodes,0)[0].nodeType}catch(f){p=function(e,t){var n=0,i=t||[];if("[object Array]"===o.call(e))Array.prototype.push.apply(i,e);else if("number"==typeof e.length)for(var a=e.length;a>n;n++)i.push(e[n]);else for(;e[n];n++)i.push(e[n]);return i}}var _,y;N.documentElement.compareDocumentPosition?_=function(e,t){return e===t?(r=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(_=function(e,t){if(e===t)return r=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,i,a=[],o=[],s=e.parentNode,c=t.parentNode,l=s;if(s===c)return y(e,t);if(!s)return-1;if(!c)return 1;for(;l;)a.unshift(l),l=l.parentNode;for(l=c;l;)o.unshift(l),l=l.parentNode;n=a.length,i=o.length;for(var u=0;n>u&&i>u;u++)if(a[u]!==o[u])return y(a[u],o[u]);return u===n?y(e,o[u],-1):y(a[u],t,1)},y=function(e,t,n){if(e===t)return n;for(var i=e.nextSibling;i;){if(i===t)return-1;i=i.nextSibling}return 1}),u.getText=function(e){for(var t,n="",i=0;e[i];i++)t=e[i],3===t.nodeType||4===t.nodeType?n+=t.nodeValue:8!==t.nodeType&&(n+=u.getText(t.childNodes));return n},function(){var e=N.createElement("div"),n="script"+(new Date).getTime(),i=N.documentElement;e.innerHTML="<a name='"+n+"'/>",i.insertBefore(e,i.firstChild),N.getElementById(n)&&(h.find.ID=function(e,n,i){if("undefined"!=typeof n.getElementById&&!i){var a=n.getElementById(e[1]);return a?a.id===e[1]||"undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id").nodeValue===e[1]?[a]:t:[]}},h.filter.ID=function(e,t){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&n&&n.nodeValue===t}),i.removeChild(e),i=e=null}(),function(){var e=N.createElement("div");e.appendChild(N.createComment("")),e.getElementsByTagName("*").length>0&&(h.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var i=[],a=0;n[a];a++)1===n[a].nodeType&&i.push(n[a]);n=i}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&"undefined"!=typeof e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(h.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),N.querySelectorAll&&function(){var e=u,t=N.createElement("div"),n="__sizzle__";if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){u=function(t,i,a,o){if(i=i||N,!o&&!u.isXML(i)){var r=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(r&&(1===i.nodeType||9===i.nodeType)){if(r[1])return p(i.getElementsByTagName(t),a);if(r[2]&&h.find.CLASS&&i.getElementsByClassName)return p(i.getElementsByClassName(r[2]),a)}if(9===i.nodeType){if("body"===t&&i.body)return p([i.body],a);if(r&&r[3]){var s=i.getElementById(r[3]);if(!s||!s.parentNode)return p([],a);if(s.id===r[3])return p([s],a)}try{return p(i.querySelectorAll(t),a)}catch(c){}}else if(1===i.nodeType&&"object"!==i.nodeName.toLowerCase()){var l=i,d=i.getAttribute("id"),g=d||n,m=i.parentNode,f=/^\s*[+~]/.test(t);d?g=g.replace(/'/g,"\\$&"):i.setAttribute("id",g),f&&m&&(i=i.parentNode);try{if(!f||m)return p(i.querySelectorAll("[id='"+g+"'] "+t),a)}catch(_){}finally{d||l.removeAttribute("id")}}}return e(t,i,a,o)};for(var i in e)u[i]=e[i];t=null}}(),function(){var e=N.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var n=!t.call(N.createElement("div"),"div"),i=!1;try{t.call(N.documentElement,"[test!='']:sizzle")}catch(a){i=!0}u.matchesSelector=function(e,a){if(a=a.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!u.isXML(e))try{if(i||!h.match.PSEUDO.test(a)&&!/!=/.test(a)){var o=t.call(e,a);if(o||!n||e.document&&11!==e.document.nodeType)return o}}catch(r){}return u(a,null,null,[e]).length>0}}}(),function(){var e=N.createElement("div");if(e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length){if(e.lastChild.className="e",1===e.getElementsByClassName("e").length)return;h.order.splice(1,0,"CLASS"),h.find.CLASS=function(e,t,n){return"undefined"==typeof t.getElementsByClassName||n?void 0:t.getElementsByClassName(e[1])},e=null}}(),u.contains=N.documentElement.contains?function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:N.documentElement.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:function(){return!1},u.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?"HTML"!==t.nodeName:!1};var v=function(e,t){for(var n,i=[],a="",o=t.nodeType?[t]:t;n=h.match.PSEUDO.exec(e);)a+=n[0],e=e.replace(h.match.PSEUDO,"");e=h.relative[e]?e+"*":e;for(var r=0,s=o.length;s>r;r++)u(e,o[r],i);return u.filter(a,i)};G.find=u,G.expr=u.selectors,G.expr[":"]=G.expr.filters,G.unique=u.uniqueSort,G.text=u.getText,G.isXMLDoc=u.isXML,G.contains=u.contains}();var ct=/Until$/,lt=/^(?:parents|prevUntil|prevAll)/,ut=/,/,ht=/^.[^:#\[\.,]*$/,dt=Array.prototype.slice,gt=G.expr.match.POS,mt={children:!0,contents:!0,next:!0,prev:!0};G.fn.extend({find:function(e){var t,n,i=this;if("string"!=typeof e)return G(e).filter(function(){for(t=0,n=i.length;n>t;t++)if(G.contains(i[t],this))return!0});var a,o,r,s=this.pushStack("","find",e);for(t=0,n=this.length;n>t;t++)if(a=s.length,G.find(e,this[t],s),t>0)for(o=a;o<s.length;o++)for(r=0;a>r;r++)if(s[r]===s[o]){s.splice(o--,1);break}return s},has:function(e){var t=G(e);return this.filter(function(){for(var e=0,n=t.length;n>e;e++)if(G.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(w(this,e,!1),"not",e)},filter:function(e){return this.pushStack(w(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?G.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,i,a=[],o=this[0];if(G.isArray(e)){var r,s,c={},l=1;if(o&&e.length){for(n=0,i=e.length;i>n;n++)s=e[n],c[s]||(c[s]=gt.test(s)?G(s,t||this.context):s);for(;o&&o.ownerDocument&&o!==t;){for(s in c)r=c[s],(r.jquery?r.index(o)>-1:G(o).is(r))&&a.push({selector:s,elem:o,level:l});o=o.parentNode,l++}}return a}var u=gt.test(e)||"string"!=typeof e?G(e,t||this.context):0;for(n=0,i=this.length;i>n;n++)for(o=this[n];o;){if(u?u.index(o)>-1:G.find.matchesSelector(o,e)){a.push(o);break}if(o=o.parentNode,!o||!o.ownerDocument||o===t||11===o.nodeType)break}return a=a.length>1?G.unique(a):a,this.pushStack(a,"closest",e)},index:function(e){return e?"string"==typeof e?G.inArray(this[0],G(e)):G.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n="string"==typeof e?G(e,t):G.makeArray(e&&e.nodeType?[e]:e),i=G.merge(this.get(),n);return this.pushStack(b(n[0])||b(i[0])?i:G.unique(i))},andSelf:function(){return this.add(this.prevObject)}}),G.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return G.dir(e,"parentNode")},parentsUntil:function(e,t,n){return G.dir(e,"parentNode",n)},next:function(e){return G.nth(e,2,"nextSibling")},prev:function(e){return G.nth(e,2,"previousSibling")},nextAll:function(e){return G.dir(e,"nextSibling")},prevAll:function(e){return G.dir(e,"previousSibling")},nextUntil:function(e,t,n){return G.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return G.dir(e,"previousSibling",n)},siblings:function(e){return G.sibling(e.parentNode.firstChild,e)},children:function(e){return G.sibling(e.firstChild)},contents:function(e){return G.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:G.makeArray(e.childNodes)}},function(e,t){G.fn[e]=function(n,i){var a=G.map(this,t,n),o=dt.call(arguments);return ct.test(e)||(i=n),i&&"string"==typeof i&&(a=G.filter(i,a)),a=this.length>1&&!mt[e]?G.unique(a):a,(this.length>1||ut.test(i))&&lt.test(e)&&(a=a.reverse()),this.pushStack(a,e,o.join(","))}}),G.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?G.find.matchesSelector(t[0],e)?[t[0]]:[]:G.find.matches(e,t)},dir:function(e,n,i){for(var a=[],o=e[n];o&&9!==o.nodeType&&(i===t||1!==o.nodeType||!G(o).is(i));)1===o.nodeType&&a.push(o),o=o[n];return a},nth:function(e,t,n){t=t||1;for(var i=0;e&&(1!==e.nodeType||++i!==t);e=e[n]);return e},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var pt=/ jQuery\d+="(?:\d+|null)"/g,ft=/^\s+/,_t=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,yt=/<([\w:]+)/,vt=/<tbody/i,xt=/<|&#?\w+;/,St=/<(?:script|object|embed|option|style)/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,wt=/\/(java|ecma)script/i,bt=/^\s*<!(?:\[CDATA\[|\-\-)/,Mt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};
Mt.optgroup=Mt.option,Mt.tbody=Mt.tfoot=Mt.colgroup=Mt.caption=Mt.thead,Mt.th=Mt.td,G.support.htmlSerialize||(Mt._default=[1,"div<div>","</div>"]),G.fn.extend({text:function(e){return G.isFunction(e)?this.each(function(t){var n=G(this);n.text(e.call(this,t,n.text()))}):"object"!=typeof e&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||N).createTextNode(e)):G.text(this)},wrapAll:function(e){if(G.isFunction(e))return this.each(function(t){G(this).wrapAll(e.call(this,t))});if(this[0]){var t=G(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(G.isFunction(e)?function(t){G(this).wrapInner(e.call(this,t))}:function(){var t=G(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){return this.each(function(){G(this).wrapAll(e)})},unwrap:function(){return this.parent().each(function(){G.nodeName(this,"body")||G(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=G(arguments[0]);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,G(arguments[0]).toArray()),e}},remove:function(e,t){for(var n,i=0;null!=(n=this[i]);i++)(!e||G.filter(e,[n]).length)&&(!t&&1===n.nodeType&&(G.cleanData(n.getElementsByTagName("*")),G.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&G.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return G.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(pt,""):null;if("string"!=typeof e||St.test(e)||!G.support.leadingWhitespace&&ft.test(e)||Mt[(yt.exec(e)||["",""])[1].toLowerCase()])G.isFunction(e)?this.each(function(t){var n=G(this);n.html(e.call(this,t,n.html()))}):this.empty().append(e);else{e=e.replace(_t,"<$1></$2>");try{for(var n=0,i=this.length;i>n;n++)1===this[n].nodeType&&(G.cleanData(this[n].getElementsByTagName("*")),this[n].innerHTML=e)}catch(a){this.empty().append(e)}}return this},replaceWith:function(e){return this[0]&&this[0].parentNode?G.isFunction(e)?this.each(function(t){var n=G(this),i=n.html();n.replaceWith(e.call(this,t,i))}):("string"!=typeof e&&(e=G(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;G(this).remove(),t?G(t).before(e):G(n).append(e)})):this.length?this.pushStack(G(G.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,i){var a,o,r,s,c=e[0],l=[];if(!G.support.checkClone&&3===arguments.length&&"string"==typeof c&&Ct.test(c))return this.each(function(){G(this).domManip(e,n,i,!0)});if(G.isFunction(c))return this.each(function(a){var o=G(this);e[0]=c.call(this,a,n?o.html():t),o.domManip(e,n,i)});if(this[0]){if(s=c&&c.parentNode,a=G.support.parentNode&&s&&11===s.nodeType&&s.childNodes.length===this.length?{fragment:s}:G.buildFragment(e,this,l),r=a.fragment,o=1===r.childNodes.length?r=r.firstChild:r.firstChild,o){n=n&&G.nodeName(o,"tr");for(var u=0,h=this.length,d=h-1;h>u;u++)i.call(n?C(this[u],o):this[u],a.cacheable||h>1&&d>u?G.clone(r,!0,!0):r)}l.length&&G.each(l,f)}return this}}),G.buildFragment=function(e,t,n){var i,a,o,r;return t&&t[0]&&(r=t[0].ownerDocument||t[0]),r.createDocumentFragment||(r=N),1===e.length&&"string"==typeof e[0]&&e[0].length<512&&r===N&&"<"===e[0].charAt(0)&&!St.test(e[0])&&(G.support.checkClone||!Ct.test(e[0]))&&(a=!0,o=G.fragments[e[0]],o&&1!==o&&(i=o)),i||(i=r.createDocumentFragment(),G.clean(e,r,i,n)),a&&(G.fragments[e[0]]=o?i:1),{fragment:i,cacheable:a}},G.fragments={},G.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){G.fn[e]=function(n){var i=[],a=G(n),o=1===this.length&&this[0].parentNode;if(o&&11===o.nodeType&&1===o.childNodes.length&&1===a.length)return a[t](this[0]),this;for(var r=0,s=a.length;s>r;r++){var c=(r>0?this.clone(!0):this).get();G(a[r])[t](c),i=i.concat(c)}return this.pushStack(i,e,a.selector)}}),G.extend({clone:function(e,t,n){var i,a,o,r=e.cloneNode(!0);if(!(G.support.noCloneEvent&&G.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||G.isXMLDoc(e)))for(x(e,r),i=v(e),a=v(r),o=0;i[o];++o)a[o]&&x(i[o],a[o]);if(t&&(S(e,r),n))for(i=v(e),a=v(r),o=0;i[o];++o)S(i[o],a[o]);return i=a=null,r},clean:function(e,t,n,i){var a;t=t||N,"undefined"==typeof t.createElement&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||N);for(var o,r,s=[],c=0;null!=(r=e[c]);c++)if("number"==typeof r&&(r+=""),r){if("string"==typeof r)if(xt.test(r)){r=r.replace(_t,"<$1></$2>");var l=(yt.exec(r)||["",""])[1].toLowerCase(),u=Mt[l]||Mt._default,h=u[0],d=t.createElement("div");for(d.innerHTML=u[1]+r+u[2];h--;)d=d.lastChild;if(!G.support.tbody){var g=vt.test(r),m="table"!==l||g?"<table>"!==u[1]||g?[]:d.childNodes:d.firstChild&&d.firstChild.childNodes;for(o=m.length-1;o>=0;--o)G.nodeName(m[o],"tbody")&&!m[o].childNodes.length&&m[o].parentNode.removeChild(m[o])}!G.support.leadingWhitespace&&ft.test(r)&&d.insertBefore(t.createTextNode(ft.exec(r)[0]),d.firstChild),r=d.childNodes}else r=t.createTextNode(r);var p;if(!G.support.appendChecked)if(r[0]&&"number"==typeof(p=r.length))for(o=0;p>o;o++)_(r[o]);else _(r);r.nodeType?s.push(r):s=G.merge(s,r)}if(n)for(a=function(e){return!e.type||wt.test(e.type)},c=0;s[c];c++)if(!i||!G.nodeName(s[c],"script")||s[c].type&&"text/javascript"!==s[c].type.toLowerCase()){if(1===s[c].nodeType){var f=G.grep(s[c].getElementsByTagName("script"),a);s.splice.apply(s,[c+1,0].concat(f))}n.appendChild(s[c])}else i.push(s[c].parentNode?s[c].parentNode.removeChild(s[c]):s[c]);return s},cleanData:function(e){for(var t,n,i,a=G.cache,o=G.expando,r=G.event.special,s=G.support.deleteExpando,c=0;null!=(i=e[c]);c++)if((!i.nodeName||!G.noData[i.nodeName.toLowerCase()])&&(n=i[G.expando])){if(t=a[n]&&a[n][o],t&&t.events){for(var l in t.events)r[l]?G.event.remove(i,l):G.removeEvent(i,l,t.handle);t.handle&&(t.handle.elem=null)}s?delete i[G.expando]:i.removeAttribute&&i.removeAttribute(G.expando),delete a[n]}}});var Tt,It,Et,At=/alpha\([^)]*\)/i,Dt=/opacity=([^)]*)/,Ot=/([A-Z]|^ms)/g,Bt=/^-?\d+(?:px)?$/i,Nt=/^-?\d/,Pt=/^([\-+])=([\-+.\de]+)/,Lt={position:"absolute",visibility:"hidden",display:"block"},Gt=["Left","Right"],Ft=["Top","Bottom"];G.fn.css=function(e,n){return 2===arguments.length&&n===t?this:G.access(this,e,n,!0,function(e,n,i){return i!==t?G.style(e,n,i):G.css(e,n)})},G.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Tt(e,"opacity","opacity");return""===n?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":G.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,a){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,s=G.camelCase(n),c=e.style,l=G.cssHooks[s];if(n=G.cssProps[s]||s,i===t)return l&&"get"in l&&(o=l.get(e,!1,a))!==t?o:c[n];if(r=typeof i,"string"===r&&(o=Pt.exec(i))&&(i=+(o[1]+1)*+o[2]+parseFloat(G.css(e,n)),r="number"),null==i||"number"===r&&isNaN(i))return;if("number"===r&&!G.cssNumber[s]&&(i+="px"),!(l&&"set"in l&&(i=l.set(e,i))===t))try{c[n]=i}catch(u){}}},css:function(e,n,i){var a,o;return n=G.camelCase(n),o=G.cssHooks[n],n=G.cssProps[n]||n,"cssFloat"===n&&(n="float"),o&&"get"in o&&(a=o.get(e,!0,i))!==t?a:Tt?Tt(e,n):void 0},swap:function(e,t,n){var i={};for(var a in t)i[a]=e.style[a],e.style[a]=t[a];n.call(e);for(a in t)e.style[a]=i[a]}}),G.curCSS=G.css,G.each(["height","width"],function(e,t){G.cssHooks[t]={get:function(e,n,i){var a;return n?0!==e.offsetWidth?p(e,t,i):(G.swap(e,Lt,function(){a=p(e,t,i)}),a):void 0},set:function(e,t){return Bt.test(t)?(t=parseFloat(t),t>=0?t+"px":void 0):t}}}),G.support.opacity||(G.cssHooks.opacity={get:function(e,t){return Dt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,a=G.isNaN(t)?"":"alpha(opacity="+100*t+")",o=i&&i.filter||n.filter||"";n.zoom=1,t>=1&&""===G.trim(o.replace(At,""))&&(n.removeAttribute("filter"),i&&!i.filter)||(n.filter=At.test(o)?o.replace(At,a):o+" "+a)}}),G(function(){G.support.reliableMarginRight||(G.cssHooks.marginRight={get:function(e,t){var n;return G.swap(e,{display:"inline-block"},function(){n=t?Tt(e,"margin-right","marginRight"):e.style.marginRight}),n}})}),N.defaultView&&N.defaultView.getComputedStyle&&(It=function(e,n){var i,a,o;return n=n.replace(Ot,"-$1").toLowerCase(),(a=e.ownerDocument.defaultView)?((o=a.getComputedStyle(e,null))&&(i=o.getPropertyValue(n),""===i&&!G.contains(e.ownerDocument.documentElement,e)&&(i=G.style(e,n))),i):t}),N.documentElement.currentStyle&&(Et=function(e,t){var n,i=e.currentStyle&&e.currentStyle[t],a=e.runtimeStyle&&e.runtimeStyle[t],o=e.style;return!Bt.test(i)&&Nt.test(i)&&(n=o.left,a&&(e.runtimeStyle.left=e.currentStyle.left),o.left="fontSize"===t?"1em":i||0,i=o.pixelLeft+"px",o.left=n,a&&(e.runtimeStyle.left=a)),""===i?"auto":i}),Tt=It||Et,G.expr&&G.expr.filters&&(G.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return 0===t&&0===n||!G.support.reliableHiddenOffsets&&"none"===(e.style.display||G.css(e,"display"))},G.expr.filters.visible=function(e){return!G.expr.filters.hidden(e)});var kt,Rt,Ut=/%20/g,Vt=/\[\]$/,Ht=/\r?\n/g,$t=/#.*$/,jt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Wt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,zt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Xt=/^(?:GET|HEAD)$/,Yt=/^\/\//,qt=/\?/,Kt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Qt=/^(?:select|textarea)/i,Zt=/\s+/,Jt=/([?&])_=[^&]*/,en=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,tn=G.fn.load,nn={},an={},on=["*/"]+["*"];try{kt=L.href}catch(rn){kt=N.createElement("a"),kt.href="",kt=kt.href}Rt=en.exec(kt.toLowerCase())||[],G.fn.extend({load:function(e,n,i){if("string"!=typeof e&&tn)return tn.apply(this,arguments);if(!this.length)return this;var a=e.indexOf(" ");if(a>=0){var o=e.slice(a,e.length);e=e.slice(0,a)}var r="GET";n&&(G.isFunction(n)?(i=n,n=t):"object"==typeof n&&(n=G.param(n,G.ajaxSettings.traditional),r="POST"));var s=this;return G.ajax({url:e,type:r,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),s.html(o?G("<div>").append(n.replace(Kt,"")).find(o):n)),i&&s.each(i,[n,t,e])}}),this},serialize:function(){return G.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?G.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Qt.test(this.nodeName)||Wt.test(this.type))}).map(function(e,t){var n=G(this).val();return null==n?null:G.isArray(n)?G.map(n,function(e){return{name:t.name,value:e.replace(Ht,"\r\n")}}):{name:t.name,value:n.replace(Ht,"\r\n")}}).get()}}),G.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){G.fn[t]=function(e){return this.bind(t,e)}}),G.each(["get","post"],function(e,n){G[n]=function(e,i,a,o){return G.isFunction(i)&&(o=o||a,a=i,i=t),G.ajax({type:n,url:e,data:i,success:a,dataType:o})}}),G.extend({getScript:function(e,n){return G.get(e,t,n,"script")},getJSON:function(e,t,n){return G.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?d(e,G.ajaxSettings):(t=e,e=G.ajaxSettings),d(e,t),e},ajaxSettings:{url:kt,isLocal:zt.test(Rt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":on},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":G.parseJSON,"text xml":G.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:m(nn),ajaxTransport:m(an),ajax:function(e,n){function i(e,n,i,r){if(2!==w){w=2,c&&clearTimeout(c),s=t,o=r||"",b.readyState=e>0?4:0;var h,g,m,S,C,M=n,T=i?u(p,b,i):t;if(e>=200&&300>e||304===e)if(p.ifModified&&((S=b.getResponseHeader("Last-Modified"))&&(G.lastModified[a]=S),(C=b.getResponseHeader("Etag"))&&(G.etag[a]=C)),304===e)M="notmodified",h=!0;else try{g=l(p,T),M="success",h=!0}catch(I){M="parsererror",m=I}else m=M,(!M||e)&&(M="error",0>e&&(e=0));b.status=e,b.statusText=""+(n||M),h?y.resolveWith(f,[g,M,b]):y.rejectWith(f,[b,M,m]),b.statusCode(x),x=t,d&&_.trigger("ajax"+(h?"Success":"Error"),[b,p,h?g:m]),v.resolveWith(f,[b,M]),d&&(_.trigger("ajaxComplete",[b,p]),--G.active||G.event.trigger("ajaxStop"))}}"object"==typeof e&&(n=e,e=t),n=n||{};var a,o,r,s,c,h,d,m,p=G.ajaxSetup({},n),f=p.context||p,_=f!==p&&(f.nodeType||f instanceof G)?G(f):G.event,y=G.Deferred(),v=G._Deferred(),x=p.statusCode||{},S={},C={},w=0,b={readyState:0,setRequestHeader:function(e,t){if(!w){var n=e.toLowerCase();e=C[n]=C[n]||e,S[e]=t}return this},getAllResponseHeaders:function(){return 2===w?o:null},getResponseHeader:function(e){var n;if(2===w){if(!r)for(r={};n=jt.exec(o);)r[n[1].toLowerCase()]=n[2];n=r[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return w||(p.mimeType=e),this},abort:function(e){return e=e||"abort",s&&s.abort(e),i(0,e),this}};if(y.promise(b),b.success=b.done,b.error=b.fail,b.complete=v.done,b.statusCode=function(e){if(e){var t;if(2>w)for(t in e)x[t]=[x[t],e[t]];else t=e[b.status],b.then(t,t)}return this},p.url=((e||p.url)+"").replace($t,"").replace(Yt,Rt[1]+"//"),p.dataTypes=G.trim(p.dataType||"*").toLowerCase().split(Zt),null==p.crossDomain&&(h=en.exec(p.url.toLowerCase()),p.crossDomain=!(!h||h[1]==Rt[1]&&h[2]==Rt[2]&&(h[3]||("http:"===h[1]?80:443))==(Rt[3]||("http:"===Rt[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=G.param(p.data,p.traditional)),g(nn,p,n,b),2===w)return!1;if(d=p.global,p.type=p.type.toUpperCase(),p.hasContent=!Xt.test(p.type),d&&0===G.active++&&G.event.trigger("ajaxStart"),!p.hasContent&&(p.data&&(p.url+=(qt.test(p.url)?"&":"?")+p.data,delete p.data),a=p.url,p.cache===!1)){var M=G.now(),T=p.url.replace(Jt,"$1_="+M);p.url=T+(T===p.url?(qt.test(p.url)?"&":"?")+"_="+M:"")}(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&b.setRequestHeader("Content-Type",p.contentType),p.ifModified&&(a=a||p.url,G.lastModified[a]&&b.setRequestHeader("If-Modified-Since",G.lastModified[a]),G.etag[a]&&b.setRequestHeader("If-None-Match",G.etag[a])),b.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+on+"; q=0.01":""):p.accepts["*"]);for(m in p.headers)b.setRequestHeader(m,p.headers[m]);if(p.beforeSend&&(p.beforeSend.call(f,b,p)===!1||2===w))return b.abort(),!1;for(m in{success:1,error:1,complete:1})b[m](p[m]);if(s=g(an,p,n,b)){b.readyState=1,d&&_.trigger("ajaxSend",[b,p]),p.async&&p.timeout>0&&(c=setTimeout(function(){b.abort("timeout")},p.timeout));try{w=1,s.send(S,i)}catch(I){2>w?i(-1,I):G.error(I)}}else i(-1,"No Transport");return b},param:function(e,n){var i=[],a=function(e,t){t=G.isFunction(t)?t():t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=G.ajaxSettings.traditional),G.isArray(e)||e.jquery&&!G.isPlainObject(e))G.each(e,function(){a(this.name,this.value)});else for(var o in e)h(o,e[o],n,a);return i.join("&").replace(Ut,"+")}}),G.extend({active:0,lastModified:{},etag:{}});var sn=G.now(),cn=/(\=)\?(&|$)|\?\?/i;G.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return G.expando+"_"+sn++}}),G.ajaxPrefilter("json jsonp",function(t,n,i){var a="application/x-www-form-urlencoded"===t.contentType&&"string"==typeof t.data;if("jsonp"===t.dataTypes[0]||t.jsonp!==!1&&(cn.test(t.url)||a&&cn.test(t.data))){var o,r=t.jsonpCallback=G.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s=e[r],c=t.url,l=t.data,u="$1"+r+"$2";return t.jsonp!==!1&&(c=c.replace(cn,u),t.url===c&&(a&&(l=l.replace(cn,u)),t.data===l&&(c+=(/\?/.test(c)?"&":"?")+t.jsonp+"="+r))),t.url=c,t.data=l,e[r]=function(e){o=[e]},i.always(function(){e[r]=s,o&&G.isFunction(s)&&e[r](o[0])}),t.converters["script json"]=function(){return o||G.error(r+" was not called"),o[0]},t.dataTypes[0]="json","script"}}),G.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return G.globalEval(e),e}}}),G.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),G.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=N.head||N.getElementsByTagName("head")[0]||N.documentElement;return{send:function(a,o){n=N.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,a){(a||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n),n=t,a||o(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var ln,un=e.ActiveXObject?function(){for(var e in ln)ln[e](0,1)}:!1,hn=0;G.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&c()||s()}:c,function(e){G.extend(G.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(G.ajaxSettings.xhr()),G.support.ajax&&G.ajaxTransport(function(n){if(!n.crossDomain||G.support.cors){var i;return{send:function(a,o){var r,s,c=n.xhr();if(n.username?c.open(n.type,n.url,n.async,n.username,n.password):c.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)c[s]=n.xhrFields[s];n.mimeType&&c.overrideMimeType&&c.overrideMimeType(n.mimeType),!n.crossDomain&&!a["X-Requested-With"]&&(a["X-Requested-With"]="XMLHttpRequest");try{for(s in a)c.setRequestHeader(s,a[s])}catch(l){}c.send(n.hasContent&&n.data||null),i=function(e,a){var s,l,u,h,d;try{if(i&&(a||4===c.readyState))if(i=t,r&&(c.onreadystatechange=G.noop,un&&delete ln[r]),a)4!==c.readyState&&c.abort();else{s=c.status,u=c.getAllResponseHeaders(),h={},d=c.responseXML,d&&d.documentElement&&(h.xml=d),h.text=c.responseText;try{l=c.statusText}catch(g){l=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=h.text?200:404}}catch(m){a||o(-1,m)}h&&o(s,l,h,u)},n.async&&4!==c.readyState?(r=++hn,un&&(ln||(ln={},G(e).unload(un)),ln[r]=i),c.onreadystatechange=i):i()},abort:function(){i&&i(0,1)}}}});var dn,gn,mn,pn,fn={},_n=/^(?:toggle|show|hide)$/,yn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,vn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];G.fn.extend({show:function(e,t,n){var o,r;if(e||0===e)return this.animate(a("show",3),e,t,n);for(var s=0,c=this.length;c>s;s++)o=this[s],o.style&&(r=o.style.display,!G._data(o,"olddisplay")&&"none"===r&&(r=o.style.display=""),""===r&&"none"===G.css(o,"display")&&G._data(o,"olddisplay",i(o.nodeName)));for(s=0;c>s;s++)o=this[s],o.style&&(r=o.style.display,(""===r||"none"===r)&&(o.style.display=G._data(o,"olddisplay")||""));return this},hide:function(e,t,n){if(e||0===e)return this.animate(a("hide",3),e,t,n);for(var i=0,o=this.length;o>i;i++)if(this[i].style){var r=G.css(this[i],"display");"none"!==r&&!G._data(this[i],"olddisplay")&&G._data(this[i],"olddisplay",r)}for(i=0;o>i;i++)this[i].style&&(this[i].style.display="none");return this},_toggle:G.fn.toggle,toggle:function(e,t,n){var i="boolean"==typeof e;return G.isFunction(e)&&G.isFunction(t)?this._toggle.apply(this,arguments):null==e||i?this.each(function(){var t=i?e:G(this).is(":hidden");G(this)[t?"show":"hide"]()}):this.animate(a("toggle",3),e,t,n),this},fadeTo:function(e,t,n,i){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,a){var o=G.speed(t,n,a);return G.isEmptyObject(e)?this.each(o.complete,[!1]):(e=G.extend({},e),this[o.queue===!1?"each":"queue"](function(){o.queue===!1&&G._mark(this);var t,n,a,r,s,c,l,u,h,d=G.extend({},o),g=1===this.nodeType,m=g&&G(this).is(":hidden");d.animatedProperties={};for(a in e){if(t=G.camelCase(a),a!==t&&(e[t]=e[a],delete e[a]),n=e[t],G.isArray(n)?(d.animatedProperties[t]=n[1],n=e[t]=n[0]):d.animatedProperties[t]=d.specialEasing&&d.specialEasing[t]||d.easing||"swing","hide"===n&&m||"show"===n&&!m)return d.complete.call(this);g&&("height"===t||"width"===t)&&(d.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===G.css(this,"display")&&"none"===G.css(this,"float")&&(G.support.inlineBlockNeedsLayout?(r=i(this.nodeName),"inline"===r?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)):this.style.display="inline-block"))}null!=d.overflow&&(this.style.overflow="hidden");for(a in e)s=new G.fx(this,d,a),n=e[a],_n.test(n)?s["toggle"===n?m?"show":"hide":n]():(c=yn.exec(n),l=s.cur(),c?(u=parseFloat(c[2]),h=c[3]||(G.cssNumber[a]?"":"px"),"px"!==h&&(G.style(this,a,(u||1)+h),l=(u||1)/s.cur()*l,G.style(this,a,l+h)),c[1]&&(u=("-="===c[1]?-1:1)*u+l),s.custom(l,u,h)):s.custom(l,n,""));return!0}))},stop:function(e,t){return e&&this.queue([]),this.each(function(){var e=G.timers,n=e.length;for(t||G._unmark(!0,this);n--;)e[n].elem===this&&(t&&e[n](!0),e.splice(n,1))}),t||this.dequeue(),this}}),G.each({slideDown:a("show",1),slideUp:a("hide",1),slideToggle:a("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){G.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),G.extend({speed:function(e,t,n){var i=e&&"object"==typeof e?G.extend({},e):{complete:n||!n&&t||G.isFunction(e)&&e,duration:e,easing:n&&t||t&&!G.isFunction(t)&&t};return i.duration=G.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in G.fx.speeds?G.fx.speeds[i.duration]:G.fx.speeds._default,i.old=i.complete,i.complete=function(e){G.isFunction(i.old)&&i.old.call(this),i.queue!==!1?G.dequeue(this):e!==!1&&G._unmark(this)},i},easing:{linear:function(e,t,n,i){return n+i*e},swing:function(e,t,n,i){return(-Math.cos(e*Math.PI)/2+.5)*i+n}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),G.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(G.fx.step[this.prop]||G.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var e,t=G.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?t&&"auto"!==t?t:0:e},custom:function(e,t,n){function i(e){return a.step(e)}var a=this,o=G.fx;this.startTime=pn||r(),this.start=e,this.end=t,this.unit=n||this.unit||(G.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,i.elem=this.elem,i()&&G.timers.push(i)&&!mn&&(mn=setInterval(o.tick,o.interval))},show:function(){this.options.orig[this.prop]=G.style(this.elem,this.prop),this.options.show=!0,this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),G(this.elem).show()},hide:function(){this.options.orig[this.prop]=G.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,i=pn||r(),a=!0,o=this.elem,s=this.options;if(e||i>=s.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),s.animatedProperties[this.prop]=!0;for(t in s.animatedProperties)s.animatedProperties[t]!==!0&&(a=!1);if(a){if(null!=s.overflow&&!G.support.shrinkWrapBlocks&&G.each(["","X","Y"],function(e,t){o.style["overflow"+t]=s.overflow[e]}),s.hide&&G(o).hide(),s.hide||s.show)for(var c in s.animatedProperties)G.style(o,c,s.orig[c]);s.complete.call(o)}return!1}return 1/0==s.duration?this.now=i:(n=i-this.startTime,this.state=n/s.duration,this.pos=G.easing[s.animatedProperties[this.prop]](this.state,n,0,1,s.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},G.extend(G.fx,{tick:function(){for(var e=G.timers,t=0;t<e.length;++t)e[t]()||e.splice(t--,1);e.length||G.fx.stop()},interval:13,stop:function(){clearInterval(mn),mn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){G.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&null!=e.elem.style[e.prop]?e.elem.style[e.prop]=("width"===e.prop||"height"===e.prop?Math.max(0,e.now):e.now)+e.unit:e.elem[e.prop]=e.now}}}),G.expr&&G.expr.filters&&(G.expr.filters.animated=function(e){return G.grep(G.timers,function(t){return e===t.elem}).length});var xn=/^t(?:able|d|h)$/i,Sn=/^(?:body|html)$/i;G.fn.offset="getBoundingClientRect"in N.documentElement?function(e){var t,i=this[0];if(e)return this.each(function(t){G.offset.setOffset(this,e,t)});if(!i||!i.ownerDocument)return null;if(i===i.ownerDocument.body)return G.offset.bodyOffset(i);try{t=i.getBoundingClientRect()}catch(a){}var o=i.ownerDocument,r=o.documentElement;if(!t||!G.contains(r,i))return t?{top:t.top,left:t.left}:{top:0,left:0};var s=o.body,c=n(o),l=r.clientTop||s.clientTop||0,u=r.clientLeft||s.clientLeft||0,h=c.pageYOffset||G.support.boxModel&&r.scrollTop||s.scrollTop,d=c.pageXOffset||G.support.boxModel&&r.scrollLeft||s.scrollLeft,g=t.top+h-l,m=t.left+d-u;return{top:g,left:m}}:function(e){var t=this[0];if(e)return this.each(function(t){G.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return G.offset.bodyOffset(t);G.offset.initialize();for(var n,i=t.offsetParent,a=t,o=t.ownerDocument,r=o.documentElement,s=o.body,c=o.defaultView,l=c?c.getComputedStyle(t,null):t.currentStyle,u=t.offsetTop,h=t.offsetLeft;(t=t.parentNode)&&t!==s&&t!==r&&(!G.offset.supportsFixedPosition||"fixed"!==l.position);)n=c?c.getComputedStyle(t,null):t.currentStyle,u-=t.scrollTop,h-=t.scrollLeft,t===i&&(u+=t.offsetTop,h+=t.offsetLeft,G.offset.doesNotAddBorder&&(!G.offset.doesAddBorderForTableAndCells||!xn.test(t.nodeName))&&(u+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),a=i,i=t.offsetParent),G.offset.subtractsBorderForOverflowNotVisible&&"visible"!==n.overflow&&(u+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),l=n;return("relative"===l.position||"static"===l.position)&&(u+=s.offsetTop,h+=s.offsetLeft),G.offset.supportsFixedPosition&&"fixed"===l.position&&(u+=Math.max(r.scrollTop,s.scrollTop),h+=Math.max(r.scrollLeft,s.scrollLeft)),{top:u,left:h}},G.offset={initialize:function(){var e,t,n,i=N.body,a=N.createElement("div"),o=parseFloat(G.css(i,"marginTop"))||0,r="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";G.extend(a.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),a.innerHTML=r,i.insertBefore(a,i.firstChild),e=a.firstChild,t=e.firstChild,n=e.nextSibling.firstChild.firstChild,this.doesNotAddBorder=5!==t.offsetTop,this.doesAddBorderForTableAndCells=5===n.offsetTop,t.style.position="fixed",t.style.top="20px",this.supportsFixedPosition=20===t.offsetTop||15===t.offsetTop,t.style.position=t.style.top="",e.style.overflow="hidden",e.style.position="relative",this.subtractsBorderForOverflowNotVisible=-5===t.offsetTop,this.doesNotIncludeMarginInBodyOffset=i.offsetTop!==o,i.removeChild(a),G.offset.initialize=G.noop},bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return G.offset.initialize(),G.offset.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(G.css(e,"marginTop"))||0,n+=parseFloat(G.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var i=G.css(e,"position");"static"===i&&(e.style.position="relative");var a,o,r=G(e),s=r.offset(),c=G.css(e,"top"),l=G.css(e,"left"),u=("absolute"===i||"fixed"===i)&&G.inArray("auto",[c,l])>-1,h={},d={};u?(d=r.position(),a=d.top,o=d.left):(a=parseFloat(c)||0,o=parseFloat(l)||0),G.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(h.top=t.top-s.top+a),null!=t.left&&(h.left=t.left-s.left+o),"using"in t?t.using.call(e,h):r.css(h)}},G.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),i=Sn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(G.css(e,"marginTop"))||0,n.left-=parseFloat(G.css(e,"marginLeft"))||0,i.top+=parseFloat(G.css(t[0],"borderTopWidth"))||0,i.left+=parseFloat(G.css(t[0],"borderLeftWidth"))||0,{top:n.top-i.top,left:n.left-i.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||N.body;e&&!Sn.test(e.nodeName)&&"static"===G.css(e,"position");)e=e.offsetParent;return e})}}),G.each(["Left","Top"],function(e,i){var a="scroll"+i;G.fn[a]=function(i){var o,r;return i===t?(o=this[0])?(r=n(o),r?"pageXOffset"in r?r[e?"pageYOffset":"pageXOffset"]:G.support.boxModel&&r.document.documentElement[a]||r.document.body[a]:o[a]):null:this.each(function(){r=n(this),r?r.scrollTo(e?G(r).scrollLeft():i,e?i:G(r).scrollTop()):this[a]=i})}}),G.each(["Height","Width"],function(e,n){var i=n.toLowerCase();G.fn["inner"+n]=function(){var e=this[0];return e&&e.style?parseFloat(G.css(e,i,"padding")):null},G.fn["outer"+n]=function(e){var t=this[0];return t&&t.style?parseFloat(G.css(t,i,e?"margin":"border")):null},G.fn[i]=function(e){var a=this[0];if(!a)return null==e?null:this;if(G.isFunction(e))return this.each(function(t){var n=G(this);n[i](e.call(this,t,n[i]()))});if(G.isWindow(a)){var o=a.document.documentElement["client"+n],r=a.document.body;return"CSS1Compat"===a.document.compatMode&&o||r&&r["client"+n]||o}if(9===a.nodeType)return Math.max(a.documentElement["client"+n],a.body["scroll"+n],a.documentElement["scroll"+n],a.body["offset"+n],a.documentElement["offset"+n]);if(e===t){var s=G.css(a,i),c=parseFloat(s);return G.isNaN(c)?s:c}return this.css(i,"string"==typeof e?e:e+"px")}}),e.jQuery=e.$=G}(window);var q=window.jQuery;if(js.JQuery=q,q.fn.iterator=function(){return{pos:0,j:this,hasNext:function(){return this.pos<this.j.length},next:function(){return $(this.j[this.pos++])}}},"undefined"!=typeof document&&(js.Lib.document=document),"undefined"!=typeof window&&(js.Lib.window=window,js.Lib.window.onerror=function(e,t,n){var i=js.Lib.onerror;return null==i?!1:i(e,[t+":"+n])}),"undefined"==typeof deconcept)var deconcept=new Object;"undefined"==typeof deconcept.util&&(deconcept.util=new Object),"undefined"==typeof deconcept.SWFObjectUtil&&(deconcept.SWFObjectUtil=new Object),deconcept.SWFObject=function(e,t,n,i,a,o,r,s,c,l){if(document.getElementById){this.DETECT_KEY=l?l:"detectflash",this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY),this.params=new Object,this.variables=new Object,this.attributes=new Array,e&&this.setAttribute("swf",e),t&&this.setAttribute("id",t),n&&this.setAttribute("width",n),i&&this.setAttribute("height",i),a&&this.setAttribute("version",new deconcept.PlayerVersion(a.toString().split("."))),this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion(),!window.opera&&document.all&&this.installedVer.major>7&&(deconcept.SWFObject.doPrepUnload=!0),o&&this.addParam("bgcolor",o);var u=r?r:"high";this.addParam("quality",u),this.setAttribute("useExpressInstall",!1),this.setAttribute("doExpressInstall",!1);var h=s?s:window.location;this.setAttribute("xiRedirectUrl",h),this.setAttribute("redirectUrl",""),c&&this.setAttribute("redirectUrl",c)
}},deconcept.SWFObject.prototype={useExpressInstall:function(e){this.xiSWFPath=e?e:"expressinstall.swf",this.setAttribute("useExpressInstall",!0)},setAttribute:function(e,t){this.attributes[e]=t},getAttribute:function(e){return this.attributes[e]},addParam:function(e,t){this.params[e]=t},getParams:function(){return this.params},addVariable:function(e,t){this.variables[e]=t},getVariable:function(e){return this.variables[e]},getVariables:function(){return this.variables},getVariablePairs:function(){var e,t=new Array,n=this.getVariables();for(e in n)t[t.length]=e+"="+n[e];return t},getSWFHTML:function(){var e="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){this.getAttribute("doExpressInstall")&&(this.addVariable("MMplayerType","PlugIn"),this.setAttribute("swf",this.xiSWFPath)),e='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'"',e+=' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" ';var t=this.getParams();for(var n in t)e+=[n]+'="'+t[n]+'" ';var i=this.getVariablePairs().join("&");i.length>0&&(e+='flashvars="'+i+'"'),e+="/>"}else{this.getAttribute("doExpressInstall")&&(this.addVariable("MMplayerType","ActiveX"),this.setAttribute("swf",this.xiSWFPath)),e='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'">',e+='<param name="movie" value="'+this.getAttribute("swf")+'" />';var a=this.getParams();for(var n in a)e+='<param name="'+n+'" value="'+a[n]+'" />';var o=this.getVariablePairs().join("&");o.length>0&&(e+='<param name="flashvars" value="'+o+'" />'),e+="</object>"}return e},write:function(e){if(this.getAttribute("useExpressInstall")){var t=new deconcept.PlayerVersion([6,0,65]);this.installedVer.versionIsValid(t)&&!this.installedVer.versionIsValid(this.getAttribute("version"))&&(this.setAttribute("doExpressInstall",!0),this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl"))),document.title=document.title.slice(0,47)+" - Flash Player Installation",this.addVariable("MMdoctitle",document.title))}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var n="string"==typeof e?document.getElementById(e):e;return n.innerHTML=this.getSWFHTML(),!0}return""!=this.getAttribute("redirectUrl")&&document.location.replace(this.getAttribute("redirectUrl")),!1}},deconcept.SWFObjectUtil.getPlayerVersion=function(){var e=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var t=navigator.plugins["Shockwave Flash"];t&&t.description&&(e=new deconcept.PlayerVersion(t.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".")))}else if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0)for(var n=1,i=3;n;)try{i++,n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+i),e=new deconcept.PlayerVersion([i,0,0])}catch(a){n=null}else{try{var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(a){try{var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");e=new deconcept.PlayerVersion([6,0,21]),n.AllowScriptAccess="always"}catch(a){if(6==e.major)return e}try{n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(a){}}null!=n&&(e=new deconcept.PlayerVersion(n.GetVariable("$version").split(" ")[1].split(",")))}return e},deconcept.PlayerVersion=function(e){this.major=null!=e[0]?parseInt(e[0]):0,this.minor=null!=e[1]?parseInt(e[1]):0,this.rev=null!=e[2]?parseInt(e[2]):0},deconcept.PlayerVersion.prototype.versionIsValid=function(e){return this.major<e.major?!1:this.major>e.major?!0:this.minor<e.minor?!1:this.minor>e.minor?!0:this.rev<e.rev?!1:!0},deconcept.util={getRequestParameter:function(e){var t=document.location.search||document.location.hash;if(null==e)return t;if(t)for(var n=t.substring(1).split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return n[i].substring(n[i].indexOf("=")+1);return""}},deconcept.SWFObjectUtil.cleanupSWFs=function(){for(var e=document.getElementsByTagName("OBJECT"),t=e.length-1;t>=0;t--){e[t].style.display="none";for(var n in e[t])"function"==typeof e[t][n]&&(e[t][n]=function(){})}},deconcept.SWFObject.doPrepUnload&&(deconcept.unloadSet||(deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){},__flash_savedUnloadHandler=function(){},window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs)},window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload),deconcept.unloadSet=!0)),!document.getElementById&&document.all&&(document.getElementById=function(e){return document.all[e]});var getQueryParamValue=deconcept.util.getRequestParameter,FlashObject=deconcept.SWFObject,SWFObject=deconcept.SWFObject;js.SWFObject=deconcept.SWFObject,Main.TEST_MODE_ENABLED=!1,Main.TARGET_FPS=60,Main.TARGET_FPS_MOBILE=30,Main.CANVAS_WIDTH_LANDSCAPE=750,Main.CANVAS_HEIGHT_LANDSCAPE=500,Main.CANVAS_WIDTH_PORTRAIT=0,Main.CANVAS_HEIGHT_PORTRAIT=0,Main.BACKGROUND_COLOR="#000000",Main.BASE_PATH="",Main.gamificationInterface=null,core.GameObject._currentInstanceId=0,core.EntityEvent.VISIBILITY_OFF="visibilityOff",core.EntityEvent.VISIBILITY_ON="visibilityOn",core.EntityEvent.DISPLAY_UPDATE="displayUpdate",core.EntityEvent.ADDED_TO_PARENT="addedToParent",core.EntityEvent.REMOVED_FROM_PARENT="removedFromParent",core.EntityEvent.MOUSE_DOWN="mouseDown",core.EntityEvent.MOUSE_UP="mouseUp",core.EntityEvent.MOUSE_MOVE="mouseMove",core.EntityEvent.MOUSE_OUT="mouseOut",core.EntityEvent.MOUSE_OVER="mouseOver",core.EntityEvent.MOUSE_CLICK="mouseClick",core.EntityEvent.DESTROY="destroy",core.GameConfig._properties=new Hash,core.GameManager.ORIENTATION_HORIZONTAL=0,core.GameManager.ORIENTATION_VERTICAL=1,core.GameManager.MAX_TIMESTEP=1/27,core.GameManager.PHYSICS_SCALE=30,core.GameManager._prevElapsedTime=0,core.GameManager._elapsedTime=0,core.GameManager.instance=null,core.Layer._currentZIndex=0,core.LoadBatch.MIN_LOAD_TIME=0,core.StateTransition.TRANSITION_DEFAULT=0,core.StateTransition.TRANSITION_IN_ONLY=1,core.StateTransition.TRANSITION_OUT_ONLY=2,core.StateTransition.DEFAULT_DURATION=1,core.StateTransition.DEFAULT_HALFWAY_DELAY=.15,core.components.FlashAnimation._cachedFrames=new Hash,core.components.SlackMovement.EPSILON=5e-5,core.components.tween.Tween.LINEAR="linear",core.components.tween.Tween.EASE_IN_QUAD="easeInQuad",core.components.tween.Tween.EASE_IN_QUINT="easeInQuint",core.components.tween.Tween.EASE_OUT_QUINT="easeOutQuint",core.components.tween.Tween.EASE_OUT_BOUNCE="easeOutBounce",core.components.tween.Tween.EASE_OUT_BACK="easeOutBack",core.managers.AssetManager.assetList=new Hash,core.managers.FontManager._instance=null,core.managers.FontManager._elementHookMap=new Hash,core.managers.InputManager._instance=null,core.managers.PhysicsEvent.RAYCAST_CHECK="raycastCheck",core.managers.PhysicsManager._instance=null,core.managers.SoundManager._masterVolume=1,core.managers.SoundManager._musicVolume=.65,core.managers.SoundManager._soundVolume=1,core.managers.SoundManager._musicMuted=!1,core.managers.SoundManager._soundMuted=!1,core.managers.SoundManager._musicTrack=null,core.managers.SoundManager._soundsPlaying=[],core.managers.SoundManager._isWebkitEnabled=!1,core.managers.SoundManager._useFlashSound=!1,core.managers.SoundManager._flashObject=null,core.managers.SoundManager._soundTimers=new Hash,game.DeferredVoManager.DEFER_TIME_DEFAULT=1.5,game.DeferredVoManager._instance=null,game.EntityFactory._descriptionTrack=null,game.GamificationComponent.CURRENCY_GAIN_UI_Y_OFFSET=45,game.GamificationComponent.CURRENCY_COUNT_DOWN_DELAY=1,game.GamificationComponent.CURRENCY_GAIN_UI_HIDE_DELAY=.5,game.GamificationComponent.CURRENCY_GAIN_UI_TWEEN_IN_DURATION=.35,game.GamificationComponent.CURRENCY_GAIN_UI_TWEEN_OUT_DURATION=.35,game.GamificationComponent.BUTTON_SHOW_HIDE_DURATION=.35,game.GamificationComponent.TIME_PER_CURRENCY_COUNT=.05,game.GamificationInterface.MAX_CURRENCY=999,game.GamificationInterface.REWARD_1="reward1",game.GamificationInterface.REWARD_2="reward2",game.GamificationInterface.REWARD_3="reward3",game.GamificationInterface.FONT_FAMILY_DEFAULT="disneyJunior",game.GamificationInterface.FONT_FAMILY_NUMBERS="disneyJunior",game.GamificationInterface._instance=null,game.GamificationInterfaceEvent.SHOW_UI_SCREEN="showPopupScreen",game.GamificationInterfaceEvent.HIDE_UI_SCREEN="hidePopupScreen",game.GamificationInterfaceEvent.SHOW_UI_BUTTON="showUiButton",game.GamificationInterfaceEvent.HIDE_UI_BUTTON="hideUiButton",game.GamificationInterfaceEvent.UI_BUTTON_UPDATE="uiButtonUpdate",game.GamificationInterfaceEvent.UPDATE_CURRENCY="updateCurrency",game.GamificationInterfaceEvent.ASSETS_READY="assetsReady",game.GamificationInterfaceEvent.ACTIVATE_REWARD="activateReward",game.GamificationInterfaceEvent.DEACTIVATE_REWARD="deactivateReward",game.GamificationInterfaceEvent.CLICK_REWARD="clickReward",game.GamificationUi.REWARD_1_ID="reward1",game.GamificationUi.REWARD_2_ID="reward2",game.GamificationUi.REWARD_3_ID="reward3",game.GamificationUi.ENTER_TIME=.35,game.GamificationUi.TIME_PER_CURRENCY_COUNT=.05,game.GamificationUi.BLACK_OVERLAY_ALPHA=.5,game.GamificationUi.BOTTOM_BAR_OFFSET_FROM_BOTTOM=-50,game.GamificationUiEvent.ENTER_COMPLETE="enterComplete",game.GamificationUiEvent.EXIT_COMPLETE="exitComplete",game.GamificationUiEvent.CLOSE_CLICK="closeClick",game.GamificationUiEvent.CLICK_REWARD="clickReward",game.RewardData.TYPE_NORMAL="normal",game.RewardData.TYPE_TOGGLABLE="togglable",game.RewardData.TYPE_PRINTABLE="printable",game.UiButtonModes.SMALL=0,game.UiButtonModes.LARGE=1,haxe.io.Output.LN2=Math.log(2),js.Lib.onerror=null,Main.main()}();